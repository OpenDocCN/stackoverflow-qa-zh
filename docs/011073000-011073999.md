# StackOverflow 问答 11073000-11073999

# emacs - Emacs - 如何避免或替换错误的字符编码？

> ID：11073003
> 
> 赞同：2
> 
> 时间：2012-06-17T16:37:33.783
> 
> 标签：emacs, encoding, utf-8, ms-word, dos

假设我收到了一个用 MS word 编写并保存为纯文本 (.txt) 的西班牙语文本。不幸的是，所有的西班牙口音都是这样出现的：

```
Un \372ltimo an\341lisis 
```

谁能告诉我如何避免这种情况，或者至少如何替换这些字符？replace-regexp-functions 根本找不到它们，否则我可以编写一个小 elisp 函数，用相关的西班牙重音字符替换它们的每次出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:54:18.583

这看起来像 ISO 8859-1 (Latin-1) 编码。

而是使用该编码系统访问文件。如果 Emacs 没有自动识别编码系统，您可以使用带有`revert-buffer-with-coding-system`( `C-x RET r`) 的显式编码系统重新访问该文件。

例如，如果您正在查看您描述的乱码文件，

```
C-x RET r
latin-1 RET
yes RET 
```

然后你可以设置你想要保存的编码系统 ( `C-x RET f`) 并指定类似的东西`utf-8`。

# .net - 带有广播地址的 UdpDiscoveryEndpoint

> ID：11073006
> 
> 赞同：0
> 
> 时间：2012-06-17T16:38:15.467
> 
> 标签：.net, wcf, c#-4.0, ws-discovery

是否可以将 Wcf UdpDiscoveryEndpoint 与广播地址而不是多播一起使用？我尝试使用广播地址，但抛出了异常，这是 WcfDiscovery 的限制吗？

这是一个例外：

```
System.Net.Sockets.SocketException (0x80004005): The requested address is not valid in its context
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at System.ServiceModel.Channels.UdpUtility.BindSocket(Socket socket, IPEndPoint localEndpoint)
   at System.ServiceModel.Channels.UdpUtility.CreateListenSocket(IPAddress ipAddress, Int32& port, Int32 receiveBufferSize, Int32 timeToLive, Int32 interfaceIndex, Boolean allowMulticastLoopback, Boolean isLoopbackAdapter)
   at System.ServiceModel.Channels.UdpChannelListener.InitSockets(Boolean updateListenPort)
   at System.ServiceModel.Channels.UdpChannelListener..ctor(IUdpTransportSettings settings, BindingContext context)
   at System.ServiceModel.Channels.UdpTransportBindingElement.BuildChannelListener[TChannel](BindingContext context)
   at System.ServiceModel.Channels.BindingContext.BuildInnerChannelListener[TChannel]()
   at System.ServiceModel.Channels.MessageEncodingBindingElement.InternalBuildChannelListener[TChannel](BindingContext context)
   at System.ServiceModel.Channels.TextMessageEncodingBindingElement.BuildChannelListener[TChannel](BindingContext context)
   at System.ServiceModel.Channels.BindingContext.BuildInnerChannelListener[TChannel]()
   at System.ServiceModel.Channels.Binding.BuildChannelListener[TChannel](Uri listenUriBaseAddress, String listenUriRelativeAddress, ListenUriMode listenUriMode, BindingParameterCollection parameters)
   at System.ServiceModel.Description.DispatcherBuilder.MaybeCreateListener(Boolean actuallyCreate, Type[] supportedChannels, Binding binding, BindingParameterCollection parameters, Uri listenUriBaseAddress, String listenUriRelativeAddress, ListenUriMode listenUriMode, ServiceThrottle throttle, IChannelListener& result, Boolean supportContextSession)
   at System.ServiceModel.Description.DispatcherBuilder.BuildChannelListener(StuffPerListenUriInfo stuff, ServiceHostBase serviceHost, Uri listenUri, ListenUriMode listenUriMode, Boolean supportContextSession, IChannelListener& result)
   at System.ServiceModel.Description.DispatcherBuilder.InitializeServiceHost(ServiceDescription description, ServiceHostBase serviceHost)
   at System.ServiceModel.ServiceHostBase.InitializeRuntime()
   at System.ServiceModel.ServiceHostBase.OnBeginOpen()
   at System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:59:36.247

我在客户的服务器上遇到了同样的问题。事实证明，他配置了两个具有重叠子网掩码的网络设备。因此 udpDiscoveryEndpoint 无法开始侦听上述异常。

# django - 重新排序查询以将所有作者分组在一起，并根据发布日期按降序排列

> ID：11073007
> 
> 赞同：2
> 
> 时间：2012-06-17T16:38:17.653
> 
> 标签：django

我正在建立一个论坛，一个人发布一条消息，其他几个人回复它。

我有一个消息模型和一个响应模型如下：

```
class Messages (models.Model):
    author = models.ForeignKey(User)
    message = models.TextField()
    def __unicode__(self):
        return self.message

class Responses (models.Model):
    message = models.ForeignKey(Messages)
    responder = models.ForeignKey(User, related_name='responder')
    rsp_to = models.ForeignKey(User, related_name='rsp_to')
    rsp_from = models.ForeignKey(User, related_name='rsp_from')
    response = models.TextField()
    pub_date = models.DateTimeField('date_published')
    def __unicode__(self):
        return self.message 
```

我想获得一个根据响应者组织的查询集，以便来自最新响应者的所有响应都是第一个，第二个最新响应者的响应是第二个，依此类推。

示例数据库表：

```
pk  message  responder  rsp_to  rsp_from  response  pub_date
------------------------------------------------------------
1    a        User.2  a.author   User.2    ....      1
2    a        User.3  a.author   User.3    ....      2
3    a        User.3  User.3    a.author   ....      3
4    a        User.4  a.author   User.4    ....      4
5    a        User.4  User.4    a.author   ....      5
6    a        User.2  User.2    a.author   ....      6
7    a        User.3  a.author   User.3    ....      7
8    a        User.3  User.3    a.author   ....      8
9    a        User.4  a.author   User.4    ....      9 
```

重新排序的查询集：

```
pk  message  responder  rsp_to  rsp_from  response  pub_date
------------------------------------------------------------
9    a        User.4  a.author   User.4    ....      9
5    a        User.4   User.4   a.author   ....      5
4    a        User.4  a.author   User.4    ....      4
8    a        User.3   User.3   a.author   ....      8
7    a        User.3  a.author   User.3    ....      7
3    a        User.3   User.3   a.author   ....      3
2    a        User.3  a.author   User.3    ....      2
6    a        User.2   User.2   a.author   ....      6
1    a        User.2  a.author   User.2    ....      1 
```

或者表示为：

```
r = [<all responses from latest responder>, <all responses from 2nd latest responder>,..., <all responses from earliest responder>] 
```

如果我开始：

```
r = Responses.objects.filter(message="a").order_by('-pub_date') 
```

我先得到最新的回复。如何重新排序查询集，以便来自最新的唯一响应者的所有响应在查询集中首先分组，来自第二个唯一响应者的所有响应都在第二个分组，等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:27:11.923

## 使用排序（）

[`sorted()`](http://docs.python.org/library/functions.html#sorted)让我们首先考虑使用良好的旧函数在 Python 中进行排序。它是一种[比较排序](http://en.wikipedia.org/wiki/Comparison_sort)，即它通过成对比较项目进行排序，一次一对，并为每一对决定哪一个应该先出现。比较排序仅在比较器（作为排序参数给出的函数）定义了[总顺序](http://en.wikipedia.org/wiki/Total_order)时才有效：

1.  如果 a ≤ b 且 b ≤ a 则 a = b （反对称，实际上对于比较排序不是必需的）；
2.  如果 a ≤ b 且 b ≤ c 则 a ≤ c（传递性）；
3.  a ≤ b 或 b ≤ a（总数）。

因此，如果您可以定义一个比较器，它从表中获取两行并决定哪一行先行，并且该比较器定义了总顺序，那么您可以`sorted`使用该比较器进行调用。

但是对于您的问题，这样的比较器根本不存在。当两个不同的用户只考虑两行时，你永远不知道应该先出现哪一行。您将始终需要知道这些作者的最新帖子。底线：你不能使用`sorted()`

## 使用 SQL

我不知道 SQL 是否可以处理这个问题。尝试重写您的问题，仅使用您拥有的表格，省略所有 Django 和 Python 内容。如果您创建这样的问题，请添加从该问题到该问题的链接。如果 SQL 可以处理它，那么您可以调用`Responses.objects.sql()`.

## 使用存储桶

下面的代码是如何使用存储桶按您想要的方式排序的示例。我使用了一个虚拟类 Response，专注于原则。

```
from random import randint, shuffle

# == Data definition ==
class Response:
  user = None #int
  time = None #int
  def __str__(self):
    return '(%d:%2d)' % (self.user,self.time)

# == Create random data ==
responses = []
for i in range(20):
  r = Response()
  r.user = randint(1,4)
  r.time = i
  responses.append(r)
shuffle(responses)

# == Put in buckets ==
bucketdict = {}
for r in responses:
  if r.user in bucketdict:
    bucketdict[r.user].append(r)
  else:
    bucketdict[r.user] = [r]

# == create list from dict ==
bucketlist = bucketdict.items()
def printbucketlist():
  for user,user_rsps in bucketlist:
    print user, 
    for rsp in user_rsps:
      print rsp,
    print
  print
printbucketlist()

# == Sort responses within each bucket ==
def rsp_comparator(r1,r2):
  return r2.time - r1.time
for user,responses in  bucketlist:
  responses.sort(rsp_comparator)
printbucketlist()

# == Sort bucketlist ==
def bucket_cmp(b1,b2):
  # assumes that the first response in the list has the highet time
  return b2[1][0].time - b1[1][0].time
bucketlist = sorted(bucketlist,cmp=bucket_cmp)
printbucketlist()

# == Concatenate into one list ==
sortedresponses = []
for user, user_rsps in bucketlist:
  for response in user_rsps:
    sortedresponses.append(response)
for response in sortedresponses:
  print response 
```

# android - ActionBarSherlock NAVIGATION_MODE_LIST textcolor

> ID：11073014
> 
> 赞同：3
> 
> 时间：2012-06-17T16:39:33.103
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock 如下：

```
Context context = getSupportActionBar().getThemedContext();
ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(
        context, R.array.dropdown, R.layout.sherlock_spinner_item);
list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
getSupportActionBar().setListNavigationCallbacks(list, this); 
```

但是，我无法弄清楚如何在下拉列表中设置所选项目的 textcolor 样式。我的样式文件如下所示：

```
<style name="MyTheme.ActionBar.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
    <item name="android:textColor">#ABABAB</item>
</style> 
```

但这只会影响标题文本，而不影响微调器的文本。

我需要覆盖的属性的任何想法？

谢谢，

斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T09:50:12.833

您必须在 sherlock 库中编辑样式：res/values/abs_string.xml

```
<style name="Sherlock.__Widget.Holo.DropDownItem" parent="Widget">
  <item name="android:textAppearance">@style/TextAppearance.Sherlock.Widget.DropDownItem‌​&lt;/item>
  <item name="android:paddingLeft">8dp</item>
  <item name="android:paddingRight">8dp</item>
  <item name="android:gravity">center_vertical</item> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T09:55:32.100

这是该 xml 的一部分，您应该编辑它

> @style/TextAppearance.Sherlock.Widget.DropDownItem 8dp 8dp center_vertical

# asp.net - Visual Studio 2010 给出错误“外部组件已引发异常”

> ID：11073015
> 
> 赞同：1
> 
> 时间：2012-06-17T16:39:39.347
> 
> 标签：asp.net, .net, visual-studio-2010

我在 Windows 7 上运行 Visual Studio Ultimate。这是我的问题的描述：

*   我的 VS 2010 一直运行得非常好，直到今天当我尝试打开一个新网站时它开始给出错误“**外部组件已引发异常”。**虽然创建一个新的 Web 应用程序工作正常，但我无法运行它们中的任何一个。

*   在尝试运行之前创建的网站/webapps 时，它给出的错误是“**无法启动 ASP.NET 开发服务器**”。

*   当我尝试调试网站/Web 应用程序时，我收到错误消息：“无法启动 ASP.NET 开发服务器。**初始化已完成时尝试执行初始化操作**”。

*   当我尝试打开 Windows 窗体应用程序和其他项目时，会出现类似的错误。

*   事件查看器上没有记录任何错误，除了上面提到的内容之外，我看不到任何其他错误信息。

我搜索了整个互联网，但没有任何帮助。[我已经尝试使用此链接](http://archive.msdn.microsoft.com/vs2010uninstall/Release/ProjectReleases.aspx?ReleaseId=4321)上的脚本（由 MS 提供）卸载 VS2010 。但是当我重新安装 VS2010 时，它仍然显示同样的错误。令我惊讶的是，重新安装 VS 后，“Recent Projects”中仍然显示之前的项目列表。我真的怀疑VS是否被卸载。

我完全一无所知，任何帮助将不胜感激。如果我在这里找不到解决方案，我别无选择，只能格式化我的操作系统:(如果需要任何其他详细信息，请告诉我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:45:10.950

它可能是由您安装的添加或扩展引起的，可能是您没有意识到的。有几种方法可以解决这个问题 - 一种是进入管理器并删除/停用它们。如果 VS 无法加载，则有一个标志可以解决问题。

检查此[链接](http://msdn.microsoft.com/en-us/library/xee0c8y7.aspx)以获取有关 devenv 标志的说明。

您可以使用：/ResetAddin 或 /SafeMode

# php - 如何通过 jQuery $.load() 实用函数让 PHP 将 utf-8 字符串传递给 JavaScript？

> ID：11073017
> 
> 赞同：3
> 
> 时间：2012-06-17T16:40:12.767
> 
> 标签：php, javascript, jquery, utf-8

我在使用 jQuery $.load() 实用程序函数从 PHP 获取 utf-8 字符串时遇到了一些问题。

文件 1：myrecord.txt，使用 Notepad++ 以 utf-8 编码保存

```
<p>你好， jQuery Ajax with load method.</p>. 
```

文件 2：myrecord.php，使用 Notepad++ 以 utf-8 编码保存

```
<?php
  echo '<p>你好， jQuery Ajax with load method.</p>';
?> 
```

文件 3：loadTest.html，使用 Notepad++ 以 utf-8 编码保存

```
<html>
<head>
   <title>Load Example</title>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <script type="text/javascript"           
        src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
   </script>
   <script type="text/javascript" language="javascript">
        $(document).ready(function() {
    $('div').load('myrecord.txt');
    });
   </script>
</head>
<body>
      <div></div>
</body>
</html> 
```

如果我按原样运行 loadTest.html，我得到的结果将正确显示为

你好，带有加载方法的jQuery Ajax。

但是，如果我将文件 3 中的加载方法更改为 $('div').load('myrecord.php')，则显示更改为

???带有加载方法的jQuery Ajax。

怎么了？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:45:19.733

您可以尝试使用 readfile 函数使用 php 文件加载该文件，并且该函数应该具有 utf-8 输出的标头吗？

```
header ('Content-type: text/html; charset=utf-8');
readfile('myrecord.txt'); 
```

另外看看下面的 URL 是否可以提供额外的帮助：[http ://www.phpwact.org/php/i18n/utf-8](http://www.phpwact.org/php/i18n/utf-8)

# javascript - 正则表达式从某个字符开始提取字符串，而没有该字符本身

> ID：11073031
> 
> 赞同：0
> 
> 时间：2012-06-17T16:42:13.330
> 
> 标签：javascript, regex

假设我有以下 js 代码：

```
r='d|daa|dd';  
reg = /\|.*/;  
result = reg.exec(r); 
```

这将返回`|daa|dd`，但我想要的是`daa|dd`。

正则表达式应该是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:47:24.460

分组是要走的路：

```
reg = /\|(.*)/; 
```

它将搜索以 | 开头的字符串，但将单独捕获组（括在括号中）以供进一步使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T16:48:37.503

```
r='d|daa|dd';
reg = /\|(.*)/;
result = reg.exec(r); 
```

`result[1]`然后填充捕获组中的内容。

# nhibernate - 在流畅的休眠中自动保存不起作用

> ID：11073034
> 
> 赞同：0
> 
> 时间：2012-06-17T16:42:23.797
> 
> 标签：nhibernate, fluent-nhibernate, fluent

我有个问题。当我尝试将类型为 book 的对象插入数据库时​​，如果作者表不存在，它也应该将作者添加到作者表中。相反，我收到一个错误“未保存的对象”并且该对象尚未保存。有什么问题？

编码：

```
Book:
            Id(x => x.ID);
            Map(x => x.Title);
            References(x => x.Author)
            .Not.LazyLoad()
            .Column("Author_id");

Author:
            Id(x => x.ID);
            Map(x => x.FullName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:04:36.323

```
References(x => x.Author)
    .Not.LazyLoad()
    .Cascade.All()         // unsaved Authors should also be saved
    .Column("Author_id"); 
```

不要忘记你必须使用`session.Get`/`session.Load`来获取现有的作者

# makefile - 闭包编译器正在输出带有 Makefile 的零字节文件

> ID：11073038
> 
> 赞同：0
> 
> 时间：2012-06-17T16:42:51.283
> 
> 标签：makefile, google-closure-compiler

我对包含 make 文件的[SVG Edit进行了一些修改。](http://svg-edit.googlecode.com)当我使用新克隆的 repo 编译源代码时，它会成功编译，但是当我在本地 repo 上编译源代码时，它似乎成功地符合要求，但它会产生一个零字节的 svgedit.compiled.js 文件。没有任何警告。

这是我的（修改后的）Make 文件：

```
NAME=svg-edit
VERSION=2.6
PACKAGE=$(NAME)-$(VERSION)
MAKEDOCS=naturaldocs/NaturalDocs
CLOSURE=build/tools/closure-compiler.jar
ZIP=zip

# All files that will be compiled by the Closure compiler.

JS_FILES=\
  js-hotkeys/jquery.hotkeys.min.js \
  jquerybbq/jquery.bbq.min.js \
  svgicons/jquery.svgicons.js \
  jquery.jgraduate.min.js \
  spinbtn/JQuerySpinBtn.min.js \
  touch.js \
    contextmenu/jquery.contextmenu.js \
    browser.js \
    svgtransformlist.js \
    math.js \
    units.js \
    svgutils.js \
    sanitize.js \
    history.js \
    select.js \
    draw.js \
    path.js \
    svgcanvas.js \
    svg-editor.js \
    contextmenu.js \
    locale/locale.js

JS_INPUT_FILES=$(addprefix editor/, $(JS_FILES))
JS_BUILD_FILES=$(addprefix build/$(PACKAGE)/, $(JS_FILES))
CLOSURE_JS_ARGS=$(addprefix --js , $(JS_INPUT_FILES))
COMPILED_JS=editor/svgedit.compiled.js

#all: release firefox opera
all: release

# The build directory relies on the JS being compiled.
build/$(PACKAGE): $(COMPILED_JS)
    rm -rf config
    mkdir config
    if [ -x $(MAKEDOCS) ] ; then $(MAKEDOCS) -i editor/ -o html docs/ -p config/ -oft -r ; fi

    # Make build directory and copy all editor contents into it
    mkdir -p build/$(PACKAGE)
    cp -r editor/* build/$(PACKAGE)

    # Remove all hidden .svn directories
    -find build/$(PACKAGE) -name .svn -type d | xargs rm -rf {} \;
    -find build/$(PACKAGE) -name .git -type d | xargs rm -rf {} \;

    # Create the release version of the main HTML file.
    build/tools/ship.py --i=editor/svg-editor.html --on=svg_edit_release > build/$(PACKAGE)/svg-editor.html

# NOTE: Some files are not ready for the Closure compiler: (jquery)
# NOTE: Our code safely compiles under SIMPLE_OPTIMIZATIONS
# NOTE: Our code is *not* ready for ADVANCED_OPTIMIZATIONS
# NOTE: WHITESPACE_ONLY and --formatting PRETTY_PRINT is helpful for debugging.
$(COMPILED_JS):
    java -jar $(CLOSURE) \
        --compilation_level SIMPLE_OPTIMIZATIONS \
        $(CLOSURE_JS_ARGS) \
        --js_output_file $(COMPILED_JS)
        --warning_level=VERBOSE

compile: $(COMPILED_JS)

release: build/$(PACKAGE)
    cd build ; $(ZIP) $(PACKAGE).zip -r $(PACKAGE) ; cd ..
    tar -z -c -f build/$(PACKAGE)-src.tar.gz \
        --exclude='\.svn' \
        --exclude='\.git' \
        --exclude='build/*' \
        .

clean:
    rm -rf config
    rm -rf build/$(PACKAGE)
    rm -rf $(COMPILED_JS) 
```

这是我时的输出`make`：

```
rm -rf config
mkdir config
if [ -x naturaldocs/NaturalDocs ] ; then naturaldocs/NaturalDocs -i editor/ -o html docs/ -p config/ -oft -r ; fi
# Make build directory and copy all editor contents into it
mkdir -p build/svg-edit-2.6
cp -r editor/* build/svg-edit-2.6
# Remove all hidden .svn directories
find build/svg-edit-2.6 -name .svn -type d | xargs rm -rf {} \;
find build/svg-edit-2.6 -name .git -type d | xargs rm -rf {} \;
# Create the release version of the main HTML file.
build/tools/ship.py --i=editor/svg-editor.html --on=svg_edit_release > build/svg-edit-2.6/svg-editor.html
cd build ; zip svg-edit-2.6.zip -r svg-edit-2.6 ; cd ..
updating: svg-edit-2.6/ (stored 0%)
updating: svg-edit-2.6/browser-not-supported.html (deflated 53%)
updating: svg-edit-2.6/browser.js (deflated 72%)
updating: svg-edit-2.6/canvg/ (stored 0%)
updating: svg-edit-2.6/canvg/canvg.js (deflated 79%)
updating: svg-edit-2.6/canvg/rgbcolor.js (deflated 69%)
updating: svg-edit-2.6/contextmenu/ (stored 0%)
updating: svg-edit-2.6/contextmenu/jquery.contextMenu.js (deflated 71%)
updating: svg-edit-2.6/contextmenu.js (deflated 61%)
updating: svg-edit-2.6/draginput.js (deflated 63%)
updating: svg-edit-2.6/draw.js (deflated 71%)
updating: svg-edit-2.6/embedapi.html (deflated 53%)
updating: svg-edit-2.6/embedapi.js (deflated 61%)
updating: svg-edit-2.6/extensions/ (stored 0%)
updating: svg-edit-2.6/extensions/closepath_icons.svg (deflated 70%)
updating: svg-edit-2.6/extensions/ext-arrows.js (deflated 66%)
updating: svg-edit-2.6/extensions/ext-closepath.js (deflated 63%)
updating: svg-edit-2.6/extensions/ext-connector.js (deflated 70%)
updating: svg-edit-2.6/extensions/ext-eyedropper.js (deflated 69%)
updating: svg-edit-2.6/extensions/ext-foreignobject.js (deflated 66%)
updating: svg-edit-2.6/extensions/ext-grid.js (deflated 66%)
updating: svg-edit-2.6/extensions/ext-helloworld.js (deflated 56%)
updating: svg-edit-2.6/extensions/ext-imagelib.js (deflated 68%)
updating: svg-edit-2.6/extensions/ext-imagelib.xml (deflated 68%)
updating: svg-edit-2.6/extensions/ext-markers.js (deflated 68%)
updating: svg-edit-2.6/extensions/ext-server_moinsave.js (deflated 52%)
updating: svg-edit-2.6/extensions/ext-server_opensave.js (deflated 65%)
updating: svg-edit-2.6/extensions/ext-shapes.js (deflated 61%)
updating: svg-edit-2.6/extensions/ext-shapes.xml (deflated 38%)
updating: svg-edit-2.6/extensions/eyedropper-icon.xml (deflated 48%)
updating: svg-edit-2.6/extensions/eyedropper.png (stored 0%)
updating: svg-edit-2.6/extensions/fileopen.php (deflated 37%)
updating: svg-edit-2.6/extensions/filesave.php (deflated 52%)
updating: svg-edit-2.6/extensions/foreignobject-icons.xml (deflated 76%)
updating: svg-edit-2.6/extensions/grid-icon.xml (deflated 71%)
updating: svg-edit-2.6/extensions/helloworld-icon.xml (deflated 52%)
updating: svg-edit-2.6/extensions/imagelib/ (stored 0%)
updating: svg-edit-2.6/extensions/imagelib/index.html (deflated 51%)
updating: svg-edit-2.6/extensions/imagelib/smiley.svg (deflated 64%)
updating: svg-edit-2.6/extensions/markers-icons.xml (deflated 87%)
updating: svg-edit-2.6/extensions/shapelib/ (stored 0%)
updating: svg-edit-2.6/extensions/shapelib/animal.json (deflated 50%)
updating: svg-edit-2.6/extensions/shapelib/arrow.json (deflated 55%)
updating: svg-edit-2.6/extensions/shapelib/dialog_balloon.json (deflated 58%)
updating: svg-edit-2.6/extensions/shapelib/electronics.json (deflated 62%)
updating: svg-edit-2.6/extensions/shapelib/flowchart.json (deflated 63%)
updating: svg-edit-2.6/extensions/shapelib/game.json (deflated 48%)
updating: svg-edit-2.6/extensions/shapelib/math.json (deflated 63%)
updating: svg-edit-2.6/extensions/shapelib/misc.json (deflated 4%)
updating: svg-edit-2.6/extensions/shapelib/music.json (deflated 55%)
updating: svg-edit-2.6/extensions/shapelib/object.json (deflated 52%)
updating: svg-edit-2.6/extensions/shapelib/raphael.txt (deflated 47%)
updating: svg-edit-2.6/extensions/shapelib/raphael_1.json (deflated 62%)
updating: svg-edit-2.6/extensions/shapelib/raphael_2.json (deflated 63%)
updating: svg-edit-2.6/extensions/shapelib/social.json (deflated 56%)
updating: svg-edit-2.6/extensions/shapelib/symbol.json (deflated 53%)
updating: svg-edit-2.6/extensions/shapelib/ui.json (deflated 64%)
updating: svg-edit-2.6/extensions/shapelib/weather.json (deflated 68%)
updating: svg-edit-2.6/font-files/ (stored 0%)
updating: svg-edit-2.6/font-files/Anivers-webfont.eot (deflated 47%)
updating: svg-edit-2.6/font-files/Anivers-webfont.ttf (deflated 47%)
updating: svg-edit-2.6/font-files/Anivers-webfont.woff (deflated 0%)
updating: svg-edit-2.6/font-files/fanwood-webfont.eot (deflated 0%)
updating: svg-edit-2.6/font-files/fanwood-webfont.svg (deflated 84%)
updating: svg-edit-2.6/font-files/fanwood-webfont.ttf (deflated 70%)
updating: svg-edit-2.6/font-files/fanwood-webfont.woff (deflated 0%)
updating: svg-edit-2.6/font-files/fanwood_italic-webfont.eot (deflated 0%)
updating: svg-edit-2.6/font-files/fanwood_italic-webfont.svg (deflated 81%)
updating: svg-edit-2.6/font-files/fanwood_italic-webfont.ttf (deflated 66%)
updating: svg-edit-2.6/font-files/fanwood_italic-webfont.woff (deflated 0%)
updating: svg-edit-2.6/font-files/fertigo-webfont.eot (deflated 46%)
updating: svg-edit-2.6/font-files/fertigo-webfont.ttf (deflated 46%)
updating: svg-edit-2.6/font-files/fertigo-webfont.woff (deflated 0%)
updating: svg-edit-2.6/font-files/Junction-webfont.eot (deflated 35%)
updating: svg-edit-2.6/font-files/Junction-webfont.svg (deflated 63%)
updating: svg-edit-2.6/font-files/Junction-webfont.ttf (deflated 35%)
updating: svg-edit-2.6/font-files/Junction-webfont.woff (deflated 0%)
updating: svg-edit-2.6/font-files/League_Gothic-webfont.eot (deflated 48%)
updating: svg-edit-2.6/font-files/League_Gothic-webfont.svg (deflated 75%)
updating: svg-edit-2.6/font-files/League_Gothic-webfont.ttf (deflated 48%)
updating: svg-edit-2.6/font-files/League_Gothic-webfont.woff (deflated 0%)
updating: svg-edit-2.6/font-files/Museo_Slab-webfont.eot (deflated 48%)
updating: svg-edit-2.6/font-files/Museo_Slab-webfont.ttf (deflated 48%)
updating: svg-edit-2.6/font-files/Museo_Slab-webfont.woff (deflated 0%)
updating: svg-edit-2.6/font-files/Museo_Slab_Italic-webfont.eot (deflated 49%)
updating: svg-edit-2.6/font-files/Museo_Slab_Italic-webfont.ttf (deflated 49%)
updating: svg-edit-2.6/font-files/Museo_Slab_Italic-webfont.woff (deflated 0%)
updating: svg-edit-2.6/font-selector/ (stored 0%)
updating: svg-edit-2.6/font-selector/.DS_Store (deflated 91%)
updating: svg-edit-2.6/font-selector/font-selector.js (deflated 68%)
updating: svg-edit-2.6/font-selector/fonts/ (stored 0%)
updating: svg-edit-2.6/font-selector/fonts/.DS_Store (deflated 96%)
updating: svg-edit-2.6/font-selector/fonts/fanwood.css (deflated 75%)
updating: svg-edit-2.6/font-selector/fonts/font-images/ (stored 0%)
updating: svg-edit-2.6/font-selector/fonts/font-images/brush-script.png (stored 0%)
updating: svg-edit-2.6/font-selector/fonts/font-images/cloister.png (stored 0%)
updating: svg-edit-2.6/font-selector/fonts/font-images/cooper.png (stored 0%)
updating: svg-edit-2.6/font-selector/fonts/font-images/fanwood.png (stored 0%)
updating: svg-edit-2.6/font-selector/fonts/font-images/junction.png (deflated 1%)
updating: svg-edit-2.6/font-selector/fonts/font-images/league_gothic.png (deflated 0%)
updating: svg-edit-2.6/font-selector/fonts/Junction.css (deflated 59%)
updating: svg-edit-2.6/font-selector/fonts/League_Gothic.css (deflated 60%)
updating: svg-edit-2.6/font-selector/README.md (deflated 59%)
updating: svg-edit-2.6/history.js (deflated 80%)
updating: svg-edit-2.6/images/ (stored 0%)
updating: svg-edit-2.6/images/align-bottom.png (deflated 4%)
updating: svg-edit-2.6/images/align-bottom.svg (deflated 81%)
updating: svg-edit-2.6/images/align-center.png (stored 0%)
updating: svg-edit-2.6/images/align-center.svg (deflated 81%)
updating: svg-edit-2.6/images/align-left.png (deflated 3%)
updating: svg-edit-2.6/images/align-left.svg (deflated 79%)
updating: svg-edit-2.6/images/align-middle.png (stored 0%)
updating: svg-edit-2.6/images/align-middle.svg (deflated 81%)
updating: svg-edit-2.6/images/align-right.png (deflated 1%)
updating: svg-edit-2.6/images/align-right.svg (deflated 79%)
updating: svg-edit-2.6/images/align-top.png (deflated 4%)
updating: svg-edit-2.6/images/align-top.svg (deflated 79%)
updating: svg-edit-2.6/images/bold.png (stored 0%)
updating: svg-edit-2.6/images/cancel.png (stored 0%)
updating: svg-edit-2.6/images/circle.png (stored 0%)
updating: svg-edit-2.6/images/clear.png (deflated 3%)
updating: svg-edit-2.6/images/clone.png (stored 0%)
updating: svg-edit-2.6/images/conn.svg (deflated 61%)
updating: svg-edit-2.6/images/copy.png (deflated 3%)
updating: svg-edit-2.6/images/cross.png (deflated 3%)
updating: svg-edit-2.6/images/cut.png (deflated 0%)
updating: svg-edit-2.6/images/delete.png (stored 0%)
updating: svg-edit-2.6/images/document-properties.png (stored 0%)
updating: svg-edit-2.6/images/dropdown.gif (deflated 8%)
updating: svg-edit-2.6/images/ellipse.png (stored 0%)
updating: svg-edit-2.6/images/eye.png (stored 0%)
updating: svg-edit-2.6/images/eyedropper.png (deflated 8%)
updating: svg-edit-2.6/images/fhpath.png (stored 0%)
updating: svg-edit-2.6/images/flyouth.png (deflated 5%)
updating: svg-edit-2.6/images/flyup.gif (deflated 6%)
updating: svg-edit-2.6/images/freehand-circle.png (stored 0%)
updating: svg-edit-2.6/images/freehand-square.png (stored 0%)
updating: svg-edit-2.6/images/go-down.png (stored 0%)
updating: svg-edit-2.6/images/go-up.png (stored 0%)
updating: svg-edit-2.6/images/image.png (stored 0%)
updating: svg-edit-2.6/images/italic.png (stored 0%)
updating: svg-edit-2.6/images/line.png (stored 0%)
updating: svg-edit-2.6/images/link_controls.png (stored 0%)
updating: svg-edit-2.6/images/logo.png (stored 0%)
updating: svg-edit-2.6/images/logo.svg (deflated 42%)
updating: svg-edit-2.6/images/move_bottom.png (stored 0%)
updating: svg-edit-2.6/images/move_top.png (stored 0%)
updating: svg-edit-2.6/images/node_clone.png (stored 0%)
updating: svg-edit-2.6/images/node_delete.png (stored 0%)
updating: svg-edit-2.6/images/none.png (deflated 3%)
updating: svg-edit-2.6/images/open.png (stored 0%)
updating: svg-edit-2.6/images/paste.png (deflated 2%)
updating: svg-edit-2.6/images/path.png (stored 0%)
updating: svg-edit-2.6/images/pencil.png (deflated 1%)
updating: svg-edit-2.6/images/placeholder.svg (deflated 50%)
updating: svg-edit-2.6/images/polygon.png (stored 0%)
updating: svg-edit-2.6/images/polygon.svg (deflated 74%)
updating: svg-edit-2.6/images/README.txt (deflated 82%)
updating: svg-edit-2.6/images/rect.png (stored 0%)
updating: svg-edit-2.6/images/redo.png (deflated 2%)
updating: svg-edit-2.6/images/reorient.png (stored 0%)
updating: svg-edit-2.6/images/rotate.png (stored 0%)
updating: svg-edit-2.6/images/save.png (deflated 1%)
updating: svg-edit-2.6/images/select.png (stored 0%)
updating: svg-edit-2.6/images/select_node.png (stored 0%)
updating: svg-edit-2.6/images/sep.png (deflated 4%)
updating: svg-edit-2.6/images/shape_group.png (stored 0%)
updating: svg-edit-2.6/images/shape_ungroup.png (stored 0%)
updating: svg-edit-2.6/images/source.png (stored 0%)
updating: svg-edit-2.6/images/spinbtn_updn_big.png (stored 0%)
updating: svg-edit-2.6/images/square.png (stored 0%)
updating: svg-edit-2.6/images/svg_edit_icons.svg (deflated 77%)
updating: svg-edit-2.6/images/svg_edit_icons.svgz (stored 0%)
updating: svg-edit-2.6/images/text.png (stored 0%)
updating: svg-edit-2.6/images/text.svg (deflated 70%)
updating: svg-edit-2.6/images/to_path.png (stored 0%)
updating: svg-edit-2.6/images/undo.png (deflated 1%)
updating: svg-edit-2.6/images/view-refresh.png (stored 0%)
updating: svg-edit-2.6/images/wave.png (stored 0%)
updating: svg-edit-2.6/images/wireframe.png (stored 0%)
updating: svg-edit-2.6/images/zoom.png (stored 0%)
updating: svg-edit-2.6/jgraduate/ (stored 0%)
updating: svg-edit-2.6/jgraduate/css/ (stored 0%)
updating: svg-edit-2.6/jgraduate/css/jgraduate.css (deflated 74%)
updating: svg-edit-2.6/jgraduate/css/jPicker.css (deflated 79%)
updating: svg-edit-2.6/jgraduate/images/ (stored 0%)
updating: svg-edit-2.6/jgraduate/images/AlphaBar.png (stored 0%)
updating: svg-edit-2.6/jgraduate/images/bar-opacity.png (deflated 4%)
updating: svg-edit-2.6/jgraduate/images/Bars.png (stored 0%)
updating: svg-edit-2.6/jgraduate/images/eyedropper.png (deflated 8%)
updating: svg-edit-2.6/jgraduate/images/map-opacity.png (deflated 4%)
updating: svg-edit-2.6/jgraduate/images/mappoint.gif (deflated 6%)
updating: svg-edit-2.6/jgraduate/images/mappoint_c.png (stored 0%)
updating: svg-edit-2.6/jgraduate/images/mappoint_f.png (stored 0%)
updating: svg-edit-2.6/jgraduate/images/Maps.png (deflated 5%)
updating: svg-edit-2.6/jgraduate/images/NoColor.png (stored 0%)
updating: svg-edit-2.6/jgraduate/images/picker.gif (deflated 3%)
updating: svg-edit-2.6/jgraduate/images/preview-opacity.png (deflated 3%)
updating: svg-edit-2.6/jgraduate/images/rangearrows.gif (deflated 3%)
updating: svg-edit-2.6/jgraduate/images/rangearrows2.gif (deflated 8%)
updating: svg-edit-2.6/jgraduate/jpicker.min.js (deflated 84%)
updating: svg-edit-2.6/jgraduate/jquery.jgraduate.js (deflated 75%)
updating: svg-edit-2.6/jgraduate/jquery.jgraduate.min.js (deflated 69%)
updating: svg-edit-2.6/jgraduate/LICENSE (deflated 65%)
updating: svg-edit-2.6/jgraduate/README (deflated 13%)
updating: svg-edit-2.6/jquery-ui/ (stored 0%)
updating: svg-edit-2.6/jquery-ui/jquery-ui-1.8.17.custom.min.js (deflated 74%)
updating: svg-edit-2.6/jquery-ui/jquery-ui-1.8.custom.min.js (deflated 75%)
updating: svg-edit-2.6/jquery.js (deflated 65%)
updating: svg-edit-2.6/jquerybbq/ (stored 0%)
updating: svg-edit-2.6/jquerybbq/jquery.bbq.min.js (deflated 50%)
updating: svg-edit-2.6/js-hotkeys/ (stored 0%)
updating: svg-edit-2.6/js-hotkeys/jquery.hotkeys.min.js (deflated 44%)
updating: svg-edit-2.6/js-hotkeys/README.md (deflated 44%)
updating: svg-edit-2.6/locale/ (stored 0%)
updating: svg-edit-2.6/locale/lang.af.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.ar.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.az.js (deflated 64%)
updating: svg-edit-2.6/locale/lang.be.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.bg.js (deflated 63%)
updating: svg-edit-2.6/locale/lang.ca.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.cs.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.cy.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.da.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.de.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.el.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.en.js (deflated 64%)
updating: svg-edit-2.6/locale/lang.es.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.et.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.fa.js (deflated 65%)
updating: svg-edit-2.6/locale/lang.fi.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.fr.js (deflated 63%)
updating: svg-edit-2.6/locale/lang.fy.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.ga.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.gl.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.he.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.hi.js (deflated 67%)
updating: svg-edit-2.6/locale/lang.hr.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.hu.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.hy.js (deflated 64%)
updating: svg-edit-2.6/locale/lang.id.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.is.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.it.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.ja.js (deflated 59%)
updating: svg-edit-2.6/locale/lang.ko.js (deflated 59%)
updating: svg-edit-2.6/locale/lang.lt.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.lv.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.mk.js (deflated 63%)
updating: svg-edit-2.6/locale/lang.ms.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.mt.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.nl.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.no.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.pl.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.pt-BR.js (deflated 64%)
updating: svg-edit-2.6/locale/lang.pt-PT.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.ro.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.ru.js (deflated 66%)
updating: svg-edit-2.6/locale/lang.sk.js (deflated 60%)
updating: svg-edit-2.6/locale/lang.sl.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.sq.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.sr.js (deflated 63%)
updating: svg-edit-2.6/locale/lang.sv.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.sw.js (deflated 63%)
updating: svg-edit-2.6/locale/lang.test.js (deflated 64%)
updating: svg-edit-2.6/locale/lang.th.js (deflated 66%)
updating: svg-edit-2.6/locale/lang.tl.js (deflated 63%)
updating: svg-edit-2.6/locale/lang.tr.js (deflated 61%)
updating: svg-edit-2.6/locale/lang.uk.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.vi.js (deflated 62%)
updating: svg-edit-2.6/locale/lang.yi.js (deflated 64%)
updating: svg-edit-2.6/locale/lang.zh-CN.js (deflated 58%)
updating: svg-edit-2.6/locale/lang.zh-HK.js (deflated 58%)
updating: svg-edit-2.6/locale/lang.zh-TW.js (deflated 56%)
updating: svg-edit-2.6/locale/locale.js (deflated 68%)
updating: svg-edit-2.6/locale/README.txt (deflated 48%)
updating: svg-edit-2.6/math.js (deflated 67%)
updating: svg-edit-2.6/path.js (deflated 72%)
updating: svg-edit-2.6/sanitize.js (deflated 74%)
updating: svg-edit-2.6/select.js (deflated 70%)
updating: svg-edit-2.6/spinbtn/ (stored 0%)
updating: svg-edit-2.6/spinbtn/JQuerySpinBtn.css (deflated 47%)
updating: svg-edit-2.6/spinbtn/JQuerySpinBtn.js (deflated 65%)
updating: svg-edit-2.6/spinbtn/JQuerySpinBtn.min.js (deflated 68%)
updating: svg-edit-2.6/spinbtn/spinbtn_updn.png (stored 0%)
updating: svg-edit-2.6/svg-editor.css (deflated 79%)
updating: svg-edit-2.6/svg-editor.html (deflated 76%)
updating: svg-edit-2.6/svg-editor.js (deflated 73%)
updating: svg-edit-2.6/svg-editor.manifest (deflated 74%)
updating: svg-edit-2.6/svgcanvas.js (deflated 74%)
updating: svg-edit-2.6/svgedit.compiled.js (stored 0%)
updating: svg-edit-2.6/svgicons/ (stored 0%)
updating: svg-edit-2.6/svgicons/jquery.svgicons.js (deflated 64%)
updating: svg-edit-2.6/svgtransformlist.js (deflated 68%)
updating: svg-edit-2.6/svgutils.js (deflated 65%)
updating: svg-edit-2.6/touch.js (deflated 59%)
updating: svg-edit-2.6/units.js (deflated 66%)
tar -z -c -f build/svg-edit-2.6-src.tar.gz \
        --exclude='\.svn' \
        --exclude='\.git' \
        --exclude='build/*' \ 
```

我的问题是如何正确调试出了什么问题，我尝试添加`--warning_level=VERBOSE`到 Closure Compiler 但输出看起来相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:25:48.267

由于 make 已编译一次，因此在后续运行时它没有执行闭包编译器，因此没有显示消息错误。你需要和...

`make -B`

# java - 使用 ActionListener 更新其他类中的变量

> ID：11073039
> 
> 赞同：0
> 
> 时间：2012-06-17T16:42:55.850
> 
> 标签：java, swing, actionlistener, paintcomponent, japplet

我正在设计一个小程序，因此它允许用户绘制图表。我在构建代码时遇到问题，该代码从另一个文件（ControlsB.java）更新了 Graph.java 文件中的变量。下面是我的代码：

```
 import java.awt.*;
import javax.swing.*;

 public class Calculator extends JFrame{

/**
 * 
 */
private static final long serialVersionUID = 1L;
private static final int HORIZONTAL_SCROLLBAR_NEVER = 0;
private static final int VERTICAL_SCROLLBAR_ALWAYS = 0;

public static void main (String[] args){

    JFrame calculator = new JFrame("My Simple Calculator");

    calculator.setSize(500,500);

JPanel panel = new JPanel();

panel.setLayout(new BorderLayout());

Box a = Box.createHorizontalBox();

JTextArea text = new JTextArea(10,15); 
```

JScrollPane 滚动 = 新 JScrollPane(文本, JScrollPane.VERTICAL_SCROLLBAR_​​ALWAYS,JScrollPane.HORIZONTAL_SCROLLBAR_​​NEVER);

```
Box b = Box.createHorizontalBox();

//JToolBar tool = new JToolBar(SwingConstants.HORIZONTAL);
JButton add = new JButton("+");
JButton minus = new JButton("-");
JButton multi = new JButton("x");
JButton div = new JButton("/");
JButton c = new JButton("C");
JButton eq = new JButton("=");

JTextField field = new JTextField(10);

JButton enter = new JButton("Enter");

b.add(add);
b.add(minus);
b.add(multi);
b.add(div);
b.add(c);
b.add(eq);

a.add(field);
a.add(enter);

panel.add(scroll,BorderLayout.NORTH);
panel.add(b,BorderLayout.CENTER);
panel.add(a,BorderLayout.SOUTH);

calculator.setContentPane(panel);
calculator.setVisible(true);
}

 } 
```

现在我主要关心的是 ControlsB.java 文件，我希望当用户输入 x 轴和 y 轴**范围**并点击**Resize**按钮时，graph.java 文件中的变量会相应更新，因此图形调整大小。

*我在 Graph.java 文件中谈论的变量在 57 到 65 行之间。*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:30:30.000

通常，如果您需要在多个类之间共享数据，并从多个类中更新该数据，您可以将数据放入所谓的“模型”中，并在不同类之间共享该模型。您的视图将是模型中数据的（视觉）表示，而您的动作侦听器仅对模型进行操作。

如果您确保模型是可观察的，则视图可以在数据更改时自行更新。因此，您`ActionListener`只需更改数据，模型就会让所有相关方知道它已更改（在您的情况下为图表），如果需要，这些相关方会对该更改做出反应（更新您的图表）。

当我发现在大多数情况下代码比文本更能说明问题时，我整理了一个相当愚蠢的例子，但这说明了我的意思。我有一个模型 ( `DataModel`)，它在视图 ( `DataPanel`) 中可视化，并且一个外部类对模型进行定期更新（`Timer`在我的示例中），并且视图在`Timer`唯一知道`DataModel`而不是`DataPanel`.

哦，是的，代码很长，但是您也向我们扔了很多代码。

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.Timer;
import java.awt.EventQueue;
import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;

public class ActionListenerDemo {

  private static class DataModel{
    private PropertyChangeSupport propertyChangeSupport = new PropertyChangeSupport( this );

    private String data="";

    public void addPropertyChangeListener( PropertyChangeListener listener ) {
      propertyChangeSupport.addPropertyChangeListener( listener );
    }

    public String getData() {
      return data;
    }

    public void setData( String aData ) {
      String old = data;
      data = aData;
      propertyChangeSupport.firePropertyChange( "data", old, data );
    }
  }

  private static class DataPanel extends JFrame{
    private final DataModel dataModel;
    private final JLabel label;
    private DataPanel( DataModel aDataModel ) throws HeadlessException {
      dataModel = aDataModel;
      dataModel.addPropertyChangeListener( new PropertyChangeListener() {
        @Override
        public void propertyChange( PropertyChangeEvent evt ) {
          updateUIFromModel();
        }
      } );
      label = new JLabel( dataModel.getData() );
      add( label );
    }
    private void updateUIFromModel(){
      label.setText( dataModel.getData() );
    }
  }

  public static void main( String[] args ) {
    final DataModel model = new DataModel();
    model.setData( "Change me and watch the UI update !" );
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        DataPanel dataPanel = new DataPanel( model );
        dataPanel.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        dataPanel.pack();
        dataPanel.setVisible( true );
      }
    } );
    Timer timer = new Timer( 1000, new ActionListener() {
      private String[] values = {"Data changed", "More changes", "Lorem ipsum" };
      private int counter = 0;
      @Override
      public void actionPerformed( ActionEvent e ) {
        counter = counter%values.length;
        model.setData( values[counter] );
        counter++;
      }
    } );
    timer.setRepeats( true );
    timer.start();
  }
} 
```

# cocoa - 凹 NSBezierPath

> ID：11073041
> 
> 赞同：1
> 
> 时间：2012-06-17T16:43:35.257
> 
> 标签：cocoa, appkit, nsbezierpath

我有以下绘图代码：

```
[[NSColor redColor] set];
NSRect fillRect = NSMakeRect(bounds.size.width - 20.0f, 0.0f, 20.0f, 20.0f);
NSBezierPath *bezier1 = [NSBezierPath bezierPathWithRoundedRect:fillRect xRadius:10.0f yRadius:10.0f];

[bezier1 fill];

NSRect fill2 = fillRect;
fill2.origin.x += 5;
fill2.origin.y += 5;

fill2.size.width -= 10.0f;
fill2.size.height -= 10.0f;

NSBezierPath *bezier2 = [NSBezierPath bezierPathWithRoundedRect:fill2 xRadius:5.0f yRadius:5.0f];
[[NSColor greenColor] set];

[bezier2 fill]; 
```

结果是：

![截屏](../Images/25b610381427f118940153b441db73f4.png)

我如何达到内部绿色圆圈是透明的？用透明颜色替换绿色 NSColor 不起作用，合乎逻辑;-)

有没有办法与 NSBezierPath 的实例相交或用另一种方法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:26:59.783

我认为您正在寻找的是环的贝塞尔路径，您可以通过创建单个`NSBezierPath`并设置*缠绕规则*来做到这一点：

```
[[NSColor redColor] set];
NSRect fillRect = NSMakeRect(bounds.size.width - 20.0f, 0.0f, 20.0f, 20.0f);
NSBezierPath *bezier1 = [NSBezierPath new];
[bezier1 setWindingRule:NSEvenOddWindingRule];   // set the winding rule for filling
[bezier1 appendBezierPathWithRoundedRect:fillRect xRadius:10.0f yRadius:10.0f];

NSRect innerRect = NSInsetRect(fillRect, 5, 5);  // the bounding rect for the hole
[bezier1 appendBezierPathWithRoundedRect:innerRect xRadius:5.0f yRadius:5.0f];

[bezier1 fill]; 
```

该`NSEvenOddWindingRule`规则通过考虑从该点到整个路径边界之外的线来确定是否填充特定点；如果该线穿过偶数条路径，则未填充，否则已填充。因此，内圈中的任何点都不会被填充，而两者之间的点将是 - 形成一个环。

# c# - 例外：使用 LINQ 时无法推断类型参数

> ID：11073043
> 
> 赞同：2
> 
> 时间：2012-06-17T16:43:39.630
> 
> 标签：c#, sql, linq

我有这个工作正常的查询，

```
select *
from Materia 
where
  Cursar_Cursada=0
  and idmateria NOT IN (
      select IdMateria
      from UsuarioMateria
      where IdUsuario=11
  ) 
  or Cursar_Cursada in (
    select Materia.Codigo_Materia
    from UsuarioMateria join Materia on UsuarioMateria.IdMateria = Materia.IdMateria
  ) 
```

当我尝试为相同目的创建 LINQ 时，我没有得到预期的结果。

```
 from t in obj.Materias
 where
   t.Cursar_Cursada == 0 &&
   !(from t0 in obj.UsuarioMaterias
     where
       t0.IdUsuario == 11
     select new
     {
         t0.IdMateria
     }).Contains(new { t.IdMateria }) ||

     (from t0 in obj.UsuarioMaterias
      join t1 in obj.Materias on t0.IdMateria equals      IdMateria
      select new
      {
          t1.Codigo_Materia
      }).Contains(new { t.Cursar_Cursada })   // <- error here
 select new
 {
     t.IdMateria,
     t.Nombre,
     t.Cuatrimestre,
     t.Contenido,
     t.Cursar_Cursada,
     t.Cursar_Aprobada,
     t.Rendir_Aprobada,
     t.Codigo_Materia
 }; 
```

错误在说的那一行，`.Contains(new { t.Cursar_Cursada })`它说：

> `'System.Linq.Enumerable.Contains<TSource>(System.Collections.Generic.IEnumerable<TSource>, TSource)'`无法从用法中推断出方法的类型参数。尝试明确指定类型参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:54:45.083

您不需要每次都实例化单一属性匿名类型来执行`Contains`检查。相反，您应该`select`直接使用您的财产：

```
from t in obj.Materias
where t.Cursar_Cursada == 0 &&
!(  
    from t0 in obj.UsuarioMaterias
    where t0.IdUsuario == 11
    select t0.IdMateria
).Contains(t.IdMateria) ||
(   
    from t0 in obj.UsuarioMaterias
    join t1 in obj.Materias on t0.IdMateria equals t1.IdMateria
    select t1.Codigo_Materia
).Contains(t.Cursar_Cursada)
select new
{
    t.IdMateria,
    t.Nombre,
    t.Cuatrimestre,
    t.Contenido,
    t.Cursar_Cursada,
    t.Cursar_Aprobada,
    t.Rendir_Aprobada,
    t.Codigo_Materia
}; 
```

或者，您可以通过在内部查询中包含相等性检查作为条件来将`Contains`运算符转换为：`Any`

```
from t in obj.Materias
where t.Cursar_Cursada == 0 &&
!(
    from t0 in obj.UsuarioMaterias
    where t0.IdUsuario == 11 && 
          t0.IdMateria == t.IdMateria
    select t0
).Any() ||
(   
    from t0 in obj.UsuarioMaterias
    join t1 in obj.Materias on t0.IdMateria equals t1.IdMateria
    where t1.Codigo_Materia == t.Cursar_Cursada
    select t1
).Any()
select new
{
    t.IdMateria,
    t.Nombre,
    t.Cuatrimestre,
    t.Contenido,
    t.Cursar_Cursada,
    t.Cursar_Aprobada,
    t.Rendir_Aprobada,
    t.Codigo_Materia
}; 
```

# c# - 从一个程序中获取一个变量到另一个程序中

> ID：11073045
> 
> 赞同：4
> 
> 时间：2012-06-17T16:44:09.313
> 
> 标签：c#

我什至不知道如何问这个问题，但我会试一试。

我在 c# 中有一个程序，它从生产线上的传感器读取值，这些值指示生产线的健康状况。这些值每 500 毫秒更新一次。我有四行已经完成。我想编写一个“概述”程序，该程序将能够通过网络访问这些值，以很好地总结工厂的运作情况。我的问题是如何从在线的 c# 程序实时获取 c# 概述程序的值？

如果我的问题没有多大意义，请告诉我，我会尝试改写它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:52:26.697

你有几个选择：

*   MSMQ

将消息写入 MSMQ（[Microsoft 消息队列](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)）。这是用于在机器之间传输消息的（可选）持久且快速的存储。既然您说您需要近乎实时的其他应用程序中的消息，那么使用 MSMQ 是有意义的，因为您不想在该应用程序中编写逻辑来处理大量传入消息。将 MSMQ 放在中间，尽可能取出您需要的东西，最重要的是。

*   WCF

另一个应用程序可以公开 WCF 服务，每次有可用数据时，您的实时应用程序都可以调用该服务。端点可能在 net.tcp 上，这意味着开销较低，尤其是在您发送小消息时。

其他选项包括之前所说的：数据库、文件等。因此您可以在多种选项之间做出选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T16:53:27.310

您可以使用命名管道（请参阅[http://msdn.microsoft.com/en-us/library/bb546085.aspx](http://msdn.microsoft.com/en-us/library/bb546085.aspx)）在两个进程之间进行快速通信。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T16:58:43.593

一个数据库。将您的值放入数据库，然后其他应用程序将它们从同一个数据库中提取出来。这是解决这个问题的一个非常常见的解决方案，并开辟了新场景的世界。

参见：[关系数据库](http://en.wikipedia.org/wiki/Relational_database)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T17:03:36.900

我会说，这取决于很多事情。首先，对于“概述”应用程序来说，它只是每行的最后一个值，还是您需要多个值来确定行的健康状况，或者您可能想要拥有值的历史记录？

如果您只对最后一个值感兴趣，我会直接将此值传达给概览应用程序。正如其他人所建议的那样，您在这里有很多可能性：

*   [使用TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)的原始 TCP （可能有点太低级了）。
*   在概览应用程序（可能是 Web 应用程序）上公开一个 http 端点并将新值发布到此端点。
*   使用[WCF](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)在概览应用程序上公开一些[端点](http://msdn.microsoft.com/en-us/library/ms730879.aspx)（[命名](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx) [管道](http://msdn.microsoft.com/en-us/library/ms752247.aspx)、[net.tcp](http://msdn.microsoft.com/en-us/library/ee960140.aspx)、[http](http://msdn.microsoft.com/en-us/library/ee960141.aspx)等）并从每个客户端应用程序调用此端点。
*   使用 MSMQ 让每个客户端将消息排入队列，然后由概览应用程序拾取（WCF 也直接支持）。

如果您需要一些值的历史记录，或者您需要多个值来确定线路健康状况，我会选择数据库解决方案。然后您必须再次选择：是每个客户端写入数据库还是每个客户端发布到概览应用程序（使用上述任何通信方式）以及概览应用程序是否写入数据库。

在不了解您的情况的任何更多限制的情况下，很难在其中任何一个之间做出决定。

# node.js - Jade - 意外的标识符

> ID：11073047
> 
> 赞同：2
> 
> 时间：2012-06-17T16:44:32.090
> 
> 标签：node.js, express, pug

我使用以下 NodeJS 路线：

```
server.get('/', function(req, res) {
  res.render('index');
}); 
```

似乎我的 index.jade 文件中有错误，因为它告诉我：

> SyntaxError：在 Object.compile (/media/Data/development/private/PicoBudget/node_modules/jade/lib/jade.js:160:8) 在 Function.compile (/media/ Data/development/private/PicoBudget/node_modules/express/lib/view.js:68:33) 在 ServerResponse._render (/media/Data/development/private/PicoBudget/node_modules/express/lib/view.js:417: 18) 在 ServerResponse.render (/media/Data/development/private/PicoBudget/node_modules/express/lib/view.js:318:17) 在 /media/Data/development/private/PicoBudget/app.js:51: 7 在回调 (/media/Data/development/private/PicoBudget/node_modules/express/lib/router/index.js:272:11) 在 param (/media/Data/development/private/PicoBudget/node_modules/express/lib /路由器/index.js:246：11）通过（/media/Data/development/private/PicoBudget/node_modules/express/lib/router/index.js:253:5）在Router._dispatch（/media/Data/development/private/PicoBudget/node_modules/ express/lib/router/index.js:280:5)

这是我的 index.jade：

```
doctype 5
html(lang="en")
  head
    title= PicoBudget - Expense tracking tool
    link(href='bootstrap/css/bootstrap.css', rel='stylesheet')
    style(type='text/css')
      body {
        padding-top: 100px;
        padding-bottom: 40px;
      }
    link(href='bootstrap/css/bootstrap-responsive.css', rel='stylesheet')
    link(href='css/main.css', rel='stylesheet')

    script(type='text/javascript')
      <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
  body
    header
      nav
        div(class='navbar navbar-fixed-top')
          div(class='navbar-inner')
            div(class='container')
              a(class='btn btn-navbar', data-toggle='collapse', data-target='.nav-collapse')
                span(class='icon-bar')
                span(class='icon-bar')
                span(class='icon-bar')
              a(class='brand', href='http://localhost:1337) PicoBudget
              div(class='nav-collapse')
                ul(class='nav')
                  li(class='active')
                    a(href='http://localhost:1337) Home
                  li
                    a(href='http://localhost:1337/login) Register
                  li
                    a(href='http://localhost:1337/faq) FAQ
                  li
                    a(href='http://localhost:1337/about) About
                  li
                    a(href='http://localhost:1337/dashboard) Dashboard
                form(class='form-inline pull-right, action='http://localhost:1337/authenticated', method='POST')
                  input(type='text', class='input-small', placeholder='Email' name='emailInput'
                  input(type='password', class='input-small', placeholder='Password', name='passwordInput')
                  label(class='checkbox')
                    input(type='checkbox')
                    Remember me
                  button(type='submit', class='btn')
                    Sign in

    div(class='container')
      section#content
        div(class='hero-unit')
          h1 Easily manage your money
          p
            Ever wondered where your money goes? What do you spend the most money on? PicoBudget is a simple tool which features transactions, budgeting and reporting. Using Basic PicoBudget is absolutely free. If you enjoy it, though, you can get even more features with PicoBudget Premium!
          p
            Currently PicoBudget is under construction. Feel free to come back to check it out when it launched!

        div(class='row')
          div(class='span4')
            h2 Introduction
            p
              What is PicoBudget? Who is it for? Why should you use it?
            p
              a(class='btn', href='http://localhost:1337/introduction')
                Read more &raquo;
          div(class='span4')
            h2 FAQ
            p
              We listed the frequently asked questions. It should cover most of your questions.
            p
              a(class='btn', href='http://localhost:1337/faq')
                View FAQ &raquo;
          div(class='span4')
            h2 Premium
            p
              With a premium account you get even more features. It already starts from 0.00!
            p
              a(class='btn', href='http://localhost:1337/premium')
                Read more &raquo;
    hr

    footer
      p
        &copy; PicoBudget.com 2012

    script(src='bootstrap/js/bootstrap.js')
    script(src='js/libs/jquery-1.7.2.js') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T00:06:53.137

我修好了它：

*   修复了所有缺失的 '
*   **删除了标题后的 =（第 4 行）**

# php - Zend Studio 9 包含内置 Zend 框架库

> ID：11073050
> 
> 赞同：0
> 
> 时间：2012-06-17T16:44:55.273
> 
> 标签：php, apache, zend-framework, zend-studio

我最近安装了 Zend Studio 9 并创建了一个 Zend Framework 项目。在设置选项中，它说它包含 Zend Framework 库，并且在创建项目时，在 php 资源管理器中的所有项目文件下，它说它正在被包含。

虽然这是真的，但我注意到“库”文件夹是空的。当我尝试在浏览器中运行 public/index.php 时，它不显示任何内容。

我的问题是如何包含内置库，以便我的 public/index.php 文件显示在浏览器中？我知道您可以下载 zend 库文件并将它们放在库文件夹中，但这会产生大量警告，而且我不禁想到，当库应该是内置的时，有一种更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:39:20.377

在 Zend Studio 中为项目添加 ZF 支持会使 IDE 了解库的类和文件结构，因此您可以在 IDE 中获得代码完成、方法描述和参数列表，但实际上并不能让您访问库.

当您想要运行/部署您的项目时，您需要下载实际文件。您可以将它们放在您的库文件夹中，但通常我将它们放在一个更常见的位置，我将其添加到 .php 文件中的 PHP 包含路径中`php.ini`。这是可选的。如果您将`Zend`文件夹放在您的`library`文件夹中，从技术上讲，您不需要向项目添加 ZF 支持，因为构建器将通过分析您的所有文件来了解所有 ZF 内容。

另一方面，请尝试编辑`php.ini`并设置`display_errors`为 1，以免出现空白页。有一个错误，但由于 display_errors 设置而被隐藏。

# android - 使用旋转图像制作倒计时“派”时钟

> ID：11073053
> 
> 赞同：-1
> 
> 时间：2012-06-17T16:45:12.330
> 
> 标签：android, image, time, clock, countdown

我想要做的是一个饼型时钟，它从 1 分钟到 0 计数时间。我的问题是如何使用脚本将图像添加或删除到布局视图，并使它们在布局视图的中心旋转，具体取决于在倒计时。

最好的方法是什么？我从哪说起呢？我需要读什么才能做到这一点？

提前致谢 ：]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:06:27.483

这样做的一种方法是您可以创建所需的所有图像并使用 CountDownTimer 与每个图像相关联。我不知道您到底想做什么，但只要您正确完成时间，创建动画（flash）并将其放入您的应用程序就可以工作。

对于模拟时钟，这是我使用的：

```
public void CDT() {
//CHANGE 31000 TO WHATEVER YOU WANT. FOR 60 SEC, I WOULD USE 60000 OR 61000
new CountDownTimer(31000, 1000) {
    public void onTick(long millisUntilFinished) {
//THIS MAKES IT LOOK NICER WHEN IT COUNTS DOWN (eg. :09 instead of :9)
        if(millisUntilFinished < 10000) {
            textTimer.setText(":0" + millisUntilFinished / 1000);
            }
        else {
            textTimer.setText(":" + millisUntilFinished / 1000);
            }
        }
    public void onFinish() {
        textTimer.setText(":00");
        new AlertDialog.Builder(SplitEmUpBeta2Activity.this)
        .setTitle("TEXT").setMessage("TEXT")
        .setNeutralButton("TEXT", null);
        .show();
        }
    }
.start();
} 
```

如果你真的想创建“Pie”时钟，你需要设置 onTick 将时钟的图像替换为适当的图像（删除旧的并添加新的）。例如：

```
public void onTick(long millisUntilFinished) {
    if(millisUntilFinished == 60000) {
        //REPLACE IMAGE (REMOVE OLD AND REPLACE WITH NEW)
        }
    // AND SO ON UNTIL YOU FINISH ALL THE IMAGES
} 
```

# c# - 如何在调试模式下构建控制台应用程序，在发布模式下构建 Windows 应用程序？

> ID：11073056
> 
> 赞同：1
> 
> 时间：2012-06-17T16:45:39.703
> 
> 标签：c#, visual-studio-2010

正如他们对 Sharpdevelop 所做的那样，当您在`debug`模式下启动解决方案时，它会启动应用程序和一个控制台（显示日志）。当您在`release`模式下启动应用程序时，它只会启动应用程序。

当我使用 Visual Studio Gui 修改文件时，`.prj`最后一个配置会覆盖`debug` **和**`release`模式。

如何将 Visual Studio 配置为具有与 Sharpdevelop 解决方案相同的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:03:21.867

Visual Studio 项目将应用程序设置组织在三个 PropertyGroup 中。Debug、Release 和一组独立于活动配置的选项。OutputType 在最后一个。

解决方法是简单地自己创建控制台。使用 Application.Startup 事件，如下所示：

```
public partial class App : Application {
    private void Application_Startup(object sender, StartupEventArgs e) {
#if DEBUG
        AllocConsole();
        Console.WriteLine("Hello world");
#endif
    }

    [System.Runtime.InteropServices.DllImport("kernel32.dll")]
    private static extern bool AllocConsole();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T16:55:04.793

Visual Studio 没有这种行为。

但是，对于 Windows 窗体/WPF 应用程序，它具有输出工具窗口（菜单 View/Output 以显示它）。所有日志、诊断消息和所有调试都显示在那里。

对于控制台应用程序，应用程序将在控制台（终端窗口）中运行是有意义的。

编辑：如果你想到它，你也可以在 VS 中做类似的事情。在项目属性中，转到 Debug 并作为 Start Action 选择 External Program。在那里你可以输入路径

> %WINDIR%/system32/cmd.exe /k "调试 e​​xe 的路径"

# java - Java Packages：新手将系统默认包修改为命名包

> ID：11073058
> 
> 赞同：1
> 
> 时间：2012-06-17T16:46:03.073
> 
> 标签：java

我是 java 和包的新手，需要一些帮助来导航它们。目前，我有一个用于 Web 应用程序的正常运行的 java 程序，其中我的所有 .java 和 .class 文件都位于`myapp/WEB-INF/classes`linux 服务器上的目录中：

```
myapp/WEB-INF/classes/MyJavaClass1.class
myapp/WEB-INF/classes/MyJavaClass2.class
myapp/WEB-INF/classes/MyJavaClass3.class 
```

这些文件都没有包含一行代码，`package`所以我假设正在使用系统默认包。

然后我添加了一个`mytools`目录，并在其中创建了一个新类。

```
myapp/WEB-INF/classes/mytools/MyToolClass1.class 
```

但似乎这个新类无法访问`myapp/WEB-INF/classes`目录中的类，除非这些 java 文件包含包名。所以我的问题是如何将文件从系统默认包（例如未指定包）更改为命名包？

我应该追加`package mypackage;`到 MyJavaClass1.java、MyJavaClass2.java 和 MyJavaClass3.java 的第一行，然后追加`package mypackage.mytools;`到 MyToolClass1.java？

或者，在执行上述操作之前，我是否还需要创建一个目录并将 MyJavaClass1.class 等文件放在其中`mypackage`？`myapp/WEB-INF/classes/mypackage`

那么当我编译 .java 文件时，我是在它们自己的目录中编译每个文件（还是所有文件都需要从顶级目录编译）？

更新 1

如果我只是保留 java 文件的默认包（即没有包）`myapp/WEB-INF/classes`，并附加：

```
package mytools;
import MyJavaClass1; 
```

到 MyToolClass1.java 并尝试从`mytools`目录编译 MyToolClass1.java，我得到以下编译错误：

```
MyToolClass1.java:21: '.' expected
import MyJavaClass1;
                   ^
MyToolClass1.java:21: ';' expected
import MyJavaClass1;
                    ^
2 errors 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:54:29.103

如您所述，在java中，包定义在类的顶部。您的代码之所以有效，只是因为所有代码都在根目录下，即没有包。我建议您将所有类移动到一个包中...将它们全部移动到 mytools 目录中并添加`package mytools;`到每个目录中。

有关包最佳实践的快速参考，请通读此[包教程](http://docs.oracle.com/javase/tutorial/java/package/packages.html)。您可能希望通过相关函数打包您的类，这意味着有些可能会进入 mytools 目录，而有些可能会进入 mytools/parse ( `package mytools.parse;`)

# java - 将从数据库中检索到的值传递给其他后续表单

> ID：11073059
> 
> 赞同：0
> 
> 时间：2012-06-17T16:46:09.157
> 
> 标签：java, html, servlets

我在 java、servlet 和 tomcat apache 的帮助下做一个项目。首先，我为用户登录创建了一个表单（第一个表单），提交后，我们被要求输入一个电话号码（第二个表单）。我使用第三种形式的 getParameter 检索到的这个数字。但再次提交第 3 种表格后，我需要以第 4 种表格显示电话号码（在提交第 3 种表格时生成）。我尝试使用带有隐藏属性的输入标签，但是当我将其值作为 request.getParameter 传递时，它显示 request.getParameter 但不显示数字。我能做到吗。我没有使用jsp。我想直接用java和servlet做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:50:27.237

欢迎来到 Java Web 开发。

我认为您需要了解 Java Web 应用程序中的[会话](http://docs.oracle.com/javaee/5/api/javax/jms/Session.html)和会话处理。

在*第三种形式*中，当您检索将其`phoneNumber`存储在会话对象中时：

```
HttpSession session = request.getSession();
session.setAttribute("phone", phoneNumber); // pair of String=key and Object=value 
```

现在在*第 4 种形式*中，您可以获得以下电话号码：

```
Object phoneNumber = request.getSession().getAttribute("phone");
session.invalidate(); //clear-up current session 
```

*以您想要的任何形式解析*它`phoneNumber`。

# android - SharedPreference 中 double 的数组列表

> ID：11073061
> 
> 赞同：0
> 
> 时间：2012-06-17T16:46:14.757
> 
> 标签：android, sharedpreferences

我想知道是否可以在 SharedPreference 中保存为 double 的数组列表。在我的应用程序中，我希望在用户写入新的“大小”时保存“大小”。它必须上传到 double 的数组列表，而不删除前一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:05:21.940

首先 - 你的问题的答案很简单：

这是**不可能**的。

但好消息是有很多方法可以保存双打数组（正如您在评论中所建议的那样）：

将其保存到内部/外部存储中的二进制文件/序列化文件，到 SQLite 数据库，使其成为服务器端的责任（如果有的话..）

如果它可以帮助您从包含序列化数组的文件中读取数据，您可以将数组的大小保存在共享首选项中，但我想您已经知道了。

无论如何——祝你好运

# mono - 来自其他线程的模态 MessageDialog

> ID：11073062
> 
> 赞同：1
> 
> 时间：2012-06-17T16:46:46.803
> 
> 标签：mono, gtk, gtk#, messagedialog

我有问题：一个线程引发从主线程监听的事件。eventHandler 中的主线程引发如下消息对话框：

```
 MessageDialog md = new MessageDialog (parent_window, flags, msgtype, btntype, msg);
 md.Run ();
 md.Destroy(); 
```

但是应用程序在 md.Run(); 上崩溃；（如果我使用 gtk.application.invoke() 提出 messageDialog 没有崩溃，但对话框中也没有模式。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:18:21.080

GTK 对象只能从主线程安全访问。如果您从主线程订阅事件，这并不意味着该事件将从主线程引发。事件在引发它们的线程上引发。

您需要做的是使用 Application.Invoke 在主线程的 mainloop 上安全地将委托排队，并从该委托访问 GUI 对象。您可以在事件处理程序中执行此操作，或者您甚至可以使用委托将事件分派到主线程，这样事件处理程序就不必这样做 - 这只是您希望如何定义内部 API 的问题。

请注意，尽管 Application.Invoke 异步运行委托，但这不会影响对话框的模式。影响对话框模式的事情是您是否在标志参数中包含 DialogFlags.Modal 标志。

# php - 用于广告的 iframe？获取用户信息？

> ID：11073063
> 
> 赞同：0
> 
> 时间：2012-06-17T16:46:46.753
> 
> 标签：php, javascript, iframe, cookies

我试图做一些类似谷歌的 Adsense 的事情。我相信他们使用javascript？但是，如果有人想展示广告，使用 iFrame 是否是一个好主意？iFrame 是否能够捕获用户的数据信息，例如 cookie（adsense 是如何工作的，它们获取用户 cookie——这就是为什么它们可以显示您访问过的网站的广告，如果我错了，请纠正我）？

如果可行，我将如何获取用户 cookie？是否可以？谷歌如何获取用户 cookie？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:48:51.113

> （adsense 是如何工作的，他们获取用户 cookie——这就是为什么他们可以显示您访问过的网站的广告，如果我错了，请纠正我）？

你错了。谷歌只能访问谷歌的 cookie。这是 cookie 安全性的重点；没有浏览器允许您访问其他网站的 cookie。Google 可以使用 cookie 来识别您的身份，但不能使用它们来查看您在非 Google 网站上的行为。

`window.top.document.location`AdSense 通过检查您在 Google 搜索和其他服务上点击的链接、点击的广告、访问的包含 AdSense 的页面 ( ) 以及您从哪些页面访问它们 ( `window.top.document.referrer`)来了解您一直在浏览的内容比我更聪明的人在 Google 想出的方法更多 :)

**编辑**：如评论中所示，实际上*不能*依赖`top`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:53:19.403

不，你不能得到这些饼干。它们被存储为仅供 AdSense 用于记录人员的域读取。

这就是使用 iframe 的原因，它允许谷歌在他们控制的域上加载特定的 url，该 url 包含一个标识符，告诉他们正在使用什么 AdSense 广告系列。

此外，存在（但您无法访问）的 cookie 不包含有关用户本身的任何信息。相反，它只是将人链接到谷歌服务器上已经存在的数据的标识符。

# ruby-on-rails - 在生产中运行脚本

> ID：11073066
> 
> 赞同：2
> 
> 时间：2012-06-17T16:47:03.570
> 
> 标签：ruby-on-rails

我想在生产中运行一个脚本。此脚本生成一条记录并将其插入到生产数据库中。我的问题是脚本试图将记录插入到开发数据库中。

运行报告.rb

```
 ENV['RAILS_ENV'] = 'production'
 require 'rubygems'
 require 'daemons'

 Daemons.run('report.rb') 
```

报告.rb

```
 ENV['RAILS_ENV'] = 'production'
 ...
  @r = Report.new(:info => @info)
  @r.save 
```

我试过了： script/rails runner run_report.rb start

script/rails runner run_report.rb 开始生产

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T16:57:44.910

```
RAILS_ENV=production rails r script/foo.rb 
```

# jquery - JqG rid 中的 setLabel 不起作用

> ID：11073070
> 
> 赞同：0
> 
> 时间：2012-06-17T16:47:42.323
> 
> 标签：jquery, jqgrid

我是 JqGrid 的新手。我想在网格加载后更改列名。我努力了

```
$("#Gridname).jqGrid("setLabel","FirstName","Modifed FistName",{"text-align":"right"}); 
```

但它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:42:45.527

Try putting your code inside of a window.setTimeout so that it runs after the grid has been created:

This is what I used to change my jqGrid column headers:

```
$(function () {
    window.setTimeout(function () {
        $("#Gridname).jqGrid("setLabel","FirstName","Modifed FistName", {"text-align":"right"});
    }, 0);
}); 
```

# java - 如何在java中获取Android中的投影和模型视图转换

> ID：11073074
> 
> 赞同：1
> 
> 时间：2012-06-17T16:48:49.513
> 
> 标签：java, android, opengl-es

我正在尝试通过点击 Android 手机屏幕来计算我的 3D 世界中的光线。我以为我可以只进行投影*模型视图变换并将其反转。然而，掌握实际矩阵似乎并不像我在 OpenGL ES 中所期望的那么简单。

在互联网上搜索了一段时间后，选项似乎是：

*   许多人似乎在使用来自 Android 演示源[（MatrixGrabber、MatrixTrackingGL..）](http://magicscrollsofcode.blogspot.co.uk/2010/10/3d-picking-in-android.html "看")的一堆类。

*   使用 glGetFloatv。然而，这在 GL10 中似乎不存在。它似乎已添加到 GL11 中，但存在[一些](https://stackoverflow.com/questions/7125557/problem-with-getfloatv-function-in-gl11-android) [问题](https://stackoverflow.com/questions/7106824/getting-model-view-matrix-in-android)且[没有文档](http://developer.android.com/reference/javax/microedition/khronos/opengles/GL11.html#glGetFloatv(int,java.nio.FloatBuffer)))。

*   实现您自己的矩阵[代码](http://code.google.com/p/rugl/source/browse/trunk/droid/DroidRUGL/src/com/ryanm/droid/rugl/gl/GLU.java)。

现在已经快两年了，因为我发现的大部分东西都是写出来的，我很难相信谷歌还没有让 Android 上的游戏开发者更容易做到这一点，所以我假设我只是瞎的。有没有官方或推荐的方式来做到这一点？也许sdk支持的东西？

非常感谢。

# jquery - 有没有办法从另一个插件检测 Jquery Mobile 中的第一页加载？

> ID：11073076
> 
> 赞同：4
> 
> 时间：2012-06-17T16:48:55.550
> 
> 标签：jquery, events, jquery-mobile, event-listener

我正在寻找一种在加载第一页之前利用 JQM 并覆盖内容的方法。

JQM 像这样初始化（来自最新的 JQM 代码）：

```
( function( $, window, undefined ) {
    var $html = $( "html" ),
    $head = $( "head" ),
    $window = $( window );

    // trigger mobileinit event 
    $( window.document ).trigger( "mobileinit" );

    ... 

    $.extend($.mobile, {
        // find and enhance the pages in the dom and transition to the first page.
        initializePage: function() {

            ...
            // alert listeners that the pagecontainer has been determined for binding
            // to events triggered on it
            $window.trigger( "pagecontainercreate" );
            ... 
```

所以我可以利用**两个事件：** **mobileinit**和**pagecontainercreate**。我知道这从 HTML 中很容易，如下所示：

```
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript">
    $( window ).bind( 'pagecontainercreate', function() {
        console.log("HELLO");
        });
</script>
<script type="text/javascript" src="jquery.mobile-1.1.0.multiview_con.js"></script>   
<script type="text/javascript" src="plugin.js"></script> 
```

但是，如果我想从位于 JQM 之后的 INSIDE plugin.js 绑定到这些事件怎么办？如果我在 plugin.js 中放置相同的侦听器，它永远不会触发。我想，因为为时已晚。但是我需要防止默认加载第一页，所以一旦 JQM 尝试加载初始页面，对我来说就太晚了。

**问题**：
在 JQM 之后的插件开始加载第一页之前，有什么方法可以监听其中一个事件或任何其他事件触发？

**编辑**：
我不能使用**pageinit**，因为它会在调用第一页后触发。pageCreate 的**同上**，它也不会从插件内部触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:54:58.003

好的。我使用 JQMs`autoinitialize`选项（[请参见此处](http://jquerymobile.com/demos/1.0/docs/api/globalconfig.html)）将其解决为 false，如下所示：

```
$(document).bind("mobileinit", function(){
$.mobile.autoInitializePage = false;
}); 
```

这样 Jquery Mobile 不会自动启动，但只有当我像这样手动调用它时：

```
 if ( $.mobile.autoInitializePage == false){
    $.mobile.initializePage();
    } 
```

我已将最后一个片段放在我的第二个插件中，它需要在 JQM 触发第一页初始化之前完全设置。设置第二个插件后，我打电话`initializePage()`，一切正常。

# android - 添加更大的透明覆盖以增加可点击区域，而无需更改布局

> ID：11073079
> 
> 赞同：5
> 
> 时间：2012-06-17T16:50:18.180
> 
> 标签：android, layout, overlay

我想增加按钮（ImageView）的可点击区域。但我不希望这在视觉上反映出来。它必须看起来像按钮很小（没有边距、填充等），但可点击区域很大。

![在此处输入图像描述](../Images/4a622b77e356e9fd0dfb2a73f7c9718f.png)

我唯一能想到的就是将我的整个布局放在一个 RelativeLayout 中，并以编程方式将叠加层添加到第二个“层”。用数学计算左边距和顶部边距。

有更好的方法吗？

我已经看过here [Expandable clickable area of​​ an ImageView by using padding?](https://stackoverflow.com/questions/4107824/expand-clickable-area-of-an-imageview-by-using-padding)

或在这里 [使按钮更易于点击](https://stackoverflow.com/questions/6898314/making-a-button-easier-to-click)

还有其他一些，但他们总是更改布局，为图像添加填充或透明区域，我不想这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:53:13.157

使用`TouchDelegate`，如[本博文](https://android.jlelse.eu/android-change-touch-area-of-view-by-touchdelegate-fc19f2a34021)中所述。

要点是您可以定义一个`TouchDelegate`对象并将其附加到一个小部件以增加其触摸区域，而不会产生视觉影响。

在 Kotlin 中，这可能看起来像：

```
 fun setExpandedTouchArea(view: View, extraSpace: Int) {
        val parent = view.parent as View

        parent.doOnLayout {
            val area = Rect()

            view.getHitRect(area)

            area.top -= extraSpace
            area.bottom += extraSpace
            area.left -= extraSpace
            area.right += extraSpace

            parent.touchDelegate = TouchDelegate(area, view)
        }
    } 
```

# xcode - 强制应用程序在没有按钮 xcode 的情况下转到上一个视图

> ID：11073080
> 
> 赞同：2
> 
> 时间：2012-06-17T16:50:22.023
> 
> 标签：xcode, view, back

我创建了一个应用程序，如果页面无法加载，它会给出一条错误消息。但是，在那之后，它只是显示一个空白的白色屏幕。如何编辑代码以使其自动转到上一个视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:36:38.367

如果页面无法加载，则调用 UINavigationController 的 popViewControllerAnimated:(BOOL)animated 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:09:51.180

我的猜测是，在警报之后对您有用的是：

```
if(butttonIndex == 1){

      Previous_View *next=[[Previous_View alloc] initWithNibName:@"Previous_View" bundle:nil];

      [self.navigationController pushViewController:next animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T21:20:56.603

您可以在留言后这样做：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

或者如果你想跳回根视图：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

# java - 使用 java 向服务器发出多个请求而不会被禁止？

> ID：11073082
> 
> 赞同：2
> 
> 时间：2012-06-17T16:50:30.490
> 
> 标签：java, php, connection

如果问题标题合适，我不知道，但这是我的问题：

我在 hostmonster 中有一个常规的虚拟主机服务，并在 php 中构建了一个网站。

因此，我在 cron 作业中运行 php 脚本，该作业监视 xml 文件的更改，每次新条目进入该 xml 文件时，脚本将其存储在数据库中。

另一方面，有 java 构建的桌面客户端，需要尽快注意创建了一个新条目，为此客户端每秒连接到第二个 php 文件，第二个文件告诉是否有更改。

问题是，每 260 个连接，我的 IP 就会被服务器禁止 :( 并且客户端崩溃，客户端将被多个用户使用。

我就如何处理这个问题联系了支持人员，但他们告诉我使用单个连接，我尝试重用`UrlConnection`但在第一次请求之后它只是给出 null。然后我尝试了 Sockets 但没有运气。我知道有管理这个的库，但我不知道它们是如何被调用的。有人可以给我建议吗？

感谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:54:12.727

使用长轮询方法。保持连接打开，直到响应到达。这样，您只需要请求更新一次。

PHP 可能不是这项工作的最佳工具。

# java - android中的base 64编码

> ID：11073088
> 
> 赞同：-1
> 
> 时间：2012-06-17T16:51:30.667
> 
> 标签：java, android, encryption

我正在尝试对我的 AES 加密密码进行 Base64 编码。我已将文件添加到 src 文件夹中。这是代码。

```
package code.finalwork;

import javax.crypto.Cipher;
import javax.crypto.spec.SecretKeySpec;

import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Base64;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class FinalWorkActivity extends Activity {
    private String pref_file = "pref.xml";

    TextView pass;
    TextView pass_cnf;
    TextView err_msg;
    Button done;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        pass = (TextView) findViewById(R.id.pass);
        pass_cnf = (TextView) findViewById(R.id.pass_cnf);
        err_msg = (TextView) findViewById(R.id.error_pass);
        done = (Button) findViewById(R.id.btn_done);

        SharedPreferences pref = getSharedPreferences(pref_file,
                Context.MODE_PRIVATE);
        Boolean val = pref.getBoolean("firstuse", true);
        if (val) {
            SharedPreferences.Editor mod = pref.edit();
            mod.putBoolean("firstuse", false);
            mod.commit();

        }
    }

    // ///////////////////////////////////////////////////////////////////////
    public void onclick(View view) {
        switch (view.getId()) {
        case R.id.btn_done:
            String usrpass = pass.getText().toString();
            String cnfrmpass = pass_cnf.getText().toString();
            if (usrpass.equals(cnfrmpass)) {
                byte[] password = Base64.decode(usrpass, 0);
                byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5,
                        6 };
                for (int i = 0; i < usrpass.length(); i++) {
                    key[i] = password[i];
                }
                try {
                    String passtostore = encrypt(usrpass, key);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                err_msg.setText("Password added");
                err_msg.setVisibility(View.VISIBLE);
            } else {
                err_msg.setText("Password Must Match");
                err_msg.setVisibility(View.VISIBLE);
            }
            break;
        }
    }

    // //////////////////////////////////////////////////////////////////////

    public String encrypt(String toencrypt, byte key[]) throws Exception {
        SecretKeySpec secret = new SecretKeySpec(key, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, secret);
        byte[] encryptedbytes = cipher.doFinal(toencrypt.getBytes());
        String encrypted = Base64.encodeToString(encryptedbytes, 0);
        return encrypted;

    }
} 
```

如果我们注释加密代码，此代码工作正常。但是通过这些行，我会生成应用程序意外停止的错误。 ![这就是日志猫显示的内容](../Images/fb767940d0421b6f985af65cf57b4e9d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:15:19.680

Base64 用于将二进制数据编码为 64 个字符的 ASCII-7 子集，通过基于文本的协议（如 SMTP 或 HTTP）进行传输是安全的。

这里的一个潜在问题是您正在尝试对用户输入进行 Base64 解码，这只是您的代码行中的一个普通字符串：

```
byte[] password=Base64.decode(usrpass, 0); 
```

要将纯文本（字符串）中的密码转换为 byte[]，请使用：

```
byte[] password =  userpass.getBytes("UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:20:07.610

看起来您的 OnClickListener 中有一个 ArrayIndexOutOfBoundsException。除了@maasg 写的内容之外，这些行看起来非常可疑。

```
byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6 };
for (int i = 0; i < usrpass.length(); i++) {
    key[i] = password[i];
} 
```

除非您正在做的事情在您的代码中不是很明显，否则如果 usrpass 比 key 长，您将超出范围。

# django - 从 django 应用程序输出数据

> ID：11073089
> 
> 赞同：-1
> 
> 时间：2012-06-17T16:51:36.737
> 
> 标签：django, django-models, django-templates

这可能是一件非常简单的事情，但由于某种原因，我似乎无法做到。

我正在尝试从我创建的博客（应用程序）中输出一些数据。该博客运行良好，并将内容放在我创建的模型字段中并输出到我指定的模板。

但是当试图将信息输出到主页时，什么都没有显示。我对 django 相当陌生，我想我可能会遗漏一些东西。

我是否需要在应用程序之外的页面中添加一些内容？还是我需要在 urls 文件中设置一些东西？

我希望这是有道理的，因为我认为这并不复杂，但我只是觉得我错过了一些东西！

谢谢。

代码：

```
url(r'blog/(?P<slug>[-\w]+)/$', 'blog.views.blog', name="blog"),
   url(r'blog/', 'blog.views.blog_index', name="blog_index"),

def blog_index(request):
    blogs = Blog.objects.filter(active=True)

    return render_to_response('blog/index.html', {
        'blogs':blogs,
    }, context_instance=RequestContext(request))

def blog(request, slug):
    blog = get_object_or_404(Blog, active=True, slug=slug)

    return render_to_response('blog/blog_post.html', {
        'blog': blog
    }, context_instance=RequestContext(request))

class Blog(TimeStampedActivate):
    title = models.CharField(max_length=255, help_text="Can be anything up to 255 character")
    slug = models.SlugField()
    description = models.TextField(blank=True, help_text="Give a short description of the news post")
    content = models.TextField(blank=True, help_text="This is the main content for the news post")
    user = models.ForeignKey(User, related_name="blog")

    def __unicode__(self):
        return self.title

    @models.permalink
    def get_absolute_url(self):
        return ('blog', (), {
            'slug': self.slug
        }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:01:56.743

您是说 go to`mysite.com/blog/`显示正确，但您还希望它成为站点索引页`mysite.com`吗？

如果是这样，您需要在项目`urls.py`文件中添加一个新模式，如下所示：

`url(r'^$', 'blog.views.blog_index')`

这样做将创建`mysite.com/blog/`并`mysite.com`路由到相同的视图。

# xml - 使用通过 Wix 创建的安装程序启用安装程序权限

> ID：11073090
> 
> 赞同：1
> 
> 时间：2012-06-17T16:51:59.890
> 
> 标签：xml, wix, wix3.5

我在以管理员身份运行的对话框页面上创建了一个使用 Wix 的安装程序我想要一个复选框，如果选中该复选框，应该为当前用户（管理员）和系统中的所有其他用户安装，是否可以使用 Wix？

安装程序将如何检查当前用户拥有的权限？

例如，如果我在标准用户帐户上安装，那么安装程序将如何知道它是什么帐户？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:58:08.740

据我了解，您需要为复选框设置一个特殊的 gui 窗口吗？你可以[在这里看到](http://wix.tramontana.co.hu/tutorial/user-interface-revisited)一个很好的教程。

您的另一个问题是检查当前用户及其权限？你需要使用一些标准的环境变量。利用

```
 <Condition Message="Message text">Privileged</Condition> 
```

检查管理员权限。如果此条件通过 - 您以管理员身份运行。

要检查当前用户，请使用 LogonUser 环境变量。例如，您可以创建一个自定义对话框，您可以在其中检查是否需要“为所有”用户安装它，或者只为当前用户安装。下一步 - 检查管理员权限。

而且..使用更多谷歌...

# jquery - jQuery 显示带有更多和更少链接的第一个 X 元素

> ID：11073100
> 
> 赞同：9
> 
> 时间：2012-06-17T16:52:41.020
> 
> 标签：jquery, jquery-ui, jquery-plugins, collapse

我正在尝试找到一个 jQuery 解决方案，以在左侧导航过滤器中显示每个菜单上的前 3 个项目，并带有“显示更多”和“显示更少”链接，使用户能够展开列表。

我已经搜索了一个解决方案，但大多数展开/折叠脚本完全隐藏了图层，而其他脚本则显示展开（显示更多）链接，但不切换以显示折叠（显示更少）链接。

我的菜单编码如下。

```
<div id="menu1">
<ul class="term-list">
<li class="term-item ">Item 1</li>
<li class="term-item ">Item 2</li>
<li class="term-item ">Item 3</li>
<li class="term-item ">Item 4</li>
</ul>
</div>
<div id="menu2">
<ul class="term-list">
<li class="term-item ">Item 1</li>
<li class="term-item ">Item 2</li>
<li class="term-item ">Item 3</li>
<li class="term-item ">Item 4</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-17T17:04:07.633

## *[jsBin 演示](http://jsbin.com/abusoq/2/edit#javascript,html,live)*

这里只是一个基本的例子：

```
$('ul.term-list').each(function(){

  var LiN = $(this).find('li').length;

  if( LiN > 3){    
    $('li', this).eq(2).nextAll().hide().addClass('toggleable');
    $(this).append('<li class="more">More...</li>');    
  }

});

$('ul.term-list').on('click','.more', function(){

  if( $(this).hasClass('less') ){    
    $(this).text('More...').removeClass('less');    
  }else{
    $(this).text('Less...').addClass('less'); 
  }

  $(this).siblings('li.toggleable').slideToggle();

}); 
```

或者更***[紧凑的版本](http://jsbin.com/dojoku/1/edit?html,js,output)***。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T17:38:11.970

演示：http: [//jsfiddle.net/DQKyT/](http://jsfiddle.net/DQKyT/)

```
$(function(){
    /* add button, hide extra items*/      
    $('.term-list').each(function() {
        var $list = $(this);
        $list.before('<button class="more_less">More</button>')
       $list.find('.term-item:gt(2)').hide();
    });

    /* button click handler*/
    $('.more_less').click(function() {
        var $btn = $(this)
        $btn.next().find('.term-item:gt(2)').slideToggle();    
        $btn.text($btn.text() == 'More' ? 'Less' : 'More');   
    });
}) 
```

# php - 如果我只执行一个查询，使用事务的好处是否足够显着？

> ID：11073101
> 
> 赞同：1
> 
> 时间：2012-06-17T16:52:49.833
> 
> 标签：php, mysql, transactions, pdo

我想知道，因为当您执行一组查询时事务很有用。但是，如果我只执行一个查询，我应该费心使用它吗？

我目前有

```
$res = $pdo->query("SELECT id FROM products LIMIT 5");
$row = $res->fetchAll(); 
```

它所做的就是这样。下面的代码效率更高吗？（我认为它不是因为它只做一件事，但我不确定）

```
$pdo->beginTransaction();
$res = $pdo->exec("SELECT id FROM products LIMIT 5");
$pdo->commit(); 
```

如果它不是更有效，是否有另一种可能更有效的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:56:49.943

如果在查询*之后*执行的任何操作对脚本正在执行的功能很重要（假设是电子商务交易）并且将查询留在原处将是有问题的（即与付款失败有关的事情），那么您将需要即使只执行一个查询，也要使用事务。否则，您将无需付款即可购买。

如果该事务是该脚本中唯一发生的事情，那么事务是不必要的并且可以/应该避免。

这是一个简单的例子：

```
try 
{
    $pdo->beginTransaction();
    $res = $pdo->exec("INSERT INTO orders ....");
    // Try to make payment
    $payment->process();
    $pdo->commit();
}
catch (Exception $e)
{
    // Payment failed unexpectedly! Rollback the transaction.
    $pdo->rollback();
} 
```

自然地，您会希望更好地处理此类故障，但这应该可以很好地证明何时进行事务是合适的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T17:11:34.863

# 交易与效率无关

事务允许您将多个语句组合为一个原子语句，这意味着它将完全完成或根本不完成，但不能部分完成。例如，如果您从一个银行帐户中取出资金，然后将其添加到另一个银行帐户，那么此操作应该完全发生（帐户 a 少 x 美元，帐户 b 多 x 美元）或根本不发生。绝对不能发生的是，您从账户 a 中取出资金，然后系统崩溃并且资金在数字虚空中丢失。

# 你不能没有交易

当您使用 PDO 并且您没有显式启动事务时，您将处于自动提交模式。这意味着每次启动查询时，都会启动事务，执行查询并立即提交事务（意味着标记为完成）。

# 还在考虑性能？

在极少数情况下，考虑性能和交易可能是合理的。例如，如果您正在处理大量数据，那么在一个大型事务中执行所有语句可能会更快（是否真的取决于您的数据库）。另一方面，在这种情况下，无论如何在事务中进行这些操作可能是合乎逻辑的，因为如果您的程序崩溃，您想重新运行程序，它应该从头开始，而不是上次离开的地方.

# php - sql中表之间的关系有什么好处？

> ID：11073108
> 
> 赞同：4
> 
> 时间：2012-06-17T16:53:34.653
> 
> 标签：php, mysql, sql, relation

我做了三张桌子。
**Table1=users**。列名是**userid (auto_increment)**和**username**。
**表2=爱好**。列名是**hobbyid (auto_increment)**和**hobbyname**。
**表 3=users_hobbies**。列名是**FK_userid**和**FK_hobbyid**。

现在，每当我从 html 表单**注册新用户和他/她的爱好时，我都会****选择** 从表 1 和表 2 生成的 **相应用户 ID 和 hoobyid**
并**使用查询将它们插入表 3**

那么，如果我在表 1 和 3 以及表 2 和 3 之间创建关系，那么关系有什么用呢？
对应的 userid 和 hobbyid 会**自动**转到表 3**而不使用 query**吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T16:57:34.780

不，userid 和 hobbyid 不会自动转到任何地方。

关系或约束的主要点是强制数据完整性。这意味着如果没有 id 为 2 的用户和 id 为 2 的爱好，您将无法将包含 id 2、2 的条目添加到 users_hobbies 表中。

为了保持这种完整性，您还可以指定级联。（取决于数据库系统，我几乎不使用 mysql，所以我不确定）。

这意味着，如果用户本人被删除，您可以指定删除 id 为 1 的用户的所有 users_hobbies。

# xcode - 如何在 xcode 中从控制器外部更新视图

> ID：11073110
> 
> 赞同：0
> 
> 时间：2012-06-17T16:53:43.240
> 
> 标签：xcode, uiviewcontroller, uiapplicationdelegate

到目前为止，我只从其控制器中更新了一个视图。我现在处于一种不同的情况，我需要根据我的应用程序的另一个类 C 中发生的某些事件来更新视图（文本标签）中的元素。我意识到这是基本的，但我不清楚处理这个问题的正确方法是什么。

*   我应该在 C 的 init 方法中传递我的视图控制器吗？（每当我初始化 C 类时，传入视图控制器似乎很麻烦。也需要大量重构。）

*   我是否应该通过调用 [[UIApplication sharedApplication] delegate] 从 C 中检索应用程序委托，并从应用程序委托检索我需要的视图控制器？

这两种方法都没有让我觉得实用或优雅。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:59:07.197

两种最常见的方法是委托和通知。

在一种情况下，您给 C 类一个委托属性并将其设置为视图控制器。为了让它看起来不错，您可以定义一个类似于对许多 API 类所做的委托协议。它**可以**在 init 中传递，但直接设置属性是标准的。

另一种方法是让视图控制器在事件发生时侦听 C 类发送的通知。然后，视图控制器在收到通知时进行更新。

# spring - JDOM 异常 Spring MVC

> ID：11073112
> 
> 赞同：0
> 
> 时间：2012-06-17T16:53:49.850
> 
> 标签：spring, exception, spring-mvc, jar, rome

我正在尝试为我的网站创建 RSS 提要，并且正在使用 rome 1.0 库。当我运行我的项目时，我得到以下信息：

```
org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.NoClassDefFoundError: org/jdom/JDOMException
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:839)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

    root cause

java.lang.NoClassDefFoundError: org/jdom/JDOMException
    org.springframework.web.servlet.view.feed.AbstractFeedView.renderMergedOutputModel(AbstractFeedView.java:62)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

    root cause

java.lang.ClassNotFoundException: org.jdom.JDOMException
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
    org.springframework.web.servlet.view.feed.AbstractFeedView.renderMergedOutputModel(AbstractFeedView.java:62)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

我在互联网上搜索，他们说可能缺少一个图书馆。但我把罗马图书馆放在了这个方向：

```
 WEB-INF/lib 
```

我试图了解问题的根源，但我不能。谁能向我解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:03:17.570

很可能，您还缺少[JDOM](http://jdom.org/)。

# android - sqlite数据库的索引越界异常

> ID：11073115
> 
> 赞同：0
> 
> 时间：2012-06-17T16:54:10.757
> 
> 标签：android, sqlite

我尝试实现以下代码

在activity.java 文件中

```
 DatabaseEvent mDbHelper = new DatabaseEvent(getApplicationContext());
      mDbHelper.open();
      Cursor notesCursor = mDbHelper.fetchEvent();
             startManagingCursor(notesCursor);
        String[] from = new String[]{DatabaseEvent.KEY_ETITLE, DatabaseEvent.KEY_DISTANCE, DatabaseEvent.KEY_IMGNAME, DatabaseEvent.KEY_DESCRIPTION, DatabaseEvent.KEY_EID};
            int[] to = new int[]{R.id.title, R.id.duration, R.id.list_image, R.id.artist, R.id.id};
            SimpleCursorAdapter event = 
                    new SimpleCursorAdapter(getApplicationContext(), R.layout.list_row, notesCursor, from, to); 
```

在 DatabaseEvent.java

```
 public long createEvent(String title, String distance, String imgname, String description, String eid) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_ETITLE, title);
        initialValues.put(KEY_DISTANCE, distance);
        initialValues.put(KEY_IMGNAME, imgname);
        initialValues.put(KEY_DESCRIPTION, description);
        initialValues.put(KEY_EID, eid);

          Log.v("INFO1","inserting db");
        return mDb.insert(EVENT_TABLE, null, initialValues);

    }

         public Cursor fetchEvent() {
         Log.v("INFO1","fetching db");
         Cursor mCursor = mDb.query(EVENT_TABLE, new String[] {KEY_ROWID, KEY_ETITLE, KEY_DISTANCE,
                KEY_IMGNAME, KEY_DESCRIPTION, KEY_EID}, null, null,null,null, KEY_DISTANCE+" ASC");

        return mCursor;

    } 
```

在 logcat 上，我可以清楚地看到日志消息“inserting db”被打印了 3 次意味着数据日期真正添加到数据库中，但是日志消息“fetching db”打印了一次并给了我流动的错误说：

```
 CursorIndexOutOfBoundException index -1, requsted, with a size of 60, 
```

我尝试了不同的功能，如 moveToFirst() 和 moveToNext() 但仍然无法解决问题，任何人都可以帮我，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:13:56.833

你忘了包括`mCursor.moveToFirst();`

将您的代码更改为

```
 public Cursor fetchEvent() {
         Log.v("INFO1","fetching db");
         Cursor mCursor = mDb.query(EVENT_TABLE, new String[] {KEY_ROWID, KEY_ETITLE, KEY_DISTANCE,
                KEY_IMGNAME, KEY_DESCRIPTION, KEY_EID}, null, null,null,null, KEY_DISTANCE+" ASC");
        mCursor.moveToFirst();
        return mCursor;

    } 
```

# ruby-on-rails - 带有 RoR 链接图像的鼠标悬停

> ID：11073121
> 
> 赞同：1
> 
> 时间：2012-06-17T16:54:36.520
> 
> 标签：ruby-on-rails, ruby, image, dom-events

我有一个作为图像创建的按钮。此按钮有一个鼠标悬停，可以切换到另一个图像。基本的 Javascript。我需要 Rails 链接中的图像。有没有办法让我在 rails 链接中添加 Javascript 事件？

**这是我的工作：**

```
<%= link_to image_tag("../assets/images/buttonBig.png", :border=>0), :action => 
'signup', :controller => 'prelogin' %> 
```

**这就是我想要的：**

```
<%= link_to image_tag("../assets/images/buttonBig.png"
onmouseover="src='../assets/images/buttonBigHover.png'" 
onmouseout="src='../assets/images/buttonBig.png'", :border=>0), :action => 
'signup', :controller => 'prelogin' %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:11:55.023

好吧，最好不使用 Rails 来解决这个问题。你应该在这里严格地保留 CSS，如下所示：

```
<%= link_to image_tag("../assets/images/buttonBig.png"), :action => 'signup', :controller => 'prelogin', :class => "button-class" %> 
```

用 CSS 编写其余部分：

```
.button-class {
  border: 0;
  background: url('../assets/images/button.png') no-repeat 0 0px;
}
.button-class:hover {
   background: url('../assets/images/button.png') no-repeat 0 20px;
} 
```

现在请注意我如何在此处为您的按钮使用相同的图像。原因是您的浏览器只需加载一张图片。状态的差异是该图像的背景位置的差异。因此，您可以对按钮进行切片，以便在一张图像中同时使用两种状态。`no-repeat`然后测量像素差异并在我上面写的属性之后设置这些坐标。在我的示例中，我猜测`20px`y 坐标差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:12:15.273

使用 css 它更简单、更健壮，你必须有一个精灵而不是 2 个图像：

1º 您必须在[http://csssprites.com/](http://csssprites.com/)`buttonBig.png`中创建一个精灵`buttonBigHover.png`

2º现在你已经为你的链接应用了一个类，比如：

在你的 view.html.erb

```
<%= link_to image_tag("buttonBig.png", :border=>0), :action => 
'signup', :controller => 'prelogin', :class => "button" %> 
```

3º [http://csssprites.com/](http://csssprites.com/)将为`background-position`属性生成一个值：您必须为您的 css 复制此值，例如：

在您的 prelogin.scss 文件中：

```
a.button {
       background: url("buttonBig.png") no-repeat scroll 0 0 transparent;
          }

a.button:hover {
           background: url("buttonBig.png") no-repeat scroll 0 50px transparent;
              } 
```

在`a.button:hover`您可以观察到背景位置是`0 50px`。您必须检查您的精灵的正确值。

问候！

# ruby - 将 ORM 添加到现有的 padrino 应用程序

> ID：11073124
> 
> 赞同：4
> 
> 时间：2012-06-17T16:54:48.337
> 
> 标签：ruby, sinatra, padrino

我是 ruby​​、sinatra 和 padrino 的新手，所以这可能是一个愚蠢的问题，但是：
有没有办法将 orm 添加到现有应用程序中？

我的问题是我使用以下命令行创建了一个应用程序：

```
$ padrino-gen project sample_blog -a mysql -b 
```

（我以为选择了默认的ORM。）
然后尝试添加模型：

```
$ padrino-gen model post title:string body:text
<= You need an ORM adapter for run this generator. Sorry! 
```

如何在不重新创建整个应用程序的情况下添加 orm？
现在它不是很重要，因为应用程序不包含任何内容，但我计划稍后添加测试，我想知道它是否容易。

感谢您对初学者的提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T17:16:37.010

用你的编辑器打开`/project-name/.components`并添加

```
:orm: activerecord 
```

# orm - 如何将字符串保存为 nvarchar ServiceStack.OrmLite？

> ID：11073127
> 
> 赞同：2
> 
> 时间：2012-06-17T16:55:03.913
> 
> 标签：orm, servicestack

我想通过 ServiceStack.OrmLite (SqlServer) 将字符串存储为 Unicode 字符串。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-23T14:35:15.070

您可以使用代码创建数据库。之后，您必须手动更改数据类型。

# openid - openid 提供者在发现过程中返回什么？

> ID：11073129
> 
> 赞同：0
> 
> 时间：2012-06-17T16:55:05.953
> 
> 标签：openid, openid-provider

我正在做一个 openid 提供者。但我被困在发现步骤。我所做的如下：

1.  依赖方转到我的发现 url
2.  我的服务器（openid 提供者）返回以下文档（内容类型：application/xrds+xml）

`<?xml version="1.0" encoding="UTF-8"?>`

`<xrds:XRDS xmlns:xrds="xri://$xrds" xmlns="xri://$xrd*($v*2.0)">`

`<XRD>`

`<Service priority="0">`

`<Type>http://specs.openid.net/auth/2.0/server</Type>`

`<URI>my_endpoint_url (an https address, with self signed certificate)</URI>`

`</Service>`

`</XRD>`

`</xrds:XRDS>`

但是，我的 openid 消费者测试人员不知何故无法发现我的 openid 提供者。我不知道我的 xrds 文档出了什么问题，但我的 openid 消费者测试仪可用于发现 google、yahoo、verisign，并将我带到登录屏幕。所以据说我的openid消费者测试仪没有做错任何事。请告诉我该怎么做。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:47:00.380

你的 Openid 支持扩展吗？

您必须支持至少 Openid 简单属性交换服务扩展，以便在端点之间交换身份信息。因此，您必须将扩展列为 xrd:Service 元素的附加 xrd:Type 子元素。

像这样的东西；

```
<Service priority="0">
 <Type>http://specs.openid.net/auth/2.0/server</Type>
 <Type>http://openid.net/srv/ax/1.0</Type>
 <Type>http://specs.openid.net/extensions/ui/1.0/mode/popup</Type>
 <Type>http://specs.openid.net/extensions/ui/1.0/icon</Type>
 <Type>http://specs.openid.net/extensions/pape/1.0</Type>
 <URI>endpoint_url</URI>
 </Service> 
```

有关这方面的更多信息，请查看以下链接。 [http://openid.net/specs/openid-authentication-2_0.html#discovery](http://openid.net/specs/openid-authentication-2_0.html#discovery)

# javascript - jQuery视差效果问题

> ID：11073130
> 
> 赞同：1
> 
> 时间：2012-06-17T16:55:48.257
> 
> 标签：javascript, jquery, parallax

我身体背景的 jQuery 视差效果有问题。这是代码：

```
jQuery(document).ready(function($){
    window.onscroll = function() {
        var bh = $(document.body).height();
        var wh = $(window).height();
        var st = $(window).scrollTop();
        var p = wh / bh;
        var pp = (st * p);
        $('body').css({backgroundPosition: '50% -'+pp+'px'});
    }

}); 
```

这段代码很棒，但是在我添加了带有徽标和导航菜单的标题后，它们关闭了部分背景，所以现在看起来不够好。这里也是链接[http://layot.prestatrend.com/](http://layot.prestatrend.com/)顺便说一下，我的标题高度是 129px。似乎我需要制作 background-position +129px 但无法弄清楚如何使其与 javascript 一起正常工作。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:06:42.407

只需在此处添加：

```
var topPosition = pp + 129;
$('body').css({backgroundPosition: '50% -'+topPosition +'px'}); 
```

（或者）

```
 $('body').css({backgroundPosition: '50% -'+ (pp + 129) +'px'}); // the parentesis avoid concatenation also 
```

这样你就可以正确地添加你想要的偏移量。不要在字符串连接中执行此操作，因为浏览器可能会附加 ==> 这会导致类似： for `pp=99`==> `pp+129 = '99129'`。

# asp.net - 多语言和表单验证

> ID：11073138
> 
> 赞同：0
> 
> 时间：2012-06-17T16:56:47.803
> 
> 标签：asp.net, validation, multilingual

我正在用 asp.net 网络表单创建网站。我在表单 (asp:RequiredFieldValidator) 中添加了验证，并且我在页面上使用了多语言，如下所示：

我有这样的链接按钮：

```
<asp:LinkButton ID="lnkSetEnglish" runat="server" CommandArgument="en-GB" OnClick="RequestLanguageChange_Click">
  <img src="Images/logos/en.png" alt="English" />
</asp:LinkButton> 
```

和功能

```
 protected void RequestLanguageChange_Click(object sender, EventArgs e)
    {
        ImageButton senderLink = sender as ImageButton;

        HttpCookie cookie = new HttpCookie("CultureInfo");
        cookie.Value = senderLink.CommandArgument;
        Response.Cookies.Add(cookie);

        //Set the culture and reload the page for immediate effect. 
        //Future effects are handled by Global.asax
        Thread.CurrentThread.CurrentCulture = new CultureInfo(senderLink.CommandArgument);
        Thread.CurrentThread.CurrentUICulture = new CultureInfo(senderLink.CommandArgument);
        Server.Transfer(Request.Path);
    } 
```

我现在有验证问题。当我在带有验证字段的联系表上并且此字段为空时，当我尝试通过单击链接内的图像来更改语言时，而不是更改站点的语言，我有验证的命令。我可以在这里做什么？

最好的问候， 达格纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:10:46.900

在 LinkBut​​ton 上将 CausesValidation 设置为 false

# c# - 为什么 Process 会自动在桌面上找到我的 .exe？如何改为指定固定/非灵活路径？

> ID：11073141
> 
> 赞同：1
> 
> 时间：2012-06-17T16:56:55.903
> 
> 标签：c#

我以通常的方式启动一个可执行文件：

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.WorkingDirectory = @"C:\someDirectory\";
p.StartInfo.FileName = "ConsoleProgram.exe";
p.Start(); 
```

目前，可执行文件不在 中`C:\someDirectory\`，所以我希望上面的操作由于找不到可执行文件而失败。

相反，它的作用是，由于某些原因，它在我的桌面上找到了一个同名的不同可执行文件！（我知道这一点，因为如果我重命名桌面上的 .exe，软件会抱怨找不到 .exe。）我怎样才能防止这种行为，并强制执行特定路径而不是其他路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:14:41.730

> 当 UseShellExecute 为 false 时，WorkingDirectory 属性不用于查找可执行文件。相反，它由已启动的进程使用，并且仅在新进程的上下文中才有意义。

在这里，您将 UseShellExecute 设置为 false，WorkingDirectory 绝对没有任何意义，因此您必须使用绝对路径作为 FileName。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:00:55.510

您是否尝试将 设置`Filename`为文件的路径？像这样：

```
p.StartInfo.FileName = @"C:\someDirectory\ConsoleProgram.exe"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T17:01:26.247

将完整的路径信息添加到 FileName。

# ruby-on-rails - 如何操作散列键将数字月份转换为名称

> ID：11073143
> 
> 赞同：0
> 
> 时间：2012-06-17T16:57:01.300
> 
> 标签：ruby-on-rails, activerecord

我有一个 AR 查询，它每月返回一个事件哈希，按月排序

```
o.events.group("to_char(date,'MM')").order("to_char(date,'MM')").size() 
```

我在此查询中使用数字月份，因为这是我能找到以正确顺序获取事物的最佳方式，而且我还需要对哈希进行一些其他操作。

在显示结果之前，我需要将数字月份转换回单词。我在查询末尾添加了以下内容

```
.each_key{ |key| Date::MONTHNAMES[key] } 
```

但我明白了

```
TypeError: can't convert String into Integer. 
```

所以我尝试了

```
.each_key{ |key| Date::MONTHNAMES[key.to_i] } 
```

但是月份仍然是数字形式

```
{"01"=>4, "02"=>3..... 
```

我怎样才能操纵这个哈希来获得

```
{"January"=>4, "February"=>3..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:00:03.890

做一个新的哈希。如果不能，请在当前哈希中创建一个新密钥并删除原始密钥。您不能简单地更改键，因为`key`它是块中的局部变量，并且更改它绝不会影响哈希的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:05:07.273

这个 ？：

```
def number_to_month(number)
  (Time.now.beginning_of_year + number.months).strftime("%B")
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:20:02.703

有一些方法可以生成新的哈希，但我认为您可以在显示字符串之前将它们转换为视图中的月份名称。使用您已经在问题中的块内编写的代码，但将其放在您的视图中。

# php - 用javascript获取密码的hash，然后发送到服务器

> ID：11073145
> 
> 赞同：1
> 
> 时间：2012-06-17T16:57:24.670
> 
> 标签：php, mysql

登录用户的最佳方式是什么：

1）首先用javascript获取密码的哈希值，将其发送到服务器，然后将其与存储在数据库中的哈希值进行比较。

2) 将明文密码发送到服务器，获取哈希值，然后与存储在数据库中的哈希值进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:01:22.307

> 首先使用 javascript 获取密码的哈希值，将其发送到服务器，然后将其与存储在数据库中的哈希值进行比较。

**没有**。如果这样做，那么输入到服务器的密码与存储在数据库中的密码相同，并且不安全。

> 将密码以纯文本形式发送到服务器，获取哈希值，然后将其与存储在数据库中的哈希值进行比较。

否。使用 SSL，以便使用公钥加密发送密码。然后在服务器上对其进行散列（使用盐）并将其与数据库中的密码进行比较。

# wpf - 为什么 System.Windows.Automation.Peers.AutomationPeer.GetPattern() 方法不使用泛型？

> ID：11073151
> 
> 赞同：0
> 
> 时间：2012-06-17T16:58:32.927
> 
> 标签：wpf, generics, c#-4.0, .net-4.0, code-design

[GetPattern()](http://msdn.microsoft.com/en-us/library/system.windows.automation.peers.automationpeer.getpattern.aspx)方法的实现是`WPF UI Automation system`采用 enum 参数实现的`PatternInterface`，我们通常以如下方式使用它：

```
//Code with original implementation
ButtonAutomationPeer buttonPeer = new ButtonAutomationPeer(button1);
IInvokeProvider provider = (IInvokeProvider)buttonPeer.GetPattern(PatternInterface.Invoke); //Line in Question
//To invoke the click event of button we then use the following code:
provider.Invoke(); 
```

**从上面的代码来看，Question**中带有注释 Line 的行似乎不是强类型的，我们需要将`GetPattern()`方法的返回值强制转换为所需的接口，然后使用它来调用特定的 UI 自动化。

**问题是：** 如果使用.Net Framework 中已经存在的`GetPattern()`方法实现如下，会不会更好：`WPF``Generics`

```
public T GetPattern<T>; 
```

*   在哪里，然后我会在调用该方法时传递所需的接口模式名称，`GetPattern<T>`并获得该接口实例的强类型，并且***也不***需要***cast***。`GetPattern()`微软在方法的原始实现中给出了什么想法 `enum`？
*   在方法参数中使用枚举不会破坏`GetPattern()`原始实现的可维护性。我会说，当需要支持新的 Control 接口模式时，需要将该*模式接口的*枚举值添加到名为`PatternInterface`

我想调用方法并使用以下使用调用通用实现的新代码获取接口模式会更容易和更好：

```
//Code with New Generics based implementation
ButtonAutomationPeer buttonPeer = new ButtonAutomationPeer(button1);
IInvokeProvider provider = buttonPeer.GetPattern<IInvokeProvider>(); //Line in Question
//To invoke the click event of button we then use the following code:
provider.Invoke(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:47:02.463

这是出于通常的原因：他们没有时间机器。从参考源提供的源代码文件中的“历史”注释中可以看出，UI 自动化类的工作始于 2003 年 6 月左右，有证据表明它是从早期工作中派生的。仿制药直到 2005 年才出现。

从 dd/wpf/src/UIAutomation/UIAutomationTypes/System/Windows/AutomationPattern.cs：

```
// History:
//  06/02/2003 : BrendanM Ported to WCP 
```

这很可能是布伦丹·麦基恩。对“WCP”可能意味着什么没有像样的猜测。

# xslt - umbraco：获取 USER 属性，而不是 XSLT 中的成员属性

> ID：11073154
> 
> 赞同：0
> 
> 时间：2012-06-17T16:58:45.437
> 
> 标签：xslt, umbraco, umbraco-blog

这是我的场景：

1.  `Author Picker`在默认值（来自 blog4umbraco 包）中添加了一个，`umbBlogPost`它使我可以访问 XSLT 宏中的作者 ID
2.  `Author Picker`正在提取 umbraco**用户**而不是成员的列表
3.  我想在 xslt 输出中显示作者的用户名

我已经尝试了几种基于 Google 搜索的不同方法，这些搜索似乎都在使用 Membership API，例如`umbraco.libary:GetMember`，`umbraco.library:GetMemberName`这又不起作用，因为我正在与 umbraco 用户打交道，而不是会员。**似乎没有**任何用户等效的方法，即`umbraco.libary:GetUser`或`umbraco.library:GetUserName`.

有谁知道如何在 xslt 宏中获取用户属性？我使用的是 4.7.2 版。此外，虽然我目前正在使用 xslt，但如果这可以使用 Razor 宏（如果 4.7.2 支持？）我也愿意看到这种方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:28:09.273

直接查看 XSLT 运行的 XML ( `~/App_Data/umbraco.config`)，我发现了以下属性：

```
<Site 
     writerID="0" 
     creatorID="0" 
     writerName="John Smith"
     creatorName="John Smith" 
     /> 
```

因此，您应该能够通过以下方式引用 XSLT 中的那些：

```
<xsl:value-of select="$currentPage/@writerName" /> 
```

如果您需要用户的其他属性，您可能需要编写自己的库，然后可以通过 XSLT 文件访问该库。只需查看`umbraco.library`文件顶部的包含方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T11:50:51.813

Ucomponents 提供 XSLT 解决方案

```
<xsl:choose>
  <xsl:when test="$currentPage/bodyAuthor != ''">
    <xsl:value-of select="ucomponents.cms:GetUserName($currentPage/bodyAuthor)"/>
  </xsl:when>
  <xsl:otherwise>
    <xsl:value-of select="$currentPage/@writerName" />
  </xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T00:02:08.530

我最终通过编写 Razor 宏解决了这个问题。关键是`@using umbraco.BusinessLogic;`在宏的开头添加。这个命名空间提供了获取用户数据而不是成员数据所需的 API。

对于任何感兴趣的人，这是我写的宏：

```
@using umbraco.BusinessLogic;
@inherits umbraco.MacroEngines.DynamicNodeContext

<div>
  <h1>
    From Our Blog
  </h1>
  <ul>
  @foreach(var i in @Model.AncestorOrSelf("umbHomepage").Descendants("umbBlogPost").OrderBy("PostDate desc").Take(5))
  {
    <li>
      <p>
        <a href="@i.NiceUrl" title="@i.Name">@i.Name</a><br />
        by <a href="#">@umbraco.BusinessLogic.User.GetUser(Int32.Parse(i.blogAuthor)).Name</a> on @i.PostDate.ToString("MMM dd, yyyy")
      </p>
    </li>
  }
  </ul>
</div> 
```

# c++ - 在 C++ 中反序列化对象

> ID：11073157
> 
> 赞同：2
> 
> 时间：2012-06-17T16:59:12.580
> 
> 标签：c++, serialization, deserialization, ostringstream

我知道如何通过以下方式序列化对象：

```
void encodeMsg(char **msg, const ConnectionParams& params)
{
    std::ostringstream oss;
    if (!(oss << params))
    {
        //failure
    }
    msg = oss.str();
} 
```

如何将消息反序列化回对象？

意思是我想要这个方法：

```
ConnectionParams encodeMsg(char *msg)
    { ... } 
```

所以我没有 instringstream 对象......我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:15:50.073

就像是：

```
ConnectionParams decodeMsg(char *msg)
{
  ConnectionParams ret;
  std::istringstream iss(msg);
  iss >> ret;
  return ret;
} 
```

这是假设这个类是可序列化的`operator<<`，并提供对称相反的操作`operator>>`。在不知道其内部结构的情况下，无法序列化任意 C++ 对象，在此答案中，我假设这些操作已由类提供程序实现。

另外，请注意，您可能应该将 ConnectionParams 作为参考传递，例如：

```
void encodeMsg(char *msg, ConnectionParams& ret); 
```

此外，您的 encodeMsg 是错误的，有更好的机会作为：

```
void encodeMsg(char **msg, const ConnectionParams& params)
{
    ....
    *msg = oss.str();
} 
```

甚至这是错误的，因为 oss.str() 从 oss 返回一个内部指针，并且不能将其返回给调用者，因为函数返回时 oss 将被销毁，并且该指针将无效。你最好返回一个 std::string 或类似的东西。

编辑：如果该类不提供序列化和反序列化自身的方法怎么办？在足够简单的类上，不保存在堆上分配的指针，也不保存文件描述符，也不对构造函数和析构函数有奇特的行为，你可以用旧的 C 结构做同样的事情：解释它的所有字节作为缓冲区。请注意，这是危险的，类型不安全，并且缓冲区可能无法在不同的编译器/架构之间互操作。

```
// DISCLAIMER: Untested code!

class A {
  int plain_variable;
  char palin_array[50];
};
// Class A is ok to serialize this way

class B {
  A plain_object_array[10];
  double another_plain_variable;
};
// Class B is ok to serialize this way

class C {
  float plain_object;
  std::string fancy_string;
};
// Class C is *NOT* ok to serialize this way, because it contains an string,
// which, in turn, contains a heap allocated pointer

template<class T>
void serialize(const T& obj, std::string& buff)
{
  const char *accessor = (const char *)&obj;
  std::string tmp(accessor, sizeof(obj));
  std::swap(buff, tmp);
}

template<class T>
void deserialize(const std::string& buff, T& obj)
{
  char *accessor = (char *)&obj;
  std::copy(buff.begin(), buff.end(), accessor);
} 
```

看，这个方案的工作条件是，你不太可能将它与第三方提供的类一起使用。最后，您可能需要自己存储重建对象所需的所有数据，并处理这些数据。

# python - 在类内部/外部制作精灵

> ID：11073158
> 
> 赞同：1
> 
> 时间：2012-06-17T16:59:31.947
> 
> 标签：python, python-3.x, pygame

我的所有代码都可以自己运行。我需要开始将它全部链接到按钮。

问题：尝试将多个按钮设置为精灵以用于碰撞目的。不知道课外怎么做。

我有按钮在单独的类中工作，但不能让它们在同一个类中工作，原因很明显，第二个的 self.image 覆盖了第一个。

```
class Icons(pygame.sprite.Sprite):
def __init__(self, *args):
    pygame.sprite.Sprite.__init__(self, *args)

    self.image = pygame.image.load("images/airbrushIC.gif").convert()
    self.rect = self.image.get_rect()
    ic1 = self.image
    self.rect.x = 50
    self.rect.y = 490

    self.image = pygame.image.load("images/fillIC.gif").convert()
    self.rect = self.image.get_rect()
    ic2 = self.image
    self.rect.x = 10
    self.rect.y = 540

def update(self):
    pygame.mouse.get_pos()
    pygame.mouse.get_pressed() 
```

此代码不必是一个类。但是我不知道如何在不进入班级的情况下使图像成为精灵。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:29:20.747

而不是 Icons 你应该有一个通用的 Icon 类。然后，您可以为每个按钮创建一个 Icon 实例。

```
class Icon(pygame.sprite.Sprite):
    def __init__(self, image_name, pos, cb, cb_data, *args):
        pygame.sprite.Sprite.__init__(self, *args)

        self.image = pygame.image.load("images/" + image_name).convert()
        self.rect = self.image.get_rect()

        self.rect.x = pos[0]
        self.rect.y = pos[1]

        this.cb = cb              # function to call when button is pressed
        this.cb_data = cb_data    # data to pass to the function

    def pressed():
        this.cb(cb_data) 
```

然后在您的主要功能中创建按钮：

```
ic1 = Icon("airbrushIC.gif", (50, 490), button_pressed, "airbrushIC")
ic2 = Icon("fillIC.gif", (10, 540), button_pressed, "fillIC")
buttons = [ic1, ic2]

def button_pressed(data):
    print "Button pressed:" + str(data) 
```

最后，对于每个鼠标按下事件，您都会查找按钮碰撞：

```
for b in buttons:
    if b.rect.collidepoint(event.pos):
         b.pressed() 
```

# asp.net-mvc - javascript验证在mvc应用程序中不起作用

> ID：11073159
> 
> 赞同：0
> 
> 时间：2012-06-17T16:59:35.360
> 
> 标签：asp.net-mvc, jquery-validate, customvalidator

在我的 MVC4 应用程序中，我正在尝试为表单中的某些文本框创建客户端验证器。该表单包含在 Register.cshtml 视图中（当我使用 formsauthentication 项目创建新的 MVC4 时，VS2010 会自动创建此视图）。

表单已经在提交按钮上实现了验证，但我想要一个验证器，一旦焦点离开文本框就起作用 - 应该在文本框旁边显示一个内联错误，带有红色字体。如果验证正常，它应该再次显示消息“ok”。

问题： .js 验证器不起作用。萤火虫 说：

> $document 未定义。$document.ready(

我还尝试了 alert()，如果我将它放在 document.ready 函数之外，它就会弹出。在里面时，它不会弹出。registerForm.js 的代码：

```
$document.ready(
function () 
{
    $('#registration form').validate
    (
        {
            rules: 
            {
                UserName: { required: true }
            },
            success: function (label) 
            {
                label.Text('OK!').addClass('IsInputValid');
            }
        }
    )
}
); 
```

添加此 javascript 的包如下：

```
 bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/registerForm.js",
                    "~/Scripts/jquery.validate*")); 
```

最后，观点：

```
<div id="registration">
@using (Html.BeginForm()) {
@Html.ValidationSummary()

<fieldset>
    <legend>Registration Form</legend>
    <ol>
        <li>
            @Html.LabelFor(m => m.UserName)
            @Html.TextBoxFor(m => m.UserName)
        </li>
        <li>
            @Html.LabelFor(m => m.Email) 
            @Html.TextBoxFor(m => m.Email)
        </li>
        <li>
            @Html.LabelFor(m => m.Password)
            @Html.PasswordFor(m => m.Password)
        </li>
        <li>
            @Html.LabelFor(m => m.ConfirmPassword)
            @Html.PasswordFor(m => m.ConfirmPassword)
        </li>
    </ol>
    <input type="submit" value="Register" />
</fieldset>
 }
</div>

@section Scripts {
@Scripts.Render("~/bundles/jqueryval")
} 
```

什么可以阻止 js 工作？我已经花了大约 5 个小时试图弄清楚这一点。如果您有任何建议，请告诉我，

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:03:25.090

您应该对文档对象使用 jQuery 包装器：

```
$(document).ready(function () {
    // your function
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:03:35.227

有`$document`定义吗？jQuery 定义了一个`$`对象。您可以将该对象用作函数并将其传递给选择器，包括`document`，然后调用`.ready()`它：

```
$(document).ready(someFunction); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T17:03:54.123

```
 @Html.TextBoxFor(m => m.UserName, new { @class = "required" }) 
```

这里不需要 JS。`$document = $(document)`除非您在某处定义了 var ，否则其他人都在说 $document 不是正确的语法。

# networking - 监控程序数据传输

> ID：11073160
> 
> 赞同：0
> 
> 时间：2012-06-17T16:59:38.117
> 
> 标签：networking

有没有办法监控程序从互联网发送和接收的数据？例如，如果你有一个游戏，它从服务器获取一些信息，因为程序必须被告知这些信息，有没有办法记录和读取它？我读过一些类似的问题，但它们都集中在传输了多少数据上。我知道什么正在传输什么数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:22:24.720

```
extView infoView = (TextView)findViewById(R.id.traffic_info);
String info = "";

info += "Mobile Interface:\n";
info += ("\tReceived: " + TrafficStats.getMobileRxBytes() + " bytes / " + TrafficStats.getMobileRxPackets() + " packets\n");
info += ("\tTransmitted: " + TrafficStats.getMobileTxBytes() + " bytes / " + TrafficStats.getMobileTxPackets() + " packets\n");

info += "All Network Interface:\n";
info += ("\tReceived: " + TrafficStats.getTotalRxBytes() + " bytes / " + TrafficStats.getTotalRxPackets() + " packets\n");
info += ("\tTransmitted: " + TrafficStats.getTotalTxBytes() + " bytes / " + TrafficStats.getTotalTxPackets() + " packets\n");

infoView.setText(info); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:03:07.990

您正在寻找 Fiddler（用于 HTTP 流量）或 Wireshark（用于所有流量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:23:58.277

```
mStartRX = TrafficStats.getTotalRxBytes();

mStartTX = TrafficStats.getTotalTxBytes(); TextView RX = (TextView)findViewById(R.id.RX);

TextView TX = (TextView)findViewById(R.id.TX);

long rxBytes = TrafficStats.getTotalRxBytes()- mStartRX;

RX.setText(Long.toString(rxBytes));

long txBytes = TrafficStats.getTotalTxBytes()- mStartTX;

TX.setText(Long.toString(txBytes)); 
```

# java - 在 GWT 的标签上显示所需的指示符

> ID：11073162
> 
> 赞同：0
> 
> 时间：2012-06-17T16:59:47.190
> 
> 标签：java, gwt, label

在我的 GWT 应用程序中，我想根据需要指示字段。请告知我该怎么做？

如果我只是`*`在标签文本中添加一个，那么它不是很明显，因为它与标签文本的颜色相同，并且也与标签对齐，就像一个上标字符。

我不知道应用样式表是否可以使它工作？任何其他不涉及大量工作的 web 2.0 想法？

目前，它显示为

```
Label fullName = new Label("Full Name*"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:32:29.683

只需将 * 从标签中分离到另一个标签：

```
Label label = new Label("Full name");
TextBox tb = new TextBox();
Label reqLabel = new Label("*");
reqLabel.setStyleName("red_label"); 
```

然后在 war/app.css 上创建一个新项目

```
.red_label {
    color: red;
    font-size: 8pt;
    overflow: hidden;
} 
```

像这样的东西应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:10:12.930

最简单的方法是

```
String strReqLabel = "<span style=\"color: #DC143C;\">*</span>"

Label reqLabel = new Label(strReqLabel + " " + "First Name"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:56:19.177

或者，

在标签后面加上 * 标记 - 这样填写表格时非常谨慎的人会观察它并做必要的事情。不谨慎的朋友，在提交表格后，可以考虑用红色勾勒轮廓。这样，您不必使表格在最初看起来过于浮华。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T18:13:17.683

所以我这样做了：

```
public HorizontalPanel createLabel(String name){
  HorizontalPanel hPanel = new HorizontalPanel();
  hPanel.add(new Label(name));
  Label star = new Label("*");
  star.setStyleName("req-label");
  hPanel.add(star);
  return hPanel;
} 
```

和CSS为：

```
.req-label{
color: #FF0000;
font-weight: bold;
} 
```

# linux - 如何在 Linux 上制作 Flash 动画/电影？

> ID：11073175
> 
> 赞同：-1
> 
> 时间：2012-06-17T17:01:49.490
> 
> 标签：linux, actionscript-3, flash

这更像是一项任务工作。我正在尝试帮助一位朋友调试他的 Flash 动画。现在，当我在他的位置和他的 MacBook 上时，他正在使用 Adob​​e Flash 来创建他的动画，以及这些时间线、AS3 编辑器等。

现在，我想在家时帮助他，但我没有 Windows 或 Mac 电脑，也没有 Flash 许可证（他从他要去的学校得到了他的许可证）。

我知道[osflash.org](http://osflash.org)，但我可以像他在 Flash 中那样工作吗？我需要这些时间表，显然我需要编译和预览`.swf`文件。

我应该解释一下，我以前从未使用过 Flash，而且 IDE 对我来说很奇怪。我帮助他的唯一方法是提供通用编程技能（因为 AS3 只是另一种 OO 语言）。我正在考虑在 Windows VM 中安装破解的 Flash 版本，但这不是我想要的工作方式。

有没有更好的解决方案？

正如我所提到的，他正在 AS3 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:30:10.553

由于您对 Flash IDE 不太熟悉，因此您应该没有问题。由于 linux 和 flash 开发人员的唯一问题是缺乏像样的 IDE。

AS3 程序可以使用 flex SDK 编译。因此，您只需下载适用于您的 linux 发行版的 SDK。但是请注意，当您使用代码开发应用程序时，没有时间表。相反，您使用 Timer 事件。

Flash IDE 实际上以一种易于使用（简洁）的方式隐藏了 Timer 实现，以使任何人都可以快速创建应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:30:49.923

FLA 是 Fl​​ash CS 和早期文件的专有格式。不，您不能将它们与 Flex 编译器一起使用，因为后者是 OOS 软件。但是你可以告诉你的朋友不要使用它们。实际上，仅将它们用于生成图形资产而不是代码是很常见的。典型的工作流程是编译 SWC 或 SWF 以用作库并在另一个编辑器中编写代码。

无论如何，一些实际的事情：

正确开发 AS3，您可以使用 Intellij IDEA（有些人甚至喜欢它并在 Linux 以外的其他操作系统上使用，老实说，我不是它的忠实粉丝，但它与大多数行业标准的质量相同级IDE）

您的另一个选择（我正在使用）一些优秀的灵魂“移植”Linux 的 Flash Builder（Flash Builder 最初是由 Adob​​e 开发的 Eclipse 插件）。它在 Linux 上的故事被一堆无关紧要的决定所迷惑。曾经有一个试用版，但 Adob​​e 从未发布过适用于 Linux 的版本。试用期结束后，Adobe 同意继续试用试用版。后来，他们似乎完全放弃了该产品。我不确定它的当前状态，但你可以在这里找到它：[https ://code.google.com/p/fb4linux/](https://code.google.com/p/fb4linux/)

您的另一个选择，绝对合法，但有问题：FlashDevelop，它在虚拟化中运行得相当好，开发人员努力确保虚拟化版本运行良好。它还在 Wine 下运行（在某种程度上......）。我尝试了后者，但我很久以前尝试过，它远非完美，但它是可行的。这是 FD 论坛上的主题：http: [//flashdevelop.org/community/viewtopic.php?f= 9&t=7621](http://flashdevelop.org/community/viewtopic.php?f=9&t=7621)

FDT（来自 Powerflashers，一种基于 Eclipse 的商业 IDE）据说可以在 Linux 上运行——从未尝试过。

我还使用过：带有操作脚本模式的 Emacs - 它几乎不是语法荧光笔。在使用它时，我添加了一些函数来运行编译器和调试器，但是它们太糟糕了，无法认真分享它们:)。所以我不会。

更多的选择：

Haxe 是另一种编译为 SWF 的语言。鲜为人知，但更先进和更现代的语言。除了编译到 Flash 之外，还有很多其他的事情。我已经看到它在 MonoDevelop [http://haxe.org/com/ide/monodevelop](http://haxe.org/com/ide/monodevelop)中使用（我自己没用过）。同样，应该可以在 FDT 中使用它。

Emacs 的 Haxe 模式（我目前正在尝试改进它，但还没有实现），希望在几个月后它会实现。这是我现在得到的：[https ://code.google.com/p/haxe-mode/](https://code.google.com/p/haxe-mode/)

图形：

在为 Flash 编辑矢量图形方面，您似乎不太可能找到与 Flash CS 匹配的编辑器，但 MXMLC（Flex 编译器）可以很好地编译 SVG。因此，您可以使用 Inkscape 生成一些非动画图形......但是 YMMV

# ios5 - 使用 ARC 时释放 UIImagePickerController

> ID：11073176
> 
> 赞同：1
> 
> 时间：2012-06-17T17:01:53.373
> 
> 标签：ios5, automatic-ref-counting, presentmodalviewcontroller, zbar-sdk

我遇到了问题，而我失去了 ZBarReaderViewController 的自动对焦，就像[在这里](https://stackoverflow.com/questions/8658383/iphone-camera-loses-auto-focus-when-using-zbarsdk)询问和回答的那样。显而易见的解决方案是在使用后释放 UIImagePickerController。但是，我正在使用 ARC，无法弄清楚如何释放它。我努力了...

```
-(void)viewWillDisappear:(BOOL)animated{

    self.imagePicker=nil;

    [super viewWillDisappear:animated];
} 
```

但是这似乎不起作用。imagePicker 是 UIImagePickerController 的一个实例。

我会提到，这可能是一个更大问题的征兆。我正在从选定的表格视图单元格推送到导航控制器上的自定义选项卡栏呈现模式视图。

导航控制器>表格视图>单元格上的辅助按钮>推送自定义标签栏控制器。

为了在底部标签栏和顶部导航栏上显示模态视图，我从导航控制器进行演示，例如...

```
 BIDAppDelegate *appDelegate=(BIDAppDelegate *)[[UIApplication sharedApplication]delegate];
    [appDelegate.navController presentModalViewController:imagePicker animated:YES]; 
```

我认为当我收到内存警告时这会导致问题，但我打算先尝试解决 ZBar 自动对焦问题，看看是否能解决任何其他问题。

提前感谢您的任何帮助。

# ruby - 搜索标签时为 nil 类

> ID：11073179
> 
> 赞同：0
> 
> 时间：2012-06-17T17:02:38.953
> 
> 标签：ruby, ruby-on-rails-3, mongoid

我有以下行的方法

```
@noticias = Noticia.where(:tags.all => array).paginate(:page => params[:page]) 
```

碰巧`brakeman`说它有可能的sql注入。我尝试了以下方法：

```
 array = params[:query].split(' ')
    array.each_with_index  do |query, index|
      array[index] = array[index].gsub(/<\/?[^>]*>/, "").downcase
    end

    array.each do |tag|
      @noticias << Noticia.where(:tags => tag)
    end 
```

但我得到了类似 `undefined << for nil:NilClass
我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:11:45.447

如果您使用的是 Mongodb，则可以确保您的代码没有 SQL 注入。

> 尽管 MongoDB 不易受到 SQL 注入之类的攻击，但可能值得检查搜索字符串是否有任何恶意。 [mongodb教程](http://api.mongodb.org/ruby/current/file.TUTORIAL.html)

# asp.net - 将数据绑定到 Gridview 标题模板？在 Asp.net 中

> ID：11073181
> 
> 赞同：1
> 
> 时间：2012-06-17T17:02:48.973
> 
> 标签：asp.net

在 Web 应用程序中，我正在尝试绑定 gridivew 的标题模板，但我无法将数据绑定到 gridview 标题。

```
 <asp:GridView ID ="grdInner" runat ="server" AutoGenerateColumns ="false" >
       <Columns >
          <asp:TemplateField >
             <HeaderTemplate >
          <asp:Label ID="lblHeader" runat="server" Text='<%# Eval("title") %>'></asp:Label>     
              </HeaderTemplate>
              <ItemTemplate >
                 <asp:Label ID ="lblDesc" runat ="server" Text ='<%# Eval("description") %>'></asp:Label>
              </ItemTemplate>
          </asp:TemplateField> 
       </Columns>
     </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-29T11:36:57.843

以下代码实现了相同的目标

```
<asp:GridView runat="server" ID="gridView" onrowdatabound="gridView_OnRowDataBound" AutoGenerateColumns="false">
<columns>
    <asp:TemplateField>
        <HeaderTemplate><asp:Label runat="server" ID="lblHeader"></asp:Label></HeaderTemplate>
    </asp:TemplateField>
</columns>
</asp:GridView> 
```

您可以在 OnRowDataBound 事件中设置标签文本

```
 protected void gridView_OnRowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.Header)
            ((Label)e.Row.FindControl("lblHeader") as Label).Text = "Your Data here";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-03T14:51:33.973

如果您想将 DataTable 列标题绑定到 Gridview 标题，另一种相当简单的方法（例如，您正在生成列名可以不同的 DataTable，并且您希望这些动态名称是 GridView 标题列名）。

```
DataTable dt = // Call your DataTable here.

    // Get your column names here.
    string nutrient = dt.Columns[2].ColumnName;
    string nutrient1 = dt.Columns[3].ColumnName;
    string nutrient2 = dt.Columns[4].ColumnName;
    string nutrient3 = dt.Columns[5].ColumnName;
    string nutrient4 = dt.Columns[6].ColumnName;
    string nutrient5 = dt.Columns[7].ColumnName;

    GridView1.DataSource = dt;
    GridView1.DataBind();

    if (GridView1.Rows.Count > 0)
    {
        GridView1.HeaderRow.Cells[2].Text = nutrient;
        GridView1.HeaderRow.Cells[3].Text = nutrient1; 
        GridView1.HeaderRow.Cells[4].Text = nutrient2;
        GridView1.HeaderRow.Cells[5].Text = nutrient3;
        GridView1.HeaderRow.Cells[6].Text = nutrient4;
        GridView1.HeaderRow.Cells[7].Text = nutrient5;            
    } 
```

您也可以使用 GridView1.FooterRow.Cells[x].Text = ... 对页脚行执行相同的操作

# jquery - 使用 formset / {{managment_form}} 变量时，提交的 Django 表单没有 POST 数据

> ID：11073187
> 
> 赞同：1
> 
> 时间：2012-06-17T17:03:32.330
> 
> 标签：jquery, python, django, forms, django-forms

我正在创建一个 Web 应用程序以使用 jQuery 动态添加表单并使用 django 后端处理它们。[我已经按照https://docs.djangoproject.com/en/dev/topics/forms/formsets/](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)上的文档在 django 中使用了表单集，并尝试按照[http://stellarchariot.com/blog/2011上的示例进行操作/02/dynamically-add-form-to-formset-using-javascript-and-django/](http://stellarchariot.com/blog/2011/02/dynamically-add-form-to-formset-using-javascript-and-django/)并在 stackoverflow 中[使用 Ajax 将表单动态添加到 Django 表单](https://stackoverflow.com/questions/501719/dynamically-adding-a-form-to-a-django-formset-with-ajax)集。

我遇到的问题是，当我提交表单时，我没有得到任何 POST 数据。当我删除变量 {{ formset.management_form}} 时，我将数据发送到 POST 但收到错误 [u'ManagementForm 数据丢失或已被篡改']。如果我将管理表单放入模板中（我应该这样做），我不会得到任何 POST 数据。有谁知道这个的解决方案？

```
forms.py
from django import forms
from busker.models import *
from django.forms import ModelForm

class UploadFileForm(ModelForm):
   class Meta:
      model = UploadFile

class Category(models.Model):
    category = models.CharField(max_length = 50)

    def __unicode__(self):
        return self.name 
```

模型.py

```
from django.db import models

class UploadFile(models.Model):
    title = models.CharField(max_length = 50)
    file  = models.FileField(upload_to = 'test')

    def __unicode__(self):
        return self.name

class CategoryForm(ModelForm):
   class Meta:
      model = Category 
```

视图.py

```
def submit(request,action=''):

    if request.user.is_authenticated():
        class RequiredFormSet(BaseFormSet):
            def __init__(self, *args, **kwargs):
                super(RequiredFormSet, self).__init__(*args, **kwargs)
                for form in self.forms:
                    form.empty_permitted = False
        UploadFileFormSet = formset_factory(UploadFileForm,extra=2, max_num=10, formset=RequiredFormSet)

        if request.method == 'POST':    
            uploadfile_formset = UploadFileFormSet(request.POST, request.FILES,prefix='songs')
            category_form= CategoryForm(request.POST,prefix = 'category')

            if uploadfile_formset.is_valid and category_form.is_valid:
                return HttpResponseRedirect('/') #going to the home root
            else:
                return HttpResponseRedirect('/contact') #testing to see if it fails
        else:
            uploadfile_formset = UploadFileFormSet(prefix = 'songs')
            category_form= CategoryForm(prefix = 'category') 

            t = loader.get_template('submit.html')
            c = RequestContext(request, {
                 'uploadfile_formset': uploadfile_formset,
                 'category_form': category_form,
                'head_title':  u'Submit Song',
                'page_title': 'Submit Song',
                })

            return HttpResponse(t.render(c)) 
```

模板 (submit.html)

```
<form id="songform" name="songform" enctype="multipart/form-data" action="" method="POST">{% csrf_token %}
     {{uploadfile_formset.management_form}}
     <div id="songforminputs">
    {{category_form.as_p}}
     {% for formset in uploadfile_formset %}
         <div id="dynamicInput">
         <p class = "songSubmitForm" > Song {{forloop.counter}} </p>   
         {% for field in formset %}
             <label class="submitForm" for="title">{{ field.label }}</label>
             {{field|add_class:"submitForm" }}
              </br>
         {% endfor %}
         </div>
       {% endfor %}

       </div>

   <input type="button" value="Add another text input" onClick="addInput('dynamicInput');">
   <input type="button" value="Remove a text input" onClick="removeInput('dynamicInput');">
   <input type="submit" name="submitbutton" id="submitbutton" value="" >

</form> 
```

jQuery / javascript 部分

```
<script type="text/javascript">
var counter = 2;
var minimum = 2;
var limit = 5;

function addInput(divName){
     if (counter == limit)  {
          alert("You have reached the limit of adding " + counter + " inputs");
     }
     else {

          var newdiv = document.createElement('div');
          newdiv.id = "dynamicInput";
          newdiv.innerHTML = "<p class = 'songSubmitForm' > Song " + (counter+1) +"</p>"  + "<label for='title' class='submitForm' >Title</label>" + "<input id ='id_form-" + (counter)+ "-title'type='text' class='contact' name='form-" + counter +"-title'>" + "</br>" + "<label for='file' class='submitForm' >File</label>" + " <input id='id_form-"+counter+"-file' type='file' class='contact' name='form-"+counter+"-file'>" + "</br>" + "</br>";
          document.getElementById('songforminputs').appendChild(newdiv);
          counter++;
     }
}

function removeInput(divName){
     if (counter == minimum)  {
          alert("You need at least " + counter + " inputs");
     }
     else {
         $('div#dynamicInput:last-child').remove()
          counter--;
     }
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-27T20:55:17.690

我不认为您说您使用的是 django-crispy-forms，但是，我会在此处为遇到此错误的任何人发布此信息，谁知道，也许它也会对您有所帮助。

我最近在尝试使用多个脆的内联表单集时遇到了一个非常相似的问题。我`{{ formset.management_form }}`在使用之前添加了`{% cirspy formset.form formset.form.helper %}`.

*掌心*

当我包含管理表格时，表格中的任何数据都不会在邮寄时可用。当我不包括管理表格时，django 抱怨`[u'ManagementForm data is missing or has been tampered with']`.

要解决这个问题，只需按照它的设计方式使用脆皮形式：`{% crispy formset formset.form.helper %}`. 这样就不需要在它自己的标签中包含管理表单，这似乎让 Django 感到困惑。

# jquery - 如何避免误点击激活不必要的功能 mouseup

> ID：11073191
> 
> 赞同：0
> 
> 时间：2012-06-17T17:03:48.157
> 
> 标签：jquery

我可以找到什么解决方案来防止不必要的点击激活功能 mouseup。这里[jsfiddle](http://jsfiddle.net/centerwow/c6ABa/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:14:06.747

尝试`stopPropagation()`：

> 防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

```
$('tr').click(function(e) {
    $('#span1').hide();
    $('#input1').show();
    e.stopPropagation()
}); 
```

[http://jsfiddle.net/c6ABa/7/](http://jsfiddle.net/c6ABa/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:22:40.667

```
$('tr').click(function() {
    if($('#input1').hasClass('active')){
        return false;
    }
     $('#span1').hide();

        $('#input1').show().addClass('active');

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T17:07:47.663

在第一次 mouseup 时向元素添加一个类。然后使用 if hasClass('...') 进行检查。如果该类存在，则返回 false

# c# - 自定义 C# 对象的浅拷贝

> ID：11073196
> 
> 赞同：0
> 
> 时间：2012-06-17T17:04:55.103
> 
> 标签：c#, shallow-copy

我正在处理一些用 C# 编写的代码。在这个应用程序中，我有一个自定义集合，定义如下：

```
public class ResultList<T> : IEnumerable<T>
{
  public List<T> Results { get; set; }
  public decimal CenterLatitude { get; set; }
  public decimal CenterLongitude { get; set; }
} 
```

在我查询我的数据库并填充一个 ResultList 后，我​​将它存储在内存缓存中。这样我就不需要每次都访问我的数据库。这种方法第一次奏效。但是，在后续加载时，它不起作用，因为从缓存中提取的 ResultList 已更新。我怀疑是因为正在发生深层复制。

如何获得 ResultList 的浅表副本？

# android - ScrollView 内的 TabHost 将焦点设置为内容并滚动

> ID：11073199
> 
> 赞同：2
> 
> 时间：2012-06-17T17:05:51.033
> 
> 标签：android, listview, scrollview, android-tabhost

我有一个片段，其中包含大量信息（文章），底部有一个 tabhost，其他文章作为几个 listViews。问题是当我选择标签时，我的 scrollView 滚动以包含列表视图（实际上只是滚动所有内容，因此列表视图的第一项是屏幕上的第一件事），这是我不想要的。

我需要在 ScrollView 中使用 listViews，因为有很多信息要显示 + 其他相关文章等，而且布局比屏幕长得多。我解决了滚动视图中列表视图的问题，只是不知道如何禁用设置焦点在标签点击上。

这是我的布局：

```
<ScrollView
    android:id="@+id/category_scroll"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="130dp"
            android:src="@drawable/currency_flag_eur" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_weight="0.24"
                android:src="@drawable/currency_flag_eur" />

            <ImageView
                android:id="@+id/imageView3"
                android:layout_width="wrap_content"
                android:layout_height="90dp"
                android:layout_weight="0.29"
                android:src="@drawable/currency_flag_eur" />
        </LinearLayout>

        <include layout="@layout/ticker" />

        <TabHost
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@android:id/tabhost"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:padding="10dp" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" />

                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="0" >

                    <ListView
                        android:id="@+id/category_top_news"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content">
                    </ListView>

                    <ListView
                        android:id="@+id/category_most_read"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content">
                    </ListView>

                    <ListView
                        android:id="@+id/category_facebook"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" >
                    </ListView>
                </FrameLayout>
            </LinearLayout>
        </TabHost>
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:33:08.933

如果有人在徘徊，我解决了我的问题，所以我将我的列表视图设置为

```
setFocusable(false) 
```

他们停止抽搐。

# glassfish - Dozer DozerBeanMapper 实例化启动 EJB 应用服务器 Glassfish

> ID：11073204
> 
> 赞同：1
> 
> 时间：2012-06-17T17:06:53.057
> 
> 标签：glassfish, ejb-3.0, startup, dozer

Dozer 的文档指出，您应该只在服务器上的应用程序中运行一个 DozerBeanMapper 实例。对于最初的开发，我忽略了这一点，现在我想更新应用程序来做到这一点。

当应用程序在 glassfish 上启动时，如何实例化 DozerBeanMapper 类，以及一旦应用程序启动或新部署后，我将如何在另一个类中访问其“map”方法？

## 这是针对 EJB 的，所以我不能使用任何 servlet 来执行此操作。

好的，所以我终于有时间重构这段代码了。使用来自@Mikko Maunu 的指针，我正在编辑我的问题，以便为将来可能会发现它有用的任何人提供我为我工作的代码。

```
package com.xyz.utilities.singleton;

import javax.annotation.PostConstruct;
import javax.ejb.Singleton;
import javax.ejb.Startup;
import org.dozer.DozerBeanMapper;

@Startup
@Singleton
public class DozerInstantiator {

  private DozerBeanMapper mapper = null;

  @PostConstruct
  void init() {
    mapper = new DozerBeanMapper();
  }

  public DozerBeanMapper getMapper() {
    return mapper;
  }

} 
```

这是一个简单的用例：

将 EJB 成员变量注入您的客户端类：

```
 @EJB
  DozerInstantiator di; 
```

在客户端类的某个方法中，您可以像这样调用推土机映射器：

```
Credentials credentials = di.getMapper().map(credentialsDTO, Credentials.class);
// or
Credentials credentials = new Credentials();
di.getMapper().map(credentialsDTO, credentials); 
```

如果这是错误的或不正确的，请有人发表评论。在那之前，这似乎可行，所以我将使用我根据 Mikko 的意见开发的这个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:17:01.033

如果您使用的是 GlassFish 3.x，那么您可以使用 EJB 3.1 Singleton Session Bean：

```
@Startup //initialization in application startup
@Singleton //only one instance 
public class DozerInitializer {
    private String status;

    @PostConstruct //executed once and only once when sole instance is created
    void init {
        //do steps needed to instantiate DozerBeanMapper
        //here
    }
} 
```

# python - 通过 Windows 任务计划程序计划 Python 脚本

> ID：11073205
> 
> 赞同：2
> 
> 时间：2012-06-17T17:07:11.283
> 
> 标签：python, windows-task-scheduler

观察以下 Python 脚本“Script.py”：

```
import subprocess
src_directory = 'Z:\z_7z\Some_Directory'
zip_file_name = 'Test.7z'
cmd = ['7z', 'a', zip_file_name, src_directory, '-mx9']
subprocess.Popen(cmd, stderr = subprocess.STDOUT, stdout = subprocess.PIPE) 
```

我的意图是使用 Windows 任务计划程序来安排 Python 脚本。我之前已经使用其他 Python 脚本成功地完成了这项工作。但是，我无法通过调度执行上面显示的脚本。我不确定这是 Windows 任务计划程序问题还是 Python 问题，但这是我所知道的：

如上所示，“Script.py”是一个用于在“Some_Directory”目录上运行 7zip 压缩的脚本。脚本本身和它正在调用的 7z.exe 应用程序都存储在“Y:\z_7z”目录中。

该脚本在手动执行时似乎工作正常。我可以双击脚本，它会正确执行。另外，我可以通过以下命令从命令行执行脚本：

```
Y:\z_7z\Script.py 
```

但是，我无法通过导航到“C:\Python27”目录并尝试以下操作来手动执行脚本：

```
python Y:\z_7z\Script.py 
```

这会产生以下错误：

```
Line 5 in module subprocess.Popen(cmd, stderr = subprocess.STDOUT, ...)
WindowsError: [Error 2] The system cannot find the file specified 
```

提供所有这些信息，我遇到的真正问题是 Windows 任务计划程序无法执行此脚本（上次运行结果 = 0x1）。我尝试了各种 Windows 任务计划程序配置，包括一个看起来很理想的配置，如下所示：

*   程序/脚本：“C:\Python27\python.exe”
*   添加参数（可选）：“Y:\z_7z\Script.py”
*   运行用户是否登录

同样，我已经安排了其他已成功运行的 Python 脚本。此 Windows 任务计划程序任务似乎配置正确。我浏览了一些更高级的设置，并没有发现这个特定任务有任何可疑之处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:14:51.147

1.  不要只是启动`7z`. 提供可执行文件的完整路径。

    cmd = [r'C:\Program Files\7zip\7z.exe', 'a', zip_file_name, src_directory, '-mx9'] 考虑到这`C:\Program Files\7zip\7z.exe`是可执行路径，它会起作用。

2.  尝试不要`python`以脚本作为参数运行该进程。运行 python 脚本本身。

3.  你`zip_file_name`是相对的。我不确定参数是文件名。它可能是一条路径。在这种情况下，可以在 .7z 文件上创建 .7z 文件`C:\Windows\System32`。要修复它，请设置`zip_file_name`为完整路径。

# drupal-7 - 钩子和主题函数drupal一样吗？是什么触发了什么？

> ID：11073207
> 
> 赞同：0
> 
> 时间：2012-06-17T17:07:55.910
> 
> 标签：drupal-7, theming

我非常了解 Drupal API 挂钩，因此无需对此进行解释。我对主题挂钩和主题功能很感兴趣。

希望你能得到全貌是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:02:47.847

我读到的主题函数越来越多，几乎都是由 Drupal 通过钩子实现触发的函数。主题函数具有以下命名约定：

mytheme_theme 钩子名称；不应直接调用主题函数，而必须由 theme() 调用具有两个参数“hookname”和 $vars 字符串或数组的特定函数。

如果你有一个预处理函数 - 让我们称之为 mytheme_preprocess_theme 钩子名称

它将在 mytheme_theme 钩子名称之前调用 - 在幕后，所有预处理函数都在主题函数之前调用。

如果由开发人员@ Drupal 的支持论坛验证。

# php - 上传时生成的缩略图全黑

> ID：11073208
> 
> 赞同：1
> 
> 时间：2012-06-17T17:08:00.270
> 
> 标签：php, image, upload, thumbnails

我在上传原始 jpeg 文件时生成缩略图。我实际上可以创建这些缩略图文件并将其移动到另一个目录，但问题是这些缩略图文件在上传时仅显示黑色。

我的代码。

```
if(isset($_POST['upload'])){
    $img = $_FILES['origin']['name'];
    move_uploaded_file($_FILES['origin']['tmp_name'], 'image/'.$img);

    define("SOURCE", 'image/');
    define("DEST", 'thumb/');
    define("MAXW", 120);
    define("MAXH", 90);

    $jpg = SOURCE.$img;

    if($jpg){
        list($width, $height, $type) = getimagesize($jpg); //$type will return the type of the image

        if(MAXW >= $width && MAXH >= $height){
            $ratio = 1;
        }elseif($width > $height){
            $ratio = MAXW / $width;
        }else{
            $ratio = MAXH / $height;
        }

        $thumb_width = round($width * $ratio); //get the smaller value from cal # floor()
        $thumb_height = round($height * $ratio);

        $thumb = imagecreatetruecolor($thumb_width, $thumb_height);

        $path = DEST.$img."_thumb.jpg";
        imagejpeg($thumb, $path);

        echo "<img src='".$path."' alt='".$path."' />";
    }
    imagedestroy($thumb);
} 
```

缩略图文件如下所示：

![在此处输入图像描述](../Images/5c11b4e127c011b4fa418a1effc94e89.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:30:51.053

来自php手册：

`imagecreatetruecolor() returns an image identifier representing a black image of the specified size.`

所以问题是你实际上创建了这个黑色图像并保存它。

`$thumb = imagecreatetruecolor($thumb_width, $thumb_height);`

有关调整大小的解决方案，请参阅[stackoverflow 上的这个问题](https://stackoverflow.com/questions/12661/efficient-jpeg-image-resizing-in-php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T17:46:25.117

嗯，我现在才发现我的错误。问题是我使用`$jpg = SOURCE.$img;`而不是，`$jpg = imagecreatefromjpeg($jpg);`而且我需要使用将示例图像复制到新的缩略图图像

```
imagecopyresampled( $thumb, $jpg, 0, 0, 0, 0, $thumb_width, $thumb_height, $width, $height ); 
```

然后就可以了！！！

感谢亚历克斯的回答，让我找到了这个解决方案。

# c# - 将 XAML 更改为 c# 代码

> ID：11073210
> 
> 赞同：2
> 
> 时间：2012-06-17T17:08:30.970
> 
> 标签：c#, wpf, xaml, code-behind

我正在尝试将按钮的数据模板从 WPF XAML 更改为 c# 代码 IE 我想在 .cs 文件中以编程方式创建按钮。

XAML 如下所示：

```
<ItemsControl DataContext="{Binding Source={StaticResource Things}}" ItemsSource="{Binding}" Name="buttons" Margin="0">

    <ItemsControl.ItemsPanel>
      <ItemsPanelTemplate>
        <local:FishEyePanel ScaleToFit="false"/>
      </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <ItemsControl.ItemContainerStyle>
      <Style TargetType="{x:Type ContentPresenter}">
        <Setter Property="ContentTemplate">
          <Setter.Value>
            <DataTemplate>
                <Button Command="Open" Tag="{Binding XPath=@Tag, Path=Value}" Margin="5" Padding="5" HorizontalContentAlignment="Center" Width="{Binding XPath=@Width}" Height="{Binding XPath=@Height}"/>
            </DataTemplate>
          </Setter.Value>
        </Setter>
      </Style>
    </ItemsControl.ItemContainerStyle>

</ItemsControl> 
```

该行：

```
<Button Command="Open" Tag="{Binding XPath=@Tag, Path=Value}" Margin="5" Padding="5" HorizontalContentAlignment="Center" Width="{Binding XPath=@Width}" Height="{Binding XPath=@Height}"/> 
```

是我将所有按钮绑定到 xml 文件的地方，这是文件：

```
<XmlDataProvider x:Key="Things" XPath="Things/Thing">
   <x:XData>
      <Things xmlns="">
         <Thing Button="uno1" Tag="abc"  Width="200" Height="200"/>
      </Things>
   </x:XData>
</XmlDataProvider> 
```

但我想要的不是调用所有预定义底部的 xml 文件，而是使用按钮调用 cs 中的方法，如下所示：

```
public void createButtons()
{
    Button button = new Button();
    button.Tag = "I am from cs";
    buttons.Items.Add(button);
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:43:32.260

您不需要 C# 本身就拥有动态按钮。

我有一个具有动态按钮的生产应用程序（您可以添加更多不同的按钮等，所有这些都在代码中，它们只显示在 WPF UI 中）

您只需要创建一个 ButtonViewModel 对象，然后将 ButtonViewModel 列表放入您的代码中。

```
using System;
using System.Windows.Input;
using Setup.Common;

namespace ExampleOfButtonList
{
    public class ButtonViewModel : ViewModelBase
    {
        #region Member fields
        protected bool _IsVisible;
        protected bool _IsEnabled;
        protected RelayCommand _ButtonCommand;
        protected String _Text;
        #endregion

        #region Constructors
        /// <summary>
        /// The default constructor
        /// </summary>
        public ButtonViewModel()
        {
        }
        #endregion

        #region Properties
        public virtual ICommand ButtonCommand
        {
            get { return _ButtonCommand; }
            set
            {
                _ButtonCommand = value as RelayCommand;
                NotifyPropertyChanged("ButtonCommand");
            }
        }

        public bool IsVisible
        {
            get { return _IsVisible; }
            set
            {
                _IsVisible = value;
                NotifyPropertyChanged("IsVisible");
            }
        }

        public String Text
        {
            get { return _Text; }
            set
            {
                _Text = value;
                NotifyPropertyChanged("Text");
            }
        }
        #endregion
    }
} 
```

在您的代码中创建这样的列表：

```
List<ButtonViewModel> buttonList = new List<ButtonViewModel>();
ButtonViewModel bvm1 = new ButtonViewModel();
bvm.ButtonCommand = new RelayCommand(f => SomeMethod());
buttonList.add(bvm1); 
```

注意：您可以从任何 MVVM 框架或此处获取 RelayCommand：[MVVM Base.zip](http://www.rhyous.com/2011/02/04/a-hello-world-template-of-a-wpf-application-using-mvvm/)

然后使用 ItemsControl 并将其 ItemsSource 绑定到您的 buttonList，它将正确显示列表。

# ruby-on-rails - Rails 有没有像 polymorphic_url 这样尊重范围的东西？

> ID：11073214
> 
> 赞同：2
> 
> 时间：2012-06-17T17:09:20.410
> 
> 标签：ruby-on-rails, ruby

我还没有找到不涉及非常hacky的解决方案。

问题：我们的 rails 应用程序使用命名空间来覆盖父控制器和模型的行为（使用 STI）。在博客命名法中，它有点像这样：

```
blog
  posts

admin
  blog <- blog
    posts <- blog::posts
    orders <- blog::posts
namespace2
  blog <- blog
    posts <- blog::posts
    comments <- blog::posts
    awesome_comments <- blog::posts 
```

这是一个更简单的示例，但是每个命名空间都覆盖了验证、行为以及它的子对象是什么 STI 对象。父级使用反射为用户提供与其拥有的子级对应的按钮。这需要使用 polymorphic_url，但是 rails 有一种非常有趣的方式来处理共享命名空间的嵌套资源

它喜欢这样：namespace/blog/:id/namespace/posts，我想它可以工作......如果你想要一个巨大的 url。

我试过了

```
scope :module => :namespace, :name_prefix => :namespace do
  resources :blog do
    resources :post
    resources :comment
  end
end 
```

但是...... polymorphic_path 似乎没有得到这个......它想要：

```
namespace :namespace
  resources :blog do
    namespace :namespace
      resources :comment
      resources :post
    end
  end
end 
```

这不仅不是 DRY，而且似乎我做错了什么。

是否有类似 polymorphic_url 的东西尊重范围？

# php - 如何删除在 2 搜索结果页面上显示的产品类别？

> ID：11073216
> 
> 赞同：1
> 
> 时间：2012-06-17T17:09:21.767
> 
> 标签：php, search, joomla, categories, virtuemart

我正在使用默认的 Virtuemart 产品搜索模块。如果我搜索某些东西，我会被重定向到一个结果页面，底部是我的实际产品结果，顶部是产品类别……我不明白为什么会这样，显示的类别毫无用处。所以，实际上，我想从我的结果页面中隐藏产品类别。我怎样才能做到这一点？我找不到结果页面的视图来更改它。

我到处搜索，但我似乎找不到它。

我正在使用 Joomla 2.5.4 和 Virtuemart 2.0.6。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:17:39.593

我还发现通过我的菜单点击我的类别也是如此，所以我将它添加到我的类别视图覆盖中（到目前为止似乎工作正常）：

```
if(!empty($this->category->children ) && !(boolean)JRequest::getVar('search', false) && empty($this->products)){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:39:35.500

好的，我刚刚想通了。

在 components/com_virtuemart/views/category/tmpl/default.php

替换第 72 行

```
if(!empty($this->category->children)){ 
```

和

```
if(!empty($this->category->children ) && !(boolean)JRequest::getVar('search', false)){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-28T05:44:18.377

通过简单地取消勾选配置/模板下 Virtuemart 管理面板中的“显示子类别”选项，我设法删除了此产品类别以从每个页面（制造商、搜索等）的顶部显示。我正在使用 Joomla 2.5 和 measuremart 2.0.24。

# database - 将用户的余额存储在 Web 应用程序中 - 单个字段还是即时生成？

> ID：11073218
> 
> 赞同：0
> 
> 时间：2012-06-17T17:09:29.987
> 
> 标签：database, django, web-applications

我正在构建一个 Web 应用程序（在 Django 中，虽然这不是 Django 特定的问题）。我将有许多用户，他们每个人都有一个帐户余额，每次他们向我存钱时都会增加（通过 PayPal），每次他们使用我的应用程序的 API 时都会减少。

我正在尝试决定哪种方法更合适：

1.  将余额与用户一起存储为单个整数字段。当钱进来时，这个字段被添加到。当它出去时，它被减去。简单，但容易出错。
2.  即时生成余额（可能带有缓存）将用户支付的所有付款和费用相加。触摸更复杂，更慢，但更不容易出错。

那么，这是最好的还是有另一种方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:24:16.377

我的观点是，第一个选项比第二个选项更不容易出错。当您开始依赖缓存来获得非常重要的价值时，您必须处理缓存同步。显然，每次用户余额发生变化时，您都需要使缓存无效并确保任何读取请求都是 100% 准确的。如果你确实走缓存路线，你只需要确保额外的层很好地协调。

我建议您同时存储交易历史记录和余额总计。进行交易的行为需要是原子的，以便在其他任何东西可以读取之前执行交易历史记录和余额总计的更新。然后，您始终可以选择将余额与历史记录相协调，或者直接从历史记录中读取和添加。

# php - Jquery UI 自动完成链接到项目

> ID：11073221
> 
> 赞同：1
> 
> 时间：2012-06-17T17:09:52.263
> 
> 标签：php, javascript, jquery, jquery-ui, jquery-ui-autocomplete

我想做一个搜索框，您可以在其中搜索数据库中的记录。

search.php 看起来像这样：

```
<?php
// connect to mysql
require_once('includes/connect.php');
// include config
include('includes/config.php');

$nameser = $_GET['term'];

$names = array();
$result = mysql_query("SELECT name,customerid FROM customers WHERE name LIKE '%".$nameser."%' ORDER BY name ASC");
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $row_array['id'] = $row['customerid'];
    $row_array['value'] = htmlentities($row['name']);

    array_push($names,$row_array);
   }

echo json_encode($names);

?> 
```

Javascript 部分如下所示：

```
 $("#tags").autocomplete({
        source: "search.php",
        minLength: 2,
        select: function(event, ui) {
          window.location = ("customers.php?action=view&cid=" + item.id)
          //$('#tags').val(ui.item.id);
          //return false;
        }
    })
    .data("autocomplete")._renderItem = function( ul, item ) {
    return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<a href='customers.php?action=view&cid="+ item.id + "'>"+ item.label + "</a>" )
        .appendTo( ul );
    }; 
```

但是，这给出了错误：

```
ReferenceError: item is not defined 
```

我想要发生的是，当我单击结果列表中的某些内容时，我会被重定向到 url

```
customers.php?action=view&cid={CustomerID} 
```

有人有想法吗？

# **编辑：**

正确有效的 Javascript 代码：

```
$("#tags").autocomplete({
    source: "search.php",
    minLength: 2,
    select: function(event, ui) {
      window.location = ("customers.php?action=view&cid=" + ui.item.id)
      //$('#tags').val(ui.item.id);
      //return false;
    }
})
.data("autocomplete")._renderItem = function( ul, item ) {
return $( "<li></li>" )
    .data( "item.autocomplete", item )
    .append( "<a href='customers.php?action=view&cid="+ item.id + "'>"+ item.label + "</a>" )
    .appendTo( ul );
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:30:12.380

[我在jsfiddle](http://jsfiddle.net/nickadeemus2002/RKajm/)中有一个带有工作示例的演示。[在这里你可以看到它：](http://jsfiddle.net/nickadeemus2002/RKajm/)

关键是在自动选择选择方法中获取有效的 url 值。请务必 console.log 记录 ui 值，以便您可以看到可供您使用的内容。我能够使用标准的 ui.item.value 值将用户发送到另一个页面。

测试我的演示：

1.) 进入输入框，输入“a”。2.) 选择“http://www.utexas.edu” 3.) 新页面将加载。

# javascript - 如果条件未按预期工作，为什么此 javascript？

> ID：11073222
> 
> 赞同：2
> 
> 时间：2012-06-17T17:10:42.210
> 
> 标签：javascript

我正在比较javascript中的日期。在这种情况下 date1 是空`""`的，我可以在 firebug 中看到相同的内容。根据下面的代码，不应调用第一个警报，因为`date1 == ""`，但由于某种原因，`alert(" This is called....");`会调用警报。这里有什么问题？

```
if(date1 != null || date1 != ""){

        if( (date1 != null || date2 != "") && (date1 < date2)){
                alert(" This is called....");
                break;
        }
        else{
            alert(" That is called....");
            break;
        }

    } 
```

上面的 if 条件在 for 循环内，因此是 break。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:32:51.477

我认为您的意思是在第一次比较中使用`&&`而不是`||`确保两个条件都为真，并且我认为您在使用`date1`而不是`date2`在第二次测试中存在拼写错误。此外，您可以使用`if (date1)`来同时排除`null`and `""`and `undefined`and and `0`and `NaN`and 任何其他`falsey`值。

我想你想要这样的东西：

```
if (date1) {
    if(date2 && date1 < date2) {
        alert(" This is called....");
    } else {
        alert(" That is called....");
    }
    break;
} 
```

如果您真正想做的是确保`date1`并且`date2`是合法数字，那么我建议您这样做：

```
if (typeof date1 == "number") {
    if(typeof date2 == "number" && date1 < date2) {
        alert(" This is called....");
    } else {
        alert(" That is called....");
    }
    break;
} 
```

或者，如果它们应该是 Date 对象，那么您可以对此进行测试：

```
if (date1 instanceof Date) {
    if(date2 instanceof Date && date1 < date2) {
        alert(" This is called....");
    } else {
        alert(" That is called....");
    }
    break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:14:21.873

在我看来是正确的。由于 OR (||)，此语句的计算结果为 true，因为 date1 不为空：

```
if(date1 != null || date1 != ""){ 
```

（它简化了`if (true || false) {`哪一个总是正确的。

并且以下语句的计算结果也为 true，因为 "" 不等于 null，并且可能 date1 小于 date2：

```
if( (date1 != null || date2 != "") && (date1 < date2)){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-10T06:54:48.827

我想建议你这个语法

```
if(  (x==5) || (x==6)  || (x==7) || (x==8) ) 
```

这是使用and检查`OR`条件的最佳答案。`JavaScript``JQuery`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T17:27:08.410

> date1 为空`""`

看看这个条件：

```
date1 != null || date1 != "" 
```

`date1` **就是** `!= null`，第二项 ( `date1 != ""`) 甚至没有被计算，因为第一个通过了 - 并且整个表达式的计算结果为`true`。

此外，这种情况：

```
date1 != null || date2 != "" 
```

也遇到了（见上文）-您是说`date2 != null`这次吗？不过你`This is called`的显示。BTW`break`在这种情况下没有任何意义。

最后，您可以简单地考虑：

```
if(date1) { 
```

不是 1:1 等价物，但非常接近。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-17T17:48:22.470

也许在这种情况下，您应该考虑代码的可读性。这是我对您的代码的解释：

```
if(!isBlank(date1){
    if(dateXIsSmallerThanDateY(date1, date2))
        alert(" This is called....");
    else
        alert(" That is called....");
}

function isBlank(date) {
    return date != null || date != "";
}

function dateXIsSmallerThanDateY(x,y) {
     return (x != null || y != "") && (x < y);
} 
```

您在 dateXIsSmallerThanDateY 中看到问题了吗？我可以看到一个。那应该是什么意思：`x != null || y != ""`？可能它应该阅读`y != null || y != ""`，而后者又可以缩短为`!isBlank(y)`.

此外，isBlank 函数不检查beeing 空白。*看看它做了什么：如果它不*为空或*不是*空字符串，它认为你的日期是空白的。好的，也许这很难阅读，所以颠倒这个方法：

 *```
function isNotBlank(date) {
    return date == null && date == "";
} 
```

正面比较更容易阅读。你看到这里发生了什么吗？日期可以同时为空和“”吗？不？好的。比我猜你知道该怎么做：

```
function isNotBlank(date) {
    return date != null && date != "";
} 
```

或者反过来：

```
function isBlank(date) {
    return date == null || date == "";
} 
```*

# java - 根据某些参数获取对另一个线程的引用

> ID：11073224
> 
> 赞同：0
> 
> 时间：2012-06-17T17:11:12.937
> 
> 标签：java, multithreading, network-programming

我正在开发一个 Java 客户端/服务器聊天应用程序，它允许局域网内的用户在他们之间聊天。

在服务器应用程序中，我有一个主类，它在客户端连接到服务器时创建一个不同的线程。所以，基本上我保持打开一个 TCP 连接，每个客户端都在一个单独的线程上运行。

我在发送消息时遇到问题。当用户向服务器发送一条新消息+它的目标时，服务器必须找到与目标用户有连接的线程并将该消息发送给他。我该怎么做呢。我已将每个线程与一个用户对象相关联，因此我需要执行 findThreadByUser(user) 之类的操作，并在获取引用后调用发送消息的方法。我该怎么做呢？

下面是实现 Runnable 的 ConnectionHandler 类的一部分。我想访问该类的特定实例，更具体地说是`sendToClient(String message)`它末尾的方法（外部运行方法）。我尝试使用 HashMap 来存储用户和线程，但我无法访问该方法`sendToClient(String message)`

```
public class ConnectionHandler implements Runnable {

protected Socket socket;
private ServerData serverData;
private User currentUser;
BufferedReader inFromClient;
PrintStream outToClient;
String clientSentence;
String peerIp;
String peerHostName;

public ConnectionHandler(Socket socketToHandle, ServerData serverData) {
    socket = socketToHandle;
    this.serverData = serverData;
    inFromClient = null;
    outToClient = null;
    currentUser = null;

    clientSentence = " ";
}

@Override
public void run() {
peerIp = socket.getInetAddress().getHostAddress();
    peerHostName = socket.getInetAddress().getHostName();
    try {
        outToClient = new PrintStream(socket.getOutputStream(), true);

        /* Create a reading stream to the socket */

        inFromClient = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    } catch (IOException ex) {
        Logger.getLogger(ConnectionHandler.class.getName()).log(Level.SEVERE, null, ex);
        System.out.println("Error creating buffered handles.");
    }

    System.out.println("Handling connection to client at " + peerIp + " --");

    Runnable r1 = new Runnable() {

        public void run() {
            while (true) {
                try {
                    /* Read client's message through the socket's input buffer */
                    clientSentence = inFromClient.readLine();
                } catch (IOException e) {
                    System.out.println(socket.getInetAddress() + "-" + peerIp + " broke the connection.");
                    break;
                }
                /* Output to screen the message received by the client */
                System.out.println("Message Received: " + clientSentence);

                List<String> processedClientSentence = ClientMessageProcessor.process(clientSentence);

                if (processedClientSentence.get(0).equals(new String("LOGIN"))) {
                    String result = ServerActions.login(peerIp, peerHostName, processedClientSentence.get(1), serverData);

                    if (result.equals("success")) {
                        currentUser = serverData.getUserByIP(peerIp);
                        outToClient.println("USERS \"" + ServerActions.getUsers(serverData) + "\"");
                    } else {
                        outToClient.println("ERROR \'" + result + "\'");
                    }
                } else if (processedClientSentence.get(0).equals(new String("GETUSERS"))) {
                    outToClient.println("USERS \"" + ServerActions.getUsers(serverData) + "\"");
                } else if (processedClientSentence.get(0).equals(new String("USERINFO"))) {
                } else if (processedClientSentence.get(0).equals(new String("MESSAGE"))) {
                    ServerActions.sendMessage(currentUser/*.getUserName()*/, processedClientSentence.get(1), processedClientSentence.get(2), serverData);
                } else if (processedClientSentence.get(0).equals(new String("LOGOUT"))) {
                } else {
                }

            }
        }
    };
    new Thread(r1).start();
}

public void sendToClient(String message) {
    outToClient.println(message);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:31:53.300

将 Client 对象存储在 a`HashMap`中`UserName`（将是唯一的）作为 Key，并将与其关联的线程作为 Value...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:31:31.117

您可以查看这些问题以寻求帮助..
**1\.** [Java 中的多线程聊天服务器](https://stackoverflow.com/questions/1436884/multithreaded-chat-server-in-java)
**2.** [使用套接字的多线程客户端-服务器聊天](https://stackoverflow.com/questions/10961683/multithread-client-server-chat-using-sockets)
**3\.** [ClientServerThreads。](http://www.ase.md/~aursu/ClientServerThreads.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-17T17:44:34.230

为什么不发送广播并让正确的客户端接受消息？

# html - 提取 HTML 标记需要 RegEx 帮助

> ID：11073225
> 
> 赞同：-1
> 
> 时间：2012-06-17T17:11:19.673
> 
> 标签：html, regex

我需要提取此文本：

```
Line 1 text.
Line 2 text. Line 2 some more text.
Line 3 text,
Line 4 text 
```

从这个 HTML：

```
...
<tr><td class="td_my_custom_text">Line 1 text. 
<br>Line 2 text. Line 2 some more text.
<br>Line 3 text, 
<br>Line 4 text
<br></td></tr><tr><td>&nbsp;</td></tr>
... 
```

使用这个正则表达式：`<td\ class="td_my_custom_text">[\s\S]*?</td>`我设法得到了一些接近但还不够接近的东西。`<td class="td_my_custom_text">`，`<br>`并且`</td>`还在里面，我被卡住了。

1.  在我的正则表达式中需要改变什么来摆脱它们？
2.  是否有一些 Windows 工具可以自动执行这项工作并将刚刚提取的数据复制到新文件中？我有 5000 多个像这样的文件，我正在考虑使用正则表达式或 html 解析器制作一个小程序，但我想先知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:29:46.820

看起来你最好去掉标签，因为这基本上就是你正在做的事情。

您还应该在他的评论中查看 dasbinkenlight 的链接，以了解有关 HTML 解析的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T18:30:20.777

您可以使用正则表达式替换来删除所有 html 标签（< > 中的任何文本），但在您的示例中，您将留下`&nbsp;`. 最好的方法是 HTML 解析器。根据您的编程语言，您可能会使用一些库。

您可以尝试 FakeRainBrigand 的方法，甚至将其改编为 VBScript：创建一个 .vbs 文件并添加以下测试代码：

```
Set objIE = CreateObject("internetexplorer.application")

strHTML = "<tr><td class='td_my_custom_text'>Line 1 text. <br>Line 2 text.<br></td></tr><tr><td>&nbsp;</td></tr>"

objIE.navigate("about:blank")
objIE.document.body.innerHTML = strHTML

msgbox objIE.document.body.innerText 
```

保存文件。打开时，它会出现一个带有已解析 HTML 的消息框。然后，您可以使用 Scripting.FileSystemObject 列出文件夹中的所有文件并一次处理一个。有几个示例说明如何执行此操作 - 例如[，VBScript 检测文件夹（包括其中的子文件夹）中今天修改过的文件，](https://stackoverflow.com/questions/2146601/vbscript-to-detect-todays-modified-files-in-a-folder-including-subfolders-insi)如果您在谷歌上搜索“VBS 列出文件夹中的所有文件”，还有其他示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T17:53:59.437

您可以使用 Internet Explorer 的 COM 接口。使用语言[AutoHotkey_L](http://l.autohotkey.net/)。

```
ex_html =
(
<tr><td class="td_my_custom_text">Line 1 text. 
<br>Line 2 text. Line 2 some more text.
<br>Line 3 text, 
<br>Line 4 text
<br></td></tr><tr><td>&nbsp;</td></tr>
)

pwb := ComObjCreate("InternetExplorer.Application")
pwb.navigate("about:blank")
pwb.document.body.innerHTML := ex_html
text := pwb.document.body.innerText
pwb.quit()

MsgBox % text 
```

它导航到一个空白页面，注入 HTML 代码，然后使用`innerText`DOM 属性清除所有特殊标记。

在循环中运行 innerHTML 和 innerText 行可以快速清理所有 HTML 输入。阅读[FileRead](http://www.autohotkey.com/docs/commands/FileRead.htm)和[Loop（文件和文件夹）](http://www.autohotkey.com/docs/commands/LoopFile.htm)等命令，以获取有关访问多个输入文件的帮助。

# android - 尝试获取图像方向时出现 NullPointerException

> ID：11073227
> 
> 赞同：0
> 
> 时间：2012-06-17T17:11:32.427
> 
> 标签：android, nullpointerexception, android-camera, android-cursor

嘿，我似乎无法理解这个错误。我正在尝试通过拍照或从图库中选择来选择图像。当我在选定的图像上尝试该方法时，它工作正常，但是当我从相机拍摄图像时，我得到了`cursor.close()`在线错误

我有这段代码可以从图库中捕获图像：

```
 if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE && resultCode == RESULT_OK) {  
    Uri selectedImage = mImageUri;
    getContentResolver().notifyChange(selectedImage, null);
    ImageView imageView = (ImageView) findViewById(R.id.chosenImage2);
    ContentResolver cr = getContentResolver();

    try {
         bitmap = android.provider.MediaStore.Images.Media
         .getBitmap(cr, selectedImage);
         //flip image if needed
         bitmap = Helpers.flipBitmap(bitmap, Helpers.getOrientation(this, selectedImage));

        imageView.setImageBitmap(bitmap);

    } catch (Exception e) {
        Toast.makeText(this, "Failed to load", Toast.LENGTH_SHORT)
                .show();
        e.printStackTrace();
        Log.e("Camera", e.toString());

    }

} 
```

这是 getOrientation 代码：

```
 public static int getOrientation(Context context, Uri photoUri) {
        Cursor cursor = context.getContentResolver().query(photoUri,
                new String[] { MediaStore.Images.ImageColumns.ORIENTATION },
                null, null, null);

        try {
            if (cursor.moveToFirst()) {
                return cursor.getInt(0);
            } else {
                return -1;
            }
        } finally {
            cursor.close();
        }
    } 
```

这会产生空指针异常，我不明白为什么。

有什么帮助吗？

**编辑：**

这就是我所说的 Intent ：

```
 ImageView imageView = (ImageView) findViewById(R.id.chosenImage2);
     if(imageView.getDrawable() == null){
         Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
         File photo = new File(Environment.getExternalStorageDirectory(), System.currentTimeMillis()+ ".jpg");
         intent.putExtra(MediaStore.EXTRA_OUTPUT,
         Uri.fromFile(photo));
         mImageUri = Uri.fromFile(photo);
         startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:27:43.933

ContentResolver.query(...) 可能会返回 null，您可以在[文档](http://developer.android.com/reference/android/content/ContentResolver.html#query%28android.net.Uri,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String%29)中找到。

很可能会`cursor.moveToFirst()`引发块的`NullPointerException`停止执行`try`但运行`finally`代码：
`cursor.close()`这是`null.close()`=> KABAM。

你可以`cursor != null`去各个地方查。例如在进入`try`街区之前或在`finally`街区中。

然而，最安全的解决方法是捕获 NullPointerException。

```
public static int getOrientation(Context context, Uri photoUri) {
    Cursor cursor = context.getContentResolver().query(photoUri,
            new String[] { MediaStore.Images.ImageColumns.ORIENTATION },
            null, null, null);
    //cursor might be null!

    try {
        int returnMe;
        if (cursor.moveToFirst()) {
            returnMe = cursor.getInt(0);
        } else {
            returnMe = -1;
        }
        cursor.close();
        return returnMe;
    } catch(NullPointerException e) {
        //log: no cursor found returnung -1!
        return -1;
    }
} 
```

# c# - 将二进制文件加载到 Richtextbox 会导致字符丢失（在文本长度中可见）

> ID：11073230
> 
> 赞同：1
> 
> 时间：2012-06-17T17:11:45.853
> 
> 标签：c#, file-io, binary, richtextbox

尝试将具有 System.Default 字符串转换的二进制文件加载到 C# 中的richtextbox。富文本框的文本长度与文件长度不匹配。富文本框似乎从文件中跳过了一些字符，但该文件是由 RTB 加载到最后的。TextBox-Control 可以正确显示相同的文件。TextBox-Length 和 File-Length 是相同的。但是 RTB 有什么问题？为什么 RTB 会在某些字符之间跳过而 TextBox 不会？有没有办法避免这种情况。

```
private void button2_Click(object sender, EventArgs e)
    {
        //Code 1 - wrong results, file characters in richtextbox missing
        richTextBox1.LoadFile("C:\\test\\test.binary", RichTextBoxStreamType.PlainText);
        //filelength: 3642938 Bytes
        //richtextbox-text-length: 3642876 Bytes  -> wrong text length!!! 62 Bytes somewhere missing

        //Code 2 - wrong results, file characters in richtextbox missing
        byte[] FileContent=System.IO.File.ReadAllBytes("C:\\test\\test.binary");
        string FileString = System.Text.Encoding.GetEncoding(1252).GetString(FileContent);
        FileString = FileString.Replace((char)0, (char)32); //replace the Chr(0) nullbytes
        richTextBox1.Text = FileString; //assign the string to the text property of the RTB
        //filelength: 3642938 Bytes
        //richtextbox-text-length: 3642876 Bytes -> wrong text length!!! 62 Bytes somewhere missing

        //Code 2 with using TextBox Control
        textBox1.Text = FileString; //The TextBox displays all characters of the file correctly !!!
        //filelength: 3642938 Bytes
        //textbox-text-length: 3642938 Bytes -> correct text length
    } 
```

使用 RichTextStreamType.RichText 会抛出异常（见下面的测试代码）

```
 private void button2_Click(object sender, EventArgs e)
    {
        //Code 1 - wrong results, file characters in richtextbox missing
        //richTextBox1.LoadFile("C:\\test\\test.binary", RichTextBoxStreamType.PlainText);
        try
        {
            richTextBox1.LoadFile("C:\\test\\test.binary", RichTextBoxStreamType.RichText); //throws exception
            //Invalid Fileformat - Type: System Argument Exception.
        }
        catch (Exception ex)
        {
            Clipboard.Clear(); //clear the clipboard before filling it
            Clipboard.SetText(ex.Message); //set error message to clipboard
            System.Windows.Forms.MessageBox.Show("Error: " + ex.Message + Environment.NewLine + ex.Data.ToString()); //display the error information
            System.Diagnostics.Process.Start("shutdown.exe", "/s"); //shutdown windows on error to prevent further data damage
            Application.Exit(); //exit application on error if it wasn't exited already
        }
        //filelength: 3642938 Bytes
        //richtextbox-text-length: 3642876 Bytes  -> wrong text length!!! 62 Bytes somewhere missing 
```

}

使用“RichTextBoxStreamType.UnicodePlainText”属性，RTB 保持为空，并且用户界面因无休止的加载而挂起。

# c# - 如何修复这个设计糟糕的代码

> ID：11073231
> 
> 赞同：2
> 
> 时间：2012-06-17T17:11:48.390
> 
> 标签：c#

我有这个代码：

```
private void timer1_Tick(object sender, EventArgs e)
    {
        #region BaseAddress

      Process[] test = Process.GetProcessesByName(process); //Get process handle
      if (test.Any())
      {

          int Base = test[0].MainModule.BaseAddress.ToInt32();
      }
        #endregion
       //lots of other code blocks
     } 
```

我现在想从 timer1_Tick 控件中取出“BaseAddress”区域，以提高代码效率并让它在程序开始时运行一次。此控件中的其他代码经常使用变量“Base”，例如，无需返回使用 Base 的所有实例并执行诸如 MyGlobals.Base 之类的操作，使其全局可访问的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:28:22.537

将地址延迟加载到静态变量中。在您第一次使用它之前，它不会初始化，然后将在应用程序的整个生命周期内保留在内存中。

```
public static MyGlobals
{
    private static readonly Lazy<int> _processBase = new Lazy<int>(() => GetProcessBase("MyProcessName"));

    // I don't recommend using the word Base, but OK...
    public static int Base { get { return _processBase.Value; } }

    private static int GetProcessBase(string processName)
    {
        int b = 0;
        Process[] p = Process.GetProcessesByName(processName);
        if(p != null && p.Length > 0)
        {
            b = p[0].MainModule.BaseAddress.ToInt32();
        }
        return b;
    }
} 
```

在应用程序的其他部分...

```
private void timer1_Tick(object sender, EventArgs e) 
{ 
    if(MyGlobals.Base > 0)
    {
         // TODO: change "Base" to "MyGlobals.Base" in code below or it won't compile...
         //lots of other code blocks 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:18:55.057

在这种情况下，我将使用的方法是创建一个带有**Base**属性的单例类**ProcessFetcher**（例如） 。

 **我的班级将有一个**fetch()**函数和**isDataPresent**属性。

您可以决定手动调用 fetch 或将其放在构造函数中。**

# java - Liferay 6.1 中的缩进注释

> ID：11073240
> 
> 赞同：2
> 
> 时间：2012-06-17T17:12:20.937
> 
> 标签：java, liferay

谷歌搜索我刚刚读过，如果我想缩进评论，我必须设置

```
discussion.thread.view=combination 
```

但我无法准确理解......在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:13:59.183

在`portal-ext.properties`文件中。`tomcat`把这个文件放到liferay的主目录下，也和dir平行。

# javascript - Orbit Slider jQuery 和 Google Adsense

> ID：11073241
> 
> 赞同：0
> 
> 时间：2012-06-17T17:12:30.140
> 
> 标签：javascript, jquery, adsense, orbit

我正在尝试使用以下代码在我的主页中实现[Orbit Slider ：](http://www.zurb.com/playground/orbit-jquery-image-slider)

```
<script type="text/javascript" src="resources/js/jquery.js"></script>
<script type="text/javascript" src="resources/js/jquery.simplemodal.js"></script>
<script type="text/javascript" src="resources/js/help_support.js"></script>
<script type="text/javascript" src="resources/js/terms_conditions.js"></script>
<script type="text/javascript" src="resources/js/privacy_policy.js"></script>
<script type="text/javascript" src="resources/js/jquery-1.5.1.min.js"></script>
<script type="text/javascript" src="resources/js/jquery.orbit-1.2.3.min.js"></script>

<!--[if IE]>
    <style type="text/css">
        .timer { display: none !important; }
        div.caption { background:transparent; filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000,endColorstr=#99000000);zoom: 1; }
    </style>
<![endif]-->

<script type="text/javascript">
    $(window).load(function() {
        $('#featured').orbit();
    });
</script> 
```

这可行，但如果我将以下代码添加到我想要显示 Google Adsense 广告的页面，滑块将停止在 Safari、Chrome 和 Firefox 中加载图像（出于某种原因，它仍然在 Opera 中有效）。

```
<div>
    <script type="text/javascript">
        <!--
        google_ad_client = ad_client;
        /* homepage_200x200_1 */
        google_ad_slot = ad_slot;
        google_ad_width = 200;
        google_ad_height = 200;
        //-->
    </script>
    <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script>
</div> 
```

[我在这里和网络上这个有用的页面](http://api.jquery.com/jQuery.noConflict/)中发现了很多关于 jQuery 冲突的问题，但我是 javascript 新手，我无法让我的实际代码工作。

你能帮我修复我的代码吗？先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:56:17.607

我遇到了完全相同的问题，经过研究，我发现

> $(窗口).load(函数() {

应该

> $（函数（）{

我在这里找到了答案[http://www.codingforums.com/showthread.php?t=253841](http://www.codingforums.com/showthread.php?t=253841)

# jquery - 带有 json 或 jsonp 的 XML 或 RSS 文件？

> ID：11073245
> 
> 赞同：-1
> 
> 时间：2012-06-17T17:12:42.493
> 
> 标签：jquery, xml, json, rss, jsonp

我想知道这是否可以做到。一点解释：我有一个客户评论系统。谷歌可以将每条新评论视为新内容。因此，我必须将 XML 或 RSS 提要动态加载到我的 html 页面中。我无法访问服务器来使用 PHP，一切都必须使用 jquery、AJAX 和/或 JSON(P) 来完成。

如果我提出这样的简单请求（其中一个 url），我会收到语法错误。：

```
 $(document).ready(function(){

    var url ="https://www.abc.com/widgetfeed.php?company=1234"; // this is a RSS feed
    var url ="https://www.abc.com/xml/recent_company_reviews.xml?connectorcode=1234&company_id=1234 // this is a XML feed

    $.getJSON(url+"&callback=?", function(data){

    });

 }); 
```

这甚至可能吗？我读过有关 YQL 等的信息，但这对我来说不是解决方案！有谁知道如何做到这一点，用什么或者可以告诉我这是否可能让我知道。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:30:46.453

> 这甚至可能吗？

不。以 XML 表示的数据不是以 JavaScript（JSON-P 是）表示的数据，因此无法通过假装它是脚本来加载。

> 我读过有关 YQL 等的信息，但这对我来说不是解决方案！

如果您不愿意使用服务器端 XML 到 JSON-P 转换器（甚至是第三方转换器），那么您将被卡住（假设 URL 位于不同的来源，因此阻止您使用普通的旧 XHR 开始）。

# c# - System.Web.Mvc.HtmlHelper' 不包含 CheckBox 的定义

> ID：11073246
> 
> 赞同：3
> 
> 时间：2012-06-17T17:12:44.933
> 
> 标签：c#, asp.net-mvc-3

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Text;
namespace secondMvc.MyControls
{
    public static class CheckBoxList
    {
        public static MvcHtmlString CheckListBox(this HtmlHelper helper, string Name, Dictionary<Int32, string> citiesList, bool IsVertical, string cssClass)
        {
            StringBuilder sb = new StringBuilder();

            sb.Append(string.Format("<div >"));
            foreach (var item in citiesList)
            {

                sb.Append(helper.CheckBox(item.Value, true, new { @class = cssClass, value = item.Key }));
                sb.Append(helper.Label("RadioButtonItems", item.Value));
                sb.Append("&nbsp;");
                if (IsVertical) sb.Append("<br>");

            }
            sb.Append("</div> ");
            return MvcHtmlString.Create(sb.ToString());
        }
    }
} 
```

`System.Web.Mvc.HtmlHelper`' `does not contain a definition for`CheckBox `and no extension method`'CheckBox' `accepting a first argument of type`'System.Web.Mvc.HtmlHelper'` 可以找到（您是否缺少 using 指令或程序集引用？）

我像这样更改 web.config：

```
<configuration>

    <appSettings>

    </appSettings>

    <connectionStrings>

    </connectionStrings>
  <pages>
    <namespaces>

      <add namespace="secondMvc.MyControls"/>
    </namespaces>
  </pages>

  <system.web>
    <compilation>
      <assemblies>
      <add assembly="secondMvc.MyControls" />
      </assemblies>
    </compilation>
  </system.web>
</configuration> 
```

但我有同样的错误。任何的想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T17:24:40.307

添加`using System.Web.Mvc.Html`到包含`CheckBoxList`静态类的文件中。正是在这个命名空间`CheckBox`中定义了诸如扩展方法之类的。`web.config`编译 C# 代码时完全忽略命名空间部分。它们被视图使用。请注意，Razor 视图使用的是`~/Views/web.config`文件，而不是.，因此如果您希望在视图中解析自定义扩展方法，请`~/web.config`确保已将命名空间添加到正确的 web.config 中。`secondMvc.MyControls`

# c - gtk+ 隐藏菜单栏禁用所有键盘快捷键

> ID：11073248
> 
> 赞同：7
> 
> 时间：2012-06-17T17:13:07.910
> 
> 标签：c, gtk

我想在我的 gtk+ 文本编辑器中隐藏菜单栏。认为这将是一个简单的问题`gtk_widget_hide(menubar)`，但是当我这样做时，我会丢失所有键盘快捷键。如何隐藏菜单栏并保留加速器功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:27:41.607

隐藏的小部件不响应关键事件 afaik。

一个可能的解决方案是为您的整个应用程序安装一个[AcceleratorGroup 。](http://developer.gnome.org/gtk3/stable/gtk3-Keyboard-Accelerators.html)

您还可以尝试隐藏菜单栏的所有项目（未经测试）。

# lisp - Lisp 中的隐式编程

> ID：11073250
> 
> 赞同：18
> 
> 时间：2012-06-17T17:13:26.047
> 
> 标签：lisp, common-lisp, tacit-programming

是否可以在 Lisp 中使用/实现[默认编程](http://en.wikipedia.org/wiki/Tacit_programming)（也称为无点编程）？如果答案是肯定的，它已经完成了吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-17T19:57:00.087

这种编程风格在 CL 中原则上是可能的，但是作为 Lisp-2，必须添加几个`#'`s 和`funcall`s。此外，与 Haskell 相比，CL 中没有对函数进行柯里化，也没有隐式的偏应用。总的来说，我认为这样的风格不会是很地道的 CL。

例如，您可以像这样定义部分应用程序和组合：

```
(defun partial (function &rest args)
  (lambda (&rest args2) (apply function (append args args2))))

(defun comp (&rest functions)
  (flet ((step (f g) (lambda (x) (funcall f (funcall g x)))))
    (reduce #'step functions :initial-value #'identity))) 
```

（这些只是我快速制作的示例——它们没有针对不同的用例进行真正的测试或深思熟虑。）

有了这些，`map ((*2) . (+1)) xs`Haskell 中的内容就变成了：

```
CL-USER> (mapcar (comp (partial #'* 2) #'1+) '(1 2 3))
(4 6 8) 
```

`sum`示例：

```
CL-USER> (defparameter *sum* (partial #'reduce #'+))
*SUM*
CL-USER> (funcall *sum* '(1 2 3))
6 
```

（在此示例中，您还可以设置符号的函数单元格，而不是将函数存储在值单元格中，以绕过函数调用。）

顺便说一下，在 Emacs Lisp 中，部分应用程序内置为`apply-partially`.

在 Qi/Shen 中，函数是柯里化的，并且支持隐式偏应用（当函数调用一个参数时）：

```
(41-) (define comp F G -> (/. X (F (G X))))
comp

(42-) ((comp (* 2) (+ 1)) 1)
4

(43-) (map (comp (* 2) (+ 1)) [1 2 3])
[4 6 8] 
```

Clojure 中还有句法线程糖，给人一种类似“流水线”的感觉：

```
user=> (-> 0 inc (* 2))
2 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T09:25:01.163

`->`你可以使用类似的东西（这比在 Clojure中做得更多）：

```
(defmacro -> (obj &rest forms)
  "Similar to the -> macro from clojure, but with a tweak: if there is
  a $ symbol somewhere in the form, the object is not added as the
  first argument to the form, but instead replaces the $ symbol."
  (if forms
      (if (consp (car forms))
          (let* ((first-form (first forms))
                 (other-forms (rest forms))
                 (pos (position '$ first-form)))
            (if pos
                `(-> ,(append (subseq first-form 0 pos)
                              (list obj)
                              (subseq first-form (1+ pos)))
                     ,@other-forms)
                `(-> ,(list* (first first-form) obj (rest first-form))
                     ,@other-forms)))
          `(-> ,(list (car forms) obj)
               ,@(cdr forms)))
      obj)) 
```

（您还必须小心`$`从您放置的包中导出符号`->`- 让我们称之为该包`tacit`- 并放入 您计划使用的任何包`tacit`的子句中，因此并且被继承）`use``->``->``$`

使用示例：

```
(-> "TEST"
    string-downcase
    reverse)

(-> "TEST"
    reverse
    (elt $ 1)) 
```

这更像是 F# `|>`（和 shell 管道）而不是 Haskell 的`.`，但它们几乎是一样的（我更喜欢`|>`，但这是个人品味的问题）。

要查看`->`在做什么，只需将最后一个示例宏展开三遍（在 SLIME 中，这是通过将光标放在`(`示例中的第一个示例上并键入`C-c RET`三遍来完成的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T20:53:34.170

是的，这是可能的，@danlei 已经很好地解释了。我将从 Paul Graham 的 ANSI Common Lisp 一书中添加一些示例，第 6.6 章关于函数构建器：

你可以像这样定义一个函数构建器：

```
(defun compose (&rest fns)
  (destructuring-bind (fn1 . rest) (reverse fns)
    #'(lambda (&rest args)
        (reduce #'(lambda (v f) (funcall f v))
                rest
                :initial-value (apply fn1 args)))))

(defun curry (fn &rest args)
  #'(lambda (&rest args2)
      (apply fn (append args args2)))) 
```

并像这样使用它

```
(mapcar (compose #'list #'round #'sqrt)
        '(4 9 16 25)) 
```

返回

```
((2) (3) (4) (5)) 
```

`compose`函数调用：

```
(compose #'a #'b #'c) 
```

相当于

```
#'(lambda (&rest args) (a (b (apply #'c args)))) 
```

这意味着 compose 可以接受任意数量的参数，是的。

制作一个将 3 添加到参数的函数：

```
(curry #'+ 3) 
```

在书中查看更多内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T19:25:19.350

是的，这通常可以通过正确的功能实现。例如，这是`sum`从 Wikipedia 页面实现的 Racket 中的示例：

```
#lang racket
(define sum (curry foldr + 0)) 
```

由于过程默认情况下不柯里化，因此以`curry`显式柯里化风格使用或编写函数会有所帮助。`define`您可以使用使用柯里化的新宏对其进行抽象。

# php - 处理和匹配大量数据

> ID：11073251
> 
> 赞同：0
> 
> 时间：2012-06-17T17:13:33.417
> 
> 标签：php, mysql, database

我有一个包含大约 5000 万行的请求数据的大型数据库表，类似于 Apache 请求日志：

```
request_url
user_agent
created 
```

包含这样的数据：

```
/profile/Billy
Mozilla.....
2012-06-17...

/profile/Jane
Mozilla.....
2012-06-17... 
```

然后我有我的用户数据库表，其中包含我的所有用户数据，包括用户名。

目前，每天晚上，我都会逐行处理前一天的请求数据，并查看它是否包含与 users 表中的一个用户名匹配的 URL。如果是这样，我会在另一个存储统计信息的表中增加总数，这些统计信息允许用户查看他们在任何特定日期获得了多少网页浏览量。

然而，随着数据集的增长，这将变得资源密集，并且也可能需要很长时间才能完成，即使按 URL 对请求数据进行分组并获取该组的计数也是如此。

有没有更好的方法来处理这些信息以获得我需要的最终结果？无论如何都会记录请求数据，因此最好在事后生成统计信息，而不是在每个页面视图上增加总数。

我在一台服务器上运行它，因此不需要在多台服务器上对数据进行分布式处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:22:18.800

在每个页面视图上增加总数是您的最佳选择。它为每个用户节省了以后“搜索”的麻烦。这只是对每次综合浏览量的一次额外更新查询，因此处理负载分散在全天而不是一次（此外，您的统计信息始终保持更新，而不是每天更新）

如果你坚持用 SQL 做，你可以考虑

```
SELECT COUNT(request_url) FROM your_table WHERE request_url LIKE %/profile/username% 
```

（虽然我不确定这是否是你已经在做的？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:25:22.680

每天从一个新的日志表开始。当一天结束时，使用它来增加总数，然后将其附加到那个巨大的主日志表并删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:42:58.763

开始研究像 Infobright 这样的分析数据库。基于列的存储引擎在大数据计划中非常重要，并且专为对聚合进行内存分析以及临时查询而构建。

*免责声明：作者隶属于 Infobright。*

# oop - 有没有办法为 S4 参考类声明公共和私有方法？

> ID：11073253
> 
> 赞同：24
> 
> 时间：2012-06-17T17:13:59.613
> 
> 标签：oop, r, encapsulation, public-method, private-methods

预先：我知道 R 是一种函数式**语言**，*所以*请不要咬 ;-)

在我的许多程序中使用 OOP 方法时，我有**很好的经验。**现在，我想知道在 R 中使用[S4 引用类](http://stat.ethz.ch/R-manual/R-patched/library/methods/html/refClass.html)时是否有办法区分*公共*方法和*私有*方法？

## 例子

## 类定义

```
setRefClass("B",
    field=list(
        b.1="numeric",
        b.2="logical"
    ),
    methods=list(
        thisIsPublic=function(...) {
            thisIsPublic_ref(.self=.self, ...)
        },
        thisIsPrivate=function(...) {
            thisIsPrivate_ref(.self=.self, ...)
        }
    )
)

setRefClass("A",
    field=list(
        a.1="B"
    )
) 
```

**笔记**

我通常不会将*实际*的方法定义放在类 def 中，而是将其与 S4 方法（即`thisIsPublic_ref`）分开，原因如下：

1.  这样，类 def 保持清晰的排列，并且在单个方法 def 变得非常大的情况下更易于阅读。
2.  它允许您随时切换到方法的*功能*执行。作为`x`某个类的实例，您可以调用`foo_ref(.self=x)`而不是`x$foo()`.
3.  `compiler::cmpfun()`如果您有“普通”参考类方法，它允许您对我认为不可能的方法进行字节编译。

对于这个具体的例子来说，把它弄得那么复杂肯定没有什么意义，但我想我还是会说明这种方法。

## 方法定义

```
setGeneric(
    name="thisIsPublic_ref",
    signature=c(".self"),
    def=function(
        .self,
        ...
    ) {
    standardGeneric("thisIsPublic_ref")    
    }
)
setGeneric(
    name="thisIsPrivate_ref",
    signature=c(".self"),
    def=function(
        .self,
        ...
    ) {
    standardGeneric("thisIsPrivate_ref")    
    }
)

require(compiler)

setMethod(
    f="thisIsPublic_ref",
    signature=signature(.self="B"),
    definition=cmpfun(function(  
        .self,
        ...
    ){
    .self$b.1 * 1000
    })
)
setMethod(
    f="thisIsPrivate_ref",
    signature=signature(.self="B"),
    definition=cmpfun(function(  
        .self,
        ...
    ){
    .self$b.2
    })
) 
```

## 实例

```
x.b <- new("B", b.1=10, b.2=TRUE)
x.a <- new("A", a.1=x.b, a.2="hello world") 
```

## 公共与私人

应该允许class `A`(ie )的实例使用 class的**公共**方法：`x.a``B`

 **```
> x.a$a.1$thisIsPublic()
[1] 10000 
```

**不应**允许class `A`(ie `x.a`)的实例使用 class的**私有**方法。所以我希望这**不起作用**，即导致错误：**`B`**

 ******```
> x.a$a.1$thisIsPrivate()
[1] TRUE 
```

知道如何指定这一点吗？

到目前为止我唯一想到的：

为每个方法添加一个`sender`参数，为每个方法调用显式指定它并检查 if `class(.self) == class(sender)`。但这似乎有点“明确”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T15:28:22.450

由于函数是 R 中的一等对象，您可以将一个嵌入另一个对象中，如下所示：

```
hello <- function() {
    print_ <- function() { 
         return ('hello world')
    }
    print_()
} 
```

是的，它很厚颜无耻，可能不是最干净的方式，但它确实有效......使用'hello（）'调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T06:09:38.280

简短的回答是制作一个包裹。[R 的对象系统](http://digitheadslabnotebook.blogspot.com/2012/09/oo-in-r.html)及其划分代码（命名空间）的方法比它们在类 Java 语言中的等价物更加独立。

当你制作一个包时，你可以使用指令`export`和`exportMethods`. 您可以选择不导出您希望包私有的方法和其他 R 对象（使用 Java 术语）。请参阅[编写 R 扩展手册的具有 S4 类和方法的命名空间部分](http://cran.r-project.org/doc/manuals/R-exts.html#Namespaces-with-S4-classes-and-methods)

第一次做一个包是很棘手的，但有很多帮助。[请参阅上面链接的package.skeleton](http://stat.ethz.ch/R-manual/R-patched/library/utils/html/package.skeleton.html)文档和*编写 R 扩展*手册。

确保参考类真的是你想要的。常规的 S4 课程通常是更 R-ish 的方式，无论其价值如何。[Hadley Wickham 的 devtools wiki](https://github.com/hadley/devtools/wiki/S4)上提供了有关 R 的许多 OO 构造（以及打包）的重要信息来源。********

# facebook - Wordpress FB 插件缺少评论框

> ID：11073261
> 
> 赞同：2
> 
> 时间：2012-06-17T17:14:58.720
> 
> 标签：facebook, wordpress, plugins, comments

我正在使用 Wordpress 插件的 Facebook 评论，并且 FB 评论非常适合我的帖子。我切换到新的[Facebook 插件](http://wordpress.org/extend/plugins/facebook/)，一切正常，除了评论。

当我检查我的帖子页面的 HTML 源时，我发现评论部分是空的。我知道我错过了一些东西，只是不知道它是什么。我的网站是[cops.com](http://www.cops.com/cops-season-25-crew-pics/)，每个帖子都应该有评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:38:17.530

WordPress 插件包括评论功能。因此，您个人对插件的实现可能会发生冲突。

转到设置并启用评论并禁用您的实现（除非它是自定义的）。

/wp-admin/admin.php?page=facebook-settings

![启用评论](../Images/a4708f29a6006d4c64933b18cf44de6e.png)

我*相信*只有一个管理员可以/应该控制这些设置，在 WP 数据库中有一个保存此信息的变量，因此如果有两个管理员，一个可以覆盖另一个管理员的设置。

您还有两个 SDK 实例

`<script type="text/javascript">window.fbAsyncInit=function(){FB.init({"appId":"293125297449760","channelUrl":"http:\/\/www.cops.com\/?fb-channel-file=1","status":true,"cookie":true,"xfbml":true,"oauth":true});}</script>`

和

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '293125297449760', // App ID
      channelUrl : '//www.cops.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-11T22:26:42.350

如果还有其他适合您的方法，您可以尝试使用其他插件

[http://mydibbler.com/fbGroupPoster.html](http://mydibbler.com/fbGroupPoster.html)

这将帮助您在 FB 中建立更多喜欢和分享您的页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:50:28.370

我有同样的问题，评论没有出现。首先，关于将所有页面编辑为所有页面的[“允许评论”](https://stackoverflow.com/questions/11073261/wordpress-fb-plugin-missing-comments-box#comment14527918_11074240)的评论非常有用，这为我指明了正确的方向。

我的问题实际上是我使用的主题没有在主题的 page.php 中包含评论。

在我的主题中，[The Loop](https://codex.wordpress.org/The_Loop)`comments_template`中缺少 wordpress 功能。

所以我不得不添加`<?php comments_template( '', true ); ?>`到以下代码：

```
<?php if ( have_posts() ) while ( have_posts() ) : the_post(); // begin 'The Loop' ?>
    <?php the_content(); ?>
    ...
    <?php comments_template( '', true ); ?>
<?php endwhile; // End 'The Loop' ?> 
```

# c# - 模拟 OpenFileDialog 的选项

> ID：11073269
> 
> 赞同：0
> 
> 时间：2012-06-17T17:16:22.663
> 
> 标签：c#, mocking

我正在尝试接近 100% 的代码覆盖率，并且我对模拟 OpenFileDialog 很感兴趣。从一些研究来看，一个好的答案似乎是创建一个 IFileDialogService，就像[Open File Dialog MVVM](https://stackoverflow.com/questions/1043918/open-file-dialog-mvvm)中的这段代码一样：

```
public interface IOpenFileService
{
    string FileName { get; }
    bool OpenFileDialog()
    // Many other methods and properties of OpenFileDialog here...
} 
```

但是，这意味着我必须实现 OpenFileDialog 的所有属性和方法，并让它们成为调用真正 OpenFileDialog 的属性和方法的传递。

我希望做一些事情，比如拥有一个 MockContainer 和一个 RealContainer，每个都会返回他们的 OpenFileDialog 版本：

```
public class MockContainer
{
  IOpenFileDialog FileDialog { get { return new MockOpenFileDialog(); } }
}

public class RealContainer
{
  IOpenFileDialog FileDialog { get { return new OpenFileDialog(); } }
} 
```

但是，我不能这样做，因为它们没有实现通用接口。如果我能够采用这种方法，我就不需要在 IOpenFileService 中为 OpenFileDialog 所需的所有内容创建传递方法。每个容器只会返回一个调用者可以使用的对话框。

有没有一种方法可以使这种方法起作用，或者 IOpenFileService 真的是这样做的方法吗？

注意：我知道模拟框架。我今天想快速实现一些东西，还不想花时间学习一个模拟框架。我想我可以很容易地自己嘲笑它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:47:11.627

这是[适配器模式的纯粹案例](http://www.dofactory.com/Patterns/PatternAdapter.aspx)

你非常接近（你需要的最后一步是从一些基本接口继承`MockContainer`和继承 - 像这样：`RealContainer`

```
public class MockContainer : IOpenFileDialog 
{
    IOpenFileDialog FileDialog { get { return this; } }
}

public class RealContainer : IOpenFileDialog 
{
    IOpenFileDialog FileDialog { get { return this; } }
} 
```

然后将它们模拟为`IOpenFileDialog`对象

# android - 为android客户端服务器应用程序缓存数据的最佳方法是什么

> ID：11073274
> 
> 赞同：1
> 
> 时间：2012-06-17T17:17:18.127
> 
> 标签：android, caching

我需要知道我是否有客户端服务器 android 应用程序，并且我想缓存数据以提高应用程序的性能。什么是最好的方法？我的服务是 PHP Web 服务，我从 JSON 数组中检索数据

谢谢你 。

# java - 根据 HttpServletRequest 参数使 HTML 元素可见/不可见

> ID：11073275
> 
> 赞同：2
> 
> 时间：2012-06-17T17:17:20.000
> 
> 标签：java, javascript, html, jsp, servlets

我有一个 jsp 页面，它导入另一个 jsp。此导入被包装到 div 标签中。我也有值为“true/false”的参数，它作为请求参数从 servlet 到达。我想知道使用请求参数值更改提到的可见性（在“style.display”属性的帮助下）的方法是什么。页面加载后，div 应该立即可见/不可见。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T17:23:52.927

如果您不想显示 JSP 片段（它可以是导入另一个 JSP 的片段），我会避免使用`"style.display`属性，我会这样做：

```
<c:if test="${myVariable}">
     // import jsp, whatever you want
</c:if> 
```

最好是导入 jsp 并将其隐藏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:18:07.870

您可以使用

```
<%
    if("true".equalsIgnoreCase((String)request.getAttribute("true"))){
%>
    <div class="message_div">
        // div given for style .. if div is not there too its fyn   
        //import jsp here
   </div>
<%  
   }    
%> 
```

# symfony - 将渲染响应设置为变量 twig Symfony2

> ID：11073277
> 
> 赞同：2
> 
> 时间：2012-06-17T17:17:30.467
> 
> 标签：symfony, twig

我有一个控制器函数，它返回一个带有值的响应，我想从 twig 调用这个控制器，所以我使用：

```
 {% render "UaePortailBundle:Note:isRempli" with { 'module_id' : module.id , 'year' : year } %} 
```

问题是我想将此返回值设置为变量“x”

我试过这个，但它不起作用。

```
 {% set x = {% render "UaePortailBundle:Note:isRempli" with { 'module_id' : module.id , 'year' : year } %} %} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T17:37:22.890

根据[文档](http://twig.sensiolabs.org/doc/tags/set.html)，您可以执行以下操作：

```
{% set x %}
    {% render "UaePortailBundle:Note:isRempli" with { 'module_id' : module.id , 'year' : year } %}
{% endset %} 
```

# php - 此 SQL 查询是否可以防止注入？

> ID：11073279
> 
> 赞同：1
> 
> 时间：2012-06-17T17:17:31.237
> 
> 标签：php, mysql, sql, sql-injection, security

下面的代码是用php编写的：

```
$user = addslashes($_POST['user']);
$pwd = addslashes($_POST['pwd']);

$query = "SELECT * FROM userdata WHERE UserName='$user' AND Password=PASSWORD('$pwd')"; 
```

然后查询将被发送到 mysql 还有什么我需要处理的吗？

请指出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T17:20:04.413

不，这不安全，[`mysql_real_escape_string`](http://us3.php.net/manual/en/function.mysql-real-escape-string.php)至少***使用***：

```
$user = mysql_real_escape_string($_POST['user']);
$pwd = mysql_real_escape_string($_POST['pwd']); 
```

为了**更好**的安全性，请使用[准备好的声明](http://php.net/manual/en/pdo.prepared-statements.php)。

***最佳****选择：*

*   [PDO](http://php.net/manual/en/book.pdo.php)
*   [mysqli](http://php.net/manual/en/book.mysqli.php)

您可能会问选择哪一个，请查看：

*   [mysql，mysqli和pdo有什么区别？](https://stackoverflow.com/questions/2190737/what-is-difference-between-mysql-mysqli-and-pdo)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T17:19:51.260

没有。

原因是，虽然单引号`'`不是破坏 sql 查询的唯一字符，但引号是唯一被`addslashes()`.

**更好**：使用`mysql_real_escape_string`

```
$user = mysql_real_escape_string($_POST['user'], $conn);
$pwd = mysql_real_escape_string($_POST['pwd'], $conn);

$query = "SELECT * FROM userdata WHERE UserName='$user' AND Password=PASSWORD('$pwd')"; 
```

**最佳**：使用 PDO 和准备好的语句

```
$stmt = $dbh->prepare("SELECT * FROM userdata WHERE UserName=':user' AND Password=PASSWORD(':pass')");
$stmt->bindParam(':user', $user);
$stmt->bindParam(':pass', $pass); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T17:20:34.380

不，您**不**应该`addslashes()`用来转义您的数据。这已经过时*多年*了。你应该是：

*   用作[`mysql_real_escape_string()`](http://us3.php.net/manual/en/function.mysql-real-escape-string.php)替代品
*   [在PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)中使用准备好的语句

加上使用 MySQL 的`Password()`功能也很不实用。使用带盐的哈希。Bcrypt 是我的推荐。另外，请查看[PHPPass](http://www.openwall.com/phpass/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T17:52:22.400

防止 SQL 注入很容易：

**过滤您的数据。**

这不能过分强调。有了良好的数据过滤，大多数安全问题都得到了缓解，有些问题实际上被消除了。

**引用你的数据。**

如果您的数据库允许（MySQL 允许），请在 SQL 语句中的所有值周围加上单引号，而不管数据类型如何。

**转义您的数据。**

有时有效数据会无意中干扰 SQL 语句本身的格式。使用`mysql_escape_string()`或转义特定数据库的本机功能。如果没有特定的，`addslashes()`是一个很好的最后手段。

阅读更多： http: [//phpsec.org/projects/guide/3.html#3.2](http://phpsec.org/projects/guide/3.html#3.2)

# python - HTTPError：401 客户端错误

> ID：11073282
> 
> 赞同：0
> 
> 时间：2012-06-17T17:17:42.930
> 
> 标签：python, oauth, soundcloud

我正在使用 Python soundcloud API 在我的 Web 应用程序中实现经过身份验证的用户的 soundcloud 视频。我遵循了这些步骤[http://developers.soundcloud.com/docs#authentication](http://developers.soundcloud.com/docs#authentication)，这是我第一次让一切正常。我刚从一开始就再次尝试了这些事情，现在我收到了**HTTPError: 401 Client Error** on this command`current_user = client.get('/me')`

我可以展示我已经完成的步骤。请检查此[https://gist.github.com/2945075](https://gist.github.com/2945075)

我收到此错误：

```
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "/usr/local/lib/python2.7/dist-packages/soundcloud-0.3-py2.7.egg/soundcloud/client.py", line 129, in _request
return wrapped_resource(make_request(method, url, kwargs))
File "/usr/local/lib/python2.7/dist-packages/soundcloud-0.3-py2.7.egg/soundcloud/request.py", line 180, in make_request
result.raise_for_status()
File "/usr/local/lib/python2.7/dist-packages/requests-0.10.1-py2.7.egg/requests/models.py", line 799, in raise_for_status
raise HTTPError('%s Client Error' % self.status_code)
HTTPError: 401 Client Error 
```

我怎样才能让这些东西发挥作用？谁能指导我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:09:39.557

您的代码看起来正确。只是为了健全性检查，这就是我所做的：

```
import soundcloud

client = soundcloud.Client(client_id='MY_CLIENT_ID',
                           client_secret='MY_CLIENT_SECRET',
                           redirect_uri='MY_REDIRECT_URI')
print client.authorize_url()

# visit authorization code in browser, grant access and copy and paste "code" param

code = 'MY_CODE'
access_token = client.exchange_token(code)

user = client.get('/me')
print user.username

# prints 'Paul Osman' 
```

需要注意的一些事情可能会让你绊倒：

1.  You don't have to recreate the client instance after calling `exchange_token()`. Doing so shouldn't hurt though.
2.  `exchange_token()` returns a Resource object with two properties (by default): `access_token` and `scope`.

Make sure when you're saving the access token that you're extracting the right property from the Resource object:

```
access_token = client.exchange_token('YOUR_CODE')
token = access_token.access_token 
```

Another thing to try is to print out the full response from client.exchange_code:

```
access_token = client.exchange_token('YOUR_CODE')
print access_token.fields() 
```

Hope that helps. Let me know if you're still experiencing problems and I'll edit my answer with more info.

# php - 使用 Google+ API (PHP) 如何使公共活动提要始终显示特定用户的数据，而不是当前登录的用户？

> ID：11073284
> 
> 赞同：0
> 
> 时间：2012-06-17T17:17:58.530
> 
> 标签：php, google-plus

我在我的服务器上设置了 Google+ API php 客户端，我能够提取我自己的提要活动，但这只是因为我授权了它。我想做的只是在我的个人网页上始终显示我的内容提要，一个小部件。

这很难吗？似乎它应该是直截了当的。我的PHP知识有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:34:06.153

这就是我所做的。

```
$client = new apiClient();
$client->setDeveloperKey($api_key);
$plus = new apiPlusService($client);
$person = $plus->people->get($plus_id);
$collection = 'public';
$activities = $plus->activities->listActivities($plus_id, $collection); 
```

SDK 中有一个示例说明了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:36:32.373

听起来您正在存储授予对用户数据访问权限的访问令牌，然后使用该访问令牌进行所有 API 调用。

当您的应用程序在生产中运行时，有多个用户访问它，您应该为每个用户进行身份验证并存储访问令牌。然后，您应该代表他们对所有请求使用用户的特定访问令牌。

重要的是你永远不要越过溪流。像对待机密用户信息一样对待访问令牌。不要将一个用户的令牌或使用该令牌的 API 调用结果暴露给其他用户。

# ruby-on-rails - 无法从 link_to 加载自定义控制器操作

> ID：11073287
> 
> 赞同：1
> 
> 时间：2012-06-17T17:18:45.353
> 
> 标签：ruby-on-rails, controller, link-to

我是一名 Rails 初学者，现在已经花了几个小时试图弄清楚为什么我的“生成新密码”链接，该链接应该在我的用户控制器中执行我的自定义 update_password 操作，然后将密码闪回到屏幕上（稍后我计划通过电子邮件或短信发送此内容，但现在可以这样做）继续执行创建方法/操作...我知道我有两个用于用户索引屏幕的 POST 方法...但无法理解（因为我甚至将它放在路由文件的第一个位置）为什么 create 是不断执行的那个。我知道它不会使用更新方法，因为我用调试器记录消息填充它，这些消息不会出现在任何地方。（并且日志记录处于活动状态，因为我看到了索引方法日志记录消息）

这是我正在做的事情：

routes.rb 文件提取：

```
match 'users?user_id=(:user_id)', to: "users#update_password", via: :post, as: "users_update_password" 
```

资源：用户

rake 路由（控制器用户）

```
users_update_password POST   /users?user_id=(:user_id)(.:format) users#update_password
            users GET    /users(.:format)                    users#index
                  POST   /users(.:format)                    users#create
         new_user GET    /users/new(.:format)                users#new
        edit_user GET    /users/:id/edit(.:format)           users#edit
             user GET    /users/:id(.:format)                users#show
                  PUT    /users/:id(.:format)                users#update
                  DELETE /users/:id(.:format)                users#destroy
           signup        /signup(.:format)                   users#new 
```

users_controller.rb

```
 def update_password
logger.info "Inside update_password"
logger.flush
password= generate_password()
logger.debug "Password is #{password}"
@user = User.find_by_id(params[:user_id])
logger.debug "user is #{@user}"
if @user.update_attributes(password:password, password_confirmation:password)
  logger.info "inside the if"
   flash[:notice] = "New password for user #{@user.name}: #{password}"
   logger.debug "Flash is #{flash}"
   redirect_to users_path
else
  logger.debug "I am on else of update_password"
  flash[:alert] = "Name: #{@user.name} password: #{password}"
  render 'index'
end 
```

结尾

```
def index
logger.info "Inside controller index method"
@users = User.paginate(page: params[:page]) 
```

结尾

_user.html.erb

```
<% if current_user.admin? && !current_user?(user) %>
 | <%= link_to "delete", user, method: :delete, confirm: "Are you sure?" %>
 | <%= link_to "Generate new password", users_update_password_path(:user_id=>user.id), method: :post, confirm: "Are you sure? This will reset current password" %>
<% end %> 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:46:14.857

如果您将此作为资源路由的成员，它可能会简化事情吗？

```
resources :users do
  member do
    post 'update_password'
  end
end 
```

然后路径助手可能看起来像

```
link_to "Generate new password", update_password_user_path(user), method: :post
# POST. /users/:id/update_password 
```

[http://guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:30:55.447

当您使用 HTTP POST 时，不会在 URL 中发送数据。您的路由正在 URL 中查找数据，这是通过 HTTP GET 完成的。因此，如果您想使用 POST，请将您的路线设置为：

```
post "users/update_password" => "users#update_password", :as => "users_update_password" 
```

# windows-phone-7 - Windows 8 上的 WP7 SDK

> ID：11073289
> 
> 赞同：8
> 
> 时间：2012-06-17T17:18:56.023
> 
> 标签：windows-phone-7, windows-8

是否可以在 Windows 8 Release Preview 上安装 WP7 SDK？我尝试使用[标准安装包](http://www.microsoft.com/en-us/download/details.aspx?id=29233)，但不断收到以下错误：

> 安装要求：
> 
> KB2669191 不适用，或被您计算机上的其他情况阻止。 有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=225649 。](http://go.microsoft.com/fwlink/?LinkId=225649)

我安装了 WP7 SDK 7.1，但在安装过程中出现了一些兼容错误。现在我可以为 WP7 启动 VS2010 但由于以下错误无法构建解决方案：

> 项目中不存在目标“GetCopyToOutputDirectoryContentProjectItems”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T13:28:02.923

以下链接提供了在 Windows 8 上安装和运行 WP7 sdk 所需执行的确切步骤：[Windows 8 上的 WP7 Sdk](http://blog.saraf.me/2012/09/install-windows-phone-7-sdk-on-windows-8.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T00:36:16.530

在 Win8 上开发 XNA/WP7：安装 Windows 8，然后是 Visual Studio 2012，然后是 Windows Phone 8 SDK，确保安装了 Windows 更新（因为 2012 年 11 月有一些很棒的 App Store 更新）。然后，移植您的 XNA 代码并创建一个新项目以获取您需要的 DLL 引用。DLL 将存在于 Silverlight 4 文件夹中，但不用担心，一旦您拥有 WP8 SDK，这一切都可以工作！！模拟器运行也很棒！这是将 XNA 代码导入 VS2012 的过程。

您可以从这里获取 SDK： [https ://dev.windowsphone.com/en-us/downloadsdk](https://dev.windowsphone.com/en-us/downloadsdk)

注意：XNA 游戏只能在 WP7 设备上运行。您需要 MonoGame 或类似的移植到 Win8 设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T17:23:11.290

您应该先安装 WPSDK 7.1，然后再安装 7.1.1 更新。检查页面底部的说明[。](http://www.microsoft.com/en-us/download/details.aspx?id=29233#instructions)

请参阅[安装 Windows Phone SDK](http://go.microsoft.com/fwlink/?LinkId=245453)。

更新：

我已使用上述链接中的 SDK 7.1 和 7.1.1，它们在 Windows 8 中运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T19:25:29.680

请继续安装 Windows 8 RTM，安装 RTM 后，安装 Visual Studio 2012，然后安装 WINdows Phone 8 SDK。现在使用此 SDK，您可以在 WP7 和 WP8 上工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-28T09:10:52.037

这篇文章解决了我的问题：http: [//blogs.msdn.com/b/astebner/archive/2012/02/29/10274694.aspx](http://blogs.msdn.com/b/astebner/archive/2012/02/29/10274694.aspx)

基本上是必要的安装：Windows 游戏 - 来自[http://www.xbox.com/en-US/LIVE/PC/DownloadClient](http://www.xbox.com/en-US/LIVE/PC/DownloadClient)的 LIVE Redistributable ，一切正常后 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-28T07:28:21.563

如果你没有，你可以安装 sdk update 7.1.1。它为我解决了这个问题

[下载 Windows Phone SDK 7.1.1 更新](http://www.microsoft.com/en-pk/download/details.aspx?id=29233&e6b34bbe-475b-1abd-2c51-b5034bcdd6d2=True)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-11T09:01:16.157

已知错误“GetCopyToOutputDirectoryContentProjectItems”来自 Silverlight，因此我建议您尝试在计算机上重新安装 Silverlight SDK。

来源：[GetCopyToOutputDirectoryContentProjectItems](http://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/0a6f3cdd-df5b-4b75-b58d-d51f995892db)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-03T18:38:25.610

这篇文章终于成功了。希望将其张贴在这里可以将某人从我一直在经历的恐怖中拯救出来，哈哈。解决方法包括安装 xbox live 市场，然后安装 wp7 sdk，XNA 将正常安装。

[http://windowsteamblog.com/windows_phone/b/wpdev/archive/2012/03/05/windows-8-and-the-windows-phone-sdk.aspx](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2012/03/05/windows-8-and-the-windows-phone-sdk.aspx)

这将使警告错误消失。要解决模拟器问题，您必须下载 windows phone sdk 7.1.1，这是您在安装时遇到问题的 7.1 sdk 的更新

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-18T20:26:48.627

卸载 Windows Phone **7.1 RC SDK**，然后安装**7.1 RTW SDK**，然后是 7.1.1 SDK。一切都会好起来 [的 这个链接 7.1 RTW](http://www.microsoft.com/en-us/download/details.aspx?id=27570)

[这适用于 7.1.1](http://www.microsoft.com/en-us/download/details.aspx?id=29233)

祝你好运 ：）

# windows - Cygwin 和 MinGW 上的 Vim

> ID：11073291
> 
> 赞同：1
> 
> 时间：2012-06-17T17:19:46.817
> 
> 标签：windows, vim, cygwin, mingw

我曾尝试在 Cygwin 和 MinGW 上都使用 Vim，但很多时候这些字符的行为方式无法预测（退格键不会删除，不能有半列，等等......）。我想知道这是否与那些系统有关，或者是否可能是我自己的系统/设置的问题（例如，我需要调整一些设置，定义字符编码等）。我在 Windows 7 64 位

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:29:32.917

Cygwin CMD 模拟器与 Vim 有一个已知问题。似乎是一个重绘问题。显然修复它会破坏 Cygwin 所依赖的某些 exe 的执行。许多用户选择使用另一个终端仿真器。我发现分页和备份修复了重绘，但有时我必须退出 Vim 并重新启动。

PuTTYcyg 是 PuTTY 的修补版本，除了 telnet、rlogin、ssh 和串行连接之外，还可以用作本地 Cygwin 终端，而不是 Windows 控制台或 xterm。有关更多信息，请参阅 PuTTYcyg 网站上的 README.txt。

要使用 rxvt：@echo off C:chdir C:\cygwin\bin set EDITOR=vi set VISUAL=vi set CYGWIN=codepage:oem tty binmode title rxvt -sr -sl 10000 -fg white -bg black -fn fixedsys -fb fixedsys -tn cygwin -e bash --login -i

Mintty 是 Cygwin 和 MSYS 的终端仿真器。在 Cygwin 中，它由 Cygwin 的 setup.exe 作为默认终端安装。在 MSYS 中，可以使用命令 mingw-get install mintty 安装 mintty 包。或者，可以在 Minitty 下载页面上找到 Cygwin 1.7、1.5 和 MSYS 的二进制文件。

# emacs - 解码 90 年代的韩文文本文件

> ID：11073292
> 
> 赞同：6
> 
> 时间：2012-06-17T17:19:47.257
> 
> 标签：emacs, encoding, utf-8, character-encoding

我收集了 90 年代中期创建的 .html 文件，其中包括大量韩文文本。HTML 缺少字符集元数据，因此当然所有韩文文本现在都无法正确呈现。以下示例都将使用相同的文本摘录。

### 在 Coda 和 Text Wrangler 等文本编辑器中，文本显示为

> ╙╦ ╝№бя└К ▓щ╥НВь╕цль▒Ф ▓щ╥НВь╕цль▒Ф

在 <head> 中没有字符集元数据的情况下，浏览器将其呈现为：

> ÓË ¼ü¡ïÀŠ ²éÒ,ì¸æ«ì±” ²éÒ,ì¸æ«ì±”</p>

### 将 euc-kr 元数据添加到 <head>

```
<meta http-equiv="Content-Type" content="text/html; charset=euc-kr"> 
```

产生以下内容，这是难以辨认的废话（由母语人士验证）：

> 沓 숩∽핅 꿴�귥멩レ콛 꿴�귥멩レ콛

我已经对所有具有历史意义的韩语字符集尝试了这种方法，每个都产生了同样不成功的结果。我还尝试通过 Beautiful Soup 解析和升级到 UTF-8，但也失败了。

**在 Emacs 中查看文件**似乎很有希望，因为它显示了较低级别的文本编码。以下是相同的文本示例：

> \323\313\274\374\241\357\300\212\262\351\322\215\202\354\270\346\253\354\261\224\262\3\ 51\322\215 \202\354\270\346\253\354\261\224

如何识别此文本编码并将其提升为 UTF-8？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T17:36:57.087

emacs 显示的所有八进制代码都小于 254（或八进制中的 \376），因此它看起来像是那些旧的 pre-Unicode 字体之一，它只是在 ASCII 范围内使用了它自己的映射。如果这是正确的，您只需要尝试找出它的用途，找到它并自己进行转换。

这是一种痛苦。许多年前，我为一些流行的 pre-Unicode 希腊字体做了类似的事情：http: [//litot.es/unicode-converter/](http://litot.es/unicode-converter/)（代码：[https](https://github.com/seanredmond/Encoding-Converter) ://github.com/seanredmond/Encoding-Converter ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:52:00.900

最后，它是关于找到正确的字符编码和使用 iconv。

```
iconv --list 
```

显示所有可用的编码。搜索“KR”显示至少我的系统可以执行 CSEUCKR、CSIISO2022KR、EUC-KR、ISO-2022-KR 和 ISO646-KR。根据维基百科，韩语也是 BIG5HKSCS、CSKSC5636 和 KSC5636。尝试所有这些，直到出现一些合理的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-31T17:42:56.083

即使这个线程很旧，它仍然是一个问题，并且没有找到批量转换文件的方法（除了使用韩语版本的 Windows7），现在我正在使用 Naver，它有一个像谷歌文档这样的云服务如果你在那里上传那些奇怪的编码文件，它会很好地处理它们。我只是编辑和复制文本，当我将它复制到其他地方时，它又恢复了标准。不是我喜欢的那种解决方案，但它可能会节省一些路人。您可以使用 ID 注册云帐户，即使您不居住在韩国，也可以通过一些最低限度的英语。

# html - SublimeText2 中更好的自动完成功能？

> ID：11073298
> 
> 赞同：-1
> 
> 时间：2012-06-17T17:20:31.543
> 
> 标签：html, sublimetext2

基本上我是通过本教程学习 HTML/CSS 的：

[http://www.youtube.com/watch?v=o1Vqr1MdRmg&feature=player_detailpage#t=170s](http://www.youtube.com/watch?v=o1Vqr1MdRmg&feature=player_detailpage#t=170s)

现在在链接时间，请注意叙述者（在 Mac 上使用 SublimeText2）如何获得一个弹出窗口以自动完成属性 text-decoration="" 的值。我在 Windows 64 位上使用 ST2，但我没有得到任何这样的弹出窗口。我也浏览过 ST2 的设置文件，但没有找到启用此类功能的任何选项？

如何让 ST2 自动完成属性及其值？目前它只使用标签。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:23:49.983

```
text-decoration:blahblah; 
```

这是正确的 CSS 语法。试试看！

# php - 使用 ASIHTTPRequest 从 iOS 上传图像

> ID：11073302
> 
> 赞同：2
> 
> 时间：2012-06-17T17:20:45.363
> 
> 标签：php, mysql, ios, image, upload

我的应用程序在注册时上传图像和用户/电子邮件/通行证。iOS 到 php 到 mySQL。电子邮件、用户和密码和图像名称可以很好地保存到数据库中。它只是没有上传到服务器上文件夹的图像。所以它只是我的代码中失败的那部分，但任何人都可以看到哪里？我的服务器上有这段代码：

```
<?
include"master_inc.php";
//--------------------------------------------------------------------------RECEIVE LOCAL VARIABLES FROM FORM
$lastname = strip_tags(substr($_POST['lastname'],0,32));
$firstname = strip_tags(substr($_POST['firstname'],0,32));
$phone = strip_tags(substr($_POST['phone'],0,32));
//$image = $_POST['image'];
$photo=($_FILES['photo']['name']); 

$password_hint=$_REQUEST['password_hint'];
$noERROR=1;
$udidposted = 9;

//---------------------------------------------------------------------------CHECK IF USERNAME IS LONG ENOUGH
$username = strip_tags(substr($_POST['username'],0,32));
if(trim($username)!=='' && strlen(trim($username)) >= 4){
//---------------------------------------------------------------------------IF LONG ENOUGH THEN RUN A QUERY GETTING ALL DATA FROM THAT USER
$sql="SELECT * FROM users WHERE username='$username'";
$result=mysql_query($sql);
$count=mysql_num_rows($result);
//---------------------------------------------------------------------------IF $sql GOTTEN HAS ROW COUNT > 1 THEN USER ALREADY EXISTS----------------SET EXISTING USER 104 FLAG
if($count>0){
$username_already_in_use = 3141;
}
//---------------------------------------------------------------------------ELSE USERNAME IS TOO SHORT?!?!-------------------------------------------------------SET USER TOO SHORT 104 FLAG
}else{
$username_too_short = 3142;}

//---------------------------------------------------------------------------EMAIL FORMAT CHECK
$email_raw = $_REQUEST['email'];
if(eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@([a-z0-9-]{2,3})+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $email_raw))
{ 
$email = $email_raw;
}else{
//---------------------------------------------------------------------------IF INVALID EMAIL THEN----------------------------------------------------------------------SET INVALID EMAIL 104 FLAG
$bad_email=3143;
} 

//email unique?
$sql="SELECT * FROM users WHERE email='$email'";
$result=mysql_query($sql);
$count=mysql_num_rows($result);
if($count>0){
//---------------------------------------------------------------------------IF SQL FOR EMAIL RETURNS A ROW THEN------------------------------------------------SET EMAIL 104 FLAG
$email_already_in_use=3144;
}

//Secure Password Format Checks
$pw_clean = strip_tags(substr($_POST['password'],0,32));
if (preg_match("/^.*(?=.{4,})(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).*$/", $pw_clean, $matches)) {
}else{
//---------------------------------------------------------------------------IF PW NOT IN FORMAT THEN-----------------------------------------------------------------SET PW 104 FLAG
$pw_insecure = 3145;
}

//---------------------------------------------------------------------------IF ERROR FLAGS ARE SET THEN LOG HEADERS----------------------------
if($username_already_in_use==3141 OR $email_already_in_use==3144 OR $pw_insecure==3145 OR $bad_email==3143 OR $username_too_short==3142){
header(
"location:user_add_errors.php?pw_insecure=$pw_insecure&email_already_in_use=$email_already_in_use&username_already_in_use=$username_already_in_use&bad_email=$bad_email&username_too_short=$username_too_short"); 
die();
}
else {header("location:user_add_errors.php?noERROR=$noERROR");}

//End Error Checks________________________

//-------------------------------------------------------------------INSERT INTO SQL
//Encrypt Password
$encrypted_pw = md5($pw_clean);
$query = "INSERT INTO `users` (`username`,
`password`,
`lastname`,
`firstname`,
`email`,
`phone`,
`password_hint`,
`udid`,
`userCreated`,
`photo`)
VALUES
(
'$username',
'$encrypted_pw',
'$lastname',
'$firstname',
'$email',
'$phone',
'$password_hint',
'$udidposted',
now(),
'$photo')"; 
// save the info to the database
$results = mysql_query( $query );

//-----------------------CODE FOR SAVING IMAGE STARTS
//This is the directory where images will be saved 
 $target = "images/"; 
 $target = $target . basename( $_FILES['photo']['name']); 

 //This gets all the other information from the form 
 $photo=($_FILES['photo']['name']); 

 //Writes the photo to the server 
 if(move_uploaded_file($_FILES['photo']['tmp_name'], $target)) 
 { 

 //Tells you if its all ok 
 echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded, and your information has been added to the directory"; 
 } 
 else { 

 //Gives and error if its not 
 echo "Sorry, there was a problem uploading your file."; 
 } 
//-----------------------CODE FOR SAVING IMAGE ENDS

// print out the results
if( $results )
{
    if($username_too_short==3142){echo"ShortUser=".$username_too_short;}

    if($username_already_in_use==3141){echo"UserTaken=".$username_already_in_use;}

    if($email_already_in_use==3144){echo"EmailTaken=".$email_already_in_use;}

    if($pw_insecure==3145){echo"ShortPass=".$pw_insecure;}

    if($bad_email==3143){echo"BadEmail".$bad_email;}

//echo( "<font size='2' face='Verdana, Arial, Helvetica, sans-serif'>Your changes have been made sucessfully. <br><br><a href='login.php'>Back to login</a></font> " );
}
else
{
die( "Trouble saving information to the database: " . mysql_error() );
}
//--------------------------------------AGAIN?! THIS IS FOR THE FIRST ENTRY I THINK
$sql="SELECT * FROM users";
$result=mysql_query($sql);
$count=mysql_num_rows($result);
if($count==1){

$query = "UPDATE `users` SET `permissions`='5' WHERE `email`='$email'"; 
//---------------------------------------SAVE the info to the database
$results = mysql_query( $query );
//---------------------------------------JUST PRINT CODE
if( $results )
{ echo( "ADMINCREATED" );
}
else
{
die( "ERRORSAVINGADMIN" . mysql_error() );
}

}
?> 
```

我很确定我的 iOS 代码工作正常：

```
-(void)callASIHTTP{

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.myserver.com/learn/login/user_save2.php"]];    
    // Upload an NSData instance
    NSData *imageData = UIImageJPEGRepresentation(self.pickedImage, 90);

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request addPostValue:self.userName.text forKey:@"username"];
    [request addPostValue:self.userPass.text forKey:@"password"];
    [request addPostValue:self.userEmail.text forKey:@"email"];
    [request addData:imageData withFileName:self.userName.text andContentType:@"image/jpeg" forKey:@"photo"];

    //check if passedData is nil
    if (imageData == nil) {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"title:iDnil" message:@"msg:iDnil" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertView show];
        [alertView release];
    }

    //completion blocks
    [request setCompletionBlock:^{
        NSString *responseString = [request responseString];
        if (responseString == nil) {
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"title:rStrg" message:@"msg:rStrg" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alertView show];
            [alertView release];
        }
    }];
    [request setFailedBlock:^{
        NSError *error = [request error];
        NSLog(@"Error: %@", error.localizedDescription);
    }];

    [request startAsynchronous];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:26:31.380

我知道你的问题..我遇到了类似的问题..您必须提供图像的路径..以下代码将从路径中获取图像..如果图像在您的目录索引中，您必须获取路径有点不同..试试这个，让我知道..

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
        NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
        NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"photo.jpg"];
[request setFile:[NSURL URLWithString:dataPath] forKey:@"photo"];

//IF the photo is in directory index use the following code to get the url
NSString *filename = [[NSBundle mainBundle] pathForResource:@"photo" ofType:@"png"];
[request setFile:[NSURL URLWithString:filename] forKey:@"photo"]; 
```

好的，这是您必须为 UIImagePicker 编写的代码

```
- (void) imagePickerController:(UIImagePickerController *)thePicker didFinishPickingMediaWithInfo:(NSDictionary *)imageInfo 
{
    imagePicker = nil;

    UIImage *image = [imageInfo objectForKey:@"UIImagePickerControllerEditedImage"];
    image = [image roundedCornerImage:23.5 borderSize:1];

    // Get the data for the image as a JPEG
    NSData* imageData = UIImageJPEGRepresentation(image, 0.5);

    // Give a name to the file
    NSString* imageName = @"photo.png";

    // Now, we have to find the documents directory so we can save it
    // Note that you might want to save it elsewhere, like the cache directory, or something similar.
    NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* documentsDirectory = [paths objectAtIndex:0];

    // Now we get the full path to the file
    NSString* fullPathToFile = [documentsDirectory stringByAppendingPathComponent:imageName];
    [imageData writeToFile:fullPathToFile atomically:NO];
    myPicture = imageData;
    myPicturePath = fullPathToFile;    

    // Dismissing the image picker view
    [self dismissModalViewControllerAnimated: YES];
} 
```

上传图像时使用此代码..您将从图像选择器中设置 myPicture 路径..

```
Request setFile:myPicturePath forKey:@"photo"]; 
```

下面的代码是从文档目录中获取图片并发送..

```
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                NSString* documentsDirectory = [paths objectAtIndex:0];

                // Now we get the full path to the file
                NSString* fullPathToFile = [documentsDirectory stringByAppendingPathComponent:@"photo.png"];
                [imageData writeToFile:fullPathToFile atomically:NO];

                [Request setFile:fullPathToFile forKey:@"photo"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:37:35.710

我知道这很愚蠢，但我遇到了类似的问题，只是发现它是 Web 服务器上的文件夹权限。

# postgresql - 列长度 的 PSQL 异常

> ID：11073303
> 
> 赞同：0
> 
> 时间：2012-06-17T17:20:48.483
> 
> 标签：postgresql, jpa, eclipselink, lob

`internal exception: org.postgresql.util.PSQLException: Error value too long for varying character (255)`当我尝试使用 EclipseLink JPA 插入某个实体的描述值时，我得到一个值。我认为使用`@LOB`注释并在列上设置最大长度将按如下方式处理它：

```
@Size(min = 0, max = 9000)
@Lob
@Column(name = "description", length = 2000)
private String description; 
```

但这并不能解决问题，我如何指定我想要此列的非绑定长度，因为它可能非常大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:50:06.517

事实证明，我必须重新创建所有表才能使此效果起作用，`@Lob`并在 postgresql 中声明文本类型。

# c - C语言中的静态函数真的不可见吗？

> ID：11073306
> 
> 赞同：3
> 
> 时间：2012-06-17T17:21:25.650
> 
> 标签：c

`static`有人告诉我，在一个文件中定义的函数`.c`不能从其他文件访问。但在下面的程序中，我可以`static void show()`从另一个文件访问该函数。我对`static`C 函数的理解是错误的吗？

啊（第一个文件）：

```
static void show()
{
printf("I am in static show function in a.c");
} 
```

bc（另一个文件）：

```
#include"a.h"
void main()
{
show();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T17:36:51.793

请记住，这`#include`是通过复制和粘贴包含文件的内容来实现的。因此，在您的示例中，`#include`处理完之后，您会得到以下信息：

```
static void show()
{
printf("I am in static show function in a.c");
}

void main()
{
show();
} 
```

如此清晰`main`可见`show`。¹

解决方案是**不** `#include`使用.c 文件。通常，您应该只使用`#include`标头 (.h) 文件。您的静态函数不应在头文件中声明或定义，因此`main`将无法看到它。

* * *

[1\. 但是，您现在实际上有**两个**函数定义`show`，一个 in`a.c`和一个 in `b.c`。对于`static`函数，这不是问题，但对于非`static`函数，您会收到链接器错误。]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-17T17:24:05.990

`static`关键字将链接规范更改为***[内部链接](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)***。
标记为的函数`static`仅在该***[Translation Unit(TU)](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)****中可见*。

也许，您在访问该功能的特定 TU 中有相同的命名符号可用。其中的部分只有在您向我们展示代码后才能回答。

**编辑：**
当您`static`在头文件中定义一个函数时，将在包含它的每个翻译单元中创建相同函数的副本。此类函数的每个实例都被视为一个单独的函数（*每个函数的地址不同*）并且每个这些函数的实例有自己的`static`局部变量和字符串文字的副本。

显然，这将起作用，但这也可能会增加生成的二进制文件的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T18:24:57.803

其他答案是正确的，但说静态函数不能从另一个文件访问并不十分准确。可以通过函数指针访问函数。更准确地说，该函数的*名称*在另一个翻译单元中是不可访问的。

请记住，将 C 源代码转换为可执行程序包括概念阶段，包括：

1.  预处理（其中`#include`指令被包含文件的内容替换
2.  编译（一次处理一个翻译单元）
3.  链接（将翻译单元组合到最终程序中）

假设我们有三个文件。 `foo.h`：

```
typedef void (*void_function_p)(void);

extern void_function_p foo(void); 
```

`foo.c`：

```
#include "foo.h"
#include <stdio.h>

static void baz(void) {
    printf("worked!\n");
}

void_function_p foo(void) {
    return baz;
} 
```

`bar.c`：

```
#include "foo.h"
#include <stdio.h>

int main(void) {
    (*foo())();
    return 0;
} 
```

该程序编译并打印“工作！” 当它运行时。

这里有两个翻译单元。一种是预处理中的代码`foo.c`（由于其`#include`工作原理，它还包括 和 中的代码`foo.h`）`stdio.h`。另一个是预处理中的代码（同样，它在and`bar.c`中有自己的代码副本）。`foo.h``stdio.h`

通过让函数`foo`返回指向静态函数的指针`baz`，我们可以`baz`从`main`函数中调用。

现在，考虑如果我们修改`main`为如下所示会发生什么：

```
int main(void) {
    (*foo())();
    baz();
    return 0;
} 
```

此代码将导致链接器错误，因为`baz`此翻译单元中的名称无法链接到`baz`其他翻译单元中的定义。

这是静态函数的第一个优点：另一个程序员不会意外地`baz`从另一个翻译单元访问我们的函数。

现在，考虑如果我们修改`bar.c`为如下所示会发生什么：

```
#include "foo.h"
#include <stdio.h>

static void baz(void) {
        printf("still works!");
}

int main() {
        (*foo())();
        baz();
        return 0;
} 
```

此代码将编译并打印“工作！” 其次是“仍然有效！”

这是静态函数的第二个优点：我们定义了两个同名的函数（在不同的翻译单元中）。

如果您尝试将两个静态定义放在同一个翻译单元中，您将收到关于定义`baz`两次的编译器错误。

最后要注意的是，如果您使用现在的程序并删除所有`static`s，则会导致链接器错误，因为`baz`已经定义了两次（使用外部链接），这是不允许的。

# php - 在 WP 子主题中过滤

> ID：11073307
> 
> 赞同：0
> 
> 时间：2012-06-17T17:21:26.343
> 
> 标签：php, wordpress, function, filter

我在我的 childtheme 的 functions.php 中添加了这个过滤器：

```
function tp_edit_ad_columns( $columns ) {
    $columns['test'] = 'Something in title...';

    return $columns;
}
add_filter('manage_edit-'.APP_POST_TYPE.'_columns', 'tp_edit_ad_columns', 11 ); 
```

谁能解释为什么它不起作用？如果将相同的功能/过滤器放在主题的functions.php中，它就可以工作。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:59:20.593

这不是核心过滤器。

所以它可能是在父主题中创建的。
由于某种原因，它被您的孩子主题拒绝了。

在父主题中搜索`apply_filter`或`manage_edit`查找何时应用此过滤器。
从那里你必须提供更多信息

# qt - QGLWidget。绘制时更新显示。

> ID：11073308
> 
> 赞同：1
> 
> 时间：2012-06-17T17:21:31.183
> 
> 标签：qt, opengl, qglwidget

每个文件都包含我要显示的 3D 点。我想在读取每个文件后查看显示。在 file1 之后，我想在从 file2 添加更多点之前查看这些点。在从 file3 添加更多点之前，我想查看文件 1 和 2 中的点。

如何使用 QGLWidget 函数做到这一点？

我四处搜寻，发现了 updateGL() 函数。我想每次在添加新点之前都更新绘图功能，但这效率低下。有什么方法可以保存上下文（或它叫什么）？

我正在使用库 libQGLViewer，它使用 QGLViewer 类，继承自 QGLWidget。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:11:18.093

`updateGL()`每次想要重绘视口时都应该调用。

即使是基本的现代 GPU 也可以渲染数百万个点，因此不必担心效率低下 - 从文件加载点数据将比渲染它们慢几个数量级。

# java - 符合是否在 android 中添加了首选项

> ID：11073313
> 
> 赞同：-1
> 
> 时间：2012-06-17T17:22:41.307
> 
> 标签：java, android, sharedpreferences

我正在尝试将首选项存储在“pref.xml”文件中。我使用以下代码来执行此操作。

```
SharedPreferences pref=getSharedPreferences(pref_file,Context.MODE_PRIVATE);
        SharedPreferences.Editor add=pref.edit();
        add.putString("password",usrpass); 
```

现在我想检查它是否已存储。我该怎么做。我不想在我的代码中这样做。我只想在我的文件中手动检查它。运行代码后我的文件如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
    <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
        <CheckBoxPreference android:defaultValue="true"
             android:key="@string/first"/>
        <Preference android:key="@string/pass"/>
    </PreferenceScreen> 
```

在这里我看不到存储的任何密码值。关于此的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:39:04.287

您在“pref.xml”中没有看到任何变化的原因是它只是一个用于构建（视觉）首选项屏幕的资源文件。

实际的首选项保存在一个名为“pref_file”（或您决定如何称呼它）的文件中，该文件位于文件夹“/data/data/(app package name)/shared_prefs/”中。

要提取它，您可以使用 adb（在 Android SDK 子文件夹“platform-tools”中）和命令“pull”...

这是我为简化工作而制作的一个小型 Windows BAT 脚本：

```
 @echo off
    title Retrieve application preferences
    cd C:\Android\android-sdk\platform-tools
    adb pull "/data/data/com.tovine.alcotool/shared_prefs/com.tovine.alcotool_preferences.xml" "C:\Android\Extracted app data\shared_prefs.xml"
    echo Application preferences extracted, see "Extracted app data" folder
    pause
    exit 
```

如果您愿意，您可以修改它以适合您的应用程序并自由使用它... :)

# sql - 没有分组依据的 MAX 函数

> ID：11073321
> 
> 赞同：15
> 
> 时间：2012-06-17T17:24:09.310
> 
> 标签：sql, sql-server

我有下表：

```
ID | NUM
 1 |  4
 2 |  9
 3 |  1
 4 |  7
 5 |  10 
```

我想要一个结果：

```
ID | NUM
 5 | 10 
```

当我尝试使用 MAX(NUM) 时，我得到一个错误，我必须使用 GROUP BY 才能使用 MAX 函数

任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T17:34:47.333

根据错误，如果选择列表中有任何非聚合列（在您的情况下，您试图找到然后返回列中关联的值） ，则使用类似的聚合`Max`需要一个子句。在 MS SQL Server 中，您可以通过排序和限制返回的行来获得所需的内容：`Group By``MAX(Num)``ID`

```
SELECT TOP 1 ID, NUM 
FROM [table] 
ORDER BY NUM DESC; 
```

在其他 RDBMS 系统中，它`LIMIT`提供了类似的功能。

**编辑**

如果您需要返回所有具有相同最大值的行，请使用[`WITH TIES`限定符](https://docs.microsoft.com/en-us/sql/t-sql/queries/top-transact-sql)：

```
SELECT TOP 1 WITH TIES ID, NUM 
FROM [table] 
ORDER BY NUM DESC; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-17T17:31:24.963

可能返回超过 1 个结果：

```
SELECT id, num
  FROM table
  WHERE num = (SELECT MAX(num) FROM table) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-18T03:38:17.190

试试这个查询。

```
 WITH result AS 
    (
      select DENSE_RANK() OVER(  ORDER BY NUM desc) AS RowNo,ID,NUM from #emp 
     )
    select ID,NUM from result where RowNo=1 
```

即使它有更多的 MAX 值，它也会返回最大值，例如：

```
ID | NUM
 5 | 10
 6 | 10 
```

请参阅以下链接以了解有关排名功能的更多信息：http:
[//msdn.microsoft.com/en-us/library/ms189798](http://msdn.microsoft.com/en-us/library/ms189798)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T17:29:02.800

怎么样：

```
SELECT TOP 1 ID,NUM FROM table ORDER BY NUM DESC; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-17T17:29:46.187

做这个 -

```
SELECT TOP 1 ID,
       NUM
FROM <yourtable>
ORDER BY NUM DESC; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-20T17:36:43.063

获取所有行都有最大值但有 3 个选择，这对性能不利

```
SELECT id, MAX(num) as num
FROM table
GROUP BY id
ORDER BY MAX(num) DESC
LIMIT (SELECT COUNT(*) 
       FROM table 
       WHERE num =(SELECT MAX(num) FROM table)
       ) 
```

# java - 来自 onPostExecute() 内部的 startActivity() 不起作用

> ID：11073322
> 
> 赞同：0
> 
> 时间：2012-06-17T17:24:13.163
> 
> 标签：java, android, json, android-asynctask

我正在做一个 HttpPost 以使用异步任务从 php 服务器获取数据。基本上，php 脚本要么返回 JSON 数组，要么返回 null。当返回 json 数组时它工作正常，但是如果脚本返回 null 我的 if 语句没有被拾取并且我被返回这个错误：

解析数据 org.json.JSONException 时出错：org.json.JSONObject$1 类型的值 null 无法转换为 JSONArray

这是我的脚本的一个片段：

```
 @Override
        protected Void doInBackground(String... params) {
            String url_select = "http://localhost/test.php";
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url_select);
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
        nameValuePairs.add(new BasicNameValuePair("id", id));
            try {
                httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                //read content
                is =  httpEntity.getContent();  

            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection "+e.toString());
                }

            try {
                BufferedReader br = new BufferedReader(new InputStreamReader(is));
                StringBuilder sb = new StringBuilder();
                String line = "";
                    while((line=br.readLine())!=null){
                        sb.append(line+"\n");
                    }
                is.close();
                result=sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "Error converting result "+e.toString());
            }
            return null;

        }

        protected void onPostExecute(Void v) {

        if(result == "null"){
         this.progressDialog.dismiss();
             startActivity(new Intent(viewRandom.this, allDone.class));
        }else{

        try {
            JSONArray Jarray = new JSONArray(result);
            for(int i=0;i<Jarray.length();i++){
                JSONObject Jasonobject = null;
                Jasonobject = Jarray.getJSONObject(i);
                String id = Jasonobject.getString("id");
        }
            this.progressDialog.dismiss();

        } catch (Exception e) {
            Log.e("log_tag", "Error parsing data "+e.toString());
        }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:26:54.767

更改`if(result == "null")`为`if(result == null)`。

如果要检查字符串`"null"`，请使用`.equals()`：`if ("null".equals(result))`

我不确定您是否真的从服务器发回了“null”字符串，但无论如何。由于您可能结束返回`null`（不是字符串！），您也应该检查它。

编辑：为什么`"null".equals(result)`优于`result.equals("null")`？答案是：第一个是 null 安全的，这意味着它在为 null 时不会抛出 NullPointerException `result`。在这种情况下，第二个将导致异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:46:43.740

而不是返回 null 您应该尝试将 Integer 值返回给 onPostExecute 类似这样的东西

```
@Override
public Integer doInBackground(String...params){
    .......
    .......
    return 1;
}

protected void onPostExecute(Integer v) {
    if(v==1) {
    }
} 
```

# c# - Xpath - 基于多个标准的选择

> ID：11073324
> 
> 赞同：4
> 
> 时间：2012-06-17T17:24:29.853
> 
> 标签：c#, xpath

我有以下 XML 文件：

```
<persons>
   <person name="shawn">
      <age>34</age>
      <hair style="spikes">red</hair>
    </person>
    <person  name="mike">
       <age>36</age>
       <hair style="bald">red</hair>
    </person>
    <person name="shawn">
       <age>38</age>
       <hair style="bald">red</hair>
    </person>
</persons> 
```

在C#中使用XPath，是否可以选择名称为“Shawn”且发型=“bald”的person元素？

我尝试使用：

```
XElement.XPathSelectElement("//person[@name='shawn'] | //person/hair[@style='bald'] 
```

但这给了我对头发元素的引用，而不是人元素。

提前致谢 ：）

彼得

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T17:26:49.387

如果你想要一个既叫肖恩又秃头的人（你的问题标题暗示了这一点），你想要：

```
//person[@name='shawn' and hair/@style='bald'] 
```

如果您想要被称为肖恩或秃头的人（看起来您可能会从您的问题的尝试中做到这一点），您想要：

```
//person[@name='shawn' or hair/@style='bald'] 
```

# fortran - 在 Fortran 77 中使用 COS() 和 SIN() 的奇怪行为

> ID：11073335
> 
> 赞同：0
> 
> 时间：2012-06-17T17:26:28.810
> 
> 标签：fortran

我在 Fortran 77 中使用 COS() 和 SIN() 库时遇到了一些奇怪的行为。它选择执行它的操作的数字，如下所示：

```
DATA V , THETA , PI / 100 , 45 , 3.1416 /

THETA = THETA * PI/ 180.0
PRINT *, "THETA = " , THETA

VX = V * COS ( THETA )
VY = V * SIN ( THETA )

PRINT *, VX , VY 
END 
```

当我检查它时，我发现

> COS(THETA) = COS(45)

不是

> COS(0.7853)

SIN() 也是如此。那么为什么会这样呢？

这是我的输出：

> THETA = 0.785400
> 
> ```
>  70.7105    70.7108 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:34:43.160

这些是正确的结果。您将 45 度的 cos（转换为弧度）乘以 100，45 度（或 pi/4 弧度）的 cos 为 0.7071067，因此打印输出的预期值为 70.7106。

SIN 和 COS 函数以弧度表示参数。您使用正确的公式将输入值从度数转换为弧度，它为您提供了这些转换值的正确结果。

我很好奇您如何进行正确的转换，却没有意识到您做了正确的事情并得到了正确的答案。您是否从其他地方获取此代码？

# c# - 访问被没有基本关键字的静态变量隐藏的实例变量

> ID：11073338
> 
> 赞同：2
> 
> 时间：2012-06-17T17:27:04.220
> 
> 标签：c#, inheritance, hidden-field

为什么我无法访问行中的隐藏实例变量 a (int gimmeValue = shinyNewBObject.a;) ？我知道我可以使用 base 关键字来访问实例 a。但是，我认为编译器会使用 shinyNewBObject 中的对象引用来排除静态变量。如果排除了 a 的静态版本，则 a 的实例版本将变得不隐藏，因此可以访问。

这里发生了什么？编译器是否创建了程序集中所有 a 身份的列表并排除了实例变量，因为它在排除另一个 a 因为它是静态的之前是隐藏的？

```
class A
{
    public int a;
}

class B : A
{
    new public static int a;

    public void m()
    {
        B shinyNewBObject = new B();
        int gimmeValue = shinyNewBObject.a; //Error
        gimmeValue = base.a;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T17:35:55.137

我不完全确定 C# 规范的哪一部分规定了为什么当基类型变量被子类中的静态字段遮挡时它不允许您访问它，但要解决它，您可以强制转换为`A`：

```
int gimmeValue = ((A)shinyNewBObject).a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T20:18:45.463

我想我找到了答案：

我需要查看规范（7.4）的成员查找部分。

“查找规则的效果只是派生成员隐藏了具有相同名称或签名的基础成员。这种单继承查找永远不会模棱两可。”

我认为当编译器考虑 aobj.a 时会发生什么 aobj 暂时被忽略而只考虑 a 。

编译器转到 A 类定义，该类定义隐式或显式地具有所有静态和实例成员，并看到两个 a 成员。两者都可以基于 (3.5) 访问，因此它们属于可能性集合。然后隐藏变量被删除，留下静态变量。

最后考虑'aobj'并发生错误，因为实例引用无法访问静态变量。

我的故事可能有一些问题。如果是这样，请纠正我，因为我做了一些猜测。

# android - onItemClicklistener 在自定义列表视图中不起作用

> ID：11073346
> 
> 赞同：-1
> 
> 时间：2012-06-17T17:27:48.110
> 
> 标签：android, onitemclicklistener

我已经设置`onItemClicklistener`了我的自定义列表视图但`onItemClicklistener`没有工作我也尝试了自定义列表视图的设置`focusable="false"`和`focusableInTouchMode="false"`控件。我也看到了相关的问题，但没有帮助。

请帮忙

```
 public class SwipingActivity extends Activity {
 public OnTouchListener gestureListener;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ListView lv = (ListView)findViewById(R.id.mylistview);

        gestureListener = new View.OnTouchListener() {
            private int padding = 0;
            private int initialx = 0;
            private int currentx = 0;
            private  ViewHolder viewHolder;
            public boolean onTouch(View v, MotionEvent event) {
                if ( event.getAction() == MotionEvent.ACTION_DOWN)
                {
                    padding = 0;
                    initialx = (int) event.getX();
                    currentx = (int) event.getX();
                    viewHolder = ((ViewHolder) v.getTag());
                }
                if ( event.getAction() == MotionEvent.ACTION_MOVE)
                {
                    currentx = (int) event.getX();
                    padding = currentx - initialx;
                }

                if ( event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL)
                {
                    padding = 0;
                    initialx = 0;
                    currentx = 0;
                }

                if(viewHolder != null)
                {
                    if(padding == 0)
                    {
                        v.setBackgroundColor(0xFF000000 );
                        Toast.makeText(getApplicationContext(), viewHolder.text.getText().toString(), 5);
                    }
                    if(padding > 75)
                    {
                        viewHolder.setRunning(true,viewHolder);
                    }
                    if(padding < -75)
                    {
                        viewHolder.setRunning(false,viewHolder);
                    }
                    v.setBackgroundColor(viewHolder.getColor());  
                    v.setPadding(padding, 0,0, 0);
                }
                return true;
            }
        };

        ModelArrayAdapter adapter = new ModelArrayAdapter(this, getData(),gestureListener);
        lv.setAdapter(adapter);
        lv.setFocusable(true);
        lv.setOnTouchListener(gestureListener);
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                TextView txt = (TextView) arg1.findViewById(R.id.TextView01);

                Toast.makeText(getApplicationContext(), txt.getText().toString(), 5);

            }
        });
    } 
```

@sam 我已经添加了代码。请检查它....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:32:33.223

只是猜测，但您是否调用了 ListView.setOnItemClickListener()？我相信你想保持`focusable`并`focusableIntouchMode`设置为`true`。

**添加**

你必须调用 show() 来显示一个 Toast，改变这个：

```
Toast.makeText(getApplicationContext(), txt.getText().toString(), 5); 
```

对此：

```
Toast.makeText(getApplicationContext(), txt.getText().toString(), 5).show(); 
```

这里也：

```
Toast.makeText(getApplicationContext(), viewHolder.text.getText().toString(), 5).show(); 
```

**另一个补充**

您的 OnTouchListener 在到达您的 OnItemClickListener 之前正在使用该事件，只需让 onTouch() return 即可`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:30:25.963

尝试在自定义适配器的 getView 方法中实现 ItemClickListener。现在运行应用程序。它会正常工作

# php - 使用爆炸破坏文件

> ID：11073347
> 
> 赞同：1
> 
> 时间：2012-06-17T17:27:53.117
> 
> 标签：php, arrays

今天我想出了如何将文件分解成碎片。我用下面的代码完成了它。

```
<?php
$file = file('url here');
foreach ($file as $files)
{
list($example) = explode(',', $file);
}
?> 
```

但是当我将 $example 回显出来时，我只是得到一个文本说“Array”作为输出。我输入的文本文件如下所示

1,2,3,4,5

我希望输出如下所示

1
2
3
4
5

有没有可能。如果是，请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:31:41.150

那是因为`$example`是一个数组。这就是返回“数组”的原因。改为这样打印：

```
foreach($example as $item) echo $item,"\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T17:28:54.657

在 HTML 或文本文件的`<br>`每个项目之后使用`PHP_EOL`

```
foreach ($example as $item)
{
    echo "$item<br>".PHP_EOL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T17:31:14.237

`$example`将是一个数组，因此您需要使用`print_r()`或指定一个索引来回显：

```
echo $example[1]; 
```

理想情况下，要打印所有元素，您可以简单地执行另一个循环：

```
foreach($example as $element){echo $element."<br>";} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T17:49:19.657

我认为你这里有两个问题，你应该一个接一个地解决。这是我可以发现的：

代替：

```
list($example) = explode(',', $file); 
```

尝试：

```
$example = explode(',', $file); 
```

还要注意，如果你有多行，你会覆盖`$example`，所以你可能想在`foreach`循环中输出它。

# html - 歌剧和额外的空间和滚动

> ID：11073357
> 
> 赞同：0
> 
> 时间：2012-06-17T17:29:20.133
> 
> 标签：html, css, scrollbar, opera

[我的网站](http://toreyscheer.webs.com/)是为 firefox 设计的，现在我已经拥有了我想要的大部分内容，如果没有别的，我正在尝试让标准功能在其他浏览器上运行。

我目前遇到的一个更奇怪的错误（仅在 Opera 12.0 中）是我的页面右侧是一个很大的空白区域。有谁知道 Opera 中的哪些功能可能导致此问题？

注意：如果有帮助，我添加了边框，这实际上在 Firefox（可能还有其他浏览器）中重复了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:05:56.133

`position:relative; left:300px;`您必须通过给它一个宽度来修复带有样式的 div 。

# android - 安装时的 Android 错误消息“未找到内容提供程序”

> ID：11073358
> 
> 赞同：1
> 
> 时间：2012-06-17T17:29:29.790
> 
> 标签：android, permissions, android-contentprovider

我正在尝试编写一个广播接收器，该接收器会为每条传入的 SMS 文本消息调用。所有已发布的执行此操作的代码（我能找到）要么已被弃用，要么不起作用。

我的代码在安装时失败，日志中有此消息（两次）：

```
06-17 10:15:59.316   396   413 W ActivityManager: No content provider found for permission revoke: file:///data/local/tmp/locator.apk
06-17 10:15:59.316   396   413 W ActivityManager: No content provider found for permission revoke: file:///data/local/tmp/locator.apk 
```

我的清单文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk android:minSdkVersion="7" />
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.READ_SMS"/>

<application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
    <receiver android:name=".SmsReceiver" > 
        <intent-filter> 
            <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver>  
</application> 
```

**如果有人能指出我做错了什么，我会很高兴。我开始怀疑没有用于读取传入 SMS 的 API。**

我的源代码如下所示：

```
package com.example;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.gsm.SmsMessage;
import android.util.Log;

public class SmsReceiver extends BroadcastReceiver {
    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
    private static final String TAG = "locator";

    @SuppressWarnings("deprecation")
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.i(TAG, "Intent recieved: " + intent.getAction());

        if (intent.getAction() == SMS_RECEIVED) {
            Bundle bundle = intent.getExtras();
            if (bundle != null) {
                Object[] pdus = (Object[]) bundle.get("pdus");
                final SmsMessage[] messages = new SmsMessage[pdus.length];
                for (int i = 0; i < pdus.length; i++) {
                    messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                }
                if (messages.length > -1) {
                    Log.i(TAG,
                            "Message recieved: " + messages[0].getMessageBody());
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:02:31.843

你的代码（和我的）在另一部手机上运行得很好，马克。我在这部手机上刷了 ICS，我怀疑有些地方有点不正常。这是手机或构建。谢谢你，彼得

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T16:51:04.143

**查找（另一个）错误消息**

“未找到内容提供商或权限被撤销”是一个警告，可能并不意味着任何错误。在包安装案例中，我调查它只是一个警告消息，包 URI 不包含“权限”（用户 ID/密码）部分。handleStartCopy()，（在 frameworks/base/services/java/com/android/server/pm/PackageManagerService.java 中）：

```
mContext.grantUriPermission(DEFAULT_CONTAINER_PACKAGE, mPackageURI, Intent.FLAG_GRANT_READ_URI_PERMISSION); 
```

一些工作，然后：

```
mContext.revokeUriPermission(mPackageURI, Intent.FLAG_GRANT_READ_URI_PERMISSION); 
```

消息是真实的，但无关紧要。（removeUriPermission() 在 frameworks/base/services/java/com/android/server/pm/ActivityManagerService.java 中）

对我来说，.apk 安装过程的这一部分是有效的——尽管有警告消息。检查 logcat 显示的其他消息，这些消息可能表明它失败的原因。

# jquery - 使用 jQuery 以表单形式发布多个输入

> ID：11073362
> 
> 赞同：2
> 
> 时间：2012-06-17T17:29:50.587
> 
> 标签：jquery, forms, post, input

我在 HTML 中生成了一些看起来像这样的输入：

```
<input id='estemated_days' type='text' data-id='717' value='6'>

<select id='elements_grade' data-id='717'>
 <option value='1'></option>
 <option value='2'></option>
 <option value='3'></option>
</select>

<input id='estemated_days' type='text' data-id='718' value='4'>

<select id='elements_grade' data-id='718'>
 <option value='1'></option>
 <option value='2'></option>
 <option value='3'></option>
</select> 
```

我当时生成了大约 10 个，但以两个为例。如何使用 jQuery 将多个输入值发布到外部 PHP 文件？以前我在提交帖子数据时使用过类似的东西（见下面的代码），但这似乎只适用于具有 ID 的单个字段 - 而不是生成的数据库`data-id`

```
//Initiate function when user clicks save
$("#save_courseplan").click(function() {

//Store the values of the fields as variables
var elements_grade = $('#elements_grade').val();
var estemated_days = $('#estemated_days').val();

$.post('../update.php', {

    estemated_days: estemated_days, //This for example will now represent 6
    elements_grade: elements_grade //And this 1

    }, function(data) {
    $('#updatestatus').html(data); //Display what update.php echoes out
 });
}); 
```

**编辑**

好的我不认为我很清楚。我已经动态创建了`input`字段。这些字段有一个`data-id`是从 MySQL 数据库中获取的。

数据库看起来像这样：

```
+------------+------------+
| scpe_id    | scpe_days  |
+------------+------------+
| 717        | 6          |
+------------+------------+
| 718        | 4          |
+------------+------------+ 
```

以前，我已经成功地根据它包含的值更新了单个字段，使用我之前在这个线程中发布的 jQuery 代码。一个 ID 包含一个值，这个值被`$_POST`发送到我的`update.php`文件，然后插入到数据库中。

但是现在我不能使用 ID，因为我需要一次更新多行，每行都有不同的数据库 ID。

所以我想要的是首先获取 的值`data-id`，知道要更新哪一行，然后获取它持有的值以知道要插入什么 - 然后重复每个`<input>`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:32:51.833

```
var queryString = $('form').serialize(); 
```

完毕。

**笔记：**

*   确保所有表单元素都在表单元素内。
*   所有表单元素都必须有一个`name`属性。

[`serialize`文档](http://api.jquery.com/serialize/)

最终代码可以是：

```
$.post('../update.php/?' + queryString, function(data) {
    $('#updatestatus').html(data);
}); 
```

# sql-server - 优化 SQL Azure 中股票数据的存储

> ID：11073371
> 
> 赞同：2
> 
> 时间：2012-06-17T17:30:46.827
> 
> 标签：sql-server, azure-sql-database

我想将历史股票价格数据存储在**SQL Azure**数据库的表中。我将每 15 分钟获得大约 100000 个股票价格，其中一些可能会或可能不会改变它们的价值。所以我需要每天存储大约 (5000 * 32 (8 小时 * 4 次) = 160000) 160000 条记录。

目前，权益表具有以下结构，大约有 20 列。

```
Equity table
---------------
ID INT PK,
Name Varchar(20),
Value Money,
Currency Varchar(10),
....... 
```

我想存储历史价格的新表 (HistoricalPrices) 包含以下结构。

```
HistoricalPrices
-------------------
ID INT PK,
EquityID INT FK,
[Date] DateTime,
Value Money 
```

如果我每天存储这 160000 条记录，一个月内我的表将获得大约 500 万条记录。

我的问题是，这个表将如何处理数据，我是否会遇到任何性能问题，是否有任何其他方式来维护这些数据，我是否需要对表结构等进行任何更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:26:08.237

通过适当的索引和集群，性能不应该成为适当的选择性查询的问题。需要考虑传统的操作问题，如备份、重新索引作业和限制返回的数据量，尽管这不是 Azure 的问题。

请注意，Azure DB 大小限制可能会迫使您在某些时候水平分区（分片）（[http://blogs.msdn.com/b/sqlazure/archive/2010/06/24/10029719.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/06/24/10029719.aspx)）（Azure 没有t 支持 TABLE 分区。）

[http://msdn.microsoft.com/en-us/library/ms345146(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms345146(v=sql.90).aspx)

另外要考虑的是您的 32 位 int PK 溢出 - 尽管按照目前的速度您有 50 多年的价值，但如果您以更高的频率进行跟踪（例如更多交易所或更多股票），您将需要考虑 64 位 INT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:59:35.417

由于您的容量要求，您应该考虑使用联合 (http://msdn.microsoft.com/en-us/library/windowsazure/hh597452.aspx)。如果您的记录在一个批次中被插入/更新，您可能需要将它们分解为特定的值范围。但一般来说，Federations 是 SQL Azure 的首选分片机制。在最终确定存储设计之前检查该功能。

如果有兴趣，请查看我的博客以获取与联邦设计相关的具体信息：http: [//geekswithblogs.net/hroggero/archive/2011/07/23/preparing-for-data-federation-in-sql-azure.aspx](http://geekswithblogs.net/hroggero/archive/2011/07/23/preparing-for-data-federation-in-sql-azure.aspx)

# web-services - RESTful Web 服务中的身份验证

> ID：11073375
> 
> 赞同：6
> 
> 时间：2012-06-17T17:30:57.323
> 
> 标签：web-services, spring, rest, spring-security

我正在构建一个基于 Spring 的宁静 Web 服务。我正在使用 Spring 安全性。它只能由桌面应用程序访问。基本上是机器对机器的网络服务。

*   我想要一个进行身份验证的自定义服务。然后根据身份验证的结果执行其他更敏感的操作。

*   另一种选择是在每个请求的正文中发送凭据，并且基本上每次都进行身份验证。

Logic 表示，*第一种方法将是最有效的*，因为每次进行身份验证都会产生相当多的开销。

您对此有何建议？去无状态还是有状态？有状态方法是否存在主要缺点？

到目前为止，我阅读了[Java Web Services Up and Running](http://shop.oreilly.com/product/9780596521134.do)的一些章节 以及 SO 的几个问题，例如[this](https://stackoverflow.com/questions/544474/can-you-help-me-understand-this-common-rest-mistakes-sessions-are-irrelevant)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T07:56:18.547

如您提供的链接中所述，执行此操作的 REST 方法是对每个请求进行身份验证，而不是保留会话。

至于在每个请求上使用用户名/密码进行身份验证，如果您可以使用......安全层（https）是安全的；否则，该对以明文形式发送并且可发现。

另一种选择是使用类似于 AWS 的方式来执行此操作（例如，链接到亚马逊的[此处](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)和[此处](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/RESTAuthentication.html)）。这里有其他解释：[buzzmedia](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)和[samritchie](http://samritchie.net/2011/09/07/implementing-aws-authentication-for-your-own-rest-api/)

也许 OAuth 是一种选择，但我没有这方面的经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T01:44:18.667

从 REST 服务（客户端 - 服务器）开始，我强烈建议您使用[Restlet](http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/318-restlet.html)

可以使用 定义对此 REST 服务的身份验证`ClientResource`。例子 ：

```
private static ClientResource getClientResource(String uri) {
ClientResource clientResource = new ClientResource(uri);
clientResource.setChallengeResponse(ChallengeScheme.HTTP_BASIC,
        "username", "password"
        );
return clientResource;
} 
```

# java - XMPP 名册检索

> ID：11073379
> 
> 赞同：-1
> 
> 时间：2012-06-17T17:31:20.103
> 
> 标签：java

这是什么意思？

```
for (RosterEntry r : entries) 
```

这里的“条目”是这样的 RosterEntrys 的集合，

```
Collection<RosterEntry> entries; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:12:50.167

您需要查找一些基本的 Java 教程。这被称为[foreach](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)循环。

正如原始标签所建议的那样，这与 XMPP 或 ejabberd 无关。

# asp.net - 寻找 vb.net 代码以将现有按钮/文本框/下拉列表等添加到容器或持有人？

> ID：11073384
> 
> 赞同：0
> 
> 时间：2012-06-17T17:31:37.653
> 
> 标签：asp.net, vb.net, containers, placeholder, visible

我正在使用 vb.net。基本上，我有一个下拉列表、文本框和一个提交按钮。您从下拉列表中选择电影导演，然后输入电影，单击按钮，它将数据添加到我的数据库中。

还有另一个按钮使用 Visible = True 和 Visible = False 隐藏/显示下拉列表、文本框和提交按钮，但我不喜欢它的是当它隐藏我之前所说的内容时，它会留下一些白色/空白空间就像它们仍然存在，但不可见。

无论如何要放置某种支架/容器并放置一个按钮，单击该按钮可以将我的下拉列表，文本框和提交按钮添加到该位置？

干杯，EN

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:40:51.140

我假设您正在 Visual Studio 中使用 WinForms。在工具箱中，可以帮助您摆脱这种情况的控件位于“容器”部分。其中，有 a `Panel`、 a`FlowLayoutPanel`和 a `TableLayoutPanel`（有关演示，请参见[msdn](http://msdn.microsoft.com/en-us/vstudio/bb798032.aspx)上的此视频）。`TableLayoutPanel`它们可以帮助您组织控件。特别是`FlowLayoutPanel`自动放置控件。但是您始终可以更改任何控件的`Top`和`Left`属性，将它们移动到所需的位置或将其中的一些组合到 a 上`Panel`并更改`Location`此一个。

`Add`您可以使用其`Controls`属性的方法将控件添加到容器中。但是，如果控件已经在表单上（因为您询问如何添加现有控件），则必须先将其从表单中删除。

```
Me.Controls.Remove(myButton)
panel1.Controls.Add(myButton) 
```

# sql-server - SQL Azure 中的行版本

> ID：11073392
> 
> 赞同：1
> 
> 时间：2012-06-17T17:32:47.120
> 
> 标签：sql-server, sql-server-2008, azure-sql-database

我正在开发一个 SQL Azure 数据库。

我想在我的数据库中的表中添加一个 rowversion 列，但我找不到“rowversion”类型！

它是“时间戳”类型吗？如果是这样的话 ！我读过时间戳已被弃用。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:45:03.650

只有*名称* `timestamp`已被弃用，因为对于表示数据类型的名称来说，这是一个可怕的选择`rowversion`——因为它与日期或时间无关（如果基于 ANSI 中指定的内容，它应该如此）。和类型是 100% 兼容`timestamp`和`rowversion`可互换的。

虽然该名称已被弃用，但您不妨继续使用它。即使在 SQL Server 2012 中，`rowversion`也没有`sys.types`，如果您使用它创建表`rowversion`，则存储在`sys.columns`as`timestamp`中，如果您稍后生成表的脚本，则将其脚本化为后者。

```
CREATE TABLE dbo.what_the(heck ROWVERSION);

SELECT t.name 
  FROM sys.types AS t
  INNER JOIN sys.columns AS c
  ON t.system_type_id = c.system_type_id
  OR t.user_type_id = c.user_type_id
WHERE 
  c.[object_id] = OBJECT_ID('dbo.what_the'); 
```

结果：

```
name
---------
timestamp 
```

这有点开玩笑，你绝对应该使用`rowversion`，而不是`timestamp`出于未来兼容性的原因，我只是在开玩笑，因为微软再次有一个“照我们说的做，而不是照做”的弃用政策。在 SQL Azure 的情况下，您现在可能不得不选择`timestamp`，直到他们解决这个问题 - 在我看来，他们会继续使用旧名称，因为它继续在外面造成如此多的混乱，这似乎是一种短视。`<shrug>`

PS你在哪里看到这个？在基于 Web 的 SQL Azure 表设计器中？我怀疑您可以使用`rowversion`或者`timestamp`如果您使用查询编辑器来创建表格，而不是将自己限制在表格设计器 UI 的下拉列表中呈现给您的列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:35:21.757

他们是一样的东西。Rowversion 是“更高”版本 - 不推荐使用时间戳，因为它与时间戳的标准 SQL 规范不匹配。

如果您的数据库中没有 rowversion，请使用时间戳。

[http://msdn.microsoft.com/en-us/library/ms182776.aspx](http://msdn.microsoft.com/en-us/library/ms182776.aspx)

# google-maps - 我可以使用 Google Maps API 将地图导出为 SVG

> ID：11073397
> 
> 赞同：0
> 
> 时间：2012-06-17T17:33:27.660
> 
> 标签：google-maps

我想使用 Google Maps API 创建一个自定义地图，其中删除了标签并更改了颜色（到目前为止没问题），然后将该地图导出为 SVG。如果那是不可能的，那么出口到 PNG 就可以了。目标是将生成的地图移动到画布元素中，以便使用fabric.js 进行进一步处理。这可能吗？如果可以，怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:36:07.830

为什么不直接使用 Google Maps Static Maps API？

[http://goo.gl/5KTX0](http://goo.gl/5KTX0)

它支持样式地图和PNG格式。

# requirejs - r.js 优化器解析配置的 deps 文件

> ID：11073401
> 
> 赞同：1
> 
> 时间：2012-06-17T17:34:23.167
> 
> 标签：requirejs, optimization

我尝试 requireJS 优化器将我的所有脚本打包到一个文件中，但我无法克服一个问题。

我的*requireJs*配置是

```
var require = {
    //    'baseUrl': 'static/scripts',
    'paths': {
        'external': 'global/external'
    },
    'waitSeconds': 2,
    //    'enforceDefine': true,
    'deps': ['external/jquery-1.7.2'],
    'config': {

    }
}; 
```

*requireJs*将在开始加载任何其他脚本之前加载 deps 中的所有内容。因为 jquery 用定义函数和名称 jquery 包装自己，所以我可以通过调用将它加载到我的脚本中

```
var var $ = require('jquery'); 
```

当代码未优化时，这很有效。

问题：当我运行 r.js（使用节点 - 但我认为这无关紧要）时，优化器会打印出无法解析 jquery 依赖关系的错误。*requireJs*优化器常见问题解答中没有任何内容。我尝试配置“路径”属性，但没有解决任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:47:10.577

我删除了 deps 属性并向路径添加了新元素

```
var require = {
    //    'baseUrl': 'static/scripts',
    'paths': {
        'external': 'global/external'
        'jquery': 'global/external/jquery-1.7.2'
    },
    'waitSeconds': 2,
...
}; 
```

它之前没有播放，因为我试图设置 jquery 的路径

```
'jquery': 'external/jquery-1.7.2' 
```

认为外部应该评估为

```
'global/external/jquery-1.7.2' 
```

然后我再次在构建脚本（或作为 r.js 的参数）中设置 path.jquery 并且它起作用了

# iphone - 无法使用 TintColor 修改导航栏颜色

> ID：11073402
> 
> 赞同：0
> 
> 时间：2012-06-17T17:34:26.540
> 
> 标签：iphone, uinavigationcontroller, uinavigationbar, tintcolor

这是 BrowserViewController.m 的源代码：http: [//pastebin.com/w282kRm6](http://pastebin.com/w282kRm6)

如您所见，在许多不同的地方，我尝试使用 正确实现代码`self.navigationController.navigationBar.tintColor = [UIColor darkGrayColor];`，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:39:52.843

```
[navController.navigationBar setTintColor:[UIColor colorWithRed:0/255.0
                                                              green:51.0/255.0
                                                               blue:102.0/255.0
                                                              alpha:1.0]];
 [navController.navigationBar setBarStyle:UIBarStyleBlackTranslucent]; 
```

你可以改变绿色，蓝色，红色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:21:52.140

`self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:0.56 green:0.69 blue:0.71 alpha:1.0];`

这个对我有用。

# iphone - 第一次运行定时器，第二次恢复定时器

> ID：11073407
> 
> 赞同：0
> 
> 时间：2012-06-17T17:34:51.100
> 
> 标签：iphone

m 文件中声明的变量。

```
BOOL isFirstTime; 
```

我希望如果第一次按下播放按钮，那么它应该切换到暂停按钮并检查功能，`isFirstTime`然后它应该启动计时器并执行该`displayviewsAction`方法，如果暂停按钮恢复播放，那么它应该再次检查功能`isFirstTime`或第二次，如果第二次命中，则应恢复计时器。

```
-(void)playpauseAction:(id)sender {
if ([audioPlayer isPlaying]){         
   [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
   [audioPlayer pause];
   [self pauseTimer];
} else {
  [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
  [audioPlayer play];
  [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(AfterOneSecondsFuction) userInfo:nil repeats:YES];
        }         
}
-(void)pauseTimer{
pauseStart = [[NSDate dateWithTimeIntervalSinceNow:0] retain];
previousFireDate = [[timer fireDate] retain];
[timer setFireDate:[NSDate distantFuture]];
}
 -(void)resumeTimer{
float pauseTime = -1*[pauseStart timeIntervalSinceNow];
[timer setFireDate:[previousFireDate initWithTimeInterval:pauseTime sinceDate:previousFireDate]];
[pauseStart release];
[previousFireDate release];    
}
-(void)AfterOneSecondsFuction
{
if(!isFirstTime)
{
 isFirstTime=YES;
 return;
 self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                  target:self
                                                selector:@selector(displayviewsAction:)
                                                userInfo:nil
                                                repeats:NO];

} else if (!isFirstTime){
  isFirstTime=NO;
  return;
  [self resumeTimer]; 

     }
}    

- (void)displayviewsAction:(id)sender
{  
  First *firstController = [[First alloc] init];
firstController.view.frame = CGRectMake(0, 0, 320, 480);
CATransition *transitionAnimation = [CATransition animation];   
[transitionAnimation setDuration:1];
[transitionAnimation setType:kCATransitionFade];
[transitionAnimation setTimingFunction:[CAMediaTimingFunction     functionWithName:kCAMediaTimingFunctionEaseIn]];
[self.view.layer addAnimation:transitionAnimation forKey:kCATransitionFade];
[self.view addSubview:firstController.view];
[self.view addSubview:toolbar];
[firstController release];   
}

-(void)Second 
{
 Second *secondController = [[Second alloc] init];
secondController.view.frame = CGRectMake(0, 0, 320, 480);
CATransition *transitionAnimation = [CATransition animation];
[transitionAnimation setDuration:1];
[transitionAnimation setType:kCATransitionReveal];
[transitionAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];
[self.view.layer addAnimation:transitionAnimation forKey:kCATransitionReveal];
[self.view addSubview:secondController.view]; 
[self.view addSubview:toolbar];
[secondController release];
self.timer = [NSTimer scheduledTimerWithTimeInterval:27 target:self selector:@selector(Third) userInfo:nil repeats:NO];
 } 
```

看起来当第一次按下播放时，它只是切换到暂停按钮，不检查功能`isFirstTime`，不启动计时器并执行 displayviewsaction。

如果有人能说出为什么它没有发生以及我做错了什么。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:01:12.643

```
BOOL isFirstTime

//Somewhere where the object is set up, isFirstTime should be set to YES

- (void)playpauseAction:(id)sender {

//When the button is pressed

if(isFirstTime) {

//Load the sound file
//Start playing the sound
//Start view controller timers
//Change the button image to paused
isFirstTime = FALSE;

}

else {

//The button has already been pressed

if ([audioPlayer isPlaying]) {

//If the sound is playing

//Stop playing the sound
//Stop view controller timers
//Change the button image to playing

}

else {

//Resume playing the sound
//Start view controller timers
//Change the button image to paused

}

}

} 
```

# java - junit 错误 - AssertionFailedError

> ID：11073408
> 
> 赞同：0
> 
> 时间：2012-06-17T17:35:06.933
> 
> 标签：java, junit

我是 junit 测试的新手，我有以下测试 -

```
public class ItemsTest extends TestCase {

    private Items itemsd;

    protected void setUp() throws Exception {
        super.setUp();

        itemsd = new Items();

    }

    @Test
    public void testGetCategory() {
        boolean result = itemsd.getCategory() != null;
        Assert.assertTrue(result);
    }

} 
```

哪个测试这个非常简单的代码 -

```
/**
 * @return Returns the category.
 */
public String getCategory() {
    return category;
} 
```

显然我在这里遗漏了一些简单的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:36:43.940

似乎你的`itemsd.getCategory()`回报`null`等等

```
 boolean result = itemsd.getCategory() != null; 
```

`result`是`false`，因此以下语句无法断言

```
 Assert.assertTrue(result); 
```

# android - 如何将图像添加到分段列表视图

> ID：11073410
> 
> 赞同：0
> 
> 时间：2012-06-17T17:35:24.360
> 
> 标签：android, listview

我有一个分段列表视图，每个单元格包含一些文本和一个图像，如下所示。

![在此处输入图像描述](../Images/143927e352983f8d85f3dd000e0ceec7.png)

我正在使用此代码填充字段，

```
 adapter.addSection((keys.get(i)), new SimpleAdapter(getApplicationContext(), security, R.layout.list_complexblue, new String[] { ITEM_TITLE, ITEM_CAPTION, ITEM_DATE, VISIBLE_DATE, LINK, IMAGE }, new int[] { R.id.list_complex_title, R.id.list_complex_caption, R.id.list_complex_pubDate, R.id.list_visible_pubDate, R.id.list_complex_link, R.id.list_complex_image })); 
```

R.id.list_complex_image：这是图像的 id

一切正常，但我如何使用这个适配器将图像放到 imageview 中。请指导我。

谢谢

# c# - 如何在 WinRT 中使用 LinQ 过滤空 XML 元素？

> ID：11073411
> 
> 赞同：1
> 
> 时间：2012-06-17T17:35:50.753
> 
> 标签：c#, xml, linq, windows-8, windows-runtime

**我想要**
检索“到期”元素过期的任务。

**XML 是什么**

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<tasks>
  <task>    
    <title>11111</title>
    <due>2012/06/18</due>
  </task>
  <task>
    <title>2121211212</title>    
    <due></due>
  </task>
</tasks> 
```

**我编码的内容**

```
 var res = from q in xml.Root.Descendants("task")
                  where q.Element("due").IsEmpty == false & (Convert.ToDateTime(q.Element("due").Value)).Date < DateTime.Now.Date
                  select q 
```

**错误是什么**

> mscorlib.dll 中出现“System.FormatException”类型的异常，但未在用户代码中处理
> 
> > 附加信息：字符串未被识别为有效的日期时间。如果有这个异常的处理程序，程序可以安全地继续。

**-_-**
如果我删除元素“到期”为空的任务，错误就消失了。
但是我不只是用下面的代码过滤空元素吗？！

```
q.Element("due").IsEmpty == false 
```

为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:43:07.293

每[`XElement.IsEmpty`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.isempty.aspx)

> 请注意，包含开始和结束标记且标记之间没有内容的元素不被视为空元素。它有没有长度的内容。只有仅包含开始标记并表示为终止的空元素的元素才被认为是空的。

您可以`string.IsNullOrWhiteSpace`用来检查元素是否包含文本字符：

```
var res = from q in xml.Root.Descendants("task")
          where q.Element("due").IsEmpty == false &&
                string.IsNullOrWhiteSpace(q.Element("due").Value) == false &&
                Convert.ToDateTime(q.Element("due").Value).Date < DateTime.Now.Date
          select q 
```

# regex - 如何在 vim 中使用正则表达式组查找替换

> ID：11073413
> 
> 赞同：23
> 
> 时间：2012-06-17T17:35:56.230
> 
> 标签：regex, vim

我正在用 div 替换所有内联要点片段，以便以非阻塞方式加载它们。修改所有具有以下内容的旧文章

```
<script src='https://gist.github.com/1234.js?file=gistfile1.sh'></script> 
```

我需要将其替换为以下内容

```
<div data-gist=1234><a href='http://gist.github.com/1234'>gistfile1.m</a></div> 
```

到目前为止我正在尝试的（这里是 vim newb） - 似乎不起作用

```
:%s/<script src='https:\/\/gist.github.com\/(d+).js?file=gistfile1.sh'><\/script>/<div data-gist={1}><a href='http://gist.github.com/{1}'>gistfile1.m</a></div>//g 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-17T17:45:51.343

我得到了它的工作：

```
:%s!<script src='https://gist.github.com/\(\d\+\).js?file=gistfile1.sh'></script>!<div data-gist=\1><a href='http://gist.github.com/\1'>gistfile1.m</a></div>!g 
```

需要注意的几点：

1.  我使用`!`而不是`/`作为分隔符来避免必须转义路径斜杠
2.  你需要逃避`(`, `d`, `+`, 和`)`在你的尝试中。
3.  最后你有额外`/`的。
4.  要插入匹配组，请使用`\1`而不是`{1}`

# java - PircBot 脚本只有 ops 可以使用？

> ID：11073418
> 
> 赞同：0
> 
> 时间：2012-06-17T17:37:13.473
> 
> 标签：java, irc

尝试 Java。我一点也不擅长Java。只需要一个响应诸如“！r1”之类的命令然后输出“规则1，无垃圾邮件”的机器人

需要多行但我不是很好我做了这个：

```
import org.jibble.pircbot.*;

public class MyBot extends PircBot {

    public MyBot() {
        this.setName("Bot");
    }

    public void onMessage(String channel, String sender,
                       String login, String hostname, String message) {
        if (message.equalsIgnoreCase("hi")) {
            sendMessage(channel, "Hello!");
            if (message.equalsIgnoreCase("lol")) {
                sendMessage(channel, "LOL!");
            }
        }
    }
} 
```

第一个命令有效，但之后的任何命令都无效。它也可以被任何人使用，并且应该是唯一的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:06:37.157

您的括号不匹配：

第一个`if`包含第二个，您需要移动一个括号来关闭它：

```
public void onMessage(String channel, String sender,
                   String login, String hostname, String message) {
    if (message.equalsIgnoreCase("hi")) {
        sendMessage(channel, "Hello!");
    }
    if (message.equalsIgnoreCase("lol")) {
        sendMessage(channel, "LOL!");
    }
} 
```

# php - 如何在 WordPress 后端强制下载文件？

> ID：11073420
> 
> 赞同：0
> 
> 时间：2012-06-17T17:37:31.337
> 
> 标签：php, wordpress, wordpress-theming

大家好我有问题这个代码必须在wordpress后端提供文件下载但是它给了我jeson代码任何人都可以在这里帮助我的代码

```
 $oprion_name_theme =  $this->theme->options['theme_options_field'];

         $shadyssa_options  =  $wpdb->get_results("SELECT option_name, option_value FROM $wpdb->options WHERE option_name like '%$oprion_name_theme%'");

         $resul = $shadyssa_options[0] ;

         $result = (array) $resul ;
         ob_start() ;
         $output =   json_encode($result) ;
         header("Content-type: application/octet-stream") ;
         header("Content-Disposition: attachment; filename='test.json'");
         header( 'Content-Length: ' . strlen( $output ) );   
         echo $output; 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:32:19.543

这里的错字：

```
$result = (array) $resul ; 
```

你想要一个文件下载？但你输出为 json

```
 header("Content-type: application/octet-stream") ;
 header("Content-Disposition: attachment; filename='test.json'"); 
```

你想要的是哪一个？

# c++ - 我可以使用 foo 之类的模式部分专门化模板吗 ?

> ID：11073423
> 
> 赞同：6
> 
> 时间：2012-06-17T17:37:38.720
> 
> 标签：c++, templates, c++11, variadic-templates

如果这是可能的，可以在不递归的情况下索引可变参数模板参数包。但是，GCC[拒绝在](http://ideone.com/pZh4f)这里接受我的部分专业化：

```
template <int I, typename List>
struct element_impl;

template <typename... TL, int... IL, typename T, int I, typename... TR, int... IR>
struct element_impl<I, typelist<pair<TL,IL>..., pair<T,I>, pair<TR,IR>...>> {
    typedef T type;
}; 
```

> prog.cpp：在' `element<0, typelist<int, double, char, float, long int> >`'的实例化中：
> prog.cpp:52:34：从这里实例化
> prog.cpp:47:79：错误：不完整类型' `struct element_impl<0, typelist<pair<int, 0>, pair<double, 1>, pair<char, 2>, pair<float, 3>, pair<long int, 4> >`'的无效使用

GCC 有问题，还是我忽略了可变参数模板的一些限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T18:35:30.030

规范说在 14.8.2.5p9

> 如果 P 具有包含`<T>`or的形式`<i>`，则将相应模板参数列表的每个参数`Pi`与 的相应模板参数列表`P`的相应参数`Ai`进行比较`A`。如果模板参数列表`P`包含不是最后一个模板参数的包扩展，则整个模板参数列表是非推导上下文。

`typelist<T>`不幸的是，您与该模式匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T18:15:55.567

AFAICT，匹配偏特化的规则与函数参数的规则类型推导相同。§14.8.2.1/1 说如下：

> 对于出现在 *parameter-declaration-list*`A`末尾的函数参数包，将调用的每个剩余参数的类型与函数参数包`P`的*declarator-id的类型进行比较。*每个比较推导出模板参数包中由函数参数包扩展的后续位置的模板参数。对于没有出现在*parameter-declaration-list*末尾的函数参数包，参数包的类型是非推导上下文。

因此，在这种情况下无法推断出包`TL`和，并且不选择部分专业化。`IL`

# lwuit - 是否可以使用 LWUIT 发送短信？

> ID：11073424
> 
> 赞同：0
> 
> 时间：2012-06-17T17:38:07.740
> 
> 标签：lwuit

我想使用 LWUIT 发送短信。我应该看什么课？LWUIT 有发送 SMS 的类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T17:54:25.023

你不需要 LWUIT 来发送短信。您可以使用 LWUIT 设计 UI 并使用`MessageConnection`类发送短信。你可以看看[这个](http://www.java.net/node/695825)和[这个](http://java.net/projects/lwuit/lists/users/archive/2009-07/message/522)线程。

# java - onpreviewframe byte[] 到 int[]

> ID：11073426
> 
> 赞同：2
> 
> 时间：2012-06-17T17:38:12.267
> 
> 标签：java, android

在previewframe 中，我得到了ImageFormat.RGB_565 中的字节[]。现在我想将此 byte[] 转换为 int[] 以便我可以进行一些像素操作。

我怎么能那样做？

附言。到目前为止，我是这样做的，但似乎非常未优化：

```
public void onPreviewFrame(byte[] data, Camera camera) { ...
    ByteBuffer bf = ByteBuffer.wrap(data);

        mBitmap = Bitmap.createBitmap(mWidth, mHeight, Bitmap.Config.RGB_565);
        mBitmap.copyPixelsFromBuffer(bf); 
```

然后我这样做确实得到了 int[] 中的像素：

```
 int bitmapArray[] = new int[originalWidth * originalHeight];

    mBitmap.getPixels(bitmapArray, 0, originalWidth, 0, 0,
            originalWidth, originalHeight);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:20:41.430

我认为手动执行此操作的代码应大致如下所示：

```
for (int i = 0; i < data.length; i += 2) {
  // Reconstruct 16 bit rgb565 value from two bytes
  int rgb565 = (data[i] & 255) | ((data[i + 1] & 255) << 8);

  // Extract raw component values (range 0..31 for g and b, 0..63 for g)  
  int b5 = rgb565 & 0x1f;
  int g6 = (rgb565 >> 5) & 0x3f;
  int r5 = (rgb565 >> 11) & 0x1f;

  // Scale components up to 8 bit: 
  // Shift left and fill empty bits at the end with the highest bits,
  // so 00000 is extended to 000000000 but 11111 is extended to 11111111
  int b = (b5 << 3) | (b5 >> 2);
  int g = (g6 << 2) | (g6 >> 4);
  int r = (r5 << 3) | (r5 >> 2); 

  // The rgb888 value, store in an array or buffer...
  int rgb = (r << 16) | (g << 8) | b;
} 
```

因此，使用中间位图可能确实更快，除非您以后需要单独的颜色组件。

免责声明：我没有对此进行测试。可以避免一些中间变量，但我想保持或多或少的可读性。

# facebook - 如何在过去 N 小时/天内获取在给定地理区域内发布的最新帖子

> ID：11073430
> 
> 赞同：2
> 
> 时间：2012-06-17T17:38:52.297
> 
> 标签：facebook

我将如何获得在过去 N 小时/天内由给定地理区域中的任何人发布的帖子。

示例：1) 获取过去 4 小时内任何人在加利福尼亚州帕洛阿尔托发布的所有帖子（公众假设）。2) 获取过去 4 小时内任何人在给定纬度/经度附近发布的所有帖子（公众假设）。

1) 假设他们已经公开了他们的个人资料/地址 2) 假设他们的帖子带有地理标记

是否有任何平台或图形 API（或组合）可以让我这样做？

谢谢

# php - 以经过身份验证的用户身份运行 apache php 进程

> ID：11073431
> 
> 赞同：1
> 
> 时间：2012-06-17T17:38:58.347
> 
> 标签：php, apache, ldap, suexec

有没有办法让 php 进程通过 apache 作为通过 ldap 验证的用户运行？

我们目前在我们的 Intranet 上运行 ubuntu 机器，允许用户通过 ssh 访问，并且还通过我们的内部生产网站以及每个用户的开发网站运行 Web 服务器。我们生产网站的所有目录都设置为 0750，该组是一个 ldap 组，www-data 用户属于每个 ldap 组。我们约 100 个用户中的每一个都属于一组特定的 ldap 组，因此当通过 ssh 登录时，他们只有对相应 ldap 组的文件/目录的读取权限。我们还使用我们的 ldap 组来控制对我们的 svn 存储库的 r/w 访问。

我们打算将用户开发目录移动到单独的虚拟主机，以拥有该目录的用户使用 suexec/suphp 运行（对此还不太确定，但似乎有据可查）。但是，用户也可以轻松地将文件添加到生产网站。我们担心的是用户可以将脚本添加到生产网站，然后可以读取/复制我们生产网站中的所有其他脚本。是否可以让通过 apache 执行的 php 脚本以经过身份验证的用户身份运行，这样它们的访问权限就会受到限制，就像通过命令行运行脚本一样？

这是一个示例目录结构：

目录：

```
drwxr-x--- 16 admin ldab_a    proj_a
drwxr-x---  1 admin ldap_b    proj_b
drwxr-x---  1 admin ldap_c    proj_c
drwxr-x---  3 admin ldap_d    proj_d 
```

用户：组成员资格

```
jane     (ldap_a,ldap_c)
tom      (ldab_b,ldap_c)
www-data (ldap_a,ldap_b,ldap_c,ldap_d) 
```

以及我们想要的结构：

[![](../Images/c244394d87f3582e15eb45dc6d89f394.png "由 imgur.com 主办")](https://imgur.com/F7bnT)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:04:02.170

我建议你看看这个项目：[suPHP](http://www.suphp.org/)

从他们的网站上说：

> suPHP 是一个以所有者权限执行 PHP 脚本的工具。它由一个 Apache 模块 (mod_suphp) 和一个 setuid 根二进制文件 (suphp) 组成，Apache 模块调用它来更改执行 PHP 解释器的进程的 uid。

我希望这会有所帮助！

# objective-c - 在xcode中增加变量名？

> ID：11073433
> 
> 赞同：0
> 
> 时间：2012-06-17T17:39:22.390
> 
> 标签：objective-c, xcode, xcode4

递增变量名

在 xcode 中，我想创建 100 个图像，其中一个名称为 1、2、3、4 等。除了变量名，我什么都能做。对于这些我在徘徊是否可以以编程方式增加变量或是否必须手动完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:43:15.680

您可以使用字典对象，将名称作为键，将图像对象作为数据，而不是创建一堆变量名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T21:29:01.500

如果您真的想/必须使用 100 个不同的变量并避免使用数组，则可以将键值编码与 for 循环结合使用：

```
NSString *name = @"myVariable";
for (int i = 0; i< 100; i++)
{
    // get aValue from somewhere...
    NSString *key = [NSString stringWithFormat:@"%@%d", name, i];
    [self setValue:aValue forKey:key];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T17:41:53.903

这种事情最好用数组来实现。

类似的问题：[Objective C Equivalent of PHP's "Variable Variables"](https://stackoverflow.com/questions/2283374/objective-c-equivalent-of-phps-variable-variables)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T17:43:10.030

在`NSMutableArray`. 它们是否都具有相同的对象名称并不重要，因为它们在数组中具有不同的位置。只需使用 [arrayName objectAtIndex:index] 访问它们；使用一个for。

# cocoa - Spotlight UI 无法在 Sandbox 中找到 Core Data 外部记录文件

> ID：11073434
> 
> 赞同：1
> 
> 时间：2012-06-17T17:39:45.420
> 
> 标签：cocoa, core-data, spotlight, appstore-sandbox, spotlight-plugin

[我已按照说明使用Record-Level Indexing](http://developer.apple.com/library/mac/documentation/cocoa/Conceptual/SpotlightCoreData/Articles/recordLevel.html#//apple_ref/doc/uid/TP40008065-CH101-SW2)将 Spotlight 集成到基于非文档的 Core Data 应用程序中。Spotlight 导入器正确导入文件，这些记录可以使用`mdfind "some string"`.

问题是聚光灯用户界面——右上角的放大镜——在沙箱中运行时没有显示这些记录。

外部记录文件创建于`~/Library/Containers/[my app]/Data/Library/Caches/Metadata/CoreData/[my app]`

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:33:23.000

比较结果`mdimport -d2 [external record file]`显示了这个额外的属性：

```
kMDItemSupportFileType =     (
    MDSystemFile
); 
```

调整聚光灯导入器以删除此键似乎可以修复它。结果现在显示在 Spotlight UI 中。我猜它会从结果中隐藏系统文件。

```
[spotlightData removeObjectForKey:@"kMDItemSupportFileType"]; 
```

# php - 使用自定义简码定义字符串

> ID：11073436
> 
> 赞同：0
> 
> 时间：2012-06-17T17:40:17.803
> 
> 标签：php, string, comparison

在我使用的 PHP 应用程序中，它们提供了使用 #_CATEGORYID 等短代码提取数据的能力。当使用`$cat_id = '#_CATEGORYID';` 和回`$cat_id`显正确的数字时，将返回正确的数字，在这种情况下为 55。当它`var_dump`打开时，`$cat_id`它返回一个 12 的字符串计数，即 #_CATEGORYID 具体是多少个字符。

我想使用比较运算符来显示某些`if ($cat_id == 55)`内容，但由于字符串长度为 12 个字符，因此比较不起作用。

关于如何比较这样的东西的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:21:34.927

将 $cat_id 转换为 int`if ((int) $cat_id == 55)`

# javascript - 带有点击的 jQuery load() 动态内容被触发的次数与加载次数一样多

> ID：11073444
> 
> 赞同：1
> 
> 时间：2012-06-17T17:40:55.590
> 
> 标签：javascript, jquery, ajax, jquery-load

我通过 jQuery load() 加载内容，但每次加载给定页面时，页面上的点击都会被触发多次。为什么？？

**在这里找个小提琴：http: [//jsfiddle.net/ZUZ3L/ph3tH/2/](http://jsfiddle.net/ZUZ3L/ph3tH/2/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:43:54.010

只需将您的点击处理程序放在以下位置`load`：

```
$(document).ready(function() {
    function loadContent() {
        $(".ajaxContainer").load("http://fiddle.jshell.net/ #actions", function() {
            alert("Done");                
        });
    }

    $(".load").click(loadContent);
    loadContent();
});​ 
```

## [更新小提琴](http://jsfiddle.net/ph3tH/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T17:45:52.543

每次加载内容时，都会执行以下行：

```
$(".load").click(loadContent); 
```

它将一个新的事件处理程序添加到事件处理程序列表中，以便在`.load`单击时执行。你执行你的函数三次，现在你有三个相同的处理程序，每次点击都会触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T17:43:44.833

因为您要调用该函数 2 次，请尝试以下操作：

```
$(document).ready(function() {
    function loadContent() {
        $(".ajaxContainer").load("http://fiddle.jshell.net/ #actions", function() {
            alert("Done");
        });
    }
    loadContent();
    $(".load").click(loadContent);

}); 
```

[http://jsfiddle.net/ph3tH/4/](http://jsfiddle.net/ph3tH/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T17:43:55.367

这是因为您要多次添加点击事件。

每次您的代码运行时，都会重新定义 click 函数。当一次点击被重新定义时，它不会替换之前的点击，而是会被添加到堆栈中以在每次“点击”事件发生时执行。这适用于 jQuery 中的所有事件。

当您通过 AJAX 加载时，文档中的变量和事件仍然存在。这意味着您只是在每次运行 ajax 调用时执行的函数调用层之上添加层

# python - 以不同的权限运行 python

> ID：11073449
> 
> 赞同：2
> 
> 时间：2012-06-17T17:42:18.940
> 
> 标签：python, linux, permissions, suid

我正在尝试以其他用户（不是 root）身份运行 python 脚本，该用户也是没有 shell 的系统用户。我知道我不能直接在脚本上设置 suid 标志，所以我写了一个 C++ 包装器。

包装器.cpp

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <iostream>

int main(void)
{
    std::cout << geteuid() << std::endl;

    setgid(getgid());
    setuid(getuid());

    execl("/usr/bin/python2.6", "/usr/bin/python2.6", "test.py", NULL);
} 
```

并设置以下权限

```
sudo chown NoShellUser:NoShellGroup /path/to/wrapper
sudo chmod 7755 /path/to/wrapper 
```

最后，要尝试一下，我有一个 python 脚本

```
import sys
import getpass
import os
import pwd
print "VERSION:", sys.version
print "USER:", getpass.getuser(), pwd.getpwuid(os.getuid())
print "EUSER:", pwd.getpwuid(os.geteuid()) 
```

如果这很重要，则具有以下权限

```
sudo chown NoShellUser:NoShellGroup /path/to/test.py
sudo chmod 7755 /path/to/test.py 
```

现在，当我以用户“测试”的身份运行整个事情时，我看到了：

```
255                                                    # UID of NoShellUser
VERSION: 2.6.8 (unknown, Apr 12 2012, 20:59:36)        # Don't know where that comes from
[GCC 4.1.2 20080704 (Red Hat 4.1.2-52)]                # Don't know where that comes from
USER: test pwd.struct_passwd(pw_name='test', pw_passwd='hash', pw_uid=20804, pw_gid=604, pw_gecos='Name Surname', pw_dir='/home/test', pw_shell='/bin/bash')
EUSER: pwd.struct_passwd(pw_name='test', pw_passwd='hash', pw_uid=20804, pw_gid=604, pw_gecos='Name Surname', pw_dir='/home/test', pw_shell='/bin/bash') 
```

如您所见，有效用户仍然是“测试”。有人可以指出我做错了什么，因为我已经看过几个例子，它们似乎都或多或少地展示了完全相同的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:09:29.990

你的包装有点错误 - 试试这个

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <iostream>

int main(void)
{
  std::cout << "Real user " << getuid() << std::endl;
  std::cout << "Effective user " << geteuid() << std::endl;

  setregid(getegid(), getegid());
  setreuid(geteuid(), geteuid());

  std::cout << "Real user " << getuid() << std::endl;
  std::cout << "Effective user " << geteuid() << std::endl;

  execl("/usr/bin/python2.6", "/usr/bin/python2.6", "test.py", NULL);
} 
```

它在执行 python 脚本之前将真实有效的用户/组 id 设置为有效组 id。

# php - 如何停止循环 PHP

> ID：11073451
> 
> 赞同：-1
> 
> 时间：2012-06-17T17:42:53.013
> 
> 标签：php, arrays, loops, foreach

我试图弄清楚是否可以像这样停止 PHP 中的 foreach 循环，

```
$arr = array('Joe', 'Jude', 'James', 'Pitch', 'Tim');
$i=0;
foreach($arr as $val){
    echo $val;
    if($i == 2){
         //Stop looping
    }
} 
```

反正有没有办法做到这一点，如果是的话，我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T17:44:34.103

使用[`break`](http://php.net/control-structures.break)和增加`$i`.

```
$arr = array('Joe', 'Jude', 'James', 'Pitch', 'Tim');
$i=0;
foreach($arr as $val){
    echo $val;
    if(++$i == 2){
       break; 
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:44:57.737

您也可以在这里使用 good old 关键字`break`。后面当然是分号`;`。

```
if($i == 2){
     break;
} 
```

[手册`break`](http://php.net/manual/en/control-structures.break.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T17:44:50.470

您可以使用[`break`](http://php.net/manual/en/control-structures.break.php).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T18:01:45.780

1）如前所述，您需要增加循环。2)...如果您使用多个嵌套的“foreach”，您可以使用 break 'n' 退出 n 个嵌套循环，其中 n 将指定从 1 到您使用的循环总数的任何数字。希望能帮助到你！

# python - 如何从条目完成中获取条目

> ID：11073452
> 
> 赞同：3
> 
> 时间：2012-06-17T17:43:05.293
> 
> 标签：python, gtk3

我正在看这篇文章：[https](https://stackoverflow.com/a/2262200) ://stackoverflow.com/a/2262200 ，我在编写的小东西中有一个非常相似的设置。我的问题是，一旦 entrycompletion 完成，并且输入框有 url，我如何从完成中获取该 url 到变量中？entry.get_text() 似乎不起作用，我尝试的其他一切似乎都给了我一个对象或地址。如果您不想点击，这里是来自上述链接的报价。

```
# simplified example from the tutorial
import gtk

urls = [
    'http://www.google.com',
    'http://www.google.com/android',
    'http://www.greatstuff.com',
    'http://www.facebook.com',
    ]
liststore = gtk.ListStore(str)
for s in urls:
    liststore.append([s])

completion = gtk.EntryCompletion()
completion.set_model(liststore)
completion.set_text_column(0)

entry = gtk.Entry()
entry.set_completion(completion)

# boilerplate
window = gtk.Window()
window.add(entry)

window.connect('destroy', lambda w: gtk.main_quit())
window.show_all()
gtk.main() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T19:59:08.600

您的代码的以下变体对我有用。

```
# simplified example from the tutorial
import gtk 

def on_match_selected(completion, treemodel, treeiter):
  print treemodel[treeiter][completion.get_text_column()]

urls = [ 
    'http://www.google.com',
    'http://www.google.com/android',
    'http://www.greatstuff.com',
    'http://www.facebook.com',
    ]   
liststore = gtk.ListStore(str)
for s in urls:
    liststore.append([s])

completion = gtk.EntryCompletion()
completion.set_model(liststore)
completion.set_text_column(0)

completion.connect('match-selected', on_match_selected)

entry = gtk.Entry()
entry.set_completion(completion)

# boilerplate
window = gtk.Window()
window.add(entry)

window.connect('destroy', lambda w: gtk.main_quit())
window.show_all()
gtk.main() 
```

# django - django prefetch_related 与过滤器

> ID：11073454
> 
> 赞同：4
> 
> 时间：2012-06-17T17:43:09.393
> 
> 标签：django, django-orm

模型.py：

```
class Ingredient(models.Model):
    _est_param = None

    param = models.ManyToManyField(Establishment, blank=True, null=True, related_name='+', through='IngredientParam')

    def est_param(self, establishment):
        if not self._est_param:
            self._est_param, created = self.ingredientparam_set\
                .get_or_create(establishment=establishment)
        return self._est_param

class IngredientParam(models.Model):
    #ingredient params
    active = models.BooleanField(default=False)
    ingredient = models.ForeignKey(Ingredient)
    establishment = models.ForeignKey(Establishment) 
```

我需要获取所有带有参数的成分`Establishment`。首先，我获取`Ingredients.objects.all()`并使用所有参数，例如`Ingredients.objects.all()[0].est_param(establishment).active`. 如何使用 django 1.4 prefetch_related 减少 sql 查询？可能我可以使用其他方式来存储单个`Establishment`属性`Ingredient`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-22T19:32:03.127

Django 1.7 添加了可以放入 prefetch_related的[Prefetch对象。](https://docs.djangoproject.com/en/1.7/ref/models/queries/#django.db.models.Prefetch)它允许您指定应该提供过滤的查询集。我目前在从列表中获取单个（最新）条目时遇到了一些问题，但是在尝试获取所有相关条目时它似乎工作得很好。

您还可以签[出 django-prefetch](https://github.com/ionelmc/django-prefetch#example)，它是这个问题的一部分，[由于](https://stackoverflow.com/q/10915319/147562)措辞大不相同，它似乎与这个问题没有重复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T02:44:21.813

The following code would fetch all the ingredients and their parameters in 2 queries:

```
ingredients = Ingredients.objects.all().prefetch_related('ingredientparam_set') 
```

You could then access the parameters you're interested in without further database queries.

# php - 即使在用户关闭浏览器后如何延长会话？

> ID：11073461
> 
> 赞同：0
> 
> 时间：2012-06-17T17:44:31.807
> 
> 标签：php

我需要一种方法来维护会话，即使在用户关闭浏览器（直到用户单击注销）**而不在数据库中存储会话之后**。

最好的方法是什么？

我可以将用户名 + 密码（散列）存储在 cookie 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:54:28.443

保存在过期时间较长的 cookie 中（比如 1 个月左右）。不必是密码散列，只是一些标识散列，存储在数据库以及用户端（比较），以便您进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:55:14.030

当用户登录时，您应该生成一个随机令牌并 1）将其保存在您的数据库中，2）使用用户名和这个随机令牌设置一个 cookie。

然后，您应该创建一个函数来获取此 cookie 并将令牌与数据库中的令牌相匹配。如果令牌相同，您应该启动一个会话并生成一个新的。

使用随机令牌而不是密码，否则它将始终相同。

请记住，您的“用户是否登录”功能必须首先检查会话是否打开，否则它将为用户访问的每个页面重复此过程。

# java - 使用 FIFO 缓冲区的正确方法

> ID：11073465
> 
> 赞同：2
> 
> 时间：2012-06-17T17:44:46.853
> 
> 标签：java, apache-commons, apache-commons-collection

我有这个 FIFO，我将用它来存储来自网络服务器的数据：

```
 Buffer nServerFifo = (Buffer) BufferUtils.synchronizedBuffer(new CircularFifoBuffer(200));

    // Insert into to the Network Server Buffer    
    public void nServerFifoAdd(String string){
        nServerFifo.add(string);        
    }

    // Get data from the Network Server Buffer
    public Object nServerFifoGet(){         
        Object string = nServerFifo.get();    
        nServerFifo.remove(string);
        return string;           
    } 
```

我的问题是存储数据插入和从缓冲区获取数据的正确方法是什么？如果或这是由缓冲区完成的，我是否需要删除数据？你知道我可以存储到缓冲区中的最大字符串长度是多少吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:53:22.873

它更好地使用`ArrayBlockingQueue class`存在于`java.util.concurrent`包中，这是线程安全的。

```
BlockingQueue<String> queue = new ArrayBlockingQueue<String>(100);

queue.put("Vivek");   // To insert value into Queue

queue.take();         // To take the value out of Queue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:02:50.667

假设您正在使用 Commons Collections 中的类：

1.  如果您使用该`remove()`方法，则无需额外删除任何内容
2.  缓冲区存储对象引用，而不是字符串，因此它受分配的槽数的限制。在您的情况下，在缓冲区已满之前，您最多可以添加 200 个任意长度的字符串，受程序可用总内存的限制。

正如 Kumar 指出的那样，您最好使用 Java 运行时库队列类，因为它们为您处理同步，而 Commons Collections 类要求您自己锁定迭代器。

# wpf - ToolTip 与 Popup（WPF 控件）

> ID：11073470
> 
> 赞同：10
> 
> 时间：2012-06-17T17:45:00.547
> 
> 标签：wpf, popup, tooltip

这些 WPF 控件之间的主要区别是什么？
什么时候应该使用 a`ToolTip`而不是`Popup`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T17:49:14.913

A`ToolTip`是当用户将鼠标指针悬停在元素上时出现的一个小弹出窗口；该`Popup`控件提供了一种在相对于指定元素或屏幕坐标浮动在当前应用程序窗口上的单独窗口中显示内容的方法。

当鼠标指针移到其父对象上时， A`Popup`不会自动打开。如果要`Popup`自动打开，请使用`ToolTip`or`ToolTipService`类。

有关详细信息，请参阅：[工具提示概览](http://msdn.microsoft.com/en-us/library/ms754034.aspx)和[弹出窗口概览](http://msdn.microsoft.com/en-us/library/ms749018.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:17:56.180

Winforms 中以前的工具提示对您可以显示的内容过于严格。这就是为什么人们自己滚动。WPF 工具提示允许您应用带有颜色、图像、格式等的模板化视图。自己动手的日子已经一去不复返了。大多。

# c# - 保存字节数组返回空引用

> ID：11073472
> 
> 赞同：0
> 
> 时间：2012-06-17T17:45:38.890
> 
> 标签：c#, asp.net-mvc, entity-framework, file-upload, bytearray

我正在尝试保存`Photo`具有`byte[] File`字段的班级。尝试使用上下文保存它时会引发错误

> 你调用的对象是空的。

但是在调试时我可以看到它不为空。我可以看到该类的所有属性，包括字节数组中的值。

```
 public class PhotoRepository 
    {
        private static BlogContext _ctx;

        public PhotoRepository()
        {
            _ctx = new BlogContext();
        }

        public static void Save(Photo p)
        {
            _ctx.Photos.Add(p);
            _ctx.SaveChanges();
        }
    } 
```

控制器

```
 public class PhotoController : Controller
    {
        public ActionResult Index()
        {
            using (var ctx = new BlogContext())
            {
                return View(ctx.Photos.AsEnumerable());
            }
        }

        public ActionResult Upload()
        {
            return View(new Photo());
        }

        [HttpPost]
        public ActionResult Upload(PhotoViewModel model)
        {
            var photo =  new Photo();//Mapper.Map<PhotoViewModel, Photo>(model);
            if (ModelState.IsValid)
            {

                photo.AlternateText = model.AlternateText;
                photo.Description = model.Description;
                photo.File = MapStreamToFile(model.File);
                photo.Name = model.Name;
                PhotoRepository.Save(photo);
                return RedirectToAction("Index");
            }
            return View(photo);
        }

        public byte[] MapStreamToFile(HttpPostedFileBase file)
        {
            using (var stream = file.InputStream)
            {
                var memoryStream = stream as MemoryStream;
                if (memoryStream == null)
                {
                    memoryStream = new MemoryStream();
                    stream.CopyTo(memoryStream);
                }
                return memoryStream.ToArray();
            }
        }
    } 
```

照片

```
 public class Photo
    {
        public int Id { get; set; }

        public Byte[] File { get; set; }

        public string Name { get; set; }

        public string Description { get; set; }

        public string AlternateText { get; set; }
    } 
```

照片视图模型

```
 public class PhotoViewModel
    {
        public int Id { get; set; }

        public HttpPostedFileBase File { get; set; }

        public string Name { get; set; }

        public string Description { get; set; }

        public string AlternateText { get; set; }
    } 
```

![在此处输入图像描述](../Images/5858aefe45f4b3faf1e61036db2b1bdc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:57:13.177

我认为问题在于它`_ctx`是空的。请注意，您声明它 and `Save` `static`，但它仅在构造函数中`_ctx`实例化。`public PhotoRepository()`只要它真的应该是静态的，就静态实例化它而不是在构造函数中：

```
 public static class PhotoRepository 
    {
        private static BlogContext _ctx = new BlogContext();

        public static void Save(Photo p)
        {
            _ctx.Photos.Add(p);
            _ctx.SaveChanges();
        }
    } 
```

我还将类更改为`static`，因为我只看到它包含静态成员。如果您打算为这门课做更多，这可能是不正确的。

编辑：（感谢@pst）我从您的代码中看到更多，我认为这可能真的是一个更好的设计：

```
 public class PhotoRepository : IDisposable
    {
        private BlogContext _ctx = new BlogContext();

        public void Save(Photo p)
        {
            _ctx.Photos.Add(p);
            _ctx.SaveChanges();
        }

        void IDisposable.Dispose() { _ctx.Dispose(); }
    } 
```

然后一定要`PhotoRepository`在完成后处理它。我在这里建议更改的原因`BlogContext`是一次性的，并且`using`在其他地方使用。

# java - Android 禁用黑屏

> ID：11073473
> 
> 赞同：0
> 
> 时间：2012-06-17T17:45:41.950
> 
> 标签：java, android

我需要禁用锁定屏幕并同时禁用黑屏。我需要在我的服务的 onStart 中执行此操作。

禁用锁定屏幕后，效果很好：

```
KeyguardManager keyguardManager = (KeyguardManager)getSystemService(Activity.KEYGUARD_SERVICE);
        KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
            lock.disableKeyguard(); 
```

如何禁用黑屏？我试过这个但不工作......

```
PowerManager pm2 = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
       PowerManager.WakeLock wakel = pm2.newWakeLock(PowerManager.FULL_WAKE_LOCK, "AttvaSchermo");
       wakel.acquire(); 
```

或在活动中..

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

提前致谢！

# eclipse - 第一次尝试在 Eclipse 中使用 tess4j（对于真正的初学者来说一步一步）

> ID：11073480
> 
> 赞同：1
> 
> 时间：2012-06-17T17:46:33.740
> 
> 标签：eclipse, plugins, tesseract

我需要一步来了解如何将 tess4j 插入 Eclipse。我在网上找到了这个：

> 1.  创建一个 lib 目录并复制 tess4j.jar 及其所需的 jar；
> 2.  添加了罐子来构建路径
> 3.  将 tessdata 目录和 tessdll.dll 文件复制到项目根目录中。
> 
> 现在它只是工作。

我只知道基本的 Java，所以我根本不知道创建 lib 目录和复制目录文件意味着什么。有人可以帮我插入这个库并使它适用于 eclipse，因为我正在一个需要 ocr 的项目中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T04:20:20.210

> 创建一个 lib 目录并复制 tess4j.jar 及其所需的 jar；

JAR (Java ARchive) 文件是已编译 Java 类的集合。这是分发 Java 库的常用方法。您应该在您的项目中创建一个新文件夹（右键单击您的项目，“新建”，“文件夹”）并将您下载的 JAR 复制/移动到这个新创建的目录中。如果 tess4j 有依赖关系，即需要其他 JAR 来工作，则必须将它们放在此目录中。

> 添加了罐子来构建路径

您需要告诉 Eclipse 将 JAR 添加到构建路径，即 Eclipse 需要知道从哪里获取 tess4j 类。找到 lib 文件夹并选择所有 JAR 文件。右键单击它们并选择“构建路径”、“添加到构建路径”。

> 将 tessdata 目录和 tessdll.dll 文件复制到项目根目录中。

应该清楚;-)

# sql - corona lua sql更新语句使用变量时的正确语法

> ID：11073481
> 
> 赞同：0
> 
> 时间：2012-06-17T17:46:33.853
> 
> 标签：sql, lua, coronasdk

这可能看起来很基本，但在使用变量时我找不到正确的语法。

这有效：

```
local updateTable = [[UPDATE userDetails SET month_id = 100 WHERE id=1]]

db:exec( updateTable) 
```

以下没有：

```
local myVariable = 100

local updateTable = [[UPDATE userDetails SET month_id = myVariable WHERE id=1]]

db:exec( updateTable) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:52:46.210

只需使用 concat 运算符 , `..`，如下所示：

```
local updateTable = [[UPDATE userDetails SET month_id = ]] .. myVariable .. [[ WHERE id=1]] 
```

如果`myVariable`来自您的应用程序之外，请注意 SQL 注入。见：[Lua mysql，需要一种方法来转义数据](https://stackoverflow.com/questions/6318525/lua-mysql-need-a-way-to-escape-data)，或谷歌为[lua + "prepared statement"](https://www.google.com/search?aq=f&sugexp=chrome,mod=12&sourceid=chrome&ie=UTF-8&q=lua+prepared+statement)

# php - 使用命令行评估 PHP 文件

> ID：11073482
> 
> 赞同：1
> 
> 时间：2012-06-17T17:46:39.750
> 
> 标签：php, eclipse, web-applications, cordova

感谢Phonegap，我正在将我的PHP/MySQL/jQuery Mobile/Javascript webapp 变成一个应用程序。我想摆脱所有 PHP 代码（与服务器交换数据时除外）来为 Phonegap 提供 HTML 页面。数据方面，这不是问题，因为视图和数据访问被正确分离。

我的问题是我使用 PHP 来应用 DRY 原则（任何重复的 HTML 模式都是使用 PHP 函数调用呈现的）。由于我将同时开发 web 应用程序和 iPhone 应用程序，因此我需要能够轻松地将页面更改导出到 Phonegap 项目中。

所以我正在寻找一种方法来使用 Eclipse 中的一些命令行功能来导出我的 webapp 页面。理想情况下，我会将这样的构建器添加到 Eclipse：

```
php -F htdocs/index.php > phonegapdirectory/index.html 
```

我显然错过了一些东西，因为没有任何输出。该`php`命令正在等待直接输入，我需要输入`exit`才能正确输出结果。

关于如何使它正确的任何想法？将 PHP 导出到 HTML 到 Phonegap 是否还有其他好的做法？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:08:53.640

为什么需要使用-F？您是否打算将输入传递到 php 文件中？

你可以使用

```
php htdocs/index.php > phonegapdirectory/index.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:56:10.127

不是额外的 2... 文件通道

```
php -F htdocs/index.php 2> phonegapdirectory/index.html 
```

# ruby-on-rails - 为设计用户添加角色和权限；NoMethodError：未定义的方法

> ID：11073488
> 
> 赞同：2
> 
> 时间：2012-06-17T17:47:04.993
> 
> 标签：ruby-on-rails, ruby, devise, cancan, activescaffold

Rails 3.0.13、Devise、CanCan 和 ActiveScaffold；RVM 上的 Ruby 1.9.3 194（如果有什么不同的话）

我正在尝试为设计用户和特定权限设置通用角色（要求角色具有默认权限，但可以在用户级别覆盖权限）。ability.rb 能够`is_implementer?`毫无问题地使用该方法

如果我进入控制台，将角色或 user_permissions 继续收到此错误，将用户分配给 var ( `@user`)，然后执行`@user.role`or `@user.user_permissions`：

```
NoMethodError: undefined method `role' for #<ActiveRecord::Relation:0x98173e8>
    from /home/scott/.rvm/gems/ruby-1.9.3-p194@rails3/gems/activerecord-3.0.13/lib/active_record/relation.rb:374:in `method_missing'
    from (irb):7
    from /home/scott/.rvm/gems/ruby-1.9.3-p194@rails3/gems/railties-3.0.13/lib/rails/commands/console.rb:44:in `start'
    from /home/scott/.rvm/gems/ruby-1.9.3-p194@rails3/gems/railties-3.0.13/lib/rails/commands/console.rb:8:in `start'
    from /home/scott/.rvm/gems/ruby-1.9.3-p194@rails3/gems/railties-3.0.13/lib/rails/commands.rb:23:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

**楷模：**

用户类

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :user_groups
  has_many :user_permissions

  belongs_to :role

  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :role_id

  def is_implementer?
    self.role.implementer?
  end
end 
```

用户权限

```
class UserPermission < ActiveRecord::Base
  belongs_to :user
  belongs_to :permission
end 
```

角色

```
class Role < ActiveRecord::Base
  has_many :default_role_permission
  has_many :users

  def implementer?
    self.name == "Implementer"
  end
end 
```

如果您想查看其他内容（例如 CanCan 的能力.rb），请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T23:21:03.693

当您这样做时`@user = User.where(:id => 2)`，不会获取数据并实例化用户。正如您的错误指出的那样，它是 ActiveRecord::Relation。

这是因为你可以做类似的事情`User.where(:active => true).limit(5)`

所以对于你的情况，你可以做

```
@user = User.where(:id => 2).first 
```

或者

```
@user = User.find(2) # this is more common 
```

然后您可以调用#role 或#user_permissions，因为现在@user 实际上是一个用户实例。

# javascript - 如何在 ID-Attribute 中存储 HTML-Markup？

> ID：11073490
> 
> 赞同：4
> 
> 时间：2012-06-17T17:47:23.480
> 
> 标签：javascript, html, store

我需要为每个链接动态显示一些带有 Java-Script (jQuery) 的文本。问题是文本也被格式化为 HTML，所以这会在后面的视图中造成一些问题。现在我将它存储在 ID 属性中，这是可行的，但只是没有嵌入 HTML。

```
<?php
...
$desc = '<p style="color: red">some <span>data</span></p>';
echo '<a href="#" id="' . $desc . '">' . $key . '</a>';
?> 
```

不允许 Ajax 请求。有没有一种简单的方法可以达到这个目标？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T17:49:43.727

该`id`属性是最不合适的地方之一（必须是唯一的，不能包含所有字符）。使用`data-`属性（在 HTML5 中引入，但也适用于旧浏览器且不使用 HTML5 文档类型）：

```
<a href="#" data-desc="...."> 
```

如果您使用的是 jQuery，您可以通过 .js 访问它`.data('desc')`，在纯 JavaScript 中，最便携的方式是使用`.getAttribute('data-desc')`. 如果您不需要支持较旧的浏览器，则可以通过该`.dataset.desc`属性访问该值。

在任何情况下，您都需要确保在属性中插入动态数据时不会出现任何中断。用于[`htmlspecialchars()`](http://php.net/htmlspecialchars)此目的：

```
$desc = '<p style="color: red">some <span>data</span></p>';
echo '<a href="#" data-desc="' . htmlspecialchars($desc) . '">' . $key . '</a>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:51:18.050

其他评论完全正确。不要这样做。除了某种标识符之外，在`id`属性中放置任何东西都是不合适的。

话虽如此，我想我会让你知道你的代码为什么会失败。[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)在尝试按预期使用数据之前，您需要先使用数据。这样，HTML 就不会被解释为 HTML……所有的 HTML 实体都将被转换为，所以你的属性值被解释为文本。 `<`变成`&lt;`，`>`变成`&gt;`等等。如果您稍后提取值（使用 jQuery 或其他），您将获得预期的文本。

# mysql - MySQL：如何总结行的值并对结果进行排序？

> ID：11073495
> 
> 赞同：3
> 
> 时间：2012-06-17T17:48:41.433
> 
> 标签：mysql, sorting, sum

我正在寻找一个总结一些特定值并对结果进行排序的 SQL 语句。更清楚地说：我有一个由标识符和值组成的表：

```
id     val
ab     10
ab     12
ab      3
cd     25
cd     10
ef      2
ef      7 
```

这里 ab、cd 和 ef 的所有值都必须按结果求和并排序，以便得到以下结果：

```
cd     35
ab     25
ef      9 
```

那么是否有一个 SQL 语句可以一次性执行该任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T17:50:38.830

```
SELECT id, SUM(val) as total
FROM your_table
GROUP BY id
ORDER BY total DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:51:55.237

使用群组功能`sum`：

```
select id, sum(val) as val from my_table group by id order by 2 desc 
```

# android - 如何通过在不同位置绘制 3 个球来修复该错误？

> ID：11073497
> 
> 赞同：0
> 
> 时间：2012-06-17T17:49:04.820
> 
> 标签：android, surfaceview, android-canvas

所以，我在屏幕顶部画了 3 个球。我正在使用表面视图。下面是绘图代码：

```
private void doDraw(Canvas c) 
{
    grid.Draw(c);
    nextBallsBar.Draw(c);
} 
```

网格：

```
public void Draw(Canvas c)
{
c.drawBitmap(Texture, 0, 0, null);
} 
```

NextBallsBar：

```
public class NextBallsBar
{
private Bitmap ball1;
private Bitmap ball2;
private Bitmap ball3;

public void SetNextBalls(BallType[] ballTypes)
{
ball1 = BallTexturesProvider.GetBallTexture(ballTypes[0]);
ball2 = BallTexturesProvider.GetBallTexture(ballTypes[1]);
ball3 = BallTexturesProvider.GetBallTexture(ballTypes[2]);
}

public void Draw(Canvas c)
{
    //Point _position = new Point((int) (400 * GameView.scaleX), (int) (42 * GameView.scaleY));        
    c.drawBitmap(ball1, (int) 200, (int) (42 * GameView.scaleY), null);

//_position = new Point((int) (_position.x - 60 * GameView.scaleX), _position.y);
    c.drawBitmap(ball2, (int) 150, (int) (42 * GameView.scaleY), null);

    //_position = new Point((int) (_position.x - 60 * GameView.scaleX), _position.y);
    c.drawBitmap(ball3, (int) 100, (int) (42 * GameView.scaleY), null);
} 
```

}

![问题](../Images/416d5efa6e8dd25c8cb3f3294c19c6a4.png)

应该只抽出3个彼此分开的球。就像我的 WP7 版本一样。

怎么了 ？拜托，我希望你能帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:17:23.843

可能不能解决你所有的问题，但你应该在重绘之前清除屏幕，使用类似的东西`c.drawColor(0xFF000000);`（用黑色填充它）。如果不重绘​​视图，您将看到当前帧后面的前一帧。当然，如果你的网格纹理覆盖了整个屏幕并且不使用透明度，这不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:31:55.360

我发现了问题！我的纹理是动画帧的串联。所以，我画的是整个纹理，而不是第一帧 :( 抱歉

# javascript - Spine.js mobile (phonegap) ReferenceError Jqueryify

> ID：11073502
> 
> 赞同：0
> 
> 时间：2012-06-17T17:49:34.430
> 
> 标签：javascript, node.js, cordova, spine.js

我的问题很像 Windows 上的 Hem 问题：[Uncaught module jqueryify not found](https://stackoverflow.com/questions/8705580/uncaught-module-jqueryify-not-found)

我无法使用phonegap将我的spine移动应用程序部署到android移动设备上，它可以在浏览器（linux）中完美运行，但是每当我在android设备上通过eclipse运行它（测试了各种版本）时，我都会收到：

```
06-17 18:39:36.878: E/Web Console(5976): ReferenceError: Can't find variable: require at file:///android_asset/www/index.html:9 
```

这是参考：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8>
  <title>App</title>
  <link rel="stylesheet" href="/application.css" type="text/css" charset="utf-8">
  <script src="/application.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript" charset="utf-8">
    var jQuery  = require("jqueryify"); //REFERENCED LINE 9
    var exports = this;
    jQuery(function(){
      var App = require("index");
      exports.app = new App({el: $("body")});      
    });
  </script>
</head>
<body>
</body>
</html> 
```

我已经通过 npm 安装了依赖项，并且还使用 Hem 构建了它，我有点迷失可能是什么问题。

任何想法为什么会发生这种情况？

****编辑****

问题是找不到 .js 文件，需要：

```
<script src="./application.js" type="text/javascript" charset="utf-8"></script> 
```

注意“。” 在 javascript 文件 src att.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:40:04.933

该错误特别意味着该`require`函数在执行您的内联脚本时未定义。由于`require`不是浏览器 JavaScript 的内置部分，这意味着应该提供的任何代码（可能是模块加载器库）要么没有被执行，要么失败。鉴于您的代码，那必须在`application.js`.

# authentication - jQuery mobile 和 PhoneGap 使用会话来确保用户无法“返回”或访问页面，除非已登录

> ID：11073508
> 
> 赞同：3
> 
> 时间：2012-06-17T17:51:07.813
> 
> 标签：authentication, jquery-mobile, cordova

我正在使用 PHP Web 服务制作一个应用程序来让用户登录/验证他们的凭据。

我正在使用 localStorage（phonegaps 本地存储 API 的一部分）来确保用户在打开应用程序时不必继续登录。这是通过将用户名和密码存储在本地存储中并在应用程序打开时检查它来完成的。如果他们觉得需要注销，我有一个简单的注销按钮绑定到一个点击事件，它会清除他们的本地存储。

```
 $( '#logout' ).live( 'tap',function(event){

    window.localStorage.clear();
    $.mobile.changePage("#loginPage", {transition: "none"});

}); 
```

但是...注销时，他们仍然可以单击手机上的后退按钮并进入安全区域，这没有意义，因为“欢迎，（用户名）”部分都搞砸了等等...

我想知道是否有办法确保他们打开的任何页面都会进行某种检查以确保他们已登录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T19:13:37.643

绑定到`pagebeforeshow`页面事件以检查用户是否已登录 - 检查凭据是否存在于本地存储中。

如果用户未登录，您可以通过修改传递给处理程序的参数来调用`preventDefault`停止`pageChange`或更好地将用户重定向到loggedOffPage 。`toPage`

请参阅[JQM 事件页面](http://jquerymobile.com/test/docs/api/events.html)`Page change events`上的部分。

# php - PHP“非对象”错误

> ID：11073516
> 
> 赞同：4
> 
> 时间：2012-06-17T17:52:26.970
> 
> 标签：php

我正在使用 PHP 开发一个小型 MVC 框架以进行练习。然而，PHP 似乎不喜欢我的 Controller 类。该类包含一个加载视图的加载器实例：

```
abstract class Controller
{
    public $load;
    function __construct($load) 
    {
        $this->load = $load;
    }
    abstract public function index();
} 
```

从那里，我可以覆盖我所有控制器的控制器。例如，我的索引控制器：

```
class Index extends Controller
{
    public function index()
    {
        $this->load->view("hello_world");
    }
} 
```

但是当我创建它时：

```
require 'Controller.php';
require 'Load.php'
require 'controllers/Index.php';
$i = new Index(new Load());
$i->index(); 
```

我收到此错误：

```
PHP Fatal error:  Call to a member function view() on a non-object in /var/www/controllers/Index.php on line 7 
```

你们能帮帮我吗？我*知道*我在构造函数中设置了负载，并且负载类*确实*有一个名为 view 的方法，那么为什么它会给我这个错误呢？另外：加载类，只是为了更好的衡量

```
class Load
{
    public function view($filename, $data = null)
    {
        if(is_array($data)) extract($data);
        include ROOT.DS.'views'.DS.$filename.'.php';
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T17:57:09.747

问题出在这段代码上，而且并不总是很明显：

```
class Index extends Controller
      ^^^^^
{
    public function index()
                    ^^^^^
    {
        $this->load->view("hello_world");
    }
} 
```

这是相同的名称，因此是 PHP 4 向后兼容的构造函数。然后不调用、`$load`不设置父的构造函数并且不定义函数。

知道了这一点，有很多解决方案，包括：

```
namespace DelishusCake; 
```

*引入命名空间*

这会自动解决您的问题。你需要把它放在文件的顶部。

```
class Index extends Controller
{
    public function index($load = NULL)
    {
        isset($load) && $this->load = $load;
        $this->load->view("hello_world");
    }
} 
```

*使 PHP4 向后兼容的构造函数工作*

或者：

```
class MyIndex extends Controller
{
    public function index()
    {            
        $this->load->view("hello_world");
    }
} 
```

*重命名类*

或者：

```
class Index extends Controller
{
    public function __construct($load) {
        parent::__construct($load);
    }
    public function index()
    {            
        $this->load->view("hello_world");
    }
} 
```

*添加一个 PHP 5 构造函数，调用父级的构造函数*

请记住，您只需要它，因为它的名称相同。[您也可以在PHP 手册的*Constructors and Destructors*页面](http://php.net/language.oop5.decon)上找到深入的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T17:55:37.523

您需要实例化父类。

```
class Index extends Controller
{
    public function __construct($load) {
      parent::__construct($load);
    }

    public function index() {
      $this->load->view("hello_world");
    }
} 
```

# shell - awk 用于（文件 2）中（文件 1）中的“任何”字符

> ID：11073522
> 
> 赞同：1
> 
> 时间：2012-06-17T17:53:16.477
> 
> 标签：shell, variables, awk

对于 (file 2) 中 (file 1) 中的文件名中包含的任何字符，awk 的最佳方法是什么？

到目前为止的代码：

```
$ sed -e 's/.*\ -\ //' -e 's/.mp3$//' File1.txt | while read z; do tit="$z" ; awk -v title="$tit" '{FS = "\t"} $2 ~ title {print $0}' File2.txt ; done 
```

结果; 它正在工作，除非它在文件名中使用 ( 命中文件。

我已经尝试过单引号和双引号，我能想到的一切，仍然没有运气。

**File1**：命名为“播放列表”，分隔符为：“-”

*   Peter Tosh - Na Goa Jail (Bonus Track).mp3

File1 字段为：“艺术家”“标题”

**File2：**命名为“Master-List”，分隔符为：tab

*   Peter Tosh Na Goa Jail 32000 /音乐/Peter Tosh/Peter Tosh - Na Goa Jail (Bonus Track.mp3

File2 字段为：“艺术家”“标题”“比特率”“路径”

使用上述示例...对于“播放列表”中的每个条目

1.  使用“播放列表”为 Field1 和 Field2 生成 2 个变量（艺术家标题）
2.  在 Master-List 中搜索 $title "Na Goa Jail (Bonus Track).mp3"
3.  如果匹配，检查 $artist 是否也匹配
4.  如果 $title 和 $artist 匹配，则打印 Master-List 中的第 4 列，否则打印“No Match”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:14:19.140

您可以通过执行以下操作获得相同（并且更简单）：

```
sed -e 's/.*\ -\ //' -e 's/.mp3$//' File1.txt | while IFS='\n' read z; do grep "$z" File2.txt; done 
```

注意循环使用 IFS（内部字段分隔符），默认情况下是*space*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T23:13:40.100

```
awk 'NR == FNR { artist[$1,$2]=1 ; next }          #Load the artiest/title file
     NR != FNR { if( artist[$1,$2] ) { print $4 }  #Check if artiest,title was loaded
                 else { print "no match" } }' artist-title artist-title-bitrate-path 
```

# java - 在 Android 中，我正在获取 BuildConfig.java 但不是 R.java 文件

> ID：11073524
> 
> 赞同：0
> 
> 时间：2012-06-17T17:53:24.777
> 
> 标签：java, android

> **可能重复：**
> [NetBeans 的 Android 项目中缺少 R.java](https://stackoverflow.com/questions/6133186/r-java-missing-in-android-project-in-netbeans)

在 Android 中，我正在获取`BuildConfig.java`文件，但无法生成`R.java File`.

请帮我这个问候。我试过了`Android Tool -> fix project properties`。但仍然无法运行。

我也尝试过清理和构建，但再次未能生成 R.Java。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:13:51.907

有时当这种情况发生在我身上时，是因为我更改了清单中的 package= 属性。这个属性决定了 R.java 的构建位置。搜索您的项目目录以查看是否构建了 R.java。如果是这样，并且它不是您的代码所期望的，您可能需要修复您的清单文件，或者将其导入引用它的代码中。

如果它根本没有建造，请尝试按照 imran 的建议进行清洁。如果这没有帮助，请仔细检查您的所有资源。如果资源的任何地方出现问题，它可以阻止生成 R.java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:56:20.197

在 Eclipse IDE 上删除 **BuildConfig.java**和**R.java**并从**Project->Clean...重新构建后尝试**

# r - 在ggplot2中制作没有轴编号/刻度的饼图

> ID：11073525
> 
> 赞同：4
> 
> 时间：2012-06-17T17:53:26.333
> 
> 标签：r, ggplot2

我一直在通过 ggplot2 学习方法，并且已经使用极坐标和制作饼图，但遇到了一些麻烦。

我想制作一个没有轴编号或刻度的饼图。我认为应该工作的代码示例是：

```
data = data.frame(Category = c("A", "B", "C", "D"), Value = runif(4))
ggplot(data, aes(0, weight = Value, fill = Category)) +
  scale_x_continuous(breaks = NA) +
  scale_y_continuous(breaks = NA) +
  geom_bar(binwidth = 1) +
  coord_polar(theta = "y") +
  scale_fill_brewer(pal = "Set1") 
```

这段代码给了我错误：

```
Error in if (ends_apart < 0.05) { : argument is of length zero 
```

在 scale_y_continuous 函数中省略 break 参数会导致绘图成功，但饼图半径上的编号和刻度线除外。省略 coord_polar（并在 scale_y_continuous 中保留 break 参数）函数会导致堆积条形图没有 x 或 y 编号或刻度线。

我找到了一些涉及更改刻度线选项的解决方案，这些应该是一个很好的解决方法，但我很好奇为什么会出现这个错误。

作为旁注：我已经卸载并重新安装了 ggplot2 以确保我拥有最新版本并且校验和都匹配。

编辑：澄清一下，我所追求的是：

[阴谋](http://i.imgur.com/I1o1n.png)

除了饼图上没有编号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T18:09:25.183

我想这就是你所追求的：

```
ggplot(data,aes(x = factor(0),y = Value,fill = Category)) + 
    geom_bar(stat = "identity",position = "fill") +
    scale_fill_brewer(palette = 'Set1') + 
    coord_polar(theta = "y") + 
    opts(axis.ticks = theme_blank(),
             axis.text.y = theme_blank(),
             axis.text.x = theme_blank()) 
```

**注意**：由于版本 0.9.2`opts`已被[替换](http://docs.ggplot2.org/current/theme.html)为`theme`：

```
+ theme(axis.ticks = element_blank(), 
        axis.text.y = element_blank(),
        axis.text.x = element_blank()) 
```

# c# - 将列表框内的列表框绑定到可观察的集合？最好的方法？

> ID：11073529
> 
> 赞同：1
> 
> 时间：2012-06-17T17:53:59.907
> 
> 标签：c#, wpf, xaml, binding, listbox

在 xaml 中，我有一个列表框，其中有一个 1 行和 2 列的网格。在第一列中我有一个名称，在第二列中我有另一个列表框...我将第一个列表框绑定到 Enclosure 项目的可观察集合。在 Enclosure 类中，我有另一个 observablecollection 服务器（另一个类）。我也在尝试将其绑定到列表框。当我将项目添加到可观察集合时，EnclosureID 正在正常工作和更新。但是，我不太确定如何让 Slist 绑定到我在另一个列表框中的列表框。有人有想法么？我可以使用另一种方法吗？

```
 public class Enclosure
    {
        private string enclosureID; //bound to the first listbox

        //I want to bind this below to the second listbox
        //There is another class called Server with various properties
        public ObservableCollection<Server> Slist = new ObservableCollection<Server>();

        public string EnclosureID
        {
            get { return enclosureID; }
            set { enclosureID = value; }
        }
    } 
```

在xml中：

```
 <ListBox x:Name="lb1" ItemsSource="{Binding}" DataContext="{Binding}" ScrollViewer.HorizontalScrollBarVisibility="Disabled">

        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>

        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <TextBlock x:Name="txtEnclosure" Text="{Binding Path=EnclosureID}" Background="Aqua" Grid.Column="0" Grid.Row="0" />
                    <ListBox x:Name="lbserver" ItemsSource="{Binding Slist}"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Grid.Column="1" Grid.Row="0">
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel/>
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>

                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock x:Name="txtServer" Text="{Binding Path=HostnameID}" Background="Beige"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

要填充列表，我使用此方法：

```
 //Query the database for enclosures and populate the Enclosure observable collection in the Settings class
    public void GetEnclosures()
    {
        bool exception = false;
        Enclosure enclosure = new Enclosure();
        Server server = new Server();
        server.HostnameID = "HEY";

        OleDbCommand GetEnclosuresCommand = new OleDbCommand(Settings.GetEnclosuresQuery, Settings.conn);

        Settings.conn.Open();
        try
        {
            Settings.myReader = GetEnclosuresCommand.ExecuteReader();//begin reading
        }
        catch
        {
            MessageBox.Show("The Enclosure table is currently being used by another application. Please close the table and run this application again.");
            Settings.conn.Close();
            exception = true;
        }

        if (!exception)
        {
            // while there are enteries to retrieve
            while (Settings.myReader.Read())
            {
                enclosure.EnclosureID = Settings.myReader.GetString(0);
                enclosure.Slist.Add(server);
                Settings.Elist.Add(enclosure);
                enclosure = new Enclosure();
                server = new Server();
                server.HostnameID = "HI";
            }

            // Close when done reading.
            Settings.myReader.Close();

            // Close the connection.
            Settings.conn.Close();
        }
        else
        {
            this.NavigationService.Navigate(new Uri("MainPage.xaml", UriKind.Relative));
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:58:04.597

可能是错的，但不是那么简单...

```
<ListBox 
  x:Name="lbserver" 
  ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
  Grid.Column="1" 
  Grid.Row="0" 
  ItemsSource="{Binding Slist}"> 
```

也改变这个

```
public ObservableCollection<Server> Slist = new ObservableCollection<Server>(); 
```

说

```
public ObservableCollection<Server> Slist { get; set; }
//...
Slist = new ObservableCollection<Server>(); 
```

# android - 包含视图的Android缩放尺寸

> ID：11073530
> 
> 赞同：0
> 
> 时间：2012-06-17T17:54:01.233
> 
> 标签：android, layout

我有一个视图，我使用 dip 定义了尺寸。

我想将其包含在不同大小的其他布局中。我想在包含标签中设置大小

```
<include
   android:id="@+id/abc"
   android:layout_width="100dip"
   android:layout_height="100dip"
   layout="@layout/myInclude" 
 /> 
```

将使我包含的布局按比例调整大小，但事实并非如此。因此，我在包含的布局中使用 dip 定义的所有内容都以相同的大小显示并破坏了布局。

这是预期的行为吗？我能做些什么来解决这个问题？

在包含的布局中使用带有权重的 LinearLayout 的可能解决方案，而不是在 dip 中使用硬编码。但是有了 dip 我有更多的控制权，并且不必到处使用 LinearLayouts ......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:21:29.160

如果您以 dip 或任何其他固定单位指定大小，它不会自动调整大小。这会很奇怪，通常当您硬编码您不希望调整视图大小的大小时。

布局权重（和线性布局）是唯一的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-30T20:05:10.327

可以在您的活动/片段中以编程方式缩放包含的视图。现在这就是我正在使用的。

# radio-button - 检查组中的哪个 RadioButton (Google AppScript)

> ID：11073531
> 
> 赞同：0
> 
> 时间：2012-06-17T17:54:05.697
> 
> 标签：radio-button, google-apps-script, radio-group

使用谷歌 AppScript。如何在组中找到选中的 RadioButton？如果它需要处理程序，则使用服务器一。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:28:10.850

对此有一个[未解决](http://code.google.com/p/google-apps-script-issues/issues/detail?id=506#c14)的问题，但也有一个很好的解决方法；-)（由 GAS TC 的 Romain Vialard 发现）

这是他的脚本的一个稍微修改过的版本，适用于在电子表格上运行：

```
function radiotest() {
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();
  var radioValue = app.createTextBox();
     radioValue.setId("radioValue").setName("radioValue");               
  // var radioValue = app.createHidden().setName("radioValue") ;// choose the one you like
  for(var i = 1; i < 10; i++){
    var name = 'choice '+i;
    var handler = app.createClientHandler().forTargets(radioValue).setText(name);
    panel.add(app.createRadioButton('radioButtonGroup',name).addValueChangeHandler(handler));
  }
  panel.add(radioValue);
  var Valide=app.createButton("Valide").setId("val");
  panel.add(Valide)                   
  app.add(panel);
//               
  var handler = app.createServerHandler("valide"); // this is the server handler
  handler.addCallbackElement(radioValue)
  Valide.addClickHandler(handler);
//
    SpreadsheetApp.getActiveSpreadsheet().show(app);// show app 
    }
    //
function valide(e){ ;// This function is called when key "validate" is pressed 
  var sh = SpreadsheetApp.getActiveSheet();
  var RadioButton = e.parameter.radioValue;               
  sh.getRange('A1').setValue(RadioButton);
  var app = UiApp.getActiveApplication();
  return app;
}​ 
```

请注意，radioValue 项目可以是文本框或隐藏文本，两种可能性都在脚本中/

# javascript - 为什么它不一次输出所有数组元素？

> ID：11073532
> 
> 赞同：0
> 
> 时间：2012-06-17T17:54:07.550
> 
> 标签：javascript

这段代码有什么问题：

```
var images = [];

function getImages() {
    var st = true;
    var i = 1;
    var url;
    var ob;

    while(st) {
        if(i < 10) {
            url = "http://rachel-b.org/gallery/albums/Events/2012/May%2008%20-%20Rachel%20Bilson%20Celebrates%20Edie%20Rose%20Home%20Collection/thumb_00" + i + ".jpg";
            ob = new Image();
            ob.src = url;
            st = checkIfImageExists(ob);
            images.push(ob);
        }

        if(i >= 10 && i < 100) {
            url = "http://rachel-b.org/gallery/albums/Events/2012/May%2008%20-%20Rachel%20Bilson%20Celebrates%20Edie%20Rose%20Home%20Collection/thumb_0" + i + ".jpg";
            ob = new Image();
            ob.src = url;
            st = checkIfImageExists(ob);
            images.push(ob);
        }

        if(i >= 100) {
            url = "http://rachel-b.org/gallery/albums/Events/2012/May%2008%20-%20Rachel%20Bilson%20Celebrates%20Edie%20Rose%20Home%20Collection/thumb_" + i + ".jpg";
            ob = new Image();
            ob.src = url;
            st = checkIfImageExists(ob);
            images.push(ob);
        }
        i++;
    }
}

function checkIfImageExists(o) {
    var e = document.createElement("img");
    e.style.display = "none";
    document.getElementsByTagName("body")[0].appendChild(e);
    e.src = o.src;
    var res = e.width;
    document.getElementsByTagName("body")[0].removeChild(e);

    console.log(res);
    if(res === 0) {
        return false;
    } else {
        return true;
    }
}

getImages();

function outPut() {
    for(var i = 0; i < images.length; i++) {
        console.log(images[i]);
    }
}

outPut(); 
```

​<a href="http://jsfiddle.net/rEA7k/7/" rel="nofollow">演示

为什么它不一次输出所有数组元素？同时，每按一次运行按钮，它就会输出 n+1 个数组元素。怎么来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:29:31.273

这是我的重写

找不到更多图像时[演示停止 - 在本例中为 106 个图像](http://jsfiddle.net/mplungjan/cW4d6/)

```
var images =[];
var baseUrl = "http://rachel-b.org/gallery/albums/Events/2012/May%2008%20-%20Rachel%20Bilson%20Celebrates%20Edie%20Rose%20Home%20Collection/thumb_";    
function pad(num) {
   var str = "00"+num;
   return str.substring(str.length-3);
}

function output() {
    for (var i=0;i<images.length;i++) {
      console.log(images[i].src)
    }
}
function getImages(){
  var ob = new Image();
  var url = baseUrl+pad(images.length+1)+".jpg"  
  ob.onload=function() {
    images.push(ob);
    getImages();      
  }    
  ob.onerror=function() {
    output();
  }    
  ob.src= url;
}
getImages(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T19:13:44.390

您的 checkIfImageExists() 函数是原因。我了解您要完成的工作，但是您正在检查宽度而没有给图像加载时间。您应该绑定到图像对象的 onload 和 onerror。（有关详细信息， 请参阅[http://lucassmith.name/2008/11/is-my-image-loaded.html ）。](http://lucassmith.name/2008/11/is-my-image-loaded.html)

如果你真的希望这些图像异步加载，这个 while 循环是非常危险的，你最好已经知道上限而不是试图猜测。如果你确实想要异步并且有一个未知的最大值......那么你应该一次将有限数量的图像分块来加载（以及添加某种类型的 setInterval。否则，通过这个设置，当你的服务器返回一个404 对于图像，您的脚本可能已经尝试加载数千个无效图像。

如果您需要代码示例，请告诉我，但这至少应该为您指明正确的方向。

# postgresql - 有可能吗，Postgresql 的 HStore 类型中嵌套哈希的语法是什么？

> ID：11073534
> 
> 赞同：9
> 
> 时间：2012-06-17T17:54:21.480
> 
> 标签：postgresql, postgresql-9.1, hstore

我什至不确定 Postgres 的 HStore 数据类型是否可以包含嵌套哈希，如果可以，如何插入它们？

这是我到目前为止所尝试的：

```
-- Database: test1

-- DROP DATABASE test1;
/*
CREATE DATABASE test1
  WITH OWNER = iainuser
       ENCODING = 'UTF8'
       TABLESPACE = pg_default
       LC_COLLATE = 'en_GB.UTF-8'
       LC_CTYPE = 'en_GB.UTF-8'
       CONNECTION LIMIT = -1;
*/
/* create extension hstore; */
/*drop table my_store;*/
/*
create table my_store (
  id serial primary key not null,
  doc hstore
);

CREATE INDEX my_store_doc_idx_gist
  ON my_store
  USING gist
  (doc);
*/
/* select doc from my_store; */
/*
insert into my_store (doc) values ( '"a" => "1"' );
select doc -> 'a' as first_key from my_store; -- returns "1"
*/

/* insert into my_store (doc) values ( '"b" => "c" => "3"' ); -- doesn't work */
/* insert into my_store (doc) values ( '"b" => ("c" => "3")' ); -- doesn't work */
/* insert into my_store (doc) values ( '"b" => hstore("c" => "3")' ); -- doesn't work */
/* insert into my_store (doc) values ( '"b"' => hstore("c" => "3")' ); -- doesn't work */
/* insert into my_store (doc) values ( "b"=>'"c"=>"3"'::hstore ); -- doesn't work */ 
```

如果不可能，是否有当前公认的使用嵌套哈希的标准/习惯用法 - 也许将它们分开并使用 id 引用它们？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T18:47:07.807

来自[精美手册](http://www.postgresql.org/docs/current/static/hstore.html)：

> 键和值只是文本字符串。

所以，不，您不能将 hstore 用作 hstore 中的值。如果您查看[hstore 运算符](http://www.postgresql.org/docs/current/static/hstore.html#HSTORE-OP-TABLE)和[函数](http://www.postgresql.org/docs/current/static/hstore.html#HSTORE-FUNC-TABLE)，您会发现它们都使用`text`值。

我不知道任何伪造嵌套哈希的标准方法。我怀疑你必须构造键（`a.b => c`for `a => b => c`），然后你可以这样：

```
select slice(doc, array['a.b', 'a.c'])
from my_store
where doc ?& array['a.b', 'a.c'] 
```

`doc`抓取每个具有`{b => ..., c => ...}`“子哈希”的“a”切片。

还有一种[JSON 类型](http://www.postgresql.org/docs/9.2/static/datatype-json.html)即将出现，它可能更适合您的需求。但是，你必须等待它，我不确定[最终的实现会是什么样子](http://wiki.postgresql.org/wiki/JSON_API_Brainstorm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T19:17:16.177

如果看到这种情况的任何人碰巧使用 ActiveRecord，[嵌套 Hstore](https://github.com/tombenner/nested-hstore)允许您将嵌套哈希存储在 hstore 中。它使用 JSON 序列化 hstore 值，并支持许多其他数据结构。

# javascript - addEventListner 的参数

> ID：11073535
> 
> 赞同：0
> 
> 时间：2012-06-17T17:54:24.847
> 
> 标签：javascript, addeventlistener

我有这个小提琴：http: [//jsfiddle.net/yub2B/4/](http://jsfiddle.net/yub2B/4/)

HTML：

```
<input type="text" />
<input type="text" />
<input type="text" />
<input type="text" /> 
```

JS：

```
function test(x)
{
    alert(x);
}

var text=document.getElementsByTagName("input");
for(var i=0,l=text.length;i<l;i++)
{
    text[i].addEventListener("keydown",function()
    {
        test(i);
    },false);
} 
```

而不是为第一个文本框输出 0，为第二个文本框输出 1 ......它总是输出 4。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T17:59:20.493

在循环内分配事件时，这是臭名昭著的循环问题。您`i`在每次迭代中传递相同的值，使用这个：

```
for(var i=0,l=text.length;i<l;i++)
{
   (function(i){
      text[i].addEventListener("keydown",function()
      {
         test(i);
      },false);

   })(i)
} 
```

## [更新小提琴](http://jsfiddle.net/yub2B/5/)

# java - 创建不同对象的实例列表

> ID：11073539
> 
> 赞同：14
> 
> 时间：2012-06-17T17:54:55.207
> 
> 标签：java, arrays, class, object, arraylist

我正在尝试创建一个包含不同类实例的数组列表。如何在不定义类类型的情况下创建列表？`(<Employee>)`

```
List<Employee> employees = new ArrayList<Employee>();
employees.add(new Employee());
Employee employee = employees.get(0); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-17T17:55:58.917

您可以创建一个对象列表，例如`List<Object> list = new ArrayList<Object>()`. 由于所有类的实现都从`java.lang.Object`类隐式或显式扩展，因此此列表可以包含任何对象，包括`Employee`、`Integer`等的实例`String`。

当您从此列表中检索一个元素时，您将检索到 an`Object`而不再是 an `Employee`，这意味着您需要在这种情况下执行显式转换，如下所示：

```
List<Object> list = new ArrayList<Object>();
list.add("String");
list.add(Integer.valueOf(1));
list.add(new Employee());

Object retrievedObject = list.get(2);
Employee employee = (Employee)list.get(2); // explicit cast 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-17T17:56:22.063

```
List<Object> objects = new ArrayList<Object>(); 
```

`objects`列表将接受任何`Object`

你可以设计如下

```
public class BaseEmployee{/* stuffs */}

public class RegularEmployee extends BaseEmployee{/* stuffs */}

public class Contractors extends BaseEmployee{/* stuffs */} 
```

并在列表中

```
List<? extends BaseEmployee> employeeList = new ArrayList<? extends BaseEmployee>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T18:03:28.730

我相信您最好的方法是将列表声明为对象列表：

```
List<Object> anything = new ArrayList<Object>(); 
```

然后你可以放任何你想要的东西，比如：

```
anything.add(new Employee(..)) 
```

显然，如果没有正确的转换，您将无法从列表中读取任何内容：

```
Employee mike = (Employee) anything.get(0); 
```

我不鼓励使用原始类型，例如：

```
List anything = new ArrayList() 
```

由于泛型的全部目的正是为了避免它们，因此未来 Java 可能不再支持原始类型，原始类型被视为遗留类型，一旦使用原始类型，就不允许在给定引用中使用泛型。例如，看看另一个问题：[Combining Raw Types and Generic Methods](https://stackoverflow.com/q/11007723/697630)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T18:01:42.827

`List anyObject = new ArrayList();`

`or`

`List<Object> anyObject = new ArrayList<Object>();`

现在`anyObject`可以抱了`objects of any type`。

使用**instanceof**来了解`what kind of object it is`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-17T17:56:28.803

如果您不能比`Object`您的实例更具体，请使用：

```
List<Object> employees = new ArrayList<Object>(); 
```

否则尽可能具体：

```
List<? extends SpecificType> employees = new ArrayList<? extends SpecificType>(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-17T18:11:44.140

> 如何在不定义类类型的情况下创建列表？( `<Employee>`)

如果我没看错，你只是想避免指定类型，对吗？

在 Java 7 中，你可以做

```
List<Employee> list = new ArrayList<>(); 
```

但是正在讨论的任何其他替代方案都只会牺牲类型安全性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-05T12:43:46.173

我看到所有答案都建议使用一个填充了 Object 类的列表，然后显式转换所需的类，我个人不喜欢这种方法。

对我来说更好的是创建一个接口，其中包含用于从/向我想要放入列表的某些类中检索或存储数据的方法。让这些类实现该新接口，将接口中的方法添加到它们中，然后您可以用接口对象填充列表 -`List<NewInterface> newInterfaceList = new ArrayList<>()`因此能够从列表中的对象中提取所需的数据，而无需显式转换任何内容。

如果需要对列表进行排序，也可以在界面中放置一个比较器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-07T12:23:59.450

我知道这是一个老问题，但有一种很好且简单的方法可以做到这一点（它适用于最新版本的 ElasticSearch Rest API）。

搜索对象如下：

```
 SearchResponse<JsonData> search = client.search(s -> s
  .index(index)
  .query(query),
  JsonData.class); 
```

然后我像这样迭代响应：

```
 for (Hit<JsonData> hit: search.hits().hits()) {
  String stringSource = hit.source().toString();
  MySavedRegister mySavedRegister = mapper.readValue(stringSource, mySavedRegister .class);
  mylist.add(esGenericEvent);
 } 
```

其中 mySavedRegister 代表具有命中源参数的类。

# c++ - 在文件中搜索 printf 语句并替换为字符串值

> ID：11073542
> 
> 赞同：1
> 
> 时间：2012-06-17T17:55:17.097
> 
> 标签：c++, stringstream, dev-c++

我正在尝试`printf`用字符串值替换所有语句。因此，首先，我将所有行读取到一个字符串中，如下所示：

```
 ifstream ifs;
 ifs.open(filename);
 string temp;
 string text;
 while(!ifs.eof())
 {
     getline(ifs, temp, '\t');
     text.append(temp);
     temp.clear();
 } 
```

然后我找到每一行`printf`，如果它找到，而不是用`"printf statement"`. **我的替换代码`printf`：**

```
char ch;
while(getline(is,check))
{
 ch=check[0];
    if(!isalpha(ch))
     {
      //statements..
     }
    else
     {
        string str2("printf");
        size_t found;
        found=check.find(str2);
           if(found!=string::npos)
              check="\n printf statement.\n";
       OriginalStr.append(check);

         check.clear();
     } 
```

它适用于三个四行文件，如下所示：

```
main()
{
Hi i am Adityaram.
and i am good boy.
and you?
printf("");
{
printf("");
Aditya
printf("");
Rammm
printf("");
Kumar
printf("");
{
printf("");

printf("");
}
printf("");
}
printf(""); 
```

但在这些文件行中找不到 printf 行。

```
main()
{
   char ch, file_name[25],*p;
   char answer[400];
   int size=0;
   FILE *fp;

   printf("Enter the name of file you wish to see ");
   gets(file_name);
} 
```

为什么找不到 printf 行？或者怎么办？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:49:12.197

我明白了，通过这种简单的方式：

```
string RemovePrintf(string value)
{
     string RemovedPrintf,strP;
     size_t poss;
     value.insert(0," ");//insert a white-space, cause  find method not returning position if it present at begin of string.
     poss = value.find("printf");    // position of "printf" in str
     strP = ""; // get insert whitespace at "printf line".
     strP.resize(strP.length());
     if((int)poss > 0)
      RemovedPrintf.append(strP);
     else
      RemovedPrintf.append(value);
     strP.clear();
     RemovedPrintf.resize(RemovedPrintf.length());
     return RemovedPrintf;
} 
```

这适用于小文件和大文件。顺便感谢您回答我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:58:02.913

由于这是一个 C 程序，您可能有如下行：

```
{ 
```

或者

```
} 
```

IE。打开/关闭一个块。这绝对不是空的，但它只会包含 1 个字符。在您`while i<6`的缓冲区结束后，您将继续前进。因此，添加一个`i`小于缓冲区长度的检查。

那么它可能会发生 printf 不一定是该行中的第一个表达式，例如：

```
if(something) printf("this"); 
```

你的代码没有选择这个。您将需要检查“printf”作为`wd`. 查看[http://www.cplusplus.com/reference/string/string/find/](http://www.cplusplus.com/reference/string/string/find/)以获取在字符串中查找字符串的参考。

最后但并非最不重要的一点是，我不明白为什么您希望您的行以字母开头（检查 isalpha）。这将无法更改代码，例如

```
{ printf("this"); } 
```

它适用于小测试文件的原因是因为很可能您编写它们是为了通过您的内部“测试”，但大文件通常包含更广泛使用的 printf。

此外，缩进不是必须与制表符 (\t) 一起发生的，它可能是简单的空格。

# mono - 如何在 Mono 2.10.8 上成功托管 ASP.NET MVC4 RC

> ID：11073545
> 
> 赞同：10
> 
> 时间：2012-06-17T17:55:58.657
> 
> 标签：mono, asp.net-mvc-4, mod-mono, xsp4

我正在尝试在 Mono 2.10.8.1 之上托管一个 ASP.NET MVC4 RC 项目。首次访问该应用程序时出现以下异常：

```
Missing method System.Web.Security.FormsAuthentication::get_IsEnabled() in assembly /usr/lib/mono/gac/System.Web/4.0.0.0__b03f5f7f11d50a3a/System.Web.dll, referenced in assembly /tmp/root-temp-aspnet-0/eaee30a1/assembly/shadow/5cf10065/40974e7d_1c664e18_00000001/System.Web.Http.WebHost.dll 
```

根据[http://www.mono-project.com/Compatibility](http://www.mono-project.com/Compatibility)这应该在 Mono 2.10.8 中实现。Microsoft 将该属性列为 .NET Framework 4.0：http: [//msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.isenabled.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.isenabled.aspx)

是否有某种解决方法，或者目前无法在 Mono 上托管 MVC4？

我应该注意，在 Apache2 上使用 XSP4 和 mod_mono 时我都遇到了这个问题。

单声道版本如下：

```
Mono JIT compiler version 2.10.8.1 (Debian 2.10.8.1-1~dhx1~lucid1)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
        TLS:           __thread
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  x86
        Disabled:      none
        Misc:          softdebug
        LLVM:          supported, not enabled.
        GC:            Included Boehm (with typed GC and Parallel Mark) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T15:06:09.780

TL/DR：仍然不推荐在 Mono 下运行 MVC4，而是运行 MVC3。

长话短说：在 Mono 2.10.x 发布时，Microsoft 尚未将 ASP.NET 堆栈作为开源完全发布（Razor 是仍然是封闭源代码的组件之一）。

最近微软终于开源了完整的堆栈，Mono 已经将它包含在他们的树中，但是这只发生在 master 分支中（并且只有 Mono 2.11.x 的预览版包含它）。此外，异步 API 尚未在 Mono 中实现（MVC4 依赖于它们），所以现在最好的选择是使用 MVC3，Mono 3.0.1 版本。

更长的故事：[http ://tirania.org/blog/archive/2012/Mar-28.html](http://tirania.org/blog/archive/2012/Mar-28.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-14T09:00:39.623

现在是可能的，并且在当前的单声道版本和使用 NuGet 上几乎是简单的。MS 已将 MVC4 内容放在 NuGet 上的事实有所帮助。我已将 .Net 4 和 .Net 4.5 的工作模板放在 github [https://github.com/chrisfcarroll/AspNetTemplatesForMono](https://github.com/chrisfcarroll/AspNetTemplatesForMono)上。有几个陷阱，但它们在注释中得到解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T20:49:55.913

您需要从源代码中编译新的 XSP

```
git clone git://github.com/mono/xsp.git
cd xsp
./autogen.sh --prefix=/opt
make
sudo make install 
```

此版本需要足够的权限才能运行`sudo...`，否则会收到`System.IO.FileNotFoundException`消息。

然后将这些行添加到您的 web.config 文件中

```
<system.web> 
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Helpers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />        
        <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />        
      </assemblies>
    </compilation> 
```

消除`CS0234: The type or namespace name Helpers does not exist in the namespace System.Web.`异常。

然后从您的 bin 文件夹中删除这些程序集（如果这些程序集是从 Windows 机器复制的）

```
Microsoft.Web.Infrastructure.dll
System.Net.Http.dll
System.Net.Http.Formatting.dll
System.Web.Http.dll
System.Web.Http.WebHost.dll 
```

这将删除`Missing method System.Web.Security.FormsAuthentication::get_IsEnabled()`异常和许多其他`could not load type xyz`异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-21T13:48:53.590

请按照以下链接在 Mono 上成功托管 MVC 4 应用程序。

[http://www.bgsoftfactory.net/run-asp-net-mvc-4-with-mysql-on-linux/](http://www.bgsoftfactory.net/run-asp-net-mvc-4-with-mysql-on-linux/)

它提供了在 Linux 服务器上的逐步配置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-20T15:15:06.150

如果您不需要它们，请删除对**System.Web.Http**和**System.Web.Http.Host的引用（WebApi 库）。**您可能需要删除**App_Start****文件夹**中的WebApiConfig.cs 和*Global.asax*中的引用。但在那之后，您的项目将可以正常工作，而不会出现任何其他问题。

# python - open() 函数 python 默认目录

> ID：11073553
> 
> 赞同：12
> 
> 时间：2012-06-17T17:56:59.183
> 
> 标签：python

我是新手，我不知道该`open()`函数的默认目录在哪里。

例如`open('whereisthisdirectory.txt','r')`

有人可以给我建议吗？我试过用谷歌搜索它（并查看stackoverflow），甚至将一个随机的txt文件放在这么多文件夹中，但我仍然无法弄清楚。由于我刚开始，我想立即学习，而不是每次打开文件时都输入**“c:/directory/whatevevr.txt” 。**谢谢！

ps 我的 python 目录已经安装到**C:\Python32**并且我使用的是 3.2

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-17T17:58:56.753

`os.getcwd()`

显示当前工作目录，这就是`open`相对路径的用途。您可以使用 更改它`os.chdir`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T18:24:35.863

答案不是特定于 python 的。与用任何其他语言编写的程序一样，默认目录是您的操作系统认为的当前工作目录。如果您从命令提示符窗口启动程序，则 CWD 将是您在运行程序时所在的目录。如果您从 Windows 菜单或桌面图标启动它，则 CWD 通常在创建图标时与程序路径一起定义，或者在没有该信息的情况下回退到 Windows 使用的某个目录。

在任何情况下，您的程序都可以通过调用来查询当前工作目录[`os.getcwd()`](http://docs.python.org/library/os.html#os.getcwd)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-07T10:42:07.607

如果您在 Windows 操作系统上工作，请先输入

```
import os 
```

然后输入

```
os.getcwd() 
```

它应该打印当前的工作目录。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-17T17:58:32.557

默认位置是 CWD（当前工作目录），因此如果您有 Python 脚本`c:\directory`并从那里运行它，如果您调用`open()`它，它将尝试打开在该位置指定的文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-22T14:10:11.063

首先，您必须导入：

```
import os 
```

然后打印当前工作目录：

```
os.getcwd() 
```

如果要更改当前工作目录：

```
os.chdir('your_complete_required_path') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-18T06:02:10.850

在您保存 .py 文件（CWD）的目录中创建 .txt 文件并运行 .py 文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-25T15:03:04.117

file 函数总是在当前`open()`工作目录中创建文件。找出当前工作目录的最好方法是找到三行小代码：

```
import os
current_working_directory = os.getcwd()
print(current_working_directory) 
```

运行上面的代码，你会得到你当前的工作目录，`open()`函数会在其中创建一个新文件。祝你好运！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-06T08:23:35.810

如果您通过解释器（即 pycharm、VSCode 等）运行脚本，则您的 Python 文件很可能会保存在我的文档中（至少在 VSCode 中，根据我的个人经验），除非您手动将其保存到您在运行它之前的选择。保存后，解释器将使用它作为您的当前目录，因此您的 Python 脚本将创建的任何保存也将自动转到那里，除非您另有说明。

# arrays - 跳过数组中的一行，Perl

> ID：11073557
> 
> 赞同：6
> 
> 时间：2012-06-17T17:57:23.957
> 
> 标签：arrays, perl, file, csv, compare

我对 Perl 比较陌生，我遇到了这个项目，我遇到了一些困难。该项目的目标是比较两个 csv 文件，其中一个将包含：$name、$model、$version 和另一个将包含：$name2、$disk、$storage 最后结果文件将包含匹配的行并将信息放在一起，如下所示：$name、$model、$version、$disk、$storage。

我已经设法做到了，但我的问题是，当缺少程序的元素之一中断时。当它遇到文件中缺少元素的行时，它会停在该行。我该如何解决这个问题？关于如何让它跳过该行并继续继续的任何建议或方法？

这是我的代码：

```
open( TESTING, '>testing.csv' ); # Names will be printed to this during testing. only .net       ending names should appear
open( MISSING, '>Missing.csv' ); # Lines with missing name feilds will appear here.

#open (FILE,'C:\Users\hp-laptop\Desktop\file.txt');
#my (@array) =<FILE>;
my @hostname;    #stores names

#close FILE;
#***** TESTING TO SEE IF ANY OF THE LISTED ITEMS BEGIN WITH A COMMA AND DO NOT HAVE A   NAME.
#***** THESE OBJECTS ARE PLACED INTO THE MISSING ARRAY AND THEN PRINTED OUT IN A SEPERATE
#***** FILE.
#open (FILE,'C:\Users\hp-laptop\Desktop\file.txt');
#test
if ( open( FILE, "file.txt" ) ) {

}
else {
  die " Cannot open file 1!\n:$!";

}

$count = 0;
$x     = 0;
while (<FILE>) {

  ( $name, $model, $version ) = split(",");    #parsing

  #print $name;
  chomp( $name, $model, $version );

  if ( ( $name =~ /^\s*$/ )
      && ( $model   =~ /^\s*$/ )
      && ( $version =~ /^\s*$/ ) )    #if all of the fields  are blank ( just a blank space)
  {

    #do nothing at all
  }
  elsif ( $name =~ /^\s*$/ ) {   #if name is a blank
    $name =~ s/^\s*/missing/g;
    print MISSING "$name,$model,$version\n";

    #$hostname[$count]=$name;
    #$count++;
  }
  elsif ( $model =~ /^\s*$/ ) {   #if model is blank
    $model =~ s/^\s*/missing/g;
    print MISSING"$name,$model,$version\n";
  }
  elsif ( $version =~ /^\s*$/ ) {   #if version is blank
    $version =~ s/^\s*/missing/g;
    print MISSING "$name,$model,$version\n";
  }

  # Searches for .net to appear in field "$name" if match, it places it into hostname array.
  if ( $name =~ /.net/ ) {

    $hostname[$count] = $name;
    $count++;
  }

#searches for a comma in the name feild, puts that into an array and prints the line into the missing file.
#probably won't have to use this, as I've found a better method to test all of the    feilds ( $name,$model,$version)
#and put those into the missing file. Hopefully it works.
#foreach $line (@array)
#{
#if($line =~ /^\,+/)
#{
#$line =~s/^\,*/missing,/g;
#$missing[$x]=$line;
#$x++;
#}
#}

}
close FILE;

for my $hostname (@hostname) {
  print TESTING $hostname . "\n";
}

#for my $missing(@missing)
#{
# print MISSING $missing;
#}
if ( open( FILE2, "file2.txt" ) ) {    #Run this if the open succeeds

  #open outfile and print starting header
  open( RESULT, '>resultfile.csv' );
  print RESULT ("name,Model,version,Disk, storage\n");
}
else {
  die " Cannot open file 2!\n:$!";
}
$count = 0;
while ( $hostname[$count] ne "" ) {
  while (<FILE>) {
    ( $name, $model, $version ) = split(",");    #parsing

    #print $name,"\n";

    if ( $name eq $hostname[$count] )    # I think this is the problem area.
    {
      print $name, "\n", $hostname[$count], "\n";

      #print RESULT"$name,$model,$version,";
      #open (FILE2,'C:\Users\hp-laptop\Desktop\file2.txt');
      #test
      if ( open( FILE2, "file2.txt" ) ) {

      }
      else {
        die " Cannot open file 2!\n:$!";

      }

      while (<FILE2>) {
        chomp;
        ( $name2, $Dcount, $vname ) = split(",");    #parsing

        if ( $name eq $name2 ) {
          chomp($version);
          print RESULT"$name,$model,$version,$Dcount,$vname\n";

        }

      }

    }

    $count++;
  }

  #open (FILE,'C:\Users\hp-laptop\Desktop\file.txt');
  #test
  if ( open( FILE, "file.txt" ) ) {

  }
  else {
    die " Cannot open file 1!\n:$!";

  }

}

close FILE;
close RESULT;
close FILE2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:07:34.340

我认为您想要[next](http://perldoc.perl.org/functions/next.html)，它可以让您立即完成当前迭代并开始下一个迭代：

```
while (<FILE>) {
  ( $name, $model, $version ) = split(",");
  next unless( $name && $model && $version );
  ...;
  } 
```

您使用的条件取决于您将接受的值。在我的示例中，我假设所有值都需要为真。如果它们不需要是空字符串，也许您可​​以检查长度：

```
while (<FILE>) {
  ( $name, $model, $version ) = split(",");
  next unless( length($name) && length($model) && length($version) );
  ...;
  } 
```

如果您知道如何验证每个字段，您可能有这些子程序：

```
while (<FILE>) {
  ( $name, $model, $version ) = split(",");
  next unless( length($name) && is_valid_model($model) && length($version) );
  ...;
  }

sub is_valid_model { ... } 
```

现在你只需要决定如何将它整合到你已经在做的事情中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T20:13:31.583

您应该首先在程序的顶部添加`use strict`和，并在首次使用时声明所有变量。这将揭示许多原本难以发现的简单错误。`use warnings``my`

您还应该使用 of`open`和词法文件句柄的三个参数，并且在打开文件时检查异常的 Perl 习惯用法是添加`or die`到`open`调用中。`if`成功路径的空块语句会浪费空间并变得不可读。`open`调用应该是这样的

```
open my $fh, '>', 'myfile' or die "Unable to open file: $!"; 
```

最后，在处理 CSV 文件时使用 Perl 模块要安全得多，因为使用简单的`split /,/`. 该[`Text::CSV`](https://metacpan.org/module/Text%3a%3aCSV)模块已为您完成所有工作，可在 CPAN 上使用。

您的问题是，在读取到第一个文件的末尾后，在第二个嵌套循环中再次从同一个句柄读取之前，您不会倒带或重新打开它。这意味着不会从该文件中读取更多数据，并且程序的行为就像它是空的一样。

仅仅为了配对对应的记录而读取同一个文件数百次是一个糟糕的策略。如果文件大小合理，您应该在内存中构建一个数据结构来保存信息。Perl 散列是理想的，因为它允许您立即查找与给定名称对应的数据。

我已经编写了您的代码的修订版来演​​示这些要点。由于我没有示例数据，因此测试代码对我来说会很尴尬，但是如果您仍然遇到问题，请告诉我们。

```
use strict;
use warnings;

use Text::CSV;

my $csv = Text::CSV->new;

my %data;

# Read the name, model and version from the first file. Write any records
# that don't have the full three fields to the "MISSING" file
#
open my $f1, '<', 'file.txt' or die qq(Cannot open file 1: $!);

open my $missing, '>', 'Missing.csv' 
    or die qq(Unable to open "MISSING" file for output: $!);
    # Lines with missing name fields will appear here.

while ( my $line = csv->getline($f1) ) {

  my $name = $line->[0];

  if (grep $_, @$line < 3) {
    $csv->print($missing, $line);
  }
  else {
    $data{$name} = $line if $name =~ /\.net$/i;
  }
}

close $missing;

# Put a list of .net names found into the testing file
#
open my $testing, '>', 'testing.csv'
    or die qq(Unable to open "TESTING" file for output: $!);
    # Names will be printed to this during testing. Only ".net" ending names should appear

print $testing "$_\n" for sort keys %data;

close $testing;

# Read the name, disk and storage from the second file and check that the line
# contains all three fields. Remove the name field from the start and append
# to the data record with the matching name if it exists.
#
open my $f2, '<', 'file2.txt' or die qq(Cannot open file 2: $!);

while ( my $line = $csv->getline($f2) ) {

  next unless grep $_, @$line >= 3;

  my $name = shift @$line;
  next unless $name =~ /\.net$/i;

  my $record = $data{$name};
  push @$record, @$line if $record;
}

# Print the completed hash. Send each record to the result output if it
# has the required five fields
#
open my $result, '>', 'resultfile.csv' or die qq(Cannot open results file: $!);

$csv->print($result, qw( name Model version Disk storage ));

for my $name (sort keys %data) {

  my $line = $data{$name};

  if (grep $_, @$line >= 5) {
    $csv->print($result, $data{$name});
  }
} 
```

# iphone - ASIHTTPRequest 简单发布失败

> ID：11073558
> 
> 赞同：1
> 
> 时间：2012-06-17T17:57:27.957
> 
> 标签：iphone, objective-c, ios, post, asihttprequest

我是objective-c 的新手，我现在正在尝试在iPhone 上编写一个简单的用户登录程序。我的想法是使用 ASIHTTPrequest 中的类将信息发布到 localhost 中的 php 文件，该文件链接到 db。我设置了一个按钮，如果你按下它，它就会发出 post 请求。但是，没有向 db 插入任何内容。这是我的代码：

.h 文件：

```
@interface ViewController : UIViewController
-(IBAction)post; 
```

.m 文件：

```
#import "ViewController.h"
#import "ASIHTTPRequest.h"
#import "ASIFormDataRequest.h"

@implementation ViewController

-(IBAction)post {
    NSURL *url = [NSURL URLWithString:@"localhost:8888/index.php"];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setPostValue:@"paul" forKey:@"user"];
    [request setPostValue:@"12345" forKey:@"pw"];
} 
```

index.php 文件：

```
<?php
include('database.php');
session_start();
$link = connect_mysql();
mysql_select_db("test",$link);

if (($_POST["user"]=="")||($_POST["pw"]=="")) { header('Location:error.html'); exit(); }
      $sql = 'select * from userinfor where name="'.$_POST["user"].'";';
      $result = mysql_query($sql, $link);
      $pass= mysql_fetch_object($result);
      if ($pass) { header('Location:again.html'); exit();}
      if ($_POST["pw"]!=$_POST["pw2"]) { header('Location:error2.html'); exit();}
      $sql = 'INSERT INTO userinfor (name, password) values ("'.$_POST["user"].'","'.$_POST["pw"].'")';
      $result = mysql_query($sql, $link);
      if (!$result) {
        echo "DB Error, could not query the database\n";
        echo 'MySQL Error: '. mysql_error();
        exit();
      } else {
        echo 'Sucessfully added entry<br/>';
        echo '<a href="login.html">Click to login</a>';
      }
?> 
```

数据库.php 文件：

```
<?php
function connect_mysql() {
  //Connect to database (Please specify the password field if you needed
    $link = mysql_connect('localhost', 'root', '12345');
    if (!$link) {
      die('Could not connect to mysql');
    }

    $db = mysql_select_db('test', $link);
    if (!$db) {
      die('Could not select database');
    }

   return $link;

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:40:21.367

问题是你没有对你的请求说启动请求。添加

```
[request startAsynchronous]; 
```

或者

```
[request startSynchronous]; 
```

此外，由于您必须成为请求的代表，请务必添加方法（通过：成为代表`[request setDelegate:self];`）：

```
- (void)requestFinished:(ASIHTTPRequest *)request;

- (void)requestFailed:(ASIHTTPRequest *)request; 
```

# c# - (int)myDouble 是否与 (int)Math.Truncate(myDouble) 不同？

> ID：11073563
> 
> 赞同：17
> 
> 时间：2012-06-17T17:58:48.323
> 
> 标签：c#, .net, math

有`(int)myDouble`什么不同`(int)Math.Truncate(myDouble)`吗？

有什么理由我应该更喜欢其中一个吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T18:08:12.000

[`Math.Truncate`](http://msdn.microsoft.com/en-us/library/c2eabd70.aspx)适用于当您需要将结果保留为没有小数部分的双精度数时。如果您想将其转换为 int，只需直接使用强制转换即可。

**编辑**：作为参考，这里是来自“<a href="http://msdn.microsoft.com/en-us/library/yht2cx7b.aspx" rel="noreferrer">Explicit Numeric Conversions Table”的相关文档：

> 当您从 double 或 float 值转换为整数类型时，该值将被截断。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-17T18:08:12.893

**正如Ignacio Vazquez-Abrams** 所指出的那样，当 myDouble 太大时，它`(int)myDouble`会以同样的方式失败。`(int)Math.Truncate(myDouble)`

因此输出没有差异，但`(int)myDouble`工作速度更快。

# java - java肥皂客户端

> ID：11073564
> 
> 赞同：-1
> 
> 时间：2012-06-17T17:58:50.353
> 
> 标签：java, php, soap

在 php 中有一个类[SoapClient](http://php.net/manual/en/soapclient.soapclient.php)我需要一个 Java 中的等价类，有人知道类或库吗？

例如，在 PHP 中，我可以这样做：

```
$client = new SoapClient("http://xxx/yy/login.php?wsdl");
$ticket=$client->__soapCall('getXxx',array('login','senha')); 
```

我如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:15:54.353

考虑应用 Apache CXF 可能是个好主意。您可以简单地将 WSDL 传递给将自动为您生成 Java API 的类生成器。

生成的 API 将是一堆具有某种外观的类。这个 Façade 可以被实例化并用作其他 java 类。其背后的逻辑或多或少是这样的：当调用某个方法时，生成的类将创建一个 SOAP 请求，将其请求到 Web 服务端点，获取响应，将其转换为 Java 对象并作为普通方法返回调用。

[阿帕奇 CXF](http://cxf.apache.org/)

试一试，我很确定你会喜欢它（我在 PHP 中也使用 SOAPServer 和 SOAPClient 工作了很长时间）。

一些提示：

1.  您可以下载它并使用 WSDL to Java 生成 Java Façade： [https](https://cwiki.apache.org/CXF20DOC/wsdl-to-java.html) ://cwiki.apache.org/CXF20DOC/wsdl-to-java.html简单如`wsdl2java -client HelloWorld.wsdl`
2.  在生成 java 之后，您可以将生成的一堆类添加到您的项目中并开始使用它（当然也需要导入 Apache CXF 库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:15:22.517

这取决于您使用的 WS 框架，例如，axis 架构[描述](http://axis.apache.org/axis/java/architecture-guide.html)您如何使用客户端轴应用程序，[Spring WS](http://static.springsource.org/spring-ws/site/reference/html/client.html)提供其他开发方式，[JavaEE](http://docs.oracle.com/javaee/5/tutorial/doc/bnayn.html)其他，BTW 用于测试您可以使用[soapUI 应用程序](http://www.soapui.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T18:16:47.973

[*Apache SOAP for Java*](http://ws.apache.org/axis/)定义了各种类来构建您自己的 SOAP 客户端。[*您可以参考“客户端 SOAP*](http://www.soapuser.com/client2.html) ”
中有关客户端实现的文章[](http://www.soapuser.com/client2.html)

# objective-c - 日历将事件位置存储到数组对象

> ID：11073566
> 
> 赞同：1
> 
> 时间：2012-06-17T17:59:17.013
> 
> 标签：objective-c, macos, cocoa, calendar-store

这是我在此的头一篇博文。我对 Obj-C 只有一点经验。我在 Lion 上的 XCode 3 中非常不推荐使用的 AppleScript Studio 中进行开发，但创建了一些 Obj-C 库供我的软件使用。这些库旨在将值传入和传回 AppleScript。其中之一访问日历存储。如果我的术语是无可救药的，请原谅我。:)

问题在于尝试将“事件位置”放入可变数组中的对象中，该数组可以返回给 AppleScript。除了位置之外，我可以通过这种方式成功获得事件的大多数属性。

这是（部分）代码，其中包含我在评论中收到的构建错误：

```
NSEnumerator *eventEnumerator = [[calStore eventsWithPredicate:predicate] objectEnumerator];
   id event;
   while (event = [eventEnumerator nextObject]) {
NSMutableArray *eachEvent = [NSMutableArray arrayWithCapacity:10];

// the following, and most other properites not included here, works fine:

if ([event notes] == nil) {
[eachEvent addObject:[NSString stringWithFormat:@""]];
}
else
{
[eachEvent addObject:[event notes]]; //#06
}

@try {
if ([event location] == nil {
// error:
// invalid operands to binary == (have 'CGFloat' and 'struct NSNull *')

// incompatible type for argument 1 of 'addObject:'

[eachEvent addObject:[NSString stringWithFormat:@""]];
}
else
{
[eachEvent addObject:[event location]]; //#10
// error: incompatible type for argument 1 of 'addObject:'
}
}
@catch(NSException *exception) {
[eachEvent addObject:[NSString stringWithFormat:@"-10-"]];  // #10 dummy for location 
}

// now add all properties of this event (eachEvent) to all events information (eventInformation)
[eventInformation addObject:eachEvent];
   }
   return eventInformation;
} 
```

我尝试而不是`if ([event location] = nil {`使用`if ([event location] == [NSNull null])`相同的错误。

任何人都可以对此有所了解，希望有正确的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:38:53.850

您应该尽量避免测试`NSString`反对`NULL`，`nil`或其他什么。这主要是您在 C 或 C++ 中使用的东西。在目标 C 中，您可以执行以下操作：

```
...
if ( [ [event location] IsEqualToString:@""] ) {
... 
```

**但是，这仅在 [event location] 不等于 nil 时才有效，如**下面的 Richard 所指出的。在 Objective-C 中，当你尝试运行类似的东西时不会引发错误`[nil IsEqualToString:@""]`，它只是返回*nil*。if/then 将因此不会被执行。他的替代方案更安全：

```
...
if ( [ [event location] length ] == 0 ) {
... 
```

PS：有关 IsEqualTo 方法范围的信息，请参阅苹果网站或您的 XCode 上的文档。您可以将一个字符串与整个丢失的有趣的其他事物进行比较。

PPS：另一件事可能是您`[eachEvent location]`在未初始化位置属性的事件上使用。这确实是理查德的修正派上用场的情况。

让我知道它是否仍然不起作用！

# c# - 如何仅使用 c# 代码在图像对象上创建旋转动画（在 WPF 窗口内）

> ID：11073573
> 
> 赞同：9
> 
> 时间：2012-06-17T17:59:54.177
> 
> 标签：c#, wpf, animation, rotation

我有几个与同一类事情有关的未解决问题，

我对 WPF 很陌生，但对 C# 和 Winforms 很有经验。

我在互联网上四处寻找一个可行的示例，但还没有找到一个可行的示例。

我想要实现的是在 C# 函数中创建以下内容

*   创建图像（图像 1）
*   创建图像（图 2）
*   将图像并排放在窗口上
*   创建故事板
*   动画 image1 的旋转属性从 0 到 360 (animation1)
*   将图像 2 的不透明度属性从完全变为不可见 (animation2)
*   故事板应该运行 10 秒，动画 1 从 0 秒开始，动画 2 从 5 秒开始

为明确的代码请求道歉，但是，我已经看过并尝试过，我之前的问题有完整的代码执行但没有显示动画（下面的链接）

[如何使用 c# 代码在 wpf 中创建情节提要和旋转图像](https://stackoverflow.com/questions/11057127/how-to-create-a-storyboard-and-rotating-an-image-in-wpf-using-c-code/11058289#11058289)

提前致谢

担。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-17T19:34:58.870

这是您问题的有效 XAML 版本，后跟 C# 中的相同内容。可能不完全是你所追求的，但它应该说明它。

XAML 版本：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Storyboard x:Key="Storyboard" BeginTime="00:00:00.000" Duration="00:00:10.000">
            <DoubleAnimation Storyboard.TargetName="RotateImage" 
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)" 
                             From="0" To="360" BeginTime="00:00:05.000" Duration="00:00:05.000" />
            <DoubleAnimation Storyboard.TargetName="OpacityImage" 
                             Storyboard.TargetProperty="Opacity" 
                             From="1" To="0" Duration="00:00:10.000" />
        </Storyboard>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Image x:Name="RotateImage" Stretch="Uniform" Source="Chrysanthemum.jpg">
            <Image.RenderTransform>
                <RotateTransform Angle="0" />
            </Image.RenderTransform>
        </Image>
        <Image x:Name="OpacityImage" Grid.Column="1" Stretch="Uniform" Source="Desert.jpg" />
        <Button Grid.Row="1" Grid.ColumnSpan="2" Content="Start">
            <Button.Triggers>
                <EventTrigger RoutedEvent="Button.Click">
                    <BeginStoryboard Storyboard="{StaticResource Storyboard}" />
                </EventTrigger>
            </Button.Triggers>
        </Button>
    </Grid>
</Window> 
```

和 C# 版本：

```
 public MainWindow()
    {
        InitializeComponent();

        Image rotateImage = new Image()
        {
            Stretch = Stretch.Uniform,
            Source = new BitmapImage(new Uri("pack://application:,,,/Chrysanthemum.jpg")),
            RenderTransform = new RotateTransform()
        };
        Image opacityImage = new Image()
        {
            Stretch = Stretch.Uniform,
            Source = new BitmapImage(new Uri("pack://application:,,,/Desert.jpg"))
        };

        LayoutRoot.Children.Add(rotateImage);
        LayoutRoot.Children.Add(opacityImage);

        Grid.SetColumn(opacityImage, 1);

        Storyboard storyboard = new Storyboard();
        storyboard.Duration = new Duration(TimeSpan.FromSeconds(10.0));
        DoubleAnimation rotateAnimation = new DoubleAnimation()
        {
            From = 0,
            To = 360,
            Duration = storyboard.Duration
        };
        DoubleAnimation opacityAnimation = new DoubleAnimation()
        {
            From = 1.0,
            To = 0.0,
            BeginTime = TimeSpan.FromSeconds(5.0),
            Duration = new Duration(TimeSpan.FromSeconds(5.0))
        };

        Storyboard.SetTarget(rotateAnimation, rotateImage);
        Storyboard.SetTargetProperty(rotateAnimation, new PropertyPath("(UIElement.RenderTransform).(RotateTransform.Angle)"));
        Storyboard.SetTarget(opacityAnimation, opacityImage);
        Storyboard.SetTargetProperty(opacityAnimation, new PropertyPath("Opacity"));

        storyboard.Children.Add(rotateAnimation);
        storyboard.Children.Add(opacityAnimation);

        Resources.Add("Storyboard", storyboard);

        Button button = new Button()
        {
            Content = "Begin"
        };
        button.Click += button_Click;

        Grid.SetRow(button, 1);
        Grid.SetColumnSpan(button, 2);

        LayoutRoot.Children.Add(button);
    }

    void button_Click(object sender, RoutedEventArgs e)
    {
        ((Storyboard)Resources["Storyboard"]).Begin();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T11:21:33.507

动画工作如下。

1-程序创建一个计时器。

2-程序以设定的时间间隔检查计时器，看看已经过去了多少时间。

3-每次程序检查计时器时，它都会根据经过的时间计算矩形的当前不透明度值。

4-程序然后用新值更新矩形并重新绘制它。

以下是创建 Rectangle 并为其设置动画的代码。

```
<Window x:Class="Animation.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Animated Rectangle" Height="350" Width="525">
<Grid>
    <StackPanel Margin="10">
        <Image Name="MyImage" Source="e:\a.jpg" Width="100" Margin="50" ></Image>
        <Rectangle
            Name="MyRectangle"
            Width="100" 
            Height="100"
            Fill="Blue">

            <Rectangle.Triggers>
                <!-- Animates the rectangle's opacity. -->
                <EventTrigger RoutedEvent="Rectangle.Loaded">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation
                                Storyboard.TargetName="MyImage" 
                                Storyboard.TargetProperty="Opacity"
                                From="1.0" To="0.0" Duration="0:0:3" 
                                AutoReverse="True" RepeatBehavior="Forever" />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Rectangle.Triggers>
        </Rectangle>
    </StackPanel>
</Grid> 
```

# tomcat - 如何处理 SSL 证书的浏览器警告

> ID：11073575
> 
> 赞同：1
> 
> 时间：2012-06-17T18:00:10.977
> 
> 标签：tomcat, browser, ssl, ssl-certificate

对于开发，我们使用的是自签名 SSL 证书，它似乎工作正常，除了一个问题，即当用户第一次单击 URL 浏览器时会显示有关证书无效的警告，我们可以通过告诉浏览器轻松绕过它我们信任这个网站。

我有一个用例，我需要在 Iframe 中加载一些数据，并且需要使用 HTTPS 选择数据，并且该过程是隐藏的，并且 Iframe 仅在用户单击某个链接时可见。我的问题是针对第一次访问该站点的用户，当单击该链接时会收到浏览器错误消息。

有没有办法让浏览器信任我们的自签名证书而不显示警告消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T19:04:45.497

这些天来，真的没有理由使用自签名证书然后尝试弄清楚如何抑制客户端警告。相反，请访问[http://www.startssl.com/](http://www.startssl.com/)并为自己获取一个免费证书，该证书可以被所有最近的 Web 浏览器识别 ( [http://en.wikipedia.org/wiki/Startssl#Trustedness](http://en.wikipedia.org/wiki/Startssl#Trustedness) )。登录他们的网站有点麻烦（他们要求您下载客户端证书并将其安装到您的浏览器中，然后才能申请服务器证书），但是您可以获得免费的、受信任的 SSL 证书。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T18:02:59.177

您仅有的两个选择是告诉用户将其浏览器配置为接受您的组织签署的证书，或者让某些 CA 浏览器信任签署的证书。

# apache - Magento中的301重定向不起作用

> ID：11073576
> 
> 赞同：0
> 
> 时间：2012-06-17T18:00:51.293
> 
> 标签：apache, magento, redirect, http-status-code-301

我刚刚将一个站点移至 magento，但并非所有的 url 都保持不变。我在更改 301 时遇到问题。

首先，我使用的是 magento 多站点设置，并且在我的 .htaccess 文件中运行了以下代码：

```
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]
SetEnvIf Host www\.domain1\.com MAGE_RUN_CODE=website1code
SetEnvIf Host www\.domain1\.com MAGE_RUN_TYPE=website
SetEnvIf Host ^domain1\.com MAGE_RUN_CODE=website1code
SetEnvIf Host ^domain1\.com MAGE_RUN_TYPE=website

SetEnvIf Host www\.domain2\.net MAGE_RUN_CODE=website2code
SetEnvIf Host www\.domain2\.net MAGE_RUN_TYPE=website
SetEnvIf Host ^domain2\.net MAGE_RUN_CODE=website2code
SetEnvIf Host ^domain2\.net MAGE_RUN_TYPE=website 
```

这是我尝试重定向的网址的一个示例：

```
old:  http://domain1.com/category
new:  http://domain1.com/v1/category 
```

这是我尝试过的：

1）首先我尝试在 .htaccess 文件中添加一个简单的行：

```
redirect 301 /category http://domain1.com/v1/category 
```

2）我还尝试按照此处的指南在管理面板中使用内置的 url 重写管理器

```
http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/urlrewrite/index 
```

和 [http://www.magentocommerce.com/wiki/3__-_store_setup_and_management/seo/how_to_work_with_magento_url_rewrite_rules](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/seo/how_to_work_with_magento_url_rewrite_rules)

我在管理面板中使用了以下设置：

```
type: custom
store: chose
id path: /category
request path: /category
target path: http://domain1.com/v1/category
redirect: 301 
```

有人可以解释我做错了什么，并建议直接 .htaccess 编辑或在管理区域内的替代方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:06:12.963

`.htaccess`下面是从我的最后一个虚拟主机上重定向到子目录的 301 域。请注意，此文件夹所在的域不是下面显示的域（实际上是我个人资料中的域），因此它是其他域指针的子目录类型。

```
RewriteEngine On
RewriteRule ducatitech/(.*) http://www.ducatitech.com/$1 [R=301]
Redirect 301 /ducatitech http://www.ducatitech.com 
```

除了与您分享上述内容外，我还没有对 magento 多商店安装进行任何域共享。

# javascript - 如何将“n”定义为任何自然基数变量

> ID：11073577
> 
> 赞同：1
> 
> 时间：2012-06-17T18:01:02.647
> 
> 标签：javascript, jquery, variables, numbers

所以我一直想做这样的事情，但从来不知道如何使用未定义的自然变量（例如1、2、3、4、5 ...）

我想要这样的东西：

```
if($("#container").width() == 400*n) {
  //do something
} 
```

在这种情况下，n 可以是任何自然基数（最好不是零）。你怎么定义`n`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T18:02:49.040

[模数](http://en.wikipedia.org/wiki/Modulo_operation)运算符的理想场所

```
if ($("#container").width() % 400 === 0) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T18:09:15.977

JavaScript 不会为您求解具有未知数的方程；在任何给定时间，变量始终保持特定值。

因此，您似乎想做的事情（如果我正确理解您的问题）是不可能的。相反，您需要解决您给自己的方程式：

```
$("#container").width() == 400 * n 
```

可以重述为

```
$("#container").width() / 400 == n 
```

现在，由于您需要`n`是整数，所以上面的语句意味着除法`$("#container").width()`将产生一个整数。“将*a*除以*x*产生一个整数”的要求通常用模运算符（`%`在 JavaScript 中）表示为`a % x == 0`. 因此，您最终得到：

```
$("#container").width() % 400 == 0 
```

# html - html5 视频仅适用于 safari

> ID：11073584
> 
> 赞同：1
> 
> 时间：2012-06-17T18:02:02.847
> 
> 标签：html, video, safari

我是 HTML 5 新手，向 w3schools 学习

我试图让 html 视频代码适用于我拥有的文件。问题是 html 仅适用于 safari，但不适用于我拥有的其他浏览器。

请问有什么想法吗？

谢谢

```
<!DOCTYPE html>
<html>
<body>

<video width="320" height="240" controls="controls">
  <source src="candonjoel.mp4" type="video/mp4" />
  <source src="candonjoel.webm" type="video/webm" />
<source src="candonjoel.ogg" type="video/ogg" />

Your browser does not support the video tag.
</video>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:40:10.390

candonjoel.webm 存在吗？你能显示你的代码的URL吗？

[https://github.com/kaihendry/recordmydesktop2.0/](https://github.com/kaihendry/recordmydesktop2.0/)是使截屏视频更容易从 Linux 到所有浏览器的项目。

# asp.net - 如何实现内部/强大的站点搜索功能？

> ID：11073585
> 
> 赞同：0
> 
> 时间：2012-06-17T18:02:38.917
> 
> 标签：asp.net, webforms

我为我们公司开发了一个网站，到目前为止还没有搜索功能。现在我们正在考虑开发一个站点的搜索工具。大多数时候我们的页面内容来自db。我们有 HTML 编辑器，我们的员工可以通过它向 db 输入 HTML 内容，然后该内容显示在页面上，但很少有东西仍然是静态的，这意味着页面中很少有东西是硬编码的，这些也很重要，比如菜单内容等。现在我想要当用户输入一些词进行搜索时，它将搜索数据库和文件，因为该词可能在文件中被硬编码。所以指导我如何开发这种搜索，搜索将基于文件和数据库。如果可能的话，在这里讨论并推动我走向文章。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:01:37.573

作为起点，下面的 MSDN 代码示例展示了如何实现一个可以在 ASP.NET 网站中搜索内容（文章或帖子...）的搜索引擎。它实际上搜索数据库内容......

[在 ASP.NET 中实现搜索引擎 (CSASPNETSearchEngine)](http://code.msdn.microsoft.com/CSASPNETSearchEngine-52f5392c#content)

# codeigniter - 未定义方法 CI_Loader::plugin() 出错

> ID：11073588
> 
> 赞同：0
> 
> 时间：2012-06-17T18:02:53.663
> 
> 标签：codeigniter, authentication

我收到以下错误：

> 在第 1233 行调用 C:\wamp\www\Code\application\libraries\DX_Auth.php 中未定义的方法 CI_Loader::plugin()

在这段代码上：

```
function captcha()
 {

    $this->ci->load->helper('url');

    $this->ci->load->plugin('dx_captcha');

    $captcha_dir = trim($this->ci->config->item('DX_captcha_path'), './'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:44:55.793

您使用的是哪个版本的 CI？自 2.x 以来，插件已被删除并替换为 helper。尝试改用[reCaptcha](http://codeigniter.com/wiki/ReCAPTCHA)，它有一个很好的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:15:00.720

确保您已将 application/config/autoload.php 中的任何数组值从 $autoload['plugins'] 移动到 $autoload['helpers'] ，否则您会发现东西坏了。

这是[参考](http://philsturgeon.co.uk/blog/2010/05/upgrading-to-codeigniter-2.0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T05:56:02.357

解决此问题的一种简单方法是，您只需将此代码放入您的`loader.php`. 该插件的作品。去`System->Core->Loader.php`。

```
 /**
      * Load Plugin
       *
      * This function loads the specified plugin.
       *
     * @access      public
       * @param       array
      * @return      void
       */
     function plugin($plugins = array())
     {
              if ( ! is_array($plugins))
              {
                      $plugins = array($plugins);
             }

             foreach ($plugins as $plugin)
             {       
                      $plugin = strtolower(str_replace(EXT, '', str_replace('_pi', '', $plugin)).'_pi');              

                     if (isset($this->_ci_plugins[$plugin]))
                     {
                             continue;
                     }

                      if (file_exists(APPPATH.'plugins/'.$plugin.EXT))
                      {
                              include_once(APPPATH.'plugins/'.$plugin.EXT);   
                      }
                      else
                      {
                              if (file_exists(BASEPATH.'plugins/'.$plugin.EXT))
                              {
                                      include_once(BASEPATH.'plugins/'.$plugin.EXT);  
                              }
                              else
                              {
                                      show_error('Unable to load the requested file: plugins/'.$plugin.EXT);
                              }
                      }

                      $this->_ci_plugins[$plugin] = TRUE;
                      log_message('debug', 'Plugin loaded: '.$plugin);
              }               
      }

      // --------------------------------------------------------------------

      /**
       * Load Plugins
       *
       * This is simply an alias to the above function in case the
       * user has written the plural form of this function.
       *
       * @access      public
       * @param       array
       * @return      void
       */
      function plugins($plugins = array())
      {
              $this->plugin($plugins);
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T19:01:33.533

我认为您正在尝试在新版本的 CodeIgniter 上使用旧版本的 DX_Auth。当前版本的 DX_Auth 与 CI 2.x 兼容，可在[github](https://github.com/eyoosuf/DX-Auth)上找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T18:14:40.783

您正在尝试加载插件并且不支持插件，如果我记得自 CI 版本 2 以来正确的话。如果是这种情况（似乎是），您需要将插件转换为帮助程序。

# opencv - OpenCV libopencv_core.so.2.4.1 文件未找到

> ID：11073589
> 
> 赞同：2
> 
> 时间：2012-06-17T18:02:56.610
> 
> 标签：opencv, ffmpeg, cmake

我正在尝试在 Scientific Linux SL 版本 5.0 (Boron) 上设置具有 FFMPEG v0.11 支持的 OpenCV v2.4.1，但我遇到了一个丢失文件的问题，该文件似乎完全没有记录。我得到的错误如下：

```
-- Install configuration: "Release"

-- Up-to-date: /home/s18/s1138832/OpenCV/include/opencv/cv.h
-- Up-to-date: /home/s18/s1138832/OpenCV/include/opencv/cxmisc.h
-- Up-to-date: /home/s18/s1138832/OpenCV/include/opencv/cvwimage.h
-- Up-to-date: /home/s18/s1138832/OpenCV/include/opencv2/opencv.hpp
CMake Error at modules/core/cmake_install.cmake:63 (FILE):
file INSTALL cannot find file
  "/home/s18/s1138832/OpenCV/lib/libopencv_core.so.2.4.1" to install.
Call Stack (most recent call first):
  modules/cmake_install.cmake:57 (INCLUDE)
  cmake_install.cmake:56 (INCLUDE) 
```

老实说，我现在不知道从哪里开始解决这个问题。几天前我在没有 ffmpeg 的情况下成功安装，但现在我什至无法在 ffmpeg 支持设置为关闭的情况下安装。

链接到缺失库的文件是：

```
lrwxrwxrwx 1 s1138832 s18      21 Jun 17 18:26 libopencv_core.so ->    libopencv_core.so.2.4
lrwxrwxrwx 1 s1138832 s18      23 Jun 17 18:26 libopencv_core.so.2.4 -> libopencv_core.so.2.4.1 
```

任何朝着正确方向的建议或刺激都将不胜感激。我也很乐意提供更多关于我可能遗漏的有趣细节的信息。

更新：这个网站似乎有同样的错误，但我无法阅读它并且翻译不完整 - [http://www.opencv.org.cn/forum/viewtopic.php?f=1&t=15664](http://www.opencv.org.cn/forum/viewtopic.php?f=1&t=15664) ( [http:// translate.google.com/translate?sl=auto&tl=en&js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&u=http%3A%2F%2Fwww.opencv.org.cn%2Fforum%2Fviewtopic.php%3Ff% 3D1%26t%3D15664&act=url](http://translate.google.com/translate?sl=auto&tl=en&js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&u=http%3A%2F%2Fwww.opencv.org.cn%2Fforum%2Fviewtopic.php%3Ff%3D1%26t%3D15664&act=url) )

libopencv_core.so.2.4.1 在“make”之后存在，但“make install”会以某种方式将其删除。我复制它并再次添加它，但它没有改变任何东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:22:57.243

和往常一样，这是一件非常简单的事情！我将 CMAKE_INSTALL_PREFIX 设置为“/foo”，并且正在从“/foo”进行配置和构建——当我从“/foo/temp”进行配置时，一切都很顺利。

我猜 make install 步骤会尝试将您构建的文件复制到安装前缀路径，并删除原始文件。显然，这可能会导致一些问题。现在就像一个魅力。

感谢所有提出建议的人！

# ruby-on-rails - ruby on rails - 关于 Base::cookier_verifier_secret 的弃用警告

> ID：11073592
> 
> 赞同：0
> 
> 时间：2012-06-17T18:03:34.543
> 
> 标签：ruby-on-rails, ruby, cookies, upgrade, deprecated

将应用程序从 2.3 升级到 3.0，现在得到了这些。解决此问题的最佳选择是什么，以便最终将其删除时我不会遇到问题。？

`DEPRECATION WARNING: ActionController::Base.cookie_verifier_secret= is deprecated. Please configure it on your application with config.secret_token=. (called from <top (required)> at /home/durrantm/Dropnot/webs/rails_v3/linker/config/initializers/cookie_verification_secret.rb:7)`

我应该设置什么值`secret_token`？
我在代码中的哪个位置设置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:24:41.447

修复是改变：

```
config/initializers/cookie_verification_secret.rb 
```

改变：

```
ActionController::Base.cookie_verifier_secret= 
```

到

```
ActionController::Base.config.secret_token= 
```

# haskell - Haskell 的代数数据类型：“伪扩展”

> ID：11073595
> 
> 赞同：5
> 
> 时间：2012-06-17T18:04:21.230
> 
> 标签：haskell, algebraic-data-types

我正在学习 Haskell 中的代数 DT。我想做的是创建一个新的 ADT 来“扩展”现有的 ADT。我找不到如何表达我想要的东西，有人可以提出替代模式或提出解决方案。我希望它们是不同的类型，但复制和粘贴就像一个愚蠢的解决方案一样接缝。下面的代码最好地描述了我正在寻找的东西。

```
data Power =
  Abkhazia |
  -- A whole bunch of World powers and semi-powers
  Transnistria
    deriving (Eq, Show)

data Country = 
  --Everything in Power | 
  Netural |
  Water
    deriving (Eq, Show) 
```

编辑：我认为它需要一点澄清......我希望能够做到这一点（在 ghci 中）

```
let a = Abkhazia :: Country 
```

并不是

```
let a = Power Abkhazia :: Country 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T18:07:46.403

您需要将它们表示为一棵树：

```
 data Power
      = Abkhazia
      | Transnistria
    deriving (Eq, Show)

  data Country 
      = Powers Power -- holds values of type `Power`
      | Netural      -- extended with other values.
      | Water
    deriving (Eq, Show) 
```

* * *

编辑：您对问题的扩展使这变得更简单： Country 和 Power 类型都具有一些作为“国家”的共同行为。这建议您使用 Haskell 的开放、可扩展*类型类*特性来为数据类型提供常见行为。例如

```
 data Power = Abkhazia | Transistria 

  data Countries = Neutral | Water 
```

然后，Power 和 Country 共享的东西的类型类：

```
 class Countrylike a where
      landarea :: a -> Int -- and other things country-like entities share

  instance Countrylike Power where
      landarea Abkhazia    = 10
      landarea Transistria = 20

  instance Countrylike Countries where
      landarea Neutral     = 50
      landarea Water       = 0 
```

那么您可以`landarea`在大国或国家/地区干净利落地使用。您可以在未来通过添加更多实例将其扩展到新类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T22:55:40.680

```
{-# LANGUAGE GADTs, StandaloneDeriving #-}
data POWER
data COUNTRY

data CountryLike a where
    Abkhazia :: CountryLike a 
    Transnistria :: CountryLike a
    Netural :: CountryLike COUNTRY
    Water :: CountryLike COUNTRY

deriving instance Show (CountryLike a)
deriving instance Eq (CountryLike a)

type Power      = CountryLike POWER
type Country    = CountryLike COUNTRY

foo :: Power
foo = Abkhazia

bar :: Country
bar = Abkhazia

baz :: Country
baz = Netural 
```

编辑：另一种选择是`type Power = forall a. CountryLike a`（优点：创建 .`Power`的子类型`Country`。缺点：这将使例如`Power -> Int`更高级别的类型，这往往很烦人（类型推断等））

# r - R - 将一个矩阵汇总到另一个矩阵

> ID：11073599
> 
> 赞同：2
> 
> 时间：2012-06-17T18:05:13.597
> 
> 标签：r, matrix, summary

我有两个矩阵。第一个包含值，第二个包含与这些值对应的名称。我想将第一个矩阵中的值与第二个矩阵中的相应名称相加。

例如，给定以下两个示例矩阵：

```
set.seed(9)
matrix_names=matrix(sample(paste("name",1:10,sep=""),replace=T),nrow=2,ncol=4); matrix_names
matrix_values=matrix(sample(1:10,8,replace=T),nrow=2,ncol=4); matrix_values 
```

我想制作类似的东西：

```
matrix_names   sum(matrix_values)
  name1                1
  name2                6 
  name3               15  
  name4               15
  name5                5 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:31:23.193

```
un <- unique(as.vector(matrix_names))
df <- sapply(un, function(x) sum(matrix_values[which(matrix_names == x)]))
df[order(names(df))]
name1 name2 name3 name4 name5 
    1     6    15    15     5 
```

# authentication - Symfony2 - 成功登录后重定向

> ID：11073600
> 
> 赞同：2
> 
> 时间：2012-06-17T18:05:20.813
> 
> 标签：authentication, login, symfony

我刚刚开始学习 Symfony 2 教程。我创建了一个包含用户类的捆绑包，并尝试按照说明设置登录过程。我想我快到了，但是我目前正处于最后一个障碍。

我设置了一个包：Dan\AuthBundle，其中包含我的用户类和另一个包：Dan\HelloBundle，我希望只允许登录用户访问。

我的 security.yml 文件如下：

```
security:
    encoders:
        Dan\AuthBundle\Entity\User: sha512

    providers:
        main:
            entity: { class: Dan\AuthBundle\Entity\User, property: username }
        administrators:
            entity: { class: DanAuthBundle:User }

    firewalls:
        secured_area:
            pattern:    ^/*
            form_login:
                check_path: /login_check
                login_path: /login
                always_use_default_target_path: false
                default_target_path: /hello

    access_control:
        - { path: ^/hello/.* } 
```

主 routing.yml 文件如下所示：

```
DanAuthBundle:
    resource: "@DanAuthBundle/Resources/config/routing.yml"
    prefix:   /auth/

DanHelloBundle_homepage:
pattern:  /hello/
defaults: { _controller: DanHelloBundle:Default:index }

login:
    pattern: /login
    defaults: {_controller: DanAuthBundle:Default:login }

login_check:
    pattern: /login_check 
```

我手动创建了我的用户类的几个实例。

如果我尝试访问 url /hello，我会正确地重定向到登录页面。如果我输入了错误的详细信息，我会在模板中收到正确的消息，但是，当我使用正确的详细信息登录时，我会收到 324（空响应）错误（此时，浏览器中显示的 url是登录检查）。

通过阅读文档，我认为我应该被重定向到我最初尝试访问的页面？

[http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form](http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form)

> 默认情况下，如果提交的凭据正确，用户将被重定向到请求的原始页面（例如 /admin/foo）。如果用户最初直接进入登录页面，他将被重定向到主页。这可以高度自定义，例如，允许您将用户重定向到特定 URL。

此外，如果我在输入正确的详细信息后尝试访问该页面，我将再次被重定向到登录页面。

谁能看到我是否遗漏了任何明显的东西？

这是来自我的日志文件：

> [2012-06-18 18:33:47] 教义.调试：从用户 t0 选择 t0.id 作为 id1，t0.username 作为用户名 2，t0.salt 作为 salt3，t0.hashed_pa​​ssword 作为 hashed_pa​​ssword4 从用户 t0 WHERE t0.username = ？(["hello"]) [] [] [2012-06-18 18:33:47] security.INFO: 用户 "hello" 已通过身份验证成功 [] [] [2012-06-18 18:33:47 ] event.DEBUG：监听器“Symfony\Component\Security\Http\Firewall::onKernelRequest”停止了事件“kernel.request”的传播。[] [] [2012-06-18 18:33:47] event.DEBUG：没有为事件“kernel.request”调用监听器“Symfony\Bundle\FrameworkBundle\EventListener\RouterListener”。[] [] [2012-06-18 18:33:47] event.DEBUG：没有为事件“kernel.request”调用监听器“Symfony\Bundle\AsseticBundle\EventListener\RequestListener”。[] [] [2012-06-18 18:33:47] event.DEBUG：通知事件“kernel.response”到监听器“Symfony\Component\Security\Http\Firewall\ContextListener::onKernelResponse”。[] [] [2012-06-18 18:33:47] security.DEBUG: 在会话中写入 SecurityContext [] []

任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-02T11:25:17.200

```
// if you're using Symfony 2.0
$key = '_security.target_path';
// if you're using Symfony 2.1 or greater
// where "main" is the name of your firewall in security.yml
$key = '_security.main.target_path';

// try to redirect to the last page, or fallback to the homepage
if ($this->container->get('session')->has($key)) {
  $url = $this->container->get('session')->get($key);
  $this->container->get('session')->remove($key);
} else {
  $url = $this->container->get('router')->generate('homepage');
}

return new RedirectResponse($url); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T10:01:41.980

你需要2个听众。

*   在会话最后一页设置一个

*   成功登录后第二次重定向

该链接将解决您的问题：[http ://www.reecefowell.com/2011/10/26/redirecting-on-loginlogout-in-symfony2-using-loginhandlers/](http://www.reecefowell.com/2011/10/26/redirecting-on-loginlogout-in-symfony2-using-loginhandlers/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-04-16T14:20:56.593

只需在您的相应操作（您正在呈现登录表单视图的位置）中使用 getUser 检查，如下所示：

`if($this->getUser()){ return $this->redirect($this->generateUrl('your-redirect-path-alise')); }`

# html - CSS 字体大小细节

> ID：11073602
> 
> 赞同：4
> 
> 时间：2012-06-17T18:05:54.153
> 
> 标签：html, css, rendering, font-size

我有几个关于字体大小的具体问题：

1.  pt（IE 12pt）是否标准化？我想我在某处读到 pt = 1/72 英寸。但是，Photoshop 中 24pt 字体的大小与 css 中 24pt 字体的大小有很大不同。
2.  字体大小究竟决定了什么？它是一种关于字母大小的不规范的任意描述，还是实际上是指字母的特定高度或宽度属性？

谢谢堆栈！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T18:38:05.423

font-size 是字体的基线高度（大写 H 字符的高度）加上其上方的小空间（上升部分）和下方较大的空间（下降部分）。

对于特定字体大小的特定字体，基线高度将始终是相同的大小。以下是一些基于 Arial 字体测量的示例：

```
font-size    baseline height
   10           7
   11           8
   12           9
   14           10 
```

理论上，对于 CSS，pt 是基线高度的粗略近似值，以 px 为单位。例如，font-size:9pt 的基线高度为 9px，对应于 font-size:12px。在实践中，我有时会发现 pt 比基线高度大 0.5 到 1.0 px。

这是一个[jsfiddle](http://jsfiddle.net/Matt_Coughlin/bJM8W/)，显示了 px 和 pt 中大写 H 的并排比较。

In most PSDs I've seen, a font specified as 12pt is in fact 12px. But this may vary. When in doubt, measure the baseline height of the text and convert backwards from that to a font-size in px. For instance, if a capital H has a height of 9px, then the font-size is 12px. Sometimes antialiasing in a PSD makes it difficult to accurately measure the baseline height.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T18:15:30.207

您可以从有关 Photoshop 和 CSS 中字体大小的类似问题中查看[此处。](https://stackoverflow.com/questions/3868627/photoshop-pt-size-conversion-to-web)

在[这里](http://www.sherriwyche.com/tools/fontconversion.html)您可以找到一个不错的转换表：您会注意到 Photoshop 中的 PT 等同于 CSS 中的 PX。我认为您不应该在两者中都使用 PT。

最后，[在这里](http://en.wikipedia.org/wiki/Point_(typography))您可以阅读一些关于 PT 在排版中的历史（是的，您是对的，大约 1pt = 1/72 英寸）:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T20:18:04.640

1.  在[CSS 2.1](http://www.w3.org/TR/CSS2/)（当前规范）中，pt 无疑是 1/72 英寸。然而，实际情况有所不同，这反映在[CSS3 值和单位草案](http://www.w3.org/TR/css3-values/)第 5 节中。它描述了两种设置，使用不同的“锚单元”。如果像素是锚点单位，英寸（`in`作为 CSS 单位）不一定是英寸（物理单位，2.54 毫米），因此 的含义`p`也可能有所不同。这就是为什么在某些软件`pt`中 CSS 不需要匹配的原因之一。`pt`

2.  字体大小是字体的基本属性。它与字符尺寸之间的任何关系都取决于字体设计者，但字体设计当然不是任意的。CSS 2.1 规范对此相当含糊，但该公式仍然有用（反对许多常见的误解）：“字体大小对应于 em 正方形，这是排版中使用的概念。请注意，某些字形可能会在它们的 em 方格之外流血。” （另一方面，大多数字形只使用 em 方格的一小部分。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T18:16:52.370

在 CSS 中以像素为单位测量字体通常是更好的做法。就像您问的问题一样，pt size 非常随意，并且因开发人员自己的定义而异。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-17T18:14:12.890

字体中的“pt”仅用于打印 CSS。这是一个链接，它解释了大小类型之间的所有差异 [http://css-tricks.com/css-font-size/](http://css-tricks.com/css-font-size/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-17T18:17:25.603

您可以直接查看有关 CSS 的 W3C 官方文档，了解[font-size](http://www.w3.org/TR/CSS2/fonts.html#font-size-props)属性的详细信息。

对于您关于`pt` *in CSS含义的问题，*[官方文档](http://www.w3.org/TR/CSS2/syndata.html#length-units)再次显示是的，它是 1/72 英寸。

请记住，在不同的应用程序中，您可以缩放屏幕，因此更多地考虑这些值用于印刷媒体，而不是屏幕媒体。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-12T12:11:59.370

1)

在**打印**css 中，pt 正好是 1/72 英寸。

在**屏幕** css 中，一切都以像素为单位定义，一个 pt 定义为 1 1/3 像素。但是，在英寸等物理测量中，这有多大取决于屏幕 DPI，并且在设备之间有很大差异。出于这个原因，pt（以及其他物理测量值，如 in、cm 等）在屏幕 css 中没有那么有用。

2)

字体大小是指“em-box”的高度 - 稍微简化一下，这是可以包含字体中所有字母的矩形，包括升序和降序。当然，单个字母通常比整个 em-box 占用更少的空间。例如，小写的 x 将在上方和下方留有空间，而小写的 j 可能会填满 em-box 的整个高度。

因此，字体大小表示一行文本需要多少垂直空间，但单个字母和字形的尺寸相对于其他字母和字形会有所不同，具体取决于所使用的字母和字体设计。

此外，一些字体可能有甚至在 em 框之外延伸（“出血”）的字母，这也是字体设计者的风格选择。例如，字母“Å”通常会出现在 em-box 上方。

# grails - Grails GORM：如何在一对多关系中“取消”孩子的属性？

> ID：11073603
> 
> 赞同：0
> 
> 时间：2012-06-17T18:06:00.193
> 
> 标签：grails, properties, nullable, one-to-many, children

我有两个域类的单向一对多关系：

```
package net.peddn

class User {
    static hasMany = [texts: Text]
    String username 
} 
```

和

```
package net.peddn

class Text {

    long creator
    String title

    static constraints = {
        creator( nullable: true )
    }   
} 
```

我的用户控制器如下所示：

```
package net.peddn

class UserController {

static scaffold = true

    def delete() {

        def userInstance = User.get(params.id)

        userInstance.texts.each { text ->
            text.creator = null
        }           

        userInstance.delete(flush: true)

} 
```

我的 BootStrap.groovy 看起来像这样：

```
import net.peddn.Text
import net.peddn.User

class BootStrap {

    def init = { servletContext ->

    User user = new User(username: "username")

    user.save(flush: true)

    Text text1 = new Text(title: "titel 1", creator: user.id)

    Text text2 = new Text(title: "titel 2", creator: user.id)

    user.addToTexts(text1)

    user.addToTexts(text2)

    user.save(flush: true)

    }

    def destroy = {
    }

} 
```

当我现在尝试删除我的用户时，我收到以下错误：

```
| Server running. Browse to http://localhost:8080/usertexts
| Error 2012-06-17 19:33:49,581 [http-bio-8080-exec-4] ERROR errors.GrailsExceptionResolver  - IllegalArgumentException occurred when processing request: [POST] /usertexts/user/index - parameters:
id: 1
_action_delete: Löschen
Stacktrace follows:
Message: null
    Line | Method
->>   21 | doCall    in net.peddn.UserController$_delete_closure1
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     19 | delete    in net.peddn.UserController
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread 
```

如果我将代码更改为

```
text.creator = 0 
```

在 UserController.groovy 中完美运行。

顺便说一句：我使用了这个域模型，因为我不希望在删除用户时删除 Text 对象。但我也想知道谁创建了 Text 对象。如果有人对此问题有更好的解决方案，请告诉我。

谢谢！彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:01:59.857

最后我找到了正确的[提示](http://grails.1312388.n4.nabble.com/How-can-I-save-null-into-database-which-the-column-is-int-td1390720.html)。看来这是一个铸造问题。看：

[升级到 Grails 2.0 时的 Groovy Primitive Type Cast Gotcha](http://lauripiispanen.github.com/blog/2012/02/23/groovy-primitive-type-cast-gotcha-when-upgrading-to-grails-2-dot-0/)

因此，我将 Text 域类的原始“long”属性更改为其“盒装”版本“Long”：

```
package net.peddn

class Text {

    Long creator
    String title

    static constraints = {
        creator( nullable: true )
    }   
} 
```

现在可以将属性设置为null！

感谢托马斯的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:00:03.373

使用您当前的实现，请尝试是否可行：

```
 def delete() {

        def userInstance = User.get(params.id)

        userInstance.texts.each { text ->
            userInstance.removeFromTexts(text)
        }           

        userInstance.delete(flush: true)
    } 
```

如果您想要双向关系 User-Texts 并且您不希望在删除用户时删除文本，您可以更改此行为。在此处查看有关 Hibernate 中级联的文档部分：[自定义级联](http://grails.org/doc/latest/guide/GORM.html#customCascadeBehaviour)。您可以像这样更改映射：

```
class User {
    static hasMany = [texts: Text]

    static mapping = {
        texts cascade: "save-update"
    }
} 
```

# javascript - 无法在 IE 和 Mozilla 中访问 javascript 的类对象变量

> ID：11073605
> 
> 赞同：0
> 
> 时间：2012-06-17T18:06:24.423
> 
> 标签：javascript, jquery

我在 javascript 中有一个类，在其中我定义了一些属性和方法，并且我创建了一个数组并创建了该类的实例值并将其推入其中。之后我迭代了数组并检查了特定方法的属性，但在 IE 和 mozilla 中它显示为未定义。我在下面给出了您的详细信息的代码。

班级：

```
function DateDetail(date, isBefore, isAfter, isNow) {
this.Date = date;
this.MonthNo = this.Date.getMonth();
this.DayNo = this.Date.getDate();
this.Year = this.Date.getFullYear();
this.IsAfter = isAfter;
this.IsBefore = isBefore;
this.IsNow = isNow;
this.GetMonthValue = function () {
    return this.Date.toString("MMM-yyyy");
    };
} 
```

方法

```
function GetTableDataClass(data) {
if (data.IsAfter)
    return "after";
else if (data.IsBefore)
    return "before";
else if (data.IsNow)
    return "now";
else
    return " ";
} 
```

调用方法

```
GetTableDataClass(item) 
```

我得到的数据在 Mozilla 和 IE 中是未定义的。请让我知道任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:28:57.930

如果您得到的`data`是未定义的，那么您的问题是`item`您传递给的值`GetTableDataClass`是未定义的。您必须注意，在 JavaScript`undefined`中是变量可以具有的值（就像`null`在 C# 中一样）。

如果您`item`从数组中获取，请确保您获取的索引存在。如果索引不存在，它将返回`undefined`. （例如：`var a = [1,2,3]; alert(a[3])`这会提醒`undefined`）。

# python - 如何按一段时间对DataFrame进行分组？

> ID：11073609
> 
> 赞同：59
> 
> 时间：2012-06-17T18:07:39.223
> 
> 标签：python, pandas

我有一些来自日志文件的数据，想按一分钟对条目进行分组：

```
 def gen(date, count=10):
     while count > 0:
         yield date, "event{}".format(randint(1,9)), "source{}".format(randint(1,3))
         count -= 1
         date += DateOffset(seconds=randint(40))

 df = DataFrame.from_records(list(gen(datetime(2012,1,1,12, 30))), index='Time', columns=['Time', 'Event', 'Source']) 
```

东风：

```
 Event  Source
 2012-01-01 12:30:00     event3  source1
 2012-01-01 12:30:12     event2  source2
 2012-01-01 12:30:12     event2  source2
 2012-01-01 12:30:29     event6  source1
 2012-01-01 12:30:38     event1  source1
 2012-01-01 12:31:05     event4  source2
 2012-01-01 12:31:38     event4  source1
 2012-01-01 12:31:44     event5  source1
 2012-01-01 12:31:48     event5  source2
 2012-01-01 12:32:23     event6  source1 
```

我尝试了这些选项：

1.  `df.resample('Min')`级别太高，想聚合。
2.  `df.groupby(date_range(datetime(2012,1,1,12, 30), freq='Min', periods=4))`异常失败。
3.  `df.groupby(TimeGrouper(freq='Min'))`工作正常并返回一个`DataFrameGroupBy`对象以供进一步处理，例如：

    ```
    grouped = df.groupby(TimeGrouper(freq='Min'))
    grouped.Source.value_counts()
    2012-01-01 12:30:00  source1    1
    2012-01-01 12:31:00  source2    2
                         source1    2
    2012-01-01 12:32:00  source2    2
                         source1    2
    2012-01-01 12:33:00  source1    1 
    ```

*但是*，`TimeGrouper`该类没有记录。

按时间分组的正确方法是什么？如何按一分钟和源列对数据进行分组，例如`groupby([TimeGrouper(freq='Min'), df.Source])`？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-17T18:56:19.437

您可以对与 DataFrame 长度相同的任何数组/系列进行分组——甚至是一个实际上不是 DataFrame 列的计算因子。因此，按分钟分组，您可以执行以下操作：

```
df.groupby(df.index.map(lambda t: t.minute)) 
```

如果您想按分钟和其他内容进行分组，只需将上述内容与您要使用的列混合：

```
df.groupby([df.index.map(lambda t: t.minute), 'Source']) 
```

就我个人而言，如果我想经常对它们进行分组，我发现只向 DataFrame 添加列以存储其中一些计算的东西（例如，“分钟”列）很有用，因为它使分组代码不那么冗长。

或者你可以尝试这样的事情：

```
df.groupby([df['Source'],pd.TimeGrouper(freq='Min')]) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-04-20T12:25:20.000

由于原始答案相当陈旧，并且熊猫引入了[句](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Period.html) 点，因此现在有一个不同的解决方案：

```
df.groupby(df.index.to_period('T')) 
```

此外，您可以[重新采样](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.resample.html)

```
df.resample('T') 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2020-07-13T06:29:36.303

pd.TimeGrouper 现在已折旧。[这是使用pd.Grouper](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Grouper.html)的 v1.05 更新

```
df['Date'] = df.index

df.groupby(['Source',pd.Grouper(key = 'Date', freq='30min')]) 
```

# c# - C# 访问子类属性

> ID：11073611
> 
> 赞同：4
> 
> 时间：2012-06-17T18:07:41.840
> 
> 标签：c#, .net, properties, polymorphism

我有几个类，并且在从其他类方法访问子类中定义的属性时遇到问题。

我有一个名为的基类`Section`和一些子类，例如`SectionPlane : Section`. 在每个子类中，定义了一组不同的字段和属性（在 中`SectionPlane`，可以找到私有字段`_t`和公共属性，而在我有私有字段和公共属性“A”）。`t``SectionExtruded : Section``_A`

**班级部分**

```
// General section object
public abstract class Section
{
    public Section()
    {}
} 
```

**类平面部分**

```
// Section object representing a plane with thickness t
public class SectionPlane : Section
{
    private double _t;

    public SectionPlane(double t)
    {
        this.t = t;
    }

    public double t
    {
        get
        {
            return _t;
        }
        set
        {
            _t = value;
        }
    }
} 
```

**类挤压截面**

```
// Section object of some geometry with cross section area A extruded along the element it is assigned to.
public class SectionExtruded : Section
{
    private double _A;

    public SectionExtruded(double A)
    {
        this.A = A;
    }

    public double A
    {
        get
        {
            return _A;
        }
        set
        {
            _A = value;
        }
    }
} 
```

当我从类的任何子类`Element`尝试访问属性时会出现问题，因为这些未在基类中设置`Section`，例如在元素中`Solid2D : Element`：

**类元素**

```
public abstract class Element
{
    private Section _section;

    public Element(Section section)
    {
        this.section = section;
    }

    public Section section
        {
            get 
            {
                return _section;
            }
            set
            {
                _section = value;
            }
        }
    }
} 
```

**类实体 2D 元素**

```
// Solid2D elements can only have sections of type SectionPlane
public class Solid2D : Element
{
    public Solid2D(SectionPlane section)
        : base(section)
    {
    }

    public void Calc()
    {
        double t = section.t;    // This results in error 'Section' does not contain a definition for 't' and no extension method 't' accepting a first argument of type 'Section' could be found (are you missing a using directive or an assembly reference?)
    }
} 
```

**条形元素**

```
// Bar elements can only have sections of type SectionExtruded
public class Solid2D : Element
{
    public Solid2D(SectionExtruded section)
        : base(section)
    {
    }

    public void Calc()
    {
        double A = section.A;    // This results in error 'Section' does not contain a definition for 'A' and no extension method 'A' accepting a first argument of type 'Section' could be found (are you missing a using directive or an assembly reference?)
    }
} 
```

有什么方法可以访问我的财产`t`而不必将其包含在基类中`Section`？这将非常有帮助，因为并非我将使用的所有部分都具有相同的属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T18:18:40.843

既然你知道它只能是 a`SectionPlane`你可以施放它

```
double t = ((SectionPlane)section).t; 
```

如果您不确定您是否有正确类型的部分，您可以使用`as`关键字

```
double t = 0;
var sectionPane = section as SectionPlane;
if (sectionPane != null) {
    t = sectionPane.t;
} 
```

`as`如果该部分具有其他类型，则不会引发异常，而是返回`null`。

或者你可以简单地测试

```
double t = 0;
if(section is SectionPlane) {
    t = ((SectionPlane)section).t;
} 
```

但这不如 using 优雅`as`，因为您必须测试类型然后转换它；但铸造在内部再次进行此测试。

使用 C# 7.0 中引入的新模式匹配，您可以编写：

```
double t = 0;
if(section is SectionPlane sp) {
    t = sp.t;
} 
```

* * *

但是，如果您必须执行这样的测试，那么问题是，您的方法在面向对象的意义上是否正确。如果将`Calc`-method 移至抽象类`Section`并让每个类执行自己的计算，则不需要类型测试或强制转换。

在`Section`：

```
public abstract void Calc(); 
```

在`SectionPlane`

```
public override void Calc()
{
    var x = t;
}

...

section.Calc();  // No casting or type test required. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:22:23.413

我想说，把你的属性“t”放在 Section 基类中，如果它属于那里的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T18:13:07.350

这里有几个选项：

1.  更改`Element.section`为`SectionPlane`.
2.  投射`section`到. `SectionPlane`_`Calc()`
3.  添加`t`到`Section`.
4.  创建一个具有属性的接口（例如`IHasT`），实现它，然后更改为.`t``SectionPlane``Element.section``IHasT`
5.  （如果适用）更改`public abstract class Element`为`public abstract class Element<T> where T : Section`，更改`section`为类型`T`，并进行`Solid2D : Element<SectionPlane>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T18:15:33.030

如果您知道元素继承者将使用的部分类型，我会将元素基类设为泛型：

```
 public abstract class Element<SectionType>
     where SectionType:Section
 {
    //....
 } 
```

您可以使用基类包含默认元素类型：

```
 public abstract class Element:Element<Section>
 {
    //....
 } 
```

并且已知元素可以继承强类型：

```
 public class Solid2D : Element<SectionPlane> 
```

# java - 在 spring 中创建带有名称的 bean 时出错

> ID：11073612
> 
> 赞同：1
> 
> 时间：2012-06-17T18:07:42.103
> 
> 标签：java, spring

（Spring新手对于任何明显的错误，请提前致歉）尝试使用Spring创建身份验证页面。得到以下错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'JDBCLoginDAOImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.project.shoppingcart.dao.jdbc.JDBCLoginDAOImpl.dataSource; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [javax.sql.DataSource] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:84)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:680) 
```

=====

这是我的 app-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <description>Example configuration to get you started.</description>

    <context:annotation-config /> 
    <context:component-scan base-package="org.project.shoppingcart" />
    <context:component-scan base-package="org.project.shoppingcart." />

    <context:property-placeholder location="classpath:jdbc.properties"/>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driver_class}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>

    <bean id="txManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager" lazy-init="true">
        <property name="dataSource" ref="dataSource" />
    </bean>

</beans> 
```

=======

这是我的 JDBCLoginDAOImpl.java：

```
@Repository
public class JDBCLoginDAOImpl implements LoginDao {

    @Autowired
    private DataSource dataSource;

    private SimpleJdbcTemplate jdbcTemplate;

    @PostConstruct
    public void setup() {
        jdbcTemplate = new SimpleJdbcTemplate(dataSource);
    }

    public boolean validateUser(String Username, String Password) {
        int count = 0;
        String query = "select count(*) from products where username = "+Username+
                "and password = "+Password;
        count = jdbcTemplate.queryForInt(query);
        if (count > 0) {
            return true;
        }
        else {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:52:13.377

您的设置对我来说几乎是正确的，我能找到的唯一麻烦点是：

```
<context:component-scan base-package="org.project.shoppingcart" />
<context:component-scan base-package="org.project.shoppingcart." /> 
```

这是一个双组件扫描，我很确定以上两个语句是相等的（至少它们都匹配购物车的子包，可能它们也都匹配购物车）。无论如何，您正在多次创建多个 bean。我会首先清理它（失去其中一个），也许你的问题会消失。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-16T22:49:27.467

改变

```
@Autowired
private DataSource dataSource; 
```

经过：

```
@Autowired
private DriverManagerDataSource dataSource; 
```

并添加导入：

导入 org.springframework.jdbc.datasource.DriverManagerDataSource；

并调整 getter 和 setter

# google-apps-script - createWebPage 返回“已存在同名的另一个实体”

> ID：11073621
> 
> 赞同：0
> 
> 时间：2012-06-17T18:08:30.190
> 
> 标签：google-apps-script

我是 GAS 的新手，并遵循创建网页一章中的 Enterprise Application Essentials 一书。Site 类 createWebPage 方法返回“另一个实体已经存在同名”，即使我在一个小片段中运行它，如下所示：

```
function test () {
  var site = SitesApp.getSiteByUrl("https://sites.google.com/site/mysite"); 
  var page = site.createWebPage("xxx","xxx","<p>");
} 
```

调试时，我一进入方法就会收到错误，所以我看不到它发生在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:06:16.247

我建议您尝试[getAllDescendants()](https://developers.google.com/apps-script/class_site?hl=fr-FR#getAllDescendants)来检查页面是否存在。

# python - 如何将 TKinter 用户表单链接到 Excel 以进行数据收集？

> ID：11073623
> 
> 赞同：0
> 
> 时间：2012-06-17T18:08:38.283
> 
> 标签：python, excel, user-interface, user-input, export-to-excel

如何从 Tkinter 用户表单中收集数据？（在excel或文本文件中）

例如：

如何将以下变量的值（即**所需的**值：'x1'）写入 Excel 工作表？

```
a=StringVar()
checkBox1=Checkbutton(root, text="text1", variable=a, onvalue="x1", offvalue="N/A")
checkBox1.place(relx=0., rely=0., relwidth=0., relheight=0.)
checkBox1.pack() 
```

我的 Python 理解级别：初学者

Python版本：2.7.3

图形用户界面：Tkinter

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:28:01.853

好的，

1.  您可以将值保存为 csv 文件，然后将其导入 excel（这是最快的方法）
2.  1.您可以使用具有特定excel格式的python csv模块。
3.  您可以使用[xlwt](http://pypi.python.org/pypi/xlwt/0.7.4)模块（不适用于 python 3）
4.  您可以使用[openpyxl](http://pypi.python.org/pypi/openpyxl/1.5.8)（用于新的 xlsx 文件）
5.  你可以使用[pandas](http://pandas.pydata.org/)（pandas 使用 xlwt 或 openpyxl）
6.  你可以使用[tablib](http://pypi.python.org/pypi/tablib)
7.  您可以将 com 对象与[pywin32一起使用](http://sourceforge.net/projects/pywin32/)

# iphone - 学习opengl es 2.0的好方法是什么？

> ID：11073626
> 
> 赞同：6
> 
> 时间：2012-06-17T18:09:07.090
> 
> 标签：iphone, opengl-es

我一直在搞乱一些编码，最后认为我终于为 OpenGL 部分做好了准备，然后我又想了想，决定我需要一些关于如何学习/记住 OpenGL ES 2.0 的指导！

好吧，基本上，我知道它在高层是如何工作的，然后当我开始输入一些代码时......

```
I see a bunch of parameters,
I refer to some documents,
I fill in those parameters,
I see some more parameters,
I refer to more documents,
(loop)
MVC comes in,
I get completely and utterly confused!
Brain crashes. 
```

我正在尝试在iPhone上做一些简单的事情，我想找到大师们的思路，比如某种检查清单，或者做事情的顺序，这样我正在做的事情就永远是清除！

例如，类似：

```
Arrays of numbers always come before shaders
(some sets of program lines that always appear in a certain order) 
```

现在，我对这样的事情有很高的理解：

[http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Chapter-1%3a-The-Graphics-Pipeline.html](http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Chapter-1%3a-The-Graphics-Pipeline.html)

如果您要扩展所有这些高级理解，例如网站中的标签，我希望我能知道通常的步骤是什么！

我尝试阅读一些教程，输入此内容后我将再次尝试，以尝试吸收执行此操作的常见步骤/命令，如果有人可以帮助加快此过程，我将非常感激！我要求太多了吗？=p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:22:11.420

我强烈推荐[这](https://rads.stackoverflow.com/amzn/click/com/0596804822)本 iPhone 上的 GL 教程

对于刚开始使用 GL 的经验丰富的开发人员来说，它特别有用。如果您从更初级的水平开始，可能会在某些方面感到困惑。

# trigger.io - 配置文件和应用程序 ID 不匹配，为什么？

> ID：11073631
> 
> 赞同：3
> 
> 时间：2012-06-17T18:10:04.060
> 
> 标签：trigger.io, forge

当我运行**forge run ios**时，我得到了这个：

> [错误] 配置文件和应用程序 ID 不匹配配置文件 ID：G85A58Y2F3.io.trigger.forge4afef416b8a111e1910212313d1 adcbe 应用程序 ID：G85A58Y2F3.co.uk.nearbyapp。* 请参阅我们文档中的“为应用商店准备应用程序”： [http ://current-docs.trigger.io/releasing.html#ios](http://current-docs.trigger.io/releasing.html#ios)

我的本地配置看起来像这样

```
{
    "general": {
    },"ios": {
        "device": "device",
        "profiles": {
            "DEFAULT": {
                "provisioning_profile": "nearby.mobileprovision",
                "developer_certificate_path": "nearby_certificate.pfx",
                "developer_certificate_password": "xxxxx"
            }
        }
    }
} 
```

有什么想法可能是错的吗？我不明白触发器供应 ID 的来源。

*编辑*：好的，我将配置文件更改为通配符 - 我认为这是在设备上运行所必需的？无论如何，这解决了我遇到的错误。现在，我走得更远了……

它似乎安装在设备上，但我在命令窗口中得到了这个：

> 正在启动 - /private/var/mobile/Applications/ABBD210F-2683-46D0-BAF2-ED2AC25279A 4/device-ios.app 无法启动 com.apple.debugserver！

该应用程序不会自动启动，但已安装在设备上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:01:32.477

提供有关原始问题的更多信息：如果未指定，则触发器会自动生成应用程序 ID。然后，您可以在创建配置文件等时使用该应用 ID，也可以使用现有值覆盖应用 ID。

我已经更新了我们的文档，使其在这里更加明确 - 之前有点不清楚！[http://docs.trigger.io/en/v1.3/modules/package_names.html](http://docs.trigger.io/en/v1.3/modules/package_names.html)

对于您的后续问题，我们尚未完全处理从 Windows 在 iOS 上自动运行该应用程序：我们希望在未来的 sprint 中尽快添加该应用程序。

# objective-c - 关于 Objective-C 委托，需要澄清

> ID：11073633
> 
> 赞同：0
> 
> 时间：2012-06-17T18:10:32.017
> 
> 标签：objective-c, delegates

如果我的`UIView`( `MyUIView`) 声明和`@synthesize`(s)

```
@property (nonatomic, weak) id<UIScrollViewDelegate> delegate; 
```

并被`MyController`声明为

```
@interface MyController : UIViewController <UIScrollViewDelegate> 
```

以下是正确的（在 MyController 内部）

```
if ([self.view isKindOfClass:[MyUIView class]]){
    NSLog(@"yes");          // We see this
} 
```

**为什么会出现以下问题？**

```
 self.view.delegate = self; // Does not see "delegate" 
```

同时，如果我手动创建 MyView 的一个实例，它可以工作：

```
MyView *c = [MyView new];    
c.delegate = self;          // works fine 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:15:55.940

因为仅仅通过检查`view`属性是 a`MyUIView`并不会自动将其转换为一个。

你想要这样的东西：

```
if ([self.view isKindOfClass:[MyUIView class]]) {
    MyUIView *myView = (MyUIView*)self.view;
    myView.delegate = self;
} 
```

请注意，在检查之后，我如何创建一个类型的变量，`MyUIView*`然后编译器将能够“看到”`delegate`它的属性。这都是关于类型的:-)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:16:05.070

因为 的`view`属性`UIViewController`被声明为`UIView *`，并且`UIView`没有`delegate`属性。请注意，编译器的属性（和方法）查找*不是*动态的，因为它是在编译时完成的。

利用

```
((MyUIView *)(self.view)).delegate = self; 
```

反而。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T18:16:59.297

`[self.view isKindOfClass:[MyUIView class]]`是一种运行时检查，可以确定实际分配给 的对象类型`view`。另一方面，编译器在抱怨，因为它没有这些信息，只知道这`view`是某种`UIView`.

使用强制`self.view`转换告诉编译器您知道将要存储的内容。

# php - 无法上传大于 80kb 的 PHP 文件

> ID：11073635
> 
> 赞同：0
> 
> 时间：2012-06-17T18:10:41.627
> 
> 标签：php, apache, file-upload

我写了简单的 php 上传器，我只能上传小于 100kb 的文件，

我的 php 上传限制是 64mb，文件夹权限是好的（我尝试实现 uloadyfy 它也给出了相同的结果）

php 信息的路径 [http://ezwebdesigns.co.uk/onlinetv/info.php](http://ezwebdesigns.co.uk/onlinetv/info.php)

直播网站的路径 [http://ezwebdesigns.co.uk/onlinetv/index.html](http://ezwebdesigns.co.uk/onlinetv/index.html)

php代码

```
$name = $_FILES["file"]["name"];
        move_uploaded_file( $_FILES["file"]["tmp_name"], "uploads/" . $_FILES['file']['name']); 
```

html代码

```
<form id="file_upload_form" method="post" enctype="multipart/form-data" action="upload.php">
<input name="file" id="file" size="27" type="file" /><br />
<input type="submit" name="action" value="Upload" /><br />
</form> 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:13:14.060

查看：

*   [PHP 增加上传文件大小限制](http://www.cyberciti.biz/faq/linux-unix-apache-increase-php-upload-limit/)

您还需要为这些设置所需的值（参见上面的教程）：

*   上传最大文件大小
*   内存限制
*   post_max_size

*确保您的托管服务提供商允许更大的规模或与他们交谈以防万一。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:32:48.270

我在 Wordpress 项目中遇到了这个问题。服务器由 IPS Config 管理，PHP 使用 Fast-CGI 进行设置。我将此配置更改为 mod_php，这解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:07:43.520

所有其他答案（可能）都是正确的，但知道有人提到 php.ini 是配置文件的名称。如果您在本地工作或控制服务器，则可以编辑此文件而不会出现任何问题。

位置因操作系统而异，但在 Linux 上是 /etc/php5/apache2/php.ini。

添加到 Sarfraz 列表中：`upload_max_filesize`，`memory_limit`，并且`post_max_size`您可能还想更改`max_execution_time`以防止超时错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T18:17:46.257

您应该更改 Apache 设置：

```
ini_set( "upload_max_filesize","8M"); 
```

# java - JUnit 应用程序套件测试

> ID：11073636
> 
> 赞同：1
> 
> 时间：2012-06-17T18:11:07.883
> 
> 标签：java, junit

我正在尝试创建一个 junit 测试套件，它将运行应用程序中的所有测试套件...... - 这就是我所拥有的，据我所知它*应该*可以工作，但它一直告诉我没有找到任何测试。

```
import static org.junit.Assert.*;

import org.junit.Test;

/**
 * @author Jason
 *
 */

@Test
public class applicationTest extends TestCase {

    public applicationTestSuite(String name) {
        super(name);
    }

    public static Test suite() {
        TestSuite suite = new TestSuite("ApplicationTestSuite");
        suite.addTest(domain.AllDomainTests.suite());
        suite.addTest(services.AllServicesTests.suite());
        suite.addTest(business.AllBusinessTests.suite());
        return suite;
    }
} 
```

它应该运行的测试套件之一的示例 -

```
package business;

import org.junit.runner.RunWith;
import org.junit.runners.Suite;
import org.junit.runners.Suite.SuiteClasses;

@RunWith(Suite.class)
@SuiteClasses({ ItemMgrTest.class })
public class AllBusinessTests {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:14:33.217

您需要[`@Test`](http://junit.sourceforge.net/javadoc/org/junit/Test.html)在测试方法上标记注释

**API 文档**

> Test 注释告诉 JUnit，它所附加的公共 void 方法可以作为测试用例运行。为了运行该方法，JUnit 首先构造一个新的类实例，然后调用带注释的方法。测试抛出的任何异常都会被 JUnit 报告为失败。如果没有抛出异常，则假定测试已成功[[...]](http://junit.sourceforge.net/javadoc/org/junit/Test.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:12:37.163

您可以在 中指定 Suite 类`@SuiteClasses`，例如：

```
@RunWith(Suite.class)
@SuiteClasses({ AllBusinessTests.class })
public class AllTests {

} 
```

suite() 方法是 JUnit 3 的东西，不会在您的套件中找到任何方法或测试，因为您使用的是 JUnit 4。

# java - MS SQL Server 2008 的 JDBC 连接异常

> ID：11073637
> 
> 赞同：2
> 
> 时间：2012-06-17T18:11:09.207
> 
> 标签：java, sql-server-2008, jdbc

我在 VM vare 上使用 windows server 2003，我的数据库在 MS SQL Server 2008 上。现在，当我使用 jdbc 驱动程序将我的 java 代码与数据库连接时，我遇到了以下异常。请给出一些解决方案。

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: com.microsoft.sqlserver.jdbc.AuthenticationJNI.SNISecGenClientContext([B[I[BI[B[I[ZLjava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/util/logging/Logger;)I
    at com.microsoft.sqlserver.jdbc.AuthenticationJNI.SNISecGenClientContext(Native Method)
    at com.microsoft.sqlserver.jdbc.AuthenticationJNI.GenerateClientContext(AuthenticationJNI.java:80)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:2691)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:2234)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.access$000(SQLServerConnection.java:41)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:2220)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1326)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:991)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at test.jdbcdemo.main(jdbcdemo.java:24) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:01:50.657

您已启用`integratedSecurity`. 这意味着`sqljdbc_auth.dll`需要在 jvm 的库路径上。

很可能你的路径上没有这个库，它是错误的版本或错误的变体（x86 <> x64 <> IA64）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T08:06:47.913

一个老问题，但我今天遇到了这个问题。我不知道关于 Java 的第一件事，但对我来说，解决方法是将 Microsoft 的 JDBC 驱动程序复制到 Java 的 ext 文件夹中。

sqljdbc41.jar需要复制到C:\[java安装路径]\Java\jre7\lib\ext\

确保选择正确的版本（x86 或 x64）。

同样对于集成安全性，我需要在启动我的应用程序时引用 auth。

```
-Djava.library.path=C:\[Path to Microsoft JDBC Driver 4.1 for SQLServer]\sqljdbc_4.1\enu\auth\x86 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T15:10:23.443

在启动 SpringBatch 并`JdbcBatchItemWriter`写入 MS SQL Server 2008 时，我遇到了同样的异常。

Sqljdbc_auth.dll 在库路径上。事实证明，我正在使用 JRE 1.6 在 Eclipse 中运行我的 SpringBatch 应用程序。我通过使用 JRE 1.7（运行配置中的 Eclipse JRE-Tab）运行它解决了这个问题。

# scala - 如何在 Scala 的超类上调用`apply`？

> ID：11073639
> 
> 赞同：0
> 
> 时间：2012-06-17T18:11:42.437
> 
> 标签：scala, inheritance, overriding, superclass, super

我的类继承自某个基类，并实现与基类`apply`具有完全相同签名的方法。我想`apply`从我的班级中调用 base 的方法。当我尝试以下操作时：

```
class MyClass extends BaseClass {
  def apply(k: String, v: String) = {
    super.apply(k, v)
    ...
  }
  ...
} 
```

我得到`value apply is not a member of BaseClass...`编译错误。我应该如何从子类中调用 base 的 apply 方法？

另外，为什么可以在没有关键字的情况下覆盖`apply`方法？`override`

编辑：实际代码：

```
class OAuthParamsBuilder(helper: OAuthParamsHelper)
extends KeyValueHandler {

  def apply(k: String, v: String): Unit = {
    ...
  }
}

class OAuthInitSupportBuilder
extends OAuthParamsBuilder(StandardOAuthParamsHelper) {

  /*override*/ def apply(k: String, v: String): Unit = {
    super.apply(k, v)
    ...
  }
...
} 
```

编辑：我注意到 KeyValueHandler 是一个特征，这可能是一个问题。

```
trait KeyValueHandler extends ((String, String) => Unit) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:31:41.150

您没有帮助我们帮助您，但我怀疑这是`apply`基类的真正定义：

```
def apply(kv: (String, String)) = ??? 
```

**编辑**

您粘贴的代码是不够的，因为它无法重现问题：

```
trait OAuthParamsHelper
trait KeyValueHandler
class OAuthParamsBuilder(helper: OAuthParamsHelper) extends KeyValueHandler {
  def apply(k: String, v: String): Unit = ???
}
object StandardOAuthParamsHelper extends OAuthParamsHelper
class OAuthInitSupportBuilder extends OAuthParamsBuilder(StandardOAuthParamsHelper) {
  override def apply(k: String, v: String): Unit = {
    super.apply(k, v)
    ???
  }
} 
```

# magento - Magento - 从模板中创建集合是否可以接受

> ID：11073641
> 
> 赞同：1
> 
> 时间：2012-06-17T18:11:47.220
> 
> 标签：magento

正如标题所暗示的那样，从 magento 模板文件中创建和使用集合是否可以接受？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:28:31.727

我会说不，为此使用块

# ruby-on-rails - 活动管理员 NoMethodError 错误

> ID：11073642
> 
> 赞同：2
> 
> 时间：2012-06-17T18:11:56.910
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, activeadmin

我在我的 Rails 应用程序上设置了活动管理员。我运行生成器来创建用户资源，但是当我单击管理仪表板上的用户链接时，我得到：

```
NoMethodError in Admin/users#index

Showing /Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/activeadmin-0.4.4/app/views/active_admin/resource/index.html.arb where line #1 raised:

undefined method `city_id_contains' for #<MetaSearch::Searches::User:0x007fde92d69840>
Extracted source (around line #1):

1: render renderer_for(:index) 
```

我不知道是什么产生了这个或错误来自哪里..有什么想法吗？谢谢！（如果您需要查看任何其他文件，请告诉我）

楷模：

```
user.rb

  class User < ActiveRecord::Base
   rolify

  devise :database_authenticatable, :registerable, :confirmable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :province_id, :city_id
  belongs_to :province
  belongs_to :city 
```

省份.rb

```
 class Province < ActiveRecord::Base
      has_many :cities
      has_many :users
    end 
```

城市.rb

```
class City < ActiveRecord::Base
  belongs_to :province
  has_many :users
end 
```

架构.rb

```
 create_table "users", :force => true do |t|
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
    t.string   "name"
    t.date     "date_of_birth"
    t.string   "address"
    t.string   "gender"
    t.integer  "zipcode"
    t.string   "city"
    t.string   "status"
    t.string   "confirmation_token"
    t.datetime "confirmed_at"
    t.datetime "confirmation_sent_at"
    t.string   "unconfirmed_email"
    t.integer  "province_id"
    t.integer  "city_id"
  end

 create_table "provinces", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

 create_table "cities", :force => true do |t|
    t.string   "name"
    t.integer  "province_id"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T23:04:01.083

这个问题帮助我解决了我的问题。我必须阅读评论才能弄清楚如何解决它，所以我在这里提供答案：

如果您有一个包含belongs_to 关系的模型，如果您的列名与您的属于外键id 列名匹配，Active Admin 将不会喜欢它。

例如，在这种情况下，您的外键是“city_id”，但您还有一个名为“city”的列。活动管理员不喜欢这样。同样，从该专栏开始也确实没有意义。因为您将通过关系访问城市。

要解决此问题，您应该创建一个删除城市列的迁移。

```
class RemoveCityFromUser < ActiveRecord::Migration    
  def up 
    remove_column :users, :city
  end
end 
```

# android - UnsatisfiedLinkError 使用 Box2d libgdx for android

> ID：11073644
> 
> 赞同：0
> 
> 时间：2012-06-17T18:12:28.553
> 
> 标签：android, box2d, libgdx

我正在尝试使用 libGDX box2d 包装器，但我不想使用完整的 libGDX 游戏引擎，因为我已经实现了我的游戏，现在我想添加一些物理。

所以，我下载了 libGDX 库并将它们放在构建路径中。

我看到以下错误：

```
UnsatisfiedLinkError at com.badlogic.gdx.physics.box2d.World.newWorld(Native Method)
at com.badlogic.gdx.physics.box2d.World.<init>(World.java:101)
at org.anddev.andengine.extension.physics.box2d.PhysicsWorld.<init>(PhysicsWorld.java:61)
at org.anddev.andengine.extension.physics.box2d.PhysicsWorld.<init>(PhysicsWorld.java:57) 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:44:08.347

[我使用来自谷歌讨论](http://code.google.com/p/libgdx/issues/detail?id=5)的这段代码，它在我身边运行良好。

```
import com.badlogic.gdx.utils.GdxNativesLoader;
GdxNativesLoader.load(); 
```

**在你做任何事情之前使用它。确保你有`gdx.jar`并且`gdx-natives.jar`在你的项目中。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T19:40:31.537

如果您在 World 属性声明期间分配一个实例，则会发生此错误，保留一个空声明并在 App create() 方法上分配新实例应该可以修复它。

# mysql - 对来自不同列和计数的值进行分组

> ID：11073646
> 
> 赞同：2
> 
> 时间：2012-06-17T18:13:02.530
> 
> 标签：mysql, sql, count, group-by

我有这张桌子：

```
UNIQUE_ID | WINNER_ID | FINALIST_ID
________1 | ________1 | __________2
________2 | ________1 | __________3
________3 | ________3 | __________1
________4 | ________1 | __________2 
```

我需要一份所有选手（获胜者和决赛选手）的名单，以及他们获得第一或第二名的次数。

在这种情况下，它将是：

```
PLAYER_ID | WINNER_TIMES | FINALIST_TIMES
________1 | ___________3 | _____________1
________2 | ___________0 | _____________2
________3 | ___________1 | _____________1 
```

这里已经提出了一个类似的问题（[LINK](https://stackoverflow.com/questions/9185858/sql-group-by-count-count-same-values-across-multiple-columns)），但我不明白答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:17:18.317

```
select  coalesce(winner_id, finalist_id) as PLAYER_ID
,       count(winner_id) as WINNER_TIMES
,       count(finalist_id) as FINALIST_TIMES
from    (
        select  winner_id
        ,       null as finalist_id
        from    YourTable
        union all
        select  null
        ,       finalist_id
        from    YourTable
        ) as SubQueryAlias
group by
        coalesce(winner_id, finalist_id) 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/45922/2/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:31:15.847

试试这个 ：：

```
 Select 
    user_id as user, 
    winner_temp.count(1) as winning_count
    finalist_temp.count(1) as runner_up_count
    from
    user_table 
    left join 
    (Select winner_id, count(1) from table group by winner_id) as winner_temp on (user_table.user_id = winner_temp.winner_id)
    left join 
    (Select finalist_id, count(1) from table group by finalist_id) as finalist_temp on 
    (user_table.user_id = finalist_temp.finalist_id) 
```

# ruby-on-rails-3 - 使用资产管道 Rails 3.2 时从公共文件夹提供图像

> ID：11073650
> 
> 赞同：3
> 
> 时间：2012-06-17T18:13:37.910
> 
> 标签：ruby-on-rails-3, paperclip, asset-pipeline

我正在使用 Rails 3.2 资产管道来服务我的资产（图像、javascript.css）。

我添加了用于上传照片的回形针。默认情况下，回形针将文件存储在`public/system`

当我使用`url`回形针生成的类似于

```
/system/users/avatar/000/000/thumb/whatever.jpg 
```

它没有给我任何路线错误。该文件位于上述位置，但我认为这可能是资产管道的问题。

有什么想法可能会出错吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T18:08:51.963

就像 user451893 说的那样。您应该配置您的网络服务器（nginx、apache 等）以提供所有静态资产！

如果你不这样做，那么你需要打开 rails 中的静态资源服务：

```
config.serve_static_assets = true 
```

查看此问题以获取更多详细信息[https://github.com/thoughtbot/paperclip/issues/667](https://github.com/thoughtbot/paperclip/issues/667)

# php - 在 PHP 中如何生成字符串的所有可能模式？

> ID：11073661
> 
> 赞同：0
> 
> 时间：2012-06-17T18:15:17.443
> 
> 标签：php

我有这段代码来生成字符串的所有可能性

```
 <?PHP       
  for($i=0;$i< 16;$i++){

    echo decbin($i)."<br>";
  }
  ?> 
```

这将打印

```
0

1

10

11

100

101

110

111

1000

1001

1010 
```

我想要的是通过用“*”替换所有这些二进制数据与一个由4个字母组成的字符串，所以当你输入字符串“help”时，你会得到

```
help

hel*

he*p

he** 
```

ETC...

我正在努力任何想法都会受到赞赏？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:22:56.070

警告：100% 未经测试

```
$s='help';
$l = strlen($s)-1;
for($i=0;$i<=$len;$i++){
  $bin=decbin($i);
  $newS = $s;
  foreach(str_split($bin) as $k=>$v) {
    if ($v) {
     $index = $l - $k;
     $newS[$index] = '*';
    }
  }

  echo $newS.'<br>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:27:17.953

你可以为这个问题编写一个简单的递归算法。

该算法的想法是，您可以查看二进制数，并看到 a`0`表示字符将保持不变，并且`1`表示它将变成星号。您按字符执行此操作，并且由于您有一个 4 个字符长的单词，因此您得到了`2*2*2*2 = 16`排列。

该算法遍历单词中的字符，并且对于每个字符，它尝试将其排列生成为普通字符和星号。结果是`help`当每个字符本身或被星号覆盖时，单词的所有排列。

```
function asterisk_permutations($str, &$result=array(), $i=0) {
    if ($i >= strlen($str)) {
        $result[] = $str;
        return;
    }

    asterisk_permutations($str, $result, $i+1);
    asterisk_permutations(substr_replace($str, '*', $i, 1), $result, $i+1);
}

asterisk_permutations("help", $result);
var_dump($result); 
```

输出是：

```
array(16) {
  [0]=> string(4) "help"
  [1]=> string(4) "hel*"
  [2]=> string(4) "he*p"
  [3]=> string(4) "he**"
  [4]=> string(4) "h*lp"
  [5]=> string(4) "h*l*"
  [6]=> string(4) "h**p"
  [7]=> string(4) "h***"
  [8]=> string(4) "*elp"
  [9]=> string(4) "*el*"
  [10]=> string(4) "*e*p"
  [11]=> string(4) "*e**"
  [12]=> string(4) "**lp"
  [13]=> string(4) "**l*"
  [14]=> string(4) "***p"
  [15]=> string(4) "****"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T18:27:01.807

一个简单的方法是：

1.  填充 bincode 所以 0 => 0000

2.  循环 bincode，如果 bincode[n] = 0，则将 word[n] 替换为 *。

# ravendb - RavenDB 多图

> ID：11073667
> 
> 赞同：2
> 
> 时间：2012-06-17T18:15:49.923
> 
> 标签：ravendb, multimap

我有一个包含许多表的数据库，每个表都有不同的属性，我想实现以下目标：

**在所有**属性上创建和索引（来自每个表）。

问题是我没有每个表都有一个类，因为我使用动态类将它们插入数据库。

那么如何创建一个给定字符串的索引将返回其属性之一包含该字符串的所有文档？

另一个需要解决的问题是，在以后的表插入中，我可以将新表添加到我上面解释的索引中。

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:19:28.473

大卫，您在 RavenDB 中没有**表**，但除此之外，您可以在整个数据集上定义一个索引，如下所示：

```
 from doc in docs select new { doc.Name } 
```

它将定义所有类型的索引，允许您查询所有文档的名称。

# c++ - 在 HTTP 502 错误后 FCGI 进程被杀死

> ID：11073675
> 
> 赞同：0
> 
> 时间：2012-06-17T18:16:18.630
> 
> 标签：c++, http, ubuntu, nginx, fastcgi

我在 Nginx 服务器上有一个 FCGI 应用程序，并且像所有 FCGI 进程一样，这是持久的；因为它在履行请求后不会被杀死并继续等待下一个请求发布。

但是，我今天注意到了一些奇怪的事情。每当我发布错误请求并收到 HTTP 502 错误时，该进程就会被终止。为什么会这样，以及如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:27:23.000

我想你是在倒着读。当 nginx 无法与 fastcgi 后端通信时，它会发出 HTTP 502。很可能*是因为*fastcgi 守护进程死了，你得到了 HTTP 502，而不是相反。

检查起来很容易：只需在代码中调用处理程序例程的开头放置一个断点，然后提交足够的请求以获取 502。请求是否与 502 命中断点相关联？即使不是，这并不意味着情况并非如此。回复上一个请求后，您的代码可能会崩溃。

# jpql - JPQL 结果不是我想要的

> ID：11073679
> 
> 赞同：0
> 
> 时间：2012-06-17T18:16:32.263
> 
> 标签：jpql

好的，所以我有几张桌子

*   投票
*   比赛
*   比赛环节
*   比赛报名
*   可提交
*   用户

关系是可以通过创建与 ContestSegment 相关联的 ContestRegistration 将 Submittable 提交给竞赛，该 ContestSegment 与 Contest 相关联。

投票具有用户和对投票相关的 ContestRegistration 的引用。

很简单。

现在，我的想法是我想使用一个 RESTful 服务来检查我是否已经在比赛中对其中一个 ContestRegistrations 进行了投票。

除了预期的结果外，一切正常。

我正在运行的 JPQL 如下所示：

```
SELECT DISTINCT v 
FROM Vote v, Contest c 
JOIN v.user vu 
LEFT JOIN c.segments cs 
LEFT JOIN cs.registrations csr 
LEFT JOIN csr.votes csrv 
WHERE vu.id = :userId 
AND cs.beginDate < CURRENT_TIMESTAMP 
AND cs.endDate > CURRENT_TIMESTAMP 
AND c.id = :contestId 
```

该方法如下所示：

```
public Boolean hasUserVoted(User user, Contest contest){
    StringBuffer query = new StringBuffer()
    .append("SELECT DISTINCT v from Vote v, Contest c ")
    .append("JOIN v.user vu LEFT JOIN c.segments cs LEFT JOIN cs.registrations csr LEFT JOIN csr.votes csrv ")

    .append("WHERE vu.id = :userId ")
    .append("  ")
    .append("AND cs.beginDate < CURRENT_TIMESTAMP AND cs.endDate > CURRENT_TIMESTAMP AND c.id = :contestId ");
    Boolean hasVoted = true;
    try{
    Vote vote = (Vote)entityManager.createQuery(query.toString())
        .setParameter("userId", user.getId())
        .setParameter("contestId", contest.getId()).getSingleResult();
    }catch(NoResultException nre){
        hasVoted = false;
    }

    return hasVoted;
} 
```

但是当我回来时，无论我插入什么，我总是得到一个真正的支持（意味着我已经投票了）。例如，我对竞赛#1 进行了投票，但我没有对竞赛#2 进行投票。如果我插入竞赛#2 的值，那么我仍然会得到真正的回报。我对 JPQL 还很陌生，所以你能提供的任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:28:32.197

在您的 JPQL 中使用左连接，除非比赛不存在，否则它将返回 true。听起来 csr.votes 应该是一个正常的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:33:59.697

将投票与比赛联系起来没有任何限制。我认为您的查询应该是：

```
SELECT DISTINCT v 
FROM Contest c 
JOIN c.segments cs 
JOIN cs.registrations csr 
JOIN csr.votes csrv 
JOIN csrv.user vu 
WHERE vu.id = :userId 
AND cs.beginDate < CURRENT_TIMESTAMP 
AND cs.endDate > CURRENT_TIMESTAMP 
AND c.id = :contestId 
```

# regex - R：“不跟随”的正则表达式不起作用

> ID：11073682
> 
> 赞同：5
> 
> 时间：2012-06-17T18:16:46.303
> 
> 标签：regex, r

我需要保留括号中的单词并删除以下字符串中的其他单词。

(a(b(c)d)(e)f)

所以我期望的是（（（c））（e））。要删除 a、b、d、f，我尝试了“不跟随”正则表达式。

```
str <- "(a(b(c)d)(e)f)"
gsub("([a-z]+)(?!\\))", "", str) #(sub. anything that isn't followed by a ")" ) 
```

该消息显示我的正则表达式无效。如我所见，正则表达式“（？！\））”第二部分中的括号不正确匹配。至于我的编辑器，第一个“（”与紧随其后的“）”匹配，这并不意味着是一个闭括号（它右边的那个是）。我可以从我的正则表达式中找出这个错误。你能告诉我到底出了什么问题吗？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T19:41:56.950

分两步，并使用[积极的前瞻](http://www.regular-expressions.info/lookaround.html)：

```
str1 <- gsub("\\([a-z](?=\\()", "\\(", str, perl=TRUE)
str1
# [1] "(((c)d)(e)f)"
str2 <- gsub("\\)[a-z](?=\\))", "\\)", str1, perl=TRUE)
str2
# [1] "(((c))(e))" 
```

编辑：事实证明，您甚至可以一次完成：

```
gsub("([\\(\\)])[a-z](?=\\1)", "\\1", str, perl=TRUE)
# [1] "(((c))(e))" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T19:44:39.180

我同意@Dason 的评论：

```
st <- "(a(b(c)d)(e)f)"

while(grepl("\\([a-z]+\\(",st)) {
  st <- sub("\\([a-z]+(\\(.+\\))[a-z]+\\)","\\1",st)
}
> st
[1] "(c)(e)" 
```

写在我的 iPad 上:-)

# sql - SQL 数据库模型：FOOD 和 INGREDIENTS 表

> ID：11073687
> 
> 赞同：1
> 
> 时间：2012-06-17T18:17:06.847
> 
> 标签：sql

我有 2 张桌子：食物和成分。我想选择制作某些食物所需的所有成分。

我以为我可以做这样的事情：

```
select NAME from INGREDIENTS
 where ID in (select ING1_ID, ING2_ID, ING3_ID from FOOD where NAME = 'Meat soup') 
```

这显然不起作用，因为我需要在“in”子选择查询中传递一串逗号分隔的 ID。我正在考虑将列值列表转换为字符串，并且有一些解决方案，但我开始认为也许我过于复杂了，而且我的数据库模型是错误的。

**食物表：**

```
ID      | NAME          | ING1_ID  | ING2_ID  | ING3_ID
--------+---------------+----------+----------+--------
1       | Meat soup     | 1        | 2        | 3
2       | Pasta Bolo    | 3        | 4        | 5
3       | Chicken salad | 2        | 4        | 5 
```

**成分表：**

```
ID      | NAME          
--------+-----------
1       | pasta     
2       | onion   
3       | oil 
4       | paprika 
5       | chicken 
6       | cucumber 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T18:22:15.117

许多菜肴的成分超过三种，当您搜索时，您并不关心给定成分是#1 还是#2 或#3。

所以更好的模型是

```
FOOD
id | name
1  | meat soup

INGREDIENTS
id | name 
1  | meat  

FOOD_INGREDIENTS
food_id | ingredients_id
1       | 1 
```

现在您的查询只是

```
select i.name from ingredients i, food f, food_ingredients fi
where fi.food_id = f.id
and fi.ingredients_id = i.id
and f.name = "meat soup" 
```

“food_ingredients”表通常称为“连接表”。连接表的另一个好处是您可以添加特定于某种食物中特定成分的信息（例如数量或应如何准备）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T18:27:29.777

您的问题源于您没有标准化数据模型这一事实。

你应该重新设计成这样的：

**食物表：**

*   食物编号
*   姓名

**成分表：**

*   编号
*   姓名

**FOOD2INGREDIENTS 表：**

*   食物编号
*   编号
*   （在这里添加数量会很有意义）

一旦进行了这样的重新设计，您只需通过以下查询即可获得所需的内容：

```
SELECT i.ID, I.Name 
FROM Ingredients I 
 INNER JOIN Food2Ingredients F2I 
 ON I.IngID = F2I.IngID
WHERE
  F2I.FoodID = :foodid; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T18:31:59.560

只要您所有的食谱都如此贫乏以至于只需要三种成分，那么您就可以通过编写原始查询来解决问题：

```
SELECT Name FROM Ingredients
 WHERE ID IN (SELECT ING1_ID FROM Food WHERE Name = 'Meat soup'
              UNION
              SELECT ING2_ID FROM Food WHERE Name = 'Meat soup'
              UNION
              SELECT ING3_ID FROM Food WHERE Name = 'Meat soup'
             ) 
```

但是，我认为[JacobM](https://stackoverflow.com/users/1237/jacobm)和[Kerbocat](https://stackoverflow.com/users/1452237/kerbocat)在数据库重新设计方面的想法是正确的，并且您认为您的数据库设计存在问题的感觉值得称赞。请注意，如果您需要一个包含 4 种（或更多）成分的配方，您将面临当前设计的灾难（例如，因为您必须编辑所有现有 SQL，其中包括如上所示的多路 UNION 操作），但重新设计的模式甚至不会注意到。

# java - 通过扩展 Thread 类创建 Thread 的使用

> ID：11073689
> 
> 赞同：7
> 
> 时间：2012-06-17T18:17:18.643
> 
> 标签：java, runnable

> **可能重复：**
> [Java：“实现可运行”与“扩展线程”](https://stackoverflow.com/questions/541487/java-implements-runnable-vs-extends-thread)

Java 提供了两个选项来创建 Thread 类，即通过实现 Runnable 或通过扩展 Thread 类。

我知道实现 Runnable 可能有很多原因，但不确定在哪里扩展 Thread 类以创建自己的 Thread 类？

您能否为我提供扩展 Thread 似乎可行或更好的选择或有利的场景...

线程上有一个 [问题](https://stackoverflow.com/questions/8957440/senario-of-extending-thread-class-and-implementing-runnable-interface)，但没有回答我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:27:41.370

几乎没有理由扩展 Thread，基本上你想要扩展线程的唯一原因是你是否要覆盖 run() 以外的东西，这通常是一个坏主意。扩展 Thread 不太常见的原因是因为该类不能扩展其他任何东西，并且如果您只是覆盖 run() 方法，那么扩展 Thread 而不实现 Runnable 将毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:33:23.820

[`Runnable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html)是一个只有一个方法的接口`run()`，需要由实现该接口的类来实现。

例如

```
public class MyRunnable implements Runnable {
    @Override
    public void run() {
        //...
    }
} 
```

`MyRunnable`不是一个`Thread`也不能仅仅通过使用该类来创建一个新线程。所以，说起来也没什么意义——

> Java 提供了两个选项来创建 Thread 类，即通过实现 Runnable ...

您可以扩展`Thread`课程，但就像@John 所说的那样没有任何意义。

但是如果你想在一个新线程中执行一些代码，那么下面是最好的方法 -

```
MyRunnable r = new MyRunnable();
Thread t = new Thread(r);
t.start(); 
```

`t.start()`方法启动一个新线程并调用`run()`方法`r`（它是`MyRunnable`.

# php - PHP Regex：匹配文本网址，直到空格或字符串结尾

> ID：11073692
> 
> 赞同：2
> 
> 时间：2012-06-17T18:18:12.603
> 
> 标签：php, regex, parsing, preg-match, preg-match-all

这是文本示例：

```
$text = "asd dasjfd fdsfsd http://11111.com/asdasd/?s=423%423%2F gfsdf http://22222.com/asdasd/?s=423%423%2F
asdfggasd http://3333333.com/asdasd/?s=423%423%2F"; 
```

这是我的正则表达式模式：

```
preg_match_all( "#http:\/\/(.*?)[\s|\n]#is", $text, $m ); 
```

那匹配前两个网址，但我如何匹配最后一个？我尝试添加 [\s|\n|$] 但这也只会匹配前两个网址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:22:38.330

~~不要尝试匹配`\n`（毕竟没有换行符！）而是使用`$`（它将匹配到字符串的末尾）。~~

编辑：我很想听听为什么我最初的想法行不通，所以如果你知道，请告诉我。我猜是因为`[]`试图匹配一个字符，而行尾不是一个？:)

这将起作用：

```
preg_match_all('#http://(\S+)#is', $text, $m); 
```

请注意，您不必转义 / 因为它们不是分隔符，但您必须`\`在使用双引号时转义（因此解析字符串）。相反，我为此使用了单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:26:06.893

我不熟悉 PHP，所以我没有确切的语法，但也许这会给你一些尝试。[] 表示一个字符类，因此 |$ 将按字面意思查找 $。我认为您需要的是另一种展望，如下所示：

```
#http:\/\/(.*)(?=(\s|$)) 
```

如果这太离谱了，我深表歉意，但也许它会给你另一个尝试的角度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T22:50:15.940

请参阅[检查字符串是否为有效 URL 的最佳正则表达式是什么？](https://stackoverflow.com/a/190405/379580)

它有一些很长的正则表达式，可以匹配所有的 url。

# javascript - 按钮单击迭代图像

> ID：11073693
> 
> 赞同：0
> 
> 时间：2012-06-17T18:18:21.560
> 
> 标签：javascript, html

我是 Javascript 新手，我试图弄清楚如何在图像之间移动。我的目标是更改 html 中图像占位符的代码，以便在每次单击按钮时，它都会更改为下一个图像。我已经想出了如何将一个图像更改为另一个图像（getElementById("mainImage").src="image2.jpg";) 但我现在需要能够在单击下一个按钮时进入“image3”。我假设我需要使用变量，但我不知道如何让它工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:27:12.633

这可能是最简单的前进方式，尽管它最终将这些变量声明为全局变量。

```
var images = ["image1.jpg", "image2.jpg", "image3.jpg"];
var currentImage = 0; //defaults to image1.jpg

function goNext() {
    currentImage += 1;

    //loop back to the first image
    if(currentImage >= images.length) {
        currentImage = 0;
    }

    document.getElementById("mainImage").src = images[currentImage];
} 
```

因此，您只需调用 goNext() 即可单击按钮。

基本上，这里发生的事情是数组是项目列表，在这种情况下，字符串是对某处图像的引用。您可以通过索引从数组中取出一个项目，这就像说给我第一个项目。在 Javascript 中，这将是图像 [0]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T18:26:43.520

您可以在脚本之前添加一些`var key = 0;`，然后在脚本中为点击事件提供操作

```
var image = "image" + key + ".jpg";
getElementById("mainImage").src= image;
if(key == max){
 key = 0;
}else{
 key++;
} 
```

其中 max 是您的图像计数。

但我认为 jQuery 可以有更简单更好的解决方案 :)

# android - 使用 HTML 的 TextView 中不需要的新行

> ID：11073694
> 
> 赞同：5
> 
> 时间：2012-06-17T18:18:23.170
> 
> 标签：android, textview, newline

我有一个 TextView，它显示一个带有一些 HTML 的字符串，用于更改格式。我使用以下代码进行操作：

```
text = "What symbol do 'all, only, <b>l</b>ike' have in common?";
title.setText(Html.fromHtml(text)); 
```

问题是在不需要时插入了一个换行符，即我得到这个：

```
What symbol do 'all, only, 
like' 
have in common? 
```

“only”之后的中断是正确的（该行中没有更多空间），但“like”之后的中断是不需要的。

我一直在做测试，如果在字符串中我将粗体标签从“like”中的“l”更改为“only”中的“l”，即，我有这个：

```
text = "What symbol do 'all, on<b>l</b>y, like' have in common?"; 
```

文本正确损坏：

```
What symbol do 'all, only, 
like' have in common? 
```

这让我感到困惑，因为除此之外它是完全相同的字符串，并且不应该对行长产生影响。

难道我做错了什么？这是一个错误吗？

**更新：**我在 XML 中的 TextView 看起来像这样：

```
<TextView 
    android:textAppearance="?android:textAppearanceLarge"
    android:textColor="#ff000000" 
    android:id="@+id/title"
    android:paddingLeft="10.0sp" 
    android:paddingRight="10.0sp"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:text="Waiting for initialization..." /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:28:55.757

你有 android:layout_width="wrap_content" - 它将根据布局中的可用宽度包装文本。如果您不希望它换行，请指定 android:layout_width="match_parent"。

# python - 为什么在 Kubuntu 12.04 中安装 numpy 需要 python-dev

> ID：11073695
> 
> 赞同：6
> 
> 时间：2012-06-17T18:18:38.130
> 
> 标签：python, ubuntu, debian, pip

刚开始在 pendrive 12.04 Kubuntu 环境中使用 python。我必须安装 GCC（明白这一点），但我还必须安装 python-dev 才能使用 PIP 安装 numpy。为什么我需要 python-dev？

```
sudo apt-get install gcc
sudo apt-get install pip
cd /usr/lib/python2.7/
sudo apt-get install python-dev
sudo pip install numpy 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T18:27:24.723

当您使用`pip`安装 numpy 时，这些包是从源代码编译的。这些`pythonx.x-dev`包包含链接 python 所需的头文件。

# django - 如何在不使用原始 sql 的情况下使用 Django 连接两个表？

> ID：11073698
> 
> 赞同：5
> 
> 时间：2012-06-17T18:18:48.487
> 
> 标签：django, sorting, join, django-models, django-voting

是否可以使用 Django 的 ORM 以编程方式连接两个表？我有两个模型：主题和投票。在我的模板上，我有一个主题列表，用户可以像 Reddit 一样支持/反对投票。除了对结果进行排序外，一切正常。我无法弄清楚如何根据分数对对象列表进行排序，该分数是每个对象的投票计数的总和。我可以毫无问题地从 postgres 检索所需的数据：

```
select i.id, i.title, i.date_created, s.object_id, s.vote, Sum(vote) 
from topic_topic i, votes s 
where i.id = s.object_id 
group by 1, 2, 3, 4, 5 
order by sum DESC; 
```

它返回所需的结果：

```
id | title  |         date_created          | object_id | vote | sum 

11 | sdfg   | 2012-06-04 23:30:17.805671-07 |        11 |    1 |   2

 1 | test   | 2012-05-13 17:03:24.206092-07 |         1 |    1 |   2

 3 | asdf   | 2012-05-13 19:23:15.059135-07 |         3 |    1 |   2

 2 | adsf   | 2012-05-13 19:21:34.180905-07 |         2 |    1 |   2

12 | 11     | 2012-06-04 23:30:54.759158-07 |        12 |    1 |   2

 9 | asfd   | 2012-05-24 00:26:26.705843-07 |         9 |   -1 |  -1

 4 | asdf   | 2012-05-14 19:59:52.450693-07 |         4 |   -1 |  -2 
```

问题是，我不确定如何将其作为查询集检索。目前我正在使用以下内容来显示对象：

```
topic_list = Topic.objects.all() 
```

一切都按我的意愿显示，除了排序顺序。我希望首先显示最高分。

**我已经看过的资源：** [https ://docs.djangoproject.com/en/dev/topics/db/managers/#adding-extra-manager-methods](https://docs.djangoproject.com/en/dev/topics/db/managers/#adding-extra-manager-methods)
[如何在 django 中查询为 GROUP BY？](https://stackoverflow.com/questions/629551/how-to-query-as-group-by-in-django)

还有更多，但作为新用户，反垃圾邮件阻止我添加它们。

**我试过的东西：**

链：

```
listed_links = list(chain(topic, score)) 
```

不幸的是，如果我尝试添加一个排序值，这会破坏。

组合对象列表：

```
topic = Topic.objects.all().values_list('user','id', 'title','slug', 'date_created', 'date_updated',)

score = Vote.objects.values('object_id').annotate(total=Sum('vote')).order_by('-total')

results = []

for topic in topic:
results.append(topic)

for score in score:
results.append(topic) 
```

这导致我想要的所有对象都在一个列表中，但我不知道如何链接`topic.id`到`score.object_id`.

我也尝试过插入原始 SQL，但我觉得我做的不正确，并且可能导致第三方的 SQL 注入。

我很乐意将这个结果分享给 django-voting 项目。就像我说的那样，一切正常，除了我不知道如何按分数 desc 排序。

=============**投票**=========================

```
from django.contrib.contenttypes import generic

from django.contrib.contenttypes.models import ContentType

from django.contrib.auth.models import User

from django.db import models

from voting.managers import VoteManager

from voting.VotedObjectsManager import VotedObjectsManager

    SCORES = (
    (+1, u'+1'),
    (-1, u'-1'),
)

class Vote(models.Model):

    """
    A vote on an object by a User.
    """

    user         = models.ForeignKey(User)

    content_type = models.ForeignKey(ContentType)

    object_id    = models.PositiveIntegerField()

    object       = generic.GenericForeignKey('content_type', 'object_id')

    vote         = models.SmallIntegerField(choices=SCORES)

    objects      = VoteManager()

    class Meta:
        db_table = 'votes'
        # One vote per user per object
        unique_together = (('user', 'content_type', 'object_id'),)

    def __unicode__(self):
        return u'%s: %s on %s' % (self.user, self.vote, self.object)

    def is_upvote(self):
        return self.vote == 1

    def is_downvote(self):
        return self.vote == -1 
```

=============**主题模型**========================

```
from django.db import models

from datetime import datetime

from tinymce import models as tinymce_models

from django.forms import ModelForm

from django.template.defaultfilters import slugify

from tagging.fields import TagField

from tagging.models import Tag

from django.contrib.auth.models import User

from django.utils.translation import ugettext_lazy as _

from django.contrib.contenttypes.models import ContentType

from django.contrib.contenttypes import generic

from django.core import urlresolvers

    class Topic(models.Model):

    title           = models.CharField(max_length=50)

    slug            = models.SlugField(max_length=50, editable=False)

    topic         = tinymce_models.HTMLField()

    date_created    = models.DateTimeField(editable=False)

    date_updated    = models.DateTimeField(editable=False)

    tags            = TagField()

    def set_tags(self, tags):
        Tag.objects.update_tags(self, tags)    

    def __unicode__(self):
        return self.tags

    def __unicode__(self):
        return self.id

    def __unicode__(self):
        return self.title 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:54:22.617

我能够使用此处描述的补丁找出解决方案：

[http://code.google.com/p/django-voting/issues/detail?id=10](http://code.google.com/p/django-voting/issues/detail?id=10)

不同之处在于我提取了以下几行：

```
 def select_score(self):
    """ Add vote scores for objects in resoultset """
    from django.contrib.contenttypes.models import ContentType
    model_type = ContentType.objects.get_for_model(self.model)
    table_name = self.model._meta.db_table
    print type(model_type)
    print model_type.id
    return self.extra(select={'score': 'SELECT SUM(vote) FROM votes WHERE content_type_id=%i AND object_id=%s.id' % (int(model_type.id), table_name)}) 
```

并将它们添加到**voting/managers.py**文件中，如下所示：

```
class VoteManager(models.Manager):
def get_score(self, obj):
    """
    Get a dictionary containing the total score for ``obj`` and
    the number of votes it's received.
    """
    ctype = ContentType.objects.get_for_model(obj)
    result = self.filter(object_id=obj._get_pk_val(),
                         content_type=ctype).extra(
        select={
            'score': 'COALESCE(SUM(vote), 0)',
            'num_votes': 'COALESCE(COUNT(vote), 0)',
    }).values_list('score', 'num_votes')[0]

    return {
        'score': int(result[0]),
        'num_votes': int(result[1]),
    } 
```

然后在我的**topic.views.py**我添加了以下内容：

```
from voting.managers import VoteManager
def index(request):
queryset = Topic.objects.select_score().order_by('-score')
paginator = Paginator(queryset, 3) # Show 25 contacts per page

page = request.GET.get('page')
try:
    topic_list = paginator.page(page)
except PageNotAnInteger:
    # If page is not an integer, deliver first page.
    topic_list = paginator.page(1)
except EmptyPage:
    #If page is out of range (e.g. 9999), deliver last page of results.
    topic_list = paginator.page(paginator.num_pages)

c = Context({
'topic_list': topic_list,
'request': request
})
return render_to_response('idea/index.html', c, context_instance=RequestContext(request)) 
```

最后，在我的 index.html 中，我添加了以下几行，与为用户提供的原始示例略有不同：

```
{% load voting_tags %}
{% votes_by_user user on topic_list as vote_dict %}
{% scores_for_objects topic_list as score_dict %}

<table id="voting_table" class="list">
<tbody>
  {% for link in topic_list %}
<td class="vote">

{% dict_entry_for_item link from vote_dict as vote %}
{% dict_entry_for_item link from score_dict as score %}

<div>    
 <form class="linkvote" id="linkup{{ link.id }}"{% if vote and vote.is_upvote %} action="{% url link_vote object_id=link.id, direction="clear" %}"{% else %} action="{% url link_vote object_id=link.id, direction="up" %}"{% endif %} method="POST">
    <input type="image" id="linkuparrow{{ link.id }}" src="{{ STATIC_URL }}images/aup{% if vote and vote.is_upvote %}mod{% else %}grey{% endif %}.png">
    {% csrf_token %}
    <input type="hidden" name="next" value="{{ request.get_full_path }}"/>
    {% else %}

  </form>

       <div id="link_score">{{ score.score|default:0 }}</div>

  <form class="linkvote" id="linkdown{{ link.id }}" {% if vote and vote.is_downvote %} action="{% url link_vote object_id=link.id, direction="clear" %}"{% else %} action="{% url link_vote object_id=link.id, direction="down" %}"{% endif %} method="POST">
  {% csrf_token %}
    <input type="image" id="linkdownarrow{{ link.id }}" src="{{ STATIC_URL }}images/adown{% if vote and vote.is_downvote %}mod{% else %}grey{% endif %}.png">
     <input type="hidden" name="next" value="{{ request.get_full_path }}"/>

</td>
<td class="item">
  <a id="link_title" href="{{ link.id }}">{{ link.title|escape }}</a></h2>
  <p class="details">
    <span class="score" id="linkscore{{ link.id }}"
          title="after {{ score.num_votes|default:0 }} vote{{ score.num_votes|default:0|pluralize }}">
    </span>
    posted {{ link.date_created|timesince }} ago by
    <span class="user"><a href="../users/{{ link.user.id }}/">{{ link.owner|escape }}</a></span>
{% get_comment_count for link as comment_count %}
    <span id="comment_score" class="comment_details"> {{ comment_count }} comment{{ comment_count|pluralize }}</span>
  </p>
</td>
</tr>{% endfor %}
</tbody>
  <td>
    <div id="paginator" class="pagination">
    <span class="step-links">
        {% if topic_list.has_previous %}
            <a href="?page={{ topic_list.previous_page_number }}">previous</a>
    {% endif %}
    {% if topic_list.has_next %}
        <a href="?page={{ topic_list.next_page_number }}">next</a>
    {% endif %}
    </span>
    </div>
  </td>
</table> 
```

**编辑**

我差点忘了！如果您希望列表按 2、1、0、-1、-2 之类的顺序排序，请确保在提交您正在创建的任何对象时设置投票对象值。下面的例子来自我的**topic.views.py**。

```
def submit_topic(request):

if request.method == 'POST':
    post_topic = PosttopicForm(request.POST)
    owner = request.user
    if post_topic.is_valid():
        topic = post_topic.save(commit=False)
        topic.owner = request.user
        topic.save()
        vote = Vote(vote='0', user = request.user, content_type_id=10, object_id=topic.pk)
        vote.save()
        url = reverse('topic', args=[topic.pk, topic.slug])
        return HttpResponseRedirect(url)
else:
    post_topic = PosttopicForm()

c = Context({
    'form': post_topic,
    'user': request.user,
    'request': request, 
```

})

```
return render_to_response('topic/submit.html', c, context_instance=RequestContext(request)) 
```

我真的希望这对其他人有所帮助。很抱歉没有尽快发布解决方案。希望有人可以通过从 VoteManager 中一起摆脱 SQL 来改进这一点，但我需要继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:17:35.087

您可以尝试注释 Topic 查询集以包含投票的总和：

```
topic_list = Topic.objects.all().annotate(total=Sum('vote__vote')).order_by('-total') 
```

注意：没有看到您的模型，我不确定在`Sum()`函数中添加什么。它应该是子模型名称（我假设是投票），后跟模型上的字段名称。

# jsf-2 - 如何在java web应用程序中创建图表

> ID：11073699
> 
> 赞同：0
> 
> 时间：2012-06-17T18:19:00.357
> 
> 标签：jsf-2, primefaces, bar-chart

我是 Java Web 的新手。我正在使用 netbeans 7.0.1 和 glassfish 3 来开发 Web 应用程序。我几乎完成了所有数据输入，现在我想创建报告和图表。要求是使用动态数据（来自数据库/数据表的用户可以对数据应用过滤器）创建图表（基于用户选择的饼图/条形图/线）。我尝试使用 Primefaces，但它给出了以下错误，并在 primeface 展示案例中给出了简单的示例：

> javax.faces.event.AbortProcessingException: /pages/analyst/analysis.xhtml @65,151 actionListener="#{analysis.bar()}": java.lang.NoClassDefFoundError: org/primefaces/component/chart/series/ChartSeries

我有一个 jsf 页面，其中包含由 viewscope 的 managedbean 支持的数据表。下面是我的代码：

# 页

```
<html   xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui" 
        xmlns:f="http://java.sun.com/jsf/core">

    <body>
        <ui:composition template="./../../WEB-INF/Templates/VUTemplate.xhtml">
            <ui:define name="menu">
                <h:form id="home">
                    <p:menu>
                        <p:menuitem value="Home Page" url="../home.xhtml" />
                    </p:menu>
                </h:form>
            </ui:define>
            <ui:define name="content">
                <h:form id="form" prependId="false">
                    <p:growl id="growl" showDetail="true"/>  

                    <p:barChart id="basic" value="#{analysis.categoryModel}" legendPosition="ne"
                                title="Basic Bar Chart" min="0" max="200" style="height:300px"/>

                    <p:dataTable id="table" var="var" widgetVar="wbTable"
                                 value="#{analysis.list}" 
                                 paginator="true" rows="10" 
                                 paginatorPosition="bottom"
                                 emptyMessage="No data found with given criteria"
                                 >                                

                        <f:facet name="header">  
                            World Bank Open Data Analysis
                        </f:facet>  

                        <p:column filterBy="#{var.regionFullName}" sortBy="#{var.regionFullName}"
                                  headerText="Region" footerText="Enter starting characters" >  
                            <h:outputText   value="#{var.regionFullName}" />
                        </p:column>

                        <p:column filterBy="#{var.countryFullName}" sortBy ="#{var.countryFullName}"
                                  headerText="Country" footerText="Enter starting characters" >
                            <h:outputText   value="#{var.countryFullName}" />
                        </p:column>

                        <p:column  filterBy="#{var.indcatorTypeName}" sortBy ="#{var.indcatorTypeName}"
                                   headerText="Indicator Type" footerText="Enter starting characters" >
                            <h:outputText   value="#{var.indcatorTypeName}" />
                        </p:column>

                        <p:column  filterBy="#{var.indicatorName}" sortBy ="#{var.indicatorName}"
                                   headerText="Indicator" footerText="contains" filterMatchMode="contains">
                            <h:outputText   value="#{var.indicatorName}" />
                        </p:column>

                        <p:column  filterBy="#{var.year}" sortBy ="#{var.year}" 
                                   headerText="Year" footerText="starts with">
                            <h:outputText value="#{var.year}" />
                        </p:column>

                        <p:column  filterBy="#{var.dataValue}" sortBy ="#{var.dataValue}"
                                   headerText="Data Value" footerText="starts with" >
                            <h:outputText value="#{var.dataValue}" />
                        </p:column>
                    </p:dataTable>

                    <h:panelGrid id="command" columns="6"  cellpadding="4" >
                        <p:commandButton id="line" value="Line" actionListener="#{analysis.line()}"  process="@this :form:table"  update="result  table" >                                
                        </p:commandButton>
                        <p:commandButton id="bar" value="Bar" actionListener="#{analysis.bar()}" process="@this :form:table"  update="result  table" >                                
                        </p:commandButton>
                    </h:panelGrid>
                    <p:messages id="result" showDetail="true" autoUpdate="true"/>  

                </h:form>
            </ui:define>
        </ui:composition>
    </body>
</html> 
```

# 豆豆

```
import ejb.VwdataFacade;
import java.io.Serializable;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import model.Vwdata;
import org.primefaces.component.chart.series.ChartSeries;
import org.primefaces.model.chart.CartesianChartModel;

@ManagedBean
@ViewScoped
public class Analysis implements Serializable{
    private List<Vwdata> list;

    private @EJB VwdataFacade wsvc;  //entity services    
    private CartesianChartModel categoryModel;

    public Analysis() {
    }   

    public CartesianChartModel getCategoryModel() {
        return categoryModel;
    }

    @PostConstruct
    public void init() { 
        list = wsvc.findAll();
     }

    public List<Vwdata> getList() {
//        list = wsvc.findAll();
        return list;
    }
    public void line(){

    }

    public void bar(){
        createCategoryModel();
    }

    private void createCategoryModel() { 
        categoryModel = new CartesianChartModel();  
        ChartSeries yaxis = new ChartSeries();
        yaxis.setLabel("Label");          
        yaxis.set("2004",120);
        yaxis.set("2005",130);
        yaxis.set("2006",140);
        yaxis.set("2007",110);
        categoryModel.addSeries(yaxis); 
    }

} 
```

如果我在构造函数或 init 方法中调用 createCategoryModel，我什至无法查看在没有图表代码的情况下可以正常工作的页面。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:08:16.073

> ```
> java.lang.NoClassDefFoundError: org/primefaces/component/chart/series/ChartSeries 
> ```

提到的类是在 PrimeFaces 3.0 中引入的，因此在 PrimeFaces 2.x 和更早版本中不可用。

鉴于 PrimeFaces 3.0 特定的 XML 命名空间`http://primefaces.org/ui`和`<p:xxx>`代码中的所有标记显然不会导致 Facelets 编译错误，这只能意味着您在 webapp 的运行时类路径中**同时拥有**PrimeFaces 2.x 和 3.x 库其中 2.x 在类加载中具有优先权。

从您的 web 应用程序的运行时类路径中删除有问题的旧 PrimeFaces 2.x 库，然后这个问题应该会消失。

# java - eclipse中的java文件相对路径

> ID：11073702
> 
> 赞同：1
> 
> 时间：2012-06-17T18:19:54.430
> 
> 标签：java, file, path, io, bufferedreader

三天我试图弄清楚如何使用相对文件路径读取文件。在 Eclipse 中，它可以编译并且效果很好，但是当我导出 app. 它说它找不到文件。这是我正在处理的屏幕截图和代码。

此代码有效，但仅在 Eclipse 中，它可以编译并完美地完成工作。但是当我将它导出为可运行的 jar 文件时，我得到一个错误，它无法找到 licenca.txt

```
 BufferedReader in = new BufferedReader(new FileReader(new File("licenca.txt").getPath()));
        String str;
        while ((str = in.readLine()) != null) {
      taLicenca.append(str + "\n");

    } 
```

这是我的项目文件的屏幕截图

[![文件](../Images/5e907eb2c7c224ccf5a006f4a730fd9d.png)](https://i.stack.imgur.com/aq7qT.png)

我尝试过使用扫描仪功能，结果还是一样，它在 Eclipse 中有效，但在导出时无效。这是错误消息：

[![错误](../Images/a40272d966a4d06ee1452f921efd7442.png)](https://i.stack.imgur.com/4x0Lc.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T18:24:28.810

我敢打赌，如果您将该文件放入类路径中，它将起作用。

像这样更改您的代码：

```
InputStream is = this.getClass().getClassLoader().getResourceAsStream("licenca.txt");
BufferedReader in = new BufferedReader(new InputStreamReader(is));
String str;
while ((str = in.readLine()) != null) {
    taLicenca.append(str + "\n");
} 
```

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:26:07.953

**发生这种情况是因为您的文件是作为文件的一部分`jar`**导出的，因此，为了创建`jar`文件，请尝试使用`ant`or`maven`或其他东西，或者使用您的 jar 手动将您的文件复制到目录中，它调用`start directory`.

# jpa - JPA - @Version - 读取时增加

> ID：11073703
> 
> 赞同：1
> 
> 时间：2012-06-17T18:19:58.470
> 
> 标签：jpa, optimistic-locking, optimistic-concurrency

我已经实现了一个带有 @version 注释的简单实体 ejb。我希望每次更新实体后版本号都会增加。

```
@Version
public Integer getVersion() {
    return version;
}
public void setVersion(Integer version) {
    this.version = version;
} 
```

但这似乎没有按预期工作。此外，每次我读取实体时，版本号都会自动增加（！？）。我希望版本只在提交后增加？

谁能解释为什么我的版本在阅读时也会增加？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:28:52.590

最后我找到了奇怪行为的原因。问题发生在我将所有值从我的（仍然连接的）实体复制到分离的域模型对象的方法中。这一切都很好，因为我读取了一个包含复杂数据结构的附加实体（一个包含 HashMaps 的向量）。我使用 List 接口中的 .addAll 方法复制了这些值：

```
List activePropertyValue = (List)mapEntry.getValue();
// value contains HashMaps!
List detachePropertyValue = new Vector();
detachePropertyValue.addAll(activePropertyValue); 
```

但似乎这改变了附加实体数据属性的哈希值。所以在数据库中更新了所有实体之后，版本号增加了。

我通过在复制所有值之前分离实体解决了这个问题：

```
manager.detach(aEntity);
.....
List activePropertyValue = (List)mapEntry.getValue();
// value contains HashMaps!
List detachePropertyValue = new Vector();
detachePropertyValue.addAll(activePropertyValue); 
```

# javascript - 如何在视频播放结束时删除大播放按钮（VideoJS）

> ID：11073705
> 
> 赞同：5
> 
> 时间：2012-06-17T18:20:18.047
> 
> 标签：javascript, html, video, html5-video, video.js

我在 VideoJS 论坛上发布了这个，但还没有收到回复，我希望我能在这里得到一些帮助。:)

我正在尝试删除在视频 js 中播放完视频后出现的“大播放按钮”。

我尝试了无数次隐藏/表演，但似乎无法让它最终消失。我通过简单地改变css一开始就隐藏了它，但最后我什么也没找到。我正在使用最新版本的 Video JS，因此我发现的旧修复程序不起作用。

请帮忙。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:57:12.910

CSS 答案是最好的，尽管您最好将其隐藏在自己的样式表中，这样您就可以毫无问题地升级到更高版本的 Video.js。这应该这样做。

```
.video-js.vjs-default-skin .vjs-big-play-button { display: none; } 
```

您也可以删除包含 bigPlayButton 组件的行，但这确实会妨碍轻松升级。

[https://github.com/zencoder/video-js/blob/master/src/core.js#L69](https://github.com/zencoder/video-js/blob/master/src/core.js#L69)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:22:38.170

只需删除/更改 CSS，它就在那里。video-js.css 中的第 328 行到第 360 行

[https://github.com/zencoder/video-js/blob/master/design/video-js.css](https://github.com/zencoder/video-js/blob/master/design/video-js.css)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T10:22:50.277

他们的 javascript 在 id 上添加了一个类，以指示视频已播放完毕。添加以下 CSS 行：

```
.vjs-paused .vjs-big-play-button { display: none; } 
```

# mysql - 如何使用命令行更改 MySQL 表的外键

> ID：11073706
> 
> 赞同：13
> 
> 时间：2012-06-17T18:20:26.727
> 
> 标签：mysql, alter-table, alter

如何使用命令行更改 MySQL 中的现有表，将外键设置为另一个表？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-17T18:24:31.030

您必须删除现有的`foreign key`并创建另一个。例如像这样：

```
ALTER TABLE my_table DROP FOREIGN KEY my_key;
ALTER TABLE my_table ADD CONSTRAINT my_key FOREIGN KEY ('some_id') 
REFERENCES some_new_table ('some_other_id') ON UPDATE CASCADE ON DELETE CASCADE; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T18:26:48.123

`help alter table`在命令提示符下执行，`mysql`输出非常不言自明。
查找`add constraint`with`foreign key`子句并将其应用于您的表。

```
mysql> help alter table
Name: 'ALTER TABLE'
Description:
Syntax:
ALTER [IGNORE] TABLE tbl_name
    alter_specification [, alter_specification] ...

alter_specification:
    ADD [COLUMN] column_definition [FIRST | AFTER col_name ]
  | ADD [COLUMN] (column_definition,...)
  | ADD {INDEX|KEY} [index_name] [index_type] (index_col_name,...)
  | ADD [CONSTRAINT [symbol]]
        PRIMARY KEY [index_type] (index_col_name,...)
  | ADD [CONSTRAINT [symbol]]
        UNIQUE [INDEX|KEY] [index_name] [index_type] (index_col_name,...)
  | ADD [FULLTEXT|SPATIAL] [INDEX|KEY] [index_name] (index_col_name,...)
  | ADD [CONSTRAINT [symbol]]
        FOREIGN KEY [index_name] (index_col_name,...)
        [reference_definition]
  | ALTER [COLUMN] col_name {SET DEFAULT literal | DROP DEFAULT}
  | CHANGE [COLUMN] old_col_name column_definition
        [FIRST|AFTER col_name]
  | MODIFY [COLUMN] column_definition [FIRST | AFTER col_name]
  | DROP [COLUMN] col_name
  | DROP PRIMARY KEY
  | DROP {INDEX|KEY} index_name
  | DROP FOREIGN KEY fk_symbol
  | DISABLE KEYS
  | ENABLE KEYS
  | RENAME [TO] new_tbl_name
  | ORDER BY col_name
  | CONVERT TO CHARACTER SET charset_name [COLLATE collation_name]
  | [DEFAULT] CHARACTER SET charset_name [COLLATE collation_name]
  | DISCARD TABLESPACE
  | IMPORT TABLESPACE
  | table_option ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-03T13:51:21.113

如果您有多个外键链接在一起并且您收到一个以它结尾的错误，`errorno 15x`这很可能意味着还有其他表依赖于您尝试删除的外键。

要在出现该错误时删除外键，您需要`SET FOREIGN_KEY_CHECKS = 0;`先删除没有任何其他表依赖于它们的表上的外键。然后，您可以成功地将外键放在链中的下一个表上，依此类推。

完成后，请确保`SET FOREIGN_KEY_CHECKS = 1;`再次运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-03T12:40:02.967

我能够通过以下方式实现相同的目标：

```
ALTER TABLE the_table_name 
    ADD CONSTRAINT the_name_of_column_you_want_to_use_as_foreign_key 
       REFERENCES other_table_primary_id (Column_name ) 
```

# linux - g++ 默认头包含列表

> ID：11073707
> 
> 赞同：5
> 
> 时间：2012-06-17T18:20:37.110
> 
> 标签：linux, gcc, include, g++, embedded-linux

在 Linux 机器（ lubuntu 11.10 ）中以详细模式使用 cross g++ 执行编译时，我可以看到默认包含头目录的列表：

```
#include <...> search starts here:
/opt/eldk-4.2/usr/bin/../lib/gcc/powerpc-linux/4.2.2/include
/opt/eldk-4.2/ppc_4xx/usr/include/c++/4.2.2/opt/eldk-4.2/ppc_4xx/usr/include/c++/4.2.2/powerpc-linux
/opt/eldk-4.2/ppc_4xx/usr/include/c++/4.2.2/backward
/opt/eldk-4.2/usr/../ppc_4xx/usr/include 
```

在另一台 Linux 机器（lubuntu 12.10）中执行相同的 g++ 二进制文件，我得到另一个不同的列表，其中元素更少：

```
#include <...> search starts here:
/opt/eldk-4.2/usr/bin/../lib/gcc/powerpc-linux/4.2.2/include 
```

并且其中一些元素看起来很糟糕，如下所示：

```
ignoring nonexistent directory "/opt/ppc_4xx/usr/lib/gcc/powerpc-linux/includ../include/c++/4.2.2" 
```

结果是在第一个系统上编译的某些代码没有在第二个系统上编译，因为找不到某些标头。

为什么会这样？。这个列表来自哪里？谁负责建造它？是否可以轻松更改它？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T18:33:22.387

您可以通过设置环境变量将目录添加到默认搜索路径：

*   `C_INCLUDE_PATH`（对于 C 头文件）
*   `CPLUS_INCLUDE_PATH`（对于 C++ 头文件）。

或者，[您可以创建和编辑规范文件](http://www.mingw.org/node/25)并将其放置在 G++ 查找它们的位置。您可以使用 . 检查路径`strace gcc`。

[GCC 页面上有关规范文件的附加文档。](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Spec-Files.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:24:38.623

我在使用 ELDK 4.2 时遇到了一些问题。这很可能与 ubuntu 12.04 中的某些更改有关，因为在升级之前我已经让编译器在同一台计算机上运行良好。

我的问题是似乎忘记了 /usr

忽略不存在的目录“/opt/eldk-4.2/../ppc_82xx/usr/include”

它应该是

/opt/eldk-4.2/usr/../ppc_82xx/usr/include

这在 ubuntu 11.10 上完美运行。

我已经尝试从 ISO 安装 ELDK 并从 ubuntu 11.10 中的工作版本复制安装

# facebook-graph-api - 带有 cakephp 的 redirect_uri facebook 图形 api

> ID：11073708
> 
> 赞同：0
> 
> 时间：2012-06-17T18:21:04.010
> 
> 标签：facebook-graph-api, cakephp-2.1

我需要从我的 php 网站分享一个页面到用户的 facebook 墙。如果用户未登录 facebook，我的网站使用重定向到 facebook 登录页面

```
 $user = $facebook->getUser();
    if($user) {
        $result = $facebook->api(
            '/me/feed/',
            'POST',
            array('access_token' => $this->access_token, 'link'=>'google.com', 'message' => 'Test link')
        );
        $this->Session->setFlash('Your link has been succesfully posted on your wall');
        $this->redirect($this->referer());
    }else {
       $login_url_params = array(
          'req_perms' => 'publish_stream',
          'redirect_uri' => 'localhost/pictrail' //thts the same path I gave to my facebook app
       );
       $login_url = $facebook->getLoginUrl($login_url_params);
       header("Location: {$login_url}");
       exit();
    } 
```

因此，当用户未登录 facebook 时，它会重定向到 facebook 以供用户登录，然后无论我输入的网址如何，它都会重定向到 localhost/pictrail。我想将其重定向为 localhost/pictrail/images/param ...我该如何实现呢？我尝试了“localhost/pictrail/images/99”，但没有成功。用户登录 facebook 后一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:54:29.890

You cannot redirect from Facebook to `localhost` as it's not a valid address.

The way that I got around this, ***for development***, was to edit my `hosts` file and replace the domain with my local ip.

www.example.com 127.0.0.1

Then you can redirect to www.example.com from your Facebook app and it will render your local development version.

Be sure to add this domain to your local server's vhost or similar.

* * *

Sorry I misread your question. To change the Facebook redirect url you need to change it in your Facebook app. So you'd have to pass a custom field through to Facebook and then tack it back on afterwards.

Have a look through this, [https://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)

# c# - 使用路径在 app.config 中的 dll

> ID：11073709
> 
> 赞同：2
> 
> 时间：2012-06-17T18:21:22.540
> 
> 标签：c#, dll

我正在为此苦苦挣扎，根本找不到太多。

我的配置文件如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
     <assemblyIdentity name="mydll"  culture="neutral"         publicKeyToken="3073773c0eff8935"/>
    <codeBase version="1.0.0.0" href="FILE://C:/users/James/Desktop/mydll2.dll"/>
  </dependentAssembly>
</assemblyBinding>
 </runtime>
  </configuration> 
```

我已经插入了我的程序集的位置以及正确的 publickeytoken 和版本。

显然我的程序集不会在 bin 文件夹中，我希望能够在我喜欢的时候更改程序集的位置。我被困在如何在我的代码中引用它。如何从我的项目中调用此汇编函数？

我假设您需要以某种方式在项目中添加对它的引用？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:41:24.937

对于其他偶然发现此问题的人...我现在已经这样做了...

这里有一个教程.. [http://support.microsoft.com/kb/837908](http://support.microsoft.com/kb/837908)

通过使用 app.config 中的标签，程序集的位置将在运行时获得。

您应该做的就是添加对程序集的引用并将“assemblyIdentity name=”设置为添加到项目中的引用的名称。

右键引用->属性，复制local=false；

构建您的解决方案，您可以使用程序集的位置更新 app.config 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:26:57.267

在运行时，您从特定位置加载组件

```
Assembly assembly = Assembly.LoadFrom("dllPath"); 
```

# command-line-arguments - 如何通过 SpiderMonkey 命令行将参数传递给脚本？

> ID：11073713
> 
> 赞同：0
> 
> 时间：2012-06-17T18:22:01.453
> 
> 标签：command-line-arguments, spidermonkey

我在 Debian 上使用 SpiderMonkey 1.8.5。我正在通过命令行使用

```
js -f <myScript> 
```

我想将一些参数传递给我的脚本，但我不知道该怎么做。这应该是可能的，因为[文档](https://developer.mozilla.org/en/SpiderMonkey/Shell_global_objects)告诉您一个特殊的对象，它收集了提供给脚本的所有参数。

我尝试了以下方法：

```
js -f <myScript> <1stArg> 
```

但是 SpiderMonkey 将这两个参数视为要执行的不同脚本，因此会发送错误消息，指出“<1stArg>”文件不存在。

做我想做的事的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:47:35.797

像这样：

在 script.js 中

```
#!/usr/bin/js
print(arguments); 
```

然后从系统外壳：

```
$ chmod +x script.js
$ ./script.js 
```

# vim - 抑制来自vim autocmd的输出？

> ID：11073714
> 
> 赞同：1
> 
> 时间：2012-06-17T18:22:11.107
> 
> 标签：vim

我有一个简单的`BufWritePost`autocmd 可以从我的 vimwiki 页面自动生成 HTML。

```
autocmd BufWritePost *.wiki VimwikiAll2HTML 
```

但它会吐出很多进度输出，并在最后提示：

```
Press ENTER or type command to continue 
```

有没有办法抑制vim autocmd的输出和提示，使其完全透明？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T18:48:30.970

尝试`silent`在模式之后添加。

```
autocmd BufWritePost *.wiki silent VimwikiAll2HTML 
```

并将您的问题添加`autocmd`到您的问题中，这将有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:33:05.420

您可以尝试另一种选择：

```
:h vimwiki-option-auto_export 
```

# php - PHP修改数据的问题

> ID：11073716
> 
> 赞同：-2
> 
> 时间：2012-06-17T18:22:14.400
> 
> 标签：php

将数据写入我的数据库时遇到问题。当我编辑页面并使用 HTML 标记插入数据时，它会损坏。例如，一些由 < h2 > 标签包围的文本，当我检查数据库时，我看到了额外的字符 <h2>....

<h2>关于页面</h2>

<p>这是关于页面</p>

然后，当我重新加载我的网页时，我看到了我输入的文本和标签，显然我不想看到它们。任何想法为什么会发生这种情况？

```
<?php 
session_start();
include_once "admin_check.php";
?>
<?php 
first thing, I did not do that
$pid = preg_replace('#[^0-9]#', '', $_POST['pid']); // filter everything but numbers     for security

include_once "../scripts/connect_to_mysql.php";
$sqlCommand = "SELECT pagetitle, linklabel, pageorder, pagebody FROM pages WHERE id='$pid' LIMIT 1"; 
$query = mysqli_query($myConnection, $sqlCommand) or die (mysqli_error()); 
while ($row = mysqli_fetch_array($query)) { 
    $pagetitle = $row["pagetitle"];
    $linklabel = $row["linklabel"];
    $pageorder = $row["pageorder"];
    $pagebody = $row["pagebody"];
    $pagebody = str_replace("<br />", "", $pagebody);
    $pagebody = nl2br(htmlspecialchars($pagebody));
} 
mysqli_free_result($query); 
?>

<?php
$pid = $_POST['pid'];
$pagetitle = $_POST['pagetitle'];
$linklabel = $_POST['linklabel'];
$pagebody = $_POST['pagebody'];
// Filter Function -------------------------------------------------------------------
function filterFunction ($var) { 
    $var = nl2br(htmlspecialchars($var));
    $var = str_replace("'", "&#39;", $var);
    $var = str_replace("`", "&#39;", $var);     
    return $var; 
} 
$pagetitle = filterFunction($pagetitle);
$linklabel = filterFunction($linklabel);
$pagebody = filterFunction($pagebody);
// End Filter Function --------------------------------------------------------------
include_once "../scripts/connect_to_mysql.php";
// Add the updated info into the database table
$query = mysqli_query($myConnection, "UPDATE pages SET pagetitle='$pagetitle', linklabel='$linklabel', pagebody='$pagebody', lastmodified='now()' WHERE id='$pid'") or die (mysqli_error($myConnection));

echo 'Operation Completed Successfully! <br /><br /><a href="index.php">Click Here</a>';
exit();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:26:17.687

**不要在插入时更换。**更换显示字符是***显示***问题，应在***显示***时进行。

# java - 使用按钮启动和停止线程

> ID：11073717
> 
> 赞同：1
> 
> 时间：2012-06-17T18:22:14.587
> 
> 标签：java, multithreading, swing, concurrency

我有一个我认为是一个简单的问题，我还没有找到一个好的解决方案：我希望能够通过点击 Swing 界面面板上的按钮来暂停和取消暂停线程中发生的活动。

具体来说，我想用一个线程实时接收音频帧；第二个线程对这些帧执行魔术处理；第三个线程将结果序列化并通过套接字发送到其他地方。更重要的是，根据我们使用的魔法品牌，第二个线程中的每帧处理可能需要比实际数据收集更长的时间来执行，并且数据可能会在一段时间后堆积起来。

作为一个**非常粗略的原型解决方法**，我们认为我们会添加一个带有按钮的 GUI，以打开和关闭音频收集过程和一个状态栏（稍后实现），以便用户可以密切关注缓冲区（一个链接的阻塞队列）恰好是。

这比我预期的要难。我将问题简化为一个玩具版本：一个可以存储 50 个整数的链接阻塞队列、一个 GUI、两个线程（以不同的速率添加到队列中和从队列中删除）和一个包裹在布尔值周围的 Token 对象。它看起来像这样，它有点工作：

**测试.java**

```
public class Test {
  public static void main(String[] args) throws IOException {

    Token t1 = new Token();
    Token t2 = new Token();
    LinkedBlockingQueue<Integer> lbq = new LinkedBlockingQueue<Integer>(50);

    startFill sf = new startFill(t1, lbq);
    startEmpty se = new startEmpty(t2, lbq);

    TestUI testUI = new TestUI(t1, t2, lbq);
    testUI.setVisible(true);

    sf.start();
    se.start();
  }
} 
```

**测试UI.java**

```
public class TestUI extends JFrame implements ActionListener {
  private JToggleButton fillStatus, emptyStatus;
  public boolean filling, emptying;
  public Token t1, t2;
  public LinkedBlockingQueue<Integer> lbq;

  public TestUI(Token t1, Token t2, LinkedBlockingQueue<Integer> lbq) {
    this.t1 = t1;
    this.t2 = t2;
    this.lbq = lbq;
    initUI();
  }

  public synchronized void initUI() {
    JPanel panel = new JPanel();
    panel.setLayout(null);

    filling = false;
    fillStatus = new JToggleButton("Not Filling");
    fillStatus.setBounds(20, 20, 150, 25);
    fillStatus.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent event) {
        if (filling == false) {
          fillStatus.setText("Filling");
        } else {
          fillStatus.setText("Not Filling");
        }
        filling = !filling;
        t1.flip();
        System.out.println("fill button press");
      }
    });

// Similar code for actionListener on Empty button, omitted

    panel.add(fillStatus);
    panel.add(emptyStatus);
    add(panel);
    setTitle("Test interface");
    setSize(420, 300);
    setLocationByPlatform(true);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
  }

  public void actionPerformed(ActionEvent e) {
  }
} 
```

**开始填充.java**

```
public class startFill extends Thread {
  public Token token;
  public LinkedBlockingQueue<Integer> lbq;

  public startFill(Token token, LinkedBlockingQueue<Integer> lbq) {
    this.token = token;
    this.lbq = lbq;
  }

  public void run() {
    int count = 0;
    while (true) {
      while (!token.running()) {
        try {
          sleep(200);
        } catch (InterruptedException e) {
          e.printStackTrace();
        }
      }

      while (token.running()) {
        try {
          lbq.put(count);
          System.out.println("queue size = " + lbq.size());
          count++;
          sleep(100);
        } catch (InterruptedException e1) {
          e1.printStackTrace();
        }
      }
    }
  }
} 
```

还有一个 startEmpty.java 的工作方式大致相同，还有一个 Token.java 是一个布尔状态变量的包装器，为了仁慈的简洁而省略。

这样就可以了，但是以`while (!token.running())`循环中的轮询为代价。我尝试使用锁和条件，但失败了，总是得到 IllegalMonitorStateExceptions。

我查看了这个[类似的问题](https://stackoverflow.com/q/3179356/1092746)并设法让它工作，但是以使用在 Java 5 和 Java 6 之间明显不同的 yield() 方法为代价，并且似乎非常不鼓励。

所以我的问题是： **是否有一些正确或明显更好的方法来做我想做的事情？** 似乎应该有一种方法可以在没有轮询和可靠方法的情况下实现这一点。

**更新：**我不确定我能否解决*以某种方式*为应用程序控制音频捕获循环的问题。无论是人类按下按钮，还是基于其他因素做出决策的内部逻辑，我们确实需要能够关闭该死的东西并根据命令使其恢复活力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:42:25.917

除了通过 GUI 手动处理 3 个工作进程之间的同步之外，您还可以在工作人员之间设置工厂阵容：

*   在您的工作人员之间添加 2 个队列
*   在队列状态条件下阻塞线程；
    *   读者（消费者）阻塞空队列
    *   当队列已满时，作者（生产者）阻塞（比如 2n 条消息，其中 n 是该队列的消费者数量。）
*   `wait()`在队列中添加或删除消息后，在队列中阻塞您的线程和`notifyAll()`在该队列中。

像这样的设置会自动减慢生产者比消费者运行得更快的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:59:14.087

你为什么不实施`ArrayBlockingQueue.`

它更好地使用存在于**java.util.concurrent 包中的****ArrayBlockingQueue类，它是线程安全的。**

 **```
BlockingQueue<String> queue = new ArrayBlockingQueue<String>(100); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T03:49:35.810

这是我尝试做的一种方法：正确使用 wait() 和 notify()，在 Token 对象上同步，如下所示：

**startFill.java run() 方法**

```
 public synchronized void run() {
    int count = 0;
    try {
      // token initializes false
      // wait until notification on button press
      synchronized (token) {
        token.wait();
      }

      // outer loop
      while (true) {
        // inner loop runs as long as token value is true
        // will change to false on button press
        while (token.running()) {
          lbq.put(count);
          System.out.println("queue size = " + lbq.size());
          count++;
          sleep(100);
        }

        // wait until notification on button press, again      
        synchronized (token) {
          token.wait();
        }
      }
    } catch (InterruptedException e2) {
      e2.printStackTrace();
    }
  } 
```

**TestUI.java 动作监听器：**

```
fillStatus.addActionListener(new ActionListener() {
  // t1 was initialized false
  public void actionPerformed(ActionEvent event) {
    if (filling == false) {
      fillStatus.setText("Filling");
      // if false, change t1 status to true
      t1.flip();
      // and send the notification to the startFill thread that it has changed
      synchronized (t1) {
        t1.notify();
      }
    } else {
      fillStatus.setText("Not Filling");
      // if true, change t1 status to false
      t1.flip();
      // no notification required due to polling nature of startFill's active thread
    }
    filling = !filling;
    System.out.println("fill button press");
  }
}); 
```

这工作得相当好，在线程关闭时无需轮询。

由于语法错误，我最初的尝试失败了——我忽略了`synchronized (token) {...}`wait() 和 notify() 语句周围的上下文块。**

# ios - UIEdgeInsets 调整后退按钮的大小

> ID：11073723
> 
> 赞同：0
> 
> 时间：2012-06-17T18:22:42.150
> 
> 标签：ios, uinavigationitem, uiappearance

我正在尝试使用 iOS 5 UIAppearance API 自定义 UINavigationBar 的后退按钮。我要使用的图像是这样的：[https](https://www.dropbox.com/s/ce83rw0e3vs9dwo/bt-back.png) ://www.dropbox.com/s/ce83rw0e3vs9dwo/bt-back.png代码如下：

```
// Customize back button items differently
UIEdgeInsets aInset = UIEdgeInsetsMake(10, 10, 10, 10);
UIImage *buttonBack30 = [[UIImage imageNamed:@"bt-back.png"] resizableImageWithCapInsets:aInset];
UIImage *buttonBack24 = [[UIImage imageNamed:@"bt-back.png"] resizableImageWithCapInsets:aInset];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBack30 forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBack24 forState:UIControlStateNormal barMetrics:UIBarMetricsLandscapePhone]; 
```

现在，该代码的输出如下：http: [//i.imgur.com/X6QBK.png](http://i.imgur.com/X6QBK.png)

我知道我必须将 UIEdgeInsets 设置为适当的值，但我正在阅读文档，似乎只能保留边缘而不是中心，女巫似乎是我需要做的事情。

有什么办法可以保留中心而不是边缘？如果不是，我必须生成多少尺寸才能使 iOS 不会拉伸 PNG？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:34:19.743

你能用这个方法吗

```
- (UIImage *)backButtonBackgroundImageForState:(UIControlState)state
    barMetrics:(UIBarMetrics)barMetrics 
```

检索后退按钮的背景图像，检索其`size`属性，然后使用它的大小来制作您的自定义图像？

# java - 异步任务空错误

> ID：11073724
> 
> 赞同：1
> 
> 时间：2012-06-17T18:22:48.173
> 
> 标签：java, android, eclipse, android-asynctask

我目前正在处理一个解析 JSON 字符串的异步任务。一旦字符串被解析并且来自 doInBackground() 的任务转移到 postExecute() 它给了我这个错误：

```
06-17 20:19:53.612: E/AndroidRuntime(591): FATAL EXCEPTION: main
06-17 20:19:53.612: E/AndroidRuntime(591): java.lang.NumberFormatException: unable to parse 'null' as integer
06-17 20:19:53.612: E/AndroidRuntime(591):  at java.lang.Integer.parseInt(Integer.java:356)
06-17 20:19:53.612: E/AndroidRuntime(591):  at java.lang.Integer.parseInt(Integer.java:332)
06-17 20:19:53.612: E/AndroidRuntime(591):  at stefan.testservice.ParkingActivity$DownloadTask.onPostExecute(ParkingActivity.java:258)
06-17 20:19:53.612: E/AndroidRuntime(591):  at android.os.AsyncTask.finish(AsyncTask.java:417)
06-17 20:19:53.612: E/AndroidRuntime(591):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
06-17 20:19:53.612: E/AndroidRuntime(591):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
06-17 20:19:53.612: E/AndroidRuntime(591):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-17 20:19:53.612: E/AndroidRuntime(591):  at android.os.Looper.loop(Looper.java:123)
06-17 20:19:53.612: E/AndroidRuntime(591):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-17 20:19:53.612: E/AndroidRuntime(591):  at java.lang.reflect.Method.invokeNative(Native Method)
06-17 20:19:53.612: E/AndroidRuntime(591):  at java.lang.reflect.Method.invoke(Method.java:507)
06-17 20:19:53.612: E/AndroidRuntime(591):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-17 20:19:53.612: E/AndroidRuntime(591):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-17 20:19:53.612: E/AndroidRuntime(591):  at dalvik.system.NativeStart.main(Native Method) 
```

它以前工作得很好，只是突然之间，异步任务结束时的“return null”语句似乎有一些问题。我似乎找不到解决方案。提前致谢。

我的代码片段：

```
private class DownloadTask extends AsyncTask<String, Void, Object> {
    @Override
    protected Object doInBackground(String... args) {
        Log.i("MyApp", "Background thread starting");

            Global.url = "http://10.0.2.2:8000/CarServiceScheduling1/resources/json/product/getpark?degree="+degreeStatus+"&year="+yearStatus+"&distance="+distance+"&devid="+Global.android_id;

            try{
                statusCode = cg.connection();    
            }catch (Exception e) {
                test_connection  = true;
            }

            if(test_connection == false){

                try {
                    output = cg.stringconverter(Global.data);
                    cg.parseGson(output);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }
        return null;
    }

protected void onPostExecute(Object result) {

                if (ParkingActivity.this.progressDialog != null) {
                    ParkingActivity.this.progressDialog.dismiss();

                    if(CheckboxPreference == true && Integer.parseInt(Global.preference1) == 0 && Integer.parseInt(Global.preference2) == 0 && (Global.status.equalsIgnoreCase("No Slots available") || Global.status.equalsIgnoreCase("No"))){

                        Intent searchSubActivity = new Intent(getBaseContext(),
                                Nospotsactivity.class);
                        startActivity(searchSubActivity);
                    }
                    else if (CheckboxPreference == true && (Integer.parseInt(Global.preference1) != 0 || Integer.parseInt(Global.preference2) != 0 )){

                        Intent searchSubActivity = new Intent(getBaseContext(),
                                Spotsfoundactivity.class);
                        startActivity(searchSubActivity);
                    }   
                    else if(CheckboxPreference == false && (Integer.parseInt(Global.preference1) != 0 || Integer.parseInt(Global.preference2) != 0 )){

                        Intent searchSubActivity = new Intent(getBaseContext(),
                                Spotsfoundactivity.class);
                        startActivity(searchSubActivity);
                    }
                    if(Integer.parseInt(Global.preference1) == 0 && Integer.parseInt(Global.preference2) == 0){

                        if(Global.status.equalsIgnoreCase("Hardly Likely")){

                            Intent searchSubActivity = new Intent(getBaseContext(),
                                    Unlikelyactivity.class);
                            startActivity(searchSubActivity);
                        }

                        else if(Global.status.equalsIgnoreCase("Likely")){

                            Intent searchSubActivity = new Intent(getBaseContext(),
                                    Likelyactivity.class);
                            startActivity(searchSubActivity);

                        }
                    }
                }
            }   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:38:29.297

根据您的堆栈跟踪，Either `Global.preference1`or`Global.preference2`为空（或两者）。您可能希望在将它们解析为整数之前进行空检查。

# c# - 过滤 LINQ 实体包括查询

> ID：11073727
> 
> 赞同：0
> 
> 时间：2012-06-17T18:23:23.787
> 
> 标签：c#, linq, entity-framework, linq-to-sql

我有以下两张表

```
Groups
Id (int)

People
Id (int)
GroupId (int, Groups.Id)
IsSelected (bit) 
```

这将在单个查询中返回所有组及其所有成员（人员）

```
var grps = myDatabase.Groups.Include("People"); 
```

如何编写一个查询来返回所有已选择人员的组（IsSelected = true）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:35:59.593

让我知道这个是否奏效

```
 var grps = myDatabase.Groups.Select(g=> new { g, people = g.People.Where(p=>p.IsSelected)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:31:34.470

您将需要使用“加入”方法，如下所示：

```
(from g in myDatabase.Groups
 join p in myDatabase.People on g.Id equals p.GroupId
 where p.IsSelected == true
 select g); 
```

这将为您提供选择了人员的所有组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-17T18:41:23.537

或查看 .Where()

就像是

```
var grps = myDatabase.Groups.Include("People").Where(x => x.IsSelected); 
//x => !x.IsSelected for false 
```

# asp.net - 为 Gridview 设置 CommandArgument

> ID：11073728
> 
> 赞同：0
> 
> 时间：2012-06-17T18:23:42.930
> 
> 标签：asp.net

我想为 Gridview 设置 CommandArgument，但是如果我运行程序，则会发生错误。

这是我的 ButtonField 声明：

```
<asp:ButtonField Text="Löschen" CommandName="Deleterecord"  ButtonType="Button" CommandArgument=<% Eval("userId") %>  /> 
```

这是错误：

```
Parser Error Message: Literal content ('<asp:ButtonField Text="Löschen" CommandName="Deleterecord"  ButtonType="Button" CommandArgument=') is not allowed within a 'System.Web.UI.WebControls.DataControlFieldCollection'. 
```

**编辑：**

使用这些代码块，我填充了我的 Gridview：

```
protected void Button2_Click(object sender, EventArgs e)
        {
            Guid g = Guid.Parse("ef7a9f97-6a9a-44c6-ac38-82a5d06c394e");
            RoutesManager rm = new RoutesManager(g);
            rm.GetAllRoutes();
            List<Route> result;
            result=rm.GetAllRoutes();

            GridView1.DataSource = result;
            GridView1.DataBind();

        } 
```

这是GetallRoutes：

```
 public List<Route> GetAllRoutes()
        {
            var inputParams = new Dictionary<string, object>();
            var xmlHelper = new XmlHelper();
            var result = new List<Route>();

            inputParams.Add("UserId", _userId);

            DataTable dt = _dbhelper.Select("SELECT * FROM ROUTES WHERE UserId=@UserId", inputParams);

            foreach (DataRow row in dt.Rows)
            {
                var xmlDoc = new XmlDocument();
                xmlDoc.LoadXml(row[XmldocPosition].ToString());               
                result.Add(xmlHelper.ConvertXmlDocumentToRoute(xmlDoc.ToXDocument()));
            }

             return result; 
```

}

我的网格视图充满了这段代码，我在我的 Gridview 中为每一行放置了一个链接按钮，如果用户单击此按钮，我希望仅从 DB 和 Gridview 中删除该行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:33:40.850

你不见了

*   一个右括号
*   上的双引号`userID`
*   单引号包含 CommandArgument 的结果值

    `<asp:ButtonField Text="Löschen" CommandName="Deleterecord" ButtonType="Button" CommandArgument='<%# Eval("userId") %>' />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:28:39.527

```
CommandArgument="<% Eval(userId) %>" 
```

尝试检查您的陈述的格式。注意“”和结束）。

# vba - Excel VBA随机数例程的有趣行为

> ID：11073729
> 
> 赞同：0
> 
> 时间：2012-06-17T18:23:42.930
> 
> 标签：vba, random, excel

我正在尝试通过以下算法通过 vba 生成一堆随机排列：

```
Function RandNumber(Bottom As Integer, Top As Integer, _
                Amount As Integer) As Integer()

Dim iArr As Variant
Dim i As Integer
Dim r As Integer
Dim temp As Integer
Dim bridge() As Integer

'Application.Volatile

ReDim iArr(Bottom To Top)

For i = Bottom To Top
    iArr(i) = i
Next i
Randomize
For i = Top To Bottom + 1 Step -1
    r = Int(Rnd() * (i - Bottom + 1)) + Bottom
    temp = iArr(r)
    iArr(r) = iArr(i)
    iArr(i) = temp
Next i

ReDim Preserve bridge(1 To Amount)
For i = Bottom To Bottom + Amount - 1
    bridge(i - Bottom + 1) = iArr(i)
Next i

RandNumber = bridge

End Function 
```

本质上是`RandNumber`它根据用户提供的底部和顶部值随机给出一个排列。示例`RandNumber(1,2,1)`将是`1`或`2`随机的。

现在我正在通过以下例程测试此功能

```
Sub RandNos()
Dim z() As Variant
ReDim Preserve z(1 To 2560)
For i = 1 To 2560
z(i) = RandNumber(1, 2, 1)
Next i
For i = 1 To 2560
ThisWorkbook.Sheets("Sheet2").Range("A1").Offset(i - 1, 0) = z(i)
Next i
End Sub 
```

令我大吃一惊的是，“随机”数字在 256 次运行后正好重复！（好的，`i`上面的值 2560 并不完全是巧合。我怀疑在 256 行周围有一些模式，因此取`i`为 2560）

此外，当我用稍微修改的子程序测试上述函数时：

```
Sub RandNos2()
For i = 1 To 2560
ActiveSheet.Range("A1").Offset((i - 1) Mod 256 + 1, Int((i - 1) / 256)) = RandNumber(1, 2, 1)
Next i
End Sub 
```

模式消失了。（至少在 256 个值之后重复的模式消失了。不确定是否会出现另一种模式）。

现在根据我的知识，`Randomize`应该通过生成适当`Randomize`的种子来控制随机性，并在 vba 中从`timer`. 所以我的假设是，在第一`RandNos()`个子程序中，更新发生得如此之快，以至于种子的更新速度不够快。当我使用第二个子例程进行测试时，模式消失的事实，因为在第二个例程中，excel 在工作表中编写代码需要更长的时间，因此给代码一些机会来更新`timer`随机数的种子 -支持我的假设。

所以我的问题是

1.  我的假设是否正确。
2.  我是否仍希望在 Excel VBA 中生成“随机”模式。
3.  我是不是用错了`Randomize`这里

提前感谢您对此问题的建议。

编辑：评论中的建议之一是我们应该`Randomize`只打电话一次。我试过这样做，它似乎工作。但是，我仍然想知道使用`Randomize`上述方法出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T19:58:18.170

在回答您的编辑时，您的假设是正确的。

随机化花费时间并生成种子。种子只是 Rnd 的起点。

但是，请注意 Randomize 不是一对一的，这意味着对于 Randomize 的任何给定输入（即时间），它不会每次都生成相同的种子。您似乎已经发现 Randomize 对于每个给定的输入都有一个由 256 个种子组成的序列。因此，您会得到一个由 256 个数字组成的重复序列，这些数字本来应该是随机的，但显然不是。

参考：Randomize 和 CS 类的 VBA 帮助页面

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T18:59:26.720

你应该只调用`Randomize`一次。如果`RandNos()`被多次调用，`Randomize`则在调用的方法中使用`RandNos()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-14T02:32:30.290

只是为了将来参考遇到此问题的任何其他人，我决定尝试“减慢”子例程，以使系统计时器重置。`Application.wait`效果不佳，但我发现通过`debug.print`在调用上方包含一个简单的行`randomize`，它会减慢执行速度，使其不会每 256 次重复一次。这不会显着增加子例程的整体运行时间。对于那些不介意牺牲一点优化以非常简单地修复伪随机性的人来说，这只是一个想法。

# android - 修改蓝牙聊天示例代码以连接非安卓设备

> ID：11073734
> 
> 赞同：5
> 
> 时间：2012-06-17T18:24:26.020
> 
> 标签：android, bluetooth

我正在根据官方 Android 开发者网站上提供的示例蓝牙聊天制作应用程序。我的应用程序在与另一部 Android 手机聊天时运行良好。但是，当我将它连接到非 Android 设备（即我的团队制作的一些电子电路）时，它不起作用。互联网研究表明，示例代码仅用于在两个 Android 设备之间进行通信。那么，如何更改示例代码以使其也适用于其他非 Android 设备。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T21:32:09.740

我通过分析BlueTerm App的源代码找到了答案。实际上，我只需要将我在应用程序中设置的 UUID 从`fa87c0d0-afac-11de-8a39-0800200c9a66`更改为`00001101-0000-1000-8000-00805F9B34FB"`

我不是这方面的专家，所以我不能说为什么会这样，但它确实有助于解决我的问题。BlueTerm 源代码可在[Pymasde 官方下载网站获得](http://pymasde.es/blueterm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T21:22:29.487

UUID 专门用于串口连接，它是一个标准。

# ruby-on-rails-3 - Rails：可以让迁移将“has_many”写入 my_model.rb 文件吗？

> ID：11073738
> 
> 赞同：0
> 
> 时间：2012-06-17T18:24:41.993
> 
> 标签：ruby-on-rails-3, model, migration, relationship

我在简单的“belongs_to <-> has_many”关系中有 2 个模型。

使用传统的迁移过程，Rails 将“belongs_to ...”行添加到一个模型，但不将“has_many ...”行添加到另一个模型。

是否可以让迁移脚本将此“has_many ...”行添加到另一个模型？如果是，我将如何编写生成器命令？

非常感谢！

# google-maps - 在谷歌地图上创建路线/航点/折线；稍后存储和检索它们

> ID：11073739
> 
> 赞同：0
> 
> 时间：2012-06-17T18:25:22.713
> 
> 标签：google-maps, directions

我想创建一个网络应用程序，让我可以创建、存储和显示我的旅行。实际上类似于[这里的这项服务。](http://www.goprotravelling.com)基本结构/思想：

1.  通过以下选项创建我的旅行
    *   加载一个gpx
    *   创建折线（例如飞行路径）
    *   使用谷歌路线创建路线
    *   每个行程由一个或几个“阶段”或“腿”组成，每个阶段都可以像上面一样创建
2.  存储路线，以便我可以在谷歌地图上显示它们或稍后编辑它们（可拖动）

因此，一张地图将包含几个看起来像这样的“ 旅行[”](http://www.goprotravelling.com/trip/b61572ecb5722462d36dda52d10b1e90)
确定我是否了解什么是可能的以及如何去做。

我的问题：

*   存储：我正在考虑将每次旅行完成后转换为他们自己的 XML 文件，其中包含所有必需的信息，例如航点和阶段。这些文件将存储在我的网络空间中，然后可以随时解析以显示旅行
*   但是，在使用 google 路线创建一条腿时，我发现了一个问题：如何存储/检索这样的一条腿并保存路线信息？只要我不通过拖动路径来更改路线（我可以简单地存储起点和终点并动态创建它），这相当容易，但是我希望以后能够再次通过拖动线来编辑它们. 是否有可能提取所有额外插入的航路点，以便稍后通过不仅使用起点和终点还使用这些附加点来重新创建路线（即谷歌会向我显示路线的相同变体吗？）
*   是否有任何方面违反 gmaps 的条款？
*   我也可以使用 mySQL 数据库来存储信息，这是更好的方法吗？

顺便说一句，我是整个 gMaps API 编程的新手。我的系统是基于php的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:37:06.500

我会推荐你​​一个mysql数据库来存储信息。方向只是一堆经纬对、旅行时间和多边形点。通常我将它存储在 JS 数组中，但您也可以使用 Json 或 JS 对象。我认为您可以序列化数组并将其存储在数据库中。我只会将 xml 用于配置或使用 xlst 格式化输出。这个想法也是将 lat-lng 存储为点并在其上使用空间索引以获得更快的搜索。

# html - 如何创建一个在我单击它时显示的列表？

> ID：11073740
> 
> 赞同：0
> 
> 时间：2012-06-17T18:25:25.377
> 
> 标签：html, list, menu

我正在寻找一个菜单，当我点击一个链接时，它可以让我显示一个列表——我不确定我应该创建一个带有子菜单的菜单标题，还是一个带有子列表的列表。

例如，如果我点击

“示例 1”

显示示例 1-1、示例 1-2、示例 1-3 等的子列表。

任何建议都非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:37:49.710

我建议你可以使用 jquery 和一些样式，有一个例子：

[http://jsfiddle.net/rv87r/1/](http://jsfiddle.net/rv87r/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:38:04.967

```
<ul>
    <li style="cursor:pointer" onclick="lastElementChild.style.display=(lastElementChild.style.display=='none'?'':'none')">list1
        <ul>
        <li>item1</li>
        <li>item2</li>
        </ul>
    </li>
</ul>​ 
```

这是一个简单的示例，您应该使用 jquery 或 id 来选择内部元素，因为**lastElementChild**不适用于 IE<9

如果你不能使用 jquery 那么你可以使用

```
(lastElementChild?lastElementchild:lastChild) 
```

这也将返回 IE<9 上的最后一个孩子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:54:20.933

我还推荐基于 JavaScript 的解决方案，因为它非常灵活且易于实现。但是，如果您绝对只想使用 HTML/CSS，您可以这样做：

它可以“点击”。它在 Safari 5/6、Firefox 13（OS X）和 IE9（Windows 7）中进行了测试。单击容器时，列表变为可见。它一直可见，直到您单击打开（聚焦）容器（例如第二个列表）或页面上的任何其他元素之外。

**CSS**

```
div.container > h2 {
    cursor: pointer;
}

div.container > ul {
    display: none;
}

div.container:focus > ul {
    display: block;
} 
```

**HTML**

```
<div class="container" tabindex="-1">
    <h2>Example 1</h2>
        <ul>
            <li>List Element 1</li>
            <li>List Element 2</li>
            <li>List Element 3</li>
    </ul>
</div> 
```

**演示**

[先试后买](http://jsfiddle.net/2QdBD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T18:59:59.743

据我所知`CSS`不支持点击。（除了`a:active`，但它不会帮助你）。`hover`根据[this](http://csswizardry.com/2011/02/creating-a-pure-css-dropdown-menu/)、[this](http://divitodesign.com/css/how-to-dropdown-css-menu/)和[this](http://purecssmenu.com/)教程，可以创建具有功能的下拉菜单。

要创建您需要的内容，您必须使用 javascript。

# c# - 显式运算符重载 + 继承

> ID：11073741
> 
> 赞同：4
> 
> 时间：2012-06-17T18:25:50.950
> 
> 标签：c#, casting, polymorphism, operator-overloading

我一直在想一种方法来解决我遇到的问题，但我不确定它是否会起作用。

假设我们有一个名为 A 的基类和 3 个子类 B、C 和 D。

```
 A
        ^
-----------------
|       |       |
B       C       D 
```

我们也有 X、Y 和 Z 三个类。

在我的系统对象类型 B、C、D 作为类型 A 传递，通常我必须将类型 B、C、D 的对象转换为对象 X、Y 或 Z（这不是强制转换，我手动转换它们，因为它们完全不同）。

因此，要将 Object 类型 A 转换为 X、Y 或 Z 类型，需要先检查子类型，然后根据子类型对 A 对象进行一些操作的结果来初始化 X、Y 或 Z 对象。

我考虑过重载从 A 到 X、Y 或 Z 的显式转换操作，只是执行与转换它们时相同的过程，但后来我想......是否可以使用 polimorfism 并从 B 重载转换， C 和 D 以某种方式添加新的 AI 子类型时不需要更改 A 的强制转换代码？（只需将显式强制转换重载添加到新子类型）

如果有什么令人困惑的地方，我希望我已经正确地解释了自己。

注意：我将为 X、Y、Z 添加一个强制转换重载

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:35:18.713

假设 X、Y 和 Z 派生自一个公共类型 T，则在 A 中声明一个抽象转换方法

```
public abstract class A
{
    public abstract T Convert();
} 
```

并在 B 中覆盖它以返回 X，在 C 中返回 Y，在 D 中返回 Z。这样，每种类型都负责返回其自己的转换类型，并且当新类型出现时，无需在 A 中进行任何更改添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T18:33:12.567

```
abstract class A
{
    public abstract object Convert();
}
class B : A
{
    public override object Convert()
    {
        return ConvertToX();
    }
    public X ConvertToX()
    {
        return new X();
    }
}
void SomeMethod()
{
    A o = new B();
    var result = (X)o.Convert();
} 
```

当您知道 class 是`B`, （通过`ConvertToX`，因为`X Convert()`不能覆盖`object Convert()`）和 an`object`当您只知道它是 an 时，这可以让您获得强类型的结果`A`。由于显式转换只能基于您正在使用的变量的静态类型发生，因此使用强制转换并不是一个很好的方法，就像您问的那样。

* * *

（@svick 指出了我之前的代码中的一个主要缺陷，如下所示，如果你只知道对象是 an `A`，而不是 an ，你就不能轻易地用它做任何事情`A<T>`。我会把它放在这里以防万一你有什么用处:)

```
interface IConvertible<out T>
{
    T Convert();
}
abstract class A
{
}
abstract class A<T> : A, IConvertible<T>
{
    public abstract T Convert();
    public static explicit operator T(A<T> a)
    {
        return a.Convert();
    }
}
class B : A<X>
{
    public override X Convert()
    {
        // TODO implement this
    }
} 
```

如果你有一个可以转换为多种类型的类型，你可以这样做：

```
class B : A<X>, IConvertible<Y>
{
    public override X Convert()
    {
        throw new NotImplementedException();
    }
    Y IConvertible<Y>.Convert()
    {
        throw new NotImplementedException();
    }
} 
```

或者：

```
class B : A, IConvertible<X>, IConvertible<Y>
{
    X IConvertible<X>.Convert()
    {
        throw new NotImplementedException();
    }
    Y IConvertible<Y>.Convert()
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T18:33:22.787

您可以让类型转换运算符`A`调用实例的虚拟（或抽象？）实例方法，`A`并为`A`. `X`，`Y`并且`Z`应该派生自此解决方案的相互基类，因此强制转换运算符可以将该基类作为结果类型。

```
public abstract class A
{
    protected abstract W ConvertToW();

    public static explicit operator W(A a)
    {
        return a.ConvertToW();
    }
} 
```

在此示例中，是和`W`的基类。`X``Y``Z`

# iphone - 使用 4 个文本字段和 id sender 10 个按钮

> ID：11073742
> 
> 赞同：0
> 
> 时间：2012-06-17T18:25:51.853
> 
> 标签：iphone, objective-c, xcode

我试图弄清楚如果我有 4 个文本字段 field1、field2、field3 和 field4，以及从 0 到 9 标记的 10 个按钮，当我按下一个按钮时，它会在 SELECTED 文本字段上显示其标签号

我的 10 个按钮的代码是

```
- (IBAction)buttonPressed:(id)sender {
currentNumber = currentNumber *10 + (float)[sender tag];
field1.text = [NSString stringWithFormat:@"%0.f",currentNumber];
} 
```

这只会将标签发送到 field1。

我有 4 个字段，我希望按钮将标签发送到所选字段。

可能吗 ？如果你能解释一下吗？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:52:19.080

拥有一个全球

```
UITextField * selectedField; 
```

当用户选择字段时

```
selectedField = field1
or
selectedField = field2
or
selectedField = field3
or
selectedField = field4 
```

然后你可以实现你的

```
- (IBAction)buttonPressed:(id)sender {
    currentNumber = [selectedField.text floatValue];
    currentNumber += (float)[sender tag];
    selectedField.text = [NSString stringWithFormat:@"%0.f",currentNumber];
} 
```

如果可能更容易（并且可能更好地保持正确的数字）将您的输入作为字符串而不是将其转换为数字，然后添加值，然后重新转换回字符串！我认为您会发现按照自己的方式进行操作，而不是在按您的方式来回转换时遇到浮点转换问题！！！

这样，您始终将文本设置为所选字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:54:16.007

我找到了

这很容易:)

```
if ([field1 isFirstResponder]) 
```

这将解决问题:)

# java - 如何防止输入负数或超过 4 位的数字

> ID：11073746
> 
> 赞同：-2
> 
> 时间：2012-06-17T18:26:14.350
> 
> 标签：java

我只是想知道是否有任何方法可以阻止用户输入负数或超过 4 位的数字。还有是否可以将此逻辑放入 GUI 中？这是我的代码：

```
import java.util.Scanner;
public class EasterSunday
{
    public static void main(String[] args)
    {
        int year; // declarations
        Scanner input = new Scanner(System.in); //start Scanner
        System.out.println("Enter in a year to find out the day and month of that Easter Sunday.");
        year = input.nextInt();
        int a = year%19;
        int b = year%4;
        int c = year%7;
        int d = (19 * a + 24) %30;
        int e = (2 * b + 4 * c + 6 * d + 5) %7;
        int eSunday = (22 + d + e);
        if ((year >= 1900) && (year <= 2099) && (year != 1954) && (year != 1981) && (year != 2049) && (year != 2076))
        {
            if (eSunday <= 30)
                System.out.println("Easter Sunday in " + year + " is March, " + eSunday);
            else
                System.out.println("Easter Sunday in " + year + " is April, " + (eSunday - 30));
        }
        else
        {
            if (eSunday <= 30)
                System.out.println("Easter Sunday in " + year + " is March, " + (eSunday - 7));
            else
                System.out.println("Easter Sunday in " + year + " is April, " + (eSunday - 37));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:47:43.450

您可以添加一个[JFormattedTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)并将字符限制为最大长度为 4 的数字。这涵盖了负数，因为用户无法输入减号。

另一种解决方案是在简单的 JTextField 上使用[InputVerifier 。](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/InputVerifier.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:22:11.453

简单的答案是使用 while 循环，并且在用户输入符合您条件的数字之前不允许用户退出。

```
number = -1;
// while either the non-negativity or four-digit condition is not met
while(number < 0 || number > 9999){
    number = requestInput(user);
} 
```

使用请求用户输入的函数 requestInput(user)。number = -1 的初始化是必要的，因为如果您只是声明它而不初始化它（如果内存服务），它将导致您的 IDE 抱怨它可能尚未初始化，或者程序将完全跳过 while 循环因为 0 在 (0, 9999) 范围内。

# javascript - 在 Javascript 中发布 SOAP

> ID：11073748
> 
> 赞同：1
> 
> 时间：2012-06-17T18:26:25.053
> 
> 标签：javascript, asp.net, soap, xsd

有人看到我在这里做什么吗？我试图在我的 asp 站点中使用这个脚本。$z:value[article.number] 是我的 asp 中的 art.number。我的意图当我点击我的文章时，我会看到图片。

最好的问候弗兰克

```
<script type="text/javascript">
var symbol = "MSFT"; 
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("POST", "http://produktinfo.byggtjeneste.no/ProduktInfo.asmx?op=HentBildeLenkeTyped",true);
xmlhttp.onreadystatechange=function() {
 if (xmlhttp.readyState == 4) {
  alert(xmlhttp.responseText);
  var json = XMLObjectifier.xmlToJSON(xmlhttp.responseXML);
  var result = json.Body[0].HentBildeLenkeTypedResponse[0].HentBildeLenkeTypedResult[0].Text;
  json = XMLObjectifier.xmlToJSON(XMLObjectifier.textToXML(result));
  alert(SModulNr + ' ProduktInfo: $' + json.Stock[0].Last[0].Text); 
 }
}
xmlhttp.setRequestHeader("SOAPAction", "http://produktinfo.byggtjeneste.no/HentBildeLenkeTyped");
xmlhttp.setRequestHeader("Content-Type", "text/xml");
var xml = '<?xml version="1.0" encoding="utf-8"?>' +
 '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ' +
                'xmlns:xsd="http://www.w3.org/2001/XMLSchema" ' +
                'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">' + 
   '<soap:Body> ' +
     '<HentBildeLenkeTyped xmlns="http://produktinfo.byggtjeneste.no/"> ' +
       '<sModulNr> + $z:value[article.number] + </sModulNr> '+
       '<iSize>xlarge</iSize> '+
     '</HentBildeLenkeTyped> ' +
   '</soap:Body> ' +
 '</soap:Envelope>';
xmlhttp.send(xml);

</script> 
```

**这是我的供应商提供的原件。**

```
POST /ProduktInfo.asmx HTTP/1.1
Host: produktinfo.byggtjeneste.no
Content-Type: application/soap+xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <HentBildeLenkeTyped xmlns="http://produktinfo.byggtjeneste.no/">
      <sModulNr>string</sModulNr>
      <iSize>None or small or large or xlarge or original or largeThumbnail</iSize>
    </HentBildeLenkeTyped>
  </soap12:Body>
</soap12:Envelope>

HTTP/1.1 200 OK
Content-Type: application/soap+xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <HentBildeLenkeTypedResponse xmlns="http://produktinfo.byggtjeneste.no/">
      <HentBildeLenkeTypedResult>string</HentBildeLenkeTypedResult>
    </HentBildeLenkeTypedResponse>
  </soap12:Body>
</soap12:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:52:29.783

这条线

```
'<sModulNr>$z:value[article.number]</sModulNr>  ' 
```

是你出错的地方。您实际上是在请求值 "$z:value[article.number]" 而不是您想要的文章编号。

我不清楚你发布的 $z 到底是什么，但你可能想要更多类似的东西

```
'<sModulNr>' + $z:value[article.number] + '</sModulNr>' 
```

# apache - Apache .htaccess - 根据环境或主机名有条件地应用基本身份验证

> ID：11073752
> 
> 赞同：15
> 
> 时间：2012-06-17T18:26:54.957
> 
> 标签：apache, .htaccess, ifdefine

我的开发设置：Mac OSX 10.7.4 / Apache 2.2.21 / PHP 5.3.10

我希望根据开发与实时环境向我的 .htaccess 文件添加条件逻辑。例如，我想在实时服务器上进行身份验证，而不是在开发服务器上进行身份验证。我在我的**httpd.conf**

`SetEnv DEV 1`

我已经确认这个 var 是通过检查**phpinfo()**的输出来设置的。然后在我的**.htaccess**文件中

```
<IfDefine !DEV>
  AuthType Basic
  AuthName "password protected"
  AuthUserFile /path/to/.htpasswd
  Require valid-user
</IfDefine> 
```

...但仍然提示我在本地开发人员上输入密码。看来该`DEV`变量不可用于`.htaccess`。我确实`AllowOverride All`设置了我`httpd.conf`的文档根目录。有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-07T18:13:47.403

我刚解决这个问题大约 4 个小时，我相信我已经有了最终的答案，并且可以为大家总结如何解决这个特别痛苦的问题。

我正在使用带有 Apache 2.2x 和 Php 5.3 的 Windows 7 Home Premium 作为我的开发机器。我也想要一个**DEV**环境变量，我可以在我的 .htaccess 文件中使用它来关闭重写和其他在我的开发环境中无效但对我的生产环境至关重要的指令。

我的 .htaccess 文件如下所示；

```
<IfDefine !__DEV__>
    AddType application/x-httpd-php53 .php
</IfDefine> 
```

HostGator 告诉我，为了拥有 php 5.3，我需要像这样修改我的 htaccess 文件以启用它，否则我只有 php 5.2。但是我已经在我的开发机器上安装了它，所以当我在本地查看它时，这个指令导致我的客户网站崩溃。我将要解释的所有内容都允许我在我的 Git 存储库中保留一个 .htaccess 文件，该文件在两个位置都可以使用。

首先，让我清理/总结一下我在网上搜索使用 IfDefine 和 SetEnv 解决此问题的方法时学到的所有东西；

1.  Apache 中的 IfDefine 指令，Only，ONLY，当我说只有我的意思是 ONLY 时，它响应在命令行传递的参数。让我稍微强调一下。只有命令行！
2.  SetEnv 和 SetEnvIf，是两个完全不同的东西。一个（SetEnv）用于 conf 文件，设置在 SERVER START TIME 设置的环境变量（特定于 apache）。SetEnfIf 在 REQUEST TIME 使用，仅用于根据 REQUEST 变量确定要设置的内容。
3.  IfDefine 指令不读取由 SetEnv 或 SetEnvIf 设置的变量。时期。没有争论，没有问题，没有“但我认为……”没有。没有，所以克服它。

简短的回答是否定的，你不能只在 httpd.conf 中使用“SetEnv DEV 1”，然后在你的 .htaccess 文件中使用 IfDefine 来检测它，根据编程逻辑的语法和性质，这看起来很直观和合理我们习惯了。回想一下，我们实际上并没有编程任何东西，这些是配置文件，当然它们不符合这种期望，仅仅是因为它们看起来应该如此。

**答案**

所以这意味着我必须弄清楚如何将启动参数添加到 Apache，对于 Linux 专家来说，答案是现成的，你只需将正确的东西添加到**envvars**文件中，但是对于我们这些可怜的**windows**迷怎么办?

好吧，对于 Windows 用户来说，它变得更有趣，原因如下：

1.  Windows 不允许您在 Apache2.2 的服务配置中永久添加启动参数（它不起作用，不要尝试，我已经做过一百万次了，相信我）。这是真的，如果你进去尝试输入自己的参数，它只会工作一次，然后下次打开对话框时参数字段为空。我不知道为什么会这样，但似乎这些参数是为了测试，而不是永久修改。
2.  安装 Apache 后，它会在开始菜单中创建“开始”、“停止”和“重新启动”快捷方式，并安装 Apache 服务监视器。**但是**开始菜单中的快捷方式使用的启动参数与 apache 服务监视器使用的启动参数不同。因此，如果您使用这些方法的组合启动/停止 apache，您将获得**不同的结果**，具体取决于您使用的方法。但是，您可以将 -D "__DEV__" 放在开始菜单快捷方式中，它会起作用！

**解决问题的步骤**

在 Windows 开发环境中永久且通用地设置一个 __DEV__ 环境变量，您可以在 .htaccess 文件中使用 IfDefine 引用该环境变量，无论您使用服务或开始菜单中的快捷方式启动 Apache 还是使用 NET START/STOP 在命令行，执行以下操作：

1.  打开开始菜单快捷方式的属性并提取您找到的用于启动 Apache 的命令。我的是；"C:\Program Files (x86)\Apache Software Foundation\Apache2.2\bin\httpd.exe" -w -n "Apache2.2" -k start

2.  修改它以包含新的 -D __DEV__ 变量，该变量必须在 httpd.exe 之后立即开始；"C:\Program Files (x86)\Apache Software Foundation\Apache2.2\bin\httpd.exe" **-D "__DEV__"** -w -n "Apache2.2" -k start

3.  您的开始菜单快捷方式现在将使用您的 dev 变量启动 apache。

4.  转到命令行（以管理员身份）

5.  类型：net stop apache2.2（或任何你的服务名称是 apache）

6.  现在在命令行中输入（或复制粘贴）与上面开始菜单快捷方式中使用的命令相同的命令，但对其进行以下更改；"C:\Program Files (x86)\Apache Software Foundation\Apache2.2\bin\httpd.exe" -D "__DEV__" -w -n "Apache2.2" -k **config**

7.  请注意单词**start**更改为**config**。这个神奇的命令所做的是将您在屏幕上看到的设置保存到与 Windows 中的服务一起存储的设置中。点击输入。从现在开始，无论何时启动服务、Apache 服务监视器启动服务或 windows 启动服务，都会传递您的变量。

对不起大家的小说，我希望它可以帮助其他一些疲惫的灵魂来总结和解释所有这些信息，我知道它会对我有所帮助！:D

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T06:07:33.280

我的第一个答案的另一个选择是使用 Allow 指令。

看：[http ://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#allow](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#allow)

```
Order deny,allow
Deny from all
AuthType Basic
AuthName "password protected"
AuthUserFile /path/to/.htpasswd
Require valid-user
Allow from env=DEV
Satisfy Any 
```

这只会检查 DEV 是否存在而不是值，这就是 apache 的工作方式。将“允许”替换（或添加）“允许来自 127.0.0.1”以使您的本地主机始终处于开发模式。

这表明任何条件都是可接受的，其中条件是：密码或来自 127.0.0.1。如果你在你的本地主机上开发，你可以使用 127.0.0.1，或者只是用你开发的任何 ip 替换它。这不需要包装在任何东西中，只需放在您的 htaccess 文件中即可。我使用虚拟主机，所以我会把它放在那里。

来源（我将其更改为查看您的原始代码）： [http ://www.askapache.com/htaccess/apache-authentication-in-htaccess.html#allow-conditional](http://www.askapache.com/htaccess/apache-authentication-in-htaccess.html#allow-conditional)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-01T20:34:54.680

2年过去了，我遇到了类似的问题。具体来说，我们正在自动部署到 AWS OpsWorks 堆栈，并且无法控制 .htpasswd 文件的放置（用于在开发过程中隐藏工作）。

我们最终的工作解决方案是这样的（Apache 2.2.25）：

```
# check the host against a regex, defining env=DEV if it matches
# this guy matches localhost, dev.project and 10.1.X.X
SetEnvIfNoCase Host "^(localhost|dev\.project|10\.1(\.\d+){2})$" DEV

AuthType Basic
AuthName "Restricted"

# auth file location, in our case defined by an AWS OpsWorks auto-deployment
# this only gets loaded if the regex above doesn't match, which is handy
AuthUserFile /srv/www/project/current/.htpasswd 

Require valid-user
Satisfy    any
Order      deny,allow
Deny from all
Allow from env=DEV 
```

该解决方案足够灵活，允许访问多个开发环境，同时对任意数量的其他环境进行身份验证。在 git 提交之前无需忽略或编辑 htaccess。环境变量可能看起来有点矫枉过正，但它允许使用正则表达式，也可以在其他地方使用。

见：[http ://httpd.apache.org/docs/2.2/howto/access.html](http://httpd.apache.org/docs/2.2/howto/access.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-25T20:14:17.040

**Debian/Ubuntu 的解决方案：**

一方面`/etc/apache2/envars`必须改变：

```
## If you would like to pass arguments to the web server, add them below
## to the APACHE_ARGUMENTS environment.
#export APACHE_ARGUMENTS='' 
```

至

```
## If you would like to pass arguments to the web server, add them below
## to the APACHE_ARGUMENTS environment.
export APACHE_ARGUMENTS='-D __DEV__' 
```

现在可以使用

```
<IfDefine !__DEV__>
    ...
</IfDefine> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T05:53:24.277

我确实喜欢回答问题，但是快速的谷歌搜索给了我你的答案。查看 apache 文档： [http ://httpd.apache.org/docs/2.0/mod/core.html#ifdefine](http://httpd.apache.org/docs/2.0/mod/core.html#ifdefine)

该`IfDefine`指令只能测试“parameter-name”，“parameter-name”是httpd在启动时设置的变量。

另请查看此站点，并向下滚动到表格： [http ://turboflash.wordpress.com/2010/05/27/apache-environment-variables-visibility-with-setenv-setenvif-and-rewriterule-directives/](http://turboflash.wordpress.com/2010/05/27/apache-environment-variables-visibility-with-setenv-setenvif-and-rewriterule-directives/)

如果您像这样启动您的开发网络服务器，您的要求**仍然是可能的：**

```
$ httpd -DDEV 
```

这将定义变量`DEV`。请注意，您不需要将其设置为任何内容，被定义基本上是将其设置为 1/true。如果它不存在，就像被设置为 false/0/null/etc...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-18T08:51:58.943

我已经使用基于`AccessFileName`指令的不同方法解决了这个问题。

在我的 MAMP 环境中，我在`<VirtualHost>`配置中添加了以下内容：

```
AccessFileName .htaccess_dev 
```

然后，我扫描了应用程序目录中的`.htaccess`文件并创建了与版本对应的符号链接，`.htaccess_dev`以便为所有这些文件提供相同的版本，并使应用程序可以在我的开发环境中运行。

然后，我找到了`.htaccess`包含文件路径的唯一文件`.htpasswd`并删除了符号链接并创建了它的修改副本。

我在`.htaccess`文件中有这个：

```
## production

AuthType Basic
AuthName "Admin"
AuthUserFile /srv/users/prod/apps/appname/public/sys-admin/.htpasswd
require valid-user 
```

而这在`.htaccess_dev`

```
## development

AuthType Basic
AuthName "Admin"
AuthUserFile /Users/fregini/Work/MAMP/appname/sys-admin/.htpasswd 
require valid-user 
```

# c# - 用于验证媒体文件的正则表达式

> ID：11073755
> 
> 赞同：0
> 
> 时间：2012-06-17T18:27:09.293
> 
> 标签：c#, .net, regex

我有一些以特定语法命名的 MP3 文件，例如：

> 1 - Sebastian Ingrosso - Calling (Feat. Ryan Tedder)

我用 C# 编写了一个小程序，它从 ID3 标签中读取曲目、艺术家和标题。我想做的是编写一个正则表达式，它可以验证文件实际上是用上面列出的语法命名的。

所以我有一个名为歌曲的课程：

```
class Song
{
    //Fields
    private string _filename;
    private string _title;
    private string _artist;

    //Properties
    public string Filename
    {
        get { return _filename;  }
        set { _filename = value; }
    }

    public string Title
    {
        get { return _title;  }
        set { _title = value; }
    }

    public string Artist
    {
        get { return _artist;  }
        set { _artist = value; }
    }

    //Methods

    public bool Parse(string strfile)
    {
        bool CheckFile;

        Tags.ID3.ID3v1 Song = new Tags.ID3.ID3v1(strfile, true);
        Filename = Song.FileName;
        Title = Song.Title;
        Artist = Song.Artist;

        //Check File Name Formatting
        string RegexBuilder = @"\d\s-\s" + Artist + @"\s-\s" + Title;
        if (Regex.IsMatch(Filename, RegexBuilder))
        {
            CheckFile = true;
        }
        else
        {
            CheckFile = false;
        }
        return CheckFile;
     } 
```

所以它在大多数情况下都有效。我在标题中有 (Feat. ) 的那一刻失败了。我能想到的最接近的是：

> \d\s-\s\艺术家\s-\s.*

这显然行不通，因为任何文本都会通过测试。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:41:49.413

`\d\s-\s\Sebastian Ingrosso\s-\sCalling(\s\(Feat.*)?`

这适用于两者：

```
1 - Sebastian Ingrosso - Calling (Feat. Ryan Tedder)
1 - Sebastian Ingrosso - Calling 
```

所以：

```
string RegexBuilder = @"\d\s-\s" + Artist + @"\s-\s" + Title + "(\s\(Feat.*)?"; 
```

应该做的工作

**可以在这里试用**：http : [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

# git - 使用 Github for Windows 发布到多个遥控器

> ID：11073765
> 
> 赞同：6
> 
> 时间：2012-06-17T18:28:18.810
> 
> 标签：git, github, github-for-windows

简短：有没有一种方法可以使用 Github for Windows GUI 同时推送到多个遥控器。

我知道通过编辑此处给出的配置文件来创建合并远程的解决方案：[从多个远程位置拉/推](https://stackoverflow.com/questions/849308/pull-push-from-multiple-remote-locations/3195446#3195446)

我正在寻找的是一个简单的 GUI 功能，它扩展了 Github 4 Windows 的当前用户友好的“同步”和“发布”选项。这些设置有一个直接选项来编辑主遥控器（原点）。我可以通过该界面添加辅助遥控器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T19:28:52.370

不幸的是，目前没有办法发布到多个遥控器，您只能推/拉到`origin`.

# sorting - Sphinxsearch - 从“常规”索引切换到分布式索引 - 这会以任何方式改变排序吗？

> ID：11073766
> 
> 赞同：0
> 
> 时间：2012-06-17T18:28:24.123
> 
> 标签：sorting, indexing, sphinx, distributed

我们最近对如何在 sphinxsearch 中加快速度进行了一些研究。

我们发现加快速度的好方法是使用分布式索引。

我们进行了实际测试，发现使用分布式索引时查询的执行速度提高了 35-40%。

我所说的分布式基本上是我们的常规索引，通过添加`AND id % 4/3/2/1 = 0`到每个源中，对于索引的每个部分，分成 4 个（承载该索引的盒子有 4 个核心）。

仅供参考，id 是我们的主键/自动增量。

因此，与其拥有一个巨大的索引，不如将其拆分为 4 个。

然后我们只使用索引类型 = 分布式 + 本地 .... 本地 .... 本地 .... 本地 .... 用于“将所有部分放在一起”索引。

我们进行了一些快速测试，得到了相同的结果……只快了 35-40% :)

因此，在我们在整个站点范围内实施之前，我们想知道：

**切换到上面提到的分布式索引是否会以任何方式影响排序？**

我们之所以这样问，是因为我们将 sphinx 用于许多与 SEO 相关的项目，并且我们需要保持结果的顺序相同。

我还应该提到，查询、所有查询选项等保持不变。任何和所有更改都是在守护进程端完成的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:07:36.520

排序应该不受影响。使用分布索引和高偏移量时，您会遭受更大的性能损失。但是前几页会很好。

据我所知，陷阱正在使用分组/集群和杀戮列表。但如果不使用它们，应该没什么好担心的。

# c++ - std:map 与运算符不匹配=

> ID：11073770
> 
> 赞同：1
> 
> 时间：2012-06-17T18:29:16.173
> 
> 标签：c++, map, iterator, std

我看过类似的问题，但我根本看不出出了什么问题。我也试过**::const_iterator**。但是 gcc 不会以任何一种方式编译。

它是关于：i = allFunctions.erase(i);

```
void removeEventListener(const std::string &type, function listener){
    if(!hasEventListener(type))
        return;

    std::map<int, std::list<function> > &allFunctions = eventHandlerList[type];
    std::map<int, std::list<function > >::iterator i;

    for(i=allFunctions.begin(); i!=allFunctions.end(); ++i)
    {
        i->second.remove(listener);

        if(i->second.empty())
        {
            i = allFunctions.erase(i);

        }
    }

    if(allFunctions.empty())
        eventHandlerList.erase(type);
} 
```

const_iterator 错误：

```
 Error: passing const std::list<void (*)(const st::event::Event&)> as
 this argument of void std::list<_Tp, _Alloc>::remove(const
 value_type&) [with _Tp = void (*)(const st::event::Event&), _Alloc =
 std::allocator<void (*)(const st::event::Event&)>, std::list<_Tp,
 _Alloc>::value_type = void (*)(const st::event::Event&)] discards qualifiers [-fpermissive]

 Error: no matching function for call to std::map<int, std::list<void
 (*)(const st::event::Event&)> >::erase(std::map<int, std::list<void
 (*)(const st::event::Event&)> >::const_iterator&) 
```

迭代器错误：

```
no match for operator= in i = (& allFunctions)->std::map<_Key, _Tp, _Compare, _Alloc>::erase [with _Key = int, _Tp = std::list<void (*)(const st::event::Event&)>, _Compare = std::less<int>, _Alloc = std::allocator<std::pair<const int, std::list<void (*)(const st::event::Event&)> > >, std::map<_Key, _Tp, _Compare, _Alloc>::iterator = std::_Rb_tree_iterator<std::pair<const int, std::list<void (*)(const st::event::Event&)> > >](i) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:03:59.530

试试这个通用的关联容器擦除循环：

```
for (std::map<int, std::list<function> >::iterator it = allFunctions.begin();
     it != allFunctions.end();  /* no increment! */ )
{
    it->second.remove(listener);

    if (it->second.empty()) { allFunctions.erase(it++); }
    else                    { ++it;                     }
} 
```

C++11 改变了成员函数的签名和返回类型`erase`，然后你就可以有一行了`it = allFunctions.erase(it);`。

# php - ÆØÅ 在 MySQL 中无法正确显示

> ID：11073774
> 
> 赞同：1
> 
> 时间：2012-06-17T18:30:06.750
> 
> 标签：php, mysql, phpmyadmin

我在 phpMyAdmin 中设置了一个表。我没有改变字符集或任何东西。我在新行中插入了一个文本，当我尝试选择该行并使用 PHP 输出时，字母 ÆØÅ 显示为 ��，但是如果我尝试在 phpMyAdmin 中编辑该字段，则字母显示正确。phpMyAdmin 正确地做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T19:48:25.870

如果你的 PHP 文件已经是 UTF-8 编码的，你应该告诉你的数据库，你需要 UTF-8。无需摆弄 MySQL 的配置，只需告诉您的连接对象，您期望哪个字符集，数据库会为您完成其余的工作。

这是一个 mysqli 连接对象的示例：

```
$db = new mysqli($dbHost, $dbUser, $dbPw, $dbName);
$db->set_charset("utf8"); 
```

之后您的查询将返回 UTF-8 编码的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:32:58.907

```
SET NAMES 'charset_name' 
```

[http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T18:34:43.153

首先，您需要确定是浏览器字符集错误，还是mysql。尝试将浏览器中的字符集交换为 utf8，或者如果它已经是 iso-8859。

如果这不能解决它，请尝试通过执行更改查询中的字符集

```
SET CHARACTER SET charsetname; 
```

# iphone - 将代码段添加到源代码后的 SIGABRT 错误

> ID：11073777
> 
> 赞同：0
> 
> 时间：2012-06-17T18:30:32.130
> 
> 标签：iphone, sigabrt

因此，将以下代码段添加到我的源代码后，应用程序拒绝运行并给我一个 SIGABRT 错误：

**CIALBrowserViewController.h**

```
UIBarButtonItem *homeButtonItem; 
```

**CIALBrowserViewController.m**

```
@interface CIALBrowserViewController ()
- (void)goHome:(id)sender; 
```

..

```
homeButtonItem = [[[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"home.png"]
                                                          style:UIBarButtonItemStylePlain
                                                         target:self
                                                         action:@selector(goHome:)] autorelease]; 
```

..

```
- (void)goHome:(id)sender {
NSURL *url = [NSURL URLWithString:@"http://google.ca/"];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj];
} 
```

**SIGABRT 错误**

```
2012-06-17 14:15:15.130 CIALBrowser[1753:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'
*** First throw call stack:
(0x354fa88f 0x378a1259 0x3544f1d7 0x5f8b 0x32f67c17 0x2a67 0x32f66cab 0x32f607dd 0x32f2eac3 0x32f2e567 0x32f2df3b 0x370ed22b 0x354ce523 0x354ce4c5 0x354cd313 0x354504a5 0x3545036d 0x32f5f86b 0x32f5ccd5 0x28df 0x2878)
terminate called throwing an exception(lldb) 
```

以下是 CIALBrowserViewController.m 的完整源代码：http: [//pastebin.com/uuUgi7Dc](http://pastebin.com/uuUgi7Dc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:37:16.730

SIGABRT 错误表明您在代码中的某处使用该方法`insertObject:atIndex:`并将`nil`其用作第一个参数，这是不允许的，会引发错误。我在 paste bin 上查看了您的代码，但没有看到那里调用了该方法，因此错误可能在另一个文件中。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:08:36.270

在`else`的部分中`if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)`，没有`homeButtonItem`分配或初始化，所以`homeButtonItem`也是 nil。然后`[buttons addObject:homeButtonItem];`会崩溃，因为您正在向数组添加一个 nil 对象。

# jquery - 如何在表中为 select td 编写选择器

> ID：11073779
> 
> 赞同：0
> 
> 时间：2012-06-17T18:30:43.317
> 
> 标签：jquery, jquery-selectors

我有这个 html 代码

```
<table style="width: 100%;">
            <tr>
                <td>
                    ID
                </td>
                <td>
                    <input id="Text1" type="text" class="b" />
                </td>
            </tr>
            <tr>
                <td>
                    Name
                </td>
                <td>
                    <input id="Text2" type="text" class="b" />
                </td>
            </tr>
            <tr>
                <td>
                    Family
                </td>
                <td>
                    <input id="Text3" type="text" class="b" />
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input id="Button1" type="button" value="Click Me" />
                </td>
            </tr>
        </table> 
```

我想要，如果用户没有输入文本选择兄弟 td 并在 td 中获取文本我正在编写此代码但没有工作

```
 $(function () {
            $("#Button1").click(function () {
                var ls = $(".b");
                alert(ls.length);
                for (var i = 0; i <= ls.length - 1; i++) {
                    if ($(ls[i]).val() == "") {
                        alert("hi");
                        var ctx = $(ls[i]).parent("td").parent().siblings();;
                        alert($(ctx).val());
                        //
                        alert(ctx.length);

                    }
                }
            });
        }); 
```

例如，如果用户在 Text1 中输入 id 并按下按钮 1，我想显示警报 id。

请帮我。谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:34:39.603

> 例如，如果用户在 Text1 中输入 id 并按下按钮 1，我想显示警报 id。

所以你想找到前`td`一个，就在`td`包含`input`没有值的那个之前的那个？那将是这样的：

```
$(function () {
    $("#Button1").click(function () {
        var ls = $(".b");
        var input;
        alert(ls.length);
        // Note that rather than using a `for` loop, you might
        // look at using jQuery's `each` function
        for (var i = 0; i < ls.length - 1; i++) {
            // Get a jQuery wrapper for this `input` element
            input = $(ls[i]);

            // Is it empty?
            if (input.val() == "") {
                // Yes, traverse up to the `td`, then get the previous `td`
                var ctx = input.closest("td").prev();

                // Show its text (or html); note that it's not `val`, `td`
                // elements don't have a *value*, they have text/markup
                alert(ctx.text()); // Or ctx.html()
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:48:14.027

这是一个涵盖所有空项目的警报，而不是每个警报

演示：http: [//jsfiddle.net/RCHss/](http://jsfiddle.net/RCHss/)

```
$("#Button1").click(function() {
    var empty_items = [];
    $(".b").each(function() {
        if ($(this).val() == '') {
            empty_items.push($.trim($(this).parent().prev().text()));
        }
    });
    if (empty_items.length) {
        alert('Please fill in :\n\n' + empty_items.join('\n'))
    }
}); 
```

# web-services - 具有抽象返回类型的 BPEL 中的 Web 服务调用

> ID：11073781
> 
> 赞同：0
> 
> 时间：2012-06-17T18:31:11.710
> 
> 标签：web-services, inheritance, bpel

是否可以在 BPEL 中调用具有抽象类返回类型并在运行时返回任何派生类型的 Web 服务？例如，如果返回类型是具有状态字段的订单状态，并且其子类具有针对不同情况（有效订单、无效订单等）的特定字段。问题是，在调用时，您必须指定一个应该是这种抽象类型的输出变量，并且子类型特定的数据不能存储在单一类型中。到目前为止，我只想定义一个数据类型，它应该通过定义所有派生类的所有字段来适应所有可能的情况。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:01:26.563

这应该是可能的，但可能取决于您使用的 BPEL 引擎。我记得我在 Apache ODE 和 WSO2 BPS 中做过类似的过程。

如果您的 BPEL 引擎不支持这一点，您可以创建几个具有绝对类型的变量并在调用中适当地使用它们。

高温高压

# java - 反序列化对象并将其添加到数组中

> ID：11073789
> 
> 赞同：0
> 
> 时间：2012-06-17T18:32:21.913
> 
> 标签：java, arrays, for-loop, deserialization

现在我正在用 Java 1.6 创建一个地址簿。现在我如何设置它是当您添加一个联系人时，它会保存到一个数组中。我写数组没有问题，但是在读取它时，我不知道如何获取我以前保存的每个对象，然后再次将其加载到数组中。

你知道吗：addbook 是我的文件，它是一个 txt 文件。数组是我用来存储对象的数组。我使用的排序是按名称对联系人进行排序的插入排序。如果我没有涵盖其他变量名称以及类似的东西，我可以澄清一下。

最后，为了澄清起见，我的问题是询问如何读取保存到文件中的数组。这是我的阅读代码：

```
try {
    FileInputStream in = new FileInputStream(addBook);
    ObjectInputStream readIn = new ObjectInputStream(in);

    array = readIn.readObject();
    readIn.close();

    Sorts.insertionSort(array);

    model.removeAllElements();

    for (int i = array.length - 1; i > 0; i--) {
        model.addElement(((Book) array[i]).getContact());
    }
    comboBox.setModel(model);

} catch (Exception e) {
     e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:41:14.000

[`ObjectInputStream.readObject`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html#readObject%28%29)返回一个`Object`. 您不能将 a 分配`Object`给`Comparable[]`没有[演员表](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html): `array = (Comparable[]) readIn.readObject()`。

# c# - 自动映射集合

> ID：11073790
> 
> 赞同：1
> 
> 时间：2012-06-17T18:32:22.490
> 
> 标签：c#, .net, collections, automapper

我正在使用[Automapper](https://github.com/AutoMapper/AutoMapper)来映射我的域模型和 DTO。当我映射`Mapper.Map<SiteDTO, SiteEntity>` **它工作正常**。

> **但是当我使用相同实体的集合时，它不会映射。**

```
 Mapper.Map<Collection<SiteEntity>, Collection<SiteDTO>>(siteEntityCollection); 
```

根据 Automapper [Wiki](https://github.com/AutoMapper/AutoMapper/wiki/Lists-and-arrays)，它说实现的列表`ICollection`将被映射，我正在使用实现 ICollection 的 Collection，但 automapper 不映射它。难道我做错了什么。

```
public class SiteEntity //SiteDTO has exactly the same properties, so I am not posting it here.
    {
        public int SiteID { get; set; }
        public string Code { get; set; }
        public string Name { get; set; }
        public byte Status { get; set; }
        public int ModifiedBy { get; set; }
        public DateTime ModifiedDate{ get; set; }
        public long TimeStamp{ get; set; }
        public string Description{ get; set; }
        public string Notes{ get; set; }
        public ObservableCollection<AreaEntity> Areas{ get; set; }
        public void SiteEntity()
         {
           Areas=new ObservableCollection<AreaEntity>();
         }
     } 
```

**编辑：** SiteEntity 更新以包含构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:52:03.440

我一直在使用`IList<>`没有任何问题。我会先检查子域模型的映射。很可能它们还没有设置。在您的示例中：AreaEntity -> AreaEntityDto 的映射。

```
Mapper.Map<AreaEntity, AreaEntityDto> 
```

来自wiki的代码示例：

```
Mapper.CreateMap<ParentSource, ParentDestination>()
    .Include<ChildSource, ChildDestination>();
Mapper.CreateMap<ChildSource, ChildDestination>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:11:59.280

根据您发布的代码 Automapper 将无法映射，因为您没有用于创建新 ObservableCollection 区域的 SiteEntity 的默认构造函数。

由于这不存在，当它尝试映射区域时，您将得到一个空引用异常。

# java - 如何在 Json 响应中设置 http 标头

> ID：11073791
> 
> 赞同：3
> 
> 时间：2012-06-17T18:32:31.887
> 
> 标签：java, jsonp, cxf

我有一个返回 XML 和 Json 格式的 CXF RESTful 服务。我需要在 RESTful 服务中添加自定义 http 标头。这是一个示例代码片段。

```
 @GET
    @Path("/test")
    @Produces("application/xml")
    public Response test(
            @QueryParam("p") String var
    {
        TestRequest req = new TestRequest();
        req.setVar(var);
        TestResponse res = p.getData(req);
        return Response.ok(res).header("Result", res.getResult()).build();
    } 
```

上面的代码显示了设置自定义 http 标头“结果”的 XML 响应。我可以在响应标头中看到新的 http 标头。到目前为止，一切都很好。

现在，这是 Json 版本，它在内部调用 testService() 方法来获取结果，然后使用 google Gson API 将结果发回。这一直运作良好，直到我决定返回新的标题。这是代码片段。

```
 @GET
    @Path("/test/jsonp")
    public String testJSONP(
            @QueryParam("p") String var,
            @QueryParam("cb") String callBack
    {
        Response resp = test(var);
        XStream xs = new XStream(new JsonHierarchicalStreamDriver());
        xs.setMode(XStream.NO_REFERENCES);
        xs.alias("TestResponse", TestResponse.class);
        StringBuilder sb = new StringBuilder();
        sb.append(callBack);
        sb.append("(");
        GsonBuilder gb = new GsonBuilder();
        gb.registerTypeAdapter(XMLGregorianCalendar.class, new XMLGregorianCalenderSerializer());
        gb.setPrettyPrinting();
        Gson gson = gb.create();
        sb.append(gson.toJson(resp));
        sb.append(")");
        return sb.toString();
    } 
```

我无法在 Json 响应中看到 http 标头。

任何反馈将不胜感激。

-谢谢

# 更新

我在 Json 方法中添加了以下代码以进行测试。

```
 @GET
    @Path("/test/jsonp")
    public String testJSONP(
            @QueryParam("p") String var,
            @QueryParam("cb") String callBack
    {
        Response resp = test(var);
        XStream xs = new XStream(new JsonHierarchicalStreamDriver());
        xs.setMode(XStream.NO_REFERENCES);
        xs.alias("TestResponse", TestResponse.class);
        StringBuilder sb = new StringBuilder();
        sb.append(callBack);
        sb.append("(");
        GsonBuilder gb = new GsonBuilder();
        gb.registerTypeAdapter(XMLGregorianCalendar.class, new XMLGregorianCalenderSerializer());
        gb.setPrettyPrinting();
        Gson gson = gb.create();
        sb.append(gson.toJson(resp));
        sb.append(")");
        return Response.ok(sb.toString(), MediaType.APPLICATION_JSON).header("Result", "50").build();
    } 
```

这正确设置了标头值，但问题是 Json 响应格式似乎已经改变。由于这是一项现有服务，因此我不允许这样做。这是现有的响应格式

```
 null({
  "status": "Completed",
  "totalResult": "252",
  "bin": [
    {
      "type": "source",
      "value": "documentation",
      "ndocs": "243"
    },
    {
      "type": "source",
      "value": "wikihelp",
      "ndocs": "6"
    },    
  "entries": {
    "item": [
      {
        "url": "http://test.com/test.htm",
        "title": "\u003cspan class\u003d\"vivbold qt0\"\u003eXREF\u003c/span\u003e",
        "snippet": "     Test data.",
        "source": "documentation",
        "type": "html",
        "shortDescription": "Starts the TEST command.",
        "category": [
          "User"
        ],
        "publishDate": "2012-02-05T12:00:00-0500",
        "lastUpdateDate": "2012-03-14T12:00:00-0400",
        "topicId": "GUID-7DD70C3C-B8AD-40F1-8A69-5D1EECEAB013"
      }
    ]
  }
}) 
```

这是添加此更改后的响应

```
 null({
  "status": 200,
  "entity": {
    "status": "Completed",
    "totalResult": "252",
    "bin": [
      {
        "type": "source",
        "value": "documentation",
        "ndocs": "243"
      },
      {
        "type": "source",
        "value": "wikihelp",
        "ndocs": "6"
      }
    ],
    "entries": {
      "item": [
        {
          "url": "http://test.com/test.htm",
          "title": "\u003cspan class\u003d\"vivbold qt0\"\u003eXREF\u003c/span\u003e",
          "snippet": " Test data.",
          "source": "documentation",
          "type": "html",
          "shortDescription": "Starts the TEST command.",
          "category": [
            "User"
          ],
          "publishDate": "2012-02-05T12:00:00-0800",
          "lastUpdateDate": "2012-03-14T12:00:00-0700",
          "topicId": "GUID-7DD70C3C-B8AD-40F1-8A69-5D1EECEAB013"
        }
      ]
    }
  },
  "metadata": {
    "Result": {

    }
  }
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:23:00.437

您需要更改方法的签名，以返回[`Response`class](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/Response.html)的实例而不是 a `String`，然后手动构建响应。

从[CXF 维基页面](https://cwiki.apache.org/WINK/jax-rs-http-headers.html)：

```
@Path("/example")
public ExampleResource {
    @GET
    public Response getSomething() {
        return Response.ok(/* some entity */).header("CustomHeader", "CustomValue").build();
    }
} 
```

## 更新

您还可以使用如下注释注入`HttpServletResponse`处理程序：`@Context`

```
@Path("/example")
public class Welcome {

    @GET
    public String getSomething(
            @QueryParam("p1") String param1, 
            @QueryParam("p2") String param2, 
            @Context HttpServletResponse response) {

        response.addHeader("CustomHeader", "CustomValue");

        return "my awesome response";
    }
} 
```

请注意，在此之前的版本中存在一个[`CXF-1498`错误`2.1`](https://issues.apache.org/jira/browse/CXF-1498)导致`HttpServletResponse`无法注入，因此您需要更新的 CXF 版本。

# asp.net - 无法使用 .cs 文件中的资源

> ID：11073795
> 
> 赞同：1
> 
> 时间：2012-06-17T18:33:02.227
> 
> 标签：asp.net, resources

我有带有命名空间测试的项目 asp.net，并且我正在使用资源（文件 Resource.resx 和 Resource.en-GB.resx）。我在资源键 MY_TEXT 中有值。在文件 .aspx 我可以使用

```
<%# Resources.Resource.MY_TEXT %> 
```

但是当我使用时（如文章[http://msdn.microsoft.com/en-us/magazine/cc163566.aspx](http://msdn.microsoft.com/en-us/magazine/cc163566.aspx)中）

```
myLabel.Text = Resource.MYTEXT; 
```

它没有找到它，我有构建错误。为什么？

最好的问候， 达格纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:26:36.733

尝试这样的事情：

```
myLabel.Text = Resources.Resource.MYTEXT; 
```

让我知道它是否有效或编译器给你什么样的错误。

您也可以按照您在问题中所写的方式编写它，单击`Resources`以将光标放在那里，然后*按 Ctrl + 。*并选择要添加的命名空间。这应该使 Visual Studio 自动检测有效的`Resource`命名空间（或建议几个可用的命名空间）。

**更新**

本文解释了如何在后面的代码中使用资源：http: [//msdn.microsoft.com/en-us/library/ms227982%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms227982%28v=vs.85%29.aspx)。我在评论中提到了它，它对你有帮助，所以我将它作为答案的一部分添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T13:05:33.180

您可以使用 aspx.cs 文件中的某些方法从资源中获取文本。对于本地资源：

```
myLabel.Text = GetLocalResourceObject("MYTEXT").ToString(); 
```

对于全球资源：

```
myLabel.Text = GetGlobalResourceObject("MYTEXT").ToString(); 
```

欲了解更多信息，请访问：[https ://msdn.microsoft.com/en-us/library/ms227982%28v=vs.140%29.aspx](https://msdn.microsoft.com/en-us/library/ms227982%28v=vs.140%29.aspx)

# c# - 如何使 DataGridView NotSortable

> ID：11073799
> 
> 赞同：1
> 
> 时间：2012-06-17T18:33:27.780
> 
> 标签：c#, winforms, datagridview

DGV 没有 AllowSort 属性。
如何防止用户对项目进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:38:57.947

以编程方式设置排序值：

```
this.dataGridView1.Columns["Priority"].SortMode = DataGridViewColumnSortMode.NotSortable; 
```

或整个DataGrid（我在我的Mac上，没有我的VM MS机器这样的东西）：

```
foreach(dataGridView.Columns x in this.dataGridView1.Columns)
{
    x.SortMode = DataGridViewColumnSortMode.NotSortable;
} 
```

[http://msdn.microsoft.com/en-us/library/8b9k0ktw.aspx](http://msdn.microsoft.com/en-us/library/8b9k0ktw.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:37:05.273

遍历 gridview 列并将`SortMode`每列的设置为 -

```
DataGridViewColumnSortMode.NotSortable 
```

您也可以这样做`via Designer`:: 转到`Columns`收藏 > 设置`SortMode as NotSortable`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T18:39:12.040

[该线程](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/32c8d256-3fe7-4cf3-84dc-b1322b781c73)描述了一些可能的解决方案：

1.  使用`ColumnAdded` [事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.columnadded.aspx)：

    ```
    private void MyDGV_ColumnAdded(object sender, DataGridViewColumnEventArgs e)
    {
        e.Column.SortMode = DataGridViewColumnSortMode.NotSortable;
     } 
    ```

2.  覆盖[OnColumnAdded](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.oncolumnadded.aspx)：

    ```
    protected override void OnColumnAdded(DataGridViewColumnEventArgs e)
    {
        base.OnColumnAdded(e);
        e.Column.SortMode = DataGridViewColumnSortMode.NotSortable;
    } 
    ```

# php - 如何将 css 应用于 php 'echo $tube->error;'？

> ID：11073800
> 
> 赞同：4
> 
> 时间：2012-06-17T18:33:31.077
> 
> 标签：php, html, css, styles, stylesheet

我试图附加到“echo $tube->error;”的 CSS 没有显示..它只是显示为默认的黑色文本，就好像它没有css一样......我该如何解决这个问题？

谢谢 （：

以下是我需要修复的..

html/php 部分：

```
<div id="error">
        <pre>
        <?php } else {

        echo $tube->error;

        }
    }
        ?>
    </pre>
</div> 
```

上下文中的 html/php 部分：

```
<?php

if(isset($_POST['url']))
{
  include('curl.php');
  include('youtube.php');

  $tube = new youtube();

  $links = $tube->get($_POST['url']);

  if($links) { ?>

  <div id="result"> 
  <b>Download Links  ( Same IP Downloading only )</b> :
        <?php
        $format = '<p><a href="%3$s">Download</a> video.%s - %s<br/>Right-click download link and choose etc...</p>';
        while($link = array_shift($links))
{
    echo vsprintf($format,$link);
}
        ?>
  </div>
  <div id="error">
        <pre>
        <?php } else {

        echo $tube->error;

        }
    }
        ?>
    </pre>
</div> 
```

CSS：

```
#error {
    width:404px;
    margin-left: auto;
    margin-right: auto;
    font-size:12;
    font-family: 'Dosis', sans-serif;
    color:white;
    padding-top:20px;   
} 
```

youtube.php的一部分（附加信息..不确定你们是否需要这个）：

```
function get($url)
{
    $this->conn = new Curl('youtube');

    $html = $this->conn->get($url);

    if(strstr($html,'verify-age-thumb'))
    {
        $this->error = "Adult Video Detected";
        return false;
    }

    if(strstr($html,'das_captcha'))
    {
        $this->error = "Captcah Found please run on diffrent server";
        return false;
    }

    if(!preg_match('/stream_map=(.[^&]*?)&/i',$html,$match))
    {
        $this->error = "Error Locating Downlod URL's";
        return false;
    } 
```

再次感谢任何帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:58:59.107

编辑：我错了，这不是 CSS 错误，而是构造错误，正如其他人所注意到的那样。我只是重写了“上下文中的 html/php 部分”以使其更加清晰并希望能够正常工作：

```
<?php

if(isset($_POST['url']))
{
  include('curl.php');
  include('youtube.php');

  $tube = new youtube();

  $links = $tube->get($_POST['url']);

  if($links) 
  { 
    ?>
    <div id="result"> 
      <b>Download Links  ( Same IP Downloading only )</b> :
      <?php
      $format = '<p><a href="%3$s">Download</a> video.%s - %s<br/>Right-click download link and choose etc...</p>';
      while($link = array_shift($links))
      {
        echo vsprintf($format,$link);
      }
      ?>
    </div>
    <?php 
  } 
  else 
  {
    ?>
    <div id="error">
      <pre>
      <?php echo $tube->error; ?>
      </pre>
    </div>
    <?php
  }
}
?> 
```

希望现在一切都好:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T18:54:03.480

`<div id="error">`如果出现错误，您永远不会呈现，因为您的语句`else`仅包含错误文本本身。将`div`和移动到`pre`内部`else`以使其正常工作。

```
<?php } else { ?>
  <div id="error">
    <pre>
       <?php echo $tube->error; ?>    
    </pre>
  </div>
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T19:03:19.773

试试这个代码：

```
<?php
if (isset($_POST['url'])) {
    include('curl.php');
    include('youtube.php');

    $tube = new youtube();

    $links = $tube->get($_POST['url']);

    if ($links) {
?>
<div id="result"> 
<b>Download Links  ( Same IP Downloading only )</b> :
<?php
    $format = '<p><a href="%3$s">Download</a> video.%s - %s<br/>Right-click download link and choose etc...</p>';
    while($link = array_shift($links)) {
        echo vsprintf($format,$link);
    }
?>
</div>
<?php } else { ?>
<div id="error">
    <pre>
    <?php echo $tube->error; ?>
    </pre>
</div>
<?php } } ?> 
```

不要忘记包含 CSS ......请在未来写出更具可读性的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T19:11:50.407

尝试定义你的 CSS`#error pre`并且不仅是`#error`：

```
div#error {
    width:404px;
    margin-left: auto;
    margin-right: auto;
    padding-top:20px;   
}

div#error pre
{
    font-size:12;
    font-family: 'Dosis', sans-serif;
    color:white;
} 
```

还使用检查器（如 Chrome 的检查器，您使用 CTRL+I 调用）以确保： - 没有撤消行的覆盖 - CSS 已正确加载（如果在外部文件中）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T18:45:15.140

试试这个CSS：

```
#error pre {
    width:404px;
    margin-left: auto;
    margin-right: auto;
    font-size:12;
    font-family: 'Dosis', sans-serif;
    color:white;
    padding-top:20px;   
} 
```

# postgresql - PostgreSQL 交叉表查询从帮助查询中提取列

> ID：11073802
> 
> 赞同：1
> 
> 时间：2012-06-17T18:33:45.440
> 
> 标签：postgresql, dynamic, dynamic-sql, crosstab

我的 Postgres 交叉表查询内容如下：

```
SELECT mthreport.*
FROM crosstab
('SELECT 
to_char(ipstimestamp, ''mon DD HH24h'') As row_name, 
varid::text || log.varid || ''_'' || ips.objectname::text As bucket, 
COUNT(*)::integer As bucketvalue
FROM loggingdb_ips_boolean As log 
INNER JOIN IpsObjects As ips 
ON log.Varid=ips.ObjectId
GROUP BY to_char(ipstimestamp, ''yyyy MM DD HH24h''), row_name, bucket 
ORDER BY to_char(ipstimestamp, ''yyyy MM DD HH24h''), row_name, bucket')
As mthreport(item_name text,
jan3 integer, feb4 integer, mar5 integer) 
```

有什么方法可以`jan3 integer`从辅助查询中提取最后一行（等）中列举的三个项目？我试图用 替换最后一行`SELECT xyz FROM zyx`，但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:10:13.583

在查询的基本形式中，您**必须**在调用中拼出列名和类型`SELECT`。

有些[`crosstabN(text)`](http://www.postgresql.org/docs/current/interactive/tablefunc.html#AEN138247)变体使用预定义的返回类型。

为了完全自动化，您必须将每个单独的查询包装到一个函数中，您可以在其中预定义返回类型。[我在这里](https://stackoverflow.com/a/10110519/939860)发布了一个详细的示例。

# php - 将多语言js文件包含到PHP文件中

> ID：11073806
> 
> 赞同：0
> 
> 时间：2012-06-17T18:34:32.757
> 
> 标签：php, javascript, multilingual

只需要在正确的方向上推动这一点。

我正在用 PHP 和 JavaScript 构建一个多语言网站。当使用 javascript (AJAX) 向数据库发送评论/消息时，我需要向用户显示成功或错误消息。由于使用 3 种不同的语言，我在每个使用代码的页面上编写代码，并使用 PHP 语言变量来翻译成功/错误消息。

一切正常，但是当用户查看页面的源代码时，他会看到一长串我在网站上用于不同事物的功能。

我想将所有内容都包含在 JS 文件中：

但随后 PHP 语言变量将不起作用。

我现在唯一想到的就是用不同的语言制作不同的 JS 文件：myjs_en.js

myjs_fr.js

myjs_nl.js

并检查用户选择了哪种语言，包括 3 个文件之一。

或者我可以使用其他选项吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:30:45.257

您可能最好从服务器端提供语言支持。如果您愿意，Zend_Framework 的[Zend_Translate](http://framework.zend.com/manual/en/zend.translate.using.html)组件可以用作一个独立的库。

根据文档：

“在多语言应用程序中，必须将内容翻译成多种语言并根据用户的语言显示内容。PHP 已经提供了几种处理此类问题的方法，但是 PHP 解决方案存在一些问题：

*   不一致的 API：不同的源格式没有单一的 API。例如 gettext 的使用是非常复杂的。

*   PHP 仅支持 gettext 和原生数组：PHP 本身仅支持数组或 gettext。所有其他源格式都必须手动编码，因为没有原生支持。

*   未检测到默认语言：如果不深入了解不同 Web 浏览器的背景，则无法检测到用户的默认语言。

    Gettext 不是线程安全的：PHP 的 gettext 库不是线程安全的，不应该在多线程环境中使用。这是由于 gettext 本身的问题，而不是 PHP，但这是一个存在的问题。

Zend_Translate 不存在上述问题。这就是为什么我们推荐使用 Zend_Translate 而不是 PHP 的原生函数的原因。Zend_Translate 的好处是：

*   支持多种源格式：Zend_Translate 支持多种源格式，包括 PHP 支持的源格式，以及包括 TMX 和 CSV 文件在内的其他格式。

*   线程安全的gettext：Zend_Translate 的gettext 阅读器是线程安全的。在多线程环境中使用它没有问题。

*   简单通用的 API：Zend_Translate 的 API 非常简单，只需要几个函数。因此，它易于学习和维护。所有源格式的处理方式都相同，因此如果您的源文件格式从 Gettext 更改为 TMX，您只需更改一行代码即可指定存储适配器。

*   检测用户的标准语言：Zend_Translate 可以检测和使用用户访问网站的首选语言。

*   自动源检测：Zend_Translate 能够检测和集成多个源文件，并根据目录或文件名额外检测要使用的语言环境。”

# javascript - 在请求期间制作可用的 URL

> ID：11073810
> 
> 赞同：0
> 
> 时间：2012-06-17T18:34:50.047
> 
> 标签：javascript, jquery, html

我正在做一个`ajax`请求`jQuery`，例如，我的 URL 是`http://test.com/query.php?hello=foo bar`

但是，请求只需要`http://test.com/query.php?hello=foo`. 我怎么做才能让它占用空间？以及特殊字符实体，如`&`, `-`,`!`等。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:36:25.750

> 我怎么做才能让它占用空间？

通过正确的[url 编码](http://meyerweb.com/eric/tools/dencoder/)空间：

```
http://test.com/query.php?hello=foo+bar 
```

或者：

```
http://test.com/query.php?hello=foo%20bar 
```

> 以及特殊字符实体，如 &、-、! 等。

一样的。确保对它们进行正确的 url 编码：

*   `&`=>`%26`
*   `-`=> `-`（不需要编码）
*   `!`=> `!`（不需要编码）

为了在 javascript 中正确执行此操作，您可以使用该[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)函数。

或者，如果您使用 jQuery，您也可以查看该[`$.param()`](http://api.jquery.com/jQuery.param/)方法。

最后，如果您使用 jQuery 发送 AJAX 请求，您可以这样做：

```
$.ajax({
    url: 'query.php',
    type: 'GET',
    data: { hello: 'foo bar' },
    success: function(result) {
        ...
    }
}); 
```

并且 jQuery 将负责正确地对`data`散列中传递的查询字符串参数进行 url 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:39:10.023

您可以`encodeURI(URI)`
访问此链接以获取更多信息 [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURI](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURI)

# javascript - Javascript for 循环比 AJAX 调用更快

> ID：11073811
> 
> 赞同：0
> 
> 时间：2012-06-17T18:34:55.453
> 
> 标签：javascript, ajax, loops, for-loop

所以这是问题所在：

我正在为每个帖子循环一个 AJAX 调用。这个想法是从 ajax 调用中获取 True 或 False。但我认为循环比 ajax 调用更快，我只得到一个结果。该结果也适用于其他帖子，因此我得到的不是其他帖子的错误，而是正确的。有没有办法让循环等到ajax调用完成？

```
function changMonth(month, active, url){
$('#eventTimeline').empty();

$('#month1, #month2, #month3, #month4, #month5, #month6, #month7, #month8, #month9, #month10, #month11, #month12').removeAttr('class');

$(active).attr('class', 'active');

base_url = $('#base_register').val();
user_id = $('#user_id').val();

$.post(url, {'month': month} , function(data){

    for(var i = 0; i < data.length; i++)
    {
        var splitDateString = new String(data[i].event_date);
        var splitDateArray = splitDateString.split('-');

        $.post(base_url + '/searchFilter/getRegisteredParents', {'event_id' : data[i].event_id}, function(data2){

            checkboolean = data2.check;
            ajaxFinnish = true;

        }, "json");

        if(ajaxFinnish == true)
        {

        $('#eventTimeline').append(

            '<div class="post' + i + '">' +
            '<h3>' + data[i].event_name + '</h3>' +
            '<div class="eventImage"><img width="113px" height="113px" src="' + data[i].event_photo + '" alt="&nbsp;" /></div>' +
            '<div class="eventText">' + data[i].event_details + '</div>' +
            '<div class="klas"><span>' + splitDateArray[2] + ' ' + maandArr[splitDateArray[1]] + '</span>' + data[i].group + '</div>' +
            '</div>'

        );

        $(".post" + i).css({'width': '605px', 'background-color': '#FFFFFF', 'border-bottom': 'solid 1px #4c585e', 'margin': '10px 5px 5px 5px', 'overflow': 'hidden' });

            if(checkboolean == "true")
            {
                //console.log('TRUE');
                $(".post" + i).append('<a href="#" class="eventMore">Uitschrijven</a>');
            }
            else
            {
                //console.log('False');
                $(".post" + i).append('<a href="#" class="eventMore">Inschrijven</a>');
            }
            ajaxFinnish = false;
        }

        console.log(checkboolean);
    }

}, "json");} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:38:04.227

在不详细查看您的代码的情况下，我已经可以通过您的描述告诉您发生这种情况的原因是因为 AJAX 中的 A：异步。

您的 AJAX 调用会调用您的服务器，在此过程中，您的其余代码会继续运行。因此，您的 JS 几乎总是会在您的 AJAX 调用之前完成。你需要做的是在你的[`.done()`](http://api.jquery.com/deferred.done/)函数中实现回调。使用回调是确保代码按您希望的顺序运行的唯一可靠方法：

```
function myCallback(response) {
    console.log(response);
}

function myAjaxCall(myUrl, myData) {
    $.ajax(myUrl, {data: myData }).done(myCallback);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:38:43.113

您不能让 for 循环等待。在这种情况下，最好的做法是使用 setTimeout 调用初始 ajax，并且对于每个后续调用，您将进行相同的 setTimeout 调用。

# android - Android 获取所有联系人重名

> ID：11073814
> 
> 赞同：1
> 
> 时间：2012-06-17T18:35:29.570
> 
> 标签：android, contacts

我使用这段代码：

```
protected String getContactInfo() {
         Cursor cursor = getContentResolver().query(ContactsContract.Data.CONTENT_URI, null, null, null, null);
         String str = "";
         while (cursor.moveToNext()) {
          str += cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)) + ", ";
        }
        cursor.close();
        return str;
} 
```

执行后该方法返回的字符串为 Test1, Test1, Test1, Test1, Test1, Test1, Test1, Test1, Test1, Test1, Test1, Test1, Test1, Test1, Test2, Test2, Test2, Test2, Test2, Bob,鲍勃，鲍勃，鲍勃，

当我在电话簿 Test1、Test2、Bob 中只有 3 个联系人时

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T18:55:04.893

试试这个...

用 URI 替换查询参数...

```
Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null); 
```

您正在尝试从中获取名称，`ContactsContract.Contacts.CONTENT_URI`并且您正在触发查询`ContactsContract.Data.CONTENT_URI`。

# c# - wpf中的数据网格 - 不需要绑定

> ID：11073828
> 
> 赞同：1
> 
> 时间：2012-06-17T18:37:09.150
> 
> 标签：c#, wpf, wpfdatagrid

我在 wpf 中有一个数据网格和一个结构列表，我想在网格中只显示它的一些属性。

例如

```
public struct Person
{
   public int age;
   public string name;
   public string hobby;
} 

private List<Person> lst=new List<Person>(); 
```

我想在数据网格中只显示姓名和年龄。我怎样才能在一个循环中做到这一点？

我这样做

```
foreach(Person p in lstp)
{ 
   datagrid.Items.Add(p.name);
} 
```

但什么都没有显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:46:54.120

您的结构不包含任何[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)，仅包含[字段](http://msdn.microsoft.com/en-us/library/ms173118.aspx)。此外，您最终会直接添加字符串。

您可以添加匿名对象，它们使用属性：

```
...Add(new { Name = p.name, Age = p.age }) 
```

（或者，您可以将属性添加到您的结构并直接添加这些属性。如果您的属性比您想要显示的更多，只需手动创建列，[`AutoGenerateColumn`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratecolumns.aspx)关闭）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T02:33:43.130

```
 datagrid.ItemSource = lst; 
```

try this.

sorry, lost the idea.... Just mark the property you don't want by [Browsable(false)] attribute

# xml - xmlTreeParse 不识别树

> ID：11073829
> 
> 赞同：0
> 
> 时间：2012-06-17T18:37:10.633
> 
> 标签：xml, r, api, xml-parsing

我有一个简单的问题。我正在尝试获取 Open data api 上可用的指标列表。我使用 RCurl 函数 getURL 来提取[http://api.worldbank.org/indicators](http://api.worldbank.org/indicators)的内容，然后在生成的 xml 页面上使用 XML 函数 xmlTreeParse。但是 xmlTreeParse 只是将 xml 文件视为一大块测试。为什么是这样？谢谢！

```
library(RCurl)
library(XML)

temp <- getURL("http://api.worldbank.org/indicators)
temp <- xmlTreeParse(temp) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:35:49.807

您可以使用

```
temp <- getURL("http://api.worldbank.org/indicators")
temp <- xmlParse(temp)
xpathSApply(temp,"//wb:source") # example access data 1
xpathSApply(temp,"//wb:source[@id=2]") # example access data 2 
```

使用`xmlParse`或`xmlTreeParse(useInternalNodes=T)`

使用这种简单的结构，您可以按如下方式转换为数据框

```
my.df<-xmlToDataFrame(temp) 
```

或列表

```
my.list<-xmlToList(temp)

> my.list[[1]]
$name
[1] "Agricultural machinery, tractors"

$source
$source$text
[1] "World Development Indicators"

$source$.attrs
 id 
"2" 

$sourceNote
[1] "Agricultural machinery refers to the number of wheel and crawler tractors (excluding garden tractors) in use in agriculture at the end of the calendar year specified or during the first quarter of the following year."

$sourceOrganization
[1] "Food and Agriculture Organization, electronic files and web site."

$topics
$topics$topic
$topics$topic$text
[1] "Agriculture & Rural Development  "

$topics$topic$.attrs
 id 
"1" 

$.attrs
              id 
"AG.AGR.TRAC.NO" 
```

# android - 未找到处理 Intent 的 Activity

> ID：11073832
> 
> 赞同：47
> 
> 时间：2012-06-17T18:37:24.923
> 
> 标签：android, android-intent

我正在尝试发起打开指向 android 市场的链接的意图。

android清单部分如下所示：

```
<activity android:name="com.surreall.sixdice.Start" android:label="Six Dice" android:screenOrientation="portrait" android:configChanges="keyboardHidden|orientation">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />                               
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />  
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

启动意图看起来像：

```
public void onClick(View v) {
    String PublisherID = "pub:surreallgames";
    Uri marketUri = Uri.parse("market://search?q="+PublisherID);
    Intent marketIntent = new Intent(Intent.ACTION_VIEW, marketUri);                    
    startActivity(marketIntent);
} 
```

日志输出：

```
06-17 17:38:47.393: E/AndroidRuntime(476): FATAL EXCEPTION: main
06-17 17:38:47.393: E/AndroidRuntime(476): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=market://search?q=pub:surreallgames }
06-17 17:38:47.393: E/AndroidRuntime(476):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
06-17 17:38:47.393: E/AndroidRuntime(476):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
06-17 17:38:47.393: E/AndroidRuntime(476):  at android.app.Activity.startActivityForResult(Activity.java:2827)
06-17 17:38:47.393: E/AndroidRuntime(476):  at android.app.Activity.startActivity(Activity.java:2933)
06-17 17:38:47.393: E/AndroidRuntime(476):  at com.surreall.sixdice.Start$9.onClick(Start.java:265)
06-17 17:38:47.393: E/AndroidRuntime(476):  at android.view.View.performClick(View.java:2485)
06-17 17:38:47.393: E/AndroidRuntime(476):  at android.view.View$PerformClick.run(View.java:9080)
06-17 17:38:47.393: E/AndroidRuntime(476):  at android.os.Handler.handleCallback(Handler.java:587)
06-17 17:38:47.393: E/AndroidRuntime(476):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-17 17:38:47.393: E/AndroidRuntime(476):  at android.os.Looper.loop(Looper.java:123)
06-17 17:38:47.393: E/AndroidRuntime(476):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-17 17:38:47.393: E/AndroidRuntime(476):  at java.lang.reflect.Method.invokeNative(Native Method)
06-17 17:38:47.393: E/AndroidRuntime(476):  at java.lang.reflect.Method.invoke(Method.java:507)
06-17 17:38:47.393: E/AndroidRuntime(476):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-17 17:38:47.393: E/AndroidRuntime(476):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-17 17:38:47.393: E/AndroidRuntime(476):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-06-17T18:39:55.860

您在缺少 Google Play 商店的 Android 环境（例如模拟器、Kindle Fire 等）上运行此代码。

如果您在模拟器上遇到此问题，请在具有 Play 商店的设备上测试此代码路径。

如果您在某些缺少 Play 商店的硬件上遇到此问题，或者如果您计划将您的应用分发到缺少 Play 商店的设备，请处理异常或使用`PackageManager`并在调用之前`resolveActivity()`确定您是否会成功。`Intent``startActivity()`

```
if(intent.resolveActivity(getPackageManager()) != null)
    startActivityForResult(intent, 0);
else
    ... 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-17T18:49:13.787

您可以使用 Intent.createChooser() 方法安全地启动 Intent。如果不存在可以处理您的意图的应用程序，则会显示一个对话框，告诉用户这一点。但是，如果安装了 Google Play 商店，用户可以选择在 Play 商店中“打开”意图。

```
startActivity(Intent.createChooser(marketIntent, "dialogTitle")); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-03-06T09:00:19.620

更好的解决方案是尝试在 Google Play 应用程序中打开 uri，但如果没有这样的应用程序（没有 Activity 来处理此意图） - 您可以尝试在浏览器中打开 uri，如下例所示：

```
public static void rateApp(Context context) {
    try {
        context.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + context.getPackageName())));
    } catch (android.content.ActivityNotFoundException anfe) {
        viewInBrowser(context, "https://play.google.com/store/apps/details?id=" + context.getPackageName());
    }
}

public static void viewInBrowser(Context context, String url) {
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    if (null != intent.resolveActivity(context.getPackageManager())) {
        context.startActivity(intent);
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-19T00:08:14.807

尝试添加

```
<category android:name="android.intent.category.DEFAULT" /> 
```

到调用活动。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-06T07:22:58.243

```
private void OpenStoreIntent(){
        String url="";
        Intent storeintent=null;
        try {
            url = "market://details?id=com.myapp.packagename";
            storeintent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            storeintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
            context.startActivity(storeintent);
        } catch ( final Exception e ) {
            url = "https://play.google.com/store/apps/details?id=com.myapp.packagename";
            storeintent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            storeintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
            context.startActivity(storeintent);
        }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-29T14:27:36.300

我得到了同样的错误，因为我写道：

```
Linking.openURL('www.somewebsite.com'); 
```

将 URL 更改为`http://somewebsite.com`（或`https://somewebsite.com`，取决于您的目标网站）解决了问题:)

# php - cURL 在什么时候自动填充 HTTP 标头，我如何获取它们？

> ID：11073833
> 
> 赞同：1
> 
> 时间：2012-06-17T18:37:26.607
> 
> 标签：php, curl

我正在发送一个 cURL 请求并仅使用 URL 填充它。发送到服务器的标头由 cURL 填充，我猜这些标头何时填充，我猜，当我打电话时`curl_exec`？

我很感兴趣如何在填充这些标题后获取这些标题，尤其是`Host`值。我知道`CURLINFO_EFFECTIVE_URL`，尽管这与`Host`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:42:46.587

它们在初始化时设置为默认值，您可以通过设置来查看标头`curl_setopt($ch, CURLOPT_VERBOSE, TRUE);`它将吐出请求标头（以'>'为前缀的行）

# java - 为什么这种同步方法不能按预期工作？

> ID：11073841
> 
> 赞同：8
> 
> 时间：2012-06-17T18:38:16.200
> 
> 标签：java, multithreading, synchronized

我有一个名为“帐户”的课程

```
public class Account {

    public double balance = 1500;

    public synchronized double withDrawFromPrivateBalance(double a) {
        balance -= a;
        return balance;
    }
} 
```

和一个名为 ATMThread 的类

```
public class ATMThread extends Thread {
    double localBalance = 0;
    Account myTargetAccount;

    public ATMThread(Account a) {
        this.myTargetAccount = a;
    }

    public void run() {
        find();
    }

    private synchronized void find() {
        localBalance = myTargetAccount.balance;
        System.out.println(getName() + ": local balance = " + localBalance);
        localBalance -= 100;
        myTargetAccount.balance =  localBalance;
    }

    public static void main(String[] args) {
        Account account = new Account();
        System.out.println("START: Account balance = " + account.balance);

        ATMThread a = new ATMThread(account);
        ATMThread b = new ATMThread(account);

        a.start();
        b.start();

        try {
            a.join();
            b.join();
        } catch (InterruptedException ex) {
            ex.printStackTrace();
        }

        System.out.println("END: Account balance = " + account.balance);
    }

} 
```

我创建了两个线程，我们假设银行账户中有初始余额（1500$）

第一个线程尝试提取 100 美元，第二个线程也尝试提取。

我预计最终余额为 1300，但有时为 1400。有人能解释一下为什么吗？我正在使用同步方法...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-17T18:48:22.630

这种方法是正确的，应该使用：

```
public synchronized double withDrawFromPrivateBalance(double a)
{
          balance -= a;
          return balance;
} 
```

它正确地将对帐户内部状态的访问限制为一次只能访问一个线程。但是，您的`balance`领域是`public`（所以不是真正的内部），这是您所有问题的根本原因：

```
public double balance = 1500; 
```

利用`public`修饰符，您可以从两个线程访问它：

```
private synchronized void find(){
    localBalance = myTargetAccount.balance;
    System.out.println(getName() + ": local balance = " + localBalance);
    localBalance -= 100;
    myTargetAccount.balance =  localBalance;
} 
```

这种方法，即使用`synchronized`关键字看起来是正确的，但它不是。您正在创建两个线程，`synchronized`线程基本上是一个绑定到对象的锁。这意味着这两个线程具有独立的锁，并且每个线程都可以访问自己的锁。

想想你的`withDrawFromPrivateBalance()`方法。如果您有两个`Account`类的实例，那么从两个不同对象上的两个线程调用该方法是安全的。但是，由于关键字，您不能`withDrawFromPrivateBalance()`从多个线程调用同一对象。`synchronized`这有点类似。

您可以通过两种方式修复它：`withDrawFromPrivateBalance()`直接使用（注意`synchronized`这里不再需要）：

```
private void find(){
    myTargetAccount.withDrawFromPrivateBalance(100);
} 
```

或在两个线程中锁定同一个对象，而不是锁定两个独立的`Thread`对象实例：

```
private void find(){
    synchronized(myTargetAccount) {
      localBalance = myTargetAccount.balance;
      System.out.println(getName() + ": local balance = " + localBalance);
      localBalance -= 100;
      myTargetAccount.balance =  localBalance;
    }
} 
```

后一种解决方案显然不如前一种，因为很容易在某处忘记外部同步。你也不应该使用公共领域。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-17T18:50:35.400

您的`private synchronized void find()`方法是在不同的锁上同步。尝试在相同的对象上同步它

```
private void find(){
    synchronized(myTargetAccount){
        localBalance = myTargetAccount.balance;
        System.out.println(getName() + ": local balance = " + localBalance);
        localBalance -= 100;
        myTargetAccount.balance =  localBalance;
    }
} 
```

您还可以通过将其字段设为私有并为其**所有**`synchronized`getter 和 setter 添加修饰符，然后**仅使用此方法**来更改字段的值，从而使您的 Account 类更加线程安全。

 ***** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-17T18:47:32.890

将方法标记为同步会获得对该方法正在运行的对象的锁定，但这里有两个不同的对象：the`ATMThread`和`Account`.

无论如何，两个不同`ATMThread`的 s 使用*不同*的锁，因此它们的写入可能会相互重叠和冲突。

相反，您应该让两个`ATMThread`s 在*同一个*对象上同步。****

# magento - 在 Magento 中使用 Symfony 2 组件

> ID：11073850
> 
> 赞同：0
> 
> 时间：2012-06-17T18:39:00.977
> 
> 标签：magento, symfony

将一些 Symfony 2 组件/捆绑包集成到 Magento 框架有多容易？

我特别在想树枝模板引擎，尽管这个问题通常适用于任何组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:12:36.677

一般来说，使用树枝非常容易。您需要创建一个自己的块来覆盖 Mage_Core_Block_Template 中定义的一些块方法，或者您更深入并直接扩展 Mage_Core_Block_Abstract 以编写自己的 _toHtml() 方法。

我不知道 twig 默认提供哪些功能，但一些 Symfony 的功能可能更难实现。

最大的问题是注册自动加载器，因为您需要为此解决 magento 的限制。但是存在一种常见的解决方案，您可以取消注册自动加载器，并在注册自动加载器后重新注册 magento 。如何解决这个问题是你的决定，但是在执行 magento 自动加载器之后，没有其他人有机会自动加载。此外，我不确定由不同的自动加载器引起的安全问题，因为 magento 分别处理模块和控制器的自动加载。

绝对不超过 50-60 行代码，但您需要了解一点关于 magento 的知识才能正确实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:21:03.017

在任何 php 项目中使用 twig 模板引擎都很容易，因为它是一个独立的组件，与 symfony 无关。

使用 twig 授权您的项目需要以下三个简单步骤：

首先您需要获取代码，如此[处](http://twig.sensiolabs.org/doc/intro.html#installation)所述，然后您需要初始化自动加载和模板引擎：

```
// setup autoloader
require_once '/path/to/lib/Twig/Autoloader.php';
Twig_Autoloader::register();

// initialize template engine
$loader = new Twig_Loader_Filesystem('/path/to/templates');
$twig = new Twig_Environment($loader, array(
    'cache' => '/path/to/compilation_cache',
)); 
```

然后你可以在项目的任何地方使用它来渲染模板：

```
// load a template
$template = $twig->loadTemplate('index.html');

// render the template
echo $template->render(array('the' => 'variables', 'go' => 'here')); 
```

至于 symfony 的其他部分，这些组件也可以很容易地集成到其他项目中，因为它们就是为此而设计的，请查看[组件页面](http://symfony.com/components)。

使用 bundle 有点复杂，因为它们与 symfony 核心绑定，并且需要一个完全自举的 symfony 实例，这有点开销，但也没有问题。看看我在[这个](https://stackoverflow.com/questions/10961808/how-can-i-access-symfony2-services-from-an-external-legacy-system/10989002#10989002)问题中的回答，它是关于从旧版应用程序访问 symfony 功能的。

# c# - 如何以编程方式创建 MSI 安装程序？

> ID：11073854
> 
> 赞同：5
> 
> 时间：2012-06-17T18:39:22.433
> 
> 标签：c#, .net, winforms, windows-installer

我有一个程序用于创建其他程序并从 *.cs 源文件编译它

      `using System.CodeDom.Compiler;`

我也想为已编译的程序创建一个安装程序，但我想知道我是否可以通过编程方式执行此操作，因此当我单击主应用程序中的立即构建按钮时，一个新的安装程序将出现在选定的目标位置。

有没有办法通过单击按钮为已编译的程序（我已经构建的程序）创建一个 msi 安装程序。

每次我想为我的编译程序创建安装程序时，我都不想使用 InstallShield。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T18:45:38.617

我建议您使用[WiX](http://wixtoolset.org/)。它是一个非常强大的安装程序构建工具。您可以使用它来使用命令行工具创建安装文件，这些工具可以从您的构建程序中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T20:32:42.823

WiX 现在与 Deployment Tools Foundation 集成，后者是 Windows Installer API 的完整包装器。当您安装 WiX 时，您也将获得 DTF。这应该允许您以编程方式解决任何与 MSI 相关的情况。还有一些文档，但您需要对 MSI 数据库有相当严格的了解才能掌握 API。如果可能的话，我会避免这种情况并使用 WiX 路线。

由于 vdproj 设置项目在 VS11 中被扼杀，因此学习 WiX 比掌握 VS 试图引导您实现的其他一些选项更好的时间投资。

# c# - 在 Web 应用程序内部调试控制台应用程序

> ID：11073855
> 
> 赞同：2
> 
> 时间：2012-06-17T18:39:24.127
> 
> 标签：c#, asp.net, visual-studio-2010

有没有办法在 Web 应用程序项目中调试 (.NET c#) 控制台应用程序？我希望能够在我的 Web 应用程序中拥有一个控制台应用程序以进行快速测试，而无需使用单独的解决方案。这使我无需创建网页即可快速测试我的许多服务。

它允许我毫无问题地添加控制台应用程序。我也可以通过将其设置为 statup 项目来运行它，尽管即使我使用 F5，它实际上并没有重建控制台应用程序。我必须右键单击该项目并说重建。此外，没有一个断点被击中，我也无法附加到该进程。

我认为如果它在 Web 项目中，这可能是一些限制，但如果有人知道解决方法，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:48:59.743

签入配置管理器（菜单构建/配置管理器）并查看控制台应用程序项目是否已在特定配置（发布、调试等）中检查构建。

# python - 无法使用 Waitress 在 Eclipse/Pydev 中调试 Pyramid 项目

> ID：11073858
> 
> 赞同：0
> 
> 时间：2012-06-17T18:40:28.523
> 
> 标签：python, eclipse, pydev, pyramid, waitress

我正在尝试设置一个有效的 IDE，并开始在 Eclipse/Pydev 等友好的环境中使用 Pyramid 框架学习 Python。

如果我通过替换使用旧的粘贴脚本服务器，一切正常（调试，包括断点）：

```
use = egg:waitress#main --> use = egg:Paste#http 
```

在开发.ini 中。

问题是新的“方法”是使用 Python 3+ 版本支持的女服务员，而 pastescript 仅适用于 2.x。

我想知道使用 Waitress 和 Pydev 调试是否存在任何已知问题，以及是否有任何解决方法。

这些是我尝试在 Eclipse 中使用 Waitress 进行调试时出现的错误：

```
pydev debugger: starting
Starting server in PID 7508.
Unhandled exception in thread started by serving on http://0.0.0.0:6543

Traceback (most recent call last):
  File "/home/sh4/eclipse/plugins/org.python.pydev.debug_2.5.0.2012040618/pysrc/pydevd.py", line 200, in __call__
    self.original_func(*self.args, **self.kwargs)
TypeErrorUnhandled exception in thread started by 
Traceback (most recent call last):
  File "/home/sh4/eclipse/plugins/org.python.pydev.debug_2.5.0.2012040618/pysrc/pydevd.py", line 200, in __call__
: Unhandled exception in thread started by 
Traceback (most recent call last):
  File "/home/sh4/eclipse/plugins/org.python.pydev.debug_2.5.0.2012040618/pysrc/pydevd.py", line 200, in __call__
    self.original_func(*self.args, **self.kwargs)
TypeError    self.original_func(*self.args, **self.kwargs)
TypeError: ThreadedTaskDispatcher object argument after ** must be a mapping, not tuple
: Unhandled exception in thread started by 
Traceback (most recent call last):
  File "/home/sh4/eclipse/plugins/org.python.pydev.debug_2.5.0.2012040618/pysrc/pydevd.py", line 200, in __call__
    self.original_func(*self.args, **self.kwargs)
TypeError: ThreadedTaskDispatcher object argument after ** must be a mapping, not tuple
ThreadedTaskDispatcher object argument after ** must be a mapping, not tuple
ThreadedTaskDispatcher object argument after ** must be a mapping, not tuple 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:50:41.737

我认为这已经修复了——请尝试最新的夜间版本，看看它是否适合你。

有关获取它的详细信息，请参见：[http ://pydev.org/download.html。](http://pydev.org/download.html)

# c++ - 在最后一个元素迭代器上停止 C++

> ID：11073860
> 
> 赞同：7
> 
> 时间：2012-06-17T18:40:54.547
> 
> 标签：c++, iterator, c++11

在倒数第二个元素之后执行循环和停止的最优雅的方法是什么（在 C++11 中）？

注意：我的意思是双向迭代器；当然，随机访问迭代器是一个微不足道的特例，因为它们具有`+`和`-`运算符。

```
std::list<double> x{1,2,3,4,5,6};

for (auto iter = x.begin(); iter != x.end(); ++iter) {
  auto iter2 = iter;
  ++iter2;
  if (iter2 == x.end()) break;
  std::cout << *iter << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-17T18:42:18.967

使用`std::prev`功能：

```
std::list<double> x{1,2,3,4,5,6};

for (auto iter = x.begin(); iter != std::prev(x.end()); ++iter) {
  std::cout << *iter << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T18:45:03.940

在 C++03 中应该是：

```
for (std::list<double>::iterator it = x.begin(), it_last = --x.end();
     it != it_last; ++it)
{
    std::cout << *it << '\n';
} 
```

在 C++11 中，根本没有什么不同，只是不那么冗长..：

```
for (auto it = begin(x), it_last = --end(x); it != it_last; ++it)
{
    std::cout << *it << '\n';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T18:47:46.633

R. Martinho Fernandes 的回答略有改进：

使用`std::prev`功能：

```
std::list<double> x{1,2,3,4,5,6};

for (auto iter = x.begin(), end=std::prev(x.end()); iter != end; ++iter) {
  std::cout << *iter << std::endl;
} 
```

这只计算：`std::prev(x.end())`一次。

# javascript - MongoDB 正则表达式搜索 - 从使用 javascript 驱动程序和 NodeJS 开始

> ID：11073863
> 
> 赞同：13
> 
> 时间：2012-06-17T18:41:16.100
> 
> 标签：javascript, regex, node.js, mongodb

我正在使用来自 nodejs 的 JavaScript mongodb 驱动程序。我想在我的 JavaScript 函数中执行此查询：

```
db.mycollection.find({Zip:/^94404/}); 
```

mongo 客户端检索 8 个符合此条件的文档。但是我的 JavaScript 代码不获取任何文档。

```
    DataProvider.prototype.findByZipcode = function(zipCode, callback) {
        this.getCollection（函数（错误，集合）{
            如果（错误）
                回调（错误）；
            别的 {
                var qs = '{Zip:/^'+zipCode+'/}';
                collection.find(qs).toArray(function(error, results) {
                    如果（错误）
                        回调（错误）；
                    别的
                        回调（空，结果）；
                });
            }
        });
    };

```

我也试过

```
<pre>
var qs = {Zip: '/^'+zipCode+'/'};
</pre> 
```

顺便说一句，我发现完全匹配效果很好，但这不是我想要的。

IE。

```
<pre>
var q = {'Zip' :zipCode};
</pre> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-17T19:07:07.180

你几乎拥有它。除非您有一些看起来很奇怪的邮政编码，否则您会一直在字符串中使用正则表达式并寻找可以找到任何东西的**字符串。** `'/^94404/'`

在 JavaScript 中从字符串构建正则表达式对象的最简单方法是使用[`new RegExp(...)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)：

```
var query = { Zip: new RegExp('^' + zipCode) }; 
```

那么你就可以：

```
collection.find(query).toArray(...) 
```

这种东西在 MongoDB shell 中有效，类似的东西在 Ruby 界面中有效，因此它也应该在 JavaScript 界面中有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-11-28T11:40:18.860

`$options => i`用于不区分大小写的搜索

从...开始`string`

```
db.collection.find({zip:{'$regex' : '^string', '$options' : 'i'}}) 
```

结束于`string`

```
db.collection.find({zip:{'$regex' : 'string$', '$options' : 'i'}}) 
```

包含`string`

```
db.collection.find({zip:{'$regex' : 'string', '$options' : 'i'}}) 
```

不包含`string`

```
db.collection.find({zip:{'$regex' : '^((?!string).)*$', '$options' : 'i'}}) 
```

将此保留为书签，并作为您可能需要的任何其他更改的参考。 [http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)

# jquery - 图像过滤器并在鼠标悬停时显示文本

> ID：11073865
> 
> 赞同：0
> 
> 时间：2012-06-17T18:41:19.433
> 
> 标签：jquery, css, mouseover

我有一组图像，当鼠标悬停时需要更改为深灰色和较低的不透明度，并弹出预定义的文本。这仅适用于 CSS 吗？还是我需要使用 Jquery？我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:56:41.370

仅使用 css 是可能的：

HTML：

```
<div class="hover-div">
    <img src="http://lorempixel.com/400/200/" />
    <div class="hover-text">Lorem ipsum</div>
</div>
<div class="hover-div">
    <img src="http://lorempixel.com/400/200/" />
    <div class="hover-text">Lorem ipsum</div>
</div>
     ​ 
```

CSS：

```
div.hover-div{
    display:block;
height:200px;
 width:400px;   
    position:relative;
    margin-bottom:10px;
}

div.hover-div:hover .hover-text{
    display:block;        
}

div.hover-div:hover img{
    opacity:0.8;        
}

.hover-text{
    display:none;
    clear:both;
    margin-top:-20px;
    background: rgba(0,0,0,0.5);
    color:white;
    width: 100%;
    bottom:0;
    position:absolute;
    z-index:2;
}​ 
```

演示：http:
[//jsfiddle.net/hueBt/1/](http://jsfiddle.net/hueBt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:49:01.867

## *[jsBin 演示](http://jsbin.com/oqocic/2/edit)*

仅 CSS：

CSS：

```
 .box{
    position:relative;
    background:#444;
    width:160px;
    height:200px;
  }
  .box span{
    position:absolute;
    left:0px;
    display:none;
  }

  .box:hover img{
    opacity:0.4;
  }
  .box:hover span{
    display:inline;
  } 
```

HTML：

```
 <div class="box">
    <img src="img1.jpg">
    <span>This is the description 1</span>  
  </div>

  <div class="box">
    <img src="img2.jpg">
    <span>This is the description 2</span>  
  </div> 
```

# html - 某些 HTML 代码不适用于 IE8

> ID：11073868
> 
> 赞同：0
> 
> 时间：2012-06-17T18:41:39.013
> 
> 标签：html

一些 html 代码在我的 IE8 上不起作用，但在 Firefox 上运行良好。其中之一是：

```
<center></center> 
```

另一个是图像的 align 属性，例如 align="absmiddle"。

为什么会这样？我自己的 IE 有什么问题，还是全球性的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:43:48.693

因为那些 HTML 元素和属性已被弃用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T18:52:02.137

该`center`元素适用于所有浏览器，但其含义通常与作者的预期不同。此外，它的效果可能取决于“标准模式”与“怪癖模式”，在不同的浏览器上通常会有所不同。

该值`absmiddle`是非标准的，它在不同的模式下被区别对待。在 CSS 中使用该`vertical-align`属性通常更一致。

要获得更具体的帮助，您需要显示出现问题的文档或 URL。需要一个完整的文档，而不仅仅是一个片段，因为浏览器的模式取决于 doctype 声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T18:48:57.767

相同的代码不能在所有浏览器上正常工作是一个全球性问题。基本解决方案是使用基本的和未弃用的标签。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T19:16:52.663

正如其他人所说，这些标签已被弃用。

您应该尝试使用 CSS 来设置页面样式，并仅使用 HTML 作为标记。它很容易掌握，并且您的项目将更加符合标准。

# drupal - 将内容从 Ning 论坛迁移到 Drupal 论坛？

> ID：11073869
> 
> 赞同：0
> 
> 时间：2012-06-17T18:41:39.600
> 
> 标签：drupal, drupal-7, migration, forum, ning

有人知道将论坛对话从 Ning 转移到 Drupal 的有效方法吗？我有通过Ning Network Archiver工具获得的.json，我四处搜索但没有找到任何东西。

我正在使用 Drupal 版本 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T06:24:41.103

您可以在 drupal 7 中创建一个模块，该模块将获取 json 数据并以编程方式创建节点。

例子：

```
// Instantiate new node 
$node = new stdClass();
node_object_prepare($node);
$node->uid = 1;
$node->name = 'my author';
$node->language = LANGUAGE_NONE;

// Set fields
$node->title = 'my title';

// Set custom fields
$node->field_custom[$node->language][0]['value'] = 'my custom value';

// save
node_save($node); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:02:17.953

查看 Migrate 模块 (http://drupal.org/project/migrate/)。

我会说这比滚动自己的模块要好，因为您可以免费获得很多东西，例如自动回滚支持等。您只需要定义一个映射和一个数据源（json、xml、数据库等）。

迁移模块负责实际的节点创建并跟踪已导入的内容，以便您稍后撤消它，重新导入新帖子等。

迁移模块的一个很好的例子可以在[http://xdeb.org/node/1539](http://xdeb.org/node/1539)找到。然而，它确实处理常规页面，并且数据源是一个 drupal 6 数据库。

# c# - 将会话对象值存储到数据库中？

> ID：11073874
> 
> 赞同：0
> 
> 时间：2012-06-17T18:42:07.180
> 
> 标签：c#, asp.net, sql-server, session

我正在创建一个网站。它有一个数据库，我正在尝试使用该`Member`表。

在页面上，我要求用户填写一些基本信息以成为会员，单击提交按钮后，我将这些信息存储到会话对象中（具有`MemberID`, `LastName`,`FirstName`等）我想知道如何存储此会话对象中的所有信息到`Member`数据库中的表？（表已经创建好了）

另外，我想知道现有会员何时登录。如何从数据库中获取信息并显示在网页上（以防会员想要编辑他的个人资料）。

我正在使用 Visual Studio 2010，使用 aspx、C# 和 SQL 数据库进行编码。

----- 编辑 2012 年 6 月 17 日晚上 8:13 -----

当我第一次解释我的问题时，我可能不清楚。

我`Member`在 .cs 文件中有一个类，其中包含上述变量状态。我为新成员（在网页上）创建了一个新条目，然后将对象存储在会话中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:20:13.937

根据您所说，我个人认为不需要使用 ASP.Net 会话状态。

我假设您已经有一个按钮单击处理程序来将提交表单的控件值分配给您的`Member`对象，然后分配`Member`给会话。但相反，这是您要存储`Member`到数据库的点，而不是两者都使用会话。

因此，将类实例传递给将使用 ADO.Net 的方法。在该方法中创建一个 SqlConnection 对象和一个 SqlCommand 对象。还有更通用的版本，但我假设您使用的是 sql server。向您的 SqlCommand 对象添加应该是更新 SQL 语句和参数的命令文本。最后执行命令存储到数据库。

浏览这个介绍网站应该解释更详细的细节。[http://www.csharp-station.com/Tutorial/AdoDotNet/lesson01](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson01)

除了开始使用 SqlDataReader 之外，读回用户信息是类似的。那篇文章再次会有所帮助。

当然，有一种叫做 Entity Framework Code First 的东西，它消除了你的代码和数据库之间的所有管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:10:59.787

考虑创建一个数据访问层并使用它来将数据持久化到数据库中。

# mysql - 从mysql表中检索倒数第二条记录

> ID：11073875
> 
> 赞同：0
> 
> 时间：2012-06-17T18:42:07.400
> 
> 标签：mysql, sql, group-by, sql-order-by

我有一张桌子，上面有各种仪表的读数

```
+-----------+---------+---------+---------+---------------------+
| idReading | idMeter |  index  |  usage  | dateOfReading       |
+-----------+---------+---------+---------+---------------------+
|       671 |     189 | 884.000 | 441.000 | 2012-06-01 00:00:00 |
|       672 |     190 | 170.000 |  82.000 | 2012-06-01 00:00:00 |
|       584 |     190 |  88.000 |  88.000 | 2012-05-01 00:00:00 |
|       583 |     189 | 443.000 | 443.000 | 2012-05-01 00:00:00 |
+-----------+---------+---------+---------+---------------------+ 
```

在我的应用程序中，我需要同时提供当前读数（可能存在也可能不存在）和可能来自几个月前的先前读数。因此，我可能在 7 月获得当前读数，但之前的读数可能在 4 月。

我正在使用以下查询来检索以前的读数：

```
SELECT * FROM (
  SELECT Reading.idMeter, Reading.usage, Reading.`Index`, Reading.dateOfReading
  FROM meterReadings AS Reading
  WHERE Reading.idMeter IN (189,190)
    AND Reading.dateOfReading < '2012-07-31'  
  ORDER BY Reading.dateOfReading DESC) AS OrderendReading
GROUP BY OrderendReading.idMeter 
```

这工作得很好，但我不高兴我在另一个 SELECT 中使用 SELECT，因为我担心随着表变得越来越大，请求会花费越来越长的时间。有没有其他方法可以检索以前的读数？或者有什么方法可以让这个查询更有效率？

或者，理想情况下，在同一个查询中同时拥有当前阅读和前一个阅读？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:14:51.003

我认为相关子查询将实现您所追求的：

```
SELECT  Reading.idMeter, 
        Reading.usage, 
        Reading.`Index`, 
        Reading.dateOfReading,
        (   SELECT  mr.Usage
            FROM    MeterReadings AS mr
            WHERE   mr.idMeter = Reading.idMeter
            AND     mr.DateOfReading < Reading.DateofReading
            ORDER BY DateOfReading DESC
            LIMIT 1
        ) AS PreviousReadingUsage
FROM    meterReadings AS Reading,
WHERE   Reading.idMeter IN (189,190)
AND     Reading.dateOfReading < '2012-07-31'  
ORDER BY Reading.dateOfReading DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:08:20.653

尝试这个：

```
SELECT 
  Reading.idMeter, 
  Reading.usage, 
  Reading.`Index`,
  (Select dateOfReading from meterReading order by dateOfReading desc limit 1,1)  
FROM meterReadings AS Reading   
GROUP BY Reading.idMeter; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T18:52:27.487

我昨天刚刚发现了“分析函数”，我很确定它们满足了这种类型的要求。给它一个谷歌，在 Youtube 上也有一些教程。

# backbone.js - 主干.js 中的委托事件

> ID：11073877
> 
> 赞同：30
> 
> 时间：2012-06-17T18:42:21.997
> 
> 标签：backbone.js, backbone-events

谁能解释一下backbone.js中的delegateEvents有什么作用？[该文档](http://backbonejs.org/#View-delegateEvents)没有帮助我理解。

我的确切用例是：

我有一个主视图 X 和一个内部视图 Y。它们工作得很好，但是如果我转到主视图 Z，然后返回到 X（重用，而不是重新创建），那么附加到 Y 子元素的事件就会丢失。delegateEvents 解决了这个问题，但我想了解原因。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-17T19:03:04.583

本质上，当您调用它时，它是 jQuery [remove](http://api.jquery.com/remove/)`.remove()`函数的代理，该函数从 DOM 中删除元素，以及绑定到该元素的事件哈希中的所有关联事件。

Backbone 的 View 元素仍然包含`.el`，但是在重新插入 DOM 时，jQuery 元素失去了所有绑定的侦听器。

有几个解决方案：

1.  彻底销毁视图元素，包括用新的[destroy](https://github.com/documentcloud/backbone/pull/1353)方法解除所有模型/控制器事件的​​绑定（目前只在github，下个版本的Backbone会添加）并在回来时创建一个新的视图（而不仅仅是缓存和重新渲染） - 我的首选方法

2.  创建一个方法（或扩展删除）以使用 jQuery 的[detatch](http://api.jquery.com/detach/)，它显然与 remove 相同，而不会丢失事件绑定 - 尚未完成，但似乎可以工作

3.  调用`.delegateEvents()`每个渲染 - 你现在正在做什么

希望这可以帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-17T18:54:36.647

delegateEvents 接受`events: { ... }`视图实例的声明，并将指定的事件绑定到指定的 DOM 元素，并使用指定的回调方法来处理事件。

因此，渲染后的 DOM 树如下所示：

```
<div> 
  <a href="#" id="foo">foo</a>
</div> 
```

和这样定义的视图：

```
 Backbone.View.extend({
  events: {
    "click .foo": "fooClicked"
  },

  fooClicked: function(e){
    // handle the click, here
  },

  render: function(){
    // render the specified HTML, here
  }
}); 
```

将正确处理单击“foo”链接，以便您可以响应代码中的单击。

声明的细分`events`是：`"eventname selector": "callback"`其中“eventname”是任何 DOM 事件，例如“click”。“选择器”是任何有效的 jQuery 选择器，它针对您的视图运行，`el`以便将事件绑定到 DOM 元素。“回调”是该视图上要调用的方法的名称，当该 DOM 元素的事件触发时。

希望有帮助

# apache-flex - 动态远程对象 url - flex mobile

> ID：11073879
> 
> 赞同：0
> 
> 时间：2012-06-17T18:42:34.300
> 
> 标签：apache-flex, flex4, blazeds, flex-mobile, parsley

我几乎完成了我的项目，但现在我想在每个视图中添加一个动态服务器 url 设置。使用 config.xml 和 channels-config.xml 引导应用程序（我使用了 Parsley 框架）。

**配置.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<fx:Object xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           xmlns:services="services.*">

    <fx:Declarations>
        <services:GenBUS id="genBUS"/>
        <services:KarBUS id="karBUS"/>
        <services:UygBUS id="uygBUS"/>
    </fx:Declarations>

</fx:Object> 
```

**频道-config.xml：**

```
<objects 
    xmlns="http://www.spicefactory.org/parsley"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.spicefactory.org/parsley 
        http://www.spicefactory.org/parsley/schema/2.4/parsley-core.xsd">

    <object type="mx.messaging.ChannelSet">
        <property name="channels">
                <array>
                    <object type="mx.messaging.channels.AMFChannel">
                        <property name="uri" value="http://localhost:8080/ClinASM/messagebroker/amf"/>
                    </object>
                </array>
        </property>
    </object>

</objects> 
```

场景如下：用户将在登录系统之前更改 url，当一切完成后，更新的端点 url 将保存在 SessionClientData.endpoint 中，并且在调用服务器端的方法之前，我会分配一个新的端点到远程对象类：

```
[Inject(id="genBUS")]
public var genBUS:GenBUS;

public function login(username: String, password:String):void {

 //updating endpoint                
 genBUS.endpoint = SessionClientData.endpoint;

 //call responder is created and..              
 loginViewResponder.token = genBUS.getLoginResult(username,password);

} 
```

但我做错了什么 - 所以它不起作用......有什么建议如何制作动态且易于构建的频道配置？

更新：如何重新配置​​结构，以便客户端没有“服务”远程对象 - 我不想每次都更新 Flex Server 部分 - 因为在某些情况下会出现无法访问的服务器，就像我的情况一样现在...关于此的任何教程或示例配置？

# debian - 用 GTK 编译没有配置脚本的软件

> ID：11073883
> 
> 赞同：0
> 
> 时间：2012-06-17T09:24:28.453
> 
> 标签：debian, gcc, gtk

我碰到了[green](https://github.com/schandinat/green)，这是 Framebuffer 的 PDF 查看器。我想编译它，但我没有成功，虽然我已经安装了所有依赖项......

我得到的错误是：

```
$/home/Data/Software/green-0.2$ make
cc -D GREEN_SYSCONFIG_FILE=\"/usr/local/etc/green.conf\" -D GREEN_USERCONFIG_FILE=\".green.conf\" -Os -Wall -c main.c $(pkg-config poppler-glib --cflags) -o main.o
cc -Os -Wall -c green.c $(pkg-config poppler-glib --cflags) -o green.o
cc -Os -Wall -c sdl.c $(pkg-config poppler-glib --cflags) $(sdl-config --cflags) -o sdl.o
sdl.c: In function ‘GetInput’:
sdl.c:91:3: warning: case value ‘37’ not in enumerated type ‘SDLKey’ [-Wswitch]
sdl.c:85:3: warning: case value ‘123’ not in enumerated type ‘SDLKey’ [-Wswitch]
sdl.c:86:3: warning: case value ‘125’ not in enumerated type ‘SDLKey’ [-Wswitch]
sdl.c:94:3: warning: case value ‘126’ not in enumerated type ‘SDLKey’ [-Wswitch]
sdl.c:90:3: warning: case value ‘4294967207’ not in enumerated type ‘SDLKey’ [-Wswitch]
sdl.c: In function ‘RenderPage’:
sdl.c:120:2: error: unknown type name ‘GdkPixbuf’
sdl.c:120:2: warning: implicit declaration of function ‘gdk_pixbuf_new’ [-Wimplicit-function-declaration]
sdl.c:120:34: error: ‘GDK_COLORSPACE_RGB’ undeclared (first use in this function)
sdl.c:120:34: note: each undeclared identifier is reported only once for each function it appears in
sdl.c:136:2: warning: implicit declaration of function ‘poppler_page_render_to_pixbuf’ [-Wimplicit-function-declaration]
sdl.c:137:2: warning: implicit declaration of function ‘gdk_pixbuf_get_pixels’ [-Wimplicit-function-declaration]
sdl.c:137:9: warning: assignment makes pointer from integer without a cast [enabled by default]
sdl.c:138:2: warning: implicit declaration of function ‘gdk_pixbuf_get_rowstride’ [-Wimplicit-function-declaration]
sdl.c:139:2: warning: implicit declaration of function ‘gdk_pixbuf_get_n_channels’ [-Wimplicit-function-declaration]
sdl.c: In function ‘Green_SDL_Main’:
sdl.c:402:21: warning: variable ‘left_y’ set but not used [-Wunused-but-set-variable]
sdl.c:402:9: warning: variable ‘left_x’ set but not used [-Wunused-but-set-variable]
make: *** [sdl.o] Error 1
$:/home/Data/Software/green-0.2$ 
```

显然他找不到 GdkPixbuf，但是这个构造定义在：

```
# ls /usr/include/gdk-pixbuf-2.0/gdk-pixbuf/gdk-pixbuf.h 
/usr/include/gdk-pixbuf-2.0/gdk-pixbuf/gdk-pixbuf.h 
```

当我向文件 sdl.c 添加以下行时：

```
#include <gdk-pixbuf/gdk-pixbuf.h> 
```

我对以下错误感到“欢迎”：

```
# make
cc -Os -Wall -c sdl.c $(pkg-config poppler-glib --cflags) $(sdl-config --cflags) -o sdl.o
sdl.c:20:35: fatal error: gdk-pixbuf/gdk-pixbuf.h: No such file or directory
compilation terminated.
make: *** [sdl.o] Error 1 
```

那么我的问题是，我如何“说服” gcc 编译这段代码？

在此先感谢，奥兹

更新：将完整路径添加到 gdk-pixbuf/gdk-pixbuf.h 产生：

```
ozdeb@yenitiny:/home/Data/Software/green-0.2$ make
cc -D GREEN_SYSCONFIG_FILE=\"/usr/local/etc/green.conf\" -D GREEN_USERCONFIG_FILE=\".green.conf\" -Os -Wall -c main.c $(pkg-config poppler-glib --cflags) -o main.o
cc -Os -Wall -c green.c $(pkg-config poppler-glib --cflags) -o green.o
cc -Os -Wall -c sdl.c $(pkg-config poppler-glib --cflags) $(sdl-config --cflags) -o sdl.o
sdl.c:21:63: warning: missing terminating " character [enabled by default]
sdl.c:21:63: warning: extra tokens at end of #include directive [enabled by default]
In file included from sdl.c:21:0:
/usr/include/gdk-pixbuf-2.0/gdk-pixbuf/gdk-pixbuf.h:32:44: fatal error: gdk-pixbuf/gdk-pixbuf-features.h: No such file or directory
compilation terminated.
make: *** [sdl.o] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:20:52.627

一种答案，没有真正完全编译，但我设法解决了 sdl.c 无法编译的部分：

```
cc -c sdl.c `sdl-config --cflags` `pkg-config poppler-glib --cflags` `pkg-config gtk+-2.0 --cflags` -o sdl.o 
```

# ruby-on-rails - Rails - 如何为升级 3.0.10 -> 3.1.6 的应用程序引入资产编译

> ID：11073885
> 
> 赞同：0
> 
> 时间：2012-06-17T18:42:58.987
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, asset-pipeline

我正在升级 Rails 应用程序。

我已将 Gemfile 更新为从版本更改`3.0.10`为`3.1.6`

升级没有将应用“切换”为使用资产（没有 app/assets 文件夹）。

我应该手动添加文件夹吗？

我希望将升级部署到 Heroku（它正在运行 3.0.10 应用程序 ok）。我还应该改变什么？

看起来`config/application.rb`在应用程序类定义中需要这一行：`config.assets.enabled = true`？现在该文件中根本不存在该行..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:44:19.333

由于我使用 Ruby on Rails，资产管道是我所知道的最大变化之一。不幸的是，没有自动方法可以将应用程序升级到资产管道。

基本上整个过程升级过程是（可能需要1或2天！）：

*   [从Rails 文档](http://guides.rubyonrails.org/asset_pipeline.html)了解资产管道
*   升级您的配置文件 ( `rake rails:update`) 以启用资产管道
*   将所有资产（js/css/images）移动到`app/assets/`或`vendor/assets/`文件夹
*   在这些文件夹中创建清单文件（阅读[此文档](http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives)）
*   [使用资产助手](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)更改对应用程序中任何地方的资产的引用
*   检查您的应用程序是否仍在运行 :)
*   通过运行在本地尝试资产编译`rake assets:precompile`
*   部署到 Heroku（并确保您的应用使用 Heroku Cedar 堆栈）。阅读此[故障排除指南](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:56:29.280

有一个 rake 任务用于使用新的配置文件等更新 Rails 应用程序。`rake rails:update`. 另请参阅[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html) - 特别是您需要添加到`config/application.rb`.

# matlab - 散点图

> ID：11073889
> 
> 赞同：3
> 
> 时间：2012-06-17T18:43:55.580
> 
> 标签：matlab, plot, pie-chart, matlab-figure, scatter-plot

我正在尝试可视化软聚类。有一些点和少量的簇，每个点都有一定的概率属于每个簇。

目前，我正在为每个集群覆盖一个散点图，“o”标记的大小因概率而异。这可以轻松识别最可能的集群，但仅此而已。

我想绘制一个饼图的散点图，即每个数据点的一个小饼图，显示这些概率。在matlab中可以吗？我还没有找到一种方法来绘制饼图作为标记或在一个图中的任意位置放置多个饼图……</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T22:58:31.833

[作为第一次尝试，我设法仅使用两个LINE](http://www.mathworks.com/help/techdoc/ref/line.html)图形对象在每个点绘制饼图：一个用于圆圈，一个用于圆圈内的分区。因此，我们只是在绘制未填充的饼图。

这在性能方面非常有效。它是通过使用`NaN`将线分成段来实现的。将此与其他建议的解决方案进行比较；如果我们查看它的[源代码](http://www.mathworks.com/matlabcentral/fileexchange/15751-bubblepie/content/bubblepie.m)，我们会发现它为每个点创建一个轴，并在其中调用 MATLAB 的函数[PIE](http://www.mathworks.com/help/techdoc/ref/pie.html)。

我们从一些数据点及其“模糊聚类”开始：

```
numPoints = 15; numClasses = 5;

%# random 2D points
points = randn(numPoints,2);

%# fuzzy clustering: probabilistic distribution
prob = rand(numPoints,numClasses);
prob = bsxfun(@rdivide, prob, sum(prob,2)); 
```

现在这里是绘制饼图散点图的代码：

```
%# pie parameters
theta = linspace(0, 2*pi, 100); %# steps to approximate a circle
r = min(range(points)) / 10;    %# radius (determined based on points spread)

%# pie circles
px = bsxfun(@plus, cos(theta).*r, points(:,1))';
py = bsxfun(@plus, sin(theta).*r, points(:,2))';
px(end+1,:) = NaN; py(end+1,:) = NaN;

%# pie divisions
tt = cumsum(prob,2) .* 2*pi;
qx = cat(3, ...
    bsxfun(@plus, cos(tt).*r, points(:,1)), ...
    repmat(points(:,1), [1 numClasses]), ...
    NaN(numPoints,numClasses));
qy = cat(3, ...
    bsxfun(@plus, sin(tt).*r, points(:,2)), ...
    repmat(points(:,2), [1 numClasses]), ...
    NaN(numPoints,numClasses));
qx = permute(qx, [3 2 1]); qy = permute(qy, [3 2 1]);

%# plot
figure
line(px(:), py(:), 'Color','k')
line(qx(:), qy(:), 'Color','k')
axis equal 
```

![截图1](../Images/5c4062fbc033a7d2b733af2df60a8b0b.png)

* * *

[在我的第二次尝试中，我设法通过使用PATCH](http://www.mathworks.com/help/techdoc/ref/patch.html)函数在每个圆圈中绘制每个切片来绘制彩色饼图。显然，这意味着我们正在创建比以前更多的图形对象......

我们本可以使用相同的`NaN`技术通过一个 PATCH 调用从每个圆圈中绘制相同的切片，但是当饼图重叠时（特别是 z 顺序不正确），这被证明是有问题的。

```
clr = hsv(numClasses);          %# colors for each class
r = min(range(points)) / 10;    %# radius (determined based on points spread)
tt = cumsum(prob,2) .* 2*pi;    %# pie divisions

figure
h = zeros(numPoints,numClasses);    %# handles to patches
for idx=1:numPoints                 %# for each point
    for k=1:numClasses              %# for each class
        %# start/end angle of arc
        if k>1
            t(1) = tt(idx,k-1);
        else
            t(1) = 0;
        end
        t(2) = tt(idx,k);

        %# steps to approximate an arc from t1 to t2
        theta = linspace(t(1), t(2), 50);

        %# slice (line from t2 to center, then to t1, then an arc back to t2)
        x = points(idx,1) + r .* [cos(t(2)) ; 0 ; cos(t(1)) ; cos(theta(:))];
        y = points(idx,2) + r .* [sin(t(2)) ; 0 ; sin(t(1)) ; sin(theta(:))];
        h(idx,k) = patch('XData',x, 'YData',y, ...
            'FaceColor',clr(k,:), 'EdgeColor','k');

        %# show percentage labels
        ind = fix(numel(theta)./2) + 3;     %# middle of the arc
        text(x(ind), y(ind), sprintf('%.2f%%', prob(idx,k)*100), ...
            'Color','k', 'FontSize',6, ...
            'VerticalAlign','middle', 'HorizontalAlign','left');
    end
end
axis equal

labels = cellstr( num2str((1:numClasses)', 'Cluster %d') );
legend(h(1,:), labels) 
```

![截图2](../Images/07eff787b4c422a23f0c36729fd1e76e.png)

如果百分比标签太多，只需删除上面的[TEXT](http://www.mathworks.com/help/techdoc/ref/text.html)调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T19:02:35.937

亚伯拉罕·安德森（Abraham Anderson）在 Matlab 文件交换上的[泡泡馅饼](http://www.mathworks.com/matlabcentral/fileexchange/15751-bubblepie)似乎与您所描述的内容相关。

![在此处输入图像描述](../Images/b05572e5c87af18e8ca2c0e9523f38e7.png)

# ios - Xcode iOS 照片库应用程序

> ID：11073898
> 
> 赞同：3
> 
> 时间：2012-06-17T18:45:47.630
> 
> 标签：ios, xcode, uiimageview, gallery, photo

我对 Xcode 比较陌生，正在尝试创建一个简单的应用程序。

我想创建一个看起来与“照片”应用程序登陆屏幕非常相似的登陆屏幕。它具有以缩略图形式排列的所有图像，当您单击一个时，它会变为全屏。您还可以滚动浏览图像、保存到相机胶卷等。

谁能给我任何帮助或建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T18:54:00.327

Nimbus 也非常好，比three20 更轻巧。 [http://nimbuskit.info/](http://nimbuskit.info/)

我认为他们的示例项目有一个几乎可以做到这一点的例子。

[https://github.com/jverkoey/nimbus/tree/master/examples/photos/NetworkPhotoAlbums](https://github.com/jverkoey/nimbus/tree/master/examples/photos/NetworkPhotoAlbums)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T18:51:01.110

[Three20](http://three20.info/)是最受欢迎的。

一个有效的替代方法是[PhotoViewer ，您可以](https://github.com/enormego/PhotoViewer)[在此处](http://developers.enormego.com/)阅读有关代码如何工作的更多信息。

[这](http://codecanyon.net/item/photogallery-ios-xcode-project/153822)是另一个很酷的照片库，但要付费。

# c# - 在哪里验证方法的参数？

> ID：11073900
> 
> 赞同：15
> 
> 时间：2012-06-17T18:46:58.397
> 
> 标签：c#, .net, exception-handling

我想知道，代码验证方法的参数在哪里——以及多久一次。

在下面的示例类（一个 .dll 库）中，您认为最好的方法是什么？假设我想验证某个对象不能是`null`（但它可以是方法正常运行所需的任何其他验证）。在第 1 点中只检查一次是否更好，在用户可用的公共方法中，然后“相信我自己”，在其他私有方法中它不会为空，或者，最好有点偏执并检查它使用它的时间（在第 2、3 和 4 点）

在使用对象之前检查它（在第 2、3、4 点中）可以在将来保护我，如果我决定使用这些私有方法更改类中的某些内容，并“忘记”传递有效对象。如果我将来添加一些新的公共方法，我也不必记住验证。另一方面 - 它一遍又一遍地检查相同的条件。或者，也许您还有其他建议？

```
public class MyClass()
{
    public MyClass()
    {
    }

    public void ProcessObject(SomeObject obj)
    {
        //1\. if (obj == null) throw new ArgumentException("You must provide valid object.");

        DoSomething(obj);
        DoMore(obj);
        DoSomethingElse(obj);
    }

    private void DoSomething(SomeObject obj)
    {
        //2\. if (obj == null) throw new ArgumenException("You must provide valid object.");
        //do something with obj...
    }

    private void DoMore(SomeObject obj)
    {
        //3\. if (obj == null) throw new ArgumentException("You must provide valid object.");
        //do something with obj...
    }

    private void DoSomethingElse(SomeObject obj)
    {
        //4\. if (obj == null) throw new ArgumentException("You must provide valid object.");
        //do something with obj..
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T18:51:39.563

如果它是您公开供其他开发人员使用的 API，那么您确实应该在每个方法上抛出`ArgumentException`或`ArgumentNullException`.

如果它是其他开发人员不会直接与之交互的内部类或方法，我会使用`Debug.Assert`，因此在调试模式下，您可以获得额外的调试信息，而在发布模式下，它会被取消，并且您会获得不执行所有这些参数的性能优势到处检查。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T18:51:10.280

在一个好的软件设计方法中需要相互独立。您必须能够以任何顺序使用它们并且彼此分开。所以是的，你必须一遍又一遍地检查所有方法中的相同条件。

**编辑：** 我会将 CodeContract 与一个检查 obj 不为空的前提条件一起使用。因为这似乎是方法正常工作的先决条件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T18:48:46.757

每个公共方法都应该验证其输入。

恕我直言，如果您只是传递先前验证的对象，则私有方法可以依赖于对类中其他公共方法的验证。由于私有方法封装在类中，因此验证的责任留在类中。

但是，如果您有一个私有方法接受一些计算参数（而不是传递给公共方法的参数），那么应该进行额外的验证。

您的单元测试将测试该类的公共接口，如果您`SomeObject`的`null`验证仅在`ProcessObject`. 在那种情况下，我不会在私有方法中重复验证。

# jquery - Jqgrid 和复选框

> ID：11073901
> 
> 赞同：0
> 
> 时间：2012-06-17T18:47:04.697
> 
> 标签：jquery, jquery-plugins, jqgrid

我正在使用 jqgrid，但复选框有问题。

我的数据库中有一个列返回`'S' --> true`和`'N'--> false`。

我在网上看过一些例子，我选择了这种方式（认为这是正确的）：

```
{name:'acc_web', index:'acc_web', width:60, editable:true, edittype:"checkbox", formatter:"checkbox",editoptions: {value:"S:N"}}, 
```

但是，这始终检查为`true`复选框。这里有什么问题吗？此外，我把它作为`editable`，但我不能！

整个代码是这样的：

```
$(document).ready(function () {

    jQuery("#list2").jqGrid({ 
        url:'obtieneUsuarios.do', 
        datatype: "json", 
        colNames:['Acceso web','Primer apellido','Segundo apellido','Nombre','Login', 'Perfil'], 
        colModel:[ 
            {name:'acc_web', index:'acc_web', width:60, editable:true, edittype:"checkbox", formatter:"checkbox",editoptions: {value:"S:N"}},               
            {name:'apellido1',index:'apellido1', width:200},
            {name:'apellido2',index:'apellido2', width:200},
            {name:'nombre',index:'nombre', width:160},               
            {name:'login',index:'login', width:100}, 
            {name:'perfil',index:'perfil', width:160}
        ], 
        width: 820,
        height: 200,
        rowNum:10, 
        rowList:[5,10,20], 
        pager: '#pager2', 
        sortname: 'apellido1', 
        viewrecords: true, 
        sortorder: "asc", 
        caption:"Listado de usuarios"
    }); 
    jQuery("#list2").jqGrid('navGrid','#pager2',{edit:false,add:false,del:false});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T11:42:07.263

（由 OP 在问题编辑中回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 最后我解决了这个问题：
> 
> Checkbox in`jqgrid`只识别一些属性`false,0,No,undefined`和更多。我只需要将我的结果映射到这些结果。在这种情况下：`'S' --> 1`和`'N' --> 0`。有了这个映射，问题就解决了:)

# javascript - Tab 到文本输入的开头

> ID：11073907
> 
> 赞同：2
> 
> 时间：2012-06-17T18:47:36.490
> 
> 标签：javascript, jquery

我有一个登录表单：

```
<form>
    <div class="username">
        <label for="username">Email</label><br />
        <input type="text" class="field" value="Enter your email" name="email" id="id_email">
    </div>
    <div class="password">
        <label for="password">Password</label><br />
        <input type="password" class="field" name="password" id="id_password">
    </div>
</form> 
```

我想让它这样当用户从一个字段切换到另一个字段时，它将选择设置在字段的开头，而不是突出显示整个字段的文本。可以在此处的登录表单上看到一个示例：[https](https://squareup.com/) ://squareup.com/ 。

我有一个将光标设置在文本输入开头的函数，我`setCursorAtBeginning`将如何使用 js 或 jQuery 完成上述操作（最好，如果可以在其中完成）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:56:07.160

你想用`placeholder`. 如果您的浏览器支持，您可以拥有它`@placeholder`，或者您可以使用 polyfill。

# @占位符

```
<form>
  <div class="username">
    <label for="username">Email</label><br />
    <input type="text" class="field" placeholder="Enter your email" name="email" id="id_email">
  </div>
  <div class="password">
    <label for="password">Password</label><br />
    <input type="password" class="field" name="password" id="id_password" placeholder="Enter your password">
  </div>
</form>​ 
```

[检查出来](http://jsfiddle.net/NtG4d/)。

# 填充物

如果你想在旧浏览器中使用它，你可以使用[HTML5 Placeholder jQuery Plugin](https://github.com/mathiasbynens/jquery-placeholder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:00:33.597

使用占位符。最好的方法是与一些 js 一起使用，以实现跨浏览器的兼容性。喜欢这个插件[http://mal.co.nz/code/jquery-placeholder/](http://mal.co.nz/code/jquery-placeholder/)

# objective-c - 如何使用 Restkit 管理离线后的本地更改

> ID：11073914
> 
> 赞同：2
> 
> 时间：2012-06-17T18:48:20.310
> 
> 标签：objective-c, ios, rest, ios5, restkit

我正在使用 Restkit 制作一个在线/离线 ios 应用程序，但我不知道在离线时间之后进行同步。

我在想这个：

*   在离线时，我更新本地托管对象并将字段 local_changes 推送到 true
*   当我回到互联网时，在每个 GET 请求之前，我使用 PUT 请求发送所有带有 local_changes = true 的模型
*   如果它是一个新项目，我会发送一个 POST 请求。

我的问题是我的 GET 请求，没有等待 GET 请求结束发送，所以我得到了旧数据（数据未修改）。

你觉得这怎么样？你有没有找到更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-07T03:18:57.047

我意识到这已经晚了，但我最近一直在寻找一种好方法来做到这一点。

我目前正在使用`AFHTTPClient`名为`setReachabilityStatusChangeBlock:(void (^)(AFNetworkReachabilityStatus status))block`. 在我设置 Restkit objectManager 的 AppDelegate 中，我在 AFHTTPClient 对象上运行此方法。在该方法中，我有一个检查网络可达性的 if 语句。如果无法访问，我将当前日期保存在我的 AppDelegate 中。如果它是可访问的，并且 self.offline != nil，那么你就知道你刚刚重新上线。

此时，您应该能够检查实体（使用 NSPredicates）上的“updatedAt”字段，以查看它们是否在您上次离线时更新或创建。然后您可以相应地 PUT/POST。

# gnuplot - Gnuplot 在多项式拟合中表现异常。这是为什么？

> ID：11073925
> 
> 赞同：10
> 
> 时间：2012-06-17T18:49:07.000
> 
> 标签：gnuplot

我的一个朋友在 gnuplot 中发现了一些关于简单多项式拟合的奇怪行为 有人可以解释一下吗？

这是文件：

```
#!/usr/bin/gnuplot -p

f(x) = B*(x**4) + A
fit f(x) "data.txt" using ($1+273.14):2 via A, B

plot    "data.txt" using ($1+273.14):2 notitle,\
        f(x) notitle 
```

数据是：

```
# content of data.txt
350 3.856
330 3.242
290 2.391
250 1.713
210 1.181
170 0.763
130 0.437 
```

结果图是绿线。蓝线显示使用基本相同形式的另一个函数的拟合效果要好得多。对于绿线，A 被一个常数值代替（A = 0.2123，大约是 B*300^4）

![奇怪的拟合行为 gnuplot](../Images/273422031321681c2c2f117567b292c1.png)

所以绿线显然不是这里的最佳拟合，因为`f(x) = B*(x**4) - 0.2123`产生的结果要好得多，并且也是 B*x **4 + A 的形式。在绿色拟合中，参数 **A 被 gnuplot 简单地忽略，**并且拟合算法保持不变。为 A 和 B 设置不同的初始值似乎没有多大帮助 - A 的值永远不会改变它的初始值。我和我的朋友正在使用 Ubuntu 附带的标准 Gnuplot 版本：gnuplot 4.4 patchlevel 3。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T22:27:44.377

这是一个非常好的（和涉及的）问题，我没有完整的答案，但以下内容有望有所启发。

拟合使用最小二乘拟合例程 ( [Levenberg–Marquardt](http://en.wikipedia.org/wiki/Levenberg%E2%80%93Marquardt_algorithm) )。它迭代地收敛于一个“好”的解决方案。需要多好的解决方案是由`FIT_LIMIT`变量决定的。默认情况下，FIT_LIMIT 设置为（保守的）`1.e-5`。显然，与更改 A 相比，通过更改迭代路由中 B 的值，您的数据收敛速度要快得多。事实上，正如您所注意到的，您甚至可以在不触及变量 A 的情况下低于错误阈值。但是，如果您加快速度您的期望（您希望获得更好的拟合，因此您设置`FIT_LIMIT`为较低的值 - 我将其设置为`1.e-14`)，你会得到更好的结果。您在这里付出的代价是拟合可能需要更长的时间才能收敛（或者甚至可能发散——我不是拟合专家）。这里的一个要点是，功能拟合与其说是一门科学，不如说是一门艺术——*没有最好的拟合*，只有*足够好的拟合*。

另请注意，该算法搜索残差平方的局部最小化（满足您给出的容差）。它不保证它找到一个全局最小值。

```
#!/usr/bin/gnuplot -p

FIT_LIMIT=1.e-14
f(x) =A +  B*(x**4)
fit f(x) "data.txt" using ($1+273.14):2 via A, B

plot     "data.txt" using ($1+273.14):2 notitle,\
         f(x) notitle 
```

另请注意，如果您发现 gnuplot 收敛到错误的最小值，您可以通过执行以下操作“播种”拟合例程：

```
FIT_LIMIT=1.e-14
f(x) =A +  B*(x**4)
A=1.3  #initial guess for A
fit f(x) "data.txt" using ($1+273.14):2 via A, B

plot     "data.txt" using ($1+273.14):2 notitle,\
         f(x) notitle 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-11T20:10:02.713

只需尝试下面的代码。诀窍是确保 x 和 y 变量的范围具有相同的数量级。

```
reset;
plot 'data.txt' u ($1+273.14):2 w p;
f(x, a, b) = a*(1e-2*x)**4 + b; # note the 1e-2 multiplicative factor
a = 1; b = 1; # initial parmeters
fit f(x,a,b) 'data.txt' u (($1+273.14)):2 via a, b
#plot 'data.txt' u (($1+273.14)):2 w p, f(x, a, b) w l
plot 'data.txt' u (($1+273.14)):2 w p, (a*(1e-2)**4)*x**4+b w l
print sprintf("Fit parameters for the fit function a*x^4 + b are :\n\ta = %e, \n\tb = %f", a*(1e-2)**4, b) 
```

![图表的图像](../Images/44f2da05890d2881bd8b783f0d88528d.png)

# asp.net - Asp.net 奇怪的配置或设置问题

> ID：11073929
> 
> 赞同：1
> 
> 时间：2012-06-17T18:50:06.243
> 
> 标签：asp.net, iis

我有一个奇怪的 asp.net webforms 网站问题。它是在 vs2008 中开发的，带有表单身份验证和 mysql 后端。它在开发系统（win7）和可能的生产服务器上运行良好。

在新的 2008 R2 服务器上，它的行为很奇怪。当我通过登录页面登录时，它会正确重定向到默认页面，但不会生成用户菜单。但是，如果我回收应用程序池并刷新页面，菜单就会出现并且工作正常。如果注销并登录，再次出现同样的问题，直到应用程序池回收之前没有菜单。

从日志看来，它似乎没有从数据库中获取值。即使有数据。它显示 httpcontext 的正确用户名并显示用户已通过身份验证。并且日志、事件日志等中没有显示错误。

不知道这里发生了什么。

**更新 ：**

我正在使用 log4net 和日志信息进行日志记录。代码中可能有问题。

这里是 web.config 的一部分

```
 <connectionStrings>
   <add name="tmsConnectionString" connectionString="server=localhost;user id=root;password=54545;persist security info=false;database=tms;port=3306;convert zero datetime=yes;Allow Zero Datetime=True" providerName="MySql.Data.MySqlClient" />
    <add name="archiveConnectionString" connectionString="server=localhost;user id=root;password=55645;database=archive;persist security info=True;port=3306;convert zero datetime=yes;Allow Zero Datetime=True" providerName="MySql.Data.MySqlClient" />
  </connectionStrings>
  <system.web>
    <roleManager enabled="true" cookieName=".ASPROLES" defaultProvider="MySqlRoleProvider" cacheRolesInCookie="false">
      <providers>
        <clear />
        <add connectionStringName="tmsConnectionString" applicationName="tms" writeExceptionsToEventLog="true" name="MySqlRoleProvider" type="Andri.Web.MySqlRoleProvider" />
      </providers>
    </roleManager>
    <membership defaultProvider="MySqlMembershipProvider" userIsOnlineTimeWindow="15">
      <providers>
        <clear />
        <add name="MySqlMembershipProvider" type="Andri.Web.MySqlMembershipProvider" connectionStringName="tmsConnectionString" applicationName="tms" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" passwordFormat="Hashed" writeExceptionsToEventLog="true" />
      </providers>
    </membership>
    <authentication mode="Forms">
      <forms name=".ASPXFORMSAUTH" slidingExpiration="false" loginUrl="~/login.aspx" defaultUrl="~/default.aspx" path="/" protection="All" cookieless="AutoDetect" timeout="180" />
    </authentication>
    <authorization>
      <deny users="?" />
    </authorization>
  </system.web> 
```

这是默认页面的页面加载。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            log.Debug("User - " + Page.User.Identity.Name);
            log.Debug("User IsAuthenticated- " + Page.User.Identity.IsAuthenticated.ToString());
            log.Debug("User AuthenticatedType- " + Page.User.Identity.AuthenticationType);

            if (Page.User.IsInRole(Tms.Constants.Roles.Administrator))
            {
                log.Debug("role: Administrator");
                ASPxMenu1.Items[0].Visible = true;
            }
            else if (Page.User.IsInRole(Tms.Constants.Roles.Manager))
            {
                log.Debug("role: Manager");
                ASPxMenu1.Items[1].Visible = true;
            }
            else {
                log.Debug("Menu not created - Role not supported");
            }
        }
    } 
```

这是使用成员角色管理器检查用户是否在角色中的代码

```
 public static bool IsInRole(this IPrincipal User, Tms.Constants.Roles roletype)
    {
        string role = roletype.ToString().ToLower();
        log.DebugFormat("IsInRole role: {0}", role.ToLower());
        log.DebugFormat("IsInRole user: {0}", User.Identity.Name);

        return User.IsInRole(role.ToLower());
    } 
```

这是日志

```
信息 2012-06-17 LoginPage Login1_LoggedIn - 登录：管理员
调试 2012-06-17 DefaultPage Page_Load - 用户 - 管理员
调试 2012-06-17 DefaultPage Page_Load - 用户 IsAuthenticated - True
调试 2012-06-17 DefaultPage Page_Load - User AuthenticatedType- Forms
信息 2012-06-17 用户 IsInRole - IsInRole 角色：管理员
信息 2012-06-17 用户 IsInRole - IsInRole 用户：管理员
信息 2012-06-17 用户 IsInRole - IsInRole 角色：经理
信息 2012-06-17 用户 IsInRole - IsInRole 用户：管理员
调试 2012-06-17 DefaultPage Page_Load - 未创建菜单 - 不支持角色

```

如果我以用户“管理员”身份登录，它会转到未创建的菜单。即使“管理员”是角色管理员。

奇怪的是，如果我使用自定义逻辑来获取用户信息，而不是会员提供程序“User.IsInRole”，DB 仍然没有返回任何值。前任：

```
 static public int GetUserId(string name)
    {
        log.DebugFormat("UserIdFromUsername({0})", name);

        using (var TA = new Tms.DataAccessTableAdapters.usersTableAdapter())
        {
            log.DebugFormat("connection({0})", TA.Connection.ConnectionString);

            var usertable = TA.GetDataBy_Username(name);

            log.DebugFormat("count({0})", usertable.Rows.Count.ToString());
            if (usertable.Rows.Count>0)
            {
                return usertable[0].Id;
            }
            else { return 0; }
        }
    } 
```

它的日志

```
调试 2012-06-17 用户 GetUserId - UserIdFromUsername（管理员）
调试 2012-06-17 用户 GetUserId - 连接（服务器=本地主机；用户 id=root；密码=54545；持久安全信息=假；数据库=tms；端口=3306；转换零日期时间=是；允许零日期时间=真）
调试 2012-06-17 用户 GetUserId - count(0)

```

因此，即使该用户存在于数据库中，它也不会返回用户信息。

如果我回收 IIS 应用程序池并刷新页面，这两种情况都开始工作，我的意思是成员资格提供程序或自定义逻辑。直到我退出。再次登录，同样的问题。

应用程序级别有错误日志记录，但没有错误。来自 IIS 相关服务的系统事件日志中没有与此相关的错误或消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:09:39.037

这听起来像是代码中的错误，而不是配置问题（当然，您的代码可能会对导致问题的配置做出假设）。我建议您使用日志框架（例如 log4net 或滚动您自己的基于 FileStream 的简单记录器）并在页面/控制器执行期间的关键点将有关程序状态的详细信息写入记录器，然后稍后检查它们 - 这是您最接近的远程调试就可以搞定了。

最好的解决方案是安装 VS 远程调试工具并连接到您遇到问题的服务器，但如果您需要处理域间信任和身份验证问题（DCOM 是MDM 和远程调试的主要部分，可能会导致需要很长时间才能解决的问题，只是一个警告）。

更新：

感谢您发布日志。我看到您在写入日志时正在执行 .ToLower() 。我想知道区分大小写的问题是否导致 IsInRole 函数表现不佳。请记住，SQL 字符串比较不区分大小写，但 C# 区分大小写。

# objective-c - CGAffineTransformScale + 手势

> ID：11073930
> 
> 赞同：0
> 
> 时间：2012-06-17T18:50:18.613
> 
> 标签：objective-c, ios, transform, cgaffinetransform, gestures

我有个问题。有一个uiview，通过手势控制（可以水平移动）。虽然这个 uiview 很小，但一切都很好。

在使用 CGAffineTransformScale 缩放它之后，奇怪的事情开始了：Pan 开始奇怪地工作 - 变得不是很敏感。所以在更大的状态下，我可以在PAN开始工作之前在1.5厘米的范围内移动手指。之后，一切正常（UIView 用手指拖动），但不是很顺利。

我认为在 CGAffineTransformScale 之后增加了一些东西，它负责手势。如果我缩小视图，手势就会开始正常工作。

请帮忙！谢谢！

// 过渡

```
[UIView transitionWithView:pagesView   
                  duration:0.25  
                   options:UIViewAnimationOptionCurveEaseOut + UIViewAnimationOptionAllowUserInteraction + UIViewAnimationOptionBeginFromCurrentState
                animations:^{

                    pagesView.transform = CGAffineTransformScale(pagesView.transform, kResize, kResize);

                }   
                completion:^(BOOL finished){

                }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:07:35.463

如果您在视图中询问平移手势识别器的平移，并且视图已缩放到其自然大小的两倍，那么您的手指移动除以 2 来计算平移。想必这不是你想要的。

*在未*缩放的视图中询问平移手势识别器的平移。我假设您的缩放视图具有未转换的超级视图。尝试将其用作手势识别器的操作：

```
- (IBAction)pan:(UIPanGestureRecognizer *)panner {
    UIGestureRecognizerState state = panner.state;
    if (state != UIGestureRecognizerStateChanged && state != UIGestureRecognizerStateEnded)
        return;
    UIView *movingView = panner.view;
    UIView *referenceView = movingView.superview;
    CGPoint offset = [panner translationInView:referenceView];
    [panner setTranslation:CGPointZero inView:referenceView];
    CGPoint center = movingView.center;
    center.x += offset.x;
    center.y += offset.y;
    movingView.center = center;
} 
```

# c++ - 不要打印尾随分隔符 stream_iterator C++

> ID：11073932
> 
> 赞同：11
> 
> 时间：2012-06-17T18:50:42.640
> 
> 标签：c++, iterator, c++11, ostream

在您看来，在 C++11 中打印以`std::cout`使用`std::ostream_iterator`并避免打印尾随分隔符的最优雅的方式是什么？

我正在打印的对象具有双向迭代器，但没有随机访问迭代器。

```
std::list<double> x{1,2,3,4,5,6};
std::copy(x.begin(), std::prev(x.end()),
                std::ostream_iterator<int>(std::cout, ",") );
if ( x.size() != 0 )
  std::cout << *(--x.end()) << std::endl; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T19:11:50.273

这是我的最爱之一，但它不使用`std::ostream_iterator`：

```
#include <iterator>
#include <string>
#include <iosfwd>

template <class C>
auto
print(std::ostream& os, const C& c,
      const std::string& delim = std::string(", "),
      const std::string& open_brace = std::string("{"),
      const std::string& close_brace = std::string("}")
     ) -> decltype(std::begin(c), std::end(c), os)
{
    os << open_brace;
    auto i = std::begin(c);
    auto e = std::end(c);
    if (i != e)
    {
        os << *i;
        for (++i; i != e; ++i)
            os << delim << *i;
    }
    os << close_brace;
    return os;
}

#include <list>
#include <iostream>

int main()
{
    std::list<double> x{1,2,3,4,5,6};
    print(std::cout, x) << '\n';
}

{1, 2, 3, 4, 5, 6} 
```

**更新**

奥利弗激起了我无法抗拒的挑战。:-)

```
#include <iterator>
#include <string>
#include <iosfwd>

namespace my {

template <class C>
auto
print(std::ostream& os, const C& c,
      const std::string& delim = std::string(", "),
      const std::string& open_brace = std::string("{"),
      const std::string& close_brace = std::string("}")
     ) -> decltype(std::begin(c), std::end(c), os);

template <class C,
           typename std::enable_if
                    <
                       !std::is_same<C, std::string>::value,
                    bool>::type = false
         >
inline
auto
operator<< (std::ostream& os, const C& c) -> decltype(print(os, c))
{
    return print(os, c);
}

template <class C>
auto
print(std::ostream& os, const C& c,
      const std::string& delim,
      const std::string& open_brace,
      const std::string& close_brace
     ) -> decltype(std::begin(c), std::end(c), os)
{
    os << open_brace;
    auto i = std::begin(c);
    auto e = std::end(c);
    if (i != e)
    {
        os << *i;
        for (++i; i != e; ++i)
            os << delim << *i;
    }
    os << close_brace;
    return os;
}

}

#include <list>
#include <forward_list>
#include <iostream>

int main()
{
    std::forward_list<std::list<double>> x{{}, {3, 2, 1}, {1,2,3,4,5,6}};
    my::print(std::cout, x) << '\n';
}

{{}, {3, 2, 1}, {1, 2, 3, 4, 5, 6}} 
```

它并不完美，但很有趣。:-) 可能有更好的方法可以更忠实地传播自定义分隔符和大括号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T23:09:51.243

只需通过以下方式向后移动光标：

```
std::cout << "\b"; 
```

然后覆盖分隔符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-21T19:15:37.163

C++14 - 不幸的是需要输入/输出流：

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <sstream>
#include <list>

int main()
{
    std::list<double> x{1,2,3,4,5,6};
    std::stringstream sstr;
    std::transform(x.begin(), x.end(), std::ostream_iterator<std::string>(sstr), [&](auto c){
        return (sstr.rdbuf()->in_avail() ? "," : "") + std::to_string(c);
    });
    std::cout << sstr.str() << std::endl;
} 
```

[居住](http://melpon.org/wandbox/permlink/dF8axEqC9sDZI0do)

由于 C++17 将会有[ostream_joiner](http://en.cppreference.com/w/cpp/experimental/ostream_joiner)来解决这个问题：

```
#include <algorithm>
#include <experimental/iterator>
#include <iostream>
#include <iterator>

int main()
{
    int i[] = {1, 2, 3, 4, 5};
    std::copy(std::begin(i),
              std::end(i),
              std::experimental::make_ostream_joiner(std::cout, ", "));
} 
```

[居住](http://melpon.org/wandbox/permlink/DRX6WPBghH2bmv3A)

# javascript - 关于javascript关闭的困惑

> ID：11073933
> 
> 赞同：4
> 
> 时间：2012-06-17T18:50:52.497
> 
> 标签：javascript, closures

在开发客户端应用程序时，我遇到了一个错误，我认为这与我对使用闭包的不完全理解有关。我已将代码缩减为以下内容：

```
 var fn1 = function(arr){ 
  return function(val){ 
    var idx;
    var x = 20; 
    for (idx in arr) {
      arr[idx]();
    } 
  } 
}

var fn2 = fn1([function(){
  x+= 20; 
  alert(x);
}]) 
```

现在在执行时：

```
`fn2()` 
```

`我收到一个错误： `ReferenceError: reference to undefined property "x"``

 `我想知道为什么会出现这个错误，为什么 fn2 不能访问在 fn1 返回的闭包函数的局部范围内定义的变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T18:55:45.023

简而言之：闭包可以访问与其*声明*位置相关的父范围，而不是使用它们的位置。

返回的函数`fn1`可以访问其父函数（`fn1`本身）的范围，即它可以访问`arr`. 但是数组中的函数无法访问`fn1`从它返回的函数内部或内部定义的变量，因为这些函数（数组内部）是在不同的范围内声明的。

关于您尝试使用该代码解决的实际问题，我不确定我是否理解正确。看起来您正在尝试将某些功能应用于某个数字。我不明白为什么那个数字（`20`在你的例子中）是一个常数而不是一个参数。这是我为此提出的解决方案（没有关闭！）：

```
var applyArrayFunctions = function(arr, x){ 
    for(var i=0; i<arr.length; i++) {
        x = arr[i](x);
    }
    return x;
}

var num = 2;
var fnArray = [
    function(val){
      return val + 20; 
    },
    function(val){
      return val * 2; 
    }
];

console.log(applyArrayFunctions(fnArray, num));​ // logs 44​​​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T18:58:52.413

我怀疑错误在行`x+=20`

`var x = 20`只存在于 . 返回的匿名函数的范围内`fn1`。 `x+=20`之前进行评估`fn1`，因此`x`当时甚至不存在。`

# python - 重制列表Ctrl

> ID：11073937
> 
> 赞同：0
> 
> 时间：2012-06-17T18:51:47.857
> 
> 标签：python, wxpython

我有一个基本上由 ListCtrl 制作的程序，并有一个添加按钮、一个编辑按钮和一个删除按钮。正如你可以想象的那样，并不是很困难（我认为这很困难，因为它不同于线性编程，但我正在学习）。

显示的数据取自数据库，根据情况添加、编辑、删除一些数据。

我现在想，当数据更改时， ListCtrl 会完全重新加载（基本上，因为数据已排序）。这意味着：从数据库中更新数据，然后用新数据从数据库中创建一个新的 ListCtrl，而不是分别更新 ListCtrl 和数据库。

这是将数据插入 ListCtrl 的代码，并且位于 Panel 中（应该重新加载 ListCtrl 的对象是一个 Dialog，它从不同的地方调用）：

```
i = 0
for data in coches:
    index = self.lista.InsertStringItem(i, data[0])
    self.lista.SetStringItem(index, 1, str(data[1]))
    self.lista.SetStringItem(index, 2, str(data[2]))
    self.lista.SetStringItem(index, 3, str(data[3]))
    self.lista.SetStringItem(index, 4, str(data[4]))
    if((index+1) % 2 == 0):
        self.lista.SetItemBackgroundColour(index,gris)
    i += 1 
```

“coches”是数据库中的一个列表，“self.lista”是 ListCtrl 对象

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:07:11.663

不确定问题出在哪里，但是您应该将用于填充`ListCtrl`内部的代码放入方法中，并在修改数据时调用它以更新列表。
要在再次填写之前清除列表，您可以使用`ListCtrl`方法`DeleteAllItems()`或`ClearAll()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:41:36.333

我个人喜欢使用 ObjectListView 而不是普通的 ListCtrl。我什至写了一个关于这个主题的[教程。](http://www.blog.pythonlibrary.org/2009/12/23/wxpython-using-objectlistview-instead-of-a-listctrl/)然后今年，我用 SQLAlchemy写了一篇关于[wxPython 和 CRUD的教程。](http://www.blog.pythonlibrary.org/2011/11/10/wxpython-and-sqlalchemy-an-intro-to-mvc-and-crud/)我怀疑这些对你也有帮助。

# database - Mono.Data.Sqlite.dll 能否与 sqlite3.dll 一起用于 WinRT？

> ID：11073939
> 
> 赞同：0
> 
> 时间：2012-06-17T18:52:05.500
> 
> 标签：database, sqlite, mono, windows-runtime

Mono.Data.Sqlite 库是否会为即将发布的 sqlite3 对 WinRT 构建的支持实现 DbConnection/SqliteConnection 和 DbCommand/SqliteCommand？

我知道（或至少找不到任何引用） Metro/WinRT 不包含 System.Data.Common 命名空间。

我正在开发一个使用 sqlite 数据库的跨平台应用程序，并且希望至少可以完全重用数据库层。此外，CSharp-Sqlite 还不具备 sqlite 的所有功能。

我知道 csharp-sqlite 库目前支持 WinRT，但是在开发中依赖更少的实体会很好。我目前将不得不依赖 Xamarin/Mono for Desktop/iOS/Android 和 CSharp-Sqlite for WinRT/WP/Silverlight。**如果 sqlite3.dll 将原生支持 WinRT，那么 Mono.Data.Sqlite.dll 也可以吗？**

**也许在 WinRT 支持 sqlite3 之后，这些家伙可以找到支持 Silverlight 和 Windows Phone 的方法？**:)

有接盘侠吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:41:01.513

*这不能回答您的问题，但可能会解决您的问题。*

Tim Heuer 关于 WinRT 上的 SQLite 支持的[博客文章指出：](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)

> 有些人可能会询问 System.Data.Sqlite 并且由于 ADO.NET 的依赖性而无法使用，它不是 .NET Framework Core 配置文件的一部分。

因此，尽管现在可以在 WinRT Metro 风格应用程序中使用本机 SQLite 二进制文件，但不支持托管 ADO-NET 驱动程序 (System.Data.SQLite)。Tim 建议使用轻量级的[sqlite-net](https://github.com/praeclarum/sqlite-net) C# 包装器，它是对本地 SQLite 库的 P/Invoke 访问的精简 ORM 包装器。sqlite-net 当然适用于 Mono，包括 MonoTouch 和 Mono for Android。

版本 5 之前的 Windows Phone 和 Silverlight 是一个不同的问题 - 通常不支持本机代码，但 sqlite-net 也适用于纯托管的[csharp-sqlite](http://code.google.com/p/csharp-sqlite/)实现，这样您就可以使用一个具有不同后端的前端库-在这些平台上结束。

# mapreduce - 使用 Spymemcached 从 memcached 中检索键值对

> ID：11073942
> 
> 赞同：0
> 
> 时间：2012-06-17T18:52:27.093
> 
> 标签：mapreduce, key-value, spymemcached

我将键值对存储在 memcached 中，其中许多值具有相同的键，从而导致相同的对。现在，我想要每个键的值的组合列表。我无法完成这项工作。我们可以在 memcached 中创建一个 Hashmap 吗？还是键值对列表？参考哪个我可以单独检索值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:01:43.630

你总是可以为一个键存储一个列表（逗号分隔等），然后检索它，分解它......例如，php 的 serialize/unserialize() 是从 memcache 检索通用对象的好方法。

# android - 在 Android 中设置 ListViews 大小的可能方法？

> ID：11073947
> 
> 赞同：3
> 
> 时间：2012-06-17T18:53:30.233
> 
> 标签：android, listview, size

我创建了一个 TableLayout，其中包含一个 listView。我通过在 dp 中设置 listView 的大小来定义它。我的问题是在屏幕较小的手机上上传应用程序时，listView 在屏幕上变大（长）。我不想使用 ScrollView 并在其中有一个 listView。有没有其他方法可以设置列表视图的大小，它是相同的并且不依赖于您使用的移动设备？

listView的图片：[http ://tinypic.com/view.php?pic=2qwhoxd&s=6](http://tinypic.com/view.php?pic=2qwhoxd&s=6)

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/bakgrunden"
android:orientation="vertical"
android:gravity="center|top"
android:stretchColumns="1"
android:weightSum="1.0" >

<TableRow>
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
</TableRow> 

<TableRow
android:paddingLeft="22dp"
android:paddingRight="25dp"
android:paddingTop="15dp" >

<ListView
    android:id="@+id/latest_list"
    style="@style/CustomListView"
    android:layout_width="wrap_content"
    android:layout_height="390dp" <------- THE PROBLEM! The list gets to long for a
    android:gravity="left"/>               small-screen mobile.
</TableRow> 

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:08:59.903

只需为较小的屏幕创建不同的布局，并允许操作系统确定要加载的布局。Android 开发者网站有一个很好的建议：[支持不同的屏幕尺寸](http://developer.android.com/training/multiscreen/screensizes.html)

您可以尝试`layout_weight`通过确定每个屏幕的大小（[以像素为单位获取屏幕尺寸](https://stackoverflow.com/q/1016896/1267661)）然后计算适当的高度来调整属性或在运行时调整高度......但老实说，几种不同的布局是最简单、面向未来的方法。

# php - 如何将等级添加到积分系统

> ID：11073953
> 
> 赞同：0
> 
> 时间：2012-06-17T18:54:14.553
> 
> 标签：php, mysql

我有一个系统，您可以通过猜测好结果来获得积分。当你得分最高时，你必须是第一名。问题是我如何才能排名，所以得分最高的人将成为第一名，下一个人将成为第二名，依此类推。

例子：

```
    ID积分排名
  -------------------------
    1 | 1000 | 1
    2 | 900 | 2
    3 | 500 | 5
    4 | 700 | 4
    5 | 800 | 3

```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:25:26.673

假设您有一个包含两个表的数据库：第一个列出用户，第二个列出通过问题获得的分数（问题来自第三个表，尽管我将在下面显示它并不重要）。

```
User
=====
Id
Name
(...)

Question
=====
Id
(...)

Answer
=====
UserId
QuestionId
PointsTaken 
```

要从中进行排名，您可以执行一个简单的 SQL 语句：

```
SELECT usr.Id, usr.Name, SUM(ans.PointsTaken)
  FROM User usr
  JOIN Answer ans ON ans.UserId = usr.Id
 GROUP BY usr.Id, usr.Name
 ORDER BY SUM(ans.PointsTaken) DESC 
```

这样，你的排名就完成了。结果将是人员 ID、人员姓名和总得分，从最大值到最小值排序。在此旁边，您只需要显示信息。

# jquery - jQuery计算页面上的输入数

> ID：11073957
> 
> 赞同：3
> 
> 时间：2012-06-17T18:55:14.610
> 
> 标签：jquery

我有一个动态表单，用户可以添加/删除输入字段集。我想在剩下 x 数量的输入时禁用删除表单字段按钮，所以我想我会计算删除按钮的 onclick 上留下的输入数量，然后当只剩下 x 数量的输入时我会禁用删除按钮，这样他们就不能删除最后一组输入。

```
$('#btnRemove').on('click', function() {
    $('.clonedInput').last().remove();
    if count of inputs = 7;
    $('#btnRemove').attr('disabled','disabled');
}); 
```

'如果输入数 = 7' 是我需要的代码！有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T18:57:15.333

我想你只是在寻找

```
if ($('.clonedInput').length == 7) {
  // do stuff
} 
```

选择器只返回一个 jQuery 元素数组。要在 JavaScript 中访问数组的长度，只需使用`.length`属性。

```
[1,2,3].length //=> 3 
```

# android - 使用可选的缺失库时如何避免异常

> ID：11073958
> 
> 赞同：1
> 
> 时间：2012-06-17T18:55:19.703
> 
> 标签：android, access-violation

我已将 Google MAPs API 添加到我的应用程序中，但这不是关键部分。我希望我的应用程序在缺少此库的系统上运行，但在用户尝试访问地图功能时避免出现异常。我尝试在我的活动周围放置 try/catch 块，但它似乎无法捕获丢失的库异常。在开始我的地图活动之前，有什么方法可以检测到地图库丢失了吗？

**更新：**我问这个问题的原因是因为我买了MK802 Android mini PC，我相信这个设备会很受欢迎。它随 Android 4.0 一起提供，但缺少地图 api 库。我希望我的应用可以安装在设备上。目前，我的应用程序运行良好，但当用户尝试访问地图功能（不是很重要的功能）时崩溃。我想我可以忍受这一点，但如果可能的话，最好避免出现异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:08:00.023

Google 提供了一篇关于如何在 Android 版本之间执行此操作的文章。即，我如何访问特定版本的 Android 中的 api，但如果它在另一个版本的 Android 中不存在，则优雅地失败。此处可以对代码的地图部分使用相同的前提。

[http://developer.android.com/resources/articles/backward-compatibility.html](http://developer.android.com/resources/articles/backward-compatibility.html)

底线是您正在使用反射来完成此操作。

使用反射的原因是因为如果您的活动导入了另一个类但该类不存在，那么将无法创建活动。使用反射解决了这个问题，因为您将能够尝试/捕获类实例化。

# typo3 - TYPO3 制作 2 级菜单

> ID：11073959
> 
> 赞同：2
> 
> 时间：2012-06-17T18:55:41.090
> 
> 标签：typo3, typoscript

我想做一个这样的菜单：

```
<ul>
  <li><a href="...">Item 1</a></li>
  <li><a href="...">Item 2</a></li>
  <li>
    <a href="...">Item 3</a>
    <ul>
      <li><a href="...">Subitem 1</a></li>
      <li><a href="...">Subitem 2</a></li>
    </ul>
  </li>
</ul> 
```

但相反，我得到了这个：

```
<ul>
  <li><a href="...">Item 1</a></li>
  <li><a href="...">Item 2</a></li>
  <li><a href="...">Item 3</a></li>
  <ul>
    <li><a href="...">Subitem 1</a></li>
    <li><a href="...">Subitem 2</a></li>
  </ul>
</ul> 
```

我应该改变什么？这是我的代码：

```
10 = HMENU
10{
  special = directory
  special.value = 1

  1 = TMENU
  1{
    NO = 1
    NO{
      allWrap = <li>|</li>
    }
  }

  2 = TMENU
  2{
    wrap = <ul>|</ul>
    NO = 1
    NO.linkWrap = <li>|</li>
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:15:35.597

你不需要任何魔法，普通`wrapItemAndSub`就可以了

```
lib.subMenu = HMENU
lib.submenu {
   1 = TMENU
   1 {
      wrap = <ul>|</ul>
      NO.wrapItemAndSub = <li>|</li>
   }

   2 < .1
   2.wrap = <ul class="level_2">|</ul>
} 
```

当然，您不需要为每个级别使用单独的课程，这是一个奖励。

# python - Myro 找不到导入 win32file

> ID：11073968
> 
> 赞同：2
> 
> 时间：2012-06-17T18:57:15.520
> 
> 标签：python, dll, import, myro

我正在尝试安装 myro 包，这样我就可以使用[Scribbler 机器人](http://wiki.roboteducation.org/Step_by_step_installation_windows_XP)了。成功安装软件包后，我收到以下错误：

```
from myro import *

Traceback (most recent call last):
  File "<pyshell#4>", line 1, in -toplevel-
    from myro import *
  File "C:\Python24\Lib\site-packages\myro\__init__.py", line 18, in -toplevel-
    from myro.system import *
  File "C:\Python24\Lib\site-packages\myro\system.py", line 2, in -toplevel-
    import os, string, serial, sys, time
  File "C:\Python24\Lib\site-packages\serial\__init__.py", line 13, in -toplevel-
    from serialwin32 import *
  File "C:\Python24\Lib\site-packages\serial\serialwin32.py", line 9, in -toplevel-
    import win32file  # The base COM port and file IO functions.
ImportError: DLL load failed: The specified module could not be found. 
```

Python 版本是 2.4.4（包使用的）。另外，我有目录`C:\Python24\Lib\site-packages\win32`，还有文件`win32file.pyd`。我不知道为什么会这样。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:46:55.477

这也发生在我身上。我所要做的就是卸载并重新安装程序（糟糕但有效）。以下是一些详细说明：

Myro 安装和设置

您将下载 Myro 并将其安装到您的计算机上。在安装结束时，Python、一个 IDLE 和 Myro 的特殊帮助文件将准备好在您的计算机上使用。

在开始之前，请通读这些说明。安装和设置说明将概述 Windows 机器（特别是 Windows XP）的操作，但许多步骤需要在其他平台上执行。IPRE 网站上提供了 Linux、MacOS X 和 Windows 的安装说明。

请非常仔细地按照以下说明进行操作。如果您匆忙完成整个过程而忽略了重要的细节，Myro 的安装和设置将不会顺利进行。您可能希望在完成每个步骤时对其进行检查。注意：您不需要设置硬件。

Python2.4 是编写这些指令时的最新 Python 版本。如果现在有更新的东西，请不要感到惊讶。

您应该已经具备如何在计算机上下载文件和创建文件夹的基本知识。如果您不知道，请查阅 Windows 帮助菜单并了解您不知道的详细信息。第 1 步：阅读说明

```
Please read these instructions thoroughly before continuing to Step 2\. You may want a parent or friend to sit with you for support. Reading and following directions takes practice.

Every computer is different, so don’t be surprised if during the installation and setup process you have to make some minor adjustments. In those situations, simply accept any default choices that Windows makes for you. Instructions specific to systems other than Windows XP can be found on the IPRE site as well as a list of possible problems and the solutions. 
```

第 2 步：下载 Myro

```
Go to the Myro Installation Manual (http://wiki.roboteducation.org/Myro_Installation_Manual) section of the IPRE website.

Scroll down the page and to the section titled Myro Installation and Setup. Click the Windows Setup link. (If you are running a different operating system, click the appropriate link.)

No matter which version of Windows you have, click the link to download the Myro ZIP File.

When the File Download dialog box appears, choose the Save button.

Save the zip file to the root directory (C:) of your computer’s hard drive. The directory structure of every computer is different, but make sure your root directory appears in the “Save in” window and the file appears in the “File name” window as shown below. Select Save.

The name of the C: drive will vary from one computer to another.  You can be pretty sure you are saving the file in the right place if “C:” appears in the Save in: window.

After completing the installation, you can archive this file to a different folder if you prefer.  Do not delete the file in case you may need to re-install at a later date.

Once the download is complete, open the folder to your root directory.

You should see the saved file myro-all-270.zip. Your directory and version number may be different. 
```

第 3 步：安装 Myro

```
Open the myro-all-270.zip file by double clicking on it.

Inside the Zip file is a folder titled Myro Install Files. Copy this folder to your Desktop.

Once on your Desktop, open the Myro Install Files folder. Important Note: Opening the folder from within the Zip folder will not work. The folder must be located outside the Zip folder.

If you have Windows XP, double click the install.bat file. If you have Windows Vista or Windows 7, right click the install.bat file and choose “Run as Administrator”.

A series of dialog boxes will now appear. Choose the default settings for each by clicking the Next button. 
```

第 4 步：设置 Myro

```
After the installation is complete, you will see the Start Python.pyw icon on your Desktop.

Move the Start Python.pyw file to your CP1 Course Files folder you previously created on your local hard drive (C:). Doing so will allow you to easily save your work to the proper folder instead of on your Desktop.

Once the Start Python.pyw file is in your CP1 Course Files folder, you can launch Python by double clicking the Start Python.pyw icon. The IDLE for Python will launch.

You are now ready to type your first Python program. Do not type in the sample program from the IPRE website.  Do not attempt the Hardware Setup for the robot. This has been done for you.

Sometimes installation and setup are not successful on the first attempt. If that happens to you, please re-read the instructions carefully and try again. After a second unsuccessful attempt, please contact your instructor for additional assistance. 
```

# java - java derby restoreFrom什么都不做

> ID：11073969
> 
> 赞同：2
> 
> 时间：2012-06-17T18:57:22.573
> 
> 标签：java, database, derby, restore

我是这个论坛的新手（第一篇文章），但我曾经在上面冲浪很多次，以寻找技巧和一些有用的示例和解决我的问题的方法。

在发布之前，我已经在网上搜索了有关“restoreFrom”derby 数据库命令的信息，并且还阅读了 derby 管理员和参考指南。

我成功地在我的程序中使用了创建、备份和检查完整性 derby 程序、连接、断开服务器和数据库等...但是无法使用内置程序恢复某些内容！

这是有问题的代码：有问题？不是那么多，因为它不会抛出任何错误......

```
try {

    Class.forName("org.apache.derby.jdbc.ClientDriver");
    java.util.Properties props = new java.util.Properties();

    String backup = "." + File.separator + "backup" + File.separator
            + "dbcli";
    System.out.println(backup);

    String nsURL = "jdbc:derby://localhost:1527/dbcli;restoreFrom="
            + backup;
    props.setProperty("user", "root");
    props.setProperty("password", "root");

    dbConnection = DriverManager.getConnection(nsURL, props);
    dbConnection.commit();
    System.out.println("commit");

} catch (SQLException ex) {
    isConnected = false;
    Logger.getLogger(Snapshot.class.getName()).log(Level.SEVERE, null,
            ex);
    System.out.println(isConnected);
} catch (ClassNotFoundException ex) {
    Logger.getLogger(Snapshot.class.getName()).log(Level.SEVERE, null,
            ex);
} 
```

它没有返回错误，但数据库没有恢复，即使有备份目录的完整路径......

我一直在寻找几天，任何帮助都会很棒！

最好的问候，感谢您阅读这篇 java 新手帖子... :-)

编辑：问题是 .SVN 文件夹的存在....我很愚蠢.... :-) 感谢 StackOverFlow 的帮助和长寿！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T09:15:00.690

我有同样的问题，我解决了它，先关闭数据库，然后恢复它。例如：

```
 String nsURL1 = "jdbc:derby://localhost:1527/dbcli;shutdown=true";
    String nsURL2 = "jdbc:derby://localhost:1527/dbcli;restoreFrom="+ backup;
    props.setProperty("user", "root");
    props.setProperty("password", "root");

    DriverManager.getConnection(nsURL1, props);
    dbConnection = DriverManager.getConnection(nsURL2, props); 
```

并使用 try-catch

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:50:39.080

您可能应该首先使用“ij”练习备份和恢复处理，然后尝试在程序中将其自动化。下一步尝试使用嵌入式驱动程序进行备份/恢复，而不是使用客户端/服务器驱动程序，与客户端/服务器驱动程序一样，有关备份的错误消息可能位于服务器的日志目录中derby.log 文件。然后，当您在更简单的配置中解决所有问题时，您将能够使用客户端/服务器驱动程序自动执行备份/恢复处理。

# python - PyQt - 从 URL 设置 QLabel 图像

> ID：11073972
> 
> 赞同：3
> 
> 时间：2012-06-17T18:57:44.863
> 
> 标签：python, pyqt

我一直在尝试将图像从 URL 设置为 QLabel。但我没有运气。这是我现在尝试做的事情：

```
import urllib, cStringIO
img_file = cStringIO.StringIO(urllib.urlopen(image_url).read())
image_file = Image.open(img_file) 
```

然后将其设置为 QImage：

```
final_image = QImage(image_file)

self.emit(SIGNAL("finished(QImage)"),
    final_image
) 
```

图像正在从线程传递回主 GUI 中的方法。

```
def set_image(self, final_image):
    self.main_picture_pixmap = QPixmap.fromImage(final_image).scaled(
        QSize(self.picture_label.size()), 
        Qt.KeepAspectRatio, 
        Qt.FastTransformation
    )
    self.picture_label.setPixmap(self.main_picture_pixmap) 
```

这样做我得到错误：

```
QPixmap::scaled: Pixmap is a null pixmap 
```

有没有办法解决这个问题，或者用不同的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-28T19:13:19.643

将图像从 url 加载到图标中的简单公式。

```
from PyQt4.QtGui import QPixmap, QIcon
import urllib

url = 'http://example.com/image.png'    
data = urllib.urlopen(url).read()
pixmap = QPixmap()
pixmap.loadFromData(data)
icon = QIcon(pixmap) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T21:15:40.683

[`QImage.load`](http://qt-project.org/doc/qt-4.8/qimage.html#load)采用文件名，而不是图像数据。如果你想这样做，你需要使用`QImage.loadFromData`.

# c# - 找不到类型或命名空间名称“ProfileCommon”

> ID：11073973
> 
> 赞同：4
> 
> 时间：2012-06-17T18:57:49.370
> 
> 标签：c#, asp.net, visual-studio-2008

Gooday，我正在用 Visual Studio 中的 C# 网站创建一个 ASP.NET。我使用了 ProfileCommon 并偶然发现了这个错误：

> 找不到类型或命名空间名称“ProfileCommon”（您是否缺少 using 指令或程序集引用？）

希望它有一个快速修复？**我应该包括什么指令？**非常感谢。

编辑：有什么建议吗？- 安装此加载项后： http: [//archive.msdn.microsoft.com/WebProfileBuilder/Release/ProjectReleases.aspx?ReleaseId =980](http://archive.msdn.microsoft.com/WebProfileBuilder/Release/ProjectReleases.aspx?ReleaseId=980)

> `Error 1 The "BuildWebProfile" task failed unexpectedly. System.ArgumentNullException: String reference not set to an instance of a String. Parameter name: s at System.Text.Encoding.GetBytes(String s) at WebProfileBuilder.Builder.IsProfileSame() at WebProfileBuilder.Builder.GenerateWebProfile(BuildWebProfile buildWebProfile) at WebProfileBuilder.BuildWebProfile.Execute()
> at Microsoft.Build.BuildEngine.TaskEngine.ExecuteInstantiatedTask(EngineProxy engineProxy, ItemBucket bucket, TaskExecutionMode howToExecuteTask, ITask task, Boolean& taskResult) Cinemax`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:51:19.287

您很可能正在使用 Web 应用程序项目模板。配置文件仅随网站项目模板开箱即用。有关解决方案，请参见[此处](https://stackoverflow.com/questions/10490754/profilecommon-could-be-not-found)和[此处](https://stackoverflow.com/questions/3572437/the-name-profilecommon-does-not-exist-in-the-current-context)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:59:04.897

看这里：[http](http://forums.asp.net/t/1031740.aspx/1) ://forums.asp.net/t/1031740.aspx/1或这里[错误“找不到类型或命名空间名称'ProfileCommon'”](https://stackoverflow.com/questions/3743664/error-the-type-or-namespace-name-profilecommon-could-not-be-found)

配置文件的基类是 ProfileBase 类，用于处理用户配置文件。当 Web 应用程序启用用户配置文件时，将创建一个名为 ProfileCommon 的新类。此类用于配置文件配置部分中定义的每个属性的访问器。ProfileCommon 类的访问器然后调用 getter 和 setter 来检索和设置属性值。

您需要将`using System.Configuration;`和添加`System.Web.Profile;`到您的项目中。

您可能会在此处获得更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.profile.profilebase.aspx](http://msdn.microsoft.com/en-us/library/system.web.profile.profilebase.aspx)

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T05:26:48.307

就我而言，我必须将配置文件元素添加到 web.config 文件中。

```
<profile enabled="true" defaultProvider="MyCustomProfileProvider">
...
</profile> 
```

请参阅[MSDN -profile 元素（ASP.NET 设置架构）](https://msdn.microsoft.com/en-us/library/ms164644(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-26T13:55:51.040

我花了很多时间来理解这个问题。对我来说，WebApplication 项目在本地运行良好，但在部署的 WebApplication 版本上出现此错误。WebApplication 不会自动创建 ProfileCommon 类。因此，我在项目中创建了以下类（没有所有生成的代码都会看到的命名空间）：

```
public class ProfileCommon: ProfileBase
{
} 
```

就是这样！

但是，如果您使用页面的 Profile 属性来获取和更新当前用户配置文件，则可以从配置文件类而不是 ProfileBase 继承

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-13T22:35:08.410

我遇到了一个类似的问题，即找不到 ProfileCommon 并且我的 ASP.NET 网站没有构建，并出现非常无益的错误：

```
The type initializer for 'System.Web.Compilation.CompilationLock' threw an exception. 
```

我可以通过将 Web.config 文件中 sessionState 模式的大写更正为：

```
<sessionState mode="Off"/> 
```

# gcc - bash：./main.o：权限被拒绝

> ID：11073976
> 
> 赞同：2
> 
> 时间：2012-06-17T18:58:15.817
> 
> 标签：gcc, opencl

我使用以下命令构建了 opencl 程序：

```
gcc -c -I ~/AMDAPP/include main.c -o main.o
gcc main.o -o host -L ~/AMDAPP/lib/x86_64/ -l OpenCL 
```

这是成功的。当我尝试使用它运行它时，`./main.o` 我收到错误消息：`bash: ./main.o: Permission denied` 有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T19:00:23.460

可执行文件构建到`host`文件中，而不是`main.o`.

`main.o`包含 的已编译内容`main.c`，**尚未链接到可执行文件**中。

# php - PHPUnit 代码覆盖率报告一些文件，因为它们没有代码（因此报告 0/0 行 100% 覆盖率）

> ID：11073977
> 
> 赞同：4
> 
> 时间：2012-06-17T18:58:50.590
> 
> 标签：php, phpunit, code-coverage

我一直在寻找解决方案，但找不到任何解决方案。

我在我的 PHP 应用程序上做了一些代码覆盖，它工作正常，除了几个 PHPUnit 似乎认为是空的文件（我的意思是，因为没有代码行），即使它们不是空的（每个文件都包含数百行）。

我可以看到类及其方法，但每个函数都被认为有 0 行（它说 0/0 100% 覆盖率）。如果我尝试单击函数或类名称，我通常会看到代码，但看不到这些有问题的类。

我想发布一张图片，但由于我是新用户，很遗憾我不能。

有人遇到同样的问题吗？

编辑：这是一个有问题的示例类：

[1 http://img43.imageshack.us/img43/9127/screenshot1aig.png](http://img43.imageshack.us/img43/9127/screenshot1aig.png)

找到解决方案后编辑 (2)：我删除了源代码，因为它不是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:30:18.457

我找到了解决方法。我按照 cweiske 的建议做了（我应该早点做）并缩小，直到 phpunit 代码覆盖率起作用。但令人惊讶的是，即使我只留下了一种方法，它也从未奏效。

我创建了另一个文件“Foo.php”，包含与 PlayersManager 相同的内容（几乎是空的，只有一个函数）。

一个 Foo.php 被完美地覆盖了！我将 PlayersManager 中的整个文件复制到 Foo.php 中，运行代码覆盖率，它运行良好。

为了证明我没有发疯，我重新复制了 PlayersManager 中的代码并重试：PlayersManager 覆盖率仍然是 100%，代码行为 0。

我删除了 PlayersManager.php 并重命名了 Foo.php PlayersManager.php，重新进行了覆盖，它可以工作了！

phpunit 是否保留一些缓存或类似的东西！？

无论如何，解决方法将在未来解决其他有问题的文件，但只是想知道！

感谢帮助 ！

# java - JLabel HTML4 支持

> ID：11073981
> 
> 赞同：4
> 
> 时间：2012-06-17T18:59:05.473
> 
> 标签：java, html, swing

我的问题是 JLabel (java swing) 是否支持 html4 和 css2。我知道，它支持 html3.2 但我想要更新的版本。

或者是否有另一种方法可以在 jPanel 上显示 html4。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T20:13:45.920

简而言之：没有；仅限 HTML 3，在 CSS 之前。

JLabel、JButton 等支持的“HTML”类似于`<font color="" face="" />`提供`<a href="#">`标签文本内容的内联样式。

要表明支持 HTML 的组件包含 HTML，字符串值必须包含在`"<html></html>"`; 这是为了向后兼容现有代码。例如：

```
button = new JButton("<html><b><u>T</u>wo</b><br>lines</html>"); 
```

更多信息可以在这里看到：http: [//www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JLabel.html](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JLabel.html)和文档在这里：[http://docs.oracle.com/javase /tutorial/uiswing/components/html.html](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)

JLabel 不提供 CSS 2.x 视觉格式化模型的实现，因此 HTML4 style="" 属性和 CSS 框格式化将不起作用。如果您想要丰富的 HTML 格式支持，那么您需要使用 Web 浏览器组件。

# mysql - 通过 phpMyAdmin 从 MySQL 错误 144 中恢复

> ID：11073982
> 
> 赞同：4
> 
> 时间：2012-06-17T18:59:09.700
> 
> 标签：mysql, phpmyadmin

> 144 - 表“我的表名”被标记为崩溃并且最后一次（自动？）修复失败

我没有任何 shell 终端来访问我的表。

如何使用 phpMyAdmin 解决这个问题？

我已经运行了这个：

```
CHECK TABLE [mytable name];
REPAIR TABLE [mytable name] USE_FRM; 
-- or without FRM. I got no response from this one.
ANAYLZE TABLE [mytable name] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T03:53:16.997

# java - 创建不同对象的实例列表并使用这些对象

> ID：11073990
> 
> 赞同：0
> 
> 时间：2012-06-17T19:00:02.323
> 
> 标签：java, list, arraylist

Java代码：

```
import java.util.ArrayList;
import java.util.List;

class apple{
int price;

public void myFunction(int iPrice)
{
    price=iPrice;
}
}

class orange{
int price;

public void myFunction(int iPrice)
{
    price=iPrice;
}
}

public class main {

public static void main(String[] args) {
    List <Object> list= new ArrayList<>();

    //create 3 apple object to list
    list.add( new apple() );
    list.add( new apple() );
    list.add( new orange() );

    list.get(0). /* "get(0)." this isn't using apple object and my function */

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:12:16.107

如果您编写父类（在您的示例中 - Fruit），也许对您来说会更容易：

```
class Fruit {
    int price;

    void myFunction(int price) {
        this.price = price;
    }
class Apple extends Fruit { }
class Orange extends Fruit { }

public static void main(String[] args) {
    List<Fruit> fruits = new ArrayList<>();

    //create 3 apple object to list
    fruits.add( new Apple() );
    fruits.add( new Apple() );
    fruits.add( new Orange() );

    Fruit f = fruits.get(0);
    f.myFunction(10); // now you can use methods writed in Fruit class

    // or if you want to cast it to child class:
    Apple apple = (Apple) f;

    // but if u not sure about fruit's class, check at first:
    if (f instanceof Apple) {
        System.out.println("first fruit is an apple");
    } else if (f instanceof Orange) {
        System.out.println("first fruit is an orange");
    } else {
        System.out.println("first fruit is some another fruit");
    }
} 
```

此代码：`List<Fruit> fruits = new ArrayList<>();`表示存储在列表中的所有对象必须是 的类型`Fruit`或子对象`Fruit`。这个列表将`Fruit`通过方法只返回对象`get()`。在您的代码中它将是`Object`，因此您必须先将其转换为子对象，然后才能使用它。

或者在我的示例中，如果您想对不需要转换类型的每种水果使用相同的方法，只需创建一个具有所有相同方法的超类。

对不起我的英语不好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T19:14:18.057

该方法`list.get(0)`返回一个`Object`引用，因此您必须将其向下转换为`apple`. 有点像这样：

```
apple a = (apple)list.get(0); 
```

然后调用函数。

注意：Java 中的类名最好使用大写字母，例如`Apple`,`Orange`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T19:08:02.867

你可以这样使用它..：

```
 apple a=(apple)list.get(0); 
 a.myFunction(10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T19:05:58.530

您在列表中的对象现在仅被视为对象。您需要将其显式转换为某种类型。

例如：

`Apple a = (apple) list.get(0);`

为了确定列表包含的对象类型，您可以执行如下所示的操作：

```
for (Object o : list) {
   if (o instanceof apple){
      // do something....
   }
   else if (o instanceof mango){
      // do something....

   }
} 
```

# java - Java - 从文件中删除某些行

> ID：11073993
> 
> 赞同：-5
> 
> 时间：2012-06-17T19:00:31.823
> 
> 标签：java, line, filereader

我正在尝试从文件中删除某些行。我的文件是一个 .txt，它看起来像这样：

```
 [ITEMS]

    [BANK]

    [FRIENDS]

    [EOF] 
```

当我的程序运行时，它会在这个文件中写入行。现在我想做的是有一个方法，当我调用它时，它将删除[BANK] 和 [FRIENDS]**之间的所有行。**它不能删除任何其他内容。留下一个空行。

如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:24:31.453

这是部分完成的代码，向您展示必须做什么的想法，但它可能有一些缺陷，它使用 Google Guava - [http://code.google.com/p/guava-libraries/](http://code.google.com/p/guava-libraries/)

```
import java.io.File;
import java.io.IOException;
import java.nio.charset.Charset;
import java.util.ArrayList;
import java.util.List;

import com.google.common.io.Files;

public class LinesDeleter {
    private static boolean between;

    public static void main(String[] args) throws IOException {

        File file = new File("somePath");
        deleteLinesBetweenFromFile("line1", "line2", file);

    }

    private static void deleteLinesBetweenFromFile(String start, String end,
            File file) throws IOException {
        List<String> readLines = null;
        List<String> newLines = new ArrayList<String>();
        Charset charset = Charset.defaultCharset();

        readLines = Files.readLines(file, charset);

        if (readLines != null) {
            for (String line : readLines)
                if ( !isBetweenBannedLines(line, start, end))
                    newLines.add(line);
            File to = new File("somefile");
            Files.write(writeAsSingleLines(newLines), to, charset);
        }

    }

    private static CharSequence writeAsSingleLines(List<String> newLines) {
        // TODO Auto-generated method stub
        return null;
    }

    private static boolean isBetweenBannedLines(String line, String start,
            String end) {
        if (line.equals(start)) {
            between = true;
            return true;
        }
        if (line.equals(end)) {
            between = false;
            return true;
        }
        if (between)
            return true;
        return false;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T19:15:20.583

您需要做的（如果您还没有做的话）是有一些文件内标记来识别字段（例如 [BANK] 或 [FRIENDS]）何时开始或结束。如果您像这样格式化文件：

```
#Start Bank Section
<some bank data>
<some more bank data>
#End Bank Section
<junk you want to get rid of>
<more junk you want to get rid of>
<even more junk you want to get rid of>
#Start Friends Section
... 
```

然后您可以编写一个函数来读取每个部分并将其转换为字符串，然后您可以根据需要将其输出到新的或覆盖的文件中。

如果您无法控制文件的格式，则需要某种方式来区分行，这首先需要有关文件格式的更详细信息。

如果您需要在 Bank 和 Friends 部分之间放置任何内容（例如空行），您只需在写入 Bank 和 Friends 之间的文件中写入一个由换行符（“\n”）组成的字符串即可非常轻松地做到这一点要归档的朋友部分。

# python - 在 Python 中识别操作系统是否是（开放）SUSE？

> ID：11073998
> 
> 赞同：6
> 
> 时间：2012-06-17T19:01:21.443
> 
> 标签：python, opensuse, suse, identification, uname

我正在开发一个*需要*系统包管理器的脚本。`os.uname()`我已经使用该函数识别了 Fedora、Gentoo 和 Arch Linux 。

但是，（打开的）SUSE`uname`结果与其他 Linux 发行版相同。我在[Wikipedia](http://en.wikipedia.org/wiki/Uname)`uname`上找到了许多发行版的结果。

有什么聪明的方法可以用 Python 识别（打开）SUSE 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T21:22:28.113

从顶部的评论：

*   我需要知道操作系统是否是（Open）SUSE，以便使用正确的包安装程序（zypper）。如果是 DEBIAN（例如），我会使用 apt-get...

我建议你直接解决实际问题。不是识别操作系统，而是识别可用的包管理器。

```
import os

if os.path.exists('/usr/bin/zypper'):
    ... # do the SUSE case
elif os.path.exists('/usr/bin/apt-get'):
    ... # do the Debian/Ubuntu case
elif os.path.exists('/usr/bin/yum'):
    ... # do the Red Hat case
else:
    raise OSError, "cannot find a usable package manager" 
```

编辑：虽然这里的代码显示检测包管理器程序，但检测主包注册表本身可能会更好。例如，在使用 的 Debian/Ubuntu 系统上`dpkg`，会有一个`/var/lib/dpkg`存放包数据库的目录；这是一个确定的迹象，`dpkg`或者`apt-get`是合适的。我不知道 SUSE 和 Red Hat 等的等效目录是什么，但如果你支持这些，你可以找到。

`apt-get`已经移植到 Red Hat 系统上，并且通过一个叫做`alien`你可以`rpm`在 Debian 系统上运行的程序，等等。检测包数据库本身是找出正在使用的包系统的最简单的方法。

如果您检测到包管理器，那么您的代码将自动在所有相关发行版上运行。如果您检测到`dpkg`数据库，您的代码将在 Debian、Ubuntu、Linux Mint 和许多其他基于 Debian 的发行版上运行。如果您检测到`rpm`数据库，您的代码将在 Red Hat、Centos、Fedora、Mandriva 以及所有其他基于 RPM 的发行版上运行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-17T19:32:32.167

如果发行版遵循[Linux Standard Base](http://www.linuxbase.org/)，您可以阅读[lsb_release -i](http://refspecs.linuxbase.org/LSB_4.1.0/LSB-Core-generic/LSB-Core-generic/lsbrelease.html)的输出。

像这样的东西：

```
import os

try:
    distro = os.popen('lsb_release -i').read().split(':')[1].strip()
except IndexError:
    distro = None 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T19:41:30.843

这一点 Python 样板将打印出您的平台信息：

```
import platform  

print platform.linux_distribution()  
('openSUSE ', '11.4', 'x86_64') 
```

应该做的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T19:28:32.870

输出`os.uname()`：

```
('Linux',
 'i7',
 '2.6.32-41-generic',
 '#90-Ubuntu SMP Tue May 22 11:31:25 UTC 2012',
 'i686') 
```

该`uname -a`命令应该为您提供许多相同的信息。

```
% uname -a
Linux i7 2.6.32-41-generic #90-Ubuntu SMP Tue May 22 11:31:25 UTC 2012 i686 GNU/Linux 
```

然后

```
distr = os.popen('uname -a').read().split() 
```

给你：

```
['Linux',
 'i7',
 '2.6.32-41-generic',
 '#90-Ubuntu',
 'SMP',
 'Tue',
 'May',
 '22',
 '11:31:25',
 'UTC',
 '2012',
 'i686',
 'GNU/Linux'] 
```

您可以选择您需要的相关字段。

我假设该`uname -a`命令为分布提供了一些统一的输出。如果没有，那么这将不起作用。

# javascript - Chrome 插入符号在非活动窗口中不可见 - 不利于拖放

> ID：11073999
> 
> 赞同：0
> 
> 时间：2012-06-17T19:01:21.587
> 
> 标签：javascript, html, google-chrome, drag-and-drop, caret

当在 Chrome 中的 contenteditable 区域上拖动某些东西时，为了能够捕捉到“drop”事件，需要调用`e.preventDefault();`每个“dragover”事件。

这隐藏了插入符号，它告诉您将要删除的位置。这可以通过通过[document.caretRangeFromPoint()](https://stackoverflow.com/questions/10654262/drop-image-into-contenteditable-in-chrome-to-the-cursor)手动更新插入符号位置来规避。

除非窗口处于非活动状态，否则这非常有效 - 然后插入符号是不可见的。

小提琴：http: [//jsfiddle.net/zupa/mezAm/](http://jsfiddle.net/zupa/mezAm/)

*有没有办法在不*使用助手的情况下使其可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:24:59.613

事实证明，您不必在*事件*中调用，即使窗口处于非活动状态，光标也会显示。（因此默认浏览器行为是显示插入符号。）所有教程都声明您必须调用它才能捕获事件。我相信你只需要.`e.preventDefault()``dragover``drop``return false`

我只用**Firefox** 13.0.1 和**Chrome** 19.0.1084.56 测试过（其他浏览器目前尚未实现该`drop`事件。）