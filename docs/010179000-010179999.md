# StackOverflow 问答 10179000-10179999

# java - Android - JDBC 登录

> ID：10179005
> 
> 赞同：0
> 
> 时间：2012-04-16T17:47:12.423
> 
> 标签：java, android, mysql, jdbc, login

这是我的[登录](http://i.imgur.com/lymRP.jpg)屏幕。顶部的editText 是“txtbxStudentUsername”，底部的editText 是“txtbxStudentLunchID”。

我正在使用 jdbc 连接到 LAN 上的 phpadmin wamp mysql 服务器，因此没有通过 Internet 的 SQL 问题。

我知道我在读取编辑文本字段并在数据库中比较它们时遇到问题。还有[我的数据库连接的语法有什么](http://imgur.com/TRnBD)建议吗？这是我的代码。

```
 public void onGotoStudent(View View)
    {
        String url = "jdbc:mysql://localhost:3306/tardy_system";
        String user = "root_user";
        String pwd = "root";
        Connection con = DriverManager.getConnection(url, user, pwd);

        EditText username = (EditText)findViewById(R.id.txtbxStudentUsername);
        EditText password = (EditText)findViewById(R.id.txtbxStudentLunchID);

        String passChars;

        passChars = password.getText().toString();
        if(passChars!=null) 
        {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = (Connection) DriverManager.getConnection("jbdc:mysql://localhost/tardy_system/students","Matt_Glover","root");

            (PreparedStatement) prepstmt = con.prepareStatement("SELECT Username,Lunch_ID FROM Student where username=? and password=?");
            prepstmt.setString(1, username);
            prepstmt.setString(2, password);

            ResultSet rs;
            rs = prepstmt.executeQuery();

            boolean found = rs.next();
            if (found)
              System.out.println(rs.getString(1));
            prepstmt.close();
        }

        PreparedStatement ps = conn.prepareStatement(sql);
        ps.setString(1,username);
        ps.setString(2,password);
        ResultSet rs=password.executeQuery();
        if(rs.next()) {
           //found
        }
        else{
           //not found
        }
        rs.close();
        ps.close();
        conn.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T11:05:35.917

没有 AsynTask 就无法连接 jdbc

# php - MySQL 字段名称进入 PHP 下拉菜单

> ID：10179010
> 
> 赞同：0
> 
> 时间：2012-04-16T17:47:34.913
> 
> 标签：php, mysql

我有一个网页，您可以在其中将新用户添加到系统中。添加到数据库中的值之一是帐户类型值，该值是从 PHP 下拉菜单中选择的，其中包含来自 MySQL 数据库的值。我遇到的问题是，当我尝试从下拉菜单中添加记录时，该值始终为“未定义”，它应该是选择的值（例如，如果选择了帐户类型“测试”，则“测试” ' 应该是插入数据库的值）

如果有人可以帮助我解决这个问题，这是我的代码：

```
mysql_connect('localhost', 'username', 'password');

mysql_select_db('databasename');

$sql="SELECT Id, AccountName FROM tblaccounts";
$result=mysql_query($sql);

$options="";

while ($row=mysql_fetch_array($result)) {

    $id=$row["Id"];
    $accname=$row["AccountName"];
    $options.="<OPTION VALUE=\"$id\">".$accname.'</option>';

} 
```

显示下拉列表：

```
<div class="cp-controls-lrg left">

    <p class="controls-margin">Account</p>

        <select name="sel-account-name" id="sel-account-name" class="cp-controls-sml input-select input-select-xxlrg" tabindex="6">

        <option value="0">Select Account
             <?php echo $options?>

        </select>

 </div> 
```

如果您需要任何其他代码来找出问题所在，请告诉我，非常感谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T17:50:13.760

您需要关闭 HTML 中的选项：

```
<option value="0">Select Account</option> 
```

# python - NLTK 错误不显示某些单词

> ID：10179011
> 
> 赞同：1
> 
> 时间：2012-04-16T17:47:38.600
> 
> 标签：python, nltk, stop-words

```
word_list = "love does not make the world go round. love is what makes the ride worthwhile" 
from nltk.corpus import stopwords
for word in word_list:
    #print word
    if word in stopwords.words('english'):
       #print word #print out stopword for checking
       word_list.remove(word)
    else:
       print word 
```

例如......在我的word_list中......我有“爱不会让世界运转。爱是让骑行值得的东西”

我想打印出所有不在停用词中的单词...

但它只打印出love，make，go，round，love，makes，worthy.......“世界，骑行”这个词没有打印出来......有人知道如何解决吗？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:11:31.117

如果您更改`word_list`, 使其成为单词列表，则可以正常工作。`word_list`将包含您所追求的单词。

```
word_list = ['love','does','not','make','the','world','go','round','love',
             'is','what','makes','the','ride','worthwhile']
#your code: 
from nltk.corpus import stopwords
for word in word_list:
    #print word
    if word in stopwords.words('english'):
       #print word #print out stopword for checking
       word_list.remove(word)
    else:
       print word   
#now put:
print word_list
#output:
['love', 'not', 'make', 'world', 'go', 'round', 'love', 'what',
 'makes', 'ride', 'worthwhile'] 
```

# asp.net-mvc - MVC Razor HTML Helper 语法：Html.Hidden 对象参数中的 Viewbag

> ID：10179015
> 
> 赞同：45
> 
> 时间：2012-04-16T17:47:48.347
> 
> 标签：asp.net-mvc, razor

我正在尝试将一个对象添加到我的 Html.Hidden HTML 帮助程序中，但我无法完全正确地使用语法。

**语法 1：**

```
@Html.Hidden("hiddenDate", ViewBag.myDate.ToString("dd.MM.yyyy")) 
```

导致运行时错误，并且无法解析视图中的@Html.Hidden。

**语法 2：**

```
@Html.Hidden("hiddenDate", new { String = ViewBag.myDate.ToString("dd.MM.yyyy")}) 
```

设置值="{ String = 16.04.2012 }"

我想将值设置为“16.04.2012”，但经过几次语法调整后没有成功

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-04-16T17:57:25.220

尝试将返回值转换为`object`：

```
@Html.Hidden("hiddenDate", (object)ViewBag.myDate.ToString("dd.MM.yyyy")) 
```

# c# - 从外部 Web 服务自我更新 POCO 模型类

> ID：10179016
> 
> 赞同：2
> 
> 时间：2012-04-16T17:47:50.043
> 
> 标签：c#, wpf, events, asynchronous, self-updating

我正在开发一个类库，该类库使用 GPS 纬度/经度坐标近乎实时地跟踪运输车辆。

该库从公交服务提供的一个休息 XML Web 服务中获取车辆位置。我希望车辆坐标能够自动更新它们，而不必通过我的应用程序中的刷新方法手动调用和更新它们。该类应使用最新数据自动更新自身，并在更新时引发事件。

是否可以使用定时事件自动刷新对象内部计时器上的数据，或者如果不在类中运行消息泵，这是不可能的

如果存在此类问题的现有问题，我深表歉意，但如果存在，我无法使用 Google 或网站搜索找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:02:29.870

您可以使用`System.Threading.Timer`. 它不需要消息循环，因为它在线程池线程上“滴答”。这确实意味着您必须编组回 UI 线程来更新 UI。

# xforms - 日期选择器上的 xforms mindate

> ID：10179017
> 
> 赞同：2
> 
> 时间：2012-04-16T17:47:53.990
> 
> 标签：xforms, mindate

有人可以告诉我在日期时间字段中向日期选择器添加最小日期/时间的正确语法。这有效

```
<fr:date mindate="2012-05-05" ref="mydate"> 
```

这不

```
<fr:date mindate="current-date()" ref="mydate"> 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:15:46.227

如果值为静态，则只能在组件中`mindate`或组件中使用属性。如果值由 XPath 表达式确定，则需要使用带有属性的嵌套元素。因此，以下应该可以解决问题：`maxdate`[`fr:date`](http://wiki.orbeon.com/forms/doc/developer-guide/xbl-components#TOC-Date)`ref`

```
<fr:date ref="mydate">
    <fr:mindate ref="current-date()"/>
</fr:date> 
```

# similarity - 为什么 LogLikelihoodSimilarity 函数对于 0 和 1 的数据集返回大于 1.0 的值？

> ID：10179018
> 
> 赞同：3
> 
> 时间：2012-04-16T17:47:58.850
> 
> 标签：similarity, mahout, collaborative-filtering

我有一个表示为 1.0 的大型偏好数据集，我正在使用 Tanimoto Similarity 函数和 Generic Boolean User and Item Preference Recommenders。推荐值通常介于 0 和 1.0 之间。

许多来源，例如 Mahout in Action 书，以及[这个先前的 SO 线程](https://stackoverflow.com/questions/7529333/similarity-function-for-mahout-boolean-user-based-recommender)推荐 LogLikelihoodSimilarity 度量而不是 Tanimoto 用于布尔数据集。当我切换到 LogLikelihood Similarity 指标时，它产生了一些更高范围内的分数，例如 11。我不得不回到 Tanimoto 以获得更有意义的评级。您能否提出任何潜在的修复建议，还是我误解了推荐项目分数的返回值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:01:59.850

在没有评分的情况下，您观察到的值*不是*预测评分。毕竟都是1.0，不能用来做排名。结果实际上是相似性的总和，这就是它可以任意大的原因。它不应该在 [0,1] 或类似的地方。

# sql - SQL 表创建代码给出错误

> ID：10179020
> 
> 赞同：1
> 
> 时间：2012-04-16T17:48:12.923
> 
> 标签：sql

有人可以帮我看看这个吗，我似乎无法找到它为什么不起作用。

```
CREATE TABLE Person(
Person_ID int auto_increment NOT NULL,
Person_Type_ID int NOT NULL,
Create_Date datetime NOT NULL ,
Modify_Date datetime NOT NULL ,
First_Name varchar(50) NOT NULL,
Surname varchar(50) NOT NULL,
DOB date NOT NULL,
Gender char(1) NOT NULL CHECK (Gender ='f' OR Gender ='m'),
Archive char(1) NULL,
Allergies varchar(200) NOT NULL,
Dietry_Requirements varchar(200) NOT NULL,
Disabilities varchar(200) NOT NULL,
Medicine_Requirements varchar(200) NOT NULL,
    username varchar (30) NOT NULL,
password varchar (30) NOT NULL,
CONSTRAINT PK_Person_ID PRIMARY KEY (Person_ID)
CONSTRAINT FK_Person_Type_ID FOREIGN KEY (Person_Type_ID)
REFERENCES Person_Type (Person_Type_ID)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:49:39.570

你漏了一个逗号！这应该工作...

```
CREATE TABLE Person(
Person_ID int auto_increment NOT NULL,
Person_Type_ID int NOT NULL,
Create_Date datetime NOT NULL ,
Modify_Date datetime NOT NULL ,
First_Name varchar(50) NOT NULL,
Surname varchar(50) NOT NULL,
DOB date NOT NULL,
Gender char(1) NOT NULL CHECK (Gender ='f' OR Gender ='m'),
Archive char(1) NULL,
Allergies varchar(200) NOT NULL,
Dietry_Requirements varchar(200) NOT NULL,
Disabilities varchar(200) NOT NULL,
Medicine_Requirements varchar(200) NOT NULL,
username varchar (30) NOT NULL,
password varchar (30) NOT NULL,
CONSTRAINT PK_Person_ID PRIMARY KEY (Person_ID),
CONSTRAINT FK_Person_Type_ID FOREIGN KEY (Person_Type_ID)
REFERENCES Person_Type (Person_Type_ID)); 
```

# javascript - 清除两个标签之间

> ID：10179021
> 
> 赞同：0
> 
> 时间：2012-04-16T17:48:13.187
> 
> 标签：javascript, jquery, html

我需要清除标签之间`</form>`和`</body>`点击时的所有文本。
出现一些没有 id 的文本。

```
</form>
text text text
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T17:52:30.667

```
var pa=document.body;
  while(pa.lastChild.tagName!="FORM"){
  pa.removeChild(pa.lastChild);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:54:32.980

将外部元素的 html 替换为内部元素的 html：

```
<div id="div1">
    Outer
    <div id="div2">Inner</div>
    Outer
</div>

<div onclick="replace()">Clear</div>

<script type="text/javascript">
    function replace()
    {
        $("#div1").html( $("#div2").html() )
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:50:08.240

尝试这个：

```
</form>
<span id="mySpan" onclick="document.getElementById('mySpan').innerHTML = '';">text text text</span>
</body> 
```

# javascript - jquery 没有正确处理来自 twitter api 调用的 jsonp 数据

> ID：10179022
> 
> 赞同：1
> 
> 时间：2012-04-16T17:48:14.080
> 
> 标签：javascript, jquery, json, twitter

请参阅下面的代码，我正在尝试处理 twitter api 调用返回的错误。请记住 Jquery 不处理 jsonp 数据类型，因此超时，下面的代码显然会为不存在的 twitter ID 抛出错误。我想在我的 req.error 方法中捕获该错误并将其显示给用户。但显然，错误是隐藏的，并且确实出现在 console.log('Oh noes!'+msg.error); 这肯定与 jquery 处理 jsonp 类型数据有关。有没有人遇到过同样的情况？有什么解决办法吗？

```
 function findUserInfo(){

    var req = $.ajax({

    url: "https://twitter.com/users/show.json?id=neverexistID",
    dataType : "jsonp",
    timeout : 10000

    });

    req.success(function(msg) {
        console.log('Yes! Success!'+msg);

    });

    req.error(function(msg) {
        console.log('Oh noes!'+msg.error);
    });

            } 
```

答：jsonp调用很特殊，抛出的错误通常是隐藏的，这就是为什么我无法处理错误情况，下面的插件很好地处理了这种情况并解决了我的问题。

[jsonp 插件](http://code.google.com/p/jquery-jsonp)code.google.com/p/jquery-jsonp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:41:22.960

您的问题有一个解决方法，将您的 url 调用更改为：

```
url: "https://twitter.com/users/show.json?suppress_response_codes&id=neverexistID", 
```

来自 Twitter[文档](https://dev.twitter.com/docs/things-every-developer-should-know#parameters-have-certain-expectations)

> **suppress_response_codes**：如果存在此参数，则所有响应都将返回 200 OK 状态代码 - 甚至是错误。此参数的存在是为了适应在拦截所有非 200 响应的浏览器中运行的 Flash 和 JavaScript 应用程序。如果使用，那么客户端的工作就是通过解析响应正文来确定错误状态。请谨慎使用，因为这些错误消息可能会发生变化。

# php - PHP 邮件脚本换行符和特殊字符

> ID：10179026
> 
> 赞同：0
> 
> 时间：2012-04-16T17:48:45.293
> 
> 标签：php

我正在使用以下邮件脚本，但问题是它转换了一些字符。典型的邮件如下所示：

```
Neue Nachricht von Mustermann, Max (bla@blub.de):
Hallo Herr Platzhalter,&#13;&#10;wie soeben besprochen, würden wir gern ein
&#34;Schild&#34; mit der Aufschrift  &#34;Aufschrift&#34; bei Ihnen
bestellen.&#13;&#10;Bitte teilen Sie uns doch mit, wie wir da
verfahren müssen ... &#13;&#10;Ihnen einen schönen
Urlaub!&#13;&#10;Familie Mustermann 
```

我猜这 ($message = filter_var($_POST['message'], FILTER_SANITIZE_SPECIAL_CHARS);) 搞砸了。那么如何在不使其不安全的情况下进行更改呢？还有其他改进我应该添加到该脚本吗？

```
<?php
    //Enter your email here
    $your_email = "mymail";
    //Enter the subject of the mail here
    $subject = "Kontakt Webseite";

    $name = $_POST['name']; 
    $email = $_POST['email']; 
    //Filter HTML characters
    $message = filter_var($_POST['message'], FILTER_SANITIZE_SPECIAL_CHARS);

    $error = "Fehler: ";

    //Default message if unsuccessful and no other reason found
    $return_message = $error."Leider hat das Versenden der Nachricht nicht geklappt, bitte schreiben Sie mir direkt an  ".$your_email." eine E-Mail";
    if(strlen($name) > 0 && strlen($email) > 0 && strlen($message) > 0) {
        if(filter_var(filter_var($email, FILTER_VALIDATE_EMAIL), FILTER_SANITIZE_EMAIL)) {
            try {
                $body = "Neue Nachricht von ".$name." (".$email."):\n".$message;
                $header = "From: ".$email;
                mail($your_email, $subject, $body, $header);
                $return_message = "Die Nachricht wurde erfolgreich versendet, ich melde mich schnellst möglich bei Ihnen";
            }
            catch(Exception $e) { }
        } else {
            $return_message = $error."Ihre E-Mail Adresse scheint ungültig zu sein.";
        }
    } else {
        $return_message = $error."Ein oder mehrere Felder waren nicht ausgefüllt.";     
    }
    echo $return_message;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:09:06.423

斯洛昆提出了一个有效的观点。此外，由于电子邮件内容包含 HTML 实体并且似乎是另一种语言，因此最好将以下内容附加到电子邮件标题中，以确保通过接收电子邮件客户端正确呈现：

代替：

```
$header = "From: ".$email; 
```

和：

```
$header = "From: " . $email . "\r\n";
$header .= "Content-type: text/html; charset=utf-8" . "\r\n"; 
```

编辑：话虽如此，如果您在脚本中包含上述行，则无需删除清理 HTML 实体的行。您目前的问题是接收电子邮件客户端不会将电子邮件内容解释为 HTML 而是纯文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:03:53.357

它真正要做的唯一一件事是确保接收客户端可以正确处理它，并且无论如何都不能保证：P

在这种情况下，它会将您的特殊字符转换为 HTML 实体（例如`\n`-> `&#10`），这会破坏您的电子邮件，而无需进行大量工作来再次修复它们。摆脱过滤器，你应该很好。

# powershell - 如何在 PowerShell 中捕获信号？

> ID：10179032
> 
> 赞同：13
> 
> 时间：2012-04-16T17:49:04.320
> 
> 标签：powershell

这可能吗？我最终决定开始设置我的个人 .NET 开发环境，以更接近地模仿我设置 *NIX 开发环境的方式，这意味着认真学习 Powershell。

我目前正在编写一个通过文件系统递归的函数，设置工作目录以便构建东西。困扰我的一件小事是，如果我 Ctrl+C 退出该函数，它将让我离开脚本最后的位置。我尝试设置一个`trap`块，在运行时将 dir 更改为起点，但这似乎仅适用于（并触发）异常。

如果这是一种在 Unix 中有根的语言，我会为 设置一个信号处理程序`SIGINT`，但我在 Powershell 中找不到任何类似的搜索。戴上我的 .NET 帽子，我想象有某种事件可以附加一个处理程序，如果我不得不猜测，这将是一个事件`$host`，但我找不到任何规范文档`System.Management.Automation.Internal.Host.InternalHostUserInterface`，我能够搜索到的任何轶事都没有帮助。

也许我错过了一些完全明显的东西？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-16T18:55:56.170

你的意思是这样的吗？

```
try
{
    Push-Location
    Set-Location "blah"
    # Do some stuff here
}

finally
{
    Pop-Location
} 
```

请参阅此处的文档[。](http://technet.microsoft.com/en-us/library/dd315350.aspx)特别是那段：“*无论 Try 块是否遇到终止错误，Finally 块语句都会运行。Windows PowerShell 在脚本终止之前或在当前块超出范围之前运行 finally 块。即使您使用 CTRL，Finally 块也会运行+C 停止脚本。如果 Exit 关键字从 Catch 块中停止脚本，也会运行 finally 块。* "

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T19:11:06.830

这处理控制台记事板输入。如果在循环期间按下控制 C，您将有机会随心所欲地处理事件。在示例代码中，会打印一条警告并退出循环。

```
[console]::TreatControlCAsInput = $true
dir -Recurse -Path C:\ | % {
    # Process file system object here...
    Write-Host $_.FullName

    # Check if ctrl+C was pressed and quit if so.
    if ([console]::KeyAvailable) {
        $key = [system.console]::readkey($true)
        if (($key.modifiers -band [consolemodifiers]"control") -and ($key.key -eq "C")) {
            Write-Warning "Quitting, user pressed control C..."
            break
        }
    } 
```

# python - 如何从多维（深度未知）python字典中递归删除某些键？

> ID：10179033
> 
> 赞同：5
> 
> 时间：2012-04-16T17:49:10.397
> 
> 标签：python

我在我的一个项目中使用 kendoUI Grid。我使用他们的 api 检索了一段数据，发现它在我的 json/dictionary 中添加了一些“不需要的”数据。将 json 传递回我的 Pyramid 后端后，我需要删除这些键。问题是，字典可以是任何深度，而我事先不知道深度。

例子：

```
product = {
    id: "PR_12"
    name: "Blue shirt",
    description: "Flowery shirt for boys above 2 years old",
    _event: {<some unwanted data here>},
    length: <some unwanted data>,
    items: [{_event: {<some rubbish data>}, length: <more rubbish>, price: 23.30, quantity: 34, color: "Red", size: "Large"}, {_event: {<some more rubbish data>}, length: <even more rubbish>, price: 34.50, quantity: 20, color: "Blue", size: "Large"} ....]
} 
```

我想特别删除两个键：“_event”和“length”。我尝试编写一个递归函数来删除数据，但我似乎无法正确处理。有人可以帮忙吗？

这是我所拥有的：

```
def remove_specific_key(the_dict, rubbish):
  for key in the_dict:
    if key == rubbish:
      the_dict.pop(key)
    else:
      # check for rubbish in sub dict
      if isinstance(the_dict[key], dict):
        remove_specific_key(the_dict[key], rubbish)

      # check for existence of rubbish in lists
      elif isinstance(the_dict[key], list):
        for item in the_dict[key]:
          if item == rubbish:
            the_dict[key].remove(item)
   return the_dict 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T18:10:03.690

如果您允许`remove_specific_key`（重命名`remove_keys`）接受任何对象作为其第一个参数，那么您可以简化代码：

```
def remove_keys(obj, rubbish):
    if isinstance(obj, dict):
        obj = {
            key: remove_keys(value, rubbish) 
            for key, value in obj.iteritems()
            if key not in rubbish}
    elif isinstance(obj, list):
        obj = [remove_keys(item, rubbish)
                  for item in obj
                  if item not in rubbish]
    return obj 
```

由于您希望删除多个键，因此您不妨`rubbish`设置为一组而不是一个特定的键。使用上面的代码，您将删除 '_event' 和 'length' 键

```
product = remove_keys(product, set(['_event', 'length'])) 
```

* * *

编辑：`remove_key`使用[dict comprehension](http://www.python.org/dev/peps/pep-0274/)，在 Python2.7 中引入。对于旧版本的 Python，等价于

```
 obj = dict((key, remove_keys(value, rubbish))
               for key, value in obj.iteritems()
               if key not in rubbish) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T17:56:12.303

在迭代时修改 dict，这是不必要的，因为您确切知道要查找的密钥。此外，您的 dicts 列表没有得到正确处理：

```
def remove_specific_key(the_dict, rubbish):
    if rubbish in the_dict:
        del the_dict[rubbish]
    for key, value in the_dict.items():
        # check for rubbish in sub dict
        if isinstance(value, dict):
            remove_specific_key(value, rubbish)

        # check for existence of rubbish in lists
        elif isinstance(value, list):
            for item in value:
                if isinstance(item, dict):
                    remove_specific_key(item, rubbish) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:09:09.473

迭代时不能删除dict或list，所以用测试函数替换迭代器。

```
def remove_specific_key(the_dict, rubbish):
    if the_dict.has_key(rubbish):
        the_dict.pop(rubbish)
    else:
        for key in the_dict:
            if isinstance(the_dict[key], dict):
                remove_specific_key(the_dict[key], rubbish)
            elif isinstance(the_dict[key], list):
                if the_dict[key].count(rubbish):
                    the_dict[key].remove(rubbish)
    return the_dict

d = {"a": {"aa": "foobar"}}
remove_specific_key(d, "aa")
print d

d = {"a": ["aa", "foobar"]}
remove_specific_key(d, "aa")
print d 
```

# c++ - 非中断 I/O 的最佳实践

> ID：10179037
> 
> 赞同：2
> 
> 时间：2012-04-16T17:49:36.103
> 
> 标签：c++, multithreading, logging, qt4, qtconcurrent

我有一个正在使用的小应用程序，它需要生成一个非常详细的日志。我已经实现了一个简单的单例 Logger 类，它看起来像这样

```
#ifndef LOGGER_H
#define LOGGER_H

#include <QObject>
#include <QMutex>
#include <QFile>

class Logger : public QObject
{
    Q_OBJECT
public:
    static Logger* sharedInstance()
    {
        static QMutex mutex;

        if (!m_sharedInstance)
        {
            mutex.lock();

            if(!m_sharedInstance)
                m_sharedInstance = new Logger;

            mutex.unlock();
        }

        return m_sharedInstance;
    }

    static void dropInstance()
    {
        static QMutex mutex;
        mutex.lock();
        delete m_sharedInstance;
        m_sharedInstance = 0;
        mutex.unlock();
    }

    void setLogFilePathAndOpen(QString path);
    void logMessage(QString message);
    void logMessageWorker(QString message);
    void closeLog();

private:
    Logger() {}

    Logger(const Logger &);
    Logger& operator=(const Logger &);

    static Logger *m_sharedInstance;

    QFile m_logFile;

signals:

public slots:

};

#endif // LOGGER_H

#include <QDateTime>
#include <QtConcurrentRun>

#include "logger.h"

Logger* Logger::m_sharedInstance = 0;

void Logger::setLogFilePathAndOpen(QString path)
{
    m_logFile.setFileName(path);
    m_logFile.open(QIODevice::Append | QIODevice::Text);
}

void Logger::logMessage(QString message)
{
    //TODO calling QtConcurrent causes about a 22% drop in performance. Look at other ways to do this.
    QtConcurrent::run(this, &Logger::logMessageWorker, message);
}

void Logger::logMessageWorker(QString message)
{
    QTextStream out(&m_logFile);
    out << tr("%1: %2\n").arg(QDateTime::currentDateTime().toString()).arg(message);
}

void Logger::closeLog()
{
    m_logFile.close();
} 
```

现在我对 Qt 和 C++ 有点陌生，也许这都是错误的，所以对我来说放轻松:)。现在我得到了大约 22% 的性能下降，与不记录相比，使用这种方法是我能够管理的最好的方法。我想性能影响来自创建 QtConcurrent 线程。

我想我的问题是，这将是最好的方法还是有更好的方法来实现它，这将使性能更接近根本不记录。我知道无论应用程序的日志记录会变慢，但我正在尝试尽可能减少这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:29:02.033

由于您愿意忍受异步日志记录，因此您通常希望日志记录在单个线程中完成，并有一个线程安全的队列向其提供数据。周围有很多线程安全队列，例如我在上一个[答案](https://stackoverflow.com/a/3054795/179910)中发布的一个。您（显然）想使用 Qt 原语重写它，但我相信这足够相似，重写将*主要*是更改您使用的名称。

从那里开始，日志记录变得相当简单。日志线程只是从队列中检索数据，将其写入日志，然后重复。由于日志线程是唯一直接接触日志的线程，它根本不需要做任何锁定——它本质上是单线程代码，所有的锁定都在队列中处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:18:35.723

有两种方法可以解决这个问题：

1.  重用现有的日志框架，或者至少窃取它的想法。
2.  停止记录这么多（但你仍然应该做 1。）

* * *

最佳实践？

通常，您应该将日志排队到由工作线程出队的队列中。有许多可能的实现（无锁队列、池队列等），不过没关系，只要选择一个，你就会得到很好的性能。

当然，简单地重用现有框架会好得多。您是否查看过 Boost.Log 或 Pantheios ？

* * *

另一件需要注意的事情是你不应该记录太多。日志在应用程序中通常很少见。

*   对于调试运行，您可以`assert`在出现问题时自由地获得完整的核心转储，更有帮助
*   对于发布运行，您可以使用条件日志记录仅在存在异常时记录

条件日志记录技巧可能有点违反直觉。这个想法是使用对象的析构函数来实际记录，并且仅当`std::uncaught_exception()`返回时`true`。当然，这意味着此日志记录应该是无异常的，因此除非您对自己的编程技能非常有信心，否则我建议您预先格式化消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:53:47.340

我正在使用 qDebug、qWarning 等进行日志记录。然后，以这种方式将事件消息重定向到日志文件：

```
...
qInstallMsgHandler(messageHandler);
...

#define LOG_FILE "path/to/file.log"

void messageHandler(QtMsgType type, const char *msg)
{
#define NOW QDateTime::currentDateTime().toString("MM:dd: hh:mm:ss")
  QString out;
  switch (type) {
  case QtDebugMsg:    out = QString("%1: %2\n").arg(NOW).arg(msg); break;
  case QtWarningMsg:  out = QString("%1: warning: %2\n").arg(NOW).arg(msg); break;
  case QtCriticalMsg: out = QString("%1: critical: %2\n").arg(NOW).arg(msg); break;
  case QtFatalMsg:    out = QString("%1: fatal: %2\n").arg(NOW).arg(msg); break;
  default: return;
  }

  QFile file(LOG_FILE);
  if (file.open(QIODevice::WriteOnly | QIODevice::Append))
    QTextStream(&file) << out;
#undef NOW
} 
```

这种方法是线程安全的，尽管它不是最有效的方法，因为文件 IO 没有被缓存。

# jquery - jQuery 对话框打开并在 3 秒后自动关闭

> ID：10179040
> 
> 赞同：9
> 
> 时间：2012-04-16T17:49:44.850
> 
> 标签：jquery, jquery-ui, dialog

我正在尝试打开一个没有按钮的 jQuery 对话框来显示一些动画，然后自动在那里停留 3 秒钟，然后关闭。这是我认为应该起作用的 jsfiddle，但正如您所见，它只是打开和关闭而无需等待 3 秒：

jsfiddle：http: [//jsfiddle.net/WrdM9/1/](http://jsfiddle.net/WrdM9/1/)

有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-16T17:52:09.057

你应该使用[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)：

```
open: function(event, ui) {
    setTimeout(function(){
        $('#dialog').dialog('close');                
    }, 3000);
} 
```

这是小提琴：http: [//jsfiddle.net/WrdM9/2/](http://jsfiddle.net/WrdM9/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-24T23:10:18.007

使用 jQuery 延迟函数，例如

```
$( "#your-modal-id" ).slideDown( 300 ).delay( 800 ).slideUp( 400 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-04T16:27:54.273

如果您还想添加一些过渡，我不推荐使用 jQuery slideUp 和 slideDown 动画。这些很慢，因为它使用 CPU 而不是 GPU，而且动画本身感觉并不完全*正确*。

我会推荐[Velocity.js](http://julian.com/research/velocity/)。记得还要添加 Velocity UI js。你可以这样做：

```
$( "#your-modal-id" ).velocity('transition.slideUpBigOut', { delay: 3000 }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-13T00:38:54.200

以下是仅使用 jQuery、CSS 和 JavaScript 并重复使用定时弹出窗口的方法，每次都带有不同的消息。此外，此示例不仅关闭，而且逐渐关闭。

首先，创建一个样式来移除标题栏。如果您愿意，您还可以为警报框添加样式。

```
<style>
.noTitleStuff .ui-dialog-titlebar {display:none;}
</style> 
```

接下来，定义一个模态对话框。不要忘记在您的页面中包含 jQuery。请注意，如果未定义按钮，则下方的按钮区域将自动不显示。您还可以选择添加打开和关闭功能。

```
<script type="text/javascript">
//-- dialog-form0 - Modal Alert --//
$( ".dialog-form0" ).dialog({
    autoOpen: false,
    height: 50,
    width: 600,
    modal: true,
    dialogClass: 'noTitleStuff',
    buttons: {
    },
    open: function() {
    },
    close: function() {
    }
});
</script> 
```

现在创建一个 div 用作弹出窗口...

```
<!-- Popup0 for alert -->
<div id="popup0" class="dialog-form0" title="">
    <div id="alert0"></div>
</div><!--// popup0 --> 
```

最后，只要您想使用定时“警报框”（实际上是无边界模式弹出窗口），请包含以下代码块。

```
<script type="text/javascript">
$(function(){
    $("#clientcustomer").on("change", function(event){
        event.preventDefault();
        document.getElementById('alert0').innerHTML = "Here's an alert message...";
        $( ".dialog-form0" ).dialog( "open" );
        setTimeout(function(){
            $("#popup0" ).fadeOut(1000, function () { });   //This is the fade time
            setTimeout(function(){
                $( ".dialog-form0" ).dialog( "close" )
            },850); // set the time here for close delay
            //$( ".dialog-form0" ).dialog( fadeOut(2000) );
        },500); // set the time here for how long to display
    });
});
</script> 
```

你的关闭延迟时间应该是淡入淡出时间的 80% 到 90%。如果相同，您会在关闭和消失之前看到一个空的小矩形。你想要的是在模态框改变大小之前淡出文本但关闭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-04T08:11:49.647

```
setTimeout(function() {
    $('#bkgOverlay').fadeOut(400);
}, 6000); 
```

# extjs - ExtJS 4：可编辑网格中的 Excel 样式键盘导航

> ID：10179047
> 
> 赞同：4
> 
> 时间：2012-04-16T17:50:16.510
> 
> 标签：extjs, datagrid, extjs4

使用 ExtJS 4 我想创建一个网格，用户将在其中输入一长串数字。我希望用户能够通过按“Enter”完成对一个单元格的编辑，然后自动移动到下面的单元格并开始编辑。

Ext.grid.plugin.CellEditing 似乎可以很好地用于编辑，但我找不到检测和处理 keyUp 事件的方法。

我尝试使用带有以下代码的“编辑”事件来解决这个问题：

```
selType: 'cellmodel',
plugins: [
    Ext.create('Ext.grid.plugin.CellEditing', {
        clicksToEdit: 1,
        listeners: {
            edit: function (editor, e, eOpts) {
                // If the event is fired by pressing "Enter", the column and row associated with event will
                // be the same as the currently selected row and column

                if (e.grid.selModel.position.column == e.colIdx && e.grid.selModel.position.row == e.rowIdx){

                    // Check if we are in the final row
                    if (e.rowIdx+1 == e.grid.getStore().getTotalCount()){
                        return true;
                    }

                    editor.startEditByPosition({row: e.rowIdx+1, column: e.colIdx});
                    return false;
                }
            }
        }
    })
], 
```

这种方法的问题在于，如果用户开始编辑单元格，然后单击 Grid 外部的 GUI 元素，则编辑事件无法将其与按下的“Enter”键区分开来。这可以解决吗？

也许我应该尝试实现自定义 SelectionModel ？如何开始使用这种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T05:20:00.210

像[这样](http://jsfiddle.net/mohammad_erdin/sDFfY/)的东西？？？
编辑时尝试使用`tab`, `shift + tab`, `enter`, 和`shift + enter`

我所做的是覆盖`cellediting`and`selection.rowmodel`

实际上，我和你有过类似的[问题](https://stackoverflow.com/q/7805380/495571)。和@Lionel Chan 帮我解决它。
我上面的解决方案是基于他的想法。

注意：仅适用于 Extjs 4.0.7

* * *

编辑（如果我的 jsfiddle 坏了，这里是覆盖）

```
Ext.override(Ext.grid.plugin.CellEditing,{
    onSpecialKey: function(ed, field, e) {
        var grid = this.grid,sm;
        if (e.getKey() === e.TAB) {
            e.stopEvent();
            sm = grid.getSelectionModel();
            if (sm.onEditorTab)sm.onEditorTab(this, e);
        }else if(e.getKey() === e.ENTER){
            e.stopEvent();
            sm = grid.getSelectionModel();
            if (sm.onEditorEnter)sm.onEditorEnter(this, e);
        }
    }
});

Ext.override(Ext.selection.RowModel, {
    lastId:null,
    onEditorTab: function(ep, e) {
        var me = this,
            view = me.view,
            record = ep.getActiveRecord(),
            header = ep.getActiveColumn(),
            position = view.getPosition(record, header),
            direction = e.shiftKey ? 'left' : 'right',
            newPosition = view.walkCells(position, direction, e, false),
            newId=newPosition.row,
            grid=view.up('gridpanel');

        if (me.lastId!=newId && me.lastId!=null){
            deltaX = me.lastId<newId? -Infinity : Infinity;
            header=grid.headerCt.getHeaderAtIndex(newPosition.column);
            if(header){
                while(!header.getEditor()){
                    newPosition= view.walkCells(newPosition,direction, e, false);
                    header=grid.headerCt.getHeaderAtIndex(newPosition.column);
                }
            }
        }else{
            deltaX = ep.context.column.width * (direction== 'right' ? 1 : -1);
        }
        grid.scrollByDeltaX(deltaX);
        me.lastId=newPosition.row;
        Ext.defer(function(){
            if (newPosition)ep.startEditByPosition(newPosition);
            else ep.completeEdit();
        }, 100);
    },
    onEditorEnter:function(ep,e){
        var me = this,
            view = me.view,
            record = ep.getActiveRecord(),
            header = ep.getActiveColumn(),
            position = view.getPosition(record, header),
            direction = e.shiftKey ? 'up' : 'down',
            newPosition = view.walkCells(position, direction, e, false),
            newId=newPosition.row,
            grid=view.up('gridpanel');

        deltaY=20 * (direction== 'down' ? 1 : -1);
        grid.scrollByDeltaY(deltaY);
        me.lastId=newPosition.row;
        Ext.defer(function(){
            if (newPosition)ep.startEditByPosition(newPosition);
            else ep.completeEdit();
        }, 100);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-22T10:58:53.620

从*“Warung Nasi 49* ”的建议开始，我写了这个覆盖：

```
Ext.define('Override.Ext.grid.plugin.CellEditing',
{
    override: 'Ext.grid.plugin.CellEditing',
    onSpecialKey: function (ed, field, e) {
        var grid = this.grid,
            nbCols = grid.columns.length - 1, //start from 0
            nbRows = grid.getStore().getTotalCount() - 1, //start from 0
            currentCol = this.context.colIdx,
            currentRow = this.context.rowIdx;

        //forward
        if (!e.shiftKey && (e.getKey() === e.ENTER || e.getKey() === e.TAB)) {
            e.stopEvent();

            //Detect next editable cell
            do {
                if (this.startEdit(currentRow, currentCol + 1))
                    break;
                else {
                    currentCol++;
                    if (currentCol >= nbCols) {
                        currentRow++;
                        currentCol = -1;
                    }
                }
            } while (currentRow <= nbRows);
        }
        //backward
        if (e.shiftKey && (e.getKey() === e.ENTER || e.getKey() === e.TAB)) {
            e.stopEvent();

            //Detect previous editable cell
            do {
                if (this.startEdit(currentRow, currentCol - 1))
                    break;
                else {
                    currentCol--;
                    if (currentCol < 0) {
                        currentRow--;
                        currentCol = nbCols+1;
                    }
                }
            } while (currentRow >=0);
        }
    }
},
null); 
```

此覆盖允许 TAB 和 ENTER 导航（通过 SHIFT 向前/向后）。

当到达行的最后一个单元格时，将聚焦下一行的第一个可编辑单元格。

# design-patterns - 实现访客设计模式

> ID：10179049
> 
> 赞同：0
> 
> 时间：2012-04-16T17:50:18.953
> 
> 标签：design-patterns

如何在不重新编译层次结构的情况下将成员添加到类层次结构中？假设层次结构是

```
LandTransport extends Transport
Car extends LandTransport 
```

我们需要向`GetCapacity`层次结构添加方法。如何使用访问者模式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:00:00.910

您的接口是在编译时定义的，因此它在运行时是固定的。但是您可以通过运行时多态性向具有访问者模式的现有类添加功能。

只需创建两个接口，一个是可访问的，第二个是访问者，将访问者传递给可访问对象并在内部计算 GetCapacity 逻辑。

例子

```
class myClass;

class visitor {
virtual void handle(myClass cl);

}

class iVisitable {
 virtual void visit(visitor& v);
}

class myClass : public iVisitable{
  void visit(visitor& v){
   v.handle(this);
}
}

//Put getCapacity logic here and pass it to myClass
class getCapacityVisitor : iVisitor { } ... 
```

# html - 大文件的更快替代方案：pdflib 或princexml？

> ID：10179051
> 
> 赞同：1
> 
> 时间：2012-04-16T17:50:24.723
> 
> 标签：html, performance, pdf, pdflib, princexml

在 pdf 生成速度方面，我对 pdflib 有一些很好的经验，即使对于大文件也是如此。我期望princexml 的速度与pdflib 相同，因为它们都在我的linux 服务器上本地运行（它们不仅仅是php 类）。生成包含文本和图形的 1 页 pdf 时，我在日志文件中看到开始和加载文档之间有 4 秒的时间间隔？这是正常的吗？转换本身似乎并不长......

```
Mon Apr 16 19:17:30 2012: ---- begin
Mon Apr 16 19:17:34 2012: Loading document...
Mon Apr 16 19:17:34 2012: Converting document...
Mon Apr 16 19:17:34 2012: finished: success
Mon Apr 16 19:17:34 2012: ---- end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:01:01.920

您的设置中是否涉及网络连接？是否涉及 DNS 名称解析？如果是，请尝试使用 IP 地址而不是主机名，然后重试...

# jquery - 如何判断成功 $.ajax() 的返回数据是 html 还是 json？

> ID：10179060
> 
> 赞同：5
> 
> 时间：2012-04-16T17:50:51.770
> 
> 标签：jquery

我有一个通过 jQuery `.ajax()`POST 提交到服务器的表单。如果表单通过了服务器端的验证，服务器将返回 HTML 格式的结果，以便客户端相应地更新其表示。但是，如果表单验证失败，服务器将以 JSON 格式返回结果，其中包含验证错误。

两种类型的结果都会`success`在`.ajax()`. 由于这两种类型都是可能的，因此处理程序需要一种方法来确定结果是 HTML 还是 JSON。我怎样才能做到这一点？

注意：从表面上看，我的问题看起来与[这个现有的 SO 问题](https://stackoverflow.com/questions/7288136/javascript-how-to-tell-whether-ajax-response-is-json)相同，但它们并不相同。在那个问题中，只有一种可能的数据类型（HTML**或**JSON），而我的问题是寻找一种方法来处理两种可能的数据类型（HTML**和**JSON）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:54:21.957

如果您将`dataType`参数留空，jQuery 将根据 MIME 类型确定：

> 数据类型字符串
> 
> 默认值：智能猜测（xml、json、脚本或 html）
> 
> 您期望从服务器返回的数据类型。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它

参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T18:03:37.060

对于 json 数据，`typeof(data)`将为`object`. 对于 html 数据，它将是`string`.

至少对于从 ASP.NET MVC3 操作返回的数据，它可以工作。我假设是 mime 类型决定了 jquery 如何处理返回的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T17:59:43.170

~~如果您 100% 确定您提供给 jQuery 的数据没有恶意 XSS 攻击，那么您可以使用 JavaScript 的`eval()`方法来发挥您的优势。~~

感谢[@SLaks](https://stackoverflow.com/users/34397/slaks)提出换掉我用过 的讨厌[的建议。](https://stackoverflow.com/users/34397/slaks)`eval()`

您可以使用`$.parseJSON`将原始文本字符串转换为 JSON 对象

```
function ajaxResponse(raw_data){
  try{
    // eval("var response="+raw_data); // try and avoid this if possible
    var response = $.parseJSON(raw_data);
    if (response){
      // We have a JSON inside the 'response' variable!
    }
  } catch(e){
    // We do not have a JSON.
    // Probably HTML content.
    // Might be a malformed JSON.
  }
} 
```

如代码中所述，请注意，如果您传递格式错误的 JSON 对象，那么您的回调会将其视为 HTML。

请注意，`dataType`您的调用指定的`$.ajax()`必须是`text`jQuery 不会尝试为您解析它。

* * *

我们都喜欢让我们的生活更轻松的替代方案 - 这里有一个适合您的情况。
为什么不**总是**返回 JSON 对象？可能是这样的：

```
{"err":"","html":"<div>foobar<\/div>"} 
```

对于错误：

```
{"err":"1","message":"You did not foo all of your bars yet!"} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T18:04:13.187

使用 typeof，它将报告您处理的数据类型。

[小提琴](http://jsfiddle.net/adeneo/8VWq8/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T20:14:51.873

为什么不只使用 JSON 来返回 HTML 呢？

我通常做的是像这样设置我返回的 JSON 对象：

```
{
  //s=status, d=data
  "s":0, //0 means success, other numbers are for different errors
  "d":{ /* Other JSON object or string here */ }
} 
```

所以，在你的情况下，你会做这样的事情（伪）：

```
if (StuffIsValid()) {
    ResponseWrite('{"s":0,"d":"<html>html code here</html>"}');
} else {
    ResponseWrite('{"s":1,"d":{"errlist":["err1","err2"]}}');
} 
```

当然，您希望使用内置 JSON 库作为您选择的服务器端语言，而不是使用字符串。

然后，在您的 jQuery`success`回调中，我会检查 s 的值。

```
$.ajax({
    url: 'url',
    dataType: 'json',
    success: function(data) {
        if (data) {
            //We have a JSON object
            if (data.s === 0) {
                //Success!
                //Do stuff with data.d as a string
            } else if (data.s === 1) {
                //Failed validation
                //Do stuff with data.d as an object
            } else {
                //How did this happen?
            }
        } else {
            //Uh oh, no object, user must have been logged out (or something)
        }
    }); 
```

如果用户必须登录才能访问您发布到的页面，这将特别有用，因为您可以发现返回的数据不是 JSON 对象这一事实。

# javascript - jQuery.Callbacks - 移除匿名函数回调

> ID：10179063
> 
> 赞同：1
> 
> 时间：2012-04-16T17:51:05.047
> 
> 标签：javascript, jquery, callback

在 $.Callbacks() 中添加回调函数后，我想再次删除它：

```
var callbacks = $.Callbacks(),
    foo = function() { console.log('Hello world') };

callbacks.add(foo);
callbacks.fire(); // logs 'Hello world'
callbacks.remove(foo);
callbacks.fire(); // nothing to trigger, removed perfectly 
```

**所以，这行得通**，但现在我想添加一个匿名函数，如下所示：

```
callbacks.add(function(){ console.log('Hello anonymous world') });
callbacks.fire(); // logs 'Hello anonymous world' 
```

看起来不错，**但我不能再删除该功能**：

```
callbacks.remove(function(){ console.log('Hello anonymous world') });
callbacks.remove();

callbacks.fire(); // still logs 'Hello anonymous world' 
```

**有没有办法克服这个问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:34:20.347

根据 OP 请求：

函数由指针标识。你没有指向你的匿名函数的指针，所以你没有任何东西可以传递给 remove() 来告诉它要删除哪个函数。简单地传递一个重复的函数是行不通的，因为重复的有一个不同的指针。您需要坚持将函数分配给变量，然后将该变量传递给 remove()。

参考：[http ://api.jquery.com/category/callbacks-object/](http://api.jquery.com/category/callbacks-object/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T23:15:48.770

您可以使用 arguments.callee （对自身的引用）将其从函数本身（如函数的最后一行）中删除，尽管 arguments.callee 在“严格模式”下无效。

# javascript - 通过 javascript 与新创建的 html 交互

> ID：10179064
> 
> 赞同：4
> 
> 时间：2012-04-16T17:51:09.513
> 
> 标签：javascript, html, innerhtml

我想从 javascript 添加一个新的 div 到我现有的 html 页面。通常我使用指令 document.createElement("div") 执行此操作，并使用方法 div.innerHTML = "" 填充此 div（例如）。这在大多数情况下都可以正常工作，但现在我想在我的 div 中添加一个选择列表并用一些数据填充这个列表。此方法不起作用：

```
function initEdit(){
     addPanel = document.createElement("div");
     addPanel.innerHTML = "<form id='addProperty' method='get'> <table>" +
                                "<tr> <td> <select size='4' style='width:140px; height:200px' id='object_property_selection' onClick='unSelect(\"data_property_selection\")'> </td>" +
                                     "<td> <select size='4' style='width:140px; height:200px' id='object_selection'>" +
                                          "<textarea style='width:140px; height:200px; display:none' id='data_selection' /> </td> </tr>" +
                                "<tr> <td> <select size='4' style='width:140px; height:100px' id='data_property_selection' onClick='unSelect(\"object_property_selection\")'> </td>" +
                                     "<td> </td> </tr>" +
                                "<tr> <td colspan=2> <input type='button' name='Submit' style='width:100%' onClick='submitProperty()' /> </td> </tr>" +
                            "</table> </form>";

    $('body').jAlert(contents, 'info', offset);
    list1.forEach(function(element, id){
        var option = document.createElement("OPTION");
        option.text = option.value = property;
        form.data_property_selection.options.add(element);
    })
} 
```

有谁知道如何解决这个问题？（顺便说一句：我不能在页面开头设置这个html代码，因为这是一个[jAlert](http://www.smooka.com/blog/2009/02/22/jalert-jquery-alert-box-plugin/) div的内容）

**更新：解决方案**

```
properties1.concat(properties2).forEach(function(property, id){
    if (id < object_properties.length) propertyList1 += "<option value='" + property + "'>" + property + "</option>";
    else propertyList2 += "<option value='" + property + "'>" + property + "</option>";
})
objects.forEach(function(feature, id) {
    objectList += "<option value='" + feature._id + "'>" + feature.name + "</option>";
})

propertyList = "<form id='addProperty' method='get'> <table>" +
                            "<tr> <td> <select size='4' style='width:140px; height:200px' id='object_property_selection' onClick='unSelect(\"data_property_selection\")'>" +
                                       propertyList1 + "</select> </td>" +
                                 "<td> <select size='4' style='width:140px; height:200px' id='object_selection'>" +
                                       objectList + "</select> </td>" +
                                      "<textarea style='width:140px; height:200px; display:none' id='data_selection' /> </td> </tr>" +
                            "<tr> <td> <select size='4' style='width:140px; height:100px' id='data_property_selection' onClick='unSelect(\"object_property_selection\")'>" +
                                       propertyList2 + "</select> </td>" +
                                 "<td> </td> </tr>" +
                            "<tr> <td colspan=2> <input type='button' name='Submit' style='width:100%' onClick='submitProperty()' /> </td> </tr>" +
                        "</table> </form>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:59:50.227

据我所知，用这种方法实现你想要的是不可能的。而不是使用`innerHTML`，您应该做很长的路，用 createElement 创建所有内部标签，并将它们作为子标签附加。使用 jQuery 可以使这项工作*变得*容易得多。

下面是一个如何使用 jQuery 进行操作的示例：[link](http://www.tutorialspoint.com/jquery/jquery-dom.htm)和[官方 API](http://api.jquery.com/category/manipulation/)。

或者，如果您可以先创建内部列表，则只需创建它并将其连接为字符串作为其中的一部分`innerHTML`（首先创建列表，然后编辑`innerHTML`）。

# java - 节奏模板引擎自定义标签加载

> ID：10179066
> 
> 赞同：1
> 
> 时间：2012-04-16T17:51:37.097
> 
> 标签：java, web, template-engine, rythm

我有我想从父模板（index.html）调用的自定义节奏模板标签（sayHi.html）：

**在 sayHi.html 中：**

```
Hi there! 
```

**在 index.html 中：**

```
<html>
    <head></head>
    <body>@sayHi()</body>
</html> 
```

我发现 Rythm 模板引擎 (v0.9) 的默认行为是它尝试在当前应用程序文件夹中查找自定义模板文件。因此，如果我在 Tomcat 中运行 Web 项目，则路径将是 /TOMCAT_HOME/bin/sayHi.html

我如何告诉 Rythm 从另一个路径（例如 /WEB-INF/tags）加载自定义标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:15:41.567

您可以要求`Rythm`从任何地方加载标签：

```
Rythm.engine.loadTags(new File("/WEB-INF/tags")); 
```

[在此处](https://github.com/greenlaw110/Rythm/blob/master/src/main/java/com/greenlaw110/rythm/RythmEngine.java#L288)查看源代码

您也可以初始化`Rythm.engine`（或`RythmEngine`自己管理的实例）：

```
Properties conf = new Properties();
conf.put("rythm.tag.root", "/WEB-INF/tags");
Rythm.engine.init(properties); // use Rythm managed engine instance
myEngine = new RythmEngine(conf); // manage rythm engine instance by yourself 
```

笔记

1.  请注意[这个](https://github.com/greenlaw110/Rythm/issues/20)问题，因为您没有在游戏中使用它
2.  [请从rythm 网站](http://rythmengine.com)下载最新的分发包
3.  节奏文档不是最新的。但是，您可以从 Play-Rythm 文档中获得一些新信息：
    *   [版本历史](https://github.com/greenlaw110/play-rythm/blob/master/documentation/manual/history.textile)
    *   [参考](https://github.com/greenlaw110/play-rythm/blob/master/documentation/manual/reference.textile)

**更新**

Rythm 已弃用标签概念，因为现在您可以将任何模板称为“标签”。请参阅[http://rythmengine.org/doc/template_guide.md#invoke_template](http://rythmengine.org/doc/template_guide.md#invoke_template)

# javascript - 使用 javascript 获取 PHP 变量？

> ID：10179067
> 
> 赞同：0
> 
> 时间：2012-04-16T17:51:37.360
> 
> 标签：javascript, node.js

我有一个在 HTML5 画布中运行的 Javascript 游戏。现在我想将一个存储在 PHP 对象中的变量传递给我的程序。我想要的是我的 js 中的一个函数，比如`getVariable = function(){script that gets the variable from PHP and returns it as a string}`

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T23:26:56.470

@Valentin - 只需使用 javascript ajax 调用（如果您愿意，也可以使用 jquery 调用）从 php 脚本中获取值。如果您的游戏对不同的玩家有不同的值，您可以启动一个会话并在多次调用脚本时保留这些值。例如 -

假设您想从 player.php 中获取玩家的健康状况，看起来像

```
 session_start();//start the session
 if(!isset($_SESSION['health']))
    $_SESSION['health'] = $var;//If there is no value for player health in the session
                               //initialize the default value
 switch($_GET['x']){
 case 'health' :
        echo $_SESSION['health'];
        break;
 default       :
        echo $var;
        break;
 }
?> 
```

相应的纯javascript将是-

```
var health;
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  } 
    xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    health=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","player.php?x=health",true);
xmlhttp.send(); 
```

你可以使用很棒的 jQuery 以更简单的方式做同样的事情 -

```
var health;
var reqData=["x" : "health"];
var xhrObj = $.get("player.php",x)
    .done(function( response ) { 
      health=response;//The echo text from server
    })
    .fail(function() {
      alert('error'); 
    }); 
```

您可以在此处了解有关 jquery 和 ajax 的更多信息 -->

[jQuery API](http://api.jquery.com/jQuery.get/)

www.w3schools.com/ajax/用于 ajax 教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:56:43.703

Javascript 和浏览器并不关心你在服务器上使用什么语言来生成 HTML/JS，他们只关心最终生成了什么。

做你想做的事，你有两种方法：

1.  最初生成变量时，将变量的内容打印到页面。
2.  对服务器上的脚本使用 AJAX 调用来回显该值，然后在 JavaScript 中对其进行解析。但是，如果这样做，则必须使用会话或数据库，或其他在页面之间保持状态的方法。

# java - 从网络解析 xml 时出现“文件过早结束”

> ID：10179068
> 
> 赞同：1
> 
> 时间：2012-04-16T17:51:37.603
> 
> 标签：java, xml-parsing, sax

当我尝试以这种方式从网络解析 XML 文件时：

```
URL url = new URL("http://www.nbp.pl/kursy/xml/a074z120416.xml");
URLConnection uc = url.openConnection();
saxParser.parse(uc.getInputStream(), handler); 
```

文件异常的过早结束正在抛出。

堆栈跟踪：

```
org.xml.sax.SAXParseException: Premature end of file.
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at javax.xml.parsers.SAXParser.parse(Unknown Source)
at javax.xml.parsers.SAXParser.parse(Unknown Source)
at com.pmajcher.xmltest.ReadXMLFile.main(ReadXMLFile.java:142) 
```

但是当我第一次将该 xml 保存到本地文件，然后尝试解析它时，一切正常。

```
URL url = new URL("http://www.nbp.pl/kursy/xml/a074z120416.xml");
URLConnection uc = url.openConnection();
InputStreamReader input = new InputStreamReader(uc.getInputStream());
BufferedReader in = new BufferedReader(input);
File file = new File("temp.xml");

if(!file.exists()){
    file.createNewFile();
}

PrintWriter out = new PrintWriter(file);
String inputLine;

while ((inputLine = in.readLine()) != null) {
    out.print(inputLine);
}
out.close();
saxParser.parse("temp.xml", handler); 
```

我尝试从网上解析 xml 的方式有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:08:04.617

您在问题中编写的代码运行良好

```
URL url = new URL("http://www.nbp.pl/kursy/xml/a074z120416.xml");
URLConnection uc = url.openConnection();
saxParser.parse(uc.getInputStream(), handler); 
```

我在这里看不出任何问题。也许当您第一次尝试时文件正在更改并且不完整。

但现在我可以向你确认它有效。我试试看。

# java - 复杂变量（变量名随其他变量更改）可能吗？

> ID：10179071
> 
> 赞同：0
> 
> 时间：2012-04-16T17:51:42.587
> 
> 标签：java

我想使用一种方式使用变量来更改其他变量的名称......因为一个例子总是合适的：

```
<?php
for ($i = 1; $i <= 5; $i++) {
  ${a.$i} = "value";
}   

echo "$a1, $a2, $a3, $a4, $a5";
//Output is value, value, value, value, value
?> 
```

对我来说，我有 5 个步骤，对于每个步骤，我都有一个类似 step1_desc 的描述，我可以在 java 中执行类似 step{step}_desc 的操作吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:52:51.743

您可以使用数组，或者`Map`这样做，

```
String arr[] = new String[3];
arr[0]="value1";
arr[1]="value2";
arr[2]="value3"; 
```

或者

```
Map<String, String> map = new HashMap<String, String>();
map.put("anyName", "anyValue");
//access it now
map.get("anyName"); 
```

# javascript - javascript string.search 在 chrome 中不起作用

> ID：10179075
> 
> 赞同：0
> 
> 时间：2012-04-16T17:51:48.540
> 
> 标签：javascript, regex, google-chrome

我现在对 Chrome 有一个特殊的问题......这就是我想要完成的事情：

我有一系列表格部分，它们已相应地用它们的 ID 标识，如下所示：

```
T = Tab  
G = Group within Tab  
S = Sub-Group within Group  
# = Numerical index  

for example:  
<tr id="T1"> = Tab 1  
<td id="T1G3"> = Tab 1 , Group 3  
<td id="T1G3S1"> = Tab 1, Group 3, Sub-Group 1 
```

到目前为止非常简单......在 JavaScript 的帮助下，我还打算在表单上启用或禁用这些组。现在，这是我遇到的问题......当我的表单第一次加载时，我想禁用表单上需要它的所有内容。为此，我创建了一个动态函数，它可以为我做到这一点，我将在其中指定哪些标签受到影响，以及在这些标签的 ID 中查找什么，如果发生匹配，则禁用它，如下所示：

```
Pseudo and Definition:
Function DisableAll(string TagNamesCSArray, string RegExpContent)
{
Split the tag names provided into an array
- loop through the array and get all tags using document.getElementsByTagName() within page
-- if tags are found
--- loop through collection of tags/elements found
---- if the ID of the element is present, and MATCHES the RegExp in any way
----- disable that item
---- end if
--- end loop
-- end if
- end loop
} 
```

这很容易实现，这是最终结果：

```
function DisableAll(TagNames, RegExpStr) 
{
//declare local vars
var tagarr = TagNames.split(",");
var collection1;
var IdReg = new RegExp(RegExpStr);
var i;

//loop through getting all the tags
for (i = 0; i < tagarr.length; i++) 
{
    collection1 = document.getElementsByTagName(tagarr[i].toString())
    //loop through the collection of items found, if found
    if (collection1) 
    {
        for (y = 0; y < collection1.length; y++) 
        {
            if (collection1[y].getAttribute("id") != null) 
            {
                if (collection1[y].getAttribute("id").toString().search(IdReg) != -1) 
                {
                    collection1[y].disabled = true;
                }
            }
        }
    }
}
return; 
```

}

然后我像这样打电话给它：

```
DisableAll("tr,td", "^T|^T[0-9]S"); 
```

看起来很简单是吗？“汉恩！” 错误答案蝙蝠侠......这在所有浏览器中都非常有效，除了Chrome......现在为什么会这样？我不明白。也许我的正则表达式有问题？

任何帮助将不胜感激。

干杯!

MaxOvrdrv

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:35:36.387

就我而言，正则表达式匹配所有可能性。但该行`collection1[y].disabled = true;`无效，因为 disabled 不是 DOM 节点的属性。

顺便说一句：您的正则表达式的第二部分是不必要的，因为“^T”将匹配每个以 T 开头的 ID，后跟一个数字。

# ruby - 如何使用 Ruby 有效地匹配来自 2 个数组的数据

> ID：10179076
> 
> 赞同：3
> 
> 时间：2012-04-16T17:51:58.333
> 
> 标签：ruby, arrays, performance

现在我有这个：

```
array1 = [obj1, obj2, obj3, obj4]
array2 = [obj1, obj2, obj5, obj6]

array1.each do |item1|
  array2.each do |item2|
    if (item1[0] == item2[0]) && (item1[1] == item2[1])
      p "do stuff"
    end
  end
end 
```

我需要匹配每个数组中的 2 条数据，但是两个数组都非常大，我想知道是否有更快的方法来做到这一点。

我当前的设置需要为第一个数组中的每个元素查看第二个数组中的每个元素，这似乎非常低效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:15:58.040

结合地图和路口：

```
(array1.map { |a| a.first 2 } & array2.map { |a| a.first 2 }).each do
  p "do_stuff"
end 
```

性能应该不错。虽然内存密集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:49:04.400

如果您只拥有这两个数组，则无法避免 DigitalRoss 提到的 O(n^2) 复杂性。但是，您可以为数据编制索引，这样下次您就不必再重复一遍了。在最简单的情况下，您可以使用哈希来允许根据测试中使用的标准直接访问您的数据：

```
index1 = array1.each_with_object({}){|e, acc|
  acc[[e[0], e[1]]] ||= []
  acc[[e[0], e[1]]] << e
} 
```

另一个数组也是如此。然后，您的循环将如下所示：

```
index1.each do |key1, vals1|
  if vals2 = index2[key1]
    vals1.product(vals2).each do |e1, e2|
      p do_stuff
    end
  end
end 
```

我相信，也就是 O(n)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T20:52:20.393

这非常慢，因为 - 正如 DigitalRoss 已经说过的 - 它是 O(n^2)。假设 eql? 对你来说和 == 一样好，你可以建立一个索引并迭代它，而不是 O(n+m)：

```
array1 = [obj1, obj2, obj3, obj4]
array2 = [obj1, obj2, obj5, obj6]
index  = {}
found  = []

array1.each do |item1| index[item1.first(2)] = item1 end
array2.each do |item2|
  item1 = index[item2.first(2)]
  found << [item1,item2] if item1 then
end

found.each do |item1, item2| puts "do something" end 
```

这假定 array1 中所有元素的前 2 个元素的组合在 array1 中是唯一的。如果不是这样，代码会稍微复杂一些：

```
array1 = [obj1, obj2, obj3, obj4]
array2 = [obj1, obj2, obj5, obj6]
index  = {}
found  = []

array1.each do |item1|
  key          = item1.first(2)
  index[key] ||= []
  index[key]  << item1
end
array2.each do |item2|
  items_from_1 = index[item2.first(2)]
  if items_from_1 then
    found.concat(items_from_1.map { |item1| [item1,item2] })
  end
end

found.each do |item1, item2| puts "do something" end 
```

由于您没有提供任何示例数据，因此我没有测试代码。

我希望这会有所帮助。

# jquery - 使用 jquery 更改更新时的背景颜色

> ID：10179079
> 
> 赞同：0
> 
> 时间：2012-04-16T17:52:05.003
> 
> 标签：jquery

我正在尝试在元素更新时更改它们的背景颜色。

当响应从服务器返回时，我想将元素的背景颜色更改一秒钟左右，然后将其更改回原来的颜色。我可以更改背景颜色，但不能在同一个调用中将其更改回来。

这是我到目前为止所拥有的：

```
$.each(theArray,function(intIndex,objValue){
    $("#" + objValue.id).parent().css('background-color','red');
});
//NEED TIMING EVENT FOR DELAY 
$.each(theArray,function(intIndex,objValue){
    $("#" + objValue.id).parent().css('background-color','transparent');
}); 
```

第一个循环工作正常，但我无法让另一个循环工作。

我试过这样：

```
$.each(theArray,function(intIndex,objValue){
     $("#" + objValue.id).parent.css('background-color','red').delay(1000).css('background-color','transparent');
}); 
```

这也没有做任何事情。

所以我不确定问题是什么。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T17:57:11.050

```
$.each(theArray,function(intIndex,objValue){
    var $el = $("#" + objValue.id).parent().css('background-color','red');
    setTimeout(function(){
        $el.css('background-color', '');
    }, 1000);
}); 
```

这是一个演示：http: [//jsfiddle.net/Wnntu/](http://jsfiddle.net/Wnntu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:56:38.300

您可能正在寻找更多`.css('background-color','')`。这将从元素样式中删除它，因此应用链上的最后一个。但不确定为什么透明不起作用。

更新，

见这里：http: [//jsfiddle.net/](http://jsfiddle.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:56:41.033

试试这个：

```
$.each(theArray,function(intIndex,objValue){
    $("#" + objValue.id).parent().css('background-color','red').delay(1000).queue(function() {
        $(this).css('background-color','');
        $(this).dequeue();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T17:57:00.957

`.delay()`仅适用于动画效果队列或自定义队列，没有 jQuery UI 的动画不适用于颜色...

相反，您可以使用`setTimeout()`调用：

```
$.each(theArray,function(intIndex,objValue){
    var myObj = $("#" + objValue.id).parent().css('background-color','red');
    setTimeout(function() {
        myObj.css('background-color','transparent');
    },1000);
}); 
```

# ruby-on-rails - 如何在 Aptana Studio 3.0.9 中使用 bundle exec 来运行调试器？

> ID：10179081
> 
> 赞同：0
> 
> 时间：2012-04-16T17:52:15.737
> 
> 标签：ruby-on-rails, debugging, shell, rvm, zsh

Aptana 似乎是从`sh`shell 开始的。所以我试图切换到`zsh`，并执行命令来启动一个 rails 应用程序。

我已经更改了我的调试可执行文件，以便它运行具有以下内容的 unix 可执行文件：

```
#!/usr/bin/env ruby
exec("zsh | (echo $SHELL && [[ -s '$HOME/.rvm/scripts/rvm' ]] && source '$HOME/.rvm/scripts/rvm' && rvm use 1.8.7@tinderbox && (bundle exec script/server -p3001 &))") 
```

因此，当我从工具栏上的调试菜单中单击我的调试可执行文件时，会出现调试透视图，它显示

```
myApp [Ruby Application]    
    Ruby    
    /usr/bin/ruby 
```

正在运行并且尚未终止。但是当我进入浏览器并输入 0.0.0.0:3001 时，我得到“糟糕！Google Chrome 无法连接到 localhost:3001”——这意味着服务器没有运行。

我将可执行文件的输出设置为桌面上的一个文件，这是每次运行都会发生的情况：

```
 Fast Debugger (ruby-debug-ide 0.4.16, ruby-debug-base 0.10.4) listens on 127.0.0.1:55306
/bin/zsh 
```

*   注意：我使用 bash 和使用 zsh 得到相同的结果

到底是怎么回事？以及如何让我的命令起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:56:02.647

类型

```
zsh -l 
```

在新的 zsh shell 中：

```
rvm 1.8.7 do bundle exec script/server -p3001 
```

或使用 rvm 包装器：

为捆绑包生成包装器：

```
rvm wrapper 1.8.7 run bundle 
```

它将生成`run_bundle`，找到它：

```
which run_bundle 
```

并在aptana中使用它：

```
/path/to/run_bundle exec script/server -p3001 
```

# javascript - ExtJS Grid 的渲染器函数中的回调

> ID：10179083
> 
> 赞同：1
> 
> 时间：2012-04-16T17:52:27.340
> 
> 标签：javascript, extjs, extjs4

我有一个渲染器函数，它必须从商店加载一些数据才能返回一个值，但我无法弄清楚如何将我想要的内容返回到网格列。

```
{header: 'Manager First Name', 
renderer: function(value, meta, record){
    record.Managers().load({
        scope: this,
        callback: function(managers, operation, success){
            if(success && managers){
               managers[0].getPerson({
                    scope: this,
                    callback: function(person, operation){
                        if(person){
                            return person.get("firstName");
                        } else {
                            console.error('This manager doesn\'t have a person record.');
                            return '';
                        }
                    }
                });
            } else {
                console.error('No manager record for the shop '+record.getId());
            }
        }
    });
}} 
```

我试过把和函数放在`return`前面没有用。我也想过触发一个事件，但我不确定那会是什么样子。有任何想法吗？`load``getPerson`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:59:54.153

我会在渲染主网格之前加载您的附加信息。这样，在 renderer() 函数中，您将使用已加载的数据。

否则你的渲染器函数会被调用很多次，你会在异步加载你的商店时遇到一些大麻烦。

# mysql - 一个有点棘手的mysql查询

> ID：10179090
> 
> 赞同：0
> 
> 时间：2012-04-16T17:53:18.233
> 
> 标签：mysql, sql

我在 mysql 数据库上有 2 个表

```
auctions:

seller: seller id
transaction_date: unix timestamp

comments:

seller: seller id
rating (-1, 0, 1)
comment_date: unix timestamp 
```

所以，我想在交易之前计算卖家的卖家评级，这是评级的总和。我想知道卖家在交易前有多少评论。

我想再获得两列这样的：

拍卖：

卖家，交易，**seller_rating，num_of_comments**

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:57:35.393

像下面这样的东西可以工作。基本上，您构建一个表，列出每个事务的所有相关评论，然后从那里执行计数：

```
SELECT auctions.seller, auctions.transaction_date, SUM(comments.rating) AS seller_rating, COUNT(comments.comment_date) AS num_of_comments
  FROM auctions
  LEFT OUTER JOIN comments 
    ON auctions.seller = comments.seller
  WHERE auctions.transaction_date > comments.comment_date
GROUP BY auctions.seller, auctions.transaction_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:58:59.770

这应该这样做：

```
SELECT
  a.seller,
  a.transaction_date,
  SUM(c.rating),
  COUNT(*)
FROM auctions a 
LEFT JOIN comments c on c.seller = a.seller AND c.comment_date <= a.transaction_date
GROUP BY a.seller 
```

# javascript - ajax / javascript 照片库在 iPhone Safari 上不起作用

> ID：10179092
> 
> 赞同：1
> 
> 时间：2012-04-16T17:53:23.120
> 
> 标签：javascript, jquery, iphone, xml, ajax

我正在开发我的第一个网站，并建立了一个交互式照片库。背后的主要思想是显示一个大图像，如果用户单击它，它将更改为下一个图像。下面还有一个缩略图轮播，也可以用来切换到主图像。我几乎可以按照我的意愿进行这项工作（减去一些风格等方面的小问题）。然后我尝试在我的 iPhone 上使用该网站，发现照片库不像在我的桌面上那样工作。似乎发生的情况是，当我单击图像时，它会重新加载具有相同图像的页面，而不是列表中的下一个。

我决定编码的方式是，图像包含在锚标记中，例如：

```
<a class="nextphoto" href="" onclick="return false;"> 
```

单击时，jQuery 捕获事件并将适当的参数传递给使用新照片更新文档的 javascript 函数。此函数调用*changePhoto()*并创建一个 XMLHttpRequest 来获取存储所有图像名称和 alt 信息的 XML 文件。

要查看当前状态的照片库，请访问[http://www.mwlets.co.uk/properties.html](http://www.mwlets.co.uk/properties.html)

我最初认为这将是 iPhone 不支持 javascript、jQuery 或 xml 的问题，但我似乎能够找到所有这些东西的工作示例。我什至尝试了从 xml 文件中提取信息的 w3schools 示例，并且效果很好。

我的 JavaScript 代码是：

```
 $(document).ready(function(){
      $("a.nextphoto").bind("click",function()
        {
          var imgID = document.getElementById("mainphoto").name;
          imgID++;
          changePhoto(imgID,false);
        });
});

$(document).ready(function(){
      $("a.prevphoto").bind("click",function()
        {
          var imgID = document.getElementById("mainphoto").name;
          imgID--;
          changePhoto(imgID,false);
        });
});

$(document).ready(function(){
      $("a.thumbnail").bind("click",function()
        {
          var currentID = document.getElementById("mainphoto").name;
          var thumbID = $(this).attr("name");
          if(currentID != thumbID)
            {
              changePhoto(thumbID,false);
            }
        });
});

function changePhoto(newimgID,slideshow)
    {
      var imgsrc = "http://www.mwlets.co.uk/Images/Mayfield/Large/to_let_mayfield_ashbourne_derbyshire_"
    var xmlhttp, images, imageName, imageAlt, imgalt;

 if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
  }
 else
  {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

 xmlhttp.onreadystatechange=function()
  {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
      images = xmlhttp.responseXML.documentElement.getElementsByTagName("IMAGE");

        if(newimgID > images.length)     
          {
              newimgID = 1;
          }
        if(newimgID < 1)
          {
            newimgID = images.length;
          }

      document.getElementById("mainphoto").name=newimgID;
      document.getElementById("photoindex").innerHTML=newimgID;

      imageName=images[newimgID - 1].getElementsByTagName("NAME");
      imgsrc += imageName[0].firstChild.nodeValue;
      document.getElementById("mainphoto").src=imgsrc;

      imageAlt=images[newimgID - 1].getElementsByTagName("ALT");
      imgalt = imageAlt[0].firstChild.nodeValue;
      document.getElementById("mainphoto").alt=imgalt;
      document.getElementById("captiontext").innerHTML=imgalt;   
    }
  }

 xmlhttp.open("GET","http://mwlets.co.uk/Images/Mayfield/image_list.xml",true);
 xmlhttp.send();

} 
```

我个人认为理论上所有组件都应该在 iPhone 上运行。如果有人可以提出潜在的原因，那太好了。

我也意识到这可能不是最简洁的编码方式。这是我第一次尝试在适当的应用程序中使用 Javascript、jQuery 和 Ajax。我愿意接受有关替代方法的建议。我的主要要求是它目前在网站上做的事情（从桌面查看），它是跨浏览器/平台的，并且可以快速检索图像。我打算优雅地降级此代码，以便没有 JS 的浏览器可以将图像视为一种框架样式库。

提前致谢，

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:04:36.127

由于 href 为空（我相信这是标准的 Safari 行为），Safari 正在刷新页面。尝试通过 jQuery 设置点击事件（你可能不必使用锚标签）。即 $("#picturelementid").click(function{});

# html - 如何使用 jCrop 插件处理 html5 画布对象？

> ID：10179094
> 
> 赞同：2
> 
> 时间：2012-04-16T17:53:25.207
> 
> 标签：html, object, image-processing, canvas, jcrop

我正在寻找很长时间的解决方案，但我在任何地方都找不到。例如，如果我有这个 html 代码：

```
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
<script src="js/jquery.min.js" type="text/javascript"></script>
<script src="js/jquery.Jcrop.js" type="text/javascript"></script>
</head>
<table>
<img src="picture.jpg" id="picture" style="display:none"/>
<tr>
<td>
<canvas id="rotate"></canvas>
</td>
</tr>
</table>
<p>
    <strong>Rotate Image: </strong>
    <a href="javascript:;" id="resetImage">Reset Image</a>
    <a href="javascript:;" id="rotate90">90&deg;</a>
</p>
</html> 
```

我想用一些javascript旋转功能旋转图像，然后我需要用jCrop插件裁剪它们。有没有办法用 jCrop 插件处理画布对象。我试着这样做，但没有工作：

```
jQuery(function($) {
    $('#rotate').Jcrop({
    bgColor: 'black',
bgOpacity: .8,
setSelect: [ 10, 10, 200, 300 ],
    aspectRatio: 2 / 3
    });
}); 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T18:50:57.943

所以我在很长一段时间后用 imgareaSelect、pixastic 和 jQuery 库解决了这个问题。现在的问题是脚本运行有点慢，所以我必须做一些优化。[您可以在此处](http://agd-brita.pl/mobile2/canvas.html)查看工作脚本。

我们可以向任意方向旋转和翻转远程图片，并对本地图片进行更多的图像处理。

# c - 我可以在没有内存错误的情况下重复使用一个结构来读取多个文件吗？

> ID：10179095
> 
> 赞同：0
> 
> 时间：2012-04-16T17:53:35.790
> 
> 标签：c, memory-management, struct

我有一个结构，它被定义为将标头作为二进制数据文件的一部分。我用它来读一读，然后使用它的信息。之后我想用它来做另一次阅读。我是否需要释放它或其他任何东西才能再次使用它？

我遇到了一些内存错误，我认为这可能是问题所在。我包括代码，但它很粗糙，是我尝试调试此问题的当前结果。

```
void readSlices (struct header fileHead, unsigned long *offsets, FILE *fp, struct car **hashTable, int *tableSize){
    struct TVehicle3D tempVehicle;
    struct BlockHeaderData blockHead;
    struct vertexNode *ptr;
    int sliceNum = 1;
    int i;

    while (sliceNum <= fileHead.slicesStored) {
        fseek (fp, offsets[sliceNum], SEEK_SET);
        fread(&(blockHead),sizeof(blockHead), 1, fp);
        printf ("Type: %d  Size: %d\n", blockHead.objectType,blockHead.size );
        while (blockHead.objectType != 88) {
            if (blockHead.objectType == 86) {
                printf ("Reading slice\n");
                fread(&(tempVehicle),75, 1, fp);

                if (*tableSize < tempVehicle.id) {
                    (*tableSize)++;
                    printf ("increasing tablesize (realloc)\n");
                    *hashTable = realloc(*hashTable, (*tableSize) * sizeof (struct car*));
                };
                if ((*hashTable)[tempVehicle.id].set == 0) {
                    (*hashTable)[tempVehicle.id].set = 1;
                };
                (*hashTable)[tempVehicle.id].sliceOut = sliceNum;
                //printf ("size of table at slice #%d = %d\n",tempVehicle.id, *tableSize);
                tempVehicle.centroid.x = ((tempVehicle.points[0].x)+(tempVehicle.points[1].x)+(tempVehicle.points[2].x)+(tempVehicle.points[3].x))/4;
                tempVehicle.centroid.y = ((tempVehicle.points[0].y)+(tempVehicle.points[1].y)+(tempVehicle.points[2].y)+(tempVehicle.points[3].y))/4;
                tempVehicle.centroid.z = ((tempVehicle.points[0].z)+(tempVehicle.points[1].z)+(tempVehicle.points[2].z)+(tempVehicle.points[3].z))/4;
                ptr = (*hashTable)[tempVehicle.id].node;
                printf ("Set ptr\n");
                for (i = 0; i < sliceNum - (*hashTable)[tempVehicle.id].sliceIn; i++) {
                printf ("Setting loop\n");
                    ptr = (*ptr).node;
                };
                printf ("Setting ptr xyz\n");
                ptr = malloc (sizeof (struct vertexNode));
                ptr->x = tempVehicle.centroid.x;
                (ptr)->y = tempVehicle.centroid.y;
                (ptr)->z = tempVehicle.centroid.z;
                if (tempVehicle.id==1) printf ("centroid x: %d y: %d z: %d\n", tempVehicle.centroid.x, tempVehicle.centroid.y, tempVehicle.centroid.z);
            }
            else fseek (fp, ftell(fp) + blockHead.size, SEEK_SET);
            fread(&(blockHead),sizeof(blockHead), 1, fp);
            //printf ("Type: %d  Size: %d\n", blockHead.objectType,blockHead.size );
        };
        sliceNum++;
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:03:42.047

您可以随意重复使用缓冲区。

查看您的代码，我看到您，`ptr = malloc(...);`但您从未`free(ptr);`在您粘贴的代码中。这将导致内存泄漏。你`malloc()`在你的循环中，这可能会导致非常严重的泄漏。

编辑：快速浏览一下，不清楚你为什么在这里调用 malloc() 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:39:10.213

看这里：

```
 if (*tableSize < tempVehicle.id) {
                (*tableSize)++;
                printf ("increasing tablesize (realloc)\n");
                *hashTable = realloc(*hashTable, (*tableSize) * sizeof (struct car*));
            };
            if ((*hashTable)[tempVehicle.id].set == 0) {
                (*hashTable)[tempVehicle.id].set = 1;
            }; 
```

假设 tablesize 为 10，tempVehicle.id 为 11，因此您将 tablesize 增加到 11，并且 realloc hashTable 成为 11 个结构指针的数组。

然后，您尝试`hashTable[11]`重复访问并分配给第 12 个元素。这可以解释你的“无效读取”，并且注意，做一些**越界的**写作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:20:08.323

重新使用“文件头”本身不会导致错误。如果没有来自程序其余部分的更多详细信息，就不可能确切知道导致错误的原因，但这里有几行值得怀疑：

```
fread(&(tempVehicle),75, 1, fp); 
```

sizeof(tempVehicle) 是否至少 75 个字节？

`tempVehicle`并且`blockHead`被分配在堆栈上，如果非常大可能会导致堆栈溢出。

是如何`*offsets`分配的？至少可以保证大小`fileHead.slicesStored`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T18:33:37.097

> 快速浏览一下，不清楚你为什么在这里调用 malloc() 。

我猜这是因为 RyanS 试图节省声明；“ptr”在循环中用于几个不同的目的（唯一的共同点是，它们都涉及结构顶点节点）。

这不是一个好习惯。目前尚不清楚 malloc 的 ptr 的用途，因为它被分配给然后被丢弃，但如果您只需要一个在循环内使用的缓冲区，请像使用 local`struct vertexNode`一样使用 local `struct TVehicle3D`，与 ptr 分开。

注意mah关于泄漏的观点。 **这是一个非常严重的问题。** 另外：这是一个非常规的声明：

```
ptr = (*ptr).node; 
```

只需使用`ptr = ptr->node`.

# emacs - 具有多个击键的 Emacs 键绑定

> ID：10179096
> 
> 赞同：3
> 
> 时间：2012-04-16T17:53:39.513
> 
> 标签：emacs, key-bindings

我想在 emacs 中通过两次击键打开我最喜欢的五个（左右）文件。我在想文件 a 用 F9-a，文件 b 用 F9-b，等等。

我在 F5 有 org-mode 议程（而不是“默认”Ca），所以我按 F5-a 作为今天的议程。我希望我的 org 文件、我的联系人文件等也有相同的内容。

有没有办法（或者更确切地说：有什么办法）让 F9 打开一个子菜单，其中包含我最喜欢的文件列表，以便用另一个按键选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:26:22.480

此设置可以满足您的要求，至少在键盘映射方面。它实际上并没有弹出菜单。

```
(setq my-file-menu-keymap
      (let ((keymap (make-sparse-keymap)))
        (dolist (pair '(("a" . "~/.emacs")
                        ("b" . "~/.phones")
                        ("c" . "~/org/daily.org")))
          (define-key keymap (car pair)
            `(lambda () (interactive) (find-file ,(cdr pair)))))
        keymap))

(global-set-key (kbd "<f9>") my-file-menu-keymap) 
```

我使用一个键来循环浏览我最喜欢的文件（适用于少量文件，我不关心随机访问）。您可以在[this answer](https://stackoverflow.com/a/1313997/6148) to a different SO question中找到相应的代码（请参阅[cycle-special-files](http://snipplr.com/view/18679/cyclespecialfiles/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:02:58.620

[使用允许您从最近的文件中完成文件名](http://www.emacswiki.org/emacs-es/RecentFiles)的包，您可能会获得更好的结果。这不像将文件名显式绑定到键那样静态，并且您可以使用此方法轻松访问最近使用的文件，而不仅仅是 5。

# sql - 我需要搜索以匹配存储为 null 的值

> ID：10179097
> 
> 赞同：1
> 
> 时间：2012-04-16T17:53:52.493
> 
> 标签：sql, tsql

我正在对传入多个变量并比较多个字段的单个表进行搜索查询。像这样：

```
 WHERE  a.callerfname LIKE @FName
                 AND a.callerlname LIKE @LName
                 AND a.callermname LIKE @MName 
```

如果没有为其中一个字段选择任何值，则表单以 % 发送，因此该字段匹配所有结果。

一个字段是`ProjectID`Guid，可能包含`null`值。当我在没有选择项目的情况下进行搜索时，表单会传入空白的 Guid (000000-000 ...)，然后我会`CASE`像这样检查它：

```
AND a.projectid = CASE WHEN  @ProjectId <> '00000000-0000-0000-0000-000000000000'
                       THEN  @ProjectId
                       ELSE a.projectid
                             END 
```

问题是如果一行有 a`NULL ProjectID`它不会匹配自己。我的问题是 guid 字段中的空值匹配什么？或者，如果与 % 相比，我如何让 projectid 返回所有值，如果为 null，方式和名称会如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:14:45.647

这应该是您的项目过滤器。如果参数为空 guid，则所有项目都匹配；如果不是，则只有一个（或没有）匹配。

```
WHERE (@ProjectId = '00000000-0000-0000-0000-000000000000'
       OR a.projectid = @ProjectId) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:03:40.720

在 SQL 中 NULL 不等于任何值，并且 NULL 不等于 NULL。您必须测试“IS NULL”。或者，您可以将 isnull(column, default value) 应用于测试的双方。这些中的任何一个都应该起作用。我不太使用 guid，因此我将空 guid 值保留在 isNull 条件中，因为您需要保持数据类型匹配，并且我认为这是一个有效的 guid 值。

```
 AND ISNULL(a.projectid, '00000000-0000-0000-0000-000000000000') = CASE WHEN @ProjectId <> '00000000-0000-0000-0000-000000000000' THEN @ProjectId ELSE isnull(a.projectid, '00000000-0000-0000-0000-000000000000') END 
```

或者

```
AND (a.projectid = CASE WHEN @ProjectId <> '00000000-0000-0000-0000-000000000000' THEN @ProjectId ELSE a.projectid END) OR (a.projectid is null) 
```

# jquery-mobile - 将 jQuery Mobile 属性应用于 XPages 控件

> ID：10179098
> 
> 赞同：3
> 
> 时间：2012-04-16T17:53:52.577
> 
> 标签：jquery-mobile, xpages

我刚刚开始研究在 XPages 项目中使用 jQuery Mobile。我不确定在某些情况下我应该使用 XPages 控件还是标准 HTML 控件。

例如，我需要一个页面上的简单“保存”按钮。xp:button 确实使用 jQuery Mobile 样式呈现。但是我将如何对其应用属性，例如“data-icon”和“data-inline”？

或者在这种情况下我应该使用标准的 HTML 标记吗？如果是这样，我将失去编写 XPage 简单操作（例如保存数据源）的能力。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:17:38.390

如果您使用的是 8.5.3，则可以使用按钮的 attr 属性添加 data-icon 和 data-inline 标签。

```
<xp:button value="Label" id="button1">
    <xp:this.attrs>
        <xp:attr name="data-icon" value="marky"></xp:attr>
    </xp:this.attrs>
</xp:button> 
```

如果没有，那么您可以使用 jQuery 使用 $().attr('data-icon', 'whatever') 添加属性。请记住，尽管按钮的 clientID 将通过界面更改，但您需要对此进行调整。你能给我的 x$ 函数 [http://openntf.org/XSnippets.nsf/snippet.xsp?id=x-jquery-selector-for-xpages](http://openntf.org/XSnippets.nsf/snippet.xsp?id=x-jquery-selector-for-xpages)

# mysql - 查询在 MySQL 5.1 中有效，但在 SQL2000 中无效

> ID：10179100
> 
> 赞同：0
> 
> 时间：2012-04-16T17:54:07.363
> 
> 标签：mysql, sql, sql-server

我正在尝试从 Win2000 Server SQL Server 2000 v8.00.760 上运行的 OLD 数据库中提取一些数据，但出现错误。我的查询在我正在使用的当前数据库中工作，但我不知道我在做什么，这不是向后可比的，如果这是问题的话。

这是我的查询：

```
SELECT o.CustomerID, o.ShipName, o.ShipCity, o.ShipStateOrProvince, o.ShipPostalCode, o.ShipPhoneNumber, c.Profession, SUM( o.Total ) 
FROM Orders o

JOIN Customers c ON o.CustomerID = c.CustomerID

WHERE (o.OrderDate >= '2012-01-01')
AND (o.Void <> - 1)
AND (o.Cancelled <> - 1)

GROUP BY o.CustomerID 
```

在 MySQL 中它工作正常。我正在以我想要的方式返回查询。但我得到错误... ![在此处输入图像描述](../Images/161f48601a5b2b3afd43afcdce2af1e6.png)

当我在旧 SQL 版本中尝试时。

我现在有点迷路了。谁能告诉我我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:56:54.983

SQL Server 对 GROUP BY 的要求比 MySQL 严格得多。SELECT 子句中的所有非聚合列也必须出现在 GROUP BY 中。这避免了当给定 CustomerID 有多个 ShipName 值时可能出现的歧义。虽然 MySQL 会任意选择一个，但 SQL Server 会强制您将它们视为单独的行。

```
SELECT o.CustomerID, o.ShipName, o.ShipCity, o.ShipStateOrProvince, o.ShipPostalCode, o.ShipPhoneNumber, c.Profession, SUM( o.Total ) 
FROM Orders o

JOIN Customers c ON o.CustomerID = c.CustomerID

WHERE (o.OrderDate >= '2012-01-01')
AND (o.Void <> - 1)
AND (o.Cancelled <> - 1)

GROUP BY o.CustomerID, o.ShipName, o.ShipCity, o.ShipStateOrProvince, o.ShipPostalCode, o.ShipPhoneNumber, c.Profession 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:56:43.440

当存在聚合函数时，SQL Server 要求每个字段都包含在您`SELECT`的子句中，因此您必须将所有字段添加到您的：`GROUP BY``GROUP BY`

```
SELECT o.CustomerID
    , o.ShipName
    , o.ShipCity
    , o.ShipStateOrProvince
    , o.ShipPostalCode
    , o.ShipPhoneNumber
    , c.Profession
    , SUM( o.Total ) 
FROM Orders o
JOIN Customers c 
    ON o.CustomerID = c.CustomerID
WHERE (o.OrderDate >= '2012-01-01')
    AND (o.Void <> - 1)
    AND (o.Cancelled <> - 1)
GROUP BY o.CustomerID
    , o.ShipName
    , o.ShipCity
    , o.ShipStateOrProvince
    , o.ShipPostalCode
    , o.ShipPhoneNumber
    , c.Profession 
```

# ruby-on-rails - 如何干燥这个 rspec 测试？

> ID：10179103
> 
> 赞同：2
> 
> 时间：2012-04-16T17:54:16.703
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, tdd

我正在使用 gem 并想向它添加 40 多个额外的 rspec 测试。gem 带有一组规范，但它们不是很干——我想添加的 40 多个测试中的每一个都需要 10-12 行代码（每一个都非常相似）。

下面是一个测试示例，但我创建了一个要点来保存更多代码。在此处粘贴更多内容似乎不切实际。

这是要点：[https ://gist.github.com/2400225](https://gist.github.com/2400225)

我想要做的是在一个源文件中包含 40-45 个这样的测试，这个源文件尽可能干燥。

```
shared_examples_for "Firefox browser" do
  it "should return 'Firefox' as its browser" do
    @useragent.browser.should == "Firefox"
  end

  it "should return :strong as its security" do
    @useragent.security.should == :strong
  end

  it { @useragent.should_not be_webkit }
end

# (repeating code would start here. I want 40-50 of these blocks.)
describe 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0b8) Gecko/20100101 Firefox/4.0b8' do
  before do
    @useragent = UserAgent.parse('Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0b8) Gecko/20100101 Firefox/4.0b8')
  end

  it_should_behave_like "Firefox browser"

  it "should return '4.0b8' as its version" do
    @useragent.version.should == "4.0b8"
  end

  it "should return '20100101' as its gecko version" do
    @useragent.gecko.version.should == "20100101"
  end

  it "should return 'Macintosh' as its platform" do
    @useragent.platform.should == "Macintosh"
  end

  it "should return 'Intel Mac OS X 10.6' as its os" do
    @useragent.os.should == "Intel Mac OS X 10.6"
  end

  it "should return nil as its localization" do
    @useragent.localization.should be_nil
  end

  it { @useragent.should_not be_mobile }
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:33:08.507

这只是红宝石！

你可以在这里做任何你可以用 ruby​​ 做的事情。尝试这样的事情：

```
BROWSERS = [
    [
        'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0b8) Gecko/20100101 Firefox/4.0b8',
        'Firefox browser',
        '4.0b8',
        '20100101',
        'Macintosh',
        'Intel Mac OS X 10.6',
        nil,
        false
    ],
    # more entries
]

BROWSERS.each do |desc|
    agent_string,behave_as,version,gecko_version,platform,os,localization,mobile = *desc
    describe agent_string do
      before do
        @useragent = UserAgent.parse(agent_string)
      end

      it_should_behave_like behave_as

      it "should return '#{version}' as its version" do
        @useragent.version.should == version
      end

      it "should return '#{gecko_version}' as its gecko version" do
        @useragent.gecko.version.should == gecko_version
      end
      # etc!
      end
end 
```

# php - Fwrite 失败 w/ PHP Cron

> ID：10179106
> 
> 赞同：0
> 
> 时间：2012-04-16T17:54:26.100
> 
> 标签：php, cron, fwrite

我有这个问题，cron 每 5 分钟运行一次 php 脚本来更新列表。

但是，列表有 5% 的时间无法更新，并且列表最终为空白。我不相信它与 cron 有关，因为我认为在 100 次尝试中我未能手动生成列表两次。

我认为这与网站上有 50 多人有关时，它将无法生成，可能与服务器繁忙有关。我添加了一个检查以确保不是 MySQL 没有返回行（这似乎是不可能的），但它仍然让我相信 fwrite 失败了。

```
<?      
$fileHandle = fopen("latest.html", 'w');
    $links = array();   

$query1 = $db_conn -> query("SELECT * FROM `views` ORDER BY `date` DESC LIMIT 0,20");
while ($result1 = $db_conn -> fetch_row($query1))
{
    $result2 = $db_conn -> fetch_query("SELECT * FROM `title` WHERE `id` = '" . $result1['id'] . "'");

    array_push($links, "<a href='/title/" . $result2['title'] . "'>" . $result2['title'] . "</a>");
}

if (count($links) > 0)
    fwrite($fileHandle, implode(" • ", $links));
else
    echo "Didn't work!";    

fclose($fileHandle);
?> 
```

该文件是否有可能正在使用中，因此最终无法正常工作并写入空白列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:59:01.723

$fileHandle = "latest.html", 'w');

我假设你的意思是

$fileHandle = fopen("latest.html", 'w');

这里的“w”打开文件，将光标放在开头并将文件截断为零长度。

如果您在执行此操作之前检查 count($links)，那么当没有任何内容可写入文件时，您将不会截断文件。

```
<?php
$links = "QUERY HERE AND HANDLE THE RESULTS (REMOVED)";  
if (count($links) > 0)
{  
    $fileHandle = fopen("latest.html", 'w');  
    fwrite($fileHandle, implode(" • ", $links));
    fclose($fileHandle);
}
else
{
    echo "Didn't work!";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:05:49.740

> 该文件是否有可能正在使用中，因此最终无法正常工作并写入空白列表？

嗯，是。我们不知道您运行了哪些其他代码来操作 latest.html，因此我们无法真正对其进行分析。

以下是一些建议：

1.  修复文件处理程序创建中的语法错误
2.  您可以获取 fopen('w') 处理程序来处理现有 fopen('r') 进程正在进行的文件，因此请确保在写入文件时使用 PHP 的[群](http://www.php.net/manual/en/function.flock.php)，以确保其他进程不会破坏您的列表
3.  检查您的日志必须说什么
4.  写入一个字符串，然后 fwrite 整个字符串，因此您在打开文件处理程序的情况下在内部循环中花费的时间更少（特别是在这种情况下，字符串不会那么长 - 链接列表）
5.  尝试将您的链接（带有日期标记）输出到除 latest.html 之外的单独文件；在失败的 5% 的机会中，回顾时间戳链接，看看它们是如何比较的。您还可以在该文件中包含您的查询，以便您可以隔离问题是否与数据库有关或与写入 latest.html 相关 - 这在您的查询（不是显示）可能不返回任何结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:10:45.363

我认为您对查询不返回任何数据的可能性持开放态度。您示例中的“已删除”逻辑可能有助于阐明正在发生的事情。解决这个问题的一个好方法是将一些内容写入日志文件，并在脚本的几十次迭代后检查该日志文件。为了在您的 latest.html 文件中包含*某些*内容，我会在您当前的代码上使用 file_put_contents。

```
<?php

$links = array();
$query = "SELECT links FROM tableA";
$result = mysql_query($links);
while ($row = mysql_fetch_row($result)) {
    $links[] = $row[0];
}

if (count($links) > 0) {
    file_put_contents('latest.html', implode(" * ", $links));
    file_put_contents('linkupdate.log', "got links: " . count($links) . "\n", FILE_APPEND);
} else {
    file_put_contents('linkupdate.log', "No links? [(" . mysql_errno() . ") " . mysql_error() . "]\n", FILE_APPEND);
}

?> 
```

如果我们没有找到链接，我们不会覆盖之前的数据文件。如果我们遇到可能导致问题的 MySQL 错误，它将显示在日志输出中。

对文件的读取不应阻止写入，但切换到 file_put_contents 将有助于减少文件打开和清空的时间（在执行查询和获取结果时存在一些延迟）。

随意匿名化您的查询并将其发布 - 您肯定会对结果集有问题，因为您的代码看起来应该可以工作。

# c# - 从 c# 代码隐藏动态添加指向 DIV 标记的链接

> ID：10179108
> 
> 赞同：1
> 
> 时间：2012-04-16T17:54:37.053
> 
> 标签：c#, .net, html

在我进行数据库调用之前，我不确定一个页面上需要多少个链接以及链接指向的位置。因此，我需要在前端的 div 标签内创建“x”个链接。有什么想法可以实现吗？

这是我尝试过的 -

```
foreach (KeyValuePair<string, string> kvp in attachments)
{
    HyperLink hyp = new HyperLink();
    hyp.ID = kvp.Key;
    hyp.Text = kvp.Value;
    attachmentHiddenDiv.Controls.Add(hyp);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:59:10.800

在您的 aspx 页面中有一个 div，其 runat 属性值设置为“server”

```
<div id="divLinks" runat="server"></div> 
```

在后面的代码中，您可以遍历项目并创建尽可能多的链接

```
StringBuilder str=new StringBuilder();

foreach (KeyValuePair<string, string> kvp in attachments))
{
  str.Append("<a href='../target.aspx?id="+kvp.Value+"'>kvp.Key</a>");  
}
divLinks.InnerHtml=str.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:59:23.377

有几种不同的方法可以做到这一点。最简单的方法是在页面上添加一个 Literal 控件，并将后面代码中的 .Text 值设置为要显示的 Html（您手动构建的链接列表）。

另一种选择是使用中继器并将其绑定到作为数据源的 url 字符串列表，并在 ItemTemplate 中使用 HyperLink 项绑定 NavigateUrl 属性。例如[asp:HyperLink 在 Repeater 中使用 XPATH 数据构建 NavigateUrl](https://stackoverflow.com/questions/1813547/asphyperlink-build-navigateurl-within-repeater-using-xpath-data)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T17:56:38.307

使用文字控件。将文字控件放置在 div 标记内，从 DB 值生成 html，并将文字控件文本属性设置为从 DB 值生成的 html 字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T17:57:30.287

您可以使用中继器迭代一组对象，为每个对象创建标记。对象将从您的数据库中提取。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)

# node.js - 从 Node.js 执行 Powershell 脚本

> ID：10179114
> 
> 赞同：44
> 
> 时间：2012-04-16T17:54:52.460
> 
> 标签：node.js, powershell

我一直在网上和 Stackoverflow 上寻找，但没有找到这个问题的答案。您将如何从 Node.js 执行 Powershell 脚本？该脚本与 Node.js 实例位于同一服务器上。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-04-16T20:49:01.217

您可以只生成一个子进程“powershell.exe”并收听 stdout 的命令输出和 stderr 的错误：

```
var spawn = require("child_process").spawn,child;
child = spawn("powershell.exe",["c:\\temp\\helloworld.ps1"]);
child.stdout.on("data",function(data){
    console.log("Powershell Data: " + data);
});
child.stderr.on("data",function(data){
    console.log("Powershell Errors: " + data);
});
child.on("exit",function(){
    console.log("Powershell Script finished");
});
child.stdin.end(); //end input 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2020-04-15T01:24:26.710

执行此操作的新方法

```
const { exec } = require('child_process');
exec('command here', {'shell':'powershell.exe'}, (error, stdout, stderr)=> {
    // do whatever with stdout
}) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-07-09T16:29:20.557

除了公认的答案之外，还有一个名为[Edge.js](https://github.com/tjanczuk/edge)的 Node.JS 库，它允许从 Node 中执行各种语言。包括 C#、J#、.Net、SQL、Python、[PowerShell](http://tjanczuk.github.io/edge/#/16)和其他 CLR 语言。

请注意，Edge.js 需要 PowerShell 3.0 并且仅适用于 Windows（许多其他功能也适用于 Mac 和 Linux）。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-03-03T16:47:52.287

或者你可以只使用[Node-PowerShell](http://rannn505.github.io/node-powershell/)。

> Node-PowerShell 利用了当今技术世界中存在的两个最简单、有效和容易的工具。一方面，NodeJS 在 javascript 领域掀起了一场革命，另一方面，PowerShell 最近推出了最初的开源跨平台版本，通过将它们连接在一起，您可以无论您是程序员、IT 人员还是 DevOps 人员，都可以创建您被要求的任何解决方案。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-10-03T03:13:04.673

当脚本不存在时，此选项对我有用，但您想动态生成一些命令，发送它们，然后在节点上处理结果。

```
var PSRunner = {
    send: function(commands) {
        var self = this;
        var results = [];
        var spawn = require("child_process").spawn;
        var child = spawn("powershell.exe", ["-Command", "-"]);

        child.stdout.on("data", function(data) {
            self.out.push(data.toString());
        });
        child.stderr.on("data", function(data) {
            self.err.push(data.toString());
        });

        commands.forEach(function(cmd){
            self.out = [];
            self.err = [];
            child.stdin.write(cmd+ '\n');
            results.push({command: cmd, output: self.out, errors: self.err});
        });
        child.stdin.end();
        return results;
    },
};

module.exports = PSRunner; 
```

# qt - QGraphicsView 滚动条策略未按预期工作

> ID：10179120
> 
> 赞同：4
> 
> 时间：2012-04-16T17:55:19.463
> 
> 标签：qt, qgraphicsview

我有一个垂直滚动条策略为“ScrollBarAlwaysOff”的 QGraphicsView。问题是当我调整视图的大小时（通过 QSplitter 或仅通过调整窗口的大小），视图的右侧经常会出现一个空白区域。这是一个带有红色背景和黑色 QGraphicsRectItem 的示例：

```
#include <QtGui>

class MainWindow : public QMainWindow
{
public:
    MainWindow()
    {
        QGraphicsScene *scene = new QGraphicsScene(this);
        QRectF rect(-100, -100, 200, 200);
        QGraphicsRectItem *rectItem = new QGraphicsRectItem(rect);
        rectItem->setBrush(QBrush(Qt::black));
        scene->addItem(rectItem);
        scene->setSceneRect(rect); //commenting this out doesn't make a difference

        QGraphicsView *view = new QGraphicsView(this);
        view->setBackgroundBrush(QBrush(Qt::red));
        view->setTransformationAnchor(QGraphicsView::AnchorViewCenter);
        view->setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
        view->setScene(scene);

        setCentralWidget(view);
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();
    return a.exec();
} 
```

这是问题的样子：

![问题的图像](../Images/683a59a0b3d19e9898b564e06e941ce2.png)

我怎样才能解决这个问题？

编辑：单击此处将图片放大一点：http: [//i.stack.imgur.com/HeWHJ.png](https://i.stack.imgur.com/HeWHJ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T22:39:47.033

我试了一下，发现如果将矩形更改为 (0, 0, 300, 300)，它可以按需要工作。`QGraphicsView`处理带有负左上场景矩形的滚动条更新似乎有问题。您应该向 Qt 提交错误报告。

# postgresql - 检查约束中的 SQL 子查询

> ID：10179121
> 
> 赞同：53
> 
> 时间：2012-04-16T17:55:32.617
> 
> 标签：postgresql, foreign-key-relationship, plpgsql, check-constraints

我可以在检查约束中进行 SQL 子查询吗？

我有一个`post`带列的表`id, owner`
我有另一个`action`带列的`user_id, post_id`
表`user`带列的表`id`

`post_id -> post.id`还有`user_id -> user.id`_`post.owner -> user.id`

现在我想限制`post(post_id).id != user_id`表`action`

这怎么可能？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-16T18:13:04.367

不支持在 CHECK 约束中查看当前行之外的内容。

[http://www.postgresql.org/docs/9.1/interactive/sql-createtable.html](http://www.postgresql.org/docs/9.1/interactive/sql-createtable.html)说：

> 指定为列约束的检查约束应仅引用该列的值，而出现在表约束中的表达式可以引用多个列。
> 
> 目前，CHECK 表达式不能包含子查询，也不能引用当前行列以外的变量。

这种限制有充分的理由，但如果你喜欢在交通拥挤的情况下骑独轮车时玩弄燃烧的火把，你可以使用函数来颠覆这个限制。这种情况*不会*再咬你的情况很少见；相反，在触发代码中强制执行不变量会更安全。

[http://www.postgresql.org/docs/9.1/interactive/triggers.html](http://www.postgresql.org/docs/9.1/interactive/triggers.html)

# explode - 如何在PHP中仅在点后两位小数上标

> ID：10179122
> 
> 赞同：1
> 
> 时间：2012-04-16T17:55:33.517
> 
> 标签：explode, superscript, decimal

我有这个代码：

```
<?php echo $price; ?> 
```

这给了我这个结果：

```
1,500.99 
```

这段代码就像一个魅力，可以在点后面的数字上标：

```
$parts = explode('.', $price); 
echo "$parts[0].<sup>$parts[1]</sup>"; 
```

但如果我的价格是这样的：1,500.99€，它也会在€符号上标上标。这可以阻止吗？如果不是数字，不要上标，或者在点后仅上标 2 个字符？

它不需要是相同的代码，如果你有别的东西，我会试一试。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:03:19.477

正则表达式可能更灵活一点：

```
<?php
$price = "1,500.99";
$pattern = '/([\d,]+\.)(\d+)(.*)$/';
// ...or '/([\d\.]+,)(\d+)(.*)$/' if your currencies are 1.500,00

$formatted = preg_replace($pattern, '$1<sup>$2</sup>$3', $price);
// gives "1,500<sup>.99</sup>"

$price = "1,500.99€";

$formatted = preg_replace($pattern, '$1<sup>$2</sup>$3', $price);
// gives "1,500<sup>.99</sup>€" 
```

# c# - 在 C# Web 服务中优化读取 XML

> ID：10179125
> 
> 赞同：0
> 
> 时间：2012-04-16T17:55:41.503
> 
> 标签：c#, asp.net, xml

我正在尝试找到一种方法来优化我的网络服务的以下代码

在我的网络服务中，我收到了 10 个不同的 XML 文件，每个 xml 文件的格式始终相同，目前我有 10 种不同的方法来处理每个文件，下面的代码是其中一种方法的示例。

方法之间的唯一区别是局部变量和节点属性。

我不想拥有几乎相同的 10 种方法，我只想拥有一种。

谁能建议实现这一目标的最佳方法？

```
public void NavigateXmlSessionData(XPathNavigator xPathNav)
{
    xPathNav.MoveToRoot();
    xPathNav.MoveToFirstChild();

    xPathNav.MoveToFirstChild();
    string  description, personId;

   // initalise vars
    description = "";
    personId = "";

    do
    {
        //display the child nodes
        if (xPathNav.MoveToFirstChild())
        {
            while (xPathNav.MoveToNext())
            {
                switch (xPathNav.Name)
                {
                    #region NodeAttributes
                    case "Description":
                        {
                            StringBuilder strBuild = new StringBuilder(xPathNav.Value, 200);
                            description = strBuild.Replace('\'', ' ').ToString();
                            break;
                        }
                    case "PersonId":
                        {
                            StringBuilder strBuild = new StringBuilder(xPathNav.Value, 200);
                            personId = strBuild.Replace('\'', ' ').ToString();
                            break;
                        }
                        #endregion
                }
            }
            //move back to the parent
            xPathNav.MoveToParent();
        }

        ProcessRecord();
        // initalise vars
        description = "";
        personId = "";

    } while (xPathNav.MoveToNext());
} 
```

# sql-server-2008 - 对表值函数 tvf 执行一系列联合语句的非动态方法

> ID：10179127
> 
> 赞同：2
> 
> 时间：2012-04-16T17:55:58.683
> 
> 标签：sql-server-2008, tsql

我有一个表值函数，它返回有关特定帐户的一些详细信息。像这样的东西。复杂得多，但你明白了。如果这有所不同（不是内联语句），它是一个多行 TVF

```
select * from dbo.TBFDetailsByAccountKey(1234)

-----------------------------------------------
date       |    amount    |     detail        |
-----------------------------------------------
4/1/2012   |    10.23     |  payment stuff    |
4/2/2012   |    12.40     |  other stuff      |
4/2/2012   |    14.23     |  second pmt today | 
```

我现在需要在一系列 UNION ALL 语句中重复调用相同的 TVF，以便返回一组存款中包含的所有帐户密钥的详细信息。有没有办法在不使用动态 sql 的情况下做到这一点？

我目前的方法是这样......但它使用动态sql，我一直认为应该有更好的“非动态”方式。

```
DECLARE @pResult varchar(max)

SELECT @pResult = COALESCE(@pResult + ' UNION ALL ', '') + 
        'SELECT * FROM dbo.TBFDetailsByAccountKey(' + 
        Cast(AccountKey AS VarChar(25)) + ')'
    FROM Account WHERE DepositKey = @pDepositKey

EXEC(@pResult)  /* execute dynamic sql created above */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:22:55.550

似乎[CROSS APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.100%29.aspx)旨在完成这项工作：

```
SELECT AccountDetails.*
FROM Account
CROSS APPLY
(
  select * 
    from dbo.TBFDetailsByAccountKey(Account.AccountKey)
) AccountDetails
WHERE Account.DepositKey = @pDepositKey 
```

# ruby-on-rails - 从本地 SQLite 到 Heroku 上的 Postgres 的 Rails 3.2

> ID：10179128
> 
> 赞同：2
> 
> 时间：2012-04-16T17:55:59.687
> 
> 标签：ruby-on-rails, sqlite, postgresql, heroku

我在本地使用 sqlite 开发了一个应用程序，但现在想将其移至 Heroku，所以我将从现在开始使用 postgres。到目前为止，我不需要保留数据库，我只需要 Heroku 不要尝试安装 Sqlite，因为它会像这样爆炸：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options. 
```

我已经更改了我的 database.yml 文件并切换`'gem' "sqlite3"`到`'gem' "pg"`了我的 Gemfile，但 heroku 仍然很生气。还有什么需要改变的，所以当我提交我的应用程序时它不会尝试安装 sqlite3？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:13:06.317

将 Gemfile 更改为使用 gem 'pg' 后，您需要重新运行该`bundle`命令。完成后，将 Gemfile 和 Gemfile.lock 提交到 git，然后将应用程序推送到 Heroku，它应该可以工作。

如果您不在本地运行 Postgres，那么您应该将 gem 'pg' 添加到您的 Gemfile 中的生产组，否则当您在本地运行 bundle 时，您会在尝试编译 gem 时遇到问题。您可以安全地将 gem 'sqlite' 移动到 Gemfile 中的开发组，以便在环境之间使用不同的数据库。*但*请注意，在部署时在本地运行相同的数据库是最安全的。

# python - 在 django admin 中过滤外键字段

> ID：10179129
> 
> 赞同：45
> 
> 时间：2012-04-16T17:56:00.223
> 
> 标签：python, django

我有这些模型：

```
class Entity(models.Model):
       name=models.CharField(max_length=100)

class Theme(models.Model):
   name=models.CharField(max_length=100)
   entity=models.OneToOneField(Entity)

class Company(models.Model):
    name=models.CharField(max_length=100)
    theme=models.OneToOneField(Theme,null=True,blank=True) 
```

我想在管理员中`theme`添加时过滤字段`Company`，如下所示：

```
class CompanyAdmin(admin.ModelAdmin):
   def queryset(self, request):
      qs = super(CompanyAdmin, self).queryset(request)
      qs.theme.queryset = Theme.objects.filter(name__iexact='company')
      return qs

admin.site.register(Company, CompanyAdmin) 
```

我尝试了很多东西，但没有任何效果！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-16T22:17:29.110

使用`render_change_form`方法：

```
class CompanyAdmin(admin.ModelAdmin):
    def render_change_form(self, request, context, *args, **kwargs):
         context['adminform'].form.fields['theme'].queryset = Theme.objects.filter(name__iexact='company')
         return super(CompanyAdmin, self).render_change_form(request, context, *args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-10-01T07:43:17.443

我实际上更喜欢`get_form`这样做：

姜戈 < 2:

```
class CompanyAdmin(admin.ModelAdmin):
    def get_form(self, request, obj=None, **kwargs):
        form = super(CompanyAdmin, self).get_form(request, obj, **kwargs)
        form.fields['theme'].queryset = Theme.objects.filter(name__iexact='company')
        return form 
```

姜戈 >= 2

```
class CompanyAdmin(admin.ModelAdmin):
    def get_form(self, request, obj=None, **kwargs):
        form = super(CompanyAdmin, self).get_form(request, obj, **kwargs)
        form.base_fields['theme'].queryset = Theme.objects.filter(name__iexact='company')
        return form 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-12-06T14:23:55.897

看这里[http://books.agiliq.com/projects/django-admin-cookbook/en/latest/filter_fk_dropdown.html](http://books.agiliq.com/projects/django-admin-cookbook/en/latest/filter_fk_dropdown.html)

```
@admin.register(Hero)
class HeroAdmin(admin.ModelAdmin, ExportCsvMixin):
    ...
    def formfield_for_foreignkey(self, db_field, request, **kwargs):
        if db_field.name == "category":
            kwargs["queryset"] = Category.objects.filter(name__in=['God', 'Demi God'])
        return super().formfield_for_foreignkey(db_field, request, **kwargs) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-04-13T12:43:40.690

在 Django 3 中很容易：

```
class CompanyAdmin(admin.ModelAdmin):
    list_display = ('name','theme')
    list_filter = ('theme__name',)

admin.site.register(Company,CompanyAdmin) 
```

这将在屏幕右侧显示一个过滤器，其中包含主题名称列表。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-23T15:56:13.500

另一种选择是创建一个自定义模型表单，其中`theme`字段的查询集属性将被微调以满足您的需求。

```
class CompanyForm(ModelForm):
    class Meta:
        model = CompanyForm
        fields = __all__ # or a tuple of fields

    def __init__(self, *args, **kwargs):
        super(CompanyForm, self).__init__(*args, **kwargs)
        if self.instance: # Editing and existing instance
            self.fields['theme'].queryset = Theme.objects.filter(name__iexact='company') 
```

这个模型表单也可以在 django 管理区域之外重用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-14T08:34:32.830

我面临需要将过滤器添加到父 ModelAdmin 类（所有其他 ModelAdmins 继承自）的 foreignKey 查询集中，也就是说，我无法确切知道我需要哪个模型，这是我的解决方案：`db_field.related_model.objects.filter()`

```
class TSModelAdmin(admin.ModelAdmin):
   exclude = ('site',)
    ...

      def formfield_for_foreignkey(self, db_field, request, **kwargs):
        if db_field.related_model:
            kwargs["queryset"] = 
            db_field.related_model.objects.filter(site=request.user.user_profile.site)
        return super().formfield_for_foreignkey(db_field, request, **kwargs) 
```

使用 django 版本**2.2.10**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-03T15:48:01.120

有点无关，但与此类似，因此我将在此处发布。

我正在寻找一种方法来删除ModelForm 外键字段上的*NULL选择选择。*我首先认为我可以像在此处的其他答案中那样过滤查询集，但这不起作用。

我发现我可以在方法中像这样过滤 pk 值为*NULL*`get_form`的条目：

```
 class CompanyAdmin(admin.ModelAdmin):
    def get_form(self, request, obj=None, **kwargs):
        form = super().get_form(request, obj, **kwargs)
        # remove null choice
        form.base_fields["theme"].choices = ((pk, display) for pk, display in form.base_fields["theme"].choices if pk)
        return form 
```

# javascript - 在 NicEdit 上需要解决方案将 HTML 文本插入实例

> ID：10179131
> 
> 赞同：1
> 
> 时间：2012-04-16T17:56:03.083
> 
> 标签：javascript, html, wysiwyg, nicedit

我正在使用此功能将文本插入 NicEdit，

```
function insertAtCursor(editor, value){
var editor = nicEditors.findEditor(editor);
var range = editor.getRng();                    
var editorField = editor.selElm();
editorField.nodeValue = editorField.nodeValue.substring(0, range.startOffset) +
                        value +
                        editorField.nodeValue.substring(range.endOffset, editorField.nodeValue.length);} 
```

**此代码适用于简单文本，但是当我将 HTML 内容传递给它时，它不会在 div 中呈现 HTML 输出，而是将 HTML 代码原样转储到 Instance Div 中。**

***例子：***

```
<div class="one">Some text here</div> 
```

这必须在实例中显示为**“这里有一些文本”** ，其余代码隐藏在源代码中。

谁能给我一个解决这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:05:56.810

在工作了一整夜并尝试了不同的解决方案后，我终于让它工作了！:)

如果有人想知道解决方案，我必须添加一个替换功能

```
replace() 
```

内容并使其支持 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:08:45.283

[在这里](https://stackoverflow.com/a/12869304/1742621)查看我的答案。这是我创建的一个插件，用于在光标位置插入 html。

# file-io - 无头运行 Metro 应用程序

> ID：10179135
> 
> 赞同：4
> 
> 时间：2012-04-16T17:56:17.737
> 
> 标签：file-io, windows-8, microsoft-metro, headless

我遇到了一些障碍，希望有人能提供帮助！

我编写了一个作为单元测试运行器的 Metro 应用程序，现在我需要能够无头调用此应用程序，以便在构建过程中将其用于验证。Metro 应用程序的工作方式是运行一堆单元测试，生成一个包含测试结果的 XML 文件，并将结果显示给用户。

理想情况下，我将有一个简单的脚本来运行 Metro 应用程序、执行测试、退出应用程序，然后能够读取生成的 XML 文件中的结果。这可能吗？如果可以，最好的方法是什么？

以下是一些更具体的问题：

1.  如何无头启动 Metro 应用程序，在 Metro 应用程序中是否有一种方法可以检测到这一点，使其不等待用户输入？

2.  是否可以从外部进程访问 Metro 应用程序包中的文件？

编辑 - 一种解决方法是创建一个自定义 Visual Studio 测试运行程序，然后找到一种方法在每次构建时自动运行测试。我知道这可以在 IDE 中完成，但我不确定是否有办法用脚本来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-25T16:49:28.490

我想你早就解决了这个问题，但是为了其他人想要这样做，我让它工作起来没有太多麻烦。为了以自动化/无头方式执行 Metro 应用程序，我编写了一个简单的桌面命令行实用程序，它采用 Metro 应用程序的名称并使用[IApplicationActivationManager](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706902%28v=vs.85%29.aspx)接口来启动它。然后我可以从脚本中调用该实用程序。

[该接口的ActivateApplication](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706903%28v=vs.85%29.aspx)方法的第二个参数是传递给激活的应用程序的字符串，有点像命令行参数。它显示为应用程序处理程序接收到的`Arguments`属性。Visual Studio 模板项目中的默认实现将此值传递给第一次导航到它时，它作为. 你可以在任何一个更方便的地方抓住它。`LaunchActivatedEventArgs``OnLaunched``OnLaunched``MainPage``OnNavigatedTo``Parameter``NavigationEventArgs`

我的启动器实用程序通过那里传递一个硬编码的标志，以及转发它自己的命令行参数。这允许顶级脚本将任意数据向下传递到 Metro 应用程序。该应用程序可以使用该数据来实现它正在无头运行并运行其测试。它可以将你喜欢的任何类型的结果数据吐到它的一个文件夹中（比如它的[LocalFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localfolder)），然后桌面应用程序可以从中读取`%LOCALAPPDATA%\Packages\APPNAME\LocalState`。我将启动器实用程序设置为在启动应用程序后等待结果文件出现，然后使用它们来确定自己的退出代码。启动器实用程序之后无法终止应用程序，但应用程序可以在通过[CoreApplication.Exit](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.core.coreapplication.exit.aspx)完成时自行终止。

该设置在一段时间内运行良好，但我现在遇到的一个问题是应用程序并不总是启动到前台，并且运行时将在它不是前台应用程序后暂停/终止应用程序一些时间（目前约 10-15 秒）。因此，任何需要太长时间的测试都不适用于这种方法，除非我还没有发现一些解决方法（当我遇到这个问题时我正在寻找它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T23:48:24.750

我怀疑你能做到。

这与尝试无头运行 WPF 应用程序的问题相同，但更难，因为您还必须处理 Metro 沙盒安全模型。

PS很高兴被证明是错误的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:10:02.247

不，对不起。您首先需要一个脚本，该脚本首先以“无头”模式运行 Metro 应用程序，但您遇到了困难。你的第二个要求是你的下一面墙。一个应用程序看不到，更不用说监视另一个应用程序/线程/进程。那么你的第三个要求也是不可能的。应用程序内的文件是隔离的。在我看来，你找到了一个很好的桌面应用程序候选人。话虽如此，但不要错误地认为您不能拥有作为仪表板的配套 Metro 应用程序。只是执行核心不能托管在 WinRT 沙箱内。

# wix - 在 MSI 安装程序中强制关闭？

> ID：10179139
> 
> 赞同：1
> 
> 时间：2012-04-16T17:56:33.260
> 
> 标签：wix, windows-installer, shutdown

我正在开发硬件驱动程序安装程序/更新程序。安装程序/更新程序的一部分会安装更新的 FPGA 固件。升级FPGA固件时对卡的要求是机器必须完全断电才能使固件升级生效。我找到了 MSI 安装程序的计划和强制重启属性，但没有找到强制或计划关闭的类似物。msi/windows-installer/WiX 中有什么可以做到这一点，或者任何人都可以建议一种方法来完成这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T23:48:12.577

您可以使用 QuietExecute CA 来调用关闭或编写自己的 CA。还要确保将 /f 设置为强制选项。否则，请务必小心，让用户能够禁止此关闭。另一个想法可能是让您的应用程序告诉用户该软件在硬件冷启动之前无法运行，而不是让安装程序执行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:07:48.100

您可以尝试运行“Shutdown -s”来关闭机器。看看[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/shutdown.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/shutdown.mspx?mfr=true)

# ios - 获取其他 UITableViewController 的元素

> ID：10179146
> 
> 赞同：0
> 
> 时间：2012-04-16T17:56:43.550
> 
> 标签：ios, xcode, uitableview

有一个问题：我有两个UITableViewController：FirstController，SecondController。如何从 SecondController 中的 FirstController 获取每个单元格的 accesoryType？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:08:29.927

只需在虚拟 NSInteger 对象中写入 Cell 的数量，然后在您的第二个 TVC 中访问它。如果它们都由同一个控制器加载和添加，则非常容易，因为您可以使用属性处理它，如果没有，则使用自定义委托处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:05:09.787

您可以尝试以下方法：[

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
cell = [UITableViewCell ....
....
[cell accessoryView];
return cell;

} 
```

您可以看看： http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)希望有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:04:03.553

如果我理解正确的话，你想（有点）将表格从 FirstVC 复制到 SecondVC - 或者至少是每个单元格的附件类型。SecondVC 中的一个弱父属性是我将如何做的——虽然，诚然，我不知道其他方法。

然后，在 SecondVC 中，`tableView:cellForRowAtIndexPath:`您会说类似`cell.accessoryType = [parent.tableView cellForRowAtIndexPath:indexPath].accessoryType;`. 这应该将 SecondVC 的 cell.accessoryType 设置为同一 indexPath 中父级的 cell.accessoryType。

# vba - Excel VBA：更改单元格后验证单元格的值

> ID：10179150
> 
> 赞同：2
> 
> 时间：2012-04-16T17:56:47.047
> 
> 标签：vba, excel, excel-2007

我有一个函数可以在用户将一个单元格更改为该值后将一系列单元格更新为某个值。但是，此范围内的单元格不共享相同的验证范围，因此我想对每个更新的单元格进行单独验证。

这是我到目前为止所拥有的。对于每个单元格，数据验证设置为其自己的验证范围和可接受的值。由于某种原因，即使数据不在验证范围内，验证仍然成立。我不太确定 validation.value 属性是如何工作的..

```
For index = 1 to UBound(someArray)
    wksSomeSheet.Cells(index, column).Value = requiredValue
    If Not wksSomeSheet.Cells(index, column).Validation.Value Then
        MsgBox "A value is not supported for one the cells."
        Exit For
    End If
Next 
```

或者我应该实现它以便我使用它`Range("validationRange").find(requiredValue)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:53:20.403

在查看了 Siddharth 的博客后，我对他的代码进行了一些微小的更改以使其适应我的需要：

```
Dim currentValidation As Excel.Validation
wksSomeSheet.Cells(index, Target.Column).Value = requiredValue

Set currentValidation = wksSomeSheet.Cells(index, Target.Column).Validation
If currentValidation.Type = xlValidateList Then
    Dim validationFound As Boolean, MyArray As Variant
    validationFound = False
    MyArray = Application.WorksheetFunction.Transpose(Range(Mid(currentValidation.Formula1, 1)))
    For i = 1 To UBound(MyArray)
        If requiredValue = MyArray(i, 1) Then
            validationFound = True
            Exit For
        End If
    Next

    If Not validationFound Then
        MsgBox wksSomeSheet.Cells(index, wksSomeSheet.Range("myRange").Column).Value & " does not have a valid value."
        Exit For
    End If
End If 
```

# php - 使用 jQuery/AJAX 从 MySQL DB 获取登录用户列表？

> ID：10179153
> 
> 赞同：0
> 
> 时间：2012-04-16T17:56:50.803
> 
> 标签：php, jquery, mysql, ajax

我有一个带有 div 的网站，我想列出所有当前登录的用户。我在我的数据库中设置了一个布尔值，其中 1 表示用户已登录。我正在尝试使用对所有登录用户轮询数据库的 php 页面的 jQuery AJAX 调用动态生成列表。

PHP 代码检查数据库并创建所有登录用户的列表。我的问题是我似乎无法让 jQuery 函数从页面加载数据。

```
<?php
   include ('settings.php');
   if ($db_found)
   {
      $sql = "SELECT * FROM $db_table WHERE logged_in='1'";
      $result = mysql_query($sql);
      $count = mysql_num_rows($result);
      // Check if the account is already in the DB
      $i = 0;
      while ($i < $count)
      {
         $online = mysql_result($result,$i,"logged_in");
         if ($online == 1)
         {
            $user = mysql_result($result,$i,"displayname");
            print "<li>$user</li>";
         }
         $i++;
      }
      mysql_close($db_handle);
   }
?> 
```

我使用jQuery加载的方式有什么问题，所以loggedin.php页面内容将显示在#loggedin-players div中？

```
<script type="text/javascript">
    function updatePlayerList()
    {
    $('#loggedin-players').load('loggedin.php');
    }
    $setInterval("updatePlayerList()", 5000);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:00:32.050

不应该有`$`前`setInterval`

```
setInterval("updatePlayerList()", 5000); 
```

你的函数永远不会被调用。

# c# - 将应用程序添加到 Windows 启动的最佳方法是什么？

> ID：10179158
> 
> 赞同：-1
> 
> 时间：2012-04-16T17:57:10.910
> 
> 标签：c#, .net, startup

我在我的程序中使用的代码如下：

```
 public static void SetStartup(string AppName, bool enable, string newpath)
    {
        if (Autostart == true)
        {
            string runKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run";

            Microsoft.Win32.RegistryKey startupKey = Microsoft.Win32.Registry.LocalMachine.OpenSubKey(runKey);

            if (enable)
            {
                if (startupKey.GetValue(AppName) == null)
                {
                    startupKey.Close();
                    startupKey = Microsoft.Win32.Registry.LocalMachine.OpenSubKey(runKey, true);
                    // Add startup reg key
                    startupKey.SetValue(AppName, newpath);
                    startupKey.Close();
                }
            }
            else
            {
                // remove startup
                startupKey = Microsoft.Win32.Registry.LocalMachine.OpenSubKey(runKey, true);
                startupKey.DeleteValue(AppName, false);
                startupKey.Close();
            }
        }
    } 
```

但是当我单击应用按钮时，AVG Antivirus 弹出窗口会启动并说我的程序是未知恶意软件！？

![在此处输入图像描述](../Images/8c6dfb8f96efe73c0bb9bc6fd733d3d6.png)

我试图将我的程序复制到 StartUp 文件夹，但复制的文件变为受限（必须以管理员身份运行），这不起作用。

这怎么可能？如果无法使用上述功能，那么其​​他程序如uTorrent start 是如何在每次windows 启动时自动启动的。

如何在我的程序上添加一个选项，让我在 Windows 启动时自动启动，而不会出现这个烦人的防病毒弹出窗口？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-16T18:14:31.007

如果您不想看到这个烦人的防病毒弹出窗口，您只需单击 AVG 窗口/弹出窗口中的“允许”按钮。

# java - 在 FF 插件中桥接 JavaScript/Java

> ID：10179160
> 
> 赞同：0
> 
> 时间：2012-04-16T17:57:19.413
> 
> 标签：java, javascript, sockets, firefox, firefox-addon-sdk

我正在尝试在 FF 插件（使用 jetpack）和将处理来自插件的所有请求的 java 服务器之间实现连接。看来我可以建立连接，但消息不流动。我没有从插件中得到任何东西。

在这里我发布代码：

JavaScript（客户端）

```
const {Cc,Ci} = require("chrome");

exports.main = function() {
try  {
    // At first, we need a nsISocketTransportService
    var transportService =  
        Cc["@mozilla.org/network/socket-transport-service;1"]
        .getService(Ci.nsISocketTransportService);  

    // Try to connect to localhost:2222
    var transport = transportService.createTransport(null, 0, "localhost", 2222, null);  

    var stream = transport.openInputStream(Ci.nsITransport.OPEN_UNBUFFERED,null,null); 
    var instream = Cc["@mozilla.org/scriptableinputstream;1"]
        .createInstance(Ci.nsIScriptableInputStream); 

    // Initialize
    instream.init(stream);
    var outstream = transport.openOutputStream(0, 0, 0);

    // Write data
    var outputData = "bye";
    outstream.write(outputData, outputData.length);

    var dataListener = { 
        data : "", onStartRequest: function(request, context){},

        onStopRequest: function(request, context, status){
            instream.close();
            outstream.close();
            listener.finished(this.data); 
        }, 

        onDataAvailable: function(request, context, inputStream, offset, count) { 
            this.data += instream.read(count); 
            console.log(this.data);             
        }, 
    };

    var pump = Cc["@mozilla.org/network/input-stream-pump;1"].createInstance(Ci.nsIInputStreamPump); 
    pump.init(stream, -1, -1, 0, 0, false); 
    pump.asyncRead(dataListener, null); 

} catch (e){ 
    console.log("Error" + e.result + ": " + e.message); 
    return e; 
} return null;
}; 
```

Java（服务器）

```
ServerSocket providerSocket;
Socket connection = null;
ObjectOutputStream out;
ObjectInputStream in;
String message;
GoopirServer(){}
void run() {
    try{
        // Creating a server socket
        providerSocket = new ServerSocket(2222, 10);

        // Wait for connection
        System.out.println("Waiting for connection");
        connection = providerSocket.accept();
        System.out.println("Connection received from " + connection.getInetAddress().getHostName());

        // Get Input and Output streams
        out = new ObjectOutputStream(connection.getOutputStream());
        out.flush();
        in = new ObjectInputStream(connection.getInputStream());
        sendMessage("Connection successful");

        // The two parts communicate via the input and output streams
        do{
            try{
                message = (String)in.readObject();
                System.out.println("client>" + message);
                if (message.equals("bye"))
                    sendMessage("bye");
            }
            catch(ClassNotFoundException classnot){
                System.err.println("Data received in unknown format");
            }
        }while(!message.equals("bye"));
    }
    catch(IOException ioException){
        ioException.printStackTrace();
    }
    finally{
        // Closing connection
        try{
            in.close();
            out.close();
            providerSocket.close();
        }
        catch(IOException ioException){
            ioException.printStackTrace();
        }
    }
}

/*
 * Sends a message to the plugin
 */
void sendMessage(String msg)
{
    try{
        out.writeObject(msg);
        out.flush();
        System.out.println("server>" + msg);
    }
    catch(IOException ioException){
        ioException.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:12:02.170

您可以尝试添加：`outstream.flush();` 之后：`outstream.write(outputData, outputData.length);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:27:05.280

您的 Firefox 端似乎是正确的（除了使用阻塞调用来写入数据），问题出在 Java 端。`ObjectInputStream`并且`ObjectOutputStream`用于交换序列化对象（以未记录的格式），而不是字符串。而且我认为`ObjectInputStream`期望立即收到幻数，难怪它在没有输入的情况下锁定。您可能想要使用的是`BufferedReader`and `PrintWriter`。此外，您应该为您的消息使用一些分隔符，例如换行符（这将允许使用`BufferedReader.readLine()`）。

# php - PHP、MYSQL 选择框选择不正确

> ID：10179172
> 
> 赞同：3
> 
> 时间：2012-04-16T17:58:20.727
> 
> 标签：php, javascript

还有一个奇怪的：

这是我的php：

```
echo "</tr><tr>";
echo "<td style='color:white;'>".$row['iDesc']."</td><td>".$row['pCnt']."</td><td style='color:".$color.";'>".$row['pDur']."</td><td>".$row['pStr']."</td><td>".$row['pSpd']."</td><td>";
echo "<select name='wield".$row['pNum']."' id='wield".$row['pNum']."' size='1' style='width: 100px;' onChange='wieldit(".$row['pNum'].");'>";
echo "<option value=0>Use On";
$query = "Select item, iDesc from item where iType = 1";
$result2 = mysql_query($query, $_SESSION['connect']);
while ($row2 = mysql_fetch_array($result2)) {
  echo "<option";
  echo " value=".$row2['item'].">".$row2['iDesc']."</option>";
}
echo "</select></td>";
} 
```

这是我的js：

```
function wieldit(num) {
    var id = "wield"+num;
    var e = $(id); 
    var t =  e.options[e.selectedIndex].value;
    var params = "sWield="+t;
    params += "&sNum="+num;
    new Ajax.Updater('div06', 'php/pack.php', {method: 'get', parameters: params, onComplete: showBody});
} 
```

当我运行它时，选择框中的值是 0、1、2、26、25、24、23、31。例如，我正在运行 $row['pNum'] = 6 并且我正在选择选择值31\. 当我对 js 中的参数进行警告时，sWield = 0 和 sNum = 6。问题是，sWield 应该是 31\. Ideas?。如果我使用不同的值运行，例如 $row['pNum'] = 11 并在 js sWield = 25 中选择值 25 并且 sNum 应该是 11。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:01:17.527

您没有关闭第一个选项 `echo "<option value=0>Use On</option>";`

试着先关闭这个！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:20:09.480

值 31 是选择框中的第 7 个选项。当 Javascript 从 0 开始计数时，它显示 6。

所以它似乎提醒索引而不是选择的值。您可以尝试这样做，并在值周围加上引号： `<option value='31'>Arms</option>`

# java - 在写入 OutputStream 时测量中间吞吐量 [或] 为什么 write() 会阻塞，而 read() 不会？

> ID：10179177
> 
> 赞同：1
> 
> 时间：2012-04-16T17:59:07.683
> 
> 标签：java, android, nio, apache-commons, java-io

我需要测量上传和下载大文件的中间吞吐量（通过使用[Apache Commons Net API](http://commons.apache.org/net/api-3.1/org/apache/commons/net/ftp/FTPClient.html)的 FTP ）。

**下载：（**没问题）

一切都很好下载，它使用如下代码：

```
InputStream is = ftp.retrieveFileStream(filePath);
byte[] buffer = new byte[256 * 1024];
int read;

while ((read = is.read(buffer, 0, buffer.length)) != -1) {
    Log.v(TAG, "Read = " + read);
} 
```

这里，缓冲区大小为 256 KB，下载文件的总大小为 1 MB。仍然每个单独的调用`is.read()`仅返回大约 2 KB。在这种情况下，直到缓冲区满`read()` **才阻塞。**这使我能够测量中间下载吞吐量。到目前为止，一切都很好。

**上传：（**有问题）

现在痛苦来了。当我分配一个类似大小的缓冲区来写入时`OutputStream`，调用会`write()`阻塞，直到写入整个 256 KB。

为什么只会`write()`阻塞，而`read()`不会呢？

所以我尝试使用[`nio`](http://developer.android.com/reference/java/nio/channels/package-summary.html). 与`Outputstream`的 write() 不同，的 write() 方法`WritableByteChannel`返回实际写入的字节数。所以它必须是非阻塞的，对吧？没有这样的运气。这`write()`也会阻塞，直到整个缓冲区都被写入。这是代码：

```
byte[] buffer = new byte[256 * 1024];
new Random.nextBytes(byteArray);

OutputStream os = ftp.storeFileStream(filePath);
WritableByteChannel channel = Channels.newChannel(os);
ByteBuffer byteBuffer = ByteBuffer.wrap(byteArray);
int written = channel.write(byteBuffer); 
```

那么当上传阻塞时如何测量中间吞吐量呢？

一种方法是使用 Android 的[`TrafficStats`API](http://developer.android.com/reference/android/net/TrafficStats.html)。但它也有自己的挫败感。根据文档，这些统计信息可能并非在所有平台上都可用。此外，它还需要处理整数计数器溢出（2GB 之后）等场景，以及在 3G 和 Wifi 之间切换时[某些平台上的](http://code.google.com/p/android/issues/detail?id=19938)[计数器重置错误。](https://stackoverflow.com/q/9083579/165674)

有人可以告诉我一条出路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T22:01:25.263

> 为什么只有 write() 阻塞，而 read() 没有？

因为这就是底层操作系统的行为方式。

# java - Java - 实现接口

> ID：10179178
> 
> 赞同：5
> 
> 时间：2012-04-16T17:59:08.677
> 
> 标签：java, inheritance, interface, superclass, comparable

我正在为涉及实现接口的编程课程做作业。这里的问题是我真的完全不理解接口或它们的用途（教授不太擅长解释它）。

任务是创建一个“Vehicle”超类，而不是三个子类，比如“Truck”或“Jeep”，它们每个都有自己的几个特征。“Vehicle”类必须实现可比较的接口，我想我已经想通了（我有`compareTo()`比较车辆门数的方法），另外一个类也必须实现“Hybrid”类（我不知道这是什么意思）。然后我们必须实现`toString()`、`equals(Object o)`和`compareTo(Object o)`方法。

我想我有`compareTo()`下来，但`equals()`我不知道。我们要做的最后一件事是编写一个 Main 来测试，这包括制作一个 Vehicle 对象的数组，将它们打印出来，对它们进行排序，然后重新打印它们。它还应该遍历数组并打印出混合动力车的价格溢价，并使用该`equals(Object o)`方法比较 2 辆汽车。

这是我的“车辆”超类的代码

```
package vehicle;

abstract public class Vehicle implements Comparable {
    private String color;
    private int numberOfDoors;

    // Constructor
    /**
     * Creates a vehicle with a color and number of doors
     * @param aColor The color of the vehicle
     * @param aNumberOfDoors The number of doors
     */
    public Vehicle(String aColor, int aNumberOfDoors) {
        this.color = aColor;
        this.numberOfDoors = aNumberOfDoors;
    }

    // Getters
    /**
     * Gets the color of the vehicle
     * @return The color of the vehicle
     */
    public String getColor() {return(this.color);}
    /**
     * Gets the number of doors the vehicle has
     * @return The number of doors the vehicle has
     */
    public int getNumberOfDoors() {return(this.numberOfDoors);}

    // Setters
    /**
     * Sets the color of the vehicle
     * @param colorSet The color of the vehicle
     */
    public void setColor(String colorSet) {this.color = colorSet;}
    /**
     * Sets the number of doors for the vehicle
     * @param numberOfDoorsSet The number of doors to be set to the vehicle
     */
    public void setNumberOfDoors(int numberOfDoorsSet) {this.numberOfDoors = numberOfDoorsSet;}

    @Override
    public int compareTo(Object o) {
        if (o instanceof Vehicle) {
            Vehicle v = (Vehicle)o;
            return this.numberOfDoors - v.getNumberOfDoors();
        }
        else {
            return 0;
        }
    }

    /**
     * Returns a short string describing the vehicle
     * @return a description of the vehicle
     */
    @Override
    public String toString() {
        String answer = "The car's color is "+this.color
                +". The number of doors is"+this.numberOfDoors;
        return answer;
    }
} 
```

我还将发布我的一个子类

```
package vehicle;

abstract public class Convertible extends Vehicle {
    private int topSpeed;

    // Constructor
    /**
     * Creates a convertible with a color, number of doors, and top speed
     * @param aColor The color of the convertible
     * @param aNumberOfDoors The number of doors of the convertible
     * @param aTopSpeed The top speed of the convertible
     */
    public Convertible (String aColor, int aNumberOfDoors, int aTopSpeed) {
        super(aColor, aNumberOfDoors);
        this.topSpeed = aTopSpeed;
    }

    // Getters
    /**
     * Gets the top speed of the convertible
     * @return The top speed of the convertible
     */
    public int getTopSpeed() {return(this.topSpeed);}

    // Setters
    /**
     * Sets the top speed of the convertible
     * @param topSpeedSet The top speed to set to the convertible
     */
    public void setTopSpeed(int topSpeedSet) {this.topSpeed = topSpeedSet;}

    /**
     * Returns a short description of the convertible
     * @return a short description of the convertible
     */
    @Override
    public String toString() {
        String answer = "The car's color is "+super.getColor()
                +", the number of doors is "+super.getNumberOfDoors()
                +", and the top speed is "+this.topSpeed+" mph.";
        return answer;
    }
} 
```

我绝对不是要求任何人为我做这项工作，但如果有人能更清楚地了解接口是如何工作的，以及这个家庭作业的真正要求是什么，那就太好了。

非常感谢所有帮助

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T18:07:49.297

而不是做你的特定示例，我将介绍接口为什么有用以及如何在更一般的情况下使用它们。

**什么是接口？**

当我第一次开始编程时，我还发现接口的概念令人困惑，因此我喜欢将其视为标准的“规则手册”。实现此规则手册的每个类都有一个必须遵循的“规则”列表。例如，考虑以下接口：

```
interface Bounceable{
  public void setBounce(int bounce);
  public int getBounce();
} 
```

上面的这个规则书为反弹的东西声明了一个接口。它指出任何可反弹的东西都必须设置它的反弹并获得它的反弹。任何实现此接口的类都必须遵循规则手册。

***为什么这本规则手册会有用？***

好吧，如果您想编写一个游乐场，孩子们可以在那里玩各种有弹性的东西怎么办。您可能会制作以下类型的有弹性的东西..

```
public class FootBall implements Bounceable{
private int bounce;

public void setBounce(int bounce){
   this.bounce = bounce;
}

public int getBounce(){
  return this.bounce;
}

}

public class BaseBall implements Bounceable{
private int bounce;

public void setBounce(int bounce){
   this.bounce = bounce;
}

public int getBounce(){
  return this.bounce;
}

} 
```

上面的类定义了一种弹力球。然后，您将创建您的游乐场类，并可以围绕抽象 Bounceable 接口定义方法。例如，如果篮球框是您班级中的一种方法怎么办？如果它可以接受任何有弹性的东西作为论据呢？这意味着你可以传**任何**类型的球，只要它实现了可弹跳。如果你没有接口或类似的功能，你会看到你的代码会变得多么混乱，你实现的球越多。

**编辑：**我已经包含了一个小的实际示例..

一个实际的例子是..

```
public void slamDunk(Bounceable bouncyThing){
  System.out.println("You scored three points!");
} 
```

以下两个对 slamDunk 的调用都是有效的......

```
slamDunk(new BaseBall());

slamDunk(new FootBall()); 
```

现在，您的`slameDunk`函数可以使用任何可弹跳的对象得分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:09:09.297

Comparable 接口在[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html) [http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)中进行了描述， 并具有签名：

```
int compareTo(T o)
Compares this object with the specified object for order. 
Returns a negative integer, zero, or a positive integer as this object is less than, 
equal to, or greater than the specified object. 
```

如果你写：

```
public class Vehicle implements Comparable {
//...
} 
```

然后尝试编译它，你会得到一个错误。该接口要求您必须有一个方法`compareTo()`。您必须编写它，并且它必须返回一个整数值。根据车辆是否“大于”、“小于”或等于另一车辆，这将是正数、负数或零。您决定“大于”的含义——它可以是质量、年龄、价值或任何东西。这就是接口的价值——它说明了你必须做什么，而不是你必须如何去做。

既然你想自己做这件事，我建议你遵循任何关于 Comparable 的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:17:12.703

正如其他人所说，接口就像一个类的合同。当一个类实现一个接口时，它声称以某种方式运行（例如，当您的类实现时`Comparable`，它声称与其他对象具有可比性，并且通过实现该`compareTo`方法来满足此契约。）

听起来你的麻烦不在于接口——你已经实现了`Comparable`。你应该检查`null`你的`compareTo`。

你问关于`equals(Object o)`. 这甚至比-当您要比较的对象与此对象相同时`compareTo(Object o)`它需要返回，而当它不是时，它需要返回。（小心并记得检查——如果是你应该返回false）。`true``false``null``o``null`

另外，您询问`toString()`，但您已经`toString()`在代码中实现了。唯一的评论是，一个特定的子类`toString()`可能应该提到一些特别的东西（例如，它是敞篷车或混合动力车等......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T07:08:32.943

> （在下面的场景中，将每个名词视为程序中的一个类（某个时间属性），将每个动词视为一个类的方法）

你正在建造一个机器人。您在机器人 1 上做了以下事情。2 个眼睛传感器、2 个手、2 条腿和一个头部（机器人的高度 = 2m） 2.为了与这个机器人通信，您从头部取出 10 根电线，从腿取出 10 根电线和 13电线从手。

逻辑是，如果 1 号头线连接 2 号腿线，那么机器人将行走。如果手上的 9 号线与 4 号线头相连，而头上的 1 号线与手上的 6 号线相连，那么双手将向上......等等。IMP 注意 - 头上的 3 号线不得接触腿上的 5 号线。否则每件事都会发生。

什么接口啊！

现在想象一下，这必须给第一次看到机器人的人。现在想想如何使用这个机器人。

* * *

在类似的注释中，当您创建一个类时，您应该注意其他程序将如何使用它。您是否希望其他程序可以使用公共字段（int 和 string），或者您想要简单的函数来处理所有这些复杂的整数逻辑。

Interface provides easy way to communicate between 2 classes and while doing that they don't have to worry about what will happen to other things of my class.

# jboss - 以编程方式刷新 JBoss 4.2.2 连接池

> ID：10179184
> 
> 赞同：2
> 
> 时间：2012-04-16T17:59:26.790
> 
> 标签：jboss, jndi, connection-pooling

我正在运行 JBoss 4.2.2。我正在尝试确定两者的正确代码：

1.  查找 org.jboss.resource.connectionmanager.JBossManagedConnectionPool
2.  对所述池执行 flush() 操作。

我发现了其他几个没有答案的问题。我希望这不会成为他们中的另一个。

到目前为止我发现的最接近的问题：[https ://community.jboss.org/message/637784](https://community.jboss.org/message/637784)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T01:36:11.233

这是使用快速 groovy 示例的基础知识。首先，您需要在您的类路径中**添加 jboss-4.2.2/client/jbossall-client.jar**。接下来，您需要数据源的 JMX ObjectName。**[在http://localhost:8080/jmx-console/](http://localhost:8080/jmx-console/)**的 JMX 控制台中找到它可能会有所帮助，或者您已部署。所以 ObjectName 的字符串值是**domain + ":" + the properties**。

例如：

![在此处输入图像描述](../Images/96b14c9bc1a3034e5c062a00ee29e5ab.png)

ObjectName 是： **jboss.jca:name=DefaultDS,service=ManagedConnectionPool**。

接下来，在 JNDI 中查找 RMIAdaptor。这是 MBeanServer 接口，允许您在目标 MBean 上调用**刷新**操作。然后调用调用。而已。

```
import javax.management.*;
import javax.naming.*;

p = new Properties();
p.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
p.put(Context.PROVIDER_URL, "localhost:1099");
ctx = new InitialContext(p);
rmiAdaptor = ctx.lookup("jmx/rmi/RMIAdaptor");
rmiAdaptor.invoke(new ObjectName("jboss.jca:name=DefaultDS,service=ManagedConnectionPool"), "flush", [] as Object[], [] as String[]); 
```

说得通 ？

**===== 更新 =====**

如果您从 JBoss JVM 内部执行此操作，则不需要 JNDI 设置：

```
import javax.management.*;
import org.jboss.mx.util.MBeanServerLocator;

MBeanServer server = MBeanServerLocator.locateJBoss();
server.invoke(new ObjectName("jboss.jca:name=DefaultDS,service=ManagedConnectionPool"), "flush", [] as Object[], [] as String[]); 
```

# database - SQLite 是否适合作为相当大且安全的数据存储？

> ID：10179185
> 
> 赞同：3
> 
> 时间：2012-04-16T17:59:38.287
> 
> 标签：database, sqlite

我考虑将`SQLite`数据库用作大数据存储（每年 20 万条记录）。我会做很多查询，更新和插入的数量可以忽略不计。我看到这`SQLite`非常快。是否`SQLite`适合并安全用于此目的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:32:15.440

SQLite 一般认为不适合多并发用户；它非常适合用作嵌入式单进程存储。

在客户端都以只读方式打开数据库的情况下，情况就不那么正确了——在这种情况下不存在锁争用——但即便如此，你还是错过了缓存功能，即非嵌入式的、不可用的——流程数据库可以提供。

此外，虽然它确实通常非常快，但对于高度复杂的查询，它的查询优化器往往落后于 PostgreSQL 或 Oracle。

最后——为了符合 SQLite 成为理想嵌入式数据库的目标，它不支持强制执行安全策略（身份验证或授权）；确实，`GRANT`甚至`REVOKE`不是关键字。

# android-emulator - Android 模拟器黑屏显示“GPU 仿真 - 是”

> ID：10179187
> 
> 赞同：1
> 
> 时间：2012-04-16T17:59:44.987
> 
> 标签：android-emulator, opengl-es-2.0, gpu, avd, emulation

我正在尝试使用 android avd features 的新功能“GPU emulation - yes” 它需要在模拟器上使用 GLES2.0。但是，当我打开它时，模拟器的屏幕变为空白。 [这是我从命令行调用它时的输出。](http://www.andengine.org/forums/gles2/no-eglconfig-found-t6129-40.html#p33241)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:19:05.263

对于那些有同样问题并拥有带有 optimus 的 nvidia 卡的人......只需安装 Ironhide！

```
sudo apt-add-repository ppa:mj-casalogic/ironhide
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install ironhide 
```

然后按照说明重新启动！魔术发生了！但有时很难！

# css - 选择具有不同名称的 ID

> ID：10179191
> 
> 赞同：2
> 
> 时间：2012-04-16T17:59:55.560
> 
> 标签：css, css-selectors

我知道有一种方法可以使用 css 选择不同的 id 来应用相同的样式。但我不记得如何了。

我的意思是对下面的 div 应用相同的样式：

```
content-target1
content-target2
content-target3
content-target4 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:01:43.610

您可以只使用多个 ID 选择器：

```
#content-target1, #content-target2, #content-target3, #content-target4 
```

如果您不想重复 ID 选择器，和/或只想通过它们的公共前缀匹配它们，则可以使用属性选择器代替（失去一点[特异性](http://www.w3.org/TR/selectors/#specificity)，因为 ID 选择器没有通配符匹配功能像属性选择器一样）：

```
div[id^="content-target"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:01:08.103

“#id”是您选择 id 的方式，“sel1, sel2”是您为规则选择 sel1 或 sel2 的方式：

```
#content-target1, #content-target2 { background: red; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:01:53.050

你能做吗

```
#content-target1, #content-target2, #content-target3, #content-target4 {
CSS HERE 
} 
```

编辑：忘记我的#s

# android - Android 壁纸应用程序保存按钮？

> ID：10179194
> 
> 赞同：1
> 
> 时间：2012-04-16T18:00:08.053
> 
> 标签：android, button, wallpaper

我正在制作一个包含大量图像的壁纸应用程序，我已将其设置为壁纸按钮并分享，但我不知道如何编写一个按钮以将图像保存到 SD 卡或内部。有人可以帮助我吗？我试过一次，但我搞砸了我的整个项目。

# android - Android 库清单与应用清单

> ID：10179198
> 
> 赞同：39
> 
> 时间：2012-04-16T18:00:32.147
> 
> 标签：android, android-activity, android-manifest, android-service, android-library

我在这里读过类似的问题，但仍然不清楚一些事情。使用库项目意味着我的整个项目将有两个清单——一个用于库，另一个用于“主”应用程序项目——我不清楚其中有什么或是否有一些冗余。

我正在开发一个具有“精简”和“付费”版本的应用程序小部件，因此几乎所有代码都将包含在库项目中。作为一个小部件，库将至少有一个接收器、一个服务、一个配置活动，以及一些其他活动。那么这些组件的完整声明——包括意图、过滤器等——应该在哪里声明呢？它们是在库的清单中，还是在应用程序包本身的清单中，引用库中的类（例如 android:name="com.foo.mylibrary.MyService"）？

我看过的一些示例似乎在两个清单中都声明了它们，但我怀疑将它们放在一个或另一个中是无操作的。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-16T18:04:35.003

> 使用库项目意味着我的整个项目将有两个清单——一个用于库，另一个用于“主”应用程序项目——我不清楚其中有什么或是否有一些冗余。

~~目前未使用库项目清单。~~

Gradle for Android 和 Android Studio 支持库项目和发布清单的 AAR。这可以包括活动声明、所需的权限或功能或最低支持的 Android SDK 级别等内容。

库清单如何与应用程序自己的清单合并的规则 - 特别是当您考虑构建类型和产品风格时 -[有点复杂](http://tools.android.com/tech-docs/new-build-system/user-guide/manifest-merger)。

> 那么这些组件的完整声明——包括意图、过滤器等——应该在哪里声明呢？

~~在宿主项目中。~~

库可以发布这些组件，然后 Android Studio 宿主项目可以在需要时删除它们。

> 它们是在库的清单中，还是在应用程序包本身的清单中，引用库中的类（例如 android:name="com.foo.mylibrary.MyService"）？

~~后者。~~

在任何一个中（使用 Gradle for Android 和 Android Studio）。理论上，库更容易发布组件，因此应用程序作者不必这样做。就个人而言，我不是这个的超级粉丝，因为太多的开发人员最终会运送不必要的清单条目。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-06T16:40:09.840

从 ADT r20 Preview 3 开始，现在可以合并清单。所以现在可以将通用配置放入库清单中。有关更多信息，请参阅[https://stackoverflow.com/a/10400355/262789](https://stackoverflow.com/a/10400355/262789)。

清单合并支持需要 Intellij IDEA 版本 13 ( `manifestmerger.enabled=true`)。此外，Android Studio 支持[似乎需要](https://groups.google.com/forum/#!topic/adt-dev/tOauIi7X61Q)基于 Grade 的构建系统。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T18:05:16.907

任何引用的 android 元素，如活动、接收器、服务等。必须进入您的应用程序清单，否则操作系统将无法识别它们。如您所料，库清单文件几乎是一个空实现

**更新**

正如 CommonsWare 上面指出的，Android 构建工具现在将尝试代表您合并各种清单。为后代留下原始答案

# visual-studio-2010 - 在 Visual Studio 中找不到 Property Manager 选项（不是 Express 版本）

> ID：10179201
> 
> 赞同：43
> 
> 时间：2012-04-16T18:00:50.457
> 
> 标签：visual-studio-2010

我需要使用项目的属性表。我按照 msdn 上的说明尝试在 View 下找到 Property Manager，但我没有将 Property Manager 视为工具下的菜单选项。我只看到了属性页和属性窗口。我尝试了这两个选项，但它们似乎不是我可以创建属性表的地方。我的 Visual Studio 版本如下：Microsoft Visual Studio 2010，版本 10.0.40219.1 SP1Rel Microsoft .NET Framework 版本 4.0.30319 SP1Rel。有人可以指点一下吗？谢谢。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-10-15T04:17:06.807

我终于在**View** -> **Other Windows**下找到了我的，靠近底部。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-16T19:25:08.560

尝试重置您的`View`菜单，`Property Manager`确实应该在那里。

1.  转到`Tools`-> `Customize`。
2.  在弹出窗口中，选择`Commands`选项卡。
3.  选择`Menu bar:`按钮，然后在下拉菜单中选择`View`
4.  单击`Reset All`并确认。

这应该恢复`Property Manager`到您的`View`菜单。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-02T19:19:06.843

要查看 Property Manager，您需要启用专家设置。您可以在以下位置找到此选项：

工具 -> 设置

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-03-28T08:13:52.070

它位于**View** --> **Other Windows** --> **Properties Manager**下。有用。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-02-17T22:00:36.343

这就是我在 Visual Studio 2013 中恢复 Property Manager 菜单项的方式：

1.  选择工具\自定义
2.  选择命令选项卡和菜单栏
3.  在菜单栏旁边的下拉菜单下，选择“查看|其他窗口”（或您想放置的任何位置）
4.  单击“添加命令...”并选择查看类别
5.  从 Commands 中找到并选择 Property Manager，然后单击 OK

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-04T14:34:31.660

就我而言，它只是在**VIEW**工具栏中 - 几乎在底部。运行 VS2013 Pro 更新 3

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-08-24T10:59:37.107

查看 > 物业经理或**查看 > 其他窗口 > 物业经理**，请试试这个

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-02T14:12:36.620

以上答案都不适合我。对我有用的是：

工具 -> 导入和导出设置 -> 重置所有设置 -> ... -> Visual C++ 开发设置

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-30T02:55:15.293

尽管我在第一次使用时选择了 Visual C# 设置，但由于某种原因，VC++ 设置为 ON，导致在按 F4 时不显示可视组件属性窗口。选择 Visual C# 设置（在 Tools | Import and export settings... | Reset All 中）使其工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-07T20:06:29.587

Property Manager 现在是一个没有实际意义的实用程序。由于为每个项目定义了属性表，因此可以通过右键单击项目并选择属性来对其进行编辑。如果您需要一次编辑多个项目，只需选择您想要进行更改的所有项目并执行右键单击技巧。这会显示与 Property Manager 相同的属性页面。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-19T07:28:09.837

由于这里给定的答案对我来说没有一个是我的两分钱。

与 Visual Studio 中任何隐藏良好的菜单一样，可以通过打开`Tools -> Options... -> Environment -> Keyboard`并搜索“View.PropertyManager”找到此菜单。在那里你可以给它一个全局快捷方式。尽管这仅在您知道要查找的菜单或命令的名称时才有帮助，但与随机浏览菜单相比，以这种方式进行一堆猜测要快得多。

# java - 在画布上绘制可跨越的edittext内容

> ID：10179205
> 
> 赞同：0
> 
> 时间：2012-04-16T18:01:03.637
> 
> 标签：java, android, android-canvas, richtext, spannable

我有一个包含笑脸的 EditText，笑脸被添加到 EditText 作为可扩展的内容，

我设法绘制了“下划线”、“粗体”和“斜体”等其他内容，但在绘制位图时遇到了麻烦。由于在将 EditText 内容转换为字符串时，位图被替换为 unicode 对象字符“fffc” [http://www.fileformat.info/info/unicode/char/fffc/index.htm](http://www.fileformat.info/info/unicode/char/fffc/index.htm)

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:38:19.287

让编辑文本自己绘制成位图并将该位图绘制到画布上不是更容易吗？

```
 Canvas c = new Canvas(bitmap); 
    edit.draw(c); 
```

否则，您需要获取 ImageSpan 并使用 ImageSpan.getDrawable() 来绘制笑脸：

```
 ImageSpan[] images = s.getSpans(0, s.length(),ImageSpan.class); 
```

# visual-studio-2008 - ASP.NET 开发服务器中的访问被拒绝错误

> ID：10179208
> 
> 赞同：0
> 
> 时间：2012-04-16T18:01:11.887
> 
> 标签：visual-studio-2008

在 Visual Studio 2008 中

我刚刚将以下几行添加到现有（工作）项目中：

```
if (File.Exists(c_szInvoiceFolder + szAttachmentFile))
    File.Delete(c_szInvoiceFolder + szAttachmentFile);
if (File.Exists(c_szApp_DataFolder + szTemplateFile))
   File.Copy(c_szApp_DataFolder + szTemplateFile, c_szInvoiceFolder + szAttachmentFile); 
```

当代码第一次运行时，文件按预期复制。

但是，当代码重新运行时，我在删除行上得到“访问路径...被拒绝”。

根据我能找到的所有文档，ASP.NET 开发服务器应该以登录用户身份运行。这似乎不是这种情况，因为我可以自己删除文件。

有人知道为什么会这样吗？

注意：在 VS 开发环境中运行时，这发生在我的笔记本电脑上。

另一个注意事项：为什么我有权创建而不是删除？

顺便说一句，我试图通过授予每个人对目录的完全访问权限来解决这个问题。没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:22:03.903

发现问题。原始文件是只读的，所以副本是只读的。从原始文件中清除了 ReadOnly 标志，一切正常。

# ruby-on-rails - 添加 POST 参数以在 Ruby on Rails 中呈现 json 方法

> ID：10179216
> 
> 赞同：0
> 
> 时间：2012-04-16T18:01:44.750
> 
> 标签：ruby-on-rails, ruby, methods, models, params

我在 user.rb 模型中有一个名为 is_following 的方法，它会检查一个用户是否在关注另一个用户。

用户控制器

```
 def show
    @user = User.find(params[:id])
       respond_to |format|
          format.json { render json: @user, :methods => [:image_url, :is_following] }
       end 
```

用户模型

```
 def is_following params
    return "yep" if params[:follower_id] == id
  end 
```

但是，我不知道如何将参数传递给控制器​​中的 :is_following 方法。有人对此有任何运气或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:13:11.880

这可能不是您正在寻找的答案，但它绝对是一个解决方案。我建议您停止使用`render`来生成您的 JSON。

诸如[jbuilder](https://github.com/rails/jbuilder)或[rabl](https://github.com/nesquena/rabl)之类的 Gem可以让您更轻松，并为您提供更大的灵活性。

Ruby on Rails 是一个 MVC 框架。您应该将视图生成留在视图层。这样做将使您免于将来遭受的更多痛苦。

# sql - 更改包含数据的表中列的大小

> ID：10179217
> 
> 赞同：51
> 
> 时间：2012-04-16T18:01:48.727
> 
> 标签：sql, oracle

> **可能重复：**
> [如何在 Oracle 中缩短 varchar2 字段？](https://stackoverflow.com/questions/8404194/how-to-make-a-varchar2-field-shorter-in-oracle)

在 Oracle（9i 及更高版本）中

```
 Alter table employee  
 MODIFY ename varchar2(10); 
```

我想将表员工的列名称从 varchar2(30) 更改为 varchar2(10)

*   Case1：如果表中的数据具有 ename 列，其中包含长度小于 10 char 的值（我的意思是它可以舒适地放入 varchar2(10) 中）-oracle 是否允许这样做？

*   情况 2：如果表中的数据具有 ename 列，其中包含长度大于 10 个字符的值（我的意思是它不适合 varchar2(10)）-oracle 不允许这样做吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-16T18:17:29.017

案例1：是的，这很好用。

情况 2：这将失败并出现错误 ORA-01441：无法减少列长度，因为某些值太大。

分享和享受。

# mysql - 如何让这个 MySQL 查询在 MySQL 4.1.15 上工作？

> ID：10179219
> 
> 赞同：0
> 
> 时间：2012-04-16T18:01:55.157
> 
> 标签：mysql, database

以下查询适用于 MySql 5，但我的客户端具有 MySql 4.1.15，并且此查询因以下错误而窒息：

> #1140 - 如果没有 GROUP BY 子句，混合没有 GROUP 列的 GROUP 列 (MIN(),MAX(),COUNT(),...) 是非法的

顺便说一句，升级客户端 MySql 版本不是一个选项。有人可以帮我重写它以在旧版本的 MySql 上工作吗？

```
SELECT 
   Sum( room_rev + room_rev_future ) as weekly_room_rev, 
   Sum( (`food_rev`) + (`beverage_rev`)) as weekly_catering_rev,
   (SELECT min_sales_persons 
   FROM bdp_hotel_min WHERE 
   bdp_hotel_min.hotel_num = bdp_scorecard.hotel_num 
   AND UNIX_TIMESTAMP(bdp_hotel_min.`min_override_week`) 
   < UNIX_TIMESTAMP("2011-12-02 23:59:59") 
   ORDER BY bdp_hotel_min.`min_override_week` DESC LIMIT 1 ) as override_persons,
   min_sales_persons 
FROM bdp_scorecard JOIN locations ON bdp_scorecard.hotel_num = locations.hotel_num 
WHERE bdp_scorecard.hotel_num =837 AND bdp_scorecard.hotel_num = 837 
AND UNIX_TIMESTAMP(bdp_scorecard.`created_date`) >= UNIX_TIMESTAMP("2011-11-26") 
AND UNIX_TIMESTAMP(bdp_scorecard.`created_date`) < UNIX_TIMESTAMP("2011-12-02 23:59:59") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:08:48.590

无法测试，但考虑到错误似乎需要 group by

```
SELECT 
   Sum( room_rev + room_rev_future ) as weekly_room_rev, 
   Sum( (`food_rev`) + (`beverage_rev`)) as weekly_catering_rev,
   (SELECT min_sales_persons 
   FROM bdp_hotel_min WHERE 
   bdp_hotel_min.hotel_num = bdp_scorecard.hotel_num 
   AND UNIX_TIMESTAMP(bdp_hotel_min.`min_override_week`) 
   < UNIX_TIMESTAMP("2011-12-02 23:59:59") 
   ORDER BY bdp_hotel_min.`min_override_week` DESC LIMIT 1 ) as override_persons,
   min_sales_persons 
FROM bdp_scorecard JOIN locations ON bdp_scorecard.hotel_num = locations.hotel_num 
WHERE bdp_scorecard.hotel_num =837 AND bdp_scorecard.hotel_num = 837 
AND UNIX_TIMESTAMP(bdp_scorecard.`created_date`) >= UNIX_TIMESTAMP("2011-11-26") 
AND UNIX_TIMESTAMP(bdp_scorecard.`created_date`) < UNIX_TIMESTAMP("2011-12-02 23:59:59")
GROUP BY override_persons, min_sales_persons 
```

# c# - 根据列和值在dataGridView中查找一行

> ID：10179223
> 
> 赞同：64
> 
> 时间：2012-04-16T18:02:02.927
> 
> 标签：c#, winforms, datagridview

我有一个具有 3 列的 dataGridView：使用数据库信息绑定的 SystemId、FirstName、LastName。我想突出显示某一行，我会使用：

```
dataGridView1.Rows[????].Selected = true; 
```

然而，我不知道行 ID 并且绑定源不断变化，因此第 10 行在一个实例中可能是“John Smith”，但在另一个实例中甚至不存在（我有一个过滤器根据用户输入的内容过滤掉源，所以输入在“joh”中将产生所有名字/姓氏中包含“joh”的行，因此我的列表可以从 50 个名称变为单击 3 个）。

我想找到一种方法，如何根据 SystemId 和相应的数字选择一行。我可以使用以下方法获取系统 ID：

```
systemId = dataGridView1.Rows[dataGridView1.CurrentRow.Index].Cells["SystemId"].Value.ToString(); 
```

现在我只需要将它应用到行选择器。类似 dataGridView1.Columns["SystemId"].IndexOf(systemId} 但不起作用（也不存在这种方法）。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-04-16T18:07:58.437

这将为您提供该值的 gridview 行索引：

```
String searchValue = "somestring";
int rowIndex = -1;
foreach(DataGridViewRow row in DataGridView1.Rows)
{
    if(row.Cells[1].Value.ToString().Equals(searchValue))
    {
        rowIndex = row.Index;
        break;
    }
} 
```

或 LINQ 查询

```
int rowIndex = -1;

DataGridViewRow row = dgv.Rows
    .Cast<DataGridViewRow>()
    .Where(r => r.Cells["SystemId"].Value.ToString().Equals(searchValue))
    .First();

rowIndex = row.Index; 
```

那么你可以这样做：

```
dataGridView1.Rows[rowIndex].Selected = true; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-11-20T03:44:37.287

上述答案仅在`AllowUserToAddRows`设置为 时有效`false`。如果该属性设置为`true`，那么`NullReferenceException`当循环或 Linq 查询尝试协商新行时，您将得到一个。我已经修改了上面两个接受的答案来处理`AllowUserToAddRows = true`.

循环回答：

```
String searchValue = "somestring";
int rowIndex = -1;
foreach(DataGridViewRow row in DataGridView1.Rows)
{
    if (row.Cells["SystemId"].Value != null) // Need to check for null if new row is exposed
    {
        if(row.Cells["SystemId"].Value.ToString().Equals(searchValue))
        {
            rowIndex = row.Index;
            break;
        }
    }
} 
```

LINQ 回答：

```
int rowIndex = -1;

bool tempAllowUserToAddRows = dgv.AllowUserToAddRows;

dgv.AllowUserToAddRows = false; // Turn off or .Value below will throw null exception

    DataGridViewRow row = dgv.Rows
        .Cast<DataGridViewRow>()
        .Where(r => r.Cells["SystemId"].Value.ToString().Equals(searchValue))
        .First();

    rowIndex = row.Index;

dgv.AllowUserToAddRows = tempAllowUserToAddRows; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-07T04:35:57.053

或者你可以像这样使用。这可能会更快。

```
int iFindNo = 14;
int j = dataGridView1.Rows.Count-1;
int iRowIndex = -1;
for (int i = 0; i < Convert.ToInt32(dataGridView1.Rows.Count/2) +1; i++)
{
    if (Convert.ToInt32(dataGridView1.Rows[i].Cells[0].Value) == iFindNo)
    {
        iRowIndex = i;
        break;
    }
    if (Convert.ToInt32(dataGridView1.Rows[j].Cells[0].Value) == iFindNo)
    {
        iRowIndex = j;
        break;
    }
    j--;
}
if (iRowIndex != -1)
    MessageBox.Show("Index is " + iRowIndex.ToString());
else
    MessageBox.Show("Index not found." ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-05T11:45:10.030

试试这个：

```
 string searchValue = textBox3.Text;
        int rowIndex = -1;

        dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
        try
        {
            foreach (DataGridViewRow row in dataGridView1.Rows)
            {
                if (row.Cells["peseneli"].Value.ToString().Equals(searchValue))
                {
                    rowIndex = row.Index;
                    dataGridView1.CurrentCell = dataGridView1.Rows[rowIndex].Cells[0];
                    dataGridView1.Rows[dataGridView1.CurrentCell.RowIndex].Selected = true;

                    break;
                }
            }
        }
        catch (Exception exc)
        {
            MessageBox.Show(exc.Message);
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-20T17:39:03.393

如果您只想检查该项目是否存在：

```
IEnumerable<DataGridViewRow> rows = grdPdfs.Rows
            .Cast<DataGridViewRow>()
            .Where(r => r.Cells["SystemId"].Value.ToString().Equals(searchValue));
if (rows.Count() == 0) 
{
    // Not Found
} 
else 
{
    // Found
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-08T14:57:00.573

这建立在 Gordon 的上述回答之上——并非所有这些都是我的原创作品。我所做的是向我的静态实用程序类添加一个更通用的方法。

```
public static int MatchingRowIndex(DataGridView dgv, string columnName, string searchValue)
        {
        int rowIndex = -1;
        bool tempAllowUserToAddRows = dgv.AllowUserToAddRows;

        dgv.AllowUserToAddRows = false; // Turn off or .Value below will throw null exception
        if (dgv.Rows.Count > 0 && dgv.Columns.Count > 0 && dgv.Columns[columnName] != null)
            {
            DataGridViewRow row = dgv.Rows
                .Cast<DataGridViewRow>()
                .FirstOrDefault(r => r.Cells[columnName].Value.ToString().Equals(searchValue));

            rowIndex = row.Index;
            }
        dgv.AllowUserToAddRows = tempAllowUserToAddRows;
        return rowIndex;
        } 
```

然后以我想使用的任何形式，调用传递 DataGridView、列名和搜索值的方法。为简单起见，我将所有内容都转换为字符串以进行搜索，尽管添加重载以指定数据类型很容易。

```
private void UndeleteSectionInGrid(string sectionLetter)
        {
        int sectionRowIndex = UtilityMethods.MatchingRowIndex(dgvSections, "SectionLetter", sectionLetter);
        dgvSections.Rows[sectionRowIndex].Cells["DeleteSection"].Value = false;
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-11T07:06:03.610

使用**WPF的人**

```
for (int i = 0; i < dataGridName.Items.Count; i++)
{
      string cellValue= ((DataRowView)dataGridName.Items[i]).Row["columnName"].ToString();                
      if (cellValue.Equals("Search_string")) // check the search_string is present in the row of ColumnName
      {
         object item = dataGridName.Items[i];
         dataGridName.SelectedItem = item; // selecting the row of dataGridName
         dataGridName.ScrollIntoView(item);                    
         break;
      }
} 
```

如果您想在此之后获取选定的行项目，以下代码段很有帮助

```
DataRowView drv = dataGridName.SelectedItem as DataRowView;
DataRow dr = drv.Row;
string item1= Convert.ToString(dr.ItemArray[0]);// get the first column value from selected row 
string item2= Convert.ToString(dr.ItemArray[1]);// get the second column value from selected row 
```

# visual-studio-2010 - xna 4.0 视觉工作室 2010 错误

> ID：10179226
> 
> 赞同：0
> 
> 时间：2012-04-16T18:02:08.290
> 
> 标签：visual-studio-2010, xna, compiler-errors, xna-4.0, xna-3.0

当我尝试编译解决方案时，我收到以下错误

> 错误 x3539 ps_1_x 不再受支持
> 
> （68,23）；ID3DXEffectCompiler;;CompileEffect: 编译表达式时出错 ID3DXEffectCompiler: 编译失败

我相信这与我正在使用的 XNA 和 visial Studio 版本有关，因为代码是在 Visual Studio 2008 上创建并使用 XNA 3.0，但现在我有 xna 4.0 和 Visual Studios 2010。

谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T22:12:19.833

您需要将着色器从 切换`ps_1_1`到`ps_2_0`. 由于您没有提供任何来源... [请参阅 XNA 3.1 到 XNA 4.0 备忘单以获取更多信息。](http://nelxon.com/resources/xna-3-1-to-xna-4-0-cheatsheet.php) 祝你好运！

# jquery - 使用 jQuery 插件替换默认滚动条的问题

> ID：10179230
> 
> 赞同：6
> 
> 时间：2012-04-16T18:02:33.983
> 
> 标签：jquery, replace, scrollbar

我想使用一个名为[TinyScrollbar](http://baijs.nl/tinyscrollbar/)的 jQuery 插件来替换我网站的默认滚动条（特别是[这个](http://nanisolutions.us/wordpress/mitzvah/)页面） 。但是，由于某种原因，我在页面上收到以下错误：

```
jquery.tinyscrollbar.min.js:1Uncaught TypeError: Cannot read property 'offsetHeight' of undefined 
```

您可以通过检查 Chrome 中的元素来查看此错误。

可能有人知道为什么会发生此错误吗？我用来初始化插件的代码如下所示：

```
$('#full-height-template-container').tinyscrollbar(); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T18:35:07.353

问题是您没有按照应有的方式使用该插件。

错误（在 firefox firebug 中），使用 tinescrollbar 的源文件，显示：`oViewport.obj[0]`is `undefined`. 如果您在源代码中查看几行，您可以看到 oViewport 的属性 obj 定义为：`$('.viewport', root)`。在这里根是你的容器。显然它没有找到 .viewport 类的 html 元素。您的页面不包含具有此类的 html 元素！

如果您查看 tinyscrollbar 的[网站](http://baijs.nl/tinyscrollbar/)，您可以在“如何”部分看到如何构建正确的 HTML 以使插件正常工作。

也许您可以使用的更简单（类似的插件）是[jScrollPane](http://jscrollpane.kelvinluck.com/)。不需要像 tiniscrollbar 那样设置 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:11:10.277

Tiny Scrollbar 网站没有提到 JS 库中有硬编码的类名。您可以通过扩展库以接受单个所需 html 元素的类名来更改此设置。

# eclipse - 如何在远程服务器上设置 IDE？

> ID：10179236
> 
> 赞同：0
> 
> 时间：2012-04-16T18:02:55.890
> 
> 标签：eclipse, ide, cloud

我有兴趣从我的 iPad 上进行一些开发，我的一个想法是从 safari 浏览器中编写代码。有谁知道在基于云的服务器上设置 eclipse 的方法，以便可以从浏览器访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:25:25.600

我相信，您将需要以下部分才能使其正常工作

*   云服务器必须基于受支持的 Eclipse[目标环境](http://www.eclipse.org/projects/project-plan.php?projectid=eclipse#target_environments)之一。
*   云服务器提供商必须支持基于某种远程桌面的 UI - 例如 VNC。请注意，许多云提供商不允许 UI。
*   iPad 必须支持相同的远程桌面技术。iPad似乎有很多VNC实现......

我想困难的部分是找到一个可以使用的云服务器。作为替代方案，尽管您可以使用任何带有 VNC 服务器的 PC 来访问 Internet...

# ibatis - iBatis - 为什么 sqlMapConfig.xml 无法找到其中定义的 sql 映射？

> ID：10179239
> 
> 赞同：0
> 
> 时间：2012-04-16T18:03:05.813
> 
> 标签：ibatis, ibator

我有一个 sqlMapConfig.xml，其中定义了三个 SQLMap。

```
 <?xml version="1.0" encoding="UTF-8"?>
  <!DOCTYPE sqlMapConfig
    PUBLIC "-//ibatis.apache.org//DTD SQL Map Config 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-config-2.dtd">

  <sqlMapConfig>
    <!-- Statement namespaces are required for Ibator -->
   <settings enhancementEnabled="true" useStatementNamespaces="true"/>

    <!-- Setup the transaction manager and data source that are
         appropriate for your environment
    -->
    <transactionManager type="JDBC">
        <dataSource type="SIMPLE" >
            <property name="JDBC.Driver"
                value="com.mysql.jdbc.Driver"/>
            <property name="JDBC.ConnectionURL"
                value="jdbc:mysql://localhost:3306/sug"/>
            <property name="JDBC.Username"
                value="root"/>
            <property name="JDBC.Password"
                value="admin"/>
        </dataSource>
    </transactionManager>

    <!-- SQL Map XML files should be listed here -->
    <sqlMap resource="com/tatakelabs/dbmaps/categories_SqlMap.xml" />
    <sqlMap resource="com/tatakelabs/dbmaps/pro_SqlMap.xml" />
    <sqlMap resource="com/tatakelabs/dbmaps/pro_category_SqlMap.xml" />

  </sqlMapConfig> 
```

我收到运行时错误 - 原因：java.io.IOException：找不到资源 com/tatakelabs/dbmaps/categories_SqlMap.xml

categories_SqlMap.xml 存在于该位置。我尝试更改地图 xml 的位置，但这并没有帮助。sqlMapConfig.xml 根据 DTD 进行验证。categories_SqlMap.xml 还根据正确的 DTD 进行验证。我束手无策，试图弄清楚为什么它找不到资源。sqlMap 文件由 iBator 生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:44:10.717

发生这种情况是因为 sqlmap 文件位置没有被复制到目标。添加了一个复制目标并修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T19:56:16.737

我有同样的问题。看来问题在于配置文件的位置。因此，它与项目资源结构有关。

我将配置文件移动到与映射器类相同的包中并且它工作。在这种情况下，请尝试将所有资源移至此包并将资源属性更新为：

```
<sqlMap resource="categories_SqlMap.xml" />
<sqlMap resource="pro_SqlMap.xml" />
<sqlMap resource="pro_category_SqlMap.xml" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T11:48:47.847

place it ...src\java\abc.xml under the Source Packages directory.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-04T14:03:44.633

解决了。

我将 xml 文件移动到 Pojo 所在的位置，并提供如下路径：

```
<sqlMap resource="com/heena/ibatis/model/jsr/jsr.xml" /> 
```

它奏效了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-25T12:14:07.427

如果您使用的是 Spring，则可以使用 SqlMapClientFactoryBean 指定属性“mappingLocations”。在此属性中，您可以指定通用路径，例如“com/tatakelabs/dbmaps/*_SqlMap.xml”或使用 ${mapfiles} 等变量，Spring 会将其解析为文件名数组。这使您可以在 sqlMapConfig 中省略 sqlMap 元素。此技术将在 iBatis 2.3.4 上运行。但是 sql-map-config-2.dtd 也包含在 iBatis.jar 中，因此您可能会遇到一些解析错误，如 /com/ibatis/sqlmap/engine/builder/xml/sql-map-config-2.dtd 可能有一个错误。在这种情况下，您可能希望将 jar 中的它替换为 URL 中的一个：http: [//ibatis.apache.org/dtd/sql-map-config-2.dtd](http://ibatis.apache.org/dtd/sql-map-config-2.dtd)。

# spring-security - 春季 SAML 2.0

> ID：10179243
> 
> 赞同：1
> 
> 时间：2012-04-16T18:03:23.967
> 
> 标签：spring-security, saml-2.0, spring-saml

我最近继承了一个使用 Spring SAML 2.0 的项目，但代码似乎没有验证 X509 证书。我可以看到它正在验证时间戳和签名值，而不是证书本身。我在查找清楚解释验证证书过程的文档时遇到了一些麻烦，这里是否有人可以找到我想要的信息或有能力解释它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T18:53:27.693

SAML 2 规范只是声明服务提供者（即消费应用程序）应该验证签名，它不要求 SP 对证书本身执行任何验证，即不需要检查证书到期或证书链的有效性等等。事实上，SAML 规范建议不鼓励使用长期自签名证书、短期证书或由 CA 签名的证书。有关更多信息，请参阅[本文](https://spaces.internet2.edu/display/InCCollaborate/X.509+Certificates+in+Metadata)。

这解释了为什么 Spring SAML（和大多数 SAML2 实现）不会对 x509 证书执行验证

# asp.net - 在 ASP.Net 验证中提取正则表达式

> ID：10179248
> 
> 赞同：0
> 
> 时间：2012-04-16T18:03:45.313
> 
> 标签：asp.net, regex, asp.net-mvc

我到处搜索，找不到解决问题的好方法。我有一个正则表达式用于验证 ASP 文本框中的文本输入。

鉴于此正则表达式在许多控件上重复，我想对其进行一次编码，然后在需要使用它的地方调用它。与在所有文本框中重复正则表达式相反，恕我直言，这是不好的做法，即如果它需要更新，那么我需要在任何地方更新它。

我找到的唯一可能的解决方案是[在运行时设置 RegularExpressionValidator ValidationExpression](https://stackoverflow.com/questions/9297822/setting-regularexpressionvalidator-validationexpression-at-runtime)。这确实有效，但我想知道这是否是唯一的方法。原因是我需要为每个文本框控件创建一个 RegularExpressionValidator 来验证和设置 Page_Load 中每个控件的错误消息和表达式。不是世界末日，但似乎有点沉重。

有任何想法吗？

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:07:59.700

您可以在`constant`或`static`变量中设置值。然后，您可以创建一个继承自 的类`RegularExpressionValidator`并将属性设置为该变量或常量。

然后您的自定义派生验证器将始终具有该属性集。

# facebook - Facebook oauth 显示弹出窗口

> ID：10179252
> 
> 赞同：0
> 
> 时间：2012-04-16T18:03:55.383
> 
> 标签：facebook, oauth, popup

我用这个 \a class="fb-button" href="https://www.facebook.com/dialog/oauth?client_id=184082381694xx8&redirect_uri=https://xxxxxxx.com&display=popup" \ 虽然它似乎改变了oauth 显示的方式不是作为弹出窗口打开，而是作为新选项卡打开。[我怎样才能像这样https://www.airbnb.com/login](https://www.airbnb.com/login)那样做一个弹出式 facebook 登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:11:03.450

您需要包含 Facebook JS SDK 才能使这些弹出窗口正常工作。开发人员文档中提供了有关[如何包含 SDK的说明。](https://developers.facebook.com/docs/reference/javascript/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T02:57:29.530

我遇到了同样的问题，我确实按照 avist 的建议包含了 javascript SDK。以下是我的经验/研究的结论：

*   我无法让 display=popup 工作，这并不奇怪，因为 facebook 文档中的许多东西似乎并没有真正起作用。
*   Airbnb（在 Sergi 链接的示例中）实现了自己的弹出窗口。这里有一个很好的例子说明如何做到这一点[http://thinkdiff.net/facebook/create-facebook-popup-authentication-window-using-php-and-javascript/](http://thinkdiff.net/facebook/create-facebook-popup-authentication-window-using-php-and-javascript/)。简而言之，您只需使用 javascript 在弹出窗口中打开链接，然后在用户接受权限时关闭窗口并确保父窗口被重定向。

我最终使用了 JavaScript API 中的 FB.signup，使用起来更加简单。唯一的缺点是你得到一个短期令牌（2 小时），而不是长期令牌（60 天）。但是你总是可以用短命换长命 - [https://developers.facebook.com/roadmap/offline-access-removal/#extend_token](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)

# html - 如何在页面源中显示评论

> ID：10179256
> 
> 赞同：0
> 
> 时间：2012-04-16T18:04:19.070
> 
> 标签：html

我想在我的 HTML 源代码中显示评论，但仅在源代码中而不是在页面的实际呈现内容上。例如，当用户右键单击他们的浏览器窗口并选择“查看源代码”时，我希望评论可见以供他们阅读，但我不希望评论在实际呈现的网站上可见。

我试过

```
<span style="visibility: hidden;">
    Joe Hancock - 04/16/12 - Some comment
</span> 
```

但是这样做会占用网页上的实际空间（空白），并且真的会影响我的风格。

有人知道这样做的好方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T18:06:36.980

```
<!--This is a comment. Comments are not displayed in the browser--> 
```

HTML 注释

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:08:34.837

试试这个：

```
<!-- Comment goes inside here --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:07:38.060

```
1<div style="display:none">This is hidden</div>2 
```

# android - Android：线性布局新行

> ID：10179258
> 
> 赞同：20
> 
> 时间：2012-04-16T18:04:33.417
> 
> 标签：android

我用 TextView 创建了一个如下所示的 LinearLayout。文本是可变的。如果元素变得大于布局宽度，它会变得很糟糕。我想让文本流到一个新的行，就像写一本书时会做的那样。这可能吗？

```
<LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

<TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="xx"
            android:textAppearance="?android:attr/textAppearanceSmall" />

<EditText ...>

<TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="xx"
            android:textAppearance="?android:attr/textAppearanceSmall" />
</LinearLayout> 
```

编辑

像这样：

1.  文本视图1文本编辑文本文本视图2
2.  textview2continuesin2ndrow

不是这样的：

1.  textview1text 编辑文本 textview2text
2.  textview1cont

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T21:56:37.587

尝试类似...

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" >
        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="xx"
            android:textAppearance="?android:attr/textAppearanceSmall" />
        <EditText ...>
    </LinearLayout>
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:text="xx"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-24T08:38:55.490

您可以`android:orientation="vertical"`在 linearlayout 中使用来获取不同行中的元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-16T16:31:35.457

尝试这样的事情

```
<?xml version="1.0" encoding="utf-8"?>
<android.widget.LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context="com.example.sushrut.recipedemo.MainActivity">

    <android.widget.LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="40dp"
        android:layout_marginTop="40dp"
        android:orientation="horizontal"
        tools:context="com.example.sushrut.recipedemo.MainActivity">

        <android.support.design.widget.FloatingActionButton
            android:id="@+id/cameraActionButton"
            android:layout_width="68dp"
            android:layout_height="68dp"
            android:layout_gravity="center"
            android:layout_marginBottom="20dp"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="20dp"

            app:fabSize="normal"
            app:srcCompat="@android:drawable/ic_menu_camera" />

        <android.support.design.widget.FloatingActionButton
            android:id="@+id/choiceActionBtn"
            android:layout_width="68dp"
            android:layout_height="68dp"
            android:layout_gravity="center"
            android:layout_marginBottom="20dp"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="20dp"

            app:fabSize="normal"
            app:srcCompat="@android:drawable/ic_input_add" />

    </android.widget.LinearLayout>

    <android.widget.LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:orientation="horizontal"
        tools:context="com.example.sushrut.recipedemo.MainActivity">

        <android.support.design.widget.FloatingActionButton
            android:id="@+id/addToLibraryBtn"
            android:layout_width="68dp"
            android:layout_height="68dp"
            android:layout_gravity="center"
            android:layout_marginBottom="20dp"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="20dp"
            android:clickable="true"
            app:fabSize="normal"
            app:srcCompat="@android:drawable/ic_menu_save" />

        <android.support.design.widget.FloatingActionButton
            android:id="@+id/recipeBrowseBtn"
            android:layout_width="68dp"
            android:layout_height="68dp"
            android:layout_gravity="center"
            android:layout_marginBottom="20dp"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="20dp"
            android:clickable="true"
            app:fabSize="normal"
            app:srcCompat="@android:drawable/btn_plus" />
    </android.widget.LinearLayout>

</android.widget.LinearLayout> 
```

# java - 简单来说 Spring 框架

> ID：10179260
> 
> 赞同：9
> 
> 时间：2012-04-16T18:04:43.090
> 
> 标签：java, spring, frameworks

我对此进行了一些研究，但充其量只是对它有一个模糊的了解。任何对此了解的人都可以给我一个简单（或尽可能简单）的描述，让对编程有基本了解的人可以理解吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-16T18:42:54.747

Spring 建立在*依赖注入*和*控制反转*的思想之上。用正常的话来说——而不是让一堆类相互创建并将彼此从一个地方传递到另一个地方，你有一袋豆子。每个 bean 都声明了它的依赖项（*我需要哪些服务？*），Spring 容器通过自动和自动将所有内容连接在一起来解决这个要求。

你有一个`Service`说（通过 XML、注释、构造函数签名......）*我需要 DAO 接口才能工作！*Spring 很友好地找到了一些实现该接口的 bean，首先创建它并传递到需要它的地方。

在此基础上提供了多种其他服务（主要是在数据访问和 AOP 方面），但注入是核心概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:19:05.480

如果您想要一个快速简单的解释，那么我可以告诉您 Spring 框架的核心是[控制反转 (IoC)](http://en.wikipedia.org/wiki/Inversion_of_Control)。

自然是用 3 行来简化谈论 Spring，但理解了 IoC，你就理解了 Spring。Spring 中的一切都是围绕它构建的。

# java - Java 错误处理 - 向集中式错误处理程序抛出异常是否更好？

> ID：10179266
> 
> 赞同：3
> 
> 时间：2012-04-16T18:04:54.263
> 
> 标签：java, error-handling

我有一个相当复杂的 Java 小游戏（纸牌，基本上就像 Windows 版本），但我还没有做很多错误处理。

我的类中的几乎所有方法最终都会被初始构造函数（最终是 main()）、paintComponent() 方法或鼠标事件调用。所以，我的问题是，只在我所有的低级方法上使用“抛出异常”，并且只在我的顶级方法上执行 try/catch 来一次捕获所有错误，这是不好的做法吗？（例如 3 个尝试/捕获 - 一个用于绘画，一个用于鼠标事件，一个用于主要方法）。

我意识到这使我无法轻松地在现场处理错误，但我并不打算这样做。我的错误处理将包括写入日志、告诉用户和终止程序。记住这一点，以这种方式进行错误处理有什么不好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:10:47.490

这取决于你想如何处理这种情况。
如果您只想捕获任何可能的异常并且您不介意处理程序代码，您可以简单地使用“抛出异常”，它也没有什么不好的。它就像一个覆盖所有功能的 try-catch 块。
如果要为特定异常编写特定代码，则应使用 try-catch 块为每个处理程序编写适当的代码。
根据您所说的，任何捕获的异常都会通知用户并退出应用程序。好吧，在这种情况下，您可以只使用第一种方法。它不一定是最好的方法，也不是杀死应用程序，但是，如果这是你的策略，你可以对每个函数使用“抛出”。
希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:09:36.360

如果在发生错误的情况下您不想这样做，那么这样做是非常有意义的。这消除了代码重复和相关代码的分散。但是，如果您正在考虑改变未来的工作方式（如果有可能发生这种情况），我建议您尽可能地降低捕获量（甚至可能完全消除对异常的需要并且只需登录并立即退出）。

如果您使用异常的内部字段（具体`message`而言，您可以在构建时设置），您甚至可以消除对 3 个不同的 catch 块的需要，而只使用一个（当然，这取决于您在发生错误时的实际操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:10:17.780

我不会 - 主要原因是它破坏了封装。在这种情况下这很重要的原因*是*您的错误处理代码具有两个未来之一：

1.  变得巨大，以一种信息丰富的方式处理程序可能抛出的每个错误。
2.  很小但根本没有帮助：“某处发生了一些错误”。

在我看来，最好的结构是捕获错误、记录错误、提醒用户并*尽可能*退出。没有什么说你的鼠标处理代码不能退出，对吧？

事实上，我会创建一个几乎可以从任何地方调用的错误处理程序类，它会处理通知和日志记录。然后，您的异常处理程序可以使用要显示/记录的消息填充它，并且所有其他代码都是共享的。与在每个函数的末尾添加任何地方相比，委托给此类将花费*更少的打字。*`throws Exception`

如果您必须有一个顶级处理程序，它应该只捕获任何意外的运行时错误，以便您可以记录它并向用户显示程序确实因错误而退出，而不仅仅是转储到桌面。所有其他错误——即使你只是想摆脱困境——也应该尽可能地在“异常有意义的地方”被捕获。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T18:12:25.183

我大部分时间都在做和你描述的一样的事情。您基本上在做的是解决 Java 具有的愚蠢的检查异常。甚至没有必要在任何地方添加“抛出异常”。

如果我正在开发其他用户将使用的 API，我可能会创建特定的异常来显示正在发生的事情，以防他们想以不同的方式处理不同的异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T19:06:39.820

如果错误严重到总是退出程序，则最好抛出 RuntimeException。它们用于指示不可恢复的错误，并将避免将“抛出异常”放在任何地方的问题。无论如何，您应该有一个 RuntimeExceptions 处理程序，以便在它们发生时提供用户友好的错误报告。

如果您抛出已检查的异常，它们应该尽可能具体。抛出和捕获 Exception 可以隐藏抛出的其他异常（包括 RuntimeExceptions），这些异常是您不打算的并且可能以不同方式处理。如果你想抛出一个一般异常，你总是可以创建自己的异常类并抛出它。

异常处理可能取决于上下文，因此没有一种方法可以处理所有事情。如果用户单击按钮打开文件并且读取文件时出错，则可以向 UI 层抛出 IOException 并在那里显示错误消息。另一方面，创建临时文件时的 IOException 可以通过在另一个目录中重试来处理。

# apple-push-notifications - 我可以在 Cydia 应用程序中使用 Apple 推送通知吗？

> ID：10179272
> 
> 赞同：1
> 
> 时间：2012-04-16T18:05:18.503
> 
> 标签：apple-push-notifications, cydia

我有一个带有 apns 的应用程序可以从我的服务器接收推送通知，但我的应用程序无法发布到 iTunes App Store。

我在想如果我在 Cydia 中发布这个应用程序，我还能使用 apns 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:13:13.843

不，因为苹果会把你活活吃掉。但是我相信 cydia 上有一个用于越狱应用程序的推送库？只需在发布应用程序时为其添加依赖项。

# ruby-on-rails - 添加新功能以确认框

> ID：10179274
> 
> 赞同：0
> 
> 时间：2012-04-16T18:05:32.903
> 
> 标签：ruby-on-rails, ruby, haml

```
<%= button_to "Acknowledge", ack_something_path, :method => :put, :confirm => "Sure?" %> 
```

我也想在确认框中显示

```
%br
%input{:name => "option1", :type => "checkbox", :value => "Milk"}
Milk                   
%br                   
%input{:name => "option2", :type => "checkbox", :value => "Butter"}                 
Butter                  
%br                   
%input{:name => "option3", :type => "checkbox", :value => "Cheese"}                    
Cheese                      
%br 
```

bu我不知道怎么说

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:22:13.763

确认警报不能很好地显示 HTML，通常仅用于快速是/否问题或通用警报。如果您想要更健壮的消息对话框，请查看 Jquery UI 对话框 (http://jqueryui.com/demos/dialog/)。

# java - 类 java.lang.OutOfMemoryError 在 Oracle 数据库中保存数据时

> ID：10179278
> 
> 赞同：-1
> 
> 时间：2012-04-16T18:05:55.340
> 
> 标签：java, sql, oracle11g

我有一个大约 25,000 行的 Excel 表。excel 表中的每一行也将是我表中的一行。我尝试执行以下操作，它只是让我给内存超出限制异常。我尝试将 batchSize 从 25 更改为 50、100、500。它们都不起作用。谁能告诉我我做错了什么？更改 JVM 的堆大小对我来说不是一个选项。

```
public void saveForecast(List list) throws FinderException{
    final Session session = getCurrentSession();
    final int batchSize = 25;
    Connection con = null;
    PreparedStatement pstmt = null;
    Iterator iterator = list.iterator();
    int rowCount = list.size();
    String sqlStatement = "INSERT INTO DMD_VOL_UPLOAD (ORIGIN, DESTINATION, DAY_OF_WEEK, EFFECTIVE_DATE, DISCONTINUE_DATE, VOLUME)";
    sqlStatement += " VALUES(?, ?, ?, ?, ?, ?)";
    System.out.println(sqlStatement);
    System.out.println("Number of rows to be inserted: "+ rowCount);
    System.out.println("Starting time: "+new Date().toString());
    try{
        con = session.connection();
        for(int i=0; i<rowCount; i++){
            ForecastBatch forecastBatch = (ForecastBatch) iterator.next();              
            pstmt = con.prepareStatement(sqlStatement);             
            pstmt.setString(1, forecastBatch.getOrigin());
            pstmt.setString(2, forecastBatch.getDestination());
            pstmt.setInt(3, forecastBatch.getDayOfWeek());

            java.util.Date effJavaDate = forecastBatch.getEffectiveDate();
            java.sql.Date effSqlDate = new java.sql.Date(effJavaDate.getTime());                
            pstmt.setDate(4,  effSqlDate);              
            java.util.Date disJavaDate=forecastBatch.getDiscontinueDate();
            java.sql.Date disSqlDate =  new java.sql.Date(disJavaDate.getTime());   

            pstmt.setDate(5, disSqlDate);               
            pstmt.setInt(6, forecastBatch.getVolumeSum());

            pstmt.addBatch();
            if(i % batchSize == 0){
                pstmt.executeBatch();
                session.flush();
                session.clear();
            }
        }
        pstmt.executeBatch();
        pstmt.close();
        System.out.println("Ending Time: "+ new Date().toString());
    }catch(SQLException e){
        e.printStackTrace();
        throw new FinderException(e);
    }
    finally{
        HibernateUtil.closeSession();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T22:47:20.133

您的主要问题似乎是您正在为每一行重新准备语句。你应该准备一次声明。这可能会导致消耗大量内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T23:20:46.067

您正在循环内创建一个新语句，但仅在循环结束后关闭最后一个语句。这意味着您实际上是在创建 25000 条语句，并且只关闭了一条而使 24999 条语句处于打开状态，这导致您耗尽资源并不感到惊讶。

此外，您没有正确使用批处理语句（您必须创建一次语句，然后设置参数，调用 addBatch，设置更多参数，再次调用 addBatch 等等，然后在要提交时调用 executeBatch批次中的所有值。

编辑：

您可能会通过在 for 循环之前移动 prepareStatement 调用来解决此问题，我认为调用会话刷新/清除也没有必要。

# html - Anchor-Div 仅在 Firefox 中无法滚动到正确的位置

> ID：10179279
> 
> 赞同：1
> 
> 时间：2012-04-16T18:06:00.347
> 
> 标签：html, ruby-on-rails, scroll, routes, anchor

我完全被困在这里，希望这里有人能给出答案。

ok - 最终目标是重定向到另一个页面并放置在某个 DIV 的开头。我正在使用一个锚标记，它指向一个带有 ID 的 DIV。我的代码适用于除 Firefox 之外的所有浏览器？？

第一页链接：

```
 <a href="/home/services#design">
      <%= image_tag "Read_More_Button.png", :alt => "", :style => 
      "position:relative;   left:-10px"%>
    -close a tag 
```

与第 2 页上的内容的 Div：

```
 <div id='design' class='left clear_right '>  
      more <div>'s nested and a unordered list.  black as well. 
    -close div tag 
```

我的 config/routes.rb 中的路由：

```
 get "home/services" => "home#services" 
```

要查看当前的工作方式，请查看在线版本链接：

[website_link] [http://mearsinteriors.co.uk/](http://mearsinteriors.co.uk/) “点击这里查看网站”

点击 Design 或 fitout 的“阅读更多”按钮，你会看到你没有被带到任何一个 div 的顶部，但地址栏中的 route/url 正确指向这个位置？这只发生在 Firefox 中，我尝试在安全模式下禁用所有附加组件，但仍然没有。

任何建议或方向将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:06:38.220

这是我使用的 Jquery 循环库。每个图像的容器仍然在页面上隔开。所以即使图像不可见，div 仍然存在。因此页面滚动到确切位置的原因与锚点被定向到无关。

# semantic-markup - RDFa、微数据和微格式。

> ID：10179280
> 
> 赞同：5
> 
> 时间：2012-04-16T18:06:12.097
> 
> 标签：semantic-markup, microformats, microdata, rdfa

RDFa、微格式和微数据提供了包含语义标记的简单方法。有没有其他类似的技术？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T18:20:32.843

RDFa 和微数据做的事情并没有太大的不同。所有这三种格式都以不同的方式做大致相同的事情，RDFa 和微数据非常相似。

阅读 Manu Sporny 对三者的 Uber 比较了解更多详情：[http ://manu.sporny.org/2011/uber-comparison-rdfa-md-uf/](http://manu.sporny.org/2011/uber-comparison-rdfa-md-uf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:04:58.120

RDFa、微格式和微数据实际上做了非常不同的事情。

所有 3 都可能提供注释 HTML 片段的方法

RDFa 也是在 HTML 文档中发布 RDF 的一种方式，因为有一个用于解析 RDFa 的正式模型（与后者不同）。

除了上述之外，还有[MathML](http://www.w3.org/Math/)和[RDFj](http://www.w3.org/wiki/JSON+RDF)，前者仅限于 XHTML 资源（如果我没记错的话，还有 HTML5 资源），后者仅限于 Javascript/JSON 资源或内联脚本。

# php - CodeIgniter - 隐藏控制器

> ID：10179287
> 
> 赞同：3
> 
> 时间：2012-04-16T18:07:01.150
> 
> 标签：php, codeigniter, http-status-code-404

我正在构建一个基于 CodeIgniter 的 CMS。它将“视图”及其数据存储在数据库中，并在需要时收集适当的数据。您可能已经猜到了——我无法为每个页面生成物理控制器和匹配视图。

我认为**路由**会派上用场，因为我不想使用在 URL 中可见的控制器。解释得不好：**我正在寻找一种方法，将所有最终不在物理现有控制器上的请求重新分配给自定义控制器 - 而不会出现在 URL 中。**这个控制器当然会处理 404 错误等。

坏：`.com/handler/actual-view/)`好：（`(.com/actual-view/)`不存在实际视图控制器，否则将显示）

我添加了`404_override`一条指向`handler/`. 现在，我只是在寻找一种方法来找出请求的视图（即在`.com/actual-view`实际视图中是我正在寻找的）。

我试过了

```
$route['404_override/(:any)'] = 'handler/$1'; 
```

和类似的，这将完全删除 404 覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:12:58.153

您最好[扩展基本路由器或控制器。](http://codeigniter.com/user_guide/general/core_classes.html)

通过这样做，您可以让您的应用程序变得灵活，并且仍然符合 CI 的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:47:20.663

您需要在 route.php 配置文件中定义所有有效路由，然后在最后一行，

```
$routes["(:any)"] = "specific controller path"; 
```

如果我应该举个例子：

```
$route['u/(:any)/account'] = "user_profile/account/$1";
$route['u/(:any)/settings'] = "user_profile/settings/$1";
$route['u/(:any)/messages'] = "user_profile/messages/$1";
$route['u/(:any)'] = "user_profile/index/$1"; 
```

如此处所见，在前三个无法捕捉到它之后，我将所有 url 转移到用户个人资料。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T20:54:24.253

在 CodeIgniters 很棒的论坛和 StackOverflow 的可爱成员的一些指导下，我的解决方案变成了将所有 404 错误路由到我的自定义控制器，在那里我确保它是一个真正的 404（没有视图或控制器）。稍后在控制器中，我从我的数据库 URI 字符串中收集我需要的其余信息：

```
//Route
$route['404_override'] = 'start/handler';

//Controller
function handler($path = false) {

   //Gather the URI from the URL-helper
   $uri_string = uri_string();

   //Ensure we only get the desired view and not its arguments
   if(stripos($uri_string, "/") !== false) {
      //Split and gather the first piece
      $pieces = explode("/", $uri_string);
      $desired_view = $pieces[0];
   } else {
      $desired_view = $uri_string;
   }

   //Check if there's any view under this alias
   if($this->site->is_custom_view($desired_view)) {

      //There is: ensure that the view has something to show
      if(!$this->site->view_has_data($desired_view)) {
         //No data to show, throw an error message
         show_custom_error('no_view_data');
      } else {
         //Found the views data: show it
      }

   } else {
      //No view to show, lets go with 404
      show_custom_404();
   }
} 
```

# database - 处理表格，防止数据集错误

> ID：10179289
> 
> 赞同：2
> 
> 时间：2012-04-16T18:07:14.747
> 
> 标签：database, delphi

我正在创建一个应用程序，需要我将大量数据发布到表中以及更改表中的值。

每当我编写应用程序时，我的大部分时间似乎都在停止错误，例如：

> '无法在封闭的数据集上执行此方法'`

或者

> 'tblName 不在编辑或插入模式'`

我似乎每次都得到这些，而且它们不容易调试并找出哪里出了问题。

我只是在寻找一些关于如何阻止这种情况发生的指导，我知道这是我正在做的事情。例如，目前我得到：

> '无法对关闭的数据集执行此操作'

此代码中的某处：

```
procedure TfrmMain.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  if not tblSystem.Active then
    tblSystem.Open;

  if not tblSpecs.Active then
    tblSpecs.Open;

  tblSpecs.Edit;
  tblSpecs.Post;
  tblSpecs.Close;

  // Post changes to the notes on exit
  tblSystem.Edit;
  tblsystem.Post;
  tblSystem.Close;
end; 
```

和

```
procedure TfrmMain.chkAutoUpdateClick(Sender: TObject);
begin
  tblSystem.Edit;
  if chkAutoUpdate.Checked then
    chkInstUpdates.Enabled := True
  else
  begin
    chkInstUpdates.Enabled := False;
    tblSystemAutoUpdate.AsBoolean := False;
  end;
end; 
```

我将立即假设这是从表中推送/拉取数据的错误代码，任何帮助将不胜感激。此外，任何调试帮助都会令人惊叹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:50:47.207

如果我猜的话，我会说是这一行：

`tblSystemAutoUpdate.AsBoolean := False;`

您正在尝试编辑数据集字段的值，但实际上并未打开其数据集。

WRT 调试帮助，当您收到异常消息并要求您中断或继续时，请选择中断。堆栈跟踪视图（标准布局中的左上窗格）将向您显示当前线程的函数调用堆栈，并且应该能够引导您直接找到它。此外，请确保在启用“使用调试 DCU”项目选项的情况下构建代码的开发人员版本。这将让您在调试器中跟踪 RTL 和 VCL 单元。

# ruby - 00.0 和 0.0 不一样吗？

> ID：10179296
> 
> 赞同：8
> 
> 时间：2012-04-16T18:07:51.563
> 
> 标签：ruby, numbers

我刚刚在编程语言 ruby​​ 中发现了一个奇怪的问题，这不是一个大问题，但我就是不明白为什么会这样。如果有人知道我的问题的问题，我会很感兴趣。

在 ruby​​ 中，你可以写`0`or `00`，没关系，它会得到相同的结果。
如果您运行`0 === 00`，您还会得到`true`两个输入完全相同的含义。

`0.0`也等于`0`，所以逻辑上`00.0`也应该等于，`0.0`但问题是，如果你尝试使用这个数字，`00.0`那么你只会得到一个错误。例如，如果您运行：

```
a = 00.0 
```

你得到这个错误：

> 语法错误，意外的 tINTEGER

当然我知道这是一个小问题，但正如我所说，我想了解为什么计算机不将`00.0`其视为`0.0`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:15:24.573

问题是，当解析和 ruby​​ 看到一个多于两位的数字以字符 0 开头时，它会将其解析为八进制整数。因此，当它解析 00 时，它是八进制的 0，与十进制的 0 相同。但如果它找到一个 . 那么它是一个无效的整数，这就是它显示的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:14:36.770

[我在http://tryruby.com](http://tryruby.com)中尝试了“a = 00.0” ，得到：

```
SyntaxError: no .<digit> floating literal anymore put 0 before dot. near line 1: "" 
```

显然，Ruby 词法分析器并不期待这种形式的浮点数。

# java - 如何在 javascript 中重用 Java 类中编写的应用程序常量？

> ID：10179302
> 
> 赞同：3
> 
> 时间：2012-04-16T18:08:08.297
> 
> 标签：java, javascript, configuration, constants

有没有办法使用`public static final`javascript 文件重用 Java 类中定义的常量？

或者有没有更好的方法来定义这些常量，以便它们可以被 java 和 JavaScript 重用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:12:50.797

一个非常简单的解决方案是将您的配置存储为服务器端的[JSON](http://www.json.org/javadoc/org/json/JSONObject.html)，然后让服务器将其注入到客户端的 HTML 响应中。

服务器可以在启动时读取 JSON 并将其保存在单例对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:38:53.487

您可以通过参考 java 小程序来访问这些字符串：

简单Applet.class：

```
import java.awt.*;
import java.applet.*;
public class SimpleApplet extends Applet
{
    public static final int someInt = 1;
    public static int getInt()
    {
        return someInt;
    }
} 
```

JavaScript：

```
...
<SCRIPT>
function GetFromJava() { 
   alert("The value of SimpleApplet.someInt is " + document.simple.someInt + "\n"
         "Returned value from SimpleApplet.getInt() is " +  document.simple.getInt());
   }
</SCRIPT>
...
<APPLET CODE="SimpleApplet.class" NAME="simple"  HEIGHT=0 WIDTH=0>
... 
```

另外，请查看[Oracle 的教程](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)。

# c - 在 MATLAB 中使用 MEX 文件访问存储在元胞数组中的矩阵

> ID：10179303
> 
> 赞同：3
> 
> 时间：2012-04-16T18:08:11.737
> 
> 标签：c, matlab, mex

我目前正在编写一个 MEX 函数，该函数必须与 MATLAB 中的单元格数组一起使用。MEX 文件是用 C 编写的。

本质上，我的函数的输入将是一个元胞数组，其中每个条目都是具有实数值的数值矩阵。一个简单的例子是：

```
C = cell(1,2);
C{1} = ones(10,10);
C{2} = zeros(10,4); 
```

我希望能够访问我的 MEX 文件中的数值数组 C{1} 和 C{2}。理想情况下，我想这样做，而不必在我的 MEX 文件中创建数据的第二个副本（即获取它们的指针）。

使用前面的例子，我目前的做法如下：

```
/* declare a pointer variable to the incoming cell array after it is passed to the MEX function */
mxArray C_CELL = (mxArray *) mxGetData(prhs[0]) 

/* declare  a 2 x 1 array of pointers to access the cell array in C */
double *myarray[2] //

/* point towards the contents of C_CELL */
myarray[0] = mxGetPr(C_CELL[0])
myarray[1] = mxGetPr(C_CELL[1]) 
```

不幸的是，这似乎会产生“无效使用未定义类型'struct mxArray_tag'”错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:41:27.853

您需要使用[`mxGetCell`](http://www.mathworks.co.uk/help/techdoc/apiref/mxgetcell.html)来提取单元格数组的内容。

```
mxArray *cellArray[2];
cellArray[0] = mxGetCell(prhs[0], 0);
cellArray[1] = mxGetCell(prhs[0], 1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T18:49:13.417

该代码示例中有很多问题：

*   您在每一行都缺少尾随分号
*   `mxArray`s 必须定义为指针：例如，`mxArray *C_CELL`.

但是根据您收到的错误消息，我想您在使用的源代码中这些项目是正确的。

您的主要问题是您将输出分配`mxGetData`给`mxArray *`. 有效的方法`mxGetData`是它返回一个`void *`指向矩阵内容的原始 ( ) 指针。在这种情况下，您的矩阵包含一个指针数组`mxArray`，具有两级指针重定向。

因此，`C_CELL`必须定义为`mxArray **C_CELL`。请注意，在没有任何完整性检查或边界检查的情况下执行此操作将迅速导致段错误。[`mxGetCell`](http://www.mathworks.co.uk/help/techdoc/apiref/mxgetcell.html)正如@David Heffernan 所建议的那样使用是一种更安全、更可靠的方法（假设您已经检查过您是否包含`prhs[0]`一个单元格数组）。

# c# - OpenXML 选择特定列

> ID：10179305
> 
> 赞同：3
> 
> 时间：2012-04-16T18:08:14.427
> 
> 标签：c#, excel, openxml, spreadsheetml

我正在尝试选择一个特定的列，以便我可以自动设置它的宽度，但收效甚微。我是否应该不能使用 MSDN 的 GetRow 版本从列集合中选择列？

```
return worksheet.GetFirstChild<SheetData>().Elements<Row>().Where(r => r.RowIndex == rowIndex).First();

return worksheet.GetFirstChild<SheetData>().Elements<Column>().Where(r => r.Min== columnNumber && r.Max == columnNumber).First(); 
```

我是否采取了正确的方法？FWIW 我知道如何从头开始创建列并设置宽度，但这是不可行的，因为当我在构造函数中创建列时，我不知道列中将包含哪些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:17:24.970

您可以将列对象附加到工作表。然后我做了一个设置宽度的方法。

```
Worksheet ws = new Worksheet();
Columns columns = new Columns();

columns.Append(CreateColumnData(1, 1, 14.87));

ws.append(columns);

private static Column CreateColumnData(UInt32 StartColumnIndex, UInt32 EndColumnIndex, double ColumnWidth)
    {
        Column column;
        column = new Column();
        column.Min = StartColumnIndex;
        column.Max = EndColumnIndex;
        column.Width = ColumnWidth;
        column.CustomWidth = true;
        return column;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T18:12:08.707

我遇到了同样的问题，需要为不同的列设置宽度，但无法在网上找到解决方案。到目前为止提供的答案只是展示了如何创建具有指定宽度的列，而不是如何动态更新指定列的宽度。可能是我对 .net 的 openxml 库不太熟悉，但 DocumentFormat.OpenXml 接缝没有很好地记录，也不像 Office.Interop 那样直观。由于我的应用程序作为 azure 服务运行，我没有机会使用 Office.Interop。对我来说，解决方案是使用 closedxml 库，它简化了 openxml 文档的工作，就像在 Office.Interop 中一样。你可以谷歌一下。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T13:49:16.117

他没有写那个方法。该方法来自一篇完整的文章，该文章能够根据单元格值的长度设置列的宽度：http: [//polymathprogrammer.com/2010/01/11/custom-column-widths-in- excel-open-xml/](http://polymathprogrammer.com/2010/01/11/custom-column-widths-in-excel-open-xml/)

希望这可以帮助！;)

# python - 在 Python 和 COM 中使用 TLB 定义的接口

> ID：10179309
> 
> 赞同：5
> 
> 时间：2012-04-16T18:08:19.437
> 
> 标签：python, com

我会尽量保持这个问题尽可能紧凑，但如果我似乎在说疯狂的话，那几乎可以肯定是因为我对某些关键点一无所知，所以请纠正我。

* * *

我正在编写一个程序，在 Windows 环境中，它将与具有 COM 接口的现有应用程序交互，以允许第 3 方软件与之交互。

我已经阅读了这个应用程序的所有文档，它说有一个 TLB 文件定义了通过 COM 可用的函数和数据。

如何在 python 中使用 TLB 文件？如何发现应用程序的 progID 以便与它进行交互（文档中没有给出）。

我很迷茫。我有相当多的 Python 经验，但我对在 Windows 环境中进行开发完全陌生。任何帮助都会非常有帮助。我一直在阅读 win32com 上的所有文档，但我仍然不知道该怎么做，因为没有人指出 - 据我所见 - 引入 TLB 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:01:19.230

提出的问题是将自定义 TLB 文件与要在 python 中开发的 COM 客户端链接。我为我用 C# 开发的 COM 服务器做了一个小示例代码，python 客户端使用“comtypes”包访问了相同的代码。下面的代码片段给出：

```
 import comtypes.client as CC
    import comtypes

    ccHandle = CC.CreateObject("CSharpServer.InterfaceImplementation")
    print (ccHandle)
    import comtypes.gen.CSharpServer as CS
    InterfaceHandle = ccHandle.QueryInterface(CS.IManagedInterface)

    print ("output of PrintHi function = ", InterfaceHandle.PrintHi("World")) 
```

上述 python 脚本适用于[http://msdn.microsoft.com/en-us/library/aa645738(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645738(v=vs.71).aspx)上提供的 C# COM 服务器代码（请参阅文件 1：CSharpServer.cs） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T21:48:34.363

好的，我已经有一段时间没有这样做了，无论如何我都不是 COM 专家。阅读[Python Programming on Windows 中的 COM 章节，](http://oreilly.com/catalog/pythonwin32/chapter/ch12.html)了解如何执行此操作。按照示例（针对 Excel 进行尝试）来了解事情是如何工作的。

首先，如果你还没有安装**PyWin32 Extensions 。**这是为您`pythonwin.exe`和 COM 接口模块提供的软件包。从[这里](http://sourceforge.net/projects/pywin32/files/)得到它。

然后你要从 PythonWin 的工具菜单中打开“COM Makepy Utility”。浏览已注册的 COM 组件列表（一些是类型库，另一些是 DLL），直到确定您拥有的组件（您必须做一些侦探工作）。单击确定以生成 Python 粘合代码。然后，您需要使用`-i`命令行参数再次运行它以生成样板代码，以便您的 python 脚本可以使用此胶水。下面是对 Microsoft Excel 对象库的 O'Reilly 示例的解释：

```
import win32com.client

from win32com.client import gencache
gencache.EnsureModule('{00020813-0000-0000-C000-000000000046}', 0, 1, 2)
earlyBound = win32com.client.Dispatch("Excel.Application")
lateBound = win32com.client.dynamic.Dispatch("Excel.Application")

print earlyBound.ActiveCell() 
```

使用早期绑定对象是可选的，但它确实提高了性能。

找到 ProgID 又是一项侦探工作，尽管[这个答案](https://stackoverflow.com/a/2773418/197573)似乎暗示这将很难。尝试使用 RegEdit 浏览注册表的 HKEY_CLASSES_ROOT 配置单元，看看您是否看到看起来很有希望的 ProgID。

# templates - 如何在backbone.marionette 中使用EJS 模板？

> ID：10179314
> 
> 赞同：4
> 
> 时间：2012-04-16T18:08:49.423
> 
> 标签：templates, backbone.js, ejs, marionette

到目前为止，我一直在我的 Rails/Backbone.js 应用程序中使用 EJS 模板。我真的很想开始使用[backbone.marionette](http://github.com/derickbailey/backbone.marionette)。我该怎么做才能使它与 EJS 一起工作？

```
MyView = Backbone.Marionette.ItemView.extend({
  template: "#some-template"
}); 
```

它在文档中说我需要为`template`属性提供一个 jQuery 选择器，但我认为我的 EJS 模板没有。

**更新：**

这就是我使用模板正常呈现视图的方式：

```
TasksTree.Views.TaskItem = Backbone.View.extend({
...
  render: function() {
    ...
    this.$el.html(JST['tasks_tree/item'](options));
    return this;
  }

}) 
```

我有模板文件夹，其中包含`item.jst.ejs`如下文件：

```
<li>
  <label><%= taskTitle %></label>
</li> 
```

我的模板文件夹包含在`application.js`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T20:38:23.500

文档中有一个部分也显示了替换呈现机制的几个示例：

[http://derickbailey.github.com/backbone.marionette/#backbone-marionette-renderer/custom-template-selection-and-rendering](http://derickbailey.github.com/backbone.marionette/#backbone-marionette-renderer/custom-template-selection-and-rendering)

看到 JST 为您提供了模板，并且您不需要以任何其他方式缓存它们，但是您可以跳过 Marionette`Renderer`对象中内置的大部分功能并完全替换该`render`功能。

```
 Backbone.Marionette.Renderer.render = function(template, data){
  return JST[template](data);
} 
```

您还可以`template`用模板路径而不是 jquery 选择器替换视图上 teh 属性的使用：

```
 Backbone.Marionette.ItemView.extend({
  template: "tasks_tree/item"
}); 
```

希望有帮助。如果没有，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T19:38:50.173

我发现这个参考很有帮助：[https ://github.com/marionettejs/backbone.marionette/wiki/Using-jst-templates-with-marionette](https://github.com/marionettejs/backbone.marionette/wiki/Using-jst-templates-with-marionette)

您可以将`render`函数替换为类似的内容，这样可以提供更好的错误处理和灵活性。

```
Marionette.Renderer.render = function(template, data) {
    if(typeof template === 'function') {
        return template(data);
    }
    else {
        if(!JST[template]) throw "Template '" + template + "' not found!";
        return JST[template](data);
    }
}; 
```

然后您可以指定模板路径（如前所述）：

```
Backbone.Marionette.ItemView.extend({
    template: "tasks_tree/item"
}); 
```

或者，如果您的模板非常简单，您可以使用函数只返回一个字符串：

```
Backbone.Marionette.ItemView.extend({
    template: function(data) {
        return "<div>" + data.attribute + "</div>";
    }
}); 
```

# mysql - Google Cloud SQL：保持开发和实时数据库更新

> ID：10179322
> 
> 赞同：1
> 
> 时间：2012-04-16T18:09:26.057
> 
> 标签：mysql, sql, eclipse, cloud

我有一个本地 MySQL 开发实例，我一直在使用它进行开发，现在我希望在我的 Google Plugin for Eclipse 中连接的实时 Google Cloud SQL 实例中更改我的本地 MySQL 表。除了完整的转储和导入外，我不知道该怎么做。还有其他/更好的方法吗？理想情况下，数据库版本控制会很棒，但我认为 Google Cloud SQL 不存在。

# java - 如果您有多个应用程序，则为 android 包名称

> ID：10179323
> 
> 赞同：1
> 
> 时间：2012-04-16T18:09:30.330
> 
> 标签：java, android

假设您想在 android 市场和同一个 google play 开发者帐户上放置 2 个应用程序。

您需要单独的包名、相似的包名还是完全不同的包名？

app1 : 包 com.myapp1.myname app2 : ???

其他可能性：

app1 ：包 com.mycompany.app1 包 com.mycompany.myname（两者都适用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:11:48.653

他们只是需要不同。没有关于如何为一个应用程序的不同变体定义包名称的规范。

我的偏好是：

```
com.mycompany.appname.paid 
```

和

```
com.mycompany.appname.free 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:16:27.690

不同应用的包名必须不同。例如

com.mycompany.app1、com.mycompany.app2

# google-plus - 如何测试 Google Plus API（Google Plus 测试帐户）？

> ID：10179325
> 
> 赞同：8
> 
> 时间：2012-04-16T18:09:39.077
> 
> 标签：google-plus

我很确定我错过了一些东西，但我找不到（即 google）为 Google Plus 创建测试帐户的可能性。但是，肯定不允许创建虚假用户帐户进行测试，那么，如何使用多个（我的）帐户测试我的 G+ 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T23:11:31.207

正如您所指出的，您的 Google+ 帐户应该使用您的[通用名称](http://support.google.com/plus/bin/answer.py?hl=en&answer=1228271)创建，但您不限于一个个人资料。对于手动测试，您可以创建第二个配置文件。

但是，如果您正在进行自动化测试，这可能不是一种有效的方法。您的测试将消耗您的配额，因此尽可能模拟客户端库以测试您的代码。

# javascript - Check for multiple hash substrings

> ID：10179333
> 
> 赞同：1
> 
> 时间：2012-04-16T18:10:22.413
> 
> 标签：javascript, jquery

I'm trying to check for two different hash substrings and execute different code depending. This is what I have right now:

**Javascript**

```
if(window.location.hash.substring(confirm) {
    $('.confirm').click();  
}

elseif(window.location.hash.substring(thanks) {
    $('.thanks').click();
} 
```

Any idea what I am doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:12:54.453

Use [`indexOf`](http://www.w3schools.com/jsref/jsref_indexof.asp) with quotes to denote the string you want to search:

```
if(window.location.hash.indexOf('confirm') >= 0) {
    $('.confirm').click();  
}
else if(window.location.hash.indexOf('thanks') >= 0) {
    $('.thanks').click();
} 
```

BTW, in your original implementation, you were also missing `)` in the `if` condition.

# tcl - 如何全局声明一个仅在proc中使用的变量

> ID：10179334
> 
> 赞同：5
> 
> 时间：2012-04-16T18:10:26.843
> 
> 标签：tcl

我有以下代码：

```
proc testList {setupFile ""} {
  if {$setupFile == ""} {
    set setupFile location
  }
}
proc run {} {
  puts "$setupFile"
} 
```

我收到语法错误。我知道如果我在 proc 之外声明 setupFile 变量，即在主 proc 中，那么我可以将它附加到命名空间说 ::65WL::setupFile 以使其成为全局但如果变量本身在 proc 中定义，则不知道如何做到这一点只要。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-16T18:53:53.007

您可以使用`::`.

```
proc testList {{local_setupFile location}} {
    # the default value is set in the arguments list.
    set ::setupFile $local_setupFile
}

proc run {} {
    puts $::setupFile
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T18:36:05.410

不是特定过程运行本地的 Tcl 变量需要绑定到名称空间；命名空间可以是全局命名空间（有一个特殊的命令），但不是必须的。因此，要在两个过程之间共享一个变量，您需要给它一个公开的名称：

```
proc testList {{setup_file ""}} {
  # Use the 'eq' operator; more efficient for string equality
  if {$setup_file eq ""} {
    set setup_file location
  }
  global setupFile
  set setupFile $setup_file
}
proc run {} {
  global setupFile
  puts "$setupFile"
} 
```

现在，这是为了共享一个完整的变量。如果您只想共享一个值，还有其他一些选择。例如，这两种可能性：

```
proc testList {{setup_file ""}} {
  if {$setup_file eq ""} {
    set setup_file location
  }
  # Create a procedure body at run-time
  proc run {} [concat [list set setupFile $setup_file] \; {
    puts "$setupFile"
  }]
} 
```

```
proc testList {{setup_file ""}} {
  if {$setup_file eq ""} {
    set setup_file location
  }
  # Set the value through combined use of aliases and a lambda term
  interp alias {} run {} apply {setupFile {
    puts "$setupFile"
  }} $setup_file
} 
```

Tcl 8.6 有更多选项，但仍处于测试阶段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-20T19:28:27.137

您可以使用 uplevel、upvar 和/或 global

```
proc testList {{setupFile ""}} {
  if {$setupFile eq ""} {
    set setupFile location;
    uplevel set setupFile $setupFile;
  }
}
proc run {} {
  upvar setupFile setupFile;
  puts "$setupFile";
} 
```

或者

```
proc run {} {
  global setupFile;
  puts "$setupFile";
} 
```

第一个是首选。

# datacontractserializer - ServiceStack 的 TypeSerializer 是否有 OnDeserializing/OnDeserialized 等效项？

> ID：10179335
> 
> 赞同：3
> 
> 时间：2012-04-16T18:10:35.037
> 
> 标签：datacontractserializer, servicestack

我想将一些代码从使用 .NET 切换`DataContractSerializer`到使用 ServiceStack`TypeSerializer`以提高速度优势。不幸的是，我继承的代码在很大程度上依赖于`OnSerializing`/ `OnSerialized`/ `OnDeserializing`/ `OnDeserialized`，而 ServiceStack 似乎没有调用它。我错过了什么吗？假设不是，是否有一种滥用事物来伪造预期功能的好方法？ `OnSerialized`/`OnDeserialized`可以通过反射大致近似，但我对`OnSerializing`and不知所措`OnDeserializing`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:56:42.313

不，没有这样的设施；您必须使用适当的调用来分叉 ServiceStack 或自己进行序列化/反序列化。

# html - 带有内联 HTML 的 WPF RichTextBox - i18n

> ID：10179338
> 
> 赞同：0
> 
> 时间：2012-04-16T18:10:46.263
> 
> 标签：html, wpf, richtextbox, rtf

我有一个 RichTextBox，我试图用它来显示包含超链接的可翻译文本块。我遇到的问题是，如果不手动将 s 和控件编码到无法翻译的内容中，我找不到设置 text 属性的方法。有没有办法做到这一点？我尝试使用 Word 保存一个包含一个句子的简单 RTF 文件，以便提取我需要的位，但我最终得到了**160 行**难以破译的 RTF 文本。

理想情况下，HTML 会更容易，但这似乎不受支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:40:25.220

我通过使用[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)解析出锚点来解决这个问题。

```
public static IEnumerable<Inline> ParseHtml(string text)
        {
            var inlines = new List<Inline>();
            HtmlDocument doc = new HtmlDocument();
            doc.LoadHtml(text);
            if(doc.ParseErrors==null ||!doc.ParseErrors.Any()) {
                foreach (var childNode in doc.DocumentNode.ChildNodes) {
                    switch(childNode.Name.ToLowerInvariant()) {
                        case "a":
                            var lnk = new Hyperlink(new Run(childNode.InnerText));
                            lnk.NavigateUri = new Uri(childNode.Attributes["href"].Value);
                            inlines.Add(lnk);
                            break;
                        default:
                            inlines.Add(new Run(childNode.InnerText));
                            break;
                    }
                }
            }
            return inlines;
        } 
```

# facebook-graph-api - 如何使用 Facebook API 向其他访问者显示自己的好友列表？

> ID：10179348
> 
> 赞同：0
> 
> 时间：2012-04-16T18:11:36.227
> 
> 标签：facebook-graph-api

我可以使用[Facebook API](https://developers.facebook.com/docs/reference/api/)获取我的朋友列表（这需要我登录到我的 FB 帐户），并且我正在尝试向其他访问我的网站的人显示我的朋友列表。

我尝试过使用 Twitter，它非常简单。`https://api.twitter.com/1/friends/ids.json?cursor=-1&screen_name=codef0rmer`返回我的关注者 ID。

是否可以使用 Facebook API，如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:31:53.270

要访问 /friends 连接，您需要当前会​​话的有效访问令牌。这意味着您无法为其他用户访问此连接

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/) https://developers.facebook.com/docs/reference/fql/friend/

这意味着除非您让用户成为朋友并将他们存储在您的数据库中，否则您将无法做到这一点。（除非您使用寿命更长的访问令牌（我说寿命更长，因为离线访问已被弃用）

这么说，我不确定您是否可以存储此信息。我知道不允许向其他用户显示好友列表，因此这在 facebook TOS 上是潜在的危险领域。隐私政策在这里[https://developers.facebook.com/policy/](https://developers.facebook.com/policy/)但我认为这是您可能需要直接与 Facebook 澄清的事情，因为它看起来有点灰色区域

# javascript - 从 Flex 4 到 HTML 5 的技术转型

> ID：10179350
> 
> 赞同：1
> 
> 时间：2012-04-16T18:11:53.497
> 
> 标签：javascript, apache-flex, html, frameworks

我工作的公司正在计划进行技术改造。我们目前使用 Flex 4.5 进行前端开发，使用 php 进行数据库交互，以 MySQL 作为我们的数据库。我们正在使用 LCCS 来满足我们的推送需求。我们知道 Adob​​e 计划在今年晚些时候停止对 LCCS 的支持，因此在不久的将来这对我们来说将是一个问题。毫无疑问，HTML/js 将是我们的最佳选择，而 HTML5 被视为未来。

在网上搜索这种转换时，似乎有大量的 javascript 框架。以下是我们感兴趣的几个元素：

1.  支持绑定和丰富的基于事件的架构的 MVC 框架
2.  具有持续集成和部署能力的热代码推送
3.  跨浏览器兼容性
4.  最好是适用于所有外形尺寸（移动设备和平板电脑）的单一代码库
5.  可扩展
6.  良好的社区支持
7.  丰富的 UI 框架
8.  推送机制（如 LCCS）

任何指示/经验都会有很大帮助！

谢谢，

安吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:22:42.233

你可以试试 ExtJs，它是最接近 javascript 中的 Flex 或 SproutCore 的东西。现在不要指望 js 开发能像 flex 开发一样流畅，没有 IDE，没有真正的 GUI 构建器（尽管 extJs 有一个），在真正开始构建之前你必须重新发明很多东西。extJs 不是免费的，但它应该不是问题，因为您可能已经为 Flex 付费了。哦，当然在 javascript 和 php 之间没有 AMF，祝你好运。

# oracle - 在 Oracle 报告中隐藏详细信息

> ID：10179351
> 
> 赞同：0
> 
> 时间：2012-04-16T18:12:01.443
> 
> 标签：oracle, oracle10g, report, reportbuilder

我正在 Oracle 报告 10g 中制作报告，我只想显示总计。我希望删除详细信息行，以便总行是每个日期的所有显示。我可以隐藏细节，但报告仍然留下空格，我不知道如何缩小日期和总行之间的差距，以便它们彼此均匀地显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:38:56.580

将细节的东西放在框架内，并将框架的垂直弹性设置为“可变”。然后在该帧上放置一个格式触发器，当您想要隐藏它时返回 false。它下面的所有东西都应该向上移动以填充空间，然后当格式触发器返回 false 时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:44:54.467

将条件格式放在“重复帧”上并检查隐藏对象。然后将隐藏所有满足条件的行。并且不会留下任何空间。

# android - 从 Android 发送到 SQL 数据库后无法渲染图像

> ID：10179352
> 
> 赞同：2
> 
> 时间：2012-04-16T18:12:11.293
> 
> 标签：android, sql, web-services, ksoap

我有一个 Android 应用程序（API 10），其中一项功能允许用户捕获照片并使用 ksoap 将其发送到 asp.net Web 服务。Android 应用程序运行良好，将包括图像字节数组在内的所有数据发送到数据库。SQL 数据库有一个用于存储字节数组的数据的 Image 字段。这一切都按预期工作。但是，在进行测试以确保没有损坏、正确保存图像等时，我尝试使用 .ashx 页面渲染图像，它只显示“损坏的图像”图标。我确定这是我想念的简单的东西，但是在盯着它看了很长时间之后，它没有任何意义。

这是抓取字节数组的 Android 应用程序片段：

```
byte[] ba;
String filepath = "/sdcard/";
File imagefile = new File(filepath + "img.jpg");
FileInputStream fis = new FileInputStream(imagefile);
Bitmap bm = BitmapFactory.decodeStream(fis);
Bitmap sbm = Bitmap.createScaledBitmap(bm, 640, 480, false);
if(bm != null)
{
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    sbm.compress(Bitmap.CompressFormat.JPEG, 100, out);
    ba = out.toByteArray();
} 
```

下面是创建 SOAP 并执行它的 Android 应用程序片段：

```
SoapObject request = new SoapObject(NAMESPACE, SEND_METHOD_NAME);
request.addProperty("pkid", pkid);
request.addProperty("img", ba);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
MarshalBase64 marshal = new MarshalBase64();
marshal.register(envelope);
AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(SEND_URL);
try
{
    androidHttpTransport.call(SEND_SOAP_ACTION, envelope);
}
catch(Exception e)
{
    e.printStackTrace();
} 
```

这是接收 SOAP 消息的 ASP.Net Web 服务的片段：

```
[WebService(Namespace = "http://www.domain.com")]
[System.Web.Services.Protocols.SoapDocumentService(RoutingStyle = System.Web.Services.Protocols.SoapServiceRoutingStyle.RequestElement)]
[System.ComponentModel.ToolboxItem(false)]
public class sendWorkOrderService : System.Web.Services.WebService
{
    public SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["main"].ConnectionString);

    [WebMethod(Description = "This is it", EnableSession = false)]
    public void receive(int pkid, byte[] img)
    {
        if (img.Length > 0)
        {
            cmd = new SqlCommand("update table set photo = @arrayToInsert where pkid = " + pkid, con);
            cmd.Parameters.Add("@arrayToInsert", SqlDbType.Image, 16).Value = img;
        }
        else
        {
            // do nothing
        }
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
    }
} 
```

这个应用程序已经成功地使用了这个和另一个服务，唯一的问题是将图像文件作为字节数组提交，它起作用，但我无法在测试中渲染图像以确保它发送正常。我敢肯定这是我想念的简单的东西。感谢您的反馈...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:53:19.757

我让它工作了，Android 代码工作正常，问题出在服务和我的测试网页上。该服务需要将传入的字节数组作为更新语句的 SQL 参数进行处理，如下所示：

```
cmd.Parameters.Add("@arrayToInsert", SqlDbType.Image, img.Length).Value = img; 
```

其中“img”是来自 Android 的传入字节数组。然后在测试网页中，我像这样渲染图像：

```
MemoryStream stream = new MemoryStream();
SqlCommand command = new SqlCommand("select photo from table where pkid = @ImageID", con);
command.Parameters.AddWithValue("@ImageID", Request.QueryString["ImageID"]);
byte[] image = (byte[])command.ExecuteScalar();
stream.Write(image, 0, image.Length);
System.Drawing.Image bitmap = new Bitmap(stream);
Response.ContentType = "image/jpeg";
bitmap.Save(Response.OutputStream, ImageFormat.Jpeg);
con.Close();
stream.Close(); 
```

这就是它所需要的！感谢[@andrewr73](https://twitter.com/#!/AndrewR73)的建议！

# javascript - 我可以从网站上读取“真实”的移动 GPS 坐标吗？

> ID：10179353
> 
> 赞同：6
> 
> 时间：2012-04-16T18:12:19.680
> 
> 标签：javascript, geolocation, web, w3c

我做了一个网站，我想在移动设备（Android 和 iPhone）上阅读“真实”位置 GPS。[当我尝试使用W3C](http://dev.w3.org/geo/api/spec-source.html) javascript 方法从我的 Android 上设置我的网站上的位置时，GPS 未启用并且位置由 IP 设置（当我尝试使用 Google 地图应用程序时，GPS 已启用并在状态栏上闪烁）。有什么方法可以从手机上的网络读取 GPS（真正的 GPS）？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T18:19:38.047

使用 HTML5，您可以做到这一点。您需要查看 Geolocation API: [Dive Into HTML5](http://diveintohtml5.ep.io/geolocation.html) and [W3C Geolocation API Specification](http://dev.w3.org/geo/api/spec-source.html)

最简单的示例如下所示：

```
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition( 
        function (position) {  
            do_something(position.coords.latitude,position.coords.longitude);
        }, 
        function (error){
            switch(error.code){
                case error.TIMEOUT:
                    // Timeout
                    break;
                case error.POSITION_UNAVAILABLE:
                    // Position unavailable
                    break;
                case error.PERMISSION_DENIED:
                    // Permission denied
                    break;
                case error.UNKNOWN_ERROR:
                    // Unknown error
                    break;
                default: break;
           }
        }
    );
} 
```

可能您对某些特定于浏览器的实现也很感兴趣：[Mozilla](https://developer.mozilla.org/En/Using_geolocation)、[IE](http://msdn.microsoft.com/en-us/library/ie/gg593067%28v=vs.85%29.aspx)、[Chrome](http://code.google.com/p/geo-location-javascript/)

**更新。** 正如 Mozilla[在此处](https://developer.mozilla.org/En/Using_geolocation)所说，*例如，具有 GPS 的设备可能需要一分钟或更长时间才能获得 GPS 定位，因此可能会将不太准确的数据（IP 位置或 wifi）返回到 getCurrentPosition() 以启动。*

因此，如果您需要高精度（例如仅 GPS），请使用`watchPosition`而不是`getCurrentPosition`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T00:00:17.407

如 W3C 规范中所述，您可能需要使用 watchPosition 和 getCurrentPosition 的第三个参数，这是一个[PositionOptions 接口](http://dev.w3.org/geo/api/spec-source.html#position_options_interface)将 enableHighAccuracy 设置为 true，否则，使用其默认值 false，GPS 不一定会被打开装置。

# android - 是否应该在 Activity 的 OnCreate() 上调用 locationManager.requestLocationUpdates()？

> ID：10179356
> 
> 赞同：1
> 
> 时间：2012-04-16T18:12:26.873
> 
> 标签：android, locationmanager

我有一个绑定到数据适配器的 ListView，该适配器在我使用设备的 geoloc（纬度/经度）创建和加载我的位置对象后显示固定地标的距离。问题是，平均而言，加载下面的代码需要 3-7 秒，较长的过程是调用“requestLocationUpdates()”，如果没有 NETWORK_SERVICE 并且 GPS_SERVICE 成为主要的，有时可能需要几分钟才能加载，这使我活动列表视图空白

OnCreate() Activity 方法是调用 requestLocationUpdates() 的最佳位置吗？

locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); locationListener = new GeoLocationListener();

```
 Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(false);
    criteria.setSpeedRequired(false);
    criteria.setPowerRequirement(Criteria.POWER_LOW);

    String provider = locationManager.getBestProvider(criteria, true);        

    locationManager.requestLocationUpdates(provider,
        0, //300000, // TODO: Default to Check Every 5 Minutes OR
            0, //500,   // TODO: Default to Check if device moves more than 500 meters
            locationListener); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:25:40.390

[在这里](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)阅读答案。他们应该为您提供最好的帮助。

我会`requestLocationUpdates()`投入`onResume()`和`removeUpdates(this);`投入`onPause()`。这样，您的应用程序将在不活动时停止更新位置。如果您一直需要 gps，那么可以将 requestLocationUpdates 放入 onCreate() 中。

此外，为了加快 gps 修复，您可以使用最后知道的位置：

```
 mLocationProvider = mLocationManager.getBestProvider(new Criteria(), false);
    Location location = mLocationManager.getLastKnownLocation(mLocationProvider); 
```

此外，您可以显示微调器而不是列表，直到您在 `onLocationChanged(Location location)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:23:28.443

首先使用[getLastKnownLocation](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)在列表视图中显示最新的已知位置以避免显示空列表然后调用 requestLocationUpdates，我在 onCreate 方法中重新调用它时看不到任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:33:33.737

您不应该依赖位置更新来填充您的列表视图。尝试通过调用获取最后已知的位置`.getLastKnownLocation()`，然后可能会显示一个指示器，表明您的应用正忙于请求更准确的位置。

阅读[深入了解位置](http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html)

# c++ - C++ 将对象传递给线程

> ID：10179357
> 
> 赞同：1
> 
> 时间：2012-04-16T18:12:28.167
> 
> 标签：c++, windows, multithreading, object

我对我不太了解的行为有疑问：

我有两种 C++ 代码变体：

```
CreateThread( NULL, 0, ( LPTHREAD_START_ROUTINE ) clientThread, ( LPVOID ) connectionSocket, 0, NULL ); 
```

线：

```
Client a;
a.clientsocket = connectionSocket;
a.testText()
a.sendSocket(); 
```

工作得很好（sendSocket 将一些测试数据发送到套接字）。

但是，如果我这样做

```
Client a;
a.clientsocket = connectionSocket;
CreateThread( NULL, 0, ( LPTHREAD_START_ROUTINE ) clientThread, ( LPVOID ) &a, 0, NULL ); 
```

并使用线程：

```
a.testText();
a.sendSocket(); 
```

只有 testText() 有效。

我有点困惑为什么会这样。虽然我是 C++ 的爱好者 :-)

编辑：

添加了客户端类：

```
class Client
{
public:
    SOCKET clientsocket;

    Client()
{
}
~Client(){}
void displayMessage()
{
        std::cout << "test message client class" << std::endl;
}
int sendSocket()
{
    char *sendbuf = "CLIENT TEST";
    send(clientsocket, sendbuf, (int)strlen(sendbuf),0);
    closesocket(clientsocket);
    return 0;

}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:21:03.763

我猜在您的主线程中 CreateThread 成功，然后您的 Client 变量 a 超出范围并因此被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T20:17:33.287

从你的客户类

```
SOCKET clientsocket; 
```

每当你将它传递给一个线程时，SOCKET 就会调用它的复制构造函数。此复制构造函数可能未定义，或者它可能试图在同一端口上打开一个新连接并导致它失败。

将其更改为：

```
SOCKET* clientsocket; 
```

然后拥有它，以便每当您想做...

```
a.clientsocket = connectionSocket; 
```

变量“connectionSocket”是一个指针，然后轰炸药。当它未声明为变量时，将调用复制构造函数，您将获得一个全新的套接字，而不是之前使用的套接字。我认为这应该有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:28:07.703

Anon可能~~是~~在正确的轨道上，有些东西超出了范围，但我认为它是`connectionSocket`. `a.sendSocket()`但是，当您说这不起作用时，您必须提供更多详细信息来说明您的意思。应用程序会崩溃吗？你发现异常了吗？应用程序是否继续工作，但`sendSocket()`调用并没有导致实际发送内容？**实际问题是什么？**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T18:31:11.383

在第一种情况下，您传递一个connectionSocket，在第二种情况下，传递一个指向客户端类型的指针。也许你的意思是：

```
CreateThread( NULL, 0, ( LPTHREAD_START_ROUTINE ) clientThread, ( LPVOID ) a.clientsocket, 0, NULL ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T19:06:16.580

在我看来，它是一个超出范围的对象。SOCKET 只是一个 int HANDLE 值，并存储在 a 的成员中。'a' 在创建线程运行时超出线程创建函数的范围，（或在下一个 accept() 返回时损坏）。

尝试：

客户端 a= 新客户端（）；

在多线程代码中分配堆栈上的对象之前考虑 15 次，然后决定动态分配。

PS - @Anon 先到了 - 我没注意到。

# templates - 如何在 C++ 中找到经常实例化的模板？

> ID：10179358
> 
> 赞同：0
> 
> 时间：2012-04-16T18:12:28.993
> 
> 标签：templates, visual-c++

我的代码中有很多模板。

如何确定*哪些*模板导致代码膨胀（即通过多次实例化）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T06:36:15.743

对问题及其评论的快速说明：模板实例化的数量并不重要，只有具有不同类型组合的实例化数量才重要。这与模板专业化非常不同。

手动跟踪实例化有一种简单而肮脏的方法。对于您要检查的模板，只需添加一个生成警告的行。在这里很难给出这样的声明，因为它完全取决于您的编译器类型和项目中的编译器选项。一个好的猜测是添加一个具有唯一名称和可疑值的静态变量。现在您所要做的就是过滤编译器日志中的这些自定义警告。由于所有不同的类型组合只编译一次，因此每个组合应该只有一个警告。如果不是这样，从日志中过滤重复项仍然很容易。

不幸的是，用这样的自定义语句标记所有模板是侵入性的，并且可能非常耗时。如果您需要更复杂的东西，可以尝试使用模板元程序调试器。在这里（Boost 邮件列表），您可以找到一个简短的摘要和一个免费调试器下载页面的链接。

[http://boost.2283326.n4.nabble.com/Re-vsix-template-profiler-extension-Templight-td3888368.html](http://boost.2283326.n4.nabble.com/Re-vsix-template-profiler-extension-Templight-td3888368.html)

如果您对它的工作原理感到好奇，可以在[http://gsd.web.elte.hu/contents/articles/gpce06.pdf](http://gsd.web.elte.hu/contents/articles/gpce06.pdf)中阅读更多相关信息。

# ruby - 宝石可以有循环依赖吗？

> ID：10179359
> 
> 赞同：4
> 
> 时间：2012-04-16T18:12:32.383
> 
> 标签：ruby, rubygems, dependencies, dependency-management, circular-dependency

我开发了一个小型 gem 生态系统，某些功能将导致它们相互依赖。

RubyGems 是否支持循环依赖？换句话说，以这些规格推送 gem 是否安全？

```
Gem::Specification.new 'essentials' do |gem|
  gem.add_development_dependency 'development_tools'
end

Gem::Specification.new 'development_tools' do |gem|
  gem.add_runtime_dependency 'essentials'
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:48:50.353

这在技术上不是循环依赖，因为每个依赖都是不同的类型。如果这是一个真正的循环依赖，我会建议将两者结合到一个 gem 中，但你的 gem 名称说明了意图，这是理智的。

它应该工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:23:10.230

没有循环**运行时**依赖项。

如果一个 gem对另一个 gem 具有**运行时**依赖于第一个 gem 具有**开发**依赖关系，那么它应该是可以的，如果奇怪的话。

 **尽管如此，我**不会**推荐它。我建议确保您的依赖关系图完全没有循环。**

# c# - 在 C# 中测试类库

> ID：10179376
> 
> 赞同：5
> 
> 时间：2012-04-16T18:13:29.733
> 
> 标签：c#, visual-studio-2010, nunit

这是一个非常模糊（和菜鸟）的问题，但是.....如何在 C# 中测试类库？ **我正在使用 nUnit 进行测试。**

我想做的是测试数据库交互。输入将是一个序列化的 XML 对象，对其进行反序列化以针对代码进行测试，然后 XML 对象将被重新序列化并输出。

希望这能提供一些见解。我曾考虑过创建一个创建库实例的测试应用程序。我可以采取不同/更好/更有效的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:18:10.527

您必须创建一个使用 NUnit 的数据注释（、、等）的单独`TestFixture`项目`Test`。然后您可以构建该项目并将创建的 DLL 加载到 Nunit 中。

至于测试，只需像往常一样编写它们（[Arrange-Act-Assert 是更普遍的模式](http://www.arrangeactassert.com/why-and-what-is-arrange-act-assert/)）

像这样的东西

```
[Test]
public void MethodName_CallDatabase_ObjectDeserialized()
{
    //Arrange
    var db = new db();
    //Act 
    var output = db.ExecuteCall();
    //Assert
    Assert.That(output, Is.EqualTo("123"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:20:33.583

至于如何，通常您的解决方案将如下所示：

```
 Solution (Your Application)
    + YourApplication.Library
    + YourApplication.WebApp
    + YourApplication.Tests 
```

测试项目是您可以添加到解决方案中的特定项目。在那里，您可以制作单元测试文件，这些文件将使用 NUnit DLL 标记它们然后运行。`TestFixture`这意味着将这些类和这些类中的特定方法标记为`Test`方法，然后它们`YourApplication.Library`使用支持`Assert`调用执行项目的某些部分，以验证库调用的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T18:20:53.180

如果你真的对严谨感兴趣，这里有几个部分。

1.  熟悉 NUnit、MBUnit 或 MSTest
2.  找出您的库与其他库、框架、工具交互的位置。编写一些测试用例，将您对其他事物应该如何表现（以及它们应该如何表现不当）的假设编入代码。安装并熟悉模拟/存根库，例如 Moq 或 Rhino.Mocks。这些将告诉您您的代码何时以不正确的方式与外部代码交互。
3.  如果您愿意，请编写更多测试（这些测试跨越集成和单元测试之间的界限，IMO），将真实但简单的数据库与相同或相似的模式（如 SQLite）连接起来。现在，您的代码不再与您按照期望预先编程的模拟进行对话，但它也没有接触到完整的数据库。
4.  集成测试。将那个东西连接到一个真正的 [非生产] 数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T18:15:12.800

为此，请使用许多现有的单元测试框架之一。

[nUnit](http://www.nunit.org/)、[xUnit](http://xunit.codeplex.com/)甚至[MSTest](http://en.wikipedia.org/wiki/MSTest)（许多版本的 Visual Studio 都附带）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-31T00:42:38.110

如果您不想创建新的测试项目，只需在现有的类库项目中添加一个新类，然后向其中添加 Nunit 注释 TestFixture 并将测试作为其中的方法。如下

```
namespace APIWorkOut
{
    [TestFixture]
    public class TestClass
    {
        [Test]
        public void getListOfUser()
        {
            API api = new API();
            var listOFUsers = api.getUsers();
            Console.Write(listOFUsers.Data.Count);
        }       

    }
} 
```

# mysql - 使用 MyISAM 的 Django 外键完整性

> ID：10179381
> 
> 赞同：5
> 
> 时间：2012-04-16T18:13:36.033
> 
> 标签：mysql, django, foreign-keys, myisam

如果`MyISAM`没有 FK 完整性，使用`MyISAM`表的 django 应用程序如何强制执行 FK 约束的完整性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T18:44:49.680

不良。它会根据已经从先前交互中加载的信息，在引用对象更改时尽其所能发布更新和删除，但是没有什么可以保护您的数据不变得不一致。

该`ForeignKey`构造的存在较少声明完整性约束，因为它告诉 django 不同的表如何链接在一起，因此您可以在 python 中通过属性遍历其他类型的其他模型实例。orm 驱动的级联充其量是解决 MyISAM 等数据库缺点的创可贴。如果这对您很重要（而且应该如此），您应该从 MyISAM 引擎迁移到 InnoDB 或 PostgreSQL。

# wix - 我什么时候可以在 WIX 安装程序中获取目标目录？

> ID：10179383
> 
> 赞同：0
> 
> 时间：2012-04-16T18:14:07.070
> 
> 标签：wix, wix3.5, custom-action

所以我有一个自定义动作

```
 <CustomAction Id="GetTarget"
                BinaryKey="CA"
                DllEntry="GetTargetPath"
                Execute="immediate"
                Return="check"
                HideTarget="no"
                Impersonate="no" />

  <InstallExecuteSequence>
     <Custom Action="GetTarget" After="CostFinalize">(NOT REMOVE = "ALL")</Custom>
  </InstallExecuteSequence> 
```

这是调用一个调用该方法的 DLL`session.GetTargetPath("TARGETPATH");` 但我得到一个异常“目录名称无效。TARGETPATH”。我有自定义操作，`After="CostFinalize"`因为这是我从源（我可以提供）中读取的内容，但我认为有一个错误，我认为我只需要在正确的时间执行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:33:03.373

我认为你的意思是 TARGETDIR。看看[http://msdn.microsoft.com/en-us/library/windows/desktop/aa371685(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371685(v=vs.85).aspx)

# ruby - 在ruby中覆盖类方法

> ID：10179384
> 
> 赞同：-1
> 
> 时间：2012-04-16T18:14:15.223
> 
> 标签：ruby

我正在尝试覆盖另一个 gem 的方法。代码看起来像这样：

```
module DatabaseCleaner
  class Base
    def orm_strategy(strategy)
      # ...
    end
  end
end 
```

在我的宝石中：

```
require 'database_cleaner/base'

module DatabaseCleaner
  class Base
    def orm_strategy(strategy)
      # New code
    end
  end
end 
```

但是，它的原始版本仍在使用中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:20:46.473

您正在尝试覆盖该类的实例**方法**`Foo::Bar`。您必须重新定义类的方法：

```
module Foo
  class Bar
    def self.test  # self == Bar
      # New code
    end
  end
end 
```

# knockout.js - Knockout 映射插件或我的代码中的数组错误？

> ID：10179389
> 
> 赞同：2
> 
> 时间：2012-04-16T18:14:45.537
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

在使用 KO 映射插件更新页面上的数据时，我最近注意到一些有关的事情。我认为第一个现在已在 2.1.1 中修复，下面显示的第二个仍然存在：

我有一个简单的模型。问题在于它包含的地址数组。似乎当我使用映射插件时，它会跟踪数组中的 2 个元素，而实际上只有一个元素。我不确定这是否是我的代码或映射插件的问题。请考虑以下简单示例：

```
//Retrieved thru AJAX
var serverData = { name: "Bob", Addresses: [{ AddressLine: "", City: "", PostalCode: "", StateID: 10}] };  

    load(serverData);  
    //Seems OK at this point
    //this.vm.__ko_mapping__.mappedProperties shows properties for Addresses[0] & name which makes sense

    //Now some time goes by and we want to update the bound VM w/ new data from the server
    load(serverData);  

    //Problem!
    //this.vm.__ko_mapping__.mappedProperties shows properties for Addresses[0] & Addresses[1]
    //But there is no Addresses[1]!!

    //Lets simulate an update of data (1 more time)
    load(serverData);
    //Interestingly it doesn't get any worse, still just Addresses[0] & Addresses[1]

    function load(d)
    {  
       if (this.vm) //Refresh existing VM
       {
          ko.mapping.fromJS(serverData, vm);
       }
       else    //On 1st Load have mapping create the VM and bind it
       {
          this.vm = ko.mapping.fromJS(serverData);   //Mapping creates object from server data
          ko.applyBindings(this.vm, $("body")[0]);
       }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T14:45:44.343

映射插件允许定义一个回调，该回调返回数组中元素的键。[（请参阅http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)上的“使用键唯一标识对象” ）。这用于确定对象是新的还是旧的。存在三种可能的状态：新对象被**添加**到数组中，已经存在的元素**保留**在数组中（但被更新）或现有元素从数组**中删除**，因为它不再存在于新数据集中。（这些状态实际上由实用函数 ko.utils.compareArrays 确定）

这里正确的状态是“保留”，但由于您没有为数组中的地址提供唯一键，映射插件不知道这些条目实际上是相同的 - 因此状态“删除”被分配给当前对象和状态“添加”到新对象。

这会生成一个包含所有需要注意的元素的列表——当前元素的键为“0”，新的键为“1”，因此“mappedProperties”中有奇怪的条目。我认为这可以被认为是一个错误，但这确实是一个棘手的问题。而且这不是真正的内存泄漏，因为幽灵条目的数量总是`numPreviousEntries`.

Here is a fiddle demonstrating that the use of unique keys (can be anything if you have not more than one row, so I used the state id) indeed resolves this issue: [http://jsfiddle.net/xTHFg/4/](http://jsfiddle.net/xTHFg/4/)

# php - PHP，而在时

> ID：10179397
> 
> 赞同：1
> 
> 时间：2012-04-16T18:15:32.597
> 
> 标签：php, while-loop

我将尝试告诉您我将要使用此代码做什么。

我正在创建一个表，其中第一列是用户名，后跟当月的天数（每一天在一列中）。现在我正在尝试在每一行/列中创建选择选项以从中选择一个值。

这是我的代码：

```
<table width="100%" cellspacing="0" cellpadding="0" class="addtable">
<tr>
<td class="tabletitle">Personeelslid</td>
<?php
do{
    echo "<td class=\"tabletitle\">".$i."</td>";
    $i++;
} while ($i<=$dagen);
?>
</tr>
<?php
while($row_pers = $mysql->fetch_array($result_pers))
{
    $j=1;
    if ($color == _COLOR_WHITE){
        $color = _COLOR_GREY;
    } else {
        $color = _COLOR_WHITE;
    }
    echo "<tr class=\"trborder\">";
    echo "<td bgcolor=\"".$color."\">".$row_pers['pers_naam']."</td>";
    while ($j<=$dagen){
        echo "<td  bgcolor=\"".$color."\">";
        ?>
        <select name="naam_id" id="naam_id">
        <option value="test">test</option>
        <?php
        while($row_shiften = $mysql->fetch_array($result_shiften))
        {
        echo "<option value=\"".$row_shiften['shift_code']."\">".$row_shiften['shift_code']."</option>";
        }
        ?>
        </select>
        <?php
        echo "</td>";
        $j++;
    }
    echo "</tr>";
}
?>
</table> 
```

当前结果提供了我想要的一切，除了选择选项仅显示在 1 个位置。是否可以缓存它或重写我的代码以使其工作？

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:20:59.517

我们可能需要更多代码，例如：表结构和查询。看起来如果您正在尝试组合来自两个表的数据，并且使用 JOIN 查询来做到这一点更为常见。（例如[http://mysqljoin.com/](http://mysqljoin.com/)一个完全专注于这个主题的网站）

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:21:08.017

您可以将选项输出存储在字符串中，并生成一次。然后引用输出表中每一行的存储选项：

```
<?php
while($row_shiften = $mysql->fetch_array($result_shiften))
{
    $options += "<option value=\"".$row_shiften['shift_code']."\">".$row_shiften['shift_code']."</option>";
}
...
while ($j<=$dagen){
    echo "<td  bgcolor=\"".$color."\">";
    ?>
    <select name="naam_id" id="naam_id">
    <option value="test">test</option>
    // add in the options generated once
    <?php echo $options; ?>
    </select>
    <?php
    echo "</td>";
    $j++;
} 
```

此外，您不希望所有人`<select>`都具有相同的 id，因此您应该附加某种独特的后缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:21:29.637

那么你已经“用完了”你的 $result_shiften 所以你不能再使用它了。您需要将其复制到另一个 var，位于脚本顶部的某个位置：

```
$options = "";
while($row_shiften = $mysql->fetch_array($result_shiften))
{
    $options += "\m<option value=\"".$row_shiften['shift_code']."\">".$row_shiften['shift_code']."</option>";
} 
```

然后只需在下面使用 echo $options

```
<option value="test">test</option>
<?php echo $options; ?>
...etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T18:23:11.423

我不确定我是否正确地遵循了您的请求，但看起来您需要为 SELECT 实体提供更独特的名称/ID。现在，您拥有可变数量的 SELECT 标记，它们都使用相同的“名称”和“id”（“naam_id”）。

根据结果​​的结果将它们更改为变量`$row_pers`。或者，您可以使用`$j`，但是一旦您提交了表单并希望处理输入，这可能对您没有帮助。

# jquery - 在自调用 jQuery 函数中设置属性和传递参数

> ID：10179398
> 
> 赞同：0
> 
> 时间：2012-04-16T18:15:42.747
> 
> 标签：jquery, function, syntax, arguments, argument-passing

我认为这一切都归结为语法问题。我不确定如何在 addItem() 函数中正确设置 li 项的 id 属性。

如果我删除 addItem() 函数（在 on click 函数中定义）中的“ths”参数，则为动态创建的列表项正确设置了 id 属性。如果我传递参数，函数会成功触发，但它不会为列表项设置 id。它只是创建一个没有 id 的列表项。

在保持以下格式的同时，如何在将参数传递给函数时正确设置动态创建的列表项的 id？

我可以做这样的事情：

```
$('<li>'+ths+'</li>').attr('id', 'foo'+i).attr('class', 'bar'); i++; 
```

但这不符合我下面的模型的语法。它也不是很有效。

```
(function () {
    var i = 1;
    var addContainer = {
        init: function () {
            $('<li></li>', {
                id: "today"
            }).prependTo('#myDiv');
        },
        addItem: function (ths) {
            $('<li>' + ths + '</li>', {
                id: 'newItem' + i
            }).prependTo('#orderList');
            i++
        }
    };
    $('body').on('click', '.itemRow', function () {
        var ths = $(this).children('.itemTitle').text();
        if ($('today').length >= 0) {
            addTodaysOrders.addOrder(ths);
        }
    });
})();​ 
```

这段代码只是一个简短的概述，以了解要点......它缺少一些部分。但这里重要的部分只是在这种格式中设置 id 的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:24:46.857

```
$('<li>', {
    id: 'newItem' + i,
    text: ths
}) 
```

# c# - Monodevelop 和 mongodb 驱动程序在 Ubuntu 的开发服务器中引发异常

> ID：10179400
> 
> 赞同：3
> 
> 时间：2012-04-16T18:15:45.180
> 
> 标签：c#, mongodb, ubuntu, monodevelop, appharbor

以下代码在[AppHarbor](https://appharbor.com/)上运行良好。

```
public virtual void button1Clicked (object sender, EventArgs args)
        {

            button1.Text = "You clicked me";
            MongoServer ms=MongoServer.Create("mongodb://sbose78:xxxxx@staff.mongohq.com:10068/BOSE");
            MongoDatabase db= ms.GetDatabase("BOSE");
            MongoCollection<User> users=db.GetCollection<User>("users");
            button1.Text=users.Count().ToString();

        } 
```

但是，它在我的 Ubuntu 机器上遇到了异常。我正在使用 Monodevelop。

```
Server Error in '/' Application
recursionPolicy != NoRecursion not currently implemented

Description: HTTP 500\. Error processing request.

Stack Trace:

System.NotImplementedException: recursionPolicy != NoRecursion not currently implemented
  at System.Threading.ReaderWriterLockSlim..ctor (LockRecursionPolicy recursionPolicy) [0x00000] in <filename unknown>:0 
  at MongoDB.Bson.Serialization.BsonSerializer..cctor () [0x00000] in <filename unknown>:0 

Version information: Mono Runtime Version: 2.6.7 (Debian 2.6.7-3ubuntu1); ASP.NET Version: 2.0.50727.1433 
```

可能会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:09:02.110

您有一个版本太旧的 MonoDevelop（实际上是 Mono）。

我们测试：

单声道开发 2.8.2 单声道 2.10.1

# c++ - 继续 C++ 中的迭代，直到 gdb 中的特定迭代次数

> ID：10179402
> 
> 赞同：7
> 
> 时间：2012-04-16T18:15:49.180
> 
> 标签：c++, gdb

我正在使用 gdb-7.0.1，并且我认为我在代码的某个部分中检测到了一个错误，该部分有一个`for`循环。循环`for`看起来像

```
for (int i=0 ; i< end ; ++i )
{
   //Code here.
} 
```

这`end`是一个非常大的整数。代码在第一次迭代时不会崩溃，并且似乎在迭代次数的某个地方崩溃`end/2`。

因为我想了解代码在迭代次数处的行为，所以`end/2`直到我`stepping`到达这个迭代点是不可行的。`nexting``i=0`

有没有办法告诉`gdb`继续执行 for 循环直到`i`获取值`end/2`，然后等待用户手动单步执行迭代次数`end/2`？

我`gcc-4.5.2`在 Ubuntu Linux 上使用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:19:06.730

这是关于使用 gdb的[条件断点](http://www.cs.cmu.edu/~gilpin/tutorial/#3.4)的教程。

我猜你不知道这个术语，否则很容易用谷歌搜索。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T18:19:29.213

当您设置断点时，它会给您一个断点编号（目前，假设它是 1）。然后，您将使该断点成为有条件的，例如：

```
condition 1 i==end/2 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T18:20:25.343

您必须使用条件断点。这里有更多关于它的信息：[http ://www.cs.cmu.edu/~gilpin/tutorial/#3.4](http://www.cs.cmu.edu/~gilpin/tutorial/#3.4)

在 SO 上：[当 char* x 指向值等于“hello”的字符串时，如何在 gdb 中设置条件断点？](https://stackoverflow.com/questions/4183871/conditional-breakpoint-in-gdb)

在您的情况下（未经测试）：

```
break <line_number> if i==end/2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T19:26:06.597

如果`end`很大（数万），那么条件断点解决方案可能会非常慢 - gdb 必须在每次循环时评估条件。如果这对您来说是个问题，那么您可以使用这个技巧：

```
for (int i=0 ; i< end ; ++i )
{
   if (i == end/2)
      i %= end ; // This has no effect, but lets you set a breakpoint here
   //Code here.
} 
```

我一直这样做:-)

另一种解决方案是在断点上设置跳过计数。我在Qt环境中使用gdb，所以我不能给你gdb语法。但这比设置条件要快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T18:19:05.397

您应该能够在其中放置一个`if (i == (end/2 -1)) { Foo; }`，然后在 Foo 处设置一个断点，这将允许您从那里继续前进。

# crystal-reports - 水晶报表钻取问题

> ID：10179409
> 
> 赞同：0
> 
> 时间：2012-04-16T18:16:40.043
> 
> 标签：crystal-reports

好的，所以我做了一些更改并到达了某个地方。然而，问题仍然是他们的。我发现当生成主报告时，超链接不会添加到某些字段中。但是，当我们使用相同的参数再次重新运行报告时（我们有一个重新运行报告的链接，只更改了年份参数），这些字段现在有了链接。这很奇怪。例如，我运行 2012 年的报告，按链接返回 2011，然后按链接转到 2012，这些链接现在在 2012 年有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:19:49.363

您是否只在第一页加载时将“ReportDocument”对象分配给 CrystalReportViewer？您应该尝试将报表文档存储在会话中，并确保在回发时再次设置 CrystalReportViewer 控件的“ReportSource”属性。

```
if (!IsPostBack)
{
    // do a bunch of Crystal Report's loading stuff
    ReportDocument yourReportDocument = new ReportDocument();
    // etc, etc.
    // store the report document in server memory
    yourViewerControl.ReportSource = yourReportDocument;
    Session["theReportDocument"] = yourReportDocument;
}
else
{
    yourViewerControl.ReportSource = Session["theReportDocument"];
    yourViewerControl.Show();
} 
```

# java - Java FileOutputStream：相对于程序文件夹的路径？

> ID：10179415
> 
> 赞同：4
> 
> 时间：2012-04-16T18:17:22.360
> 
> 标签：java, file, path, fileoutputstream

找到相对于“安装”java应用程序的文件夹的路径的最佳方法是什么？

我有一个带有静态方法的类：`public static void saveToFile(String fileName)`

当我用绝对路径调用它时，它可以工作，但我真正想要的是运行应用程序的相对路径和一个文件夹。

我还没有部署我的应用程序，但现在我想找到一个相对于（Netbeans）项目根目录的路径，以及一个名为 data: **ProjectName\data\file.dat**的文件夹。我应该使用这个`File`类还是把它变成一个`URI`或什么？

请注意，我更喜欢它独立于系统，并且在部署应用程序时仍然可以工作。最终（相对）路径名将存储在**属性**文件中。

对不起，如果这个问题是重复的，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T19:23:24.727

> 找到相对于“安装”java应用程序的文件夹的路径的最佳方法是什么？

操作系统制造商长期以来一直在说**不要**将文件保存在应用程序目录中。

> 请注意，我更喜欢它独立于系统，并且在部署应用程序时仍然可以工作。

而是将. `File`_ 用户主目录应该可以建立一个可以读取或写入的文件对象。它也是一个跨运行可重现且独立于平台的地方。`sub-directory``user.home`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:23:06.820

如果您部署为 jar，则可以获得当前代码正在使用的 jar 文件名和路径，如下所示：

```
new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation().getPath()); 
```

（来自[如何获取正在运行的 JAR 文件的路径？](https://stackoverflow.com/questions/320542/how-to-get-the-path-of-a-running-jar-file)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T02:56:08.107

干得好：

```
String path = System.getProperty("user.dir"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T18:22:01.900

要查找当前工作目录的相对路径，请说`new File(".")`.

如果你想知道当前工作目录的绝对路径，你可以写`new File(".").getAbsolutePath()`或 File(".").getAbsoluteFile()`。

我希望这回答了你的问题。如果我没有正确理解你，我很抱歉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-01T14:06:30.800

要获取文件的绝对路径，请使用 new File().getCanonicalFile()。

```
new FileOutputStream(new File(".\\target\\dataset.xml").getCanonicalFile()) 
```

# liferay-6 - login.events.pre 和 login.events.post 之间的区别

> ID：10179421
> 
> 赞同：1
> 
> 时间：2012-04-16T18:17:53.087
> 
> 标签：liferay-6

这两个启动事件有什么区别

login.events.pre 和 login.events.post

因为当我开发 Liferay 6 Hookin 并使用这两个配置 portal.properties 文件时。

他们两个都被调用了，只有在点击默认 Liferay 登录上的提交按钮之后。

```
login.events.pre=com.sample.hook.LoginAction
login.events.post=com.sample.hook.LoginAction2 
```

这个 login.events.pre 和 login.events.post 可以被认为是 Servlet 中的过滤器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:00:22.537

同意马克，我只是匆忙回答！

仅在成功登录后才会触发这两个事件。

login.events.pre 通常为用户执行基本准备，例如填充 ServicePreAction 对象。

login.events.post 是在活动之后，您可以在其中设置会话或设置登录页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:52:07.143

不，它不是过滤器。此操作将从 MainServlet 调用。有关详细信息，请参阅第 988 行的 Liferay 来源[http://docs.liferay.com/portal/6.0/javadocs/src-html/com/liferay/portal/servlet/MainServlet.html](http://docs.liferay.com/portal/6.0/javadocs/src-html/com/liferay/portal/servlet/MainServlet.html)。

# c# - 使用 C# 在同一进程中使用 IPC 管道

> ID：10179429
> 
> 赞同：3
> 
> 时间：2012-04-16T18:18:22.593
> 
> 标签：c#, .net, ipc, pipe

我有两个线程。一个线程读取请求并使用消息队列将其传递给服务器，另一个线程从消息队列中读取响应并将其发送回。在同一进程中，调用者类方法将请求写入管道（使用第一个线程共享的服务器管道流），然后使用第二个线程共享的客户端管道流读取响应。这可以使用 Java PipeInputStream 和 PipeOutputStream 轻松完成，如下所示。本质上，我正在寻找等效于 C# 中的 Java 逻辑。我尝试在 C# 中使用匿名管道失败。

## RequestHandlerThread（上面提到的Thread1）

```
out = new PipedOutputStream();
readPipeIs = new PipedInputStream(out);
readDataIs = new DataInputStream(readPipeIs);
// read data from readDataIs
// Send it to server over message queue
// Share 'out' so that other class method can write to it. 
```

## 响应处理程序（如上所述的线程 2）

```
in = new PipedInputStream();
writePipeOs = new PipedOutputStream(in);
writeDataOs = new DataOutputStream(writePipeOs);

// Wait and read from message queue
// write received data to 'writeDataOs'
// Share 'in' so that other class method can read from it. 
```

我不确定 C# 管道是否受限于两个进程之间的通信。上述所有逻辑都在同一个进程中，只是有两个线程与消息服务器通信。

我在两个线程中都尝试了一对 AnonymousPipeServerStream 和 AnonymousPipeClientStream 对。我共享了用于写入的服务器流和用于通过其他类方法读取的客户端流。

上述逻辑有什么明显的缺陷，或者对 IPC 的选择有什么建议吗？

添加源代码 这里是测试类

```
class Test
{
    private static byte[] ret;
    private static bool ready;

    Stream outStream;
    Stream inStream;

    private void clientConnReqHandler()
    {
        AnonymousPipeServerStream pipeServer = new
              AnonymousPipeServerStream(PipeDirection.Out);

        outStream = pipeServer;

        string pipeHandle = 
                     pipeServer.GetClientHandleAsString();

        AnonymousPipeClientStream pipeClient =
            new AnonymousPipeClientStream(PipeDirection.In, 
                       pipeHandle);

        pipeServer.DisposeLocalCopyOfClientHandle();

        ready = false;
        BinaryReader binReader = new BinaryReader(pipeClient);
        int mesgSize = binReader.ReadInt32();
        System.Console.WriteLine("Message Lenght To read: " + 
                                  mesgSize);
        byte[] buffer = binReader.ReadBytes(mesgSize);
        System.Console.WriteLine("Message read: " + 
                    buffer.ToString());
        // Simulate some processing 
        Thread.Sleep(5000);
        mesgProcessing(buffer);

    }
    private static void mesgProcessing(byte[] buffer)
    {

        System.Text.UTF8Encoding encoding = new 
                            System.Text.UTF8Encoding();
        byte[] extra = encoding.GetBytes("Echo : ");

        ret = new byte[buffer.Length + extra.Length];
        System.Buffer.BlockCopy(extra, 0, ret, 0, extra.Length);
        System.Buffer.BlockCopy(buffer, 0, ret, extra.Length, 
                                buffer.Length);
        ready = true;
    }

    private void clientConnRespHandler()
    {
        AnonymousPipeServerStream pipeServer = new 
                AnonymousPipeServerStream(PipeDirection.Out);

        string pipeHandle = 
                  pipeServer.GetClientHandleAsString();

        AnonymousPipeClientStream pipeClient =
            new AnonymousPipeClientStream(PipeDirection.In, 
                  pipeHandle);

        inStream = pipeClient;
        pipeServer.DisposeLocalCopyOfClientHandle();

        while (ready)
        {
            BinaryWriter binWriter = new 
                           BinaryWriter(pipeServer);
            binWriter.Write(ret.Length);
            binWriter.Write(ret);
            ready = false;
        }
    }

    public static void Main()
    {
        Test setup = new Test();
        setup.threadTest();

        Test2 threadTest = new Test2();
        // This method will do actuall read and write. 
        threadTest.runTest(setup.inStream, setup.outStream);
    }
    public void threadTest()
    {
        Thread reqHandlerThread = new Thread(new 
                ThreadStart(clientConnReqHandler));
        Thread respHandlerThread = new Thread(new 
               ThreadStart(clientConnRespHandler));

        reqHandlerThread.Start();
        respHandlerThread.Start();

    }
} 
```

读/写的类：

```
class Test2
{

    internal void runTest(System.IO.Stream inStream, 
                  System.IO.Stream outStream)
    {
        BinaryWriter writer = new BinaryWriter(outStream);

        System.Text.UTF8Encoding encoding = new 
                 System.Text.UTF8Encoding();
        byte[] mesg = encoding.GetBytes("Hello World!!!");

        writer.Write(mesg.Length);
        writer.Write(mesg);

        BinaryReader reader = new BinaryReader(inStream);
        int mesgSize = reader.ReadInt32();
        System.Console.WriteLine("Message Lenght To read: " + 
                      mesgSize);
        byte[] buffer = reader.ReadBytes(mesgSize);
        System.Console.WriteLine("Message read: " + 
                    buffer.ToString());
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:28:23.773

好的。它在摆脱 DisposeLocalCopyOfClientHandle() 后起作用。当然必须修复while循环条件的一些新错误，以检查数据是否准备好并从字节数组中正确打印字符串。

# python - 如何使用 NLTK 加载语料库的多个 XML 文件并将其作为一个整体与 Text 类一起使用？

> ID：10179430
> 
> 赞同：0
> 
> 时间：2012-04-16T18:18:24.040
> 
> 标签：python, xml, nlp, nltk, corpus

伙计们，我已经为 NLTK 整理了一组语料库，它们基本上是简单的 XML 文件。我可以像这样加载它：

```
>>> from nltk.corpus import cicero
>>> print cicero.fileids()
['cicero_academica.xml', 'cicero_arati_phaenomena.xml', ...] 
```

现在，我知道 XMLCorpusReader 不会一次给我所有这些 XML 文件的内容，因为它希望一次只处理一个 XML，对吗？我试图绕过它编写一个 for 循环，将它全部放在一个列表中并将其提供给 XMLCorpusReader 但没有运气......

**简而言之：如何使用 NLTK 加载多个 XML 语料库并同时在所有语料库中运行 .words() ？工作代码示例会很好。**

似乎我不能一次加载所有 XML 并使用它们，例如，使用类 Text() 来通过所有 XML 文件打印单词的索引，而不仅仅是一次通过一个。

是否有任何解决方法或真正的 NLTK 解决方案？我应该编写一个神奇的 XMLCorpusReader 继承类吗？我应该放弃 XML 并使用平面文件吗...？

这与我的问题类似，但到目前为止，我认为那里的答案在 NLTK 方面并没有真正有用：[Can NLTK's XMLCorpusReader be used on a multi-file corpus?](https://stackoverflow.com/questions/6837566/can-nltks-xmlcorpusreader-be-used-on-a-multi-file-corpus)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:23:56.007

不完全是我所追求的，但它现在解决了这个问题。我会多玩一点，所以也许以后会有所不同。无论如何，一个小的工作测试:-)

```
# http://stackoverflow.com/questions/6849600/does-anyone-have-a-categorized-xml-corpus-reader-for-nltk
from CatXMLReader import CategorizedXMLCorpusReader

from nltk.corpus import cicero
from nltk import Text

fileids = cicero.abspaths()
reader = CategorizedXMLCorpusReader('/', fileids, cat_file='cats.txt')
words = Text(reader.words(fileids))
print words.concordance('et') 
```

# matlab - MATLAB 'cat()' 函数返回不同的矩阵大小

> ID：10179431
> 
> 赞同：0
> 
> 时间：2012-04-16T18:18:30.020
> 
> 标签：matlab, concatenation, concat, cat

如果我执行`s.device_macs`，那么我会返回 a`<1x3503 cell>`所以我希望这是我的连接的输出，但是当我使用时我有两件事我不确定：`a = cat(2,s.device_macs)`

连接之前我使用过`cat(1,x)`，但这不起作用，但是数字`2`让它运行，第二件事是它返回一个 <1x603326 单元格>，显然比我不尝试使用时大得多`cat()`。

非常感谢，来自 MATLAB 新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:25:19.470

`s.device_macs`是一个 1 行（第一维）x 3503 列（第二维）向量。这就是为什么您必须指定 2 in `cat(2,s.device_macs)`，以便它沿第二个维度（列）连接。我的猜测是 1x603326 结果是一个包含 603326 个字符（在列中）的字符串，但不完全确定......希望其他人可以在这里提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:29:21.133

我使用了一种作弊方法来解决这个问题。正如我提到的`ans`那样，结果是正确的，所以我决定只使用它：

```
s.device_macs; % This gives the answer of <1x3503 cell>
macId = ans; % I now make macId copy answer
clear ans; % Now I wipe ans leaving me with just macId 
```

我知道与仅了解语言相比，这不是一种有效的编码方法，但是找到胶带式的修复很有趣：P。

# php - 使用 PHP 从 ZIP 存档中查找和显示图像文件的更简洁的方法

> ID：10179435
> 
> 赞同：4
> 
> 时间：2012-04-16T18:18:50.003
> 
> 标签：php, image, zip

```
function showimage($zip_file, $file_name) {
    if (file_exists($zip_file)) {
        $zip = zip_open($zip_file);
        while ($zip_entry = zip_read($zip)) {
            if (zip_entry_open($zip, $zip_entry, "r")) {
                if (zip_entry_name($zip_entry) == $file_name) {
                    $theimg = zip_entry_read($zip_entry, zip_entry_filesize($zip_entry));
                    $theimg = imagecreatefromstring($theimg);
                    if ($theimg !== false) {
                        header('Content-Type: image/jpeg');
                        imagejpeg($theimg);
                        imagedestroy($theimg);
                    }
                    else { echo "Could not create image."; }
                    zip_entry_close($zip_entry);
                }
            }
            else { echo "Could not open."; }
        }
        zip_close($zip);
    }
    else { echo "File not found."; }
} 
```

我正在运行此函数以打开指定的 zip 文件，然后遍历内容以查找指定的文件名，然后从该文件创建图像而无需提取。我只是有点好奇这个过程的系统密集程度如何，以及是否有一种更简洁/更直接的方式可以在 zip 存档中查找文件，而无需循环查看名称是否与给定的文件名匹配。假设它存在，是否可以直接从具有给定名称的 zip 文件中调用文件？

上面的代码有效......我想我只是想看看如何做得更好。如果这是有道理的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T21:44:34.830

ZipArchive 有一种无需实际搜索即可获取文件的方法。

```
function showimage($zip_file, $file_name) {
    $z = new ZipArchive();
    if ($z->open($zip_file) !== true) {
        echo "File not found.";
        return false;
    }

    $stat = $z->statName($file_name);
    $fp   = $z->getStream($file_name);
    if(!$fp) {
        echo "Could not load image.";
        return false;
    }

    header('Content-Type: image/jpeg');
    header('Content-Length: ' . $stat['size']);
    fpassthru($fp);
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:30:25.947

正如 Brad 上面所说，不需要使用 GD 库，也不需要写入文件或其他任何东西。只需回显 zip_entry_read() 函数的结果并设置 Content-Type。你可以使用这样的东西：

```
 function showimage($zip_file, $file_name) {
        if (file_exists($zip_file)) {
            $zip = zip_open($zip_file);
            while ($zip_entry = zip_read($zip)) {
                if (zip_entry_open($zip, $zip_entry, "r")) {
                    if (zip_entry_name($zip_entry) == $file_name) {
                        $theimg = zip_entry_read($zip_entry, zip_entry_filesize($zip_entry));
                        if ($theimg !== null) {
                            header('Content-Type: image/jpeg');
                            echo $theimg;
                        }
                        else { echo "Could not load image."; }
                        zip_entry_close($zip_entry);
                    }
                }
                else { echo "Could not open."; }
            }
            zip_close($zip);
        }
        else { echo "File not found."; }
    } 
```

我认为只是不加载 GD 库应该可以很好地提高性能。

# javascript - 我在下面一直不确定

> ID：10179436
> 
> 赞同：0
> 
> 时间：2012-04-16T18:18:51.357
> 
> 标签：javascript, jquery

我试图在用户上传文件后显示文件名。该文件成功上传，但在 javascript 中，它一直附加在“未定义”列表中。为什么它一直显示“未定义”而不是从文件输入上传的文件名？？：

以下是上传后显示文件名和消息的代码：

```
function stopImageUpload(success){

    function handleFileSelect(evt) {
    var files = evt.target.files;
    localStorage["fname"] = files[0].name; //save the name for future use
}

$('.fileImage').bind('change', handleFileSelect, false);

      var result = '';
      if (success == 1){
  result = '<span class="msg">The file ('+localStorage["fname"]+') was uploaded successfully!</span><br/><br/>';
    localStorage["fname"] = undefined; //remove the temporary variable

      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

      return true;   
} 
```

下面是表格：

```
 <form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='stopImageUpload(this);' class='imageuploadform' >
    <p>Image File: <input name='fileImage' type='file' class='fileImage' />
    <input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' />
    </p> 
    <ul class='list'></ul>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:34:52.743

尝试分解你的功能。在处理表单提交的函数之外绑定更改事件。

```
$(document).ready(function(){
    $('.fileImage').bind('change', handleFileSelect, false);
});

function handleFileSelect(evt) {
    var files = evt.target.files;
    localStorage["fname"] = files[0].name; //save the name for future use
}
function stopImageUpload(success){
      var result = '';
      if (success == 1){
  result = '<span class="msg">The file ('+localStorage["fname"]+') was uploaded successfully!</span><br/><br/>';
    localStorage["fname"] = undefined; //remove the temporary variable

      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

      return true;   
} 
```

# wpf - 构建对接工作区 - 我如何构建它？

> ID：10179442
> 
> 赞同：0
> 
> 时间：2012-04-16T18:19:08.063
> 
> 标签：wpf, layout

我为我的新应用程序创建了一个工作区，它应该工作的方式是我在屏幕左侧的单列中有一个视觉元素列表，右侧是一个空的工作区。当用户将新的 UIElement 从左侧拖到我的工作区（可能是网格或一种面板）时，我希望工作区显示 4 个箭头（停靠箭头） - 我知道当只有一个元素。当用户现在将新的 UIElement 拖到工作区时，我想要相同的 4 个停靠箭头，允许我将新元素放置在现有 UIElement 的左侧、右侧或上方或下方。

我希望每个 UIElement 也能够达到拖放行为，这意味着当我拖动 UIElement 时，我希望能够相对于我悬停在上方的那个进行停靠，从而允许我以这种方式构建整个工作区。

当将新的 UIElement 悬停在工作区中已放置的 UIElement 之上时，我悬停在上方的项目和外部“网格”上都应该有停靠箭头，允许我“全局”停靠。我让我的一个朋友录制了一段小视频，说明这在他正在使用的另一个程序中是如何工作的 - 这是我正在寻找的类似行为：[LNK REMOVED]

请就如何构建它提出建议-我正在研究 DockPanels，因为这似乎是显而易见的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:50:45.420

Codeplex上的Avalon停靠库？免费

[http://avalondock.codeplex.com/documentation](http://avalondock.codeplex.com/documentation)

# cloud - 如何对红外图像进行降噪？（SST，海面温度）

> ID：10179443
> 
> 赞同：0
> 
> 时间：2012-04-16T18:19:15.927
> 
> 标签：cloud, gradient

我正在从事一个图像处理项目，该项目应该从云层和丢失的数据中去噪卫星图像（SST，海面温度）。这是一项非常复杂且重要的任务，因为输入图像中存在云污染和缺失数据会对任何梯度方法的结果产生严重影响。

如果有人可以帮助我，或者给我一个提示，我真的很感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:22:43.587

我不知道这是否适用于您，但一种可能是使用[HDR](http://en.wikipedia.org/wiki/High_dynamic_range_imaging)。
您也可以尝试模糊效果，但这可能会破坏图像的质量。

# entity-framework - 我可以将枚举存储为 EF 5 中的字符串吗？

> ID：10179444
> 
> 赞同：17
> 
> 时间：2012-04-16T18:19:23.760
> 
> 标签：entity-framework, entity-framework-5

我们在解决方案中使用 EF CF 已有一段时间了。大粉丝！到目前为止，我们一直在使用 hack 来支持枚举（在模型上创建一个额外的字段；在映射期间忽略枚举；并将额外的字段映射到我们将使用的数据库中的列）。传统上，我们一直将枚举作为字符串（varchars）存储在数据库中（使其美观且可读）。现在有了 EF 5（Beta 2）中的枚举支持，它看起来只支持将枚举映射到数据库中的 int 列......我们可以让 EF 5 将我们的枚举存储为它们的字符串表示形式。

其中“Type”是 DocumentType 类型的枚举

```
public enum DocumentType 
    {
        POInvoice,
        NonPOInvoice,
        Any
    } 
```

我尝试使用以下方法对其进行映射：

```
public class WorkflowMap : EntityTypeConfiguration<Model.Workflow.Workflow>
    {
        public WorkflowMap()
        {
            ToTable("Workflow", "Workflow");
            ...
            Property(wf => wf.Type).HasColumnType("varchar"); 

        }
    } 
```

我以为会是灵丹妙药，但..

那只是抛出：

> 指定的架构无效。错误：（571,12）：错误 2019：指定的成员映射无效。类型“Dodson.Data.DataAccess.EFRepositories.Workflow”中成员“Type”的类型“Dodson.Data.DataAccess.EFRepositories.DocumentType[Nullable=False,DefaultValue=]”与“SqlServer.varchar[Nullable=”不兼容False,DefaultValue=,MaxLength=8000,Unicode=False,FixedLength=False]' 'CodeFirstDatabaseSchema.Workflow' 类型中的成员 'Type'。

你的意见？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-16T19:04:36.503

目前这是不可能的。EF 中的枚举与 CLR 中的枚举具有相同的限制——它们只是命名为一组整数值。检查[这篇文章](http://blogs.msdn.com/b/adonet/archive/2011/06/30/walkthrough-enums-june-ctp.aspx)进行确认：

> EF 枚举类型定义存在于概念层中。与 CLR 枚举类似，EF 枚举具有基础类型，它是 Edm.SByte、Edm.Byte、Edm.Int16、Edm.Int32 或 Edm.Int64 之一，如果没有指定，则 Edm.Int32 是默认的基础类型。

我发布了有关此问题的[文章](http://www.ladislavmrnka.com/2012/03/do-you-want-simple-type-mapping-or-conversions-in-ef/)和[相关建议。](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/2639292-support-for-simple-type-mapping-or-mapped-type-con)如果您想在将来看到此功能，请投票支持该建议。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-27T04:41:19.063

几周前我遇到了这个问题。我能想到的最好的办法就是有点hacky。

我在 Person 类上有一个 Gender 枚举，我使用数据注释将字符串映射到数据库并忽略枚举。

```
public class Person
{
    public int PersonID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    [Column("Gender")]
    public string GenderString
    {
        get { return Gender.ToString(); }
        private set { Gender = value.ParseEnum<Gender>(); }
    }

    [NotMapped]
    public Gender Gender { get; set; }
} 
```

以及从字符串中获取正确枚举的扩展方法。

```
public static class StringExtensions
{
    public static T ParseEnum<T>(this string value)
    {
        return (T)Enum.Parse(typeof(T), value, true);
    }
} 
```

有关详细信息，请参阅此帖子 - [http://nodogmablog.bryanhogan.net/2014/11/saving-enums-as-strings-with-entity-framework/](http://nodogmablog.bryanhogan.net/2014/11/saving-enums-as-strings-with-entity-framework/)

# java - 什么是 Java 中的参数多态性（示例）？

> ID：10179449
> 
> 赞同：17
> 
> 时间：2012-04-16T18:19:54.430
> 
> 标签：java, polymorphism

据我了解，参数多态性是一种允许对各种数据（类型）进行统一操作的技术。我的知识正确吗？

这个例子是参数多态性吗？我相信这是因为 Animal.talk 允许在特定动物类型（猫或狗）的情况下调用谈话。

```
public interface Animal
{
  public String talk();
}

public class Cat implements Animal
{
  public String talk()
  {
    return "Cat says Meow!";
  }
}

public class Dog implements Animal
{
  public String talk()
  {
    return "Dog says Woof! Woof!";
  }
}

import java.util.*;

public class PolymorphismExample
{
  public static void main(String[] args)
  {
    Collection<Animal> animals = new ArrayList<Animal>();
    animals.add(new Cat());
    animals.add(new Dog());
    for (Animal a : animals)
    {
      System.out.println(a.talk());
    }
  }
} 
```

问候。

编辑：如果我的示例没有具体展示参数多态性，请您提供一个吗？谢谢你。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-16T18:24:44.983

“参数多态性”只是 Java 中“泛型”的另一个术语。这个想法很简单：你声明一个特定的类将使用什么*类型*，一个明显的例子出现在`java.util`包的所有集合中。

为了学习 Java 中泛型的所有细微差别，我强烈推荐 Angelika Langer 的[FAQ](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)，它探索了规范的每一个角落。

在您的代码中，这一行是使用泛型的示例：

```
Collection<Animal> animals = new ArrayList<Animal>(); 
```

指定一个集合来保存任何动物对象。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-16T18:25:41.937

维基百科：

> 在编程语言和类型理论中，参数多态性是一种使语言更具表现力的方法，同时仍保持完全的静态类型安全。使用参数多态性，可以通用地编写函数或数据类型，以便它可以相同地处理值而不依赖于它们的类型。这样的函数和数据类型分别称为泛型函数和泛型数据类型，构成泛型编程的基础。

一个很好的例子就是标准的 Java 库集合。

例如，`Collections.sort`声明为：

```
public static <T extends Comparable<? super T>> void sort(List<T> list) 
```

它可以获取`T`与其他对象类型相当的对象列表`T`并对列表进行排序，而不必担心`T`实际是什么类型。

It is different from subtype polymorphism: subtype polymorphism is exemplified by the fact that `sort` can take any sort of `List` -- an `ArrayList`, a `LinkedList`, etc.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T18:22:42.777

恰恰。参数多态一般是指泛型/模板。

来自维基百科：

> 使用参数多态性，可以通用地编写函数或数据类型，以便它可以相同地处理值而不依赖于它们的类型。

# c# - openXLive 菜单处理程序

> ID：10179453
> 
> 赞同：0
> 
> 时间：2012-04-16T18:20:15.190
> 
> 标签：c#, windows-phone-7, menu

我在 wp7 上为我的应用程序使用 OpenXLive。排行榜已完全实施并且可以正常工作，但是我在设置或查找有关默认菜单（例如新游戏按钮）的处理程序的文档时遇到了麻烦。c# 中有处理这些的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:35:02.263

如果您使用 Silverlight 版本，您可以在`OnNavigatedTo`方法中获取 'NEW GAME' 处理程序。如果您使用 XNA 版本，请使用`NewGameEvent`. `XLiveFormManager`像下面的代码：

```
GameSession session = XLiveGameManager.CreateSession("XXXXXXXXXXXXXXX");
manager = new XLiveFormManager(this, session);
session.CreateSessionCompleted += new AsyncEventHandler(session_CreateSessionCompleted);
session.Open();

manager.GameStateChanged += new XLiveFormManager.XLiveGameStateEventHandler(manager_GameStateChanged);
manager.NewGameEvent += new EventHandler(manager_NewGameEvent);
manager.ContinueGameEvent += new EventHandler(manager_ContinueGameEvent);
manager.LeaveGameEvent += new EventHandler(manager_LeaveGameEvent); 
```

但我们建议使用自己的启动菜单替换默认的启动 UI。

# c# - 如何在 Facebook 上将位图作为 C# 中的照片共享？

> ID：10179460
> 
> 赞同：-3
> 
> 时间：2012-04-16T18:20:42.730
> 
> 标签：c#, facebook, image, sharing, file-sharing

好的，所以我对在 facebook 上分享 C# 的东西是 100% 的新手。

我需要一个示例代码，说明如何在我的 facebook 上将图像作为照片分享？

请不要回答（谷歌它，我不知道，为什么？，不可能，Facebook SDK）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:05:58.653

你的问题有点含糊。当您说“在 C# 中”时，您的意思是在 Web、窗口或服务环境中？因为 Facebook 的做法是在此过程中必须进行一些身份验证，这是通过重定向到 Facebook 以供用户登录，然后发送照片进行共享来实现的。这是一个相当大的过程，而不仅仅是一个行之有效的代码。

无论如何，您必须执行以下操作，并且您必须弄清楚将其放置在环境中的位置：

1.  创建与您的应用对应的 Facebook 应用；然后 Facebook 会给你一个应用程序代码和一个应用程序密码。
2.  使用应用程序代码，重定向到 Facebook 以验证希望在其 Facebook 上共享照片的用户。
3.  从 Facebook 接收回一个代码。
4.  通过服务调用与 Facebook 通信来授权您的应用，以允许使用应用代码、应用密码和我们从第 2 步获得的代码共享照片。
5.  从 Facebook 接收一个令牌，从现在开始将用于上传照片。
6.  现在，您可以使用该令牌通过另一个服务调用将照片上传到 Facebook。

这是代码：

```
// Step 2: you have to research what TheScope will be from Facebook API that gives you access to photos
Response.Redirect(string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&scope={1}&redirect_uri={2}"), MyAppCode, TheScope, MyRedirectingURL);

// Step 3: this is on the `Page_Load` of MyRedirectingURL.
// AnotherRedirectingURL will be your final destination on your app
using (var wc = new WebClient())
{
    string token = wc.DownloadString(string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&client_secret={1}&code={2}&redirect_uri={3}", MyAppCode, MyAppSecretCode, TheCode, AnotherRedirectingURL));   
}

// Step 4:  Use the token to start stream up or down
using (var wc = new WebClient())
{    
    Uri uploadUri = new Uri(string.Format("https://graph.facebook.com/{0}?{1}", PhotoUploadCommand, token));     

    // Find out what the PhotoUploadCommand is supposed to be from the Facebook API
    // use wc and uploadUri to upload the photo
} 
```

最重要的是，您必须对此进行研究……这不是那么简单。这是一个可悲的事实，我必须经历才能做你正在做的事情。

# ruby-on-rails - 创建新记录时如何使用accepts_nested_attributes_for？

> ID：10179463
> 
> 赞同：0
> 
> 时间：2012-04-16T18:20:47.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我试图让我的一个模型接受嵌套属性。模型名称为 Tournament，Tournament 有很多 MapList。另外值得注意的是，锦标赛验证至少存在一个 MapList。同样，MapList 会验证锦标赛 ID 是否存在。作为参考，MapList 只有 3 个属性：tournament_id、map_order 和 map_id。代码，正如它在锦标赛中出现的那样，是：

```
accepts_nested_attributes_for :map_lists 
```

我的问题是关于新的锦标赛记录。例如，我想使用以下代码创建一个新的锦标赛：

```
t = Tournament.new({map_lists_attributes: [{map_id: 1, map_order: 1}]}, as: :admin) 
```

但是，此代码不起作用。如果我在实例化 t 后立即调用 t.map_lists，我会得到一个空关系。显然，我无法设置锦标赛 ID，因为我正在创建新记录。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:55:11.010

attr_assessible 也将防止嵌套属性......所以你需要像这样配置：

```
class Tournament
  accepts_nested_attributes_for :map_lists
  attr_assessible :map_lists_attributes #and all your others
end 
```

# hibernate - Hibernate：在集合交叉引用表中映射“其他”列

> ID：10179466
> 
> 赞同：0
> 
> 时间：2012-04-16T18:20:54.107
> 
> 标签：hibernate

我的对象模型包含 2 个感兴趣的对象，一个 RuleGroup 和一个 Rule

我的 RuleGroup 对象包含一组规则。

因此，我有一个名为 RULE_GRP_MEMBER 的交叉引用表，它在 RULE_GRP 表和 RULE 表之间进行映射，以指定哪些规则属于某个 RuleGroup。

我的 RuleGroup 映射文件如下，这很好用，没有问题。

```
<class name="a.b.c.d.RuleGroup" table="RULE_GRP">
    <id name="ruleGroupID" column="RULE_GRP_ID">
        <generator class="increment"/>
    </id>
    <set name="rules" lazy="true" cascade="save-update" table="RULE_GRP_MEMBER">
        <key column="RULE_GRP_ID" not-null="false"/>
        <!-- Unique set to true makes this a one to many relationship -->
        <many-to-many unique="true" column="RULE_ID" class="a.b.c.d.Rule"/>
    </set>
....
</class> 
```

我的规则映射文件不包含对 RuleGroup 对象的任何引用。

问题是我们现在在 RULE_GRP_MEMBER 表中引入了一个新的非空字段 RULE_SEQ。因此，当向 RuleGroup 添加新规则时，会将新行添加到 RULE_GRP_MEMBER 表中。

如何将此 RULE_SEQ 字段映射到我的对象？理想情况下，我想将它映射到我的 Rule 对象，但我不确定我什至应该使用什么 Hibernate 概念。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:37:33.757

在这种情况下，您可能需要为包含连接表的列的连接表创建 POJO。这将有一个复合键 RULE_GRP_ID、RULE_ID。新的列 seq 应该在这个新的 HBM 中理想地定义，因为它属于连接表。

然后，您可以从 RULE、RUL_GRP 表中为此添加集合映射。

# android - 如何从服务中获取位置

> ID：10179470
> 
> 赞同：2
> 
> 时间：2012-04-16T18:21:04.657
> 
> 标签：android, service, location

对android有些陌生，需要一些服务帮助。我有一个服务，它以间隔 X 轮询当前位置。我想绑定到该服务并将 getLastKnownLocation 从服务传递到我的活动 A。我不确定信息是如何从绑定服务传递到活动的，如果它通过活页夹什么的。无论如何，这是我到目前为止的代码。

服务：

```
public class LocationService extends Service implements LocationListener {

    LocationManager myLocationManager;
    public Location myLocation;
    LocationListener myLocationListener;
    public static final String TAG = LocationService.class.getSimpleName();
    MyDB db;
    double latitude,longitude;
    Cursor c;

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        Log.d(TAG, "service started (onCreate)");
        db = new MyDB(getApplicationContext());
        myLocationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        Criteria criteria = new Criteria();
        criteria.setPowerRequirement(Criteria.POWER_LOW);
        criteria.setAccuracy(Criteria.ACCURACY_LOW);
        String locationProvider = myLocationManager.getBestProvider(criteria, true);
        myLocationManager.requestLocationUpdates(locationProvider, 1000*60*2, 100, this);
        myLocation = myLocationManager.getLastKnownLocation(locationProvider);

    }
 public class MyBinder extends Binder {
            LocationService getService() {
                return LocationService.this;
            }
        } 
```

活动一：

```
public class myActivity extends Activity {
    LocationManager myLocationManager;
    Location myLocation;

    boolean isBound = false;

    private LocationService mBoundService;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        bindLocationService();

}
private void bindLocationService() {
        try {
            isBound = getApplicationContext().bindService( new Intent(getApplicationContext(), LocationService.class), mConnection, BIND_AUTO_CREATE );
            bindService(new Intent(this, LocationService.class), mConnection, BIND_AUTO_CREATE);
        } catch (SecurityException e) {
            // TODO: handle exception
        }
    }
private ServiceConnection mConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className, IBinder service) {
            mBoundService = ((LocationService.MyBinder)service).getService();
            Log.d(LocationService.TAG, "activity bound to service");

        }

        public void onServiceDisconnected(ComponentName className) {

            mBoundService = null;
            Log.d(LocationService.TAG, "activity unbound to service");
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:39:59.110

从您的服务发送广播，如下所示：

```
Intent i = new Intent(NEW_MESSAGE);  
Bundle bundle = new Bundle();
bundle.putString("yourvalue", value);
i.putExtras(bundle);
sendBroadcast(i); 
```

并像这样在您的活动中注册接收者：

```
newMessage messageReceiver = new newMessage();
registerReceiver(messageReceiver, new IntentFilter(NEW_MESSAGE)); 
```

这是您在活动课程中的接收者：

```
public class newMessage extends BroadcastReceiver 
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {    
        String action = intent.getAction();
        if(action.equalsIgnoreCase(IMService.NEW_MESSAGE)){    
        Bundle extra = intent.getExtras();
        String username = extra.getString("yourvalue");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:32:57.123

对于 Service 和您的 Activity 之间的通信创建自定义`BroadcastReceiver`并在每次您想使用 Intent 更新您的 Activity 时从 Service 广播它，其中包含新的位置信息。

```
 Intent i = new Intent();
    i.setAction(CUSTOM_INTENT);
    context.sendBroadcast(i); 
```

请参阅此[示例](http://thinkandroid.wordpress.com/2010/02/02/custom-intents-and-broadcasting-with-receivers/)以了解自定义广播

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:36:14.817

你必须“订阅”你`Activity`的`Service`它绑定。`Service`可以`Messenger`通过`Intent`从`Activity`. _ `Handler`所以你可以在你的内部定义一个简单的`Activity`和一个`Messenger`使用它的。通过这种方式，`Service`可以将类型`Message`的对象发送到`Activity`，将您需要的所有信息发送到其内部`Message`。

# c# - LINQ 风格的 IS IN 查询

> ID：10179473
> 
> 赞同：8
> 
> 时间：2012-04-16T18:21:13.663
> 
> 标签：c#, linq, lambda

还有很多与此类似的其他问题，但似乎没有一个能做我想做的事情。我想传入一个字符串列表和查询

```
SELECT ownerid where sysid in ('', '', '') -- i.e. List<string> 
```

或喜欢

```
var chiLst = new List<string>();
var parRec = Lnq.attlnks.Where(a => a.sysid IN chiList).Select(a => a.ownerid); 
```

我一直在玩 a.sysid.Contains() 但无法到达任何地方。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T18:22:27.723

`Contains`是前进的方向：

```
var chiLst = new List<string>();
var parRec = Lnq.attlnks.Where(a => chiList.Contains(a.sysid))
                        .Select(a => a.ownerid); 
```

`HashSet<string>`尽管考虑到所有包含检查，就性能而言，您最好使用 a而不是列表。（这是假设会有相当多的条目......对于少量的值，它不会有太大的区别，而且 a`List<string>`甚至可能更快。）

请注意，性能方面是假设您为此使用 LINQ to Objects - 如果您使用的是 LINQ to SQL 之类的东西，则无关紧要，因为`Contains`无论如何检查都不会在进程中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:23:31.763

你不会打电话的`a.sysid.Contains`；(SQL) 的语法与(LINQ)`IN`的语法相反`Contains`

```
var parRec = Lnq.attlnks.Where(a => chiList.Contains(a.sysid))
                        .Select(a => a.ownerid); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:28:33.757

除了该`Contains`方法，您还可以`join`：

```
var parRec = from a in Lnq.attlnks
             join sysid in chiLst
                 on a.sysid equals sysid
             select a.ownerid 
```

我不确定这是否会比`Contains`使用 HashSet 做得更好，但它至少会有类似的性能。它肯定会比使用`Contains`列表做得更好。

# android - 在 TableLayout 中调整按钮和图像的大小

> ID：10179474
> 
> 赞同：0
> 
> 时间：2012-04-16T18:21:13.597
> 
> 标签：android, android-layout

我一直在尝试使 ImageView 和 3 个按钮都具有相同的大小（适合父 TableLayout），但对我来说这是不可能的，我希望有人可以帮助我在 .xml 文件中解决这个问题。

[http://i.imgur.com/xgsIC.png](http://i.imgur.com/xgsIC.png)

这是我试图放在一起的 TableLayout，这是其中的代码：

```
 <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:stretchColumns="*" >
            <TableRow
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >
                <ImageView
                    android:id="@+id/iFoto"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:adjustViewBounds="true"
                    android:scaleType="centerCrop"
                    android:background="#000000"
                    android:padding="1dp"
                    android:src="@drawable/i_background" />
                <TableLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:stretchColumns="*" >
                    <TableRow
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >
                        <ImageButton
                            android:id="@+id/button1"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:background="@anim/btblue"
                            style="@style/ButtonText"
                            android:src="@drawable/ic_launcher" />
                    </TableRow>
                    <TableRow
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >
                        <ImageButton
                            android:id="@+id/button2"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:background="@anim/btblue"
                            style="@style/ButtonText"
                            android:src="@drawable/ic_launcher" />
                    </TableRow>
                    <TableRow
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >
                        <ImageButton
                            android:id="@+id/button3"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:background="@anim/btblue"
                            style="@style/ButtonText"
                            android:src="@drawable/ic_launcher" />
                    </TableRow>
                </TableLayout>
            </TableRow>
        </TableLayout> 
```

这是我希望得到的：

[http://i.imgur.com/vSm8q.png](http://i.imgur.com/vSm8q.png)

有人可以帮我弄这个吗 ？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:17:45.343

尝试这样做..

将您的 Imageview 宽度和高度属性更改为这样..

```
<ImageView
            android:id="@+id/iFoto"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:adjustViewBounds="true"
            android:background="#000000"
            android:padding="1dp"
            android:scaleType="centerCrop"
            android:src="@drawable/bgd7" /> 
```

# c++builder - 如何动态复制选项卡？

> ID：10179475
> 
> 赞同：1
> 
> 时间：2012-04-16T18:21:18.580
> 
> 标签：c++builder, tpagecontrol, ttabsheet

我有`TPageControl`一个`TTabSheet`。并且`TTabSheet`我有一堆功能和组件。我想在运行时通过一个按钮复制该选项卡表，其中所有功能和组件仍在其中并正常工作。

现在我设法复制了标签页。但是，新的标签页是完全空的。

这是我的那个按钮的代码。

```
TTabSheet * NewTabSheet= new TTabSheet(pageControlMain);
NewTabSheet->PageControl = pageControlMain;
NewTabSheet->Caption = "TabSheet";
pageControlMain->ActivePage = NewTabSheet; 
```

我错过了什么？

至于 TTabSheets 内部的组件和功能，它们只是滚动框、编辑、按钮和面板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:16:07.303

该类`TTabSheet`本身没有任何子控件，这就是您看不到任何东西的原因。您必须实例化每个单独的控件并复制它们的数据。

一种方法是使用`TStream.WriteComponent()`and`TStream.ReadComponent()`方法将源保存`TTabSheet`到临时 DFM 中，然后将其加载到新的`TTabSheet`中，例如：

```
TMemoryStream *Strm = new TMemoryStream;
Strm->WriteComponent(SourceTabSheet);
Strm->Position = 0;
TTabSheet *NewTabSheet = new TTabSheet(pageControlMain);
NewTabSheet->PageControl = pageControlMain;
Strm->ReadComponent(NewTabSheet);
pageControlMain->ActivePage = NewTabSheet;
delete Strm; 
```

另一种选择是在设计时将组件放置到`TFrame`-derived 类中，然后在运行时创建该类的实例并将其放置到 each 上`TTabSheet`，让它为您处理控件，例如：

```
TTabSheet *NewTabSheet = new TTabSheet(pageControlMain);
NewTabSheet->PageControl = pageControlMain;
TMyFrame *NewFrame = new TMyFrame(NewTabSheet);
NewFrame->Parent = NewTabSheet;
pageControlMain->ActivePage = NewTabSheet; 
```

# android - 在 runOnUiThread 中使用非最终变量

> ID：10179477
> 
> 赞同：1
> 
> 时间：2012-04-16T18:21:29.530
> 
> 标签：android, xml, multithreading, parsing, variables

我正在为 Android 制作一个天气应用程序，我正在尝试在 runOnUiThread 中使用我的线程中的非最终变量。但是，我不允许这样做。

我究竟做错了什么？

下面是整个活动的代码。该线程正在从 yr.no 解析 xml。

```
public class WeatherActivity extends Activity implements OnClickListener {

ImageView forecastImage;
TextView updateWeatherText;
TextView temperatureText;
TextView cloudinessText;
TextView windspeedText;
TextView precipitationText;

Thread updateWeather = new Thread(new GetWeather());
Thread updateWeatherFromButton = new Thread(new GetWeather());

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    forecastImage = (ImageView) findViewById(R.id.forecastIcon);

    updateWeatherText = (TextView) findViewById(R.id.updatingWeatherText);

    temperatureText = (TextView) findViewById(R.id.temperatureText);
    cloudinessText = (TextView) findViewById(R.id.cloudinessText);
    windspeedText = (TextView) findViewById(R.id.windspeedText);
    precipitationText = (TextView) findViewById(R.id.precipitationText);

    updateWeather.start();

    Button refreshButton = (Button) findViewById(R.id.refreshButton);
    refreshButton.setOnClickListener(this);
}

class GetWeather implements Runnable {

    public void run() {

        try {

            String temp;
            String windspeed;
            String cloudiness;
            String precipitation;

            URL weatherURL = new URL(
                    "http://api.yr.no/weatherapi/locationforecast/1.8/?lat=62.39;lon=17.30");

            XmlPullParserFactory parserFactory = XmlPullParserFactory
                    .newInstance();
            XmlPullParser parser = parserFactory.newPullParser();

            parser.setInput(weatherURL.openStream(), null);

            updateWeatherText.setText("Updating...");
            int parserEvent = parser.getEventType();
            while (parserEvent != XmlPullParser.END_DOCUMENT) {

                switch (parserEvent) {

                case XmlPullParser.TEXT:
                    String tag = parser.getName();

                    if (tag.compareTo("temperature") == 0) {
                        temp = parser.getAttributeValue(
                                null, "value") + " 'C";
                    } else if (tag.compareTo("windSpeed") == 0) {
                        windspeed = parser.getAttributeValue(
                                null, "mps") + " m/s";

                    } else if (tag.compareTo("cloudiness") == 0) {
                        if (Integer.parseInt(parser.getAttributeValue(null,
                                "percent")) >= 0
                                && Integer
                                        .parseInt(parser.getAttributeValue(
                                                null, "percent")) <= 12.5) {
                            cloudiness = "Klart";
                        } else if (Integer.parseInt(parser
                                .getAttributeValue(null, "percent")) > 12.5
                                && Integer
                                        .parseInt(parser.getAttributeValue(
                                                null, "percent")) < 25) {
                            cloudiness = "Mestadels klart";
                        } else if (Integer.parseInt(parser
                                .getAttributeValue(null, "percent")) >= 25
                                && Integer
                                        .parseInt(parser.getAttributeValue(
                                                null, "percent")) < 75) {
                            cloudiness = "Växlande molnighet";
                        } else if (Integer.parseInt(parser
                                .getAttributeValue(null, "percent")) >= 75
                                && Integer
                                        .parseInt(parser.getAttributeValue(
                                                null, "percent")) < 87.5) {
                            cloudiness = "Mestadels mulet";
                        } else if (Integer.parseInt(parser
                                .getAttributeValue(null, "percent")) >= 87.5
                                && Integer
                                        .parseInt(parser.getAttributeValue(
                                                null, "percent")) <= 100) {
                            cloudiness = "Mulet";
                        }

                    } else if (tag.compareTo("precipitation") == 0) {
                        if (Integer.parseInt(parser.getAttributeValue(null, "minvalue")) > 0) forecastImage.setBackgroundResource(R.drawable.rain);
                        precipitation = "Mellan "
                                        + parser.getAttributeValue(null,
                                                "minvalue")
                                        + " mm och "
                                        + parser.getAttributeValue(null,
                                                "maxvalue") + " mm";
                    }
                    break;
                }
                parserEvent = parser.next();

                runOnUiThread(new Runnable() {

                    public void run() {
                        temperatureText.setText(temp);
                        windspeedText.setText(windspeed);
                        cloudinessText.setText(cloudiness);
                        precipitationText.setText(precipitation);

                        if (cloudiness.compareTo("Klart") == 0){
                            forecastImage.setBackgroundResource(R.drawable.sunny);
                        } else if ( cloudiness.compareTo("Mestadels klart" ) == 0) {
                            forecastImage.setBackgroundResource(R.drawable.sunny);
                        }
                          else if ( cloudiness.compareTo("Växlande molnighet") == 0) {
                              forecastImage.setBackgroundResource(R.drawable.cloudy);
                        } else if ( cloudiness.compareTo("Mestadels mulet") == 0) {
                            forecastImage.setBackgroundResource(R.drawable.overcast);
                        } else if ( cloudiness.compareTo("Mulet") == 0) {
                            forecastImage.setBackgroundResource(R.drawable.overcast);
                        }                           
                    }
                });
            }
            updateWeatherText.setText("Last updated: "
                    + System.currentTimeMillis());

        } catch (Exception e) {
        }
    }
}

public void onClick(View v) {

    switch (v.getId()) {

    case R.id.refreshButton:
        updateWeatherFromButton.start();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:30:11.380

正如一些人已经指出的那样，你不能。一种解决方法是在定义 Runnable 之前将非最终变量重新分配给最终变量：

```
String aNonFinalString = "a";
aNonFinalString = "b";

final String aFinalString = aNonFinalString;

runOnUiThread(new Runnable() {
    public void run() {
        useYourString(aFinalString);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:26:51.013

你不能......它是Java你不能在匿名内部类中使用外部变量，除非它被声明为final。 [请参阅此问题以获取更多详细信息](https://stackoverflow.com/questions/1299837/cannot-refer-to-a-non-final-variable-inside-an-inner-class-defined-in-a-differen)

# objective-c - 调用 MainMenu 的 windowDidLoad 函数

> ID：10179479
> 
> 赞同：0
> 
> 时间：2012-04-16T18:21:43.863
> 
> 标签：objective-c, macos, cocoa

我有一个单窗口 MacOS X 应用程序。

我在理解如何连接 MainMenu.xib NIB 文件的某些部分时遇到了一些问题。

我需要做的是能够在 MainMenu 的`(void)windowDidLoad`功能中做一些事情。我只是不知道如何将 MainMenu.xib 文件连接到 .m 文件。

我在 NIB 文件中创建了一个 NSObject 文件，然后我将其连接到一个名为 MainController 的文件，并在那里做了很多有效的事情。

**编辑**

好的，澄清我的问题：
假设我创建了一个新项目（我使用的是 Xcode 4.3.2）。
我选择 File > New > Project，然后选择 Mac OS X > Application > Cocoa Application
我按下一步，将 Product Name 设置为*Awesomesauce*，取消选中所有复选框，按 Next 最后选择一个文件夹来存储我的项目。

我现在有 3 个文件`AppDelegate.h`，`AppDelegate.m`并且`MainMenu.xib`（我认为我不需要考虑的 Supporting Files 文件夹中还有一些东西）。

我想要一个`NSWindowController`可以连接到的文件`MainMenu.xib`。我创建了一个新文件（Objective-c Class > NSWindowController）并将其命名为`MainMenuController`。

现在我打开 MainMenu.xib，在 Placeholders 下选择 File's Owner，在 Identity Inspector 下，我将 Custom Class > Class 设置为`MainMenuController`.

右击 File's Owner 我在`window`和之间创建了一个连接`Window - Awesomesauce`。
我还添加到 MainMenuController.h 并在和`<NSApplicationDelegate>`之间创建连接`Window - Awesomesauce delegate``File's Owner`

此时我的 MainMenuController 看起来像这样：

```
@implementation MainMenuController

- (id)initWithWindow:(NSWindow *)window
{
    self = [super initWithWindow:window];
    if (self) {
        NSLog(@"Initializing MainMenuController");
    }

    return self;
}

- (void)windowDidLoad
{
    [super windowDidLoad];
    NSLog(@"Window did load");
}

- (void)windowWillLoad{

    NSLog(@"Window will load");

}
@end 
```

当我运行我的应用程序时，我得到了 Awesomesauce 窗口，但没有任何 NSLog 记录任何内容。这包括 init 方法中的 NSLog 。

我究竟做错了什么？

# class - 在类构造函数中将 mutable.HashMap[ArrayBuffer[Int]] 转换为 immutable.HashMap[Vector]

> ID：10179481
> 
> 赞同：0
> 
> 时间：2012-04-16T18:21:55.350
> 
> 标签：class, scala, graph, constructor

我试图`mutable.HashMap[Int, ArrayBuffer[Int]]`进入`immutable.HashMap[Int, Vector]`我的类构造函数的一部分。结果`immutable.HashMap`也应该分配给 a `val`。我正在做的是将边缘列表文件读入图形格式，一旦完成，我想保证图形是不可变的，因此`immutable.HashMap`.

构造函数应该采用`filename: String`, 将 edgelist 读取为某种可变形式，然后最后让类的成员`val adjList`成为生成的不可变邻接列表形式。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:23:54.627

```
xs.mapValues(v => Vector() ++ v).toMap 
```

可以解决问题（当然，其中 xs 是您的可变 HashMap）。

# java - 使用 javamail 将消息附加到 Yahoo“已发送”文件夹？

> ID：10179482
> 
> 赞同：1
> 
> 时间：2012-04-16T18:21:58.667
> 
> 标签：java, android, smtp, jakarta-mail

目前我正在这样做：

```
Store store = sendsession.getStore(mailhost);
   store.connect(mailhost, user, password);
   String box = "SENT";
   Folder folder = store.getFolder(box);
   folder.open(Folder.READ_WRITE);
   message.setFlag(Flag.SEEN, true);
   folder.appendMessages(new Message[] {message});
   store.close(); 
```

它适用于 Gmail 和 Hotmail，但从 Yahoo 发送时不会发送到已发送文件夹。雅虎中的已发送文件夹是否以不同的名称访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:50:07.453

“已发送”文件夹没有标准或通用名称。这是您使用的邮件客户端的约定；不同的客户端可能遵循不同的约定。

此外，请参阅[Yahoo Mail 上的这个 JavaMail wiki 条目](http://kenai.com/projects/javamail/pages/Yahoo)。

如果这没有帮助，[这个 JavaMail FAQ 条目解释了我们需要帮助您调试问题的附加信息](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)。

# javascript - AngularJS 中的视图未更新

> ID：10179488
> 
> 赞同：58
> 
> 时间：2012-04-16T18:22:18.753
> 
> 标签：javascript, angularjs, data-binding, angular-services

在事件回调中更新模型时，更新模型属性对视图没有影响，有什么想法可以解决这个问题吗？

这是我的服务：

```
angular.service('Channel', function() {        
    var channel = null; 

    return {        
        init: function(channelId, clientId) {
            var that = this;        

            channel = new goog.appengine.Channel(channelId);
            var socket = channel.open();

            socket.onmessage = function(msg) {
                var args = eval(msg.data);              
                that.publish(args[0], args[1]);
            };
        }       
    };
}); 
```

`publish()`功能是在控制器中动态添加的。

控制器：

```
App.Controllers.ParticipantsController = function($xhr, $channel) {
    var self = this;

    self.participants = [];     

    // here publish function is added to service
    mediator.installTo($channel); 

    // subscribe was also added with publish        
    $channel.subscribe('+p', function(name) { 
        self.add(name);     
    });                 

    self.add = function(name) {     
        self.participants.push({ name: name });     
    }
};

App.Controllers.ParticipantsController.$inject = ['$xhr', 'Channel']; 
```

看法：

```
<div ng:controller="App.Controllers.ParticipantsController">      
    <ul>
        <li ng:repeat="participant in participants"><label ng:bind="participant.name"></label></li>
    </ul>

    <button ng:click="add('test')">add</button>
</div> 
```

所以问题是单击按钮会正确更新视图，但是当我从 Channel 收到消息时，什么都没有发生，甚至`add()`调用了该函数

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-04-16T20:00:57.203

你失踪了`$scope.$apply()`。

每当你接触到 Angular 世界之外的任何东西时，你都需要调用`$apply`, 来通知 Angular。这可能来自：

*   xhr 回调（由 $http 服务处理）
*   `setTimeout`回调（由`$defer`服务处理）
*   DOM 事件回调（由指令处理）

在您的情况下，请执行以下操作：

```
// inject $rootScope and do $apply on it
angular.service('Channel', function($rootScope) {
  // ...
  return {
    init: function(channelId, clientId) {
      // ...
      socket.onmessage = function(msg) {
        $rootScope.$apply(function() {
          that.publish(args[0], args[1]);
        });
      };
    }
  };
}); 
```

# javascript - Bootbox 模式中的链接不可点击

> ID：10179495
> 
> 赞同：1
> 
> 时间：2012-04-16T18:22:46.720
> 
> 标签：javascript, facebook, modal-dialog, twitter-bootstrap

我正在尝试在 Twitter 引导模式对话框中加载 Facebook 登录按钮：

```
$("a.fb-login, .modal a.fb-login").on("click", function(e) {
    e.preventDefault()
    FB.login(function(response) {
    // ... 
```

这对于放置在模式对话框之外的按钮效果很好，但是当元素在对话框中呈现时（从引导框触发），单击链接只会使对话框消失，而不是在新窗口中启动 Facebook 弹出窗口：

```
// when 401 unauthorized
message = $("#login-form").clone();
bootbox.modal(message) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:29:40.907

`on()`我怀疑侦听器仅在您调用该方法时才附加到页面上当前的元素。

如果您希望能够处理新创建的元素上的事件而不必重新附加侦听器，请尝试将侦听器附加到整个页面，但使用选择器过滤掉事件，如下所示：

```
$('body').on('click', 'a.fb-login, .modal a.fb-login', function(e) {
  e.preventDefault()
  FB.login(function(response) {
  // ... 
```

显然，缩小听者所在的范围是一种很好的做法。

# c# - wcf 从没有双工的不同线程向客户端返回响应

> ID：10179496
> 
> 赞同：0
> 
> 时间：2012-04-16T18:22:50.923
> 
> 标签：c#, wcf

异步调用服务操作时：

```
proxy.OperationCompleted += new EventHandler<OperationEventArgs>(OperationCallback);
proxy.OperationAsync(OperationRequest request); 
```

在服务器端：

```
 new Thread(new ThreadStart(RunOperations)).Start();

 public OperationResponse Operation(OperationRequest request)
 {
      Queue.Enqueue(request); 
 }

 // in some other thread  
 public OperationResponse RunOperations()
 {
     OperationRequest request = Queue.Dequeue();
     OperationResponse response = Execute(request);
     // here i need to some how return to response to the threw the channel 
     // which sent the request 
 } 
```

我的问题 ：

有没有办法不构造双工通道并通过回调返回响应，引用提交通道并返回响应抛出它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:52:50.670

WCF 有自己的线程模型。默认情况下，通过调用您的操作合约来同步处理操作 - 当对操作合约的调用结束时，调用本身也会结束，并将响应返回给客户端。如果在操作调用中生成线程，则必须等待线程完成（阻塞操作线程）才能返回响应。这可能会导致吞吐量问题，因为您可以让线程池中的所有线程被等待调用阻塞，并且将没有线程来服务新请求。

作为替代，WCF 提供了两种附加机制：[异步服务](http://msdn.microsoft.com/en-us/library/ms731177%28v=vs.100%29.aspx)和双工服务。在异步服务中，您从线程池中获取一个线程来处理执行某些异步 I/O 操作的初始请求。当 I/O 执行开始时，操作的线程将返回到线程池以服务其他请求。一旦 I/O 完成，操作就会从线程池中分配给一个新线程，并调用 end 方法。操作本身和 WCF 处理模型仍然处理响应 - 您不能手动分叉线程并返回来自不同线程的响应。这可以大大提高某种操作的吞吐量。

当这些模型都不适合您的需求时，您需要双工服务，您可以在需要时回叫客户端。

在所有情况下，您都必须处理与通道超时相关的一些问题。

# javascript - Facebook 喜欢按钮未显示

> ID：10179497
> 
> 赞同：3
> 
> 时间：2012-04-16T18:22:53.310
> 
> 标签：javascript, facebook, facebook-like

我正在尝试在网页上添加类似 facebook 的按钮。我从[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)获取了确切的代码，但仍然根本没有显示类似按钮。我尝试了所有三个版本的 HTML5、XFBML 和 IFRAME，但都没有工作。我试图在 chrome firefox 甚至 Internet Explorer 中运行代码，但它在任何情况下都可以工作。我的浏览器中没有安装任何 facebook 断开连接扩展等。请告诉我我做错了什么...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:fb="http://ogp.me/ns/fb#">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 </head>
 <body>
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=***appId***";
  fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>
  <div class="fb-like" data-href="http://live2.cricbuzz.com/live/scorecard/11200/Mumbai-v-Delhi" data-send="false" data-layout="button_count" data-width="50" data-show-faces="false" data-colorscheme="dark" data-font="verdana"></div>
 </body>
 </html> 
```

Iv 将我的 appId 放在适当的位置...

这个确切的代码在这里完美运行...... [http://jsfiddle.net/dmcs/HS5Lp/1/](http://jsfiddle.net/dmcs/HS5Lp/1/) ...但当我在浏览器上运行它时却没有......它给出了一个错误...... - >加载资源失败:file://connect.facebook.net/en_US/all.js#xfbml=1&appId=113830492072210

我不知道为什么会发生这种情况...如果您知道，请提供帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:46:55.433

维克拉姆，

我明白你的问题是什么。虽然你不会发现你的脚本调用和下面写的有很大区别。但这有望为您带来改变并解决您的错误。

```
<script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1&appId=***appId***";
  fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script> 
```

只需在上面的脚本中输入您的 App_Id 即可。

干杯，拉胡尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:44:10.953

你可以在这里看到它完美地工作。

[http://jsfiddle.net/dmcs/HS5Lp/1/](http://jsfiddle.net/dmcs/HS5Lp/1/)

也许您的“赞”按钮所在的页面没有您想象的那么干净。检查浏览器的 javascript 控制台，看看是否有任何错误消息 添加一些登录到您的 javascript 以确保它正在运行。

我还检查了这个网站： http: [//live2.cricbuzz.com/live/scorecard/11200/Mumbai-v-Delhi](http://live2.cricbuzz.com/live/scorecard/11200/Mumbai-v-Delhi)和类似的按钮在那里工作正常。

您是否有指向无效代码的链接？

您可以在页面上修复一些问题。在此处查看 linter 工具的结果：http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Flive2.cricbuzz.com%2Flive%2Fscorecard%2F11200%2FMumbai-v-德里](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Flive2.cricbuzz.com%2Flive%2Fscorecard%2F11200%2FMumbai-v-Delhi)

# python - 从矩阵生成马尔可夫模型

> ID：10179500
> 
> 赞同：0
> 
> 时间：2012-04-16T18:23:00.793
> 
> 标签：python, matrix, markov-chains, hidden-markov-models

定义可能是错误的，如果是这样，请纠正我。我需要从以下类型的矩阵生成马尔可夫模型：

```
four    two "e"         
four    two "e"         
three   three   "e"         
one three   "e"         
zero    six one zero    "e" 
two two "e"         
two two "e"         
two two "e"         
two two "e"         
two two "e"         
four    zero    "e"         
two two "e"         
three   one three   "e"     
three   "e"             
four    one "e"         
three   one "e"         
two one one zero    two "e"
two five    "e"         
three   four    two "e"     
zero    five    "e"         
three   "e"             
three   three   "e"         
three   "e"             
one one "e"         
three   two "e"         
one one "e"         
three   two zero    zero    zero    "e"
three   three   "e"         
three   one "e"         
three   two "e" 
```

我需要输出类似于： {"four":[{2:"two", 3:"one",2:"exit"},{...}],"three":[{.. .}]}

上面的数字基本上是转换到特定状态的次数。

我为此使用python。

回答常见的问题“您尝试过什么？”：“我尝试了几种方法，但它们并没有完全交付，所以我希望其中一个答案有助于澄清一些事情”。

非常感谢。

编辑，更新以显示完整的矩阵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:13:40.893

您没有给出转换矩阵（这些将是概率），而是给出了由基础马尔可夫模型产生的一系列观察到的转换。

除非您有无限数量的这些观察结果，否则您无法准确地重建基础转换参数。但是，您可以选择转换，以使您的可观察序列*最有可能*。如果我理解您的问题，您应该研究[Hidden Markov Models](http://en.wikipedia.org/wiki/Hidden_Markov_model)的解决方案。可以在[这里](http://ghmm.org/)找到一个免费提供的 python 模块 GHMM 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:05:13.210

这是一个想法：与其尝试创建`{"four":[{2:"two", 3:"one",2:"exit"},{...}],"three":[{...}]}`（这在 python 中不太合法），不如尝试创建`{"four":[{"two":2, "one":3, "exit":2},{...}],"three":[{...}]}`（注意内部字典中顺序的变化）。

```
Iterate over the matrix, for each line:
  if the first word isn't in the big dictionary, add it.
  if the second word isn't in its sub-dictionary, add it, otherwise add 1 to its value. 
```

# asp.net-mvc-3 - MVC3 db.SaveChanges() 内部异常

> ID：10179502
> 
> 赞同：0
> 
> 时间：2012-04-16T18:23:07.497
> 
> 标签：asp.net-mvc-3, savechanges

我正在尝试从购物车中添加订单列表。

我这样做类似于[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-9](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-9)

db.saveChanges() 有错误，'更新条目时发生错误。有关详细信息，请参阅内部异常。

当我看到订单时，orderId 为“0”。这有问题吗？

我给你一些代码。

你能给我一些想法吗？

谢谢。

```
//Order.cs
public class Order
{
    rentalDB db = new rentalDB();

    [Key] public int orderId { get; set; }
    public int customerId { get; set; }
    public DateTime orderDate { get; set; }
    public int rentalPeriod { get; set; }
    public DateTime startDate { get; set; }
    public decimal total { get; set; }
    public virtual Customer Customer { get; set; }
    public List<OrderDetails> OrderDetails { get; set; }
} 
```

这是控制器。

```
//AccountController.cs

[Authorize]
    public ActionResult Order()
    {
        var order = new Order();
        TryUpdateModel(order);

        string customerName = User.Identity.Name;
        if (customerName == "")
        {
            return RedirectToAction("LogOn", "Account");
        }
        int customerId = (from a in db.Customer
                          where a.userName == customerName
                          select a.customerId).Single();
        order.customerId = customerId;

        db.Order.Add(order);
        //I added orderDate and startDate, then it is saving now.
        order.orderDate = System.DateTime.Now;
        order.startDate = System.DateTime.Now.AddDays(2);
        db.SaveChanges();

        var cart = ShoppingCart.GetCart(this.HttpContext);
        cart.CreateOrder(order);

        return View(order);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:36:25.273

我的问题是我没有提到 orderDate 和 startDate。

然后我有错误。

当我宣布日期时，它现在正在工作。

# android - android:screenOrientation="sensorLandscape" 显示最小 SDK 为 2.2 的项目的错误

> ID：10179508
> 
> 赞同：1
> 
> 时间：2012-04-16T18:23:43.943
> 
> 标签：android, sdk, landscape, screen-orientation

我正在尝试设置`android:screenOrientation="sensorLandscape"`我的一项活动，以启用横向左侧和右侧横向。

在我的项目属性中，我已将项目构建目标设置为 Android 2.2。在我的清单中，最低 SDK 版本也设置为 Android 2.2（API 级别 8）：我的清单中的行是：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10"/> 
```

根据文档，我应该可以使用“sensorLandscape”属性，但是当我尝试设置它时，我得到的错误是“ `error: Error: String type not allowed (at "screenOrientation" with value "sensorLandscape")`”。

我在某处错过了一些额外的设置吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T18:49:17.563

["sensorLandscape"](http://developer.android.com/guide/topics/manifest/activity-element.html#screen)：横向，但可以是基于设备传感器的正常或反向横向。**在 API 级别 9 中添加。**所以我认为您的 minsdkVersion 应该是**9 而不是 8** ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T20:48:48.863

啊哈！这个环境只是/制造/让你发疯，不是吗？

对于我的项目，我将 minSDK 设置为 9 甚至 12，没有任何区别。

当然，当我创建项目时，我已经为 minSDK 8 构建了它......这意味着我列出了 android-8 (2.2) 库供我的项目链接。

对于遇到此问题的任何其他沮丧的新手（如我），我采取的解决方法是：在左侧的包资源管理器中，右键单击“Android 2.2”。
选择“构建路径->从构建路径中删除”。右键单击项目名称，选择“构建路径->配置构建路径”单击左侧菜单中的“Android”。取消勾选“Android 2.2”框，并勾选“Android 2.3.1”框（或视情况而定）。单击“应用”，然后单击“确定”。再次右键单击项目并选择“Build Path->Add Libraries”选择“Android Classpath Container”，单击“Next”。单击“完成”。

现在，清除您的日志，清理项目，然后再次尝试构建。希望这对你来说会更好，就像对我一样。

# php - WordPress：为 wp_get_attachment_link 添加目标参数的 add_filter

> ID：10179510
> 
> 赞同：1
> 
> 时间：2012-04-16T18:23:54.833
> 
> 标签：php, html, wordpress, add-filter

所以我想弄清楚如何`wp_get_attachment_link`用过滤器修改函数。我希望能够将`target='_blank'`属性添加到锚点。

这是我尝试过的，但它不起作用：

```
function modify_attachment_link( $markup, $id, $size, $permalink, $icon, $text )
{
    // We need just thumbnails.
    if ( 'thumbnail' !== $size )
    {   // Return the original string untouched.
        return $markup;
    }

    // We have stored the new URL in a post meta field.
    // See http://wordpress.stackexchange.com/q/3097 for an example.
    $new_url = get_post_meta( $id, 'extra_url', TRUE );

    if ( empty ( $new_url ) )
    {   // There is no URL.
        return $markup;
    }

    // Recreate the missing information.
    $_post      = & get_post( $id );
    $post_title = esc_attr( $_post->post_title );

    if ( $text ) 
    {
        $link_text = esc_attr( $text );
    } 
    elseif ( 
           ( is_int( $size )    && $size != 0 ) 
        or ( is_string( $size ) && $size != 'none' ) 
        or $size != FALSE 
    ) 
    {
        $link_text = wp_get_attachment_image( $id, $size, $icon );
    } 
    else 
    {
        $link_text = '';
    }

    if ( trim( $link_text ) == '' )
    {
        $link_text = $_post->post_title;
    }

    return "<a href='$new_url' title='$post_title' target='_blank'>$link_text</a>";
}

add_filter( 'wp_get_attachment_link', 'modify_attachment_link', 10, 6 ); 
```

也许这里发生的一些事情甚至没有用，但我真的需要这个`target`属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T22:46:13.757

假设链接中还没有“目标”属性，这样的事情应该可以工作。如果有，那么这将插入第二个。

```
<?php
function modify_attachment_link($markup) {
    return preg_replace('/^<a([^>]+)>(.*)$/', '<a\\1 target="_blank">\\2', $markup);
}
add_filter( 'wp_get_attachment_link', 'modify_attachment_link', 10, 6 );
?> 
```

# java - 在 JSTL 中省略最后的逗号

> ID：10179511
> 
> 赞同：0
> 
> 时间：2012-04-16T18:23:55.373
> 
> 标签：java, jsp, jstl

我查看了此站点上以前的示例，但无法正常工作。我也用谷歌搜索了我的困境，但没有成功。

我正在尝试在这里调试一些代码。我似乎可以去掉最后一个逗号。想法？

```
<c:forEach items="${userDeptList}" var="userDeptVar" varStatus="userDeptCounter" >
   <c:if test="${contactsVar.userId==userDeptVar.userID}">
      <c:forEach items="${deptPtypeList}" var="deptsVar" varStatus="deptsCounter" > 
         <c:if test="${deptsVar.ptypeID==userDeptVar.deptID}">
            <c:out value="${deptsVar.type}" escapeXml="false"></c:out>
            <c:out value="," escapeXml="false"></c:out> 
         </c:if>    
      </c:forEach>                          
   </c:if>                  
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:46:56.673

要省略最后的逗号，您可以以这种方式测试您是否在最后一项

```
<c:forEach items="${userDeptList}" var="userDeptVar" varStatus="userDeptCounter" >
   <c:if test="${contactsVar.userId==userDeptVar.userID}">
      <c:forEach items="${deptPtypeList}" var="deptsVar" varStatus="deptsCounter" > 
         <c:if test="${deptsVar.ptypeID==userDeptVar.deptID}">
            <c:out value="${deptsVar.type}" escapeXml="false"></c:out>
            <c:if test="${not userDeptCounter.last}>
              <c:out value="," escapeXml="false"></c:out> 
            </c:if>
         </c:if>    
      </c:forEach>                          
   </c:if>                  
</c:forEach> 
```

这里是所有*varStatus*属性的列表

```
current    The item (from the collection) for the current round of iteration
index      The zero-based index for the current round of iteration
count      The one-based count for the current round of iteration
first      Flag indicating whether the current round is the first pass through the iteration
last       Flag indicating whether the current round is the last pass through the iteration
begin      The value of the begin attribute
end        The value of the end attribute
step       The value of the step attribute 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:27:14.643

利用`varStatus`

```
<c:if test="${not deptsCounter.last}">
</c:if> 
```

# javascript - javascript/jquery/mootools/other js lib-如何使用户能够将 div 添加到现有网页

> ID：10179517
> 
> 赞同：0
> 
> 时间：2012-04-16T18:24:24.307
> 
> 标签：javascript, jquery, mootools

我正在处理一个网页，并在 html 编辑器中显示它。

我想做的是，允许用户通过在页面上拖动鼠标来动态定义该 html 页面中的新 div - 页面显示在 CKEditor 或 TinyMCE 等所见即所得编辑器中......并且创建了 div , 并且代码被插入到该 div 的页面的 html 中。

我对 ref 使用特定的 javascript 库没有任何限制——我可以使用 jquery 或 mootools 或任何其他库。

我什至如何开始考虑实施这样的要求？如何在屏幕上显示一个可调整大小的矩形，当用户完成拖动并单击鼠标时，会创建一个矩形大小的新 div？这可以使用相对宽度/高度来完成吗？或者这是否一定需要固定的宽度/高度？

任何指针都会对我有帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:32:05.843

我可能会使用 jQuery UI 的可调整大小。当他们单击添加 div 时，在页面上附加一个新 div。`$('<div></div>').resizable().appendTo(parent)`. 您应该保留对已添加到页面的所有内容的引用，以便以后保存。

# javascript - 使用jquery隐藏和显示表单元素

> ID：10179522
> 
> 赞同：1
> 
> 时间：2012-04-16T18:24:49.643
> 
> 标签：javascript, jquery, jquery-ui

我想隐藏一些表单元素，只在需要时显示它们。

我的代码的问题是隐藏元素仍然占用空间。

这个问题有解决方案吗？

示例代码：

[关联](http://jsfiddle.net/2YdbH/6/)

检查元素#choice。它是隐藏的，但它仍然在网站中占用空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:28:01.060

它们没有发生，但周围的

```
<br> 
```

做...

要么包装在 div

```
<div class="initiallyhidden">
<br/>    
<select>.....</select>
<br/>
</div> 
```

并隐藏它，或者离开我们的 br 并设置间距

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:37:47.910

他们`<br/>`把这搞砸了。您的 jsfiddle 并没有证明元素仍然占用空间。看看我是怎么修改的：

[http://jsfiddle.net/2YdbH/12/](http://jsfiddle.net/2YdbH/12/)

选择类型 3 显示所有内容，选择类型 1 隐藏所有内容，然后选择类型 4 仅显示文本区域。请注意 textarea 如何与类型下拉列表对齐。选择选择器不占用空间。

当您隐藏选项选择器时，`<br/>`'s 仍然存在于 html 中，因此您会看到两个返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:27:21.557

您看到的空间是由您的`<br/>`标签引起的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T18:29:38.320

隐藏 n 个显示`br`标签：

```
$("br").hide() 
```

# objective-c - 通过在objective-c中双击打开文件

> ID：10179524
> 
> 赞同：3
> 
> 时间：2012-04-16T18:25:14.100
> 
> 标签：objective-c, macos

双击文件时，我想用我的应用程序打开一个文件。我已经向应用程序注册了文件类型，`application: openFile:`如果我将文件放到应用程序图标上，该方法可以正常工作。在苹果文档中它说，当用户双击文件时，这种方法也应该起作用。

我看到的是，通过双击打开文件时，应用程序将激活，但 Safari 会打开文件（尝试打开 .webloc 文件）。但是该方法`application: openFile:`没有被调用:(

这是我在 xcode 中设置的方法： ![文件类型 reg](../Images/2b739830cc72dc86011121ece2224866.png)

**编辑：**

我已将 .webloc 设置为作为我的应用程序的标准打开。右键单击“打开方式”>“我的应用程序”也不起作用。

**编辑 2：** 如果我将文件扩展名重命名为 .mp3 或任何其他文件，我的应用程序将通过双击打开该文件！奇怪的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T16:37:27.447

因为我自己也遇到过类似的问题，所以我会添加对我有用的东西。我发现 .webloc 文件从不调用`-application:openFile:`，相反，如果您只想双击 .webloc 并让您的应用程序处理它，您必须做几件事以允许您的应用程序成为 URL 的默认角色处理程序。

这篇文章中选择的答案描述了解决我的问题的过程： [如何将 Cocoa 应用程序设置为默认 Web 浏览器？](https://stackoverflow.com/questions/49510/how-do-you-set-your-cocoa-application-as-the-default-web-browser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:30:32.203

双击文件不会在其中打开每个可以处理该文件类型的应用程序（您能想象双击 JPEG 会发生什么吗？）— 双击使用文件类型的默认应用程序。在这种情况下，Safari 是 webloc 文件的默认阅读器。如果您希望它成为被调用的应用程序，则需要将其更改为您的应用程序（您可以从“获取信息”窗口执行此操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:30:47.160

可能有多个应用程序都知道如何打开相同类型的文件。如果您希望*您的*应用程序处理`.webloc`文件，请获取该类型文件的信息。然后在信息窗口的“打开方式：”部分的弹出菜单中选择您的应用程序。如果您想将您的应用程序用于所有此类文件，请单击“全部更改...”按钮。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-16T18:45:32.340

在 Xcode 中，使用“Mac OS X :: Cocoa Application”模板创建一个新项目。然后实施

```
- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError
{ static NSString *content = @"Empty File";
   return [NSData dataWithBytes: [content UTF8String] 
                         length: 1 + strlen ([content UTF8String])]; } 
```

然后，您将有一个工作示例与您的项目进行比较。

# maven-3 - Maven 分类器依赖并不总是解决

> ID：10179527
> 
> 赞同：1
> 
> 时间：2012-04-16T18:25:36.240
> 
> 标签：maven-3, nexus

我们使用 Maven3.0.3 并使用分类器来解析三个区域 DEV/TEST/PROD 的依赖关系。即使 Nexus maven 代表已经获得了所有分类器（DEV/TEST/PROD）的罐子，但它并不总是得到解决。我们必须每次都构建特定的分类器依赖项才能解决它。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:37:14.837

假设您的依赖项是快照，问题可能与我所看到的相同：快照解析为存储库中找到的最新版本，并在该构建中查找您的分类器。因此，如果与您正在寻找的分类器不同的分类器是最后构建的，则依赖关系解析失败。这似乎是 Maven 如何解决问题的一个错误，它似乎已在 Maven 3.0.4 中修复（我唯一的其他 Maven 安装是 2.2.x，所以我不能确定这是否在 3.0 中被破坏.3 仍然）。

此外，可能是您使用的依赖插件版本仍然存在此问题。确保你没有将它与旧的东西挂钩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:41:45.467

尝试

*   运行 maven`-X`以产生可能有帮助的调试输出（请参阅 参考资料`mvn -help`）。如果工件在那里但被跳过，那么一定是有原因的。尝试在调试输出中找到它。
*   [检查您的settings.xml](http://maven.apache.org/settings.html)中的更新策略（用于快照和发布）- 可能会跳过您的更新，因为更新策略设置为每天（这是默认设置），但您需要“始终”，因为您的依赖项部署得更频繁（快照）。
*   尝试运行 maven`-X`以强制更新您的依赖项。

# c# - 关注 C# StreamReader 的死锁

> ID：10179536
> 
> 赞同：5
> 
> 时间：2012-04-16T18:26:11.763
> 
> 标签：c#, asp.net-mvc, deadlock

只是一个一般性问题，我正在开发一个 ASP.NET MVC 3 Web 应用程序，该应用程序在 Using 语句中使用 Stream Reader 从配置文件中读取以进行自动处理，如下所示：

```
using (StreamReader sr = new StreamReader(filepath))
{

} 
```

我担心的是，当多个用户运行应用程序时，当应用程序的多个实例从配置文件中读取值时会发生死锁。我的问题是，在使用 Stream Reader 类时，死锁是一个问题吗？直觉上我认为不会，因为我假设 Stream Reader 正在以只读模式打开文件，并且除了手动编辑之外没有外部进程写入配置文件。我只是想确定这是否会成为问题。任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T18:28:15.967

> 我担心的是，当多个用户运行应用程序时，当应用程序的多个实例从配置文件中读取值时会发生死锁

不，别担心。不会发生死锁。您正在打开文件进行阅读。所以你可以有并发读者。但是，如果您在代码的其他位置写入此文件，则会出现异常。但没有僵局。如果您想正确地将读取器和写入器同步到某些共享资源（例如文件），您可以使用[ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)班级。如果您从不写入文件（来自同一进程或其他进程），那么您就可以了。但是如果你从不写文件，为了避免每次都读取和解析这个文件，你应该只读取一次并缓存在一些内存结构中。例如，这就是 .NET 应用程序配置系统的工作方式。它在运行应用程序时读取并解析 app/web.config 一次，然后将其存储到内存中以便更快地访问。但当然，一切都取决于您的具体情况。

# c++ - POSIX C 线程。pthread_cond_t 示例。没有按预期工作

> ID：10179546
> 
> 赞同：6
> 
> 时间：2012-04-16T18:27:39.737
> 
> 标签：c++, variables, pthreads, conditional-statements, multitasking

我写了一个程序，但它并没有像我期望的那样工作。我有两个线程：`thread`triggers`func`和`anotherThread`triggers `anotherFunc`。我想做的是当`cont`达到 , 的值时`10`使用and触发。奇怪的是，如果我取消注释该行，一切正常。我是线程的新手，我在[这里](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables)遵循教程，如果我在他们的示例中评论该行，它也会中断。`func``anotherThread``pthread_cond_wait``pthread_cond_signal``sleep(1)``sleep`

我的问题是如何在没有任何`sleep()`电话的情况下完成这项工作？如果在我的代码中都`func`达到`pthread_mutex_lock`after会发生什么`anotherFunc`？我该如何控制这些事情？这是我的代码：

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>

pthread_mutex_t myMutex;
pthread_cond_t cond;
pthread_attr_t attr;

int cont;

void *func(void*)
{
    printf("func\n");

    for(int i = 0; i < 20; i++)
    {
        pthread_mutex_lock(&myMutex);

        cont++;
        printf("%d\n", cont);
        if(cont == 10)
        {
            printf("signal:\n");
            pthread_cond_signal(&cond);
//            sleep(1);
        }
        pthread_mutex_unlock(&myMutex);
    }
    printf("Done func\n");

    pthread_exit(NULL);
}

void *anotherFunc(void*)
{
    printf("anotherFunc\n");
    pthread_mutex_lock(&myMutex);
    printf("waiting...\n");

    pthread_cond_wait(&cond, &myMutex);
    cont += 10;
    printf("slot\n");

    pthread_mutex_unlock(&myMutex);
    printf("mutex unlocked anotherFunc\n");
    printf("Done anotherFunc\n");

    pthread_exit(NULL);
}

int main(int argc, char *argv[])
{
    pthread_t thread;
    pthread_t anotherThread;

    pthread_attr_init(&attr);
    pthread_mutex_init(&myMutex, NULL);
    pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);
    pthread_cond_init(&cond, NULL);

    pthread_create(&anotherThread, &attr, anotherFunc, NULL);
    pthread_create(&thread, &attr, func, NULL);

    pthread_join(thread, NULL);
    pthread_join(anotherThread, NULL);

    printf("Done MAIN()");

    pthread_mutex_destroy(&myMutex);
    pthread_cond_destroy(&cond);
    pthread_attr_destroy(&attr);

    pthread_exit(NULL);
    return 0;
} 
```

抱歉，这篇文章很长，但我是线程新手，我愿意学习。你还知道一些关于 Linux 上线程和网络的很好的参考资料或课程/教程吗？我想学习创建一个聊天客户端，我听说我必须知道线程和网络。问题是我不知道我所学的东西是否很好，因为我不知道我必须知道什么。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T18:36:11.050

您`anotherThread`只需调用`pthread_cond_wait`而无需先测试所需条件（计数器达到十）是否已经发生。这是不正确的逻辑，这将导致*丢失唤醒问题*：一个反复出现的错误的名称，它困扰着错误编写的多线程程序。

条件变量是无状态的。如果在当前没有线程等待的条件下调用`pthread_cond_signal`or `pthread_cond_broadcast`，则操作无效。不记得了。因此，您的信号线程可能会`10`非常快地计数，并在其他线程到达`pthread_cond_wait`调用之前向条件变量发出信号。

你需要一个循环`pthread_cond_wait`。如果条件已经为真，则必须检查条件，以便线程不会等待已经发生的唤醒。它应该是一个循环，因为唤醒可能是虚假的：仅仅因为线程`pthread_cond_wait`失败并不意味着条件实际上是真的：

```
while (cont < 10)
  pthread_cond_wait(&cond, &myMutex); 
```

此外，不需要仅仅为了使线程可连接而创建线程属性。当您对创建属性使用空指针时，这是默认情况。POSIX 线程是可连接的，除非创建分离的，或转换为分离的`pthread_detach`。

另一件事：尽可能避免`pthread_cond_signal`在持有互斥锁时调用。这不是不正确的，但它可能是浪费的，因为该操作实际上可能必须调用操作系统内核来唤醒一个线程，所以你在整个系统调用中持有这个昂贵的互斥锁（当你真正需要它的时候正在保护一些在您的应用程序中处理共享数据的机器指令）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:38:49.393

我不知道你的实际问题是什么（当它不起作用时会发生什么？）..

我看到了一个主要问题，您无法处理[虚假唤醒](http://en.wikipedia.org/wiki/Spurious_wakeup)。

您需要一些东西来表明条件确实为真，例如使用布尔变量：

在里面：

```
signaled = false; 
```

信号：

```
signaled = true;
pthread_cond_signal(&cond); 
```

收到：

```
while (!signaled)
   pthread_cond_wait(&cond, &myMutex); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:55:52.163

您想要的是信号量而不是条件变量。

信号量维护状态并针对它计算 wait() 和 signals()。
它通常使用条件变量来实现。

[在这里](https://stackoverflow.com/a/6002408/14065)寻找一个简单的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T18:52:09.257

这只是一个想法，但您也可以使用信号量来执行“触发”。我记得我不久前从事的一个项目，我们所做的是当我们的一个线程等待被触发（使用 sem_wait）时，它只会等待无限时间来尝试获取锁（因此被取消了）由调度程序处理并节省宝贵的周期）。一旦主线程完成计算，它将释放信号量，允许第二个线程进行计算。

这只是一个不同的选择。

# android - Android：如何将自定义字体添加到主题/样式/xml

> ID：10179558
> 
> 赞同：5
> 
> 时间：2012-04-16T18:28:31.067
> 
> 标签：android, fonts

我知道如何将自定义字体设置为 TextView。但是如何通过主题/样式/xml添加自定义字体？

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <style name="customfontforlistview" parent="@android:style/Widget.ListView">
        <item name="android:textColor">#000000</item>
        <item name="android:typeface">HOW_TO_CUSTOM_FONT</item>
   </style>
</resources> 
```

请为此提供解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:50:55.717

据我所知，没有好的方法可以做到这一点。我知道的最好的选择是创建一个看起来像这样的简单子类：

```
public class CustomTextViewNormal extends TextView
{
    public CustomTextViewNormal(Context context)
    {
        super(context);
        init();
    }

    public CustomTextViewNormal(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        init();
    }

    public CustomTextViewNormal(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        init();
    }

    public void init()
    {
        Typeface tf = Typeface.createFromAsset(getContext().getAssets(),
                "fonts/HelveticaNeue.ttf");
        setTypeface(tf);
    }
} 
```

如果你这样做了，你可以在 xml 布局中使用这个自定义文本视图，并且你基本上具有与样式相同的功能，尽管不可否认，有点草率。

# asp.net - SQL LIKE - 完全匹配

> ID：10179562
> 
> 赞同：0
> 
> 时间：2012-04-16T18:28:59.307
> 
> 标签：asp.net, sql

请参阅下面的数据库表，我创建该表是为了解释我的问题：

```
CREATE Table Test(id int not null IDENTITY,data varchar(100))
INSERT INTO Test(data) values ('Simon')
INSERT INTO Test(data) values ('David;James;Michael') 
```

请看下面的 SQL 语句：

```
select *
from Test
where data like '%_James%'
    or data like '%James;%' 
```

假设始终使用分号作为分隔符，我相信无论表格单元格中是否存在一个名称或多个名称，都会始终找到 James。

另一位开发人员说，他会将值加载到数组中（在 ASP.NET 或任何编程语言中）并循环遍历数组以找到精确匹配，但是我不认为这一步是必要的，因为“詹姆斯”将永远是成立。这一步有必要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:35:05.900

最好在查询中进行过滤。如果有数百万条记录怎么办？您不想先检索所有这些，只是为了过滤。

假设您必须坚持使用这种非规范化模式，我会这样做。前两种情况可以利用`data`列上的索引。假设数据从来没有前导或尾随分号：

```
select * 
from Test 
where data = 'James'
    or data like 'James;%'
    or data like '%;James;%' 
    or data like '%;James' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:33:43.483

使用您粘贴的 SQL，如果在它之前至少有一个字符（例如，“2James”、“BJames”、“2Jamesey”将匹配），或者如果在“james”之后有一个分号（例如， “2詹姆斯；”、“B詹姆斯；”、“詹姆斯”）。但是“James”本身不匹配，因为您使用了下划线。

目前尚不清楚您要做什么。您是否只想查找与单词“James”完全匹配的行（在“James”之前和之后有“word”边界，或者您是否想要在列中的任何位置出现“James”的行，即使它是较大词的一部分，例如“Jamestown”）。您可以通过添加来修复`or data = 'James'`。我不确定下划线是否在做你想做的事，因为我不确定你的总体目标是什么。您可能需要也可能不需要对查询进行进一步更改。

根据您对表中数据是否干净的信心，您可以编写一个语句来执行您所说的操作。我会将搜索保留在 SQL 语句中，而不是将记录拉出并循环遍历数组中的值，因为在某些情况下这可能会变得低效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:36:50.117

不，不需要将值加载到数组中 - 在任何情况下都会对性能非常不利。

话虽如此，您的 SQL 有点奇怪 - 如果您想插入由`;`我认为您需要的名称分隔的名称：

```
INSERT INTO Test(data) values ('David;James;Michael') 
```

如果您确保每个名称都以分隔符开头和结尾，可能会更好：

```
INSERT INTO Test(data) values (';David;James;Michael;') 
```

然后你可以使用

```
SELECT * FROM Test WHERE data like '%;James;%' 
```

并确保始终得到正确的结果。

最后但并非最不重要的一点是，可以在单个列中填充多个 valuers，但这不是在 SQL 数据库中做的最好的事情，最好将名称保留在不同表中的单独行中，然后有一个交叉-引用它（规范化结构）。

# java - 如何在 OAuth 中设置令牌秘密和消费者秘密？

> ID：10179564
> 
> 赞同：0
> 
> 时间：2012-04-16T18:29:17.457
> 
> 标签：java, android, oauth-2.0

在这两个网站上，他们都要求提供令牌秘密和消费者秘密： http: [//oauth.googlecode.com/svn/code/javascript/example/signature.html](http://oauth.googlecode.com/svn/code/javascript/example/signature.html) [http://developer.netflix.com/resources/OAuthTest#instructions](http://developer.netflix.com/resources/OAuthTest#instructions)

如何以编程方式设置它们：

```
public void excecuteSigning(String targetURL){
            HttpRequestAdapter requestSig = new HttpRequestAdapter(new HttpGet("http://photos.example.net/photos"));
            HttpParameters requestparameters = new HttpParameters();
            OAuthMessageSigner signer = new HmacSha1MessageSigner();

requestparameters.put(OAuth.OAUTH_CONSUMER_KEY, "dpf43f3p2l4k3l03");        
            requestparameters.put(OAuth.OAUTH_TOKEN, "nnch734d00sl2jdk");
            requestparameters.put(OAuth.OAUTH_NONCE, "kllo9940pd9333jh");
            requestparameters.put(OAuth.OAUTH_TIMESTAMP, "1191242096");
            requestparameters.put(OAuth.OAUTH_SIGNATURE_METHOD, "HMAC-SHA1");
            requestparameters.put(OAuth.OAUTH_VERSION, "1.0");
            requestparameters.put("size", "original");
            requestparameters.put("file", "vacation.jpg");
            String OAUTH_SIG = signer.sign(requestSig, requestparameters);
            System.out.println(OAUTH_SIG);
} 
```

///上面生成这个签名：rYexRY70p6aDDWw0ox0SwERRK2w=

///下面的代码没有生成正确的签名

```
requestparameters.put("oauth_consumer_secret", "kd94hf93k423kf44");
            requestparameters.put(OAuth.OAUTH_TOKEN_SECRET, "pfkkdhi9sl3r4s00"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:18:28.487

请包含您客户的完整源代码。使用您提供的值，google oauth 测试链接提供此签名 -

```
OAuth realm="",oauth_version="1.0",oauth_consumer_key="dpf43f3p2l4k3l03",oauth_token="nnch734d00sl2jdk",oauth_timestamp="1191242096",oauth_nonce="kllo9940pd9333jh",oauth_signature_method="HMAC-SHA1",oauth_signature="tR3%2BTy81lMeYAr%2FFid0kMTYa%2FWM%3D" 
```

您的客户生成什么签名值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:41:41.007

```
OAuthMessageSigner signer = new HmacSha1MessageSigner();
     signer.setConsumerSecret(consumerSecret);
     signer.setTokenSecret(tokenSecret); 
```

现在可以正常工作并生成正确的签名。

# php - 在 PHP 中将字符串存储在两个单独的变量中

> ID：10179567
> 
> 赞同：-2
> 
> 时间：2012-04-16T18:29:33.540
> 
> 标签：php

我有一个这样的字符串：

```
$string = 'Product Name | 43.39'; 
```

我想把它分成两个变量

```
$productName 
```

和

```
$productPrice 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:33:09.073

你也可以这样做

```
list($productName, $productPrice) = explode(' | ', $string); 
```

几乎一样，但我喜欢一个班轮:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:31:38.200

您可以为此使用[爆炸功能](http://php.net/manual/en/function.explode.php)。

```
$string = 'Product Name | 43.39';
$array = explode(' | ',$string);
$productName = $array[0]; //will echo Product Name
$productPrice = $array[1]; //will echo 43.39 
```

这个函数基本上把你的字符串和它看到分隔符的地方分开。

一个较短的版本基本上是：

```
$string = 'Product Name | 43.39';
list($productName, $productPrice) = explode(' | ', $string); 
```

它做的事情完全相同，只是在一行上，可能更容易阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:33:25.387

较短的版本：

```
$string = 'Product Name | 43.39';
list($productName,$productPrice) = explode(' | ',$string); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T18:38:40.973

尝试

```
$string = 'Product Name | 43.39';
list($productName , $productPrice) = explode(" | ",$string); 
```

# ruby-on-rails - 为什么我缺少模板 mobile/home/index、application/index？

> ID：10179570
> 
> 赞同：0
> 
> 时间：2012-04-16T18:29:43.593
> 
> 标签：ruby-on-rails, ruby

我正在学习 Ruby，我设置了一个这样的控制器：

```
class Mobile::HomeController < ApplicationController
  def index

  end

  def create

  end

end 
```

这是非常基本的，并添加了这样的路线：

```
 scope :module => :mobile, :as => :mobile do
    constraints(:subdomain => /m/) do
      resources :home
    end
  end 
```

当我尝试在浏览器中查看该页面时，我收到此错误：

```
Missing template mobile/home/index, application/index with {:locale=>[:en, :en], :formats=>[:html], :handlers=>[:haml, :erb, :builder]}. Searched in: * "/Users/alexgenadinik/projects/cmply/cmply-app/app/views" * "/Library/Ruby/Gems/1.8/gems/ckeditor-3.6.3/app/views" * "/Library/Ruby/Gems/1.8/gems/kaminari-0.13.0/app/views" * "/Library/Ruby/Gems/1.8/gems/devise-2.0.4/app/views" 
```

但我在这里有一个查看页面：

```
app/views/layouts/mobile/application.html.haml 
```

我需要指定我在控制器中返回 HAML 格式的问题吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:38:42.283

您的程序试图找到一个常规模板，而不是布局。尝试创建页面：

```
app/views/mobile/home/index.html.haml 
```

# php - PHP：cURL 会在后台完成，还是会阻止所有进一步的脚本执行？

> ID：10179572
> 
> 赞同：8
> 
> 时间：2012-04-16T18:29:58.173
> 
> 标签：php, curl

我正在构建一个应用程序，它在某一时刻会从外部 URL 卷曲一些内容。到目前为止，这总是很快/立即完成。但是，我不确定如果外部服务器需要很长时间才能响应会发生什么。PHP 会等待执行以下代码直到 cURL 完成吗？

我无法真正测试它，因为我不知道如何“模拟”较慢的响应。我希望这个伪代码能清楚地说明我的问题：

```
$ch = curl_init( $some_remote_url );
$fp = fopen( $some_local_file, 'wb' );
curl_setopt( $ch, CURLOPT_FILE, $fp );
curl_setopt( $ch, CURLOPT_HEADER, 0 );
curl_exec( $ch ); // Let's say this takes 20 seconds until the other server responds
curl_close( $ch );
fclose( $fp );
redirect( $some_other_url ); // Will this be executed instantly or only after 20 seconds? 
```

我对此感到疑惑的原因是，如果远程服务器响应缓慢，我不希望我的用户查看“加载”页面 20 秒，因此我可能不得不将整个过程移至 cron 作业. 用户不需要立即卷曲的结果，因此该过程何时结束对他来说并不重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T18:35:49.587

Curl 将阻止执行。如果要在后台（异步）下载文件，请使用 cron 计划任务，或执行如下命令：

```
system("wget URL &"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:34:45.093

我不知道这是否会停止脚本执行，但您可以创建一个脚本，直接将输出呈现到远程计算机，然后通过 AJAX 启动另一个脚本以执行您想要的 cURL 操作。最后它会返回一个响应，然后你的 JS 脚本会做重定向，或者你想要的。

当然这只对开启了JS的用户有效，只是说：浏览器中没有开启JS的每个人都无法正常浏览网页。

# sql-server - 需要根据 SSIS 中的其他列增加列值

> ID：10179582
> 
> 赞同：3
> 
> 时间：2012-04-16T18:31:00.190
> 
> 标签：sql-server, ssis

我有一个像下面这样的场景。

源数据如下（XML 文件）::

```
ID        CatType           Name
11           A              Raj
22           A              Rai
33           B              Raki
44           B              Krish
55           A              Rem
66           B              Ram 
```

我必须将上面加载到下面的甲酸盐中。

```
ID       CatType        Name       LegacyID
1              A        Raj           11
2              A        Rai           22
1              B        Raki          33
2              B        Krish         44
3              A        Rem           55
3              B        Ram           66 
```

`ID`并且`CatType`是我的目标表中的复合键。我从源代码获取 CatType。在加载数据时，我必须通过在 Destination 表中选择 Max(ID) where CatType= ?(based on CatType) 来增加 ID 如何在 SSIS 中加载这些记录，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:34:22.350

这是一个使用它创建的示例 SSIS 包`SSIS 2008 R2`，它演示了您要实现的目标。示例包将传入的文件数据加载到临时表中。然后将 SQL Server`Rank`函数与`Partition`子句结合使用，您可以根据需要加载数据。此示例假定您的数据库版本为`SQL Server 2005 or above`. 由于您没有提供确切的 XML 文件格式，因此我使用 CSV 文件格式作为输入文件。

*   让我们创建两个名为`Source_001.csv`和的示例 CSV 文件`Source_002.csv`。创建了两个文件只是为了显示包逻辑的工作原理。

![来源_001](../Images/e01358927325b98464454471f162a83a.png)

![来源_002](../Images/d734f663745ccb368173490581a3b2c7.png)

*   在 SQL Server 数据库中，创建名为`dbo.CategoryName`. 这是将加载数据的最终表。它在列上具有复合键，`Id`并且`CatType`.

![目标表](../Images/11c0a38e3f6e78fb9c217223fad67d5e.png)

*   在 SQL Server 数据库中，创建名为`dbo.CategoryName_Staging`. 这是临时加载文件数据的地方。这种暂存表结构模仿传入的文件结构。

![暂存表](../Images/4c3c2abda60a5d669f642c89d8cecb48.png)

*   在 SQL Server 数据库中，使用本文底部提供的*存储过程脚本***`dbo.PopulateDestination`**部分中提供的脚本创建一个存储过程。此存储过程结合使用函数和子句来识别应分配给 CatType 值的正确 Id。***`RANK`****`PARTITION`***

**   创建一个新的 SSIS 包。创建一个名为`SQLServer`. 这将指向您的 SQL Server 数据库。创建了一个名为`Source`.* 

 *![连接管理器](../Images/28934ab317482e2513065c9f1090fb87.png)

*   如下所示配置平面文件连接管理器。我已将源 csv 文件放在路径中`C:\temp\`

![平面文件一般](../Images/f65d16683e18bca9ecae3b166d645f41.png)

*   在*Flat File Connection Manager Editor的**Advanced*选项卡上，重命名列信息。- **integer** , - **string (10)** , - **string (30)**数字表示 OutputColumnWidth。*`LegacyId`**`CatType`**`Name`*****

 *******![平面文件列](../Images/13d9780a1587f4ea0e3b5ab03ceefa46.png)

*   在 SSIS 包的控制流选项卡上，放置一个`Execute SQL task`, 后跟`Data Flow Task`另一个`Execute SQL task`.

![SSIS 控制流](../Images/d4dd99e681cec878af529467f0be01ed.png)

*   双击第一个执行 SQL 任务并将其配置为截断临时表。

![截断临时表](../Images/7d7d82710323788d351f549561069a45.png)

*   双击数据流任务以切换到数据流选项卡。在数据流选项卡中，放置一个平面文件源管理器以读取 CSV 文件并放置一个 OLE DB 目标以将数据写入临时表。

![数据流任务](../Images/6802f89255d94e92c47e7ebb228db8fd.png)

*   如下所示配置平面文件源以使用平面文件连接管理器读取平面文件源。

![平面文件连接管理器](../Images/00eacb3578932e5024157f7c6b8d83ab.png)

![平面文件列](../Images/3ff1e5be9c8e361f8ccaf10448309f6c.png)

*   如下所示配置 OLE DB 目标以接受传入数据并写入目标文件。

![OLE DB 连接管理器](../Images/6bd72a8ecc0b5be140d1c4da974d9a18.png)

![OLE DB 列](../Images/9de21555d926f09e7293e33f4fbae710.png)

*   返回控制流选项卡，配置最后一个执行 SQL 任务以调用新创建的存储过程。软件包开发现已完成。

![执行 SQL 任务以运行存储过程](../Images/09f688a16aa1865f8b234c89f4e242e9.png)

*   执行包。请记住，该包配置为仅读取第一个源文件**Source_001.csv**。打包执行后，查询目标表**`CategoryName`**找到如下数据。

![第一次执行后的目的地](../Images/b8fd424827a5b7a68d84f4e034ee2519.png)

*   现在，停止 SSIS 包的执行，双击名为**`Source`**. 将文件名路径更改为**`Source_002.csv`**以读取第二个文件。

![更改平面文件连接文件名](../Images/d895e7efbf53928683886c90c5bee4b0.png)

*   再次执行包。该包现在配置为读取第二个源文件**Source_002.csv**。此执行会将行附加到已填充的目标表中。包执行后，查询目标表**`CategoryName`**以找到以下添加数据，并注意 Id 列是正确填充器。

希望有帮助。

![第二次执行后的目标表](../Images/af8af9cda58dfb0e9af4218230d34d00.png)

**`Stored Procedure Script`**：

```
CREATE PROCEDURE [dbo].[PopulateDestination]
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO dbo.CategoryName (Id, CatType, Name, LegacyId)
    SELECT      MAXID.Id + RANK() OVER(PARTITION BY CatType ORDER BY LegacyId) Id
            ,   CS.CatType
            ,   CS.Name
            ,   CS.LegacyId
    FROM        dbo.CategoryName_Staging    CS
    CROSS APPLY (
                    SELECT  COALESCE(MAX(Id), 0) Id
                    FROM    dbo.CategoryName C
                    WHERE   C.CatType = CS.CatType
                ) MAXID
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:47:25.003

所以你真正需要的是根据 cat 类型创建一个新的 ID 列并将列名从 ID 更改为 legacy ID？

如果是，您可以使用[派生列来做这两件事](http://msdn.microsoft.com/en-us/library/ms141069%28v=sql.100%29.aspx)********

# c - UDP Socket广播和ifaddrstruct

> ID：10179583
> 
> 赞同：0
> 
> 时间：2012-04-16T18:31:03.717
> 
> 标签：c, sockets, udp, gethostbyname

我必须开发的应用程序的客户端有问题。

我必须实施的第一阶段是“扫描”网络，搜索其他用户。我决定使用 UDP 套接字，它们工作正常。如果我使用广播 IP 地址 (getnamebyhost("192.168.1.255")) 它工作正常。问题是应用程序必须在不同的网络上工作，而且我不知道 IP 地址（192.168 或 10.0 或其他）。我要学习地址，所以我在网上找到使用getifaddr()。这是代码：

```
#include <stdio.h>      
#include <sys/types.h>
#include <ifaddrs.h>
#include <netinet/in.h> 
#include <string.h> 
#include <arpa/inet.h>
#include <string.h>

int FindMyIp();
int IsConnected();

char *myIpAddr, *myMask, *myBroad;

int main (int argc, const char * argv[]) {

    int checkConnection=0;
    checkConnection = IsConnected();
    while (checkConnection == 0) {
        printf("Checking again..\n");
        checkConnection = IsConnected();
        sleep(2);
    }
    checkConnection=0;
    printf("\nConnected to a new network..\n");
    while (checkConnection == 0) {
        checkConnection = FindMyIp();
        if (checkConnection==0) { sleep(2); }
    }
    printf("My IP is %s\n", myIpAddr);
    printf("My Mask is %s\n", myMask);
    printf("The Broadcast IP is %s\n", myBroad);
    return 0;
}

int IsConnected()
{
    if (system("ping -c 1 www.google.com")){
        return 0;
    }
    else {  
        return 1;
    }
}

int FindMyIp()
{
    struct ifaddrs * ifAddrStruct=NULL;
    struct ifaddrs * ifa=NULL;
    void * tmpAddrPtr=NULL;
    printf("Acquiring interface information.. ");
    getifaddrs(&ifAddrStruct);
    printf("Checking for wanted interface..\n");
    int i=0, connected=0;
    ifa = ifAddrStruct;
    while (i!=1) {
        if ((ifa ->ifa_addr->sa_family==AF_INET)&&(ifa->ifa_name[0]=='e')&&(ifa->ifa_name[1]=='n')&&(ifa->ifa_name[2]=='1')) {
            i=1;
            connected=1;
        }
        else {
            if (ifa->ifa_next == NULL) {
                printf("error");
                return connected;
            }
            ifa = ifa->ifa_next;
        }
    }
    char addressBuffer1[INET_ADDRSTRLEN];
    char addressBuffer2[INET_ADDRSTRLEN];
    char addressBuffer3[INET_ADDRSTRLEN];
    tmpAddrPtr=&((struct sockaddr_in *)ifa->ifa_addr)->sin_addr;
    inet_ntop(AF_INET, tmpAddrPtr, addressBuffer1, INET_ADDRSTRLEN);
    myIpAddr = addressBuffer1;
    tmpAddrPtr=&((struct sockaddr_in *)ifa->ifa_netmask)->sin_addr;
    inet_ntop(AF_INET, tmpAddrPtr, addressBuffer2, INET_ADDRSTRLEN);
    myMask = addressBuffer2;
    tmpAddrPtr=&((struct sockaddr_in *)ifa->ifa_broadaddr)->sin_addr;
    inet_ntop(AF_INET, tmpAddrPtr, addressBuffer3, INET_ADDRSTRLEN);
    myBroad = addressBuffer3;
    return connected;
} 
```

所以在myBroad中我应该保存广播IP地址，我可以用printf打印它，但是当我将它传递给套接字时： struct hostent *hptr = gethostbyname(myBroad); 它行不通！错误在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:49:45.847

myIpAddr = addressBuffer1;

在这里，您设置了一个全局指针以指向 FindMyIP 函数内的本地缓冲区。当函数结束时，该数组就消失了。

只需将所有全局`char *myIpAddr, *myMask, *myBroad;`设置为数组，然后将字符串直接放入其中，而不是本地 addressBuffer1/2/3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:07:55.550

char *myBroad 只是一个地址持有者，它在函数结束后失去其价值。您实际上需要创建一个字符串数组并将其传递给套接字 API 的其他函数。希望这可以帮助！

# c# - 回发后保持 ViewBag 值

> ID：10179588
> 
> 赞同：1
> 
> 时间：2012-04-16T18:31:14.923
> 
> 标签：c#, model-view-controller, session, postback, viewbag

我在回发期间丢失了 ViewBag 函数指针值的问题。

我的网站有一个横幅（部分视图），我使用 ViewBag 函数指针在其中指示客户的状态：

```
ViewBag.CustomerStatus= new Func<id, string>(GetCustomerStatus); 
```

（其中 id 是我的客户的 id 和返回的字符串它的返回状态）

当我开始访问使用横幅局部视图的其他页面时，我失去了我的 CustomerStatus ViewBag 变量。我知道 ViewBags 仅“每页”可用，但我怎样才能使我的客户状态功能从应用程序的其他地方可用，而不会冗余和重复 ViewBag.CustomerStatus= new Func(GetCustomerStatus); 在每一个 ActionMethod 调用上？

是否可以将函数指针存储在 Session/ViewState 中？安全的 ？如何通过回发访问我的最新客户状态？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:45:34.353

从架构上讲，这有一些地方让我很反感。您不应该将函数调用传递给您的视图，而应该传递**data**。您的方法违反了 MVC 所倡导的“关注点分离”。

构造一个表示您要显示的数据的视图模型，然后通过调用您的函数来填充它（最好从模型内部，或者如果必须从控制器中）。然后将模型传递给视图，让视图操心如何显示数据。

如果您有在每次调用时重复的数据，您可以通过覆盖 OnActionExecuting 方法将其添加到模型中，然后将值添加到模型（或 ViewBag）中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T20:02:13.957

我最终采取了以下方法......

我没有直接渲染局部视图，而是对其进行了更改，因此通过控制器的 Action 方法调用它。

我建立：

```
 public PartialViewResult CustomerStatus()
 {
  ...here I called my private GetCustomerStatus methods
  ViewBag.CustomerStatus = GetCustomerStatus();
  Return PartialView("
 } 
```

因此，现在不是单独调用 ViewBag 函数指针，而是每当必须呈现标题横幅时，而不是 @Html.Partial("BannerPartialView") 我调用我的 @Html.Action(CustomerStatus) 方法，该方法返回相同的横幅但带有客户状态变量可用。

希望这不会令人困惑并对其他人有所帮助。

# c# - 如何从asp.net中动态生成的复选框列表中获取复选框值

> ID：10179589
> 
> 赞同：2
> 
> 时间：2012-04-16T18:31:16.313
> 
> 标签：c#, asp.net, checkbox

在 Web 表单中，我动态创建了一系列添加到 asp:placeholder 的复选框

```
//Generates the List of Entities that may be shared
        protected void GenerateEntityList(string agencyId, string agencyName)
        {
            var selectedAgency = UserFactory.GetAgencyAndSharedDataById(Convert.ToInt64(agencyId));

            entityContainer.Controls.Clear();

            //builds the entity list based upon entities in DB
            var currentEntities = UserFactory.GetEntityList();
            //add checkboxes
            entityContainer.Controls.Add(new LiteralControl("<input type='checkbox' id='selectAllCB' value='All'>Select All<br/><br/>"));
            foreach (var item in currentEntities)
            {
                CheckBox entityCheckBox = new CheckBox();
                int currentItem = item.EntityTypeId.GetValueOrDefault(0);
                entityCheckBox.Text = item.EntityName.ToString();

                entityCheckBox.CssClass = "am_Checkbox";
                entityContainer.Controls.Add(entityCheckBox);
                entityContainer.Controls.Add(new LiteralControl("<br/><br/>"));

                //mark checkboxes as checked if currently stored in the database
                if (selectedAgency.FirstOrDefault().SecurityDataShares != null && selectedAgency.FirstOrDefault().SecurityDataShares.Count > 0)
                {
                    foreach (var ce in selectedAgency.FirstOrDefault().SecurityDataShares)
                    {
                        if (ce.EntityId == item.EntityId)
                        {
                            entityCheckBox.Checked = true;
                        }
                    }
                }
            } 
```

创建后，用户可以进行或删除选择。单击更新时，我想返回/收集复选框中的值，以便我可以将它们重新插入数据库。

```
//get the text value of every checkbox 
protected void updateEnties()
{
    string receivingAgency = ReceivingAgencyID;
    long contributingAgency = QueryID;

    List<string> cbValues = new List<string>();
    foreach (CheckBox currentItem in entityContainer.Controls)
    {
        cbValues.Add(currentItem.Text);
    }
} 
```

但是，当我尝试遍历集合时，我没有得到任何返回，这使我相信我错误地调用了控件，或者它由于回发而被破坏。我应该使用其他控件（如 Listbox 控件）而不是将这些元素写入占位符吗？

有人可以为我提供一些关于如何检索复选框值的指导吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:39:33.120

有两种思想流派；一，您需要重新创建为初始视图创建的控件层次结构，以便页面可以将视图状态和表单值恢复到控件树中，或者二，您可以使用低技术解决方案并简单地获取表单集合中的值。

我个人喜欢选项二，它相对容易处理，因为看起来你已经在手动创建 HTML 了`LiteralControl`。只需提供一个`name`在您手动创建的输入标签之间共享的属性（为简洁起见，此处显示的示例可能不是您将要做的）：

```
entityContainer.Controls.Add(new LiteralControl("<input type='checkbox' name='mySharedName' />"); 
```

然后，要获取值，就这么简单：

```
 var selectedValues = Request.Form["mySharedName"];
 // This is now a comma separated list of values that was checked 
```

然后你不必担心控制树状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T20:02:31.913

听起来您只需使用 a`CheckBoxList`并将结果集绑定到它，就可以让生活变得更轻松。这实际上会消除对任何动态内容的需求。

```
<asp:CheckBoxList ID="CheckList1" runat="server" DataTextField="TextColumn" DataValueField="ValueColumn" ...> 
```

如果这不是一个选项，那么您需要在每次回发后重新创建控件。有几种方法可以做到这一点。

**简单的方法**

查看[DynamicControlsPlaceHolder](http://www.denisbauer.com/ASPNETControls/DynamicControlsPlaceholder.aspx)控件。这是一个有用的小控件，它负责在幕后持久化动态内容。我建议使用此选项，因为它消除了动态创建内容的所有痛苦。

**手动方式**

期间重新创建控件`OnInit`。只需确保为控件分配相同的 ID，以便 ViewState 可以重新填充选择：

```
protected override void OnInit(EventArgs e)
{
    var chk = new CheckBox { ID = "chkBox1" };                 
    PlaceHolder1.Controls.Add(chk);

    base.OnInit(e);
} 
```

在回发后重新创建控件后，您应该能够访问如下值：

```
foreach (CheckBox chk in PlaceHolder1.Controls.OfType<CheckBox>())
{
    if (chk.Checked)
    {

    }     
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T21:38:01.290

感谢大家的建议。基于这是如何实现的，我将答案归功于 Tejs，因为他让我沿着这个解决方案的思路走下去。在这个项目中，由于我构建列表和验证选中元素的方式，我需要使用复选框与复选框列表控件。挑战来自于 asp.net 如何生成复选框控件以及允许向控件插入属性（名称、值等）的限制

因此，为了从代码生成的复选框中捕获值，我执行了以下操作：

在 aspx 文件中，我添加了一个隐藏的输入字段并分配了一个 runat=server 标记

```
 <input id="cbEntityList" type="hidden" runat="server" value="" /> 
```

Tejs 解决方案与此类似，但我不喜欢为每个复选框添加隐藏字段的想法，因为这看起来像页面中的很多元素。

然后，我修改了复选框代码生成部分，将我的对象的唯一标识符作为 Id 包含在内。ID 在 html 中呈现为 name 属性，因此这使我可以使用 javascript /jQuery 检索某些内容

因此，在我将构建复选框的 foreach 语句中，我添加了以下行

```
entityCheckBox.ID = item.EntityId.ToString(); 
```

最后，我使用 jQuery 来迭代页面的复选框并返回一个仅包含选中项的字符串数组。

这将根据选中的复选框填充回隐藏字段的值，例如 (0,1,2,3,4)。

```
$('#btnUpdateEntities').click(function (event) {
        var fields;
        $(':checkbox:checked').each(function () {
            var txt = $("input[name='cbEntityList']");

            fields = ($(':checkbox:checked').map(function () {
                return this.name;
            }).get().join(","));

            $(txt).val(fields);
        });
    }); 
```

然后我可以在后面的代码中访问值数组：

```
string voo = cbEntityList.Value; 
```

希望这可以帮助任何感兴趣的人。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-16T18:54:49.530

对于这种事情，您应该使用 OO 原则将实现放在一起。在这种情况下，您可能应该构建自己的 CheckBoxCollection（继承自正确的接口/类）。它将简化代码并使其更加分区和可扩展。

然后，其中一个实现细节是处理您描述的情况：添加一个单击处理程序，该处理程序添加到视图状态/会话/任何内容，您应该能够一眼看到您的测试工具/用户已选中/未选中的任何内容。

另一个要点：你不应该再使用 <br /> 标签进行布局，特别是如果你已经在使用 CSS。您可以确保 checkboxen 是您需要的任何显示类型（在这种情况下是块？），然后在您已经装饰控件的 CSS 类中设置它。

tl;博士：我没有时间在代码中举一个例子，但基本的想法是你应该有一个 CheckBoxCollection() （根据你的喜好）保留它的 CheckBox()s' .Checked states from action采取行动。

# sql - 在查询结果中添加“空”行

> ID：10179591
> 
> 赞同：3
> 
> 时间：2012-04-16T18:31:22.677
> 
> 标签：sql, oracle

我真的被这个任务困住了——我需要根据特定的标准用“0”值的行填充报表，下面是示例：

假设我们有一个表 BROKERS，其中包含公司名称、他们的交易类型和当前月份和所有月份的累计金额。

```
COMPANY       TRAN_TYPE          CURR_MNTH         ALL_MNTH  
Broker1       CURRENCY_SELL      $1000.00          $1500000.00 
Broker1       GOLD_SELL          $50000.00         $2500000.00 
Broker1       GOLD_BUY           $80000.00         $8500000.00 
Broker1       STOCKS_SELL        $35000.00         $3500000.00 
```

表 BROKERS 没有字段 TRAN_TYPE，但有一个字段 TRAN_TYPE_CD，它引用另一个名为 TRAN_TYPE_CD_EXPL 的表，其中解释了所有代码：

```
TRAN_TYPE_CD  TRAN_TYPE_CD_EXPLD
1             STOCKS_SELL
2             STOCKS_BUY
3             GOLD_SELL
4             GOLD_BUY
5             SILVER_SELL
6             SILVER_BUY
7             COPPER_SELL
8             COPPER_BUY
9             CURRENCY_SELL
10            CURRENCY_BUY 
```

所以上面显示的结果只是这两个表的简单连接：

```
select  b.COMPANY, tt.TRAN_TYPE, b.CURR_MONTH, b.ALL_MNTH
from    BROKERS b, TRAN_TYPE_CD_EXPL tt
where   b.TRAN_TYPE_CD = tt.TRAN_TYPE_CD; 
```

一切都很简单，但问题就从这里开始：我正在处理的报告应该如下所示：

```
COMPANY       MARKET      TRAN_TYPE          CURR_MNTH         ALL_MNTH  
Broker1       FOREX       CURRENCY_SELL      $1000.00          $1500000.00 
Broker1       FOREX       CURRENCY_BUY       $0.00             $5500000.00 
Broker1       CONTRACTS   GOLD_SELL          $50000.00         $2500000.00 
Broker1       CONTRACTS   GOLD_BUY           $80000.00         $8500000.00 
Broker1       STOCKMARKET STOCKS_SELL        $35000.00         $3500000.00 
Broker1       STOCKMARKET STOCKS_BUY         $0.00             $9500000.00 
```

所以让我解释一下：首先，报告应该包含一个列 MARKET，它应该根据列 TRAN_TYPE 中的值填充，但问题是数据库中没有表 MARKET，所以每次你需要在一个报告或其他地方，您需要像这样使用解码（假设每个人都知道所有类型的 tran_types 属于哪里）：

```
SELECT DECODE (TRAN_TYPE_CD_EXPL.TRAN_TYPE_CD_EXPLD,
             'CURRENCY_SELL', 'FOREX',
             'CURRENCY_BUY', 'FOREX',
             'STOCKS_SELL', 'STOCKMARKET',
             'STOCKS_BUY', 'STOCKMARKET') AS MARKET, 
```

或基于 TRAN_TYPE_CD 值：

```
SELECT DECODE (BROKERS.TRAN_TYPE_CD,
             9, 'FOREX',
             10, 'FOREX',
             1, 'STOCKMARKET',
             2, 'STOCKMARKET') AS MARKET, 
```

2) 问题 2 更复杂：报告逻辑说 - 公司在特定组中至少有一笔交易（假设市场类型为 'FOREX' 的 CURRENCY_SELL），报告应填充市场类型中的其他 tran_types即使您这家公司在本月没有任何这些交易，也可以用 0 美元分组。所以在这种情况下，它应该填充行

```
Broker1       FOREX       CURRENCY_BUY       $0.00             $5500000.00 
```

和

```
Broker1       STOCKMARKET STOCKS_BUY         $0.00             $9500000.00 
```

问题是它将在 unix 上通过 plsql 批处理执行，因此它必须是单个查询。

非常感谢任何想法和/或建议！

谢谢

附言

它的oracle 11gr2，具有只读角色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:55:34.947

查询的第一部分与您的完全一样，只是将市场作为内联表。第二部分通过两次加入市场来添加缺失的行以添加缺失的行，然后减去第一部分中已经存在的行。

```
WITH Market AS (
  SELECT 9 TRAN_TYPE_CD, 'FOREX' Market FROM dual
  UNION ALL SELECT 10, 'FOREX' FROM dual
  UNION ALL SELECT 1, 'STOCKMarket'  FROM dual
  UNION ALL SELECT 2, 'STOCKMarket' FROM dual
  UNION ALL SELECT 3, 'CONTRACTS' FROM dual
  UNION ALL SELECT 4, 'CONTRACTS' FROM dual
)
SELECT b.COMPANY, Market.Market, tt.TRAN_TYPE_CD_EXPLD, 
       b.CURR_MONTH, b.ALL_MONTH
  FROM BROKERS b 
 INNER JOIN TRAN_TYPE_CD_EXPL tt
    ON b.TRAN_TYPE_CD = tt.TRAN_TYPE_CD
 INNER JOIN Market
    ON b.TRAN_TYPE_CD = Market.TRAN_TYPE_CD
UNION ALL
(
  SELECT b.COMPANY, Market.Market, tt.TRAN_TYPE_CD_EXPLD, 
         0 CURR_MONTH, 0 ALL_MONTH
    FROM BROKERS b 
   INNER JOIN Market
      ON b.TRAN_TYPE_CD = Market.TRAN_TYPE_CD
   INNER JOIN Market Market2
      ON Market.Market = Market2.Market
     AND Market.TRAN_TYPE_CD <> Market2.TRAN_TYPE_CD
   INNER JOIN TRAN_TYPE_CD_EXPL tt
      ON Market2.TRAN_TYPE_CD = tt.TRAN_TYPE_CD
 MINUS
 SELECT b.COMPANY, Market.Market, tt.TRAN_TYPE_CD_EXPLD, 
        0 CURR_MONTH, 0 ALL_MONTH
   FROM BROKERS b 
  INNER JOIN TRAN_TYPE_CD_EXPL tt
     ON b.TRAN_TYPE_CD = tt.TRAN_TYPE_CD
  INNER JOIN Market
     ON b.TRAN_TYPE_CD = Market.TRAN_TYPE_CD
) 
```

这是用于测试结果的[Sql Fiddle 。](http://sqlfiddle.com/#!4/f957f/28)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T19:13:38.440

首先，您不能创建 MARKET 表是否有原因？这显然是最直接的解决方案。但是，如果您没有数据库访问权限并且必须将其破解到您的查询中，您可以执行以下操作：

```
WITH m AS (
    select 'CURRENCY_SELL' as tran_type, 'FOREX' as market_name from dual
    UNION ALL
    select 'CURRENCY_BUY' as tran_type, 'FOREX' as market_name from dual
    UNION ALL
    select 'STOCKS_SELL' as tran_type, 'STOCKMARKET' as market_name from dual
    UNION ALL
    select 'STOCKS_BUY' as tran_type, 'STOCKMARKET' as market_name from dual
)
select
    b.company, m.tran_type, m.market_name, 
    nvl(v.curr_month, 0) as curr_month,
    nvl(v.all_mnth, 0) as all_mnth
from
    m
cross join
    (select distinct b.company from brokers) b
left join (
    select b.COMPANY, tt.TRAN_TYPE, b.CURR_MONTH, b.ALL_MNTH
    from    BROKERS b, TRAN_TYPE_CD_EXPL tt
    where   b.TRAN_TYPE_CD = tt.TRAN_TYPE_CD
) v
on v.company = b.company and v.tran_type = m.tran_type; 
```

首先，我使用内联市场视图完成了公司的交叉连接 - 您将获得每家公司的所有这些记录的组合，即使它们不一起存在于 Brokers 表中。我已经执行了左外连接来获取您的数字，因此如果返回 NULL 值（没有相应的记录），它会插入 0。

这可能并不完全正确（例如，我不知道您如何划分月份），但应该为您指明正确的方向。

更新

好的，所以如果我理解正确，您希望将“空”行限制为经纪人在同一市场内至少有一笔交易的交易类型。

我将假设“BROKERS”是当前月份的视图 - 因此，如果表中有记录，则它发生在本月。

所以我们可以删除交叉连接并改为这样做：

```
WITH m AS (
    select 9 as tran_type_cd, 'FOREX' as market_name from dual
    UNION ALL
    select 10, 'FOREX' as market_name from dual
    UNION ALL
    select 1, 'STOCKMARKET' from dual
    UNION ALL
    select 2, 'STOCKMARKET' from dual
    UNION ALL 
    SELECT 3, 'CONTRACTS' from dual
    UNION ALL 
    SELECT 4, 'CONTRACTS' from dual
)
select
    bm.company, tt.tran_type, m.market_name, 
    nvl(v.curr_month, 0) as curr_month,
    nvl(v.all_mnth, 0) as all_mnth
from
    (select distinct b.company, m.market_name
     from brokers b
     join m on m.tran_type_cd = b.tran_type_cd) bm
join
    m on m.market_name = bm.market_name
join
    TRAN_TYPE_CD_EXPL tt on tt.tran_type_cd = m.tran_type_cd
left join (
    select b.COMPANY, b.tran_type_cd, b.CURR_MONTH, b.ALL_MNTH
    from    BROKERS b
) v
on v.company = bm.company and v.tran_type_cd = m.tran_type_cd; 
```

视图“bm”（我知道，这是一个很好的首字母缩略词选择！）应该为您提供当月与该公司相关的市场的独特列表。然后我又回到了市场视图，以获取与该市场相关的所有交易类型。和以前一样，如果 Brokers 表中没有匹配的记录，我使用左连接将空行填充为 0。

这是 SQL 小提琴：

[http://sqlfiddle.com/#!4/2f16e/13](http://sqlfiddle.com/#!4/2f16e/13)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T19:59:44.270

不确定您将在哪里获取 all_mnth 的数据，因此您应该先弄清楚这一点。让我们知道，然后加入零值应该很容易。下面是我通过问题 1 的测试查询（类似于@Dan A。我“创建”了一个市场“表”）：

```
with brokers as
(
select 'Broker1' company, 9 tran_type_cd, 1000  curr_mnth, 1500000 all_mnth from dual union
select 'Broker1' company, 3 tran_type_cd, 50000 curr_mnth, 2500000 all_mnth from dual union
select 'Broker1' company, 4 tran_type_cd, 80000 curr_mnth, 8500000 all_mnth from dual union
select 'Broker1' company, 1 tran_type_cd, 35000 curr_mnth, 3500000 all_mnth from dual 
)
, tran_type_cd_expl as
(
select 1  TRAN_TYPE_CD, 'STOCKS_SELL'  TRAN_TYPE_CD_EXPLD from dual union
select 2  TRAN_TYPE_CD, 'STOCKS_BUY'  TRAN_TYPE_CD_EXPLD from dual union
select 3  TRAN_TYPE_CD, 'GOLD_SELL'  TRAN_TYPE_CD_EXPLD from dual union
select 4  TRAN_TYPE_CD, 'GOLD_BUY'  TRAN_TYPE_CD_EXPLD from dual union
select 5  TRAN_TYPE_CD, 'SILVER_SELL'  TRAN_TYPE_CD_EXPLD from dual union
select 6  TRAN_TYPE_CD, 'SILVER_BUY'  TRAN_TYPE_CD_EXPLD from dual union
select 7  TRAN_TYPE_CD, 'COPPER_SELL'  TRAN_TYPE_CD_EXPLD from dual union
select 8  TRAN_TYPE_CD, 'COPPER_BUY'  TRAN_TYPE_CD_EXPLD from dual union
select 9  TRAN_TYPE_CD, 'CURRENCY_SELL'  TRAN_TYPE_CD_EXPLD from dual union
select 10  TRAN_TYPE_CD, 'CURRENCY_BUY'  TRAN_TYPE_CD_EXPLD from dual 
)
, market as
(
select 'CURRENCY_BUY'  tran_type_cd_expld, 'FOREX'       market from dual union
select 'CURRENCY_SELL' tran_type_cd_expld, 'FOREX'       market from dual union
select 'GOLD_BUY'      tran_type_cd_expld, 'CONTRACTS'   market from dual union
select 'GOLD_SELL'     tran_type_cd_expld, 'CONTRACTS'   market from dual union
select 'STOCKS_BUY'    tran_type_cd_expld, 'STOCKMARKET' market from dual union
select 'STOCKS_SELL'   tran_type_cd_expld, 'STOCKMARKET' market from dual 
)

select company, market, t.tran_type_cd_expld tran_type, curr_mnth, all_mnth
from brokers b, tran_type_cd_expl t, market m
where b.tran_type_cd = t.tran_type_cd
and t.tran_type_cd_expld = m.tran_type_cd_expld
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T19:09:26.107

[我相信您可以使用子查询因子](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_10002.htm#i2077142)添加额外的行（如 SQL Server 中的 CTE）。如果您没有得到答案，我可以在今晚晚些时候尝试更新代码。

# javascript - d3 - 标记日历示例

> ID：10179600
> 
> 赞同：3
> 
> 时间：2012-04-16T18:32:34.533
> 
> 标签：javascript, d3.js, calendar, label

我正在使用 d3 构建一个可视化，其中包括日历示例的修改版本：http: [//mbostock.github.com/d3/ex/calendar.html](http://mbostock.github.com/d3/ex/calendar.html)。

![在此处输入图像描述](../Images/9a679e776c54b741972b618234fb0683.png)

通过更改月份路径功能，我将日历旋转了 90 度：

```
function monthPath(t0) {
  var t1 = new Date(t0.getFullYear(), t0.getMonth() + 1, 0),
      d0 = +day(t0), w0 = +week(t0),
      d1 = +day(t1), w1 = +week(t1);
  return "M" + (d0) * z + "," + (w0 + 1) * z
      + "V" + w0 * z 
      + "H" + 7 * z
      + "V" + w1 * z 
      + "H" + (d1 + 1) * z
      + "V" + (w1 + 1) * z 
      + "H" + 0
      + "V" + (w0 + 1) * z 
      + "Z";
} 
```

我想在每个月路径行的开头将月份标记到日历的一侧。所以我从定义月份变量开始：

```
month = d3.time.format("%b"), 
```

我可能错了，但我假设我可以将我的月份变量插入到我的月份路径函数中来打印我的标签？我试图最终得到一个类似于 Nathan Yau 的日历：http: [//flowingdata.com/2012/01/11/vehicles-involved-in-fatal-crashes/](http://flowingdata.com/2012/01/11/vehicles-involved-in-fatal-crashes/)

![在此处输入图像描述](../Images/7861238fb9208ac705db28d648bff4d3.png)

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T23:35:02.820

这应该可以解决问题 -`svg.selectAll("path.month")`在原始示例的块之后插入。

```
 var month_name = d3.time.format("%B")

svg.selectAll("text.month")
    .data(function(d) { return d3.time.months(new Date(d, 0, 1), new Date(d + 1, 0, 1)); })
  .enter().append("text")
    .attr("class", "month")
    .attr("x", function(d) { return week(d) * cellSize; })
    .attr("y", 8 * cellSize)
    .text(month_name); 
```

您还需要修改边距以为标签腾出空间：

```
var margin = {top: 19, right: 20, bottom: 40, left: 19},
    width = 960 - margin.right - margin.left, // width
    height = 156 - margin.top - margin.bottom, // height
    cellSize = 17; // cell size 
```

# jquery - 从 json 对象检查的 jquery 无线电输入

> ID：10179601
> 
> 赞同：2
> 
> 时间：2012-04-16T18:32:55.247
> 
> 标签：jquery, json

对于问题列表，我有三个单选选项：

```
<input type="radio" name="weight--'+index+'" value="not" />
<input type="radio" name="weight--'+index+'" value="somewhat" />
<input type="radio" name="weight--'+index+'" value="very" /> 
```

我有一个具有选定值的对象：

```
{"weight--0":"not","weight--1":"somewhat","weight--2":"very"} 
```

如何将这些选项设置为使用 jquery 选择的？我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:38:33.157

使用`.each()`( [doc](http://api.jquery.com/jQuery.each/) ) 遍历您的对象，然后使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)和`.val()`( [doc](http://api.jquery.com/val/) ) 设置单选按钮的值：

```
$.each(myObject, function(name, value) {
    $('input[name='+name+']').val([value]);
}); 
```

演示：http: [//jsfiddle.net/jtbowden/9wsYK/](http://jsfiddle.net/jtbowden/9wsYK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:36:37.140

您只需要将欲望元素的已选中属性更改为“已选中”。尝试给元素一个 id 或类（名称也可以），它们可以由它们定义，然后使用：

```
 $(/*selector*/).attr('checked', 'checked'); 
```

# javascript - 弹出窗口内的空 DOM

> ID：10179605
> 
> 赞同：1
> 
> 时间：2012-04-16T18:33:04.517
> 
> 标签：javascript, jquery, html, internet-explorer, popup

我有一个必须跨越多个框架的弹出窗口，所以我使用 window.createPopup 来让它工作。（IE6、7 和 8。）

下面是我用来创建弹出窗口的函数：

```
function ShowMyPopup() {
    notificationPopup = window.createPopup();
    $(notificationPopup.document.body).load("/notification.html");
    notificationPopup.show($(sourceFrame.document.body).width() - 510, $(sourceFrame.document.body).height() - (510 - $(sourceFrame.document.body).height()), 500, 500, sourceFrame.document.body);
} 
```

这似乎工作得很好。我应该看到弹出窗口。问题是，无论我做什么，我似乎都无法访问生成的弹出窗口中的任何 DOM 元素。我尝试了各种 jQuery 方法以及直接的 getElementById，并且都返回 NULL。以下是notification.html的内容：

```
<html>
<head>
    <script type="text/javascript">
        $(document).ready(function () {
            alert($(document).html());
            alert($("#divNotification").html());
            alert(document.getElementById("divNotification"));
        });
    </script>
</head>
<body>
    <div id="divNotification" onclick="$(this).toggle();">
        <h3>Some Notification!</h3>
        Testing 1234...
    </div>
</body>
</html> 
```

我看到三个警报，所以我知道 jQuery 正在工作，但所有三个警报都只显示“NULL”。如果我单击生成的 div，onClick 会触发，但会出现“预期对象”错误。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:12:20.860

According to [this reference](http://javascript.gakaa.com/window-createpopup-4-0-5-.aspx), with `window.createPopup()` "scripts must assign content (not an external URL) to the popup object returned by the method".

If you want to assign content with an external URL then you need to use the non-proprietary (cross-browser) method [`window.open()`](http://javascript.gakaa.com/window-open-4-0-5-.aspx).

With `window.open()`, communication between the main window and the popup window can still be performed.

Assuming the popup to be opened with `var myPopup = window.open(...);`, then:

*   Main window addresses popup as `myPopup`
*   Popup addresses main window as `opener`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:37:16.257

Ok. I figured this out. It's pretty counter intuitive.

Basically, I ended up loading all relevant javascript libraries into the source frame. I then must explicitly reference the source frame by its name in order to access these methods.

If any javascript - even javascript *inside* the popup window - wants to access the popup window's DOM, you must fully qualify it (or provide jQuery will the correct root object) for it to work.

For instance, here is my new notification.html:

```
<div id="divNotification" onclick="top.SourceFrame.MakePopupRed();">
    <h3>Some Notification!</h3>
    Testing 1234...
</div> 
```

Now, in my source frame's referenced javascript library:

```
function MakePopupRed() {
    if (notificationPopup) {
        $("#divNotification", notificationPopup.document).css("background-color", "red");
    }
} 
```

**So, basically, it appears that javascript that is run inside a popup created from window.createPopup executes in the context *of the parent window*, rather than the popup window itself!**

# sql - SQL Server 2005 百分比

> ID：10179608
> 
> 赞同：0
> 
> 时间：2012-04-16T18:33:11.860
> 
> 标签：sql, sql-server, sql-server-2005

我使用的是 sql server 2005。我有这些表：

```
CREATE TABLE [dbo].[Proyectos2](
[Id] [int] IDENTITY(1,1) NOT NULL,
[Proyecto] [varchar](255) NULL
)
CREATE TABLE [dbo].[Clientes2](

[Vendedora] [varchar](255) NULL,
[Proyecto] [varchar](255) NULL  )

 insert into proyectos2
values
(
'Proyecto1'
)
insert into proyectos2
values
(
'Proyecto2'
)
insert into clientes2
values
(
'Jessica','Proyecto1'
)
insert into clientes2
values
(
'Jessica','Proyecto1'
)
insert into clientes2
values
(
'Mariel','Proyecto2'
) 
```

然后这个查询：

```
 Declare @Names As Varchar(Max), @strSQL Varchar(Max);
DECLARE @sum AS varchar(MAX);
Select @Names = Stuff((Select ',' + QuoteName(Proyecto)
From Proyectos2 Group By Proyecto Order by Proyecto For XML Path('')), 1, 1, '');
Select @sum = Stuff(
(
Select ', 1.0 * SUM(' + QuoteName(Proyecto) + ') as ' + QuoteName(Proyecto)
From Proyectos2 
Group By Proyecto 
Order by Proyecto For XML Path('')
), 1, 1, '') + ', SUM(Total) as Total';
Set @strSQL = 'select case when grouping(Vendedora) = 1 then ''Grand Total'' else Vendedora end as Vendedora, ' + @sum + N'
from (
Select Vendedora, ' + @Names +  ', (' + REPLACE(@Names, '],[', '] + [') + ') as Total' + 
' From (Select Vendedora, Proyecto From Clientes2) as P 
 Pivot (Count(Proyecto) For Proyecto in (' + @Names + ')) As Pvt
) as S
group by
    Vendedora
    with rollup';
SET @strSQL = 'WITH CTE AS ( ' + @strSQL + ' ) ' +
              'SELECT Vendedora,cast(floor(Proyecto1) as varchar) Proyecto1,cast(floor(Proyecto2) as varchar)Proyecto2,Total FROM CTE UNION ALL ' +
              'SELECT ''Porcentaje'',cast( ' + REPLACE(@Names, '],[', '] / Total as varchar) Proyecto1, cast([') + ' / Total as varchar), ''100''' +
              '  FROM CTE ' +
              ' WHERE Vendedora = ''Grand Total'';';
print @strSQL;
Execute (@strSQL);
GO 
```

如果执行此代码，则会显示：

```
Vendedora------Proyecto1--------------Proyecto2-----Total
Jessica-------------2-------------------0--------------2
Mariel--------------0-------------------1--------------1
Grand Total---------2-------------------1--------------3
Percentage----------0.666666666666------0.333333333333---100 
```

我想要这样的东西：

```
Vendedora------Proyecto1--------------Proyecto2-----Total
Jessica-------------2-------------------0--------------0.66
Mariel--------------0-------------------1--------------0.33
Grand Total---------2-------------------1--------------1
Percentage----------0.66--------------0.33------------------100 
```

也就是说，最后一行的小数点后两位数，以及每行的总数。

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:44:08.050

我这样做了：

```
Declare @Names As Varchar(Max), @strSQL Varchar(Max), @PercentNames varchar(max) ;
DECLARE @sum AS varchar(MAX);

Select @Names = Stuff((Select ',' + QuoteName(Proyecto)
From Proyectos2 Group By Proyecto Order by Proyecto For XML Path('')), 1, 1, '');

Select @PercentNames = Stuff((Select ',' + 'CAST(' + QuoteName(Proyecto)  + '* 100.0/Total AS DECIMAL(10,2))'
From Proyectos2 Group By Proyecto Order by Proyecto For XML Path('')), 1, 1, '');
Select @sum = Stuff(
(
Select ', 1.0 * SUM(' + QuoteName(Proyecto) + ') as ' + QuoteName(Proyecto)
From Proyectos2 
Group By Proyecto 
Order by Proyecto For XML Path('')
), 1, 1, '') + ', SUM(Total) as Total';

Set @strSQL = 'select case when grouping(Vendedora) = 1 then ''Grand Total'' else Vendedora end as Vendedora, ' + @sum + N'
from (
Select Vendedora, ' + @Names +  ', (' + REPLACE(@Names, '],[', '] + [') + ') as Total' + 
' From (Select Vendedora, Proyecto From Clientes2) as P 
 Pivot (Count(Proyecto) For Proyecto in (' + @Names + ')) As Pvt
) as S
group by
    Vendedora
    with rollup';

SET @strSQL = 'WITH CTE AS ( ' + @strSQL + ' ) 
              SELECT *, CAST(Total * 100.0 / (select Total from cte where Vendedora = ''Grand Total'') as Decimal(10,2)) as [Percent]

              FROM CTE UNION ALL 
              SELECT ''Porcentaje'', ' + @PercentNames + ', ''100'', 100' +
              '  FROM CTE ' +
              ' WHERE Vendedora = ''Grand Total'';';

print @strSQL;
Execute (@strSQL);
GO 
```

工作正常。

但我仍然有一个问题：我想删除小数点后的数字。在这种情况下我能做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:35:53.747

将您想要的值乘以百分比（如 0.33）乘以 100.0，然后将其转换为 int 以将值截断为不带小数位的百分比。

```
cast(percentage * 100.0 as int) as percentage 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T19:32:30.397

我专注于您的说法，即您需要每行的总数占最终总数的百分比。

为了做到这一点，您需要在生产每条线之前知道总计是多少。您最好在报告工具中执行此操作，例如 SSRS、ActiveReports 或 Crystal Reports。

但既然你问：这是我会采取的方法：

ETA：重写为更具体。请注意，这仍然是一个示例，需要根据您的情况进行调整。

```
WITH CTE AS ( <@strSQL> ),
     CTE2 AS (
       SELECT Vendedora, 
              cast(floor(Proyecto1) as varchar) Proyecto1,
              cast(floor(Proyecto2) as varchar) Proyecto2,
              Total 
       FROM   CTE),
       SELECT   Vendedora,
              Proyecto1,
              Proyecto2,
              Total / ( SELECT SUM(Total) FROM CTE2 ) Percentage
       FROM     CTE2    
       UNION  ALL
       SELECT 'Porcentaje',
               <your two columns>
               '100'
       FROM   CTE 
```

但这确实很混乱：如果可能的话，最好的选择是只返回数据并在报告工具中进行总计和百分比计算。

# javascript - 如果存在数组元素，则将 true/false 分配给变量的 Javascript 速记方法

> ID：10179612
> 
> 赞同：3
> 
> 时间：2012-04-16T18:33:33.170
> 
> 标签：javascript

如果我的元素存在于关联数组中，我希望我可以将 true / false 分配给变量。

我试过这个——

```
var finalDisExist = stepsArray['stepIDFinal']; 
```

-- 当然，这完全符合您的想法（将对象分配给变量。

但我很确定我以前见过类似的东西，有人能告诉我我错过了什么吗？

谢谢！托德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:36:57.807

也许，最快最好的方法是`stepsArray.hasOwnProperty('stepIDFinal')`.

**注意：**不要使用`'stepIDFinal' in stepsArray`，因为这将检查整个原型链中的“hashmap”对象并检测`toString`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:35:52.047

也许这个？

```
var finalDisExist = !!stepsArray['stepIDFinal']; 
```

第一个否定将所有虚假（如`undefined`and `0`）变为 true，第二个否定将*真实*false - 反之亦然。这意味着如果`stepsArray['stepIDFinal']`等于`null`或`0`，`finalDisExist`将是`false`...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T18:36:23.277

`stepsArray.hasOwnProperty("stepIDFinal")`如果我没记错的话，你会想用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T18:35:47.523

你的意思是

```
var finalDisExist = !!stepsArray['stepIDFinal']; 
```

或者可能

```
var finalDisExist = "undefined" !== typeof stepsArray['stepIDFinal']; 
```

?

# c# - 对 GenericList 进行排序 按日期属性

> ID：10179615
> 
> 赞同：2
> 
> 时间：2012-04-16T18:33:41.880
> 
> 标签：c#, .net, sorting, comparison, generic-list

我不知道该怎么做，这两个问题对我不起作用。一个说我不能使用委托和比较器，另一个说它不能将 lambda 转换为委托。

[排序通用列表](https://stackoverflow.com/questions/2116754/sort-generic-list)

[如何对通用列表进行排序？](https://stackoverflow.com/questions/177373/how-do-i-sort-a-generic-list)

我有一个`GenericList<T>`。`ScheduleItem`每个项目都有一个`PaymentDate`属性，即`DateTime?`.

我基本上想在该属性（旧->新）上对这个列表进行排序。最简单的方法是什么？

首先我尝试了这个：

```
transaction.ScheduleCollection.Sort(delegate(ScheduleItem p1, ScheduleItem p2)
                {
                    return p1.PaymentDate.CompareTo(p2.PaymentDate);
                }); 
```

我得到这两个错误：

> 无法将匿名方法转换为类型“System.Collections.IComparer”，因为它不是委托类型
> 
> “System.Nullable”不包含“CompareTo”的定义，并且找不到接受“System.Nullable”类型的第一个参数的扩展方法“CompareTo”（您是否缺少 using 指令或程序集引用？）

我试过的另一个是这样的：

```
transaction.ScheduleCollection.Sort((lhs, rhs) => (lhs.PaymentDate.CompareTo(rhs.PaymentDate))); 
```

并得到

> 无法将匿名方法转换为类型“System.Collections.IComparer”，因为它不是委托类型

```
public void Sort(IComparer comparer); 
```

这就是我必须使用的排序方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T18:38:10.047

您是否考虑过使用[LINQ](http://msdn.microsoft.com/en-us/library/bb397926.aspx)？

就像是： `var list = list.OrderBy(x => x.PaymentDate).ToList();`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T18:39:02.670

使用 LINQ lambda 函数：

```
var OrderScheduleItem = ScheduleItems.OrderBy(p => p.PaymentDate); 
```

# ajax - 在主干.js 中的@set 为一个属性工作，但不是另一个

> ID：10179618
> 
> 赞同：1
> 
> 时间：2012-04-16T18:33:43.923
> 
> 标签：ajax, ruby-on-rails-3, backbone.js

TL；更新博士：这是一个缺失的 attr_accessible。

我刚开始使用backbone.js，我正在尝试将Ryan Bates 的[抽奖器](http://railscasts.com/episodes/325-backbone-on-rails-part-2)扩展为待办事项列表。

现在，我正试图在项目“完成”时保存它。为了确保它位于代码的工作分支中，我将@set 与我知道正在工作的@set 一起放入。

```
win: ->
    @set(winner: true)
    @set(completed: true)
    @save() 
```

“已完成”属性显示为 true，但当我重置页面时又返回 false。“赢家”属性保持不变。

这是我的视图代码（.jst.echo 格式）：

```
<span class="entry">
<% if @entry.get('completed'): %>
  <input class='is-done' type='checkbox'  checked />
<% else: %>
  <input class='is-done' type='checkbox'  />
<% end %>
<%= @entry.get('name') %>
<%= @entry.score() %>

<% if @entry.get('winner'): %>
  <span class="winner">WINNER</span>
<% end %>
</span> 
```

这是我的 Rails 数据库架构：

```
create_table "entries", :force => true do |t|
  t.string   "name"
  t.boolean  "winner"
  t.datetime "created_at",                    :null => false
  t.datetime "updated_at",                    :null => false
  t.boolean  "completed",  :default => false
end 
```

谢谢你的帮助！

更新：已解决

问题是我没有将“完成”设置为 attr_accessible。请注意，在以下 Put 语句中，虽然“已完成”返回 true，但“条目”哈希中只有“名称”和“获胜者”。

```
Started PUT "/api/entries/2" for 127.0.0.1
Processing by EntriesController#update as JSON
  Parameters: {"entry"=>{"name"=>"There", "winner"=>true}, "completed"=>true, "created_at"=>"2012-04-16T18:04:41Z", "id"=>"2", "name"=>"There", "updated_at"=>"2012-04-16T18:13:04Z", "winner"=>true} 
```

将“完成”设置为 attr_accessible 后，它给出以下内容：

```
Started PUT "/api/entries/2" for 127.0.0.1
Processing by EntriesController#update as JSON
  Parameters: {"entry"=>{"name"=>"There", "winner"=>true, **"complete"=>true**}, "completed"=>true, "created_at"=>"2012-04-16T18:04:41Z", "id"=>"2", "name"=>"There", "updated_at"=>"2012-04-16T18:13:04Z", "winner"=>true} 
```

更重要的是，它有效。

# php - 在回声中回声

> ID：10179620
> 
> 赞同：0
> 
> 时间：2012-04-16T18:33:46.547
> 
> 标签：php

我有以下 2 个回声：

```
<?php echo $data->county; ?> 
```

这个给了我数据库中的“佛罗里达”、“加利福尼亚”等数据

和

```
<?php echo lang(california); ?> 
```

这个给了我一个 lang.php 文件的翻译，例如：

```
'california'   =>   'La californie' 
```

我想将 $data->county 放在 lang 回显中，我尝试了以下操作但没有成功：

```
<?php echo lang(.$data->county.); ?> 
```

有什么错误？是否可以在回声中回声？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:35:36.860

是什么让你认为你需要这些点？就像任何其他参数一样传递它：

```
<?php echo lang($data->county); ?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T18:35:42.770

```
<?php echo lang($data->county); ?> 
```

丢失`.`s，它们用于连接字符串。你只是传递一个字符串变量。

# c - 如何从C中的每一行读取第二个和最后一个单词

> ID：10179622
> 
> 赞同：1
> 
> 时间：2012-04-16T18:33:51.520
> 
> 标签：c

我有一个包含这样数据的文件

{0 /*数据 1* / , 0x00, 0, 0xFF},

{1 / *data2* / , 0x00, 0, 0xFF},

{2 / *data3* / , 0x00, 0, 0xFF},

{3 / *data4* / , 0x00, 0, 0xFF}, ...

我只想打印每行的第二列和最后一列。下面是我处理的代码。它打印整条线。如何编辑以仅打印每行的第二列和最后一列。

```
#include<stdio.h>

#include<conio.h>

int main ()
{       
    char filename[] = "file.txt"; 

    FILE *file = fopen(filename, "r");

    if(file!= NULL)     
    {                           
        char line[128];                 

        while ( fgets( line, sizeof line, file)!= NULL)
        {                                           
            fputs ( line,stdout);                           
        }                                                       
        fclose(file);                           
    }                                               
    else                    
    {                               
        perror(filename);                   
    }                                           

    getch();                    

    return 0;                       
} 
```

请帮忙！

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:31:28.847

[sscanf()](http://crasseux.com/books/ctutorial/sscanf.html)应该可以解决问题。

它使用类似于 printf() 的格式字符串，然后将值读入变量。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    unsigned int a, c, d, e;
    char b[101] = "";
    char filename[] = "file.txt";
    FILE *file = fopen(filename, "r");
    if (file != NULL) {
        char line[128];
        while (fgets(line, sizeof line, file) != NULL) {
            sscanf(line, "{%d %100s , %x, %d, %x}", &a, b, &c, &d, &e);
            printf("%d %X\n", d, e);
        }
        fclose(file);
    } else {
        perror(filename);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:21:00.573

如果您的数据格式如下： {0 /Data1/ , 0x00, 0, 0xFF} 您可以搜索数据行末尾的括号。

示例（不是完整的解决方案）

```
char data[] = "{0 /Data1/ , 0x00, 0, 0xFF},"

//find the back bracket position

int i=0;
while( i < strlen(data) && data[i]!='}')
 i++;

if(i<strlen(data))
 bracketposition = i; 
```

当您找到字长的括号倒带位置（如果不是标准搜索空白）并读取这两个位置之间的值（空白位置和括号位置）

# javadoc - Java：如何将 JDK 类（例如 javax.*）添加到自定义 JavaDoc 索引中？

> ID：10179623
> 
> 赞同：1
> 
> 时间：2012-04-16T18:33:52.233
> 
> 标签：javadoc, java

我正在为一个大项目创建一个聚合的 Javadoc。这是一个 Maven 项目，我正在使用 Maven Javadoc 插件 2.8.1。

我想在索引中有 javax.* 类（即左帧和“所有类”索引）。但即使我将这些添加到@packages，它们也只是链接，不包括在内。

**有没有办法在生成的 Javadoc 中包含 JDK 类？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:48:32.207

您最好的选择可能是在运行 javadoc 插件时将它们包含在[sourcePath中。](http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html#sourcepath)这意味着您必须在 maven 可以读取它们的地方提供 javax.* 源文件。

注意：这将需要永远。这就是我们倾向于链接到现有链接的原因之一。

# c# - 中大型项目的结构

> ID：10179624
> 
> 赞同：2
> 
> 时间：2012-04-16T18:34:00.737
> 
> 标签：c#, class, namespaces

我是初学者程序员，为任何愚蠢道歉。

来自 python 背景创建只有几个类的小项目，我大部分时间都将我的所有代码放在一个文件中。

我最近一直在学习 c#，并且正在编写一个相当大的控制台应用程序（10,000 行以上）。我显然不能将所有内容都放在一个文件中，但我不确定如何将项目分成更小的部分。

到目前为止，我这样做的方式是为我的解决方案中的每个命名空间创建一个新项目，并将每个类相应地拆分为一个单独的文件。到目前为止，我有大约四个命名空间。我已经独立编写了每个命名空间，以期在其他项目中使用每个命名空间。

我现在正处于一个阶段，我想将每个命名空间拼凑起来以构建我的控制台应用程序。我该怎么做呢？

另外，我是否以正确的方式构建我的代码？

另外+ 1，是否可以在项目中使用位于完全不同目录中的文件？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:58:32.643

听起来或多或少在正确的轨道上。解决您的问题/结构：

1）不需要让每个唯一的命名空间都由它自己的项目来表示；如果它有助于组织您的类，您可以（并且可能应该）在同一个项目中拥有多个子命名空间。在您的情况下，听起来每个人都被编程为自己的独立组件，因此每个人的项目都是有意义的。

2）你把每个类分成一个单独的文件很好，继续这样做。

3）不确定您要如何将代码拼凑在一起。您的意思是如何在 Visual Studio 中物理引用/链接项目或最佳实践来编码/访问您的 API？如果是前者，可以右击工程下的“References”项，指向工程（不是其编译好的DLL）。如果是后者，您可以遵循多种编程模式，但通常您希望从项目中抽象出一个不错的 API，这样您就不必担心代码的内部工作。

4）您绝对可以从完全不同的目录中引用文件。只需右键单击项目或文件夹，选择“添加 -> 现有项目”，然后浏览到该文件。您可能希望将其添加为“链接”，因此它不会物理复制文件：http: [//msdn.microsoft.com/en-us/library/9f4t9t92%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/9f4t9t92%28VS.80%29.aspx)

这是另一个涉及可能的解决方案结构的 StackOverflow 问题：[解决方案：每个应用程序或每个应用程序套件](https://stackoverflow.com/questions/200954/solution-per-application-or-per-application-suite)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T19:15:33.530

当您从命名空间开始时，通常会使用您的公司或组织名称（例如，“A”）。如果您有多个产品/项目并且正在为该项目创建代码，您将需要添加一个限定符（例如“B”、“C”等，因此您将拥有 AB、AC 等）。

然后一般的方法是你想在一个相关的命名空间中将类型组合在一起。如果您创建一个类型并且它是针对常见问题的通用/实用程序/一次性解决方案，您将希望将其保留在范围更广的命名空间中。当您发现您正在创建许多类型以支持某些功能或目的时，您可能希望创建一个狭窄的命名空间来包含这些类型。例如，假设您需要为 AB 编写几个数据访问组件，其中包含数据传输对象、数据访问对象等。然后，您可能希望将这些类型放在 ABDataAccess 之类的东西中。

但是，请记住 .NET 使用 OOP 范例。一种 OOP 范式是代码重用。因此，如果您同时访问 AB 和 AC 中的数据，您最好创建可重用的数据访问组件以鼓励在两个项目中重用代码。在这种情况下，您可能希望有一个像 A.Common 这样的项目，其中包含您的任何产品使用的通用类型，其中包含可在 AB、AC 等中使用的通用、通用或抽象概念。

让我试着用这个例子更进一步。

*   项目：A.Common（程序集名称）
*   目的：任何项目的可重用类型
*   命名空间：A、A.DataAccess
*   类型：A.DataAccess.DataAccessObjectBase

* * *

*   项目：AB（装配名称）
*   用途：产品“B”的类型
*   参考文献：A.Common
*   命名空间：A、AB、ABDataAccess
*   类型：ABDataAccess.DataAccessObject（实现 A.DataAccess.DataAccessObjectBase）

* * *

*   项目：AC（组件名称）
*   用途：产品“C”的类型
*   参考文献：A.Common
*   命名空间：A、AC、ACDataAccess
*   类型：ACDataAccess.DataAccessObject（实现 A.DataAccess.DataAccessObjectBase）

这是一个非常简单粗暴的示例，但希望它能帮助您可视化程序集和命名空间之间的关系。

其他一些提示：

*   不要过度创建命名空间，尤其是在创建深层命名空间（例如 ABSomething.SomeMoreStuff.EvenMoreStuff）时，除非它是明智的。这会让你更难找到东西。
*   命名空间应该从更广泛的目的转向更窄的目的。此外，如果您在较窄的命名空间中创建一个类型，该类型严重依赖于较宽命名空间中的内容，请确保将其放在较宽的命名空间下。例如 ABBroader.Narrower。

最后，您应该继续为每个源文件创建一种类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T20:22:03.197

命名空间可帮助您组织代码并提供[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concernsFo)。它也可以通过创建文件夹或单独的项目来完成。通过良好的逻辑分离，您可以构建可维护和可扩展的应用程序。

当您决定是否创建新文件夹或新项目时，您应该依靠常识。例如，为*hello world*应用程序创建多个项目是大材小用。为单个班级创建文件夹也太过分了。但是，当您有多个彼此密切相关的类时，请考虑将此特殊关注点与其他应用程序分开。例如，如果你有`CustomerRepository`，那么你添加`OrderRepository`and `VendorRepository`。突出他们所代表的关注是一个很好的决定。创建`Repositories`文件夹并将所有这些类移到那里。

对于大型应用程序，将业务逻辑、数据访问逻辑和用户界面等关注点分开是很常见的。通常与这些问题相关的类会分到不同的项目中。请记住，这样做是为了使您的代码更易于理解和维护。因此，命名空间应该向您和任何将维护您的应用程序的人描述关注点。例如，您可以使用三个项目：

```
FooCompany.BLL
FooCOmpany.DAL
FooCOmpany.UI 
```

那是业务逻辑层、数据访问层和用户界面的首字母缩略词。没有“标准”名称。你可以使用任何能更好地描述你的代码的东西。这是我通常用于公司 Foo 产品 Bar 的项目结构示例：

```
// Assembly for business logic
Foo.Bar.Domain
Foo.Bar.Domain.Model
Foo.Bar.Domain.Services
Foo.Bar.Domain.Repositories
// Assembly for data access
Foo.Bar.Persistence.NHibernate 
// Assembly for application services
Foo.Bar.Services
// Project for presentation    
Foo.Bar.Presentation.Web
Foo.Bar.Presentation.Web.Controllers
Foo.Bar.Presentation.Web.Views 
```

顺便说一句，以您正在开发的公司名称开头命名空间名称的常见做法。请参阅[命名空间命名指南](http://msdn.microsoft.com/en-us/library/893ke618%28v=vs.71%29.aspx)。当您在不同的命名空间中有两个具有相同名称的类时，这可以避免名称冲突。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T18:44:21.190

我将从最后一个问题开始。您可以使用位于项目中完全不同目录中的文件。我认为你走对了。关于不同的命名空间，您可以使用此代码

```
using System;
using namespace1; 
using namespace2; 
```

# javascript - 如何将参数传递给事件处理程序以使其唯一？

> ID：10179625
> 
> 赞同：1
> 
> 时间：2012-04-16T18:34:10.020
> 
> 标签：javascript, jquery, jquery-mobile

请以这个 jsfiddle 为例。

[http://jsfiddle.net/AFzqt/11/](http://jsfiddle.net/AFzqt/11/)

在我的示例中，我有一个与上面相同的链接，如果您填写第一个框，它将复制第二个框中的值。看代码，看显示。重复代码只是为了让这些框出现两次。好吧...在我真正使用它时，我希望有大约 40 个这样的按钮。

**有没有办法在不复制代码 40 次的情况下做到这一点？** 我是 jquery 的新手，通常使用另一种语言我只会传入参数，但是使用这种语法我不明白我该怎么做？我该如何处理？

随意涉足我的jsfiddle，并希望链接一个新的修订版，目的是将这两个“与上面相同”按钮的处理减少到一个函数中，以条目ID作为参数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:05:07.753

如果将`changeButton`类添加到每个按钮，则选择每个按钮来绑定事件处理程序会更容易：

```
<a href="#" class="changeButton">Same as Above</a> 
```

然后我们可以像这样选择每个元素：

```
$(".changeButton").on("click", function(e) {

    //select the previous jQuery Mobile select widgets, we will use just the previous two
    var $allPrev = $(this).prevAll('.ui-select').find('select');

    //change the value of the immediate previous select widget to the value of the one preceding it
    $($allPrev[0]).val($($allPrev[1]).val()).selectmenu("refresh");

    e.preventDefault();
}); 
```

这是一个演示：http: [//jsfiddle.net/AFzqt/12/](http://jsfiddle.net/AFzqt/12/)

此代码适用于无数按钮，因为它通过使用 HTML 结构的直观知识来工作（每个链接都使用前两个选择小部件，无论链接位于页面上的哪个位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:40:23.297

这样的事情呢？

```
function bind_click(button_id, target_id, origin_id) {
  $(button_id).on("click", function(e) {
    $(target_id).val($(origin_id).val());
    $(target_id).selectmenu("refresh");
    e.preventDefault();
  });
}

$(function() {
  bind_click("#changeButton2", "#entry_20", "#entry_18");
  bind_click("#another", "#entry", "#entry2");
  // More binding declarations
}); 
```

# html-agility-pack - 通过 HtmlAgilityPack 提取

> ID：10179627
> 
> 赞同：1
> 
> 时间：2012-04-16T18:34:11.350
> 
> 标签：html-agility-pack

我正在使用 HtmlAgilityPack 并尝试从 html 中提取图像名称。这是我拥有的 html 字符串：

```
sHtml = "<HTML><HEAD></HEAD><BODY>Here are some images.</br>1) < IMG style='MARGIN-BOTTOM: 20px; MARGIN-LEFT: 20px' align=right src='images/sample001.jpg'>2) < IMG style='MARGIN-BOTTOM: 25px; MARGIN-LEFT: 25px' align=right src='images/sample002.png'></br> And some docs as well.</br>1) href='javascript:parent.POPUP({url:'testDoc001.htm',type:'shared',width:600,height:645})'></br>2) href='javascript:parent.POPUP({url:'testDoc002.html',type:'shared',width:700,height:712})'></br></BODY></HTML>" 
```

在 WPF C# 中，我将此字符串传递给以下例程：

* * *

```
private static List<string> ExtractHtmlInfo(string sHtml)
{
    HtmlDocument doc = new HtmlDocument();
    doc.Load(new StringReader(sHtml));
    HtmlNode root = doc.DocumentNode;

    List<string> anchorTags = new List<string>();

    //foreach (HtmlNode link in root.SelectNodes("//a"))
    foreach (HtmlNode link in root.SelectNodes("//img"))
        {
        string att = link.OuterHtml;
        anchorTags.Add(att);
    }

    return anchorTags;
} 
```

* * *

当我单步执行代码时，我看到该行：

```
string att = link.OuterHtml; 
```

提供整个 < img 节点...这比我想要的要多。

我希望 anchorTags 只有文件的文件夹和名称，如：

```
[0] = images/sample001.jpg
[1] = images/sample002.png 
```

所以，我需要 .OuterHtml 以外的东西，但找不到它。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:42:23.753

您正在寻找`src`图像元素的属性值：

```
foreach (HtmlNode img in root.SelectNodes("//img"))
{
    string att = img.Attributes["src"].Value;
    anchorTags.Add(att);
} 
```

# xamarin.android - UDPClient 未在 HTC G2 上接收数据包

> ID：10179628
> 
> 赞同：0
> 
> 时间：2012-04-16T18:34:12.790
> 
> 标签：xamarin.android

我正在尝试在 Mono for Android 下接收 UDP 广播，但没有看到数据进入。这有点令人困惑，因为它在我拥有的 Galaxy Tab 7 和 Galaxy Tab 10 (Android v 3.2) 上运行良好，但在HTC G2 (Android v2.3.4)。

代码很简单：

```
public void BeginDiscover()
{
    var packet = new DiscoverPacket();

    lock (m_syncRoot)
    {
        var localEndpoint = new IPEndPoint(m_local, 0);
        using (var udp = new UdpClient(localEndpoint))
        {
            var remoteEndpoint = new IPEndPoint(IPAddress.Broadcast, DiscoverPort);
            udp.Send(packet.Data, packet.Data.Length, remoteEndpoint);
            Thread.Sleep(100);
        }
    }
} 
```

我*已*验证清单包含以下行：

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

尽管这发生在 Debug 中，但无论如何都应该隐式设置。

其他非常奇怪的观察：

*   同样，这在另一种类型的设备上工作得很好
*   监听 UDP 广播的处理程序（监听响应的列表）*确实*看到了这个出站数据包。这个监听器的代码也很简单：

[监听代码]

```
private void Start()
{
    m_discoverListener = new UdpClient(DiscoverPort);
    m_discoverListener.BeginReceive(DiscoverCallback, m_discoverListener);
}

private void DiscoverCallback(IAsyncResult result)
{
    try
    {
        var ep = new IPEndPoint(IPAddress.Any, DiscoverPort);
        var data = m_discoverListener.EndReceive(result, ref ep);

        // filter out what we send
        var add = AddressWithoutPort(ep.Address);
        if (add == m_local.ToString()) return;

        // parse discover response
        // [clipped for clarity]
    }
    finally
    {
        m_discoverListener.BeginReceive(DiscoverCallback, m_discoverListener);
    }
} 
```

*   在同一网络上的另一台 PC 上运行的 Wireshark*确实*看到了发现请求数据包（来自上方）
*   “发现”的设备也看到了它，因为 Wireshark 也看到了回复
*   Android 设备 UDP 侦听器**未**收到响应数据包

我能想到的设备之间的唯一主要区别（除了实现该平台的不同 OEM 之外）是 G2 内置了蜂窝无线电，而 Galaxy Tab 没有。但是，在我的特定测试案例中，我的手机中没有 SIM 卡，因此没有建立蜂窝连接。请注意，上面的代码明确使用 WiFi 网络上的本地端点。

G2 上的 UDP 是否存在已知问题，特别是或一般在 Android 平台的较旧实现上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:11:39.590

由于有问题的 UDP 响应来自设备上的微控制器，因此需要做一些工作，我想绝对确定这不是微端的问题（尽管我怀疑不是）。我为微控制器设备创建了一个基于 PC 的模拟器，它处理我的 Android UDP 请求并发送回与微控制器完全相同的 UDP 响应，然后使用 Wireshark 验证所有流量看起来都很好。

最终结果是我看到他与模拟器完全相同的行为。Galaxy Tab 7 和 10 设备接收 UDP 响应没有问题。HTC G2 从来没有。这使我得出结论，以下情况之一是正确的：

a) HTC G2 特别有一个实现错误，阻止它在网络上接收（或至少传递）UDP 广播

或者

b) 较旧的 Android 版本有他的错误。

在我找到与 G2 (v2.3) 具有相同 Android 版本的不同硬件之前，我无法判断是哪种情况。无论哪种情况，这都是一个错误，使这个（以及可能的其他）硬件无法用于我的特定解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T11:11:35.543

我在市场上有几个基于 UDP 通信的应用程序。

我的 HTC 手机无法接收从另一台设备发送的 UDP 广播数据包时遇到问题……如果从同一设备发送，数据包会到达。

所以，我认为问题出在HTC，我在网上找到了一个可能的解决方案（尽管我没有尝试过）：

[http://www.flattermann.net/2010/09/fix-udp-broadcasts-on-htc-phones-running-stock-firmware/](http://www.flattermann.net/2010/09/fix-udp-broadcasts-on-htc-phones-running-stock-firmware/)

# python - TypeError：无法连接“str”和“type”对象

> ID：10179630
> 
> 赞同：7
> 
> 时间：2012-04-16T18:34:21.283
> 
> 标签：python, concatenation

在我解决我的问题之前，我已经四处寻找答案，但似乎找不到任何特定于我的案例的东西。

好的，基本上我通过 cmd 调用我的脚本并传入 16 个参数并使用它们来设置我拥有的一些变量。我正在为我们公司使用创建自定义 html 报告。这些变量我只是用来动态设置我想要的值，它们在 html 字符串中的位置。我得到的错误是：

```
>>> python -u "htmltest.py" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16
Traceback (most recent call last):
File "htmltest.py", line 162, in <module>
<TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-   left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT  VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+C9+"""</FONT></TD>
TypeError: cannot concatenate 'str' and 'type' objects
>>> Exit Code: 1 
```

我已经尝试删除一些变量，如 C9 等以查看它的作用，但它只是前一个错误，所以我假设我必须使变量与我处理字符串的方式相同？

代码是：

```
import sys
import datetime
#for each arg sent we can set each value starting at 2 since 1 is the actual name of  the script

CalFixUsed = sys.argv[1]
StationNumber = sys.argv[2]
Operator = sys.argv[3]
MMCalDueDate = sys.argv[4]
MMEquipID = sys.argv[5]
MBCalDueDate = sys.argv[6]
MeterBoxID = sys.argv[7]
C1 = sys.argv[8]
C2 = sys.argv[9]
C3 = sys.argv[10]
C4 = sys.argv[11]
C5 = sys.argv[12]
C6 = sys.argv[13]
C7 = sys.argv[14]
C8 = sys.argv[15]
C9 = sys.argv[16]

filename = "Daily Verification Test.html" 
today = datetime.date

html = """<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<HTML>
<HEAD>

<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
<TITLE></TITLE>
<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.3  (Win32)">
<META NAME="CREATED" CONTENT="0;0">
<META NAME="CHANGED" CONTENT="0;0">

<STYLE>
    <!-- 
    BODY,DIV,TABLE,THEAD,TBODY,TFOOT,TR,TH,TD,P { font-family:"Arial"; font-   size:x-small }
     -->
</STYLE>

 </HEAD>

<BODY TEXT="#000000">
<TABLE FRAME=VOID CELLSPACING=0 COLS=8 RULES=NONE BORDER=0>
<COLGROUP><COL WIDTH=43><COL WIDTH=65><COL WIDTH=57><COL WIDTH=65><COL WIDTH=81>   <COL WIDTH=65><COL WIDTH=65><COL WIDTH=65></COLGROUP>
<TBODY>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid   #000000; border-left: 1px solid #000000" COLSPAN=3 WIDTH=164 HEIGHT=20 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Calibration Fixture Used:</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 WIDTH=210 ALIGN=CENTER VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">"""+CalFixUsed+"""</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000" WIDTH=65 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Station #:</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-right: 1px solid #000000" WIDTH=65 ALIGN=CENTER VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">"""+StationNumber+"""</FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000" COLSPAN=2 HEIGHT=19 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Operator Name:</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=6 ALIGN=CENTER VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">"""+Operator+"""</FONT></TD>
        </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 HEIGHT=19 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Calibration Due Date</FONT></TD>
        <TD STYLE="border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=2 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Equipment ID #</FONT></TD>
        </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 HEIGHT=20 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Multimeter</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=CENTER VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">"""+MMCalDueDate+"""</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=2 ALIGN=CENTER VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">"""+MMEquipID+"""</FONT></TD>
        </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000" HEIGHT=20 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Meter Box</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=CENTER VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">"""+MBCalDueDate+"""</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=2 ALIGN=CENTER VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">"""+MeterBoxID+"""</FONT></TD>
        </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" HEIGHT=19 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Date:</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=2 ALIGN=CENTER VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">"""+today+"""</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=5 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-left: 1px solid #000000" HEIGHT=19 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-top: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-top: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-top: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-right: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=4 HEIGHT=19 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Contact Resistance Reading</FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Comments:</FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-right: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" HEIGHT=19 ALIGN=CENTER VALIGN=BOTTOM SDVAL="1" SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">1</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+C1+"""</FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-right: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" HEIGHT=19 ALIGN=CENTER VALIGN=BOTTOM SDVAL="2" SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">2</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+C2+"""</FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-right: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" HEIGHT=19 ALIGN=CENTER VALIGN=BOTTOM SDVAL="3" SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">3</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+C3+"""</FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-right: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" HEIGHT=19 ALIGN=CENTER VALIGN=BOTTOM SDVAL="4" SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">4</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+C4+"""</FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-right: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" HEIGHT=19 ALIGN=CENTER VALIGN=BOTTOM SDVAL="5" SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">5</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+C5+"""</FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-right: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" HEIGHT=19 ALIGN=CENTER VALIGN=BOTTOM SDVAL="6" SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">6</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+C6+"""</FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-right: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" HEIGHT=19 ALIGN=CENTER VALIGN=BOTTOM SDVAL="7" SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">7</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+C7+"""</FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-right: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" HEIGHT=19 ALIGN=CENTER VALIGN=BOTTOM SDVAL="8" SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">8</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+C8+"""</FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
        <TD STYLE="border-bottom: 1px solid #000000; border-right: 1px solid #000000" ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"><BR></FONT></TD>
    </TR>
    <TR>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" HEIGHT=19 ALIGN=CENTER VALIGN=BOTTOM SDVAL="9" SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">9</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+C9+"""</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=2 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000">Verification Initials:</FONT></TD>
        <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=2 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;1033;General"><FONT FACE="Calibri" COLOR="#000000"> <BR></FONT></TD>
        </TR>
</TBODY>
</TABLE>
</BODY>

</HTML>
"""
# Create a file object:
# in "write" mode

FILE = open(filename,"w")
# Write all the lines at once:
FILE.write(html)
FILE.close() 
```

有人可以指出我正确的方向来解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:38:17.660

```
today = datetime.date 
```

设置`today`为 type `datetime.date`。很可能，您希望将其设置为 type 的对象`datetime.date`，如下所示：

```
today = datetime.date(2012, 4, 16)
# or, to always get the current day
today = datetime.datetime.now().date() 
```

您还需要从该日期对象生成一个字符串。你可以这样做[`str`](http://docs.python.org/library/functions.html#str)：

```
 """...""" + str(today) + """...""" 
```

如果您想要另一种表示形式，请查看[`datetime.date.isoformat`](http://docs.python.org/library/datetime.html#datetime.date.isoformat)and [`datetime.date.strftime`](http://docs.python.org/library/datetime.html#datetime.date.strftime)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T18:38:43.483

通常，当您尝试添加字符串和非字符串类型时，您会看到此错误。找出该行中有一个可以保存非字符串对象的变量，并在其周围放置“str()”。这会将其转换为字符串并为您连接它们（如果它很简单，例如数字）。

如果它是一个类，您可能需要更深入地挖掘以获取它的字符串表示形式。

例如，将第 163 行更改为：

```
 <TD STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" COLSPAN=3 ALIGN=LEFT VALIGN=BOTTOM SDNUM="1033;0;0.000000"><FONT FACE="Calibri" COLOR="#000000">"""+str(C9)+"""</FONT></TD> 
```

您可能也需要对所有“Cx”行执行此操作。

# asp.net - 是否有等效于 SortedList(of string, string) 的接受非唯一键

> ID：10179632
> 
> 赞同：1
> 
> 时间：2012-04-16T18:34:36.373
> 
> 标签：asp.net, vb.net

我需要的是能够将两个非唯一字段的组合放入 SortedList 中，但该对是（如数据库复合键）。

更准确地说，我有我的清单，我希望能够用它来做到这一点

```
Dim myList = New Generic.SortedList(Of String, String)
myList.add("aaa","aaa")
myList.add("aaa","bbb")
myList.add("bbb","bbb")
myList.add("bbb","aaa") 
```

这将引发异常，因为“已存在具有相同键的条目”

我知道我可以制作自己的对象和该对象的列表，但是我想做的事情已经存在了吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:29:22.020

您可以使用[Lookup](http://msdn.microsoft.com/en-us/library/bb460184.aspx)类。Jon Skeet 在这个问题上提供了一个很好的答案。[c#.NET字典中的重复键？](https://stackoverflow.com/a/146227/1028323)

例如，您首先必须将它们存储在可枚举对象`IEnumerable(Of (Tuple(Of String,String))`中）

```
 Dim compositeKeys = New List(Of Tuple(Of String, String))
        compositeKeys.Add(New Tuple(Of String, String)("aaa", "aaa"))
        compositeKeys.Add(New Tuple(Of String, String)("aaa", "bbb"))
        compositeKeys.Add(New Tuple(Of String, String)("bbb", "aaa"))
        compositeKeys.Add(New Tuple(Of String, String)("bbb", "bbb"))

        Dim lookup = compositeKeys.ToLookup(Function(x) x.Item1)
        Dim aaaKeys = lookup("aaa") // 2 hits 
```

对于特定的查找，总是有`LINQ`

```
Dim specificLookup = lookup("aaa").Where(Function(x) x.Item2 = "bbb").FirstOrDefault 
```

# jquery - 仅使用 asp.net mvc 和 css 和 jquery 创建扩展器/面板栏控件

> ID：10179634
> 
> 赞同：0
> 
> 时间：2012-04-16T18:34:50.627
> 
> 标签：jquery, asp.net, asp.net-mvc, expander, radpanelbar

如何创建这样的控件：[http ://www.telerik.com/products/aspnet-mvc/panelbar.aspx](http://www.telerik.com/products/aspnet-mvc/panelbar.aspx)

在带有纯 css 和 jquery 的 asp.net mvc 中？

我尝试的第一个方法是使用

```
<ul>
  <li></li>
  <li></li>
  <li></li>
</ul> 
```

但是 ul-tag 不能有文本，那么我怎样才能给我的子元素一个带有文本的标题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:55:41.257

您可以从中获得灵感的[jQuery UI 手风琴](http://jqueryui.com/demos/accordion/)控件。标记如下所示：

```
<div id="accordion">
    <h3><a href="#">First header</a></h3>
    <div>First content</div>
    <h3><a href="#">Second header</a></h3>
    <div>Second content</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:56:35.000

试试这个：（它最初是用于移动应用程序，但我确信有一些 css 更改，您可以自定义外观/感觉）

[关联](http://jquerymobile.com/demos/1.0/docs/content/content-collapsible-set.html)

# python - 引用继承的类函数

> ID：10179637
> 
> 赞同：1
> 
> 时间：2012-04-16T18:34:53.330
> 
> 标签：python, multithreading, inheritance, berkeley-db

我继承自 threading.Thread 和 bdb.Bdb。线程需要一个 run 函数来调用 start 函数，我需要使用 Bdb.run 函数。由于无法使用 self.run 来引用 Bdb 的 run 函数，如何引用它？我试过超级，但我显然没有使用正确，我得到 TypeError：必须是类型，而不是 classobj。

```
import sys
import os
import multiprocessing
import threading
import bdb

from bdb import Bdb
from threading import Thread

from el_tree_o import ElTreeO, _RUNNING, _PAUSED, _WAITING
from pysignal import Signal

class CommandExec(Thread, Bdb):
    '''
    Command Exec is an implementation of the Bdb python class with is a base
    debugger.  This will give the user the ability to pause scripts when needed
    and see script progress through line numbers.  Useful for command and
    control scripts.
    '''

    def __init__(self, mainFile, skip=None):
        Bdb.__init__(self,skip=skip)
        Thread.__init__(self)

        # need to define botframe to protect against an error
        # generated in bdb.py when set_quit is called before
        # self.botframe is defined
        self.botframe = None

        # self.even is used to pause execution
        self.event = threading.Event()

        # used so I know when to start debugging
        self.mainFile = mainFile
        self.start_debug = 0

        # used to run a file
        self.statement = ""

    def run(self):
        self.event.clear()
        self.set_step()
        super(bdb.Bdb,self).run(self.statement) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:38:28.693

正如您`__init__`在第 22 行调用 Bdb 的方法一样，您可以调用它的 run 方法：

```
Bdb.run(self, self.statement) 
```

`super`仅当您不知道接下来需要调用哪个父类并且想让 Python 的继承机制为您解决问题时才有用。在这里，您确切地知道要调用哪个函数`Bdb.run`，所以只需调用它即可。

# ios - 版本控制服务器设置

> ID：10179640
> 
> 赞同：0
> 
> 时间：2012-04-16T18:34:58.727
> 
> 标签：ios

我是编程新手，想设置某种版本控制。我不确定这一切是如何运作的。

我在想我需要设置一些远程服务器来签入和签出代码，这样如果我的计算机发生问题，我就不会丢失代码。

我不明白的是那里是否有网站为存储库提供免费托管，或者它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:44:03.563

看看[github.com](http://github.com)。你可以有免费的 git（著名的版本控制系统）托管多达 300MB（我认为是 300）的源代码。我认为 github 还支付了帐户，您可以在其中拥有私有/非公共可见的存储库。

也许还可以看看[bitbucket.org](http://bitbucket.org)。

我做什么：我在自己的服务器上使用[gitosis 。](https://wiki.archlinux.org/index.php/Gitosis)使用 gitosis，您可以构建自己的 git 远程（服务器）。但是这个解决方案需要一个根服务器，费用约为 70UDS/月。使用您自己的服务器，您是独立的，您不必将代码放在其他服务器上。

# c# - 确定 ExpandoObject 中的对象类型

> ID：10179641
> 
> 赞同：2
> 
> 时间：2012-04-16T18:34:59.800
> 
> 标签：c#, .net, xml, expandoobject

我已经派生了一个类，该类将采用 XML 文件并动态生成 ExpandoObject，以利用 ExpandoObjects 列表和递归传递的 XML。

将其传回以进行处理以检索数据是可行的，但是我从遗留系统中检索的 XML 是不一致的。我可以这样取回单个节点

```
<test>
 <insured>
  <a>BLAH BLAH BLAH</a>
  <b>BLAH BLAH BLAH</b>
  <c>BLAH BLAH BLAH</c>
 </insured>
</test> 
```

或者

```
<test>
 <insured>
  <a>BLAH BLAH BLAH</a>
  <b>BLAH BLAH BLAH</b>
  <c>BLAH BLAH BLAH</c>
 </insured>
 <insured>
  <a>BLAH BLAH BLAH</a>
  <b>BLAH BLAH BLAH</b>
  <c>BLAH BLAH BLAH</c>
 </insured>
 <insured>
  <a>BLAH BLAH BLAH</a>
  <b>BLAH BLAH BLAH</b>
  <c>BLAH BLAH BLAH</c>
 </insured>
</test> 
```

因此，对于关键的“被保险人”，我要么得到`ExpandoObject`要么`List<ExpandoObject>`。我正在尝试确定最简单的解决方案来确定返回的类型。

理想情况下，只是`x.insured.OfType<List<ExpandoObject>>()`返回一个布尔值或类似性质的东西。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:19:24.460

看起来您可能已经在 J​​on Skeet 的帮助下解决了这个问题，但如果您想知道，您可以使用`is`运算符：

```
if(x.insured is List<ExpandoObject>) {
    foreach(dynamic item in x.insured) {
        DoSomething(item);
    }
} else {
    DoSomething(x.insured);
} 
```

# mysql - 获取 MySQL 中每个组的 top-k

> ID：10179649
> 
> 赞同：1
> 
> 时间：2012-04-16T18:35:14.063
> 
> 标签：mysql

我省略了最后一步之前的步骤。我得到这样的表：`year, month, postid, clicks`。我如何获得`postid`每个`year, month`组的前 k 名？

例如，我有数据：

```
2012,1,a,5
2012,1,b,3
2012,1,c,8
2012,2,a,2
2012,2,c,5
2012,2,d,6 
```

假设`k=2`，我想要这样的结果：

```
2012,1,c,8
2012,1,a,5
2012,2,d,6
2012,2,c,5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:45:25.443

试试这个：

```
select postid, clicks,
    @num := if(@year = @year and @month = month, @num + 1, 1) row_number,
    @year := year year, @month := month month
from (
    select * from t
    order by year, month, clicks desc
) s, (select @num := 0, @year := '', @month := '') init
group by year, month, postid, clicks
having row_number <= 2
order by year, month, clicks desc 
```

[在这里](http://sqlfiddle.com/#!2/1fdbb/1)提琴

# unit-testing - 测试重定向 CakePHP 2.0

> ID：10179650
> 
> 赞同：4
> 
> 时间：2012-04-16T18:35:17.273
> 
> 标签：unit-testing, cakephp, testing, redirect, cakephp-2.0

我一直在看食谱上的一些例子，但我不明白： [http ://book.cakephp.org/2.0/en/development/testing.html#a-more-complex-example](http://book.cakephp.org/2.0/en/development/testing.html#a-more-complex-example)

如何在像这样的删除操作中测试重定向？

```
public function delete($id = null){         
        $this->Comment->id = $id;
        if (!$this->Comment->exists()) {
            throw new NotFoundException(__('Invalid comment'));
        }
        if ($this->Comment->delete()) {         
            $this->Session->setFlash(__('Comment deleted'));
            return $this->redirect(array('controller' => 'posts', 'action' => 'view', $idPost));
        }
        $this->Session->setFlash(__('Comment was not deleted'));
        return $this->redirect(array('controller' => 'posts', 'action' => 'view', $idPost));        
    }
} 
```

重定向调用后测试停止，因此它甚至不打印此回显：

```
public function testDelete(){       
    $result = $this->testAction("/comments/delete/1");
    echo "this is not printed";
    print_r($this->headers);        
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T14:46:32.853

测试您的删除操作应该与测试任何其他操作相对相同。您的测试用例可能看起来像这样。

```
// notice it extends ControllerTestCase
class PostsControllerTest extends ControllerTestCase {

    function testDelete() {
      $this->testAction('/posts/delete/1');
      $results = $this->headers['Location'];
      // your OP code redirected them to a view, which I assume is wrong
      // because the item would be deleted
      $expected = '/posts/index';
      // check redirect
      $this->assertEquals($results, $expected);

      // check that it was deleted
      $this->Posts->Post->id = 1;
      $this->assertFalse($this->Posts->Post->exists());
    }

} 
```

当然，这只是检查显而易见的。您还可以检查会话并编写预期异常的测试。如果它仍然没有达到测试用例的结尾或继续，**则其他事情正在发生**。

您可以使用`generate`on 方法生成简单的模拟`ControllerTestCase`。

```
function testDelete() {
  $Posts = $this->generate('Posts', array(
    'components' => array(
      'Email' => array('send'),
      'Session'
    )
  ));
  // set ControllerTestCase to use this mock
  $this->controller = $Posts;

  $this->testAction('/posts/some_action_that_sends_email');
} 
```

以上将首先生成 PostsController 的模拟以在测试期间使用。它还`send()`模拟了 EmailComponent 和整个 SessionComponent 上的方法。

有关模拟的更多信息：[http ://www.phpunit.de/manual/3.0/en/mock-objects.html](http://www.phpunit.de/manual/3.0/en/mock-objects.html)

有关更多信息`generate()`：[http ://book.cakephp.org/2.0/en/development/testing.html#using-mocks-with-testaction](http://book.cakephp.org/2.0/en/development/testing.html#using-mocks-with-testaction)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T04:38:30.317

可能你有一个错误，因为`$idPost`未定义。

我会写这样的东西：

```
public function delete($id = null){         
        $this->Comment->id = $id;
        if (!$this->Comment->exists()) {
            throw new NotFoundException(__('Invalid comment'));
        }
        if ($this->Comment->delete()) {         
            $this->Session->setFlash(__('Comment deleted'));
        } else {
            $this->Session->setFlash(__('Comment was not deleted'));
        }
        $this->redirect(array('controller' => 'posts', 'action' => 'view', $id));        
    }
} 
```

并测试它是这样的：

```
public function testDeleteWithSuccess() {
        $Controller = $this->generate('Comments', array(
            'components' => array(
                'Session'
            ),
            'models' => array(
                'Comment' => array('exists')
            )
        ));

        $Controller->Comment->expects($this->once())
            ->method('exists')
            ->will($this->returnValue(true));

        $Controller->Session->expects($this->once())
            ->method('setFlash')
            ->with('Comment deleted');

        $this->testAction("/comments/delete/ID");

        $this->assertEquals($this->headers['Location'], 'http://'. $_SERVER['HTTP_HOST'] . '/posts/view/ID');
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:39:40.813

永远不会打印回声，您的函数“删除”总是在结束前调用重定向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:15:42.697

```
public function delete($id = null){         
    $this->Comment->id = $id;
    if (!$this->Comment->exists()) {
        throw new NotFoundException(__('Invalid comment'));
    }
    if ($this->Comment->delete()) {         
        $this->Session->setFlash(__('Comment deleted'));
    } else {
        $this->Session->setFlash(__('Comment was not deleted'));
    }
    $this->redirect(array('controller' => 'posts', 'action' => 'view', $id));        
} 
```

}

Plenix，这不是完全错误的吗？您正在删除评论并将评论的 id 传递给帖子的视图控制器？那么，您是在查看帖子或评论吗？还有什么建议吗？

# c - 如何在程序执行之间使用相同的信号量？

> ID：10179651
> 
> 赞同：0
> 
> 时间：2012-04-16T18:35:21.333
> 
> 标签：c

我有一个简单的程序，它只使用一个进程（每次执行时），创建一个带有文件名（`ftok()`函数）键的信号量，然后将一行写入文件。问题是，信号量（在本例中为 2）必须做两件事情：一件必须保证不超过两个程序同时写入，另一件必须验证最多只写入 10 行文件。因此，如果我执行程序并且文件已经有 10 行文本，它不会向其中写入任何内容。

这是我的代码：

```
#include "semaphores.h"

int main() {
    int semaphoreLines = create_semaphore(ftok("Ex5.c", 0), 10);
    int semaphoreWrite = create_semaphore(ftok("Ex5.c", 1), 1);
    FILE *file;

    int ret_val = down(semaphoreLines, 1);
    if(ret_val != 0) {
        printf("No more lines can be written to the file!\n");
        exit(-1);
    }

    down(semaphoreWrite, 1);
    file = fopen("Ex5.txt", "a");
    fprintf(file, "This is process %d\n", getpid());
    fclose(file);
    up(semaphoreWrite, 1);
    return 0;
} 
```

当我第一次执行它时，`semaphoreLines`转到 9（按预期），将其锁定`semaphoreWrite`为 0（因此没有其他进程可以写入文件），然后写入并将后者释放回 1。进程终止。我手动告诉它在终端中再次运行。但是，`semaphoreLines`应该是 9，所以当我`down()`使用它时，它会变为 8，依此类推。问题是，它又在 10 点恢复。我不想要这个。

也许是因为我对信号量编程还很陌生，但我认为如果信号量不是用 0 键创建的，它们就是公共的。使用`ftok()`，我希望它是公开的，这样如果我再次运行程序，它会尽可能减少它并写入，如果不是，它会显示错误代码并终止。我的意思是，信号量没有被删除，所以程序第二次执行时它应该看到信号量值是 9，对吧...？

我真的不想分叉 10 个进程并让它们在同一个程序中一个一个地写入文件......或者这是唯一的方法吗？

PS 该`create_semaphore()`函数是我的`semaphores.h`头文件的一部分，其中包含我编写的 4 个简单函数，因此使用信号量更容易，而不是每次我想使用它们时都运行所有 semget、semop 和 semctl 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T13:40:30.397

> 问题是，它又在 10 点恢复。我不想要这个。

如果你不想这样做，那就不要这样做。您自己将信号量值设置为 10 in `create_semaphore()`。相反，除了 IPC_CREAT 之外，将 IPC_EXCL 传递给`semget()`，如果这会产生 errno EEXIST，则只需从返回`create_semaphore()`并跳过`semctl(SETVAL)`.

# linker - 如何解析 dyld 导入的符号？

> ID：10179652
> 
> 赞同：2
> 
> 时间：2012-04-16T18:35:22.213
> 
> 标签：linker, objective-c-runtime, mach-o, dyld, otool

我正在尝试实现 dyld 所做的某些部分，但我有点卡在 stub trampolines 上。

考虑以下 ARM 指令：

```
BL  0x2fec 
```

它通过链接（子过程调用）分支到 0x2fec。我知道这样一个事实，在 __TEXT 段中有一个 __symbolstub1 部分从 0x2fd8 开始，所以它是 __symbolstub1 内部的 20 个字节的跳转。

现在有一个符号

```
(undefined) external _objc_autoreleasePoolPush (from libobjc) 
```

我已经通过 LC_SYMTAB 加载命令解决了。没有提供已知地址。事实上，我知道 0x2fec 地址是 _objc_autoreleasePoolPush 的蹦床，但我无法通过任何方式证明这一点。

我检查了 LC_DYLD_INFO_ONLY 命令，在我发现的lazy_bind 符号中，我有一点提示：

```
{:offset=>20, :segment=>2, :library=>6, :flags=>[], :name=>"_objc_autoreleasePoolPush"} 
```

其中名称和偏移量与我所拥有的完全匹配，并且库#6 是“/usr/lib/libobjc.A.dylib”，这也是完美的。现在的问题是段#2 是__TEXT，但__TEXT 从0x1000 开始，而__symbolstub1 在0x2fd8 处。所以我错过了一些参考。

关于我应该如何将 0x2fec 虚拟地址映射到 _objc_autoreleasePoolPush 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:16:10.197

嘿，再挖一点，我在 LC_DYSYMTAB 的间接符号中找到了它。

现在长答案。

1.  查找给定地址的部分；
2.  *该部分的类型*应为S_NON_LAZY_SYMBOL_POINTERS、S_LAZY_SYMBOL_POINTERS、S_LAZY_DYLIB_SYMBOL_POINTERS、S_THREAD_LOCAL_VARIABLE_POINTERS 或 S_SYMBOL_STUBS；
3.  如果节类型为 S_SYMBOL_STUBS，则字节大小存储在*reserved2*中，否则认为等于 4；
4.  间接符号表的偏移量存储在*reserved1*中；
5.  间接符号表的索引计算为

    索引 = sect.reserved1 + (vmaddr - sect.addr) / 字节大小；

6.  符号表中的符号位于符号[indirect_symbols[index]]。

# curl - 使用 PHP 捕获包含 JavaScript 的网站内容

> ID：10179653
> 
> 赞同：0
> 
> 时间：2012-04-16T18:35:23.997
> 
> 标签：curl, web-crawler, web-scraping

我使用 cURL 进行所有网络抓取，但我的新项目有一个问题。我想从一个由 JS 加载的网站获取图片，所以 cURL 无法帮助我，我想。那么有什么想法如何用 PHP 抓取图片吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:50:50.547

目前尚不清楚您*到底*需要什么，所以我会回答这两个可能的问题。

1）如果*下载*图像是问题，那么[这个stack-o问题](https://stackoverflow.com/questions/1898711/use-curl-to-download-indirect-image-file)看起来很有用。

2) 如果*确定 URI*等是问题，那么一种简单的方法是使用任何主流浏览器中可用的“检查”面板，您可以从中查看如何检索页面的每个部分。来自 scrapy 框架的[这篇博文将提供一些有用的信息。](http://blog.scrapy.org/scraping-ajax-sites-with-scrapy)

# c# - Jquery类及其功能

> ID：10179657
> 
> 赞同：0
> 
> 时间：2012-04-16T18:35:41.240
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我正在 asp.net 中开发讨论面板，其中我正在通过 javascripts 绘制一些跨度

> `$("#commenttr").after("<tr id="+i+"><td class=\"labelPortion\"></td><td class=\"controlPortion\">" +out[i]+ "</td><td><span style = \"cursor:pointer\" class = \"plblAgreeComment\" id = \"" + ids[i+1] + "\"> Vote Up </span> <span style = \"cursor:pointer\" class = \"plblDisAgreeComment\" id = \"" + ids[i+1] +"\">Vote Down </span><span id = \"ptxtAgreeComment\" >"+ agrees[i+1] + " </span></td></tr>");`

但是当我调用 jquery 函数时

```
$(".plblAgreeComment").click(function(){
    alert("hi");
} 
```

它不工作。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:37:16.537

### 描述

您需要 jQuery`.live()`或`.on()`方法将事件绑定到动态创建的 html。

选择`.live()`或`.on()`取决于您使用的 jQuery 版本。

> **.live()**从 jQuery 1.3 开始可用。为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。
> 
> **.on()**从 jQuery 1.7 开始可用。将一个或多个事件的事件处理函数附加到选定元素。

### 样本

```
$(".plblAgreeComment").live('click', function(){
     alert("hi");
});

$(".plblAgreeComment").on('click', function(){
     alert("hi");
}); 
```

### 更多信息

*   [jQuery.live()](http://api.jquery.com/live/)
*   [jQuery.on()](http://api.jquery.com/on/)

## 更新：[jsFiddle 演示](http://jsfiddle.net/zqj9k/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:38:11.827

使用 jQuery `on`，因为您将这些项目动态添加到 DOM

```
 $(function(){
    $("body").on("click",".plblAgreeComment",click(function(){
            alert("hi");
    });
  }); 
```

`on`将适用于当前元素和未来元素。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

`on`从 jQuery 1.7 开始可用，如果你使用的是旧版本的 jQuery，你应该检查`live` [http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:38:35.763

尝试使用`.on`以下语法，

```
$(document).on('click', '.plblAgreeComment', function(){
    alert("hi");
}); 
```

在上面的代码中，使用表格选择器而不是文档选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T18:40:17.353

两件事.. 为您的行生成 html 时，您可能在类名中有一个额外的字符。

```
class = \"plblAgreeCom 
```

也许应该是：

```
class =\"plblAgreeCom 
```

或者您在修改 DOM 之前附加点击处理程序，在这种情况下：

```
 $(".plblAgreeComment").click(function(){
        alert("hi");
} 
```

应该：

```
 $(".plblAgreeComment").live("click", function(){
        alert("hi");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T18:42:33.497

如果要将事件绑定到动态注入的 DOM 元素，则需要使用该`on`方法，以便将任何新元素绑定到该事件侦听器：

```
 $(".plblAgreeComment").on("click", function(){
    alert("hi");
 } 
```

注意：还有其他方法，例如`live()`可以达到类似效果的方法，但它们已被弃用，取而代之的是`on`，它可以处理每种情况下的这种情况。

# mysql - 使用 group by 的复杂 MySQL 查询

> ID：10179658
> 
> 赞同：0
> 
> 时间：2012-04-16T18:35:41.563
> 
> 标签：mysql

假设我有两张桌子

```
Table1:
product_id, design1, design2
1              A        C
2              B        A

Table2:
product_id, value
1             10
2             10 
```

现在我想总结所有产品特定设计的所有价值。

```
SELECT designA, SUM(value) FROM ( 
 SELECT b.design1 AS designA, SUM(value) AS value FROM table2 AS a LEFT JOIN table1 AS b ON a.product_id = b.product_id GROUP BY b.design1) AS T GROUP BY designA

It gives me this:
designA SUM(value)
  A           10
  B           10 
```

现在的问题是，如果用户在 table1 中指定了 design2，那么 design1 的值将自动添加到 design2 中。如果 design2 不存在 design1 列，那么它将是一个新的结果行：

期望的结果是这样的：

```
designA SUM(value)
  A            20
  B            10
  C            10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:56:40.427

```
select y.designA, sum(value) from 

(select  a.design1 as designA, value from
Table1 as a
inner join Table2 as b
on
a.product_id = b.product_id

union all

select a.design2 as designA, value from
Table1 as a
inner join Table2 as b
on
a.product_id = b.product_id) as y 
group by y.designA 
```

似乎适用于您的测试数据，没有尝试过其他配置，但如果您了解它在做什么，您应该能够对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:43:26.047

基于设计2的比赛中的UNION：

```
SELECT designA, SUM(value) FROM ( 
 SELECT b.design1 AS designA, SUM(value) AS value FROM table2 AS a LEFT JOIN table1 AS b ON a.product_id = b.product_id GROUP BY b.design1
UNION
 SELECT b.design2 AS designA, SUM(value) AS value FROM table2 AS a LEFT JOIN table1 AS b ON a.product_id = b.product_id GROUP BY b.design2
) AS T GROUP BY designA 
```

# wso2 - 通过 WSO2 ESB 访问 WSO2 数据服务服务

> ID：10179661
> 
> 赞同：4
> 
> 时间：2012-04-16T18:35:45.077
> 
> 标签：wso2

我创建了一个接受 ProductID 值并返回数据的服务（产品）。我有此服务的 SOAP 和 HTTP 请求和响应。我可以通过执行类似 h**p://localhost:9763/services/Products.HTTPEndpoint/ProductID/123456 来返回数据来访问它。

我怎么能做同样的事情，但要通过 ESB？我尝试设置一个简单的直通代理，但是当我使用“TryIt”时，我只能选择“调解”。

有任何想法吗？

谢谢，贾里德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:19:46.237

您应该使用适当的 WDSDL 作为代理服务的发布 WSDL 来“尝试”代理服务。
因此，您可以做的是，获取实际数据服务的 WSDL 并将其用作代理的发布 wsdl。然后你可以使用 tryit 来调用 DS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T19:33:48.950

我最终能够做到这一点：

WSO2 数据服务服务器服务：

```
http://localhost:9763/services/Products 
```

WSO2 ESB 端点：

```
Name: epProducts
Address: http://localhost:9763/services/Products.HTTPEndpoint
Format: GET 
```

WSO2 ESB 代理服务：

```
Service Name: ProductsProxy
Publishing WSDL: None
Define In Sequence:  None
Define Endpoint:  epProducts
Define Out Sequence: None
Define Fault Sequence: None 
```

发送 GET 请求到：

```
http://localhost:9763/services/Products.HTTPEndpoint/ProductID/123456 
```

# javascript - 处理 IE7-8 特定 Javascript CSS 错误的好资源

> ID：10179665
> 
> 赞同：0
> 
> 时间：2012-04-16T18:35:51.150
> 
> 标签：javascript, jquery, internet-explorer

经过一周的编码后，我的网站终于可以在所有浏览器和移动设备上运行。我犯了一个错误，直到现在才在 IE8 和 IE 7 中查看。

任何人都可以分享一些在使用 jQuery 和 CSS 时解决 IE7-8 兼容性问题的步骤吗？

有哪些第一步可以尝试？

如果站点不是太复杂，那么进行服务器端检测并提供仅 IE 站点是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:43:28.503

jQuery 中应该几乎没有问题——这是首先使用 jQuery 或类似库的一大好处。如果存在 js 问题，则可能是您编写的内容，而不是 jQuery 内部的内容。

在这两种情况下，要做的事情就是简单地了解支持不同的大部分重大事项。Quirksmode.org 兼容性表对此很有帮助。如果您首先知道差异，您将能够在进行测试之前预先创建解决方案并避免问题。在这个过程的早期进行跨浏览器测试——而不是在最后一刻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:20:06.533

取决于你遇到什么问题。网络上有很多资源，例如[PositionIsEverything](http://www.positioniseverything.net/explorer.html)或[HasLayout](http://haslayout.net/css/)，抱怨和解释不同的 IE 错误（peekaboo、双边距等）。

使用[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)等工具在实际 IE 版本上查看您的页面非常有用。

# ruby-on-rails - 用于了解所有数组元素是否针对特定方法返回 true 的语法糖？

> ID：10179670
> 
> 赞同：3
> 
> 时间：2012-04-16T18:36:03.233
> 
> 标签：ruby-on-rails, ruby, arrays

在我的 Ruby 程序中，我有一个由五个字符串组成的数组，我想检查该数组的每个元素是否符合给定的要求，例如：

```
a = ['', '', '', '']
a.inject(:blank?) # Will return true if (and only if) all elements of a are blank 
```

我问这个问题是因为 Ruby 有一个相当大的标准 API 和很多预先编写的语法糖，我想知道并且不想重新发明。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T18:44:08.523

有一个非常简洁的方法：

```
array.all? &:blank? 
```

学习[`Enumerable`](http://ruby-doc.org/core-1.9.3/Enumerable.html)并学习如何使用[`Enumerator`s](http://www.ruby-doc.org/core-1.9.3/Enumerator.html)，你很快就会说最令人愉快的 Ruby 方言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:41:20.753

只是另一种方式：如果您有 String#to_proc （搜索它，因为我不会发布我自己的存放网站以防被视为广告），您可以使用类似的方式：

`a.inject(&'&& $1.blank?')`

这相当于

```
a.inject{ |sum,i|
  sum && i.blank?
} 
```

# ios - 故事板的加载顺序

> ID：10179675
> 
> 赞同：0
> 
> 时间：2012-04-16T18:36:17.303
> 
> 标签：ios, view, window, storyboard, subview

我对 iOs 编程很陌生..

目前我想知道以下问题。在函数 didFinishLaunchingWithOptions:(...) 中的 AppDelegate.m 中，我试图沿着可视化树向下走（注意：mainstoryboard 有一个 TabBarController，并且在初始视图上有一个按钮。

```
UIView *sv;
sv=[window subviews];
for(sv in mwSubViews){
NSLog(@"Subview's %d Description : %@ \n",i++,[sv description]);  
NSLog(@"Views Bounds: %@  :\n",sv.bounds);
NSLog(@"Views Frame: %@  :\n",sv.frame); 
```

}

我正在使用一个带有一些东西的故事板。当我在控制故事板中的元素的 ViewController 中执行此操作时，它的输出是

ViewsAnimationTouchDrawing[59046:f803] Subview's 0 Description : > 2012-04-16 20:32:48.362 ViewsAnimationTouchDrawing[59046:f803] Views Bounds: (null) : 2012-04-16 20:32:48.363 ViewsAnimationTouchDrawing[59046:f80TouchDrawing]视图框架：（空）：

可以这么好解释我，为什么？（我认为窗口已经初始化并且上面有一个 UIView ..）

**更新

我目前正在阅读一本关于 Window View Hierarchy 的书。作者说通常有一个 UIWindow 类的实例。UIApplication 的委托持有对它的引用。我在我的应用程序中使用了一些 .xib 文件。如果我从 xib 文件手动加载窗口，在委托中将其分配给窗口引用，我可以使用以下命令获取对窗口的引用

```
UIWindow *mw = [[UIApplication sharedApplication] keyWindow]; 
```

我可以使用 Function 沿着可视化树向下走

```
-(void) runDownSubViewsWithCavemanDebug : (UIView*) view{
  NSArray *mwSubViews = [view subviews];
  static int i=0;
  if([mwSubViews count]==0) return;
  UIView *sv;
  for(sv in mwSubViews){
    NSLog(@"Subview's %d Description : %@ \n",i++,[sv description]);  
   NSLog(@"Views Bounds: %@  :\n",sv.bounds);
   NSLog(@"Views Frame: %@  :\n",sv.frame);
   [self runDownSubViewsWithCavemanDebug:sv];
  }
} 
```

（didFinishLaunchingWithOptions 中对函数的调用）

```
 MainViewController *myMainVC = [[MainViewController alloc] init];
  NSArray *bundleResources = [[NSBundle mainBundle]loadNibNamed:@"View" owner:myMainVC         options:nil];
  UIWindow *mainWindow = [bundleResources objectAtIndex:0];
  self.window = mainWindow;
  self.window.rootViewController = myMainVC; 
```

但是，如果我使用的是情节提要，则无法使用 .. keyWindow 获取窗口引用。我可以得到它

```
UIWindow *realmw = [[[UIApplication sharedApplication]delegate] window]; 
```

我得到了对窗口的引用，但是窗口（虽然我认为它应该已经被初始化）在它的子视图中没有元素。

是的，我想我只是想知道它.. Apple 是否以某种方式打破了情节提要中的视图层次结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:04:36.347

您的 AppDelegate 有一个名为`window`（UIWindow 类型）的属性，该属性又具有一个名为的属性，该属性`rootViewController`表示情节提要中定义的根视图控制器（在您的情况下，它是一个 UITabBarController）。

UITabBarController 有一个属性`viewControllers`，它是标签栏控制器管理的所有 viewController 的 NSArray。

如果您想查看标签栏的第一个视图控制器（即第一个标签）上每个子视图的详细信息，您可以`didFinishLoadingWithOptions`按以下方式执行此操作：

```
UITabBarController *tabBarController = (UITabBarController*)self.window.rootViewController;
NSArray *viewControllers = [tabBarController viewControllers];
UIViewController *firstVC = (UIViewController*)[viewControllers objectAtIndex:0]
NSArray *subviews = [firstVC.view subviews]

for (UIView *sv in subviews) {
    NSLog(@"Subview's %d Description : %@ \n", i++, [sv description]);  
    NSLog(@"Views Bounds: %@  :\n", sv.bounds);
    NSLog(@"Views Frame: %@  :\n", sv.frame);
} 
```

# android - Android - 对话框按钮 onClick -> EditText 值

> ID：10179678
> 
> 赞同：0
> 
> 时间：2012-04-16T18:36:26.383
> 
> 标签：android, dialog, onclick, android-edittext

我的选项菜单中有一个“搜索”按钮，它显示了一个带有搜索掩码的对话框。因此，当您单击“搜索”按钮时，它应该开始实际搜索。

我在 onCreateDialog 中尝试做的是：

```
Button search_button = (Button) dialog.findViewById(R.id.d_search_button);
search_button.setOnClickListener(new View.OnClickListener() {
  public void onClick(View v) {
    EditText text = (EditText) v.findViewById(R.id.d_search_text);
  }
}); 
```

哪个不起作用，因为文本为空，那么访问搜索文本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:43:09.130

```
final EditText text  = (EditText) v.findViewById(R.id.d_search_text);

   search_button.setOnClickListener(new View.OnClickListener() {
   public void onClick(View v) {

   String searchString = text.getText().toString();
    //do something
   }

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:42:11.670

制作`EditText text`最终的全局变量。并在设置事件时设置它，然后在事件触发时可用：

```
Button search_button = (Button) dialog.findViewById(R.id.d_search_button);
text = (EditText) v.findViewById(R.id.d_search_text);
search_button.setOnClickListener(new View.OnClickListener() {
  public void onClick(View v) {
  //get your text here
  }
}); 
```

# yacc - byacc 移位/减少

> ID：10179679
> 
> 赞同：0
> 
> 时间：2012-04-16T18:36:35.620
> 
> 标签：yacc, shift-reduce-conflict

我很难弄清楚这个问题以及轮班减少问题。

添加';' 到最后并没有解决问题，因为我不能改变语言，它需要像下面的例子一样。任何 prec 操作数都有效吗？

示例如下：

变量可以声明为：作为指针或 int 作为整数，因此，这两者都是有效的：

```
<int> a = 0
int a = 1 
```

代码如下：

```
%left '<'

declaration: variable
           | declaration variable

variable : type tNAME '=' expr
         | type tNAME

type : '<' type '>'
     | tINT

expr : tINTEGER
     | expr '<' expr 
```

它显然在 expr 之后给出了移位/减少问题。因为它可以转换为“less”运算符的 expr 或减少另一个变量声明。

我希望优先考虑变量声明，并尝试创建一个 %nonassoc prec_aux 并放在 '<' type '>' %prec prec_aux 和 type tNAME 之后，但这并不能解决我的问题：S

我该如何解决这个问题？

输出是：

好吧，我不知道如何在回复时发布换行符和代码......所以这里是输出：

```
35: shift/reduce conflict (shift 47, reduce 7) on '<'
state 35
    variable : type tNAME '=' expr .  (7)
    expr : expr . '+' expr  (26)
    expr : expr . '-' expr  (27)
    expr : expr . '*' expr  (28)
    expr : expr . '/' expr  (29)
    expr : expr . '%' expr  (30)
    expr : expr . '<' expr  (31)
    expr : expr . '>' expr  (32)

    '>'  shift 46
    '<'  shift 47
    '+'  shift 48
    '-'  shift 49
    '*'  shift 50
    '/'  shift 51
    '%'  shift 52
    $end  reduce 7
    tINT  reduce 7 
```

这就是输出，错误似乎是我提到的那个。

* * *

有没有人知道一个不同的解决方案，除了添加一个新的终端到语言中，这不是一个真正的选择？

我认为解决方案是重写语法，以便它可以以某种方式向前看，看看它是在“​​<”之后的类型还是 expr，但我不知道如何去做。

优先级不太可能起作用，因为它具有相同的特征。有没有办法让我们定义的类型优先？比如声明？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:05:43.740

您的语法在这样的文本中变得混乱：

```
int a = b
<int> c 
```

第二行的“<”可能是第一个声明中表达式的一部分。它必须进一步向前看才能找到答案。

这就是大多数语言都有语句终止符的原因。这不会产生冲突：

```
%%

%token tNAME;
%token tINT;
%token tINTEGER;
%token tTERM;

%left '<';

declaration: variable
           | declaration variable

variable : type tNAME '=' expr tTERM
         | type tNAME tTERM

type : '<' type '>'
     | tINT

expr : tINTEGER
     | expr '<' expr 
```

在创建解析器时了解如何*设计*语法以消除可能的冲突会有所帮助。为此，您需要了解解析器的工作原理，这超出了此答案的范围:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T22:48:01.203

这里的基本问题是您需要比使用 yacc/bison 获得的 1 个令牌更多的前瞻。当解析器看到 a`<`时，它无法判断它是否完成了先前的声明以及它是否正在查看括号类型的开头，或者这是否是一个小于运算符。您可以在这里做两件基本的事情：

*   使用 bison 的`%glr-parser`option 或[btyacc](http://www.siber.com/btyacc/ "btyacc")等解析方法，可以处理非 LR(1) 语法

*   使用词法分析器进行额外的前瞻并返回消除歧义的标记

对于后者，您可以让词法分析器在 '<' 之后进行额外的前瞻，如果它后面跟着一个看起来像类型的东西，则返回一个不同的标记。最简单的是使用 flex 的`/`前瞻操作符。例如：

```
"<"/[ \t\n\r]*"<"    return OPEN_ANGLE;
"<"/[ \t\n\r]*"int"  return OPEN_ANGLE;
"<"                  return '<'; 
```

然后你改变你的野牛规则以期望`OPEN_ANGLE`类型而不是`<`：

```
type : OPEN_ANGLE type '>'
     | tINT

expr : tINTEGER
     | expr '<' expr 
```

对于更复杂的问题，您可以使用弹性启动状态，甚至在词法分析器和解析器之间插入整个令牌过滤器/转换通道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T21:52:11.800

这是修复，但并不完全令人满意：

```
%{
%}

%token tNAME tINT tINTEGER

%left '<'
%left '+'
%nonassoc '=' /* <-- LOOK */

%%

declaration: variable
           | declaration variable

variable : type tNAME '=' expr
         | type tNAME

type : '<' type '>'
     | tINT

expr : tINTEGER
     | expr '<' expr
     | expr '+' expr
     ; 
```

这个问题是这两个 LR 项目之间的冲突：dot-final：

```
variable : type tNAME '=' expr_no_less . 
```

和这个：

```
expr : expr . '<' expr 
```

请注意，这两个具有不同的运算符。正如您似乎认为的那样，这不是涉及“<”运算符的不同产品之间的冲突。

通过添加`=`优先级排名，我们解决了冲突诊断消失的问题。

请注意，我给予`=`了很高的优先级。这将通过支持减少来解决冲突。这意味着您不能使用 '<' 表达式作为初始值设定项：

```
int name = 4 < 3    // syntax error 
```

当看到 < 时，`int name = 4`想要减少，并且想法是它`<`必须是下一个声明的开始，作为`type`生产的一部分。

要允许将`<`关系表达式用作初始值设定项，请将对括号的支持添加到表达式语法中。然后用户可以用括号括起来：

```
int foo = (4 < 3) <int> bar = (2 < 1) 
```

如果没有更强大的解析方法或黑客，就无法解决这个问题。

如果你移动`%nonassoc`before `%left '<'`，给它低优先级怎么办？那么这种转变将受到青睐。不幸的是，这会导致您无法`<int>`在声明之后编写另一个声明。

```
int foo = 3 <int> bar = 4
             ^ // error: the machine shifted and is now doing:   expr '<' . expr. 
```

所以这是解决冲突的错误方法；您希望能够编写多个这样的声明。

**另一个注意事项：**

我的 TXR 语言实现了类似于 Parse Expression Grammars 的功能，可以很好地处理这种语法。这本质上是 LL（无限），它胜过 LALR（1）。

我们甚至不需要单独的词法分析器和解析器！这只是一个符号前瞻的限制以及对 1970 年硬件的最大效率的需要所必需的。

来自 shell 命令行的示例输出，演示了通过转换为类似于 Lisp 的抽象语法树进行的解析，该语法树绑定到变量`dl`（声明列表）。所以这与语义动作一起完成，产生可以在 TXR Lisp 中进一步处理的输出。标识符通过调用转换为 Lisp 符号`intern`，数字也被转换为数字对象。

```
$ txr -l type.txr  -
int x = 3 < 4 int y
(dl (decl x int (< 3 4)) (decl y int nil))

$ txr -l type.txr  -
< int > x = 3 < 4 < int > y
(dl (decl x (pointer int) (< 3 4)) (decl y (pointer int) nil))

$ txr -l type.txr  -
int x = 3 + 4 < 9 < int > y < int > z = 4 + 3 int w
(dl (decl x int (+ 3 (< 4 9))) (decl y (pointer int) nil) 
 (decl z (pointer int) (+ 4 3)) (decl w int nil))

$ txr -l type.txr  -
<<<int>>>x=42  
(dl (decl x (pointer (pointer (pointer int))) 42)) 
```

( ) 的源代码`type.txr`：

```
@(define ws)@/[ \t]*/@(end)
@(define int)@(ws)int@(ws)@(end)
@(define num (n))@(ws)@{n /[0-9]+/}@(ws)@(filter :tonumber n)@(end)
@(define id (id))@\
   @(ws)@{id /[A-Za-z_][A-Za-z_0-9]*/}@(ws)@\
   @(set id @(intern id))@\
@(end)
@(define type (ty))@\
  @(local l)@\
  @(cases)@\
    @(int)@\
    @(bind ty @(progn 'int))@\
  @(or)@\
    <@(type l)>@\
    @(bind ty @(progn '(pointer ,l)))@\
  @(end)@\
@(end)
@(define expr (e))@\
  @(local e1 op e2)@\
  @(cases)@\
    @(additive e1)@{op /[<>]/}@(expr e2)@\
    @(bind e @(progn '(,(intern op) ,e1 ,e2)))@\
  @(or)@\
    @(additive e)@\
  @(end)@\
@(end)
@(define additive (e))@\
  @(local e1 op e2)@\
  @(cases)@\
    @(num e1)@{op /[+\-]/}@(expr e2)@\
    @(bind e @(progn '(,(intern op) ,e1 ,e2)))@\
  @(or)@\
    @(num e)@\
  @(end)@\
@(end)
@(define decl (d))@\
  @(local type id expr)@\
  @(type type)@(id id)@\
  @(maybe)=@(expr expr)@(or)@(bind expr nil)@(end)@\
  @(bind d @(progn '(decl ,id ,type ,expr)))@\
@(end)
@(define decls (dl))@\
  @(coll :gap 0)@(decl dl)@(end)@\
@(end)
@(freeform)
@(decls dl) 
```

# node.js - 在 node.js 和客户端之间共享 html 模板的最佳方式是什么

> ID：10179681
> 
> 赞同：0
> 
> 时间：2012-04-16T18:36:39.693
> 
> 标签：node.js, backbone.js

目前我正在使用backbone.js在客户端上使用下划线渲染我的应用程序，并在服务器端的node.js中使用ejs。

我真的很希望能够在客户端和服务器之间共享模板，这样我就不需要两次创建模板。在客户端和服务器上使用相同模板的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:54:35.413

作为德比的替代品，请考虑 Meteor，这是一个非常令人印象深刻的截屏视频

[http://meteor.com/screencast](http://meteor.com/screencast)

或者，这里有一些用于序列化模型并将其发送到网络的选项

[http://andyet.net/blog/2011/feb/15/re-using-backbonejs-models-on-the-server-with-node/](http://andyet.net/blog/2011/feb/15/re-using-backbonejs-models-on-the-server-with-node/)

[http://amirmalik.net/2010/11/27/how-to-share-backbonejs-models-with-nodejs](http://amirmalik.net/2010/11/27/how-to-share-backbonejs-models-with-nodejs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:48:55.740

您应该查看Node.js的[Derby 项目。](http://derbyjs.com/)我相信它使用 Handlebars 模板来呈现服务器端和客户端。

# objective-c - Interface Builder 将控制出口设置为零——为什么？

> ID：10179684
> 
> 赞同：4
> 
> 时间：2012-04-16T18:36:54.230
> 
> 标签：objective-c, ios, xcode

为 iPhone 应用程序使用 xcode 4.2，没有 ARC ---

当我使用 interface builder 创建一个 outlet 时，xcode 将两行代码添加到我的 viewController。一个在 viewDidUnload: --`[self setMyOutlet:nil]`和第二个在 dealloc -- `[myOutlet release]`。

我理解后者（发布）。但是为什么在 viewDidUnload 中将 outlet 设置为 nil。viewDidUnload 不会在 dealloc 之前被调用，并且不会将 outlet 设置为 nil 否定 dealloc 中的释放操作吗？设置为 nil 对构建使用垃圾收集的 Mac 应用程序来说是有意义的——但对于 iPhone 应用程序来说没有意义。

为什么界面构建器会这样做？我应该删除将网点设置为零的行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:01:08.660

`viewDidUnload`可以调用也可以不调用。这取决于当前的内存使用情况。`dealloc`是您应该清理**所有**属性（如数组、自定义对象）的地方。在`viewDidUnload`您清理视图和可能为支持该视图而创建的对象。`viewDidUnload`意味着您的视图已卸载（但不是整个视图控制器），并且将来可能会再次创建和加载（当然是在 viewDidLoad 中）。

*   为什么要 nil - [Objective-C 设置 nil 和释放之间的区别](https://stackoverflow.com/q/1210776/194544)
*   [了解如何加载和卸载视图](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:07:01.760

viewDidUnload 不是每次都在 dealloc 之前调用，看看苹果文档怎么说..

> 当内存不足的情况发生并且不需要当前视图控制器的视图时，系统可能会选择从内存中删除这些视图。此方法在视图控制器的视图被释放后调用，这是您执行任何最终清理的机会。如果您的视图控制器存储了对视图或其子视图的单独引用，您应该使用此方法来释放这些引用。您还可以使用此方法删除对您为支持视图而创建但在视图消失后不再需要的任何对象的引用。您不应使用此方法发布用户数据或任何其他无法轻松重新创建的信息。

所以它背后的想法是释放任何可以轻松创建的不需要的对象。现在来到将属性设置为 nil 的部分。它这样做是因为这样你会释放所有内存并将对象设置为 nil （从而降低你的内存使用量），然后如果你的应用程序调用了 dealloc不会像在objective-c中那样崩溃，您可以将发布消息发送到nil对象..

我建议你阅读苹果[ViewController 编程指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457-CH1-SW1)，它会解决你的很多问题......希望这能消除一些空气......：D

# coldfusion - 在 Dreamweaver 和 CommonSpot 库中使用 # 符号时出错

> ID：10179687
> 
> 赞同：0
> 
> 时间：2012-04-16T18:37:09.337
> 
> 标签：coldfusion, dreamweaver, commonspot

有谁知道如何在 Dreamweaver for CommonSpot 中管理库？（我对 CommonSpot 很陌生）。

`#`无论我在哪里使用符号，CommonSpot 都会返回错误。不知何故，我设法`#`从库中删除了所有符号。但我想在 Dreamweaver 中创建库，该库将库定义为：

```
<!-- #BeginLibraryItem ... 
```

由于`#`符号，这会导致问题。

CommonSpot 有类似图书馆的东西吗？或者我可以使用任何转义字符来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:28:41.103

CF 必须评估评论。这里有几个想法。

*   检查整个文件周围是否有 cfoutput 标签。如果是这样，请将它们调整为不在评论周围

如果目前这个

```
<cfoutput>
...
<!-- #BeginLibraryItem ... -->
...
</cfoutput> 
```

试试这个

```
<cfoutput>
...
</cfoutput>
<!-- #BeginLibraryItem... -->
<cfoutput>
...
</cfoutput> 
```

*   根据库注释的评估方式，另一个可能起作用的选项是使用 3 个破折号而不是 2 个破折号使它们成为 CFML 注释，以忽略 #

像这样...

```
<!--- #BeginLibraryItem ... ---> 
```

# php - PHP 中的 imap_list() 没有显示我的“附加邮箱”

> ID：10179688
> 
> 赞同：0
> 
> 时间：2012-04-16T18:37:10.050
> 
> 标签：php, exchange-server, imap

我正在尝试连接到 Microsoft Exchange 服务器上“附加邮箱”的收件箱。连接到我的服务器并运行 imap_list 不会显示邮箱，但会使用 Outlook 列出。不过，我看到了其余的文件夹。

```
$mbox = imap_open( '{mail.domain.net:143}', 'username', 'password' );

echo '<pre>';
echo "<h1>Mailboxes</h1>\n";
$folders = imap_list($mbox, "{mail.domain.net:143}", "*");

if ($folders == false) {
    echo "Call failed<br />\n";
} else {
    foreach ($folders as $val) {
        echo $val . "<br />\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:58:41.110

IMAP 无权访问此数据。Outlook 通过 AutoDiscover 获取它并通过 MAPI 打开其他商店。

# c# - 将具有变化值的参数传递给任务——行为？

> ID：10179691
> 
> 赞同：21
> 
> 时间：2012-04-16T18:37:18.177
> 
> 标签：c#, .net-4.0, scope, task-parallel-library

场景：循环中的异步任务执行一个方法，该方法包含随着程序继续而变化的参数：

```
while(this._variable < 100)
{
    this._variable++; 
    var aTask = Task.Factory.StartNew(() =>
    {
        aList.add(this._variable);
        update(this._savePoint);
    });
} 
```

如果循环运行的速度比任务完成的速度快，列表会添加变量的当前值还是变量保存在本地并添加原始值？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-16T18:49:52.317

闭包关闭变量，而不是值。因此，递增`_variable` *可以*改变引用它的任务的行为。

您可以通过制作本地副本来防止这种情况：

```
while (this._variable < 100)
{
    this._variable++;
    int local = _variable;
    var aTask = Task.Factory.StartNew(() =>
    {
        aList.add(local);
        update(this._savePoint);
    });
} 
```

或者您可以将值作为状态传递给任务：

```
while (this._variable < 100)
{
    this._variable++;
    var aTask = Task.Factory.StartNew(object state =>
    {
        aList.add((int)state);
        update(this._savePoint);
    }, this._variable);
} 
```

这些都通过将值复制`_variable`到新的临时变量来工作。在第一种情况下，`local`变量是在循环范围内定义的，因此每次迭代都会得到一个新变量。在第二种情况下，当您将其作为参数`_variable`传递给 Task 时，您会复制该值。`state`如果`_variable`是引用类型，这些解决方案将不起作用；您必须执行克隆。

# asp.net-mvc - 如何在 Telerik ajax 绑定的客户端模板中解析枚举字符串？

> ID：10179699
> 
> 赞同：0
> 
> 时间：2012-04-16T18:38:15.137
> 
> 标签：asp.net-mvc, asp.net-mvc-3, telerik, telerik-grid, telerik-mvc

我在 Telerik MVC 网格上使用 Ajax 绑定，但我不知道如何解析 ClientTemplate 中枚举的文本版本。

鉴于：

```
enum MyEnum { Sat, Sun, Mon, Tue, Wed, Thu, Fri };

public class MyBusinessObject{
     public int Id { get; set; }
     public MyEnum Day { get; set;
} 
```

在我看来：

```
@(Html.Telerik().Grid<MyBusinessObject>() 
```

> ... columns.Bound(o => o.Day) .ClientTemplate("????")

例如，如何使用 ? 解决列中的“星期一” `ClientTemplate`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:05:01.733

无论您在 ClientTemplate 中键入什么内容，都无法正确显示它。因为处理 Grid 的 Select 操作的操作方法将使用 JavaScriptSerializer 的默认设置，并且表示 Enum 属性的值将是 Integers - 您可以检查 select 方法的响应是什么。

您可以尝试使用一些 JavaScript 函数，在客户端再次将整数转换为字符串 - 如果您采用这种方法，那么您可以键入一些 JavaScript 函数，每次需要模板时客户端都会调用该函数。

例如：

```
ClientTemplate("myTransformFunction('<#= MyEnumProperty#>')") 
```

这样，将调用一个函数并传递枚举的整数表示 - 然后您可以使用一个简单的开关来返回适当的字符串。

或者更简单的方法是使用 ViewModel 模式。

# servlet-3.0 - 如何检测 AsyncContext 是否超时？

> ID：10179704
> 
> 赞同：0
> 
> 时间：2012-04-16T18:38:30.487
> 
> 标签：servlet-3.0

是否可以从`AsyncContext`中判断它是否已完成、超时或仍在等待完成？

我知道可以监听`timeout`或`complete`事件，但我不希望`AsyncListener`仅仅为了记录这些信息而定义 4 个监听器方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:53:42.973

如果我没记错的话，Tomcat在 timeouted 上调用`null`时会返回。[`AsyncContext.getRequest()`](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncContext.html#getRequest%28%29)`AsyncContext`

我现在无法确认这种行为，而且它没有记录在案，因此应该被认为是不安全且不可移植的。

顺便说一句，Tomcat 这样做是因为它在处理请求后**重用** `HttpServletRequest`和响应对象，就像它重用 servlet 实例或线程一样。对我来说听起来像是疯狂的优化，但规范并没有禁止......

# scala - Socket.io Scala 客户端

> ID：10179712
> 
> 赞同：5
> 
> 时间：2012-04-16T18:38:51.923
> 
> 标签：scala, websocket, socket.io

我正在为 Scala 寻找 socket.io 客户端。我很清楚[这一点](https://github.com/Gottox/socket.io-java-client)，但我对在 Scala 中使用它的想法感到畏缩，因为它感觉不太自然，也不允许惯用的实现。因此，你们中的任何人对我在哪里可以找到 Scala 客户端有什么建议吗？

如果是这样，仅 SBT 的行和文档的链接就足以作为答案；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T23:00:41.467

恐怕我不知道任何已经实现的库或 Scala 的明显解决方案。但我将介绍两种非常简单的方法，如果你有时间 DIY 应该很容易使用 :-)

但当然，这真的取决于你想要什么。您可能已经可以想象，如果您需要处理简单的请求，Java 标准库的普通[WebSocket](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html)实现会非常有效。我在[scala-lang.org](http://scala-lang.org)找到了一个实现[计算随机数的服务器](http://www.scala-lang.org/node/55)。如果感兴趣的话，在[夜间构建](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/compiler/scala/tools/util/SocketServer.html)中还会酝酿一些东西，这可能会揭示一些方便的技巧。

如果您想尽可能简单并使用纯 Scala，Actor（尤其是[RemoteActor](http://www.scala-lang.org/api/current/index.html#scala.actors.remote.RemoteActor%24)）非常强大。它在两端自然需要 Scala，但它几乎立即为您提供了一个消息传递系统。如果您还不熟悉它们，[这是一个很好的入门指南。](http://youshottheinvisibleswordsman.co.uk/2009/04/01/remoteactor-in-scala/)

反正。如果没有好的图书馆表面，我希望这会有所帮助。祝你好运。

# php - 使用Jquery将表单数据存储到隐藏字段中？

> ID：10179713
> 
> 赞同：0
> 
> 时间：2012-04-16T18:38:54.853
> 
> 标签：php, jquery, json, hidden-field

我有一个带有另一个表单的弹出页面的表单。在该弹出表单中，我想填写所有字段，并通过隐藏字段将其存储在主父表单中的单个字段中。这样当父表单被提交时，我可以通过 php.ini 的隐藏字段获取所有字段。我怎么能用 jquery 做到这一点？我可以从弹出表单中获取所有字段并将其作为 json 字符串存储在隐藏字段中吗？然后在 php 中能够将该 jquery 字符串转换为一个对象，以便我可以轻松访问所有表单值？如果是这样，那么我将如何从弹出表单中获取所有字段并将其转换为 json 字符串？还是有更好/更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T18:45:35.603

**要将表单捕获到输入中以进行发布：**

你想要[`.serialize()`](http://api.jquery.com/serialize/)的形式。

```
$('input').val( $('form').serialize() ); 
```

然后，在 PHP 中，您只需将[`parse_str()`](http://us3.php.net/parse_str)其拆分为一个数组。

另外，请记住，可能有比这样传递字段数据更好的解决方案，但如果您对这种实现非常执着，这可能是要走的路。

**要将表单作为模式打开，然后在 PHP 中收集数据：**

```
// You can set this to not open by default and bind the opening to a button, or a link, etc...
$('form').dialog({
    modal: true
}); 
```

在 PHP 中，您的表单将[`$_POST`](http://www.php.net/manual/en/reserved.variables.post.php)照常包含在其中。

```
print_r( $_POST ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:48:27.657

一个想法是使用 jQuery 创建如下字段：

```
$(".innerForm input").each(function() {
    $(".parentForm").append("<input type='hidden' name='"+$(this).attr("name")+"' value='"+$(this).val()+"'");
}); 
```

如果您以这种方式将值添加到页面，那么您将能够访问它们，就好像它们是 $_POST 的正常部分一样

```
$_POST("hidden_field_name") 
```

# sdk - 如何删除之前绘制的线？

> ID：10179714
> 
> 赞同：0
> 
> 时间：2012-04-16T18:38:54.950
> 
> 标签：sdk, line, coronasdk

这是代码：

```
local physics = require "physics"
physics.start()

local lines = {}
local lineGroup = display.newGroup()
local prevX,prevY
local isDrawing = false
local i = 0

local function distanceBetween(x1, y1, x2, y2)
    local dist_x = x2 - x1
    local dist_y = y2 - y1
    local distanceBetween = math.sqrt((dist_x*dist_x) + (dist_y*dist_y))
    return distanceBetween
end

local function drawLine(e)
    if(e.phase == "began") then
        prevX = e.x
        prevY = e.y
        isDrawing = true
        i = i + 1
        print"began"
    elseif(e.phase == "moved") then
        local distance = distanceBetween(prevX, prevY, e.x, e.y)
        if(isDrawing and distance < 100) then
            if(lines[i]) then lineGroup:remove(i) end
            lines[i] = display.newLine(prevX, prevY, e.x, e.y)
            lines[i]:setColor(255, 255, 0)
            lines[i].width = 5

            local dist_x = e.x - prevX
            local dist_y = e.y - prevY
            physics.addBody(lines[i], "static", { density = 1, friction = 0.5, bounce = 1.6, shape = {0, 0, dist_x, dist_y, 0, 0} } )
            lineGroup:insert(lines[i])
        end
    elseif(e.phase == "ended") then
        isDrawing = false
    end
end

Runtime:addEventListener("touch",drawLine) 
```

问题是：

1.  例如：我画了一条线，然后我画了下一行，我想删除上一行。我怎样才能做到这一点？
2.  我正在使用director 1.4，当我尝试重播关卡时，线条停止正确绘制并且出现指向这条线的错误 -`if(lines[i]) then lineGroup:remove(i) end`所以：如何`localGroup`在重播关卡时添加线条并删除它们（我正在使用`director:changeScene("level1")`或正确改变场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:50:17.007

嗯，我假设您想要多行，因为您将它们添加到行表中。如果您不需要多行，则可以只存储 1 行。就像是：

```
local physics = require "physics"
physics.start()

local line
local lineGroup = display.newGroup()
local prevX,prevY
local isDrawing = false
local i = 0

local function distanceBetween(x1, y1, x2, y2)
    local dist_x = x2 - x1
    local dist_y = y2 - y1
    local distanceBetween = math.sqrt((dist_x*dist_x) + (dist_y*dist_y))
    return distanceBetween
end

local function drawLine(e)
    if(e.phase == "began") then
        if(line) then
            lineGroup:remove(1)
            line = nil
        end
        prevX = e.x
        prevY = e.y
        isDrawing = true
    elseif(e.phase == "moved") then
        local distance = distanceBetween(prevX, prevY, e.x, e.y)
        if(isDrawing and distance < 100) then
            if(line) then lineGroup:remove(1) end
            line = display.newLine(prevX, prevY, e.x, e.y)
            line:setColor(255, 255, 0)
            line.width = 5

            local dist_x = e.x - prevX
            local dist_y = e.y - prevY
            physics.addBody(line, "static", { density = 1, friction = 0.5, bounce = 1.6, shape = {0, 0, dist_x, dist_y, 0, 0} } )
            lineGroup:insert(line)
        end
    elseif(e.phase == "ended") then
        isDrawing = false
    end
end

Runtime:addEventListener("touch",drawLine) 
```

要将它们添加到当前场景中，我相信导演类应该是这样的：

```
function scene:createScene( event )
    lineGroup = self.view
end 
```

您只需要将 lineGroup 设置为 scene.view 而不是使用 display.newGroup() 创建一个新组

要正确删除线，您可以在退出场景功能中执行此操作：

```
function scene:exitScene( event )
    if(line) then
        lineGroup:remove(1)
        line = nil
    end
end 
```

我建议看一下导演班教程：[http](http://www.youtube.com/watch?v=KudLE8h4kWw) ://www.youtube.com/watch?v=KudLE8h4kWw或此代码示例[https://github.com/ansca/Storyboard-Sample](https://github.com/ansca/Storyboard-Sample)

# php - $.post json 请求不返回任何结果

> ID：10179715
> 
> 赞同：0
> 
> 时间：2012-04-16T18:39:01.903
> 
> 标签：php, jquery, ajax, json, .post

好吧，再试一次：

这是我正在使用的所有 jquery 代码，也许我在 $.post() 之前的代码中出错了；我用相同形式的onclick调用以下函数...

```
function setLogin()
{

$('#login-form').submit(function(e) {
    e.preventDefault();
            //passing form field to vars
    var formUsername=$("#login-form #username").val();
    var formPassword=$("#login-form #password").val();
            //checks on fields lenght
    if((formUsername.length<6))
    {
        $("#ajax-output").html("<div class='error'>Attenzione username troppo breve!</div>");
    }
    else if((formPassword.length<6))
    {
        $("#ajax-output").html("<div class='error'>Attenzione password troppo breve!</div>");
    }
    else
    {
        $.post(
                            //the url
            '?module=login',

                            //data got from login form
            {
                "username": formUsername,
                "password": formPassword,
            },
            //response
            function(data){
                $("#ajax-output").html(data.reply)
            },
            //type
            "json"

        );
    }
});
} 
```

我只尝试在 php 文件中使用此代码，但它仍然没有返回任何内容...

```
function Login()
{
    //just to try
echo json_encode(array('reply'=>'foo'));
} 
```

它仍然不起作用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:43:13.267

您确定该帖子首先正在运行吗？

使用[萤火虫！](http://getfirebug.com/)（或 chrome 的内置开发者工具）

您可以使用 firebug 来分离网页的每一部分。

它有一个“网络”选项卡，显示浏览器发出的每个请求，包括 AJAX 请求及其结果、标头和内容。

使用它来查看您的请求是否真的被提出，以及结果是什么。然后从那里拿走。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:11:15.397

确保在响应时为内容类型设置标头 - 如果浏览器不知道它正在接收 JSON，它可能不会尝试使用 JSON。

```
function Login()
{
    header('Content-Type: application/json');
    echo json_encode(array('reply'=>'foo'));
} 
```

# variables - MDX，如何传递变量/参数？SSAS？

> ID：10179722
> 
> 赞同：1
> 
> 时间：2012-04-16T18:39:28.753
> 
> 标签：variables, parameters, ssas, mdx

好吧，这是我的代码，但是如何替换 @anioct 和 @cedis 以获取 SSRS 的参数？@anioact=是一个整数年，@cedis 可能是很多数字中的一个，我做错了什么吗？它工作我用实数替换@parameter 它确实有效。

```
with
member Enero as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[1],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[1],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])

)

member Febrero as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[2],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[2],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
)

member Marzo as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[3],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[3],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])

)

member Abril as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[4],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[4],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])

)

member Mayo as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[5],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[5],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
)

member Junio as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[6],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[6],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
)

member Julio as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[7],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[7],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])

)

member Agosto as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[8],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[8],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])

)

member Septiembre as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[9],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[9],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])

)

member Octubre as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[10],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[10],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])

)

member Noviembre as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[11],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[11],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
)

member Diciembre as
(
([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)].&[12],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])
-([Dim Tiempos].[Año-Mes].[Año].&[(@anioact)-1].&[12],([Measures].[venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt])

)

select {Enero,Febrero,Marzo,Abril,Mayo,Junio,Julio,Agosto,Septiembre,Octubre,Noviembre,Diciembre} on columns,
FILTER(
{[Dimrutas].[Ruta].Members},
(([Measures].[Venta]),[Dimregion].[Puntovta].&[(@cedis)],[Dimproductos].[Categoria].&[Agua 20 Lt]) > 0
)ON ROWS

from CuboBebidas
where ([Dimproductos].[Categoria].&[Agua 20 Lt],[Dimregion].[Puntovta].&[(@cedis)]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:37:11.867

您应该真正使用设计器来执行此操作，但请尝试：

```
STRTOSET(@anioact, CONSTRAINED) 
```

# mongodb - 带有嵌套结果的 MongoDB 分组

> ID：10179725
> 
> 赞同：0
> 
> 时间：2012-04-16T18:39:45.680
> 
> 标签：mongodb, database

我正在使用 GridFS 来存储图像。每个图像都有一个`group_id`元数据，基本上只是定义它们是否是同一原始图像的一部分。因此，每个图像都有多种尺寸，这`group_id`就是将相同的图像组合在一起的原因。

我想查询这个，但按 group_id 分组。所以它会返回一个 group_id 的数组，每个都有对象的信息（宽度、id 等）。

如果我只是在我想要的记录上进行查找，这就是它的样子：

```
[ { _id: 4f871d4adaf6fa492f000001,
    width: '500',
    group: '1' },
  { _id: 4f871d4adaf6fa492f000004,
    width: '150',
    group: '1' },
  { _id: 4f871d4bdaf6fa492f000007,
    width: '100',
    group: '1' },
  { _id: 4f871d4bdaf6fa492f00000a,
    width: '50',
    group: '1' },
  { _id: 4f871d51daf6faf42e000001,
    width: '500',
    group: '2' },
  { _id: 4f871d52daf6faf42e000004,
    width: '150',
    group: '2' },
  { _id: 4f871d53daf6faf42e000007,
    width: '100',
    group: '2' },
  { _id: 4f871d53daf6faf42e00000a,
    width: '50',
    group: '2' } ] 
```

我查看了 group 和 mapreduce，并尝试了各种选项，但似乎没有任何效果。任何建议或例子都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:27:53.837

一种可能的方法是使用新聚合框架中的 $group 函数（在 2.1.0 版中可用）： [http ://www.mongodb.org/display/DOCS/Aggregation+Framework+-+%24group](http://www.mongodb.org/display/DOCS/Aggregation+Framework+-+%24group)

```
> db.images.aggregate({$group:{"_id":"$group", "info":{$push:{"width":"$width", "id":"$_id"}}}})
{
    "result" : [
        {
            "_id" : "2",
            "info" : [
                {
                    "width" : "500",
                    "id" : ObjectId("4f871d51daf6faf42e000001")
                },
                {
                    "width" : "150",
                    "id" : ObjectId("4f871d52daf6faf42e000004")
                },
                {
                    "width" : "100",
                    "id" : ObjectId("4f871d53daf6faf42e000007")
                },
                {
                    "width" : "50",
                    "id" : ObjectId("4f871d53daf6faf42e00000a")
                }
            ]
        },
        {
            "_id" : "1",
            "info" : [
                {
                    "width" : "500",
                    "id" : ObjectId("4f871d4adaf6fa492f000001")
                },
                {
                    "width" : "150",
                    "id" : ObjectId("4f871d4adaf6fa492f000004")
                },
                {
                    "width" : "100",
                    "id" : ObjectId("4f871d4bdaf6fa492f000007")
                },
                {
                    "width" : "50",
                    "id" : ObjectId("4f871d4bdaf6fa492f00000a")
                }
            ]
        }
    ],
    "ok" : 1
}
> 
```

这是您希望达到的结果吗？

使用 Map Reduce 操作也可以实现类似的结果：

```
var map = function(){
    var info = [{"width":this.width, "id":this._id}]; 
    emit(this.group, {"info":info});
}

var reduce = function(key, values){
    var info = [];
    print(key);
    print(values.length);
    for(var v in values){
        print(values[v]);
        for(var i in values[v].info){
            if(info.indexOf(values[v].info[i]) == -1){
                info.push(values[v].info[i]);
            };
        };
    };
    return {"info":info};
}

> db.images.mapReduce(map, reduce, {out:{inline:1}})
{
    "results" : [
        {
            "_id" : "1",
            "value" : {
                "info" : [
                    {
                        "width" : "500",
                        "id" : ObjectId("4f871d4adaf6fa492f000001")
                    },
                    {
                        "width" : "150",
                        "id" : ObjectId("4f871d4adaf6fa492f000004")
                    },
                    {
                        "width" : "100",
                        "id" : ObjectId("4f871d4bdaf6fa492f000007")
                    },
                    {
                        "width" : "50",
                        "id" : ObjectId("4f871d4bdaf6fa492f00000a")
                    }
                ]
            }
        },
        {
            "_id" : "2",
            "value" : {
                "info" : [
                    {
                        "width" : "500",
                        "id" : ObjectId("4f871d51daf6faf42e000001")
                    },
                    {
                        "width" : "150",
                        "id" : ObjectId("4f871d52daf6faf42e000004")
                    },
                    {
                        "width" : "100",
                        "id" : ObjectId("4f871d53daf6faf42e000007")
                    },
                    {
                        "width" : "50",
                        "id" : ObjectId("4f871d53daf6faf42e00000a")
                    }
                ]
            }
        }
    ],
    "timeMillis" : 1,
    "counts" : {
        "input" : 8,
        "emit" : 8,
        "reduce" : 2,
        "output" : 2
    },
    "ok" : 1,
}
> 
```

希望这将帮助您实现您想要的结果！

# blackberry - 启动 Foo 时出错：找不到类“net.rim.device.api.system.WLANListener”

> ID：10179726
> 
> 赞同：2
> 
> 时间：2012-04-16T18:39:51.177
> 
> 标签：blackberry

我是黑莓开发的新手，遇到了一些我不明白的事情。我有一个我一直在开发的应用程序，它支持 Blackberry OS 5 到 7.1，并且除 OS 6 之外都可以在它们上工作。出于某种奇怪的原因，我得到：

启动 Foo 时出错：找不到类“net.rim.device.api.system.WLANListener”

仅在黑莓 OS 6 上！没有特定于操作系统的代码（据我所知）。这是在我清理了代码和模拟器（使用 Eclipse）并签署了代码之后。大多数情况下，该应用程序拒绝安装在 OS 6 设备上——当然，它在其他 OS 版本上运行良好。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:18:57.410

### 经过大量的研究和反复试验，我终于发现了这个问题。

如果应用程序的 rapc 大小超过 64kb，Blackberry 编译器会将文件拆分为多个称为同级 COD 的文件。您在可交付成果文件夹中看到的 COD 文件实际上是一个 zip 文件，其中包含主 COD 文件及其所有同级文件。尽管我仍然看到第一个 COD 文件更大的时间，但它们都应该是 64kb 或更小。

解决方法是确保项目中没有大于 64kb 的文件。虽然我读到有人有一个类在编译时超过 64kb 导致问题，但我有更大的图像，因此他们将类拆分并解决了他们遇到的问题。

症状很奇怪，不同操作系统版本的编译不一致，导致不同设备出现不同的奇怪问题，当时我在想，这似乎是一个链接问题，似乎我离得太远了。谢谢你。

# java - JCEKS 密钥库作为 War 中的资源

> ID：10179727
> 
> 赞同：2
> 
> 时间：2012-04-16T18:39:56.917
> 
> 标签：java, maven, war, keystore

我有一个 JCEKS 密钥库，我从 war 文件中加载它作为资源。我正在使用密钥库来存储用于 AES 加密的密钥。当我尝试在直接打开文件的罐装项目中读取密钥库时，密钥库工作正常。但是，当我将密钥库作为资源访问时，出现以下异常：

```
java.io.IOException: Keystore was tampered with, or password was incorrect
    at com.sun.crypto.provider.JceKeyStore.engineLoad(DashoA13*..)
    at java.security.KeyStore.load(KeyStore.java:1185) 
```

做了一点谷歌搜索后，这让我相信我使用的密码不正确，但在验证它们是正确的之后，我仍然收到错误。这是我尝试加载密钥库数据的地方。

```
public class AegisDataStoreFactory {
    ...
    static {
        InputStream in = null;
        try{
            final Configuration conf = Configuration.getConfiguration();
            final KeyStore ks = KeyStore.getInstance("JCEKS");
            in = AegisDataStoreFactory.class.getResourceAsStream(KEYSTORE);
            final String password = conf.getProp("keyStorePassword").trim();
            ks.load(in, password.toCharArray());
            ...
        } finally {
            if(in != null) {
                in.close();
            }
        }
    }
    ...
} 
```

程序在加载时因 IOException 而失败。我在这里不知所措。当我不在战争中加载它时，它工作正常。我正在使用 Maven 生成战争文件。

有什么想法吗？

编辑：我知道发生了什么。我使用 Maven 进行构建，并且在构建期间我为资源文件启用了过滤。到目前为止，我的资源目录中没有任何二进制文件（我只有一些我想要过滤的属性文件）。一旦我从过滤中排除了密钥库，但仍确保密钥库已移动，它就可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:31:35.547

我弄清楚发生了什么。我使用 Maven 进行构建，并且在构建期间我为资源文件启用了过滤。到目前为止，我的资源目录中没有任何二进制文件（我只有一些我想要过滤的属性文件）。一旦我从过滤中排除了密钥库，但仍确保密钥库已移动，它就可以工作了。这是我最初的 pom 文件：

```
<resources>
    <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
    </resource>
</resources> 
```

这是我将 pom 文件更新为的内容。（我的密钥库的文件扩展名为 .ks）

```
<resources>
    <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
        <excludes>
            <exclude>**/*.ks</exclude>
        </excludes>
    </resource>
    <resource>
        <directory>src/main/resources</directory>
        <filtering>false</filtering>
        <includes>
            <include>**/*.ks</include>
        </includes>
    </resource>
</resources> 
```

# asp.net - 获取锚标签之间的文本

> ID：10179730
> 
> 赞同：0
> 
> 时间：2012-04-16T18:40:07.370
> 
> 标签：asp.net, vb.net

我有一个标签，我在函数中放入了一个超链接：

```
Private Sub showLink(title As String, cost As String, asin As String)
    Label1.Text = (String.Format("<a href=\WebSite3\LinkDisplay.aspx?Title=" + System.Web.HttpUtility.UrlEncode(title) + "&Price=" + System.Web.HttpUtility.UrlEncode(cost) + "&ASIN=" & System.Web.HttpUtility.UrlEncode(asin) + " \>" + title + "/" + cost + "/" + asin + "</a>"))
End Sub 
```

我想获得对字符串`title + "/" + cost + "/" + asin`的访问权限，以便将其拆分为`String.Split("/")`.

当我尝试时出现错误`Dim fields As String() = Label1.Text.Split("/")`。

`<a>`我应该使用什么函数来获取标签之间的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:42:28.667

首先，不要使用标签，而是使用 HyperLink 对象。您可以像这样设置它的 URL：

```
Private Sub showLink(ByVal title As String, ByVal cost As String, ByVal asin As String)
    Dim link As String = System.Web.HttpUtility.UrlEncode(String.Format("WebSite3/LinkDisplay.aspx?Title={0}&Price={1}&ASIN={2}", title, cost, asin))
    HyperLink1.NavigateUrl = link
    HyperLink1.Text = String.Format("{0}/{1}/{2}", title, cost, asin)
End Sub 
```

然后，您可以像这样读出 url 的查询字符串值：

```
Private Sub GetLinkAttributes()
    Dim url As New Uri("http://" & HttpUtility.UrlDecode(HyperLink1.NavigateUrl.ToLower))
    Dim fields As NameValueCollection = HttpUtility.ParseQueryString(url.Query)
    Debug.Print(String.Format("{0} / {1} / {2}", fields("title"), fields("price"), fields("asin")))
End Sub 
```

您在示例代码中使用了反斜杠，这可能引发了您遇到的错误（HttpRequestValidationException）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:49:14.360

首先，您应该使用 Literal 控件而不是标签来执行此操作。或者，更好的是，使用某种类型的链接控制。

自从你第一次问这个问题以来，你还没有添加很多细节，但只要控件是服务器控件，你就可以使用`Label1.Text`.

一旦你有了文本，你仍然需要解析出你想要的部分。这没有真正的诀窍。您需要删除您不感兴趣的文本部分。

如果您使用某种类型的链接控件，最后一项任务会简单*得多*，因为您可以只查看链接文本值。

# php - PHP 搜索多维数组 - 非关联

> ID：10179731
> 
> 赞同：0
> 
> 时间：2012-04-16T18:40:12.607
> 
> 标签：php, multidimensional-array

我正在尝试编写一段代码来搜索一列二维数组值并在找到它时返回键。现在我有两个函数，一个是查找一个值并返回一个布尔值 true 或 false，另一个（不工作）返回密钥。我想在保留查找函数的递归性质但返回一个键的意义上合并两者。我想不出如何在一个功能中同时完成这两个功能，但工作中的关键查找器将不胜感激。

谢谢

```
function in_array_r($needle, $haystack, $strict = true) {
foreach ($haystack as $item) {
    if (($strict ? $item === $needle : $item == $needle) || (is_array($item) && in_array_r($needle, $item, $strict))) {
        return true;
    }
}

return false; 
```

}

```
function loopAndFind($array, $index, $search){
     $returnArray = array();
     foreach($array as $k=>$v){
           if($v[$index] == $search){   
                $returnArray[] = $k;
           }
     }
     return $returnArray; 
```

}`

对不起，我想添加一个例子。例如：

```
Array [0]{
[0]=hello
[1]=6
}
[1]
{
[0]=world
[1]=4
} 
```

我想通过 [x][0] 索引搜索数组以检查搜索词的每个字符串。如果找到，它应该返回主数组中的索引/键，如“world”返回 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:46:43.720

这有效：

```
$array = array(array('hello', 6), array('world', 4));
$searchTerm = 'world';

foreach ($array as $childKey => $childArray) {
    if ($childArray['0'] == $searchTerm) {
        echo $childKey; //Your Result
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:58:48.497

您已经拥有了第一个功能所需的一切。PHP 完成剩下的工作：

```
$findings = array_map('in_array_r', $haystack);
$findings = array_filter($findings); # remove all not found
var_dump(array_keys($findings)); # the keys you look for 
```

# java - 如何判断java中是否建立了连接？

> ID：10179734
> 
> 赞同：0
> 
> 时间：2012-04-16T18:40:32.310
> 
> 标签：java, android, nio, socketchannel

我试图在android中的两个模拟器之间建立一个套接字通道。我写了以下代码：

```
 public SocketChannel connect2node(String ip, int port) {
        SocketChannel client = null;
        try {
            client = SocketChannel.open(new InetSocketAddress(ip, port));
            client.configureBlocking(false);
            client.register(selector, SelectionKey.OP_READ);

            if (!client.isConnected()) {
                Log.i("server connection", "error");
                return null;
            }
        } catch (IOException e) {
            String s = e.getMessage();
            e.printStackTrace();
        }

        return client;
    } 
```

注意我没有在（ip，端口）中启动另一个模拟器，这意味着连接总是会失败。当我开始调试上面的代码时，我发现

```
 if (!client.isConnected()) { 
```

然后它跳转到 catch 块：

```
 e.printStackTrace(); 
```

catch 块中的所有其他行都不执行，返回时客户端不为空。那么如何判断连接是否成功建立呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:15:25.540

isConnected() 测试毫无意义。如果 open() 连接失败，它会抛出异常。

# android - Android：是否可以从您的 .xml 布局中保存一些内容（即编辑文本）

> ID：10179735
> 
> 赞同：0
> 
> 时间：2012-04-16T18:40:33.713
> 
> 标签：android, xml-parsing, save, sharedpreferences, xml-layout

因此，通过选择一个按钮可能将值保存到 SD 卡（最好）或另一个 xml 布局？

我已经阅读了一些关于使用共享首选项的内容，您可以在其中保存任何原始数据：布尔值、浮点数、整数、长整数和字符串。我不是 100% 确定我正在寻找正确的区域。

例如...

XML

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Enter weight in lbs:" 
    android:textStyle="bold"/>

<EditText
    android:id="@+id/weight"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="number" />
</LinearLayout>

<LinearLayout    
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">    
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="40 yard dash time (4.20s - 8.50s):"
    android:textStyle="bold" />

<EditText
    android:id="@+id/fourtytime"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="numberDecimal" >
</EditText>
</LinearLayout> 
```

JAVA（请忽略 onCreate 方法中的微调器）

```
package com.aces.acesfootballuk;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class CoachesPage extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.coachespage);

    Spinner spinner1 = (Spinner) findViewById(R.id.spinnerdowns);
     ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.downs, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner1.setAdapter(adapter);

        Spinner spinner2 = (Spinner) findViewById(R.id.spinnerplayers);
         ArrayAdapter<CharSequence> adapter2 = ArrayAdapter.createFromResource(
                    this, R.array.players, android.R.layout.simple_spinner_item);
            adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spinner2.setAdapter(adapter2);
            }
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:36:46.387

```
// declare view in top level of class
private final TextView weightView;

// declare your preferences file name
private static final String PREF_FILE = "data.prefs";

// declare field values in your preferences
private static final String KEY_WEIGHT = "KEY_WEIGHT";

// create a reference the graphics objects in your onCreate method
weightView = (TextView)findViewById(R.id.weight);

// read the data in the textView (do this after some event where you want to read the text)
String weight = weightView.getText().toString();

// write the data to the shared prefs 
SharedPreferences settings = getSharedPreferences(PREF_FILE, 0);
SharedPreferences.Editor editor = settings.edit();
editor.putInt(KEY_WEIGHT, Integer.parseInt(weight));

// Commit the edit
editor.commit();

// if you want to read the data later
SharedPreferences settings = getSharedPreferences(PREF_FILE, 0);
int defaultWeight = -1;
int retrievedWeight = settings.getInt(KEY_WEIGHT, defaultVWeight); 
```

# c++ - 强制类型为特定大小

> ID：10179736
> 
> 赞同：2
> 
> 时间：2012-04-16T18:40:36.743
> 
> 标签：c++, visual-c++

我一直在学习 C++，我不太满意的一件事是数据类型大小不一致。根据部署在 int 上的系统的不同，可能是 16 位或 32 位等。

所以我认为用字节、字等数据类型创建自己的头文件可能是个好主意，这些数据类型被定义为特定大小，并将在任何平台上保持该大小。

两个问题。首先这是个好主意吗？还是会产生我不知道的其他问题？其次，您如何将类型定义为 8 位？我不能只说#define BYTE char，因为 char 会因平台而异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:47:40.287

幸运的是，其他人也注意到了同样的问题。在 C99 和 C++11 中（因此将编译器设置为与这两种模式之一兼容，编译器设置中应该有一个开关），他们添加了头文件 stdint.h（对于 C）和 cstdint（对于 C++）。如果你`#include <cstdint>`，你会得到 int8_t、int16_t、int32_t、int64_t 类型，并且对于无符号版本，同样以 au 为前缀。如果您的平台支持这些类型，它们将与其他几种类型一起在标题中定义。

如果您的编译器还不支持该标准（或者您由于无法控制的原因而被迫保留在 C++03 上），那么还有[Boost](http://www.boost.org/boost/cstdint.hpp)。

但是，只有在您完全关心类型的大小时才应该使用它。`int`并且`unsigned`在大多数情况下适用于一次性变量。`size_t`应该用于索引`std::vector`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:43:51.590

更好的是，使用 stdint.h 中已经定义的内容。有关更多详细信息，请参见[此处](http://www.nongnu.org/avr-libc/user-manual/group__avr__stdint.html)。类似的问题[在这里](https://stackoverflow.com/questions/10165559/dynamically-determine-the-type-of-interger-based-on-the-system-c/10165584#10165584)。

示例：int32_t 始终为 32 位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:47:13.120

首先，您需要弄清楚您是否真的关心物品的尺寸。如果您使用 int 来计算文件中的行数，您真的关心它是 32 位还是 64 位？如果您正在处理打包的二进制数据，则需要 BYTE、WORD 等，但通常不是出于任何其他原因。所以你可能会担心一些无关紧要的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T18:44:15.213

许多库都有自己的 .h 和大量 typedef 以具有恒定大小的类型。这在制作可移植代码时很有用，并且避免依赖于您当前正在使用的平台的标头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T19:04:14.610

如果您只想确保内置数据类型具有最小大小，则可以在标头中使用 std::numeric_limits 进行检查。

```
std::numeric_limits<int>::digits 
```

例如，将为您提供不带符号位的 int 的位数。和

```
std::numeric_limits<int>::max() 
```

会给你最大值。

# solr - 如何强制 solr QParserPlugin 不对关键字字段使用空格标记器？

> ID：10179737
> 
> 赞同：1
> 
> 时间：2012-04-16T18:40:38.880
> 
> 标签：solr, query-analyzer, solr-query-syntax

我在 Solr 模式中有关键字字段。

```
<fieldType name="text_keyword" class="solr.TextField" positionIncrementGap="100">
<analyzer>
<tokenizer class="solr.SimpleKeywordTokenizerFactory"/>
</analyzer>
</fieldType> 
```

当我尝试使用默认的 solr 查询或 dismax 查询搜索此字段时， `category:(Mouse Pad)`它会创建查询`(category:Mouse) AND (category:Pad)`

我想知道如果它是关键字字段左右，是否有办法不通过空格分割术语。

补充：我需要`SimpleKeywordTokenizerFactory`在查询中分析（小写没有空格分割），所以`raw`查询`term`解析器对我不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:11:50.873

您要输入此查询：

```
category:"Mouse Pad" 
```

查询语法已经提供了一种方法来做到这一点。引号用于短语。括号意味着不同的东西。如果需要，您可以编写自己的查询解析器，但我不推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:11:38.330

您可以使用[TermQParserPlugin](http://lucene.apache.org/solr/api/org/apache/solr/search/TermQParserPlugin.html)：

{!term f=category}鼠标垫

请注意，不执行任何分析，因此仅当您的字段的内部表示为“鼠标垫”（带有标题大小写）时，这才有效。

**编辑**（2012-04-17）：

如果您仍然希望执行分析，您需要做的就是通过添加反斜杠来转义空格：

{!lucene}category:鼠标\垫

# c# - 跟踪 com 对象 c# 的发布。

> ID：10179739
> 
> 赞同：5
> 
> 时间：2012-04-16T18:41:22.377
> 
> 标签：c#, com, interop, pinvoke

我有一个 ummaged 代码使用的 c# com 类。我可以调试它，但我不知道何时释放对象。如果它已在 c++ 中实现 desctur 将被调用，在 c# 上它将被释放到 GC。有什么方法可以追踪那一刻吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:45:44.733

维护非托管资源的托管类型应实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口。这告诉您的代码的使用者，当他们使用完对象时，他们需要调用`Dispose()`您的对象的实例（即，`using`尽可能将它们包装在一个块中）。

的正确实现`IDisposable`将在其终结器中释放本机资源，但客户端可以`Dispose()`比确定性释放非托管资源更快地调用。无论哪种方式，您都可以避免泄漏，但最好尽快调用`Dispose()`。

这是一个详细说明该过程[的SO问题。](https://stackoverflow.com/questions/574019/calling-null-on-a-class-vs-dispose/574659#574659)

# python - 如何从几个相同大小的元组创建字典？

> ID：10179743
> 
> 赞同：2
> 
> 时间：2012-04-16T18:41:39.113
> 
> 标签：python, dictionary, constructor

考虑我有以下两个元组：

```
keys=("second", "minute", "hour", "day")
values=(1, 60, 60, 24) 
```

我想创建一个字典，其中`keys`元组作为键，`values`元组作为值。这是我天真的做法：

```
d={}
for i in xrange(len(keys)):
    d[keys[i]] = values[i] 
```

有没有更简单更优雅的方式来做到这一点？

我主要使用 Python2.7，所以我更喜欢这个版本的特权。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T18:42:26.223

```
>>> keys=("second", "minute", "hour", "day")
>>> values=(1, 60, 60, 24)
>>> dict(zip(keys,values))
{'second': 1, 'hour': 60, 'minute': 60, 'day': 24} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-16T18:45:17.177

该`zip`函数将一对可迭代对象转换为对列表。构造`dict`函数接受多种形式的参数，其中一种是（键，值）对的序列。将两者放在一起，您将得到您想要的：

```
dict(zip(keys, values)) 
```

# oop - 编写一个对象必须以复杂方式相互交互的应用程序的最佳方法是什么？

> ID：10179744
> 
> 赞同：0
> 
> 时间：2012-04-16T18:41:43.357
> 
> 标签：oop, command, state

我对一般方法感兴趣，而不是特定的库或框架。

我尽量避免使用意大利面条代码式的条件。可能是我以完全错误的方式思考这些应用程序，但我似乎无法在网上找到任何有用的东西。

当存在多种相互影响的状态时，就会出现问题。这是一个例子：

想象一个具有以下能力的人：

走。跑。坐。

我用 Walk.execute()、Run.execute() 和 Sit.execute() 创建了一个命令模式。这些命令由用户输入或其他触发。当然，这样做的好处在于，如果需要对运行进行调试或修改，很容易知道在代码库中的何处查找。

现在我被要求添加一只狗。狗可以...

走。跑。睡觉。

如果一个人在走路而狗在跑，那么狗（用皮带拴着）跑得比他自己跑时慢。如果狗在睡觉，这个人会比平时坐的时间更长。换句话说，狗和人是相互影响的。

然后我被要求添加一个装有食物的冰箱。冰箱会影响狗和人，因为他们吃的量会影响他们跑步的能量等。

我不断被要求调整这个系统。“请让狗多睡一会儿，但前提是他和那个人一直在走路，冰箱几乎是空的。” 然后，后来：“请改变它，使人跑的量对狗的睡眠没有影响。”

我想避免用大量的条件来包装 DogSleep，我也想避免 DogSleepIfDogAndManHaveBeenWalkingAndFridgeIsAlmostEmpty。那是不可扩展的。

在任何时候，我们都可能想将冰箱从系统中取出。或者我们可能想以一些基本或微妙的方式改变它。

一个更真实的例子是媒体播放器，它可以显示为紧凑型播放器、扩展播放器（比如占据一半屏幕的播放器）和全屏播放器。所以有这三种屏幕状态。

同时，播放器可能正在显示图像、视频或文本。

如果它正在显示视频，则该视频可能正在播放、暂停、完成等。

视频的状态会影响不同屏幕状态的呈现方式。媒体的类型也会影响渲染。屏幕状态会影响其他对象（例如，无论出于何种原因，您应该能够在播放器紧凑时暂停视频，但在展开或全屏时不能暂停视频）。

当这些交互很复杂并且在两个（或多个）方向上流动时，使多个状态系统相互交互的最佳方式是什么？如何组织这样的代码，使其最容易调试和扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:54:17.997

在复杂系统中管理复杂性的主要方法是在现实世界中找到类比和概念，您可以以此为基础进行设计**和**实现。因此，当您谈论在某些系统中交互的人、狗和冰箱时，您的交互方法基于这些条目在现实世界中的交互方式——这在很大程度上是基于感知的输入和内部兴趣/目标/需求的自主性。当您谈论媒体播放器、图像和文本时，找到类比更加困难，但同样重要。

# c++ - 在 C++ 中调用类似于 unix shell 脚本的函数

> ID：10179747
> 
> 赞同：0
> 
> 时间：2012-04-16T18:42:01.637
> 
> 标签：c++, c, multithreading, visual-c++, unix

我想在 C++ 中并行调用函数，该函数将接受输入并执行一些格式化、验证、增强等。

在 unix 中，我可以在循环中调用它并将值作为参数传递给在 BG & 中运行的函数。

shell脚本中的示例是：

```
echo $value | while read arg1 arg2
do
     parser arg1 arg2 &
done
wait 
```

如何在 C++ 中使用/不使用多线程？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:46:35.747

为了“在后台”或“并行”运行，您必须使用多线程（在同一进程中使用多个线程，或使用多个进程，具体取决于具体情况）。每当你想在后台运行某些东西时，你应该创建一个新的线程/进程，并告诉它运行你想在后台运行的代码，并继续在原始线程/进程中执行其余代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:07:58.537

正如其他人所指出的，您必须创建一个子进程或一个线程。这两种技术都需要系统相关的代码。如果您想独立于系统并可以访问支持它的编译器（我不知道有任何编译器不支持），您可以使用[OpenMP](http://openmp.org)来执行多线程。但是，这种技术最适合所有线程执行相同操作的问题。

# wpf - WPF TextBlock 中的动态文本绑定

> ID：10179749
> 
> 赞同：0
> 
> 时间：2012-04-16T18:42:09.280
> 
> 标签：wpf, vb.net, multilingual

抱歉这个菜鸟问题......但我有一个相当大的单语应用程序，我必须制作多语言，这意味着没有资源文件。我没有使用文化信息的选项，但需要在运行时动态执行更多操作，以便用户可以在启动时更改语言或在应用程序中选择菜单时更改语言。我可以处理那部分。我意识到有设置这些值的传统方法，但我希望找到更好的解决方案。

我想做的是以下

首先，这甚至可能吗？我环顾四周，并没有真正找到任何接近我想做的事情。如果这是解决方案，我什至愿意创建一些用户控件。最后，我必须为按钮、标签、数据网格标题和消息执行此操作（这些很简单，哈哈）

任何想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:02:18.143

对的，这是可能的。试试这篇文章：[在 WPF 中创建国际化向导](http://www.codeproject.com/Articles/31837/Creating-an-Internationalized-Wizard-in-WPF)。

具体看下CurrentCulture为CurrentThread修改的应用程序的启动代码。

不要因为使用 WPF 的文化资源而感到被拒之门外。如文章中所述，可以通过“PublicResXFileCodeGenerator”使用不同的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:50:22.600

[MSDN Docs - CultureInfo.CurrentCulture 属性](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture.aspx)可能会有所帮助。

# c# - 我的 DbContext 如何包含两次相同的实体？

> ID：10179754
> 
> 赞同：1
> 
> 时间：2012-04-16T18:42:23.937
> 
> 标签：c#, entity-framework, entity-framework-4.3

我不得不做一些体操来更新一个包含对另一个实体的引用的实体，我不明白为什么，因为在我的测试项目中它没有。

问题似乎是 DbContext 包含具有相同主键但其他属性已更改的多个实体。

所以，我必须做类似下面的代码来正确设置引用。

如果我不这样做，我会在数据库中创建一个新的“Tax”实体，这不是我想要的，而是对现有实体的引用。

```
 if (!Database.Set<Tax>().Local.Any(e => e.ID == invoiceDetail.Tax.ID))
    Database.Taxes.Attach(invoiceDetail.Tax);
 else
    invoiceDetail.Tax = Database.Set<Tax>().Local.Single(e => e.ID == invoiceDetail.Tax.ID); 
```

为什么我必须手动检查 Local 对象才能使其工作？为什么 DbContext 包含多个主键相同的实体实例？我在 Code First (Poco) 中使用 EF4.3。

# jquery - 使用请求箱

> ID：10179756
> 
> 赞同：1
> 
> 时间：2012-04-16T18:42:27.497
> 
> 标签：jquery, asp.net, json

我正在尝试使用下面的代码将数据发布到[http://requestb.in/](http://requestb.in/)。但是，我继续收到 HTTP/1.1 404 Not Found。我只是想在下面的代码中查看我的数据的 JSON 格式。

感谢您提供任何可能使我找到解决方案的想法。我正在使用 Fiddler 来定位我在第一段中提到的错误。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="PostJSON.aspx.cs" Inherits="SimpleJSONPost.PostJSON" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">    
<script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>    
<script type="text/javascript">    
    $(document).ready(function () {
        $("#button1").click(function () {
            $.ajax({
                type: "POST",
                url: "http://requestb.in/1g8nene1",
                contentType: "application/json; charset=utf-8",
                data: JSON.Stringify({"name": "John"}),
                dataType: "json",
                success: function (msg) { alert("Post Succeeded: " + msg) },
                error: function (msg) { alert("Post Failed: " + msg) }
            });
        });
    });    
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="button1" runat="server" Text="PostJSON" />
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-08T02:24:57.163

可能出现的问题：

1.  404 可能是因为 RequestBin 使 URL 过期，而您的 URL 可能已过期。

2.  另一个问题可能是 JavaScript，它是`JSON.stringify`而不是`JSON.Stringify`.

3.  RequestBin 返回`text/plain`并且您正在使用`dataType: "json"`. 您应该使用`dataType: "text"`RequestBin 进行测试。

4.  RequestBin 不允许 CORS 导致：*XMLHttpRequest 无法加载“...”请求的资源上不存在“Access-Control-Allow-Origin”标头。因此，Origin '...' 不允许访问。*

即使您“修复” 1、2 和 3，第 4 项也不会让它起作用。

一个可能的解决方案是使用[PutsReq](http://putsreq.com)，它允许 CORS 并且您可以将响应配置为有效的 JSON。

示例 PustReq 响应生成器：

```
response.status = 200;
response.headers['Content-Type'] = 'application/json';
response.body = { 'msg': 'ok' }; 
```

您的 Ajax 调用（将*YOUR-TOKEN*替换为有效的 PutsReq 令牌）：

```
$.ajax({
    type: "POST",
    url: "https://putsreq.herokuapp.com/<YOUR-TOKEN>",
    contentType: "application/json; charset=utf-8",
    data: JSON.stringify({ "name": "John" }),
    dataType: "json",
    success: function (msg) { alert("Post Succeeded: " + msg) },
    error: function (msg) { alert("Post Failed: " + msg) }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:57:42.723

我不知道这是否与您的问题有关，但是您为什么要“字符串化”您发送的数据？

$.ajax({ type: "POST", url: "http://requestb.in/1g8nene1", contentType: "application/json; charset=utf-8", data: {"name": "John"} , dataType: "json", success: function (msg) { alert("Post Succeeded: " + msg) }, error: function (msg) { alert("Post Failed: " + msg) } });

将它作为一个普通对象发送，jQuery 会处理一切。我已经在本地测试中对其进行了更改以查看您的问题，并且响应状态对我来说是 200。

# hibernate - Hibernate 模板 SaveOrUpdateALL 主键自动生成

> ID：10179757
> 
> 赞同：0
> 
> 时间：2012-04-16T18:42:29.133
> 
> 标签：hibernate, jakarta-ee

我正在使用以下方法将对象集合保存到数据库中。

```
public Collection save(Collection instances) {

        try {
            this.getHibernateTemplate().saveOrUpdateAll(instances);
            this.getHibernateTemplate().flush();

        } catch (RuntimeException re) {

            throw re;
        }
        return instances;
    } 
```

实例的主键由 HibernateTemplate 自动生成。在 JVM 启动之后，当第一次调用此方法时，Hibernate 运行以下查询以获取要在实例上使用的 Max 主键。

从 table_name 中选择 max(Primary Key ID)

但是第二次执行该方法时，我没有看到正在执行此查询。看起来休眠将这个值存储在会话中的某个地方。

现在，如果表由不同的进程（比如说存储过程或 SQL）更新，则对上述方法的所有后续调用都会失败，并出现 ORA-00001：违反唯一约束 (SCHEMANAME.PRIMARY_KEY_CONSTRAINT) 异常。如果 JVM 重新启动，Hibernate 会再次执行 max (Primary Key) 生成查询，一切正常。

有人可以帮助我做些什么，以确保每次执行该方法时（而不仅仅是第一次）都运行主键自动生成查询。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:56:02.503

您可能选择了增量生成器，它将最大值存储在内存中，然后将其递增。当您有多个进程访问数据库时（即大部分时间），此策略不合适。

选择另一种策略（序列、表、本机，具体取决于您的数据库功能和偏好）。

有关详细信息，请参阅[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#mapping-declaration-id-generator](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#mapping-declaration-id-generator)

# java - MYSQL 特殊字符问题

> ID：10179760
> 
> 赞同：2
> 
> 时间：2012-04-16T18:42:50.453
> 
> 标签：java, mysql, sql, jdbc, character-encoding

这个问题困扰我很久了，我在网上搜索了很多次，尝试了很多次，但没有找到合适的解决方案。

我真的不知道该怎么做，如果你能帮助我，我会非常感激。
（对不起我糟糕的英语）。

**问题：**如何解决输入存档和 MYSql 表之间的字符集不兼容问题？

**问题：**从我的计算机上导入存档时，信息出现在我的数据库中，但一些字符`('ã', 'ç', 'á', etc..)`显示为`?`.

**附加信息**

1.  我正在使用 MYSql，我的版本和变量状态是：

    ```
    MySQL 版本：5.5.10  
    主机：本地主机  
    用户：根  
    港口 : 3306  
    服务器默认字符集：utf8  
    character_set_client : utf8  
    字符集连接：utf8  
    字符集数据库：utf8  
    字符集文件系统：二进制  
    字符集结果：utf8  
    字符集服务器：utf8  
    字符集系统：utf8  
    collat​​ion_connection：utf8_general_ci  
    collat​​ion_database：utf8_general_ci  
    collat​​ion_server : utf8_general_ci  
    完成类型：NO_CHAIN  
    并发插入：自动  

    ```

2.  正在使用的查询是：

    ```
    LOAD DATA LOCAL INFILE 'xxxxx/file.txt' 
    INTO TABLE xxxxTable 
    FIELDS TERMINATED BY ';' 
    LINES TERMINATED BY ' ' 
    IGNORE 1 LINES
    ( status_ordenar,numero,newstatus,rede,data_emissao,inicio,termino,tempo_indisp
    , cli_afet,qtd_cli_afet,cod_encerr,uf_ofensor,localidades,clientes_afetados 
    , especificacao,equipamentos,area_ofens,descricao_encerr,criticidade,cod_erro
    , observacao,id_falha_perc,id_falha_conf,nba,solucao,falhapercebida,falhaconfirmada
    , resp_i,resp_f,resp_ue,pre_handover,falha_identificada,report_netcool,tipo_falha
    , num_notificacao,equip_afetados,descricao) 
    ```

3.  关于正在导入的文件：我已经用 open office 带有 3 个字符集打开了文件：

    UTF8 - 用奇怪的字符代替 'ç'、'ã' 等...
    ISO-8859-1 - 好的。
    WIN-1252 - 好的。
    ASCII/美国 - 好的。

4.  已经测试：我已经在我的数据库中测试了一些字符集：latin1、utf-8、ascii，但它们都给了我相同的结果（？而不是 'á'、'ç' 等）。

5.  额外：我使用 Java 和 Java JDBC 来生成和发送查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:46:35.740

使用标准 Windows 记事本将字符保存为 UTF-8 文件（Notepad++ 也可以）。

确切的文件内容：

```
'ã', 'ç', 'á'

```

MySQL 版本：5.5.22
数据库字符集：utf8
数据库排序规则：utf8_general_ci

```
CREATE TABLE `abc` (
  `qwe` text
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

使用命令导入数据

```
LOAD DATA LOCAL INFILE 'C:/test/utf8.txt' 
INTO TABLE abc
FIELDS TERMINATED BY ';' 
LINES TERMINATED BY ' ' 
IGNORE 1 LINES
( qwe) 
```

结果（显示在 SQLyog 中）：
![SQLyog 结果](../Images/69806f1bb1452d748269458807444b0a.png)

* * *

因此，首先 - 您应该使用可靠的编辑器（记事本、记事本++）检查原始文件。如果文件损坏，那么你应该采取另一个文件。

其次 - 如果文件正常，请添加用于将数据发送到 MySql 的 Java 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:12:45.420

file.txt 保存在 ISO-8859-1 或 Windows-1252 中（这两个非常相似），并被 MySQL 解释为 UTF-8。这些是不相容的。

我怎么知道？

*   见第 3 点：文件在解释为 ISO-8859-1 或 Windows-1252 时正确显示。
*   见第 1 点：character_set_database：utf8

解决方案：要么将文件转换为 UTF-8，要么告诉 MySQL 将其解释为 ISO-8859-1 或 Windows-1252。

背景：您提供的字符（ã 等）在 windows-1252 中是单字节值，而这些字节在 UTF-8 中是非法值，因此会产生“？”（unicode 替换字符）。

[来自MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)的片段：

> LOAD DATA INFILE 语法
> 
> character_set_database 系统变量指示的字符集用于解释文件中的信息。

# ios - 如何在 iOS 中从地图 pin 获取位置

> ID：10179763
> 
> 赞同：1
> 
> 时间：2012-04-16T18:43:08.497
> 
> 标签：ios, mkmapview, mkannotation

我正在使用 MKMapView 对象，并且能够创建图钉并将它们放置在地图上。我现在要做的是从 pin 中获取信息。例如在我的

```
- (MKAnnotationView*) mapView:(MKMapView *)mapView viewForAnnotation (id<MKAnnotation>)annotation 
```

我创建了我的图钉并将它们设置在地图上。我还在创建用户单击图钉时使用的按钮。所有这些都运作良好。现在我的问题是，当单击该按钮时，如何从单击的图钉获取信息？下面是我目前如何设置它的一个小示例代码。任何建议将不胜感激。

```
- (MKAnnotationView*) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    MKPinAnnotationView *annView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"location"];
    annView.pinColor = MKPinAnnotationColorRed;
    annView.animatesDrop = YES;
    annView.canShowCallout = YES;
    annView.calloutOffset = CGPointMake(-5, 5);

    UIButton* callout = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [callout addTarget:self action:@selector(loadDetails:) forControlEvents:UIControlEventTouchUpInside];
    annView.rightCalloutAccessoryView = callout;
    return annView;
}

- (void)loadDetails:(id)sender
{
    //TODO: Get pin coordinates or address and match it back to an array of available address to show details in a new view
} 
```

任何意见是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:57:53.163

您应该创建一个派生自 MKPinAnnotationView 的类，该类具有`id<MkAnnotationView>`. 在上面的方法中，创建这个新对象而不是 MKPinAnnotationView 并将`id<MKAnnotation>`属性设置为传入的注解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:14:45.070

响应委托方法，而不是设置标注的目标

```
mapView:annotationView:calloutAccessoryControlTapped: 
```

将`annotationView`有一个`annotation`带有坐标的属性。

# terminal - 在多个终端上工作

> ID：10179768
> 
> 赞同：2
> 
> 时间：2012-04-16T18:43:30.763
> 
> 标签：terminal

我正在为我的项目使用 ubuntu 终端，有时我需要同时打开 5 个以上的终端，并且需要在它们之间进行调整以查看同时运行的多个程序的输出。我很难在终端之间切换。有什么东西可以将所有终端放在一个窗口中，让我的生活更简单吗？我在某处读到 konsole 为我这样做，但由于某种原因我无法调出 konsole，并且出现错误：bash: konsole: command not found。

非常感谢任何类型的信息/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:49:25.160

使用`tmux`（并最终使用`tmuxinator`）。它可能有一个轻微的学习曲线，但一旦你掌握了它就会是值得的！

[这](http://i.stack.imgur.com/VYcsU.png)是一个示例会话的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:48:52.987

改用 gnome-terminal。 [http://packages.ubuntu.com/ubuntu-desktop](http://packages.ubuntu.com/ubuntu-desktop)向我表明它带有 Ubuntu。它允许您打开多个选项卡。按`Ctrl`+ `Shift`+`T`或单击相应的菜单命令以打开新选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:50:09.983

您是否尝试过使用多个工作区？我正在使用 ubuntu 11，如果我发现我有一个终端布局，我想保持完整，我只需将所有这些终端放在第二个工作区。这可以通过右键单击终端并单击“移动到另一个工作区”来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T18:50:25.420

首先，考虑切换到[ubuntu 经典桌面](http://www.liberiangeek.net/2011/08/return-to-ubuntu-classic-desktop-in-ubuntu-11-10/)。在经典桌面中，您可以像在 um, windows 中一样移动和调整窗口大小，然后一次显示多个终端。

其次，考虑在一个终端窗口中创建新终端。这可以通过`CTRL``SHIFT``T`

第三，虽然对您的目的而言并没有比之前的建议更有用，但请查看[screen(1)](http://www.gnu.org/software/screen/)，它是旧的、有特色的并且不再维护，或者 tmux(1)，它仍然被维护。任何一个都可以从终端运行。两者都可以从[软件中心](http://www.pcworld.com/businesscenter/article/202571/how_to_install_apps_with_ubuntu_software_center.html)或突触安装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T18:50:55.340

如果您想尝试 Konsole，请先尝试安装它。如果有帮助，它就是 KDE 的一部分。

[http://konsole.kde.org/](http://konsole.kde.org/)

Ubuntu 带有 gnome iirc。正如 jasonspiro 指出的那样，它具有 gnome-terminal。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-04T06:08:52.707

您可以使用 gnome 终端。下面的脚本将打开 3 个运行相应命令的选项卡。

```
tab="--tab"

cmd01="bash -c 'command in 1st terminal';bash"
cmd02="bash -c 'command in 2nd terminal';bash"
cmd03="bash -c 'command in 3rd terminal';bash"

foo=""

foo+=($tab -e "$cmd01")
foo+=($tab -e "$cmd02")
foo+=($tab -e "$cmd03")

gnome-terminal "${foo[@]}"

exit 0 
```

# c# - 从 SQL 字符串中提取值并打印出来

> ID：10179771
> 
> 赞同：-3
> 
> 时间：2012-04-16T18:43:57.143
> 
> 标签：c#, asp.net, sql

我有这个查询，我想提取生成的信息并将它们打印在包含 WML 卡的 ASP.net 页面中。

```
string queryString = "select st.firstname + ' ' + st.lastname,se.year, c.coursename,c.NumberOfCredits,ri.mark  from Students st inner join RegisteredIn ri on ri.StudentId=st.id inner join Semester se on se.id=ri.SemesterId inner join Courses c on c.id=se.id "; 
```

注意：结果将类似于

```
First Semester  2010 
Student : Arin Rizk  
Course Name     No. of Credit      Mark
AAA                3            65    
BBB                3            23     
CCC                3            65     
DDD                3            58     
EEE                3            70 
```

我该怎么做 ？请让我看看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:47:21.370

您可以构建一个模型来表示您的数据：

```
public class StudentCourse
{
    public string Name { get; set; }
    public int Year { get; set; }

    ... and so on
} 
```

然后你可以创建一个方法来使用 ADO.NET 查询你的数据库并填充这个模型的集合：

```
public static IEnumerable<StudentCourse> GetCourses()
{
    using (var conn = new SqlConnection(SomeConnectionString))
    using (var cmd = conn.CreateCommand())
    {
        conn.Open();
        cmd.CommandText = "select st.firstname + ' ' + st.lastname, se.year, c.coursename, c.NumberOfCredits, ri.mark from Students st inner join RegisteredIn ri on ri.StudentId=st.id inner join Semester se on se.id=ri.SemesterId inner join Courses c on c.id=se.id";
        using (var reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                yield return new StudentCourse
                {
                    Name = reader.GetString(0),
                    Year = reader.GetInt32(1),
                    ... and so on
                }; 
            }
        }
    }
} 
```

最后，您可以将其绑定到页面中的 GridView：

```
public void Page_Load(object sender, EventArgs e)
{
    courses.DataSource = GetCourses();
    courses.DataBind();
} 
```

在您后面的代码中，您将拥有网格：

```
<asp:GridView ID="courses" runat="server" AutoGenerateColumns="true" /> 
```

或者，如果您不想使用 Grid 视图，只需使用 a`Repeater`并从模型中构建您喜欢的任何标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:47:06.590

您可以为此使用 Gridview 和 Itemtemplate... 您需要做的就是将您的 sql 查询与 gridview 绑定，并根据您的要求在 itemtemplate 中创建表。

# c++ - C++\SQL ODBC：从表中获取行

> ID：10179779
> 
> 赞同：0
> 
> 时间：2012-04-16T18:44:26.007
> 
> 标签：c++, sql-server, odbc

我正在尝试从“帐户”表中获取 rpw“AID”​​。

```
SQLCHAR AID;
wsprintf(String, "select [AID] from [Account] where [UserID] = '%s'", User);
Sql.RetCode = Sql.Execute(String);
Sql.RetCode = Sql.Fetch();
Sql.Clear();
sprintf(String, "Here my result: %s", SQL RETURN!);
MsgBox(String);

How can i get the [AID] from the table [Account] ? (For User 'idohadar') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:38:37.047

我看到您使用一些对象库来调用 ODBC 函数。我不知道这个库，但我使用来自“原始”API 的 ODBC 或将它包装在我的类中。

原始 API 很好地描述在：[http ://www.easysoft.com/developer/languages/c/odbc-tutorial-fetching-results.html](http://www.easysoft.com/developer/languages/c/odbc-tutorial-fetching-results.html)

您必须为值准备缓冲区，然后调用`SQLFetch()`并从该缓冲区读取。

# clojure - 物化，ToString

> ID：10179780
> 
> 赞同：3
> 
> 时间：2012-04-16T18:44:30.293
> 
> 标签：clojure, clojureclr

可能很明显，但鉴于此代码（来自[http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/reify](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/reify)）：

```
(defn reify-str []
  (let [f "foo"]
    (reify Object
      (ToString [this] f))))

(defn -main [& args]
  (println (reify-str))
  (System.Console/ReadLine)) 
```

为什么我得到这个输出？

```
#<ui$reify_str$reify__4722__4727 foo> 
```

代替：

```
foo 
```

如果有帮助，我正在 Windows 中运行 ClojureCLR。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T20:08:12.120

您的基本问题是 Clojure REPL 使用`print-method`，而不是`.toString`. 您必须`print-method`为您的类型定义。这对于具体化类型来说有点烦人，因为它使它们有点冗长。你必须做这样的事情：

```
(defn reify-str []
  (let [f "foo"
        r (reify Object
            (ToString [this] f))]
    (defmethod clojure.core/print-method (type r) [this writer] 
      (print-simple f writer))
    r)) 
```

（我只在原版 Clojure 中测试过，但我认为在 ClojureCLR 中是一样的。）

不过，此时您最好创建一个实际类型而不是具体化，因为您每次都在重新定义方法。（我想你可以做一些全局状态来避免这种必要性，但是……嗯，你可以明白为什么定义一个类型可能更可取。）

# android - 如何将分辨率转换为dpi

> ID：10179784
> 
> 赞同：1
> 
> 时间：2012-04-16T18:44:54.390
> 
> 标签：android

我做了分析，发现我的应用程序的大多数用户都是三星 Galaxy S2 和三星 Galaxy Note。在研究他们的技术规格时，我发现： Galaxy S2：480 x 800 像素，4.3' 显示屏

Galaxy Note: 1280 x 800, 5.3”屏幕

如何将这些分类为布局大小和密度级别？我想我可以计算出android开发页面中提到的布局大小但是我无法知道密度级别（低，中高xhigh）。他们说我需要 dpi 但在功能规范中，我很少看到 dpi，我只看到上述分辨率 谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T19:00:33.027

先计算密度**Density=平方根((wp*wp)+(hp*hp))/di**

其中 wp 是以像素为单位的宽度分辨率，hp 是以像素为单位的高度分辨率，di 是以英寸为单位的对角线尺寸。对于 S2，它将达到 ~208。

**ldpi ~120dpi,mdpi ~160dpi, hdpi~240dpi, xhdpi ~320dpi** . 从这些 dpi 值进行比较

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:52:43.300

不确定我是否理解正确，但您可以从 DisplayMetrics 类中请求密度级别和 dpi。使用分辨率和密度，您可以估计显示器的尺寸。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

# java - Java中是否允许空字符串作为枚举成员

> ID：10179785
> 
> 赞同：3
> 
> 时间：2012-04-16T18:44:55.560
> 
> 标签：java, ingres

我对一些遗留代码有一点问题。一张票要求我编写一个脚本来测试流程的有效性；但是，当脚本运行时，我不断收到此异常：

```
 java.lang.IllegalArgumentException: No enum const class edu.cmu.s3.common.enums.RegistrationStatus.; 
```

作为记录，正在使用的数据库是一个旧的 Ingres 遗留系统，因此空值被表示为空字符串——非常漂亮，我必须补充一下。

无论如何，看起来每当遇到空字符串时，它都会在创建枚举时失败。不过，我检查了枚举，它包含这个成员：

```
BLANK("", "Blank") 
```

这会让我认为空字符串确实是一个有效的参数，但看起来不是。

CAN 枚举使用空字符串作为参数，还是我需要更新比我最初假设的更多的遗留代码？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T18:47:32.847

空字符串是*枚举构造函数的有效参数*- 但它不是有效的枚举*名称*。

每个枚举值名称都必须是有效的 Java 标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:48:52.543

如果您使用从数据库`Enum.valueOf(String)`解析`Strings`为`Enums`，那么您的问题是名称本身`valueOf`的键`Enum`，即`BLANK`.

这对你有用：`Enum.valueOf( "BLANK" )`

但不是：`Enum.valueOf( "" )`

如果您想`Enums`基于传递到构造函数中的其他字段进行解析`Enum`，则必须自己编写该代码。

# java - PowerMock 和模拟 oracle ArrayDescriptor

> ID：10179789
> 
> 赞同：0
> 
> 时间：2012-04-16T18:45:13.197
> 
> 标签：java, oracle, testing, mockito, powermock

我有嘲笑 oracles ArrayDescriptor 的问题。这是一个代码示例：假设我有类似这样的方法

```
 public void doSomething(){
    //some code here
    ArrayDescriptor arrayDescriptor = ArrayDescriptor.createDescriptor("TEST", connection);
    //some more code
     } 
```

我应该如何模拟该 arrayDescriptor 部分？我试过这样的事情：

```
PowerMock.mockStatic(ArrayDescriptor.class);
//connection is mocked
ArrayDescriptor arrayDescriptor = Mockito.mock(ArrayDescriptor.class);
//connection is also mocked
Mockito.when(ArrayDescriptor.createDescriptor("TEST", connection).thenReturn(arrayDescriptor); 
```

但这不起作用，抛出某种与 SQLName 相关的 nullpointerException，我试图模拟 SQLName，但没有帮助。

希望有人可以提供帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:47:09.163

Move the call to `ArrayDescriptor.createDescriptor( ... )` off into a one-line method of its own class (which can be an inner class of the class where you're using it). Add a field to the class where you're using this call, that has an instance of the new class. Use either a setter or a special constructor to set this field to a value that's different from the usual one. Then mock the inner class, and have it return a mock of `ArrayDescriptor`. So you might get something like this.

```
public class MyClass{

    class ArrayDescriptorFactory{
        makeArrayDescriptor(String name, Connection connection){
            return ArrayDescriptor.createDescriptor(name, connection);
        }
    }

    private ArrayDescriptorFactory factory;

    public MyClass(){
        this( new ArrayDescriptorFactory());
    }

    MyClass(ArrayDescriptorFactory factory){
        this.factory = factory;
    }

    public void doSomething(){
        ... do stuff ...
        factory.makeArrayDescriptor( "something", someConnection );
        ... do more stuff ...
    }
} 
```

and in the test

```
@Mock private MyClass.ArrayDescriptorFactory mockFactory;
@Mock private ArrayDescriptor mockArrayDescriptor;

...

initMocks( this );
when( mockFactory.makeArrayDescriptor( anyString(), any( Connection.class )))
.thenReturn( mockArrayDescriptor );
MyClass toTest = new MyClass( mockFactory ); 
```

# c++ - 类中的奇怪实例化

> ID：10179803
> 
> 赞同：1
> 
> 时间：2012-04-16T18:46:10.973
> 
> 标签：c++

我正在查看一些开源代码，他们在定义为的类中列出了一些奇怪的实例：

`Obj *&obj;`

我不知道这是可能的！这是什么意思，甚至做什么？在我看来，指针和参考符号应该抵消。但也许它做了一些我不知道的特别的事情？

查看代码，他们使用它，就好像实例是一个指针一样。即：`obj->method()`。那么为什么他们包括`&`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:52:20.393

那是对指针的引用。这样想：

```
A *pa = new A(); //pa is pointer to A

A * & rpa = pa; //rpa is reference to pa

rpa = nullptr;  //it modifies pa as well

if ( pa == nullptr )
{
     std::cout << "pa is nullptr" << std::endl;
} 
```

它将在控制台上打印*“pa is nullptr” 。*

如果你觉得`A * &`难以阅读，那么你可以使用 typedef 作为：

```
typedef A* PA;

PA & rpa = pa; //same as before 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:53:35.080

像您编写的代码不会编译，因为它声明了对指针的引用，但引用未初始化。例如，以下代码将无法编译：

```
string *&s; 
```

（除非它是类中的成员），但这将：

```
string *p;
string *&s = p; 
```

另一种可能性是，这只是一个错字，他们打算写`Obj *obj;`；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:57:12.290

那是对指针的引用。毕竟，指针也是一个值。您可以使用它来重新分配调用者持有的指针。为了显示：

```
bool allocate(t_object*& p) {
  assert(0 == p);
  p = new t_object;
  ...
} 
```

然后：

```
t_object* obj(0);
if (!allocate(obj)) {...}
// obj now points to something 
```

有些人发现它最直接的替代方案 ( `bool allocate(t_object** p)`) 更容易管理/阅读。

As to why a reference to a pointer was chosen in the program -- there's not enough context, but you can ask yourself if the program would be *better* if the member were declared `t_object** const`?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T18:47:36.800

它是对指针的引用。指针是一种数据类型，为什么不允许您引用一个指针？

它与任何其他类型引用的含义相同——它是指针的别名。

# php - CakePHP：$this->paginate() 和服务器挂起

> ID：10179804
> 
> 赞同：0
> 
> 时间：2012-04-16T18:46:23.250
> 
> 标签：php, cakephp, optimization, paginator

所以，我有这段代码：

```
class ProductsController extends AppController {
var $name = 'Products';
var $paginate = array('limit' => 5);    // sets the number of entries per page  

function index() {      
    $this->Product->recursive = 0;
    // works up to here fine
    $this->set('products', $this->paginate());  // makes the browser hangs
    }
} 
```

当我去`../products/index`浏览器只是一种挂起。它尝试加载几分钟而不给出任何错误消息，我被迫重新启动 Apache (XAMPP) 或等待 60 秒。问题似乎`$this->paginate()`与产品控制器的所有关联有关。它有 2 个 belongsTo（属于较小的表）和 1 个 hasOne（有一个大表，20K+ 行）。

我`hasOne`在产品模型中添加了一个关系，这似乎是导致挂起的原因。当我删除这种关系时，URL 会起作用并显示所有项目。但是，`hasOne`当我这样做时，这种关系不会导致任何错误，例如`../products/view/1`.

关于如何使其易于管理的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:53:25.413

您可以查看一些内容来开始调试。首先是您的日志。分别检查 SQL 和 PHP 日志中的慢查询和超时错误。

如果您的 Product 模型有很多关联，我建议使用`ContainableBehavior`. 实际上，我建议始终设置`$recurisve = -1;`模型并使用 Containable 来获取关联。它将显着加快您的应用程序。为什么要提取视图中不使用的数据？

在您的 app_model 中，添加以下行为：

```
class AppModel extends Model {

  var $recursive = -1;

  var $actsAs = array('Containable');
} 
```

然后修改您的查找查询以获取您想要的关联数据：

```
$this->Product->find('all', array(
  'contain' => array
    'Category',
    'Type'
  )
)); 
```

其中类别和类型与产品相关联。这将告诉 Cake 只提取相关的数据。

然后查看您的查询。使用[DebugKit](https://github.com/cakephp/debug_kit)帮助您分析计时和慢查询。

这些是加快查找速度的一些基本方法。有大量信息可用于优化 CakePHP 应用程序，这听起来可能是问题所在。

# objective-c - 简单的推特程序不起作用

> ID：10179806
> 
> 赞同：0
> 
> 时间：2012-04-16T18:46:30.840
> 
> 标签：objective-c, ios, xcode, twitter

我正在使用本教程来练习创建一个非常基本的 Twitter 应用程序：http: [//www.codeproject.com/Articles/312325/Making-a-simple-Twitter-app-using-iOS-5-Xcode-4-2 #setting-up-the-table-view](http://www.codeproject.com/Articles/312325/Making-a-simple-Twitter-app-using-iOS-5-Xcode-4-2#setting-up-the-table-view)

我的应用程序的唯一区别是我只使用 tableView ViewController。我似乎无法让它工作。

视图控制器.h

```
@interface ViewController : UIViewController {

NSArray *tweets;
}
-(void)fetchTweets;

@property (retain, nonatomic) IBOutlet UITableView *tableView;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "Twitter/Twitter.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize tableView = _tableView;

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
[self fetchTweets];
}

- (void)fetchTweets
{
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSData* data = [NSData dataWithContentsOfURL:
                    [NSURL URLWithString: @"https://api.twitter.com/1/statuses/public_timeline.json"]];

    NSError* error;

    tweets = [NSJSONSerialization JSONObjectWithData:data
                                             options:kNilOptions
                                               error:&error];

    dispatch_async(dispatch_get_main_queue(), ^{
        [self.tableView reloadData];
    });
});
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return tweets.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"TweetCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSDictionary *tweet = [tweets objectAtIndex:indexPath.row];
NSString *text = [tweet objectForKey:@"text"];
NSString *name = [[tweet objectForKey:@"user"] objectForKey:@"name"];

cell.textLabel.text = text;
cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", name];

return cell;
}

- (void)viewDidUnload
{
_tableView = nil;
[self setTableView:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} else {
    return YES;
}
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:53:56.737

您忘记为您的表定义委托和数据源，并且没有按照我在您的代码中看到的正确实施协议，

试试你的 .h 文件：

```
@interface ViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
{
    // your implementation...
} 
```

并在您的 .m 文件中`viewDidLoad`

```
self.tableView.dataSource = self;
self.tableView.delegate = self; 
```

在您为此表定义委托和数据源之前，该`numberOfRows`, `cellForRow`, 等... 方法将不起作用:)

# grails - Grails，createLink 生成错误的链接

> ID：10179807
> 
> 赞同：2
> 
> 时间：2012-04-16T18:46:32.290
> 
> 标签：grails, url-mapping

我在使用 createlink 时遇到了一个奇怪的问题。我的 gsp 里有这个

```
<g:createLink controller="uni" action="show" id="1" /> 
```

我希望它会产生类似的东西

```
"/uni/show/1" 
```

然而，它实际上给了我

```
"/uni/create?id=1" 
```

我也尝试过内联版本，

```
${createLink(controller:'uni', action:'show', id:1) } 
```

这也给了

```
"/uni/create?id=1" 
```

任何帮助是极大的赞赏！谢谢！

**更新**

我设法通过为“显示”操作添加一个 url 映射来修复它

问题可能来自 url 映射错误。我在我的 urlmappings.groovy 中定义了这个

```
 "/uni/create"(controller:"uni"){
        action = [GET:"create", POST:"createDetail"]
    } 
```

这以某种方式导致它生成错误的链接。不知道为什么，如果有人能解释一下就好了

在“创建”之前添加此行后，问题就消失了。

```
 "/uni/show/$id"(controller:"uni",action:"show") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:13:18.433

您可能在 UrlMappings.groovy 中遇到问题。

反向 url 映射中有一些[未解决的错误](http://bit.ly/J0nnTn)。您使用的是什么 Grails 版本？

The best way to get around some of the bugs is to use [named url mappings](http://grails.org/doc/latest/guide/theWebLayer.html#namedMappings%5D). In your case that shouldn't be necessary.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:42:15.303

if the action is not defined you will get default behavior

[http://grails.org/doc/1.1/ref/Tags/createLink.html](http://grails.org/doc/1.1/ref/Tags/createLink.html)

action (optional) - The name of the action to use in the link, if not specified the default action will be linked

# javascript - 在 JavaScript 中使用 for...of 语法获取循环计数器/索引

> ID：10179815
> 
> 赞同：488
> 
> 时间：2012-04-16T18:47:04.697
> 
> 标签：javascript, for-loop, foreach, counter

> ### 警告：
> 
> 问题仍然适用于`for…of`循环。> 不要`for…in`用来迭代**Array**，用它来迭代对象的*属性*。也就是说，这

* * *

我了解`for…in`JavaScript 中的基本语法如下所示：

```
for (var obj in myArray) {
    // ...
} 
```

但是我如何获得循环*计数器/索引*？

### 我知道我可能会做类似的事情：

```
var i = 0;
for (var obj in myArray) {
    alert(i)
    i++
} 
```

### 甚至是老好人：

```
for (var i = 0; i < myArray.length; i++) {
    var obj = myArray[i]
    alert(i)
} 
```

但我宁愿使用更简单的`for-in`循环。我认为它们看起来更好，更有意义。

有没有更简单或更优雅的方法？

* * *

### 在 Python 中很容易：

```
for i, obj in enumerate(myArray):
    print i 
```

* * *

## 回答 #1

> 赞同：824
> 
> 时间：2012-04-16T18:49:16.917

`for…in`迭代属性名称，而不是值，并且[以未指定的顺序进行](https://www.ecma-international.org/ecma-262/6.0/index.html#sec-ordinary-object-internal-methods-and-internal-slots-enumerate)（是的，即使在 ES6 之后）。您不应该使用它来迭代数组。对于他们来说，有 ES5 的`forEach`方法可以将值和索引都传递给你给它的函数：

```
var myArray = [123, 15, 187, 32];

myArray.forEach(function (value, i) {
    console.log('%d: %s', i, value);
});

// Outputs:
// 0: 123
// 1: 15
// 2: 187
// 3: 32 
```

或者 ES6 的[`Array.prototype.entries`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/entries)，现在支持当前浏览器版本：

```
for (const [i, value] of myArray.entries()) {
    console.log('%d: %s', i, value);
} 
```

对于一般的可迭代对象（您将使用`for…of`循环而不是 a `for…in`），没有任何内置的，但是：

```
function* enumerate(iterable) {
    let i = 0;

    for (const x of iterable) {
        yield [i, x];
        i++;
    }
}

for (const [i, obj] of enumerate(myArray)) {
    console.log(i, obj);
} 
```

[**演示**](https://babeljs.io/repl/#?evaluate=true&presets=es2015%2Cstage-2&code=function*%20enumerate(iterable)%20%7B%0A%20%20%20%20let%20i%20%3D%200%3B%0A%0A%20%20%20%20for%20(const%20x%20of%20iterable)%20%7B%0A%20%20%20%20%20%20%20%20yield%20%5Bi%2C%20x%5D%3B%0A%20%20%20%20%20%20%20%20i%2B%2B%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afor%20(const%20%5Bi%2C%20obj%5D%20of%20enumerate(%5B'hello'%2C%20'world'%5D))%20%7B%0A%20%20%20%20console.log(i%2C%20obj)%3B%0A%7D)

如果您确实是指`for…in`枚举属性 – 您将需要一个额外的计数器。`Object.keys(obj).forEach`可以工作，但它只包括*自己的*属性；`for…in`包括原型链上任何地方的可枚举属性。

* * *

## 回答 #2

> 赞同：296
> 
> 时间：2016-12-19T11:17:43.253

在 ES6 中，最好使用`for... of`循环。`for... of`您可以像这样获取索引

```
for (let [index, val] of array.entries()) {
  // your code goes here    
} 
```

请注意，它`Array.entries()`返回[一个迭代器](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/entries)，这使得它可以在 for-of 循​​环中工作；不要将此与[Object.entries()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)混淆，后者返回一个键值对*数组。*

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2018-02-10T04:17:42.677

这个怎么样

```
let numbers = [1,2,3,4,5]
numbers.forEach((number, index) => console.log(`${index}:${number}`)) 
```

`array.forEach`此方法有一个`index`参数，该参数是数组中正在处理的当前元素的索引。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-01-12T09:36:00.010

小数组集合的解决方案：

```
for (var obj in arr) {
    var i = Object.keys(arr).indexOf(obj);
} 
```

**arr** - ARRAY， **obj** - 当前元素的 KEY， **i** - COUNTER/INDEX

**注意：**方法*keys()*不适用于 IE 版本 <9，您应该使用*Polyfill*代码。 [https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/keys](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-04-16T18:49:22.730

For-in-loops 遍历对象的属性。不要将它们用于数组，即使它们有时会起作用。

对象属性没有索引，它们都是相等的，不需要按确定的顺序运行。如果您想计算属性，则必须设置额外的计数器（就像您在第一个示例中所做的那样）。

循环数组：

```
var a = [];
for (var i=0; i<a.length; i++) {
    i // is the index
    a[i] // is the item
} 
```

循环对象：

```
var o = {};
for (var prop in o) {
    prop // is the property name
    o[prop] // is the property value - the item
} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-04-16T18:55:37.170

正如其他人所说，您不应该使用 for..in 来遍历数组。

```
for ( var i = 0, len = myArray.length; i < len; i++ ) { ... } 
```

如果你想要更简洁的语法，你可以使用 forEach：

```
myArray.forEach( function ( val, i ) { ... } ); 
```

如果要使用此方法，请确保包含 ES5 shim 以添加对旧浏览器的支持。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-04-13T12:29:57.853

rushUp给出的答案是正确的，但这会更方便

```
for (let [index, val] of array.entries() || []) {
   // your code goes here    
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-04-22T09:17:08.880

除了每个人都发布的非常好的答案之外，我想补充一点，性能最高的解决方案是 ES6 `entries`。对于这里的许多开发人员来说，这似乎是矛盾的，所以我创建了[这个 perf benchamrk](https://jsperf.com/enumerate/1)。

[![在此处输入图像描述](../Images/ea02a091ab4899d73a8e9e91af18f1bf.png)](https://i.stack.imgur.com/2WAkC.png)

它快了约 6 倍。主要是因为不需要：a）多次访问数组，b）转换索引。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-24T14:13:42.923

这是一个`eachWithIndex`适用于任何可迭代的函数。

您还可以编写一个类似的函数`eachWithKey`，使用`for...in`.

```
// example generator (returns an iterator that can only be iterated once)
function* eachFromTo(start, end) { for (let i = start; i <= end; i++) yield i }

// convers an iterable to an array (potential infinite loop)
function eachToArray(iterable) {
    const result = []
    for (const val of iterable) result.push(val)
    return result
}

// yields every value and index of an iterable (array, generator, ...)
function* eachWithIndex(iterable) {
    const shared = new Array(2)
    shared[1] = 0
    for (shared[0] of iterable) {
        yield shared
        shared[1]++
    }
}

console.log('iterate values and indexes from a generator')
for (const [val, i] of eachWithIndex(eachFromTo(10, 13))) console.log(val, i)

console.log('create an array')
const anArray = eachToArray(eachFromTo(10, 13))
console.log(anArray)

console.log('iterate values and indexes from an array')
for (const [val, i] of eachWithIndex(anArray)) console.log(val, i) 
```

生成器的好处是它们很懒，可以将另一个生成器的结果作为参数。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-04T11:09:39.540

这是我的复合迭代器版本，它产生一个索引和任何传递的生成器函数的值，并带有一个（慢）素数搜索的例子：

```
const eachWithIndex = (iterable) => {
  return {
    *[Symbol.iterator]() {
      let i = 0
      for(let val of iteratable) {
        i++
          yield [i, val]
      }
    }
  }

}

const isPrime = (n) => {
  for (i = 2; i < Math.floor(Math.sqrt(n) + 1); i++) {
    if (n % i == 0) {
      return false
    }
  }
  return true
}

let primes = {
  *[Symbol.iterator]() {
    let candidate = 2
    while (true) {
      if (isPrime(candidate)) yield candidate
        candidate++
    }
  }
}

for (const [i, prime] of eachWithIndex(primes)) {
  console.log(i, prime)
  if (i === 100) break
}
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-06-23T07:40:54.943

要在数组上使用 for..of 循环并检索索引，您可以使用`array1.indexOf(element)`它将返回循环中元素的索引值。您可以使用此方法返回索引和值。

```
array1 = ['a', 'b', 'c']
for (element of array1) {
    console.log(array1.indexOf(element), element) // 0 a 1 b 2 c
}
```

正如评论中提到的，当数组包含非唯一值时，这将返回错误索引。（考虑到 arr = ['a', 'b', 'c', 'a']，arr[3] 的索引将返回 0 而不是 3）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-18T06:23:58.547

通过 js 中的 for of 循环系统，你可以找到所有索引为 no 的数组元素...

```
const menus = ['Bengali', 'Italiano', 'Americano', 'Thai', 'Chinese'];

for (const menus of menu.entries()) {
console.log(menus);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-03-05T11:21:12.370

在这种情况下，使用简单的枚举函数来获得满意的答案。

```
var = [100, 254, 3, 55]
for a in enumerate(var):
print(a) 
```

> 输出：

```
(0, 100)
(1, 254)
(2, 3)
(3, 55) 
```

# wordpress - 将类添加到类别 Wordpress

> ID：10179816
> 
> 赞同：0
> 
> 时间：2012-04-16T18:47:05.567
> 
> 标签：wordpress, class, categories

如果显示类别但我无法让它工作，我想在我的 css 中添加一个类。

我将此添加到我的标题中：

if ( is_category('areas')) { echo 'class="myclass" '; }

我想将这个类添加到我的样式表到这个类别中的任何页面，这样它就会改变该类别中任何页面的外观。但它不起作用。

我已经阅读了很多法典，这就是我能做的全部

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:00:25.173

可能最容易提升 WP 的身体等级；这将放入您需要的所有身体课程。和

```
<body <?php body_class(); ?>> 
```

在 header.php 中，它会输出类似

```
<body class="archive category category-my-category-name category-1 logged-in"> 
```

在 CSS 中调用那个类，即

```
body.category-my-category-name #my-div {background-color:#fff;} 
```

见[http://codex.wordpress.org/Function_Reference/body_class](http://codex.wordpress.org/Function_Reference/body_class)

# mysql - MySQL 嵌套选择

> ID：10179821
> 
> 赞同：1
> 
> 时间：2012-04-16T18:47:28.313
> 
> 标签：mysql, sql, aggregate-functions, pivot-table

我对这个查询感到困惑。我有一个看起来像这样的表（简化）：

```
Date         Weight kg
-------------------
2012-04-16     12.4
2012-04-17      9.6
2012-04-16      5.4
2012-04-18      2.8
2012-04-16      4.5
...             ... 
```

我希望查询返回此结果：

```
Week.no.  <3kg  3-7kg   >7kg
----------------------------
16         2.8    9.9   22.0
...        ...    ...   .... 
```

这是我到目前为止所拥有的：

```
SELECT *, CONCAT(WEEK(`Date`)) AS Week, SUM(`Weight`) AS TotalWeight,
   (SELECT SUM(`Weight`) FROM tbl_fangster WHERE `Weight` < 3 AND
   `Date` >= '2012-04-01 00:00:00' AND `Date` <= '2012-04-30 00:00:00'
   AND `Species` = 'Salmon' ) AS SumSmall
FROM tbl_fangster
WHERE `Date` >= '2012-04-01 00:00:00'
AND `Date` <= '2012-04-30 00:00:00'
AND `Species` = 'Salmon'
GROUP BY CONCAT(WEEK(`Date`)) 
```

但是 SumSmall 在每一行上返回相同的数字，即总 SumSmall 而不是每周的 SumSmall。我试图将我的 GROUP 子句复制粘贴到子查询中，但它没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:51:18.530

使用 CASE 语句来处理各种条件。

```
SELECT *, CONCAT(WEEK(`Date`)) AS Week, SUM(`Weight`) AS TotalWeight,
       SUM(CASE WHEN Weight < 3 THEN Weight ELSE 0 END) AS SumSmall,
       SUM(CASE WHEN Weight >= 3 AND Weight <= 7 THEN Weight ELSE 0 END) AS SumMedium,
       SUM(CASE WHEN Weight > 7 THEN Weight ELSE 0 END) AS SumLarge
FROM tbl_fangster
WHERE `Date` >= '2012-04-01 00:00:00'
AND `Date` <= '2012-04-30 00:00:00'
AND `Species` = 'Salmon'
GROUP BY CONCAT(WEEK(`Date`)) 
```

# java - Java中的公共字段

> ID：10179825
> 
> 赞同：6
> 
> 时间：2012-04-16T18:47:38.503
> 
> 标签：java, glassfish, managed-bean

我有这个托管 bean：

```
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;
import javax.sql.DataSource;
import javax.annotation.Resource;
import javax.faces.context.FacesContext;
import javax.inject.Inject;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
// or import javax.faces.bean.ManagedBean;   

import org.glassfish.osgicdi.OSGiService;

@Named("ApplicationController")
@SessionScoped

public class Tab1Page implements Serializable {
    public String actionString;

    public Tab1Page() {
    }
    public static final long serialVersionUID = 254415216070877770L;
// Constants
    public final static String hashKey = "tab1PageTab";
    public String actApplicationControllerionString = "";

    @PostConstruct
    public void post() {
        Format formatter;
        Date date = new Date();

        // Time formate 01:12:53 AM
        formatter = new SimpleDateFormat("hh:mm:ss a");
        tabName = formatter.format(date);
        System.out.println("Tab1Page\t" + tabName + "\t@PostConstruct...");
    }

    @PreDestroy
    public void destroy() {
        Format formatter;
        Date date = new Date();

        // Time formate 01:12:53 AM
        formatter = new SimpleDateFormat("hh:mm:ss a");
        tabName = formatter.format(date);
        System.out.println("Tab1Page\t" + tabName + "\t@PreDestroy...");
    }
    String tabName;

    public String getTabName() {
        return this.getClass().getName().substring(this.getClass().getName().lastIndexOf(".")) + "\t" + tabName;
    }

    public void setTabName(String tabName) {
        this.tabName = tabName;
    }

    public String getActionString() {
        String actionString = null;
        return actionString;
    }

    public void setActionString(String actionString) {
        this.actionString = actionString;
    }
} 
```

当我尝试在 Glassfish 上部署它时，出现此错误：

```
[#|2012-04-16T21:42:51.689+0300|INFO|glassfish3.1.2|org.glassfish.osgiweb|_ThreadID=63;_ThreadName=Thread-2;|Removed bundle 416 against context path /HM_57-1.0-SNAPSHOT |#]

[#|2012-04-16T21:42:51.690+0300|WARNING|glassfish3.1.2|org.glassfish.osgijavaeebase|_ThreadID=63;_ThreadName=Thread-2;|Failed to deploy bundle com.DX_57.History-Module-57 [416]
org.glassfish.osgijavaeebase.DeploymentException: Deployment of com.DX_57.History-Module-57 [416] failed because of following reason: Failed while deploying bundle com.DX_57.History-Module-57 [416] : java.lang.RuntimeException: Failed to deploy bundle [ com.DX_57.History-Module-57 [416] ], root cause: Exception while loading the app
    at org.glassfish.osgijavaeebase.AbstractOSGiDeployer.deploy(AbstractOSGiDeployer.java:125)
    at org.glassfish.osgijavaeebase.OSGiContainer.deploy(OSGiContainer.java:154)
    at org.glassfish.osgijavaeebase.JavaEEExtender.deploy(JavaEEExtender.java:107)
    at org.glassfish.osgijavaeebase.JavaEEExtender.access$200(JavaEEExtender.java:61)
    at org.glassfish.osgijavaeebase.JavaEEExtender$HybridBundleTrackerCustomizer$1.call(JavaEEExtender.java:151)
    at org.glassfish.osgijavaeebase.JavaEEExtender$HybridBundleTrackerCustomizer$1.call(JavaEEExtender.java:148)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException: Failed to deploy bundle [ com.DX_57.History-Module-57 [416] ], root cause: Exception while loading the app
    at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.deploy(OSGiDeploymentRequest.java:196)
    at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.execute(OSGiDeploymentRequest.java:118)
    at org.glassfish.osgijavaeebase.AbstractOSGiDeployer.deploy(AbstractOSGiDeployer.java:121)
    ... 10 more
Caused by: org.glassfish.deployment.common.DeploymentException: WELD-000075 Normal scoped managed bean implementation class has a public field:  public@Named @SessionScoped class com.DX_57.HM_57.Tab1Page
    at org.glassfish.weld.WeldDeployer.event(WeldDeployer.java:181)
    at org.glassfish.kernel.event.EventsImpl.send(EventsImpl.java:128)
    at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:277)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:460)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.osgijavaeebase.OSGiDeploymentRequest.deploy(OSGiDeploymentRequest.java:183)
    ... 12 more
Caused by: org.jboss.weld.exceptions.DefinitionException: WELD-000075 Normal scoped managed bean implementation class has a public field:  public@Named @SessionScoped class com.DX_57.HM_57.Tab1Page
    at org.jboss.weld.bean.ManagedBean.checkBeanImplementation(ManagedBean.java:438)
    at org.jboss.weld.bean.AbstractClassBean.initialize(AbstractClassBean.java:191)
    at org.jboss.weld.bean.ManagedBean.initialize(ManagedBean.java:322)
    at org.jboss.weld.bootstrap.AbstractBeanDeployer.deploy(AbstractBeanDeployer.java:115)
    at org.jboss.weld.bootstrap.BeanDeployment.deployBeans(BeanDeployment.java:204)
    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:344)
    at org.glassfish.weld.WeldDeployer.event(WeldDeployer.java:179)
    ... 17 more
|#] 
```

我不明白这个错误是什么意思。我将所有方法修改为公开，但仍然出现此错误。我怎样才能更正代码？

最良好的祝愿

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T18:50:58.547

问题是字段 ( `public String actionString;`) 而不是方法。

来自[文档](http://docs.jboss.org/cdi/spec/1.0/html/implementation.html)：

> 如果托管 bean 具有公共字段，则它必须具有 @Dependent 范围。如果具有公共字段的托管 bean 声明了 @Dependent 以外的任何范围，则容器会自动检测到问题并将其视为定义错误。

# c# - 标签文本未显示正确的值，但 messagebox.show 显示

> ID：10179828
> 
> 赞同：1
> 
> 时间：2012-04-16T18:47:46.597
> 
> 标签：c#, .net, winforms, string

我在 C#.NET 中有一个简单的标签，似乎没有“更新”。它仅显示我的应用程序的第一个初始值。在下面的代码中，“score”变量不会更新，但是在调用 messagebox.show 对话框时它会显示正确的值。分数值在不同的线程中更改，但我不认为这是调用和跨线程表单控制的问题（因为我在创建 label6 的线程中调用此代码）。

有谁知道可能是什么解决方案？我尝试了 Application.DoEvents() 方法但无济于事。此外， label6.Update() 和 label6.Refresh() 在 label6.Text = score 线之后似乎都不起作用。

Player 是我创建的一个类，将分数值保存为公共 int。

```
 public Form1()
    {
        InitializeComponent();
        createGame();
    }
    public void createGame()
    {
        InitializeComponent();
        drawThread = new Thread(draw);  
        MessageBox.Show(player.score);
        label6.Text = player.score;
    }
    public void draw()
    {
        //do drawing, change player.score value
        //end thread
    }
    public void button_click()
    {
        if(firstrun)
            drawThread.Start()
        else{
            createGame()
            drawThread.Start()
        }

    } 
```

编辑（来自评论）：这是一个 WinForms 应用程序。label6.Text = score 行是调用 label6 的唯一实例，而不是在 Visual Studio 生成的 Form.Designer 代码中实例化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:54:48.997

只是`Refresh()`在标签上做。

```
label6.Refresh(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T20:59:36.753

在你的代码中我看到

```
drawThread = new Thread(draw); 
```

但是在按钮上单击你调用`draw.Start()`所以我认为你的渲染线程根本没有启动！你不应该用`drawThread.Start()`吗？
更多：您不能从与主线程不同的线程访问图形控件属性，您应该使用`Invoke`...

我在这里看到一个问题：

1.  `drawThread = new Thread(draw);
    MessageBox.Show(player.score);`
    使用这些行启动第二个线程并立即显示 MessageBox（第二个线程可能尚未终止）

2.  `label6.Text = player.score;`
    当您关闭 MessageBox 时，将执行此行：如果第二个线程终止并且已经更新了分数，您将获得预期的结果；如果第二个线程仍在执行，则在您的标签中您仍然可以找到以前的分数。

因此，在不知道您的第二个线程做什么的情况下，我无法知道您的代码是否正确。
在我看来，您应该在第二个线程终止时`label6.Text`（使用）进行更新；`Invoke`如果没有，你为什么要使用第二个线程？
通常我们使用线程来执行长时间执行而不阻塞主线程（负责更新表单和处理用户输入），因此您应该在需要时从这些线程更新属性。
考虑使用[BackgroundWorker](http://msdn.microsoft.com/it-it/library/cc221403%28v=vs.95%29.aspx)。

# silverlight - 帧 ContentLoaded 事件

> ID：10179829
> 
> 赞同：0
> 
> 时间：2012-04-16T18:47:49.340
> 
> 标签：silverlight, events, frame

我是 Silverlight 的新人。

我使用带有加载内容的框架的 Page 创建了一种母版页。当我当时处理多个用户控件时（只显示一个，但我想保持之前打开的状态），我正在设置 Content 属性而不是 Navigate 方法。这样我就可以分配一个 UserControl（已经创建，而不是一个新的，因为它将使用带有 Uri 的 Navigate 到 UserControl）。

现在我想在内容发生变化时从框架中拍摄一张如此处所示的照片[。](https://stackoverflow.com/a/9133561/310276)如果我在内容设置后立即执行此操作，则 UserControl 将不会显示在图片中，因为它需要几秒钟。框架具有导航事件，但它不会通过属性 Content 触发（它只是在使用方法 Navigate 时触发，正如它的名字所说）。

我如何知道新内容何时加载？

如果有帮助，我正在使用 Silverligh 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:27:08.163

我有一个解决方案，但我真的不喜欢它，所以我仍在寻找其他方法。

```
public class CustomFrame : Frame
{
    private readonly RoutedEventHandler loadedDelegate;

    public static readonly DependencyProperty UseContentInsteadNavigationProperty =
        DependencyProperty.Register("UseContentInsteadNavigation", typeof (bool), typeof (CustomFrame), new PropertyMetadata(true));

    public bool UseContentInsteadNavigation
    {
        get { return (bool)GetValue(UseContentInsteadNavigationProperty); }
        set { SetValue(UseContentInsteadNavigationProperty, value); }
    }

    public CustomFrame()
    {
        this.loadedDelegate = this.uc_Loaded;
    }

    public new object Content
    {
        get { return base.Content; }
        set
        {
            if (UseContentInsteadNavigation)
            {
                FrameworkElement fe = (FrameworkElement)value;
                fe.Loaded += loadedDelegate;
                base.Content = fe;
            }
            else
            {
                base.Content = value;
            }
        }
    }

    void uc_Loaded(object sender, RoutedEventArgs e)
    {
        ((UserControl)sender).Loaded -= loadedDelegate;
        OnContentLoaded();
    }

    public delegate void ContentLoadedDelegate(Frame sender, EventArgs e);
    public event ContentLoadedDelegate ContentLoaded;

    private void OnContentLoaded()
    {
        if (ContentLoaded != null)
            ContentLoaded(this, new EventArgs());
    }
} 
```

# javascript - Aloha 编辑器慢粘贴

> ID：10179830
> 
> 赞同：1
> 
> 时间：2012-04-16T18:47:52.217
> 
> 标签：javascript, performance, paste, aloha-editor

我正在为我的客户在 Ruby on Rails 应用程序中使用 Aloha 编辑器，但粘贴插件有很多问题。

从网页或 MS Word 复制文本并粘贴它会使脚本冻结，Firefox 告诉我“脚本没有响应”。

当我粘贴一行文本时不会发生这种情况。

这是我的 Aloha 配置文件：http: [//pastie.org/private/uhffpep12x53p27d1zibqg](http://pastie.org/private/uhffpep12x53p27d1zibqg)

你知道我该如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:23:31.907

我终于找到了这个问题的解决方案。这是由于对我的 HTML 标签的误解。我更换了：

```
%p.editable-long-text 
```

经过

```
%div.editable-long-text 
```

现在它完美地工作了！

# sql-server - 如何检查是否启用了更改跟踪

> ID：10179831
> 
> 赞同：28
> 
> 时间：2012-04-16T18:48:13.370
> 
> 标签：sql-server, sql-server-2008

`ALTER DATABASE`在我运行命令启用它之前，我试图确定我的数据库上是否已经启用了更改跟踪。如果多次运行，我试图防止这些脚本出错。

我登记入住，`sys.databases`但`sys.dm_tran_commit_table`找不到我要找的东西。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-16T18:53:08.247

您可以使用此查询：

```
SELECT * 
FROM sys.change_tracking_databases 
WHERE database_id=DB_ID('MyDatabase') 
```

# c++ - 使用 gcc4.7 标准库编译 Intel 12.1.3

> ID：10179832
> 
> 赞同：1
> 
> 时间：2012-04-16T18:48:13.913
> 
> 标签：c++, intel

除了我使用的是英特尔版本 12.1.3 之外，我遇到了与[这篇](https://stackoverflow.com/questions/6527064/stdfunction-and-the-intel-compiler-version-11-1)文章中描述的相同的问题。(`g++`的标头`<functional>`受到保护，`#ifdef __GXX_EXPERIMENTAL_CXX0X__`使用 icpc 时未定义。)

而不是 using `boost::functional`，我想安装 gcc4.7 并使用它的标准库。

在 Ubuntu 11.10 我有`gcc4.6.1`，但我也`gcc4.7`从`gcc-snapshot`包中安装。

英特尔有选项`-gcc-name`、`-gxx-name`和`-cxxlib`。所以最初我编译：

`-std=c++0x -gcc-name=/usr/lib/gcc-snapshot/bin/gcc -gxx-name=/usr/lib/gcc-snapshot/bin/g++ -cxxlib=/usr/lib/gcc-snapshot/`

但我得到了错误：

`icpc: error #10282: file '/usr/lib/gcc-snapshot/bin/usr/lib/gcc-snapshot/bin/g++' not found, generated based on '-cxxlib=/usr/lib/gcc-snapshot/'`

所以我编译了：

`-std=c++0x -gcc-name=./gcc -gxx-name=./g++ -cxxlib=/usr/lib/gcc-snapshot/`.

但我仍然收到警告和错误：

`Warning #2928: the __GXX_EXPERIMENTAL_CXX0X__ macro is disabled when using GNU version 4.6 with the c++0x option`

`error: namespace "std" has no member "function"`

警告清楚地表明它仍在使用 4.6 版。有人知道如何让英特尔使用正确的库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T00:38:58.550

我发现如果你使用带有标志 -v -Q 的 gcc（或 g++）编译，你会得到一个标志和定义列表。它可能会帮助您了解 gcc 的作用，因此您可以在 icpc 中使用相同的 -D/-U。g++ -E 也将在不编译的情况下进行预处理：您可以从中获得有用的路径信息。

# c++ - 算法优化

> ID：10179837
> 
> 赞同：2
> 
> 时间：2012-04-16T18:48:32.503
> 
> 标签：c++, c, algorithm, primes, factors

这是问题的[链接](https://www.interviewstreet.com/challenges/dashboard/#problem/4e14a0058572a)。

*该问题询问形式为1/x + 1/y = 1/z*（其中*z = n!*）的丢番图方程的解数。重新排列给定的方程清楚地表明答案是*z ²*的因子数。

所以问题归结为找到*n的因子数！²*（*n*阶乘平方）。

我的算法如下

1.  使用 Sieve of Eratosthenes 算法为所有素数 <= n 制作布尔查找表。
2.  遍历所有素数*P* <= *n*并在 n 中找到它的指数*！*. 我使用阶跃函数公式做到了这一点。设指数为*K*，则为*P*在*n 中的指数！²*将是*2K*。
3.  使用步骤 2 使用标准公式计算因子数。

对于*n = 10 ⁶*的最坏情况输入，我的 c 代码在 0.056 秒内给出答案。我猜复杂度不会比*O(n lg n)*大。但是当我在网站上提交代码时，由于超过了时间限制，我只能通过 3/15 的测试用例，其余的判断都通过了。

我需要一些提示来优化这个算法。

到目前为止的代码：

```
#include <stdio.h>
#include <string.h>

#define ULL unsigned long long int
#define MAXN 1000010
#define MOD 1000007

int isPrime[MAXN];

ULL solve(int N) {
    int i, j, f;
    ULL res = 1;
    memset(isPrime, 1, MAXN * sizeof(int));
    isPrime[0] = isPrime[1] = 0;
    for (i = 2; i * i <= N; ++i)
        if (isPrime[i])
            for (j = i * i; j <= N; j += i)
                isPrime[j] = 0;
    for (i = 2; i <= N; ++i) {
        if (isPrime[i]) {
            for (j = i, f = 0; j <= N; j *= i)
                f += N / j;
            f = ((f << 1) + 1) % MOD;
            res = (res * f) % MOD;
        }
    }
    return res % MOD;
}

int main() {
    int N;
    scanf("%d", &N);
    printf("%llu\n", solve(N));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:02:46.730

你在这里有一个`int`溢出：

```
for (j = i, f = 0; j <= N; j *= i) 
```

如果`46340 < i < 65536`并且对于许多较大的 ，如果溢出环绕`i`，则在第二次迭代中将是负数（这是未定义的行为，因此任何事情都可能发生）。`j`

用例如替换它

```
for(j = N / i, f = 0; j > 0; j /= i) {
    f += j;
} 
```

但是，由于溢出导致的额外迭代不太可能导致“超出时间限制”，这可能只会导致错误的结果。

所以一般的建议是

*   只筛选奇数，或许也能从筛子中剔除 3 的倍数。从筛子中消除奇数大约可以将筛子所需的时间减少一半。
*   不要`int`对标志使用整体，使用位或至少`char`s。这提供了更好的缓存局部性和进一步的加速。

# mysql - Django + OS X + MySQL + 第一个会话变量检索 = 崩溃

> ID：10179840
> 
> 赞同：0
> 
> 时间：2012-04-16T18:48:42.860
> 
> 标签：mysql, django, apache, mod-wsgi

我在 Django、Apache、WSGI、MySql 等方面经验丰富，并且在另一台运行 Lion 的 OS X 计算机上设置了此环境并可以正常工作。Django 会话后端是 db，会话中间件和应用程序都在设置中正确启用。在站点视图的第一次请求期间，我们设置了一个 request.session 键/值，这第一次通过它可以正常工作。在随后的视图中，当我们检查键/值是否存在时，我们得到一个服务器级别的 500 错误，即使在调试模式下，python 解释器也无法生成完整的堆栈跟踪异常。apache 日志生成以下消息...

```
[Mon Apr 16 14:26:22 2012] [notice] Apache/2.2.21 (Unix) DAV/2 mod_wsgi/3.3 Python/2.7.1 mod_ssl/2.2.21 OpenSSL/0.9.8r configured -- resuming normal operations
[Mon Apr 16 14:26:27 2012] [info] mod_wsgi (pid=2362): Create interpreter 'snap.joe|'.
[Mon Apr 16 14:26:27 2012] [info] [client 127.0.0.1] mod_wsgi (pid=2362, process='snap', application='snap.joe|'): Loading WSGI script '/var/www/venvs/snap_env/snap/wsgi/wsgi.py'.
[Mon Apr 16 14:26:32 2012] [error] [client 127.0.0.1] Premature end of script headers: wsgi.py
[Mon Apr 16 14:26:33 2012] [notice] child pid 2362 exit signal Bus error (10) 
```

已检查 MySQL db 表 django_session 行是否与 session_data 正确添加，并且在第一次请求后在浏览器中设置的 cookie 包含正确/匹配的 session_id。如果我在现有会话代码之前添加一个简单的 request.session.flush() ，我们显然可以绕过错误，因为会话中从来没有任何东西。还有一件事，我们添加到会话键/值存储的值是一个 Django QuerySet 对象。同样，这是在一个实时的 CentOS 服务器上运行的，还有另一台 Mac OS X Lion 机器（尽管运行的是 Python 2.6 而不是 2.7）。

有什么想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:00:10.687

一些想法：

1）您是否运行相同版本的模块？Django 最近刚刚更新（1.4），所以如果您进行了 pip 安装并且没有指定版本，您的生产可能有一个旧版本，而您的开发有新版本。

2) 你可以只使用 manage.py 运行服务器来测试吗？我怀疑这与 apache 配置有关（因此，如果它在 runserver 中运行良好，则意味着问题出在 apache 上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:25:56.820

请参阅记录在案的原因：

[http://code.google.com/p/modwsgi/wiki/FrequentlyAskedQuestions#Apache_Process_Crashes](http://code.google.com/p/modwsgi/wiki/FrequentlyAskedQuestions#Apache_Process_Crashes)

并点击更多链接以获取可能的解决方法。

简而言之，可能是共享库版本冲突，同时使用 mod_python，或者 Python 的扩展模块不适用于子解释器。

如果这只是该 Apache 上的 Python 站点，请设置：

```
WSGIApplicationGroup %{GLOBAL} 
```

一种潜在的快速解决方案。

# objective-c - 在这个用例中，我是否应该在新线程中启动 NSTimer

> ID：10179846
> 
> 赞同：0
> 
> 时间：2012-04-16T18:49:07.187
> 
> 标签：objective-c, cocoa, nstimer, nsthread

我正在构建的项目的应用程序设计/架构问题。

我有一个主控制器，其中包含当前*“活动”*对象的 NSMutableArray。这些对象中的每一个在实例化时都会有自己的 NSTimer 来计时对象处于“活动”状态的秒数/分钟数/小时数。

当用户创建新对象时，我是否应该在它们自己的单独线程上生成和分配这些 NSTimer？或者我可以在主线程上运行多个这样的计时器吗？

对线程不太熟悉，所以这就是我要问的原因。如果每个对象都分配了自己的 NSTimer，那么就不需要线程了？或者...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:03:17.000

我认为您不需要 NSTimer 。NSTimer 用于在设定的时间后触发回调。如果您尝试跟踪自创建对象以来的时间量，请执行以下操作：

使对象处于活动状态时：

```
object.createdAt = [ NSDate date ] ; 
```

要确定对象的活动时间，请执行以下操作：

```
NSTimeInterval numberOfSecondsSinceCreation = [ [ NSDate date ] timeIntervalSinceDate:object.createdAt ] ; 
```

**可暂停的实现**

我写了一个类别，您可以添加到您的项目中，您可以使用它来跟踪对象的“活动时间”。

```
@interface NSObject (Timeable)
@property ( nonatomic ) NSTimeInterval totalActiveTime ;
@property ( nonatomic, retain ) NSDate * lastStartTime ;
@end

@implementation NSObject (Timeable)

-(void)startTimer
{
    self.lastStartTime = [ NSDate date ] ;
}

-(void)pauseTimer
{
    self.totalActiveTime = self.totalActiveTime + [[ NSDate date ] timeIntervalSinceDate:self.lastStartTime ] ;
}

-(NSDate*)lastStartTime
{
    return objc_getAssociatedObject( self, @"lastStartTime" ) ;
}

-(void)setLastStartTime:(NSDate*)date
{
    return objc_setAssociatedObject( self, @"lastStartTime", date, OBJC_ASSOCIATION_RETAIN_NONATOMIC ) ;
}

-(NSTimeInterval)totalActiveTime
{
    NSNumber * number = objc_getAssociatedObject( self, @"totalActiveTime" ) ;
    return  number ? [ number doubleValue ] : 0.0 ;
}

-(void)setTotalActiveTime:(NSTimeInterval)time
{
    objc_setAssociatedObject( self, @"totalActiveTime", [ NSNumber numberWithDouble:time ], OBJC_ASSOCIATION_RETAIN_NONATOMIC ) ;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:02:43.030

如果需要，您可以在主线程上有许多计时器，但根据您的描述，您不需要。`NSTimer`s 用于在一段时间后做某事，可选择重复；它们不是用来测量持续时间的。

如果您需要知道您的对象“活动”的时间间隔，只需记录它变为活动的日期 ( `[NSDate date]`)，记录它变为非活动的日期，然后减去 ( `[[NSDate date] timeIntervalSinceDate:activationDate];`)。

```
- (void) beginRockingAndRolling {

    self.lastActivationDate = [NSDate date];

    // Rock and roll!

}

- (void) stopRockingAndRolling {

    self.totalTimeActive += [[NSDate date] timeIntervalSinceDate:self.lastActivationDate];

    // Turn off the rock

} 
```

# java - getClass() 方法可以用来访问静态变量吗？

> ID：10179857
> 
> 赞同：0
> 
> 时间：2012-04-16T18:49:55.673
> 
> 标签：java, class, static-variables

考虑这段代码：

```
class A {
    static int i=3;
}

public class TT extends A {
    public static void main(String[] args) {
        System.out.println(new A().getClass().i);
    }
} 
```

该`getClass()`方法可以用于在这种情况下访问静态变量吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T18:51:15.373

不是那样的，不。`getClass()`返回 a `Class<?>`，并且`i`不是 的成员`Class`。您可以使用`getClass()` *后跟反射*来获取字段值，但完全不清楚您要在这里实现什么 - 在您给出的示例中（这是我们必须通过的）只需使用`A.i`将更简单，更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:53:31.773

也许这段代码回答了你的问题：

```
package com.cc.test;
import java.lang.reflect.Field;
public class TestMain {

    public static void main(String[] args) throws Exception {
        Class theClass = Class.forName("com.cc.test.TestMain$MyClass");
        Field theField = theClass.getField("myField");
        int theValue = theField.getInt(null); // null only works if myField is static
        System.out.println(theValue); // prints 99
    }

    private static class MyClass {
        public static int myField = 99;
    }
} 
```

# javascript - 为什么 $ 作为参数传递给 Zepto 库中的回调（$），他们在其中定义了 DOMContentLoaded 事件侦听器？

> ID：10179868
> 
> 赞同：1
> 
> 时间：2012-04-16T18:50:42.737
> 
> 标签：javascript, zepto

我正在浏览 Zepto 源代码，这里有一个小功能：[gitHub - Zepto.js](https://github.com/madrobby/zepto/blob/master/src/zepto.js)

```
ready: function(callback){
      if (readyRE.test(document.readyState)) callback($)
      else document.addEventListener('DOMContentLoaded', function(){ callback($) }, false)
      return this
    } 
```

我不明白为什么将 $ 作为参数传递给回调？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:54:41.797

这样就可以方便地对库进行本地引用，您可以随意调用它。因此，例如，可能不会调用 jQuery（它做同样的事情）`$`，但您可以通过以下方式在没有额外功能的情况下调用它：

```
jQuery(document).ready(function($) {
    // Your jQuery code here, which uses $ as an alias for jQuery
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:54:00.510

如果您查看[gitHub 上存储库](https://github.com/madrobby/zepto/blob/master/src/zepto.js)的底部，您会看到：

```
// If `$` is not yet defined, point it to `Zepto`
window.Zepto = Zepto
'$' in window || (window.$ = Zepto) 
```

它基本上是给你一个 Zepto 的简写。

# c#-2.0 - 异步调用 2 个 Web 引用并等待结果

> ID：10179882
> 
> 赞同：0
> 
> 时间：2012-04-16T18:51:41.693
> 
> 标签：c#-2.0

我在理解如何利用异步请求时遇到了一些麻烦。假设我有两个要调用返回结果的 Web 服务。在两个返回结果之后我想做一些操作。

这是我正在尝试做的一个非常简单的组合：

```
AWebService myWebService = new AWebService();

int firstNumber = myWebService.firstMethod();
int secondNumber = myWebService.secondMethod();

Console.WriteLn(firstNumber + secondNumber); 
```

如何异步调用它们，并在继续我的代码之前等待它们都响应？我想你会写这样的东西（这是一些伪代码）；

```
AWebService myWebService = new AWebService();

int firstNumber = myWebService.firstMethodAsync();
int secondNumber = myWebService.secondMethodAsync();

someWaitCommand;

Console.WriteLn(firstNumber + secondNumber); 
```

但是，异步方法返回 null，我需要在异步方法的基础上设置回调方法。如果我需要多次调用同一个 Web 方法但对每个请求执行不同的操作怎么办？

作为旁注，我使用的是 c# 2.0，并且无法访问似乎经常成为本主题焦点的 Begin####/End#### 方法。

# windows - 我必须在 CComPtr 对象上调用 Release() 方法吗？

> ID：10179884
> 
> 赞同：3
> 
> 时间：2012-04-16T18:51:46.703
> 
> 标签：windows, com, atl, smart-pointers, sapi

我正在使用 SAPI5 API 来处理文本到语音。如果我简化我的代码看起来像这样（我删除了错误检查以尽可能简化它）：

```
int main() {
    CoInitialize(NULL);
    CComPtr<ISpVoice> spVoice;
    spVoice.CoCreateInstance(CLSID_SpVoice);
    ...
    CoUninitialize();
    return 0;
} 
```

由于某些奇怪的原因，如果我不调用 spVoice.Release()，我的代码就会崩溃。所以上面的代码崩溃了，但是这段代码运行良好：

```
int main() {
    CoInitialize(NULL);
    CComPtr<ISpVoice> spVoice;
    spVoice.CoCreateInstance(CLSID_SpVoice);
    ...
    spVoice.Release();
    CoUninitialize();
    return 0;
} 
```

`CComPtr`超出范围时不会自动释放底层对象吗？

我查看了它的实现，`CComPtr`它确实调用`Release`了析构函数本身。

所以我想知道可能出了什么问题，为什么如果我打电话给`Release`自己，我的代码不会崩溃。但是，如果我不打电话`Release`，那么它就会崩溃。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T19:36:27.190

CComPtr 的析构函数将调用 Release。但是，当对象超出范围时，它会这样做。在上面的代码中，这只是在 main 返回之前，也就是*在*调用 CoUninitialize 之后。

以下代码更正确，并保证析构函数在 CoUninitialize 之前运行。

```
int main() {
    CoInitialize(NULL);
    { // Begin scope
        CComPtr<ISpVoice> spVoice;
        spVoice.CoCreateInstance(CLSID_SpVoice);
        ...
    } / End scope, spVoice's destructor runs.
    CoUninitialize();
    return 0;
} 
```

另一种方法是围绕 CoInitialize/CoUninitialize 创建一个 RAII 包装器。如果这个新对象在 spVoice 之前声明，它的析构函数将在 spVoice 的析构函数之后运行，从而保证正确的顺序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T18:55:30.680

你是对的，你不能调用 Release。这是在析构函数中自动完成的。崩溃的一个原因可能是由于您没有在程序开始时初始化 COM 设备而发生的副作用。

# forms - Silex / Symfony2 后验证

> ID：10179893
> 
> 赞同：2
> 
> 时间：2012-04-16T18:52:30.113
> 
> 标签：forms, validation, symfony, silex

我确定这一定是一个 RTM 问题，但我必须在错误的地方寻找。在 symfony 1.4 中，我经常使用验证器回调。例如，检查开始日期和结束日期的顺序是否正确。我正在 Silex 中开发一个应用程序，但不知道如何添加类似的功能作为验证器。这就是我正在使用的（基本上）：

```
$app['form.example'] = function ($app) {
    $constraints = new Assert\Collection(array(
        'date1' => new Assert\Date(),
        'date2' => new Assert\Date(),
    ));

    $builder = $app['form.factory']->createNamedBuilder('form', 'example', array(), array('validation_constraint' => $constraints));

    return $builder
        ->add('date1', 'date')
        ->add('date2', 'date')
        ->getForm();
}; 
```

我可以将自己的验证测试放在“流程表单”部分，例如：`if ($form->isValid() && --my datetest--)`但我觉得那里不对。

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T20:10:23.023

我想您可以将表单事件用于此类事情；当然对于 Symfony2，所以我也假设 Silex？有一篇关于使用它生成动态表单的食谱文章：

[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

另一个 SO 问题中的一些有用细节：

[Symfony2 表单事件的描述？](https://stackoverflow.com/questions/9651095/description-of-symfony2-form-events)

本可以发誓我之前曾与某人就此进行过如此讨论，但我找不到问题。不久前，我使用 BIND_CLIENT_DATA 计算了一些代码中的一些表单字段；我看看能不能挖出来

**编辑**

好的，我发现了一些东西，但是我正在从 Symfony 代码中修改它，所以我不是 100% 的，但这可能是一个起点（我希望）：

```
$builder->addEventListener(FormEvents::BIND_NORM_DATA, function($event) {
    // your form data
    $data = $event->getData();

    // get date objects - if you cannot dereference this way try getters
    $d1 = $data['date1'];
    $d2 = $data['date2'];

    // naive comparison :)
    $isCorrectDateOrder = $d1->getTimestamp() < $d2->getTimestamp();

    // check the comparison
    if (!$isCorrectDateOrder) {
        // trouble... create and add a FormError object to the form
        $event->getForm()->get('date1')->addError(new \Symfony\Component\Form\FormError('uh oh...'));
    }
}); 
```

希望这可以帮助 ：）

# spy - 控制台中常见的spy.js是什么

> ID：10179894
> 
> 赞同：1
> 
> 时间：2012-04-16T18:52:33.040
> 
> 标签：spy

对不起，如果这很明显，但到目前为止我在网上找不到直接的答案......

spy.js 到底是什么？

我有时会在 Firefox 或 chrome 的控制台中看到它......它是否与 spry.js 有某种关系

我知道 spry 虽然是 adobe 的 js 框架..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:57:47.263

spy.js 是基于 firebug 的开发工具中的文件，用于使用不错的工具调试网站 (http://code.google.com/p/fbug/source/browse/branches/firebug1.4/content/firebug/spy. js?r=2796)

我的猜测是，一个 ajax 框架 spry 有时会调用一些使用 spy.js 内部定义的函数的 jsonp，因此如果没有正确加载丢失的文件，则会引发控制台错误。

检查所有依赖项是否正确加载可能会解决问题。但我只是猜测。

# .net - 使用具有模型优先方法的 EF4 迁移工具

> ID：10179896
> 
> 赞同：10
> 
> 时间：2012-04-16T18:52:38.277
> 
> 标签：.net, entity-framework-4, database-migration, ef-model-first

首先使用代码时，EF 迁移实用程序似乎相当不错。

根据[这篇博文](http://www.codetunnel.com/blog/post/111/introduction-to-entity-framework-43-migrations--part-ii)，我尝试在我的项目中设置它，我们使用模型优先。运行`Enable-Migrations`命令时，我收到以下错误：

> 不支持从使用 Database First 或 Model First 创建的 DbContext 创建 DbModelBuilder 或编写 EDMX。EDMX 只能从不使用现有 DbCompiledModel 创建的 Code First DbContext 中获取。

有什么办法可以让我们在不切换到代码优先的情况下使用 EF 迁移？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:51:02.460

我一直在寻找相同的解决方案，发现：[Entity Designer Database Generation Power Pack](http://visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87/ "实体设计器数据库生成电源包") 安装后，当您选择“Generate Database from Model...”时，它会弹出一个新向导，您可以选择“Generate Migration T-SQL” .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T05:37:46.500

我有一篇关于如何做到这一点的不完整博客条目。不确定它是否符合您的需要，但似乎是迄今为止唯一可用的方法。

基本上，您使用自定义 t4 从您的模型生成 DbMigrationsConfiguration 和 DbContext，您根本不需要运行 Enable-Migration。只需在包管理器控制台中运行 Add-Migration 和 Update-Database。

[http://blog.amusedia.com/2012/08/entity-framework-migration-with-model.html](http://blog.amusedia.com/2012/08/entity-framework-migration-with-model.html)

稍后我将更新博客条目和 t4 以使其更加用户友好。

# php - 备份事件计划程序

> ID：10179897
> 
> 赞同：4
> 
> 时间：2012-04-16T18:52:39.500
> 
> 标签：php, mysql, events

我刚刚备份了 mysql 数据库，但我的事件调度程序不见了。我该如何备份它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:54:11.663

人mysqldump：

```
  · --事件，-E
      在输出中包括转储数据库的事件调度程序事件。

```

# teamsite - DCT：读取 DCR 列表

> ID：10179904
> 
> 赞同：-1
> 
> 时间：2012-04-16T18:53:05.390
> 
> 标签：teamsite, autonomy

我在尝试创建允许用户从现有 DCR 列表中选择的 DCT 时遇到了障碍。在这种情况下，DCT 允许用户从所有可用文章中创建“编辑精选”列表。

为此，我需要创建一个 DCT，它可以解析某个节点的所有可用 DCR（例如“articleHeadline”）并将 DCR 名称作为选项值返回，标题作为选项文本返回。

我最初想使用 FormsAPI，但除非我通过 HTTP 请求使所有 DCR 可用，否则我找不到有用的方法。

第二次尝试是按照手册“Teamsite 7.2：数据捕获开发”（第 153、224-225 页）中的描述创建数据源，但由于无法找到有关该主题的有用文档而受阻。

任何人都可以向我指出有助于创建 DCR 读取数据源的文档或其他有助于我完成这项任务的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:13:04.013

您可以使用数据捕获模板 (DCT) 中的浏览器标签读取特定文件夹中的 DCR 名称列表以显示在选择框中。

```
<browser initial-dir="templatedata/Student/data" ceiling-dir="templatedata/Student/data" required="f" readonly="f"> 
```

上面的浏览器标签可以读取 templatedata/Student/data 文件夹中的所有 DCR 名称，并会为您提供一个下拉框。

# java - 我可以使用来自另一个控制器的 POST 参数作为方法调用控制器操作吗？

> ID：10179906
> 
> 赞同：0
> 
> 时间：2012-04-16T18:53:18.200
> 
> 标签：java, grails, groovy, grails-2.0, grails-controller

我有一个控制器和一些动作。我是否可以将这些动作作为来自另一个控制器的方法调用，就好像我会使用 post params 调用这个动作一样？

我正在使用 grails paypal 插件，它有一个名为“购买”的操作。我不希望用户将产品数据和信息发布到购买操作。我已经知道用户想要购买的东西，我想在我的控制器中调用购买操作，因为我会调用一个普通方法，然后我想将用户重定向到贝宝（到 url，购买操作返回）。

我正在使用 grails 2.0 和最新的 paypal 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:24:21.070

据我所知，您可以将您的操作重定向到属于其他控制器的另一个操作。

您可以为此使用重定向方法。

```
"redirect(controller: 'abc', action: 'actionName', params: 'params')" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:47:53.370

你不能。您可以从动作 A 到链接到动作 B。但这不是将其作为方法调用，这会将调用重定向到动作 B，您将不再处于动作 A 的范围内。

也许您可以在`service`. 然后您可以从控制器的操作中随意调用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T19:06:00.667

您可能想使用[chain(...)](http://grails.org/doc/latest/ref/Controllers/chain.html)。

链：

> 在从一个动作到另一个动作的 HTTP 重定向之后，使用闪存存储隐式保留模型。

# c# - C# SMTP 邮件发送通常由于缺少凭据而失败？

> ID：10179910
> 
> 赞同：0
> 
> 时间：2012-04-16T18:53:24.627
> 
> 标签：c#, asp.net, email, smtp, smtpclient

似乎当您使用 SmtpClient 类和 MailMessage 发送电子邮件时，一切正常。它确实发送它。但是，某些服务器，例如您的企业 Exchange Server 或 Gmail.com 或其他服务，有时会拒绝这些电子邮件（因为它们可能是网络钓鱼站点或垃圾邮件站点？）

我正在使用这个，很多地方都拒绝了我相信的电子邮件：

```
SmtpClient smtp = new SmtpClient
{
 Host = smtpClient,
 Timeout = 40000, // 40 seconds
 DeliveryMethod = SmtpDeliveryMethod.Network
}; 
```

你如何解决这个问题？您是否必须使用某些已识别/列入白名单的服务器的登录凭据才能获得授权和受信任的电子邮件？

我可以使用 GMAIL 身份验证之类的东西，但我的服务器应该被允许发送电子邮件，它不应该依赖 gmail。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T19:07:28.420

很久以前，Internet 上有许多服务器提供电子邮件服务，而无需询问太多关于谁在使用该服务的问题。
然后是**垃圾邮件发送者！**.
一个在世界各地自由发送邮件的服务器不再是互联网的恩人，而是一个问题。
现在越来越难找到在 Internet 上发送邮件而不要求提供凭据的服务器。

您的电子邮件服务器（smtp.yourbusiness.com 或任何您想要的）不信任您。当您要求它为您发送电子邮件时，它想知道您是谁。

```
SmtpClient smtp = new SmtpClient  
smtp.Host = "smtp.yourbusiness.com"; 
NetworkCredential credentials = new NetworkCredential("your_user_name_on_smtpserver", "your_password_on_smtpserver"); 
smtp.Credentials = credentials; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T19:07:11.537

您是否设置了发件人邮件地址，您的邮件服务器可以通过反向 dns 查找来解析吗？一些垃圾邮件过滤器不信任他们无法反向查找的邮件服务器。例如，如果您让您的邮件服务器使用虚假或外国邮件域发送邮件，垃圾邮件过滤器可能会选择它并过滤您的邮件。如果您为您的域设置了 SPF 记录，而您的发送邮件服务器不在该记录中，则来自该服务器的邮件通常也会被垃圾邮件过滤器过滤掉。另一个原因可能是来自已知由互联网提供商动态分配的范围的 IP 地址。从这些地址范围发送的邮件服务器大多是垃圾邮件机器人，因此通常也会被过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T19:00:34.927

要发送 GMail，您需要指定一些设置 - 是的，您需要使用身份验证（GMail 不会向所有人开放他们的中继，否则他们会被用于发送垃圾邮件）。

如果我没记错的话，您需要在 TCP 端口 587 上发送，启用 SSL，托管`mail.google.com`并提供用户名和密码`SmtpClient`以让 Gmail 实际发送它 - 忽略其中一个通常会从他们那里生成一封电子邮件，告诉您您的内容我忘记了。

**编辑**：只是为了澄清用户名和密码位；您需要使用您的 GMail 帐户的用户名和密码创建一个新的[NetworkCredential](http://msdn.microsoft.com/en-us/library/system.net.networkcredential.aspx)，并将您的`Credentials`属性设置`SmtpClient`为此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T19:53:33.800

如果我正确解释了您的问题：消息是从您的服务器发送给我们的，但它们被困在接收端的垃圾邮件过滤器中？

如果这是问题所在，则与您发送消息的方式无关，而与消息的内容和服务器的特性有关。因此，无论您使用什么凭据，或者您是否使用 SmtpClient 或任何其他类发送它都无关紧要。迁移到 Gmail 并没有帮助，而且 Gmail 对您可以发送的邮件数量有限制。

垃圾邮件过滤器，如垃圾邮件刺客使用规则。匹配太多：您的邮件被视为垃圾邮件。

看看这里的例子：

[http://spamassassin.apache.org/tests_3_3_x.html](http://spamassassin.apache.org/tests_3_3_x.html)

因此，请确保您的消息不会得到太高的分数，它会通过。

# c# - 异步 mvc .net：如何从异步方法返回视图

> ID：10179913
> 
> 赞同：4
> 
> 时间：2012-04-16T18:53:32.343
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

我开始学习 MVC.net 并遵循[此文档](http://msdn.microsoft.com/en-us/library/ee728598.aspx)。

在那里，解释了异步控制器将实现两个方法，假设该操作称为 News，然后我们将有一个称为 NewsAsync 的方法，**它将返回 void**和一个 NewsCompleted，**它将返回一个 view**，这将是一旦未完成的操作返回时调用。

我担心的是，我真的看不出异步操作在操作开始后无法返回视图的任何意义。如果在异步回调返回之前用户将无法从服务中看到任何反馈，那么为什么首先要使用异步控制器呢？

异步操作开始后有没有办法返回中间视图？我是否不必要地担心这个明显的限制？MVC.net 我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:56:36.153

异步控制器的重点是促进线程重用，这样如果您有一个特别长时间运行的请求会阻塞资源，您就不会占用请求队列。它与向请求方返回信息无关。最后，他们认为异步控制器和普通控制器之间没有区别。

它不像它使它对 ajax 更友好或其他什么；一个很好的例子是，如果您有一个开始渲染图像的请求；传统上，该请求线程将在 CPU 渲染图像时被消耗。使用异步模式，您仍然可以渲染图像，但可以释放该线程来服务另一个 Web 请求，直到渲染完成，从而为您的服务器提供更大的吞吐量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:55:55.020

一种策略是在客户端上设置轮询。生成结果后，将通知用户。

# objective-c - 一个项目的多个应用程序

> ID：10179921
> 
> 赞同：1
> 
> 时间：2012-04-16T18:54:05.583
> 
> 标签：objective-c, xcode, build-process

我有一个小问题..我知道有一个解决办法，我只是不知道它是什么。

问题如下。几周前（大约 2 个）由于服务器端的数据问题，我不得不从应用商店中删除 4 个应用。我决定将所有应用程序升级到最新版本，同时为它们提供一些新功能。（我有 6 个相同的应用程序，针对不同的机场）。这些版本之间的区别如下：

*   一组 50-80 张左右的图像，结合了每个机场的地图。每个应用程序中的文件名相同。（我该如何解决？）
*   应用程序的名称
*   Default.png（当然还有那些用于 iPad 和 Retina 的）
*   应用程序图标
*   详细信息页面的内容（存在于 .plist 文件中）
*   “关于”页面的内容，其中页面引用回应用程序
*   一些本地化内容，参考应用程序目标的机场。
*   当然，配置文件。

跟踪这些事情只是一件麻烦事，所以我想要 1 个项目和 1 个代码库，只需添加图像和细节（如上所述），新版本就会出现。当我“存档”时，我希望构建所有应用程序并准备好发送给苹果（我必须手动完成）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T21:31:31.280

在使用多个目标和条件编译之前，我已经这样做了。每个可交付成果需要一个目标。您可以以通常的方式为每个目标配置名称、图标等。

> 一组 50-80 张左右的图像，结合了每个机场的地图。每个应用程序中的文件名相同。（我该如何解决？）

将图像保存在不同的目录中，并为每个目标仅添加该应用程序的图像。如果您可以从文件中加载内容，此技术也适用于 about 页面的内容。

* * *

我还使用条件编译，以便我可以为每个应用程序的常量定义不同的值。

为此，将设置添加到其他 C 标志和其他 C++ 标志以识别您的应用程序。就像是：

```
-DAPP_VARIANT=1 
```

然后，在您的代码中，您可以使用以下内容来实现任何特定于应用程序的行为：

```
- (id)init
{
#if APP_VARIANT == 1
    self->server_url = [[NSURL URLWithString:@"http://app1.example.com"] retain];
#elif APP_VARIANT == 2
    self->server_url = [[NSURL URLWithString:@"http://app2.example.com"] retain];
#endif
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:08:20.263

你不能对所有主要代码使用一个版本控制分支，然后在你填写数据的地方分叉六次（每个机场一次）吗？进行新的代码更改后，只需将更改从主分支推送到分支即可。

# facebook - 使用最新的 Facebook iOS SDK 获取我/图片或用户 ID/图片的请求失败

> ID：10179926
> 
> 赞同：0
> 
> 时间：2012-04-16T18:54:44.147
> 
> 标签：facebook, image, api, facebook-graph-api

使用旧版本的 iOS 版 Facebook SDK，我可以要求 me/picture 或 userId/picture 来获取个人资料图片。当我使用最新的 SDK 尝试此操作时，我得到了一个空响应。

知道为什么，如果 API 发生了变化，最好的选择是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:58:09.970

其实还是可以用的`[facebook requestWithGraphPath:@"me/picture?type=large" andDelegate:self];`

但是 in `-(void)request:(FBRequest *)request didLoad:(id)result`，而不是使用 in 的值，而是`result`获取 的图像数据`request.responseText`，即 NSMutableData 并从那里构建您的图像。

例子：

```
-(void)request:(FBRequest *)request didLoad:(id)result {

    NSLog(@"Got user avatar");

    UIImage *profileAvatar = [UIImage imageWithData:request.responseText];
    UIImageView *avatarImageView = [[UIImageView alloc] initWithImage:profileAvatar];
    [self.view addSubview:avatarImageView];
} 
```

学分：[https ://stackoverflow.com/a/10528707/982913](https://stackoverflow.com/a/10528707/982913)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:13:42.960

我遇到了同样的问题，我猜想改变了什么。也许他们希望开发人员以“常规”方式下载图片。

在新 SDK 附带的 hackbook facebook 示例代码中，他们像普通图片一样下载图片，而不是通过请求对象：

```
NSString * url = [NSStringstringWithFormat:@"https://graph.facebook.com/%@/picture",facebookObjectIdString];
NSData * data = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];

UIImage *downloadedImage = [UIImage imageWithData:data]; 
```

如您所见，只需像任何图像一样从 URL 下载图像。您还可以使用 NSURLRequest 和 sendSynchronousRequest 等下载...

想知道这是否是新 SDK 或决定中的错误。

更新：在某些情况下，如果图片属于某些限制下载图片访问的 Facebook 对象（如某些页面的图片），您希望添加 access_token 参数。

# python - 你可以在python中增加一个切片吗？

> ID：10179929
> 
> 赞同：2
> 
> 时间：2012-04-16T18:54:53.783
> 
> 标签：python, numpy

我正在通过移植我在 matlab/octave 中编写的一些代码来尝试 numpy。在 matlab 中，我可以定义一个 python 切片的等价物，然后根据需要对其进行递增。例如，在我的 matlab 代码中，我有

```
HXx_range = 1:NHXx;
HXy_range = 1:NHXy;

blah blah blah

Hx(HXx_range, HXy_range) = Da(Hx_media(HXx_range, HXy_range)).*Hx(HXx_range, HXy_range) + Db(Hx_media(HXx_range, HXy_range)).*(Ez(HXx_range,HXy_range) -   Ez(HXx_range,**HXy_range+1**));
Hy(HYx_range, HYy_range) = Da(Hy_media(HYx_range, HYy_range)).*Hy(HYx_range, HYy_range) + Db(Hy_media(HYx_range, HYy_range)).*(Ez(**HYx_range+1**,HYy_range) - Ez(HYx_range,HYy_range));
Ez(EZx_range, EZy_range) = Ca(Ez_media(EZx_range, EZy_range)).*Ez(EZx_range, EZy_range) + Cb(Ez_media(EZx_range, EZy_range)).*(Hy(EZx_range,EZy_range) - Hy(**EZx_range-1**,EZy_range) + Hx(EZx_range,**EZy_range-1**) - Hx(EZx_range,EZy_range)); 
```

'**' 中的术语（如 'HXy_range+1'）是它们的关键部分；HXy_range+1 等于 2:(NHXy+1)。在 python 中，我可以用类似的方式定义一个切片：

```
HXx_range = slice(0, NHXx) 
```

但是， HXx_range+1 给了我一个错误。当然，我可以为此制作一个新切片，但它并不那么干净。有没有解决的办法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:06:33.197

如果将您定义`HXy_range`为 numpy 数组，则可以根据需要递增它。如果并且当您希望将其用作切片时，您可以形成`slice(*HXy_range)`：

```
In [26]: HXy_range = np.array([1,10])

In [27]: HXy_range+1
Out[27]: array([ 2, 11])

In [28]: slice(*(HXy_range+1))
Out[30]: slice(2, 11, None) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:57:42.093

不，Python`slice`实例是[不可变](http://docs.python.org/reference/datamodel.html#index-69)的。要使用标准`slice`实例，您必须每次都创建一个新实例。很遗憾，[`slice`你也不能子类](http://mail.python.org/pipermail/python-list/2005-December/355836.html)化。

# assembly - ASM：MASM、NASM、FASM？

> ID：10179933
> 
> 赞同：34
> 
> 时间：2012-04-16T18:55:10.787
> 
> 标签：assembly, intel, nasm, masm, fasm

我已经完成了 ARM 汇编编程，我想学习 Intel Assembler。我不断听到提到的所有这些不同的 F/M/N/ASM——但我不确定它们与我希望实现的目标有何关系？

有人可以帮我确定学习如何在英特尔架构上进行低级编程需要什么吗？我不太明白“不同的汇编程序”是如何关联的，尤其是 x86、IA64、AMD64/x86-64 等？

如果有任何帮助，我最喜欢 Eclipse 和 Visual Studio 08/10 IDE。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-16T19:00:45.700

[`MASM`](http://en.wikipedia.org/wiki/Microsoft_Macro_Assembler)(Microsoft Assembler) 是流行的 Windows 汇编程序。`MASM`适用于 16 位和 32 位应用程序 ( `x86`)。`ML64`是 64 位源 ( `AMD64/x86-64`)

[`NASM`](http://en.wikipedia.org/wiki/Netwide_Assembler)(Netwide Assembler) 是 Linux 上流行的汇编程序，但也可以在[Windows](http://www.nasm.us/pub/nasm/releasebuilds/2.10/win32/)上使用。NASM 支持 16 位、32 位和 64 位程序。

[`FASM`](http://flatassembler.net/)(Flat Assembler) 适用于 Windows 和 Linux。FASM 也支持 32 位和 64 位程序。

所以我想你会更喜欢`MASM`根据你的要求选择。

# javascript - 将函数附加到动态创建的 DOM 元素

> ID：10179947
> 
> 赞同：1
> 
> 时间：2012-04-16T18:55:57.277
> 
> 标签：javascript, jquery

**目标：**

附加一个具有功能的 DOM 元素。（这里不需要一个全球听众。）

**问题：**

我不知道如何在这种情况下引用新元素。问题区域是`.on`事件侦听器和其中包含的引用`$(this)`。此外，函数`get_value()`从内部再次调用自身的能力。

**相关代码：**

```
var dom_element = (function() {
    // [...]
    var create = function create( data ) {
        // [...]
        return $('<div />', { 'class': 'element', id: data.i_id })
            // [...]
            .on('load', function get_value() {
                // [...]
                $(this).find('.value').text(s_value);
                // [...]
                setTimeout('get_value()', 5000);
            }());
    },
    // [...]
    return {
        create: create
    };
}()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:58:10.960

该`load`事件不适用于`<div>`元素。

如果您想在更新内容时执行某些操作`div`，您应该在更新内容的代码中执行此操作。

```
var dom_element = (function() {
    // [...]
    var create = function create( data ) {
        // [...]
        var div =  $('<div />', { 'class': 'element', id: data.i_id })
            // [...]
        (function get_value(div) {
            // [...]
            $(div).find('.value').text(s_value);
            // [...]
            setTimeout(function() {
                get_value(div);
            }, 5000);
        })(div);

        return div;
    },
    // [...]
    return {
        create: create
    };
}()); 
```

我更新了代码来做我认为你正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:25:46.733

正如另一个人所说， on.('load'...) 不适用于这里。您正在动态创建这些元素（大概在 DOM 准备就绪之后），因此您应该能够立即开始超时。这是我的看法：

```
var make_new = function(data){
    var $div = $('<div>', {'class': 'element', 'id':'element_'+data});
    var func = function(){
        // closure has formed around data, $div, and func
        // so references to them here reference the local versions
        // (the versions outside this immediate function block. i.e,
        // inside this call of make_new)
        data++;
        $div.text($div.attr('id') + ":" + data);
        setTimeout(func, 1000);
    };
    func();  //start process rolling
    return $div;
}; 
```

基本上，您应该利用 js 闭包来捕获您需要的引用。func() 在返回 div 元素之前被调用，但是没有什么能阻止你返回元素和 func，然后再调用 func()。

在这里查看 jsfiddle：http: [//jsfiddle.net/gRfyH/](http://jsfiddle.net/gRfyH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T19:01:05.237

事件处理程序的范围始终是元素，因此使用`this`您正在做所有正确的事情来引用 created `<div>`from `get_value`。

然而，当您`get_value`从超时调用时，它将在全局上下文中执行。因此，您需要[`bind()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)先将函数传递给元素，然后再将其传递`setTimeout`：

```
setTimeout(get_value.bind(this), 5000); 
```

或者您手动执行：

```
var el = this;
setTimeout(function() {
    get_value.call(el);
}, 5000); 
```

# php - MySQL MyISAM 竞争条件

> ID：10179948
> 
> 赞同：1
> 
> 时间：2012-04-16T18:56:09.010
> 
> 标签：php, mysql, myisam, race-condition

该函数具有下一个结构：

```
$q = 'LOCK TABLES table1 WRITE;';
mysql_query($q);    
$q = 'select id from table1 where is_delete = 0 limit 1;';
$res = mysql_fetch_assoc(mysql_query($q));
if($res) {
$q = 'UPDATE table1 SET is_delete = 1 WHERE id = '".$res['id']."'';
mysql_query($q);
}
$q = 'UNLOCK TABLES;';
mysql_query($q); 
```

我锁定了所有表，但查询并行运行。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:34:20.113

检查您是否在 LOCK TABLES 查询中收到任何 MySQL 错误：

```
$q = 'LOCK TABLES table1 WRITE';
$r = mysql_query($q) or die(mysql_error()); 
```

但是，如果这就是你所做的*一切*，你也可以简单地写：

```
UPDATE `table1 SET `is_delete` = 1 WHERE `is_delete` = 0 LIMIT 1 
```

这根本不需要任何锁。当然，这只有在您的第一个查询中的数据没有以任何方式处理时才有效，并且如果您正在更新哪一行并不重要，只要它是其中`is_delete`设置为 0 的行。这是您发布的代码也做了什么，但对我来说，您想将此代码用于什么并不是很明显:)

更一般地说，如果您为 MySQL 表使用默认的 InnoDB 存储引擎，您可能需要查看 SELECT ... FOR UPDATE： [http ://dev.mysql.com/doc/refman/5.0/en/innodb-锁定-reads.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html)

你可以写：

```
$q = 'select id from table1 where is_delete = 0 limit 1 for update';
$res = mysql_fetch_assoc(mysql_query($q));

if($res) {
   $q = 'UPDATE table1 SET is_delete = 1 WHERE id = '".$res['id']."'';
   mysql_query($q);
} 
```

另见：[http ://www.mysqlperformanceblog.com/2006/08/06/select-lock-in-share-mode-and-for-update/](http://www.mysqlperformanceblog.com/2006/08/06/select-lock-in-share-mode-and-for-update/)

# mysql - 如何在 MySQL 数据库中插入一系列行

> ID：10179950
> 
> 赞同：3
> 
> 时间：2012-04-16T18:56:15.567
> 
> 标签：mysql, sql, insert, sequence

我有一个现有的表，我想用它做以下等效的事情：

```
insert into the_table set col0=1, col1=0, col2=0;
insert into the_table set col0=2, col1=0, col2=0;
insert into the_table set col0=3, col1=0, col2=0;
...
...
insert into the_table set col0=255, col1=0, col2=0; 
```

因为这是我将不时以交互方式进行的事情，所以我想知道如何将其简化为单个语句并经常通过控制台将其推入。

编辑：

在控制台输入以下内容是不现实的：

```
insert into the_table (col1, col2, col3) values (0,0,0),(1,0,0)....(255,0,0); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:58:10.707

```
insert into the_table (col0, col1, col2) values
(1, 0, 0),
(2, 0, 0),
(3, 0, 0) 
```

我不能代表 MySQL，但 SQL Server 将其限制为每条语句 1000 行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T20:49:46.973

有点hacky，从技术上讲，这将是两个查询：

```
SET @i:=0;
INSERT INTO the_table (col0,col1,col2)
SELECT @i:=@i+1,0,0 FROM SomeTable LIMIT 255; 
```

`SomeTable`数据库中至少有 255 行的表在哪里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T18:58:23.627

```
INSERT INTO the_table
    (col0, col1, col2)
    VALUES
    (1, 0, 0),
    (2, 0, 0),
    (3, 0, 0),
    ...
    (255, 0, 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T19:13:17.520

您还可以将这些值放入另一个表中，并使用[INSERT..SELECT](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)进行操作：

```
INSERT INTO the_table (col0, col1, col2)
SELECT col0, col1, col2 FROM the_table_defaults 
```

# php - PHP ob_start 骨架只在第一次工作

> ID：10179954
> 
> 赞同：0
> 
> 时间：2012-04-16T18:56:31.993
> 
> 标签：php, time, ob-start

我浏览了建议的标题并找到了一些答案，但没有一个真正有效，所以我求助于你......

我有一个函数用于`ob_start()`调用一个文件，其中的内容用作骨架。检索到内容后，我使用`ob_end_clean()`.

我似乎只从第一次调用该函数时获得输出，之后仅此而已。我已经包含了一个代码转储，以防我做错了什么。

我还包含了从我的数据库调用 ( `$dl->select ...`) 返回的内容的示例。我还确保数据确实是从我期望的数据库传回的。

```
Array
(
[0] => Array
    (
        [rev_id] => 7
        [rev_temp_tree_id] => 2
        [rev_tree_id] => 
        [rev_status] => 
        [rev_last_updated_by] => 0
        [rev_authorized_by] => 
        [rev_date_updated] => 1334600174
        [rev_date_reviewed] => 
        [rev_update_type] => 1
        [temp_tree_id] => 2
        [temp_tree_bag_size] => 250
        [temp_tree_botanical_id] => 
        [temp_tree_stem_size] => 0
        [temp_tree_crown] => 0
        [temp_tree_price] => 0
        [temp_tree_height] => 0
        [temp_tree_plant_date] => 0
        [temp_tree_review_id] => 
        [temp_tree_comments] =>  
        [temp_tree_marked_move] => 0
        [temp_tree_initial_location] => 
        [temp_tree_coord] => 
        [temp_tree_name] => TEST
        [temp_tree_sale_status] => 0
        [temp_tree_open_ground] => 
        [temp_tree_block] => 0
        [temp_tree_row] => 0
    )

) 
```

和代码...

```
<?php

function print_trees($trees){
 $return = '';

 ob_start();
 include_once('skeletons/tree.html');
 $tree_skeleton= ob_get_contents();
 ob_end_clean();

 $search=array("[tree_id]", "[tree_name]", "[Classes]", "[rev_id]");    
 foreach($trees as $t){     
    $replace=array($t['temp_tree_id'], $t['temp_tree_name'].' ['.$t['temp_tree_id'].']', 'temp_tree', $t['rev_id']);
    $return.=str_replace($search,$replace,$tree_skeleton);
 }
 return $return;
}

switch ($_GET['mode']){
case 'trees' : 
    $db_status = '';

    $new_trees = $dl->select('tree_review AS tr LEFT JOIN temp_tree_trees AS tt ON tr.rev_temp_tree_id=tt.temp_tree_id', 'tr.rev_update_type="1"');
    echo '<h2>New Trees</h2>';
    if($dl->totalrows>0){
        echo print_trees($new_trees);
    }
    else{
        echo 'no new trees for review';
    }
    echo '<br /><br />';

    $new_trees = $dl->select('tree_review AS tr LEFT JOIN temp_tree_trees AS tt ON tr.rev_tree_id=tt.temp_tree_id', 'tr.rev_update_type="2"');
    echo '<h2>Updated Trees</h2>';
    if($dl->totalrows>0){
        echo print_trees($new_trees);
    }
    else{
        echo 'no update trees for review';
    }
    echo '<br /><br />';

    $new_trees = $dl->select('tree_review AS tr LEFT JOIN temp_tree_trees AS tt ON tr.rev_tree_id=tt.temp_tree_id', 'tr.rev_update_type="3"');
    echo '<h2>Moved Trees</h2>';
    if($dl->totalrows>0){
        echo print_trees($new_trees);
    }
    else{
        echo 'no moved trees for review';
    }
    echo '<br /><br />';

    $new_trees = $dl->select('tree_review AS tr LEFT JOIN temp_tree_trees AS tt ON tr.rev_tree_id=tt.temp_tree_id', 'tr.rev_update_type="4"');
    echo '<h2>Duplicated Trees</h2>';
    if($dl->totalrows>0){
        echo print_trees($new_trees);
    }
    else{
        echo 'no duplicated trees for review';
    }

break;
}
?> 
```

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:21:58.733

我相信这可能是以下两件事之一：

您可能会遇到麻烦，因为您在 HTML 文件中将多维数组表示为字符串，然后尝试使用字符串替换对其进行操作。您最好将文件表示为数据结构（XML、JSON）并以这种方式进行解析——这将使您完全跳过输出缓冲。

或者，我不确定 $new_trees 是对象数组还是其他东西。如果它是一个对象数组，则 foreach() 循环将无法正常工作，即它应该是 $t->temp_tree_id 与 $t['temp_tree_id']

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:47:30.623

感谢您的意见。

我发现了问题所在，实际上这很愚蠢。我作为骨架导入的文件是使用 include_once 包含的，所以一旦我尝试再次调用它，它就不会让我这样做。

@minitech 我按照你的建议更新了我的代码，谢谢。

@gadhra 骨架文件中的内容是纯html，我使用关键字将db中的内容替换为html。我应该附上 html 和我的代码。

再次感谢 ：）

# facebook - 无法一次从 Graph API 加载许多图片

> ID：10179960
> 
> 赞同：0
> 
> 时间：2012-04-16T18:56:53.657
> 
> 标签：facebook, facebook-graph-api, preloader, facebook-oauth

我正在尝试为视觉 Facebook 应用程序预加载图像，但是当我尝试预加载它们一半时，不会加载此错误：

{“错误”：{“消息”：“（＃4）达到应用程序请求限制”，“类型”：“OAuthException”，“代码”：4 } }

似乎没有关于此的任何文档....有人有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:30:07.787

根据您上面的评论，您正在为每个单独的图像发出单独的请求，这就是您达到速率限制的原因，您应该批量请求它们，最简单的方法是执行类似的操作（确切的语法是语言/SDK具体的） `https://graph.facebook.com?fields=picture&type=large&ids=COMMA_SEPERATED_LIST_OF_USER_IDs&access_token=YOUR_ACCESS_TOKEN`

来自此的响应格式是：

```
{
  "4": {
    "picture": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/49942_4_1525300_n.jpg"
  }, 
  // Other users you included in the IDs parameter
} 
```

（但所有的 SDK 都会包装它并使其更容易迭代）

# php - 在 PHP 中更新多维数组

> ID：10179961
> 
> 赞同：13
> 
> 时间：2012-04-16T18:57:09.363
> 
> 标签：php, arrays

我有一个看起来像这样的数组

```
$array =
    Array
    (
    [0] => Array
        (
            [Product] =>  Amazing Widget
            [Value] => 200
        )

    [1] => Array
        (
            [Product] => Super Amazing Widget
            [Value] => 400
        )

    [2] => Array
        (
            [Product] =>  Promising Widget 
            [Value] => 300
        )

    [3] => Array
        (
            [Product] => Superb Widget
            [Value] => 400
        )
    } 
```

我想更新数组以将“Promising Widget”更改为 800 而不是 300。

请注意，此数组的顺序是任意的，这意味着我需要根据“产品”名称值（而不是数组中的数字）更新值。

我试图通过数组中的数字访问它，但意识到由于这个原因这不起作用，我不确定如何基于另一个更改多维数组的一个元素的值。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-16T19:00:39.457

```
foreach($array as &$value){
    if($value['Product'] === 'Promising Widget'){
        $value['Value'] = 800;
        break; // Stop the loop after we've found the item
    }
} 
```

所以，你遍历数组，找到你想要的值，然后改变它。`&$value`就是这样，数组是通过引用传递的。这意味着我们可以直接从循环中编辑数组中的值，而无需执行`$array[$key]['Value']`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-16T19:00:10.557

我认为您必须遍历它们，例如：

```
foreach ($array as $k => $v) {
  if ($v['Product']=='Promising Widget') {
    $array[$k]['Value']=800;
  }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-09-01T15:09:29.187

我认为最通用的方法是使用这样的[array_walk_recursive](http://php.net/manual/en/function.array-walk-recursive.php)函数：

```
array_walk_recursive($array, 'updateValue');

function updateValue(&$data, $key) {
  if($key == 'Promising Widget') {
    $data = 800;
  }
} 
```

这样，即使您稍后将在此函数上更改数组，仍然可以正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-07T11:24:29.067

这个答案可能为时已晚，但我遇到了类似的问题，我使用这个函数解决了

```
function r_search_and_replace( &$arr ) {
    foreach ( $arr as $idx => $_ ) {
        if( is_array( $_ ) ) r_search_and_replace( $arr[$idx] );
        else {
            if( is_string( $_ ) ) $arr[$idx] = str_replace( "PATTERN", "REPLACEMENT", $_ );
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-05T16:17:27.210

对于那些期望最复杂数组的人，使用递归函数来遍历所有元素

（假设这个函数在一个 php 类中，那么）

```
public function reGenerateArray(&$arr)
{
    array_walk($arr, function (&$v, $k ) {
        if($k === 'KEY_NAME') {
            $v['OTHER_KEY'] = $newValueToReplace;
        } elseif("array" == gettype($v)) {
            $this->reGenerateArray($v);
        }
    });
} 
```

*此函数将重现现有数组*

# blackberry-playbook - 在 PlayBook 上开发虚拟键盘

> ID：10179965
> 
> 赞同：1
> 
> 时间：2012-04-16T18:57:34.737
> 
> 标签：blackberry-playbook, qnx, playbook

我正在尝试在 PlayBook 上制作虚拟阿拉伯语键盘，我正在使用 Air SDK，但它不适用于 Air sdk，所以我想通过 QNX 原生 NDK 制作它，将其嵌入系统键盘

你能给我一个例子来说明如何做到这一点吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:48:15.100

我认为没有任何方法可以扩展或替换 PlayBook 上的系统键盘

# c# - 问题绑定到 ListBox WP7

> ID：10179969
> 
> 赞同：0
> 
> 时间：2012-04-16T18:57:46.207
> 
> 标签：c#, windows-phone-7, xaml

我尝试使用集线器磁贴和两个文本块在列表框中显示三个不同的值。现在只有三个项目中的两个出现。发布`url`和发布 `name`和第三项`artistName`没有出现。我正在使用网络客户端下载 JSON 数据。这是我目前的设置。

首先我的课

```
public class NewReleasesCharts 
{
    //public Metadata metadata { get; set; }
    public ResultHome results = new ResultHome();
    public IEnumerator<ResultHome> GetEnumerator()
    {
        return this.results.GetEnumerator();
    }
}

public class ResultHome
{
    public List<FeaturedReleases> featuredReleases { get; set; }

    //public List<FeaturedCharts> featuredCharts { get; set; }
    //public List<TopDownloads> topdownloads { get; set; }
    //public List<MostPopularReleases> mostPopularReleases { get; set; }
    //public List<Components> components { get; set; }

    internal IEnumerator<ResultHome> GetEnumerator()
    {
        throw new NotImplementedException();
    }
}

public class FeaturedReleases
{
    public int id { get; set; }
    public string type { get; set; }
    public string name { get; set; }
    public string slug { get; set; }
    public List<ReleaseArtist> artists { get; set; }
    public ReleaseImage images { get; set; }
}

public class ReleaseArtist
{
    public int artistID { get; set; }
    public string artistName { get; set; }
}

public class ReleaseImage
{
    //public ReleaseSmall small { get; set; }
    public ReleaseMedium medium { get; set; }
    public ReleaseLarge large { get; set; }
}

public class ReleaseMedium
{
    public int width { get; set; }
    public int height { get; set; }
    public string url { get; set; }
    public string secureUrl { get; set; }
}

public class ReleaseLarge
{
    public int width { get; set; }
    public int height { get; set; }
    public string url { get; set; }
    public string secureUrl { get; set; }
} 
```

xml

```
 <ListBox Grid.Row="0" x:Name="listRelease" ScrollViewer.VerticalScrollBarVisibility="Disabled">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <toolkit:HubTile Source="{Binding images.large.url}" Margin="10" />
                                <TextBlock Text="{Binding name}" Width="173" />
                                <TextBlock Text="{Binding artists.artistName}" Width="173" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

和背后的代码

```
public void jsonHome_GetDataCompleted(object snder, DownloadStringCompletedEventArgs e)
{
    NewReleasesCharts homeData = JsonConvert.DeserializeObject<NewReleasesCharts>(e.Result);

    const int limit = 6;

    this.listRelease.ItemsSource = homeData.results.featuredReleases.Take(limit);
} 
```

可以通过将 api:http://api.beatport.com/catalog/3/beatport/home 插入[JSON 格式化程序](http://jsonformatter.curiousconcept.com/)来查看 JSON 字符串。谢谢。

**更新**

第二个列表框绑定到艺术家

```
 <ListBox ItemsSource="{Binding Artists}">
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding artistName}" />
                        </DataTemplate>
                    </ListBox.ItemTemplate>    
                </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:08:57.993

输出不是显示错误吗？我认为属性 Artists.artistName 不存在，因为它是一个列表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:13:20.130

艺术家是一个列表。您必须将其绑定到列表控件（例如 ListBox 或 ItemsPanel）。

其他可能性：要仅显示列表中的第一位艺术家，请使用以下语法：

```
 <TextBlock Text="{Binding artists[0].artistName}" Width="173" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T01:33:15.427

`ItemSource`绑定到时遇到大小写问题`Artists`。

```
<ListBox ItemsSource="{Binding Artists}">
    <ItemsPanelTemplate>
        <toolkit:WrapPanel Orientation="Horizontal" />
    </ItemsPanelTemplate>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding artistName}" />
        </DataTemplate>
    </ListBox.ItemTemplate>    
</ListBox> 
```

但是，您的`FeaturedReleases`班级定义`artists`而不是`Artists`.

```
public class FeaturedReleases
{
    public int id { get; set; }
    public string type { get; set; }
    public string name { get; set; }
    public string slug { get; set; }
    public List<ReleaseArtist> artists { get; set; }
    public ReleaseImage images { get; set; }
} 
```

为了与您的静止保持一致，您应该将绑定更改为`artists`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T20:56:28.313

尝试使用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)，因此`List<ReleaseArtist> artists { get; set; }`应该使用public 而不是 public ，`public ObservableCollection<ReleaseArtist> artists { get; set; }`因为对我来说，在您从 Internet 接收艺术家之后，UI 似乎没有随这些艺术家更新。

检查本教程：http: [//msdn.microsoft.com/en-us/library/ms748365.aspx](http://msdn.microsoft.com/en-us/library/ms748365.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-21T22:50:43.817

我终于能够弄清楚了。我绑定`artists`到一个嵌套列表框，并且能够获得我想要的布局。这是代码。

```
 <ListBox x:Name="listRelease" Grid.Row="0" >
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Vertical">
                                <toolkit:HubTile Source="{Binding images.large.url}" Margin="10" IsFrozen="True" />
                                <TextBlock Text="{Binding name}" Width="173" />
                                <ListBox ItemsSource="{Binding artists}" ScrollViewer.VerticalScrollBarVisibility="Disabled" >
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" >
                                                <TextBlock Text="{Binding name}" Margin="10,0,0,0"  Width="173" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

# scala - 在 Scala 中定义类型安全可选方法的最佳方法是什么？

> ID：10179971
> 
> 赞同：5
> 
> 时间：2012-04-16T18:57:49.700
> 
> 标签：scala, generics, scala-collections

可选方法是可以在类泛型具有特定类型时应用的方法。例子：

```
list.unzip //works only if this is collection of pairs
list.sum //works only if this collection of numbers 
```

目前我想要实现与解压缩具有相同约束的回归方法（即二维点的集合），但我不知道如何确保该方法`(implicit asPair: A => (A1, A2)`存在以及定义此类转换的最佳位置在哪里。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T19:19:38.237

这是`TraversableOnce.toMap`确保仅在对的集合上调用它的方法。

```
def toMap[T, U](implicit ev: A <:< (T, U)): immutable.Map[T, U] = {
  val b = immutable.Map.newBuilder[T, U]
  for (x <- self)
    b += x
  b.result
} 
```

但是，如果您希望将类似的方法添加到现有的集合类中，则可以使其变得更加容易：

```
class EnhancedIterable[T,U](x: Iterable[(T,U)]) { // CanBuildFrom omitted for brevity
  def swapAll() = x.map(_.swap)
}
implicit def enhanceIterable[T,U](x: Iterable[(T,U)]) = new EnhancedIterable(x)

List((1,2), (3,4), (5,6)).swapAll // List((2,1), (4,3), (6,5))
List(1, 2, 3).swapAll // error: value swapAll is not a member of List[Int] 
```

# php - 在 Titanium 中的 Javascript 和 php 之间传递参数

> ID：10179977
> 
> 赞同：0
> 
> 时间：2012-04-16T18:58:22.820
> 
> 标签：php, javascript, android, parameter-passing, titanium-mobile

我需要帮助解决一个小问题。我如何在钛中的 javascript 和 php 之间传递值，我问这个是因为我尝试了很多不同的版本，但都没有工作。请我快速需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:56:36.970

您可以使用[Titanium.Network.HTTPClient](http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.Network.HTTPClient-object)以这种方式连接到您的 php 页面：

```
var downloadDataReq = Titanium.Network.createHTTPClient();
downloadDataReq.onload = function() {
    var response = this.responseText;
    //some code
}
downloadDataReq.onerror = function(event) {
    //some code
};
var urlToDownloadData = "http://10.0.2.2/jobfinder/teste_demo_grafica/Resources/teste.php?param1=value1&param2=value2";
downloadDataReq.open("GET",urlToDownloadData);
downloadDataReq.send(); 
```

teste.php 的代码应该是这样的：

```
<?php
    $param1 = $_GET['param1'];
    $param2 = $_GET['param2'];
    //some code
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:04:25.473

你看过 Appcelerator API 吗？有一些很好的例子`HTTPClient`：

[http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.Network.HTTPClient-object.html](http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.Network.HTTPClient-object.html)

# c# - ASPX 的 C# TextBox.Validating 取消事件

> ID：10179981
> 
> 赞同：0
> 
> 时间：2012-04-16T18:58:35.290
> 
> 标签：c#, asp.net, validating-event

我正在尝试将代码从 WinForm 转换为 WinApp，但我对 aspx 知之甚少，对 javascript 一无所知。

我以编程方式创建了一个文本框，它将被赋予文本。然后将文本通过验证方法传递，如下所示：

`text.Validating += new CancelEventHandler(boolean_Validating);`

去

```
 private void boolean_Validating(object sender, CancelEventArgs e)
    {
        TextBox textBox = (TextBox)sender;
        string boolean = textBox.Text;

        string message = null;
        if (!checkBooleanSyntax(boolean, out message))
        {
            Response.Write("Error: " + message);
            e.Cancel = true;

            textBox.Text = message;
        }
    } 
```

ASPX 没有`text.Validating`零件的定义。我还能如何使用取消事件处理程序验证文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:07:11.220

看来您已经习惯了有状态的应用程序很长一段时间。Web 服务器不会取消请求 - 您只需获取提供给您的信息，然后向他们发送响应。

因此，如果您想验证文本框的文本，您通常会有一个按钮来提交到服务器，然后该按钮单击代码会获取该值并对其进行验证。如果无效，则在 HTML 中标记页面或显示一些控件，然后将该信息呈现回用户的浏览器。

例子：

```
 <asp:TextBox ID="textName" runat="server" CssClass="someTextYo" />
 <asp:Panel ID="panelError" runat="server" Visible="false">
     You entered bad stuff, yo
 </asp:Panel>
 <asp:Button ID="buttonSubmit" runat="server" Click="buttonSubmit_Click" /> 
```

然后在您的代码中：

```
 protected void buttonSubmit_Click(object sender, EventArgs e)
 {
     if(string.IsNullOrEmpty(textName.Text))
     {
         panelError.Visible = true;
     }
     else
     {
         // Save to Database, whatever
     }
 } 
```

此外，您可以使用 javascript 在客户端验证这些组件，从而消除往返服务器的需要（尽管您仍然应该验证数据服务器端）。例如，使用 jQuery：

```
 $('form').submit(function()
 {
     if($.trim($('.someTextYo').val()) == '')
        return false;

     return true;
 }); 
```

您可以通过证明返回的表单提交回调来取消表单发布`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:05:02.770

在 asp.net 中，我们使用验证控件。那些可以在客户端处理工作（如果用户没有在他的浏览器中禁用 javascript）然后在服务器端（所以你可以确保用户不会只是禁用 js 并且可以立即自由地利用你的应用程序） .

如果您需要一些具有特定逻辑的特殊验证，您可以自己编写一个自定义验证器控件。

不能在这里全部写完，因为一本书中的多个章节可以涵盖这个主题，但请查看这里以获取更多信息： [http ://www.w3schools.com/aspnet/aspnet_refvalidationcontrols.asp](http://www.w3schools.com/aspnet/aspnet_refvalidationcontrols.asp)

[http://msdn.microsoft.com/en-us/library/aa479013.aspx](http://msdn.microsoft.com/en-us/library/aa479013.aspx)

# php - 使环境变量全局化是一种好习惯吗？

> ID：10179982
> 
> 赞同：2
> 
> 时间：2012-04-16T18:58:38.950
> 
> 标签：php

我有一些模块化（对象和类）JavaScript 和 PHP。我不断得到摆脱全局变量的建议......“它们很糟糕”......我猜是因为它们会导致依赖关系。

但是我应该把环境变量放在哪里——最好的例子是路径信息。

这是一个典型的例子。

下面的 UploadFile 类需要

```
const     PICTURES = '../pictures/'; 
```

特别是在这个地方（无需阅读整个课程）

```
$this->path_medium = UploadedFile::PICTURES . "$this->sessionId.jpg";
$this->path_small = UploadedFile::PICTURES . "$this->sessionId-1.jpg"; 
```

到没有上传文件的地方。我宁愿把它放在 GlobalClass 中并从那里访问它。这是有道理的，因为其他代码需要知道图片的去向，而我只有一个位置可以进行更新。

是否拥有可以作为全局变量的环境变量，以便可以从多个模块访问它们，但只能在一个地方进行编辑。

```
<?php

/**
 *      Module  :       Model
 *      Name    :       UploadFile
 *      Input   :       File Information
 *      Output  :       Resized Files in .jpg format
 *      Notes   :

 resizeMove() - resizes the picture to $maxMedium and $maxSmall and moves the file to a permanent location.  
 makeDimensions() - calculates the dimensions of the new images so that there is not distortion if possible.
 getImage() - creates a php image for manipulation.
 updateSessionAndDb - updates the mysql table - move out.

 */

    class UploadedFile
    {
    const     PICTURES = '../pictures/';

    private  $originalWidth, 
             $originalHeight, 
             $newWidth, 
             $newHeight, 
             $maxMedium = 50,
             $maxSmall = 20;

    private  $src = NULL;

    private 
             $fileType,
             $fileName,
             $sessionId,
             $path_medium,
             $path_small;

    function __construct($fileType, $fileName)
    {
        $this->sessionId = Session::get('id');
        $this->path_medium = UploadedFile::PICTURES . "$this->sessionId.jpg";
        $this->path_small = UploadedFile::PICTURES . "$this->sessionId-1.jpg";
        $this->fileType = $fileType;
        $this->fileName = $fileName;
    }

    public function createImages()
    {
        if(move_uploaded_file($this->fileName, $this->path_medium))
        {
            if($this->getImage($this->path_medium))
            {
                list($this->originalWidth,$this->originalHeight)=getimagesize($this->path_medium);
                $this->resizeMove($this->maxMedium,$this->path_medium);
                $this->resizeMove($this->maxSmall,$this->path_small);
                imagedestroy($this->src);
            }
        }
    }

    private function resizeMove($max, $path)
    {
        $this->makeDimensions($max);
        $image_true_color = imagecreatetruecolor($this->newWidth, $this->newHeight);
        imagecopyresampled($image_true_color, $this->src, 0, 0, 0, 0, $this->newWidth, $this->newHeight, $this->
        originalWidth, $this->originalHeight);
        imagejpeg($image_true_color, $path);
        imagedestroy($image_true_color);
    }

    private function makeDimensions($max)
    {
        $this->newWidth=$this->originalWidth; 
        $this->newHeight=$this->originalHeight;
        if(($this->originalWidth > $this->originalHeight) && ($this->originalWidth > $max))
        {
            $this->newWidth = $max;
            $this->newHeight = ($max / $this->originalWidth) * $this->originalHeight;
        }
        elseif($this->originalHeight > $this->originalWidth && $this->originalHeight > $max)
        {
            $this->newHeight = $max;
            $this->newWidth = ($max / $this->originalHeight) * $this->originalWidth;
        } 
        elseif ($this->originalWidth > $max)
        {
            $this->newWidth = $this->newHeight = $max;
        }
    }

    private function getImage($path)
    {
        $type_creators = array( 
            'image/gif' => 'imagecreatefromgif', 
            'image/pjpeg' => 'imagecreatefromjpeg', 
            'image/jpeg' => 'imagecreatefromjpeg', 
            'image/png' => 'imagecreatefrompng'); 
        if(array_key_exists($this->fileType, $type_creators)) 
        { 
            $this->src = $type_creators[$this->fileType]($path); 
            return true; 
        }
    return false; 
    }
} 
```

**对象制作器示例**

```
class ObjectMaker
{
    public function makeSignUp()
    {
        $DatabaseObject = new Database();
        $TextObject = new Text();
        $MessageObject = new Message();

        $SignUpObject = new ControlSignUp();        
        $SignUpObject->setObjects($DatabaseObject, $TextObject, $MessageObject);
        return $SignUpObject;
    } 
```

**对象生成器示例已修改**

```
 class ObjectMaker
    {
        public function makeSignUp()
        {
            $DatabaseObject = new Database();
            $TextObject = new Text();
            $MessageObject = new Message();

            return new ControlSignUp( $DatabaseObject, $TextObject, $MessageObject );        
        } 
```

**笔记：**

我有可能类似于 SignUp 的类，因此我可以使用继承来通过使用 ObjectMaker 类来减少对象创建的冗余 - 回到原来的问题 - 我可以在这个“模式”中包括注入全局变量而不仅仅是对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:15:28.833

如果你想让你的类可重用，你不应该在那里硬编码东西，而是注入它。就像图像的会话 ID 和基本目录一样。将这些作为参数添加到您的构造函数中：

```
function __construct($fileType, $fileName, $sessionId, $prefixPictures)
{
    $this->fileType = $fileType;
    $this->fileName = $fileName;
    $this->sessionId = $sessionId;
    $this->prefixPictures = $prefixPictures;

    $this->path_medium = $prefixPictures . $this->sessionId . ".jpg";
    $this->path_small = $prefixPictures . $this->sessionId . "-1.jpg";
} 
```

此外，您应该创建一个自己的类，一个用于调整图片大小，一个用于计算大小。实际上这样的类已经存在，所以你只需要包含一些文件，然后调整大小（例如使用[WideImage](http://wideimage.sourceforge.net/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:03:13.863

可能不是。您可以制作一个路径获取器来输出路径类的属性（即`Paths::pictures`）

再说一次，在那个级别上，它取决于开发人员。

我认为为了组织的缘故，将它们全部放在一个名称空间中并以这种方式调用它们是件好事。当新的开发者出现时它会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T19:03:36.817

**常量并不像全局变量那么糟糕，并且将它用于路径是迄今为止克服 PHP 没有“真正”根路径变量的尴尬的最常用方法（您可以使用DIR**基于当前脚本来获得它，但不是基于调用当前脚本的脚本）。

全局变量不好的主要原因不是因为它们是全局变量，而是因为它们可以在脚本中的任何位置更改。事实上，这是我对 PHP 的主要抱怨之一 - $_SERVER 变量可以在脚本运行期间更改，我希望它们是常量。

常量只能被定义和使用，不能编辑它们。只要您足够好地记录全局变量的存在，那么管理它们并不比管理任何其他 PHP 环境变量更难。

只要你不和他们一起疯狂就可以了。请记住，环境总是在测试中发挥作用，只要您了解环境并且可以轻松地模拟它，那么它就不会给测试带来更多问题。

# java - java 应用程序共享选项

> ID：10179985
> 
> 赞同：0
> 
> 时间：2012-04-16T18:58:42.237
> 
> 标签：java, social-networking, share

我一直在开发一个[照片浏览应用程序](http://i39.tinypic.com/2lddls4.png)，我想知道是否有某种方法可以为它添加一些社交网络选项（比如在 facebook 或 twitter 上分享一张或多张照片等）。欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:02:24.877

是的，有这样的选择，看看：

*   [Facebook 图形 API](https://developers.facebook.com/blog/post/498/)
*   [推特 API](https://dev.twitter.com/docs/api/1/post/statuses/update_with_media)

# android - 数组中有多个项目时的 ArrayAdapter 错误

> ID：10179986
> 
> 赞同：1
> 
> 时间：2012-04-16T18:58:46.180
> 
> 标签：android, listview, android-arrayadapter, create-view

当我得到一个在 ListView 中包含多个值的数组时出现错误...它崩溃了...

str_amparticipant_firstname 是一个字符串值数组。str_pmparticipant_firstname 也是一个字符串值数组。

```
 adapteram = new ArrayAdapter<String>(Attend.this, android.R.layout.simple_list_item_1, str_amparticipant_firstname);   

 adapterpm = new ArrayAdapter<String>(Attend.this, android.R.layout.simple_list_item_1, str_pmparticipant_firstname);   

          amattendees.setAdapter(adapteram);
          pmattendees.setAdapter(adapterpm); 
```

该课程称为参加。当数组中有一个值时，ListViews 会显示数组中的值。如果有多个值，应用程序就会崩溃。我已经检查了数组是否被正确填充，并且是正确的。希望错误日志有答案。我得到的错误日志如下：

```
04-16 19:28:57.664: E/AndroidRuntime(5807): FATAL EXCEPTION: main
04-16 19:28:57.664: E/AndroidRuntime(5807): java.lang.NullPointerException
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.AbsListView.obtainView(AbsListView.java:1430)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1307)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.ListView.onMeasure(ListView.java:1127)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.View.measure(View.java:8510)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3202)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:701)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:311)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.View.measure(View.java:8510)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3202)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.View.measure(View.java:8510)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3202)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.View.measure(View.java:8510)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.View.measure(View.java:8510)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3202)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.View.measure(View.java:8510)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.ViewRoot.performTraversals(ViewRoot.java:871)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1921)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.os.Looper.loop(Looper.java:143)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at android.app.ActivityThread.main(ActivityThread.java:4196)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at java.lang.reflect.Method.invokeNative(Native Method)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at java.lang.reflect.Method.invoke(Method.java:507)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-16 19:28:57.664: E/AndroidRuntime(5807):     at dalvik.system.NativeStart.main(Native Method) 
```

再次，仅当数组中有多个值时才会出现错误。我试图找到这个问题的答案，但我找不到有关该错误的任何信息。请帮忙！谢谢你！

更新：这是填充和创建数组的方式：

```
for(int i = 0; i < json_array_amparticipants.length(); i++){
                             //store all the amparticipants
                         str_amparticipant_email = new String[json_array_amparticipants.length()];
                         str_amparticipant_firstname = new String[json_array_amparticipants.length()];
                         str_amparticipant_lastname = new String[json_array_amparticipants.length()];         
                         str_amparticipant_attendingam = new String[json_array_amparticipants.length()];    
                         str_amparticipant_attendingpm = new String[json_array_amparticipants.length()];
                         //full_name_am = new String[json_array_amparticipants.length()];
                         str_amparticipant_email[i] = json_array_amparticipants.getJSONObject(i).getString("email");
                         str_amparticipant_firstname[i] = json_array_amparticipants.getJSONObject(i).getString("first_name");
                         str_amparticipant_lastname[i] = json_array_amparticipants.getJSONObject(i).getString("last_name"); 
                         str_amparticipant_attendingam[i] = json_array_amparticipants.getJSONObject(i).getString("attending_am");   
                         str_amparticipant_attendingpm[i] = json_array_amparticipants.getJSONObject(i).getString("attending_pm");
                         //full_name_am[i] = str_amparticipant_firstname[i] + str_amparticipant_lastname[i];

                     } 
```

修复：我每次都在创建新数组，所以它仍然存储值，但它会导致崩溃......这是更新的修复。伙计们干杯：

```
 //store all the amparticipants
             str_amparticipant_email = new String[json_array_amparticipants.length()];
             str_amparticipant_firstname = new String[json_array_amparticipants.length()];
             str_amparticipant_lastname = new String[json_array_amparticipants.length()];         
             str_amparticipant_attendingam = new String[json_array_amparticipants.length()];    
             str_amparticipant_attendingpm = new String[json_array_amparticipants.length()];

                 for(int i = 0; i < json_array_amparticipants.length(); i++){
                     //full_name_am = new String[json_array_amparticipants.length()];
                     str_amparticipant_email[i] = json_array_amparticipants.getJSONObject(i).getString("email");
                     str_amparticipant_firstname[i] = json_array_amparticipants.getJSONObject(i).getString("first_name");
                     str_amparticipant_lastname[i] = json_array_amparticipants.getJSONObject(i).getString("last_name"); 
                     str_amparticipant_attendingam[i] = json_array_amparticipants.getJSONObject(i).getString("attending_am");   
                     str_amparticipant_attendingpm[i] = json_array_amparticipants.getJSONObject(i).getString("attending_pm");
                     //full_name_am[i] = str_amparticipant_firstname[i] + str_amparticipant_lastname[i];

                 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T19:05:42.447

这应该在您的循环之外：

```
 str_amparticipant_email = new String[json_array_amparticipants.length()];
                         str_amparticipant_firstname = new String[json_array_amparticipants.length()];
                         str_amparticipant_lastname = new String[json_array_amparticipants.length()];         
                         str_amparticipant_attendingam = new String[json_array_amparticipants.length()];    
                         str_amparticipant_attendingpm = new String[json_array_amparticipants.length()]; 
```

每次进入循环时，您都在重新创建数组，删除任何以前的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:07:06.347

我的猜测是这个错误在这里：

`str_amparticipant_firstname[i] = json_array_amparticipants.getJSONObject(i).getString("first_name"); str_amparticipant_lastname[i] = json_array_amparticipants.getJSONObject(i).getString("last_name");`

这些键是否可能不在 JSONObject 中？它将解释空指针异常。

# mysql - MySQL 和动态查询错误 1064

> ID：10179988
> 
> 赞同：0
> 
> 时间：2012-04-16T18:58:49.783
> 
> 标签：mysql, sql, stored-procedures

有谁知道为什么我在下面不断收到此错误？我似乎无法动摇它。

**`call test_delete('WOW@GMAIL.COM', '''2c016cd6-87e6-11e1-9fac-001cd4565d26''', 0) Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UPDATE user u SET u.enable = ? WHERE u.' at line 2`**

```
 DELIMITER $$    
    CREATE PROCEDURE `test_delete`(
        IN username NVARCHAR(255),
        IN district_admin_ids LONGTEXT,
        IN active BIT(1)
    )
    BEGIN

    SET @username = username;
    SET @district_admin_ids = district_admin_ids;
    SET @active = CASE WHEN active > 0 THEN 1 ELSE 0 END;

    SET @query = CONCAT('
                        SET SQL_SAFE_UPDATES=0;
                        UPDATE user u
                        SET u.enable = ? 
                        WHERE u.id IN (
                            SELECT da.id
                            FROM test da
                            WHERE u.id = da.id 
                            AND u.username = ?
                            AND da.id IN (?)
                        );');

    PREPARE statement FROM @query;
    EXECUTE statement USING @active, @username, @district_admin_ids;
    DEALLOCATE PREPARE statement;   
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:12:55.407

移到`SET SQL_SAFE_UPDATES=0;`动态查询之外并且它起作用了。

# sql - 在选择语句中使用参数

> ID：10179989
> 
> 赞同：0
> 
> 时间：2012-04-16T18:58:50.147
> 
> 标签：sql, prepared-statement

我试图在 Preparedstatement 中参数化值，如下所示

```
PreparedStatement ps = Connection.prepareStatement("select col_a,? from TABLE_A");
ps.setString(1,"myValue");
ps.execute(); 
```

我想要以下回报

```
COL_A    myValue
-----------------
val1     myValue
val2     myValue 
```

这与下面的普通 sql 相当。

```
select col_a,'myValue' 
from TABLE_A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:01:08.517

您不能参数化列名。

对于动态列名，您将需要使用[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)，这可能会使您面临 SQL 注入。

# c - linux上的places.sqlite数据库在哪里？

> ID：10179990
> 
> 赞同：3
> 
> 时间：2012-04-16T18:59:10.140
> 
> 标签：c, firefox

我在哪里可以找到`places.sqlite`Ubuntu/Linux 10.4、Firefox 5.0 (X11) 上的文件数据库？我想使用 C 阅读 Firefox 上的打开网址。但我没有找到该文件。我尝试按照[这些说明](http://www.forensicswiki.org/wiki/Mozilla_Firefox_3_History_File_Format)进行操作，但文件夹`.mozilla`中不存在该`/home/<user>/`目录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T19:09:10.910

尝试：

```
find / -name 'places.sqlite' 
```

在我的系统中，答案是：

```
/home/edu/.mozilla/firefox/qk8lh1kf.default/places.sqlite 
```

# objective-c - 意外删除iOS框架

> ID：10179994
> 
> 赞同：3
> 
> 时间：2012-04-16T18:59:21.500
> 
> 标签：objective-c, ios, xcode

所以我一直很难让我的 iphone 申请获得批准。当我对我的一些代码有点狂暴的时候，我有点过分了。

在我的愚蠢中，我认为也许我不需要`SenTestingKit.framework`. 所以我试图从我的程序中删除它，当被问及是否要删除或删除引用时，我不小心点击了删除。

然而，在查看 SenTestingKit.framework 的一些崩溃日志预删除后，我发现以下内容......

![在此处输入图像描述](../Images/1f27a4fcc1d4a96fe191ca060ab6585c.png)

这个错误再次出现在我删除框架之前。崩溃代码是`0xe7ffdefe`

有人可以告诉我我可以从哪里得到 sentestingkit.framework 吗？而且，如果您知道为什么会导致崩溃，那将是非常惊人的。

谢谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T19:03:31.463

要恢复该框架，只需重新安装 Xcode。或者，也许你的垃圾仍然有它。

关于抱怨找不到 SenTestkingKit 的 iOS 设备：我假设是这样，因为它是用于测试用例的仅 Xcode 框架。分发应用程序时不应该链接它。用户为什么要运行测试用例？

# objective-c - 如何使用 Objective-C 在 Mac Os X 中模拟 Unicode Char“按键”？

> ID：10179995
> 
> 赞同：6
> 
> 时间：2012-04-16T18:59:22.233
> 
> 标签：objective-c, macos, unicode, keypress, simulate

我想在 Mac OS X 中模拟一个 unicode 字符以发送到前台应用程序。我的意思是我有一个 unicode 字符（可以包含阿拉伯语、中文等），比如“a”，我想输入它。请注意，我没有尝试使用虚拟键或键码。只有一个字符。

此致，佩曼·莫尔塔扎维

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T06:02:26.040

我找到了一个非常好的方法，但仍然存在问题。看看代码然后我写什么是当前的问题。

```
 CGEventRef downEvt = CGEventCreateKeyboardEvent( NULL, 0, true );
CGEventRef upEvt = CGEventCreateKeyboardEvent( NULL, 0, false );
UniChar oneChar = 'h';
CGEventKeyboardSetUnicodeString( downEvt, 1, &oneChar );
CGEventKeyboardSetUnicodeString( upEvt, 1, &oneChar );
CGEventPost( kCGAnnotatedSessionEventTap, downEvt );
CGEventPost( kCGAnnotatedSessionEventTap, upEvt ); 
```

问题是这个事件仅限于搜索框之类的某些会话，这是因为如果我们将 kCGAnnotatedSessionEventTap 更改为**kCGSessionEventTap****那么**它将仅适用于搜索框。你不能帮我把它们结合起来，让它把这个事件应用到每个会话中。

问候，佩曼·莫尔塔扎维

# macos - 如果从浏览器中的插件显示，NSScrollView 不显示水平滚动条

> ID：10179996
> 
> 赞同：1
> 
> 时间：2012-04-16T18:59:26.857
> 
> 标签：macos, firefox, scrollview, scroller

我正在开发一个使用插件来显示一些本机内容的 Web 应用程序。我创建了一个 NSView（比如 A）并将 NSView 的 CALayer 返回到浏览器以在浏览器窗口上托管。在这个 NSView 里面我托管了一个 NSScrollView；ScrollView 包含需要滚动的实际文档（文档的大小足够大，水平和垂直滚动条都需要显示）。我将主机 NSView(A) 的边界正确设置为 NSScrollView 上的帧大小；此外，我确保在 ScrollView 上将 setHasHorizo​​ntalScroller 和 setHasVerticalScroller 设置为 YES。

尽管查看器中显示了垂直滚动条，但没有显示水平滚动条。我想知道我犯了什么错误以及为什么不显示水平滚动条。非常感谢任何关于此的线索/建议。