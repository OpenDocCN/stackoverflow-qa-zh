# StackOverflow 问答 12417000-12417999

# ios - 是否可以为 L/R 通道交替选择麦克风/耳机麦克风输入通道？

> ID：12417000
> 
> 赞同：4
> 
> 时间：2012-09-14T01:27:15.720
> 
> 标签：ios, core-audio

我正在做一个项目，该项目需要耳机麦克风和内置麦克风来录制立体声文件，其中左声道来自耳机麦克风，右声道仅来自内置麦克风。

这可能吗？

# google-chrome-extension - 如何将 chrome 应用程序更新为清单 2

> ID：12417004
> 
> 赞同：0
> 
> 时间：2012-09-14T01:28:21.283
> 
> 标签：google-chrome-extension, manifest

我的 chrome 扩展程序是其中之一，当您单击它时，它所做的只是打开一个 URL。它过去可以正常工作`web_url`，但`web_url`不适用于清单版本`2`。这是我当前的扩展清单：

```
"name": "PTD",
"version": "2.7.8",
"manifest_version": 2,
"description": "Pokemon Tower Defense 1 and 2!",
"icons": {"128": "128.png"},
"default_locale": "en",
"app": {
   "urls": ["http://gamecorneronline.com/ptd.html"],
   "launch": {
      "web_url": "http://gamecorneronline.com/ptd.html"
    },
   "permissions": ["unlimitedStorage","notifications"]
} 
```

你能提供任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:55:41.723

弄清楚了。无论如何感谢您的帮助：

```
{
  "name": "PTD1/PTD2",
  "description": "Play both PTD1 and PTD2!",
  "version": "3.2",
  "manifest_version": 2,
  "app": {
    "urls": [
      "http://example.com/",
    ],
    "launch": {
      "web_url": "http://example.com/"
    }
  },
  "icons": {
    "128": "icon_128.png"
  },
  "permissions": [
    "unlimitedStorage",
    "notifications"
  ]
} 
```

# erlang - 作为分布式握手的一部分，如何在不启动所有应用程序的情况下跨节点分发应用程序

> ID：12417006
> 
> 赞同：9
> 
> 时间：2012-09-14T01:28:29.003
> 
> 标签：erlang, distributed-apps

## 背景

*   我有一个在节点启动时自动启动的应用程序（使用 .rel、.boot 等）
*   如果第一个节点出现故障，我希望应用程序故障转移到备用节点。
*   我使用 Erlang 的分布式应用程序功能来处理故障转移和接管。

## 问题

问题在于分布式应用程序协商的一部分是，当节点握手以确定哪个节点将保持运行以及哪个节点将被静默时，应用程序会在所有节点上启动。如果可能，我需要应用程序不在多个节点上。

## 问题

*   有没有办法让节点自动启动我的应用程序，*除非*涉及分布式应用程序启动协商？交替，
*   如何让我的应用程序以无人值守的方式启动和故障转移，而不需要我的应用程序在多个节点上启动（甚至短暂）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T10:02:25.340

不幸的是，如今 Erlang 接管和故障转移功能非常有限，因此您需要您的应用程序在所有节点上运行才能使这些功能正常工作。

我想到的唯一想法有点疯狂，并且涉及到更多的间接级别，但它实际上可能有效。

您可以编写一个假的、轻量级的*包装*应用程序，然后在所有节点上启动它。此应用程序使用标准的 Erlang 分发功能。然后，您只需启动原始应用程序即可实施接管/故障转移策略：

```
-module(wrapper).
-behaviour(application).

[...]

start({takeover, _Node}, _Args) ->
  application:start(original_app).

[...] 
```

另外，请记住，当您`application:start(my_app)`在所有节点中键入分布式应用程序时，该应用程序并未在所有节点上*启动*。`application:which_applications()`您可以通过在每个节点上键入来验证这一点。您会注意到应用程序是如何在单个节点上*运行的。*

最后，请问为什么不能在多个节点上启动应用程序？

# ruby-on-rails - Rspec：为什么我的模型通常无效？

> ID：12417007
> 
> 赞同：0
> 
> 时间：2012-09-14T01:28:30.690
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, factory-bot, rspec-rails

这个问题与我的工厂有关，但我会先展示我的**location_spec.rb**：

```
require 'spec_helper'

describe Location do

  before(:each) do
    @location = FactoryGirl.build(:location)
  end

  subject { @location }

  describe "should be valid in general" do
    it { should be_valid }
  end

  describe "when user_id is not present" do
    before { @location.user_id = nil }
    it { should_not be_valid }
  end

  describe "when owner_id is not present" do
    before { @location.owner_id = nil }
    it { should_not be_valid }
  end
end 
```

这是我的**工厂.rb**

```
FactoryGirl.define do
  factory :user do
    username   'user1'
    email      'user@example.com'
    timezone   'Eastern Time (US & Canada)'
    password   'testing'
  end

  factory :owner do
    name    'Owner One'
    user
  end

  factory :location do
    name 'Location One'
    about 'About this location'
    website 'http://www.locationone.com/'
    phone_number '12 323-4234'
    street_address 'Shibuya, Tokyo, Japan'

    association :owner, strategy: :build
  end
end 
```

**位置.rb**

```
class Location < ActiveRecord::Base
  attr_accessible :about, :name, :owner_id, :phone_number,:street_address, :website
  belongs_to :owner
  belongs_to :user
  validates_presence_of :owner_id
  validates_presence_of :user_id
end 
```

这是我得到的错误：

```
Failures:

  1) Location should be valid in general
     Failure/Error: it { should be_valid }
       expected valid? to return true, got false
    #./spec/models/location_spec.rb:53:in `block (3 levels) in <top (required)>' 
```

我收到此错误是因为我为我相信的位置错误地建立了关联。关联应该是用户和所有者已经保存，而不仅仅是已经分配给两者的位置。我的工厂是否走在正确的轨道上，还是其他原因？你怎么看？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:08:19.660

该`strategy: :build`选项是告诉 FactoryGirl 不要实际保存 和 的关联模型（所有者`FactoryGirl.create`）`FactoryGirl.build`。我不认为这是你想要的。

尝试将与所有者的 factory line 更改为 just `owner`，如下所示：

```
factory :location do
  name 'Location One'
  about 'About this location'
  website 'http://www.locationone.com/'
  phone_number '12 323-4234'
  street_address 'Shibuya, Tokyo, Japan'

  owner
end 
```

这样做是在实例化位置记录之前创建关联，以便位置有效。如果您不这样做，则对父级（位置）的验证将失败，因为将不会`owner_id`分配（尚未创建所有者）。

**更新**：

看起来您还缺少工厂`user`中的关联`location`，它也验证了这一点。因此，也将其添加到您的工厂以使其通过：

```
factory :location do
  name 'Location One'
  about 'About this location'
  website 'http://www.locationone.com/'
  phone_number '12 323-4234'
  street_address 'Shibuya, Tokyo, Japan'

  owner
  user
end 
```

我认为应该这样做。

# javascript - 谷歌饼图不显示所有数据行

> ID：12417009
> 
> 赞同：4
> 
> 时间：2012-09-14T01:29:05.180
> 
> 标签：javascript, graph, google-visualization, pie-chart

我试图绘制人口与国家名称，我发现谷歌可视化库只呈现前几个（实际上数字似乎是随机的，取决于我使用的数据）并且有时添加“其他”条目，但它没有t 实际上具有其余条目的值。

示例 1：包含所有国家/地区的数据 ![所有国家数据](../Images/cb93333c87cbefe3bfa8dc354cce4ee4.png)

示例 2：过滤掉一些国家/地区 ![过滤掉一些国家后](../Images/fb6a2dcd0081b4fc9297980b8c079456.png)

行数有实际限制吗？为什么不一致？有没有办法绕过它。我知道如果我在饼图上绘制所有国家的人口很难查看，但我至少应该能够做到。

我的问题是我无法获得源代码，所以我无法真正看到发生了什么。有人有什么想法吗？最坏的情况是，我必须对所有数据进行排序并首先显示人口数量最多的数据，但我真的想避免这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T18:04:15.623

sliceVisibilityThreshold 有一个选项，它可能会解决您的问题。默认设置为 1/720，即 0.5%

我尝试将其打开到 1/10000，但并没有解决我的问题。它将小切片放在图例上，但仍然没有使用它们来计算百分比。这是一个真正的问题，因为 % 也在正确的数据表（我正在显示的）中。

-妮可

# google-chrome-extension - 端口错误：无法建立连接。接收端不存在使用 sendMessage/onMessage

> ID：12417015
> 
> 赞同：0
> 
> 时间：2012-09-14T01:30:29.587
> 
> 标签：google-chrome-extension

使用新的 api sendMessage/onMessage 发送消息而不是 sendRequest/onRequest 我在 JS 控制台中收到以下错误：`Port error: Could not establish connection. Receiving end does not exist.`

而且我无法理解它是否即将到来，因为它正在使用旧 API。

这是一些示例：

```
//content.js
 chrome.extension.sendMessage({index: number}, function(response) {   
     console.log("test", response.data);                          
 });                                                              

//background.js
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
    // From content script.                                                 
    if (sender.tab) {
     //stuff
    }
    sendResponse({who: "me",data: "tata"}); 
}); 
```

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T11:26:25.013

sendMessage/onMessage 在 20.xxx 之前的 chrome 版本中不支持。所以你需要通过检测浏览器版本来使用sendRequest/onRequest。您可以通过这行代码检测 chrome 浏览器版本。(parseInt(navigator.userAgent.match(/Chrom(e|ium)/([0-9]+)./)[2]) > 20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:35:46.160

@Matthieu 我可以确认 onMessage/sendMessage 仅从 Chrome 20+ 开始有效，Chromium 即使在旧版本上也支持它们（我不记得是哪一个，抱歉）。但是，如果您遇到这种错误，可能是您遇到了一些错误，阻止了 Chorme 加载后台页面，或者，如果您的脚本试图通过内容脚本获取数据，您可能专注于控制台，而不是普通的选项卡。通常这是最后一个问题。

@rkp 如果您想检测您的浏览器是否有 sendMessage/sendRequest 和它们各自的 onMessage/onRequest，只需检查`chrome.extension.hasOwnProperty('onMessage')`or `chrome.extension['onMessage']`。如果它们是错误的，那么您的浏览器肯定只会支持 onRequest/sendRequest。无论您是否测试 sendRequest/onRequest 的存在，情况都是如此。

# r - R中向量中对元素的加权平均值

> ID：12417017
> 
> 赞同：-2
> 
> 时间：2012-09-14T01:32:05.273
> 
> 标签：r, weighted-average

我有两个向量`x`和`w`。vector`w`是与 x 长度相同的权重数值向量。我们如何获得向量`x`中差异很小的第一对元素的加权平均值（例如 tol= 1e-2），然后在下一次迭代中对下一对元素做同样的事情，直到没有它们的差异对小于 tol？例如，这些向量如下：

```
 x = c(0.0001560653, 0.0001591889, 0.0001599698, 0.0001607507, 0.0001623125,
           0.0001685597, 0.0002793819, 0.0006336307, 0.0092017241, 0.0092079042,
           0.0266525118, 0.0266889564, 0.0454923285, 0.0455676525, 0.0457005450)
     w = c(2.886814e+03, 1.565955e+04, 9.255762e-02, 7.353589e+02, 1.568933e+03,
           5.108046e+05, 6.942338e+05, 4.912165e+04, 9.257674e+00, 3.609918e+02,
           8.090436e-01, 1.072975e+00, 1.359145e+00, 9.828314e+00, 9.455688e+01) 
```

我想找出哪一对元素的`x`差异最小，找到这对元素后，得到加权平均平均值。我尝试了这段代码，但这个代码没有给我结果。我怎样才能找到索引`min(diff(x))`并检查它是否小于 tol？

```
 > min(diff(x))
        > which(min(diff(x)) < 1e-2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:20:58.867

如果您使用您提供的示例数据描述了手动计算结果的样子，那将非常有帮助。我不能说我完全确定我知道你想要什么，但这是在昏暗的灯光下刺伤：

```
tol = 1e-2
sapply(which(diff(x) < tol), 
       function(i) x[i:(i+1)] %*% w[i:(i+1)] / sum(w[i:(i+1)])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T02:56:30.023

我也对您想要什么感到有些困惑，但是下面的代码会发现其值`x`仅比前一个值增加了最小量或更少 (1e-2)（请参阅`?diff`），然后返回一个加权值仅适用于这些值：

```
smallpair <- which(c(NA,diff(x)) < 1e-2)
x[smallpair]*w[smallpair] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T01:58:01.450

首先，您可以对数据进行聚类并根据聚类之间的最大距离对其进行切割：

```
hc <- hclust(dist(x))
ct <- cutree(hc, h = 1e-2)
ct
# [1] 1 1 1 1 1 1 1 1 1 1 2 2 3 3 3 
```

然后，根据集群分组拆分您的`x`和：`w`

```
x.groups <- split(x, ct)
x.groups
# $`1`
#  [1] 0.0001560653 0.0001591889 0.0001599698 0.0001607507 0.0001623125
#  [6] 0.0001685597 0.0002793819 0.0006336307 0.0092017241 0.0092079042
# 
# $`2`
# [1] 0.02665251 0.02668896
# 
# $`3`
# [1] 0.04549233 0.04556765 0.04570055

w.groups <- split(w, ct)
w.groups
# $`1`
#  [1] 2.886814e+03 1.565955e+04 9.255762e-02 7.353589e+02 1.568933e+03
#  [6] 5.108046e+05 6.942338e+05 4.912165e+04 9.257674e+00 3.609918e+02
# 
# $`2`
# [1] 0.8090436 1.0729750
# 
# $`3`
# [1]  1.359145  9.828314 94.556880 
```

最后，您可以`mapply`用来计算各组的加权平均值：

```
mapply(function(x, w) sum(x * w) / sum(w), x.groups, w.groups)
#           1           2           3 
# 0.000249265 0.026673290 0.045685517 
```

**编辑：**所以现在很明显你希望你的集群最多有两个元素。可能有满足该要求的聚类算法，但您可以通过循环轻松地自己完成。这是一个粗略的版本：

```
d <- as.matrix(dist(x))
d[upper.tri(d, diag = TRUE)] <- Inf
d[d > 1e-2] <- Inf

while(any(is.finite(d))) {
   min.d <- which.min(d)
   idx   <- c(col(d)[min.d], row(d)[min.d])
   wavg  <- sum(x[idx] * w[idx]) / sum(w[idx])
   print(paste("idx", idx[1], "and", idx[2], "with wavg=", wavg))
   d[idx, ] <- Inf
   d[, idx] <- Inf
}
# [1] "idx 2 and 3 with wavg= 0.000159188904615574"
# [1] "idx 4 and 5 with wavg= 0.000161814089390641"
# [1] "idx 9 and 10 with wavg= 0.0092077496735115"
# [1] "idx 1 and 6 with wavg= 0.000168489484676445"
# [1] "idx 11 and 12 with wavg= 0.026673289567385"
# [1] "idx 13 and 14 with wavg= 0.0455585015178172"
# [1] "idx 7 and 8 with wavg= 0.00030279100471097" 
```

（我会留给您修改它，以便您可以根据需要存储输出。）

# ruby-on-rails - 测试网::HTTP.get_Response()

> ID：12417018
> 
> 赞同：2
> 
> 时间：2012-09-14T01:32:29.013
> 
> 标签：ruby-on-rails, ruby, unit-testing, rspec

我正在尝试在我的一个 rails 模型上测试一种方法。我正在从 url 返回 HTTP 状态，但不知道如何存根返回以测试不同的返回代码，以确保我的代码适用于不同的情况。

这是我要模拟的代码行：

```
response = Net::HTTP.get_response(URI.parse(self.url)) 
```

我希望为我`Net:HTTP.get_response`的规范中的每个测试返回一个特定的 HTTPResponse。

```
describe Site do
  before :each do
    FactoryGirl.build :site
  end
  context "checking site status" do
    it "should be true when 200" do
      c = FactoryGirl.build :site, url:"http://www.example.com/value.html"
      #something to mock the Net::HTTP.get_response to return and instance of Net::HTTPOK
      c.ping.should == true
    end      
    it "should be false when 404" do
      c = FactoryGirl.build :site, url:"http://www.example.com/value.html"
      #something to mock the Net::HTTP.get_response to return and instance of Net::HTTPNotFound
      c.ping.should == false       
    end
  end
end 
```

我将如何从 get_response 中提取返回值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:52:41.790

我会为此推荐[fakeweb](http://fakeweb.rubyforge.org/)，例如：

```
FakeWeb.register_uri(:get,
  "http://example.com/value.html",
  :body => "Success!")

FakeWeb.register_uri(:get,
  "http://example.com/value.html",
  :body => "Not found!",
  :status => ["404", "Not Found"]) 
```

# google-app-engine - webapp2 重定向解释

> ID：12417027
> 
> 赞同：12
> 
> 时间：2012-09-14T01:33:39.953
> 
> 标签：google-app-engine, redirect, wsgi, webapp2

我有时不确定如何使用[webapp2.redirect](http://webapp-improved.appspot.com/api/webapp2.html?highlight=redirect#webapp2.redirect)。

有没有时候我应该使用 `self.redirect("/blah")`而不是`return self.redirect("/blah")`

这是我对时间线的理解/猜测：（有时我对响应对象是否执行某些操作或 webapp2 是否执行此操作感到困惑）

1.  我访问了我的多线程网站 www.mysite.com/name/robert，chrome 发送了一个 GET 请求（假设这个请求是一个文本文件）
2.  webapp2 抓取这个“文本文件”并将其转换为 webapp2.Request。webapp2 还创建了一个新的 webapp2.Response。
3.  以某种方式将请求 url 提供给路由器进行匹配（通过 webapp2 或响应）。一个适当的 RequestHandler 被实例化。使用适当的参数调用 RequestHandler 的 get() 方法。
4.  在此期间，只有一个请求和一个响应。
5.  get() 方法调用 response.out.write("hello world") 将“hello world”添加到响应正文？
6.  get() 方法调用 self.redirect('/foo')
7.  **事情发生了**
8.  get() 方法调用 self.out.write("bye world")
9.  响应被发送到客户端，其中包含 hello world、添加了什么食物、再见世界

初始 get 函数的示例：

```
def get():
    self.write('hello world')
    self.redirect('/foo')
    self.write('bye world') 
```

什么“**事情发生了**”？我想路由器找到/foo/的RequestHandler。**在调用 foo 的 requestHandlers get() 方法之前对 Request 和 Response 做了哪些修改**。请求是否被删除并被新的 GET 请求替换？回复是否被删除并替换为新回复？初始请求处理程序中存在哪些上下文？代码执行是否返回到初始请求处理程序的 get 方法，如果是，是否已恢复可能存在的上下文？

抱歉，如果这有点拗口，我已经尝试解释我想知道的内容:)

也许询问一些使用重定向的用例（做和不做）会更容易。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T10:07:31.070

重定向方法实际上只是设置响应状态和响应位置标头的一些有用的绒毛。在将响应发送到重定向之后的客户端之前，什么都不会发生。如果重定向后有更多您不想运行的代码，您可能只想返回调用重定向的结果以避免运行更多代码。

源代码很容易阅读.. [http://webapp2.readthedocs.io/en/latest/_modules/webapp2.html#redirect](http://webapp2.readthedocs.io/en/latest/_modules/webapp2.html#redirect)

# c++ - 显示非常大的数字，由 byte[] 表示

> ID：12417030
> 
> 赞同：1
> 
> 时间：2012-09-14T01:33:57.827
> 
> 标签：c++, c, math, integer, bit-manipulation

这是一个有点荒谬的问题，我已经有一段时间了，但是假设我想显示一个非常非常大的数字，一个普通的基元（或基元的组合）无法表示的数字。 .. no `long long ...`s），所以我想可以使用内存中的字节数组。

如果我有一个 n 字节长度的字节数组（其中 n 很大），我怎样才能正确打印出字节数组，就好像它是一个以 10 为底的十进制整数。一个解释而不是一个答案将是首选。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T02:04:47.883

最简单的（实现和理解）是将数字重复除以 10，收集余数，例如：

1234 / 10 = 123, 4
123 / 10 = 12, 3
12 / 10 = 1, 2
1 / 10 = 0, 1

然后打印剩余部分（以相反的顺序）。

将字节序列除以 10 时，您从最高有效字节开始单独划分每个字节。然后将除法的余数带到下一个字节，直到处理完所有字节。

```
int divBytesBy10(unsigned char* bytes, size_t count, unsigned char* remainder)
{
  unsigned carryOver = 0;
  int nonZeroQuotient = 0;

  while (count--)
  {
    carryOver = carryOver * 256 + *bytes;
    *bytes = carryOver / 10;
    carryOver %= 10;

    nonZeroQuotient |= *bytes++;
  }

  *remainder = carryOver;
  return nonZeroQuotient;
} 
```

一个完整的例子：

```
#include <stdio.h>

int divBytesBy10(unsigned char* bytes, size_t count, unsigned char* remainder)
{
  unsigned carryOver = 0;
  int nonZeroQuotient = 0;

  while (count--)
  {
    carryOver = carryOver * 256 + *bytes;
    *bytes = carryOver / 10;
    carryOver %= 10;

    nonZeroQuotient |= *bytes++;
  }

  *remainder = '0' + carryOver; // convert to ASCII right here
  return nonZeroQuotient;
}

int main(void)
{
  unsigned char num[] = {0xFF, 0xFF, 0xFF, 0xFF};
  char str[11], *p = str + sizeof(str) - 1;
  *p = '\0';
  while (divBytesBy10(num, sizeof(num), --p)) {}
  printf("%s\n", p);
  return 0;
} 
```

输出（[ideone](http://ideone.com/GZu4Z)）：

```
4294967295 
```

# sql - 替代从数据库中删除记录？

> ID：12417037
> 
> 赞同：2
> 
> 时间：2012-09-14T01:35:09.517
> 
> 标签：sql, database-design, sql-delete

有人告诉我，我们永远不会从表中删除记录，因为将来会需要它。并且我可以知道除了 DELETE 之外还有什么替代方法可以使该行停用而不是从表中完全删除该行吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T01:53:20.010

您可以在表格中添加一`bit`列 - 将其称为`IsActive`或`IsDeleted`

当您`INSERT`数据时，请确保数据标记有正确的值：

```
New record - IsActive = true
           - IsDeleted = false 
```

然后，当您使记录不可用时，您将以`UPDATE`相反的方式标记记录：

```
Update - IsActive = false
       - IsDeleted = true 
```

当您运行查询时，您将根据此标志过滤数据。我们在整个系统中实现了这种类型的*软删除*，它可以隐藏记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:55:43.310

[我们使用与bluefeet](https://stackoverflow.com/users/426671/bluefeet)相同的模式，并且效果很好。

一些可以帮助您实现这一点的指针。

确保您的`bit`列不可为空。从逻辑上讲，您没有理由不知道记录是否被删除，如果您不必担心测试`null`.

还将`bit`列设置为默认值`0`，然后您不必担心在插入语句中引用它。同样，从逻辑上讲，您永远不会插入已删除的记录，因此您不必记住在`0`添加记录时将值设置为。

# html - 如何在开始输入后删除 HTML 输入框的默认文本

> ID：12417040
> 
> 赞同：20
> 
> 时间：2012-09-14T01:35:21.460
> 
> 标签：html, input, inputbox

假设我有一个带有默认文本“名称”的输入框。我希望用户单击该框，文本将保留在框中，直到用户开始键入。

我**不是**在寻找代码以在聚焦后清除输入框。

谢谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-14T01:37:43.073

它是占位符属性

```
<input type="text" placeholder="Type your name"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:10:22.393

您尝试执行的操作取决于您所针对的浏览器版本。如果客户使用支持 html5 的浏览器，那么来自@alexndm 的答案将起作用。但是，如果您的目标受众群体有多个浏览器版本。

本文将展示如何使用旧方法，即使用 javascript。[如何在 Firefox 和其他不支持 html5 标签选项的浏览器中获取占位符文本？](https://stackoverflow.com/questions/3429520/how-do-i-get-placeholder-text-in-firefox-and-other-browsers-that-dont-support-t)

注意：我链接的帖子的 OP 也有 html5，以备不时之需。

# c++ - 为什么我的线段交叉测试不会返回 true？

> ID：12417043
> 
> 赞同：0
> 
> 时间：2012-09-14T01:36:11.430
> 
> 标签：c++, line, algebra, segment

我已经知道这个程序的输出应该是什么 - 我的问题是我无法让程序给出正确的输出，或者任何输出。我的问题是：识别和显示给定游览的所有跨过任何其他腿的腿。数据如下：旅游（“城市”）是 {0, 4, 1, 3, 2} 并且这些“城市”的点是 {2,0} , {4,1} , {0,1 } ， {3,2} ， {1,2}。这是我的程序：

```
 #include <iostream>

    using namespace std;

    const int MAX = 100;

    bool doCross(int x1, int y1, int x2, int y2, int x3, int y3, int x4, int y4);

    int main()
    {
        int numPts = 5;
        int tourAry[MAX] = {0, 4, 1, 3, 2};
        int pointsAry[MAX][2] = {{2, 0},{4, 1},{0, 1},{3, 2},{1, 2}};

        for(int start = 0; start <= numPts - 3; start++)
        {
            int startPt = tourAry[0];
            int endPt = tourAry[1];
            int testSegmentX1 = pointsAry[startPt][0];
            int testSegmentY1 = pointsAry[startPt][1];
            int testSegmentX2 = pointsAry[endPt][0];
            int testSegmentY2 = pointsAry[endPt][1];

            for(int nextSeg = start + 2; nextSeg <= numPts - 2; nextSeg++)
            {
                startPt = tourAry[2];
                endPt = tourAry[3];
                int startX = pointsAry[startPt][0];
                int startY = pointsAry[startPt][1];
                int endX = pointsAry[endPt][0];
                int endY = pointsAry[endPt][1];

                if(doCross(testSegmentX1, testSegmentY1, testSegmentX2, testSegmentY2, startX, startY, endX, endY))
                {
                    cout << tourAry[start] << " - " << tourAry[start+1] << " crosses " << tourAry[nextSeg] << " - " << tourAry[nextSeg+1] << endl;
                }

            }//for
        }//for

        return 0;

    }//main

    bool doCross(int x1, int y1, int x2, int y2, int x3, int y3, int x4, int y4)
    {
        bool cross = true;
        double denom, numerA, numerB, uA, uB;

        denom = ((y4 - y3) * (x2 - x1)) - ((x4 - x3) * (y2 - y1));
        numerA = ((x4 - x3) * (y1 - y3)) - ((y4 - y3) * (x1 - x3));
        numerB = ((x2 - x1) * (y1 - y3)) - ((y2 - y1) * (x1 - x3));

        if(denom == 0.0)
        {
            if(numerA == 0.0 && numerB == 0.0)
            {
                cross = false;
            }//if

        }//if
        else
        {
            float uA = numerA / denom;
                    float uB = numerB / denom;

            if (uA > 0.0 && uA < 1.0 && uB > 0.0 && uB < 1.0)
            {
                cross = true;
            }//if

            else
            {
                cross = false;

            }//else
        }//else

        return cross;

    }//doCross 
```

我知道输出应该是： 0-4 交叉 3-2 4-1 交叉 3-2

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:41:00.090

您的索引看起来有点混乱。老实说，一旦我意识到您的交集算法有效，我就没有过多地调试它。

这是一个简单的示例，说明了您可能正在寻找的逻辑。它的可读性当然可以通过一些临时变量来提高：

```
 for(int i=0; i<numPts-1; i++) {
       for(int j=i; j<numPts-1; j++) {
         if(doCross(pointsAry[tourAry[i]][0],      // x1
                    pointsAry[tourAry[i]][1],      // y1
                    pointsAry[tourAry[i+1]][0],    // x2
                    pointsAry[tourAry[i+1]][1],    // y2
                    pointsAry[tourAry[j]][0],      // x3
                    pointsAry[tourAry[j]][1],      // y3
                    pointsAry[tourAry[j+1]][0],    // x4
                    pointsAry[tourAry[j+1]][1])) { // y4
             cout << tourAry[i] << " - " << tourAry[i+1] << " crosses " << tourAry[j] << " - " << tourAry[j+1] << endl;
         }
       }
    } 
```

这给出了输出：

```
0 - 4 crosses 3 - 2
4 - 1 crosses 3 - 2 
```

# android - 在java中的表中添加确定数量的行

> ID：12417049
> 
> 赞同：0
> 
> 时间：2012-09-14T01:36:43.630
> 
> 标签：android

我必须在 java 中创建一个表，并且在执行之前不知道行数。所以我有以下创建表的java代码。但是，当我尝试将表格行添加到表格布局时，它会引发非法状态异常。我将如何解决这个问题？

```
 Map<Integer,TableRow> kMap = null;
   for(int i=0;i<noofrows;i++)
   {

         TableRow test=new TableRow(this);
          kMap = new HashMap<Integer,TableRow>();
         for(int k = 0; k < 3; k++)
         {
           kMap.put(k, test);
         }

     }
TextView empty = new TextView(this);

// title column/row
TextView title = new TextView(this);
title.setText("Java Weather Table");

TableRow.LayoutParams params = new TableRow.LayoutParams();
params.span = 6;

rowTitle.addView(title, params);

//Add some more fields to the rows

table1.addView(rowTitle);
table1.addView(kMap.get(0));
//Exception is thrown
table1.addView(kMap.get(1));
table1.addView(kMap.get(2));
//table1.addView(rowConditions);

setContentView(table1); 
```

记录猫跟踪：

```
09-14 07:02:50.265: E/AndroidRuntime(384): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
09-14 07:02:50.265: E/AndroidRuntime(384):  at android.view.ViewGroup.addViewInner(ViewGroup.java:1970)
09-14 07:02:50.265: E/AndroidRuntime(384):  at android.view.ViewGroup.addView(ViewGroup.java:1865)
09-14 07:02:50.265: E/AndroidRuntime(384):  at android.widget.TableLayout.addView(TableLayout.java:418)
09-14 07:02:50.265: E/AndroidRuntime(384):  at android.view.ViewGroup.addView(ViewGroup.java:1822)
09-14 07:02:50.265: E/AndroidRuntime(384):  at android.widget.TableLayout.addView(TableLayout.java:400)
09-14 07:02:50.265: E/AndroidRuntime(384):  at android.view.ViewGroup.addView(ViewGroup.java:1802)
09-14 07:02:50.265: E/AndroidRuntime(384):  at android.widget.TableLayout.addView(TableLayout.java:391) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:41:51.493

这不是您的代码的唯一问题，但您抱怨的问题是因为您只创建了一个 TableRow 并添加了 3 次。您的 kMap 需要包含 3 个不同的 TableRow 对象，而不是 3 次相同的对象。

# php - mt_rand 使用字符作为种子

> ID：12417050
> 
> 赞同：0
> 
> 时间：2012-09-14T01:37:11.367
> 
> 标签：php, random, mt

我需要生成伪随机代码供人们用来访问我的网站。我编写了一些代码来实现这一点，但没有意识到我使用字符数组而不是整数作为种子（使 mt_rand 可重复）。我的演示代码在这里：

```
$seedVal = array(6565866669, 6565866670, 6565866671);

foreach ($seedVal as $seed) {
    mt_srand($seed);
    $rnd = '';
    for ($i = 0; $i < 11; $i++) { // Loop over the string length
        $tmp = mt_rand(0, 10);
        $rnd .= $tmp;
    }

    echo "Seed = $seed, RandNum = $rnd </br>";
}

echo "</br>Now with character seeds</br>";

$seedVal = array('6565866669', '6565866670', '6565866671');

foreach ($seedVal as $seed) {
    mt_srand($seed);
    $rnd = '';
    for ($i = 0; $i < 11; $i++) { // Loop over the string length
        $tmp = mt_rand(0, 10);
        $rnd .= $tmp;
    }

    echo "Seed = $seed, RandNum = $rnd </br>";
}

return; 
```

1and1 的结果是：

```
Seed = 6565866669, RandNum = 425453109319 
Seed = 6565866670, RandNum = 39388593858 
Seed = 6565866671, RandNum = 891273965110 

Now with character seeds
Seed = 6565866669, RandNum = 97138956767 
Seed = 6565866670, RandNum = 97138956767 
Seed = 6565866671, RandNum = 97138956767 
```

但在其他任何地方，结果（本地主机、其他服务器等）是：

```
Seed = 6565866669, RandNum = 425453109319
Seed = 6565866670, RandNum = 39388593858
Seed = 6565866671, RandNum = 891273965110

Now with character seeds
Seed = 6565866669, RandNum = 425453109319
Seed = 6565866670, RandNum = 39388593858
Seed = 6565866671, RandNum = 891273965110 
```

问题是在我目前的服务器（1and1）上，系统工作正常（使用不可预测的字符输入）。但是我正在迁移到新服务器，当然，代码看起来总是像第一组一样。换句话说，我不知道如何生成第二组随机数（以字符数组为种子）。

谁能告诉我该怎么做？

我想：

```
mt_srand('6565866669');
echo mt_rand(0, 10); 
```

返回

```
97138956767 
```

挣扎。谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T02:05:53.320

（来自这里的信用已经确定了问题：你有一个 32 位和一个 64 位服务器。如果他发布它，请接受他的回答）

这是你的问题：

1.  mt_srand() 接受一个整数参数
2.  当参数需要时，PHP 将（有帮助地）尝试将您的字符串转换为整数
3.  64 位系统上的最大整数是 4.something gazillion - 所以你的字符串将转换为整数，但在 32 位系统上，最大整数是 21 亿，所以你的字符串将转换为允许范围内的不同整数（它去到 21 亿，然后换行到 -21 亿并计数并重复）。

处理 big_ints 的解决方案是使用 GMP 或 BCMath 库，但在这种情况下，这些库将不起作用，因为 mt_srand() 需要一个整数 - 所以你被限制在 -21 亿和 +21 亿之间的数字，或者安装 64 位您的 Web 服务器上的 OS/Apache/PHP。

# objective-c - 使公共api只读，但在内部读/写？

> ID：12417056
> 
> 赞同：4
> 
> 时间：2012-09-14T01:38:14.773
> 
> 标签：objective-c

我该怎么做呢：

```
@interface Foo : NSObject
@property (readonly) int bar;
@end

...

@interface Foo()
@property (nonatomic) int bar;
@end

@implementation Foo
@synthesize bar = _bar;
   // stuff that does self.bar = 123;
@end 
```

这样一些外部类不能调用 foo.bar = 123.. 但 Foo 内部的方法可以......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T01:43:12.850

在类扩展中添加`readwrite`to`nonatomic`应该这样做：

```
@property (readwrite, nonatomic) int bar; 
```

# java - 如何解码这行代码？

> ID：12417058
> 
> 赞同：-4
> 
> 时间：2012-09-14T01:38:37.653
> 
> 标签：java, decode, urlencode

```
&#47;Detail&#63;entitytype&#61;2&#38;searchtype&#61;2&#38;id&#61;1749495&#38;start&#61;101&#38;end&#61;200 
```

是 UTF-8 还是 Unicode？我都试过了，但没有一个能用。Java中有没有可以解码的函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T01:42:41.790

这些是 HTML 实体。它解码为

`/Detail?entitytype=2&searchtype=2&id=1749495&start=101&end=200`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:02:38.403

apache 类中的 HttpUtility，称为 org.apache.common，它是包处理所有实体

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T01:43:12.570

它与字符集或编码无关，它们只是[字符实体引用](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)。

# javascript - 在 JavaScript 原型方法中使用“this”关键字？

> ID：12417059
> 
> 赞同：1
> 
> 时间：2012-09-14T01:38:45.160
> 
> 标签：javascript, prototype

我对 javascript 原型非常陌生。所以我想知道以下内容是否合法并且始终有效：

```
function Obj(name) {
    this.name = name;
}
Obj.prototype.getName() {
   return this.name;
} 
```

接着 ：

```
var obj1 = new Obj("one");
var obj2 = new Obj("two");
alert(obj1.getName() + " " + obj2.getName()); 
```

我会得到“一二”吗？我知道这是一个简单的例子，但是这样的事情总是会引用对象实例，还是意味着原型或事件。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T01:53:21.467

```
var Obj = function(name) {
    this.name = name;
}

bj.prototype.getName = function( ) {
    return this.name; // this refers to Obj
}

var obj1 = new Obj('Jeff');
var obj2 = new Obj('Joe');

console.log(obj1.getName()); // Jeff
console.log(obj2.getName());​ // Joe 
```

我无法让它工作，但这工作正常。这应该是指您正在调用该方法的对象。

[这是一个小提琴](http://jsfiddle.net/jzZ7x/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T01:51:25.380

```
// Setup Obj    
function Obj() {}
Obj.prototype.me = function () {return this;}

// Make some vars
var a = new Obj(), b = new Obj();

// find out what "this" is equal to
a.me() === a; // true
a.me() === b; // false
b.me() === a; // false
b.me() === b; // true 
```

# css - 什么 CSS 会改变 Eclipse (Juno) 选项卡的悬停背景颜色？

> ID：12417061
> 
> 赞同：5
> 
> 时间：2012-09-14T01:39:04.507
> 
> 标签：css, eclipse, ide, themes, eclipse-juno

CSS Spy 不显示当您将鼠标悬停在选项卡（编辑器、包资源管理器、控制台等）上时显示的颜色的任何值，并且我在任何地方都找不到记录的属性名称。默认（非常亮的灰白色）对我来说是个问题，因为我正在尝试设置一个深色主题。

知道特定的 CSS 来更改它，或者知道在哪里可以找到程序员的参考资料会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:01:13.217

我不熟悉 Eclipse，但使用普通的 CSS，我会执行以下操作：

`.tab:hover {background-color: #yourcolor}`或者 `.tab a:hover {background-color: #yourcolor`

`:hover`是当您将鼠标悬停在指定对象上时的状态。

# websocket - SockJS-Tornado 中的 JSON 消息

> ID：12417062
> 
> 赞同：2
> 
> 时间：2012-09-14T01:39:06.687
> 
> 标签：websocket, tornado, sockjs

在`on_message()`SockJS-Tornado 库的方法中，我想向客户端发送 JSON 消息：有时使用方法发送给特定客户端`send()`，有时使用方法发送给一组客户端`broadcast()`。

我想知道`simplejson`在发送消息之前是否需要自己使用类似对字符串键控字典对象进行编码的东西，即

```
on_message(self, message):
    ...
    data = {'type': 1, 'body': 'blah'}
    msg = json.dump(data)
    # self.send(msg) or self.broadcast(conns, msg) 
```

还是 SockJS-Tornado 已经处理了编码部分？另外，方法中的`message`参数`on_message()`是否也总是一个 JSON 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T18:28:30.010

SockJS 是 websocket 仿真层。Websockets 不支持除文本和二进制数据之外的任何内容。

因此，虽然您可以通过网络发送任意 python 对象（sockjs-tornado 将执行内部 json 序列化并且不强制执行字符串），但出于兼容性原因不鼓励这样做。

是的，如果使用 json 作为应用程序协议，就会发生双重编码。但是，如果您要使用广播功能 - 使用优化的 broadcast() 方法，它只会对所有接收者执行一次 json 编码。

邮件列表中也有相关讨论：[https ://groups.google.com/forum/?fromgroups#!topic/sockjs/vsFvHqppq5g](https://groups.google.com/forum/?fromgroups#!topic/sockjs/vsFvHqppq5g)

# mysql - SQL：没有年份的两个日期之间在哪里？

> ID：12417066
> 
> 赞同：9
> 
> 时间：2012-09-14T01:39:27.240
> 
> 标签：mysql, sql

我正在尝试查询历史数据，我只需要返回 1 个月的数据：2 周前和 2 周前，但我需要年份无关紧要。

所以，如果我今天要进行查询，我希望所有行都`date`在 xxxx-06-31 和 xxxx-07-27 之间

在此先感谢您的帮助！

编辑：我尝试了两种方法。我相信这两者都不会在新的一年左右奏效。一种是使用 datepart(day) ，另一种是简单地取消日期并进行比较。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T03:43:56.023

考虑这个问题的最好方法是将日期转换为 0 到 365 之间的数字，对应于一年中的某一天。然后只需选择差异小于 14 的日期即可为您提供两周的窗口。

这将在今年年初或年底崩溃。但是简单的模运算可以给你答案。

幸好 MySQL 有`DAYOFYEAR(date)`，所以没那么复杂：

```
SELECT * FROM tbl t
WHERE 
  MOD(DAYOFYEAR(currdate) - DAYOFYEAR(t.the_date) + 365, 365) <= 14
  OR MOD(DAYOFYEAR(t.the_date) - DAYOFYEAR(currdate) + 365, 365) <= 14 
```

`+ 365`因为 MySQL 的 MOD 将返回负数，所以需要额外的。

这个答案没有正确解释闰年。如果当前年份不是闰年，并且当前日期在年底的 14 天内，那么您将错过应该包括在内的 Jan 中的一天。如果你关心这一点，那么你应该`365`用`[the number of days in the year - 1`]替换。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-14T02:11:41.640

假设你有这样的约会，

```
create table datelist
(
  d date
);

insert into datelist values
('2012-07-01'),
('2011-06-29'),
('2012-07-02'),
('2010-07-05'),
('2012-05-31'),
('2010-06-30'); 
```

试试下面这个查询，

```
SELECT d, date_format(d,'%Y-%b-%d')
FROM datelist
WHERE (MONTH(d) = 6 AND DAYOFMONTH(d) >= 30)
   OR (MONTH(d) = 7 AND DAYOFMONTH(d) <= 27) 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/aceb2/22)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T02:41:00.490

如果解决方案非常慢，可以吗？

```
 SELECT tbl.*
      FROM tbl
INNER JOIN (SELECT COALESCE(DATE(CONCAT(yyyy, '-', MONTH(CURRENT_DATE), '-', DAYOFMONTH(CURRENT_DATE)),
                            DATE(CONCAT(yyyy, '-02-28'))) AS midpoint
              FROM (SELECT DISTINCT(YEAR(d)) AS yyyy
                     FROM tbl) all_years) adjusted
           ON tbl.datecol BETWEEN adjusted.midpoint - INTERVAL 2 WEEK
                                  AND
                                  adjusted.midpoint + INTERVAL 2 WEEK; 
```

这会计算数据集中所有年份的所有中点，然后从任何此类中点提取 +- 2 周的记录，以处理年终包装。

COALESCE 在没有闰日的年份处理 02-29（MySQL 将 NULL-ify），迫使它下降到 02-28。

# facebook-graph-api - 对于多张照片上传，我如何使用 API 获取它？

> ID：12417067
> 
> 赞同：2
> 
> 时间：2012-09-14T01:39:40.897
> 
> 标签：facebook-graph-api, photo

我试图使用图形 api 从 facebook 获取照片，但是，它似乎不包括这些多照片上传图像。

我已经使用graph api explorer检查了，我放下了

```
/<album id>/photos 
```

似乎只检索单张照片，并没有在列表中显示多张照片上传图像。

如何使用图形 api 检索那些多照片上传图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T01:45:55.590

根据我对图表的理解，我不会否认与大多数人相比有点有限。FB Graph api 是一对一的上传。为了上传多个文件，您必须提出适合您的应用程序需求的逻辑。本质上是建立自己的“队列”逻辑，这样一张照片就会一张一张地发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T10:45:57.057

`Session.openActiveSession()`只获得“ **user_about_me** ”、“ **basic_info** ”和“ **user_photos** ”等基本权限。为了证明这一点，您可以通过访问令牌获取权限`Session.getActiveSession().getPermissions()`。

因此，如果要显示多张照片上传，则需要请求附加权限“ **user_status** ”。下面是示例代码，它适用于我。

```
 Session.openActiveSession(this, true, new Session.StatusCallback() {

        //callback when session changes state
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            if (session.isOpened()) {
                List<String> PERMISSIONS = Arrays.asList("user_photos","user_status");
                session.requestNewReadPermissions(new Session.NewPermissionsRequest(PictureStreamMainActivity.this, PERMISSIONS));

                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                    // callback after Graph API response with user object
                    @Override
                    public void onCompleted(GraphUser user, Response response) {
                        // TODO Auto-generated method stub
                        mMeId = user.getId();
                    }
                  });                   
            }
        }
    }); 
```

# aviarc - 在 aviarc 工作流程中，如何从数据库中删除行后从数据集中删除行？

> ID：12417069
> 
> 赞同：2
> 
> 时间：2012-09-14T01:40:40.353
> 
> 标签：aviarc

这是我正在使用的工作流程。

```
<atomic-commit>
   <dataset name="foo"/>
</atomic-commit>

<dataset-iterator dataset="foo">
    <create-row dataset="hist-foo"/>
    <mark-row-created dataset="hist-foo"/>
</dataset-iterator> 
```

所以基本上，在数据集 foo 更新后，我想将剩余的 foo 条目记录在另一个历史表中。但是当我从 foo 表中删除行时，这些行仍然保留在数据集中，因此会被添加到 hist-foo 中。我尝试向 foo 数据代理的删除操作添加一个后工作流，如下所示：

```
<workflow>
     <delete-row dataset="{$context.commit-dataset-name}"/>
</workflow> 
```

但是，当调用删除操作时出现错误。

此外，在第一次原子提交之后， foo 数据集不会保留已删除的行操作，因此我无法确定从数据集中删除了哪些行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:49:08.443

这种情况最简单的解决方案是将标记删除的行筛选到单独的数据集中。不幸的是，仅使用内置命令时这有点长。

```
<dataset name="deleted-foo" databroker="..."/>

<dataset-iterator dataset="foo">
    <if test="row-marked-deleted" value1="foo">
        <then>
            <create-row dataset="deleted-foo"/>
            <copy-row from-dataset="foo" to-dataset="deleted-foo"/>
            <mark-row-deleted dataset="deleted-foo"/>
        </then>
    </if>
</dataset-iterator>

<!-- Keeping in mind that you can't delete rows from a dataset
     which is being iterated over. -->
<dataset-iterator dataset="deleted-foo">
    <dataset-reset dataset="foo" no-current-row="y"/>
    <!-- Assuming rows have a field 'id' which uniquely IDs them -->
    <set-current-row-by-field dataset="foo" field="id" value="{$deleted-foo.id}"/>

    <if test="dataset-has-current-row" value1="foo">
        <then>
            <delete-row dataset="foo"/>
        </then>
    </if>
</dataset-iterator>

<atomic-commit>
    <dataset name="deleted-foo"/>
    <dataset name="foo"/>
</atomic-commit>

<dataset-iterator dataset="foo"> 
    <create-row dataset="hist-foo"/> 
    <mark-row-created dataset="hist-foo"/> 
</dataset-iterator> 
```

另一种解决方案是在运行插入/更新的同时进行历史记录，例如通过在操作中运行多个语句或设置插入/更新触发器（如果可用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:57:18.560

我认为在 Tristan 的回答中，您不一定需要提交“deleted-foo”数据集，因为您没有用任何提交标志标记它的行。

更进一步——我会亲自将这些操作转移到数据代理的提交前和提交后工作流中。您将捕获在提交前工作流中标记为已删除的所有行，然后从 foo 数据集中删除行并在提交后工作流中填充历史数据集。

# php - Wordpress 无法追踪的迁移白屏死机

> ID：12417070
> 
> 赞同：4
> 
> 时间：2012-09-14T01:40:58.363
> 
> 标签：php, wordpress, migration, woocommerce

我的问题是，在使用备份伙伴将网站迁移到另一台服务器后，我遇到了白屏死机。

我在 Wordpress 中打开了调试模式，仍然没有错误，只是白屏。

所以我尝试删除所有文件并再次重新上传它们并将数据库保持原样（BackupBuddy 导入的那个），但它仍然给我白屏。

所以我试图追踪出现白屏的特定行并陷入奇怪的行为。

在 /wp-content/plugins/woocommerce/widgets/widget-init.php 中：

```
include_once('widget-cart.php');
include_once('widget-featured_products.php');
include_once('widget-layered_nav.php');
include_once('widget-price_filter.php');
include_once('widget-product_categories.php');
include_once('widget-product_search.php');
include_once('widget-product_tag_cloud.php');
include_once('widget-recent_products.php');
include_once('widget-top_rated_products.php'); 
```

1.  当我添加“die('boom');”时 在“include_once('widget-price_filter.php');”之前 = 打印出动臂。
2.  当我添加“die('boom');”时 在“include_once('widget-price_filter.php');”之后 = 没有打印出动臂。

所以可以肯定地说这个错误在 widget-price_filter.php 中，对吧？

问题是当我在 widget-price_filter.php 的开头添加一个骰子时，它不会打印出来。就像发生错误的行不存在一样。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T01:52:14.867

> 所以可以肯定地说这个错误在 widget-price_filter.php 中，对吧？

是的，完全是（并且您遵循了正确的调试方式）。

> 问题是当我在 widget-price_filter.php 的开头添加一个骰子时，它不会打印出来。就像发生错误的行不存在一样。

如果（如您所说）您已`die('HELLO');`在顶部（在 之后`<?php`）添加并且它没有出现 - 这意味着存在两个问题之一

1.  文件未找到
2.  该页面中的语法错误。

您可以通过以下三种方式之一解决：

1.  检查 php 错误日志（如果您有权访问）
2.  在调用“include_one”（在 init.php 中）之前添加：

    ```
    error_reporting(E_ALL);
    ini_set('display_errors', 'on'); 
    ```

3.  完全清空代码（只留下`<?php die('HELLO'); ?>`, 检查出现然后一点一点地添加代码。

如果您有路线 2，请记住在它工作时将其取出。很重要！

+1，因为在发布之前实际上花时间尝试自己解决它（有回声和死亡）。所以我希望这对其余的有所帮助。

# mysql - Perl、DBI 和 MySQL 分隔符

> ID：12417076
> 
> 赞同：6
> 
> 时间：2012-09-14T01:41:50.337
> 
> 标签：mysql, perl, dbi, delimiter

我需要能够通过 DBI 发出“创建触发器”。我似乎无法让分隔符命令正常工作。任何人都可以找到一种方法来完成这项工作吗？

代码：

```
use strict;
use DBI;
my $dbargs = {mysql_auto_reconnect => 1,
              AutoCommit           => 0,
              RaiseError           => 1,
              ShowErrorStatement   => 1}; 

my $dsn = "DBI:mysql:database=xdisp;host=cycldev06";
my $dbh = DBI->connect( $dsn, 'sqluser', '', $dbargs);

my $sql = qq{ 
    DELIMITER // 
        CREATE TRIGGER `hardware_last_status` BEFORE UPDATE
            ON `hardware` FOR EACH ROW BEGIN
                                IF NEW.status != OLD.status AND NEW.last_status = OLD.last_status THEN
                                    SET NEW.last_status = OLD.status;
                                END IF;
                            END
            //
};

$dbh->do($sql); 
```

结果：

```
DBD::mysql::db do failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELIMITER // 
        CREATE TRIGGER `hardware_last_status` BEFORE UPDATE
      ' at line 1 at test.pl line 24. 
```

并且该 SQL 在 MySQL 命令行上运行良好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T02:03:17.727

客户端程序使用该`delimiter`命令来确定 SQL 语句的限制。服务器本身看不到它（几乎可以肯定）。因此，在 Perl + DBI 中，您应该简单地省略分隔符。因此，您应该执行的命令是：

```
my $sql = qq{ 
    CREATE TRIGGER `hardware_last_status` BEFORE UPDATE
        ON `hardware` FOR EACH ROW BEGIN
                            IF NEW.status != OLD.status AND NEW.last_status = OLD.last_status THEN
                                SET NEW.last_status = OLD.status;
                            END IF;
                        END
}; 
```

# ios - 键值观察与 NSManagedObjectContextObjectsDidChangeNotification

> ID：12417077
> 
> 赞同：3
> 
> 时间：2012-09-14T01:42:06.230
> 
> 标签：ios, core-data, nsmanagedobjectcontext, key-value-observing

我正在开发一个购物清单应用程序，在一些情况下，我需要注意对实体的更改，并通过对其他实体进行更改来做出响应。例如：

添加新的商店实体时，我需要创建相关的过道实体。

当一个食物的数量变为0或>0时，我需要在该项目上设置一个相关的状态标志（ftr，标志有两个以上的状态，我不能只是放下标志并测试为0） .

根据我目前所读到的内容，选择似乎是在使用键值观察和注册 NSManagedObjectContextObjectsDidChangeNotification 之间。我不确定哪个更适合我的场景（或者我是否应该覆盖相关实体类中的适当方法）。任何关于何时使用这些的指针和/或文档将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:52:05.267

如果标志是数量信息的一种派生属性，那么您最好的方法可能是覆盖托管对象子类中数量的设置器并在那里更新标志。由于标志是模型属性，因此在模型中而不是在视图控制器或其他使用 KVO 或响应通知的非模型对象中对其值负责是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:23:55.607

您可以使用[NSFetchedResultsController](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)代替通知。此外，您可以修改您的实体以使用类方法来添加这些新记录，并管理您需要进行的任何其他修改。

# android - 无法让 ADB 连接到我的 Android 手机以在 OSX 上开发应用程序

> ID：12417079
> 
> 赞同：1
> 
> 时间：2012-09-14T01:42:15.000
> 
> 标签：android, macos, adb

我最近买了一台 Macbook Pro。我有一个旧的 Macbook 并在那里开发 Android 应用程序没有问题。我有三星 Galaxy S2。我已经安装了 Android SDK 和 Eclipse 以及 ADT 插件。每当我连接我的设备时，它会在 Android (v4.0.1) 中显示“USB Debugging Enabled”，但是当我运行时，`android-sdk/platform-tools/adb devices`我会得到输出`0123456789ABCDEF Offline`。当我拔下手机并运行它时，它什么也没显示。

我找到了这个线程：[为什么 Eclipse 和 ADB 无法识别我的 Android 设备？](https://stackoverflow.com/questions/7594975/why-is-eclipse-and-adb-not-recognizing-my-android-device)

但它适用于 Linux。我尝试了该线程答案中的“第二”步骤，但无济于事。有谁知道为什么我的手机在 adb 中会这样显示？

编辑：我刚刚插入了一个旧的 Droid 2 Global 并且 adb 连接良好。一定是我的GS2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:49:57.927

我发现我必须同时切换到有源 USB 集线器和更换电缆。（这是用于连接到新 MacBookPro 的 Pantech 手机。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:36:44.073

结果是我使用的ROM（CM9）。我升级到 CM10 现在可以使用了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-07T05:05:00.160

我只是在 /data/misc/adb 的 android 设备中运行“adbd”，这解决了离线问题。

# javascript - iPad 上的点击事件响应缓慢

> ID：12417085
> 
> 赞同：15
> 
> 时间：2012-09-14T01:42:44.330
> 
> 标签：javascript, ipad, onmouseover

我做了一个照片概念的演示，它在两张图像之间切换以显示它们之间的差异。

我有一个工作正常的 onMouseClick 事件，除了在 iPad 上。响应在我的桌面上是即时的，但在平板电脑上却相当延迟，可能是 500 毫秒？

这是正常的吗？我还有其他方法可以处理这个吗？

Javascript：

```
var img1 = new Image();
img1.src = "http://watkinsfilm.com/wp-content/uploads/2012/09/19mm.jpg";

var img2 = new Image();
img2.src = "http://watkinsfilm.com/wp-content/uploads/2012/09/200mm.jpg";

function test() {
    if (document.pic.src == 'http://watkinsfilm.com/wp-content/uploads/2012/09/19mm.jpg') {

        document.pic.src = 'http://watkinsfilm.com/wp-content/uploads/2012/09/200mm.jpg';
    }
    else if (document.pic.src == 'http://watkinsfilm.com/wp-content/uploads/2012/09/200mm.jpg') {

        document.pic.src = 'http://watkinsfilm.com/wp-content/uploads/2012/09/19mm.jpg';
    }
}​ 
```

身体：

```
 <div>
   <table id="table-1" >
   <tr><td>
      <img id="img" src="http://watkinsfilm.com/wp-content/uploads/2012/09/19mm.jpg" name="pic" onMouseDown="test()"/>
       <img id="png1" src="http://www.thedigitaltrekker.com/wp-content/uploads/2012/03/logo-6smA.png"/>
Click on the image above to toggle between 19mm and 200mm <br>
   </td></tr>
   </table>
</div>
​ 
```

同样在 jsfiddle：http: [//jsfiddle.net/ntmw/R4pey/5/](http://jsfiddle.net/ntmw/R4pey/5/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T01:47:24.887

iOS 故意延迟点击事件，以便手势/滑动正常工作。例如，当您触摸一个元素时，您可能意味着滚动整个页面，而不是触发元素上的单击事件。要实现更细粒度的控制，请使用触摸事件。

请参阅：[https ://developer.mozilla.org/en-US/docs/DOM/Touch_events](https://developer.mozilla.org/en-US/docs/DOM/Touch_events)

使用示例：http `touchstart`: [//jsfiddle.net/R4pey/7/](http://jsfiddle.net/R4pey/7/)。

请注意，捕获触摸事件会产生后果，例如，您可能会覆盖用户期望的行为（如滑动）。

另请注意，您通常应该独立于标记（而不是内联）绑定事件，以实现标记和脚本的更清晰分离。

[这是一个使用 jQuery 的示例](http://jsfiddle.net/R4pey/11/)，它将事件与标记分开绑定，并同时处理`click`和`touchstart`事件。在 Chrome 21、FF 15、IE9 和 iPad 3 上测试。

```
var url1 = "http://watkinsfilm.com/wp-content/uploads/2012/09/19mm.jpg";
var url2 = "http://watkinsfilm.com/wp-content/uploads/2012/09/200mm.jpg";

// preload from original code
var img1 = new Image();
img1.src = url1;

var img2 = new Image();
img2.src = url2;

// bind the click and touchstart events
$("#img").on("click touchstart", function(e){
    if (this.src == url1) {
        this.src = url2;
    }
    else if (this.src == url2) {
        this.src = url1;
    } 

    // When touch event fires, this is needed to prevent the click
    // event from firing as well as @RyanWheale noted in the comments.
    e.preventDefault(); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-24T04:39:02.267

**实现 touchend 事件处理程序**

与**click**和**touchstart**不同，**touchend**事件会立即触发，没有 300 毫秒的延迟。如果您正在开发仅触控的 WebGL 或基于画布的游戏，这可能很实用，但是，您不能仅依赖标准网页中的 touchend。

```
$('#id').on('touchstart',function(e) {                

    //code here...

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-14T14:27:48.190

查看以下链接以获取更快且响应更快的按钮： [https ://developers.google.com/mobile/articles/fast_buttons?hl=de-DE&csw=1](https://developers.google.com/mobile/articles/fast_buttons?hl=de-DE&csw=1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T02:17:23.587

我在 IOS 设备上遇到了一些图像问题。例如，我在我的网站上使用 HTML5 渐变和阴影（也是图像），并注意到删除图像时的巨大响应差异。

附加的单击事件工作正常，但响应很慢，因为 Safari 似乎忙于处理图像（不断重绘）。

我用 iPad3 来测试它。一个人写了一篇关于IOS图像问题的有趣文章。

见： [http ://roman.tao.at/dev/mobile-safari-memory-usage-with-images/](http://roman.tao.at/dev/mobile-safari-memory-usage-with-images/)

# objective-c - 设置对象调用者的属性？

> ID：12417089
> 
> 赞同：1
> 
> 时间：2012-09-14T01:44:03.547
> 
> 标签：objective-c

我使用这样的计时器调用对象：

```
NSTimer *mainTimer = [NSTimer scheduledTimerWithTimeInterval:1
                                                      target:thisTimer
                                                    selector:@selector(increaseSeconds)
                                                    userInfo:nil
                                                     repeats:YES]; 
```

id 喜欢做的是让函数`increaseSeconds`设置调用它的对象的属性。像这样的东西：

```
 - (void)increaseSeconds {
       parent.label.text = whatever....;    
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T01:51:47.220

看起来最简单的方法是在创建“thisTimer”对象时使用“initWithParent:”方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:08:21.667

这里的困惑是，即使你可以这样做（你不能真正有效地），“调用它的对象”是`NSTimer`or `NSRunLoop`，这可能不是你的意思。无法将其与您可能正在考虑的对象之一联系起来。如果您查看计时器，则不会以任何方式向其注册呼叫者。

您可以在此处使用一些技术`NSTimer`。最明显的是将调用者存储在`userInfo`字典中。这就是它的用途。但我怀疑你应该重新考虑你的设计。创建who is not是非常不寻常`NSTimer`的，这表明您的职责分配不正确。在为 Cocoa 进行设计时，请确保您很好地掌握了[MVC 。](http://developer.apple.com/library/mac/#documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html)`target``self`

# c++ - g++ 链接与 VisualC++ 链接

> ID：12417093
> 
> 赞同：1
> 
> 时间：2012-09-14T01:44:24.743
> 
> 标签：c++, g++, static-linking

我一直试图让它工作一段时间，但无法在其他地方找到答案，这是我的问题。

当我在 Visual C++ 中创建一个静态库时，该库使用的任何依赖项都将传递到我将库链接到的可执行程序中。这是一个例子

Test.lib 依赖于 - SDL - OpenGL

TestApp.exe 链接 Test.lib

在 Visual C++ 中，我不必在我的 TestApp 可执行文件中添加 Test.lib 的依赖项，它们会被继承并且效果很好。

但是，当我将代码移植到 Linux g++（使用 Code::Blocks IDE）时，如果我在 g++ 中创建了一个 .a 的静态库，并创建了一个链接该库的 TestApp，它会获得对依赖项的未定义引用。

g++ 是否能够做到这一点，如果是这样，我缺少什么将依赖项转移到我的可执行文件中？

至于我的库设置，我只是使用 IDE 的静态库设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:14:55.523

使用微软的编译器，头文件中可以包含库依赖信息（源文件也可以，但这通常在头文件中完成）；这被编译到目标文件中，链接器理解并应用该信息。这很方便：您不必记住长而时髦的名称，并且如果您使用不兼容的选项编译两个源文件，您可能会遇到链接器会抱怨的库名称冲突。大多数编译器和链接器不做这种事情，你必须明确告诉链接器你想链接哪些库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T01:57:00.333

静态库不会与其他库静态链接。听起来对吗？[但是，您可以使用名为ar](http://linux.about.com/library/cmd/blcmdl1_ar.htm)的工具将许多目标文件打包在一起。

Windows 上发生的情况可能是因为您在系统环境路径中的某处有 (SDL, opengl32) dll。

# css - 在 Chrome 中调试时，如何确定 element.style 的实施位置？

> ID：12417094
> 
> 赞同：2
> 
> 时间：2012-09-14T01:44:41.760
> 
> 标签：css, html

好的，所以我正在分析我的网站在 Chrome 中应用的样式，我注意到我的一个 div 会自动执行一个 position:relative ，它根本不存在于 div 的 css 中。所以我的问题是当我在 Chrome 中分析时

```
element.style {

} 
```

那通常在哪里引用？

div 在 chrome 中看起来像这样。所以我有一个名为 left 的 css 类应用到它，然后当网页加载时它有这个 style="" 不在原始代码中。

```
<div class="left" style="height: auto; overflow: visible; width: 785px; padding-right: 5px; position: absolute; top: 0px; "> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:45:01.827

基本上我发现的是父元素在我的内部元素上强制执行所说的 css。为了让我解决这个分层问题，我将以下内容添加到我想要覆盖的每个 css 规则中。

```
color:red !important; 
```

举个例子。

# php - 在 PHP 中将 XML 片段转换为数组时如何保留“标签顺序”？

> ID：12417096
> 
> 赞同：2
> 
> 时间：2012-09-14T01:45:17.570
> 
> 标签：php, xml

我已经阅读了大量关于在 PHP 中将 XML 文档或片段转换为数组的文章和 Stack Overflow 问题，但到目前为止我所阅读的都没有解决我的具体问题。这是我的困境，前面是一个示例 XML 片段：

```
<category>
  <template>
    <random>
      <li>And a good</li>
      <li>Pleasant</li>
      <li>Good</li>
      <li>Fantabulous</li>
    </random>
    <set name="TOD"><srai>time of day</srai></set> to you, <get name="name" />.
    <random>
      <li>How are you?</li>
      <li>To what do I owe the pleasure of this visit?</li>
      <li>May your Athlete's Foot be under control, and may the flying monkeys never come to take your dog!</li>
      <li>I trust your <get name="TOD" /> is going well?</li>
      <li>May your <get name="TOD" /> be as pleasant as possible.</li>
    </random>
  </template>
</category> 
```

这是我的脚本将要处理的一些 XML 的真实示例。需要保留 XML 标记的顺序，因为解析结果需要正确连接以提供正确的结果。到目前为止，所有将 XML 片段转换为数组的方法都创建了不再包含正确顺序的数组。例如，这里是上述 XML 的 var 转储，一旦它被转换为数组：

```
Template array Var Dump: 
array(4) {
  ["random"]=>
  array(2) {
    [0]=>
    array(1) {
      ["li"]=>
      array(4) {
        [0]=>
        array(1) {
          ["text"]=>
          string(10) "And a good"
        }
        [1]=>
        array(1) {
          ["text"]=>
          string(8) "Pleasant"
        }
        [2]=>
        array(1) {
          ["text"]=>
          string(4) "Good"
        }
        [3]=>
        array(1) {
          ["text"]=>
          string(11) "Fantabulous"
        }
      }
    }
    [1]=>
    array(1) {
      ["li"]=>
      array(5) {
        [0]=>
        array(1) {
          ["text"]=>
          string(12) "How are you?"
        }
        [1]=>
        array(1) {
          ["text"]=>
          string(44) "To what do I owe the pleasure of this visit?"
        }
        [2]=>
        array(1) {
          ["text"]=>
          string(97) "May your Athlete's Foot be under control, and may the flying monkeys never come to take your dog!"
        }
        [3]=>
        array(2) {
          ["text"]=>
          array(2) {
            [0]=>
            string(12) "I trust your"
            [1]=>
            string(14) "is going well?"
          }
          ["get"]=>
          array(1) {
            ["@attributes"]=>
            array(1) {
              ["name"]=>
              string(3) "TOD"
            }
          }
        }
        [4]=>
        array(2) {
          ["text"]=>
          array(2) {
            [0]=>
            string(8) "May your"
            [1]=>
            string(27) "be as pleasant as possible."
          }
          ["get"]=>
          array(1) {
            ["@attributes"]=>
            array(1) {
              ["name"]=>
              string(3) "TOD"
            }
          }
        }
      }
    }
  }
  ["set"]=>
  array(2) {
    ["@attributes"]=>
    array(1) {
      ["name"]=>
      string(3) "TOD"
    }
    ["srai"]=>
    array(1) {
      ["text"]=>
      string(11) "time of day"
    }
  }
  ["text"]=>
  array(2) {
    [0]=>
    string(7) "to you,"
    [1]=>
    string(1) "."
  }
  ["get"]=>
  array(1) {
    ["@attributes"]=>
    array(1) {
      ["name"]=>
      string(4) "name"
    }
  }
} 
```

可以看出，数组在创建时“丢失”了 XML 片段的顺序，并且您无法以线性方式遍历数组以获得正确的响应。这是我问题的症结所在，也是我想要“解决”的问题。

我在此示例中使用的方法是`json_decode(json_encode($xml), true)`，但我使用了其他更复杂的脚本函数，结果几乎相同。那么，正如我在这篇文章的标题中所问的那样，在 PHP 中将 XML 片段转换为数组时，如何保留“标签顺序”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T01:57:50.043

`simpleXML`很确定 say或没有可用的标志`json_decode`。我不认为 XML 旨在保留这一点。该结构并非旨在传达这一点，可以看到它如何导致糟糕的设计。特定于 XML，您可以通过`sequence`在 XSD 中使用来解决此问题。但是你的数据看起来更像一个 DOM。

作为一种解决方法，您是否考虑过将其解析为[DOM 文档](http://www.php.net/manual/en/intro.dom.php)并单步执行？没有太多代码可以自己利用它来解析它。

# browser - Watir rautomation 鼠标移动什么也不做

> ID：12417099
> 
> 赞同：0
> 
> 时间：2012-09-14T01:45:41.200
> 
> 标签：browser, mouse, watir, move, rautomation

我试图让隐藏的元素可见。我已经尝试了在 Watir 中可以找到的所有鼠标事件和元素选择器。所以我正在尝试使用已经在 watir 中的 RAutomation 代码。但这似乎无效。

```
require 'watir'
@browser = Watir::IE.new
@browser.goto 'samplesite.com'
@browser.rautomation.mouse.move({:x=>210,:y=240}) 
```

从这里我让浏览器升到顶部，控制台回复 nil。但是鼠标没有动。然后当我继续做

```
@browser.rautomation.mouse.click 
```

我得到 2... 的响应，我将其视为点击成功。我需要能够将鼠标移动到这个坐标。

```
@browser.rautomation.adapter 
```

返回 => :win_32

我可以在已经建立的 Watir 实例中将其设置为 :autoit 吗？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:45:16.927

所以，你的意思是鼠标根本不动？

试试这个代码：

```
mouse = @browser.rautomation.mouse
puts mouse.position.inspect
mouse.move :x => 100, :y => 100
puts mouse.position.inspect 
```

输出是什么？

要使用 AutoIt 适配器，您可以这样做：

```
mouse = RAutomation::Window.new(:adapter => :autoit, :hwnd => @browser.hwnd)
mouse.move :x => 100, :y => 100 
```

# ajax - 计算多个异步请求的处理和请求时间

> ID：12417100
> 
> 赞同：1
> 
> 时间：2012-09-14T01:45:44.287
> 
> 标签：ajax, performance, jquery, time, benchmarking

对于我的应用程序中的数据可视化请求，我将多个 AJAX 请求发送到一个 servlet，以便以块的形式获取数据，并且在每个请求的回调中，接收到的数据在地图上呈现。

对于这个请求，我试图计算：

*   请求时间（客户端从服务器获取数据所花费的总时间）
*   处理时间（客户端在客户端呈现数据所花费的总时间）

为了做到这一点，我在将每个请求发送到服务器之前捕获每个请求的开始时间（使用 jquery“beforeSend”）和每个请求的“onSuccess”事件，捕获结束时间。

完成所有请求后，我将从最后一个请求的“结束时间”中减去第一个请求的“开始时间”，以计算客户端从服务器获取记录所花费的总时间。（处理时间也是如此）

但不知何故，我的计算并没有产生正确的结果。任何人都可以为这个问题提供一些建议吗？

为了更好地解释我的问题：

```
var dataProviderRequestsStartTime = [];
var dataProviderRequestsEndTime = [];

var dataParsingStartTime = [];
var dataParsingEndTime = [];

getResults(ids);

var getResults = function(totalIds) {
        for(var i=0; i<10; i++;) {
       requestResultForOneChunk(totalIds[i]);
        }
};

var requestResultForOneChunk = function(streetIds) {
    $.ajax({
        beforeSend: function() {
            var requestStartTime = new Date().getTime();
            dataProviderRequestsStartTime.push(requestStartTime);
        },
        type : 'POST',
        url : "myServlet",
        contentType : "application/x-www-form-urlencoded",
        data : {
            "ids" : streetIds,
        },
        success : function(response) {
            //Request Finished
            var dataProvideRequestEndTime = new Date().getTime();
            dataProviderRequestsEndTime.push(dataProvideRequestEndTime);

            addFeaturesToMap(response);
        },
        error : function(x, e) {
            alert("Something went wrong in the request" + e);
        }
    });
};

var addFeaturesToMap = function(measurements) {
    //Parsing Started
    var featureParsingStartTime = new Date().getTime();
    dataParsingStartTime.push(featureParsingStartTime);

    doParsing(measurements);

    //Parsing Finished
    featureParsingEndTime = new Date().getTime();
    dataParsingEndTime.push(featureParsingEndTime);
};

$("#loading").bind(
        "ajaxStart",
            function(options) {
                ajaxStartTime = options.timeStamp;
            }).bind("ajaxStop", function(options) {
        var ajaxEndTime = options.timeStamp;
        var totalTime = (ajaxEndTime - ajaxStartTime);
        calculateTimeBreakDown();
});

var calculateTimeBreakDown = function() {
    var totalValues = dataProviderRequestsEndTime.length;
    var lastValueIndex = totalValues - 1;

    // Request Time calculation
    var endTimeOfLastRequest = dataProviderRequestsEndTime[lastValueIndex];
    var startTimeOfFirstRequest = dataProviderRequestsStartTime[0];
    var totalRequestTime = (endTimeOfLastRequest - startTimeOfFirstRequest);

    // Parsing Time Calculation
    var endTimeOfLastParsing = dataParsingEndTime[lastValueIndex];
    var startTimeOfFirstParsing = dataParsingStartTime[0];
    var totalParsingTime = (endTimeOfLastParsing - startTimeOfFirstParsing);
}; 
```

最后，我有 requestTime(totalRequestTime) 和 parsingTime(totalParsingTime)。但问题是添加这两者并不会产生接近使用 ajax 启动和停止计算的总时间的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T01:51:25.727

查看“总时间”的`.ajaxStart()`和`.ajaxStop()`事件，（<-那些也非常适合进度条）

[http://api.jquery.com/ajaxStart/](http://api.jquery.com/ajaxStart/)

[http://api.jquery.com/ajaxStop/](http://api.jquery.com/ajaxStop/)

和“累积时间”计算`.ajaxSend()`的`.ajaxComplete()`事件。

[http://api.jquery.com/ajaxSend/](http://api.jquery.com/ajaxSend/)

[http://api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)

看看这段代码：

```
var totalTime = null;
var cachedTime = null;

function alertLoadingTime() {
    if(!totalTime) return;
    var loadingTime = totalTime / 1000;
    console.log("loaded " + loadingTime + " seconds");
}

function timingStart() {
    cachedTime = new Date;
}

function timingEnd() {
    var endTime = new Date;
    totalTime += endTime - cachedTime;
    cachedTime = null;
    alertLoadingTime();
}

$(document).ajaxStart(timingStart);

$(document).ajaxStop(timingEnd); 
```

请注意，它只考虑执行 ajax 调用所花费的时间，不包括初始页面加载时间。

为解析计时：

1.  使用与以前相同的功能，但更改`totalTime`为`totalParsingTime`. （注意：您可以通过更改`totalTime`引用其他变量来实现此目的）
2.  在将 ajax调用`timingStart()`的结果附加到 dom 树之前调用。
3.  让服务器添加`timingEnd()`到每个响应的末尾。

`totalTime`然后将设置为将所有内容添加到 DOM 树所花费的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T07:02:47.557

solution for you would to rely on jquery ajax callback methods

1.  ajaxStart : Register a handler to be called when the first Ajax request begins.
2.  ajaxStop : Register a handler to be called when all Ajax requests have completed including success and error callbacks

I have used the below code snippet in my application and it works perfectly fine to report page rendering time including ajaxs.

 `````
 var startTime = 0,endTime = 0;
    $(document).ajaxStart(function(){
        startTime = new Date();
    });

    $(document).ajaxStop(function(){
        endTime = new Date();
        console.log("total time required : ",endTime - startTime); //Total time in milliseconds including time spent in success or error callbacks
    }); 
`````

# actionscript-3 - 处理放置在 DisplayObject 定位上的 twip 精度限制

> ID：12417106
> 
> 赞同：1
> 
> 时间：2012-09-14T01:46:22.200
> 
> 标签：actionscript-3, flash

我正在开发一个在 Flash 中渲染 xps 内容的项目，并且在 Flash 中遇到了 twip（单位的 1/20）精度限制。twip 限制在 swf 文件格式中提及，但在 flash as3 文档中仅在 PrintJob.addPage 方法中提及。但是，在设置 DisplayObject x 和 y 属性时，任何小于 0.05 的精度都会被舍入。无论任何缩放。下面的代码演示了这个问题。

```
 package
    {
    import flash.display.DisplayObject;
    import flash.display.Graphics;
    import flash.display.GraphicsPathCommand;
    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.display.StageScaleMode;
    public class TWIPTest extends Sprite
    {
        // can change behaviour by switching between createPoint and drawPoint
        public function TWIPTest()
        {
            this.stage.scaleMode = StageScaleMode.NO_SCALE;
            // scale our unit square so we can see what is happening
            scaleX = 400; scaleY = 400;
            // draw grid
            var grid : Sprite = new Sprite();
            addChild(grid);
            grid.graphics.lineStyle(TWIP, 0x888888);
            drawGrid(1 / TWIP, 1 / TWIP, TWIP, TWIP, grid);
            // center of unit square
            var cx : Number = 0.5; 
            var cy : Number = 0.5;

            var shape : Shape;
            // GREEN in middle of unit square
            this.addChild(createPoint(cx, cy, 0x00FF00));
            //drawPoint(cx, cy, 0x00FF00, this.graphics);

            // BLUE one TWIP away from GREEN
            this.addChild(createPoint(cx + TWIP, cy + TWIP, 0x0000FF));
            //drawPoint(cx + TWIP, cy + TWIP, 0x0000FF, this.graphics);

            // RED half a TWIP away from GREEN (this does not work....) 
            this.addChild(createPoint(cx + (TWIP / 2), cy + (TWIP / 2), 0xFF0000, 0.5));
            //drawPoint(cx + (TWIP / 2), cy + (TWIP / 2), 0xFF0000, this.graphics, 0.5);

            // now insert new container to work around limit encontered with RED point
            var container : Sprite = new Sprite();
            this.addChild(container);
            container.scaleX = 0.5; container.scaleY = 0.5;
            container.addChild(createPoint(2 * cx + TWIP, 2 * cy + TWIP, 0xFF00FF, 1.0, 2 * TWIP));
            //drawPoint(cx + (TWIP / 2), cy + (TWIP / 2), 0xFF00FF, container.graphics);
        }
        static private function createPoint(x:Number, y:Number,color:uint,alpha:Number=1.0,radius:Number=0.05):Shape
        {
            var shape : Shape = new Shape();
            shape.x = x; shape.y = y;
            shape.graphics.beginFill(color,alpha);
            shape.graphics.drawCircle(0, 0, radius);
            shape.graphics.endFill();
            return shape;
        }
        static private function drawPoint(x:Number, y:Number,color:uint,target:Graphics,alpha:Number=1.0,radius:Number=0.05):void
        {
            target.beginFill(color,alpha);
            target.drawCircle(x, y, radius);
            target.endFill();
        }
        // drawGrid from @Feltope
        private function drawGrid(numColumns:Number, numRows:Number, cellHeight:Number, cellWidth:Number, grid:Sprite):void 
        {
            for (var col:Number = 0; col < numColumns + 1; col++)
            {
                for (var row:Number = 0; row < numRows + 1; row++)
                {
                    grid.graphics.moveTo(col * cellWidth, 0);
                    grid.graphics.lineTo(col * cellWidth, cellHeight * numRows);
                    grid.graphics.moveTo(0, row * cellHeight);
                    grid.graphics.lineTo(cellWidth * numColumns, row * cellHeight);
                }
            }
        }
        static private const TWIP : Number = 0.05;
    }
    }
```

这个[帖子](https://stackoverflow.com/questions/780295/matrix-transforms-on-adjacent-sprites-causing-subpixel-gaps)也提到了这个问题。

问题是，在解析 xps 文件时，这可能随时发生，而且发生很多次，例如

```
 <Canvas RenderTransform="96.201126,0,0,-95.787476,713.62598,207.05859">
<Path Data="..." RenderTransform="0.010394889,0,0,-0.010439778,-7.4180626,2.1616458"> 
```

注意 Path 元素中的 dx，这看起来微不足道，但是父级 Canvas（以及上面的其他父级）将其放大，因此 dx 到 0 或 0.05 的舍入非常明显。

每当发生这种情况时，我都可以添加 Sprite 容器，就像上面的代码一样，但这会导致内存膨胀并减慢渲染速度。

我的问题（最后），有人处理过这个问题吗？有关处理此限制的更好方法的任何想法？解决方法？任何帮助表示赞赏。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:22:53.953

这里最大的问题是什么？它在屏幕上的外观如何，或者在解析精度后丢失？您不能进行渲染，但您可以修改 DisplayObject 以存储例如位置，然后读取它将包含保持的精度。还是我错过了重点？:)

**编辑：** 以下是自定义显示对象（形状和精灵）的示例

```
import flash.display.Shape;
import flash.display.Sprite;
internal class MySprite extends Sprite
{
    protected var m_nX:Number;
    protected var m_nY:Number;

    override public function get x():Number 
    {
        return m_nX;
    }

    override public function set x(value:Number):void 
    {
        m_nX = value;
        super.x = m_nX;
    }
    override public function get y():Number 
    {
        return m_nY;
    }

    override public function set y(value:Number):void 
    {
        m_nY = value;
        super.y = m_nY;
    }
}
internal class MyShape extends Shape
{
    protected var m_nX:Number;
    protected var m_nY:Number;

    override public function get x():Number 
    {
        return m_nX;
    }

    override public function set x(value:Number):void 
    {
        m_nX = value;
        super.x = m_nX;
    }
    override public function get y():Number 
    {
        return m_nY;
    }

    override public function set y(value:Number):void 
    {
        m_nY = value;
        super.y = m_nY;
    }
} 
```

将此添加到您的示例中并替换 Shape 的任何实例化并使用 MyShape，对于 Sprite 相同，将其替​​换为 MySprite。不会有视觉差异，但它们的 x 和 y 将返回精确值。

这是精度保持的示例测试：

```
addChild(createPoint(0.51000005, 0.510000049, 0x800000, 1, TWIP));
var disp :DisplayObject = getChildAt(numChildren - 1);
trace(disp.x, disp.y); 
```

将跟踪 0.51000005、0.510000049 但在没有 MySprite 和 MyShape 自定义 DisplayObjects 的情况下添加到您的示例中的上述测试将返回 0.5 0.5。

# hibernate-mapping - 如何映射一个对象以在休眠中包含一个 Map？

> ID：12417109
> 
> 赞同：0
> 
> 时间：2012-09-14T01:46:46.130
> 
> 标签：hibernate-mapping

假设我有一张桌子' `Team`'和另一张桌子' `Team Members`'。Team Member 拥有 Team 的外键。

理想情况下，我希望 hibernate 映射我的 java 对象，这样，`Team`类将具有 T 的 Map `eam Members`。map的key是团队成员的名字，value是`TeamMember`对象。

所以我希望我的 Team 类看起来像这样：

```
public class Team {
    private Map<String, TeamMember> _teamMembers;
} 
```

如何在我的休眠 xml 映射文件中映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:08:14.163

您需要`<map>`并将索引列设置为 name 属性的列

```
<map name="teamMembers">
  <key column="team_id" />
  <index column="NameColumn" />
  <one-to-many class="TeamMember" />
</map> 
```

# opengl - OpenGL Lighting 随相机改变亮度

> ID：12417111
> 
> 赞同：1
> 
> 时间：2012-09-14T01:46:57.937
> 
> 标签：opengl, light

所以我刚刚开始使用 OpenGL，并决定制作一些体素渲染的东西。我正在尝试点亮它，但是当我围绕 y 轴旋转相机时会出现奇怪的效果。例如，当我第一次生成时，灯光看起来像这样：

[http://i.stack.imgur.com/zQ49y.png](http://i.stack.imgur.com/zQ49y.png)

但是当我旋转一下时，我得到了这个：

[http://i.stack.imgur.com/PWvVo.png](http://i.stack.imgur.com/PWvVo.png)

这是执行此操作的代码：

```
 glRotatef(xrot, 1.0f, 0.0f, 0.0);
    glRotatef(yrot, 0.0f, 1.0f, 0.0);

    glTranslatef(-3.5f-xcam, ycam, -3.5f-zcam);

    glEnable (GL_DEPTH_TEST); //enable the depth testing
    glEnable (GL_LIGHTING); //enable the lighting
    glEnable (GL_LIGHT0);

    GLfloat specular[] = {1.0f-xcam, ycam+1.0, 1.0f-zcam, 1.0};
    glLightfv(GL_LIGHT0, GL_SPECULAR, specular);

    glEnable(GL_TEXTURE_2D);

    glBindTexture(GL_TEXTURE_2D, grnd);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

    glBegin(GL_QUADS);

    glTexCoord2i(0, 0);
    glVertex3f(0, 0, 0);

    glTexCoord2i(0, 1);
    glVertex3f(0, 0, 7.0f);

    glTexCoord2i(1, 1);
    glVertex3f(7.0f, 0, 7.0f);

    glTexCoord2i(1, 0);
    glVertex3f(7.0f, 0, 0);

    glEnd();

    glDisable(GL_TEXTURE_2D);

    glLoadIdentity();

    drawVoxel(2.f, 0.f, 2.f, tex);
    drawVoxel(1.f, 0.f, 1.f, tex);
    drawVoxel(2.f, 0.f, 2.f, tex);
    drawVoxel(3.f, 0.f, 3.f, tex);

    drawVoxel(4.f, 0.f, 4.f, tree);
    drawVoxel(4.f, 1.f, 4.f, tree);
    drawVoxel(4.f, 2.f, 4.f, tree);
    drawVoxel(4.f, 3.f, 4.f, tree);

    test.Flip(); 
```

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T01:55:14.377

您还需要使用 glNormal3f()。

```
.
.
.

glBegin(GL_QUADS);

glTexCoord2i(0, 0);
glNormal3f(0,1,0);
glVertex3f(0, 0, 0);

glTexCoord2i(0, 1);
glNormal3f(0,1,0);
glVertex3f(0, 0, 7.0f);

glTexCoord2i(1, 1);
glNormal3f(0,1,0);
glVertex3f(7.0f, 0, 7.0f);

glTexCoord2i(1, 0);
glNormal3f(0,1,0);
glVertex3f(7.0f, 0, 0);

glEnd(); 
```

# javascript - document.open / document.write 没有正确清除 chrome 中的文档——这是 chrome 中的错误吗？

> ID：12417121
> 
> 赞同：4
> 
> 时间：2012-09-14T01:48:46.053
> 
> 标签：javascript, firefox, google-chrome, document.write

我正在通过 document.write 写入 iframe，然后尝试在同一个 iframe 上覆盖文档。在 FF 中，这可以正常工作。但是，即使在我用第二个 document.write 覆盖它之后，初始 document.write 的 chrome 代码仍然存在。

看到这个小提琴：http: [//jsfiddle.net/meQcC/](http://jsfiddle.net/meQcC/)

如果您按照预期在 FF 中查看它，则 iframe 是空白的，您实际上会收到“函数 onLoad 未定义错误”，因为在该行

```
doc.write("<html><head><script>;" +
      "<\/script></head><body onload='onLoad()'></body></html>"); 
```

显然没有定义 onLoad 函数。但是，如果你在chrome中查看相同的fiddle，iframe会显示一个黑色矩形，并且onLoad调用不会出错，它会调用之前定义的函数，就好像它仍然存在一样！！！！

有什么方法可以清除 chrome 中的文档，以便我可以覆盖 iframe 的内容，而不会以某种方式保留旧代码？这是chrome中的错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T07:14:19.060

是的，这是 Chrome（或者更准确地说是 WebKit）中的一个错误。根据规范，它应该创建一个新的 Window 对象并删除所有全局事件侦听器，但它没有这样做。

特别是，请参阅[http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#dom-document-open](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#dom-document-open)步骤 14。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T01:54:40.683

删除 a`<script>`不会取消定义它定义的任何函数。

如果你想实现这一点，你需要保留你创建的所有全局变量的列表，并使用删除它们`delete window.WHATEVER;`

# asp.net - WCF 身份验证和模拟

> ID：12417126
> 
> 赞同：0
> 
> 时间：2012-09-14T01:49:48.277
> 
> 标签：asp.net, wcf, wcf-security, wcf-client

​嗨，我在实现 WCF RoleService 时遇到了一些麻烦，特别是 GetAllRolesForCurrentUser 方法。我可以成功连接到服务，但是当我尝试为用户检索角色时，它自然会使用当前的主体身份（即运行服务的用户）。但是，我需要它用于已登录的用户。

我知道我必须传递角色服务自定义凭据（用户名/密码），但是您如何让服务模拟该用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:18:29.787

在 WCF 服务中实现模拟

1) 使用 OperationBehavior 装饰操作并给出“Impersonation = ImpersonationOption.Required”，如下面的代码所示

```
[ServiceContract]
public interface IHelloContract
{
    [OperationContract]
    string Hello(string message);
}

public class HelloService : IHelloService
{
    [OperationBehavior(Impersonation = ImpersonationOption.Required)]
    public string Hello(string message)
    {
        return "hello";
    }
} 
```

2）客户端调用如下

```
 using (((WindowsIdentity)HttpContext.Current.User.Identity).Impersonate())
    {
        HelloService.ServiceClient myService = new HelloService.ServiceClient();
        Console.WriteLine(myService.Hello("How are you?"));
        myService.Close();
    } 
```

按照链接进一步参考： http: [//msdn.microsoft.com/en-us/library/ff650591.aspx#_Step_7 :_Impersonate](http://msdn.microsoft.com/en-us/library/ff650591.aspx#_Step_7%3a_Impersonate)

# c++ - 浅拷贝对象失败

> ID：12417127
> 
> 赞同：0
> 
> 时间：2012-09-14T01:50:20.890
> 
> 标签：c++

我有一堂课

```
template<typename T> class RGBHistogramTrait
{
public:
    RGBHistogramTrait(const QImage &image, RGBHistogram<T> hist) : _hist(hist), _base((QRgb *) (image.bits()));
private:
    const QRgb *_base;
    RGBHistogram<T> _hist;
}; 
```

和

```
template<typename T> struct RGBHistogram
{
    RGBHistogram<T>(Histogram<T> &redHist, Histogram<T> &greenHist, Histogram<T> &blueHist)
        : redHist(redHist), greenHist(greenHist), blueHist(blueHist) {}

    Histogram<T> &redHist, &greenHist, &blueHist;
}; 
```

现在我有一个单一的对象 RGBHistogram。我想创建 100 个 RGBHistogramTrait 实例，每个 RGBHistogramTrait 实例都应该创建 RGBHistogram 的副本，每个实例都将由一个线程使用。

我会将 100 个线程的结果聚合回原始的 RGBHistogram。问题是 RGBHistogramTrait 的每个实例中的 _hist 以某种方式指向同一事物（原始 RGBHistogram）。我以为我已经在 _hist(hist) 的 RGBHistogramTrait 的构造函数中浅复制了 RGBHistogram。RGBHistogram 有一个 std::map 并且没有定义的复制构造函数。

```
template<typename T> void ImageReader<T>::calculate(RGBHistogram<T> &hist)
{
    QImage image;

    if (image.load(QString::fromUtf8(_file.c_str())))
    {
        std::vector<RGBHistogramTrait<T> > *fs = new std::vector<RGBHistogramTrait<T> >[_threads];

        for (ThreadNum i = 0; i < _threads; i++)
        {
            fs->push_back(RGBHistogramTrait<T>(image, hist));
        }

        ThreadCoord::start(image.width() * image.height(), _threads, *fs);

        // Now aggregate the results in fs back into the original hist    

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T02:03:08.923

好吧，您可能在创建 RGBHistogram 时通过引用传递了相同的 redHist、greenHist、blueHist。而redHist、greenHist、blueHist都是引用成员。当然，所有 100 个 RGBHistogram 似乎都是相同的，因为它们都引用了相同的 3 个直方图。

# python - 如何将 pandas DataFrame 中的列从 str（科学记数法）转换为 numpy.float64？

> ID：12417129
> 
> 赞同：1
> 
> 时间：2012-09-14T01:50:48.523
> 
> 标签：python, pandas

我正在尝试将[这个](http://dl.dropbox.com/u/6160029/gradStat_mmn.tdf)制表符分隔的文件读入 pandas，但有一个警告：最后一列（平均值）必须从表示科学计数法值的字符串转换为 numpy.float64。

到目前为止，我已经尝试过

```
df = pd.DataFrame(pd.io.parsers.read_table(fle, converters={'mean': lambda x: np.float64(x)})) 
```

但我在 df['mean'] 中得到的只是`0`and `-0`。

我也尝试过在没有`converters`kwarg 的情况下导入，然后通过做来投射列`df['mean'].astype(np.float64)`，结果相似。

是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:40:04.937

它们不是零。`pandas`打印时可能会进行一些格式化，`DataFrame/Series`因此它们*看起来像*零。

顺便说一句，您不需要转换器。`read_table`正确地将它们标识为`float64`：

```
In [117]: df = pandas.read_table('gradStat_mmn.tdf')

In [118]: df.ix[0:10]
Out[118]:
    Subject Group Local Global  Attn  mean
0         1  DSub     S      S  Attn     0
1         1  DSub     S      S  Dist     0
2         1  DSub     D      S  Attn     0
3         1  DSub     D      S  Dist     0
4         1  DSub     S      D  Attn     0
5         1  DSub     S      D  Dist     0
6         1  DSub     D      D  Attn     0
7         1  DSub     D      D  Dist     0
8         2  ASub     S      S  Attn     0
9         2  ASub     S      S  Dist     0
10        2  ASub     D      S  Attn     0

In [119]: df['mean'].dtype
Out[119]: dtype('float64')

In [120]: df['mean'][0]
Out[120]: 3.2529000000000002e-22 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:19:21.153

这已在 0.9 版的 pandas 中得到修复：

```
In [4]: df = pandas.read_table('http://dl.dropbox.com/u/6160029/gradStat_mmn.tdf')

In [5]: df.head()
Out[5]: 
   Subject Group Local Global  Attn          mean
0        1  DSub     S      S  Attn  3.252900e-22
1        1  DSub     S      S  Dist  6.010100e-22
2        1  DSub     D      S  Attn  4.215700e-22
3        1  DSub     D      S  Dist  8.308100e-22
4        1  DSub     S      D  Attn  2.983500e-22 
```

# oracle - Oracle sql*plus 和表单构建

> ID：12417130
> 
> 赞同：0
> 
> 时间：2012-09-14T01:50:55.217
> 
> 标签：oracle, sqlplus, oracleforms

对于家庭作业，我必须使用 SQL*Plus 和 Form builder。我安装在 vm oracle 11g 和 dev suites 10g 上。一切都是全新安装，但我找不到连接 SQL*Plus 而非 Form builder 的方法。

两者都要求我不确定我是否正确的主机字符串。我的 tnsnames.ora 看起来像这样：

```
LISTENER_ORCL =
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))

ORACLR_CONNECTION_DATA =
    (DESCRIPTION =
        (ADDRESS_LIST =
            (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
        )
        (CONNECT_DATA =
            (SID = CKRExtProc)
            (PRESENTATION = RO)
        )
    )

ORCL =
    (DESCRIPTION =
        (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
        (CONNECTION_DATA =
            (SERVER = DEDICATED)
            (SERVICE_NAME = orcl.localdomain)
        )
    ) 
```

我还解锁了用户 scott/tiger。我试图连接 SYSTEM/我`<password>`在`<password>`安装和 scott/tiger 上给出的主机字符串：ORCL、orcl.localdomain 或什么都没有，但它一直给我错误

> ORA-12560 协议适配器错误（无主机环）

或者

> ORA-12154 无法解析指定的连接标识符（主机环非空）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:07:22.270

Forms Builder 使用`tnsnames.ora`的是在*它的*目录中找到的，而不是在数据库服务器目录中的那个。

确保`tnsnames.ora`表单构建器文件夹中的内容（存在于`\network\admin`表单构建器安装路径的文件夹中）与数据库安装路径`tnsnames.ora`的文件夹中的内容相同。`\network\admin`

您还可以强制`TNS_ADMIN`变量的路径并放置`tnsnames.ora`到中提到的该路径，`TNS_ADMIN`以便选择`tnsnames.ora`该路径中的存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:13:53.660

Which SQL*Plus client are you using?

afaik - Oracle stopped distributing the SQL*Plus client and now distribute something called SQL*Plus Instant Client. If you are using the latter then the correct format of the connect string is as follows:

sqlplus hr/your_password@//mymachine.mydomain:port/MYDB

For anything else - also check your registry for your TNS_ADMIN entry. This should be populated with the path to you tnsnames.ora

# lync - Lync 2013 自定义联系人组

> ID：12417141
> 
> 赞同：0
> 
> 时间：2012-09-14T01:53:10.773
> 
> 标签：lync, lync-2010, lync-server-2010

**在 Lync 2010 中，**

我可以通过数据库中的存储过程自定义或选择联系人组-[rtc]

示例：UserMgmtSetContact UserMgmtAddGroup,UserMgmtGetGroups,UserMgmtGetContacts .....

**但在 Lync 2013 中，**

数据库-[rtc] 不存在，我无法在 Lync 2013 中自定义联系人组。

那么如何在 Lync 2013 中自定义它，但是 powershell、SDK、数据库、C# ......或任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:22:12.757

您可以通过 UCMA 4 操作用户的联系人和组 - 通过受信任的应用程序建立的 UserEndpoint 上的 ContactGroupServices。有大量文档可用于创建这样的应用程序，所以我不会再进一步​​。如果您使用此方法进行更改，Lync 客户端将立即看到它。

[http://msdn.microsoft.com/en-us/library/lync/microsoft.rtc.collaboration.contactsgroups.contactgroupservices_di_3_uc_ocs14mreflyncuc3cr_members.aspx](http://msdn.microsoft.com/en-us/library/lync/microsoft.rtc.collaboration.contactsgroups.contactgroupservices_di_3_uc_ocs14mreflyncuc3cr_members.aspx)

# jquery - jquery sortable + non selected li 元素移动

> ID：12417142
> 
> 赞同：1
> 
> 时间：2012-09-14T01:53:14.830
> 
> 标签：jquery, html, css, jquery-ui

这是 ul/li 结构的样子：

![在此处输入图像描述](../Images/4dd618758ab69c591f4d68b27206234b.png)

当我在这个结构周围移动项目时，FF & Chrome 仍然存在，但在 IE 中我得到以下信息：

![在此处输入图像描述](../Images/c21c9906c95a4f0ead6aa4fec5da9875.png)

基本上，移动项目似乎将下面的项目向下推。

这是 HTML 结构：

```
<ul id="photoPreviews>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul> 
```

这是CSS：

```
ul#photoPreviews {
    position: absolute;
    top: 350px;
    left: 39px;
    list-style-type: none;
    width: 310px;
    height: 170px;
}

ul#photoPreviews li {
    float: left;
    display: inline;
} 
```

当我对 li 进行排序时，如何防止 IE 结构发生变化？注意：我使用的是 IE9。

谢谢你。

# algorithm - 网格生成算法

> ID：12417143
> 
> 赞同：1
> 
> 时间：2012-09-14T01:53:16.677
> 
> 标签：algorithm

作为我正在进行的项目的一部分，我需要生成一个 2D 三角形网格。

目前，我已经实现了一个 Delaunay 三角剖分算法。我必须输入一组顶点，然后在它们之间进行三角测量，效果很好。

但是，我想对此进行改进，而是输入一组表示任意 2D 形状（没有孔）边缘的顶点，并在该形状内生成一个（尽可能均匀）网格，具有不同程度的精度（三角形的目标数量）。

今天我的谷歌技能似乎有所欠缺，而且我还没有找到我想要的东西。

有谁知道会让我上路的算法/库/概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:17:00.257

可能非凸 2D 形状的三角形不得越过边界边缘，受约束的 Delaunay 三角剖分可以实现这一点。

一种解决方案：使用 Fade [1] 进行三角剖分并插入多边形的边缘。然后可以使用 Delaunay Refinement 创建区域内的均匀网格。

[1] [http://www.geom.at/fade2d/html/](http://www.geom.at/fade2d/html/)

hth

# c++ - 尝试验证有效输入以在 C++ 中加倍的循环错误

> ID：12417145
> 
> 赞同：0
> 
> 时间：2012-09-14T01:53:20.530
> 
> 标签：c++, while-loop, scanf

我正在尝试验证双变量的字符输入是否属于正确的数据类型。

```
double number = 0;
int validCheck = 0;
char another = 'y';

while(another == 'y')
{
    cout<<"Please enter a number: ";
    validCheck = scanf("%lf", &number);

    while (validCheck !=1)
    {
        cout<<"Invalid input, please enter a number: ";
        validCheck = scanf("%lf", &number);
    } 
```

当我编译它时，只要我给出一个有效的输入，它就可以正常工作，并且一个无效的输入确实将它放入 while 循环中，但它不会检查另一个输入，它只是向我的控制台发送垃圾邮件“无效输入，请输入一个数字： " 甚至不要求新的输入。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T01:58:44.070

无效输入保留在输入缓冲区中，因此`scanf`始终会显示相同的格式错误的输入。您需要清除输入缓冲区，例如

```
int c;
do {
    c = getchar();
}while(c != '\n' && c != EOF); 
```

# php - 一种跳过已经显示的行的方法

> ID：12417147
> 
> 赞同：0
> 
> 时间：2012-09-14T01:53:28.340
> 
> 标签：php, mysql, loops

我有一个搜索脚本，它从一个表中检索一个整数并使用它来搜索第二个表的 ID。我的问题是如果 Table1 中的整数出现不止一次，我在查询 Table2 时会得到重复的结果。

有谁知道使用 SQL 或 PHP 的方法，这样如果一行已经显示，它将跳过它？谢谢

我的代码相当复杂，但如果它有帮助的话：

```
//TV FILTERS
$sql = 'SELECT * FROM `table1`';
$where = array();
if ($searchlocation !== 'Any') $where[] = '`value` LIKE "%'.$searchlocation.'%"';
if ($searchmake !== 'Any')  $where[] = '`value` LIKE "%'.$searchmake.'%"';
if ($searchtype !== 'Any') $where[] = '`value` LIKE "%'.$searchtype.'%"';
if (count($where) > 0) {
  $sql .= ' WHERE '.implode(' OR ', $where);
} else {
  // Error out; must specify at least one!
}

$tvqresult = mysql_query($sql);
$num_rowstvq = mysql_num_rows($tvqresult);
while ($rowtvq = mysql_fetch_array($tvqresult)) {
$contid =  $rowtvq['contentid'];

//MAIN QUERY
$mainsql = 'SELECT * FROM `table2` WHERE `content` LIKE "%' . $searchterm . '%" AND `id` = ' . $rowtvq['contentid'] . '  AND `template` = 12';

$resultmain = mysql_query($mainsql);

$num_rowsmain = mysql_num_rows($resultmain);
if (!$resultmain) {
continue;
}

else {
while ($row = mysql_fetch_array($resultmain )) {
  echo "[!Ditto? &parents=`134` &documents=" . $row['id'] . "&tpl=`usedtempchunk`!]";
}//END MAIN LOOP

}//END MAIN ELSE

}//END TV WHILE LOOP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T01:56:49.967

您似乎只使用了`contentid`第一个查询中的列，因此您可以将其更改为：

```
$sql = 'SELECT distinct contentid FROM `table1`'; // rest would be the same 
```

这意味着不会检索到任何重复项，从而为您节省更改第二组代码的麻烦。

如果您在代码中的其他位置使用第一个查询中的其他列，只要没有重复的 ID，您仍然可以使用此方法获取更多列：

```
$sql = 'SELECT distinct contentid, contentTitle, contentThing FROM `table1`'; 
```

如果您*必须*在原始查询中重复 ID，我认为您必须将数据存储在一个变量（如数组）中，然后确保第二个数据集没有重复任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T01:59:42.990

听起来你只是在寻找 1 行，如果是这样，那么在你的 SQL 末尾，只需添加`LIMIT 1`. 这将确保您只返回 1 行，从而忽略任何重复的匹配项。

# android - Android ADB 未连接到 Droid 2

> ID：12417148
> 
> 赞同：0
> 
> 时间：2012-09-14T01:53:34.117
> 
> 标签：android, adb, android-2.2-froyo, motorola-droid

我发现 ADB 非常适合我的 Droid 2。我的电脑是 Windows 7 64 位，我的 Droid2 版本是 2.3.4。

我用谷歌搜索并搜索了 Stack Overflow，发现很多人都有类似的问题。但我的是一个奇怪的转折点。

实际上，我可以在全新安装 ADB 后将手机连接到计算机，但是在我连接并在其上运行应用程序后，ADB 连接断开，我无法恢复。

我尝试了以下方法：

1.  重新安装 Android USB 驱动程序，编辑 .INI 文件以匹配我的硬件 ID
2.  将 AVD 更新到最新添加的内容。与 Eclipse 上的 SDK 相同
    *   起初这确实有效，但在运行 1 个应用程序后连接断开
3.  重新启动我的电脑
4.  `adb kill-server`并试图以这种方式循环
5.  通过任务管理器强制关闭ADB
6.  将 ADB 放在我的系统变量路径上
7.  切换了我所有的 USB 端口并使用了 3 种不同的 USB 电缆，包括库存的一根和我的 Kindle 一根。
8.  安装[摩托罗拉驱动程序](http://www.motorola.com/consumers/v/index.jsp?vgnextoid=bda09ec8009a0210VgnVCM1000008806b00aRCRD)（我认为没有任何作用。安装后，我的手机不会出现在设备管理器中。）
    *   我依靠那些来自`android-sdk\extras\google\usb_driver`
9.  重新启动我的手机（它工作了一次，但不是第二次，第三次或第四次）
10.  确保 USB 开发模式已打开（也循环了几次）

我难住了。这是 ADB 对我大便之前我的 logcat 的输出：

> 09-13 17:34:39.709：D/UsbService(1469)：WaitDevNodeClosedTimeout() 09-13 17:34:39.709：D/UsbService(1469)：UsbEventHandler()，接收事件：usb_devnode_closed 09-13 17:34： 39.709：D/UsbService(1469)：当前 Usb 状态：USB In-Switch 等待 DevNod 关闭状态 09-13 17:34:39.709：D/UsbService(1469)：ReadCurrentUsbMode() 09-13 17:34:39.709：D /UsbService(1469)：当前 USB 模式：摩托罗拉电话工具：E/()：设备已断开连接

在此之后，即使在多次重新安装驱动程序、重新启动等之后，它也完全黑了。

我还尝试将我的 ADB 设置为通过 wifi 连接到我的手机，但您的手机似乎需要 root 访问权限（因为 su 或 sudo 在终端模拟器上不起作用）而且您似乎还必须通过非常冒险的闪光来完成这项工作。至少，这是我读到的。

但是，如果有一种方法可以通过 wifi 进行 ADB 连接，而不必进行冒险的超级用户破解，那也可以避免这场惨败！

我想这是一个 2.5 部分的问题——如何使 ADB 连接稳定或如何让 ADB 在不需要超级用户/root 的情况下通过 wifi 工作（或者如何在不危及手机生命的情况下获得超级用户访问权限！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:06:22.480

好吧，我想我解决了。基本上，当您将手机插入计算机时，请确保它处于 USB 大容量存储模式！现在，它整晚都在工作。所以我想我明白了。

# javascript - 是否有任何片段或 jQuery 插件来列出 DOM 中与 easylist.txt 模式匹配的所有元素？

> ID：12417150
> 
> 赞同：0
> 
> 时间：2012-09-14T01:54:17.280
> 
> 标签：javascript, jquery, regex

在这里，

是否有任何片段或 jQuery 插件来列出 DOM 中与 easylist.txt 或 fanboy 列表匹配的所有元素？

我需要删除匹配的元素，我知道我可以从 AdBlock Plus 获取源代码，但我检查了它，我对应用程序的其余部分感到困惑，因为它全部用 JS 编写，但具有特定于浏览器的事件和功能因为它需要作为扩展来集成。

我找到了一些选择器组件，但我不知道如何实现它。

[看看 EasyList 的过滤器](https://easylist-downloads.adblockplus.org/easylist.txt)

我需要一个函数来为我提供列表/数组中的匹配元素，以便我可以处理这个东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T01:58:53.910

您需要考虑查看哪些属性，但我想“属性包含选择器”会有所帮助。

[http://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)

# r - 当 dimname 为 NULL 时，一次命名矩阵维度的元素

> ID：12417152
> 
> 赞同：0
> 
> 时间：2012-09-14T01:54:32.933
> 
> 标签：r

当 dimnames 当前`NULL`为 时，是否可以一次重命名矩阵的维度？

例如，这会失败：

```
mtx <- matrix(1:16,4)
dimnames(mtx)[[2]][1] <- 'col1' 
```

和`Error in dimnames(mtx)[[2]][1] <- "col1" : 'dimnames' must be a list`

但是，这有效：

```
mtx <- matrix(1:16,4)
dimnames(mtx)[[1]] <- letters[1:4]
dimnames(mtx)[[2]] <- LETTERS[1:4]
dimnames(mtx)[[2]][1] <- 'col1'
dimnames(mtx)[[2]][2] <- 'col2' 
```

我的目标是单独替换`dimnames(mtx)[[2]][1]`等`dimnames(mtx)[[2]][2]`......如果这是不可能的，我可以重新编写循环。

* * *

谢谢大家，我得到了以下结果——我通过 prepend 传递了名字：

```
mtxNameSticker <- function(mtx, prepend = NULL, MARGIN=2)
{
    if (MARGIN == 1) max <- nrow(mtx) else
        max  <- ncol(mtx)
    if (is.null(prepend)) if (MARGIN == 2) prepend <- 'C' else
        prepend <- 'R'
    if (length(prepend) == 1) prepend <- paste0(prepend, 1:dim(mtx)[[MARGIN]]) 
    dimnames(mtx)[[MARGIN]] <- seq(from=1, by=1, length.out=dim(mtx)[[MARGIN]]) 
    for (i in 1:max){
        dimnames(mtx)[[MARGIN]][i] <- prepend[i]
    }
    return(mtx)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T03:21:47.600

只要`dimnames`is`NULL`而不是适当的`list`，您就不能在特定位置对其进行分配。创建虚拟但完整列表的一种简单方法`dimnames`是运行：

```
dimnames(mtx) <- lapply(dim(mtx), seq_len)
mtx
#   1 2  3  4
# 1 1 5  9 13
# 2 2 6 10 14
# 3 3 7 11 15
# 4 4 8 12 16 
```

然后，您可以按照自己的意愿一次分配*一项*：

```
dimnames(mtx)[[2]][1] <- 'col1'
mtx
#   col1 2  3  4
# 1    1 5  9 13
# 2    2 6 10 14
# 3    3 7 11 15
# 4    4 8 12 16 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T01:58:45.320

即使您被要求提供一个列表，您也正在分配一个*向量。*

试试这个：

```
R> M <- matrix(1:4,2,2)
R> M
     [,1] [,2]
[1,]    1    3
[2,]    2    4
R> 
```

列：

```
R> M1 <- M; dimnames(M1) <- list(NULL, c("a","b")); M1
     a b
[1,] 1 3
[2,] 2 4
R> 
```

行：

```
R> M2 <- M; dimnames(M2) <- list(c("A","B"), NULL); M2
  [,1] [,2]
A    1    3
B    2    4
R> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T03:31:28.383

回应您的评论。@DirkEddelbuettel 是正确的，您正在将向量分配给应该是列表的内容。

这样做的原因是，当暗名`NULL`（尚未分配）时，您正在分配暗名

R评估以下内容的方式

```
x <- NULL
x[[2]][1] <- 'col1'
str(x)
##  chr [1:2] NA "col1" 
```

R 返回一个长度为 2 的向量，而不是一个长度为 2 的列表。

为了你的任务工作，`R`必须评估

```
x <- NULL
x[[2]][1] <- 'col1'
str(x) 
```

给予

```
## List of 2
## $ : NULL
## $ : chr "col1" 
```

如果`x`最初定义为`x <- list(NULL,NULL)`

但是，dimnames 必须是`NULL`或适当长度向量的列表

以下*确实*有效（实际上是@flodel 解决方案）

```
dimnames(mtx) <- list(character(nrow(mtx)), character(ncol(mtx)))
# or
# dimnames(mtx) <-  lapply(dim(mtx), character) 
dimnames(mtx)[[2]][1] <- 'col1' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T03:13:14.810

似乎您可以设置维度的名称*，*而实际上没有任何维度*的*名称：

```
dimnames(mtx) = list(NULL,col1=NULL)
mtx
#      col1
#       [,1] [,2] [,3] [,4]
#  [1,]    1    5    9   13
#  [2,]    2    6   10   14
#  [3,]    3    7   11   15
#  [4,]    4    8   12   16 
```

# wordpress - 设置重定向的最佳方式？

> ID：12417168
> 
> 赞同：0
> 
> 时间：2012-09-14T01:57:00.507
> 
> 标签：wordpress, http, http-redirect

我正在使用wordpress。我有一个帖子的网址非常尴尬，例如：

```
http://example.com/dogfood/why-do-dogs-like-bacon-i-will-investigate 
```

我想将网址更改为更简洁的内容，希望它能提高我的搜索结果排名：

```
http://example.com/dogfood/dogs-and-bacon 
```

但是这篇文章现在很流行，许多第三方网站都有指向原始网址的链接。

是这里的最佳解决方案：

1.  在新网址复制相同的帖子内容。
2.  保留旧帖子原样（网址将保持不变）。
3.  在我的 .htaccess 文件中设置从旧 url 到新 url 的 301 重定向。

这样，我旧文章的链接仍然有效，但是（希望）新的狗食培根搜索将开始将我的新网址排名更高？或者我可以在我的 .htaccess 文件中设置重定向后简单地删除旧帖子 - 实际上不需要保留旧网址？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:05:58.850

以下是我的想法：

1.  [重复的内容](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=66359)几乎总是一个坏主意。
2.  我认为保持旧帖子 URL 不变就可以了。真的没有理由改变它。如果您想要产生更多流量，还有其他更“洁净”的方法：让其他网站链接到您的文章或在新帖子中更新文章并添加指向当前文章的链接. 此外，我认为人们更有可能搜索“为什么狗喜欢培根？” 比“狗和培根”。
3.  从技术上讲，如果您坚持更改 URL（我不鼓励），则文件中的[301 重定向](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93633)`.htaccess`将是最好的解决方案，但对于您要重定向的每个帖子都需要维护。考虑使用可以为您执行此操作的插件，例如[Redirection](http://wordpress.org/extend/plugins/redirection/)。

# window - 浏览一个包含超过一百万个文件的文件夹？

> ID：12417171
> 
> 赞同：1
> 
> 时间：2012-09-14T01:57:32.397
> 
> 标签：window, explorer, file-browser

我使用的是window server 2008，我有一个包含超过一百万个文件的文件夹。

我想获取此文件夹中前 100 个最旧文件的名称列表。

使用 Window Explorer 需要很长时间（大约需要 2 天然后崩溃）。

有什么方法可以最快做到这一点吗？

谢谢你的帮助。

# javascript - 在Javascript中提取月份和日期

> ID：12417172
> 
> 赞同：0
> 
> 时间：2012-09-14T01:57:46.643
> 
> 标签：javascript, jquery, date, time

我有这种格式的日期：1347564203.713372

并且需要以 2 个变量结束，一个是从该日期开始的月份，另一个是从该日期开始的日期。

如何使用 Javascript/jQuery 执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T02:01:57.057

这应该这样做：

```
var myDate = 1347564203.713372;
var d= new Date(myDate*1000);
var month = d.getMonth();
var day = d.getDate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T02:02:53.343

创建一个 Date 对象，用于`setTime`将您的时间戳放在那里，然后获取相关部分：

```
var d = new Date(), t = 1347564203.713372;
d.setTime(t*1000); // JS uses timestamps in milliseconds
alert(d.getUTCDate());
alert(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][d.getUTCMonth()]); 
```

注意`getUTC*`函数的使用 - 这有助于避免时区问题和 DST。

# string - 如何在 Free Pascal 中创建随机字符串？

> ID：12417182
> 
> 赞同：0
> 
> 时间：2012-09-14T01:58:45.090
> 
> 标签：string, dynamic, random, freepascal

我想编写一个函数，该函数根据用户可以自定义的参数化函数`GenString`返回一个随机长度的字符串。`[0 .. 100]``GenChar`

也就是说，如果一个用户想要生成一个全`a`是 s 的字符串，他可以通过传入一个总是返回 的函数来实现`a`，而另一个用户可以通过传入一个`GenChar`返回随机希伯来字母的自定义函数来生成随机的希伯来字母单词。

引理 1：我想编写一个函数`GenArray`，它生成一个传入函数`GenThing : sometype`返回的任何类型的数组。这可以在 Free Pascal 中完成吗？

引理 2：我正在尝试将[QuickCheck](http://www.yellosoft.us/quickcheck)移植到 Free Pascal。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T01:33:50.007

这是一个例子。因为提到了国际字符，所以使用 Unicode 字符串。

```
//The functions

type
  TGenChar = function: widechar;

function GenString(MaxLength: integer; GenChar: TGenChar): widestring;
var
  i: integer;
begin
  if MaxLength < 1 then
    MaxLength:= 1; //minimum length is 1
  setlength(result, random(MaxLength+1));
  for i:= 1 to length(result) do
    result[i]:= GenChar;
end;

//The usage example (remember to call randomize somewhere in your program)

var
  SampleCharSet: widestring= 'ABCxyz';

function SampleGenChar: widechar;
begin
  result:= SampleCharSet[random(length(SampleCharSet))+1];
end;

function GetRandomStringSample: widestring;
begin
  result:= GenString(100, SampleGenChar);
end; 
```

# php - 使用 php 从数据库中检查单选框

> ID：12417192
> 
> 赞同：0
> 
> 时间：2012-09-14T02:00:11.173
> 
> 标签：php, cakephp, radio-button

假设我的代码 php 如下：

```
<?php
    include("connectdb.php");
    $check1 = "";
    $check2 = "";
    $check3 = "";
    $check4 = "";
    $check5 = "";
    $query = "SELECT * FROM tblworkfaire";
    $res = mysql_query($query) or die(mysql_error());
        if($res){
            while($data = mysql_fetch_array($res)){
                if($data['1.DesTechnique'] == 1){
                    $check1 = "CHECKED";    
                    echo $check1;
                }
                else if($data['1.DesTechnique'] == 2){
                    $check2 = " CHECKED";   
                }
                else if($data['1.DesTechnique'] == 3){
                    $check3 = "CHECKED";    
                }
                else if($data['1.DesTechnique'] == 4){
                    $check4 = "CHECKED";    
                }
                else if($data['1.DesTechnique'] == 5){
                    $check5 = "CHECKED";    
                }
            }
        }
        else{
            echo "Fail";
        } 
```

?>

**和HTML代码：**

```
 <form  action="word2html.php" method="post">
    <input type="radio" name="number1" value="1" checked="<? $check1; ?>">
            </b><b>
            <input name="number1" type="radio" value="2" checked="<? $check2; ?>">
            </b><b>
            <input name="number1" type="radio" value="3" checked="<? $check3; ?>">
            </b><b>
            <input  name="number1" type="radio" value="4" checked="<? $check4; ?>">
            </b><b>
            <input name="number1" type="radio" value="5" checked="<? $check5; ?>">
            </b> 
```

**我需要的：**

我已将单选框值存储在数据库中，如果我从数据库中选择值等于 1，它将检查值等于 1 的单选框。

**问题：**

我只能从数据库中选择单选框的值，它不起作用。我该如何解决这个问题？请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:06:00.540

这是一些相当可怕的代码。

第一个问题：您正在执行`while()`循环以从查询中获取结果。如果您要获取多行数据，您将设置所有或部分这些`$checkX`变量，但在特定循环迭代期间实际上并未对它们进行任何操作。假设您获取了足够多的行，最终所有这些变量都将是`checked`并且您最终选择了所有单选按钮。

如果您只期望一行数据，那么 while() 只是货物崇拜编程。

第二个问题。您在那里重复了很多代码，并定义了很多变量，以便通过循环更容易/更清洁地完成一些事情。例如

```
for ($i = 1; $i <= 5; $i++) {
   $checked = ($data['1.DesTechnique'] == $i) ? ' checked="checked"' : '';
   echo <<<EOL
<input name="number1" type="radio" value="$i"$checked>$i<br />

EOL;
} 
```

没有 $checkX 变量，没有重复输入。只是一个很好的循环为你做输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T02:05:15.027

您需要输出变量。

```
<input type="radio" name="number1" value="1" checked="<?php echo $check1; ?>"> 
```

# regex - 正则表达式匹配不以模式结尾的字符串

> ID：12417196
> 
> 赞同：0
> 
> 时间：2012-09-14T02:01:14.390
> 
> 标签：regex, sed

我想匹配不以`/\(.*\) */`. 我试过`^[^\(].*[^\)] *$`（还有一堆东西`(?!something)`，但我没有运气），但它匹配“ `()`”等等。

更多示例：[http ://rubular.com/r/zdxxW6IWUf](http://rubular.com/r/zdxxW6IWUf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:11:23.530

你的意思是你想要任何类型的不以括号结尾的单词，比如函数？

像：

func() **gerg** **erg** **aerg** aergaerga() **gaergjaij** f() **g** **arg** gre()

如果是，请尝试`\<\w+(?!\(\))\>`

编辑： [Rubular](http://rubular.com)似乎不支持单词边界，所以你可以试试`\b\w+(?!\(\))\b`. [单击此处](http://rubular.com/r/BfFHkDBx65)查看示例。

否则，您能否更详细地解释您的意思？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T02:17:31.043

只需使用这个：

```
/^[^(]*[^)] *$/ 
```

[演示。](http://rubular.com/r/qVwbNrCMEq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T20:34:37.423

这足够了吗？

```
/[^)]$/ 
```

或者，如果也有必要忽略尾随空格：

```
/[^}]\w*$/ 
```

如果您的 RE 工具不支持`\w`，只需将其更改为`[ \t]`

# c++ - 函数声明后的“->”是什么？

> ID：12417197
> 
> 赞同：36
> 
> 时间：2012-09-14T02:01:15.770
> 
> 标签：c++, c++11

在一个系统头文件中，我看到这样的表达式：

```
auto create_task(_Ty _Param) -> task<typename details::_TaskTypeFromParam<_Ty>::_Type>
{…} 
```

我不知道“->”是什么意思，它不是指针表达式或 lambda 表达式，谁能帮帮我？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-14T02:02:46.710

这是来自 C++11 的新函数声明语法，称为“尾随返回类型”。在函数声明的末尾，`->`意味着以下是函数的返回类型。它只能在使用`auto`关键字而不是您通常期望的实际返回类型时使用。

例如，这两个声明是兼容的：

```
int foo();
auto foo() -> int; 
```

根据您的喜好，您可能会发现它比旧的声明语法更漂亮，尤其是当返回类型非常长/非常复杂时：

```
task<typename details::_TaskTypeFromParam<_Ty>::_Type> create_task(_Ty _Param);
auto create_task(_Ty _Param) -> task<typename details::_TaskTypeFromParam<_Ty>::_Type>; 
```

但有时模板可能是必要的，因为函数的返回类型可能随参数而变化。

假设您想要一个模板化函数来添加变量：

```
template<typename T>
T add(const T& x, const T& y)
{
    return x + y;
} 
```

这很好，但您只能添加相同类型的变量。假设您希望能够添加任何类型的变量（如`add((int)1, (double)2)`）。

```
template<typename T, typename U>
??? add(const T& x, const U& y)
{
    return x + y;
} 
```

* * *

**编辑**：请注意，在 C++14 及更高版本中，为函数**定义**`auto add(const T& x, const U& y)`编写不带尾随返回类型的 是合法的（换句话说，当您定义函数体时）。

 *** * *

问题是您无法提前知道结果类型是什么`x + y`。就模板而言，它们甚至可以是非整数类型。（你不想做`add(std::string("x"), "y")`吗？）

`Decltype`，以及新的函数声明语法，可以让您解决这个问题。

```
template<typename T, typename U>
auto add(const T& x, const U& y) -> decltype(x + y)
{
    return x + y;
} 
```

`Decltype`“返回”表达式的类型。由于您需要`x`并且`y`已经被声明为`decltype(x + y)`可以工作，因此您需要新的语法。**

# php - 使用 Yii 检查视图文件中模型中的条目是否存在

> ID：12417200
> 
> 赞同：0
> 
> 时间：2012-09-14T02:02:02.097
> 
> 标签：php, activerecord, yii

这听起来可能有点基本（而且可能是），但我已经尝试了几个小时了，要么我需要从编码中休息一下，要么就是不会让步。

我有一个活动记录变量，它从模型中带来数据库条目：

```
$variable = Model::model()->findAll(); 
```

所以我的视图文件中有 $variable 可用，我想检查结果中是否存在特定条目。我正在使用 中可用条目的主键`$variable`，但我似乎无法让它工作。

检查给定条目是否包含在视图文件而不是控制器的该变量中的正确方法是什么？

PS：我不想遍历结果集，这对我的应用程序来说不是很有效。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:31:28.540

如果我说对了：

*   事实上，最好不要在视图文件中包含这样的代码。
*   如果您被迫使用 CActiveRecord.fin*() 方法，请考虑使用 findByPk($pk)。如果它返回 null - 没有这样的记录。
*   考虑让您的模型扩展[PcBaseArModel](http://www.yiiframework.com/extension/pcbasearmodel/)，因为该类具有“checkExists($pk)”方法，在您需要执行的检查中看起来很自然。这个基类还有其他好处 - 检查它的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:30:10.417

试试这个代码：

```
$data = Post::model()->findAllBySql("select * from tbl_post where id=".$data->id); 
```

或者

```
$post=Post::model()->find(array(
    'condition'=>'postID=:postID',
    'params'=>array(':postID'=>$data->id)
)); 
```

# php - Xdebug 和 Netbeans “等待连接”但从未连接

> ID：12417201
> 
> 赞同：6
> 
> 时间：2012-09-14T02:02:35.147
> 
> 标签：php, netbeans, xdebug

**请注意，问题已经自行解决，但您可以将其作为 php.ini 文件中 Xdebug 工作配置的示例！！！**

* * *

我是 Netbeans 和 PHP 的新手，进入一个项目 5 天后，我意识到我真的需要一个调试器 ^^ 所以现在我正在尝试使用 Netbeans 设置 Xdebug，但它只是不起作用.....

到目前为止，我在论坛和互联网其他地方阅读了许多文章，但在使用了所有这些收养之后......仍然没有。

**好的，这是我的配置：Windows7、Netbeans 7.2、PHP 版本 5.4.4、XAMPP 1.8.0。**

## 到目前为止我做了什么：

1.  全新安装 XAMPP（保留旧的 htdocs 和 mysql，该项目）并运行 phpinfo() 并将其内容发布到 wizzard
2.  然后按照[xdebug 向导的说明进行操作](http://xdebug.org/wizard.php)

    *   将下载的文件移动到 C:\xampp\php\ext
    *   编辑 C:\xampp\php\php.ini 并添加行 zend_extension = C:\xampp\php\ext\php_xdebug-2.2.1-5.4-vc9.dll 重启网络服务器
3.  在一篇文章中，有人提到文件名“php_xdebug-2.2.1-5.4-vc9.dll”有时不被接受，所以我**将其更改为“php_xdebug.dll”，因此替换了已经存在的文件名**

- 编辑 php.ini 后，它现在看起来像这样，Xdebug 的其余部分被注释掉：

```
[XDebug]
zend_extension = "C:\xampp\php\ext\php_xdebug.dll"
xdebug.profiler_append = 0
xdebug.profiler_enable = 0
xdebug.profiler_enable_trigger = 0
xdebug.profiler_output_dir = "C:\xampp\tmp"
xdebug.profiler_output_name = "xdebug_profile.%R::%u"
xdebug.remote_enable =On
xdebug.remote_handler =dbgp
xdebug.remote_host =127.0.0.1
xdebug.remote_mode =req
xdebug.remote_port =9000
xdebug.idekey = "netbeans-xdebug"
xdebug.remote_autostart =On 
```

- Apache 和 MySQL 在 XAMPP 控制面板中运行并呈绿色

#

所以现在，通过所有这些更改，我再次运行向导，但仍然告诉我安装 Xdebug！也搜索 phpInfo() 输出不返回任何 Xdebug 的东西......

现在，我启动 Netbeans 并设置一些断点，开始调试（netbeans 中的设置，端口：9000，SessionID：netbeans-xdebug）。Netbeans 正在尝试连接.....但没有发生任何事情！

phpInfo() 中的一些信息：

```
Zend Extension  220100525
Zend Extension Build    API220100525,TS,VC9 
```

任何帮助，将不胜感激

* * *

* * *

**

**好哇！！！**经过 5 小时的工作并完成这篇文章后，**我只是尝试“最后一次”运行调试器 :) 并且它“开始”工作........残酷的世界**:D 但至少现在我可以做出贡献，**这是一个有效的配置；）**

**

# wordpress - 子目录中不同的 lighttpd 重写规则

> ID：12417203
> 
> 赞同：4
> 
> 时间：2012-09-14T02:02:38.833
> 
> 标签：wordpress, url-rewriting, lighttpd, subdirectory

我在获取特定子目录（不同于 webroot）的重写规则时遇到了一些问题，我不知道将它们放在哪里。

/var/www/（包含 WordPress 的 webroot） /var/www/subdirectory（包含需要它自己的重写规则的其他应用程序）

以下规则适用于位于 webroot 目录（/var/www 或[http://mywebsite.com](http://mywebsite.com)）中的 WordPress：

```
$HTTP["host"] =~ "mywebsite.com" {
  url.rewrite-final = (

    # Exclude some directories from rewriting
    "^/(wp-admin|wp-includes|wp-content|gallery2)/(.*)" => "$0",

    # Exclude .php files at root from rewriting
    "^/(.*.php)" => "$0",

    # Handle permalinks and feeds
    "^/(.*)$" => "/index.php/$1"
  )
} 
```

然后我有第二个应用程序，它位于 webroot 的子目录（/var/www/subdirectory 或[http://mywebsite.com/subdirectory](http://mywebsite.com/subdirectory)）中，具有以下规则：

```
url.rewrite = (
    "(index.php|test.php|favicon.ico)" => "/$1",
    "(css|files|img|js)/(.*)" => "/$1/$2",
    "^([^\?]*)(\?(.+))?$" => "/index.php?url=$1&$3",
) 
```

我需要的是上面的第一组重写规则适用于除上面#Excluded 规则中的其他目录（以及/subdirectory）之外的所有内容，然后第二组规则仅适用于/subdirectory

我从网上某处的博客中获得了第一组 WordPress 规则，任何可能都不完全是我所需要的（关于匹配“mywebsite.com”，可能会被简化）。

我已经用谷歌搜索了自己尝试多种变体（主要是在黑暗中由稍微相关的随机论坛帖子引导），但我就是无法理解它。

那么，在维护根目录的 Wordpress 规则的同时，我将如何将第二组规则应用于子目录？

注意：我无法访问子域（这太容易了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:24:02.050

我不太确定您想表达什么 - 我将解释您当前的规则集是做什么的。

不要使用这个，用户重写一次

```
url.rewrite = ( 
```

您将任何 index.php 和 test.php（甚至 foo-test.php）映射回 webroot

```
"(index.php|test.php|favicon.ico)" => "/$1", 
```

您将其 url 中包含 css、files、tmp 或 js 的任何子文件夹或文件重写回 webroot

```
"(css|files|img|js)/(.*)" => "/$1/$2", 
```

现在这匹配您的 webroot 中的任何内容（没有子目录！）并保持获取请求

```
"^([^\?]*)(\?(.+))?$" => "/index.php?url=$1&$3",
) 
```

**更新** 这应该可以（未经测试）

```
url.rewrite-once = (
"^/subdir/(?:index.php|test.php|favicon.ico)" => "$0",
"^/subdir/(?:.+/)?(css|files|img|js)/(.*)" => "/subdir/$1/$2", #update #2
"^/subdir/(?:/(?:.+/))?([^\?]*)(?:\?(.+))?$" => "/subdir/index.php?url=$1&$2",

"^/(wp-admin|wp-includes|wp-content|gallery2)/(.*)" => "$0",
"^/(.*.php)" => "$0",
"^/(.*)$" => "/index.php/$1"
) 
```

# java - Android从用户输入创建文件名路径

> ID：12417205
> 
> 赞同：1
> 
> 时间：2012-09-14T02:02:51.670
> 
> 标签：java, android, file

我确信对此有一个简单的答案，但我是新手，似乎无法弄清楚这一点。

我需要将数据保存到文本文件中。我有所有的代码来做到这一点，但路径和文件名现在是硬编码的。我有一个 EditText 字段，用户在其中输入文件名，然后点击一个按钮。我希望它根据用户输入的内容创建路径和文件名。

基本上是“/sdcard/”+Whateveruserentered.txt的预定路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:15:08.487

好的，这是一个简单的答案，

假设您在 EditText 中输入了“myPath/myfile.txt”，

首先，您需要创建“myPath”文件夹（我假设您也在路径中提供文件夹名称）。

```
String fullPath = myEditText.getText().toString().trim();
String folderPath = fullPath.substring ( 0, fullPath.indexOf ( "/" ) );
String fileName = fullPath.substring ( fullPath.indexOf ( "/" ) + 1 );

// First Create folder by coding, 

File folder = new File(Environment.getExternalStorageDirectory().toString() + folderPath );
if (!folder.exists()) 
{
      folder.mkdirs();
}

// Note: your path must not have recursive folders like myPath1/myPath2/myFile.txt, otherwise you need to create folder in 2 steps.

// Now creating file
File file = new File(Environment.getExternalStorageDirectory().toString() + folderPath + fileName );

if ( !file.exists() )
{
    success = file.createFile();
}

// Now your file is created, you can do writing code now onwards. 
```

# java - 使用java-空指针异常解析XML文件

> ID：12417207
> 
> 赞同：0
> 
> 时间：2012-09-14T02:03:02.330
> 
> 标签：java, xml-parsing, xml-serialization

大家好，我正在尝试使用下面的代码使用 java 解析 xml 文件。

```
try{

        DocumentBuilderFactory docFactory=DocumentBuilderFactory.newInstance();
        DocumentBuilder docBulider=docFactory.newDocumentBuilder();
        Document config_doc=docBulider.parse("config/appconfig.xml");
        config_doc.getDocumentElement().normalize();
       Node n =config_doc.getDocumentElement();
      NodeList list= n.getChildNodes();
      for(int i=0;i<list.getLength();i++){
          System.out.print(list.item(i));
        if(list.item(i).getNodeName().equalsIgnoreCase("version-name")){
         name=list.item(i).getNodeValue();
        }

      }

        }
        catch (Exception e){e.printStackTrace();} 
```

我的文件布局是这样的

![文件布局](../Images/b7d58f303a1ded94cb446af5c5f3cdd6.png)

我不断收到文件未找到异常。我也用过

> getClass().getResouce("config/appconfig.xml").toExternalForm()

我也尝试以流的形式阅读。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:08:31.240

尝试使用

Sytsem.out.println(System.getProperty("user.dir"));

这将打印出您程序的当前工作目录，然后您可以找出 appconfig.xml 文件的相对路径。

祝你好运

码头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T02:22:34.233

这个看起来不错

`getClass().getResouce("config/appconfig.xml").toExternalForm()`

除了它是`main/config/appconfig.xml`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T21:46:04.763

您可以将绝对路径指定为：

```
Document config_doc=docBulider.parse(new File("$Absolute Path of the file")); 
```

# c - 如何将 unsigned char * 转换为 QString

> ID：12417210
> 
> 赞同：12
> 
> 时间：2012-09-14T02:03:11.387
> 
> 标签：c, qt

我知道这是一个非常基本的问题，但有时你会失去基本概念:) 尝试过 Goggling，但也没有足够的支持。

我正在使用我们的设备所有者之一的预定义库。他们有一个声明：

```
unsigned char FamilySerialNum[0][8] 
```

此变量以十六进制获取设备的序列号。现在我在 Qt 中使用这个库在 QLineEdit 中显示序列号。为此，我需要将其转换为 QString。

尝试使用 QString::UTF8、strcpy()、sprintf() 等但得到垃圾数据。

所以任何人都可以建议我一些方法来完成它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T02:36:10.067

## 你好试试下面的功能...

```
QString getStringFromUnsignedChar(unsigned char *str)
{

    QString s;
    QString result = "";
    int rev = strlen(str); 

    // Print String in Reverse order....
    for ( int i = 0; i<rev; i++)
        {
           s = QString("%1").arg(str[i],0,16);

           if(s == "0"){
              s="00";
             }
         result.append(s);

         }
   return result;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-18T03:08:59.193

User1550798 的答案非常接近但不太有效（它产生的一些输出已损坏），因为它仅将值“0”转换为零填充的 2 字符输出（即：“00”）。相反，任何一位十六进制值都应该用零填充（即：“3”->“03”）。

请尝试以下操作：

```
QString getStringFromUnsignedChar( unsigned char *str ){
    QString result = "";
    int lengthOfString = strlen( reinterpret_cast<const char*>(str) );

    // print string in reverse order
    QString s;
    for( int i = 0; i < lengthOfString; i++ ){
        s = QString( "%1" ).arg( str[i], 0, 16 );

        // account for single-digit hex values (always must serialize as two digits)
        if( s.length() == 1 )
            result.append( "0" );

        result.append( s );
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T03:15:55.863

int lengthOfString = strlen( reinterpret_cast(str) );//错误，当尝试获取像“00889966”这样的长度时

```
QString getStringFromUnsignedChar( unsigned char *str, const int len ){
    QString result = "";
    int lengthOfString = len  );

    // print string in reverse order
    QString s;
    for( int i = 0; i < lengthOfString; i++ ){
        s = QString( "%1" ).arg( str[i], 0, 16 );

        // account for single-digit hex values (always must serialize as two digits)
        if( s.length() == 1 )
            result.append( "0" );

        result.append( s );
    }

    return result;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-02-28T13:53:52.510

从 unsigned char* 到 QString：

```
unsigned char *str_uchar;
QString str = QString::fromUtf8((char*)str_uchar); 
```

从 QString 到 unsigned char*：

```
QString str;
unsigned char *str_uchar = (unsigned char*)(str.toUtf8().data()); 
```

# ios - 目标中缺少 SDK - iphoneos5.0

> ID：12417214
> 
> 赞同：0
> 
> 时间：2012-09-14T02:03:30.920
> 
> 标签：ios, xcode, sdk, target

我正在使用 Xcode 4.4.1。我收到这个警告：

```
Missing SDK in target MyApp iphoneos5.0 
```

我想针对 iOS 5.0 及更高版本。我应该在哪里解决这个问题？

在 Target，Build Settings，Base SDK 设置为 iphoneos5.0。

编辑：此外，如果我将基本 SDK 设置为最新的 iOS (5.1)，这是否意味着运行 5.0 的用户将无法安装该应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:35:00.247

这意味着您的构建设置不正确。您将字符串设置为不再存在的“iphoneos5.0”。您现在将针对“iphoneos5.1”进行编译。相反，您应该简单地选择 "Latest iOS" (= "iphoneos") 让编译器自动选择。

用户仍然可以在高于应用*目标*版本的任何版本上运行您的应用（假设您没有使用任何不在这些较低版本上运行的库）。

# javascript - Javascript没有解析相对于当前脚本的工作路径

> ID：12417216
> 
> 赞同：22
> 
> 时间：2012-09-14T02:03:36.300
> 
> 标签：javascript, web-worker

我有一个脚本`http://localhost/js/foo.js`，需要从文件中生成一个 Web Worker `http://localhost/js/fooWorker.js`。我以为我可以做这样的事情：

```
var worker = new Worker('fooWorker.js') 
```

但是，这会导致 404 错误，因为浏览器无法找到`http://localhost/fooWorker.js`. 我的印象是工作路径是相对于生成工作的脚本解析的，所以我不应该能够在同一目录中指定另一个 .js 文件的名称而不必提供绝对路径吗？难道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T02:12:18.267

来自[http://www.w3.org/TR/workers/](http://www.w3.org/TR/workers/)：

> 当调用 Worker(scriptURL) 构造函数时，用户代理必须运行以下步骤：
> 
> 1.  **在调用该方法时，解析相对于入口脚本的基本** URL的 scriptURL 参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-03T20:52:45.910

实际上，它应该是相对于嵌入的文档路径

例如，

我有

```
pathDoc\docA.html
js\b.js
js\worker\c.js 
```

那么代码应该是

```
var worker = new Worker('..\js\worker\c.js') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-23T21:05:01.343

请注意，您仍然可以使用 获取 worker 中的脚本 url，[`self.location`](https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/location)并将其添加到路径中，以使它们相对于 worker 脚本而不是 html 基本 url。

```
const workerUrl = location + '';
const basePath = workerUrl.replace(/\/[^/]+$/, '/');

self.importScripts(basePath + '/fooWorker.js'); 
```

顺便说一句，如果您通过 blob 包含您的工作人员，您仍然可以通过`#`哈希参数传递元信息，例如它的 url。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-11T03:49:36.773

使用*import.meta.url*，您应该能够让它像相对路径一样工作。

```
var worker = new Worker(new URL('./fooWorker.js', import.meta.url)); 
```

# java - 休眠显示来自 JComboBox 的记录

> ID：12417217
> 
> 赞同：1
> 
> 时间：2012-09-14T02:03:40.537
> 
> 标签：java, hibernate, swing, jtable, jcombobox

我正在使用休眠创建一个简单的项目。我知道如何在`JTable`以及上显示记录，`JList`但我不知道如何在`JComboBox`. 无论如何，这是我的代码并指导我将数据库记录显示到`JComboBox`？

我没有任何错误或任何东西，但它只显示一条记录，这是我知道它在循环中的最后一条记录，但仍然无法弄清楚如何显示所有记录。所以这是我的代码。

变量：

```
private Object[] loadName; 
```

加载和检索数据的方法：

```
public Object[] LoadSupplier(){
    b = a.openSession();
    b.beginTransaction();
    Query query = b.createQuery("FROM Supplier");
    @SuppressWarnings("unchecked")
    ArrayList<Supplier> load = (ArrayList<Supplier>) query.list();
    b.getTransaction().commit();
    b.close();
    for(Supplier supply : load){
        loadName = new Object[]{supply.getSupplierName()};
    }
    return loadName;
} 
```

并将其显示给数据库：

```
comboCategory = new JComboBox(LoadSupplier()); 
```

我所做的是我通过将其作为`JComboBox`值直接调用该方法:) 告诉我我是否做对了。实现所需输出的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:06:36.037

*每次 for 循环迭代时*，您都会*重新分配*loadName 变量，因此您不应该对没有保存以前的数据感到惊讶。为什么不在for 循环*之前*创建一个对象，然后在每次迭代时添加到循环内部的模型中呢？*`DefaultComboBoxModel<E>`*

# javascript - 为什么 yui DOM-create 方法有一个名为 'yui3-big-dummy' 的类的处理程序？

> ID：12417218
> 
> 赞同：6
> 
> 时间：2012-09-14T02:03:44.943
> 
> 标签：javascript, html, css, yui, yui3

在 YUI 文档中；[http://yuilibrary.com/yui/docs/api/files/dom_js_dom-create.js.html](http://yuilibrary.com/yui/docs/api/files/dom_js_dom-create.js.html)

```
if (nodes.length === 1) { // return single node, breaking parentNode ref from "fragment"
            ret = nodes[0].parentNode.removeChild(nodes[0]);
        } else if (nodes[0] && nodes[0].className === 'yui3-big-dummy') { // using dummy node to preserve some attributes (e.g. OPTION not selected)
            if (nodes.length === 2) {
                ret = nodes[0].nextSibling;
            } else {
                nodes[0].parentNode.removeChild(nodes[0]); 
                ret = Y_DOM._nl2frag(nodes, doc);
            }
        } else { // return multiple nodes as a fragment
             ret = Y_DOM._nl2frag(nodes, doc);
        } 
```

第 110 行说

**} else if (nodes[0] && nodes[0].className === 'yui3-big-dummy') { // 使用虚拟节点来保留一些属性（例如 OPTION 未选择）**

这到底是什么意思？我不明白为什么会有一个名为“yui3-big-dummy”的类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T01:26:14.420

这是因为他们在自己内部的东西上进一步使用了这个类，他们只是不想把一个有人实际使用的类放在那里。您会在第 317 行注意到他们正在使用该类将一些东西放在那里，并且他们正试图针对该类。这只是一些您通常不必担心的内部问题。

```
return Y_DOM.create('<select><option class="yui3-big-dummy" selected></option>' + html + '</select>', doc); 
```

# sqlite - System.Data.SQLite 内存数据库多线程

> ID：12417222
> 
> 赞同：6
> 
> 时间：2012-09-14T02:04:18.690
> 
> 标签：sqlite, system.data.sqlite

我正在使用连接字符串创建一个 System.Data.SQLite 内存数据库

```
"Data Source=:memory:", 
```

并希望在多线程之间访问该数据库。

现在我要做的是克隆`SQLiteConnection`对象并将副本传递给工作线程。

但我发现不同的线程实际上获得了内存数据库的各个实例，而不是共享的。如何在线程之间共享一个内存数据库？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T03:16:33.870

基于内存数据库的 SQLite[文档](http://www.sqlite.org/inmemorydb.html#sharedmemdb)，我会尝试使用 URI 文件名约定`file::memory:?cache=shared`或类似名称命名的数据源`:memory:`（并特别注意所有连接都被告知使用的缓存名称）。正如页面上所解释的， a 的每个实例都`:memory:`彼此不同，正如您所发现的那样。

请注意，您可能还必须先启用共享缓存模式，然后才能连接到内存数据库（如[共享缓存文档](http://www.sqlite.org/sharedcache.html)中指定的那样，调用`sqlite3_enable_shared_cache(int)`此模式才能正常工作。

# php - 编辑一个数据时增加表中的其他数据

> ID：12417223
> 
> 赞同：0
> 
> 时间：2012-09-14T02:04:21.010
> 
> 标签：php, sql, edit

我的系统中有这个页面，显示所有输入的类别。该表包含三个字段，如下所示：

1.  cat_id
2.  类别
3.  优先

主页显示所有条目（博客）并按类别分组。现在的想法是管理员可以更改“类别”的“优先级”，以便根据他认为合适的内容排列页面。

例子：

```
==============================
| Category     |  Priority   |
==============================
|  Category1   |   1         |
|  Category2   |   2         |
|  Category3   |   3         |
|  Category4   |   4         |
|  Category5   |   5         |
=============================== 
```

这个想法是，当用户将类别 5 的优先级编辑为 1 时，每个类别的其余优先级小于编辑的优先级将通过将其增加 1 进行调整，这样就不会出现重复。

到目前为止，我只有这个。

```
if (isset($_POST['edit'])) {
         if (is_numeric($_POST['cat_id']))

include('connect.php');

    $id = $_POST['cat_id'];
    $category = $_POST['category'];
    $priority = $_POST['priority'];

    mysql_query("UPDATE category 
                 SET category='$category', priority='$priority'
                 WHERE cat_id='$id'") or die(mysql_error());

     header("Location: addctg.php");                     

    } 
```

关于如何构建的任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:41:06.867

让我们处理一个比将 Category5 从优先级 5 移动到优先级 1 更一般的情况。有两个（镜像）更好的例子：

*   将类别 4 移至优先级 2。
*   将类别 2 移至优先级 4。

在每种情况下，有两排不受影响（优先级为 1 和 5 的排），一排指定为移动，两排受影响为“附带损坏”。

UPDATE 语句的大部分技巧是制定一个 SELECT 语句，该语句从“之前”状态生成“之后”状态的正确数据。另一个技巧是识别控制操作的参数。这里有两个参数：

1.  类别（名称） - 或等效的类别 ID 号。
2.  类别的新优先级。

对于“上移”（将较低优先级的类别移至较高优先级）和“下移”（将较高优先级的类别移至较低优先级），我们可能需要单独的算法。

以下是说明之前和之后的场景：

```
Before                        Category4 to Priority 2       Category2 to Priority 4
========================      ========================      ========================
| Category  | Priority |      | Category  | Priority |      | Category  | Priority |
========================      ========================      ========================
| Category1 | 1        |      | Category1 | 1        |      | Category1 | 1        |
| Category2 | 2        |      | Category4 | 2        |      | Category3 | 2        |
| Category3 | 3        |      | Category2 | 3        |      | Category4 | 3        |
| Category4 | 4        |      | Category3 | 4        |      | Category2 | 4        |
| Category5 | 5        |      | Category5 | 5        |      | Category5 | 5        |
========================      ========================      ======================== 
```

让我们首先尝试“向上​​移动”算法。

### 提升

使用 TDQD——测试驱动的查询开发——我们可以分阶段生成列表：

1.  高优先级不受影响的行：

    ```
    SELECT cat_id, category, priority
      FROM categories
     WHERE priority < 2; 
    ```

2.  低优先级不受影响的行：

    ```
    SELECT cat_id, category, priority
      FROM categories
     WHERE priority > (SELECT priority FROM categories WHERE category = 'Category4'); 
    ```

3.  被移动的行：

    ```
    SELECT cat_id, category, 2 AS priority
      FROM categories
     WHERE category = 'Category4'; 
    ```

4.  必须调整其优先级的行：

    ```
    SELECT cat_id, category, priority + 1 AS priority
      FROM categories
     WHERE priority >= 2
       AND priority < (SELECT priority FROM categories WHERE category = 'Category4'); 
    ```

显然，这 4 个查询可以通过 4 路 UNION 组合以生成完整的新排序。同样清楚的是，由于查询 1 和 2 选择了不变的行，我们只需要处理由查询 3 和 4 生成的发生变化的行。

因此，更改的行是：

```
SELECT cat_id, category, 2 AS priority
  FROM categories
 WHERE category = 'Category4'
UNION
SELECT cat_id, category, priority + 1 AS priority
  FROM categories
 WHERE priority >= 2
   AND priority < (SELECT priority FROM categories WHERE category = 'Category4'); 
```

现在我们只需要派生一个 UPDATE 语句来更改优先级（不更改类别 ID 或类别名称）：

```
UPDATE categories
   SET priority = 
       (SELECT x.priority
          FROM (SELECT cat_id, 2 AS priority
                  FROM categories
                 WHERE category = 'Category4'
                UNION
                SELECT cat_id, priority + 1 AS priority
                  FROM categories
                 WHERE priority >= 2
                   AND priority < (SELECT priority FROM categories WHERE category = 'Category4')
               ) AS x
         WHERE x.cat_id = categories.cat_id
       )
 WHERE cat_id IN
       (SELECT cat_id
          FROM categories
         WHERE category = 'Category4'
        UNION
        SELECT cat_id
          FROM categories
         WHERE priority >= 2
           AND priority < (SELECT priority FROM categories WHERE category = 'Category4')
       ); 
```

主 UPDATE 语句中的 WHERE 子句可以简化，产生：

```
UPDATE categories
   SET priority = 
       (SELECT x.priority
          FROM (SELECT cat_id, 2 AS priority
                  FROM categories
                 WHERE category = 'Category4'
                UNION
                SELECT cat_id, priority + 1 AS priority
                  FROM categories
                 WHERE priority >= 2
                   AND priority < (SELECT priority FROM categories WHERE category = 'Category4')
               ) AS x
         WHERE x.cat_id = categories.cat_id
       )
 WHERE cat_id IN
       (SELECT cat_id
          FROM categories
         WHERE priority >= 2
           AND priority <= (SELECT priority FROM categories WHERE category = 'Category4')
       ); 
```

当针对在 Mac OS X 10.7.4 上运行的 IBM Informix Dynamic Server 11.70.FC2 进行测试时，这产生了正确答案。

### 下移

'Move Down' 的并行分析产生 UPDATE 语句：

```
UPDATE categories
   SET priority = 
       (SELECT x.priority
          FROM (SELECT cat_id, 4 AS priority
                  FROM categories
                 WHERE category = 'Category2'
                UNION
                SELECT cat_id, priority - 1 AS priority
                  FROM categories
                 WHERE priority <= 4
                   AND priority > (SELECT priority FROM categories WHERE category = 'Category2')
               ) AS x
         WHERE x.cat_id = categories.cat_id
       )
 WHERE cat_id IN
       (SELECT cat_id
          FROM categories
         WHERE priority <= 4
           AND priority >= (SELECT priority FROM categories WHERE category = 'Category2')
       ); 
```

### 代表作

最终的答案是以这样一种方式组合这些查询，无论命名的类别是向上还是向下移动，它都可以工作（如果该类别被提名留在同一个地方，它将什么都不做）。虽然我毫不怀疑可以开发这样的查询，但我认为不值得付出努力。您可以编写一个存储过程来获取类别名称和类别的新优先级，它会执行必要的 UPDATE 语句。这可以很容易地从 UI（Web 浏览器或更紧密耦合）驱动。你上面的内容很复杂，但是可以解释。而“可解释”意味着您也有机会“可维护”。

# wpf - 以编程方式向 DataGrid 添加大量列太慢

> ID：12417224
> 
> 赞同：1
> 
> 时间：2012-09-14T02:04:26.667
> 
> 标签：wpf, multithreading, datagrid, wpfdatagrid, datagridcolumn

我有一个 WPF DataGrid，它必须以编程方式添加行标题和列。我已经成功地实现了这一点，但性能是不可接受的。每次添加一列时，都会`ColumnCollection`输出一个`CollectionChangedEvent`. 我还没有找到禁用此事件的方法，因此我研究了其他提高性能的方法。

我在后台线程上创建了 DataGrid 并尝试将网格添加到 UI 中，但没有成功，收到以下消息：

```
"UI Element is owned by a different thread" 
```

我在主 UI 线程上创建了 DataGrid，并尝试在后台线程中添加列。同样的问题。我不能要求 UI 线程这样做，因为这首先是问题所在。

还有哪些其他方法用于向 DataGrid 添加大量列？（在一种情况下为 10,000 列）

珍妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:56:59.800

我最终使用这行代码在后台创建 DataGrid 并将其添加到 UI。

```
 this.Dispatcher.BeginInvoke(DispatcherPriority.Background, new UpdateNodesDelegate(UpdateNodes)); 
```

**从C# 2008 中的 WPF 食谱**一书中得到了这个解决方案。

珍妮

# git - 为什么我拉动时git会合并？

> ID：12417230
> 
> 赞同：1
> 
> 时间：2012-09-14T02:04:53.107
> 
> 标签：git, merge, pull

我最近开始使用 git 并且对它非常满意，它绝对是一个很棒的工具。

但是今天我把它弄到了一个非常奇怪的状态，我似乎无法摆脱它。

我有两个远程分支，master 和 pqueues。我希望能够将这些分支拉入同名的本地分支，但是当我这样做时，`git pull`它会将 master 拉入并合并到我签出的任何一个分支中。如果我`git pull`在本地 pqueue 上做，它会合并自己和 master。我真的不明白为什么。

另外，如果我`git push origin pqueues`在 pqueues 上进行操作，它会说`Updates were rejected because the tip of your current branch is behind`当我知道我是唯一提交到该远程分支的人时，并且我的本地分支在远程之前提交了一些。

我怎样才能找出实际发生的事情并将其恢复到正常工作状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:21:20.507

在两种情况下，拉取会导致合并。1\. 你已经在你的本地分支上进行了提交，例如'master'和其他人将提交推送到'origin/master'，因为你的本地'master'上次与'origin/master'同步2 . 您没有对“master”做出任何承诺，但其他人通过将“origin/master”倒回到较早的提交然后向其添加提交来“重写历史”。

对于情况（1），如果您可以执行“git pull --rebase”，它将在新的原始/主 HEAD 上重播您的更改

情况 (2) 可以通过从不重写历史记录来避免：如果必须撤消提交，请使用 git revert 它将添加一个新的提交来撤消前一个提交，并且提交和还原都显示在 git 中并且可以快速转发由所有下游回购。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:16:58.473

注意：无论您使用什么 git pull （并且`git pull --rebase`在正在拉取的内容之上更新当前分支是一个好主意），`git pull`都将首先执行 `git fetch`.

（参见“ [`git fetch`/`git pull`来自 Git 参考](http://gitref.org/remotes/#fetch)）”

并将`git fetch`获取远程分支：如果它们不存在于您的本地仓库中，将创建它们。
这就是为什么你*第一次* `git pull`看到：

```
* [new branch] pqueues -> pqueues/pqueues 
* [new branch] master -> pqueues/master 
```

但你只会第一次这样做`git pull`。所有其他的将获取并更新现有的远程跟踪。
请参阅“ [Git：什么是跟踪分支？](https://stackoverflow.com/questions/4693588/git-what-is-a-tracking-branch) ”和“[远程跟踪分支和远程分支有什么区别？](https://stackoverflow.com/questions/9016465/what-is-the-difference-between-a-remote-tracking-branch-and-a-branch-on-a-remot) ”，以更好地了解哪些`git fetch`更新。

# linux - 如何使用 glob 模式查找具有两个以上字母但不以特定两个字母开头的单词以进行 tcsh 文件匹配？

> ID：12417239
> 
> 赞同：1
> 
> 时间：2012-09-14T02:07:01.607
> 
> 标签：linux, shell, tcsh

基本上我有一个单词/文件夹列表（例如 cr cr1 cr22 ch dr eegh）

使用

> 回声^cr*

我可以过滤列表并获取不以 cr 开头的单词（例如 ch dr eegh）

使用

> 回声??*

我可以过滤列表并获取包含两个或更多字母的单词（例如 cr cr1 cr22 ch dr eegh）

所以我的问题是，如何将它们结合起来（命令必须以 echo 开头，但可以使用 grep 或其他命令），这样我才能得到不以 cr 开头且包含两个或多个字母的单词？（例如 ch dr eegh）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:48:55.197

所以你在找词

*   以除 以外的任何字符开头`c`，后跟一个或多个字符
*   以 开头`c`，然后是一个字符以外的字符`r`

干得好：

```
echo [^c]?* c[^r]* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T02:14:56.083

//发布时，假设OP使用的是bash，这是一个合理的假设。

如果您只想使用`echo`.

`echo`它本身不搜索文本，它只是将其传递`kwargs`给`stout`. 处理此问题的最佳方法是使用`grep`并编写正则表达式。

# c# - TFS C# API：Workspace.PendAdd 静默失败

> ID：12417241
> 
> 赞同：4
> 
> 时间：2012-09-14T02:07:50.063
> 
> 标签：c#, .net, windows, tfs, windows-server-2008

[Microsoft.TeamFoundation.VersionControl.Client.Workspace.PendAdd](http://msdn.microsoft.com/en-us/library/bb139339)

出于某种原因，每当我从 TFS API 调用 PendAdd 方法时，它都会毫无例外地执行，但无法将任何文件标记为已添加到我的工作区中。但是，调用 PendEdit 始终按预期工作。我已验证所使用的帐户都具有在 TFS 中添加的权限，并且具有对相关文件的完全控制 Windows 权限。

有任何想法吗？

我的代码（为了调试，我尝试对 PendAdd 方法的输入进行四种变体）：

```
public bool AddFile( string filePath, out string status, bool isRecursive = false )
{
    Workspace workspace = GetWorkspace( out status );
    if( workspace == null )
    {
        return false;
    }

    workspace.PendAdd( filePath, isRecursive );

    status = "Success";
    return true;
}

public bool CheckOutFile( string filePath, out string status )
{
    Workspace workspace = GetWorkspace( out status );
    if( workspace == null )
    {
        return false;
    }

    workspace.PendEdit( filePath );

    status = "Success";
    return true;
}
...
string status;

// $/Solution/.../foo.cs (non-recursive)
if( TFS.AddFile("$/Solution" + Regex.Split(target, "Solution")[1].Replace('\\', '/'), out status) == false )
{
    throw new Exception( "TFS Add failed: " + status );
}

// $/Solution/.../ (recursive)
if( TFS.AddFile("$/Solution" + Regex.Split(target.Substring(0, target.LastIndexOf('\\')), "Solution")[1].Replace('\\', '/'), out status, true) == false )
{
    throw new Exception( "TFS Add failed: " + status );
}

// Calls PendEdit with C:\TFS\Solution\...\foo.cs; this works
if( TFS.CheckOutFile(target, out status) == false )
{
    throw new Exception( "TFS Checkout failed: " + status );
}

// C:\TFS\Solution\...\foo.cs (non-recursive)
if( TFS.AddFile(target, out status) == false )
{
    throw new Exception( "TFS Add failed: " + status );
}

// C:\TFS\Solution\...\ (recursive)
if( TFS.AddFile(target.Substring(0, target.LastIndexOf('\\')), out status, true) == false )
{
    throw new Exception( "TFS Add failed: " + status );
}
...
private Workspace GetWorkspace( out string status )
{
    Workspace[] workspaces = _versionControlServer.QueryWorkspaces( null, _versionControlServer.AuthorizedUser, Environment.MachineName );

    if( workspaces.Length != 1 )
    {
        status  = "You must have exactly 1 local workspace to promote code.";
        return null;
    }
    else
    {
        status  = "You have exactly 1 local workspace.";
    }

    return workspaces[0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:54:42.987

嗯，这很奇怪，但我做了一个更改，允许多个用户通过这个控制器（而不是一个硬编码的用户）添加或编辑文件，并在必要时为每个用户创建一个新的工作区，现在一切都按原计划工作。这很奇怪，考虑到与此行为相关的任何内容都没有以任何重要方式进行修改。

我不完全相信这不是一个错误/我以前没有在代码中遇到过一些边缘情况，但只要我的项目有效（到目前为止它确实如此）我并不真正担心无论哪种方式。

[相关的 Microsoft Connect 线程](https://connect.microsoft.com/VisualStudio/feedback/details/762789/tfs-c-api-workspace-pendadd-silently-fails)（以防这确实是 TFS 的问题，后来得到解决）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-24T22:22:40.150

我遇到了同样的问题（即使是[这里](https://msdn.microsoft.com/en-us/library/bb130331)的 MSDN 示例），但是[`Workstation.EnsureUpdateWorkspaceInfoCache`](https://msdn.microsoft.com/en-us/library/bb139687(v=vs.120).aspx)在调用 PendAdd 之前调用它为我解决了这个问题。

收听[NonFatalErrors](https://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.nonfatalerror(v=vs.120).aspx)可以为您提供有关此类问题的非常有用的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:15:50.140

我已经重现了这种奇怪的行为。我可以通过在将文件添加到 sourceControl**之前在我的文件系统上创建文件来修复它。**

否则，它将默默地失败。

# java - 如何在 Java 中为键和 2 个值构建哈希映射？

> ID：12417247
> 
> 赞同：1
> 
> 时间：2012-09-14T02:08:48.520
> 
> 标签：java

我想建立哈希映射来包含

```
<string, array and double(sum(double2).
array contain string, int1, double1, double2 (int1*double1) 
```

例如：

```
string1, word1,2,1.1,2.2 , 7.3 (2.2+1.1+4.0)
string1, word2,1,1.0,1.1 , 7.3
string1, word3,2,2.0,4.0 , 7.3

string2, ... 
..
...
stringn,.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:11:30.947

创建一个`HashMap<String, MyCustomObject>`MyCustomObject 保存字符串和所需的任何其他字段的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T02:12:48.860

你真的应该创建一个类来保存这些数据。`HashMap`s（和`Map`一般的 s）用于将一件事“映射”到另一件事，而不是用于保存过多的未连接项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T02:13:25.897

您可以使用[Apache Commons Pair](http://commons.apache.org/lang/api/org/apache/commons/lang3/tuple/Pair.html)作为 Pair 包含数组列表和双精度值的值。

```
Map<String, Pair<List<String>, Double>> myMap; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T02:13:54.337

您的问题不是很清楚，但听起来您想在 HashMap 中使用单个键存储多个数据项？

简单的答案是 HashMap 的设计初衷并非如此。它将一个键与一个值相关联。

因此，您需要做的是编写一个自定义类来保存您想要与键关联的所有数据，然后将该类的实例存储为与键关联的值。

# ios - 如何在 iOS 中卸载上一个级别（类）

> ID：12417248
> 
> 赞同：1
> 
> 时间：2012-09-14T02:08:57.837
> 
> 标签：ios, game-development

在我的游戏中，当我加载一个新关卡时，之前的关卡似乎仍然保留在视图中。每个关卡都有自己的类，它们都会在屏幕上绘制一些东西。因此，如果我加载了 2 个或更多级别的图像，那会使我的游戏太慢。我可以做些什么来卸载上一个级别？提前致谢..

```
- (void) finishedLevel: (Level *) level
{

        levelNumber++;
    levelClass = NSClassFromString([NSString stringWithFormat:
                                    @"Level_%d", levelNumber]);
    if (!levelClass) levelClass = [Level class];

    currentLevel = [[levelClass alloc] initWithView: self.mainView];

    self.mainView.levelLabel.text = [NSString stringWithFormat:@"Level %d", levelNumber];

    gameRunning = NO;
} 
```

我尝试使用以下但并没有真正起作用

```
levelClass = NSClassFromString([NSString stringWithFormat:@"Level_%d", levelNumber-1]);

    [levelClass removeFromSuperview]; 
```

错误信息

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[Level_1 removeFromSuperview]: unrecognized selector sent to class 0x107644' 
```

# bash - 如何将包含至少一个匹配短语的所有行移动到文件末尾？

> ID：12417254
> 
> 赞同：1
> 
> 时间：2012-09-14T02:10:27.453
> 
> 标签：bash, sorting

如何将文件中包含至少一个匹配短语的所有行移动到文件末尾？例如，文件：

```
Do you like to read books?
Yes, do you like to watch movies?
No, but the fish does. 
```

如果搜索短语是“book”和“movie”，那么上面的前两行将移动到文件的末尾，例如：

```
No, but the fish does.
Do you like to read books?
Yes, do you like to watch movies? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:14:03.837

这是一种快速而肮脏的方法：

```
(grep -v -e movie -e book file; grep -e movie -e book file) >newfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T02:14:55.287

这是你要找的吗？

```
grep "match1|match2" input.txt > tmp1
grep -v "match1|match2" input.txt > tmp2
cat tmp2 tmp1 > output.txt
rm tmp1 tmp2 
```

或者，正如凯文所指出的，不使用临时文件：

```
cat <(grep "match1|match2" input.txt) <(grep -v "match1|match2" input.txt) > output.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T11:51:48.683

这是完整 bash 的另一种方式：

```
#!/bin/bash -
declare -a HEAD
declare -a BOTTOM

while read -r line
do
        case "$line" in
                *book*|*movie*)
                        BOTTOM[${#BOTTOM[*]}]="${line}";
                        ;;
                *)
                        HEAD[${#HEAD[*]}]="${line}";
                ;;
        esac    # --- end of case ---
done < "$1"

for i in "${HEAD[@]}" "${BOTTOM[@]}"; do echo $i; done 
```

# cocos2d-iphone - 骨架动画——如何翻转 FTCCharacter？

> ID：12417262
> 
> 赞同：1
> 
> 时间：2012-09-14T02:11:57.550
> 
> 标签：cocos2d-iphone

这是我在 Stack Overflow 上的第一个问题。

我正在用 Cocos2d 玩骨骼动画。通过使用 TheDamarmada / Flash2Cocos2D 库，我可以初始化一个继承自 CCSprite 的 FTCCharacter。我尝试使用 翻转整个角色`myRobot.flipX = YES`，但它不起作用。

有什么建议吗？

[这是Flash2Cocos2D](https://github.com/TheDamArmada/Flash2Cocos2D)的内联链接。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:31:47.213

来自 Cocos2D 源码 (CCSprite.h:121)

```
/** whether or not the sprite is flipped horizontally.
 It only flips the texture of the sprite, and not the texture of the sprite's children.
 Also, flipping the texture doesn't alter the anchorPoint.
 If you want to flip the anchorPoint too, and/or to flip the children too use:

    sprite.scaleX *= -1;
 */
@property (nonatomic,readwrite) BOOL flipX; 
```

所以预计 FTCCharacter 的孩子不会翻转。 `myRobot.scaleX *= -1;`应该按照 Cocos2D 的建议工作。

# apache - ModX 缓存：使用错误权限写入的文件

> ID：12417264
> 
> 赞同：0
> 
> 时间：2012-09-14T02:12:14.337
> 
> 标签：apache, file-permissions, modx, modx-revolution, directory-permissions

标题并没有真正概括一切......

我最近在 Apache 服务器上安装了 ModX Revolution 2.2.4，但我遇到了缓存文件夹的问题。有时我必须通过 ftp 手动清除缓存文件夹，但那里写入的任何文件都归 Apache 所有，我的帐户无法删除它们。我尝试将“new_file_permissions”和“new_folder_permissions”添加到系统设置中，但没有任何变化。缓存文件始终归 Apache 所有，我无法通过 ftp 访问。

此外，除非我通过 ftp 手动将它们更改为 777，否则诸如 .htaccess 之类的文件以及我上传的任何内容（css 等）都被视为无法编辑 modx。我无法更改所有者和组。

服务器技术无法弄清楚。这个问题以前在 modx 论坛上出现过，但从未得到回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:48:45.153

显然，这是一个服务器问题。

我遇到了这个问题（虽然是 IIS 服务器），并且主机需要更改它们的一些设置。

特别是，如果 MODX 在您的不同主机上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:39:06.593

这就是它应该工作的方式，您的FTP帐户没有写入apache写入文件的权限，您的ftp可能是该组的成员但没有写入权限。[需要删除]。我怀疑这是出于安全目的而设计的。

您的 new_file_permissions、new_folder_permissions 用于 modx 文件管理器。

所以你可以做几件事：

在 fastcgi 下运行 modx，这样写文件的用户应该和 ftp 用户是同一个用户。

或者

写一个小脚本[你甚至可以把它塞进一个片段中]，它将为你删除缓存文件。【既然会以apache用户的身份运行，应该没问题。

# java - Trying to build first Spring project with maven

> ID：12417268
> 
> 赞同：1
> 
> 时间：2012-09-14T02:12:46.487
> 
> 标签：java, spring, maven

I am trying to build my first Spring project with maven it was working before using maven but now that I am trying to do the build with maven I am getting the following output. can someonme please tell me whats wround

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building WebFlowTemplate Maven Webapp
[INFO]    task-segment: [package]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Compiling 5 source files to /home/jsmith/Downloads/home/jsmith/Documents/workspace-sts-3.0.0/WebFlowTemplate/target/classes
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

/home/jsmith/Downloads/home/jsmith/Documents/workspace-sts-3.0.0/WebFlowTemplate/src/main/java/org/uftwf/webflowtemplate/service/TestServiceImpl.java:[9,1] annotations are not supported in -source 1.3
(use -source 5 or higher to enable annotations)
@Service

/home/jsmith/Downloads/home/jsmith/Documents/workspace-sts-3.0.0/WebFlowTemplate/src/main/java/org/uftwf/webflowtemplate/controller/HelloWorldController.java:[8,1] annotations are not supported in -source 1.3
(use -source 5 or higher to enable annotations)
@Controller

/home/jsmith/Downloads/home/jsmith/Documents/workspace-sts-3.0.0/WebFlowTemplate/src/main/java/org/uftwf/webflowtemplate/controller/swf/HellowWorldFlowActions.java:[3,7] static import declarations are not supported in -source 1.3
(use -source 5 or higher to enable static import declarations)
import static org.apache.log4j.Logger.getLogger;

/home/jsmith/Downloads/home/jsmith/Documents/workspace-sts-3.0.0/WebFlowTemplate/src/main/java/org/uftwf/webflowtemplate/controller/swf/HellowWorldFlowActions.java:[13,1] annotations are not supported in -source 1.3
(use -source 5 or higher to enable annotations)
@Component

/home/jsmith/Downloads/home/jsmith/Documents/workspace-sts-3.0.0/WebFlowTemplate/src/main/java/org/uftwf/webflowtemplate/domain/Customer.java:[7,1] annotations are not supported in -source 1.3
(use -source 5 or higher to enable annotations)
@SuppressWarnings("serial")

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3 seconds
[INFO] Finished at: Thu Sep 13 22:09:00 EDT 2012
[INFO] Final Memory: 19M/163M
[INFO] ------------------------------------------------------------------------ 
```

this is my pox.xml file:

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springsource.greenbeans.maven</groupId>
    <artifactId>WebFlowTemplate</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>WebFlowTemplate Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>
<!-- 
<dependency>
        <groupId>org.jasig.cas</groupId>
        <artifactId>cas-server-core</artifactId>
        <version>3.5.0</version>
        <exclusions>
            <exclusion>
                <artifactId>jcl-over-slf4j</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>1.6.6</version>
    </dependency>

-->
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.6.3.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.3.0.Final</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-webflow</artifactId>
            <version>2.3.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-ldap</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas-client</artifactId>
            <version>3.0.7.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.ldap</groupId>
            <artifactId>spring-ldap-core</artifactId>
            <version>1.3.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.ldap</groupId>
            <artifactId>spring-ldap-core-tiger</artifactId>
            <version>1.3.0.RELEASE</version>
        </dependency>

<!-- 
        <dependency>
            <groupId>org.jasig.cas</groupId>
            <artifactId>cas-server-core</artifactId>
            <version>3.5.0</version>
        </dependency>
 -->
        <dependency>
            <groupId>org.jasig.cas.client</groupId>
            <artifactId>cas-client-core</artifactId>
            <version>3.1.12</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.6</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-ext</artifactId>
            <version>1.6.6</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.6</version>
        </dependency>
<!-- 
        <dependency>
            <groupId>org.apache.directory.server</groupId>
            <artifactId>apacheds-core</artifactId>
            <version>1.5.5</version>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>org.apache.directory.server</groupId>
            <artifactId>apacheds-server-jndi</artifactId>
            <version>1.5.5</version>
            <scope>runtime</scope>
        </dependency>
 -->
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
            <exclusions>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-nop</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>jcl-over-slf4j</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

    </dependencies>
    <build>
        <finalName>WebFlowTemplate</finalName>

    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T02:17:06.130

It seems you are working with JDK version prior to 1.5\. Annotation support in java has been introduced since JDK 1.5 and you should configure your project to be run with 1.5 or higher as follows:

```
<build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.5.1</version>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
        </configuration>
      </plugin>
    </plugins>
</build> 
```

# iphone - 在 iOS5 中使用 NSIndexPath 时应用程序崩溃

> ID：12417270
> 
> 赞同：11
> 
> 时间：2012-09-14T02:12:50.763
> 
> 标签：iphone, ios

```
#define PROPERTY_SECTION 0
#define SUBTOTAL_ROW 0

UITableViewCell *subtotalCell = [self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForItem:SUBTOTAL_ROW inSection:PROPERTY_SECTION]]; 
```

当我在 ios 6 中调试它时，它运行完美，但在 ios 5 中应用程序因以下原因而崩溃“

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSIndexPath indexPathForItem:inSection:]: unrecognized selector sent to class 0x1d41f20'
*** First throw call stack:
(0x26b4022 0x2083cd6 0x26b5aad 0x261aed0 0x261acb2 0xc956a 0xc9d4a 0xca3e9 0x12af38f 0x12af5eb 0x12bdb2b 0x12af38f 0x12af5eb 0x12b04ed 0x121da0c 0x26b5e99 0x121e464 0x121e495 0x1222fc1 0x121d14b 0x16864ce 0x162bd61 0x16114d0 0x12ae5ab 0x4ab35 0x14ade29 0x14ad133 0x14ae3bf 0x14b0a21 0x14b097c 0x14a93d7 0x268899e 0x261f640 0x25eb4c6 0x25ead84 0x25eac9b 0x2d167d8 0x2d1688a 0x11e6626 0x248d 0x23b5)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-14T03:16:03.813

`+ (NSIndexPath *)indexPathForItem:(NSInteger)item inSection:(NSInteger)section;`是一种仅适用`UICollectionView`于 iOS 6 的方法。您不能在 iOS 5 的 UITableView 中使用它。

你可能正在寻找[`indexPathForRow:inSection:`](http://developer.apple.com/library/ios/documentation/uikit/reference/NSIndexPath_UIKitAdditions/Reference/Reference.html#//apple_ref/occ/clm/NSIndexPath/indexPathForRow:inSection:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-09T06:16:03.880

采用

`[NSIndexPath indexPathForRow:indexRow inSection:indexSection];`

代替

`[NSIndexPath indexPathForItem:indexRow inSection:indexSection];`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T02:31:56.107

它必须是在 iOS6 中添加的方法，因为它在位于此处的 iOS5 文档中不存在：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/Reference/Reference.html)

编辑：此方法仅适用于集合视图，不适用于 UITableView。iOS 5 不支持集合视图

# mysql - 复杂的sql分组和排序

> ID：12417271
> 
> 赞同：3
> 
> 时间：2012-09-14T02:12:51.513
> 
> 标签：mysql, sql, sorting, grouping

我在对每日时间记录中的数据进行分组和排序以自动生成报告时遇到问题。DTR的表结构如下：

```
LogDate LogTime EmployeeName LogType
2012-09-14 10:48:04 SALITA, LYNYRD ANTONIO 注销
2012-09-14 09:39:29 SALITA，LYNYRD ANTONIO 注销
2012-09-14 09:39:19 SALITA, LYNYRD ANTONIO 登录
2012-09-14 09:35:25 SALITA，LYNYRD ANTONIO 注销
2012-09-14 09:35:13 SALITA, LYNYRD ANTONIO 登录
2012-09-14 08:10:00 SALITA，LYNYRD ANTONIO 登录
2012-09-13 17:00:00 SALITA，LYNYRD ANTONIO 注销
2012-09-13 08:05:00 SALITA, LYNYRD ANTONIO 登录
2012-09-12 17:05:00 SALITA，LYNYRD ANTONIO 注销
2012-09-12 08:05:00 SALITA, LYNYRD ANTONIO 登录
2012-07-10 17:00:00 MAG-ISA，美宝莲登出
2012-07-10 17:00:00 BELO，里约热内卢注销
2012-07-10 17:00:00 卡西诺，保罗登出
2012-07-10 17:00:00 SALITA，LYNYRD ANTONIO 注销
2012-07-10 17:00:00 AURENO，莉亚登出
2012-07-10 17:00:00 加西亚，阿尔文登出
2012-07-10 17:00:00 TARINE，凯伦登出
2012-07-10 17:00:00 REYES，ANDREA 注销
2012-07-10 17:00:00 纳瓦罗，克里斯蒂娜 注销
2012-07-10 10:30:00 MAG-ISA，美宝莲登录
2012-07-10 08:00:00 SALITA，LYNYRD ANTONIO 登录
2012-07-10 08:00:00 卡西诺，保罗登录
2012-07-10 08:00:00 贝洛，里约登录
2012-07-10 07:40:00 AURENO，莉亚登录
2012-07-10 07:30:00 加西亚，阿尔文登录
2012-07-10 07:25:00 TARINE，凯伦登录
2012-07-10 07:10:00 纳瓦罗，克里斯蒂娜登录
2012-07-10 07:10:00 REYES，ANDREA 登录

```

使用这个 sql：

```
SELECT 
    DATE_FORMAT(LogDate, '%d/%c/%Y') AS LogDate, 
    EmployeeName,
    (GROUP_Concat(CASE LogType WHEN 'LOGIN' THEN LogTime END)) AS LOGIN,
    (GROUP_Concat(CASE LogType WHEN 'LOGOUT' THEN LogTime END)) AS LOGOUT
FROM myTable
GROUP BY LogDate, EmployeeName
ORDER BY LogDate desc; 
```

我能够产生这个结果

```
LogDate EmployeeName 登录 注销
2012-09-14 SALITA, LYNYRD ANTONIO 08:10:00,09:35:13,09:39:19 09:35:25,09:39:29,10:48:04
2012-09-13 SALITA, LYNYRD 安东尼奥 08:05:00 17:00:00
2012-09-12 SALITA, LYNYRD 安东尼奥 08:05:00 17:05:00
2012-07-10 雷耶斯，安德烈亚 07:10:00 17:00:00
2012-07-10 纳瓦罗，克里斯蒂娜 07:10:00 17:00:00
2012-07-10 塔林，凯伦 07:25:00 17:00:00
2012-07-10 加西亚，阿尔文 07:30:00 17:00:00
2012-07-10 奥雷诺，莉亚 07:40:00 17:00:00
2012-07-10 卡西诺，保罗 08:00:00 17:00:00
2012-07-10 萨利塔，林尼德安东尼奥 08:00:00 17:00:00
2012-07-10 贝洛，里约热内卢 08:00:00 17:00:00
2012-07-10 MAG-ISA, MAYBELLE 10:30:00 17:00:00

```

根据其中一个答案，这是代码：

```
SELECT DATE_FORMAT(t1.LogDate, '%d/%c/%Y') AS LogDate, t1.EmployeeName
     , t1.LogTime AS Login
     , ( SELECT MIN(t2.LogTime) FROM myTable t2
          WHERE t2.LogType = 'LOGOUT'
            AND t2.LogDate = t1.LogDate
            AND t2.EmployeeName = t1.EmployeeName
            AND t2.LogTime > t1.LogTime ) AS Logout
  FROM myTable t1
 WHERE t1.LogType = 'LOGIN' 
```

它产生了这个结果：

```
LogDate EmployeeName 登录 注销
2012-09-14 SALITA, LYNYRD 安东尼奥 08:10:00 09:35:25
2012-09-14 萨利塔，林尼德安东尼奥 09:35:13 09:35:25
2012-09-14 SALITA, LYNYRD ANTONIO 09:39:19 09:39:29
2012-09-13 SALITA, LYNYRD 安东尼奥 08:05:00 17:00:00
2012-09-12 SALITA, LYNYRD 安东尼奥 08:05:00 17:05:00
2012-07-10 雷耶斯，安德烈亚 07:10:00 17:00:00
2012-07-10 纳瓦罗，克里斯蒂娜 07:10:00 17:00:00
2012-07-10 塔林，凯伦 07:25:00 17:00:00
2012-07-10 加西亚，阿尔文 07:30:00 17:00:00
2012-07-10 奥雷诺，莉亚 07:40:00 17:00:00
2012-07-10 卡西诺，保罗 08:00:00 17:00:00
2012-07-10 萨利塔，林尼德安东尼奥 08:00:00 17:00:00
2012-07-10 贝洛，里约热内卢 08:00:00 17:00:00
2012-07-10 MAG-ISA, MAYBELLE 10:30:00 17:00:00

```

有没有办法让结果像这样排序？

```
LogDate EmployeeName 登录 注销
2012-09-14 SALITA，LYNYRD ANTONIO 08:10:00 NULL
2012-09-14 萨利塔，林尼德安东尼奥 09:35:13 09:35:25
2012-09-14 SALITA, LYNYRD ANTONIO 09:39:19 09:39:29
2012-09-14 SALITA，LYNYRD ANTONIO NULL 10:48:04
2012-09-13 SALITA, LYNYRD 安东尼奥 08:05:00 17:00:00
2012-09-12 SALITA, LYNYRD 安东尼奥 08:05:00 17:05:00
2012-07-10 雷耶斯，安德烈亚 07:10:00 17:00:00
2012-07-10 纳瓦罗，克里斯蒂娜 07:10:00 17:00:00
2012-07-10 塔林，凯伦 07:25:00 17:00:00
2012-07-10 加西亚，阿尔文 07:30:00 17:00:00
2012-07-10 奥雷诺，莉亚 07:40:00 17:00:00
2012-07-10 卡西诺，保罗 08:00:00 17:00:00
2012-07-10 萨利塔，林尼德安东尼奥 08:00:00 17:00:00
2012-07-10 贝洛，里约热内卢 08:00:00 17:00:00
2012-07-10 MAG-ISA, MAYBELLE 10:30:00 17:00:00

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T02:32:14.973

像这样的东西：

```
SELECT DATE_FORMAT(t1.LogDate, '%d/%c/%Y') AS LogDate, t1.EmployeeName
     , t1.LogTime AS Login
     , ( SELECT MIN(t2.LogTime) FROM myTable t2
          WHERE t2.LogType = 'LOGOUT'
            AND t2.LogDate = t1.LogDate
            AND t2.EmployeeName = t1.EmployeeName
            AND t2.LogTime > t1.LogTime ) AS Logout
  FROM myTable t1
 WHERE t1.LogType = 'LOGIN' 
```

没有 GROUP BY 真的是必要的，因为你实际上并没有对任何东西进行分组。

# c# - BindingList 到 ArrayList 会产生运行时错误

> ID：12417274
> 
> 赞同：0
> 
> 时间：2012-09-14T02:13:27.160
> 
> 标签：c#, vb.net, arraylist, bindinglist

我正在尝试使用 ArrayList，并将其绑定到 BindingList ...

如果我尝试将其放入（我有 Option Strict On），我会收到我实施的转换建议 -

然而，无论我尝试什么，我都会遇到运行时错误。

```
Unable to cast object of type 'ArrayList' to type 'IList` 
```

编码：

```
Dim myBoundList As System.ComponentModel.BindingList(Of something) =
    New System.ComponentModel.BindingList(Of something)
      (CType(myArrayList, System.Collections.Generic.IList(Of something))) 
```

我试图插入 .ToArray ...

[链接https://stackoverflow.com/a/8770832/1217150](https://stackoverflow.com/a/8770832/1217150)上接受的答案完全相同（即使意图相反），我已经尝试过了......（我的意思是，创建一个 IList 项目, 并赋值

```
IList iList = new ArrayList(); 
```

它给了我同样的错误......

我正在使用 VB.NET，但 c# 也会有所帮助。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:31:53.437

您应该使用泛型`List`类（一种 .NET 类型）而不是使用非泛型`ArrayList`. 我怀疑这可能与您的问题有关。它可能试图将非泛型`ArrayList`转换为`IList<T>`（IList 的**泛型**版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:34:52.383

如果您尝试将数组列表作为项目添加到列表框中，可以使用以下代码：

```
private void Form1_Load(object sender, EventArgs e)
{
    // Create a new array list.
    ArrayList list = new ArrayList();

    // Add items to the array list
    list.Add("MyItem1");
    list.Add("MyItem2");
    list.Add("MyItem3");

    //Set the data source of the listbox as the array list
    listBox1.DataSource = list;
} 
```

# java - 应该使用哪个变量声明？

> ID：12417277
> 
> 赞同：0
> 
> 时间：2012-09-14T02:14:18.577
> 
> 标签：java, variables

我想写出完美的Java代码，所以请让我问这个问题。

我想`String`在我的方法中使用一个永不改变的变量，如下所示：

```
1\. String STR4SEARCH_START = "Abc"; 
```

我可以在我的方法中定义它，因为它不需要更改，我也可以在我的类中定义它，如下所示：

```
2\. private final String STR4SEARCH_START = "Abc";
3\. private static final String STR4SEARCH_START = "Abc";
4\. public final String STR4SEARCH_START = "Abc";
5\. public static final String STR4SEARCH_START = "Abc"; 
```

这是我的**问题**：从way1-way5，哪一个是最好的，你能解释一下为什么吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T02:16:24.923

这取决于。如果您希望其他人（班外）能够查看它，请使用`public`not `private`，反之亦然。除此之外，我肯定会使用`static final`，因为您本质上想要定义一个不变的常数，正如您所说。`static`因为你的类的每个实例化都不需要不同的值，而且`final`它的值不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T02:19:16.547

因为它永远不会改变，你不需要在你的所有类实例中复制一个以上的副本，所以让它成为静态的。

同样，因为它永远不会改变，所以让它成为最终的，这样如果代码确实试图改变它，编译器就会报告一个错误。（也可能有运行时性能优势）。

它应该是公共的还是私有的取决于您是否需要将它公开给其他类。首选私有，仅在必要时才公开。

因此，无论是私有静态最终还是公共静态最终（如有必要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T02:22:30.267

```
I want to use a never change String variable 
```

根据您的要求，我建议您创建一个名为 ConstantCodes.java 的类。这个类将在其中存储所有这些类型的变量。您可以在其中声明变量，如下所示。您可以声明变量，`final`因为它的值不会改变。

```
public class ConstantCodes 
{
     public static final String STR4SEARCH_START = "Abc";
     ...
     ...
} 
```

您可以从如下任何类直接访问此变量，

```
String myNewVariable = ConstantCodes.STR4SEARCH_START; 
```

# iphone - 保存到 MySql 数据库时的 JSON 框架

> ID：12417279
> 
> 赞同：1
> 
> 时间：2012-09-14T02:14:36.830
> 
> 标签：iphone, objective-c, ios, xcode

好的，我仍在学习 JSON 框架和目标 c.. 但我的问题是我有一个来自 godaddy 的 php/MySQL 服务器，基本上我要做的是创建一个用户注册，它从我的 IOS 注册表单发送该数据将 MySQL 数据库导入到我的注册表中。当用户完成输入用户名、密码等后，发布信息的最佳方式是什么。我对解决此问题的最佳方法感到困惑。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:39:23.227

[AFNetworking](https://github.com/AFNetworking/AFNetworking)是您最好的朋友。

# excel - Excel VLOOKUP函数源代码

> ID：12417283
> 
> 赞同：2
> 
> 时间：2012-09-14T02:15:08.483
> 
> 标签：excel, excel-formula, vlookup, vba

无论如何我可以在excel（VBA）中找到函数VLOOKUP的源代码以便我可以修改它？谷歌没有给我任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T02:35:22.487

Excel/VBA 不是开源的，因此特定函数的源代码不可用。

您可以在 VBA 中编写自己的 UDF（用户定义函数）来生成修改后的版本。

[在http://www.cpearson.com/Excel/FlexLookup.aspx](http://www.cpearson.com/Excel/FlexLookup.aspx)还有一个更灵活（非 VBA）版本的 VLOOKUP/HLOOKUP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-02T13:33:37.670

根据对我不起作用的 Vahid 的回答，我做了以下有效的代码：

```
Function CUSTOMVLOOKUP(lookup_value As String, table_array As Range, col_index_num As Integer)
    Dim i As Long
    For i = 1 To table_array.Rows.Count
        If lookup_value = table_array.Cells(i, 1) Then
            CUSTOMVLOOKUP = table_array.Cells(i, col_index_num)
            Exit For
        End If
    Next i
End Function 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-10-31T12:01:13.787

这是 Vlookup 的简单实现：

```
 Public Function VLOOKUP1(ByVal lookup_value As String, ByVal table_array As Range, ByVal col_index_num As Integer) As String
        Dim i As Long

        For i = 1 To table_array.Rows.Count
            If lookup_value = table_array.Cells(table_array.Row + i - 1, 1) Then
                VLOOKUP1 = table_array.Cells(table_array.Row + i - 1, col_index_num)
                Exit For
            End If
        Next i

        End Function 
```

# ruby-on-rails - Nokogiri - 选择非隐藏输入

> ID：12417286
> 
> 赞同：0
> 
> 时间：2012-09-14T02:15:26.847
> 
> 标签：ruby-on-rails, ruby, nokogiri

我有选择输入元素的代码：

```
html = html.at_css("input") 
```

我需要如何修改选择器以从选择 ( `type="hidden"`) 中排除隐藏的输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:27:43.900

我相信这就是你想要的：

```
html.at_xpath("//input[not (@type='hidden')]") 
```

刚刚用一个简单的例子对此进行了测试，它似乎有效。

# dotnetnuke - 如何禁用（或隐藏）用户角色的 DotNetNuke 布局模式？

> ID：12417288
> 
> 赞同：0
> 
> 时间：2012-09-14T02:15:58.763
> 
> 标签：dotnetnuke

这应该是一个简单的任务，但是谷歌搜索没有帮助。

当我在 dnn 中以管理员身份登录时，顶部有控制功能区，左上角有 Mode: 单选按钮。这些是查看、编辑和布局。

是否有可能使布局选择成为不可能？隐藏或禁用管理员？我们已经遇到了一些问题，因为人们选择了这个选项，他们无意中拖放模块，弄乱了布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:44:28.177

为此，您可能需要修改控制面板代码，或创建自己的控制面板，否则我想不出任何方法。

# visual-c++ - 重新定义；多重初始化

> ID：12417289
> 
> 赞同：2
> 
> 时间：2012-09-14T02:16:04.600
> 
> 标签：visual-c++, visual-studio-2005, c++-cli, visual-c++-2005

我正在编写一个程序，其中包含在 Visual Studio 2005 中使用 C++/CLI 的辅助表单。到目前为止，由于一对没有多大意义的重新定义错误，我没有取得太大进展。

```
Mode.h(12) : error C2374: 'NameManipulator::check' : redefinition; multiple initialization
Mode.h(12) : see declaration of 'NameManipulator::check'
Mode.h(22) : error C2011: 'NameManipulator::Mode' : 'class' type redefinition
Mode.h(22) : see declaration of 'NameManipulator::Mode' 
```

我只在一个命名空间中声明了这些中的每一个。一个甚至是由编译器预先生成的。除了从头开始之外，我还能做些什么来解决这个问题？任何帮助将非常感激。（代码如下）

```
using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

namespace NameManipulator {
int check = 4;
/// <summary>
/// Summary for Mode
///
/// WARNING: If you change the name of this class, you will need to change the
///          'Resource File Name' property for the managed resource compiler tool
///          associated with all .resx files this class depends on.  Otherwise,
///          the designers will not be able to interact properly with localized
///          resources associated with this form.
/// </summary>
public ref class Mode : public System::Windows::Forms::Form
{
public:
    Mode(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Mode()
    {
        if (components)
        {
            delete components;
        }
    }
public: System::Windows::Forms::RadioButton^  rdoAllCaps;
public: System::Windows::Forms::RadioButton^  rdoAllLow;
public: System::Windows::Forms::RadioButton^  rdoReverse;
public: System::Windows::Forms::RadioButton^  rdoNormal;
private: System::Windows::Forms::Button^  btnOK;
protected: 

private:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->rdoAllCaps = (gcnew System::Windows::Forms::RadioButton());
        this->rdoAllLow = (gcnew System::Windows::Forms::RadioButton());
        this->rdoReverse = (gcnew System::Windows::Forms::RadioButton());
        this->rdoNormal = (gcnew System::Windows::Forms::RadioButton());
        this->btnOK = (gcnew System::Windows::Forms::Button());
        this->SuspendLayout();
        // 
        // rdoAllCaps
        // 
        this->rdoAllCaps->AutoSize = true;
        this->rdoAllCaps->Location = System::Drawing::Point(12, 12);
        this->rdoAllCaps->Name = L"rdoAllCaps";
        this->rdoAllCaps->Size = System::Drawing::Size(75, 17);
        this->rdoAllCaps->TabIndex = 0;
        this->rdoAllCaps->Text = L"ALL CAPS";
        this->rdoAllCaps->UseVisualStyleBackColor = true;
        // 
        // rdoAllLow
        // 
        this->rdoAllLow->AutoSize = true;
        this->rdoAllLow->Location = System::Drawing::Point(12, 35);
        this->rdoAllLow->Name = L"rdoAllLow";
        this->rdoAllLow->Size = System::Drawing::Size(63, 17);
        this->rdoAllLow->TabIndex = 1;
        this->rdoAllLow->Text = L"all lower";
        this->rdoAllLow->UseVisualStyleBackColor = true;
        this->rdoAllLow->CheckedChanged += gcnew System::EventHandler(this, &Mode::rdoAllLow_CheckedChanged);
        // 
        // rdoReverse
        // 
        this->rdoReverse->AutoSize = true;
        this->rdoReverse->Location = System::Drawing::Point(12, 58);
        this->rdoReverse->Name = L"rdoReverse";
        this->rdoReverse->Size = System::Drawing::Size(71, 17);
        this->rdoReverse->TabIndex = 2;
        this->rdoReverse->Text = L"rEVERSE";
        this->rdoReverse->UseVisualStyleBackColor = true;
        this->rdoReverse->CheckedChanged += gcnew System::EventHandler(this, &Mode::rdoReverse_CheckedChanged);
        // 
        // rdoNormal
        // 
        this->rdoNormal->AutoSize = true;
        this->rdoNormal->Checked = true;
        this->rdoNormal->Location = System::Drawing::Point(12, 81);
        this->rdoNormal->Name = L"rdoNormal";
        this->rdoNormal->Size = System::Drawing::Size(73, 17);
        this->rdoNormal->TabIndex = 3;
        this->rdoNormal->TabStop = true;
        this->rdoNormal->Text = L"rdoNormal";
        this->rdoNormal->UseVisualStyleBackColor = true;
        // 
        // btnOK
        // 
        this->btnOK->DialogResult = System::Windows::Forms::DialogResult::OK;
        this->btnOK->Location = System::Drawing::Point(32, 106);
        this->btnOK->Name = L"btnOK";
        this->btnOK->Size = System::Drawing::Size(33, 23);
        this->btnOK->TabIndex = 4;
        this->btnOK->Text = L"OK";
        this->btnOK->UseVisualStyleBackColor = true;
        // 
        // Mode
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(99, 138);
        this->ControlBox = false;
        this->Controls->Add(this->btnOK);
        this->Controls->Add(this->rdoNormal);
        this->Controls->Add(this->rdoReverse);
        this->Controls->Add(this->rdoAllLow);
        this->Controls->Add(this->rdoAllCaps);
        this->FormBorderStyle = System::Windows::Forms::FormBorderStyle::FixedSingle;
        this->Name = L"Mode";
        this->StartPosition = System::Windows::Forms::FormStartPosition::CenterParent;
        this->Text = L"Mode";
        this->Load += gcnew System::EventHandler(this, &Mode::Mode_Load);
        this->ResumeLayout(false);
        this->PerformLayout();

    }
#pragma endregion
private: System::Void rdoReverse_CheckedChanged(System::Object^  sender, System::EventArgs^  e){
             if (rdoReverse->Checked == true)
                 check = 3;
         }
private: System::Void Mode_Load(System::Object^  sender, System::EventArgs^  e) {
         }
private: System::Void rdoAllLow_CheckedChanged(System::Object^  sender, System::EventArgs^  e) {
         }
};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:55:00.900

您的错误是您在头文件中*定义*了变量：`check`

```
namespace NameManipulator {
    int check = 4;
    // Error in the line above 
```

将其更改为声明，如下所示：

```
namespace NameManipulator {
    extern int check; 
```

并在源文件中添加定义：

```
int NameManipulator::check = 4; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T23:16:39.437

当您使用多个模块（.h 和 .cpp 文件）时，重新定义错误可能会发生在简单的事情上，例如拼写错误。我犯的错误如下：

```
#ifndef NAMESPACE_FILENAME_H
#define NAMESPACE_FILEMANE_H
#include <iostream>
#include "helperFile.h"

/* you code and stuff here  */

#endif 
```

我们使用**#ifndef**和**#endif**，因此编译器可以忽略不同文件上的多个声明，并且只有一个定义实例。现在，如果你回到我声明的第二行。我做了一个错字 fileMane 而不是文件名。编译器会以你的方式经历很多错误，除了这个。所以，是的，请注意错别字！

PS：课程费用：用细齿梳检查我的代码需要 5 小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-28T05:11:33.707

[![Visual Studio 2019 社区](../Images/b829946c99464a44a9156e29bf4f5b4d.png)](https://i.stack.imgur.com/rDBzj.png)

如果多个项目源文件具有同名的全局变量，将 Enable Unity (JUMBO) Build 设置为 YES 也会导致发生此错误。

# php - 联系方式，PHP 不向 AJAX 返回字符串

> ID：12417290
> 
> 赞同：0
> 
> 时间：2012-09-14T02:16:09.013
> 
> 标签：php, ajax, forms, cross-domain, contact

我的托管服务器上有 AJAX 联系表，不同域（另一个托管）上有 mail.php 文件。我正在尝试使用 jQuery 验证表单并使用 AJAX 发送电子邮件，但是当我调用 php 文件时，它会将电子邮件发送到邮箱，但不返回“成功”消息。相反，我得到“一个空字符串”。

我有 js

```
 $.ajax({
    type: 'POST',
    url: options.url,
    data: {subject:options.subject, name:$('#name').val(), email:$('#email').val(), message:$('#message').val()},
    success: function(data){
       if( data == 'success') {
           $('#callback').append(options.recievedMsg);
       } else {
           $('#callback').append(options.notRecievedMsg);
       }
    }); 
```

而php看起来像这样

```
 <?php
    define( "RECIPIENT_NAME", "John Smith" );
    define( "RECIPIENT_EMAIL", "my.email@mail.com" );
    define( "EMAIL_SUBJECT", "Visitor Message" );

    $senderName = stripcslashes($_POST['name']);
    $senderEmail = stripcslashes($_POST['email']);
    $message = stripcslashes($_POST['message']);

    if ( $senderName && $senderEmail && $message ) {
        $recipient = RECIPIENT_NAME . " <" . RECIPIENT_EMAIL . ">";
        $headers = "From: " . $senderName . " <" . $senderEmail . ">";
        $success = mail( $recipient, EMAIL_SUBJECT, $message, $headers );
    };

    echo 'success';

    ?> 
```

当我检查控制台“数据”值时，它显示（一个空字符串），并且在 ajax if 函数中我总是得到 false 和 notReceived 消息。

如何使 php 文件返回 if(data == 'success') 状态为 true 的 'success'？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:22:58.920

[由于同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您不能向另一个域发送 AJAX 请求。

# java - 将文本文件从 URL 直接发送到扫描仪

> ID：12417292
> 
> 赞同：0
> 
> 时间：2012-09-14T02:16:26.050
> 
> 标签：java, download, java.util.scanner

我正在使用 java，目前，我可以从 Internet 下载文本文件，读取该文件，然后将该文件发送到`Scanner`. 是否可以跳过将其写入硬盘并将其直接发送到扫描仪？我尝试更改一些代码，但没有成功。

```
URL link = new URL("http://shayconcepts.com/programming/ComicDownloader/version.txt");
ReadableByteChannel rbc = Channels.newChannel(link.openStream());//Gets the html page
FileOutputStream fos = new FileOutputStream("version.txt");//Creates the output name of the output file to be saved to the computer
fos.getChannel().transferFrom(rbc, 0, 1 << 24);
fos.close();
Scanner sc = new Scanner(new FileReader("version.txt")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T02:26:37.733

是的，这绝对是可能的。就像你说的那样做：将来自 URL 的输入流直接馈送到扫描仪中。

```
Scanner sc = new Scanner(link.openStream()); 
```

它也有一个[接受输入流的构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner%28java.io.InputStream%29)。顺便说一下，它接受[charset 作为第二个参数](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner%28java.io.InputStream,%20java.lang.String%29)，如果文本文件的字符编码可能与平台默认字符编码不同，您可能希望使用它，否则您可能会冒[Mojibake](http://en.wikipedia.org/wiki/Mojibake)的风险。

```
Scanner sc = new Scanner(link.openStream(), "UTF-8"); 
```

# api - 使用来自第三方 api 调用的响应对象

> ID：12417294
> 
> 赞同：1
> 
> 时间：2012-09-14T02:16:45.943
> 
> 标签：api, web-applications

在创建 Web 应用程序时，如果我们使用第三方 api 调用，它们本身提供响应对象，那么直接在视图/模型中使用这些响应对象是一个好主意吗？或者我们是否需要创建一个模型对象来从这些响应对象中复制数据，以便将它们与第三方对象解耦？除了响应对象中已经存在的数据之外，即使没有要添加的其他数据属性，是否总是需要这种解耦？这些响应对象似乎也没有 setter 方法，而只有 read 方法？这些信息是否会以任何方式改变设计决策？这里有什么好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:57:25.237

在构建模型对象时，我不会依赖外部响应对象。如果模型对象需要响应中的属性，我会改为传递属性。这有助于在测试期间轻松模拟模型对象。

当涉及到视图对象时，我认为在渲染过程中依赖响应对象从它们中提取属性是可以的。

我的两分钱！

# asp.net - 静态 UICulture 设置和隐式本地化的问题

> ID：12417298
> 
> 赞同：1
> 
> 时间：2012-09-14T02:17:12.010
> 
> 标签：asp.net, vb.net, visual-studio-2010, localization, culture

我正在通过 VS2010 在我的 Win7 机器上玩隐式本地化，但有些东西似乎不太对劲。我有一个简单的页面，我将 GO Button 的 resourceKey 设置为“bnGO”：

```
<%@ Page Language="VB" culture="auto" meta:resourcekey="PageResource1" uiculture="es" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Test Implicit Localization</title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:Button ID="bnGO" runat="server" meta:resourcekey="bnGO" />
    </form>
</body>
</html> 
```

然后我有 testForm.aspx.resx 和 testForm.es.aspx.resx 文件，它们适当地设置了 bnGO.Text 的值：

![英文本地资源文件](../Images/fd46a83cc1c7c30e652c8a80b6584378.png) ![西班牙本地资源文件](../Images/930aa6f6dae12e7490aee344abb9e4b5.png)

当我运行应用程序时，GO 按钮显示“Go Forth！” 默认 testForm.aspx.resx 中定义的文本，即使 testForm.aspx 的 uiculture 设置为“es”（我*认为*是西班牙语）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:23:46.553

文件名应为：

```
testForm.aspx.es.resx 
```

* * *

不是

```
testForm.es.aspx.resx 
```

# sql-server - 选择范围内每个月的前 5 个 SUM（每个客户一个）

> ID：12417305
> 
> 赞同：3
> 
> 时间：2012-09-14T02:18:16.243
> 
> 标签：sql-server, aggregate, ranking

我有一个查询，可以为客户提取月/年总计，并添加 ntile 排名。如果我能够提取 ntile 1、2、3、4 和 5 的最大小计，我几乎会得到我想要的，但我不知道如何继续。

例如，我想要的结果看起来像：

```
Month   Year   CustomerCode   SubTotal   ntile
1       2012   CCC            131.45     1
1       2012   CCC            342.95     2
1       2012   ELITE          643.92     3
1       2012   CCC            1454.05    4
1       2012   CCC            12971.78   5
2       2012   CCC            135.99     1
2       2012   CCI            370.47     2
2       2012   NOC            766.84     3
2       2012   ELITE          1428.26    4
2       2012   VBC            5073.20    5
3       2012   CCC            119.02     1
3       2012   CCC            323.78     2
3       2012   HUCC           759.66     3
3       2012   ELITE          1402.95    4
3       2012   CCC            7964.20    5 
```

除了 - 我希望排名会像第 2 个月那样不同的客户，但我的基本查询并没有给我这个结果 - 我显然不知道如何在 SQL SERVER 2005 上的 T-SQL 中得到它 - 事实上我'我不确定我得到了什么。

我的下一个选择是在 C# 中拉出一个 DataTable 并做一些体操来到达那里，但必须有一个更简单的方法:)

我的基本查询是

```
SELECT 
i.DateOrdered
,LTRIM(STR(DATEPART(MONTH,i.DateOrdered))) AS [Month]   
,LTRIM(STR(YEAR(i.Dateordered))) AS [Year]   
,c.CustomerCode 
,SUM(i.Jobprice) AS Subtotal  
,NTILE(5) OVER(ORDER BY SUM(i.JobPrice)) AS [ntile]
FROM Invoices i 
JOIN 
Customers c 
ON i.CustomerID = c.ID 
WHERE i.DateOrdered >= '1/1/2012'
AND i.DateOrdered <= '9/30/2012' 
GROUP BY YEAR(i.DateOrdered),  MONTH(i.DateOrdered), i.DateOrdered, c.CustomerCode
ORDER BY LTRIM(STR(DATEPART(MONTH,i.DateOrdered))),   
TRIM(STR(YEAR(i.Dateordered))),     
SUM(i.JobPrice), c.CustomerCode ASC 
```

我真的很感激帮助把这件事做好。

提前致谢

悬崖

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:05:23.087

If I read you correctly, what you are after is

For each month in the range,
Show 5 customers who have the greatest SUMs in that month
And against each customer, show the corresponding SUM.

In that case, this [SQL Fiddle](http://www.sqlfiddle.com/#!3/3ac4a/4/0) creates a sample table and runs the query that gives you the output described above. If you wanted to see what's in the created tables, just do simple SELECTs on the right panel.

The query is:

```
;     WITH G as -- grouped by month and customer
(
    SELECT DATEADD(D,1-DAY(i.DateOrdered),i.DateOrdered) [Month],
           c.CustomerCode,
           SUM(i.Jobprice) Subtotal
      FROM Invoices i
      JOIN Customers c ON i.CustomerID = c.ID
     WHERE i.DateOrdered >= '1/1/2012' AND i.DateOrdered <= '9/30/2012'
  GROUP BY DATEADD(D,1-DAY(i.DateOrdered),i.DateOrdered), c.CustomerCode
)
    SELECT MONTH([Month]) [Month],
           YEAR([Month]) [Year],
           CustomerCode,
           SubTotal,
           Rnk [Rank]
      FROM
(
    SELECT *, RANK() OVER (partition by [Month] order by Subtotal desc) Rnk
      FROM G
) X
     WHERE Rnk <= 5
  ORDER BY Month, Rnk 
```

To explain, the first part (WITH block) is just a fancy way of writing a subquery, that GROUPs the data by month and Customer. The expression `DATEADD(D,1-DAY(i.DateOrdered),i.DateOrdered)` turns every date into the FIRST day of that month, so that the data can be easily grouped by month. The next subquery written in traditional form adds a RANK column within each month by the subtotal, which is finally SELECTed to give the top 5*.

Note that RANK allows for equal rankings, which may end up showing 6 customers for a month, if 3 of them are ranked equally at position 4\. If that is not what you want, then you can change the word `RANK` to `ROW_NUMBER` which will randomly tie-break between equal Subtotals.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:44:55.790

Try this:

```
declare @tab table
(
[month] int,
[year] int,
CustomerCode varchar(20),
SubTotal float 
)
insert into @tab
select
1,2012,'ccc',131.45 union all 
select
1,2012,'ccc',343.45 union all
select 
1,2012,'ELITE',643.92 union all
select 
2,2012,'ccc',131.45 union all 
select
2,2012,'ccc',343.45 union all
select 
2,2012,'ELITE',643.92 union all
select 
3,2012,'ccc',131.45 union all 
select
3,2012,'ccc',343.45 union all
select 
3,2012,'ELITE',643.92

;with cte as 
(
 select NTILE(3) OVER(partition by [month] ORDER BY [month]) AS [ntile],* from @tab
)
select * from cte 
```

Even in your base query you need to add `partition by`, so that you will get correct output.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T07:18:53.287

The query needs to be modified to only get the month and year dateparts. The issue you are having with the same customer showing multiple times in the same month is due to the inclusion of i.DateOrdered in the select and group by clauses.

The following query should give you what you need. Also, I suspect it is a typo on the next to last line of the query, but tsql doesn't have a TRIM() function only LTRIM and RTRIM.

```
SELECT 

LTRIM(STR(DATEPART(MONTH,i.DateOrdered))) AS [Month]   
,LTRIM(STR(YEAR(i.Dateordered))) AS [Year]   
,c.CustomerCode 
,SUM(i.Jobprice) AS Subtotal  
,NTILE(5) OVER(ORDER BY SUM(i.JobPrice)) AS [ntile]
FROM Invoices i 
JOIN 
Customers c 
ON i.CustomerID = c.ID 
WHERE i.DateOrdered >= '1/1/2012'
AND i.DateOrdered <= '9/30/2012' 
GROUP BY YEAR(i.DateOrdered),  MONTH(i.DateOrdered),  c.CustomerCode
ORDER BY LTRIM(STR(DATEPART(MONTH,i.DateOrdered))),   
LTRIM(STR(YEAR(i.Dateordered))),     
SUM(i.JobPrice), c.CustomerCode ASC 
```

This gives these results

```
Month   Year    CustomerCode    Subtotal    ntile
 1      2012    ELITE            643.92      2
 1      2012    CCC            14900.23      5
 2      2012    CCC              135.99      1
 2      2012    CCI              370.47      1
 2      2012    NOC              766.84      3
 2      2012    ELITE           1428.26      4
 2      2012    VBC             5073.20      4
 3      2012    HUCC             759.66      2
 3      2012    ELITE           1402.95      3
 3      2012    CCC             8407.00      5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:39:45.827

I can't see how to solve this problem without *double* ranking:

1.  You need to get the largest sums per customer & month.

2.  You then need, for every month, to retrieve the top five of the found sums.

Here's how I would approach this:

```
;
WITH MaxSubtotals AS (
  SELECT DISTINCT
    CustomerID,
    MonthDate = DATEADD(MONTH, DATEDIFF(MONTH, 0, DateOrdered), 0),
    Subtotal  = MAX(SUM(JobPrice)) OVER (
      PARTITION BY Customer, DATEADD(MONTH, DATEDIFF(MONTH, 0, DateOrdered), 0)
      ORDER BY SUM(JobPrice)
    )
  FROM Invoices
  GROUP BY
    CustomerID,
    DateOrdered
),
TotalsRanked AS (
  SELECT
    CustomerID,
    MonthDate,
    Subtotal,
    Ranking = ROW_NUMBER() OVER (PARTITION BY MonthDate ORDER BY Subtotal DESC)
  FROM MaxDailyTotals
)
SELECT
  Month = MONTH(i.MonthDate),
  Year  = YEAR(i.MonthDate),
  c.CustomerCode,
  i.Subtotal,
  i.Ranking
FROM TotalsRanked i
  INNER JOIN Customers ON i.CustomerID = c.ID
WHERE i.Ranking <= 5
; 
```

The first CTE, `MaxSubtotals`, determines the maximum subtotals per customer & month. Involving `DISTINCT` and a window aggregating function, it is essentially a "shortcut" for the following two-step query:

```
SELECT
  CustomerID,
  MonthDate,
  Subtotal = MAX(Subtotal)
FROM (
  SELECT
    CustomerID,
    MonthDate = DATEADD(MONTH, DATEDIFF(MONTH, 0, DateOrdered), 0),
    Subtotal = SUM(JobPrice)
  FROM Invoices
  GROUP BY
    CustomerID,
    DateOrdered
) s
GROUP BY
  CustomerID,
  MonthDate 
```

The other CTE, `TotalsRanked`, simply adds ranking numbers for the found susbtotals, partitioning by customer and month. As a final step, you only need to limit the rows to those that have rankings not greater than 5 (or whatever you might choose another time).

Note that using `ROW_NUMBER()` to rank the rows in this case guarantees that you'll get no more than 5 rows with the `Ranking <= 5` filter. If there were two or more rows with the same subtotal, the would get distinct rankings, and in the end you might end up with an output like this:

```
 Month  Year  CustomerCode  Subtotal  Ranking
   -----  ----  ------------  --------  -------
   1      2012  CCC           1500.00   1
   1      2012  ELITE         1400.00   2
   1      2012  NOC           900.00    3
   1      2012  VBC           700.00    4
   1      2012  HUCC          700.00    5

-- 1      2012  ABC           690.00    6   -- not returned
-- 1      2012  ...           ...       ... 
```

Even though there might be other customers with Subtotals of 700.00 for the same month, they wouldn't be returned, because they would be assigned rankings after 5.

You could use `RANK()` instead of `ROW_NUMBER()` to account for that. But note that you might end up with more than 5 *rows* per month then, with an output like this:

```
 Month  Year  CustomerCode  Subtotal  Ranking
   -----  ----  ------------  --------  -------
   1      2012  CCC           1500.00   1
   1      2012  ELITE         1400.00   2
   1      2012  NOC           900.00    3
   1      2012  VBC           700.00    4
   1      2012  HUCC          700.00    4
   1      2012  ABC           700.00    4

-- 1      2012  DEF           690.00    7   -- not returned
-- 1      2012  ...           ...       ... 
```

Customers with subtotals less than 700.00 wouldn't make it to the output because they would have rankings starting with 7, which would correspond to the ranking of the first under-700.00 sum if ranked by `ROW_NUMBER()`.

And there's another option, `DENSE_RANK()`. You might want to use it if you want up to 5 distinct *sums* per month in your output. With `DENSE_RANK()` your output might contain even more rows per month than it would have with `RANK()`, but the number of distinct subtotals would be exactly 5 (or fewer if the original dataset can't provide you with 5). That is, your output might then look like this:

```
 Month  Year  CustomerCode  Subtotal  Ranking
   -----  ----  ------------  --------  -------
   1      2012  CCC           1500.00   1
   1      2012  ELITE         1400.00   2
   1      2012  NOC           900.00    3
   1      2012  VBC           700.00    4
   1      2012  HUCC          700.00    4
   1      2012  ABC           700.00    4
   1      2012  DEF           650.00    5
   1      2012  GHI           650.00    5
   1      2012  JKL           650.00    5

-- 1      2012  MNO           600.00    5   -- not returned
-- 1      2012  ...           ...       ... 
```

Like `RANK()`, the `DENSE_RANK()` function assigns same rankings to identical values, but, *unlike* `RANK()`, it doesn't produce gaps in the ranking sequence.

* * *

References:

*   [OVER Clause (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189461.aspx)

*   [Ranking Functions (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

# python - Django - 使用通用视图

> ID：12417306
> 
> 赞同：1
> 
> 时间：2012-09-14T02:18:22.900
> 
> 标签：python, django

我正在尝试将 Django 通用视图用于 CRUD。

我找到了两个资源（[1](https://docs.djangoproject.com/en/1.4/intro/tutorial04/)、[2](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/)），并且对最好和最简单的方法感到困惑。

1.  在下面添加到 myapp/urls.py

> ```
> urlpatterns = patterns('',
>     url(r'^$',
>         ListView.as_view(
>             model= Product)),
> ) 
> ```

然后它给出了一个错误，

```
Exception Type: TemplateDoesNotExist
Exception Value:    
myapp/product_list.html 
```

当我创建一个文件 product_list.html 时它起作用了。但是，我必须手动编写模板吗？我肯定不会。

另外，如何装饰它以便只有组的用户可以访问它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T02:30:32.990

装饰器可以像这样在 urlpatterns 中应用：

```
urlpatterns = patterns('',
    url(r'^$', my_decorator(ListView.as_view(model= Product))),
) 
```

是的，您必须手动编写模板。此外，模板的名称默认为 the_model_name_list.html，但您也可以定义自定义模板名称，如下所示：

```
urlpatterns = patterns('',
    url(r'^$', my_decorator(ListView.as_view(model= Product,
                                             template_name="custom_name.html"))),
) 
```

# java - 如何从二进制文件中读取两种不同的列表类型

> ID：12417307
> 
> 赞同：0
> 
> 时间：2012-09-14T02:18:30.103
> 
> 标签：java, list, file-io

我正在尝试从二进制文件中读取两个不同的列表。一个列表是**Flight**类型，另一个是**Customer**类型。我尝试使用**instanceof**运算符，但编译器显示错误 ***无法针对参数化类型列表执行 instanceof 检查。请改用 List 形式，因为更多的泛型类型信息将在运行时被删除。*** 由于必须使用循环读取项目，直到读取所有列表，我不确定如何实现此逻辑。我的代码如下：

```
public static void readFromFile() throws Exception {
    List<Flight> flightList;
    List<Customer> customerList;

    //Create new input stream object
    objInStream = new ObjectInputStream(new FileInputStream(fileLocation));

    //Check if file exists
    if(!fileLocation.exists()) {
        //create new file
        fileLocation.createNewFile();
    }
    Object o;
    while((o = objInStream.readObject()) != null) {
        //Compiler shows error
        if(o instanceof List<Flight>) 
            flightList = (List<Flight>) o;
        else if(o instanceof List<Customer>)
            customerList = o;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:03:45.267

当您声明泛型类型时，您可以获得它。当您使用泛型类型时，它将被删除。例如：

```
public class Generics {
    public <T> T m1(T object){
        return object;
    }
    public void m2(){
        List<Integer> list = new ArrayList<Integer>();
        list.add(1);
    }
} 
```

反编译：m1() 甲板是泛型类型，你可以从类文件中得到它。m2() 使用泛型类型，已删除。

```
public <T extends java/lang/Object> T m1(T);
flags: ACC_PUBLIC
Code:
  stack=1, locals=2, args_size=2
     0: aload_1
     1: areturn
  LineNumberTable:
    line 20: 0
Signature: #15                          // <T:Ljava/lang/Object;>(TT;)TT;

public void m2();
flags: ACC_PUBLIC
Code:
  stack=2, locals=2, args_size=1
     0: new           #2                  // class java/util/ArrayList
     3: dup
     4: invokespecial #3                  // Method java/util/ArrayList."<init>":()V
     7: astore_1
     8: aload_1
     9: iconst_1
    10: invokestatic  #4                  // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
    13: invokeinterface #5,  2            // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
    18: pop
    19: return
  LineNumberTable:
    line 24: 0
    line 25: 8
    line 26: 19 
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T02:26:56.063

您无法检查是否`o`是“ ***_* __ *_***列表”。不过，您可以检查 _ 的元素是否`o`为*_*。或者你可以明确地标记它。

但这是类型擦除的正常结果。泛型只是一个*编译时注解*。您的程序不会在运行时保留泛型！

# iphone - 在 iPhone 中对非常短的词汇进行语音识别的快速方法

> ID：12417315
> 
> 赞同：0
> 
> 时间：2012-09-14T02:19:55.770
> 
> 标签：iphone, ios5, speech-recognition

我正在为研究目的编写应用程序。我需要一种快速的方法来对非常小的词汇（整个字典中的 5 个单词）执行语音识别。我知道许多语音识别框架，如 OpenEars、ATT Watson Speech API、Dragon 等。但这需要你花大量时间阅读。由于我们的应用程序的重点不是语音识别，因此我们希望快速完成。我知道如果我只有 5 个单词，那么我也可以用 5 个选项替换它们，但这不合适。对此有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:48:03.927

OpenEars 开发人员在这里。OpenEars 有一个快速入门教程，可以让您在大约 5-10 分钟内开始识别一个小词汇：[http ://www.politepix.com/openears/tutorial](http://www.politepix.com/openears/tutorial)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-27T10:41:12.250

如果您不介意非 iOS，那么 Voxforge 可能是一个很好的起点。

[http://www.voxforge.org/home/downloads](http://www.voxforge.org/home/downloads)

当我写论文的时候，我也从这个网站获得了很多关于 HTK 的帮助。该网站包含逐步的培训程序，这对您有好处。

希望这对小词汇量的语音识别有所帮助。

（HTK 本身有 10 位的样本训练程序）

# php - 热喂php函数

> ID：12417318
> 
> 赞同：0
> 
> 时间：2012-09-14T02:20:20.950
> 
> 标签：php, xml

嗨，我正在尝试显示 icecat 产品数据，我是一个完整的 php 新手，我已经找到了一个我认为应该完成这项工作的代码片段，它说它要求您使用 EAN 产品编号提供函数。

有人可以给我一个例子说明这意味着什么，因为我不知道，这是一个 EAN 产品编号 EAN/UPC 代码：0885909481842

这是我尝试使用的代码段。

```
 function getICEcatProductSpecs($ean, $drawdescription = 0, $drawpicture = 0)
{   
// Username and password for usage with ICEcat
$username = "Your ICEcat username goes here";
$password = "Your ICEcat password goes here";

// Return 0 and exit function if no EAN available
if($ean == null)
{
return 0;
}

// Get the product specifications in XML format
$context = stream_context_create(array(
'http' => array(
'header' => "Authorization: Basic " . base64_encode($username.":".$password)
)
));
$data = file_get_contents('http://data.icecat.biz/xml_s3/xml_server3.cgi?ean_upc='.$ean.';lang=nl;output=productxml', false, $context);
$xml = new SimpleXMLElement($data);

// Create arrays of item elements from the XML feed
$productPicture = $xml->xpath("//Product");
$productDescription = $xml->xpath("//ProductDescription");
$categories = $xml->xpath("//CategoryFeatureGroup");
$spec_items = $xml->xpath("//ProductFeature");

//Draw product specifications table if any specs available for the product
if($spec_items != null)
{
$categoryList = array();
foreach($categories as $categoryitem) {
$catId = intval($categoryitem->attributes());
$titleXML = new SimpleXMLElement($categoryitem->asXML());
$title = $titleXML->xpath("//Name");
$catName = $title[0]->attributes();
//echo $catId . $catName['Value']. "<br />";
$categoryList[$catId] = $catName['Value'];
}

$specs = "<table class='productspecs'>";
$i = 0;

$drawnCategories = array();

foreach($spec_items as $item) {
$specValue = $item->attributes();
$titleXML = new SimpleXMLElement($item->asXML());
$title = $titleXML->xpath("//Name");
$specName = $title[0]->attributes();
$specCategoryId = intval($specValue['CategoryFeatureGroup_ID']);

if($specName['Value'] != "Source data-sheet")
{
$class = $i%2==0?"odd":"even";
$specs .= "<tr class='".$class."'>
<td>
<table>";
if(!in_array($specCategoryId, $drawnCategories))
{
$specs .= " <tr class='speccategory'>
<th><h3>".$categoryList[$specCategoryId]."</h3></th>
</tr>";
$drawnCategories[$i] = $specCategoryId;
}
$specs .= " <tr>
<th>".utf8_decode($specName['Value']).":</th>
</tr>
<tr>
<td>";
if($specValue['Presentation_Value'] == "Y")
{
$specs .= "Ja <img src='".SCRIPT_ROOT."images/check_green.png' alt='Ja' />";
}
else if($specValue['Presentation_Value'] == "N")
{
$specs .= "Nee <img src='".SCRIPT_ROOT."images/check_red.png' alt='Nee' />";
}
else
{
$specs .= str_replace('\n', '<br />', utf8_decode($specValue['Presentation_Value']));
}
$specs .= "</td>
</tr>
</table>
</td>
</tr>";
}
$i++;
}
$specs .= "</table>";

//Draw product description and link to manufacturer if available
if( $drawdescription != 0)
{
foreach($productDescription as $item) {
$productValues = $item->attributes();
if($productValues['URL'] != null)
{
$specs .= "<p id='manufacturerlink'><a href='".$productValues['URL']."'>Productinformation from manufacturer</a></p>";
}
if($productValues['LongDesc'] != null)
{
$description = utf8_decode(str_replace('\n', '', $productValues['LongDesc']));
$description = str_replace('<b>', '<strong>', $description);
$description = str_replace('<B>', '<strong>', $description);
$description = str_replace('</b>', '</strong>', $description);
$specs .= "<p id='manudescription'>".$description."</p>";
}
}
}

//Draw product picture if available
if( $drawdescription != 0)
{
foreach($productPicture as $item) {
$productValues = $item->attributes();
if($productValues['HighPic'] != null)
{
$specs .= "<div id='manuprodpic'><img src='".$productValues['HighPic']."' alt='' /></div>";
}
}
}
return $specs;
}
else
{
return 0;
}
} 
```

任何建议都将非常感谢提前彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:25:49.363

我的理解是，如果您调用此函数，则应将 EAN 参数传递给它，如下所示：

```
getICEcatProductSpecs("0885909481842", 0, 0); 
```

# c++ - 字符串和指针位置

> ID：12417323
> 
> 赞同：0
> 
> 时间：2012-09-14T02:20:52.133
> 
> 标签：c++, string, parsing, visual-c++

我正在开发一个程序，该程序需要筛选一个 HTML/XML 垃圾缠身的 .txt 文件，以查找末尾有一个数字的特定模式。这种模式应该出现 10 次。模式如下：" `<p class="wx-temp"> 93.`" 93 是一个温度读数，我最终要收集的是什么，但是，我找不到将 93 与字符串的其余部分隔离的方法，因为它会随着每一天的变化而变化该程序将理想地运行。我一直在尝试找到一种方法来定义一个不能为常量的整数数据类型（即我不能在字符串末尾输入 93，因为它会破坏目的）并将它放在字符串或其他东西中类似于我可以在模式结束后设置 X 个字符开始，或者换句话说，指针位置。很抱歉漫无边际。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:54:17.340

假设您已经将整个文件加载到单个字符串中，这并非不合理。

```
string html;
//(Some code that reads into a big string) 
```

现在你只需要寻找那个标签。

```
string delimiter( "<p class=\"wx-temp\">" );
vector<int> temperatures;

size_t pos = html.find_first_of(delimiter);
while( pos != string::npos ) 
{
    // Skip past the tag (to the temperature)
    pos += delimiter.size();
    if( pos >= html.size() ) break;

    // Extract it (C-style) and chuck it into the vector.
    int temperature = atoi( html.c_str() + pos );
    temperatures.push_back(temperature);

    // If you want to stop after the first 10:
    if( temperatures.size() == 10 ) break; 

    // Find the next tag
    pos = html.find_first_of(delimiter, pos);
} 
```

# jquery - Jquery insertBefore问题

> ID：12417327
> 
> 赞同：0
> 
> 时间：2012-09-14T02:21:27.987
> 
> 标签：jquery

我在这里完成插入元素任务时遇到了麻烦，我已经为此花费了数小时。

当用户单击按钮时，我尝试按类名插入元素。我在脚本中也有 css 设置。我的问题是只有第一个元素具有 css 属性，而其余元素没有。任何人都可以帮助我吗？非常感谢！

jQuery

```
 //when users clicks the button

   var imgForClass = $("<img src='images/anim.gif' class='imgAbs'>");

   var cssProp = {'position':'absolute',
                       'z-index':99,
                       'top': topPos,  //topPos is the position that the element I want to attach to.
                       'left': leftPos //leftPos is the position that the element I want to attach to.
            }

   //detect if the element has id of 'cons'
   if($element.is('#cons'){                
               imgForClass.insertBefore('.conElement');
               imgForClass.css(cssProp) 
    } 
```

html

```
<div>
<img src='a.jpg'/>
<img id='cons' src='b.jpg'/>
</div>      

//the new element will be inserted here but only the first element has css property(z-index...etc)
<div class='conElement'>
<img src='b.jpg'/>
</div>      

//the new element will be inserted here but has no css property(z-index...etc)
<div class='conElement'>
<img src='b.jpg'/>
</div>      

//the new element will be inserted here but has no css property(z-index...etc)
<div class='conElement'>
<img src='b.jpg'/>
</div>      

//the new element will be inserted here but has no css property(z-index...etc)
<div class='conElement'>
<img src='b.jpg'/>
</div>   

...more <div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:30:57.987

我认为这里的问题是您期望在 insertBefore() 方法调用之后的 imgForClass 变量现在成为对所有新插入的 img 标签的引用，并且我相信它只是对第一个标签的引用。所以也许像下面这样的东西会帮助你

```
if($element.is('#cons'){                
               imgForClass.insertBefore('.conElement');
               $('.imgAbs').css(cssProp);
} 
```

附带说明一下，在一个页面上拥有多个具有相同 ID 的元素，就像您对所有

```
<img id='cons' src='b.jpg'/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T02:41:15.820

我认为这会做到：

```
if($element.is('#cons'){                
    imgForClass.insertBefore('.conElement').css(cssProp);
} 
```

# javascript - Javascript：日期对象的字符串表示比实际值“晚”一个月？

> ID：12417328
> 
> 赞同：0
> 
> 时间：2012-09-14T02:21:33.707
> 
> 标签：javascript, date

这是我在 chrome 控制台中看到的：

```
> new Date(2012, 9, 13).toString()
"Sat Oct 13 2012 00:00:00 GMT+0800 (CST)"
> new Date(2012, 9, 13).getMonth()
9 
```

显然应该是`Thu Sep`..我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:24:02.683

`month`形式为~ `0`，`11`零**索引**。

**月**

> 表示月份的整数值，从 0 开始表示一月到 11 表示十二月。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T02:24:21.717

不要问我为什么，但是 Date 构造函数被指定为 Jan = 0, ... Dec = 11。您实际上是在创建一个 10 月的日期，并且它正在正确打印出来。

请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T02:24:40.270

来自[Date 的 MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)：

> `month`
> 
> 表示月份的整数值，从 0 开始表示一月到 11 表示十二月。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T02:27:16.113

Date 对象的 ECMAScript[规范](http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.4)指出月份是从 0 开始索引的（很像 Java 中的），因此`9`表示十月：

> **15.9.1.4 月数**
> 
> 月份值 0 指定一月；1 指定二月；2 指定三月；3 指定四月；4 指定五月；5 指定六月；6 指定七月；7 指定八月；8 指定九月；9 指定十月；10 指定 11 月；11 指定 12 月。请注意，MonthFromTime(0) = 0，对应于 1970 年 1 月 1 日星期四。

# pdf - 批量打印文本文件中列出的 PDF 文件

> ID：12417335
> 
> 赞同：4
> 
> 时间：2012-09-14T02:23:04.463
> 
> 标签：pdf, command-line, printing, batch-file, cmd

您好我是 CMD 的新手，但我想制作一个批量打印解决方案。

我知道使用：

```
"C:\Program Files (x86)\Adobe\Reader 10.0\Reader\AcroRd32.exe" /t "C:\file_1.pdf" 
```

我可以打印file_1.pdf，但我真正需要的是打印多个文件，比如说file_2，file_3 ... file_n，因此我的指令将更改为：

```
"C:\Program Files (x86)\Adobe\Reader 10.0\Reader\AcroRd32.exe" /t "C:\XXXX.pdf" 
```

我考虑制作一个 TEXT 文件，在其中可以写下我需要打印的文件的名称。然后在一个批处理文件中创建一个循环，该循环将读取 TEXT 的每一行并将我的变量 XXXX 更改为在 TEXT 的每一行中指定的文件名。

这可能吗？我并不愚蠢，而且我学得很快，所以如果有人能指出我如何在批处理文件中执行变量以及如何从文本中读取信息的正确方向，那就太棒了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T03:20:06.830

在 cmd.exe 窗口中运行`for /?`并读取输出，或查看[**循环命令：针对一组文件**](http://ss64.com/nt/for_f.html)。

基本上，如果要批量打印目录中的所有 PDF，可以执行以下操作：

```
for %i in (*.pdf) do ^
  "C:\Program Files (x86)\Adobe\Reader 10.0\Reader\AcroRd32.exe" /t %i 
```

如果直接在“DOS 框”窗口中运行，这是要使用的行。如果从 BAT 文件运行，则需要替换`%i`为`%%i`.

如果您在 *.txt 文件中逐行枚举了要打印的文件：

```
for /f %i in (mypdfs.txt) do ^
  "C:\Program Files (x86)\Adobe\Reader 10.0\Reader\AcroRd32.exe" /t %i 
```

[（**注意：**我没有测试运行命令，因为我没有 Windows 系统，但我在这里依靠我老化的记忆......]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-10T09:58:43.823

试试 2Printer 命令行工具： [http ://doc2prn.com/](http://doc2prn.com/)

打印PDF文档列表命令行示例：2Printer.exe -l "C:\input files.txt" -prn "Canon MP610"

2打印机是免费的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-03T15:52:57.357

所有，扩展库尔特的答案......这就是我所做的：

```
 RUNDLL32 PRINTUI.DLL,PrintUIEntry /y /n "Brother MFC-J6930DW Printer"
Timeout /T 10
CD\
cd Users\bill\Desktop\PrintMe
Timeout /T 2
for %%i in (*.pdf) do "C:\Program Files (x86)\Foxit Software\Foxit Reader\FoxitReader.exe" /t "%%i"
Timeout /T 10
RUNDLL32 PRINTUI.DLL,PrintUIEntry /y /n "HP OfficeJet Pro 8710 (Network)"
Pause 
```

此批处理文件将更改默认打印机，打印文件夹中的所有内容，然后更改默认打印机

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T03:18:55.133

这样的事情应该让你开始：

```
for /f %%i in (myfiles.txt) do (
  "C:\Program Files (x86)\Adobe\Reader 10.0\Reader\AcroRd32.exe" /t "%%i%"
) 
```

[您可以在 MS Technet](http://technet.microsoft.com/en-us/library/cc754900%28v=ws.10%29)上获得有关`for`语法和选项的更多信息

# coda - Coda 2 中的块代码格式化

> ID：12417337
> 
> 赞同：5
> 
> 时间：2012-09-14T02:23:30.657
> 
> 标签：coda

尽管有不好的评论，我还是决定在 Coda 2 上挥霍一下。不过有一个我似乎找不到的功能 - 现有代码的代码格式化。

在 Sublimetext 2 中，您可以突出显示一段代码，并通过几个按键，让它自动格式化/缩进。我在 Coda 2 中没有看到这个。它存在吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T02:25:58.987

您可能需要使用插件来完成它：

[http://www.chipwreck.de/blog/software/coda-php/](http://www.chipwreck.de/blog/software/coda-php/)

# c# - C# 套接字和多线程

> ID：12417345
> 
> 赞同：1
> 
> 时间：2012-09-14T02:24:43.280
> 
> 标签：c#, multithreading, sockets, tcpclient

我正在尝试更多地了解 c# 中的套接字和线程。我在网上找到了很多很好的资源来帮助我入门。到目前为止，我制作的程序是一个简单的“中间人”应用程序。它的设计如下：客户端 <--> [应用程序] <--> 服务器

给定以下代码，如何防止该线程以 100% CPU 运行？当客户端/服务器空闲时，如何让线程等待并阻止数据而不退出？

```
while (true)
       {
            lock (ClientState)
            {
                checkConnectionStatus(client, server);
            }

            if (clientStream.CanRead && clientStream.DataAvailable)
            {
                Byte[] bytes = new Byte[(client.ReceiveBufferSize)];

                IAsyncResult result = clientStream.BeginRead(bytes, 0, client.ReceiveBufferSize, null, null);
                int size = clientStream.EndRead(result);

                sendData(bytes, serverStream, size);
            }
            if (serverStream.CanRead && serverStream.DataAvailable)
            {
                Byte[] bytes = new byte[(server.ReceiveBufferSize)];

                IAsyncResult result = serverStream.BeginRead(bytes, 0, server.ReceiveBufferSize, null, null);
                int size = serverStream.EndRead(result);

                sendData(bytes, clientStream, size);
            }
        } 
```

编辑：决定为任何感兴趣的人发布整个“Connection.cs”类。我是一个初学者编程，所以我知道这里有一些不好的编码实践。基本上，整个类在另一个线程中运行，并且在连接（到客户端套接字或服务器套接字）断开时应该终止。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Threading;
using System.Net;

namespace TCPRelay
{
public class Connection
{
    public delegate void delThreadSafeHandleException(System.Exception ex);
    public delegate void ConnectionDelegate(Connection conn);
    public int DataGridIndex;

    Main pMain;

    public TcpClient client { get; set; }
    public TcpClient server { get; set; }
    public String ClientState { get; set; }

    public string ListenPort { get; set; }
    public string remotePort { get; set; }

    public string listenAddress { get; set; }
    public string remoteAddress { get; set; }

    private TcpListener service { get; set; }

    private Main Form
    {
        get
        {
            return pMain;
        }
    }
    private NetworkStream clientStream { get; set; }
    private NetworkStream serverStream { get; set; }

    public Connection(TcpClient client, TcpClient server)
    {
        clientStream = client.GetStream();
        serverStream = server.GetStream();
    }

    public Connection(String srcAddress, int srcPort, String dstAddress, int dstPort, Main caller)
    {
        try
        {
            pMain = caller;
            TcpListener _service = new TcpListener((IPAddress.Parse(srcAddress)), srcPort);

            //Start the client service and add to connection property
            _service.Start();
            service = _service;

            //Set other useful parameters
            listenAddress = srcAddress;
            ListenPort = srcPort.ToString();

            remoteAddress = dstAddress;
            remotePort = dstPort.ToString();

            this.ClientState = "Listening";
        }
        catch (Exception ex)
        {
            pMain.HandleException(ex);
            Thread.CurrentThread.Abort();
        }

    }

    private TcpClient getServerConnection(String address, int port)
    {
        TcpClient client = new TcpClient(address, port);
        if (client.Connected)
        {
            return client;
        }
        else
        {
            throw new Exception(
                String.Format("Unable to connect to {0} on port {0}",
                address,
                port)
                );
        }
    }
    private void sendData(Byte[] databuf, NetworkStream stream, int size)
    {
        bool waiting = true;
        while (waiting)
        {
            if (stream.CanWrite)
            {
                waiting = false;
                stream.Write(databuf, 0, size);
            }
            else { throw new Exception("Unable to write to network stream"); }
        }
    }

    //Main Looping and data processing goes here
    public void ProcessClientRequest()
    {
        try
        {
            //Wait for a connection to the client
            TcpClient client = service.AcceptTcpClient();

            //Get the streams and set the peer endpoints
            this.clientStream = client.GetStream();
            this.client = client;

            //Now that we have a client, lets connect to our server endpoint
            TcpClient server = getServerConnection(remoteAddress, int.Parse(remotePort));

            //Set some useful parameters
            this.server = server;
            this.serverStream = server.GetStream();
        }
        catch (Exception ex)
        {
            lock (ClientState)
            {
                this.ClientState = ex.Message;    
            }

            CloseConnection();
            Thread.CurrentThread.Abort();
        }
        while (true)
       {
            lock (ClientState)
            {
                checkConnectionStatus(client, server);
            }

            if (clientStream.CanRead && clientStream.DataAvailable)
            {
                Byte[] bytes = new Byte[(client.ReceiveBufferSize)];

                IAsyncResult result = clientStream.BeginRead(bytes, 0, client.ReceiveBufferSize, null, null);
                int size = clientStream.EndRead(result);

                sendData(bytes, serverStream, size);
            }
            if (serverStream.CanRead && serverStream.DataAvailable)
            {
                Byte[] bytes = new byte[(server.ReceiveBufferSize)];

                IAsyncResult result = serverStream.BeginRead(bytes, 0, server.ReceiveBufferSize, null, null);
                int size = serverStream.EndRead(result);

                sendData(bytes, clientStream, size);
            }
        }
    }

    private void checkConnectionStatus(TcpClient _client, TcpClient _server)
    {
        try
        {
            if (_client.Client.Poll(0, SelectMode.SelectRead))
            {
                byte[] buff = new byte[1];
                if (_client.Client.Receive(buff, SocketFlags.Peek) == 0)
                {
                    this.ClientState = "Closed";
                    CloseConnection();
                    Thread.CurrentThread.Abort();
                }
            }
            else if (_server.Client.Poll(0, SelectMode.SelectRead))
            {
                byte[] buff = new byte[1];
                if (_server.Client.Receive(buff, SocketFlags.Peek) == 0)
                {
                    this.ClientState = "Closed";
                    CloseConnection();
                    Thread.CurrentThread.Abort();
                }
            }
            else { this.ClientState = "Connected"; }
        }
        catch (System.Net.Sockets.SocketException ex)
        {
            this.ClientState = ex.SocketErrorCode.ToString();
            CloseConnection();
            Thread.CurrentThread.Abort();
        }
    }

    public void CloseConnection()
    {
        if (clientStream != null)
        {
            clientStream.Close();
            clientStream.Dispose();
        }

        if (client != null)
        {
            client.Close();
        }

        if (serverStream != null)
        {
            serverStream.Close();
            serverStream.Dispose();
        }

        if (server != null)
        {
            server.Close();
        }

        if (service != null)
        {
            service.Stop();
        }
    }       
} 
```

}

我还有一个“主”表单和一个“ConnectionManager”类，我正在玩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T03:02:45.213

处理此问题的最有效方法是在每个流上发出带有回调的读取。

在发出两次读取后，在一个对象上永远等待，该对象用于指示线程应该停止其工作（ManualResetEvent 是传统的使用方法 - 可用于一次向多个线程发出信号）。

收到数据后，操作系统将调用您的回调函数，您将在其中进行处理，然后（重要地）将另一个读取排队。

这意味着您的线程永远处于空闲状态，等待一个信号对象告诉它是时候离开了（以“唤醒 - 死亡时间”的方式），并且只有在操作系统告诉它时才开始工作有数据要处理。

为了真正友好，您还可以异步执行写入操作，这样一个连接就不会占用另一个连接的处理时间（在当前实现中，如果一个写入阻塞，则另一个流永远不会得到服务）。

最后，为了超级好，您可以将此行为封装在一个对象中，该对象将要使用的流作为参数，然后简单地实例化其中的两个，而不是拥有两个流并在主代码中执行所有操作两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T02:51:20.933

在中间人接受套接字后，我执行以下操作：

```
 private void WaitForData()
    {
        try
        {
            if (socketReadCallBack == null)
            {
                socketReadCallBack = new AsyncCallback(OnDataReceived);
            }

            ReceiveState rState = new ReceiveState();
            rState.Client = mySocket;

            mySocket.BeginReceive(rState.Buffer, 0, rState.Buffer.Length, SocketFlags.None,
                new AsyncCallback(socketReadCallBack), rState);

        }
        catch (SocketException excpt)
        {
            // Process Exception
        }

    } 
```

接收状态为：

```
public class ReceiveState
  {
    public byte[] Buffer = new byte[1024]; //buffer for network i/o
    public int DataSize = 0; //data size to be received by the server
    public bool DataSizeReceived = false; //whether prefix was received
    public MemoryStream Data = new MemoryStream(); //place where data is stored
    public Socket Client;   //client socket
   } 
```

一旦收到数据，我的例程“OnDataReceived”就会处理它。我没有遇到任何 CPU 问题。

客户端和中间人使用相同的代码。

# javascript - 在鼠标悬停时显示网页预览

> ID：12417353
> 
> 赞同：1
> 
> 时间：2012-09-14T02:26:09.113
> 
> 标签：javascript, html

当链接被鼠标悬停时，有没有办法显示网页的预览？我认为这样的功能会非常用户友好（它会使导航更快）。最好通过在某种框架中加载“鼠标悬停”页面来实现这一点，还是有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:10:32.263

如果您有有限的静态（或几乎是静态的页面），请制作屏幕截图并使用图像。

否则，使用这个 jquery 插件：

[http://craigsworks.com/projects/qtip/demos/content/thumbnail](http://craigsworks.com/projects/qtip/demos/content/thumbnail)

复制自：[jQuery 网页预览](https://stackoverflow.com/questions/3162815/jquery-webpage-preview)

# objective-c - UIbutton没有响应触摸

> ID：12417354
> 
> 赞同：1
> 
> 时间：2012-09-14T02:26:16.813
> 
> 标签：objective-c, ios, cocoa-touch

我有这个视图层次结构： ![在此处输入图像描述](../Images/b8520f57eb4be91453dc7724a0942745.png)

三个按钮没有反应。它们已启用，就在我触摸那里时，它们什么都不做（甚至不改变它们的渐变/色调），这告诉我它们甚至没有收到触摸。有什么我做错了吗？谢谢

所有按钮的超级视图和按钮本身都启用了用户交互。按钮也已启用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T02:48:56.690

您是否在顶部使用任何 imageViews 或包含 UIButtons？如果是这样，有时它们会吸收触摸，因为它们默认`userInteraction`设置为布尔`NO`值。甚至可能摆脱您的渐变 imageView（暂时）以确定这些是否导致问题。

如果没有，我会在 superview 的 viewDidLoad 方法上设置一个断点并输入`[self.view recursiveDescription]`. 它应该让您对这些按钮周围的内容一目了然，并且可能会偷走这些按钮。

祝你好运！

# javascript - 按 ID 抓取表并一次遍历一行

> ID：12417363
> 
> 赞同：1
> 
> 时间：2012-09-14T02:27:03.053
> 
> 标签：javascript, dom, dynamic, iteration

我想用

```
var merch = document.getElementById('merch'); 
```

在我的网页上检索一个动态填充的表格。然后我想遍历表，一次一行，抓住

```
<td> 
```

元素并将它们中的每一个作为字符串存储在数组中。每行都有自己的数组。

有人可以给我一个关于如何做到这一点的线索吗？我确信有一个我在搜索中没有找到的简单方法。

预先感谢您的考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:35:36.150

***[工作演示。](http://jsfiddle.net/9skPF/)***

```
var merch = document.getElementById('merch');

// this will give you a HTMLCollection
var rows = merch.rows;

// this will change the HTMLCollection to an Array
var rows = [].slice.call(merch.rows);   

// if you want the elements in the array be string.
// map the array, get the innerHTML propery.
var rows = [].slice.call(merch.rows).map(function(el) {
    return el.innerHTML;
}); 
```

[地图](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T02:39:16.387

你会想要为此使用 jQuery，它会让事情变得更容易。然后你可以做这样的事情。

**HTML 表格**

```
<table id="iterateOverThisTable">
  <tr>
    <td>One</td>
    <td>Two</td>
    <td>Three</td>
  </tr>
  <tr>
    <td>One</td>
    <td>Two</td>
    <td>Three</td>
  </tr>
  <tr>
    <td>One</td>
    <td>Two</td>
    <td>Three</td>
  </tr>
</table> 
```

**JS 文件（已包含 jQuery）**

```
$(function() {
  var rows = [];

  $("#tableToIterateOver tr").each(function() {
    var = cells = [];

    $(this).find('td').each(function() {
      cells.push($(this).text());
    });

    rows.push(cells);
  });
}) 
```

# python - Python：从模块中唯一标识一个函数

> ID：12417366
> 
> 赞同：2
> 
> 时间：2012-09-14T02:27:38.693
> 
> 标签：python

我不是真正的程序员，而是计算统计学家，所以我可能了解复杂的算法，但不了解简单的编程结构。

我最初的问题是在函数中检查模块函数是否可调用。我环顾四周，决定使用`try`（调用函数）- `except`（导入模块）以使其简单。我很想搜索`sys.mod`这个，但我遇到了一些可识别性问题。

我目前的问题是从模块中导入函数有很多方法：`import module`将函数定义为`module.function`但`from module import function`将其定义为`function`. 更不用说`from module import function as myfunction`。因此，可以通过几种不同的方式调用相同的函数。

我的问题是：如果加载了模块，是否有可以跟踪的函数的唯一“签名”？拥有它的实际调用别名真是太棒了。

ps 此外：`mod`是数学函数并返回加载模块的列表，但是当您通过执行以下`sys.mod`操作隐藏内置函数时，python（2.7）不会抱怨， . 我觉得这有点尴尬 - 有没有办法以编程方式避免这种阴影？`mod``from sys import mod`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:32:54.610

> 我最初的问题是在函数中检查模块函数是否可调用。

根据定义，所有函数都是可调用的。这将测试对象是否可调用：[http ://docs.python.org/library/functions.html#callable](http://docs.python.org/library/functions.html#callable)

> 因此，可以通过几种不同的方式调用相同的函数。

是的，但它将是同一个对象。您可以只`f is g`用来测试`f`和`g`是否是同一个对象。

**更新：**为什么需要使用唯一 ID？说真的，不要这样做。你有`is`用于身份测试，以及`__hash__`定义散列函数的方法适用。

> 拥有它的实际调用别名真是太棒了。

完全不确定您的意思，但我认为您只是希望它始终是一个对象。它已经是。

> mod 是数学函数，sys.mod 返回加载模块的列表，但 python (2.7) 不会抱怨 from sys import mod。我觉得这有点尴尬？

然后不要那样做。你知道`import ... as`语法。`mod`默认情况下也不在全局命名空间中（操作符就是`%`为此）。

最后，python 确实抱怨您的导入行：

```
>>> from sys import mod
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: cannot import name mod 
```

（感谢kindall指出这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T07:00:49.243

假设我有一个包含以下内容的模块：

```
def foo(): pass
bar = foo 
```

`is`通过使用or ，您可以很容易地看到它们是相同的功能`id()`：

```
>>> import demo
>>> from demo import *
>>> demo.foo is foo
True
>>> id(demo.foo) == id(foo)
True
>>> demo.bar is foo
True 
```

它们都引用同一个代码对象，只是在作用域字典中以不同的名称存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T03:15:25.513

```
# define modulus f
def mod(a,b):
    return b % a

print mod(5,2) 
```

别名：

```
modulus=mod
print modulus(5,2) 
```

这是一个非常pythonic的结构，对数学家来说非常直观

不同的导入方式可以帮助您将函数放入不同的“名称空间”以供以后在程序中使用，有时您希望大量使用函数，因此您选择编写更短的变体。

您还可以执行以下操作：

```
myat=math.atanh 
```

在另一个“名称空间”中创建别名

并将其用作：

```
myat(x) 
```

因为它会使用`math.atanh(x)`- 写起来更短

典型的程序员方法是定义所有你想使用的然后使用它。我相信你正在尝试的是在你需要一个函数时“懒惰”=>导入模块。这就是为什么你想知道函数是否是“可调用的”。

Python 不是函数式编程语言（例如 haskel），因此您可以“按需”加载或引用。

希望这可以帮助。

# jquery - 使用 .load() 更改 div 内容时，我需要重新包含我的脚本吗？

> ID：12417368
> 
> 赞同：1
> 
> 时间：2012-09-14T02:28:09.043
> 
> 标签：jquery, event-handling, include

我使用 .load() 用新内容填充 div，但是当我这样做时，我必须调用所有脚本才能在新内容中使用它们，我相信这是导致我的事件处理程序触发两次的原因。

我错了吗？如果没有，是否有替代方法？

```
 $('.user').click(function(){
    if ($section !== 'users'){
        $section = 'users';
        $('div#contentWrapper').fadeOut(0).empty();
        $('div#contentWrapper').load('pages/users.html').fadeIn(500);
    }
    else{
        return;
    } 
```

这是显然触发两次的代码。

```
 $('.addUser').click(function(){        
    $('.userPanel').fadeOut(0).empty();
    $('.userPanel').load('pages/addUser.html').fadeIn(500);
    }); 
```

我最初认为这是导致它的淡出，所以我将其设置为即时，但这并没有解决问题。该网站上的另一篇文章建议首先取消绑定点击处理程序，但据我了解，这是一种解决方法而不是修复方法，而是解决问题。

我是 jquery 的新手，非常感谢你们能提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:33:18.807

当你动态加载元素时，你需要使用 jQuery 的`.on()`函数将事件绑定到被加载的元素上。您需要绑定`.on()`到 DOM 中已经存在的元素，通常最坏的情况是 body 元素。如果你比`body`你通常会得到改进的性能更具体。

例如，如果您将表格行加载到表格中并希望在新行上绑定点击事件，您可以使用：

```
$("table").on("click", "tr", function(event){
    //do something
}); 
```

# coldfusion - cfgrid - 如何对一列数字进行数字排序

> ID：12417369
> 
> 赞同：1
> 
> 时间：2012-09-14T02:28:13.917
> 
> 标签：coldfusion, coldfusion-9, cfgrid, cfgridcolumn

我在 Coldfusion 9.01 上使用 cfgrid 控件来显示带有几列数字的查询记录集。

我的网格是 format="html" 和一个查询作为数据源。

我的网格列的部分列表如下：

```
<cfgridcolumn name="delivery" header="Email Delivery" width="300" />
<cfgridcolumn name="deliveryDate" header="Delivery Date" width="100" />
<cfgridcolumn name="sent" header="Sent" width="50" type="numeric"  />
<cfgridcolumn name="Opens" header="Opens" width="50" type="numeric"/>
<cfgridcolumn name="OpenRatio" header="%Opens" width="75" type="numeric"  /> 
```

我遇到的问题是，当我单击列标题对数字列之一进行排序时，网格将数字作为文本进行排序。

9999、9、888、8、777、7等

我将类型设置为数字。我还能做些什么来强制网格对数字列进行排序。

更新：作为一种解决方法，我使用 bind 作为数据源而不是查询，并且排序按预期工作。

# vim - vmap 自动将 '<,'> 放在命令前面

> ID：12417372
> 
> 赞同：3
> 
> 时间：2012-09-14T02:28:50.870
> 
> 标签：vim

我正在尝试为可视模式 vim 编写复制/粘贴功能。复制读取所有突出显示的行。

`vmap cc :execute Copy()<CR>` 变成 `'<,'>:execute Copy()<CR>`

这导致 `E481: No range allowed`

进入 ex 模式时，如何让 vmap 不插入 '<,'>？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T03:54:57.737

您可以使用`C-u`清除命令行。

```
vmap cc :<C-u>execute Copy()<CR> 
```

# php - 为什么我的数组是空的？

> ID：12417377
> 
> 赞同：0
> 
> 时间：2012-09-14T02:29:46.200
> 
> 标签：php, arrays

为什么我的`$dropdown`数组是空的？

我没有`$p`抄过

```
 foreach($p as $pat)
   {
    print'<pre>';
    print_r($pat['name']);
    print'</pre>';

   $c = Jojo::selectQuery("SELECT * FROM {cat} WHERE {parentid} =?", array($pat['categoryid']));

   foreach($c as $cat)
   {
        print'<pre>    ';
        print_r($cat['name']);
        print'</pre>';
   }

  $dropcat =  array();
  $dropcat[$cat[$pat['categoryid'][0]] = $pat['id']];

  print_r($dropcat);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:33:01.713

```
$dropcat =  array();
print_r($dropcat); 
```

这些都在您的第一个`foreach`循环内，导致它在循环的每次迭代中都被清空。删除第一行并将第二行放在花括号之后，然后再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:24:16.980

很可能这是一个支架问题？

```
$dropcat[$cat[$pat['categoryid'][0]] = $pat['id']];
// Should be
$dropcat[$cat[$pat['categoryid'][0]]] = $pat['id']; 
```

但是在不知道内容和 $cat 和 $pat 的情况下很难完全理解，因为我不确定它们实际上是否具有您期望的内容-它们将具有 foreach 循环中的最后一项。

# c - 从 char * 转换为 int 会丢失精度

> ID：12417378
> 
> 赞同：19
> 
> 时间：2012-09-14T02:29:51.373
> 
> 标签：c, casting, compiler-errors

我正在从文件中读取数字。当我尝试将每个数字放入一个二维数组时，它会给我以下错误。我该如何摆脱这个消息？我的变量： FILE *fp; 字符线[80]；

**错误：从 char * 转换为 int 失去精度**

代码：-

```
#include<stdio.h>
#include<string.h>

int main()
{
        FILE *fp;
        char line[80],*pch;
        int points[1000][10];
        int centroid[1000][10];
        float distance[1000][10];
        int noofpts=0,noofvar=0,noofcentroids=0;
        int i=0,j=0,k;

        fp=fopen("kmeans.dat","r");
        while(fgets(line,80,fp)!=NULL)
        {
                j=0;
                pch=strtok(line,",");
                while(pch!=NULL)
                {
                        points[i][j]=(int)pch;
                        pch=strtok(NULL,",");
                        noofvar++;
                        j++;
                }
                noofpts++;
                i++;
        }
        noofvar=noofvar/noofpts;
        printf("No of points-%d\n",noofpts);
        printf("No of variables-%d\n",noofvar);

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-14T02:35:02.673

这是违规行：

```
points[i][j]=(int)pch; 
```

您应该将其替换为

```
points[i][j]=atoi(pch); 
```

[`atoi`](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)是一个函数，它将表示以十进制表示的整数的 C 字符串转换为`int`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-13T08:00:46.400

**在 a 上编译**时会发生此错误，但在 a 上`64 bit machine`可能不会发生，因为和`32 bit machine`的大小不同。`char*``int`

在**64 位** `sizeof(char*)`上是 8 并且`sizeof(int)`是 4

在**32 位** `sizeof(char*)`上是 4 并且`sizeof(int)`是 4

# matlab - MATLAB：svds() 没有收敛

> ID：12417379
> 
> 赞同：2
> 
> 时间：2012-09-14T02:30:10.010
> 
> 标签：matlab, octave, svd

因此，对一些输入数据使用 MATLAB 的[svds()函数，如下所示：](http://www.mathworks.com/help/matlab/ref/svds.html)

```
[U, S, V, flag] = svds(data, nSVDs, 'L') 
```

我注意到，从运行到运行相同的数据，每次运行我会得到截然不同的输出 SVD 大小。当我检查是否设置了“标志”时，我发现它是，表明 SVD 没有收敛。我在这里的正常系统是，如果它真的需要收敛，我会做这样的事情：

```
flag = 1
svdOpts = struct('tol', 1e-10, 'maxit', 600, 'disp', 0);
while flag:
    if svdOpts.maxit > 1e6
        error('There''s a real problem here.')
    end

    [U, S, V, flag] = svds(data, nSVDs, 'L', svdOpts)
    svdOpts.maxit = svdOpts.maxit*2
end 
```

但是据我所知，当您使用“L”作为第三个参数时，第四个参数被忽略了，这意味着我只需要处理它没有收敛的事实吗？我什至不确定如何使用“sigma”参数代替“L”参数。我还尝试减少计算无济于事的 SVD 数量。对此问题的任何帮助将不胜感激。

**编辑** 在跟进下面的评论时，我发现问题与我构建数据矩阵的方式有关。原来我不小心反转了一个矩阵，输入的大小是 (4000x1) 而不是 (20x200)，这就是拒绝收敛的原因。 **这不是问题**

**第二次编辑** 如果有人还在关注这个，我实际上是错的，我的数据只是因为我错误地缩放了输入而收敛了。这是一个在我生成数据时生成数据的程序：

```
%  Generate data for SVD failure to converge
% Kernel functions
data_fun1 = @(t, tau)(exp(-t*(1./tau)));
t = linspace(0, 10, 26)';
tau1 = logspace(-1, log10(5), 150); 
k1 = data_fun1(t, tau1);

gamma = 4257;
n = 6;
tau = 0.075;
A = -(2/3)*(2*pi*gamma)^2*n*tau.^3;

data_fun2 = @(V, t)exp(A*t*(V.^2));
V = linspace(0, 0.4, 29);
tau3 = logspace(-1, log10(5), 150)';
tau3 = tau3*1e-5;
k2 = data_fun2(V, tau3)';

svdOpts = struct('tol', 1e-10, 'maxit', 1e3, 'disp', 0);
svdOpts2 = svdOpts;
flag = 1;
while flag
    if svdOpts2.maxit > 1e8
        break
    end

    [U1, S1, V1, flag] = svds(k1, length(t), 'L', svdOpts);
    svdOpts2.maxit = svdOpts2.maxit * 2;
end
flag
% flag == 0
flag = 1;

while flag
    if svdOpts2.maxit > 1e8
        break
    end

    [U2, S2, V2, flag] = svds(k2, length(V), 'L', svdOpts);
    svdOpts2.maxit = svdOpts2.maxit * 2;
end
flag
% flag == 1 
```

我也试过让它跑到 svdOpts2.maxit > 1e9，但是整个周末都跑了，从来没有超过 4.096e8。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:18:53.747

您提供的示例失败，因为您正在尝试计算完整的 SVD 分解，`svds(A,k)`仅当`k < min(size(A))`. 我应该*少得多*。

`svd()`应该使用您的示例。

通过`k2`上面的代码计算

```
>> tic, [U2, S2, V2, flag] = svds(k2, length(V), 'L'); toc         
Elapsed time is 0.830326 seconds.
>> flag

flag =

     1

>> tic, [U2, S2, V2] = svd(k2); toc      
Elapsed time is 0.002851 seconds.
>> norm(U2*S2*V2'-k2)/norm(k2)

ans =

   8.4982e-16

>> max(max(abs(U2*S2*V2'./k2-1)))

ans =

   5.8111e-12 
```

请记住，矩形矩阵`A`只有`min(size(A))`奇异值，因此您确实对计算*所有*奇异值感兴趣。如果您对*正方形* `S2`感兴趣，您应该使用`svd(k2, 'econ')`.

# wordpress - 从本地服务器传输 wordpress 网站时出现 404 错误

> ID：12417381
> 
> 赞同：0
> 
> 时间：2012-09-14T02:30:51.990
> 
> 标签：wordpress, installation, http-status-code-404

我已将我的 wordpress 网站从我的本地服务器转移到我服务器上的一个文件夹中。它位于 /wordpress 中。我创建了一个新数据库、新用户和密码并导入。我还在 wp-options 中更改了网站的位置和主页。我已经更改了 wp-config 文件。我仍然收到 404 错误。然后我尝试删除所有文件，添加一个全新的 wordpress 安装，然后添加我的主题，但仍然是同样的错误。我什至无法访问管理员或安装。有人可以看看并告诉我我做错了什么吗？我以前做过这个，它通常工作正常。会不会是主机？

[在此处查看网站](http://www.artling.com.au/wordpress/ "在此处查看网站")

我检查了我的 .htaccess 文件，它显示以下内容：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wordpress/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]
  </IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:32:38.273

检查你的 .htaccess 文件。前几天我遇到了同样的问题。因为它在一个子目录中，所以它会在 .htaccess 文件中跟踪它，我猜服务器上的子目录的名称与您的开发环境中的名称不同：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T02:48:44.753

检查你是 .htaccess 文件，如果你不想在 htaccess 文件中进行编码。然后登录到 wp-admin 并转到永久链接部分并点击更新按钮希望它会解决问题谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T04:51:48.440

首先删除 .htaccess 文件并登录 wordpress 以正常运行，让我们检查是否符合由于 .htaccess 文件导致的此错误。

希望这对您有所帮助。谢谢 ;）

# java - 编程测试 - Codility - Dominator

> ID：12417383
> 
> 赞同：35
> 
> 时间：2012-09-14T02:31:04.700
> 
> 标签：java

我只是遇到了一个代码问题，这让我很难过，我仍在试图弄清楚如何满足空间和时间复杂度的限制。

问题如下：数组中的一个显性成员是占据了数组中一半以上位置的成员，例如：

{3, 67, 23, 67, 67}

67 是主要成员，因为它出现在阵列中的 3/5 (>50%) 位置。

现在，您应该提供一个方法，该方法接收一个数组，如果存在则返回主要成员的索引，如果不存在则返回 -1。

容易，对吧？好吧，如果不是以下限制，我本可以轻松解决问题：

*   预期时间复杂度为 O(n)
*   预期空间复杂度为 O(1)

我可以看到你如何在 O(n) 时间和 O(n) 空间复杂度以及 O(n^2) 时间和 O(1) 空间复杂度下解决这个问题，但不是同时满足 O(n) 时间和 O(1) 空间。

我真的很感激看到这个问题的解决方案。别担心，截止日期已经过了几个小时（我只有 30 分钟），所以我不想作弊。谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-14T03:33:58.343

谷歌搜索“数组的计算主导成员”，这是第[一个结果](http://www.ritambhara.in/majority-element-of-an-array-moores-algorithm/)。请参见第 3 页描述的算法。

```
element x;
int count ← 0;
For(i = 0 to n − 1) {
  if(count == 0) { x ← A[i]; count++; }
  else if (A[i] == x) count++;
  else count−−;
}
Check if x is dominant element by scanning array A 
```

基本上观察，如果你在数组中找到两个不同的元素，你可以在不改变剩余元素的主导元素的情况下将它们都删除。这段代码只是不断地抛出成对的不同元素，跟踪它看到单个剩余未配对元素的次数。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-14T02:49:12.983

[使用BFPRT](https://stackoverflow.com/a/2580072/179910)找到中位数，也就是中位数的中位数（O(N) 时间，O(1) 空间）。然后扫描数组 - 如果一个数字占主导地位，则中位数将等于该数字。遍历数组并计算该数字的实例数。如果它超过数组的一半，它就是支配者。否则，就没有统治者。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-15T13:13:36.600

添加具有 O(1) 空间的 Java 100/100 O(N) 时间：

[https://codility.com/demo/results/demoPNG8BT-KEH/](https://codility.com/demo/results/demoPNG8BT-KEH/)

```
class Solution {
  public int solution(int[] A) {
        int indexOfCandidate = -1;
        int stackCounter = 0, candidate=-1, value=-1, i =0;

        for(int element: A ) {
            if (stackCounter == 0) {
                value = element;
                ++stackCounter;
                indexOfCandidate = i;
            } else {
                if (value == element) {
                    ++stackCounter;
                } else {
                    --stackCounter;
                }
            }
            ++i;
        }

        if (stackCounter > 0 ) {
            candidate = value;
        } else {
            return -1;
        }

        int countRepetitions = 0;
        for (int element: A) {
            if( element == candidate) {
                ++countRepetitions;

            }
            if(countRepetitions > (A.length / 2)) {
                return indexOfCandidate;
            }
        }
        return -1;
    }
} 
```

如果您想查看[这里的 Java 源代码](https://github.com/moxi/codility-lessons/blob/69ed19273d7d7620aa3f1ced6c5696f666c0ecce/Codility/Leader/Dominator.java)，我在文件开头添加了一些测试用例作为注释。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-03T09:30:46.373

得分 100% 的 Java 解决方案

```
public  int solution(int[] array) {

    int candidate=0;
    int counter = 0;

    // Find candidate for leader
    for(int i=0; i<array.length; i++){

        if(counter == 0) candidate = i;

        if(array[i] == array[candidate]){
            counter++;
        }else {
            counter--;
        }
    }

    // Count candidate occurrences in array
    counter = 0;
    for(int i=0; i<array.length; i++){
        if(array[i] == array[candidate]) counter++;
    }

    // Check that candidate occurs more than array.lenght/2
    return counter>array.length/2 ? candidate : -1;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-26T20:59:21.553

在 python 中，我们很幸运，一些聪明的人使用 C 来实现高效的助手并将其发布到标准库中。[collections.Counter](http://docs.python.org/2/library/collections.html)在这里很有用。

```
>>> data = [3, 67, 23, 67, 67]
>>> from collections import Counter
>>> counter = Counter(data)  # counter accepts any sequence/iterable
>>> counter  # dict like object, where values are the occurrence 
Counter({67: 3, 3: 1, 23: 1})
>>> common = counter.most_common()[0]
>>> common
(67, 3)
>>> common[0] if common[1] > len(data) / 2.0 + 1 else -1
67
>>> 
```

如果您更喜欢这里的功能，那就是...

```
>>> def dominator(seq):
        counter = Counter(seq)
        common = counter.most_common()[0]
        return common[0] if common[1] > len(seq) / 2.0 + 1 else -1
...
>>> dominator([1, 3, 6, 7, 6, 8, 6])
-1
>>> dominator([1, 3, 6, 7, 6, 8, 6, 6])
6 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-28T16:54:50.777

这是我的 C 解决方案，得分 100%

```
int solution(int A[], int N) {

    int candidate;
    int count = 0;
    int i;

    // 1\. Find most likely candidate for the leader
    for(i = 0; i < N; i++){

        // change candidate when count reaches 0
        if(count == 0) candidate = i;

        // count occurrences of candidate
        if(A[i] == A[candidate]) count++;
        else count--;          
    }

    // 2\. Verify that candidate occurs more than N/2 times
    count = 0;
    for(i = 0; i < N; i++) if(A[i] == A[candidate]) count++;

    if (count <= N/2) return -1;
    return candidate; // return index of leader
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-21T22:51:17.077

100%

```
import java.util.HashMap;
import java.util.Map;

class Solution {
    public static int solution(int[] A) {
        final int N = A.length;
        Map<Integer, Integer> mapOfOccur = new HashMap((N/2)+1);

        for(int i=0; i<N; i++){
            Integer count = mapOfOccur.get(A[i]);
            if(count == null){
                count = 1;
                mapOfOccur.put(A[i],count);
            }else{
                mapOfOccur.replace(A[i], count, ++count);
            }
            if(count > N/2)
                return i;

        }
        return -1;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-01T20:39:17.220

这是一个易于阅读，100% 分数的 Objective-c 版本

```
 if (A.count > 100000)
    return -1;
NSInteger occur = 0;
NSNumber *candidate = nil;
for (NSNumber *element in A){
    if (!candidate){
        candidate = element;
        occur = 1;
        continue;
    }

    if ([candidate isEqualToNumber:element]){
        occur++;
    }else{
        if (occur == 1){
            candidate = element;
            continue;
        }else{
            occur--;
        }
    }
}
if (candidate){
    occur = 0;
    for (NSNumber *element in A){
        if ([candidate isEqualToNumber:element])
            occur++;
    }
    if (occur > A.count / 2)
        return [A indexOfObject:candidate];
}
return -1; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-14T02:56:10.867

它必须是一个特别*好的*算法吗？;-)

```
static int dominant(final int... set) {
  final int[] freqs = new int[Integer.MAX_VALUE];
  for (int n : set) {
    ++freqs[n];
  }
  int dom_freq = Integer.MIN_VALUE;
  int dom_idx = -1;
  int dom_n = -1;
  for (int i = set.length - 1; i >= 0; --i) {
    final int n = set[i];
    if (dom_n != n) {
      final int freq = freqs[n];
      if (freq > dom_freq) {
        dom_freq = freq;
        dom_n = n;
        dom_idx = i;
      } else if (freq == dom_freq) {
        dom_idx = -1;
      }
    }
  }
  return dom_idx;
} 
```

（*这主要是为了取笑要求*）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-24T22:06:05.697

考虑一下 Ruby 中的这个 100/100 解决方案：

```
# Algorithm, as described in https://codility.com/media/train/6-Leader.pdf:
#
# * Iterate once to find a candidate for dominator.
# * Count number of candidate occurences for the final conclusion.
def solution(ar)
  n_occu = 0
  candidate = index = nil

  ar.each_with_index do |elem, i|
    if n_occu < 1
      # Here comes a new dominator candidate.
      candidate = elem
      index = i
      n_occu += 1
    else
      if candidate == elem
        n_occu += 1
      else
        n_occu -= 1
      end
    end # if n_occu < 1
  end

  # Method result. -1 if no dominator.
  # Count number of occurences to check if candidate is really a dominator.
  if n_occu > 0 and ar.count {|_| _ == candidate} > ar.size/2
    index
  else
    -1
  end
end

#--------------------------------------- Tests

def test
  sets = []
  sets << ["4666688", [1, 2, 3, 4], [4, 6, 6, 6, 6, 8, 8]]
  sets << ["333311", [0, 1, 2, 3], [3, 3, 3, 3, 1, 1]]
  sets << ["313131", [-1], [3, 1, 3, 1, 3, 1]]
  sets << ["113333", [2, 3, 4, 5], [1, 1, 3, 3, 3, 3]]

  sets.each do |name, one_of_expected, ar|
    out = solution(ar)
    raise "FAILURE at test #{name.inspect}: #{out.inspect} not in #{expected.inspect}" if not one_of_expected.include? out
  end

  puts "SUCCESS: All tests passed"
end 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-19T20:19:50.983

如果没有想到一个小技巧，这个问题看起来很难:)。我在这份 codility 文档中发现了这个技巧：[https](https://codility.com/media/train/6-Leader.pdf "领导者") ://codility.com/media/train/6-Leader.pdf 。

线性解决方案在本文档的底部进行了说明。

我实现了以下 java 程序，它在同一行上给了我 100 分。

```
public int solution(int[] A) {

    Stack<Integer> stack = new Stack<Integer>();

    for (int i =0; i < A.length; i++)
    {
        if (stack.empty())
            stack.push(new Integer(A[i]));
        else
        {
            int topElem = stack.peek().intValue();
            if (topElem == A[i])
            {
                stack.push(new Integer(A[i]));
            }
            else
            {
                stack.pop();
            }
        }            
    }

    if (stack.empty())
        return -1;

    int elem = stack.peek().intValue();
    int count = 0;
    int index = 0;
    for (int i = 0; i < A.length; i++)
    {
        if (elem == A[i])
        {
            count++;
            index = i;
        }
    }

    if (count > ((double)A.length/2.0))
        return index;
    else
        return -1;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-05-25T21:28:16.973

100% 得分 JavaScript 解决方案。从技术上讲，它是 O(nlogn) 但仍然通过了。

```
function solution(A) {
  if (A.length == 0)
    return -1;

  var S = A.slice(0).sort(function(a, b) {
    return a - b;
  });

  var domThresh = A.length/2;
  var c = S[Math.floor(domThresh)];
  var domCount = 0;

  for (var i = 0; i < A.length; i++) {
    if (A[i] == c)
      domCount++;

    if (domCount > domThresh)
      return i;
  }

  return -1;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-06-10T23:09:12.670

这是 VB.NET 中具有 100% 性能的解决方案。

```
Dim result As Integer = 0
        Dim i, ladderVal, LadderCount, size, valCount As Integer
        ladderVal = 0
        LadderCount = 0
        size = A.Length
        If size > 0 Then

            For i = 1 To size - 1
                If LadderCount = 0 Then
                    LadderCount += 1
                    ladderVal = A(i)
                Else
                    If A(i) = ladderVal Then
                        LadderCount += 1
                    Else
                        LadderCount -= 1
                    End If
                End If
            Next
            valCount = 0
            For i = 0 To size - 1
                If A(i) = ladderVal Then
                    valCount += 1
                End If
            Next
            If valCount <= size / 2 Then
                result = 0
            Else
                LadderCount = 0
                For i = 0 To size - 1
                    If A(i) = ladderVal Then
                        valCount -= 1
                        LadderCount += 1
                    End If
                    If LadderCount > (LadderCount + 1) / 2 And (valCount > (size - (i + 1)) / 2) Then
                        result += 1
                    End If
                Next
            End If
        End If
        Return result 
```

[查看代码的正确性和性能](https://codility.com/demo/results/demoQ66TS4-V78/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-05-26T20:12:52.063

我测试我的代码在 2 到 9 之间的数组长度中工作正常

```
public static int sol (int []a)
{
    int count = 0 ;
    int candidateIndex = -1;
    for (int i = 0; i <a.length ; i++)
    {
        int nextIndex = 0;
        int nextOfNextIndex = 0;

        if(i<a.length-2)
        {
            nextIndex = i+1;
            nextOfNextIndex = i+2;
        }
        if(count==0)
        {
            candidateIndex = i;
        }
        if(a[candidateIndex]== a[nextIndex])
        {
            count++;

        }
        if (a[candidateIndex]==a[nextOfNextIndex])
        {
            count++;

        }

    }
    count -- ;
    return count>a.length/2?candidateIndex:-1;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-12-15T15:20:30.203

100% 在 PHP [https://codility.com/demo/results/trainingVRQGQ9-NJP/](https://codility.com/demo/results/trainingVRQGQ9-NJP/)

```
function solution($A){

    if (empty($A)) return -1;

    $copy = array_count_values($A);  // 3 => 7, value => number of repetition

    $max_repetition = max($copy); // at least 1 because the array is not empty

    $dominator = array_search($max_repetition, $copy);

    if ($max_repetition > count($A) / 2) return array_search($dominator, $A); else return -1;

} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-11-25T14:58:07.940

下面的解决方案解决了复杂度 O(N)。

```
public int solution(int A[]){
    int dominatorValue=-1;
    if(A != null && A.length>0){
        Hashtable<Integer, Integer> count=new Hashtable<>();
        dominatorValue=A[0];
        int big=0;
        for (int i = 0; i < A.length; i++) {
            int value=0;
            try{
                value=count.get(A[i]);
                value++;
            }catch(Exception e){
            }
            count.put(A[i], value);
            if(value>big){
                big=value;
                dominatorValue=A[i];
            }
        }
    }
    return dominatorValue;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-03-15T08:49:14.323

添加具有 O(1) 空间的 Java 100/100 O(N) 时间：

```
// you can also use imports, for example:
import java.util.Stack;

// you can write to stdout for debugging purposes, e.g.
// System.out.println("this is a debug message");

class Solution {
    public int solution(int[] A) {
        // write your code in Java SE 8
        int count = 0;
        Stack<Integer> integerStack = new Stack<Integer>();
        for (int i = 0; i < A.length; i++) {
            if (integerStack.isEmpty()) {
                integerStack.push(A[i]);
            } else if (integerStack.size() > 0) {
                if (integerStack.peek() == A[i])
                    integerStack.push(A[i]);
                else
                    integerStack.pop();
            }
        }
        if (!integerStack.isEmpty()) {
            for (int i = 0; i < integerStack.size(); i++) {
                for (int j = 0; j < A.length; j++) {
                    if (integerStack.get(i) == A[j])
                        count++;
                    if (count > A.length / 2)
                        return j;
                }
                count = 0;
            }
        }
        return -1;
    }
} 
```

这是来自 codility的测试[结果。](https://app.codility.com/demo/results/trainingEEMTV7-F3K/)

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2013-06-26T11:07:00.113

```
class Program
{
    static void Main(string[] args)
    {
        int []A= new int[] {3,6,2,6};
        int[] B = new int[A.Length];
        Program obj = new Program();
        obj.ABC(A,B);

    }

    public int ABC(int []A, int []B)
    { 
        int i,j;

        int n= A.Length;
        for (j=0; j<n ;j++)
        {
            int count = 1;
            for (i = 0; i < n; i++)
            {
                if ((A[j]== A[i] && i!=j))
                {
                    count++;

                }

             }
           int finalCount = count;
            B[j] = finalCount;// to store the no of times a number is repeated 

        }
       // int finalCount = count / 2;
        int finalCount1 = B.Max();// see which number occurred max times
        if (finalCount1 > (n / 2))
        { Console.WriteLine(finalCount1); Console.ReadLine(); }

        else
        { Console.WriteLine("no number found"); Console.ReadLine(); }
        return -1;
    }
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2012-11-24T19:31:22.803

C＃

```
int dominant = 0;
        int repeat = 0;
        int? repeatedNr = null;
        int maxLenght = A.Length;
        int halfLenght = A.Length / 2;
        int[] repeations = new int[A.Length];

        for (int i = 0; i < A.Length; i++)
        {
            repeatedNr = A[i];
            for (int j = 0; j < A.Length; j++)
            {
                if (repeatedNr == A[j])
                {
                    repeations[i]++;
                }
            }
        }
        repeatedNr = null;
        for (int i = 0; i < repeations.Length; i++)
        {
            if (repeations[i] > repeat)
            {
                repeat = repeations[i];
                repeatedNr = A[i];
            }
        }
        if (repeat > halfLenght)
            dominant = int.Parse(repeatedNr.ToString()); 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2013-09-12T07:03:56.730

在 Ruby 中，您可以执行类似的操作

```
def dominant(a)
  hash = {}
  0.upto(a.length) do |index|
    element = a[index]
    hash[element] = (hash[element] ? hash[element] + 1 : 1)
  end

  res = hash.find{|k,v| v > a.length / 2}.first rescue nil
  res ||= -1
  return res
end 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2012-09-28T07:48:27.093

我认为这个问题已经在某个地方得到了解决。“官方”解决方案应该是：

```
 public int dominator(int[] A) {
    int N = A.length;

    for(int i = 0; i< N/2+1; i++)
    {
        int count=1;
        for(int j = i+1; j < N; j++)
        {
            if (A[i]==A[j]) {count++; if (count > (N/2)) return i;}
        }
    }

    return -1;
  } 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2012-10-06T21:48:18.650

先对数组进行排序怎么样？然后，您比较已排序数组的中间元素、第一个元素和最后一个元素，以找到主要元素。

```
public Integer findDominator(int[] arr) {
    int[] arrCopy = arr.clone();

    Arrays.sort(arrCopy);

    int length = arrCopy.length;
    int middleIndx = (length - 1) /2;

    int middleIdxRight;
    int middleIdxLeft = middleIndx;

    if (length % 2 == 0) {
        middleIdxRight = middleIndx+1;
    } else {
        middleIdxRight = middleIndx;
    }

    if (arrCopy[0] == arrCopy[middleIdxRight]) {
        return arrCopy[0];
    }

    if (arrCopy[middleIdxLeft] == arrCopy[length -1]) {
        return arrCopy[middleIdxLeft];
    }

    return null;
} 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2017-10-30T16:56:24.540

@Keith Randall 解决方案不适用于 {1,1,2,2,3,2,2}

他的解决方案是：

```
element x;
int count ← 0;
For(i = 0 to n − 1) {
  if(count == 0) { x ← A[i]; count++; }
  else if (A[i] == x) count++;
  else count−−;
}
Check if x is dominant element by scanning array A 
```

我将其转换为java，如下所示：

```
int x = 0;
int count = 0;

for(int i = 0; i < (arr.length - 1); i++) {

    if(count == 0) {
        x = arr[i];
        count++;
    }
    else if (arr[i] == x)
        count++;

    else count--;
}

return x; 
```

输出：3 预期：2

* * *

## 回答 #24

> 赞同：-3
> 
> 时间：2013-01-18T15:19:21.883

这是我在 Java 中的答案：我将一个计数存储在单独的数组中，该数组计算输入数组的每个条目的重复项，然后保留一个指向具有最多重复项的数组位置的指针。这是统治者。

```
private static void dom(int[] a) {
        int position = 0;
        int max = 0;
        int score = 0;
        int counter = 0;
        int[]result = new int[a.length];

        for(int i = 0; i < a.length; i++){
            score = 0;
            for(int c = 0; c < a.length;c++){

                if(a[i] == a[c] && c != i ){
                    score = score + 1;
                    result[i] = score; 
                    if(result[i] > position){
                        position = i;
                    }
            }

            }
        }

                 //This is just to facilitate the print function and MAX = the number of times that dominator number was found in the list.

        for(int x = 0 ; x < result.length-1; x++){
            if(result[x] > max){
                max = result[x] + 1;
            }

        }

  System.out.println(" The following number is the dominator " + a[position] +  " it appears a total of " + max);

} 
```

# php - 如何通过jquery自动完成在mysql中显示单个数据

> ID：12417384
> 
> 赞同：0
> 
> 时间：2012-09-14T02:31:04.113
> 
> 标签：php, javascript, codeigniter, autocomplete

我在这里遇到问题我想使用自动完成显示数据库中的数据但是当我在文本框中搜索时，它会显示所有内容，例如

```
c++javaphpcoldfusionjavascriptaspruby 
```

但我想要的是

```
"c++", "java", "php", "coldfusion", "javascript", "asp", "ruby" 
```

这是我的代码

控制器

```
 function get_ingredients() {
          $this->load->helper(array('form', 'url'));
        $this->load->library('form_validation');

             $this->load->model("save_datas");
        $data["show_ingre"] = $this->save_datas->select_ingredient();
        $this->load->view("view_home", $data);
    } 
```

看法

```
<script>
            $(document).ready(function() {
                $("input#autocomplete").autocomplete({
                    source: ["<?php
foreach ($show_ingre as $ingre) {
    echo "$ingre->ingredient";
}
?>"]

                    });
                });
        </script>

   <?php echo form_open('home/save_input'); ?>
        <input type="text" name="ingredient" id="autocomplete" /><br/>
        <input type="submit" name="submit"/>
        <?php form_close(); ?> 
```

模型

```
function select_ingredient() {
        $query = $this->db->query("SELECT ingredient FROM ingredients");
        return $query->result();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:59:02.963

视图文件搞砸了。看看你的页面源代码。它应该是这样的：

```
 <script>
 $(document).ready(function() {
     $("input#autocomplete").autocomplete({
         source: ["c++javaphpcoldfusionjavascriptaspruby"]
     });
 });
 </script> 
```

我认为您应该能够在这里看到问题。无论如何，如果你没有，这里是修复它的代码：

```
<script>
$(document).ready(function() {
    $("input#autocomplete").autocomplete({
        source: [<?php
        foreach ($show_ingre as $ingre) {
            echo '"' . $ingre->ingredient . '", ';
        }
        ?>]
    });
});
</script> 
```

# php - 从命令行参数打印结果

> ID：12417386
> 
> 赞同：0
> 
> 时间：2012-09-14T02:31:31.603
> 
> 标签：php, shell, command-line, shell-exec

好的，最后一个问题，我的这个脚本已经完成:) 我在我的邮件服务器上安装了 pflogsumm，并且我已经完成了（完全丑陋但功能齐全）的 php 邮件服务器管理脚本，可通过任何浏览器的 https 连接使用。我想在登录时运行以下命令并在登录页面上显示结果：

```
pflogsumm /var/log/mail.log 
```

这个命令从命令行工作我已经尝试过 exec() 和 shell_exec() 并且我得到一个空白屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:00:16.293

```
<?php echo shell_exec('/usr/sbin/pflogsumm /var/log/mail.log'); ?> 
```

显然是正确的代码，我所要做的就是找到程序的正确路径。在查看源代码中，我得到了像在命令提示符中一样显示的统计信息，但在网页上它显示为在句子上运行...

# qemu - 谁能介绍一些关于 qemu-kvm 和 kvm 的入门知识？

> ID：12417388
> 
> 赞同：2
> 
> 时间：2012-09-14T02:31:49.693
> 
> 标签：qemu, kvm

我是kvm的新手，qemu-kvm和kvm现在都非常复杂。谁能介绍一些关于 qemu-kvm 和 kvm 的入门知识？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T04:07:20.363

**KVM**代表基于内核的虚拟机。它使您能够创建任意数量的虚拟机。这些机器可以是基于 LVM 或基于非 LVM 的两种类型。那些基于 LVM 的机器可以为它们进行实时备份。对于非基于 lvm 的 VM，您无法进行实时备份，即当您为它们进行备份时它们将被暂停。请参考 KVM 主页[KVM 主页](http://www.linux-kvm.org/page/Main_Page)。

**QEMU**是一个通用的开源机器仿真器和虚拟器。当用作机器仿真器时，QEMU 可以在另一台机器（例如您自己的 PC）上运行为一台机器（例如 ARM 板）制作的操作系统和程序。通过使用动态翻译，它实现了非常好的性能。当用作虚拟器时，QEMU 通过直接在主机 CPU 上执行客户代码来实现接近原生的性能。在 Xen 管理程序下执行或在 Linux 中使用 KVM 内核模块时，QEMU 支持虚拟化。使用 KVM 时，QEMU 可以虚拟化 x86、服务器和嵌入式 PowerPC 以及 S390 来宾。

要管理 KVM VM，您需要安装**Libvirt**，它是虚拟化库。它为您提供启动、暂停、恢复、克隆、重新启动、列出虚拟机的工具。更多参考请参考[Libvirt 主页](http://libvirt.org/drvqemu.html)。

如果您正在处理一些**备份或恢复过程**，那么我建议您也阅读[这个](http://pof.eslack.org/2010/12/23/best-solution-to-fully-backup-kvm-virtual-machines/)出色的 perl 脚本，它可以让您清楚地了解如何为 KVM 虚拟机拍摄备份和快照。

一旦你了解了它们的理论并开始实现它们，基于 KVM 的虚拟机并不复杂。我相信一旦你开始研究它们，你会发现管理它们的乐趣。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T07:50:25.647

简而言之

**QEMU**：将客户操作系统的指令翻译成主机操作系统的模拟器。正如您可以猜到的那样，翻译有一定的成本，您不会看到访客机器的运行速度与主机机器一样快。
有关更多信息，请参阅[QEMU wiki](http://wiki.qemu.org/Main_Page)

**KVM**（内核虚拟机）：内核中的一个模块，在硬件中支持虚拟机（主机操作系统）。通过支持，我的意思是如果您的客户架构与主机架构相同，那么当然不需要翻译指令，因为它们可以直接由主机执行。对于这种现代硬件配备了特殊的寄存器和 KVM 所利用的存储位置。KVM 也是一个模块，使用 KVM 需要一些驱动程序，这也是 qemu。
有关更多信息，请参阅同一 wiki 中的[KVM 部分](http://wiki.qemu.org/KVM)。

**QEMU-KVM**：正如我上面提到的，KVM 只是一个模块，需要（或其他）qemu 才能使用 KVM。当 KVM 与 QEMU 一起使用时，控制从 QEMU 转移到 KVM，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:46:39.553

> 谈论 KVM 就是谈论虚拟化技术或内核模块（kvm.ko、kvm-intel.ko 或 kvm-amd-ko）。有时将 KVM 称为虚拟机，这是不正确的，因为 KVM 不提供虚拟化硬件。

[资源](http://alexander.holbreich.org/2013/03/qemu-kvm-introduction/)

# php - 基于函数创建一个新数组

> ID：12417393
> 
> 赞同：0
> 
> 时间：2012-09-14T02:32:18.077
> 
> 标签：php, html

我只是在学习使用 php，我一直在研究这个效率不高的代码，因为它很长，我希望它更加自动化。这个想法是生成一个包含 2 个列的表，一个包含用户名，另一个包含每个用户的分数。正如您可能想象的那样，分数基于使用同一用户的其他变量的函数。我的目标是只需为每个用户设置一个变量，并在表的末尾自动创建一个新行。

```
<?php
$array1['AAA'] = "aaa"; ## I'm suposed to only set the values for array1, the rest
$array1['BBB'] = "bbb"; ## should be automatic
$array1['ETC'] = "etc";

function getscore($array1){
   ## some code
   return $score;
   };

$score['AAA'] = getscore($array1['AAA']);
$score['BBB'] = getscore($array1['BBB']);
$score['ETC'] = getscore($array1['ETC']);
?>
<-- Here comes the HTML table --->
<html>
<body>
<table> 
<thead> 
  <tr> 
      <th>User</th> 
      <th>Score</th> 
  </tr> 
</thead> 
<tbody> 
  <tr> 
      <td>AAA</td> <-- user name should be set automaticlly too -->
      <td><?php echo $score['AAA'] ?></td> 
  </tr> 
  <tr> 
      <td>BBB</td> 
      <td><?php echo $score['BBB'] ?></td> 
  </tr> 
  <tr> 
      <td>ETC</td> 
      <td><?php echo $winrate['ETC'] ?></td> 
  </tr>
</tbody>
</table>
</body>
</html> 
```

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:22:14.900

这有点干净，使用`foreach`and `printf`：

```
<?php

$array1 = array(
  ['AAA'] => "aaa",
  ['BBB'] => "bbb",
  ['ETC'] => "etc"
);

function getscore($foo) {
   ## some code
   $score = rand(1,100); // for example
   return $score;
};

foreach ($array1 as $key => $value) {
  $score[$key] = getscore($array1[$key]);
}

$fmt='<tr>
      <td>%s</td>
      <td>%s</td>
  </tr>';

?>
<-- Here comes the HTML table --->
<html>
<body>
<table><thead>
  <tr>
      <th>User</th>
      <th>Score</th>
  </tr></thead><tbody><?php

foreach ($array1 as $key => $value) {
  printf($fmt, $key, $score[$key]);
}

?>
</tbody></table>
</body>
</html> 
```

另外，我会注意到您似乎没有使用`$array1`任何地方的值。另外，我不确定`$winrate`您的代码中有什么，所以我忽略了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:47:16.087

```
$outputHtml = ''
foreach( $array1 as $key => $val ) 
{
    $outputHtml .= "<tr> ";
    $outputHtml .= "      <td>$key</td>";
    $outputHtml .= "      <td>".getscore($array1[$key]);."</td>";
    $outputHtml .= "  </tr>";
} 
```

然后`$outputHtml`将是 html 内容，其中包含您要显示的所有行

# android - Android Annotations: Annotated class Xyz_ not found it's original ("cannot find symbol class Xyz")

> ID：12417395
> 
> 赞同：13
> 
> 时间：2012-09-14T02:32:51.773
> 
> 标签：android, annotations, intellij-idea, android-annotations

我使用最新的 Android Annotations 2.6 和 IntelliJ IDEA。有时我总是对注释/类路径/编译顺序有问题。似乎不规律地发生。我今天早些时候编译了项目，后来更改了 res/layout-xml 文件，然后我尝试构建项目并收到错误。

但是 xml 和 java 源文件中没有语法错误或任何内容。

问题是带注释的类没有找到它的原始类，得到

```
cannot find symbol class Intro 
```

错误。

我的项目结构：

```
/src/
    /app/activity/Intro
    ...
/gen-annotation-processed/
    /app/activity/Intro_
    ...
/gen
    ... 
```

我的 IDEA 注释偏好：

处理器路径：

```
/path/to/project/ext-libs/androidannotations-2.6.jar 
```

处理器 FQ 名称：

```
com.googlecode.androidannotations.AndroidAnnotationProcessor 
```

项目的 Android IDEA 模块中的源文件夹：

```
gen
gen-annotation-processed
src 
```

![在此处输入图像描述](../Images/ee31feff8f7cb9ab6e502029932bb611.png)

构建项目时在IDEA中登录出错（通过IDEA，没有ant或maven）：

![在此处输入图像描述](../Images/d5ca4e70281165f5d771658e3b287d0a.png)

（“Intro”类存在于 src 文件夹中，其中没有错误。）

**更新**：我现在可以使用它，但不确定在来回设置设置后我改变了什么/在哪里改变了一些东西。它实际上可能只是 IDEA 的一个问题，实际上与 android-annotations 无关，还不确定。

通常似乎有效的是：进行**重建**（可能会引发编译错误，忽略）。然后进行**构建**（不是完整的重建）。由于某些原因，在进行rebuild时多次编译运行不能正常工作，需要rebuild+build组合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T14:25:58.847

上面提到的问题是 IDEA 12 引入的新构建系统的问题，结合 AA 2.x 的问题，同时在 AA 3 中修复。

看：

*   [http://github.com/excilys/androidannotations/issues/423](http://github.com/excilys/androidannotations/issues/423)
*   [http://github.com/excilys/androidannotations/issues/471](http://github.com/excilys/androidannotations/issues/471)

（无论如何，正如@outlying 所提到的，maven 通常是一个好主意，让它完全独立于 IDE。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T14:07:15.393

您是否尝试过此链接[http://www.ashokgelal.com/2012/12/setting-up-intellij-idea-12-with-maven-actionbarsherlock-roboelectric-androidannotations/](http://www.ashokgelal.com/2012/12/setting-up-intellij-idea-12-with-maven-actionbarsherlock-roboelectric-androidannotations/)？

它对我来说就像一个魅力，我能够在 IDEA 上用 AA 设置几个项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-12T10:58:36.357

您必须在 File->Other Settings->Default Settings.. 上启用 android 注释处理。

[![在此处输入图像描述](../Images/7946ed558e336067e8c50e54af0e253e.png)](https://i.stack.imgur.com/zzdfU.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-28T03:47:48.597

```
转到您的应用程序 build.gradle
并删除

apt“org.androidannotations:androidannotations:{xxx}”
编译'org.androidannotations:androidannotations-api:{xxx}'

然后再放一次
apt“org.androidannotations:androidannotations:{xxx}”
编译'org.androidannotations:androidannotations-api:{xxx}'

并重建

它对我有用

```

# android - Android Permission Denial：启动意图

> ID：12417397
> 
> 赞同：0
> 
> 时间：2012-09-14T02:32:54.473
> 
> 标签：android, permissions

此安全异常正在阻止我的程序完全执行

```
ActivityManager: java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.kite.agm/.KiteActivity } from null (pid=31991, uid=2000) requires null 
```

如何解决这个问题？

这是清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.kite.agm"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/pbird_1"
    android:label="@string/app_name"
     >
    <activity
        android:name=".SplashScreen"
        android:label="@string/app_name"
        android:screenOrientation="landscape" >
         <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>
     <activity android:name="MenuScreen"
        android:orientation="horizontal"
        android:screenOrientation="landscape" />
      <activity android:name=".KiteActivity"
        android:orientation="horizontal"
        android:screenOrientation="landscape"
        android:permission="android.permission.PERSISTENT_ACTIVITY" >
         <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </activity>

     <activity android:name=".GameOver"
        android:orientation="horizontal"
        android:screenOrientation="landscape" />
  </application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:50:11.013

可能你忘了在这里打句号

```
<activity android:name="MenuScreen"
        android:orientation="horizontal"
        android:screenOrientation="landscape" />

<activity android:name="MenuScreen" 
```

应该：

```
<activity android:name=".MenuScreen" 
```

# ruby-on-rails - 有没有办法在某些回调之前和之后比较对象的状态？

> ID：12417402
> 
> 赞同：0
> 
> 时间：2012-09-14T02:33:46.120
> 
> 标签：ruby-on-rails, ruby

当我们网站上的评论被销毁时，`after_destroy`回调用于更新统计信息：

```
after_destroy do |p|
  p.topic.update_attribute(:replies, p.replies - 1)
end 
```

当评论被“软删除”时，我希望能够做同样的事情。当评论被软删除时，该`comment.visible`字段设置为从`1`到`0`。

有没有办法判断在更新回调期间何时发生这种情况？就像是：

```
after_update do |p|
  if p.visible was changed from 1 to 0, then update stats.
    p.visible.update_attribute(:replies, p.replies - 1)
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T02:53:16.343

你可以`p.visible_changed?`看看它是否改变了。您还可以通过其他提供给您的方法查看它的变化以及它的变化，[`ActiveModel::Dirty`](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)默认情况下，所有`ActiveRecords`.

# bash - 如何将文件中的行从最短到最长排序？

> ID：12417403
> 
> 赞同：3
> 
> 时间：2012-09-14T02:33:56.217
> 
> 标签：bash, sorting, awk

类似于[从最长到最短排序行](https://stackoverflow.com/questions/8296649/sorting-lines-from-longest-to-shortest)，如何将文件中的所有行从最短到最长排序？例如”

```
这是一个很长的句子。
这不是那么长。
这不长。

```

那变成：

```
这不长。
这不是那么长。
这是一个很长的句子。

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T02:40:36.847

它与您提供的链接几乎完全相同

```
awk '{ print length($0) " " $0; }' $file | sort -n | cut -d ' ' -f 2- 
```

该`-r`选项用于反转排序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T15:17:36.510

```
perl -ne 'push @a, $_ } { print sort { length $a <=> length $b } @a' input 
```

（在我的盒子上，它的运行速度比`awk | sort | cut`解决方案快 4 倍。）

请注意，这使用了一个可怕的惯用语并滥用语义`-n`来节省一些击键。最好把它写成：

```
perl -ne '{ push @a, $_ } END { print sort { length $a <=> length $b } @a }' input 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T09:59:53.947

**请注意，此解决方案在大输入时效果不佳。**

您还可以在以下范围内进行排序`awk`：

```
cat << EOF > file
This is a long sentence.
This is not so long.
This is not long.
EOF 
```

*排序.awk*

```
# Only find length once
{ len = length($0) }     

# If we haven't seen this line before add it to the lines array 
# and move on to next record
lines[len] == "" { lines[len] = $0; next }

# A duplicate, append to the previous record
{ lines[len] = lines[len] RS $0 }

END {
  # lines array is sorted according to the indices, the sorted
  # indices are stored in the indices array
  asorti(lines, indices)
  for(key in indices)
    print lines[indices[key]]
} 
```

像这样运行：

```
awk -f sort.awk file 
```

或作为单行：

```
< file awk '{ len = length($0) } lines[len] == "" { lines[len] = $0; next } { lines[len] = lines[len] RS $0 } END { asorti(lines, indices); for(key in indices) print lines[indices[key]] }' 
```

输出：

```
This is not long.
This is not so long.
This is a long sentence. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-05T02:23:35.267

使用 POSIX awk：

```
{
  c = length
  m[c] = m[c] ? m[c] RS $0 : $0
} END {
  for (c in m) print m[c]
} 
```

[例子](//github.com/svnpenn/dotfiles/blob/d0cf984/bash/.bashrc#L28-L37)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-04T00:25:52.777

另一个 perl 实现：

`perl -ne 'print length($_)." $_"' file | sort -n | cut -d ' ' -f 2-`

`$_`是当前行，类似于awk的`$0`

# java - java：将值应用于列，3d数组

> ID：12417416
> 
> 赞同：0
> 
> 时间：2012-09-14T02:36:15.230
> 
> 标签：java, multidimensional-array

好吧，我被告知要做一个名为 x blah blah 的 3d 整数数组，有 3 行 2 列，每列有 4 个整数。第一行的元素都是 5，第二行的元素都是 7，第三行第一列的元素都是 8，第二列的元素是 30、31、32 和 33。

```
int[][][] x = new int[3][2][]= {{5,5,5,5},{7,7,7,7},{8,30,31,32,33}}; 
```

这就是我想出的，但我不确定将值应用于“列”

是的，这是家庭作业，但我对下一步该怎么做感到困惑，这是确切的问题

声明、创建和初始化一个整数的三维数组 x，它有 3 行，每行有 2 列，其中每列是一个 4 个整数的数组。第一行的元素都是 5，第二行的元素都是 7，第三行第一列的元素都是 8，第二列的元素是 30、31、32 和 33。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:50:48.213

您的数组将包含 24 个项目：3 * 2 * 4。第一行将包含 8 个整数，因为它有 2 列，每列包含 4 个整数。最好尝试在您的脑海中将其可视化，但不是作为平面行 x 列数组，而是在 3 维中，数字突出在页面之外。

此外，您还需要将大括号嵌套 3 深，以使其成为 3-D 数组。您的尝试目前仅将括号嵌套两个深，如在二维数组中所见。由于这是家庭作业，我们不应该为您解决这个问题，但我们可以帮助您。所以请再试一次，向我们展示你的想法。

**编辑**
此外，您的代码将无法编译，因此最好将其废弃并重新尝试。同样，如果您遇到问题，请编辑您的帖子并通过评论通知我们您的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T18:01:53.760

我通过了同样的问题，我发现这有效......

```
`int[][][] x = {{{5,5,5,5},{5,5,5,5}},
           {{7,7,7,7},{7,7,7,7}},
           {{8,8,8,8},{30,31,32,33}}};` 
```

我已经在eclipse中测试过了。

# java - 在java中将2个arrayLists相乘

> ID：12417418
> 
> 赞同：2
> 
> 时间：2012-09-14T02:36:52.397
> 
> 标签：java, arraylist, int

所以我有两个 arrayLists 代表两个数字。这样我就不必使用 BigInt。所以例如

```
ArrayList<Integer> LargeInt = [2,3,6,4] would really equal 2,364
ArrayList<Integer> LargeInt2 = [8,7,9,4,6] would be 87,946 
```

我的目标是找出一种方法将这两个数字相乘并得出一个字符串的答案。我知道在放入字符串之前将两个数字相乘需要放入另一个数组中，这样它就不会因更大的数字而崩溃。我也知道这将是一个 for 循环放入另一个循环。但我发现很难制作一个将这两个数字相乘的代码。相乘的两个数组可以是任意数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T02:44:26.823

假设这是家庭作业，以下是您需要做的无代码说明：

*   定义一个包装类`ArrayList<Integer>`；假设你称之为`ArrayInt`
*   定义一个运算，将两个`ArrayInt`s 相加，并返回`ArrayInt`等于它们总和的第三个。您可以逐位进行，注意可能进位到一个额外的数字，因此您需要相应地调整结果的大小。
*   通过向数组列表添加零来定义一个将您的数字乘以十的幂的操作。同样，该操作应该返回一个新的`ArrayInt`，而不是修改当前的
*   定义一个数字乘以一位数的运算。您可以使用乘法，或使用加法的简单循环。循环不会运行超过九次，所以应该不会太糟糕。
*   将您拥有的三个运算（加法、数字乘法和十次方乘法）组合成您在小学学习的简单乘法算法。

# actionscript-3 - AS3 子 TextField 无法正常缩放

> ID：12417419
> 
> 赞同：0
> 
> 时间：2012-09-14T02:36:54.230
> 
> 标签：actionscript-3, flash, textfield, scaling

我有一个带有文本字段孩子的精灵。此文本字段使用 htmlText 并且是多行的。当我缩放精灵时，文本字段也会缩放，但并不完美。当我将精灵调整为更小的尺寸时，我最终会切断文本的底部几行。

as3 是否支持文本字段的自动缩放？我想出了一些解决方法，我在 htmlText 上执行 string.replace() 并注入我自己的字体大小，但如果这只是在我缩放父精灵时起作用，那将是惊人的（并且可能更有效）。

任何提示表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:12:57.063

您是否对文本字段中显示的文本使用嵌入字体？如果不是这样，Flash 将无法将文本缩放为“字形”，因此文本缩放不会像精灵那样成比例。

# grails - grails 中的 TransientObjectException

> ID：12417420
> 
> 赞同：0
> 
> 时间：2012-09-14T02:36:55.713
> 
> 标签：grails

我正在做一个项目，我有两个域。

```
class Author {
     Book book
     String name
}

class Book {
     Author author
     String title
} 
```

我已经在数据库中保存了域作者的一个实例，并且在服务中我做了这样的事情：

```
def authorInstance = Author.getById(1)
def bookInstance = new Book(author:authorInstance, title: "Foo") 
```

但是我并没有保存 bookInstance，而是将它用于多个进程。这给了我 org.hibernate.TransientObjectException。我也尝试做类似的事情：

```
def authorInstance = Author.getById(1)
def aI = authorInstance
def bookInstance = new Book(aI, title: "Foo") 
```

但在这种情况下，我也会遇到同样的错误。我以这种方式工作是因为我使用的是遗留代码，所以我不能改变太多。有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:42:07.267

您显然正在更改您设置的 authorInstance 的某些字段。就是这么`TransientObjectException`说的：`"object references an unsaved transient instance"`。请务必阅读并引用错误消息。

保存`Author`之前保存一本书。或者不要修改它。

您可能想使用[hasMany](http://grails.org/doc/2.1.0/ref/Domain%20Classes/hasMany.html)和[belongsTo](http://grails.org/doc/2.1.0/ref/Domain%20Classes/belongsTo.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T19:23:30.463

顺便说一句，您可能的替换代码还有另一个问题。代替：

```
def bookInstance = new Book(aI, title: "Foo") 
```

你需要

```
def bookInstance = new Book(author:aI, title: "Foo") 
```

Book 声明了一个内存中的构造函数，它接受一个 Map 对象，“author”和“title”是该 Map 的键。这个结构然后使用映射来初始化类成员。

# tfs - 在 TFS 2012 beta 中构建失败，但该解决方案在 Visual Studio 2012 RC 中成功构建

> ID：12417422
> 
> 赞同：2
> 
> 时间：2012-09-14T02:37:59.023
> 
> 标签：tfs, tfsbuild

我正在尝试让构建在 TFS 中的构建代理上运行。我可以在 Visual Studio 2012 RC 中成功构建解决方案，其他开发人员也可以在他们的解决方案中做同样的事情。我为调试配置创建了构建定义，并在 TFS 服务器中将构建排入队列。我收到以下错误日志。

```
Error:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets (1046): The command "IF EXIST ../batch (
    cd ../batch
) ELSE (
    cd ../../Sources/Solution_Name/Project_Name/batch
)
createDepsFile Project_Name
" exited with code 9009.

C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets (1561): Could not resolve this reference. Could not locate the assembly "System.Web.Optimization". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets (1561): Could not resolve this reference. Could not locate the assembly "System.Web.Providers". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.
Error  Global.asax.cs (16): The type or namespace name 'Optimization' does not exist in the namespace 'System.Web' (are you missing an assembly reference?) 
```

我检查了添加到项目中的参考。我找不到那些程序集。在查看了所有帖子后，我发现了一些很好的建议，例如使用 NuGet 将这些程序集添加到解决方案中，然后在 TFS 中签入解决方案。缺少参考只是“警告”而不是错误。我仍然无法在我正在寻找的 Nuget 中找到所有程序集。一些帖子提到该项目可能指的是 .Net 4.5 而不是安装在构建机器中的 .Net 4.0。在我确切地知道问题所在之前，我不想更改解决方案。我分散在这个问题上。

在这一点上，我认为它与构建定义无关。Code 9009 也无济于事。我可能错了。任何建议都需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:47:51.163

System.Web.Optimization 和 System.Web.Providers 听起来像是一个 ASP MVC 项目。无论如何，请尝试以下方法：

*   将两个引用的“复制本地”属性设置为 False。
*   保存更改
*   将其设置回 True 并触发构建。

对我来说，这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:21:49.653

谢谢大家的回复。我发现了问题。一些 .dll 不在正确的路径上。我只是将 .dll 移动到 MSbuild 正在寻找的地方之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T04:10:31.580

听起来您缺少对构建服务器的一些依赖项。我不确定你必须在你的开发者机器上安装什么来获得 System.Web.Optimization 和 System.Web.Providers，但如果它只是 VS 2012，那么你可以尝试在构建代理服务器上安装 VS 2012。

# node.js - 通过多个模块方法访问 mongodb/mongoskin 的效率？

> ID：12417425
> 
> 赞同：3
> 
> 时间：2012-09-14T02:38:51.957
> 
> 标签：node.js, mongodb, rest, express, mongoskin

我正在开发一个提供 REST api 的快速应用程序，它通过 mongoskin 使用 mongodb。我想要一个将路由与数据库访问分开的层。我看过一个通过创建模块文件来创建数据库桥的示例，例如 models/profiles.js：

```
var mongo = require('mongoskin'),
db = mongo.db('localhost:27017/profiler'),
profs = db.collection('profiles');

exports.examplefunction = function (info, cb) {
  //code that acess the profs collection and do the query
} 
```

稍后在路由文件中需要此模块。

我的问题是：如果我使用这种方法为每个集合创建一个模块，它会有效吗？通过这样做，我是否有从 mongo 连接和断开多个（不必要的）时间的问题？

我想也许将 db 变量从一个模块导出到处理每个集合的其他模块可以解决假定的问题，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:17:45.503

使用单个连接，然后创建传递共享数据库实例的模块。您希望避免为每个模块设置单独的数据库池。这样做的一个是将模块构造为一个类。

```
exports.build = function(db) {
 return new MyClass(db);
}

var MyClass = function(db) {
  this.db = db;
}

MyClass.doQuery = function() {
} 
```

# android - 在android应用程序中创建墙

> ID：12417429
> 
> 赞同：0
> 
> 时间：2012-09-14T02:39:30.033
> 
> 标签：android, mysql, web-services

我可以在包含 Facebook 应用程序的墙的 android 上作为本机应用程序执行，我使用 mysql 数据库与 web 服务进行通信，但基本上我想知道的是我应该如何发送该信息以放置在我的 Android 墙中app，不喜欢墙的设计，如果我需要listview的帮助，或者别的什么，也不喜欢在墙上画数据字符串，请帮帮我，像墙上的facebook一样显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:08:46.263

你的问题太开放了（也有点混乱）。您可以以任何您想要的格式发送数据（XML 或 JSON 是首选方式）。当然，您需要使用某种序列化库来读取这些数据（Jackson for JSON 是一个很好的库）。然后您可能希望在 ListView 中显示数据，创建自定义适配器。

这种应用程序有很多部分，因此您最好一次构建一个功能并询问有关您遇到的具体问题的问题。我建议您先弄清楚如何将数据从服务器获取到手机中。

# spring - 具有多个侦听器的 ActiveMQ

> ID：12417431
> 
> 赞同：1
> 
> 时间：2012-09-14T02:39:51.093
> 
> 标签：spring, listener, activemq

我将它与弹簧一起使用。现在我有以下设置：

```
 <!--异步调用消息 -->
<bean class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="cacheConnectionFactory"></property>
    <!-- <property name="destination" ref="ptpQueue"></property> -->
    <property name="destination" ref="topicQueue"></property>
    <property name="messageListener" ref="objHelper"></property>
    <property name="sessionAcknowledgeModeName" value="AUTO_ACKNOWLEDGE"/>
</bean> 
```

我`messageListener`唯一的听`ref="objHelper"`，但现在我希望它同时听`ref="objHelper"`和`ref="bexHelper"`！

我`objHelper`和我`bexHelper`都已经实现`MessageListener`并且有一个方法`onMessage(){………… }`，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:36:31.687

Spring MessageListenerContainer 只能配置一个消息监听器。所以这是不可能的。

为什么需要在同一个消息侦听器容器上使用 2 个消息侦听器？

# c# - 如何在 Windows 中获取所有等宽字体？

> ID：12417432
> 
> 赞同：5
> 
> 时间：2012-09-14T02:39:56.500
> 
> 标签：c#, windows, fonts

我已经看到[如何获取所有已安装的固定宽度字体？](https://stackoverflow.com/questions/224865/how-do-i-get-all-installed-fixed-width-fonts)，但我不能让它工作：

```
internal class NativeMethods
{
    public const Int32 LF_FACESIZE = 32;
    public const Int32 FIXED_PITCH = 1;

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public class LOGFONT
    {
        public Int32 lfHeight = 0;
        public Int32 lfWidth = 0;
        public Int32 lfEscapement = 0;
        public Int32 lfOrientation = 0;
        public Int32 lfWeight = 0;
        public Byte lfItalic = 0;
        public Byte lfUnderline = 0;
        public Byte lfStrikeOut = 0;
        public Byte lfCharSet = 0;
        public Byte lfOutPrecision = 0;
        public Byte lfClipPrecision = 0;
        public Byte lfQuality = 0;
        public Byte lfPitchAndFamily = 0;

        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = LF_FACESIZE)]
        public String lfFaceName = string.Empty;
    }
}

public partial class MainForm : Form
{
    private string font_names = null;

    public MainForm()
    {
        InitializeComponent();

        StringBuilder sb = new StringBuilder();
        foreach (var font_family in FontFamily.Families)
        {
            if (font_family.IsStyleAvailable(FontStyle.Regular))
            {
                var lf = new NativeMethods.LOGFONT();
                Font font = new Font(font_family, 9.0f);
                font.ToLogFont(lf);
                if ((lf.lfPitchAndFamily & 0x3) == NativeMethods.FIXED_PITCH)
                {
                    sb.AppendLine(font_family.Name);
                }
            }
        }
        font_names = sb.ToString();
    }

    private void MainForm_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.DrawString(font_names, SystemFonts.MessageBoxFont, SystemBrushes.WindowText, 10.0f, 10.0f);
    }
} 
```

似乎无论它是什么字体，`lfPitchAndFamily`总是为零。

那么如何获得所有等宽字体呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T02:24:05.600

我想我会使用 P/Invoke 来做到这一点：

```
internal class NativeMethods
{
    public const Int32 LF_FACESIZE = 32;
    public const Int32 LF_FULLFACESIZE = 64;
    public const Int32 DEFAULT_CHARSET = 1;
    public const Int32 FIXED_PITCH = 1;
    public const Int32 TRUETYPE_FONTTYPE = 0x0004;

    public delegate Int32 FONTENUMPROC(ref ENUMLOGFONT lpelf, ref NEWTEXTMETRIC lpntm, UInt32 FontType, IntPtr lParam);

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public struct LOGFONT
    {
        public Int32 lfHeight;
        public Int32 lfWidth;
        public Int32 lfEscapement;
        public Int32 lfOrientation;
        public Int32 lfWeight;
        public Byte lfItalic;
        public Byte lfUnderline;
        public Byte lfStrikeOut;
        public Byte lfCharSet;
        public Byte lfOutPrecision;
        public Byte lfClipPrecision;
        public Byte lfQuality;
        public Byte lfPitchAndFamily;

        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = LF_FACESIZE)]
        public String lfFaceName;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public struct TEXTMETRIC
    {
        public Int32 tmHeight;
        public Int32 tmAscent;
        public Int32 tmDescent;
        public Int32 tmInternalLeading;
        public Int32 tmExternalLeading;
        public Int32 tmAveCharWidth;
        public Int32 tmMaxCharWidth;
        public Int32 tmWeight;
        public Int32 tmOverhang;
        public Int32 tmDigitizedAspectX;
        public Int32 tmDigitizedAspectY;
        public Char tmFirstChar;
        public Char tmLastChar;
        public Char tmDefaultChar;
        public Char tmBreakChar;
        public Byte tmItalic;
        public Byte tmUnderlined;
        public Byte tmStruckOut;
        public Byte tmPitchAndFamily;
        public Byte tmCharSet;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public struct ENUMLOGFONT
    {
        public LOGFONT elfLogFont;

        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = LF_FULLFACESIZE)]
        public String elfFullName;

        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = LF_FACESIZE)]
        public String elfStyle;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public struct NEWTEXTMETRIC
    {
        public Int32 tmHeight;
        public Int32 tmAscent;
        public Int32 tmDescent;
        public Int32 tmInternalLeading;
        public Int32 tmExternalLeading;
        public Int32 tmAveCharWidth;
        public Int32 tmMaxCharWidth;
        public Int32 tmWeight;
        public Int32 tmOverhang;
        public Int32 tmDigitizedAspectX;
        public Int32 tmDigitizedAspectY;
        public Char tmFirstChar;
        public Char tmLastChar;
        public Char tmDefaultChar;
        public Char tmBreakChar;
        public Byte tmItalic;
        public Byte tmUnderlined;
        public Byte tmStruckOut;
        public Byte tmPitchAndFamily;
        public Byte tmCharSet;
        public UInt32 ntmFlags;
        public UInt32 ntmSizeEM;
        public UInt32 ntmCellHeight;
        public UInt32 ntmAvgWidth;
    }

    [DllImport("gdi32.dll", CharSet = CharSet.Auto)]
    public extern static Int32 EnumFontFamiliesEx(IntPtr hdc, ref LOGFONT lpLogfont, FONTENUMPROC lpEnumFontFamExProc, IntPtr lParam, UInt32 dwFlags);
}

internal static class Program
{
    private static void Main()
    {
        Graphics graphics = Graphics.FromHwnd(IntPtr.Zero);
        IntPtr hdc = graphics.GetHdc();
        var logfont = new NativeMethods.LOGFONT() { lfCharSet = NativeMethods.DEFAULT_CHARSET };
        NativeMethods.EnumFontFamiliesEx(hdc, ref logfont, new NativeMethods.FONTENUMPROC(EnumFontFamExProc), IntPtr.Zero, 0);
        graphics.ReleaseHdc();
    }

    private static int EnumFontFamExProc(ref NativeMethods.ENUMLOGFONT lpelf, ref NativeMethods.NEWTEXTMETRIC lpntm, uint FontType, IntPtr lParam)
    {
        if ((lpelf.elfLogFont.lfPitchAndFamily & 0x3) == NativeMethods.FIXED_PITCH)
        {
            Console.WriteLine(lpelf.elfLogFont.lfFaceName);
        }
        return 1;
    }
} 
```

# objective-c - 如何用文档装饰 Objective C 方法？

> ID：12417435
> 
> 赞同：6
> 
> 时间：2012-09-14T02:40:08.763
> 
> 标签：objective-c, documentation

当我输入一个 Cocoa 对象并在该对象上调用一个选择器时，我有时可以看到有关该方法的“文档”或“帮助”信息。例如，当我键入`[NSArray alloc]`时，我会看到两个帮助提示。一个为`NSArray`，一个为`alloc`。当我键入代码时，这两个都会出现在弹出的自动完成建议列表框中。

如何生成在我键入时出现的类似方法/类修饰的帮助提示？我想在输入自定义类名和自定义方法时看到我的评论。我怎样才能做到这一点？

例如，C# 通过 XML 文档提供此功能，该文档可以放在任何方法、类或接口/协议声明之前。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T02:56:19.400

您必须创建一个“文档集”。有像[appledoc](https://github.com/tomaz/appledoc)这样的工具可以根据您的评论创建文档集。您可以设置一个在您的代码上运行 appledoc 的构建阶段。

问题是没有办法让 Xcode 4 重新加载文档集，除非重新启动 Xcode。因此，即使您在构建过程中自动运行 appledoc，您也必须重新启动 Xcode 才能看到对您的 docset 所做的更改。

# asp.net - MVC4 - 有没有办法将根路由到“正常”未处理的 html 页面？

> ID：12417437
> 
> 赞同：10
> 
> 时间：2012-09-14T02:40:27.020
> 
> 标签：asp.net, .net, routes, knockout.js, asp.net-mvc-4

我有一个 MVC4 应用程序，但我主要将它用于 WebAPI 部分。我希望将“普通的旧 HTML”文件发送回用户（然后使用 KnockoutJS 或 KendoUI 从 webapi 控制器中提取 JSON）。

我知道我可以这样做：

```
routes.IgnoreRoute("{page}.html"); 
```

然后，如果我浏览到“localhost/index.html”，它会成功返回我的 .html 页面。但是，我真的想映射“root”默认路径“localhost/”来返回我的 index.html。

我试过这个：

```
routes.MapPageRoute("root", "", "~/index.html"); 
```

但这会引发错误：

> 没有为扩展“.html”注册构建提供程序。您可以在 machine.config 或 web.config 的 <compilation><buildProviders> 部分中注册一个。确保它具有包含值“Web”或“All”的 BuildProviderAppliesToAttribute 属性。

有人对我如何使这项工作有任何想法吗？我可以只点击一个返回纯 html 页面的默认控制器，但是为 HTML 页面遍历整个 ASP.NET 堆栈似乎有点过头了，然后它只调用一个 WebAPI URL 来返回 ASP.NET 堆栈获取页面模型的一些 JSON 数据。

我基本上只是想“跳过”所有 MVC 管道并让 IIS 将 html 页面发回给我，就好像它不是 ASP.NET 应用程序一样，或者至少做尽可能少的处理。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T03:17:29.460

将以下内容添加到您的路由配置中：

```
routes.IgnoreRoute(""); 
```

# android - 片段不可分配给 android.app.Activity

> ID：12417441
> 
> 赞同：1
> 
> 时间：2012-09-14T02:40:54.337
> 
> 标签：android, android-fragments, android-manifest, android-activity

*   尝试在两个 Android 片段之间切换活动失败。
*   尽管逐字使用 Android doco 示例，但仍会发生这种情况：

[Android 片段文档](http://developer.android.com/reference/android/app/Fragment.html)

*   尝试将目标 Fragment 添加到 AndroidManifest.xml 不会使用此问题标题中的相同消息进行编译。
*   如果我只使用视图和直接活动来破解相同的过程，那么一切都很好。
*   如果我保持 AndroidManifest.xml 不变，那么我会得到一个运行时异常，问题如下：

> android.content.ActivityNotFoundException：找不到显式活动类 {name.davidwbrown.actionbartabs/name.davidwbrown.actionbartabs.UserDetailsFragment}；您是否在 AndroidManifest.xml 中声明了此活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:30:25.483

尝试定义包含片段的 xml 布局，而不是将其分配给`<activity>`清单上的标记。然后使用`findViewById(R.id.frameId)`在代码中找到它，然后将其附加到活动中。在清单中，保持活动标签与此类似，它应该可以工作：

```
<activity
        android:name="name.davidwbrown.actionbartabs.UserDetailsFragment"
        android:label="@string/activity_name" >
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-14T03:18:17.437

也许您应该尝试将您的`Fragment`班级更改为`FragmentActivity`班级。

# php - ModX：自定义查询仅在我更新代码段时有效

> ID：12417447
> 
> 赞同：1
> 
> 时间：2012-09-14T02:41:53.153
> 
> 标签：php, mysql, code-snippets, modx, modx-evolution

我有一个脚本，它运行一个 PHP MySQL 查询，其中包含通过表单收集的信息。查询工作正常，但奇怪的是，如果有人刷新并在表单中输入新输入，它不会更新搜索变量。

我实际上可以在 URL 中看到正确的变量，但它们只是没有在查询中重复。

真正奇怪的是，如果我去编辑 ModX 后端中的片段——即使它只是添加评论——保存它并刷新它工作的页面，直到我再次尝试新的搜索。

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:54:36.973

您的表单片段是否已缓存？您需要将其取消缓存以使其每次都重新运行：

```
[[!snippet]] 
```

这也适用于任何占位符：

```
[[!+placeholder]] 
```

# c++ - 无法使用 npapi 获取 DOM 窗口

> ID：12417448
> 
> 赞同：0
> 
> 时间：2012-09-14T02:42:00.863
> 
> 标签：c++, c, npapi, npruntime

我做了一个简单的 NPRuntime 插件，它在加载时调用 Javascript 函数。基于的示例是 seamonkey，它在 Google Chrome 上运行良好，但在 FireFox 上却不行。

我跟踪代码以找出问题所在，并找到了这一行。

```
NPObject* window;
NPError err = NPN_GetValue(pNPP, NPNVWindowNPObject, &window);
if (!window)
    _log("Can not get DOM window %d", err); 
```

错误返回 NPERR_INVALID_PARAM。

这个简单的例子可能适用于旧版本的 Firefox 我猜... 12.0？13.0？（我不确定）现在我使用的是最新版本的 FireFox 15.0。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:20:33.200

所以看起来你真正的问题是关于如何从另一个线程调用 javascript 的东西，因为你不能从其他线程进行 NPN_ 调用。简短的回答是你不能；更长，更复杂的答案是这很痛苦，但可以做到。

NPAPI 有一个名为[NPN_PluginThreadAsyncCall](https://developer.mozilla.org/en-US/docs/NPN_PluginThreadAsyncCall)的函数。它接受两个参数；第一个是返回 void 并接受 void* 的函数指针，第二个是将传递给该函数的 void*。您可以从任何线程调用此函数，它会导致您的回调“很快”在主线程上被回调。

诀窍是确保您的 void* 为您提供所需的所有数据，以便在通话期间恢复您需要访问的任何内容。如果你需要的话，更大的技巧是让它看起来是同步的。第一个可以用指针完成，并确保你自己清理；第二个可以用互斥锁和信号来完成，如果你很聪明的话。

这是一件棘手且难以做到的事情。如果可以选择，您可能会考虑使用[FireBreath](http://www.firebreath.org)，因为它可以为您完成所有这些工作。特别是因为 FireBreath 为不支持 NPN_PluginThreadAsyncCall 的各种随机浏览器提供了解决方法（如某些版本的 Opera 和 Safari 5.1 及更高版本）。

# javascript - 使用 javascript 和 xml 的变量赋值语法

> ID：12417450
> 
> 赞同：0
> 
> 时间：2012-09-14T02:42:10.230
> 
> 标签：javascript, xml, nodevalue

我已经尝试了这么多的作业变体，我累坏了——下面是 xml 和 .js。我的目标是通过文本获取用户输入并将该值分配给 xml 文档中相应节点的值

```
<employee>
    <user>Michael McGraw</user>
    <password>password</password>
    <date></date>
    <in></in>
    <out></out>
</employee>

<script type="text/javascript">
if (window.XMLHttpRequest){
   xmlhttp=new XMLHttpRequest();
}
else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
xmlhttp.open("POST","userPass.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;

$(document).ready(function(){//when the page is ready. . . 

$('#datepicker').datepicker();//jquery ui datepicker, **this is the value Im working with
$('#timeIn').timepicker({ 'scrollDefaultNow': true });//jquery ui plug 
$('#timeOut').timepicker({ 'scrollDefaultNow': true });

$('#submit').on('click',function(event){//when user clicks submit do this. . . 
    var timeIn = (document.getElementById("timeIn").value);
    var timeOut = (document.getElementById("timeOut").value);
    var aDate = (document.getElementById("datepicker").value);
    xDate = xmlDoc.getElementsByTagName("date"); 
    xDate.nodeValue = aDate;////assign the value of datepicker=<date>
    alert(xDate.nodeValue);//please 
```

# r - 使用 REngine.Rserve 时出现 Plot() 错误

> ID：12417454
> 
> 赞同：2
> 
> 时间：2012-09-14T02:43:33.947
> 
> 标签：r, plot, rserve

我现在正在开发一个项目，该项目希望使用 org.rosuda.REngine.Rserve 通过 C# 使用 R 的设施。当我在 C# 客户端运行以下代码时，我有一个特殊的问题：

```
c.eval("pdf(file=\"plots.pdf\", width=11, height=8.5)");
c.eval("plot(1,2)"); 
```

发生错误，说

```
Error in plot.new():cannot open file '', reason No such file or directory 
```

但我检查了文件“plots.pdf”已经通过“pdf..”函数成功创建。在R语义中，后续的plot()会将图形输出到“pdf(...)”函数打开的活动设备，即这次的“plots.pdf”。但是我很困惑为什么错误表明文件是''。我在 linux 服务器端使用 R-2.15.0 和 Rserve-1.7.0。我很想看到你的回复。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T20:16:12.730

试试这个代码： -

```
c.eval("dev.off()") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T19:27:16.093

一个名为的文件夹**`(null).1001.1001`**

* * *

[无法打开文件''的](https://stackoverflow.com/questions/16798605/cannot-open-file-reason-no-such-file-or-directory#16798685)相关答案 ，原因没有此类文件或目录 建议使用作为创建具有平台独立路径分隔符的文件名`file.path`的替代方法。`paste`

评论建议`dev.off()`。我有更好的运气`graphics.off()`。不同的是，`dev.close()`关闭当前设备，`graphics.off()`关闭所有打开的设备。

但我的解决方案竟然是 [https://askubuntu.com/questions/721485/what-is-folder-null-1001-1001](https://askubuntu.com/questions/721485/what-is-folder-null-1001-1001) 我发现了一个名为`(null).1001.1001`（Rserve 在 Linux 上以 uid 1001、gid 1001 运行）的神秘文件夹。我在会话开始时创建了这个文件夹，我可以开始了。这个文件夹的存在似乎对我有帮助，但我不知道（还不知道！）那个文件夹是什么。

# javascript - 为什么这个自调用函数中的 console.log 没有被执行？

> ID：12417455
> 
> 赞同：3
> 
> 时间：2012-09-14T02:43:41.560
> 
> 标签：javascript

以下代码打印“true”。我可以理解为什么 ff.f 等于 undefined，但是我不明白为什么在检查这个值时 console.log("Hi") 没有在 ff.f 内部执行。f 不是在定义后立即执行吗？

```
var ff = function(){
    var f = function(){
        console.log("Hi");
    }();
};

console.log(ff.f === undefined); 
```

[编辑] 我想问这​​个问题的更好方法是“ff 中的这个 f 函数什么时候执行？”。我认为如果 ff.f 的值在 ff 被执行之前没有被执行，那么它的值是“未定义的”是很奇怪的。不应该是函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T02:46:03.790

不，它不是 - 它在*评估*后执行- 在这种情况下是执行*父*函数 ( `ff`) 时。

### 什么时候`f`执行

任何 IIFE 一旦被评估就会被执行 - 任何包含在其他函数中的此类表达式只会在它的作用域（包装）执行后才被评估：

```
// Executed when the execution flow reaches this point
// i.e. immediately after the script starts executing
var outer = function() {
    console.log("Hello from outer");
}();

var wrapper = function() {
    // Executed when the flow reaches this point
    // which is only when the function `wrapper`
    // is executed - which it isn't, so this never fires.
    var inner = function() {
        console.log("Hello from inner");
    }();
}; 
```

### 为什么`ff.f`不是函数

JavaScript 是函数作用域，但 JavaScript 没有提供任何*访问*函数内部作用域的方法（据我所知，至少没有）。因此，当您尝试访问时，`ff.f`您正在寻找函数上命名的*属性*- 默认情况下没有这样的属性。即使你这样做了：`f``ff`

```
var ff = function () {
    ff.f = function() {
        console.log("Hello from f");
    }();
}; 
```

`ff.f`仍然是`undefined`（因为 IIFE 不返回任何东西）。

# cognos - 如何将一个单元格分成两行？

> ID：12417456
> 
> 赞同：1
> 
> 时间：2012-09-14T02:43:42.180
> 
> 标签：cognos, cognos-8

请看下图。我不知道如何在 Cognos 的单个数据单元中创建两行。

![在此处输入图像描述](../Images/5b111b6e80b57082a9b21a97d4b87c02.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:46:51.557

您可以为版本查询项单元格插入一个包含 2 行和一个列的表。然后，您可以使用数据源中的适当字段填充 2 行。

请在下面的屏幕截图中找到我在 2 行中插入表格和填充字段的位置。该报告已经过测试并且运行良好。

![表作为列表列](../Images/7fe81ff85f3cb2cabec1ab5fda29a383.png)

# vb.net - VBScript 到 VB 错误

> ID：12417460
> 
> 赞同：2
> 
> 时间：2012-09-14T02:44:17.330
> 
> 标签：vb.net, vbscript

我一直在将一些旧的 VBscript 代码重写为 VB 代码。我几乎完成了所有工作，但在一个地方出现错误。

VB脚本

```
Session("FirstName") = Request.Cookies("FirstName").Item 
```

VB

```
Session.Add("FirstName", Request.Cookies("FirstName").Item) 
```

错误是

```
BC30455: Argument not specified for parameter 'key' of 'Public Default Property Item(key As String) As String'. 
```

谁能告诉我如何纠正这个错误或至少这个错误是什么意思？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T02:58:16.267

```
 Session.Add("FirstName", Request.Cookies("FirstName")) 
```

应该可以工作，当您使用`.Item` 它时需要一个 Item 的键，例如：

```
Session.Add("FirstName", Request.Cookies("FirstName").Item("ItemKey")) 
```

# python - Haystack 使用的 ElasticSearch 索引因未知原因而损坏

> ID：12417461
> 
> 赞同：1
> 
> 时间：2012-09-14T02:44:25.213
> 
> 标签：python, django, elasticsearch, django-haystack

我注意到`rebuild_index`从 Python shell 运行会导致排序问题。`rebuild_index`从 Bash运行是正确的。

```
$ bin/manage rebuild_index
WARNING: This will irreparably remove EVERYTHING from your search index in connection 'default'.
Your choices after this are to restore from backups or rebuild via the `rebuild_index` command.
Are you sure you wish to continue? [y/N] y

Removing all documents from your index because you said so.
Failed to clear Elasticsearch index: Non-OK status code returned (404) containing u'IndexMissingException[[my_index] missing]'.
All documents removed.
Indexing 40 components. 
```

--

```
In [1]: from haystack.query import SearchQuerySet

In [2]: SearchQuerySet().order_by('name')
Out[2]: [<SearchResult: my_app.component (pk=u'2')>, <SearchResult: my_app.component (pk=u'1')>, <SearchResult: my_app.component (pk=u'5')>, <SearchResult: my_app.component (pk=u'4')>, <SearchResult: my_app.component (pk=u'3')>, <SearchResult: my_app.component (pk=u'6')>, <SearchResult: my_app.component (pk=u'7')>, <SearchResult: my_app.component (pk=u'8')>, <SearchResult: my_app.component (pk=u'9')>, <SearchResult: my_app.component (pk=u'11')>, <SearchResult: my_app.component (pk=u'14')>, <SearchResult: my_app.component (pk=u'13')>, <SearchResult: my_app.component (pk=u'15')>, <SearchResult: my_app.component (pk=u'19')>, <SearchResult: my_app.component (pk=u'20')>, <SearchResult: my_app.component (pk=u'21')>, <SearchResult: my_app.component (pk=u'22')>, <SearchResult: my_app.component (pk=u'23')>, <SearchResult: my_app.component (pk=u'24')>, '...(remaining elements truncated)...']

In [3]: from django.core import management

In [4]: management.call_command('rebuild_index', interactive=False, verbosity=0)
Failed to clear Elasticsearch index: Non-OK status code returned (404) containing u'IndexMissingException[[my_index] missing]'.

In [5]: SearchQuerySet().order_by('name')
Failed to query Elasticsearch using '*:*': Non-OK status code returned (500) containing u'SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[SkgxFvdjRgyoiHv2qSpfbQ][my_index][4]: QueryPhaseExecutionException[[my_index][4]: query[filtered(ConstantScore(NotDeleted(cache(QueryWrapperFilter(django_ct:my_app.component)))))->cache(_type:modelresult)],from[0],size[20],sort[<custom:"name": org.elasticsearch.index.field.data.strings.StringFieldDataType$1@3cb9b947>]: Query Failed [Failed to execute main query]]; nested: IOException[Can\'t sort on string types with more than one value per doc, or more than one token per field]; }{[SkgxFvdjRgyoiHv2qSpfbQ][my_index][0]: QueryPhaseExecutionException[[my_index][0]: query[filtered(ConstantScore(NotDeleted(cache(QueryWrapperFilter(django_ct:my_app.component)))))->cache(_type:modelresult)],from[0],size[20],sort[<custom:"name": org.elasticsearch.index.field.data.strings.StringFieldDataType$1@249cf580>]: Query Failed [Failed to execute main query]]; nested: IOException[Can\'t sort on string types with more than one value per doc, or more than one token per field]; }{[SkgxFvdjRgyoiHv2qSpfbQ][my_index][3]: QueryPhaseExecutionException[[my_index][3]: query[filtered(ConstantScore(NotDeleted(cache(QueryWrapperFilter(django_ct:my_app.component)))))->cache(_type:modelresult)],from[0],size[20],sort[<custom:"name": org.elasticsearch.index.field.data.strings.StringFieldDataType$1@4ff80724>]: Query Failed [Failed to execute main query]]; nested: IOException[Can\'t sort on string types with more than one value per doc, or more than one token per field]; }{[SkgxFvdjRgyoiHv2qSpfbQ][my_index][2]: QueryPhaseExecutionException[[my_index][2]: query[filtered(ConstantScore(NotDeleted(cache(QueryWrapperFilter(django_ct:my_app.component)))))->cache(_type:modelresult)],from[0],size[20],sort[<custom:"name": org.elasticsearch.index.field.data.strings.StringFieldDataType$1@99b8b51>]: Query Failed [Failed to execute main query]]; nested: IOException[Can\'t sort on string types with more than one value per doc, or more than one token per field]; }{[SkgxFvdjRgyoiHv2qSpfbQ][my_index][1]: QueryPhaseExecutionException[[my_index][1]: query[filtered(ConstantScore(NotDeleted(cache(QueryWrapperFilter(django_ct:my_app.component)))))->cache(_type:modelresult)],from[0],size[20],sort[<custom:"name": org.elasticsearch.index.field.data.strings.StringFieldDataType$1@42d777c4>]: Query Failed [Failed to execute main query]]; nested: IOException[Can\'t sort on string types with more than one value per doc, or more than one token per field]; }]'.
Out[5]: [] 
```

我使用 elasticsearch-head 前端检查了索引元数据。我发现设置结构因我`rebuild_index`从哪个 shell 运行而异。

好的版本（`rebuild_index`从 Bash 运行）：

```
settings: {
index.analysis.filter.haystack_ngram.type: nGram
index.analysis.tokenizer.haystack_edgengram_tokenizer.type: edgeNGram
index.analysis.analyzer.edgengram_analyzer.filter.0: haystack_edgengram
index.analysis.filter.haystack_edgengram.min_gram: 2
index.analysis.tokenizer.haystack_edgengram_tokenizer.side: front
index.analysis.filter.haystack_edgengram.type: edgeNGram
index.analysis.filter.haystack_ngram.max_gram: 15
index.analysis.analyzer.edgengram_analyzer.type: custom
index.analysis.tokenizer.haystack_ngram_tokenizer.max_gram: 15
index.analysis.tokenizer.haystack_ngram_tokenizer.type: nGram
index.analysis.tokenizer.haystack_edgengram_tokenizer.max_gram: 15
index.analysis.tokenizer.haystack_edgengram_tokenizer.min_gram: 2
index.analysis.analyzer.ngram_analyzer.filter.0: haystack_ngram
index.analysis.analyzer.ngram_analyzer.tokenizer: lowercase
index.analysis.tokenizer.haystack_ngram_tokenizer.min_gram: 3
index.analysis.filter.haystack_ngram.min_gram: 3
index.analysis.analyzer.ngram_analyzer.type: custom
index.analysis.analyzer.edgengram_analyzer.tokenizer: lowercase
index.analysis.filter.haystack_edgengram.max_gram: 15
index.number_of_shards: 5
index.number_of_replicas: 1
index.version.created: 190999
} 
```

坏版本（`rebuild_index`从 Python shell 运行）：

```
settings: {
index.number_of_shards: 5
index.number_of_replicas: 1
index.version.created: 190999
} 
```

这些`index.analysis.*`钥匙是什么？他们来自哪里？

干草堆票：[https ://github.com/toastdriven/django-haystack/issues/645](https://github.com/toastdriven/django-haystack/issues/645)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:17:04.583

发生这种情况是因为后端的实例变量需要在`rebuild_index`第二次运行之前重置。

```
from django.core import management
from haystack import connections
backend = connections['default'].get_backend()
backend.setup_complete = False
backend.existing_mapping = None
management.call_command('rebuild_index', interactive=False, verbosity=0) 
```

# linq - LinqToSQL 不能更新两次

> ID：12417464
> 
> 赞同：0
> 
> 时间：2012-09-14T02:44:53.193
> 
> 标签：linq, linq-to-sql, datacontext, insert-update

我尝试用相同的数据更新两次，但它抛出异常

```
 public void UpdateOnSubmit<T>(T data) where T : class
    {
        lock (_lockObj)
        {
            using (DataModel dx = new DataModel(this._adapter.ConnectionString))
            {
                dx.GetTable<T>().Attach(data);
                dx.Refresh(RefreshMode.KeepCurrentValues, data);
                dx.SubmitChanges();
            }
        }
    } 
```

例外是

```
An attempt has been made to Attach or Add an entity that is not new, perhaps having been loaded from another DataContext. This is not supported. 
```

第一次更新是成功的，但不是第二次。提前致谢

问候，

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:07:11.047

好吧，好像我又找到了解决方案。我只是将 DeferredLoadingEnabled 设置为 false ，它就像一个魅力。

```
 public void UpdateOnSubmit<T>(T data) where T : class
    {
        lock (_lockObj)
        {
            using (DataModel dx = new DataModel(this._adapter.ConnectionString))
            {
                dx.DeferredLoadingEnabled = false;
                dx.GetTable<T>().Attach(data);
                dx.Refresh(RefreshMode.KeepCurrentValues, data);
                dx.SubmitChanges();
            }
        }
    } 
```

# javascript - Div 中的 Iframe 中的 Javascript 不起作用

> ID：12417466
> 
> 赞同：0
> 
> 时间：2012-09-14T02:45:20.573
> 
> 标签：javascript, html, iframe

我有一个网页，我想嵌入另一个页面。在要嵌入的页面上，我有一些 window.onload javascript，它将通过 embed 标签加载 PDF 文档。如果我只使用这样的 iframe 标记：

```
<iframe name="content" id="iframe" allowtransparency="true" src="Pages/menu.html" scrolling="no"></iframe> 
```

Javascript 将运行得很好。但我正在尝试为 iframe 创建背景和边框，因此我将 iframe 包装在 div 中，如下所示：

```
<div id="content" class="border">
<iframe name="content" id="iframe" allowtransparency="true" src="Pages/menu.html"    scrolling="no"></iframe>
</div> 
```

一旦我这样做，javascript就不会运行。这是我正在尝试做的截图。我不相信 div 上存在的样式（弯曲边框、渐变等在 iframe 上是可能的）我正在使用 PDFObject 在页面上生成 PDF。iframe 还按需在内容部分加载公司的外部网站，这就是他们想要的，所以不幸的是我不得不使用 iframe。这必须在不使用除 javascript 之外的任何东西的情况下完成，否则我只会使用 php。

由于限制，我必须在 photobucket 上发布本网站之外的 SCREENSHOT：http: [//i721.photobucket.com/albums/ww217/the_t3rminat0r/Capture-2.png](http://i721.photobucket.com/albums/ww217/the_t3rminat0r/Capture-2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-08T12:04:08.970

它看起来 div 样式（或您的示例中的边框类）的边距属性会导致问题。

# r - 将行减少到唯一项目

> ID：12417467
> 
> 赞同：1
> 
> 时间：2012-09-14T02:45:43.427
> 
> 标签：r, dataframe, data.table, lapply

我有数据框

```
test <- structure(list(
     y2002 = c("freshman","freshman","freshman","sophomore","sophomore","senior"),
     y2003 = c("freshman","junior","junior","sophomore","sophomore","senior"),
     y2004 = c("junior","sophomore","sophomore","senior","senior",NA),
     y2005 = c("senior","senior","senior",NA, NA, NA)), 
              .Names = c("2002","2003","2004","2005"),
              row.names = c(c(1:6)),
              class = "data.frame")
> test
       2002      2003      2004   2005
1  freshman  freshman    junior senior
2  freshman    junior sophomore senior
3  freshman    junior sophomore senior
4 sophomore sophomore    senior   <NA>
5 sophomore sophomore    senior   <NA>
6    senior    senior      <NA>   <NA> 
```

而且我想调整数据以仅获取每一行的各个步骤，如

```
result <- structure(list(
 y2002 = c("freshman","freshman","freshman","sophomore","sophomore","senior"),
 y2003 = c("junior","junior","junior","senior","senior",NA),
 y2004 = c("senior","sophomore","sophomore",NA,NA,NA),
 y2005 = c(NA,"senior","senior",NA, NA, NA)), 
               .Names = c("1","2","3","4"),
               row.names = c(c(1:6)),
               class = "data.frame")

> result
          1      2         3      4
1  freshman junior    senior   <NA>
2  freshman junior sophomore senior
3  freshman junior sophomore senior
4 sophomore senior      <NA>   <NA>
5 sophomore senior      <NA>   <NA>
6    senior   <NA>      <NA>   <NA> 
```

我知道如果我将每一行视为一个向量，我可以做类似的事情

```
careerrow <- c(1,2,3,3,4)
pairz <- lapply(careerrow,function(i){c(careerrow[i],careerrow[i+1])})
uniquepairz <- careerrow[sapply(pairz,function(x){x[1]!=x[2]})] 
```

我的困难是将该行应用于我的数据表。我认为 lapply 是要走的路，但到目前为止我无法解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:51:20.840

*如果您的目标是计算每个途径*的总数

 *您可以使用这样的东西（使用`data.table`是因为它将列表作为 data.table（data.frame-like）对象中的元素处理的好方法。

我正在使用`!duplicated(...)` 删除重复项，因为这比唯一更有效。

```
library(data.table)
library(reshape2)
# make the rownames a column 
test$id <- rownames(test)
# put in long format
DT <- as.data.table(melt(test,id='id'))
# get the unique steps and concatenate into a unique identifier for each pathway
DL <- DT[!is.na(value), {.steps <- value[!duplicated(value)]
  stepid <- paste(.steps, sep ='.',collapse = '.')
  list(steps = list(.steps), stepid =stepid)}, by=id]
##    id                            steps                           stepid
## 1:  1           freshman,junior,senior           freshman.junior.senior
## 2:  2 freshman,junior,sophomore,senior freshman.junior.sophomore.senior
## 3:  3 freshman,junior,sophomore,senior freshman.junior.sophomore.senior
## 4:  4                 sophomore,senior                 sophomore.senior
## 5:  5                 sophomore,senior                 sophomore.senior
## 6:  6                           senior                           senior

# count the number per path

DL[, .N, by = stepid]
##                              stepid N
## 1:           freshman.junior.senior 1
## 2: freshman.junior.sophomore.senior 2
## 3:                 sophomore.senior 2
## 4:                           senior 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T03:01:21.090

`lapply`，当传递一个 data.frame 时，对其列进行操作。那是因为 data.frame 是一个列表，其元素是列。代替`lapply`，您可以使用`apply`with `MARGIN=1`：

```
unique.padded <- function(x) {
   uniq <- unique(x)
   out  <- c(uniq, rep(NA, length(x) - length(uniq)))
}

t(apply(test, 1, unique.padded))

#   [,1]        [,2]     [,3]        [,4]    
# 1 "freshman"  "junior" "senior"    NA      
# 2 "freshman"  "junior" "sophomore" "senior"
# 3 "freshman"  "junior" "sophomore" "senior"
# 4 "sophomore" "senior" NA          NA      
# 5 "sophomore" "senior" NA          NA      
# 6 "senior"    NA       NA          NA 
```

**编辑：**我看到了您对最终目标的评论。我会做这样的事情：

```
table(sapply(apply(test, 1, function(x)unique(na.omit(x))),
             paste, collapse = "_"))

#           freshman_junior_senior freshman_junior_sophomore_senior 
#                                1                                2 
#                           senior                 sophomore_senior 
#                                1                                2 
```*

# android - 初始化进度条

> ID：12417470
> 
> 赞同：1
> 
> 时间：2012-09-14T02:45:55.890
> 
> 标签：android, android-progressbar

我做了 asynctask 从互联网下载文件。现在一切正常，但我想知道我们是否可以像 Android 市场一样制作一个初始化进度条，在下载文件之前，它有初始化步骤。我希望它现在显示那种进度条而不是我的 O%，有人可以告诉我该怎么做吗？

![在此处输入图像描述](../Images/5a2c202e318528d4b73d8b267e4151c9.png)

# jquery - 发布表单后Ajax加载页面内容

> ID：12417472
> 
> 赞同：0
> 
> 时间：2012-09-14T02:46:12.580
> 
> 标签：jquery

这是我的html页面：

```
<body>
    <div id="containt">
         <p>already have containt.</p>
    </div>
    <div id="other">
        <form id="test">
             <input id="sth" name="sth" value="123456"/>
             <div id="submit"></div>
        </form>
    </div>
<body> 
```

和我的 php 脚本：“abc.php”

```
$happy['verymuch'] = $_POST['sth'];
include('needtogetcontent.php');//and then use extract() to extract $verymuch in "needtogetcontent.php" 
```

“需要获取内容.php”

```
<a href="<?=$verymuch?>"><?=$verymuch?></a> 
```

现在我需要制作这样的html页面：

```
<body>
    <div id="containt">
         <p>already have containt.</p>
    </div>
    <div id="other">
         <a href="123456">123456</a>
    </div>
<body> 
```

感谢您的帮助：D！

**更新：我用过**

```
$('#submit').click(function() {
    $.ajax({
        url: 'abc.php',
        type: 'POST',
        data: $('#test').serialize(),
        success: function(data){
            //data will return anything echo/printed to the page.
            //based on your example, it's whatever $happy is.
            $('#other').text(data);
        }
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:52:08.933

```
$('#test').submit(function(){
    $.ajax({
        url: 'abc.php',
        type: 'POST',
        data: 'sth='+$('#sth').val(),
        success: function(data){
            //data will return anything echo/printed to the page.
            //based on your example, it's whatever $happy is.
            $('#other').text(data);
        }
    });
    return false;
}); 
```

我没有看到提交按钮，所以我不确定这个过程是否真的有效。如果`<div id="submit">`是你点击提交表单的元素，那么我们改->

```
$('#test').submit(function(){ 
```

**到**

```
$('#submit').click(function(){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:00:22.143

**请执行下列操作：**

**HTML：**

```
<body>
    <div id="containt">
         <p>already have containt.</p>
    </div>
    <div id="other">
        <form id="test">
             <input id="sth" name="sth" value="123456"/>
             <div id="submit">Submit</div>
        </form>
    </div>
<body> 
```

**jQuery代码：**

```
$(document).ready(function() {

    $('#submit').click(function() {
        //get sth value
        var sth = $('#sth').val();
        //make ajax call to 'abc.php' passing 'sth' parameter
        $.post('abc.php', { sth:sth }, function(data) {
            //if $_POST['sth'] at PHP side is not null
            if (data != null) {
                //show the data (in this case: $happy) in the div with id 'other' using '.html()' method
                $('#other').html(data);
            }
        });
    });

});​ 
```

# python - 对齐打印的单独部分

> ID：12417475
> 
> 赞同：1
> 
> 时间：2012-09-14T02:47:09.040
> 
> 标签：python, python-3.x

我正在尝试对齐输出中的文本。

```
purch_amt = float(input('Enter Amount of Purchase'))
state_stax = purch_amt * 0.04
county_stax = purch_amt * 0.02
tax = state_stax + county_stax
totalprice = purch_amt + tax

Print("Purchase Price", "= $", %.2f % purch_amt)
Print("State Sales tax", "= $", %.2f % state_stax)
Print("County Sales tax", "= $", %.2f % county_stax)
Print("Total Tax", "= $", %.2f % tax)
Print("Total Price", "= $", %.2f % totalprice) 
```

...我希望它在运行时看起来像这样。

```
Purchase Price    = $   100.00
State Sales tax   = $     4.00
County Sales tax  = $     2.00
Total Tax         = $     6.00
Total Price       = $   106.00 
```

我发现这样做的唯一方法对于应该相当容易的事情来说非常复杂。

问题已解决，谢谢！

```
purch_amt = float(input('Enter Amount of Purchase'))
state_stax = purch_amt * 0.04
county_stax = purch_amt * 0.02
tax = state_stax + county_stax
totalprice = purch_amt + tax

def justified(title, amount, titlewidth=20, amountwidth=10):
    return title.ljust(titlewidth) + " = $ " + ('%.2f' % amount).rjust(amountwidth)

print(justified('Purchase Price', purch_amt))
print(justified('State Sales Tax', state_stax))
print(justified('County Sales Tax', county_stax))
print(justified('Total Tax', tax))
print(justified('Total Price', totalprice)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T03:01:42.640

[String ljust, rjust, center](http://docs.python.org/library/string.html#string.ljust)是你想要填充这样的字符串。

```
def justified(title, amount, titlewidth=20, amountwidth=10):
    return title.ljust(titlewidth) + " = $ " + ('%.2f' % amount).rjust(amountwidth)

print(justified('Parts', 12.45))
print(justified('Labor', 100))
print(justified('Tax', 2.5))
print(justified('Total', 114.95)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:24:55.037

您可以只使用内置的[字符串格式](http://docs.python.org/release/3.1.5/library/string.html#formatspec)：

```
>>> column_format = "{item:20} = $ {price:>10.2f}"
>>> print(column_format.format(item="Total Tax", price=6))
Total Tax            = $       6.00 
```

...ETC。

打破这个：

*   `{item}`表示格式化名为的参数`item`
*   `{item:20}`表示格式化结果的宽度应为 20 个字符
*   `{price:>10.2f}`表示右对齐（`>`），宽度为 10（`10`），浮点精度为 2 位小数（`.2f`）

顺便说一句，您可能想查看[`Decimal`](http://docs.python.org/release/3.1.5/library/decimal.html)货币工作包。

# twitter-bootstrap - 是否可以将一个类或标签别名为 SASS 或 LESS 中的另一个类或标签？

> ID：12417478
> 
> 赞同：8
> 
> 时间：2012-09-14T02:48:05.813
> 
> 标签：twitter-bootstrap, less, sass

我正在尝试使用 Less 或 Sass 使我的 bootstrap 2.1 标记更具语义。考虑 Bootstrap 标准导航栏的以下标记：

```
<header id="main-nav" class="navbar navbar-static-top" role="banner">
    <nav class="navbar-inner" role="navigation">
        <div class="container">

            <!-- Collapse nav button -->
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Nav -->
            <nav id="navlinks" class="nav-collapse collapse pull-right">
                <ul class="nav nav-pills">
                    <li class="active">@Html.ActionLink("Home", "Index", "Home")</li>
                    <li>@Html.ActionLink("About", "About", "Home")</li>
                    <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                </ul>
            </nav>
        </div>
    </nav>
</header> 
```

显然，将 DIV 更改为更具语义的 HTML 5 标记很容易，但从标记中删除类链则更加困难。如果您要使用 mixin，例如：

```
header #main-nav {
    .navbar;
    .navbar-static-top;
} 
```

以下定义不起作用，因为复合类不受影响：

```
.navbar .btn-navbar {
    display: none;  // hide button in full width (Why a compound class? Redundant?)
} 
```

理想情况下，如果 less 或 sass 有这样的语法会很好：

```
header#main-nav $= .navbar;  // copy .navbar definitions using #main-nav as the name 
```

或者

```
header#main-nav @= .navbar;  // rename .navbar definitions to #main-nav 
```

这可以做到吗？如果没有，我怎样才能实现语义标记？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T11:46:21.653

正如你所说，没有别名，但是 LESS 和 Sass 都可以这样写：

```
.navbar, #main-nav {
    .collapse {}
} 
```

这将输出如下：

```
.navbar .collapse, #main-nav .collapse {} 
```

Sass 有一个独特的指令 @extend，它的功能如下：

```
%common-styles {
    .collapse {}
}

.navbar {
    // unique navbar styles
    @extend %common-styles
}

#main-nav {
    // unique main-nav styles
    @extend %common-styles
} 
```

对于这个简化案例，输出将与第一个输出相同，但允许您以优雅的方式添加额外的样式。

**改写问题的更新**：

我非常谨慎地使用类，仅将元素集合描述为一个整体（它是电影列表吗？它是关于客户的信息吗？它是一个行动号召元素吗？）并让后代选择器处理其余的事情。使用 CSS 预处理器时，链式类（ala OOPCSS）在很大程度上是不必要的：它可以为您组装样式。

在理论上的 Sass 引导程序中，无论我们设计什么网站，我们都可以定义一些我们喜欢为导航元素重用的东西（LESS 的语法略有不同，但它也可以这样做）。

```
@mixin drop-menu { // intended for use with ordered or unordered lists that contain unordered lists
    & > li {
        @include inline-menu;
        ul { display: none }
        &:hover {
            ul { display: list }
        }
    }
}

@mixin inline-menu { // use with ordered or unordered lists if you'd like
    display: inline;
    margin-right: 1em;
    & + li { margin-left: 1em; border-left: 1px solid }
}

@mixin subtle-box { // just a box with a subtle gradient and slightly rounded corners
    linear-gradient(white, #CCC);
    border-radius: .25em;
    padding: .5em;
}

@mixin clearfix {
    &:after {
        content: " ";
        display: table;
        clear: both;
    }
} 
```

这些项目都不是你的 CSS 的一部分，除非你要求它们。

```
body > header nav { // this is our main navigation element
    @include drop-menu;
    @include subtle-box;
    color: blue;
    font-family: garamond, serif
}

nav.admin {
    @include inline-menu;
    color: orange;
}

section.gallery {
    @include clearfix;
    img { float: left; padding: 0 10px 10px 0 }
} 
```

现在，如果您有多个非常不同但有很多共同样式的元素，请务必使用原始答案中提到的 @extend 指令。

如果你在 Sass 和 LESS 之间做出选择，Sass 有更多的特性（比如非常酷的 @extend 指令、函数、列表等）。我最初选择 LESS 是因为它有一个不错的 3rd 方 Windows 编译器，所以我不必在我的虚拟机上安装 Ruby，而是不断地与该语言作斗争（这些变量变量没用！）。

# sql - 例外：由于在 CommandText 中使用了 TEXT 类型，VB.NET 中的一个或多个参数没有给出值

> ID：12417482
> 
> 赞同：0
> 
> 时间：2012-09-14T02:48:55.130
> 
> 标签：sql, vb.net, ms-access

我正在使用以下代码创建将我的 DataTable 内容保存到并清空 mdb 数据库，所以首先我创建了 datata 表，当我尝试插入数据时出现以下错误：没有为一个或多个参数提供值，现在我认为此错误是由使用此[链接中提到的 Text 引起的](http://msdn.microsoft.com/de-de/library/ms187926.aspx)

但我不知道如何修复它，这是代码，我在注释行中得到异常

```
Dim cmd = cnn.CreateCommand
                cmd.CommandText = "CREATE TABLE productstable(supplierid Integer ,catalogid Integer ,ccode Text ,cname Text,pother2 Text, pother3 Double, cprice Double, rank Integer, rankchange Integer , PD Double, PDP Double , TPD Double, TPDP Double, sprice Double, msprice Double, minprice Double, sopriceDB Double, pother4 Long, usedsuppliermargin Double, cimageurl Text, ccategory Integer, pricetaggroup Byte , spricemargingroup Byte)"
                cmd.ExecuteNonQuery()

                Dim ocmd As New OleDbCommand("INSERT INTO productstable(supplierid , catalogid, ccode,cname,pother2,pother3,cprice,rank,rankchange,PD,PDP,TPD,TPDP,sprice,msprice,minprice,sopriceDB,pother4,usedsuppliermargin,cimageurl,ccategory,pricetaggroup,spricemargingroup) VALUES (@supplierid , @catalogid, @ccode, @cname, @pother2, @pother3, @cprice, @rank, @rankchange, @PD, @PDP, @TPD, @TPDP, @sprice, @msprice, @minprice, @sopriceDB, @pother4, @usedsuppliermargin,@cimageurl,@ccategory,@pricetaggroup,@spricemargingroup)", cnn)

                For i = 0 To mainDatatable.Rows.Count - 1
                    ocmd.Parameters.Add(New OleDbParameter("@supplierid", mainDatatable.Rows(i)("supplierid")))
                    ocmd.Parameters.Add(New OleDbParameter("@catalogid", mainDatatable.Rows(i)("catalogid")))
                    ocmd.Parameters.Add(New OleDbParameter("@ccode", mainDatatable.Rows(i)("ccode")))
                    ocmd.Parameters.Add(New OleDbParameter("@cname", mainDatatable.Rows(i)("cname")))
                    ocmd.Parameters.Add(New OleDbParameter("@pother2", mainDatatable.Rows(i)("pother2")))
                    ocmd.Parameters.Add(New OleDbParameter("@pother3", mainDatatable.Rows(i)("pother3")))
                    ocmd.Parameters.Add(New OleDbParameter("@cprice", mainDatatable.Rows(i)("cprice")))
                    ocmd.Parameters.Add(New OleDbParameter("@rank", mainDatatable.Rows(i)("rank")))
                    ocmd.Parameters.Add(New OleDbParameter("@rankchange", mainDatatable.Rows(i)("rankchange")))
                    ocmd.Parameters.Add(New OleDbParameter("@PD", mainDatatable.Rows(i)("PD")))
                    ocmd.Parameters.Add(New OleDbParameter("@PDP", mainDatatable.Rows(i)("PDP")))
                    ocmd.Parameters.Add(New OleDbParameter("@TPD", mainDatatable.Rows(i)("TPD")))
                    ocmd.Parameters.Add(New OleDbParameter("@TPDP", mainDatatable.Rows(i)("TPDP")))
                    ocmd.Parameters.Add(New OleDbParameter("@sprice", mainDatatable.Rows(i)("sprice")))
                    ocmd.Parameters.Add(New OleDbParameter("@msprice", mainDatatable.Rows(i)("msprice")))
                    ocmd.Parameters.Add(New OleDbParameter("@minprice", mainDatatable.Rows(i)("minprice")))
                    ocmd.Parameters.Add(New OleDbParameter("@sopriceDP", mainDatatable.Rows(i)("sopriceDP")))
                    ocmd.Parameters.Add(New OleDbParameter("@pother4", mainDatatable.Rows(i)("pother4")))
                    ocmd.Parameters.Add(New OleDbParameter("@usedsuppliermargin", mainDatatable.Rows(i)("usedsuppliermargin")))
                    ocmd.Parameters.Add(New OleDbParameter("@cimageurl", mainDatatable.Rows(i)("cimageurl")))
                    ocmd.Parameters.Add(New OleDbParameter("@ccategory", mainDatatable.Rows(i)("ccategory")))
                    ocmd.Parameters.Add(New OleDbParameter("@pricetaggroup", mainDatatable.Rows(i)("pricetaggroup")))
                    ocmd.Parameters.Add(New OleDbParameter("@spricemargingroup", mainDatatable.Rows(i)("spricemargingroup")))

                    ocmd.ExecuteNonQuery()
                    ocmd.Parameters.Clear()

                Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:15:47.520

我不知道如果你像问题中那样离开它是如何工作的，看看这一行

```
 cmd.Parameters.Add(New OleDbParameter("@sopriceDP", mainDatatable.Rows(i)("sopriceDP"))) 
```

并与命令比较

```
..@msprice, @minprice, @sopriceDB, @pother4,.. 
```

`@sopriceDP` 一方面，`@sopriceDB`另一方面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T02:50:48.457

它应该是`ocmd`你必须添加参数而不是`cmd`.

```
ocmd.Parameters.Add(New OleDbParameter("@s.... 
```

还有一件事，你必须清除之后的参数`ExecuteNonQuery`

```
For i = 0 To mainDatatable.Rows.Count - 1
    ocmd.Parameters.Add(New OleDbParameter("@s....
    ....

    ocmd.ExecuteNonQuery()
    ocmd.Parameters.Clear()
Next 
```

# clojure - 如何获取 atom/ref/future 的数字部分的参考

> ID：12417484
> 
> 赞同：0
> 
> 时间：2012-09-14T02:48:55.533
> 
> 标签：clojure

在 clojure repl 中，任何 IDeref 对象都会弹出一个唯一编号

```
user=> (def a (atom 1))
#'user/a
user=> a
#<Atom@2e1c6600: 1> 
```

这个号码在哪里`2e1c6600`- 存储在哪里，我们如何从中获取这个号码`a`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T05:56:17.950

它是底层 Java 对象的 hashCode 的十六进制表示。如果你绝对需要它，你可以使用它`(Integer/toHexString (.hashCode a))`

```
user=> (def a (atom 1))
#'user/a
user=> a
#<Atom@56092666: 1>  
user=> (Integer/toHexString (.hashCode a))
"56092666" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:22:45.537

那是原子的java对象ID。除了帮助调试外，它不打算使用。如果你真的想要它，你可以在原子上调用 str 然后将它从字符串中切出并将其提供给 Integer/parseInt

# iphone - iOS - 用户是否能够恢复从商店中删除的应用程序

> ID：12417488
> 
> 赞同：1
> 
> 时间：2012-09-14T02:50:33.460
> 
> 标签：iphone, ios, ipad

假设以下情况：

*   用户购买应用
*   通过将可用日期更改为未来一年，此应用程序将暂时从商店中删除。请注意，该应用程序并未从商店中删除，它只是通过更改可用日期而隐藏。
*   用户删除应用
*   用户后悔删除并希望从 icloud 恢复应用程序。

用户能做到吗？那么从商店中完全删除的应用程序呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:41:51.673

另一个答案是不正确的。除非您在 iTunes Connect 中指出该应用程序因法律原因被删除（权利和定价部分），否则用户仍然可以从 iCloud 重新下载该应用程序。

![在此处输入图像描述](../Images/ad016ac6289e3acc3b72e21a34cd3e66.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:14:28.633

如果应用没有显示在应用商店（开发者隐藏或删除），用户删除后不能重新安装，直到开发者重新显示在应用商店。如果开发者从应用商店中完全删除了该应用，则意味着该应用没有显示在应用商店中，用户还不能重新安装它，但开发者可以使用相同的app-id再次重新上传该应用。

**是否可以重新安装应用取决于应用是否在应用商店中显示**

**还要看是不是同一个app-id**

# facebook - 如何使用 Facebook API 查询是否允许在用户的墙上发帖？

> ID：12417490
> 
> 赞同：1
> 
> 时间：2012-09-14T02:50:47.637
> 
> 标签：facebook, facebook-graph-api, facebook-wall

我正在设计一个网络应用程序，允许人们使用 Facebook Graph API 在人们的墙上发帖。基本上，我的应用程序用户将能够按姓名搜索人，然后写一条消息，最后将其发布到他们的墙上。

问题在于，在某些情况下，Facebook 上的人会阻止其他人在他们的墙上发帖的选项。因此，当从我的应用发送帖子时，Facebook 将返回错误。

我的问题是 Facebook API 是否返回一个参数，该参数说明是否可以根据他们在 Facebook 上的许可发布到某人的墙上。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:11:06.267

[FQL`user`表](https://developers.facebook.com/docs/reference/fql/user/)有一个名为 的字段`can_post`：

> 可以_post | 布尔 | 查看者是否可以发布到用户的墙。

# php - php 检查文件是否存在：仅检查部分

> ID：12417495
> 
> 赞同：1
> 
> 时间：2012-09-14T02:51:04.400
> 
> 标签：php, file-exists

在php中，我们可以检查文件是否存在使用

```
if(file_exists("destination/"))
{
    condition
} 
```

但我想做的是...

例如，我的目的地已经有了这个文件

```
hello_this_is_filename(2).doc 
```

我怎么知道该目录中是否有名称包含字符的文件

```
hello_this_is_filename 
```

我想以这种方式搜索，因为...如果该目录上存在，我将做的是...将文件重命名为

```
hello_this_is_filename(3).doc 
```

我还需要计算我的搜索是否存在，所以我知道我要输入什么数字

```
(3), (4), (5) and so on 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T02:53:34.003

使用[glob](http://php.net/manual/en/function.glob.php)。

```
if (count(glob("destination/hello_this_is_filename*.doc"))) {
  //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:42:25.250

利用 Marc B 的建议和 xdazz，我将执行以下操作：

```
<?php
$files = glob("destination/hello_this_is_filename*");
if (count($files)) {
   sort($files);

   // last one contains the name we need to get the number of
   preg_match("([\d+])", end($files), $matches);

   $value = 0;
   if (count($matches)) {
      // increment by one
      $value = $matches[0];
   }

   $newfilename = "destination/hello_this_is_filename (" . ++$value . ").doc";
?> 
```

抱歉，这是未经测试的，但认为它为其他人提供了正则表达式工作来实际执行递增...

# python - 如何在 python 列表中立即释放使用的内存？

> ID：12417498
> 
> 赞同：39
> 
> 时间：2012-09-14T02:51:30.913
> 
> 标签：python

在很多情况下，你肯定不会再使用列表了，我希望现在应该释放内存

```
a = [11,22,34,567,9999]
del a 
```

我不确定它是否真的释放内存，你可以使用

```
del a[:] 
```

这实际上删除了列表 a 中的所有元素。

所以最好的释放方式是这样吗？

```
def realse_list(a):
   del a[:]
   del a 
```

不太确定。需要你的意见。

顺便说一句，元组和集合怎么样？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-14T03:19:02.733

```
def release_list(a):
   del a[:]
   del a 
```

*永远*不要这样做。Python 自动释放所有不再被引用的对象，所以一个简单的`del a`方法确保如果列表没有在其他任何地方引用，列表的内存将被释放。如果是这种情况，那么各个列表项也将被释放（以及仅从它们引用的任何对象，依此类推），除非仍然引用了某些单独的项。

这意味着**唯一**`del a[:]; del a`会发布更多内容的时间`del a`是在其他地方引用列表时。这**正是**您*不*应该清空列表的时候：其他人仍在使用它！！！

基本上，您不应该考虑管理内存。相反，请考虑管理对对象的引用。在所有 Python 代码的 99% 中，Python 会在你上次需要它之后很快清理掉所有你不需要的东西，这没有问题。每当一个函数完成该函数中的所有局部变量“死亡”时，如果它们指向没有在其他任何地方引用的对象，它们将被删除，并且将级联到这些对象中包含的所有内容。

唯一需要考虑的是当你有一个大对象（比如一个巨大的列表）时，你用它做一些事情，然后你开始一个长时间运行（或内存密集型）的子计算，其中大对象子计算不需要*。*因为您有对它的引用，所以在子计算完成然后您返回之前，不会释放大对象。在这种情况下（并且*只有*这种情况），您可以`del`在开始子计算之前显式引用大对象，以便可以更早地释放大对象（如果没有其他人正在使用它；如果调用者将对象传递给您并且调用者**在**您返回后仍然需要它，那么您会**非常**很高兴它没有被释放）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-14T03:00:25.987

正如@monkut 所指出的，在大多数情况下，您可能不应该过多担心内存管理。如果您确实有一个巨大的列表，您确定您现在已经完成*并且*它不会超出当前函数的范围，但是：

`del a`只是删除你`a`的那块内存的名字。如果其他一些功能或结构或其他任何东西仍然引用它，它不会被删除；如果此代码在名称下唯一引用该列表`a`并且您使用的是 CPython，则引用计数器将立即释放该内存。其他实现（PyPy、Jython、IronPython）可能不会立即杀死它，因为它们有不同的垃圾收集器。

因此，函数中的`del a`语句`realse_list`实际上并没有做任何事情，因为调用者仍然有一个引用！

`del a[:]`正如您所注意到的，将从列表中删除元素，因此可能会删除大部分内存使用。

您可以`the_set.clear()`使用集合来实现类似的行为。

你可以对元组做的所有事情，因为它们是不可变的，`del the_tuple`希望没有其他人引用它——但你可能不应该有巨大的元组！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-14T03:56:00.170

Python 使用[引用计数](http://en.wikipedia.org/wiki/Reference_counting)来管理其资源。

```
import sys
class foo:
    pass

b = foo()
a = [b, 1]

sys.getrefcount(b)  # gives 3
sys.getrefcount(a)  # gives 2

a = None  # delete the list
sys.getrefcount(b)  # gives 2 
```

在上面的例子中，当你把 b 放入一个列表时，它的引用计数会增加，正如你所看到的，当你删除列表时，b 的引用计数也会减少。所以在你的代码中

```
def release_list(a):
   del a[:]
   del a 
```

是多余的。

总之，您需要做的就是将列表分配给 None 对象或使用 del 关键字从属性字典中删除列表。（又名，解除名称与实际对象的绑定）。例如，

```
a = None # or
del a 
```

当对象的引用计数变为零时，python 将为您释放内存。为了确保对象被删除，您必须确保没有其他地方通过名称或容器引用该对象。

```
sys.getrefcount(b) # gives 2 
```

如果[sys.getrefcount](http://docs.python.org/library/sys.html#sys.getrefcount)给你 2，这意味着你是唯一拥有对象引用的人，并且当你这样做时

```
b = None 
```

它将从内存中释放出来。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-14T03:47:54.293

如果您担心数据类型的内存管理和性能，为什么不使用链接双队列之类的东西。

首先，它的内存占用分散在内存之外，因此您不必立即分配大量连续内存。

其次，您将看到更快的入队和出队访问时间，因为与标准列表不同，当您删除一个中间元素时，无需在索引中滑动列表的其余部分，这在大型列表中需要时间。

我还应该注意，如果您只使用整数，我建议您查看二进制堆，因为您会看到 O(log^2n) 访问时间，而列表的访问时间大多为 O(N)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-24T16:45:55.130

如果您需要释放列表的内存，保留列表的名称，您可以简单地写`a=[]`

# magento - 在 Magento 的各个产品页面上制作一致的面包屑？

> ID：12417499
> 
> 赞同：11
> 
> 时间：2012-09-14T02:51:51.493
> 
> 标签：magento

在 Magento 中，我们现在拥有的是单个产品页面上的面包屑总是根据用户到达页面的方式而变化。例如，如果用户从顶级类别一直点击到子类别再到产品，则面包屑将类似于“**首页>>顶级类别>>子类别>>产品**”。

但是，如果用户直接到达产品页面，例如来自 Google 查询，则面包屑将只是“**主页 >> 产品**”。像这样是不酷的。

即使用户从谷歌到达页面，通过在面包屑中添加类别肯定会改善用户体验。而且它肯定会增加每次访问的 PV，因为用户可能会点击面包屑中的父类别。

那么有什么方法可以让它保持一致并始终在产品页面上显示类别路径？

我的想法是编辑 page/html/breadcrumbs.phtml 但我不知道如何仅在产品页面上向面包屑添加类别。

任何帮助，将不胜感激！

=======================================

编辑：总之，无论用户如何到达产品页面，我都希望类别出现在产品页面的面包屑中。不管是哪个类别，只要类别在那里。

有人知道吗？这有那么难吗？

在我的脑海中，我需要编辑面包屑模板并在其中注入类别（如果没有的话）并且它是产品页面....但我不知道怎么做，我似乎做不到在任何地方找到任何相关的解决方案......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-04T12:33:21.237

用这个替换“app/code/core/Mage/Page/Block/Html/Breadcrumbs.php”中的_toHtml()函数。

```
protected function _toHtml() {             

   $cat_id = "";

   if (Mage::registry('current_product')) {
      $product_id = Mage::registry('current_product')->getId();
      $obj = Mage::getModel('catalog/product');
      $_product = $obj->load($product_id); // Enter your Product Id in $product_id

      if ($product_id) {
         $categoryIds = $_product->getCategoryIds();
         $cat_id = $categoryIds[0];
      }

      $category = Mage::getModel('catalog/category')->load($cat_id);
      $cat_name = $category->getName();
      $cat_url =  $this->getBaseUrl().$category->getUrlPath();
   }

   if (is_array($this->_crumbs)) {
      reset($this->_crumbs);
      $this->_crumbs[key($this->_crumbs)]['first'] = true;
      end($this->_crumbs);
      $this->_crumbs[key($this->_crumbs)]['last'] = true;
   }

   if($cat_id) {
      $this->_crumbs['category'.$cat_id] = array('label'=>$cat_name, 'title'=>'', 'link'=>$cat_url,'first'=>'','last'=>'','readonly'=>'');
      ksort($this->_crumbs);
      $home = $this->_crumbs['home'];
      unset($this->_crumbs['home']);
      array_unshift($this->_crumbs,$home);
   }

   $this->assign('crumbs', $this->_crumbs);
   return parent::_toHtml();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T12:14:15.810

您可以重写产品模型以更改 getProductUrl 方法。基本上获取该产品的第一个类别并在产品路径之前附加类别路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T09:45:16.563

我完全理解你想要做什么，我注意到即使是从 Magento 自己的搜索链接的产品也会失去它的类别面包屑。我同意 Slayer，我只会为产品页面实现您自己的自定义块。

您可以使用以下代码检索产品类别树。我已经使用只有一个类别层次结构和具有多个类别层次结构的产品对此进行了测试（在 Magento CE 1.7.0.2 中）。

**注意**：您可能需要对这段代码做一些工作，因为它将每个类别对象加载到一个数组中，这可能会占用大量内存。我建议只将所需的信息添加到关联数组中，然后将该数组添加到主数组

```
$productCategories = array();

// grab the products category id array...we only want one, so grab the first one
$categoryIds = $_product->getCategoryIds();
$categoryId = $categoryIds[0];

// we don't want the root category as the name may not be user friendly
while ($categoryId != Mage::app()->getStore()->getRootCategoryId())
{
    // load the category object and add it to the product categories array
    $currentCategory = Mage::getModel('catalog/category')->load($categoryId);
    $productCategories[] = $currentCategory;
}

// as the categories were added in reverse order we'll need to "unreverse" them
foreach (array_reverse($productCategories) as $category)
{
    echo $category->getName().'/';
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-06T10:45:32.673

[为此，您可以使用https://github.com/fascinosum/SeoBreadcrumbs](https://github.com/fascinosum/SeoBreadcrumbs)之类的轻量级扩展。请注意，已经实施了逻辑来获取分配产品的最低级别类别。您可以根据需要轻松更改此行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-22T01:52:26.257

找到app/code/core/Mage/Catalog/Helper/Data.php并将Data.php复制到app/code/local/Mage/Catalog/Helper/Data.php 找到函数public function getBreadcrumbPath()，添加如下代码这个函数的开始

```
 if ($this->getProduct() && !$this->getCategory()) {
       $_categoryIds = $this->getProduct()->getCategoryIds();

       if ($_categoryId = $_categoryIds[0]) {
          $_category = Mage::getModel('catalog/category')-    >load($_categoryId);
          Mage::register('current_category', $_category);
       }

     } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T02:08:56.490

@ [jacek_podwysocki](https://stackoverflow.com/users/1071719/jacek-podwysocki)发布了一个解决方案，将一个片段添加到 breadcrumbs.phtml 并且它有效。

有关代码，请参见此处：[在 Magento 中以编程方式添加面包屑路径？](https://stackoverflow.com/questions/12576614/programmatically-add-breadcrumbs-paths-in-magento)

只需将此代码段添加到 app/design/frontend/default/template_name/template/page/html/breadcrumbs.phtml 的顶部

根据 microtime()，添加的页面加载/PHP 渲染时间仅为 0.05 秒。

# c# - 表单关闭时的消息框

> ID：12417504
> 
> 赞同：7
> 
> 时间：2012-09-14T02:52:57.093
> 
> 标签：c#, formclosing

我在关闭应用程序之前使用此代码进行提问，但它无法正常工作。
我的代码如下。

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
   DialogResult dlgresult = MessageBox.Show("Exit or no?",
                               "My First Application",
                               MessageBoxButtons.YesNo,
                               MessageBoxIcon.Information);
   if (dlgresult == DialogResult.No)
   {
      e.Cancel = true;

   }
   else
   {
     Application.Exit();
   }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T03:07:11.003

您不需要显式调用`Application.Exit()`，因为您处于`FormClosing`事件中，这意味着关闭请求已被触发（例如单击表单按钮上的叉号`this.Close()`）。您只需要拦截关闭请求并指示`e.Cancel = true;`

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    if(MessageBox.Show("Exit or no?",
                       "My First Application",
                        MessageBoxButtons.YesNo,
                        MessageBoxIcon.Information) == DialogResult.No) {
        e.Cancel = true;
    }
} 
```

# android - axis2 mtom mime 边界

> ID：12417510
> 
> 赞同：0
> 
> 时间：2012-09-14T02:54:09.317
> 
> 标签：android, soap, axis2, mime, mtom

我有一个使用 ADB 绑定创建的axis2 客户端。此axis2 客户端与WCF Web 服务通信，以MTOM 模式向其发送XML 附件。生成的 SOAP 请求是：

```
POST http://xyz/mtom HTTP/1.1
MIME-Version: 1.0
Content-Type: multipart/related;
type="application/xop+xml";
start="<http://tempuri.org/0>";
boundary="uuid:0daa5c61-46d2-4fe1-9944-097b897367b4+id=1";
start-info="application/soap+xml"; 
action="http://blahblah/SendData"
Host: myserver.org
Content-Length: 22648
Expect: 100-continue
Accept-Encoding: gzip, deflate
Connection: Keep-Alive

--uuid:0daa5c61-46d2-4fe1-9944-097b897367b4+id=1
 Content-ID: <http://tempuri.org/0> 
```

如何将 Content-Transfer-Encoding: binary( 下面) 设置为 Content-Transfer-Encoding: 8bit？

```
 Content-Transfer-Encoding: binary
 Content-Type: application/xop+xml;charset=utf-8;type="application/soap+xml"

 <s:Envelope><s:Body><SendData>...</SendData></s:Body></s:Envelope>
 --uuid:0daa5c61-46d2-4fe1-9944-097b897367b4+id=1
 Content-ID: <http://tempuri.org/1/634789954872318389>
 Content-Transfer-Encoding: binary
 Content-Type: application/octet-stream

 Serialized payload here
 --uuid:0daa5c61-46d2-4fe1-9944-097b897367b4+id=1-- 
```

另外，我猜一个 mime_boundary 用于主肥皂信封，第二个 mime_boundary 用于附件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:13:40.457

不，这是不可能的，这是有充分理由的。`8bit`编码定义如下：

> 每行最多 998 个八位字节，CR 和 LF（代码分别为 13 和 10）只允许作为 CRLF 行结尾的一部分出现。

这意味着有些消息无法编码为`8bit`. `8bit`Axis2 必须在开始编写消息之前检查消息是否可以被编码。这将引入不必要的开销。因此，Axis2 仅支持`binary`并且`base64`因为它们允许对任何消息进行编码（并且期望它们被任何 SOAP 堆栈支持）。

无论如何，您为什么要使用它`8bit`？

# c# - Db4o - 如何一步重命名字段？

> ID：12417518
> 
> 赞同：2
> 
> 时间：2012-09-14T02:55:09.133
> 
> 标签：c#, refactoring, rename, db4o, refactoring-databases

正如我在[db4o 文档](http://community.versant.com/Documentation/Reference/db4o-8.0/net35/reference/Content/advanced_topics/refactoring_and_schema_evolution/refactoring_api.htm)（.net 版本）中所读到的，我认为要重命名类中的字段，我必须将以下内容添加到我的代码中（当然，还要重命名类中的实际字段）：

```
IEmbeddedConfiguration configuration = Db4oEmbedded.NewConfiguration();
configuration.Common.ObjectClass("Namespace.ClassName, AssemblyName").
   ObjectField("fieldname").Rename("newfieldname"); 
```

然后把这段代码留在那里。但是我对此进行了测试，但它不起作用（数据库中的对象不会加载重命名的字段）。起作用的是按照[此页面](http://tracker.db4o.com/browse/COR-2266)中的说明进行操作，这些说明是

1.  配置重命名
2.  使用1中创建的配置打开数据库
3.  关闭数据库
4.  更改代码中的字段名称
5.  现在再次打开数据库时不要配置重命名。

这对我来说似乎有点奇怪。我的程序需要只使用 rename 调用运行一次，然后运行没有 rename 调用但重命名实际字段。问题是：有没有一种方法可以一步有效地重命名？

有效的步骤可能意味着一些额外的努力，例如，在更新嵌入式（移动）应用程序的过程中 - 在客户端上安装新版本（重构）之前，有必要运行一次重命名调用。有没有办法避免它？我是否遗漏了某些内容，或者是否有其他方法可以重命名 db4o 数据库中的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:58:09.787

我在配置中重命名也没有运气，但我发现以下方法效果很好：

```
static void RenameFields() {
    using (IObjectContainer db = Db4oEmbedded.OpenFile("mydb.db4o")) {
        db.Ext().StoredClass(typeof(MyType)).GetStoredFields().Single(f => f.GetName() == "<ID>k__BackingField").Rename("<Id>k__BackingField");
    }
} 
```

`MyType`也可以使用下面函数给出的完全限定的类名来指定，它列出了所有存储的类和字段名。您会注意到由自动属性生成的私有字段的格式`<PropertyName>k__BackingField`为 ，例如`<Id>k__BackingField`对于名为 的属性`Id`。

```
static void ShowClassNamesAndFields() {
    using (IObjectContainer db = Db4oEmbedded.OpenFile("mydb.db4o")) {
        var dbClasses = db.Ext().StoredClasses();
        foreach (var dbClass in dbClasses) {
            Debug.Print(dbClass.GetName());
            foreach (var dbField in dbClass.GetStoredFields()) {
                Debug.Print("    " + dbField.GetName());
            }
        }
    }
} 
```

# coffeescript - 使用 Coffeescript.compile 时访问裸选项

> ID：12417521
> 
> 赞同：5
> 
> 时间：2012-09-14T02:55:21.773
> 
> 标签：coffeescript

我正在使用[coffee-script.js](http://coffeescript.org/#scripts)让我将咖啡脚本的小片段编译成浏览器内的 javascript。这让我可以：

```
eval(Coffeescript.compile("console.log 'yo'")) 
```

但这会返回一个包装函数，如下所示：

```
(function() {

  console.log('yo')

}).call(this); 
```

我想获得一个未包装的代码片段，这样我就可以调用不在函数包装器范围内的函数。除了正则表达式之外还有什么建议可以手动删除它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T03:17:20.777

`bare`您可以在的第二个参数中传递选项`compile`：

```
// In JS
CoffeeScript.compile("console.log 'yo'", {bare: true})

# In CS :)
CoffeeScript.compile "console.log 'yo'", bare: on 
```

但是你也可以[`CoffeeScript.eval`](https://github.com/jashkenas/coffeescript/blob/cc1b056b03a12ada575efdeb7b2a930f51eae33d/src/browser.coffee#L11)直接使用。它会做你正在寻找的:)

# c++ - VS2010 和 OpenCV：变量周围的堆栈已损坏

> ID：12417529
> 
> 赞同：0
> 
> 时间：2012-09-14T02:56:54.457
> 
> 标签：c++, visual-studio-2010, visual-c++, opencv

在 Visual Studio 2010 中运行时，下面的代码给了我以下错误：`Run-Time Check Failure #2 - Stack around the variable 'keypoints' was corrupted.`

```
#include<iostream>
#include<fstream>
#include<cv.h>
#include<highgui.h>
#include<opencv2/nonfree/features2d.hpp>
using namespace std;
using namespace cv;

int main(int argc, char *argv[])
{
    Mat image = imread("C:/IMAGE.JPG");

    SiftFeatureDetector detector;
    vector<KeyPoint> keypoints;

    detector.detect(image, keypoints);

    return 0;
} 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:04:26.467

这段代码：

```
Mat image = imread("C:/IMAGE.JPG"); 
```

可能会失败。`image`在将其作为参数传递给其他函数之前，您需要确保已成功加载：

```
if (!image.data )
{
    cout <<  "Could not load image" << endl ;
    return -1;
} 
```

如果`imread()`失败并且该文件存在于该位置，您可能需要使用另一个斜杠并将其转义：

```
Mat image = imread("C:\\IMAGE.JPG"); 
```

如果图像加载成功并且崩溃仍然存在，请尝试将图像加载为灰度：

```
Mat image = imread("C:\\IMAGE.JPG", 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:03:49.803

原来我需要`OpenCV`使用 Visual Studio 2010 编译库，而不仅仅是链接到预编译`dll`的 s 等。现在一切都很好。

# c# - 使用任务的caliburn微更新进度条

> ID：12417530
> 
> 赞同：1
> 
> 时间：2012-09-14T02:56:55.363
> 
> 标签：c#, progress-bar, caliburn.micro

我遇到了这个问题，一直在使用 caliburn micro，我正在尝试更新我的进度条。但什么都没有发生。我在这里阅读了几个关于它的线程，我被卡住了，它只是没有更新

你能看出我的代码有什么问题吗？我的xml是这样的：

```
<ProgressBar x:Name="PbEstadoConfig" FlowDirection="LeftToRight" Width="200" Height="30" Margin="6,0,572,0"> 
```

在我的视图模型中，我有以下代码：

```
private double _pbEstadoConfig;
            public double PbEstadoConfig
            {
                get { return _pbEstadoConfig; }
                set
                {
                    _pbEstadoConfig = value;
                    NotifyOfPropertyChange(() => PbEstadoConfig);
                }
            }

     public void Seguinte()
            {
                var t = Task.Factory.StartNew(() =>ActualizaPB("seguinte"));

            }
    protected void ActualizaPB(string value){
     PbEstadoConfig += 20.0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:23:59.013

我对诸如 Caliburn.Micro 提供的 WPF MVVM 编程的经验是，UI 线程将在长时间运行的例程中被锁定，因此进度条在长时间运行的例程中不会更新，因为它位于同一线程上。因此，我遵循了[Stephen 在此页面](http://nitoprograms.blogspot.ca/2010/06/reporting-progress-from-tasks.html)上的建议，并实现了他的 ProgressReporter 类以及 System.Threading 库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:37:45.097

我认为这可能是您的进度条上缺少最大/最小值。

以下是我目前正在处理的 caliburn 微型项目中的工作标记，我不必编写任何自定义约定

```
 <ProgressBar Name="Progress" Maximum="1" Minimum="0" Margin="0,22,0,0" Grid.Row="1" Height="20"  Grid.ColumnSpan="2"></ProgressBar> 
```

和支持属性：

```
 public double Progress
    {
        get { return _progress; }
        set
        {
            _progress = value;
            NotifyOfPropertyChange(() => Progress);
        }
    } 
```

# vb.net - 根据列表框项目的数量向表单添加控件

> ID：12417531
> 
> 赞同：0
> 
> 时间：2012-09-14T02:57:48.317
> 
> 标签：vb.net, visual-studio-2010, listbox, controls

我想出了如何根据添加到列表框中的项目数向我的表单添加控件。

```
 ListBox1.Items.Add(TextBox1.Text)
    TextBox1.Text = ""

    For i As Integer = 0 To ListBox1.Items.Count - 1

        'adds picturebox for as many listbox items added
        Dim MyPictureBox As New PictureBox()
        MyPictureBox.Location = New Point(25, 25)
        MyPictureBox.Size = New Size(15, 15)
        MyPictureBox.SizeMode = PictureBoxSizeMode.StretchImage
        Me.Controls.Add(MyPictureBox)
        MyPictureBox.Image = My.Resources.PDF_Info

    Next i 
```

我似乎无法弄清楚如何添加第二个控件，但将其添加到表单的另一个位置。

所以第一个条目会将图片框放在 25、25 处，当我输入第二个项目时，它将在 45、45 等处创建另一个图片框。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:04:07.627

```
 ListBox1.Items.Add(TextBox1.Text)
TextBox1.Text = ""
Dim x As Integer = 25
For i As Integer = 0 To ListBox1.Items.Count - 1

    'adds picturebox for as many listbox items added
    Dim MyPictureBox As New PictureBox()
    MyPictureBox.Location = New Point(x, x)
    MyPictureBox.Size = New Size(15, 15)
    MyPictureBox.SizeMode = PictureBoxSizeMode.StretchImage
    Me.Controls.Add(MyPictureBox)
    MyPictureBox.Image = My.Resources.PDF_Info
    x += 25
Next i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:05:50.560

会是这样的

```
ListBox1.Items.Add(TextBox1.Text)
TextBox1.Text = ""
Dim p as Integer = 25

For i As Integer = 0 To ListBox1.Items.Count - 1
    'adds picturebox for as many listbox items added
    Dim MyPictureBox As New PictureBox()
    MyPictureBox.Location = New Point(p , p)
    MyPictureBox.Size = New Size(15, 15)
    MyPictureBox.SizeMode = PictureBoxSizeMode.StretchImage
    Me.Controls.Add(MyPictureBox)
    MyPictureBox.Image = My.Resources.PDF_Info
   'add 20  to the current position of the control
   p = p + 20

Next i 
```

# c# - 我想学习如何通过网络为我的 XNA 游戏添加功能

> ID：12417536
> 
> 赞同：0
> 
> 时间：2012-09-14T02:58:10.020
> 
> 标签：c#, networking, xna

我如何学习如何做到这一点？你知道有什么好的资源吗？

因为我想学习游戏编程，所以我想学习 UDP 套接字而不是 TCP 套接字......

我搜索了谷歌，但我找不到任何没有过时的好东西:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:28:15.963

请记住，XNA 只为您提供有限的网络功能，因为游戏应该在 Games Live 平台上运行，所以您的选择是：

*   本地（分屏）
*   SystemLink - 本地子网
*   PlayerMatch - Xbox 实时服务器
*   排名 - Xbox 实时服务器

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.net.networksessiontype%28v=XNAGameStudio.31%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.net.networksessiontype%28v=XNAGameStudio.31%29.aspx)

传输级别几乎从您那里抽象出来，所以如果您想深入研究 TCP/UDP（并选择一个而不是另一个）。您应该放弃原生 XNA 网络，而只使用`System.Net`. 这仅适用于桌面游戏。

您可以从这里开始阅读：http: [//msdn.microsoft.com/en-us/magazine/cc163648.aspx](http://msdn.microsoft.com/en-us/magazine/cc163648.aspx)

# android - Android 深度睡眠和唤醒锁

> ID：12417541
> 
> 赞同：1
> 
> 时间：2012-09-14T02:59:48.260
> 
> 标签：android, wakelock, android-wake-lock

我创建了一个在所有手机上运行良好的安卓应用程序。但在我的阿尔卡特手机中，它没有，因为手机进入深度睡眠模式并且数据网络出现故障，因此应用程序没有获得数据网络，也没有从服务器同步数据。

* * *

我的设计 ...

`SystemBootReceiver`--> `(DataSyncService)Service`--> `(MyBroadcastReceiver)BroadcastReceiver`--> `(MyDataService)Service`。

因此，在系统启动时`DataSyncService`，我开始设置`AlarmManager`（重复）并调用`MyBroadcastRecever`. 调用 后，`BroadcastRecever`我停止`DataSyncService`调用`stopself()`。

现在`MyBroadcastRecever`调用`MyDataService`.

* * *

我遇到了WakeLocks，它可以防止手机进入深度睡眠模式。所以我在`MyDataService` `onCreate()`方法 内部实现了它

```
PowerManager pm = (PowerManager) 
                    getSystemService(Context.POWER_SERVICE);
mWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag");
mWakeLock.acquire(); 
```

以及`release()`停止服务之前的唤醒锁。

我还在 android Manifest 中设置了权限。

但这没有用。因此，为了快速检查，我使用了市场上的[WAKE LOCK](https://play.google.com/store/apps/details?id=eu.thedarken.wl&feature=search_result#?t=W251bGwsMSwxLDEsImV1LnRoZWRhcmtlbi53bCJd)应用程序。

但这也没有唤醒手机。我再次从市场上遇到了 WAKE MY ANDROID（从商店中删除的应用程序）应用程序并安装了它......这里发生了魔法。

它使电话保持活力。

正如这个应用程序中的描述所说，他们还使用了`Wake Lock`. 那么我错过了什么？

是否存在实施错误或设计问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T21:47:46.073

您在服务中拥有的锁永远不会运行 - 因为您的服务永远不会运行

好吧 - 你必须使用[WakefulIntentService](https://github.com/commonsguy/cwac-wakeful) - 让你的`MyDataService`扩展`WakefulIntentService`和你的接收者呼叫`WakefulIntentService.doWakefulWork(context, MyDataService.class)`

或者实现一个由你的服务和接收者共享的静态锁——这会很棘手。

如果使用 wifi，您还应该使用`WifiLock`-*在*您的唤醒意图服务中 - 可能会变得棘手

# php - 长度增加

> ID：12417543
> 
> 赞同：0
> 
> 时间：2012-09-14T03:00:10.683
> 
> 标签：php, html, ajax, html-table

我已经做了大约一个小时了，但我无法弄清楚。

我有一个 PHP 页面，其中有一个表单，该表单使用 AJAX 将表单数据发送到另一个 PHP 文件以处理和发回结果。我的页面中有一个包装器 div，它从顶部 body 标记的正下方到页脚的正上方。提交表单并通过 AJAX 返回结果后，我将这个包装器 div 的内容替换为结果。结果都包含在一张大表中。

但是，由于某种原因，在我提交表单并返回结果后，`<tr>`整个表格中的所有 s 都垂直长了 4 个像素。s 在代码中指定了它们的`<td>`长度，所以它们的长度仍然是正确的，但是在`<tr>`下面延伸了 4 个像素。当我直接从后端 PHP 页面查看结果时，一切看起来都很好，并且`<tr>`s 的长度都是正确的。

因为在将结果发送回第一页之前一切都很好，所以我不确定问题出在哪里。

我无法弄清楚是什么导致了这种情况发生，任何关于导致它的原因和/或如何解决它的建议都会有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:32:25.467

以下是一些可能的解决方案：

1：可能 AJAX 响应正在发送换行符或空格以及数据，尝试修剪 AJAX 响应。

2：如果这不起作用，在 CSS 中为 td 设置 {overflow-x: hidden;}。使用这个选项是因为你说你已经指定了 td 的宽度。

例如：table.myajaxtable td{overflow-x: hidden; 宽度：150 像素；}

# c - 如何从C中的数据文件中删除列

> ID：12417546
> 
> 赞同：-2
> 
> 时间：2012-09-14T03:00:27.117
> 
> 标签：c, file, format, dataset

我正在尝试从数据集中删除一列。我的文件如下所示。我怎样才能做到这一点？

输入-

```
1,2,3,4
2,3,4,5
3,4,5,6 
```

输出-

```
2,3
3,4
4,5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:14:13.010

没有快速的方法可以做到这一点 - 您最终将“标记”文件的每一行，然后只编写您想要的部分。

如果您知道每一行包含固定数量的整数（例如，4，如您的示例），并且您需要从中“删除”几列（例如，第 2 列和第 3 列），请在循环中执行此操作：

```
int a,b;
fscanf(inFile, "%*d,%d,%d,%*s", &a, &b);
fprintf(outFile, "%d,%d\n", a, b); 
```

当然，您需要在开始循环之前打开文件，完成后关闭，并在循环条件下测试输入文件的结尾。

# javascript - 检测文本区域是否正在与 javascript 一起使用

> ID：12417548
> 
> 赞同：0
> 
> 时间：2012-09-14T03:00:45.727
> 
> 标签：javascript, input, detect

非常感谢所有发帖尝试提供帮助的人。你们太棒了！:)

我使用了@jsfriend00 解决方案，它完成了客户端浏览器缓存问题所需的功能。

嗨，我有一个关于 javascript 的问题：

想知道是否有一种方法可以检测用户是否正在使用文本区域，这意味着用户正在向另一个用户发送消息但还没有输入键？

我一直在想我可以用我的私人网络流解决我的缓存问题，如果我可以让客户端浏览器缓存仅在用户不尝试向另一个用户发送消息时刷新，因为显然他们会因为自动而丢失他们正在输入的内容刷新。

例如说以下文本区域：

```
 <html>
 <title></title>
 <head>
 <script>
 function autoRefresh(refreshPeriod) {
 var obj = document.getElementById("create"); 

     function refreshIfSafe() {
     if (document.activeElement !== obj) { 
        window.location.reload();
      } else {
        setTimeout(refreshIfSafe, refreshPeriod);
      }
   }
       setTimeout(refreshIfSafe, refreshPeriod);
 }

       autoRefresh(2 * 1000);

  </script>

  <?php echo smiley_js(); ?>

 </head>
 <body>

<?php echo form_open('controller/function') ?>
<p><label for="create">chat here:<span class="optional"></span></label>                                
<textarea name="create" id="create" onfocus="autoRefresh(this.id)" rows="3" cols="20"></textarea> 
<?php echo form_error('create'); ?>
</p>
<?php echo form_submit('submit','chat');?>
 <?php echo form_close();?>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:29:59.860

如果您想知道焦点当前是否在您的 textarea 中，那么您可以通过检查 document.activeElement 是否是您的 textarea 对象来检查。

```
var obj = document.getElementById("myTextArea");
if (document.activeElement === obj) {
    // focus is currently in my textarea
} 
```

你可以看到一个工作演示：http: [//jsfiddle.net/jfriend00/NCSed/](http://jsfiddle.net/jfriend00/NCSed/)

* * *

如果您想知道您的 textarea 何时被修改，这里有一些代码将在您的 textarea 上安装一个更改处理程序，并在 textarea 中的文本发生更改时调用您的事件处理程序。此代码适用于`textarea`对象或`input`对象。与其他方法不同，它通过键入、鼠标编辑、剪切、复制、粘贴和拖放来捕获更改。然后，您可以判断用户何时键入或何时键入了任何文本。这是此代码的工作测试引擎：http: [//jsfiddle.net/jfriend00/xxCkm/](http://jsfiddle.net/jfriend00/xxCkm/)。

而且，这是代码：

```
// add event cross browser
function addEvent(elem, event, fn) {
    if (elem.addEventListener) {
        elem.addEventListener(event, fn, false);
    } else {
        elem.attachEvent("on" + event, function() {
            // set the this pointer same as addEventListener when fn is called
            return(fn.call(elem, window.event));   
        });
    }
}

function onChange(elem, fn, data) {
    var priorValue = elem.value;

    function checkNotify(e, delay) {
        // log('checkNotify - ' + e.type);
        if (elem.value != priorValue) {
            priorValue = elem.value;
            fn.call(this, e, data);
        } else if (delay) {
            // the actual data change happens aftersome events
            // so we queue a check for after
            setTimeout(function() {checkNotify(e, false)}, 1);
        }
    }

    // Which events to monitor
    // the boolean value is whether we have to 
    // re-check after the event with a setTimeout()
    var events = [
       "keyup", false,
       "blur", false,
       "focus", false,
       "drop", true,
       "change", false,
       "input", false,
       "paste", true,
       "cut", true,
       "copy", true
    ];
    for (var i = 0; i < events.length; i+=2) {
        (function(i) {
            addEvent(elem, events[i], function(e) {
                checkNotify(e, events[i+1]);
            });
        })(i);
    }
} 
```

然后，示例用法是这样的：

```
var obj = document.getElementById("test");    
onChange(obj, function(e) {
    // your code goes here for whatever you want to do 
    // when the change handler is called
    console.log("change - " + e.type);
}); 
```

## ​</h2>

查看您评论中的代码，我建议这样做：

```
<script>
function autoRefresh(refreshPeriod) {
    var obj = document.getElementById("create"); 

    function refreshIfSafe() {
        if (document.activeElement !== obj) { 
            window.location.reload();
        } else {
            setTimeout(refreshIfSafe, refreshPeriod);
        }
    }

    setTimeout(refreshIfSafe, refreshPeriod);
}

autoRefresh(2 * 1000);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:08:55.443

```
var textarea = document.getElementById("create") ;
textarea.onfocus = function() {
    // Do something while the textarea being used by a user
};

textarea.onblur = function() {
    // Do something while the textarea not being used by a user
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T03:07:34.730

这实际上是我要说 jQuery 使它变得更容易的非常罕见的情况之一。

```
if($("#create").is(":focus")) {
    // element is in use
} 
```

另一种方法是：

```
document.body.onfocus = function(e) {
    e = e || window.event;
    window.elementWithFocus = e.target || e.srcElement;
}
...
if( document.getElementById('create') == window.elementWithFocus) {
    // element is in use
} 
```

# compiler-construction - 在没有 %prec 或 %left 的 Bison 中设置优先级和关联性

> ID：12417555
> 
> 赞同：3
> 
> 时间：2012-09-14T03:02:10.843
> 
> 标签：compiler-construction, bison, yacc, lex, flex-lexer

在不使用 %prec 或 %left 的情况下，如何在 Bison 中设置优先级和关联性？有没有办法在不需要的地方编写语法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T03:35:01.663

如果您不想使用`%prec`,`%left`和`%right`，则必须使用多个非终结符来建立优先级。

例如，考虑以下语法：

```
%token NUMBER
%left '+'
%left '*'
%right '^'

%%

expression
    : NUMBER
    | expression '+' expression
    | expression '*' expression
    | expression '^' expression
    | '(' expression ')'
    ;

%% 
```

让我们看看它是如何匹配表达式的`1 + 2 * 3`。如果我们从上面的文法中删除优先级指令，那么文法可以通过两种方式匹配这个表达式。这是一种方法：

```
expression(+)
    |
    +-- expression(NUMBER 1)
    |
    +-- expression(*)
            |
            +-- expression(NUMBER 2)
            |
            +-- expression(NUMBER 3) 
```

这是另一种方式：

```
expression(*)
    |
    +-- expression(+)
    |       |
    |       +-- expression(NUMBER 1)
    |       |
    |       +-- expression(NUMBER 2)
    |
    +-- expression(NUMBER 3) 
```

我们想编写一个只能像第一种方式那样匹配的语法，其中的`*`绑定比`+`. 我们必须创建新的非终结符并将`expression`非终结符的产生式拆分到新的非终结符中，如下所示：

```
%token NUMBER

%%

primaryExpression
    : NUMBER
    | '(' expression ')'
    ;

exponentiationExpression
    : primaryExpression
    // Right-recursion makes this right-associative.
    | primaryExpression '^' exponentiationExpression
    ;

multiplicationExpression
    : exponentiationExpression
    // Left recursion makes this left-associative.
    | multiplicationExpression '*' exponentiationExpression
    ;

additionExpression
    : multiplicationExpression
    | additionExpression '+' multiplicationExpression
    ;

expression
    : additionExpression
    ; 
```

让我们看看这个语法如何匹配表达式`1 + 2 * 3`。它只能这样匹配：

```
expression
    |
    +-- additionExpression
            |
            +-- additionExpression
            |       |
            |       +-- multiplicationExpression
            |               |
            |               +-- exponentiationExpression
            |                   |
            |                   +-- primaryExpression(NUMBER 1)
            |
            +-- multiplicationExpression
                    |
                    +-- multiplicationExpression
                    |       |
                    |       +-- exponentiationExpression
                    |               |
                    |               +-- primaryExpression(NUMBER 2)
                    |
                    +-- exponentiationExpression
                            |
                            +-- primaryExpression(NUMBER 3) 
```

虽然现在解析树中有更多级别，但它匹配所需的绑定优先级。

如果您想以这种方式编写语法，请记住，LALR 解析器在处理右递归时通常比处理左递归时使用更多的内存。所以通常将右递归（在 中使用`exponentiationExpression`）重写为左递归，并修复代码中的关联性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:26:22.203

是的——您可以对不同级别的优先级使用单独的规则，并通过左递归与右递归控制关联性。例如，要获得`+`and`-`的优先级低于`*`and `/`，一个左关联，另一个右关联¹，您可以执行以下操作：

```
number: literal | variable;

mul_expr: number
        | mul_expr MUL_OP number
        ;

add_expr: mul_expr
        | mul_expr ADD_OP add_expr
        ; 
```

是的，这确实是类似 yacc 的伪代码；我确信 yacc、byacc、Bison 等会按原样拒绝它。

* * *

¹是的，这些通常都是左关联的，但我这样做只是为了演示如何根据需要制作右关联的东西。

# statistics - Facebook 见解 - FQL API

> ID：12417559
> 
> 赞同：1
> 
> 时间：2012-09-14T03:02:32.107
> 
> 标签：statistics, facebook-javascript-sdk, facebook-fql, facebook-insights

我们目前在我们的网站上有几个发送按钮，对于每个按钮，我们使用不同的“fb_ref”字段引用，以便我们知道消息的来源。

我正在寻找一种从 facebook 获取统计信息的方法，以查看每个按钮每天发送了多少条消息。

此信息由 facebook 洞察力保存，到目前为止，我可以看到，通过使用 FQL API，我们可以查询图表以了解发送按钮被使用了多少次，但这发生在每个域级别（使用 'domain_widget_send_clicks' 指标)

从公共领域的信息中，我看不到如何请求每个“fb_ref”的信息，即使这将保存在数据库中。

结果是按每个“fb_ref”级别自动交付还是作为域的一个总数交付。要获取每个“fb_ref”级别的统计信息，我们是否需要为每个引用执行单独的查询，如果需要，我们使用的指标是什么。

如果这是一个反复试验的案例，那么我们将继续，但是如果有人在我感谢您的评论之前解决了这个问题。

洞察指标的详细信息可以在这里看到：这可以在这里看到：http: [//developers.facebook.com/docs/reference/fql/insights/](http://developers.facebook.com/docs/reference/fql/insights/)

# java - java double 计算不正确

> ID：12417561
> 
> 赞同：0
> 
> 时间：2012-09-14T03:03:24.517
> 
> 标签：java, double

我正在为一个班级制作这个程序，我需要猜测一个数字的立方根。这是我的代码：

```
int N = Integer.parseInt(args[0]);

//sets the guess at 1.0
guess = 1.0;

//whether or not the guess is close to N
while (guess * guess * guess <= N ){

     double show = (guess + ((1/3) * ((N / (guess * guess)) - guess)));
     System.out.println(show);
     guess = show;
     continue;

} 
```

但是，每次我运行这个程序时，双重显示总是设置为值 1。谁能告诉我为什么会发生这种情况以及如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T03:04:36.857

常量表达式`(1/3)`使用整数算术计算，留下 0。尝试使用`(1.0/3.0)`. 或者，

```
 double show = (guess + (((N / (guess * guess)) - guess)) / 3.0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T03:04:57.220

```
1/3 = 0 
```

因为 1/3 是整数除法，它总是 0。它应该是

```
1.0/3.0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T03:05:39.077

问题是整数除法。`1 / 3 = 0`.

将其更改为`1.0 / 3.0`

顺便说一句，这种说法没有意义`continue`......

# jquery - colorbox 不会打开灯箱，而是直接打开 URL

> ID：12417564
> 
> 赞同：1
> 
> 时间：2012-09-14T03:04:19.190
> 
> 标签：jquery, colorbox

我正在尝试使用灯箱打开谷歌日历。我已经看到它在另一个网页上使用 Colorbox 完成（这里：[http](http://www.orovalleybicycle.com/) ://www.orovalleybicycle.com/点击右侧的“扩展至完整日历”），但是当我尝试实现一些非常相似的东西时（也使用colorbox）日历拒绝在颜色框内打开。当我单击应该触发颜色框的超链接时，它只是导航离开我的页面并直接打开谷歌日历 URL。

所以基本上，这是我的代码的相关位......我已经尝试尽可能复制演示页面（[http://www.jacklmoore.com/colorbox/example1/](http://www.jacklmoore.com/colorbox/example1/)）上的内容，以便我知道它应该工作（除了你看到我实际使用绝对 URL 的相对 URL，为了安全和简化而更改）：

在我的`<head>`标签中：

```
<link rel="stylesheet" href="colorbox/colorbox.css" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
<script type="text/javascript" src="colorbox/jquery.colorbox.js"></script>

<script>
    $(document).ready(function(){
        $(".colorboxcal").colorbox({iframe:true, width:"80%", height:"80%", transition:"fade"});
    });
    </script> 
```

在身体里：

```
<a class="colorboxcal" href="https://www.google.com">Open Full Calendar</a> 
```

但基本上，它的行为就好像它只是这样说：

```
<a href="https://www.google.com">Open Full Calendar</a> 
```

我尝试了以下方法来找出导致问题的原因：

*   检查绝对路径是否正确
*   尝试将 jquery.min 的引用更改为我本地计算机上的副本，并尝试了不同的版本（没有区别）
*   尝试将“href”更改为指向我电脑上的图像（结果：单击链接在浏览器窗口中打开了图像，所以同样的老问题）
*   将 href 属性向上移动到`<script>`顶部的代码中（结果：单击链接什么也没做。错误的光标显示并且不像链接，只是文本。）
*   将相同的代码放在测试页面中，除了基本要素之外什么都没有（结果：单击链接打开了 URL，所以同样的老问题。）
*   尝试删除所有覆盖 .colorbox 默认属性的属性，除了宽度和高度（结果：相同的旧问题）
*   尝试删除这些`ready(function()`东西并将`<script>`代码放在`</a>`需要它的标签下（结果：同样的旧问题）

我很想检查颜色框是否真的被触发或加载，但我不知道如何。

我已经检查过了，我的页面可以很好地验证为 xhtml（使用 w3 和使用 dreamweaver），所以我认为我没有任何愚蠢的未封闭标签或任何导致问题的东西。但这可能是我忽略的同样明显的事情！我正在使用 php 来调用页眉和页脚和导航，并且我在网站的其他地方有一个图像“滑块”，它使用 javascript 和 jquery 并且工作正常。我已经尝试在 firefox 和 chrome 中查看它（本地托管），但两者的结果是相同的，所以我认为它与浏览器问题无关。我的 php 被 xampp lite 解析（？那里的正确术语是什么？），但我用谷歌搜索并找不到任何预期的冲突。

我开始构建这个网站是作为一个完整的 html、php、javascript、jquery 新手 - 很多，所以如果你聪明的灵魂需要降低你的反应，我很抱歉......我是一个绝对的菜鸟，我的头在游泳！但是有没有人（请！）对为什么颜色框不起作用有任何建议？？？先感谢您！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:33:04.643

有些网站不允许您将它们显示在 iframe 中，`www.google.com`因为它们是其中之一。

# ios - 在一个视图控制器中添加来自 2 个文本字段的数据，并在第二个 VC 中显示它

> ID：12417565
> 
> 赞同：1
> 
> 时间：2012-09-14T03:04:22.380
> 
> 标签：ios, uitextfield, xcode4.4

我是 iOS 新手，正在寻找以下情况的解决方案：

我有 2 个视图控制器：第一个 VC 有 2 个文本字段和一个按钮，第二个 VC 有一个“结果”文本字段，它必须包含前一个 VC 中的 2 个文本字段的总和。我用 push segue 连接了这两个 VC。

该应用程序对输入数据没有问题，但它没有使总和出现在“结果”文本字段中。如何使结果 textField 显示我想要的总和？代码片段会很棒！我正在使用 Xcode 4.4.1。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:38:58.230

使用 prepareForSegue:sender:。segue 参数可以让您通过 sourceViewController 和 destinationViewController 属性访问这两个控制器。您的源控制器中应该有指向文本字段或其值的属性，因此您可以从中获取总和。目标控制器应该有一个属性，可能是 sum，然后您将其设置为等于从源控制器获得的总和。

你真的应该学习 iOS 的 View Controller Programming Guide，这和你需要知道的许多其他东西都在里面。

# clojure - 如何在 Clojure 中映射宏？

> ID：12417569
> 
> 赞同：13
> 
> 时间：2012-09-14T03:04:49.843
> 
> 标签：clojure, macros, higher-order-functions

我尝试在 Clojure 中执行以下操作

```
(map future exprs) 
```

获取未来令牌的序列。不幸的是，这会出错，因为`future`它本身就是一个宏，而不是一个函数。

有没有办法在保持`map`语法的同时完成这项工作？我宁愿不使用`for`宏（仅作为个人风格问题）。

我想我正在寻找一张`mmap`或宏观地图。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T03:29:47.167

正如 Marcin 所述，使用 lambda（匿名函数）

```
user=> (map and [true false 0 nil])
java.lang.Exception: Can't take value of a macro: #'clojure.core/and (NO_SOURCE_FILE:1)
user=> (map #(and %) [true false 0 nil])
(true false 0 nil) 
```

*编辑*

顺便说一句，如果您正在使用`map`创建一堆要在其他线程中执行的任务，您可能会遇到问题。`map`是懒惰的，除非有东西要求，否则不会创建期货。您需要强制对其进行评估（这是在 repl 打印结果时在 repl 中发生的事情）或找到其他方式。

# html - 如何旋转图片而不重叠？

> ID：12417576
> 
> 赞同：5
> 
> 时间：2012-09-14T03:05:39.277
> 
> 标签：html, css, rotation, image

我想阅读 Exif 信息并在我的 HTML 文件中旋转它们。我确实喜欢这个。它可以很好地旋转，但是当它出现两张或更多张图片时，它们没有给我的图片足够的空间。我可以让它们不重叠并旋转它们吗？

```
<HTML><HEAD>
<style type="text/css">
DIV.rotate {
-webkit-transform:rotate(30deg);
}</style>
</HEAD><BODY>
<div><p><DIV class="rotate"><img 
src="http://taufanlubis.files.wordpress.com/2008/05/google-picasa01.png">
</p></div>
<div><p><DIV class="rotate"><img 
src="http://taufanlubis.files.wordpress.com/2008/05/google-picasa01.png">
</p></div>
<div><p><DIV class="rotate"><img 
src="http://taufanlubis.files.wordpress.com/2008/05/google-picasa01.png">
</p></div>
</BODY></HTML> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:36:07.623

您可以指定`height`与图像宽度几乎相同的分割。

[**演示在这里**](http://jsfiddle.net/libinvbabu/mZLQ3/)

或者，您可以指定一个`margin-bottom`部门。

[**演示在这里**](http://jsfiddle.net/libinvbabu/nbyKJ/)

干杯！！！

# objective-c - 委托对象在设置之前存在于目标视图控制器中，但在设置之后为 0x000..。为什么？

> ID：12417581
> 
> 赞同：0
> 
> 时间：2012-09-14T03:06:17.003
> 
> 标签：objective-c, ios, uiviewcontroller, delegates, uistoryboard

我确信这是一个基本错误，但我找不到它。我有简单的代表，除此之外一切正常。我看不出与我通常处理事情的方式有什么不同。

```
@interface MasterViewController () <DetailViewControllerDelegate, SettingsViewControllerDelegate>

@end

@implementation MasterViewController

....

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if([[segue identifier] isEqualToString:@"ShowSettings"]) {
    // here settingsViewController._delegate is 0x075...
    // why? where is this coming from?
    SettingsViewController *settingsViewController = [segue destinationViewController];
    // here settingsViewController._delegate is 0x00000 which I would expect
    [settingsViewController setDelegate:self];             
    // here settingsViewController._delegate is still 0x0000 -- why?
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:11:02.567

您确定 -[SettingsViewController delegate] 的支持 iVar 是 _delegate 吗？你可能有一个@syntehsize 代表；这将导致 iVar 只是“代表”的行。在调用 setDelegate: 之后在调试器中尝试“p * settingsViewController”，并确保您没有您认为拥有的更多实例变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:55:25.543

我修好了它。那花费的时间太长了。我已经吸取了教训。感谢 Jon 提醒我使用调试器！

```
 SettingsViewController *settingsViewController = [segue destinationViewController];        
    NSArray *childViewControllers = [NSArray arrayWithArray:[settingsViewController childViewControllers]];
    [[childViewControllers objectAtIndex:0] setDelegate:self]; 
```

它有效，但这是正确的方法吗？[segue destinationViewController] 是一个 UINavigationController。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T03:10:07.610

最可能的原因`[segue destinationViewController]`是`nil`。或者，您可能有一个`setDelegate:`未正确实现的自定义。

# ruby-on-rails-3 - 使用 Sidekiq 可安装引擎时没有路由匹配错误

> ID：12417582
> 
> 赞同：2
> 
> 时间：2012-09-14T03:06:25.193
> 
> 标签：ruby-on-rails-3, rails-engines, sidekiq

我正在使用可安装的引擎（Sidekiq 附带）并且收到`No route matches [GET] "/sidekiq"`URL的错误`http://localhost:3000/sidekiq`。以下是相关代码：

```
routes.rb:

NoveltyStats::Application.routes.draw do  
  require 'sidekiq/web'
  mount Sidekiq::Web => '/sidekiq'
  ...
end 
```

这是来自的输出`rake routes`：

```
sidekiq_web        /sidekiq
.... 
```

不用说，应用程序中的其他路由工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-06T13:38:25.863

有同样的问题。通过将 sinatra gem 升级到大于 1.3 的版本来修复它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:45:24.877

您是否使用约束来限制对 sidekiq 的访问？

如果是这样，这可能是在不满足约束条件时引起的。

# embedded - 用于嵌入式开发的 Actor 模型框架经过黄金时间的验证

> ID：12417588
> 
> 赞同：1
> 
> 时间：2012-09-14T03:07:11.527
> 
> 标签：embedded, embedded-linux, actor

除了 Erlang 之外，还有哪些用于 Linux 上的嵌入式开发的 Actor 模型框架已被证明是黄金时段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:56:46.103

QP 是一系列用于实时嵌入式系统的轻量级、开源、活动对象（参与者）框架。该系列包括 QP/C、QP/C++ 和 QP-nano 框架。其中，QP/C 和 QP/C++ 已移植到 Linux（P-Threads）。请检查[http://www.state-machine.com](http://www.state-machine.com)和[http://www.state-machine.com/linux](http://www.state-machine.com/linux)。

还有一个名为 QM 的免费图形建模工具，它基于分层状态机图 (UML Statecharts) 为 QP 生成代码。请参阅[http://www.state-machine.com/qm](http://www.state-machine.com/qm)。

# java - OAuthException：验证验证码时出错

> ID：12417594
> 
> 赞同：1
> 
> 时间：2012-09-14T03:07:59.187
> 
> 标签：java, facebook-graph-api, servlets

我创建了两个名为`s1`和的 servlet `s2`。

`s1`将请求转发到

```
https://graph.facebook.com/oauth/authorize?client_id=41050677*****&redirect_uri=http://localhost:8080/fb10/s2& scope=publish_stream,create_event 
```

在`s2`我获取代码并将其重定向到 facebook 成功页面：

```
https://graph.facebook.com/oauth/access_token?client_id=410506779*********&redirect_uri=http://www.facebook.com/connect/login_success.html& client_secret=22049dc145289c2dd7**************&code=(extract code form url) 
```

但我收到一个错误：

```
 {
   "error": {
      "message": "Error validating verification code.",
      "type": "OAuthException",
      "code": 100
   }
} 
```

这是如何引起的，我该如何解决？我已经用于`responce.sendredirect();`重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:16:21.067

# php - 在 PHP 数组中加载不同的描述

> ID：12417595
> 
> 赞同：0
> 
> 时间：2012-09-14T03:08:01.487
> 
> 标签：php

我真的找不到一个好的方法来命名它，所以如果它具有误导性，我深表歉意，但我想做的是我有玩家获得的徽章，我希望他们能够点击徽章并根据他们单击的徽章会使用 jquery 获取不同的描述以加载。我已经让它部分工作了，但我遇到的问题是它只获取最后一个徽章的信息。我知道它为什么这样做（我认为，php 在页面中首先加载，它需要是一个数组。或者我听起来真的很愚蠢，哈哈）这是我的代码到目前为止：

```
 <table id="table-profile" width="78%">
  <tr>
    <td><h3><?php echo "$usernameprofile";?>'s Badges (work in progress!!!!!!!) |  <a href="#">View All</a></h3></td>
  </tr>
  <tr>
    <td><?  
 $sqlbadges = mysql_query("SELECT * FROM membersbadges WHERE username='$usernameprofile' LIMIT 8 
 ");
 $checkbadges = mysql_num_rows($sqlbadges);
 if($checkbadges == "0"){
     echo "User is currently badgeless";
 }else{
?>
<table width="100%">
<?php
$tableCount = 0;
    $tableRowOpen = false;
    while($rowbadge = mysql_fetch_assoc($sqlbadges)) { 
    $bid = $rowbadge['badgeid'];

    $getbadge = mysql_query("SELECT * FROM badges WHERE id='$bid'");
while($rowbadge2 = mysql_fetch_assoc($getbadge)){
$badgeid = $rowbadge2['id'];    
$badgename = $rowbadge2['name'];
$badgedesc = $rowbadge2['description'];
$badgereward = $rowbadge2['reward'];
$badgerequirements = $rowbadge2['requirements'];
$badgepic = $rowbadge2['image'];
$date = strftime("%b %d, %Y", strtotime($rowbadge2['date']));

}
        if($tableCount == 0){
            echo "<tr>";
            $tableRowOpen = true;
        }
        echo"<td width='25%'>";
        echo  "<badge".$badgeid.">
<img src=\"http://my.iheff.net/images/badges/".$badgepic.".png\" border=2 alt=\"
        " . $row["name"] . "\" height=40px width=40px></a></badge".$badgeid.">" ;

        echo"<br/><br/></td>";
        if($tableCount + 1 == 4){
            $tableCount = 0;
            echo "</tr>";
            $tableRowOpen = false;
        }
        else{
            $tableCount++;
        }

    }
    if($tableRowOpen){
        echo "
</tr>
";
    }
    echo"
    <table id='badgeinfo".$badgeid."' style='display:none' width='80%' border='0' cellspacing='5' cellpadding='10'>
  <tr>
    <th colspan='2' scope='col'>".$badgename."</th>
    </tr>
  <tr>
    <td>Description:</td>
    <td>".$badgedesc."</td>
  </tr>
  <tr>
    <td>Reward:</td>
    <td>+".$badgereward." Experience</td>
  </tr>
</table>
    ";
?>
</table>
<?
 }
 ?></td>
  </tr>

</table>

<script>
$("badge<?php echo "$badgeid"?>").click(function () {
$("#badgeinfo<?php echo "$badgeid"?>").toggle("slow");
});    
</script> 
```

抱歉代码乱七八糟，我离php高手还差得很远。但是，我将不胜感激。谢谢！

这是一个示例页面，如果您想查看页面的实时状态。[http://my.iheff.net/profile.php?id=1637](http://my.iheff.net/profile.php?id=1637)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:16:19.580

看起来你关闭`while`循环太快了。（它循环遍历所有记录，并分配它们，但不渲染它们。）所以将所有徽章渲染逻辑放在这个循环中：

```
while($rowbadge2 = mysql_fetch_assoc($getbadge)){
    $badgeid = $rowbadge2['id'];    
    $badgename = $rowbadge2['name'];
    $badgedesc = $rowbadge2['description'];
    $badgereward = $rowbadge2['reward'];
    $badgerequirements = $rowbadge2['requirements'];
    $badgepic = $rowbadge2['image'];
    $date = strftime("%b %d, %Y", strtotime($rowbadge2['date']));

    // render the row here
} 
```

要修复 Javascript 问题，您可以在循环中添加 Javascript，但最好将属性添加到*徽章*标签：

```
echo  "<badge".$badgeid." data-type='badge' data-id='".$badgeid."'">" 
```

这样，您可以使用单个（静态）Javscript 块来构造点击事件：

```
// select all the badge tags
$("[data-type=badge]").each(function() {
    // get the id for the current badge
    var thisId = $(this).attr('data-id');
    $(this).click(function() {
        $("#badgeinfo" + thisId).toggle("slow");
    });
}); 
```

# matlab - fscanf 输出文本块而不是数组

> ID：12417596
> 
> 赞同：0
> 
> 时间：2012-09-14T03:08:10.753
> 
> 标签：matlab, file-io, octave, scanf

所以我有一堆需要解析的数据。它采用以下格式：

```
ATOM      1  N   VAL A   1       5.287  16.725   4.830  1.00 77.31           N   
ATOM      2  CA  VAL A   1       5.776  17.899   5.595  1.00 70.91           C  
ATOM      3  C   VAL A   1       7.198  18.266   5.104  1.00 81.71           C 
```

等等

我唯一需要的是前 3 个浮点数，可以使用

```
A = fscanf(fid, '%*30c %f %f %f %*26c \n', [3, inf]); 
```

它返回一个包含这些值的漂亮 3 xn 矩阵。

问题是我只需要原子是“CA”的值。我尝试了一种类似的方法来提取这部分，如下所示：

```
B = fscanf(fid, '%*13c %s %*64c \n'); 
```

这在我收到信件的范围内有效。唯一的问题是我把它们放在一堆文本中：

```
B = NCAC.... etc. 
```

而不是作为列向量或数组。

真的，我只需要它们来提取我需要的浮点值，如果有办法使用 fscanf 做到这一点，那么这是可取的，否则某种方式让 B 不是文本墙会很棒。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:11:14.577

好的，所以通过足够的修补，我找到了一种方法。

我使用`%3c`代替`%s`来获取原子值，这意味着输出字符串的长度将始终是列表中原子数的 3 倍。然后是一个简单的循环来检查if`B(i) = C`和。`B(i + 1) = A``B(i + 2) = ' '`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:54:49.930

我不会依赖前几个字段总是相同的宽度，而是使用更灵活的方法，例如：

```
fid = fopen('your_data.txt', 'r');

A = textscan(fid, '%*s%*s%*s%*s%*s%*s %f %f %f %*f%*f%*s',...
        'MultipleDelimsAsOne', true);

fclose(fid); 
```

这仅取决于字段的*数量*，而不是它们的*宽度*。然后，要仅获取标记为 的字段`CA`，请使用

```
fid = fopen('your_data.txt', 'r');

A = textscan(fid, '%*s%*s %s %*s%*s%*s %f %f %f %*f%*f%*s',...
        'MultipleDelimsAsOne', true);

fclose(fid);

A = cellfun(@(x) x( strcmp(A{1}, 'CA') ), A(2:end)) 
```

# php - 通过声明大量具有相同数据类型的变量来减少重复代码

> ID：12417598
> 
> 赞同：0
> 
> 时间：2012-09-14T03:08:35.503
> 
> 标签：php, cakephp, cakephp-2.0

我已将变量声明如下：

```
$Capacity = array();
$ProRender = array();
$Polyalence = array();
$CapacityMener = array();
$RespectDelais = array(); 
```

我不想 `array()`一次又一次地编写代码。有什么方法可以解决这个问题吗？请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T03:14:55.167

一种可能：

```
$Capacity = $ProRender = $Polyalence = $CapacityMener = $RespectDelais = array(); 
```

或者，如果您有 PHP 5.4，则有短数组语法：

```
$Capacity = [];
$ProRender = [];
... 
```

# r - 无法使用 rstudio 在 ubuntu12.04（精确）上启动 nginx

> ID：12417599
> 
> 赞同：0
> 
> 时间：2012-09-14T03:08:40.690
> 
> 标签：r, nginx, rstudio

我正在使用 rstudio 在 EC2 上运行远程服务器，并希望按照[此处](http://support.rstudio.org/help/kb/rstudio-server/running-with-a-proxy)使用 nginx的文档中的说明设置反向代理

当我启动或重新启动 nginx 时，我收到如下所示的错误消息。显然，端口 80 上没有运行其他任何东西。我没有安装 apache 或任何其他网络服务器。

```
ubuntu@ip-10-4-xxx-xxx:~$ sudo fuser -k 80/tcp ; sudo /etc/init.d/nginx restart
Restarting nginx: nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] still could not bind()
nginx. 
```

我添加到 ngnix.conf 的模块是推荐的片段：

```
http {
  server {
    listen 80;

    location / {
      proxy_pass http://localhost:8787;
      proxy_redirect http://localhost:8787/ $scheme://$host/;
    }
  }
} 
```

我确实尝试使用 8080 而不是 80 并且 ngnix 启动正常，但没有连接到 rstudio。rstudio 同时在 8787 上可用。感觉我在这里错过了一些非常简单的东西。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:23:16.143

哇咔咔……在完整输入问题后才知道。conf 文件有一个必须注释掉的包含

```
include /etc/nginx/sites-enabled/*; 
```

变成

```
#include /etc/nginx/sites-enabled/*; 
```

现在完美运行。有人@rstudio 请更新我上面显示的链接中的文档

更新：请在下面的评论中查看@DirkEddelbuettel 的回复。正确的方法是将此代码片段添加到“启用站点”目录中的适当文件中。

# web-services - 探索 API 和 Web 服务 MS Office 365

> ID：12417604
> 
> 赞同：1
> 
> 时间：2012-09-14T03:09:11.693
> 
> 标签：web-services, api, office365

我刚刚开始探索 Office 365。我想知道是否有任何 API 或 Web 服务可用于**Java**和**Javascript**中的 Office 365 ？

如果是，请向我提供链接并指导我如何开始。

没有 C#/.Net 可以进行多少开发？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:21:26.013

嗨，我已经使用 javascript 通过在 javascript 函数中编写以下代码来使用 web 服务，希望这会有所帮助:)

```
var value = document.getElementById("LblTxt").value; 
    $.ajax({
          type: "GET",
          url: "http://<Provide the web service link here>/<Provide the function name of the webservice here>"+"/"+value,               
          success: function (msg) {                                    
             var response= msg.text;//Note use Boolean variable if the webservice returns a Boolean vale                
              $('#status').html(response);  
               writeToExcel(response);
          },
          error: function (result) {                                   
               $('#status').innerHTML = "Unavailable";
          }
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T20:28:04.010

那里有大量示例，它们是与 Office 365 对话和纯 JavaScript 的非托管代码方法。实际上，整个 SharePoint 托管应用程序模型仅使用带有 HTML 和 JavaScript 的客户端代码。最好的起点是[http://dev.office.com/](http://dev.office.com/)。我最近在 Microsoft TechEd NA 2014 上展示了一个使用 CSOM 和 REST API 的完全客户端 AngularJS SharePoint 托管应用程序。录音可在[http://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B229#fbid=BpHXCwlr8Va 获得](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B229#fbid=BpHXCwlr8Va)。在本演示文稿中，我使用了一个完整的代码示例，该示例可在 Github 上的[https://github.com/OfficeDev/Learning-Path-Manager-Code-Sample获得](https://github.com/OfficeDev/Learning-Path-Manager-Code-Sample)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:09:38.880

就我和你所做的一样，你可以为 sharepoint/office365 编码的唯一方法是创建一个有很多限制的沙盒解决方案。

更多信息可以在他们自己的论坛上找到：http: [//community.office365.com/en-us/default.aspx](http://community.office365.com/en-us/default.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-20T19:58:49.313

我会看看新的[Office 365 API Preview](http://msdn.microsoft.com/en-us/library/office/dn605892%28v=office.15%29.aspx)。它基于 REST/JSON/OAuth2，因此任何可以“对话 HTTP”的语言都可以使用它。请注意，它仍处于预览状态，尚未用于生产用途。

如果您对 Office 365 中的 Exchange 感兴趣，那么您可以查看[Exchange Web Services](http://msdn.microsoft.com/en-us/library/office/dd877012%28v=exchg.150%29.aspx)。这是一个基于 SOAP 的协议，对 API 有很好的支持/覆盖。Java有一个[EWS 包装器](https://github.com/jlaws/ews-java)，但它似乎没有得到积极维护。

抱歉，我不熟悉 Sharepoint Online、Lync、OneDrive 等的 API，但我知道 Office 365 API 预览版旨在将这些特定于应用程序的 API 融合到一个框架中。

# html - HTML5 Shiv 在 IE7 中不起作用

> ID：12417619
> 
> 赞同：0
> 
> 时间：2012-09-14T03:11:11.660
> 
> 标签：html, internet-explorer-7, html5shiv

我敢肯定这可能是非常简单的事情，但我看不到树木的树林。由于某种原因，没有加载 HTML5 Shiv。在 IE7 中，我的 HTML5 标签导航、页眉、页脚没有按预期执行。我错过了什么？

预览：[http ://dyingtounderstand.thecreativecollective.com.au/](http://dyingtounderstand.thecreativecollective.com.au/)

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:20:52.313

好吧，我刚刚在 IE7 中检查了您的网站，它正在加载 shiv，它可能是 IE7 中的 CSS 布局问题。

![在 ie7 中加载的 shiv](../Images/52a2c0d575744122f162f77e4d62a656.png)

作为健全性检查，尝试使用 a 设置`header`and`footer`元素的样式`background-color`，看看您是否可以定位这些元素。

然后找出为什么 IE7 会弄乱你的布局。

# jsonp - 如何使用历史数据访问 Yahoo Finance YQL 查询

> ID：12417624
> 
> 赞同：11
> 
> 时间：2012-09-14T03:11:52.787
> 
> 标签：jsonp, yql, stocks, yahoo-finance

我是 YQL 的新手。也许这是非常微不足道的，但我无法弄清楚这一点。例如，我知道如何使用 YQL 控制台从 Yahoo/YQL 查询当前股票数据：

[http://developer.yahoo.com/yql/console/](http://developer.yahoo.com/yql/console/)

使用查询字符串：

```
select * from yahoo.finance.quotes where symbol in ("YHOO","AAPL","GOOG","MSFT") 
```

但是，如果我想要昨天或一周前的相同数据怎么办？我尝试了诸如

```
select * from yahoo.finance.quotes where symbol in ("YHOO","AAPL","GOOG","MSFT") and date=20120913 
```

但它似乎不起作用。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T14:28:25.290

你用错了表。

```
select * from yahoo.finance.historicaldata where symbol = "YHOO" and startDate = "2009-09-11" and endDate = "2010-03-10" 
```

或者，您可以使用[`stockretriever.py`](http://www.gurchet-rai.net/dev/yahoo-finance-yql)它。在[源代码](https://github.com/gurch101/StockScraper/blob/master/stockretriever.py)中，您可以找到历史数据的解决方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-18T11:36:07.343

表是正确的。您需要在查询字符串中附加 store 参数。这是示例字符串。

```
http://query.yahooapis.com/v1/public/yql?q=select * from yahoo.finance.historicaldata where symbol = "YHOO" and startDate = "2014-02-11" and endDate = "2014-02-18"&diagnostics=true&env=store://datatables.org/alltableswithkeys 
```

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-24T10:21:45.167

yahoo.finance.historicaldata 正在工作，但您必须使用 startDate 和 endDate：

```
select * from yahoo.finance.historicaldata where symbol in ("YHOO","AAPL","GOOG","MSFT") and startDate = "2012-09-13" and endDate = "2012-09-13" 
```

# amazon-ec2 - 是否有在端口 443 上使用 SSH 的 AMI？

> ID：12417630
> 
> 赞同：4
> 
> 时间：2012-09-14T03:13:34.290
> 
> 标签：amazon-ec2, amazon-ami

我的问题是，简单地说

> **是否有任何 AMI 附带在端口 443 上配置的 SSH？**

我问的主要原因是，尽管我在 IT 部门工作，但我的公司过滤了除 443 和 80 之外的所有端口，并且要求我的所有连接都通过 HTTP 代理。

我之前使用[corkscrew](http://www.agroman.net/corkscrew/)在端口 443 上接受 ssh 的主机上通过 SSH 连接。我的一个朋友仍然能够做到这一点，但它涉及离开办公室或使用 VPN 连接到亚马逊实例，更改 SSHD 配置中的线路，并重新启动 SSH。

是否有默认情况下完成此操作的 AMI？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T03:56:32.367

只要 AMI 支持在实例首次启动时运行的用户数据脚本，您就可以使用标准 EC2 实例在 80 或 443 等备用端口上运行 sshd。Amazon Linux 和 Ubuntu AMI 都支持 CloudInit。

例如，您可以使用以下用户数据启动 Ubuntu EC2 实例：

```
#!/bin/bash -ex
perl -pi -e 's/^#?Port 22$/Port 443/' /etc/ssh/sshd_config
service sshd restart || service ssh restart 
```

启动后，您可以通过 ssh 访问 443 端口。

这是我几年前写的一篇描述这种方法的文章：http: [//alestic.com/2010/12/ec2-ssh-port-80](http://alestic.com/2010/12/ec2-ssh-port-80)

# c - 动态数组 malloc 清空单独的数组

> ID：12417631
> 
> 赞同：2
> 
> 时间：2012-09-14T03:13:37.273
> 
> 标签：c, malloc, free, undefined-behavior

我遇到了动态数组和`malloc`. 我对C相当陌生，所以请原谅（并建议）任何新手错误。

问题是我创建了一个数组（在本例中为 input_string）并将其传递给`func2`. 然后在`func2`我做一个测试，打印出 input_string 的第一个元素。

这在 之前的第一个打印输出中按预期工作`malloc`，但在之后`malloc`它不打印任何内容。这对我来说似乎很奇怪，因为在 to`printf`语句之间我对 input_string 什么都不做。

我假设我处理这些数组不正确，但我不确定。

这是有问题的代码片段：

**更新**

```
... // includes not in snippet

/* CONSTANTS */
#define LINE_LEN 80

/* Function declarations */
char* func1(void);
char* func2(int tl, char* input_string);

int main(void) {
    char* input_string;
    int tab_length;
    char* output_string;

    input_string = func1();
    output_string = func2(tl, input_string);

    return 0;
}

char* func1(void) {
    char cur_char;
    char* input_ptr;
    char input_string[LINE_LEN];
    while ((cur_char = getchar()) != '\n' && chars_read < 80) {
        // iterate and create the array here
    }
    input_ptr = &input_string[0]; /* set pointer to address of 0th index */
    return input_ptr;
}

char* func2(int tl, char* input_string) {
    int n = 0, output_idx = 0;
    char* output_ptr;
    printf("\nBefore malloc: %c ", *(input_string));
    output_ptr = malloc(tab_length * chars_read+1);
    if (output_ptr == NULL) {
            printf("Failed to allocate memory for output_ptr.\nExiting");
            exit(1);
    }
    printf("\nAfter malloc: %c ", *(input_string));
    ...
    return output_ptr;
} 
```

Ps：任何未声明的变量都已在此代码段之外声明。

**更新**

感谢所有的回复和建议。这是非常赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:52:51.013

`func1`返回一个指向临时字符串的指针。你没有分配它。这将产生未定义的行为。

相反，您应该这样做：

```
char* func1(void) {
    char cur_char;
    char* input_ptr = (char*)malloc(LINE_LEN * sizeof(char));
    while ((cur_char = getchar()) != '\n' && chars_read < 80) {
        // iterate and create the array here
    }
    return input_ptr;
} 
```

有趣的是，您确实使用了`malloc`inside `func2`。

完成后，您需要调用`free`以释放内存。

```
int main(void) {
    char* input_string;
    int tab_length;
    char* output_string;

    input_string = func1();
    output_string = func2(tl, input_string);

    free(input_string);
    free(output_string);    

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T03:54:56.740

一个主要问题是您返回一个指向本地数组的指针：

```
char* func1(void)
{
    char cur_char;
    char* input_ptr;
    char input_string[LINE_LEN];
    while ((cur_char = getchar()) != '\n' && chars_read < 80) {
        // iterate and create the array here
    }
    input_ptr = &input_string[0]; /* set pointer to address of 0th index */
    return input_ptr;
} 
```

您已设置`input_ptr`指向本地数组`input_string`（它的第零个元素），然后返回该指针。一旦函数返回，指针无效；该空间被重新用于其他目的。

如果您无论如何都没有收到编译器警告，则应该使用更多警告集进行编译（并且在您知道足够的 C 以知道为什么可以安全地忽略警告之前，您不应该忽略警告）。我`-Wall -Wextra`几乎总是使用，而且`-Wall`基本上总是使用。

* * *

正如[Morpfh](https://stackoverflow.com/users/1240985/morpfh)指出的那样，GCC（在 Mac OS X 10.7.4 上测试的 4.7.1）不会就返回指针发出警告，因此在没有编译器帮助的情况下，您必须注意这一点。（如果您将返回更改为`return input_string;`or `return &input_string[0];`，那么编译器确实会给您一个有用的警告。）

另外，在将代码转换为可编译单元时，我注意到您没有处理 EOF，而是将结果分配`getchar()`给 a `char`; 你不应该因为它返回一个`int`（参见['`fgetc()`检查EOF'](https://stackoverflow.com/questions/11057259/fgetc-checking-eof)以及许多其他问题以了解有关此问题的另一个讨论）。您还需要确保您的字符串以空值结尾。您还应该避免重复常量，因此不要在条件中使用 80，而是使用 LINE_LEN （或者，甚至更好，`sizeof(input_string)-1`）。而且您必须注意一个接一个的缓冲区溢出。所以，我的可编译版本`func1()`是：

```
#include <stdio.h>
#include <stdlib.h>
#define LINE_LEN 80
extern char *func1(void);
char *func1(void)
{
    int cur_char;
    char *input_ptr;
    int chars_read = 0;
    char input_string[LINE_LEN+1];

    while ((cur_char = getchar()) != EOF && cur_char != '\n' && chars_read < LINE_LEN)
        input_string[chars_read++] = cur_char;

    input_string[chars_read] = '\0';
    input_ptr = &input_string[0]; /* set pointer to address of 0th index */
    return input_ptr;
} 
```

这仍然是损坏的代码，因为它返回本地指针。

# javascript - 在没有事件的情况下调用 jQuery 效果

> ID：12417632
> 
> 赞同：2
> 
> 时间：2012-09-14T03:14:07.817
> 
> 标签：javascript, jquery, jquery-ui

我有一个调用 SwapOnscreenPhotos 的函数。这是该功能的来源：

```
function SwapOnscreenPhotos(currentPhotoSet, arrowClicked)
{
    $("#photo-list img").each(function(index) 
    { 
        $(this).attr("src", photoData[currentPhotoSet][index].url);

        if (photoData[currentPhotoSet][index].liked === true)
        {   
            $(this).addClass("liked");
        }
        else
        {
            $(this).removeClass("liked");
        }
    });

    //Animate the old photos off of the screen
    $("#match").hide("slide", { direction: "left" }, 1000);
} 
```

我做了一些随机的事情，然后在函数结束时，我想无条件地调用 #match 上的效果。没有事件之后我要执行此效果（如果重要，事件会确定我是否首先调用 SwapOnScreenPhotos）。我应该如何执行这个效果？

**编辑：**

对不起，让我澄清一下自己。我的印象是每个 jQuery 表达式都遵循类似的公式。`$('selector').event(function() { //function stuff});`

我的代码`$("#match").hide("slide", { direction: "left" }, 1000);`与这个例子有很大的不同。我的代码更类似于以下模型：`$('selector').function`. 请注意，没有任何事件指示我的代码应该何时执行以及何时不应执行。有没有办法在没有这个事件的情况下调用 jQuery 函数？当我尝试运行上面的代码时，我得到了这个错误：

> 未捕获的类型错误：对象 # 的属性 '#' 不是函数 jquery.js:8780 Tween.run jquery.js:8780 tick jquery.js:8491 jQuery.fx.timer jquery.js:9032 Animation jquery.js:8555 jQuery .fn.extend.animate.doAnimation jquery.js:8871 jQuery.extend.dequeue jquery.js:1894 jQuery.fn.extend.queue jquery.js:1937 jQuery.extend.each jquery.js:611 jQuery.fn.jQuery .each jquery.js:241 jQuery.fn.extend.queue jquery.js:1930 jQuery.fn.extend.animate jquery.js:8881 jQuery.each.jQuery.fn.(匿名函数) jquery.js:8853 AnimateMatch 匹配.js:21 SwapOnscreenPhotos match.js:70 $.ajax.success match.js:167 jQuery.Callbacks.fire jquery.js:974 jQuery.Callbacks.self.fireWith jquery.js:1082 done jquery.js:7650 jQuery. ajaxTransport.send.callback

我认为此错误是由于我未能指定事件引起的。这更有意义吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:22:52.747

> 我的印象是每个 jQuery 表达式都遵循类似的公式。$('selector').event(function() { //function stuff});

不，事实并非如此。并非一切都是对事件的反应。您可以致电：

```
$("#match").hide("slide", { direction: "left" }, 1000); 
```

在 DOM 准备好并且操作将在所选元素上执行之后的任何时间。

您遇到的错误可能是因为您在 DOM 准备好之前尝试使用 jQuery 元素选择。这就是为什么您通常将需要选择元素的任何内容包装在 onReady 附件中的原因。这样 js 直到 DOM 被解析并可以使用后才会执行。

```
$(function(){
   // this will execute as soon as the DOM is ready
   $("#match").hide("slide", { direction: "left" }, 1000);
}); 
```

onReady 与 onLoad 类似，但发生在之前，因为 onLoad 等待加载外部资产（如图像），而 onReady 在 DOM 加载后立即发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:37:48.937

您正在尝试使用[JQuery UI`hide`](http://jqueryui.com/demos/hide/)；如果尚未加载 JQuery UI 库，而您正在使用[纯 JQuery](http://api.jquery.com/hide/) ，则这是您收到的错误消息。

例如，如果我使用 Firebug 在此（堆栈溢出）页面上运行您的代码，那么我会得到相同的错误。

```
$("body").hide("slide", { direction: "left" }); 
```

> TypeError：对象#的属性“#”不是函数

* * *

总而言之，您尝试调用该函数的方式没有任何问题。我认为问题在于您忽略了包含 JQuery UI 库，或者它没有正确加载。

# php - Codeigniter 使用 facebook 登录返回 userId 0 ，登录成功后重定向回我身边

> ID：12417633
> 
> 赞同：1
> 
> 时间：2012-09-14T03:14:10.950
> 
> 标签：php, codeigniter, facebook-login

我已经使用 codeigniter 开发了登录 facebook 应用程序（Facebook SDK），首先，我在本地进行。

它工作得很好，当登录成功时，facebook通过redirect_uri重定向回我的侧控制器，并获取userId来查询登录用户的信息。

但是，当我将此代码上传到服务器端时，redirect_uri 有效，但我得到了 userId 的返回 0，所以，如果 userId 为 0，我无法查询登录用户的数据。

我的问题是，为什么 userId 在登录成功后返回 0 ？

代码控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    class Setting extends CI_Controller {

       public function __construct()
       {   

          $CI = & get_instance();
          $CI->config->load("facebook",TRUE);
          $config = $CI->config->item('facebook');
          $this->load->library('facebook', $config);

       }
       public function index() 
       {
             if($this->form_validation->run() == FALSE){

                 $this->acc_login();
             }else {
                 redirect('check_session', 'refresh');  
             }
       }

       public function acc_login()
       {
             $user = $this->facebook->getUser();

             if($user) {

             try {              
                  $user_info = $this->facebook->api('/me');
                  redirect(base_url());             
             } catch(FacebookApiException $e) {
                  echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
                  $user = null;
             }
             } else {
                    $param = array('scope' => 'email,read_stream','redirect_uri' => $my_url);
                    $data['getURLLogin'] = "<a href=\"".$this->facebook->getLoginUrl($param)."\"><img src=\"".base_url()."public/frontend/images/login-fb.png\" width=\"155\" height=\"25\" /></a>";

             }
       }

    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:41:15.083

尝试添加

```
parse_str( $_SERVER['QUERY_STRING'], $_REQUEST ); 
```

前

```
$user = $this->facebook->getUser(); 
```

**更新**

FB 将参数从“redirect_url”更改为“next”，从 v2 更改为 v3，并且记录在案。尝试“下一步”，应该适合你。

[资源](https://stackoverflow.com/questions/9332666/error-when-including-redirect-uri-with-getloginurl-facebook-php-sdk)

# qt - qt ：显示鼠标位置，如工具提示

> ID：12417636
> 
> 赞同：5
> 
> 时间：2012-09-14T03:14:45.290
> 
> 标签：qt, mouse-cursor, qcursor

正如我在标题上写的，我希望像工具提示一样显示鼠标位置。为此，我认为我必须覆盖 QCursor，对吗？

但我不知道 QCursor 的详细信息以及如何制作新的 cursorShape。

有没有这样的例子？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T09:10:38.653

假设您在移动光标时需要一个坐标读数（就像在许多图形或 CAD 应用程序中一样），您真的**不想**覆盖`QCursor`.

最有效的方法取决于将提供坐标的小部件，但在大多数情况下，最简单的方法是`setMouseTracking(true)`用于小部件，并覆盖它`mouseMoveEvent(QMouseEvent* event)`以显示`QToolTip`如下：

```
void MyWidget::mouseMoveEvent(QMouseEvent* event)
{
    QToolTip::showText(event->globalPos(),
                       //  In most scenarios you will have to change these for
                       //  the coordinate system you are working in.
                       QString::number( event->pos().x() ) + ", " +
                       QString::number( event->pos().y() ),
                       this, rect() );
    QWidget::mouseMoveEvent(event);  // Or whatever the base class is.
} 
```

通常，您不会“强制”这样的工具提示；您将`QWidget::setToolTip(const QString&)`在`QWidget::event(QEvent*)`. 但是 normal`QToolTip`仅在短暂延迟后出现，但您希望它们不断更新。

我应该声明我没有尝试过，但这是我会这样做的方式。希望有帮助！

# css - IE7浮动一个无序列表

> ID：12417643
> 
> 赞同：0
> 
> 时间：2012-09-14T03:15:25.413
> 
> 标签：css, internet-explorer, internet-explorer-7, internet-explorer-6

看看[这个 fiddle](http://jsfiddle.net/8HUcG/12/) .. 并在 firefox 和 IE7（或 6）中渲染它

在Firefox中，它渲染得很好。但在 IE7 中，菜单消失（它应该显示在右侧）

为什么会发生？什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:34:15.187

最好的解决方案就是这样。IE7 不支持某些 CSS 属性。`overflow:hidden;`在这种情况下， IE7不支持`float:right;`. 在您的设计上，尽量关注 IE8+ 和其他主流浏览器，如 Firefox、Chrome 和 Safari。相信我，使用旧浏览器支持的设计是一件痛苦的事情...... *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:58:27.950

嗨，现在习惯了这样的 CSS 条件

```
 <!--[if lte IE 7]>
        #container{
    direction: none;
}
    <![endif]--> 
```

现在我在 ie 7 中测试应用这个规则很好。

# php - Code Igniter 登录用户角色

> ID：12417644
> 
> 赞同：1
> 
> 时间：2012-09-14T03:15:42.753
> 
> 标签：php, codeigniter, phpmyadmin

我已经进行了正确的数据库配置，view_login，并且我已经将一些数据插入到 ms_user 表中。现在，我如何使用用户名、密码、角色（'学生''老师''校长'）等角色创建登录名。

我发现[这](http://www.codefactorycr.com/login-with-codeigniter-php.html)是为了指导我，但该网站仅提供 2 信息登录、用户名和密码。我在哪里添加第三个“角色”信息？

这是 view_login.php

```
<html>
<head>  <title>Selamat datang pada QB Project </title></head>

<script>
    function loginsukses()
    {
            alert('Login Success');
    }
</script>

<body>
<center><h1>Selamat datang pada QB Architecture</h1></center>
<div id="form">
        <form method="POST" action="">
        <table border="1" bordercolor="gold" style="background-color:#FFFFFF" width="20%" cellpadding="2" cellspacing="4">
        <tr>
            <td class="td">Username</td>
            <td>
            <input type="text" id ="username" name ="username" class="gui" " />

            </td>

        </tr>

        <tr>
            <td class="td">Password</td>
            <td class="td"><input type="password" id="password" name="password" class="gui" /></td>
        </tr>

        <tr>
            <td class="td">Jabatan</td>
            <td class="td"><select name="jabatan" id="Jabatan" class="gui">
            <option value=“Accounting”&gt;Accounting</option>
            <option value=“Direktur”&gt;Direktur</option>
            <option value=”HeadDivisi”&gt;Head Divisi</option>
            </select></td>
        </tr>
        <tr>
            <td></td>
            <td class="td">
            <input type="submit" name="submit" value="Login" class="button" onclick="loginsukses()" />          
            </td>
        </tr>

    </form>
</div>

</body>
 </html> 
```

这是模型文件夹中的登录功能

```
<?php

Class Login extends CI_Model
 {
 function login($username, $password)
 {
   $this -> db -> select('username, password, jabatan');
   $this -> db -> from('ms_user');
   $this -> db -> where('username = ' . "'" . $username . "'");
   $this -> db -> where('password = ' . "'" . MD5($password) . "'");
   $this -> db -> where('jabatan = ' . "'" . $jabatan . "'");
   $this -> db -> limit(1);

   $query = $this -> db -> get();

   if($query -> num_rows() == 1)
   {
     return $query->result();
   }
   else
   {
     return false;
   }
 }
}
?> 
```

这是控制器文件夹中的 validate_login 函数

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class ValidateLogin extends CI_Controller {

 function __construct()
 {
   parent::__construct();
   $this->load->model('Login','',TRUE);
 }

 function index()
 {
   //This method will have the credentials validation
   $this->load->library('form_validation');

   $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
   $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');
   $this->form_validation->set_rules('Jabatan', 'Username', rim|required|xss_clean');

   if($this->form_validation->run() == FALSE)
   {
     //Field validation failed.  User redirected to login page
     $this->load->view('login_view');
   }
   else
   {
     //Go to private area
     redirect('qb_main', 'refresh');
   }

 }

 function check_database($password)
 {
   //Field validation succeeded.  Validate against database
   $username = $this->input->post('username');

   //query the database
   $result = $this->user->login($username, $password, $jabatan);

   if($result)
   {
     $sess_array = array();
     foreach($result as $row)
     {
       $sess_array = array(
         'id' => $row->id,
         'username' => $row->username
       );
       $this->session->set_userdata('logged_in', $sess_array);
     }
     return TRUE;
   }
   else
   {
     $this->form_validation->set_message('check_database', 'Invalid username or password');
     return false;
   }
 }
}
?> 
```

我对这个框架很陌生，所以我不明白我上面写的内容，但我愿意学习，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:00:39.300

您需要在数据库中创建一个新列，或者......更好的是为其他用户信息创建一个单独的表，并使用“join”在您的模型 CRUD 函数中将它们链接在一起。但是，请查看 Tank Auth 库。这比一般的登录要好，从头开始注册。

# c# - 组合来自不同表的行

> ID：12417649
> 
> 赞同：0
> 
> 时间：2012-09-14T03:16:08.680
> 
> 标签：c#, mysql

我有 2 张桌子。一个表有 3 行，另一个表有 5 行。我想将这两个表连接在一起，结果应该分别显示 3 行和 5 行。有没有什么方法可以使用 sql 语句来实现？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:17:42.540

你可以用`UNION`这个，

```
SELECT colA, colB, colC, 1 as OrderThis
FROM tableA
UNION ALL
SELECT colA, colB, colC, 2 as OrderThis
FROM tableB
ORDER BY OrderThis ASC 
```

有两个基本的使用规则`UNION`

*   两个查询的列数必须相同
*   数据类型必须兼容

`UNION`有一个可选参数`ALL`。如果省略`ALL`参数，`UNION`将清楚地显示组合的所有唯一记录。

如您所见，我添加了一个*虚拟列* `OrderThis`。这将是您的行排序的基础。但问题是它会显示在您的结果列表中。解决方案是将其包装在子查询中，

```
SELECT colA, colB, colC
FROM
(
    SELECT colA, colB, colC, 1 as OrderThis
    FROM tableA
    UNION ALL
    SELECT colA, colB, colC, 2 as OrderThis
    FROM tableB
) a
ORDER BY OrderThis ASC 
```

# php - 如何在没有'new'运算符的情况下在yii中加载用户定义的类？

> ID：12417650
> 
> 赞同：0
> 
> 时间：2012-09-14T03:16:11.580
> 
> 标签：php, yii

我现在已经在研究 Yii 框架了。按照手册，我将自己的类“Util”放在“protected/componets”文件夹下。而且我必须在我的模型文件中使用'new Util（）'来获取对象，还有其他方法可以做同样的事情吗？就像一些写成“getComponent()”的方法，这样我就不必每次都更新它。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:28:51.097

`Util`如果您的项目需要在任何时候都可以使用该类的一个实例，那么您正在为[Singleton 编程模式](http://www.oodesign.com/singleton-pattern.html)描述一个很好的用例。对于您在 PHP 中的使用，您可以执行以下操作：

```
<?php
class Util {
  private var $instance = false;
  private function __construct() {
    echo "No one can call 'new' but me!";
  }

  static function getInstance() {
    if ($this->instance == false) {
      // Create the first and only instance of this class
      $this->instance = new Util();
    }
    return $this->instance;
  }

  public function foo($bar) {
    echo "Hello $bar!";
  }
}
?> 
```

这就是类定义。要使用，只需使用`$util = Util::getInstance();`获取 Util 类的一个实例。然后类似的东西`$util->foo('World');`就可以了。

# mysql - 分层部门结构的数据库设计

> ID：12417655
> 
> 赞同：0
> 
> 时间：2012-09-14T03:16:37.283
> 
> 标签：mysql, sql, database, sql-server-2008, database-design

我正在尝试开发一个数据库来存储和检索动态创建的分层部门结构。每个部门可以有一组子部门或一组子属性，但不能同时拥有。在运行时，用户创建一个部门和部门的孩子。如果部门有属性作为子项，用户指定每个属性的类型（int/string/bool）、大小。用户可以指定任意数量的属性作为部门的子项。所以部门结构可能是

```
RootDep
   Dep1
   Dep2
     attribute1(string,12)
     attribute2(int,10)
   Dep3
     Dep31
     Dep32
        Dep321
   Dep4
     Dep41
        attribute4(bool,size not applicable)
        attribute5(string,60)
        attribute6(string,10)
        attribute19(int, 5)   
     Dep5 
```

我需要将此层次结构保存在数据库中。稍后，用户还可以为具有子属性的部门 Dep2 和 Dep41 添加数据。所以我想我需要在用户添加带有属性的部门时为部门动态生成表格。

用户还可以修改结构。例如，添加新部门/属性，删除部门/属性，重命名部门名称，属性名称。用户还可以修改为具有子属性的任何部门输入的记录。

请让我知道为此目的设计数据库的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:32:13.250

我不建议为此动态生成表。你可以用两张表来做——一张用于部门，一张用于属性：

```
create table dept (
    dept_id int,
    parent_dept_id int null,
)

create table dept_attribute (
    dept_id int,
    attribute_id int,
    value_type int,
    value_length int,
    int_value int null,
    string_value varchar(255) null,
    boolean bit
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:19:12.850

为确保子部门只能连接到无属性的父级，而属性只能连接到无子部门，您可以执行以下操作...

![在此处输入图像描述](../Images/b6055d48aa0797c9be6a416d6a32d93f.png)

在 DEPARTMENT 表上具有以下约束：

```
CHECK (
    (PARENT_TYPE IS NULL AND PARENT_NO IS NULL)
    OR (PARENT_TYPE IS NOT NULL AND PARENT_NO IS NOT NULL AND PARENT_TYPE = 1)
) 
```

以及 ATTRIBUTE 表上的以下约束：

```
CHECK (DEPARTMENT_TYPE = 2) 
```

对于具有属性的部门，它必须是类型 2（以避免违反第二个 CHECK），因此它不能有子部门（因为这会违反第一个 CHECK）。

对于具有子部门的部门，它必须是类型 1（以避免违反第一个 CHECK），这也禁止它具有任何属性（因为这会违反第二个 CHECK）。

无子*和*无属性的部门可以是类型 1 或类型 2。

* * *

另一个问题是如何存储属性值。

1.  一种方法是始终将其编码为字符串并将“原始”类型存储在其旁边：

    ![在此处输入图像描述](../Images/100fcae42365f653fd3780e5bf6457db.png)

2.  或者，您可以为每种可用类型设置一个单独的字段，并使用 CHECK 确保其中一个是非 NULL：

    ![在此处输入图像描述](../Images/8611b44c063f765e4d5030865447cd06.png)

3.  或者完全过火并为每种属性类型使用单独的表。

我认为您最好坚持使用（1）或（2）。

# hadoop - 命令“hadoop namenode -format”会改变整个硬盘文件系统的类型吗？

> ID：12417658
> 
> 赞同：3
> 
> 时间：2012-09-14T03:16:52.993
> 
> 标签：hadoop, filesystems, hdfs, kvm

我的 hadoop 是建立在 KVM 环境上的，但是这些虚拟机不仅用于 hadoop 分布式计算，它们还有其他重要任务。

所以，我想知道该命令是否`hadoop namenode -format`会将虚拟机的整个硬盘格式化为 HDFS 类型，并使虚拟机的其他作业崩溃......

顺便问一下，有没有关于 HDFS 的资源？我会非常欣赏它的味道。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T04:24:34.743

HDFS 不是像 ext3 或类似的硬盘驱动器上运行的真正文件系统，它靠近数据库。就像数据库一样，HDFS 将数据存储在常规文件系统上，并提供 API 来访问其数据。

所以不用担心用“hadoop namenode -format”破坏你的数据，这个命令只是初始化“数据库”。

您可以在《Hadoop：权威指南》一书中了解 HDFS，也可以通过本文了解 HDFS - [http://www.aosabook.org/en/hdfs.html](http://www.aosabook.org/en/hdfs.html)

# jquery - 无法使用 $.getJSON 读取未定义的属性“长度”

> ID：12417663
> 
> 赞同：0
> 
> 时间：2012-09-14T03:17:49.943
> 
> 标签：jquery, json

```
function loadCountries(clicked_cat){    

$.getJSON('my.json', function(data) {
      var items = [];
      $.each(data.Category_1, function(key,val) {
        items.push('<li id="' + key + '">' + val + '</li>');
      });

      $('<ul/>', {
        'class': 'my-new-list',
        html: items.join('')
      }).appendTo('#myDiv');
    });
} 
```

## 这是做什么的：

它完美地加载了 json 文件。我`data.Category_1`用来访问 JSON 元素。

## 我不能做的事情：

我需要添加一个变量来代替`Category_1`in `data.Category_1`。它应该类似于`data.clicked_cat`where`clicked_cat`给我的详细信息`Category_1`，例如`Category_2`等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:06:45.073

尝试这个

```
$.getJSON('my.json', function(data) {
      var items = [];
      $.each(data, function(key,val) {
        items.push('<li id="' + data["clicked_cat "]+ '">' + data["clicked_cat "]+ '</li>');
      });

      $('<ul/>', {
        'class': 'my-new-list',
        html: items.join('')
      }).appendTo('#myDiv');
    });
} 
```

# python - 如何将实例变量作为参数传递，该参数可以在多次调用的函数中持续存在？

> ID：12417667
> 
> 赞同：0
> 
> 时间：2012-09-14T03:18:44.480
> 
> 标签：python, malware

我正在使用[Androguard](http://code.google.com/p/androguard/)分析一些恶意软件文件。目前我正在尝试获得[androsim.py](http://code.google.com/p/androguard/source/browse/androsim.py)分析一个包含整个目录的文件。目标是遍历所有文件夹，在每个文件夹中您将文件与文件夹中的其他文件进行比较。

我无法让 androsim 在另一个脚本中运行，主函数的参数之一是实例变量，其值是瞬态的并且代码中断？

```
import androsim
import sys, os

from optparse import OptionParser  
from androsim import options 
parser = OptionParser() 
for option in options :
   param = option['name']
   del option['name']
   parser.add_option(*param, **option)

options, arguments = parser.parse_args()
sys.argv[:] = arguments
print options,arguments

androsim.main(options, arguments) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:51:07.390

尚不完全清楚您在这里追求的是什么，但是如果您拥有的实例对象在将其传递给函数和使用它之间发生了变化，则制作它的副本并改为传递副本：

```
from copy import deepcopy
intransient = deepcopy(options)

androsim.main(intransient, arguments) 
```

# asp.net-mvc-3 - 可以重定向到新页面并传递路由值的 Ajax.BeginForm

> ID：12417668
> 
> 赞同：3
> 
> 时间：2012-09-14T03:18:47.767
> 
> 标签：asp.net-mvc-3, jquery, asp.net-ajax

此链接显示如何重定向 @Ajax.BeginForm，但不显示如何将路由值传递给新视图。

[可以重定向到新页面的 Ajax.BeginForm](https://stackoverflow.com/questions/9391201/ajax-beginform-that-can-redirect-to-a-new-) page/9391267#9391267的 Ajax.BeginForm

您将如何使用路由值重定向 @Ajax.BeginForm？相当于

```
return RedirectToAction("Edit", new { id = acntId }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T03:33:20.740

没有什么不同，只需将[`Url`辅助重载](http://msdn.microsoft.com/en-us/library/dd460294%28v=vs.98%29)与路由值一起使用：

```
return Json(new { 
    url = Url.Action("Checkout", 
        new { id = accntId }
    ) 
}); 
```

# opencv - OpenCV Mat 访问和使用 Mat_ 的常见错误

> ID：12417674
> 
> 赞同：1
> 
> 时间：2012-09-14T03:19:19.483
> 
> 标签：opencv, matrix

我使用以下代码访问 Mat 的元素并发现了这个困难： ![在此处输入图像描述](../Images/17d25ad045b66c3acbfceadef81ef3b6.png)

这里出现2个问题：

*   nzpxl Mat 是硬定义的类型 CV_16UC2 或者它是从这个函数的调用者传入的
*   nzpxl 的访问方式是 at which 也是一种硬形式

因此，当两者之间没有良好的对应关系时，函数就会崩溃。我几乎不知道哪些是兼容的。例如，CV_16UC2 是否与 Vec2i 对应？

**问题1**：这只能硬编码吗？
**问题2**：如何知道兼容类型？

编辑01：抱歉信息不足！关于 Mat_ 模板，我已经看到使用 Mat_ 来定义自己的类型以清楚起见并避免使用`OpenCV`默认类型的帖子。这是我第二个问题的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:52:27.760

有时您必须决定将哪种数据存储在矩阵中，并且必须在某处“硬编码”。

如果您决定您的数据矩阵是 CV_16UC2 类型，那么您应该检查所有访问该矩阵中像素的函数（例如，使用 at<>）该矩阵是否为预期形式：

```
void someFunction(cv::Mat &myMatrixOf16UC2) {
  // using asserts
  assert(myMatrixOf16UC2.type() == CV_16UC2);
  // or using exceptions
  if (myMatrixOf16UC2.type() != CV_16UC2)
    throw  someException;

  // do the job 
```

}

顺便说一下，int 是 32 位的，所以 Vec2i 应该处理分配给 CV_32SC2 的矩阵。CV_16UC2 -> cv::Vec2s，甚至是在 OpenCV 中没有预定义 typedef 的 cv::Vec。

一种有用的做法是在某个地方为您的程序定义您正在使用的数据，其中包含 typedef 和相应的 type() 函数，例如在标题中：

```
 typedef cv::Vec<unsigned short, 2> pixel_t; 
```

和

```
 int getOpenCVTypeForMyPixelType() { return CV_16UC2; } 
```

然后，如果您想从 short 更改为 int 或 float，您只需修改这些函数

# mongodb - 如何从 gridfs 获取文件并使用 Nginx 将其作为流播放？

> ID：12417678
> 
> 赞同：1
> 
> 时间：2012-09-14T03:20:50.307
> 
> 标签：mongodb, stream, nginx, gridfs

我用 Nginx 设置了一个 Web 服务器，我使用 nginx-gridfs 模块来访问 Mongodb 内容并使用 http_mp4_module 在客户端上将 mp3 文件作为流播放，以上两个服务都可以独立工作，但是当我尝试结合这两个服务时，并尝试访问存储在Mongodb中的mp3文件并在客户端将其作为流播放，出现404错误，这听起来http_mp4_module无法与Gridfs一起使用，它需要文件系统中存在的真实文件。以下是我的 Nginx 配置设置：

访问 Mongodb 内容：（我可以通过 URL http://myhost/voice/mp3/xxxxxx.mp3 访问 mp3 文件）

```
 location /voice/mp3/ {
                     gridfs whatsup
                            field=filename
                            type=string
                            root_collection=storage.voice.mp3;
                     mongo localhost:27017;
     } 
```

用于在客户端以流的形式播放 mp3 文件（我可以使用 URL http://myhost/mp3/xxxxxx.mp3 的浏览器播放 mp3，该 mp3 文件存在于文件系统中）

```
 location /mp3 {
              root /var/www/html/;
              mp4;
     } 
```

上述两个服务都工作正常，但是当我将它们结合起来时，它不起作用，配置如下：

```
 location /play/mp3 {
                     gridfs whatsup
                            field=filename
                            type=string
                            root_collection=storage.voice.mp3;
                     mongo localhost:27017;

                     mp4;
        } 
```

当我尝试使用浏览器访问 URL http://myhost/play/mp3/xxxxxx.mp3 并使用它时，它显示 404 错误。

有没有办法将这两种服务结合起来？或者是否有我错过的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:03:14.427

不要使用 gridfs-fuse 将您的 gridfs 挂载到文件系统，请检查以下内容：http: [//blog.vladimirm.com/2011/06/export-files-from-mongodb-gridfs-with-directory-paths/](http://blog.vladimirm.com/2011/06/export-files-from-mongodb-gridfs-with-directory-paths/)

这是一个将 gridfs 文件挂载到文件系统的 bash 脚本

用法 ：

*   创建名为 gridfs.sh 的文件（放入您将在链接中找到的 bash 脚本中）。

*   运行这个命令： $ ./gridfs.sh host database_name（这将在你所在的目录中挂载文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T01:44:36.797

由于时间搜索，一些媒体播放器需要 HTTP 范围请求协议。此类播放器在播放媒体之前检查网络服务器是否支持该协议。

原来的 nginx-gridfs 模块没有范围请求的实现。这个[快速破解补丁](https://github.com/kiwanami/nginx-gridfs/commit/138a6b694353e29c53dda22ea5393a62630f9981)添加了范围请求支持，我确认它解决了问题。

然而，这个实现会阻塞整个 nginx 进程，直到一个流完成。这对nginx来说太糟糕了，因为在事件驱动的架构中应该避免阻塞IO。所以，我认为我们应该使用其他实现来提供大文件或流媒体，例如 gidfs-fuse 和其他[节点代理](https://gist.github.com/kiwanami/3932122)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T03:32:36.550

首先，将您的 mongodb gridfs url 重定向到本地文件系统，像这样配置您的 nginx 服务器：

```
location / {
        root mp3;
        mp4;
}

location /tushuo/voice/mp3/ {
    rewrite ^/tushuo/voice/mp3/(.*) /$1;
} 
```

然后，您可以使用[gridfs-fuse](https://github.com/ax003d/gridfs-fuse)将您的 mongodb gridfs 挂载到本地文件系统树，以便 nginx mp4 模块可以找到它。（注意：您必须以 root 身份运行 nginx。）

```
sudo ./mount_gridfs --db=whatsup.storage.tushuo.voice --host=localhost --fsnode=mp3 -/usr/local/nginx/mp3/ 
```

# mysql - 在不使用 PHP 的情况下更改 MySQL 查询的输出结构

> ID：12417679
> 
> 赞同：3
> 
> 时间：2012-09-14T03:20:56.710
> 
> 标签：mysql, database

我目前正在查询 MySQL 数据库中的数据并在 PHP 中返回结果。

我正在运行查询

```
SELECT title.id, title.title, title.description
FROM co_titles title
WHERE title.id = :title 
```

我得到的结果如下：

```
Array ( 
    [0] => Array ( 
        [id] => 1966 
        [title] => Example Title 
        [description] => Example Description
    )
) 
```

查询没有任何问题，这是我期望的确切结果，但是我希望我的结果看起来像这样：

```
Array (
    [1966] => Array (
        [title] => Example Title 
        [description] => Example Description
    )
) 
```

**请参阅下面的编辑，这不再相关：**有没有办法可以修改我的查询以使输出看起来像这样？我想在不使用 PHP 的情况下做到这一点，只使用 MySQL，除非这在 MySQL 中是完全不可能的！

我非常感谢你们的帮助，我一直在用头撞墙。

**编辑：**好吧，看来我想做的基本上是不可能的。有人可以帮助以最有效的方式从一种转换到另一种吗？

好的，我想通了，对于我之后的任何人，我找到的最佳方法如下：

```
function parseNotes($notes)
{
    $returnarray = array();
    foreach($notes as $i)
    {
        $returnarray[$i['id']] = $i;
        unset($returnarray[$i['id']]['id']);
    }
    return $returnarray;
} 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:23:21.567

你不能。查询返回的记录是线性的。做到这一点的唯一方法是在您的 PHP 代码中对其进行格式化。`MySQL` 即使您使用`GROUP BY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:26:26.720

没有办法直接从 MySQL 中实现这一点。实现此目的的唯一方法是将结果数组映射到另一个数组，使用结果数组中的 id 作为新数组的索引。

# c# - winforms列表框项目到业务层

> ID：12417680
> 
> 赞同：0
> 
> 时间：2012-09-14T03:21:12.310
> 
> 标签：c#, winforms

我想将我的列表框项向下传递到我的业务层。

```
//From Save click event
var toBusiness = new List<string>();

foreach (var item in lbProducts.Items)
{
    toBusiness.Add(item.ToString());
} 
```

这是这样做的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:53:42.790

我认为这些项目来自业务层，对吗？因此，您只需将一些非 gui 的内容传递给业务层，以使业务层能够识别它们。如果您的项目具有唯一 ID，那么您可以只传递唯一 ID 的列表或数组，否则只需传递项目数组。

```
var items = lbProducts.Items.OfType<MyItemType>().ToArray()
myBusinessLayer.DoSomething(items); 
```

或者

```
var ids = lbProducts.Items.OfType<MyItemType>().Select(i => i.ID).ToArray()
myBusinessLayer.DoSomething(ids); 
```

# java - 安卓转换字符串

> ID：12417681
> 
> 赞同：0
> 
> 时间：2012-09-14T03:21:21.197
> 
> 标签：java, android

我想将字符串放入 Integer/Float/Double 之一，但结果放入 NumberFormatException.. 我的字符串是：37,78584，如何将它们转换为我想要的类型？首先感谢我的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:24:10.367

将`Comma`(",") 替换为 ""

```
 String s ="37,78584";
  int ival = Integer.parseInt(s.replace("," ,""));
  double dval=Double.parseDouble(s.replace("," ,""));
  float fval =Float.parseFloat(s.replace("," ,"")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T03:32:24.343

你可以做这样的事情，首先将你的多个数字拆分`String[]`并循环它并获取数据。

```
String myString ="37785 84";
String[] mSplittedNumber= myString.split(" ");
int intValue = 0;
int doubleValue = 0;
int floatValue = 0f;

for(int i=0;i< mSplittedNumber.length;i++)
{
      intValue =Integer.parseInt(mSplittedNumber[i]);
      doubleValue =Double.parseDouble(mSplittedNumber[i]);
      floatValue =Float.parseFloat(mSplittedNumber[i]);
} 
```

*注意：如果您的字符串包含多个带有标识符的数字（“”，“|”，，“....等），则上面的答案将完成这项工作*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T07:20:22.630

**我的实现：**

```
 String myString = "37,78584";
    {
        /* Delete whitespaces from our string */
        myString = myString.trim();

        /* Change comma to dot cause Java double/float work with dots*/
        myString = myString.replace(",", ".");  
    }
    try {
        /* Parsing */
        Double myDouble = Double.valueOf(myString);
        System.out.println(myDouble);
    } catch (NumberFormatException ex) {
        ex.printStackTrace();
    } 
```

希望，对你有帮助

# wpf - 从 Control 派生，然后允许其他人应用样式

> ID：12417683
> 
> 赞同：1
> 
> 时间：2012-09-14T03:21:30.797
> 
> 标签：wpf, styles, controltemplate

我从 Control 基类派生了一个新控件，并在静态构造函数中设置了 DefaultStyleKeyProperty，以便使用 Generic.xaml 中的适当样式来定义 ControlTemplate。这一切都很好，我得到了几个按钮等的预期外观。

现在我想添加一些 Style 实例来自定义我的新控件的设置，例如字体和前景色。但是当我将样式分配给自定义控件 Style 属性时，它似乎删除了原始默认样式，因此它不再具有任何外观。

这似乎不太对劲。TabControl 具有默认样式，但您仍然可以将 Style 分配给 TabControl.Style 属性，该属性仅修改前景色，并且在此过程中不会删除 TabControl 外观的其余部分。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:58:48.663

根据默认值声明您的新样式：

```
<Style TargetType={x:Type MyControl} BasedOn={StaticResource {x:Type MyControl}> 
```

# eclipse - 在 Eclipse 中扩展参考搜索

> ID：12417687
> 
> 赞同：5
> 
> 时间：2012-09-14T03:22:18.247
> 
> 标签：eclipse, search, reference

当我在 Eclipse 中单击变量、对象等并从上下文菜单中选择“引用 --> 项目”时，我会看到一个引用所述对象的方法列表。但是，如果一个函数有多个引用，则结果显示为：

```
functionName(signature) (x matches) 
```

双击结果将我带到第一场比赛，似乎没有办法找到剩余的比赛。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T06:31:21.990

在搜索视图中使用带有向上/向下箭头的按钮，它们将带您进入上一个/下一个搜索结果，与代码结构、文件位置等无关。

无法进一步扩展 Java 方法的搜索结果树。

# python - 神经网络的反向传播 - Python

> ID：12417688
> 
> 赞同：2
> 
> 时间：2012-09-14T03:22:35.493
> 
> 标签：python, neural-network, backpropagation, feed-forward

我正在编写一个程序来在 python 中执行神经网络我正在尝试设置反向传播算法。基本思想是，我查看 5,000 个训练示例并收集错误并找出我需要向哪个方向移动 theta，然后将它们向那个方向移动。有训练示例，然后我使用一个隐藏层，然后是一个输出层。但是，我在这里弄错了梯度/导数/错误，因为我没有正确移动 theta，因为它们需要移动。我今天花了 8 个小时，不知道我做错了什么。谢谢你的帮助！！

```
x = 401x5000 matrix

y = 10x5000 matrix   # 10 possible output classes, so one column will look like [0, 0, 0, 1, 0... 0] to indicate the output class was 4

theta_1 = 25x401

theta_2 = 10x26

alpha=.01

    sigmoid= lambda theta, x: 1 / (1 + np.exp(-(theta*x)))

        #move thetas in right direction for each iteration
        for iter in range(0,1):
            all_delta_1, all_delta_2 = 0, 0
            #loop through each training example, 1...m    
            for t in range(0,5000):

                hidden_layer = np.matrix(np.concatenate((np.ones((1,1)),sigmoid(theta_1,x[:,t]))))
                output_layer = sigmoid(theta_2,hidden_layer)

                delta_3 = output_layer - y[:,t]
                delta_2= np.multiply((theta_2.T*delta_3),(np.multiply(hidden_layer,(1-hidden_layer))))

                #print type(delta_3), delta_3.shape, type(hidden_layer.T), hidden_layer.T.shape
                all_delta_2 += delta_3*hidden_layer.T
                all_delta_1 += delta_2[1:]*x[:,t].T

            delta_gradient_2 = (all_delta_2 / m)
            delta_gradient_1 = (all_delta_1 / m)
            theta_1 = theta_1- (alpha * delta_gradient_1)
            theta_2 = theta_2- (alpha * delta_gradient_2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:51:58.093

看起来您的渐变与未压缩的输出层有关。

尝试更改`output_layer = sigmoid(theta_2,hidden_layer)`为`output_layer = theta_2*hidden_layer`.

或者重新计算压扁输出的梯度。

# objective-c - NSString 重新分配值导致内存泄漏？

> ID：12417694
> 
> 赞同：0
> 
> 时间：2012-09-14T03:23:24.270
> 
> 标签：objective-c, nsstring

据我所知， NSString 是“创建一次且只读”的类型。当给 NSString 重新赋值时，我们实际上改变了指针的值，使它指向另一个内存地址，但是 NSString 对象保持不变。

我的问题是：如果 NSString 对象没有其他指向它的指针，是否会在重新分配后导致内存泄漏？

要详细讨论，请阅读以下代码：

```
@interface ViewController ()
@property (nonatomic,strong) NSString* aString;
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.aString = [NSString stringWithFormat:@"Hello %@",@"Philip"];

    // only for setting a break point
    int x;

    // reassigning 
    self.aString = [NSString stringWithFormat:@"Goodbye"];

    // only for setting another break point
    int y;
}

@end 
```

在调试控制台中：

```
(lldb) po self.aString
(NSString *) $0 = 0x00337d00 Hello Philip
(lldb) po self.aString
(NSString *) $1 = 0x3f41dfe0 Goodbye
(lldb) 
```

它清楚地表明，在重新分配值之后，aString 现在指向不同的内存位置。我的另一个问题是：如何显示`0x00337d00`在调试控制台中开始的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:37:29.117

如此强大的是 ARC 中的 retain 属性的替代品。使用分配和检查

```
@property (nonatomic,assign) NSString* aString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:59:38.487

如果 NSString 没有指向它的指针，它应该被释放。这可能只有在自动释放池被耗尽后才会发生，因为它是用一个应该返回自动释放的方法创建的。

同样字面的 NSStrings`@"string"`永远不会被释放，因为它们实际上是常量（有点像单例）。

# java - 如何在 Android 中实现推送通知

> ID：12417704
> 
> 赞同：0
> 
> 时间：2012-09-14T03:25:02.937
> 
> 标签：java, android, android-manifest, google-cloud-messaging

我从一天多的时间开始尝试使用 gcm 实现一个简单的 PUSH 通知，但无法实现它。

每当我添加此权限时

```
<permission android:name="Android.Test.permission.C2D_MESSAGE"  android:protectionLevel="signature" /> 
```

通过移动设备进行调试时收到此错误消息

```
pkg: /data/local/tmp/Android.Test
Failure [INSTALL_PARSE_FAILED_MANIFEST_MALFORMED] 
```

有人可以建议我在做什么。为了进一步的帮助，我把我的整个 manifest.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="Android.Test"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="14"/>

    <permission android:name="Android.Test.permission.C2D_MESSAGE"  android:protectionLevel="normal" />
    <uses-permission android:name="Android.Test.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MainActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <receiver
                android:name="com.google.android.gcm.GCMBroadcastReceiver"
                android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="Android.Test" />
            </intent-filter>
        </receiver>
        <service android:name=".GCMIntentService" />
    </application>
</manifest> 
```

编辑 1：这就是我尝试将消息从 C# 发送到我的 android 设备的方式.....我从博客中找到了这段代码。

```
private string SendGCMNotification(string apiKey, string postData, string postDataContentType = "application/json")
        {

            ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(ValidateServerCertificate);

            //
            //  MESSAGE CONTENT
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            //
            //  CREATE REQUEST
            HttpWebRequest Request = (HttpWebRequest)WebRequest.Create("https://android.googleapis.com/gcm/send");
            Request.Method = "POST";
            Request.KeepAlive = false;
            Request.ContentType = postDataContentType;
            Request.Headers.Add(string.Format("Authorization: key={0}", apiKey));
            Request.ContentLength = byteArray.Length;

            Stream dataStream = Request.GetRequestStream();
            dataStream.Write(byteArray, 0, byteArray.Length);
            dataStream.Close();

            //
            //  SEND MESSAGE
            try
            {
                WebResponse Response = Request.GetResponse();
                HttpStatusCode ResponseCode = ((HttpWebResponse)Response).StatusCode;
                if (ResponseCode.Equals(HttpStatusCode.Unauthorized) || ResponseCode.Equals(HttpStatusCode.Forbidden))
                {
                    var text = "Unauthorized - need new token";

                }
                else if (!ResponseCode.Equals(HttpStatusCode.OK))
                {
                    var text = "Response from web service isn't OK";
                }

                StreamReader Reader = new StreamReader(Response.GetResponseStream());
                string responseLine = Reader.ReadToEnd();
                Reader.Close();

                return responseLine;
            }
            catch (Exception e)
            {

            }
            return "error";
        } 
```

这就是我在 responseLine 代码中得到的

```
{"multicast_id":7357801824672,"success":0,"failure":1,"canonical_ids":0,"results":[{"error":"InvalidRegistration"}]} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:36:03.173

```
try this one 
```

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/>

<uses-permission android:name="android.permission.INTERNET" />

<uses-permission android:name="android.permission.GET_ACCOUNTS" />

<uses-permission android:name="android.permission.WAKE_LOCK" />

<permission
    android:name="com.google.android.gcm.demo.app.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission
    android:name="com.google.android.gcm.demo.app.permission.C2D_MESSAGE" />

<!-- This app has permission to register and receive data message. -->
<uses-permission
    android:name="com.google.android.c2dm.permission.RECEIVE" />

<!-- Main activity. -->
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="Android.Test" />
        </intent-filter>
    </receiver>

    <service android:name=".GCMIntentService" />
</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:12:21.177

您的响应代码包含答案，您传递的 registration_ids 无效

```
 "results":[{"error":"InvalidRegistration"}] 
```

示例 php 代码：

```
 $postdata = array(
        'registration_ids' => array('your_device_registration_key'),
        'data' => 'message'
    );

    $headers = array(
        'Authorization: key=' . YOUR_API_KEY,
        'Content-Type: application/json'
    ); 
```

# magento - Magento - 如何向应税产品添加非应税费用？

> ID：12417708
> 
> 赞同：1
> 
> 时间：2012-09-14T03:26:08.927
> 
> 标签：magento

我们正在使用 Magento EE 1.12。我们对不能征税的个别产品收取相关费用，但产品本身可以。所需的解决方案类似于自定义选项，其中费用包含在与产品相同的行项目中，并包含在产品价格中，因此包含在订单小计中。自定义选项的唯一问题是费用与产品一起征税。

我们已经经历了几种情况，但我认为最有可能的解决方案是使用自定义选项，但在计算完税款后，我们会将税款减少到正确的金额。我们对小计和运费征税。我们将获得费用金额，以便我们可以对该总额征税并减少订单税额。

这似乎是一个很好的解决方案？有没有人有其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:08:05.077

使其成为捆绑产品，并放入不征税的产品。

# c++ - Visual Studio 2012 可变字体颜色从用户选择的颜色恢复为黑色

> ID：12417709
> 
> 赞同：2
> 
> 时间：2012-09-14T03:26:11.393
> 
> 标签：c++, fonts, colors

我对使用 Visual Studio 比较陌生，我正在尝试使用与 Sublime Text 2 非常相似的配色方案，因为我喜欢这个文本编辑器的突出显示。

我从[这里](http://studiostyl.es/schemes/sublime-2)下载了 Sublime Text 主题。

当我导入主题时，除了变量名和 std 命名空间之外，颜色会发生变化。由于某些莫名其妙的原因，那些恢复为黑色。我已经尝试安装其他主题/配色方案并且都有上述问题。我试图进入选项并将变量/命名空间的字体颜色更改为所需的颜色。一旦我离开选项，它就会恢复为黑色。

我已经打开并关闭了 VS 2012，重新启动了我的计算机，并尝试使用其他 .cpp 文件但无济于事。

我可以通过在第一行输入一个字符并向下移动一行来正确显示颜色`#include <iostream>`。您可以在所附照片中看到差异。关于导致此问题的原因或如何解决问题的任何想法？

PS，作为新成员，我无法将照片添加到我的帖子中，所以[这里是](http://i.stack.imgur.com/gxezv.jpg)imgur 的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:55:09.770

我已经找到了解决这个问题的方法。由于某种奇怪的原因，主题没有正确导入。您可以通过转到选项 -> 环境 -> 字体和颜色来手动更改“c++ 局部变量”和“c++ 命名空间”颜色的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T18:48:12.013

我有同样的问题。我解决它的方法是将主题从浅色更改为深色。

检查此线程以了解如何： [https ://stackoverflow.com/a/9596223/1426601](https://stackoverflow.com/a/9596223/1426601)

# - Invision 电源板

> ID：12417713
> 
> 赞同：0
> 
> 时间：2012-09-14T03:26:52.313
> 
> 标签：

Invision Power Board（简称IPB、IP.Board或IP Board）是Invision Power Services, Inc.出品的互联网论坛软件。它是用PHP编写的，主要使用MySQL作为数据库管理系统。该软件在专有许可下进行商业销售。

# url-routing - 如何使用 Restlet 在“URL 中间”添加过滤器？

> ID：12417715
> 
> 赞同：0
> 
> 时间：2012-09-14T03:27:06.090
> 
> 标签：url-routing, restlet, restlet-2.0

我有以下路线：

`/projects/{projectName}`

和

`/projects/{projectName}/Wall/{wallName}`

现在我想让所有的 GET 都被允许，但 PUT、POST、DELETE 应该只被项目成员允许，即该项目的用户成员。我有一个特殊的类，它给出了用户 ID 和项目名称，我可以获得用户成员资格的状态 - 类似于`MyEnroler.getRole(userId, projectName)`- 其中 userId 是请求标头的一部分，并且`projectName`是从 URI 中获取的。

我已经尝试了很多东西，但没有奏效。这是想法：

```
public class RoleMethodAuthorizer extends Authorizer {
    @Override
    protected boolean authorize(Request req, Response resp) {
        //If it's a get request then no need for further authorization. 
        if(req.getMethod().equals(Method.GET))
            return true;
        else
        {                               
            String authorEmail = req.getClientInfo().getUser().getIdentifier();
            String projectName = req.getAttributes().get("project").toString();

            Role userRole = MyEnroler.getRole(authorEmail, projectName);

            //forbid updates to resources if done by non-members of project
            if(userRole.equals(MyEnroler.NON_MEMBER))
                return false;
            //for everybody else, return true
            return true;
        }

    }

} 
```

现在，在应用程序中创建入站根时，只需执行以下操作就完全失败了：

```
Router projectRouter = new Router(getContext());
RoleMethodAuthorizer rma = new RoleMethodAuthorizer();
//Guard declaration here. Then setNext Restlet
guard.setNext(projectRouter);
projectRouter.attach("/projects/{project}",rma);

Router wallRouter = new Router(getContext());
wallRouter.attach("/Wall/{wallName}", WallResource.class);

rma.setNext(wallRouter);

//return guard; 
```

所以请求`/projects/stackoverflow/Wall/restlet`失败。永远找不到 URL。我猜是因为它试图将它与`projectRouter`. 好吧，我尝试了各种模式（`MODE_BEST_MATCH or MODE_FIRST/NEXT_MATCH`）无济于事。

似乎没有任何效果。从概念上讲，这应该有效。我只是拦截一个电话，只是对请求透明，但不知道内部情况如何。

我可以在警卫之后移动授权人，但我将无法访问`request attribute`-`projectName`我不希望自己解析 URL 来搜索 projectName，因为 URL 模式可能会改变并且会破坏功能 - 即需要 2变化而不是一个。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:37:22.557

我将使用标准的 RoleAuthorizer 类来提供允许的角色列表，以及您的自定义注册者可能会分成两部分，然后添加一个自定义过滤器类，该类执行类似的操作来调用您的注册者。

```
protected int beforeHandle(final Request request, final Response response) throws ResourceException {
    final String projectName = (String) request.getAttributes().get("projectName");
    // Check that a projectName is supplied, should not have got this far otherwise but lets check.
    if (projectName == null || projectName.isEmpty()) {
        throw new ResourceException(Status.CLIENT_ERROR_NOT_FOUND);
    }

    if (Method.GET.equals(request.getMethod())){
        new ReadEnroler(projectName).enrole(request.getClientInfo());
    }else{
        new MutateEnroler(projectName).enrole(request.getClientInfo());
    }

    return super.beforeHandle(request, response);
} 
```

然后，在调用 enrole 时，登记者将在 clientInfo.getRoles() 集合中设置适当的值。

# vba - 在线自动更新 VBA 表单和模块

> ID：12417716
> 
> 赞同：0
> 
> 时间：2012-09-14T03:27:30.617
> 
> 标签：vba, excel

目前我正在为 Excel 创建 VBA 宏，最近开始使用 UserForms。

然而，困境是一旦将 Excel 文件部署给用户，有时我需要更新用户窗体或模块上的代码。

**我想知道的是：**是否可以通过让 Excel 联机并下载更新的用户表单和模块（如修补程序或其他东西）来自动更新这些用户表单或模块？

我从这个[链接得到了这个想法](http://updatevb.codeplex.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:26:50.313

我想你会发现[这个](https://stackoverflow.com/questions/1204883/process-for-updating-excel-add-in)线程很有用，它建议了更新 Excel 加载项的方法。我会沿着获取 Excel 文件的方法更新一个单独的小引导文件，然后处理任何必要的更新（Robin Hammond 在线程上的建议）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:25:37.893

在我工作的地方，我们通过将工作簿作为只读文件存储在网络上来解决这个难题，该文件始终用作入口点。

如果用户想保存它，他们可以在自己的机器上保存。如果要更新文件，只需切换出当前文件，因为它不会被锁定（由于是只读的）。显然，这种方法只有在您拥有共享网络时才有效，但我认为这是一种相当简单的实现方法。

# php - 如何从 xml 文件生成 php 动态日期？

> ID：12417718
> 
> 赞同：1
> 
> 时间：2012-09-14T03:28:09.230
> 
> 标签：php, xml, codeigniter

我们有一个 codeigniter 网站，基本上页面上看到的所有内容都是从 xml 文件中提取的。我对 codeigniter 不是很熟悉，所以我很难掌握如何解决这个问题。

例如，xml 文件可能包含以下内容：

```
<view>home</view>
    <meta>
        <keywords>blue widgets, green widgets, red widgets</keywords>
        <description>We have the best widgets for 2012</description>
    </meta> 
```

最终我想做的只是让日期在我们的内容中出现的任何地方都使用 php date 函数，所以：

```
<view>home</view>
    <meta>
        <keywords>blue widgets, green widgets, red widgets</keywords>
        <description>We have the best widgets for {somehow put php date here}</description>
</meta> 
```

无论如何我可以从 XML 文件中做到这一点，还是我以错误的方式接近？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:56:23.603

您可以控制 XML 模式吗？或者至少是生成 XML 的任何东西？您可以简单地将一个特殊的“替换我”类型标签添加到您可以在 codeigniter 中处理的架构中，基本上将 xml 文件作为模板，所以您会有类似的东西

```
<description>We have the best widgets for <dategoeshere /></description> 
```

如果 PHP 正在生成 xml，那么只需

```
<description>We have the best widgets for <?php echo date('Y') ?></description> 
```

# python - 为什么当我打开文件先写入时，我无法在 python 中使用 File.open 读取任何内容？

> ID：12417722
> 
> 赞同：2
> 
> 时间：2012-09-14T03:29:02.983
> 
> 标签：python

```
f = open('day_temps.txt','w')
f.write("10.3,10.1,9.9,9.9,9.8,9.6,9.0,10.1,10.2,11.1")
f.close

def get_stats(file_name):
    temp_file = open(file_name,'r')
    temp_array = temp_file.read().split(',')
    number_array = []
    for value in temp_array:
        number_array.append(float(value))
    number_array.sort()
    max_value = number_array[-1]
    min_value = number_array[0]
    sum_value = 0
    for value in number_array:
        sum_value += value
    avg_value = sum_value / len(number_array)
    return min_value, max_value, avg_value

mini, maxi, mean = get_stats('day_temps.txt')
print "({0:.5}, {1:.5}, {2:.5})".format(mini, maxi, mean) 
```

没有`first 3 line`，代码可以工作，有了它，我什么都看不懂`temp_file`，我不明白，知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T03:31:11.020

你从来没有用这行代码关闭文件：

```
f.close 
```

使用`f.close()`或`with`语法，它会自动关闭文件句柄并防止出现这样的问题：

```
with open('day_temps.txt', 'w') as handle:
    handle.write("10.3,10.1,9.9,9.9,9.8,9.6,9.0,10.1,10.2,11.1") 
```

此外，您可以显着压缩代码：

```
with open('day_temps.txt', 'w') as handle:
    handle.write("10.3,10.1,9.9,9.9,9.8,9.6,9.0,10.1,10.2,11.1")

def get_stats(file_name):
    with open(file_name, 'r') as handle:
        numbers = map(float, handle.read().split(','))

    return min(numbers), max(numbers), sum(numbers) / len(numbers)

if __name__ == '__main__':
    stats = get_stats('day_temps.txt')
    print "({0:.5}, {1:.5}, {2:.5})".format(*stats) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T03:30:47.727

在第 3 行， f.close 应该是`f.close()`. 要强制文件立即写入（而不是在文件关闭时），您可以`f.flush()`在写入后调用：请参阅[为什么在程序流程中假设文件写入不会发生？](https://stackoverflow.com/questions/1991815/why-file-writing-does-not-happen-when-it-is-suppose-to-happen-in-the-program-flo)更多细节。

或者，当脚本完全结束时文件将自然关闭（包括关闭任何交互式解释器窗口，如 IDLE）。在某些情况下，忘记正确刷新或关闭文件可能会导致极其混乱的行为，例如从命令行运行脚本时看不到的交互式会话中的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T04:08:10.203

f.close 只是调用方法对象进行打印而不是调用方法。在 REPL 中你会得到：

```
f.close
<built-in method close of file object at 0x00000000027B1ED0> 
```

添加您的方法调用括号。

# objective-c - 2 个文本字段始终等于 100% xcode

> ID：12417725
> 
> 赞同：0
> 
> 时间：2012-09-14T03:29:42.630
> 
> 标签：objective-c, ios, xcode, uitextfield

我有两个用于输入百分比的文本字段。如果我在第一个字段中输入 20，我希望将第二个文本字段更新为 60。稍后如果我将第二个文本字段更改为 30，我会像第一个更新到70。

为了便于说明我的意思，假设我有两个文本字段 _firstPercent 和 _secondPercent 以及关联的标签 _firstTotal 和 _secondTotal：

```
float firstPercent = [_firstPercent.text floatValue];

float firstAmount = (firstSalePercent / 100) * firstOrigonalAmount;

_firstTotal.text = [NSString stringWithFormat:@"%1.0f",firstAmount];

float secondPercent = [_secondPercent.text floatValue];

float secondAmount = (secondSalePercent / 100) * secondOrigonalAmount;

_secondTotal.text = [NSString stringWithFormat:@"%1.0f",secondAmount]; 
```

我真的不知道如何处理，所以我尝试在其各自的代码下方添加它。它适用于第一个，但不适用于第二个。

```
float percentToSecond = 100 - firstPercent;
_secondPercent.text = [NSString stringWithFormat:@"%1.0f", percentToSecond];

float percentToFirst = 100 - secondPercent;
_firstPercent.text = [NSString stringWithFormat:@"%1.0f", percentToFirst]; 
```

我尝试了其他解决方案，但不知道该怎么做。

我只是希望有人带领我朝着正确的方向前进。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:06:07.560

如何使用委托方法 controlTextDidEndEditing: 查看输入的值，然后为其他文本字段设置值。在以下代码中，tf1 和 tf2 是两个文本字段的 IBOutlets。

```
 -(void)controlTextDidEndEditing:(NSNotification *)obj {
    float value = [[[obj.userInfo valueForKey:@"NSFieldEditor"] string] floatValue];
    if (obj.object == self.tf1) {
        self.tf2.stringValue = [NSString stringWithFormat:@"%1.0f",100\. - value];
    }else if (obj.object == self.tf2) {
        self.tf1.stringValue = [NSString stringWithFormat:@"%1.0f",100\. - value];
    }
} 
```

您必须进行更多检查以确保用户没有输入大于 100 的数字或不是数字的数字。

# css - 伪类：active 在 Firefox 中无法正常工作

> ID：12417727
> 
> 赞同：6
> 
> 时间：2012-09-14T03:29:47.217
> 
> 标签：css, firefox, pseudo-class

CSS：

```
a:link { color: green;}
a:active {color: orange;} 
```

HTML：

```
<a href="#">testing</a> 
```

[这是JSFiddle](http://jsfiddle.net/BMHUz/123/)

伪类 :active 在链接上单击鼠标按钮后仍然处于活动状态，拖走并释放。松开鼠标后如何使链接颜色恢复正常？

我正在使用 Firefox 14。它在 Chrome 中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:59:20.020

如果您在其上设置“活动”颜色，`:focus:hover`它将具有最接近您想要的效果，尽管它与 Chrome 中的颜色不完全相同，因为您设置的颜色将在链接聚焦和悬停时出现，但不是鼠标按钮已按下。

但是，如果您最不喜欢的是释放鼠标后“活动”颜色仍然存在，您至少可以通过将“正常”链接颜色设置为 on 来防止这种情况发生`:focus`。该链接在被单击、拖出和释放后仍然保持焦点 - 您可以通过执行它然后按 Enter 来测试它。

[您可以在此页面](http://meyerweb.com/eric/css/tests/css2/sec05-11-03.htm)上找到示例（和信息）- 请注意按住和释放鼠标时的链接颜色；它们对应于该页面的`a:hover`、`a:focus`、`a:focus:hover`和`a:active`规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T12:53:42.560

我会改为使用：a:hover:focus。悬停时获得新的背景颜色，单击（聚焦）时获得新的链接文本颜色。如果您只是向下单击链接，然后在单击之前将鼠标拉开，新的链接文本颜色将消失。

# java - 带有滚动条的 Jfreechart

> ID：12417732
> 
> 赞同：0
> 
> 时间：2012-09-14T03:30:46.637
> 
> 标签：java, swing, jfreechart

我想在图表中添加一个滚动条，以便查看不适合屏幕的大数据集，因为要保留所有 xtick。但是，我收到以下错误消息：

```
Exception in thread "main" java.lang.ClassCastException: org.jfree.data.xy.XYSeriesCollection cannot be cast to org.jfree.data.category.CategoryDataset
    at MySlidingCategoryDatasetDemo3$DemoPanel.<init>(MySlidingCategoryDatasetDemo3.java:86)
    at MySlidingCategoryDatasetDemo3.createDemoPanel(MySlidingCategoryDatasetDemo3.java:112)
    at MySlidingCategoryDatasetDemo3.<init>(MySlidingCategoryDatasetDemo3.java:107)
    at MySlidingCategoryDatasetDemo3.main(MySlidingCategoryDatasetDemo3.java:117) 
```

使用以下代码：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import org.jfree.data.category.*;
import org.jfree.chart.*;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.StandardXYItemRenderer;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.category.*;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class MySlidingCategoryDatasetDemo3 extends ApplicationFrame
{
    static class DemoPanel extends JPanel
        implements ChangeListener
    {
        private static XYDataset createDataset()
        {
            XYSeries xyseries = new XYSeries("First");
            xyseries.add(1.0D, 1.0D);
            xyseries.add(2D, 4D);
            xyseries.add(3D, 3D);
            xyseries.add(4D, 5D);
            xyseries.add(5D, 5D);
            xyseries.add(6D, 7D);
            xyseries.add(7D, 7D);
            xyseries.add(8D, 8D);
            xyseries.add(9D, 8D);
            xyseries.add(10D, 8D);
            xyseries.add(11D, 8D);
            xyseries.add(12D, 8D);
            xyseries.add(13D, 8D);
            xyseries.add(14D, 8D);
            xyseries.add(15D, 8D);
            xyseries.add(16D, 25D);
            xyseries.add(17D, 8D);
            xyseries.add(18D, 5D);
            xyseries.add(19D, 7D);
            xyseries.add(20D, 6D);
            xyseries.add(21D, 8D);
            xyseries.add(22D, 4D);
            xyseries.add(23D, 4D);
            xyseries.add(24D, 2D);
            xyseries.add(25D, 1.0D);

            XYSeriesCollection xyseriescollection = new XYSeriesCollection();
            xyseriescollection.addSeries(xyseries);

            return xyseriescollection;
        }   

        private static JFreeChart createChart(XYDataset xydataset)
        {
            JFreeChart jfreechart = ChartFactory.createXYLineChart("Line Chart Demo 2", "X", "Y", xydataset, PlotOrientation.VERTICAL, true, true, false);
            XYPlot xyplot = (XYPlot)jfreechart.getPlot();
            xyplot.setDomainPannable(true);
            xyplot.setRangePannable(true);

            StandardXYItemRenderer xylineandshaperenderer = (StandardXYItemRenderer)xyplot.getRenderer();
            xylineandshaperenderer.setBaseShapesVisible(true);
            xylineandshaperenderer.setBaseShapesFilled(true);
            NumberAxis numberaxis = (NumberAxis)xyplot.getRangeAxis();
            numberaxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());
            numberaxis.setRange(0.0D, 100D);
            return jfreechart;
        }

        public void stateChanged(ChangeEvent changeevent)
        {
            dataset.setFirstCategoryIndex(scroller.getValue());
        }

        JScrollBar scroller;
        SlidingCategoryDataset dataset;

        public DemoPanel()
        {
            super(new BorderLayout());
            dataset = new SlidingCategoryDataset((CategoryDataset) createDataset(), 0, 10);
            JFreeChart jfreechart = createChart((XYDataset) dataset);
            //JFreeChart jfreechart = createChart(createDataset());
            ChartPanel chartpanel = new ChartPanel(jfreechart);

            chartpanel.setPreferredSize(new Dimension(400, 400));
            scroller = new JScrollBar(0, 0, 10, 0, 50);
            add(chartpanel);
            scroller.getModel().addChangeListener(this);
            JPanel jpanel = new JPanel(new BorderLayout());
            jpanel.add(scroller);
            jpanel.setBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));
            jpanel.setBackground(Color.white);
            add(jpanel, "South");
        }
    }

    public MySlidingCategoryDatasetDemo3(String s)
    {
        super(s);
        setDefaultCloseOperation(3);
        setContentPane(createDemoPanel());
    }

    public static JPanel createDemoPanel()
    {
        return new DemoPanel();
    }

    public static void main(String args[])
    {
        MySlidingCategoryDatasetDemo3 slidingcategorydatasetdemo2 = new MySlidingCategoryDatasetDemo3("JFreeChart: SlidingCategoryDatasetDemo2.java");
        slidingcategorydatasetdemo2.pack();
        RefineryUtilities.centerFrameOnScreen(slidingcategorydatasetdemo2);
        slidingcategorydatasetdemo2.setVisible(true);
    }
} 
```

我做错了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:18:29.367

错误信息非常明显：

> org.jfree.data.xy.XYSeriesCollection 不能转换为 org.jfree.data.category.CategoryDataset

您正在将一个`XYSeriesCollection`对象转换为一个`CategoryDataset`对象，这是行不通的。查看堆栈跟踪中的行，它是由以下行引起的

```
dataset = new SlidingCategoryDataset((CategoryDataset) createDataset(), 0, 10); 
```

这些`createDataset()`方法返回 a`XYSeriesCollection`而不是 a `CategoryDataset`，因此您不能执行此转换。要么调整该方法的返回类型，要么摆脱演员阵容

# php - 如何使 MailHandler.php 在 Wordpress 中工作？

> ID：12417734
> 
> 赞同：2
> 
> 时间：2012-09-14T03:30:50.193
> 
> 标签：php, javascript, forms, wordpress, email

我正在尝试使**MailHandler.php**与 Wordpress 一起使用。我尝试了十几种解决方案，但都没有奏效。以下是我尝试过的“ **forms.js** ”文件的解决方法：

1.) 将“ **bin/MailHandler.php** ”更改为**“mail/mailhandler.php”**

1.  ) 以下是一些我也更改过的原始代码：

**mailHandlerURL:'../mail/mailhandler.php'**改为

**mailHandlerURL:'http://www.mysite.net/wp-content/themes/mysite/mail/mailhandler.php',**

然后还尝试了：

**mailHandlerURL:' /mail/ `<?php echo get_template_directory_uri(); ?>`mailhandler.php',**

在**contact_template.php**中是我的表单所在的位置。以下是我为表单操作尝试的一些方法，但都没有奏效：

```
 **<form action="../mail/mailhandler.php" id="contact-form">** Changed to

 **<form action="http://www.mysite.net/wp-content/themes/mysite/mail/mailhandler.php" id="contact-form">** 
```

和

**`<form action="<?php echo get_template_directory_uri(); ?>/mail/mailhandler.php" id="contact-form">`**

请帮忙。

顺便说一下，我的smtpMailServer在我的 forms.js**中设置为 localhost 。**

提前致谢。

附加信息

以下是我的 mailhandler.php 的代码

```
<?php
$owner_email = $_POST["me@mysite.com"]; /*/originally owner_email/*/
$headers = 'From:' . $_POST["email"];
$subject = 'A message from your site visitor ' . $_POST["name"];
$messageBody = "";

if($_POST['name']!='nope'){
    $messageBody .= '<p>Visitor: ' . $_POST["name"] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['email']!='nope'){
    $messageBody .= '<p>Email Address: ' . $_POST['email'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['phone']!='nope'){        
    $messageBody .= '<p>Phone Number: ' . $_POST['phone'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}   
if($_POST['message']!='nope'){
    $messageBody .= '<p>Message: ' . $_POST['message'] . '</p>' . "\n";
}

if($_POST["stripHTML"] == 'true'){
    $messageBody = strip_tags($messageBody);
}

try{
    if(!mail($owner_email, $subject, $messageBody, $headers)){
        throw new Exception('mail failed');
    }else{
        echo 'mail sent';
    }
}catch(Exception $e){
    echo $e->getMessage() ."\n";
} 
```

?>

这是**forms.js**里面的内容：

```
(function($){
$.fn.extend({
    forms:function(opt){
        if(opt===undefined)
            opt={}
        this.each(function(){
            var th=$(this),
                data=th.data('forms'),
                _={
                    errorCl:'error',
                    emptyCl:'empty',
                    invalidCl:'invalid',
                    successCl:'success',
                    successShow:'4000',
                    mailHandlerURL:'http://www.mysite.com/wp-content/themes/mysite/mail/mailhandler.php',
                    ownerEmail:'me@mysite.com',
                    stripHTML:true,
                    smtpMailServer:'localhost',
                    targets:'input,textarea',
                    controls:'a[data-type=reset],a[data-type=submit]',
                    validate:true,
                    rx:{
                        ".name":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:'input'},
                        ".email":{rx:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,target:'input'},
                        ".phone":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:'input'},
                        ".message":{rx:/.{20}/,target:'textarea'}
                    },
                    preFu:function(){
                        _.labels.each(function(){
                            var label=$(this),
                                inp=$(_.targets,this),
                                defVal=inp.val(),
                                trueVal=(function(){
                                            var tmp=inp.is('input')?(tmp=label.html().match(/value=['"](.+?)['"].+/),!!tmp&&!!tmp[1]&&tmp[1]):inp.html()
                                            return defVal==''?defVal:tmp
                                        })()
                            trueVal!=defVal
                                &&inp.val(defVal=trueVal||defVal)
                            label.data({defVal:defVal})                             
                            inp
                                .bind('focus',function(){
                                    inp.val()==defVal
                                        &&(inp.val(''),_.hideEmptyFu(label),label.removeClass(_.invalidCl))
                                })
                                .bind('blur',function(){
                                    !inp.val()
                                        ?inp.val(defVal)                                        
                                        :(_.isValid(label)
                                            ?_.showErrorFu(label)
                                            :_.hideErrorFu(label)),
                                        (_.isEmpty(label)
                                            ?_.showEmptyFu(label)
                                            :_.hideEmptyFu(label))
                                })
                                .bind('keyup',function(){
                                    label.hasClass(_.invalidCl)
                                        &&_.isValid(label)
                                            ?_.showErrorFu(label)
                                            :_.hideErrorFu(label)
                                })
                            label.find('.'+_.errorCl+',.'+_.emptyCl).css({display:'block'}).hide()
                        })
                        _.success=$('.'+_.successCl,_.form).hide()
                    },
                    isValid:function(el){
                        var ret=true,
                            empt=_.isEmpty(el)
                        if(empt)
                            ret=false,
                            el.addClass(_.invalidCl)
                        else
                            $.each(_.rx,function(k,d){
                                if(el.is(k))
                                    d.rx.test(el.find(d.target).val())
                                        ?(el.removeClass(_.invalidCl),ret=false)
                                        :el.addClass(_.invalidCl)
                            })
                        return ret
                    },
                    isEmpty:function(el){
                        var tmp
                        return (tmp=el.find(_.targets).val())==''||tmp==el.data('defVal')
                    },
                    validateFu:function(){                          
                        _.labels.each(function(){
                            var th=$(this)                              
                            _.isEmpty(th)
                                ?_.showEmptyFu(th)
                                :_.hideEmptyFu(th)
                            _.isValid(th)
                                ?_.showErrorFu(th)
                                :_.hideErrorFu(th)
                        })
                    },
                    submitFu:function(){
                        _.validateFu()
                        if(!_.form.has('.'+_.invalidCl).length)
                            $.ajax({
                                type: "POST",
                                url:_.mailHandlerURL,
                                data:{
                                    name:$('.name input',_.form).val()||'nope',
                                    email:$('.email input',_.form).val()||'nope',
                                    phone:$('.phone input',_.form).val()||'nope',
                                    fax:$('.fax input',_.form).val()||'nope',
                                    state:$('.state input',_.form).val()||'nope',
                                    message:$('.message textarea',_.form).val()||'nope',
                                    owner_email:_.ownerEmail,
                                    stripHTML:_.stripHTML
                                },
                                success: function(){
                                    _.showFu()
                                }
                            })          
                    },
                    showFu:function(){
                        _.success.slideDown(function(){
                            setTimeout(function(){
                                _.success.slideUp()
                                _.form.trigger('reset')
                            },_.successShow)
                        })
                    },
                    controlsFu:function(){
                        $(_.controls,_.form).each(function(){
                            var th=$(this)
                            th
                                .bind('click',function(){
                                    _.form.trigger(th.data('type'))
                                    return false
                                })
                        })
                    },
                    showErrorFu:function(label){
                        label.find('.'+_.errorCl).slideDown()
                    },
                    hideErrorFu:function(label){
                        label.find('.'+_.errorCl).slideUp()
                    },
                    showEmptyFu:function(label){
                        label.find('.'+_.emptyCl).slideDown()
                        _.hideErrorFu(label)
                    },
                    hideEmptyFu:function(label){
                        label.find('.'+_.emptyCl).slideUp()
                    },
                    init:function(){
                        _.form=this
                        _.labels=$('label',_.form)

                        _.preFu()

                        _.controlsFu()

                        _.form
                            .bind('submit',function(){
                                if(_.validate)
                                    _.submitFu()
                                else
                                    _.form[0].submit()
                                return false
                            })
                            .bind('reset',function(){
                                _.labels.removeClass(_.invalidCl)                                   
                                _.labels.each(function(){
                                    var th=$(this)
                                    _.hideErrorFu(th)
                                    _.hideEmptyFu(th)
                                })
                            })
                        _.form.trigger('reset')
                    }
                }
            if(!data)
                (typeof opt=='object'?$.extend(_,opt):_).init.call(th),
                th.data({cScroll:_}),
                data=_
            else
                _=typeof opt=='object'?$.extend(data,opt):data
        })
        return this
    }
})

})(jQuery)
$(document).ready(function(){
$('#contact-form').forms({
    ownerEmail:'me@mysite.com'
})
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:21:34.847

这条线`$owner_email = $_POST["me@mysite.com"]; /*/originally owner_email/*/`很有趣。我很确定 POST 变量将不存在。

试试`$owner_email = $_POST["owner_email"];`。

还是您实际上是要静态/永久更改`$owner_email`“me@mysite.com”的值？如果是这样，您想将其设置为字符串，`$owner_email = "me@mysite.com";`而不是名为“me@mysite.com”的 POST 变量...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T11:19:50.587

Gima 说：你最常这样做是为了让它发挥作用：

忘记之前有人说过的话，不要更改代码中的任何内容。

1) 在您的主题/名称主题文件夹中插入带有 MailHandler.php 和 MailHandler.ashx 的文件夹邮件。

2) 将 forms.js 插入到 js 文件夹内的主题//name-theme 文件夹中。

之后执行以下操作：

1) 在您的 HTML 表单页面中，您必须这样写：`<form id="newsletter-form" action="<?php echo get_template_directory_uri(); ?>/mail/MailHandler.php" >`

2) 在您的 forms.js 中，您必须在 mailHandlerURL 第 16 行写下：

```
mailHandlerURL:'http://your-site.com/your-blog/wp-content/themes/theme-name/mail/MailHandler.php', 
```

注意：“http 地址 abobe 没有 www”

3）不要忘记从你的 header.php 调用你的脚本，如下所示：

```
<script src="<?php echo get_template_directory_uri(); ?>/js/forms.js"></script> 
```

4）享受结果......

# entity-framework - 代码优先迁移 MissingManifestResourceException

> ID：12417737
> 
> 赞同：4
> 
> 时间：2012-09-14T03:31:18.213
> 
> 标签：entity-framework, entity-framework-5, entity-framework-migrations

我目前正在为新数据库创建 InitialCreate 迁移。我是这个迁移框架的新手，不知道它究竟会生成什么，我一直在运行`update-database`以查看结果，删除数据库然后`update-database`在进行一些更改后再次运行以查看结果。

现在我做了两次更改，运行更新并收到如下错误：

> 应用基于代码的迁移：201209121936571_InitialCreate。System.Resources.MissingManifestResourceException：找不到适合指定区域性或中性区域性的任何资源。确保“$assemblyName$.resources”在编译时被正确嵌入或链接到程序集“$assemblyName$”，或者所有所需的附属程序集都是可加载的并且完全签名。在 [堆栈跟踪]

然后它以红色结束

> 找不到适合指定区域性或中性区域性的任何资源。确保“$assemblyName$.Migrations.InitialCreate.resources”在编译时被正确嵌入或链接到程序集“$assemblyName$”，或者所有需要的附属程序集都是可加载的并且完全签名。

我第一次遇到这种情况时，我删除了迁移文件夹，`enable-migrations`重新进行了更改并能够运行迁移。

它又发生了，我不想每次发生这种情况时都必须重新创建文件。有谁知道如何纠正这个问题以使迁移再次工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2020-01-03T16:14:58.357

对我来说，解决方案是在我投影的 .csproj 文件中添加以下代码，里面`<PropertyGroup>`

```
<EmbeddedResourceUseDependentUponConvention>true</EmbeddedResourceUseDependentUponConvention> 
```

之后，Update-Database 命令运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T03:31:18.213

我最终在收集所有我想问这个问题的信息的过程中发现了这一点。即，尝试重现该问题。

事实证明，如果您将 DbMigration 的继承者以外的类作为文件中的第一个类，则资源文件将采用另一个类的名称，而不是破坏迁移的迁移。

我在[这里](http://entityframework.codeplex.com/workitem/511)提交了一个错误报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-26T08:47:59.353

我**在 Full .Net Framework 中遇到实体迁移、实体 6.4 和 Microsoft.Net.SDK 样式项目的**问题。

我通过编辑我的数据项目解决了这个问题：

```
 <ItemGroup>
    <EmbeddedResource Update="**\*.resx">
      <DependentUpon>$([System.String]::Copy('%(FileName)')).cs</DependentUpon>
    </EmbeddedResource>
  </ItemGroup> 
```

# android - Cocos2dx Android：从文件（资产/ *）获取数据失败

> ID：12417748
> 
> 赞同：1
> 
> 时间：2012-09-14T03:33:09.633
> 
> 标签：android, eclipse, android-image, cocos2d-x

您需要在 Cocos2dx Android 项目（在 Eclipse 中）中的什么位置添加图像？

它们目前位于“资源”文件夹中，就像[Ray Wenderlich 的博客](http://www.raywenderlich.com/11338/cocos2d-x-for-ios-and-android-space-game "这里")中提到的那样，但是当我在模拟器中运行它时出现错误：每个图像的“从 (assets/myFileName) 获取数据失败”。我还将这些图像添加到 Eclipse 的 assets 文件夹中，这没有什么区别。

它在 iOS 端运行良好。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T07:24:30.633

我相信你需要在 Eclipse 上运行之前在你的 android 文件夹中运行 ./build_native.sh 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:26:18.667

所以实际的问题不在于构建或复制过程。

我做了一个类，如果它是 iphone、ipad 等，它将对 CCSprite 应用正确的前缀。我对 CCMenuItemImage 源代码进行了一些更改以合并此文件，但 iOS 和 Android Cocos2dx 文件是分开的，所以Android项目没有使用新代码，也没有添加正确的前缀，所以它没有找到图像。

谢谢大家的回答！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:21:46.870

您无需添加到 assets 文件夹，当您运行 ./build_native.sh 时，它会自动添加到 assets 文件夹中。检查它是否成功构建，没有任何错误，然后导入到 Eclipse。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T16:26:43.630

这是我面临的同样问题。其实我已经通过这样做解决了这个问题：

1.  从 cygwin 运行 ./build_native.sh。此步骤将所需的资产移动到 android 项目。不要忘记首先 chmod 777 -R 到你的 cocos 项目，我有一个错误，因为 build_native.sh 没有权限移动资产。
2.  [在 Eclipse 中，按照本教程](http://www.cnblogs.com/ybgame/archive/2012/06/07/2540693.html)再次构建它。在该链接中，它显示了如何在 Eclipse 中构建 cpp 源 + cocos2d。
3.  作为android应用程序运行，然后将生成.apk。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T22:42:44.520

尝试使用

`const char *path = CCFileUtils::sharedFileUtils()->fullPathFromRelativePath("testimage.png");`

在给 cocos2d-x 你的文件名之前。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-16T10:39:50.323

我正在使用 Cocos2d-JS 版本。

如果你在 project.json 中导入了一个空的 JS 文件，你会在 Android 上遇到这个错误。

在这种情况下，解决方案是不要导入任何空的 JS 文件。

# php - 将查询结果传递给另一个类

> ID：12417756
> 
> 赞同：0
> 
> 时间：2012-09-14T03:33:59.447
> 
> 标签：php, class

当我在 A 类中进行查询时，我已经获得了所有数据。B类需要用到一些数据。我更喜欢将部分查询结果传递给 B，而不是在 B 中进行新查询。B 类将执行一些工作，并且 B 类中的数据将被更改。**如何将数组 $something_else 传递**给 B 类？这是课程：

```
class A{
  public $something;
  private $_project_obj;
  function __construct( $id = null ){
    if ( $id ) {
       $this->id = $id;
       $this->populate( $this->id );
    }
}
 function populate(){
      $query = //do query
      $this->somthing= $query['A'];
      $this->something_else = $query['B'];
}
 function save(){
     // call save() in class B, $something_else is saved there
     if ( $this->_project_obj instanceof B ) {
    if ( true !== $this->_project_obj->save() ) {
        return false;
    }
    }
    // save $something and other stuffs in class A
   //  ......
   }
  function project() {  
    if ( !$this->_project_obj instanceof B ) {
     if ( ( $this->id ) && ( loggedin_user_id() ) ) {
       $this->_project_obj = new B( $this->id, loggedin_user_id() );
    } else {
    return false;
    }
    }
     return $this->_project_obj
    }
}
class B{
  public $data_this;
  public $data_that;
  function __constructor( $id=null, $user_id=null){
      if($id && $user_id){
        return $this->populate();
      }
      return true;

  }
 function populate(){
  $query = // do the same query as in class A
  $something_else = $query['B'];
  $this->data_this = $something_else['a'];
  $this->data_that = $something_else['b'];
 }
 function save(){
  // save all data as $something_else 
 }
 function jobs(){
 // perform jobs
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:08:12.487

```
class class_b
{

public $something_else = NULL

}

$a = new class_a();
$b = new class_b();

$b->something_else = $a->something_else 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:10:39.033

目前尚不清楚您需要在 B中的*哪个位置*`something_else`，所以让我们将其添加为构造函数的一部分：使构造函数接受一个附加参数`something_else`并将其保存到该类的属性中：

```
class B{
  private var $_parent;
  function __constructor( $parent, $id=null, $user_id=null){
      $this->_parent = $parent; // Save reference to the "A" that contains this "B"
      if($id && $user_id){
        return $this->populate();
      }
      return true;

  } 
```

当 A 创建 B 时：`$this->_project_obj = new B( $this, $this->id, loggedin_user_id() );`

而当 B 需要`something_else`从其父 A 获取最新版本时：`$this->_parent->something_else`

# mysql - MySql 查询查找最低高

> ID：12417758
> 
> 赞同：1
> 
> 时间：2012-09-14T03:34:17.633
> 
> 标签：mysql

我有一个数据表：

```
BID     USER    RETRACTED
1500    75      0
1900    75      0
2000    75      0
2000    75      0
2500    586     0
2750    75      0
3000    75      0
3250    1010    0
3500    75      0
3750    1010    0
4000    75      0 
```

这是一个出价平台，但我正在努力解决的问题是用户能够撤回他们的出价。如果他们这样做，则需要修改数据库中的信息。投标是按增量放置的。

目前我认为如果 USER 1010 撤回他们的出价，最高出价仍然是 4000，而我实际上需要它是 2750，因为这是 2 个用户之间的最高值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:43:00.657

这将是最简单的部分：

1.  首先，删除属于被撤回用户的出价。
2.  然后，选择出价最高者的用户 ID。
3.  接下来，找到不是最高出价者的最高出价。
4.  获得高于第 3 步中找到的最低出价。这将是新的最高出价。
5.  最后，删除除一个高出价之外的所有出价。

像这样的东西：

```
DELETE FROM bids WHERE user=1010;
SET @highbidder=(SELECT user FROM bids ORDER BY bid DESC LIMIT 1;
SET @secondbid=(SELECT bid FROM bids WHERE user != @highbidder ORDER BY bid DESC LIMIT 1);
SET @newhigh=(SELECT bid FROM bids WHERE bid > @secondbid ORDER BY bid ASC LIMIT 1)
DELETE FROM bids WHERE bid > @newhigh; 
```

这三个`SET`陈述可以被浓缩：

```
SET @newhigh=(SELECT bid FROM bids WHERE bid > (SELECT bid FROM bids WHERE user != (SELECT user FROM bids ORDER BY bid DESC LIMIT 1) ORDER BY bid DESC LIMIT 1) ORDER BY bid ASC LIMIT 1); 
```

但是我认为这不是一个好主意，部分是出于性能原因，但主要是出于可读性。

# mobile - android web浏览器中的html文本字段在滚动时垂直移动

> ID：12417764
> 
> 赞同：0
> 
> 时间：2012-09-14T03:35:40.740
> 
> 标签：mobile, web, textfield

我正在制作一个简单的移动网页，并将文本输入放在页面上以及许多元素上。所以要查看底部元素，需要滚动。但是当我滚动页面时，我发现我的文本输入异常地一起移动。

下图是我在我的 android 网络浏览器中发生错误时捕获的。第一个是原始文本输入，绿色框是发生错误。

![在此处输入图像描述](../Images/61af1eb1e3a0ee92207d8681bc9b20e7.png)

请让我知道如何解决它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:47:32.360

自我回答。

它的发生是因为它的内容高度。我通过更改内容高度来修复它：auto; 在 CSS 中:)

# javascript - 如何判断一个元素被溢出多少像素截断：隐藏在父级上

> ID：12417765
> 
> 赞同：0
> 
> 时间：2012-09-14T03:35:40.957
> 
> 标签：javascript, html

```
<div class="parent" style="width: 50px; overflow: hidden;">
  <div class="child" style="white-space: nowrap;">Some string of text wider than 50 pixels</div>
</div> 
```

.parent 和 .child 都报告宽度为 50 像素，但 .child 应该超过 50 像素。有没有办法确定子元素溢出其父元素的程度？

例如，如果 .child 是位置：绝对的，它会有多宽，而实际上没有使其位置：绝对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:40:47.410

你想知道滚动宽度。例如，[http://jsfiddle.net/y8uZe/1](http://jsfiddle.net/y8uZe/1)

```
document.getElementById("child").scrollWidth; 
```

​ 编辑：绝对看起来像是 Firefox 中与 white-space:nowrap 相关的某种错误。

看看这个小提琴：

[http://jsfiddle.net/y8uZe/2](http://jsfiddle.net/y8uZe/2)

您可以在这里清楚地看到 scrollHeight 如何为您提供正确的值，而 scrollWidth 实际上也提供了正确的值，因为文本是换行的。但是当你告诉 div 不要换行该文本时，就会发生奇怪的事情。

任何状况之下。一些浏览器有一个错误。它是 Safari/IE/Chrome 或 Opera/Firefox。而且由于 Opera 总是有错误，我敢打赌它是错误的。:)

另外，当我从[http://www.quirksmode.org/dom/w3c_cssom.html](http://www.quirksmode.org/dom/w3c_cssom.html)阅读定义时，scrollWidth 绝对是正确使用的属性：“整个内容字段的宽度和高度，包括当前的那些部分隐。”

最后一个编辑：如果将内部 div 更改为 display: table. 它解决了这个问题。根据您的 CSS，您可能会也可能不会这样做，但至少知道这一点是件好事。示例：http: [//jsfiddle.net/y8uZe/3/](http://jsfiddle.net/y8uZe/3/)

# ruby-on-rails - 使用activeadmin后视图失真，说翻译丢失

> ID：12417766
> 
> 赞同：4
> 
> 时间：2012-09-14T03:35:43.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, twitter-bootstrap, activeadmin

我已经使用 twitter-bootstrap gem 来制作商店应用程序。在我添加 activeadmin gem 之前它工作正常。

admin主页的视图有一行：Store Title

和

```
"translation_missing" 
```

几乎是每一个地方，观点是扭曲的。

这些是我所做的事情：将此行添加到我的 gem 文件中：

```
gem 'activeadmin' 
```

然后运行这个：

```
rails generate active_admin:install
rake db:migrate
rails s 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T19:11:57.947

试试这个，转到，然后将来自[active_admin](https://raw.github.com/gregbell/active_admin/master/config/locales/en.yml)`/config/locales/en.yml`存储库的最新 en.yml 添加到末尾（或者如果它已经存在于本地 en.yml 文件中，则将相同的块替换为块）`en: active_admin`

这对我有用。ActiveAdmin 缺少一些翻译（可能是由于 Gem 冲突），这解决了这个问题。

# android - 使用变量更改 URI

> ID：12417767
> 
> 赞同：0
> 
> 时间：2012-09-14T03:36:02.083
> 
> 标签：android, uri

嗨进步我需要你的帮助，拜托。
我有 URI 代码

```
Intent intent = new Intent(Intent.ACTION_VIEW ,Uri.parse("http://xxx/dev/android/ATMnet-Mobile_v1.1_vc2.apk")); 
```

我想用这样的变量更改最后一个 URI

```
Intent intent = new Intent(Intent.ACTION_VIEW ,Uri.parse("http://xxx/dev/android/ATMnet-Mobile_v1.1_vc"+stringText+".apk")); 
```

所以，版本代码（vc）可以由我写的变量修改，
这是我的完整代码，任何人都可以更正我的代码吗？

```
 URL textUrl;
    String StringBuffer;
    String stringText = "";

    try {
        textUrl = new URL(textSource);
        BufferedReader bufferReader = new BufferedReader(new InputStreamReader(textUrl.openStream()));

        while ((StringBuffer = bufferReader.readLine()) != null) 
        {
         stringText += StringBuffer;
        }
              bufferReader.close();
              //textServer.setText(stringText);
        } catch (MalformedURLException e) 
        {
        // TODO Auto-generated catch block
         e.printStackTrace();
         //textServer.setText(e.toString());
        } catch (IOException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
         //textServer.setText(e.toString());
        }

       PackageManager manager = getPackageManager();
       PackageInfo info;
       try {
        info = manager.getPackageInfo(getPackageName(), 0);
        int version = info.versionCode;

        if(Integer.parseInt(stringText)  != version)
        {
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
                alertDialogBuilder.setTitle(""+stringText+" "+version+" is Available.");
                alertDialogBuilder  
                    .setMessage("Do you want to download?")
                    .setCancelable(false)
                    .setPositiveButton("Yes",new DialogInterface.OnClickListener() 
                    {
                        public void onClick(DialogInterface dialog,int id) 
                        {
                            Intent intent = new Intent(Intent.ACTION_VIEW ,Uri.parse("http://xxx/dev/android/ATMnet-Mobile_v1.1_vc2.apk"));
                            startActivity(intent);
                        }
                    })
                    .setNegativeButton("No",new DialogInterface.OnClickListener() 
                    {
                        public void onClick(DialogInterface dialog,int id) 
                        {
                            dialog.cancel();
                        }
                    });

                    // create alert dialog
                    AlertDialog alertDialog = alertDialogBuilder.create();

                    // show it
                    alertDialog.show();

        }
       } catch (NameNotFoundException e) 
       {
        e.printStackTrace();
       } 
```

我希望任何人都可以帮助我:'(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:55:31.350

变化没有问题。连接可用，它工作正常。

利用

**Uri.parse("something" + str + ".apk")**

祝你好运！

# php - 通过 PHP 和 Apache2 同时连接到单个浏览器

> ID：12417769
> 
> 赞同：2
> 
> 时间：2012-09-14T03:36:03.390
> 
> 标签：php, performance, apache, session

我目前有一个 AJAX 请求发送到 sendMail.php，它立即关闭连接（使用标头*Connection: Close*）并继续处理大约 30 秒。

但是我现在遇到的问题是，当同一个客户端尝试从该服务器加载任何 PHP 页面时，它必须等到 sendMail.php 完成处理。

**有没有办法解决？**

我正在阅读其他一些可能与会话相关的 SO 问题，但我没有使用任何会话，我什至尝试在 sendMail.php 脚本的开头调用**session_write_close() 。**

示例代码（这是hacky并且完成了，但它有效）：

```
 //File: SendMail.php
   //error_reporting(E_ALL);
    error_reporting(0);
    session_write_close();
    set_time_limit(0); 
    ignore_user_abort(1);
    ignore_user_abort(true);
    ini_set('ignore_user_abort','1');
    apache_setenv('no-gzip', 1);
    apache_setenv('KeepAlive',0);
    ini_set('zlib.output_compression', 0);
    ini_set('output_buffering', 0);

    $size = ob_get_length();

    // send headers to tell the browser to close the connection
    header("Content-Length: $size");
    header('Connection: Close');
        // flush all output
    ignore_user_abort(true);
    ob_end_flush();
    ob_flush();
    flush();
    sleep(30);//The real code has more stuff, but just for example lets just say it sleeps for 30 seconds 
```

其余参考资料是通过 GET 进行的正常导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:41:29.910

几乎听起来您的 AJAX 调用正在调用一个脚本，该脚本正在消耗服务器上的可用资源（无论是内存/CPU/磁盘 I/O/等），并且阻止任何新脚本能够运行。仔细检查以确保您分配了足够的资源来完成工作。

附带说明一下，通常您不允许您的日常用户生成在服务器上运行那么长时间的进程，这仅仅是因为您为他们提供了使您的系统超载并为他们提供 DDOS 攻击的简单机会的机会。如果有可能，我会考虑 Ibere 将其移至 cron 的建议。

# c# - 日期时间转换和解析

> ID：12417770
> 
> 赞同：3
> 
> 时间：2012-09-14T03:36:18.743
> 
> 标签：c#, parsing, datetime, user-input

我的代码给出了以下错误：*输入字符串的格式不正确。*

有这个提示：

*将字符串转换为 DateTime 时，在将每个变量放入 DateTime 对象之前解析字符串以获取日期*

下面是我的代码：（ *编辑为只显示有问题的代码）*

```
 string username ="aits";
 string password = "12345";
 Int32 intresortid=7;
 string strPartySurname = "Kumar"; ;
 string strPartyFirstName = "Test";
 string strPartyPrefix = "Mr & Mrs";
 Int16 intQtyAdults=1;
 Int16 intQtyTotal=1;
 string PromotionCode = "TIF";
 string flightNO = "FlighDJ76";
 string strNotes = "<nl>Provide Breakfast<nl>Honeymooners";

 try
    {

        string url = string.Format("http://localhost/insHold.asp?username={0}&password={1‌​}&intresortid={2}&strPartySurname={3}&strPartyFirstName={4}&strPartyPrefix={5}&intQtyAdults={6}&intQtyTotal={7}&dtmLine1={8:yyyy-MM-dd}&strRoomType1={9}&intRooms1={10}&intnights1={11}&strFlightNo={12}&strNotes={13}&strBookingCode={14}&strPromotionCode={15}", username, password, intresortid, strPartySurname, strPartyFirstName, strPartyPrefix, intQtyAdults, intQtyTotal, CheckInDate, BBRoom, RoomQty, NoofNights, flightNO, strNotes, ResBookingID, PromotionCode);                                                                                                                                                                                                                                                        
        WebRequest request = HttpWebRequest.Create(url);
        WebResponse response = request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        string urlText = reader.ReadToEnd();
        bookid = Convert.ToInt16(urlText);
    }
    catch (System.ApplicationException ex)
    {
        throw ex;
    } 
```

我不知道如何将其更正为我的 DateTime 值：CheckInDate 已经是日期类型。

有人可以告诉我如何解决这个问题或指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T05:15:01.923

您的格式字符串中有 15 个格式说明符，但只有 14 个参数。除非我错过了一个，否则您的格式字符串无效。

```
/*
username={0}& ->username, 
password={1‌​}& -> password, 
intResortID={2}& -> intresortid, 
strpartysurname={3}& -> strPartySurname, 
strpartyfirstname={4}& ->strPartyFirstName, 
strpartyprefix={5}& -> intQuantityTotal, 
intQuantityTotal={6}& -> ckDate, 
dtmLine1={7}& -> BBRoom, 
strRoomType1={8}& -> RoomQty, 
intRooms1={9}& -> NoofNights, 
intnights1={10}& -> flightNO, 
strFlightNo&{11}& -> strNotes, 
strNotes{12}& -> ResBookingID, 
strBookingCode{13}& -> PromotionCode
strPromotionCode={14}", -> ????? Missing ????
);                                    
*/ 
```

就日期而言，你还没有展示你是如何得到`ckDate`的，如果它是一个`string`带有日期的，或者它是一个`DateTime`. 此外，从参数列表中，看起来像`ckDate`映射到称为“ `intQuantityTotal`”的东西。

如果`ckDate`是字符串，则使用`DateTime.TryPrase`方法将其转换为实际的日期时间。

如果您要从字符串转换，请按照此操作，假设您的输入日期在一个名为“ `inputDate`”的字符串变量中：

```
DateTime checkInDate;
if (!DateTime.TryParse(inputDate, out checkInDate))
{
 //This is error condition, which means your string date wasn't convertible to DateTime
}
else
{
   // Variable checkInDate now contains converted DateTime.
   // You can put your format string here and your DateTime should work fine.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T03:40:48.753

尝试这样做

```
DateTime ckDate = new DateTime(2012, 09, 24); 
```

更多信息可以在这里找到[http://www.dotnetperls.com/datetime](http://www.dotnetperls.com/datetime)

您也可以将字符串转换为 datetome 但您必须提前检查字符串是否为日期

```
 DateTime ckDate =Convert.DateTime(yourinputstring); 
```

你也可以使用解析

```
DateTime ckDate=DateTime.Parse(yourinputstring); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T03:40:58.363

尝试使用**[`DateTime.ParseExact Method`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx#Y1600)**

```
DateTime result = DateTime.ParseExact("2012-09-24", "yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T03:41:27.900

我建议您尽可能使用 DateTimes 构造函数，而不要费心将字符串转换为日期。

```
DateTime t = new DateTime(2012, 9, 24); 
```

如果您仍想从字符串开始，则需要使用 DateTime.Parse 的变体

最简单的事情会起作用：

```
DateTime t = DateTime.Parse("2012-9-24"); 
```

为了明确指定日期使用的格式[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

由于您提到日期字符串是由用户输入的，因此我假设您需要一个反馈循环，以防用户输入格式错误的日期。在这种情况下，您应该使用[DateTime.TryParse](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T04:54:20.783

我只是重写了格式字符串，它解决了这个问题。发现重写 { } 大括号解决了它。请尝试一下。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T09:45:16.520

[loopedcode 的答案](https://stackoverflow.com/a/12470760/13087)可能是正确的：您没有 strpartyprefix 格式说明符的参数。

此外，您应该明确格式化`ckDate`为`holdbooking.asp`. 这可能需要是一种文化不变的格式。

例如，如果`holdbooking.asp`期待'yyyy-MM-dd'，则替换

```
String.Format(" ...&dtmLine1={7}&...", ...,ckDate,...); 
```

经过：

```
String.Format(CultureInfo.InvariantCulture, 
              " ...&dtmLine1={7:yyyy-MM-dd}&...", ...,ckDate,...); 
```

# .net - Delegate的主要用途和优势？

> ID：12417772
> 
> 赞同：-2
> 
> 时间：2012-09-14T03:36:26.823
> 
> 标签：.net, delegates

代表的主要用途及其主要优点是什么？我们也可以使用简单的方法来代替委托，那为什么要使用委托呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T03:39:46.577

委托有很多很好的用途，但与简单方法相比，一个重要的好处是能够[关闭](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)环境。因此，如果没有委托或 lambda 或其他类似功能，就不可能编写像

```
public delegate int PartiallyApplied(int b);

public static PartiallyApplied CurriedAdd(int a)
{
    return delegate (int b)
    {
        return a + b;
    };
} 
```

您可能想知道为什么关闭环境很有用。一个重要的用例是[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)。仅保留特定范围内的序列元素的简单方法是

```
public IEnumerable<int> WithinRange(this IEnumerable<int> seq, int lower, int upper)
{
    return select n from seq where n >= lower && n < upper;
} 
```

（因为这是演示代码，它缺少生产代码的错误检查和其他功能）

此代码脱糖

```
public IEnumerable<int> WithinRange(this IEnumerable<int> seq, int lower, int upper)
{
    return seq.Where(n => n >= lower && n < upper);
} 
```

它使用关闭`lower`和`upper`局部变量的 lambda。如果没有委托或 lambda，就不可能为此类任务实现如此清晰简洁的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:46:31.790

委托是正确完成的函数指针。

您可以在运行时“热插拔”功能。您可以将它们传递给其他函数。

# ubuntu - 在 nGinX 上安装 php 后 phpinfo() 工作但没有别的

> ID：12417773
> 
> 赞同：0
> 
> 时间：2012-09-14T03:36:39.227
> 
> 标签：ubuntu, nginx, php

在 Ubuntu 12.04 上安装 nGinX、安装 PHP 并设置我的虚拟主机以运行 PHP 后，我创建了一个名为 test.php 的文件，但仅显示 php 信息而不显示回显文本。

这是我的测试文件的内容

```
 <?php phpinfo(); ?>
   <?

   echo 'hello php test';

   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:36:39.227

我没有注意到我在编写这个脚本时切换到了短标签。将我的短标签更改**`<?`**为长标签**`<?php`**后，php 正确地回显了字符串。

我正在使用短标签将一堆 php 文件迁移到新服务器，因此我需要在我的 php.ini 文件中启用短标签。

为此，我更新了 php.ini 文件中的以下行

**short_open_tag = 开启**

接下来我不得不重新启动nginx

**sudo 服务 nginx 重启**

# php - 如何不让用户等待缓慢的 API 调用？

> ID：12417775
> 
> 赞同：4
> 
> 时间：2012-09-14T03:37:15.160
> 
> 标签：php

我目前正在使用一个非常慢的 API，在许多情况下，网站用户必须等待这些 API 完成。例如，当发送联系表格并通过 API 发送信息时。

现在，我想知道如何加快 API 调用速度，至少对于用户而言？可以吗，对单独的 PHP 文件进行异步 AJAX 调用并从那里进行 API 调用？如果是这样，如果用户关闭页面，而 API 调用仍在运行，会发生什么情况？他可能会想，一切都已经发送了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T03:42:21.380

> 可以吗，对单独的 PHP 文件进行异步 AJAX 调用并从那里进行 API 调用？

当然是; 那将是最好的方法。

> 如果是这样，如果用户关闭页面，而 API 调用仍在运行，会发生什么情况？他可能会想，一切都已经发送了。

它可能已发送；运行 API 调用的 PHP 脚本继续以愉快的方式进行，只有当它尝试发回响应（可能是确认或错误）时，它才发现客户端消失了。如果 API 调用最终生成了一封电子邮件，无论用户是否等待，它都会完成（除非 API 调用本身有错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:46:52.677

如果您有能力运行 cron 或计划任务，我会将其转换为离线进程。例如，将数据库保存在本地数据库中并立即返回。然后编写一个脚本，该脚本将通过 cron 定期运行以处理新条目。

我在博客上写过一篇关于这个的文章，它几乎描述了这个确切的过程：[使用 PHP 构建一个可扩展的队列系统](http://www.endyourif.com/building-a-scalable-queueing-system-with-php/)

# apache-pig - 在 Pig 中使用 DESCRIBE 关键字时出现错误 1000

> ID：12417779
> 
> 赞同：1
> 
> 时间：2012-09-14T03:37:33.640
> 
> 标签：apache-pig

我正在尝试在 Eclipse 上运行我的 Pig 代码，但出现以下错误：

`ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1000: Error during parsing. Encountered " <IDENTIFIER> "line_target_group "" at line 27, column 1. Was expecting one of:`

这是我的代码的一部分：

```
23 line_target_group = GROUP line_target BY line_cd;
24
25 DESCRIBE line_target_group;
26
27 line_target_group : {
28   group : int,
29   line_target : {
30     line_cd : int,
31     station_cd1 : int,
32     station_cd2 : int,
33     s_km : double,
34     s_point : bytearray
35   }
36 } 
```

# android - '建议清洁和建造所有项目'

> ID：12417780
> 
> 赞同：1
> 
> 时间：2012-09-14T03:37:34.827
> 
> 标签：android, build, prerequisites

> “在构建其先决条件 upomp_Res 之前无法构建项目。建议清理并构建所有项目”

当我像往常一样构建一个android项目时，如上所述发生错误。按照那个信息，我清理了我的'upomp_Res'项目，然后清理了我的主项目几次，错误仍然存​​在，我重新打开了项目，甚至重新打开了我的eclipse，它没有帮助，错误仍然存​​在。

如何解决这个问题？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:06:25.597

即使您清除了“Upomp_Res”项目，Eclipse 也会保留该项目的启动配置。您需要导航 Run->Run Configuration 。在 Android 应用程序下，右键单击“Upomp_Res”并单击删除

# c++ - 方法 DSA_do_verify 和 SHA1（适用于 Windows 的 OpenSSL 库）

> ID：12417781
> 
> 赞同：0
> 
> 时间：2012-09-14T03:37:45.373
> 
> 标签：c++, authentication, openssl, sha, dsa

我正在开发一个程序，通过使用 OpenSSL for windows，特别是方法`DSA_do_verify(...)`和`SHA1(...)`哈希算法来验证 ENC 签名文件，但由于结果`DSA_do_verify`始终为 0（无效）而出现问题。

我正在使用来自 IHO S-63 数据保护方案的测试集 4B 的签名文件，以及 SA 公钥（可从 IHO 下载）进行验证。

下面是我的程序，谁能帮忙看看我哪里出错了，因为我尝试了很多方法，但未能使验证有效，谢谢..

*来自测试集 4B 的签名文件*

```
// Signature part R:
3F14 52CD AEC5 05B6 241A 02C7 614A D149 E7D6 C408.
// Signature part S:
44BB A3DB 8C46 8D11 B6DB 23BE 1A79 55E6 B083 7429.
// Signature part R:
93F5 EF86 1FF6 BA6F 1C2B B9BB 7F36 0C80 2F9B 2414.
// Signature part S:
4877 8130 12B4 50D8 3688 B52C 7A84 8E26 D442 8B6E.
// BIG p
C16C BAD3 4D47 5EC5 3966 95D6 94BC 8BC4 7E59 8E23 B5A9 D7C5 CEC8 2D65 B682 7D44 E953 7848 4730 C0BF F1F4 CB56 F47C 6E51 054B E892 00F3 0D43 DC4F EF96 24D4 665B.
// BIG q
B7B8 10B5 8C09 34F6 4287 8F36 0B96 D7CC 26B5 3E4D.
// BIG g
4C53 C726 BDBF BBA6 549D 7E73 1939 C6C9 3A86 9A27 C5DB 17BA 3CAC 589D 7B3E 003F A735 F290 CFD0 7A3E F10F 3515 5F1A 2EF7 0335 AF7B 6A52 11A1 1035 18FB A44E 9718.
// BIG y
15F8 A502 11C2 34BB DF19 B3CD 25D1 4413 F03D CF38 6FFC 7357 BCEE 59E4 EBFD B641 6726 5E5F 0682 47D4 B50B 3B86 7A85 FB4D 6E01 8329 A993 C36C FD9A BFB6 ED6D 29E0. 
```

*dataServer_pkeyfile.txt（从上面提取）*

```
// BIG p
C16C BAD3 4D47 5EC5 3966 95D6 94BC 8BC4 7E59 8E23 B5A9 D7C5 CEC8 2D65 B682 7D44 E953 7848 4730 C0BF F1F4 CB56 F47C 6E51 054B E892 00F3 0D43 DC4F EF96 24D4 665B.
// BIG q
B7B8 10B5 8C09 34F6 4287 8F36 0B96 D7CC 26B5 3E4D.
// BIG g
4C53 C726 BDBF BBA6 549D 7E73 1939 C6C9 3A86 9A27 C5DB 17BA 3CAC 589D 7B3E 003F A735 F290 CFD0 7A3E F10F 3515 5F1A 2EF7 0335 AF7B 6A52 11A1 1035 18FB A44E 9718.
// BIG y
15F8 A502 11C2 34BB DF19 B3CD 25D1 4413 F03D CF38 6FFC 7357 BCEE 59E4 EBFD B641 6726 5E5F 0682 47D4 B50B 3B86 7A85 FB4D 6E01 8329 A993 C36C FD9A BFB6 ED6D 29E0. 
```

*节目摘要：*

```
QbyteArray pk_data;
QFile pk_file("./dataServer_pkeyfile.txt");

if (pk_file.open(QIODevice::Text | QIODevice::ReadOnly))
{
   pk_data.append(pk_file.readAll());
}
pk_file.close();

unsigned char ptr_sha_hashed[20];
unsigned char *ptr_pk_data = (unsigned char *)pk_data.data();

// openssl SHA1 hashing algorithm
SHA1(ptr_pk_data, pk_data.length(), ptr_sha_hashed);

DSA_SIG *dsasig = DSA_SIG_new();

char ptr_r[] = "93F5EF861FF6BA6F1C2BB9BB7F360C802F9B2414"; //from tset 4B
char ptr_s[] = "4877813012B450D83688B52C7A848E26D4428B6E"; //from tset 4B

if (BN_hex2bn(&dsasig->r, ptr_r) == 0) return 0;
if (BN_hex2bn(&dsasig->s, ptr_s) == 0) return 0;

DSA *dsakeys = DSA_new();

//the following values are from the SA public key
char ptr_p[] = "FCA682CE8E12CABA26EFCCF7110E526DB078B05EDECBCD1EB4A208F3AE1617AE01F35B91A47E6DF63413C5E12ED0899BCD132ACD50D99151BDC43EE737592E17";
char ptr_q[] = "962EDDCC369CBA8EBB260EE6B6A126D9346E38C5";
char ptr_g[] = "678471B27A9CF44EE91A49C5147DB1A9AAF244F05A434D6486931D2D14271B9E35030B71FD73DA179069B32E2935630E1C2062354D0DA20A6C416E50BE794CA4";
char ptr_y[] = "963F14E32BA5372928F24F15B0730C49D31B28E5C7641002564DB95995B15CF8800ED54E354867B82BB9597B158269E079F0C4F4926B17761CC89EB77C9B7EF8";

if (BN_hex2bn(&dsakeys->p, ptr_p) == 0) return 0;
if (BN_hex2bn(&dsakeys->q, ptr_q) == 0) return 0;
if (BN_hex2bn(&dsakeys->g, ptr_g) == 0) return 0;
if (BN_hex2bn(&dsakeys->pub_key, ptr_y) == 0) return 0;

int result;  //valid = 1, invalid = 0, error = -1

result = DSA_do_verify(ptr_sha_hashed, 20, dsasig, dsakeys);

//result is 0 (invalid) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:22:58.143

发现问题..应该以二进制文件而不是文本打开文件，如下所示：

`if (pk_file.open(QIODevice::ReadOnly))`

# asp.net - Coldfusion SOAP 请求预览

> ID：12417784
> 
> 赞同：1
> 
> 时间：2012-09-14T03:38:23.560
> 
> 标签：asp.net, soap, coldfusion, coldfusion-8

我需要使用 ColdFusion 8 使用 asp.net Web 服务并返回一个 XML 文件。

我能够与 asp.net 服务通信，但从服务返回一个错误，基本上说我传递的信息无效。

这是我的代码的运行：

```
<cfxml variable="soap">
<?xml version="1.0" encoding="UTF-8" ?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"   
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <soap:Body>
<cfoutput> <GetSession xmlns="#stagingurl#"></cfoutput>  
  <strApplicationKey>myappkey</strApplicationKey>
  <UID>myuserid</UID>
  <arrProperties>
    <Property>
      <Name>IP</Name>
      <Value>127.0.0.1</Value>
    </Property>
  </arrProperties>
  <arrRoles />
</GetSession>
</soap:Body>
</soap:Envelope>         
</cfxml>

<cfhttp url="#apiurl#" method="post" result="httpresponse" port="443">

  <cfhttpparam type="header" name="content-type" value="text/xml"> 
  <cfhttpparam type="header" name="SOAPAction" value="#mysoapaction#"> 
  <cfhttpparam type="header" name="content-length" value="#len(trim(soap))#"> 
  <cfhttpparam type="header" name="charset" value="utf-8">
  <cfhttpparam type="Body" value="#trim(soap)#" name="FileContent"/>  

</cfhttp>

<cfdump var="#GetHttpRequestData()#" label="Get Http Request Data" /> 
```

有没有办法预览正在发送的信息以确保 ColdFusion 实际上正在发送我的 XML/SOAP 请求？

我确实使用`#GetHttpRequestData()#`过返回一些数据，并且在结构中，内容是“空字符串”，这就是我需要帮助的地方。这应该是空的吗？这对我来说是新的，但是，我想我希望传递给 asp.net 服务的信息会在那里。

仅供参考 - 我可以很好地看到 HTTP 和 SOAP 响应，我只是看不到请求信息。如何查看请求信息？

仍在尝试确定问题是我的问题还是他们的问题，此时需要收集事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:07:14.623

使用 Web 服务时另一个非常宝贵的工具是[soapUI](http://www.soapui.org/)。这绝对应该是你工具包的一部分。您可以使用soapUI 构建您的请求并检查响应。一旦你让它与soapUI一起工作，你就可以将你的请求复制到你的ColdFusion代码中。

我注意到的一件事是您将 XML 包装在`cfxml`标签中。我不确定这是否会影响您的请求。我通常将我的 XML 请求包装在`cfsavecontent`标签中。因此，您可以尝试像这样更改代码：

```
<cfsavecontent variable="soap">
<?xml version="1.0" encoding="UTF-8" ?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
   <cfoutput> <GetSession xmlns="#stagingurl#"></cfoutput>  
   <strApplicationKey>myappkey</strApplicationKey>
   <UID>myuserid</UID>
   <arrProperties>
     <Property>
       <Name>IP</Name>
       <Value>127.0.0.1</Value>
     </Property>
   </arrProperties>
   <arrRoles />
   </GetSession>
   </soap:Body>
</soap:Envelope>         
</cfsavecontent> 
```

您的其余代码可以保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:30:54.400

如果您在 Windows 上（或手头有 Windows 机器）安装[Fiddler](http://fiddler2.com/fiddler2/)并启动它。它是一个默认侦听端口 8888 的代理，因此在您的 cfhttp 调用中，添加 proxyServer="127.0.0.1" 和 proxyPort="8888" 并再次运行您的请求。

刚刚注意到您使用的是端口 443，所以可能是 SSL。您可以启用 HTTPS 解密工具->Fiddler 选项->HTTPS 选项卡->解密 HTTPS 流量。然后，您可能还需要将[Fiddler 使用的证书导入您的密钥库](https://stackoverflow.com/a/8588914/826714)。

现在每个请求都将显示在 Fiddler 中，您可以使用右侧的请求和响应检查器查看服务器之间传输的确切数据（原始选项卡显示数据未更改）。这救了我很多次，现在是我标准工具包的一部分。

在您的特定情况下，您是否有理由不使用 CreateObject("webservice","http://....") 。我假设它不能很好地与基于 .Net 的网络服务一起使用？

此外，对 GetHttpRequestData() 的调用显示了您对测试页面发出的请求，而不是您对测试 Web 服务发出的 HTTP 调用。不幸的是，CFHTTP 不返回任何显示其使用的完整 HTTP 请求详细信息的结构。我认为这将是一个非常合理的功能请求，因为目前，您必须使用 fiddler 或 wireshark 之类的工具来查看发送的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T11:04:30.803

Simple issue with dot net is, it cannot processs XML document created by coldfusion. To return XML to dot net, convert into string format (XMLvariable.Tostring)

param of HTTP request should be
`<cfhttpparam type="Body" value="#trim(soap).ToString#" name="FileContent"/>`

# java - twitter 获取状态 user_timeline 无法返回非英文字符的状态

> ID：12417785
> 
> 赞同：1
> 
> 时间：2012-09-14T03:38:26.930
> 
> 标签：java

我正在用 Java 进行 Twitter API 调用（使用 Eclipse 作为 IDE）。在使用 Get statuses/usertimeline API 调用时，我注意到它似乎没有正确返回非英文字符（例如日文）。它不会返回“???”，而是返回方形框而不是实际字符。有人可以帮忙解决这个问题吗？

# c - 数组下标的无效类型 int[int]

> ID：12417786
> 
> 赞同：0
> 
> 时间：2012-09-14T03:38:32.030
> 
> 标签：c, arrays, error-handling

我试图将一个二维数组传递给一个函数，但它总是抛出这个错误。我的代码如下：

```
void initialize_centroids(int *,int,int);(Initialization)

initialize_centroids(centroid[0],noofcentroids,newnoofvar);(inside my main)

void initialize_centroids(int *carray,int p,int q)
{
    int i,j;
    for(i=0;i<p;i++)
    {
        for(j=0;j<q;j++)
        {
           carray[i][j]=i;
        }
    }

    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:47:33.917

传入时不要取消引用`centroid`。这样做只会通过你的第一行。做这个：

```
initialize_centroids( centroid, noofcentroids, newnoofvar ); 
```

那么你需要在这里使用正确的类型：

```
void initialize_centroids( int **carray, int p, int q ) 
```

你的数组大概是一个`int**`. 这意味着它是一个指向内存中包含指针数组的位置的`int*`指针。这些指针中的每一个（我假设）都引用了已分配给数组的一行的内存。

现在，一旦您通过执行获得这些指针之一，`carray[i]`您就选择了 row `i`。你现在有一个`int*`，这意味着它指向一个数组`int`。

最后，从row 上的列中`carray[i][j]`选择一个特定的整数。`j``i`

*[编辑]*

关于可能出了什么问题的理论...您可能没有在动态意义上分配二维数组，或者实际上它可能是一维数组并且您应该使用步幅等。这是您可以使用的解决方案用于动态分配二维数组，并将其索引为`carray[i][j]`.

*注意：由于对齐问题，过去有些人对这种方法感到不满，但我从来没有遇到过问题。我想他们只是有一个脾气暴躁的一天。对于那些担心对齐的人来说，调整起来很容易，但是对于这个例子来说太复杂了。*

```
int** allocate_array2d( int rows, int cols )
{
    int i, **arr, *data;
    arr = (int**)malloc( rows * sizeof(int*) + rows*cols*sizeof(int) );
    data = (int*)(arr + rows);
    for( i = 0; i < rows; i++ ) {
        rows[i] = data;
        data += cols;
    }
    return arr;
}

void free_array2d( int** arr ) {
    free((void*)arr);
} 
```

现在，在你的主要：

```
int** centroid = allocate_array2d( noofcentroids, newnoofvar );
initialize_centroids( centroid, noofcentroids, newnoofvar ); 
```

*[更多的...]*

> Okay.Yes 我分配了像这样的 centroid[100][100] 的内存 – Bobby 11 分钟前

在这种情况下，您应该声明：

```
void initialize_centroids( int carray[100][100], int p, int q )
{
    //...
} 
```

无需使用我的动态数组示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:40:19.010

您正在传递一个指向 int ( `int*`) 的指针，但您正在尝试使用两个下标。是二维数组吗？那么参数需要是一个指向 int 的指针：`int**`

```
void initialize_centroids(int**, int, int);

int centroid[][] = ....  // wherever this comes from
initialize_centroids(centroid, noofcentroids, newnoofvar);(inside my main)

void initialize_centroids(int** carray, int p, int q)
{
    int i,j;
    for(i=0;i<p;i++)
    {
        for(j=0;j<q;j++)
        {
            carray[i][j]=i;
        }
    }

    return;
} 
```

# c++ - 我的 IDE 使用什么 C++ 实现/库？（NetBeans，MacOSX）

> ID：12417787
> 
> 赞同：0
> 
> 时间：2012-09-14T03:38:55.903
> 
> 标签：c++, netbeans, ide

谁能告诉我像 NetBeans 或任何类似的 IDE 是如何收集所有标准 C++ 库的？例如，我创建了一个新的 Netbeans C++ 应用程序，并包含了 iostream，它运行没有问题。但是，如果我在我的 MacOSX Snow Leapord 上搜索文件名“iostream”，它会在路径中找到它

/Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/IOKit/stream

这是否意味着我的 IDE 正在使用我的操作系统的 C++ 库？这很奇怪，因为所有这些文件都是“版权苹果”——所以我假设这是苹果修改的 C++ 实现？

我的印象是有 1 个标准 C++ 库，所有编译器都使用它。Netbeans 是否只是收集了与 Xcode 捆绑在一起的同一个库？

本质上，我想查看一些 C++ 头文件的来源，以收集有关其内部工作的更多信息，但我担心我正在使用一些超重量级、Apple 修改的核心库，这些库甚至可能不合法使用，因为它在某些 Apple 许可下。

感谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:45:46.617

NetBeans 只是一个 IDE，它不附带编译器或任何 C++ 库。由于看起来您已经安装了 Xcode，因此 NetBeans 会自动使用与 Xcode 关联的编译器和库。我不知道苹果许可证是什么，但是由于您购买并拥有您的 Mac，我认为使用这些标头没有问题。

此外，要查看标题，只需右键单击代码和`Go To`->`C++ Declaration`或`Header Files`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:46:51.040

有一个地方你安装了 g++，你的包含文件都来自那里。您可以使用`gcc -I`开关添加其他头文件，这在 Netbeans 中的构建工具链选项中实现

更多信息[在这里](https://stackoverflow.com/questions/7445355/g-in-mac-osx-10-7)

我现在手头没有 mac，但我**猜**包含文件将位于以下位置：

`/usr/share/g++`

**编辑：**

您可以在以下位置找到代码帮助弹出包含文件：

`Tools -> Options -> C/C++ -> Code Assistance`

# java - Android在listview的同一行获取Textview文本

> ID：12417789
> 
> 赞同：0
> 
> 时间：2012-09-14T03:39:26.480
> 
> 标签：java, android

我的 BaseAdapter 适配器中有这段代码：

```
public View getView(final int position, View convertView, ViewGroup parent) {
   View vi=convertView;

   if(convertView==null) 
       vi = inflater.inflate(R.layout.facebook_friends_layout, null);

   TextView friendsName = (TextView)vi.findViewById(R.id.tvFacebookName); // Friends thumb
   friend_image=(ImageView)vi.findViewById(R.id.ivFacebookPicture);  // thumb image

   song= new HashMap<String, String>();
   song = data.get(position);
   friendsName.setText(song.get(MyFriends.KEY_FBNAME));
   //Log.i("Facebook Pangalan", ""+MyFriends.KEY_FBNAME);

   FriendName = (String) friendsName.getText().toString();

   FBID = song.get(MyFriends.KEY_FBID); 
   String fbAvatarUrl = "http://graph.facebook.com/"+ FBID +"/picture";
   //Log.i("FBID", FBID);
   BitmapManager.INSTANCE.loadBitmap(fbAvatarUrl, friend_image, 100,100);
   Button btn=(Button)vi.findViewById(R.id.btnAdd);
   if (FBID.equals(""))
   {
       btn.setVisibility(View.GONE);
   }
   else 
   {
       btn.setVisibility(View.VISIBLE); 
   }
   btn.setOnClickListener(new OnClickListener(){ 

       public void onClick(View arg0) {
           LOCK_BASEDATA = MyFriends.LOCK_BASEDATA;
           if (LOCK_BASEDATA.equals("0")) 
           {
               //FACEBOOK FRIENDS
               Log.i("", ""+FriendName);
               //AddfromFacebookFriends();
           }
           else if (LOCK_BASEDATA.equals("1"))
           {
               //MY REQUEST
               //((MyFriends)context).SetMyRequest();
               //Log.i("LangYa", "Langya");
           }
           else if (LOCK_BASEDATA.equals("2"))
           {
               //FRIEND REQUEST
               //((MyFriends)context).SetFriendRequest();
               //d2papasok
               AddFriendRequest();
           }

       }

    });

   return vi;
} 
```

每当我点击按钮时，我都会记录我朋友的名字。现在，当我单击按钮时，我的问题就开始了；我没有得到我想要的字符串。它正在从我的列表视图的另一行获取字符串。

**编辑** 谢谢，实际上我刚刚添加了这段代码

```
public void onClick(View arg0) {
                LOCK_BASEDATA = MyFriends.LOCK_BASEDATA;
                if (LOCK_BASEDATA.equals("0")) 
                {
                    //Object x =btn.getTag();
                    //String sa = x.toString();
                    View parentView = (View) arg0.getParent();
                    String textviewtext = ((TextView) parentView.findViewById(R.id.hiddentv)).getText().toString();
                    //FACEBOOK FRIENDS

                    AddfromFacebookFriends(textviewtext);

                }
                else if (LOCK_BASEDATA.equals("1"))
                { 
```

我只是让我的父母查看以获得我想要的文本视图，现在它可以工作了。不管怎么说，还是要谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:32:27.010

您正在尝试使用以下代码获取 FriendName：

```
TextView friendsName = (TextView)vi.findViewById(R.id.tvFacebookName);
FriendName = (String) friendsName.getText().toString(); 
```

这不是您单击的 ListView 项的 FriendName。它是新创建的 ListView 项的 FriendName。因为在getView()中，你得到的ListView项是新创建的。

**解决此问题的一种方法是：**

使用 KunalK 建议的标签。我不确定它是否有效……我从未尝试过。

**或者另一种方式是：**

onButtonClicked 获取`Position`您单击的 ListView 项，并`Name`从您正在使用的 ArrayList 中获取相应项。

这里`Position`不是`position parameter`getView() 中的。这再次给出了新创建的 ListView 项的位置。

使用它来获取点击项目的实际位置：

```
int clickedItemPosition = yourListView.getPositionForView((View) yourButton.getParent()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:25:01.357

您应该通过在按钮的 setTag 属性中设置“FriendName”来实现这一点。并且每当您处理按钮单击事件时，使用按钮的 getTag 属性获取您的 FriendName 字符串。例如像这样的东西：

```
....
btn.setTag(FriendName);
btn.setOnClickListener(new OnClickListener(){ 
   public void onClick(View arg0) {
       LOCK_BASEDATA = MyFriends.LOCK_BASEDATA;
       if (LOCK_BASEDATA.equals("0")) 
       {
           //FACEBOOK FRIENDS
           Log.i("", ""+btn.getTag().toString());
           //AddfromFacebookFriends();
       }
       else if (LOCK_BASEDATA.equals("1"))
       {
           //MY REQUEST
           //((MyFriends)context).SetMyRequest();
           //Log.i("LangYa", "Langya");
       }
       else if (LOCK_BASEDATA.equals("2"))
       {
           //FRIEND REQUEST
           //((MyFriends)context).SetFriendRequest();
           //d2papasok
           AddFriendRequest();
       }

   }

});
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T06:34:00.950

可以使用 onListItemClick 方法从列表中获取名称，如下所示（*不是*在您的适配器中，而是在您的列表的类中）：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    TextView friendsName = (TextView)v.findViewById(R.id.tvFacebookName);   
    FriendName = (String) friendsName.getText().toString();    
} 
```

由于此代码是`onListItemClick`方法，因此`View v`参数是您单击的行的视图。一旦你有了它，你就可以在那个特定的行视图中搜索你想要的 TextView，然后从中提取字符串。

你有正确的想法，你只是把它放在错误的地方。

# c - 将键盘输入存储到C中的整数数组中

> ID：12417792
> 
> 赞同：1
> 
> 时间：2012-09-14T03:39:58.417
> 
> 标签：c, arrays, input

只是我家庭作业的开始。只需要弄清楚这一点，这样我就可以让程序的其余部分继续进行。

我需要能够键入输入，例如：

```
3 5 1 2 3 4 5 
```

用空格分隔每个数字，每个数字按输入的顺序排列在数组中。

```
array[0] = 3, array[1] = 5 
```

这必须在 C 中，并在每个疯狂教授的控制台中输入。每个数字输入后不允许按回车键。必须按上图输入，然后按回车键。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:43:10.103

我不会为你做你的工作，而是查找从标准输入[中读取字符串](http://www.cplusplus.com/reference/clibrary/cstdio/gets/)，然后如何将它们[标记化](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)（拆分）为可以存储在数组中的元素。

# ruby-on-rails-3.1 - 带有 mysql2 适配器的 Rails Rubber gem - 用户错误拒绝访问

> ID：12417794
> 
> 赞同：4
> 
> 时间：2012-09-14T03:40:18.690
> 
> 标签：ruby-on-rails-3.1, mysql2

我正在尝试使用一个不错的简单 Rails 应用程序（1 个模型和 2 个字段）来学习如何使用 mysql2 数据适配器将应用程序部署到 Amazon Web Services (AWS) EC2 实例服务器。我正在尝试使用 Rubber Gem 进行部署。在我尝试浏览网站之前，一切看起来都很好（引导和部署）。当我输入模型索引页面的 URL 时，apache2 error.log 显示此错误：

```
*** Exception PhusionPassenger::UnknownError in
PhusionPassenger::Rack::ApplicationSpawner 
(Access denied for user ''@'blog.foo.com' to database 'blog_production' 
(Mysql2::Error)) 
```

为什么不能访问mysql db？橡胶设置的一切看起来都很好。

完整的 error.log 数据是

```
[ pid=19455 thr=19477020 file=utils.rb:176 time=2012-09-13 23:25:01.220 ]: *** Exception PhusionPassenger::UnknownError in PhusionPassenger::Rack::ApplicationSpawner (Access denied for user ''@'blog.foo.com' to database 'blog_production' (Mysql2::Error)) (process 19455, thread #<Thread:0x00000002526438>):
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:304:in `new_connection'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:323:in `checkout_new_connection'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:265:in `block (2 levels) in checkout'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:261:in `loop'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:261:in `block in checkout'
from /usr/local/rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:260:in `checkout'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:162:in `connection'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:409:in `retrieve_connection'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_specification.rb:107:in `retrieve_connection'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/base.rb:701:in `table_exists?'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/base.rb:792:in `attribute_names'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/params_wrapper.rb:168:in `_set_wrapper_defaults'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.0/lib/action_controller/metal/params_wrapper.rb:128:in `inherited'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.0/lib/abstract_controller/railties/routes_helpers.rb:7:in `block (2 levels) in with'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.0/lib/action_controller/railties/paths.rb:7:in `block (2 levels) in with'
from /mnt/blog-production/releases/20120914032205/app/controllers/articles_controller.rb:1:in `<top (required)>'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `require'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `block in require'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:225:in `load_dependency'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `require'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:348:in `require_or_load'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:302:in `depend_on'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:214:in `require_dependency'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/engine.rb:416:in `block (2 levels) in eager_load!'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/engine.rb:415:in `each'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/engine.rb:415:in `block in eager_load!'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/engine.rb:413:in `each'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/engine.rb:413:in `eager_load!'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/application/finisher.rb:51:in `block in <module:Finisher>'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:25:in `instance_exec'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:25:in `run'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:50:in `block in run_initializers'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:49:in `each'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:49:in `run_initializers'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/application.rb:92:in `initialize!'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /mnt/blog-production/releases/20120914032205/config/environment.rb:5:in `<top (required)>'
from config.ru:3:in `require'
from config.ru:3:in `block in <main>'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:51:in `instance_eval'
from /mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:51:in `initialize'
from config.ru:1:in `new'
from config.ru:1:in `<main>'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb:225:in `eval'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb:225:in `load_rack_app'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb:157:in `block in initialize_server'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/utils.rb:572:in `report_app_init_status'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb:154:in `initialize_server'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb:204:in `start_synchronously'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb:180:in `start'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
from <internal:prelude>:10:in `synchronize'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.12/helper-scripts/passenger-spawn-server:99:in `<main>'
[ pid=19516 thr=140129381447488 file=ext/apache2/Hooks.cpp:862 time=2012-09-13 23:25:01.326 ]: Unexpected error in mod_passenger: Cannot spawn application '/mnt/blog-production/releases/20120914032205': An error occured while spawning the application.
Backtrace:
 in 'virtual Passenger::SessionPtr Passenger::ApplicationPool::Client::get(const Passenger::PoolOptions&)' (Client.h:742)
 in 'Passenger::SessionPtr Hooks::getSession(const Passenger::PoolOptions&)' (Hooks.cpp:294)
 in 'int Hooks::handleRequest(request_rec*)' (Hooks.cpp:563) 
```

已部署服务器上的 config/database.yml 文件是

```
production:
  adapter: mysql2
  encoding: utf8
  database: blog_production
  username: blog
  password: 
  host: blog.foo.com
  pool: 5 
```

是否有任何其他信息可以帮助追查问题？

我现在要花两周时间尝试在 AWS 上部署该网站。这些天的某一天，我要付出代价。

谢谢，拉斯

我看到密码字段是空白的，所以在 Rubber-mysql.yml 中为 db_pass 变量设置一个值

```
db_user: "#{app_name[0,16]}"
db_pass: kickback
db_name: "#{app_name}_#{Rubber.env}" 
```

我试着做一个`cap rubber:bootstrap`然后`cap deploy`希望能在 config/database.yml 文件中填写服务器上的密码值。那没有用，所以我做了一个完整的`cap rubber:create_staging`. yml 文件现在已填写密码

```
production:
  adapter: mysql2
  encoding: utf8
  database: blog_production
  username: blog
  password: kickback
  host: blog.foo.com
  pool: 5 
```

但是 create_staging 命令的结尾显示了这个错误

```
 * executing "cd /mnt/blog-production/releases/20120914041247 && bundle exec rake RAILS_ENV=production  db:migrate"
    servers: ["blog.foo.com"]
    [blog.foo.com] executing command
 ** [out :: blog.foo.com] rake aborted!
 ** [out :: blog.foo.com] 
 ** [out :: blog.foo.com] Access denied for user 'blog'@'blog.foo.com' (using password: YES)
 ** [out :: blog.foo.com] 
 ** [out :: blog.foo.com] 
 ** [out :: blog.foo.com] Tasks: TOP => db:migrate
 ** [out :: blog.foo.com] 
 ** [out :: blog.foo.com] (See full trace by running task with --trace)
 ** [out :: blog.foo.com] 
    command finished in 25336ms
failed: "/bin/bash -l -c 'cd /mnt/blog-production/releases/20120914041247 && bundle exec rake RAILS_ENV=production  db:migrate'" on blog.foo.com 
```

接下来要尝试什么？也许尝试`rake db:migrate`手动。

```
$ RAILS_ENV=production rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
Rails Error: Unable to access log file. Please ensure that /mnt/blog-production/releases/20120914041247/log/production.log exists and is chmod 0666\. The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:migrate
rake aborted!
Access denied for user 'blog'@'blog.foo.com' (using password: YES)
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:304:in `new_connection'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:323:in `checkout_new_connection'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:265:in `block (2 levels) in checkout'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:261:in `loop'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:261:in `block in checkout'
/usr/local/rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:260:in `checkout'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:162:in `connection'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:409:in `retrieve_connection'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_specification.rb:107:in `retrieve_connection'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/migration.rb:633:in `initialize'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/migration.rb:549:in `new'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/migration.rb:549:in `up'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/migration.rb:530:in `migrate'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/railties/databases.rake:161:in `block (2 levels) in <top (required)>'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/mnt/blog-production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.2-p290@global/bin/rake:19:in `load'
/usr/local/rvm/gems/ruby-1.9.2-p290@global/bin/rake:19:in `<main>'
/usr/local/rvm/gems/ruby-1.9.2-p290/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.2-p290/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:migrate 
```

我是时候放弃使用橡胶了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:46:59.310

这是一个 MySQL 身份验证问题。它首先将您的用户与匿名帐户匹配（由于主机名），因此访问受到限制。

如果你 ssh 到你的服务器并输入这个，你应该以同样的方式失败：

```
$ mysql -u blog -h blog.foo.com -p kickback
ERROR 1045 (28000): Access denied for user 'blog'@'blog.foo.com' (using password: YES) 
```

[在这里](https://stackoverflow.com/a/12740989/518370)查看我的详细解决方案。

# mysql - 尝试使用仅在连接成功时才适用的“位置”进行左连接

> ID：12417807
> 
> 赞同：0
> 
> 时间：2012-09-14T03:41:46.880
> 
> 标签：mysql, join, left-join

我有文章，存储在`article`表格中。有些文章有一张或多张照片，存储在一个指定的`photo`表`article_id`中。某些照片已“停用”( `photo.active = '0'`)，不应检索。

我正在尝试为主页获取文章，并为每篇带有一张或多张照片的文章获取一张照片。像这样：

```
SELECT article.id, article.date, article.title, photo.filename_small 
FROM (article) 
LEFT JOIN photo ON photo.article_id=article.id 
WHERE photo.active = '1' 
GROUP BY article.id 
ORDER BY article.date desc 
LIMIT 10 
```

（“分组依据”是为了让我不会为包含多张照片的文章获得多个结果。这让我觉得很尴尬。）

当我有`WHERE photo.active = '1'`这样的情况时，我只能得到一张照片的结果，这违背了让连接成为左连接的目的。仅当连接将文章与照片匹配时，位置才相关，但它会排除所有没有活动照片的文章。有任何想法吗？

（是的，有类似的问题，但我已经阅读了很多，但仍在苦苦挣扎。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T03:43:19.847

尝试类似的东西

```
SELECT  article.id, 
        article.date, 
        article.title, 
        photo.filename_small  
FROM    (article)  LEFT JOIN 
        photo   ON  photo.article_id=article.id  
                AND photo.active = '1'  
GROUP BY article.id  
ORDER BY article.date desc  
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:46:29.807

两种选择。

1.  把它放在join子句中：

    ```
    LEFT OUTER JOIN photo ON photo.article_id=article.id AND photo.active = 1 
    ```

2.  再次明确允许空值：

    ```
    WHERE (photo.active = 1 OR photo.id IS NULL) 
    ```

第二个似乎不必要地复杂，因为您已经有了外部连接。我推荐第一个。

# c++ - OS X 从 Carbon 到 Cocoa 窗口创建？

> ID：12417815
> 
> 赞同：3
> 
> 时间：2012-09-14T03:43:00.763
> 
> 标签：c++, macos, cocoa, opengl, macos-carbon

**编辑：这个问题已在评论中间接回答（使用 GLUT 来避免需要任何一个），但由于它没有作为答案发布，尽管我的问题已解决，但我不能“接受”它。**

我有一个用 C++ 编写的跨平台 OpenGL 应用程序，它（在 Mac OS X 上）使用 Carbon 来创建窗口和消息泵（想想……NeHe 第 1 课）。最近使用 C++11 特性对我的代码进行的更改使其与 XCode 捆绑的 GCC 不兼容。

我所有使用 MacPorts、HomeBrew 等系统的尝试都因不同的原因而失败（主要是因为我需要编译 32 位以支持 Carbon）。我最初想问是否有人有更好的解决方案来在 Mac OS X 10.8 中安装更新的 G++。

这似乎是一个短视的解决方案（在某些时候，我需要升级到 Cocoa 和 64 位）所以我的问题已经演变为询问让我现有的（非常大的）应用程序利用 Cocoa 来完成这项任务的最简单方法是什么而不是碳？

我在自己单独的.cpp/.h 文件中拥有所有“碳代码”，该文件只有两个功能，一个用于创建 OpenGL 窗口，另一个是使用 ReceiveNextEvent 的消息泵。

* * *

**编辑：** 为了更清楚，我正在寻找最好的方法来设计（或多或少）替代我现有的 Carbon 窗口创建和消息泵功能，但在 Cocoa 中。我知道作为一个不同的 API，使用不同的语言概念，简单的一对一命令替换是不够的。我现有的代码有一个适用于 Mac 的源代码文件，该文件有两个函数，它们执行我调用的核心任务（使用 Carbon），InitWindow 和 DoEvents。它们分别创建窗口，并循环处理未决事件。我的目标是用使用 Cocoa 的源代码文件替换这个源代码文件，公开相同的功能，因此对我的核心代码几乎没有修改。

实现我的目标的最佳方式是什么？我不熟悉 Cocoa，Obj-C 对我来说是陌生的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:17:21.687

使用 Cocoa 64 位绝对是个好主意。如果您也想让您的用户满意，我建议您使用一些本机 UI。

最简单的方法是在其中创建`NSWindow`一个`NSOpenGLView`。您可以在 Interface Builder 或代码中执行此操作。最好通过使用 Xcode 的模板（文件 > 新项目 > Cocoa 应用程序）创建一个新的 Cocoa 应用程序来做到这一点。默认情况下，这会给你一个窗口。您可以在 Interface Builder 中打开它并添加一个`NSOpenGLView`。您可以使视图成为 的自定义子类`NSOpenGLView`，并将您的事件处理添加到其中。[`NSResponder`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html)有关Cocoa 如何调度事件的更多信息，请参阅文档。

# c++ - ZeroMQ Pub 发送空字符串

> ID：12417820
> 
> 赞同：1
> 
> 时间：2012-09-14T03:43:30.147
> 
> 标签：c++, zeromq, memcpy

我已经设置了一个简单的 C++ PUB 和 python SUB，打算最终将 C++ 端构建为一个简单的 DLL。我之前有一些在两边都使用 python 进行类似设置的经验，没有问题。然而，我是一个完全的 C++ 菜鸟。

我的 C++ 代码：

```
#define ZMQ_EXPORT

#include "stdafx.h"
#include "zmq.hpp"

int _tmain(int argc, _TCHAR* argv[]) {
    zmq::context_t context(1);
    zmq::socket_t publisher(context, ZMQ_PUB);
    publisher.bind("tcp://*:6666");

    zmq::message_t message(5);
    memcpy(message.data(), "Hello", 5);

    while(true) {
        Sleep(500);
        publisher.send(message);
    }

    return 0;
} 
```

recv_multipart() 上的 python SUB 脚本的结果：

> ['']

我相信它可以正常工作，尽管我认为我执行 memcpy 的方式存在缺陷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:35:17.917

我在想你错过了 pub/sub 的整个“订阅”部分

您需要为 PUB 消息提供某种消息过滤器。这也意味着您的 SUB 需要这样做[`setsockopt`](http://api.zeromq.org/2-1%3azmq-setsockopt)才能接收消息。

您给出的示例表明您实际上没有针对您的 PUB 消息的消息过滤器（或者更确切地说，您的“Hello”是您的消息过滤器，并且数据消息实际上是一个空字符串）。

# excel - 如何在excel中合并两个文件？

> ID：12417821
> 
> 赞同：-1
> 
> 时间：2012-09-14T03:43:31.037
> 
> 标签：excel, excel-formula, vba

可以说在excel表中

第一列有

> a
> s
> d
> f
> h
> j

第二列有

> s
> d
> f

如果 column2 中的内容与 column1 中的内容匹配，则应将其替换为 null。

最终结果如下所示，因为 s,d 和 f 在两个文件中是通用的。

> 一个
> null
> null
> null
> h
> j

如何在 Excel 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:06:10.580

有一个基本公式

*编辑：我在同一个工作簿的同一张工作表中使用了两列。如果您实际上有两个文件，则应从第二个工作簿直接链接 B 列*

*   在 C1 中放置`=IF(ISNA(MATCH(A1,B:B,0)),A1,"null")`并复制下来
*   如果要替换值，请将特殊值列 C 复制并粘贴回 A 列

![在此处输入图像描述](../Images/ca8be89aa88b9e88663991f2067ee77f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:48:12.917

我不确定您所说的“文件”是什么意思，但如果它只是一个一次性过程，您可能可以使用 MATCH 函数来执行此操作。否则，您还需要一些 VBA。

# objective-c - 在 IOS 上播放视频

> ID：12417825
> 
> 赞同：0
> 
> 时间：2012-09-14T03:43:49.093
> 
> 标签：objective-c, ios

我已经从

[http://mobile.tutsplus.com/tutorials/iphone/mediaplayer-framework_mpmovieplayercontroller_ios4/](http://mobile.tutsplus.com/tutorials/iphone/mediaplayer-framework_mpmovieplayercontroller_ios4/)

并且该应用程序运行良好，但是当我尝试通过更改以下代码来换出自己的视频时：

```
pathForResource:@"big-buck-bunny-clip" ofType:@"m4v" 
```

至

```
pathForResource:@"example" ofType:@"mp4" 
```

当我尝试播放视频时应用程序崩溃，并且我在输出中收到一条消息：

“2012-09-13 20:32:59.106 BigBuckBunny [1081:11f03] *** 由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'****-[NSURL initFileURLWithPath:]: nil string parameter' ** * First throw call stack: (0x1722022 0x10f6cd6 0x16caa48 0x16ca9b9 0x4e53b 0x4e4c5 0x2da4 0x1723e99 0x36d14e 0x36d0e6 0x413ade 0x413fa7 0x413266 0x3923c0 0x3925e6 0x378dc4 0x36c634 0x1e1aef5 0x16f6195 0x165aff2 0x16598da 0x1658d84 0x1658c9b 0x1e197d8 0x1e1988a 0x36a626 0x297d 0x28f5) terminate called抛出异常（lldb）“*

 *我在包含原始 big-buck-bunny-clip.m4v 文件的文件夹中有我的新视频文件，并将其放入项目中。我做错了什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:07:00.380

我设法通过转到 Xcode 中的文件并选中 Target Membership 下 BigBuckBunny 旁边的框来播放我自己的视频

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:49:18.943

检查文件退出和您传递的文件路径为零：

```
 NSString *filepath   =   [[NSBundle mainBundle] pathForResource:@"example" ofType:@"mp4"];  
 if([[NSFileManager defaultManager] fileExitsAtPath:filepath])
 {
   NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];   
   MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];  
   [self.view addSubview:moviePlayerController.view];  
   moviePlayerController.fullscreen = YES;  
   [moviePlayerController play];    
 }
 else
 {
    NSLog(@"File not exists");
 } 
```*

# asp.net - RAZOR 如何从单选按钮列表中获取值

> ID：12417826
> 
> 赞同：0
> 
> 时间：2012-09-14T03:43:47.890
> 
> 标签：asp.net, razor

我是 RAZOR 的新手，对这项新技术非常感兴趣。

现在我有 2 个 RasdioButtons：月度会员和年费会员

我想从他们那里得到选定的值。

任何人都可以对此有所了解吗？

如果您能提供我一个小的演示代码，我将不胜感激。

我期待着您的回复。

这是剃刀代码。

```
@{
    var name = Request["name"];
    var dobDay = Request["dobDT"];
    var dobMonth = Request["dobMT"];
    var dobYear = Request["dobYR"];
    var gender = Request["gender"];
    var address = Request["address"];
    var city = Request["city"];
    var state = Request["state"];
    var country = Request["country"];

    @*Login details*@
    var email = Request["email"];
    var email2 = Request["email-2"];
    var pwd = Request["pass"];
    var pwd1 = Request["pass-2"];

    @*Membership Plan*@

    bool monthlyPlan = false;

    if(Request[""])

} 
```

这是html代码

```
<table cellpadding="0" cellspacing="0">
                                <tr>
                                    <td width="40" align="center">
                                        <input type="radio" name="memType" value="m" />
                                    </td>
                                    <td width="200">
                                        <b>Monthly</b> ( $9.95 per month )
                                    </td>
                                    <td width="40" align="center">
                                        <input type="radio" name="memType" value="y" />
                                    </td>
                                    <td>
                                        <b>Yearly</b> ( $95.50 per year )
                                    </td>
                        </td>
                    </tr>
                </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:23:19.120

请求对象使用 html 表单元素的“名称”属性。这对于几乎所有 Web 技术都是相同的，无论是 PHP、经典 ASP、ASP.net WebForms、ASP.net MVC 等。

在您的情况下`Request["memType"]`，应返回所选单选按钮的值。

在 CheckBoxes 或 Multiple Select 列表的情况下，将返回一个逗号分隔的选定值字符串。

# css - 哪些透明/不透明背景代码与所有浏览器兼容？

> ID：12417829
> 
> 赞同：0
> 
> 时间：2012-09-14T03:44:19.333
> 
> 标签：css, cross-browser, opacity, background-color

我正在创建一个包含输入字段元素的网页。输入字段元素位于背景为蓝色的 div 中。我希望输入字段是白色的，但也是透明的，以便 div 中的蓝色背景的一部分可见。我也想在该字段中使用白色文本。如何在 CSS 中对此进行编码以使其与所有浏览器兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:21:35.447

我并不完全清楚您要支持哪些浏览器-如果您只是指所有*现代*浏览器，那么您就不会特别担心兼容性-但无论如何：

`background-color: transparent;`应该可以在任何地方工作。

如果您希望整个元素部分不透明，那么您可以将`filter`其用于 IE8 和其他所有内容，如此[处](http://css-tricks.com/css-transparency-settings-for-all-broswers/)`opacity`所示。

如果您希望能够将`background-color`（或任何其他颜色）设置为部分不透明的颜色，您可以使用 rgba，例如：`color: rgba(255,0,0,0.5);`. 更多信息+支持表在[这里](http://css-tricks.com/rgba-browser-support/)。剧透：它在 IE8 中不起作用。

# android - 从android发送媒体文件

> ID：12417830
> 
> 赞同：0
> 
> 时间：2012-09-14T03:44:22.470
> 
> 标签：android, media

我看到这个教程[简单的聊天服务器客户端](http://towhidz.wordpress.com/2012/03/03/simple-chat-applicationclient-server-in-android/)。本教程展示了如何在 android 和服务器之间进行简单的编程聊天。

但我想知道这个聊天是否可以发送 .mp4 或 .mp3 之类的媒体文件？如果是这样，任何人都可以给我一些建议吗？或者，如果您对此类教程有最佳参考，也许会提供很大帮助。

将媒体首选视频（.3gp/.mp4/ 等）从 android 发送到服务器的任何相关参考都非常有帮助。感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:58:36.687

可能，您可以修改该客户端，使其以 InputStream 的形式打开一个文件，然后从该 InputStream 读取并通过与当前相同的套接字发送它读取的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:50:21.327

首先需要你的文件路径和文件名来发送它所以更多的文件发送你需要uri列表

```
ArrayList<Uri> imageUris = new ArrayList<Uri>(); 
```

现在填写清单

```
for (int i = 0; i < checkeditem.size(); i++) {
    File file = new File(path + "/" + checkeditem.get(i));          
    imageUris.add(Uri.fromFile(file));
} 
```

并使用带有归档 uri 列表的 Intent，您可以使用蓝牙或更多选项发送媒体文件

```
Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);
shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM,imageUris);             
// shareIntent.setType("application/bluetooth");
shareIntent.setType("*/*");
startActivity(Intent.createChooser(shareIntent, "Share with")); 
```

# css - 如何在另一个函数中使用 calc()

> ID：12417831
> 
> 赞同：15
> 
> 时间：2012-09-14T03:44:25.440
> 
> 标签：css, transform, css-calc

是否可以`calc()`在 CSS 函数内部使用`transform`or `translate`？我似乎无法让它工作。这是一个演示，所以你们可以玩：

[http://jsfiddle.net/qdJwY/1/](http://jsfiddle.net/qdJwY/1/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T04:19:02.453

您可以`calc()`在任何可以在 CSS 中使用基于长度的值的地方使用。您提供的示例确实有效，但实际上加起来为 0。这是一个稍作改动的演示来说明：http: [//jsfiddle.net/joshnh/6ydR3/](http://jsfiddle.net/joshnh/6ydR3/)

另外，请确保最后列出未加前缀的版本。

在转换中的 calc() 函数中将百分比与其他值类型混合似乎在 Chrome 中根本不起作用。我会将此报告为错误。

更新：这已在此处报告为错误：[https ://code.google.com/p/chromium/issues/detail?id=150054](https://code.google.com/p/chromium/issues/detail?id=150054)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T03:58:53.910

它有效：http: [//jsfiddle.net/qdJwY/2/](http://jsfiddle.net/qdJwY/2/)

（编辑：仅在 Firefox 中测试）

在您的示例中，恰好发生这种情况`100% = 200px`，因此您将其翻译为零。

# jenkins - 从 BUILD_LOG_REGEX 提取的行中删除“[string]”

> ID：12417832
> 
> 赞同：2
> 
> 时间：2012-09-14T03:44:25.933
> 
> 标签：jenkins

这是我的示例字符串。

[echo] SampleProject 解决方案目前有 85% 的代码覆盖率。

我想要的输出应该是。

SampleProject 解决方案目前具有 85% 的代码覆盖率。

顺便说一句，我解决了这个问题，因为我正在使用 Jenkins 浏览我的 CI 中的日志。

有什么帮助吗？谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T13:06:09.503

您可以尝试使用令牌中的`substText`参数`BUILD_LOG_REGEX`来替换与您的匹配的文本`regex`

> 新的可选参数： ${BUILD_LOG_REGEX, regex, linesBefore,linesAfter, maxMatches, showTruncatedLines, **substText** } 允许用文本替换匹配的正则表达式。这在文本包含对捕获组的引用（即 $1、$2 等）时特别有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-01T15:03:12.650

使用以下将从所有日志中删除前缀 [echo] ，

${BUILD_LOG_REGEX, regex="^\[echo] (.*)$", maxMatches=0, showTruncatedLines=false, substText="$1"}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T03:46:56.260

`\[[^\]]*\]`将匹配您要删除的位。只需使用字符串替换函数将该位替换为空字符串。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-14T03:50:52.543

Andrew 的想法是正确的，但是使用 Perl 风格的正则表达式语法（包括 Java 的内置正则表达式引擎），您可以做得更好：

```
str.replaceAll("\\[.*?\\]", ""); 
```

（即，使用匹配表达式`\[.*?\]`。`?`指定最小匹配：因此它将在第一次`]`找到时完成匹配。）

# javascript - 重新键入vars jquery javascript后替换跨度文本（错误）

> ID：12417836
> 
> 赞同：0
> 
> 时间：2012-09-14T03:45:46.740
> 
> 标签：javascript, jquery, forms

jquery 实时验证检查的最佳方法是什么？

Onsubmit 每个标签的跨度更改为例如：

输入您的电子邮件 | 提交 | 电子邮件不正确

但是当您再次更改值时，您必须再次提交以删除电子邮件不正确的消息。

所以我正在寻找“实时”错误处理或其他东西。考虑到我的代码，最好的方法是什么？

```
<script type="text/javascript">
    $(document).ready(function()
    {
        $('form #status').hide();
        $('#submit').click(function(e) {
            e.preventDefault();

            var valid = '';
            var required = 'is required';
            var name = $('form #name').val();
            var subject = $('form #subject').val();
            var email = $('form #email').val();
            var message = $('form #message').val();
            var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;

            //error checking
            if (name == '' || name.length <= 2)
            {
                valid = '<p>your name' + required + '</p>';
                $('form #nameInfo').text('Name can not contain 2 characters or less!');
            }

            if(!filter.test(email)){
                valid += '<p>Your email'+ required +'</p>';
                $('form #emailInfo').text('Email addres is not valid');
            }

            if (message == '' || message.length <= 5)
            {
                valid += '<p>A message' + required +'</p>';
                $('form #messageInfo').text('Message must be over 20 chars');
            }

            if (valid != '')
            {
                $('form #status').removeClass().addClass('error')
                        .html('<strong>Please correct errors belown </strong>' + valid).fadeIn('fast')
            }
            else
            {
                $('form #status').removeClass().addClass('processing').html('Processing...').fadeIn('fast');
                var formData = $('form').serialize();
                submitForm(formData);
            }

        });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:54:18.267

我不是 100% 确定我理解这个问题。您想`#emailInfo`在用户更正输入时重置文本吗？如果是这样，您可以使用`onchange`,`onkeypres`或`focus`事件：

```
$("#email").change(function(){
    $("#nameInfo").text("Enter your email");
}); 
```

更好的是，您可以在相应的字段`change`上而不是在 form上进行验证`submit`。

以下示例将验证按下的每个键上的电子邮件字段：

```
$("#email").keypress(function(){
    var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;
    var email = $('#email').val();

    if(!filter.test(email)){
        $('#emailInfo').text('Email addres is not valid');
    } else {
        $('#emailInfo').text('');
    }
}); 
```

您可以以类似的方式验证其他字段。或者你可以使用[jQuery Validation](http://docs.jquery.com/Plugins/Validation)插件。

# php - 在 PHP 中将 SWF 导出为图像/PDF

> ID：12417841
> 
> 赞同：0
> 
> 时间：2012-09-14T03:46:40.720
> 
> 标签：php, fusioncharts

我正在将 FusionCharts Free 用于页面，并且正在尝试将图形导出为图像或/和 PDF。试用版有这个选项，非常好用，免费版没有这个功能。制作图表的代码非常简单：

```
<?php
     echo renderChartHTML("FCF_Column3D.swf", "Data/Data.xml", "", "myFirst", 600, 300);
?> 
```

是否有任何库、脚本或其他东西可以将此代码导出为 PDF 或 JPG？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:03:37.640

这在 FusionCharts FREE 中不可用。

但是，商业版提供了很多选择。

1.  使用图表[自己的库](http://docs.fusioncharts.com/charts/contents/exporting-image/ECOverview.html)
2.  使用 ASP.NET Image Saver Assembly（目前无法获得此链接）
3.  使用[http://fcimg.org/](http://fcimg.org/)

# c# - 对象不能从 DBNull 转换为其他类型

> ID：12417843
> 
> 赞同：0
> 
> 时间：2012-09-14T03:46:47.607
> 
> 标签：c#, asp.net

我有一个像这样的插入存储过程

```
 if exists(select EmailId from Profile_Master where EmailId=@EmailId)
set @result=-1
else
begin
set @result=0

 insert into Profile_Master(FirstName,LastName,Dob,Gender,MobileNo,Country,State,EmailId,Password)
 values 
(@FirstName,@LastName,@Dob,@Gender,@MobileNo,@Country,@State,@EmailId,@Password)
set @id=SCOPE_IDENTITY()
return
end 

 pid = cmd1.Parameters.Add("@id", SqlDbType.Int);
            pid.Direction = ParameterDirection.Output;
            cmd1.ExecuteNonQuery();
            int res = Convert.ToInt32(pid.Value); 
```

我正在捕捉最后插入的记录的值，但我收到一个错误，例如

对象不能从 DBNull 转换为其他类型。如何捕获最后插入的记录的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:52:09.513

在尝试转换值之前进行空检查。

```
if( pid.Value is DBNull )
{
    // Do alternative route.
}
else
{
    int res = Convert.ToInt32(pid.Value);
} 
```

或者：

```
if( ! pid.Value is DBNull )
{
    int res = Convert.ToInt32(pid.Value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:49:09.453

好吧，显然我们可以假设`pid.Value`等于`DBNull.Value`并且不能转换为类型`int`

您需要检查 sp 做了什么以及它从数据库返回了什么。

# c - 结构的 Malloc 问题

> ID：12417855
> 
> 赞同：0
> 
> 时间：2012-09-14T03:48:04.853
> 
> 标签：c, pointers, struct, malloc

我不断收到一小部分代码的分段错误，我不知道为什么，我正在使用 malloc 并且看不到任何原因，就像它到达数据部分时一样，它的崩溃。数据是：

```
listNode* node = (listNode*)malloc(sizeof(listNode));    <-This is the Line
strcpy(node->entry, string); 
node->next = NULL; 
```

使用结构定义：

```
typedef struct
{
    char* entry;
    struct listNode* next;
}listNode; 
```

数据确实在某一点被释放，但它无法达到所述点。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T03:50:41.010

你确定你在`malloc`通话时崩溃了吗？您更有可能在`strcpy`. 事实上，`strcpy`在这种情况下，几乎*可以肯定*会导致不良行为，尽管准确地说行为是未定义的。

`malloc`只要你还没有填满你的堆，它就应该成功。但是，因为您调用`malloc`而不是调用，所以您`calloc`无法保证`node->entry`. C 标准没有定义在分配的内存中存储的内容`malloc`，因此`node->entry`充满了垃圾。通过尝试复制到错误的指针，您的应用程序会因尝试访问不正确的内存地址而崩溃。

Alexey Frunze 在修复空间上 100% 正确，`malloc`并更改`node->entry`为指向新分配的内存，*然后*复制`string`到`node->entry`. 正如我在[另一个 SO answer](https://stackoverflow.com/a/9815887/960195)中描述的那样，这避免了使用未初始化指针的未定义行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:51:43.533

您没有为`entry`指针分配内存。您正在尝试将您的复制`string`到未初始化的指针指定的虚假位置`entry`。你可以这样做：

```
node->entry = malloc(strlen(string) + 1);
strcpy(node->entry, string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T04:45:52.773

您没有为入口指针分配分配内存。就像分配结构只为 *entry 指针分配了 4 个字节，你应该这样做

listNode* 节点 = (listNode*)malloc(sizeof(listNode)); // 为结构体分配内存 node->entry = malloc(strlen(string) + 1);// 为字符串分配内存 strcpy(node->entry, string); //复制字符串

现在它会运行良好

# php - CHtml::resolveName() 不能通过引用传递参数 2

> ID：12417857
> 
> 赞同：1
> 
> 时间：2012-09-14T03:48:11.403
> 
> 标签：php, yii

使用时收到此错误消息`CHtml::resolveName`：无法通过引用传递参数 2。这是我的简单测试代码：

```
<?php 
class TestController extends CController {
    public function test() {
      var_dump(CHtml::resolveName($myModels, 'someAttribute');
      exit;
    }
} 
```

当我路由到此操作时，它总是会引发错误。但是，当我像这样更改代码时

```
<?php 
class TestController extends CController {
    public function valid($model, $attribute) {
        return CHtml::resolveName($model, $attribute);
    }

    public function test() {
        var_dump($this->valid);
        exit;
    }
} 
```

有用！我已经阅读了`CHtml::resoveName()`Yii 框架中方法的文档，它使用参数引用。但是我不知道为什么在使用第一个代码时会抛出错误，它实际上与第二个相同。你能帮我理解这种情况吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:41:04.640

我认为您缺少一个 var_dump 函数的右括号。

```
<?php 
class TestController extends CController {
    public function test() {
      var_dump(CHtml::resolveName($myModels, 'someAttribute'));
      exit;
    }
}
?> 
```

还有一件事，您没有`CHtml::resolveName`正确使用该功能。它不传递变量名，传递它的引用。 [在这里检查](http://www.yiiframework.com/doc/api/1.1/CHtml#resolveName-detail)

```
<?php 
    class TestController extends CController {
        public function test() {
          $attribute = 'someAttribute';
          var_dump(CHtml::resolveName($myModels, &$attribute));
          exit;
        }
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T02:54:43.030

只需像这样重写：

```
CHtml::resolveName($myModels, $dummy='someAttribute') 
```

这是因为属性名称作为变量引用传递给函数调用。$dummy='someAttribute' 创建临时变量 $dummy 来传递它。

# plone - 重命名克隆“成员”ID

> ID：12417860
> 
> 赞同：4
> 
> 时间：2012-09-14T03:48:23.013
> 
> 标签：plone

是否可以重命名 Plone 的“成员”文件夹的 ID？我想改用“帐户”一词。我尝试通过文件夹列表和重命名来做到这一点。它可以工作，但用户菜单中的“我的文件夹”不再出现。为其设置的条件现在返回 false。我可以重命名标题。但是，该 URL 仍会显示 ../Members/..

是否可以毫无问题地更改其 id 或者这是硬编码的？我期望我可以更改属性的值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T04:00:51.023

这个有可能。您需要在 ZMI 中对 portal_membership 工具进行更改。它期望该文件夹被称为“成员”。在下面的屏幕截图中，我自定义了我的系统以查找名为“Persons”的文件夹。

![portal_membership 工具的视图](../Images/f911f1074f06d6b38bf7c05f51912799.png)

# tinymce - 使用隐藏时 TinyMCE 内容未更新

> ID：12417862
> 
> 赞同：1
> 
> 时间：2012-09-14T03:48:44.587
> 
> 标签：tinymce, textarea, hide

首先，这与 tinyMCE.triggerSave() 无关；

有时在编辑内容时，我会使用以下内容切换到 textarea 模式

```
$('#id').tinymce().hide(); // from the official example 
```

它暂时隐藏了富编辑器，因此我可以看到 HTML 代码。

但是，如果我在编辑后立即提交表单而不切换回富编辑器 [ using .show() ]，则内容将不会更新。

我的问题是如何将 textarea 的内容保存到 iframe？

1.  请不要向我提供“使用代码窗口”选项，我在 TinyMCE 之外有一个自定义的显示/隐藏按钮。

2.  通过 mceAddControl/mceRemoveControl 切换将解决问题。但是在提交的时候，textarea里面的内容是不会被格式化的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:34:42.143

好吧，我只是想出了一个更新内容的方法

```
$('#id').blur(function() {
    $('#id').html(document.getElementById('id').value);
}); 
```

**更新**

对于所有情况，这可能会更好

```
$('textarea.tinymce').blur(function() {
    var this_id = $(this).attr('id');
    $('#' + this_id).html(document.getElementById(this_id).value);
}); 
```

任何其他解决方案都非常感谢。

# ms-access - 使用 VBA 从主窗体设置子窗体上的窗体属性

> ID：12417866
> 
> 赞同：1
> 
> 时间：2012-09-14T03:49:14.260
> 
> 标签：ms-access, vba

在 Access 2007（或 2010）中，我需要使用 VBA 从主窗体设置嵌入在第一个子窗体中的子窗体的属性。为了清楚我说的是哪个表单，我将这个表单称为“subSubform”，就像我在代码中所做的那样（嗯，subSubform 实际上是子子表单控件的名称）。

当表单加载时，我的第一个子表单上有一个子表单控件，它是空白的（不包含表单源对象）。如果需要，我会使用有效表单的名称以及 LinkMasterFields 和 LinkChildFields 属性填写此控件的 SourceObject 属性。这一切似乎都很好，因为我确实得到了一个可扩展的加号，否则就不会出现。

接下来，我尝试为 subSubform 设置 RecordSource，但出现错误：

**2455 您输入的表达式对属性 Form/Report 的引用无效。**

这是我正在使用的代码：

```
Me!subform1.Form!subSubform.Form.RecordSource = sSubformSQL
'and I've tried this with the same bad results
Me.subform1.Form.subSubform.Form.RecordSource = sSubformSQL
'and this too
Forms("frmQuery").subform1.Form.subSubform!Form.RecordSource = sSubformSQL

'And I've tried this. It fails too, on the last line with the same error:
    Dim frm As Form
    Set frm = Forms("frmQuery").subform1.Form
    Dim frm2 As Form
    Set frm2 = frm.subSubform.Form 
```

我尝试设置一个计时器并等待一秒钟来运行上面的代码，以防表单加载需要一些时间。但这没有什么区别。

我尝试从第一个子窗体而不是主窗体运行代码，但这也无济于事。仍然失败并出现相同的错误。

FWIW，我的子表单和我的子子表单都是数据表视图。我认为这与我在这里尝试做的事情没有什么不同（尽管我很清楚所涉及的性能问题，所以不要对我尖叫）。

我承认这可能是一个非常奇怪的要求。但我正在创建一个需要这个的动态查询界面。

任何想法如何在 subSubform 上设置表单属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:55:35.107

问题不在于您设置了子表单的属性。的格式：

me.subform1.form.subform2.form.RecordSource = sql

s+应该工作得很好。

问题是您试图在 continue for （或数据表）的一侧嵌套一个 continue 表单（或数据表）。这是不允许的。

解决方法是简单地将两个子表单并排放置，不要嵌套。

您仍然可以使用链接主设置来获取要遵循的第二个（子子）表单。

在子 1 的链接子/主设置中，您放置：

linkChildFields main_id（该子表单中用于关联回父表的字段名称） LinkMasterFields [ID]

在您放置的子 2 表单的链接子/主设置中

linkChildFields main_id（该子表单中用于关联回父表的字段名称） LinkMasterFields [child1].[form].[ID]（“masterForm”是您使用的控件的名称持有主表格。

因此，您可以对多对多进行建模，但不能嵌套，但如上所述，无论如何都会为您提供相同的结果。所以一个表格看起来像这样：

![在此处输入图像描述](../Images/e4f921d7de241b9af5714129b5bf8bda.png)

您也很可能在左侧（子 1）的当前事件中，希望在导航时重新查询右侧 - 因为它通常不会为您自动更新。

所以：

```
me.parent.Child2.Requery 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T19:46:07.747

通常，`Form`子窗体控件的属性只有在显示子窗体后才会获得“有效引用”。因此，如果您想像`subSubform.Form`在

> Me.subform1.Form.subSubform.Form.RecordSource = ...

您必须确保在执行访问之前 subSubform 是可见的。最简单的方法是让 subSubform 在加载时自行设置它的源（在它的 Form_Load 子中）。

有关更多详细信息和解释，请参阅我在[Microsoft Access 运行时错误 2455 中尝试从](https://stackoverflow.com/questions/10401501/microsoft-access-runtime-error-2455-when-trying-to-access-grandchildren-forms-fr)问题相同的子表单访问孙子表单时的回答。

# javascript - 选择要循环的数组

> ID：12417868
> 
> 赞同：0
> 
> 时间：2012-09-14T03:49:34.903
> 
> 标签：javascript, html, arrays, loops

我正在创建一个 javascript 函数来`<table>`为当前月份的日历（在 a 中）构建 html。该函数的参数之一是是写出星期几还是使用它们的首字母。全名和首字母都包含在数组中。该函数将遍历其中一个数组以构建包含星期几的表格单元格。选择要循环的数组的最佳方法是什么？或者我应该以完全不同的方式构建这段代码？

代码来说明我的问题：

```
buildCalendar(useFullNames){
    var fullNames = ['Sunday', 'Monday'], // etc.
        initials = ['S', 'M'],
        calString = '<tr>';

    if(useFullNames) {
        // use fullNames array in the loop 
    }     
    else {   
        // use initials array in loop
    }

    for(i=0; i<7; i++)
    {
        // Need to loop over the array picked above
        calString += '<td>' + relevantArray[i] + '</td>';
    }

    calString += '</tr>';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T03:52:22.693

```
var relevantArray = useFullNames ? fullNames : initials; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T04:00:43.073

像这样的东西（伪代码）怎么样：

```
buildCalendar(dayOfWeekFormat){ //dayOfWeekFormat: "fullNames or "initials"
    var dayOfWeekFormat = { 
       fullNames: ['Sunday', ..., 'Saturday'],
       initials: ['S', ..., 'Sat']
    }
    var calString = '<tr>';

    for(i=0; i<7; i++)
    {
        // Need to loop over the array picked above
        calString += '<td>' + daysOfWeek[dayOfWeekFormat][i] + '</td>';
    }

    calString += '</tr>';
} 
```

`relevantArray`是一个糟糕的变量名。它不会告诉你任何关于它的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T03:52:19.113

好吧，就像你已经设置好了一样，设置`relevantArray`变量

```
buildCalendar(useFullNames){
    var fullNames = ['Sunday', 'Monday'], // etc.
        initials = ['S', 'M'],
        calString = '<tr>',
        relevantArray;

    if(useFullNames) {
        // use fullNames array in the loop 
        relevantArray = fullNames;
    }     
    else {   
        // use initials array in loop
        relevantArray = initials;
    }

    for(i=0; i<7; i++)
    {
        // Need to loop over the array picked above
        calString += '<td>' + relevantArray[i] + '</td>';
    }

    calString += '</tr>';
} 
```

# objective-c - 如何在 iOS 6 GM 中的标签栏应用程序中使旋转正常工作？

> ID：12417872
> 
> 赞同：3
> 
> 时间：2012-09-14T03:49:54.097
> 
> 标签：objective-c, ios, xcode, cocoa-touch

旋转在 iOS 5 上运行得很好，现在它根本不起作用。我进行了设置，以便当某个视图打开时在 Tab 1 上时，我的所有视图都保持纵向异常，然后用户可以旋转，它会显示一个覆盖流样式的视图。

我的设置是在运行时在 AppDelegate 中创建我的标签栏。然后我将其设置为主根视图：

```
self.window.rootViewController = self.tabBarController; 
```

但是我所有的视图，在所有选项卡上，现在无论如何都向左或向右旋转。而且我尝试添加新代码（来自论坛中的多个示例）但无济于事......我对所有内容都设置了断点，并且当我旋转手机时不会调用任何旋转代码。

每个 TabController 在其中都有一个 NavigationController，然后在其中包含我的所有 UI 的主视图。

关于如何在 iOS 6 中正确进行旋转的任何想法或指示？非常令人沮丧，因为这是我发货前需要解决的最后一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T05:26:53.883

这将使您启动并运行。最终你真的应该继承这些 UIKit 类而不是使用类别，但不幸的是，这不适用于尚未为 iOS 6 修复的第三方库。这些类别应该适用于所有事情，而不需要你在其他人的代码中捣乱。

对于不涉及子类化（或编写类别）的问题，`UITabBarController`我还没有看到任何解决方案。`UINavigationController`不过，我希望存在一个。

***确保在 Prefix.pch 文件的顶部***导入三个 .h 文件（如果您选择将它们全部添加到单个文件中，则导入一个）。您必须确保尽快加载此代码！

**UITabBarController+LegacyRotation.h**

```
#import <UIKit/UIKit.h>

@interface UITabBarController (LegacyRotation)

@end 
```

**UITabBarController+LegacyRotation.m**

```
#import "UITabBarController+LegacyRotation.h"

@implementation UITabBarController (LegacyRotation)

- (NSUInteger)supportedInterfaceOrientations
{
    return [self.selectedViewController supportedInterfaceOrientations];
}

- (BOOL)shouldAutorotate
{
    return [self.selectedViewController shouldAutorotate];
}

@end 
```

**UINavigationController+LegacyRotation.h**

```
#import <UIKit/UIKit.h>

@interface UINavigationController (LegacyRotation)

@end 
```

**UINavigationController+LegacyRotation.m**

```
#import "UINavigationController+LegacyRotation.h"

@implementation UINavigationController (LegacyRotation)

- (NSUInteger)supportedInterfaceOrientations
{
    return [self.topViewController supportedInterfaceOrientations];
}

- (BOOL)shouldAutorotate
{
    return [self.topViewController shouldAutorotate];
}

@end 
```

**UIViewController+LegacyRotation.h**

```
#import <UIKit/UIKit.h>

@interface UIViewController (LegacyRotation)

@end 
```

**UIViewController+LegacyRotation.m**

```
#import "UIViewController+LegacyRotation.h"

@implementation UIViewController (LegacyRotation)

- (NSUInteger)supportedInterfaceOrientations
{
    NSUInteger ret = 0;

    if ([self shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationPortrait]) {
        ret |= UIInterfaceOrientationMaskPortrait;
    }
    if ([self shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationPortraitUpsideDown]) {
        ret |= UIInterfaceOrientationMaskPortraitUpsideDown;
    }
    if ([self shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationLandscapeLeft]) {
        ret |= UIInterfaceOrientationMaskLandscapeLeft;
    }
    if ([self shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationLandscapeRight]) {
        ret |= UIInterfaceOrientationMaskLandscapeRight;
    }

    return ret;
}

- (BOOL)shouldAutorotate
{
    return YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:06:43.250

我只需要在 appDelegate 中添加以下方法，以便旋转到

在 iOS 6 上工作。

-（NSUInteger）应用程序：（UIApplication *）应用程序支持的InterfaceOrientationsForWindow：

(UIWindow *)窗口{

```
 return UIInterfaceOrientationMaskAll; 
```

}

至于 ios 4 & 5，我们仍然必须使用：

(BOOL) 应该AutorotateToInterfaceOrientation：

```
 (UIInterfaceOrientation)interfaceOrientation in the specific view controller 
```

# java - spring和hibernate集成类未发现异常

> ID：12417875
> 
> 赞同：1
> 
> 时间：2012-09-14T03:50:20.713
> 
> 标签：java, spring, hibernate

我是 spring 新手，并试图用 spring 进行休眠工作。我尝试了几个小时来完成这项工作，但每次我得到以下类时都没有发现异常。

```
> Exception in thread "main"
> org.springframework.beans.factory.CannotLoadBeanClassException: Cannot
> find class
> [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean]
> for bean with name 'sessionFactory' defined in class path resource
> [mad/springnhibernate/model/spring.xml]; nested exception is
> java.lang.ClassNotFoundException:
> org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean
>   at
> org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262)
>   at
> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
>   at
> org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331) 
```

以下是我的 spring.xml 文件。你能解释一下这有什么问题吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="mad.springnhibernate"/>
    <!-- Initialization for data source -->
    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/springnhibernate" />
        <property name="username" value="root" />
        <property name="password" value="pass" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="mad.springnhibernate.model" />
        <property name="hibernateProperties">
            <props>
                <prop key="dialect">org.hibernate.dialect.MySQLDialect</prop>
            </props>
        </property>
    </bean>

</beans> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:09:04.367

我认为您缺少 .jar 文件`org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean`。您应该包括其中一个罐子。找到 [http://www.jarfinder.com/index.php/java/info/org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean](http://www.jarfinder.com/index.php/java/info/org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean)

# xml - XML ArrayCollection 应用程序存储目录

> ID：12417878
> 
> 赞同：0
> 
> 时间：2012-09-14T03:50:57.347
> 
> 标签：xml, apache-flex, actionscript, adobe, arraycollection

我有一个位于 applicationStorageDirectory 中的 XML 文件，我需要将内容加载到 ArrayCollection 中。

XML 看起来像（见下文），我可以对其进行读写，但我需要将数据粘贴到 ArrayCollection 中，以便将其加载到数据网格中。

```
<?xml version="1.0" encoding="utf-8"?>
<item>
 <sort>2012/10/31PM0000</sort>
 <date>Wed Oct 31 2012</date>
 <event>Halloween</event>
 <time>12:00 PM</time>
</item>
<item>
  <sort>2012/09/13AM0000</sort>
  <date>Thu Sep 13 2012</date>
  <event>Enter Details</event>
  <time>12:00 AM</time>
</item> 
```

我发现我可以在 HTTP 服务中使用 url="app-storage:/reminder.xml" 并且它可以与 Air 一起使用，不知道关于 android 应用程序，将不得不拭目以待。

```
<s:HTTPService id="reminderXML" url="app-storage:/reminder.xml" result="reminderDataHandler(event)" fault="faultHandler(event);"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:08:09.843

您可以尝试以下实用程序，它将您的 XML/XMLList 转换为 ICollectionView。您可以使用它来绑定到数据网格。

```
 public static function toCollection( value:Object ):ICollectionView
    {
        var collection:ICollectionView;

        collection = null;
        if (value is Array)
        {
            collection = new ArrayCollection(value as Array);
        }
        else if (value is ICollectionView)
        {
            collection = ICollectionView(value);
        }
        else if (value is IList)
        {
            collection = new ListCollectionView(IList(value));
        }
        else if (value is XMLList)
        {
            collection = new XMLListCollection(value as XMLList);
        }
        else if (value is XML)
        {
            var xl:XMLList = new XMLList();
            xl += value;
            collection = new XMLListCollection(xl);
        }
        else
        {
            // convert it to an array containing this one item
            var tmp:Array = [];
            if (value != null)
                tmp.push(value);
            collection = new ArrayCollection(tmp);
        }

        return collection;
    } 
```

# python - Python 在“import pdb”上崩溃

> ID：12417879
> 
> 赞同：2
> 
> 时间：2012-09-14T03:51:16.910
> 
> 标签：python, debugging, exception, pdb

我正在调试一个 python 脚本。我有一个部分抛出 IndexErrors，我想使用 pdb 找出原因。这是我的脚本：

```
try:
    # do stuff that throws an IndexError
except IndexError:
    import pdb; pdb.set_trace() 
```

当我运行脚本时，它在行上崩溃`import pdb; pdb.set_trace()`。我得到的回溯：

```
Traceback (most recent call last):
File "myfile.py", line 113, in <module>
import pdb; pdb.set_trace()
File "/usr/lib/python2.7/pdb.py", line 10, in <module>
import bdb
File "/usr/lib/python2.7/bdb.py", line 3, in <module>
import fnmatch
ImportError: No module named fnmatch 
```

`import pdb`, `import bdb`, 并且`import fnamatch`在 python 解释器中都可以正常工作。我什至不知道从哪里开始。

**2016 年 6 月 8 日更新**：这个问题最近再次引起了我的注意。恐怕我根本不记得这个，决议是什么，甚至我正在做什么。我不知道为什么我忽略了回复（好问题！）评论。在这一点上，我认为它已经解决了 - 我在过去 4 年中成功使用了 pdb :D

我现在可以说的是：我很可能使用的是 Ubuntu（可能是 12.04）。

我可能一直在使用 virtualenv。或者至少认为我使用的是 virtualenv。我希望堆栈跟踪引用类似的东西`/home/foo/.virtualenvs/bar/...`，而不是`/usr/lib/python2.7`。

这可能是一个范围，但我记得 pip 在默认情况下并不总是使用`--no-site-packages`。也许系统 python 上安装的某些东西与我的 virtualenv 中的某些东西冲突。某处的绝对路径，或以某种方式与 PYTHONPATH 混淆？

这开始成为一个范围，但我无法想象我自己陷入了什么样的场景。这至少在我看来是合理的：

*   我在系统 python 中安装了包 X。
*   我创建了一个*没有*--no-site-packages 的 virtualenv，从而将 X 拉入了 virtualenv。
*   我在 virtualenv 中安装了 Y，它与 X 冲突。
*   我在终端 A 的 virtualenv 中运行我的脚本，但遇到了错误。
*   我打开终端 B，忘记激活 virtualenv，因此最终使用了不同的解释器（此解释器归功于 @DSM）。
*   没有 virtualenv（和假设的冲突），`import pdb`工作正常。

很抱歉，这个问题似乎引起了持续的兴趣，我只有预感和猜测。如果您今天遇到这种情况，我的建议是检查堆栈跟踪位置是否符合您的预期。如果是这种情况，请检查那里引用的任何文件是否确实存在，并且看起来完好无损。

除此之外，我会尝试一个新的 virtualenv。

如果您遇到此问题并找到解决方法，请发布！我很乐意接受你的回答。

# c# - 创建简单的 Ping

> ID：12417880
> 
> 赞同：1
> 
> 时间：2012-09-14T03:51:24.043
> 
> 标签：c#, ping

如何创建一个简单的 ping 到网站并获取是否在线？

前任：

```
var test = new ping()
try{
test.ping(www.google.com)
messagebox.show("your internet connection is ok");
}
catch
{
messagebox.show("you are not connected");
} 
```

有可能的？我在网上搜索过但一无所获

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T03:52:57.953

使用[`WebRequest`](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)该类发出 HTTP 请求并查看它是否成功。

请注意，如果您正在测试网站 (HTTP)，“ping”实际上是一个 ICMP 功能，而不是您正在寻找的功能。如果你真的*想*看看你是否有连接，那么 ping 将起作用，并且[`Ping`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx)类，正如[squiguy 所](https://stackoverflow.com/users/1114966/squiguy)提到的。

# grails - GORM级联删除

> ID：12417881
> 
> 赞同：0
> 
> 时间：2012-09-14T03:51:28.913
> 
> 标签：grails, grails-orm, cascade

我有三个领域模型`Type1`，`Type2`并`Details`遵循以下关系：

```
class Type1 {
  static hasMany = [detail: Detail]
}
class Type2 {
  static hasMany = [detail: Detail]
}
class Detail {
  Type1 type1
  Type2 type2
  static belongsTo = [Type1, Type2]
  static constraints = {
    type1(nullable:true)
    type2(nullable:true)
  }
} 
```

问题是我无法`Type1.detail`在`Type2.detail`任何时候`Type1`被转换为`Type2`（*注意：Type1 和 Type2 只是一个孩子`java.lang.Object`*）。换句话说（在控制器中）：

```
Type1 type1 = Type1.get(params.id)
List type1Details = Detail.findAllByType1(type1)
type1.detail.clear()

Type2 type2 = new Type2()
// transfer other properties of type1 to type2
type1Details.each { type2.addToDetail(it) }

if(type2.save(flush:true) {
  type1.save(flush:true)
  type1.delete(flush:true)
} 
```

问题是，只有更新`type1Details`，我们如何设置`type1Details*.type1 = null`和`type1Details*.type2 = type2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:18:36.530

在尝试了关于如何解决这个问题的所有可能的指令序列之后，我最终得到了这个可行的解决方案。从上面的问题中，我删除了所有`Details`相关的，`Type1`因此删除了`detail`表上与`Type1.detail`.

```
Type1 type1 = Type1.get(params.id)
Type2 type2 = new Type2()

// transfer other properties of type1 to type2
type1.detail.each {
  Detail element = (Detail) it
    element.type1 = null
    element.type2 = type2
  }
type1.detail.clear()            
if(type2.save(flush:true)) {
  type1.delete(flush:true)
} 
```

从上面的代码中，很清楚它是如何完成的。我知道这不是最好的解决方案，但我仍然可以接受更好的解决方案。

# objective-c - 从您的应用程序内部调用地图以获取路线 - iOS5 iOS6

> ID：12417883
> 
> 赞同：8
> 
> 时间：2012-09-14T03:51:36.543
> 
> 标签：objective-c, ios5, mapkit, ios6, ios6-maps

这是一个奇怪的问题：我的应用程序应该能够调用 iOS 中的内置地图（5.1 和 6）。事实证明，它在 iOS6 下工作得很好，但在 iOS5.1 下却不行。调用 iOS6 中的地图并跟踪从 saddr 到 daddr 的方向，但是当我在 iOS5 中时，地图应用程序被调用，但只有一个 pin 放在 daddr 上。由于某些未知原因，初始坐标 (saddr) 没有显示，也没有跟踪方向。

这是我的代码：

```
addr = [NSString stringWithFormat: @"maps://saddr=%f,%f&daddr=%f,%f", newLocation.coordinate.latitude, newLocation.coordinate.longitude, oldLatitude, oldLongitude];
NSURL *url = [NSURL URLWithString:addr];
[[UIApplication sharedApplication] openURL:url]; 
```

我尝试将 URL 更改为“http://maps.google.com/something”，但它调用 Safari 而不是内置的地图应用程序。我注意到变量正在正确地传递给 URL。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-14T21:57:57.127

我遇到了类似的问题，我不得不创建一些有条件的操作系统代码来处理谷歌地图应用程序已被删除的事实。来自新的[MKMapItem 参考](https://developer.apple.com/library/prerelease/ios/#documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html#//apple_ref/occ/clm/MKMapItem/openMapsWithItems:launchOptions:)

```
//first create latitude longitude object
CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(latitude,longitude);

//create MKMapItem out of coordinates
MKPlacemark* placeMark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
MKMapItem* destination =  [[MKMapItem alloc] initWithPlacemark:placeMark];

if([destination respondsToSelector:@selector(openInMapsWithLaunchOptions:)])
{
    //using iOS6 native maps app
    [destination openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving}];        
} 
else
{
    //using iOS 5 which has the Google Maps application
    NSString* url = [NSString stringWithFormat: @"http://maps.google.com/maps?saddr=Current+Location&daddr=%f,%f", latitude, longitude];
    [[UIApplication sharedApplication] openURL: [NSURL URLWithString: url]];
}

[placeMark release];
[destination release]; 
```

获取步行路线：

1.  对于 iOS 6 地图 - 您可以设置`MKLaunchOptionsDirectionsModeWalking`而不是`MKLaunchOptionsDirectionsModeDriving`
2.  对于 Google 地图 - 添加`&dirflg=w`到 url。

我认为在 iOS6 中使用 openInMapsWithLaunchOptions 会更好，因为它可以让您完全控制地图应用程序的响应方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:38:26.790

您可以使用`MKPlacemark`和`MKMapItem`启动地图应用程序，同时在地图图钉上显示坐标*和*标题：

```
NSString *pinTitle;
CLLocationCoordinate2D coordinate;

MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:@{(id)kABPersonAddressStreetKey: pinTitle}];
MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];

if ([mapItem respondsToSelector:@selector(openInMapsWithLaunchOptions:)])
{
    [mapItem openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey: MKLaunchOptionsDirectionsModeDriving}];
}
else
{
    // Google Maps fallback
    NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps?daddr=%f,%f&saddr=Current+Location", locationItem.coordinate.latitude, locationItem.coordinate.longitude];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlString]];
} 
```

请注意，您需要链接`AddressBook.framework`并`#import <AddressBook/AddressBook.h>`在代码中添加某处以使用该`kABPersonAddressStreetKey`常量。

# ruby - 您如何有效地迭代两个 Enumerable 的合并？

> ID：12417892
> 
> 赞同：2
> 
> 时间：2012-09-14T03:53:11.983
> 
> 标签：ruby, arrays, performance

给定

```
a = nil # or [1,2]
b = [1,2] # or nil 
```

您能否在不分配中间体或创建大量样板代码的情况下迭代连接`a`和连接？`b`

```
# meaning do this much more efficiently
((a || []) + (b || [])).each do |thing|
  # more lines here 
  puts thing
end 
```

这有点丑：

```
l = lambda{|thing| do_my_thing }
a.each{|thing| l.call(thing)} if a
b.each{|thing| l.call(thing)} if b 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:01:59.577

好吧，如果您愿意创建一个容器（即使包含的元素很大，它也应该很便宜），您可以：

```
[a,b].compact.each do |e|
  e.each do
    # stuff
  end
end 
```

您确实必须创建一个容器数组，但由于您不必复制子数组的内容（而只是处理两个数组指针），因此它应该非常快并且在 GC 上并不可怕。

另一种解决方案可能只是创建一个方法：

```
def multi_each(*args,&block)
  args.each do |a|
    a.each(&block) if a
  end
end

multi_each(nil,[1],[2,3]) do |i|
  puts i 
end
# 1
# 2
# 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T06:12:05.290

如果您使用的是 1.9，我会使用多个 splats 的功能：

```
a = nil
b = [1, 2]
[*a, *b]
#=> [1, 2]

a = [3, 4]
b = nil
[*a, *b]
#=> [3, 4] 
```

所以`[*a, *b].each {}`看起来就像你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T04:25:49.430

通过将 lambda 作为块本身传递，可以使您拥有的内容更加简洁且不那么难看：

```
l = lambda { |thing| do_my_thing }
a.each(&l) if a
b.each(&l) if b 
```

# sql - 在 T-SQL 中使用条件

> ID：12417894
> 
> 赞同：1
> 
> 时间：2012-09-14T03:53:42.080
> 
> 标签：sql, tsql

好吧，不幸的是，我搜索了很多不同的地方，问起来可能更容易，

我必须选择一些数据，然后将工资设置为增加 10%，而我的标准在另一张表上，这是我的代码

```
 Select E.Lastname, E.Salary, J.EEO1Classification from Employee as E
 Join JobTitle as J
 on E.JobTitleID = J.JobTitleID 
 Update Employee
 set Salary = (Salary * .10) + Salary
 where [JobTitle.EEO1Classification] = 'Office/Clerical' 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:08:39.923

```
UPDATE Employee e
SET e.Salary = e.Salary * 1.1
WHERE e.JobTitleID IN 
( SELECT j.JobTitleID FROM JobTitle j 
        WHERE j.EEO1Classification = 'Office/Clerical'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:58:10.463

我认为这就是您可能想要实现的目标。基本上是`UPDATE`使用表`JOIN``JobTitle`

**MySQL**

```
UPDATE Employee E
INNER JOIN JobTitle as J
  ON E.JobTitleID = J.JobTitleID 
SET Salary = (Salary * .10) + Salary
WHERE [J.EEO1Classification] = 'Office/Clerical' 
```

**替代语法**

```
UPDATE
    e
SET
    Salary = (Salary * .10) + Salary
FROM
    Employee E
    JOIN
    JobTitle J ON E.JobTitleID = J.JobTitleID 
WHERE
    J.EEO1Classification = 'Office/Clerical' 
```

# mysql - 查询选择记录

> ID：12417896
> 
> 赞同：1
> 
> 时间：2012-09-14T03:54:41.430
> 
> 标签：mysql

表名 medcn_recrd

```
Name   Qty   Id 
a       12   asc
a       0    asdc
b       0    asfg
c       12   ascd
c       15   acs 
```

查询以选择 Select id where name has qty =0 and total qty of name > 0 在上面的示例中 asdc 被选中 id 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T03:57:44.240

像这样的东西怎么样

```
SELECT  *
FROM    TABLE t
WHERE   Qty = 0
AND     EXISTS  (
                    SELECT  Name
                    FROM    TABLE t1
                    WHERE   t1.Name = t.Name
                    GROUP BY Name
                    HAVING SUM(Qty) > 0
                ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:57:58.533

我会假设这是让你绊倒的部分：

```
SELECT t.Id
FROM theTable t
INNER JOIN
(
    SELECT Name
    FROM theTable
    GROUP BY Name
    HAVING SUM(Qty)>0
) sumN ON t.Name = sumN.Name
WHERE t.Qty = 0 
```

# php - 正则表达式挫败试图找到匹配模式的文件名

> ID：12417897
> 
> 赞同：0
> 
> 时间：2012-09-14T03:54:45.167
> 
> 标签：php, regex

我很讨厌正则表达式。我有一个 php 函数，它将读取我服务器上的文件名目录，我试图从一个特定的文件名中提取文件名数据，但失败得很惨。到目前为止，这是我所拥有的：

```
$file = 'VERSION_3.7.1b.txt';
$VersionNumber = preg_match('#^(VERSION_)[^\s]*\.\.[^\s]+(\.(txt))#', $file); 
```

我试图让 preg_match 仅对以“VERSION_”开头并以“.txt”结尾的文件返回 true。中间的东西可能是各种数字、字母、句号……这就是我想要返回的部分。所以在这种情况下，我希望 $VersionNumber 最终设置为 '3.7.1b'

其他会返回某些内容的文件名如下所示：

```
VERSION_3.txt  ->  3
VERSION_3.7.txt  ->  3.7
VERSION_3.7e.1.txt  ->  3.7e.1
VERSION_2012.09.13.3.7.1b.txt  ->  2012.09.13.3.7.1b
VERSION_3.7.20120913.txt  ->  3.7.20120913 
```

如果我很接近，任何正则表达式大师都可以向我解释吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:58:22.413

您还需要为 $matches 传递一个变量。

我简化了你的正则表达式。尝试这个：

```
$file = 'VERSION_3.7.1b.txt';
preg_match('/^VERSION_(.*?)\.txt/', $file, $matches);
echo $matches[1]; 
```

# java - ImageIcon 不在面板上绘制

> ID：12417901
> 
> 赞同：1
> 
> 时间：2012-09-14T03:55:24.443
> 
> 标签：java, swing, jpanel, jlabel, imageicon

我正在尝试通过paintComponent将ImageIcon添加到面板，但它不起作用。我尝试将其添加到的面板设置为 GridLayout。这可能是为什么？还是被画了？或者我的路径可能设置不正确......我从来没有

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class Frame implements MouseListener, KeyListener {

JFrame f = new JFrame();
JPanel p = new JPanel();

JPanel[][] panel = new JPanel[10][10];

int k = 1;
Color previous;

ImageIcon icon = new ImageIcon("/Users/Admin/Desktop/stickFigure.jpg");

static String title = "Grid World";

public Frame(String s) {
    f.setTitle(s);
    p.setLayout(new GridLayout(10, 10));
    for (int i = 0; i < 10; i++) {
        for (int j = 0; j < 10; j++) {
            panel[i][j] = new JPanel();
            p.add(panel[i][j], i, j);
            panel[i][j].addMouseListener(this);
            panel[i][j].setBackground(Color.WHITE);
        }
    }
    p.setSize(500, 500);
    f.add(p);
    f.setSize(490, 492);
    f.setVisible(true);
    f.setResizable(false);
    f.setDefaultCloseOperation(3);
    f.addKeyListener(this);
    f.setLocationRelativeTo(null);
}

public void paintComponent(Graphics g) {
    icon.paintIcon(f, g, 100, 100);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:20:37.120

您在一个不扩展 JPanel、JComponent 或任何类似对象的类中有一个 paintComponent 方法，因此它永远不会被调用并且没有任何用途。如果您希望paintComponent 按预期工作，它*必须*位于扩展JComponent 或其子类之一的类中，例如JPanel。然后你必须在你的 GUI 中使用那个 JPanel。请阅读[Swing 绘画教程](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)以了解如何正确执行此操作。

**编辑**
显示 ImageIcon 的另一种方法是简单地将其添加到 JLabel，然后在 Swing GUI 中显示 JLabel。

**编辑 2**
此外，即使您的类扩展了 JPanel，它仍然无法工作，因为您的图标从未添加到任何内容中。我还没有看到你正在做的图形——通过调用图标的`paintIcon(...)`方法。我不能说这是错的；只是我还没有看到这样做。

# python - 时间模块 - strptime Django 验证错误

> ID：12417908
> 
> 赞同：1
> 
> 时间：2012-09-14T03:56:47.727
> 
> 标签：python, django

我编写了一个函数来返回当前会计年度日期：

```
def get_fiscal_year(start_month=7):
    now = datetime.datetime.now()
    if now.month >= start_month:
        return [time.strptime(str(now.year) + '-07-01', '%Y-%m-%d'), time.strptime(str(now.year + 1) + '-06-30', '%Y-%m-%d')]
    return [time.strptime(str(now.year - 1) + '-07-01', '%Y-%m-%d'), time.strptime(str(now.year) + '-06-30', '%Y-%m-%d')] 
```

然后我在我的代码中使用它，如下所示：

```
 dates = get_fiscal_year()
    start_date = dates[0]
    end_date = dates[1]
    model = DevelopmentAssessment.objects.filter(status_id__in=[8, 7, 10], decision_date__range=[start_date, end_date]) 
```

但是它抛出了错误：

```
[u"'time.struct_time(tm_year=2012, tm_mon=7, tm_mday=1, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=6, tm_yday=183, tm_isdst=-1)' value has an invalid date format. It must be in YYYY-MM-DD format."] 
```

据我所知，它是那种格式，有什么想法吗？

干杯，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:11:47.023

从您的函数中，您在需要类型对象时`get_fiscal_year`返回对象的字典。`time.struct_time``__range()``date`

我建议更改您的函数以将`date`对象返回为

```
def get_fiscal_year(start_month=7):
now = datetime.datetime.now()
if now.month >= start_month:
    return [datetime.date(year=now.year, month=7, day=1), 
            datetime.date(year=now.year + 1, month=6, day=30)]
return [datetime.date(year=now.year-1, month=7, day=1), 
            datetime.date(year=now.year, month=6, day=30)] 
```

# asp.net - 如何按属性名称呈现模型属性的编辑器模板

> ID：12417909
> 
> 赞同：1
> 
> 时间：2012-09-14T03:56:59.590
> 
> 标签：asp.net, .net, asp.net-mvc

最终目标是为模型属性渲染一个编辑器模板，该模型属性仅在运行时才知道，不会从 ViewBag 中获取它的值。

`Html.Editor`如果属性名称匹配，将使用 ViewBag 值。我不想要这个，我讨厌这个“功能”。

我希望这是可能的：

```
var propName = "MyProperty";
var expression = GiveMeTheExpression();
@Html.EditorFor(expression,"MyEditorTemplate") 
```

如果不是这样，那么可以通过某种方式呈现编辑器模板，而不使用 viewbag 值而不是模型的值。如果我能以某种方式忽略 VIEWBAG 值，我完全可以这样做：

```
@Html.Editor(propName, other, arguments) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:27:25.807

您可能必须将 Html.Partial 与自定义 ViewDataDictionary 一起使用。

```
object knownAtRuntime = ViewBag.ObjectName; // Adapt to your solution
string templateName = String.Concat("EditorTemplates/", knownAtRuntime.GetType().Name);            

@Html.Partial(templateName, knownAtRuntime, new ViewDataDictionary(knownAtRuntime)); 
```

注意：我把这个例子简单地说明了核心概念，但如果你愿意，当然可以扩展它来阅读[UIHintAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.uihintattribute.aspx)等。

注意 2：您可能还希望将值从 Html.ViewData 复制到新的 ViewDataDictionary 以保持您的模型状态等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:40:58.423

**Shyju**考虑强类型对象，如果我理解正确，您需要类似：[asp.net mvc 3 和动态视图生成](http://forums.asp.net/post/4477175.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:27:01.010

我的解决方案是使用属性名称为字符串的 @Html.Editor() 方法，并使用在模型对象上不太可能找到的 ViewBag 键。

不理想，但应该很好用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T04:29:38.533

为什么不试试这个？

```
@Html.EditorFor(x=>x.SomePropertyName) 
```

假设`SomePropertyName`是您的模型的属性的名称，该名称是强类型到您的视图的。

# ruby-on-rails - rails 没有从正确的版本开始

> ID：12417911
> 
> 赞同：0
> 
> 时间：2012-09-14T03:57:10.983
> 
> 标签：ruby-on-rails, version

这一定是一个简单的问题，但我浏览这个论坛找不到答案。

当我检查 rails 版本时，它显示版本 3.2.8

```
user@domain.com [~/rails_apps]# rails -v
Rails 3.2.8
user@domain.com [~/rails_apps]# 
```

但是当我启动服务器时，它运行版本 2.3.11

```
user@domain.com [~/rails_apps/myapp]# script/server -p12011
=> Booting Mongrel
=> Rails 2.3.11 application starting on http://0.0.0.0:12011
/home3/user/rails_apps/myapp/config/environment.rb:45: warning: already initialized constant RAILS_ENV
NOTE: SourceIndex.new(hash) is deprecated; From /usr/lib64/ruby/gems/1.8/gems/rails-2.3.11/lib/rails/vendor_gem_source_index.rb:100:in `new'.
=> Call with -d to detach
=> Ctrl-C to shutdown server 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:16:26.797

尝试在您的 environment.rb 中执行以下操作

```
RAILS_GEM_VERSION = '3.2.8' unless defined? RAILS_GEM_VERSION 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:56:54.607

如果您的应用程序是 2.x rails 应用程序，您需要在升级到 3.x 之前完成一些更改

你可以看看 railscast [http://railscasts.com/?tag_id=27](http://railscasts.com/?tag_id=27)

另一方面，您可能希望使用 rvm rails 3.x 将您的 ruby​​ 升级到 1.9，从而更好地使用 ruby​​ 1.9

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:01:41.280

检查您的 Gemfile 并确保它指向 rails 3.2.8

然后运行`bundle`或`bundle update`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T05:02:17.747

我想知道这是否是一个旧应用程序，最初基于 rails 2.3.1 构建并定期原位升级。而不是`script/server`，尝试`rails server`

并确保您的 Gemfile 包含对 rails 3.2.8 的引用

# azure - Azure 中的虚拟机与真机不太一样

> ID：12417913
> 
> 赞同：0
> 
> 时间：2012-09-14T03:57:41.830
> 
> 标签：azure

希望有人能给我一个提示吗？

当尝试使用 Azure 虚拟机来托管数据库时，我在使用主机名：端口方式访问虚拟机时遇到问题，而不仅仅是主机名。例如，我得到了一个预览 scadcam.cloudapp.net:51165 虚拟机。当我尝试访问托管在其中的数据库时，我的应用程序认为我正在尝试通过此端口与数据库通信。有没有办法定义一个不显示端口的 url？像 scadcam.cloudapp.net/51165 这样的东西？我敢肯定有很多应用程序可能会遇到这种类型的问题，所以我想有办法做到吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:43:49.553

所以你想在虚拟机中托管一个数据库，所以我假设你正在尝试托管一个 SQL Server 实例。如果您想连接到主机名而不必指定端口，您应该首先执行以下操作：

*   在 SQL Server 安装中创建一个未命名的实例
*   将端口 1433 的端点添加到您的虚拟机（请参阅[此](https://www.windowsazure.com/en-us/manage/windows/how-to-guides/setup-endpoints/)链接）

此外，如果您使用 .NET 连接到该数据库，如果您不使用端口 1433，那么指定端口非常容易：

```
Data Source=myserver.cloudapp.net,4999;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
```

在您的问题中，我还看到您在谈论 scadcam.cloudapp.net: *51165*。请注意，51165 可能是用于远程桌面的随机端口，您不能使用同一端口连接到数据库。

# wpf - 如何通过 XAML 设置 WPF 超链接文本

> ID：12417915
> 
> 赞同：5
> 
> 时间：2012-09-14T03:57:47.600
> 
> 标签：wpf, xaml, mvvm

我有一个按钮，它的内容（文本）通过样式针对支持属性动态设置，如下所示。

```
<Button>
   <Button.Style>
      <Style>
         <Setter Property="Button.Content" Value="Advanced Search" />
         <Style.Triggers>
            <DataTrigger Binding="{Binding Path=IsAdvancedSearch}" Value="True">
               <Setter Property="Button.Content" Value="Standard Search" />
            </DataTrigger>
         </Style.Triggers>
      </Style>
   </Button.Style>
</Button> 
```

我需要更改此按钮以仅显示具有相同动态文本的超链接。像这样：

```
<Button>
   <Button.Template>
      <ControlTemplate>
         <TextBlock>
            <Hyperlink>
               Standard Search
            </Hyperlink>
         </TextBlock>
      </ControlTemplate>
   </Button.Template>
</Button> 
```

有没有办法通过样式动态设置超链接的文本（内联或其他标签）？

我无法通过 XAML 访问它。我让它与超链接内的文本块上的普通绑定一起工作，但这确实在视图模型上创建了一个冗余属性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T04:02:04.413

您可以在超链接中嵌入另一个 TextBlock 并绑定它：

```
<TextBlock>
    <Hyperlink>
        <TextBlock Text="{Binding LinkText}" />
    </Hyperlink>
</TextBlock> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T07:39:46.533

解决方案是简单地将样式应用于内部文本块。

```
 <Button x:Name="SwitchSearchType">
                <Button.Template>
                    <ControlTemplate>
                        <TextBlock>
                            <Hyperlink>
                                <Hyperlink.Inlines>
                                    <TextBlock>
                                        <TextBlock.Style>
                                            <Style>
                                                <Setter Property="TextBlock.Text" Value="Advanced Search" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Path=IsAdvancedSearch}" Value="True">
                                                        <Setter Property="TextBlock.Text" Value="Standard Search" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Hyperlink.Inlines>
                            </Hyperlink>
                        </TextBlock>
                    </ControlTemplate>
                </Button.Template>
            </Button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-13T15:56:26.577

```
 <GridViewColumn Header="{x:Static lang:Lang.wName}"  CellTemplate="{StaticResource Template_DebitAccount}" />

And use into skin file 

<DataTemplate x:Key="Template_DebitAccount">
    <Border Padding="3" >
        <TextBlock Text="{Binding wDebitAccountName}" Style="{StaticResource TextStyle_Path}">
            <TextBlock.InputBindings>
                <MouseBinding MouseAction="LeftClick" Command="{Binding DataContext.Base_PopPageCommand , RelativeSource={RelativeSource AncestorType=ListView}}" >
                    <MouseBinding.CommandParameter>
                        <MultiBinding Converter="{StaticResource MultiValueBindingConverter}">
                            <Binding Source="AgentSummary" />
                            <Binding Path="Link_Text"/>
                        </MultiBinding>
                    </MouseBinding.CommandParameter>
                </MouseBinding>
            </TextBlock.InputBindings>
        </TextBlock>
    </Border>
</DataTemplate> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-01-19T04:24:18.697

鉴于：

```
<Hyperlink x:Name="uriEmailAddress" Click="Hyperlink_Click"></Hyperlink> 
```

代码：

```
string e = Properties.Settings.Default.Email;
uriEmailAddress.NavigateUri = new Uri("mailto:" + e);
InlineCollection ic = uriEmailAddress.Inlines;
ic.Add(new Run(e)); 
```

# jquery - JQuery 验证插件

> ID：12417922
> 
> 赞同：1
> 
> 时间：2012-09-14T03:58:41.290
> 
> 标签：jquery, arrays, serialization, jquery-plugins, jquery-validate

我正在尝试使用验证插件，但我猜它设置不正确。这是我的标题：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
<title>Registration Page 2</title>
<script type="text/javascript">
$(document).ready(function(e) {
    $("#everything").submit( function() {
        var data = $("#everything").serializeArray();
        $("#everything").validate({
            alert(data);
        });
        return true;
    });

});
</script>
</head> 
```

但它没有识别 validate 方法，所以它没有使用它。我应该使用不同的来源吗？任何人都可以看到任何问题吗？

PS：无论如何要将表单中的所有数据序列化为数组，以便我可以像引用它一样

```
data["first_name"] 
```

我尝试了 serializeArray 并做了：

```
alert(data["first_name"]); 
```

但它说它是未定义的。有谁知道该怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:19:26.803

试试这个**[演示](http://jsfiddle.net/7z55n/)**

```
<form id="commentForm">
  <div><input type="text" name="a" id="a" class='required'/></div>
  <div><input type="text" name="b" id="b" class='required'/></div>
  <div>
    <input type="submit" name="g" value="Submit" id="everything" />
  </div>
</form>
$(document).ready(function(){
    $("#commentForm").validate({
     submitHandler: function(form) {
              var dataArray = $("#commentForm").serializeArray();
                 dataObj = {};
                $(dataArray).each(function(i, field){
                  dataObj[field.name] = field.value;
                }); 
                 alert(dataObj['a']);                
         }    
    });            
  });​ 
```

您可以使用 jquery .each 函数来迭代数组

**[。每个](http://api.jquery.com/jQuery.each/)**

> 通用迭代器函数，可用于无缝迭代对象和数组。

# java - A-Star Pathfinding 选择错误的航路点

> ID：12417925
> 
> 赞同：3
> 
> 时间：2012-09-14T03:59:01.917
> 
> 标签：java, algorithm, path-finding, a-star, heuristics

* * *

**已解决：对不起。我正在不正确地重建路径。我认为 closedSet 只有从开始到结束的所有航点，但它也有其他一些航点。我想念理解这个概念。现在它工作正常！**

* * *

我仍然在 A* 上遇到一些麻烦。

我的角色正在寻找他的路径，但有时，根据我在地图上单击的位置，算法会找到最短路径或路径，但有许多不应选择的节点。

我尝试遵循**Wikipedia**和**A* Pathfinding for Beginner 的**实现，但它们给了我相同的结果。我不知道是启发式还是算法本身，但有些不对劲。

这是单击两个不同节点的问题示例：http: [//i.imgur.com/gtgxi.jpg](http://i.imgur.com/gtgxi.jpg)

这是 Pathfind 类：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.TreeSet;

public class Pathfind {
public Pathfind(){

}

public ArrayList<Node> findPath(Node start, Node end, ArrayList<Node> nodes){

    ArrayList<Node> openSet = new ArrayList<Node>();
    ArrayList<Node> closedSet = new ArrayList<Node>();

    Node current;

    openSet.add(start);

    while(openSet.size() > 0){

        current = openSet.get(0);

        current.setH_cost(ManhattanDistance(current, end));

        if(start == end) return null;           
        else if(closedSet.contains(end)){
            System.out.println("Path found!");
            return closedSet;
        }

        openSet.remove(current);
        closedSet.add(current);

        for(Node n : current.getNeigbours()){           
            if(!closedSet.contains(n)){     
                if(!openSet.contains(n) || (n.getG_cost() < (current.getG_cost()+10))){ 
                    n.setParent(current);
                    n.setG_cost(current.getG_cost()+10);
                    n.setH_cost(ManhattanDistance(n, end));

                        if(!openSet.contains(n))
                            openSet.add(n);

                    Collections.sort(openSet);
                }
            }
        }
    }       

    return null;
}

private int ManhattanDistance(Node start, Node end){
    int cost = start.getPenalty();

    int fromX = start.x, fromY = start.y;
    int toX = end.x, toY = end.y;

    return cost * (Math.abs(fromX - toX) + Math.abs(fromY - toY));
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:45:57.347

我相信这个错误是有条件的：

```
if(n.getCost() < current.getCost()){ 
```

**`g(node)+h(node)`如果成本 ( ) 从当前下降，则不应阻止前进。**看看这个反例：（S 是源，T 是目标）

```
_________
|S |x1|x2|
----------
|x3|x4|x5|
---------
|x6|x7|T |
---------- 
```

现在，假设你在 S，你还没有移动`g(S) =0`，并且在曼哈顿距离启发式下，`h(S) = 4`你得到`f(S)=4`

现在，看一下`x1,x3`：假设您对每一步都迈出一步，他们将拥有`g(x1)=g(x3)=1`，并且两者都将拥有`h(x1)=h(x3)=3`相同的启发式。这将导致`f(x1)=f(x3)=4`- 您的 if 条件将导致 none “打开”，因此一旦您完成迭代`S`- 您将不会推送任何内容`open`- 您的搜索将终止。

* * *

附带说明：
我认为选择`closedSet`as`ArrayList`效率不高。每个`contains()`操作是`O(n)`（其中`n`是关闭节点的数量）。你应该使用 a`Set`以获得更好的性能 - A`HashSet`是一个明智的选择，如果你想保持插入顺序 - 你应该使用 a `LinkedHashSet`。（请注意，您必须覆盖`equals()`和`hashCode()`的方法`Node`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:11:04.420

你的单位是只走上/下/左/右，还是也可以走对角线？

A* 启发式的一个要求是它是[可以接受](http://en.wikipedia.org/wiki/Admissible_heuristic)的——它绝不能高估实际**的**路径长度。如果您的单位可以沿对角线行走，则 manhatten-distance 将高估路径长度，因此 A* 不能保证有效。

# c# - 无法将值应用于列表 C# webservice

> ID：12417926
> 
> 赞同：0
> 
> 时间：2012-09-14T03:59:10.607
> 
> 标签：c#, web-services, list, class

从 web 服务返回信息。我为返回对象创建了一个类。但是在将结果分配给每个列表项时，我收到以下错误消息。

调用我的网络服务时，我返回以下消息：

> System.ArgumentOutOfRangeException：索引超出范围。必须是非负数且小于集合的大小。参数名称：在 System.ThrowHelper.ThrowArgumentOutOfRangeException() 的索引
> 在 System.Collections.Generic.List`1.get_Item(Int32 索引) 在 NewUser.ADMethods.GetUserInfo(String userName)

请帮忙！

```
public class UserInformation
{
    public string givenname { get; set; }
    public string surname { get; set; }            
}

[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public List<UserInformation> GetUserInfo(string userName)
{
    // Gather User Info
    // Invoke Directory Searcher & Directory Entry
    DirectorySearcher ds = new DirectorySearcher();
    // Apply filter to search
    ds.Filter = "(&(objectCategory=user)(samaccountname=" + userName + "))";

        SearchResult sr = ds.FindOne();
        List<UserInformation> UserInfo = new List<UserInformation>();
        UserInfo[0].givenname = sr.Properties["givenname"].ToString();
        return UserInfo;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:01:15.513

您的问题是您正在创建一个列表，该列表最初为空，然后尝试访问尚不存在的第一个项目的值。

您必须创建该项目，然后将其添加到列表中：

```
List<UserInformation> UserInfo = new List<UserInformation>();
UserInformation item = new UserInformation();
item.givenname = sr.Properties["givenname"].ToString();
UserInfo.Add(item); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:02:07.077

我认为你的问题在这里

```
List<UserInformation> UserInfo = new List<UserInformation>(); 
UserInfo[0].givenname = sr.Properties["givenname"].ToString(); 
```

您正在创建一个没有条目的新列表，然后直接尝试访问不存在的第一个条目。

# timer - 在处理中创建一个简单的倒计时

> ID：12417937
> 
> 赞同：9
> 
> 时间：2012-09-14T04:01:36.763
> 
> 标签：timer, processing, countdown, intervals

我在谷歌上搜索了很多网站，试图让它工作，但似乎没有人在任何地方都有这个，如果他们这样做，那只是不与我的程序一起工作......我想要实现的是拥有一个播放器回避当玩家被击中时，他在第一次和第二次被击中之间有“x”的时间。

所以我有一个`Boolean "hit" = false`，当他被击中时，它变为`true`。这意味着他不能再次被击中，直到它再次变为假。

所以我试图在我的程序中设置一个函数来为“x”秒数设置一个“定时器” `IF hit = true`，一旦该定时器达到“x”秒数，命中将被切换回假。

有人有想法么？

谢谢！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T09:25:21.810

[一个简单的选择是使用millis()](http://processing.org/reference/millis_.html)手动跟踪时间。

您将使用两个变量：

1.  一个存储经过的时间
2.  一个存储您需要的等待/延迟时间

在 draw() 方法中，您将检查当前时间（以毫秒为单位）与先前存储的时间之间的差异是否大于（或等于）延迟。

如果是这样，这将提示您为给定的延迟做任何事情并更新存储的时间：

```
int time;
int wait = 1000;

void setup(){
  time = millis();//store the current time
}
void draw(){
  //check the difference between now and the previously stored time is greater than the wait interval
  if(millis() - time >= wait){
    println("tick");//if it is, do something
    time = millis();//also update the stored time
  }
} 
```

这是屏幕上更新“针”的细微变化：

```
int time;
int wait = 1000;

boolean tick;

void setup(){
  time = millis();//store the current time
  smooth();
  strokeWeight(3);
}
void draw(){
  //check the difference between now and the previously stored time is greater than the wait interval
  if(millis() - time >= wait){
    tick = !tick;//if it is, do something
    time = millis();//also update the stored time
  }
  //draw a visual cue
  background(255);
  line(50,10,tick ? 10 : 90,90);
} 
```

根据您的设置/需要，您可以选择将此类内容包装到可以重用的类中。这是一种基本方法，也应该适用于 Android 和 JavaScript 版本（尽管在 javascript 中你有 setInterval()）。

如果您对使用 Java 的实用程序感兴趣，正如 FrankieTheKneeMan 建议的那样，有一个[TimerTask](http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html)类可用，我相信那里有很多资源/示例。

您可以运行以下演示：

```
var time;
var wait = 1000;

var tick = false;

function setup(){
  time = millis();//store the current time
  smooth();
  strokeWeight(3);
}
function draw(){
  //check the difference between now and the previously stored time is greater than the wait interval
  if(millis() - time >= wait){
    tick = !tick;//if it is, do something
    time = millis();//also update the stored time
  }
  //draw a visual cue
  background(255);
  line(50,10,tick ? 10 : 90,90);
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.4/p5.min.js"></script>
```

# javascript - element.parentNode.removeChild() 方法在 Internet Explorer 中不起作用

> ID：12417943
> 
> 赞同：4
> 
> 时间：2012-09-14T04:02:09.677
> 
> 标签：javascript, html, internet-explorer, dom, internet-explorer-9

我正在尝试`element.parentNode.removeChild()`方法。它在 Firefox 中运行良好，但在 IE 9 中无法运行。

谁能告诉我如何使用javascript删除IE中的元素？

谢谢...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T04:53:49.750

在元素的 parentNode 中使用`removeChild`函数。

如果`element`是需要删除的节点，则执行以下操作：

```
element.parentNode.removeChild(element) 
```

# c++ - C++ 树指针错误

> ID：12417944
> 
> 赞同：0
> 
> 时间：2012-09-14T04:02:17.800
> 
> 标签：c++, pointers, tree, runtime-error

我试图弄清楚如何在 C++ 中创建一棵树。我已经尝试调试了好几个小时，我想是时候让我再次关注它了。我的问题是我的 treeNodeClass 看起来是否正确。现在我遇到了堆栈爆炸，因为我正在从节点中双重删除项目。树本身将解析一个简单的 xml 文件。这是我的代码。

`#include "treeNodeClass.h"`

 ````
TreeNodeClass::TreeNodeClass()
{
  cout << "TREENODECLASS::TREENODECLASS()" << endl;
  attributes.clear();
  children.clear();
  data = "";
  height = 0;
  parent = NULL;
  tag = "";
  cout << "EXIT TREENODECLASS::TREENODECLASS()" << endl;
}

TreeNodeClass::TreeNodeClass(const TreeNodeClass& other)
{
    cout << "TREENODECLASS::TREENODECLASS(const other)" << endl;
    parent = NULL; 
    CopyIntoMe(other); 
    cout << "EXIT TREENODECLASS::TREENODECLASS(const other)" << endl;
}

TreeNodeClass::~TreeNodeClass()
{
      cout << "TREENODECLASS::~TREENODECLASS()" << endl; 
      if(parent)
        delete parent;
      parent = NULL; 
      children.clear(); 
      attributes.clear();
      cout << "EXIT TREENODECLASS::~TREENODECLASS()" << endl;
}

void TreeNodeClass::CreateAttrib(string root, string val)
{
  string attrib = root + "=" + val;
  attributes.push_back(attrib);
}

void TreeNodeClass::CreateTag(string data, string name)
{
  tag = name;
  this->data = data;
}

list<string> TreeNodeClass::ReturnAttrib()
{
  return this->attributes; 
}

string TreeNodeClass::ReturnTag(string tag)
{
  string retTag = "";
  if(this->tag == tag)
    retTag = this->tag;
  return retTag;
}

void TreeNodeClass::AddChildren(TreeNodeClass* c)
{
if(c != NULL)
  children.push_back(c);
}

TreeNodeClass& TreeNodeClass::operator=(const TreeNodeClass& other)
{
cout << "TREENODECLASS& TREENODECLASS OPERATOR = " << endl;
if(&other != this)
{
  if(parent)
    delete parent;

  parent = NULL; 
  attributes.clear(); 
  children.clear(); 
  CopyIntoMe(other); 
}
return *this;
}

void TreeNodeClass::CopyIntoMe(const TreeNodeClass& other)
{
  cout << "Copy into me" << endl;
  tag = other.tag; 
  data = other.data; 
  attributes = other.attributes; 
  children = other.children; 
  parent = new TreeNodeClass; 
  parent = other.parent; 
  height = other.height; 
}

void TreeNodeClass::AddParent(TreeNodeClass* p)
{ 
  if(p)
  {
    parent = new TreeNodeClass;
    parent = p; 
  }
}

std::vector< TreeNodeClass* > TreeNodeClass::ReturnChildren()
{
  return children; 
}

ostream& operator<<(ostream& out, const TreeNodeClass& treeNode)
{
out << "NODE: " << treeNode.tag << " " << treeNode.data << endl;
out << "CHILDREN: " << treeNode.children.size() << endl;
out << "HEIGHT: " << treeNode.height << endl;
out << "Attributes: "; 
for(list<string>::const_iterator iter = treeNode.attributes.begin(); iter != treeNode.attributes.end(); iter++)
{
  out << *iter << " ";  
}
out << endl;
}

void TreeNodeClass::SetHeight(int h)
{
  height = h;
}

/*void function(TreeNodeClass* node)
{
  cout << node << " " << *node << endl; 

}

TreeNodeClass* function2(TreeNodeClass* node)
{

  return node; 
}

int main()
{
  cout << "STARTING PROGRAM" << endl;
  cout << "CREATING A TREE NODE CLASS " << endl;
  TreeNodeClass* newNode;
  TreeNodeClass* tempNode; 

  list<string> attribs; 

  newNode = new TreeNodeClass; 
  tempNode = new TreeNodeClass; 

  newNode->SetHeight(10); 

  cout << *tempNode << " " <<  *newNode << endl;
  tempNode->SetHeight(20); 

  cout << *tempNode << "\n " <<  *newNode << endl;

  cout << "Setting equal " << endl;
  *tempNode = *newNode; 
  cout << *tempNode << " " <<  *newNode << endl;

  tempNode->SetHeight(40); 
  cout << *tempNode << " " <<  *newNode << endl;

  tempNode->AddChildren(newNode); 
  newNode->AddParent(tempNode); 
  cout << *tempNode << "\n " <<  *newNode << endl;

  return 0;
}
*/ 
````  `我正在尝试在一个简单的状态机上使用此代码。我基本上设置了一个列表向量来返回状态。这就是我认为给了我大部分错误的原因。我也盯着这个看了一段时间，但我有点迷路了。机器将创建树（据说）。当状态机完成（状态 10）时，它返回并且调用函数将再次调用 yylex()。感谢你目前的帮助！

 ````
TreeNodeClass* ProcessTree(TokenT token, vector <list <stateAssoc> >& vecTree, int depth)
   {
int state = 1; //Assume this is a new record.
bool noState = false;
bool update = true;
int dex = 0;
string root, value, data, tag;
TreeNodeClass* treeNode;

treeNode = new TreeNodeClass; //Assume a new node per state machine visit.

while(state != 10)
{
  switch(state)
  {
case 1: dex = 1;
    break;

case 2: state = 3;
    noState = true;
    root = yylval;
    break;

case 3: state = 4;
    noState = true;
    break;

case 4: dex = 3;
    value = yylval;
    //cout << value << endl;
    treeNode->CreateAttrib(root, value);
    break;

case 5: dex = 2;
    data = yylval;
    //cout << 5 << " " << yylval  << " " << token << endl;

    //If its data store as data; if tag its a start tag.
    break;

case 6: dex = 4;
    //cout << token << " " << yylval << endl;
    break;

case 7: state = 9;
    noState = true;
    tag = yylval;
    //cout << tag << token << endl;
    if(data != "" and data != "authors")
      treeNode->CreateTag(data, tag);
    break;

case 8: {
      TreeNodeClass* childNode = new TreeNodeClass;
      childNode = ProcessTree(token, vecTree, depth+1);

      cout << "BEFORE PARENT" << endl;
      childNode->AddParent(treeNode);
      childNode->SetHeight(depth); 
      treeNode->AddChildren(childNode);
      delete childNode;
      childNode = NULL;
    }
    token = TokenT(yylex()); //Get a new token to process.
    dex = 5;
    break;

case 9: state = 10;
    noState = true;
    update = false;
    break;

case 10: noState = true;
    update = false;
    break;

default: cout << "Error " << endl;
    cout << state << endl;
    cin.get();
    break;

  }

  if(!noState)
state = FindMatch(vecTree[dex], token);
  else
noState = false;

  if(update)
token = TokenT(yylex());
  else
update = true;
}
return treeNode; 
```` 

`}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:08:57.333

1.孩子不应该删除父母：

```
TreeNodeClass::~TreeNodeClass()
{
      cout << "TREENODECLASS::~TREENODECLASS()" << endl; 
      /* Delete next 2 lines
      if(parent)
        delete parent;
      */
      parent = NULL; 
      children.clear(); 
      attributes.clear();
      cout << "EXIT TREENODECLASS::~TREENODECLASS()" << endl;
} 
```

2.Containers 不会删除指针——你应该永远记住它。简单的删除方法，例如：

```
 for (vector<TreeNodeClass*>::iterator child = children.begin(); child != children.end(); ++child)
     delete *child; 
```

但最好的方法——不要使用本机指针，而是使用一些智能指针或共享指针。

3.Main函数不删除指针`tempNode`和`newNode`.

4.如果你将使用本机指针，你应该递归地创建和复制每个孩子。以其他方式，您将发现内存泄漏。

5.方法示例`CopyIntoMe`：

```
void TreeNodeClass::CopyIntoMe(const TreeNodeClass& other)
{
  cout << "Copy into me" << endl;
  tag = other.tag; 
  data = other.data; 
  attributes = other.attributes; 

  // delete each pointer to Nodes
  foreach (vector<TreeNodeClass*>::iterator child = children.begin(); child != children.end(); ++child)
    delete *child;
  children.clear();

  // Copy recursively each child
  foreach (vector<TreeNodeClass*>::iterator child = other.children.begin(); child != other.children.end(); ++child) {
    TreeNodeClass* new_child = new TreeNodeClass;
    new_child->CopyIntoMe(*child);
    children.push_back(new_child);
  }

  parent = other.parent; 
  height = other.height; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T04:23:52.943

这是不好的：

```
parent = new TreeNodeClass;
parent = p; 
```

这是内存泄漏。由于您正在分配内存并将父级指向它，然后立即将父级指向其他东西，因此您永远无法删除分配的内存。每次调用 AddParent() 时都会分配和丢失内存。`

# c# - Sprite/Texture Atlas: GDI+ Bitmap.MakeTransparent for color-key with OpenTK

> ID：12417946
> 
> 赞同：4
> 
> 时间：2012-09-14T04:02:43.080
> 
> 标签：c#, opengl, opentk

我正在使用 C# 和 OpenTK 为精灵/纹理图集功能编写一个支持类。到目前为止，大多数功能都运行良好（正交视图上的简单 2D 切片）。

我的问题与调用 GDI+ Bitmap.MakeTransparent() 方法设置颜色（洋红色 / 0xFFFF00FF）以用作颜色键时的意外显示结果有关。

看来我为 bitmap.LockBits() 和 GL.TexImage2D() 调用使用了不正确的像素格式参数。我的代码基于确实有效的示例，但它们的共同点是传递给 LockBits() 的矩形是针对整个图像的。

与此过程有关的调用是：

```
<!-- language: C# -->
Bitmap bitmap = new Bitmap(filename);
bitmap.MakeTransparent(Color.Magenta);

GL.GenTextures(1, out texture_id);
GL.BindTexture(TextureTarget.Texture2D, texture_id);

// "rect" is initialized for one of:
//   - the dimensions of the entire image 
//     (0, 0, bitmap.width, bitmap.height)
//   - the dimensions for a sub-rectangle within the image (for one tile)
//     (tile_x * tile_width, tile_y * tile_height, tile_width, tile_height)
// I observe different behaviors for a sub-rectangle, 
// as compared to the entire image, when in combination with 
// the .MakeTransparent() call.
//
// This code is in a load_tile() method, and the plan was to make 
// multiple calls per image file, one per tile to extract as a GL texture.  
// Without transparency, that worked fine.

Rectangle  rect = new Rectangle(xx, yy, width, height);
BitmapData data = bitmap.LockBits(rect,
                                  ImageLockMode.ReadOnly, 
                                  System.Drawing.Imaging.PixelFormat.Format32bppRgb);
// In the absence of calling bitmap.MakeTransparent(),
// images loaded and displayed as expected with Format24bppRgb.
// With MakeTransparent() and Format32bppRgb, the results seem to be OS-dependent.
//     (At first I thought the "correct" combination to be found, 
//     but then found that the results were "right" only under Windows 7.)

GL.TexImage2D(
        OpenTK.Graphics.OpenGL.TextureTarget.Texture2D,   // texture_target,
        0,                                                // level,
        OpenTK.Graphics.OpenGL.PixelInternalFormat.Rgba,  // internal_format
        data.Width, data.Height,                          // width, height, 
        0,                                                // border,
        OpenTK.Graphics.OpenGL.PixelFormat.Bgra,          // pixel_format
        OpenTK.Graphics.OpenGL.PixelType.UnsignedByte,    // pixel_type
        data.Scan0                                        // pixels
        );
// Certainly the internal_format and pixel_format arguments are pertinent,
// but other combinations I have tried produced various undesired display results.
// After reading various (OpenGL, OpenTK, and GDI+) docs, still I am not enlightened..

bitmap.UnlockBits(data); 
```

我在不同的 boxen 上使用上面的代码测试了一个小演示，并观察这些结果：

*   Windows 7 框：洋红色像素充当透明（所需的结果）
*   Windows XP 框：洋红色像素呈现为黑色
*   Ubuntu Linux box：洋红色像素呈现为洋红色

这让我感到惊讶，因为我预计（GDI+ 和 OpenGL 以及 OpenTK 绑定）在不同的盒子上会表现相同。

就我吸收 GDI+ 和 OpenGL / OpenTK API 文档而言，我认为我的困惑与这两点有关：

*   调用 MakeTransparent() + LockBits() + GL.TexImage2D() 的正确方法是什么，以便将指定的颜色渲染为透明？

*   为什么在为子矩形而不是整个图像调用 LockBits() 时，对于某些像素格式参数组合，我会看到奇怪的显示结果（好像“步幅”计算错误）？

更新：我已将我的代码缩减为 Github 上的一个小项目： [https ://github.com/sglasby/OpenGL_Transparent_Sprite](https://github.com/sglasby/OpenGL_Transparent_Sprite)

此外，我偶然发现了一个有效的参数组合（LockBits() 的参数 3 是 Format32bppPArgb），虽然目前尚不清楚它*为什么*有效，因为文档暗示需要另一种像素格式：http: [//msdn.microsoft.com/ en-us/library/8517ckds.aspx](http://msdn.microsoft.com/en-us/library/8517ckds.aspx) （声明调用 MakeTransparent 后位图将采用 Format32bppArgb）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T16:50:24.717

虽然这是您的问题的一个单独问题，但在大多数情况下，您实际上应该[使用 premultiplied-alpha](http://blogs.msdn.com/b/shawnhar/archive/2009/11/06/premultiplied-alpha.aspx) ( `Format32bppPArgb`)。如果这种格式工作正常，那么理解为什么`Format32bppArgb`不工作主要是一项学术练习。

我使用 Intel 2000HD 在 Win7 上运行您的示例项目并得到以下结果：

*   `Format32bppPArgb`正常工作
*   `Format32bppRgb`正常工作
*   `Format32bppArgb`被打乱了

在进一步调查中，这似乎与 OpenGL 无关，而是与`Bitmap.LockBits`工作方式有关。

检查`data.Stride`调试器上每种方法的值：

*   `Format32bppPArgb`步幅为 128（位图宽度的 4 倍，正确）
*   `Format32bppRgb`步幅为 128（位图宽度的 4 倍，正确）
*   `Format32bppArgb`步幅为 512（位图宽度的 16 倍，？）

MSDN 在这里没有找到有用的东西。在这一点上，我无法说出为什么会这样。如果我设法发现任何东西，我会更新这个答案。

编辑：你瞧，如果你在解压数据时强制使用正确的步幅，输出看起来是正确的：

```
GL.PixelStore(PixelStoreParameter.UnpackRowLength, data.Width * 4); // 4x for 32bpp 
```

# ruby-on-rails-3 - 在具有中央身份验证的多个 Rails 应用程序中使用 devise/cancan

> ID：12417949
> 
> 赞同：2
> 
> 时间：2012-09-14T04:03:30.263
> 
> 标签：ruby-on-rails-3, authentication, devise, authorization, cancan

我需要为我的 3 个客户项目（不同子域下的独立 rails 应用程序）进行单点登录和中央身份验证。而且我还需要管理具有多个角色的授权。

这是我第一次管理 SSO，我发现使用[ruby​​-cas-server](https://github.com/rubycas/rubycas-server) / [ruby​​-cas-client](https://github.com/rubycas/rubycas-client-rails)和设计来实现中央身份验证和 SSO 看起来是可能的。我正在考虑使用 CanCan 管理角色授权。

我正在考虑的范围是：将有一个中央 Rails 应用程序作为用户管理，管理员将 CRUD 用户并在那里管理授权。CAS 服务器将对中央用户管理系统的 DB 进行身份验证。Satellite rails 应用程序将使用 CAS 服务器进行身份验证。

我想问一下，这是否可以使用CanCan获取卫星系统中的授权信息？有没有人这样做过？有没有更好/更简单的解决方案来实现这一切？

非常感谢。

# c# - 数组和随机数：计算整数随机生成的次数

> ID：12417951
> 
> 赞同：3
> 
> 时间：2012-09-14T04:03:44.513
> 
> 标签：c#

> **可能重复：**
> [随机生成的数字列表中的计数频率](https://stackoverflow.com/questions/1421802/count-frequency-in-a-randomly-generated-list-of-numbers)

我目前正在使用数组和随机数。我创建了一个表单，它可以让我生成 1 - 20 的随机数，并带有一个 textbox1 来选择显示的数字数量。我在多行文本框2 中显示结果。我已经能够计算出生成的一组数字的总和和平均值。

我的第二步：

是否可以计算或标记生成数字的时间并将其显示在多行文本框中（最后一张图片）？我需要创建一个数组并使其充满零吗？

```
private void button1_Click(object sender, EventArgs e)
{
    int n = Convert.ToInt32(textBox1.Text);
    int[] y = new int[n];
    double sum = 0;

    for (int i = 0; i < n; i++)
    {
        int x = 1 + r.Next(20);
        y[i] = x;
        sum += x;

        if (n < 101)
            textBox2.AppendText(x + " ");
    }

    double avg = sum / n;
    textBox2.AppendText(Environment.NewLine + sum + " " + avg + Environment.NewLine);

    double vsum = 0;

    for (int i = 0; i < n; i++)
        vsum += (y[i] - avg) * (y[i] - avg);
} 
```

**表格.cs**

![在此处输入图像描述](../Images/d24810235bdd86157fe28f2b03d6db87.png)

**计算一个整数被随机选择的次数**

![在此处输入图像描述](../Images/f4e707e5c9bd8da33287d35844a05089.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:06:09.477

> “我需要创建一个数组并使其充满零吗？”

是的，这将是一个好的开始。

有一个计数器数组（最初都是零）并计算每个数字出现的次数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T04:25:54.593

这是可以做你想做的代码：

```
 var r = new Random();
        var n = int.Parse(this.textBox1.Text);

        var y =
            Enumerable
                .Range(0, n)
                .Select(x => r.Next(20) + 1)
                .ToArray();

        var sum = y.Sum();
        var avg = (double)sum / (double)n;
        var frequency = y.ToLookup(x => x);

        textBox2.Text = String.Join(Environment.NewLine, new[]
        {
            "Results",
            String.Format("{0} {1}", sum, avg),
        }.Concat(Enumerable
            .Range(1, 20)
            .Select(x => String.Format("{0} ({1}x)", x, frequency[x].Count())))); 
```

运行这个值`25`我得到了这个结果：

```
Results
278 11.12
1 (0x)
2 (2x)
3 (1x)
4 (1x)
5 (1x)
6 (2x)
7 (0x)
8 (1x)
9 (2x)
10 (4x)
11 (1x)
12 (0x)
13 (0x)
14 (0x)
15 (2x)
16 (1x)
17 (2x)
18 (2x)
19 (3x)
20 (0x) 
```

这就是你所追求的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T04:13:13.537

您可以添加一个`Dictionary<int, int> counter`重要的。在之后插入这些行`int x = ...`

```
if (counter.ContainsKey(x))
    counter[x]++;
else
    counter.Add(x, 1); 
```

之后，该字典为您创建的每个不同的随机数及其创建次数保存一个键值对。您还可以使用字典`y`完全替换数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T04:14:54.963

你也可以做一个

```
Dictionary<int,int> 
```

将有问题的数字存储为键（第一个 int）将生成的次数存储为值（第二个 int）。

```
Dictionary<int,int> numbers = new Dictionary<int,int>();
//initialize dictionary
for (int i = 1; i < 21; i++)
{
   numbers.Add(i,0);
}

//this only covers generating number and adding to dictionary
Random random = new Random();
int nextNum = random.NextInt(1,20);
numbers[nextNum]++; 
```

参考：

[http://www.dotnetperls.com/keyvaluepair](http://www.dotnetperls.com/keyvaluepair)

[http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

# sql-server-2005 - 将 Excel 工作表导入 SQL 2005

> ID：12417956
> 
> 赞同：0
> 
> 时间：2012-09-14T04:04:31.570
> 
> 标签：sql-server-2005, ssis

我有一个从 Excel 导入 SQL 2005 的 SISS 包。工作表的名称会根据文件的创建日期而变化，因此工作表的名称将是 20120911。

我想通过自动更改工作表名称来标准化它。

这可能吗？我做了很多搜索，但没有找到解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:56:05.863

[您可以使用SSIS 表达式](http://msdn.microsoft.com/en-us/library/ms141214%28v=sql.90%29.aspx)配置您的连接（ExcelFilePath 属性）。请记住将数据流任务和连接管理器的“DelayValidation”设置为“true”，这样 SSIS 就不会抛出不需要的异常。

[这](http://bidn.com/blogs/kylewalker/ssis/997/setting-up-an-ssis-package-with-a-dymanic-excel-source)是如何做到这一点的一个很好的例子。

# parsing - Gettext 在解析 twig 模板文件时抛出“警告：未终止的字符串”

> ID：12417958
> 
> 赞同：0
> 
> 时间：2012-09-14T04:04:34.403
> 
> 标签：parsing, internationalization, twig, gettext

这个问题困扰了我一段时间，但我想一劳永逸地解决它。

我在我的 PHP 应用程序中使用了[twig 模板引擎。](http://twig.sensiolabs.org/)我正在使用最新版本的[Poedit](http://www.poedit.net/)（它使用 xgettext 0.18.1）来解析我的文件以获取翻译字符串。

[我已经使用这些说明](http://plugins.svn.wordpress.org/background-manager/trunk/vendor/pf4wp/TRANSLATE.md)设置了 Poedit 以使用 twig 。

一切正常，但问题是当我更新我的 Poedit 目录时，我收到如下错误：

```
1:24:45 PM: somefile.twig:5: warning: unterminated string
1:24:45 PM: somefile.twig:10: warning: unterminated string 
```

这是对话框：

![在此处输入图像描述](../Images/c540093bbceedcb0c039ac601ff73ac7.png)

这是有问题的文件：

```
{% extends somevar ? 'one.twig' : 'two.twig' %}

{% block blah %}
Blah blah
{% endblock %}

{% block blah2%}
<div id="some-id" class="some-class">
some content
</div>
{% endblock %} 
```

但是，如果我在错误对话框中单击`OK`，一切似乎都很好，然后将树枝模板中的字符串加载到目录中。

我知道最近发布了一个[gettext-extractor for twig 来挑选翻译字符串。](https://github.com/umpirsky/Twig-Gettext-Extractor)但是，有一些可能的问题：

*   我没有使用 symfony 2 框架，也没有使用 twig 的 intl 扩展（我们已经构建了自己的以适应我们的目的）。

*   我们对 gettext 字符串使用不同的字符`{{ t('some string') }}`

*   我们宁愿不必引入更多外部依赖项，除非我们真的有，否则试图获取字符串的人需要设置 twig 和 gettext 提取器。

有没有我可以传递给 xgettext 的标志来解决这个问题？解析工作正常。我只是希望 gettext 不会引发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-16T08:30:04.067

像这样更改设置：

1.  转到**首选项-> 解析器**
2.  选择**PHP -> 编辑**
3.  **扩展名列表 .... -> *.php,* .phtml**
4.  将此“ **xgettext --language=PHP --force-po -o %o %C %K %F** ”插入**Parser Command:**字段。
5.  还有**Catalog --> Properties --> Translation Properties TAB --> Charset utf-8**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T23:37:29.173

所以我继续使用该工作流程几天，发现以下问题：

如果我有一个像这样的资源包键：`<a href="#" title="{{ t('somekey') }}">Test</a>`，我之前使用的设置将无法获取该键。

由于我在后台已经有一个小的 PHP 脚本来使用[Assetic](https://github.com/kriswallsmith/assetic)监视和编译我的资产，所以我只是添加了几行，以便将 twig 模板编译成 PHP 文件（http://twig.sensiolabs.org/doc/扩展/i18n.html#extracting-template-strings）。

然后我从 POEdit 中删除了 Twig 解析器，现在，所有的模板字符串都只是从 PHP 文件中解析出来的，效果很好！

虽然这个解决方案有效，但我仍然想找到一种方法来让 POEdit 和 gettext 本地解析树枝文件。但是，如果有人正在寻找解决方案，那么这个解决方案应该同时工作得很好。

# python - 设置 proxy.socks.port 硒

> ID：12417967
> 
> 赞同：5
> 
> 时间：2012-09-14T04:05:46.740
> 
> 标签：python, selenium, webdriver, socks

我习惯于这样设置http端口：

```
profile.set_preference("network.proxy.http_port", "PORTNUMBER") 
```

那行得通。但现在我需要连接 socks 代理并设置端口，它不起作用

```
profile.set_preference("network.proxy.socks_port", "PORTNUMBER") 
```

我在文档中找不到参考，这就是我在这里问的原因。有任何想法吗 ？有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-08T06:55:34.957

在您的情况下，我认为您应该将端口用作 int 而不是字符串。请参阅下面的详细信息

首先让我们了解一下，FF（或与 Selenium 一起使用的 webdriver）是如何设置 SOCKS 代理的。

对于 Firefox，在 URL 框中执行 about:config。

```
network.proxy.socks;10.10.10.1
network.proxy.socks_port;8999
network.proxy.socks_remote_dns;true
network.proxy.socks_version;5 
```

您可以在 FF profile director 的 prefs.js 中看到相同的内容，如下所示：

```
user_pref("network.proxy.socks", "10.10.10.1");
user_pref("network.proxy.socks_port", 8999);
user_pref("network.proxy.type", 1); 
```

请注意，network.proxy.socks 是字符串，应仅设置为字符串。network.proxy.socks_port 也必须是 int。

使用 selenium python 模块设置它时：

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.proxy import *
import time

# for fresh FF profile
#profile = webdriver.FirefoxProfile() 
profile_path="/path/to/custom/profile/"
profile = webdriver.FirefoxProfile(profile_path)
# set FF preference to socks proxy
profile.set_preference("network.proxy.type", 1)
profile.set_preference("network.proxy.socks", "10.10.10.1")
profile.set_preference("network.proxy.socks_port", 8999)
profile.set_preference("network.proxy.socks_version", 5)
profile.update_preferences()
driver = webdriver.Firefox(firefox_profile=profile)

driver.get("http://whatismyip.com")
print driver.page_source
# sleep if want to show in gui mode. we do print it in cmd
time.sleep(25)
driver.close()
driver.quit() 
```

请检查是否支持给定的首选项并出现在 FF about:config 列表中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T04:39:30.177

在下面的示例中查看用户如何使用 socks_port....

[using-selenium-for-web-based-hostname-enumeration](http://www.wsec.be/blog/2012/05/22/using-selenium-for-web-based-hostname-enumeration/) 和 [gist.github.com](https://gist.github.com/2402041)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:49:24.203

```
ffprofile=webdriver.FirefoxProfile()
ffprofile.set_preference('network.proxy.type', 1)
ffprofile.set_preference('network.proxy.http', HTTP_IP)

ffprofile.set_preference("network.proxy.http_port", HTTPPORT)
ffprofile.set_preference('network.proxy.socks', 'SOCKS_IP')
ffprofile.set_preference('network.proxy.socks_port', SOCKSPORT)

ffprofile.update_preferences()

driver = webdriver.Remote(
   command_executor='http://SELENIUM:PORT/wd/hub',
   desired_capabilities=DesiredCapabilities.FIREFOX,
   browser_profile = ffprofile
   ) 
```

# php - 如何使用php从文件中删除特定数据

> ID：12417970
> 
> 赞同：1
> 
> 时间：2012-09-14T04:06:02.783
> 
> 标签：php, regex, file, logic

在文件中显示数据 ---

```
Kortrijk]]||75,592||74,790||73,777VWVVLG
Hasselt]]||65,503||68,085||70,584VLIVLG
Sint-Niklaas]]||68,277||68,290||70,016VOVVLG
Ostend]]||69,039||67,279||69,115VWVVLG
|22Tournai]]||67,291||67,379||67,844WHTWAL
|23Genk]]||61,532||62,842||64,095VLIVLG
|24Seraing]]||62,832||60,557||61,237WLGWAL 
```

这是我`wiki.txt`文件中的数据集，我需要删除“]]||”之后的所有内容 从所有行。

//代码实现后需要数据

```
Kortrijk
Hasselt
Sint-Niklaas
Ostend
|22Tournai
|23Genk
|24Seraing 
```

这是我遇到的代码，但不知道如何在我的代码中使用它，我关注了`preg_replace`正则表达式等，但一切都超出了我的想象。请帮助我，请让我知道我可以关注的任何教程链接对于这些工作`(specially regular expression for a novice`）。

```
$file="wiki.txt";
file_put_contents($file,str_replace('find','replace',file_get_contents($file))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:15:01.390

```
preg_replace('/]]\|\|.*$/m', '', $fnames); 
```

匹配 ']]||' 从字面上看，然后是所有字符 (.*)，直到行 '$' 的结尾，并将它们替换为 ''。

另外：查看[有关 RegExp 的本教程](http://www.regular-expressions.info/tutorial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:16:51.717

尝试：

```
$arr = file("wiki.txt"); //will give you contents as array
$newContent = "";
foreach($arr as $key => $val) {
    $newContent .=substr_replace($val, '', strpos($val, ']'))."\n";
}
//add changed content back to file
file_put_contents("wiki.txt", $newContent);

//result is:
Kortrijk
Hasselt
Sint-Niklaas
Ostend
|22Tournai
|23Genk
|24Seraing 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T05:17:26.637

而不是“更改”文件，您可能想要打开文件，读取内容，然后将您想要的部分写入新文件。如果一切按计划进行，请将旧文件替换为新文件。这样就安全多了。

```
<?php

$lines = file("input.txt");

$output = "";

foreach ($lines as $line) {
  $output .= substr($line, 0, strpos($line, "]")) . "\n";
}

file_put_contents("output.txt", $output); 
```

解决这个问题的方法很多。

# ruby - 使用 RegExp 的 Sinatra 路由参数

> ID：12417974
> 
> 赞同：1
> 
> 时间：2012-09-14T04:06:13.807
> 
> 标签：ruby, regex, sinatra

我正在尝试制作一个小的 sinatra 示例，它将根据 URL 打印一个月、一天或一年的日历视图。这样

localhost:4567/calendar/2012 将打印年视图日历

localhost:4567/calendar/2012/9 将打印一个月历

localhost:4567/calendar/2012/9/15 将打印一个日视图日历

我有这个工作：

```
require 'sinatra'

get '/calendar/:year/:month/:day/?' do
    "printing daily calendar for #{params[:year]}/#{params[:month]}/#{params[:day]}"
end

get '/calendar/:year/:month/?' do
    "printing monthly calendar for #{params[:year]}/#{params[:month]}"
end

get '/calendar/:year/?' do
    "printing yearly calendar for #{params[:year]}"
end 
```

**我的问题是，我是否可以使用某种正则表达式进一步优化这些路由，以便我可以说 URL 仅在 :month 部分在 1 到 12 之间并且 :day 部分在 1 到 31 之间时才有效？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-05T04:41:39.950

如果您使用的是 ruby​​ 1.9+，则可以使用如下命名的捕获：

```
get %r{/(?<year>\d{4})/(?<month>\d{2})/(?<day>\d{2})/?} do
 "printing daily calendar for #{params[:year]}/#{params[:month]}/#{params[:day]}"
end

get %r{/(?<year>\d{4})/(?<month>\d{2})/?} do
  "printing monthly calendar for #{params[:year]}/#{params[:month]}"
end

get %r{/(?<year>\d{4})/?} do
  "printing monthly calendar for #{params[:year]}"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T04:48:30.200

是的。您可以在 sinatra 路由条件中指定正则表达式。有关更多信息，请参阅[sinatra 自述文件。](http://www.sinatrarb.com/intro#Routes)

```
get %r{/calendar/([\d]+)/(1[0-2]|0?[1-9])/([12][0-9]|3[0-1]|0?[1-9])$} do 
  "hello #{params[:captures]}"
end

get %r{/calendar/([\d]+)/(1[0-2]|0?[1-9])$} do 
  "hello #{params[:captures]}"        
end

# host/2012/11 will print "hello [2012, 11]"
# params[:captures] will return an array containing what match the regular expressions 
```

# ipad - 如何知道在 ios 的 UIKeyboard 上按下了哪个键？

> ID：12417976
> 
> 赞同：0
> 
> 时间：2012-09-14T04:07:06.170
> 
> 标签：ipad, ios5, uikeyboard, uikeyinput

我正在实现一个 iPad 应用程序。在我的应用程序中，我需要知道在键盘中按下了哪个键。各位大神帮忙看看有什么方法可以找到吗？

谢谢你，塞卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:01:43.390

这是一个模糊的问题，但如果您只是想知道点击了哪个键，您需要实现一个`delegate`称为键盘的输入控件。例如，如果您使用的是`UITextView`，则实现`UITextViewDelegate`，将控件的委托属性连接到您的类，然后实现`textView:shouldChangeTextInRange:replacementText:`. 当`UITextView`识别出更改时，它将调用此方法。然后，您可以观察“replacementText”参数中的字符。

使用`UITextField`并`UITextFieldDelegate`实现该`textField:shouldChangeCharactersInRange:replacementString:`方法。

您可以执行其他操作，`UITextField`例如在 Interface Builder 中将 Return 按钮更改为 Done 按钮。实现`textFieldShouldReturn:`方法。如果它被调用，则在`resignFirstResponder`传递给该方法的对象上运行。

希望这可以帮助。

# javascript - for...in 循环和 jQuery each() 函数有什么区别？

> ID：12417978
> 
> 赞同：7
> 
> 时间：2012-09-14T04:07:12.340
> 
> 标签：javascript, jquery, loops

我正在使用以下脚本来迭代对象（我不知道哪个最好用，请告诉我哪个最好）：

```
var days = {Sunday: 0, Monday: 1, Tuesday: 2, Wednesday: 3, Thursday: 4, Friday: 5, Saturday: 6};

$.each(days, function(key, value){
    $('#days').append('<li>' + key + '(' + value + ')</li>');
});

for(var key in days){
    $('#days').append('<li>' + key + '(' + days[key] + ')</li>');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T04:37:54.097

无论哪种方式，您都应该缓存该选择器：

```
var elem = $( '#days' );
$.each(days,function(key,value){
    elem.append('<li>'+key+'('+value+')</li>');
}); 
```

.each() 在这种情况下会更好。图案更干净。

使用 for 循环，您需要使用 obj.hasOwnProperty(key) 以便您不会挖掘继承的属性......这增加了另一层缩进：

```
var elem = $( '#days' );
for( var key in days ){
  if( days.hasOwnProperty( key ) ){
    elem.append('<li>'+key+'('+days[key]+')</li>');
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T04:35:08.713

It is clear without any performance tests that native javascript for loop is faster, but there is no big difference for small arrays like 10-20 small items. So use whichever you want.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T04:32:48.307

Features of `$.each`: It will stop looping if the function returns `false`. It works for both objects and arrays. `$(this)` refers to the current element being processed.

Drawbacks of `$.each`: There's a little more overhead, as it does some initial checking of arguments and has to perform a function call for each element.

But as others said, the overhead is likely to be negligible unless you're processing a large number of items.

One other benefit of `$.each()` is simply the easy recognition of the word -- having it at the beginning of a statement makes it obvious that you're looping over a collection. It's also easy to search for.

# php - 验证单选按钮

> ID：12417982
> 
> 赞同：0
> 
> 时间：2012-09-14T04:08:09.243
> 
> 标签：php, javascript

如何通过javascript验证单选按钮？

```
Male <input type="radio" name="sex" value="male" />
female <input type="radio" name="sex" value="female" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:11:35.713

尝试

```
document.getElementsByName('sex').value == 'male'
                   ^ 
```

[`Reference`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)

[`one more`](http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#dom-document-getelementsbyname)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:24:45.193

尝试以下，包括 jQuery

```
$(document).ready(function(){
  $('#submit').click(function() {
    if (!$("input[@name='sex']:checked").val()) {
       alert('Nothing checked!');
        return false;
    }
    else {
      alert('A radio button is checked!');
    }
  });
}); 
```

你的 html 应该是这样的

```
<form method="post" id="form">
Male <input type="radio" name="sex" value="male" />
female <input type="radio" name="sex" value="female" />
<input type="submit" name="submit" id="submit" value="Submit" />
</form> 
```

记得包含 jQuery api 的

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.5.2.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.8/jquery.validate.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T05:37:58.980

我认为您正在寻找所需的验证：检查以下代码：

```
<html>
<head>
<script language='javascript'>
   function submit_form(){
   var temp=document.getElementsByName("gender");       
   if(temp[0].checked == true || temp[1].checked == true )
   { 
      document.forms["f1"].submit();        
   }
   else
   {
    alert("Please Select a Gender");
   }
}
</script>
<body> 
 <form id="f1" action="custom.html" method="post">
<input type="radio" name="gender" value="male"/>
<input type="radio" name="gender" value="female"/>
<input type="button" id="s1" onclick="submit_form()" value="Submit" />
</form>
</body>
</html> 
```

# html - html onClick条件链接

> ID：12417986
> 
> 赞同：0
> 
> 时间：2012-09-14T04:08:22.750
> 
> 标签：html, forms, onclick, href, html-select

所以基本上我试图在 html 网页上创建一个按钮，该按钮使用或检查两个下拉列表中的值，并且相对于它将链接到适当的页面。但是 IF 语句似乎不起作用......

我尝试使用常规的 href 链接，但这并没有很好地结束，例如[何时在 HTML 中使用 onclick？](https://stackoverflow.com/questions/5138215/when-to-use-onclick-in-html)

这是我的代码：

```
<select name="Module">
<option value="Module 10">Module 10</option>
<option value="Module 11">Module 11</option>
<option value="Module 20">Module 20</option>
<option value="Module 60">Module 60</option>
<option value="Module 70">Module 70</option>
<option value="Module 85">Module 85</option>
</select>

<select name="Sector">
<option value="Sector1">Sector1</option>
<option value="Sector2">Sector2</option>
<option value="Sector3">Sector3</option>
<option value="Sector4">Sector4</option>
</select>

<FORM> 
<INPUT type="button" value="OK" 
onClick="if (( Module=='Module 10') && (Sector=='Sector1)) {location.href='M10_S1.html'}"> 
</FORM> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:14:38.130

这应该是你想要的：

```
<form>
<select name="Module">
<option value="1">Module 1</option>
<option value="2">Module 2</option>
<option value="3">Module 3</option>
<option value="4">Module 4</option>
<option value="5">Module 5</option>
<option value="6">Module 6</option>
</select>

<select name="Sector">
<option value="1">Sector1</option>
<option value="2">Sector2</option>
<option value="3">Sector3</option>
<option value="4">Sector4</option>
</select>

<input type="button" value="Confirm" onClick="location.href='./M' + Module.value + '_S' + Sector.value + '.htm'"> 
</form> 
```

文件名将被格式化为“M#_S#.htm”

# mongodb - 列出 mongodb 对象中的字段

> ID：12417988
> 
> 赞同：0
> 
> 时间：2012-09-14T04:08:41.357
> 
> 标签：mongodb

我正在开发一个系统，可以通过访问密钥与其他用户共享项目。我将访问键存储为`shareinfo`对象中的字段（嵌入在项目的文档中），如下所示：

```
shareinfo:{
    ........
    <nth key>: <permissions object - may be complex and large>
    ........
} 
```

当一个项目被访问时，我检查 shareinfo.key 并确定它是否有效。

目前，为了列出我正在（在 Java 中）将整个 shareinfo 对象加载到内存中并在其上运行[keySet()](http://api.mongodb.org/java/current/org/bson/BSONObject.html#keySet%28%29)以检索和返回密钥*，而其余数据被浪费了*。

这就是问题所在：我想获得没有附带数据的键列表（即对象字段名称）（因为在某些情况下权限对象非常大）。

我在 mongodb 文档中找不到此类查询的任何查询。我想知道这是否可能？或者是否有一种优化的方法可以将字段名称列表加载到应用程序中而无需附带字段值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T06:20:52.810

尝试使用 mongodb shell 了解现有 mongodb 数据库的结构时，我遇到了同样的问题。然后我发现我可以使用 JavaScript 函数 Object.keys() 来检索对象字段的数组。（使用 MongoDb 2.4.2 测试）

```
Object.keys(db.collection.findOne()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T04:52:14.930

MongoDB 采用无模式设计，这意味着任何文档都可以包含与任何其他文档不同的字段。要获得所有文档的所有字段的详尽列表，您需要遍历集合中的所有文档并枚举每个字段。对于任何规模合理的集合，这将是一项极其昂贵的操作。

有几个助手可以让这更简单：[Variety](https://github.com/variety/variety)和[schema.js](http://skratchdot.com/projects/mongodb-schema/) 。它们都允许您限制检查的文件，并且它们还报告覆盖范围。两者都相当于对集合进行 map/reduce，但至少比自己编写要简单。

# excel - 如果字段有 X，则将单元格复制到另一个工作表

> ID：12417991
> 
> 赞同：1
> 
> 时间：2012-09-14T04:09:13.747
> 
> 标签：excel, vba

我有一个 Excel 跟踪器，如果某项活动完成，我每个月都会在一个单元格中添加一个“X”。

此“X”与同一工作表上的一系列单元格相关。

当我单击命令框时，我想要；

1.  如果一月份的单元格有“X”，则将当前页面上的特定单元格复制到另一个工作表上的特定单元格。
2.  如果 2 月的单元格有“X”，则将当前页面上的一些其他特定单元格复制到另一个工作表上的其他一些特定单元格。

依此类推，一直持续到 12 月。

我有以下代码（不起作用）：

```
Private Sub CommandButton1_Click()
Sheets("MRT").Select
If InStr(1, (Range("L8").Value), "X") > 0 Then
    Range("E42:AA42").Select
    Selection.Copy
    Sheets("Test '12").Select
    Cells(3, AP).Select
    Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:27:07.247

尝试这个：

```
Private Sub CommandButton1_Click()
 If Sheets("MRT").Range("L8").Value like "*X*" Then

   Sheets("MRT").Range("E42:AA42").Copy
   Sheets("Test '12").Cells(3, 1).PasteSpecial Paste:=xlValues, Operation:=xlNone
 End If
End Sub 
```

在我的测试中工作，但是您可能希望`Cells(3,1)`将其他位置说明符调整为您想要的目标。

编辑：忘记了几个月的部分......等一下......在这里：

```
Sub FindSignificant()
    Dim SearchString As String
    Dim SearchRange As Range, cl As Range
    Dim FirstFound As String
    Dim sh As Worksheet

    ' Set Search value
    SearchString = "a"
    Application.FindFormat.Clear
    ' loop through all sheets
        Set sh = Sheets("MRT")
        ' Find first instance on sheet
        Set cl = sh.Cells.Find(What:=SearchString, _
             After:=sh.Cells(1, 1), _
            LookIn:=xlFormulas, _
            LookAt:=xlPart, _
            SearchOrder:=xlByRows, _
            SearchDirection:=xlNext, _
            MatchCase:=False, _
            SearchFormat:=False)
        If Not cl Is Nothing Then
            ' if found, remember location
            FirstFound = cl.Address
            ' format found cell
            Do
                Select Case sh.Cells(cl.Row, 1).Value
                  Case "december"
                    sh.Range("E42:AA42").Copy
                    Sheets("Test '12").Cells(3, 1).PasteSpecial Paste:=xlValues, Operation:=xlNone
                  Case "february"
                    sh.Range("E42:AA42").Copy
                    Sheets("Test '12").Cells(3, 1).PasteSpecial Paste:=xlValues, Operation:=xlNone
                  Case Else
                    'do nothing
                End Select

                ' find next instance
                Set cl = sh.Cells.FindNext(After:=cl)
                ' repeat until back where we started
            Loop Until FirstFound = cl.Address
        End If
End Sub 
```

这段代码来自[这里](https://stackoverflow.com/questions/12410507/replace-string-using-a-macro/12410610#12410610)

您将不得不调整选择案例，但如果没有必要，我真的会考虑在没有 VBA 的情况下解决这个问题；）

# php - 如何按日期对我从 sql 数据库导出的多个表进行排序以 excel？

> ID：12417996
> 
> 赞同：0
> 
> 时间：2012-09-14T04:09:43.907
> 
> 标签：php, mysql, excel, export-to-excel, export-to-csv

我已经广泛地寻求帮助，但无法弄清楚。这是我在这里提出问题的第一次尝试，所以请随意。

我有一个名为 www.farmathand.com 的项目，农民通过多个预定义表格和一些动态表格跟踪他们的田间活动。然后，这些表格与它们有一个关联的日期，以记录完成某事的时间。这是屏幕截图

![在此处输入图像描述](../Images/5089497849f2c2675d50dbd2fd80b45d.png)

农民可以将所有输入的信息导出到 Excel 文件中。我遇到的问题是找出解决方案，因此按日期对活动进行排序。目前，我有简单的导出代码，可以从每个表（即每种类型的活动）中查找和打印数据，然后移动到下一个能够。如图所示，每个表中的字段都不同。这是上述示例的 excel 文件的屏幕截图：![在此处输入图像描述](../Images/683cceedda40e16d141b6ddd4072277e.png)

我想做的是按日期对活动进行排序。因此，在上图中的示例中。第 7 行将在顶部，或者应该在第 6 行。

我想知道是否有人有任何建议或可以指导我找到适当的参考。数据库是一个mysql数据库。我目前正在运行 php 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:46:03.333

如果我正确理解您的问题，那么您想要的是`ORDER BY`在您的选择查询中包含一个子句来对数据进行排序。更多信息在这里：

[http://dev.mysql.com/doc//refman/5.0/en/sorting-rows.html](http://dev.mysql.com/doc//refman/5.0/en/sorting-rows.html)

# perl - 为什么这个使用 wget 保存 youtube 视频的 perl 脚本不能正常工作？

> ID：12417997
> 
> 赞同：0
> 
> 时间：2012-09-14T04:10:02.437
> 
> 标签：perl, bash, ubuntu, wget

第一个参数应该是视频的 url。谁能向我指出为什么这不起作用？

我启动了 ubuntu 12.04 的这些 ec2 实例之一，它已经安装了 perl 和 wget [http://cloud-images.ubuntu.com/precise/current/](http://cloud-images.ubuntu.com/precise/current/)

**该脚本源自这里：** [https ://calomel.org/youtube_wget.html](https://calomel.org/youtube_wget.html)

```
#!/usr/bin/perl

use strict;
use warnings;

## collect the URL from the command line argument
my $url = $ARGV[0] or die "\nError: You need to specify a YouTube URL\n\n";

## declare the user defined file name prefix 
my $prefix = defined($ARGV[1]) ? $ARGV[1] : "";

## download the html code from the youtube page
my $html = `wget -Ncq -e "convert-links=off" --keep-session-cookies --save-cookies /dev/null --no-check-certificate "$url" -O-`  or die  "\nThere was a problem downloading the HTML file.\n\n";

## collect the title of the page to use as the file name
my ($title) = $html =~ m/<title>(.+)<\/title>/si;
$title =~ s/[^\w\d]+/_/g;
$title =~ s/_Youtube_//ig;
$title =~ s/^_//ig;
$title = lc ($title);

## collect the URL of the video and translate to the proper URL
my ($download) = $html =~ /url_encoded_fmt_stream_map([\s\S]+?)fallback_host/ig;
$download =~ s/\\u0026/\&/g;
$download =~ s/^\=url%3D//g;
$download =~ s/%25/%/g;
$download =~ s/%3A/:/g;
$download =~ s/%2F/\//g;
$download =~ s/%3F/\?/g;
$download =~ s/%3D/\=/g;
$download =~ s/%252C/%2C/g;
$download =~ s/%26/\?/g;
$download =~ s/%253A/\:/g;

## print the file name of the video
print "\n     Download:   $prefix$title.webm\n\n";

## Download the file.
  my $error_code=system("wget -Ncq -e \"convert-links=off\" --load-cookies /dev/null --tries=50 --timeout=45 --no-check-certificate $download -O $prefix$title.webm &")>>8; 
```

**编辑** 在我运行 perl 脚本后，视频没有下载（它的大小为 0 字节）

```
$ ./youtube_get_videos.pl http://www.youtube.com/watch?v=ejkm5uGoxs4

     Download:   radscorpion_youtube.webm

$ ls -lh
-rw-rw-r-- 1 ubuntu ubuntu    0 Sep 14 04:40 radscorpion_youtube.webm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:29:49.387

`&`我怀疑它是您`system`命令中的“唐老鸭”，与号。您不是在等待程序完成。我不知道这可能需要多长时间，但不会是瞬间的。您（可能）从中获得的错误代码 0`system`将由 shell 返回（`&`将调用 shell），而不是`wget`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:36:03.300

让我为你 CPAN ：[WWW::YouTube::Download](https://metacpan.org/module/WWW%3a%3aYouTube%3a%3aDownload)。安装此模块后，只需使用捆绑的`youtube-download`实用程序：

```
stas@Stanislaws-MacBook-Pro:~$ youtube-download -o "{title}.{suffix}" http://www.youtube.com/watch?v=ejkm5uGoxs4 
--> Working on ejkm5uGoxs4
Downloading `RADSCORPION!.mp4`
26320989/26320989 (100.00%)
Download successful!
stas@Stanislaws-MacBook-Pro:~$ file RADSCORPION\!.mp4 
RADSCORPION!.mp4: ISO Media, MPEG v4 system, version 2
stas@Stanislaws-MacBook-Pro:~$ 
```

奇迹般有效 ：）

# javascript - 画布 drawImage 不起作用，但 fillrect 起作用

> ID：12417998
> 
> 赞同：1
> 
> 时间：2012-09-14T04:10:08.180
> 
> 标签：javascript, html, canvas

我对 javascript 完全陌生，但对编程却不熟悉……在我的一生中，我无法弄清楚这一点。我正在尝试在画布上绘制图像。我可以画一个矩形，但不能画一个图像。

这是我的代码：

```
<head>
    <meta http-equiv = "Content-type" content = "text/html;charset=utf-8">
    <meta name = "viewport" id = "viewport" content = "width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;"/>
    <script type = "text/javascript">
        function drawPic()
        {
            ////////////// DOESN'T WORK /////////////////// 
            var canvas = document.getElementById('mainCanvas');
            if (canvas.getContext)
            {
                var context = canvas.getContext('2d');
                var img = new Image();
                img.onload = function ()
                {
                    canvas.drawImage(img, 0, 0);
                };
                img.src = "pic1.jpg";
            }

            ///////////////////////////////////////////////////////////////
            ///////////// WORKS //////////////////////////////////////////
            if (canvas.getContext)
            {
                var context = canvas.getContext('2d');
                context.fillStyle = "rgb(150,29,28)";
                context.fillRect(2, 2, 96, 96);
            }
        }
    </script>
</head>
<body onload = "drawPic();">
    <canvas id = "mainCanvas"></canvas>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:25:47.417

好吧，而不是`canvas.drawImage(img, 0, 0);`应该调用它`context`- `context.drawImage(img, 0, 0);`。希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:20:53.857

您需要进行 AJAX 调用。

在您的代码中添加类似这样的内容，图像应该加载：

```
window.onload = function() {
        // make ajax call to get image data url
        var request = new XMLHttpRequest();
        request.open("GET", "http://www.html5canvastutorials.com/demos/assets/dataURL.txt", true);
        request.onreadystatechange = function() {
          // Makes sure the document is ready to parse.
          if(request.readyState == 4) {
            // Makes sure it's found the file.
            if(request.status == 200) {
              loadCanvas(request.responseText);
            }
          }
        };
        request.send(null);
      }; 
```

有关完整示例，请参阅本教程：http: [//www.html5canvastutorials.com/advanced/html5-canvas-load-image-data-url/](http://www.html5canvastutorials.com/advanced/html5-canvas-load-image-data-url/)