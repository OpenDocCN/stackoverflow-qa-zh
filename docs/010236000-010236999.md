# StackOverflow 问答 10236000-10236999

# mysql - 允许所有远程连接，MySQL

> ID：10236000
> 
> 赞同：76
> 
> 时间：2012-04-19T20:12:48.253
> 
> 标签：mysql

我一直在使用 SQL Server，现在正在将 MySQL 用于一个项目。使用 SQL Server，如果我们的开发人员知道主机、用户名和密码，他们就可以连接到本地计算机上的远程数据库。但是，对于 MySQL，为了让开发人员可以从他们的本地计算机访问，我不得不登录 MySQL 并执行：

```
GRANT ALL ON *.* to user@address IDENTIFIED BY 'password'; 
flush privileges; 
```

`address`开发者机器的IP地址在哪里。当然，如果他们改变网络，我必须再次执行它。有没有办法像我在 SQL Server 上体验过的那样允许所有远程连接，或者出于某种原因这是一个坏主意？我们还有用户名和密码。我显然有点困惑。

另外：这是一个开发数据库，​​只能从我们的内部网络访问。我理解为什么让每个人都可以访问生产数据库是个坏主意。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-04-19T20:27:13.883

正如上面 Ryan 所指出的，您需要的命令是

```
GRANT ALL ON *.* to user@'%' IDENTIFIED BY 'password'; 
```

但是，请注意，文档表明，要使其正常工作，`localhost`必须为同一用户创建另一个用户帐户；否则，自动创建的匿名帐户`mysql_install_db`优先，因为它具有更具体的主机列。

换句话说; 为了让用户`user`能够从任何服务器进行连接；2个账户需要创建如下：

```
GRANT ALL ON *.* to user@localhost IDENTIFIED BY 'password'; 
GRANT ALL ON *.* to user@'%' IDENTIFIED BY 'password'; 
```

在此处阅读完整文档[。](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)

这是相关的参考资料：

> 以 root 身份连接到服务器后，您可以添加新帐户。以下语句使用 GRANT 设置四个新帐户：

```
mysql> CREATE USER 'monty'@'localhost' IDENTIFIED BY 'some_pass';
mysql> GRANT ALL PRIVILEGES ON *.* TO 'monty'@'localhost'
    ->     WITH GRANT OPTION;
mysql> CREATE USER 'monty'@'%' IDENTIFIED BY 'some_pass';
mysql> GRANT ALL PRIVILEGES ON *.* TO 'monty'@'%'
    ->     WITH GRANT OPTION;
mysql> CREATE USER 'admin'@'localhost';
mysql> GRANT RELOAD,PROCESS ON *.* TO 'admin'@'localhost';
mysql> CREATE USER 'dummy'@'localhost'; 
```

> 这些语句创建的帐户具有以下属性：
> 
> 其中两个帐户的用户名是 monty，密码是 some_pass。这两个帐户都是超级用户帐户，具有执行任何操作的完全权限。'monty'@'localhost' 帐户只能在从本地主机连接时使用。'monty'@'%' 帐户使用 '%' 通配符作为主机部分，因此它可用于从任何主机连接。
> 
> **必须同时拥有 monty 的两个帐户才能从任何地方以 monty 的身份进行连接**。如果没有 localhost 帐户，当 monty 从本地主机连接时，由 mysql_install_db 创建的 localhost 的匿名用户帐户将优先。因此，monty 将被视为匿名用户。原因是匿名用户帐户比 'monty'@'%' 帐户具有更具体的主机列值，因此在用户表排序顺序中排在前面。（用户表排序在第 6.2.4 节“访问控制，第 1 阶段：连接验证”中讨论。）

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-10-01T12:25:02.933

您可以通过编辑 /etc/my.cnf 来禁用所有安全性：

```
[mysqld]
skip-grant-tables 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-19T20:15:11.463

```
GRANT ALL ON *.* to user@'%' IDENTIFIED BY 'password'; 
```

将允许特定用户从任何地方登录。

这很糟糕，因为它删除了一些安全控制，即如果帐户被盗用。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-06-20T23:42:29.687

> 安装和设置 mysql 以从任何地方远程连接不适用于**mysql_secure_installation ！** （[https://dev.mysql.com/doc/refman/5.5/en/mysql-secure-installation.html](https://dev.mysql.com/doc/refman/5.5/en/mysql-secure-installation.html)）

# 在 Ubuntu 上，使用以下命令安装 mysql：

```
sudo apt-get install mysql-server 
```

# 在 /etc/mysql/my.cnf 中只有以下内容

```
[mysqld]
#### Unix socket settings (making localhost work)
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock

#### TCP Socket settings (making all remote logins work)
port            = 3306
bind-address = 0.0.0.0 
```

# 使用从服务器登录数据库

mysql -u 根目录 -p

# 使用以下语句创建数据库用户

```
grant all privileges on *.* to ‘username’@‘%’ identified by ‘password’; 
```

# 打开防火墙：

```
sudo ufw allow 3306 
```

# 重启mysql

```
sudo service mysql restart 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-22T14:06:33.867

您还需要在配置文件中禁用以下行： bind-address = 127.0.0.1

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-02T10:20:33.840

```
mysql> CREATE USER 'monty'@'192.168.%.%' IDENTIFIED BY 'some_pass';
mysql> GRANT ALL PRIVILEGES ON *.* TO 'monty'@'192.168.%.%' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-24T01:01:36.317

**你只需要：**

**第一步：**

```
grant all privileges on *.* to 'user'@'IP' identified by 'password'; 
```

或者

```
grant all privileges on *.* to 'user'@'%' identified by 'password'; 
```

**第二步：**

```
sudo ufw allow 3306 
```

**第三步：**

```
sudo service mysql restart 
```

# ruby-on-rails - Rails link_to 工作怪异

> ID：10236004
> 
> 赞同：-1
> 
> 时间：2012-04-19T20:12:59.147
> 
> 标签：ruby-on-rails, link-to

我在部分（update_dashboard）中设置了一个link_to，它看起来像这样

```
link_to "Link", hash, {:url => {:controller => "results", :action => "update_report"}},     :remote => true 
```

“哈希”是我传递给控制器​​的一组输入。

可以看出。我希望“链接”映射到“结果”控制器中的“更新报告”操作。

但是，我发现在呈现页面后，当我单击链接时，它只会在新页面中显示部分内容。

我进入了 Firebug，这就是链接的呈现方式

```
<a url="{:controller=>"results", :action=>"update_report"}" href="/test/update_dashboard?branch=xxxx&brand=xx&end_time=2012-02-29+22%3A59&repo=xxxx%2Fxx&start_time=2012-02-17+18%3A20">Link</a> 
```

为什么 href 指向 /test/update_dashboard ？为什么不采用我为控制器属性提供的参数

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:33:46.583

尝试，

```
<%= link_to "Link", {
        :controller => "results", 
        :action => "update_report", 
        :hash => hash,
        :remote => true } %> 
```

如果您没有使用 rails 当前版本，请尝试使用

```
link_to_remote "link", :update => "results",
:url => { :controller => "results", :action => "update_report", :hash => hash } 
```

[参考](https://apidock.com/rails/ActionView/Helpers/PrototypeHelper/link_to_remote)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:34:39.207

看看link_to方法源：[https ://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/url_helper.rb#L236](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/url_helper.rb#L236)

由于 'hash' 变量是带有键和值的真实散列，因此您需要将其与 url 散列合并，如下所示：

```
<% hash = { :param1 => "value1", :param2 => "value2"}  %>
<%= link_to 'MyLink', { :controller => "questions", :action => "index" }.merge(hash), :id => "link_id", :class => "link_class" %> 
```

它产生你想要的链接：

```
<a href="/questions?param1=value1&amp;param2=value2" class="link_class" id="link_id">MyLink</a> 
```

# javascript - 使用 javascript 和 jquery 将图像添加到 svg 文件

> ID：10236006
> 
> 赞同：4
> 
> 时间：2012-04-19T20:13:23.843
> 
> 标签：javascript, jquery, image, svg

我正在尝试将图像添加到 SVG 文件中。我尝试了以下代码::

```
drawImage : function(src, x, y, h, w) {
        var img = document.createElementNS("http://www.w3.org/2000/svg", "image");
        var $img = $(img);
        $img.attr('x', x);
        $img.attr('y', y);
        $img.attr('width', w);
        $img.attr('height', h);
        $img.attr('xlink:href', src);
        $('g').append($img);
    } 
```

但图像没有出现。当我选择所有图像时..使用`$('image')`我找到图像，我可以选择它，但仍然..它不可见。我试图调查这个问题，但一无所获。我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:31:51.733

您可以使用以下`setAttributeNS`方法：

```
var img = document.createElementNS('http://www.w3.org/2000/svg','image');
img.setAttributeNS(null,'height','200');
img.setAttributeNS(null,'width','200');
img.setAttributeNS(null,'id','theID');
img.setAttributeNS('http://www.w3.org/1999/xlink','href','src');
img.setAttributeNS(null,'x','0');
img.setAttributeNS(null,'y','0');
$('#g').append(img); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:19:55.617

将宽度和高度分配给 在您的代码`$('g')`中保存的怎么样？`$img`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:21:28.100

我找到了一个 jQuery 插件解决了我的问题[jQuery.svg](http://archive.plugins.jquery.com/project/svg)

它有几种方法来绘制不同的形状，包括图像。

似乎它是通过使用本机 JavaScript 创建一个 dom 节点来添加图像的。它可以工作

# php - PHP preg_replace 在最后一个下划线之后出现的任何文本

> ID：10236008
> 
> 赞同：3
> 
> 时间：2012-04-19T20:13:26.597
> 
> 标签：php, regex, preg-replace, preg-match

我可以使用`explode`（或玩得开心`strrpos`）来做到这一点，但我更喜欢使用`preg_replace`，因为我认为应该更快一些（不是吗？）。此外，它简洁而优雅。

目的是，给定一个字符串，`a_b_c`以获取另一个字符串**，其中最后一个`_`**字符串替换为传递的字符串。

我不擅长正则表达式。我得找时间买一本好书学习。无论如何，我已经尝试将此正则表达式`'/_(.*)$/'`匹配*字符串的结尾，捕获最后一个下划线之后的任何字符*。

我的论点有什么问题？

```
// Do it using explode
function foo($string, $replacement)
{
    $pieces = explode('_', $string);
    array_pop($pieces);
    return implode('_', array_merge($pieces, array($replacement)));
}

// Do it using regular expression (not working)
function bar($string, $replacement)
{
    return preg_replace('/_(.*)$/', $replacement, $string);
}

echo foo('a_b_c', 3); // Prints a_b_3
echo bar('a_b_c', 3); // Prints a3 wrong!!! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:16:34.433

你很接近，你正在寻找的模式是这样的：

```
([^_]*)$ 
```

这将仅匹配非下划线的文本，尽可能靠近字符串的末尾。它也不包括下划线，因为您的替换字符串不`$1`用于指定匹配组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:53:17.703

根据您的常用搜索字符串和您的 PCRE 版本，`preg_replace`或者`strrpos`可能会最好：

## 职能

```
function usingExplode($string, $replacement) {
    $pieces = explode('_', $string);
    array_pop($pieces);
    return implode('_', array_merge($pieces, array($replacement)));
}

function usingStrrpos($string, $replacement) {
    return substr($string, 0, strrpos($string, '_') + 1) . $replacement;
}

function usingPreg($string, $replacement) {
    return preg_replace('/_[^_]*$/', '_' . $replacement, $string);
} 
```

## 测试工具

```
function speedTest($function, $string, $count = 100000) {
    $start = microtime(true);

    for ($i = 0; $i < $count; $i++) {
        $function($string, 'replacement');
    }

    $end = microtime(true);

    printf('%-12s: %01.2fs%s', $function, $end - $start, PHP_EOL);
}

$tests = array('a_b_c', 'abcdefghijklmnopqrstuvwxy_z', 'a_bcdefghijklmnopqrstuvwxyz', 'a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z');

foreach ($tests as $test) {
    echo $test . ':' . PHP_EOL;
    speedTest('usingExplode', $test);
    speedTest('usingStrrpos', $test);
    speedTest('usingPreg',    $test);
    echo PHP_EOL;
} 
```

## 结果

```
a_b_c:
usingExplode: 0.64s
usingStrrpos: 0.34s
usingPreg   : 0.33s

abcdefghijklmnopqrstuvwxy_z:
usingExplode: 0.61s
usingStrrpos: 0.32s
usingPreg   : 0.32s

a_bcdefghijklmnopqrstuvwxyz:
usingExplode: 0.60s
usingStrrpos: 0.32s
usingPreg   : 0.32s

a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z:
usingExplode: 1.39s
usingStrrpos: 0.32s
usingPreg   : 0.71s 
```

请注意（至少在我使用 PHP 5.4.0 的设置中），直到最后一个下划线之前`preg_replace`有`strrpos`大量下划线为止。

**编辑**：我[将 bfrohs 的正则表达式](https://stackoverflow.com/a/10236047/283078)插入到套件中，除非要替换的下划线靠近字符串的开头，否则效果不佳：

```
a_b_c:
usingPreg2: 0.40s

abcdefghijklmnopqrstuvwxy_z:
usingPreg2: 1.91s

a_bcdefghijklmnopqrstuvwxyz:
usingPreg2: 0.38s

a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z:
usingPreg2: 1.04s 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T20:17:07.860

问题是第一个下划线匹配。**除了下划线之外**，你想要下划线后面的任何内容：

```
'/_([^_]*)$/' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T20:17:53.240

正则表达式`/_(.*)$/`匹配下划线，后跟任何文本，然后是字符串的结尾。没有什么可以阻止“任何文本”包含下划线，默认情况下，匹配器将选择最左边、最长的匹配项。所以在“a_b_c”中，它在“a”之后匹配。

您可以通过将`.`(匹配任何字符)替换为匹配*除*下划线以外的`[^_]`任何字符的字符类来解决此问题。

 *此外，由于您没有对捕获的组做任何事情，因此不需要括号。而且，根据您的示例，由于您不想替换下划线本身，因此您应该将其排除在正则表达式之外。

```
function bar($string, $replacement)
{
    return preg_replace('/[^_]*$/', $replacement, $string, 1);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T20:22:42.807

如果您关心速度，则使用 strpos 将比 preg_replace 更快。所有字符串函数（据我所知）都比正则表达式函数慢。

这是速度测试之一：http: [//lzone.de/articles/php-string-search.htm](http://lzone.de/articles/php-string-search.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T20:16:21.440

`'/([^_]+)$/'`匹配除*最后*一个下划线*之后*的下划线以外的所有内容。

***注意：**没有必要将下划线与此匹配。这样，您在进行替换时就不会丢失最后一个下划线。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-19T22:23:57.887

这看起来像一个表情符号，但我认为它应该可以工作：

```
return preg_replace('/(.*_).*/', $replacement, $string); 
```*

# python - Scrapy 不抓取整个网站

> ID：10236010
> 
> 赞同：1
> 
> 时间：2012-04-19T20:13:34.010
> 
> 标签：python, screen-scraping, scrapy

我遇到了一个问题，即我的 CrawlSpider 没有抓取整个网站。我正在尝试抓取新闻网站；它收集了大约 5900 个项目，然后以“已完成”的原因退出，但刮掉的项目中有很大的日期差距。我没有使用任何自定义中间件或设置。谢谢你的帮助！

我的蜘蛛（请原谅底部杂乱的列表代码）和之后日志文件的最后几行：

```
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.contrib.spiders import CrawlSpider, Rule
from news.items import NewsItem
import re

class CrawlSpider(CrawlSpider):
name = 'crawl'
allowed_domains = ['domain.com']
start_urls = ['http://www.domain.com/portal//']
rules = (
    Rule(SgmlLinkExtractor(allow=r'news/pages/.*|[Gg]et[Pp]age/.*'), callback='parse_item', follow=True),
)

def parse_item(self, response):
    p = re.compile(r"(%\d.+)|(var LEO).*|(createInline).*|(<.*?>|\r+|\n+|\s{2,}|\t|[\'])|(\xa0+|\xe2+|\x80+|\\x9.+)")
    hxs = HtmlXPathSelector(response)
    i = NewsItem()
    i['headline'] = hxs.select('//p[@class = "detailedArticleTitle"]/text()').extract()[0].strip().encode("utf-8")
    i['date'] = hxs.select('//div[@id = "DateTime"]/text()').re('\d+/\d+/[12][09]\d\d')[0].encode("utf-8")
    text = [graf.strip().encode("utf-8") for graf in hxs.select('//div[@id = "article"]//div[@style = "LINE-HEIGHT: 100%"]|//div[@id = "article"]//p//text()').extract()]
    text2 = ' '.join(text)
    text3 = re.sub("'", ' ', p.sub(' ', text2))
    i['text'] = re.sub('"', ' ', text3)
    return i 
```

日志输出：

```
2012-04-19 11:13:57-0700 [crawl] INFO: Closing spider (finished)
2012-04-19 11:13:57-0700 [crawl] INFO: Stored csv feed (5949 items) in: news.csv
2012-04-19 11:13:57-0700 [crawl] INFO: Dumping spider stats:
{'downloader/exception_count': 2,
 'downloader/exception_type_count/twisted.internet.error.ConnectionLost': 2,
 'downloader/request_bytes': 5778930,
 'downloader/request_count': 12380,
 'downloader/request_method_count/GET': 12380,
 'downloader/response_bytes': 635795595,
 'downloader/response_count': 12378,
 'downloader/response_status_count/200': 6081,
 'downloader/response_status_count/302': 6062,
 'downloader/response_status_count/400': 234,
 'downloader/response_status_count/404': 1,
 'finish_reason': 'finished',
 'finish_time': datetime.datetime(2012, 4, 19, 18, 13, 57, 343594),
 'item_scraped_count': 5949,
 'request_depth_max': 23,
 'scheduler/disk_enqueued': 12380,
 'spider_exceptions/IndexError': 131,
 'start_time': datetime.datetime(2012, 4, 19, 17, 16, 40, 75935)}
2012-04-19 11:13:57-0700 [crawl] INFO: Spider closed (finished)
2012-04-19 11:13:57-0700 [scrapy] INFO: Dumping global stats:
{} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:21:53.723

方法`parse_item()`应该返回加载的项目。请参阅[scrapy 文档。](http://doc.scrapy.org/en/latest/topics/loaders.html) 像这样的东西：

```
class MySpider(CrawlSpider):
    name = 'crawl'
    allowed_domains = ['domain.com']
    start_urls = ['http://www.domain.com/portal/']
    rules = (Rule(SgmlLinkExtractor(allow=r'news/pages/.*|[Gg]et[Pp]age/.*'),
             callback='parse_item', follow=True))

    def parse_item(self, response):
        p = re.compile(r"(%\d.+)|(var LEO).*|(createInline).*|(<.*?>|\r+|\n+|\s{2,}|\t|[\'])|(\xa0+|\xe2+|\x80+|\\x9.+)")
        hxs = HtmlXPathSelector(response)
        i = NewsItem(selector=hxs)
        i.add_xpath('headline', '//p[@class = "detailedArticleTitle"]/text()')
        i.add_xpath('date', '//div[@id = "DateTime"]/text()', 
                    re=('\d+/\d+/[12][09]\d\d'))
        # Do something...
        return i.load_item() 
```

后处理（例如`strip()`和`encode("utf-8")`）可以在“管道”中进行。

**更新：**您的代码中有几个不准确之处：

*   您的自定义蜘蛛类名称必须与继承类（`CrawlSpider`）不同，更改它的名称（例如，`MySpider`）
*   start_urls 不正确：' http: [//www.domain.com/portal//](http://www.domain.com/portal//) ' 带有 2 个斜杠
*   好的风格是将选择器的参数设置为`NewsItem`对象定义（`i = NewsItem(selector=hxs)`）

# c# - 具有从抽象类型扩展的成员的类的 XML 序列化

> ID：10236014
> 
> 赞同：0
> 
> 时间：2012-04-19T20:14:05.667
> 
> 标签：c#, .net, xml-serialization

我`InvalidOperationException`在尝试运行此代码时遇到了问题。

## 示例代码

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Xml.Serialization;

namespace XMLSerializationExample
{
    class Program
    {
        static void Main(string[] args)
        {
            Caravan c = new Caravan();
            c.WriteXML();
        }
    }

    [XmlRoot("caravan", Namespace="urn:caravan")]
    public class Caravan
    {
        [XmlElement("vehicle")]
        public Auto Vehicle;
        public Caravan()
        {
            Vehicle = new Car {
                Make = "Suzuki",
                Model = "Swift",
                Doors = 3
            };
        }

        public void WriteXML()
        {
            XmlSerializer xs = new XmlSerializer(typeof(Caravan));
            using (TextWriter tw = new StreamWriter(@"C:\caravan.xml"))
            {
                xs.Serialize(tw, this);
            }
        }
    }
    public abstract class Auto
    {
        public string Make;
        public string Model;
    }
    public class Car : Auto
    {
        public int Doors;
    }
    public class Truck : Auto
    {
        public int BedLength;
    }
} 
```

## 内部异常

> {“类型 XMLSerializationExample.Car 不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型。”}

## 问题

如何修复此代码？还有什么我应该做的吗？

我在哪里放置以下内容？

```
[XmlInclude(typeof(Car))]
[XmlInclude(typeof(Truck))] 
```

将属性放在`Auto`或`Caravan`类之上不起作用。将类型直接添加到`XmlSerializer`下面的示例中也不起作用。

```
XmlSerializer xs = new XmlSerializer(typeof(Caravan), new Type[] {
    typeof(Car), typeof(Truck) }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:57:26.160

我无法真正解释为什么需要这样做，但除了添加`XmlInclude`属性之外，您还需要确保您的类指定了一些非空名称空间，因为您已经在根目录上指定了名称空间（可能是一个错误）。它不一定必须是相同的命名空间，但它必须是某种东西。它甚至可以是一个空字符串，但它不能是`null`（这显然是默认值）。

这可以很好地序列化：

```
[XmlRoot("caravan", Namespace="urn:caravan")]
public class Caravan
{
    [XmlElement("vehicle")]
    public Auto Vehicle;

    //...
}

[XmlInclude(typeof(Car))]
[XmlInclude(typeof(Truck))]
[XmlRoot("auto", Namespace="")] // this makes it work
public abstract class Auto
{
    [XmlElement("make")] // not absolutely necessary but for consistency
    public string Make;
    [XmlElement("model")]
    public string Model;
} 
```

# javascript - 使用 javascript 抓取价格

> ID：10236015
> 
> 赞同：0
> 
> 时间：2012-04-19T20:14:10.707
> 
> 标签：javascript, jquery

我必须从某些网站上抓取产品的图像，我正在使用 javascript 来抓取它。到目前为止，我已经成功地抓取了图像，如下所示

```
var  images = document.images;

for (var i = 0; i < images.length; i++) {
    img =  images[i]; 
```

我也想从文件中刮掉价格。我知道这是可能的，一些网站已经在这样做，但不确定如何。通过文档文本匹配“价格”字符串似乎是一种可能性，但不确定如何做到这一点，还有没有更好的方法。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:22:54.843

这取决于您对相关页面的了解程度。如果你是盲目的，你总是可以使用一些可怕的`document.body.innerHTML.match(/£\d+\.\d+/g)`东西（或类似的东西，取决于货币）。无论哪种方式，您都希望在页面中查找和匹配模式并从那里获取价格。

奖励积分：看看他们是否有谷歌基础提要（未受保护） - 你会惊讶于有多少人这样做。这将（通常）是一个 XML 提要，其中包含您可能需要的一切。

# c# - 如何确保熵值

> ID：10236016
> 
> 赞同：2
> 
> 时间：2012-04-19T20:14:15.110
> 
> 标签：c#, cryptography, entropy, .net

我有一个用 C# 编写的应用程序。使用 Net 4.0，用户将使用 System.Security.Cryptography 将他们的电子邮件密码存储到用户配置文件中。

实际密码存储在 SecureString 中，并使用 System.Security.Cryptography.ProtectedData.Unprotect(encrypted data, entropy, currentuser) 加密

密码仅在发送时转换为普通字符串（即将通过 https 会话）

我想知道的是，熵值需要保持不变，否则您无法正确解密密码，防止窥探找到熵值的最佳方法是什么，但要确保熵值是恒定的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T22:55:49.027

您必须使用相同的熵值。

您可以根据熵值制作一个加盐哈希表[这是在 Db 中加盐和存储密码的方法吗？](https://stackoverflow.com/questions/5431354/is-this-the-way-to-salt-and-store-a-password-in-db)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T14:56:20.873

我假设您的意思是，它受到保护的保护，而不受保护的读取。

你不需要保护熵，它不是关键。Windows 上的 DPAPI 使用用户的登录凭据来生成密钥。实际上，在这种情况下，熵就像密码散列的盐值（实际上，它可能实际上是馈入 PBKDF2 的盐）

现在，DPAPI 有一个问题：一旦您登录，每个人都可以读取数据。例如，我可以编写一个程序，如果它可以读取您的配置文件（并且可能可以），我可以进行相同的调用，并且自从您登录后，该值就会解密。作为对此的轻微缓解，您可能希望在程序中对熵值的一部分进行硬编码，并从配置文件中读取另一半做点什么。

# ios - 在用户输入时更新标签

> ID：10236026
> 
> 赞同：1
> 
> 时间：2012-04-19T20:14:46.470
> 
> 标签：ios, xcode, uitextfield

看来我需要使用

```
@interface ViewController : UIViewController <UITextFieldDelegate> 
```

和

```
- (void)textViewDidChange:(UITextView *)textView {
label.text = textField.text;    
} 
```

在 viewDidLoad 中可能是这样的

```
- (void)viewDidLoad
{
[super viewDidLoad];

[textField addTarget:self action:@selector(textViewDidChange) forControlEvents:UIControlEventEditingChanged];
} 
```

如果我这样做，它会在输入文本时崩溃......否则它只会在完成时更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:16:36.093

你不需要最后一行。改为使用`textField.delegate=self;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:34:56.720

代替

```
[textField addTarget:self action:@selector(textViewDidChange) forControlEvents:UIControlEventEditingChanged]; 
```

和

```
[textField addTarget:self action:@selector(textViewDidChange:) forControlEvents:UIControlEventEditingChanged]; 
```

因为您的方法需要一个参数：文本字段本身。该参数是选择器的一部分，由冒号表示。

**或者**只是实现 UITextView 委托方法：也有一个 value-changed-callback。

# php - 使用 PHP 将规范链接标签添加到头部

> ID：10236027
> 
> 赞同：0
> 
> 时间：2012-04-19T20:14:51.147
> 
> 标签：php, html, joomla

Google 不会识别 Canonical 链接标签，除非它在 ​​Head 中，我不会让您厌烦详细信息，但我只能编辑 Joomla 网站上的文章页面。我在任何地方都安装了自定义代码，因此我可以将 PHP 插入文章中。

有没有我可以添加的 PHP 将添加一个规范的链接标签在我的`<head>`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:33:52.497

我认为 JDocumentHTML 是您所需要的。
请参阅本[文档](http://docs.joomla.org/JDocumentHTML/addCustomTag)。

# c# - 如何将空选项添加到下拉列表

> ID：10236028
> 
> 赞同：1
> 
> 时间：2012-04-19T20:15:00.937
> 
> 标签：c#, asp.net-mvc

我正在尝试过滤掉我的一些下拉列表以仅显示活动的项目。但同时我想添加一个空列表项作为第一个默认选项，因为并非所有下拉列表都需要选择。

这是我确保显示活动项目但不确定如何将空列表项功能添加到默认情况下的代码。

```
IOrderedQueryable<VisitType> visitTypes = 
    _visitTypeRepository.FindAll().OrderBy(a => a.Description);

viewModel.VisitTypes = visitTypes
    .Where(a=>a.IsActive ?? false)
    .ToSelectList("VisitTypeId", "Description", viewModel.VisitTypeId.ToString()); 
```

这是我的 VisitType 代码：

```
[MetadataType(typeof(VisitTypeMetadata))]
[ScaffoldTable(true)]
[LocalizedDisplayName("EntityNamePlural", NameResourceType = typeof(Resources.Entities.VisitType))]
[DisplayColumn("Description", "Description", false)]
public partial class VisitType
{

    public static VisitType All = new VisitType() { Description = "All", VisitTypeId = 0 };

    public string ValueDescription
    {
        get { return this.VisitTypeId.ToString() + "|" + Description; }
    }

    public class VisitTypeMetadata
    {
        [ColumnOrder(0)]
        [ScaffoldColumn(false)]
        [Filter(Enabled = false)]
        [DefaultBoolean(Checked = true)]
        [DisplayName("Active")]
        public object IsActive { get; set; }

        [ColumnOrder((1))]
        public object Description { get; set; }

        [ScaffoldColumn(false)]
        public object VisitActivityEntries { get; set; }
    }
} 
```

任何帮助或想法都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:25:01.453

检查这个问题的答案，它几乎是重复的，并且准确地回答了您在此处寻找的内容

[添加默认的 SelectListItem](https://stackoverflow.com/questions/894130/adding-a-default-selectlistitem)

```
return new[] { new SelectListItem { Text = "", Value = "" } }.Concat(
       visitTypes
.Where(a=>a.IsActive ?? false)
.ToSelectList("VisitTypeId", "Description", viewModel.VisitTypeId.ToString())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:28:21.127

我使用 SelectedIndex = -1; 过去取得了不错的成绩。

# ruby - 我应该在 Git 中包含 public/build 文件夹以进行 Heroku 部署吗

> ID：10236030
> 
> 赞同：1
> 
> 时间：2012-04-19T20:15:05.070
> 
> 标签：ruby, git, deployment, heroku

我现在正在开发一个使用 CoffeeScript、SASS 和其他一些预处理器构建的静态站点/Web 应用程序。我设置了一个 Rakefile 来轻松构建站点的测试和生产版本（编译代码、缩小、复制静态资产等）。最终，该站点最终将成为 HTML/CSS/JS + 资产（此特定项目不需要数据库或服务器端处理）。

我想开始使用 Heroku 作为测试服务器，也可能是生产服务器，因为 Heroku 可以很容易地设置为通过 Rack 为静态站点提供服务。

我的问题是，现在我的 Git 存储库中没有包含该站点的构建版本，只有源代码。由于 Heroku 部署是通过 Git 进行的，这意味着我不会将我的实际站点发布到 Heroku，而只会发布我的源文件。

通常，我永远不会在 Git 存储库中包含“构建”文件夹，但现在我想知道它是否是该站点的最佳解决方案。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T22:55:56.283

如果您正在使用 Cedar，并且有某种 rake 任务来构建您的站点，那么您不需要签入它，但您可能需要查看某种 buildpack 来完成它。需要在部署过程中运行构建。

看看人们用来创建静态网站的各种东西，比如 Nesta 和 Jekyll。

# c# - 使用应用程序生命周期为每个构造函数参数值创建一个类的实例

> ID：10236037
> 
> 赞同：2
> 
> 时间：2012-04-19T20:15:23.773
> 
> 标签：c#, ninject

我有

```
class Sender : ISender
{
    public Sender(string queueName)
    { ...
    }
} 
```

我只想要一个具有给定 queueName 的类 Sender 实例。这个实例应该是相同的，并且在应用程序运行时不被释放。

我可以使用类似的代码

```
ISender testSender = 
    Kernel.Get<ISender>(new ConstructorArgument("queueName", "Test")); 
```

使用 queueName = "Test" 获取对发送者实例的引用

我可以使用什么 ninject 绑定来实现这个？

我试过了

```
Kernel.Bind<ISender>().To<BufferedMessageSender>()
    .InScope(c => 
      c.Parameters.FirstOrDefault(p => p.Name == "queueName").GetValue(c, null)); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:49:04.027

您应该使用[InSingletonScope](https://github.com/ninject/ninject/wiki/Object-Scopes)。

# java - 什么是 HttpClient？我如何得到它？

> ID：10236038
> 
> 赞同：0
> 
> 时间：2012-04-19T20:15:24.357
> 
> 标签：java, httpclient

我正在测试一个通过 HTTP 上传的 Java 小程序上传器。他们还提供了一些用 .NET 编写的处理上传的服务器端文件。

当我尝试运行小程序时，它给了我以下错误：

```
You can't use http upload functionality because HttpClient library not installed on server. 
```

我正在运行带有 IIS6 的 Windows Server 2003。

我真的不确定此时我需要做什么才能使其正常工作。有谁知道我需要下载和安装什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:18:33.833

If you are looking for a Java library (since your question is tagged with Java), then possibly [the Apache Commons HttpClient library](http://hc.apache.org/httpclient-3.x/)

But it's likely that you're looking for something dotnet, and in that case, there is a [Microsoft library of same name](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx)

It sounds funny that a "client" library would be needed on the server, instead of on the client, but anything is possible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:33:13.347

原来是旧文件的问题。艾尔现在工作。– Julian Dormon 刚刚编辑

# javascript - 如何通过 javascript 访问 Topaz Signature Pad ActiveX 对象？

> ID：10236040
> 
> 赞同：0
> 
> 时间：2012-04-19T20:15:41.663
> 
> 标签：javascript, activex, electronic-signature, topaz-signatures

我们正在使用[Topaz Systems](http://www.topazsystems.com)签名板设备来记录文档上的电子签名。

这是公司提供的 javascript 使用演示：

> 基于 Javascript 的 HTML 互联网签名演示[下载](http://topazsystems.com/software/download/web/html_javascript_demo.zip)

签名板通过`<OBJECT />`元素添加到页面。

```
 <OBJECT classid=clsid:69A40DA3-4D42-11D0-86B0-0000C025864A height=75
         id=SigPlus1 name=SigPlus1
         style="HEIGHT: 90px; WIDTH: 300px; LEFT: 0px; TOP: 0px; border: 1px solid #000; margin-top:10px; " VIEWASTEXT>
     <PARAM NAME="_Version" VALUE="131095">
     <PARAM NAME="_ExtentX" VALUE="4842">
     <PARAM NAME="_ExtentY" VALUE="1323">
     <PARAM NAME="_StockProps" VALUE="0">
 </OBJECT> 
```

在 javascript 中对对象执行操作的文档引用 VBScript 并仅通过 id 调用对象。

```
<script language="javascript">  

    function OnClear() {
       SigPlus1.ClearTablet();
    }

    function OnCancel() {
       SigPlus1.TabletState = 0;
    }

</script> 
```

我发现这种方法无法在 DOM 中找到具有所有关联方法和属性的实际对象。调用这些函数会导致：

> SigPlus1 未定义

或者

> SigPlus1.ClearTablet() 不是函数

如何在 javascript 函数中获取实际对象以调用其方法并设置其属性？

我尝试使用原型和 jQuery 来选择 DOM 中的对象。

```
var vsig = $('SigPlus1');  // prototype
var vsig = $('#SigPlus1'); // jQuery
var vsig = document.form.SigPlus1; // document 
```

这些都没有给出所需的实际对象。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:55:32.487

我能够通过使用获得实际对象`document.getElementById(id);`

所以这段代码最终起作用了：

```
var vSig = document.getElementById('SigPlus1'); 
```

我希望这可以避免其他人不得不搜索这个答案！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:33:53.497

初始化 vSig 后，您可以调用相关函数并访问签名的属性。例如，“保存签名”按钮 onclick 应该会触发如下内容：

```
function OnSaveSignature() {
    var vSig = document.getElementById('SigPlus1');
    if(vSig.NumberOfTabletPoints == 0){ // No signature data (Did not sign yet)
        alert("No Signature Found!");
    } else {
        vSig.TabletState = 0;  // Turn off sig tablet 
        vSig.SigCompressionMode = 1;  // Set compression mode
        mySaveSigFunction(vSig.SigString);  // Save sig data
    }  // Done!
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:09:13.523

我设法通过忽略 OnSign() 的“脚本”功能并将我的按钮中的 onclick="OnSign()" 替换为：

```
<INPUT id="SignBtn" name="SignBtn" type="button" value="Sign" onclick="javascript:SigPlus1.TabletState = 1;"> 
```

（即，我只是从该部分获取了 javascript 代码并直接使用它而不是作为函数使用。

我想我的问题与您的回答有关，一旦变量 vSig 由 getElementbyId 设置，我该怎么办？因为我更愿意将代码留在我的脚本部分。

谢谢

# facebook - 按名称和位置搜索 Facebook 页面

> ID：10236048
> 
> 赞同：0
> 
> 时间：2012-04-19T20:16:22.153
> 
> 标签：facebook, facebook-graph-api

我正在寻找一种按名称和位置准确搜索 facebook 页面的方法，以便我可以检索页面上的信息。例如，假设我想在德克萨斯州哈斯莱特 ( [http://www.facebook.com/DixonInsurance](http://www.facebook.com/DixonInsurance) ) 搜索 Allstate 页面。由于“Allstate”在页面名称中，它出现在此搜索中：

```
https://graph.facebook.com/search?q=allstate&type=page&limit=100&access_token=[your access token here] 
```

它非常适合获取标题中包含“allstate”的页面的页面 ID 列表，但是这些页面的数量非常多。但是，为了找到包含哈斯莱特市的 Allstate 页面，我必须向 facebook 图表发送不相关的请求，直到我*最终*点击[http://graph.facebook.com/fql?q=select name,page_url,来自 page_id=365699213548 的页面的位置](http://graph.facebook.com/fql?q=select%20name,page_url,location%20from%20page%20where%20page_id=365699213548)。这有点像清空湖水来喝水——更不用说不相关的请求违反了 Facebook 的使用限制。

我不是在寻找地点，而是专门寻找页面。有没有办法在 opengraph 请求中添加城市要求，或者至少限制在找到我想要的页面之前需要搜索的页面数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:35:14.613

好吧，根据下面**[的](https://developers.facebook.com/docs/reference/api/)**`Searching`内容，仔细查看 Places 和 Pages，其中提到了 Places 的附加参数，但没有提到 Pages，因此您可能无法使用附加参数来缩小对 Pages 的搜索范围。

希望这可以帮助

# ruby - 将一个 erb 文件包含到另一个文件中

> ID：10236049
> 
> 赞同：32
> 
> 时间：2012-04-19T20:16:28.790
> 
> 标签：ruby, erb, templating

我正在编写一个最终输出 HTML 报告的命令行工具。该工具是用 Ruby 编写的。（我没有使用 Rails）。我试图将应用程序的逻辑保存在一组文件中，并将 HTML 模板（.erb 文件）保存在另一组文件中。

不过，我遇到了一个非常烦人的问题：我无法成功地将一个 .erb 文件包含到另一个文件中。

具体来说，我正在尝试做这样的事情（在伪代码中）：

```
<html>
<head>
  <style type='text/css'>
    [include a stylesheet here]
    [and another one here]
  </style>
</head>
<body>
  <p>The rest of my document follows... 
```

该示例代码段*本身就是*一个 erb 文件，它是从应用程序逻辑中调用的。

我这样做是为了让我的样式表远离主模板，以便更容易/更清洁地维护应用程序。但是，最终产品（报告）需要是一个没有依赖关系的单一、独立的 HTML 文件，因此，我想在生成报告时将这些样式表内联到文档头中。

这看起来应该很容易，但在过去的一个小时里，我一直在用头撞墙（以及谷歌搜索和 RTMF），而且我一点运气都没有。

这应该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-20T06:25:07.147

通过从主模板的 <%= %> 中评估子模板，可以嵌套 ERB 模板。

```
<%= ERB.new(sub_template_content).result(binding) %> 
```

例如：

```
require "erb"

class Page
  def initialize title, color
    @title = title
    @color = color
  end

  def render path
    content = File.read(File.expand_path(path))
    t = ERB.new(content)
    t.result(binding)
  end
end

page = Page.new("Home", "#CCCCCC")
puts page.render("home.html.erb") 
```

home.html.erb：

```
<title><%= @title %></title>
<head>
  <style type="text/css">
<%= render "home.css.erb" %>
  </style>
</head> 
```

home.css.erb：

```
body {
  background-color: <%= @color %>;
} 
```

产生：

```
<title>Home</title>
<head>
  <style type="text/css">
body {
  background-color: #CCCCCC;
}
  </style>
</head> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-05-20T13:30:37.657

我在 Sinatra 应用程序中需要它，我发现我可以像调用原始应用程序一样调用它：

在 sinatra 应用程序中，我将索引称为：

```
erb :index 
```

然后，在索引模板中，我可以对任何子模板执行相同的操作：

```
<div id="controls">
  <%= erb :controls %> 
```

..显示“controls.erb”模板。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-31T11:04:38.243

```
<%= ERB.new(sub_template_content).result(binding) %> 
```

不起作用，当您使用**erb** cli 实用程序时，会覆盖多个**_erbout**变量，并且只使用最后一个。

像这样使用它：

```
<%= ERB.new(sub_template_content, eoutvar='_sub01').result(binding) %> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-07-07T16:33:02.197

在我的 .erb 文件中，我必须这样做：

```
<%= ERB.new(File.read('pathToFile/myFile.erb'), nil, nil, '_sub01').result(binding) %> 
```

该线程中的其他答案假设您的内容中有一个变量。此版本检索内容。

# c++ - Why would a constructor fail in an unnamed namespace?

> ID：10236055
> 
> 赞同：-3
> 
> 时间：2012-04-19T20:16:50.390
> 
> 标签：c++

I'm implementing the Discrete Fourier Transform for a school assignment, and I've created a `DFT` class which constructs the transformation matrix. For some reason, when I instantiate a `DFT` object in `main()` everything works fine, but the matrix isn't constructed properly if I use the unnamed namespace.

Works:

```
int main()
{
    DFT matrix(size);
    ...
    matrix.Transform(data);
    ...
} 
```

Doesn't work:

```
namespace
{
    DFT matrix(size);
}

int main()
{
    ...
    matrix.Transform(data);
    ...
} 
```

Compiler bug, or am I misremembering how the unnamed namespace works?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:48:50.820

只是一个疯狂的猜测：

```
namespace
{
    DFT matrix(size);
} 
```

它从哪里来`size`？请记住，这将在运行*之前*`main`构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-20T16:39:45.877

这里的问题是您实际上不能像这样从未命名的命名空间调用构造函数......

```
namespace {
    DFT matrix(size);
} 
```

实际上是声明一个函数。另一方面，

```
namespace {
    DFT matrix;
} 
```

可以工作，但会使用零初始化器。

# ajax - 在 Sencha Touch 2 中加载商店时，如何停止额外的 OPTIONS http 请求？

> ID：10236056
> 
> 赞同：0
> 
> 时间：2012-04-19T20:16:51.667
> 
> 标签：ajax, sencha-touch, sencha-touch-2

我正在 Sencha Touch 2 中编写一个应用程序，作为其中的一部分，我有许多使用 ajax 代理和 json 阅读器从我的外部 Web 服务自动加载的商店。该服务托管在与客户端不同的域上，因此我必须在服务器上设置 Access-Control-Allow-Origin 才能使其工作。

这个设置一切正常，但我使用 Fiddler 来查看请求性能，我注意到我的 web 服务的每次调用实际上都会发出两次。一次作为 OPTIONS 请求，然后再次作为预期的 GET。据我所知， OPTIONS 请求没有任何用处——至少在我的设置中——所以我想摆脱它以使加载性能更快。

有谁知道这是怎么回事？如果我可以在代理上设置一个可以将其关闭的配置，那就太好了，但我还没有在 e 上找到。

感谢您的关注！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T22:40:45.067

我想通了，这一切都与 Sencha 及其 ajax 调用一起传递的 x-requested-with 标头有关。这篇博文 (http://remysharp.com/2011/04/21/getting-cors-working/) 详细介绍，但简短的版本是，在一个奇怪的功能中，浏览器会发出预航班选项仅在您在请求中包含任何自定义标头时检查。如果您没有在请求中添加任何标头而只是保持原样，则 GET 将顺利通过，无需检查 OPTIONS。

我在源代码中进行了挖掘，发现 Sencha 实际上确实有一个配置来控制是否发送 x-requested-with ，它在正常使用中并不是很暴露。

```
Ext.Ajax.setUseDefaultXhrHeader(false); 
```

我只是在请求发出之前设置它，它会丢弃 x-requested-with，只有 GET 会发出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:28:57.273

您需要 OPTIONS 请求，因为您正在访问来自不同域的数据。选项调用它用于获取 Access-Control-Allow-Origin 参数的值。如果未发出 OPTIONS 请求，则跨域将不起作用。

# guava - Guava cache eviction policy

> ID：10236057
> 
> 赞同：8
> 
> 时间：2012-04-19T20:16:55.077
> 
> 标签：guava

I tried guava cache recently and was surprised by eviction policy. Although the cache is clearly stated as an lru in docs, but it isn't defacto. For me evictions looks random as my test shows. (the test is to add 100 etnries, get 100 entries, pot different 100 entries, check eviction order) I'd not like to detect some unexpected evictions in runtime. Could you please provide some background behind eviction policy for a size limited Cache. How can i force guava cache to evict like LHM does?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-19T20:33:08.833

Guava 缓存*被分割成*不同的哈希表，`concurrencyLevel`以允许多个并发读取和写入。默认`concurrencyLevel`值为 4。基本上，如果您`maximumSize`设置为`100`，那么实际上只会导致四个段中的每一个段获得`maximumSize`25。这就是`maximumSize`文档说明的原因：

> 请注意，缓存可能会在超出此限制之前驱逐条目。随着缓存大小接近最大值，缓存会驱逐不太可能再次使用的条目。

因此，如果偶然有 30 个条目进入一个特定的细分市场，那么其中 5 个条目将被驱逐。

为 a 获得全局最近最少访问的驱逐的唯一方法`Cache`是通过设置完全关闭并发`concurrencyLevel(1)`。即使这样，文档也没有对元素的逐出顺序做出任何*保证*，您也不应该依赖它。

# sql - SQL query against one table showing counts of duplicate field values

> ID：10236058
> 
> 赞同：0
> 
> 时间：2012-04-19T20:16:58.380
> 
> 标签：sql, join, group-by

I have a table with 5 fields. Two of the fields will have duplicate values that match. I think I need to use one or two JOINS to get the data results I want.

Fields: `Machine, Message, Date, Severity, ID`

The two fields that will have duplicates are Machine and Message.

EXAMPLE DATA:

```
MACHINE  |  MESSAGE
--------------------
MACHINE1 |  ERROR1
MACHINE2 |  ERROR1
MACHINE3 |  ERROR1
MACHINE2 |  ERROR2
MACHINE2 |  ERROR2
MACHINE3 |  ERROR3
MACHINE1 |  ERROR3
MACHINE1 |  ERROR1 
```

I need the results to be like this:

```
MACHINE1, 2 - ERROR1, 1 - ERROR3

MACHINE2, 1 - ERROR1, 2 - ERROR2

MACHINE3, 1 - ERROR1, 1 - ERROR3 
```

I've been trying to search for the answer to this but haven't found the answer. I believe I will need JOIN or two with a possible `GROUP BY`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:27:22.713

```
create table #machineErrors (Machine nvarchar(20), Error nvarchar(20))

insert into #machineErrors values ('Machine1','Error1')
insert into #machineErrors values ('Machine2','Error1')
insert into #machineErrors values ('Machine3','Error1')
insert into #machineErrors values ('Machine2','Error2')
insert into #machineErrors values ('Machine2','Error2')
insert into #machineErrors values ('Machine3','Error3')
insert into #machineErrors values ('Machine1','Error3')
insert into #machineErrors values ('Machine1','Error1')

select  Machine, COUNT(*), [Error]
from    #machineErrors
group by Machine, [Error]
order by Machine, [Error] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:27:44.403

我不理解完整的问题，但似乎您正在寻找 SQL 中的旋转功能，以根据机器上的不同错误（1、2、3）聚合您的结果。

假设是 MSSQL ?? 因此，查询是基于您要汇总 3 个错误的假设。

```
SELECT Machine, [Error1], [Error2], [Error3]
FROM
    MessageTable
Pivot
(
  COUNT(Machine)
  FOR ErrorColumn 
  IN ([Error1], [Error2], [Error3])
) 
```

# ruby - 使用 rufus-scheduler 在 Ruby 中安排工作不工作

> ID：10236059
> 
> 赞同：1
> 
> 时间：2012-04-19T20:16:59.430
> 
> 标签：ruby, scheduling, rufus-scheduler

大家见鬼。我需要一些关于我正在编写的似乎不起作用的 ruby​​ 脚本的帮助。简而言之，当我使用 Rufus 安排某件事“在”特定时间发生时，我遇到了一个错误。

这是我的代码。

```
 starttime = Time.new + (60)
  scheduler = Rufus::Scheduler.start_new
  scheduler.at starttime do
    Curl::Easy.download(url, filename = "/tmp/test.xml")
  end 
```

虽然这有效，但它在第一次运行后会出错，并显示以下内容：

```
================================================================================
scheduler caught exception:
can't convert nil into String
/Users/me/.gem/ruby/1.9.1/gems/curb-0.8.0/lib/curl/easy.rb:38:in `add'
/Users/me/.gem/ruby/1.9.1/gems/curb-0.8.0/lib/curl/easy.rb:38:in `perform'
/Users/me/.gem/ruby/1.9.1/gems/curb-0.8.0/lib/curl/easy.rb:358:in `download'
/Users/me/Dropbox/Files/Personal/RubyMine/hbo_hackathon/SOME:19:in `block (2 levels) in <top (required)>' 
```

我对 Ruby（以及一般的开发）还很陌生，所以我不确定为什么会发生这种情况。有人可以帮忙吗？

此外，这里的真正目标是替换这一行：

```
starttime = Time.new + (60) 
```

有了这条线：

```
starttime = REXML::XPath.first( doc, '/new/time/text()') 
```

这样做的原因是因为我想从一些 XML 中提取动态时间（在本例中，是来自我订阅的 Amazon SQS 队列的消息），并告诉它在特定时间卷曲 URL。这就是我试图让它发挥作用的真正原因。

当我尝试从 XML 中传递时间时，我得到一个完全不同的错误。我尝试过发送每种可能的时间格式，但它仍然给我一个错误。请帮忙！

```
/Users/me/.gem/ruby/1.9.1/gems/rufus-scheduler-2.0.16/lib/rufus/sc/rtime.rb:327:in `at_to_f': cannot determine 'at' time from : "1334865999.4416242" (ArgumentError)
    from /Users/me/.gem/ruby/1.9.1/gems/rufus-scheduler-2.0.16/lib/rufus/sc/jobs.rb:253:in `determine_at'
    from /Users/me/.gem/ruby/1.9.1/gems/rufus-scheduler-2.0.16/lib/rufus/sc/jobs.rb:90:in `initialize'
    from /Users/me/.gem/ruby/1.9.1/gems/rufus-scheduler-2.0.16/lib/rufus/sc/me.rb:149:in `new'
    from /Users/me/.gem/ruby/1.9.1/gems/rufus-scheduler-2.0.16/lib/rufus/sc/scheduler.rb:149:in `at'
    from /Users/me/Dropbox/Files/Personal/RubyMine/hbo_hackathon/SOME:18:in `block in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:07:04.930

好的，

第一个错误与 rufus-scheduler 无关。可能是您将 nil “url”传递给 Curl 库。

第二个错误

> 无法确定“在”时间：“1334865999.4416242”（ArgumentError）

是 rufus-scheduler 抱怨传递了一个不能变成 Time 实例的字符串。

尝试类似的东西

```
starttime = REXML::XPath.first(doc, '/new/time/text()').to_f 
```

因此，总而言之，您会看到两个不同的错误。一个接一个地修复它们。从核心开始：Curl 抱怨传递了一些 nil 而不是字符串，然后查看 starttime 问题。

干杯，

约翰

# ember.js - ember.js binding propagation order

> ID：10236061
> 
> 赞同：0
> 
> 时间：2012-04-19T20:17:06.843
> 
> 标签：ember.js

I know that Ember.js defers binding changes. I'm wondering if Ember.js maintains any order when it notifies bindings of changes?

here's a very contrived example:

```
{{#if App.backVisible}}
    <img {{bindAttr src=App.selectedPerson.avatar}} />
{{else}}
    name: {{App.selectedPerson.fullName}}
{{/if}} 
```

then some place else I do:

```
App.set("selectedPerson", someOtherPerson)
App.set("backVisible", true) 
```

Is there any guarantee that the src binding will be filled in before the backVisible property changes?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:39:51.693

> 是否可以保证在 backVisible 属性更改之前填充 src 绑定？

我真的不明白为什么你会关心在 Ember 设置***backVisible***属性之前设置***src 。***从您设计的示例中，这两个属性在功能上似乎非常独立。

 *但是，如果您仍想强制在视图中填充***src***绑定，则始终可以强制渲染。在 Ember 中，渲染通过运行循环延迟。***您可以通过调用Ember.run.end()***使 runloop 立即执行

 *有关运行循环的更多信息，请尝试以下链接：http: [//blog.sproutcore.com/the-run-loop-part-1/](http://blog.sproutcore.com/the-run-loop-part-1/)

这篇博文来自 Sproutcore 时代，但核心概念在 Emberjs 中仍然相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:57:16.897

您寻求的答案是**肯定**的（因为它首先会更新所有 Ember 对象，然后是 UI）。

但是，我相信如果没有这个保证，您的应用程序仍然可以正常工作，即，因为您使用 Ember 的绑定，即使 App.backVisible 将首先更新，我什至是指生成的 UI（img-tag），img-即使将其 src 属性设置为“”，标记仍然可以正常工作（没有“NPE”，即使您绑定它 abcd 并且 b 为空）。
几毫秒后，Ember 将更新 src 属性以包含更新的值，并且图像将被加载并显示。
我认为这是 Ember 的强项之一：状态在一个地方，一切都由它反映。如果绑定暂时导致无处可去，一切仍然有效（尽管通常这不会发生）。**

# javascript - BackboneJS 根级视图

> ID：10236063
> 
> 赞同：1
> 
> 时间：2012-04-19T20:17:08.920
> 
> 标签：javascript, backbone.js, requirejs, amd

如果您在“几乎”每个屏幕上都有一些根级别的 HTML，您将在哪里/如何组织它？

我正在使用骨干样板和requirejs。其中一个根级视图是一个全局导航元素，可以随时从屏幕底部调用。

这被组织在一个具有模型的模块中（用于可见性、选定状态、点击日志等）。该应用程序存储在：

```
ClientName.app = _.extend( { rootViews: {} }, Backbone.Views); 
```

然后在我的路由器初始化方法中，我有：

```
ClientName.app.rootViews.globalNav = new GlobalNav.Views.BottomView({ model: new GlobalNav.Models.Bottom()}); 
```

它工作正常，但随着功能的增长，路由器初始化方法与类似的根视图、子路由器等变得失控。我完全错过了什么吗？

你会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:07:10.170

你检查过[Marionette.Region](http://derickbailey.github.com/backbone.marionette/#marionette-region)吗？这允许您将视图分配给特定的 div，例如您的页脚。您可以将应用程序的主体区域定义为另一个区域，当您导航到不同的页面时，您可以动态地换出该区域。

对于 View Controller，Router 通常是一个糟糕的选择。相反，我建议查看 Marionette，它可以很好地处理这种事情。您可以使用[应用程序事件](http://derickbailey.github.com/backbone.marionette/#marionette-eventaggregator)实现页面导航控件，您可以连接主视图以进行侦听，然后动态交换区域。查看 Marionette 文档底部的优秀示例应用程序以获得起点。

# jquery - jqgrid中的客户端数据操作

> ID：10236065
> 
> 赞同：1
> 
> 时间：2012-04-19T20:17:13.817
> 
> 标签：jquery, asp.net-mvc, razor, jqgrid

我在 JQGrid 上取得了一些成功，但现在我需要加载数据一次，然后在客户端执行所有的 crud 操作，而且听起来很简单，我完全被卡住了。我已经经历了堆栈溢出和谷歌，似乎找不到任何简单的客户端 jqgrid 操作的好例子（我可能是错的，但我也无法在官方的 jqgrid 文档中找到任何客户端的东西）。我试图在这里使用这个例子：

[http://www.ok-soft-gmbh.com/jqGrid/LocalFormEditing.htm](http://www.ok-soft-gmbh.com/jqGrid/LocalFormEditing.htm)

但我仍然是 ajax/javaxcript/jquery 的新手，它有点压倒性，我无法让它与我的网格一起运行。我真的很感激任何提示或教程链接。到目前为止，我的代码以及我收集的有关该过程的内容如下：

我有我的网格：

```
 editSettings = {
                jqModal: false,
                reloadAfterSubmit: false,
                closeOnEscape: true,
                savekey: [true, 13],
                closeAfterEdit: true,
                onclickSubmit: editSubmit,
                height: 200,
                width: 400
            },
             addSettings = {
                jqModal: false,
                reloadAfterSubmit: false,
                savekey: [true, 13],
                closeOnEscape: true,
                closeAfterAdd: true,
                onclickSubmit: addSubmit,
                height: 200,
                width: 400
            },
         $('#engineerGrid').jqGrid({
         datatype: 'json',
         colNames: ['Engineer Name', 'Engineer Type', '% Utilization'],
         colModel: [
         {name: 'name', index: 'name', width: 150, align: "left", editable: true, edittype: "select",
         editoptions: { value: "@(Model.engineerOptions)" }, sorttype: 'string', formatter: 'select'
     },
         { name: 'type', index: 'type', width: 150, align: "left", editable: true, edittype: "select",
             editoptions: { value: "@(Model.typeOptions)" }, formatter: 'select'
         },
         { name: 'ut', index: 'ut', width: 125, align: "left", editable: true, sorttype: 'number', formatter: 'number' }
            ],
         rowNum: 10,
         rowList: [5, 10, 20],
         pager: '#pager',
         gridview: true,
         rownumbers: true,
         autoencode: true,
         ignoreCase: true,
         sortname: 'invdate',
         viewrecords: true,
         sortorder: 'desc',
         loadonce: true,
         caption: 'Project Engineers',
         editurl: 'clientArray',
         url: '@Url.Action("EditProjectEngineerJQGridData","Project",new{projID = Model.projectID})'
     }).jqGrid('navGrid', '#pager', {}, editSettings, addSettings, delSettings);
 }); 
```

我从服务器获取 json 信息，我认为因为我有 loadonce:true 设置，它应该将数据类型从 json 切换到本地。这是我开始感到困惑的地方。我是否需要手动编写所有 crud 函数并使用 onclickSubmit 链接到它们？如果是这种情况，有人愿意解释如何正确获取/设置数据吗？

```
addSubmit = function(){   
               //I think something needs to go here?   
                }; 
```

# 编辑：

以为我会为任何看到这一点的人重申。由于我没有太多经验，这可能是低水平的，但也许其他新手可以从外行的解释中受益。处理本地数据时，您不能使用表单编辑（删除除外）。但是，为了添加/编辑行，您可以使用 inlineNav。我的工作如下，有一些挑剔的部分，但就本地数据的添加/编辑/删除而言，它可以工作。

```
 $(document).ready(function () {
     var myData = [],
            editOptions = {},
            addOptions = {},
            lastSel = -1,
            parameters = {
                edit: false,
                editicon: "ui-icon-pencil",
                add: true,
                addicon: "ui-icon-plus",
                save: true,
                saveicon: "ui-icon-disk",
                cancel: true,
                cancelicon: "ui-icon-cancel",
                addParams: { useFormatter: false },
                editParams: {}
            },
            myDelOptions = {
                onclickSubmit: function (options, rowid) {
                    var grid = $('#engineerGrid');
                    // delete the row
                    grid.delRowData(rowid);                     
                    grid.trigger("reloadGrid", [{ page: 0}]);
                    return true;
                },
                processing: true
            };

     $('#engineerGrid').jqGrid({
         datatype: 'json',
         url: '@Url.Action("CreateProjectEngineerJQGridData", "Project")',
         colNames: ['Engineer Name', 'Engineer Type', '% Utilization'],
         colModel: [
         { name: 'name', index: 'name', width: 150, align: "left", editable: true, edittype: "select",
             editoptions: { value: "@(Model.engineerOptions)" }, sorttype: 'string', formatter: 'select'
         },
         { name: 'type', index: 'type', width: 150, align: "left", editable: true, edittype: "select",
             editoptions: { value: "@(Model.typeOptions)" }, formatter: 'select'
         },
         { name: 'ut', index: 'ut', width: 125, align: "left", editable: true, formatter: 'number',
             formatoptions: { decimalPlaces: '0', defaultValue: '20'}
         }
            ],
         rowNum: 20,
         rowList: [5, 10, 20],
         pager: '#pager',
         gridview: true,
         rownumbers: true,
         autoencode: true,
         ignoreCase: true,
         sortname: 'invdate',
         viewrecords: true,
         sortorder: 'desc',
         loadonce: true,
         width: 750,
         caption: 'Project Engineers',
         editurl: 'clientArray',
         onSelectRow: function (id) {
         //if selected row changed restore values of previously selected row
             if (id && id !== lastSel) {
                 jQuery('#engineerGrid').restoreRow(lastSel);
                 lastSel = id;
             }
             jQuery('#engineerGrid').editRow(id, true);
         }
     }).jqGrid('navGrid', '#pager', { edit: false, add: false, del: true }, editOptions, addOptions, myDelOptions);
     jQuery("#engineerGrid").jqGrid('inlineNav', '#pager', parameters);
 }); 
```

无论如何，感谢奥列格的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:55:20.193

我的[旧答案中](https://stackoverflow.com/a/5611519/315935)[的演示](http://www.ok-soft-gmbh.com/jqGrid/LocalFormEditing.htm)包含非常长且硬核的代码。它基于玩内部参数`processing: true`。我同意这对新手来说很难，但直到现在 jqGrid 仍然不支持本地**表单编辑**。

的代码部分并`delSettings`没有那么复杂。所以你可以使用它。对于新行的行编辑和插入，您可以使用内联编辑。我个人觉得编辑模式最舒服，因为用户仍然可以在原始位置看到所有数据。因此，您可以使用它来代替表单编辑。如果您需要的表格不是用于编辑，而是用于查看数据，那么我会在这种情况下使用[ondblClickRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:events#list_of_events)回调来开始编辑。如果您只需要编辑网格，您可以在行选择上开始编辑：`onSelectRow`.

如果您喜欢[navigator toolbar](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator)，那么您可以将[navGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator#definition)仅用于“删除”操作，[将 inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)用于“添加”和“编辑”操作。方法[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)仍然相对较新，可能仍然不完美，但可以很好地使用。

作为导航工具栏的替代方法，您可以在带有“编辑”和“删除”按钮的附加列中使用格式化程序：“操作”。您也可以根据您的口味组合以上所有方法。

在[官方演示](http://trirand.com/blog/jqgrid/jqgrid.html)页面上，您将找到所有方法的示例。

# java - Issue with JPA not loading lazy fetched collection

> ID：10236068
> 
> 赞同：2
> 
> 时间：2012-04-19T20:17:18.963
> 
> 标签：java, sql-server-2008, jpa, websphere

I'm having a problem with JPA refusing to fetch a collection that is set to fetch lazy. Here are how the entities are defined:

Report Entity

```
//bi-directional many-to-one association to Host
@OneToMany(mappedBy="report", cascade=CascadeType.ALL, fetch=FetchType.LAZY)
private Set<Host> hosts; 
```

Host Entity

```
//bi-directional many-to-one association to Report
@ManyToOne
@JoinColumn(name="INCIDENT_ID")
private Report report; 
```

For some reason I can't get the hosts set to load into memory and hosts is always null. I found the following on a stackoverflow post, but it doesn't work either:

```
public void loadHosts(Report report)
{
    PersistenceUtil unitUtil = getEntityManager().getEntityManagerFactory().getPersistenceUnitUtil();
    System.out.println("isLoaded(report, \"hosts\"): " + unitUtil.isLoaded(report, "hosts"));
    initializeCollection(report.getHosts());
    System.out.println("isLoaded(report, \"hosts\"): " + unitUtil.isLoaded(report, "hosts"));
}

private void initializeCollection(Collection<?> collection) 
{
    if(collection == null) 
    {
        return;
    }
    collection.iterator().hasNext();
} 
```

Output from the above:

```
SystemOut     O isLoaded(report, "hosts"): false
SystemOut     O isLoaded(report, "hosts"): false 
```

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:19:55.587

我认为您必须在 session.get(object) 和 tx.commit 之间调用 getHosts。或者您也可以决定使用 fetch=FetchType.EAGER （尽管这可能不是一个好主意）

# android - What is the standard way to use RPC in Android?

> ID：10236069
> 
> 赞同：5
> 
> 时间：2012-04-19T20:17:31.773
> 
> 标签：android, rpc

What is the standard way to use RPC in Android? The official way to do RPC in Android seems for me AIDL. Is that correct?

First of all I am quite new to Android. But the start is good. I am warming up with the functions I already know from Java. Now I want to go further and use some advanced techniques with some of my already existing software in Java.

Here’s the scenario. I have a little Java server which runs an object orientated version of RPCs called SIMON. Now I want to combine it with Android. Means on an Android device I want to run a little app as client which gets its information from my server.

I read some instructions to program a client and a server for android. But both are running on android which I don’t want to.

Does anybody know how to combine RPC between Android and Java? Maybe some links or hints in which direction I can search should do the trick. Right now I am a little bit lost and combine these two worlds.

I have already came across REST, JSON, XML-RPC, SOAP who needs external libraries I don’t want to use. I want to stick with the standard way of Android to keep it “Original” Android. Whatever. The pure Android code is my goal in this stage.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-12T02:43:14.267

据我所知，没有“标准”方法可以从 Android 向服务器执行 RPC。您提到的 AIDL 用于对同一设备上的另一个进程执行 RPC。

正如您所发现的，有大量的序列化格式和库支持它们在 Android 应用程序和服务器之间进行通信 - 所以请选择。

我没有证据证明这一点，但我猜绝大多数开发人员会在 HTTPS 上使用 JSON，可能是 REST，也可能不是。但是使用 Avro、gRPC、Protocol Buffers、Apache android-json-rpc 或其他任何东西也没有错 - 使用最适合您的情况的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:15:04.757

我也在寻找一种在 android 中进行远程 RPC 的简单方法。经过一番搜索，我终于使用[Apache Avro](http://avro.apache.org/)完成了这项任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-12T21:22:57.480

GRPC：[https ://grpc.io/](https://grpc.io/)

服务器端和客户端实现都有一个学习曲线，但是，它在代码生成方面是健壮和严格的。我从来没有遇到过任何问题。

# android - out of memory when programming on Android platform

> ID：10236070
> 
> 赞同：0
> 
> 时间：2012-04-19T20:17:32.567
> 
> 标签：android, out-of-memory

I am programming a image segmentation algorithm on Android 2.2 platform. When run the following line of code:

```
double[][] temp=new double[328][576]; 
```

there is a out of memory exception.

However, I use the ActivityMannager.getMemoryInfo() to check the available memory space on the system and I find there is still 44851200 bytes free space.

I am confused that why there is a out of memory exception with still free space on the system?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T20:20:01.473

Android 对每个进程/应用程序的内存分配有限制。您不能仅将手机上的全部可用内存用于您的应用程序。根据设备，每个进程的最大内存使用都有限制。此[链接](http://blog.javia.org/how-to-work-around-androids-24-mb-memory-limit/)可能会对您有所帮助。

# javascript - 如何在 JavaScript 中为动态创建的元素设置属性

> ID：10236073
> 
> 赞同：1
> 
> 时间：2012-04-19T20:17:39.500
> 
> 标签：javascript

我试图理解使用 JavaScript 动态创建的 HTML 元素。具体来说，有人可以解释为什么如果我在 HTML 中创建一个没有 value 属性的按钮，它将出现没有文本。然后我可以向它添加一个值，文本将出现在按钮中，我还可以像这样警告该值：

```
var Button1 = document.getElementById("Button1");
Button1.value = "test";
alert(Button1.value); 
```

但是，如果我动态生成按钮，然后添加它不会出现在按钮上的值，尽管我仍然可以提醒它。

```
var Button1 = document.createElement("button");
var Div1 = document.getElementById("Div1");
Button1.value = "test";
Div1.appendChild(Button1);
alert(Button1.value); 
```

在第二个示例中，按钮的文本没有改变，但值仍然会发出警报。我知道我可以使用 createTextNode 并将其附加到按钮，但我试图了解通过 JavaScript 动态生成的控件与在 HTML 中创建的控件之间的区别。

感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:24:18.353

在您的第二个示例中，您正在创建一个新元素并为其分配一个值，但您尚未将其添加到 DOM 中——它纯粹存在于 JavaScript 中，这就是警报起作用的原因。为了查看页面上的按钮，您需要将其附加到文档中，通常使用 appendChild()。

你说，*“但是，如果我动态生成按钮，然后添加它不会出现在按钮上的值，尽管我仍然可以提醒它。”* 并且*“按钮的文本不会改变，但值仍然会发出警报”*，这让我有点困惑，因为看起来好像您可能已经在页面上有一个按钮，您希望第二个示例的代码会更改。

您的第一个示例是教科书示例，说明如何获取 DOM 中已经存在的元素、分配（或更改）其值，然后对其发出警报。

**更新**：要回答您修改后的问题，您的代码*正在*更改按钮的值，但是如果您希望看到页面上按钮的文本发生更改，则需要更改其 innerHTML 值，例如使用`Button1.innerHTML = "test";`. 按钮元素不像输入按钮，其值显示为按钮的文本。按钮元素的文本来自开始标签`<button>`和结束`</button>`标签之间的文本。

例子：`<button value="test">test</button>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:23:18.947

在第二个代码片段中，您的 Button 对象不是 DOM 的一部分，因此浏览器不会显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:27:32.560

您的第二个示例实际上并未将按钮放在 HTML 页面上的任何位置；它只是作为 Javascript 中的变量存在。所以我不确定你在哪里看到按钮的文本没有改变 - 整个按钮无处可见。您在页面上看到的任何按钮都不是您刚刚使用 Javascript 创建的按钮，除非您将其添加到页面（通常通过在页面上已存在的元素上调用 appendChild()）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:34:56.617

因为 button 元素的 value 属性不会改变按钮的文本，因为你可以把你想要的一切都放在一个按钮标签中，比如图像等......：

[http://jsfiddle.net/jgQGe/2/](http://jsfiddle.net/jgQGe/2/)

**例如，您的第一个代码片段在 Chrome 中对我不起作用，我无法使用 value 属性更改按钮的文本。**

您可以使用 myButton.innerHTML 设置按钮元素的文本，但不能使用 myButton.value。

# c++ - 源文件中定义但在任何函数定义之外的变量的范围是什么？

> ID：10236074
> 
> 赞同：0
> 
> 时间：2012-04-19T20:17:46.943
> 
> 标签：c++, scope

```
// Foo.cpp

int whatScopeAmI = 0;

Foo::Foo() {
 // source code
} 
```

变量的作用域是什么`whatScopeAmI`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:19:44.417

该变量是具有*程序范围的*[全局变量](http://www.learncpp.com/cpp-tutorial/42-global-variables/)，因为它是在任何块之外定义的：

 *> 在块外声明的变量称为全局变量。全局变量具有程序范围，这意味着它们可以在程序中的任何地方访问，并且只有在程序结束时才会被销毁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T20:21:54.140

它是全球性的，在程序中随处可用。

如果不同的翻译单元有一个`extern int whatScopeAmI;`声明，它将引用同一个变量。

如果变量被声明为`static int whatScopeAmI = 0;`它将具有内部链接，并且仅在当前翻译单元中可用。*

# apache-flex - Custom component comparison in flex

> ID：10236076
> 
> 赞同：0
> 
> 时间：2012-04-19T20:17:52.290
> 
> 标签：apache-flex, comparison, custom-component

I have a custom component called Tag

```
package bin {
  public class Tag  {
    public var count:int;
    public var text:String;

    public function Tag() {}
  }
} 
```

I have a bunch of these tags in a two arrays. I want to be able to call

```
arr0.indexOf( arr1[0] )  //line 1
// or 
arr0[0] == arr1[0]       //line 2 
```

and only have the text field be compared. ie

```
tag{text:"hi", count:0} == tag{text:"hi", count:5} 
```

Even though the counts differ the above result would be true, likewise if the two tags are in the different lists I want them to match up to each other as would in line 1

In java the solution would be to implement the comparable interface and overwrite the compare method to suit my needs. I could not find any documentation on such a solution in flex. Nor did my attempts at making a compare method work.

I am using Flex 3 fyi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:24:12.167

我认为您正在寻找的是[Operator Overloading](http://en.wikipedia.org/wiki/Operator_overloading)，根据[这篇文章](https://stackoverflow.com/q/818750/259457)，您似乎无法在 Flex 中做到这一点。但是，您可以在自定义组件中编写一个`equals()`方法来比较两者。

# google-reader - Google Reader API 标记为已读

> ID：10236082
> 
> 赞同：0
> 
> 时间：2012-04-19T20:18:21.867
> 
> 标签：google-reader

我正在尝试使用 Google 阅读器 API 将项目标记为已读。

我在打电话： [https ://www.google.com/reader/api/0/edit-tag](https://www.google.com/reader/api/0/edit-tag)

使用 POST 参数：

```
i=tag:google.com,2005:reader/item/abd8ef2540e2948a
a=user/-/state/com.google/read
ac=edit
s=feed/http://9gag.com/rss/site/feed.rss
T=//XyTiEe7pm4RZtwtO2KKTfw 
```

我得到错误 400：错误请求

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:09:31.833

`T`当您的访问令牌（参数）过期时，通常会引发此错误。访问令牌是一个短暂的令牌，它会在 30 分钟后过期（根据[this](https://stackoverflow.com/questions/5853435/does-the-google-reader-api-token-expire#comment7388599_5853699)）。

我认为您应该获得一个新令牌并再试一次。我刚刚尝试了这个 API 方法，它可以工作。

还有一点需要注意：`ac=edit`这里不需要您的参数。此参数在[订阅 API](http://code.google.com/p/google-reader-api/wiki/ApiSubscriptionEdit)中使用，而不是在编辑标签 API 中使用。因此，您可以轻松删除它。

# javascript - 嵌套数组的 KnockoutJS 映射更新“超出堆栈空间”

> ID：10236084
> 
> 赞同：0
> 
> 时间：2012-04-19T20:18:26.530
> 
> 标签：javascript, knockout-mapping-plugin

更新：尝试制作小提琴来重现问题：http: [//jsfiddle.net/gY2JV/29/](http://jsfiddle.net/gY2JV/29/) 结束更新

我有一个来自 DocModel 类型的服务器的对象。它的层次结构看起来像这样。

```
Class DocModel:
    Property Rows As List(Of DocRowModel)

Class DocRowModel:
    Property Documents As List(Of Doc)

Class Doc:
    Contains some scalar properties 
```

我在以下视图模型中使用它：

```
HpDocs.DocsVM = function (data) {
    ko.mapping.fromJS(data, {}, this);
};

HpDocs.DocsVM.prototype = {
    getDocs: function (filter) {
        var self = this;
        $.ajax({
            url: getMethodUrl("GetDocs"),  // server call returns object of type DocModel
            data: "{'filter': " + filter + "}",
            success: function (response) {
                ko.mapping.fromJS(response.d, {}, self.MyDocs); // out of stack space

            }
        })
    }
};

HpDocs.dbGetDocs = function (filter) {
    $.ajax({
        url: getMethodUrl("DbGetDocs"), // server call returns object of type DocModel
        data: "{'filter': " + filter + "}",
        success: function (response) {

            myDocsViewModel = new HpDocs.DocsVM({
                MyDocs: ko.mapping.fromJS(response.d)
            });

            var bindingScope = $("#divMyDocs")[0];
            ko.applyBindings(myDocsViewModel, bindingScope);

            HpDocs.hideProgress();
        }
    })
}; 
```

这是我的视图（td 中的内容可能与问题无关——我只是在 Documents 中的每个 Document 上映射一堆标量属性）：

```
 <table id="tblMyDocs">
                <tbody data-bind="foreach:  MyDocs.Rows">
                    <tr data-bind="foreach: Documents">
                        <td style='text-align: center;'>
                            <div data-bind="attr:  {title: Tooltip}" class='DocumentObject' runat="server" width="40px">
                                <a data-bind="attr: {href: FullServerPath}">
                                    <img data-bind="attr: {src: IconPath, alt: Tooltip}" />
                                </a>
                                <br />
                                <textarea runat="server" readonly="readonly"
                                        data-bind="html: DisplayName" 
                                        class="doclabel" rows="2" cols="10" wrap="hard"
                                </textarea>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table> 
```

当我在淘汰赛尝试更新视图模型之前中断时，我可以看到 response.d 正在以正确的格式返回正确的数据，但是堆栈空间不足。那是怎么回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:59:04.273

问题解决了——我做错了。要查看问题所在，请参阅：

[jsfiddle中的knockoutJS映射模板嵌套数组](https://stackoverflow.com/questions/10248420/knockoutjs-mapping-template-nested-arrays-in-jsfiddle)

# git - Git Log in ZSH Terminal

> ID：10236085
> 
> 赞同：5
> 
> 时间：2012-04-19T20:18:30.303
> 
> 标签：git, terminal, zsh

I remember in a Git-tutorial video that the user's terminal (probably ZSH) was split into two; one for the standard terminal commands, and below that there was something like Git log graphical representation. It was always visible at the bottom of the terminal with nice colors.

![terminal screen](../Images/424ac791b4fee977b3d36b84ace432d3.png).

How is it possible to split the terminal screen into two and display Git log (something like `git log --pretty=format:'%h : %s' --graph`) on the terminal screen?

UPDATE: I found the video on Vimeo, [http://vimeo.com/16018419](http://vimeo.com/16018419). I am trying to do the exact same setup on my ZSH terminal.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T20:45:29.120

使用 tmux，您可以拆分窗格`zsh -c while :; do sleep 60; git log ...; done`，这应该在窗格中实现自动刷新的 git log 输出。

向拆分窗格提供 [-vh] [percent] 以使用终端的给定百分比拆分垂直或水平。iirc，它从终端的底部和/或右侧分开，因此相应地调整百分比。

这应该具有将 git log 放在 $EDITOR（或以下）旁边的窗格中的预期效果，具有适当的尺寸并每分钟自动刷新一次。随意更改或清理语法以满足您的需要。

编辑：在 tmux 中重新生成窗格可以使用 tmux builtin 来完成`respawn-pane`。你可以绑定一个这样的键来获得一个简单的快捷方式

bind-key -n Mr respawn-pane -t git:0.1 [命令]

在这个例子中，我假设 3 件事。首先，您有一个命名的 tmux 会话（命名为 git，但这是任意的，您可以通过`rename-session`在 tmux 中使用或使用 启动会话来选择`new-session -s name`）。其次，git log（这是我们要刷新的）位于索引 0 的窗口（这是会话中打开的第一个窗口，默认情况下，除非您设置`base-index`为 else）和索引 1 的窗格。

所以在这里，它通过按 alt-r 重新生成“git”会话中第一个窗口的第二个窗格。如果您使用我之前提供的循环，则无需这样做，因为每次睡眠后日志都会自行刷新。这对某些人来说可能被认为是浪费的，因此您可能会随心所欲地任意决定重新生成此窗格。

[命令] 是可选的。tmux`respawn-pane`将执行最初生成窗格时给出的命令。在此示例中，默认情况下它将是`while`循环。如果您跳过循环而只使用`split-pane [-hv] [percent] "git log ..."`then 不要提供可选的命令参数，因为窗格会为您巧妙地运行它。提供命令参数 to`respawn-pane`将优先于生成窗格时使用的初始命令。

最后，如果您最初不提供命令参数`split-pane`，则 tmux 将运行任何值`default-command`。

因此，您对如何以多种方式执行此视频的功能有一个过于冗长的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:28:20.683

`git log --oneline --graph --decorate --color=always`用于 git 日志输出。

终端拆分功能取决于您的控制台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:58:13.783

好的，

他在 Mac 上使用 iTerm，默认情况下会进行拆分，您只需要进入菜单或使用任何短命令即可。你可以在 ubuntu/linux 上使用终结器。如果你想继续使用 gnome-terminal，你可以使用 screen 或 tmux 来模拟​​这个。

在日志中，他正在使用 tig ( [http://jonas.nitro.dk/tig/](http://jonas.nitro.dk/tig/) )：一个 git 浏览工具。它可以轻松安装。顺便说一句，您可以使用 watch 自动更新您的日志，这样您就可以在终端的另一部分拥有“自动日志”。;)

```
watch git log --graph 
```

在这里，我在控制台中使用 tmux：

![在某些应用程序中使用 tmux](../Images/d0cec436dcf870733433bec1928362ab.png)

# ios - Is it possible to detect completion of a parent modalview dismiss animation?

> ID：10236087
> 
> 赞同：0
> 
> 时间：2012-04-19T20:18:36.773
> 
> 标签：ios, xcode, modalviewcontroller

ViewController -> ModalViewController1 ---horizontalflip ---> ModalViewController2

So when 'Done' is touched in MVC2 to dismiss itself + a delegate method is called in MVC1 which does some stuff and then dismisses itself.

Problem is that this 'stuff' is already done before the animation dismissing MVC2 is complete. I'd like to be able to check when the animation is complete then dismiss MVC1.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:21:33.603

一旦 MVC2 的动画完成，MVC1 应该会收到一个 viewDidAppear。您可以根据您已经在做的委托调用设置的条件在其中做“东西”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:06:08.860

您应该能够使用委托来实现这一点。

在 MVC2.h 中

```
@protocal MVC2Delegate <NSObject>
@optional
  - (void) doneShowing;
@end 
```

在 MVC2.m 中，您可以在点击“完成”时实现 IBAction 方法，在动作内部调用 doneShowing。

在 MVC1 中，你可以实现这个委托方法，在里面做任何你想做的事情，最后，调用`[self dismissViewControllerAnimated:<#(BOOL)#> completion:<#^(void)completion#>]`

# java - How to save user input and JComboBox selection?

> ID：10236090
> 
> 赞同：0
> 
> 时间：2012-04-19T20:18:52.123
> 
> 标签：java, swing, jcombobox, jtextfield

I'm developing my first (extremely basic) Java app. I'm having trouble though with saving user information; specifically, appending user input from a textfield to a JComboBox selection. How do I do this? As of now I have:

```
String comps[] = {Computer 1, Computer 2, Computer 3}; //array for JComboBox
jcbb = new JComboBox<String>(comps); //create JComboBox

if (ae.getActionCommand().equals("Save")) { //user hits the Save button

        StringBuilder sb = new StringBuilder(); //string to hold data
        sb.append((String) macTF.getText()); //get data from textfield
        sb.append(" ");
        sb.append((String) jcbb.getSelectedItem()); //get JComboBox item
        sb.append(" ");
        //***what to do with the held data?***
    } 
```

I know I'm missing a lot, but just a nudge in the right direction will help. I have been searching through books and the Web, and have found so many different answers, but I cannot apply them. Do I output StringBuilder to text file and load that? Or build an array some how with both sets of data? Or something completely different?

Thanks for any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:39:03.287

您可以使用`addItem`方法（[doc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html#addItem%28java.lang.Object%29)）：

```
if (ae.getActionCommand().equals("Save")) { //user hits the Save button
    String toAdd = (String) macTF.getText(); //get data from textfield
    jcbb.addItem(toAdd); //add String to the combo box
} 
```

另外，您会在这里遇到问题：

```
String comps[] = {Computer 1, Computer 2, Computer 3}; //array for JComboBox
jcbb = new JComboBox<String>(comps); //create JComboBox 
```

那应该是：

```
String comps[] = {"Computer 1", "Computer 2", "Computer 3"}; //array for JComboBox
jcbb = new JComboBox(comps); //create JComboBox 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:44:11.603

*   [`JComboBox#addItem`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#addItem%28E%29)允许您将项目添加到组合框，或者[`JComboBox#insertItemAt`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#insertItemAt%28E,%20int%29)如果您想在某个索引处插入
*   [`JComboBox#removeItem`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#removeItem%28java.lang.Object%29)允许您删除项目。

所以一个可能的解决方案如下，虽然缺点是它会由于元素的添加/删除和选择的变化而产生很多事件。但是，这就是您正在寻找的行为

```
public <E> void replaceComboBoxItem( JComboBox<E> combo, E itemToReplace, E replacement ){
   boolean selected = combo.getSelectedItem() == itemToReplace;
   combo.insertItemAt( replacement, indexOf( combo, itemToReplace ) );
   combo.removeItem( itemToReplace );
   if ( selected ){
      combo.setSelectedItem( itemToReplace );
   }
}
private <E> int indexOf( JComboBox<E> combo, E item ){
  for( int i =0; i < combo.getItemCount(); i++ ){
    if ( combo.getItemAt( i ).equals( item ) ){
       return i;
    }
  }
  return -1;
} 
```

然后你可以使用

```
replaceComboBoxItem( jcbb, jcbb.getSelectedItem(), sb.toString() ); 
```

注意：代码只是在这里输入的，可能包含小的语法错误

# php - php exec() command permission denied

> ID：10236091
> 
> 赞同：4
> 
> 时间：2012-04-19T20:19:09.363
> 
> 标签：php, linux, permissions, exec

I have a C++ executable file 'skypeforwarder'. skypeforwarder works if I use command line in Terminal in Mac: henry$ /Users/henry/Desktop/skypeForwarder/skypekit-sdk_sdk-4.1.2.20_793394/examples/cpp/tutorial/step3/skypeForwarder

```
sh: /Users/henry/Desktop/skypeForwarder/skypekit-sdk_sdk-4.1.2.20_793394/examples/cpp/tutorial/step3/skypeForwarder: Permission denied 
```

But it always issued 'permission denied' if it is called in php exec();

```
<?php 
echo exec('whoami');

$output = null;

$execBuild = '/Users/henry/Desktop/skypeForwarder/skypekit-sdk_sdk-4.1.2.20_793394/examples/cpp/tutorial/step3/';
$execBuild .= 'skypeForwarder';

$n  = exec($execBuild, $output); 
```

I searched a lot. The problem should be the problem of the php/browser permission in web server. I also tried to change the owner of the file from:

```
-rwxr-xr-x  1 henry  staff  1212716 19 Apr 11:23 skypeForwarder 
```

to

```
-rwxr-xr-x  1 _www  staff  1212716 19 Apr 11:23 skypeForwarder 
```

It still does not work.

I set the apache in my mac according to [http://foundationphp.com/tutorials/php_leopard.php](http://foundationphp.com/tutorials/php_leopard.php)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T20:22:41.577

虽然文件本身可以被 Web 服务器读取，但该`Desktop`文件夹很可能不是，因此 Web 服务器无法遍历它来定位可执行文件。您应该将`skypeforwarder` 二进制文件移动到 Web 服务器可读的位置，例如与您尝试提供此 PHP 脚本的位置平行的目录。但是，该目录不应该是可通过网络访问的。使用 .htaccess 保护它或将其放在 Web DocumentRoot 之上，但它必须可由 Web 服务器读取。

默认情况下，`Desktop`在 OSX 上是`-rwxr------`并且*不*建议更改该目录的权限。

此外，将文件更改为由Web 服务器用户拥有和可写是非常*不可取的。*`_www`相反，它应该可由 Web 服务器读取和执行，但不可写入。

```
chown henry skypeforwarder
chmod 755 skypeforwarder 
```

**标准免责声明：**与往常一样，在从 Web 上可访问的 PHP 脚本执行系统调用时要格外小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:22:38.113

尝试查看 php.ini 中的禁用功能

```
disable_functions = exec 
```

# ios - After push a button it's title disappears

> ID：10236092
> 
> 赞同：0
> 
> 时间：2012-04-19T20:19:11.367
> 
> 标签：ios, uibutton

I'm trying to create a push-on-push-off-like button like [this one](https://stackoverflow.com/questions/8571485/uibutton-as-switch), although my code is a little different:

```
UIButton* alertsButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
alertsButton.frame = CGRectMake(170, 43.5, 130, 130);
[alertsButton.titleLabel setFont:[UIFont fontWithName:@"Novecento wide" size:22]];
[alertsButton setTitle:NSLocalizedString(@"Alerts", nil) forState:UIControlStateHighlighted];
[alertsButton setTitle:NSLocalizedString(@"Alerts", nil) forState:UIControlStateNormal];
[alertsButton setTitle:NSLocalizedString(@"Alerts", nil) forState:UIControlStateSelected];
[alertsButton addTarget:self action:@selector(toggleAlerts:)forControlEvents:UIControlEventTouchUpInside];

-(void)toggleAlerts:(id)sender
{
    UIButton *button = (UIButton *)sender;

    if (button.selected) {
        button.selected = NO;
        [button setImage:[UIImage imageNamed:@"off.png"] forState:UIControlStateNormal];
        [button.titleLabel setFont:[UIFont fontWithName:@"Novecento wide" size:22]];
        NSLog(button.titleLabel.text);
    } else {
        button.selected = YES;
        [button setImage:[UIImage imageNamed:@"on.png"] forState:UIControlStateNormal];
        [button.titleLabel setFont:[UIFont fontWithName:@"Novecento wide" size:22]];
        NSLog(button.titleLabel.text);
    }
} 
```

When I push the button, the background changes as expected but the label disappears although it's text is displayed in the debug console. I tried [this](https://stackoverflow.com/questions/9312876/uibutton-title-disappears) without results :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:23:38.757

那是因为你的形象超出了你的标签。

代替`[button setImage:[UIImage imageNamed:@"on.png"] forState:UIControlStateNormal];`

写`[button setBackgroundImage:[UIImage imageNamed:@"on.png"] forState:UIControlStateNormal];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:25:54.040

您的开启和关闭图像尺寸是多少？

如果它们太大，它们会将文本推到视野之外。正如 Nikita 所说，如果图像应该是背景，请使用 setBackgroundImage 方法

# java - Java中方法访问修饰符的继承

> ID：10236093
> 
> 赞同：0
> 
> 时间：2012-04-19T20:19:11.977
> 
> 标签：java, inheritance

我正在玩继承以尝试完全理解它：

我创建了一个带有私有方法的父类，并在子类中重写了它并将其公开。我还为每个类以不同的方式覆盖了 toString 方法。看起来像这样：

```
public class testparent {
    public String toString(){
        return ("One and two boobaloo");
    }
    private void hitMe(){
        System.out.println("BAM");
    }
}

public class testbaby extends testparent{
    public String toString() {
        return "Bananas";
    }
    public void hitMe(){
        System.out.println("BAMBAM");
    }
    public static void main(String[] args){
        testbaby testy = new testbaby();
        testparent test2 = testy;
        System.out.println(test2);
        //test2.hitMe(); //????? not allowed
        System.out.println(testy);
        testy.hitMe();
    }
} 
```

现在，为什么打印两个对象都会产生“香蕉”，但我不能同时使用这两个类的 hitMe() 方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T20:23:10.117

这是因为方法的[*动态绑定*](http://en.wikipedia.org/wiki/Dynamic_dispatch)和语言本身的[*静态类型*](http://en.wikipedia.org/wiki/Type_system#Static_typing)。

发生的情况是 Java 是静态类型的并且具有动态绑定，因此：

*   该方法`hitMe`只能在`testbaby`声明的变量上调用，因为它是私有的，`testparent`并且由于静态类型，Java 必须确保可以在运行时肯定调用该方法
*   该方法`toString`可以在两个对象上调用（因为它甚至是从 继承的`Object`），并且哪个将在运行时有效调用它是根据运行时实例而不是根据变量声明选择的（因为动态绑定）

根据*动态绑定*方法，方法的正确和运行时实现是在运行时根据对象的真实实例而不是在声明的实例上选择的。

这意味着，即使您声明`test2`为 a `testparent`，它仍然是一个`testbaby`对象（因为您正在为它分配一个`testbaby`实例）。在运行时，正确的实现将是孩子之一。

这是完全合法的，因为 a`testbaby` *是*a `testparent`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T20:21:08.567

基本上，因为当您声明`test2`为 type 的变量时`testparent`，您是在故意丢弃`test2`“实际上”为 a的知识`testbaby`。

这是继承的一部分——任何使用`test2`的代码都只允许假设它是 的一个`testparent`或一个子类`testparent`，并且该代码必须适用于*所有* `testparent`对象，即使是那些不是对象的`testbaby`对象。

仅供参考，就任何外部`testParent`而言，该`testParent.hitMe()`方法甚至都不存在（除了一些基于反射的邪恶事物，在这个阶段你不应该担心）。连方法`testbaby`都不知道`testParent.hitMe()`。

# perl - Perl FTP 零大小文件

> ID：10236102
> 
> 赞同：0
> 
> 时间：2012-04-19T20:20:17.613
> 
> 标签：perl

在 Perl 中，我尝试 ftp 一个文件，但远程服务器中的文件大小为零。

```
$ftp = new Net::FTP($URL);
$ftp->put($local_file, $remote_file); 
```

我确定本地文件不是空的，但是为什么ftp-ed文件是空的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:24:54.163

你检查过文档吗？ [http://search.cpan.org/dist/libnet/Net/FTP.pm](http://search.cpan.org/dist/libnet/Net/FTP.pm) 具体来说，你需要登录，即使你是匿名连接，你应该检查每个代码的返回码。
以下是 CPAN 页面的概要：

```
use Net::FTP;

$ftp = Net::FTP->new("some.host.name", Debug => 0)
  or die "Cannot connect to some.host.name: $@";

$ftp->login("anonymous",'-anonymous@')
  or die "Cannot login ", $ftp->message;

$ftp->cwd("/pub")
  or die "Cannot change working directory ", $ftp->message;

$ftp->get("that.file")
  or die "get failed ", $ftp->message;

$ftp->quit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:52:52.400

要找出您遇到的问题，请按如下方式修改您的代码：

```
$ftp = new Net::FTP($URL); 
$ftp->put($local_file, $remote_file) or die $ftp->message; 
```

这种修改很可能会为您提供足够的信息来解决问题。

# java - 关于JPanel重绘的问题

> ID：10236103
> 
> 赞同：0
> 
> 时间：2012-04-19T20:20:20.867
> 
> 标签：java, swing

我正在尝试实现放大功能。

而我目前的问题是：每次点击放大，面板上都会出现一个新的放大图像。但原始图像仍在面板上。所以我尝试使用重绘方法。问题是，我可以看到新图像在屏幕上闪烁然后消失。我是否以错误的方式使用代码？目前代码是这样的：

双击放大：

```
 panel_Show.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent arg0) {
            // TODO Auto-generated method stub
            int count = arg0.getClickCount();
            if (count == 2 && !arg0.isConsumed()) {
                int x = arg0.getX();
                int y = arg0.getY();
                zoomin(x, y);
            }
        } 
```

放大方法：

```
 protected void zoomin(int x, int y) {
    if (allowZoomIn && zoomLevel < zoomLimit) {
        zoomLevel = zoomLevel + 1;
        int width = panel_Show.getWidth();
        int height = panel_Show.getHeight();
        centerX = centerX - (width/2 - x)/alpha;
        centerY = centerY - (height/2 - y)/alpha;
        alpha = alpha * zoomLevel;
        paintSpace(zoomLevel);
    }
} 
```

画点：

```
 protected void paintSpace(int level) {
    panel_Show.repaint();
    pointDrawer = (Graphics2D) panel_Show.getGraphics();

    Iterator<Integer> keyIterator = xCordTable.keySet().iterator();
    while (keyIterator.hasNext()) {
        int id = keyIterator.next();
        double xcord = xCordTable.get(id);
        double ycord = yCordTable.get(id);
                    //below is just some logic code to control how to paint points
        int size = freqTable.get(id);
        paintStar(xcord, ycord, Color.BLUE, size * level);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:30:39.030

您必须使用`panel.remove(image)`删除原始图像。然后你必须添加一个新图像，然后`repaint()`

缩放建议我宁愿使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)并将原始图像安全保存在一张卡片中

# android - 如何让phonegap通知插件定期通知

> ID：10236108
> 
> 赞同：0
> 
> 时间：2012-04-19T20:20:38.023
> 
> 标签：android, cordova, phonegap-plugins

我一直在寻找这个几个小时，但似乎无法找到它。我有用于 android 工作的 phonegap 系统通知插件； [https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification](https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification)

我想出了如何使用它；[android phonegap 通知状态栏显示什么](https://stackoverflow.com/questions/9403665/android-phonegap-notification-status-bar-shows-nothing)

但是，我不希望用户必须单击链接。我想让脚本定期寻找新的更新。我已经尝试过`setTimeout`，`$(document).ready(handler)`但没有任何效果。我也无法从我的代码的最后一行（之前`</body>`）推送通知，该技巧适用于常规浏览器中的大多数 javascript。

那么谁能帮我让计时器运行以将此通知推送到状态栏？

没关系，我使用下面的代码让它工作。不知道出了什么问题，但可能是一天中的时间:)

```
function onDeviceReady() {
    // Now safe to use the PhoneGap API
    setTimeout("notify()",60000);
}

function notify() {
    navigator.notification.beep(1);
    window.plugins.statusBarNotification.notify("Put your title here", "Put your message here");
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:11:09.157

你可以试试这段代码。获取计时器并在时间设置通知

```
function updateClock ( ){
 var currentTime = new Date ( );
  var currentHours = currentTime.getHours ( );
  var currentMinutes = currentTime.getMinutes ( );
  var currentSeconds = currentTime.getSeconds ( );
//get timer varialbe

//check. send a notification to update
if(currentHours == ... && currentMinutes  == ...){
  notify();//send notification
} 
```

并每秒更新一次计时器

```
 setInterval('updateClock()', 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:47:59.170

使用 LocalNotification 插件而不是 StatusBarNotification。

```
function onDeviceReady() {
// Now safe to use the PhoneGap API
setTimeout("notify()",60000);}

function notify() {
if (typeof plugins !== "undefined") {
                    plugins.localNotification.add({
                        date : new Date(),
                        message : "Phonegap - Local Notification\r\nSubtitle comes after linebreak",
                        ticker : "This is a sample ticker text",
                        repeatDaily : false,
                        id : 4
                });} 
```

有关更多详细信息，请访问[- 适用于 Android 的本地通知 PhoneGap 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification)

# git - 在 git 中保持本地更改未提交的实用工作流程是什么？

> ID：10236112
> 
> 赞同：10
> 
> 时间：2012-04-19T20:21:09.657
> 
> 标签：git, version-control, dvcs

我想要做的已经在[那个问题](https://stackoverflow.com/questions/4377309/git-stashing-specific-files-before-a-commit)中描述了。但我想以一种更实用、更通用的方式解决这个问题。所以用例如下：

*   我在几个文件或任何其他文件`web.config`中有几个本地更改`createDb.sql`
*   我不想提交这些文件，因为更改仅针对我的本地计算机
*   这些文件**必须**是版本控制的，而且经常对其中一些文件进行更改（特别是 sql 脚本），所以我想接收这些文件的更新
*   我**确实**想提交所有其他文件
*   我希望能够在一个命令中毫无摩擦地做到这一点（使用 posh-git，所以欢迎使用 powershell）

据说使用的链接到解决方案`git add -p`并不**实用**，一直手动选择块很无聊，或者也许有更方便的方法？

例如，以下其中一项可能有效：

*   如果能够在将工作副本中的文件添加到索引之前过滤它们，例如`git -add -A -EXCEPT web.config crateDb.sql`. 然后我可以将一个 git 别名映射到那个，就是这样。
*   如果有能力取消应用存储。我的意思是从工作副本中删除一个特定存储中包含的更改。所以我必须`git stash -deapply`在每次提交之前做一些事情，这也很好。

这个问题很常见，奇怪的是目前没有解决方案。例如，TortoiseSVN 具有“ignore-on-commit”功能，Perforce 允许将该类型的本地更改存储在单独的更改列表中，并且从不提交。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T20:26:55.353

您可以在 git 提交之前尝试执行以下操作：

```
git update-index --assume-unchanged web.config crateDb.sql 
```

来自 git 帮助：

> **--假设不变**
> 
> **--no-assume-unchanged**
> 
> 指定这些标志时，不会更新为路径记录的对象名称。相反，这些选项设置和取消设置路径的“假设不变”位。当“假设不变”位打开时，git 停止检查工作树文件是否有可能的修改，因此您需要手动取消设置该位以告诉 git 当您更改工作树文件时。这在处理具有非常慢的 lstat(2) 系统调用（例如 cifs）的文件系统上的大型项目时有时会很有帮助。
> 
> **此选项也可以用作粗略的文件级机制，以忽略跟踪文件中未提交的更改（类似于 .gitignore 对未跟踪文件所做的事情）。**如果 Git 需要修改索引中的这个文件，例如在提交合并时，Git 将失败（优雅地）；因此，如果假定的未跟踪文件在上游发生更改，您将需要手动处理这种情况。

# jquery - 从使用 JQuery 选择的列表中设置选项

> ID：10236118
> 
> 赞同：0
> 
> 时间：2012-04-19T20:21:24.873
> 
> 标签：jquery, jquery-selectors, drop-down-menu

我`<select></select>`现在有一个列表包含一些选项，就像`a, b, and c`现在我希望当用户输入并`a`在选择列表中选择`textbox`单击按钮时，任何人都可以帮助我在**JQuery**中实现这一点。`a`

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:24:52.030

对于像下面这样的标记，

```
<select id="selectOpt">
   <option value="a">a</option>
   <option value="b">b</option>
   <option value="c">c</option>
</select>

<input type="textbox" id="txtbox1" />

<button id="sch">Select</button> 
```

下面的脚本应该可以解决问题，

```
$('#sch').on('click', function () {      //<-Bind click handler for button using .on
     var txtVal = $('#txtbox1').val();   //<-Get the value entered in the textbox

     if ($('#selectOpt option[value=' + txtVal + ']').length > 0) {
        //^-- Above line checks if the entered value exist in the options list

        $('#selectOpt').val(txtVal );    //<-Set the value of the select with the entered value
     }
}); 
```

[**演示**](http://jsfiddle.net/skram/UNmT8/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:26:22.857

Javascript：

```
$(function(){
  $("#someButton").click(function(){
    $("#someSelect").val($("#someInput").val());
  });
}); 
```

html:

```
<select id="someSelect">
    <option>a</option>
    <option>b</option>
    <option>c</option>
</select>
<input id="someInput" type="text" />
<button id="someButton">Go</button> 
```

在此处查看一个工作示例：http: [//jsbin.com/ipevaz/3/edit](http://jsbin.com/ipevaz/3/edit)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T20:27:54.200

假设这是你的`select`：

```
<select>
    <option id="a" value="a"/>
    <option id="b" value="b"/>
    <option id="c" value="c"/>
    <option id="d" value="d"/>
</select> 
```

这就是你`input`

```
<input type="text" id="textbox" /> <input type="button" id="button"/> 
```

这是你的`script`

```
<script>
    $('#button').click(new function(){
        var option = $("#textbox").val();
        $('select #'+option).attr("selected='true'"); 
    });
</script> 
```

这行得通吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:36:07.783

您可以使用以下 HTML 来完成此操作。

```
<input type="text" id="input" />
<input type="button" id="btn" value="Move to Select" />

<select>
    <option value="a">a</option>      
    <option value="b">b</option>      
    <option value="c">c</option>  
</select>​ 
```

连同这个 jQuery 片段。

```
<script type="text/javascript">
    $(function () {
        $('#btn').click(function () {
            $('select option[value="' + $('#input').val() + '"]').prop('selected', true);   
        });
    });​
</script> 
```

查看[这个 Fiddle](http://jsfiddle.net/Cyj5B/4/)以获得工作演示。希望有帮助！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T20:30:36.897

```
<select>
  <option value="a">a</option>
  <option value="b">d</option>
  <option value="c">c</option>
</select>

<input type="text" id="letext" maxlength="1"/>
<input type="button" id="select" value="Select" />
​

$('#select').click(function(){

    $('select option[value=' +  $('#letext').val() +']').prop('selected','true')
    });​ 
```

[http://jsfiddle.net/chepe263/UNmT8/](http://jsfiddle.net/chepe263/UNmT8/)

按钮功能是找到一个值等于输入的选项**

# c# - XNA C# 内容.load 你调用的对象是空的

> ID：10236122
> 
> 赞同：1
> 
> 时间：2012-04-19T20:21:46.730
> 
> 标签：c#, xna, null, spritefont

现在的问题不是我不知道错误的含义，而是我无法为上帝的生命找出可能是什么原因造成的。我一直在寻找答案，但解决我的痛苦的方法却让我望而却步。我多次试图克服我的障碍，但都失败了。现在我看着你希望开悟，愿你帮助我的大脑安息:)

问题来了：Game1 运行并使用我的名为 Abstakt 的类：

```
class Abstrakt
{
    public ContentManager content;
    public SpriteBatch spriteBatch;
    public GraphicsDeviceManager graphics;

    MenuComponent menuComponent;
    StartGame startGame;

    public string gameState = "Menu";

    public Abstrakt(SpriteBatch spriteBatch, ContentManager content, GraphicsDeviceManager graphics)
    {
        this.spriteBatch = spriteBatch;
        this.content = content;
        this.graphics = graphics;
    }

    public Abstrakt() { }

    public virtual void Initialize()
    {
        menuComponent = new MenuComponent();
        startGame = new StartGame();

        menuComponent.Initialize();
        startGame.Initialize();
    }

    public virtual void LoadContent()
    {
        menuComponent.LoadContent();
        startGame.LoadContent();
    }
}        

class MenuComponent : Abstrakt
{
    SpriteFont spriteFont;

    public MenuComponent() { }

    public override void LoadContent()
    {
        spriteFont = content.Load<SpriteFont>("GameFont"); <--Here the problem appears
    }
} 
```

我已经删除了不重要的代码，因此更容易查看。问题是：对象引用未设置为对象的实例。

感谢您的任何帮助和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:53:23.750

我认为您没有初始化“内容”变量。

如果您使用默认的无参数构造函数实例化 MenuComponent，则不会分配内容..因此它将等于 null...

# php - 如何在在线测验中一次只显示一个数据

> ID：10236123
> 
> 赞同：2
> 
> 时间：2012-04-19T20:21:52.200
> 
> 标签：php, isset

我之前制作了一个文本文件并将其转换为多维数组以显示为我的测验问题。

***注意：**我无法插入图像，因此我无法提供任何示例，所以我会尽量做到描述性。*

每次用户点击我的测验时，我都试图一次只显示一个问题。

到目前为止，这是我的代码。**main.php**页面：

```
<h2>ONLINE QUIZ</h2>
<ul>
    <li><a href='question.php'>Take quiz</a></li>
    <li><a href='module.php'>Admin Module</a></li>
</ul>
<?php

$file = fopen('data.txt', 'r');

$array = array();
while ($line = fgetcsv($file)) {
    $array[] = $line;
}

fclose($file);

session_start();
$_SESSION["questions_array"]=$array;

?> 
```

和**question.php**页面：

```
<?php

session_start();
$array=$_SESSION["questions_array"];

foreach ($array as $q => $data) {
    echo '<p>'.array_shift($data).'</p>';
    foreach ($data as $a => $answer) {
        echo 
             '  <input type="radio" name="question-'.$q.'" id="question-'.$q.'"'.
             '         value="'.$a.'"/>'.
             '  <label for="question-'.$q.'">'.$answer.'</label>'.
             '<br>';
    }

}

?> 
```

单击该`Take quiz`链接后，用户将进入问题页面，其中仅显示一个问题。然后用户选择一个答案并点击`submit`。这个提交按钮将把用户带到他们可以点击的结果页面`continue`。

该`Continue`链接会将他们重定向回显示下一个问题的问题页面。

从我之前做过的事情来看，我正在尝试使用该`isset()`功能来实现这一点。但是，问题是我不确定如何准确地编写我的`isset()`.

我从这个网站上找到了这个片段，我不确定它是否有用，但是：

```
if (!isset($_SESSION['FirstVisit'])) {

    //show site for the first time part
    $_SESSION['FirstVisit] = 1;
    header("Location: http://example.com/index.php");

    // Don't forget to add http colon slash slash www dot before!

    } else { Show normal site } 
```

但我又一次发现自己一片空白。我究竟如何使用`isset()`只显示一个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:44:09.467

我有点明白你的要求，我记下了基本结构。这一切都可以在一页上完成，希望对您有所帮助。

编辑：

就像我这样一个好人继承了一个完整的脚本，使用我的上一个建议；p

```
<?php
session_start();
echo '<h2>ONLINE QUIZ</h2>';

//Scores
if($_SERVER['REQUEST_METHOD']=='GET' && isset($_GET['scores'])){
    echo 'Basic output for scores';
    echo '<pre>';
    print_r($_SESSION['answers']);
    echo '</pre>';
    unset($_SESSION['answers']);
    unset($_SESSION['question']);
}

//Session question/array is set
if(isset($_SESSION['question']) && isset($_SESSION['questions_array'])){

    //Handle prev question post
    if($_SERVER['REQUEST_METHOD']=='POST'){
        //process prev question
        $_SESSION['answers'][$_SESSION['question']-1]=(0+$_POST['answer']);
    }

    if($_SESSION['question'] < $_SESSION['total_question']){
        $q=$_SESSION['question'];
        //EDIT - Shuffle answers for output
        //Hold the question into a var
        $question = $_SESSION['questions_array'][$q][0];
        //unset the question from the array
        unset($_SESSION['questions_array'][$q][0]);
        //put all the pos answers into a new array
        $answers = $_SESSION['questions_array'][$q];
        //shuffle the answers
        shuffle($answers);

        echo '<form method="POST" action="">
              <h3>'.$question.'</h3>';
        //loop through the answers
        foreach($answers as $key=>$value){
            //if the value is nothing cont to next, removed question key 0
            if($value==''){continue;}else{
                echo '<p><input type="radio" value="'.$value.'" name="answer">'.$value.'</p>';
            }
        }
        echo '<p><input type="submit" value="Submit"></p>
        </form>';

    }else{
        //Quiz Complete
        echo 'Test Complete <a href="'.basename($_SERVER["SCRIPT_FILENAME"]).'?scores=1">Check scores</a>';
    }

    //Assign next question to session
    $_SESSION['question']++;
}else{

    //Pages first load so show quiz index
    $_SESSION['question']=0;
    get_questions();
?>
    <ul>
        <li><a href='<?=basename($_SERVER["SCRIPT_FILENAME"]);?>'>Take quiz</a></li>
        <li><a href='module.php'>Admin Module</a></li>
    </ul>
    <?php
}

//Function to put questions in session
function get_questions(){
    $file = fopen('data.txt', 'r');
    $array = array();
    while ($line = fgetcsv($file,1000,',')) {
        $array[] = $line;
    }
    fclose($file);
    $_SESSION['questions_array']=$array;
    $_SESSION['total_question']=count($array);
    return;
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:00:38.257

好的，因此您的问题的解决方案是在外部阵列上进行另一个阵列移位。这样，您可以提出一个问题并将其打印出来。测验保留在会话中，因此下次加载页面（即单击继续按钮）时，它会退出下一个问题。

问题页面：

```
<?php

session_start();
if(sizeof($_SESSION['questions_array']) > 0 )
{
    // Get the next question off of the Quiz in our SESSION
    $data = array_shift($_SESSION["questions_array"]);

    echo '<p>'.array_shift($data).'</p>'; // pop the question

    //list out the possible answers
    foreach ($data as $a => $answer) 
    {
        echo 
               '  <input type="radio" name="question-'.$q.'" id="question-'.$q.'"'.
               '         value="'.$a.'"/>'.
               '  <label for="question-'.$q.'">'.$answer.'</label>'.
               '<br>';

    }

}
else
{
  //questions array is empty, show quiz complete page
}

?> 
```

现在您的问题页面只带回一个问题。单击提交时，他们会转到答案页面。单击继续时，它们会返回。然后我们的系统会执行以下操作： 1) 我们的数组中是否还有问题？A) 是 A.1) 好的，用 array_shift($_SESSION['questions_array']) 弹出下一个问题 A.2) 弹出问题，然后列出答案。B) 没有 B.1) 没有更多的问题，我们的测验结束了。

注意：有一些缺点。如果此人刷新页面，他们会收到一个新问题，而另一个问题没有得到回答。您也可以传递一个 $counter 变量，该变量会在每次加载答案页面时更新。然后将该计数器传递给 $_SESSION 数组以带回下一个问题。由你决定。

# asp.net - 唯一数据库不是唯一的吗？-- 使用 IIS7 设置 ASP.net 站点的问题

> ID：10236126
> 
> 赞同：0
> 
> 时间：2012-04-19T20:22:20.000
> 
> 标签：asp.net, sql, iis-7

好吧，我已经四处搜索，但没有人的解决方案可以解决我的问题。

这是我得到的错误（无论如何它的屏幕截图）：

![在此处输入图像描述](../Images/01f78327c01ece179406b656ad33eb34.png)

当我从 Visual Studio 中运行该站点时，该站点运行良好。

有人有什么想法吗？我以前从未在 IIS7 中运行过站点（或者在 IIS 中），所以我在进行过程中有点生气。

这是我的默认页面源：

```
<%@ Page Title="" Language="VB" MasterPageFile="~/master/default.master" AutoEventWireup="false" CodeFile="Default.aspx.vb" Inherits="_Default" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
    <title>TreyBoard - Chan</title>
    <link rel="stylesheet" type="text/css" href="styles/chan.css" />
    <script src="scripts/jquery.js"></script>
    <script src="scripts/chan.js"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="Body" Runat="Server">
    <span id="sound"></span>
    <form id="CommentForm" method="post" runat="server" enctype="multipart/form-data">
        <table style="margin:auto;margin-top:50px;margin-bottom:50px;">
            <tr><td class="chanlabel">Name</td><td>
                <asp:TextBox ID="inp_Name" runat="server"></asp:TextBox>
                <input type="submit" value="Submit" /></td></tr>
            <tr><td class="chanlabel">Comment</td><td>
                <asp:TextBox ID="inp_Comment" runat="server" TextMode="MultiLine"></asp:TextBox>
                </td></tr>
            <tr><td class="chanlabel">Image</td><td>
                <input id="inp_Image" type="file" runat="server">
                </td></tr>
            <tr><td colspan="2">Supported file types are : GIF, JPG, PNG</td></tr>
            <tr><td colspan="2">Maximum file size allowed is 2048 KB.</td></tr>
            <tr><td colspan="2">Images greater than 250x250 pixels will be thumbnailed.</td></tr>
            <tr><td colspan="2">Read the rules and FAQ before posting.</td></tr>
            <tr><td colspan="2">Type %[SoundBoardname] to put a Trey quote in your comment.</td></tr>

        </table>
    </form>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:TurtleString %>" 
        DeleteCommand="DELETE FROM [ChanPost] WHERE [id] = @id" 
        InsertCommand="INSERT INTO [ChanPost] ([Name], [Image], [Comment]) VALUES (@Name, @Image, @Comment)" 
        SelectCommand="SELECT * FROM [ChanPost] ORDER BY [id] DESC" 

        UpdateCommand="UPDATE [ChanPost] SET [Name] = @Name, [Image] = @Image, [Comment] = @Comment WHERE [id] = @id">
        <DeleteParameters>
            <asp:Parameter Name="id" Type="Int32" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="Name" Type="String" />
            <asp:Parameter Name="Image" Type="String" />
            <asp:Parameter Name="Comment" Type="String" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="Name" Type="String" />
            <asp:Parameter Name="Image" Type="String" />
            <asp:Parameter Name="Comment" Type="String" />
            <asp:Parameter Name="id" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource>
    <asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1" 
        ViewStateMode="Disabled">
        <ItemTemplate>
            <hr />
            <div class="reply">
                File: <a href='chan\<%# DataBinder.Eval(Container.DataItem, "Image")%>'><%# DataBinder.Eval(Container.DataItem, "Image")%></a>
                            <table style="margin:auto;width:90%;">
                                <tr>
                                    <td width="35%" style="text-align:right;"><img style="max-height:200px;" src='chan\<%# DataBinder.Eval(Container.DataItem, "Image")%>' /></td>
                                    <td width="65%"><div class="replytext"><span style="color:#117743;font-weight:bold;"><%# DataBinder.Eval(Container.DataItem, "Name")%></span> ID::<%# DataBinder.Eval(Container.DataItem, "id")%>[<a href="reply.aspx?id=<%# DataBinder.Eval(Container.DataItem, "id")%>">Reply</a>]<br /><br /><%# DataBinder.Eval(Container.DataItem, "comment")%></div></td>
                    </tr>
                </table>
            </div>
        </ItemTemplate>
    </asp:Repeater>
</asp:Content> 
```

谢谢！

# c# - 看似无辜的 .NET 正则表达式将页面响应时间缩短 10 倍

> ID：10236128
> 
> 赞同：2
> 
> 时间：2012-04-19T20:22:22.143
> 
> 标签：c#, .net, regex

我将这个表达式（在一个更大的正则表达式中）缩小为将页面响应时间从 0.7 秒缩短到 10 秒：

```
[^\.]{10,}[\.\?\!]\s*$ 
```

它的目的是检测一个至少有 10 个字符长的句子（我知道它并不完美，并且会从自然语言解析中受益）......但是这个表达式到底是什么导致页面响应时间像那样爆炸呢？

Regex 本身不应受到指责，因为它还有其他组件：

```
private static Regex innerTextFilterEx = new Regex(@"part1|part2|<faulty-part-above>", RegexOptions.Compiled | RegexOptions.IgnoreCase); 
```

删除`<faulty-part-above>`在 0.7 秒内执行，添加它会回到 10+ 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:15:57.823

此类问题的最常见原因是可以匹配多种方式的交替导致正则表达式引擎回溯太多。所以第一件事是你“看似无辜”的表达的上下文*很*重要。

将看似无辜的表情放在交替中会有所不同吗？被搜索的字符串的长度在多大程度上有影响？

特别要注意交替中不同部分的量词。是否存在您的主题的一部分可能在交替的任何一部分中匹配的情况。（例如， * 可以匹配零个实例。你需要那个吗？看看交替之间的交互。

# c# - 数据库发生变化时如何通知视图？（MVC，C#）

> ID：10236129
> 
> 赞同：0
> 
> 时间：2012-04-19T20:22:26.137
> 
> 标签：c#, database, model-view-controller, events, design-patterns

我正在考虑基于 MVC 并与数据库一起使用的良好设计，但我不知道如何通知某些数据库更改的视图。使用什么技术，我是否需要更多层？你将如何实施这些？

插入： ![插入](../Images/389d1ac9847d8d754b8ff0ae57170fd8.png)

更新： ![更新](../Images/1fa2d4e992d1fafc89541b5726b2a236.png)

甚至有可能，还是我应该坚持视图上的刷新按钮？

为了使这更复杂，如果我有一个视图，我知道它列出了人们，但我不知道它是否从另一个表显示人们的兴趣？该视图将只使用 Person 类的“兴趣”属性，然后延迟加载兴趣。那么如果某个兴趣的名称发生了变化，Central 模型会通知确定列出兴趣的视图，但是如何找出是否有一个视图也显示了兴趣呢？

Tohu va bohu 是我现在的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:27:34.170

通过javascript从视图中检查db的最新状态更适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:30:16.147

在客户端 - 服务器模型（Asp.Net、Web 服务等）中，客户端需要向服务器请求任何信息。服务器不会以任何方式通知客户端。

可能您可以实现一个 Ajax 请求，定期轮询服务器/数据库更改。

尝试每分钟运行一个客户端脚本，重复请求服务器更改。

# c# - 编辑子表单后刷新并选择父表单的数据绑定组合框

> ID：10236133
> 
> 赞同：0
> 
> 时间：2012-04-19T20:22:46.730
> 
> 标签：c#, winforms, data-binding, pass-by-reference, bindingsource

我正在尝试使用新表单中的新信息更新 SQL 数据绑定组合框。在我进行添加/编辑并保存在弹出表单上之后，我想用新信息刷新组合框并选择当前添加/编辑的项目。目前，下面的代码会刷新列表，但不会像我认为的引用变量那样修改父表单上的“myID”。我怎样才能最有效地做到这一点？我有大约 20 个表格来做类似的事情。

在表格1

```
 int newid = 0;
    private void addToolStripMenuItem1_Click(object sender, EventArgs e)
    {
        CoalSeamsForm csf = new CoalSeamsForm(ref newid);
        csf.ShowDialog();
        coalSeamsTableAdapter.Fill(well_Information2DataSet.CoalSeams);
        coalSeamsBindingSource.Find("CoalSeamID", newid);
    } 
```

在表格 2 中

```
 int myID = 0;

    public CoalSeamsForm(ref int myId)
    {
        this.myID = myId;
        InitializeComponent();
    }

    private void CoalSeamsForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (!isOK)
        {
            if (DialogResult.Yes == MessageBox.Show("Would you like to save the changes?", "Confirm", MessageBoxButtons.YesNo, MessageBoxIcon.Question))
            {
                Save();
                DataRowView drv = (DataRowView)coalSeamsBindingSource.Current;
                myID = (int)drv["CoalSeamID"];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:30:55.193

这里有一个问题。我什至不知道这段代码是否编译。（两个同名的变量？）

```
int myID = 0; 
public CoalSeamsForm(ref int myID) 
{ 
    this.myID = 0; 
    InitializeComponent(); 
} 
```

但是，您的问题是您在表单构造函数中通过 ref myID 传递，然后您的代码退出。当您在 Form_Closing 中更新 var myID 时，您将不再引用在构造函数中传递的 var。要解决您的问题，请声明一个全局属性，例如

```
public property MyID {get; set;} 
```

然后在构造函数中

```
public CoalSeamsForm() 
{ 
    this.MyID = 0; 
    InitializeComponent(); 
} 
```

当用户单击 CONFIRM 按钮时更新属性（不在 form_closing 事件中）

```
 private void ConfirmButton_Click(object sender, EventArgs e)   
   {   
       ...
       this.MyID = (int)drv["CoalSeamID"];   
       this.DialogResult = DialogResult.OK;
   } 
```

最后在调用时使用属性值

```
 using(CoalSeamsForm csf = new CoalSeamsForm())
    {
        if(DialogResult.OK == csf.ShowDialog())
        {
            coalSeamsTableAdapter.Fill(well_Information2DataSet.CoalSeams);    
            coalSeamsBindingSource.Find("CoalSeamID", this.MyID);  
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:01:59.993

引用参数仅在调用方法/构造函数中起作用。一旦它们超出了该单独的方法，它们就会成为第二个对象中的副本。为了实现，根据史蒂夫和其他人的建议，我使用了一个公共属性并从第一种形式访问它。此外，我在发布的代码中使用了一个数据绑定组合框，这是我的一个更典型的应用程序，而不是设置 BindingSource.Position 属性。

在表格1

```
private void addEditCoalSeams(bool isAdd)
    {
        int? myId=null;
        if (!isAdd)
        {
            myId = (int?)coalSeamsComboBox.SelectedValue;
        }

        using (CoalSeamsForm csf = new CoalSeamsForm(myId, isAdd))
        {
            if (DialogResult.OK == csf.ShowDialog())
            {
                coalSeamsTableAdapter.Fill(well_Information2DataSet.CoalSeams);
                coalSeamsComboBox.SelectedValue = csf.coalID;
            }
        }
    } 
```

在煤层表格中

```
 public int? coalID {get; set;}
    bool isAdd = false;

    public CoalSeamsForm(int? coalId, bool isAdd)
    {
        this.coalID = coalId;
        this.isAdd = isAdd;
        InitializeComponent();
    }

    private void okButton_Click(object sender, EventArgs e)
    {
        Save();
        DataRowView drv = (DataRowView)coalSeamsBindingSource.Current;
        this.coalID = (int)drv["CoalSeamID"];
        this.DialogResult = DialogResult.OK;
    } 
```

# java - 如何使用 Synth 将自定义图形嵌入到面板的边框中？

> ID：10236134
> 
> 赞同：0
> 
> 时间：2012-04-19T20:22:47.837
> 
> 标签：java, user-interface, synth

我正在学习使用 Synth，并且试图弄清楚如何嵌入自定义 png 以用作面板的边框。

我的border.xml 看起来像这样：

```
<synth>  
<style id="PanelStyle">  
<insets top="15" left="20" right="20" bottom="15"/>  
    <state>  
        <imagePainter method="panelBorder" path="test.png" sourceInsets="10 10 10 10" />  
    </state>  
</style>  
<bind style="PanelStyle" type="region" key="Panel" />  
</synth> 
```

但是，当我使用该 xml 设置 l&f 时，它会用 png 而不仅仅是边缘填充整个面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:23:02.297

您需要将图像画家的 paintCenter 选项设置为 false，如下所示：

```
<imagePainter method="panelBorder" paintCenter="false" path="test.png" sourceInsets="10 10 10 10" /> 
```

希望这会有所帮助。这是我发现的网站的链接，非常有用：

[http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/synth/doc-files/synthFileFormat.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/synth/doc-files/synthFileFormat.html)

# line - 检查点是否在 line2D 内

> ID：10236140
> 
> 赞同：2
> 
> 时间：2012-04-19T20:23:17.720
> 
> 标签：line, contains, intersection, point

我没有在java api上找到任何方法来做到这一点......有一个像：line.contains（point）..但它说line2d没有任何区域，所以它总是返回false..任何想法?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:33:40.410

逐点比较，看看光标是否匹配。

您可以使用[此处](https://stackoverflow.com/questions/6339328/iterate-through-each-point-on-a-line-path-in-java)描述的 for each 循环进行搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:44:05.213

您应该计算从点到线的距离，如果它足够小，则考虑该点在线上。

谷歌“点到线的距离”或“点到线段的距离”。

# javascript - Chrome 后退按钮意外终止上传流

> ID：10236146
> 
> 赞同：1
> 
> 时间：2012-04-19T20:23:48.243
> 
> 标签：javascript, google-chrome, onbeforeunload

我正在为用户提供基于表单的文件上传（一次一个）和 ajax 更新/进度条。如果他们离开，我想提醒他们任何当前的上传都将被取消。以下代码实现了该目标，但 Chrome (v.18) 除外。如果您单击 Chrome 中的后退按钮，文件上传流将立即终止，并`org.apache.commons.fileupload.FileUploadBase$IOFileUploadException: Processing of multipart/form-data request failed. Stream ended unexpectedly`从 commons.fileupload 库中抛出一个。

我找不到任何特定于这个问题的信息，但是有没有人知道这是否是我现在必须忍受的事情？谢谢。

编辑：我应该补充一点，Chrome 仍然显示“离开页面”对话框，但此时上传已经停止，所以答案根本不会影响它。单击 Chrome 中的链接不会停止上传，并且会按预期运行。

```
window.onbeforeunload = 
    function(event) {
        if (upload_in_progress) {
            var msg = "You are uploading a file." +
              "If you leave this page the upload " +
              "will be cancelled.\n\nLeave page?";
            var event = event || window.event;
            if (event) { event.returnValue = msg; }
            return msg;
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T12:48:51.480

在 Chrome 和 Safari 中，附加到 beforeunload 事件的函数必须始终返回字符串值（向用户显示的消息）。

# java - 执行顺序、静态块、字段

> ID：10236155
> 
> 赞同：0
> 
> 时间：2012-04-19T20:24:35.650
> 
> 标签：java, static, block

我知道静态块在任何事情之前运行。但是在这里，当 B.test() 被调用时会发生什么？执行顺序和值设置？后来，当 b1 设置为 null 时，仍然 b1.i 如何计算为 20？

```
class  B
{    
     static int i;
     static {
         i = 20;
         System.out.println("SIB");
     }
     static int test() {  
         int i = 24;
         System.out.println(i);
         return i; 
     }
}

public class Manager {
    public static void main(String[] arg) {
         B.test();
         B b1 = null;
         System.out.println(b1.i);  
    }
} 
```

输出是：

```
SIB
24
20 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T20:28:26.490

`i`这里的价值

```
static int i;
static {
    i = 20;
    System.out.println("SIB");
} 
```

设置为 20 并且从未修改过，所以当您访问 时`b1.i`，它仍然是`20`.

在您的`test()`方法中，您正在使用另一个`i`与静态变量无关的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T20:26:23.717

`i`是静态的，所以`b1.i`等价于`B.i`。只需设置`b1`为`null`不会更改任何静态变量。

`B.test()`调用时，首先加载`B`类，然后运行静态块。接下来，`B.test()`创建一个名为 的新方法局部变量`i`，它与 完全不同`B.i`。这个新的、本地`i`的被打印并返回。没有对 进行任何更改`B.i`，*当然*不仅仅是因为您创建了一个新`B`的空对象引用——这对任何东西都不会产生任何影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T20:28:11.830

> 但是在这里，当 B.test() 被调用时会发生什么？执行顺序和值设置？

没有变化。

> 后来，当 b1 设置为 null 时，仍然 b1.i 如何计算为 20？

因为`b1`未使用，所以该字段是静态的，因此您实际上正在使用`B.i`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T20:30:50.610

会发生什么：

*   `B.test()`在实际运行之前第一次调用它：
*   类`B`已加载，
*   已执行静态初始化程序（`B.i = 20`现在）
*   方法的内容`B.test()`被执行
*   （创建一个局部方法`int i = 24`（它隐藏静态变量`B.i`）并打印它）
*   `b1.i`被解释为`B.i`(which is still `20`) 并被打印出来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T20:35:34.167

```
What you did:             What really happened:
B.test()                  - static block of class B is run, static i set to 20, SIB is displayed
                          - test method is called, local property i set to 24, 24 is displayed
b1 = null                 - set reference for b1 to null. Note that this doesn't change the value of class B's static properties
System.out.println(b1.i)  - b1 is still Class B. It doesn't matter what its current reference is. Static i for class B is still 20, 20 is displayed 
```

# c# - 根据文本到语音的输出突出显示文本。在 Asp.net c#

> ID：10236156
> 
> 赞同：2
> 
> 时间：2012-04-19T20:24:37.977
> 
> 标签：c#, asp.net

我正在尝试突出显示文本到语音中读取的单词，但它不起作用。直到现在我做了：

```
 string startSpan = "<span style=" + "background-color:Yellow" + ">";
    string endSpan = "</span>";

 //button onclick
protected void speak_Hope(object sender, EventArgs e)
    {
            speaker.Rate = -4;
            speaker.SpeakAsync(announce.InnerText);
            speaker.SpeakProgress += new EventHandler<SpeakProgressEventArgs>    (speaker_SpeakProgress);
            System.Diagnostics.Debug.WriteLine("processing");

    }

void speaker_SpeakProgress(object sender, SpeakProgressEventArgs  e)
    {
        counter2 = e.CharacterPosition - 10;
        counter3 = e.Text.Length;
        counter4 = counter2 + counter3;
        System.Diagnostics.Debug.WriteLine(e.CharacterPosition - 10 + " next one" + e.Text);
        announce.InnerHtml = announce.InnerText.Substring(0, counter2) + startSpan + announce.InnerText.Substring(counter2, counter3) + endSpan + announce.InnerText.Substring( announce.InnerText.Length - 1);

    } 
```

我做得对还是有其他方法，可以用javascript方式完成吗？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:25:34.490

如果您正在寻找文本到语音，这可能是此[Stackoverflow Question](https://stackoverflow.com/questions/144117/any-free-text-to-speech-for-browsers)的副本。该问题提供了使用[WebAnywhere](http://webanywhere.cs.washington.edu/)的建议，这提供了语音到文本，而无需任何额外的下载或特殊软件。很酷！

但是，您似乎实际上正在寻求实现语音识别。根据您的代码，您正朝着错误的兔子洞前进。您将无法使用 Microsoft Speech 库来实现此目标（无法将它们嵌入 XBAP），这是因为它们在服务器上而不是在客户端上运行。

有一些基于 Flash 和 Java 的解决方案确实允许客户端语音识别。我建议您探索它们，因为我相信它们可以实现您的目标。

1) [Speech API](http://www.speechapi.com) - 开源和他们的网站包括一系列我发现运行良好的演示。2) [wami](http://wami.csail.mit.edu/) - 也是开源的

# java - 无法从第三方 Web 服务获得响应

> ID：10236157
> 
> 赞同：1
> 
> 时间：2012-04-19T20:24:50.580
> 
> 标签：java, web-services, soap, wsdl, http-headers

我正在尝试使用 QAS 网络服务在英国进行邮政编码查找。当我发布我的请求 XML 时，它显示“服务器无法识别 HTTP 标头 SOAPAction:DoSearch 的值”。

当我删除 mMethod.setRequestHeader("SOAPAction", "/DoSearch"); 从我的 SOAPClient 收到的错误是无法在没有有效操作参数的情况下处理请求。请提供有效的肥皂动作。

WSDL 的链接是： [https ://ws.ondemand.qas.com/ProOnDemand/V3/ProOnDemandService.asmx?WSDL](https://ws.ondemand.qas.com/ProOnDemand/V3/ProOnDemandService.asmx?WSDL)

我想问题是我无法在标题中设置动作参数，但我不知道如何设置，而且我有点卡住了。请帮忙。

我要发布的请求 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:qas="http://www.qas.com/OnDemand_2011-03">
<soap:Header>
<qas:QAAuthentication>
<qas:Username>username</qas:Username>
<qas:Password>password</qas:Password>
</qas:QAAuthentication>
</soap:Header>
<soap:Body>
<QASearch RequestTag="Single Line postcode search"
xmlns:web="http://www.qas.com/OnDemand_2011_03">
<web:Country>GBR</web:Country>
<web:Engine Flatten="true ">Singleline</web:Engine>
<web:Layout>QADefault</web:Layout>
<web:Search>B168JR</web:Search>
</QASearch>
</soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-14T14:58:25.770

抱歉，这么晚了，我才看到你的问题——我当然希望你能在此之前解决这个问题！

您是使用自动化工具从 WSDL 创建该请求还是手动创建它？您的请求结构存在一些问题，如果我们更改应该允许请求。

要使其正常工作，您需要使用类似于以下的结构：

```
<soap:Envelope
       xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:xsd="http://www.w3.org/2001/XMLSchema"
       xmlns:qas="http://www.qas.com/OnDemand-2011-03">
<soap:Header>
<qas:QAQueryHeader>
    <qas:QAAuthentication>
        <qas:Username>username</qas:Username>
        <qas:Password>password</qas:Password>
    </qas:QAAuthentication>
</qas:QAQueryHeader>
</soap:Header>
<soap:Body>
    <qas:QASearch>
        <qas:Country>GBR</qas:Country>
        <qas:Engine Flatten="true ">Singleline</qas:Engine>
        <qas:Layout>QADefault</qas:Layout>
        <qas:Search>B168JR</qas:Search>
    </qas:QASearch>
</soap:Body>
</soap:Envelope> 
```

我改变的东西很少。

*   qas:QAQueryHeader 已添加到您的标题中。这是 QAS OnDemand 服务所要求的。
*   更正了您的命名空间（下划线为破折号）：
    *   之前：xmlns:qas=" **http://www.qas.com/OnDemand_2011-03** "
    *   之后：xmlns:qas="http://www.qas.com/OnDemand **-** 2011-03"
*   删除了 QASearch 的额外命名空间导入，以简化和整理请求。

# c# - 如何在运行时向事件添加更通用的事件处理程序

> ID：10236162
> 
> 赞同：3
> 
> 时间：2012-04-19T20:25:04.623
> 
> 标签：c#, .net, events, delegates

如果我有一个从 EventArgs 继承的类型（我们称之为 EventArgs1），还有一堆从 EventArgs1 继承的类（我们统称为 EventArgsX），然后是一堆类型的事件`EventHandler<EventArgsX>`，如果在运行时我通过了其中一个事件的 EventInfo，我想添加一个事件处理程序，该处理程序需要 EventArgs1 类型的第二个参数（例如`MyEventHandler(object sender, EventArgs1 e)`）我该怎么做？

如果事件是类型，`EventHandler<EventArgs1>`那么我会这样做：

```
eventInfo.AddEventHandler(this, new EventHandler<EventArgs1>(MyEventHandler)); 
```

但是，当事件是 type 时，这会引发异常`EventHandler<EventArgsX>`，并且由于我在编译时不知道 EventArgsX 是什么，因此我不能简单地新建一个`EventHandler<EventArgsX>` 如果我确实知道在编译时将处理程序添加到哪个事件，那么这个完全可以接受：

```
MyEvent += MyEventHandler 
```

但我根本不知道如何在运行时执行此操作。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T22:20:19.013

> 我不能简单地新建一个`EventHandler<EventArgsX>`

当然可以，尽管您需要使用[`Delegate.CreateDelegate()`](http://msdn.microsoft.com/en-us/library/9tz542wy.aspx)和反射来做到这一点。假设`MyEventHandler`是一个实例方法`this`，你可以这样做：

```
var eventInfo = …;

EventHandler<EventArgs1> badHandler = MyEventHandler;

var goodHandler = Delegate.CreateDelegate(
    eventInfo.EventHandlerType, this, badHandler.Method);

eventInfo.AddEventHandler(this, goodHandler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T22:19:52.917

**更新**

基本上，我已经向后阅读了这个问题；我会留下这个答案，以防其他试图做相反的人发现这个问题*。*

* * *

~~基本上，你不能做你想做的事。如果委托的 EventArgs 类型是事件声明类型的子类，则事件不能添加委托。当输入参数是逆变的时，您正在尝试使用协方差。~~

假设这些类

```
class EventArgs1 : EventArgs {}
class EventArgsA : EventArgs1 {}
class EventArgsB : EventArgs1 {} 
```

考虑一下如果您可以将方法添加`void Handle(object sender, EventArgsA args)`到带有签名的事件会发生什么`void SomeEvent(object sender, EventArgs1 args)`。事件源可能会这样做：

```
if (SomeEvent != null)
{
    var args = new EventArgsB();
    SomeEvent(this, args);      //this line is perfectly legal, as EventArgsB inherits from EventArgs1.
} 
```

但是，当运行时到达事件调用列表中的这个委托时，它现在必须将`args`对象传递给`Handle(object, EventArgsA)`，这当然不能这样做，因为 EventArgsB 实例不是 EventArgsA 实例。将导致运行时异常。实际上，当您添加委托时会捕获不匹配，因此会引发异常。

# entity-framework - Entity Framework Code First - 恢复相同类型的集合

> ID：10236164
> 
> 赞同：0
> 
> 时间：2012-04-19T20:25:13.230
> 
> 标签：entity-framework

我首先使用实体​​框架代码。我试图创建的类包含两个集合（相同类型）。我在恢复我各自的收藏时遇到问题。

我的课程如下所示：

```
public class Destination
{   
    public int DestinationId { get; set; } 
    public string Name { get; set; } 
    public List<Lodging> Lodgings { get; set; }           
    public List<Lodging> Lodgings2 { get; set; }
}
public class Lodging
{  
    public int LodgingId { get; set; } 
    public string Name { get; set; } 
    public Destination Destination { get; set; }
} 
```

我创建了一个新的目的地，然后我重新打开（关闭并打开）数据库连接。当我检索目的地时，我的集合（dest.Lodgings 和 dest.Lodgings2）为空。如何恢复各自的收藏？如果我的班级只有一个特定类型的集合，我可以执行以下操作：

```
var lodgings = context.Lodgings.Where(l => l.Destination.DestinationId == destId).ToList(); 
```

我可以看到关系在数据库模式（Destination_DestinationId1 和 Destination_DestinationId2）中得到维护，但我似乎无法找到它们。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:30:17.463

除了使用 Include （如您所见）（在检索目的地的同时从数据库加载相关数据），您还可以在事后检索住宿。因此，如果您查询目的地*然后*想要住宿，那是可能的。一种方法称为显式加载，您将使用 Load 方法。另一种是延迟加载，它要求以特定方式设置您的类，仅*提及*Lodgings 属性就会触发对数据库的调用以检索它们。

Ef 团队博客上有一篇很棒的博客文章，介绍了使用 DbContext 加载相关数据的各种方法：http: [//blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef -feature-ctp5-part-6-loading-related-entities.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)

hth

朱丽叶

# php - file_get_contents() 是否有超时设置？

> ID：10236166
> 
> 赞同：169
> 
> 时间：2012-04-19T20:25:16.913
> 
> 标签：php, timeout, file-get-contents

[`file_get_contents()`](http://php.net/file_get_contents)我正在使用循环中的方法调用一系列链接。每个链接的处理时间可能超过 15 分钟。现在，我担心 PHP 是否`file_get_contents()`有超时时间？

如果是，它将超时并移至下一个链接。我不想在没有完成前一个链接的情况下调用下一个链接。

所以，请告诉我是否`file_get_contents()`有超时时间。包含 的文件`file_get_contents()`设置[`set_time_limit()`](http://php.net/set_time_limit)为零（无限制）。

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2012-04-19T20:46:37.327

默认超时由[`default_socket_timeout`ini-setting](http://php.net/filesystem.configuration#ini.default-socket-timeout)定义，即 60 秒。您也可以即时更改它：

```
ini_set('default_socket_timeout', 900); // 900 Seconds = 15 Minutes 
```

设置超时的另一种方法是将超时[`stream_context_create`](http://php.net/function.stream-context-create)设置为正在使用的[HTTP 流包装器的](http://php.net/wrappers.http)[HTTP 上下文选项](http://php.net/context.http)：

```
$ctx = stream_context_create(array('http'=>
    array(
        'timeout' => 1200,  //1200 Seconds is 20 Minutes
    )
));

echo file_get_contents('http://example.com/', false, $ctx); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-11-12T00:24:36.930

正如@diyism 提到的，“ *default_socket_timeout、stream_set_timeout 和stream_context_create 超时都是每行读/写的超时，而不是整个连接超时。* ”@stewe 的最佳答案让我失望了。

作为 using 的替代方法`file_get_contents`，您始终可以使用`curl`超时。

所以这是一个可用于调用链接的工作代码。

```
$url='http://example.com/';
$ch=curl_init();
$timeout=5;

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, $timeout);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);

$result=curl_exec($ch);
curl_close($ch);
echo $result; 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2019-11-17T03:46:08.830

**是的！**通过在第三个参数中传递[流上下文：](https://www.php.net/manual/en/function.stream-context-create.php)

这里有***1s***的超时：

```
file_get_contents("https://abcedef.com", 0, stream_context_create(["http"=>["timeout"=>1]])); 
```

[来源https://www.php.net/manual/en/function.file-get-contents.php](https://www.php.net/manual/en/function.file-get-contents.php)的评论部分

**[HTTP 上下文选项](https://www.php.net/manual/en/context.http.php)：**

```
method
header
user_agent
content
request_fulluri
follow_location
max_redirects
protocol_version
timeout 
```

[非 HTTP 流上下文](https://www.php.net/manual/en/context.php)

```
Socket
FTP
SSL
CURL
Phar
Context (notifications callback)
Zip 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-21T01:39:02.397

值得注意的是，如果动态更改*default_socket_timeout ，在调用**file_get_contents*后恢复其值可能会很有用：

```
$default_socket_timeout = ini_get('default_socket_timeout');
....
ini_set('default_socket_timeout', 10);
file_get_contents($url);
...
ini_set('default_socket_timeout', $default_socket_timeout); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-28T17:13:58.337

当我在我的主机中更改我的 php.ini 时，对我来说工作：

```
; Default timeout for socket based streams (seconds)
default_socket_timeout = 300 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-12-13T16:35:53.493

对于原型设计，使用 shell 中的 curl 和`-m`参数允许传递毫秒，并且在这两种情况下都可以工作，连接没有启动，错误 404、500，错误的 url，或者整个数据没有完整检索到在允许的时间范围内，超时始终有效。**Php 永远不会出去玩**。

只是不要在 shell 调用中传递未经处理的用户数据*。*

```
system("curl -m 50 -X GET 'https://api.kraken.com/0/public/OHLC?pair=LTCUSDT&interval=60' -H  'accept: application/json' > data.json");
// This data had been refreshed in less than 50ms
var_dump(json_decode(file_get_contents("data.json"),true)); 
```

# objective-c - 动态更新 UIAlertView 消息和换行符问题

> ID：10236167
> 
> 赞同：2
> 
> 时间：2012-04-19T20:25:17.587
> 
> 标签：objective-c, ios, uialertview

我需要在 UIAlertView 的消息中显示多行文本。我尝试添加一个'\n'，但它没有效果。它仍然显示：“这是一个示例......”。

但是，如果我将 iPhone 转为横向模式，它会按照我的意图显示消息。然后，如果我切换回纵向模式，它也会在那里正确显示。

更新：经过进一步考虑，我怀疑这与我正在使用新的（并且更长的）字符串更新当前消息这一事实有关。我已经在警报视图上调用了“显示”，并且正在尝试更新消息。也许需要重新绘制一些东西？就像我之前说的，如果我改变方向，它会正确显示（不管我从哪个方向开始，我仍然有同样的问题）。我已经尝试过“setNeedsDisplay”和“setNeedsLayout”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T21:47:35.633

虽然我相信在显示时更新警报视图的文本是错误的，但我看到的唯一改变它的方法就是这样

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"test" message:@"this is a message\nthis is a new line text" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:@"test button",nil];  
[alert show];

//set the new message
NSString *newMessage = [NSString stringWithString:@"Test\nWith a new message with\ncustom new line string\n and a lot\n of new lines\n Yep"];
[alert setMessage:newMessage];

//get the original alert Frame
CGRect alertFrame = alert.frame;
//get the alert view Label
UILabel *alertLabel = [alert.subviews objectAtIndex:2];
//and get the original frame position
CGRect alertLabelFrame = alertLabel.frame;

//see how much space we are needing for the new message and adjust
int heightChange = [newMessage sizeWithFont:[UIFont systemFontOfSize:16] constrainedToSize:CGSizeMake(alertLabelFrame.size.width, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap].height - alertLabelFrame.size.height;

alertFrame.size.height += heightChange;
//adjust the Label height to the new height
alertLabelFrame.size.height += heightChange;

//adjust the frame and elements with an animation for smoothness
[UIView animateWithDuration:0.15 delay:0.4 options:(UIViewAnimationCurveEaseIn) animations:^{
    [alert setFrame:alertFrame];           
    alertLabel.frame = alertLabelFrame;
    //move any buttons
    for (UIView *subView in alert.subviews) {
        if ([subView isKindOfClass:[UIButton class]]) {
            //this is a button move it
            UIButton *button = (UIButton*)subView;
            CGRect alertButtonFrame = button.frame;
            //adjust button Y position to the new height
            alertButtonFrame.origin.y += heightChange-5;
            button.frame = alertButtonFrame;
        }
    }
} completion:nil]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T20:30:23.273

对于换行符，请在文本中使用 \n 换行符，如下所示：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"test" message:@"this is a message\nthis is a new line text" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];
[alert release]; 
```

即使使用 setMessage 这也有效：

```
UIAlertView *alert = [[UIAlertView alloc] init];
[alert setMessage:@"this is\na test"];
[alert show];
[alert release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:50:22.363

使用“\r”符号。它应该正确地换行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T01:18:36.373

这是一些简单的代码来调整警报中的消息大小。请注意，警报的框架需要足够大。您可以用一些换行符填充初始警报。

```
for (UILabel *l in alertView.subviews){
    if ([l isKindOfClass:[UILabel class]]){
        float w = l.frame.size.width;
        [l setNumberOfLines:0];
        [l sizeToFit];
        CGRect r = l.frame;
        r.size.width = w;
        l.frame = r;
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-08-03T12:45:06.327

1.  创建您自己的警报视图类别。

AlertWithBlock.h 文件

```
#import <UIKit/UIKit.h>

@interface UIAlertView (AlertWithBlock)

- (void (^)(UIAlertView *alertView, NSInteger buttonIndex))delegateBlock;

- (void)setDelegateBlock:(void (^)(UIAlertView *alertView, NSInteger buttonIndex))delegateBlock;

+ (void)alertViewWithTitle:(NSString *)title buttonTitle:(NSString *)buttonTitle message:(NSString *)message;

+ (UIAlertView *)alertWithTitle:(NSString *)title message:(NSString *)message cancelButtonTitle:(NSString   *)cancelButtonTitle otherButtonTitles:(NSArray *)otherButtonTitles delegate:(void (^)(UIAlertView *alertView, NSInteger buttonIndex))delegate;

@end 
```

# python - “TypeError: 'NoneType' object is not callable” 有时会出现，有时 - 不是

> ID：10236168
> 
> 赞同：0
> 
> 时间：2012-04-19T20:25:17.867
> 
> 标签：python, recursion, stack-overflow

我有 2 个函数用于从文件中读取数据并将其放入字典。

```
def read_input():
  f = open(r"D:\data.txt","r")
  g = {}
  for ln in f.readlines():
  ...g = ...
  f.close()
  return g 
```

与第二个功能几乎相同：

```
def reverse():
  f = open(r"D:\data.txt","r")
  g = {}
  for ln in f.readlines():
  ....
  f.close()
  return g 
```

之后我有这样的代码：

```
g = read_input()
g_rev = reverse() 
```

适用于小型`g`& `g_rev`（用于小型输入文件）。之后我需要进行深度递归，所以我添加了这些行并包含了`read_input`和`reverse``main1`

```
if __name__=="__main__":
  sys.setrecursionlimit(100000)
  threading.stack_size(67108864*3)    
  thread = threading.Thread(target=main1)
  thread.start()
  thread.join(0) 
```

仍然可以正常工作`g`...但是对于大输入文件我得到了这样的错误：

```
g = reverse()
 TypeError: 'NoneType' object is not callable. 
```

如果我交换`read_input()`并`reverse()`调用`reverse()`它通过，但是对于`read_input`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:27:26.343

read_input() 或 reverse() 可能有错误。
场景 1
执行 return g 时，g 已经是 NoneType
场景 2
函数存在缺陷，阻止它们到达 return g 语句。

无论哪种方式，要真正帮助您，我们都需要您的更多代码，尤其是函数部分。

# c++ - 采集累加器（软件设计）

> ID：10236173
> 
> 赞同：1
> 
> 时间：2012-04-19T20:25:31.877
> 
> 标签：c++, architecture, software-design, acquisition

我需要一些软件设计方面的帮助。假设我有一台相机，它可以获取数据，将它们发送到过滤器，并一次显示一个图像。

现在，我想要的是等待两张图像，然后将这两张图像发送到过滤器，然后将它们都发送到屏幕。

我想到了两个选项，我想知道选择哪一个：在我的 Acquisitioner（或其他）类中，我是否应该放置一个队列，等待两个图像，然后再将它们发送到 Filterer 类？我应该在 Acquisitionner 和 Filterer 之间放置一个 Accumulator 类吗？

两者最终都会起作用，但你认为哪一个会更好？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:36:04.440

为了给出直接的答案，我将在一个单独的对象中实现**Accumulator策略。**原因如下：

在过去从事类似设计的工作时，我发现将此模型中的不同“参与者”视为*源*和*汇*非常有帮助。*源*对象将能够生成或输出图像到附加的接收*器*对象。该系统中的过滤器或累加器将被设计为*管道*——换句话说，它们将实现*接收器*和*源*的接口。一旦你想出了一种连接通用源、管道和接收器的机制，就很容易将累积策略实现为管道，对于`n`接收到的每个图像，如果`n`是奇数，它将保持它，并输出它们, 如果`n`是偶数。

一旦你有了这个系统，你就可以轻松地改变源（图像文件阅读器、电影解码器、相机捕捉接口）、接收器（图像文件或电影编码器、显示查看器等）和管道（过滤器、累加器、编码器，多路复用器），而不会破坏您的其余代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:32:44.443

这取决于。但是，如果您的队列所做的只是等待第二张图像的出现，我认为您可以简单地在 Acquisitioner 中实现它。

另一方面，如果您想在那里合并任何其他功能，那么增加模块化和与之相伴的所有好处都不会受到丝毫伤害。

在这种特殊情况下，我认为这并不重要。

# c# - 如何找到 Visual Studio 正在寻找程序集参考的位置

> ID：10236175
> 
> 赞同：1
> 
> 时间：2012-04-19T20:25:46.447
> 
> 标签：c#, .net, reference, assemblies

所以我在.NET 和 C# 中做一个项目。缺少装配参考，并且上面有一个小的警告标志。我想知道如何查看视觉工作室项目正在寻找它说该项目不存在的地方。我怎么做？程序集引用是指当您打开项目然后打开 System.Core 和其他程序集引用所在的引用文件夹时。这似乎没有什么，也许这是不可能的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:27:01.017

您可以在文本编辑器中打开项目文件并查看参考。会有一条路。

```
<Reference Include="nunit.framework">
      <HintPath>..\..\external-bin\NUnit-2.5.10.11092\dlls\net-2.0\framework\nunit.framework.dll</HintPath>
    </Reference> 
```

您也可以在解决方案资源管理器中右键单击它并查看属性。那里将有一个“路径”字段。

![在此处输入图像描述](../Images/94e169db8b63c90bc7f08c901ae14084.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T21:39:36.280

是的，它会在文本编辑器中，但是如果它不会总是显示在 Visual Studio 的路径中，那么如果路径没有出现在 VS 中，你将只需要使用文本编辑器。

# ruby-on-rails - 在 Glassfish 中部署 Ruby on Rails

> ID：10236177
> 
> 赞同：1
> 
> 时间：2012-04-19T20:25:53.590
> 
> 标签：ruby-on-rails, ruby, glassfish, jruby

我刚开始学习 Ruby on Rails。现在我创建了一个简单的项目，它在 IDE (Aptana) 中运行良好。我的问题是：如何在 Glassfish 中部署它？

一些在线文章提到了 JRuby 和一些 Glassfish Gem，但没有详细说明如何做到这一点。我是否必须使用 JRuby，是否有分步教程告诉我如何在 Glassfish 中部署我的 rails 项目？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:30:19.333

是的，您必须使用 JRuby，因为 Glassfish 是一个 Java EE 应用服务器。

这是一个教程：

[http://docs.oracle.com/cd/E19776-01/820-4926/chapterone/index.html](http://docs.oracle.com/cd/E19776-01/820-4926/chapterone/index.html)

# php - 插入 IF 条件，ELSE 什么都不做，MySQLi

> ID：10236182
> 
> 赞同：1
> 
> 时间：2012-04-19T20:26:01.017
> 
> 标签：php, mysql, if-statement, sql-update

我正在使用 PHP 后端，使用 MySQLi 对象来使用准备好的语句。但是，我有一个问题，我需要这样的查询：

```
IF ( SELECT count(*) FROM table <= 3)
   INSERT INTO table2 VALUES(5,2)
// dont do anything if (SELECT count(*) FROM table > 3) 
```

它在开始时给出语法错误并且无法理解错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:33:42.277

```
$query = mysql_query('SELECT COUNT(*) AS num FROM `myTable`');
$row = mysql_fetch_assoc($query);
$total = $row['num'];
if($total <= 3)
{
    // Insert statament
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T21:52:36.087

让 MySQL 来做脏活，并尽可能避免与数据库的通信。

转到[19.2。使用存储例程（过程和函数）](http://dev.mysql.com/doc/refman/5.5/en/stored-routines.html)并学习类似于 PL/SQL 的那些技巧。当您有多个相互依赖的查询时，您会发现更容易解决问题。

经过一些学习，您将能够编写一个存储过程，该过程在插入表之前检查逻辑表达式。

类似的东西（语法可能在这里失控 - 只是例子）：

```
CREATE PROCEDURE myProcedure(IN myCap INT) 
BEGIN 
  DECLARE rowCount INT; 
  SELECT count(*) FROM table INTO rowCount;
  IF rowCount <= myCap THEN
    INSERT INTO [...]
  END IF;
END; 
```

# iphone - ShareKit 缺少文件

> ID：10236183
> 
> 赞同：1
> 
> 时间：2012-04-19T20:26:05.603
> 
> 标签：iphone, objective-c, social-networking

我在 xcode 4 中有一个功能完善的应用程序。

一旦我将框架和 shk 文件夹添加到我的项目中，我就会收到 6 个错误，首先是；

```
#import </usr/include/objc/objc-class.h> file not found 
```

我试过这个

[iPhone - ShareKit , SHK.m 给出 FileNot Found 的编译器错误](https://stackoverflow.com/questions/8310512/iphone-sharekit-shk-m-giving-the-compiler-error-for-filenot-found)

但还是一样...

问候米尔扎

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T17:16:05.910

您使用的是 xcode 4.3 吗？如果是，那么只需更换

```
#import </usr/include/objc/objc-class.h> 
```

这与

```
#import <objc/runtime.h> 
```

# ruby-on-rails - Ruby on Rails：使用除非进行验证，JQuery 验证

> ID：10236184
> 
> 赞同：0
> 
> 时间：2012-04-19T20:26:06.120
> 
> 标签：ruby-on-rails, jquery-validate

在我的模型中，我有以下内容：

```
attr_accessor :address, :located_in_us

validates_length_of :address, :in => 1..50, :message => "Required field, please enter your address." 
```

在我的表格上，我有一个单选按钮，询问他们是否位于美国。如果他们选择“是”，那么我希望地址字段是必需的。当他们单击“否”时，我有一个显示/隐藏隐藏包含地址的 DIV，但表单永远不会提交，因为该字段，即使它被隐藏，它仍然是必需的。

我尝试了以下方法：

```
validates_length_of :address, :in => 1..50, :message => "Required field, please enter your address.", :unless => :located_in_us == "1" 
```

但这似乎不起作用，因为添加在地址下方的 javascript 如下所示：

```
<script type='text/javascript'>$(function() { $('[name="myform[address]"]').rules('add', {"maxlength":50,"required":true,"unless":false,"minlength":1,"messages":{"required":"Required field, please enter your address."}});});</script> 
```

我的问题是......我如何制作表格，以便当用户单击“否”单选按钮（他们不住在美国）时，地址字段不再是必填字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:23:20.207

我认为您`:unless`的模型验证选项应该是 a`lambda`或 a `Proc`：

```
validates_length_of :address, :in => 1..50, :message => "Required field, please enter your address.", :unless => lambda { |o| o.located_in_us == "1" } 
```

我不确定您是如何解释的，但我猜由于该`:unless`值评估为`false`，就好像它不存在一样。

对于客户端 jQuery 规则，我认为该`unless`选项不存在。适当的选项是`depends`：

```
$(function() { 
  $('[name="myform[address]"]').rules('add',
                 { "maxlength":50, 
                   "required": {
                   "depends": function(){
                       return $("input:radio[name=located_in_us]:checked").val() != "1"; // I think this should get the value of the radio button, but double check...
                     }
                   }, 
                   "messages": {"required":"Required field, please enter your address."}
                 });
}); 
```

# mysql - SELECT DISTINCT 仅前四个数字

> ID：10236185
> 
> 赞同：0
> 
> 时间：2012-04-19T20:26:11.713
> 
> 标签：mysql, sql

考虑下表：

```
ticker  code
--------------
AA      151040
AAP     452020
DOW     151010
DVN     151020
EXC     452050
FAD     452070
POE     207010 
```

我想为每个代码选择代码 - 但必须仅对代码的前四个数字进行比较（例如：1510、4520、1510 等），结果如下：

```
1510 AA
1510 DOW
1510 DVN
4520 AAP
4520 EXC
4520 FAD
2070 POE 
```

用什么查询我只能取前四个数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:29:16.563

使用[`LEFT`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_left)：

```
SELECT LEFT(code, 4) AS code, ticker FROM tbl ORDER BY code; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:28:37.007

```
SELECT SUBSTRING(code,1,5) AS SUB_CODE,ticker
FROM TABLE; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T20:30:54.503

您可以在mySql中使用Left函数选择前四个Left（code，4）然后使用order by。

# ruby-on-rails - 当排除 :in 指向变量时，为什么验证不起作用？

> ID：10236188
> 
> 赞同：0
> 
> 时间：2012-04-19T20:26:23.977
> 
> 标签：ruby-on-rails, arrays, validation

我的 ActiveRecord 验证中有以下内容：

```
validates :username, :exclusion => { :in => %w(admin admins administrator administrators), :message => "\"%{value}\" is reserved."} 
```

可以正常工作。但是当我将其替换为：

```
validates :username, :exclusion => { :in => @reserved_words, :message => "\"%{value}\" is reserved."}
@reserved_words = ["admin","admins","administrator","administrators"] 
```

我收到以下错误：

> 具有#include 方法的对象？或者需要 proc 或 lambda，并且必须作为配置哈希的 :in 选项提供。

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T20:33:40.547

你真的在`@reserved_words`变量被使用后初始化它吗？你的台词应该换了！

# c - 将 C 结构包装到 Ruby

> ID：10236189
> 
> 赞同：4
> 
> 时间：2012-04-19T20:26:26.650
> 
> 标签：c, ruby

如何初始化 C 结构并将其包装为 Ruby 类作为另一个 Ruby 对象的参数？我正在重写内存，但不知道如何修复它。

Ruby 代码，我想创建 Person 类的实例并将 Address 变量添加到其中，这是另一个类：

```
require_relative 'my_extension'

class Address
  def inspect
    "Replaced #inspect: <Address: town:#{town}>"
  end
end

class Person
    def initialize
        puts "init"
    end

    def print()
        puts "Addr class #{@addr.inspect}"
    end
end

foo1=Person.new
foo1.add_address("London")
foo1.print
foo2=Person.new
foo2.add_address("Paris")
foo1.print
foo2.print
foo1.print 
```

C 代码，扩展 Ruby：

```
#include <stdio.h>
#include "ruby.h"

struct Address {
    char * town;
};

static VALUE get_addr(VALUE self) {
    return rb_iv_get(self,"@addr");
}

static VALUE wrap_address_get_town(VALUE self) {

    struct Address * address;
    Data_Get_Struct(self, struct Address, address);
    return rb_str_new2(address->town);
}

VALUE foo_class;
VALUE address_wrapper_class;

void free_m(){
    printf("free\n");//just for test
}

void add_address_t(VALUE self,VALUE new_town){
    printf("add_address\n");
    /*init new struct and add value to it*/
    struct Address addr;
    addr.town=StringValuePtr(new_town);

    /*wrap struct*/
    VALUE wrapped_address=Data_Wrap_Struct(address_wrapper_class, 0, free_m,&addr);

    /*set it as instance variable*/
    rb_iv_set(self,"@addr",wrapped_address);
}

static VALUE foo_class_alloc(VALUE self){
    return self;
}

void Init_my_extension(){
    foo_class = rb_define_class("Person", rb_cObject);

    address_wrapper_class = rb_define_class("Address", rb_cObject);

    rb_define_method(address_wrapper_class, "town", wrap_address_get_town, 0);

    rb_define_method(foo_class, "add_address", add_address_t, 1);

} 
```

输出产生意想不到的结果：

```
init
Addr class Replaced #inspect: <Address: town:London>
init
Addr class Replaced #inspect: <Address: town:Paris> //London expected
Addr class Replaced #inspect: <Address: town:�)> //another problem
Addr class Replaced #inspect: <Address: town:�)>
run
run
free
free 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:41:58.843

FFI gem 可以提供更好的方法来完成您想做的事情：

```
require 'ffi'  
module AddressModule
   extend FFI::Library
   ffi_lib '<path to your c library>'

   class Address < FFI::Struct
      layout :address, :string,
   end
end

person = AddressModule::Address.new
person[:address] = "an address" 
```

管他呢。[在https://github.com/ffi/ffi/wiki](https://github.com/ffi/ffi/wiki)查看 FFI 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:20:24.043

所有 C 例程都应定义为静态返回值。这应该是 Qnil，如果不返回任何相关内容。例程还有另一个问题`add_address_t`- 你正在包装一个本地定义的结构 - 它应该被分配`ALLOC(struct Address);`

# android - 为 IME 调整大小时缩小 ScrollView - 我做错了什么？

> ID：10236190
> 
> 赞同：0
> 
> 时间：2012-04-19T20:26:32.197
> 
> 标签：android, resize, scrollview, android-softkeyboard, ime

我试图让下面的 ScrollView 缩小，以便在使用 IME 时，它上面的所有其他元素仍然可见，或者至少，让 ScrollView 的顶部向下移动到屏幕。

主要.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" android:layout_height="match_parent"
    android:orientation="vertical" android:id="@+id/gameLayout">

    <TextView android:id="@+id/gameTitle" android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:textColor="@color/Red"
        android:maxLines="1" />

    <ScrollView android:id="@+id/gameScroll"
        android:layout_width="match_parent" android:layout_height="fill_parent"
        android:fillViewport="false" android:layout_above="@+id/gameEntry"
        android:layout_below="@+id/gameTitle">

        <TextView android:id="@+id/gameText" android:layout_width="match_parent"
            android:layout_height="wrap_content" android:scrollbars="vertical" />

    </ScrollView>

    <AutoCompleteTextView android:id="@+id/gameEntry"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true" android:layout_toLeftOf="@+id/gameSubmit"
        android:hint="@string/Hint" android:imeOptions="actionDone"
        android:lines="1" />

    <TextView android:id="@+id/gameSubmit" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_alignBaseline="@+id/gameEntry"
        android:layout_alignParentRight="true" android:gravity="center"
        android:text="@string/Submit" android:textColor="@color/Red"
        android:textSize="18dp" android:lines="1" />

</RelativeLayout> 
```

这可以做到吗？我可能犯了一些愚蠢的错误......哦，我做了他们关于[如何防止键盘隐藏我的 EditText 的所有建议？](https://stackoverflow.com/questions/3478601/how-to-prevent-that-the-keyboard-hides-my-edittext)

而且，我还添加`android:windowSoftInputMode="adjustResize"`到清单中，它仍在平移...提示 3..2..1 中的“哇，这是一个愚蠢的问题”......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:02:52.980

尝试将 更改为`android:layout_height="fill_parent"`并添加`ScrollView`到.`android:layout_height="wrap_content"``android:layout_above="@+id/gameEntry"``ScrollView`

# asp.net-mvc-3 - 从自定义 ValidationAttribute 中的 ModelClientValidationRequiredIfRule 方法获取复杂类型的全名

> ID：10236198
> 
> 赞同：1
> 
> 时间：2012-04-19T20:27:23.607
> 
> 标签：asp.net-mvc-3, complextype, validationattribute

我正在使用**[The Complete Guide To Validation In ASP.NET MVC 3](http://www.devtrends.co.uk/blog/the-complete-guide-to-validation-in-asp.net-mvc-3-part-2)**中的示例来创建**RequiredIf验证属性（它位于“****更复杂的自定义验证器**”标题下的页面下方约 1/3 ）。除了一种情况外，这一切都很好，那就是如果我需要针对复杂类型进行验证。例如，我有以下模型：

```
public class MemberDetailModel
{
  public int MemberId { get; set; }
  // Other model properties here
  public MemberAddressModel HomeAddress { get; set; }
  public MemberAddressModel WorkAddress { get; set; }
}

public class MemberAddressModel
{
  public bool DontUse { get; set; }
  // Other model properties here

  [RequiredIf("DontUse", Comparison.IsEqualTo, false)]
  public string StreetAddress1 { get; set; }
} 
```

问题是，当 StreetAddress 属性的属性验证被渲染时，它会被`data-val-requiredif-other="DontUse"`. 不幸的是，由于地址是主模型的子类型，因此需要使用**HomeAddress_DontUse**的名称进行修饰，而不仅仅是**DontUse**。

奇怪的是，验证对于服务器端验证工作得很好，但是客户端不显眼的验证失败并出现 JS 错误，因为 JS 无法找到名称仅为“DontUse”的对象。

因此，我需要找到一种方法来更改 ModelClientValidationRequiredIfRule 方法，以知道它正在验证的属性是父类型的子类型，如果是这样，请将其`ParentType_`添加到“otherProperty”字段（例如 otherProperty 变为`HomeAddress_DontUse`.

我曾尝试`typeof(MemberAddressModel)`作为属性的参数传入，但即使在调试属性创建时，我似乎也无法从该类型中找到对 HomeAddress 或 WorkAddress 的父类型的任何引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:39:47.407

根据 The Flower Guy 的建议，我想出了以下似乎可行的方法。我只是在 customValidation.js 文件中修改了以下内容：

```
jQuery.validator.addMethod("requiredif", function (value, element, params) {
  if ($(element).val() != '') return true;
  var prefix = getModelPrefix(element.name); // NEW LINE
  var $other = $('#' + prefix + params.other);  // MODIFIED LINE
  var otherVal = ($other.attr('type').toUpperCase() == "CHECKBOX") ? ($other.attr("checked") ? "true" : "false") : $other.val();
  return params.comp == 'isequalto' ? (otherVal != params.value) : (otherVal == params.value);
}); 
```

我还在该文件中添加了以下方法（在 JQuery 块中，以便只能私人访问）：

```
function getModelPrefix(fieldName) {
  return fieldName.substr(0, fieldName.lastIndexOf(".") + 1).replace(".","_");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:47:18.567

现在不能完全做到这一点，但问题出在客户端 javascript 函数中：

jQuery.validator.addMethod("requiredif" ...

js 不够复杂，无法处理可能有模型前缀的复杂视图模型。如果您查看 Microsoft 的 jquery.validate.unobstrusive.js（在每个 MVC3 应用程序的 Scripts 文件夹中），您会发现一些有用的方法，包括 getModelPrefix 和 appendModelPrefix。您可以采用类似的方法并更改 requiredIf 验证方法 - 查看 jquery.validate.unobtrusive.js 中的 equalto 方法以获得帮助。

# php - 如何避免 mod_rewrite 中的循环？

> ID：10236199
> 
> 赞同：0
> 
> 时间：2012-04-19T20:27:28.643
> 
> 标签：php, apache, .htaccess

**为了澄清，这个问题已经过编辑：**

我正在尝试创建“漂亮的 URL”，应该如下伪装自己：

> mysite.com/index.php?p=1 ==> mysite.com/site_one/index.php
> 
> mysite.com/aboutus.php?p=2 ==> mysite.com/site_two/aboutus.php
> 
> mysite.com/anypage.php?p=3 ==> mysite.com/site_three/anypage.php

如您所见，mod_rewrite 应该简单地将“p”变量转换为预定的伪目录（该目录不存在……这只是美学重写）。

显然，这造成了复杂性。当用户访问 mysite.com/site_one/index.php 时，应该有一个*后台*传输到 mysite.com/index.php?p=1。此后台传输导致导致服务器错误的循环。

我试图通过使用以下代码来防止此循环：

```
RewriteCond %{QUERY_STRING} !NON=
RewriteCond %{QUERY_STRING} ^(.*[&?])?p=1([&].*)?$
RewriteRule ^/?(.*)  /site_one/$1 [PT,L]

RewriteCond %{QUERY_STRING} !NON=
RewriteRule ^/?site_one/?(.*)  /$1?NON=1&p=1 [PT,L] 
```

不幸的是，这仍然会导致服务器错误。谁能看到代码哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:55:05.410

我最终不得不解决这个问题，因为没有 htaccess 方法对我有帮助。我基本上将“p”的所有值转发到适当的页面并将变量“p”更改为变量“s”。然后我告诉我的网络应用程序“p”的值等于“s”存在的“s”的值。我将此代码放在与服务器通信的文件中，因此它存在于我网站的所有页面上。

这既丑陋又草率，但这也是我必须首先这样做的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:37:47.793

如果需要，您可以在幕后设置一个虚拟查询变量。尝试这样的事情：

```
RewriteEngine On

RewriteCond %{QUERY_STRING} !NON=
RewriteCond %{QUERY_STRING} ^(.*[&?])?p=1([&].*)?$
RewriteRule ^/?page.php  /main_site/ [R,QSA]

RewriteCond %{QUERY_STRING} !NON=
RewriteRule ^/?main_site/?(.*)  /page.php?NON=1&p=1&extra=$1 [QSA,L] 
```

并且只是从 php 中的 get/request 中忽略`NON`。

# c - 收到HTTP请求时如何获取客户端的名字？

> ID：10236204
> 
> 赞同：0
> 
> 时间：2012-04-19T20:27:42.217
> 
> 标签：c, http, sockets, network-programming

我正在用 C 编写一个基本的代理服务器。

我想通过名称或 IP 来识别我从其接收请求的服务器/机器。

如何做到这一点？我不确定从哪里获取信息。

这是我的连接代码：

```
 unsigned short port = atoi(argv[1]); /* port number to listen on */

  struct sockaddr_in server;
  server.sin_family = PF_INET;
  server.sin_addr.s_addr = INADDR_ANY;
  server.sin_port = htons( port );
                    /* host-to-network-short() convert to big endian */
  int len = sizeof( server );

  if ( bind( sock, (struct sockaddr *)&server, len ) < 0 )
  {
    perror( "bind() failed" );
    return EXIT_FAILURE;
  }

  /* activate the socket as a listener */
  listen( sock, 5 );   /* 5 is number of backlogged waiting client requests */
  //printf( "Listener socket created and bound to port %d on fd %d\n", port, sock );

  struct sockaddr_in client;

  while ( 1 )
  {
   // printf( "Blocked on accept()\n" );
    unsigned int fromlen;
    int newsock = accept( sock, (struct sockaddr *)&client, &fromlen );
                  /* accept() blocks */
    //printf( "Accepted client connection\n" );

    char buffer[5000];
    int n = read( newsock, buffer, 4999 );
    if ( n < 1 )
    {
      perror("Read() failed.\n");
    }
    else
    {
      buffer[n] = '\0';
      //printf( "Rcvd message from client: \n\n----\n\n%s\n\n----\n\n", buffer );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:01:04.607

以下是您检索 IP 和主机名的方法：

```
struct sockaddr_in client;
[...]
 int newsock = accept( sock, (struct sockaddr *)&client, &fromlen );
printf("Client accepted: %s \n", inet_ntoa(client.sin_addr));  

// And the host name
struct hostent *hostName;
struct in_addr ipv4addr;

inet_pton(AF_INET, inet_ntoa(client.sin_addr), &ipv4addr);
hostName = gethostbyaddr(&ipv4addr, sizeof ipv4addr, AF_INET);
printf("Host name: %s\n", hostName->h_name); 
```

# ruby - 在 ruby on rails 中获取记录

> ID：10236205
> 
> 赞同：0
> 
> 时间：2012-04-19T20:27:43.680
> 
> 标签：ruby, database, ruby-on-rails-3

我正在尝试通过这种方法根据 ROR 中的某些字段获取记录

```
@indivisuals = Profile.find_by_manager_id(current_user.account.id) 
```

但是当我尝试迭代它时，它会显示一些错误。

```
undefined method each' for undefined method each' for #<Profile:0x8383680> 
```

相关代码：

```
<% if @indivisuals %>
  <% @indivisuals.each do |profile| %>
  <li><a href="accounts/show/<%=h profile.account_id %>" style="padding-left:10px;"><%=h profile.full_name %></a>&nbsp;<a href="accounts/edit/<%=h profile.account_id %>" style="padding-left:10px;">Edit</a>&nbsp;&nbsp;<a href="#" style="padding-left:10px;">Delete</a></li>
<% end %> 
```

请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:29:45.133

那是因为你得到的是一个具体的对象，而不是一个要迭代的关系。相反，您需要更改您的取景器，例如：

```
@indivisuals = Profile.where(:manager_id => current_user.account.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:24:56.383

使用`find_all_by_manager_id`而不是`find_by_manager_id`

```
@indivisuals = Profile.find_all_by_manager_id(current_user.account.id) 
```

# c# - 适应json语法

> ID：10236208
> 
> 赞同：-1
> 
> 时间：2012-04-19T20:27:48.553
> 
> 标签：c#, json, asp.net-web-api, highstock

我在 ASP.NET MVC 4 中使用 WebApi，并且试图将正确的 json 传递给 HighStock 图表。

json 语法显示[在这里](http://jsfiddle.net/gh/get/jquery/edge/highslide-software/highcharts.com/tree/master/samples/stock/demo/flags-general/)。

具体来说，这是我无法创建的部分：

```
[{
                x : Date.UTC(2011, 3, 25),
                title : 'H',
                text : 'Euro Contained by Channel Resistance'
            }, {
                x : Date.UTC(2011, 3, 28),
                title : 'G',
                text : 'EURUSD: Bulls Clear Path to 1.50 Figure'
            }, {
                x : Date.UTC(2011, 4, 4),
                title : 'F',
                text : 'EURUSD: Rate Decision to End Standstill'
            }, {
                x : Date.UTC(2011, 4, 5),
                title : 'E',
                text : 'EURUSD: Enter Short on Channel Break'
            }, {
                x : Date.UTC(2011, 4, 6),
                title : 'D',
                text : 'Forex: U.S. Non-Farm Payrolls Expand 244K, U.S. Dollar Rally Cut Short By Risk Appetite'
            }, {
                x : Date.UTC(2011, 4, 6),
                title : 'C',
                text : 'US Dollar: Is This the Long-Awaited Recovery or a Temporary Bounce?'
            }, {
                x : Date.UTC(2011, 4, 9),
                title : 'B',
                text : 'EURUSD: Bearish Trend Change on Tap?'
            }] 
```

如何控制单引号是否应该围绕一个值？我有所有相关数据，问题只是将数据转换成这个 json。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:33:19.660

为什么不使用 JSON 助手？？？ [JSON方法](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.json.aspx)

# javascript - Jquery - 动画 innerHTML 可能吗？

> ID：10236212
> 
> 赞同：2
> 
> 时间：2012-04-19T20:28:06.303
> 
> 标签：javascript, jquery, html, jquery-animate, innerhtml

我正在尝试使用一个执行 setTimeout 的函数，然后更改 innerHTML：

```
<script type="text/javascript">
    $(document).ready(function(){
        setTimeout(function(){
            document.getElementById("middlecolor").innerHTML='new text new text';
        }, 1000);
    });
</script> 
```

**问题**：我怎样才能为出现的新文本设置动画，即逐行而不是一次全部编写？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:44:05.763

尝试这样的事情：

```
<div id="text">
</div>

$(document).ready(function () {
    var interval = setInterval(function () {
        $('#text').append('<p style="display: none;">new text</p>');
        $('#text p:last').fadeIn('slow');
    }, 5000);
}); 
```

[请参阅此处](http://jsfiddle.net/7Jve8/3/)的示例

如果你想杀死间隔，可以这样做：

```
clearInterval(interval); 
```

伟大的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T21:36:18.690

逐行是有点棘手，但[可能](http://jsfiddle.net/QZVJF/3/)。

```
var ps = document.getElementById("text").children;
var i = 0;
var $p = $(ps[i]);

setTimeout(function newline(){
$p.css("height", function(index, h){
    h = parseInt(h);
    h += parseInt($p.css("line-height"));
    console.log(h,  ps[i].scrollHeight);
    if (h > ps[i].scrollHeight)
        $p = $(ps[++i]);
    return h;
}); 
if (i < ps.length)
    setTimeout(newline, 200);
}, 200);​ 
```

我建议使用打字机效果，这也很讨人喜欢：http: [//jsfiddle.net/pZb8W/1/](http://jsfiddle.net/pZb8W/1/)

```
var ps = document.getElementById("text").children;
var i = 0;
var $p, text;
var speed = 20;

setTimeout(function newchar(){
if (!text) {
    $p = $(ps[i++]); 
    text = $p.text();
    $p.empty().show();
}
$p.append(document.createTextNode(text.charAt(0)));
text = text.slice(1);
if (text.length || i < ps.length)
    setTimeout(newchar, Math.random()*speed+speed);
}, 3*speed);​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T20:55:57.683

这是一个可以在多行文本中逐行动画的函数：

```
<script type="text/javascript">
$(document).ready(function(){

function animateAddText(id, text, delta) {
    var lines = text.split("\n");
    var lineCntr = 0;
    var target = $("#" + id);

    function addLine() {
        if (lineCntr < lines.length) {
            var nextLine = "";
            if (lineCntr != 0) {
                nextLine = "<br>";
            }
            nextLine += lines[lineCntr++];
            $("<span>" + nextLine + "</span>").hide().appendTo(target).fadeIn(1000);
            setTimeout(addLine, delta);
        }
    }
    addLine();
}

var multilineText = "First line\nSecond Line\nThird Line\nFourth Line\nFifth Line";
animateAddText("middlecolor", multilineText, 1000);

});
</script> 
```

还有一个工作演示：http: [//jsfiddle.net/jfriend00/Gcg5T/](http://jsfiddle.net/jfriend00/Gcg5T/)

# javascript - FB.api 名称未定义

> ID：10236213
> 
> 赞同：1
> 
> 时间：2012-04-19T20:28:09.707
> 
> 标签：javascript, facebook, sdk

我正在使用 Facebook Connect 为我的网站开发一个新的 Facebook 应用程序。我正在使用 JS SDK 并尝试显示用户名。这是我的代码：

```
window.fbAsyncInit = function() {
    FB.init({
      appId      : 'myappid', // App ID
      oauth      : 'true',
      channelUrl : '//mychannelfile', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    FB.Event.subscribe('auth.login', function (response) {
                // do something with response

            });

    var connecter=false;

    FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                connecter=true;
                FB.api('/me', function(user) {
                console.log(user.name);
                });
            }
        else connecter=false;
        });
  }; 
```

如果我检查控制台，用户连接时 user.name 的结果是未定义的。我不明白我做错了什么。

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T09:43:34.107

```
 window.fbAsyncInit = function() {
// init the FB JS SDK
FB.init({
  appId      : '176854392480453',                        
  status     : true,                                 
  xfbml      : true                                 
});

// Additional initialization code such as adding Event Listeners goes here

FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
alert("connected");
connecter=true;
FB.api('/me', function(user) {
alert(user.name);
alert(user.first_name);
alert(user.last_name);
alert(user.email);
});

  } 
 }); 
```

# iphone - 以图形方式跟踪触摸输入的路径；用什么ios框架？

> ID：10236221
> 
> 赞同：0
> 
> 时间：2012-04-19T20:28:32.030
> 
> 标签：iphone, objective-c, ios, frameworks

我已经为 iOS 开发了大约 6 个月，并且对需要在屏幕上跟踪用户触摸输入的应用程序有一个想法。

我的 iOS 开发经验完全是导航风格的应用程序，所以我从来不用处理任何图形框架。

所以我的问题是我应该使用什么框架来完成这个？

路径追踪将是应用程序中唯一的图形部分，所以我觉得像 openGL ES 和 cocos2d 这样的一些游戏开发框架可能有点矫枉过正；但话又说回来，我不知道。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:35:39.733

最简单的方法是使用`CGPathRef`// `CGMutablePathRef`，`UIBezierPath`它们是 Quartz 和 UIKit 的一部分（你应该已经熟悉了）。使用接触点来构建你的路径。创建 的子类`UIView`，并在其`-drawRect:`方法中绘制路径。

这有帮助吗？

# sql - 如何将此 LEFT JOIN 返回的行数限制为一？

> ID：10236229
> 
> 赞同：11
> 
> 时间：2012-04-19T20:29:06.303
> 
> 标签：sql, oracle, join, limit

所以我想我已经看到了一个解决方案，但是它们都是非常复杂的查询。我在 oracle 11g 中供参考。

我所拥有的是一个简单的一对多连接，效果很好，但我不需要很多。我只希望左表（那个）只加入符合加入条件的任何 1 行......行不多。

我需要这样做，因为查询是在一个汇总中，所以如果我执行正常的左连接，我会得到 5 行，而我只应该得到 1。

所以示例数据如下：

```
TABLE 1:
-------------
TICKET_ID      ASSIGNMENT
5              team1
6              team2

TABLE 2:
-------------
MANAGER_NAME   ASSIGNMENT_GROUP  USER
joe            team1             sally
joe            team1             stephen
joe            team1             louis
harry          team2             ted
harry          team2             thelma 
```

我需要做的是在 ASSIGNMENT=ASSIGNMENT_GROUP 上加入这两个表，但只返回 1 行。

当我进行左连接时，我会返回三行，这就是左连接的本质

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T20:45:38.107

如果 oracle 支持行号（分区依据），您可以创建一个子查询，选择其中行等于 1。

```
SELECT * FROM table1
LEFT JOIN
(SELECT *
FROM   (SELECT *,
           ROW_NUMBER()
             OVER(PARTITION BY assignmentgroup ORDER BY assignmentgroup) AS Seq
    FROM  table2) a
WHERE  Seq = 1) v
ON assignmet = v.assignmentgroup 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-19T20:52:27.263

你可以做这样的事情。

```
SELECT t1.ticket_id, 
       t1.assignment,
       t2.manager_name,
       t2.user
  FROM table1 t1
       LEFT OUTER JOIN (SELECT manager_name,
                               assignment_group,
                               user,
                               row_number() over (partition by assignment_group
                                                    --order by <<something>>
                                                 ) rnk
                          FROM table2) t2
                     ON (    t1.assignment = t2.assignment_group
                         AND t2.rnk = 1 ) 
```

这将数据分区`table2`，`assignment_group`然后任意排列它们以拉出任意一行`assignment_group`。如果您关心返回哪一行（或者如果您想使返回的行具有确定性），您可以`ORDER BY`在分析函数中添加一个子句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T20:32:10.260

我认为你需要的是`GROUP BY`在`ASSIGNMENT_GROUP`球场上使用。

[http://www.w3schools.com/sql/sql_groupby.asp](http://www.w3schools.com/sql/sql_groupby.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T20:48:28.603

在 Oracle 中，如果您想要 1 个结果，您可以使用该[`ROWNUM`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/pseudocolumns009.htm)语句来获取查询的前 N ​​个值，例如：

```
SELECT *
FROM TABLEX
WHERE
ROWNUM = 1 --gets the first value of the result 
```

这个单一查询的问题是 Oracle 永远不会以相同的顺序返回数据。因此，您必须在使用 rownum 之前对数据进行排序：

```
SELECT *
FROM
    (SELECT * FROM TABLEX ORDER BY COL1)
WHERE
ROWNUM = 1 
```

对于您的情况，您似乎只需要 1 个结果，因此您的查询应如下所示：

```
SELECT *
FROM
    TABLE1 T1
    LEFT JOIN 
    (SELECT *
    FROM TABLE2 T2 WHERE T1.ASSIGNMENT = T2.ASSIGNMENT_GROUP
    AND
    ROWNUM = 1) T3 ON T1.ASSIGNMENT = T3.ASSIGNMENT_GROUP 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T20:51:03.730

在 MySQL 中，您只需 GROUP BY ASSIGNMENT 即可完成。Oracle 更加严格，拒绝只选择（以未定义的方式）选择三行的哪些值。这意味着所有返回的列都必须是 GROUP BY 的一部分或受一个聚合函数（COUNT、MIN、MAX ...）的约束

您当然可以选择不关心并在返回的列上使用一些聚合函数。

```
select TICKET_ID, ASSIGNMENT, MAX(MANAGER_NAME), MAX(USER)
from T1
left join T2 on T1.ASSIGNMENT=T2.ASSIGNMENT_GROUP
group by TICKET_ID, ASSIGNMENT 
```

如果你这样做，我会严重怀疑你首先需要加入。

MySQL 也可以帮助 GROUP_CONCAT 在你想要一个列的组值的字符串连接的情况下（人类经常这样），但使用 Oracle 是非常[复杂](http://explainextended.com/2009/04/05/group_concat-in-oracle-10g/)的。

使用已经建议的子查询是一种选择，[请在此处](https://stackoverflow.com/a/3397719/217001)查看示例。它还允许您在选择第一行之前对子查询进行排序。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-19T20:34:50.680

您可以使用子查询 - 选择前 1

# javascript - 在 jsFiddle 中工作，但不在现场

> ID：10236234
> 
> 赞同：0
> 
> 时间：2012-04-19T20:29:26.603
> 
> 标签：javascript, jquery

```
var add_time = function ($category) {
    'use strict';

    var time_element = $('<input size="7" class="time" placeholder="00:00" pattern="(?:(?:\\d:)?[0-5])?\\d:[0-5]\\d" title="Please insert a time in the form of [[h:]m]m:ss." />');

    if ($('.time').length === 0) {
        time_element.insertAfter($category.find('.add_time_button'));
    } else {
        time_element.insertAfter($('.time'));
    }
};

$('.add_time_button').click(function () {
    'use strict';

    add_time($(this).parentsWhen('.category'));
}); 
```

我不明白。没有控制台错误。在我看来一切都很好。通过 JSFiddle 运行它。没有。叹。问题全在标题中。这是 jsFiddle：http: [//jsfiddle.net/gtr053/N2HmG/](http://jsfiddle.net/gtr053/N2HmG/)

对于未来的读者，这将很快成为 404。直播网站：[http ://bama.ua.edu/~tscrompton/annotation/](http://bama.ua.edu/~tscrompton/annotation/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:34:19.473

jsfiddle 将您的 javascript 包围在一个`onLoad`. 在您的网站上，您将 javascript 放在哪里？在头部？如果是这样，这就是它不起作用的原因。您必须在元素加载后分配您的点击和所有爵士乐。

**编辑：**

在您的 javascript 文件中，您可以执行以下操作：

```
$(document).ready(function(){
    //put the javascript from the jsfiddle in here
}); 
```

# facebook - 可以通过 Omniauth Rubygem 获取 Facebook 访问令牌的过期时间吗

> ID：10236236
> 
> 赞同：0
> 
> 时间：2012-04-19T20:29:43.997
> 
> 标签：facebook, token, omniauth

我想存储通过使用 Omniauth gem 获得的我的 FB 访问令牌的过期时间，但我没有看到一个简单的方法来做到这一点。从 Omniauth 代码 (0.3.x) 看来，Omniauth 只是忽略了过期时间，并且需要进行一些相当深入的定制才能获得它。

有谁知道这样做的最佳方法，或者是否可能/值得麻烦？

谢谢，韦斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:16:29.727

也许我错了，但你试过吗？

```
auth = request.env["omniauth.auth"]
expires_at = Time.at(auth['credentials']['expires_at']) 
```

# java - 如何在 Android 上使用 EditText 更改按钮的文本

> ID：10236238
> 
> 赞同：0
> 
> 时间：2012-04-19T20:29:47.550
> 
> 标签：java, android

我正在尝试使用 EditText 一个 Activity 来更改另一个按钮的文本。我知道我必须通过 SharedPreferences，虽然这是我卡住的地方。

带有按钮的活动：

```
protected void onResume() {
    super.onResume();

    class1.setText(this.getButtonText());
}

public String getButtonText()
{
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    String buttonText = prefs.getString("ButtonText", "Default button text"); // I am not sure how to get the button text here. This is what someone was trying to have me do?
    return buttonText;
} 
```

这是我的 Activity，它有 EditText 和按钮，可以通过按钮返回到 Activity：

```
public class EditClass1 extends Activity implements OnClickListener{

    Button class1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.editclass1); 

        SettingButtons();
        class1.setOnClickListener(this);
    }

    private void SettingButtons() {
        // TODO Auto-generated method stub
        class1 = (Button) findViewById(R.id.edittoclass1);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.edittoclass1:
            startActivity(new Intent("com.clayton.calendar.TOCLASS"));
        break;      
        }
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        Editor editor = prefs.edit();
        editor.putString("ButtonText",  // This is not working
            ((TextView)findViewById(R.id.edittoclass1)).getText().toString());
        editor.commit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:33:13.210

尝试这个：

```
@Override
protected void onPause() {
// TODO Auto-generated method stub
super.onPause();
EditText text = (EditText)findViewById(R.id.Setclass);
String text2 = text;
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
Editor editor = prefs.edit();
editor.putString("ButtonText",  // This is not working
        ((TextView)findViewById(R.id.edittoclass1)).getText().toString());
editor.commit(); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:45:45.010

暂时忽略共享偏好，为什么不在包含按钮的类中使用公共**静态**字符串变量。

```
public static String buttonText = "somthing"; 
```

当在包含编辑文本的类中时，您可以调用一个事件处理程序，该处理程序侦听编辑文本的更改或按下按钮时触发的事件处理程序。

```
ButtonActivity.buttonText = text.getText(); 
```

然后在包含按钮的activity的onResume()方法中

```
button.setText(buttonText); 
```

试试这个，它可能是做你想做的更简单的方法。请记住，在声明 buttonText 变量时，请确保您记得使用**static**关键字。如果没有它，您将需要直接引用对象，使用 static 关键字，您可以只引用所需的类。但是，对于包含活动的按钮的所有实例，作为静态按钮文本将是相同的。如果您只打算拥有一个活动实例，那么这就是您的解决方案。如果没有，那么你必须更有创意。

# c++ - C++ 运算符重载：没有已知的从对象到引用的转换？

> ID：10236240
> 
> 赞同：13
> 
> 时间：2012-04-19T20:29:56.650
> 
> 标签：c++, operator-overloading

当我尝试编译以下（g++ 4.6.3）

```
class A {};

A& operator*=( A& a, const A& b )
{
  return a;
}

A operator*( const A& a, const A& b )
{
  return A( a ) *= b;
}

int main( int, char*[] )
{
  A a, b;

  a = a*b;

  return 0;
} 
```

我得到错误

```
/tmp/test.cxx: In function ‘A operator*(const A&, const A&)’:
/tmp/test.cxx:14:20: error: no match for ‘operator*=’ in ‘(* & a) *= b’
/tmp/test.cxx:14:20: note: candidate is:
/tmp/test.cxx:6:1: note: A& operator*=(A&, const A&)
/tmp/test.cxx:6:1: note:   no known conversion for argument 1 from ‘A’ to ‘A&’ 
```

这让我很困惑——从一个类到对该类的引用的转换怎么可能不知道呢？

如下更改类 A 的声明没有任何效果：

```
class A
{
public:
  A() {}
  A( const A& ) {}
}; 
```

同样的错误。

我将非常感谢有关这里发生的事情的提示。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T20:35:20.120

就像 Lucian 所说，您不能将临时对象绑定到非常量引用。编译器的期望是对象将在表达式之后不再存在，因此修改它没有意义。

要修复您的代码，请删除临时代码（使参数`const&`在 中没有意义`operator *=`）：

```
A operator*(A a, const A& b)
{
    return a *= b;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T20:36:56.907

当您编写时`A( a )`，您会创建一个 A 类型的临时变量（一个右值），您可以使用它进行复制构造`a`。C++ 声明不能将右值作为非 const 引用传递。Visual Studio 对这条规则有点草率，但 gcc 等强制执行。

要修复，试试这个（这完全一样，但是你通过命名那个变量来创建一个左值）。更多关于 l 和 r 值的[信息在这里](http://eli.thegreenplace.net/2011/12/15/understanding-lvalues-and-rvalues-in-c-and-c/)

```
A operator*( A a, const A& b )
{
   return a *= b;
} 
```

# c# - 未处理的异常：MySql.Data.MySqlClient.MySqlException：密钥“PRIMARY”的重复条目“CC2-2012-04-10-201205”

> ID：10236241
> 
> 赞同：1
> 
> 时间：2012-04-19T20:30:01.963
> 
> 标签：c#, mysql, exception

我们有一个 C# 应用程序一直在三台机器上运行，其中 2 台运行 Mono 和 1 台在过去 4 年中成功运行 Windows。

最近，我们在进行修复时发生了崩溃并更新了 Windows 机器。机器上的MySql是5.5.16

发布更新，应用程序现在在标题“未处理的异常：MySql.Data.MySqlClient.MySqlException：重复条目'CC2-2012-04-10-201205'键'PRIMARY'”中抛出错误

*   没有一个字段是自动递增的
*   我们正在使用 DbDataAdapter
*   sql 语句是一个 UPDATE
*   所有服务器的所有索引、表结构、权限等似乎都是相同的
*   表上没有触发器
*   我们一遍又一遍地删除和修复表和索引，但无济于事
*   我们尝试过 MyIASM 和 InnoDB（我们最初使用 InnoDB）

我不知道更新语句如何因重复键而失败，关于我发现的最近的解决方案是很多很多版本之前的 MySql 错误：http: //bugs.mysql.com/bug.php?id= [27650](http://bugs.mysql.com/bug.php?id=27650) 但这显然是多年前修复的。

任何人有任何想法我可以在哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:33:16.693

这个问题原来是 MySQL 的 ADO.NET 驱动程序（连接器/NET）和 MySQL 服务器版本之间的版本不匹配。真的很明显。

我们使用的 ADO 驱动程序原来是一个相当旧的版本，同时肯定有一些重大变化。

只需升级 mysql.data.dll 即可解决所有问题

编辑：确认，我们使用的是非常旧的 MySql.Data ADO.NET 驱动程序版本 1.0.10.1 这适用于 MySql 服务器 5.1.53 及以下版本。（这是我们的代码仍然可以工作的最高服务器版本）

一旦我们升级到 MySql 服务器版本 5.5.24，应用程序都开始因 DataAdapter 失败，除了重复记录（没有重复记录）

# android - 同步使用 ActionBarSherlock 和 ViewPagerIndicator 不会编译

> ID：10236242
> 
> 赞同：6
> 
> 时间：2012-04-19T20:30:08.083
> 
> 标签：android, dalvik, actionbarsherlock, android-viewpager

同时使用 ActionBarSherlock 和 ViewPagerIndicator 时，出现以下错误；根据我的阅读 - 这是由于两者中的冲突/重复库引起的。

一种解决方案是让 ABS 依赖于 VPI（或者相反，我都尝试了）但是即使在清理和重建之后，这仍然给了我同样的错误。现在我只是在两个独立的项目中工作，所以我可以完成我的工作——但我显然想把它们结合起来哈。帮助将不胜感激！

```
[2012-04-19 00:39:20 - MashableReader] Dx 
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat;
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.command.dexer.Main.processClass(Main.java:486)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.command.dexer.Main.access$400(Main.java:67)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.command.dexer.Main.processOne(Main.java:418)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.dx.command.dexer.Main.run(Main.java:206)
[2012-04-19 00:39:20 - MashableReader] Dx   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[2012-04-19 00:39:20 - MashableReader] Dx   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[2012-04-19 00:39:20 - MashableReader] Dx   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[2012-04-19 00:39:20 - MashableReader] Dx   at java.lang.reflect.Method.invoke(Unknown Source)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:702)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:646)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.core.internal.resources.Project.build(Project.java:124)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
[2012-04-19 00:39:20 - MashableReader] Dx   at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:928)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1132)
[2012-04-19 00:39:20 - MashableReader] Dx   at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2012-04-19 00:39:20 - MashableReader] Dx 1 error; aborting
[2012-04-19 00:39:20 - MashableReader] Conversion to Dalvik format failed with error 1 
```

**更新答案：** 好的 - 正如下面的答案所得到的，问题是 Eclipse ADT 中的依赖关系解析。基本上我的解决方案是让 ViewPagerIndicator 依赖于 ActionBarSherlock（意思是，在 VPI 属性中，我将 ABS 添加到项目中，就像您在常规项目中所做的那样 - 对于那些可能会向后思考的人）。当我的代码中出现错误说某些方法无法被覆盖时，我仍然遇到了问题 - 这部分是因为您有错误的导入，所以删除所有导入和 CRTL+SHIFT+O（快速导入解决) 并从 android.support.v4 包中选择所有的包，你应该都很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T21:17:03.663

是的，问题是 ActionBarSherlock 和 ViewPagerIndicator 都使用 libs/android-support-v4.jar 依赖项。

最简单的解决方案是将您的工作站升级到最新的 Android SDK 和 Eclipse ADT 插件版本（至少 r17），因为这种情况现在由 SDK 自动处理（自 r17 起），请参阅[r17 更改日志](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)：

> ### 依赖解析
> 
> 当一个项目引用两个都需要相同 jar 文件的库项目时，构建系统必须检测并解决重复问题。

另请注意，自 r17 以来，libs 文件夹下的所有 jar 文件都会自动填充到项目的类路径中，您不再需要手动将它们添加到项目的构建路径中，在[r17 更改日志](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)中也提到：

> 项目具有源文件夹，以及库项目和 jar 文件依赖项。除了在 project.properties 中添加库项目作为依赖项之外，不需要其他设置，项目的类路径会自动填充：
> 
> *   项目的 libs/*.jar 的内容
> *   图书馆项目的输出。
> *   图书馆项目的 libs/*.jar

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T05:40:16.237

我使用的是最新版本的 ADT、SDK 等，但它仍然存在这个问题 - 它似乎仍然不知道从哪个依赖库等中使用哪个支持库。

TJ 的解决方案确实有效，但我使用了另一种方法。

我的解决方案如下：

1.  进入每个库项目和引用库的主应用程序项目并删除 libs/android-support-v4.jar 引用
2.  回到每个项目并从文件系统中拖动 android-support-v4.jar（在我的 Mac 上，我将 SDK 存储在我的文档文件夹中：Users//Documents/Android/android-sdk-mac_x86/extras/android/compatibility /v4/android-support-v4.jar) 到 libs 文件夹并选择链接到 jar 而不是将其复制到项目中。
3.  现在我的所有项目都在我的文件系统上引用相同的 .jar 文件，如果我将来更新支持库（通过 Android SDK 管理器），.jar 将被更新，而项目将依次拉入最新的 jar。

因此更新支持库不应该破坏任何东西并让您使用最新版本。

# c# - 从我的网络位置获取计算机名称

> ID：10236249
> 
> 赞同：3
> 
> 时间：2012-04-19T20:30:30.017
> 
> 标签：c#, networking

我想知道是否有一种方法可以使用 C# 获取出现在我的网络位置中的所有计算机名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:35:23.703

这有效，但需要一段时间。：/

```
public List<String> ListNetworkComputers()
{
    List<String> _ComputerNames = new List<String>();
    String _ComputerSchema = "Computer";
    System.DirectoryServices.DirectoryEntry _WinNTDirectoryEntries = new System.DirectoryServices.DirectoryEntry("WinNT:");
    foreach (System.DirectoryServices.DirectoryEntry _AvailDomains in _WinNTDirectoryEntries.Children) {
        foreach (System.DirectoryServices.DirectoryEntry _PCNameEntry in _AvailDomains.Children) {
            if (_PCNameEntry.SchemaClassName.ToLower().Contains(_ComputerSchema.ToLower())) {
            _ComputerNames.Add(_PCNameEntry.Name);
            }
        }
    }
    return _ComputerNames;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T20:35:42.183

您将需要使用 NetServerEnum() API。我不相信基础 .NET 库中有一个托管包装器，但我可以通过快速的谷歌搜索找到它：http: [//www.codeproject.com/Articles/16113/Retreiving-a-list-of -网络计算机名称使用](http://www.codeproject.com/Articles/16113/Retreiving-a-list-of-network-computer-names-using)

*注意*：我没有测试或彻底审查过代码项目代码，但如果有任何问题，它应该足以满足您的需求。

编辑：**除非您确定域环境，否则不要使用 DirectoryServices**。System.DirectoryServices 类是一个 ADSI 包装器，无需 Active Directory 即可查询。NetServerEnum() 适用于工作组和域，但不保证最可靠的数据（并非所有机器都可能出现）。它依赖于计算机浏览器服务。

最好的解决方案可能是一个包含两种可能性并合并结果的类：/

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T20:39:02.727

取决于用户的许可，应用程序可能会或可能不会获得这些信息。

尝试使用 ActiveDirectory。这应该可以为您提供有关本地网络的准确信息。

使用 System.DirectoryServices。

# security - 如果我想为 GMail 构建一个插件，我需要存储明文密码吗？

> ID：10236250
> 
> 赞同：1
> 
> 时间：2012-04-19T20:30:33.250
> 
> 标签：security, passwords, gmail, imap

根据我对 POP/IMAP 的了解，我需要用户的明文密码才能代表他们检索电子邮件。如果我想为 GMail 创建一个插件服务，通过 POP/IMAP 服务器访问他们的邮件，我是否必须保存他们的明文密码？我能做些什么来解决这个问题吗？如果我必须保存明文密码，最好的方法是什么？

编辑：实际上，GMail 似乎支持其 IMAP/SMTP 服务器的 OAuth 身份验证：[https ://developers.google.com/google-apps/gmail/oauth_overview](https://developers.google.com/google-apps/gmail/oauth_overview)

不完全确定 OAuth 如何与 IMAP 和 SMTP 一起使用，但这是一个起点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:48:06.483

我不确定你在用什么（PHP、JS 等）编写它，但这是[Gmailr](http://www.jamesyu.org/2011/02/05/introducing-gmailr-an-unofficial-javscript-api-for-gmail/)，一个用于 Gmail 的 Javascript API。

此外，请查看[这篇](https://developers.google.com/google-apps/gmail/oauth_libraries)文章，它提供了在 Java、Python 和 PHP 中将 Oauth 与 IMAP 和 SMTP 结合使用的指南。

# mysql - 防止 PetaPoco 将变量识别为输入参数

> ID：10236258
> 
> 赞同：5
> 
> 时间：2012-04-19T20:30:59.297
> 
> 标签：mysql, sql, petapoco

我在 C# 应用程序中使用 PetaPoco.Core 4.0.3 来访问 MySql 数据库。

我正在尝试创建一个使用变量的查询，但我不希望 PetaPoco 将它们视为输入参数。这是一个无用的查询，只是为了说明我的意思：

```
SET @num := 0;

SELECT
  @num := @num + 1 AS row_number
FROM
  buzz
LIMIT 100; 
```

当我这样做时，PetaPoco 将 @num 识别为输入参数，我收到以下错误：

> 指定了参数“@num”，但所有传递的参数都没有具有此 >name 的属性（在“SET @num := 0; SELECT @num;”中）

我还尝试通过将 @ 字符加倍来逃避它

```
SET @@num := 0;

SELECT
  @@num := @@num + 1 AS row_number
FROM
  buzz
LIMIT 100; 
```

但后来我收到

> 必须定义参数“@num”。

有没有办法在查询中声明和使用变量，而 PetaPoco 不会将它们识别为输入参数？

提前致谢

保罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:49:23.957

我找到了解决方案。问题出在 .NET 连接器设置中（请参阅[http://blog.tjitjing.com/index.php/2009/05/mysqldatamysqlclientmysqlexception-parameter-id-must-be-defined.html](http://blog.tjitjing.com/index.php/2009/05/mysqldatamysqlclientmysqlexception-parameter-id-must-be-defined.html)）

我必须通过添加属性“允许用户变量”并将其设置为 true 来更改连接字符串。

> 数据库=db；数据源=localhost；用户ID=root；密码=pass；允许用户变量=True

之后，我的查询的第二个版本（@@variable）开始工作。

# java - 是否有任何现有的 Java 库允许您从纬度/经度快速地在内存中查找邮政编码（奖金、州和城市）？

> ID：10236259
> 
> 赞同：6
> 
> 时间：2012-04-19T20:31:01.010
> 
> 标签：java, latitude-longitude, reverse-geocoding, mkreversegeocoder

我见过许多各种语言的所谓“反向地理编码”库；所有这些都依赖于通过 REST 或类似方法调用外部提供者。但是，如果您必须每秒处理数千个请求，则不能调用 REST 提供程序。

另一方面，这个问题应该很容易解决——基于 CSV 的数据库可以免费获得这些信息。问题在于编写一个高效且经过良好测试的内存搜索实现与下载或购买现有的实现相比的时间和成本。

我找了很多遍都找不到，但我不敢相信不可能有。是否有任何预先编写的库可以做到这一点？

这个问题：

[给定纬度/经度查找位置（邮编、城市、州）的最快方法](https://stackoverflow.com/questions/1260572/fastest-way-to-find-the-locationzip-city-state-given-latitude-longitude)

最接近，但基本上表明如何编写解决方案，而不是现成可用的任何东西。但是每个人都必须为此使用一些库。一天十几个人肯定有这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:52:36.230

空间数据库（例如带有 PostGis 的 Postgresql）使用的算法可以快速查找给定纬度/经度信息的数据。当您想使用 Java 库并将其保存在内存中时，您可以查看[H2 Spatial 数据库](http://geoserver.org/display/GEOS/H2+Spatial+Database "H2 空间数据库")。我从未使用过它，所以我无法评论它的性能。

编辑：嗯，仔细查看我提供的链接表明这是一个计划中的功能......我个人只需使用 Postgresql/PostGis（有或没有 Java 作为服务器前端）并完成它。如果您的服务器有足够的内存，它仍然符合“内存中”的要求。自然它不符合 Java 库的要求。但是有[JSI](http://jsi.sourceforge.net/)，可以在内存和 Java 中使用。

# python - 子进程：PyDev 控制台与 cmd.exe

> ID：10236260
> 
> 赞同：2
> 
> 时间：2012-04-19T20:31:15.213
> 
> 标签：python, cmd, subprocess, pydev

我正在尝试使用 subprocess.call 从 python 调用一个进程，如下所示：

```
from subprocess import call

exePath = 'C:\\Test\\EXE.exe'
inPath = 'C:\\Test\\IN.in'
outPath = 'C:\\Test\\OUT.out'
call([exePath, inPath, outPath]) 
```

这会从 EXE.exe 打印几行，然后是“句柄无效”——但作为字符串，而不是错误，这让我认为这可能是来自 EXE.exe 的消息：

```
Unzipping Solution...
0.0%                       The handle is invalid. 
```

但是，当我打开 cmd.exe 并粘贴时：

```
C:\Test\EXE.exe C:\Test\IN.in C:\Test\OUT.out 
```

它工作正常。

有人可以指出我正确的方向吗？

谢谢！

我在 Windows 7 上运行 Python 2.7 64 位。

**编辑：**

它现在看起来像 PyDev 中的一个问题，其中控制台无法处理来自进程覆盖行的标准输出。代码在 IDLE 中运行良好。仍在寻找 PyDev 的修复程序...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:26:27.107

我认为您遇到此问题是因为 PyDev 不是真正的终端（即：在 Python 中，从 PyDev 运行时 os.isatty() 将返回 False）。

如果 exe 真的依赖于终端，那么目前 PyDev 能做的并不多……

现在，您可以从 Python 调用：

在窗口中：

```
popen = subprocess.Popen(['myexe', 'params'], creationflags=subprocess.CREATE_NEW_CONSOLE)
popen.wait() 
```

在 Linux 中（因为 CREATE_NEW_CONSOLE 不可用）：

```
args = ['xterm', '-e'] + ['myexe', 'params']
popen = subprocess.Popen(args)
popen.wait() 
```

这样无论谁在调用它，它都可以工作:)

我认为 Aptana Studio 确实有一个实际的终端替代品，但是没有 PyDev 集成来启动它......

# c - 在太阳能系统 openGL 程序中实现箭头键

> ID：10236262
> 
> 赞同：2
> 
> 时间：2012-04-19T20:31:28.160
> 
> 标签：c, opengl, glut

作为我的太阳能系统程序的一部分，一切都很好地实现了，我试图扩展我的程序以包括用户可以在 orrey 周围飞行，或者换句话说，从使用箭头键飞过太空的宇宙飞船上查看。这就是我基本上所做的：

```
 void keyboard(unsigned char key, int x, int y)
    {
      switch (key)
      {
        case 27:  /* Escape key */
                 exit(0);
                 break;
        case (GLUT_KEY_LEFT): lon += TURN_ANGLE;
                              if(lon == 360)
                                lon = 0;
                  break;
        case (GLUT_KEY_RIGHT):
                              lon -= TURN_ANGLE;
                  if(lon == -360)
                               lon = 0;
                  break;
        case (GLUT_KEY_PAGE_UP): 
                              if(lat  + TURN_ANGLE <= 90)
                               lat += TURN_ANGLE;
                              break;
        case (GLUT_KEY_UP):   eyex += sin(DEG_TO_RAD * (lon)) * RUN_SPEED;
                              eyez += cos(DEG_TO_RAD * (lon)) * RUN_SPEED;
                              break;
        case (GLUT_KEY_DOWN): eyex -= sin(DEG_TO_RAD * (lon)) * RUN_SPEED;
                              eyez -= cos(DEG_TO_RAD * (lon)) * RUN_SPEED;
                              break;
        default: break;

      }
    } 
```

其中`lat`和`lon`是与当前眼点 ( `eyex`, `eyey`, `eyez`) 一起使用的全局角度，以及 `RUN_SPEED`在 XZ 平面中的步距。我不知道为什么这部分不起作用，即使我在这部分中没有任何错误，所有编译文件但箭头键不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:49:56.060

`glutKeyboardFunc()`您只能捕获简单的 ASCII 字母，为了响应其余的键，您需要设置一个单独的事件处理程序：[`glutSpecialFunc()`](http://www.opengl.org/resources/libraries/glut/spec3/node54.html).

请注意，特殊处理程序的签名会发生一些变化：

```
void special(int key, int x, int y)
{
  switch (key)
  {
    case GLUT_KEY_LEFT: lon += TURN_ANGLE;
                          if(lon == 360)
                            lon = 0;
              break;
    /* ... */
    default: break;
  }
} 
```

请记住，这个特殊的处理程序不会**取代**您一直在使用的键盘处理程序，它只是对其进行补充。

# php - php/mysql 连接语法

> ID：10236263
> 
> 赞同：0
> 
> 时间：2012-04-19T20:31:34.790
> 
> 标签：php, mysql, join

我有在一个表中加入了一个组的人的用户 ID，但在另一个表中没有他们的名字。所以我想我需要加入。我从描述组的 groupid 开始。

表 1，groupmem 具有成员的 groupid 和 userid。

表2、users有userid和username

users 表包含每个用户。groupmem 只有一些加入了群组的人。

SQL 语句应该类似于以下内容，但无法正常工作。

```
select users.name
FROM users,groupmem
LEFT JOIN users
on groupmem.userid=users.userid
WHERE groupmem.groupid = 22

22 being some value.. 
```

想也许 where 子句在错误的地方，或者我使用了错误的连接类型，但或者没有正确使用 on，但无论如何，它都无法正常工作。感谢您的任何建议：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:35:18.497

尝试：

```
SELECT u.username
FROM `users` u
LEFT JOIN `groupmem` g
ON u.userid = g.userid
WHERE g.groupid = 22 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:36:33.727

这应该可以解决问题：

```
SELECT users.name
FROM groupmem
LEFT JOIN users ON groupmem.userid = users.userid
WHERE groupmem.groupid = 22 
```

您的查询似乎很正确-假设我猜对了您的表结构。

# javascript - $.getScript()：有条件地加载 js 脚本

> ID：10236264
> 
> 赞同：2
> 
> 时间：2012-04-19T20:31:38.160
> 
> 标签：javascript, jquery

是否可以在 $.getScript() 中创建一个条件，如果第一个 js 脚本无法加载 - 无论出于何种原因 - 然后运行第二个 js？比如备份？

有什么方法可以使用 jQuery 1.2 和/或 1.4？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:36:43.787

只要您使用的是 jQuery 1.5 或更高版本，那么 $.getScript() 就会返回一个 Promise，这样您就可以将函数附加到成功和失败中。他们在他们的文档中展示了一个示例，他们在其中附加失败，如下所示：

```
$.getScript("ajax/test.js")
.done(function(script, textStatus) {
  console.log( textStatus );
})
.fail(function(jqxhr, settings, exception) {
  $( "div.log" ).text( "Triggered ajaxError handler." );
}); 
```

没有理由不能在 .fail() 调用的函数中执行另一个 $.getScript() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:37:57.250

您是否为此阅读了文档？很清楚，从 jquery 1.5 开始，您可以使用 .fail()

```
$.getScript("ajax/test.js")
.done(function(script, textStatus) {
  console.log( textStatus );
})
.fail(function(jqxhr, settings, exception) {
  $( "div.log" ).text( "Triggered ajaxError handler." );
}); 
```

在此之前，您使用全局 ajax 错误：

```
$( "div.log" ).ajaxError(function(e, jqxhr, settings, exception) {
  if (settings.dataType=='script') {
    $(this).text( "Triggered ajaxError handler." );
  }
}); 
```

或者更实际一点，不要依赖 getscript，而是使用 .ajax fn：

```
$.ajax({
  url: url,
  dataType: "script",
  success: success,
  error:function(){
    //load the second script here
  }
}); 
```

# php - 按特定值对多维数组进行排序（使用 asort 和 rasort）

> ID：10236272
> 
> 赞同：0
> 
> 时间：2012-04-19T20:31:59.267
> 
> 标签：php

我意识到还有其他几个与此有关的问题 - 但它们对我来说没有意义，或者不按我的需要工作。

我有一个数组，很容易通过使用`asort()`and来按字母顺序对第一个值进行排序`arsort()`。我的多维数组的一个例子可能是：

```
[{"Name":"Amber","date":"","dealType":"B-Braun Medical, Inc.","id":"***@***.com","registered":0},{"Name":"Bob","date":"","dealType":"B-Braun Medical, Inc.","id":"***@***.com","registered":0},{"Name":"Hans","date":"","dealType":"B-Braun Medical, Inc.","id":"***@***.com","registered":0},{"Name":"Jeff","date":"","dealType":"B-Braun Medical, Inc.","id":"***@***.com","registered":0},{"Name":"Michael","date":"","dealType":"B-Braun Medical, Inc.","id":"***@***.com","registered":0}] 
```

使用`asort()`并按字母顺序或反向字母顺序排序`arsort()`。`"Name"`现在我需要相同的功能，仅基于`"dealType"`.

我已经尝试了一些已经在 Stackoverflow 上发布的示例，但我必须误解它们，因为它们不起作用。我怎么能做到这一点？

**编辑** 乔纳森给出了按字母排序的正确答案，稍作修改：

```
//the custom function to do our sort
function cmp($a,$b){
    //get which string is less or 0 if both are the same
    $cmp = strcasecmp($a->dealType, $b->dealType);
    //if the strings are the same, check name
    return $cmp;
}
//sort using a custom function
usort($obj, 'cmp'); 
```

下面的代码用于反向字母排序：

```
//the custom function to do our sort
function cmp($a,$b){
    //get which string is less or 0 if both are the same
    $cmp = strcasecmp($b->dealType, $a->dealType);
    //if the strings are the same, check name
    return $cmp;
}
//sort using a custom function
usort($obj, 'cmp'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:35:55.953

您应该使用[usort](http://www.php.net/usort)这将允许您使用自定义比较函数来确定排序时哪个值首先出现。

就像是：

```
<?php
//the data you supplied. normally just an array
$data = array ( 0 => array ( 'Name' => 'Amber', 'date' => '', 'dealType' => 'deal1', 'id' => '***@***.com', 'registered' => 0, ), 1 => array ( 'Name' => 'Bob', 'date' => '', 'dealType' => 'deal5', 'id' => '***@***.com', 'registered' => 0, ), 2 => array ( 'Name' => 'Hans', 'date' => '', 'dealType' => 'deal3', 'id' => '***@***.com', 'registered' => 0, ), 3 => array ( 'Name' => 'Jeff', 'date' => '', 'dealType' => 'deal2', 'id' => '***@***.com', 'registered' => 0, ), 4 => array ( 'Name' => 'Michael', 'date' => '', 'dealType' => 'deal1', 'id' => '***@***.com', 'registered' => 0, ), );

//show what we got going into sort
echo '<pre>'.print_r($data, 1).'</pre>';

function cmp($a,$b){
    //get which string is less or 0 if both are the same
    $cmp = strcasecmp($a['dealType'], $b['dealType']);
    //if the strings are the same, check name
    if($cmp == 0){
        //compare the name
        $cmp = strcasecmp($a['Name'], $b['Name']);
    }
    return $cmp;
}
//sort using a custom function
usort($data, 'cmp');

//show what we got after sort
echo '<pre>'.print_r($data, 1).'</pre>';
?> 
```

这将`dealType`首先排序，如果相同，则`Name`第二个`dealType`。如果要反向排序，则可以交换调用的顺序和`$a`调用顺序。`$b``strcasecmp()`

编辑：这些数据可能是从数据库中提取的。如果是这样，那么只是`ORDER BY`列。你可以这样做`SELECT * FROM table ORDER BY dealType ASC,Name ASC`

Edit2：更新了代码以不使用匿名函数。您还可以查看在[ideone工作的代码](http://ideone.com/bFgXa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:52:48.153

如果我正确理解了您的问题，则您有数组（例如 A）数组（例如 Bs），并且您想按其中的某个值对 Bs 进行排序。如果那是正确的，我之前也遇到过同样的问题，并制作了名为 line_sort 的自定义函数。如果需要，可以通过示例使用它：

```
$array=json_decode('[{"Name":"Amber","date":"","dealType":"B-Braun Medical, Inc.","id":"***@***.com","registered":0},{"Name":"Bob","date":"","dealType":"B-Braun Medical, Inc.","id":"***@***.com","registered":0},{"Name":"Hans","date":"","dealType":"B-Braun Medical, Inc.","id":"***@***.com","registered":0},{"Name":"Jeff","date":"","dealType":"B-Braun Medical, Inc.","id":"***@***.com","registered":0},{"Name":"Michael","date":"","dealType":"B-Braun Medical, Inc.","id":"***@***.com","registered":0}]');
$array=line_sort("dealType",$array); 
```

第一个值是要排序的键，第二个是要排序的数组，这是函数代码（抱歉不是英文）：

```
function line_sort($klic,$hodnoty)
{
  if (!is_array($hodnoty))
  {
    trigger_error("Second parameter has to be multidimensional array", E_USER_WARNING );
    return;
  }
  for ($x=0;$x<count($hodnoty)-1;$x++)
  {
    for ($y=count($hodnoty)-1;$y>=$x;$y--)
    {
      $radek1=$hodnoty[$y];
      $radek2=$hodnoty[$y+1];
      if ((isset($radek1[$klic]) && isset($radek2[$klic])) && (intval($radek1[$klic]) > intval($radek2[$klic])) || (isset($radek2[$klic]) && !isset($radek1[$klic])))
      {
        $hodnoty[$y]=$radek2;
        $hodnoty[$y+1]=$radek1;
        continue;
      }
      else if((isset($radek1[$klic]) && isset($radek2[$klic])) && (intval($radek1[$klic]) == intval($radek2[$klic])))
      {
        if (strcmp($radek1[$klic],$radek2[$klic])>0)
        {
          $hodnoty[$y]=$radek2;
          $hodnoty[$y+1]=$radek1;
        }
      }
    }
  }
  return $hodnoty;
} 
```

如果您想查看此函数的输出示例，请查看：http: [//test.hanzlsoft.eu/](http://test.hanzlsoft.eu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:34:37.410

我相信您正在寻找`array_multisort()`： http: [//php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

例子：

```
<?php
$ar = array(
       array("10", 11, 100, 100, "a"),
       array(   1,  2, "2",   3,   1)
      );
array_multisort($ar[0], SORT_ASC, SORT_STRING,
                $ar[1], SORT_NUMERIC, SORT_DESC);
var_dump($ar);
?> 
```

*来源： http: [//php.net/manual/en/function.array-multisort.php#example-4558](http://php.net/manual/en/function.array-multisort.php#example-4558)*

# objective-c - 使用 .png 将 UIView 剪辑到 UIIimage(UIImageView)

> ID：10236276
> 
> 赞同：0
> 
> 时间：2012-04-19T20:32:14.540
> 
> 标签：objective-c, ios, cocoa-touch

我有几个 UIImage 的。它们都是 .png 格式。我需要将另一个 Image 或 UIView 剪辑到 UIImage 的不透明部分。一些图像的外边缘具有一定的透明度。如果我使用 clipsToBounds 它只会剪辑到 UIImageView 的框架而不是实际的图像。如果我将线剪成相同的高度，它会在中心看起来很好，但我需要将线定位在中心的右侧或左侧。请查看照片以获得更好的解释。我已经尝试了一些使用 Core Gaphics 的方法，但是，我还没有找到解决方案。

![在此处输入图像描述](../Images/7e795f35cd5d522687fc863c9e7903b2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:44:23.263

您可以尝试使用`CALayer`'`mask`属性。它允许您定义

> 一个可选层，其 alpha 通道用作蒙版，以在层的背景和将层的内容与其过滤背景合成的结果之间进行选择。

要将视图遮罩为 .png，请将遮罩层设置为`contents`.png `CGImageRef`。

不过记得导入`QuartzCore`框架！;)
[参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:46:08.340

看看 CALayer 的 mask 属性。您可以设置一个不透明度的图层将用作视图图层的 alpha 信息（yourUIImageView.layer.mask）。

例如，您可以使用 CAGradientLayer 将 alpha 渐变添加到您的视图，或者使用其他 UIImageview 的图层（如果它具有 alpha 通道）。

编辑：Jenox 速度更快并提供了更多信息，因此他的答案应该被标记为正确。

# javascript - 如何配置 Eclipse 以使用 Aptana Studio 3 的 JavaScript 格式化程序而不是内置格式化程序

> ID：10236277
> 
> 赞同：3
> 
> 时间：2012-04-19T20:32:14.630
> 
> 标签：javascript, eclipse, aptana3, formatter

看来 Aptana Studio 3 插件安装正确；但是，格式化程序似乎也失败了，或者内置的 Eclipse 格式化程序优先。如何确保只有 Aptana Studio 3 JavaScript 格式化程序应用于代码，而不是其他插件或内置格式化程序？

# entity-framework-4 - 附加对象后加载属性

> ID：10236278
> 
> 赞同：4
> 
> 时间：2012-04-19T20:32:14.987
> 
> 标签：entity-framework-4, ef-code-first

我在问这里之前尝试过谷歌搜索，但找不到任何解决方案。

我有这两个类和一个映射一对多

我正在尝试附加一个新对象

```
    公共类 MyContext : DbContext
    {
        公共 IDbSet Operacoes { 获取；放; }
        公共 IDbSet Apontamentos { 获取；放; }
    }

    公开课歌剧
    {
        公共字符串 Filial { 得到；放; }
        公共字符串 Codigo { 获取；放; }
        公共字符串 Descricao { 获取；放; }
    }

    公共课 Apontamento
    {
        公共 int ID { 获取；放; }
        公共字符串 Filial { 得到；放; }
        公共字符串 OperacaoCodigo { 获取；放; }
        公共虚拟 Operacao Operacao { get; 放; }
    }

    公共类 OperacaoMap : EntityTypeConfiguration
    {
        公共 OperacaoMap()
        {
            ToTable("za6010");
            HasKey(x => new { x.Filial, x.Codigo })
                .Property(x => x.Codigo).HasColumnName("za6_cod");

            属性(x => x.Descricao).HasColumnName("za6_desc");
        }
    }

    公共类 ApontamentoMap : EntityTypeConfiguration
    {
        公共 ApontamentoMap()
        {
            ToTable("za4010");

            HasKey(x => new { x.Filial, x.Id });

            属性（x => x.OperacaoCodigo）
                .HasColumnName("za4_oper");

            //
            HasRequired(x => x.Operacao)
                。与许多（）
                .HasForeignKey(x => new { x.Filial, x.OperacaoCodigo })
                .WillCascadeOnDelete(false);
        }
    }

    公共静态类程序
    {
        静态无效主（）
        {
            //这不起作用，我需要它来工作。
            var context = new MyContext();
            var newObj = 新的 Apontamento
            {
                孝顺 = "01",
                OperacaoCodigo = "001"
            };
            context.Apontamentos.Attach(newObj);
            var desc = newObj.Operacao.Descricao; // 这里 Operacao 属性为 null

            //这有效
            var newObjTmp = 新的 Apontamento
            {
                孝顺 = "01",
                OperacaoCodigo = "001"
            };
            var operacao = context.Operacoes.Where(x => x.Codigo == "001");
            context.Apontamentos.Attach(newObj);
            var descTmp = newObjTmp.Operacao.Descricao; // Operacao 属性没问题。

        }
    }

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T20:57:51.370

您的第一种情况不起作用，因为您的实体没有被动态代理包装，并且导航属性不能被延迟加载。试试这个：

```
var context = new MyContext();
var newObj = context.Apontamentos.Create();
newObj.Filial = "01",
nowObj.OperacaoCodigo = "001"

context.Apontamentos.Attach(newObj);
var desc = newObj.Operacao.Descricao; 
```

您还可以继续使用当前解决方案并显式加载属性：

```
 var context = new MyContext();
 var newObj = new Apontamento
     {
         Filial = "01",
         OperacaoCodigo = "001"
     };
 context.Apontamentos.Attach(newObj);
 context.Entry(newObj).Reference(o => o.Operacao).Load();
 var desc = newObj.Operacao.Descricao; 
```

# jquery - IE 使用 jquery 的参数无效

> ID：10236280
> 
> 赞同：0
> 
> 时间：2012-04-19T20:32:30.173
> 
> 标签：jquery, internet-explorer, jqgrid, invalid-argument

我有一个在 Firefox 和 Chrome 中完美运行的 portlet 应用程序，但在 IE 8 和 9 中运行失败，但前提是我在门户页面上有 5 个或更多的 portlet 实例。如果页面上有 4 个或更少的 portlet 实例，它在 IE 中也可以正常工作。

当页面上有 5 个以上的 portlet 实例时，我看到的错误是：

> SCRIPT87：参数无效。jquery-1.5.2.min.js，第 16 行字符 25442

该代码使用 jQuery 和一些插件，即 jqGrid。到目前为止，这是我为解决此问题所做的尝试，但没有任何区别：

1.  升级了 jQuery 和 jQuery-UI 库。代码分别使用 1.5.2 和 1.7.2。升级到最新版本没有任何区别。
2.  升级了 jqGrid 库。该代码使用版本 4.1.2。升级到 4.3.2 没有任何区别。
3.  升级了bgiframe插件。该代码使用版本 2.1。升级到 2.1.3 没有任何区别。

因为是IE，所以很难debug看看是怎么回事。

有没有人以前见过这种行为或对可能发生的事情有任何想法？

更新：

好的，我已将 jQuery 文件的最小版本替换为非缩小版本。这是我在 IE 8 的页面上有 5 个以上的 portlet 实例时看到的错误：

```
Message: Invalid argument.
Line: 2105
Char: 5
Code: 0
URI: https://nasa-iceint.nasa.gov/portal/ice-theme/js/jquery-1.5.2.js 
```

以下是 jQuery 文件中的相关代码：

```
if ( set ) {
                // convert the value to a string (all browsers do this but IE) see #1070
                elem.setAttribute( name, "" + value );
            } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:08:30.017

我弄清楚这里出了什么问题。事实证明，当已经加载了很多 CSS 时，在 IE 中动态加载 CSS 文件可能会导致问题。请参阅[动态加载 css 样式表在 IE 上不起作用](https://stackoverflow.com/questions/1184950/dynamically-loading-css-stylesheet-doesnt-work-on-ie)

希望这可以帮助遇到相同问题的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T21:01:01.800

也许您的页面正在添加格式不正确的 JSON。

```
var jsonThatWorksOnFirefoxAndChrome = {
    first:"ok",
    last: "not ok, remove the comma after this string to fix it",
} 
```

Chrome 和 Firefox 将忽略最后的逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:38:45.797

还要检查 jQuery 冲突，并确保只包含一个版本的 jQuery，并且只包含一次。

# c# - 在 SQL-CLR 触发器或存储过程中创建套接字

> ID：10236288
> 
> 赞同：2
> 
> 时间：2012-04-19T20:33:15.227
> 
> 标签：c#, .net, sql-server-2008, sqlclr

我在 SQL Server 2008 中有一个 SQL-CLR 触发器，它向套接字服务器发送消息。它工作正常，但我需要 TCP 客户端与它通信的服务器保持连接。

为了做到这一点，我必须制作一些保持活力的线程。所以我创建了一个线程，将消息添加到队列中，我看到客户端正在连接，但 SQL Server 在客户端能够处理排队的消息并将其发送到 tcp 服务器之前就退出了。

此应用程序的目的是发送通过 xml 更新的与它们关联的字段和一些值。我想将它们放入线程中处理并发送到 TCP 套接字服务器的队列中。

我现在计划的替代方案是让 CLR Trigger 将消息添加到 MSMQ，并让另一个服务来处理这些消息。

有什么好的建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:42:53.507

使用 PERMISSION_SET = UNSAFE GO 从“C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Messaging.dll”创建组件消息授权 dbo

# ruby-on-rails - 创建一个没有换行符的数组，RUBY

> ID：10236289
> 
> 赞同：0
> 
> 时间：2012-04-19T20:33:15.383
> 
> 标签：ruby-on-rails

```
"---\n- ''\n- Push Button\n- Power\n" 
```

我需要将以上内容转换为：

```
["Push Button", "Power"] 
```

我试过`.scan(/\w+/)`但不幸的是这给了我`["Push", "Button", "Power"]`

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:24:05.420

要加载 YAML 代码，

```
YAML.load("---\n- ''\n- Push Button\n- Power\n") 
```

# php - 尝试检索文件名时文件未上传

> ID：10236290
> 
> 赞同：0
> 
> 时间：2012-04-19T20:33:17.453
> 
> 标签：php, javascript, jquery, ajax

我正在尝试从 php 脚本上传文件 (imageupload.php) 的页面中检索文件名，并且我想在 javascript 函数 (QandATable.php) 中的另一个页面中显示它。但我不知道该怎么做

我将向您展示所有相关代码，以便您可以遵循它，以便您能够理解正在发生的事情。

更新：下面我将向您展示如何上传文件的步骤。下面的代码成功上传了文件。

下面是表格（QandATable.php）；

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
<label>Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label class='imagelbl'>" + 
"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
"</p><ul class='listImage' align='left'></ul>" +
"<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>"); 
```

在用户提交表单的同一页面上，它会进入下面的函数，它会检查验证，然后当验证清楚时，它会进入`startImageUpload()`函数：

```
 function imageClickHandler(imageuploadform){ 
      if(imageValidation(imageuploadform)){ 
          return startImageUpload(imageuploadform); 
      } 
      return false;
  } 
```

如果没有验证，它将进入隐藏文件输入的下面的 JS 函数 (QandATable.php)，并将表单提交到文件上传发生的 imageupload.php。上传文件后，它会回调 stopImageUpload() 函数（QandAtable.php），在该函数中它将显示有关文件是否已上传的消息，这就是我希望来自服务器的文件名的位置附加。

下面是 startImageUpload() 函数：

```
var sourceImageForm;

function startImageUpload(imageuploadform){

$(imageuploadform).find('.fileImage').css('visibility','hidden');
sourceImageForm = imageuploadform;

return true;
        } 
```

下面是上传文件 (imageupload.php) 的 php 脚本：

```
 <?php

session_start();

$result = 0;

   if ($_FILES["fileImage"]["error"] > 0) {
      echo "Error: " . $_FILES["fileImage"]["error"] . "<br />";
      } else {
      echo "Upload: " . $_FILES["fileImage"]["name"] . "<br />";
      echo "Type: " . $_FILES["fileImage"]["type"] . "<br />";
      echo "Size: " . ($_FILES["fileImage"]["size"] / 1024) . " Kb<br />";
      echo "Stored in: " . $_FILES["fileImage"]["tmp_name"];
      }

if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {
    $_SESSION['fileImage']['name'] = $_FILES['fileImage']['name'];
    $parts = explode(".",$_FILES['fileImage']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2;

    while( file_exists("ImageFiles/".$base."_".$n.".".$ext)) $n++;
    $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileImage"]["tmp_name"],
    $_SESSION['fileImage']['name'] = $_FILES['fileImage']['name'];  
    "ImageFiles/" . $_FILES["fileImage"]["name"]);
    $result = 1;

}
    else
      {
      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

      }

?> 
        <script language="javascript" type="text/javascript">
    window.top.window.stopImageUpload(<?php echo $result;?>);
    </script> 
```

最后，当上传完成时，它会返回到 stopUploadImage() 函数 (QandATable.php) 以显示有关文件是否成功上传的消息。这也是我希望从服务器上传的文件名被附加的地方。

```
 function stopImageUpload(success){

          var result = '';
          if (success == 1){
result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
             $('.listImage').append('<br/>');
          }
          else {
result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
          }

    return true;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:06:26.673

要调用该`stopImageUpload()`函数，我将执行以下操作：

从：

```
<script language="javascript" type="text/javascript">
window.top.windo.stopImageUpload(<?php echo $result;?>);
</script> 
```

至：

```
<script language="javascript" type="text/javascript">
window.top.stopImageUpload(<?php echo "'$result'";?>);
</script> 
```

要将文件名页面传递到页面，请使用会话变量。我会建议类似于以下内容（因为您已经在使用会话）：

```
if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {
    $_SESSION['fileImage']['name'] = $_FILES['fileImage']['name'];        
    $parts = explode(".",$_FILES['fileImage']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2; 
```

只要确保`session_start();`在您想要将这些变量传递到的每个页面的顶部都有。

通过运行以下命令进行故障排除：

```
<?php

    if ($_FILES["file"]["error"] > 0) {
      echo "Error: " . $_FILES["file"]["error"] . "<br />";
      } else {
      echo "Upload: " . $_FILES["file"]["name"] . "<br />";
      echo "Type: " . $_FILES["file"]["type"] . "<br />";
      echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
      echo "Stored in: " . $_FILES["file"]["tmp_name"];
      }
    ?> 
```

为了解决您的`unexpected ';'`错误，我将 $_SESSION 行移到了：

```
<?php

session_start();

$result = 0;

   if ($_FILES["fileImage"]["error"] > 0) {
      echo "Error: " . $_FILES["fileImage"]["error"] . "<br />";
      } else {
      echo "Upload: " . $_FILES["fileImage"]["name"] . "<br />";
      echo "Type: " . $_FILES["fileImage"]["type"] . "<br />";
      echo "Size: " . ($_FILES["fileImage"]["size"] / 1024) . " Kb<br />";
      echo "Stored in: " . $_FILES["fileImage"]["tmp_name"];
      }

if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {
    $_SESSION['fileImage']['name'] = $_FILES['fileImage']['name'];
    $parts = explode(".",$_FILES['fileImage']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2;

    while( file_exists("ImageFiles/".$base."_".$n.".".$ext)) $n++;
    $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileImage"]["tmp_name"], 
    "ImageFiles/" . $_FILES["fileImage"]["name"]);
    //The error was thrown because you had $_SESSION inside the move_upload_file()
    //Can't have a ; inside a function
    //However, you need to remove this $_SESSION anyway, it is already declared above, 
    //it wouldn't work here anyway since your code breaks apart the $_FILES array.
    //$_SESSION['fileImage']['name'] = $_FILES['fileImage']['name'];
    $result = 1;

}
    else
      {
      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

      }

?> 
        <script language="javascript" type="text/javascript">
    window.top.window.stopImageUpload(<?php echo $result;?>);
    </script> 
```

# vb.net - Visual Basic 错误“之前使用了变量....”

> ID：10236293
> 
> 赞同：0
> 
> 时间：2012-04-19T20:33:23.573
> 
> 标签：vb.net

请帮我！我写了以下程序，有一个错误“以前使用了变量“arr”......”我试图修复，但我不能。请帮助我:) 非常感谢！

```
Imports System
Imports System.IO

Class Test
    Public Shared Sub Main()
        Try
            ' Create an instance of StreamReader to read from a file.
            Dim sr As StreamReader = New StreamReader("a.txt")
            Dim line As String
            Dim arr()() As Char
            Dim tem As Integer
            tem = 1
            ' Read and display the lines from the file until the end 
            ' of the file is reached.
            Do
                line = sr.ReadLine()
                arr(tem) = line.ToCharArray
                Console.WriteLine(Line)
            Loop Until line Is Nothing
            sr.Close()
        Catch E As Exception
            ' Let the user know what went wrong.
            Console.WriteLine("The file could not be read:")
            Console.WriteLine(E.Message)
        End Try
    End Sub
End Class

Module Module1
    Sub Main()
        Test.Main()
    End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:37:00.540

您需要初始化`arr`变量。

由于您不知道数组需要多大，因此您应该使用 a`List(Of T)`代替。

# php - Facebook API：在群组中上传照片

> ID：10236296
> 
> 赞同：3
> 
> 时间：2012-04-19T20:33:31.637
> 
> 标签：php, facebook, facebook-graph-api

我想将照片上传到用户组之一。可能吗？

如果不可能，那么是否有任何解决方法？

问候， Sanket

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:25:39.423

Facebook 有关于上传到群组的不错的文档。您可以将图片对象发布到组 API

```
https://developers.facebook.com/docs/reference/api/group/ 
```

请务必阅读上面的链接并阅读 CREATE 部分，以及任何所需的权限等。您使用最新的 php-sdk 的代码应该与此类似...

```
//IF FILE UPLOAD
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 2000000)){
if ($_FILES["file"]["error"] > 0){
    $error .= "Return Code: " . $_FILES["file"]["error"] . "<br />";
}else{
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

$args = array('message' => $_GET['title']);
$args['image'] = '@' . realpath($_FILES["file"]["tmp_name"]);
$data = $facebook->api('/me/photos', 'post', $args);
$entry->details = $data['id'];
}
} 
```

重要的部分是：

```
$data = $facebook->api('/me/photos', 'post', $args); 
```

上传给用户，您可以将其更改为发布到类似这样的组...

```
$data = $facebook->api('/GROUP_ID/photos', 'post', $args); 
```

# javascript - 如何清除文本输入字段中的值？

> ID：10236297
> 
> 赞同：2
> 
> 时间：2012-04-19T20:33:35.583
> 
> 标签：javascript, jquery

我的代码没有运行，我希望在您单击另一个时清除该值

我究竟做错了什么？

[http://jsfiddle.net/AL2vS/](http://jsfiddle.net/AL2vS/)

```
var placeholderText = $('input').val();

$(placeholderText).focus(function() {
    $(this).attr('value', "");
});
$(placeholderText).blur(function() {
    $(this).attr('value', phTextVal);
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:36:29.807

您使用 'placeholderText' 作为选择器，它不会选择任何东西。使用`$('input').focus(...`and`$('input').blur(...`代替。

**更新**

如果要存储现有值，然后替换它，则将其存储为`.data()`元素`<input>`本身：

```
$('input').focus(function() {
    $this = $(this);
    $this.data('oldval',$this.val());
    $this.val('');
});
$('input').blur(function() {
    $this = $(this);
    $this.val($this.data('oldval'));
});​ 
```

[http://jsfiddle.net/mblase75/AL2vS/12/](http://jsfiddle.net/mblase75/AL2vS/12/)

或者可能：

```
$('input').blur(function() {
    $this = $(this);
    if ($this.val().length==0) { // only if the field is blank
        $this.val($this.data('oldval'));
    };
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:37:27.190

你的意思是这样吗？

[http://jsfiddle.net/AL2vS/1/](http://jsfiddle.net/AL2vS/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:37:58.767

这至少可以删除文本：

```
var placeholderText = $('input');

placeholderText.focus(function() {
    $(this).attr('value', "");
});
placeholderText.blur(function() {
    $(this).attr('value', phTextVal);
});​ 
```

您还可以查看 HTML5[占位符参数](http://davidwalsh.name/html5-placeholder)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:39:37.213

我想更好的方法是：

```
var placeholderText = $('input');

$(placeholderText).focus(function() {
    phTextVal = $(this).val();
    $(this).val("");
}).blur(function() {
    $(this).val(phTextVal);
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T20:41:10.850

看看这个，

```
$('input').focus(function() {
    placeholderText = $('input').val();
    $(this).val("");
});

$('input').blur(function() {
    $(this).val(placeholderText);
});​ 
```

[http://jsfiddle.net/AL2vS/8/](http://jsfiddle.net/AL2vS/8/)

您仍然需要对输入的数据做一些事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T21:10:01.653

使用**object.defaultValue**属性怎么样？

**功能：**

```
$.fn.smartInput=function(){
    return this.each(function(i,o){
     $(o).focus(function(){ if(this.value==this.defaultValue) this.value='';})
         .blur(function(){ this.value=(this.value=='')?this.defaultValue:this.value;});
     }); 
```

}

**用法：**

```
$('input').smartInput(); 
```

# wcf - 检查客户端和允许他们在方法之外访问的方法？

> ID：10236301
> 
> 赞同：0
> 
> 时间：2012-04-19T20:33:47.630
> 
> 标签：wcf, web-services, wcf-security, x509certificate, x509

这是我[之前相关问题](https://stackoverflow.com/questions/10143921/setting-up-web-services-with-x509-and-multiple-clients-and-how-to-distinguish-cl)的链接。

```
 --------------
| ServiceA.svc | ------------> Test Client 1
|  -GetData()  | ------------> Test Client 2
|  -SaveData() |
 -------------- 
```

到现在为止还挺好。通过检查`ServiceSecurityContext.Current.PrimaryIdentity.Name`我的`GetData()`和`SaveData()`方法，我能够区分和允许/拒绝客户。
虽然这可以完成这项工作，但我认为如果根本不调用该方法并让客户端在该方法之外进行检查，它会更有效。

对最有效的方法有什么建议吗？
^([我在想类似于‘嘿！此 GetData() 方法仅适用于客户端 1。您是客户端 2！你为什么要访问这个？！出去！！！'])

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:03:55.677

你现在的做法是正确的。

如果您移动然后检查用户可以向客户端调用哪些服务，则您会使服务保持开放状态，以免受到非您构建的客户端的攻击。

如果您将具有相同访问限制的方法分组到它们自己的服务中，您可以使用 wcf 配置在服务级别设置访问权限。

# java - 限制 Java 编译器 API

> ID：10236307
> 
> 赞同：0
> 
> 时间：2012-04-19T20:34:21.043
> 
> 标签：java, security, restriction, java-compiler-api

我正在考虑创建一个使用更受限制的 Java 版本的游戏内代码 IDE，例如我不希望它使用 I/O 流 API。这甚至可能吗？

此外，inb4 [this](https://stackoverflow.com/questions/2158429/compiling-and-running-user-code-with-javacompiler-and-classloader/)。它仍然无助于限制能力，只有愚蠢/邪恶的学生XD。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:51:57.973

您可以自定义您的[java.policy](http://docs.oracle.com/javase/6/docs/technotes/guides/security/PolicyFiles.html)。您可以在此处设置可在 Java 应用程序中使用的类。如果您的学生使用策略中不存在的课程，则会引发安全异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T21:36:36.497

限制编译器是一种可能性——但可能不是最简单的一种。您可以尝试使用[`-bootclasspath`选项](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javac.html#crosscomp-options)调用编译器，提供 JRE 的 rt.jar 的精简版本。然后使用禁止的类（或实际上：使用未包含在受限 jar 文件中的类）将产生编译器错误。

使用[运行时安全管理器](http://docs.oracle.com/javase/7/docs/technotes/guides/security/index.html)并仅向学生代码授予受限权限是一个更好的主意。只给学生的班级他们真正需要的[权限](http://docs.oracle.com/javase/7/docs/technotes/guides/security/permissions.html)（这很可能几乎没有，取决于要解决的任务），他们将无法做任何恶意的事情，同时仍然能够使用大部分标准 API，只要它不与外部系统交互。

当然，这仍然不会阻止死循环，这[实际上是不可能](http://en.wikipedia.org/wiki/Halting_problem)的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:45:02.617

取决于您所说的“不使用”是什么意思。如果不允许在该 IDE 中编写的代码访问流 API（而不是 IDE 本身），您始终可以提供自己的类加载器，它可以限制对类或整个包的访问。

# ios - iOS 的交叉编译库 (poker-eval)

> ID：10236309
> 
> 赞同：2
> 
> 时间：2012-04-19T20:34:28.313
> 
> 标签：ios, cross-compiling, poker

我正在尝试为 iOS 交叉编译 poker-eval 的 c 库（来自[http://gna.org/cookbook/?group=pokersource](http://gna.org/cookbook/?group=pokersource)），即用于 arm7 架构。

我按照[http://tinsuke.wordpress.com/2011/11/01/how-to-compile-and-use-tesseract-3-01-on-ios-sdk-5/](http://tinsuke.wordpress.com/2011/11/01/how-to-compile-and-use-tesseract-3-01-on-ios-sdk-5/)的编译说明来选择配置的设置和环境变量。

到目前为止一切顺利，它能够成功配置和构建大部分源文件，直到它退出并出现错误：

> make[1]: ./mktab_basic: 可执行文件中的 CPU 类型错误

显然 poker-eval 构建了一些生成完整构建所必需的表（源）文件的可执行文件。当我为 arm7 架构编译所有东西时，很明显我无法在我的计算机上运行这些程序。我不确定我是否可以首先使用正常构建生成这些文件，然后将它们包含在 arm7 构建中。我担心它们是在编译时生成的，因为它们依赖于处理器。因此，在我尝试深入研究 makefile 和配置之前（我几乎没有这样做的经验），我想听听是否有人知道如何克服这个问题？

我希望我把我的问题说清楚了。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:46:05.037

上次查看项目时，生成的代码是针对小型查找表的。我认为编译/使用从一个拱门生成的表在另一个拱门上应该没有任何问题。

# python - 芹菜：自动发现在应用程序中找不到任务模块

> ID：10236318
> 
> 赞同：13
> 
> 时间：2012-04-19T20:34:59.917
> 
> 标签：python, django, celery, django-celery

我使用新安装的 celery 和 django 1.4 进行了以下设置：

设置.py：

```
import djcelery
djcelery.setup_loader()

BROKER_HOST = 'localhost'
BROKER_PORT = 5672
BROKER_USER = 'user'
BROKER_PASSWORD = 'password'
BROKER_VHOST = 'test'

[...]

INSTALLED_APPS = [
    'django.contrib.auth',
    'django.contrib.admin',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.staticfiles',
    'djcelery',
    'south',
    'compressor',
    'testapp',
] 
```

testapp/tasks.py：

```
from celery.task import task

@task()
def add(x, y):
    return x + y 
```

向 celeryd 的消息传递工作正常，但该任务始终未注册（因此自动发现在这里似乎无法正常工作）。只有当我在`tasks/__init__.py`任务中找到导入任务模块并且我可以使用它。

此外，关于装饰器导入的文档也有点令人困惑，但我认为这是正确的。

我的设置中的错误在哪里？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-19T20:40:40.520

添加[`CELERY_IMPORTS`](http://docs.celeryproject.org/en/master/configuration.html#celery-imports)到您的 settings.py 中：

```
CELERY_IMPORTS = ('testapp.tasks',) 
```

导入`testapp.tasks.__init__`文件中的所有任务

然后**Celery**将从 testapp.tasks 文件夹中导入所有任务并按原样命名

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-19T22:17:46.830

这是 django-celery 2.5.4 中的一个错误，请升级到 2.5.5！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-12-06T13:13:30.360

对于在这里偶然发现类似问题解决方案的任何人。

在我的情况下，它是从旧的模块基础`INSTALLED_APPS`设置切换到新的基于[AppConfig](https://docs.djangoproject.com/en/1.10/ref/applications/#configuring-applications)的配置。

> 新应用程序应避免使用 default_app_config。相反，他们应该要求**在 INSTALLED_APPS 中明确配置相应 AppConfig 子类的虚线路径**。

要解决此问题，您应该更改将包裹送入 celery 的方式，如[2248 Celery 问题](https://github.com/celery/celery/issues/2248#issuecomment-97404667)中所述：

```
from django.apps import apps
app.autodiscover_tasks(lambda: [n.name for n in apps.get_app_configs()] 
```

而不是[旧的 Celery 3 方式](http://docs.celeryproject.org/en/3.1/django/first-steps-with-django.html#using-celery-with-django)：

```
app.autodiscover_tasks(lambda: settings.INSTALLED_APPS) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-31T22:31:28.360

我对 django 1.4.1 celery 3.0.9 有同样的问题，并通过命名任务来修复它。

@task() -> @task(name='testapp.tasks.add')

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-30T20:17:55.833

`python`就我而言，直到我尝试在 shell（或`python manage.py shell`）中导入任务之前，我无法弄清楚问题所在。

```
>>> from project_name.tasks import task_add 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-27T14:59:48.843

我很确定你必须导入“Celery app instance”并声明一个这样的任务：

```
from project_name.celery import app

@app.task
def video_process_task(video_id):
    pass 
```

请注意，在 project_dir/project_name 文件夹中有一个 celery.py 文件，它声明了 celery 实例，如下所示：

```
from __future__ import absolute_import
import os
from celery import Celery
from django.conf import settings

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'project_name.settings')
app = Celery('project_name')
app.config_from_object('django.conf:settings')
app.autodiscover_tasks(lambda: settings.INSTALLED_APPS) 
```

按照[官方文档](http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html)中的说明。

此外，您必须通过以下三种方式之一注册任务：

*   Django 项目的 settings.py 文件中的 CELERY_IMPORTS 变量，如 dgel 的回答
*   传递`bind=True`给装饰器，如：`@app.task(bind=True)`
*   如果你像上面那行一样为 celery 设置自动发现`app.autodiscover_tasks(lambda: settings.INSTALLED_APPS)` ，每个 Django 应用程序的文件夹都可以包含一个 tasks.py 文件，其中声明的任务将被自动注册

请注意，对任务的更改需要 CELERY RESTART 才能生效

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-17T01:01:09.753

添加到**Umair A. 的**答案中，`ImportError`我的 tasks.py 文件中有一个异常导致 Celery 没有在模块中注册任务。所有其他模块任务均已正确注册。

在我尝试在 Python Shell 中导入 Celery 任务之前，这个错误并不明显。我修复了错误的导入语句，然后成功注册了任务。

# python - 创建基于网络的销售点系统

> ID：10236321
> 
> 赞同：3
> 
> 时间：2012-04-19T20:35:13.807
> 
> 标签：python, point-of-sale, prototyping

我正在考虑制作基于 Web 的销售点系统的原型。我没有编程技能，但我正在考虑使用这个项目来学习。

我想问你以下两个问题：

1.  您认为上述任务在 6 个月内可以完成吗（用于构建 POS 基本功能的粗略原型）？
2.  如果是，您会向我推荐哪种编程语言，为什么？（我在想Python）

非常感谢您的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:13:31.450

Python 是一种非常快速且高效的开发语言，所以这将是一个不错的选择，IMO。就我个人而言，我发现它是最令人愉快的开发语言。

但我认为 POS 系统是一个糟糕的第一个编程项目。一个合适的 POS 系统涵盖了太多方面，例如安全性、身份验证、数据存储、客户端-服务器。每一个都有自己的问题和重要的学习曲线。

如果您仍然想完成它，请将项目分成可单独构建和测试的可管理部分。您可以从编写一个简单的程序开始，该程序接受来自控制台的文本命令并将事务存储在例如文本文件或腌制 Python 字典中。这将是服务器的开始。稍后您可以添加 Web 或 GUI 前端，或让服务器将事务存储在数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:04:57.130

1) 绝对。鉴于描述松散，我可以在一天结束之前为您准备好...

2) 一种您熟悉并熟悉的语言。

让我们对你想要完成的事情保持现实。制作完整 POS 系统的原型并不适合您。您不仅不知道您将使用的语言，而且您还是一个新手程序员。你会做出糟糕的架构决策。你会犯明显的安全错误。您可能没有良好的业务需求。您将没有任何测试框架。你最终会得到一个设计糟糕、不灵活、漏洞百出、极易受到攻击的系统，它没有构建任何需要解决的特定问题。

相反，你需要在更基础的水平上做很多事情来弄湿你的脚，你应该真正尝试找到可以帮助指导你的人。您还可以选择现有产品并将其拆开，试图弄清楚它是如何工作的。尝试为其他人设计的设计不佳的产品添加功能将教会您很多关于不该做的事情。

综上所述，Python 是一种很棒的原型设计语言。代码简洁，鸭式打字方便，语言附带非常强大的基础数据结构和库。还有一个非常活跃的开发者社区。对 Web 应用程序进行原型设计也不是不合理的事情，但我严重怀疑这是否是您开始的好地方。

尝试[http://learnpythonthehardway.org/](http://learnpythonthehardway.org/)（免费的 html 版本），让您在 Python 和一般编程方面都能站稳脚跟。然后，找到一些看起来很有趣的应用程序并将其拆开。然后，尝试修复项目的错误。然后，尝试添加几个简单的功能。这将为您提供一个比您自己罢工更好的基础，因为它会告诉您什么时候工作，什么时候不工作，尤其是在维护方面。

# ruby - 如何使用 Ruby 逐行将 csv 转换为数组？

> ID：10236328
> 
> 赞同：6
> 
> 时间：2012-04-19T20:35:29.330
> 
> 标签：ruby, parsing, csv

输入文件如下所示：

```
狗,白,男
猫,紫色,女性
大鼠,灰色,男性

```

我想逐行处理这些数据并做一些事情。

```
File.open("animals.csv")
  while file has next line
    currentline = array with each cell being an entry in the array
    if currentline[0] == dog
      put "dogs are cool"
    end
    put "your animal is a " + currentline[0]
  end 
```

你明白了，对吧？我想用 ifs 和诸如此类的东西来操作数据线，并在最后打印出来。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T20:47:19.103

```
require 'csv'
CSV.foreach("animals.csv") do |row|
  puts 'dogs are cool' if row[0] == 'dog'
  puts "your animal is a #{row[0]}"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:40:22.790

Ruby 包含一个 CSV 类，它使解析和使用 CSV 更加简单。查看：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:43:39.977

你可以使用块的魔法来清理你的行阅读代码。下面的代码将为您关闭您的句柄，并一次获取每一行，而无需太多额外的缓冲。

```
IO.foreach("animals.csv") do |line|
   parts = line.split(',')
   ...
end 
```

如前所述，有一个 CSV 库，但如果您的数据不复杂，没有嵌入的逗号和诸如此类的东西，那么上述是合理的。

另请注意，您要与字符串“dog”进行比较，而不是与某个名为 dog 的变量进行比较。要使字符串将字母括在引号中，否则 ruby​​ 会认为它是一个变量或者可能是一个方法调用。

```
if currentline[0] == "dog" 
```

# javascript - Google Maps API：如何将源代码从 Google Spreadsheet API 替换为 MySQL/PHP？

> ID：10236338
> 
> 赞同：0
> 
> 时间：2012-04-19T20:36:24.227
> 
> 标签：javascript, php, mysql, google-maps

我对谷歌地图一无所知 >_< ，我被要求更新[此页面的来源](http://www.firstchoicehousing.com//leasing/properties/)

**我需要替换当前来源（失去了访问此 Google 电子表格 API 帐户的权限）。**

正如我所解释的，我没有接受过谷歌地图的培训。但是，我认为要替换当前源，创建一个 mysql/php 数组或其他东西会很容易。但是，我不知道如何为谷歌地图做这件事。

这是谷歌地图的代码：

```
<? $this->load->view("inc/header");
?>
  <script src="http://maps.google.com/maps?file=api&v=2&key=ABQIAAAALG0LY9VczfCgBGR3gYl-OhSYZ3oXbzqsmNbiZCTxCau3LOQmUxTyi2riEMwN4Qit7X7U2xmd_NND1w" 

  type="text/javascript"></script>

  <script type="text/javascript">

//<![CDATA[
var cm_map;
var cm_mapMarkers = [];
var cm_mapHTMLS = [];

// Create a base icon for all of our markers that specifies the
// shadow, icon dimensions, etc.
var cm_baseIcon = new GIcon();
cm_baseIcon.shadow = "http://www.google.com/mapfiles/shdow50.png";
cm_baseIcon.iconSize = new GSize(20, 34);
cm_baseIcon.shadowSize = new GSize(37, 34);
cm_baseIcon.iconAnchor = new GPoint(9, 34);
cm_baseIcon.infoWindowAnchor = new GPoint(9, 2);
cm_baseIcon.infoShadowAnchor = new GPoint(18, 25);

// Change these parameters to customize map
var param_wsId = "od6";
var param_ssKey = "t63uNv1JYAjjbdSo2NVr0ew";
var param_useSidebar = true;
var param_titleColumn = "address";
var param_descriptionColumn = "link";
var param_latColumn = "latitude";
var param_lngColumn = "longitude";
var param_rankColumn = "";
var param_iconType = "red";
var param_iconOverType = "green";

/**
 * Loads map and calls function to load in worksheet data.
 */
function cm_load() {  
  if (GBrowserIsCompatible()) {
    // create the map
    cm_map = new GMap2(document.getElementById("cm_map"));
    cm_map.addControl(new GLargeMapControl());
    cm_map.addControl(new GMapTypeControl());
    cm_map.setCenter(new GLatLng( 43.907787,-79.359741), 2);
    cm_getJSON();
  } else {
    alert("Sorry, the Google Maps API is not compatible with this browser");
  } 
}

/**
 * Function called when marker on the map is clicked.
 * Opens an info window (bubble) above the marker.
 * @param {Number} markerNum Number of marker in global array
 */
function cm_markerClicked(markerNum) {
  cm_mapMarkers[markerNum].openInfoWindowHtml(cm_mapHTMLS[markerNum]);
}

/**
 * Function that sorts 2 worksheet rows from JSON feed
 * based on their rank column. Only called if column is defined.
 * @param {rowA} Object Represents row in JSON feed
 * @param {rowB} Object Represents row in JSON feed
 * @return {Number} Difference between row values
 */
function cm_sortRows(rowA, rowB) {
  var rowAValue = parseFloat(rowA["gsx$" + param_rankColumn].$t);
  var rowBValue = parseFloat(rowB["gsx$" + param_rankColumn].$t);

  return rowAValue - rowBValue;
}

/** 
 * Called when JSON is loaded. Creates sidebar if param_sideBar is true.
 * Sorts rows if param_rankColumn is valid column. Iterates through worksheet rows, 
 * creating marker and sidebar entries for each row.
 * @param {JSON} json Worksheet feed
 */       
function cm_loadMapJSON(json) {
  var usingRank = false;

  if(param_useSidebar == true) {
    var sidebarTD = document.createElement("td");
    sidebarTD.setAttribute("width","150");
    sidebarTD.setAttribute("valign","top");
    var sidebarDIV = document.createElement("div");
    sidebarDIV.id = "cm_sidebarDIV";
    sidebarDIV.style.overflow = "auto";
    sidebarDIV.style.height = "860px";
    sidebarDIV.style.fontSize = "11px";
    sidebarDIV.style.color = "#000000";
    sidebarTD.appendChild(sidebarDIV);
    document.getElementById("cm_mapTR").appendChild(sidebarTD);
  }

  var bounds = new GLatLngBounds();   

  if(json.feed.entry[0]["gsx$" + param_rankColumn]) {
    usingRank = true;
    json.feed.entry.sort(cm_sortRows);
  }
  for (var i = 0; i < <?=count($address)+1?>; i++) {
    var entry = json.feed.entry[i];

    if(entry["gsx$" + param_latColumn]) {
      var lat = parseFloat(entry["gsx$" + param_latColumn].$t);
      var lng = parseFloat(entry["gsx$" + param_lngColumn].$t);
      var point = new GLatLng(lat,lng);
      var html = "<div style='font-size:12px'>";
      html += "<strong>" + entry["gsx$"+param_titleColumn].$t 
              + "</strong>";
      var label = entry["gsx$"+param_titleColumn].$t;
      var rank = 0;
      if(usingRank && entry["gsx$" + param_rankColumn]) {
        rank = parseInt(entry["gsx$"+param_rankColumn].$t);
      }
        var trimmed = label.replace(/^\s+|\s+$/g, '') ;
        var link_label = label.replace(/ /gi,'-');
        link_label = link_label.toLowerCase();
        link_label = link_label.replace(/^\s+|\s+$/g, '') ;

if(trimmed == "1286 West Adams Blvd" )
{
     if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/1286-west-adams-blvd.html\">Click here for housing option</a>" ;
    }

}
else if(trimmed == "1239 West 30th Street")
{
    if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/1352-west-29th-street.html\">Click here for housing option</a>" ;
    }
}

else if(trimmed == "2150 Oak Street")
{
    if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/2126-50-south-oak-867-889-west-23rd-street.html\">Click here for housing option</a>" ;
    }
}
else if(trimmed == "1146 West 36th Place")
{
    if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/1140--1168-west-36th-place.html\">Click here for housing option</a>" ;
    }
}else if(trimmed == "1199 West 37th Drive")
{
    if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/1189--1199-west-37th-drive.html\">Click here for housing option</a>" ;
    }
}
else if(trimmed == "2611 South Portland Street")
{
    if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/2611-south-portland.html\">Click here for housing option</a>" ;
    }
}

else
{
    if(entry["gsx$" + param_descriptionColumn]) {

        html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/"+link_label+".html\">Click here for housing option</a>" ;
           }

}

      html += "</div>";

      // create the marker

      var marker = cm_createMarker(point,label,html,rank);
      //label = 'hello';
      cm_map.addOverlay(marker);

      cm_mapMarkers.push(marker);

      cm_mapHTMLS.push(html);

      bounds.extend(point);

      if(param_useSidebar == true) {

        var markerA = document.createElement("a");

        markerA.setAttribute("href","javascript:cm_markerClicked('" + i +"')");

        markerA.style.color = "#000000";

        var sidebarText= "";

        if(usingRank) {

          sidebarText += rank + ") ";

        } 

        sidebarText += label;

        markerA.appendChild(document.createTextNode(sidebarText));

        // condition to remove an address from the list....
        /*if(trimmed != '1155 24th Street')
        {*/
            sidebarDIV.appendChild(markerA);

            sidebarDIV.appendChild(document.createElement("br"));

            sidebarDIV.appendChild(document.createElement("br"));
        //}

      } 

    }

  }

  cm_map.setZoom(cm_map.getBoundsZoomLevel(bounds));

  cm_map.setCenter(bounds.getCenter());

}

/**

 * Creates marker with ranked Icon or blank icon,

 * depending if rank is defined. Assigns onclick function.

 * @param {GLatLng} point Point to create marker at

 * @param {String} title Tooltip title to display for marker

 * @param {String} html HTML to display in InfoWindow

 * @param {Number} rank Number rank of marker, used in creating icon

 * @return {GMarker} Marker created

 */

function cm_createMarker(point, title, html, rank) {

  var markerOpts = {};

  var nIcon = new GIcon(cm_baseIcon);

  if(rank > 0 && rank < 100) {

    nIcon.imageOut = "http://gmaps-samples.googlecode.com/svn/trunk/" +

        "markers/" + param_iconType + "/marker" + rank + ".png";

    nIcon.imageOver = "http://gmaps-samples.googlecode.com/svn/trunk/" +

        "markers/" + param_iconOverType + "/marker" + rank + ".png";

    nIcon.image = nIcon.imageOut; 

  } else { 

    nIcon.imageOut = "http://gmaps-samples.googlecode.com/svn/trunk/" +

        "markers/" + param_iconType + "/blank.png";

    nIcon.imageOver = "http://gmaps-samples.googlecode.com/svn/trunk/" +

        "markers/" + param_iconOverType + "/blank.png";

    nIcon.image = nIcon.imageOut;

  }

  markerOpts.icon = nIcon;

  markerOpts.title = title;      

  var marker = new GMarker(point, markerOpts);

  GEvent.addListener(marker, "click", function() {

    marker.openInfoWindowHtml(html);

  });

  GEvent.addListener(marker, "mouseover", function() {

    marker.setImage(marker.getIcon().imageOver);

  });

  GEvent.addListener(marker, "mouseout", function() {

    marker.setImage(marker.getIcon().imageOut);

  });

  GEvent.addListener(marker, "infowindowopen", function() {

    marker.setImage(marker.getIcon().imageOver);

  });

  GEvent.addListener(marker, "infowindowclose", function() {

    marker.setImage(marker.getIcon().imageOut);

  });

  return marker;

}

/**

 * Creates a script tag in the page that loads in the 

 * JSON feed for the specified key/ID. 

 * Once loaded, it calls cm_loadMapJSON.

 */

function cm_getJSON() {

  // Retrieve the JSON feed.

  var script = document.createElement('script');

  script.setAttribute('src', 'http://spreadsheets.google.com/feeds/list'

                         + '/' + param_ssKey + '/' + param_wsId + '/public/values' +

                        '?alt=json-in-script&callback=cm_loadMapJSON');

  script.setAttribute('id', 'jsonScript');

  script.setAttribute('type', 'text/javascript');

  document.documentElement.firstChild.appendChild(script);
}

setTimeout('cm_load()', 500); 

//]]>

</script>
<body onLoad="FP_preloadImgs(/*url*/'button18.jpg', /*url*/'button19.jpg'); if (document.getElementById('zoom_searchbox')) {document.getElementById('zoom_searchbox').focus();}" bgcolor=#969696>
<div id="junaid"></div>
<div class="body_main">

<div class="banner_contianer">
                <div class="banner_bg"><img src="<?=base_url()?>banners/properties.png" alt="" /></div>
                <div class="banner_btm_flear"></div></div>

                <div class="body_left_cont">
                    <div class="welcome_message">
                        <h1><?=$page_data['heading']?></h1>
                  </div>
                        <div class="tabs_main_cont" >
                <div class="tabs_md_show"><img src="<?=base_url()?>images/search-top-bg.png" alt="" /></div>
                    <div class="tabs_data_cont">
                            <div class="tabs_repeat_inner">
                                <div class="show_detail_contianer">
                                    <div class="show_In_cont">
                                    <div class="show_In_properties">
                                        <table bgcolor="#FFFFFF" id="cm_mapTABLE"> 

      <tbody> <tr id="cm_mapTR">

          <td> <div id="cm_map" style="width:530px; height:860px"></div> </td>

      </tr> </tbody>

    </table>
                                       </div> 
                                    </div>
                                </div>
                            </div>
                           <div class="tabs_md_show"><img src="<?=base_url()?>images/search-btm-bg.png" alt="" /></div>           
              </div>

                    </div>

                        </div>

                </body>

                        <?PHP
//$this->load->view("inc/right_panel");
?>

                            <div class="opportunities">We Do Business In Accordance With The Federal Fair Housing Law Equal Housing Opportunity</div>
                </div>

        <?PHP
$this->load->view("inc/footer");
?> 
```

**如果我有一个 mysql/php 数组，如何替换源？：**

```
<?php
include('database.php');
while($data = mysql_fetch_array($DATABASE))
{
   $map_source['address'] = data['address'];
   $map_source['lat'] = data['long'];
   $map_source['long'] = data['lat'];
}
mysql_close($con);
?> 
```

如何回显数组以替换源？

**编辑：2012 年 4 月 19 日下午 4 点 30 分**** 在完成@mano-marks 提供的教程后，我几乎可以把所有东西都搞定。但是，[此测试页](http://firstchoicehousing.com/_api/google/maps/phpsqlajax_map_v3.html)) 没有显示任何内容。你能帮我找出问题所在吗？

**[PHP/XML](http://firstchoicehousing.com/_api/google/maps/phpsqlajax_genxml2.php)：**

```
<?php
require("database.php");

function parseToXML($htmlStr) 
{ 
$xmlStr=str_replace('<','&lt;',$htmlStr); 
$xmlStr=str_replace('>','&gt;',$xmlStr); 
$xmlStr=str_replace('"','&quot;',$xmlStr); 
$xmlStr=str_replace("'",'&#39;',$xmlStr); 
$xmlStr=str_replace("&",'&amp;',$xmlStr); 
return $xmlStr; 
} 

// Opens a connection to a MySQL server
$connection=mysql_connect ($localhost, $username, $password);
if (!$connection) {
  die('Not connected : ' . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die ('Can\'t use db : ' . mysql_error());
}

// Select all the rows in the tbl_address table
$query = "SELECT * FROM tbl_address WHERE 1";
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

// Start XML file, echo parent node
echo '<markers>';

// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  // ADD TO XML DOCUMENT NODE
  echo '<marker ';
  echo 'name="' . parseToXML($row['g_address']) . '" ';
  echo 'address="' . parseToXML($row['g_address']) . '" ';
  echo 'lat="' . $row['g_latitude'] . '" ';
  echo 'lng="' . $row['g_longitude'] . '" ';
  echo 'type="USC Student Housing" ';
  echo '/>';
}

// End XML file
echo '</markers>';

?> 
```

**[HTML地图](http://firstchoicehousing.com/_api/google/maps/phpsqlajax_map_v3.html)：**

```
<!DOCTYPE html >
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP/MySQL & Google Maps Example</title>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    //<![CDATA[
    var customIcons = {
      restaurant: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };
    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(47.6145, -122.3418),
        zoom: 13,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;
      // Change this depending on the name of your PHP file
      downloadUrl("http://firstchoicehousing.com/_api/google/maps/phpsqlajax_genxml2.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[[]i].getAttribute("name");
          var address = markers[[]i].getAttribute("address");
          var type = markers[[]i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[[]i].getAttribute("lat")),
              parseFloat(markers[[]i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address;
          var icon = customIcons[[]type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
        }
      });
    }
    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }
    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;
      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };
      request.open('GET', url, true);
      request.send(null);
    }
    function doNothing() {}
    //]]>
  </script>
  </head>
  <body onload="load()">
    <div id="map" style="width: 500px; height: 300px"></div>
  </body>
</html>** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:22:24.637

所以你还有另一个你不知道的问题，那就是你使用的是 Google Maps API 的第 2 版，它已被弃用，明年可能会被关闭。版本 3 是当前版本。Google Maps API 开发者网站上有几篇文章使用 PHP/MySQL 开始使用 Google Maps API： [https ://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3) [https://developers.google.com/地图/文章/phpsqlsearch_v3](https://developers.google.com/maps/articles/phpsqlsearch_v3)

# android - 某些 url 不会在 webview 中加载

> ID：10236339
> 
> 赞同：0
> 
> 时间：2012-04-19T20:36:27.323
> 
> 标签：android, url, webview, loading

我有一个工作 web 视图，我修改它以加载不同的 url。该网站无法加载。它只是显示一个空白的屏幕，是的，我有正确的权限。这是代码：

公共类 PowerSchoolActivity 扩展 Activity {

```
private static final String TAG = "PowerSchool 2";
public static final String url = null;
private WebView mWebView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    Log.i(TAG, "onCreate");
    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setBuiltInZoomControls(true);
    mWebView.getSettings().setSupportZoom(true);
    mWebView.getSettings().setSupportMultipleWindows(true);
    mWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    mWebView.loadUrl("https://pschool.fsd1.org/teachers/pw.html");
    mWebView.setWebViewClient(new PowerSchoolClient());
    WebView myWebView = (WebView) findViewById(R.id.webview);
    myWebView.setWebViewClient(new WebViewClient());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:38:50.147

这是因为网址中的“https”

解决方案： http: [//damianflannery.wordpress.com/2010/09/28/android-webview-with-https-loadurl-shows-blankempty-page/](http://damianflannery.wordpress.com/2010/09/28/android-webview-with-https-loadurl-shows-blankempty-page/)

# .net - XCode/MonoMac 中的自定义控件等效项

> ID：10236340
> 
> 赞同：2
> 
> 时间：2012-04-19T20:36:29.167
> 
> 标签：.net, xcode, interface-builder, monomac

我是一名 .NET 开发人员，正在尝试使用 Windows 应用程序的 OSX 端口。我正在使用 MonoDevelop 和 MonoMac（带有 XCode Interface Builder）来创建我的 UI。

来自 Windows，我试图理解“UserControl”的 Cocoa 等价物，因为我在我的 WinForm 版本中广泛使用了这些。我有一组控件（比如标签、文本框和按钮），我想打包并在整个 Cocoa UI 的各个地方重用它们。

据我了解，我需要通过继承 NSView 来创建一个“自定义视图”（我们称之为“MyView”）。我可以在 Interface Builder 中创建“MyView”，但是当我在主窗口中使用它时，它总是显示为空/空白。

下面是我如何在 IB 中的主窗体上放置控件：我从对象库中添加一个自定义视图 (NSView)，然后将“自定义类”下的“类”属性更改为“MyView”。如果控件在设计时不呈现，这不是问题，但它在运行时也是完全空的。

我怀疑我错过了一些非常简单/明显的东西。应该以这种方式使用自定义视图吗？我在网上找到的所有示例似乎都在讨论自定义绘图，这是我不想要的（我只想一起使用一堆控件，以便我可以重用它们）。那里的任何人都可以为我解释一下吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:01:52.330

如果您只需要一组标准控件，那么您可能需要一个独立视图 NIB/XIB。然后，您每次要实例化该组时都加载该 NIB，从中获取顶级视图，并将该视图插入到其他视图层次结构中。您将使用`NSViewController`（或自定义子类）来拥有和加载该 NIB。

您还可以将独立视图添加到已包含窗口的 NIB。NIB 的所有者（通常是其实例`NSWindowController`或子类）将有一个出口来引用该独立视图层次结构。然后，您的代码可以随意使用该视图层次结构，将其插入到窗口的视图层次结构中的适当位置。

您通常不会使用自定义视图类来对标准控件进行分组。您只需创建一个视图子类来创建一个非标准视图，即以自定义方式绘制或提供不同操作技术的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:34:17.887

这对我有用：

1.  将“自定义视图”拖放到您的窗口上（不要在身份检查器中重命名类）。

2.  在名为“CustomView”的窗口控制器中为自定义视图创建一个出口。

3.  在您的窗口控制器 awakeFromNib 方法中添加以下代码

```
 this.CustomView.AddSubview(new YourCustomViewController().View); 
```

**注意：**此问题的其他答案假定您的视图没有 XIB，因此显示为空，因为它未正确加载。

# ruby-on-rails - Omniauth 通过 Twitter 登录

> ID：10236349
> 
> 赞同：1
> 
> 时间：2012-04-19T20:36:59.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, omniauth

我正在开发一个 Rails 应用程序，它允许用户通过 twitter 登录，他们可以发推文和搜索。以前对于其他一些应用程序，我使用omniauth 通过twitter 登录它工作正常（rails 3.1.3）（完整日志[https://gist.github.com/2423973](https://gist.github.com/2423973)）。但是在此应用程序中，当我转到 localhost:3000 时出现以下错误

未定义的方法“包括？” 对于 nil：NilClass（完整日志[https://gist.github.com/2423983](https://gist.github.com/2423983)）

这个应用程序正在使用

轨道 3.2.1 全域认证 0.2.6

我尝试切换回 rails 3.1.3 版本，但最终出现不同的错误

/home/santosh/.rvm/gems/ruby-1.9.2-p290@twitterapp/gems/activerecord-3.1.3/lib/active_record/base.rb:1088:in `method_missing': undefined method`mass_assignment_sanitizer=' for ActiveRecord::Base:Class (无方法错误）

那么问题到底出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T12:12:32.440

[与所有流行的社交网络集成的示例源代码](https://github.com/mohitjain/social-login-in-rails)，即 Devise + Twitter + Facebook + Linkedin + Google + Github

*免责声明：我写了那个应用程序。如果您遇到任何问题。随时在 stackoverflow 上 ping 我或在 github 上打开一个问题。*

# jquery - 我在哪里可以使用 jqgrid remapColumns 函数？

> ID：10236351
> 
> 赞同：2
> 
> 时间：2012-04-19T20:37:07.347
> 
> 标签：jquery, jquery-ui, jqgrid

如果我`remapColumns`在`columnChooser`'s done 事件中使用，那么对列进行排序就没有问题。`remapColumns`但是当我使用新的烫发信息搬到 `beforeReques`t 时，请参见下文：

```
beforeRequest: function(){                                              
    perm =   {0:2,1:0,2:1,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10};
    myGrid.jqGrid("remapColumns", perm,  true);
} 
```

列已正确重新排序，我可以搜索列值，但列排序功能刚刚被禁用。点击事件似乎不起作用。有人可以帮忙吗？我怎样才能找回它？真的很感激。

非常感谢！

严

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T21:01:39.037

在[答案](https://stackoverflow.com/a/8436273/315935)中，您可以找到一个如何使用的示例`remapColumns`，我希望其他信息对您有所帮助。在演示中，我`remapColumns` **在**. `loadComplete`我不明白您为什么要更改对服务器的每个请求的列顺序。

**更新**：[修改后的演示](http://www.ok-soft-gmbh.com/jqGrid/SaveGridState.htm)没有你描述的效果。原因是在旧的演示中调用了`remapColumns`带有空（`[]`）置换参数的方法，并且`remapColumns`在这种情况下工作不正确。所以我包括了额外的测试`myColumnsState.permutation.length > 0`。

**更新 2**：[免费 jqGrid](https://github.com/free-jqgrid/jqGrid)提供`remapColumnsByName`额外的方法`remapColumns`。的第一个参数`remapColumnsByName`是列名数组，应该在网格上。Columns `"subgrid"`，可以包含也可以不包含`"cb"`。`"rn"`对 的 用法的理解`remapColumnsByName`要容易得多，`remapColumns`尤其是在列的顺序可能由用户更改的情况下（`columnChooser`例如，通过 ）。强烈建议使用`remapColumnsByName`而不是`remapColumns`.

# jquery - 在 jQuery Mobile 中延迟加载图像

> ID：10236358
> 
> 赞同：5
> 
> 时间：2012-04-19T20:37:29.433
> 
> 标签：jquery, jquery-mobile

我正在尝试在我的 jQueryMobile 网站中实现[延迟加载插件，以帮助加快包含大量图像的页面的加载时间。](http://www.appelsiini.net/projects/lazyload)

如果我通过直接访问这样的 URL 来绕过 JQM 的 ajax 页面加载：`http://hello.com/about`延迟加载效果很好。但是，如果我从另一个使用 JQM 的 ajax 页面加载的页面点击到 About 页面，则延迟加载不会加载。

About 页面的 id 为`about`=>`<div data-role="page" data-theme="a" id="about">`

我尝试了多种绑定到该`pageinit`函数的变体，但均未成功。我最近的尝试是：

```
$('#about').live('pageinit', function() {
    $(window).load(function() {
        $("img.lazy").lazyload();
    });
}); 
```

任何关于这方面的指导都会很棒。多谢你们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T21:18:34.240

该`window.load`函数只会触发一次，当通过 AJAX 将页面拉入 DOM 时，您将在它触发后绑定到它。您的问题的解决方案非常简单，在特定页面初始化时运行代码：

```
$(document).delegate('#about', 'pageinit', function() {

    //notice I start the selection with the current page,
    //this way you only run the code on images on this pseudo-page
    $(this).find("img.lazy").lazyload();
}); 
```

这应该可以正常工作，因为`pageinit`直到火灾之后才会`document.ready`触发。

另请注意，我使用`.delegate()`的，而不是`.live()`since`.live()`已被贬值，可能会从未来的版本中删除。

```
$(SELECTION).live(EVENT, EVENT-HANDLER); 
```

是相同的：

```
$(document).delegate(SELECTION, EVENT, EVENT-HANDLER); 
```

对于奖金回合，从 jQuery 1.7 开始，上述两个函数实际上都映射到`.on()`并且您可以`.on()`在委托庄园中使用，如下所示：

```
$(document).on(EVENT, SELECTION, EVENT-HANDLER); 
```

文档：

*   `.live()`：[http ://api.jquery.com/live](http://api.jquery.com/live)
*   `.delegate()`：[http ://api.jquery.com/delegate](http://api.jquery.com/delegate)
*   `.on()`：[http ://api.jquery.com/on](http://api.jquery.com/on)

The reason your code worked on the first page-view was because the `window.load` event was firing after you bound to it in the `pageinit` event handler, but on subsequent AJAX loads you are binding to the `window.load` event even though it won't fire anymore.

# .htaccess - .htaccess 将奇怪的博客地址重定向到新目录

> ID：10236360
> 
> 赞同：0
> 
> 时间：2012-04-19T20:37:34.020
> 
> 标签：.htaccess, redirect

我目前在我正在构建的新站点上的 .htaccess 文件中使用这种格式进行 301 重定向：

```
RewriteRule ^Default.asp$ http://www.example.com/index.php [R=301] 
```

我需要一个基本上重定向`http://www.example.com/blog/index.php/path-to-the-post/`到的重定向`http://www.example.com/blog/path-to-the-post/`。

我需要删除`index.php`第一个 URL 中的 ，同时保持帖子的实际路径相同。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:43:42.587

你应该试试`RewriteRule ^blog/index.php/(.+)$ blog/$1 [R=301]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:16:34.347

万一其他人遇到这个问题，这是对我有用的答案：

在`.htaccess`博客的文件中，

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule>
# END WordPress 
```

# google-app-engine - 在 GAE 中的 blobstore 中存储过滤后的图像

> ID：10236363
> 
> 赞同：1
> 
> 时间：2012-04-19T20:37:43.550
> 
> 标签：google-app-engine, python-2.7, blobstore

我正在使用python2.7在GAE上开发简单的应用程序，该应用程序的目的是过滤用户上传的图像并将此图像存储在GAE的blobstore中，首先我尝试存储原始图像（上传的）在 blobstore 中，然后通过使用 url 获取它并对其进行过滤，最后将过滤后的图像存储在 blobstore 中，原始图像存储正确，但过滤后的图像不正确。这是我尝试过的代码：

```
from __future__ import with_statement
from google.appengine.api import files
from PIL import Image
from PIL import ImageFilter
import cgi, cgitb ; cgitb.enable()
from google.appengine.ext import blobstore
from google.appengine.ext import webapp
from google.appengine.ext.webapp import blobstore_handlers
from google.appengine.ext.webapp.util import run_wsgi_app
import mimetypes
from google.appengine.ext import blobstore
from mimetypes import guess_type
from google.appengine.api import images

def mime_type(filename):
    return guess_type(filename)[0]
class get(webapp.RequestHandler):
    def post(self):

        form = cgi.FieldStorage() 
        file_upload = form['file']  
        name=file_upload.filename    
        m=mimetypes.guess_type(name)[0]
        u_file = files.blobstore.create(mime_type=m,_blobinfo_uploaded_filename=name)
        data=file_upload.file.read()
        with files.open(u_file, 'a') as f:
                f.write(data)
        files.finalize(u_file)
        blob_key = files.blobstore.get_blob_key(u_file)
        url = images.get_serving_url(blob_key)
        imageFile = str(url)
        img = images.Image(blob_key=blob_key)
        blob_info = blobstore.BlobInfo.get(blob_key)
        im = Image.open(blob_info.open())
        out = im.filter(ImageFilter.EDGE_ENHANCE_MORE)
        u_file = files.blobstore.create(mime_type=m,_blobinfo_uploaded_filename=name)
        data=out
        with files.open(u_file, 'a') as f:
                f.write(data)
        files.finalize(u_file)
        blob_key = files.blobstore.get_blob_key(u_file)
        url = images.get_serving_url(blob_key)
        self.response.out.write("""<html><br><body style="background-color:#CC9999"><b><font size="5" face="Batang" ><center> <li ><img src="%s"</a>
               </center></font><hr></body></html>            
                """ % (str(url)))

def main():
    #application = webapp.WSGIApplication( [('/serve/([^/]+)?', ServeHandler),], debug=True)
    application = webapp.WSGIApplication( [(r'/get.py', get)], debug=True)

    run_wsgi_app(application)

if __name__ == "__main__":
    main() 
```

这是日志文件：

```
2012-04-19 13:36:25.073
Traceback (most recent call last):
  File "/base/data/home/apps/s~filterimages2012/1.358325815417263944/get.py", line 59, in <module>
    main()
  File "/base/data/home/apps/s~filterimages2012/1.358325815417263944/get.py", line 55, in main
    run_wsgi_app(application)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/webapp/util.py", line 98, in run_wsgi_app
    run_bare_wsgi_app(add_wsgi_middleware(application))
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/webapp/util.py", line 116, in run_bare_wsgi_app
    result = application(env, _start_response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1519, in __call__
    response = self._internal_error(e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~filterimages2012/1.358325815417263944/get.py", line 43, in post
    f.write(data)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/files/file.py", line 316, in write
    request.set_data(data)
  File "cpp_message.pyx", line 124, in cpp_message.SetScalarAccessors.Setter (third_party/apphosting/python/protobuf/proto1/cpp_message.cc:2229)
TypeError: <type 'instance'> has type <type 'instance'>, but expected one of: str, unicode 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:15:01.030

问题是这两行：

```
out = im.filter(ImageFilter.EDGE_ENHANCE_MORE)
# ...
data = out 
```

`out`是一个 PIL Image 对象（因此`data`也是），并且您正在尝试将其直接写入文件。首先，您需要以您选择的文件格式（例如，PNG、JPG）对图像进行序列化。例如，将第二行更改为此将起作用：

```
buf = cStringIO.StringIO()
out.save(buf, "PNG")
data = buf.getvalue() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:58:45.567

我不确定这个错误是什么意思，但我认为你不能在 Python 中使用 'get' 作为类名。

换个试试怎么样

```
application = webapp.WSGIApplication( [(r'/get.py', get)], debug=True) 
```

到

```
application = webapp.WSGIApplication( [(r'/get.py', GetHandler)], debug=True) 
```

并改变

```
class get(webapp.RequestHandler):
    def post(self): 
```

到

```
class GetHandler(webapp.RequestHandler):
    def post(self): 
```

# javascript - 按下键盘按钮时将链接更改为 :active 状态

> ID：10236364
> 
> 赞同：0
> 
> 时间：2012-04-19T20:37:54.407
> 
> 标签：javascript, html, hyperlink

`:active`当我按下按钮时，如何将链接的状态更改为其状态？

示例：当我按下向上键时，特定链接会更改为其`<code>:active</code>`状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T22:11:52.327

我假设您只想更改链接的外观，而不是实际的链接状态。通过观察 keyup 事件并将与“活动链接”相同的视觉样式添加到您的链接，这是相当简单的。

```
$('body').live('keyup',function(e){
     if(e.which == 38)
     {
          $('#mylink').addClass("activeLinkClass");             
     }
}); 
```

如果您确实想更改状态（可能是因为您将链接状态用作程序逻辑的一部分），我的理解是由浏览器管理；您需要从浏览历史记录中清除该条目，我认为使用 javascript 是不可能的。

注意：此代码适用于我在 chrome 上的快速测试，但尚未真正经过测试

# asp.net - VS Web Developer 2008 报错：此服务器支持655及更早版本

> ID：10236375
> 
> 赞同：1
> 
> 时间：2012-04-19T20:38:48.423
> 
> 标签：asp.net, database

我在学校的另一台电脑上创建了一个新项目（Visual Studio Web Developer 2008），但是当我在家里打开它时，我无法使用数据库。出现以下情况：

无法打开数据库“PATH_TO_DB”，因为它是版本 706。此服务器支持版本 655 及更早版本。不支持降级路径。

任何人都可以帮助并推荐我到正确的下载部分吗？我还没有找到任何相关的下载，而且我尝试过的没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:51:14.103

您需要安装 SQL Server 2012。

这应该可以解决问题：http: [//www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:19:23.003

这是因为您的数据库来自 SQL Server 2012。我发现解决此问题的唯一方法是从 SQL Server 2012 生成脚本，然后在 SQL Server 2008 R2 中运行它。

该视频可以帮助您： [http ://www.youtube.com/watch?feature=player_embedded&v=vAtg3gl6yts](http://www.youtube.com/watch?feature=player_embedded&v=vAtg3gl6yts)

# c# - 如何获取控件相对于窗体位置的位置？

> ID：10236377
> 
> 赞同：9
> 
> 时间：2012-04-19T20:38:58.650
> 
> 标签：c#, winforms

我正在寻找一个属性，它为我提供了一个控件相对于其窗体位置的位置，而不是窗体的`ClientRectangle's`“0,0”。

当然，我可以将所有内容都转换为屏幕坐标，但我想知道是否有更直接的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T20:52:34.717

您需要转换为屏幕坐标，然后进行一些数学运算。

```
Point controlLoc = form.PointToScreen(myControl.Location); 
```

表单的位置已经在屏幕坐标中。

现在：

```
Point relativeLoc = new Point(controlLoc.X - form.Location.X, controlLoc.Y - form.Location.Y); 
```

这将为您提供相对于表单左上角的位置，而不是相对于表单的客户区。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T20:54:05.587

我认为这将回答您的问题。请注意，“this”是表格。

```
Rectangle screenCoordinates = control.Parent.ClientToScreen(control.ClientRectangle);
Rectangle formCoordinates = this.ScreenToClient(screenCoordinates); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T15:18:11.810

似乎答案是没有直接的方法可以做到这一点。

（正如我在问题中所说，我正在寻找一种使用屏幕坐标以外的方法。*）*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-21T14:41:19.510

鉴于问题的具体情况，所选答案在*技术上*是正确的：.NET 框架中不存在此类属性。

但是，如果您想要这样的属性，这里有一个控件扩展可以解决问题。是的，它使用屏幕坐标，但考虑到帖子标题的一般性质，我相信登陆此页面的一些用户可能会发现这很有用。

顺便说一句，我花了几个小时试图通过循环遍历所有控制父母来在没有屏幕坐标的情况下做到这一点。我永远无法调和这两种方法。这很可能是由于 Hans Passant 对 OP 评论 Aero 如何对窗口大小撒谎。

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace Cambia
{
    public static class ControlExtensions
    {
        public static Point FormRelativeLocation(this Control control, Form form = null)
        {
            if (form == null)
            {
                form = control.FindForm();
                if (form == null)
                {
                    throw new Exception("Form not found.");
                }
            }

            Point cScreen = control.PointToScreen(control.Location);
            Point fScreen = form.Location;
            Point cFormRel = new Point(cScreen.X - fScreen.X, cScreen.Y - fScreen.Y);

            return cFormRel;

        }

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-02T18:39:52.287

当您在 Autosize 设置为 true 的许多其他控件中拥有控件时，上述答案均无济于事，即

```
Form -> FlowLayoutPanel -> Panel -> Panel -> Control 
```

所以我用不同的逻辑编写了自己的代码，我只是不知道如果在父控件之间使用一些对接会产生什么结果。我想 Margins 和 Paddings 需要参与这种情况。

```
 public static Point RelativeToForm(this Control control)
    {

        Form form = control.FindForm();
        if (form is null)
            return new Point(0, 0);

        Control parent = control.Parent;

        Point offset = control.Location;            

        while (parent != null)
        {
            offset.X += parent.Left;
            offset.Y += parent.Top;                
            parent = parent.Parent;
        }

        offset.X -= form.Left;
        offset.Y -= form.Top;

        return offset;

    } 
```

# php - 伪装成 HTM 的 ASPX 文件？- （卷曲相关）

> ID：10236380
> 
> 赞同：-1
> 
> 时间：2012-04-19T20:39:11.927
> 
> 标签：php, .htaccess, curl, web-scraping

我正在尝试 cURL 一个网站，但无法得到我想要的结果，尽管我似乎做了它需要做的事情（或者至少我是这么认为的）

流量显示一些命名`htm,css,js`的文件，当然还有一两个`aspx`文件。

我的假设是所有的 javascript, html, css 文件对结果毫无意义，但是经过多次不成功的尝试后，我想到这些文件可能是`aspx`伪装的文件，我实际上也需要访问这些文件.. .

是否有可能拥有一个`aspx`文件并让所有客户都认为它是一个`htm`文件？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:01:06.837

如果您只是在谈论为客户端“更改文件类型”，请查看 mod_rewrite for apache。这是一个关于如何让所有 .php 文件作为 .html 文件访问的示例：

[http://forums.digitalpoint.com/showthread.php?t=5801](http://forums.digitalpoint.com/showthread.php?t=5801)

所以这应该适合你（根据帖子。我没有尝试过）：

```
 Options +FollowSymLinks

RewriteEngine On
RewriteBase /
RewriteRule ^([^.]+).html$ /$1.aspx [QSA,L]
```

请注意，您将无法访问在同一目录中命名为 .aspx 文件的 .html 文件。在这种情况下，.aspx 将具有优先权。

希望这个对你有帮助。

# sql - 用于提取信息的 SQL 逻辑

> ID：10236381
> 
> 赞同：2
> 
> 时间：2012-04-19T20:39:15.677
> 
> 标签：sql, sql-server, tsql

我有一种情况，我需要从 sql 表行中提取信息。一个典型的字符串看起来像，

```
RMR*AZ*10001312**119.76 
```

`RMR`识别行的关键在哪里。我需要在第二个和第三个之间提取信息`*`，即`10001312`在第四个之后，即是`119.76`

此信息将填充到表格中。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:50:55.370

鉴于没有内置的 SQL 函数（我知道）来解析你想要的字符串，我建议使用用户定义的函数。然后你可以拆分你的字符串`*`并取出你关心的索引。

[这里](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=50648)的线程有一些广泛的讨论和许多此类功能的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:54:09.303

在 SQL Server 中完成的示例，可能会对您有所帮助。

```
declare @myString varchar(50)
set @myString = 'sadfa*lkj*234r2*'

declare @startPosition int
declare @endPosition int

--First * location
select @startPosition = Charindex('*', @myString, 0)

--Second * location
select @endPosition = Charindex('*', @myString, @startPosition+1)
select @endPosition 

select substring(@myString, 
    @startPosition +1 ,
    @endPosition - @startPosition -1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:48:47.533

取决于您的数据库引擎。对于 DB2，我实现了这个： [https ://stackoverflow.com/a/10175295/1336443](https://stackoverflow.com/a/10175295/1336443)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:49:04.860

好吧，你还没有说你需要哪种 SQL 方言，所以只是一个通用的答案：使用 SQL 的字符串操作，例如看这里：[http ://www.1keydata.com/sql/sql-substring.html](http://www.1keydata.com/sql/sql-substring.html)

# hibernate - 如何仅在休眠中为选定的复选框编写查询

> ID：10236382
> 
> 赞同：0
> 
> 时间：2012-04-19T20:39:22.553
> 
> 标签：hibernate

嗨，我有一个要求，即基于用户选择的复选框，我必须在休眠中编写一个查询，并且只取回那些选定的复选框字段并显示给用户。例如，如果用户选择，我在 UI 页面中有 10 个复选框任何 5 或 7 或 4 个复选框字段我必须向控制器发送请求并只取回那些选定的复选框字段，如何编写休眠查询...任何人都可以建议我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:43:29.120

您可以使用 hql **where in**如下

假设您将选中的复选框作为整数列表

```
List<Integer> checkedList = .....;

String hql = "from Entity where property in (:properties)";
Query query = session.createQuery(hql);
query.setParameterList("properties", checkedList);

//get the result as and use it as per use case
List entityList = query.list(); 
```

您还可以评估标准 API

```
Restrictions.in(conditionColumnName, conditionColumnValues)
//conditionColumnValues is a collection 
```

希望这可以帮助 ！！！！！

# r - R 数据挖掘语法

> ID：10236383
> 
> 赞同：1
> 
> 时间：2012-04-19T20:39:32.393
> 
> 标签：r, statistics, data-mining, xts, quantmod

我正在尝试运行[Data Mining With R book](http://www.liaad.up.pt/~ltorgo/DataMiningWithR/code3.html)提供的代码。它基本上采用 SP500 指数（GSPC）的报价数据并构建一个预测函数（T.ind）来预测未来 n 天的报价。

```
library(DMwR)
#load S&P500 Dataset
data(GSPC)

# Create a Prediction function T based on which Buy / Sell / Hold decision
# will be taken. target variation margin is 2.5%
T.ind <- function(quotes,tgt.margin=0.025,n.days=10) {
  v <- apply(HLC(quotes),1,mean)
  r <- matrix(NA,ncol=n.days,nrow=NROW(quotes))

  for(x in 1:n.days) {
    r[,x] <- Next(Delt(v,k=x),x)
  }

  x <- apply(r,1,function(x) sum(x[x > tgt.margin | x < -tgt.margin]))

  if (is.xts(quotes))
    xts(x,time(quotes))
  else
    x
}

#Plot candle chart for 3 months of Index with Avg. price and Parameter T.
candleChart(last(GSPC,'3 months'),theme='white',TA=NULL)

addAvgPrice <- newTA(FUN=avgPrice,col=1,legend='AvgPrice')
addT.ind <- newTA(FUN=T.ind,col='red',legend='tgtRet')
addT.ind() 
```

我的问题是如何`T.ind`从`newTA()`函数调用中调用。所选期间的报价值如何传递给`T.ind`函数。请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:55:29.460

它有点像 lattice 或 ggolot2 图，但没有“+”号。然而，相当于“特征添加”的操作是通过副作用传递的。绘图不仅是 2D 显示，而且还是工作区中的一个对象。当您调用`addT.ind()`它时，它的效果将应用于当前活动的图表对象，该对象具有 HLC() 在隐式访问烛图 () 产品结果的上下文中收集的数据。

# java - Java 现在声明，稍后定义

> ID：10236386
> 
> 赞同：4
> 
> 时间：2012-04-19T20:39:38.917
> 
> 标签：java, class, methods, declare

在java中，您可以在类中声明一个方法，然后在类中或类外定义它吗？

我正在寻找类似于 C++ 的东西，您在其中声明它然后使用类外的 :: 格式稍后定义它？

另外，不要重载方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T21:07:13.680

C++ 成员函数永远不会在“类之外”定义。前缀将`Class_Name::`它们放在类中。他们只是不在*类声明*中。

在 C++ 中拆分声明和定义是必要的，因为单独的编译模型基于文本文件包含。无法从编译的目标文件中提取有关类的详细信息，因此类型信息的简明摘要被分解到头文件中，并且该类的所有客户端模块都必须包含该信息。Java 有一种更复杂的对象文件格式，它可以在没有头文件的情况下获取有关类的信息。

语言中出现的另一个声明需求是处理函数之间的相互递归或其他形式的循环引用的情况（例如，它们在 Wirth 的原始 Pascal 语言中需要，该语言不支持将程序拆分为单独的模块）。Java 无需前向声明即可实现相互递归。您只需将类型检查推迟到完整解析。Pascal 中的前向声明不是为了使相互递归成为可能，而是为了使一次编译它成为可能，这样您就可以在编译下一个函数之前为一个函数发出代码。（当您的硬件是在 1968 年制造时，这一点很重要。）

如果您使用的语言不需要声明，为什么还要寻找一种方法将它们放回原处？这就像你被释放后继续吃监狱的食物。（这可能是“习得性无助”的一个例子。）

无论如何，几十年来类型系统的最新技术已经被标记为尽可能*避免声明并依赖类型推断的设计。*看看你必须用 C++ 写多少次类名才能完成任何事情。`class myclass { public: myclass(); }; myclass::myclass() { /* constructor */ }`. 四次重复`myclass`只是为了创建一个什么都不做的虚拟类，并使用在类声明之外定义的构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T20:41:17.043

你不能在 Java 中做到这一点。每当您声明一个非抽象方法时，您还必须定义它。抽象方法没有定义，所以它们超出了这个问题的范围。

# html - 子域中的“前导斜杠”（根）URL 是否解析为 TLD 或子域？

> ID：10236388
> 
> 赞同：0
> 
> 时间：2012-04-19T20:39:42.883
> 
> 标签：html, hyperlink, subdomain

我们希望将旧版本的站点迁移到`legacy.*.com`子域，希望这能快速解决`/.../...`旧站点中使用的所有链接的问题。

例如，子域`/abc.html`上的链接会`legacy.*.com`解析为`legacy.*.com/abc.html`, 还是`http://*.com/abc.html`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:44:25.783

开头的斜杠使链接相对于站点的 FQDN。因此，对于`http://domain.tld`目标为 的链接`/abc.html`将解析为`http://domain.tld/abc.html`. 如果同一个站点被移动到`http://legacy.domain.tld`同一个链接，将解析为`http://legacy.domain.tld/abc.html`.

您可以在过期 5 分钟后轻松发现这一点。不要害怕先尝试而不是发布问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:43:59.993

除非您的网络服务器出于某种原因将其重定向，否则它将解析为 legacy.yoursite.com。通常，尽管路径由您的网络服务器定义，域和子域由 DNS 定义。这些是完全不同的系统。

# ms-word - Office 功能区 UI XML - 如何创建功能区内库而不是下拉按钮？

> ID：10236389
> 
> 赞同：4
> 
> 时间：2012-04-19T20:39:43.267
> 
> 标签：ms-word, outlook, vsto, outlook-addin, ribbon

我正在尝试将自定义 .net 控件集成到多个 Microsoft Office 2010 应用程序中。

我已经用 XML 创建了我的功能区 UI。但不知道如何复制**In-Ribbon Gallery**控件。（*例如 Word 中的**样式组**，或Outlook中的**快速步骤***）

如果没有可用的直接控制，有没有办法用不同的标签来近似它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-03T10:22:43.100

不幸的是，不支持使用 In-Ribbon Gallery。您可以获得的最接近的方法是使用显示可自定义下拉网格的**[Gallery 控件](http://msdn.microsoft.com/en-us/library/office/dd548011%28v=office.12%29.aspx)**- 而不是功能区中的画廊：

```
<gallery id="galMonthsEng" label="Months (English)" 
    columns="3" rows="4"> 
    <item id="galMonth1" label="January"/> 
    <item id="galMonth2" label="February"/> 
    <item id="galMonth3" label="March"/> 
    <item id="galMonth4" label="April"/> 
    <item id="galMonth5" label="May"/> 
    <item id="galMonth6" label="June"/> 
    <item id="galMonth7" label="July"/> 
    <item id="galMonth8" label="August"/> 
    <item id="galMonth9" label="September"/> 
    <item id="galMonth10" label="October"/> 
    <item id="galMonth11" label="November"/> 
    <item id="galMonth12" label="December"/> 
    <button id="btnGal1" label="Regional Settings" 
        imageMso="ShowTimeZones" 
        onAction="ShowRegionalSettings"/>
</gallery> 
```

# java - JNLP：在签名代码中加载未签名代码

> ID：10236392
> 
> 赞同：3
> 
> 时间：2012-04-19T20:39:56.607
> 
> 标签：java, classloader, code-signing, jnlp

我们在克服 Java webstart 的混合代码错误时遇到了困难。总之，我们有我们的主 JNLP 文件，我们已经签署了它直接加载的所有代码。我们已将所有权限选项添加到主 JNLP。它加载的主类也来自一个签名的 jar。

当主类开始一点点开始时，它会触发一些需要加载从 JNLP B 中提取的一些未签名资源的事情。JNLP B 的所有资源都没有签名，它们不需要任何特殊权限。

所有已签名的代码均已根据 Oracle 的混合代码文档进行设置，并且在签名之前已使用“Trusted-Library: true”清单设置 jar 文件。

当签名代码尝试加载未签名代码时，我们会收到一个找不到类的错误，如下所示：

```
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.javaws.Launcher.executeApplication(Unknown Source)
at com.sun.javaws.Launcher.executeMainClass(Unknown Source)
at com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
at com.sun.javaws.Launcher.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)

    Caused by: java.lang.NoClassDefFoundError: org/some/external/package/that/is/not/signed
at org.our.signed.package.main(Main.java:87)
... 9 more

    Caused by: java.lang.ClassNotFoundException: org.some.external.package.that.is.not.signed
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at com.sun.jnlp.JNLPClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 10 more 
```

这是 JNLP 中的场景：

JNLP A：（总结）

```
<jnlp spec="1.5+" codebase="...." href="......">
  <information>
   ...etc
  </information>
   <security>
     <all-permissions/>
   </security>
   <resources>
      <j2se version="1.6+" initial-heap-size="80m" max-heap-size="256m" href="http://java.sun.com/products/autodl/j2se"/>
      <jar href="signedJar_1.jar" download="eager" main="true"/>
      <jar href="signedJar_2.jar" download="eager" main="false"/>
      <extension name="unsigned_ext" href="unsigned.jnlp"/>
  </resources>
  <application-desc main-class="(FROM SIGNED CLASS in signedJar_1.jar)"/>
</jnlp> 
```

JNLP B（unsigned.jnlp 加载器）

```
<jnlp spec="1.5+" codebase="....." href="......">
  <information>
   ...etc
  </information>
  <resources>
    <jar href="unsigned.jar"/>
  </resources>
  <component-desc/>
</jnlp> 
```

我们注意到安全异常工作正常，因为如果我们将未签名的 jar 移动到具有所有权限并已签名 jar 的 JNLP 中，我们会得到预期的安全异常，Java 不会让我们将签名代码与可信库：没有清单属性的真实且未签名的代码。

想法？类加载器是否有原因无法从未签名的代码中找到 java 文件？我们是否缺少一些特殊的东西来允许签名的代码运行未签名的代码？我只见过人们在获取未签名代码来运行签名代码时遇到问题的情况，我可以理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T21:46:59.480

可信库类加载器是（可能不受信任的）applet 类加载器的父类（在类加载器委托的意义上）。把它想象成引导类加载器。因此，不受信任的类可以链接到受信任的库类，但反之则不行。无需费心更改清单和使用 WebStart，您可以通过添加受信任的类`-Xbootclasspath/a:`和不受信任的类来尝试这些东西`-classpath`（这是在实现该功能之前尝试该功能的方式）。

`JNLPAppletLauncher`是如何让可信库调用小程序代码的示例。小程序类加载器可以通过 获得`Thread.currentThread().getContextClassLoader()`，它只是从那里反射。编写安全的可信库代码很棘手。请记住，您不能信任不受信任的代码。

# matlab - 将一个矩阵划分为多个矩阵

> ID：10236401
> 
> 赞同：0
> 
> 时间：2012-04-19T20:40:39.820
> 
> 标签：matlab

如何将矩阵划分为几个较小的矩阵以查找未知变量？

例如，给定：

![新的新形象](../Images/eec7ecc03533bc46dae262e3836d24ce.png)

如何通过将 3x3 矩阵分割（分割）成更小的矩阵（1x1 或其他）来找到 x、y、z 和 u 的值来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:59:37.647

你的矩阵尺寸不同意，或者我错过了什么？

编辑：Jeff E 的代码可以在较小的矩阵上正常工作。对于更大的矩阵，您将需要使用反向替换或其他算法，主要是因为矩阵求逆是一项内存密集型任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T22:58:10.467

在*新*图像中，您使用一些恒等式隔离未知矩阵：

```
A * X = B
(inv(A)) * A * X = (inv(A)) * B
I * X = (inv(A)) * B
X = (inv(A)) * B 
```

在 Matlab 中：

```
A = [1, 2; 0, 1]
B = [4, 7; 4, 6]
X = inv(A) * B 
```

输出：

```
ans =

    -4    -5
     4     6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:31:14.097

要求解 A*X=B 形式的方程，应使用[反斜杠运算符](http://www.mathworks.com/help/techdoc/ref/mldivide.html)，因为[应尽可能避免显式取反](http://blogs.mathworks.com/loren/2007/05/16/purpose-of-inv/)

```
A = [1, 2; 0, 1];
B = [4, 7; 4, 6];
X = A\B
X =

    -4    -5
     4     6 
```

# mysql - MySQL，如果子查询为 Null，则优雅地中止？

> ID：10236405
> 
> 赞同：1
> 
> 时间：2012-04-19T20:41:06.043
> 
> 标签：mysql

我写了一个查询，当它找不到记录时会抛出错误：

错误

> 列“product_id”不能为空

MySQL

```
INSERT INTO orders (date, product_id, quantity)
VALUES ('11/29/2012', (
    SELECT product_id FROM products WHERE product_name = 'Oranges'
), 12)
; 
```

我实际上是在我的 PHP 中进行迭代，并且某些`product_name`记录将不存在。

我可以说如果子查询什么都不返回，优雅地停止/中止以便 PHP 可以继续迭代吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:43:19.057

试试这个：

```
INSERT INTO orders (date, product_id, quantity)
SELECT '11/29/2012', product_id, 12
FROM products
WHERE product_name = 'Oranges' 
```

如果没有匹配的产品，查询将成功但不返回任何修改的行。如果您希望在执行查询时可以读取从 PHP 修改的行数。

请注意，如果有多个产品，`product_name = 'Oranges'`您将在表中插入多行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:46:07.123

如果你想插入一条记录，你可以尝试回退到例如`0`如果不存在这样的产品：

```
INSERT INTO orders (date, product_id, quantity)
VALUES ('11/29/2012', COALESCE((
    SELECT product_id FROM products WHERE product_name = 'Oranges'
), 0), 12); 
```

# java - 为什么 Java SE 6 apidoc 中没有记录 com.sun.media.sound 包？

> ID：10236414
> 
> 赞同：5
> 
> 时间：2012-04-19T20:42:21.487
> 
> 标签：java, package, media, javadoc, jdk1.6

我看到我有我的发行版的`com.sun.media.sound`打包`rt.jar`文件。`jdk1.6.0_25`但是我在这里看不到它的javadocs：http: [//docs.oracle.com/javase/6/docs/api/](http://docs.oracle.com/javase/6/docs/api/)

这个包的作用是什么？它是什么的一部分？我可以通过 Google 找到一些 javadocs（比如这里[http://www.docjar.com/docs/api/com/sun/media/sound/package-index.html](http://www.docjar.com/docs/api/com/sun/media/sound/package-index.html)），但是如何知道哪个对 SE 是正确的6？为什么它不在主 javadoc 中记录？

**编辑**

所以，我知道它们不是公共 API，但它们的用途是什么？为什么他们在 openjdk javadoc 中记录？他们在那里公开吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:46:27.137

这些类是专有的和内部的，它们不打算供公众使用。它们也是未来变化的主题。闭上你的眼睛，不要看它们，也不要使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:45:31.703

一般来说，`com.sun.*`类不是 JDK 的公共 API 的一部分，并且是实现细节，如有更改，恕不另行通知。

# php - 使用 __set 和 __get 魔术方法来实例化类

> ID：10236419
> 
> 赞同：3
> 
> 时间：2012-04-19T20:42:51.570
> 
> 标签：php

我正在自动加载我的类，并且想要一种在使用时动态实例化类的方法。

我想要一种在调用类时实例化类的方法，而不是在我的父类中有 20 个类实例化。

例如：

```
$this->template->render(); 
```

将实例化

```
$this->template = new Template(); 
```

我试过这个

```
public function __set($name, $value)
{
    return $this->$name;
}

public function __get($name)
{
    $this->$name = new $name();
} 
```

这似乎不起作用，但我也认为我做错了。

我也想不通的一个问题是我的类驻留在 \System 命名空间中。我似乎无法继续`new "\System".$name()`或`new \System.$name()`没有错误；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:59:10.690

```
private $_template;
public function __set($name, $value)
{
  $this->{'_' . $name} = $value;
}

public function __get($name)
{
  if (!$this->{'_' . $name}) {
    $classname = '\\System\\' . ucfirst($name);
    $this->{'_' . $name} = new $classname();
  }
  return $this->{'_' . $name};
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T21:05:42.993

[__get](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)需要返回一个值。像这样：

```
public function __get($name)
{
    $this->$name = new $name();
    return $this->$name;
} 
```

是难题的一部分。

从您所说的来看，您根本不需要 __set - 除非将等效属性声明为受保护并且您要从实例外部设置它（但是为什么要这样做）。

正如@KingCrunch 所指出的，您可以将命名空间类引用为：

```
$classname = '\\System\\' . ucfirst($name);
$foo = new $classname; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T21:04:24.137

您可能正在寻找更多：

```
public function __set($name, $value)
{
    $this->$name = $value;
}

public function __get($name)
{
    if (isset($this->$name)) {
        return $this->$name;
    }

    $class = sprintf('\\System%s', ucfirst($name));
    return $this->$name = new $class();        
} 
```

它负责类名并实际进行分配（您的代码中缺少该分配）。

# iphone - 核心数据和大文件下载

> ID：10236421
> 
> 赞同：0
> 
> 时间：2012-04-19T20:43:05.903
> 
> 标签：iphone, objective-c, ios, ipad, core-data

我将一些 PDF 存储到`NSManagedObject`type 的属性中`NSData`。我已经为该属性设置了“使用外部存储”，它工作得很好。我遇到的问题是，当 PDF 非常大时，应用程序会因为内存不足而崩溃。有没有办法将数据逐块直接保存到磁盘？我已经使用了`refreshObject:mergeChanges:`，但即便如此，我必须将数据保存到内存中，直到完整下载完成（只有这样我才能调用`refreshObject:mergeChanges:`）才能使属性出错并释放我的内存。当然，对于大型文档来说，为时已晚，在我有机会这样做之前它就崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:56:16.270

我想如果我处于你的位置，我会获得`NSInputStream`传入的 PDF 文件并使用 an`NSOutputStream`将其直接写入磁盘。

至于核心数据，我认为不适合用于您不打算完全放入内存的文件；Apple 没有为我们提供从通过核心数据保存到磁盘的文件中获取 NSInputStream 的选项（无论如何我都知道）。在这种情况下，我只需将文件的位置保存在核心数据中，并在该文件路径出错后，`NSInputStream`从该保存的路径创建一个。

它的抽象程度比大多数开发人员喜欢的要低一些，但最好控制任何可能导致内存不足崩溃的东西。

# playframework - 如何在 Play 模板中访问超出页面范围的模型！框架？

> ID：10236422
> 
> 赞同：0
> 
> 时间：2012-04-19T20:43:08.277
> 
> 标签：playframework, playframework-1.x

在玩！模板我尝试访问一些模型，就像我在 JSP 中使用 bean 所做的那样，模板识别模型类但是当我尝试访问模型属性时，它抱怨错误：“MissingPropertyException：没有这样的属性”

在我的模板中：

**${fulllyQualifyName.myModel}** （未从控制器传递的模型）

页面输出：fulllyQualifyName.class

**${fulllyQualifyName.myModel.propertyA}** （尝试获取propertyA）

页面上的输出：MissingPropertyException：没有这样的属性：类的 propertyA：fulllyQualifyName.myModel 可能的解决方案：id，....

而且我确实将此 propertyA 设置为 myModel 中的属性。

我应该首先在模板中包含/导入模型类吗？如果是这样，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:23:45.603

如果您想访问视图中的模型，只需在控制器渲染方法中传递它们，即

```
render(model1,model2...) 
```

那么你可以使用

```
${fullyQualifyName.model1.propertyA} 

${fullyQualifyName.model2.propertyB} 
```

另见：[http ://www.playframework.org/documentation/1.2/templates](http://www.playframework.org/documentation/1.2/templates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:06:40.017

实际上，您可以访问视图文件中的任何包。试试看嘛：

```
${models.ModelClassName.find('queryStr').fetch()} 
```

通过这种方法，可以使用 Model 超类提供的所有 find() 方法，如[http://www.playframework.org/documentation/1.2.5/jpa#finding中所述](http://www.playframework.org/documentation/1.2.5/jpa#finding)

例如，如果我想在不调用控制器渲染方法的情况下检索用户列表：

```
#{list items:models.User.findAll(), as:'user'}
    user name: ${user.name}
#{/list} 
```

按 id 检索特定用户：

```
${models.User.findById(userId)} 
```

...或通过它自己的财产：

```
${models.User.find('byEmail', 'john@gmail.com').first()} 
```

如果您希望在多个地方使用检索到的模型，您可以尝试以下操作：

```
%{
  users = models.User.findAll();
}%

<span>there are ${users.size()} user(s) </span>
<ul>
  #{list items:users, as:'user'}
    <li>${user.name}</li>
  #{/list}
</ul>
... 
```

我希望这会有所帮助。

# ruby - 使用键的值对哈希进行排序

> ID：10236426
> 
> 赞同：3
> 
> 时间：2012-04-19T20:43:17.593
> 
> 标签：ruby

我有一个这样的哈希：

```
a = { 29 => 3, 14 => 6, 13 => 2, 32 => 10 } 
```

我想根据那里的值对这个哈希进行排序，即：3,6,2,10

我可以`a.values.sort`

但它返回一个仅包含排序值的数组。我想对实际的散列进行排序，因此它应该返回一个新的散列（或者理想情况下用排序的散列更新原始散列），其中包含所有相同的键值对但已排序！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T20:50:01.343

这适用于 Ruby 1.9：

```
a = { 29 => 3, 14 => 6, 13 => 2, 32 => 10 }
p Hash[a.sort_by{|k,v| v}]
#=> {13=>2, 29=>3, 14=>6, 32=>10} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:50:58.557

Ruby 中的哈希（1.9 之前）是未排序的。您不能“返回具有相同键值对排序的新哈希”，因为哈希实现根本不会保持条目排序。你有两个选择：

1.  使用 ActiveSupport::OrderedHash 的实例（来自 active_support gem）
2.  使用排序对的数组来执行任何需要排序输入的操作。通过将该数组传递给 Hash 构造函数（Hash.new 或 Hash[]）转换回 Hash

# c++ - 如何知道两个对象是否派生自同一个基类？

> ID：10236428
> 
> 赞同：1
> 
> 时间：2012-04-19T20:43:24.783
> 
> 标签：c++

例如：

```
class Base{...};

class Sub1 : public Base{...};

class Sub2 : public Base{...};

Sub1 s1;
Sub2 s2;

bool is_same_base(void *obj1, void *obj2){
...
}

if(is_same_base(s1,s2){
     printf("Great! S1 and S2 and from same base class!\n");
} 
```

在这种情况下，我不确定知道 obj1 和 obj2 是否派生相同的基类的最佳/快速方法是什么？

一种可能但最慢的方法是一一比较虚拟表条目，如果两个虚拟表中都存在任何函数指针，那么我可以说它们是从同一个基类派生的。这效率不高。

任何意见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:02:06.457

你必须知道基类。在不知道动态转换为什么类型的情况下，您不能使用动态转换。还有[typeid](http://en.wikipedia.org/wiki/Typeid)，但同样，它没有给你基类。

这是我的看法：

1.  为了使用 Sub1 和 Sub2 的实例，您需要包含“Sub1.h”和“Sub2.h”（假设它们没有在同一个文件中声明）。
2.  Sub1.h 和 Sub2.h 需要提及 Sub1 和 Sub2 继承自哪个基类，否则代码将无法编译。

换句话说，没有办法阻止您自己简单地查找公共基类，所以我不明白为什么您首先需要这样做。

编辑：您不能使用 void 指针，因为无论如何您都会丢弃类型信息。你可以做这种事情的唯一方法可能是在编译时，使用模板元编程（我可能错了），但是你的类需要在编写时考虑到这种用途。据我所知，修改原始类代码似乎不是一种选择。

# android - 访问 tabhost 的 JSONObject 或 JSONArray

> ID：10236433
> 
> 赞同：0
> 
> 时间：2012-04-19T20:43:53.223
> 
> 标签：android, json, tabs, arraylist, android-tabhost

我要做的就是拥有一个可以从子选项卡访问的 JSONObject，以便我可以将信息放入其中。

```
 public class Example extends TabActivity{
            private JSONObject testtt = new JSONObject();
        public void writeJSON(String key, String value) throws JSONException {
         testtt.put(key, value);
         }
        public String getJSON(){
            return testtt.toString();
        }
     public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
            setContentView(R.layout.example);
                    //Creating the tabs and everything
                    //Is Here
     }
    } 
```

我有下一个/上一个按钮，而不是在其中一个选项卡中来回导航选项卡：

```
public void onClick(View v) {
 //Pre-alertDialog.setmessage stuff here.
   alertDialog.setMessage(Example.this.getJSON());
// Example.this gives this error: No enclosing instance of the type Example is accessible in scope
} 
```

我已经尝试了很多替代的东西，并且已经到了寻求帮助的地步（对我来说非常罕见）。很明显，我对 android 开发还比较陌生。

编辑：通过类扩展应用程序尝试全局变量时{ ![logcat 已编辑](../Images/f54368c1fd6e65bdcbfd9fc48fdecbdc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:47:30.273

最简单的做法是使用[Application](http://developer.android.com/reference/android/app/Application.html)对象：将 JSON 粘贴到 Application 对象中的共享变量上，然后在其他活动中从那里访问它。

# c++ - QMap 或 QHash 中的 QSet

> ID：10236439
> 
> 赞同：3
> 
> 时间：2012-04-19T20:44:20.210
> 
> 标签：c++, qt, qt4, comparison, qmap

我有`QMap` 并且我想制作`QSet`它的关键，我不能这样做，因为`QSet`没有可比性。例如：

```
QSet<int> intSet;
QMap<QSet<int>, char> charSet;

intSet.insert(1);
intSet.insert(2);
intSet.insert(3);

charSet.insert(intSet, '6'); 
```

有什么办法让它工作吗？如果我继承`QSet`并定义`operator <`我应该如何实现它？即：比较的逻辑应该是什么？

注意：我太在乎性能了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T21:10:50.697

您似乎知道如何使其工作：定义一个`operator<(const QSet<int>&)`函数（我不相信 Qt 要求您将 QSet 子类化以使其工作，我知道 STL 不需要）。

显然，在无序集上实现比较器将很困难。我相信，让它在恒定时间内运行是不可能的。您可以尝试先检查大小，然后将两个内容作为列表进行排序和比较。

但广泛地说：不要这样做。这是一种虐待。当然，您可以将某些东西用作集合的键，而不是可变数据结构。集合中的整数空间是否固定且很小（即始终在 0-1024 范围内或其他范围内）？然后尝试存储在 QByteArray 中的位掩码。ETC...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:46:24.783

你可以像这样制作一个哈希方法

```
uint qHash(const QSet<int>& set) {
  uint seed = 0;

  for(int x : set) {
     seed ^= qHash(x) + 0x9e1559a9 + (seed << 6) + (seed >> 2);
  }
  return seed;
} 
```

那么您的 QMap 将是这样的

```
QMap<uint, char> charSet; 
```

其中 uint 是先前方法的结果。

实际上这种方式并不稳定 100% ，这取决于您的哈希函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:21:55.640

假设您不担心性能（并且如果您使用容器作为密钥，我认为这是一个公平的假设），那么我会做这样的事情。

```
QSet<int> intSet;
intSet << 1 << 2 << 3 << 3 << 4;

QVector<int> intVector;
intVector.reserve(intSet.size());
qCopy(intSet.begin(), intSet.end(), std::back_inserter(intVector)); // QVector doesn't have a std::vector range constructor atm
qSort(intVector);

QHash<QVector<int>, char> charHash;
charHash[intVector] = '6'; 
```

这将是非常缓慢的添加，但查找应该（比较）快。

不过，我建议您想出一个更好的密钥。也许是一个具有固定数量整数的简单类，您只需定义必要的运算符即可将其放入映射/哈希中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T21:39:56.580

似乎您不需要值语义。为什么不使用：

```
QHash<QSet<int> *, char> charSet;
//then to insert a set
charSet.insert(& intSet, '6'); 
```

然而，对于每个集合，只有一个字符对应于一个集合，那么为什么不扩展 QSet 并添加额外的成员呢？

# spotify - Spotify Hello World 应用程序未加载

> ID：10236444
> 
> 赞同：0
> 
> 时间：2012-04-19T20:44:39.113
> 
> 标签：spotify

我正在尝试运行 Spotify Hello World 应用程序（[https://developer.spotify.com/technologies/apps/tutorial/](https://developer.spotify.com/technologies/apps/tutorial/)），当我在 Spotify 中运行该应用程序时，它不会加载任何内容。使用 Inspector，它在 HTML 的头部和正文中没有显示任何内容。我已经一次又一次地验证我的 index.html 文件中确实有一些东西。

我确实有一个开发者帐户，并且我是高级会员。

有人对我有什么建议可以让应用程序正常运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:54:19.623

[已解决] 当我尝试加载我正在输入的应用程序时，我才意识到`spotify:app:Tutorial`它应该是`spotify:app:tutorial`. 它区分大小写，但是当它的大小写错误时，它不会产生任何错误，只是空 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T22:29:49.723

似乎找到了您的应用程序，否则您会收到未找到的错误。以这个速度，我们真的不能说很多。您可能想要包含您的清单和 index.html 文件。此外，如果您更改清单中的某些内容，则必须终止 spotify 并重新启动它才能再次正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:13:00.633

确保 "BundleIdentifier":"tutorial" 在您的 manifest.json 文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T19:59:31.577

使用 linux (Ubuntu 11.10) 教程没有正确启动，直到我使用一致的上限。即我在应用程序目录名称和清单中都更改为“教程”而不是“教程”。不过，$home 中的“Spotify”目录需要 S 大写。然后应用程序使用 uri spotify:app:tutorial 即 ~/Spotify/tutorial/* 正确启动

# java - JPA Criteria Builder 中的 If/Case 语句

> ID：10236445
> 
> 赞同：6
> 
> 时间：2012-04-19T20:44:39.260
> 
> 标签：java, jpa, jpa-2.0, criteria-api

我想建立一个在不同实体上搜索日期的查询。我的结构是：

*   合同有日期（不可为空）
*   员工有日期（不可为空）
*   员工可能有一个合同 ID（可为空）

如果员工有合同，我想检索合同日期。如果员工没有合同，那么我想返回员工日期。

到目前为止，我的代码是：

```
if (inputDate!= null) {
    ParameterExpression<Date> exp = criteriaBuilder.parameter(Date.class, "inputDate");
    criteria.add(criteriaBuilder.or(
        criteriaBuilder.isNull(employee.get("contract")),
        criteriaBuilder.lessThanOrEqualTo(employee.<Date>get("creationDate"), exp),   criteriaBuilder.lessThanOrEqualTo((employee.join("contract").<Date>get("fromDate")), exp) ));} 
```

这似乎不起作用。我似乎总是进入我没想到的 isNull 。

我很高兴对此进行更多研究，但我想我的问题是这是否是正确的处理方式。是吗？我在标准构建器中也看到了一个 selectCase，所以也许这可能是一个更好的解决方案。

任何指针都会受到极大的欢迎。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T08:50:37.483

这将是一个解决方案，不确定它是否有效，但我们将在您的帮助下设法让它工作:)：

```
ParameterExpression<Date> inputDateExp = criteriaBuilder.parameter(Date.class, "inputDate");
Predicate employeeCreationDate = criteriaBuilder.lessThanOrEqualTo(
        employee.<Date>get("creationDate"), inputDateExp);
Predicate contractStartDate = criteriaBuilder.lessThanOrEqualTo(
        employee.join("contract").<Date>get("fromDate"), inputDateExp);

criteria.add(
        criteriaBuilder.selectCase().when(employee.get("contract").isNull(), employeeCreationDate).otherwise(contractStartDate)); 
```

我不明白为什么使用“inputDate”作为表达式而不是日期？另外，我建议重命名`criteria`为`c`和`criteriaBuilder`，`cb`这样可以节省空间，我认为它更舒适。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-29T16:06:29.347

我认为你想要做的是使用`Case<Date>`，并且`Predicate`仅作为第一个参数使用`Case#when`。 `Case<Date>`是一个`Expression<Date>`，这是你想要传递到`CriteriaQuery#multiselect`的。

```
CriteriaQuery<Employee> query = criteriaBuilder.createQuery(Employee.class);
Root<Employee> employee = query.from(Employee.class);
query.multiselect
(
    criteriaBuilder.selectCase()
        .when(criteriaBuilder.isNull(employee.get("contract")), employee.get("creationDate"))
        .otherwise(employee.join("contract").get("fromDate"))
); 
```

# android - 内部类中的最终变量问题

> ID：10236446
> 
> 赞同：1
> 
> 时间：2012-04-19T20:44:41.120
> 
> 标签：android, null

你能告诉我这里有什么错误吗？它告诉我吐司制作中的“性别”必须设置为最终但当我这样做时，if语句抱怨它不应该是最终的

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    String gender = null;

    Toast.makeText(this, R.string.ok, Toast.LENGTH_LONG).show();
super.onCreate(savedInstanceState);
setContentView(R.layout.createprofile);

    RadioButton rb_male = (RadioButton) findViewById(R.id.maleradiobutton);
String   male=rb_male.getText().toString();

    RadioButton rb_female = (RadioButton) findViewById(R.id.femaleradiobutton);
    String female=rb_male.getText().toString();

    if(rb_male.isChecked()) { gender = "male";}
    if(rb_female.isChecked()){ gender = "female";}

    Button checkgender = (Button) findViewById(R.id.gendercheck);
    checkgender.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            Toast.makeText(ProfileActivity.this, gender.toString(), Toast.LENGTH_LONG);
        }
    });

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:49:54.610

您不能从内部类访问局部非最终变量。一种简单的解决方法是在设置性别的初始值后采用另一个最终变量。这样做：

```
if(rb_male.isChecked()) { gender = "male";}
if(rb_female.isChecked()){ gender = "female";}
final String finalGender = gender; 
```

然后

```
Toast.makeText(ProfileActivity.this, finalGender.toString(), Toast.LENGTH_LONG).show(); 
```

还有其他方法可以做到这一点，但这是最快的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:47:03.207

错误是：

```
Toast.makeText(ProfileActivity.this, gender.toString(), Toast.LENGTH_LONG); 
```

应该

```
Toast.makeText(v.getContext(), gender.toString(), Toast.LENGTH_LONG).show(); 
```

您还可以将性别设置为类范围变量，以便您可以使用 setter/getter 访问它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T20:47:35.883

您在 onclick toast 中缺少 .show() ：

```
 public void onClick(View v) {

                    Toast.makeText(ProfileActivity.this, gender.toString(), 
Toast.LENGTH_LONG).show();
                }
            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T00:53:28.207

您那里有太多错误，无法真正完全解决。它们包括：

1.  您将按钮中的文本抓取到变量中，然后写出文字字符串“男性”和“女性”。
2.  您从男性按钮抓取文本两次，而不是女性按钮。
3.  在类中声明你的变量，而不是在 onCreate 方法中，它们会表现得更好，不会有关于最终等的问题。
4.  检查男性和女性按钮的`if`语句必须在 onClick(v) 方法中。如果它们在外面，那么单击不会导致它们被重新评估，并且无论更改多少按钮都不会改变您获得的结果。
5.  `gender`已经是一个字符串，`gender.toString()`没有任何改变。
6.  RadioButton 并没有真正做你想做的事，你可能想要 ToggleButton。
7.  您可能想加入一些逻辑，以便一次只能检查一个按钮男性或女性。他们每个人都需要一个 OnClickListener 来执行此操作。

说了这么多，这里的代码做了很多改动，可能还有一些其他的东西清理了一下。

祝你好运！

公共类 AndroidTest 扩展 Activity {

```
 String gender = null;
   RadioButton rb_male;
   RadioButton rb_female;
   Button checkgender;

   @Override
   protected void onCreate(Bundle savedInstanceState) {

       Toast.makeText(this, "OK", Toast.LENGTH_LONG).show();
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       rb_male = (RadioButton) findViewById(R.id.maleradiobutton);
       rb_female = (RadioButton) findViewById(R.id.femaleradiobutton);

       checkgender = (Button) findViewById(R.id.gendercheck);
       checkgender.setOnClickListener(new View.OnClickListener() {

           public void onClick(View v) {
               if (rb_male.isChecked()) {
                   gender = "male";
               }
               if (rb_female.isChecked()) {
                   gender = "female";
               }
               Toast.makeText(AndroidTest.this, (CharSequence) gender, Toast.LENGTH_LONG).show();
           }
       });
   } 
```

}

# javascript - Javascript 多正则表达式模式

> ID：10236447
> 
> 赞同：0
> 
> 时间：2012-04-19T20:44:42.147
> 
> 标签：javascript, regex

我试图从查看站点中的某些徽标和链接中排除一些内部 IP 地址和一些内部 IP 地址格式。我有多个 IP 地址范围（示例如下）。是否可以使用javascript编写一个可以匹配下面列表中所有IP地址的正则表达式？

```
10.X.X.X
12.122.X.X
12.211.X.X
64.X.X.X
64.23.X.X
74.23.211.92
and 10 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T21:30:13.270

引用句点，将 X 替换为`\d+`，然后用管道将它们全部连接在一起：

```
const allowedIPpatterns = [ 
  "10.X.X.X", 
  "12.122.X.X",
  "12.211.X.X",
  "64.X.X.X",
  "64.23.X.X",
  "74.23.211.92"   //, etc.
];

const allowedRegexStr = '^(?:' + 
  allowedIPpatterns.
    join('|').
    replace(/\./g, '\\.').
    replace(/X/g, '\\d+') + 
  ')$';

 const allowedRegexp = new RegExp(allowedRegexStr); 
```

然后你就准备好了：

```
 '10.1.2.3'.match(allowedRegexp) // => ['10.1.2.3']
 '100.1.2.3'.match(allowedRegexp) // => null 
```

这个怎么运作：

首先，我们必须将各个 IP 模式转换为符合其意图的正则表达式。“'12.122.XX' 形式的所有 IP”的一个正则表达式是这样的：

`^12\.122\.\d+\.\d+$`

*   `^`表示匹配必须从字符串的开头开始；否则，112.122.XX IP 也会匹配。
*   `12`等：数字匹配自己
*   `\.`: 正则表达式中的句点完全匹配任何字符；我们想要文字句点，所以我们在前面放了一个反斜杠。
*   `\d`: 的简写`[0-9]`; 匹配任何数字。
*   `+`: 表示“1 个或多个” - 在这种情况下，1 个或多个数字。
*   `$`: 与 类似`^`，这意味着匹配必须在字符串的末尾结束。

因此，我们将 IP 模式转换为这样的正则表达式。对于单个模式，您可以使用如下代码：

```
const regexStr = `^` + ipXpattern. 
  replace(/\./g, '\\.').
  replace(/X/g, '\\d+') + 
  `$`; 
```

它只是将所有`.`s替换为`\.`and `X`s 并将and`\d+`粘贴在末端。`^``$`

（注意加倍的反斜杠；字符串解析和正则表达式解析都使用反斜杠，所以无论我们想要一个字面量使其通过字符串解析器到达正则表达式解析器，我们都必须将它加倍。）

在正则表达式中，*替换* `this|that`匹配任何匹配`this`或的内容`that`。因此，如果我们将列表转换为表单的单个正则表达式，我们可以一次检查所有 IP 的匹配项`re1|re2|re3|...|relast`。

然后我们可以进行一些重构以使正则表达式匹配器的工作更容易；在这种情况下，由于所有正则表达式都将具有`^...$`，我们可以将这些约束从单个正则表达式中移出并将它们放在整个事物上：`^(10\.\d+\.\d+\.\d+|12\.122\.\d+\.\d+|...)$`. 括号使 the`^`不会成为第一个模式的一部分，也`$`不会成为最后一个模式的一部分。但是由于普通括号捕获以及分组，并且我们不需要捕获任何内容，因此我将它们替换为非分组版本`(?:`......`)`

在这种情况下，我们可以在巨型字符串上进行一次全局搜索和替换，而不是在每个模式上单独进行。所以结果就是上面的代码：

```
const allowedRegexStr = '^(?:' + 
  allowedIPpatterns.
    join('|').
    replace(/\./g, '\\.').
    replace(/X/g, '\\d+') + 
  ')$'; 
```

那仍然只是一个字符串；我们必须把它变成一个实际的`RegExp`对象来进行匹配：

```
const allowedRegexp = new RegExp(allowedRegexStr); 
```

正如所写，这不会过滤掉非法 IP - 例如，`10.1234.5678.9012`将匹配第一个模式。如果要将单个字节值限制在 0-255 的十进制范围内，可以使用比 更复杂的正则表达式`\d+`，如下所示：

```
(?:\d{1,2}|1\d{2}|2[0-4]\d|25[0-5]) 
```

匹配“任何一位或两位数字，或‘1’后跟任意两位数字，或‘2’后跟‘0’到‘4’中的任何一个，后跟任意数字，或‘25’后跟任意‘0’通过'5'”。`\d`将完整的字符串转换表达式替换为：

```
const allowedRegexStr = '^(?:' + 
  allowedIPpatterns.
    join('|').
    replace(/\./g, '\\.').
    replace(/X/g, '(?:\\d{1,2}|1\\d{2}|2[0-4]\\d|25[0-5])') + 
  ')$'; 
```

并使实际的正则表达式看起来更加笨拙：

```
^(?:10\.(?:\d{1,2}|1\d{2}|2[0-4]\d|25[0-5])\.(?:\d{1,2}|1\d{2}|2[0-4]\d|25[0-5]).(?:\d{1,2}|1\d{2}|2[0-4]\d|25[0-5])|12\.122\.... 
```

但你不必看它，只需对它进行匹配即可。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:19:54.683

你可以在正则表达式中做到这一点，但它不会很漂亮，特别是因为 JavaScript 甚至不支持冗长的正则表达式，这意味着它必须是一个巨大的正则表达式行，没有任何注释。此外，正则表达式不适合匹配数字范围。我怀疑有更好的工具来处理这个问题。

好吧，好的，这里（对于您提供的示例）：

```
var myregexp = /\b(?:74\.23\.211\.92|(?:12\.(?:122|211)|64\.23)\.(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])|(?:10|64)\.(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9]))\b/g; 
```

作为一个冗长（“可读”）的正则表达式：

```
\b                 # start of number
(?:                # Either match...
 74\.23\.211\.92   # an explicit address
|                  # or
 (?:               # an address that starts with
  12\.(?:122|211)  # 12.122 or 12.211
 |                 # or
  64\.23           # 64.23
 )
 \.                # . 
 (?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.  # followed by 0..255 and a dot
 (?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])    # followed by 0..255
|                  # or
 (?:10|64)         # match 10 or 64
 \.                # . 
 (?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.  # followed by 0..255 and a dot
 (?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.  # followed by 0..255 and a dot
 (?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])    # followed by 0..255
)
\b                 # end of number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T22:16:51.167

我不完全确定您要在这里实现什么（看起来也不是其他人）。

但是，如果是验证，那么这里有一个验证不使用 RegEx 的 IP 地址的解决方案。首先，在点处拆分输入字符串。然后在数字上使用 parseInt，确保它不高于 255。

```
function ipValidator(ipAddress) {
var ipSegments = ipAddress.split('.');
for(var i=0;i<ipSegments.length;i++)
    {
        if(parseInt(ipSegments[i]) > 255){
            return 'fail';
        }
    }
return 'match';
} 
```

运行以下返回“匹配”：

```
document.write(ipValidator('10.255.255.125')); 
```

而这将返回“失败”：

```
document.write(ipValidator('10.255.256.125')); 
```

这是一个带有一些示例的 jsfiddle 中的注释版本，[http://jsfiddle.net/VGp2p/2/](http://jsfiddle.net/VGp2p/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:49:02.710

`/^(X|\d{1,3})(\.(X|\d{1,3})){3}$/`应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T21:04:24.197

如果您实际上不需要匹配“X”字符，则可以使用：

```
\b(?:\d{1,3}\.){3}\d{1,3}\b 
```

否则我会使用 cebarrett 提供的解决方案。

# php - PHP GD 透明度不适用于 iPhone

> ID：10236449
> 
> 赞同：0
> 
> 时间：2012-04-19T20:44:45.363
> 
> 标签：php, iphone, image, gd

我正在使用代码使用 PHP GD 创建需要完全透明背景的图像。当我创建它时，它在浏览器中显示正常，但在我的 iPhone 应用程序中显示不好。我不知道为什么，但在我的 iPhone 中，它以黑色显示所有透明度。这似乎是一个 GD 问题，因为当我将 GD 图像加载到 Web 编辑器并重新导出时，它在我的 iPhone 应用程序中显示良好。有没有一种特殊的方法我应该从 GD 或其他东西导出 png 图像，或者这是某种错误？这是代码：

```
$filename = "./me.jpg";

$image_s = imagecreatefromjpeg($filename);

list($current_width, $current_height) = getimagesize($filename);

$left = isset($_GET['pl']) ? abs($_GET['pl']) : 0;
$top = isset($_GET['pt']) ? abs($_GET['pt']) : 0;

$width = isset($_GET['cs']) ? abs($_GET['cs']) : 65;
$height = isset($_GET['cs']) ? abs($_GET['cs']) : 65;

$canvas = imagecreatetruecolor($width, $height);
$current_image = imagecreatefromjpeg($filename);
imagecopy($canvas, $current_image, 0, 0, $left, $top, $current_width, $current_height);

$newwidth = 65;
$newheight = 65;

$image = imagecreatetruecolor($newwidth, $newheight);
imagealphablending($image, true);
imagecopyresampled($image, $canvas, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);

$mask = imagecreatetruecolor($newwidth, $newheight);

$transparent = imagecolorallocate($mask, 255, 255, 255);
imagecolortransparent($mask, $transparent);

imagefilledellipse($mask, $newwidth / 2, $newheight / 2, $newwidth, $newheight, $transparent);

$red = imagecolorallocate($mask, 0, 0, 0);
imagecopymerge($image, $mask, 0, 0, 0, 0, $newwidth + 10, $newheight + 10, 100);
imagecolortransparent($image, $red);
imagefill($image,0,0, $red);

header('Content-type: image/png');
imagepng($image);
imagedestroy($image);
imagedestroy($mask); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:54:35.667

您是否尝试过使用 imagesavealpha 而不是 imagesettransparency？将 alpha blending 设置为 false，然后将 imagesavealpha 设置为 true。最后，您将调用 imagecolorallocatealpha 函数来获取您的透明/alpha 颜色，而不是 imagesettransparency：

```
imagealphablending($image, false);
imagesavealpha($image, true);

$transparent = imagecolorallocatealpha($image, 255, 255, 255, 127);

imagefilledellipse($mask, $newwidth / 2, $newheight / 2, $newwidth, $newheight, $transparent);
etc... 
```

# google-maps - GMaps API：通过纬度/经度坐标和地址搜索地图

> ID：10236455
> 
> 赞同：0
> 
> 时间：2012-04-19T20:45:04.923
> 
> 标签：google-maps, google-maps-api-3

我一直在使用 Google Maps API 中的 Geocoder 服务来为我的地图上的搜索框提供动力。我希望允许用户按地址、城市和坐标以及可能支持的任何其他内容自由搜索。直到最近，如果我将纬度/经度坐标传递给地理编码器，它只会返回这些特定坐标的结果，但最近它已更改为进行反向查找并为我提供离坐标最近的地址。我实际上想要直接在坐标上的位置，因为这是最相关的。

任何想法如何从搜索框中解析出各种输入形式的坐标或让地理编码器恢复其早期行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:03:35.310

您不能只使用正则表达式来检查输入的输入是否是 lat/lng 对吗？然后，如果它解析该对并直接导航到坐标。就像是：

```
 var latLngRegex =   /^(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)$/; //Regex for checking that it is a latlng pair that has been entered

  var address = document.getElementById("txt_googlesearch").value;
  if (address=='' || address=='Search') {
    return;
  }
  if (latLngRegex.test(address)) //Run the regex against the entered value
  {
    var coords = address.split(","); //Split the address into 2 decimal values
    var mapPoint = new GLatLng(parseInt(coords[0]), parseInt(coords[1]));  //Create a gLatLng from the split values
    map.setCenter(mapPoint); //Move the map to the entered location
    return;
  } 
  //Call Geocoder as before 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:18:04.510

我不确定为什么它会更改为显示反向地理编码，而没有看到代码。但是，我建议改用 Places API 库的[自动完成功能](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)。

# sinatra - 如何使用 Sinatra 或 Padrino 从 HAML 自动生成静态 HTML？

> ID：10236456
> 
> 赞同：0
> 
> 时间：2012-04-19T20:45:05.313
> 
> 标签：sinatra, rendering, haml, padrino

我想使用`nginx`. 然后，我将使用`jQuery`来自 Padrino 服务器的 AJAX 调用来更新 DIV、SPAN 等。

我喜欢在 HAML 中创建我的网页，因为它更容易，但在生产中，我不想提供 HAML 模板。只是原始的，以 nginx 的速度编写的 HTML。

是否有捷径可寻？

理想的服务是自动将 HAML、partials 等渲染到 ​​nginx 可以服务的公共文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:44:59.140

简单的，

将 padrino-cache 添加到您的应用程序

```
class SimpleApp < Padrino::Application
  register Padrino::Cache
  enable :caching

  get '/foo', :cache => true do
   expires_in 30 # expire cached version at least every 30 seconds
   'Hello world'
  end
end 
```

然后保存在您想提供的任何地方：

```
set :cache, Padrino::Cache::Store::File.new(Padrino.root('public')) 
```

你可以在这里阅读更多：http: [//www.padrinorb.com/guides/padrino-cache](http://www.padrinorb.com/guides/padrino-cache)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:27:49.320

我首先想到的是[Jekyll](https://github.com/mojombo/jekyll)。无论如何，我认为它只是一个问题或优化，所以如果你已经有一个 Sinatra，你可以从在每个请求上渲染 HAML 开始，而不是添加缓存。

# excel - 分组和偏移

> ID：10236457
> 
> 赞同：-1
> 
> 时间：2012-04-19T20:45:06.577
> 
> 标签：excel, excel-2007

我希望能够通过匹配前 n 个字符来对列中的多个值进行分组，其中 n 是 lengh-2

因此，对于 123456，长度为 6，因此尝试在上面的单元格中查找前 4 个字符的匹配项。

下面的示例显示`A`带有值列表的列，该列`B`是我想要的结果。

希望这是有道理的..

```
A           B
RTL1162 | 
123456  | 
RTL2051 | RTL2051
RTL2052 | RTL2051
RTL2050 | RTL2051
121213  | 
RTL9051 | RTL9051
RTL9052 | RTL9051
RTL9050 | RTL9051 
```

我试图使用 OFFSET 来实现这一点，但结果是它只查看上面的 1 行，我希望它将它们全部分组，直到它与前 n 个字符不匹配。

```
=IF(LEFT(A1, LEN(A1)-2)= (LEFT(OFFSET(A1, -1,0,1,1), LEN(Sheet1!A1)-2)), A1, A2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:00:59.217

如果您的数据列表在 colA 中（从**A2**向下），您可以在 B2 中输入并向下拖动以填充

```
=IF(LEFT(A2,LEN(A2)-2)=LEFT(A1,LEN(A1)-2),B1,A2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:59:44.140

在`B1`输入：

```
=A1 
```

在`B2`输入：

```
=IF(LEFT(A2,LEN(A2)-2)=LEFT(B1,LEN(A2)-2),B1,A2) 
```

填写下来。

# python - 使用 Python re 搜索多个项目

> ID：10236463
> 
> 赞同：0
> 
> 时间：2012-04-19T20:45:29.060
> 
> 标签：python, regex

我正在尝试从 txt 文件中提取小时、分钟、秒和毫秒，它们可能出现在一行中，也可能不存在。格式为“hh:mm:ss.ms”。我知道我应该这样

```
int(re.search('(\d+):(\d+):(\d+).(\d+)', current_line).group(1)) 
```

但我不知道如何将这四个值返回给四个不同的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:49:19.573

您可以调用[`groups`](http://docs.python.org/library/re.html#re.MatchObject.groups)匹配对象来获取组元组，如下所示：

```
match = re.search('(\d+):(\d+):(\d+).(\d+)', current_line)
hour,minute,second,ms = map(int, match.groups()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:49:13.230

好吧，如果你坚持用一行来做：

```
hrs, min, sec, msec = (int(group) for group in re.search('(\d+):(\d+):(\d+).(\d+)', current_line).groups()) 
```

# asp.net - 将 redis 与 SQL 服务器一起使用

> ID：10236464
> 
> 赞同：1
> 
> 时间：2012-04-19T20:45:29.357
> 
> 标签：asp.net, redis

我正在开发一个 Web 应用程序，并遇到了用于存储键值的 redis。我确实有一个关系数据库 SQL 服务器。但由于我有一个多租户系统，每个客户都会有单独的模式。

我在想同时使用 redis 和 SQL 服务器有多可行？我正在考虑存储用户 ID 和模式，以便可以为该用户连接到 SQL 服务器数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:49:39.260

同时使用 Redis 和 SQL Server 是完全可行的。

有了更多关于您期望的架构差异类型的详细信息，我们或许能够提供更多洞察力。

# view - ember js 子视图和 didinsertelement 事件

> ID：10236467
> 
> 赞同：2
> 
> 时间：2012-04-19T20:45:40.133
> 
> 标签：view, ember.js

我正在写一个`Ember.View`，它将树结构变成一个菜单。为此我需要递归，所以我在视图模板中使用的是`{{view}}`帮助器，它递归地调用自身来构建嵌套`<ul><li>`结构。

我需要的是一个钩子来调用一些 jQuery 插件来把这个结构变成菜单。当我从`didInsertElement`事件中调用插件时，子视图尚未呈现。当所有子视图都完成渲染后，如何运行代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:17:49.153

尝试在 Ember.run.next() 中调用插件，它应该在当前运行循环完成后调用它......我相信在创建所有子视图之前不会发生。

文档-> [http://docs.emberjs.com/symbols/Ember.run.html](http://docs.emberjs.com/symbols/Ember.run.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:50:06.197

这可能对您的情况有所帮助，我[制作了一个车把助手](https://stackoverflow.com/questions/13760733/ember-js-using-a-handlebars-helper-to-detect-that-a-subview-has-rendered/13857859#13857859)，它会告诉您何时呈现子部分。默认情况下，它会向您的视图对象发送一个事件，因此您的每个实例化视图都会在渲染时收到一个事件。

# php - PHP 将数组转换为对象

> ID：10236468
> 
> 赞同：6
> 
> 时间：2012-04-19T20:45:40.493
> 
> 标签：php, casting

> **可能的重复：**
> [将带有数字键的数组封装为对象](https://stackoverflow.com/questions/1869812/casing-an-array-with-numeric-keys-as-an-object)

我做了从数组到对象的转换，我很困惑：

```
$arr = range(1,3);
$obj = (object) $arr;
var_dump($obj)

object(stdClass)#2 (5) {
  [0]=>
    int(1)
  [1]=>
    int(2)
  [2]=>
    int(3)
} 
```

问题是：在这种情况下如何访问对象属性？`$obj->0`导致语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:56:56.817

除非您转换回数组，否则您无法访问这些对象属性。时期。如果出于某种原因必须这样做，请将数组键设置为其他值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:52:53.613

在这种情况下，我唯一能想到的是使用`foreach`这样的访问属性：

```
foreach($obj as $key => $value)
   var_dump("$key => $value"); 
```

但这当然不能解决基本问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T21:00:44.100

看来 ArrayObject 类可以访问属性

```
$a = new ArrayObject($obj);
echo $a[0]; 
```

# ios - 片段着色器计算坐标是否在给定的一组点内

> ID：10236470
> 
> 赞同：0
> 
> 时间：2012-04-19T20:45:48.713
> 
> 标签：ios, opengl-es-2.0

我想知道如果片段着色器的给定坐标落在指定的正方形内，您将如何计算。有什么功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:13:53.160

GL_SCISSOR 成功了！谢谢您的帮助！

# wpf - System.BadImageFormatException 与 Sqlite

> ID：10236475
> 
> 赞同：3
> 
> 时间：2012-04-19T20:46:10.163
> 
> 标签：wpf, sqlite

我正在尝试将 SQLite 与我的 WPF 应用程序一起使用。我可以让读写正常工作。我唯一的问题是我的 xaml 没有显示并且我收到以下错误：

System.BadImageFormatException 无法加载文件或程序集“System.Data.SQLite, Version=1.0.80.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139”或其依赖项之一。试图加载格式不正确的程序。

我的问题：-我怎么知道我使用的是什么版本的 SQLite？32位还是64位？-我尝试将平台目标更改为 x86 和 x64，但都没有帮助。如何解决此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:48:46.193

使用 64 位预编译的二进制文件时有同样的问题。解决方案是改用 32 位的（如果需要，可以从 SQLite 站点手动下载）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T11:35:12.100

当 64 位程序集由 32 位应用程序打开时，通常会发生 System.BadImageFormatException 错误，反之亦然。在这种情况下，Visual Studio 是一个 32 位应用程序，而设计视图正在尝试加载一个 64 位程序集。Visual Studio 程序集位于项目引用树中。右键单击您的项目并选择属性项。在 Build 选项卡中，将平台目标更改为 Any CPU。

# node.js - 返回的对象未定义，使用 dynamicHelpers

> ID：10236476
> 
> 赞同：2
> 
> 时间：2012-04-19T20:46:12.537
> 
> 标签：node.js, express, mongoose, pug

我创建了一个处理动态帮助程序的外部文件，其中包括一堆我希望能够从我的所有视图中使用的函数。

在这些功能中，我正在运行一个查询并从数据库中获取标签，我想在我的 layout.jade 文件中使用这些标签（所有其他视图都在使用）。在控制台中，一切似乎都很好。查询返回标签对象，但由于某种奇怪的原因，我无法将对象返回到视图，这给了我一条错误消息，告诉我“标签”未定义”。

这是我的文件 dynamicHelpers.js 中的代码：

```
exports.tags = function(req, res){
    var environment = require('../environment');
    var service = require('../service');
        service.init(environment);

    var model = service.useModel('tag');

    var query = model.Tag.find({});
    query.exec(function (err, tags) {
        if (err) {
            console.log(err);
            // do something
        }
        console.log(tags);
        return tags;
    });
} 
```

在 layout.jade 我以这种方式获取对象（这显示未定义）：

```
p
    #{tags} 
```

我真正想做的是用'each'遍历所有标签。因此，后续问题是是否允许并且可能（如果“标签”未定义）？

```
ul.tags
    each tag in #{tags}
        a(href='/tag/' + tag._id.toHexString())
            li.tag= tag.name 
```

**更新：** 我已经尝试过@Linus G Thiel 的解决方案（见下文），但无法使其工作（res.tags 未定义）。使用中间件中的 console.log(tags)，它会打印出对象。但是，在下面的 dynamicHelper 函数中，它是未定义的。似乎 res.tags 由于某种原因没有传递给 dynamicHelper 。

动态助手.js：

```
exports.tags = function(req, res) {
    console.log(req.tags); <--- undefined
    return req.tags;
}; 
```

配置.js：

```
module.exports = function(app, express, next){
    app.configure(function() {
        // lots of more app.use functions (eg. express.cookieParser());)
        // ...

        app.use(function(req, res, next) {
            var environment = require('./environment');
            var service = require('./service');
                service.init(environment);

            var model = service.useModel('tag');

            var query = model.Tag.find({});
            query.exec(function (err, tags) {
                if (err) {
                    return next(err);
                }
                req.tags = tags;
                next();
            console.log(req.tags); <--- works fine
            });
        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:25:43.837

正如@Exploit[在他的评论](https://stackoverflow.com/questions/10236476/returned-object-is-undefined-using-dynamichelpers#comment13166293_10238704)中所说，您的`tags`函数对 进行异步调用`query.exec`，这将在您的`tags`函数返回后完成。Express'`helpers`并且`dynamicHelpers`不能是异步的，因此您需要以某种方式对其进行重构。一种方法是将它放在`req`早期的中间件或路由中，然后有一个简单`dynamicHelper`的返回：

动态助手.js：

```
exports.tags = function(req, res) {
    return req.tags;
}; 
```

中间件（您可能不想对所有路由都这样做，您可以查看例如[Route specific middleware](http://expressjs.com/guide.html#route-middleware)或[Route param pre-conditions](http://expressjs.com/guide.html#route-param%20pre-conditions)）：

```
app.use(function(req, res, next) {
    var environment = require('../environment');
    var service = require('../service');
        service.init(environment);

    var model = service.useModel('tag');

    var query = model.Tag.find({});
    query.exec(function (err, tags) {
        if (err) {
            return next(err);
        }
        req.tags = tags;
        next();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T00:28:25.770

这有点脏，但您可以这样做以等待设置标签。不过，Linus G Thiel 提供的解决方案更好，因为这会阻止您的应用程序。

```
tags: function(req, res) {
    var environment = require('../environment');
    var service = require('../service');
    service.init(environment);

    var model = service.useModel('tag');
    var query = model.Tag.find({});
    var _tags = false;

    query.exec(function (err, tags) {
        if (err) {
            console.log(err);
            // do something
        }

        console.log(tags);
        _tags = tags;
    });

    while(_tags == false);

    return _tags;
} 
```

你试过这样吗？

```
exports = function(app) {
    app.dynamicHelpers({
        tags: function(req, res) {
            var environment = require('../environment');
            var service = require('../service');
            service.init(environment);

            var model = service.useModel('tag');

            var query = model.Tag.find({});
            query.exec(function (err, tags) {
            if (err) {
                console.log(err);
                // do something
            }
            console.log(tags);
            return tags;
            });
        }
    });
}

require("helpers")(app); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T07:33:01.413

您需要在其他路由**之前定义中间件**

```
module.exports = function(app, express, next){
    app.configure(function() {

        app.use(function(req, res, next) {
            var environment = require('./environment');
            var service = require('./service');
                service.init(environment);

            var model = service.useModel('tag');

            var query = model.Tag.find({});
            query.exec(function (err, tags) {
                if (err) {
                    return next(err);
                }
                req.tags = tags;
                next();
            console.log(req.tags); <--- works fine
            });
        });

        // lots of more app.use functions (eg. express.cookieParser());)
        // ...

    });
}; 
```

# iis - PUT + DELETE Http Verbs 从共享托管网络服务器上的 API 返回 401/405

> ID：10236477
> 
> 赞同：3
> 
> 时间：2012-04-19T20:46:24.593
> 
> 标签：iis, asp.net-mvc-4, asp.net-web-api

我为一些大学课程创建了一个 MVC Web Api，它在我的开发机器上按预期工作（运行 VS11）。

但是，当我将应用程序部署到[123reg](http://www.123-reg.co.uk/) HttpVerbs 上的网络服务器时，GET 和 POST 似乎根本没有到达我的应用程序，最初返回了 401 Not Authorized 响应；[但是，在按照此处](http://blogs.microsoft.co.il/blogs/roadan/archive/2012/02/21/asp-net-web-api-fun-with-verbs.aspx)的建议关闭“WebDAV”模块后，这些 401 变为 405 Method not allowed。在这种情况下，我只禁用了处理程序，因为同时禁用了处理程序和模块意味着我的应用程序根本没有启动（没有堆栈跟踪的错误 500 [自定义错误已关闭]）。

我计划利用表单成员资格提供程序向我的 API 添加身份验证功能，但是`[Authorise]`当 401 开始出现时，我从代码中删除了所有属性。

123Reg 共享主机上的应用程序在中等信任下运行。

我一直在联系 123Reg 支持，他们提供了一些帮助，但后来决定他们无法进一步帮助我（他们建议添加 HttpHandlers，详情如下）（显然，我应该咨询网页设计师......）

### 我尝试过的事情：

我已将`[AllowAnonymous]`属性添加到我的控制器和/或操作中，但没有任何效果。

我添加了`authorization`web.config 属性，允许所有用户的所有动词和路径都经过身份验证和未经过身份验证：

```
<authorization>
  <allow users="*" />
  <allow users="?" />
  <allow verbs="*" users="*" />
  <allow verbs="*" users="?" />
</authorization> 
```

我已添加（如 123Reg 建议的那样）：

```
 <system.webServer>
    <handlers>
      <remove name="WebDAV" />
      <add name="PUTVerbHandler" path="*" verb="PUT" modules="ProtocolSupportModule" resourceType="Unspecified" />
      <add name="DELETEVerbHandler" path="*" verb="DELETE" modules="ProtocolSupportModule" resourceType="Unspecified" />
    </handlers>
  </system.webServer> 
```

这似乎是向前迈出的一步，因为我们现在收到 405 个响应而不是 401 个响应，但是我现在无法取得任何进一步的进展。此外，我还添加了：

```
<httpHandlers>
    <add verb="*" path="*" type="System.Web.Mvc.MvcHttpHandler"/>
</httpHandlers> 
```

这也没什么区别。

您可以提供的任何帮助将不胜感激（我真的不想为此应用程序移动主机！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-03T19:05:02.760

[这篇文章](http://forums.iis.net/post/1948512.aspx)解决了我的问题。我做了所有常规的事情：添加了所有必要的`<handlers>`条目，禁用了 WebDAV，但我仍然有 401.3 Unauthorized。

启用表单身份验证解决了问题：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms" />
</system.web> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:26:53.390

我发现了这个：[http ://forums.iis.net/t/1163441.aspx](http://forums.iis.net/t/1163441.aspx)

从该论坛帖子的外观来看，您需要完全卸载 WebDAV 才能使 PUT 和 DELETE 动词正常工作。不幸的是，这对共享虚拟主机方案没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T11:24:35.097

对我来说，这是不同的东西。我必须转到站点文件夹，打开文件夹的安全选项卡，按编辑按钮更改组或用户名权限，从我的 IIS 8 站点中找到该站点并授予它完全控制权限。

# c# - 为什么类型推断在此代码中不起作用？

> ID：10236479
> 
> 赞同：7
> 
> 时间：2012-04-19T20:46:31.400
> 
> 标签：c#, generics, c#-4.0, type-inference

假设我有一个如下所示的服务接口：

```
public interface IFooService
{
    FooResponse Foo(FooRequest request);
} 
```

在调用此类服务​​的方法时，我想解决一些横切关注点；例如，我想要统一的请求日志记录、性能日志记录和错误处理。我的方法是拥有一个通用的基础“存储库”类，其中包含一个`Invoke`方法，该方法负责调用该方法并围绕它做其他事情。我的基类看起来像这样：

```
public class RepositoryBase<TService>
{
    private Func<TService> serviceFactory;

    public RepositoryBase(Func<TService> serviceFactory)
    {
        this.serviceFactory = serviceFactory;
    }

    public TResponse Invoke<TRequest, TResponse>(
        Func<TService, Func<TRequest, TResponse>> methodExpr,
        TRequest request)
    {
        // Do cross-cutting code

        var service = this.serviceFactory();
        var method = methodExpr(service);
        return method(request);
    }
} 
```

这工作正常。但是，类型推断未按预期工作这一事实阻碍了我使代码更清晰的整个目标。例如，如果我编写这样的方法：

```
public class FooRepository : BaseRepository<IFooService>
{
    // ...

    public BarResponse CallFoo(...)
    {
        FooRequest request = ...;
        var response = this.Invoke(svc => svc.Foo, request);
        return response;
    }
} 
```

我得到这个编译错误：

> 方法 ... 的类型参数无法从用法中推断出来。尝试明确指定类型参数。

显然，我可以通过将调用更改为：

```
var response = this.Invoke<FooRequest, FooResponse>(svc => svc.Foo, request); 
```

但我想避免这种情况。有没有办法重新编写代码以便我可以利用类型推断？

**编辑：**

我还应该提到，早期的方法是使用扩展方法；对此有效的类型推断：

```
public static class ServiceExtensions
{
    public static TResponse Invoke<TRequest, TResponse>(
        this IService service, 
        Func<TRequest, TResponse> method, 
        TRequest request)
    {
        // Do other stuff
        return method(request);
    }
}

public class Foo
{
    public void SomeMethod()
    {
        IService svc = ...;
        FooRequest request = ...;
        svc.Invoke(svc.Foo, request);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T21:10:05.227

您的问题标题是“为什么类型推断在此代码中不起作用？” 让我们简单地讨论有问题的代码。该场景的核心是：

```
class Bar { }

interface I
{
    int Foo(Bar bar);
}

class C
{
    public static R M<A, R>(A a, Func<I, Func<A, R>> f) 
    { 
        return default(R); 
    }
} 
```

呼叫站点是

```
C.M(new Bar(), s => s.Foo); 
```

我们必须确定两个事实：什么是`A`和`R`？我们必须继续提供哪些信息？那`new Bar()`对应`A`和`s=>s.Foo`对应`Func<I, Func<A, R>>`。

显然，我们可以确定这`A`一定是`Bar`从第一个事实。很明显，我们可以确定`s`一定是`I`。所以我们现在知道`(I s)=>s.Foo`对应于`Func<I, Func<Bar, R>>`。

现在的问题是：我们可以通过在 lambda 的主体中 `R`进行`int`重载解析来推断吗？`s.Foo`

可悲的是，答案是否定的。你和我都可以做出这样的推断，但编译器不能。当我们设计类型推断算法时，我们考虑添加这种“多级” lambda/delegate/method group 推断，但认为它的成本太高而无法带来好处。

对不起，你在这里不走运；通常，在 C# 方法类型推断中不会进行需要“挖掘”多于一层功能抽象的推断。

> 那么，为什么在使用扩展方法时会起作用呢？

因为扩展方法没有多于一层的功能抽象。扩展方法案例为：

```
class C
{
    public static R M<A, R>(I i, A a, Func<A, R> f) { ... }
} 
```

带有呼叫站点

```
I i = whatever;
C.M(i, new Bar(), i.Foo); 
```

现在我们有什么信息？我们推断和以前`A`一样`Bar`。现在我们必须推断出什么`R`是知道`i.Foo`映射到`Func<Bar, R>`。这是一个简单的重载解决问题；我们假装有一个调用`i.Foo(Bar)`并让重载解析完成它的工作。重载解决方案回来并说`i.Foo(Bar)`返回`int`，所以`R`是`int`。

请注意，这种推断（涉及方法组）本来打算添加到 C# 3 中，但我搞砸了，我们没有及时完成。我们最终将这种推断添加到 C# 4。

另请注意，要使这种推断成功，**所有参数类型都必须已经被推断**。我们必须只推断*返回*类型，因为要知道返回类型，我们必须能够进行重载解析，而要进行重载解析，我们必须知道所有参数类型。我们不会做任何诸如“哦，方法组中只有一个方法，所以让我们跳过重载决议，让那个方法自动获胜”之类的废话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:49:51.480

在您最后一次编辑之后，我们看到这`svc.Foo`是一个方法组；这解释了类型推断失败。编译器需要知道类型参数，以便`Foo`为方法组转换选择正确的重载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:55:03.657

为什么不直接调用该方法呢？IE：

```
public class ClassBase<TService>
{
     protected Func<TService> _serviceFactory = null;

     public ClassBase(Func<TService> serviceFactory)
     {
         _serviceFactory = serviceFactory;
     }

     public virtual TResponse Invoke<TResponse>(Func<TService, TResponse> valueFactory)
     {
          // Do Stuff

          TService service = serviceFactory();
          return valueFactory(service);
     }
} 
```

那么理论上你应该能够做到这一点：

```
public class Sample : ClassBase<SomeService>
{
     public Bar CallFoo()
     {
          FooRequest request = ...
          var response = Invoke(svc => svc.Foo(request));
          return new Bar(response);
     }
} 
```

# ios - 我可以在不使用全屏视图的情况下使用 iOS GLKit 吗？

> ID：10236481
> 
> 赞同：7
> 
> 时间：2012-04-19T20:46:37.577
> 
> 标签：ios, opengl-es-2.0, glkit

我使用 GLKit 启动了 Xcode 模板，但我的意图是有一个窗口显示视图的 OpenGL 部分和用于控件的 UIKit。

GLKViewController 带有一个 GLKView。我去了 IB 并删除了 GLKView 并添加了一个 UIView，将一个新的 GLKView 放在我想要的大小的顶部。然后我修复了对 GLKView (self.view) 的引用并将较小的 GLKView 的委托设置为视图控制器。

我有

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[GLKViewController loadView] loaded the "2-view-9XZ-07-hga" nib but didn't get a GLKView.' 
```

然后我查看了文档，发现 GLKViewController 需要 GLKView 作为它的视图。没有惊喜。是的，我对此很陌生。

将 GLKit 与小于全屏的 GLKView 一起使用的好方法是什么？还是混合 UIKit 和 GLKit 还没有完成？

（更新：很多人都在发现这个问题；邓肯的回答，使用视图控制器包含，效果很好。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T22:29:56.787

你可以，但 GLKit 并没有明确说明如何。

问题在于 GLKViewController 的设计使其内容视图是 GLKView，正如您所说。

你有两个选择。

1.  创建一个 GLKView 并将其放入常规视图控制器中。这很好用。

2.  使用 iOS 5 中新的父/子视图控制器支持创建一个以 GLKView 作为其内容的 GLKViewController，并使其成为另一个视图控制器的子视图。

# java - 使用 JNI 访问嵌套类的外部实例

> ID：10236482
> 
> 赞同：3
> 
> 时间：2012-04-19T20:46:44.720
> 
> 标签：java, java-native-interface, inner-classes, nested-class

在 Java 中，我有一个具有本机方法的内部类：

```
public class A {
    class B {
        public native void foo();
    }
} 
```

本机方法在 JNI 中实现：

```
JNIEXPORT void JNICALL A_0024B_foo(JNIEnv* env, jobject b); 
```

显然本机函数可以访问`B.this`; 它作为`b`. 如何访问`A.this`的封闭外部实例`A`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:13:24.947

使用 javap，我很确定答案是`this$0`

```
$ javac A.java
$ javap -s -p 'A$B'
Compiled from "A.java"
class A$B extends java.lang.Object{
final A this$0;
  Signature: LA;
A$B(A);
  Signature: (LA;)V
public native void foo();
  Signature: ()V
} 
```

请注意，如果在 unix 风格的命令行上运行，您需要使用引号来防止 $ 被解释为 shell 变量的开头。

还要注意（如果这出现在其他人的搜索结果中）内部类的构造函数具有外部类的隐式第一个参数 - 所以如果你想从原生构造其中一个，你必须问以这种方式为构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:59:30.527

好吧，如果没有 jni 支持访问 $this 或**实际**调用的任何变量，您可以将 B.this 传递给本机函数。

# php - 在一页中从两个模型中获取数据 - Magento

> ID：10236485
> 
> 赞同：0
> 
> 时间：2012-04-19T20:47:15.433
> 
> 标签：php, magento

有人可以帮我解决以下两个问题吗？

1.  如何在下面的查询中过滤 Websiteid？
2.  是否可以从一个文件中的两个集合中获取数据？最后一个值“公司”应该来自现在被注释掉的客户地址模型。

```
<?php function getcustomers() 
{
  /* Magento's Mage.php path
   * Mage Enabler users may skip these lines
   */
  require_once ("app/Mage.php");
  umask(0);
  Mage::app("nl");
  /* Magento's Mage.php path */

  /* Get customer model, run a query */
  $collection = Mage::getModel('customer/customer')
  //$collection = Mage::getModel('customer/address')
    ->getCollection()
    ->addAttributeToSelect('*');

  $result = array();
  foreach ($collection as $customer) { $result[] = $customer->toArray();  }

  return $result; 
} 
?> 
```

```
<html>
<head>
  <title>Customers</title>
  <style>    table {border-collapse: collapse;} 
  td {padding: 5px;   border:1px              solid             #000000;}
  </style>
</head>
<body>
<table>
<tr>
<td>ID</td>
<td>Lastname</td>
<td>Firstname</td>
<td>Email</td>
<td>Is Active?</td>
<td>Date Created</td>
<td>Date Updated</td>
<td>Website ID</td>
<td>Store ID</td>
<td>Zip Code</td>
</tr>
<?php
   $result = getcustomers();
   if(count($result) > 0)
   {
     foreach($result as $key => $value)
     {
       echo "<tr>";
       echo "<td>".$value['entity_id']."</td>";
       echo "<td>".$value['lastname']."</td>";
       echo "<td>".$value['firstname']."</td>";
       echo "<td>".$value['email']."</td>";
       echo "<td>";
       echo $value['is_active'] == 1 ? "Yes" : "No";
       echo "</td>";
       echo "<td>".$value['created_at']."</td>";
       echo "<td>".$value['updated_at']."</td>";
       echo "<td>".$value['website_id']."</td>";
       echo "<td>".$value['store_id']."</td>";
       echo "<td>".$value['zipcode']."</td>";
       echo "</tr>";
     }
   }
   else
   {
     echo "<tr><td colspan=\"7\">No records found</td></tr>";
   }
   ?>
   </table>
   </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:00:06.640

在这里，也许试试这个？同样，我不确定这是否可行，但我认为它的方向是正确的。

```
<?php 

$collection1 = Mage::getModel('customer/customer')->getCollection();
$collection2 = Mage::getModel('customer/address')->getCollection();

$merged_ids = array_merge($collection1->getAllIds(), $collection2->getAllIds());

$merged_collection = Mage::getResourceModel('customer/customer_collection')
    ->addFieldToFilter('customer_id', $merged_ids)
    ->addAttributeToSelect('*')
    ->addStoreFilter();

?> 
```

# maven - 如何阻止为工件存储库制作的 Eclipse 的本地发布

> ID：10236489
> 
> 赞同：0
> 
> 时间：2012-04-19T20:47:27.397
> 
> 标签：maven, jenkins, maven-3, maven-release-plugin, artifactory

我正在使用 Maven 3、eclipse Helios 和 Jenkins e Artifactory。在发布插件执行期间，此插件正在执行的步骤之一是在工件中发布生成的发布。在我的组织中，我们有以下问题：

只有配置管理可以通过 Jenkins 使用 release-plugin 运行发布，但任何开发人员都可以通过控制台运行发布插件，此执行将覆盖在 artifactory 中发布的发布。

我正在查看工件配置，所有开发人员用户都具有读取权限，但他们可以在工件中更新本地版本。

有什么解决方案可以阻止或禁用通过 Jenkins 从 eclipse 执行本地发布？

谢谢如果有人可以帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T21:59:44.283

我建议使用[Artifactory 的](https://wiki.jenkins-ci.org/display/JENKINS/Jenkins+Artifactory+Plugin+-+Release+Management)Jenkins 发布管理，它是[Jenkins Artifactory 插件](https://wiki.jenkins-ci.org/display/JENKINS/Artifactory+Plugin)的一部分。这将允许您完全从 Jenkins 运行发布管理，可能使用专门的用户，并且还可以在发布上运行暂存和升级。

发布/登台通常会在 Artifactory 中的专用仓库中完成，只有 Jenkins 发布用户具有写入权限。

Jenkins Artifactory 插件中的发布管理功能完全替代了 maven 发布插件（以及基于后者的 Jenkins m2release 插件），即：

*   更快并且涉及更少（不必要的）重建周期
*   集成您现有的 Maven 和 SCM Jenkins 配置
*   更灵活地应用版本
*   提供强大的回滚
*   也适用于非 Maven 构建类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T21:10:36.520

[http://wiki.jfrog.org/confluence/display/RTF/Managing+Permissions](http://wiki.jfrog.org/confluence/display/RTF/Managing+Permissions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:00:29.687

将发布插件移动到[配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)（默认情况下不应激活）。仅当您在 jenkins 上运行构建时激活配置文件。（对于个人资料名称詹金斯使用`mvn <goals> -Pjenkins`）

# ios - 在 iPhone 上更新和测试资产，无需重新构建应用程序

> ID：10236498
> 
> 赞同：2
> 
> 时间：2012-04-19T20:48:04.687
> 
> 标签：ios, resources

我们正在开发一款 iPhone 游戏，我想知道是否可以在设备上复制新的或更新的资产（图像、动画、声音或其他）并在不使用 XCode 重建应用程序的情况下对其进行测试。

我们希望简化生产流程流程，并且我们试图避免我们的艺术家在每次修改资产时都重新构建应用程序。

非常感谢任何建议。

费德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:16:24.390

是的，我在我的一个项目中做到了。

我的策略很简单，一开始，我使用专门为此创建的 wifi 工具将新资产存储在应用程序文档文件夹中。然后，当游戏需要资源时，它会检查它是否在文档文件夹中，如果有，则加载，如果没有，则从捆绑包中加载资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:54:33.250

不，因为在 XCode 端更新的任何文件都需要重新打包和重建。我很惊讶这是一个问题，因为两次清理之间的构建过程非常快。您可能不是每次都从头开始重建整个应用程序（即在清理之后），是吗？XCode 应该检测任何资源更改并在设备上更新它们。

# asp.net-mvc - MVC 3 定期重复出现的元素...最佳实践

> ID：10236502
> 
> 赞同：2
> 
> 时间：2012-04-19T20:48:22.083
> 
> 标签：asp.net-mvc

在我的网站上，我不想在几乎每个页面上显示来自数据库的类别列表。目前我使用 ViewBag 来存储类别，但我知道必须有一些更好的方法。因此，我想知道在 MVC3 中加载重复出现的元素时的最佳实践。

这是一些代码：

```
public class HomeController : Controller
{
    private AlltForMusikContext db = new AlltForMusikContext();

    //
    // GET: /Admin/

    public ViewResult Index()
    {
        var ads = db.Ads.Include(a => a.Category).OrderByDescending(a => a.Date);
        ViewBag.Categories = db.Categories.ToList();
        return View(ads.ToList());
    }

    public ViewResult Category(int id)
    {
        var ads = db.Ads.Where(a => a.Category.CategoryId == id).OrderByDescending(a => a.Date);
        ViewBag.Categories = db.Categories.ToList();
        ViewBag.Category = db.Categories.Where(a => a.CategoryId == id).FirstOrDefault();
        return View(ads.ToList());
    }
} 
```

我在 _Layout.cshtml 中使用此代码

```
 @Html.Partial("_GetCategories", (IEnumerable<AlltForMusik.Models.Category>)@ViewBag.Categories) 
```

这是我加载到布局视图中的部分视图：

```
@model IEnumerable<AlltForMusik.Models.Category>

@foreach (var cat in Model)
{
<img src="@Url.Content("~/Content/img/icon_arrow.gif")" /> 
@Html.ActionLink(cat.CategoryName, "Category", "Home", new { id = cat.CategoryId })<br />
} 
```

这可行，但每次我想加载视图时，我都必须将类别加载到 ViewBag 中，否则我会收到错误消息。

加载这样的内容的最佳方式是什么？

**回答：**

我听从了建议并使用了 HtmlHelper。起初我偶然发现了一些问题，因为我在 System.Web.Webpages 中引用了 HtmlHelper 而不是 System.Web.Mvc。这是我正在使用的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using AlltForMusik.Models;
using System.Web.Mvc;

namespace AlltForMusik.Helpers
{
public static class HtmlHelpers
{

    public static string GetCategories(this HtmlHelper helper)
    {
        AlltForMusikContext db = new AlltForMusikContext();
        var categories = db.Categories.OrderBy(a => a.CategoryName).ToList();
        string htmlOutput = "";

        foreach (var item in categories)
        {
            htmlOutput += item.CategoryName + "<br />";
        }

        return htmlOutput.ToString();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:52:03.653

使用缓存创建自定义 HttpHelper。例如 ShowCategories()。然后将其放在视图或常见布局上，例如：

```
@Html.ShowCategories() 
```

# jquery - MVC 4 向 jQuery $.ajax() 跨域提供 JSON 字符串（带日期）（错误？）

> ID：10236506
> 
> 赞同：0
> 
> 时间：2012-04-19T20:48:31.257
> 
> 标签：jquery, ajax, jsonp, asp.net-mvc-4

所以，我有一个使用 jQuery 1.6.2 的基本 HTML 页面，我有一个 MVC 应用程序，它在单独的域上提供数据（HTML 页面是本地的，MVC 应用程序不是）。MVC 应用程序发送回一个 JSON 字符串就好了；问题是，在发送回日期时，在日期前后都有一个“/”会破坏 JSON 字符串，而后者又不会变成 javascript 对象。呸。

这是我的 AJAX 调用：

```
$.ajax({ 
  url:url,
  dataType: 'jsonp',
  success: function(data, status, jqXHR) {
    alert(data);
  },
  error: function(jqXHR, textStatus, errorThrown) {
    console.log(jqXHR); console.log(textStatus); console.log(errorThrown);
  }
}); 
```

使用 Chrome 分析器中的“网络”选项卡，我可以看到正在返回一个 JSON 字符串，它具有正确的数据，但有一些格式错误的语法。这是一个示例：

```
"DateAuthorized":"\/Date(1307789505000-0500)\/", 
```

我尝试使用dataType“text”，但是因为这是一个跨域请求，所以我必须使用jsonp。

有什么想法吗？MVC 应用程序可以使用正则表达式来删除斜杠吗？有没有办法使用 javascript XHttpRequest 来构建手动请求？

啊！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:59:25.630

它使用默认的序列化程序，即一直存在此问题的[JavaScriptSerializer 。](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)另一种方法是使用[JSON.NET](http://json.codeplex.com/)序列化您的对象。

您始终可以从客户端实现替换[——parseJSON 扩展](http://erraticdev.blogspot.com/2010/12/converting-dates-in-json-strings-using.html)

...或者在发回之前从服务器端格式化它：

```
return new DateTime(2012, 4, 19).ToLongDateString(); // or ToShortDateString() 
```

# html - 带有顶部填充的重复 css 背景

> ID：10236507
> 
> 赞同：0
> 
> 时间：2012-04-19T20:48:33.530
> 
> 标签：html, css

如何添加重复的 css 背景，顶部有填充/空格。

这是我的 HTML 结构。

```
<div class="flare">
    <div class="clouds">
    <div class="clouds_bottom">

        <div class="header">
            contents
        </div>

        <div class="content_body_wrapper">
            contents
        </div>

        <div class="footer">
            contents
        </div>

    </div>
    </div>
</div> 
```

和我的 CSS 代码不起作用。

```
.clouds_bottom {
    background: url('../img/clouds_bottom_bg.png') repeat left 250px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:19:06.967

CSS允许作弊。而不是将您的背景放置在距离顶部 100% 的地方，用另一个具有原始背景 [color] 的 div 覆盖它。

html:

```
<html>
<body>
    <div id="cheated_background">
    </div>
    <div id="body">
        content
    </div>
</body>
<html>​ 
```

CSS：

```
body {
    background: lightblue; /* your clouds :) */
}
#cheated_background {
    position: absolute;
    top: 0px;
    background: white;
    width: 100%;
    height: 100px;
}
#body {
    position: relative;
} 
```

查看[实时示例](http://jsfiddle.net/seler/T6ME5/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:05:55.210

尝试使用`repeat-x`而不是`repeat`？如果垂直重复，您将无法看到由背景位置创建的边距。

编辑评论：如果您需要双向重复，我能想到的是三层结构。您需要一个容器 div `position:relative`，您可以在其中放入三个具有`position:absolute`. 底部的将有重复的背景图片，中间的将是白色的，仅覆盖底部的顶部，顶部的将包含您的实际内容。

# java - 使用 DAO 和单例，代码问题

> ID：10236513
> 
> 赞同：0
> 
> 时间：2012-04-19T20:49:04.407
> 
> 标签：java, mysql, database, singleton, dao

也许有人可以帮助我。我正在使用数据访问对象。我有一个数据库：表 Receiverz

```
num   name
 1    Walmart
 2    Target
 3    McDonalds 
```

我为这个表创建了一个类

```
public class Receiverz {
private int num;
private String name;

public void setNum(int num) {
    this.num = num;
}

public void setName(String name) {
    this.name = name;
} 
```

}

然后我创建了 Dao 接口并传递了一个方法给它：

```
public interface Dao {

Receiverz getReceiverz(int num);} 
```

然后我创建了一个实现 Dao 的类 ExpensesDao 并在其中创建了一个单例（我也设置了与数据库的连接，但我将跳过该部分）并通过使其可以使用数据库来覆盖 getReceivers(int num) 方法：

```
public class ExpensesDao implements Dao {

private static Dao thisdao;
public static synchronized Dao getDao() {
    if (thisdao==null) {
        thisdao = new ExpensesDao();
    }
    return thisdao;
    }

@Override
public Receiverz getReceiverz(int num) {
    Receiverz receiver = new Receiverz();
    try {
        Statement stmt = myConnection.createStatement();
        ResultSet result = stmt.executeQuery("SELECT * FROM receiverz");
        while(result.next()){

            receiver.setNum(num);
            receiver.setName(result.getString(2));

            }

    }
        catch (SQLException e){
             System.out.println(e.getMessage());
         }
    return receiver;

} 
```

当我尝试在主类中运行它时：

```
public class TryDatabase {

public static void main(String[] args) {
    Dao ex = ExpensesDao.getDao(); 
    System.out.println(ex.getReceiverz(2)); 
```

我得到的是：

```
listexpenses.Receiverz@193499fd 
```

但我必须得到

```
2 Target 
```

（因为我在参数中传递了 2 并且它引用了我的数据库中的 Target。有谁知道出了什么问题以及我应该在我的代码中更改什么。PS 我希望我说得足够清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:55:21.943

`ex.getReceiverz(2)`正在返回一个`Receiverz`对象。因此，`System.out.println(ex.getReceiverz(2));`使用`toString()`继承自 的方法`java.lang.Object`。在类中创建一个`toString()`方法，`Receiverz`以您想要的方式输出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:52:23.553

将 getName 添加到您的接收者并更改为此 ex.getReceiverz(2).getName()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:16:26.720

有点离题，但我建议使用[双重检查锁定单例](http://www.ibm.com/developerworks/java/library/j-dcl/index.html)代码来避免初始化中的所有并发问题。

Ps.: ex.getReceiverz(2).getName() 违反[了 Demeter 法则，](http://en.wikipedia.org/wiki/Law_of_Demeter)最好避免它。

# blender - 如何将 xyz 和 roll/pitch/yaw 从 csv 文件导入到 Blender？

> ID：10236515
> 
> 赞同：1
> 
> 时间：2012-04-19T20:49:07.560
> 
> 标签：blender

我想知道是否可以将姿态和位置数据（滚动/俯仰/偏航和 xyz）从逗号分隔文件导入到 Blender？

我记录了一辆小型遥控车的数据，我想在 3D 世界中表示它的运动。

我也有时间戳，所以如果有一种方法可以动画对象的运动，那就太棒了！！

任何帮助将不胜感激！！

此致。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:28:34.657

稍作修改，使用 csv 模块

```
import bpy
import csv

position_vectors = []

filepath = "C:\\Work\\position.log"

csvfile = open(filepath, 'r', newline='')
ofile = csv.reader(csvfile, delimiter=',')

for row in ofile:
    position_vectors.append(tuple([float(i) for i in row]))

csvfile.close() 
```

这将使您的积分进入 Blender。请注意 csv.reader 中的 delimiter 参数，并相应地进行更改。通过您的遥控车的真实示例文件，我们可以提供更完整的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:45:35.793

对于搅拌机 v2.62：

如果您有一个文件“positions.log”，如下所示：

```
-8.691985196313894e-002;  4.119284642631801e-001; -5.832147659661263e-001
 1.037146774956164e+000;  8.137243553005405e-002; -5.703274929662892e-001
-3.602584527944123e-001;  8.378614512537046e-001;  2.615265921163826e-001
 6.266465707681335e-001; -1.128416901202341e+000; -1.664644365541639e+000
 3.327523280880091e-001;  4.488553740582839e-001; -2.449449085462368e+000
-7.311567199869298e-001; -1.860587923723032e+000; -1.297179602213110e+000
-7.453603745688361e-003;  4.770473577895327e-001; -2.319515785100494e+000
 1.935170866863264e-001; -2.010280476717868e+000;  3.748000986190077e-001
 5.201529166915653e-001;  3.952972788761738e-001;  1.658581747430548e+000
 4.719198263774027e-001;  1.526020825619557e+000;  3.187088567866725e-002 
```

您可以在搅拌机中使用此 python 脚本阅读它（注意缩进！）

```
import bpy
from mathutils import *
from math import *
from bpy.props import *
import os
import time

# Init
position_vector = []

# Open file
file = open("C:\\Work\\position.log", "r")

# Loop over line in file
for line in file:

    # Split line at ";"
    splittet_line = line.split(";")

    # Append new postion
    position_vector.append(
        Vector((float(splittet_line[0]),
                float(splittet_line[1]),
                float(splittet_line[2]))))

# Close file
file.close()

# Get first selected object
selected_object = bpy.context.selected_objects[0]

# Get first selected object
for position in position_vector:
    selected_object.location = position 
```

这将读取文件并相应地更新第一个选定对象的位置。前进方向：你要知道的是如何设置动画的关键帧......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T18:56:02.823

考虑将这个 python 片段添加到上面的解决方案中

```
obj = bpy.context.object

temporalScale=bpy.context.scene.render.fps
for lrt in locRotArray:
   obj.location = (lrt[0], lrt[1], lrt[2])
   # radians, and do you want XYZ, or ZYX?
   obj.rotation_euler = (lrt[3], lrt[4], lrt[5])
   time = lrt[6]*temporalScale
   obj.keyframe_insert(data_path="location", frame=time)
   obj.keyframe_insert(data_path="rotation_euler", frame=time) 
```

我尚未对其进行测试，但它可能会起作用，并且可以帮助您入门。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-08T19:05:09.913

使用 spice2xyzv 文件作为输入文件。“突变鲍勃”编写的脚本似乎有效。

但是我认为 xyz 速度数据是 km/s 而不是欧拉角，并且导入不适用于角度。

```
# Records are <jd> <x> <y> <z> <vel x> <vel y> <vel z>
#   Time is a TDB Julian date
#   Position in km
#   Velocity in km/sec
2456921.49775 213928288.518 -446198013.001 -55595492.9135 6.9011736 15.130842 0.54325805 
```

有没有办法让它们进入 Blender？我应该将速度角转换为欧拉，这实际上可能吗？

我使用这个脚本：

```
import bpy
from mathutils import *
from math import *
from bpy.props import *
import os
import time

# Init
position_vector = []

# Open file
file = open("D:\\spice2xyzv\\export.xyzv", "r")

obj = bpy.context.object

temporalScale=bpy.context.scene.render.fps

for line in file:
    # Split line at ";"
    print("line = %s" % line)
    line = line.replace("\n","")
    locRotArray = line.split(" ")
    print("locRotArray  = %s" % locRotArray )
    #for lrt in locRotArray:
    print(locRotArray[1])
    obj.location = (float(locRotArray[1]), float(locRotArray[2]), float(locRotArray[3]))
    # radians, and do you want XYZ, or ZYX?
    obj.rotation_euler = (float(locRotArray[4]), float(locRotArray[5]), float(locRotArray[5]))
    time = float(locRotArray[0])*temporalScale
    print("time = %s" % time)
    obj.keyframe_insert(data_path="location", frame=time)
    obj.keyframe_insert(data_path="rotation_euler", frame=time) 
```

# ruby-on-rails - 使用has_many的rails模型关联：通过

> ID：10236517
> 
> 赞同：0
> 
> 时间：2012-04-19T20:49:10.510
> 
> 标签：ruby-on-rails, model, associations, has-many-through

我有一个课程表和一个标签表。我使用 has_many :through 关系将它们关联起来，我的中间表是 tags_relationship.rb

```
class Lesson < ActiveRecord::Base
  attr_accessible :title, :desc, :content, :tag_name
  belongs_to :user

  has_many  :tag_relationships
  has_many  :tags, :through => :tag_relationships
end

class Tag < ActiveRecord::Base
  attr_accessible :name

  has_many :tag_relationships
  has_many :lessons, :through => :tag_relationships
end 
```

在我的一个观点中，我试图创建一个虚拟属性。我有...

```
 <div class="tags">
        <%= f.label :tag_name, "Tags" %>
        <%= f.text_field :tag_name, data: { autocomplete_source: tags_path} %>
    </div> 
```

但是我的课程表没有那个属性 tag_name，所以它改为调用我的方法

```
 def tag_name
       ????????
    end

    def tag_name=(name)
        self.tag = Tag.find_or_initialize_by_name(name) if name.present?
    end 
```

但是我不知道在里面放什么？？？？？？？？？我试图在我的标签表中引用 :name 属性。

那时我使用了 has_many 和 belongs_to 关系。我的课属于一个标签（这是错误的），但我能够写......

```
tag.name 
```

它奏效了。但由于它是一个has_many :through now，我不确定。我尝试使用 tags.name、Lessons.tags.name 等，但我似乎无法让它工作。我如何引用标签表名属性？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:13:16.610

为我糟糕的英语道歉。

当你`Lesson`所属的`Tag`课程只有一个`tag`，所以你的代码是正确的。但是现在`Lesson`有很多`Tag`s，而且是collection（简单来说就是数组）。因此，您的设置器必须更复杂：

```
def tag_names=(names)
  names = if names.kind_of? String
    names.split(',').map{|name| name.strip!; name.length > 0 ? name : nil}.compact
  else
    names
  end

  current_names = self.tags.map(&:name) # names of current tags
  not_added = names - current_names # names of new tags
  for_remove = current_names - names # names of tags that well be removed

  # remove tags
  self.tags.delete(self.tags.where(:name => for_remove))
  # adding new
  not_added.each do |name|
    self.tags << Tag.where(:name => name).first || Tag.new(:name => name)
  end
end 
```

而getter方法应该是这样的：

```
def tag_names
  self.tags.map(&:name)
end 
```

顺便说一句，像这样的查找器`find_by_name`已被弃用。您必须使用`where`.

# ms-access - 带有'With'语句的VBA多个对象

> ID：10236520
> 
> 赞同：3
> 
> 时间：2012-04-19T20:49:16.660
> 
> 标签：ms-access, vba, with-statement

我有一个复选框，当我的表格上禁用了多个框时。目前我正在使用

```
With Me!Textbox
.Locked = True 
```

有没有一种方法可以在 With 语句中列出多个对象，而不是每次都为每个文本框写出

例如

```
With Me!Text1, Text2, Text3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:52:47.797

向标签属性添加一些内容以识别相关控件（例如“锁定”）可能是最简单的。然后，您可以遍历控件集合并使用设置为“锁定”的标签锁定任何内容。

# php - jQuery e.preventDefault() 不工作

> ID：10236521
> 
> 赞同：1
> 
> 时间：2012-04-19T20:49:17.210
> 
> 标签：php, jquery, html, json

我有几行代码来创建一个表单，然后在代码中我`$.post`通过 JSON 使用 AJAX。

我的 html 表单脚本代码创建了一个简单的表单，然后按下“enviar（提交）按钮，它将打印我的 vars 数据。我正在调用`$.post`一个名为 dados.php 的文件，正如您将在本消息后面看到的那样。

我的印象是，`preventDefault()`通过单击“enviar”按钮使用 jQuery，什么都不会发生，但它会带到其他页面，显示来自我的 vars 的数据（我正在做`print_r($_POST);`和`var_dump($_POST);`在我的 dados.php 中。

首先，`preventDefault()`在用户/我点击“enviar”（提交）按钮后，jQuery 或其他人（你会在我的代码中看到注释）“阻止”任何操作可能是错误的；什么都不会发生，但仍会打印我的 vars 数据。

第二/最后，我的代码有问题。

请检查我的 HTML 表单和我的 dados.php（php 代码）的以下脚本代码；在此先感谢您的帮助：

***我的 HTML 表单/JSON：***

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <title></title>
    </head>
    <body>

    <div id="result">texto do cliente</div>​

    <form id ="myform"action="dados.php" method="post">

        <table>
            <tr>
                <td>Nome:</td>            
                <td>
                    <input type="text" id="first_name" value="" maxlength="25" />
                </td>            
            </tr>

            <tr>
                <td>Sexo:</td>
                <td>
                    <input type="radio" id="Sexo" value="Masculino" /> Masculino
                    <input type="radio" id="Sexo" value="Feminino" /> Feminino
                </td>
                </tr>

                <tr><td>Profissão:</td>
                <td>
                    <select id="dropdown">
                    <option value ="administrador">Administrador</option>
                    <option value ="analista">Analista</option>
                    <option value ="designer">Designer</option>
                    <option value ="gerente">Gerente</option>
                    </select>
                </td>
                </tr>

                <tr>
                <td>
                    <input id="submit" type="submit" value="enviar"/>                    
                </td>
                </tr>
        </table>  

        <script type="text/javascript">
            $(function(){
                /* attach a submit handler to the form */
                $("input[type='submit']").click(function(e) {

                /* stop form from submitting normally */
                   e.preventDefault(); 
                   //e.stopImmediatePropagation();
                   //e.stopPropagation();

            $.post(   
                'dados.php', {firstname: $('#first_name').val(), sexo: $('#sexo').val(),
                             profissão: $('#dropdown').val()}, function(data) {  
                console.log(data);
                //$('#result').html(data)
                //$('#result').html(data.firstname)
                //$('#result').html(data.sexo)
                //$('#result').html(data.profissão)
                }, 'json');
            });           

         </script>        

        <script>

        </script>

    </body>
</html> 
```

***我的 DADOS.PHP：***

```
//ECHO $_POST['dropdown'];

print_r($_POST);

var_dump($_POST); 
```

非常感谢。

马可·兰扎

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T20:57:35.947

你没有关闭你的`$(function(){`.

您需要`});`在最后添加另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:53:13.370

更改为您拥有以下内容的表单提交：

```
$("input[type='submit']").click(function(e) { 
```

做这个：

```
$('#myform').submit(function(e) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:53:55.103

真的，您应该只使用`<input type="button">`并添加点击处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:51:50.783

尝试添加`return false;`到回调的末尾。如果我打算制作 AJAX 表单，我通常只是在表单本身上设置它：`<form action="someAction" method="post" onsubmit="return false;">`

此外，您应该附加到按钮上的`submit`事件`form`而不是`click`按钮上的事件 - 请记住，如果用户按下 Enter 键，表单将提交，绕过按钮上的事件处理程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T20:52:11.410

代替：

```
$("input[type='submit']").click(function(e) { 
```

尝试这个：

```
$("#myform").submit(function(e) { 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T20:52:42.703

您是否尝试将 jQuery 脚本放入 HTML 标头并更改`$(function()`为`$(document).ready(function(){`？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-19T20:52:46.143

`$("input[type='submit']").click(function(e) {`不是提交处理程序，它是提交按钮的单击处理程序，这可能不是您真正需要的。

尝试用替换该行`$("form#myform").submit(function(e) {`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-19T22:15:10.110

尝试把 return false; 在你的 $.post 电话之后

# python - 对于许多导致内存问题的 For 语句

> ID：10236523
> 
> 赞同：0
> 
> 时间：2012-04-19T20:49:22.520
> 
> 标签：python, iterable

我在 Python 中遇到内存错误，这并不奇怪，但我需要一个替代方案。因此，我使用了几个语句，据我所知，这些语句将值存储在内存中。我应该将 for 语句切换到什么，以便它们将其保存到不会保存到内存中的内容中。将其保存到文本文件会更好吗？下面的代码可以帮助回答我应该做什么。我想要你的任何想法的例子。

```
def product(*args, **kwds):
    pools = map(tuple, args) * kwds.get('repeat', 1)
    result = [[]]
    for pool in pools:
        result = [x+[y] for x in result for y in pool]
    for prod in result:
        yield tuple(prod)

def start():
    for chars in product("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ12234567890!@#$%^&*?,()-=+[]/;", repeat = 4):
        print chars 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:51:11.197

使用[`itertools.product`](http://docs.python.org/library/itertools.html#itertools.product)：

```
from itertools import product

def start():
    for chars in product("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ12234567890!@#$%^&*?,()-=+[]/;", repeat = 4):
        print chars 
```

从文档中：

> 这个函数等价于下面的代码，只是实际实现**不会在内存中建立中间结果**

# wcf - 来自另一个服务的 WCF 轮询

> ID：10236528
> 
> 赞同：0
> 
> 时间：2012-04-19T20:49:43.327
> 
> 标签：wcf

我想编写一个 WCF 服务来轮询来自另一个服务（可能是 ASP.NET Web 服务）的数据并将该数据放入数据库中。我希望我的 WCF 以 5 分钟的间隔进行轮询。这样做的最佳方法是什么？如果我将它托管在 IIS 中，如何触发它进行轮询？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:00:22.727

WCF 服务在被调用时会做一些事情。WCF 服务不应用作初始化轮询的东西。

Windows 服务可用于轮询另一个服务并执行其他任务。

在 Windows 服务中有一个代码块，它是一个无限循环。在循环中执行您想要完成的任务，并且线程休眠 5 分钟。然后，该服务将每 5 分钟执行一次您需要的任何任务。

# d - 为什么 DerelictGL3 不绘制任何东西？

> ID：10236529
> 
> 赞同：1
> 
> 时间：2012-04-19T20:49:51.303
> 
> 标签：d, opengl-3

我意识到我没有使用 Glu，也没有设置视角，但我使用的标准化设备坐标与 McKeeson 使用的[http://www.arcsynthesis.org/gltut/](http://www.arcsynthesis.org/gltut/)相同，所以我应该看到他得到的相同三角形，只是红色的。我得到一个黑屏并且没有任何警告（我希望他们留下 glDraw 功能进行调试；GL3 就像在你走出烟雾之前盲目飞行！）。绘图的代码是：

```
module ShaderHub;

import std.stdio;
import std.string;
import derelict.opengl3.gl3;

class ShaderHub{
    private bool ok=true;
    private GLuint shad=0, vshad=0, fshad=0;
    private int voff=0;
    private GLuint vbo=0, vao=0;
    const float[] v = [ 0.75f, 0.75f, 0.0f, 1.0f,
                        0.75f, -0.75f, 0.0f, 1.0f,
                        -0.75f, -0.75f, 0.0f, 1.0f];

    public this(){
        immutable string vshader = `
#version 330
layout(location = 1) in vec4 pos;
void main(void)
{
    gl_Position = pos;
}
`;

        immutable string fshader = `
#version 330
void main(void)
{
    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
}
`;

        shad=glCreateProgram();
        if(shad==0){
            writeln("Error: GL did not assigh main shader program id");
            ok=false;
        }

        vshad=glCreateShader(GL_VERTEX_SHADER);
        const char *vptr=toStringz(vshader);
        glShaderSource(vshad, 1, &vptr, null);
        glCompileShader(vshad); 
        int status, len;
        glGetShaderiv(vshad, GL_COMPILE_STATUS, &status);
        if(status==GL_FALSE){
            glGetShaderiv(vshad, GL_INFO_LOG_LENGTH, &len);
            char[] error=new char[len];
            glGetShaderInfoLog(vshad, len, null, cast(char*)error);
            writeln(error);
            ok=false;
        }

        fshad=glCreateShader(GL_FRAGMENT_SHADER);
        const char *fptr=toStringz(fshader);
        glShaderSource(fshad, 1, &fptr, null);
        glCompileShader(fshad); 
        glGetShaderiv(vshad, GL_COMPILE_STATUS, &status);
        if(status==GL_FALSE){
            glGetShaderiv(fshad, GL_INFO_LOG_LENGTH, &len);
            char[] error=new char[len];
            glGetShaderInfoLog(fshad, len, null, cast(char*)error);
            writeln(error);
            ok=false;
        }

        glAttachShader(shad, vshad);
        glAttachShader(shad, fshad);
        glLinkProgram(shad);
        glGetShaderiv(shad, GL_LINK_STATUS, &status);
        if(status==GL_FALSE){
            glGetShaderiv(shad, GL_INFO_LOG_LENGTH, &len);
            char[] error=new char[len];
            glGetShaderInfoLog(shad, len, null, cast(char*)error);
            writeln(error);
            ok=false;
        }

        glGenVertexArrays(1, &vao);
        if(vao<1){
            writeln("Error: GL failed to assign vao id");
            ok=false;
        }
        glBindVertexArray(vao);

        glGenBuffers(1, &vbo);
        if(vbo<1){
            writeln("Error: GL failed to assign vbo id");
            ok=false;
        }
        glBindBuffer(GL_ARRAY_BUFFER, vbo);
        glBufferData(GL_ARRAY_BUFFER, v.length * GL_FLOAT.sizeof, &v[0],     GL_STATIC_DRAW);
        glEnableVertexAttribArray(1);
        glVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, cast(void*)voff);    

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glBindVertexArray(0);   
    }

    public void draw(){
        glUseProgram(shad);

        writeln(glGetAttribLocation(shad, "pos"));//prints 1

        glBindVertexArray(vao); 
        glDrawArrays(GL_TRIANGLES, 0, 6);       
        glBindVertexArray(0);

        glUseProgram(0);
    }
} 
```

请注意，调试写入 pos 的绑定位置正确打印 1\. 设置 SDL 和 GL 的代码是：

```
import std.stdio;
import derelict.sdl2.sdl;
import derelict.opengl3.gl3;

import EventHub;
import ExposeApp;

pragma(lib, "DerelictUtil.lib");
pragma(lib, "DerelictSDL2.lib");
pragma(lib, "DerelictGL3.lib");

class App{
    private ExposeApp funcPtrs;
    private EventHub ehub;
    private SDL_Window *win;
    private SDL_GLContext context;
    private int w=600, h=480, fov=55;
    private bool running=true;

    public this(){
         if(!initSDL()){
            writeln("Error initializing SDL");
            SDL_Quit();
        }
        initGL();

        funcPtrs=new ExposeApp();
        funcPtrs.stop=&stopLoop;
        funcPtrs.grabMouse=&grabMouse;
        funcPtrs.releaseMouse=&releaseMouse;
        ehub=new EventHub(funcPtrs);

        while(running){
            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

            ehub.tick();

            SDL_GL_SwapWindow(win);
        }

        SDL_GL_DeleteContext(context);
        SDL_DestroyWindow(win);
        SDL_Quit();
    }

    private void stopLoop(){
        running=false;
    }
    private void grabMouse(){
        SDL_ShowCursor(SDL_DISABLE);
        SDL_SetWindowGrab(win, SDL_TRUE);
    }
    private void releaseMouse(){
        SDL_ShowCursor(SDL_ENABLE);
        SDL_SetWindowGrab(win, SDL_FALSE);
    }
    private bool initSDL(){
        if(SDL_Init(SDL_INIT_VIDEO)< 0){
            writefln("Error initializing SDL");
            SDL_Quit();
            return false;
        }

        SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
        SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);
        SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
        SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);

        win=SDL_CreateWindow("3Doodle", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED,     w, h, SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN);
        if(!win){
            writefln("Error creating SDL window");
            SDL_Quit();
            return false;
        }

        context=SDL_GL_CreateContext(win);
        SDL_GL_SetSwapInterval(1);

        DerelictGL3.reload();

        return true;
    }
    private void initGL(){
        resize(w, h);

        glEnable(GL_DEPTH_TEST);
        glEnable(GL_CULL_FACE);

        glDepthFunc(GL_LEQUAL);

        glClearColor(0.0, 0.0, 0.0, 1.0);
        glClearDepth(1.0);

        glCullFace(GL_BACK);
        glFrontFace(GL_CCW);

    }
    private void resize(int w, int h){
        //this will contain the makings of the projection matrix, which we go into next tut
        glViewport(0, 0, w, h);
    }
}

void main(){
    try{
        DerelictSDL2.load();
    }catch(Exception e){
        writeln("Error loading SDL2 lib");
    }
    try{
        DerelictGL3.load();
    }catch(Exception e){
        writeln("Error loading GL3 lib");
    }

    App a=new App();
} 
```

如果有人有一些 Derelict3 openGL3 代码，它实际上在屏幕上显示了一些东西并愿意分享，因为我在谷歌上下搜索并找不到任何东西。

对大卫的评论：

正如我所说，直到我能在屏幕上看到一些东西，我才会飞得很黑，那么将这种黑暗扩展到覆盖模型加载有什么意义呢？我在这里追求“BASIC”模板；我已经有一个用于 C# 工作的模型加载器。您链接到的代码是 Derelict 1，不需要 openGL3，据我阅读，它需要 vao（因此包含它们的原因）。但即使没有这个原因，为了能够在初始化时将 vbo 绑定到顶点着色器中的属性位置，而不是为每个绘制的 vbo 的每个循环调用 glEnableVertexAttribArray 加上 glVertexAttribPointer 调用是一个函数保存。剔除不是我检查的问题。所以我想我还在等待一个深思熟虑的答案！

PS。好的，很抱歉没有点击回答按钮，我没有意识到有这样的事情。我已经浏览了旧帖子并进行了更正。但是你对这个问题 Dav1d 的回答没有达到目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:19:02.767

对不起，但这段代码让我哭了。

我想这是本教程的第一个示例（根据着色器），[我使用 Derelict2 的 D 解决方案](http://paste.pocoo.org/show/7n4FvcWyck4bwR7Ws9gY/ "教程 1")（也不是最好的代码）。顺便说一句，您应该禁用调整大小，这在大多数情况下都不起作用，并且会使事情变得更加困难，尤其是对于初学者而言。

我建议您不要使用 VAO，首先，它们几乎不会为您带来性能提升，使您的应用程序更难维护，并且与[DSA 方法](http://www.opengl.org/registry/specs/EXT/direct_state_access.txt)冲突。

此外，我还建议您为 OpenGL API 使用某种包装器，至少用于加载网格（教程使用它自己的帮助器，如果您想重新实现它，您还有很多工作要做！）。您可以使用[gljm](https://bitbucket.org/dav1d/gljm/src)，我编写的一个库，它非常适用于 .obj 格式的网格（它能够加载 sponza 场景），也适用于 ply 格式的非复杂网格。

稍后你还需要一个向量/矩阵/四元数数学库，本教程使用 glm（你不能真正移植到 D，因为它是一个 C++ 模板库）。[gl3n](https://github.com/Dav1dde/gl3n)可能是另一种选择（也是我写的）。

PS：提问时请接受答案，不仅因为我是名声妓女，还因为人们可以立即看到最佳答案（您也应该对较早的问题这样做）。

PS²：也许您的问题只是由于启用了面部剔除引起的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T00:53:53.710

感谢 DMD 网站上的 David 找到了答案。glBufferData 中的 &v(GL_ARRAY_BUFFER, v.length * GL_FLOAT.sizeof, &v, GL_STATIC_DRAW); 需要更改为 &v[0]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:18:31.587

对于初学者，我不相信你曾经调用过你的绘图函数（除非是通过`ehub.tick()`.

# ruby - 在 Cucumber Around Hook (Ruby) 中多次调用 Block

> ID：10236533
> 
> 赞同：2
> 
> 时间：2012-04-19T20:50:00.087
> 
> 标签：ruby, cucumber, hook

我正在尝试多次（30）次运行一个场景以获得一个很好的统计样本。但是该块只执行一次；每次后续时间都会导致场景被调用而不是执行（尽管它说场景确实在大约 5 毫秒的时间内成功完成）。

```
Around('@mass_benchmark') do |scenario, block|
  $seconds_taken = "SECONDS TAKEN NOT SET"
  @time_array = []
  30.times do
    before_hook(scenario)
    block.call
    after_hook(scenario)
    @time_array << $seconds_taken
  end
  write_time_array_to_file(@time_array, scenario_name)
end 
```

标签@mass_benchmark 执行这个块，而不是~@mass_benchmark，它只是正常执行场景。before_hook 和 after_hook 方法复制了 Before ('~@mass_benchmark') 和 After ('~@mass_benchmark') 挂钩（实际上只是调用相同的方法）。

变量 $seconds_taken 围绕我正在计时的特定区域设置。我没有安排整个测试，只是其中的一个关键部分；测试的其余部分已经到了这一点，等等，这不是计时部分的一部分，所以我不能只是将计时部分移到这个之外。

问题可能与我在这些方法中所做的事情有关，但据我所知，一切正常（如放置良好的 puts 语句所示）。任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T05:27:07.120

目前 Cucumber 似乎不支持在环绕钩子中调用该块两次。这可以通过以下功能文件来证明：

```
Feature: This scenario will print a line

  Scenario: Print a line
    When I print a line 
```

和步骤定义：

```
Around do |scenario, block|
  Kernel.puts "START AROUND, status=#{scenario.status}"
  block.call
  Kernel.puts "BETWEEN CALLS, status=#{scenario.status}"
  block.call
  Kernel.puts "END AROUND, status=#{scenario.status}"
end

When /^I print a line$/ do
  Kernel.puts "IN THE STEP DEFINITION"
end 
```

执行此操作时，Cucumber 将打印：

```
 Scenario: Print line  # features/test1.feature:3
START AROUND, status=skipped
IN THE STEP DEFINITION
    When I print a line # features/test.rb:9
BETWEEN CALLS, status=passed
    When I print a line # features/test.rb:9
END AROUND, status=passed 
```

显然，由于场景的状态已经“通过”，Cucumber 不会重新执行它，尽管输出格式化程序会接收这些步骤。我还没有找到任何方法来“重置”场景 API 中的状态以让它们重新运行。

周围的钩子还有其他问题，例如，您不能在周围的钩子中将变量设置为世界（就像您可以在钩子之前一样）。有关更多血腥细节，另请参阅 Cucumber 问题[52](https://github.com/cucumber/cucumber/issues/52)和[116](https://github.com/cucumber/cucumber/issues/116)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-22T13:43:39.263

一种可能性可能是保持传入的块原样，并在副本上调用“.call”方法？类似（未经测试）：

```
Around do |scenario, block|
  30.times do
    duplicate = block.dup
    before_hook(scenario)
    duplicate.call
    after_hook(scenario)
  end
end 
```

只要确保不要在块上使用“.clone”，因为克隆会创建一个具有相同 ID 的对象，导致对副本所做的每次更改也会影响原始对象。

# c# - 使用 Report.DataSourceConnections 时：“对象引用未设置为对象的实例”

> ID：10236536
> 
> 赞同：0
> 
> 时间：2012-04-19T20:50:11.543
> 
> 标签：c#, crystal-reports

请看下面的代码。我认为这很不言自明。我正在运行 VS2010 以及用于 VS2010 的 Crystal Reports。疯狂的事情是我有一个类似的项目，它的代码相似，但不会在该行产生异常......所以我一直试图找出这两个项目之间的区别，但到目前为止都是空的。

感谢您提供有关如何解决此问题的任何建议或想法！

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using CrystalDecisions.Shared;
using CrystalDecisions.CrystalReports.Engine;

public partial class Reports : System.Web.UI.Page
{
  ReportDocument rptSP;

protected void Page_Load(object sender, EventArgs e)
{
   rptSP = new ReportDocument();
   string rptPath = Server.MapPath(Request.QueryString["rptname"].ToString());
   rptSP.Load(rptPath, 0);
   rptSP.DataSourceConnections["MyServer\\MyInst", "MyDB"].SetConnection("MyServer\\MyInst", "MyDB", "MyUsername", "MyPass");
//The above line causes an excepton while debugging on my local development machine 
```

如果它在我的 aspx 页面上很重要，我有以下内容：

```
<%@ Register Assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"
Namespace="CrystalDecisions.Web" TagPrefix="CR" %> 
```

然后在我的 web.config 我有：

```
 <add assembly="CrystalDecisions.CrystalReports.Engine, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="CrystalDecisions.ReportSource, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="CrystalDecisions.Shared, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="CrystalDecisions.ReportAppServer.ClientDoc, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/> 
```

以及我的 BIN 目录中的一些其他 Crystal DLL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:19:01.943

尝试：

```
rptSP.DataSourceConnections[@"MyServer\MyInst", "MyDB"].SetConnection(@"MyServer\MyInst", "MyDB", "MyUsername", "MyPass"); 
```

注意用单个反斜杠替换双反斜杠，以及随之而来的 @ 符号。我更喜欢这种方式来使用双反斜杠，因为这样我就可以显式地控制字符串格式。

# iphone - 使用 Flurry 记录 __FILE__

> ID：10236538
> 
> 赞同：1
> 
> 时间：2012-04-19T20:50:21.863
> 
> 标签：iphone, objective-c, ios, flurry

我们使用 Flurry SDK 收集有关用户如何使用我们的应用程序的分析。

我们已经看到一个奇怪的错误，应用程序抱怨它无法连接到服务器，所以为了帮助解决发生的问题，我添加了一个带参数的 Flurry 事件，以便我可以看到这种情况发生的时间。

我记录的两个参数是：`__FILE__`和`_cmd`

当我查看 Flurry 以查看发生在哪个方法和哪个文件中时，file 的值非常奇怪。几乎每个`__FILE__`值都类似于：

`/Users/yevgenysimkin/foo/git/iphone/foo/Classes/foo/App/Controller/ViewController.m`

我知道触发此事件的用户不止一个，那么为什么同一用户会重复出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:55:21.283

宏在`__FILE__`编译时展开。用户 yevgenysimkin 是编译源文件的计算机的用户，而不是运行应用程序的用户。

如果您正在创建一个库并将其提供给许多应用程序制造商，那么该宏已经被 yevgenysimkin 硬编码到该库中——即使其他人将其编译到整个应用程序中也是如此。

# ios - 测试 VoiceOver：如何验证我的 UIAccessibilityLayoutChangedNotification 通知是否正常工作？

> ID：10236543
> 
> 赞同：2
> 
> 时间：2012-04-19T20:50:39.917
> 
> 标签：ios, accessibility, voiceover

我正在开发一个我希望完全可访问的 iOS 应用程序。该应用程序的一部分涉及发牌时的顺序，然后在用户交互后，手牌结束并发下一手牌。发牌后，我想让受损用户意识到这一点。

因此，在发牌后（有视力的用户看到卡片动画就位），我发送 UIAccessibilityLayoutChangedNotification 通知，如下所示：

```
UIAccessibilityPostNotification(UIAccessibilityLayoutChangedNotification, nil); 
```

当我使用辅助功能检查器在模拟器中进行验证时，一切看起来都很好：显示通知。但是，当我尝试在设备上使用 VoiceOver 进行测试时，似乎什么都没有发生。我在这里缺少什么吗？我怎么知道它有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:25:04.610

我相信我对旁白如何工作的想法有点偏离。似乎 UIAccessibilityLayoutChangedNotification 不是通知用户的东西，而是通知 UIKit 画外音元素已更改。

我最终结合使用音效和战略性地使用 UIAccessibilityAnnouncementNotification 通知向用户讲述更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:03:20.450

而不是使用`nil`使用字符串。VoiceOver 将使用该字符串进行语音。

# macos - 您没有符合条件的 Mac OS X 应用程序包 ID。在这里注册一个

> ID：10236545
> 
> 赞同：10
> 
> 时间：2012-04-19T20:50:44.487
> 
> 标签：macos, app-store-connect

当我选择时，我在 iTunes Connect 中收到错误：

`Manage Your Applications > Add New App > Mac OSX App`

> 您没有符合条件的 macOS 应用程序包 ID。在这里注册一个。

当我点击“注册”链接时，它会显示我设置的一个 App ID。所有的灯都是黄色的，因为我的应用程序不使用 iCloud、Game Center 或推送通知。

为什么找不到此 App ID，或者我可以做些什么来“纠正”它？

当我转到“合同、税务和银行业务”时，Mac OS X Free 和 Mac OS X 付费应用程序协议都列在“有效合同”下。

在我看来，我已经满足了所有先决条件。那里还有什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-01-20T00:32:51.640

注销 iTunes Connect 并重新登录为我修复了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-07T04:13:46.227

这只是发生在我身上（尽管错误已更新为“macOS 应用程序” - 我将其包括在此处以供未来的解决方案寻求者使用）

> 您没有符合条件的 macOS 应用程序包 ID

似乎出于某种原因，Mac 应用程序在开发者门户中有自己的部分：在创建 App ID 之前切换到它，它会立即出现在 AppStoreConnect 中。

[![例子](../Images/94713a90c17ffa0bc4cac78ee1320770.png)](https://i.stack.imgur.com/ewQjL.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-07T18:21:49.427

在 2020 年 1 月的第一周，此问题似乎再次出现。

这一次，很可能是由于 App Store Connect 后端出现错误，无法从 Apple Developer 后端获取已注册的捆绑包 ID。

许多开发人员（包括我自己）向 Apple 报告了同样的情况，Apple 在后端服务器上应用了该修复程序。

可以在此处找到有关 Apple 开发者论坛的相关讨论：

*   [https://forums.developer.apple.com/thread/127608](https://forums.developer.apple.com/thread/127608)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T20:57:26.107

Bundle ID 需要与同一应用的 iOS 版本不同。

# c# - 在转换器中国际化 WPF 输入

> ID：10236551
> 
> 赞同：1
> 
> 时间：2012-04-19T20:51:08.820
> 
> 标签：c#, wpf, internationalization

我正在为我的 WPF 应用程序编写一个转换器，它需要为一列显示可变的小数位数。用户可以使用组合键或表单按钮更改列的小数位数。唯一的区别是，如果增加精度并且最后一位是0，那么精度不会增加。

因此，对于精度为 3 位小数的列，以下值 123.123 和 123.100 将显示为 123.123 和 123.1。

目前这对我来说很好。当我尝试将其国际化时，问题就出现了。我已经阅读了有关国际化的各种主题和页面，但似乎仍然无法使其正常工作。如果有人可以查看并指出我可能忽略的任何明显问题，我将不胜感激。

正在观察的行为如下。显示数据时，转换器似乎工作正常，并根据用户的区域设置正确格式化数字。当用户更新数据时，德国用户会遇到以下行为。

输入 显示 预期显示
1000 1.000 1.000
1.000 1 1.000
1,000 1.000 1
1,234 1.234 1,234

我的转换器代码如下。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Windows.Data;

namespace xxx
{
    [ValueConversion(typeof(object), typeof(string))]
    public class StripDecimalsConverter : IValueConverter
    {
        public static readonly Regex NumberRegex = new Regex("(?<=[A-Z])(\\d+)", RegexOptions.Compiled);

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            //return any integer values to 0 dp. Else apply the default decimal places to the value.
            string convertedformat = parameter.ToString().ToUpper().Contains("P") ? "{0:P0}" : "{0:N0}";

            string format = parameter.ToString();

            int converted;

            var convertedCulture = System.Globalization.CultureInfo.CurrentCulture;

            if (value == null) return string.Format(culture, format, string.Empty);
            else if (int.TryParse(value.ToString(), out converted))
                return string.Format(convertedCulture, convertedformat, converted);
            else
            {

                Double d;
                Double.TryParse(value.ToString(), out d);
                var x = (double)value;
                var strippedFormat = StrippedFormat(x, format, convertedCulture);

                return string.Format(convertedCulture, strippedFormat, x);
            }
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return value;
        }

        private string StrippedFormat(double value, string format, System.Globalization.CultureInfo culture)
        {

            var scaleMatch = NumberRegex.Match(format);
            //What format value is being sent in by the formatter?
            int requiredprecision = scaleMatch != Match.Empty ? Int32.Parse(scaleMatch.Value) : 0;

            Double d = value;

            int index = d.ToString().IndexOf(culture.NumberFormat.NumberDecimalSeparator);
            //How many decimakl places are in the value to be formatted?
            var formatlength = d.ToString().Substring(index + 1).Length;
            string newformat = requiredprecision > formatlength
                            ? (format.Contains("P") ? string.Format("{{0:P{0}}}", formatlength) : string.Format("{{0:N{0}}}", formatlength))
                            : (format.Contains("P")
                                   ? string.Format("{{0:P{0}}}", requiredprecision)
                                   : string.Format("{{0:N{0}}}", requiredprecision));

            return newformat;
        }
    }
} 
```

从我的 XAML 调用转换器，如下所示：

```
StringFormat={}{0:N2},Converter={StaticResource StripDecimalsConverter},ConverterParameter=\{0:N2\}}" 
```

我的 App.xaml 还包含以下行：

```
Thread.CurrentThread.CurrentCulture = CultureInfo.CurrentCulture; 
```

任何指向正确方向的指针都将不胜感激。

# jquery - 选择孩子

> ID：10236555
> 
> 赞同：0
> 
> 时间：2012-04-19T20:51:17.343
> 
> 标签：jquery, html-table

我有以下html结构：

```
<td title="Test Info - Displays another Web page on this Web page. The other Web page is presented in an IFrame." class="ms-WPHeaderTd" id="WebPartTitleWPQ2">
  <h3 class="ms-standardheader ms-WPTitle" style="width: 778px; text-align: justify; overflow:  hidden; text-overflow: ellipsis;" name="MSOFixedWidthTitle" fixedWidth="800px">
     <nobr>
        <span>
         Text - I want this text           
           <span id="WebPartCaptionWPQ2"/> 
```

因此，我试图通过执行以下操作来获取`td`带有 id的 span 下的文本值`WebPartTitleWPQ2`：

```
var spans =  $("#WebPartTitleWPQ2").children("span") 
```

SO 则`spans.length`始终为 0。

我究竟做错了什么？

**编辑**

正在做

```
 $("#WebPartTitleWPQ2").find("span").text() 
```

导致返回两个值，这两个值都是`blank`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T20:55:30.307

```
$('#WebPartTitleWPQ2 span').eq(1).text() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T20:56:27.913

`$(selector).children()`仅返回所选标签的直接子代。要进一步查找内容，您可以使用

```
$(selector).find(descendantSelector) 
```

或者，在你的情况下，

```
$('#WebPartTitleWPQ2').find('span') 
```

编辑：没有看到第二个/嵌套跨度。这些中的任何一个都应该起作用。 [JSFiddle](http://jsfiddle.net/c5SjS/)

```
$('#WebPartTitleWPQ2').find('span').eq(0).text(); 
```

或者

```
$('#WebPartCaptionWPQ2').parent().text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:57:53.413

```
$('#WebPartTitleWPQ2').find('span').html(); 
```

这应该得到包含在这个项目之后的第一个跨度中的 HTML。

编辑：我刚刚又看了看您发布的标记-您的跨度是否有 ID 或者是嵌套在您的第一个跨度中的另一个跨度？如果不是，你的标记就搞砸了。

# c++ - Eclipse CDT 和 PGI（波特兰）C++ 编译器

> ID：10236556
> 
> 赞同：1
> 
> 时间：2012-04-19T20:51:22.100
> 
> 标签：c++, eclipse, compiler-construction

有人可以告诉我如何设置 Eclipse CDT 以使用 PGI C++ 编译器进行构建吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:21:21.413

通过简单的网络搜索获得此文档：

[www.pgroup.com/doc/pgiug.pdf](http://www.pgroup.com/doc/pgiug.pdf)

通读第 8 章。告诉我是否有帮助。

# math - 让四元数在两个向量之间旋转

> ID：10236557
> 
> 赞同：7
> 
> 时间：2012-04-19T20:51:22.287
> 
> 标签：math, geometry

我有一对向量。如何创建一个从一个旋转到另一个的四元数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T04:53:49.607

单位四元数**q** = cos(F)+ **u** *sin(F) 表示向量**v**围绕轴**u**旋转 2*F 角度。

如果您的向量是**v**和**w**，那么我们应该对它们进行归一化，然后将它们之间的角度计算为 2*F=ArcCos(Dot( **v** , **w** ))。旋转轴方向向量**u** = Normalize(VectorProduct( **v** , **w** ))。现在我们可以构建所需的旋转四元数。

# c++ - 给出数字列表以确定哪个组合为您提供给定值

> ID：10236558
> 
> 赞同：0
> 
> 时间：2012-04-19T20:51:24.583
> 
> 标签：c++

好的，所以我的编程技能真的很新手而且超级生疏，但这是我的问题。我需要一种方法来获取给定数字的列表并将它们以所有组合加在一起以确定哪个组合等于一定数量。我的妻子在百事可乐工作，他们必须手工完成，她让我帮助她。如果可能的话，我会用 C++ 来尝试这个。多谢你们。

PS这是我得到的信息，以防万一。 [http://dl.dropbox.com/u/9609070/Photo/Pepsi.tiff](http://dl.dropbox.com/u/9609070/Photo/Pepsi.tiff)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:53:17.243

我继续做了一个蛮力的事情。如果你让它运行很长时间，它会完成工作，但肯定比人快得多。我使用了一个整数列表来更容易测试，所以每个 int 都应该有一个 double。

```
#include <algorithm>
using std::accumulate;
using std::distance;
using std::includes;
using std::next_permutation;
using std::sort;

#include <fstream>
using std::ifstream;

#include <iostream>
using std::cout;

#include <vector>
using std::vector;

int main()
{
    const int wantedSum = 100; //this is your wanted sum here

    vector<int> v; //stores all of the numbers to choose from
    vector<vector<int>> matches; //stores combinations (no different ordering)

    ifstream inFile ("combination sum.txt"); //file to read values from

    int input;
    while (inFile >> input) //fill v with values
        v.push_back (input);

    inFile.close();

    for (vector<int>::size_type subSize = 1; subSize < v.size(); ++subSize) //go from 1 element at a time to the number to choose from
    {
        vector<int> sub (subSize); 
        sort (v.begin(), v.end()); //sort original vector

        do
        {
            for (vector<int>::iterator it = sub.begin(); it != sub.end(); ++it) //fill subvector with first n values in v
                *it = v.at (distance (sub.begin(), it));

            if (accumulate (sub.begin(), sub.end(), 0) == wantedSum) //check for sum
            {
                sort (sub.begin(), sub.end()); //sort subvector

                bool found = false; //check if same (but different order) as another
                for (const auto &element : matches)
                    if (includes (element.begin(), element.end(), sub.begin(), sub.end()))
                    {
                        found = true;
                        break;
                    }

                if (!found) //if it isn't the same as any
                {
                    matches.push_back (sub); //push sorted vector

                    cout << '{'; //output match

                    for (const auto &element : sub)
                        cout << element << ' ';

                    cout << "\b}\n";
                }
            }
        } while (next_permutation (v.begin(), v.end())); //go onto next permutation of v (this is what causes uber slowness as v's size grows)
    }
} 
```

输入：

```
45
24
3
79
8
30
55
27
34
9 
```

输出：

```
{45 55}
{3 8 34 55}
{9 27 30 34}
{3 9 24 30 34} 
```

执行时间（你的可能会更长）：0.840s

我并不是说这是最好的解决方案，但它确实有效。*当然，与我提供的清单相比，您的清单相当*大，因此需要更长的时间。

哦，其中一些需要 C++11 编译。它可能只是 ranged-for 循环和双直角括号。它们可以用

```
for_each (vec.begin(), vec.end(), some_func); //in algorithm 
```

和

```
vector<vector<int> > v; 
```

分别。如果这可以在合理的时间内完成工作，那就欢呼吧。

编辑：

替换`for (const auto &element : sub)...`为

```
for (vector<int>::const_iterator it = sub.begin(); it != sub.end(); ++it)
    if (includes (element.begin(), element.end(), sub.begin(), sub.end()))
    {
        found = true;
        break;
    } 
```

`std::for_each`如果不是因为您需要访问内部，它将可以替换为`found`，因此它回到了显式循环。

# java - 比较两个不同大小的二维字符串数组

> ID：10236559
> 
> 赞同：-1
> 
> 时间：2012-04-19T20:51:26.497
> 
> 标签：java, arrays, comparison

我有以下二维数组：

```
String[][] array1 = {{"hello", "hi"}{"bye", "two"}};
String[][] array2 = {{"hello", "hi", "three"}{"bye", "maybe", "third"}, {"3", "rd", "Element"}};
String[][] array3 = {{"hello", "hi"}{"bye", "two"}}; 
```

我如何检查它们是否具有相同的值（不同的大小）？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:57:33.090

[`Arrays.deepEquals()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepEquals%28java.lang.Object%5b%5d,%20java.lang.Object%5b%5d%29)

> `public static boolean deepEquals(Object[] a1, Object[] a2)`
> 
> 如果两个指定的数组彼此深度相等，则返回 true。与该`equals(Object[],Object[])`方法不同，该方法适用于任意深度的嵌套数组。
> 
> 如果两个数组引用都为空，或者它们引用的数组包含相同数量的元素并且两个数组中所有对应的元素对都非常相等，则认为两个数组引用是深度相等的。
> 
> `e1`如果满足以下任何条件，则两个可能为 null 的元素`e2`是完全相等的：
> 
> *   e1 和 e2 都是对象引用类型的数组，并且 Arrays.deepEquals(e1, e2) 将返回 true
> *   e1 和 e2 是相同原始类型的数组，并且 Arrays.equals(e1, e2) 的适当重载将返回 true。
> *   e1 == e2
> *   e1.equals(e2) 将返回 true。
> 
> 请注意，此定义允许任何深度的空元素。
> 
> 如果任一指​​定的数组直接或通过一个或多个数组级别间接将自身包含为元素，则此方法的行为是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:31:43.360

您还可以创建自己的方法：

```
public boolean compare(String[][] a, String[][] b){
    boolean result = true;
    int outer = Math.max(a.length, b.length);
    int inner = Math.max(a[0].length, b[0].length);

    for(int i = 0; i<outer; i++){
        for(int j = 0; j<inner; j++){
            if(i < a.length && i < b.length && j < a[0].length && j < b[0].length){
                if(!a[i][j].equals(b[i][j])){
                    result = false;
                }
            }
        }
    }
    return result;
} 
```

# uitableview - iOS Image View 在触摸之前不会渲染图像

> ID：10236561
> 
> 赞同：2
> 
> 时间：2012-04-19T20:51:32.990
> 
> 标签：uitableview, uiview, uiimage

我有一张桌子。该表格的每个单元格都是以 -90 度角转换的另一个表格。此转换表的每个单元格都有一个图像。这些图像通过 GCD 线程来自服务器，当图像可用时，我会调用表 relaodData，但由于某种原因，直到我触摸并尝试滚动该表单元格时，才会显示/渲染图像。所以看起来 setNeedsDisplay API 并没有在正确的时间完成它的工作。我知道它确实在运行循环结束时调用了此方法，但如果这意味着我的运行循环操作系统忙于做其他事情，那么我如何找出它还在做什么，因此没有时间渲染？或者是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:24:41.880

您是否尝试过使用 UIScrollView 而不是 UITableView 进行水平滚动？您可以轻松定义要显示的页面/图像数量，使用分页功能在它们之间滚动。

# python - 如何避免机器人检测？

> ID：10236563
> 
> 赞同：1
> 
> 时间：2012-04-19T20:51:45.203
> 
> 标签：python, web-scraping, mechanize, robots.txt

我正在使用 python+mechanize，试图抓取一个网站。如果我使用链接访问此站点，则会出现登录页面的纯文本版本。这就是我想用我的刮刀看到的。所以：

```
import mechanize

USER_AGENT = "Links (2.3pre1; Linux 2.6.32-5-xen-amd64 x86_64; 80x24)"
mech = mechanize.Browser(factory=mechanize.RobustFactory())
mech.addheaders = [('User-agent', USER_AGENT)]
mech.set_handle_robots(False)

resp = mech.open(URLS['start'])
fnout("001-login.html", resp.read())
resp.close() 
```

`fnout`只是将字符串转储到文件中。然而，当我打开时`001-login.html`，整个页面都是“机器人”这个词。没有其他的。

我没有提出任何其他要求。这不像我加载了页面并且没有加载图像，或者其他什么。这是我提出的第一个请求，我将 User-Agent 与网站使用的链接版本完全相同。我做错了什么（除了试图抓取一个不想被抓取的网站之外）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T20:56:03.547

可能还有其他标头`links`正在发送 Mechanize 不是，反之亦然。使用两者和Mechanize[访问 http://www.reliply.org/tools/requestheaders.php](http://www.reliply.org/tools/requestheaders.php)`links`并查看正在发送的标头。

# postgis - 用于维护 GIS 数据的 Postgresql 与 Oracle

> ID：10236573
> 
> 赞同：0
> 
> 时间：2012-04-19T20:52:16.017
> 
> 标签：postgis

我们目前使用 oracle 和 ArcSDE 维护 GIS 数据。但是，我们想探索更好、更便宜的替代品。我们遇到了使用 postgresql 来维护 gis 数据库。我们的业务需要线性引用和版本控制功能。还需要有拓扑和特征数据集。

我是 Postgresql 的新手。所以，我对它的性能和稳定性一无所知。你们能分享一下与 oracle 相比在 postgresql 性能和稳定性方面的经验吗？我希望数据安全可靠，不会出现任何崩溃。

我们使用 ArcGIS 产品。我们还在探索使用 PostGIS 和/或 ArcSDE 来管理 postgresql 中的数据。由于处理空间数据涉及各种软件产品，我还关心软件更新以及它如何影响数据库维护。

如果您能分享您在这个主题上的专业知识和知识，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T22:47:24.820

PostgreSQL 的性能和稳定性绝对可以与 ORA 媲美。

PostGIS 扩展是您可以从任何免费和开源 (FOSS) 数据库管理系统中获得的关于稳定性、性能和功能的最成熟的地理空间扩展。

PostGIS（或我知道的任何其他 FOSS 数据库）虽然不支持开箱即用的版本控制。你必须自己实现这些。

我假设您知道您可以使用“PostGIS 选项”将 ArcGIS 与 PostgreSQL 一起使用，这意味着您可以放松版本控制 (AFAIK)，但获得可以读取 PostgreSQL 的 (FOSS) 工具的开放性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T05:40:39.977

Postgres 是 ArcSDE 支持的 DBMS。这意味着可用于 Oracle 或 Sql Server 的相同地理数据库功能（验证、复杂对象、复制等）可用于 Postgres。ArcGIS/SDE 数据可以以 PG 的本机几何类型存储，并便于 Esri 的 St_Geometry 和 SDE 二进制格式。从 10.0 及更高版本开始，所有 ArcSDE 支持的 DBMS 都是如此。Postgres 可以跟上并且有时会超越它的成熟竞争对手。哦，是的，而且 PG 是免费的。

另一个秘密是不再需要 ArcSDE 来查看和编辑 ArcGIS 中的 DBMS 空间数据。事实上，甚至不再需要空间数据。所有内容都包含在 10.1 版的 ArcGIS 安装中。许可仍然是一些人的痛处，但成本确实下降了，软件也得到了简化。

也就是说，PostgreSQL 非常稳定，可以处理大数据（物理和逻辑），并带有出色的管理工具和文档。我有没有提到 Postgres 是完全免费的？

# asp.net - 从 asp.net 代码隐藏调用按钮单击

> ID：10236577
> 
> 赞同：0
> 
> 时间：2012-04-19T20:52:33.053
> 
> 标签：asp.net, vb.net, button, click

我有两个按钮，如下所示：

**第一个按钮：**

```
<asp:Button ID="btn1" runat="server" Text="First Button" CausesValidation="False"
     UseSubmitBehavior="False" /> 
```

**第二个按钮：**

```
 <button type="reset" id="btn2" runat="server">
        <span>Second Button</span>
 </button> 
```

现在，如果我单击`btn1`，我需要做一些事情，然后我需要`btn2` `automatically`在需要执行一些客户端操作的过程结束时单击。

这是我需要做的：

```
Protected Sub btn1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btn1.Click
//Do some Stuff

//Here I need to make btn2 click automatically
End Sub 
```

我`btn2`应该这样做：

```
$("#<%=btn2.ClientID%>").click(function () {
//perform some taks
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:58:34.637

这不是服务器端代码的工作方式。当按钮 1 单击时 1) 所有客户端代码将运行 2) 然后将调用服务器端单击按钮。

目前您已经混淆了服务器端代码。你可以做的是：

1.  执行按钮 1 单击代码。

2.  将代码放在按钮 2 上，单击一个单独的函数，然后在按钮 1 代码的末尾调用该函数。

不幸的是，您尝试做的是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:15:35.187

我认为您曾经能够使用`ScriptManager`. 您可以尝试发出客户端脚本，`btn1_Click`当页面在浏览器中加载时，该脚本将在客户端上单击 btn2。

不过我和Beenish在一起。没有任何其他上下文，这听起来是个坏主意。我会尝试`btn1_Click`变成一个 webmethod 并使用 jquery 从客户端调用它。您可以检查[这个问题](https://stackoverflow.com/questions/4119067/asp-net-4-jquery-ajax-webmethod-call)以从 jquery 调用 webmethod

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:04:35.610

听起来你想要的是这样的：

```
$("#<%= btn1.ClientID %>").click(function(){

    //do some stuff

    $("#<%= btn2.ClientID %>").trigger("click");
}); 
```

# xml - xslt - 如何使用 xslt 过滤 XML 文档，保留给定元素，丢弃所有其他元素

> ID：10236584
> 
> 赞同：1
> 
> 时间：2012-04-19T20:52:46.827
> 
> 标签：xml, xslt, xslt-1.0

我有这个xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xml>
    <head>
        <name>This is my XML</name>
        <version>This is my XML</version>   
    </head>
    <body>
        <item id="SH2-99435">
            <properties>
                <property id="69">
                    <name>This is a property</name>
                    <amount>54.13</amount>
                    <estructure id="IZ4">
                        <name>caterpillar</name>
                        <location><zipCode>02210</zipCode><street>South Station</street></location>
                    </estructure>
                </property>
                <features id="ABC3">
                    <feature>If it works, a bug is another feature.</feature>
                    <feature>feature!!</feature>
                </features>
            </properties>
            <coding>
                <codename>Silent Hill 2</codename>
                <developer>Team Silent</developer>
                <publisher>Konami</publisher>
            </coding>
        </item>
        <item id="SH3-4498">
            <text value="it has values like the other item"/>
        </item>       
        <item id="MGS-2">
            <text value="it has values like the other item"/>
        </item>
    </body>
    </xml> 

```

我想实现这一点：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xml>
    <head>
        <name>This is my XML</name>
        <version>This is my XML</version>   
    </head>
    <body>
        <item>
            <properties>
                <property id="69">
                    <amount>54.13</amount>
                    <estructure id="IZ4">
                        <name>caterpillar</name>
                        <location><zipCode>02210</zipCode><street>South Station</street></location>
                    </estructure>
                </property>
            </properties>
        </item>
        <item id="SH3-4498">
            <text value="it should have properties and the selected sons"/>
        </item>       
        <item id="MGS-2" >
            <text value="it should have properties and the selected sons"/>
        </item>
    </body>   
    </xml> 

```

我有这样的东西，可以正确过滤：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >

        <xsl:template match="@*|node()">
            <xsl:copy>
                <xsl:apply-templates select="@*|node()"/>
            </xsl:copy>
        </xsl:template>

        <xsl:template match="xml/body/item/coding" />
        <xsl:template match="xml/body/item/properties/features" />
        <xsl:template match="xml/body/item/properties/property/name" />

    </xsl:stylesheet> 

```

有人告诉我，运行此过滤器将生成 10 个文件，每个文件都有不同的标签；但如果出现新标签，我们将不得不更改 10 个文件以排除不需要的标签，而不是只在需要的文件上添加标签。例如，在另一个文件中，只包含编码，等等。

我试过这个：

```
 <xsl:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns="some:ns">
        <xsl:output omit-xml-declaration="yes" indent="yes" />
        <xsl:strip-space elements="*" />
        <ns:WhiteList>
            <name>amount</name>
            <name>estructure</name>
        </ns:WhiteList>
        <xsl:template match="node()|@*">
            <xsl:copy>
                <xsl:apply-templates select="node()|@*" />
            </xsl:copy>
        </xsl:template>
        <xsl:template
            match="*[not(descendant-or-self::*[name()=document('')/*/ns:WhiteList/*])]" />
    </xsl:stylesheet> 

```

但它不会复制 estructure 的子代。你知道我能做什么吗？

谢谢。

**更新。**增加了这样做的理由，而不是相反，以及更具描述性的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:16:18.203

我不会接受这个答案，但是在回答您的直接问题时，您正在测试作为**estructure**元素的祖先（或自身）的元素，但您忽略了其他任何内容。这意味着结构的后代将**被**忽略。将您的 xsl:if 条件更改为以下

```
<xsl:if 
   test="descendant-or-self::*[generate-id(.)=$copyValue2]|ancestor::*[generate-id(.)=$copyValue2]"> 
```

呸。

老实说，您的第一个 XSLT 更好更简洁。

如果您准确地解释了您在转换中要遵循的规则，这可能会有所帮助。如果规则是复制*除*某些节点之外的所有内容，那么您的第一个 XSLT 就是理想的选择。如果规则是仅复制显式节点，那么您能否更详细地说明需要复制的内容，并且应该可以弄出更好的东西。

**编辑：**

作为对澄清的回应，试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns="some:ns">
   <xsl:output omit-xml-declaration="yes" indent="yes"/>
   <xsl:strip-space elements="*"/>

   <ns:WhiteList>
      <name>amount</name>
      <name>estructure</name>
   </ns:WhiteList>

   <xsl:variable name="whistList" select="document('')/*/ns:WhiteList" />

   <xsl:template match="@*">
      <xsl:copy/>
   </xsl:template>   

   <xsl:template match="*">
      <xsl:if test="descendant-or-self::*[name()=$whistList/*]|ancestor::*[name()=$whistList/*]">
         <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
         </xsl:copy>
      </xsl:if>
   </xsl:template>      
</xsl:stylesheet> 
```

我试图通过使用变量来保存文档查找来稍微整理一下。请注意使用**xsl:if**的原因是您不能在模板匹配中使用变量。

# php - 更新查询 php postgres 无缘无故失败

> ID：10236589
> 
> 赞同：1
> 
> 时间：2012-04-19T20:52:52.550
> 
> 标签：php, postgresql, postgresql-8.4

我在 PHP 中有这段代码，并使用 PostgreSQL 作为数据库。我从 GET 获取所有参数。通过打印检查它们。形成的查询在 Postgres 终端上执行，但在 PHP 脚本中失败。

这是一段代码。

```
<?php

$link = pg_connect("host=localhost dbname=postgres user=postgres password=password") or die('connection failed');

# Building the query
$newq=sprintf("update purchase_info set ....... comments=%s where id=%s",......,$comm,$id);

    print $newq; // This query runs on the postgres terminal
    $query=addslashes($newq); // to escape "" as one of my fields is comments
    $result=pg_query($link,$newq);

    if (!$result) {
        echo "An error occured.\n";
    }
    pg_close($link);
?> 
```

其他查询在同一脚本中运行。该 SQL 语句有大约 14 个字段正在更新。

怎么回事听。感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T21:20:17.810

您不应该使用`addslashes`引用 PostgreSQL 的字符串，您应该使用[`pg_escape_literal`](http://php.net/manual/en/function.pg-escape-literal.php)：

> **pg_escape_literal()**转义用于查询 PostgreSQL 数据库的文字。它返回 PostgreSQL 格式的转义文字。**pg_escape_literal()**在数据前后添加引号。建议使用此功能而不是`pg_escape_string()`。

您永远不应该使用[`addslashes`](http://php.net/manual/en/function.addslashes.php)引用数据库的字符串：

> 强烈建议使用 DBMS 特定的转义函数（例如`mysqli_real_escape_string()`MySQL 或`pg_escape_string()`PostgreSQL）

你应该这样做：

```
$newq = sprintf("update purchase_info set ... comments=%s where id=%d", ..., pg_escape_literal($comm), $id); 
```

我假设这`id`实际上也是一个数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T21:17:13.500

假设您真的想将参数注入 SQL 查询，正确的代码应该是：

```
$newq=sprintf("update purchase_info set ... comments='%s' where id='%s'",
   pg_escape_string($comm), pg_escape_string($id));
// DO NOT USE to addslashes, it is not correct
$result=pg_query($link, $newq); 
```

请注意格式字符串中 %s 周围的单引号。此外，如果 id 是整数，最好使用 %d （无引号）而不是 '%s'

# r - 如何在 R 中将数字组合成字符串？

> ID：10236591
> 
> 赞同：3
> 
> 时间：2012-04-19T20:52:54.910
> 
> 标签：r

我有一个数据框，其数字类似于：

```
df$X1    df$X2

.9     1.442 
```

我如何使用此数据框中的元素为置信区间创建标签，该标签将是格式良好的字符串：

```
(0.90, 1.42) 
```

我迷路了，`paste`似乎没有任何效果：/`as.character``c()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T20:59:14.363

怎么样：

```
paste("(",df$X1,",",df$X2,")",sep="") 
```

在您的示例中，您可能希望对数字进行四舍五入，但四舍五入不正确。你想要小数点后的特定位数吗？

此外，“1”和“2”作为 data.frame 中的名称不受欢迎 - 请参阅`?make.names`

**编辑：**

在这种情况下四舍五入，我喜欢使用`formatC()`：

```
paste("(", formatC(df$X1, digits = 2, format = "f"), ",",
  formatC(df$X2, digits = 2, format = "f"), ")", sep = "") 
```

但是，如果有小于 的值`.005`，请注意它们最终会是`0.00`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T21:57:53.607

+1 给@BenBarnes，我只想补充一点。除了（或代替）`formatC()`您还可以使用`round(df$X1, digits=2)`. 您可能会发现`round`比 更简单`formatC()`。此外，这不会对作为模式字符的输出状态产生任何影响。

# shell - 使用脚本设置无密码 SSH

> ID：10236593
> 
> 赞同：0
> 
> 时间：2012-04-19T20:52:59.430
> 
> 标签：shell, ssh, installation

我需要使用 shell 脚本和为用户提供的密码在主机列表上设置无密码 SSH。

我不确定哪种方式最好。我虽然关于使用期望，但我不喜欢“破解”到交互式会话的方式。还有其他方法吗？

安装脚本需要在 Red Hat 和 SUSE 上非常稳定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:03:13.590

已经有一个程序可以做到这一点：ssh-copy-id。当然你需要给它适当的密码；一个陈旧的工具是程序“expect”。

# javascript - 在 NetSuite 中获取库存数量时出现未定义错误

> ID：10236598
> 
> 赞同：0
> 
> 时间：2012-04-19T20:53:23.123
> 
> 标签：javascript, netsuite

我遇到的问题是在 NetSuite 中执行用户事件脚本时始终出现以下错误：

```
TypeError: Cannot read property "amazon" from undefined 
```

NetSuite 使用 Javascript 在客户端和服务器端执行业务逻辑。对于那些没有 NetSuite 经验的人，用户事件脚本会在服务器上执行。

我可以分享的代码如下：

```
var qtyAvail = 0; 
qtyAvail = rec.getValue('locationquantityavailable');
if(!qtyAvail || qtyAvail === 'undefined' || qtyAvail === null || isNaN(qtyAvail) || typeof qtyAvail === "undefined"){
                qtyAvail = 0;

            }   
  location = rec.getValue(kColumns[3]);
            if(location == 7 ||location == 16 ||location == 20 ||location == 3 ||location == 19 ||location == 1 ||location == 27 ||location == 27){    
                if(location == 7){
                    fba = qtyAvail;
                    if(!fba){
                        qtyAvail = 0;
                    }                    
                }
...more business code here....
 return {

            amazon: fba,
            ups: upsName
 } 
```

我将返回值称为：

```
var itemQty = getLocationQty(item);
           if(itemQty.amazon){
               var fbaStock = itemQty.amazon;
           } else { fbaStock = 0;} 
```

此代码适用于我的某些位置，但如果在特定位置没有可用数量，它将返回未定义，而不是像我期望的那样将 qtyAvail 设置为 0。

我是否错过了在任何地方检查未定义的比较，或者其他人是否看到代码有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:40:52.007

从您包含的代码段来看，您似乎没有初始化 fba 的值。

在开始时添加`var fba=0;`，看看是否可以解决它。

或者您可能打算将 qtyAvail 分配给亚马逊而不是亚马逊物流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:20:55.947

从您共享的代码位和原始描述看来，您从函数返回的对象文字实际上并未被返回。'amazon' 是该对象的属性，并且由于错误表明它是未定义的，因此该函数没有返回任何内容。

在 JS 引擎中运行以下代码：

```
function foo()
{
    return;
}

alert( foo().amazon ); 
```

你会看到：

> TypeError：无法读取未定义的属性“亚马逊”

我看到您找到了解决方案，我只是看不出它与您报告的原始问题有什么关系。我错过了什么吗？

**另外**，虽然不是您的问题的一部分，但我想我可能会提到另一种编写位置检查的方法，更容易阅读：

```
var acceptedLocations = [ 7, 16, 20, 3, 19, 1, 27 ];
if(acceptedLocations.indexOf(location) > 0)
{
  //  Do rad stuff
} 
```

# transactions - 付款处理，销售成本？

> ID：10236601
> 
> 赞同：0
> 
> 时间：2012-04-19T20:53:29.290
> 
> 标签：transactions, payment-gateway, payment, payment-processing, payment-services

在我们的网站上，我们目前收取下载费用，我们有与此相关的销售成本，即艺术家的版税。我们知道如何通过 BarclayCard 收款，但我想知道是否有人知道如何自动化流程将钱转给艺术家。这需要我们完成还是他们会要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:52:56.650

您通常会从客户那里收取单笔付款，然后将其存入您的商家帐户。

如果您想在成本/特许权使用费之间分配该值，则需要稍后进行。这不是支付网关会涉及的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:22:01.913

如果您有一个真正的商家商家，您将无法做这样的事情，因为一旦处理付款，资金就会直接进入商家的银行账户。如果您希望拆分付款，则需要在付款流程之外设计一个系统。

如果您使用第三方支付提供商，他们可能会提供一项功能，允许您在多个收件人之间拆分付款。[Paypal Adaptive Payments](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)提供了这样的功能。

# ruby-on-rails-3 - 如何在 rake 任务中运行 Guardfile 中的所有内容？

> ID：10236604
> 
> 赞同：2
> 
> 时间：2012-04-19T20:53:48.280
> 
> 标签：ruby-on-rails-3, rake, guard

我在一个红宝石、非 Rails 项目中使用 Guard。（是的，rails 标签就在那里，所以合适的人会找到它。）

我有一个由我的 Guardfile 持续构建的系统设置。当我 run_all 时，所有的 Guards 基本上都在运行一个构建，除了查看某些文件并有选择地构建。

我希望可以选择从 rake 任务中运行构建。

我想我应该能够在 rake 任务中做这样的事情，但我不明白 run_all 在这里期望什么......

```
task :build do
  require 'guard'
  Guard.setup :guardfile => 'Guardfile'
  Guard.run_all 
end 
```

感谢您的任何提示...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T16:37:52.857

Answering my own lame question. I found the answer in the github wiki under "Guard Cookbook".

[https://github.com/guard/guard/wiki/Use-Guard-programmatically-cookbook](https://github.com/guard/guard/wiki/Use-Guard-programmatically-cookbook)

# python - 为什么jsmin在python子进程中运行时会提前退出？

> ID：10236606
> 
> 赞同：2
> 
> 时间：2012-04-19T20:53:52.430
> 
> 标签：python, subprocess, stdout, jsmin

我已经下载并编译了 jsmin.c，并在终端的 javascript 文件上运行它，它似乎工作得很好。但是当我从 python 脚本中的 os.system() 或 os.popen() 调用中调用它时（在同一个输入文件上），输出文件（js 文件的缩小版本）被截断，就好像 stdout 是在子进程退出之前没有被刷新，或者好像 jsmin 提前终止了，或者好像磁盘缓冲发生了什么事情。

但这些事情似乎都不是这样。退出值是我从 main() 返回的任何值，即使输出被截断，添加对 fflush(stdout) 的调用没有任何区别，并且在调用 jsmin 后从同一个子 shell 中调用 sync 不会使任何区别。

我尝试用对 fputc() 的调用替换对 putc() 的调用，起初它似乎解决了问题（出于某种深不可测的原因？），但随后，莫名其妙地，问题又开始发生，现在可靠地发生了。离奇？

我会说这是 jsmin.c 的一些问题，但是当从命令行运行时，该程序在同一个输入文件上运行良好，因此它与从 python 子进程运行它有关。

这是我的子流程调用：

```
result = os.system('jsmin < ' + tpathname + ' > ' + tpathname + '.min') 
```

（我已将 jsmin 放在路径中，并且它正在运行，我在 .min 文件中获得了大部分预期结果。）

谁能想象导致这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:34:43.093

Stack Overflow 不会让我在 5 个小时或类似的时间内回答我自己的问题，所以这个“答案”最初是作为编辑添加的。（它也不让我聊天，所以评论延伸了一点。）

我发现了问题。问题出在为 jsmin 创建输入文件然后在其上调用 jsmin 的 python 程序上。它正在创建一个文件，但未能关闭它（还），然后在其上调用 jsmin。所以 jsmin 没有提前终止，也没有截断它的输出；相反，它在（迄今为止）不完整的输入文件上运行。（呃。）

我会比我更早意识到这一点，除了 python 程序最终会关闭 jsmin 的输入文件（通过退出），所以当我检查它时，它看起来已经完成了。只是在 jsmin 处理它时它还没有完成。

这正是“with”成语的动机之一：

```
with open(targetpath, 'w+') as targetfile:
   ..code that writes to targetfile 
```

# asp.net - 访问数据库更改未反映在 IIS 上

> ID：10236613
> 
> 赞同：0
> 
> 时间：2012-04-19T20:54:09.210
> 
> 标签：asp.net

我有一个 ASP.NET 应用程序使用访问数据库。我在数据库中添加了一个新表。我用从新表中选择的数据填充了一个下拉列表。该应用程序在我的本地机器上运行。但是在我在 IIS 上部署应用程序后，下拉列表中没有数据。以一种奇怪的方式，对数据库所做的更改并没有反映到 IIS。我应该设置 IIS 上的任何设置以使 IIS 感知新表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:03:00.877

确保对访问 db 文件所在的文件夹有 IUSR、IIS_IUSR、LOCAL 和 NETWORK SERVICE 的修改权限，通常这是更新或使用它们创建的问题。

# git - github上的权限被拒绝（公钥）

> ID：10236615
> 
> 赞同：5
> 
> 时间：2012-04-19T20:54:24.520
> 
> 标签：git, github

我通过 M Hartl 的教程来理解 Ruby on Rails。
我已经完成了第 6 章和`git push`git-hub 上的工作，但我收到了这个错误：

> rene@Linux-Ubuntu:~/rails_projets/sample_app$ git push 权限被拒绝（公钥）。
> 致命：远端意外挂断

我重新安装了一个新的公钥作为 Help-Git 指令

```
 debug1: Next authentication method: publickey
    debug1: Offering DSA public key: rene@Linux-Ubuntu
    debug1: Authentications that can continue: publickey
    debug1: Offering RSA public key: rene@Linux-Ubuntu
    debug1: Authentications that can continue: publickey
    debug1: Trying private key: [~/.ssh/id_rsa]
    debug1: Trying private key: [~/.ssh/id_dsa]
    debug1: No more authentication methods to try.
    Permission denied (publickey). 
```

我在存储库中有文件：

> rene@Linux-Ubuntu:~/.ssh$ ls
> ak.bak config id_dsa id_dsa.pub id_rsa id_rsa.pub key_backup/ known_hosts

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:12:51.043

你有告诉 github 你的公钥吗？

[https://github.com/settings/ssh](https://github.com/settings/ssh)

（这`id_rsa.pub`是你需要的内容）

# mysql - 真正的优化需要 mysql_close() 吗？

> ID：10236630
> 
> 赞同：0
> 
> 时间：2012-04-19T20:55:34.727
> 
> 标签：mysql, optimization

像很多 PHP 编码器一样，我没有使用 mysql_close()。但是我正在处理不断增加的用户群，昨天我在我的数据库上遇到了第一个太多的连接。

在我的代码早期对 mysql_close() 真的有益吗，因为仍在加载的页面仍未连接到数据库。或者它只是被认为是糟糕的优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:00:52.320

如果您不再需要它，关闭连接并不是糟糕的优化。如果您正在处理从数据库中获取的数据，并且如果您不打算再次将结果存储在数据库中，则可以关闭连接。

```
$db = connect(...);
$data =$db->run_query(...)->fetchAll();
// closing the connection here is good
$db->close();
foreach($data as $key=>$value){
   //process data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:24:58.800

通常不需要使用 mysql_close()，因为非持久打开的链接会在脚本执行结束时自动关闭。

不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

[http://php.net/manual/en/function.mysql-close.php](http://php.net/manual/en/function.mysql-close.php)

我相信它不会有太大的不同。相反，您可以尝试优化您的数据库结构。

# coldfusion - 做 “写”允许文件在重命名/写入文件之前执行？

> ID：10236634
> 
> 赞同：0
> 
> 时间：2012-04-19T20:55:45.403
> 
> 标签：coldfusion, upload, cffile

我已经为我的客户创建了一个文件上传，我正在努力使事情尽可能安全。我正在使用以下代码来处理文件上传。想法是重命名文件并将其写入 Web 根目录之外的文件夹。

问题是，在“写入”过程中，ColdFusion 是否有可能在将文件写入文件夹并使用以下代码重命名之前允许执行恶意文件？

这是我组件的顶部...

```
<cfset destdir = "/folder/upload/"> 
```

这是处理文件的代码的一部分......

```
<cfset var local = structNew()>
<cfset local.response = structNew()>
<cfset local.response['catcher'] = ''>
<cfset local.filename = listGetAt(#arguments.file#, 1, ".")>
<cfset local.fileext = ListLast(#arguments.file#, ".")>
<cfset local.nfile = #CreateUUID()# & "." & #local.fileext#>

<cftry>
  <cffile action="write" file="#destdir##local.nfile#" output="#arguments.content#">
  <cfset local.response['newfilename'] = local.nfile>
  <cfcatch type="any">
  <cfset local.response['catcher'] = "Write Exception " & #cfcatch.Detail# & " | " & #cfcatch.Message#>
  <cfset local.response['success'] = true>
  <cfreturn local.response>
  </cfcatch>
</cftry> 
```

我应该提到文件上传过程是由 CFC 和 Valums 的 AjaxUpload 插件处理的......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:17:57.933

您的示例代码看起来像是在做与普通文件上传不同的事情。您没有 cffile action="upload"，看起来您已经检索到文件的内容。您应该将它们限制为`local.fileext`您认为安全的文件类型，并且`Arguments.content`应该检查它以确保它不是恶意的。一旦您将文件写入 webroot，就可以通过 url 对其进行探测，因此您必须在写入之前验证一切都是安全的。

使用正常的表单发布文件上传过程应该是这样的：

1.  用于`cffile action="upload"`将文件上传写入 webroot 之外的临时文件夹
2.  验证文件的完整性以确保它不是恶意的（如果文件不正确则删除）
3.  将经过验证的文件移动到其最终位置`cffile action="move"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T17:59:05.900

要回答您提出的问题-您的“写入”操作是单个操作。您没有移动和重命名原始文件（至少在上面的代码中没有）。相反，您正在创建一个文件句柄，输出一个缓冲区并关闭句柄。在释放句柄之前无法执行代码。如果您正在移动、重命名或复制文件本身，那么您可能会担心会出现间隙 - 足以允许执行。您还应该知道，如果您打算在单个请求线程中写入然后执行文件，则文件 I/O 可能会产生问题（尝试访问文件时可能会出错，因为 Java 可能会在收到通知时稍微领先于操作系统如果你看到我在说什么，手柄释放）。

这是一篇关于 cffile hacking 的帖子，它可能会揭示您问题的边缘。

[http://www.coldfusionmuse.com/index.cfm/2009/9/18/script.insertion.attack.vector](http://www.coldfusionmuse.com/index.cfm/2009/9/18/script.insertion.attack.vector)

注意 - 这是我的理解......非常可靠，但这个名单上有一些非常聪明的人，包括那些已经做出回应的人。不想在这里偷走任何人的风头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:53:24.560

在上传时重命名文件并将其放置在 Web 根目录之外是一个好主意，但仍有一些基本要点可以提高 Coldfusion 中文件上传的安全性。

对于初学者，带有动作上传的cffile 有一个属性**“accept”**，您可以在其中指定文件上传允许的**mime 类型**（逗号分隔列表）。
cffile 还有一个**“mode”**属性（仅适用于 linux）来设置文件的**权限**。
来源： http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content= [Tags_f_02.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_f_02.html)

我不认为上传的恶意文件可以在上传时自动执行，但采取预防措施是一个好习惯。

# java - API 抛出 java.io.UnsupportedEncodingException

> ID：10236640
> 
> 赞同：6
> 
> 时间：2012-04-19T20:56:08.840
> 
> 标签：java

我正在使用专有 API 在 Eclipse 中开发 Java 程序，它在运行时抛出以下异常：

```
java.io.UnsupportedEncodingException: 
    at java.lang.StringCoding.encode(StringCoding.java:287)
    at java.lang.String.getBytes(String.java:954)... 
```

我的代码：

```
private static String SERVER = "localhost";
private static int PORT = 80;
private static String DFT="";
private static String USER = "xx";
private static String pwd = "xx";

public static void main(String[] args) {

    LLValue entInfo = new LLValue();
    LLSession session = new LLSession(SERVER, PORT, DFT, USER, pwd);

    try {
        LAPI_DOCUMENTS doc = new LAPI_DOCUMENTS(session);
        doc.AccessPersonalWS(entInfo);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

会话似乎打开时没有错误，但在 doc.AccessEnterpriseWS(entInfo) 处引发了编码异常

通过研究此错误，我尝试使用编译器的 -encoding 选项，更改编辑器的编码等。

我的问题是：

1.  如何找出我尝试使用的 .class 文件的编码？
2.  我应该将我的新程序的编码与 API 的编码相匹配吗？
3.  如果java是机器独立的，为什么没有标准编码？

我已经阅读[了这个](https://stackoverflow.com/questions/4927575/java-compiler-platform-file-encoding-problem)堆栈跟踪和[这个](http://illegalargumentexception.blogspot.ca/2009/05/java-rough-guide-to-character-encoding.html#javaencoding_sourcefiles)指南——

任何建议将不胜感激！

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:04:34.820

在调试器中运行它，并在`String.getBytes()`或上设置断点`StringCoding.encode()`。两者都是 JDK 中的类，因此您可以访问它们并且应该能够看到第三方传入的内容。

[字符编码](http://en.wikipedia.org/wiki/Character_encoding)用于指定如何解释原始二进制文件。CP1252 中英文 Windows 系统上的默认编码。其他语言和系统可能使用不同的默认编码。作为一个快速测试，您可以尝试指定 UTF-8 以查看问题是否会神奇地消失。

如[本问题](https://stackoverflow.com/questions/1006276/what-is-the-default-encoding-of-jvm)所述，JVM 使用操作系统的默认编码，尽管您可以覆盖此默认值。

在不了解您尝试使用的第三方 API 的更多信息的情况下，很难说出他们可能使用的编码。不幸的是，从`StringCoding.encode()`它的实现来看，您可以通过几种不同的方式获得`UnsupportedEncodingException`. 使用调试器单步执行应该有助于缩小范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:30:49.000

在我看来，好像专有 API 中的某些东西正在`String.getBytes`使用字符集的空字符串进行调用。

我编译了以下类

```
public class Test2 {
    public static void main(String[] args) throws Exception {
        "test".getBytes("");
    }
} 
```

当我运行它时，我得到了以下堆栈跟踪：

```
线程“主”java.io.UnsupportedEncodingException 中的异常：
        在 java.lang.StringCoding.encode(StringCoding.java:286)
        在 java.lang.String.getBytes(String.java:954)
        在 Test2.main(Test2.java:3)

```

如果这与编写类文件的编码有关，我会感到惊讶。在我看来，这是代码的问题，而不是您可以通过更改文件编码或编译器/JVM 开关来解决的问题。

我不知道这个专有 API 应该做什么或它是如何工作的。也许它期望在 Java EE 或 Web 应用程序容器中运行？也许它有一个错误？也许它需要更多配置才能运行而不会引发异常？鉴于它是专有的，您可以从供应商那里获得任何支持吗？

# java - 多任务运行器算法中的性能不佳

> ID：10236644
> 
> 赞同：2
> 
> 时间：2012-04-19T20:56:23.187
> 
> 标签：java, performance, concurrency

在我看来，使用我自己的以下 SupervisedExecutor 和 ExecutorSuperviser 实现，我的性能很差，你认为这段代码效率低下的是什么？我想学习如何提高它的效率。

***ExecutorSupervisor 类：***

```
public class ExecutorSuperviser {
private SupervisedExecutor[] threadPool;
private int poolSize = 0;
private LinkedList<Runnable> q;\\my own implementation of linkedlist
public ExecutorSuperviser(int nThreads) {
    threadPool=new SupervisedExecutor[poolSize=nThreads];
    q=new LinkedList<Runnable>();
    init();
}
public void execute(Runnable r) { 
    synchronized (q) {
        q.addToTail(r);
    }
    for (int i=0;i<poolSize;i++) 
            if (!threadPool[i].isBusy()) {
                if (!threadPool[i].isAlive()) threadPool[i].start();
                threadPool[i].interrupt();
                return;
            }

}
private void init() {
    for (int i=0;i<poolSize;i++) {
        threadPool[i]=new SupervisedExecutor(this);
    }

}
public Object getLock() {
    return q;
}
public Runnable getTask() {
    return q.removeHead();
}
public void terminate() {
    for (int i=0;i<poolSize;i++) 
        threadPool[i].terminate();
}
public void waitUntilFinished() {
    while (!isFinished()) {
        try {
            Thread.sleep(Thread.MAX_PRIORITY);
        } catch (InterruptedException e) {}
    }
}
private boolean isFinished() {
    for (int i=0;i<poolSize;i++) 
        if (threadPool[i].isBusy()) return false;
    return q.isEmpty();
}

} 
```

***监督执行者类：***

```
public class SupervisedExecutor extends Thread {
    private boolean   terminated = false;
    private Boolean busy = false;
    private ExecutorSuperviser boss;
    SupervisedExecutor (ExecutorSuperviser boss) {
        this.boss=boss;
    }
    public void run() {
        while (!terminated) {
            try {
                sleep(MAX_PRIORITY);
            } catch (InterruptedException e) {
                synchronized (busy) {
                    busy=true;
                }
                Runnable r;
                while (true) {
                    synchronized (boss.getLock()) {
                        r=boss.getTask();
                    }
                    if (r!=null) r.run();
                    else break;
                } 
                synchronized (busy) {
                    busy=false;
                }
            }
        }
    }

    public boolean isBusy() {
        boolean isBusy;
        synchronized (boss.getLock()) {
            isBusy=busy;
        }
        return isBusy;
    }
    public void terminate() {
        terminated=true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:20:47.947

以下具有以下优点的解决方案怎么样：

1.  作为[ThreadPoolExecutor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html#getActiveCount%28%29)的子类，您不必`ThreadPoolExecutor`为了获得`waitUntilFinished()`您所追求的功能而重新实现为您所做的一切。

2.  通过利用`ReentrantLock`,`Condition`和`await()`/`signal()`您可以避免忙于等待，这肯定会损害性能。

此实现通过利用`beforeExecute()`和公开的`afterExecute()`方法`ThreadPoolExecutor`来保持我们自己的活动任务计数。我不使用`getActiveCount()`，因为根据 JavaDoc，它不能保证准确的答案（尽管也许`ThreadPoolExecutor`它确实提供了准确的答案，但我需要进一步研究才能确定）。

```
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.ReentrantLock;

public class WaitableThreadPoolExecutor extends ThreadPoolExecutor
{
    private Condition waitCondition;
    private ReentrantLock lock;
    private int taskCount = 0;

    public WaitableThreadPoolExecutor( int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue<Runnable> workQueue )
    {
        super( corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue );

        lock = new ReentrantLock( );
        waitCondition = lock.newCondition( );
    }

    // if isEmpty() is true, then there is no need to block
    // otherwise, wait until waitCondition is signaled
    public void waitUntilFinished( )
    {
        lock.lock( );
        try
        {
            while ( !isEmpty( ) )
                waitCondition.await( );
        }
        catch ( InterruptedException e )
        {
            e.printStackTrace();
        }
        finally
        {
            lock.unlock( );
        }
    }

    // the ThreadPool is empty if our taskCount is 0 and the
    // work queue is empty (this may not be bullet-proof, for one
    // thing, I'm hesitant to use getActiveCount() because it
    // does not guarantee an exact answer
    protected boolean isEmpty( )
    {
        lock.lock( );
        try
        {
            return taskCount == 0 && getQueue( ).isEmpty( );
        }
        finally
        {
            lock.unlock( );
        }
    }

    // increment our task count before executing each task
    @Override
    protected void beforeExecute( Thread t, Runnable r )
    {
        super.beforeExecute( t, r );

        lock.lock( );
        try
        {
            taskCount += 1;
        }
        finally
        {
            lock.unlock( );
        }
    }

    // decrement our task count after executing each task
    // then, if the pool is empty, signal anyone waiting
    // on the waitCondition
    @Override
    protected void afterExecute( Runnable r, Throwable t )
    {
        super.afterExecute( r, t );

        lock.lock( );
        try
        {
            taskCount -= 1;

            if ( isEmpty( ) ) waitCondition.signalAll( );
        }
        finally
        {
            lock.unlock( );
        }
    }

    public static void main( String[] args )
    {
        WaitableThreadPoolExecutor pool = new WaitableThreadPoolExecutor( 2, 4, 5000, TimeUnit.MILLISECONDS, new LinkedBlockingQueue<Runnable>( ) );

        for ( int i = 0 ; i < 10 ; i++ )
        {
            final int threadId = i;

            pool.execute( new Runnable( )
            {
                @Override
                public void run( )
                {
                    try { Thread.sleep( (int) ( Math.random( ) * 5000 ) ); } catch ( InterruptedException e ) { }

                    System.out.println( threadId + " done." );
                }
            });
        }

        pool.waitUntilFinished( );

        System.out.println( "Done waiting." );
    }
} 
```

我包含了一个简单的`main()`方法，您可以将其用作测试用例。它启动 10 个线程，这些线程在打印完成之前等待随机时间。然后主线程调用`waitUntilFinished()`。

结果看起来像（主要的一点是`Done waiting.`总是最后打印：

```
1 done.
2 done.
0 done.
4 done.
3 done.
5 done.
7 done.
8 done.
6 done.
9 done.
Done waiting. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:21:57.867

就个人而言，我发现使用普通的 ExecutorService 更短更容易。

注意：这是您需要的所有代码。

```
ExecutorService es = Executors.newCachedThreadPool();

List<Future<Void>>futures = new ArrayList<Future<Void>>();
for (int i = 0; i < 10; i++) {
    final int threadId = i;
    futures.add(es.submit(new Callable<Void>() {
        @Override
        public Void call() throws InterruptedException {
            Thread.sleep((int) (Math.random() * 1000));
            System.out.println(threadId + " done.");
            return null;
        }
    }));
}
for (Future<Void> future : futures)
    future.get();
System.out.println("Done waiting.");

es.shutdown(); 
```

印刷

```
2 done.
4 done.
7 done.
6 done.
8 done.
5 done.
9 done.
1 done.
3 done.
0 done.
Done waiting. 
```

# ruby-on-rails - 让在控制器/视图中工作的方法在模型中运行，Ruby on Rails

> ID：10236645
> 
> 赞同：0
> 
> 时间：2012-04-19T20:56:26.803
> 
> 标签：ruby-on-rails, ruby, model-view-controller, methods, model

我正在尝试根据用户的位置向位置列下的用户模型添加一个字符串。我已将所有设置都设置为知道@city+@state 的值已添加到正确模型中的相应列中。问题是，request.location.city 和 request.location.state 似乎在控制器和视图中正常运行，但在模型中却没有。

```
def add_location
      @city = request.location.city
      @state = request.location.state
      @location = @city+@state
      self.location = @location
    end 
```

创建用户时，不会创建诸如“losangelescalifornia”之类的字符串，而是不会创建任何内容。当我定义@city = "bob" 和@state = "cat" 时，所有创建的用户在适当的位置都有"bobcat"。我知道除了这些基于地理位置的方法之外，一切都在运行。所以我的问题是，我将如何让这些方法（如果不是它们，请纠正我）在模型中发挥作用，即 request.location.city 和 request.location.state？提前谢谢了 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:53:39.140

大多数情况下，我同意 Rudi 的方法，但我会提供更多解释。您正在努力解决的概念是[MVC 架构](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)，它是关于分离职责的。模型应该处理与数据库（或其他后端）的交互，而不需要了解它们正在使用的上下文（无论是 HTTP 请求还是其他），视图不需要了解后端和控制器处理两者之间的交互。

因此，对于 Rails 应用程序，视图和控制器可以访问`request`对象，而模型则不能。如果你想将当前请求中的信息传递给你的模型，这取决于你的控制器。我将您的定义`add_location`如下：

```
class User < ActiveRecord::Base

  def add_location(city, state)
    self.location = city.to_s + state.to_s  # to_s just in case you got nils
  end

end 
```

然后在你的控制器中：

```
class UsersController < ApplicationController

  def create  # I'm assuming it's create you're dealing with
    ...
    @user.add_location(request.location.city, request.location.state)
    ...
  end
end 
```

我不喜欢`request`直接传递对象，因为这确实保持了模型与当前请求的分离。该`User`模型不需要了解`request`对象或它们如何工作。它所知道的是它得到了 a`city`和 a `state`。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:03:37.517

request 变量在模型中不可用，因为它取决于当前的 HTTP 请求。您必须将模型作为参数传递给模型。

```
def your_action
  ...
  @model.add_location(request)
  ...
end

def add_location(request)
  .. 
end 
```

# android - 更新时完全卸载并重新安装 Android 应用程序？

> ID：10236648
> 
> 赞同：3
> 
> 时间：2012-04-19T20:56:38.810
> 
> 标签：android, installation, alarmmanager

我想发布我的应用程序的新版本。但我希望它再次重新安装。

就像先卸载然后安装（就像第一次安装一样）。无论如何我可以做到吗？还是强制用户先卸载应用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T09:45:21.023

如果您使用不同的密钥签署新的 apk，用户在尝试升级现有安装时会遇到错误。这可能是在不更改包名称的情况下最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:10:25.210

正如 Jens 所说，除非您使用不同的软件包名称重新安装（也不是一个好主意），否则您无法真正做到这一点。如果需要，您必须检测您的版本并手动重置您的首选项等。这是android的一个非常烦人的功能。我一直在开发一个地图应用程序，该应用程序在存储一些背景数据方面存在完全相同的问题。

您通常可以检查首次创建首选项的位置。很多人会使用 if(preference !=null) 来设置它们，因为在预安装的应用程序中，您已经在捆绑包中拥有该偏好，它不会更新或生成新的。

尝试将首选项检查器设置为 if(preference != newValueOfPreference)

如果这不是您的捆绑数据在安装时生成的方式，您将不得不找出它是如何生成的并获得该钩子。

# java - Java 如何读写内部属性文件？

> ID：10236649
> 
> 赞同：2
> 
> 时间：2012-04-19T20:56:42.313
> 
> 标签：java, properties

我有一个文件用来保存我的程序在执行时需要的系统信息。该程序将定期读取并写入它。我该怎么做呢？除其他问题外，我遇到了路径问题

例子

![在此处输入图像描述](../Images/214b81b7a189f87f21dde67d463d8efa.png)

如果将应用程序部署为可运行的 jar，我如何读取/写入此属性文件

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T21:00:12.953

看看[http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)

您可以利用此类在属性/配置文件中使用您的键=值对

您问题的第二部分，如何构建可运行的 jar。我会用 maven 来做，看看这个：

[如何使用 Maven 创建具有依赖关系的可执行 JAR？](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)

和这个 ：

[http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)

我看到你没有完全使用 Maven 来构建你的项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:24:41.737

您不能写入作为 ZIP 文件的一部分存在的文件......它不作为文件系统上的文件存在。

考虑过 Preferences API 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T17:46:15.763

要从文件中读取，您可以使用扫描仪将文件阅读器声明为

```
Scanner diskReader = new Scanner(new File("myProp.properties")); 
```

之后，例如，如果您想从属性文件中读取布尔值，请使用

```
boolean Example = diskReader.nextBoolean(); 
```

如果您不想写入文件，它会有点复杂，但我就是这样做的：

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Random;
import java.util.Scanner;

public class UpdateAFile {

    static Random random = new Random();
    static int numberValue = random.nextInt(100);

    public static void main(String[] args) {
        File file = new File("myFile.txt");
        BufferedWriter writer = null;
        Scanner diskScanner = null;

        try {
            writer = new BufferedWriter(new FileWriter(file, true));
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            diskScanner = new Scanner(file);
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }

        appendTo(writer, Integer.valueOf(numberValue).toString());
        int otherValue = diskScanner.nextInt();
        appendTo(writer, Integer.valueOf(otherValue + 10).toString());
        int yetAnotherValue = diskScanner.nextInt();
        appendTo(writer, Integer.valueOf(yetAnotherValue * 10).toString());

        try {
            writer.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    static void appendTo(BufferedWriter writer, String string) {
        try {
            writer.write(string);
            writer.newLine();
            writer.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

} 
```

然后通过以下方式写入文件：

```
diskWriter.write("BlahBlahBlah"); 
```

# c# - Facebook C# SDK 无法获取我/帐户

> ID：10236651
> 
> 赞同：1
> 
> 时间：2012-04-19T20:57:03.650
> 
> 标签：c#, facebook, sdk, facebook-c#-sdk

我正在尝试编写一个 Windows 服务，该服务将在运行时将结果发布到我的 Facebook 页面。

我刚刚下载了 Facebook C# SDK v6.0.10.0 并在 .Net 4.0 中编写了 windows 应用程序

我创建了一个 facebook 应用程序帐户并获得了所需的 AppID 和密码。

最终目标是将这个 Windows 服务发布在我的 facebook 页面墙上作为页面而不是应用程序用户。

当我去获取我的 Facebook 应用程序的帐户时，我不断收到错误消息。

```
string strAppID = "my app api id";
string strSecret = "my app secret code";
Facebook.FacebookClient fbClient = new Facebook.FacebookClient();
fbClient.AppId = strAppID;
fbClient.AppSecret = strSecret;
dynamic ac = fbClient.Get("oauth/access_token", new
{
    client_id = strAppID,
    client_secret = strSecret,
    grant_type = "client_credentials"
});

string strAccessToken = String.Empty;
strAccessToken = ac.access_token;
if (!String.IsNullOrEmpty(strAccessToken))
{

    fbClient = new Facebook.FacebookClient(strAccessToken);
    fbClient.AccessToken = strAccessToken;
    fbClient.AppId = strAppID;
    fbClient.AppSecret = strSecret;

    //Here is where it is bombing
    dynamic fbAccounts = fbClient.Get("/me/accounts");

    fbClient = new Facebook.FacebookClient(strAccessToken);
    fbClient.AccessToken = strAccessToken;
    fbClient.AppId = strAppID;
    fbClient.AppSecret = strSecret;

    dynamic me = fbClient.Get("**Name of the facebook page I am trying to post to**");

    string strPageID = String.Empty;
    strPageID = me.id;

    string strPageAccessToken = String.Empty;

    //Loop over the accounts looking for the ID that matches your destination ID (Fan Page ID)
    foreach (dynamic account in fbAccounts.data)
    {
        if (account.id == strPageID)
        {
            //When you find it, grab the associated access token and put it in the Dictionary to pass in the FB Post, then break out.
            strPageAccessToken = account.access_token;
            break;
        }
    }

    try
    {
        fbClient.AccessToken = strPageAccessToken;
        var args = new Dictionary<string, object>();
        args["message"] = "Testing 123";
        fbClient.Post("/" + strPageID + "/feed", args);

    }
    catch (Facebook.FacebookOAuthException ex)
    {
        // oauth exception occurred
    }
    catch (Facebook.FacebookApiLimitException ex)
    {
        // api limit exception occurred.
    }
    catch (Facebook.FacebookApiException ex)
    {
        // other general facebook api exception
    }
    catch (Exception ex)
    {
        // non-facebook exception such as no internet connection.
    }
} 
```

我得到的错误在线：

```
dynamic fbAccounts = fbClient.Get("/me/accounts"); 
```

(OAuthException - #2500) 必须使用活动访问令牌来查询有关当前用户的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:44:18.393

请参阅此处：[（OAuthException - #2500）必须使用活动访问令牌来查询有关当前用户的信息](https://stackoverflow.com/questions/10096261/oauthexception-2500-an-active-access-token-must-be-used-to-query-informatio/10096547#10096547)

> 您正在获取应用程序的访问令牌，而不是用户。因此，“我”没有意义。您应该在此处提供 ID - 您的用户 ID、您的应用 ID 或您的应用有权访问的任何其他 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:18:05.147

```
dynamic ac = fbClient.Get("oauth/access_token", new
{
    client_id = strAppID,
    client_secret = strSecret,
    grant_type = "client_credentials"
}); 
```

上面的代码可能不适用于 6.0 版本。

> OAuth 2.0 - 访问令牌的交换代码
> 
> FacebookClient 支持仅解析 json 响应。由于这个原因，“oauth/access_token”令牌在使用 FacebookClient.Get(“oauth/access_token”) 时将不起作用。相反，您需要使用 FacebookOAuthClient 中的方法。

您可以在此处找到更多详细信息：http: [//blog.prabir.me/post/Facebook-CSharp-SDK-Making-Requests.aspx](http://blog.prabir.me/post/Facebook-CSharp-SDK-Making-Requests.aspx)

希望这可以帮助。

# ios - 关联要在 iPad/iPhone 电子邮件附件中打开的文件类型

> ID：10236652
> 
> 赞同：0
> 
> 时间：2012-04-19T20:57:10.160
> 
> 标签：ios, email, attachment, file-type, info.plist

我需要向任何 iOS 5 设备声明我的应用程序能够打开作为电子邮件附件接收的指定文件类型格式（例如 pdf、rtf 或 jpg）文件。我阅读了 Apple 文档，并搜索了网络，但无法从所有这些技巧中获得任何结果。你知道任何关于在 Xcode 4.3.x 项目中声明我的应用程序的能力的完整有效的教程吗？我只需要在收到附件时建议用户预览文件或在我的应用程序中打开它。

谢谢！

丹尼斯

# c# - 从组合框选择中填充文本框

> ID：10236653
> 
> 赞同：0
> 
> 时间：2012-04-19T20:57:25.620
> 
> 标签：c#

我正在编写一个带有两个选项卡的程序。在第一个选项卡上，用户输入有关客户帐户的信息。On the second tab there is a combobox which holds the account's name and when selected the same information entered on the first tab being stored should populate the textboxes with the same information on the second tab. 我以前做过这个，我使用的是相同的结构，但它不起作用。我也正在从关联的类中提取这些信息，但一切看起来都正确。有人可以告诉我出了什么问题。

```
 public partial class Form1 : Form
{
    ArrayList account;

    public Form1()
    {
        InitializeComponent();
        account = new ArrayList();
    }

    //here we set up our add customer button from the first tab
    //when the information is filled in and the button is clicked
    //the name on the account will be put in the combobox on the second tab
    private void btnAddCustomer_Click(object sender, EventArgs e)
    {
        try
        {
            CustomerAccount aCustomerAccount = new CustomerAccount(txtAccountNumber.Text, txtCustomerName.Text,
            txtCustomerAddress.Text, txtPhoneNumber.Text);
            account.Add(aCustomerAccount);

            cboClients.Items.Add(aCustomerAccount.GetCustomerName());
            ClearText();
        }
        catch (Exception)
        {
            MessageBox.Show("Make sure every text box is filled in!", "Error", MessageBoxButtons.OK);
        }
    }

    private void ClearText()
    {
        txtAccountNumber.Clear();
        txtCustomerName.Clear();
        txtCustomerAddress.Clear();
        txtPhoneNumber.Clear();
    } 
```

这就是我遇到麻烦的地方。它说没有“accountNumber”或任何其他的定义

```
 private void cboClients_SelectedIndexChanged(object sender, EventArgs e)
    {
        txtAccountNumberTab2.Text = account[cboClients.SelectedIndex].accountNumber
        txtCustomerNameTab2.Text = account[cboClients.SelectedIndex].customerName;
        txtCustomerAddressTab2.Text=account[cboClients.SelectedIndex].customerAddress;
        txtCustomerPhoneNumberTab2.Text=account[cboClients.SelectedIndex].customerPhoneNo;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:06:49.953

ArrayList 包含对象，您需要将其转换为 CustomerAccount

```
private void cboClients_SelectedIndexChanged(object sender, EventArgs e)
{
    CustomerAccount custAccount = account[cboClients.SelectedIndex] as CustomerAccount;
     if(custAccount != null)
     {
        txtAccountNumberTab2.Text = custAccount.accountNumber
        txtCustomerNameTab2.Text = custAccount.customerName;
        txtCustomerAddressTab2.Text=custAccount.customerAddress;
        txtCustomerPhoneNumberTab2.Text=custAccount.customerPhoneNo;
    }
} 
```

# c - C 网络中间件，如 Raknet

> ID：10236662
> 
> 赞同：2
> 
> 时间：2012-04-19T20:58:03.273
> 
> 标签：c, networking

我正在为纯 C 项目寻找中间件解决方案。

我一般很难为 C 找到像样的库，因为大多数人只是编写 C++ 接口。

# python - 如何制作 ArcGIS 10 工具箱

> ID：10236666
> 
> 赞同：0
> 
> 时间：2012-04-19T20:58:16.050
> 
> 标签：python, arcgis

我想为 ArcGIS 10 制作一个新工具箱。

虽然我找到了有关制作 Python 脚本等的资源，但我还没有找到任何有关制作工具箱的示例或文档。

有人能指出我正确的方向吗？非常感谢工具箱代码/设置的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T22:34:01.390

制作一个新的（空的）工具箱非常容易。

只需右键单击目录窗口中的文件夹并选择新建 | 工具箱。

这在[联机帮助](http://help.arcgis.com/en/arcgisdesktop/10.0/help/003q/003q00000010000000.htm)中有所描述。

一旦你有了一个工具箱，你只需右键单击它以添加脚本并按照向导进行操作。上面的帮助链接应该会引导您找到所有这些的文档。

请特别注意如何在工具上定义参数以与脚本中的 GetParameterAsText 语句相对应。

如果您遇到困难，[GIS Stack Exchange](http://gis.stackexchange.com)有成千上万的 ArcPy 问答。

# c# - C# - 存储用户密码以进行比较

> ID：10236667
> 
> 赞同：1
> 
> 时间：2012-04-19T20:58:16.887
> 
> 标签：c#, security, password-protection

我将用户登录加密密码存储在数据库（SQL Server）中。由于API限制，密码需要在C#端加密，所以我不能使用数据库的内置加密。加密这些密码的最快/最简单方法是什么，以便我可以将它们与用户稍后输入第三方服务的内容进行比较？

我是 C# 新手，我知道密码永远不应该是纯文本，所以我想确保我拥有最高的安全性。我已经尝试过使用该`RSA.EncryptValue()`功能，但我对如何正确使用它非常迷茫。

任何帮助表示赞赏 - 在此先感谢。

-吉米

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T21:03:51.047

您不想加密和存储密码。你想生成一个哈希并存储它。然后，当用户登录时，您重新生成散列并将其与存储在数据库中的散列进行比较。

[这个问题](https://stackoverflow.com/questions/4181198/how-to-hash-a-password)的答案提供了如何在 c# 中对密码进行散列的示例（一个答案包括有关进行“盐渍”散列的信息）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T21:10:43.913

首先不要加密；哈希。其次不要加密；哈希。

密码永远不可恢复。

我建议阅读... [http://www.troyhunt.com/2010/05/owasp-top-10-for-net-developers-part-1.html](http://www.troyhunt.com/2010/05/owasp-top-10-for-net-developers-part-1.html) 从前到后。

您应该使用像样的散列算法对密码和散列进行加盐；将 SHA512 用于低端，或者如果您认真考虑保护该数据，请查看更多类似 BCrypt [http://code.google.com/p/bcryptnet/的内容](http://code.google.com/p/bcryptnet/)

散列而不是加密的重点不是保护您的网站免受暴力攻击，更重要的是保护您的用户免受数据丢失。

即 [http://www.bbc.co.uk/news/technology-11998648](http://www.bbc.co.uk/news/technology-11998648) - Gawker [https://www.google.co.uk/search?sourceid=chrome&ie=UTF-8&q=sony+hacked](https://www.google.co.uk/search?sourceid=chrome&ie=UTF-8&q=sony+hacked)

人们将信任*分配*给 Web 开发人员来处理他们的（通常是可悲的）密码。好好照顾他们可以带来很大的不同。

使用 BCrypt，您可以为加盐设置一个工作因数；我还将添加一个数据库盐（请参阅 troy hunt 会员提供者文章，了解 MSFT 如何做到这一点）以增加原始密码值。

BCrypt 站点的示例（BCrypt.net 也是一个 NUGET 包）

```
 // Pass a logRounds parameter to GenerateSalt to explicitly specify the 
 // amount of resources required to check the password. The work factor  
 // increases exponentially, so each increment is twice as much work. If 
 // omitted, a default of 10 is used. 

 string hashed = BCrypt.HashPassword(password);

 // Check the password. 
 bool matches = BCrypt.CheckPassword(candidate, hashed); 
```

希望那是有用的。

您当然可以使用内置的表单身份验证加密系统来加密/解密您的数据。尽管加密密码介于愚蠢和危险之间。

*   [http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.encrypt.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.encrypt.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.decrypt.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.decrypt.aspx)

你还需要在你的网络配置中添加一个 machineKey 标签，微软为此提供了一个生成器；[http://aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey) 该工具创建一个 256 位解密密钥和一个 512 位验证密钥，使用 Rijndael 作为数据验证算法。

而且，如果您确实*需要*（因为如果您不这样做，您将被枪杀）开始到处乱扔明文密码，尽管如此，请检查该服务是否受 IP（IPSec）限制，亲爱的上帝，请使用 SSL .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:09:46.720

就像史蒂夫韦伦斯提到的那样，生成一个哈希。[希望这可以提供一些关于可用](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)的不同的见解

# hadoop - Hadoop 透明地处理压缩，但不拆分 LZO

> ID：10236671
> 
> 赞同：2
> 
> 时间：2012-04-19T20:58:46.393
> 
> 标签：hadoop, split, lzo

看起来 Hadoop 在使用`TextInputFormat`. 不幸的是，当使用 LZO 压缩时，Hadoop 不使用 LZO 索引文件来使文件可拆分。但是，如果我将输入格式设置为`com.hadoop.mapreduce.LzoTextInputFormat`，则文件将被拆分。

是否可以将 Hadoop 配置为解压缩 LZO 文件并在使用时拆分它们`TextInputFormat`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T19:54:42.267

我只是遇到了类似的问题，这是我的理解：

您想在代码中使用 LzoTextInputFormat。如果要处理混合的 lzo 和非 lzo 文件，则应将 lzo.text.input.format.ignore.nonlzo 设置为 false。在这种情况下，LzoTextInputFormat 将用于所有 lzo 文件，但它会默认为其他文件使用 TextInputFormat（它足够聪明，可以忽略索引文件）。

首次提出此问题时，此功能可能尚未出现，因此您可能已经知道此解决方案。

请看（有一条关于ignore.nonlzo的评论）： [https ://github.com/twitter/hadoop-lzo/blob/master/src/main/java/com/hadoop/mapreduce/LzoTextInputFormat.java](https://github.com/twitter/hadoop-lzo/blob/master/src/main/java/com/hadoop/mapreduce/LzoTextInputFormat.java)

# svn - 将分支合并到主干后是否需要进行测试。?

> ID：10236672
> 
> 赞同：0
> 
> 时间：2012-04-19T20:58:51.900
> 
> 标签：svn, qa

我们有一个基于 SVN 的多模块 java 项目。由于多个团队处理多个项目并有自己的发布计划，因此他们在开始开发时会从主干创建分支。当分支被释放和部署时，它被折叠回主干。
由于没有自动回归测试，QA 人员习惯于在分支合并回主干后对分支中开发的所有功能进行完整性测试。团队中有一部分开发人员最近表达了他们对它的担忧。他们的观点是，由于合并是由像 SVN 这样的稳定​​工具执行的，所以任何数量的测试都只是测试工具而不是测试产品，除非存在冲突。因此，他们试图通过将范围限制为仅冲突的模块或功能来减少 QA 的工作量。我的问题是，您在开发人员的论点中看到了价值。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:05:04.107

即使没有冲突的合并也可能导致应用程序错误。

例如：有一个功能`A`在项目中的任何地方都没有使用过。

团队 1 删除了它，因为它已过时且未使用，团队 2 在他们的代码中使用了它。合并后，您的代码甚至无法编译。

**因此，在您的代码库发生任何**更改后都需要运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:30:10.110

我认为需要进行测试，因为我们在合并到 SVN 主干之前过滤问题。如果中间测试过程被取消，那么很可能会出现一些问题，这些问题在中间测试级别本身已经被消除。后期修复问题的成本总是很高的。因此，非常需要中间测试。意外的人为错误是不可避免的！！

# c# - 将子类转换为 XML 序列化的基类？

> ID：10236677
> 
> 赞同：0
> 
> 时间：2012-04-19T20:59:26.423
> 
> 标签：c#, xml

我有一个基类`StandardMeasurement`和一个派生类`CustomMeasurement`，它们都可以序列化。

这是我想做的事情：

1.  `CustomMeasurement`从文件加载到`customMeasInstance`.
2.  创建新的标准。测量 圣：`StandardMeasurement stdMeas = (StandardMeasurement)customMeasInstance`。
3.  序列化`stdMeas`（仅）作为一种`StandardMeasurement`类型。

尝试时出现错误，因为XML 序列化`stdMeas`程序仍将其视为 a `CustomMeasurement`。有没有办法可以做到这一点，还是我必须手动“复制”所有信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:10:44.453

使用`System.Xml.Serialization.XmlSerializer`该类，您应该能够执行以下操作：

**编辑 -**`object initializer`为与 .NET 2.0 兼容而删除

```
var cust = new CustomMeasurement();

cust.SomeProperty = "Foo";
cust.AnotherProperty = "Bar";

var serializer = new XmlSerializer(typeof(StandardMeasurement), new Type[] { cust.GetType() });
serializer.Serialize(Console.Out, cust); 
```

# c# - 如何在 C# Windows 应用程序中将数据网格视图作为日历周视图

> ID：10236678
> 
> 赞同：-1
> 
> 时间：2012-04-19T20:59:29.503
> 
> 标签：c#, .net, windows-applications

我正在用 C# 开发一个 Windows 应用程序。我有一项要求以每周、每月和每日视图显示日历。我从 codeproject 下载了许多日历，但没有一个符合我的要求。我需要如下格式，

```
 Day & Date1   Day&Date2   Day&Date3 .................. end of week
           -----------   ---------
           -----------   --------- 
```

Emp Name1 ----------- ---------

企业名称2

企业名称3 .........

…………

对于每个员工，一周中的每一天都应分为 3 个班次，在每个班次上单击鼠标右键，我们可以将员工与客户关联起来。我怎样才能做到这一点 ？如何生成本周视图日历？它的紧急..请帮助亲爱的朋友..我可以将datagridview渲染为周视图日历，顶部有两个按钮，一个向前移动（下周），另一个向后移动（前一周）..任何帮助都非常感谢

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:06:04.443

查看[专业日历](http://bettercalendar.codeplex.com/ "专业日历")

它是开源的，可以满足您的需求。

# php - 如何用php解析这个json？

> ID：10236679
> 
> 赞同：-4
> 
> 时间：2012-04-19T20:59:29.563
> 
> 标签：php, json, parsing

我有一个这样的json文件：

```
[{
    city: "myCity",
    lat: 11.1111,
    format: "etc",
    lng: 1.11,
    street: "mystreet",
    hours: [{
        A: "0230",
        B: "2200",
        C: "16-04-2012"
    }, {
        A: "0130",
        B: "2200",
        C: "11-04-2012"
    }, {
        A: "0230",
        B: "2200",
        C: "18-04-2012"
    }, {
        A: "0130",
        B: "2200",
        C: "12-04-2012"
    }, {
        A: "0230",
        B: "2200",
        C: "20-04-2012"
    }, {
        A: "0130",
        B: "2200",
        C: "13-04-2012"
    }, {
        A: "0230",
        B: "2200",
        C: "22-04-2012"
    }, {
        A: "0130",
        B: "2200",
        C: "14-04-2012"
    }, {
        A: "0230",
        B: "2200",
        C: "24-04-2012"
    }, {
        A: "0130",
        B: "2200",
        C: "15-04-2012"
    }, {
        A: "0230",
        B: "2200",
        C: "26-04-2012"
    }, {
        A: "0130",
        B: "2200",
        C: "16-04-2012"
    }, {
        A: "0230",
        B: "2200",
        C: "28-04-2012"
    }, {
        A: "0130",
        B: "2200",
        C: "17-04-2012"
    }],
    housenumber: "12"
}] 
```

Firebug 可以毫无问题地解析它。它说“小时”是一个对象，其中包含某些对象，其中包含 F、U 和 D。但我无法使用常规 php 解析器解析它。我几乎要把它改成 XML，但这会花费我很多时间，而且如果 firebug 可以处理它，必须有一些解析器可以处理这种格式！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:01:19.363

```
$obj = json_decode($json); 
```

[http://php.net/json-decode](http://php.net/json-decode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T23:10:24.647

我确定这是重复的，但找不到。而且由于评论被忽略，我将再次将其添加为答案。

如果您需要解码 Javascript 表达式（它没有 JSON 需要的关键引号），您可以使用：

*   [http://pear.php.net/package/Services_JSON](http://pear.php.net/package/Services_JSON)
    它有一些后备逻辑来处理不带引号的键

*   [http://include-once.org/p/upgradephp/#upgrade.php.prefixed](http://include-once.org/p/upgradephp/#upgrade.php.prefixed)
    _`up_json_decode($json, FALSE, 512, JSON_PARSE_JAVASCRIPT)`

作为不可取的选择，有一些正则表达式和字符串修补解决方法可用于预处理未引用的键。

# asp-classic - asp fileExists always returning false

> ID：10236687
> 
> 赞同：2
> 
> 时间：2012-04-19T21:00:00.363
> 
> 标签：asp-classic

Trying to use a loop to check if images exists however it is always returning false. I am sure I am doing something simple and stupid but here is the code:

```
dim fs, sql_except
set fs=Server.CreateObject("Scripting.FileSystemObject")
if Not rs.eof then
    arrRS = rs.GetRows(30,0)
    set rs = nothing
    If IsArray(arrRS) Then
        For i = LBound(arrRS, 2) to UBound(arrRS, 2)
            sku = arrRS(0, i)
            if (fs.FileExists("../i/"&sku&".gif")=false) Then
                response.write sku&"does not exist<br>"
            end if
        next
    end if
    erase arrRS
end if
set fs=nothing 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T21:43:36.270

You appear to be operating under the impression that the current folder context the your call to `FileExists` will assume is the physical folder containing the ASP script being executed. This is not so, it most likely will be "C:\windows\system32\inetsrv". You are also using URL path element separator `/` where FileExists is expecting windows physical path folder separator `\`.

You need to use `Server.MapPath` to resolve the path. This *may* work:

```
if Not fs.FileExists(Server.MapPath("../i/"&sku&".gif")) then 
```

However you may run in to trouble with the parent path "..", this may not be allowed for security reasons. This might be a better approach:

```
Dim path : path = Server.MapPath("/parentFolder/i") & "\"
For i = LBound(arrRS, 2) to UBound(arrRS, 2)        
    sku = arrRS(0, i)        
    if Not fs.FileExists(path & sku & ".gif") Then        
        response.write Server.HTMLEncode(sku) & " does not exist<br>"        
    end if        
next 
```

Where "parentFolder" is the absolute path from the site root.

# android - 知道通过锁屏后应用何时获得焦点

> ID：10236692
> 
> 赞同：0
> 
> 时间：2012-04-19T21:00:36.660
> 
> 标签：android, focus, lockscreen

在模式锁定通过后，知道我的应用程序何时获得焦点的最简单方法是什么？一旦我的屏幕重新打开，onResume 就会被调用，无论它前面的模式锁定活动如何（假设我的应用程序是关闭屏幕之前打开的最后一个东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:36:21.233

您可以通过调用来检查您的 Activity 或 View 是否有焦点：

```
Activity.hasWindowFocus() 
```

或者

```
View.hasFocus() 
```

[http://developer.android.com/reference/android/app/Activity.html#hasWindowFocus](http://developer.android.com/reference/android/app/Activity.html#hasWindowFocus) () [http://developer.android.com/reference/android/view/View.html#hasFocus](http://developer.android.com/reference/android/view/View.html#hasFocus) ()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:36:13.347

我认为你最好的选择是[Activity.onWindowFocusChanged()](http://developer.android.com/reference/android/app/Activity.html#onWindowFocusChanged%28boolean%29)

# javascript - 真正适合“node.js”开发的 OS X 编辑器（或 IDE）？

> ID：10236699
> 
> 赞同：6
> 
> 时间：2012-04-19T21:00:56.117
> 
> 标签：javascript, macos, node.js, pug, stylus

我是 Emacs 的老用户 - 我已经使用它大约 10 年了。当我切换到 Mac 时，我开始使用[Aquamacs](http://aquamacs.org/)，它在很多方面都很棒。

但现在我的大部分开发工作都涉及 Node.js/Express.js（使用 JavaScript、Jade 和 Stylus）。不幸的是，emacs在这方面有很多不足之处。特别是在远程工作时，使用[ExpanDrive](http://www.expandrive.com/)和[MacFUSE](http://code.google.com/p/macfuse/)安装。

我真的想要真正的代码折叠。

有没有真正适合这个的编辑器？更好的是是否有任何适用于 Mac 的 IDE（完全没有）？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T21:11:20.497

[Sublime Text 2](http://www.sublimetext.com/blog/articles/sublime-text-2-beta)是许多人的选择。[使用包管理](http://wbond.net/sublime_packages/package_control/installation)器向其中添加[一些包](http://wbond.net/sublime_packages/community)。提供翡翠、手写笔包。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T21:56:34.217

[Webstorm](http://www.jetbrains.com/webstorm/)是 IntelliJ IDEA 的一个更便宜且更特定于节点的替代方案，它也是由 Jetbrains 制造的。

它有很多节点好东西，比如能够附加到节点调试器并允许您单步执行 JS 代码。它还具有良好的代码折叠功能，您可以调用它`⌘^-`来折叠和`⌘^+`展开。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T21:09:57.543

如果您想要一个在 Mac OS XI 上运行良好的真正 IDE，建议您使用 IntelliJ IDEA。它有一个 JavaScript 调试器和 Node.js 插件。如果您正在寻找比成熟的 IDE 更轻量级的东西，请查看 Sublime Text 2。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-19T21:13:06.220

您可以尝试使用 TextMate： http: [//macromates.com/](http://macromates.com/) 使用以下捆绑包

NodeJs：[https ://github.com/drnic/javascript-node.tmbundle](https://github.com/drnic/javascript-node.tmbundle)

对于翡翠：[https ://github.com/miksago/jade-tmbundle](https://github.com/miksago/jade-tmbundle)

对于手写笔，您必须编译捆绑包（尚未尝试过）：[https ://github.com/LearnBoost/stylus/blob/master/docs/textmate.md](https://github.com/LearnBoost/stylus/blob/master/docs/textmate.md)

还有Cloud9 ide [https://github.com/ajaxorg/cloud9](https://github.com/ajaxorg/cloud9)，其实是个webapp，但是开源，可以本地安装（还是在浏览器里运行，但是在本地），很喜欢调试功能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T05:04:00.120

[http://www.aptana.com/](http://www.aptana.com/)很棒，它具有大部分 Eclipse 功能...

# c# - SO风格的答案创建

> ID：10236708
> 
> 赞同：0
> 
> 时间：2012-04-19T21:01:37.360
> 
> 标签：c#, wpf, xaml, toolbar

当我们在 SO 上创建问题时，会有一个框来写您的消息，其中包含粗体、斜体和代码括号。

在 C#/wpf 中是否有类似的模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:07:12.730

不是c#；我不确定这是否有意义。如果你在谈论一个 asp.net 富文本编辑器控件，那也不是。

我过去使用的是一个内置的 jquery，它适用于我的 .net 网站。但是页面验证可能很棘手，因为它会将输入识别为潜在危险。

这是我正在谈论的编辑器 jWYSIWYG 的链接：[https ://github.com/akzhan/jwysiwyg](https://github.com/akzhan/jwysiwyg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:04:37.677

不，没有。

试试 DevExpress [DXrichEdit](http://www.devexpress.com/Products/NET/Controls/WPF/Rich_Editor/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T21:35:09.320

我注意到，在不到 20 行代码中，您就可以在 WPF 中获得此功能：

```
<DockPanel>
    <Menu DockPanel.Dock="Top">
        <MenuItem Header="Edit">
            <MenuItem Command="Cut" Header="_Cut" />
            <MenuItem Command="Copy" Header="C_opy" />
            <MenuItem Command="Paste" Header="_Paste" />
        </MenuItem>
    </Menu>
    <ToolBarTray DockPanel.Dock="Top">
        <ToolBar>
            <Button Command="Cut" Content="Cut" />
            <Button Command="Copy" Content="Copy" />
            <Button Command="Paste" Content="Paste" />
        </ToolBar>
    </ToolBarTray>
    <TextBox SpellCheck.IsEnabled="True" />
</DockPanel> 
```

获得粗体/斜体和代码括号会非常好。

# visual-studio-2010 - 如何将 Visual Studio 2010 数据库项目转换为 SSDT 项目

> ID：10236711
> 
> 赞同：13
> 
> 时间：2012-04-19T21:01:47.100
> 
> 标签：visual-studio-2010, database-project, sql-server-2012, sql-server-data-tools

我使用 Visual Studio 2010 Premium inc 全新安装了 Windows 7。SP 1\. 我也刚刚安装了 SQL Server 2012 的开发者版。

我现在应该能够将 Visual Studio 2010 数据库项目转换为 SSDT 项目。根据[这篇 technet 博客文章](http://blogs.technet.com/b/gdcomdbbi/archive/2012/03/22/convert-visual-studio-2010-database-project-to-ssdt-project.aspx)，它应该像打开我的 Visual Studio 解决方案文件并按照转换向导一样简单。问题是转换向导永远不会出现。此外，右键单击 VS 2010 数据库项目时，“转换为 SQL Server 数据库项目...”上下文菜单项不存在。

我可能在我的 SQL 2012 安装中遗漏了一些东西。问题是：什么？

我的 SQL 2012 安装配置： ![My SQL 2012 安装配置](../Images/b4f4d19506847ed24b985a4dc049564b.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T11:59:53.320

以防它帮助别人。

就我而言，即使我做了所有必要的安装，我也没有得到任何类型的向导。

症状：

*   在 VS2012 中打开解决方案。
*   数据库项目已卸载，它说它需要迁移。
*   重新加载数据库项目，它说它需要功能更改（或类似的东西）。我按确定。
*   数据库项目可用，它会构建，但是当我关闭 VS2012 并重新打开解决方案时，它一遍又一遍地说同样的事情。

解决方案：

*   我不知道 VS2012 确实创建了一个 ssdt 类型的新项目。不幸的是它没有加载它。我有一个项目 .dbproj 文件和一个项目 .sqlproj 文件。.dbproj 文件已加载。
*   从解决方案中删除数据库项目。
*   添加现有项目 -> 选择 .sqlproj 文件。再次加载数据库项目。它建立。

现在一切似乎都很好，我可以在 VS2012 中打开并构建解决方案而没有任何问题。另外，我可以在 VS2010SP1 中重新打开解决方案，它可以毫无问题地打开和构建。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T08:49:00.960

发现了问题。显然我仍然需要从[http://www.microsoft.com/web/gallery/install.aspx?appid=SSDT](https://docs.microsoft.com/en-us/sql/ssdt/download-sql-server-data-tools-ssdt)独立下载 SSDT 。尽管上面的屏幕截图中列出了 SQL Server Data Tools。

编辑：更新了链接。谢谢@ryanwebjackson

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-10T13:52:30.227

如果您尝试从为 Visual Studio 2008 创建的 .dbproj 迁移到为 Visual Studio 2012 创建的 .sqlproj，您可能会遇到相同的行为（没有向导，无法加载项目）。

在我的例子中，Visual Studio 2012 创建了 .sqlproj 文件并将旧的 Visual Studio 2008 .dbproj 的内容复制到其中甚至是非常荒谬的情况。

建议的解决方法都没有帮助，我必须**首先从 2008 .dbproj 转换为 2010 .dbproj**（使用 Visual Studio 2010），**然后从 2010 .dbproj 转换为 .sqlproj**（使用 Visual Studio 2012）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-27T15:33:06.407

对我来说，有些不同的作品。

迁移后，您将在项目目录中同时拥有 *.dbproj 和 *.sqlproj。只需删除项目（dbproj 并附加现有的 sqlproj 项目）。

不知道为什么解决方案文件没有更新。

# regex - 如何防止文件直接 URL 访问？

> ID：10236717
> 
> 赞同：68
> 
> 时间：2012-04-19T21:02:45.837
> 
> 标签：regex, apache, .htaccess, mod-rewrite, hotlinking

我正在使用 Apache，并且在我的**Local Host**上有一个示例 web 文件夹，例如：

```
 http://localhost/test/ 
```

* * *

文件`test`夹中的文件：

```
 index.html  
     sample.jpg  
     .htaccess 
```

* * *

样本来源`index.html`：

```
<html>
  <body>
    <img src="sample.jpg" />
  </body>
</html> 
```

当我在 运行网站时`http://localhost/test/`，它只会在页面上显示图像“sample.jpg”。

* * *

**问题：**

*   我想防止图像`http://localhost/test/sample.jpg`直接显示在 url 栏中。

**注意：** *我发现以下解决方案在**除 Firefox 之外**的所有浏览器上测试时都有效。*

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-04-19T21:07:50.947

尝试以下操作：

```
RewriteEngine on 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?localhost [NC] 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?localhost.*$ [NC] 
RewriteRule \.(gif|jpg)$ - [F] 
```

如果您直接访问图像，则返回 403，但允许它们在站点上显示。

**注意：**有可能当你打开某个带有图片的页面，然后将该图片的路径复制到地址栏中时，你可以看到该图片，这只是因为浏览器的缓存，实际上该图片尚未从服务器加载*（来自达沃，下面的完整评论）*。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-27T20:33:16.133

rosipov 的规则很好用！

我在实时站点上使用它来显示空白或特殊消息；）代替对文件的直接访问尝试，我宁愿保护一点不被直接查看。我认为它比 403 Forbidden 更有趣。

因此，采用 rosipov 的规则将任何对 {gif,jpg,js,txt} 文件的*直接*请求重定向到 'messageforcurious' ：

```
RewriteEngine on 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?domain\.ltd [NC] 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?domain\.ltd.*$ [NC] 
RewriteRule \.(gif|jpg|js|txt)$ /messageforcurious [L] 
```

我认为这是一种礼貌的方式来禁止直接访问诸如 xml、javascript 之类的 CMS*敏感文件*......同时考虑到安全性：对于现在在网上潦草的所有这些机器人，我想知道他们的算法会从我的'消息好奇”。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-19T21:05:55.597

根据您的评论，这就是您所需要的：

```
RewriteCond %{HTTP_REFERER} !^http://(www\.)?localhost/ [NC] 
RewriteRule \.(jpe?g|gif|bmp|png)$ - [F,NC] 
```

我已经在我的本地主机上对其进行了测试，它似乎工作正常。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-14T06:47:20.267

首先，找到主apache的配置文件httpd.conf所在的位置。如果你使用 Debian，它应该在这里：`/etc/apache/httpd.conf`. 使用 Vim 或 Nano 等文件编辑器打开此文件并找到如下所示的行：

```
Options Includes Indexes FollowSymLinks MultiViews 
```

然后删除单词索引并保存文件。该行应如下所示：

```
Options Includes FollowSymLinks MultiViews 
```

完成后，重新启动 apache（例如 Debian 中的 /etc/init.d/apache restart）。就是这样！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-06T05:33:57.027

对我来说，这是**唯一**有效的方法，而且效果很好：

RewriteCond %{HTTP_HOST}@@%{HTTP_REFERER} !^([^@] *)@@https?://\1/.*
RewriteRule .(gif|jpg|jpeg|png|tif|pdf|wav|wmv|wma|avi|mov|mp4|m4v|mp3|zip?)$ - [F]

在以下位置找到它： [https ://simplefilelist.com/how-can-i-prevent-direct-url-access-to-my-files-from-outside-my-website/](https://simplefilelist.com/how-can-i-prevent-direct-url-access-to-my-files-from-outside-my-website/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-10T14:45:08.383

当我在我的网络服务器上使用它时，我只能重命名本地主机，如下所示：

```
RewriteEngine on 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com [NC] 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com.*$ [NC] 
RewriteRule \.(gif|jpg)$ - [F] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-15T14:27:37.227

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^http://(www\.)?localhost.*$ [NC] 
RewriteCond %{REQUEST_URI} !^http://(www\.)?localhost/(.*)\.(gif|jpg|png|jpeg|mp4)$ [NC] 
RewriteRule . - [F] 
```

# asp.net - 如何防止实体框架将 FileStream 列加载到字节数组中？

> ID：10236723
> 
> 赞同：10
> 
> 时间：2012-04-19T21:02:58.117
> 
> 标签：asp.net, c#-4.0, entity-framework-4

我正在开发一个文件存储应用程序，我们已经在我们的数据库中合并了 FileStream 类型。该系统预计将支持大文件。该应用程序的一部分允许批量上传多个文档。然后必须将这些文档链接到系统内的其他实体。

一页旨在显示未链接的文档，以允许用户一次将一个文档链接到实体。在对上传过程进行了一些负载测试后，我们发现 ASP.NET 工作进程的内存占用在加载此未链接文档页面时飙升至超过 GB。

经过调查，Entity Framework 似乎正在为数​​百个未链接的文档加载整个文档行实体（包括 FileStream，转换为字节数组）。在我的存储库类中，我在转换为模型时不保存此字节数组，但到那时为时已晚。EF 花费了时间和内存将字节数组分配到 Repository 类表示中。

有没有一种方法可以告诉 EF 不要加载这个字节数组，除非我明确要求它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T00:08:01.847

Garrison，您可以使用称为“实体拆分”的功能，将两个相关实体映射到单个表。因此，在第一个实体中，您将拥有除 filestream 属性之外的所有属性。在第二个实体中，您将拥有主键（与第一个实体相同）和 filestream 属性。在模型中的实体之间创建一对一的关系，然后将两个实体映射到同一个表。现在具有文件流的实体是相关的，您可以根据需要加载或延迟加载它。唯一的缺点是它不是您的主要实体的属性，因此您必须导航到相关实体，然后是属性。

myEntity.MyRelatedEntity.TheFileStreamProperty

这是我写的一篇[旧博客文章](https://web.archive.org/web/20130622232956/http://thedatafarm.com/blog/data-access/ef-table-splitting-ndash-the-opposite-of-entity-splitting)，展示了如何在 EDM 设计器中执行此操作。

您还可以使用 Code FIrst 实现相同的映射。这是我写的一篇 MSDN 文章，其中包含实体拆分文章。[http://msdn.microsoft.com/en-us/data/hh272551](http://msdn.microsoft.com/en-us/data/hh272551)

HTH 朱莉

# ruby-on-rails - SSO 和 Rails 会话

> ID：10236734
> 
> 赞同：3
> 
> 时间：2012-04-19T21:04:03.997
> 
> 标签：ruby-on-rails, session, single-sign-on

我目前正在将我公司的 SSO 解决方案与我的 Rails 3.1.3 应用程序集成。

我正在使用 Apache 并启用了公司的 SiteMinder 模块来执行此操作。SiteMinder 根据其 SSO 身份验证状态重新路由请求。一旦通过身份验证，SiteMinder 模块就会将每个请求重新路由到其中心 URL，以查看其真实性令牌是否已过期。它重新构建真实性令牌，然后重新定向回我的 Rails 应用程序。

虽然所有这些都在进行，但我的用户的 Rails 会话正在以看似随机的间隔重置。我知道这是因为会话 ID cookie 的值发生了变化。

这仅在启用 SiteMinder 时发生。当我将其关闭时，Rails 会话会按预期持续存在。

这里有什么冲突？Rails 是否知道 SiteMinder 模块发生的重定向？我的应用是使用Passenger部署的；如果我将PassengerSpawnMethod 更改为保守，会有帮助吗？

# php - Magento Enterprise 1.11 商店中的 LinkedIn RSS 源

> ID：10236746
> 
> 赞同：0
> 
> 时间：2012-04-19T21:04:42.273
> 
> 标签：php, api, magento, linkedin

我有一个客户希望在他们的主页（Magento Enterprice 商店）上提供公司链接活动的提要。我没有在允许此查询的 API 中找到 RSS 订阅或任何内容。任何人都知道不同或有其他想法/方法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:02:15.360

Magento 没有内置功能来读取提要——它只能生成它们。至少我从未找到任何可用的现成功能部分。

有很多免费和付费扩展，您可以在其中获得此功能：

[http://www.magentocommerce.com/magento-connect/catalogsearch/result/?q=rss+reader&pl=0](http://www.magentocommerce.com/magento-connect/catalogsearch/result/?q=rss+reader&pl=0)

此外，如果您想编写自己的代码（尽管我认为没有任何意义，因为有免费和有效的扩展，您可以从 Zend Feed Reader 开始自己编写一个：

[http://framework.zend.com/manual/en/zend.feed.reader.html](http://framework.zend.com/manual/en/zend.feed.reader.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:31:26.530

或者，它可能在

`System > Configuration > [CATALOG] RSS Feeds`

并且

在：`app/design/frontend/default/*template/callouts`

添加：

```
<?php
    $channel = new Zend_Feed_Rss(’http://www.yourfeed.com/news/feed’);
    $i = 0;
    foreach ($channel as $item) {}
        if ($i<3){
           echo $item->get_date(’j F Y’) .'<br />';
           echo '<p>'. $item->title .'<br />';
           echo '<a href="'. $item->link .'">Read post »</a></p>';
        }
    $i++;
    }
?> 
```

# javascript - 使用 JavaScript 拦截 PDF 表单提交？

> ID：10236749
> 
> 赞同：0
> 
> 时间：2012-04-19T21:04:54.727
> 
> 标签：javascript, forms, pdf, submit

我有一个嵌入式 PDF 表单，它不是常规表单。尽管如此，PDF 中有一个提交按钮，可将常规 HTTP GET 查询提交到指定的 URL。

我有什么办法可以拦截 JavaScript 中表单的提交吗？我需要在提交操作上有自定义行为。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:31:55.540

您需要深入研究 PDF 规范，并实际修改文档本身。如果您还没有允许您执行此操作的工具，这将不容易，并且如果您的 pdf 被加密，除非您拥有正确的密钥，否则这可能是不可能的。如果您试图弄清楚如何使用 Acrobat 或其他类似工具来执行此操作，那么您可能问错了地方。

[您想要的PDF 规范](http://partners.adobe.com/public/developer/en/pdf/PDFReference.pdf)部分是 8.6.4（表单操作），而关于 Javascript 操作的部分从第 556 页开始。

如果您只对表单验证感兴趣，那么 PDF 中已经内置了更简单的选项......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T21:26:37.493

使用 jQuery 很容易拦截表单的提交事件：

```
$(document).ready(function() {

    $("#myForm").submit(function() {

        //DO SOMETHING

    });

}); 
```

*"#myForm" 是给定表单元素的 id 属性的正确 css 样式选择器

这是[文档](http://api.jquery.com/submit/)

您必须在页面中包含 jQuery 库。[更多关于 jQuery](http://docs.jquery.com/How_jQuery_Works#jQuery%3a_The_Basics)

# stored-procedures - 处理异常PLSQL时的程序流程

> ID：10236750
> 
> 赞同：1
> 
> 时间：2012-04-19T21:04:55.080
> 
> 标签：stored-procedures, exception-handling, plsql, oracle10g

我的存储过程如下所示：

```
 sqlQuery := 'DROP INDEX idArchivoIndex';
  EXECUTE IMMEDIATE sqlQuery;

  EXCEPTION --En caso de que no exista el índice capturamos la excepcion
    WHEN index_not_exists THEN NULL; --y la ignoramos

  sqlQuery := 'CREATE INDEX idArchivoIndex'||
              ' ON '||qusuario||' (id_archivo)';
  EXECUTE IMMEDIATE sqlQuery;

  doresetvalidacion(qusuario, idarchivo);

  IF (tipoDependencia = 'PEC') THEN
    dovalidapec(qusuario,qaniofiscal,idarchivo,imprimirMensajes);
    COMMIT;
  ELSIF (tipoDependencia = 'SAGARPA') THEN
    dovalidacionpec(qusuario,qaniofiscal,idarchivo,imprimirMensajes);
    COMMIT;
  END IF; 
```

如果没有引发异常，该过程只会删除索引，但不会重新创建索引！我以为这部分代码

```
EXCEPTION
    WHEN index_not_exists THEN NULL; 
```

处理错误，然后继续下面的代码。现在我看到了结果，`EXCEPTION`当且仅当引发异常时才执行。

我想要的是简化我的代码，我不想在`EXCEPTION`子句之前复制粘贴相同的代码块，只是为了让它按我的预期工作。有没有办法实现它？也许有一个嵌套`BEGIN ... END`块？还是我必须制定一个单独的程序来重用代码？

干杯。

**更新**

```
create or replace
PROCEDURE DOVALIDAINFORMACION 
(
  QARCHIVO IN VARCHAR2
, QUSUARIO IN VARCHAR2
, QANIOFISCAL IN VARCHAR2
) AS
  imprimirMensajes CHAR;
  tipoDependencia VARCHAR2(25);
  idArchivo NUMBER;
  sqlQuery VARCHAR2(100);
  index_not_exists EXCEPTION;
  PRAGMA EXCEPTION_INIT(index_not_exists, -1418);
BEGIN

  sqlQuery := 'DROP INDEX idArchivoIndex';
  EXECUTE IMMEDIATE sqlQuery;
  ----------------------
  EXCEPTION --En caso de que no exista el índice capturamos la excepcion
    WHEN index_not_exists THEN --y la ignoramos
      NULL;
  END;
  ----------------------
  sqlQuery := 'CREATE INDEX idArchivoIndex'||
              ' ON '||qusuario||' (id_archivo)';
  EXECUTE IMMEDIATE sqlQuery;

  doresetvalidacion(qusuario, idarchivo);

  IF (tipoDependencia = 'PEC') THEN
    dovalidapec(qusuario,qaniofiscal,idarchivo,imprimirMensajes);
    COMMIT;
  ELSIF (tipoDependencia = 'SAGARPA') THEN
    dovalidacionpec(qusuario,qaniofiscal,idarchivo,imprimirMensajes);
    COMMIT;
  END IF;

END DOVALIDAINFORMACION; 
```

但不能编译程序。

```
Error(32,3): PLS-00103: Se ha encontrado el símbolo "SQLQUERY"
Error(33,48): PLS-00103: Se ha encontrado el símbolo ";" cuando se esperaba uno de los siguientes:     ) , * & = - + < / > at in is mod remainder not rem    <an exponent (**)> <> or != or ~= >= <= <> and or like LIKE2_    LIKE4_ LIKEC_ between || member SUBMULTISET_ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:12:29.360

我怀疑这只是`BEGIN`在您更新的代码中遗漏了一个额外的内容。`EXCEPTION`子句始终与 a`BEGIN`和 an匹配`END`。在您发布的代码中，`EXCEPTION`与过程的`BEGIN`. 您需要它来匹配`BEGIN`嵌套的 PL/SQL 块。

```
create or replace
PROCEDURE DOVALIDAINFORMACION 
(
  QARCHIVO IN VARCHAR2
, QUSUARIO IN VARCHAR2
, QANIOFISCAL IN VARCHAR2
) AS
  imprimirMensajes CHAR;
  tipoDependencia VARCHAR2(25);
  idArchivo NUMBER;
  sqlQuery VARCHAR2(100);
  index_not_exists EXCEPTION;
  PRAGMA EXCEPTION_INIT(index_not_exists, -1418);
BEGIN
  BEGIN
    sqlQuery := 'DROP INDEX idArchivoIndex';
    EXECUTE IMMEDIATE sqlQuery;
  EXCEPTION --En caso de que no exista el índice capturamos la excepcion
    WHEN index_not_exists THEN --y la ignoramos
      NULL;
  END;

  sqlQuery := 'CREATE INDEX idArchivoIndex'||
              ' ON '||qusuario||' (id_archivo)';
  EXECUTE IMMEDIATE sqlQuery;

  doresetvalidacion(qusuario, idarchivo);

  IF (tipoDependencia = 'PEC') THEN
    dovalidapec(qusuario,qaniofiscal,idarchivo,imprimirMensajes);
    COMMIT;
  ELSIF (tipoDependencia = 'SAGARPA') THEN
    dovalidacionpec(qusuario,qaniofiscal,idarchivo,imprimirMensajes);
    COMMIT;
  END IF;
END DOVALIDAINFORMACION; 
```

顺便说一句，在 PL/SQL 块中删除然后立即重新创建索引似乎很奇怪。如果这与您关于[在 load 后重新创建索引](https://stackoverflow.com/questions/10230410/recreate-index-after-delete-load)的问题有关，恐怕您可能误解了我的回答。在我之前的回答中，我指出删除索引、加载 1000 万行数据然后重新创建索引可能更有效。假设加载发生在您在此代码中进行的存储过程调用中，您可能希望在加载完成*后*重新创建索引。

# c# - 信号量范围和行为

> ID：10236752
> 
> 赞同：0
> 
> 时间：2012-04-19T21:05:01.733
> 
> 标签：c#, multithreading, scope, semaphore

我从今天的一个较早的问题中了解了信号量，但我仍然在这里摸不着头脑。似乎没有关于全局和本地之外的范围的讨论，其中全局被定义为整个操作系统。

如果我有一个由多个程序集组成的应用程序，并且每个程序集有几个类，并且每个类都有一个私有静态信号量对象，具有不同的“队列”长度，如果我开始在不同位置的应用程序线程池中排队不同的任务，这是如何运作的？线程之间的行为如何？我看到的所有示例都在一个程序集中包含一两个类，我没有清楚地了解它是如何工作的。

我在我的应用程序中使用线程池。它并行化数据（向不同的人发送定制的电子邮件，生成大量定制的报告，从各种 Web 服务收集数据等），同时让我的界面保持响应，这是一件很棒的事情。

我的一个 Web 服务源将我限制为五个并发连接，我无法弄清楚如何将 Web 请求限制为 5 个活动线程，同时仍允许应用程序的其余部分根据需要使用其他线程。所以，我转向 SO，并询问如何做到这一点。建议的答案是使用信号量。

在那之前，我对信号量一无所知，所以我研究了它。它确实似乎限制了执行特定方法的线程数，但是它如何与线程池管理器正确通信没有意义。如果我在我的 Web 请求功能上实现了一个信号量，并且我得到了等待执行 Web 服务调用的线程积压，那么线程池如何知道（它知道吗？）为其他进程发出更多线程？信号量的范围是私有的；它不应该看到物体。

此外，这是信号量应该做的吗？我可以通过让它们共享一个共同的信号量来同样限制其他任务组吗？这是对信号量意图的粗俗化，还是它的意图。那里有很多信息，但都是简化的、抽象的形式，我找不到一篇文章描述何时以及如何使用这些东西是合适的。

那么私有静态信号量如何与线程池通信，以便线程池知道是否生成另一个工作线程？可以？通过这样做，我会产生比解决方案更多的问题吗？我可以期望我的线程池在 Web 请求积压时表现出什么样的行为？它会为 Web 请求生成新线程，直到它“满”，从而降低其他方法的线程可用性？我可以让它不这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:42:09.533

范围约束（如果你可以这么称呼的话！）是因为信号量是操作系统内核同步原语，可以（未命名）用于线程间通信或（命名）或进程间（inter -装配）通讯。该语言不能限制命名变体的范围。

Google 上有大量关于信号量的信息。对于 .NET-wapped 的，MSDN。

进程间信令和通信通过。一般来说，命名信号量当然是可能的。如何在托管环境中执行此操作是另一回事。在非托管代码中，它通常涉及其他通信元素，例如共享内存区域和/或内存映射文件。你可能不应该去那里。

尝试通过使任务在命名信号量上签名/等待来限制不同程序集中的线程池时要小心。如果您认为它可以解决您的应用程序的某些问题，请务必尝试一下，但至少有可能池线程计数、正在运行的池线程、在信号量上阻塞的池线程、在 IO 上的任务内部阻塞的池线程等。可能变得不稳定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:01:39.193

您似乎假设唯一的解决方案是对内置的 .NET 线程池进行分区。为您的任务组使用单独的自定义线程池怎么样？请参阅[此链接](http://www.yoda.arachsys.com/csharp/miscutil/)以获取 Jon Skeet 的示例代码。

# performancecounter - .NET CLR 内存“所有堆中的字节数”远低于“Gen 0 堆大小”

> ID：10236753
> 
> 赞同：4
> 
> 时间：2012-04-19T21:05:02.260
> 
> 标签：performancecounter

我正在查看 ASP.NET 4 应用程序（工作流服务）的性能计数器

```
.NET CLR Memory -- # Bytes in all Heaps :    44,420,488
.NET CLR Memory -- Gen 0 heap size :        311,665,568
.NET CLR Memory -- Gen 1 heap size :         17,723,080
.NET CLR Memory -- Gen 2 heap size :         25,956,920
.NET CLR Memory -- Large Object Heap size :     740,488 
```

关于“# Bytes in all Heaps”计数器的说明

> 这个计数器是其他四个计数器的总和；第 0 代堆大小；第 1 代堆大小；Gen 2 堆大小和大对象堆大小。此计数器指示 GC 堆上以字节为单位分配的当前内存。

请注意，它说的是“其他四个计数器的总和”，而不仅仅是“分配在其他四个堆上的字节总和”，这是有道理的，因为在 Gen 0 垃圾回收之后 Gen 0 堆中有 0 个字节。

我注意到在我的情况下，所有堆中的#Bytes 恰好是 Gen 1 + Gen 2 + Large Object Heap。这是一个错误吗？还是我错过了阅读数字？

Windows 7 企业版，性能监视器 6.1.7601

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:01:37.937

据此[，](http://msdn.microsoft.com/en-us/library/x2tyfybc%28v=vs.100%29.aspx)所有堆 = Gen 1 + Gen 2 + 大对象堆（没有 Gen 0）

# mysql - 2 同一张表上的 LEFT OUTER JOIN 冻结服务器

> ID：10236755
> 
> 赞同：1
> 
> 时间：2012-04-19T21:05:13.353
> 
> 标签：mysql, sql

我正在尝试对表“apst_mailings”运行查询，该表存储了我们发送给订阅者的每个时事通讯的内容。每次我们尝试向个人发送电子邮件时，我们都会在 apst_mailings_accuses 中插入一行，报告发送的时间和状态，以及新信的 ID。我想列出时事通讯并计算每个已发送和成功发送的总数。

```
 SELECT m.id AS code_mailing, 
    COUNT(a.adh_code) AS num, COUNT(b.adh_code) AS succes
    FROM apst_mailings AS m
        LEFT OUTER JOIN apst_mailings_accuses AS a
            ON a.id_mailing = m.id
        LEFT OUTER JOIN apst_mailings_accuses AS b
            ON b.id_mailing = m.id
            AND b.etat = 'succes'
    GROUP BY m.id 
```

它只是永远挂起服务器。我已经在单独的查询中尝试了每个连接，并且没有问题：

```
// Counts the email sent per mailing
    SELECT m.id AS code_mailing, 
    COUNT(a.adh_code) AS num
    FROM apst_mailings AS m
        LEFT OUTER JOIN apst_mailings_accuses AS a
            ON a.id_mailing = m.id
    GROUP BY m.id

    SELECT m.id AS code_mailing, 
    COUNT(b.adh_code) AS succes
    FROM apst_mailings AS m
        LEFT OUTER JOIN apst_mailings_accuses AS b
            ON b.id_mailing = m.id
            AND b.etat = 'succes'
    GROUP BY m.id 
```

我可以拆分我的查询，但它不起作用的原因真的让我很困扰。谁能解释一下？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T21:08:49.967

您可以通过使用单个联接并使用`SUM`执行条件计数以更简单的方式获得所需的内容。

```
SELECT
   m.id AS code_mailing, 
   COUNT(a.adh_code) AS num,
   SUM(a.etat = 'succes') AS succes
FROM apst_mailings AS m
LEFT OUTER JOIN apst_mailings_accuses AS a
ON a.id_mailing = m.id
GROUP BY m.id 
```

但是您的查询不起作用的原因是因为您将子查询*a*中的**所有行与子查询***b中的***所有**匹配行连接到一个巨大的交叉连接中。这可能会生成一个巨大的临时结果集，这可能是查询需要永远终止的原因。即使它确实终止了，你的计数也会完全消失——它们将是这两个计数的乘积。

 ****要解决它，`GROUP BY`请先做。然后`JOIN`将结果发送到您的主表。

```
SELECT
   m.id AS code_mailing, 
   IFNULL(a.num, 0) AS num,
   IFNULL(b.succes, 0) AS succes
FROM apst_mailings AS m
LEFT OUTER JOIN (
   SELECT id_mailing, COUNT(adh_code) AS num
   FROM apst_mailings_accuses 
   GROUP BY id_mailing
) a
ON a.id_mailing = m.id
LEFT OUTER JOIN (
    SELECT id_mailing, COUNT(adh_code) AS succes
    FROM apst_mailings_accuses
    WHERE etat = 'succes'
    GROUP BY id_mailing
) b
ON b.id_mailing = m.id 
```****

# ms-word - 将多个文档与 Word.Application（COM 互操作）组合会导致格式不正确？

> ID：10236757
> 
> 赞同：2
> 
> 时间：2012-04-19T21:05:28.547
> 
> 标签：ms-word, office-interop

使用.net 4.0/vs2010，office 2007

请注意，我愿意接受任何其他方法来完成最终结果。我没有嫁给 Word，但我确实有不能包含任何许可的第三方工具（没有 Aspose）的限制，我想尽量减少用户机器上的任何安装。这是一个公司环境，所以我确实有一些控制权。

我需要将 2 或 3 个 word 文档打印为单个文档。我的代码如下，它可以工作....除了第二个文档的格式总是有点偏离（段落间距、字体、边距）。奇怪的是第三个文档（它有不同的页面方向）出来很好。有时用户需要将文档发送到传真服务器，因此第一页将是传真封面。

我哪里失败了？？KillCom(object o) 方法调用 System.Runtime.InteropServices.Marshal.ReleaseComObject(o);

```
 public void CombineMultipleDocuments(string coverSheetPath, string[] documentPaths, string destinationFile, bool makeVisible)
        {
            List<string> docs = new List<string>();

            if (string.IsNullOrWhiteSpace(destinationFile))
                throw new ArgumentException("The destinationfile is required");
            try
            {
                //strip invalid paths
                foreach (string p in documentPaths)
                {
                    if (!string.IsNullOrWhiteSpace(p) && File.Exists(p))
                    {
                        docs.Add(p);
                    }
                }

                if (docs.Count == 0)
                    throw new ArgumentException("There are no documents to print");
                //open the cover sheet
                wrdApp = new Word.Application();
                wrdApp.Visible = makeVisible;

                //if there is no cover sheet open the first document and append the remaining docs to it
                if (string.IsNullOrWhiteSpace(coverSheetPath))
                {
                    coverSheetPath = docs[0];
                    docs.RemoveAt(0);
                }
                wrdDoc = wrdApp.Documents.Open(coverSheetPath, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing
                    , ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing
                    , ref oMissing, ref oMissing);
                wrdRange = wrdDoc.Content;

                //a little space
                wrdRange.InsertParagraphAfter();
                //attach the rest of the documents
                foreach (string path in docs)
                {
                    //open the new source document to be inserted
                    Word._Document newDoc = wrdApp.Documents.Open(path, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing
                    , ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing
                    , ref oMissing, ref oMissing);

                    //continues page break
                    wrdRange.Collapse(Word.WdCollapseDirection.wdCollapseEnd);
                    wrdRange.InsertBreak(Microsoft.Office.Interop.Word.WdBreakType.wdSectionBreakNextPage);

                    //create a new section for our new content
                    Word.Section sec = wrdRange.Sections.Add(ref oMissing, ref oMissing);

                    //copy the source document's styles, fonts, etc
                    sec.PageSetup.Orientation = newDoc.PageSetup.Orientation;

                    sec.Range.Font = newDoc.Content.Font;

                    //unlink footer and headers
                    sec.Footers[Word.WdHeaderFooterIndex.wdHeaderFooterPrimary].LinkToPrevious = false;
                    sec.Footers[Word.WdHeaderFooterIndex.wdHeaderFooterPrimary].Range.FormattedText = newDoc.Sections[1].Footers[Word.WdHeaderFooterIndex.wdHeaderFooterPrimary].Range.FormattedText;

                    sec.Headers[Word.WdHeaderFooterIndex.wdHeaderFooterPrimary].LinkToPrevious = false;
                    sec.Headers[Word.WdHeaderFooterIndex.wdHeaderFooterPrimary].Range.FormattedText = newDoc.Sections[1].Headers[Word.WdHeaderFooterIndex.wdHeaderFooterPrimary].Range.FormattedText;

                    wrdRange.FormattedText = newDoc.Content.FormattedText;

                    //close
                    newDoc.Saved = true;
                    newDoc.Close(ref oFalse, ref oMissing, ref oMissing);
                    newDoc = null;
                    KillCOM(newDoc);

                }

                //the diary function needs these variables to be set
                Word.Variables wrdVars = wrdDoc.Variables;

                wrdVars.Add("Letter", WrdPropLETTER_NAME);
                wrdVars.Add("FileKey", WrdPropFILE_KEY);
                wrdVars.Add("LetterTo", WrdPropLETTER_TO);
                wrdVars.Add("LetterFirstName", WrdPropLETTER_FNAME);
                wrdVars.Add("LetterLastName", WrdPropLETTER_LNAME);
                wrdVars.Add("LetterCompany", WrdPropLETTER_COMPANY);
                wrdVars.Add("LetterCategory", WrdPropLETTER_CATEGORY);
                wrdVars.Add("CurrentHeaderDoc",WrdPropCUR_HEADERDOC);
                wrdVars.Add("CurrentDataDoc", WrdPropCUR_DATADOC);

                wrdDoc.Protect(Word.WdProtectionType.wdAllowOnlyFormFields, ref oMissing, "mojojojo");
                wrdDoc.SaveAs(destinationFile, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing
                    , ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing
                    , ref oMissing, ref oMissing);

                //close if hidden
                if (!makeVisible)
                {
                    wrdDoc.Saved = true;
                    wrdDoc.Close(ref oFalse, ref oMissing, ref oMissing);

                    wrdApp.Quit(ref oFalse, ref oMissing, ref oMissing);
                    wrdDoc = null;
                    wrdApp = null;
                }

                //clean up
                if (File.Exists(coverSheetPath))
                    File.Delete(coverSheetPath);
                foreach (string path in documentPaths)
                {
                    if (File.Exists(path))
                        File.Delete(path);
                }
            }
            catch (Exception e)
            {
                string error = e.ToString();
            }
            finally
            {
                wrdRange = null;
                wrdDoc = null;
                wrdApp = null;
                KillCOM(wrdRange);
                KillCOM(wrdDoc);
                KillCOM(wrdApp);

            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:16:34.093

我使用**PasteAndFormat**函数来保持原始格式，并复制页面属性以保持每个文档的边距和方向。

```
 void mergeDocumentsTest(List<string> documentFiles)
 {

        _Application oWord = new Microsoft.Office.Interop.Word.Application();
        _Document oDoc = oWord.Documents.Add();
        Selection oSelection = oWord.Selection;

        foreach (string documentFile in documentFiles)
        {
            _Document oCurrentDocument = oWord.Documents.Add(documentFile);
            copyPageSetup(oCurrentDocument.PageSetup, oDoc.Sections.Last.PageSetup);
            oCurrentDocument.Range().Copy();
            oSelection.PasteAndFormat(WdRecoveryType.wdFormatOriginalFormatting);
            if (!Object.ReferenceEquals(documentFile, documentFiles.Last()))
                oSelection.InsertBreak(WdBreakType.wdSectionBreakNextPage);
        }

        oDoc.SaveAs("testdoc.doc");
        oDoc.Close();

        //TODO: release objects, close word application

    }

    void copyPageSetup(PageSetup source, PageSetup target)
    {
        target.PaperSize = source.PaperSize;

        //target.Orientation = source.Orientation; //not working in word 2003, so here is another way
        if (!source.Orientation.Equals(target.Orientation))
            target.TogglePortrait();

        target.TopMargin = source.TopMargin;
        target.BottomMargin = source.BottomMargin;
        target.RightMargin = source.RightMargin;
        target.LeftMargin = source.LeftMargin;
        target.FooterDistance = source.FooterDistance;
        target.HeaderDistance = source.HeaderDistance;
        target.LayoutMode = source.LayoutMode;
    } 
```

# jquery - 使用 div 代替复选框

> ID：10236764
> 
> 赞同：4
> 
> 时间：2012-04-19T21:06:02.790
> 
> 标签：jquery, html, css

我有一个检查列表页面，其中包含一个无序列表的 div。单击 div 时，jquery 会切换一类“已选择”。提交后，jquery 会创建一个包含所有“选定”id 的数组，并通过 AJAX 将其传递给服务器。

这合适吗？我违反规则了吗？我似乎工作正常。我见过格式化复选框的例子，但这种方法更干净、更容易。可能太容易了，这就是为什么我要向你们这些优秀的人寻求帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T22:16:16.753

不，它不“正确”，因为它忽略了 HTML 的语义。

如果您担心可访问性，您应该使用复选框，`<labels>`这样屏幕阅读器等辅助技术就会知道该怎么做。当然，如果没有启用 JavaScript，该应用程序将根本无法运行。

您应该能够使用 CSS 和 JavaScript 使页面看起来和感觉完全符合您的要求，同时仍然使用复选框。这显然是更多的工作，由您决定收益是否合理。

# ruby - 允许用户在不使用 eval 的情况下合并表

> ID：10236767
> 
> 赞同：1
> 
> 时间：2012-04-19T21:06:21.153
> 
> 标签：ruby, ruby-on-rails-3, eval

在我的应用程序中，我需要允许用户进行计算，例如从不同表中的行中添加/减去/除值。有比使用 eval() 更安全的方法吗？将字符串作为输入并编写我自己的函数来解析字符串进行计算会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T22:26:32.457

只过滤掉非数字和非操作数

```
var1 = "4+4;haha i'm a nasty command"
var1.gsub!(/[^\d|\+-\/\*]/,"")
p eval(var1) => 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:27:43.823

是的。与您不应直接使用用户输入进行 SQL 查询以避免 sql 注入的原因相同：在这种情况下，您不应该这样做以避免代码注入。ii

# sql - 如何在给定日期范围内查找列的总和，其中表格只有开始日期和结束日期

> ID：10236769
> 
> 赞同：1
> 
> 时间：2012-04-19T21:06:26.457
> 
> 标签：sql, postgresql

我有一个这样的 postgresql 表 userDistributions ：
`user_id, start_date, end_date, project_id, distribution`

我需要编写一个查询，其中给定的日期范围和用户 ID 的输出应该是该给定用户每天所有分布的总和。
所以输入的输出应该是这样的：'2-2-2012' - '2-4-2012'，一些用户 ID：
`Date SUM(Distribution)
2-2-2012 12
2-3-2012 15
2-4-2012 34` 

一个用户在许多项目中都有分布，所以我需要对每天所有项目中的分布求和，然后输出当天的总和。

我的问题是我应该反对什么？如果我有一个字段作为日期（而不是 start_date 和 end_date），那么我可以写一些类似的东西，
`select date, SUM(distributions) from userDistributions group by date;`
但在这种情况下，我不知道该怎么做。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:46:13.367

用于[`generate_series`](http://www.postgresql.org/docs/current/interactive/functions-srf.html#FUNCTIONS-SRF-SERIES)生成您的日期，如下所示：

```
select dt.d::date, sum(u.distributions)
from userdistributions u
join generate_series('2012-02-02'::date, '2012-02-04'::date, '1 day') as dt(d)
  on dt.d::date between u.start_date and u.end_date
group by dt.d::date 
```

您的日期格式不明确，所以我猜是在将其转换为 ISO 8601 时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T22:07:23.927

这很像@mu 的回答。
但是，要涵盖没有匹配项的日子，您应该使用`LEFT JOIN`：

```
SELECT d.d::date, sum(u.distributions) AS dist_sum
FROM   generate_series('2012-02-02'::date, '2012-02-04'::date, '1 day') AS d(d)
LEFT   JOIN userdistributions u ON d.d::date BETWEEN u.start_date AND u.end_date
GROUP  BY 1 
```

# android - Android 停止倒计时

> ID：10236771
> 
> 赞同：0
> 
> 时间：2012-04-19T21:06:30.157
> 
> 标签：android, widget, countdown

我有一个显示倒计时的小部件。为此，我使用了 CountDownTimer 类，但问题是倒计时经常停止！我认为是因为 android 会在很多小时内自动停止线程，因为倒计时。如何解决这个问题？谢谢

```
public class TempoIndietro extends CountDownTimer{
     AppWidgetManager manager;
     ComponentName thisWidget;

    public TempoIndietro(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
        thisWidget = new ComponentName(context, widget.class); 
        manager = AppWidgetManager.getInstance(context);  
        remoteView = new RemoteViews(context.getPackageName(),R.layout.widgett);
    }

    @Override
    public void onFinish() {
    remoteView.setTextViewText(R.id.textView2, context.getResources().getString(R.string.onair_widget_countdown));
        manager.updateAppWidget(thisWidget, remoteView);
            }

            @Override
            public void onTick(long millisUntilFinished) {
                SimpleTimeFormat tf = new SimpleTimeFormat("$dd$ : $HH$: $mm$: $ss$");    
                String risultato = tf.format(millisUntilFinished); // arg0 tempo
                remoteView.setTextViewText(R.id.textView2, risultato);
                manager.updateAppWidget(thisWidget, remoteView);
            };
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T22:24:16.313

记住计时器的开始时间并计算与该时间的差。

您可以为此使用本地存储。

最好在 Activity 中的 onStop() 和 onResume() 中调用它。

节省：

```
SharedPreferences settings = getSharedPreferences("myappname", 0);
SharedPreferences.Editor editor = settings.edit();
editor.putLong("varname", startDate.getTime());
editor.commit(); 
```

取回：

```
SharedPreferences settings = getSharedPreferences("myappname", 0);
Long millis = settings.getLong("varname", null);
Date startDate = new Date(millis); 
```

# c++ - gnu 制作。仅重新编译未更改的文件

> ID：10236777
> 
> 赞同：1
> 
> 时间：2012-04-19T21:06:50.387
> 
> 标签：c++, makefile

请帮我制作makefile。我希望 `make' 仅重新编译已更改的文件。这是我的生成文件：

```
ROOT_DIR= ..
BUILD_TYPE= Release
BUILD_DIR= $(ROOT_DIR)/$(BUILD_TYPE)
O_DIR= $(BUILD_DIR)/obj

TARGETS= ftp_auto_backup sftp_auto_backup

CXX= g++
CXXFLAGS= -DBOOST_THREAD_USE_LIB -O3 -Wall -fmessage-length=0
FTP_LDFLAGS= -static-libstdc++ -static-libgcc -s -L $(ROOT_DIR)/lib/Release -l:libboost_thread-mgw46-mt-1_49.a -l:libcommon.a \
    -l:libfile.a -l:libfilesearcher.a -l:libftpclient.a -l:libftplib.a -l:libdbclient.a -l:libsqlite3.a -l:libscheduler.a -l:libws2_32.a
SFTP_LDFLAGS= -static-libstdc++ -static-libgcc -s -L $(ROOT_DIR)/lib/Release -l:libboost_thread-mgw46-mt-1_49.a -l:libcommon.a \
    -l:libfile.a -l:libfilesearcher.a -l:libdbclient.a -l:libsqlite3.a -l:libscheduler.a -l:libsftpclient.a -l:libws2_32.a -l:libssh.dll

OBJECTS= appconfig.o backuplauncher.o clientbackup.o main.o
LD_OBJECTS= $(addprefix $(O_DIR)/,$(OBJECTS))

all: init $(TARGETS)

debug: CXXFLAGS= -O0 -g3 -Wall -fmessage-length=0
debug: BUILD_TYPE= Debug
debug: all

init:
    @mkdir -p $(BUILD_DIR)
    @mkdir -p $(O_DIR)

ftp_auto_backup: set_type_ftp $(OBJECTS) 
    $(CXX) -o $(BUILD_DIR)/$@.exe $(LD_OBJECTS) $(FTP_LDFLAGS)

sftp_auto_backup: set_type_sftp $(OBJECTS)
    $(CXX) -o $(BUILD_DIR)/$@.exe $(LD_OBJECTS) $(SFTP_LDFLAGS)

set_type_ftp:
    $(eval CXXFLAGS+=-DPROJECT_TYPE=FTP)

set_type_sftp:
    $(eval CXXFLAGS+=-DPROJECT_TYPE=SFTP)

%.o: %.cpp
    $(CXX) -c $(CXXFLAGS) $< -o $(O_DIR)/$@

clean:
    rm -rf $(addprefix $(ROOT_DIR)/Release/obj/,$(OBJECTS)) $(addprefix $(ROOT_DIR)/Debug/obj/,$(OBJECTS))
    rm -rf $(addprefix $(ROOT_DIR)/Release/,$(addsuffix .exe,$(TARGETS))) $(addprefix $(ROOT_DIR)/Debug/,$(addsuffix .exe,$(TARGETS))) 
```

是的，我知道[自动生成先决条件](http://www.gnu.org/software/make/manual/make.html#Automatic-Prerequisites)，但我真的应该使用它吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:24:25.230

您的目标取决于当前目录中的对象，而不是 obj/ 中的对象。改成这样：

```
ftp_auto_backup: set_type_ftp $(LD_OBJECTS)
    $(CXX) -o $(BUILD_DIR)/$@.exe $(LD_OBJECTS) $(FTP_LDFLAGS)

sftp_auto_backup: set_type_sftp $(LD_OBJECTS)
    $(CXX) -o $(BUILD_DIR)/$@.exe $(LD_OBJECTS) $(SFTP_LDFLAGS)

# (...)

$(O_DIR)/%.o: %.cpp
    $(CXX) -c $(CXXFLAGS) $< -o $@ 
```

是的，如果您希望目标文件不仅在更改 .cpp 文件时重新编译，而且在更改标头 (.h) 文件时重新编译，则需要生成这些先决条件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:39:44.790

我想**%.o : %.cpp**是不够的，你应该使用 VPATH 让知道来源在哪里：

```
vpath %.cpp src 
```

# c++ - 在 OpenGL 中使用文本——GLUT？

> ID：10236780
> 
> 赞同：2
> 
> 时间：2012-04-19T21:07:06.317
> 
> 标签：c++, opengl, glut

一段时间以来，我一直在 openGl 程序中将 GLUT 用于菜单，但很难接受将文本输入 gl 场景的难度。有没有办法使用 GLUT 用于场景内菜单的文本系统？

如果是这样，它是如何完成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:18:25.267

打印鼠标位置的 x 坐标

```
char gMouseXLoc[25];
void drawString (void * font, char *s, float x, float y, float z){
     unsigned int i;
     glRasterPos3f(x, y, z);

     for (i = 0; i < strlen (s); i++)
          glutBitmapCharacter (font, s[i]);
}

void displayMethodName {
     ...
     drawString(GLUT_BITMAP_HELVETICA_18, gMouseXLoc, 0, 0, 0); 
}

void mouseMotionForGlut(int x, int y){
     double xloc = x;
     sprintf(gMouseXLoc, "%2.15f", xloc);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:17:33.520

这里可能还有一些其他的库，例如[freeglut](http://freeglut.sourceforge.net/)（特别是查看[字体渲染函数](http://freeglut.sourceforge.net/docs/api.php#FontRendering)）。或者，编写自己的简单打印字符串的函数应该不会太难。

有关更多选择，请参阅[此问题](https://stackoverflow.com/questions/538661/how-do-i-draw-text-with-glut-opengl-in-c)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T01:46:44.340

如果您可以费心翻译页面和评论，这门课是由我学校的一名学生完成的，而且非常容易使用。基本上你所要做的就是加载你想要使用的字体，然后使用打印功能。2行，效果非常好。我在一些 openGL 应用程序中使用过它，它真的很容易使用。

链接：http: //4.eepp.ca/?p= [phont](http://4.eepp.ca/?p=phont)（教程+代码示例，法语）

下载：http: [//4.eepp.ca/files/phont-1.zip](http://4.eepp.ca/files/phont-1.zip)

附言。它使用 GL.h 和 GLU.h

# javascript - 如何在页面加载时制作 div 动画？

> ID：10236785
> 
> 赞同：0
> 
> 时间：2012-04-19T21:07:19.653
> 
> 标签：javascript, jquery, css

请注意，当您加载[squareup.com](https://squareup.com/)时，左侧的表单会产生动画效果。您如何制作这样的 css3 动画？是否需要 javascript 添加一些类卸载？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:16:21.227

纯 CSS 3 动画将是最好的方法——因为它干净、简单且容易。

但是，较旧的浏览器不支持纯 CSS 3 动画，因此您现在可能最好使用 jQuery（直到更多人支持 CSS 3 动画）。

```
<script>
$(function(){
      // make a basic fadeIn animation
      $("#divId").fadeIn();
});
</script> 
```

将 #divId 替换为您的 div id 属性。不要忘记显示：无；分区。

对于 jQuery 动画，只需访问[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:17:49.523

实际上，在查看源代码之后，这种效果似乎主要是（如果不是全部）CSS3。这是CSS的一个片段：

```
.square-signup-form h1, .square-signup-form .pricing-prop, .square-signup-form p, .square-signup-form .instructions, .square-signup-form .cards-accepted, .cardcase-signup-form h1, .cardcase-signup-form .pricing-prop, .cardcase-signup-form p, .cardcase-signup-form .instructions, .cardcase-signup-form .cards-accepted {
        color: #fff;
        -moz-transition: all 800ms cubic-bezier(0.51, 0.01, 0.37, 0.98);
        -webkit-transition: all 800ms cubic-bezier(0.51, 0.01, 0.37, 0.98);
        -o-transition: all 800ms cubic-bezier(0.51, 0.01, 0.37, 0.98);
        transition: all 800ms cubic-bezier(0.51, 0.01, 0.37, 0.98);
}
.square-scene .square-signup-form {
    -moz-transform: translate(0pt, 0pt);
    opacity: 1;
    z-index: 3;
}
.ie8 .square-scene .square-signup-form {
    display: block;
} 
```

[您可以在https://d1g145x70srn7h.cloudfront.net/static/db447699c3d01e60cd9b8e1e1c721ce8837f22bd/stylesheets/home.css](https://d1g145x70srn7h.cloudfront.net/static/db447699c3d01e60cd9b8e1e1c721ce8837f22bd/stylesheets/home.css)查看完整的 CSS

这是一个更容易阅读的副本：http: [//pastebin.com/gHTn1YuA](http://pastebin.com/gHTn1YuA)

# python - 在 Amazon ec2 上部署科学的 Python 算法

> ID：10236786
> 
> 赞同：5
> 
> 时间：2012-04-19T21:07:22.793
> 
> 标签：python, numpy, amazon-ec2, scipy, starcluster

我有一个 Python 科学模型，它调用一些 C 代码并使用 numpy、scipy 和许多地理分析模块。我想在 EC2 上部署它，但我对 EC2 还不太了解。

在设置派生自 StarCluster AMI 的 AMI 后，我已检查是否可以使用 StarCluster 包来部署我的堆栈。这些已经有 numpy 和 scipy 和 ipython，所以我所要做的就是添加地理模块。

我的计划是编写一个在客户机器上运行的独立 GUI，并确保他们的输入对我的模型有效。然后，独立 GUI 将最多约 10 GB 的压缩档案发送到 FTP 位置。然后他们登录到我在 EC2 上运行的网页，他们在其中配置运行属性（实例数、模型运行数）。该网页启动一个脚本，该脚本在客户指定的集群上完成客户的工作。后处理器处理模型输出并写入最初受密码保护的结果网页和图表，仅供客户查看。我的模型运行由单个迭代组成，可能需要 5 分钟到 3 小时。

任何人都可以为这个模型的理想设置提供任何建议吗？我想我可以弄清楚它的科学部分，但我不明白运行 Web 界面的起点是什么......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T11:43:51.190

有趣的项目！

可以通过 pip 将模块添加到您在 AWS EC2 上部署的 AMI。首先，您需要通过 SSH 访问您的实例。这方面的文档在这里： [http](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html) ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html 然后，如果您还没有安装它，您可以安装 pip 和您的其他软件包和模块，如下所示：

```
sudo apt-get install -y python-pip
sudo pip install numpy (already installed so no need for this)
sudo pip install scipy (same as above) 
```

Ubuntu & Debian sudo apt-get install python-numpy python-scipy python-matplotlib ipython ipython-notebook python-pandas python-sympy python-nose

Ubuntu 12.10 和 Debian 7.0 中的版本符合当前的 Scipy 堆栈规范。用户可能还想为额外的 Scipy 包添加 NeuroDebian 存储库。Fedora sudo yum install numpy scipy python-matplotlib ipython python-pandas sympy python-nose

Fedora 17 和更早版本的用户应该使用 pip 升级 IPython：sudo pip install --upgrade ipython（上面的信息通过 scipy 文档找到：[http](http://www.scipy.org/install.html) ://www.scipy.org/install.html ）

至于您的 GUI 和大文件上传计划，请查看 AWS S3（尽管这有一些限制）以进行文件存储，根据您希望将解决方案推送到多远，您可以使用分块文件上传或流式传输类似于这些文件传输解决方案的多部分请求：

```
https://github.com/blueimp/jQuery-File-Upload/wiki/Chunked-file-uploads
https://devcenter.heroku.com/articles/paperclip-s3
https://github.com/heiflo/play21-file-upload-streaming
https://github.com/netty/netty/issues/845
https://github.com/playframework/playframework/pull/884
https://github.com/floatingfrisbee/amazonfileupload
http://blog.assimov.net/blog/2011/04/03/multi-file-upload-with-uploadify-and--carrierwave-on-rails-3/ 
```

（快速搜索“分块文件上传 github”或“分块文件上传 google 代码”应该会在可用代码和详细信息方面出现很多选项。）

但是，文件上传/传输的更简单方向可能是查看以下解决方案：

```
http://www.bucketexplorer.com/be-download.html
https://forums.aws.amazon.com/thread.jspa?messageID=258228&tstart=0
https://forums.aws.amazon.com/thread.jspa?messageID=257781&tstart=0
http://www.jfileupload.com/products/js3upload/index.html
http://codeonaboat.wordpress.com/2011/04/22/uploading-a-file-to-amazon-s3-using-an-asp-net-mvc-application-directly-from-the-users-browser/ 
```

无论如何，您都需要确保您的 EC2 实例和/或 S3 存储桶上的环境配置为允许大文件上传和处理。例如，您的 AMI php 版本需要通过 php.ini 编译和设置以上传特定大小的文件 - 您还需要注意超时 - 您可能需要 64 位 AMI 和大型 EBS为这一切提供动力。

至于不太复杂的 GUI 前端组件，jQuery 或 node.js 是很好的起点。Github 或 AWS EC2/S3 论坛上也有大量代码包和文档，例如：

```
https://github.com/josegonzalez/upload 
```

在不了解您的具体要求、计划和时间/预算限制的情况下，这是我能给出的最多建议。但是，请随时回复此线程或直接向我发送任何其他问题。

# bugzilla - Rally / Bugzilla：同步“计划状态”/状态字段

> ID：10236789
> 
> 赞同：0
> 
> 时间：2012-04-19T21:07:37.067
> 
> 标签：bugzilla, rally

有没有人使用 Rally-Bugzilla 连接器来同步状态字段（例如，将 Rally 中的 Schedule State 字段与 Bugzilla 中的状态字段同步 - 它具有诸如“NEW”、“EVALUATED”、“ASSIGNED”、“IN_WORK”等值)? 在我看来，这很复杂，因为两个系统的值之间没有 1:1 的关系，在这种情况下，有人对方法有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:54:04.210

这通常通过连接器的 config.xml 中的字段处理程序来促进。[在http://www.rallydev.com/help/rally-integrations-faq-and-best-practices#How-to-map-fields](http://www.rallydev.com/help/rally-integrations-faq-and-best-practices#How-to-map-fields)上有一个不错的讨论。总体思路是这样的：

```
 <Connector>
       <FieldMapping>
          <Field> <Rally>State</Rally>
                  <Other>BG_STATUS</Other>
          </Field>
          ....
       <OtherFieldHandlers>
          <OtherEnumFieldHandler>
             <FieldName>BG_STATUS</FieldName>
             <Mappings>
                <Field><Rally>Defined</Rally>           <Other>New</Other></Field>
                <Field><Rally>In-Progress</Rally>       <Other>Assigned</Other></Field>
                <!-- Etc -->
             </Mappings>
          </OtherEnumFieldHandler>
    </Connector> 
```

请注意，您可能需要进入 Rally 工具为 State 字段/下拉列表定义一些自定义值，以适应 Bugzilla 中状态值的启发式映射。

# java - Java：如何在静态方法中创建对象并调用另一个类的方法？

> ID：10236792
> 
> 赞同：0
> 
> 时间：2012-04-19T21:08:02.027
> 
> 标签：java, class, object, methods, static

我做了几个小时的 Java 作业，并且在这个测试器类中坚持了将近 5 个小时。

在这个作业中，我创建了一个 Product 类、一个 Money 类、一个 LineItem 类和一个 Inventory 类。现在我需要创建一个测试类来通过将新的 lineitems 放入库存数组来测试程序。

在测试器类中，我试图创建一个静态方法`public static void addTestItems(Inventory theInventory)`，假设添加 4 个项目。对于每个项目，我需要创建一个产品对象，后跟一个 LineItem 对象来包含新创建的产品。接下来我需要使用库存类中的方法将项目添加到库存类的数组中。

到目前为止我也尝试过：

```
private static void addTestItems(Inventory theInventory)
{
    Inventory[] _items;
    Product product1 = new Product("Book","Objects first with Java"," An excellent introductory Java textbook");
    Product product2 = new Product("CD","The dark side of the moon","The all-time classic Pink Floyd album");
    Product product3 = new Product("DVD", "Transformers","Robots in disguise");
    Product product4 = new Product("Laptop","Lenovo T42","A good yet affordabble laptop");
    Money unitPrice1 = new Money(29,99);
    Money unitPrice2 = new Money(4,99);
    Money unitPrice3 = new Money(9,99);
    Money unitPrice4 = new Money(450,0);
    _items[0] = new LineItem(product1,5,unitPrice1);
    _items[1] = new LineItem(product2,8,unitPrice2);
    _items[2] = new LineItem(product3,200,unitPrice3);
    _items[3] = new LineItem(product4,9,unitPrice4); 
} 
```

当前的错误是`incompatible types- found LineItem but expected Inventory`所以我尝试更改`Inventory[] _items;`为`LineItem[] _items;`. 但错误是变量_items 可能未初始化。

对不起，伙计们，我是一个真正的 Java 菜鸟，我尝试在线搜索很长时间，但我不太了解大多数结果。我唯一了解的是[http://forums.devshed.com/java-help-9/bluej-compiler-error-cannot-find-symbol-variable-object-688573.html](http://forums.devshed.com/java-help-9/bluej-compiler-error-cannot-find-symbol-variable-object-688573.html)但我厌倦了投入我的上下文但失败了. 我还发现了很多结果，但它们中有构造函数和实例变量，我的老师特别提到我不需要它们。

想知道专家是否可以像让我知道我的错误一样指导我。谢谢，谢谢。

库存类：

```
/**
* In the Inventory class, it is merely to create a list / array of product which allows    the information from the linitem to be put with an index.
* For example, for the first product, we can use the inventory class to input it into the index 1\. and he next product into index 2 and so on.
 * It is suse to create an array and inputing the lineitem information into it.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
 public class Inventory
{
// instance variables - replace the example below with your own
private LineItem[] _items;
private int _numItems;

/**
 * Constructor for objects of class Inventory
 */
public Inventory()
{
    // initialise instance variables
    _items = new LineItem[1000];
    _numItems = 0;
}

/**
 * An example of a method - replace this comment with your own
 * 
 * @param  y   a sample parameter for a method
 * @return     the sum of x and y 
 */
public void addItem(LineItem item)
{
   _items[_numItems]= item;
   _numItems++;
}

public String toString()
{
    String result="";
    int i=0;
    while (i < _numItems)
    {
        result = result + _items[i] + "/n";
        i++;
    }
    return result;
}

public void print()
{
    String myResult=this.toString();
    System.out.println(myResult);
}

public Money getTotalValue()
{
    int i=0;
    Money total= new Money(0);
    while (i<_items.length)
    {
        total = total.add(Money.NO_MONEY);
        i++;
    }
    return total;
}

public LineItem getItem(String productName)
{
    int i = 0;
    LineItem itemDetails = null;
    while (i<_items.length)
    {
        if (_items[i].equals(productName))
        {
            itemDetails= _items[i];
        }
        else
        {
            //do nothing
        }
        i++;
    }
    return itemDetails;
   }
} 
```

我还没有对这些方法发表评论，但是一旦我理解了它就会这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:11:13.480

您的*数组*是 type `Inventory[]`- 但您正在尝试分配 type 的引用`LineItem`。你*也*没有初始化它。改变这个：

```
Inventory[] _items; 
```

对此：

```
LineItem[] _items = new LineItem[5]; 
```

一切都应该很好 - 尽管您没有使用索引 0（这就是为什么您需要它的大小为 5），并且之后您也没有对数组做任何事情......

使用数组的另一种替代方法是使用 List：

```
List<LineItem> items = new ArrayList<LineItem>();
items.add(new LineItem(product1, 5, unitPrice1));
items.add(new LineItem(product2, 8, unitPrice2));
items.add(new LineItem(product3, 200, unitPrice3));
items.add(new LineItem(product4, 9, unitPrice4)); 
```

...接下来想想你真正想用这个变量*做什么。*`items`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:13:44.167

```
LineItem[] _items = new LineItem[4]; 
```

那么索引从 0 开始而不是从 1 开始，

```
_items[4] 
```

将返回 indexoutofbounds 错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:14:17.500

一些东西：

```
incompatible types- found LineItem but expected Inventory 
```

是由于您的数组应该包含 Inventory 对象但您将 LineItems 分配给它

```
variable _items may not be initialise 
```

意味着你有你的 _items 对象，但你还没有将它初始化为任何东西。你想做

```
LineItem[] _items = new LineItem[4]; 
```

PS：如果您想要动态大小的数组，不知道您可能会加载多少行项目等，使用向量或集合或类似这些行的东西。

还，

```
_items[1] = new LineItem(product1,5,unitPrice1);
_items[2] = new LineItem(product2,8,unitPrice2);
_items[3] = new LineItem(product3,200,unitPrice3);
_items[4] = new LineItem(product4,9,unitPrice4); 
```

在 Java 中，数组元素从索引 0 而不是 1 开始

```
_items 
```

是一个不稳定的变量名，会让你的队友在你的咖啡里打喷嚏

# node.js - Node中如何通过index.js暴露所有模块类

> ID：10236794
> 
> 赞同：0
> 
> 时间：2012-04-19T21:08:14.400
> 
> 标签：node.js, module

我有一个这样的目录结构：

node_modules/mymodule/index.js ：

```
module.exports = require('./lib/mymodule'); 
```

node_modules/mymodule/lib/mymodule.js

```
var A = require('./a'),

function MyModule(){
    var self = this;
    self.version = '0.0.1'; 
}

/**
 * Expose MyModule
 */
module.exports = MyModule;

/**
 * Expose A
 */
exports.A = A; 
```

node_modules/mymodule/lib/a.js

```
function A(options) {
    console.log('A::constructor()');

};

User.prototype.test = function() {
    return "your test was successful";
};

module.exports = A; 
```

我的问题来自尝试实例化 A。在节点提示中我得到这个：

```
> var MyModule = require('mymodule');
undefined // why do I get undefined here ?
> var mymodule = new MyModule();
undefined
> var A = MyModule.A;
undefined
> var a = new A();
TypeError: undefined is not a function
    at repl:1:9
    at REPLServer.eval (repl.js:80:21)
    at repl.js:190:20
    at REPLServer.eval (repl.js:87:5)
    at Interface.<anonymous> (repl.js:182:12)
    at Interface.emit (events.js:67:17)
    at Interface._onLine (readline.js:162:10)
    at Interface._line (readline.js:426:8)
    at Interface._ttyWrite (readline.js:603:14)
    at ReadStream.<anonymous> (readline.js:82:12) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:50:34.500

节点[REPL](http://nodejs.org/api/repl.html)将打印命令的返回值，在所有这些情况下都是未定义的。这并不意味着您的变量未定义。

尝试：

```
> var A = MyModule.A; 
```

然后

```
> A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:47:02.277

更改`node_modules/mymodule/lib/mymodule.js`为：

```
var exports = module.exports = {
  version: '0.0.1'
}

exports.A = require('./a'); 
```

你只能有一个`module.exports`；）

# regex - 如何编写将赶上以下的正则表达式

> ID：10236795
> 
> 赞同：0
> 
> 时间：2012-04-19T21:08:15.740
> 
> 标签：regex, perl

```
ticket number: 6666
ticket number : 6666
ticket #6666
ticket # 6666 
```

我试过这个，`ticket[ \t]+(number|#)?[: \t]+([0-9]+)` 但它不适用于“ticket #6666”

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:10:58.713

关; 您希望冒号/空格是可选的。

```
ticket[ \t]+(number|#)?[: \t]*([0-9]+) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:11:05.710

尝试这样的事情：`ticket[\s\t]+(number|#)[:\s\t]*([0-9]+)`

此外，如果您还没有使用它，我会推荐[http://regexpal.com/](http://regexpal.com/)来帮助您进行测试。这是一个很好的资源，可以快速查看您的表达匹配的内容。

# ruby-on-rails - Rails 3.2.3 GeoLocation 使用 MaxMind

> ID：10236800
> 
> 赞同：0
> 
> 时间：2012-04-19T21:08:54.383
> 
> 标签：ruby-on-rails, ruby, geolocation, ip

我对 Rails 完全陌生，并通过将现有的辅助项目从 PHP 引入 Rails 开始玩。目前我[在 PHP 中使用 MaxMind GeoLocation Pecl 扩展](http://www.maxmind.com/app/php)。

我想知道是否有与 Rails 等效的产品？我搜索了谷歌并找到了一些潜在客户，但我也在使用 Rails 3.2.3。

我的问题是什么可以与 Rails 中的 Pecl 地理定位扩展相媲美？我确实找到[了这个](http://www.maxmind.com/app/ruby)，但还没有设置它。

昨晚我确实找到了[Ruby Geocoder](http://rubygeocoder.com/)，这看起来很有希望

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:36:58.700

你试过[https://github.com/imajes/geokit-gem](https://github.com/imajes/geokit-gem)吗？

# r - 通过 ddply 确定哪个元素是最大的

> ID：10236805
> 
> 赞同：1
> 
> 时间：2012-04-19T21:09:07.700
> 
> 标签：r, plyr

我有一个包含 ID 变量、时间点和响应值的数据框。我正在使用一些旧代码，它使用 ddply 来计算每个 ID 变量的最大平均值（即，每组中响应最高的时间点）：

```
grp <- rep(c("a", "b"), each=6)
t <- rep(1:2, each=3, len=12)
y <- rnorm(length(t))
df <- data.frame(grp=factor(grp), t=t, y=y)
meanY <- ddply(df, .(grp, t), function(x) mean(x$y))
maxMeanY <- ddply(meanY, .(grp), function(x) max(x$V1)) 
```

我现在决定我还想知道每个最大平均值对应的时间值：

```
maxTimes
>   grp  t V1
 1    a  2 0.0534
 2    b  1 0.6015 
```

即，告诉我对于 a 组，t2 的平均值最高，但对于 b 组，t1 的平均值最高。

得到这个最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T02:22:09.893

```
ddply(meanY, .(grp), summarise, max=max(V1), where=t[which.max(V1)]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T21:35:20.193

我认为这可能会给你你想要的，但可能有更好的方法：

```
maxMeanY <- ddply(meanY, .(grp), function(x)c( max(x$V1), x[which.max(x$V1), 2])) 
```

# git - 使用什么 VCS？

> ID：10236806
> 
> 赞同：2
> 
> 时间：2012-04-19T21:09:19.983
> 
> 标签：git, svn, version-control, mercurial, tfs

在我工作的公司，我们正在启动一个项目，并且从头开始，因为我和其他 2 位开发人员是公司的第一批开发人员，我们正在努力为我们的工作建立基础。

因为我们将来要开发到Windows Phone和Android，可能还有iPhone。我们将分别使用 Visual Studio 2010 和 IntelliJ for WP 和 Android（从我们可以看到这里选择不多，欢迎任何建议）。

我们还不能决定要使用的 VCS，虽然我们所有人都使用过很多 SVN，但我们中只有 2 人使用过 TFS 版本控制，我们不太喜欢它，特别是必须签出以进行编辑和获取即使我们中的一个人不更改文件也会发生冲突。Git 和 mercurial 我们只是玩了一下。

谁能提供一些关于这些之间的主要优势是什么的见解，并帮助我们选择？

*   我们想要一个简单的合并过程（tfs 似乎在这里丢失了）。
*   这可以很容易地（如果可能的话）与我们正在使用的 IDE 一起使用（据我们所知，两者都支持 tfs 和 svn，不确定其他）。
*   易于标记和分支。
*   易于维护的中央存储库（因为 git 和 mercurial 是分布式的）
*   成本不是问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:14:14.350

口味问题。就这么简单。

Git、Hg 和 Bzr 几乎等同于 95% 的功能，并且可能是大多数用户想要的大多数功能。尽管如此，它们仍然使用不同的语义进行分支。

所有 DVCS 都优于合并。

Git 工具支持——在我看来——在 Windows 上非常逊色，但在所有其他系统上与其他两个相当。

中央存储库是所有这些的约定，不是必须的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:38:36.223

使用 TFS 11，已经在测试版中作为“上线”（意味着您可以在生产中使用它）您拥有一种称为“本地工作区”的新型工作区，我认为您会喜欢它。

您无需签出即可编辑文件，在后台监控更改（无论是来自 VS 还是其他软件或 shell），然后您在签入时“协调”事情。另一个好处是你不需要连接到 TFS 服务器来贡献，在这种情况下不再存在可怕的在线/离线模式。

对于您提到的合并“问题”，请丢弃 Visual Studio 使用的合并工具并使用 KDiff3 或 Beyond Compare，使用三向合并设置它们将为您带来最佳结果。一旦您了解了基本技巧，与 TFS 的合并过程就是最好的方法之一。Visual Studio 11 还有一个全新的 comp/diff 工具，值得一试。

DVCS 最适合开源项目，因为它使您能够根据需要创建分支。我真的不同意之前关于合并更好的评论。合并总是很痛苦的，一定要在可以受益于三路合并（减少冲突的最有效方法）的场景中。

或许你可以试试 TFSPreview.com 平台，真的很棒。

# c# - Visual Studio 2010 Winforms 总是忘记资源

> ID：10236808
> 
> 赞同：12
> 
> 时间：2012-04-19T21:09:31.007
> 
> 标签：c#, .net, winforms, icons, embedded-resource

出于某种原因，在我当前的项目中，我通过项目属性创建了我的资源文件，添加了大量现有图像。然后将这些图像添加到菜单项，保存。此时一切看起来都很好，并且图像都正确映射。

但是，一旦我关闭了该表单的设计器，然后打开它，我会收到错误对话框：

`The type 'My.Project.Properties.Resources' has no property named 'icon_plus'.`

烦人的事情是，如果您按照代码进行操作，则没有错误，则可以正常编译：

```
this.newToolStripMenuItem.Image = global::My.Project.Properties.Resources.icon_plus; 
```

我尝试删除所有资源并从项目中删除资源文件，完全关闭 IDE 然后重新加载它。我已经移动了文件的位置，但我只是没有想法，它真的开始使用大约 10 个表单和控件，每个表单和控件都会给我这个错误，它们会从 UI 中删除图标。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-19T21:26:05.770

查看项目引用，并删除对 self 的引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T10:09:56.907

这是那些非常烦人的问题之一，在我遇到另一个导致我改变事情的问题之前，我永远不会想到这个问题。

似乎*是*应用程序使用了 .net 4 的客户端配置文件，而不仅仅是默认的 .net 4 运行时。一旦我改变了这个问题，这个问题就停止了，我最近出现的另一个丢失的命名空间问题就消失了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T05:51:32.853

这对我有用。（尝试了所有发布的内容，但没有任何乐趣。）

当我第一次启动项目`namespace`时，项目属性中指定的默认值是`MyProject`. （所以我的大部分课看起来像`namespace` `MyProject{ public class foo{} }`

后来我将我的类的命名空间从 更改`MyProject`为`CompanyName.MyProject` 这也是问题发生的时候。

就我而言，我不得不返回`Project Properties`并将实际条目更改`Default namespace`为`CompanyName.MyProject`

砰，没问题了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T05:48:50.393

它最有可能与命名空间冲突有关。

仔细检查项目中的所有命名空间，VS 喜欢做“ProjectName.FolderName”。如果它自动将 Icon 文件夹中的一个类/资源文件更改为 ProjectName.Icon，它可能与类/结构名称冲突。

有趣的是应用程序构建..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T17:08:41.840

我遇到了同样的问题。VS 不会加载任何表单对象。我尝试了所有其他方法，但没有结果。

以前我将所有 Private 全局变量更改为 Public 属性。

```
public Textbox exampleTextBox { get; set; } 
```

我这样做有多种原因，但设计者视图不喜欢它。我相信它一定有一些解析问题。

该对象必须是全局变量而不是属性。

```
public Textbox exampleTextBox; 
```

这固定了我的设计师观点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-27T10:27:52.087

**我找到了另一种方法**

在私有方法中移动初始化表单代码，如下所示

```
private void FormInitialize(){/*Your code here*/} 
```

在表单构造函数中像这样使用它

```
public Form1()
    {
        InitializeComponent();
        FormInitialize();
    } 
```

从 Button、menuItem 或其他像这样的调用方法

```
 private void ChangeCultureToFrench_Click(object sender, EventArgs e)
    {
        Thread.CurrentThread.CurrentUICulture = new CultureInfo("fr");
        this.Controls.Clear();
        this.InitializeComponent();
        FormInitialize();
    } 
```

我希望这会有所帮助；-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T07:51:05.850

我以前遇到过这个错误。当我添加一个资源，然后把它拿走或修改它时，它就出现了。我发现我可以解决这个问题的唯一方法是打开 .csproj 文件并查找它给出错误的 .ico 并将其删除。你在寻找

```
<ItemGroup>
    <None Include="Resources\SomeResource.ico" />
</ItemGroup> 
```

在此之后，保存文件。打开解决方案并重新添加。希望这对你有用。但是请注意，这不是理想的解决方案。

*编辑：*

好的。所以这并没有解决你的问题。进入解决方案文件夹并导航到“属性”文件夹。在里面你会看到一个叫做resources的文件。打开它并尝试找到有问题的文件名

```
<data name="YourNamedIco" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\SomeResource.ico;System.Drawing.Bitmap, System.Drawing, Version=4.0.0.0, 
         Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value> 
</data> 
```

如果你找到它，删除它，保存。

我希望这有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-07T05:24:40.913

我和你有同样的问题，尽管我使用的“解决方案”甚至可能不会被这样称呼。我确实知道我向其中添加了一些设置项目，然后将其删除，同时摆弄了一些图像的构建操作。

我使用的解决方案？删除当前项目，并恢复到最近的备份，没有问题。当然，这仅在您对项目解决方案进行备份时才有效。

如果您确实对项目解决方案进行了备份，请仅将此方法作为最后的手段。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-03T14:14:16.467

我尝试了所有其他答案，但都没有奏效。

最终似乎对我有用的是通过右键单击您的项目然后“重新加载项目”来执行“卸载项目”。在检查我是否`.cs [Design]`工作之前，我还通过右键单击解决方案资源管理器中的项目然后单击“重命名”将我的项目重命名为其他内容。

不要问我为什么会这样...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-17T03:51:00.953

打开 Resources.resx 文件并添加新图像，然后构建您的解决方案/项目。错误会消失。

# asp.net-mvc - Asp.net mvc实体框架4.1节省子模型codefirst

> ID：10236810
> 
> 赞同：0
> 
> 时间：2012-04-19T21:09:43.960
> 
> 标签：asp.net-mvc, entity-framework-4.1

好的，我有模型

```
 public long prop1 { get; set; }   

    [Required] 
    public string prop2 { get; set; }

    [Required]    
    public string prop3 { get; set; }      

    [Required]  
    public string prop4 { get; set; } 
```

该表是首先从代码生成的数据库的一部分。

现在要求出现一个只有prop3的表单，提交后它将在prop1的基础上更新。我将如何使它在创建模型和 dbcontext 方面发挥作用？这里的通常做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:13:21.133

我不是 100% 确定你在这里问什么。但是，如果您的意思是您需要能够插入一个只有 prop3 的实体，那么您必须更改您的数据模型以使 prop2 和 prop4 不再是必需的。

# php - INSERT IGNORE INTO - 但原因是哪一列？

> ID：10236813
> 
> 赞同：2
> 
> 时间：2012-04-19T21:09:49.917
> 
> 标签：php, mysql, sql

'INSERT IGNORE INTO'，我将如何获得导致忽略的列（设置为 'unique'/'primary' 的列）？

使用示例，我将用户插入表中，如果用户名或电子邮件已插入，它将不会插入 - 我想知道它是已插入的电子邮件或用户名（或两者），因此我可以打印错误消息通过javascript显示屏幕。

因为，你可能会建议我事先使用 SELECT。但是，通过这样做，我必须运行 2 个额外的查询 - 我试图使脚本尽可能干净/快速。

我知道 mysql_affected_rows() 可以告诉我它是否已插入，但它不会返回证明它不这样做的列。

我想我可以使用 mysql_error 什么的？我不确定，因为 mysql_error 只显示错误 - 因为我使用 'IGNORE' 它不会缓冲错误。

* * *

如果我解析 mysql_error 或其他东西，@mysql_query('INSERT INTO ...') 会起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:14:42.760

查询后，您可以执行`SHOW WARNINGS`以查看有关重复键的信息。

您可以在此问题的答案中找到处理 MySQL 警告的 PHP 代码示例：[我可以使用 PHP 检测和处理 MySQL 警告吗？](https://stackoverflow.com/questions/47589/can-i-detect-and-handle-mysql-warnings-with-php)

# java - 对象引用设置为 null 后会发生什么

> ID：10236814
> 
> 赞同：2
> 
> 时间：2012-04-19T21:09:52.600
> 
> 标签：java, reference, garbage-collection

我知道对象引用或对象句柄本身具有大小，并且大小取决于 JVM。我只是想知道它被明确设置为空后会发生什么。假设我们有一个变量`Object o = new Object()`，然后我们设置`o = null`. 会被垃圾回收吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:15:00.953

在您的示例中：

```
Object o = new Object()
o = null; 
```

假设`o`是一个字段或一个局部变量/参数。在前一种情况下，它在其他（外部）对象中占用 4/8 个字节。当外部对象被垃圾收集时，这些字节将被垃圾收集。

如果`o`是参数/局部变量，则不需要垃圾收集，JVM 将“回收”堆栈并简单地重用/擦除该空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T22:22:29.030

引用不是对象，它们不受 GC 的影响，除了包含它们的对象。它们存在于词法作用域中，并且具有相同的生命周期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T23:33:16.967

当存在任何类型的引用时，不会对任何对象进行垃圾收集。如果指向一个对象的所有引用都设置为 null 或指向其他对象，则该对象可能会被垃圾回收，但它将不再是“这些引用所引用的对象”。

请注意，Java 有一个名为 的类`WeakReference`，该类旨在保存对对象的引用，而不会阻止它被垃圾收集。如果当系统执行垃圾收集时，存在任何作为 a 的目标的对象`WeakReference`，但*否则*有资格进行垃圾收集，则系统将使`WeakReference`. 那时，如果`WeakReference`在它失效之前没有人询问它的目标，那么将不再有对该对象的任何引用，因此它将有资格被收集。

# python - Parse.com 用户登录 - 404 错误

> ID：10236817
> 
> 赞同：0
> 
> 时间：2012-04-19T21:10:01.700
> 
> 标签：python, parse-platform

我对用户身份验证相当缺乏经验，尤其是通过 restful api。我正在尝试使用 python 以在 parse.com 中设置的用户身份登录。以下是我的代码：

```
 API_LOGIN_ROOT = 'https://api.parse.com/1/login'
  params = {'username':username,'password':password}
  encodedParams = urllib.urlencode(params)

  url = API_LOGIN_ROOT + "?" + encodedParams

  request = urllib2.Request(url)

  request.add_header('Content-type', 'application/x-www-form-urlencoded')

  # we could use urllib2's authentication system, but it seems like overkill for this
  auth_header =  "Basic %s" % base64.b64encode('%s:%s' % (APPLICATION_ID, MASTER_KEY))
  request.add_header('Authorization', auth_header)
  request.add_header('X-Parse-Application-Id', APPLICATION_ID)
  request.add_header('X-Parse-REST-API-Key', MASTER_KEY)

  request.get_method = lambda: http_verb

  # TODO: add error handling for server response
  response = urllib2.urlopen(request)
  #response_body = response.read()
  #response_dict = json.loads(response_body) 
```

这是对用于访问 parse rest 接口的开源库的修改。

我收到以下错误：

```
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/_webapp25.py", line 703, in __call__
    handler.post(*groups)
  File "/Users/nazbot/src/PantryPal_AppEngine/fridgepal.py", line 464, in post
    url = user.login()
  File "/Users/nazbot/src/PantryPal_AppEngine/fridgepal.py", line 313, in login
    url = self._executeCall(self.username, self.password, 'GET', data)
  File "/Users/nazbot/src/PantryPal_AppEngine/fridgepal.py", line 292, in _executeCall
    response = urllib2.urlopen(request)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 400, in open
    response = meth(req, response)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 404: Not Found 
```

有人可以指出我在哪里搞砸了吗？我不太清楚为什么我得到 404 而不是访问被拒绝或其他问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:13:59.677

确保在 Parse.com 上创建了“用户”类作为特殊用户类。添加类时，请确保将类类型更改为“用户”而不是“自定义”。一个小的用户头像图标将显示在左侧的类名旁边。

这让我困惑了很长时间，直到 Parse 团队的 Matt 向我展示了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:18:42.560

请将：更改`API_LOGIN_ROOT = 'https://api.parse.com/1/login'`为以下内容：`API_LOGIN_ROOT = 'https://api.parse.com/1/login**/**'`

我在使用时遇到了同样的问题，在最后`PHP`添加了*404*错误。`/`

# c# - 在 MVC 类上创建主键字段

> ID：10236819
> 
> 赞同：16
> 
> 时间：2012-04-19T21:10:07.220
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我是 MVC 和 C# 的新手。我只是偶然发现它，发现它很有趣。我遇到了一个不允许我继续的问题。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc; 

namespace MyHotel.Models
{
    public class AccountTypes
    {
        public int AccountTypeID { get; set; }
        public string AccountTypeName { get; set; }
    }
} 
```

之后我创建了控制器和视图。

为此，我不断收到此错误：

在模型生成期间检测到一个或多个验证错误：

```
System.Data.Edm.EdmEntityType: : EntityType 'AccountTypes' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet "AccountTypes" is based on type "AccountTypes" that has no keys defined. 
```

我在谷歌上搜索到答案是添加 `[Key]`的，`public int AccountTypeID { get; set; }`所以它看起来像这样：

```
namespace MyHotel.Models
{
    public class AccountTypes
    {
        [Key]
        public int AccountTypeID { get; set; }
        public string AccountTypeName { get; set; }
    }
} 
```

但直到现在都没有结果。注意：我使用的是 MVC 4

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-19T21:13:19.340

### 描述

默认情况下，实体框架 CodeFirst 按名称识别键。有效名称是`Id`或`<YourClassName>Id`。

您的财产应命名`Id`或`AccountTypesId`

另一种方法是使用`ModelBuilder`来指定密钥。

### 样本

```
public class MyDbContext : DbContext
{
    public DbSet<AccountTypes> AccountTypes { get; set; }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity<AccountTypes>.HasKey(x => x.AccountTypeID);
        base.OnModelCreating(modelBuilder);
    }
} 
```

### 模式信息

*   [实体框架代码优先教程](http://blogs.msdn.com/b/aspnetue/archive/2011/05/04/entity-framework-code-first-tutorial-supplement-what-is-going-on-in-a-fluent-api-call.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:17:04.830

尝试使用 [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)] 属性来指示关键字段。

常规字段将与 EntityKeyPropert=false 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-13T19:49:12.353

```
 public class MyDbContext : DbContext
 {
  public DbSet<AccountTypes> AccountTypes { get; set; } 

    protected override void OnModelCreating(ModelBuilder modelBuilder)
   {
    modelBuilder.Entity<AccountTypes>().HasKey(x => x.AccountTypeID);
    base.OnModelCreating(modelBuilder);
   }
   } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-12-27T13:52:24.067

嗨，彼得，它看到你缺少一个“s”

您的 Account int 应该是：

公共 int AccountsTypeID { 获取；放; }

希望可以解决；费尔南多。

# php - 留在内存中的 PHP 对象

> ID：10236823
> 
> 赞同：9
> 
> 时间：2012-04-19T21:10:41.200
> 
> 标签：php

我记得在[php.net](http://php.net)上阅读过（尽管不幸的是似乎找不到该页面），PHP 解释器可以以不同的方式运行 - 最常见的是，每次请求页面时，都会创建 PHP 解释器的一个实例，运行它当然，然后与与该特定页面调用相关的所有内存一起被销毁。显然，也可以让所有内存留存下来，以便在以后的页面调用中再次使用它；据我了解，本质上允许多个不同的 PHP 脚本访问和修改相同的对象，而不会在脚本完成后丢失它们。

或者至少，我记得。有没有道理呢？如果是这样，我将如何设置它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T21:13:39.137

php 不能那样工作。它关于运行和忘记。

您可以使用用户级共享内存扩展在请求之间保存数据，例如：apc、xcache、memcached 等。

或在调用 session_start 后使用会话数据数组

> $_SESSION

不要把 php 脚本想成像 tomcat 中的 java 应用程序。标准 php 不是为该用例设计的。php 编译器即时工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:15:56.843

您可以将[共享内存](http://www.php.net/manual/en/shmop.examples-basic.php)用于您想要的一些东西，但 Redis/Memcache 可能是更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:15:41.630

让服务器停留在请求之间，对象也会这样做：

*   [appserver-in-php](https://github.com/indeyets/appserver-in-php) - PHP5.3+ 的通用 HTTP 应用程序方法（受 Rack 和 WSGI 启发）

使用编写良好的应用程序可以为您提供比 APC 更快的速度，但是如果您需要放置多个盒子（您仍然可以使用粘性会话），它不会在用户之间扩展。

# c# - WebBrowser 组件未显示 CSS 3

> ID：10236829
> 
> 赞同：10
> 
> 时间：2012-04-19T21:10:56.257
> 
> 标签：c#, css, webbrowser-control

我正在构建一个需要 WebBrowser 组件的软件。不幸的是，它不会正确显示我的页面。

我的内容使用这种 CSS 样式：

```
.content_mid{
background-image:url(http://img.awesome-o.net/Content_Mid.png);
background-size: 100% 100%;
vertical-align:text-top;
padding-left: 40px;
padding-right:20px;
min-height:400px; 
} 
```

由于我已经发现 WebBrowser 组件使用了已安装的互联网浏览器版本，因此我在 Internet Explorer 上检查了 html，它显示完美。

在这里，您可以看到它在 IE 上显示的内容：

[![在此处输入图像描述](../Images/4e5c1646de514d91d83775315082a3b7.png)](https://i.stack.imgur.com/rMrue.jpg)

以下是它在 webbrowser 组件上的显示方式：

[![在此处输入图像描述](../Images/bea1d11a4408240545d21516e97af180.png)](https://i.stack.imgur.com/gADsG.jpg)

所以，我检查了浏览器版本：

```
Debug.WriteLine("WebBrowser version: " + webBrowser1.Version);
output: WebBrowser version: 9.0.8112.16443 
```

所以我想应该没问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-19T22:40:22.483

[本页](http://msdn.microsoft.com/en-us/library/ee330730%28v=vs.85%29.aspx)描述了如何强制浏览器控件使用特定的渲染模式。

你也可以试试这个*文档类型*：

```
<!DOCTYPE html> 
```

和/或 head 元素中的这个 meta 元素：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-23T14:09:25.650

只是为了进一步参考需要这个的其他人：

首先：感谢[Boo](https://stackoverflow.com/users/74015/boo)和[Lex Li](https://stackoverflow.com/users/11182/lex-li) 帮助我找到问题的答案。

您必须将某个注册表设置为正确的值：

> 32 位和 64 位应用程序有两组不同的密钥。

32位：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION

Value Key: yourapplication.exe 
```

64位：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION

Value Key: yourapplication.exe 
```

将此键设置为的值（此处取自 MSDN）为十进制值：

```
9999 (0x270F)
Internet Explorer 9\. Webpages are displayed in IE9 Standards mode, regardless of the  !DOCTYPE directive.

 9000 (0x2328)
 Internet Explorer 9\. Webpages containing standards-based !DOCTYPE directives are displayed in IE9 mode.

8888 (0x22B8)
Webpages are displayed in IE8 Standards mode, regardless of the !DOCTYPE directive.

8000 (0x1F40)
Webpages containing standards-based !DOCTYPE directives are displayed in IE8 mode.

7000 (0x1B58)
Webpages containing standards-based !DOCTYPE directives are displayed in IE7 Standards mode. 
```

即使是强硬的 MSDN 也声称 9000 是自动分配的值。显然，这根本不是真的。

您可以在下面找到如何将这些密钥添加到注册表的代码。请注意，您的应用程序在调试时具有不同的进程名称。

```
RegistryKey key = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION", true);
        if (key != null)
        {
            key.SetValue("YourApplicationName.exe", 9000, RegistryValueKind.DWord);
        }

        key = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION", true);
        if (key != null)
        {
            key.SetValue("YourApplicationName.exe", 9000, RegistryValueKind.DWord);
        } 
```

所以谢谢大家，祝你好运

编辑：应该关闭用户帐户控制以使此代码正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-07T16:18:59.727

我有同样的问题，我改变了这一行：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

到

```
<meta http-equiv="X-UA-Compatible" content="IE=11" /> 
```

到最新的 IE 版本，它工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T14:32:36.163

您还可以向名为 X-UA-Compatible 的 IIS 应用程序添加响应标头，其值为 IE=Edge。我倾向于将它添加到我的 web.config

# selenium - 在 SoapUI 中调用 Selenium？

> ID：10236834
> 
> 赞同：3
> 
> 时间：2012-04-19T21:11:10.887
> 
> 标签：selenium, soapui

我的任务是测试一些 Web 服务。我之前一直在使用 SOAPUI 来测试 Web 服务，也使用 SELENIUM 来进行一些 WebUI 测试。我目前的任务涉及测试一些 oauth 服务。基本上我需要能够通过使用 SELENIUM 的 oauth 身份验证并存储生成的访问令牌并将其传递给我的 SOAPUI 测试以测试服务。我已经阅读了很多关于将 selenium 与 SOAPUI 集成的博客，但我还没有看到和指导向您展示如何做到这一点。我正在使用带有 SOAPUI 4.0.1 的 MacbookPro 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-19T08:30:20.640

我可以在 SOAP Groovy 脚本中调用 Webdriver 实例并使用 UI 断言断言 API 遵循以下步骤

Step1 : 进入 SoapUI 安装目录 bin/ext 并删除 selenium 独立服务器 jar 文件（此路径中的所有 jar 将加载到您的路径中，您可以在此位置添加任何 jar 文件并在 Groovy 脚本步骤中调用它们）

C:程序文件/SmartBearSoapUI-Pro-4.6.4/bin/ext

Jar 文件名：selenium-server-standalone-2.40.0

第 2 步：在 SOAP UI 中创建一个新项目

第 3 步：添加新的 Groovy 脚本步骤

第 4 步：在 Groovy Step 中使用以下脚本创建您的 selenium 驱动程序（Groovy 是基于 Java 构建的，因此所有 JAVA 库和代码都可以这样工作）

```
import org.openqa.selenium.WebDriver 
import org.openqa.selenium.firefox.FirefoxDriver

    WebDriver driver = new FirefoxDriver(); 
    driver.get("http://www.google.com ") 
    log.info("Pagee is: " + driver.getTitle()) 
    driver.quit() 
```

第 5 步：运行您的脚本

*   您可能必须第一次重新启动您的 soapui 会话。

如果您想验证 JAVA Webdriver 代码中的 API，我建议您使用 REST 保证 API

[https://code.google.com/p/rest-assured/](https://code.google.com/p/rest-assured/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T17:32:11.990

第一步，您需要下载最新版本`selenium-server-standalone-*.jar`并将其放入`$SOAPUI_HOME/bin/ext`；重新启动 SoapUI。

接下来，您需要在[Groovy Step中将 Selenium 脚本编写为](http://www.soapui.org/Functional-Testing/working-with-scripts.html)[Groovy 脚本](http://groovy.codehaus.org/Scripts+and+Classes)：无类声明。所以像：

```
def chromeDriverBinary = new File("selenium/bin/windows/googlechrome/32bit/chromedriver.exe")
assert chromeDriverBinary.canExecute()
System.setProperty("webdriver.chrome.driver", chromeDriverBinary.canonicalPath)

def driver = new ChromeDriver()
driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS)
driver.get("http://www.website.test") 
```

这个问题仍然没有公认的答案，所以我想我会发布我自己的尝试，在博客文章中描述： http: [//siking.wordpress.com/2011/08/22/groovy-selenium-webdriver-and-soapui-第 3 部分/](http://siking.wordpress.com/2011/08/22/groovy-selenium-webdriver-and-soapui-part-3/) 也许它对某人有用？

# sql - 无法安装 SQL Server

> ID：10236836
> 
> 赞同：-1
> 
> 时间：2012-04-19T21:11:15.163
> 
> 标签：sql, windows

我正在尝试在 Windows 7 上安装 SQL Server 2008。

但这给了我错误

> 在创建窗口句柄之前，不能对控件调用 Invoke 或 BeginInvoke。

请在这方面帮助我。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:15:40.663

根据这个链接，如果你只是重新运行你会没事的。你试过吗？ [MSDN 关于 Invoke 或 Begin Invoke 的博客](http://blogs.msdn.com/b/petersad/archive/2009/08/14/invoke-or-begininvoke-cannot-be-called-on-a-control-until-the-window-handle-has-been-created.aspx)

同样，根据链接，这是由于 Windows 7 的 .NET 框架中的更新。

该链接还表明该修复程序是在 R2 中发布的，您是否尝试过更新？

# windows - windows批量重命名

> ID：10236843
> 
> 赞同：0
> 
> 时间：2012-04-19T21:11:46.067
> 
> 标签：windows, batch-file, rename

我已经在高处和低处搜索了一种在 Windows 中批量重命名文件的方法。只要它有效，我并不特别担心它使用什么语言。我们在工作中使用扫描仪扫描发票，我们在扫描仪上输入发票编号并将文件保存为 PDF。

问题是它们被保存为 yyyymmddhhmmss_invoicenumber.pdf

我们将这些导入到一个访问程序中，该程序使用基于文件名的发票，但不识别文件名上的日期/时间戳。所以每天我们必须检查大约 80 张发票并重命名它们以删除发票编号之前的所有内容。

我找到的每个脚本都添加了文件名的日期时间，但我想删除它。我只做过一点 PHP 和 HTML，但我需要一些可以在 Windows 上工作的东西。

有什么人可以建议的吗？理想情况下，我希望它是一个批处理脚本或一个按钮，我可以单击它来自动执行此过程。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:29:31.560

只要文件名是 yymmddxxx_invoicenumber.pdf 那么这个批处理脚本就可以工作

```
@echo off
for /f "delims=_ tokens=1,2" %%a in ('dir /b *_*.pdf') do @echo ren %%a_%%b  %%b 
```

（删除回声让它实际重命名文件）

（如果从命令行运行，则删除 %%a 到 %a）

如果要指定年份类型（或 mm 或 dd），则将内部命令修改为 `('dir /b yy*_*.pdf') or` ('dir /b ??mm*_*.pdf')，保留 echo 以使其在首次运行时不会破坏

在上面用实际值替换 yy 或 mm 或 dd。

快乐批处理

# java - 使用 Future 的 App 引擎上的异步 urlfetch Http 帖子

> ID：10236847
> 
> 赞同：0
> 
> 时间：2012-04-19T21:12:07.537
> 
> 标签：java, google-app-engine, asynchronous, concurrency, httprequest

我的目标是从 appengine(java) 快速向服务器发布帖子。我正在尝试使用 UrlFetchService.fetchAsync 来执行此操作。[在这篇博](http://ikaisays.com/2010/06/)文之后，我一直基于我的代码。我已经能够使用下面的代码发出请求，但是我得到了一些奇怪的行为：

```
private void futureRequests() {
    URLFetchService fetcher = URLFetchServiceFactory.getURLFetchService();
    URL url = new URL("https://someserver.com");

    FetchOptions fetchOptions = FetchOptions.Builder.withDefaults();
    fetchOptions.doNotValidateCertificate();
    fetchOptions.setDeadline(60D);

    ArrayList<Future<HTTPResponse>> asyncResponses = new ArrayList<Future<HTTPResponse>>();

    for (int i = 0; i < postDatas.size(); i++) {

        HTTPRequest request = new HTTPRequest(url, HTTPMethod.POST, fetchOptions);
        request.setPayload(postDatas.get(i).getBytes(UTF8));
        HTTPHeader header = new HTTPHeader("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
        request.setHeader(header);
        header = new HTTPHeader("Content-Length", Integer.toString(postDatas.get(i).getBytes().length));
        request.setHeader(header);
        header = new HTTPHeader("Authorization", "auth=" + authToken);
        request.setHeader(header);
        Future<HTTPResponse> responseFuture = fetcher.fetchAsync(request);
        asyncResponses.add(responseFuture);
    }

    for (Future<HTTPResponse> future : asyncResponses) {
        HTTPResponse response;
        try {
            response = future.get();
            int responseCode = response.getResponseCode();
            resp.getWriter().println("response: " + responseCode);
            logger.warning("Response: " + responseCode);

        } catch (Exception e) {
        }
    }
} 
```

奇怪的行为是我在服务器上收到重复的帖子，根据我的 appstats 页面，我使用的 urlFetches 比上面代码添加的多 10 到 20 倍。下面是我的 appstats 屏幕：

![应用统计屏幕截图](../Images/981866b39b8d559ff53190ae96cafe1a.png)

还有更多 urlFetch 调用无法显示在屏幕上。看起来请求仍在以同步方式完成（带圆圈的项目），但似乎有许多 urlFetches 似乎同时进行。我的问题是，当我只有 14 个 Future 时，我如何获得对 urlFetch 的所有这些调用？服务器是否会给出错误或 503 和 urlFetch 重试直到它通过？我怎样才能为每个请求获得 2 个帖子？

我知道我可以使用任务队列来执行异步请求，但是我处理的请求数量相对较少（20-100），并且启动另一个实例的冷启动时间可能会使这对我来说不是一个好选择情况。任何人都可以解释这种行为或对此有经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T01:56:28.387

这只是我的代码中的一个错误，导致我的应用程序发出比我想象的更多的请求。

# math - 是两个角之间的角

> ID：10236848
> 
> 赞同：1
> 
> 时间：2012-04-19T21:12:08.920
> 
> 标签：math

我有 3 个角 abc

a=315 b=20 c=45

好的，所以想知道如果 b 介于 a 和 c 之间，则给出所有三个

我有很长的路要走，这似乎可行。我只想得到更小，也许更有效的东西。

谢谢

编辑

这是我想说的一张照片。

![在此处输入图像描述](../Images/7a9df69baf8730fbd77e40f8a4bef3c7.png)

好的，我有角度 L（当前为 0），我加 45（或任何角度）并减去 45（或任何角度）得到 a 和 b（我的视角）。

现在我需要知道绿点是否在 a 和 b 之间

(g> a || g > 0) && (g < b)

所以在这张照片中，只有顶部的绿点是真的..

对不起，如果我没有明确我的第一语言不是英语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:39:20.137

我有一个类似的问题。我知道了。所有的计算都以度为单位。我需要计算 id 一个 gps 位置在一个矩形内。

或者，我需要查看一个角度`x`是否介于 angle`check+r`和 angle之间`check-r`。

`check-r<x<check+r`.

如果需要`a<x<b`，求和`check`中间的角度`a`，`b`然后求from或的距离（ `r`）。`check``a``b`

该方法归一化，将角度从 -infinity...infinity 更改为 -180...180。方法 check 接受参数 `x`：我们需要查看的角度是否在角度 check-r 和 check+r 之间。 `check`：要检查的角度。 `r`：角度检查的半径。

```
private static double normalize(double x) {
        x = x % 360;
        if (x>=180) {
            return x-360;
        }
        if (x<-180) {
            return x+360;
        }
        return x;
}
public static boolean check(double x, double check, double r) {
        x = x - check;
        x = normalize(x);
        return x<r && x>-r;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-23T19:35:27.333

第一^关，每个角度都在其他两个角度之间，你真正要问的是：

# 对于给定的角度：*a*、*b*和*g*，*g是否在**a*和*b*之间的反射角之外？

您可以继续将*a*定义为最左边的角度，将*b*定义为最右边的角度，或者您可以解决这个问题，例如，如果这些陈述中的任何一个为真，则*a*是您的最左边的角度：

1.  *a ≤ b ∧ b - a ≤ π*
2.  *a > b ∧ a - b ≥ π*

为简单起见，假设你最左边的角度是*l*，你最右边的角度是*r*，你试图找出*g*是否在它们之间。

这里的问题是看起来。我们正在寻找基本上 3 个积极的案例：

1.  *l ≤ g ≤ r*
2.  *l ≤ g ∧ r < l*
3.  *g ≤ r ∧ r < l*

如果您只是将 a 定义*为*最左侧，将*b*定义为最右侧，那么您就完成了，您的情况将如下所示：

```
a <= g && g <= b ||
a <= g && b < a ||
g <= b && b < a 
```

但是，如果您计算了*l*和*r*，您会注意到这里有一个优化机会，可以同时执行这两个过程。您的函数将如下所示：

```
if(a <= b) {
    if(b - a <= PI) {
        return a <= g && g <= b;
    } else {
        return b <= g || g <= a;
    }
} else {
    if(a - b <= PI) {
        return b <= g && g <= a;
    } else {
        return a <= g || g <= b;
    }
} 
```

或者，如果您需要它，您可以扩展到这种噩梦般的情况：

```
a <= b ?
(b - a <= PI && a <= g && g <= b) || (b - a > PI && (b <= g || g <= a)) :
(a - b <= PI && b <= g && g <= a) || (a - b > PI && (a <= g || g <= b)) 
```

请注意，所有这些数学都假定您的输入是弧度并且在 [0 : 2π] 范围内。

[`Live Example`](http://ideone.com/iwbMqZ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-01T08:27:51.473

我个人最近遇到了同样的问题，并为所有发布的答案找到了反例，所以我将分享我自己的方法。
设`a`开始角度和`b`结束角度，我们正在检查`c`它们之间是否是顺时针方向，这意味着当你从`a`到时，`b`你必须通过`c`。检查是否在从到`c`的范围内的方法在大于数字时会给您误报。例如： 这意味着介于和之间。但事实并非如此。 有效的方法是如果大于则减去 360 并从if中减去 360`a``b``b``a``a=80°, b=320° and c=150°: a <= c <= b``c``a``b`
`b``a``c``c`大于`a`。然后检查是否`a <= c <= b`. 在 Java 中：

```
public static boolean isBetween(double c, double a, double b) {
    if (b > a) b -= 360;
    if (c > a) c -= 360;
    return a <= c && c <= b;
} 
```

这假设 a、b 和 c 在 0 到 360 的范围内。
一些示例：

```
isBetween(150, 80, 320) => false
isBetween(30, 80, 320) => true
isBetween(340, 80, 320) => true
isBetween(140, 0, 160) => true
isBetween(180, 0, 160) => false 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T21:24:38.790

假设`a > c`，您实际上会使用：

```
( b < a ) && ( b > c ) 
```

这与检查值是否在下限和上限之间相同。它们是角度没有区别，除非您想考虑这样一个事实，即当您绕圆时，角度 与`405`的角度相同`45`。在这种情况下，您可以只使用来获取和`a % 360`之间的角度。`0``360`

# vbscript - VBScript 确定正在运行的函数

> ID：10236849
> 
> 赞同：1
> 
> 时间：2012-04-19T21:12:09.773
> 
> 标签：vbscript

VBScript 中是否可以确定当前正在执行的函数的名称？

在 .NET 中，您可以执行以下操作：

```
MethodBase method = MethodBase.GetCurrentMethod();
Console.WriteLine(method.Name); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:22:22.850

过去，我构建了一个调用堆栈查看器来查看每个被调用函数的性能。这需要每个函数/子额外的一行 VBS 代码，当然，由于额外的代码，在运行时需要一些开销。

自下而上：

```
Function DoSomething(a, b, c)
    dim registerFunctionObj : Set registerFunctionObj = [new RegisterFunction]("DoSomething")

    ' other code
End Function 
```

每当调用该函数时，它都会创建一个 RegisterFunction 对象的新实例。当函数退出时，`registerFunctionObj`变量自动超出范围，调用实例的 Class_Terminate 子。

`[new RegisterFunction]`只是一个返回 registerFunction 实例的函数：

```
Function [new RegisterFunction](funcName)
    Set [new RegisterFunction] = new cls_RegisterFunction
    [new RegisterFunction].FunctionName = funcName
    Set [new RegisterFunction].CallStackViewer = CallStackViewer
End function

Class cls_RegisterFunction

    Private functionName_, startTime_, callStackViewer_, endTime_
    Private Sub Class_Initialize
        startTime_ = now
        callStackViewer_.LogInitialize me
    End Sub

    Public Property Let FunctionName(fName)
        functionName_ = fName
    End Property

    Public Property Set CallStackViewer(byRef csv)
        Set callStackViewer_ = csv
    End Property

    Private Sub Class_Terminate
        endTime_ = now
        callStackViewer_.LogTerminate me
    End Sub

End Class 
```

CallStackViewer 实例是 CallStackViewer 类的单例实例，但您可以将其作为项目的一部分，因此您可以通过全局项目类检索它：

```
Private PRIV_callStackViewer
Public Function CallStackViewer()
    If not IsObject(PRIV_callStackViewer) Then
        Set PRIV_callStackViewer = new cls_CallStackViewer
    End If
    Set CallStackViewer = PRIV_callStackViewer
End Function

Class cls_CallStackViewer
    Public Sub Class_Initialize
        ' Here you can retrieve all function libraries (as text file) extract the 
        ' function name, the file they are in and the linenumber
        ' Put them in a dictionary or a custom object
    End Sub

    Public Sub LogInitialize(byref registerFunction)
        ' Here you can push the function on a stack (use a standard dotnet list>stack for it),
        ' log the starttime to a log object or handle custom breakpoints
    End Sub

    Public Sub LogTerminate(byref registerFunction)
        ' Here you can pop the function from a stack, log the endtime to a log
        ' object or handle custom breakpoints
    End Sub

End Class 
```

免责声明：此处的代码是动态创建的纯演示代码。它缺乏功能，只是在这里解释这个概念。它可能包含错误并且不完整。

您唯一需要的是每个函数的一行代码和您自己的想象力来扩展它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:05:17.493

不，但您可以轻松实现它

```
dim module_name

sub sub1
  module_name = "sub1"
  wscript.echo "i'm " & module_name
  'do something
end sub

function function1
  module_name = "function1"
  wscript.echo "i'm " & module_name
  function1 = "something"
end function 
```

在递归的情况下，您还可以记住您所处的级别，以便在太深时可以退出。

# javascript - 消息传递：关闭选项卡的后台脚本

> ID：10236853
> 
> 赞同：3
> 
> 时间：2012-04-19T21:12:35.450
> 
> 标签：javascript, google-chrome-extension, message

我是一个 javascript 新手，正在编写我的第一个 Chrome 扩展程序，但我被困在消息传递上。我的扩展包括一个后台脚本、一个浏览器操作图标和一个内容脚本。内容脚本（一个衡量在标签中停留秒数的计时器）需要更新后台脚本并在标签关闭时更改图标，但由于内容脚本无法访问标签`onRemove`事件，因此需要监听消息从后台脚本。

以下是我设置后台脚本侦听器以侦听关闭选项卡的方式：

```
// Listen for closed tabs.
chrome.tabs.onRemoved.addListener(function(tab) {
    send_closed_message();
}); 

function send_closed_message () {
    chrome.tabs.getSelected(null, function(tab) {
        console.log("sending tab_closed to tab " + tab.id);
        chrome.tabs.sendRequest(tab.id, {close: true}, 
                                        function(response) {
            console.log(response.timer_stop); }); 
    });
} 
```

这是内容脚本中侦听此消息的函数。

```
function main () {
    console.log("main()");
    timer = new Timer();
    timer.start();

    // Listen for window focus
    window.addEventListener('focus', function() { timer.start(); } );

    // Listen for window blur
    window.addEventListener('blur', function() { timer.stop(); } );

    // Listen for tab close
    chrome.extension.onRequest.addListener(
    function(request, sender, sendResponse) {
        console.log(sender.tab ? 
                    "from a content script:" + sender.tab.url:
                    "from the extension");

        if (request.close === true) {
           sendResponse({timer_stop: "stopped"});
           timer.stop();
        }
    });
} 
```

我在后台脚本控制台中看不到内容脚本的响应。由于我正在关闭选项卡，因此我无法查看内容脚本控制台。消息哪里出错了？有没有更好的方法来调试这个？当它的标签关闭时，内容脚本还有另一种方式可以监听吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:35:30.157

我相信背景上的 onRemoved 发生在选项卡已经关闭时，因此可能没有足够的时间让上下文接收您的消息并重播到后台脚本。

也许对于上下文来说，每秒使用其计数值将消息发送到后台是一个好主意。当后台收到 onRemoved 事件时，它只是使用最后收到的值作为该页面的实时时间。

# c# - NullReferenceException 无论我在我看来做什么

> ID：10236854
> 
> 赞同：1
> 
> 时间：2012-04-19T21:12:37.713
> 
> 标签：c#, asp.net-mvc-3, view, nullreferenceexception

出于某种原因，我的 ASP.NET MVC3 网页不断向我抛出 NullReferenceExceptions。奇怪的是，我无法确定问题的根源。无论我在我的视图中写什么，据说第一段代码（在本例中是我的 foreach）都会导致此错误。

我的观点是这样的：

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<SkyLearn.Models.StartpageDataViewModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Skylearn - Startside
</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="SideContent" runat="server">
        <%foreach (var category in Model.CurrentUsersCategories)
          {%>
             <div class="homecategory"><div class="homecategoryicon"></div><%: Html.DisplayFor(Title => category.Title)%></div>
        <%}%>       
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <%: ViewBag.Message %>
</asp:Content> 
```

这是视图模型：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Globalization;
using System.Web.Mvc;
using System.Web.Security;
using SkyLearn.Areas.Categories.Models;
using SkyLearn.Areas.Categories.Controllers;

namespace SkyLearn.Models
{
    public class StartpageDataViewModel
    {
        public List<Category> CurrentUsersCategories { get; set; }

        public StartpageDataViewModel()
        { 
           CurrentUsersCategories = new List<Category>();
        }
    }
} 
```

最后是我从 2 个不同的控制器中使用的方法：

这是将数据放入 viewmodel 对象的那个：

```
public ActionResult Index()
        {
            if (Request.IsAuthenticated)
            {
                StartpageDataViewModel model = new StartpageDataViewModel();

                MembershipUser currentuser = Membership.GetUser();
                List<Category> categories = new List<Category>();

                categories = accountcontroller.getCategoriesByRoles((Guid)currentuser.ProviderUserKey);

                foreach (Category category in categories)
                {
                    model.CurrentUsersCategories.Add(category);
                } 

                ViewBag.Message = "Velkommen til Skylearn Video Tutorials " + currentuser.UserName + "!";

                return View(model);
            }
            else 
            {
                ViewBag.Message = "Log venligst ind for at benytte Skylearn Video Tutorials";

                return View();
            }
        } 
```

这是获取一些数据的那个：

```
public List<Category> getCategoriesByRoles(Guid userid)
        {
            List<Category> categoriesbyrole = new List<Category>();

            MembershipUser user = Membership.GetUser(userid);

            string[] roles = Roles.GetRolesForUser(user.UserName);

            List<Category> categories = categorycontroller.getCategories();

            foreach (string role in roles)
            {
                foreach (Category category in categories)
                {
                    if (role == category.Title)
                    {
                        categoriesbyrole.Add(category);
                    }
                }
            }

            return categoriesbyrole;
        } 
```

在我看来，无论我做什么，我都会在 foreach 上得到当前错误：

> System.NullReferenceException 未被用户代码处理
> Message=Object 引用未设置为对象的实例。
> Source=App_Web_nvi5brwn StackTrace: at ASP.views_home_index_aspx.__RenderContent3(HtmlTextWriter __w, Control parameterContainer) in c:\Users\AronChan\Desktop\Dropbox\SkyLearn\Skylearn Website (Aron sikkerhedskopi)\SkyLearn\Views\Home\Index.aspx:line 8 在 System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) 在 System.Web.UI.Control.Render(HtmlTextWriter writer) 在 System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) 在 System.Web .UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) at System.Web.UI.Control.RenderControl(HtmlTextWriter writer) at ASP.views_shared_site_master._*使成为*_control1(HtmlTextWriter __w, Control parameterContainer) 在 c:\Users\AronChan\Desktop\Dropbox\SkyLearn\Skylearn 网站 (Aron sikkerhedskopi)\SkyLearn\Views\Shared\Site.Master：System.Web.UI.Control 的第 34 行。 RenderChildrenInternal(HtmlTextWriter writer, ICollection children) at System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) at System.Web.UI.Control.Render(HtmlTextWriter writer) at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter 适配器）在 System.Web.UI.Control.RenderControl（HtmlTextWriter writer，ControlAdapter 适配器）在 System.Web.UI.Control.RenderControl（HtmlTextWriter writer）在 System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children ) 在 System.Web.UI.Control。RenderChildren(HtmlTextWriter writer) at System.Web.Mvc.ViewPage.Render(HtmlTextWriter writer) at System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) at System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter 适配器）在 System.Web.UI.Control.RenderControl（HtmlTextWriter writer）在 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）System.Web.UI.Page.ProcessRequestMain 的 RenderControl（HtmlTextWriter writer）（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）System.Web.UI.Page.ProcessRequestMain 的 RenderControl（HtmlTextWriter writer）（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）
> 内部异常：

我已经尝试了我能想到的一切。请帮帮我xD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:18:09.713

您的问题可能来自您在 Index 中的 else。在这种情况下，您没有传递模型。因此，`Model`在这种情况下将为空。我会尝试发送一个空的新模型进行测试和验证。

```
else 
        {
            ViewBag.Message = "Log venligst ind for at benytte Skylearn Video Tutorials";

            return View();
        } 
```

# c# - LinkBut ton 没有在 OnClick 中调用 JavaScript 函数？

> ID：10236856
> 
> 赞同：3
> 
> 时间：2012-04-19T21:12:43.317
> 
> 标签：c#, jquery, asp.net

我正在尝试从 asp 链接按钮调用 jquery 函数。这是我的链接按钮html：

```
 <div style="padding-left:75px">
            <asp:LinkButton ID="lbAddCC" runat="server" ClientIDMode="Static" OnClick="ShowCCControls()" Text="Add CC"></asp:LinkButton>
        </div> 
```

这是我的jQuery函数：

```
 function ShowCCControls() {

          $('#lblCC').show();
          $('#txtCC').show();
      } //end ShowCCControls() 
```

当我尝试构建时，我收到错误：

ASP.internal_email_aspx 不包含“ShowCCControls”的定义，并且找不到接受“ASP.internal_email_aspx”类型的第一个参数的扩展方法“ShowCCControls”（您是否缺少 using 指令或程序集引用？）

我使用复选框在另一个页面上工作：

```
 <asp:CheckBox ID="chkNew" TabIndex="8" runat="server" Text="New Tank" OnClick="SetNewTankControls()"
                   ClientIDMode="Static" /> 
```

有人看到问题吗？谢谢

这是所有的javascript：

```
 <script  type="text/javascript" language="javascript">

    //document.ready is used for jquery, waits until the doc is ready to be manipulated
    $(document).ready(function () {

        HideControls();

    });  //end document.ready

    function HideControls() {

        $('#lblCC').hide();
        $('#txtCC').hide();
       $('#lblBCC').hide();
        $('#txtBCC').hide();
    }  //end HideControls()

    function ShowBCCControls() {
        $('#lblBCC').show();
        $('#txtBCC').show();
    } //end ShowBCCControls

    function ShowCCControls() {

        $('#lblCC').show();
        $('#txtCC').show();
    }  //end ShowCCControls() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T21:15:31.643

OnClick 用于在代码隐藏中指定处理程序。如果你想指定一个 javascript 函数，你应该使用 OnClientClick 属性。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.onclientclick(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.onclientclick(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:18:58.257

```
 <div style="padding-left:75px">
        <asp:LinkButton ID="lbAddCC" runat="server" ClientIDMode="Static" OnClientClick="ShowCCControls()" Text="Add CC"></asp:LinkButton>
    </div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T21:21:17.060

您可以像这样在客户端脚本中设置处理程序：

```
 $('#lbAddCC').click(function() {

      $('#lblCC').show();
      $('#txtCC').show();
  }); 
```

由于您不打算使用此单击事件执行服务器端行为，因此无需在服务器控件上定义处理程序，然后在您可以直接调用时让它呈现对客户端函数的调用.

编辑：

您当然需要将客户端脚本与服务器控件上错误的 OnClick 处理程序的删除结合起来，如下所示：

```
<asp:LinkButton ID="lbAddCC" runat="server" ClientIDMode="Static" Text="Add CC"></asp:LinkButton> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T21:16:39.617

可能是页面在加载 jquery 代码之前加载了函数调用，请确保将 jquery 放在链接按钮之前并引用 jquery 库

# python - Python Tkinter 错误，“创建图像太早”

> ID：10236857
> 
> 赞同：19
> 
> 时间：2012-04-19T21:12:44.207
> 
> 标签：python, tkinter

所以我有一个任务，我必须使用 Tkinter 来创建一个棋盘游戏。这只是我想要引入电路板图像的程序的一部分。但我不断收到错误消息，“创建图像太早”，我不确定自己做错了什么。

到目前为止，这是我的代码：

```
from Tkinter import *
from pprint import pprint

# Which variable is currently updating
from variableColors import Variables
VariableIndex = 0               
VariableText = Variables[VariableIndex]

Ids = None             # Current canvas ids of the text and 4 player tokens:
                       # Will be None if not committed

VariableCoords = { }       # Where store variable and coordinates

im = PhotoImage(file="C:\Users\Kiki\Desktop\Assignment\\")
photo = can.create_image(0,0,anchor=NW, image=im)

can.pack()

root.mainloop() 
```

任何帮助，将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-19T21:16:57.203

您忘记声明 root - `root = Tk()`。Tk 系统在使用前必须打开。

# c# - 订阅在 Exchange Server 2010 中创建新邮箱时引发的事件

> ID：10236861
> 
> 赞同：1
> 
> 时间：2012-04-19T21:13:11.607
> 
> 标签：c#, powershell, active-directory, powershell-2.0, exchange-server-2010

使用 PowerShell，可以通过 Register-ObjectEvent、Register-WmiEvent 或 Register-EngineEvent 订阅 .NET、WMI 或引擎事件，这些 cmdlet 中的每一个都有一个 –Action 参数，您可以向该参数传递一个块事件发生时要调用的代码。

我似乎无法弄清楚如何使用上述事件类型之一（.NET、WMI 或引擎事件），我可能能够订阅在 Exchange Server 中创建新邮箱时引发的事件2010。更具体地说，我只是想弄清楚我需要订阅什么事件。沿着这些思路，我希望有人能够为我指明正确的方向，即我可以在哪里找到有关我可以在 Exchange Server 2010 中订阅哪些事件以及引发事件时传递的参数的更多详细信息。

为了在这里提供一些上下文，我有一个基于云的邮件服务，它需要知道给定组织正在使用多少用户。做一些像 AD 同步这样的事情不是一种选择。在服务的初始配置期间，我可以访问 Exchange Server 2010 服务器，此时我将能够在他们的环境中执行 PowerShell 脚本（PowerShell 2.0）。理想情况下，我希望 -Action 参数执行一个代码块，该代码块调用我的 API，通知我已配置新邮箱。

我是一名 .NET 开发人员，但我对使用 Exchange 很陌生，对使用 PowerShell 也很陌生，尤其是在这种情况下。我可以自己编写脚本/代码，但我想弄清楚在我走得太远之前是否可以订阅一个新的邮箱事件。

这里的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:58:37.020

我不知道 Exchange 在任何这些情况下都会引发任何事件。您是否有权访问实际的 Exchange 服务器，或者您只是一个租户？

# javascript - 为父对象创建动态对象并分配键和值？

> ID：10236863
> 
> 赞同：1
> 
> 时间：2012-04-19T21:13:17.627
> 
> 标签：javascript

我几乎可以做到这一点，但似乎无法按计划执行此功能。

我有两个数组：keyArray 和 ValArray；

我想做的是让一个函数传递两个参数（keyArr，valArr）。在这个函数中，声明了一个父对象，并且一个（for-loop）循环通过传递参数的长度（在本例中为“keyArr”）根据传递参数的长度创建新对象。然后，为新创建的对象分配键和值。

问题是我能够创建父对象“mObj”和子对象“mObj”，但只能将键和值分配给第一个子对象“obj0”，而不能正确地分配其余子对象。在代码的末尾，这就是我想要得到的：

```
enter code heremObj.obj0.firstname = John;
mObj.obj0.lastname = superfly;
mObj.obj0.email = "john.superfly@yahoo.com";

mObj.obj1.firstname = John;
mObj.obj1.lastname = superfly;
mObj.obj1.email = "john.superfly@yahoo.com";

mObj.obj2.firstname = John;
mObj.obj2.lastname = superfly;
mObj.obj2.email = "john.superfly@yahoo.com"; 
```

这是我的代码：

```
 var keyArr = ["firstname","lastname","email"];
 var valArr = ["John","Superfly","jsuperfly@yahoo.com"];

 function test(keys,vals)  // FUNCTION TEST ACCEPTS TWO ARGS
 {
    var mObj = {}; // PARENT OBJECT
    var len = (keys.length); //ARGUMENT KEY'S LENGTH

    for(var i=0; i<len; i++) 
    { 
      mObj["obj" + i] = {};  //CHILDREN OBJECTS ARE CREATED TO PARENT "mObj" OBJECT
      mObj["obj" + i][keys[i]] = vals[i]; //KEYS AND VALUES ARE ASSIGNED HERE
    }

       alert(mObj.obj1.firstname); // CURRENTLY RETURNS "UNDEFINED"
 }

 test(keyArr,valArr); 
```

对此的任何见解将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:30:00.540

看起来这就是你需要的。`keyArr`此代码将创建与和`valArr`数组的长度一样多的子对象。虽然不知道你为什么需要它。

```
var keyArr = ["firstname", "lastname", "email"];
var valArr = ["John", "Superfly", "jsuperfly@yahoo.com"];

function test(keys, vals) {
    var mObj = {},
        i, j, len = keys.length;

    for (i = 0; i < len; i++) {
        mObj["obj" + i] = {};
        for (j = 0; j < len; j++) {
            mObj["obj" + i][keys[j]] = vals[j];
        }
    }

    alert(mObj.obj1.firstname);
}

console.log( test(keyArr, valArr) );​ 
```

# sql-server - 带有服务器 8 的 SQL Power Shell...无法启用 TCP/IP 协议

> ID：10236871
> 
> 赞同：0
> 
> 时间：2012-04-19T21:13:49.653
> 
> 标签：sql-server, windows, powershell

创建了一台新的 Server 8 机器。测试 .net + SQL Server 2012 站点。我正在尝试远程连接到机器，但为此我需要启用 TCP/IP 协议。如果我尝试通过计算机管理控制台直观地执行此操作，我会得到一些奇怪的行为，如果我尝试选择任何是/否下拉列表，它只会给我一个空白列表，我无法更改值。我可以通过从配置中的上下文菜单中选择它来启用整个 TCP/IP，但是当我进入属性时，我得到启用 = 所有 IP1、IP2 等区域的否。

然后我尝试使用 SQLPS 更改它......但似乎没有采取......奇怪的是我注意到在属性下没有任何东西......看看并让我知道..

```
PS SQLSERVER> $MachineObject.getsmoobject($tcp.urn.Value + "/IPAddress[@Name='IP2']")

Parent              : Microsoft.SqlServer.Management.Smo.Wmi.ServerProtocol
IPAddressProperties : {Active, Enabled, IpAddress, TcpDynamicPorts...}
IPAddress           : 192.168.0.24
Urn                 : ManagedComputer[@Name='WIN-LLJKBQ6OVVR']/ServerInstance[@Name='MSSQLSERVER']/ServerProtocol[@Name
                      ='Tcp']/IPAddress[@Name='IP2']
Name                : IP2
Properties          : {}
UserData            :
State               : Existing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:18:52.023

在 SQL Server 上启用 TCP/IP 协议时，不仅要启用端口 1433（或其他），还需要确保将侦听器绑定到正确的接口。过去，SQL Server 会绑定到 0.0.0.0，但在最近的版本中，您可以绑定到许多选项之一：127.1、192.168.1.xx、0:0:0:0:0:0:0:1、 ::1 等。

请运行“SQL Server 配置管理器”，查看网络配置，并确保您正确配置了侦听器绑定。您可以在 shell 中使用“netstat -an”来验证它。

此外，请仔细检查您的用户帐户是否已实际启用，并且 SQL Server“混合身份验证”可能已启用。

# c# - C# PostMessage 的必要库是什么？

> ID：10236875
> 
> 赞同：0
> 
> 时间：2012-04-19T21:14:15.563
> 
> 标签：c#, keydown, postmessage

我正在尝试在 C# 中模拟按键，但出现以下错误：

```
Error   2   The name 'WM_KEYDOWN' does not exist in the current context c:\users\frk\documents\visual studio 2010\Projects\HaxBot3\HaxBot3\Form1.cs 28  52  HaxBot3
Error   5   The name 'WM_KEYDOWN' does not exist in the current context c:\users\frk\documents\visual studio 2010\Projects\HaxBot3\HaxBot3\Form1.cs 29  52  HaxBot3
Error   8   The name 'WM_KEYDOWN' does not exist in the current context c:\users\frk\documents\visual studio 2010\Projects\HaxBot3\HaxBot3\Form1.cs 30  52  HaxBot3
Error   9   The name 'VK_RIGHT' does not exist in the current context   c:\users\frk\documents\visual studio 2010\Projects\HaxBot3\HaxBot3\Form1.cs 30  64  HaxBot3
Error   3   The name 'VK_CONTROL' does not exist in the current context c:\users\frk\documents\visual studio 2010\Projects\HaxBot3\HaxBot3\Form1.cs 28  64  HaxBot3
Error   6   The name 'VK_ALT' does not exist in the current context c:\users\frk\documents\visual studio 2010\Projects\HaxBot3\HaxBot3\Form1.cs 29  64  HaxBot3
Error   1   The name 'PostMessage' does not exist in the current context    c:\users\frk\documents\visual studio 2010\Projects\HaxBot3\HaxBot3\Form1.cs 28  17  HaxBot3
Error   4   The name 'PostMessage' does not exist in the current context    c:\users\frk\documents\visual studio 2010\Projects\HaxBot3\HaxBot3\Form1.cs 29  17  HaxBot3
Error   7   The name 'PostMessage' does not exist in the current context    c:\users\frk\documents\visual studio 2010\Projects\HaxBot3\HaxBot3\Form1.cs 30  17  HaxBot3 
```

这是给出错误的代码：

```
public static void Forward()
        {
            Process[] processes = Process.GetProcessesByName("test");

            foreach (Process proc in processes)
            {
                PostMessage(proc.MainWindowHandle, WM_KEYDOWN, VK_CONTROL, 0);
                PostMessage(proc.MainWindowHandle, WM_KEYDOWN, VK_ALT, 0);
                PostMessage(proc.MainWindowHandle, WM_KEYDOWN, VK_RIGHT, 0);
            }
        }//Fprward 
```

我想我必须添加一些东西`using System.(something)`但是什么？感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:22:15.527

你需要自己定义这些。

```
[DllImport("user32.dll")]
public static extern bool PostMessage(IntPtr hWnd, uint msg, uint wParam, IntPtr lParam);

public const uint WM_KEYDOWN = 0x0100;
public const uint VK_RIGHT = 27;
public const uint VK_CONTROL = 11;
public const uint VK_ALT = 12; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:18:43.747

它在 User32.Dll 中。您需要自己指定。[访问此 PInvoke.net 页面以`PostMessage`获取更多信息](http://www.pinvoke.net/default.aspx/user32.postmessage)。

这是一个示例类，假设`Forward()`在 class 中`MyClass`。

```
public static class MyClass
{
  public static void Forward()
  {
     /* snip */
  }

  [return: MarshalAs(UnmanagedType.Bool)]
  [DllImport("user32.dll", SetLastError = true)]
  static extern bool PostMessage(HandleRef hWnd, uint Msg, IntPtr wParam, IntPtr lParam);
} 
```

# android - SimpleDateFormat 只获取时间

> ID：10236876
> 
> 赞同：3
> 
> 时间：2012-04-19T21:14:16.030
> 
> 标签：android, timestamp, date-format, simpledateformat

当我尝试仅从时间戳中获取时间时遇到问题。

时间戳的一个例子是：

2012-04-19T23:05:00+0200

我认为格式是“yyyy-MM-dd'T'HH:mm:ss.SSSZ”对吗？它必须是“HH：mm”。

我使用以下代码，但它什么也不返回：

```
public String getTime(String Vertrektijd){
        final SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
        Date dateObj;
        String newDateStr = null;
        try
        {
            dateObj = df.parse(Vertrektijd);
            SimpleDateFormat fd = new SimpleDateFormat("HH:mm");
            newDateStr = fd.format(dateObj);
        }
        catch (Exception e)
        {
          e.printStackTrace();
        }
        return newDateStr;
    } 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T22:31:57.300

你的代码是正确的...

在示例时间中，您在问题中给出的内容（即“2012-04-19T23:05:00+0200”）缺少 MilliSeconds

尝试通过这个

```
getTime("2012-04-19T23:05:00.235+0200"); 
```

它应该工作。

编辑：正如[MH](https://stackoverflow.com/users/1029225/mh)提到的，如果你不想使用毫秒，你可以将代码更改为

```
final SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:28:24.747

Date 有一个 getHours() 和 getMinutes() 函数，但它已被弃用。正确的方法是使用日历

```
Calendar calendar = Calendar.getInstance();
calendar.setTime( dateObj );
int hours = calendar.get( Calendar.HOUR_OF_DAY );
int minutes = calendar.get( Calendar.MINUTE ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T09:43:33.273

[这里](http://android-dls.com/wiki/index.php?title=Dates_and_times)试图总结 Java 和 Android 提供的与日期、时间和时区有关的所有令人困惑的类。基本上，您使用 GregorianCalendar 对象进行大部分日期/时间操作，可能使用来自 Calendar 超类的方法。要进行特定于区域设置的格式化，您需要 DateFormat。但这只能格式化 Date 对象，因此您需要先将 Calendar/GregorianCalendar 转换为其中一个。正如您已经发现的那样，基本上，SimpleDateFormat 用于进行自定义格式设置。

请注意，有两个不同的类称为“DateFormat”。

# r - 当 x 轴是一个因素时，用 ggplot 添加一条垂直线

> ID：10236882
> 
> 赞同：12
> 
> 时间：2012-04-19T21:14:49.073
> 
> 标签：r, ggplot2

以下代码用于 ggplot2 的 .9 之前的版本。这不再可能了吗？

```
df = data.frame(x = letters[1:26], y=abs(rnorm(26)))
ggplot(df, aes(x=x, y=y)) + geom_bar() + geom_vline(xintercept='m') 
```

我收到以下错误：

> 获取错误（as.character（FUN），模式=“功能”，环境=环境）：找不到模式“功能”的对象“m”

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T21:25:46.147

我不知道（不记得）您的原件是否曾经使用旧版本的 ggplot 但您可以使用另一种方法，例如：

```
ggplot(df, aes(x=x, y=y)) + geom_bar() + geom_vline(xintercept=which(df$x == 'm')) 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-31T18:16:17.370

对于想要在分类 x 轴的自定义位置添加垂直线的人来说，这个答案是一种更广泛的讨论。

我有五个组，每个组有五个因素。我想在每组的最后一个因子后面添加 4 条垂直线来分隔五个组（在这种情况下位于“E”位置）。@dickoa 的方法不适用于我的情况。当我使用：

```
geom_vline(xintercept=which(df$x == 'm')) 
```

它只在第三组的“m”处添加垂直线。我只是发现我可以这样尝试：

```
geom_vline(xintercept = c(1.5,2.5,3.5,4.5)) 
```

至少这非常适合我的情况。您可能需要多次尝试才能找到适合您情况的模式。

我一直想知道如何根据 x/y 轴的比例添加垂直/水平线。例如，xintercept = 0.5 表示在 x 轴中间添加垂直线，xintercept = 0.25 表示第一季度。但是我找不到有关此主题的任何知识。

# algorithm - 求和区间

> ID：10236889
> 
> 赞同：2
> 
> 时间：2012-04-19T21:15:09.230
> 
> 标签：algorithm

我必须总结这样的间隔：

```
1..6
2..4
The result is 1..6, so there are 6 numbers in the end. 
```

这是另一个例子：

```
4..6
8..10
14..16
4, 5, 6, 8, 9, 10, 14, 15, 16, the size is 9. 
```

现在，我必须在 O(N) 中执行此操作。这是我很快想到的使用 STL 的一种不太好的方法：

```
#include <set>
#include <stdio.h>

using namespace std;

int main() {
  int n;
  scanf("%d", &n);

  set<int> numbers;
  int a, b;
  for (int i = 0; i < n; i++) {
    scanf("%d %d", &a, &b);
    for (int u = a; u <= b; u++) {
      numbers.insert(u);
    }
  }

  printf("%d\n", numbers.size());

  return 0;
} 
```

知道如何在 O(N) 中完成此操作吗？我知道我必须先对其进行排序，但我可以使用我刚刚制作的这个：

```
bool compare(const vector<int> first, const vector<int> second) {
  if (first[0] == second[0]) return first[1] < second[1];
  return first[0] < second[0];
}

sort(intervals.begin(), intervals.end(), compare); 
```

所以它是O（log N + N）。

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T06:48:01.583

如果`n`是间隔数，那么我认为没有办法做到这一点`O(n log(n))`。

但是，如果我们愿意面对这个问题，第一步就是按区间的左值对区间进行排序。（这需要时间`O(n log(n))`。）然后您尝试根据以下伪代码计算联合中的最小间隔集

```
answer = 0
while intervals left
    (min, max) = next interval
    while intervals left and min of next interval < max:
        if max < max of next interval:
            max = max of next interval
        move forward in interval list
    # the next interval is [min..max]
    answer += max - min + 1 
```

（这段代码在区间数上是线性的，非线性部分是对其进行排序。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:24:20.883

我之前在 OCaml 中做过，代码如下：

```
let rec calc c l1 l2 =
  match c,l1,l2 with                            
      None, (f1,t1) :: y1, ((f2,t2) :: y2 as n2) when f1 < f2 -> calc (Some (f1,t1)) y1 n2
    | None, n1, (f2,t2) :: y2 -> calc (Some (f2,t2)) n1 y2
    | None, _, _ -> []
    | (Some (fc,tc) as cur), (f1,t1) :: y1, ((f2,t2) :: y2 as n2) when t1 <= fc -> calc cur y1 n2
    | (Some (fc,tc) as cur), ((f1,t1) :: y1 as n1), (f2,t2) :: y2 when t2 <= fc -> calc cur n1 y2
    | Some (fc,tc), (f1,t1) :: y1, ((f2,t2) :: y2 as n2) when f1 <= tc && t1 > fc -> calc (Some (fc,t1)) y1 n2
    | Some (fc,tc), ((f1,t1) :: y1 as n1), (f2,t2) :: y2 when f2 <= tc && t2 > fc -> calc (Some (fc,t2)) n1 y2
    | Some (fc,tc), (f1,t1) :: y1, ((f2,t2) :: y2 as n2) when f1 < f2 -> [fc,tc] @ calc (Some (f1,t1)) y1 n2
    | Some (fc,tc), (t :: e as n1), (f2,t2) :: y2 -> [fc,tc] @ calc (Some (f2,t2)) n1 y2
    | Some (fc,tc), [], (f,t) :: tr when f <= tc && t > tc -> calc (Some (fc,t)) [] tr
    | Some (fc,tc), [], (f,t) :: tr when f <= tc && t <= tc -> calc (Some (fc,tc)) [] tr
    | Some (fc,tc), [], x -> [fc,tc] @ x
    | Some (fc,tc), (f,t) :: tr, [] when f <= tc && t > tc -> calc (Some (fc,t)) tr []
    | Some (fc,tc), (f,t) :: tr, [] when f <= tc && t <= tc -> calc (Some (fc,tc)) tr []
    | Some (fc,tc), x, [] -> [fc,tc] @ x 
```

这计算了两个范围的并集（它们是两个任意元素的集合），它是 O(N+M) （N 和 M 是每个集合中单个间隔的数量）。结果排序。

在此之后，您可以轻松地以线性时间计算列表：

```
List.fold_left (fun a (f,t) -> for i = f to t do a := !a @ [Int i] done; a) (ref []) range 
```

好的，这是 OCaml，但我已经准备好了，所以它可能对你有用，尤其是在通过删除重叠部分来合并间隔的棘手部分上，因为我花了一些时间来弄清楚算法，但我无法向你描述它在元代码中（从实现中可以看出）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T06:24:47.987

我相信您可以在这里实现的最佳复杂度是 O(N*log(N)) 其中 N 是间隔数。解决方案并不难——您需要首先按间隔对间隔进行排序，然后再进行一次线性传递来计算它们的并集。我将尝试用 C++ 编写一些代码：

```
struct Interval {
  int from, to;
  bool operator<(const Interval& other) const {
    if(from != other.from) {
      return from < other.from;
    }
    return to < other.to;
  }
};

int main() {
  vector<Interval> intervals;
  sort(intervals.begin(), intervals.end());

  int current_position = intervals[0].from;
  int sum = 0;
  for (int i = 0; i < intervals.size(); ++i) {
    if (intervals[i].to < current_position) {
      continue;
    } else if (intervals[i].from <= current_position) {
      sum += intervals[i].to - current_position + 1;
      current_position = intervals[i].to + 1;
    } else {
      sum += intervals[i].to - intervals[i].from + 1;
      current_position = intervals[i].to + 1;
    }
  }
  std::cout << sum << std::endl;
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T21:21:58.600

首先，让我们弄清楚什么`N`是 - 是段数吗？

如果是这种情况，那么您不能总是这样做 - 只需打印出所有段中的单个数字的数量 - 称之为 m - 需要 O(m) 时间。那么，最快的算法不会比 O(m+n) 更好

# c# - Asp.net单选按钮，如何更改呈现的标签服务器端？

> ID：10236890
> 
> 赞同：0
> 
> 时间：2012-04-19T21:15:26.623
> 
> 标签：c#, asp.net

我必须为单选按钮修改一些现有代码，该单选按钮具有一堆基于单选按钮的值和 Id 的逻辑。我真正需要做的就是更改标签，我真的不想修改生成的输入标签，因为它破坏了混乱的逻辑。有谁知道如何做这个服务器端？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:18:06.853

我不确定我是否理解你的问题。但是 a[`RadioButton`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobutton.aspx)有一个[`Text`](http://msdn.microsoft.com/en-us/library/ms158234.aspx)属性。

```
RadioButton1.Text = "anytext"; 
```

**编辑**：如果您想更改 RadioButton 控件的标签，可以使用该[`LabelAttributes`](http://msdn.microsoft.com/en-us/library/b3se8ewc%28v=vs.85%29.aspx)属性（[继承](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.labelattributes.aspx)自 CheckBox）。

例如：

```
RadioButton1.LabelAttributes.Add("onmouseover", "this.style.backgroundColor = 'red'"); 
```

或者

```
RadioButton1.LabelAttributes.CssStyle.Add("text-decoration", "line-through"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:19:10.460

只需通过 Text 属性：

```
MyRadioButton.Text = "My Radio Button"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T21:20:09.787

这取决于您要更改标签的内容。您可以使用`LabelAtttributes`添加或删除属性、`Text`更改文本的属性等，但仅此而已。

如果您需要更多，我会考虑建立自己的`RadioButton`控制；它真的不会那么困难，它会给你任何你需要的灵活性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T16:24:27.943

我最终改变了它的客户端。

```
 $(function() {
                        var capRateLabel = $('lblCapRate').next();
                        if(capRateLabel)
                        {
                            capRateLabel.text('newtext'); 
                        }
                }) 
```

# android - 如何杀死Android中的顽固进程？

> ID：10236891
> 
> 赞同：1
> 
> 时间：2012-04-19T21:15:26.640
> 
> 标签：android, process, kill

我有一个无根的 Android 2.3.4 设备，并且正在使用一个应用程序（不是我的应用程序），它有时会开始发疯并无缘无故地使用 100% 的 cpu 电源（这是一个错误），这会很快耗尽电池电量，而且也相当大减慢设备速度。我可以使用 taskkiller 来结束它，但这并不是一个真正的选择，所以我制作了一个应用程序来监控其他应用程序，并在它检测到过于疯狂的 CPU 使用率时尝试结束它。

我现在面临的问题是如何结束该应用程序。我尝试了以下4种方法，但不幸的是无济于事：

```
ActivityManager actvityManager = (ActivityManager) getSystemService( ACTIVITY_SERVICE );
actvityManager.killBackgroundProcesses(packagename);

android.os.Process.sendSignal(pid, android.os.Process.SIGNAL_KILL);

android.os.Process.killProcess(pid);

actvityManager.restartPackage(packagename); 
```

我可以使用常规的 taskkilling 工具来结束它（确实如此，我验证了这一点），但我想自己以编程方式而不是通过其他方式来完成它（我也指重新启动而不使用应用程序）。

我怎样才能结束这样的过程？

PS：我知道正常情况下进程的终止应该留给Android，但在这种情况下显然是不够的，所以我需要自己处理。

# javascript - mootools ie8 array.append 错误

> ID：10236894
> 
> 赞同：0
> 
> 时间：2012-04-19T21:15:35.253
> 
> 标签：javascript, internet-explorer-8, mootools

我试图修复一些旧的 mootools 脚本，在 Internet Explorer 9 中，Firefox Array.append 工作得很好

```
ar ewls = document.getElements('a');
var lol = [];
lol.append(ewls); 
```

但在 IE8 中，我在控制台“SCRIPT5028：Function.prototype.apply：oczekiwano obiektu tablicy lub argumentów”中收到此错误（预期的数组或参数）

[http://jsfiddle.net/dKkX5/4/](http://jsfiddle.net/dKkX5/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:22:37.793

呃。`Array.append`?`lol = []; lol.push(ewls);`

你应该考虑收藏。你有一个数据类型不匹配。将集合与静态数组合并将不起作用。`var lol = new Elements();`- 它就像一个只有元素原型的数组。然后`lol.append(ewels);`

[http://jsfiddle.net/dKkX5/5/](http://jsfiddle.net/dKkX5/5/)

```
var ewls = document.getElements('a');
var lol = new Elements();

lol.append(ewls);
lol.length; // 5 
```

请记住，附加来自 1.3+ - 在 1.2 中是`Array.extend`

# .htaccess - CodeIgniter + mod_rewrite URI 缩短

> ID：10236897
> 
> 赞同：1
> 
> 时间：2012-04-19T21:15:53.127
> 
> 标签：.htaccess, codeigniter, mod-rewrite, hmvc

我正在使用 CI 构建一个类似博客的网站。我正在使用[HMVC 插件](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)。我正在使用的模块是“/journal”。

个别文章可在 /journal/article/ID/SLUG 访问。这很好用，但我想使用 mod_rewrite 将 URI 缩短为 /journal/ID/SLUG。

这是我的规则：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^journal/([0-9]+)(.*)$ index.php?/journal/article/$1$2 [L,NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 
```

为了测试，我使用 /journal/2。

我知道规则是匹配的。例如，如果我将重定向更改为[http://google.com](http://google.com)，我确实会被重定向到 Google。但是，当使用所写的规则时，它似乎被忽略了，无论我输入什么，我都会得到 404。

我是否犯了一些明显（或神秘）的错误？

* * *

编辑：我在发布问题后不久就发现了这一点。我的规则确实是正确的，但我需要在 config/config.php 中更改以下行：

```
 $config['uri_protocol']    = 'AUTO'; 
```

至

```
 $config['uri_protocol']    = 'PATH_INFO'; 
```

我不会声称确切知道该更改的作用或解决问题的原因。也许有人可以跟进解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:43:06.633

$config['uri_protocol'] 告诉 CI 使用哪个 $_SERVER 超全局来确定您的应用程序 URI。'PATH_INFO' 选项使用 $_SERVER['PATH_INFO'] 这是 URL 请求（没有主机部分），请参阅[php 手册](http://php.net/manual/en/reserved.variables.server.php)。

'AUTO' 选项是一个 CI 的东西，可以在不进行配置调整的情况下适用于不同的环境。

就个人而言，我已经编写了一些 PHP SEF 控制器，我发现使用 PHP 控制器脚本进行所有处理会更好。

htaccess 和重写可能很棘手，更难调试，一个错字可能会杀死整个网站（哎哟）。我确信性能提升很小，但需要一些非常高的要求。无论如何，您正在前往您的 index.php 控制器。当代码都在一个地方时，我会发现更快乐的代码；-)

祝你好运......希望我对你的问题提供了一些见解。

# php - CKFinder - 限制存储大小

> ID：10236899
> 
> 赞同：0
> 
> 时间：2012-04-19T21:16:09.903
> 
> 标签：php, ckfinder

我正在使用 CKFinder 2.1，我想限制它的总存储大小。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:10:26.387

可以为每个资源类型调整其最大上传大小`configuration`

改变`'maxSize' => 0`你想要的样子

```
$config['ResourceType'][] = Array(
'name' => 'Files', // Single quotes not allowed
'url' => $baseUrl . 'files',
'directory' => $baseDir . 'files',
'maxSize' => 0,
'allowedExtensions' => '7z,aiff,asf,avi,bmp,csv,doc,fla,flv,gif,gz,gzip,jpeg,jpg,mid,mov,mp3,mp4,mpc,mpeg,mpg,ods,odt,pdf,png,
ppt,pxd,qt,ram,rar,rm,rmi,rmvb,rtf,sdc,sitd,swf,sxc,sxw,tar,tgz,tif,tiff,txt,vsd,wav,wma,wmv,xls,xml,zip',
'deniedExtensions' => '');

$config['ResourceType'][] = Array(
'name' => 'Images',
'url' => $baseUrl . 'images',
'directory' => $baseDir . 'images',
'maxSize' => 0,
'allowedExtensions' => 'bmp,gif,jpeg,jpg,png',
'deniedExtensions' => '');

$config['ResourceType'][] = Array(
'name' => 'Flash',
'url' => $baseUrl . 'flash',
'directory' => $baseDir . 'flash',
'maxSize' => 0,
'allowedExtensions' => 'swf,flv',
'deniedExtensions' => ''); 
```

# facebook - 是否可以获得默认的 Facebook 群组个人资料图片？

> ID：10236905
> 
> 赞同：0
> 
> 时间：2012-04-19T21:16:40.757
> 
> 标签：facebook, rest, facebook-graph-api

根据[Facebook 官方文档](http://developers.facebook.com/docs/reference/api/group/)，Facebook Graph API 似乎可以处理 Facebook Group 个人资料图片。但是，文档*连接*部分提供的[图片链接](https://graph.facebook.com/195466193802264/picture)没有返回正确的图像。URL 重定向到*/images/icons/group-types/large/default.png*，这显然是默认个人资料图片的路径，但它实际上返回的 JSON 数据如下：

 **```
{
   "error": {
      "message": "Unknown path components: /icons/group-types/large/default.png",
      "type": "OAuthException",
      "code": 2500
   }
} 
```

这是Facebook的错误吗？有什么想法可以避免这种情况吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:53:21.810

看起来像一个错误，要解决它，将图像作为字符串而不是 HTTP 重定向：

[https://graph.facebook.com/195466193802264?fields=picture](https://graph.facebook.com/195466193802264?fields=picture)

回应是：

```
"picture": "/images/icons/group-types/large/default.png" 
```

解析它，如果你得到一个相对 URL，在它前面加上`http://www.facebok.com`

在这种特定情况下，它可以工作：[链接在这里](http://www.facebook.com/images/icons/group-types/large/default.png)

同时，您应该[提交错误报告](https://developers.facebook.com/bugs/)并在 API 中更新**

# java - FloatBuffer 和 3D 图形

> ID：10236913
> 
> 赞同：0
> 
> 时间：2012-04-19T21:17:14.363
> 
> 标签：java, opengl, lwjgl, floatbuffer

我一直在寻找初学者解释什么是 floatBuffer 以及它与 3D 编程的关系（特别是用于 Java 的 LWJGL）。看来我必须将它用于照明和广告牌之类的东西，但我不完全理解它的目的或它是什么，有人可以提供解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:31:02.517

用于纹理采样器或帧缓冲区的浮点图像格式使用浮点值而不是整数来表示每个像素值。整数（和定点值）具有它们可以表示的值的固定范围，并且具有恒定的精度。然而，浮点值在值范围和精度之间“平衡”，并且可以支持比整数或定点值更大的值范围。

该应用程序是例如 HDR 渲染。假设你有一个场景非常昏暗和非常明亮的部分。对于定点格式，您必须在保真度差、明亮区域过饱和或暗区曝光不足之间进行选择。使用浮点格式，您可以表示整个场景并仅在显示器的输出处应用色调映射以设置曝光级别和表示的值范围。

# html - 移动网站 - 在方向更改时重置视口

> ID：10236920
> 
> 赞同：7
> 
> 时间：2012-04-19T21:18:01.860
> 
> 标签：html, mobile, viewport

我有一个 590px 宽的移动页面。所以我这样设置视口：

```
<meta name = "viewport" content = "width = 590"> 
```

当我第一次以纵向或横向访问页面时 - 它看起来不错。页面完全填满了宽度。但是当我改变方向时，视口不会改变。当我从纵向转到横向时，视口比 590 像素宽，反之亦然。

仅在 Galaxy S2 上测试

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:17:56.333

这听起来和我遇到的问题一模一样。我找不到统一的答案，所以不得不拼凑起来。

首先，任何在纵向和横向上看起来不同的 CSS 都必须放入它自己的 @media 标签中。将整个类正确地放入每个 @media 选择器中很重要，而不仅仅是不同的位。两个视图共有的 CSS 可以放在顶部。我的设备宽度显示为 580，因此我将截止值设置为 600 - 您可以将其设置为您认为适合您的值。

```
 // All CSS that is common to both

@media all and (min-device-width:601px)and (orientation:landscape){
    // All CSS for Landscape and Desktop
}
@media only screen and (max-device-width:600px)and (orientation:portrait){
    // All CSS for Portrait view
} 
```

接下来是视口设置。我将此代码作为标准放入每个页眉中（尺寸是我的手机纵向尺寸）。它需要那里的元数据，以便 javascript 以后可以访问它。

```
<meta name="viewport" id="viewport" content="width=480, initial-scale=0.25, maximum-scale=1.0;" /> 
```

最后，当页面检测到手机旋转时，我不得不使用一些 Javascript 重新编写视口设置（感谢 Vinayak.B [Original Article](https://stackoverflow.com/a/10245271)）

```
 //Code to display on mobiles
    //========================================

    var swidth = window.screen.width;
    //These were the values of my website CSS container for portrait and landscape
    var vpwidth = 480;
    var vlwidth = 960;

    updateOrientation();

    window.addEventListener('orientationchange', updateOrientation, false);

    function updateOrientation() {

      var viewport = document.querySelector("meta[name=viewport]");

      switch (window.orientation) {
        case 0: //portrait
          //set the viewport attributes to whatever you want!
            viewport.setAttribute('content', 'width=' + vpwidth + ', initial-scale=0.25, maximum-scale=1.0;')
          break;
        case 90: case -90: //landscape
          //set the viewport attributes to whatever you want!
            viewport.setAttribute('content', 'width=' + vlwidth + ', initial-scale=0.25, maximum-scale=1.0;')
          break;
        default:
          //set the viewport attributes to whatever you want!
            viewport.setAttribute('content', 'width=' + vpwidth + ', initial-scale=0.25, maximum-scale=1.0;')
          break;
      }
        //alert(swidth + ' lead to an initial width of ' + vpwidth + ' and a rotate width of ' + vlwidth);
    } 
```

经过几个小时的尝试，这对我有用。出于某种原因，在我的手机上，initial-scale=1 搞砸了，但 0.25 有效？！我希望它对你有用，或者至少提供一个好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:20:38.327

使用设备宽度：

```
<meta name = "viewport" content = "width=device-width"> 
```

这处理方向变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-17T09:12:59.323

这对我有用（在 iOS Safari 和 Chrome 中测试）。

我想在纵向模式下强制视口为 400 像素，在横向模式下强制为 600 像素。

```
var resize = function() {
    $('body').removeClass('landscape').removeClass('portrait').addClass(orientation).css('width', $(window).width() + 'px');
}

var orientation = null;

var onOrientationChange = function () {
    switch(window.orientation) {  
        case -90:
        case 90:
            orientation = 'landscape';
        break; 
        default:
            orientation = 'portrait';
        break;
    }

    if(screen.width < 768) {
        if(orientation == 'landscape') {
            var scale = Math.round(screen.height / 600 * 10) / 10;
            $('#meta-viewport').attr('content', 'width=600px, initial-scale='+scale+', maximum-scale='+scale+', minimum-scale='+scale+', user-scalable=no'); // landscape mobile
        } else {
            var scale = Math.round(screen.width / 400 * 10) / 10;
            $('#meta-viewport').attr('content', 'width=400px, initial-scale='+scale+', maximum-scale='+scale+', minimum-scale='+scale+', user-scalable=no'); // portrait mobile
        }
    } else if(screen.width >= 768 && screen.width < 1200) {
        var scale = Math.round(screen.width / 960 * 10) / 10;
        $('#meta-viewport').attr('content', 'width=960px, initial-scale='+scale+', maximum-scale='+scale+', minimum-scale='+scale+', user-scalable=no');
    } else if(screen.width >= 1200) {
        $('#meta-viewport').attr('content', 'width=device-width, user-scalable=yes');
    }

    resize();
}

$(document).ready(function() {
    $(window).resize(resize);
    $(window).bind('orientationchange', onOrientationChange);
    onOrientationChange();
}); 
```

希望能帮助到你！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T02:53:51.810

有同样的问题，这是我的解决方案。

方向更改后重新加载页面，然后根据新方向设置视口变量。

```
window.onorientationchange = function() {
  /*window.orientation returns a value that indicates whether iPhone is in portrait mode, landscape mode with the screen turned to the
    left, or landscape mode with the screen turned to the right. */
  var orientation = window.orientation;
  switch(orientation) {
    case 0:
        var current = $('body').attr('class');
        if(current != 'ps-active'){
            location.reload();
        }

        break; 

    case 90:
        var current = $('body').attr('class');
        if(current != 'ps-active'){
            location.reload();
        }
        break;

    case -90: 
        var current = $('body').attr('class');
        if(current != 'ps-active'){
            location.reload();
        }
        break;
  }
}

 $(document).ready(function() {
window.onload = function() {
  /*window.orientation returns a value that indicates whether iPhone is in portrait mode, landscape mode with the screen turned to the
    left, or landscape mode with the screen turned to the right. */
  var orientation = window.orientation;
  switch(orientation) {
    case 0:

        viewport = document.querySelector("meta[name=viewport]");
        viewport.setAttribute('content', 'width=device-width; initial-scale=0.2; maximum-scale=1.0; user-scalable=yes;');
        $('.container').show();
        break; 

    case 90:
        viewport = document.querySelector("meta[name=viewport]");
        viewport.setAttribute('content', 'width=device-width; initial-scale=0.4; maximum-scale=1.0; user-scalable=yes;');
        $('.container').show();
        break;

    case -90: 
        viewport = document.querySelector("meta[name=viewport]");
        viewport.setAttribute('content', 'width=device-width; initial-scale=0.4; maximum-scale=1.0; user-scalable=yes;');
        $('.container').show();
        break;
    default:
        $('.container').show();
        break;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T05:33:50.790

在我的测试中，matchMedia 函数在 Android 上运行得非常好：

```
var mql = window.matchMedia("(orientation: landscape)");
if (mql.matches) {
  /* The device is currently in landscape orientation */
}
else {
  /* The device is currently in portrait orientation */
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-01T07:35:58.280

方向更改后重置视口。这个 JS 可以工作，只要你有

```
<meta name="viewport/>

var maxWidth = screen.width;
var viewport = document.getElementsByName('viewport')[0];
viewport.setAttribute('content', 'width = ' + maxWidth + ', minimum-scale=1.0, maximum-scale=1.0, user-scalable=no'); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-19T21:36:29.277

我很确定你只能使用 JS 来获取 Galaxy 中的方向变化。 **试试下面的片段**。

* * *

来自相关帖子：[使用 javascript 在 Android 中改变方向](https://stackoverflow.com/a/8986040/321500)

```
function orientation_changed ()
{
    if ( is_portrait() )
    {
        //do something
    }
    else if ( is_landscape() )
    {
        // do something else
    }
    clearTimeout(window.t);
    delete window.t;
}

window.t = undefined;
window.onorientationchange = function (event)
{
    window.t = setTimeout('orientation_changed();', 250);
}

function is_landscape()
{
    var uagent = navigator.userAgent.toLowerCase();
    if ( uagent.search('ipad') > -1 )
    {
        var r = ( window.orientation == 90 || window.orientation == -90 );
    }
    else
    {
        var r = ( screen.width > screen.height );
    }
    return r;
} 
```

# mysql - 从另一个表插入 INTO MySQL

> ID：10236932
> 
> 赞同：7
> 
> 时间：2012-04-19T21:18:46.860
> 
> 标签：mysql

```
INSERT INTO campaign_ledger (`campaign_id`, `description`, amount, balance, timestamp)
VALUES (SELECT id as campaign_id, 'Ported from campaigns' as description, budget_remaining as amount, budget_remaining as balance, NOW() as timestamp FROM campaigns) 
```

这是我的语法，但我收到一条错误消息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 2 行的“SELECT id as campaign_id、“Ported from campaign”作为描述、budget_remaini 附近使用

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T21:20:36.797

由于您是从表中选择，因此您将需要使用`INSERT INTO SELECT FROM`查询：

```
INSERT INTO campaign_ledger 
(
    `campaign_id`
    , `description`
    , amount
    , balance
    , timestamp
)
SELECT 
    id as campaign_id
    , 'Ported from campaigns' as description
    , budget_remaining as amount 
    , budget_remaining as balance
    , NOW() as timestamp 
FROM campaigns 
```

仅`INSERT INTO VALUES`在您使用特定值而不是从表中选择时使用。如果您想使用，`INSERT INTO VALUES`那么您的查询将是这样的：

```
INSERT INTO campaign_ledger 
(
    `campaign_id`
    , `description`
    , amount
    , balance
    , timestamp
)
VALUES
(
    1
    , 'test'
    , 100.00
    , 1000.00
    , NOW()
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:20:28.263

```
INSERT INTO campaign_ledger (`campaign_id`, `description`, amount, balance, timestamp)
SELECT id as campaign_id, 'Ported from campaigns' as description,
budget_remaining as amount,budget_remaining as balance,
NOW() as timestamp FROM campaigns; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T21:21:43.683

查询的`VALUES`部分不是必需的。例如：

```
 INSERT INTO campaign_ledger (`campaign_id`, `description`, amount, balance, timestamp)
 SELECT id as campaign_id, 'Ported from campaigns' as description, 
        budget_remaining as amount, budget_remaining as balance, 
        NOW() as timestamp 
 FROM campaigns; 
```

# jquery - Fancybox：未传递数组变量

> ID：10236934
> 
> 赞同：0
> 
> 时间：2012-04-19T21:18:54.420
> 
> 标签：jquery, fancybox

只是似乎无法让这种情况发生！

```
$(".fancy").click(function(event) {
  event.preventDefault();
  var pic = [];
  $('.room-thumbnail').each(function(index) {
      pic.push('\'' + 'http://localhost' + $(this).attr('href') + '\'' );
  });

  var pics = '['+ pic.join(', ')+']';

  console.log(pics);
  // => ['http://localhost/driver/images/produits/denim/sixthjune-7440/sixthjune-7440.jpg', 'http://localhost/driver/images/produits/denim/sixthjune-7440/sixthjune-7440-back.jpg', 'http://localhost/driver/images/produits/denim/sixthjune-7440/sixthjune-7440-closeup1.jpg', 'http://localhost/driver/images/produits/denim/sixthjune-7440/sixthjune-7440-closeup2.jpg']

  $.fancybox(pics, {
          'transitionIn'      : 'elastic',
          'transitionOut'     : 'elastic',
          'overlayColor'      : '#1D1D1D',
          'type'              : 'image',
          'cyclic': true
      });
}); 
```

如果我手动输入 href 网址（图片），它可以工作。但是当我通过 fancybox 变量（图片）我得到了 fancybox 错误： - 无法加载请求的内容。- 请稍后再试。-

有人可以告诉我我做错了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:04:23.607

您的代码没有任何问题，但您没有考虑到一些问题：

您的声明`var pics = '['+ pic.join(', ')+']';`返回了一个fancybox 无法解析的*字符串。*

你需要做的就是把这样的*字符串*转换成 javascript `object`，这样 fancybox 就可以解析它了。有不同的方法可以做到这一点。一种是使用该`eval()`功能，但可能存在安全问题，因此不推荐使用此方法。

由于您使用的是 jQuery，因此最安全的方法是使用[jQuery.parseJSON( json )](http://api.jquery.com/jQuery.parseJSON/)

...所以就在您设置变量的那一行之后`pics`

```
var pics = '['+ pic.join(', ')+']'; 
```

添加此以将其转换为 js 对象

```
pics = jQuery.parseJSON(pics); 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:40:07.457

你可以这样做：

1.  创建一个显示属性设置为无的容器 div **(display:none)**
2.  在这个容器内放置 de img 标签
3.  当您在 div 内的任何图像上调用函数触发**单击事件时**

例子：

```
<div>
 <img ...></img ...></img ...>
</div> 
```

在 js 代码上： $("#container img").fancybox();

```
function call_fancybox(){
$("#container img:first").trigger("click");
} 
```

# hbase - Hbase 创建表失败

> ID：10236936
> 
> 赞同：6
> 
> 时间：2012-04-19T21:18:59.090
> 
> 标签：hbase

我使用 ./start-hbase.sh 启动了 HBase。我做了 ./hbase shell 来启动 Hbase 的 shell。问题是我无法创建新表。

```
$ ./hbase shell 
HBase Shell; enter 'help<RETURN>' for list of supported commands.
Type "exit<RETURN>" to leave the HBase Shell
Version 0.92.1, r1298924, Fri Mar  9 16:58:34 UTC 2012

hbase(main):001:0> create 'test','cf' 
```

* * *

它永远保持这种状态。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T07:17:47.013

你的 HMaster 没有启动。

1.请检查您的 Hmaster 日志。
如果您在日志中看到类似的内容。
`INFO org.apache.hadoop.hbase.util.FSUtils: Waiting for dfs to exit safe mode...`
然后使用以下命令将 hadoop 从安全模式中退出。
`hadoop dfsadmin -safemode leave`

2.如果你看到 localhost 不接受或 zookeeper 不接受。然后，请修改 /etc/hosts 和 /etc/hostname 文件。

*删除行 127.0.1.1 localhost* 你的 /etc/hosts 文件应该是这样的

```
127.0.0.1       hadoop
192.165.1.45    hadoop  hbase 
```

您的 /etc/hostname 文件应如下所示

`hadoop`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:49:39.747

您必须检查 Hmaster 日志，检查 hbase-site.xml 文件中的*hbase.rootdir*和*hbase.zookeeper.quorum*参数。这通常发生在 Hbase 无法连接到 Zookeeper quorum 时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-09T14:30:10.267

另外，编辑`/etc/hosts`如果你想作为 HBase 的客户端连接，你必须写 IP 和主机名。

例如，HBase 在 192.168.xx.xx 中运行，但您的应用在 192.168.xx.yy 中运行

编辑`/etc/hosts`添加以下行

```
 192.168.xx.yy <hostname> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-20T22:53:29.240

如果以下命令不起作用

```
$ hadoop dfsadmin -safemode leave 
```

然后尝试

```
$ hdfs dfsadmin -safemode forceExit 
```

这对我有用！

# sql - 如何从 Ruby on Rails 2.3.14 中某个类的对象数组中选择某个字段

> ID：10236941
> 
> 赞同：0
> 
> 时间：2012-04-19T21:19:11.130
> 
> 标签：sql, ruby-on-rails, arrays

如果我有一个名为 100 个对象的数组`Stream`，如下所示：

```
User.find(1001).streams.find( :all, :order => "id", :limit => 100 ) 
```

这基本上是一个数据表，我如何从中选择某个字段，例如评级？在 SQL 中，我需要做的就是`SELECT rating FROM streams WHERE user_id=1001 ORDER BY id LIMIT 100`，，但我不知道如何在 Ruby on Rails 中做到这一点。使用上面的命令会返回我无法使用的所有字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:33:09.653

下面的代码将返回一个数组`rating`

```
User.find(1001).streams.all( :order => "id", :limit => 100).map(&:rating) 
```

如果您想避免检索`User`对象的所有属性的成本：

```
User.find(1001).streams.all:select => "rating", 
  :order => "id", :limit => 100).map(&:rating) 
```

`SELECT`您可以在 key 的值中使用标准子句语法`:select`。

如果要避免构造`User`对象：

```
User.connection.select_values("select rating from users order by id limit 100") 
```

# ios - 无效的 CfStringRef plist（字典数组）iOS

> ID：10236942
> 
> 赞同：0
> 
> 时间：2012-04-19T21:19:16.313
> 
> 标签：ios, arrays, plist, nsmutabledictionary, cfstring

我的文件中有以下代码

```
NSString *filePath = [[NSBundle mainBundle]pathForResource:@"images" ofType:@"plist"];
                NSArray *array = [[NSArray alloc]initWithContentsOfFile:filePath];

                for (id dict in array) {

                    NSLog(@"This is the id: %@" ,[dict objectForKey:@"Id"]);

                } 
```

当我在调试器上运行它时，它会在 NSString *filePath 行上返回“invalid CfStringref”。

无论我尝试什么代码，我都无法通过这个。

有任何想法吗？

plist 也是一个字典数组，但我无法解析它们，因为代码不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:58:53.583

images.plist 不在您的“复制捆绑资源”构建阶段，将其拖入并再次运行。

# python - 获取所有用户的 last_login？

> ID：10236945
> 
> 赞同：1
> 
> 时间：2012-04-19T21:19:47.357
> 
> 标签：python, django

所以我试图`last_login`为所有用户争取时间，但我不知道如何为未登录的用户做到这一点。

有没有办法为未登录的用户获取此日期？还是`user.last_login`仅对当前登录的用户有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:21:02.217

`last_login`只是一个`DateTimeField`存储在`User`提供的模型中`contrib.auth`。您可以`User`像查询任何自己的模型一样查询对象。

要为所有用户打印出来`last_login`，只需遍历查询集：

```
from django.contrib.auth.models import User

for user in User.objects.all():
    print user.last_login 
```

或者，要获取特定用户`last_login`对该特定用户的查询：

```
from django.contrib.auth.models import User

last_login = User.objects.get(username='bob').last_login 
```

该`last_login`字段在用户上次登录时设置（或者，如果他们尚未登录，则设置为创建用户帐户的时间）。无论如何，它始终存储在数据库中，因此它的可访问性与用户当前是否登录无关。

# reporting - 如何在O（n + k）中获得两个简单多边形之间的所有交点

> ID：10236946
> 
> 赞同：1
> 
> 时间：2012-04-19T21:19:49.927
> 
> 标签：reporting, polygon, intersection

基本上我想解决的问题的表述非常简单。给定 2 个简单多边形（没有自相交），在*O(n+k)*时间内报告所有相交的边对，其中 n - 是边的总数，k - 两个多边形之间的相交数。

保持在提到的时间硬度内是非常重要的。令我惊讶的是，我几乎找不到任何关于这个主题的信息。多边形相交似乎是一个自然而重要的问题。无论如何，目前我不知道是否有可能在*O(n+k)*中做到这一点。

可以请人帮忙解决这个问题的下限吗？

# python - Python 是否有类似于 Java 的 CountDownLatch 的控制机制？

> ID：10236947
> 
> 赞同：17
> 
> 时间：2012-04-19T21:19:53.640
> 
> 标签：python, multithreading

所以，我首先要说这是一个家庭作业问题。我的教授给了我们一个作业，必须用 Java 写一次，然后用另一种语言写一次；我选择第二种语言是 Python，因为我至少对它有点熟悉。该程序必须以下列方式工作：

```
start the main method/thread, which we will call parent
start thread child 1 from the parent
start thread grandchild from thread child 1
start thread child 2 from the parent
print grandchild from the grandchild thread
print child 2 from the child 2 thread
print child 1 from the child 1 thread
print parent from the main method/parent thread 
```

这些事情必须按照这个顺序完成。我使用 CountDownLatch 在 Java 中编写了执行此操作的代码，以便组织这些事情发生的方式。但是，我没有在 Python 中看到类似的机制（尽管我对 Python 的熟悉程度不如 Java）。是否有类似的机制可能我只是找不到，因为我不知道它叫什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-07-17T06:58:44.017

您可以使用 threading.Condition 实现 CountDownLatch，如下所示：

```
import threading

class CountDownLatch(object):
    def __init__(self, count=1):
        self.count = count
        self.lock = threading.Condition()

    def count_down(self):
        self.lock.acquire()
        self.count -= 1
        if self.count <= 0:
            self.lock.notifyAll()
        self.lock.release()

    def await(self):
        self.lock.acquire()
        while self.count > 0:
            self.lock.wait()
        self.lock.release() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:37:05.000

查看模块中的`Semaphore`or`Condition`类`threading`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-21T19:40:41.627

Python 3.2 添加了一个`Barrier`与`CountDownLatch`. 主要区别在于它可以重置，并且没有等待的倒计时方法。

[https://docs.python.org/3/library/threading.html#barrier-objects](https://docs.python.org/3/library/threading.html#barrier-objects)

# html - 如何使用 display:none 删除元素？

> ID：10236951
> 
> 赞同：1
> 
> 时间：2012-04-19T21:20:11.297
> 
> 标签：html, css

我想删除下面屏幕截图中以蓝色突出显示的元素。

如果我将以下内容添加到 CSS

```
#p-tb body, { display:none } 
```

它仍然没有被删除。

有人可以解释我做错了什么吗？

![在此处输入图像描述](../Images/fc024af5ae8c1b855f4256ff21a0e785.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:21:48.370

`#p-tb .body`是您需要的选择器 - 您错过了最后`.`的额外`,`免费加载。

编辑：虽然，即使您更正了这一点，内联样式也会覆盖该规则，除非您`!important`在`display:none`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T22:23:53.770

小心使用`display: none;`可以包含文本的元素。您可能会发现自己陷入了 SEO 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:22:06.017

Display:none 只隐藏元素。您不能通过 CSS 删除元素。

改用javascript！

# haskell - 暂停单子

> ID：10236953
> 
> 赞同：72
> 
> 时间：2012-04-19T21:20:14.683
> 
> 标签：haskell, monads, coroutine, monad-transformers, free-monad

Monads 可以做许多令人惊奇、疯狂的事情。他们可以创建包含值叠加的变量。它们可以让您在计算之前访问未来的数据。它们可以让你编写破坏性的更新，但不是真的。然后延续单子让你*打破人们的想法！*通常是你自己的。;-)

但这里有一个挑战：你能制作一个可以*暂停*的 monad吗？

```
数据暂停 sx
实例 Monad (Pause s)
变异 :: (s -> s) -> 暂停 s ()
产量::暂停s()
step :: s -> Pause s () -> (s, Maybe (Pause s ()))

```

`Pause`monad 是一种状态 monad（因此，`mutate`具有明显的语义）。通常，像这样的 monad 具有某种“运行”功能，它运行计算并将最终状态返回给您。但`Pause`不同的是：它提供了一个`step`函数，该函数运行计算，直到它调用神奇的`yield`函数。此处计算暂停，向调用者返回足够的信息以便稍后恢复计算。

对于额外的 awesomne​​ss：允许调用者修改`step`调用之间的状态。（例如，上面的类型签名应该允许这样做。）

* * *

用例：编写执行复杂操作的代码通常很容易，但需要一个完整的 PITA 来将其转换为还*输出*其操作中的中间状态。如果您希望用户能够在执行过程中*更改*某些内容，那么事情会变得非常复杂。

实施思路：

*   *显然*，它可以通过线程、锁和`IO`. 但我们能做得更好吗？;-)

*   延续单子有些疯狂吗？

*   也许是某种 writer monad，`yield`只记录当前状态，然后我们可以`step`通过迭代日志中的状态来“假装”它。（显然这排除了改变步骤之间的状态，因为我们现在并没有真正“暂停”任何东西。）

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-19T21:51:03.083

注意：你没有让自己直接访问`s`这个 monad 中的当前状态。

`Pause s`只是`mutate`and`yield`操作上的一个自由单子。直接实现你得到：

```
data Pause s a
  = Return a
  | Mutate (s -> s) (Pause s a)
  | Yield (Pause s a)

instance Monad (Pause s) where
  return = Return
  Return a   >>= k = k a
  Mutate f p >>= k = Mutate f (p >>= k)
  Yield p    >>= k = Yield (p >>= k) 
```

使用几个智能构造函数为您提供所需的 API：

```
mutate :: (s -> s) -> Pause s ()
mutate f = Mutate f (return ())

yield :: Pause s ()
yield = Yield (return ()) 
```

以及驱动它的阶跃函数

```
step :: s -> Pause s () -> (s, Maybe (Pause s ()))
step s (Mutate f k) = step (f s) k
step s (Return ()) = (s, Nothing)
step s (Yield k) = (s, Just k) 
```

您也可以直接使用

```
data Free f a = Pure a | Free (f (Free f a)) 
```

（来自我的“免费”包）

```
data Op s a = Mutate (s -> s) a | Yield a 
```

那么我们已经有一个暂停的单子

```
type Pause s = Free (Op s) 
```

并且只需要定义智能构造函数和步进器。

**让它更快。**

现在，这些实现很容易推理，但它们没有最快的操作模型。特别是，(>>=) 的左关联使用会产生渐近较慢的代码。

为了解决这个问题，您可以将[Codensity](http://hackage.haskell.org/packages/archive/kan-extensions/2.1.2/doc/html/Control-Monad-Codensity.html) monad 应用到您现有的免费 monad，或者直接使用[“Church free”](http://hackage.haskell.org/packages/archive/kan-extensions/2.1.2/doc/html/Control-Monad-Free-Church.html) monad，我在我的博客中对此进行了深入描述。

[http://comonad.com/reader/2011/free-monads-for-less/](http://comonad.com/reader/2011/free-monads-for-less/)

[http://comonad.com/reader/2011/free-monads-for-less-2/](http://comonad.com/reader/2011/free-monads-for-less-2/)

[http://comonad.com/reader/2011/free-monads-for-less-3/](http://comonad.com/reader/2011/free-monads-for-less-3/)

应用 Free monad 的 Church 编码版本的结果是，您可以轻松推断数据类型的模型，并且您仍然可以获得快速评估模型。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-04-19T21:46:57.017

当然; 您只需让任何计算以结果结束，或暂停自身，提供要在恢复时使用的操作以及当时的状态：

```
data Pause s a = Pause { runPause :: s -> (PauseResult s a, s) }

data PauseResult s a
    = Done a
    | Suspend (Pause s a)

instance Monad (Pause s) where
    return a = Pause (\s -> (Done a, s))
    m >>= k = Pause $ \s ->
        case runPause m s of
            (Done a, s') -> runPause (k a) s'
            (Suspend m', s') -> (Suspend (m' >>= k), s')

get :: Pause s s
get = Pause (\s -> (Done s, s))

put :: s -> Pause s ()
put s = Pause (\_ -> (Done (), s))

yield :: Pause s ()
yield = Pause (\s -> (Suspend (return ()), s))

step :: Pause s () -> s -> (Maybe (Pause s ()), s)
step m s =
    case runPause m s of
        (Done _, s') -> (Nothing, s')
        (Suspend m', s') -> (Just m', s') 
```

该`Monad`实例只是以正常方式对事物进行排序，将最终结果传递给`k`延续，或者添加要在暂停时完成的其余计算。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-04-19T22:15:53.093

这就是我将如何去做，使用*免费*的单子。呃，嗯，他们是什么？它们是在节点处具有动作，在叶子处具有值的树，其`>>=`行为类似于树嫁接。

```
data f :^* x
  = Ret x
  | Do (f (f :^* x)) 
```

在数学中为这样的事情写 F ^* X并不罕见，因此我的胡思乱想中缀类型名称。要创建一个实例，您只需要`f`成为可以映射的对象：任何`Functor`人都可以。

```
instance Functor f => Monad ((:^*) f) where
  return = Ret
  Ret x  >>= k  = k x
  Do ffx >>= k  = Do (fmap (>>= k) ffx) 
```

那只是“`k`在所有的叶子上应用并嫁接在由此产生的树木中”。这些罐头树代表了交互计算的*策略*：整棵树覆盖了与环境的所有可能交互，环境选择树中的哪条路径。为什么他们是*免费*的？它们只是树，没有有趣的方程理论，说明哪些策略等同于其他策略。

现在让我们有一个工具包来制作对应于我们可能希望能够执行的一堆命令的 Functor。这东西

```
data (:>>:) s t x = s :? (t -> x)

instance Functor (s :>>: t) where
  fmap k (s :? f) = s :? (k . f) 
```

*捕获在一个*具有输入类型和输出类型的命令`x`之后获取值的想法。为此，您需要在 中选择一个输入并解释如何继续在给定命令输出中的值。要将函数映射到这样的事物上，请将其附加到延续上。到目前为止，标准设备。对于我们的问题，我们现在可以定义两个函子：*`s``t``s``x``t`*

 *```
type Modify s  = (s -> s) :>>: ()
type Yield     = () :>>: () 
```

就像我刚刚写下我们希望能够执行的命令的值类型一样！

现在让我们确保我们可以在这些命令之间提供*选择。*我们可以证明在函子之间进行选择会产生一个函子。更多标准设备。

```
data (:+:) f g x = L (f x) | R (g x)

instance (Functor f, Functor g) => Functor (f :+: g) where
  fmap k (L fx) = L (fmap k fx)
  fmap k (R gx) = R (fmap k gx) 
```

因此，`Modify s :+: Yield`代表修​​改和屈服之间的选择。任何简单命令的*签名*（根据值与世界通信，而不是操纵计算）都可以通过这种方式转换为函子。我必须手动完成，这很麻烦！

这给了我你的 monad：在 modify 和 yield 的签名上的自由 monad。

```
type Pause s = (:^*) (Modify s :+: Yield) 
```

我可以将 modify 和 yield 命令定义为 one-do-then-return。除了协商 的虚拟输入之外`yield`，这只是机械的。

```
mutate :: (s -> s) -> Pause s ()
mutate f = Do (L (f :? Ret))

yield :: Pause s ()
yield = Do (R (() :? Ret)) 
```

然后该`step`函数为策略树赋予意义。它是一个*控制运算符*，从另一个（可能）构造一个计算。

```
step :: s -> Pause s () -> (s, Maybe (Pause s ()))
step s (Ret ())            = (s, Nothing)
step s (Do (L (f  :? k)))  = step (f s) (k ())
step s (Do (R (() :? k)))  = (s, Just (k ())) 
```

该`step`函数运行该策略，直到它以 a 结束`Ret`，或者它产生，随着它的变化而改变状态。

一般的方法是这样的：将*命令*（根据值进行交互）与*控制运算符*（操纵计算）分开；在命令签名上构建“策略树”的自由单子（摇动手柄）；通过在策略树上递归来实现控制运算符。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-04-20T02:13:25.283

与您的类型签名不完全匹配，但肯定很简单：

```
{-# LANGUAGE FlexibleInstances, MultiParamTypeClasses, UndecidableInstances #-}
import Control.Monad.State

newtype ContinuableT m a = Continuable { runContinuable :: m (Either a (ContinuableT m a)) }
instance Monad m => Monad (ContinuableT m) where
    return = Continuable . return . Left
    Continuable m >>= f = Continuable $ do
        v <- m
        case v of
            Left  a -> runContinuable (f a)
            Right b -> return (Right (b >>= f))

instance MonadTrans ContinuableT where
    lift m = Continuable (liftM Left m)

instance MonadState s m => MonadState s (ContinuableT m) where
    get = lift get
    put = lift . put

yield :: Monad m => ContinuableT m a -> ContinuableT m a
yield = Continuable . return . Right

step :: ContinuableT (State s) a -> s -> (Either a (ContinuableT (State s) a), s)
step = runState . runContinuable

-- mutate unnecessary, just use modify 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-04-19T21:50:39.467

```
{-# LANGUAGE TupleSections #-}
newtype Pause s x = Pause (s -> (s, Either x (Pause s x)))

instance Monad (Pause s) where
  return x = Pause (, Left x)

  Pause k >>= f = Pause $ \s -> let (s', v) = k s in
                                case v of
                                  Left x -> step (f x) s'
                                  Right x -> (s', Right (x >>= f))

mutate :: (s -> s) -> Pause s ()
mutate f = Pause (\s -> (f s, Left ()))

yield :: Pause s ()
yield = Pause (, Right (return ()))

step :: Pause s x -> s -> (s, Either x (Pause s x))
step (Pause x) = x 
```

我就是这样写的。我给出了`step`一个更笼统的定义，它也可以命名为`runPause`. 事实上，考虑类型`step`导致我定义`Pause`.

在[monad-coroutine](http://hackage.haskell.org/package/monad-coroutine)包中，你会找到一个通用的 monad 转换器。`Pause s`monad与`Coroutine (State s) Id`. 您可以将协程与其他 monad 结合使用。

相关：[http ://themonadreader.files.wordpress.com/2010/01/issue15.pdf 中的 Prompt monad](http://themonadreader.files.wordpress.com/2010/01/issue15.pdf)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-08-31T13:06:31.120

注意：此答案[可](https://gist.github.com/3552390)作为 Gist 的读写 Haskell 文件获得。

我非常喜欢这个练习。我试图在不看答案的情况下做到这一点，这是值得的。我花了相当长的时间，但结果出乎意料地接近其他两个答案，以及[monad-coroutine](http://hackage.haskell.org/package/monad-coroutine)库。所以我想这是这个问题的自然解决方案。如果没有这个练习，我将无法理解*monad-coroutine 的*真正工作原理。

为了增加一些额外的价值，我将解释最终导致我找到解决方案的步骤。

**认识状态单子**

由于我们正在处理状态，因此我们寻找可以由状态单子有效描述的模式。特别`s - s`是 与 同构`s -> (s, ())`，因此可以将其替换为`State s ()`。并且函数类型`s -> x -> (s, y)`可以翻转到`x -> (s -> (s, y))`，其实就是`x -> State s y`。这导致我们更新签名

```
mutate :: State s () -    Pause s ()
step   :: Pause s () -    State s (Maybe (Pause s ())) 
```

**概括**

我们的`Pause`monad 目前由状态参数化。然而，现在我们看到我们并不真正需要状态来做任何事情，也没有使用状态单子的任何细节。所以我们可以尝试制作一个由任何 monad 参数化的更通用的解决方案：

```
mutate :: (Monad m) =    m () -> Pause m ()
yield  :: (Monad m) =    Pause m ()
step   :: (Monad m) =    Pause m () -> m (Maybe (Pause m ())) 
```

此外，我们可以尝试通过允许任何类型的值来制作`mutate`更`step`通用的值，而不仅仅是`()`. 通过意识到这`Maybe a`是同构的，`Either a ()`我们最终可以将我们的签名推广到

```
mutate :: (Monad m) =    m a -> Pause m a
yield  :: (Monad m) =    Pause m ()
step   :: (Monad m) =    Pause m a -> m (Either (Pause m a) a) 
```

以便`step`返回计算的中间值。

**单子变压器**

现在，我们看到我们实际上是在尝试从一个 monad 中创建一个 monad——添加一些额外的功能。这就是通常所说的[monad 转换](https://en.wikibooks.org/wiki/Haskell/Monad_transformers)器。此外，的签名与[lift](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-Class.html#v%3alift) from`mutate`完全相同。最有可能的是，我们走在正确的轨道上。`MonadTrans`

**最后的单子**

该`step`函数似乎是我们 monad 中最重要的部分，它定义了我们需要什么。也许，这可能是新的数据结构？我们试试看：

```
import Control.Monad
import Control.Monad.Cont
import Control.Monad.State
import Control.Monad.Trans

data Pause m a
    = Pause { step :: m (Either (Pause m a) a) } 
```

如果该`Either`部分是`Right`，它只是一个单子值，没有任何暂停。这引导我们如何实现最简单的事情 -`lift` 函数来自`MonadTrans`：

```
instance MonadTrans Pause where
    lift k = Pause (liftM Right k) 
```

并且`mutate`只是一个专业：

```
mutate :: (Monad m) => m () -> Pause m ()
mutate = lift 
```

如果该`Either`部分是`Left`，则表示暂停后继续计算。所以让我们为此创建一个函数：

```
suspend :: (Monad m) => Pause m a -> Pause m a
suspend = Pause . return . Left 
```

现在`yield`计算很简单，我们只需挂起一个空计算：

```
yield :: (Monad m) => Pause m ()
yield = suspend (return ()) 
```

尽管如此，我们还是错过了最重要的部分。`Monad`实例。让我们修复它。实现`return`很简单，我们只需要提升内部 monad。实现`>>=`有点棘手。如果原始`Pause`值只是一个简单的值 ( `Right y`)，那么我们只需将其包装`f y`为结果。如果它是一个可以继续的暂停计算（`Left p`），我们递归地进入它。

```
instance (Monad m) => Monad (Pause m) where
    return x = lift (return x) -- Pause (return (Right x))
    (Pause s) >>= f
        = Pause $ s >>= \x -> case x of
            Right y     -> step (f y)
            Left p      -> return (Left (p >>= f)) 
```

**测试**

让我们尝试创建一些使用和更新状态的模型函数，在计算中产生：

```
test1 :: Int -> Pause (State Int) Int
test1 y = do
            x <- lift get
            lift $ put (x * 2)
            yield
            return (y + x) 
```

还有一个调试 monad 的辅助函数 - 将其中间步骤打印到控制台：

```
debug :: Show s => s -> Pause (State s) a -> IO (s, a)
debug s p = case runState (step p) s of
                (Left next, s')     ->  print s' >> debug s' next
                (Right r, s')       ->  return (s', r)    

main :: IO ()
main = do
    debug 1000 (test1 1 >>= test1 >>= test1) >>= print 
```

结果是

```
2000
4000
8000
(8000,7001) 
```

正如预期的那样。

**协程和 monad-*协程***

我们实现的是一个非常通用的单子解决方案，它实现[了 Coroutines](https://en.wikipedia.org/wiki/Coroutine)。也许并不奇怪，之前有人有这个想法:-)，并创建了[monad-coroutine](http://hackage.haskell.org/package/monad-coroutine)包。不那么令人惊讶的是，它与我们创建的非常相似。

该软件包进一步概括了这个想法。继续计算存储在任意函子中。这允许[挂起](http://hackage.haskell.org/packages/archive/monad-coroutine/0.7.1/doc/html/Control-Monad-Coroutine.html#v%3asuspend)许多变体如何处理挂起的计算。例如，将[值传递给](http://hackage.haskell.org/packages/archive/monad-coroutine/0.7.1/doc/html/Control-Monad-Coroutine-SuspensionFunctors.html#v%3ayield)[resume](http://hackage.haskell.org/packages/archive/monad-coroutine/0.7.1/doc/html/Control-Monad-Coroutine.html#v%3aresume)的调用者（我们称之为`step`），或者[等待提供的值](http://hackage.haskell.org/packages/archive/monad-coroutine/0.7.1/doc/html/Control-Monad-Coroutine-SuspensionFunctors.html#v%3aawait)继续，等等。*

# jquery - 验证文本框但回发重置隐藏字段？

> ID：10236958
> 
> 赞同：0
> 
> 时间：2012-04-19T21:20:30.987
> 
> 标签：jquery, asp.net

我有一个 asp.net 按钮：

```
 <asp:Button ID="MainContent_ibSave" runat="server" Text="Save" />
                </td> 
```

我需要保留它，`runat=server`因为单击它时我必须处理一些代码。但是在jquery中我有这个：

```
 $("#MainContent_ibSave").click(function () {
            if ($('#MainContent_txtShipToName').val().length == 0) {
                $('#hErrorsExist').val("1");
                $('#error').show();
            }
            else {
                $('#hErrorsExist').val("0");
                $('#error').hide();
            } 
```

基本上我在这里所做的只是检查是否在#MainContent_txtShipToName 中输入了任何文本。如果没有输入任何内容，我想抛出错误消息。为此，我想我会添加一个隐藏字段：

```
<input id="hErrorsExist" type="hidden" /> 
```

维护页面上是否存在错误的状态。因此，如果表单上存在错误，我可以将值设置为 1，否则我将其设置为 0。

单击此按钮后，它将值设置为 1 显示#error（这只是一个 div），但随后 div 消失了。就好像回发已经重置了 hErrorsExist 的值......

我什至在我的 jquery 中添加了一个检查：

```
 if ($('#hErrorsExist').val() == "0" || $('#hErrorsExist').val().length == 0) {
            alert("about to hide");
            $('#error').hide();
            alert($('#hErrorsExist').val());
        }
        else {
            $('#error').show();
            alert($('#hErrorsExist').val());
        } 
```

这是我的文档准备功能中的第一件事。我不知道如何处理这个问题，以便即使在按钮回发后 div #error 也会保持不变。如果我确实输入了一个值并且它验证了它应该将 hErrorsExist 设置为 0 并隐藏 div #error 并在回发后保持 div 隐藏。

**这是完整的jquery：**

```
 $(document).ready(function () {
        /*hide message container on top*/
        //alert($('#hErrorsExist').val().length);
        if ($('#hErrorsExist').val() == "0" || $('#hErrorsExist').val().length == 0) {
            alert("about to hide");
            $('#error').hide();
            alert($('#hErrorsExist').val());
        }
        else {
            $('#error').show();
            alert($('#hErrorsExist').val());
        }

          $("#MainContent_ibSave").click(function () {
            if ($('#MainContent_txtShipToName').val().length == 0) {
                $('#hErrorsExist').val("1");
                alert("Setting to 1");
                alert($('#hErrorsExist').val());
                $('#error').show();
            }
            else {
                $('#hErrorsExist').val("0");
                alert("Setting to 0");
                alert($('#hErrorsExist').val());
                $('#error').hide();
            }
        });
          }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:26:08.307

你试过这个吗？

```
$("#<%= MainContent_ibSave.ClientID %>").click(function (arg) {
   arg.preventDefault();
   if ($('#MainContent_txtShipToName').val().length == 0) {
       $('#hErrorsExist').val("1");
       $('#error').show();
   }
   else {
       $('#hErrorsExist').val("0");
       $('#error').hide();
   }
}); 
```

# android - Android 文件 I/O

> ID：10236961
> 
> 赞同：0
> 
> 时间：2012-04-19T21:20:39.040
> 
> 标签：android, file, serialization

我希望我的应用程序在会话之间将来自 ArrayList 的数据保存在文件中。我使用的类实现了可序列化。当我调试时，保存似乎没问题，没有抛出异常，并且通过循环正确的次数。加载只加载一些条目，然后抛出 EOF 异常。代码在这里：

```
public int saveChildren(Context context){
    FileOutputStream fos;
    ObjectOutputStream os;
    try {
        fos = context.openFileOutput(filename, Context.MODE_PRIVATE);
        os = new ObjectOutputStream(fos);
        for(Child c : children){
            os.writeObject(c);
        }
        os.close();
    }
    catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return 1;
    }
    catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return 2;
    }
    return 0;
} 
```

* * *

```
public void loadChildren(Context context){

    FileInputStream fis;
    try {
        fis = context.openFileInput(filename);
        ObjectInputStream is;
        is = new ObjectInputStream(fis);
        while(is.readObject() != null){
            Child c = (Child) is.readObject();
            boolean skip = false;
            for(Child ch: children){
                if(ch.getName().equals(c.getName())){ 
                    skip = true;
                }
                if(ch.getNr().equals(c.getNr())){ 
                    skip = true;
                }
                if(ch.getImei() != null){
                    if(ch.getImei().equals(c.getImei())){
                        skip = true;
                    }
                }
            }
            if(!skip){
                children.add(c);
            }
        }
        is.close();
    }catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }catch (StreamCorruptedException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }catch (OptionalDataException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

是什么导致错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:27:55.090

您可以直接将子对象写入 ObjectOutputStream。ArrayList 实现可序列化。您可能想要做的第二件事是在使用 os.flush() 关闭流之前刷新流。你将会有：

```
os = new ObjectOutputStream(fos);    
os.writeObject(children);    
os.flush();
os.close(); 
```

和阅读：

```
is = new ObjectInputStream(fis);
ArrayList<Child> children = (ArrayList<Child>)is.readObject();
is.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:29:02.477

您正在使用`ObjectInputStream#readObject()`返回`null`作为循环的退出条件。`#readObject()`可以返回`null`- 如果您已序列化 a `null`- 但是如果由于您已到达流的末尾而无法读取对象，它将引发异常。

为了快速简便的解决方法：考虑在序列化子元素之前将数组的长度序列化为整数并使用 for 循环或类似结构来读取值 - 或序列化`ArrayList`自身。它也是`Serializable`。

# utf-8 - utf-8 编码的 .mo 文件不适用于 linux 服务器中的重读单词

> ID：10236963
> 
> 赞同：1
> 
> 时间：2012-04-19T21:20:47.747
> 
> 标签：utf-8, character-encoding, translation, poedit, mo

我正在翻译网站，一切正常，但是当我将文件放在在线服务器（linux）中时，翻译工作正常，但西班牙语中的重音字母看起来像这样 - 有人知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:16:49.317

如果您使用的是 PHP，您可能需要添加[bind_textdomain_codeset](http://uk.php.net/manual/en/function.bind-textdomain-codeset.php)函数来告诉系统您的 mo 文件正在返回 UTF-8（或您在 PO 文件中指定的任何内容）。所以像这样的东西应该是诀窍：

```
$language = 'de_DE';
bindtextdomain($language, APP_ROOT.'locale'); // Define domain
textdomain($language); // Choose domain, translation is looking for in locale/de_DE/LC_MESSAGES/de_DE.mo now
bind_textdomain_codeset($language, 'UTF-8'); // Tell the system out MO files will return UTF8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:00:21.090

看起来像……在哪里？如果它在网页中，您需要确保翻译与 HTML 的其余部分使用相同的字符集，并且该字符集在顶部正确注明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:55:24.273

看来我也有同样的问题。无法解析 � 符号。

我在 html (utf-8) 的顶部正确设置了字符集，并且 .po 文件也在 utf-8 中。我尝试了 bind_textdomain_codeset 命令，但没有奏效。

服务器是linux。

[ 解决 ]

添加这一行： bind_textdomain_codeset("default", "utf-8");

注意默认而不是语言域。想知道为什么..

# java - 检查 if 语句时出错

> ID：10236964
> 
> 赞同：3
> 
> 时间：2012-04-19T21:20:53.380
> 
> 标签：java

我正在通过扩展我最近写的一个家庭作业项目来做一些练习工作。这不是为了成绩，但我想在我的代码中添加一些错误检查。

该程序要求您输入名称，从下拉列表中选择，从列表框中选择并选择单选按钮。我的目标是在任何必填项为空白时填充错误消息框。

到目前为止我用于错误检查的代码如下，但我不确定如何获取单个缺少的项目并将其填充到消息框，因为所有错误检查都在一个“if”语句中。

错误检查代码：

```
// Listener to handle the print button.
class ButtonListener implements ActionListener
{
    ButtonListener() {}

    public void actionPerformed(ActionEvent e)
    {
        JFrame frame1 = new JFrame("Show Message Dialog");

        // Checks for required entries
        if (error == 0 || name == "" || flag == 0)
        {
            JOptionPane.showMessageDialog(frame1,
                    "You must complete the form: " +     missing, "ERROR",
                JOptionPane.ERROR_MESSAGE);
        }
        else
        {
            // Get values from fields
            setText();
            System.out.println("Passenger's Name: " + name + "\n");
            System.out.println("Age Group: " + ageValue + "\n");
            for (int i = 0; i < value.length; i++)
            {
                System.out.println("Destination: " + value[i]   + "\n");
            }
            System.out.println("Departure Day: " + day  + "\n");
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:30:50.060

看起来他们实际上可能有多个错误，那么为什么只显示一个呢？我通常是 C# 开发人员，所以我不会在自己键入时尝试正确使用语法，但这是概念：

*   创建某种集合，例如字符串列表。
*   制作 3 个 if 语句，每个错误一个，并为每个失败的一个输入字段名称。`if (name.isEmpty()) { errorList.Add("name"); }`
*   检查列表中的项目数是否大于 0。如果是抛出错误并将集合中的错误字段的名称放入您生成的字符串中。

# c# - C# Winforms Keys.Right 显示等于单引号？

> ID：10236969
> 
> 赞同：1
> 
> 时间：2012-04-19T21:21:31.470
> 
> 标签：c#, winforms

我试图阻止用户在按键事件中输入单引号。似乎是一件足够简单的事情。我只需要使用 KeyChar。当我转换为 char 并与 Keys.Right （右箭头）进行比较时，由于某些奇怪的原因，单引号是匹配的。我对此感到困惑。知道为什么单引号会匹配右箭头吗？我看到的所有示例都只使用相同的转换来与键进行比较。

```
Func<char, bool> IsEditingKey = k =>
            {
                if (k == (char)Keys.Left || k == (char)Keys.Right || k == (char)Keys.Delete || k == (char)Keys.Back)
                {
                    return true;
                }

               return false;
           }; 
```

如果我传入一个单引号 (')，当 k == (char)Keys.Right 的测试发生时，它返回 true。我现在可能是一个演员问题，但我还能如何比较以确保它确实是正确的箭头而不是单引号（'）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:25:24.547

使用它从转换`Keys`为`char`：

```
KeysConverter kc = new KeysConverter();
char c = Convert.ToChar(kc.ConvertToString(Keys.Left)))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T21:44:22.370

您正在将字符与虚拟键混合。不是一回事。Keys.Right 的值为 0x27。 `'\''`也是0x27。一个是枚举，另一个是char。

您需要使用正确的事件来区分两者。KeyDown 事件为您提供虚拟键。KeyPress 事件为您提供键入字符，该字符是在虚拟键由用户首选的键盘布局转换后产生的。由于您只对字符感兴趣，而不对虚拟键感兴趣，因此您必须使用 KeyPress。设置 e.Handled = true 以抑制它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:38:06.097

尝试使用 KeyDown 事件，而不是 KeyPress 事件。这使用了您正在寻找的 KeyEventArgs。

```
textBox1.KeyDown += new KeyEventHandler(textBox1_KeyDown);

void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
      if (e.KeyCode == Keys.Right)
      {
        //Do Something
      }
    } 
```

# python - Python telnetlib 确定不同的登录提示

> ID：10236972
> 
> 赞同：1
> 
> 时间：2012-04-19T21:21:43.300
> 
> 标签：python, telnetlib

我编写了一个 python 脚本，可以通过读取列出不同 IP 地址的 csv 文件顺序登录到多个设备。从那里它为每个设备输出一个文件，其中包含通过脚本传递给设备的一些命令的内容。所以我已经走了很远。我遇到的一个问题是有时脚本会挂起。这是因为某些设备具有不同的软件版本，并且不支持传递给它们的某些命令。我关注的区别是登录后的提示。例如，登录到设备类型A有一个xyz#的命令提示符。设备类型 B 有一个命令类型 abc:。它是同一家制造商，只是型号和/或软件版本不同。根据命令提示符，我知道可以在该设备上运行的命令，而无需挂起脚本。

如果有帮助，我可以发布我的一些代码，但我真正想知道的是这是否可能。如果是这样，那么指针。关于我可能会尝试的一些建议。在使用 Python 几个月后，我知道必须有办法做到这一点。我通常不发帖，因为我可以处理其他人的帖子并制定可行的解决方案。但是我一直在努力解决这个问题，但无法将它拼凑起来，所以我正在寻求帮助。

-谢恩

编辑

在这一点上，我仍然无法编写代码来确定命令提示符。好吧，至少在 telnet 会话启动时。我可以远程登录，运行一些命令并关闭会话。然后我可以将结果写入文件。并从那里读取文件以确定提示。但理想情况下，我希望能够打开一个 telnet 会话，在会话仍然打开时运行命令来确定提示，在会话启动时读取它，然后根据提示运行特定命令。

问题似乎在于 telnet 会话仍在运行时无法读取任何命令输出。会话必须关闭，然后将所有输出写入文件。然后读取该文件以确定命令提示符，根据提示符确定要运行哪些命令，然后打开一个新的 telnet 会话并运行这些命令。

我是否应该接受我必须关闭 telnet 会话、将数据写入文件、读取它以确定提示然后再次循环返回脚本的登录部分的事实？还是我错过了什么？不确定我的描述是否清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:02:41.460

我将使用一个通用接口实现这些命令，然后在我知道我连接到哪个系统时使用字典来检索它们：

```
# command set for system xyz#
def copy1(src, dest):
  pass

def list1():
  pass

# command set for system abc:
def copy2(src, dest):
  pass

def list2():
  pass

cmdDict = {
   # prompt  command set
   'xyz#':   [copy1, list1],
   'abc:'    [copy2, list2],
}

...

# guess the right commands from the prompt we have read
copyCommand = cmdDict[detected_prompt][0]
listCommand = cmdDict[detected_prompt][1]

...

# proceed normally

listCommand()
copyCommand(f1, g1)
copyCommand(f2, g2) 
```

# php - CI 中 form_dropdown() 的正确用法

> ID：10236975
> 
> 赞同：0
> 
> 时间：2012-04-19T21:21:49.667
> 
> 标签：php, codeigniter

我试图弄清楚为什么禁用的属性没有被应用到我的下拉列表中。据我所知，我已将正确的属性应用于 form_dropdown 函数。

```
<?php if (in_array('No Wrestlers In Database', $allies)) {
$attributes = array('disabled' => 'disabled');
    echo form_dropdown( 'ally1', $allies, $attributes);
}
else {
    echo form_dropdown( 'ally1', $allies, $alliesList->ally1ID);
} ?> 
```

呈现的 HTML：

```
<select name="ally1">
    <option value="0">No Wrestlers In Database</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:31:48.873

根据[文档](http://codeigniter.com/user_guide/helpers/form_helper.html)，第三个参数是默认选定项目的字符串，第四个是属性字符串，而不是数组。

```
echo form_dropdown('ally1', $allies, 'default', 'disabled="disabled"'); 
```

# jquery - 无法将高度设置为百分比

> ID：10236984
> 
> 赞同：2
> 
> 时间：2012-04-19T21:22:15.167
> 
> 标签：jquery, css, jquery-mobile

我正在尝试使用以下 CSS 修改页脚的高度。如果我使用像素设置高度，它将调整为正确的像素数量（例如高度：100px；）。如下设置百分比值似乎不起作用。我只想将页脚设置为整个屏幕高度的百分比高度，以适应不同的屏幕高度。有没有办法做到这一点？

这是我正在使用的代码: :

```
.ui-page .ui-footer .ui-navbar a {
    height : 60%;
}

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="/view" data-role="tab" data-icon="grid">View</a></li>
                    <li><a href="/add" data-role="tab" data-icon="grid"
                        class="ui-btn-active">Add</a></li>
                    <li><a href="/edit" data-role="tab" data-icon="grid">Edit</a></li>
                </ul>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:26:09.717

你需要先设置

```
html, body {
    height: 100%;
} 
```

这将允许您在任何直接子元素上设置百分比高度`body`。

[http://jsfiddle.net/mblase75/w7mMZ/](http://jsfiddle.net/mblase75/w7mMZ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:37:20.860

这是你的 jQuery Mobile 特定答案。

如果你想改变页脚的高度，那么我建议用你的 CSS 来定位页脚，而不是定位到页脚的一些后代元素：

```
​.ui-mobile .ui-page .ui-footer {
    height : 30%;
}​ 
```

这是一个演示： http: [//jsfiddle.net/csKtX/1/](http://jsfiddle.net/csKtX/1/)（请务必查看下面的**更新**）

*   `.ui-mobile`在 jQuery Mobile 初始化时应用于 HTML 元素。
*   `.ui-page`应用于任何初始化的伪页面。
*   `.ui-footer`应用于任何初始化的页脚

# 更新

我将您的页脚代码粘贴到我的 JSFiddle 中，并发现该`navbar`小部件没有占用其容器的高度（无论如何很可能是您的初始问题......）。这是 jQuery Mobile 1.1.0 的修复：

```
.ui-mobile .ui-page .ui-footer > div,/*navbar container*/
.ui-mobile .ui-page .ui-footer ul,/*list-item container*/
.ui-mobile .ui-page .ui-footer ul li,/*list-items*/
.ui-mobile .ui-page .ui-footer ul li a/*individual buttons*/ {
    height : 100%;
}​ 
```

这会将`100%`高度应用于页脚中的所有必要元素，因此所有后代元素都可能占据所有可用空间。

和新的演示：http: [//jsfiddle.net/csKtX/2/](http://jsfiddle.net/csKtX/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:28:31.830

添加**display: block**属性，也许这可以帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T21:28:35.873

它是否可能不适用于锚元素`<a>`，因为您似乎在引用它，我的建议是制作 a`<div>`并将其设置为正确的高度。

我希望这有帮助..

# c# - 微软 Surface 与 Windows 触控？

> ID：10236986
> 
> 赞同：3
> 
> 时间：2012-04-19T21:22:17.153
> 
> 标签：c#, .net, multi-touch, pixelsense

.Net 4.0 中的 Microsoft Surface 2.0 和 Windows 触摸事件有什么区别？
这两个平台是平行的还是一个建立在另一个之上？

Windows 触摸事件和表面触摸事件不是同一个事件吗？
求助，我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:42:57.123

Microsoft Surface 是一款产品[http://www.microsoft.com/surface/en/us/whatissurface.aspx](http://www.microsoft.com/surface/en/us/whatissurface.aspx)

Windows Touch 是 Windows 操作系统监听触摸事件的能力[http://windows.microsoft.com/en-US/windows7/products/features/touch](http://windows.microsoft.com/en-US/windows7/products/features/touch)

WPF 能够处理触摸事件[http://msdn.microsoft.com/en-us/library/ms754010.aspx](http://msdn.microsoft.com/en-us/library/ms754010.aspx)

因此，如果您有支持触摸的硬件运行支持触摸的 Windows 版本，则可以运行处理触摸事件的 WPF 应用程序。（有点简化，但这是基本思想）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:26:08.897

据我了解，“Surface”平台是建立在触摸事件之上的。例如，您可以自己编写用于触摸交互的标准 WPF 组件，因为通常 .NET 组件的子集支持触摸事件。或者，您可以改用 Surface 控件，它们通常在处理诸如拖动、捏合等交互方面为您完成了大量工作。

触摸是从用户 POV 获得正确的一种棘手机制，因此如果您想在此领域开始，我会说从已经可用的 Surface 库开始。

# javascript - javascript 超出范围

> ID：10236989
> 
> 赞同：1
> 
> 时间：2012-04-19T21:22:38.400
> 
> 标签：javascript, scope

基于 chrome 开发人员工具的断点，我想我正在处理一个我可以弄清楚的范围问题。是我定义函数的方式吗？下面的脚本是一个包含 js 文件和我希望在其他函数中使用的数组 timeStamp，而不必每次都调用我的 loadData 函数。

一旦它离开 for 循环，甚至在离开函数之前，timeStamp 数组就会变得未定义。

```
var timeStamp = [];  // Want this array to be global

function loadData (url){

        $.getJSON(url, function(json) {

            for (var i=0;i<json.length;i++){
                    timeStamp.push(json[i].TimeStamp);  
                }
                    console.log(inputBITS); //returns the value
            });
        console.log(inputBITS); //undefined
        } 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T21:25:14.063

看起来问题`getJSON`是异步的。当它执行并完成并且您的代码继续运行时，它仅指示网络操作的开始以检索数据。实际的联网操作要等一段时间后才能完成。

当它完成时，将调用成功处理程序（作为调用的第二个参数指定`getJSON()`）并填充`timeStamp`数组。只有在调用成功处理程序之后，`timeStamp`数组才有效。

因此，您不能`timeStamp`在紧随`getJSON()`调用之后的代码中使用该数组（它尚未被填充）。如果其他代码需要该`timeStamp`数组，您应该从成功处理程序中调用该代码或使用其他一些计时机制来确保使用该数组的代码在调用成功处理程序并且该数组`timeStamp`之前不会尝试使用它`timeStamp`已被填充。

可以使一些 Ajax 调用同步而不是异步，但这通常是一个非常糟糕的主意，因为它会在整个网络操作期间锁定浏览器，这对查看者非常不友好。修复编码逻辑以与异步网络一起工作要好得多。

像这样的 ajax 调用的典型设计模式如下：

```
function loadData (url){

    $.getJSON(url, function(json) {
        // this will execute AFTER the ajax networking finishes
        var timeStamp = [];
        for (var i=0;i<json.length;i++) {
                timeStamp.push(json[i].TimeStamp);  
        }
        console.log(timeStamp);
        // now call other functions that need timeStamp data
        myOtherFunc(timeStamp);
     });
     // this will execute when the ajax networking has just been started
     //
     // timeStamp data is NOT valid here because 
     // the ajax call has not yet completed
     // You can only use the ajax data inside the success handler function
     // or in any functions that you call from there
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:25:32.860

~~还有一个不懂基本 AJAX 的人……~~

`getJSON`是***异步***的。意思是，代码在函数调用之后和 JSON 请求成功返回之前一直运行。

您可以通过强制请求与适当的标志同步来“修复”此问题，但由于许多原因，这是一个非常糟糕的主意（其中至少是您违反了**A** �JAX 的基本思想）。最好的方法是记住 AJAX 是如何工作的，而是将所有应该在 AJAX 返回时执行的代码放在正确的位置。

# c# - 在 Windows 8 Metro 中编写自定义控件

> ID：10236990
> 
> 赞同：0
> 
> 时间：2012-04-19T21:22:58.073
> 
> 标签：c#, xaml, windows-8, windows-runtime, custom-controls

我正在编写针对 WinRT 的第一个自定义用户控件，但遇到了问题。

我想在我的控件中公开一个图像 PART_NwBadge 和它作为依赖属性的可见性。然后我想通过样式中的设置器提供默认值。这部分不起作用。而是应用 DependencyProperty（在 BadgedButton.cs 中）的默认值。

甚至可以做我所描述的吗？还是应该在 C# 代码中设置默认值？如果我确实需要在 C# 代码中设置值，有人会评论如何在代码中加载图像资源吗？经过大量搜索，我还没有找到可行的解决方案。

最后，由于这是我第一次认真尝试编写自定义控件，请提出我可以做出的任何改进，即使它们与问题没有直接关系。

Windows 8 Consumer Preview
C#/WinRT/Metro
Visual Studio 11 Beta

**主题/Generic.xaml**

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:l="using:InkSdkTestApplication.Controls">

    <Style TargetType="l:BadgedButton">
        <Setter Property="Width" Value="36"/>
        <Setter Property="Height" Value="36"/>
        <Setter Property="Background" Value="#1C1C1C"/>
        <Setter Property="BorderBrush" Value="White"/>
        <Setter Property="BorderThickness" Value="2"/>
        <Setter Property="NwBadge">
            <Setter.Value>
                <Image Width="16" Height="16" Source="../Assets/mouse_16x16.png"/>            
            </Setter.Value>
        </Setter>
        <Setter Property="NwBadgeVisibility" Value="Collapsed"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="l:BadgedButton">
                    <Border x:Name="PART_Border"
                            Width="{TemplateBinding Width}"
                            Height="{TemplateBinding Height}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">

                        <Grid>
                            <ContentPresenter x:Name="PART_Content"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Content="{TemplateBinding Content}"/>

                            <Image x:Name="PART_NwBadge"
                                   HorizontalAlignment="Left"
                                   VerticalAlignment="Top"
                                   Width="16" Height="16"
                                   Visibility="{TemplateBinding NwBadgeVisibility}"
                                   Source="{TemplateBinding NwBadge}"/>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

**控件/BadgedButton.cs**

```
namespace InkSdkTestApplication.Controls
{
    public sealed class BadgedButton : Control
    {
        #region // Dependency Properties
        public static DependencyProperty ContentProperty =
            DependencyProperty.Register(
                "Content",
                typeof(FrameworkElement),
                typeof(BadgedButton),
                new PropertyMetadata(null));

        public static DependencyProperty NwBadgeProperty =
            DependencyProperty.Register(
                "NwBadge",
                typeof(Image),
                typeof(BadgedButton),
                new PropertyMetadata(null));

        public static DependencyProperty NwBadgeVisibilityProperty =
            DependencyProperty.Register(
                "NwBadgeVisibility",
                typeof(Visibility),
                typeof(BadgedButton),
                new PropertyMetadata(Visibility.Visible));
        #endregion

        #region // Public Properties
        public FrameworkElement Content
        {
            get { return (FrameworkElement)GetValue(ContentProperty); }
            set { SetValue(ContentProperty, value); }
        }

        public Image NwBadge
        {
            get { return (Image)GetValue(NwBadgeProperty); }
            set { SetValue(NwBadgeProperty, value); }
        }

        public Visibility NwBadgeVisibility
        {
            get { return (Visibility)GetValue(NwBadgeVisibilityProperty); }
            set { SetValue(NwBadgeVisibilityProperty, value); }
        }
        #endregion

        public BadgedButton()
        {
            this.DefaultStyleKey = typeof(BadgedButton);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:52:37.910

[http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx](http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx)

# windows - windows上的vncviewer连接到linux盒子

> ID：10236994
> 
> 赞同：0
> 
> 时间：2012-04-19T21:23:16.277
> 
> 标签：windows, firefox, vnc-viewer

我刚开始使用 vncviewer，但在客户端调整窗口大小时遇到​​问题。例如，firefox 默认为一个小窗口，我无法调整它的大小。我尝试了以下方法。首先服务器启动：

```
vncserver :6 -geometry 1024x768 & 
```

1.  对于 xterms 这可行，但字体太小，我无法更改：

    ```
    xterm -geometry 160x50 
    ```

2.  对于 Firefox，这不起作用：

    ```
    firefox -height xx -width yy 
    ```

    窗口仍然太小并且锚定在顶部/左侧

那么，如何让firefox变大呢？

谢谢，保罗。

**更新：**

特定的 linux 机器似乎安装了一个非常简单的系统，并且缺少很多实用程序，所以我只是尝试了一些不同的东西，这适用于 Firefox：

firefox - 安全模式

我不确定是什么导致了问题，但在安全模式下，浏览器窗口非常接近全屏，所以这对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:41:21.397

因为`xterm`您还想看看这个`-fn`选项。在运行`xterm`中，您还可以使用`Ctrl`加鼠标右键来获取字体菜单。

Firefox 似乎没有打扰任何有用的选项。事后您也许可以使用[wmctrl](http://tomas.styblo.name/wmctrl/)之类的东西。

# java - 如何使我的 SwingWorker 示例正常工作？

> ID：10236995
> 
> 赞同：16
> 
> 时间：2012-04-19T21:23:16.467
> 
> 标签：java, swing, jdialog, swingworker

我制作了自己的 SwingWorker 示例来熟悉它的工作原理。

我想要做的是以下内容：单击按钮时，我希望出现一个进度条，直到任务完成我想简单地删除进度条并向对话框添加一个字符串。

单击按钮时，进度条会出现但永远不会消失。（绝不会在 10 秒后移除进度条，也绝不会放上标签）

这是一个SSCCE：

```
package swingtesting;

import java.awt.event.ActionEvent; 
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JProgressBar;
import javax.swing.SwingWorker;

public class SwingTesting {

    /**
     * Creates a frame that will hold a simple button to make use of SwingWorker
     */
     public static void main(String[] args) {
         // TODO code application logic here
         JFrame frame = new JFrame();
         JButton button = new JButton();

         button.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                new GuiWorker().execute();
            }
         });
         button.setText("Test Me");
         frame.getContentPane().add(button);
         frame.pack();
         frame.setVisible(true);
    }
}

class GuiWorker extends SwingWorker<Integer, Integer> {

    /*
     * This should just create a frame that will hold a progress bar until the
     * work is done. Once done, it should remove the progress bar from the dialog
     * and add a label saying the task complete.
     */

    private JFrame frame = new JFrame();
    private JDialog dialog = new JDialog(frame, "Swingworker test", true);
    private JProgressBar progressBar = new JProgressBar();

    public GuiWorker() {
        progressBar.setString("Waiting on time");
        progressBar.setStringPainted(true);
        progressBar.setIndeterminate(true);
        dialog.getContentPane().add(progressBar);
        dialog.pack();
        dialog.setVisible(true);
    }

    @Override
    protected Integer doInBackground() throws Exception {
        Thread.sleep(10000);
        return 0;
    }

    @Override
    protected void done() {
        JLabel label = new JLabel("Task Complete");
        dialog.getContentPane().remove(progressBar);
        dialog.getContentPane().add(label);
    }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T21:40:15.723

这是您的代码的更新版本，它可以工作

```
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JProgressBar;
import javax.swing.SwingWorker;

public class SwingTesting {

  public static void main(String[] args) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame frame = new JFrame();
        JButton button = new JButton();
        button.addActionListener(new ActionListener() {
          @Override
          public void actionPerformed(ActionEvent e) {
            new GuiWorker().execute();
          }
        });
        button.setText("Test Me");
        frame.getContentPane().add(button);
        frame.pack();
        frame.setVisible(true);
      }
    } );

  }
}

class GuiWorker extends SwingWorker<Integer, Integer> {

  /*
  * This should just create a frame that will hold a progress bar until the
  * work is done. Once done, it should remove the progress bar from the dialog
  * and add a label saying the task complete.
  */

  private JFrame frame = new JFrame();
  private JDialog dialog = new JDialog(frame, "Swingworker test", true);
  private JProgressBar progressBar = new JProgressBar();

  public GuiWorker() {
    progressBar.setString("Waiting on time");
    progressBar.setStringPainted(true);
    progressBar.setIndeterminate(true);
    dialog.getContentPane().add(progressBar);
    dialog.pack();
    dialog.setModal( false );
    dialog.setVisible(true);
  }

  @Override
  protected Integer doInBackground() throws Exception {
    System.out.println( "GuiWorker.doInBackground" );
    Thread.sleep(1000);
    return 0;
  }

  @Override
  protected void done() {
    System.out.println("done");
    JLabel label = new JLabel("Task Complete");
    dialog.getContentPane().remove(progressBar);
    dialog.getContentPane().add(label);
    dialog.getContentPane().validate();
  }

} 
```

关键是设置模型对话框可见块，直到对话框被释放。因此，当您切换组件时，使其成为非模态修复 +`validate`内容窗格上的调用。我还调整了您的主要方法以在 EDT 上运行，并添加了一些 System.out 调用。如果您删除`setModal( false )`呼叫，您将看到在关闭对话框之前不会打印这些语句

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-20T04:13:21.670

无需使对话框非模态。只需在启动 SwingWorker 后显示对话框。这可以从执行 SwingWorker 的调用类中完成，首先调用 execute，然后显示对话框，也可以从 SwingWorker 中完成，但如果从后者，您必须自己制作调用 super 的执行的伪执行方法，然后显示对话框。请注意，您不能覆盖 execute() 本身，因为它是最终的。

例如...

```
import java.awt.CardLayout;
import java.awt.Window;
import java.awt.Dialog.ModalityType;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.util.concurrent.ExecutionException;

import javax.swing.*;

@SuppressWarnings("serial")
public class SwingTesting2 {

   private static void createAndShowGui() {
      final JFrame frame = new JFrame("SwingTesting2");
      final JDialog dialog = new JDialog(frame, "Dialog",
            ModalityType.APPLICATION_MODAL);
      final DialogPanel dialogPanel = new DialogPanel();
      dialog.getContentPane().add(dialogPanel.getMainPanel());
      dialog.pack();
      dialog.setLocationRelativeTo(frame);

      JButton button = new JButton(new AbstractAction("Test Me") {

         @Override
         public void actionPerformed(ActionEvent actEvt) {
            final GuiWorker2 guiWorker = new GuiWorker2();
            guiWorker.addPropertyChangeListener(new PropertyChangeListener() {

               @Override
               public void propertyChange(PropertyChangeEvent pcEvt) {
                  if (pcEvt.getPropertyName().equals("state")) {
                     if (pcEvt.getNewValue() == SwingWorker.StateValue.DONE) {
                        try {
                           dialogPanel.done(guiWorker.get());
                        } catch (InterruptedException e) {
                           e.printStackTrace();
                        } catch (ExecutionException e) {
                           e.printStackTrace();
                        }
                     }
                  } else if (pcEvt.getPropertyName().equals("progress")) {
                     dialogPanel.setProgress((Integer)pcEvt.getNewValue());
                  }
               }
            });

            guiWorker.execute();
            dialogPanel.start();
            dialog.setVisible(true);
         }
      });

      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(button);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class GuiWorker2 extends SwingWorker<Integer, Integer> {
   private static final int MAX_COUNT = 20;
   private static final long SLEEP_TIME = 100;
   private int count = 0;

   @Override
   protected Integer doInBackground() throws Exception {
      while (count < MAX_COUNT) {
         Thread.sleep(SLEEP_TIME);
         count++;
         setProgress((100 * count) / MAX_COUNT);
      }
      return count;
   }
}

@SuppressWarnings("serial")
class DialogPanel {
   public static final String PROGRESS_BAR = "Progress Bar";
   public static final String DONE = "Done";
   private static final int TIMER_DELAY = 2000;
   private CardLayout cardLayout = new CardLayout();
   private JPanel mainPanel = new JPanel(cardLayout);
   private JLabel doneLabel = new JLabel("Done", JLabel.CENTER);
   private JProgressBar progressBar = new JProgressBar();

   public DialogPanel() {
      progressBar.setString("Waiting on time");
      progressBar.setStringPainted(true);
      progressBar.setIndeterminate(false);

      mainPanel.add(progressBar, PROGRESS_BAR);
      mainPanel.add(doneLabel, DONE);
   }

   public void setProgress(Integer newValue) {
      progressBar.setValue(newValue);
   }

   public void start() {
      cardLayout.show(mainPanel, PROGRESS_BAR);
      progressBar.setValue(0);
   }

   public void done(int countValue) {
      doneLabel.setText(DONE + ". Count: " + countValue);
      cardLayout.show(mainPanel, DONE);
      new Timer(TIMER_DELAY, new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent e) {
            Window win = SwingUtilities.getWindowAncestor(mainPanel);
            win.dispose();
         }
      }){{setRepeats(false);}}.start();
   }

   public JPanel getMainPanel() {
      return mainPanel;
   }

} 
```

# sql - SQL 联合/加入？

> ID：10236997
> 
> 赞同：0
> 
> 时间：2012-04-19T21:23:24.167
> 
> 标签：sql, join, union

我正在尝试显示学生的名字、姓氏、SID、主要和次要。以及每个学生的课程、CID 和会议时间。不过，桥牌桌让我很困惑。Idk 是否进行联合或多表连接或什么。请帮忙！

![在此处输入图像描述](../Images/e255166f7e921ffdeb9db9a25a22b478.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:34:26.790

由于这是家庭作业，因此我不会直接回答您的问题，而是为您提供一些提示。

你真的应该考虑审查`UNION`和`JOINs`.

当您希望在同一数据集中返回多个查询时，将使用 UNION。它们必须在每个字段中具有相似的数据类型，并且在每个查询中具有相同数量的字段。所以对于这个特定的问题，使用 a 有意义`UNION`吗？可能不会，因为您希望学生和他们的课程排成一行。

对于这种类型的查询，您需要一个`JOIN`. 在线提供了关于 JOIN 的非常有用的可视化解释。我建议您在学习 SQL 时随身携带它以帮助您。

[SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

由于您需要学生数据及其课程信息，因此获得这两者的唯一方法是使用`tblRegistration`. 如果您使用此表，在您的查询中您应该得到您正在寻找的结果。

编辑：

由于评论者指出第二张图`UNION`不是 a `JOIN`，我不同意这里是一个证明它的例子。

`UNION`如上所述的 A将两个查询组合成一个结果集。这是一个带有[UNION](http://sqlfiddle.com/#!3/56400/1)演示的 sqlfiddle：

[小提琴 1](http://sqlfiddle.com/#!3/56400/1)

A FULL OUTER JOIN 指定左表或右表中不满足连接条件的行包含在结果集中，并且对应于另一个表的输出列设置为`NULL`。这是除了通常由`INNER JOIN`. 这是一个带有[FULL OUTER JOIN](http://sqlfiddle.com/#!3/56400/2)演示的 sqlfiddle：

[小提琴2](http://sqlfiddle.com/#!3/56400/2)

如您所见，来自两个查询的产品并不相同，因此`FULL OUTER JOIN`图中的 a 不是 a `UNION`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:27:56.823

```
SELECT *
FROM tblStudent AS s
LEFT OUTER JOIN tblRegistration AS r
  ON s.SID = r.SID
LEFT OUTER JOIN tblCourse AS c
  ON c.CID = r.CID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:32:56.300

甲骨文语法：

```
SELECT stu.FirstName, 
       stu.LastName, 
       stu.Major, 
       stu.Minor, 
       reg.SID, 
       cou.CID, 
       cou.MeetingTime
FROM 
      tblStudent as stu,
      tblRegistration as reg,
      tblCourse as cou
WHERE
      stu.SID(+) = reg.SID 
      and reg.CID = cou.CID 
```