# StackOverflow 问答 11339000-11339999

# java - 在 Java 和 HtmlUnit 中，如何等待结果页面完成加载并将其下载为 HTML？

> ID：11339001
> 
> 赞同：8
> 
> 时间：2012-07-05T06:40:46.860
> 
> 标签：java, htmlunit

[HtmlUnit](http://htmlunit.sourceforge.net/)是一个很棒的 Java 库，它允许您以编程方式填写和提交 Web 表单。我目前正在维护一个用 ASP 编写的相当旧的系统，而不是按照我的要求每月手动填写这个网络表单，我正在尝试找到一种方法来自动化整个任务，因为我一直忘记它。这是一种用于检索一个月内收集的数据的表格。到目前为止，这是我编写的代码：

```
WebClient client = new WebClient();
HtmlPage page = client.getPage("http://urlOfTheWebsite.com/search.aspx");

HtmlForm form = page.getFormByName("aspnetForm");       
HtmlSelect frMonth = form.getSelectByName("ctl00$cphContent$ddlStartMonth");
HtmlSelect frDay = form.getSelectByName("ctl00$cphContent$ddlStartDay");
HtmlSelect frYear = form.getSelectByName("ctl00$cphContent$ddlStartYear");
HtmlSelect toMonth = form.getSelectByName("ctl00$cphContent$ddlEndMonth");
HtmlSelect toDay = form.getSelectByName("ctl00$cphContent$ddlEndDay");
HtmlSelect toYear = form.getSelectByName("ctl00$cphContent$ddlEndYear");
HtmlCheckBoxInput games = form.getInputByName("ctl00$cphContent$chkListLottoGame$0");
HtmlSubmitInput submit = form.getInputByName("ctl00$cphContent$btnSearch");

frMonth.setSelectedAttribute("1", true);
frDay.setSelectedAttribute("1", true);
frYear.setSelectedAttribute("2012", true);
toMonth.setSelectedAttribute("1", true);
toDay.setSelectedAttribute("31", true);
toYear.setSelectedAttribute("2012", true);
games.setChecked(true);
submit.click(); 
```

之后`click()`，我应该等待同一个网页完成重新加载，因为某处有一个表格显示我的搜索结果。然后，当页面加载完成后，我需要将其下载为 HTML 文件（非常类似于您最喜欢的浏览器中的“将页面另存为...”），因为我会刮出数据来计算它们的总数，而且我已经使用[Jsoup](http://jsoup.org/)库完成了这项工作。

我的问题是： 1\. 如何以编程方式等待网页在 HtmlUnit 中完成加载？2\. 如何以编程方式将生成的网页下载为 HTML 文件？

我已经查看了 HtmlUnit 文档，但找不到可以满足我需要的类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T06:55:14.447

尝试使用以下设置：

```
webClient.waitForBackgroundJavaScript() or

webClient.waitForBackgroundJavaScriptStartingBefore() 
```

我认为您还需要提及浏览器。默认情况下，它使用的是 IE。您将从这里获得更多信息。 [HTMLUnit 不等待 Javascript](https://stackoverflow.com/questions/5555178/htmlunit-doesnt-wait-for-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-26T16:02:14.167

这个例子可能会对你有所帮助。单击后，您需要等待页面加载。大多数情况下，它是一个使用 java 脚本等的动态页面。所有被覆盖的方法都不会被大量控制台消息压倒。你可以实现你想要的。

```
public static void main(String[] args) throws IOException {
        WebClient webClient = gethtmlUnitClient();
        final HtmlPage page = webClient.getPage("YOUR PAGE");
        webClient.waitForBackgroundJavaScript(60000);
        System.out.println(page);

    }

static public WebClient gethtmlUnitClient() {
        WebClient webClient;
        LogFactory.getFactory().setAttribute("org.apache.commons.logging.Log",
                "org.apache.commons.logging.impl.NoOpLog");
        java.util.logging.Logger.getLogger("com.gargoylesoftware.htmlunit").setLevel(Level.OFF);
        java.util.logging.Logger.getLogger("org.apache.commons.httpclient").setLevel(Level.OFF);
        webClient = new WebClient(BrowserVersion.CHROME);
        webClient.setIncorrectnessListener(new IncorrectnessListener() {
            @Override
            public void notify(String arg0, Object arg1) {
            }
        });
        webClient.setCssErrorHandler(new ErrorHandler() {

            @Override
            public void warning(CSSParseException arg0) throws CSSException {
                // TODO Auto-generated method stub

            }

            @Override
            public void fatalError(CSSParseException arg0) throws CSSException {
                // TODO Auto-generated method stub

            }

            @Override
            public void error(CSSParseException arg0) throws CSSException {
                // TODO Auto-generated method stub

            }
        });
        webClient.setJavaScriptErrorListener(new JavaScriptErrorListener() {

            @Override
            public void timeoutError(HtmlPage arg0, long arg1, long arg2) {
                // TODO Auto-generated method stub

            }

            @Override
            public void scriptException(HtmlPage arg0, ScriptException arg1) {
                // TODO Auto-generated method stub

            }

            @Override
            public void malformedScriptURL(HtmlPage arg0, String arg1, MalformedURLException arg2) {
                // TODO Auto-generated method stub

            }

            @Override
            public void loadScriptError(HtmlPage arg0, URL arg1, Exception arg2) {
                // TODO Auto-generated method stub

            }
        });
        webClient.setHTMLParserListener(new HTMLParserListener() {

            @Override
            public void warning(String arg0, URL arg1, String arg2, int arg3, int arg4, String arg5) {
                // TODO Auto-generated method stub

            }

            @Override
            public void error(String arg0, URL arg1, String arg2, int arg3, int arg4, String arg5) {
                // TODO Auto-generated method stub

            }
        });
        webClient.getOptions().setThrowExceptionOnScriptError(false);
        return webClient;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T06:45:35.120

> 如何以编程方式将生成的网页下载为 HTML 文件

试试[`asXml()`](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/SgmlPage.html#asXml%28%29)。就像是：

```
page = submit.click();
String htmlContent = page.asXml();
File htmlFile = new File("C:/index.html");
PrintWriter pw = new PrintWriter(htmlFile, true);
pw.print(htmlContent);
pw.close(); 
```

# jquery - 使用 JQuery 在 RadioButtonList 上隐藏/显示面板的问题

> ID：11339002
> 
> 赞同：0
> 
> 时间：2012-07-05T06:40:50.937
> 
> 标签：jquery, .net

1）我的页面上有一个下拉列表，选项“信用卡”abd“发票/直接账单”。在选择“发票/直接账单”时，除了选择“信用卡”外，我什么都不需要：2）我必须显示/隐藏radiobuttonlist（在Panel：Panel2内），它有3个选项（入住日期，预订日期，其他日期）3）如果我点击radiobuttonlist的“其他日期”选项，我必须显示一个 Textbox ，它位于 Panel :Panel3 内。4）如果我点击单选按钮列表的“入住日期”或“预订日期”选项，我必须隐藏Panel3内的文本框。

我所有的 4 个场景都在工作。问题：如果我在下拉列表中选择“信用卡”，在我的单选按钮列表中选择“其他日期”选项，在我的文本框中输入一个值“10”并单击提交按钮，回发发生并且我的值存储在数据库中。当我重新加载页面时：我在下拉列表中获得“信用卡”，单选按钮列表中的“信用卡”选项，但值为 15 的文本框不可见。当我选择“入住日期”/“预订日期”和然后是“其他日期”，我看到我的文本框的值为 15。代码如下：

```
<script type="text/javascript">
$(function () {
    $('select[id$=ddlCardType]').change(function () {
        if (this.value == -1) {
            $('div[id$=Panel1]').show();
            $('div[id$=Panel2]').hide();
            $('div[id$=Panel3]').hide();
        }
        else {
            $('div[id$=Panel1]').hide();
            $('div[id$=Panel2]').show();
        }
    }).change();

});
</script>
<script type="text/javascript">
$(document).ready(function () {
    var panel = $("#Panel3");
    var cbo = $("#Panel2").find("cboVisibility");
    $("#cboVisibility").find('input:radio').change(function (index) {
        //$("#Panel2 cboVisibility").find('input:radio').change(function (index) {
        //$("[id*=pnl2 cboVisibility input:radio]").change(function (index) {
        if ($(this).val() == "OD")
            panel.show();
        else
            panel.hide()
    });
    $('#cboVisibility').find('input:radio').trigger('change');
});
</script>
<asp:DropDownList ID="ddlCardType" runat="server" CssClass="arial11nr" Width="270px">
    <asp:ListItem Value="-1">Invoice/Direct Bill</asp:ListItem>
    <asp:ListItem Value="SUCC">Credit Card</asp:ListItem>
</asp:DropDownList>
<td align="left" valign="top">
    <asp:Panel ID="Panel1" runat="server" Style="display: none;">
        <strong>Billing Instructions/Notes</strong><span class="red-color">(optional)  
</span>
        <asp:TextBox ID="txtBillingInstructions" runat="server" TextMode="MultiLine">
 </asp:TextBox>
    </asp:Panel>
    <asp:Panel ID="Panel2" runat="server" Style="display: none;" ClientIDMode="Static">
        <asp:RadioButtonList ID="cboVisibility" CssClass="Normal" runat="server" 
 RepeatDirection="Vertical"
            ClientIDMode="Static">
            <asp:ListItem Value="CD" Selected="True">Check-In Date</asp:ListItem>
            <asp:ListItem Value="BD">Book Date</asp:ListItem>
            <asp:ListItem Value="OD">Other Date</asp:ListItem>
        </asp:RadioButtonList>
    </asp:Panel>
    <asp:Panel ID="Panel3" runat="server" Style="display: none;" ClientIDMode="Static">
        <strong>Charge</strong>
        <asp:TextBox ID="txtSUCCValidity" runat="server" ClientIDMode="Static" 
Width="50px"></asp:TextBox>
        <strong>Days Before Check-In</strong>
        <asp:RangeValidator ID="RangeValidator1" runat="server" 
ControlToValidate="txtSUCCValidity"
            ErrorMessage="<br />Not valid Range" MaximumValue="999"  
ValidationGroup="update"
            MinimumValue="0" Type="Integer" Display="Dynamic"></asp:RangeValidator>
    </asp:Panel>
</td> 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:52:32.920

```
<script type="text/javascript">
var panel = $("#Panel3");
var cbo = $("#Panel2").find("cboVisibility");

$(document).ready(function () {
    //var ddlCardType = "<%=ddlCardType.ClientID %>";
    if ($('[id*=ddlCardType]>option:selected').val() == "SUCC" &&    
$('[id*=cboVisibility] :checked').val() == "OD") {
        panel.show();
    }
});

$('select[id$=ddlCardType]').change(function () {
    if (this.value == -1) {
        $('div[id$=Panel1]').show();
        $('div[id$=Panel2]').hide();
        $('div[id$=Panel3]').hide();
    }
    else {
        $('div[id$=Panel1]').hide();
        $('div[id$=Panel2]').show();
        if ($('[id*=cboVisibility] :checked').val() == "OD")
            panel.show();
    }
}).change();

$("#cboVisibility").find('input:radio').change(function (index) {
    //$("#Panel2 cboVisibility").find('input:radio').change(function (index) {
    //$("[id*=pnl2 cboVisibility input:radio]").change(function (index) {
    if ($(this).val() == "OD")
        panel.show();
    else
        panel.hide()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:53:07.280

你看到的行为是有道理的。默认情况下 panel2 是隐藏的。仅当单选按钮触发更改事件并且选择第三个选项的更改时，您的 js 代码才会显示面板。当您在提交表单后加载页面时，单选按钮会在文档准备好之前设置为第三个选项。即，在可以订阅更改事件之前。这就是为什么您默认看不到文本框的原因。

需要更改哪些内容才能启用您的方案，这取决于您如何设置单选按钮的值。

一种解决方案是在文档就绪时触发更改事件。像这样

```
$(document).ready(function () {
    var panel = $("#Panel2");
    var cbo = $("#Panel1").find("cboVisibility");
    $("#cboVisibility").find('input:radio').change(function (index) {

        // when triggering a change across all radio inputs, even 
        // those that are not selected will show up here. 
        // hence the check to verify if they are actually selected. 
        if (this.value == "OD" && this.checked) {  
            panel.show();

        // we wand to hide the panel3 only if an option other
        // than "OD" is selected.
        } else if (this.checked) {
            panel.hide(); 
        }
    });

    // this will trick the browser into thinking that you selected the third option
    $('#cboVisibility').find('input:radio').trigger('change');
}); 
```

# iphone - 以编程方式模拟 iPhone 上的键盘事件

> ID：11339004
> 
> 赞同：4
> 
> 时间：2012-07-05T06:41:08.877
> 
> 标签：iphone, ios, keyboard, keypress

我想知道是否可以模拟键盘事件——比如按下和按下字符——并将它们发送到 iOS 设备。基本上，我想模拟用户按下键盘上的键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:15:32.043

看看“iOS 的自动化 GUI 测试”，例如[iPhone 的自动化](https://stackoverflow.com/questions/402389/automated-testing-for-iphone)测试以及[使用仪器和 Javascript 对 iOS 应用程序进行 UI 自动化测试怎么样](https://stackoverflow.com/questions/5798485/how-about-ui-automation-testing-for-ios-app-with-instruments-javascripts)

您可能不想要一个完整的自动化测试解决方案，但这样您就可以模拟您的键盘事件。

还有一篇博文提到：[http ://alexvollmer.com/posts/2010/07/03/working-with-uiautomation/](http://alexvollmer.com/posts/2010/07/03/working-with-uiautomation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:55:05.960

我不认为这是可能的。但是您可以在文本字段委托中编写代码或使用 NSNotificationCenter 来获取每个按键的通知。如果这就是你要找的。

# linux - 在多台机器中查找核心文件

> ID：11339005
> 
> 赞同：0
> 
> 时间：2012-07-05T06:41:10.753
> 
> 标签：linux, perl, admin, perl-module, administration

我需要在多个盒子/机器中找到核心文件并触发有关核心文件生成的电子邮件。

我们是否有任何实用程序可以帮助我们在单机或多机中找到核心。我相信我们应该有任何实用程序来找到核心文件，因为它是非常通用的场景。

在以下输入之后，我可以编写一个 perl 脚本来查找核心文件并在存在任何核心文件时触发邮件

该脚本可以在本地机器上正常工作，但我需要添加所有生产服务器。有没有人给我提供通过 Perl 脚本连接 linux 终端的任何想法。

截至目前，我们专注于开发机器所以这个脚本可以登录到所有开发机器并找到核心文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:57:18.603

将其实施到您的电子邮件脚本中：

```
find / -name core 
```

或者只是 cronjob 将所有路径输出到日志。当然你也可以把find命令中的“/”换成特定的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:51:34.943

老式的方法是定期在整个文件系统中搜索核心文件：

```
find / -type f -name core 
```

或者

```
find / -type f -name 'core.*' 
```

当然，这确实存在将*用户*文件与（相当不幸的）名称匹配的风险`core`。

幸运的是，现代 Linux 系统在某种程度上更具可配置性。您可以使用该`/proc/sys/kernel/core_pattern`文件设置将放置核心文件的特定目录，以及文件名称的格式。您可以拥有包含程序名称、启动程序的 UID 和 GID 等的核心文件名 - 请查看[此手册页](http://linux.die.net/man/5/core)。

这样，您可以将所有核心文件保存在一个目录中，这有几个优点：

*   您不会冒险让核心文件散布在整个文件系统中。

*   您可以轻松删除所有核心文件，而无需在整个文件系统中进行搜索的计算费用，也没有删除用户文件的风险。

*   由于所有核心文件都在一个地方，因此根据需要轮询新文件要合理得多。

*   如果您想立即采取行动，您可以通过使用[`inotifywait`](http://linux.die.net/man/1/inotifywait)或其他基于`inotify`核心文件目录的工具来避免轮询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:55:10.570

Shell 脚本将更好地解决您的问题。我不习惯使用 shell 脚本，但我试图制定它。

```
#list of server to be monitored for core file
serverList="root@server1 root@server2 root@server50"

for server in $serverList
do
    #core file
    log="/tmp/coreFiles.log"

    ssh $server find / -type f -name core >$log

    if [ -s $log] then
       echo "core files for server $server" | mail -s "Core files found" xyz@abc.com < $log
    fi      

done 
```

# html - 使用 HTML 在图像上编写文本

> ID：11339006
> 
> 赞同：3
> 
> 时间：2012-07-05T06:41:12.583
> 
> 标签：html, css, html-table

我是 HTML 新手，想显示左侧显示的图像。

我已经显示了图像，`table row`但我无法获取该文本（在*blog.com*下方显示的**IN**）。

 *如何在图像上写字？

任何帮助表示赞赏。

![](../Images/fe700f3df231ca3f8402bcc0aaff7f0b.png)

* * *

## 编辑

我试过了

```
.logoBg
{
    background-image: url('images/logo01.gif');
    background-color: #72c2dd;
} 
```

和

```
<tr class="logoBg">
    <td colspan=5>IN
    </td>
    </tr> 
```

但我只得到文本和背景颜色，但**没有**背景图像。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T06:46:59.803

举个例子：

您可以将其用作您的 HTML：

```
<tr>
<div class="image">
  <img alt="" src="http://www.YourDomain.com/img/yourImage.jpg" />
  <div class="text">
    <p>This is some demonstration text</p>
    <p>This is some more wonderful text</p>
  </div>
</div>
</tr> 
```

那么这作为你的CSS：

```
.image {
    position:relative;
}
.image .text {
    position:absolute;
    top:10px;
    left:10px;
    width:300px;
} 
```

这会将文本直接放在图像上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T06:44:23.170

使用图像作为背景图像并将文本放在同一元素中：

HTML：

```
<table>
 <tr>
  <td id="myTableCell">
   In
  </td>
 </tr>
</table> 
```

CSS：

```
.myTableCell {
  background-image: url(Images/MyImage.png);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T13:18:58.233

@Ecnalyr 是对的，但如果您使用`position:absolute`，则位置是从浏览器的左上角开始计算的。我真的怀疑这就是你想要的。相反，使用`position:relative`+ve 和 -ve 数字使用和定位文本，以相对于放置 div 的位置将文本定位在图像上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T06:44:09.647

您可以使用[background-image](http://www.w3schools.com/cssref/pr_background-image.asp) css 将图像作为此表格单元格的背景，并在该单元格中写入文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T06:44:51.177

如果图像的包含元素具有位置：相对应用，那么您可以添加一个绝对定位在图像顶部的附加元素*

# objective-c - 如何将 MKMapView 的某些属性与 NSUserDefault 中的某些双变量绑定？

> ID：11339008
> 
> 赞同：1
> 
> 时间：2012-07-05T06:41:27.967
> 
> 标签：objective-c, xcode4.3

这就是苹果所说的： [https ://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/Concepts/HowDoBindingsWork.html#//apple_ref/doc/uid/20002373-CJBEJBHH](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/Concepts/HowDoBindingsWork.html#//apple_ref/doc/uid/20002373-CJBEJBHH)

更详细的绑定

**您可以使用 Info 窗口的 Bindings 窗格在 Interface Builder 中轻松建立绑定。**在 Interface Builder 中，显示图形对象阴影的偏移和角度的操纵杆的角度绑定可能如图 6 所示。 图 6 Interface Builder 中操纵杆的角度绑定

信息窗口的所谓绑定窗格在哪里。没有信息窗口之类的东西。这仍然有效吗？

# ios - 动态设置框架

> ID：11339015
> 
> 赞同：1
> 
> 时间：2012-07-05T06:42:12.620
> 
> 标签：ios, xcode, storyboard

我对故事板和自定义代码一起工作感到非常困惑，有时它可以工作，很多时候我试图弄清楚为什么它不工作

例如，我在情节提要中设置了一个自定义视图并与插座连接。当应用程序启动时，我尝试在 awakFromNib 中移动自定义视图，但它不会移动...... :(

有人对此有解决方案吗？或者任何人都可以在故事板中的布局和动态更改代码中的属性时解释一下基础知识吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:44:20.603

尝试在`viewDidLoad`. 您也可以查看[此](https://stackoverflow.com/questions/377202/which-should-i-use-awakefromnib-or-viewdidload)答案，以更好地理解`awakeFromNib`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:46:10.840

您的（笔尖生成的）视图的修改应该在

*   `viewDidLoad()`
*   `viewWillAppear()`
*   `viewDidAppear()`

如果您需要动画更改，您应该将代码移动到 viewDidAppear() 方法，该方法在视图对用户可见后调用。

# windows-mobile - 从应用程序联系信息屏幕拨打电话

> ID：11339018
> 
> 赞同：0
> 
> 时间：2012-07-05T06:42:24.633
> 
> 标签：windows-mobile, windows-mobile-6.5

我想从我的 Windows 移动应用程序用户的联系信息详细信息页面之一拨打电话。

我搜索并想出了一个链接，但无法访问其代码。

```
http://msdn.microsoft.com/en-us/library/bb278110.aspx 
```

任何人都可以提供同样的帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:25:19.267

下载文件不再可用。

如果您只是描述您想做什么，我们可能会提供帮助。

上面的文章很长，展示了很多功能。

~约瑟夫

# mysql - 在 MySQL 中使用 LEFT JOIN 的困难

> ID：11339021
> 
> 赞同：2
> 
> 时间：2012-07-05T06:42:34.290
> 
> 标签：mysql, sql, join

我在数据库中有两个表：

```
Article
--------------------------------------------
articleID INTEGER PRIMARY KEY AUTOINCREMENT
userID    VARCHAR

Rating
--------------------------------------------
articleID INTEGER
userID    VARCHAR
rating    INTEGER 
```

样本数据：

```
Article
articleID        userID
---------------------------------
1                12345
2                23456
3                23456
4                99999
5                15678

Rating
articleID        userID        rating
--------------------------------------------
1                12345         7.5
2                12345         8.5
2                31359         7.5
1                24021         0.0
1                25012         7.5 
```

我想获取所有文章并显示我是否对它们进行了评分。我试过了，我只能通过以下语句获得带有评级文章的列表：

```
SELECT a.*, rating AS myRating FROM Article AS a 
LEFT JOIN Rating AS b
ON a.articleID = b.articleID
WHERE (b.userID is NULL || b.userID = "12345") 
```

如何加入表格以获得结果？

```
Expected output (with userID 12345)
articleID        userID        myRating
--------------------------------------------
1                12345         7.5
2                23456         8.5
3                23456         NULL
4                99999         NULL
5                15678         NULL 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T06:45:13.530

WHERE 子句将过滤掉 userID 不是 12345 或 NULL 的列...

```
SELECT a.*, rating AS myRating 
FROM Article AS a 
LEFT JOIN Rating AS b
ON a.articleID = b.articleID 
AND b.userID = "12345" 
```

由于您要显示a 的*所有*行，因此将用户 ID 限制放在`ON`子句中。现在它将从 A 获取所有行，如果用户 ID 不是 12345，则使用 NULL 进行评级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:46:25.457

你的意思是，

```
SELECT a.*, b.rating AS myRating 
FROM Article AS a 
LEFT JOIN Rating AS b ON(a.articleID = b.articleID AND b.userID = "12345") 
```

# iphone - 将视频保存到 iPhone 中的自定义相册

> ID：11339025
> 
> 赞同：1
> 
> 时间：2012-07-05T06:43:01.177
> 
> 标签：iphone

我正在尝试为 iPhone 编写自己的相机应用程序。我能够成功地将照片和视频保存到相机胶卷。现在，我正在尝试将照片和视频保存到自定义相册。在浏览的帮助下，我可以将照片保存到自定义相册。另外，我试着找出是否可以对视频做同样的事情。但是，我无法做到，也找不到解决方案。有人可以帮我弄这个吗？未回答的类似问题： [将视频保存到相机胶卷中的自定义相册](https://stackoverflow.com/questions/10721988/save-video-to-custom-album-in-camera-roll)

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T05:27:48.110

[这里](https://stackoverflow.com/questions/10721988/save-video-to-custom-album-in-camera-roll)的答案基本是对的，但是`UISaveVideoAtPathToSavedPhotosAlbum (moviePath, nil, nil, nil);` 要先在 UIImagePickerController 委托方法中调用：

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

# openlayers - openLayers wms 弹出窗口不起作用

> ID：11339027
> 
> 赞同：1
> 
> 时间：2012-07-05T06:43:11.910
> 
> 标签：openlayers

我构建了一个 openLayers 地图，我想实现一个弹出窗口。我正在关注一些谷歌创建的资源： http: [//lists.osgeo.org/pipermail/openlayers-users//2011-August/021680.html](http://lists.osgeo.org/pipermail/openlayers-users//2011-August/021680.html)

代码是：

```
<script type="text/javascript">
   var map;
   var osm;
   var layer;
   var info;
   function init() {
         var bounds = new OpenLayers.Bounds(
                1160036.31025726, 7444371.48007091,
                1160792.70130936, 7444966.36493288
                );
         map = new OpenLayers.Map("map", {
                maxExtent: bounds,
 });
     osm =new OpenLayers.Layer.OSM({visibility: true});
     layer = new OpenLayers.Layer.WMS(
                "Working Field", "http://localhost:8080/geoserver/layer/wms",
                {
                layers: 'layer:layer',
                transparent: true,
                isBaseLayer: false
                },
                {
                sphericalMercator: true,                        
                opacity: 0.5
                }
            );

          map.addLayers([osm,layer]);
          map.zoomToExtent(bounds);
   info = new OpenLayers.Control.WMSGetFeatureInfo({
            url: "http://localhost:8080/geoserver/wms",
            //layerUrls: 'http://localhost:8080/geoserver/layer/wms',
    title: 'Identify features by clicking',
            layers: [acm],
    queryVisible: true,
    infoFormat: 'text/html',
    maxFeatures: 1,
    eventListeners: {
        getfeatureinfo: function(event) {
            if (event.text.indexOf("<table class=\"featureInfo\">") != -1){
                popup = new OpenLayers.Popup.FramedCloud(
                    "chicken", 
                    map.getLonLatFromPixel(event.xy),
                    null,
                    event.text,
                    null,
                    true
                ), {
                    autoSize: false,
                    maxSize: new OpenLayers.Size(5,5)
                };
                map.addPopup(popup);
            }
        }
    }
});
map.addControl(info);
  }
 </script> 
```

任何关于错误的线索都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:56:11.900

实际上**层：[acm]**没有定义，还有一件事是我们需要激活信息控件，例如：

```
info.activate(); 
```

# android - 使垂直滚动条可见，水平滚动条可见

> ID：11339032
> 
> 赞同：1
> 
> 时间：2012-07-05T06:43:20.770
> 
> 标签：android, scroll, android-tablelayout

我正在开发一个 android 应用程序，其中我需要 3 个表格布局，第一个和最后一个应该水平滚动，中间一个应该双向滚动，我需要动态地向这些表格布局添加行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:51:11.003

尝试以这种方式创建布局，

```
<ScrollView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TableLayout
            android:id="@+id/table_layout1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableLayout>

        <HorizontalScrollView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TableLayout
                android:id="@+id/table_layout2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >
            </TableLayout>
        </HorizontalScrollView>

        <TableLayout
            android:id="@+id/table_layout3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableLayout>
    </LinearLayout>
</ScrollView> 
```

# android - 点击 Android listview 项目的子元素（如按钮）获得焦点

> ID：11339036
> 
> 赞同：1
> 
> 时间：2012-07-05T06:43:32.190
> 
> 标签：android, listview, focus

## 我有一个列表视图。列表视图中的每个项目都是自定义的。每个项目都有

文本视图1

## 文本视图 2 按钮 1

文本视图1

## 文本视图 2 按钮 1

文本视图1

## 文本视图 2 按钮 1

点击项目按钮获得焦点。即使我在每个列表视图项的布局中给出了按钮的以下属性，我也不想获得按钮的焦点 android:focusable="false" android:focusableInTouchMode="false" 任何人请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:52:13.207

在几天之前，我遇到了同样的问题。但现在我已经解决了。

喜欢跟随。

制作一个名为**DontPressWithParentButton**的类，它扩展了 Button，如下所示：

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.widget.Button;

public class DontPressWithParentButton extends Button {

    public DontPressWithParentButton(Context context) {
        super(context);
    }

    public DontPressWithParentButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public DontPressWithParentButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public void setPressed(boolean pressed) {
        if (pressed && getParent() instanceof View && ((View) getParent()).isPressed()) {
            return;
        }
        super.setPressed(pressed);
    }

} 
```

现在，在您的项目行 xml 中，如下定义按钮（添加您的包代替 YOUR_APP_PACKAGE）

```
<YOUR_APP_PACKAGE.DontPressWithParentButton android:id="@+id/deleteBtn" android:layout_width="100dp"
            android:layout_height="wrap_content" android:layout_alignParentRight="true"
            android:textColor="#FFFFFF"
            android:text="Approve"
            android:focusable="false"
            android:focusableInTouchMode="false"
            /> 
```

现在在您的 java 文件中引用 id，如下所示：

```
DontPressWithParentButton deleteGameBtn=(DontPressWithParentButton) findViewById(R.id.deleteGameBtn); 
```

现在运行项目。你会得到你想要的。

如果您有任何疑问，请评论我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:55:54.507

尝试这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:focusable="false"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content">

</LinearLayout> 
```

在整个布局上只是 Focuable false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:49:17.140

```
public class DontPressWithParentButton extends Button {

public DontPressWithParentButton(Context context) {
    super(context);
}

public DontPressWithParentButton(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public DontPressWithParentButton(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
public void setPressed(boolean pressed) {
    if (pressed && getParent() instanceof View && ((View) getParent()).isPressed()) {
        return;
    }
    super.setPressed(pressed);
}
} 
```

在布局文件中添加以下元素

`<DontPressWithParentButton />`

希望这可以正常工作，没有任何缺陷

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T21:28:07.267

添加`android:descendantFocusability="blocksDescendants"`以便可以阻止子 View(row )。

```
<ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:descendantFocusability="blocksDescendants" /> 
```

如果你想要**虎钳而**不是添加`focusable and focusableInTouchMode to false`到`imageButton/Button`item.xml

# cassandra - Cassandra java.io.IOException：COMMIT-LOG-ALLOCATOR 的映射失败

> ID：11339037
> 
> 赞同：4
> 
> 时间：2012-07-05T06:43:37.617
> 
> 标签：cassandra

当提交日志目录的总大小超过 680 Mb 时，它会抛出此异常

```
ERROR [COMMIT-LOG-ALLOCATOR] 2012-07-04 15:04:57,070 AbstractCassandraDaemon.java (line 134) Exception in thread Thread[COMMIT-LOG-ALLOCATOR,5,main]
java.io.IOError: java.io.IOException: Map failed
    at org.apache.cassandra.db.commitlog.CommitLogSegment.<init>(CommitLogSegment.java:127)
    at org.apache.cassandra.db.commitlog.CommitLogAllocator$3.run(CommitLogAllocator.java:203)
    at org.apache.cassandra.db.commitlog.CommitLogAllocator$1.runMayThrow(CommitLogAllocator.java:95)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:30)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: Map failed
    at sun.nio.ch.FileChannelImpl.map(Unknown Source)
    at org.apache.cassandra.db.commitlog.CommitLogSegment.<init>(CommitLogSegment.java:119)
    ... 4 more
Caused by: java.lang.OutOfMemoryError: Map failed
    at sun.nio.ch.FileChannelImpl.map0(Native Method)
    ... 6 more
ERROR [StorageServiceShutdownHook] 2012-07-04 15:04:57,075 AbstractCassandraDaemon.java (line 134) Exception in thread Thread[StorageServiceShutdownHook,5,main]
java.lang.NullPointerException
    at org.apache.cassandra.gms.Gossiper.stop(Gossiper.java:1132)
    at org.apache.cassandra.service.StorageService$2.runMayThrow(StorageService.java:489)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:30)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:31:03.887

根据您的操作系统，您应该更改 Java VM 的`-Xmx`和`-Xms`参数。

我个人在 Windows 上运行 cassandra，所以我将`%CASSANDRA_HOME%/bin/cassandra.bat`第 34 行和第 35 行从更改`1G`为`100M`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T23:11:16.053

这意味着您已经用完了将提交日志段映射到的地址空间。

最佳解决方案：升级到 64 位 JVM。

更糟糕的解决方案：在 cassandra.yaml 中，将 commitlog_segment_size_in_mb 和 commitlog_total_space_in_mb 都设置为 16。

这不是第一次出现这种情况。我已经打开[https://issues.apache.org/jira/browse/CASSANDRA-4422](https://issues.apache.org/jira/browse/CASSANDRA-4422)来改进默认设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:31:37.937

好吧，我遇到了同样的问题，我的一整天都被浪费了，但我无法将它更新到 64 位 JVM，因为我的 Ubuntu 机器是 32 位的。

@jbellis：他的建议帮助很大，我将 commitlog_total_space_in_mb 减少到 128 mb。

但即使应用了这个，我仍然得到错误。我解决了这个问题，并通过删除 /var/lib 目录中包含（commitlog、data 和 saved_caches）的 Cassandra 文件夹来使 cassandra 工作。

********注意：仅当您在提交日志文件夹中有不必要的数据时才尝试此操作（您不需要的数据）**

# c# - 你知道 Entity Framework 和 DbContext 的使用模式和实践吗？

> ID：11339039
> 
> 赞同：2
> 
> 时间：2012-07-05T06:43:39.520
> 
> 标签：c#, .net, entity-framework, design-patterns, entity-framework-4

我喜欢使用 EntityFramework 在 ASP.NET MVC 上快速创建站点。我通常使用“databae first”原则和DbContext。

我创建了一个与 DbContext 交互并返回、更改、删​​除和添加条目的全局层。像这样的东西：

```
GetLastPosts (int count)
FindPostById (int id)
RemovePost (int id)
... 
```

都在一个班级。通常，它会变得非常大，我不喜欢它。请告诉我您使用 EntityFramework 的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:09:22.673

我通常将存储库模式与工作单元模式一起使用：

这是我找到的最好的教程。它展示了如何在 asp.net 中创建这两种模式，但是，在任何应用程序中的实现都是相同的。它不一定是 asp.net

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net- mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

还有一个更一般的例子：

[http://msdn.microsoft.com/en-us/library/ff649690.aspx](http://msdn.microsoft.com/en-us/library/ff649690.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:51:38.210

我喜欢的一种模式（我不知道它是否是公认的模式）是您在 DBContext 上创建扩展方法，它允许您加载包含查询的类。这意味着您可以在一定程度上划分您的查询。

```
public static XTypeQueries XTypeQueries(this EntityModel db)
{
    return new XTypeQueries(db);
} 
```

并在一个单独的文件中

```
public class XTypeQueries : QueryLibrary
{
    public XTypeQueries (EntityModel db) : base(db) { }

    public IQueryable<Object> DoSomeQuery()
    {
        return from ... in this.db...
               select ...;
    }
} 
```

您从中扩展的查询库对象很简单

```
public abstract class QueryLibrary
{
    protected readonly EntityModel db;

    protected QueryLibrary(EntityModel db)
    {
        this.db = db;
    }
} 
```

这样做的结果是你可以做到

```
var query = new EntityModel().XTypeQueries.DoSomeQuery(); 
```

我尝试将方法保持为可查询的，以便在调用方法时您可以根据需要尽可能具体，而不会浪费大量处理。您现在拥有组合在一起的查询库，但就像您编写 Linq 内联一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T06:52:46.977

**更新**

我认为您需要创建一个单独的数据库层，并且您将需要许多域类而不是单个类，它将像[Repository Pattern](http://msdn.microsoft.com/en-us/library/ff649690.aspx)一样对数据库实体执行创建、更新和删除等操作。

例如做与`client`你相关的操作将需要`ClientRepository`类。

```
var clientRepo = new ClientRepository();
clientRepo.AddClient(Client clientEntity);
List<Client> clientDM = clientRepo.GetClients(23); 
```

# doctrine-orm - Doctrine2 中的 setMaxResults 和 setFirstResult

> ID：11339040
> 
> 赞同：0
> 
> 时间：2012-07-05T06:43:44.707
> 
> 标签：doctrine-orm

[官方](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/dql-doctrine-query-language.html#first-and-max-result-items-dql-query-only)的Doctrine2 指南报告说：

“如果您的查询包含一个 fetch-joined 集合，指定结果限制方法无法正常工作。Set Max Results 限制了数据库结果行的数量，但是在 fetch-joined 集合的情况下，一个根实体可能会出现在许多行，有效地补水少于指定数量的结果。”

这是我的情况。那么一个人能做什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:30:08.873

您可以使用 Doctrine2 的内置[Paginator](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/pagination.html)和 set `$fetchJoinCollection = true`。

# linux - 不使用 make 制作 make

> ID：11339041
> 
> 赞同：0
> 
> 时间：2012-07-05T06:43:49.020
> 
> 标签：linux, makefile, rpm, yum

我正在使用 CentOS，但由于一个错误，许多软件包被删除了。所以我没有yum和rpm。所以我想从源代码手动制作 yum，但我也没有 make 。我知道一切都将用“make package”制作。但是自己呢？有没有办法安装“make package”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T22:28:02.827

如果您只是想重新安装 rpm 和 yum，您应该能够将系统重新启动到 CentOS 救援 CD。这应该有 rpm 和 scp 可用。

请参阅[http://www.centos.org/docs/5/html/Installation_Guide-en-US/s1-rescuemode-boot.html](http://www.centos.org/docs/5/html/Installation_Guide-en-US/s1-rescuemode-boot.html) 和[http://ekuric.wordpress.com/2011/07/06/how-to -install-rpm-package-in-rescue-mode/](http://ekuric.wordpress.com/2011/07/06/how-to-install-rpm-package-in-rescue-mode/)

您还可以在[http://serverfault.com找到更多帮助（和同情）](http://serverfault.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:47:19.463

Make 可以被引导，即像操作系统、编译器等一样。可以由它制作一个版本，然后它可以自己托管。但是，不要忘记：make 的第一个版本必须手动编译。获取源代码，对其执行`gcc -c`或类似操作，然后将所有目标文件链接在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T22:51:57.087

最简单的方法可能是 Live 系统。

如果这不起作用，我会使用不同的方法：

1.  手动安装所需的非常基本的 RPM。这是，嗯，`rpm`。要在没有它的情况下安装它，您可以使用（在不同的工作系统上）调用`rpm2cpio`并将生成的 cpio 存档传输到要救援的系统。在那里可以用`cpio -id`.

2.  现在你应该有一个工作的 RPM。（如果没有，请对可能需要的所有软件包重复步骤 1。）因此，您可以安装`.rpm`工作所需的所有`yum`. 对手动安装的内容执行相同操作，以便将其正确记录在 RPM 数据库中。

3.  如果您现在有工作`yum`，您可以继续并自动安装其他所需的一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:07:07.247

对于引导，您可以在其他机器上编译 make 和 gcc（目标上缺少依赖项）并将其安装在目录中（配置 --prefix=..）。然后将它复制到您的centos上。如果 arch 不同，则使用交叉编译

# ios5 - AVPlayer：按下主页按钮时背景音频停止，但在锁定屏幕时播放

> ID：11339042
> 
> 赞同：7
> 
> 时间：2012-07-05T06:43:51.830
> 
> 标签：ios5, video, background, avplayer

好的，所以我的应用程序播放视频，我希望声音继续在后台播放。但是当我点击“主页”按钮时，播放停止。我正在**使用 iOS 5.0.1 在 iPhone 4s 上进行测试**

**什么在起作用？**

*   如果视频正在播放并且我**锁定**屏幕，**它会继续播放**，
*   **I 可以**从锁屏控件控制播放：下一个、上一个、播放、暂停。
*   如果我按“**主页**”，然后从多任务栏中转到“**遥控器”，****它就可以了**。

**怎么了？**

*   当我按下“主页”按钮时，我希望应用程序继续播放，因为当我这样做时，**音频会停止**。

**我做了什么：**

*   在我的 app.plist 中将“音频”添加到“必需的背景模式”中

在应用代理的应用程序中添加了以下代码**：didFinishLaunchingWithOptions：**

```
NSError *setCategoryErr = nil;
NSError *activationErr  = nil;
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error:&setCategoryErr];    
[[AVAudioSession sharedInstance] setActive:YES error:&activationErr]; 
```

在我的视图控制器中，我实现了接收远程控制的方法：

```
- (BOOL)canBecomeFirstResponder {
    return YES;
}
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];
}
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];

    //End recieving events
    [[UIApplication sharedApplication] endReceivingRemoteControlEvents];
    [self resignFirstResponder];
}

- (void)remoteControlReceivedWithEvent:(UIEvent *)receivedEvent {
    if (receivedEvent.type == UIEventTypeRemoteControl) {

        switch (receivedEvent.subtype) {

            case UIEventSubtypeRemoteControlTogglePlayPause:
                [self play:nil];
                break;

            case UIEventSubtypeRemoteControlPreviousTrack:
                [self actionPlaybackPreviousItem];
                break;

            case UIEventSubtypeRemoteControlNextTrack:
                [self actionPlaybackNextItem];
                break;

            default:
                break;
        }
    }
} 
```

为什么一切正常，但是，这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T23:34:04.347

Stack Overflow 每次都变得越来越不响应......希望它对那里的每个人都不是那么糟糕。我没有找到任何回应，为什么在点击主页按钮后视频暂停，但是，如果它对任何人有帮助，我提供了一个解决方法：

由于播放器一直在播放，直到应用程序进入后台，我创建了一个计时器，以检查应用程序在前台时是否正在播放，如果是，则继续播放：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    MainViewController* mainController=self.viewController;
    playerWasPlaying=mainController.player.rate!=0;
}

-(void)resumePlayback {
    MainViewController* mainController=self.viewController;
    if (mainController.player.rate==0&&playerWasPlaying)
        [mainController play:nil];
}
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(resumePlayback) userInfo:nil repeats:NO];
} 
```

在我看来，这不是最好的选择，但现在它正在工作，在恢复时播放会有一点跳跃。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-13T08:16:34.690

请参阅Apple 文档中的此[链接，并阅读](https://developer.apple.com/library/ios/qa/qa1668/%5findex.html)**视频媒体的特殊注意事项**部分。这里解释了视频暂停的原因以及如何避免这种情况。它帮助了我。我尝试了两种选择，并且都运行良好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-28T07:30:23.750

**斯威夫特 3**

当您的应用程序进入后台并返回时，首先注册通知：

```
NotificationCenter.default.addObserver(self, selector: #selector(appEnteredBackgound), name: Notification.Name.UIApplicationDidEnterBackground, object: nil)
NotificationCenter.default.addObserver(self, selector: #selector(appEnteredForeground), name: Notification.Name.UIApplicationWillEnterForeground, object: nil) 
```

**选项 1**`AVPlayer` -从其删除/添加`AVPlayerLayer`：

```
func appEnteredBackgound() {
  playerLayer.player = nil
}

func appEnteredForeground() {
  playerLayer.player = player
} 
```

**选项 2** - 禁用/启用视频轨道：

```
func appEnteredBackgound() {
  if let tracks = player.currentItem?.tracks {
    for track in tracks {
      if track.assetTrack.hasMediaCharacteristic(AVMediaCharacteristicVisual) {
        track.isEnabled = false
      }
    }
  }
}

func appEnteredForeground() {
  if let tracks = player.currentItem?.tracks {
    for track in tracks {
      if track.assetTrack.hasMediaCharacteristic(AVMediaCharacteristicVisual) {
        track.isEnabled = true
      }
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-10-01T10:10:43.600

**iOS14**。谁遇到上述方法都不起作用的问题，用通知`(Notification.Name("UISceneDidEnterBackgroundNotification")`代替通知`UIApplication.didEnterBackgroundNotification`或AppDelegate中的相应方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-13T08:55:18.727

**对于迅速 4+ 。**

当您的应用程序进入后台并返回时，首先注册通知：

```
NotificationCenter.default.addObserver(self, selector: #selector(appEnteredBackgound), name: UIApplication.didEnterBackgroundNotification, object: nil)

NotificationCenter.default.addObserver(self, selector: #selector(appEnteredForeground), name: UIApplication.willEnterForegroundNotification, object: nil) 
```

选项 1 - 从 AVPlayerLayer 中删除/添加 AVPlayer：

```
@objc func appEnteredBackgound() {
  playerLayer.player = nil
}

@objc func appEnteredForeground() {
  playerLayer.player = player
} 
```

选项 2 - 禁用/启用视频轨道：

```
@objc func appEnteredBackgound() {
        if let tracks = player?.currentItem?.tracks {
            for track in tracks {
                if (track.assetTrack?.hasMediaCharacteristic(AVMediaCharacteristic.visual))! {
                    track.isEnabled = false
                }
            }
        }
    }

    @objc func appEnteredForeground() {
        if let tracks = player?.currentItem?.tracks {
            for track in tracks {
                if (track.assetTrack?.hasMediaCharacteristic(AVMediaCharacteristic.visual))! {
                    track.isEnabled = true
                }
            }
        }
    } 
```

# google-apps-script - 从谷歌应用脚 本发送聊天消息

> ID：11339051
> 
> 赞同：7
> 
> 时间：2012-07-05T06:44:21.657
> 
> 标签：google-apps-script

我已经为可以发送电子邮件的谷歌应用脚​​本开发了应用程序，但现在我需要从我的脚本向用户发送 gtalk 聊天/xmpp 消息。我的问题是，我可以直接从谷歌应用脚​​本发送 gtalk 聊天/xmpp 消息吗？如果不可能，那么有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-10-30T17:19:17.893

基本上，您可以通过 App 脚本自动执行两种类型的消息。

1.  同步：构建可以响应用户输入的引导。
2.  异步：指定的基于触发器的消息传递系统。比如提交谷歌表单或基于时间的。

让我们谈谈异步

您可以通过使用传入的 webhook 来做到这一点。

*   创建 Google Chart Room > 创建 webhook URL。[点击这里](https://developers.google.com/hangouts/chat/how-tos/webhooks#define_an_incoming_webhook)
*   使用此代码：

* * *

```
function myFunction() {

    var WebWhooklink = "PEST_YOUR_WEBHOOK_URL_HERE"

    var message = { text: "Hello Chat"};
    var payload = JSON.stringify(message);
    var options = {
            method: 'POST',
            contentType: 'application/json',
            payload: payload
    };

    var response =  UrlFetchApp.fetch(WebWhooklink, options ).getContentText();
} 
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T00:28:26.610

没有内置支持发送 Google Chat 消息。[您可以在问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上提交功能请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:56:11.713

如果您能够在 google app 脚本中向外部服务发出 HTTP 请求，那么您也许可以使用 HTTP 到 XMPP 网关，例如：

[http://chatmongers.com/blog/introducing-the-chatmongershttp-to-xmpp-gateway/](http://chatmongers.com/blog/introducing-the-chatmongershttp-to-xmpp-gateway/)

您可能仍然需要克服许多限制。最常见的一个是隐私扩展会阻止来自目标用户名册之外的用户的所有消息，但无论您如何设法发送 XMPP 消息，这都会成为一个问题。

# iphone - 自定义 UITableViewCell 不显示情节提要中的标签

> ID：11339054
> 
> 赞同：3
> 
> 时间：2012-07-05T06:44:25.437
> 
> 标签：iphone, xcode, uitableview, uistoryboard

![UITableView 中的自定义 UITableViewCell](../Images/960d8239d0e0f837d447883237b2e567.png)

![在此处输入图像描述](../Images/f3801a990d65842036d095e30d1bbcd2.png)

在此屏幕截图中，您可以看到我在 UIViewController 中添加了 UITableView，然后通过在其中添加一些标签来自定义 UITableViewCell。但问题是当我运行应用程序时。所有单元格都是空的。根本没有标签。

![空单元格](../Images/86d157c6f6f1a54cd3422f4bc7234493.png)

我不明白可能是什么问题。我已经在网上搜索并阅读了教程，但无法解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T06:03:04.727

经过一番努力，我自己解决了这个问题。
实际上，当您创建自定义单元格时，您必须执行以下操作：

1.  在情节提要单元上设置标签、图像等。
2.  创建一个自定义单元格类（继承自 UITableViewCell）（CustomCell.h & .m），CustomCell.h 具有所有属性作为标签、图像等的 iboutlet，并在实现中将它们全部合成。
3.  创建此自定义类后返回情节提要，选择自定义单元格，将其类更改为 CustomCell 并为其提供一些标识符，例如“MyCustomCell”，然后右键单击自定义单元格并将 IBOutlets 与标签等连接起来。
4.  现在在您实现 UITableView 的类中导入 CustomCell 类，并使用您在 CustomCell 类中定义的属性。

    ```
    -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *MyIdentifier = @"MyCustomCell";

        CustomCell*cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

        if (cell == nil)
        {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                           reuseIdentifier:MyIdentifier] autorelease];
        }

        // Here we use the provided setImageWithURL: method to load the web image
        // Ensure you use a placeholder image otherwise cells will be initialized with no image
        [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://example.com/image.jpg"]
                       placeholderImage:[UIImage imageNamed:@"placeholder"]];
            cell.myCustomLabel.text = @"My Text";
        return cell;
    } 
    ```

我做了这一切，我的问题得到了解决，请不要忘记连接代表和数据源和表格。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:20:31.217

有点晚了，但是您可以通过将视图的背景颜色设置为情节提要中的“清除颜色”来解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T14:05:02.443

在tableview的delegate方法中，cellforrowatindexpath里面有一个uitableviewcell，在这个cell的初始化中应该有一个标识符。可能是 "cell" 或 "cellIdentifier" 。

您只需要从情节提要中选择您的单元格，然后将此标识符字符串输入到情节提要中，其中 uitableviewcell 的属性检查器所在的位置。

希望这可以帮助.. ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T06:12:19.690

首先在情节提要@“Cell”中设置单元格标识符

然后设置标签的标签

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

// Create
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
}

UILabel *lblDate = (UILabel*)[cell viewWithTag:101];
UILabel *lblDistance = (UILabel*)[cell viewWithTag:102];
UILabel *lbltype = (UILabel*)[cell viewWithTag:103];

lblDate.text = [temp objectAtIndex:indexPath.row] valueForKey:@"date"] stringByReplacingOccurrencesOfString:@"-" withString:@"/"]];
lblDistance.text = [NSString stringWithFormat:@"%@ KM",[[temp objectAtIndex:indexPath.row] valueForKey:@"distance"]];

NSString *type = [NSString stringWithFormat:@"%@",[[temp objectAtIndex:indexPath.row] valueForKey:@"distance"]];
if([type isEqualToString:@"0"])
{
    lbltype.text = @"Personal";
}
else
{
    lbltype.text = @"Bussiness";
}
// Configure
return cell;
} 
```

# java - 如何在不破坏 Maven 发布插件的情况下传递 javac 多个命令行参数，其中一些参数包括冒号？

> ID：11339056
> 
> 赞同：5
> 
> 时间：2012-07-05T06:44:35.450
> 
> 标签：java, maven, javac, maven-release-plugin, maven-compiler-plugin

当我忘记在类中声明 serialVersionUIDs 时，我想让我的 Maven 构建失败`Serializable`。有了`javac`，这很容易：

```
$ javac -Xlint:serial -Werror Source.java 
```

直接将其翻译为 Maven 不起作用：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <compilerArgument>-Xlint:serial -Werror</compilerArgument>
            </configuration>
        </plugin> 
```

被`compilerArgument`引用，因此`javac`只接收一个参数，包含`-Xlint:serial -Werror`, 而不是`-Xlint:serial`和`-Werror`作为单独的参数。所以你阅读了文档，发现`compilerArguments`：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <compilerArguments>
                    <Xlint:serial />
                    <Werror />
                </compilerArguments>
            </configuration>
        </plugin> 
```

这看起来很奇怪 - 冒号`serial`在命名空间中创建元素`Xlint`，它没有在任何地方声明 - 但它可以工作......直到你想要发布：

> `$ mvn release:prepare`
> 
> `org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.3.2:prepare (default-cli) on project my-project: Error reading POM: Error on line 58: The prefix "Xlint" for element "Xlint:serial" is not bound.`

显然，常规 POM 阅读器以另一种方式处理 XML 命名空间，而不是发布插件使用的方式。

那么，`javac`当其中一些开关包含对纯 XML 元素无效的字符时，如何在不破坏发布插件的情况下传递多个命令行开关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-19T16:54:33.690

见[http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#compilerArgs](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#compilerArgs)

和[http://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html](http://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html)

Maven 3.1 或更高版本

```
 <source>1.6</source>
                        <target>1.6</target>
                        <showDeprecation>true</showDeprecation>
                        <showWarnings>true</showWarnings>
                        </processors>
                        <compilerArgs>
                          <arg>-verbose</arg>
                          <arg>-Aeclipselink.persistencexml=src/main/resources/META-INF/persistence.xml</arg>
                        </compilerArgs> 
```

或 Maven 3.0 或更早版本

```
 <compilerArguments>
        <verbose />
      </compilerArguments>
      <compilerArgument>-Aeclipselink.persistencexml=src/main/resources/META-INF/persistence.xml</compilerArgument> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T06:44:36.633

似乎虽然空格在 中被转义`compilerArgument`，但引号却不是这样。因此，如果将参数中的空格用引号括起来，则会得到两个参数：

```
<compilerArgument>-Xlint:serial" "-Werror</compilerArgument> 
```

这调用`javac "-Xlint:serial" "-Werror"`而不是`javac "-Xlint:serial -Werror"`.

在文档中我找不到任何关于此的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T10:16:49.893

我认为这是 maven-compiler-plugin 中的一个错误，我向开发人员提交了一个问题：[MCOMPILER-178](http://jira.codehaus.org/browse/MCOMPILER-178)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-04T15:55:45.413

关于[Kalpesh Soni 的回答](https://stackoverflow.com/questions/11339056/how-do-i-pass-javac-multiple-command-line-arguments-some-of-which-include-colon/23743186#23743186)：

根据[http://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html](http://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html)的示例，请注意 Maven 3.1 或更高版本：

```
<compilerArgs>
    <arg>-verbose</arg>
    <arg>-Xlint:all,-options,-path</arg>
</compilerArgs> 
```

除非您想传递需要空格字符的附加参数，否则上述内容很棒。就我而言，它是`-bootclasspath /path/to/custom/rt.jar`。在这种情况下，您必须在每个空格上拆分此字符串并将每个部分作为新部分传递`<arg />`，以免得到`Fatal error compiling: invalid flag: ...`所以工作示例是：

```
<compilerArgs>
    <arg>-verbose</arg>
    <arg>-Xlint:all,-options,-path</arg>
    <arg>-bootclasspath</arg><arg>/path/to/custom/rt.jar</arg>
</compilerArgs> 
```

# css - 与其他浏览器不同，IE8 的 css 中的背景颜色属性无法按预期工作

> ID：11339059
> 
> 赞同：2
> 
> 时间：2012-07-05T06:44:39.867
> 
> 标签：css

我为两个不同的文本按钮应用了两种不同的样式。

```
.BC { 
background-color : DC143C;
color: white;
font-size: 12px;
display: block;
height: 21px;
padding-left: 5px;
padding-right: 5px;
padding-top: 5px;
text-align: center;
text-decoration: none;
font-weight: bolder;
}

.DE { 
background-color : black;
color: white;
font-size: 12px;
display: block;
height: 21px;
padding-left: 5px;
padding-right: 5px;
padding-top: 5px;
text-align: center;
text-decoration: none;
font-weight: bolder;
} 
```

按钮的外观和感觉在 Mozilla、chrome、Opera 和 Safari 浏览器中具有预期的颜色变化（即按钮以默认长度出现并且文本被包裹在其中）。但在 IE8 和 IE9 中仅应用颜色直到我提到的文本，并使用按钮结构进行自我调整。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T06:45:27.730

嘿`#`以前的颜色

像这样

```
background-color : #DC143C; 
```

并替换这个

```
.BC{background-color : #DC143C;} 
```

# iphone - UILabel 用多行截断一个长单词

> ID：11339073
> 
> 赞同：7
> 
> 时间：2012-07-05T06:45:34.640
> 
> 标签：iphone, ios

我有一个`UIlabel`允许显示两行字符串的视图。但就我而言，只有一个长词。无论我将换行模式设置为`UILineBreakModeTailTruncation`or `UILineBreakModeWordWrap`，它总是将单词分成两行。像这样：“xxxxxx xx”我想在第一行截断它，像这样：“xxxx...”

有什么办法可以实现。在大多数情况下，它应该允许显示两行单词。

附加编辑：以下图为例。前两个标签是我所期望的：一个长词可以截断一行；可以在两行中显示多个短词。底部标签当前已发生。

![在此处输入图像描述](../Images/847b5af0b5129ccf36140e8eea3eb47f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-18T17:59:10.690

为了做你所要求的，你需要找出是否只有一个词。如果有，将行数设置为 1，自动收缩应该可以解决问题。如果没有，则将行数设置为 0。

例如

```
UILabel *label = [[UILabel alloc] init];
label.font = [UIFont systemFontOfSize:12.0];
label.adjustsFontSizeToFitWidth = YES;
label.minimumScaleFactor = 0.8;
label.text = NSLocalizedString(@"Information", @"E: 'Information'");
NSUInteger words = [label.text componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]].count;
label.numberOfLines = (words == 1) ? 1 : 0; 
```

斯威夫特 3.0

```
let label = UILabel()
label.font = UIFont.systemFont(ofSize: 12)
label.adjustsFontSizeToFitWidth = true
label.minimumScaleFactor = 0.8
label.text = NSLocalizedString("Information", comment: "E: 'Information'")
let words = label.text?.components(separatedBy: NSCharacterSet.whitespacesAndNewlines).count
label.numberOfLines = words == 1 ? 1 : 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:14:38.400

不要做任何事

设置第 1 行无中断模式

设置字体大小和最小字体大小相同

看图片![在此处输入图像描述](../Images/570910840dae199d0d930d601094d016.png)

![在此处输入图像描述](../Images/49030c4accf94bc7a6673a46a12d3b91.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:16:47.847

将行数设置为 1 或不设置行数，默认为 1。换行模式为 UILineBreakModeTailTruncation... 并专门检查标签的宽度...。它不应该更大用作下列的 ...

```
 [lbl setFrame:CGRectMake:(10,10,50,30)];
  [lbl setLineBreakMode:UILineBreakModeTailTruncation];
  [lbl setNumberOfLines:1]; 
```

愿这能帮助你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:28:27.490

通过使标签更宽，您可以解决此问题。

```
[lbl setFrame:CGRectMake:(xPosition,yPosition,heightValue,21)]; 
```

`[lbl setNumberOfLines:1];`

在哪里

> xPosition 和 yPosition 值是您为标签设置的值。
> 
> heightValue 是适当的值，它将正确对齐视图中的标签。

继续...

# objective-c - ios停止2个线程同时使用一个方法

> ID：11339075
> 
> 赞同：3
> 
> 时间：2012-07-05T06:45:35.623
> 
> 标签：objective-c, ios, multithreading

~~我们有一个错误，它破坏了我们 UI 的外观，一些 UI 元素重叠，或者被添加到子视图中两次。该错误几乎无法重现，因此很难修复。现在我想到了原因，可能是同时调用了两次更改UI的方法。我是对的，我试图以编程方式创建错误。~~

我们有一个错误，这是由不同线程同时访问的方法引起的。模拟这个问题，更好地理解它。请参阅下面发布的代码。

当我这样做时，updatePresence 方法调用，我的程序完美运行

视图控制器.m

```
-(void)loadConversationScreen{
    [conversationController updatePresence];
} 
```

但是当我这样做时，我的程序出了点问题

视图控制器.m

```
-(void)loadConversationScreen{
    [conversationController performSelectorInBackground:@selector(updatePresence) withObject:nil];
    [conversationController updatePresence];

} 
```

~~这是因为该方法正在同时被访问，并且我的 UIView 的实例也在同时被访问/更改。~~

如何***正确***阻止 2 个线程同时使用一个方法？

我如何在 IOS 中正确处理它（如果没有正确的方法，有什么解决方法），是否有内置锁或某种东西？

我的应用程序应该支持 ios 4.0 及更高版本

提前感谢大家的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T06:54:51.637

最适合您的线程锁是`@sycnhronized(object) {}`. 这意味着一次只有一个线程可以输入代码。传入的对象用于执行加锁；一次只有一个线程可以进入受特定对象同步保护的块。其他人会等。这可以是任何 Objective-C 对象，甚至是`NSString`.

通常，您会使用您试图保护多个线程的任何对象。你可能想要`@synchronized(self) {}`：

```
-(void)updateVariables {
    @synchronized(self) {
        _foo = 1;
        _bar = 2;
    }
} 
```

`@sycnhronized`是可重入的，因为同一个线程可以调用任意`@sycnhronized`深度，例如：

```
- (void)a {
    @synchronized(self) {
        // entered "immediately" if called from b, where the @synchronized has
        // already been called
        _foo = _foo + 1;
    }
}

- (void)b {
    @synchronized(self) {
        [self a];
    }
} 
```

为了后代，因为我在阅读您的说明之前已经输入了它，如果您真的只关心更新 UI，您可能希望将您的调用强制转到主线程，而不是像这样：

```
- (void)someTask {
    dispatch_async( dispatch_get_main_queue(), ^{
        [self updateUI];
    });
}

- (void)updateUI {
    NSAssert( [NSThread isMainThread], @"called from non-main thread" );
    // do UI updates here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T06:54:10.130

正如warrenm所说，您不应该`UIView`从与主线程（UI线程）不同的线程更新您的线程。不过，您问是否有任何解决方法可以解决正在发生的事情。老实说，您应该尝试理解为什么方法被调用两次，而不是阻止第二个线程访问您的方法。这比其他任何事情都更符合逻辑，您应该尝试解决这个问题，而不是尝试捷径。

# jquery - 如何在服务器端添加使用 jquery 在客户端完成的更改

> ID：11339076
> 
> 赞同：2
> 
> 时间：2012-07-05T06:45:35.837
> 
> 标签：jquery, server-side

```
 <body>

        <form id="form1" runat="server">
            <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true">
        </asp:ScriptManager>

            <div id="navarea" style="display: none">
             <asp:UpdatePanel ID="UpdatePanel2" runat="server">
             <ContentTemplate>
            <ul id="navigation" class="treeview" runat="server">

             <li id="parentnode" runat="server">
             Animals
             <asp:Panel ID="Panel1" runat="server">
            <ul id="janwar" runat="server">
            <li id ="test" onclick="getText" runat="server">Goat</li>
            <li id ="test1" runat="server">Cow</li>
       </ul>
     </asp:Panel>
             </li>
             <li id="products" runat="server">
             Products
             <ul runat="server">
             <li runat="server">Apple</li>
             <li runat="server">Samsung</li>
             </ul></li>
             <li id="Accessories" runat="server">
             Drinks
             <ul runat="server">
             <li runat="server">Coca Cola</li>
             <li runat="server">Pepsi</li>
             </ul>
             </li>
            </ul>

     <asp:Label ID="another" runat = "server">sajjad</asp:Label>
        </div>
        <asp:Label ID="Label1" runat = "server">Type here</asp:Label>
        <asp:TextBox ID="testing" runat = "server" Text="ehsan"></asp:TextBox>
        <asp:Panel runat="server">
        <asp:Button ID="swap" runat ="server"  />
        </asp:Panel>
       <asp:HiddenField ID="HiddenField1" runat="server" ClientIDMode="Static" Value="" />

    </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body>
</html> 
```

这是我的 .aspx 文件代码，我在其中选择用户单击的 li 的 id，当单击按钮时，我将文本框文本设置为该 li 文本。它正在工作，但是在重置回发值后，我想在服务器端保持更改。

这是我的 jquery 脚本

```
 <script type="text/javascript">

        $(document).ready(function () {

            $("#navigation").treeview({
                persist: "location",
                collapsed: true,
                animated: "medium"
            });
            var ehsan;
            $("#navarea").css("display", "");

             $("#swap").click(function () {

                var temp = $("#testing").val();
                // alert(temp);
                var geting = $("#HiddenField1").attr('Value');

                alert(geting);
                $("li#" + geting + "").html(temp);

              });

            $("#janwar li").click(function () {

                ehsan = this.id;
                $("#HiddenField1").attr('Value', ehsan);
title="change" text="change" value="change" name="change"></button>');

            });
        });

</script> 
```

如何在服务器页面上添加 li 更改？如果有任何示例代码可用？

# vba - 使用 VBA 在 Visio 中打开嵌入式 Excel

> ID：11339079
> 
> 赞同：2
> 
> 时间：2012-07-05T06:46:00.227
> 
> 标签：vba, excel, visio

我对 VBA 有一点问题。我有大约 800 个带有嵌入式 Excel 的 Visio 文件，如果你双击它，它会在单独的应用程序中打开。

Excel 文件中的代码在 Visio2007 / Excel2007 中存在一些错误/问题。我已经编写了用于更新 Excel VBA 代码的代码。

我的问题是，在打开嵌入式 Excel 时，我必须在按下任何按钮之前让代码运行！

我只需要知道如何使用代码打开嵌入式 Excel！（我在任何地方都没有找到..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:08:07.737

打开嵌入的 Excel 文档（并在需要时显示）应使用以下 VBA 代码

```
For i = 1 To ActiveDocument.OLEObjects.Count
    If Left(ActiveDocument.OLEObjects(i).ProgID, 11) = "Excel.Sheet" Then
        ActiveDocument.OLEObjects(i).Object.Activate
        ActiveDocument.OLEObjects(i).Object.Application.Visible = True
        ActiveDocument.OLEObjects(i).Object.Windows(1).Visible = True
    End If
Next i 
```

# javascript - HTML 网站中的数据库连接方式，应该在 chrome 和 firefox 中支持

> ID：11339081
> 
> 赞同：2
> 
> 时间：2012-07-05T06:46:10.363
> 
> 标签：javascript, jquery, html, ajax

我正在用 HTML 开发电​​子商务网站，为此我想在数据库中存储产品信息，如 ProductName、Price、Brand 等。

我尝试使用 JavaScript for Sql Database 使用 ActiveXObject，但它仅适用于 IE，而且我知道它不直接支持其他浏览器。

因此，请告诉我所有流行浏览器都支持的 HTML 中数据库连接的任何替代方式。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T06:55:33.730

您不能直接从 HTML/Javascript 访问服务器上的数据库。您需要在服务器上使用 PHP、ASP、Coldfusion、CGI 等工具来查询数据库，从查询结果生成 HTML 并将其发送到客户端。

对于更多动态网页，您可以使用 AJAX 向服务器发送请求。在服务器端，请求将由 PHP、ASP、Coldfusion、CGI 等处理，并将结果发送回客户端，您可以在客户端通过 JavaScript 动态更改网页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:50:03.297

您可以查看[HTML5 Local Storage](http://diveintohtml5.info/storage.html)或[IndexedDB](http://www.w3.org/TR/IndexedDB/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:00:21.440

使用 html5[网络存储](http://www.html5rocks.com/en/tutorials/webdatabase/todo/)和[客户端存储](http://www.html5rocks.com/en/tutorials/offline/storage/)。我认为最新版本的 Chrome、Safari、FireFox 和 IE 支持 HTML5 本地存储。

# android - 在android的全局应用程序中添加进度条

> ID：11339083
> 
> 赞同：1
> 
> 时间：2012-07-05T06:46:21.150
> 
> 标签：android, progress-bar

我想在加载应用程序时加载进度条。我有 60 个声音文件，我使用声音池将它们放入全球应用程序中。当我启动应用程序时，应用程序变为空白，加载需要 30 到 40 秒。

在应用程序加载所有声音文件之前，是否可以放置一些带有背景图像的进度条而不是空白屏幕？

我发现全局应用程序不支持进度条或背景图像？这是真的？

如果没有，有人可以在上面帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:54:55.873

在 AsyncTask 或 Thread 中加载您的声音文件。

您可以设置一个`OnLoadCompleteListener`以确切知道加载完成的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:57:25.213

如果我是对的，并且您的意思是您的`Application`班级，那么您将无法从那里显示进度条。但是您必须至少有一项活动，并且您可以在活动中显示进度条。

此外，您不应该在 UI 线程上进行诸如此类的繁重操作。在 中加载声音，在方法`AsyncTask`中显示进度条并在`onPreExecute()`方法中隐藏它`onPostExecute()`。

# c# - 从不同机器上的相同 C# 源代码可重复构建

> ID：11339086
> 
> 赞同：6
> 
> 时间：2012-07-05T06:46:23.330
> 
> 标签：c#, visual-studio, ildasm

我正在尝试生产一个足够智能的工具，可以通过编程检查由在不同时间在两个单独的机器上编译的相同 C# 代码生成的发布版本二进制文件，并得出结论该代码是相同的，同时能够获取任何代码更改（如果存在）用于生成这些二进制文件的 c# 代码。

我尝试过使用多种方法，但为了保持简短，我将坚持最新的尝试。我在二进制文件上使用 /text 选项运行 ildasm，并在文本中替换匿名字段等的 GUID，但是当二进制文件来自不同的电脑时，我发现 ILDASM /text 选项生成的文本被重新排序。源自相同代码但在不同机器上由相同设置编译的二进制文件也出现了严重的重新排序。任何关于如何控制 IL 重新排序的建议将不胜感激？

干杯

PS：任何可靠地实现这一点的替代策略也是最受欢迎的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T07:23:23.963

等待 Eric Lippert 醒来 :) - 来自@mikez 评论的社区 wiki：

当编译器团队的主要开发人员 (Eric Lippert) 发言时，您应该聆听：[http](http://ericlippert.com/2012/05/31/past-performance-is-no-guarantee-of-future-results/) ://ericlippert.com/2012/05/31/past-performance-is-no-guarantee-of-future-results/包含详细信息不这样做的解释和强烈建议（可能是为了回答这个精确的问题）：

> **两次编译相同的 C# 程序是否保证产生相同的二进制输出？**
> 
> 不。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T23:11:54.933

我发现根据 Eric Lippert 在他的帖子中提到的解决方案，可以通过将编译过程的处理器亲和性设置为 01 来实现他的客户最终解决的问题。在此之后，生成的可执行文件/dll 几乎相同使用了 som mvid 和 guid。使用文本模式在这些二进制文件上运行 ILDASM 并构建一个简单的散列工具来去除这些随机内容提供了这样的解决方案。我只是为了完成并帮助可能面临此问题的其他人而提供此内容。

# jquery - 更大图像的下一个和上一个功能

> ID：11339088
> 
> 赞同：3
> 
> 时间：2012-07-05T06:46:26.553
> 
> 标签：jquery

谁能帮我添加下一个和上一个的功能以获得更大的图像

```
jQuery(function($) {
    $('#thumbs').delegate('img','click', function(){
        var src = this.src.replace('thumb', 'large');
        $("#largeImage").fadeOut(function() {
            this.src = src;
            $(this).fadeIn();
        });
    }); 
});

<div id="page">
    <div id="gallery">
        <div id="panel">
            <img id="largeImage" src="images/image_01_large.jpg" />
        </div>    
        <div id="thumbs">
            <img src="images/image_01_thumb.jpg" alt="1st image description" />
            <img src="images/image_02_thumb.jpg" alt="2nd image description" />
            <img src="images/image_03_thumb.jpg" alt="3rd image description" />
            <img src="images/image_04_thumb.jpg" alt="4th image description" />
            <img src="images/image_05_thumb.jpg" alt="5th image description" />     
        </div>
    </div>
    <a href="#" id="next">Next</a> 
    <br />
    <a href="#" id="prev">Prev</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:19:21.247

这是添加功能的代码。

```
$(document).ready(function()
{
    function loadSlide(nSlide)
    {
        $('#thumbs img.current').removeClass('current');
        $(nSlide).addClass('current');

        var src = $(nSlide).attr('src').replace('thumb', 'large');
        $("#largeImage").fadeOut(function() 
        {
            this.src = src;
            $(this).fadeIn();
        });
    }

    $('#next').click(function()
    {   
        var cSlide = $('#thumbs img.current');
        if($(cSlide).next('img').length > 0)
            var nSlide = $(cSlide).next('img');
        else
            var nSlide = $('#thumbs img:first');

        loadSlide(nSlide);
    });

    $('#prev').click(function()
    {
        var cSlide = $('#thumbs img.current');  
        if($(cSlide).prev('img').length > 0)
            var nSlide = $(cSlide).prev('img');
        else
            var nSlide = $('#thumbs img:last');

        loadSlide(nSlide);
    });

    $('#thumbs img').click(function(){
        loadSlide(this);
    });

    loadSlide($('#thumbs img:first'));
}); 
```

# .htaccess - 为什么像 cnn 这样的大网站使用 robots.txt 而不是更好的 htaccess？

> ID：11339090
> 
> 赞同：0
> 
> 时间：2012-07-05T06:46:35.843
> 
> 标签：.htaccess

在我看来是不明智的。

例如检查这个：

```
http://edition.cnn.com/robots.txt
http://www.bbc.co.uk/robots.txt
http://www.guardian.co.uk/robots.txt 
```

据此：

```
http://www.joomla.org/robots.txt 
```

Joomla.org 没有更改默认管理文件夹：D

例如 prestashp 页面有一个空白的 robots.txt 文件，它并不完美，但在我看来至少更好：

```
http://www.prestashop.com/robots.txt 
```

这些人是愚蠢的还是他们认为知道他们的网络结构是什么样子就可以了？

为什么他们不使用 htaccess 拒绝机器人等的访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:28:52.730

问题是`.htaccess`不能直观地告诉访问者是搜索引擎机器人。

大多数机器人会在用户代理字符串中识别自己，但有些不会。

所有希望索引该站点的机器人都可以访问 Robots.txt，不道德的机器人不会这样做

1.  将自己标识为机器人
2.  请注意 robots.txt（否则他们会故意不遵守）。

# sql - sql server 2005 输出错误

> ID：11339092
> 
> 赞同：4
> 
> 时间：2012-07-05T06:46:46.697
> 
> 标签：sql, sql-server, sql-server-2005

我有 3 表库存，向内，问题

库存表的列和数据：

```
part_no | part_name | totalqty
10100        ciol      30
112233       abc       20
123456       coper      50 
```

向内表：

```
part_no | qty
123456   10
123456   20
10100    20
112233   15
10100    25 
```

问题表：

```
part_no | qty
112233   20
112233   15
123456   10
112233   25
10100    40
10100    20 
```

我想要的输出：

```
part_no | part_name  |inwardQty |issueQty
10100      coil         45     60
112233     abc          15     60
123456     coper        30     10 
```

以下是我写的查询，但没有给出我想要的输出

```
select s.part_no,s.part_name,sum(i.qty) as inwardQty,sum(p.qty)as issueQty 
from stock s 
left join inward i on s.part_no = i.part_no
left join issue p on s.part_no = p.part_no 
group by 
    s.part_no,s.part_name 
```

通过此查询获得以下输出：

```
part_no | part_name  |inwardQty |issueQty
10100      coil         90     120
112233     abc          45     60
123456     coper        30     20 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T06:53:08.793

问题是您将*每一*行 for`inward`与*每一*行 for匹配`issue`，他们正在处理相同的部分。我认为子查询在这里最好：

```
select s.part_no,s.part_name,i.qty as inwardQty,p.qty as issueQty 
from stock s 
left join
    (select part_no,sum(qty) as qty from inward group by part_no) i on s.part_no = i.part_no
left join
    (select part_no,sum(qty) as qty from issue group by part_no) p on s.part_no = p.part_no 
```

所以现在，每个连接中只有一个（或零个）行要连接，并且您没有得到笛卡尔积。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:10:08.187

试试这个查询：

```
SELECT 
    s.part_no, s.part_name,
    InwardQty = (SELECT SUM(qty) FROM @inward i WHERE i.part_no = s.part_no),
    IssueQty = (SELECT SUM(qty) FROM @issue p WHERE p.part_no = s.part_no)
FROM 
    dbo.stock s 
GROUP BY
    s.part_no, s.part_name 
```

给我你想要的输出。

# playframework-2.0 - Playframework 运行和 Global.onStart

> ID：11339100
> 
> 赞同：5
> 
> 时间：2012-07-05T06:47:31.147
> 
> 标签：playframework-2.0

当我在 DEV 模式下运行应用程序（播放运行）时，我的 Global.onStart 方法没有被执行。但是，如果我“开始”我的应用程序，那么 Global.onStart 会正常运行。

我如何通过“播放运行”来执行 Global.onStart ？

我使用 java 版本 2.0.2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T06:18:48.353

> > In dev mode, onStart is called with the first request

That was the answer for my question - thank you!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T17:24:57.070

当您在全局对象中添加方法时，您可能必须终止当前应用程序并重新启动它才能重新加载您的更改。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-20T16:00:16.133

如果您没有`application.mode`在 conf 文件中指定，则使用`play run`和`play start`triggers`dev`和`prod`模式启动应用程序，分别 [播放 docs](http://www.playframework.com/documentation/2.1.1/Production)。

也就是说，考虑到模式之间的差异（更多细节[在这里](http://playframework.wordpress.com/2011/03/05/playframework-dev-mode-never-use-in-production/)），即

> Play 立即启动应用程序（包括任何引导作业），而不是等待第一个请求，再次为首次使用增加一点性能优势

您可能想要`play start`或在配置文件中将模式更改为 PROD。

# git - 如何将协作者添加到 openshift git repo

> ID：11339102
> 
> 赞同：8
> 
> 时间：2012-07-05T06:47:45.767
> 
> 标签：git, openshift

我在 redhat openshift 中设置了一个**应用程序**，并且能够提交和推送。

我的问题是，我如何将我的队友包含到这个存储库中，以便他们也可以做同样的事情。

git 和 openshift 的新手。帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T04:58:32.553

通过 Web 控制台或命令行工具将他们的 SSH 公钥添加到您的应用程序。在命令行中是 rhc-sshkey。

添加这些密钥后，您的其他开发人员应该能够使用您用来与 repo 交互的相同 git 命令（通过 SSH）。

“rhc app show”应该给你 SSH git url。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T10:51:18.727

遵循以下链接中的分步说明将有所帮助：

[https://www.openshift.com/blogs/managing-multiple-ssh-keys-on-openshift](https://www.openshift.com/blogs/managing-multiple-ssh-keys-on-openshift)

# php - 如何在 php 中构建一个 SOAP api

> ID：11339108
> 
> 赞同：0
> 
> 时间：2012-07-05T06:48:18.663
> 
> 标签：php, soapui, nusoap

我是 SOAP 新手，仍在学习语法。我在 PHP 工作。我必须在 PHP 中构建一个 SOAP 应用程序。到处搜索教程，示例..如果有人知道学习它的好方法，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:53:03.073

我发现 Zend Soap 框架非常易于使用，比 NuSoap 或 SOAP 的原生 PHP 功能更易于使用。

StackOverflow 上还有其他关于此主题的帖子：

*   [如何使用 zend soap 生成 wsdl](https://stackoverflow.com/questions/4680651/how-to-generate-a-wsdl-using-zend-soap)

您可以在此处找到有关 Zend Soap 的更多信息：

*   [http://bogdan-albei.blogspot.com/2009/05/quickstart-web-services-with-soap-and.html](http://bogdan-albei.blogspot.com/2009/05/quickstart-web-services-with-soap-and.html)

*   [http://framework.zend.com/manual/en/zend.soap.html](http://framework.zend.com/manual/en/zend.soap.html)

# makefile - 内核 Makefile 中的 := 和 += 有什么区别？

> ID：11339110
> 
> 赞同：2
> 
> 时间：2012-07-05T06:48:21.870
> 
> 标签：makefile, linux-kernel, kernel

:= 和 += 在 Linux Kernel Makefiles 中是否相同并且可以互换使用？如果不是，那么两者有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T07:53:42.480

正如其他人所说，`:=`是任务。

`:=`但是和之间有很好的区别`=`。在大多数情况下，这并不重要，但它可能会产生很大的不同。

`X = $(Y)`定义`X`为递归变量，类似于 C 预处理器宏。
无论何时`X`被引用，`Y`都会使用 的值。
扩展发生在`X`扩展时。所以你定义`Y`了之后就可以定义了`X`，就OK了。

`X := $(Y)`定义`X`为一个简单的变量。这更像是一个 C 作业。
现在，`Y`在定义时已扩展，因此稍后更改它将无济于事。

`X += $(Y)`附加到`X`，但保持其类型。
如果`X`之前用 定义`=`，`Y`则不会立即展开。如果`X`从未定义，则相同。
如果`X`之前用 , 定义`:=`，`Y`将立即展开。

你可以试试这个例子makefile：

```
X = 1

Y  = $(X)
Z := $(X)

X = 2

Y += $(X)
Z += $(X)

X = 3

test:
        @echo "Y = $(Y)"
        @echo "Z = $(Z)" 
```

它打印

```
Y = 3 3
Z = 1 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T06:50:06.917

:= 类似于 =, i。e 这是一项任务。

+= 是一个连接和赋值运算符。

## 例子：

```
VARIABLE := abc
# here VARIABLE is abc
VARIABLE := def
# VARIABLE is now def only!

VARIABLE_2 = abc
# VARIABLE_2 is now abc
VARIABLE_2 += def
# VARIABLE_2 is abc def 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T06:52:16.417

`:=`是赋值。 `+=`是串联。见[这里。](http://www.linuxforu.com/2012/06/gnu-make-in-detail-for-beginners/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T21:53:41.380

:= 清除您要分配的变量的先前值，而 += 添加（连接）到变量

例如，假设 CFLAGS 已设置为 -Wundef

如果我们这样做，

```
CFLAGS := -Wall 
```

CFLAGS 现在设置为“-Wall”

如果我们这样做，

```
CFLAGS += -Wall 
```

CFLAGS 现在变为“-Wundef -Wall”

它经常在 Linux Makefiles 中使用。

# javascript - 如何让javascript提示框取消按钮什么都不做？

> ID：11339119
> 
> 赞同：0
> 
> 时间：2012-07-05T06:49:33.903
> 
> 标签：javascript, prompt

如何在 javascript 提示框中制作取消按钮，而不是发送“null”值，而不是像确认框上的取消按钮一样执行任何操作？

或者是否可以从提示框中删除取消按钮，以便只剩下“确定”按钮？

这是我尝试过的，但它仍然将 null 值发送到我的 PHP 文件。

```
 function AskQuestion(data)
{
   var id = getUrlVars()["id"];
   console.log(data);
   if(data.key[0].status == "ok") {
      var reply = prompt(data.key[0].REPLY, "");
      var index = data.key[0].IND;
      if(reply != "" && reply !== null) {
      //do nothing
      }else{
      jQuery.ajax({ type: "POST",
                    url: serviceURL + "message.php",
                    data: 'id='+id+'&arvo='+reply+'&index='+index,
                    cache: false,
                    success: AskQuestion});
                    }
   } else {
     window.location = "page.html"
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:52:10.630

一些想法：

```
reply = jQuery.trim( prompt(...) || "" );
if( reply ){
  jQuery.ajax(...)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:02:49.387

您以错误的方式对返回值进行了测试。就像`// do nothing`用户输入文本时是你一样，`ajax`当他们没有输入时调用。改变

```
if(reply != "" && reply !== null) {
    // do nothing 
```

到

```
if(reply == null || jQuery.trim(reply).length == 0) {
    // do nothing 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T06:50:55.290

你可以直接返回退出函数

# android - 将 Android 项目链接到 Dropbox 会出错？

> ID：11339123
> 
> 赞同：0
> 
> 时间：2012-07-05T06:49:47.540
> 
> 标签：android, dropbox

我正在使用 Android 2.1 平台。在我的第一个项目 [说**联系人**] 中，我正在尝试从模拟器中获取所有联系人。这项工作是使用 Eclipse 和 AVD 完成的。在下一个项目 [说**AppBox** ] 中，我进行了身份验证投递箱。

在同一个项目中，我使用了 DropBoxUtility.java 类。现在我可以使用这个项目在我的 DropBox 文件夹中创建文件和文件夹。但我无法将联系人项目和 AppBox 项目合并到一个项目中。我正在使用 CONTACT_URI 获取所有联系人，我在合并时遇到的错误就在这一行

```
ContentResolver cr = getContentResolver(); 
```

**错误是“DropBoxUtility 类型的方法 getContentResolver() 未定义”**

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:51:20.490

尝试使用`getApplicationContext()`：

```
ContentResolver cr = getApplicationContext().getContentResolver() ; 
```

# jquery - jquery：如何使用键盘快捷键 F2 和 F3

> ID：11339131
> 
> 赞同：4
> 
> 时间：2012-07-05T06:50:09.283
> 
> 标签：jquery, keypress

再会，

我想知道我们是否可以使用键盘快捷键`F2`并`F3`执行功能。如果有，也许可以将您的代码分享给我。下面是我制作快捷键的想法。我已经尝试过但无法正常工作。

```
$("#ENQUIRY_VIEWMETER").keypress(function(event) {
    if(event.which == 113) { //F2
        updateMtr();
    } else if(event.which == 114) { //F3
        resetView();
    }
}); 
```

p/s：或者可能需要对我的代码进行一些修改。:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T06:55:59.947

尝试使用`keydown`事件而不是`keypress`. 该`keydown`事件告诉您按下了哪个实际键，但`keypress`更多的是关于结果的字符。

并返回`false`，以便这些键的默认浏览器行为（如果有）不会继续（不要返回`false`其他键）。

```
$("#ENQUIRY_VIEWMETER").keydown(function(event) {
    if(event.which == 113) { //F2
        updateMtr();
        return false;
    }
    else if(event.which == 114) { //F3
        resetView();
        return false;
    }
}); 
```

演示：http: [//jsfiddle.net/TTrPp/](http://jsfiddle.net/TTrPp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:55:10.207

试试这样

```
$(document).keypress(function(e){
   if(e.charCode == 97){
      alert("a");
      return false;
  }
 }) 
```

检查这个[jQuery HotKey 插件](http://code.google.com/p/js-hotkeys/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-08T06:31:30.113

```
document.onkeyup = KeyCheck;

function KeyCheck(e){

   var KeyID = (window.event) ? event.keyCode : e.keyCode;

   if(KeyID == 113){ 

      updateMtr();

   } else if(KeyID == 114) {

       resetView();
    }
} 
```

# cpu-architecture - 运行时指令检测

> ID：11339134
> 
> 赞同：0
> 
> 时间：2012-07-05T06:50:25.310
> 
> 标签：cpu-architecture, machine-code, code-translation, machine-instruction

我想识别和分析在整个代码运行过程中执行的不同机器指令和每个指令所需的时钟周期。

有没有办法简单地做到这一点？动态二进制翻译可能是一种方式，但我正在寻找更简单的机制。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:17:33.070

如果您正在编程，请考虑使用性能分析工具，例如分析工具，例如 Intel VTune (http://en.wikipedia.org/wiki/VTune) 或 oprof。

大多数程序员访问周期精确模拟器的情况要少得多，尽管在嵌入式空间中这很常见。

动态二进制翻译可能不是在单个指令粒度上测量程序的好方法。[像http://www.pintool.org/](http://www.pintool.org/)这样的DBT 工具确实允许您插入代码来读取计时器。您可以围绕单个指令执行此操作太慢，并且仪器会增加太多开销。但是在函数粒度上这样做是可以的。基本块粒度，即每个分支，边界。

底线：首先尝试像 VTune 这样的分析工具。然后去寻找一个周期精确的模拟器。

# c# - ITestSuiteBase 的父属性总是返回 null

> ID：11339136
> 
> 赞同：2
> 
> 时间：2012-07-05T06:50:41.363
> 
> 标签：c#, tfs-sdk

我们有一个使用 TFS 和 MTM SDK 的要求，我们需要检索测试套件信息。作为要求的一部分，我将获得测试套件 ID，并使用它我应该能够检索相应的父测试套件，直到我到达顶部。我的示例代码片段如下所示

```
ITestSuiteBase testSuite = teamProject.TestSuites.Find(suiteId);
            List<TFSItem> suiteList = new List<TFSItem>();

            if (testSuite != null)
            {
                // this is the test plan
                if (testSuite.Parent == null)
                {
                    suiteList.Add(new TFSItem(testSuite.Id.ToString(), testSuite.Title));
                }
                else
                {
                    var tempSuite = testSuite;
                    while (tempSuite.Parent != null)
                    {
                        suiteList.Add(new TFSItem(tempSuite.Id.ToString(), tempSuite.Title));
                        tempSuite = tempSuite.Parent;
                    }

                    suiteList.Add(new TFSItem(tempSuite.Id.ToString(), tempSuite.Title));
                }
            } 
```

无论测试套件类型如何（动态测试套件或静态测试套件），父级始终返回 null。

谁能让我知道我在这里遗漏了什么？如果有任何其他替代解决方案，请告诉我。

谢谢，基兰

# actionscript-3 - AS3 中的 ComboBox “吃掉”最后一个字母

> ID：11339140
> 
> 赞同：0
> 
> 时间：2012-07-05T06:50:56.063
> 
> 标签：actionscript-3, flash

我对 Flash 组件 ComboBox 有疑问。当我不想在 ComboBox 中保存名称时，它总是没有最后一个字母！？

这是代码：

```
 var input_name:String;
    text_field.addEventListener (TextEvent.TEXT_INPUT, text_input);
    button.addEventListener (MouseEvent.CLICK, save);
    function save (e:MouseEvent):void
    {
      text_field.visible = true;
      text_field.adddEventListener(KeyboardEvent.KEY_DOWN, save_text);
    }

    function text_input(e:TextEvent):void
      {
        input_name = text_field.text;
      }

    function save_text(e:KeyboardEvent):void
    {
       var keyPressed:String = e.keyCode.toString();
       if (keyPressed == "13")
        {
           combo.addItem({label:input_name, data:input_name});
        }
     } 
```

因此，当我在文本字段中输入“foo”并按 ENTER 时，它会保存在组合框中，只是“fo”...

谢谢你的答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:54:52.647

`TextEvent.TEXT_INPUT`在值更改之前调度。

`Event.CHANGE`在值更改后调度。

这将起作用，包括处理`enter`密钥。

```
import flash.events.MouseEvent;
import flash.events.Event;

var input_name:String;

text_field.addEventListener(Event.CHANGE, text_input);
text_field.addEventListener("enter", save);
button.addEventListener(MouseEvent.CLICK, save);

function text_input(e:Event):void
{
    input_name = text_field.text;
}

function save(e:*):void
{
    text_field.visible = true;
    combo.addItem({label:input_name, data:input_name});
} 
```

# java - JTable多选不使用键盘只使用鼠标

> ID：11339154
> 
> 赞同：1
> 
> 时间：2012-07-05T06:51:46.663
> 
> 标签：java, swing, jtable

这是我的代码。我想在 中选择多行`JTable`，我正在使用以下行：

```
table.getColumnModel().getSelectionModel().setSelectionMode(
    javax.swing.ListSelectionModel.MULTIPLE_INTERVAL_SELECTION); 
```

使用上面的行，我可以使用键盘选择多行，但要求只能使用鼠标进行选择。

除此以外，Java 仅使用鼠标而不使用键盘提供多项选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:08:20.683

如果您有此代码，则只需按下 ctrl + 单击多个。

编辑：但如果你不想使用键盘，我想，试试这个：

[在不使用 Ctrl/Command 键的情况下选择 JList 中的多个项目](https://stackoverflow.com/questions/2404546/select-multiple-items-in-jlist-without-using-the-ctrl-command-key)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T07:09:22.797

我不认为这是可能的。我建议在表格中添加一个附加列，其中包含一个复选框，允许将该行标记为选中。当然，您将无法使用表格选择模型来知道选择了哪些行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T20:05:05.757

是的，您可以通过覆盖 changeSelection 函数来选择多行而不使用键盘，如下所示：

```
@Override
        public void changeSelection(int rowIndex, int columnIndex, boolean toggle, boolean extend) {
            latestClickedRowIndex = rowIndex;
            ListSelectionModel selectionModel = getSelectionModel();
            boolean selected = selectionModel.isSelectedIndex(rowIndex);
            //throw new UnsupportedOperationException("Paila.");
            if (selected) {
                selectionModel.removeSelectionInterval(rowIndex, rowIndex);
                getValueAt(rowIndex, columnIndex);
            } else {
                selectionModel.addSelectionInterval(rowIndex, rowIndex);
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-08T08:48:15.363

我终于使用了这段代码：

```
JTable table = new JTable(){
    @Override
    public void changeSelection(int rowIndex, int columnIndex, boolean toggle, boolean extend) {
        super.changeSelection(rowIndex, columnIndex, true, extend);
    }
}; 
```

这样 CTRL(toogle) 总是被推送(true)。

# jmeter - 在 Jmeter 中提供动态 IP 地址

> ID：11339155
> 
> 赞同：2
> 
> 时间：2012-07-05T06:51:50.920
> 
> 标签：jmeter, load-testing

我有一个 Jmeter 脚本，用于访问两个 IP 地址/服务器名称。目前我使用两个 Jmeter 实例来访问两个服务器名称。有没有办法在单个 Jmeter 实例中执行此操作，例如 HTTP 请求默认值中服务器名称/IP 地址的参数化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:19:31.003

Interesting. I never tried before, but it seems the **dynamic values, which you define in request defaults are always re-evaluated**.

So you can define it as a javascript random and two strings depending on random value:

```
${__javaScript((Math.random()<0.5)?'ALMA':'KORTE')} 
```

Screenshots of the plan and the results:

![Http request defaults with JS function](../Images/883abfb0ee78cdccca19c29b9f68b44b.png) ![HTTP request sampler](../Images/40b36ee96b15030adcf400da2e61c69c.png) ![One ](../Images/926d288e28151fd66a7fa1e5e57f1644.png) ![One ](../Images/a286ff511e8c05ea93a65515f07800bb.png)

Generally its still nicer to put the names into a csv file, and to use CSV config element, and to say, that the CSV has a rollover. Quote from [best practices](http://jmeter.apache.org/usermanual/best-practices.html):

> 16.5 User variables Some test plans need to use different values for different users/threads. For example, you might want to test a sequence that requires a unique login for each user. This is easy to achieve with the facilities provided by JMeter.
> 
> For example:
> 
> Create a text file containing the user names and passwords, separated by commas. Put this in the same directory as your test plan. Add a CSV DataSet configuration element to the test plan. Name the variables USER and PASS. Replace the login name with ${USER} and the password with ${PASS} on the appropriate samplers The CSV Data Set element will read a new line for each thread.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T11:44:55.743

虽然我喜欢 Gábor Lipták 的回答，但我会提供另一种乐趣。

假设您想在`DEV`和`PROD`环境（假想环境）上执行测试。where `DEV`connected to `host1`, `PROD`connected to`host2`和 endpoints 相同`/myserviceendpoint`

因此，首先添加`User Defined Variables`到您的线程组。让我们添加两个变量：

`ENVIRONMENT`->`${__P(environment,host1)}`和 `ENDPOINT_PATH`->`/myserviceendpoint`

添加`Http Request sampler`并在里面`Server Name or IP`设置它的值`${ENVIRONMENT}`，其他端口等也会相应地改变。

所以现在你的默认环境是`DEV`. 如果要更改环境以`PROD`添加`BSF Preprocessor`并将`ENVIRONMENT`变量更改为`PROD`实例。

`vars.put("ENVIRONMENT", "host2");`

因此，您可以在测试中禁用/启用它以在/`BSF Post Processor`之间切换。这适用于 GUI 模式。`DEV``PROD`

当您进行大型测试并且在没有 GUI 模式的情况下运行 jmeter 时，这将派上用场。这部分很酷`${__P(environment,host1)}`，如果您不通过命令行传递任何参数，`DEV`则将使用值，否则您可以注入值来覆盖`DEV`环境，即（[在此处](http://jmeter.apache.org/usermanual/get-started.html#override)查看更多信息）：

```
jmeter -n -t yourtest.jmx -l testresults.xml -Jenvironment=host2 //running  `PROD`
jmeter -n -t yourtest.jmx -l testresults.xml //running  `DEV` 
```

这是屏幕截图（测试计划）的样子：

![在此处输入图像描述](../Images/10b81d32c4bab958d3740008e241c31e.png)

结果（为了清楚起见，添加了一些样本）：

![在此处输入图像描述](../Images/fd9c0ea4987b4ae546a4c6e246a0c59f.png)

因此，您可以切换环境或在没有 gui 的情况下运行并通过命令行注入。您也可以对其他属性执行此操作，即端口/端点等。

# actionscript-3 - 声云和FLASH

> ID：11339156
> 
> 赞同：0
> 
> 时间：2012-07-05T06:51:59.700
> 
> 标签：actionscript-3, flash, api, audio, soundcloud

我在连接 flash 和 sound cloud api 时遇到了麻烦，所以如果有经验的人可以帮助我，我真的很感激。

1.  是否可以在不嵌入 sc 播放器的情况下通过 flash 流式传输音频文件？我的意思是在没有任何重定向的情况下访问音频文件，并通过 crossdomain.xml 授予访问权限。

2.  是否有最新的文档如何验证应用程序、如何获取令牌以及所有必要的东西？

3.  Flash 中是否有任何示例解决方案或教程是最新的并且确实有效（我发现几乎已经过时了）？

提前感谢您的回答。

问候：加布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-22T16:18:08.140

## Point 2) 如何使用 Flash 进行身份验证？

如果您正在构建 Flash Web 应用程序，您可以使用 Javascript SDK 进行身份验证，然后通过 Flash 外部接口将访问令牌传递回 Flash 应用程序。

有大量关于如何在 Javascript 中进行身份验证的信息。一个很棒的演练是关于 codecademy： http: [//www.codecademy.com/courses/javascript-intermediate-en-txGOj/0/1](http://www.codecademy.com/courses/javascript-intermediate-en-txGOj/0/1)

# asp.net - 在 Datalist 和 Datatable 中使用 Dropdownlist 过滤记录

> ID：11339160
> 
> 赞同：0
> 
> 时间：2012-07-05T06:52:07.483
> 
> 标签：asp.net, drop-down-menu, datalist

在这里我需要使用`Dropdownlist`in过滤数据`Datalist`

我有超过 1000 条记录，它存储的所有内容都使用它们的类别名称......

它在 String(A,B,C,D......to Z) 和

我在 dropdownlist(1.2,3,5,10,all) 中有一些值在这里我需要如何过滤 datalist 中的数据意味着将 dropdownindex 更改为 1 在这种情况下它只显示字母 A 中可用的记录，

如果索引更改 2 它应该显示记录 od A & B ......等等......通过索引所有它应该显示数据库中的所有记录......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:28:48.080

将 DropDownlist 的 AutoPostBack 属性设置为 true 并使用 SelectedIndexChanged 事件。

```
 <asp:DropDownList ID="DDwn1" runat="server" AutoPostBack="true" OnSelectedIndexChanged="DDwn1_SelectedIndexChanged">
        <asp:ListItem Text="Sort ascending" Value="ASC"></asp:ListItem>
        <asp:ListItem Text="Sort descending" Value="DESC"></asp:ListItem>
    </asp:DropDownList>

 private void showData(string sortDirection)
    {
        //bind to data list
    }

    protected void DDwn1_SelectedIndexChanged(object sender, EventArgs e)
    {
        showData(DDwn1.SelectedValue);
    } 
```

# android - Android小部件onClick不起作用

> ID：11339162
> 
> 赞同：2
> 
> 时间：2012-07-05T06:52:11.550
> 
> 标签：android, android-intent, onclick, widget

老实说，我不知道我在这里做错了什么。昨晚我有这个工作，我弄乱了代码，我很确定我把它放回了原来的位置，但点击它时它根本没有做任何事情。

这是我的代码

```
 public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    Log.d(LOG_TAG, "onUpdate(): ");

    for (int appWidgetId : appWidgetIds) {

    Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=com.xx.xx"));
    PendingIntent pendingIntent = PendingIntent.getActivity(context, appWidgetId, intent, PendingIntent.FLAG_UPDATE_CURRENT );

    RemoteViews remoteView = new RemoteViews(context.getPackageName(), R.layout.widget);
    remoteView.setOnClickPendingIntent(R.id.image, pendingIntent);

    }        
    super.onUpdate(context, appWidgetManager, appWidgetIds); 
```

我只是想在单击小部件时将用户带到市场，但什么也没有发生。

这是一个简单的修复吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T03:29:58.397

我的天啊。我在这上面花了大约 4-5 个小时.. 才意识到我做错了什么。

我错过了'appWidgetManager.updateAppWidget（appWidgetId，remoteView）；' 在我的 setOnClickPendingIntent 之后。

编程的乐趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:02:20.790

对于处理单击主屏幕小部件，您需要在 manifast 中注册自定义 Reviver 为：

```
<intent-filter>
    <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    <action android:name="com.imranandroid.xxx.xxxx.ACTION_WIDGET_CLICK"/>
    <action android:name="android.appwidget.action.APPWIDGET_DELETED"/>

</intent-filter>
    <meta-data android:name="android.appwidget.provider"
        android:resource="@xml/widget_info" />
</receiver> 
```

并使用小部件布局或按钮附加此操作：

```
public class SlientwidgetProvider extends AppWidgetProvider {
    public static String ACTION_WIDGET_CLICK= "ActionReceiverClick";
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {  
   RemoteViews rview = new RemoteViews(paramContext.getPackageName(), R.layout.widget_layoutmain);
    Intent active = new Intent(paramContext, SlientwidgetProvider.class);
    active.setAction(Globfilds.ACTION_WIDGET_CLICK);
    ///.... 
```

您可以在此处查看用于处理单击主屏幕小部件的完整代码：

[静音切换](https://sites.google.com/site/imrankhanandroid/Silenttoggle.rar?attredirects=0&d=1)

# architecture - 使用 NServiceBus 的多线程 CQRS

> ID：11339165
> 
> 赞同：3
> 
> 时间：2012-07-05T06:52:21.050
> 
> 标签：architecture, nservicebus, cqrs

我目前正在研究使用 NServiceBus 来解决以下问题。我只是想确保我不会因此而陷入困境。

我有一个基于 CQRS 架构的解决方案。本质上，我通过 NServiceBus 将一系列命令传递到端点，我执行一些处理以更改聚合根的状态，然后触发一系列事件以通知系统的其余部分更改。

我遇到的问题是，这一切都在一个线程上运行良好，我无需担心在更改状态时锁定任何给定的聚合根。

我们已经到了一个线程不会切断它的地步，我需要开始研究使用多个工作线程/进程来处理消息。

基于我可以同时处理多个聚合根的事实，有一个自然的任务分解，但是我不能同时为同一个聚合根处理多个消息，因为这将导致高度争用，因为接收消息的速度。

我试图避免需要锁定特定聚合根 ID 而是将聚合根分配给队列/线程/进程的情况，这将确保同步处理来自同一聚合根的所有消息。

我正在使用带有 NServiceBus 的 Pub/Sub 模型来发布事件。据我所知，问题是这些事件需要从同一个端点发布，即使该消息的处理可能会委托给另一个端点。即，我需要诱使系统认为消息是从“MyDomainQueue”发布的，而实际上该消息是在“MyDomainQueue-Worker1”上处理的。

我的计划是创建一个自定义分发器，它允许主端点将消息处理委托给工作端点。分发器将以循环方式将队列分配给任何给定的聚合根。主端点将向这些工作人员发送命令，进行处理，工作人员将回复一个事件列表。然后主端点将事件发布回总线。

我正在寻找有关这种方法的一些反馈。感觉就像我正在努力让它工作，我只是想检查是否有其他人处理过类似的问题。也许 NServiceBus 是适合这项工作的错误工具，或者我的方法可能是错误的。欢迎任何和所有反馈。

谢谢，

PS - 我也担心上述解决方案所需的配置量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:53:47.597

关于从不同端点发布事件，我认为您有点过于沉迷于从一个服务发布事件的概念。这仅在逻辑意义上是正确的——一个事件应该由一个*逻辑*服务完全拥有，但是*一个逻辑服务可以由许多端点组成*。

事件并没有真正从队列中发布。当您想到发布事件的队列时，您真正谈论的是输入队列，您在其中发送该事件的订阅请求。

因此，您可以让多个端点都发布同一个事件，只要该事件的订阅请求都到同一个地方。

这通常是这种情况，例如，在批量与优先级​​场景中，您有两个端点处理相同的命令（然后发布相同的事件），除了一个是具有长 SLA 的批量，另一个具有更短的SLA - 也许它是一个大客户，或者命令来自等待响应的实际人类用户。QueueA 和 PriorityQueueA 都处理相同的命令并发布相同的事件，但 QueueA 处理订阅，因此两个进程都从 QueueA“发布”。

也就是说，您是否尝试过让多个线程访问聚合根？即使存在一些争用，您也可能会发现，只要进行少量重试，它可能并没有您想象的那么有争议。我在使用 NServiceBus 的生产过程中有一些相当有争议的过程，虽然我偶尔在日志中看到争用的证据是一个例外，但在重试 5 次后，我从来没有任何进展到错误队列。

-- 最近，添加了二级重试功能，这进一步降低了消息最终进入错误队列的机会。

如果有这么多争用，另一种策略可能是维护当前正在操作的聚合根的内存列表，然后如果有消息进入，应该“锁定”，只需调用`Bus.HandleCurrentMessageLater()`以将该消息粘贴到最后的队列。

# sql - SQL 在中间。比较记录和范围（两个不同的表）

> ID：11339166
> 
> 赞同：0
> 
> 时间：2012-07-05T06:52:23.670
> 
> 标签：sql, relational-database, between, inet

我想要`ip`不在 DHCP 范围内的记录。该`ip`表有上万条记录，范围约千。

```
CREATE TABLE ip (ip int);
CREATE TABLE dhcprange (start int,end int);
INSERT INTO found_ips VALUES 
(INET_ATON('10.0.0.10')),
(INET_ATON('10.0.0.11')),
(INET_ATON('10.0.0.12')),
(INET_ATON('10.0.0.51')),
(INET_ATON('10.0.0.52')
);

INSERT INTO dhcpranges VALUES
(INET_ATON('10.0.0.50'),INET_ATON('10.0.0.60'),
(INET_ATON('10.0.0.70'),INET_ATON('10.0.0.100') 
); 
```

（不幸的是，这在 sqlfiddle 上不起作用（不支持inet_aton？））

这不起作用：

```
SELECT ip FROM ip WHERE ip NOT BETWEEN(SELECT start,end FROM dhcprange) 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T06:54:57.603

有几种方法可以做到这一点。最好的方法是像这样使用`LEFT JOIN`/ `IS NULL`：

```
SELECT ip
FROM ip
LEFT JOIN dhcpranges ON ip BETWEEN start AND end
WHERE start IS NULL 
```

你可以做一个不相关的子查询：

```
SELECT ip
FROM ip
WHERE ip NOT IN (SELECT ip FROM ip INNER JOIN dhcpranges WHERE ip BETWEEN start AND end) 
```

或使用相关子查询：

```
SELECT a.ip
FROM ip a
WHERE NOT EXISTS (SELECT 1 FROM dhcpranges WHERE a.ip BETWEEN start AND end) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T06:57:32.373

```
SELECT i.ip 
FROM ip i 
WHERE NOT EXISTS (
   SELECT NULL
   FROM dhcprange d
   WHERE i.ip BETWEEN d.start AND d.end) 
```

# c# - 有条件地加载 UserControl

> ID：11339167
> 
> 赞同：1
> 
> 时间：2012-07-05T06:52:33.313
> 
> 标签：c#, wpf

我想根据属性有条件地加载 UserControl。如果属性为“true”，那么我们在 XAML 中加载 UserControl。假设该属性名为：`IsCameraSupported`。将其设置`Visibility`为**不**`Collapsed`应该是正确的解决方案，因为我完全不想将它包含在 XAML 文件中。

 **有人可以给我一个代码示例来执行此操作，仅在 XAML 中吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:56:43.923

**编辑** 我乍一看误解了这个问题。这是更新的响应。

您可以使用框架控件。在 Frame 控件中，您可以导航到具有相机控件的 Page。

如何从视图模型调用视图方法

1.  从 View Model 中的 IsCameraSupported setter 触发事件。
2.  订阅 View 到 View Model 事件
3.  在视图代码后面的事件处理程序中调用 Frame.Navigate。

**原始答案**

您可以创建 BooleanToVisibilityConverter，并使用 DataBinding。

[http://www.rhyous.com/2011/02/22/binding-visibility-to-a-bool-value-in-wpf/](http://www.rhyous.com/2011/02/22/binding-visibility-to-a-bool-value-in-wpf/)

[http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)

转换器代码

```
public class BooleanVisibilityConverter : IValueConverter
{
    #region Constructors

    public BooleanVisibilityConverter()
        : this(true)
    { }

    public BooleanVisibilityConverter(bool collapseWhenInvisible)
        : base()
    {
        CollapseWhenInvisible = collapseWhenInvisible;
    }

    #endregion

    #region Properties

    public bool CollapseWhenInvisible { get; set; }

    public Visibility FalseVisibility
    {
        get
        {
            if (CollapseWhenInvisible)
                return Visibility.Collapsed;
            else
                return Visibility.Hidden;
        }
    }

    #endregion

    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            return Visibility.Visible;
        if ((bool)value)
            return Visibility.Visible;
        else
            return FalseVisibility;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            return true;
        return ((Visibility)value == Visibility.Visible);
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T13:35:26.247

我会在你的if is的集合中使用`ContentControl`and`DataTrigger``ContentTemplate``UserControl``IsCameraSupported``True`

```
<DataTemplate x:Key="MyUserControlTemplate">
    <local:MyUserControl />
</DataTemplate>

<ContentControl>
    <ContentControl.Style>
        <Style TargetType="{x:Type ContentControl}">
            <Style.Triggers>
                <DataTrigger Property="{Binding IsCameraSupported}" Value="True">
                    <Setter Property="ContentTemplate" Value="{StaticResource MyUserControlTemplate}" />
                </DataTrigger>
            </Style.Triggers>  
        </Style>
    </ContentControl.Style>
</ContentControl> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T06:56:31.970

当 yr bool 为 true 时，使用 Trigger 或 Converter 类将可见性设置为折叠

在运行时你可以这样做

```
if(IsCameraSupported)
{
    var myControl = new MyControl();
    MyCanvas.Children.Add(myControl);
    Canvas.SetLeft(myControl, 20);
    Canvas.SetTop(myControl, 20);

} 
```**

# monitoring - 在 Cloudfoundry 上监控 Spring Web 应用程序

> ID：11339169
> 
> 赞同：0
> 
> 时间：2012-07-05T06:52:51.580
> 
> 标签：monitoring, cloud-foundry, btrace

我打算监视部署在 cloudfoundry 上的 Spring Web 应用程序中方法的执行时间。

我尝试在部署期间将 BTrace 与应用程序集成，但没有成功。

有什么工具可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:19:37.233

您可以尝试在 Cloud Foundry 上使用 Spring Insight：http: [//insight.cloudfoundry.com/](http://insight.cloudfoundry.com/)

从他们的常见问题解答中：

> Insight 是一种用于开发和生产的字节码检测工具。它旨在为用户应用程序的操作提供轻量级的可见性，并使应用程序能够更轻松地过渡到生产环境。

# ruby-on-rails - 为什么我需要自我？

> ID：11339174
> 
> 赞同：0
> 
> 时间：2012-07-05T06:53:13.610
> 
> 标签：ruby-on-rails, ruby

`self`我需要在这个模型的方法中是否有特定的原因？我正在从另一个控制器访问它。

```
 def self.search(query)
    if query
      find(:all, conditions: ['lower(first_name) LIKE ? OR lower(last_name) LIKE ?', "%#{query.downcase}%", "%#{query.downcase}%"])
    else
      find(:all)
    end
  end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T06:56:48.787

在 ruby​​ 中，self 用于类方法（相对于实例方法），相当于其他语言中的静态方法。

例子：

```
class Wtf
    def omg
    end
    def self.lol
    end
end

Wtf.new.omg
Wtf.lol 
```

# jquery-ui - jqgrid TreeGrid 无法看到展开列的内容

> ID：11339177
> 
> 赞同：0
> 
> 时间：2012-07-05T06:53:44.727
> 
> 标签：jquery-ui, jquery, jqgrid

在使用 jQuery jqgrid 的 treegrid 类型时呈现扩展列文本时遇到问题。这是我的树网格定义和服务器的响应，如果有人可以帮助我，我会很高兴？

提前致谢。

**Javascript**

```
menuGrid.jqGrid({
    url:'kullanici/loadMenu.ajax', 
    //enable TreeGrid
    treeGrid: true,
    //set TreeGrid model
    treeGridModel: 'adjacency', //'nested', //'adjacency',
    //set expand column
    ExpandColumn: 'Text',
    width: 550,
    datatype: 'json',
    viewrecords: true,
    loadonce: true,
    colNames: ['ID', 'Text'],
    colModel: [
        { name: 'id', index: 'id', width: 20, align: 'left', editable: false, key: true, sorttype:'int', hidden: false },
        { name: 'Text', index: 'menuName', width: 120, sortable: true, align: 'left' }
    ],
    jsonReader: { 
        repeatitems : false,
        id: 'id'
    },
    sortname: 'id',
    sortorder: 'asc',
    height: 200,
    sortable: true,
    enabletooltips: true,
    caption: 'Menü Ağacı'
});
menuGrid.jqGrid('navGrid','#paddtree'); 
```

**来自服务器的 JSON 响应**

```
{"rows":[{"expanded":true,"id":1,"isLeaf":false,"level":0,"loaded":true,"text":"Kullanici Islemleri"},{"expanded":false,"id":2,"isLeaf":true,"level":1,"loaded":true,"parent":1,"text":"Kullanici Ekle"},{"expanded":false,"id":3,"isLeaf":true,"level":1,"loaded":true,"parent":1,"text":"Kullanici Duzenle"},{"expanded":false,"id":4,"isLeaf":true,"level":1,"loaded":true,"parent":1,"text":"Kullanici Sil"},{"expanded":true,"id":5,"isLeaf":false,"level":0,"loaded":true,"text":"Fatura ??lemleri"},{"expanded":false,"id":6,"isLeaf":true,"level":1,"loaded":true,"parent":5,"text":"Fatura Goruntule"}],"records":6,"success":true} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:48:21.067

Your Json response must be as follows :

```
 {"rows":[
        {
        "id":1,
        "text":"Kullanici Islemleri"
        "level":0,
        "isLeaf":false,
        "parent" : "null" //If the row is at 0-lvl
        "expanded":true,
        "loaded":true,
        },
    ],"records":6,"success":true} 
```

You have to respect the order of the grid cols.
First, your data cols, then, `level`,`isLeaf`, `parent`,`expanded`. I'm not sure about the `loaded` field, try with and without.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:41:52.643

好的，我找到了解决方案，`colNames`并且`colModel`配置`ExpandColumn`应该匹配（**区分大小写**）。正如我上面所说，配置的顺序并不重要。

# mysql - MySql Cluster - 管理节点不会启动

> ID：11339180
> 
> 赞同：0
> 
> 时间：2012-07-05T06:53:55.620
> 
> 标签：mysql, centos

无法启动 MySQL Cluster 上的管理节点。

我正在发出 ff 命令。

> ndb_mgmd -f /var/lib/mysql-cluster/config.ini --initial --configdir=/var/lib/mysql-cluster/ --ndb-nodeid=1

我得到了 ff 错误：

> MySQL 集群管理服务器 mysql-5.5.22 ndb-7.2.6 2012-07-05 02:45:24 [MgmtSrvr] 错误 -- 根据配置，此节点应具有的主机名与本地接口不匹配。尝试绑定“192.168.177.134”失败并出现错误：99“无法分配请求的地址”

配置文件

```
[ndbd default]
NoOfReplicas=2

[ndb_mgmd]
hostname=192.186.177.134
datadir=/var/lib/mysql-cluster

[ndbd]
hostname=192.168.177.132
datadir=/usr/local/mysql/data

[ndbd]
hostname=192.186.177.133
datadir=/usr/local/mysql/data

[mysqld]
hostname=192.168.177.131 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:02:30.440

在`config.ini`，有时你有`192.168`，有时`192.186`。尤其：

```
[ndb_mgmd]
hostname=192.186.177.134
datadir=/var/lib/mysql-cluster 
```

应该：

```
[ndb_mgmd]
hostname=192.168.177.134
datadir=/var/lib/mysql-cluster 
```

The `hostname` will then match that to which `ndb_mgmd` was attempting to bind, as described in the error message. You should also correct the hostname in the `[ndbd]` section.

# c - 为什么抢占不能解决优先级倒置？

> ID：11339182
> 
> 赞同：3
> 
> 时间：2012-07-05T06:53:57.987
> 
> 标签：c, embedded, microcontroller, rtos

我想知道为什么*抢占*不能解决*优先级反转问题*？
如果我们有抢占式内核。那么为什么*优先级反转*问题没有得到解决呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T07:17:57.633

好的，假设我们有两个进程。我们还假设具有较低优先级的进程获得了锁。当较高优先级的进程准备就绪时，它会抢占另一个进程。如果较高优先级的进程需要该锁，则由于其他优先级较低的进程而无法获得。这意味着，较低优先级的进程会阻塞较高优先级的进程。它会阻止更高优先级的进程运行。这称为“优先级反转”。

显然，抢占并不是优先级反转的解决方案。解决方案是“优先继承”。这意味着我们应该在进程获得高优先级进程也需要的锁时临时增加进程的优先级。它应该是可能需要相同锁的其他进程中优先级最高的进程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T07:30:35.183

让 3 个线程**A**、**B**、**C**具有各自的优先级**High**、**Medium**、**Low**。

**C**获取处理器并获取锁**L**。然后**B**被一些事件唤醒并抢占**C**。现在**A**被唤醒并通过抢占**B**来获取处理器。**A**想要锁**L**，但失败了，因为**L**已经由**C**拥有。**A**由于锁不可用而被抢占，并将处理器归还给**B**。我们必须等待**B**完成，最终将处理器归还给**C**。**C**将完成并释放锁，最终将唤醒**一个**。

这是一个*优先级倒置*，因为**B**运行，而我们在系统中有一个具有较高优先级的线程**A**等待较低优先级线程（在本例中为**C ）的完成。**

顺便说一句，解决方案是*优先继承*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T12:32:15.130

抢占意味着拿走处理器，使任务不再运行。

这还不够，因为低优先级任务拥有高优先级任务所需的资源。

现在，如果资源可以被带走（一种不同的“抢占”），那么这确实可以解决优先级倒置。但这通常是不可能的，因为低优先级任务的半成品动作会导致不一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:18:19.380

假设您有 3 个进程：

*   **A** - 高优先级
*   **B** - 正常优先级
*   **C** - 低优先级

并且**A**和**C**都使用必须同步的同一个文件（这可以是任何共享资源）。

现在假设**A**和**B**都没有准备好运行，并且**C**运行并获得了使用文件的锁。当**C**持有文件的锁时，**A**准备运行，操作系统抢占**C**并运行**A**。**A**执行到它也需要该文件，当它试图获得锁时，它被阻塞，因为**C**持有锁。如果同时**B**准备好运行，它将代替**A**执行，因为**A**还没有准备好运行。为了使**A**准备好，文件锁必须由**C**和**C**不会运行并释放锁，因为更高优先级的进程**B**正在运行。因此**A**正在等待**C** ，而 C又在等待**B**。在这种情况下仅仅抢占**B**是没有用的，因为**A**还没有准备好，除非**C**运行，否则**C**不能运行，因为刚刚抢占的更高优先级**B**已经准备好运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T08:53:34.363

**来自维基**

考虑，

L --> 低优先级任务
H --> 高优先级任务
M --> 中优先级任务
R --> 资源

步骤 1：L 获得 R
步骤 2：H 请求 R（当前正在与 L 一起使用。所以 H 将等待 L 放弃 R。）
步骤 3：M 到达（M 是非阻塞任务。即它不需要 R )
第 4 步：L 被 M 抢占。（所以 L 不能放弃 R。因此，H 不能运行。）

在 M 执行完毕后，L 将放弃 R。之后只有 H 可以继续。在上面的场景中，具有中等优先级 (M) 的任务在具有高优先级 (H) 的任务之前运行。

这是抢占式内核中实际的优先级反转场景。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T16:47:29.073

当较高优先级的任务被较低优先级的任务间接抢占时，优先级反转是调度中的一个问题场景，有效地“反转”了两个任务的相对优先级。

考虑有一个低优先级的任务 L。该任务需要资源 R。考虑到 L 正在运行并且它获取资源 R。现在，还有另一个具有高优先级的任务 H。这个任务也需要资源 R。假设 H 在 L 获得资源 R 之后开始。现在 H 必须等到 L 放弃资源 R。到目前为止一切都按预期工作，但是当一个新任务 M（它不使用R) 在此期间以中等优先级开始。由于 R 仍在使用中（由 L），H 无法运行。由于 M 是最高优先级的未阻塞任务，它将在 L 之前调度。由于 L 已被 M 抢占，L 不能放弃 R。所以 M 将运行直到它完成，然后 L 将运行 - 至少到一个点它可以放弃 R - 然后 H 将运行。因此，在上述场景中，

# iphone - UIScrollView 视图

> ID：11339185
> 
> 赞同：2
> 
> 时间：2012-07-05T06:54:01.943
> 
> 标签：iphone, ios, xcode, nsmutablearray, icarousel

我正在`iCarousel`用作老虎机，对于那些不知道`iCarousel`它是`UIScrollview`with（分页，滚动视图）的人。所以在我的应用程序中，我滚动它，然后当它停止时它会显示图像（结果）3秒，然后弹出一个按钮，如果你按下按钮，它将删除视图（图像结果）然后再次旋转。

这是我删除轮播视图的方法：

```
 NSInteger CurrentImage = carousel.currentItemIndex;
    [carousel removeItemAtIndex:CurrentImage animated:YES];
    [images removeObjectAtIndex:CurrentImage]; 
```

但是当`carousel.numberOfItems`剩下 1 个项目时，它不会滚动，而是卡在那里。

所以我做了一种方法让它滚动，即使它只剩下 1 个项目（索引）。

我用最后一个索引插入了它，所以我尝试了这个：

```
[self.carousel insertItemAtIndex:0 animated:NO]; 
```

（但不起作用）

然后我尝试了另一个：

```
int lastObject = [images objectAtIndex: ([images count]-1)]
[self.carousel insertItemAtIndex:lastObject animated:NO]; 
```

（仍然不起作用）

还有这个：

```
int count = [images count];
[images objectAtIndex:count - 1]; 
```

（仍然没有运气）

我做错了吗？或者还有什么其他方法？或者我可以复制最后一个视图吗？谢谢您的帮助。

**编辑：** 方法

```
 - (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
    {
        if ([images count] == 1 || [self.carousel numberOfItems] == 1)
            return 2;

        return [images count];
    }

    - (NSUInteger)numberOfVisibleItemsInCarousel:(iCarousel *)carousel
    {
        //limit the number of items views loaded concurrently (for performance reasons)
        return 7;
    }

    - (UIView *)carousel:(iCarousel *)_carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
    {

        if (index >= [images count] || index >= [carousel numberOfItems]) {
            index = 0;
        }

        NSDictionary *obj = [images objectAtIndex:index];
        view = [[UIImageView alloc] initWithImage:[obj objectForKey:@"image"]];
        view.tag = index;

        return view;
    }

    - (NSUInteger)numberOfPlaceholdersInCarousel:(iCarousel *)carousel
    {
        //note: placeholder views are only displayed on some carousels if wrapping is disabled
        return 0;
    }

    - (CGFloat)carouselItemWidth:(iCarousel *)carousel
    {
        //usually this should be slightly wider than the item views
        return 400;
    }

 - (BOOL)carousel:(iCarousel *)carousel shouldSelectItemAtIndex:(NSInteger)index{
    return 5;  
}   
    - (BOOL)carouselShouldWrap:(iCarousel *)carousel
    {
        //wrap all carousels
        return wrap;
    } 
```

删除方法：

```
-(void) deleteItem{
    //Removes the object chosen 
    if (carousel.numberOfItems >= 1)
    {   
        NSInteger index = carousel.currentItemIndex;
        [carousel removeItemAtIndex:index animated:YES];
        //[images removeObjectAtIndex:index];
        //[images replaceObjectAtIndex:index withObject:[NSNull null]];
    } 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:03:31.217

你能做的就是做

```
- (NSUInteger)numberOfItemsInCarousel:(iCarousel*)carousel; 
```

总是返回一个 >1 的值（例如 2）；然后确保

```
- (UIView*)carousel:(iCarousel*)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView*)view; 
```

总是为您返回的最少元素返回正确的视图`numberOfItemsInCarousel`。

例如。

```
- (NSUInteger)numberOfItemsInCarousel:(iCarousel*)carousel {
   if (numberOfViews == 1)
      return 2;
   return numberOfViews;
}

- (UIView*)carousel:(iCarousel*)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView*)view {

  if (index >= numberOfViews) {
      index = 0;
  }

  NSDictionary *obj = [images objectAtIndex:index];
  view = [[UIImageView alloc] initWithImage:[obj objectForKey:@"image"]];
  view.tag = index;
  return view;
} 
```

您还应该确保永远不会删除最后一个元素，并在上面的代码中添加一些保护来管理没有元素留下的情况。

# c - CreateProcess() 因访问冲突而失败

> ID：11339186
> 
> 赞同：16
> 
> 时间：2012-07-05T06:54:04.960
> 
> 标签：c, winapi, createprocess

我的目标是在我的程序中执行一个外部可执行文件。首先，我使用`system()`了函数，但我不想让用户看到控制台。所以，我搜索了一下，找到了`CreateProcess()`功能。但是，当我尝试将参数传递给它时，我不知道为什么，它失败了。我从 MSDN 中获取了这段代码，并进行了一些更改：

```
#include <windows.h>
#include <stdio.h>
#include <tchar.h>

void _tmain( int argc, TCHAR *argv[] )
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );
    /*
    if( argc != 2 )
    {
        printf("Usage: %s [cmdline]\n", argv[0]);
        return;
    }
    */
    // Start the child process. 
    if( !CreateProcess( NULL,   // No module name (use command line)
        L"c:\\users\\e\\desktop\\mspaint.exe",        // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &si,            // Pointer to STARTUPINFO structure
        &pi )           // Pointer to PROCESS_INFORMATION structure
    ) 
    {
        printf( "CreateProcess failed (%d).\n", GetLastError() );
        return;
    }

    // Wait until child process exits.
    WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
} 
```

但是，此代码以某种方式创建了访问冲突。我可以在不向用户显示控制台的情况下执行 mspaint 吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-05T06:58:30.210

第二个参数是 a `LPTSTR`，即指向非 const char 数组的指针。[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425.aspx)特别说：

> 此参数不能是指向只读内存的指针（例如 const 变量或文字字符串）

传递字符串文字的原因是一个问题：

> 系统将终止空字符添加到命令行字符串以将文件名与参数分开。这将原始字符串分成两个字符串进行内部处理。

这意味着在您的情况下，它会尝试修改只读内存，从而导致崩溃。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-05T07:27:58.570

试试这个，它应该工作。

```
TCHAR lpszClientPath[500]= TEXT("c:\\users\\e\\desktop\\mspaint.exe");
if(!CreateProcess(NULL, lpszClientPath, NULL, NULL, FALSE,  NORMAL_PRIORITY_CLASS|CREATE_NEW_CONSOLE|CREATE_UNICODE_ENVIRONMENT,NULL, NULL, &si, &pi))
            {
    printf( "CreateProcess failed (%d).\n", GetLastError() );
        return;
            }
...
... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-30T20:47:24.680

将您的代码更改为：

```
#include <windows.h>
#include <stdio.h>
#include <tchar.h>

void _tmain( int argc, TCHAR *argv[] )
{
    TCHAR ProcessName[256];
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    wcscpy(ProcessName,L"c:\\users\\e\\desktop\\mspaint.exe");
    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );
    /*
    if( argc != 2 )
    {
        printf("Usage: %s [cmdline]\n", argv[0]);
        return;
    }
    */
    // Start the child process. 
    if( !CreateProcess( NULL,   // No module name (use command line)
        ProcessName,        // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &si,            // Pointer to STARTUPINFO structure
        &pi )           // Pointer to PROCESS_INFORMATION structure
    ) 
    {
        printf( "CreateProcess failed (%d).\n", GetLastError() );
        return;
    }

    // Wait until child process exits.
    WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
} 
```

# android - 画布捏缩放到边界内的点

> ID：11339190
> 
> 赞同：9
> 
> 时间：2012-07-05T06:54:28.300
> 
> 标签：android, android-canvas, android-gesture

我在这个问题上被困了八个小时，所以我想是时候寻求帮助了。

在我开始我的问题之前，我会告诉大家我已经浏览过这个网站和谷歌，但我找到的答案都没有帮助。（[这](https://stackoverflow.com/questions/8848523/canvas-zoom-goes-to-point-0-0)是一个，[另一个](https://stackoverflow.com/questions/6835224/android-bitmap-canvas-offset-after-scale)，[另一个](https://stackoverflow.com/questions/6624103/scaling-image-of-imageview-while-maintaining-center-point-in-same-place)。）

事情是这样的：我有一个扩展`SurfaceView`（我们称之为`MySurface`）并覆盖其中的许多方法的类。通常，它会绘制几个正方形和文本框，这一切都很好。一旦用户开始触摸，它就会转换为 a `Bitmap`，然后绘制每一帧，直到用户释放。

问题是：我想实现这样一个功能，用户可以将两根手指放在屏幕上，捏合缩放，也可以平移（但只能用两根手指向下）。

我找到了一些捏到缩放的实现，并通过以下方法将它们调整到我的`Canvas`对象中`MySurface`：

```
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    canvas.save();

    canvas.scale(mScaleVector.z, mScaleVector.z); // This is the scale factor as seen below
    canvas.translate(mScaleVector.x, mScaleVector.y); // These are offset values from 0,0, both working fine

    // Start draw code

    // ...

    // End draw code

    canvas.restore();
}
private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        float factor = detector.getScaleFactor();
        if (Math.abs(factor - 1.0f) >= 0.0075f) {
            mScaleVector.z *= factor;
            mScaleVector.z = Math.max(MIN_ZOOM, Math.min(mScaleVector.z, MAX_ZOOM));
        }

        // ...

        invalidate();

        return true;
    }
}
public boolean onTouchEvent(MotionEvent event) {
    int action = event.getAction() & MotionEvent.ACTION_MASK;
    int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
    if (event.getPointerCount() == 2) {
        if (action == MotionEvent.ACTION_POINTER_DOWN && pointerIndex == 1) {
            // The various pivot coordinate codes would belong here
        }
    }

    detector.onTouchEvent(event); // Calls the Scale Gesture Detector
    return true;
} 
```

虽然这两个元素都可以正常工作——来回滚动和捏拉缩放——但存在一个大问题。捏合缩放在使用时会放大到点`0,0`，而不是放大到手指点。

我尝试了很多方法来解决这个问题：

*   使用`canvas.scale(mScaleVector.z, mScaleVector.z, mScaleVector.x, mScaleVector.y);`; 显然，这会产生不需要的结果，因为`mScaleVector`x 和 y 值是 0 偏移量。
*   管理使用与方法相同的偏移量的“枢轴”坐标`translate()`，但这会产生相同的`0,0`问题，或者在触摸视图时跳转。
*   许多其他事情......我已经对上述枢轴坐标做了很多工作，试图将其位置基于用户的第一次触摸，并相对于每个连续手势的触摸移动它。

此外，这个画布必须是有界的，所以用户不能永远滚动。但是，当我使用该`.scale(sx, sy, px, py)`方法时，它会将事情推到我设置的任何范围之外`.translate()`。

我……在这一点上对任何事情都持开放态度。我知道可以添加此功能，就像在 Android 4.0 库中看到的那样（查看单个图像时）。我试图追踪处理此问题的源代码，但无济于事。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T07:54:09.280

这是我用来在`ImageView`using中实现捏合缩放的代码`ScaleGestureDetector`。只需很少或无需修改，您也应该能够使用它，因为您也可以使用转换 marices 来绘制`Canvas`.

```
@Override
public boolean onScale(ScaleGestureDetector detector) {
    float mScaleFactor = (float) Math.min(
        Math.max(.8f, detector.getScaleFactor()), 1.2);
    float origScale = saveScale;
    saveScale *= mScaleFactor;
    if (saveScale > maxScale) {
        saveScale = maxScale;
        mScaleFactor = maxScale / origScale;
    } else if (saveScale < minScale) {
        saveScale = minScale;
        mScaleFactor = minScale / origScale;
    }
    right = width * saveScale - width
            - (2 * redundantXSpace * saveScale);
    bottom = height * saveScale - height
            - (2 * redundantYSpace * saveScale);
    if (origWidth * saveScale <= width
            || origHeight * saveScale <= height) {
        matrix.postScale(mScaleFactor, mScaleFactor, width / 2, height / 2);
        if (mScaleFactor < 1) {
            matrix.getValues(m);
            float x = m[Matrix.MTRANS_X];
            float y = m[Matrix.MTRANS_Y];
            if (mScaleFactor < 1) {
                if (Math.round(origWidth * saveScale) < width) {
                    if (y < -bottom)
                        matrix.postTranslate(0, -(y + bottom));
                    else if (y > 0)
                        matrix.postTranslate(0, -y);
                } else {
                    if (x < -right)
                        matrix.postTranslate(-(x + right), 0);
                    else if (x > 0)
                        matrix.postTranslate(-x, 0);
                }
            }
        }
    } else {
        matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(), detector.getFocusY());
        matrix.getValues(m);
        float x = m[Matrix.MTRANS_X];
        float y = m[Matrix.MTRANS_Y];
        if (mScaleFactor < 1) {
            if (x < -right)
                matrix.postTranslate(-(x + right), 0);
            else if (x > 0)
                matrix.postTranslate(-x, 0);
            if (y < -bottom)
                matrix.postTranslate(0, -(y + bottom));
            else if (y > 0)
                matrix.postTranslate(0, -y);
        }
    }
    return true;
} 
```

就我而言，我在`onMeasure()`View 的方法中计算了必要的值，您可能希望在您的其他地方执行此操作`SurfaceView`

```
width = MeasureSpec.getSize(widthMeasureSpec); // Change this according to your screen size
height = MeasureSpec.getSize(heightMeasureSpec); // Change this according to your screen size

// Fit to screen.
float scale;
float scaleX = (float) width / (float) bmWidth;
float scaleY = (float) height / (float) bmHeight;
scale = Math.min(scaleX, scaleY);
matrix.setScale(scale, scale);
setImageMatrix(matrix);
saveScale = 1f;
scaleMappingRatio = saveScale / scale;

// Center the image
redundantYSpace = (float) height - (scale * (float) bmHeight);
redundantXSpace = (float) width - (scale * (float) bmWidth);
redundantYSpace /= (float) 2;
redundantXSpace /= (float) 2;

matrix.postTranslate(redundantXSpace, redundantYSpace);

origWidth = width - 2 * redundantXSpace;
origHeight = height - 2 * redundantYSpace;
right = width * saveScale - width - (2 * redundantXSpace * saveScale);
bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
setImageMatrix(matrix); 
```

一点解释：

`saveScale`是当前的比例`Bitmap`

`mScaleFactor`是您必须乘以比例的因素。

`maxScale`并且`minScale`可以是常数值。

`width``height`是屏幕的尺寸。

`redundantXSpace`并且`redundantYSpace`是图像边框和屏幕边框之间的空白，因为图像居中时它比屏幕小

`origHeight`并且`origWidth`是位图的大小

`matrix`是用于绘制位图的当前变换矩阵

诀窍是，当我第一次在初始化时缩放图像并将其居中时，我选择了比例为 1，并`scaleMappingRatio`映射了图像相对于它的实际比例值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-04T10:44:40.353

```
 protected override void OnDraw(Canvas canvas)
    {
        canvas.Save();

        int x = (int)(canvas.Width * mScaleFactor - canvas.Width) / 2;
        int y = (int)(canvas.Height * mScaleFactor - canvas.Height) / 2;

        if (mPosX > (canvas.Width + x - 50))
        {
            mPosX = canvas.Width + x - 50;
        }
        if (mPosX < (50 - canvas.Width - x))
        {
            mPosX = 50 - canvas.Width - x;
        }
        if (mPosY > (canvas.Height + y - 50))
        {
            mPosY = canvas.Height + y - 50;
        }
        if (mPosY < (50 - canvas.Height - y))
        {
            mPosY = 50 - canvas.Height - y;
        }

        canvas.Translate(mPosX, mPosY);
        canvas.Scale(mScaleFactor, mScaleFactor, canvas.Width/2, canvas.Height/2);
        base.OnDraw(canvas);
        canvas.Restore();
    } 
```

这是 monodroid 代码，但可以很容易地转换为 JAVA。您可以为您的边界选择任何值（这里是 50 像素边距）

# c# - 切换大小写，检查 C# 3.5 中的范围

> ID：11339191
> 
> 赞同：12
> 
> 时间：2012-07-05T06:54:33.500
> 
> 标签：c#, switch-statement

在 C# 中，该`switch`语句不允许 case 跨越值的范围。我不喜欢为此目的使用 if-else 循环的想法，那么还有其他方法可以检查 C# 中的数字范围吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T07:08:06.567

您可以`HashTable`分别使用 a`Dictionary`来创建 的映射`Condition => Action`。

例子：

```
class Programm
{
    static void Main()
    {
        var myNum = 12;

        var cases = new Dictionary<Func<int, bool>, Action>
        { 
            { x => x < 3 ,    () => Console.WriteLine("Smaller than 3")   } ,
            { x => x < 30 ,   () => Console.WriteLine("Smaller than 30")  } ,
            { x => x < 300 ,  () => Console.WriteLine("Smaller than 300") } 
        };

        cases.First(kvp => kvp.Key(myNum)).Value();
    }
} 
```

这种技术是一种通用的替代方法`switch`，尤其是当操作仅包含一行时（如方法调用）。

如果你喜欢类型别名：

```
using Int32Condition = System.Collections.Generic.Dictionary<System.Func<System.Int32, System.Boolean>, System.Action>;
...
    var cases = new Int32Condition()
    { 
        { x => x < 3 ,    () => Console.WriteLine("Smaller than 3")   } ,
        { x => x < 30 ,   () => Console.WriteLine("Smaller than 30")  } ,
        { x => x < 300 ,  () => Console.WriteLine("Smaller than 300") } 
    }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T06:56:50.763

没有。当然，如果范围很小，您可以使用

```
case 4:
case 5:
case 6:
   // blah
   break; 
```

方法，但除此之外：没有。使用`if`/ `else`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-05T06:58:22.267

如果范围的间隔是恒定的，您可以尝试

```
 int num = 11;
        int range = (num - 1) / 10; //here interval is 10
        switch (range)
        {
            case 0:
                Console.Write("1-10");
                break; // 1-10
            case 1:
                Console.Write("11-20");
                break; // 11-20
            // etc...
        } 
```

输出将是：`"11-20"`
如果间隔是可变的，则使用`if/else`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T06:57:28.150

不，至少没有比这更美丽的了。

也没有 C# 3.5 只有 .NET 3.5 和 C# 3.0

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T07:10:43.767

尝试这样的事情

```
 private void ExecuteInRange(Dictionary<Range,Action<int>> ranges)
    {
        foreach (var range in ranges)
        {
            if (range.Key.Value < range.Key.Max && range.Key.Value > range.Key.Max)
                range.Value(range.Key.Value);
        }
    }

public class Range
{
    public int Min { get; set; }
    public int Max { get; set; }
    public int Value { get; set; }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-24T13:15:25.280

```
 int b;
        b = Int32.Parse(textBox1.Text);

        int ans = (100-b)/3; //the 3 represents the interval
        //100 represents the last number

        switch(ans)
        {

           case 0:
                MessageBox.Show("98 to 100");
           break;

           case 1:
                MessageBox.Show("95 to 97");
           break;

           case 2:
                MessageBox.Show("92 to 94");
           break;

           case 3:
                MessageBox.Show("89 to 91");
           break;

           case 4:
                MessageBox.Show("86 to 88");
           break;

           default:
                MessageBox.Show("out of range");
           break; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-21T14:46:07.310

一种嵌套简写 if-else 的东西有效，而且很干净。

```
myModel.Value = modelResult >= 20 ? 5 : modelResult >= 14 ? 4 : modelResult >= 5 ? 3 : modelResult >= 2 ? 2 : modelResult == 1 ? 1 : 0; 
```

# cakephp - cakephp附加更多属于

> ID：11339194
> 
> 赞同：1
> 
> 时间：2012-07-05T06:54:44.197
> 
> 标签：cakephp, plugins, model-binding, belongs-to

我有一个模型，我想检查更多插件，如果加载了插件，则将插件中的模型附加到 man 模型中。我用这个方法？但不同的结果导致模型和行动。是另一种比构造更好的方法来绑定更多插件检查。

```
class Comment extends AppModel {

/**
 * @see Model::$belongsTo
 */
    public $belongsTo = array(
        'Content' => array(
            'className' => 'Content',
            'foreignKey' => 'object_id',
            'conditions' => array(
                'Comment.object_id = Content.id',
            )
        ),
    );

/**
 * @see Model::__construct
 */
    public function __construct($id = false, $table = null, $ds = null) {
        // parent
        parent::__construct($id, $table, $ds);

        // check for newsstudio
        if (CakePlugin::loaded('NewModel')) {
             $this->bindModel(
                array('belongsTo' => array(
                    'NewModel' => array(
                        'className' => 'NewModel.NewModel',
                        'foreignKey' => 'object_id',
                        'conditions' => array(
                            'Comment.object_id = NewModel.id',
                        )
                    )
                )
            ));
        }

        var_dump($this->belongsTo); // correct! NewModel added to blongsto
    }
}

// but in action during use. Plugin loaded but 
var_dump($this->Comment->belongsTo); // incorrect! just `Content` added 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:00:28.997

考虑到您在 __construct 中执行此操作，您不妨`$belongsTo`在调用父级之前将其添加到属性中，这将节省一些 CPU 周期，因为您没有执行额外的方法调用。

```
class Comment extends AppModel {

/**
 * @see Model::$belongsTo
 */
    public $belongsTo = array(
        'Content' => array(
            'className' => 'Content',
            'foreignKey' => 'object_id',
            'conditions' => array(
                'Comment.object_id = Content.id',
            )
        ),
    );

/**
 * @see Model::__construct
 */
    public function __construct($id = false, $table = null, $ds = null) {
        // check for newsstudio
        if (CakePlugin::loaded('NewModel')) {
            $this->belongsTo['NewModel'] = array(
                        'className' => 'NewModel.NewModel',
                        'foreignKey' => 'object_id',
                        'conditions' => array(
                            'Comment.object_id = NewModel.id',
                        )
                    );
        }
        parent::__construct($id, $table, $ds);
    }
} 
```

# php - PHP“注意：未定义的索引”是无害的还是真正的错误？

> ID：11339195
> 
> 赞同：4
> 
> 时间：2012-07-05T06:54:50.957
> 
> 标签：php, debugging

当我的网站正常运行时，我突然开始在我的服务器上使用非常高的 CPU 使用率，因此我开始更仔细地检查代码并启用`E_ALL`错误报告。

然后我发现我有很多这样的“通知”：

```
Notice: Undefined index: userID in /var/www/vhosts/mydomain.com/httpdocs/header.php on line 8 
```

大多数或他们指的是未设置的cookies，例如：

```
$uid = $_COOKIE['userID']; 
```

如果用户未登录，我会立即收到通知，并且每次使用`$uid`.

如果是这样，我想知道：此通知是否无害，或者它们真的会在我的站点中引起任何问题？（速度问题、错误等）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T06:56:38.257

这只是一个通知，试试这个代码：

```
$uid = isset($_COOKIE['userID']) ? $_COOKIE['userID'] : 0; 
```

它不是 hamless（取决于观点），您可以使用错误报告功能禁用它，否则，正确的方法是验证索引是否存在`isset($_COOKIE['userID'])`，如果不存在，则定义一个默认值（`null`例如）

```
$var = isset($foo) ? $foo : 'default'; 
```

您需要验证变量是否存在，如果您不知道它是否存在。

```
$var = 'foo'
if($var == 'foo') { // I known $var is defined, because I have defined it.
    [..]
}

/** 
 * Above, I don't known if user go to mywebsite.com/index.php or
 * mywebsite.com/index.php?foo=bar, so, I need to verify if index is defined
 */
if(isset($_GET['foo']) && $_GET['foo'] == 'bar') {
    [...]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T07:00:04.137

这些通知会引起一点速度问题，因为发出通知需要付出一些额外的努力。

但主要问题是这是一个严重的错误。您正在尝试使用不存在的东西。这可能会或可能不会导致坏事发生，但这意味着您的程序不正确。由于您应该始终使用错误报告来查看和解决实际问题，因此有关未定义索引或未定义变量的通知很严重，需要解决。*PHP 抱怨的任何事情*都是严重的，需要解决。请参阅[PHP 的 isset 和 empty 权威指南](http://kunststube.net/isset/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:00:27.780

通知通常是无害的，但它们可能表明应用程序设计不佳。一般来说，利用可用的 PHP 工具（即`isset($someVar)`）来确保您的业务逻辑正确处理变量初始化总是一个好主意。当您在 E_ALL 错误报告设置中看不到此类通知时，总是更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:01:06.333

注意警告从第一角度来看是无害的，但您应该记住，编程不正确，它可能会导致以下行出现错误。

在您的示例中，最好使用

```
$uid = isset($_COOKIE['userID'])?$_COOKIE['userID']:0; 
```

所以你可以确定，$uid 总是有一个值，当值大于 0 时，你有一个无效的 userId ...

# xml - 是否有任何全球网络使用统计信息提要？

> ID：11339197
> 
> 赞同：-1
> 
> 时间：2012-07-05T06:54:52.017
> 
> 标签：xml, json, google-analytics, statistics

天，

我一直没有成功地寻找全球网络统计原始数据馈送（浏览器、操作系统、屏幕分辨率等） - 以 xml 或 json（或其他）格式。

我对 W3C 或 W3Counter 提供的数据感到满意。

理想情况下，我想比较和绘制几个数据源

本着同样的精神，是否可以查询谷歌分析以获取全球数据？如何？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:32:02.287

Google 不提供此类报告。您可以通过从 Wikipedia 页面获取 wiki 标记来获取可解析格式的数据，例如：

[http://en.wikipedia.org/wiki/Usage_share_of_web_browsers](http://en.wikipedia.org/wiki/Usage_share_of_web_browsers)

[http://en.wikipedia.org/wiki/Usage_share_of_operating_systems](http://en.wikipedia.org/wiki/Usage_share_of_operating_systems)

# jquery-ui - JQGrid 服务器端分页不起作用？

> ID：11339200
> 
> 赞同：1
> 
> 时间：2012-07-05T06:54:55.920
> 
> 标签：jquery-ui, struts2, jqgrid, pagination

我是 JQGrid 的新手。让我解释一下我面临的问题......

我正在使用 struts2-jquery 网格，它在内部使用 JQGrid，并在外部控制网格，例如：我正在使用搜索元素来过滤网格中的行。

每当加载网格时，寻呼机工作正常，但在过滤数据时，寻呼机无法正常工作，它会显示一些无限值。那里的任何人都可以告诉我解决方案吗，因为我也无法发布我的代码......如果我有上述问题的任何工作示例真的很明显......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:18:12.007

看不到任何代码会使事情变得有些困难。但这是我在一个项目中使用的代码，用于在使用 JQgrid 的项目中实现分页（看看它是否对您有所帮助，或者指示从哪里开始调试）

**服务器端代码**

```
public ActionResult GridData(int page, int rows, string searchField = "", string searchString = "",
                                     string searchOper = "", string sidx = "ID", string sord = "desc")
        {          
            int pageIndex = Convert.ToInt32(page) - 1;
            int pageSize = rows;

            var items = _repo.GetItemDatacollection(searchField, searchString, searchOper, pageIndex, pageSize, sidx, sord);

            int totalRecords = _repo.GetAll().Count();
            var totalPages = (int)Math.Ceiling(totalRecords / (float)pageSize);

            var jsonData = new
            {
                total = totalPages,
                page,
                records = totalRecords,
                rows = (from item in items.ToList()
                        select new
                        {
                            i = item.ID,
                            cell = new[] { item.ID, item.Name }
                        }).ToArray()
            };
            return Json(jsonData, JsonRequestBehavior.AllowGet);
        } 
```

GetItemDataCollection 基本上是这样做的。（我在其中使用了 Scott Guthrie 的动态 LINQ 库，这对于使用 LINQ 在 JQgrid 中实现搜索来说非常有用，如果不是关键的话）

```
 return _entities.Set<T>().Where(ConvertOpr(searchOper, searchField), searchString)
                                      .OrderBy(sidx + " " + sord)
                                      .Skip(pageIndex * pageSize)
                                      .Take(pageSize); 
```

**JQgrid实现**

```
 jQuery('#theGrid').jqGrid({
            url: '@Url.Action("GridData")',
            datatype: 'json',
            mtype: 'GET',
           //...
 }); 
```

# css - IE9 中的 Superfish 菜单消失

> ID：11339202
> 
> 赞同：2
> 
> 时间：2012-07-05T06:55:00.307
> 
> 标签：css, wordpress, cross-browser, internet-explorer-9, superfish

我正在开发的网站是[www.shandon.com.au](http://www.shandon.com.au)。它在除 IE9 之外的所有浏览器上看起来都很好，其中导航菜单消失了（它使用 Superfish JS）。

我正在运行 Mac，因此我只能在 VMWare 中的 IETester 上对其进行测试，如果我不移动鼠标，一切看起来都很好，每当我将 webiste 窗口悬停时，它就会消失并且搜索框会向下移动。

应该怎么解决这个问题？任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:00:08.720

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" /> 
```

这是问题之一，将其更改为

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge" > 
```

然后从头部删除这一行：

```
<!--[if IE 9 ]>    <html class="ie ie9 no-js" dir="ltr" lang="en-US" xmlns:og="http://opengraphprotocol.org/schema/"> <![endif]--> 
```

我认为您不需要特定于 IE9 的检测，无论如何它都会正确呈现您网站中的所有内容。

# android - 从android的Intent中获取值

> ID：11339203
> 
> 赞同：2
> 
> 时间：2012-07-05T06:55:03.180
> 
> 标签：android, android-intent

提前致谢。当我打印`Log.d("me",getIntent().toString());`

我正进入（状态：

`Intent { act=android.intent.action.CALL_PRIVILEGED dat=tel:888 flg=0x13800000 cmp=com.ninetology.freecall.two/.CallFinalActivity }`

我正在尝试获取与“dat”关联的值，但我得到 NullPointer 异常。

```
//the code I am using is
getIntent().getStringExtra("dat"); // no use
//i tried 
getIntent().getExtras("dat").toString(); // NullPointer exception 
```

我尝试在上面的代码中使用“tel”作为键仍然没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T07:03:34.533

看来你做错了。

1.  该`getExtras()`函数返回一个可以从中提取数据的包，而不是返回特定字符串的函数。

2.  `dat`从打印的数据中可以看出，它不是字符串值。这是一个`Uri`，

尝试按您应该的方式解析它，我相信您将能够获取数据。

```
public void onCreate(Bundle b) { //mistyped
    super.onCreate(b);
    Uri data = getIntent().getData();
    // OR USE THIS
    String data = getIntent().getDataString();
    // DO STUFF
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:02:39.247

首先，您在日志中获取的 Intent 中的字符串不一定要有一个带有值的对象。

所以最好只检查它不是**null**，比如，

```
Bundle bundle = getIntent().getExtras();

if(bundle ! = null)
{
  // Now check you bundle object which has a values or not  
}
else
{
  // 1\. get data in form of Uri
  Uri data = getIntent().getData();

  // 2\. OR get string of Uri
  String dataString = getIntent().getDataString();

  // 3\. Or split the data string

  // The logic from this part may be different on your requirement.. I only suggests you to get data from string.. (Actual logic may different on your case)
  String data = getIntent().toString();
  data = data.subString(data.indexOf(":"), data.indexOf("flg")-1);
  Log.e("tel:", data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:04:14.050

尝试`getIntent().getExtras().get("dat");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:15:32.123

当您想通过意图传递数据时，只需在开始活动之前添加以下代码

`intent.putExtra("dat", value);` //value=你要发送的值

当您想在另一个活动中获取相同的值时，只需执行以下操作：

```
Bundle bundle=getIntent().getExtras();
if(bundle!=null){
      String string=bundle.getString("dat");
       } 
```

通过这样做，您将不会得到空指针异常并且会帮助您。

# windows-phone-7 - ContextMenu 动画不一致

> ID：11339205
> 
> 赞同：1
> 
> 时间：2012-07-05T06:55:09.583
> 
> 标签：windows-phone-7, animation, listbox

在我的数据绑定（有点高级）列表框中，我实现了一个上下文菜单。但是，当我点击并按住 ListBoxItem 时，ContextMenu 基本上只是弹出 - 没有漂亮的小下拉动画 - 这是我第一次在 ListBoxItem 上执行此操作。**第二次（以及之后的每次）都可以正常工作。**

我什至不知道如何调试这个 - 有人有任何想法吗？

这是一些示例 XAML：

```
<ListBox ItemsSource="{Binding ItemList}" Margin="0,0,0,30" ScrollViewer.VerticalScrollBarVisibility="Hidden" x:Name="TodayList" SelectionChanged="handler">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <ListBoxItem>
                <StackPanel Height="88" Margin="12,0,0,0">
                    <toolkit:ContextMenuService.ContextMenu>
                        <toolkit:ContextMenu BorderBrush="Black" Background="Black">
                            <toolkit:MenuItem Header="choice1" Foreground="White" Click="handler" />
                            <toolkit:MenuItem Header="choice2" Foreground="White" Click="handler" />
                            <toolkit:MenuItem Header="choice3" Foreground="White" Click="handler" />
                            <toolkit:MenuItem Header="choice4" Foreground="White" Click="handler" />
                        </toolkit:ContextMenu>
                     </toolkit:ContextMenuService.ContextMenu>
                     <TextBlock Style="{StaticResource YellowMedium}" Margin="0,0,0,-4" Text="{Binding Title}" />
                     <TextBlock Style="{StaticResource SubtleText}" Text="{Binding TimeOnChannel}" />
                 </StackPanel>
             </ListBoxItem>
         </DataTemplate>
     </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:19:16.767

有一个区别我已经从数据模板中删除了 ListBoxItem 标记试试这个

```
<ListBox ItemsSource="{Binding ItemList}" Margin="0,0,0,30" ScrollViewer.VerticalScrollBarVisibility="Hidden" x:Name="TodayList" SelectionChanged="handler">
<ListBox.ItemTemplate>
<DataTemplate>
<StackPanel Height="88" Margin="12,0,0,0">
<toolkit:ContextMenuService.ContextMenu>
<toolkit:ContextMenu BorderBrush="Black" Background="Black">
<toolkit:MenuItem Header="choice1" Foreground="White" Click="handler" />
<toolkit:MenuItem Header="choice2" Foreground="White" Click="handler" />
<toolkit:MenuItem Header="choice3" Foreground="White" Click="handler" />
<toolkit:MenuItem Header="choice4" Foreground="White" Click="handler" />
</toolkit:ContextMenu>
</toolkit:ContextMenuService.ContextMenu>
<TextBlock Style="{StaticResource YellowMedium}" Margin="0,0,0,-4" Text="{Binding Title}" />
 <TextBlock Style="{StaticResource SubtleText}" Text="{Binding TimeOnChannel}" />
 </StackPanel>
 </DataTemplate>
 </ListBox.ItemTemplate>
 </ListBox> 
```

# javascript - Google Closure - 裁剪图像

> ID：11339209
> 
> 赞同：2
> 
> 时间：2012-07-05T06:55:20.163
> 
> 标签：javascript, html, canvas, google-closure

有没有办法使用 Google Closure 裁剪或修剪图像文件？

如果有的话，我必须使用什么模块或包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:17:38.627

Closure Library 包含一个[图形](http://code.google.com/p/closure-library/source/browse/#svn%2Ftrunk%2Fclosure%2Fgoog%2Fgraphics)包，但它不附带对图像裁剪或修剪的内置支持，除了可通过画布包装器访问的标准 HTML5 画布功能。

例如，请参阅[**图形**](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/index.html)[下的演示](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/index.html)**。**

# python - 如何从 Python 中的字符串中获取整数值？

> ID：11339210
> 
> 赞同：66
> 
> 时间：2012-07-05T06:55:20.597
> 
> 标签：python, string, integer

假设我有一个字符串

```
string1 = "498results should get" 
```

现在我只需要从字符串中获取整数值，例如`498`. 在这里我不想使用`list slicing`，因为整数值可能会像这些示例一样增加：

```
string2 = "49867results should get" 
string3 = "497543results should get" 
```

因此，我只想以完全相同的顺序从字符串中获取整数值。我的意思是分别`498,49867,497543`来自`string1,string2,string3`。

谁能让我知道如何在一两行中做到这一点？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-07-05T06:57:02.360

```
>>> import re
>>> string1 = "498results should get"
>>> int(re.search(r'\d+', string1).group())
498 
```

如果字符串中有多个整数：

```
>>> map(int, re.findall(r'\d+', string1))
[498] 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-07-26T16:08:30.860

从[ChristopheD](https://stackoverflow.com/users/81179/christophed)那里得到的答案：[https ://stackoverflow.com/a/2500023/1225603](https://stackoverflow.com/a/2500023/1225603)

```
r = "456results string789"
s = ''.join(x for x in r if x.isdigit())
print int(s)
456789 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-11-17T18:54:05.007

这是您的单线，不使用任何正则表达式，有时会变得昂贵：

```
>>> ''.join(filter(str.isdigit, "1234GAgade5312djdl0")) 
```

返回：

```
'123453120' 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-05-24T11:07:35.317

如果您有多组数字，那么这是另一种选择

```
>>> import re
>>> print(re.findall('\d+', 'xyz123abc456def789'))
['123', '456', '789'] 
```

但它对浮点数字符串没有好处。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-07-05T07:02:32.077

迭代器版本

```
>>> import re
>>> string1 = "498results should get"
>>> [int(x.group()) for x in re.finditer(r'\d+', string1)]
[498] 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-07-05T07:06:47.497

```
>>> import itertools
>>> int(''.join(itertools.takewhile(lambda s: s.isdigit(), string1))) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-05-16T15:50:39.340

使用 python 3.6，这两行返回一个列表（可能为空）

```
>>[int(x) for x in re.findall('\d+', your_string)] 
```

如同

```
>>list(map(int, re.findall('\d+', your_string)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-30T15:20:20.827

```
def function(string):  
    final = ''  
    for i in string:  
        try:   
            final += str(int(i))   
        except ValueError:  
            return int(final)  
print(function("4983results should get")) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-05T05:34:00.337

这种方法使用列表推导，只需将字符串作为参数传递给函数，它将返回该字符串中的整数列表。

```
def getIntegers(string):
        numbers = [int(x) for x in string.split() if x.isnumeric()]
        return numbers 
```

像这样

```
print(getIntegers('this text contains some numbers like 3 5 and 7')) 
```

输出

```
[3, 5, 7] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-01T23:40:18.647

另一种选择是使用`rstrip`和删除尾随字母`string.ascii_lowercase`（获取字母）：

```
import string
out = [int(s.replace(' ','').rstrip(string.ascii_lowercase)) for s in strings] 
```

输出：

```
[498, 49867, 497543] 
```

# java - 尝试 Catch 与 If Else

> ID：11339211
> 
> 赞同：-2
> 
> 时间：2012-07-05T06:55:23.543
> 
> 标签：java

以下哪个代码更好地实现

```
public string myfunc(JSONArray funcargs){

    int ctxHandle;
    String StringParam=null;
    JSONObject jObj=null;

    try {
        ctxHandle = funcargs.getInt(2);
        if(funcargs.length() == 4) {
            try {
                StringParam = funcargs.getString(3);
            } catch (JSONException jsonEx) {
                jObj = funcargs.getJSONObject(3);
            }
        }
    } catch (JSONException jsonEx) {
        SendJS = "javascript:" + FailureCallBack + "('" + jsonEx.getMessage() + "')"; 
        sendJavascript(SendJS);
        return null;
    }

    //This will return an integer
    ret_val = get_data(ctxHandle);
    SendJS = "javascript:" + SuccessCallBack + "('" + Integer.toString(ret_val);
    if(StringParam != null)
        SendJS  += "','" + StringParam + "')";
    else if(jObj != null)
        SendJS  += "','" + jObj + "')";
    else 
        SendJS  += "')";

    sendJavascript(SendJS);
    return null;
} 
```

或者

```
public string myfunc(JSONArray funcargs){

    int ctxHandle;
    String StringParam=null;
    JSONObject jObj=null;

    try{
        ctxHandle = funcargs.getInt(2);
        //This will return an integer
        ret_val = get_data(ctxHandle);
        SendJS = "javascript:" + SuccessCallBack + "('" + Integer.toString(ret_val);
        if(funcargs.length() == 4) {
            try {
                StringParam = funcargs.getString(3);
                SendJS  += "','" + StringParam + "')";
            } catch (JSONException jsonEx) {
                jObj = funcargs.getJSONObject(3);
                SendJS  += "','" + jObj + "')";
            }
            SendJS  += "')";
        }
    } catch (JSONException jsonEx) {
        SendJS = "javascript:" + FailureCallBack + "('" + jsonEx.getMessage() + "')"; 
    }

    sendJavascript(SendJS);
    return null;                        
} 
```

个人来自[Java if vs. try/catch 开销](https://stackoverflow.com/questions/8621762/java-if-vs-try-catch-overhead)线程我知道`try/catch`应该只在你不确定结果并且可以处理异常但 if else if can be saved 参数产生一些疑问的情况下，尽管把整个try catch 块中的代码对我来说毫无意义。

在这方面需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:00:01.017

代码不会做同样的事情，但是如果您修复了第二个示例，我会说它更好，因为您将相关代码放在一起。

但是，我建议你应该做你认为更清楚的事情，因为第一个例子可能是正确的，它可能是你更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:06:07.523

通常我们在预期会出现错误的地方使用 try catch。例如，您要将一个数字与另一个数字相除，结果为零，肯定会引发错误。在那里我们将使用 try catch。

那是为了捕捉运行时错误，我们使用try catch。

并非必须在所有代码中都使用 try catch，但使用 try catch 会减少显示异常的机会。

# asp.net - Facebook评论框插件+asp上的动态网址？

> ID：11339212
> 
> 赞同：1
> 
> 时间：2012-07-05T06:55:28.490
> 
> 标签：asp.net, facebook, dynamic, comments

我正在尝试将 FB 评论框放在我网站上每个产品页面的底部。我已经设法做到了，但是当设置为静态 url 时，它对每个产品都表示相同的评论。我删除了网址，现在它有点工作，但说插件处于兼容模式。

这是我的产品模板中的内容：

我的网站是trickscooter.co.uk，所以你可以看到。评论框位于每个产品的底部。

我希望人们能够就显示的项目提出问题，以便我可以回答他们，以便所有人都能看到。

PS - 它说：

警告：此评论插件在兼容模式下运行，但还没有帖子。考虑按照评论插件文档中的建议指定一个明确的“href”，以利用所有插件功能。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:43:56.730

静态 URL 不适用于“href”参数，因为该参数告诉 Facebook 要显示哪些评论。如果您总是使用相同的 URL，那么您当然会得到相同的评论。每个产品都应该有一个唯一的 url 并动态使用它。

如果您动态生成 href 参数，则需要注意，如果您的页面可在不同域下访问，您将失去注释。

最好的方法是配置一个“facebook 域”（例如“www.foo.example”）并使用它来为 Facebook 评论生成 href 属性。

如果我误解了您，请解释您当前的嵌入代码以及您尝试过的内容。如果您喜欢答案，请将其标记为“解决方案”。

# extjs - extjs 的颜色选择器

> ID：11339218
> 
> 赞同：3
> 
> 时间：2012-07-05T06:56:13.627
> 
> 标签：extjs

是否有任何仅在 extjs（不在 jQuery 中）开发的用于 extjs 的颜色选择器（例如 photo shop 颜色选择器）。

我正在使用 (Ext.ux.ColorPicker) ux.colorpicker，但是它不能满足我的要求。

谢谢，塔努贾。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T13:39:16.223

ExtJS 有一个简单的颜色选择器。xtype：'[颜色选择器](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.picker.Color)'

从帮助：

```
Ext.create('Ext.picker.Color', {
    value: '993300',  // initial selected color
    renderTo: Ext.getBody(),
    listeners: {
        select: function(picker, selColor) {
            alert(selColor);
        }
    }
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-27T14:16:33.783

你也可以看看[这个](https://github.com/sam-wheeler/Ext.ux.ColorPicker)更像 Photoshop 的版本，它可以与 Ext JS 4x+ 一起使用，但确实需要画布支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T14:26:32.527

我意识到这是一个老问题。但是对于希望让这两个库玩得很好的人来说……这就是我所做的。问题在于 jscolor 期望所有具有类“color”的输入都可以在 window.load 上使用，这通过 jscolor.install() 调用。当然，ExtJs 元素当时不可用。尝试这个：

```
Ext.create("Ext.form.field.Text",{
    renderTo: Ext.getBody(),
    fieldCls:"color",
    name:"TestPost",
    listeners: {
        afterrender: {
            delay:200,
            fn:function(item){
                jscolor.init();
            }
        }
    }
}); 
```

运行 jscolor.init() 将启动它。如果你喜欢，你可以注释掉 jscolor.js 文件底部的 jscolor.install() 调用，只要你调用 jscolor.init() 作为一个监听器，在你想要的文本字段的渲染之后运行你的颜色选择器。

# android - 在 OpenGL ES 2.0 中写入深度缓冲区/深度值的解决方法

> ID：11339222
> 
> 赞同：7
> 
> 时间：2012-07-05T06:56:43.173
> 
> 标签：android, opengl-es-2.0

我需要写入 android 设备 (OpenGL ES 2.0) 上的深度缓冲区。由于`gl_FragDepth`在 OGL ES 2.0 下不可写，我必须找到一种解决方法。我实际上想通过光线投射渲染球体，类似于：[http](http://www.sunsetlakesoftware.com/2011/05/08/enhancing-molecules-using-opengl-es-20) ://www.sunsetlakesoftware.com/2011/05/08/enhancing-molecules-using-opengl-es-20 。但是，本网站上解释的解决方案（使用特殊的屏幕外渲染通道写入深度`glBlendEquation`）仅适用于 Apple 设备，不适用于 Android，因为`GL_MIN_EXT`不支持 -blending。

在我的 Tegra3 平板电脑上，我能够实现这个方法：[Android GLES20.glBlendEquation not working？](https://stackoverflow.com/questions/7841763/android-gles20-glblendequation-not-working)（顺便说一句，我建议使用线性化深度值，它们会提供更好的结果！）它工作得很好，但当然这仅在 Nvidia GPU 上可用。

理论上，有扩展`GL_EXT_frag_depth`（请参阅[Can an OpenGL ES fragment shader change the depth value of a fragment？](https://stackoverflow.com/questions/9503538/can-an-opengl-es-fragment-shader-change-the-depth-value-of-a-fragment)），但它在 Android 设备上也不可用。

最后，您当然可以只为一个球体编写深度缓冲区（在屏幕外渲染过程中），然后在第二个渲染过程中为下一个球体编写深度缓冲区，并在第三个渲染过程中将两者结合起来。这样做时，您将有 2*n+1 次渲染通道用于 n 个球体——这似乎是非常低效的！

因此，由于我没有想法，我的问题是：您能想出另一种通用方式/解决方法来在 OpenGL ES 2.0 Android 设备上编写深度缓冲区吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:03:30.643

好吧，你肯定在这里没有选择。我不知道任何进一步的解决方法，因为我不太了解 Opengl ES。

我唯一想到的是将蛮力多通道方法与一些预处理相结合：

将您的球体分类成原子不相互重叠的组。应该可以将所有球体从少于十组的蛋白质中分类。然后一次渲染每组的所有球体。顶点深度在这里就足够了，因为球体不重叠。然后你可以“深度混合”结果。

这需要一些预处理，这可能是一个问题。

# python - Python Tkinter xscrollbar 不工作

> ID：11339224
> 
> 赞同：0
> 
> 时间：2012-07-05T06:56:47.443
> 
> 标签：python, user-interface, tkinter, scrollbar

我几乎要把我的头发扯掉了：

我正在尝试让 xscrollbar 和 yscrollbar 正常工作，以便我可以在 Tkinter 中的大画布上移动。我如此沮丧的原因是因为 yscrollbar 似乎正在使用完全相同的代码（在任何地方用 y 替换 x）。这是我所拥有的：

```
master = Tk()
scrolly = Scrollbar(master,orient = VERTICAL)
scrollx = Scrollbar(master,orient = HORIZONTAL)
scrollx.pack(side = TOP,fill = X)
scrolly.pack(side = RIGHT,fill = Y)
w = Canvas(master, width=1000,height=1000,yscrollcommand = scrolly.set,xscrollcommand = scrollx.set,scrollregion=(0,0,1000,1000))
s = Scale(master,from_= 0, to=len(worldlist)-1,orient = HORIZONTAL,length = 595)
s.pack(side = BOTTOM)
w.pack()
setSys(worldlist[0],master,w)
def show(self):
    w.delete(ALL)
    setSys(worldlist[s.get()],master,w)
s.config(command = show)
scrolly.config(command = w.yview)
scrollx.config(command = w.xview)
mainloop() 
```

我想要位于底部的画布和比例小部件。在右侧和顶部，分别有一个 ybar 和一个 xbar。谁能看到我做错了什么？我非常渴望得到帮助！

谢谢！

加布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T02:42:42.143

xbar 不工作的原因是因为它没有任何东西可以滚动*到*. 将画布配置为大于屏幕的大小后，它开始工作。看看下面的代码，看看我在哪里添加了`scrollregion`配置。[http://www.java2s.com/Code/Python/GUI-Tk/ScrolledCanvas.htm](http://www.java2s.com/Code/Python/GUI-Tk/ScrolledCanvas.htm)

```
from Tkinter import * 

def show(self):
    w.delete(ALL)
    setSys(worldlist[s.get()],master,w)

master = Tk()

scrolly = Scrollbar(master,orient = VERTICAL)
scrollx = Scrollbar(master,orient = HORIZONTAL)
scrollx.pack(side = TOP,fill = X)
scrolly.pack(side = RIGHT,fill = Y)

w = Canvas(master, width=500, height=500, yscrollcommand = scrolly.set,
           xscrollcommand = scrollx.set, scrollregion=(0,0,1000,1000))
w.config(scrollregion=(0, 0, 500, 5000))
w.pack()

s = Scale(master,from_= 0, to=100-1,orient = HORIZONTAL,length = 595)
s.pack(side = BOTTOM)
s.config(command = show)

scrolly.config(command = w.yview)
scrollx.config(command = w.xview)

mainloop() 
```

# javascript - 强制 Javascript 重定向

> ID：11339225
> 
> 赞同：1
> 
> 时间：2012-07-05T06:56:47.803
> 
> 标签：javascript

我正在尝试通过以下基本命令实现看似非常简单的 JavaScript 重定向：

```
window.location.href = "http://www.somesite.com"; 
```

到目前为止一切顺利，它有效。我也可以通过以下方法做到这一点：

```
location.replace("http://www.somesite.com"); 
```

这里没问题，它再次工作！当我从字符串中松开协议时，问题就来了：

```
window.location.href = "www.somesite.com"; 
```

或者：

```
location.replace("www.somesite.com"); 
```

它只是将新位置附加到当前 url：

**www.currentsite.com/www.somesite.com**

当然，这不是我想要的。有没有办法强制重定向？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T07:03:16.883

一种方法是像这样使用**相对于协议的**url：

```
window.location = "//www.somesite.com"; 
```

或者

```
window.location = "//somesite.com"; 
```

这样，它将重定向并且浏览器本身将负责找出协议部分，例如`http`或`https`

## [工作示例](http://jsbin.com/oyavas)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:01:54.607

该协议是必需的。

浏览器怎么会知道

```
location.replace("mysite.pl"); 
```

是要去波兰网站还是当前网站上的 Perl 脚本？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:03:23.837

如果 URL 不存在，你可以做这样的事情来添加`http://`它......虽然我想不出一个理由不只是自己包含它。为什么要把事情复杂化？

```
​function redirect(url) {
    if(url.substr(4) != "http")
        url = "http://" + url;
    window.location.href = url;
}
redirect("www.google.com") 
```

​</p>

# spring-security - db 级 ACL 过滤

> ID：11339231
> 
> 赞同：12
> 
> 时间：2012-07-05T06:57:22.187
> 
> 标签：spring-security, acl

我正在为此查看 Spring-security 3.0，spring 的 ACL 过滤发生在 post(api call) 操作中。有两个问题：-

1.  它会破坏分页查询
2.  即使我在 api 获取结果上方的层上进行分页（我在这里使用 spring-hibernate），每次 db 查询都是浪费的，因为它会获取并填充所有结果，即使它们中的大多数注定要在 java 中被过滤掉等级

我已经看到解决方案，其中每个查询都附加了在数据库级别进行过滤的 acl 查询，但这看起来很丑陋，因为它污染了具有授权问题的业务逻辑，是否有任何方法/框架可以透明地进行数据库级别的 acl 过滤？我喜欢 spring-securities 通过配置/注释以声明方式强制执行安全性的整体方法，从而直接将代码从安全相关逻辑中解放出来，但我认为它在性能问题上失去了这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-06-21T09:30:43.613

对于你提到的问题，只有#1 对我来说才是真正的问题。

对于 #2 问题，如果我理解正确，它是返回结果列表而没有任何分页行为的查询。因此，假设结果的大小是有限的，并且不会增长到返回结果将变得非常缓慢的程度。否则，您需要将此查询设置为可分页并返回到 #1 问题。鉴于有限的结果列表，我怀疑应用程序级别的过滤使用`@PostFilter`将明显慢于数据库级别的过滤。

> 我已经看到解决方案，其中每个查询都附加了在数据库级别进行过滤的 acl 查询，但这看起来很丑陋，因为它污染了具有授权问题的业务逻辑，是否有任何方法/框架可以透明地进行数据库级别的 acl 过滤？我喜欢 spring-securities 通过配置/注释以声明方式强制执行安全性的整体方法，从而直接将代码从安全相关逻辑中解放出来，

因此，对于#1 问题，如果您使用的是 Hibernate，您可以查看[`@Filter`](https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#pc-filter)哪个允许您以声明方式定义 where 子句，该子句将在查询特定实体时附加到 select SQL 中。默认情况下，过滤器是关闭的，需要在每个事务中启用。where 子句也可以参数化。

这意味着您可以简单地使用 Spring AOP 定义一个注解来注解您想要启用授权的查询方法。然后在此注解支持的建议中，打开此过滤器并根据必要时提供当前用户信息。对于没有使用这个注解的查询方法，过滤器被关闭并且不知道授权问题。

基本上它与将授权逻辑附加到查询中相同，但是在 AOP 的帮助和 的性质的帮助下`@Filter`，业务逻辑不知道任何授权逻辑。

如果 Hibernate 过滤器不适合您的要求，您可以查看哪些数据访问技术允许您通过添加授权逻辑轻松修改查询。例如，使用 JPA Criteria API 也是可能的，因为它提供了对象模型来表示查询，因此将授权逻辑添加到查询中就相当于调整查询对象。

这个想法是，您需要对数据访问层进行适当的设计，以便您可以使用 AOP 来配置底层技术，以便以一致的方式轻松地应用授权问题。并使用 AOP 将授权逻辑与业务逻辑分离。

# c# - 从 c# 创建两个日期范围值之间的日期

> ID：11339236
> 
> 赞同：-2
> 
> 时间：2012-07-05T06:57:33.063
> 
> 标签：c#, sql, linq, date, datediff

我对使用 c# 的 (My)Sql 中的日期差异有疑问。
在我的数据库中，我有一个包含如下日期范围的表：

```
----------------------
从日期到日期
-------------------------
2012-07-01 2012-07-03
2012-07-05 2012-07-07
2012-07-10 2012-07-12
2012-07-13 2012-07-16
--------------------------

```

从这些范围内，我想计算所有包含的日期作为结果，即：

```
2012-07-01
2012-07-02
2012-07-03
2012-07-05
2012-07-06
2012-07-07
2012-07-10
2012-07-11
2012-07-12
2012-07-13
2012-07-14
2012-07-15
2012-07-16

```

`SELECT DATEDIFF('2012-01-01', '2012-02-02')`不像我预期的那样工作，它只给出总天数......我想要这之间的所有日期，包括范围的日期（FromDate和ToDate）。

你能告诉我如何实现这个（在 SQL 或 C# 中）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:56:21.597

我提供了两种可能的解决方案，第一种是在 C# 中使用 LINQ，第二种是在 SQL 中使用递归 CTE 技术生成日期。随意选择你更喜欢的一个。

## 一、使用LINQ的解决方案：

您提到您正在使用 C# - 在这种情况下，您可以利用 LINQ，解决方案是以下程序（您可以在 LinqPad 或 VisualStudio 中运行的控制台应用程序示例）。

```
 private static void Main(string[] args)
    {
        var query1 = from r in RangeTable.AsQueryable() select r;
        query1.Dump("List of ranges:");

        Console.WriteLine();
        query1.CreateDates().Dump("Result list of dates:");

        Console.ReadLine();
    } 
```

`RangeTable`将范围表作为可查询对象列表返回的属性在哪里（例如，使用[LinqToEntity](http://msdn.microsoft.com/en-us/library/bb386964.aspx)或[LinqToSQL](http://msdn.microsoft.com/en-us/library/bb386976.aspx)）。

有趣的部分是**扩展方法** `CreateDates`：

```
 public static IQueryable<DateTime> CreateDates(this IQueryable<DateRange> rtbl)
    {
        var result = new List<DateTime>();

        foreach (var dr in rtbl)
        {
            var q = from i in Enumerable.Range(0, dr.CalcDays())
                    select (DateTime)dr.fromDate.AddDays(i);
            foreach (var d in q) result.Add(d);
        }

        return result.AsQueryable<DateTime>();
    } 
```

这个函数使用一个简单的扩展方法`CalcDays`计算和之间的天数`fromDate`（`toDate`如果 fromDate 和 toDate 相等，则有意返回 1）：

```
 public static int CalcDays(this DateRange dr)
    {
        var days = (int)(dr.toDate - dr.fromDate).TotalDays + 1;
        return days;
    } 
```

现在有关该`RangeTable`功能的一些详细信息。它需要`DateRange`实现日期范围的两个属性的类：

```
public class DateRange
{
    public DateTime fromDate;
    public DateTime toDate;
} 
```

在此示例`RangeTable`中，为简单起见，在没有数据库连接的情况下定义，但也可以使用 LinqToSQL 或 LinqToEntity：

```
 private static List<DateRange> RangeTable
    {
        get
        {
            var result = new List<DateRange>() {
                new DateRange() { fromDate = new DateTime(2012, 07, 01), toDate = new DateTime(2012, 07, 03) },
                new DateRange() { fromDate = new DateTime(2012, 07, 05), toDate = new DateTime(2012, 07, 07) },
                new DateRange() { fromDate = new DateTime(2012, 07, 10), toDate = new DateTime(2012, 07, 12) },
                new DateRange() { fromDate = new DateTime(2012, 07, 13), toDate = new DateTime(2012, 07, 16) }
            };
            return result;
        }
    } 
```

最后，如果你没有[LinqPad](http://www.linqpad.net/)并想使用 VisualStudio 中的示例，你可以轻松定义两个 Dump 扩展方法，如下所示：

```
 const string dateMask = "yyyy-MM-dd";

    public static void Dump(this IQueryable<DateRange> item, string msg)
    {
        Console.WriteLine(msg);
        foreach (var i in item)
        {
            Console.WriteLine(string.Format("{0} to {1}", i.fromDate.ToString(dateMask), i.toDate.ToString(dateMask)));
        }
    }

    public static void Dump(this IQueryable<DateTime> item, string msg)
    {
        Console.WriteLine(msg);
        foreach (var i in item)
        {
            Console.WriteLine(string.Format("{0}", i.ToString(dateMask)));
        }
    } 
```

`public static class Extensions`只需将它们与其他扩展方法一起 放在顶层即可。**注意：**该类`DateRange`是顶级类，方法`RangeTable`在内部`Program`类中定义。

该示例产生以下输出：

```
 List of ranges:
    2012-07-01 to 2012-07-03
    2012-07-05 to 2012-07-07
    2012-07-10 to 2012-07-12
    2012-07-13 to 2012-07-16

    Result list of dates:
    2012-07-01
    2012-07-02
    2012-07-03
    2012-07-05
    2012-07-06
    2012-07-07
    2012-07-10
    2012-07-11
    2012-07-12
    2012-07-13
    2012-07-14
    2012-07-15
    2012-07-16 
```

**最后一点：**

[LinqToEntity](http://msdn.microsoft.com/en-us/library/bb386964.aspx)和[LinqToSQL](http://msdn.microsoft.com/en-us/library/bb386976.aspx)是您的数据库的“桥梁”。

它们是对象关系映射器，通过使用适当的数据库驱动程序（通过您指定的数据库连接）将您的 LINQ 语句转换为 SQL 并“及时”提交 SQL 查询，它们隐藏了有关数据库的实现特定细节，所以您可以专注于编程标准化的 LINQ 查询。

在此示例中，您需要修改属性 RangeTable，以便它查询您的 mySQL 数据库并返回一个 IQueryable 对象。您只需要以下内容：

*   添加到 LinqPad 的新连接，然后向下钻取到您需要的表，最后拖放到查询中（或者，如果名称已经匹配，只需添加连接，然后单击连接）。
*   使用 LinqToEntities：**将新项目添加**到您的项目中，在“数据”中选择“ADO.NET 实体数据模型”，然后选择“从数据库生成”，添加所需的数据库连接，添加表。它将生成一个**Model1.edmx**文件。例如，如果您使用**Nortwind 对此**进行了测试，那么**示例查询**将如下所示：

    ```
     var entities = new NorthwindEntities1();
        entities.Connection.Open();
        var query1 = from c in entities.Customers select c; 
    ```

## 二、使用 SQL 的解决方案：

您还可以使用 T-SQL 2008 中提供的公用表表达式（又名 CTE）来解决此问题：

```
with 
    sampleTable as (
        select   CAST('2012-07-05' as DATETIME) fromDt
                ,CAST('2012-07-08' as DATETIME) toDt
        union
        select   CAST('2012-08-01' as DATETIME) fromDt
                ,CAST('2012-08-11' as DATETIME) toDt
    ),
    calcdiff as (
        select  DATEDIFF(day, fromDt, toDt) d 
                ,*
        from sampleTable
    ),
    recursion as (
            select fromDt as dt, toDt from calcdiff
        union all
            select dateadd(day, 1, dt) dt2, toDt from recursion
            where dateadd(day, 1, dt)<=toDt
    )
select dt as Result from recursion
order by dt 
```

`SampleTable`可以用您的“真实”SQL 表替换，它仅用于本示例的完整性，`calcdiff`计算日期差异，并`recursion`递归计算所需的所有日期：联合的第一部分是递归的锚点，它是强制性的。注意`union all`在 CTE 递归中是必需的，否则 T-SQL 将不会执行查询。

如果由于递归级别而出现错误，只需附加

```
option (maxrecursion 365); 
```

这将允许“更深”的递归，例如，如果您要计算 1 年的日期，则需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:40:09.017

如果我理解正确，您的表格包含以下内容：

```
------------------------
From date      to date
-------------------------
2012-07-01    2012-07-03
2012-07-05    2012-07-07
2012-07-10    2012-07-12
2012-07-13    2012-07-16
-------------------------- 
```

并且您想针对它运行 SQL 并取回列出的每个“从日期”和“到日期”之间的所有日期。

简单地说（即不考虑太多），MySql 不会那样做——它从表中返回现有记录。由于您已经在 ac# 应用程序中，因此从 MySql 读取记录并创建您自己的所有相关日期的列表似乎更容易（尽管这取决于您随后想要对它们做什么）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:05:30.300

谢谢所有我在 C# 中修复了它。在 mysql 中找不到任何东西。

dtDetails 是一个数据表，其中包含来自 DB 的值（从日期和到日期）

然后我又创建了一个数据表并存储了（fromdate -- todate）中的所有值

然后我将使用该数据表。

```
如果（dtDetails.Rows.Count > 0）

 {
            foreach (DataRow dr in dtDetails.Rows)
            {
                DateTime startingDate = Convert.ToDateTime( dr["fromdate"]);
                DateTime endingDate = Convert.ToDateTime(dr["todate"]);
                DateTime newdate;
                for (newdate = startingDate; newdate <= endingDate; newdate = newdate.AddDays(1))
                {
                  DataRow dr2 = dt2.NewRow();
                    dt2.Rows.Add(newdate);

                }

            }
        } 
```

# c# - 在 C# 中的特定时间后退出循环

> ID：11339240
> 
> 赞同：13
> 
> 时间：2012-07-05T06:58:04.157
> 
> 标签：c#, benchmarking

我的项目（C#、VS2010、.NET 4.0）中有一个特定`for`循环必须在 200 毫秒内完成的要求。如果没有，那么它必须在此持续时间之后终止，而不执行剩余的迭代。循环通常会持续`i = 0`约 500,000 到 700,000，因此总循环时间会有所不同。

我已经阅读了以下类似的问题，但它们对我的情况没有帮助：

1.  [在 C++ 中经过 30 毫秒的时间后退出循环的最佳方法是什么](https://stackoverflow.com/questions/946167/what-is-the-best-way-to-exit-out-of-a-loop-after-an-elapsed-time-of-30ms-in-c)
2.  [如何在特定时间执行循环](https://stackoverflow.com/questions/5945533/how-to-execute-the-loop-for-specific-time)

到目前为止，我已经尝试使用一个`Stopwatch`对象来跟踪经过的时间，但它对我不起作用。到目前为止，这是我尝试过的两种不同的方法：

**方法 1.**`for`比较循环内经过的时间：

```
Stopwatch sw = new Stopwatch();
sw.Start();

for (i = 0; i < nEntries; i++) // nEntries is typically more than 500,000
{
      // Do some stuff
      ...
      ...
      ...

      if (sw.Elapsed > TimeSpan.FromMilliseconds(200))
          break;
}

sw.Stop(); 
```

这不起作用，因为`if (sw.Elapsed > TimeSpan.FromMilliseconds(200))`需要超过 200 毫秒才能完成。因此在我的情况下没用。我不确定是否 `TimeSpan.FromMilliseconds()`通常需要这么长时间，或者出于某种原因只是在我的情况下。

**方法2.**创建一个单独的线程来比较时间：

```
Stopwatch sw = new Stopwatch();
sw.Start();                    
bool bDoExit = false;
int msLimit = 200;

System.Threading.ThreadPool.QueueUserWorkItem((x) =>
{
     while (bDoExit == false)
     {
        if (sw.Elapsed.Milliseconds > msLimit)
        {
            bDoExit = true;
            sw.Stop();
         }

         System.Threading.Thread.Sleep(10);
      }

});

for (i = 0; i < nEntries; i++) // nEntries is typically more than 500,000
{
      // Do some stuff
      ...
      ...
      ...

      if (bDoExit == true)
          break;
}

sw.Stop(); 
```

我在 for 循环中有一些其他代码可以打印一些统计信息。它告诉我，在方法 2 的情况下，`for`循环肯定会在完成所有迭代之前中断，但循环时间仍然是 280-300 毫秒。

有什么建议可以在 200 毫秒或更短的时间内严格打破 for 循环？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T07:11:46.523

为了更快的比较尝试比较

```
if(sw.ElapsedMilliseconds > 200)
   break; 
```

您应该在循环开始时以及在处理过程中进行检查（“// Do some stuff”部分代码），因为例如，处理可能从 190 开始（循环开始），持续 20 并以 210 结束。

您还可以测量处理的平均执行时间（这是近似值，因为它依赖于平均时间），这样循环应该持续 200 毫秒或更短，这是一个演示，您可以将其放入控制台应用程序的 Main 方法中，并且很容易为您的应用程序修改它：

```
 Stopwatch sw = new Stopwatch();
        sw.Start();

        string a = String.Empty;
        int i;
        decimal sum = 0, avg = 0, beginning = 0, end = 0;
        for (i = 0; i < 700000; i++) // nEntries is typically more than 500,000
        {
            beginning = sw.ElapsedMilliseconds;
            if (sw.ElapsedMilliseconds + avg > 200)
                break;

            // Some processing
            a += "x";
            int s = a.Length * 100;
            Thread.Sleep(19);
            /////////////

            end = sw.ElapsedMilliseconds;
            sum += end - beginning;
            avg = sum / (i + 1);

        }
        sw.Stop();

        Console.WriteLine(
          "avg:{0}, count:{1}, milliseconds elapsed:{2}", avg, i + 1,
          sw.ElapsedMilliseconds);
        Console.ReadKey(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-10T23:01:33.803

另一种选择是使用 CancellationTokenSource：

```
CancellationTokenSource source = new CancellationTokenSource(100);

while(!source.IsCancellationRequested)
{
    // Do stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:08:18.643

使用第一个 - 简单并且比第二个更准确。

两种情况都具有相同的终止条件，因此两者的行为应该或多或少相同。由于线程和睡眠的使用，第二个要复杂得多，所以我会使用第一个。由于睡眠，第二个也不太精确。

绝对没有理由`TimeSpan.FromMilliseconds(200)`花费大量时间（以及在每次迭代中调用它）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-23T17:33:28.240

使用取消令牌：

```
 var cancellationToken = new CancellationTokenSource(TimeSpan.FromSeconds(15)).Token;

 while (!cancellationToken.IsCancellationRequested)
 {
     //Do stuff...
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T07:48:46.657

我不知道这是否正是如此，但我认为值得一试`System.Timers.Timer`：

```
int msLimit = 200;
int nEntries = 500000;
bool cancel = false;

System.Timers.Timer t = new System.Timers.Timer();
t.Interval = msLimit;
t.Elapsed += (s, e) => cancel = true;
t.Start();

for (int i = 0; i < nEntries; i++)
{
    // do sth

    if (cancel) {
        break;
    }
} 
```

# c# - 使用 netTCPBinding 的两种方式通信

> ID：11339247
> 
> 赞同：1
> 
> 时间：2012-07-05T06:58:35.867
> 
> 标签：c#, wcf, .net-4.0, windows-services, nettcpbinding

我是 WCF 的新手（只需一两天）。我打算制作一个具有客户端/服务器的应用程序

**WCF 服务（在作为 Windows 服务托管的服务器上）：**

1.  将使用 (Process.Start()) 调用一些命令
2.  将从我的数据库中发送一些信息

问题：

1.  我应该使用什么 WCF 绑定？WsDualhttp 或 netTCP (如果可以请详细说明)
2.  WCF 是否适用于`SqlServer + EF 4.1`

**服务器界面：**

这将主要用于

1.  启动或停止上述服务
2.  更改地址（本地主机到 [我的 IP 地址]）和端口
3.  显示服务状态（运行或死亡）

问题：

1.  如何从此 UI 更改我的 WCF 服务的地址和端口（这将是一个不同的项目，因此是不同的配置文件）。

**客户端应用程序：**

1.  用于向 WCF 服务发出命令。
2.  了解服务是否正在运行或停止。
3.  接收任务完成或故障的状态消息。

另外，windows安装程序可以结合安装ServerUI+WCF服务+Windows服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:53:02.647

**WCF Service**

1.  Here are a couple links on choosing the right binding. Based on the scenario you're describing, I'd go with the netTCP.
    *   [C# - WCF - inter-process communication](https://stackoverflow.com/questions/1613586/c-sharp-wcf-inter-process-communication/1613601#1613601)
    *   [Choosing the right WCF binding](http://weblogs.asp.net/spano/archive/2007/10/02/choosing-the-right-wcf-binding.aspx)
2.  WCF and SQL Server are independent of each other, so I wouldn't expect any problems using the Windows service to interact with your database.
3.  I'd suggest reading up on [how to start a process from a Windows service](https://stackoverflow.com/questions/4278373/how-to-start-a-process-from-windows-service-into-currently-logged-in-users-sess).

**Server UI**

1.  I would suggest hosting another WCF service in your Windows service for interacting with your Server UI. You can use the netNamedPipeBinding since this communication channel will always be local, i.e., on the same box. So your Windows service will host two WCF services - one for the external communication with the client and one for the local communication with the configuration UI.

**Installer**

1.  Yes, the Windows installer can be used, but that might be overkill for what you're describing. Of the Server UI, WCF Service, and Windows service, the only one that absolutely requires installation is the Windows service. The others could theoretically run simply by copying the assemblies to the target system. You might consider having the Windows service install itself via command line. That way you could get away with a self-extracting executable using software like [WinZip](http://www.winzip.com/win/en/prodpagese.htm). This might be less heavyweight than a formal install. If you go this route, have a look at the step-by-step [here](https://stackoverflow.com/questions/1195478/how-to-make-a-net-windows-service-start-right-after-the-installation/1195621#1195621).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:00:32.407

看看 WCF 双工服务：http: [//msdn.microsoft.com/en-us/library/ms731064.aspx](http://msdn.microsoft.com/en-us/library/ms731064.aspx)

为什么你想要一个 Windows 服务的接口？如果您可以访问 IIS7 和 WAS，我建议您使用它而不是 Windows 服务中的自托管。

这是 WCF 配置管理的一个很好的起点：http: [//msdn.microsoft.com/en-us/library/ff650534.aspx](http://msdn.microsoft.com/en-us/library/ff650534.aspx)

是的，您可以使用 Windows 安装程序。

干杯——乔克

# mysql - 通过 PHPmyadmin 导入 CSV 文件：找不到文件或拒绝访问

> ID：11339248
> 
> 赞同：1
> 
> 时间：2012-07-05T06:58:44.340
> 
> 标签：mysql, file-io, phpmyadmin, load

我在我的域托管服务器上使用 PhpMyAdmin 2.6.2。我有一个表，我想从一个小的 CSV 格式文件中导入数据。（这是一个试点，看看它是如何工作的。）

SQL查询：

```
LOAD DATA LOCAL INFILE 'c:/shoelinks.csv' INTO TABLE `shoelinks` FIELDS TERMINATED BY ',' ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY '\r\n' 
```

MySQL 说：

```
#2 - File 'c:\shoelinks.csv' not found (Errcode: 2) 
```

我尝试从各种不同的目录（例如 、 等）导入 CSV `MySql/Data`文件`PHPmyAdmin/import`。但我仍然遇到同样的“找不到文件”问题。

当我使用没有 的 SQL 时`LOCAL`，这就是我得到的；SQL查询：

```
LOAD DATA INFILE 'D:\\Websites\\uploadtemp\\php7BA8.tmp' INTO TABLE `shoelinks` FIELDS TERMINATED BY ',' ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY '\r\n' 
```

MySQL 说：

```
#1045 - Access denied for user 'rs1-sl9'@'%' (using password: YES) 
```

当我登录 phpmyadmin 时，我不应该有任何权限问题，而且我是数据库管理员。

我该怎么做才能导入数据文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-19T08:55:00.293

我刚刚遇到了这个问题。CPanel 需要授予文件权限才能运行此查询。请联系您的托管支持以了解如何执行此操作。

仅供参考，如果您使用的是 GoDaddy 共享主机解决方案，则不允许这样做。

# c# - 从 Excel 工作表读取时出现无效字符异常

> ID：11339250
> 
> 赞同：0
> 
> 时间：2012-07-05T06:58:57.380
> 
> 标签：c#, .net, sql, oracle, excel

我有一个excel表。我在该 Excel 表的特定单元格中编写查询，然后通过我的 C# 代码调用该查询。我已将该单元格声明为**strParam1**。因此， strParam1 包含我在 Excel 表中键入的任何查询。代码如下：-

```
public void UpdateDatabase(String strParam1, int row)
        {
            System.Data.OracleClient.OracleConnection conn = new System.Data.OracleClient.OracleConnection();
            conn.ConnectionString = "Data Source=(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.5.144)(PORT = 1521))(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = orcl)));UID=mwm;PWD=mwm";
            try
            {
                conn.Open();
                OracleCommand command = conn.CreateCommand();
                command.CommandText = strParam1.Trim();
                OracleDataReader reader = command.ExecuteReader();
                command.Dispose();
            }
            catch (Exception ex)
            {
                ExcelRecorder(ex.Message, row);
            }
            finally
            {
                conn.Close();
            }
        } 
```

到达 ExecuteReader 时，它会抛出异常“Invalid character”。在 excel 表中，我输入了 Select * from \"Task\"; 由于 Task 是一个 oracle 关键字，因此我对上述查询进行了重组。但是，查询没有执行。如果我输入下面的代码并运行它，一切都很好。

```
command.CommandText = "Select * from \"Task\""; 
```

怎么了？有什么我必须做的特殊格式吗？从excel表中读取也没有问题。我彻底测试了它。所以，这与我的例外无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:07:25.787

当您从 Excel 单元格中读取字符串并将其放入带引号的字符串变量中时，您无需添加`\`转义。
为了证明这一点，只需在 UpdateDatabase 方法上放置一个断点并查看 strParam1 var。
您可以看到它包含引号，而当您直接将其分配给 command.CommandText 时，您需要转义字符串文字。

# sql - Ms-Access 中的 IIF 语句

> ID：11339253
> 
> 赞同：3
> 
> 时间：2012-07-05T06:59:13.983
> 
> 标签：sql, delphi, ms-access

我有这 3 张桌子： ![在此处输入图像描述](../Images/2bd009cd4d7d5508712d741ded9edd4a.png)

我正在使用此代码将它们连接在一起（我使用的是 Delphi）：

```
ADOQ.SQL.Text := 'select a.IdArt as [Code d''Article], '+
                   'a.Nom,'+
                   'Str(a.Prix)+" TND" as Prix, '+
                   '(select Str(sum(QteEntree))+" "+a.unit from Stock where IdArt = a.IdArt group by IdArt) as [Quantite Entree],' +
                   '(select Str(sum(Qte))+" "+a.unit from Sold where IdArt = a.IdArt group by IdArt) as [Quantite Vendu],'+
                   'Str((select sum(QteEntree) from Stock where IdArt = a.IdArt group by IdArt) -' +
                   '(select sum(Qte) from Sold where IdArt = a.IdArt group by IdArt))+" "+a.unit as [Quantite Existe]'+

                   'from Article a '; 
```

![在此处输入图像描述](../Images/cd2f0320b48a235d3e44a49390ff9fdb.png)

如您所见，当一个表中缺少一条记录时，它会将 Null 返回到 DbGrid，因此我想将丢失的记录替换为“0”。我试过这段代码：

```
ADOQ.SQL.Text := 'select a.IdArt as [Code d''Article], '+
                   'a.Nom,'+
                   'Str(a.Prix)+" TND" as Prix, '+
                   '(select Str(sum(QteEntree))+" "+a.unit from Stock where IdArt = a.IdArt group by IdArt) as [Quantite Entree],' +
                   '(select IIF( IsNull(sum(Qte)), "111" , Format( sum(Qte),"00.00") ) from Sold where IdArt = a.IdArt group by IdArt) as [Quantite Vendu],'+
                   'Str((select sum(QteEntree) from Stock where IdArt = a.IdArt group by IdArt) -' +
                   '(select sum(Qte) from Sold where IdArt = a.IdArt group by IdArt))+" "+a.unit as [Quantite Existe]'+

                   'from Article a '; 
```

但没有任何改变，尽管这段代码运行良好：

```
ADOQ.SQL.Text := 'Select a.IdArt,IIF(( IsNull( s.qte) ), "00,00" , Format( (s.qte),"00.00") ) from Article a left join sold s on s.IdArt = a.IdArt'; 
```

![在此处输入图像描述](../Images/8a000147d94020f6a26e4a9c46f882f0.png)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:56:10.767

尝试取出“group by IdArt”部分 - 它们似乎没有必要，因为您已经在 WHERE 子句中排除了所有其他部分。

否则，这样的事情可能会改进您编写查询的方式：

```
select 
    a.IdArt as [Code d''Article], 
    a.Nom,
    Str(a.Prix)+" TND" as Prix, 
    Str(sum(stock.QteEntree))+" "+a.unit as [Quantite Entree],
    IIF( IsNull(sum(sold.Qte)), "111" , Format( sum(sold.Qte),"00.00") ) as [Quantite Vendu],
    Str(sum(stock.QteEntree) - sum(sold.Qte))+" "+a.unit as [Quantite Existe]

from Article a 
left join stock on a.IdArt = stock.IdArt
left join sold on a.IdArt = sold.IdArt
group by a.IdArt, a.Nom, a.Prix, a.unit 
```

*你可能需要调整它*

实际上，我更愿意从上面写这个语句：

```
IIF( IsNull(sum(sold.Qte)), "111" , Format( sum(sold.Qte),"00.00") ) as [Quantite Vendu], 
```

改为这样：

```
Format( sum( IIF( IsNull( sold.Qte ) , 0, sold.Qte ) ), "00.00" ) as [Quantite Vendu], 
```

*再次，我不能 100% 确定这会起作用，我只是在看你的函数的顺序和逻辑*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:15:23.543

好的，找到了解决方案：

```
iif( isnull((select sum(QteEntree) from Stock where IdArt = a.IdArt group by IdArt)) ,0, (select sum(QteEntree) from Stock where IdArt = a.IdArt group by IdArt) ) 
```

# php - 会话已经开始时使用 `session_start()` 会导致任何问题吗？

> ID：11339254
> 
> 赞同：1
> 
> 时间：2012-07-05T06:59:17.570
> 
> 标签：php, session

`session_start();`我在我的网站上有很多出现。由于包含的某些文件也使用 AJAX 调用，因此在这种情况下需要启动会话。

当我编写该站点时，我并不关心启动它不止一次，因为我知道我的服务器在会话已经启动时只是忽略了它。

这样做有什么问题吗？我是否应该在再次调用之前预先检查会话是否已启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:00:44.997

> ***这样做有什么问题吗？***

它将导致 E_NOTICE，但除此之外，第二次（以及第三次、第四次……）调用`session_start`无效。

但是，如果您“不知道”是否已经开始会话，我个人认为这是一种代码味道。如果可能，请尝试设计代码，以便清楚地知道会话是否已经开始。

此外，正如詹姆斯在手册中的评论中指出的那样：

> 为避免 PHP 从 4.3.3 开始两次启动会话时提交的通知，请先检查`session_id()`：
> 
> ```
> if (session_id() == "")
>     session_start(); 
> ```

# c# - Ninject 注入链隔离

> ID：11339256
> 
> 赞同：1
> 
> 时间：2012-07-05T06:59:26.120
> 
> 标签：c#, .net, binding, dependency-injection, ninject

我正在开发一个拆分为多个程序集的应用程序。每个程序集都为外部世界提供接口，实例是通过基于 Ninject 的工厂生成的。

啊，好吧，***让 Code***。这是来自正在执行的大会。

```
public class IsolationTestModule : NinjectModule
{
    public override void Load()
    {
        ServiceFactory sf = new ServiceFactory();
        Bind<IService>().ToMethod(context=>sf.CreatService()).InSingletonScope();
    }
}

public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        IKernel kernel = new StandardKernel(new IsolationTestModule());
        IService service = kernel.Get<IService>();
    }
} 
```

`ServiceFactory`也依赖于`Ninject`，但有它自己的和`Kernel`它自己的`Module`：

```
public interface IService
{
    void Idle();
}

public interface IDependantService
{
    void IdleGracefully();
}

public class ServiceImpl : IService
{
    [Inject]
    public IDependantService DependantService { get; set; }

    public void Idle() 
    {
        DependantService.IdleGracefully();
    }
}

public class DependantServiceImpl : IDependantService
{
    public void IdleGracefully() { }
}

public class ServiceFactory
{
    private IKernel _kernel = new StandardKernel(new SuppliesModule());

    public IService CreatService()
    {
        return _kernel.Get<IService>();
    }
}

public class SuppliesModule : NinjectModule
{
    public override void Load()
    {
        Bind<IService>().To<ServiceImpl>().InSingletonScope();
        Bind<IDependantService>().To<DependantServiceImpl>().InSingletonScope();
    }
} 
```

**实际发生的情况：**一切都很好，直到`ServiceFactory`完成构建`ServiceImpl`-instance。在下一步中，***应用程序*** `kernel`尝试通过解决`ServiceImpl`依赖关系`IsolationTestModule`- 当然 - 失败并出现异常（没有可用的绑定，类型`IDependantService`不可自绑定）。据我了解，***factory***的内核应该这样做......实际上我从来不知道 Ninject 会急于解决依赖关系，即使在它没有立即创建的那些情况下，这肯定会为我打开新的视野；-)

为了暂时解决这个问题，我将注入更改`ServiceImpl`为基于构造函数的注入，如下所示：

```
public class ServiceImpl : IService
{
    public IDependantService DependantService { get; set; }

    [Inject]
    public ServiceImpl(IDependantService dependantService)
    {
        DependantService = dependantService;
    }

    public void Idle() 
    {
        DependantService.IdleGracefully();
    }
} 
```

不过，我更喜欢不会强迫我改变注射策略的解决方案。有谁知道我如何分离注入链？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:51:04.623

你的观察是正确的。Ninject 将对由`ToMethod`. 此外，您使用构造函数注入的解决方案是正确的方法。无论如何，构造函数注入是使用 Ninject 的首选方式。属性注入应仅用于可选依赖项。

您应该考虑的是只使用一个内核。在一个应用程序中使用多个内核实例是非常不寻常的。

# php - MYSQL PHP 应用程序性能与单个数据库

> ID：11339260
> 
> 赞同：1
> 
> 时间：2012-07-05T06:59:58.883
> 
> 标签：php, mysql, database, performance, database-performance

我正在设计一个主要基于 PHP 和 MySQL 数据库查询的“高”流量应用程序。

我正在设计数据库表，以便它们可以容纳 100'000 行，每个页面加载都会查询数据库以获取用户数据。

当连接了 1000 个用户时，我会遇到性能缓慢或数据库错误吗？

问是因为我找不到有关 mysql 数据库实际性能限制的规范。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:21:23.123

很难说设计好不好，在设置应用程序或网站之前，您应该始终进行一些压力测试以帮助您查看性能，我经常使用的工具是 mysqlslap（仅适用于 mysql）和 apache 的 ab 命令。你可以谷歌他们的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:02:55.897

如果设计错误，一个用户可能会杀死您的服务器。您需要进行性能测试，找到分析代码的瓶颈。对您的查询使用说明...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:06:55.167

设计良好的数据库可以处理数千万行，但设计不佳则不能。不要担心性能，尽量设计好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:08:40.257

如果用户数据由于加载另一个页面而保持不变，您可以考虑将这些信息存储在会话中。此外，您应该分析数据库/特定表中的读/写比率如何。MyIsam 和 InnoDB 在锁定方面非常不同。许多连接会降低您的服务器速度，请尝试缓存连接。

看看[http://php.net/manual/en/pdo.connections.php](http://php.net/manual/en/pdo.connections.php)

# javascript - javascript_include_tag 包括来自特定文件夹的所有文件

> ID：11339262
> 
> 赞同：0
> 
> 时间：2012-07-05T07:00:02.963
> 
> 标签：javascript, ruby-on-rails, url

当我想`js`使用以下代码包含文件夹中的所有 JavaScript 文件时，url 看起来像`javascripts/public/javascripts/js/...`.

`<%= javascript_include_tag *Dir["public/javascripts/js/**/*.js"] %>`

当我将代码更改为`<%= javascript_include_tag *Dir["js/**/*.js"] %>`url 看起来像`js/...`？

我如何更改我的代码以使 url 为`javascripts/js/...`?

非常感谢您的支持！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:41:01.050

如果您使用的是 rails 3.1 及更高版本，那么您可以将所有 js 文件放在一个文件夹中`app/assets/javascript/my_folder`，例如制作一个 js 清单文件并将`//= require_tree .`行放在该文件中。现在打开`config/application.rb`文件并添加这一行。 `config.assets.precompile += %w( my_folder/manifest_file_name.js)`

# opengl - glDrawPixels 错误的像素位置

> ID：11339273
> 
> 赞同：2
> 
> 时间：2012-07-05T07:00:51.560
> 
> 标签：opengl, lwjgl, gldrawpixels

我一直在尝试使用 java 和 lwjgl 在 opengl 中绘制 320 x 240 全屏分辨率图像。我将分辨率设置为 640 x 480，并将像素大小加倍以填充空间。经过大量的谷歌搜索后，我找到了一些关于使用 glDrawPixels 函数来加速绘制到屏幕的信息。我想通过为屏幕上的所有像素分配随机颜色来测试它，但它不会填满屏幕。我将宽度分成 4 个部分，每个部分 80 像素，并将它们着色为红色、绿色、蓝色和白色。我看到我在交错颜色，但我不知道如何。

这是输出的图像：

![图像](../Images/00492a6d6763fe1dfca892fa3ba83f5d.png)

这是我运行openGL代码的地方：

```
// init OpenGL
GL11.glMatrixMode(GL11.GL_PROJECTION);
GL11.glLoadIdentity();
GL11.glOrtho(0, 640, 0, 480, 1, -1);
GL11.glMatrixMode(GL11.GL_MODELVIEW);

while (!Display.isCloseRequested()) {
    pollInput();

    // Clear the screen and depth buffer
    GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);  

    randomizePixels();
    GL11.glRasterPos2i(0, 0);

    GL11.glDrawPixels(320, 240,GL11.GL_RGBA, GL11.GL_UNSIGNED_BYTE,buff);

    GL11.glPixelZoom(2, 2);

    Display.update();   
}
Display.destroy();
} 
```

这里是我创建像素颜色数据的地方：

```
public void randomizePixels(){
    for(int y = 0; y < 240; y++){
        for(int x = 0; x < 320; x+=4){
            /*
            pixels[x * 320 + y] = (byte)(-128 + ran.nextInt(256));
            pixels[x * 320 + y + 1] = (byte)(-128 + ran.nextInt(256));
            pixels[x * 320 + y + 2] = (byte)(-128 + ran.nextInt(256));
            pixels[x * 320 + y + 3] = (byte)(-128 + ran.nextInt(256));
            */

            if(x >= 0 && x < 80){
                pixels[y * 240 + x] = (byte)128;
                pixels[y * 240 + x + 1] = (byte)0;
                pixels[y * 240 + x + 2] = (byte)0;
                pixels[y * 240 + x + 3] = (byte)128;
            }else if(x >= 80 && x < 160){
                pixels[y * 240 + x] = (byte)0;
                pixels[y * 240 + x + 1] = (byte)128;
                pixels[y * 240 + x + 2] = (byte)0;
                pixels[y * 240 + x + 3] = (byte)128;
            }else if(x >= 160 && x < 240){
                pixels[y * 240 + x] = (byte)0;
                pixels[y * 240 + x + 1] = (byte)0;
                pixels[y * 240 + x + 2] = (byte)128;
                pixels[y * 240 + x + 3] = (byte)128;
            }else if(x >= 240 && x < 320){
                pixels[y * 240 + x] = (byte)128;
                pixels[y * 240 + x + 1] = (byte)128;
                pixels[y * 240 + x + 2] = (byte)128;
                pixels[y * 240 + x + 3] = (byte)128;
            }

        }
    }
    buff.put(pixels).flip();
} 
```

如果您能弄清楚为什么我不能让像素与 x 和 y 坐标对齐，我希望它们能够对齐，那就太好了。我已经读过 glDrawPixels 可能不是将像素绘制到屏幕上的最佳或最快方法，但我想了解为什么在我不得不转向其他方法之前会遇到这个特殊问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:59:06.030

只需将图像（未缩放）加载到纹理中并绘制带纹理的四边形。

不要使用`glDrawPixels`. 此函数在大多数驱动程序中从未得到适当优化，自 OpenGL-2 以来已被弃用，并已从 OpenGL-3 核心及更高版本中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:25:31.813

我在您的`randomizePixels()`.

### 1\. 索引像素缓冲区

像素缓冲区的总大小为**320x240x4 字节**，因为像素类型为 GL_RGBA。因此，使用下标运算符 [] 索引每个像素，它会是；

```
for(int y = 0; y < 240; y++)
{
    for(int x = 0; x < 320; x++)
    {
        pixels[y * 320 * 4 + x * 4 + 0] = ... // R
        pixels[y * 320 * 4 + x * 4 + 1] = ... // G
        pixels[y * 320 * 4 + x * 4 + 2] = ... // B
        pixels[y * 320 * 4 + x * 4 + 3] = ... // A
    }
} 
```

### 2.色值

8 位颜色的最大强度为**255**，例如，不透明的红色像素为 (255, 0, 0, 255)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:20:12.317

你对纹理的操作。最好在正交上做。它会产生好的结果

# php - 如何检查 Facebook 页面是否存在？

> ID：11339274
> 
> 赞同：1
> 
> 时间：2012-07-05T07:00:58.660
> 
> 标签：php, facebook

如何使用 php 检查 facebook 页面、组或人员是否存在？

罗伯特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T07:20:19.970

尝试使用 Facebook API (https://developers.facebook.com/docs/reference/php/)

```
$facebook->api('PAGEID or USERID here'); 
```

如果不存在，则 facebook 返回`false`.

有关示例 URL 列表，请参阅[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T07:29:30.567

目前，如果您访问不存在的 facebook 页面，您会收到以下消息：

> **未找到您所请求的页面。** 您可能单击了过期的链接或输入了错误的地址。一些网址区分大小写。

所以基本上你可以做一个：

```
$page = file_get_contents( 'http://www.facebook.com/no_real_page' );
$pos = strrpos( $page, 'The page you requested was not found' );
if ( $pos === true ) {
  // non existing page!
} 
```

但是会有所不同，消息可能会发生变化，然后您将不会在该脚本上获得任何结果。所以最好把它放在一个你以后可以很容易改变的地方：

```
# config.php
define ( FACEBOOK_ERROR, 'The page you requested was not found' );

# script.php
$page = file_get_contents( 'http://www.facebook.com/no_real_page' );
$pos = strrpos( $page, FACEBOOK_ERROR );
if ( $pos === true ) {
  // non existing page!
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:41:54.877

Facebook 不支持`file_get_contents`或`cUrl`如前所述`Dainis Abols`。

该代码对于其他网站检查是否存在任何内容很有用。但 Facebook 与其他网站有很大不同。

> ```
> <?php
> $page = file_get_contents('http://www.facebook.com/pages/Studentmug/349363763205');
> $pos = strrpos( $page, 'The page you requested was not found' );
> echo "$page";
> if ( $pos === true ) {
>   // non existing page!
> }
> ?> 
> ```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T07:18:10.013

您需要用户/组的 facebook_id 或 url。然后使用 curl，您可以查找返回的状态代码。404 表示，它不存在。

[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-05T10:42:13.483

好的，感谢 Gabriel Santos 和 Jeff，这就是我最终得到的结果：

```
// A function to check if a facebook page exists 
// and if its a personal or published page  
function CheckFB($fbexist) { // $fbexist is the pageID or userID
    require_once("include/facebook.php"); // Facebook php-sdk

                // Install and Initialize
    $config = array();
    $config['appId'] = 'APP_ID/KEY';
    $config['secret'] = 'APP_SECRET';

          // Create Facebook object
    $facebook = new Facebook($config);

    try {
        $facebook->api($fbexist);
        if (!$facebook->api($fbexist)) {  // if this returns false
            $personal = "No";       // it's not a personal page
        } else {                          // or group
            $personal = "Yes";
        }

    } catch(FacebookApiException $e) {           // If there is an exception
        $checked = array(false, $personal);// the page doesn't exist
        return $checked;
    }
          $checked = array(true, $personal);
    return $checked;
} 
```

再次感谢你们的帮助：）

# sencha-touch - Ext.Msg.confirm() 不能在 sencha touch 中点击图像

> ID：11339276
> 
> 赞同：0
> 
> 时间：2012-07-05T07:01:20.520
> 
> 标签：sencha-touch, sencha-touch-2

我想通过点击图像向用户显示确认警报消息。在听众中，我在定义的 Ext.Msg.confirm("") 中定义了 tap 函数。当我点击图像时，我没有收到确认消息。所以在这个下面我定义了正常的警报消息“嗨”。在此之后，我只能看到正常的警报消息“HI”。没有收到确认信息。***在图像点击上，我需要向用户显示确认消息以确认是/否。***我用于按钮处理程序功能的相同代码。分机信息确认（“”）。消息工作正常。图片点击是否支持 Ext.Msg.confirm("")？如果可能的话，那么如何实现这一目标。任何人告诉我该怎么做。

这是我的代码：

```
 {
                                        xtype: 'image',
                                        src: 'Imagepath',
                                        listeners: {
                                                tap: function () {

                                                // confiramation message
                                                Ext.Msg.confirm(
                                                   "Confirmation",
                                                   "Are you sure you want to proceed?",
                                                   function (btn) {
                                                       if (btn === 'yes') {
                                                           Ext.Msg.alert("You have selected Yes", "");
                                                       }
                                                       else {
                                                           Ext.Msg.alert("You have selected NO", "");
                                                       }
                                                   },
                                                   this
                                                );

                                              //Normal alert message
                                              alert("Hi");
                                            }
                                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:09:39.160

我在 Sencha Touch 文档实时代码预览中尝试了这段代码，它运行良好......

```
var img = Ext.create('Ext.Img', {
    src: 'http://www.sencha.com/assets/images/sencha-avatar-64x64.png',
    height: 64,
    width: 64,
    listeners: {
        tap: function(){
             Ext.Msg.confirm(
             "Confirmation",
             "Are you sure you want to proceed?",
             function (btn) {
                 if (btn === 'yes') {
                    Ext.Msg.alert("You have selected Yes", "");
                 }
                 else {
                    Ext.Msg.alert("You have selected NO", "");
                 }
             },
             this
       );}
    }
}); 
```

尝试遵循这种方式，希望它能解决您的问题。

# c++ - 目标平台仅支持静态库不支持共享库问题

> ID：11339277
> 
> 赞同：0
> 
> 时间：2012-07-05T07:01:25.180
> 
> 标签：c++, linux, gcc

我正在尝试使用 Cmake 实用程序在 Redhat Linux 4.1.2 机器上编译 c++ 项目。在 CMakeLists.txt 我指定了 GenericUSMModules 如下。

```
ADD_LIBRARY(
        GenericUSMModules SHARED 
          ../../Generic/GenericUSMModules/GMUSMActState.cpp
          ../../Generic/GenericUSMModules/GMUSMActState.h
          ../../Generic/GenericUSMModules/GMUSMAdditionalOfferChecksAndEdits.cpp
          ../../Generic/GenericUSMModules/GMUSMAdditionalOfferChecksAndEdits.h
          ../../Generic/GenericUSMModules/GMUSMAlignmentOfProductsConfigurationAndStrategicOrderManagerChecksAndEdits.cpp
          ../../Generic/GenericUSMModules/GMUSMAlignmentOfProductsConfigurationAndStrategicOrderManagerChecksAndEdits.h
          ../../Generic/GenericUSMModules/GMUSMAllSitePart2SiteChecksAndEdits.cpp

    ) 
```

当我运行 make 命令编译 c++ 项目时，出现以下错误。“用于库 GenericUSMModules 的 ADD_LIBRARY 与 SHARED 选项一起使用，但目标平台仅支持 STATIC 库。改为构建它 STATIC。这可能会导致问题。” 我无法理解平台不支持共享库的含义。因为编译后，它生成静态库（GenericUSMModules.a）而不是共享库（GenericUSMModules.so）请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:57:17.210

经过大量搜索后，我发现该问题是由于 RehHat Linux 机器上的 cmake 不兼容造成的。我在 RedHat 上安装了最新的 cmake 2.8.8。它解决了问题，现在它生成共享库（.so 文件）。

# xpath - 如何将重复的节点值复制到 Orbeon 中的另一个重复节点

> ID：11339278
> 
> 赞同：1
> 
> 时间：2012-07-05T07:01:38.210
> 
> 标签：xpath, orbeon, xforms

我找不到将重复节点值复制到另一个重复节点的好方法。在通用编程语言中，我的意思是将一个数组的内容复制到另一个数组。

```
 <xforms:instance id="main-instance">
                <contacts>
                    <contact>
                        <contact-id>111</contact-id>
                        <contact-name></contact-name>
                        <contact-location></contact-location>
                    </contact>
                    <contact>
                        <contact-id>222</contact-id>
                        <contact-name></contact-name>
                        <contact-location></contact-location>
                    </contact>
                    <contact>
                        <contact-id>333</contact-id>
                        <contact-name></contact-name>
                        <contact-location></contact-location>
                    </contact>
                </contacts>

                <alternate-contacts>
                    <contact>
                        <alt-contact-id></alt-contact-id>
                        <control-id></control-id>
                        <control-rules></control-rules>
                        <tranmission-method></tranmission-method>
                    </contact>
                    <contact>
                        <alt-contact-id></alt-contact-id>
                        <control-id></control-id>
                        <control-rules></control-rules>
                        <tranmission-method></tranmission-method>
                    </contact>
                    <contact>
                        <alt-contact-id></alt-contact-id>
                        <control-id></control-id>
                        <control-rules></control-rules>
                        <tranmission-method></tranmission-method>
                    </contact>
                </alternate-contacts>
            </xforms:instance> 
```

当检查复选框（事件开始操作）时，我应该将第一`contact-id`值复制到第一个值`alt-contact-id`，依此类推。

```
 <xforms:action ev:event="xforms-value-changed">
                //TO DO here
            </xforms:action> 
```

请提供你的想法

编辑：所以当复选框被选中时，`<alternate-contacts>`节点应该是这样的

```
 <alternate-contacts>
                    <contact>
                        <alt-contact-id>111</alt-contact-id>
                        <control-id></control-id>
                        <control-rules></control-rules>
                        <tranmission-method></tranmission-method>
                    </contact>
                    <contact>
                        <alt-contact-id>222</alt-contact-id>
                        <control-id></control-id>
                        <control-rules></control-rules>
                        <tranmission-method></tranmission-method>
                    </contact>
                    <contact>
                        <alt-contact-id>333</alt-contact-id>
                        <control-id></control-id>
                        <control-rules></control-rules>
                        <tranmission-method></tranmission-method>
                    </contact>
                </alternate-contacts> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T00:04:22.747

您正在寻找 XForms 2.0 即将推出的[`iterate`属性](http://goo.gl/B0xcl)¹，但 Orbeon Forms 已经支持该属性，您似乎正在根据问题上的标签使用该属性。有了它，你可以写：

```
<xforms:action iterate="/root/contacts/contact">
    <xforms:var name="position" value="position()"/>
    <xforms:var name="id" value="contact-id"/>
    <xforms:setvalue ref="/root/alternate-contacts/contact[$position]/alt-contact-id" value="$id"/>
</xforms:action> 
```

另请参阅使用此代码的[完整示例。](https://gist.github.com/3147763)

* * *

¹这个特性已经被支持很久了，你必须使用`xxforms:iterate="…"`来表示这是一个扩展，但是由于这很快就会成为标准，你现在可以只使用`iterate="…"`.

# php - symfony 1.4 中的多级嵌入式表单

> ID：11339279
> 
> 赞同：1
> 
> 时间：2012-07-05T07:01:38.983
> 
> 标签：php, symfony1, doctrine, symfony-1.4

需要 symfony-1.4(doctrine) 中多级嵌入式表单的工作示例。

示例架构如下：

表A：

```
 id 
```

表B：

```
 id

  tableA_id 
```

表C：

```
 id

  tableB_id 
```

对于上面的原型模式，我想使用相同的表格在上面的 3 个表中添加/编辑记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:31:39.553

请参阅[以下文档](http://itsmajax.com/2011/01/29/6-things-to-know-about-embedded-forms-in-symfony/)，这可能有助于您集成嵌入式表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:42:45.323

这很简单。您可以像这样嵌入这些表单：

在表格 tableAForm.class.php 中嵌入 tableBForm：

```
$this->embedRelation('tableB'); 
```

在表格 tableBForm.class.php 中嵌入 tableCForm：

```
$this->embedRelation('tableC'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T15:40:37.577

尝试在[这里](http://www.symfony-project.org/more-with-symfony/1_4/en/06-Advanced-Forms)阅读，这不是一个三级嵌入示例，但总是有用的

# sql-server - 在没有包含包名称的表的情况下执行 SSIS 包

> ID：11339284
> 
> 赞同：2
> 
> 时间：2012-07-05T07:01:54.340
> 
> 标签：sql-server, tsql, ssis

我正在使用 SQL Server 2005。我在这里有一些 SSIS 包：`C:\SSIS`

下面的代码用于执行所有包，但我仍然需要将每个包名称放在一个名为 Packages 的表中。

我可以在不保存包名的情况下执行所有包吗？我只想提供他们都坐在哪里的路径，并希望 SQL 完成其余的工作。

```
DECLARE @package_name varchar(200)

Declare @PackageCount int

Declare @X int

Set @X = 1

Set @PackageCount = (Select COUNT(*) from Packages)

set @FilePath = 'C:\SSIS'

While (@X <= @PackageCount)
Begin

With PackageList as 
(
Select PackageName, Row_Number() Over(Order by PackageName) as  Rownum
From Packages
)
SELECT @package_name = PackageName 
FROM PackageList
Where Rownum = @X

select @cmd = 'DTExec /F "' + @FilePath + @Package_name + '"'

print @cmd

Set @X = @X + 1

exec master..xp_cmdshell @cmd

End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:52:48.357

为什么不直接使用 SSIS 来做到这一点？将 Foreach 循环容器放到一个新包上。获取所有 .dtsx 文件的完全限定路径。在 foreach 循环中，有一个执行包任务并为其分配当前包路径。

这将减少您运行单个程序包的问题，​​您可以通过一系列措施（.NET、SQL 代理、Windows 调度程序等）解决该问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:39:43.573

您需要使用 xp_cmdshell 在文件夹上执行循环并获取文件名。

这是有关如何执行此操作的示例。当然，您需要清理结果并仅获取重要的行

```
SET NOCOUNT ON

DECLARE @Command VARCHAR(100)
SET @Command = 'dir  C:\test'

DECLARE @Folder VARCHAR(100)
SET @Folder = 'C:\test'

DECLARE @FilesInAFolder TABLE  (FileNamesWithFolder VARCHAR(500))
INSERT INTO @FilesInAFolder
EXEC MASTER..xp_cmdshell @Command

select * from @FilesInAFolder 
```

如何启用 xp_cmdshel：

```
EXEC sp_configure 'show advanced options', 1
GO

RECONFIGURE
GO

EXEC sp_configure 'xp_cmdshell', 1
GO

RECONFIGURE
GO 
```

# android - Android 客户端请求和来自服务器的响应

> ID：11339286
> 
> 赞同：-1
> 
> 时间：2012-07-05T07:02:03.917
> 
> 标签：android, mysql, web-services

我是 android 的初学者，并为用户输入登录详细信息的应用程序设计了登录 GUI。在 Java 代码（字符串）中获取登录详细信息后，如何将其传递给服务器以检查有效组合？此外，当新用户输入注册详细信息时，我如何将其传递到服务器并将其存储在 DB（MySQL DB）中？网络服务的目的是什么？我应该使用 Web 服务还是 servlet（这不是唯一的事情，稍后在我的应用程序中我需要向/从服务器发送联系方式）？

我学习了 SOAP 网络服务。请指导我如何在 android 中开发此应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:28:47.117

在这篇文章中查看我的回答[使用 HttpURLConnection 添加对 POST 的调用主体](https://stackoverflow.com/questions/11326289/adding-body-of-call-to-post-using-httpurlconnection/11326578#11326578)

这将帮助您连接到 Web 服务并将数据传递给该服务

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T07:09:27.290

（通过使用 eclipse）试试这个我做了一个研究，发现这个

```
public class AndroidtestingActivity extends ListActivity  {

    /** Called when the activity is first created. */
    @Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    String result = null;
    InputStream is = null;
    StringBuilder sb = null;
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    List<String> r = new ArrayList<String>();

    try{

    //http post
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("YOUR SITE");
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
    }
    catch(Exception e){
        Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
   }

    //Convert response to string  
    try
    {
      BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));

      sb = new StringBuilder();

      String line = null;

      while ((line = reader.readLine()) != null) 
      {
         sb.append(line + "\n");
      }

      is.close();

      result = sb.toString();
    }
    catch(Exception e)
    {
        Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
    }
    //END Convert response to string   
    try{
            JSONArray jArray = new JSONArray(result);
            JSONObject json_data=null;
            for(int i=0;i<jArray.length();i++)
            {
               json_data = jArray.getJSONObject(i);                   
               r.add(json_data.getString("name")+json_data.getString("id"));
           }
           setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, r));
        }
        catch(JSONException e1){
            Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
        } catch (ParseException e1) {
            Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
    }

}

public boolean onCreateOptionsMenu(android.view.Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    MenuInflater blowUp = getMenuInflater();
    blowUp.inflate(R.menu.cool_menu, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch(item.getItemId()){
    case R.id.iadd:
        Intent i = new Intent("android.intent.action.ADD");
        startActivity(i);

        break;  
    }
    return false;
}
} 
```

必须使用 PHP Android - PHP - server/database 将 Android 连接到服务器

# linux - 如何计算 Linux 目录中运行的文件数量？

> ID：11339287
> 
> 赞同：-2
> 
> 时间：2012-07-05T07:02:17.650
> 
> 标签：linux

我必须列出当前目录中运行的文件并显示列出的文件数

文件 .

[root@xxxx ~]# ps -eaf | grep perl

根 16278 16196 48 10:38 pts/1 00:40:19 perl 文件名.pl

根 16379 16293 0 12:02 pts/0 00:00:00 grep perl

[root@xxxx ~]# ps -AF | grep -i "/var/www/anand/file/sample" wc -l

1

[root@xxxx ~]#

有 2 个文件在同一目录“示例”中运行我必须计算文件的数量以上评论不起作用请提供任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:08:42.487

```
$ ls | wc -l 
```

或者当您只需要常规文件时：

```
$ ls -l | grep ^- | wc -l 
```

当您需要从目录启动的文件数时，例如 /home/user，您必须使用类似的内容：

```
$ ps aux | grep /[h]ome/user | wc -l 
```

请注意`[]`可以放在名称中任何字母周围的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:09:01.637

```
ps -AF | grep -i "/usr/local/" | wc -l 
```

“/usr/local/”是您感兴趣的目录

# maven - Maven 站点：在“部署”目标期间（在测试配置文件中）部署（使用不同的 url）？

> ID：11339291
> 
> 赞同：0
> 
> 时间：2012-07-05T07:02:23.130
> 
> 标签：maven, maven-release-plugin, maven-site-plugin, maven-deploy-plugin

如何让 Maven 在运行部署时执行站点：站点和站点：部署？

我最好制作自己的插件（maven-release-plugin 的修改版本）还是在 Maven 中有一种简单的方法（在配置文件中配置插件）？

谢谢！

编辑澄清：我基本上希望为快照发布完成一个站点部署（到一个特殊的 url）。即javadoc。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:10:11.697

创建两个配置文件。

除非已定义属性，否则第一个将处于活动状态。它将使用一个 URL。

第二个将由某些属性触发。

在每个配置文件中定义站点插件所需的设置及其各自的差异。

# asp.net - 隐藏字段在回发时丢失内容

> ID：11339297
> 
> 赞同：0
> 
> 时间：2012-07-05T07:02:39.940
> 
> 标签：asp.net, session-state, forms

我正在尝试创建一个无会话网站，在该网站中我使用 StringBuilder 将数据发布到另一个表单。问题是数据发布到另一个表单后，页面加载正确，但如果我重新加载页面或点击输入隐藏字段会丢失它们的值。

例如

页面 A 正在使用 StringBuilder 发布到页面 B，页面 B 获取表单数据并将其保存在隐藏字段中，但现在如果我刷新页面，一切都会丢失：

```
 StringBuilder sb = new StringBuilder();
        sb.Append("<html>");
        sb.AppendFormat(@"<body onload='document.forms[""form""].submit()'>");
        sb.AppendFormat("<form name='form' action='{0}' method='post'>", "page2.aspx");
        sb.AppendFormat("<input type='hidden' name='param1'  value='{0}'>", param1.Value);
        sb.AppendFormat("<input type='hidden' name='param2'  value='{0}'>", param2.Value);

        sb.Append("</form>");
        sb.Append("</body>");
        sb.Append("</html>");

        Response.Write(sb.ToString());

        Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:19:38.997

为了保持它们的值，隐藏字段需要标记为`runat="server".`That would be me first appraoch - 但是，如果您使用字符串构造表单，我认为这不会起作用（表单也需要是`runat="server"`）

实际上查看您的代码-您已经绕过了网络表单-因此您显然没有使用它们。所以我要么使用上面的网络表单，要么使用带有适当模型的 MVC 方法，如果正确执行，它将具有维持状态的效果。

或者，可以在回发时从 Request 对象中获取这些值——虽然有点老派。

# c# - 初始加载后添加额外的列（Telerik MVC Grid）

> ID：11339298
> 
> 赞同：0
> 
> 时间：2012-07-05T07:02:45.117
> 
> 标签：c#, asp.net-mvc, telerik-grid

我希望能够在加载网格后添加额外的列。用户应该能够从用户可以选中复选框的页面顶部提交表单，然后页面更新为网格中新添加的列。

例如，如果我有两列来自初始加载并且用户想要添加第三列。我怎样才能在技术上实现这一目标？我看到了一个创建新 GridColumnSettings 的示例，但我认为这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:46:44.300

Telerik 关于列设置的文档非常好：

[http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-columns.html#ColumnConfig](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-columns.html#ColumnConfig)

我觉得你有两个选择。

一种是在生成列时使用 Hidden 方法，然后在单击按钮时使用 javascript 来“取消隐藏”额外的列。

另一种选择是在服务器端选择性地呈现列或不呈现。取复选框的值，并将其传递给列定义代码中列的 Visible 方法。

# android - 你如何检测一个精灵是否在另一个精灵内部？

> ID：11339307
> 
> 赞同：0
> 
> 时间：2012-07-05T07:03:20.853
> 
> 标签：android, box2d, sprite, andengine, overlap

我正在使用 AndEngine 和 Box2d 制作游戏。精灵/身体随机生成并放置在场景中。我知道我可以计算这些区域并查看它们是否重叠，但这似乎很费力。有没有一种简单的方法来检测一个精灵/身体是否正在另一个内部创建？就像是：

```
boolean outside = false;
while(!outside){
try{
randx = random.nextInt(650) + 25;
randy = random.nextInt(400) + 25;
sprite = new Sprite(randx,randy,spriteTR,getVertexBufferObjectManager())
scene.attachChild(sprite);
outside = true;
}catch(){} 
```

或者尝试/捕获不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:05:36.750

是的，您需要做的是创建两个精灵，然后进行碰撞检测。有一种简单的方法可以做到这一点，而通过 box2d 有一种更复杂的方法。

简单的方法：

```
sprite1.collidesWith(sprite2); 
```

如果两个精灵相互接触，它应该返回 true。

通过 Box2d，您将使用称为**ContactListener**的东西来检测碰撞。

```
 ContactListener contactListener = new ContactListener()
            {
                    @Override
                    public void beginContact(Contact contact)
                    {   
                    }

                    @Override
                    public void endContact(Contact contact)
                    {  
                    }

                    @Override
                    public void preSolve(Contact contact, Manifold oldManifold)
                    {
                    }

                    @Override
                    public void postSolve(Contact contact, ContactImpulse impulse)
                    {  
                    }
            }; 
```

Inside beginContact, you will want to do your code for randomizing the locations of the sprites again (or whatever other algorithm you want to employ). The other methods give you additional functionality, for example you can employ endContact when the two objects stop overlapping each other.

For more information and a detailed tutorial see: [http://www.andengine.org/forums/tutorials/contact-listener-t5903.html](http://www.andengine.org/forums/tutorials/contact-listener-t5903.html)

# c# - 使用 lambda 的 Where 子句在单元测试中总是返回 true

> ID：11339310
> 
> 赞同：0
> 
> 时间：2012-07-05T07:03:36.673
> 
> 标签：c#

我有一个有 2 列的表。

```
| DealerCode | TransactionID |
| 222223     | 98766         | 
```

我有这个返回列表的方法

```
public List<Transaction> GetCurrentTransaction(string dealerCode, string transactionId)
    {
        return context.Transactions.Where(c => c.DealerCode == dealerCode && (c.TransactionID == transactionId)).ToList();
    } 
```

但是每次我尝试对其进行单元测试时，它总是显示为真，正如您在我的测试中看到的那样，我故意创建了一个错误的参数，因此它会失败。

```
Assert.IsNotNull(tran.GetCurrentTransaction("2222231", "987661")); 
```

我尝试通过论坛搜索和谷歌搜索无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:13:20.337

您可能想添加一个`Assert.IsNotEmpty`断言 - [http://www.nunit.org/index.php?p=conditionAsserts&r=2.2.8](http://www.nunit.org/index.php?p=conditionAsserts&r=2.2.8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:15:15.720

如果您使用 MSTest，您可以添加：

```
Assert.IsTrue(tran.GetCurrentTransaction("2222231", "987661").Any()); 
```

`Any()`检查列表中是否有对象。功能单元测试还将在 Any.xml 中指定条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:15:41.800

您的方法返回 List 的一个实例，即使它不包含任何项目（因为没有符合条件的记录），列表本身仍然被创建，因此不等于 NULL，这就是您的单元测试通过的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:15:15.197

@ChaosPandion 在他的评论中说得对。您的 GetCurrentTransaction 方法将始终返回列表的实例（不为空）。在没有匹配项的情况下，该列表将不包含任何项目。您可以使用类似于以下的代码来获得您所追求的结果。

```
Assert.IsTrue(tran.GetCurrentTransaction("2222231", "987661").Any()); 
```

# c++ - C++ 中的集合向量

> ID：11339314
> 
> 赞同：5
> 
> 时间：2012-07-05T07:03:53.667
> 
> 标签：c++, set

> **可能重复：**
> [如何在 C++ 中做集合向量？](https://stackoverflow.com/questions/5599642/how-to-do-the-vector-of-sets-in-c)

我想为我的代码中的不同级别设置一组。每个级别的集合将保存整数值。这些集合的数量应该是动态的，具体取决于所需的级别数（作为输入给出）。

为此，我想要一个动态的集合结构。我怎样才能做到这一点？我可以根据需要使用指向集合的指针数量吗？我如何实现这一目标？有没有其他方法。

有人可以给我一个片段吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T07:26:50.067

```
vector<set<int> > my_sets; 
```

* * *

将元素添加到第 i 个集合：

```
int number;
//...
my_sets[i].insert(number); 
```

* * *

搜索第 i 个集合中的元素：

```
if(my_sets[i].find(number) != my_sets[i].end())
{
      // Number found
} 
```

* * *

迭代第 i 个集合：

```
for(set<int> :: iterator it = my_sets[i].begin(); it != my_sets[i].end();++it)
{
   // do something with integer value *it
} 
```

* * *

添加一个新集合：

```
set<int> temp;
temp.insert(a);temp.insert(b);//...
my_sets.push_back(temp); 
```

* * *

擦除第 i 组：

```
my_sets.erase(my_sets.begin() + i ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T07:07:22.567

集合的向量很简单`std::vector<std::set<type>>`。你在寻找别的东西吗？

# python - Redis 中的原子操作

> ID：11339315
> 
> 赞同：1
> 
> 时间：2012-07-05T07:04:08.017
> 
> 标签：python, redis

如何原子地执行这些操作？

```
def setNickName(nick):
    oldNick = r.get("user:id:1:nick") # r - instance of redis.Redis()
    updated = r.set("user:id:1:nick", nick) if r.hsetnx("user:ref:nick", nick, '1') else False

    if updated and oldNick:
        r.hdel("user:ref:nick", oldNick)
        return True

    return False 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T07:05:38.667

您可以制作一个 lua 脚本并使用[EVAL](http://redis.io/commands/eval)命令执行它。它将有效地使整个过程原子化。

请注意，带有 Lua 脚本的 Redis 尚未发布（2.6-rc5），但它已经相当稳定了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:40:39.983

您可能希望使用手表在事务中执行此操作[https://github.com/andymccurdy/redis-py/#pipelines](https://github.com/andymccurdy/redis-py/#pipelines)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-28T06:57:21.707

让我用管道重写你的代码：

```
def setNickName(nick):
    with r.pipeline() as pipe:
        while 1:
            try:
                pipe.watch("user:id:1:nick")
                oldNick = pipe.get("user:id:1:nick") # r - instance of redis.Redis()
                pipe.multi()
                updated = r.set("user:id:1:nick", nick) if r.hsetnx("user:ref:nick", nick, '1') else False
                pipe.execute()
                if updated and oldNick:
                    r.hdel("user:ref:nick", oldNick)
                    return True
                print("False")
            except redis.WatchError:
                 continue 
```

# iphone - 以 CSV 格式将数据导出到邮件

> ID：11339321
> 
> 赞同：0
> 
> 时间：2012-07-05T07:04:24.127
> 
> 标签：iphone, objective-c, ios, xcode, csv

我有一个费用清单，其中包括存储在 Coredata 中的日期、类别名称和金额。我希望它们以 CSV 格式传输到 Mail。可以这样做吗？我还希望只发送当月的数据。

我用谷歌搜索它，我发现的只是 CHCSV 解析器，我不知道如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:11:57.203

将您的数据转换为 csv 应该很容易，只需声明一个可变字符串，遍历您要添加的对象并使用逗号分隔将您需要的值添加到字符串中（最好将数据值也包含在“”中）。您可以在 wiki 中搜索 csv 格式。然后将该字符串写入临时 .csv 文件。然后，使用 mfmailcomposer，将 .csv 文件附加到邮件中，就完成了。

如果您没有通过谷歌搜索这些信息找到解决方案，请在此处提出更具体的后续问题。但是在 mfmailcomposer 上有很多资源和示例。

干杯

# ruby-on-rails - eBay API GetCategoryFeaturesRequest 返回“不支持的 API 调用”错误

> ID：11339322
> 
> 赞同：0
> 
> 时间：2012-07-05T07:04:28.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ebay-api, typhoeus

我正在尝试从 eBay API`CategoryFeatures`使用。`Typhoeus::Request`我在 Ubuntu Server 11.04 上使用 Ruby 版本 1.9.3 和 Rails 3.2.3。

我的代码如下：

```
xml = <GetCategoryFeaturesRequest xmlns="urn:ebay:apis:eBLBaseComponents"> 
<RequesterCredentials>
<eBayAuthToken> MY_eBayAuthToken </eBayAuthToken>
</RequesterCredentials>
<WarningLevel>High</WarningLevel>
</GetCategoryFeaturesRequest>

header = {
"X-EBAY-API-DEV-NAME" => my_devID,
  "X-EBAY-API-APP-NAME" => my_appID,
  "X-EBAY-API-CERT-NAME" => my_certID,
  "X-EBAY-API-CALL-NAME" => "GetCategoryFeatures",
  "X-EBAY-API-COMPATIBILITY-LEVEL" => "1.3.0",
  "X-EBAY-API-SITEID" => 1,
  "Content-Type" => "text/xml",
}
url = "https://api.sandbox.ebay.com/ws/api.dll "
res = Typhoeus::Request.post(url, :body => xml, :headers => header ) 
```

我收到了这个错误：

```
<?xml version=\"1.0\" encoding=\"UTF-8\" ?>
<GeteBayOfficialTimeResponse xmlns=\"urn:ebay:apis:eBLBaseComponents\">
<Timestamp>2012-07-05 06:41:28</Timestamp>
<Ack>Failure</Ack><Errors>
<ShortMessage>Unsupported API call.</ShortMessage>
<LongMessage>The API call \"GeteBayOfficialTime\" is invalid or not supported in this release.</LongMessage>
<ErrorCode>2</ErrorCode>
<SeverityCode>Error</SeverityCode>
<ErrorClassification>RequestError</ErrorClassification>
</Errors>
<Build>14991382</Build>
</GeteBayOfficialTimeResponse> 
```

有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:57:56.360

尝试在测试工具中测试您的 XMl： [https ://developer.ebay.com/DevZone/build-test/test-tool/default.aspx](https://developer.ebay.com/DevZone/build-test/test-tool/default.aspx)

我运行这个 XML 并且它可以工作：

```
<?xml version="1.0" encoding="utf-8"?>
<GetCategoryFeaturesRequest xmlns="urn:ebay:apis:eBLBaseComponents">
<RequesterCredentials>
<eBayAuthToken> my_Token </eBayAuthToken>
</RequesterCredentials>
</GetCategoryFeaturesRequest> 
```

# jquery - 使用jQuery替换查询字符串param并放在地址栏中而不刷新

> ID：11339323
> 
> 赞同：0
> 
> 时间：2012-07-05T07:04:37.833
> 
> 标签：jquery, jquery-address

我必须使用 jQuery 或 JavaScript 将 st=6 替换为 st=7 并更新地址栏。我尝试使用jQuery地址插件，但我只能替换#之后的部分。

您能否建议我如何在 # 之前更新查询字符串。查询字符串如下所述。

`http://test.com/search/searchresults?st=6&term=chicken#/?term=chicken&pi=1&ps=10`

我不想在更改 url 时刷新页面，但需要更改地址栏中的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:20:35.680

如果您的意思是要更新地址栏中的实际 url，那么这是 HTML5 的一项新功能，并未得到广泛支持。

例如：

```
window.history.pushState(“object or string”, “Title”, “/new-url”); 
```

查看 caniuse.com 似乎这将在所有浏览器的下一个主要版本中出现：

*   [http://www.caniuse.com/#search=pushState](http://www.caniuse.com/#search=pushState)

您仍然可以更改 url，但它会导致页面通过使用重新加载`window.location = "http://www.example.com/";`

您应该能够使用此页面中的其他正则表达式来构建要重定向到的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:24:01.923

我认为您要求的内容无法实现，请考虑将当前 url 替换为真实银行 url 的银行登录表单页面，这将导致重大安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:10:14.197

尝试这个

```
var str = 'http://test.com/search/searchresults?st=6&term=chicken#/?term=chicken&pi=1&ps=10';
str.replace(/(st\=)\d+&/, "$1" + '7'); // replace '7' with any number you like 
```

它不是 jQuery，它是 javascript（jQuery 是由 :) 通过[正则表达式](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)组成的，它应该在你的情况下完成这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:13:13.773

您可以使用正则表达式，如下所示：

```
var addr = 'http://test.com/search/searchresults?st=6&term=chicken#/?term=chicken&pi=1&ps=10';
var newVal = 7;

addr.replace(/([?&])st=\d+/, '$1st=' + newVal); 
```

# blackberry - 如何在黑莓中给我的页面幻灯片动画？

> ID：11339324
> 
> 赞同：0
> 
> 时间：2012-07-05T07:04:46.317
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

我正在创建一个 BlackBerry 应用程序，现在我想在单击图像按钮时呈现动画。在我的应用程序中，我使用启动画面，然后显示登录页面。当我点击我的登录页面的提交按钮时，会显示一个主屏幕，我想在那里显示一个幻灯片动画。

这是我的代码：

```
public class LoginPage extends MainScreen implements FieldChangeListener {

      public TextField tf_username;
      public TextField tf_password;     
      private Bitmap[] img1;    
      public LabelField labeluser;  
      public LabelField labelpass;  
      public static String strUsername = "";    
      public static String strPassword = "";    
      public CheckboxField objRemembercheckbox;     
      private ImageButton btn_login;    
      private ImageButton btn_clear;    
      public BitmapField loading = new BitmapField(Bitmap.getBitmapResource("login-bar.png"));
      public H_FieldManager hfm_btn;
      public VerticalFieldManager vfm_user, vfm_pass; 
      public PleaseWaitPopupScreen waitPopupScreen = null;  
      public VerticalFieldManager vfmMainManager;   
      public static boolean loginFlag = false; 
      public static boolean flagOutletButton;
      public RecordStore objLoginRecordStore;
      private String login_record_Store_Name = "LoginRMS";

    public LoginPage() {        // TODO Auto-generated constructor stub         super(USE_ALL_WIDTH | USE_ALL_HEIGHT);      setTitle(loading);
                try {
                        Background bg = BackgroundFactory.createSolidTransparentBackground(
                    Color.BLUE, 100);           getMainManager().setBackground(bg);
                    } catch (Exception e) {             // TODO: handle exception       }

        labeluser = new LabelField("Enter Username : ", Field.FIELD_LEFT);      labeluser.setMargin(10, 0, 0, 10);      labeluser.setColor(Color.BLACK);

        tf_username = new TextField(TextField.TYPE_PLAIN, Field.FIELD_HCENTER);

        labelpass = new LabelField("Enter Password : ", Field.FIELD_LEFT);      labelpass.setMargin(10, 0, 0, 10);      labelpass.setColor(Color.BLACK);

        tf_password = new TextField(TextField.TYPE_PASSWORD,
                Field.FIELD_HCENTER);

        objRemembercheckbox = new CheckboxField("Remember Me", false);      objRemembercheckbox.setMargin(10, 0, 0, 10);

                img1 = new Bitmap[3];       img1[0] = Bitmap.getBitmapResource("btn-hover.png");        img1[1] = Bitmap.getBitmapResource("btn.png");      img1[2] = Bitmap.getBitmapResource("btn.png");

        btn_login = new ImageButton(img1, "Login", Field.FIELD_LEFT);       btn_login.setColor(Color.WHITE);        btn_clear = new ImageButton(img1, "Clear", Field.FIELD_RIGHT);      btn_clear.setColor(Color.WHITE);

        hfm_btn = new H_FieldManager(btn_login, btn_clear, true,
                Field.FIELD_HCENTER);       vfm_user = new VerticalFieldManager();      vfm_user.add(labeluser);        vfm_user.add(tf_username);

        vfm_pass = new VerticalFieldManager();      vfm_pass.add(labelpass);        vfm_pass.add(tf_password);      add(vfm_user);      add(vfm_pass);      add(objRemembercheckbox);       add(hfm_btn);

        btn_login.setChangeListener(this);      btn_clear.setChangeListener(this);

    }

    public void fieldChanged(Field field, int context) {        // TODO Auto-generated method stub      if (field == btn_clear) {           tf_username.setText(" ");           tf_password.setText(" ");

        } else if (field == btn_login) {            login();        }

    }

public void login() {

        try {

            LoginPage.strUsername = tf_username.getText().toString();           System.out.println("strUsername==" + strUsername);          LoginPage.strPassword = tf_password.getText().toString();           System.out.println("strPassword==" + strPassword);

            if (strUsername.length() == 0 || strPassword.length() == 0
                    || strUsername == null || strPassword == null) {
                Dialog.alert("You must enter credentials");
                invalidate();           } else {

                // strUsername=username.getText();
                // strPassword=password.getText();

                try {

                    waitPopupScreen = new PleaseWaitPopupScreen("Please wait..");
                    UiApplication.getUiApplication()
                            .pushScreen(waitPopupScreen);
                    new Thread() {
                        public void run() {
                            ConnectToServer objConnectToServer = new ConnectToServer();

                            loginFlag = objConnectToServer.loginCheck(
                                    strUsername, strPassword);

                            UiApplication.getUiApplication().invokeLater(
                                    new Runnable() {
                                        public void run() {
                                            UiApplication.getUiApplication()
                                                    .popScreen(waitPopupScreen);

                                            if (loginFlag == true) {
                                                LoginPage.flagOutletButton = false;
                                                System.out
                                                        .println("Calling getOutletInfo");

                                                HomeScreen objHome= new HomeScreen ();
                                                UiApplication
                                                        .getUiApplication()
                                                        .pushScreen(objHome);

                                            }

                                            else {
                                                Dialog.alert("Username Or Password Is Incorrect");

                                            }

                                        }

                                    });
                        };
                    }.start();

                    // ConnectToServer objConnectToServer=new ConnectToServer();
                    //
                    // loginFlag=objConnectToServer.loginCheck(strUsername,
                    // strPassword);

                    System.out.println("loginFlag==" + loginFlag);

                } catch (Exception e) {
                    // TODO: handle exception
                    e.printStackTrace();
                }

            }

        } catch (Exception e) {             // TODO: handle exception           e.printStackTrace();        }

    }

  } 
```

请建议如何实现幻灯片动画。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:48:30.447

尝试以下链接：

[TransitionContext](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/TransitionContext.html) - TransitionContext 类包含唯一描述两个屏幕之间的过渡动​​画所需的所有数据。

[黑莓屏幕转换示例代码](http://od-eon.com/blogs/bogdan/blackberry-screen-transition-sample-code/)

[BlackBerry Java 应用程序屏幕转换 - 示例应用程序概述](http://docs.blackberry.com/en/developers/deliverables/16147/index.jsp?name=Screen%20Transitions%20-%20Sample%20Application%20Overview%20-%20BlackBerry%20Java%20ApplicationNo%20Info&language=English&userType=21&category=Java%20Sample%20Apps&subCategory=)

[创建屏幕转换代码示例](http://docs.blackberry.com/en/developers/deliverables/11958/Screen_transitions_detailed_overview_806391_11.jsp)

# jquery - jQuery冲突

> ID：11339325
> 
> 赞同：0
> 
> 时间：2012-07-05T07:05:07.073
> 
> 标签：jquery, conflict

我有一个在全屏图库页面上滑出的联系表格。jquery 代码有冲突并弄乱了图库。有任何想法吗？我尝试删除第二个 jquery 库，甚至在每个脚本中添加 noconflict 函数。

```
<body>
<div id="gallery_nav" style="height:30px;padding-top:5px;">
 <div class="logo"><a href="/">df</a></div>
<a href="/">Home</a>
<a href="/about">About Me</a>
<a href="/specials">Specials</a>
</div>

<div id="contactable"></div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2    /jquery.js">   </script>
<script type="text/javascript" src="/contactme/jquery.contactable.min.js"></script>
<link rel="stylesheet" href="/contactme/contactable.css" type="text/css" />
<script>
contact form scripts goes here
</script>

<div for full screen images goes here>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.js"> </script>
<script type="text/javascript" src="jquery.easing.1.3.js"></script>
<script>
script for image gallery goes here
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:12:29.613

尝试切换：首先是画廊（1.3），然后是脚本（1.7.2）。

尝试用 jQuery.noConflict(); 替换 jQuery 中的 $；

# c# - 一个正则表达式，用于 2 个不同的文本 c#

> ID：11339326
> 
> 赞同：0
> 
> 时间：2012-07-05T07:05:13.787
> 
> 标签：c#, regex

我有 2 个字符串。我需要**一个**正则表达式。

```
s1="The 8481D provides extraordinary accuracy, stability, and lower SWR.";

s2="<li>Complete with case and 9V battery</li><div id='warranty'><img src='1yr.gif'>"; 
```

我需要获取 s1 的所有字符和 s2 的字符直到字符：`<div id='warranty'>`

所以，它将是：

```
 s1="The 8481D provides extraordinary accuracy, stability, and lower SWR.";

    s2="<li>Complete with case and 9V battery</li>"; 
```

我想到了：`.+?(?<=<div id="warranty">)`但我只得到了 s2 字符串，也`.+?(?<=<div id="warranty">|\.)`没有用，我得到了 s1，但在 s2 中得到了太多字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:31:19.473

```
.+?(?=<div\sid='warranty'>|\.) 
```

或者如果你想包括和点正则表达式将是：

```
^.+?(?=<div\sid='warranty'>|$) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:47:49.963

在 C# 中执行此操作的最简单方法是使用`IndexOf`and`Substring`方法（如果您不坚持`Regex`）：

```
static String GetValidString(String inputString)
{
    int end = inputString.IndexOf("<div id='warranty'>");
    if (end == -1)
        end = inputString.Length;
    return inputString.Substring(0, end);
} 
```

# objective-c - 目标 C - 带有“>”字符串的 URL 不起作用

> ID：11339329
> 
> 赞同：0
> 
> 时间：2012-07-05T07:05:39.220
> 
> 标签：objective-c, url, uiwebview

我试图在 webview 中加载一个包含“>”符号的 url，但它失败了。为我提供一些解决此问题的提示。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:10:00.210

*使用*转义*`>`字符`%3e`。以下是应在 URL 中转义[的字符列表。](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm#whatwhy)*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:08:41.570

你可以使用这个：

```
NSString *myStr = @"< script >";
[myStr stringByAddingPercentEscapesUsingEncoding: ... ]; 
```*

# php - PHP多字节字符串连接和比较？

> ID：11339330
> 
> 赞同：1
> 
> 时间：2012-07-05T07:05:53.637
> 
> 标签：php, encoding, utf, multibyte, non-ascii-characters

Win7-HUN，UTF8 PHP 文件。

```
function Test($Msg){

 $Result = "";
 $ReplFrom = "ő";
 $ReplTo = "ö";

 for($i=0; $i<mb_strlen($Msg); $i++){
 $c = mb_substr($Msg, $i, 1);
 echo($c);echo("<br>");
 }
}

Test('őű'); 
```

这个显示不错：“őű”

我想用“ö”一个接一个地替换“ő”，因为我想检查许多其他事情。

```
function Test($Msg){

 $Result = "";
 $ReplFrom = "ő";
 $ReplTo = "ö";

 for($i=0; $i<mb_strlen($Msg); $i++){
 $c = mb_substr($Msg, $i, 1);
 $add = $c;
 $h = mb_substr($ReplFrom, 0, 1);
 if ($c == $h) {
 $add = $ReplTo;
 echo("found");
 }
 $Result = $Result.$add;
 }

 return $Result;

} 
```

有趣的是发现所有字符，结果是错误的。

简化为连接：

```
 $what = 'ő';
 $replto = "ö";
 echo($what.$replto); 
```

这很好。

```
 $what = mb_substr('ő', 0, 1);
 $replto = mb_substr("ö", 0, 1);
 echo($what.$replto); 
```

这是错误的。

我做错了什么？我想插入每个 MB 字符，并检查它。如果其中一些需要，我必须更换。如果其中一些是非法的，则用“”替换它们。等等。最后连接到一个字符串。

例如：“álmos ő körben + 2” “álmos ö körben 2”

但是我的代码有问题。我想使用 UTF8 字符，因为我有 MultiByte 输入和 UTF8 或 16 XML。有些服务器是英语的，有些是匈牙利语的（编码不同）。

但有趣的是，当我想使用 MB 字符时出现问题。也许连接会导致这种情况？

非常非常感谢这个主题的每一个进步！

问候：dd

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:28:21.250

您可能需要为 mb_ 函数指定编码。

```
$c = mb_substr($Msg, $i, 1,'utf-8'); 
```

# ruby-on-rails - 定义自定义状态机

> ID：11339333
> 
> 赞同：4
> 
> 时间：2012-07-05T07:06:21.357
> 
> 标签：ruby-on-rails, ruby

我试图让人们可以在类中定义任意工作流。这个代码对于 Stack Overflow 来说可能太长了，所以我有**[一个要点](https://gist.github.com/3051916)**。

如果您运行代码，前几个测试将起作用，但是当它尝试转换到支付状态时，它会检查`payment_required?`完全错误对象上的方法。我希望它在当前`Order`实例上检查它，但它（似乎）正在状态机匿名类上寻找该方法。

如何让它在`Order`实例上正确调用该方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:18:04.367

我已经通过将状态机定义移动到`Spree::Order`类来解决这个问题。[您可以在此拉取请求](https://github.com/spree/spree/pull/1743)中看到工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:50:45.943

问题出在匿名状态机的定义上，大约在第 42 行：

```
 order.class.transitions.each { |attrs| transition(attrs) } 
```

这意味着转换保护是在匿名状态机的上下文中评估的，而不是在`Order`类的上下文中。

一种解决方案是翻译过渡守卫。用此替换上面的行以通过您的测试套件：

```
 order.class.transitions.each do |attrs| 
    if attrs[:if].is_a? Symbol
      if_method = attrs[:if]
      attrs[:if] = lambda { order.send( if_method ) } 
    end

    transition(attrs)
  end 
```

您将需要支持所有类型的转换保护以获得完整的解决方案。建议看[`StateMachine::EvalHelpers`](https://github.com/pluginaweek/state_machine/blob/master/lib/state_machine/eval_helpers.rb)全套。

**更正：**

正如其他人所提到的，您还需要修复您的测试套件：

```
go_to :payment, :if => :payment_required? # Line 107

order.stub :payment_required? => true # Line 142 
```

# c# - .Net Entity Framework 4.0 继承 MySQL 和 NullReferenceException

> ID：11339342
> 
> 赞同：1
> 
> 时间：2012-07-05T07:07:01.460
> 
> 标签：c#, .net, mysql, visual-studio-2010, entity-framework

大家好！

我正在使用带有 VS2010 的 EF 4.0 和 MySQL 作为数据库。我有一个抽象类（BaseEntity）和一个派生类（ChildEntity）。BaseEntity 有一个 Id 属性（即 PK），而 ChildEntity 还有一个属性（名称）。我正在使用 Table-Per-Type 策略。（顺便说一句，我可以设置实体映射吗？我知道，有一个选项卡，但是我不能在那里添加新表......）我的问题是，当我向上下文添加一个新的 ChildEntity 并且保存上下文（SaveChanges 方法）我得到一个 NullReferenceException。我使用的代码：

```
using (var oc = new ModelContext())
{
   ChildEntity child = ChildEntity.CreateChildEntity(1, "Name");
   oc.AddToBaseEntities(child);                
   oc.SaveChanges();
} 
```

这是异常堆栈跟踪：

```
System.NullReferenceException was unhandled
  Message=Object reference not set to an instance of an object.
  Source=MySql.Data.Entity
  StackTrace:
       at MySql.Data.Entity.InsertGenerator.GenerateReturningSql(DbModificationCommandTree tree, DbExpression returning)
       at MySql.Data.Entity.InsertGenerator.GenerateSQL(DbCommandTree tree)
       at MySql.Data.MySqlClient.MySqlProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
       at System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
       at System.Data.Common.DbProviderServices.CreateCommand(DbCommandTree commandTree)
       at System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
       at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.CreateCommand(UpdateTranslator translator, Dictionary`2 identifierValues)
       at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
       at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
       at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
       at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
       at System.Data.Objects.ObjectContext.SaveChanges()
       at ConfigTool.Program.Main() in d:\dokumentumok\visual studio 2010\Projects\ConfigTool\ConfigTool\Program.cs:line 20
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

因此，错误来自提供者。我知道为什么会抛出它。当我将继承添加到模型时，它创建了一个约束，即 BaseEntity 和 ChildEntity 之间的 PK-FK 约束。我认为 MySql 提供者没有满足这个约束。那么我可以对此做些什么还是应该忘记使用继承？或者，也许我错过了什么？顺便说一句，我怎样才能做一个具体类型的表格策略？（去谷歌上查询？）

我使用提供程序和服务器的最新稳定版本。

谢谢您的帮助。

Ps.：抱歉，如果编辑（或我的英语）有问题，我是新来的。

# javascript - Rails 3/Backbone 应用程序的 RequireJS 问题

> ID：11339343
> 
> 赞同：1
> 
> 时间：2012-07-05T07:07:03.240
> 
> 标签：javascript, ruby-on-rails-3, backbone.js, asset-pipeline, requirejs

我有一个半大型（约 25 个视图）Backbone 应用程序（在 Rails 3.2 之上），我正在考虑使用 RequireJS，我有几个问题。

如果我所有的 JS 都已经编译成一个文件（通过 Rails 的资产管道），那么使用 RequireJS 有什么优势？更具体地说，是否有任何性能优势？

如果我异步加载文件，有没有办法为一段代码需要一个模块，但仍然执行那段代码？

EG 无论是否加载了[JS 上传器文件](https://github.com/blueimp/jQuery-File-Upload)，我都想渲染一个视图。如果 JS 尚未加载，我可以在按钮上添加“禁用”。当 JS 确实到达时，可以重新渲染模板，但这次排除“禁用”属性并将上传器 JS 附加到按钮。

感谢您的任何帮助。

# cygwin - cygwin zsh 首次启动：找不到命令

> ID：11339344
> 
> 赞同：6
> 
> 时间：2012-07-05T07:07:04.493
> 
> 标签：cygwin, zsh

我刚刚从 cygwin 安装程序安装了 cygwin 和 zsh。

我从文件资源管理器启动 C:\cygwin\bin\zsh.exe。

首次启动 zsh 时，会提示一个小配置。

我通过选择：“退出，创建仅包含注释的文件 ~/.zshrc。这将阻止此函数再次运行”来选择最小配置。

现在尝试使用zsh，但我总是有“找不到命令”错误

```
$ ls
zsh: command not found: ls 
```

我不明白为什么 zsh 在第一次启动后不能直接做任何事情。如何配置 zsh 以使用位于同一文件夹 C:\cygwin\bin 中的所有 cygwin bin 命令？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T08:53:10.307

`--login`您需要通过传递or`-l`选项来调用 zsh 作为登录 shell 。这告诉它 source `/etc/zprofile`，这`PATH`是配置搜索的地方。您可以通过创建 zsh.exe 的资源管理器快捷方式并将选项添加到目标字段来做到这一点。

# c# - 在另一个类中创建构造函数

> ID：11339346
> 
> 赞同：0
> 
> 时间：2012-07-05T07:07:10.430
> 
> 标签：c#, .net, oop

我有一个没有构造函数代码的部分类。我想添加构造函数代码，但是否可以将此构造函数添加到另一个类中，该类是该部分类的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:09:30.363

> 在另一个类中添加这个构造函数

不，你不能。

但是在同一个部分类中或者可能在不同的文件中，是的

```
public partial class Test
{
}

public partial class Test
{
    public Test()
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:10:49.760

不能为另一个类中的类添加构造函数。

有什么可能有一个类的构造函数，该类由该部分类的任何文件中的多个具有部分类的文件组成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:11:06.807

如果我正确理解了这个问题，答案是您可以在您希望的部分类的任何一侧添加构造函数。但是您不能将它添加到分部类中存在的嵌套类中，因为那是一个完全不同的类。官方 msdn 网站上提供的示例说明了这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T07:11:47.483

*如果*您的类是该类的部分，您可以将构造函数添加到部分类！

这是您可以执行的操作的示例：

```
public partial class Test
{
    public string Name { get; set; }

    public Test(string name, int age)
    {
        Name = name;
        Age = age;
    }
}

public partial class Test
{
    public int Age { get; set; }

    public Test(string name)
    {
        Name = name;
    }
} 
```

本质上，这与执行以下操作相同：

```
public class Test
{
    public int Age { get; set; }
    public string Name { get; set; }

    public Test(string name)
    {
        Name = name;
    }

    public Test(string name, int age)
    {
        Name = name;
        Age = age;
    }
} 
```

# d3.js - 避免 d3.js 圆圈重叠

> ID：11339348
> 
> 赞同：21
> 
> 时间：2012-07-05T07:07:17.917
> 
> 标签：d3.js, force-layout

您可以在这个 bl.ock [http://bl.ocks.org/3012590](http://bl.ocks.org/3012590)中看到巴黎有很多地理参考点，大圆圈在小圆圈上方：

![在此处输入图像描述](../Images/6fe56c4e67f125cf4d219783adf83b9f.png)

我想得到类似于[http://vallandingham.me/vis/gates/](http://vallandingham.me/vis/gates/)的东西，这样圆圈就会被它的边界紧紧地附着。

![在此处输入图像描述](../Images/430a9298d4f2b31493cd40fe369c4cce.png)

抱歉，我在这段代码中找不到答案，我错过了一些我认为的东西。

有一个简单的解决办法吗？尝试了不同的负电荷力，如果圆圈大小发生变化会导致问题（如果巴黎的所有圆圈都变小，那么它们就会变得太远）？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-06T16:14:17.120

如果您的目标是防止重叠，那么[检测碰撞](http://mbostock.github.com/d3/talk/20111018/collision.html)是满足该约束的更直接方法。这将产生比排斥电荷力更精确的结果。这是另一个例子：

*   [http://bl.ocks.org/1748247](http://bl.ocks.org/1748247)

您不需要强制布局来完成此操作，尽管两者经常一起使用。您可以对节点进行固定次数的迭代，以解决初始化时的任何冲突。

# objective-c - 获取给定位置的坐标

> ID：11339349
> 
> 赞同：0
> 
> 时间：2012-07-05T07:07:19.810
> 
> 标签：objective-c, cocoa-touch, google-maps, geocoding, latitude-longitude

好的，这就是我想要实现的，我需要你的想法：

*   按名称/地址/等输入地理位置（例如`London, Oxford Street 20`）
*   获取点的**经度/纬度**

* * *

**我的问题：**

*   你会怎么做呢？
*   使用*Google Maps API*（这是我首先想到的）是我唯一的解决方案吗？

*如果所使用的服务可以自由集成到商业应用程序中会更好 - 所以欢迎任何想法...... :-)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:34:59.313

您要做的基本上是**地理编码**。谷歌、必应和雅虎（以及更多）等主要地图提供商都提供某种形式的地理编码 API 供您使用。查看以下快速链接：

*   [谷歌地图地理编码 API](https://developers.google.com/maps/documentation/geocoding/)
*   [必应位置 API](http://msdn.microsoft.com/en-us/library/ff701715.aspx)
*   [雅虎！地图网络服务（地理编码 API）](http://developer.yahoo.com/maps/rest/V1/geocode.html)

**编辑：（**刚刚看到objective-c标签）

请注意，这些是非本地解决方案。但是，提供的 API 通常是基于 REST 的（输出为 xml/json），您应该不难使用这些服务从应用程序中获取您想要的地理编码纬度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:28:34.887

为此有一个内置的 API。
对于 iOS 5 和更新版本，您可以使用[CLGeocoder](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/cl/CLGeocoder)，对于旧版本，您需要使用一些外部库。

打电话

```
- (void)geocodeAddressString:(NSString *)addressString completionHandler:(CLGeocodeCompletionHandler)completionHandler 
```

您想要获取位置的位置。它异步运行，`completionHandler`您将获得一个包含所有可能的地址的地标数组，其中第一个是最准确的。正如苹果所说：

> 对于大多数地理编码请求，此数组应仅包含一个条目。但是，在指定地址无法解析到单个位置的情况下，前向地理编码请求可能会返回多个地标对象。

*题外话：*
只有我一个人首先想到的`Oxford`是“他对这个奇怪的十六进制值是什么意思？”

# javascript - jQuery element.dispatchEvent() 不是函数吗？

> ID：11339353
> 
> 赞同：3
> 
> 时间：2012-07-05T07:07:53.200
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试在图像滑块上使用 JQuery 的 Lightbox 功能。图像滑块工作得非常好，但是当我单击图像以查看灯箱中的图像时，它会以简单图像的形式打开，而不是在灯箱中打开。在使用 Firebug 检查元素时，我收到以下错误：-

```
element = [Document gallery.html]
eventName = "dom:loaded"
memo = undefined
_methodized()prototype.js (line 246)
fireContentLoadedEvent() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:03:43.643

Jquery 灯箱功能有时会与您在页面中使用的其他库发生冲突。有关更多详细信息，您可以访问以下链接： http: [//leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

# android - 每个设备许可的角落

> ID：11339357
> 
> 赞同：0
> 
> 时间：2012-07-05T07:08:18.623
> 
> 标签：android, payment, billing, android-lvl, nook

我是 Nook 的新手，我想将现有的 Android 应用程序移植到 Nook。现有的 Android 应用程序使用应用内购买，因此我们可以按设备收费，而不是按帐户收费。但我知道 Nook 不支持应用内购买。所以我的问题是：

1.  关于如何实施许可方案以允许每个设备许可的任何建议？

2.  将我的应用程序移植到 Nook 需要多少额外的工作？如果 Nook 不支持应用内计费，它是否有类似 LVL 的东西？将 Nook 的许可/支付集成到现有的 Android 应用程序需要多少工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:50:17.913

刚刚检查了 B&N 支持，基本上 Nook 不支持按设备许可。一旦用户购买了一个应用程序，他/她最多可以在 5 个 Nook 设备上使用它。也不支持应用内购买。希望它对其他有类似问题的人有所帮助。

# vba - 使用 VBA 指示特殊点的箭头

> ID：11339362
> 
> 赞同：3
> 
> 时间：2012-07-05T07:08:36.433
> 
> 标签：vba, excel, charts

我已经看到了一些使用 [箭头来指示 Excel 图表上的特殊点的示例，如下所示](http://peltiertech.com/Excel/Charts/PointAtPoints.html)。但我想使用 VBA 来实现这一点。例如，如果图表上的某个点大于 90，则它会显示对应于该点的箭头。

请建议我应该如何在 VBA 中进行操作。任何帮助，将不胜感激。

**更新**

除了改变点颜色之外，还有其他好的建议可以让这一点更加突出。

**更新 2**

现在我正在使用此代码。

```
For Each oCell In Range("e4:e" & LastRow) 'loop

       If oCell.Value < sd13 Then    'rule 13s
            Range("V4").Value = "Rule 13s voilated!"
            Range("V4:w4").Interior.Color = RGB(255, 0, 0)
         ActiveWorkbook.Sheets("LDL-C").ChartObjects("Chart 1047").Chart.SeriesCollection(1).Points(j).MarkerBackgroundColor = RGB(255, 0, 0)
            End If
            Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:01:45.750

> 除了改变点颜色之外，还有其他好的建议可以让这一点更加突出。

这会有帮助吗？

```
With ActiveChart
    For i = 1 To .SeriesCollection.Count
        a = .SeriesCollection(i).Values
        For l = 1 To .SeriesCollection(i).Points.Count
            If mymax < a(l) Then
                mymax = a(l)
                .SeriesCollection(i).DataLabels.Select
                Selection.Format.Line.Visible = msoTrue
                Selection.Format.Line.Visible = msoFalse

                .SeriesCollection(i).Points(l).DataLabel.Select
                .SeriesCollection(i).Points(l).Select
                .SeriesCollection(i).DataLabels.Select
                .SeriesCollection(i).Points(l).DataLabel.Select

                With Selection.Format.Line
                    .Visible = msoTrue
                    .ForeColor.ObjectThemeColor = msoThemeColorAccent1
                    .ForeColor.TintAndShade = 0
                    .ForeColor.Brightness = 0
                End With
                With Selection.Format.Line
                    .Visible = msoTrue
                    .Weight = 2
                End With
            End If
        Next l
    Next
End With 
```

**快照**

![在此处输入图像描述](../Images/6165763ad64c66a257bed4f76534e3bc.png)

另一个快照

![在此处输入图像描述](../Images/d4cb7c26ea583dacad7eceae66c5f1bc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:05:32.107

不知道如何用箭头来做，但这里有一种方法来改变兴趣点的颜色：

```
 With ActiveSheet.ChartObjects(ChartName).Chart.SeriesCollection("NCDs")
            For currentPoint = 1 To .Points.Count
                If Range("G" & currentPoint + 34).Value = True Then
                    With .Points(currentPoint).Format
                        .Fill.BackColor.RGB = RGB(50, 150, 50)
                        .Fill.ForeColor.RGB = RGB(50, 150, 50)
                        .Line.ForeColor.RGB = RGB(50, 150, 50)
                    End With
                Else
                    With .Points(currentPoint).Format
                        .Fill.BackColor.RGB = RGB(150, 50, 50)
                        .Fill.ForeColor.RGB = RGB(150, 50, 50)
                        .Line.ForeColor.RGB = RGB(150, 50, 50)
                    End With
                End If
            Next currentPoint
        End With 
```

只需更改名称和条件子句...也可能 .Points(currentPoint) 对象具有 x,y 位置属性，您可以使用它们来定位箭头。虽然不确定，但这似乎是一个很好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-23T23:17:30.080

是的，必须有VBA。VBA 的问题是有人必须记住运行程序，或设置 Worksheet_Calculate 事件或其他任何东西，因此当数据发生变化时，它不可避免地会发生变化，图表会跟上数据。

所以这是我的非 VBA 方法，它依赖于 Excel 公式。

简单的数据，由 Siddharth 在他的回答中提供。我添加了一个列，我称之为 MAX。单元格 C2 中的公式，复制到 C11，是

```
=IF(B2=MAX(B$2:B$11),B2,NA()) 
```

第一个图表在簇状柱形图中绘制常规数据系列。第二个图表添加了 MAX。在第三个图表中，我将重叠更改为 100%，因此蓝色条覆盖了相应的灰色条。下一张图表，我已将数据标签添加到 MAX 系列。在最后一个图表中，我将数据标签格式化为显示系列名称，字体颜色 = 与条形颜色匹配。

[![建立条件图](../Images/c1396c6be85de91a6d70a9b835b4a222.png)](https://i.stack.imgur.com/hDc1H.png)

所以这里是原始数据和图表（上）和更改后的数据和图表（下）。公式完成了所有工作，无需以某种方式重新运行 VBA。

[![条件MAX图的操作](../Images/421eb3980a3cdb167303aaaa7c504e02.png)](https://i.stack.imgur.com/dBjuh.png)

很酷的是，如果我有一个并列第一名，我会得到两个标记为蓝色的条，而无需额外的努力。

添加第三个系列来指示 MIN 并不是一件容易的事。

[![条件 MIN 和 MAX 图的操作](../Images/f146cf77092b9bff68f08ff21e802804.png)](https://i.stack.imgur.com/6XY0S.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-01-16T01:50:55.550

```
ActiveChart.FullSeriesCollection(1).Select
With Selection
    .MarkerStyle = 8
    .MarkerSize = 5
End With
Selection.MarkerStyle = 2
ActiveChart.ChartArea.Select
With Selection.Format.Line 
```

# c# - 将数据表转换为 IList c#

> ID：11339366
> 
> 赞同：3
> 
> 时间：2012-07-05T07:08:44.190
> 
> 标签：c#, linq, lambda

我得到了将数据表转换为 ilist 的代码。这可能有效，但代码对我来说不是很清楚。这是代码

```
table.AsEnumerable()
.Select(r => table.Columns.ToDictionary(c => c.ColumnName, c => r[c]))
.ToList(); 
```

**什么是 table.Columns.ToDictionary()...它的作用。c => c.ColumnName 是什么意思，c => r[c] r[c] 返回什么。我不太清楚。**

我有另一个片段....这里是

```
var list = new List<DataRow>();
foreach (var row in table.Rows)
   list.Add(row);

return list; 
```

这段代码对我来说很清楚，但我想知道哪个代码在 2 个不同的片段中具有良好的性能。请讨论。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T07:12:13.217

该`ToDictionary`调用将每个转换`DataRow`为`Dictionary<string, object>`可用于查找行中任何字段的值的 a。`=>`是[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)中使用的语法- 如果您要使用 LINQ 进行大量工作，您应该真正了解 lambda 表达式。

您的第二个片段将更简单地写为：

```
var list = table.Rows.Cast<DataRow>().ToList(); 
```

在效率方面 - 第一种形式在构建字典时从行中获取所有数据。如果您只需要查看某些字段，这可能会降低效率。另一方面，它*可能*更方便。这取决于你以后用它做什么。在内存方面，第二种形式意味着`DataRow`对象本身不能被垃圾收集，而第一种形式不需要之后的行 - 但它创建了所有实际数据的副本。这是否与您的情况相关将再次取决于您的其余代码。

不过，我不会关注一开始的性能——从让应用程序的其余部分编写起来最简单的代码开始，然后检查它的性能是否*足够好*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T21:54:44.930

如果您使用 .Net Framework 3.5，请尝试以下代码：

```
DataTable dt = new DataTable();
var list = dt.Select().ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:15:39.080

简单地说，它是一个转换为方法的 lambda 表达式。r 是一个对象，c 是它的索引器。这意味着您可以选择 r 的数组值之一。示例：从表 R 返回我的第 8 列，因此 c 的值为 8。希望它有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T07:15:58.520

他们的结果是不同的。

短的：

*   第一条语句创建一个字典列表，其中每个键值对是列名和值。`ToDictionary`扩展方法需要两个参数：一个键和一个值。在此示例中，关键是列名 ( `c => c.ColumnName`)。因为此方法是在数据行的`Columns`-collection 上调用的，所以`c`是一列。第二个参数获取列名并将其插入当前行，给出该列的实际值。因此，您的字典会充满由 ColumnName->Value 组成的 KeyValuePairs。这是为每一行完成的。之后 ToList() 函数返回一个字典列表。
*   `Rows`第二个示例仅使用 DataRows 填充列表，结果与使用数据表的集合相比没有优势。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T07:20:58.410

它`table.AsEnumerable()`与整个 SECOND 代码片段非常相似，您可以使用它们中的任何一个。

编码：

```
.Select(r => table.Columns.ToDictionary(c => c.ColumnName, c => r[c]))
.ToList(); 
```

为每个表行创建具有值的字典。您可能根本不需要它，因为 DataRow 已经具有此功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T14:50:54.057

关于代码性能，我同意之前的发帖者的观点，一开始你不应该关心速度。让它工作，然后把它做好。

但是，根据我在标准 foreach 循环和 LINQ 流畅语法之间的基准测试中看到的（有限）研究，LINQ 仅比标准 foreach 循环稍慢......并且在处理小数据集时，它是一个微不足道的缓慢。如果时间允许，我目前正在对这个主题进行一些独立的统计分析。

# caching - Varnish：局部图像缓存

> ID：11339367
> 
> 赞同：0
> 
> 时间：2012-07-05T07:08:46.970
> 
> 标签：caching, varnish

我有一个缓存图像的清漆服务器。一些图像被“部分”缓存：

清漆网址：

[http://pictures2.todocoleccion.net/tc/2012/07/05/32401624.jpg](http://pictures2.todocoleccion.net/tc/2012/07/05/32401624.jpg)

后端网址：

[http://pictures.todocoleccion.net/tc/2012/07/05/32401624.jpg](http://pictures.todocoleccion.net/tc/2012/07/05/32401624.jpg)

我看到的唯一变化是清漆已经开始 LRU Nuked 对象，但“部分”图像效果是新对象。

关于这种行为的任何想法？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:20:12.817

我刚刚在浏览器中重新加载了图片，发现部分碎片图像可以正确显示。也许 Varnish 昨天从后端缓存了一个损坏的图像？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:47:47.257

似乎这与 Varnish 无关。这是 nginx+cifs 服务器的问题。

# mysql - 查询中有什么问题

> ID：11339368
> 
> 赞同：0
> 
> 时间：2012-07-05T07:08:50.133
> 
> 标签：mysql

我正在尝试在以下查询中触发...

它有什么问题吗？

```
delete from user_role 
WHERE user_id in (
    select u.user_id from user u, user_role ur 
    where u.USER_ID=ur.USER_ID and ur.ROLE_ID=4 and u.USER_ID not in (
        select user_id from referrers)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T07:21:57.647

[`DELETE`如语法](http://dev.mysql.com/doc/en/delete.html)手册部分所述：

> 目前，您不能在子查询中从表中删除并从同一个表中选择。

您可以改为使用多表形式`DELETE`并将您的表[连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)在一起：

```
DELETE user_role
FROM   user_role
  INNER JOIN user_id   USING (USER_ID)
  LEFT  JOIN referrers USING (USER_ID)
WHERE user_role.ROLE_ID = 4 AND referrers.USER_ID IS NULL 
```

# php - PDO - 插入 (INSERT INTO...) 代码不起作用

> ID：11339372
> 
> 赞同：0
> 
> 时间：2012-07-05T07:09:06.767
> 
> 标签：php, mysql, database, date, pdo

我正在尝试将当前日期/时间作为用户上次登录的时间插入数据库。由于某种原因，这不起作用。
在同一页面上运行的其他插入脚本运行良好，并且连接正常。
我使用相同的语法在整个站点中插入其他内容，所以我不明白有什么问题。
我可以保证`else`当我输入密码时该部分正在执行。

这是我正在谈论的一段代码。

```
if(!$pwVer){ 
     // code to execute if the password is incorrect.
} else {

    $dateT = date("Y-m-d H:i:s");

    $up_date = $con->prepare("INSERT INTO tbl_user_test (user_last_login) VALUES (:l_login)");
    $up_date->bindParam(':l_login', $dateT);

    $up_date->execute();

    validateUser($userid); //sets the session data for this user

    header("Location: cart.php");
    $con = null;
    die();
} 
```

**一些背景：**

*   如果密码正确，$pwVer 返回 `true`。
*   `tbl_user_test` 和 `user_last_login` 都完全按照它们在数据库中的方式编写。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:21:49.970

> 我正在尝试将当前日期/时间作为用户上次登录的时间插入数据库。由于某种原因，这不起作用。

您的代码中没有可见的错误，因此应该执行它。一个可能的问题是 PDO 处于静默模式，它不会告诉您发生了什么错误或是否发生了错误。将 PDO 设置为失败并出现异常。

此外，无需自己构建当前日期；您可以使用 SQL 的`NOW()`.

```
<?php
$con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
try {
    $up_date = $con->prepare("INSERT INTO tbl_user_test (user_last_login) VALUES (NOW());");
    $up_date->execute();
}
catch( Exception $e ) {
    echo $e; exit;
}

header("Location: cart.php");
$con = null;
die(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T07:15:32.187

您是否在当前日期时间尝试 NOW() ？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T07:16:13.703

一旦检查这个

```
$up_date->bindParam(':l_login', $dateT, PDO::PARAM_STR); 
```

# android - 页面卷曲。在活动之间切换

> ID：11339376
> 
> 赞同：0
> 
> 时间：2012-07-05T07:09:13.367
> 
> 标签：android

我在 github 中下载了 page curl 项目，以便使用 gridview 将其应用到我的项目中。一旦我在gridview中单击图像，它将转到另一个活动，其中有图像数组，我将使用bundle将id从我的gridview传递给我的fullview活动。我想使用页面卷曲动画在全视图中的图像之间滑动，这样用户就不必回到 gridview 来查看另一个图像。但我不能将整数传递给 ARRAYLIST。以下是片段：

这是我在此链接中的 pagecurl 适配器：http: [//pastebin.com/JCq2YD6r](http://pastebin.com/JCq2YD6r)

我的网格视图的基本适配器在这里：

```
import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;
import android.util.Log;
import android.util.TypedValue;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.Toast;

public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public Integer[] mThumbIds = {
            R.drawable.r01,R.drawable.r02
            ,R.drawable.r03,R.drawable.r04,
            R.drawable.r05,R.drawable.r06,
            R.drawable.r07,R.drawable.r08,
            R.drawable.r09,R.drawable.r10,
            R.drawable.r11,R.drawable.r12

    };
    public ImageAdapter(Context c){
        mContext = c;
    }
    public int getCount() {
        // TODO Auto-generated method stub
        return  mThumbIds.length;
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return mThumbIds[position];
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ImageView imageView;

        SharedPreferences app_preferences = 
                PreferenceManager.getDefaultSharedPreferences(MainTab.current_act);
        int dpw = app_preferences.getInt("dpiw", 0);

        Log.i("IMmmm" , "" + dpw);
//      if (convertView == null) {  
         imageView = new ImageView(mContext);
         imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setImageResource(mThumbIds[position]);

//        int width = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 150, parent.getResources().getDisplayMetrics());
//        int height = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 175, parent.getResources().getDisplayMetrics());

        final float scale = parent.getResources().getDisplayMetrics().density;
        int width = (int) (100 * scale + 0.5f);
        int height = (int) (150 * scale + 0.5f);
        Log.i("with h " , ""+width + "  " + height + "   scale   " + scale );

        imageView.setLayoutParams(new GridView.LayoutParams(width, height));
        //}

//      } else {
//          imageView = (ImageView) convertView;
//        }

        return imageView;
    }

} 
```

这是我想在页面卷曲适配器中更改的部分

```
 // Create pages
    mPages = new ArrayList<Bitmap>();
    mPages.add(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher));
    mPages.add(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher)); 
```

如何将整数数组传递给这个数组列表是位图？顺便说一句，你怎么称呼它？数组列表？那是位图的arraylist吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:09:36.577

检查这个例子：[http ://devappandroid.com/android-beginner/page-curlturn-effect-android](http://devappandroid.com/android-beginner/page-curlturn-effect-android)

```
// Create pages
    mPages = new ArrayList<Bitmap>();
    mPages.add(BitmapFactory.decodeResource(getResources(),
            R.drawable.page1));
    mPages.add(BitmapFactory.decodeResource(getResources(),
            R.drawable.page2));
    mPages.add(BitmapFactory.decodeResource(getResources(),
            R.drawable.page3));
    mPages.add(BitmapFactory.decodeResource(getResources(),
            R.drawable.page4)); 
```

# python - 使用python在linux中访问文件的时间

> ID：11339377
> 
> 赞同：1
> 
> 时间：2012-07-05T07:09:15.133
> 
> 标签：python, file, ubuntu, stat

这个问题是我在[另一个线程](https://stackoverflow.com/questions/11337382/deleting-unaccessed-files-using-python)中的问题的延续。由于这个问题的观点略有不同，我想我会把它作为一个新问题发布。

我尝试使用 获取我`linux`机器`ubuntu lucid`中某些`python`文件的访问时间（未被访问。

为了访问文件，我定义了一个`readfile()`方法

```
def readfile(fname):
    with open(fname) as f:
        ct = f.read()
        print 'read file at:',time.time()
        print 'length of file:',len(ct) 
```

为方便起见，我定义了一些文件名

```
f1='/home/me/dev/misc/usedfiles/one.txt'
f2='/home/me/dev/misc/usedfiles/two.txt'
f3='/home/me/dev/misc/usedfiles/three.txt'
f4='/home/me/dev/misc/usedfiles/four.txt' 
```

以便调用`readfile(f1)`将访问该文件`one.txt`

我定义了另一个函数来遍历目录并打印过去 2 分钟内未访问的文件

```
def files_not_accessed():
    dirname = '/home/me/dev/misc/usedfiles'
    filenames = os.listdir(dirname)
    filenames = [os.path.join(dirname,filename) for filename in filenames]
    for filename in filenames:
        try:
            last_access = os.stat(filename).st_atime #secs since epoch
        except IOError:
            print 'could not get info about %s' % filename
        else:
            timediff =  time.time()-last_access
            print filename,'  last_access=',last_access
            print filename,'  timediff=',timediff
            if timediff > 2*60:
                print filename,'---older than 2 mts'
        print '' 
```

最初我运行了这个函数`files_not_accessed()`，它给出了以下输出

```
/home/me/dev/misc/usedfiles/two.txt   last_access= 1341459500.0
/home/me/dev/misc/usedfiles/two.txt   timediff= 11668.9905779
/home/me/dev/misc/usedfiles/two.txt ---older than 2 mts

/home/me/dev/misc/usedfiles/one.txt   last_access= 1341460126.0
/home/me/dev/misc/usedfiles/one.txt   timediff= 11042.990674
/home/me/dev/misc/usedfiles/one.txt ---older than 2 mts

/home/me/dev/misc/usedfiles/three.txt   last_access= 1341459504.0
/home/me/dev/misc/usedfiles/three.txt   timediff= 11664.99072
/home/me/dev/misc/usedfiles/three.txt ---older than 2 mts

/home/me/dev/misc/usedfiles/four.txt   last_access= 1341459510.0
/home/me/dev/misc/usedfiles/four.txt   timediff= 11658.990757
/home/me/dev/misc/usedfiles/four.txt ---older than 2 mts 
```

现在，我运行`readfile(f1)`函数来读取文件`one.txt`

```
read file at: 1341471195.88
length of file: 47293 
```

从`files_not_accessed()`函数的输出中可以看出，该文件`one.txt`最后一次访问是在 1341460126.0 ，现在又在 1341471195.88 被读取`readfile(f1)`

并且（立即）运行该`files_not_accessed()`函数并期望它不会输出该文件`one.txt`，因为它最近被访问过。我预计它的 last_access 时间是 1341471195.88

奇怪的是，我又得到了以前的输出

```
/home/me/dev/misc/usedfiles/two.txt   last_access= 1341459500.0
/home/me/dev/misc/usedfiles/two.txt   timediff= 11715.1272521
/home/me/dev/misc/usedfiles/two.txt ---older than 2 mts

/home/me/dev/misc/usedfiles/one.txt   last_access= 1341460126.0
/home/me/dev/misc/usedfiles/one.txt   timediff= 11089.1273479
/home/me/dev/misc/usedfiles/one.txt ---older than 2 mts

/home/me/dev/misc/usedfiles/three.txt   last_access= 1341459504.0
/home/me/dev/misc/usedfiles/three.txt   timediff= 11711.1273921
/home/me/dev/misc/usedfiles/three.txt ---older than 2 mts

/home/me/dev/misc/usedfiles/four.txt   last_access= 1341459510.0
/home/me/dev/misc/usedfiles/four.txt   timediff= 11705.1274359
/home/me/dev/misc/usedfiles/four.txt ---older than 2 mts 
```

我不明白为什么文件`one.txt`有 last_access=`1341460126.0` 而不是预期的`1341471195.88`

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:17:59.277

Ubuntu lucid 默认使用“relatime”挂载文件系统。如果您需要严格的时间，则需要使用“strictatime”（以性能为代价）进行挂载。

# web-applications - 不应允许访问其他资源

> ID：11339378
> 
> 赞同：1
> 
> 时间：2012-07-05T07:09:22.540
> 
> 标签：web-applications, zk

我的网络内容文件夹中有以下 ZUL 文件

```
Login.zul - Composer Applied
Category.zul - No Composer Applied 
Index.zul - Composer Applied
Help.zul - NO Composer Applied
AboutUs.zul - NO Composer Applied 
```

每当我尝试访问 Category.zul 或 Help.zul 时，我都可以在浏览器中看到它们，但根据我的用例，如果我尝试访问它，我应该始终被重定向到 Login.zul 我该如何实现这一点。

一种解决方案：我可以将作曲家添加到所有 ZUL 中，然后在 doAfterCompose() 中执行 Executions.sendRedirect("to my login page") ，但我认为这不是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:39:55.203

相当多的标准方法来处理这个

1.  使用[Spring Security](http://static.springsource.org/spring-security/site/)或[Apache Shiro](http://shiro.apache.org/)定义安全资源
2.  将所有受限页面置于 WEB-INF 下，并在应用程序 UI 请求时动态包含它们
3.  实施自定义身份验证和授权系统来决定哪个用户可以访问什么（类似于您在问题中已经提到的方法）。就我个人而言，我建议使用像 Shiro 或 Spring Security 这样的标准安全解决方案。要将 Shiro 集成到您的 ZK 应用程序中，请参阅这个[smalltalk](http://books.zkoss.org/wiki/Small_Talks/2012/March/Securing_ZK_Applications_With_Apache_Shiro)。对于 Spring Security，你可以参考关于[使用 Spring Security的 ZK Spring Essentials 部分](http://books.zkoss.org/wiki/ZK%20Spring%20Essentials/Working%20with%20ZK%20Spring/Working%20with%20ZK%20Spring%20Security)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:47:00.167

当初始化新桌面时，即当我在新选项卡中打开链接时，我已经实现了 ZK 的[DestopInit接口。](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zk/ui/util/DesktopInit.html)如果不是登录，我已检查页面 URL 我已将用户重定向回登录页面。

# json - Json 的 Jmeter CSV 文件

> ID：11339382
> 
> 赞同：2
> 
> 时间：2012-07-05T07:09:41.490
> 
> 标签：json, csv, request, jmeter

我是 jmeter 的新手。我需要测试一些 json 请求的性能，这些请求通常在 db 中进行一些插入或更新。

我需要动态更改一些记录 ID。例如

```
{"columnName":"company","newValue":"cts","oldValue":"","timeStamp":"11-05-2012 14:54:24","version":"1"}],"instruction":"contact_list","**recordId**":"8294547"}]} 
```

我希望记录 id 应该从 csv 文件中动态获取。所以我确实喜欢

```
 "recordid":"$recordid"} 
```

但是在 HIT TO THE SERVER 之后，我在请求中发现，在 json 循环结束后又打印了一次请求 ID，例如

```
{"columnName":"company","newValue":"cts","oldValue":"","timeStamp":"11-05-2012 14:54:24","version":"1"}],"instruction":"contact_list","recordId":"**8294547**"}]} 
```

**8294547**

返回到格式错误的 json 请求。

你能告诉我在json循环之后避免额外附加recordid的方法吗？

上面的 json 不是实际的，只是我复制了我需要的部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T08:23:51.483

你缺少花括号。在 JMeter 中插入变量的格式是 ${myVar}，而不是 $myVar。

# math - 线坐标

> ID：11339384
> 
> 赞同：0
> 
> 时间：2012-07-05T07:09:51.757
> 
> 标签：math, line

给定长度和角度时，我们如何计算直线的坐标（使用公式）。

我必须制作一个弹出框，它将长度和角度作为输入并画一条线。只需要公式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:13:34.713

假设线路的一端位于`(x0, y0)`，另一端将位于：

```
x1 = x0 + r cos(t * pi / 180)
y1 = y0 + r sin(t * pi / 180) 
```

其中`r`是线的长度，`t`是角度，以度为单位。

# css - 为什么Fontin字体在浏览器上很锐利，而在PDF阅读器上却很流畅？

> ID：11339393
> 
> 赞同：0
> 
> 时间：2012-07-05T07:10:25.493
> 
> 标签：css, html, browser, fonts

我喜欢一种叫做 Fontin 的字体，所以我决定在我的网站上使用它。我正在使用这段代码：

```
<div style='font-family: "Fontin"'>Text here</div> 
```

这些就是我所看到的：

![火狐](../Images/c76c3e852a4710af6ff1817f848e15ba.png)

![PDF格式](../Images/a91373078db0406408a0b51d19d53b51.png)

非常不一样。那里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:59:08.777

有许多不同的字体渲染引擎。Firefox 使用 Direct2D（如果您使用的是 Windows，则与 ClearType 结合使用），而 Adob​​e 使用他们自己的引擎。除其他外，与浏览器相比，Adobe 的引擎使用了大量的平滑或抗锯齿功能。您可以使用此插件[https://addons.mozilla.org/sv-SE/firefox/addon/anti-aliasing-tuner/](https://addons.mozilla.org/sv-SE/firefox/addon/anti-aliasing-tuner/)修改 firefox 的字体平滑。我还相信更改禁用硬件加速的选项可能会改变字体渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:51:16.517

这可能是 Adob​​e Reader 字体平滑。您可以通过编辑->辅助功能->设置助手禁用/启用它（选择“设置所有辅助功能选项”，单击下一步并选中/取消选中“禁用文本平滑”）。

要在 firefox（使用 html5 / css3）上获得相同的效果，请使用 -webkit-font-smoothing：

```
<div style="-webkit-font-smoothing: antialiased;"> Smooth Text ;) </div> 
```

# javascript - GetElementByClassName 和正则表达式

> ID：11339395
> 
> 赞同：1
> 
> 时间：2012-07-05T07:10:28.177
> 
> 标签：javascript, getelementbyid, getelementsbyclassname

我在文档中有这样的`div`with`class`和`id`属性：

```
<div class="blabla11" id="bla22"> 
```

在 class 和 id 值中，*blabla*是恒定的，而数字不是。如果类和 div 名称的某些部分是自动生成的，如何按类**和id 获取元素？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:13:35.850

获取所有的 div，并使用正则表达式进行测试

```
var selected = [];
var divs = document.getElementsByTagName('div');
for(var i = 0; i < divs.length; i++) {
    if(/^blabla/.test(divs[i].className)) {
        // selected.push(divs[i]);
        divs[i].parentNode.removeChild(divs[i]); // try this to remove
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T07:15:47.847

使用 jQuery，您可以使用此选择器：

```
$('div[class^="blabla"][id^="bla"]') 
```

在哪里：

*   class^="blabla" 匹配所有以 "blabla" 字符串开头的类值。
*   [...][...] 连接匹配这两个条件。

有关详细信息，请参见[此处](http://api.jquery.com/attribute-starts-with-selector/)。

[**演示**](http://jsfiddle.net/AUTJ4/22/)。

# c++ - Win7在注册表中注册失败

> ID：11339396
> 
> 赞同：0
> 
> 时间：2012-07-05T07:10:37.853
> 
> 标签：c++, windows-7, registry

我正在尝试在 Win7 注册表中注册 DLL（在 XP 中它的工作）。DllRegisterServer 实现如下：

1.  成功 - 调用 RegCreateKeyEx 函数注册新密钥：\HKEY_CLASSES_ROOT\NEWKEY

2.  失败 - 调用 RegCreateKeyEx 函数注册新密钥：\HKEY_CLASSES_ROOT\CLSID\NEWKEY

知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:54:54.367

Windows API 包含一个函数`GetLastError()`。大多数功能，包括注册表访问功能，都包含 LastError 范例的错误报告。

当您有自己的代码来注册 DLL 时，即调试您的 DLL 时，您`DllRegisterServer`是否在函数调用失败后调用 GetLastError？当您评估 的返回值时，您将了解原因`GetLastError()`。

# java - 简单的 GUI 没有出现？

> ID：11339398
> 
> 赞同：0
> 
> 时间：2012-07-05T07:10:39.010
> 
> 标签：java, swing, user-interface

好的，当我运行它时，它工作得很好，但它只是没有弹出答案。

我做错了什么？

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class AF implements ActionListener{

    double length;
    double width;
    double answer;

    JTextField twidth;
    JTextField tlength;

    void AFWindow() {

        JFrame AFwindow = new JFrame();
        JPanel pan2 = new JPanel(new GridBagLayout());
        AFwindow.setVisible(true);
        AFwindow.setSize(250, 150);
        AFwindow.setResizable(false);
        GridBagConstraints c = new GridBagConstraints();
        AFwindow.add(pan2);
        pan2.setBackground(Color.LIGHT_GRAY);

        c.gridx = 0;
        c.gridy = 5;
        tlength = new JTextField();
        tlength.setText("    Length    ");
        pan2.add(tlength, c);

        c.gridx = 0;
        c.gridy = 0;
        twidth = new JTextField();
        twidth.setText("     Width     ");
        pan2.add(twidth, c);

        JButton Find = new JButton("Ok");

        c.gridx = 0;
        c.gridy = -5;
        pan2.add(Find);
        Find.addActionListener(this);
        Find.setActionCommand("ok");
    }

    public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equalsIgnoreCase("ok")){
            try {
            this.length = Double.parseDouble(tlength.getText());
            this.width = Double.parseDouble(twidth.getText());
        }
        catch(NumberFormatException ex){
            System.out.println("There was an issue!");
        }
        }
    }

    int area = (int) (length * width);
    public void answer(){
        JFrame answer = new JFrame();
        answer.setVisible(true);
        answer.setBackground(Color.yellow);
        JPanel pan2 = new JPanel();
        JLabel howanswer = new JLabel("Your answer is" + area + "We got this by multiplying the length and width");
        pan2.add(howanswer);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:05:29.140

该代码有多个问题。忘记记录它们，但请查看此代码以了解修复的开始。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class AF implements ActionListener{

    double length;
    double width;

    JTextField twidth;
    JTextField tlength;
    JFrame AFwindow;

    void AFWindow() {

        AFwindow = new JFrame();
        JPanel pan2 = new JPanel(new GridBagLayout());

        GridBagConstraints c = new GridBagConstraints();
        AFwindow.add(pan2);
        pan2.setBackground(Color.LIGHT_GRAY);
        pan2.setBorder(new EmptyBorder(100,100,100,100));

        c.gridx = 0;
        c.gridy = 5;
        tlength = new JTextField();
        tlength.setText("    Length    ");
        pan2.add(tlength, c);

        c.gridx = 0;
        c.gridy = 0;
        twidth = new JTextField();
        twidth.setText("     Width     ");
        pan2.add(twidth, c);

        JButton Find = new JButton("Ok");

        c.gridx = 0;
        c.gridy = -5;
        pan2.add(Find);
        Find.addActionListener(this);
        Find.setActionCommand("ok");
        AFwindow.pack();
        AFwindow.setLocationByPlatform(true);
        AFwindow.setVisible(true);
    }

    int area;

    public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equalsIgnoreCase("ok")){
            try {
                this.length = Double.parseDouble(tlength.getText());
                this.width = Double.parseDouble(twidth.getText());
                area = (int) (length * width);
                answer();
            }
            catch(NumberFormatException ex){
                ex.printStackTrace();
                // System.out.println("There was an issue!");
                // Can you vague that up for me?!?!
                JOptionPane.showMessageDialog(AFwindow, ex);
            }
        }
    }

    public void answer(){
        JPanel pan2 = new JPanel();
        JLabel howanswer = new JLabel("Your answer is " + area + " We got this by multiplying the length and width");
        pan2.add(howanswer);
        JOptionPane.showMessageDialog(AFwindow, pan2);
    }

    public static void main(String[] args) {
        System.out.println("Hi!");
        new AF().AFWindow();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:48:58.217

您是否希望按下“确定”按钮时会弹出答案框？如果是这样，则需要调用 answer 方法：

```
 if (e.getActionCommand().equalsIgnoreCase("ok")){
        try {
            this.length = Double.parseDouble(tlength.getText());
            this.width = Double.parseDouble(twidth.getText());
            answer();       //  <--- This is missing
        } 
```

此外，您还需要做一些其他事情：

*   通常，在将组件添加到框架之后，您应该在 GUI 构造方法结束时调用 JFrame.setVisible。我已经在下面的示例中展示了这一点，但是您也应该将 setVisible(..) 移到 AFwindow() 方法的底部。

*   当您`int area = (int) (length * width);`在任何方法之外执行此操作时，此语句将被解释为实例变量初始化，并在您实例化 AF 对象时发生。并且当对象被实例化时，您还没有为 length 和 with 分配任何值。因此，面积将始终为 0。改为将该语句移至 answer 函数的内部。

*   您忘记在 answer 方法中将实际组件添加到框架中。因此，当您将框架设置为可见时，只会显示一个空框架。

以下是一些适当更改的示例：

```
public void answer(){
    int area = (int) (length * width);  //  <--- Move this inside answer method
    JFrame answer = new JFrame();
    answer.setBackground(Color.yellow);
    JPanel pan2 = new JPanel();
    JLabel howanswer = new JLabel("Your answer is" + area + "We got this by multiplying the length and width");
    pan2.add(howanswer);
    answer.add(pan2); //  <--- Don't forget to add your components to the frame
    answer.pack();    //  <--- Resize the frame to a suitable size
    answer.setVisible(true); //  <--- Set the frame to visible AFTER you have added the components

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:22:26.210

这段代码对我有用：

```
public class Test {
    public static void main(String[] args){
        JFrame test = new JFrame();
        test.setVisible(true);
        test.setSize(100,100);
        test.setResizable(false);
        test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

我假设您可以尝试减少代码并尝试以这种方式找到问题点。您可以放置​​一些日志记录以确保`setVisible(true)`被调用。此外，我建议`setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`在退出 GUI 后使用终止线程（如果不想执行一些退出后操作）。

# java - 带有 OnKeyListener 的 AutoCompleteTextView

> ID：11339401
> 
> 赞同：2
> 
> 时间：2012-07-05T07:10:54.403
> 
> 标签：java, android, autocomplete, textview, keylistener

我有一个`AutoCompleteTextView`并且我已经设置了`OnItemClick`，但现在我想设置`OnKeyListener`搜索按钮。我已经搜索过，但没有找到任何可以帮助我的东西。

这是我的自动完成 xml：

```
 <AutoCompleteTextView 
                android:id="@+id/autocomplete_stores" 
                android:layout_width="fill_parent" 
                android:layout_height="60dp" 
                android:layout_marginBottom="5dp"
                android:hint="Stores Search:" 
                android:singleLine="true" 
                android:ellipsize="end"
                android:imeOptions="actionSearch" /> 
```

和java代码：

```
AutoCompleteTextView searchStores;
String[] searchStoresString; 
ArrayAdapter<String> searchStoresAdapter;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.stores);

    findviews();
    autocomplete();

    searchStores.setOnItemClickListener(this);
}

public void onItemClick(AdapterView<?> adapterView, View view, int position, long id)
{ 
    String str = (String) adapterView.getItemAtPosition(position);
    Toast.makeText(this, str + " selected", Toast.LENGTH_SHORT).show();
}

private void findviews()
{
    searchStores = (AutoCompleteTextView) findViewById(R.id.autocomplete_stores);
}

private void autocomplete()
{
    searchStoresString = getResources().getStringArray(R.array.stores_array);
    searchStoresAdapter = new ArrayAdapter<String>(this, R.layout.list_item, searchStoresString);

    searchStores.setThreshold(1); 
    searchStores.setAdapter(searchStoresAdapter);
} 
```

一切正常。谢谢指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:14:30.583

你试试`setKeyListener()`？？寻求更多[帮助](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:26:49.727

尝试为 AutoCompleteTextView设置[setKeyListener() ：](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

```
edtTitle = (AutoCompleteTextView) findViewById(R.id.edtTitle);
        edtTitle.setOnKeyListener(new OnKeyListener() {

            @Override
            public boolean onKey(View arg0, int arg1, KeyEvent arg2) {
                // TODO Auto-generated method stub

                Toast.makeText(Current_Activity.this, arg1+"",
                Toast.LENGTH_LONG).show();
                // return true; - if consumed
                return false;
            }
        }); 
```

# batch-file - 将一个文件夹复制到多个文件夹中

> ID：11339403
> 
> 赞同：1
> 
> 时间：2012-07-05T07:10:59.710
> 
> 标签：batch-file

我有一个包含一些内容的文件夹，我想将这些内容复制到 260 个文件夹中，这些文件夹都在同一个文件夹中。我想这对于批处理文件和 for 循环是可行的，但我似乎无法理解如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:59:45.247

你可以[`XCopy`](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/xcopy.mspx?mfr=true)用来复制文件

```
 xcopy "src\*.*"  "..\..\..\dst" /s /i /c /y 
```

并且可以添加循环`FOR`循环

```
for /l %%a in (1,1,260) do (
   call :Method1
)

:Method1
xcopy "src\*.*"  "..\..\..\dst" /s /i /c /y
GOTO :EOF 
```

**更新**

```
FOR /D %%a in ("dst\*") do 
   xcopy "src\*.*"  "%%a" /s /i /c /y 
```

# android - 在同一个 Android.mk 中编译多个共享库

> ID：11339406
> 
> 赞同：2
> 
> 时间：2012-07-05T07:11:13.823
> 
> 标签：android, makefile, android-ndk

我正在尝试在同一个 mk 文件中编译 2 个共享库。第二个取决于第一个。我无法成功链接两者，第二个库看不到第一个库的 .h。

我可以将它们放在 LOCAL_C_INCLUDES 中，但是我想在 Android.mk 工作后对其进行拆分，并且我不能像这样进行硬引用。我发现 LOCAL_EXPORT_C_INCUDES 似乎完全符合我的要求......除了它不起作用。

这是我的代码

# -------------------------------------------------- --------------------------

# 第一个图书馆

```
include $(CLEAR_VARS)
LOCAL_MODULE := libFirst
LOCAL_PATH_ORIG := $(LOCAL_PATH)
LOCAL_PATH := /the/path/to/my/first/sources
LOCAL_SRC_FILES = $(subst $(LOCAL_PATH)/,,$(wildcard $(LOCAL_PATH)/**/*.c))
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
LOCAL_CFLAGS := -g -O2
include $(BUILT_SHARED_LIBRARY)
LOCAL_PATH := $(LOCAL_PATH_ORIG) 
```

# -------------------------------------------------- --------------------------

# 第二图书馆

```
include $(CLEAR_VARS)
LOCAL_MODULE := libSecond
LOCAL_PATH_ORIG := $(LOCAL_PATH)
LOCAL_PATH := /the/path/to/my/second/sources
LOCAL_SRC_FILES := $(subst $(LOCAL_PATH)/,,$(wildcard $(LOCAL_PATH)/**/*.cpp))                                                                                                                       
LOCAL_C_INCLUDES :=     $(wildcard $(LOCAL_PATH)/**)                                                                                                                    
LOCAL_LDLIBS := -lGLESv2 -llibFirst
LOCAL_SHARED_LIBRARIES := libFirst                                                                                                    
include $(BUILD_SHARED_LIBRARY)
LOCAL_PATH := $(LOCAL_PATH_ORIG) 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:52:19.297

问题是这一行：

```
include $(BUILT_SHARED_LIBRARY) 
```

A打错字了

```
include $(BUILD_SHARED_LIBRARY) 
```

...

# git - 在 PC 上为 git 定义公钥

> ID：11339411
> 
> 赞同：-1
> 
> 时间：2012-07-05T07:11:40.360
> 
> 标签：git, git-svn

我正在尝试将我的电脑设置为测试机。我是使用 git 的分布式团队的一员，但我对使用 git 很陌生。我已将我的公钥和私钥从我的 mac os x 机器 ~/.ssh 目录复制到 pc ~/.ssh 目录中，并尝试以与在 mac 上相同的方式克隆远程存储库，但使用 git bash。它在不应该的时候要求输入密码.....我什至从我的电脑上删除了可能需要密码的其他密钥，只留下了为这个项目创建的那些（在我的 mac 上工作而没有密码） ）。我还有 chmod 777 ~/.ssh 目录。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:52:31.000

如果你对你的目录设置了这样的许可限制`~/.ssh`，你的系统将拒绝使用它，因为它不安全。

尝试运行以下命令：

```
chmod 700 ~/.ssh
chmod 600 ~/.ssh/*
chmod 644 ~/.ssh/known_hosts 
```

这会为您提供与我系统上相同的配置，并且运行良好：

```
$ ls -al ~/.ssh
total 39
drwx------+ 1 meand Domain Users     0 Jul  2 15:04 .
drwxr-xr-x+ 1 meand Domain Users     0 Jul  5 10:26 ..
-rw-------  1 meand Domain Users    95 Apr 13 15:25 config
-rw-------  1 meand Domain Users   134 Mar 16 12:10 environment
-rw-------  1 meand Domain Users  1679 Oct 26  2011 id_rsa
-rw-------  1 meand Domain Users   392 Oct 26  2011 id_rsa.pub
-rw-r--r--  1 meand Domain Users 13217 Jul  2 15:19 known_hosts 
```

# debugging - VC2005 调试 无法中断设置断点的位置。总是走错地方

> ID：11339413
> 
> 赞同：1
> 
> 时间：2012-07-05T07:11:44.813
> 
> 标签：debugging, visual-studio-debugging

我正在用 vc2005 调试我的 win32 解决方案。该解决方案包含几个dll和libs lib项目中出现一些问题。我想在源文件中设置一些断点。但是，尽管我确定断点周围的代码已执行，但我无法逐步纠正断点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:16:46.603

断点是红色还是变暗？如果它变暗，您可能需要重新构建并使用调试器再次附加到该进程。

# java - 乌尔都语字体格式问题

> ID：11339419
> 
> 赞同：0
> 
> 时间：2012-07-05T07:12:07.370
> 
> 标签：java, android, arabic

嗨，我在 android ListView 中呈现了一些**阿拉伯语**文本。它没有正确显示语言。它在每个语言字符后插入一个空格。下面是快照我想知道如何解决这个语言问题

帮助表示赞赏。

![在此处输入图像描述](../Images/4019792f65fdf8b4ed229ac85d2bfeae.png)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-06-14T13:19:18.653

This is the Bug of the Android Emulator.But it works perfectly on device.i guess you need to install some widget or any thing else to see the language that you on emulator.as far device concern it work perfectly on my samsung duos!!

# javascript - 开始日期必须早于结束日期

> ID：11339426
> 
> 赞同：-1
> 
> 时间：2012-07-05T07:12:40.417
> 
> 标签：javascript, validation, date

我正在比较一些下拉列表值，基本上开始日期必须早于结束日期

我通过 goggle 和其他人找到了很多示例源代码，但它们只提供 DD/MM/YYYY。
我只需要 MM/YYY，当我尝试删除“DD”时，会出现错误，如果我是对的，那是因为日期关键字/元素。

有什么解决办法吗？任何帮助或参考链接都会很好。谢谢

Ps 以下代码适用于 DD/MM/YYYY

```
function y2k(number) {
    return (number < 1000) ? number + 1900 : number;
}
 function padout(number) {
    return (number < 10) ? '0' + number : number;
}

function validate(what) {
    var startday = what.startday.options[what.startday.selectedIndex].value;
    var startmonth = what.startmonth.options[what.startmonth.selectedIndex].value;
    var startyear = what.startyear.options[what.startyear.selectedIndex].text;
    var endday = what.endday.options[what.endday.selectedIndex].value;
    var endmonth = what.endmonth.options[what.endmonth.selectedIndex].value;

    unvalidstartdate = startday + '/' + startmonth + '/' + startyear;
    unvalidenddate = endday + '/' + endmonth;

    var startdate = new Date(startyear - 0, startmonth - 1, startday - 0);
    var enddate = new Date(endmonth - 1, endday - 0);

    var validstartdate = padout(startdate.getDate()) + '/'
            + padout(startdate.getMonth() + 1) + '/'
            + y2k(startdate.getYear())
    var validenddate = padout(enddate.getDate()) + '/'
            + padout(enddate.getMonth() + 1) + '/' + y2k(enddate.getYear());

    if (unvalidstartdate != validstartdate) {
        alert('Start Date: '
                + what.startday.options[what.startday.selectedIndex].text
                + ' '
                + what.startmonth.options[what.startmonth.selectedIndex].text
                + ' '
                + what.startyear.options[what.startyear.selectedIndex].text
                + ' is invalid');
        return false;
    }

    if (unvalidenddate != validenddate) {
        alert('End Date: '
                + what.endday.options[what.endday.selectedIndex].text + ' '
                + what.endmonth.options[what.endmonth.selectedIndex].text
                + ' '

                + ' is invalid');
        return false;
    }

    starttime = Date.UTC(y2k(startdate.getYear()), startdate.getMonth(),
            startdate.getDate(), 0, 0, 0);
    endtime = Date.UTC(y2k(enddate.getYear()), enddate.getMonth(), enddate
            .getDate(), 0, 0, 0);

    if (starttime < endtime) {
    alert('VALID');         
            // valid
        } else {
            alert('NOT VALID');
            return false;
    }

    currentdate = new Date();
    currenttime = Date.UTC(y2k(currentdate.getYear()), currentdate
            .getMonth(), currentdate.getDate(), 0, 0, 0);

    if (endtime < currenttime) {
        // valid
    } else {
        alert('End Date is not less than todays date');
        return false;
    }

    what.startdate.value = validstartdate;
    what.enddate.value = validenddate;
    return true;
}
 //-->
  </script>

 <form>
Start Date: <select name="startday">
    <option value="01">1st
    <option value="02">2nd
    <option value="03">3rd

</select> <select name="startmonth">
    <option value="01">january
    <option value="02">february
    <option value="03">march

</select> <select name="startyear">
    <option>1990
    <option>1991
    <option>1992
</select>

<p>

    End Date: <select name="endday">
        <option value="01">1st
        <option value="02">2nd
        <option value="03">3rd

    </select> <select name="endmonth">
        <option value="01">january
        <option value="02">february
        <option value="03">march

    </select>  <input type="hidden" name="startdate"> <input type="hidden"
        name="enddate">
   <p>

    <input type="button" onClick="validate(this.form)" value="Validate">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:21:36.220

下面的代码将为您提供两个日期字段，开始日期字段将小于结束日期字段。[代码运行良好，您将在http://jquery.com/](http://jquery.com/)和[http://jquery.com/](http://jquery.com/)站点上获得 jquery、jqueryui/calendar 。

在 HEAD 部分包含以下代码包括 jquery-1.5.1.min.js、jquery-ui-1.8.13.custom.min.js、jquery-ui-1.8.11.custom.css" ,calendar.css" 文件

```
$(function() {
    var dates = $( "#txt_startdate, #txt_enddate" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        changeYear: true,
        numberOfMonths: 2,
        dateFormat: 'yy-mm-dd',
        onSelect: function( selectedDate ) {
            var option = this.id == "txt_startdate" ? "minDate" : "maxDate",
                instance = $( this ).data( "datepicker" ),
                date = $.datepicker.parseDate(
                    instance.settings.dateFormat ||
                    $.datepicker._defaults.dateFormat,
                    selectedDate, instance.settings );
            dates.not( this ).datepicker( "option", option, date );
        }
    });

}); 
```

* * *

在 html 的正文部分输入以下代码

```
<input name="txt_startdate" id="txt_startdate"  type="text" />
<input name="txt_enddate"  id="txt_enddate" type="text" /> 
```

* * *

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:51:36.810

```
var invalid=false;
var startDate="03/2011";//start date in mm/yyyy format
var endDate="04/2012";//end date in mm/yyyy format
var startMonth=startDate.substring(0,2);
var endMonth=endDate.substring(0,2);
var startYear=startDate.substring(3);
var endYear=endDate.substring(3);
if(startYear>endYear)
{
invalid=true;
}
else if(startYear<endYear && startMonth>endMonth)
invalid=true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:00:05.640

尝试这个

```
function test()
{
var date1,date;
date1 = new Date(2011,11,1); 
// startdate drop down values   
//2011-->year   11--> startmonth  1-->startdate(this you keep always as 1 for startdate and end date) since you only wants to compare mm/yyyy
date2 = new Date(2002,11,1); 
// enddate drop down values   
//2011-->year   11--> endmonth  1-->enddate(this you keep always as 1 for startdate and end date) since you only wants to compare mm/yyyy

if(date1>date2)
    alert("date1 is > date2")
else
    alert("date2 is > date1")
} 
```

[检查这个日期](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:44:38.173

[Date 构造函数](http://es5.github.com/#x15.9.3)只需要年和月，您可以使用字符串，因此您可以直接使用表单控件中的值，例如：

```
var start = new Date(startyear, --startmonth);
var end = new Date(endyear, --endmonth);

if (start < end) {
  // start is before end
} 
```

哦，你应该用它`getFullYear`来获得全年的数字。为了与 Java 兼容，原始`getYear`方法仅返回两位数的年份。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T07:19:51.807

```
var startDateFinal = "your startdate element value";
var endDateFinal = "your enddate element value";
var startDate = new Date (startDateFinal);
var endDate = new Date(endDateFinal);
    if(endDate.getTime() > startDate.getTime()){
            // some logic
     }
     else{
           // some logic
     } 
```

# jsf - 整个应用程序JSF的语言自动更改

> ID：11339428
> 
> 赞同：0
> 
> 时间：2012-07-05T07:12:43.653
> 
> 标签：jsf, localization

我需要更改整个项目的语言。我正在使用jsf。默认情况下，我使用英语。现在我需要将它转换成意大利语和西班牙语。

我通过手动写入属性类来做到这一点。就像： ![在此处输入图像描述](../Images/909575ef3999c0cdc23be8aa09f43af1.png)

在 xhtml 中我需要手动放置属性。

我的问题是，有没有办法自动转换它？我的意思是我只需单击意大利语，它就会以意大利语显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:57:27.487

您需要按语言创建一个文件（使用正确的名称）

并手动填写每个 - 键...

Netbeans 帮助您在同一个表中显示所有语言。

自动选项是 Google trad .. 这不是一个好的解决方案。

# java - 如何在 Java 中读取多种语言的文件？

> ID：11339429
> 
> 赞同：0
> 
> 时间：2012-07-05T07:12:46.343
> 
> 标签：java, localization

我正在尝试用 Java 阅读和处理几种语言的字典。那么我该如何安排我的代码呢？谢谢。

为了把它们变成大写，我用了这个：

```
 String str_uc=str.toUpperCase(Locale.ENGLISH); 
```

但它不支持其他语言，我正在尝试阅读。

但是，主要问题是在将它们转换为大写之前，我无法正确读取其他语言的文件。

这是我到目前为止所做的。非常适合英语词典。

```
 import java.util.ArrayList;
  import java.util.Locale;
  import java.io.*;
  public class XmlCreating {

static ArrayList<Character> keywordletters = new ArrayList<Character>();
static ArrayList<Character> wordletters = new ArrayList<Character>();
static ArrayList<String> threeletter = new ArrayList<String>();
static ArrayList<String> fourletter = new ArrayList<String>();
static ArrayList<String> fiveletter = new ArrayList<String>();
static ArrayList<String> sixletter = new ArrayList<String>();
static ArrayList<String> sevenletter = new ArrayList<String>();
static ArrayList<String> words = new ArrayList<String>();
static ArrayList<String> allletters = new ArrayList<String>();

public static boolean hasApostrophe(String line){
    for(int i=0; i<line.length();i++) {
        if(line.charAt(i)=='\'' || line.charAt(i)=='-' )
          return false;         
    }
    return true;        
}

public static void findLetters(String word, ArrayList<Character> ary) {
    for(int i=0; i<word.length(); i++) {
        ary.add(word.charAt(i));    
    }
}

public static boolean consistLetters(String keyword,String word) {

    keywordletters.clear();
    wordletters.clear();
    findLetters(keyword,keywordletters);
    findLetters(word,wordletters);

    boolean found = false;
    for(int i=0; i<wordletters.size(); i++) {
        found=false;
        for(int j=0; j<keywordletters.size(); j++) {

            if(keywordletters.get(j)!='\''){
                if(wordletters.get(i)==keywordletters.get(j)) {
                    keywordletters.set(j,'\'');
                    found=true;
                    break;
                }           
            }
        }

        if(found!=true)
            return false;
    }

    return found;
}

public static void findWords(String keyword){

          words.clear();

          for(int i=0; i<threeletter.size(); i++)
          {
            if(consistLetters(keyword,threeletter.get(i))==true) 
              words.add(threeletter.get(i));

          }
          for(int i=0; i<fourletter.size(); i++){
              if(consistLetters(keyword,fourletter.get(i))==true) 
                  words.add(fourletter.get(i));
          }

          for(int i=0; i<fiveletter.size(); i++){
              if(consistLetters(keyword,fiveletter.get(i))==true) 
                  words.add(fiveletter.get(i)); 
          }

          for(int i=0; i<sixletter.size(); i++){
              if(consistLetters(keyword,sixletter.get(i))==true) 
                  words.add(sixletter.get(i));
          }

          for(int i=0; i<sevenletter.size(); i++){
              if(consistLetters(keyword,sevenletter.get(i))==true) 
                  words.add(sevenletter.get(i));
          }   

    }

public static void main(String args[]) { 

    //Locale.setDefault(new Locale("tr","TR"));
    try {
      FileInputStream fstream1 = new FileInputStream("en-GB.dic");
      DataInputStream in = new DataInputStream(fstream1);
      BufferedReader br = new BufferedReader(new InputStreamReader(in));
      String str;
      while ((str = br.readLine()) != null) {
         String str_uc=str.toUpperCase(Locale.ENGLISH);

          if(hasApostrophe(str_uc)){
              allletters.add(str_uc);
          if(str.length()==3)
              threeletter.add(str_uc);
          else if(str.length()==4)
              fourletter.add(str_uc);
          else if(str.length()==5)
              fiveletter.add(str_uc);
          else if(str.length()==6)
              sixletter.add(str_uc);
          else if(str.length()==7)
              sevenletter.add(str_uc);
       }
      }
      in.close();

    }
    catch (Exception e) {
      System.err.println(e);
    }

    System.out.println(sevenletter.size());
    System.out.println(sixletter.size());
    System.out.println(fiveletter.size());
    System.out.println(allletters.size());

    int noOfXml=(int)(sevenletter.size()/10);
    int lastXml=(int)(sevenletter.size()%10);

    try{

        int a=0;
        int b=10;  
        for(int x=1;x<noOfXml+1;x++) {
        FileWriter fstream2 = new FileWriter(x+".xml");
        BufferedWriter out = new BufferedWriter(fstream2);

        out.write("<?xml version='1.0' encoding='utf-8' ?><dictionary>");

        for(int i=a;i<b;i++) {
              findWords(sevenletter.get(i));

              out.write("<ltr s='"+sevenletter.get(i)+"' w=");

              for(int j=0; j<words.size();j++) {

                  out.write("'"+words.get(j)+"'");
                  if(j<words.size()-1)
                      out.write(";");
                }
              out.write("/>");
        }
        a=b;
        b=b+10;

        out.write("</dictionary>");
        //Close the output stream
        out.close();

        }}catch (Exception e){
        System.err.println("Error: " + e.getMessage());
        }

    //for last five keywords
    if(lastXml!=0) {
        try{
                FileWriter fstream3 = new FileWriter((noOfXml+1)+".xml");
                BufferedWriter out1 = new BufferedWriter(fstream3);

                out1.write("<?xml version='1.0' encoding='utf-8' ?><dictionary>");

                for(int i=sevenletter.size()-lastXml;i<sevenletter.size();i++) {
                    findWords(sevenletter.get(i));

                    out1.write("<ltr s='"+sevenletter.get(i)+"' w=");

                    for(int j=0; j<words.size();j++) {

                        out1.write("'"+words.get(j)+"'");
                        if(j<words.size()-1)
                            out1.write(";");
                    }
                    out1.write("/>");
                }
                out1.write("</dictionary>");
                //Close the output stream
                out1.close(); 
        }
        catch (Exception e){
        System.err.println("Error: " + e.getMessage());
            }

      }

   }//main
   }//class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:16:22.147

我将每个文件编码为 UTF-8

我会将每个字典读入每个语言的`Set<String>`可能`NavigableSet<String>`，我会将它们放置为由该语言键入的 Map。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:38:10.197

另一种方法是在 Map 中使用单词作为键：

`HashMap<(String) word ,Set<(String) codeLanguage>>`

并且，正如 Peter Lawrey sed，在同一张地图中

```
 <(String) codeLanguage, Set(String) allLanguageWorld>> 
```

如果您使用东方语言，则必须使用 Unicode。

# javascript - JavaScript 浮点好奇心

> ID：11339431
> 
> 赞同：3
> 
> 时间：2012-07-05T07:12:50.283
> 
> 标签：javascript, floating-point, comparison

我尝试进行一些浮点比较，这是我发现的：

```
130 === 130.000000000000014210854715 // true
130 === 130.000000000000014210854716 // false
9 === 9.0000000000000008881784197001 // true
9 === 9.0000000000000008881784197002 // false
0.1 === 0.100000000000000012490009027033 // true
0.1 === 0.100000000000000012490009027034 // false 
```

我尝试在 Firefox 和 Chrome 上运行它们，结果相同。好的，我知道浮点比较是一种不好的做法，并且会出现意外行为。但我只是对这些数字感到好奇，为什么或如何计算这些小数位序列？

如果您希望甚至可以进一步扩展这些序列（下一个序列的二进制搜索）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:17:38.740

小数部分超出了 JavaScript`Number`类型的精度。

JavaScript 只能处理`130.0000000000000`你的数字的一部分，所以它变成了`130`（那些`0`s 没有意义）。

JavaScript 中的every`Number`实际上是一个 64 位[IEEE-754](http://en.wikipedia.org/wiki/IEEE_754)浮点数，所以这个数字`130.000000000000014210854715`看起来像二进制......

```
0,10000000110,10000010000000000000000000000000000000000000000000000 
```

其中组是符号（`+`或`-`）、指数和有效数/尾数。

你可以看到数字`130`是一样的......

```
0,10000000110,10000010000000000000000000000000000000000000000000000 
```

JavaScript需要 128 位`Number`才能区分这两个数字，而不是使用JavaScript 或[*bignum的*](https://github.com/munrocket/double.js)[*float128*实现](https://github.com/munrocket/double.js)。[](https://github.com/munrocket/double.js)

# c# - 如何在 c#.net 的组合框中检索 value-tem 对的值？

> ID：11339433
> 
> 赞同：0
> 
> 时间：2012-07-05T07:13:10.840
> 
> 标签：c#, combobox

我有这种形式，我需要在其中使用数据库中的文本值对填充组合框，以便我可以在对数据库的更新查询中使用该值

我发现了一些方法，它使用一个类来制作同时具有文本和值的对象：

```
class RequestType
    {
        public string Text { get; set; }
        public string Value { get; set; }

        public RequestType(string text, string val)
        {
            Text = text;
            Value = val;
        }

        public override string ToString()
        {
            return Text;
        } 
```

我像这样将它们添加到组合框中

```
RequestType type1 = new RequestType("Label 1", "Value 1");
            RequestType type2 = new RequestType("Label 2", "Value 2");

            comboBox1.Items.Add(type1);
            comboBox1.Items.Add(type2);

            comboBox1.SelectedItem = type2; 
```

现在我不知道如何检索所选项目的值，即选择了 id 标签 1，它必须返回 value1，如果选择了标签 2，它返回 value2，

有什么帮助吗？？？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:15:48.800

我想你可以使用：

```
if (combobox1.SelectedItem != null)
    val2 = (comboBox1.SelectedItem as RequestType).Value; 
```

或者

```
string val2 = combobox1.SelectedItem != null ?
                  (comboBox1.SelectedItem as RequestType).Value :
                  null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:20:13.267

```
RequestType type = (RequestType)comboBox1.SelectedItem; 
```

现在，所选项目的价值 =`type.Value`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:20:23.643

组合框的 Items 集合属于[ObjectCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.objectcollection.aspx)类型，因此当您使用

```
comboBox1.Items.Add(type1); 
```

您正在向集合中添加一个 RequestType 对象。
现在，当您想从该集合中检索单个选定项目时，您可以使用这样的语法

```
RequestType t = comboBox1.SelectedItem as RequestType; 
```

从理论上讲，（当您完全控制组合框项的添加时）您可以避免检查使用`as`关键字应用的转换是否成功，但事实并非如此，因为 SelectedItem 可能为空，因此它总是一个好的练习测试

```
 if(t != null)
   {
       Console.WriteLine(t.Value + " " + t.Text);
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:20:50.237

您可以将 comboBox1.SelectedItem 转换为您的类型 RequestType，然后您可以读取其属性。

# joomla - 根据自定义 URL 参数检索文章

> ID：11339437
> 
> 赞同：0
> 
> 时间：2012-07-05T07:13:22.673
> 
> 标签：joomla

我是使用 Joomla 1.5 的初学者。我有一个以博客格式显示文章的页面。我的目标是根据用户输入显示/过滤每年的文章（不是那么多）。我打算在右侧创建一个模块，显示年份的下拉框，并通过将年份参数作为 URL 的一部分传递来检索结果

前任。

[http://sample.com/index.php?option=com_content&view=category&layout=blog&id=39&Itemid=24&year=2011](http://sample.com/index.php?option=com_content&view=category&layout=blog&id=39&Itemid=24&year=2011)

通过 URL 向 com_content 传递和处理附加参数的最佳、最简单的方法是什么？我可以使用 K2 和 flexicontent 等扩展来做到这一点吗？如果没有，有人可以建议我在 com_content 中添加什么代码以及在哪里添加？如果我必须扩展 com_content 本身，有人可以指导我如何或指出一些有用的文章吗？

感谢帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:21:11.783

我不知道 K2 或 flexicontent 是否提供此选项，但 com_content 似乎没有此功能。

我只是构建一个模块，创建一个查询并使用表**jos_content**，只选择您需要的字段（如标题）并检查*创建*的字段是否在您需要的年份。

# java - 有没有办法下载所有 Java EE 接口？

> ID：11339438
> 
> 赞同：0
> 
> 时间：2012-07-05T07:13:23.813
> 
> 标签：java, jakarta-ee

如果我想开发自己的 Java EE 平台实现。我必须实现提供平台的所有接口。我在哪里可以下载所有接口的源代码？（我知道我可以为 Java EE api 自己恢复它们，或者我可以下载 tomcat 的源代码）。

这应该如何正确完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:13:24.607

如果您想构建自己的 Java EE 实现，您不会只阅读接口，因为它们只传达了一点点信息。首先是阅读[http://jcp.org/en/jsr/detail?id=316上的规范](http://jcp.org/en/jsr/detail?id=316)

请注意，这是一个涵盖十几个其他规范的综合规范，例如[http://jcp.org/en/jsr/detail?id=314上的 JSF 规范，](http://jcp.org/en/jsr/detail?id=314) [http :](http://jcp.org/en/jsr/detail?id=315) *//jcp.org*上的 Servlet [/en/jsr/detail?id=315 ，http:](http://jcp.org/en/jsr/detail?id=315) [//jcp.org/en/jsr/detail](http://jcp.org/en/jsr/detail?id=317) ?id=317等的 JPA

Java EE 6（当前版本）的参考实现，列出了官方 API jar 的 Maven 坐标。这些是带有剥离主体的接口（意味着您可以针对它们进行编译并阅读它们，但不能部署它们）：参见[http://glassfish.java.net/downloads/3.1.2-final.html](http://glassfish.java.net/downloads/3.1.2-final.html)

Java EE 规范负责人之一发布了一个表格，其中包含一些指向 Java EE 各个部分的 Maven 坐标的指针，请参阅：[http ://weblogs.java.net/blog/edburns/archive/2011/09/02/jcpjavaee- artifacts-maven-central?force=441](http://weblogs.java.net/blog/edburns/archive/2011/09/02/jcpjavaee-artifacts-maven-central?force=441)（这也可能让您更好地了解需要实现的广度）。

最后，请注意 Tomcat 只实现了 Java EE 的一个非常小的子集，即 Servlet、JSP 和 JNDI。肯定会开始查看 Tomcat 的源代码，但您必须意识到它甚至还没有接近完整的 Java EE 6 实现。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T07:36:12.777

我有一个问题，这就是你为什么要这样做？Java EE 有很多模块和框架，但是您可以制作一个 maven 项目并在您的 pom xml 文件中添加 Java EE 模块依赖项，

例如你的 pom 可能是这样的：

```
......
......
<dependencies>
    ......
    ......
    <dependency>
        <groupId>geronimo</groupId>
        <artifactId>geronimo-j2ee</artifactId>
        <version>1.1.1</version>
     </dependency>
     ......
     ......
</dependencies> 
```

[并使用 maven 在此站点](http://mvnrepository.com/)中搜索您的模块并下载它的文档和源代码并将它们添加到您的 pom 的依赖标记中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:41:00.167

[您可以从这里](http://java.sun.com/j2se/jrl_download.html)下载所有 JDK 源代码。

# spring - 重定向时浏览器 URL 中显示成功标头消息

> ID：11339443
> 
> 赞同：1
> 
> 时间：2012-07-05T07:13:53.933
> 
> 标签：spring, spring-mvc, spring-security

我在我的应用程序中使用spring mvc，当我创建用户时，我必须在标题中显示成功消息，所以我使用了这段代码

```
modelAndView.setViewName("redirect:/mainPage");
        modelAndView.addObject("successMessage", "user created successfully");

        return modelAndView; 
```

但我的问题是我在浏览器 url 中收到此消息。假设如果我像下面这样使用，成功消息显示在主页的标题中，但主页中的记录消失了。

```
modelAndView.setViewName("mainPage");
            modelAndView.addObject("successMessage", "user created successfully");

            return modelAndView; 
```

这是我的 mainpage.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<jsp:include page="../templates/header.jsp"></jsp:include>

<script type="text/javascript" src="js/bootstrap-dropdown.js"></script>
<script type="text/javascript">
// Implement checkbox-like buttons
$(".toggle-buttons > .g-button").click(function() {
    $(this).siblings(".g-button").removeClass("checked");
    $(this).addClass("checked");
});
</script>

<style>
.errorblock {
    color: #060505;
    background-color: #ffEEEE;
    border: 3px solid #ff0000;
    padding: 8px;
    margin: 16px;
}
.successblock {
    color: #060505;
    background-color: #9EF2DF;
    border: 3px solid #06B98F;
    padding: 8px;
    margin: 16px;
}
</style>
<c:if test="${not empty errorMessage}">
    <div class="errorblock">${errorMessage}</div>
</c:if>

<c:if test="${not empty successMessage}">
    <div class="successblock" >${successMessage}</div>
</c:if>

<!-- full width -->
<div class="widget" >
    <div class="header"><span><img src="images/icon/color_18/audio_knob.png"  alt="dashboard"/>Mobee Robot</span>
    </div>
    <div class="content" >

        <div id="UITab">
            <ul class="tabs" >

                <li><a href="#tab1">Mobee User(s)</a></li>

            </ul>
            <div class="tab_container" >

                <sec:authorize access="hasRole('ROLE_USER')">
                <div id="tab1" class="tab_content">
                    <div class="load_page">
                        <form>
                            <div class="tableName inTab">
                                <h3><img src="images/icon/color_18/user.png"  alt="users"/>Mobee Users</h3>
                                <table id="userData" class="display data_table2">
                                    <thead>
                                        <tr>
                                           <th><div class="th_wrapp">Id</div></th>
                                            <th><div class="th_wrapp">User Name</div></th>
                                            <th><div class="th_wrapp">Email Id</div></th>
                                            <th><div class="th_wrapp">Created By</div></th>
                                            <th><div class="th_wrapp">Created On</div></th>
                                            <th><div class="th_wrapp">Status</div></th>
                                            <th><div class="th_wrapp">Manage</div></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <c:forEach items="${mobeeUsers}" var="mobeeRobotUser">
                                            <tr class="odd gradeX">
                                                <td>${mobeeRobotUser.id}</td>
                                                <td><a href="<%=request.getContextPath() %>/useredit?id=${mobeeRobotUser.id}">${mobeeRobotUser.userName}</a> </td>
                                                <td>${mobeeRobotUser.emailId}</td>
                                                <td>${mobeeRobotUser.createdBy}</td>
                                                <td><fmt:formatDate value="${mobeeRobotUser.createdOn}" pattern="dd-MMM-yyyy"/></td>
                                                <td>${mobeeRobotUser.status}</td>

                                                <td>
                                                    <span class="tip">
                                                        <a id="1" href="<%=request.getContextPath() %>/userdelete?id=${mobeeRobotUser.id}" class="Delete" name="${mobeeRobotUser.userName}" title="Delete">
                                                            <img src="images/icon/color_18/close.png"/>
                                                        </a>

                                                    </span>
                                                </td>
                                            </tr>
                                        </c:forEach>
                                    </tbody>
                                </table>
                            </div>
                        </form>
                    </div>
                </div><!-- End tab1 -->
                </sec:authorize>
</div><!-- End tab Container -->
        </div><!-- End UITab -->
        <!-- clear fix -->
        <div class="clear"></div>
    </div><!-- End Content -->
</div><!-- End full width -->

<jsp:include page="../templates/footer.jsp"></jsp:include> 
```

请帮我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:35:59.953

一旦您进行重定向，则不会保留该值。所以你没有在 mainPage 控制器中获得 successMessage 。

[在这里看到](http://forum.springsource.org/showthread.php?31999-Spring-MVC-redirect-after-form-submit)一个类似的问题。

您可以按照建议将值放入会话中。或者在下一个控制器中从请求中获取它，然后将其设置为模型和视图。

祝你好运。

# android - com.google.android.gsf 包找不到

> ID：11339445
> 
> 赞同：72
> 
> 时间：2012-07-05T07:14:06.247
> 
> 标签：android, google-cloud-messaging

我正在尝试使用新的 Google Cloud Messaging 系统，但我遇到了一些问题。

我阅读了入门文档并查看了演示应用程序；之后，我将要求应用于我的应用程序，然后我使用 API 16 创建了一个新的虚拟设备。

但是当我尝试将我的设备注册到 GCM 时，它会因为这条线而失败：

```
GCMRegistrar.checkDevice(getApplicationContext()); 
```

在 logcat 我看到这些错误：

```
07-05 07:06:31.925: E/AndroidRuntime(691): FATAL EXCEPTION: main
07-05 07:06:31.925: E/AndroidRuntime(691): java.lang.UnsupportedOperationException: Device does not have package com.google.android.gsf
07-05 07:06:31.925: E/AndroidRuntime(691):  at com.google.android.gcm.GCMRegistrar.checkDevice(GCMRegistrar.java:83)
07-05 07:06:31.925: E/AndroidRuntime(691):  at aero.tav.mobile.genel$4.onClick(genel.java:201)
07-05 07:06:31.925: E/AndroidRuntime(691):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
07-05 07:06:31.925: E/AndroidRuntime(691):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 07:06:31.925: E/AndroidRuntime(691):  at android.os.Looper.loop(Looper.java:137)
07-05 07:06:31.925: E/AndroidRuntime(691):  at android.app.ActivityThread.main(ActivityThread.java:4745)
07-05 07:06:31.925: E/AndroidRuntime(691):  at java.lang.reflect.Method.invokeNative(Native Method)
07-05 07:06:31.925: E/AndroidRuntime(691):  at java.lang.reflect.Method.invoke(Method.java:511)
07-05 07:06:31.925: E/AndroidRuntime(691):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-05 07:06:31.925: E/AndroidRuntime(691):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-05 07:06:31.925: E/AndroidRuntime(691):  at dalvik.system.NativeStart.main(Native Method) 
```

我已将 gcm.jar 添加到我的课程路径中；我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-07-05T07:35:22.273

在我看来，您使用的是错误的模拟器。

默认模拟器使用没有任何 Google 软件包的常规 Android 模拟器，并且无法运行各种东西，如地图、c2dm 和各种类似的东西。

您要做的是创建一个可以支持 Google API 的新模拟器。

然后，当您运行项目时，选择运行目标名称的模拟器`Google APIs (Google Inc).`

祝你好运。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-18T06:41:26.557

它可能在不支持 GCM 的设备上运行，因此您调用 GCMRegistrar.checkDevice(this); 正在引发异常。检查你的 logcat 以确保。

如果您在模拟器上对其进行测试，请确保您已将模拟器设置为使用 Google API。创建模拟器时，创建新的 AVD 窗口有一个“目标”框。在该框中选择“Google API”。

![在此处输入图像描述](../Images/10574bd458d6fc03040d2fb43f608095.png)

# javascript - 如何在更改事件中获取剑道组合框的值

> ID：11339447
> 
> 赞同：7
> 
> 时间：2012-07-05T07:14:09.713
> 
> 标签：javascript, jquery, events, kendo-ui

我对剑道组合框更改事件有 2 个问题。

1.  在更改事件中，我想获取该组合框的选定值。

2.  我想获取对父元素或元素本身的引用。

怎么做？小提琴在[这里](http://jsfiddle.net/ashwyn/fYXyp/1/)

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-05T07:21:30.490

只需使用`this.value();`

```
alert("value: " + this.value()); 
```

[http://demos.kendoui.c​​om/web/combobox/events.html](http://demos.kendoui.com/web/combobox/events.html)

**编辑：**

对于问题 #2 - 用于`this.element`获取元素本身，并`this.element.parent()`获取元素的父级。

# iphone - 设置另一个类的标签文本

> ID：11339450
> 
> 赞同：0
> 
> 时间：2012-07-05T07:14:27.337
> 
> 标签：iphone, ios

我的 Firstviewcontroller 类中有一个`UILabel *employeeNumLabel`。现在我想从我的 secondviewcontroller 类的方法中更改该标签的文本。我已将以下代码放入 Secondviewcontroller 类中：

```
-(IBAction)save:(id)sender{
 number ++;

 NSString * numberString = [NSString stringWithFormat:@"%d",number];

 [employeeNumLabel setText:numberString]; 
} 
```

但是显示错误：`use of undeclared identifier employeeNumLabel`。虽然我已经在我的 Secondviewcontroller.m 类中导入了 Firstviewcontroller.h。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:21:55.353

在 Firstviewcontroller 的 @implementaion 下方声明 UILabel *employeeNumLabel。

```
@implementation Firstviewcontroller
 UILabel *employeeNumLabel; 
```

然后在 secondviewcontroller 中将其外部化

```
 @implementation secondviewcontroller
 extern UILabel *employeeNumLabel; 
```

之后使用您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:22:14.137

在您的标题中定义标签

```
@property (nonatomic, retain) UILable * employeeNumLabel; 
```

在 .m 文件中合成它

```
@synthesize employeeNumLabel 
```

在您的 init 函数中为标签分配内存并将其添加到您的视图中。或者，您可以创建一个 IBOutlet 并将其链接到此标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:26:44.123

要更改标签文本，您需要执行以下操作..

1）您必须在第一个视图控制器中创建标签的属性...

2）您需要在第二个视图控制器中共享第一个视图控制器的引用，就像您可以访问标签并为同一对象设置文本一样。

或..再做一件事..

1) 取一个 NSString *lblString ；在您的 appdelegate 类中并使其属性..

2）您知道您可以使用以下代码在整个应用程序中获取 appdelegate 的共享引用

```
[[UIApplication sharedApplication] delegate]; //this will give your appdelegate Object.. 
```

3）然后在你的 secondViewController 类方法中......

```
Your_Appdelegate *appdelegate = (Appdelegate *)[[UIApplication sharedApplication] delegate];
appdelgate.lblString = @"YOUR_LABEL_TEXT"; 
```

4）然后在你的FirstViewController中..以同样的方式设置lableText......

```
 Your_Appdelegate *appdelegate = (Appdelegate *)[[UIApplication sharedApplication] delegate];
yourLabel.text = appdelgate.lblString; 
```

最初你想要在你的标签上设置什么文本在你的 appdelegate..

愿这能帮助你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:39:09.610

在 Firstviewcontroller.h 中将 employeeNumLabel 声明为 extern，

```
 @interface Firstviewcontroller : UIViewController{}
      extern  UILabel *employeeNumLabel; 
```

然后在 Firstviewcontroller.m （声明全局变量的@place）中添加以下内容，

```
UILabel *employeeNumLabel; 
```

然后使用您的代码在 secondviewcontroller.h 中导入 Firstviewcontroller.h。

# apache-flex - 如何在 adobe air flex 中将字符串从 .mxml 传递到 .as 类？

> ID：11339455
> 
> 赞同：0
> 
> 时间：2012-07-05T07:14:41.530
> 
> 标签：apache-flex, air, adobe

我想将一个字符串从 .mxml 传递给一个 .as 类..为此我尝试使用 [Bindable]..但我

只获取空值。如何从 mxml 获取字符串？

```
I have given the link to show u what i have tried:

 http://192.150.16.67/devnet/flex/articles/databinding_pitfalls.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:55:59.560

请在下面找到代码，这可能会对您的问题有所帮助。

**主.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[

            private var stringReaderObject:StringReader;
            private function clickHandler():void
            {
                if(!stringReaderObject)
                {
                    stringReaderObject = new StringReader();
                }
                stringReaderObject.readString = inputTextID.text;
            }

        ]]>
    </fx:Script>
    <s:Group x="50" y="50">
        <s:layout>
            <s:VerticalLayout/>
        </s:layout>
        <s:TextInput id="inputTextID"/>
        <s:Button label="Click" click="clickHandler()"/>
    </s:Group>
</s:Application> 
```

*类名：* - **StringReader.as**

```
package
{
    public class StringReader
    {
        private var _readString:String;
        public function StringReader()
        {
        }

        public function set readString(value:String):void
        {
            _readString = value;
            trace(_readString);
        }

        public function get readString():String
        {
            return _readString;
        }
    }
} 
```

trace 将确定如何将值从 MXML 传递到 .as 类。

它可以通过另外两种方式来实现，如下所示：-

1）通过在你的类中创建公共变量。2）通过在您的应用程序中创建全局并在您的类中访问它。

希望这可以帮助你。

# actionscript-3 - Flex spark list 视觉布局控制绑定多少项

> ID：11339460
> 
> 赞同：0
> 
> 时间：2012-07-05T07:15:07.000
> 
> 标签：actionscript-3, apache-flex, flex-spark

我有一个带有自定义 Itemrenderer 的火花列表。我使用 virtuallayout ，因为我将它与大约 500 个元素绑定。

我跟踪了项目渲染器的 datachange 事件，我发现在第一次加载时大约有 120 个项目绑定到列表。我只需要在舞台上显示 10 个项目，所以我想减少在列表中获取的项目数量，是否有一个属性或函数可以覆盖以获得这种行为？

代码如此简单

```
<s:List  id="thumbnailList" verticalScrollPolicy="off" 

 useVirtualLayout="true" itemRenderer="ThumbnailItemRenderer" >
        <s:layout>
            <s:HorizontalLayout gap="10"  requestedColumnCount="10"  />
        </s:layout>
    </s:List> 
```

项目渲染器

```
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark"
                    autoDrawBackground="false"  >
    <fx:Script>

            override public function set data(value:Object):void{
                super.data=value;
                if(data !=null){
                    LoadImg();

                }
            }

            protected function LoadImg():void{
                trace(data.pagnum.toString());
                var cacheDir:File=null;
                cacheDir= Config.DirCache();
                var folder:File = new File(cacheDir.nativePath + Config.CATALOG_FOLDER_NAME + Config.selected_catalog_id + "/");                    
                var file:File = new File(folder.nativePath + "/" + data.pagnum.toString() + "_th.jpg"); 
                trace(file.url);
                thumbnail.source = file.url;

                cacheDir=null;
                folder=null;
                file=null;

            }

    </fx:Script>

    <s:Image id="thumbnail" top="0" left="0" right="0" bottom="0" scaleMode="letterbox" cacheAsBitmap="true"  />
</s:ItemRenderer> 
```

和列表的绑定

```
thumbnailList.dataProvider= {ArrayCollection with about 480 items} 
```

# java - 我们可以将字符串格式的日期 dd/mm/yyyyy 转换为相同格式的日期类型吗？

> ID：11339461
> 
> 赞同：0
> 
> 时间：2012-07-05T07:15:08.237
> 
> 标签：java, date, simpledateformat

我正在使用带有 jquery 日期选择器的 struts2.x。
我想以 dd/mm/yyyy 格式显示。但是从数据库中获取它时就像yyyy-mm-dd一样。然后我将它转换为所需的格式，但类型是字符串。所以接下来我将其转换为日期类型。但是格式变了。

```
Date getRiskCommDate()
{
String fString = null;
System.out.println("Coming Date from DB"+riskCommDate);
if(riskCommDate!=null)
{
SimpleDateFormat format = new SimpleDateFormat();
format.applyPattern("dd/MM/yyyy");
fString = format.format(riskCommDate);
}
System.out.println("Formated Date in  String Form "+fString);
Date d = new Date(fString);
System.out.println("Formated Date in Date form Date "+d);
return d;  
} 
```

输出 ：

> 来自 DB 的日期 2012-07-04
> 字符串形式的
> 格式化日期 04/07/2012 日期形式的格式化日期 Date Sat Apr 07 00:00:00 IST 2012

任何想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T07:17:13.047

该类[`java.util.Date`](http://docs.oracle.com/javase/8/docs/api/java/util/Date.html)没有任何属性来保存格式。

要以自定义格式显示 的值`Date`，请调用 上的[`format`](http://docs.oracle.com/javase/8/docs/api/java/text/DateFormat.html#format-java.util.Date-)方法[`SimpleDateFormat`](http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html)。

当你这样做时：

```
System.out.println(dateInstance) 
```

…您只是[`toString()`](http://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toString--)在`Date`. `String`该方法在版本中以固定格式返回日期。

**根据评论**

如果您无论如何想要带有日期实例的自定义格式，那么您可以创建一个自定义类包装日期实例

```
class MyDate{
  private Date date;
  //provide appropriate accessor
  //override toString() method to support required output
} 
```

或者`extend` `Date`

```
class MyDate extends Date{
   //override toString() method to support required output
   @Override
   public String toString(){
        //convert `this` to  String with required format with the help of `SimpleDateFormat`
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T07:18:25.717

日期打印基于区域设置的格式。它不会“记住”你给它想要你构建它的格式。只有字符串具有特定格式，因此如果需要，请将其保留为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T19:05:11.817

# jquery - 树视图ajax控件

> ID：11339464
> 
> 赞同：0
> 
> 时间：2012-07-05T07:15:22.210
> 
> 标签：jquery, ajax, treeview

我正在使用`jquery.treeview`jsp 页面中的控件。它的工作方式如下。

从一开始，当页面加载时，服务器端调用将加载一个数据列表——类似于一个巨大数据库下的整个数据。并使用树视图控件，它将在页面上创建树视图。这里的问题是来自服务器端的列表非常大，因此当将其写入页面时，它会卡住，大约 10-12 次我会得到一个对话框，说 jquery.js 文件很忙，所以你想继续还是停止脚本？

所以我需要一个解决方案——第一次我只需要加载最外层的节点——这意味着我的服务器端列表将只包含父元素——暂时说数据库。当点击一个特定的数据库时，一个ajax调用将会消失，它将加载它的子元素——比如表。

我认为如果我们能够以这种方式加载树视图，我可以避免页面被巨大列表卡住的问题。

我搜索了很多更好的 ajax 树视图，例如控件，但找不到适合我的问题的更好的树视图。？

谁能为这个问题提供更好的解决方案..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:57:28.353

您可以在[此处](http://www.dynamicdrive.com/dynamicindex1/treeview/treeview_suppliment.htm)找到使用`jQuery.treeview`. 服务器端是用 php 编写的，但这个想法完全可以转换为任何语言。

# mysql - 24GB 服务器的 MySQL 内存不足

> ID：11339465
> 
> 赞同：2
> 
> 时间：2012-07-05T07:15:31.390
> 
> 标签：mysql, memory, innodb, my.cnf

我遇到了一个烦人的问题。

我已经制作了一个系统，现在用户告诉我它正在向他们传递信息：

内存不足（需要 268435427 字节）

整个数据库大小为 12MB，出现问题的查询已经运行了好几个月，而且并没有那么复杂或很大。

数据库是innodb。我的服务器有 24GB 的内存，所以我严重怀疑它实际上内存不足。

my.cnf 如下：

> key_buffer = 8000M
> 
> max_allowed_pa​​cket = 1M
> 
> table_cache = 2048M
> 
> 排序缓冲区大小 = 1M
> 
> net_buffer_length = 1024M
> 
> 读取缓冲区大小 = 1M
> 
> read_rnd_buffer_size = 24M
> 
> innodb_log_file_size = 5M
> 
> innodb_log_buffer_size = 8M
> 
> innodb_flush_log_at_trx_commit = 1
> 
> innodb_lock_wait_timeout = 50
> 
> innodb_buffer_pool_size = 1024M
> 
> innodb_additional_mem_pool_size = 2M
> 
> 最大连接数 = 100
> 
> query_cache_size = 128M
> 
> query_cache_min_res_unit = 1024
> 
> query_cache_limit = 16MB
> 
> 线程缓存大小 = 100
> 
> max_heap_table_size = 4096MB

在 Windows 任务管理器中查看时，我看到 18.8GB 可用，但只有 100MB 可用。它是Windows 2008 64bit Server，这可能是问题的根源吗？

* * *

这是查询：

```
$currency     = '(SELECT currencies.symbol
                            FROM parts_trading, currencies
                            WHERE parts_trading.enquiryRef = enquiries.id
                            AND parts_trading.sellingCurrency = currencies.id
                            LIMIT 1
                         )' ;

$amountDueSQL = '(
                         (SELECT SUM(quantity*(parts_trading.sellingNet
                                    +
                                    parts_trading.sellingVat))
                            FROM parts_trading
                            WHERE parts_trading.enquiryRef = enquiries.id
                         )
                         +
                         (SELECT SUM(enquiries_custom_fees.feeAmountNet
                                    +
                                    enquiries_custom_fees.feeAmountVat)
                            FROM enquiries_custom_fees
                            WHERE enquiries_custom_fees.enquiryRef = enquiries.id
                         )
                         )' ;
$amountPaidSQL = 'COALESCE(
                             (SELECT SUM(jobs_payments_advance.amount)
                                FROM jobs_payments_advance
                                WHERE jobs_payments_advance.jobRef = jobs.id
                             ),
                             0
                         )' ;

    $result = $dbh->prepare("SELECT SQL_CALC_FOUND_ROWS jobs.id, jobs_states.state, jobs.creationDate, users.username,
                            entity_details.name, enquiries.id as enquiryId, pendingCancelation,
                            IF(entity_details.paymentTermsRef = 1, # Outer IF condition
                               IF($amountDueSQL-$amountPaidSQL = 0.00, # Inner IF condition
                                  CONCAT('Paid in full (', $currency, $amountDueSQL, ')') # Inner IF TRUE
                               , # End of inner IF TRUE
                                  IF($amountPaidSQL > 0,
                                     CONCAT('Part paid (', $currency, $amountPaidSQL, ')'),
                                     'Unpaid'
                                  )
                               ) # End of inner IF

                            , # End of TRUE for outer IF
                               (SELECT entity_payment_terms.term
                                    FROM entity_details, entity_payment_terms
                                    WHERE entity_details.paymentTermsRef
                                          =
                                          entity_payment_terms.id
                                    AND entity_details.id = enquiries.entityRef
                               ) # End of FALSE for outer IF
                            ) AS payState, enquiries.orderNumber,

                            IF((SELECT COUNT(*)
                                    FROM invoices_out, (SELECT * FROM invoices_out_reference GROUP BY jobRef) AS tb1
                             WHERE invoices_out.id = tb1.invoiceRef
                             AND tb1.jobRef = jobs.id) > 1,
                               'Part-invoiced',
                               (SELECT invoices_out.date
                                    FROM invoices_out, (SELECT * FROM invoices_out_reference GROUP BY jobRef) AS tb1
                             WHERE invoices_out.id = tb1.invoiceRef
                             AND tb1.jobRef = jobs.id)
                             ) AS invoicedDate,

                            enquiries.id AS enquiryId,

                            IF((SELECT COUNT(*)
                                    FROM invoices_out, (SELECT * FROM invoices_out_reference GROUP BY jobRef) AS tb1
                             WHERE invoices_out.id = tb1.invoiceRef
                             AND tb1.jobRef = jobs.id) > 1,
                               'Multiple invoices',
                               (SELECT invoices_out.id
                                    FROM invoices_out, (SELECT * FROM invoices_out_reference GROUP BY jobRef) AS tb1
                             WHERE invoices_out.id = tb1.invoiceRef
                             AND tb1.jobRef = jobs.id)
                             ) AS invoiceNumber,

                            # If the state is 0 (i.e. they have an account, if true find out their payment terms, if false, instead reference the payment state directly.
                            (SELECT MAX(etaDate) FROM parts_trading WHERE parts_trading.enquiryRef = enquiries.id) AS maxEtaDate,
                            (SELECT COUNT(DISTINCT DATE(etaDate)) FROM parts_trading WHERE parts_trading.enquiryRef = enquiries.id) AS etaCounts, entity_credit_limits.creditLimit AS cLimit,
                            COALESCE((SELECT 
                                    SUM(qty*parts_trading_buying.buyingNet
                                    /
                                    (SELECT rateVsPound FROM currencies WHERE currencies.id = parts_trading_buying.buyingCurrency))
                                    FROM parts_trading_buying
                                    WHERE parts_trading_buying.enquiryRef = enquiries.id
                                    ), 0
                                    ) AS nonInvoicedBuyingCosts,
                            COALESCE((SELECT 
                                    SUM(feeAmountNet/(SELECT rateVsPound FROM currencies WHERE currencies.id = parts_trading_buying.buyingCurrency))
                                    FROM parts_trading_buying_charges, parts_trading_buying 
                                    WHERE parts_trading_buying_charges.partRef = parts_trading_buying.id
                                    AND parts_trading_buying.enquiryRef = enquiries.id
                                    ), 0
                                ) AS nonInvoicedBuyingFeeCosts,
                            (SELECT
                                SUM(quantity*parts_trading.sellingNet)
                                    /
                                    COALESCE(
                                        (SELECT invoices_out.rate
                                         FROM invoices_out, invoices_out_reference
                                         WHERE invoices_out.id = invoices_out_reference.invoiceRef
                                         AND invoices_out_reference.jobRef = jobs.id
                                         LIMIT 1),
                                        (SELECT rateVsPound
                                         FROM currencies
                                         WHERE currencies.id = parts_trading.sellingCurrency)
                                    )
                             FROM parts_trading
                             WHERE parts_trading.enquiryRef = enquiries.id
                            ) AS sellingParts,
                            COALESCE((SELECT
                                    SUM(enquiries_custom_fees.feeAmountNet)
                                    /
                                    COALESCE(
                                        (SELECT rate
                                         FROM invoices_out, invoices_out_reference
                                         WHERE invoices_out.id = invoices_out_reference.invoiceRef
                                         AND invoices_out_reference.jobRef = jobs.id LIMIT 1),
                                        (SELECT rateVsPound
                                         FROM currencies
                                         WHERE currencies.id = parts_trading.sellingCurrency
                                         )
                                    )
                                    FROM enquiries_custom_fees, parts_trading
                                    WHERE enquiries_custom_fees.enquiryRef = enquiries.id
                                    AND parts_trading.enquiryRef = enquiries.id), 0) AS sellingFees,
                            COALESCE((SELECT
                                    SUM(parts_shipping_out.shippingOutCost)
                                    FROM parts_shipping_out, parts_shipping_arrival_dates, parts_shipping_v2
                                    WHERE parts_shipping_out.arrivalsRef = parts_shipping_arrival_dates.id
                                    AND parts_shipping_arrival_dates.shippingRef = parts_shipping_v2.id
                                    AND parts_shipping_v2.jobRef = jobs.id
                                    ), 0
                                ) AS actualShippingOutFromEua,
                            (SELECT

                                SUM(quantity*parts_trading.sellingNet)
                                    /
                                    COALESCE(
                                        (SELECT invoices_out.rate
                                         FROM invoices_out, invoices_out_reference
                                         WHERE invoices_out.id = invoices_out_reference.invoiceRef
                                         AND invoices_out_reference.jobRef = jobs.id
                                         LIMIT 1),
                                        (SELECT rateVsPound
                                         FROM currencies
                                         WHERE currencies.id = parts_trading.sellingCurrency)
                                    )
                                +
                                COALESCE((SELECT
                                    SUM(enquiries_custom_fees.feeAmountNet)
                                    /
                                    COALESCE(
                                        (SELECT rate
                                         FROM invoices_out, invoices_out_reference
                                         WHERE invoices_out.id = invoices_out_reference.invoiceRef
                                         AND invoices_out_reference.jobRef = jobs.id LIMIT 1),
                                        (SELECT rateVsPound
                                         FROM currencies
                                         WHERE currencies.id = parts_trading.sellingCurrency
                                         )
                                    )
                                    FROM enquiries_custom_fees
                                    WHERE enquiries_custom_fees.enquiryRef = enquiries.id), 0)
                                -
                                COALESCE((SELECT 
                                    SUM(qty*parts_trading_buying.buyingNet
                                    /
                                    (SELECT rateVsPound FROM currencies WHERE currencies.id = parts_trading_buying.buyingCurrency))
                                    FROM parts_trading_buying
                                    WHERE parts_trading_buying.enquiryRef = enquiries.id
                                    ), 0
                                    )
                                -
                                COALESCE((SELECT 
                                    SUM(feeAmountNet/(SELECT rateVsPound FROM currencies WHERE currencies.id = parts_trading_buying.buyingCurrency))
                                    FROM parts_trading_buying_charges, parts_trading_buying 
                                    WHERE parts_trading_buying_charges.partRef = parts_trading_buying.id
                                    AND parts_trading_buying.enquiryRef = enquiries.id
                                    ), 0
                                )
                                -
                                COALESCE((SELECT
                                    SUM(parts_shipping_out.shippingOutCost)
                                    FROM parts_shipping_out, parts_shipping_arrival_dates, parts_shipping_v2
                                    WHERE parts_shipping_out.arrivalsRef = parts_shipping_arrival_dates.id
                                    AND parts_shipping_arrival_dates.shippingRef = parts_shipping_v2.id
                                    AND parts_shipping_v2.jobRef = jobs.id
                                    ), 0
                                )
                                FROM parts_trading, parts_trading_buying
                                WHERE parts_trading.enquiryRef = enquiries.id
                                AND parts_trading_buying.counterpartRef = parts_trading.id
                            ) AS margin
                            FROM jobs,
                            jobs_states, enquiries, users, jobs_payment_status, entity_details
                            LEFT JOIN entity_credit_limits ON entity_details.id = entity_credit_limits.entityRef
                            WHERE jobs.stateRef = jobs_states.id
                            AND IF(paymentStateRef = 0, 1, (jobs_payment_status.id = jobs.paymentStateRef))
                            # ^ If true it causes a result for each payment state (i.e. 3), so we group on state below, shouldn't cause probs.
                            AND jobs.enquiryRef = enquiries.id
                            AND enquiries.entityRef = entity_details.id
                            AND users.id = enquiries.traderRef
                            AND enquiries.traderRef = ?
                                LIMIT ?, ?") ; 
```

如果我尝试将 PHP 执行内存设置为 3.5GB 以上，Apache 将无法启动（我使用的是 xampp）。我必须使用 32 位版本的 PHP？这与 INNODB_BUFFER_POOL_SIZE 相同，我希望为 14GB，但如果我这样做，mysql 将无法启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:28:11.500

我不认为这是与数据库相关的问题，因为这种错误（内存不足（需要 268435427 字节））大部分时间是由 PHP 抛出的（可能是无限循环或类似的问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-08T20:45:31.087

现在（花两分钟时间）您可以使用 MySQLCalculator.com 查看基本的 RAM 占用情况。如果配置中的所有每个连接 RAM 条目都有一个前导 # 你会运行得很好，实际上要好得多。使用 read_rnd_buffer_size = 24M 而不是默认的 256K 行，您读取的索引信息比必要的多 96 倍。

# wpf - wpf 应用程序中的多个故事板

> ID：11339471
> 
> 赞同：4
> 
> 时间：2012-07-05T07:15:37.633
> 
> 标签：wpf, c#-4.0

我在 wpf 应用程序中有三个故事板。

begin 是单个动画 progress 是重复动画 end 也是单个动画

所有故事板动画相同的图像，“进度”故事板正在重复（当另一个线程中的查询正在运行时），“开始”故事板在它之前，“结束”动画在它之后。我认为这是一个简单的问题：当应用程序启动时，启动“开始”动画，然后在 oncompleted 事件处理程序中，启动进度动画等。

但它不起作用：进度动画开始了，但它看起来不正确（奇怪的闪烁）。

我做了一个“button1”来分析这个，然后我注意到按钮的 onclick 事件处理程序中的相同方法是有效的（在开始情节提要结束后，我按下它，进度情节提要启动并完美显示）。（开始动画的FillBehavior是“停止”：没有这个设置按钮不起作用，但设置后事件处理程序仍然错误）

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        begin = (Storyboard)FindResource("startanimation");
        progress = (Storyboard)FindResource("progressanimation");
        end = (Storyboard)FindResource("stopanimation");
        begin.Completed += new EventHandler(begin_Completed);
        begin.Begin();
    }

    void begin_Completed(object sender, EventArgs e)
    {
        progress.Begin();       //not works
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {            
        progress.Begin();       //works
    } 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:49:05.513

尝试这个：

```
void begin_Completed(object sender, EventArgs e)      
{          
     this.Dispatcher.Invoke(
                            System.Windows.Threading.DispatcherPriority.Normal,
                            new Action(
                            delegate()
                            {
                                progress.Begin();
                            }
                        ));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:05:44.003

最终我被迫制作一个辅助计时器，并在滴答事件中启动进度动画。非常难看，但可以。

仍然欢迎任何其他提示。

# nlp - 英语单词变格和变位

> ID：11339476
> 
> 赞同：0
> 
> 时间：2012-07-05T07:15:53.767
> 
> 标签：nlp

我目前正在研究自然语言解析器，我需要能够结合英语动词和名词。

我已经有一个动词不规则动词列表，但如果你愿意的话，我正在努力寻找一套“规则”，用于结合常规英语动词。我知道有一些不同的规则，例如：“如果单词以'X'结尾，那么复数形式将以'Y'结尾”，最基本的是在末尾添加一个s。

我正在寻找查找规则：基本形式、过去简单、过去分词、第三人称单数、现在分词动名词

此外，我希望找到任何给定名词的复数形式和所有格形式，以及规则列表。我在这方面的搜索中没有任何结果或运气的来源，任何关于共轭（因为没有更好的词）名词的帮助都会非常有帮助。

[编辑] 不规则名词列表和规则列表的链接，例如：如果单词以辅音结尾，那么广告“s”（或其他）会很棒！！！[/编辑]

还有一件事......对于我的英语版本不规则，我正在使用[这个网站](http://www.online-languages.info/english/irregular_verbs.php?l=1)

对不起，似乎缺乏搜索，相信我，我已经看过了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T17:45:52.690

几天后，我想我想出了一个解决方案，让所有英语单词都变成复数或过去时等......

对于动词和名词，都有一组相对容易找到的不规则单词，以及每个单词的一组规则。我遇到的主要问题是，他们经常是这样的规则

如果结尾是 X，则删除最后一个字母并添加“Y”，但有时如果结尾是 X，请不要删除最后一个字母并添加“Z”

显然，这对于定义语言规则非常重要。

但我的解决方案是，我会查看这两种可能的形式，然后查看 google n gram 数据并进行比较。无论哪个更频繁，都成为该词的复数形式。

# perl - 如何在 Perl 中比较日期字符串

> ID：11339483
> 
> 赞同：2
> 
> 时间：2012-07-05T07:16:13.963
> 
> 标签：perl

我有两个包含日期值的 Perl 字符串变量。我想检查 str1 变量日期值是否比 str2 值早 1 天。我怎样才能检查它？如果它在 str2 之前没有 1 天，那么我需要打印一条错误消息。

```
 $str1="20120704"
 $str2="20120705 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:11:13.323

使用标准 Time::Piece 模块

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

use Time::Piece;

my $format = '%Y%m%d';

while (<DATA>) {
  chomp;
  my ($str1, $str2) = split;

  my $dt1 = Time::Piece->strptime($str1, $format);
  my $dt2 = Time::Piece->strptime($str2, $format);

  print "$str1 / $str2: ";
  if ($dt2->julian_day - $dt1->julian_day == 1) {
    say "ok";
  } else {
    say "not ok";
  }
}

__END__
20120704 20120705
20120630 20120701 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T07:21:03.303

```
use Date::Parse;
$str1="20120704";
$str2="20120705";
@lt1 = localtime(str2time($str1)); 
@lt2 = localtime(str2time($str2));
if ($lt1[7] + 1 != $lt2[7]) {
  die "$str2 < $str1";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:04:31.363

由于这些日期戳采用 ISO 8601 格式，因此简单的字符串比较就足以比较它们。

```
if( $str1 gt $str2 ) {
   # $str2 represents a later date than $str1
} 
```

这是 ISO 8601 表单的一个特定功能，不一定适用于其他格式的日期戳。特别注意，它需要按年/月/日顺序排列的字段，并且月和日字段具有 0 填充。

# python - 从列表中删除正则表达式元素

> ID：11339487
> 
> 赞同：3
> 
> 时间：2012-07-05T07:16:31.983
> 
> 标签：python, regex, list, parsing

我使用python 2.7。我在文件“a”中有数据：

```
myname1@abc.com;description1
myname2@abc.org;description2
myname3@this_is_ok.ok;description3
myname5@qwe.in;description4
myname4@qwe.org;description5
abc@ok.ok;description7 
```

我像这样阅读这个文件：

```
with open('a', 'r') as f:
    data = [x.strip() for x in f.readlines()] 
```

我有一个名为 bad 的列表：

```
bad = ['abc', 'qwe'] # could be more than 20 elements 
```

现在我试图删除@之后所有带有'abc'和'qwe'的行，并将其余的写入新文件。所以在 newfile 中应该只有 2 行：

```
myname3@this_is_ok.ok;description3
abc@ok.ok;description7 
```

我一直在尝试使用正则表达式 (. *?)@(.* ?);(.*) 来获取组，但我不知道下一步该做什么。

请给我建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:59:43.190

这是一个非正则表达式解决方案：

```
bad = set(['abc', 'qwe'])

with open('a', 'r') as f:
    data = [line.strip() for line in f if line.split('@')[1].split('.')[0] in bad] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T07:25:36.353

```
import re
bad = ['abc', 'qwe']

with open('a') as f:
    print [line.strip() 
           for line in f
           if not re.search('|'.join(bad), line.partition('@')[2]] 
```

只要 bad 仅包含正常字符，此解决方案就可以工作。`'a|b'`字母，数字，下划线，但没有像@phihag 指出的那样干扰正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:25:18.870

正则表达式`.?`不匹配或匹配一个字符。你想要`.*?`，这是多个字符的惰性匹配：

```
import re
bad = ['abc', 'qwe']

filterf = re.compile('(.*?)@(?!' + '|'.join(map(re.escape, bad)) + ')').match
with open('a') as inf, open('newfile', 'w') as outf:
    outf.writelines(filter(filterf, inf)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:16:15.797

我使用正则表达式来删除包含@abc 或@qwe 的行。不确定这是否是正确的方法

```
import re
with open('testFile.txt', 'r') as f:
     data = [x.strip() for x in f.readlines() if re.match(r'.*@([^abc|qwe]+)\..*;.*',x)]

print data 
```

现在数据将包含没有“@abc”和“@qwe”的行

或使用

```
data = [x.strip() for x in f.readlines() if re.search(r'.*@(?!abc|qwe)',x)] 
```

根据 astynax 的建议...

# javascript - SharePoint 初始化后执行 JavaScript 函数

> ID：11339488
> 
> 赞同：5
> 
> 时间：2012-07-05T07:16:34.727
> 
> 标签：javascript, sharepoint, sharepoint-2010

我有一个自定义 JS 脚本，我将其加载到 SharePoint 中，并且在 SP 完成自己的初始化后执行我的 init 方法时遇到问题。

**_spBodyOnLoadFunctionNames**

我首先尝试了“官方”方式，并将我的函数名称添加到正文加载后的已执行函数列表中，`_spBodyOnLoadFunctionNames.push("myInitMethod");`但不会在每次页面加载时触发，我不能依赖它。

**ExecuteOrDelayUntilScriptLoaded**

然后我尝试使用`ExecuteOrDelayUntilScriptLoaded(myInitMethod, "sp.js");`函数，但它也不会在每个页面加载时触发。

两种方式都有效——但不是每次都有效。我假设我的脚本有时会在SP 初始化**之前加载。**这主要发生在 Chrome 上，但也发生在 IE 上。

如何确保在 SP 准备好时执行我的脚本？

* * *

**注意**：当页面加载并且 SP 对象未完全初始化（未调用 ExecuteOrDelayUntilScriptLoaded 中的注册函数）时，有一个有趣的行为：当我单击页面中的“向上导航”锚点时（您可以看到子站点的层次结构）以下文件被加载，我的 init 函数（在 ExecuteOrDelayUntilScriptLoaded 中注册）被调用！

*   核心调试.js
*   sp.core.debug.js
*   ScriptResx.ashx
*   sp.ui.dialog.debug.js
*   sp.runtime.debug.js
*   sp.debug.js

所以点击之后一切都很好 - 但为什么不在页面加载上呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:46:20.040

似乎这种行为与 SP 2010 和 Google Chrome 之间的一些问题有关——我在其他浏览器上没有这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T13:13:34.780

这是一个仅在非 IE 浏览器上以某种方式发生的时间问题。请参阅[http://withinsharepoint.com/archives/256](http://withinsharepoint.com/archives/256)以获得解释和非常简单的修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-26T19:30:46.913

嘿，当我在寻找一种方法来延迟我的 JavaScript 加载直到 sp.js 加载时，我遇到了你的问题。

您提供的代码有时有效的原因是（有时）SharePoint 不会初始化它的所有代码库。这在 Google Chrome 中是一个大问题，但也可能在其他浏览器（非 IE）中发生。要解决该特定问题，您可以执行以下操作：

```
if (typeof(_spBodyOnLoadWrapper)!='undefined'){_spBodyOnLoadWrapper();} 
```

我把我的放在 $(document).ready() 里面。

并感谢您回答我的问题:)

# uibinder - 在 GWTP 的新窗口中打开演示者

> ID：11339490
> 
> 赞同：0
> 
> 时间：2012-07-05T07:16:44.597
> 
> 标签：uibinder, gwt-platform, gwtp

目前，我必须实现打印功能。我在单击打印按钮时使用了弹出演示器，仅打印弹出面板的内容。但它也打印弹出面板背景的内容。有什么方法可以在新的浏览器窗口中打开演示者而不是弹出？请告诉我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:39:18.503

按打印时，您可以尝试以下操作：

```
String url = Window.Location
        .createUrlBuilder()
        .setHash(yourPrintingPresenterToken).buildString();
Window.open(url, "_blank", null); 
```

您必须以某种方式将当前状态传输给新的演示者，可能使用参数化令牌。

# javascript - 使用JS将图像的特定背景颜色设置为透明

> ID：11339496
> 
> 赞同：2
> 
> 时间：2012-07-05T07:16:51.297
> 
> 标签：javascript

我正在使用以下代码来修改图像的透明度。然而，我想做的只是修改图像的背景颜色并将其 alpha 通道设置为 0 而不是整个图像。

以下代码将整个图像的 alpha 透明度设置为 0：

```
var ctx = this.data.getContext("2d");
var imgData = ctx.getImageData(0, 0, this.data.width, this.data.height);
ctx.putImageData(this.adjustImage(imgData), 0, 0);

adjustImage: function(iArray) {
    var imageData = iArray.data;
    for (var i = 0; i < imageData.length; i+= 4) {
        imageData[i+3] = 0;
    }

    return iArray;            
} 
```

我正在寻求一些帮助`rgb(255,0,255)`，将图像中的一种颜色修改为透明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:53:26.983

还没有真正测试过这个，但这应该工作

```
var ctx = this.data.getContext("2d");
var imgData = ctx.getImageData(0, 0, this.data.width, this.data.height);
ctx.putImageData(this.adjustImage(imgData), 0, 0);

adjustImage: function(iArray) {
    var imageData = iArray.data;
    for (var i = 0; i < imageData.length; i+= 4) {
        if(imageData[i] === 255 && imageData[i+1] === 0 && imageData[i+2] === 255){
            imageData[i+3] = 0;
        }
    }

    return iArray;            
} 
```

# android - Android 自定义按钮拉伸背景

> ID：11339497
> 
> 赞同：0
> 
> 时间：2012-07-05T07:16:59.660
> 
> 标签：android

我正在使用 android 中的自定义按钮，我设置了自定义样式并从按钮的背景应用，我的问题是图像没有拉伸按钮背景，我想在这里根据按钮大小拉伸背景'我的自定义按钮 xml 代码：

**custom_button.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<selector
  xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" 
     android:drawable="@drawable/disable" />
    <item android:state_enabled="true" 
     android:state_pressed="true" android:drawable="@drawable/pressed" />
    <item android:state_enabled="true"
     android:state_focused="true" android:drawable="@drawable/focused" />
    <item android:state_enabled="true"
     android:drawable="@drawable/normal" />
</selector> 
```

这是我的布局 xml 代码参考按钮样式 xml 代码：

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/editText1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="28dp"
    android:text="Button"
    android:background="@drawable/custom_button" /> 
```

这是我在屏幕截图下方的输出：

![在此处输入图像描述](../Images/8d585579fa50e339445cc1f3b3bb79ff.png)

任何人都可以帮助我如何解决这个问题，非常感谢！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:40:05.807

对选择器图像使用 9-patch 图像。这将帮助 Android 按照您在 9-patch 边界中描述的那样拉伸您的图像

[绘制 9-patch](http://developer.android.com/tools/help/draw9patch.html)

[绘制 9-patch 教程](http://android10.org/index.php/articlesother/279-draw-9-patch-tutorial)

另一个[Android 9 补丁图像教程](http://www.androiddom.com/2011/05/android-9-patch-image-tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:21:10.297

使用 android-sdk/tools 中的 draw9patch 应用程序。检查说明它是如何工作的，背景应该能够正确缩放。

# google-apps-script - 如何通过 Google Apps 脚本获取 Google 电子表格的 ID？

> ID：11339500
> 
> 赞同：12
> 
> 时间：2012-07-05T07:17:14.737
> 
> 标签：google-apps-script, google-sheets

我创建了一个 Google 电子表格，我想找到该电子表格的 ID。我在谷歌上搜索了太多，但没有成功。

请告诉我我可以获取活动电子表格的电子表格ID的方式/脚本。

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-05T07:33:48.187

电子表格的 ID（键）在 URL 中（key= 和 #gid= 之间的部分）。您可以使用 GAS 检索它，例如：

```
function getId() {
  Browser.msgBox('Spreadsheet key: ' + SpreadsheetApp.getActiveSpreadsheet().getId());
} 
```

请注意，通常每种方法都会得到完全不同的字符串，但它们的工作方式应该相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-19T10:25:28.913

请记住，与来自 File 对象的 getId() 相比，来自 Spreadsheet 对象的 getId() 函数返回不同的 id，即使 File（由 DriveApp 管理）是同一个电子表格。

无论如何，如果您使用电子表格提供的 id 从 DriveApp 打开文件，您将获得正确的 File 对象，使用 getId() 返回“文件”id，这与您用来打开的不同文件。

这似乎令人困惑，但它确实如此。我在一些来自这个“双重”ID的脚本中遇到了一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-09T03:45:13.050

该工作表存在于 电子表格 url 的
*d* 和 *edit之间。*
示例 -：如果工作表 url 是

> `https://docs.google.com/spreadsheets/d/1rV2_S2q5rcakOuHs2E1iLeKR2floRIozSytAt2iRXo8/edit#gid=0`

工作表ID是

> `1rV2_S2q5rcakOuHs2E1iLeKR2floRIozSytAt2iRXo8`

有关更多信息，请访问[google sheet api 官方文档](https://developers.google.com/sheets/api/guides/concepts)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-24T15:55:53.313

**Google App Script** 要获取特定文件夹中电子表格的电子表格 ID：

```
function getSSID(){
  let folderID = "the id of the folder to search in"
  let folder = DriveApp.getFolderById(folderID);
  let SSName = "the name of the spreadsheet to search for"
  let allSSIDs = []; // empty array to hold the Id's of spreadsheets with the name SSName 
  let allMatching = folder.getFilesByName(SSName);
      while(allMatching.hasNext()){
        let ss = allMatching.next();
        allSSIDs.push(ss.getId());
      }

  Logger.log(allSSIDs); 
  // array of all spreadsheet ids if the spreadsheet had the name we are looking for
  // which hopefully there is only one that matches the exact spreadsheet name
} 
```

要获取当前电子表格 ID：

```
function getCurrentSSID(){
  let ssID = SpreadsheetApp.getActiveSpreadsheet().getId();
  Logger.log(ssID);
} 
```

# activex - Activex 问题和 ocx 问题

> ID：11339501
> 
> 赞同：0
> 
> 时间：2012-07-05T07:17:29.473
> 
> 标签：activex, ocx

我在 Vb 中创建了 Activex 它在 VB 中包含一个公共方法

当我通过 javascript 调用它时

它说'对象不支持属性或方法'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:30:29.970

您将在以下情况下收到错误消息： 1\. 方法或属性无效。2\. ActiveX 控件在机器上不可用。

如果方法/属性调用正确，请检查您是否在机器上安装/注册了ActiveX控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:24:00.550

听上去，您还没有在 Windows 注册表中注册 activex 模块。

尝试注册 ActiveX，如下所示：

```
C:\Windows\System\regsvr32 name_of_activex.ocx 
```

将 'name_of_activex.ocx' 替换**为您的 activex 模块的完整路径**。

# java - java.lang.RuntimeException：无法启动活动 ComponentInfo { java.lang.ClassCastException：android.widget.LinearLayout

> ID：11339502
> 
> 赞同：2
> 
> 时间：2012-07-05T07:17:32.183
> 
> 标签：java, android, android-layout

这个例外是什么意思？

```
07-05 12:09:11.788: W/dalvikvm(445): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-05 12:09:11.808: E/AndroidRuntime(445): FATAL EXCEPTION: main
07-05 12:09:11.808: E/AndroidRuntime(445): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.a2zunitconverter.miniproject/com.a2zunitconverter.miniproject.weight}: java.lang.ClassCastException: android.widget.LinearLayout
07-05 12:09:11.808: E/AndroidRuntime(445):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-05 12:09:11.808: E/AndroidRuntime(445):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-05 12:09:11.808: E/AndroidRuntime(445):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-05 12:09:11.808: E/AndroidRuntime(445):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-05 12:09:11.808: E/AndroidRuntime(445):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 12:09:11.808: E/AndroidRuntime(445):  at android.os.Looper.loop(Looper.java:123)
07-05 12:09:11.808: E/AndroidRuntime(445):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-05 12:09:11.808: E/AndroidRuntime(445):  at java.lang.reflect.Method.invokeNative(Native Method)
07-05 12:09:11.808: E/AndroidRuntime(445):  at java.lang.reflect.Method.invoke(Method.java:507)
07-05 12:09:11.808: E/AndroidRuntime(445):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-05 12:09:11.808: E/AndroidRuntime(445):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-05 12:09:11.808: E/AndroidRuntime(445):  at dalvik.system.NativeStart.main(Native Method)
07-05 12:09:11.808: E/AndroidRuntime(445): Caused by: java.lang.ClassCastException: android.widget.LinearLayout
07-05 12:09:11.808: E/AndroidRuntime(445):  at com.a2zunitconverter.miniproject.weight.onCreate(weight.java:31)
07-05 12:09:11.808: E/AndroidRuntime(445):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-05 12:09:11.808: E/AndroidRuntime(445):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-05 12:09:11.808: E/AndroidRuntime(445):  ... 11 more
07-05 12:09:15.538: D/dalvikvm(454): GC_EXTERNAL_ALLOC freed 49K, 53% free 2560K/5379K, external 2076K/2137K, paused 56ms 
```

**这是我的xml代码：**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="fill_parent" 
    android:background="@drawable/weight4">
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:text="@string/weight"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#ffffff" />

        <EditText
            android:id="@+id/wquery"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="numberDecimal"
            android:text="@string/value" >

            <requestFocus />
        </EditText>

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/label2"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#ffffff" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Spinner
                android:id="@+id/convertfrom"
                android:layout_width="126dp"
                android:layout_height="wrap_content" >
            </Spinner>

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="34dp"
                android:layout_height="61dp"
                android:background="#cccccc"
                android:src="@drawable/arrows" />

            <Spinner
                android:id="@+id/convertto"
                android:layout_width="137dp"
                android:layout_height="wrap_content" >
            </Spinner>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/back1"
            android:layout_width="match_parent"
            android:layout_height="248dp"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="213dp"
                android:layout_height="wrap_content"
                android:text="@string/result"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#ffffff" />

            <TextView
                android:id="@+id/result"
                android:layout_width="269dp"
                android:layout_height="100dp"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#66cc00" />

            <ImageView
                android:id="@+id/exit"
                android:layout_width="74dp"
                android:layout_height="match_parent"
                android:src="@drawable/back" />
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T11:12:28.117

有时在修改布局 xml 后，您可能会在 Eclipse 中出现此错误。尝试在 Eclipse 中制作“清洁项目”。这对我有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:19:40.343

The error `ClassCastException` means that you are trying to cast an object into a specific class that does not match its type.

It seems like you are trying to cast a LinearLayout Object into some other Object. If you post your java code we can be more specific.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:14:37.467

从这一行可以看出：`07-05 12:09:11.808: E/AndroidRuntime(445): at com.a2zunitconverter.miniproject.weight.onCreate(weight.java:31)`

`onCreate`第 31 行中的函数有错误。

# matlab - 在 MATLAB 中显示梯度图像的颤动图

> ID：11339503
> 
> 赞同：2
> 
> 时间：2012-07-05T07:17:33.330
> 
> 标签：matlab, plot

我有一个图像。我想显示在 MATLAB 中使用梯度函数获得的梯度图像的颤动图，最好叠加在梯度图像上。

```
I = imread('image.png');
[gx,gy] = gradient(double(rgb2gray(I)));
g = abs(gx) + abs(gy);
figure;
imshow(g, []);
hold on;
quiver(abs(gx),abs(gy)); 
```

这是我尝试过的，我得到的只是一个完全蓝色的显示器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T08:04:10.063

我想你看到的只是箭头，但它们靠得太近了。如果您分别绘制两个图 (`imshow(g)`和`quiver`)，它们会显示正常。imshow 仅显示没有任何缩放的像素，如果您修复它（使其缩放），箭袋箭头之间也将有更多空间并变得可见。您可以通过将`'InitialMagnification','fit'`选项添加到 imshow 来做到这一点：

```
imshow(g,'InitialMagnification','fit') 
```

或者您可以显示更少的颤动箭头：

```
figure;
imshow(g, []);  % [] to display image properly     
hold on;

[Nx, Ny] = size(g);
xidx = 1:10:Nx;
yidx = 1:10:Ny;
[X,Y] = meshgrid(xidx,yidx);
quiver(Y',X',abs(gx(xidx,yidx)),abs(gy(xidx,yidx))); 
```

# tridion - 自动活动未执行

> ID：11339510
> 
> 赞同：3
> 
> 时间：2012-07-05T07:18:03.123
> 
> 标签：tridion, tridion-2011

创建了一个基本的工作流程，如下所示。![PFA 附加的工作流程](../Images/3d6a06c9deae6e14680d2ff5d15aa417.png)

创建一个 calss 库，使用 ProgId，设置 comvisible true 并在 Tridion 服务器中注册程序集。

**这是我测试过的方式：**

1.  创建了一个组件
2.  完成工作清单中的活动。
3.  导航到“全局工作列表”并通过选择“返回作者”步骤并单击“完成”按钮自行完成审阅者活动。

**该项目未移至作者。但是当我从全局工作列表中再次完成活动时，该项目已移至作者。**

似乎我的代码没有执行该活动，因为我尝试删除下面的 VB 脚本代码并尝试使用默认的自动脚本代码。

```
' Script for Automatic Activity Content Manager Workflow
FinishActivity "Automatic Activity Finished" 
```

它的行为与上述相同。所以我决定我的代码不起作用。有人可以帮忙吗？

**下面是我在“回到作者”的脚本框中使用的VBScript：**

```
Option Explicit

Dim workflowHandler
Set workflowHandler = CreateObject("CoreComponentWorkflow.WorkflowHandler");

If Not workflowHandler Is Nothing Then
    Call workflowHandler.MoveBackToActivity(Cstr(CurrentWorkItem.ID, "Create or Edit     Component")
End If
Set workflowHandler = Nothing 
```

**下面是 C# 代码：**

```
public void MoveBackToActivity(string workitemid, string strActivitytoMove)
    {

        try
        {
            Session session = new Session();
            WorkItem workitem = new WorkItem(new TcmUri("workitemid"), session);
            ActivityInstance currentactivity = workitem.Activity as ActivityInstance;
            ProcessInstance procInstance = currentactivity.Process as ProcessInstance;

            IEnumerable<ActivityInstance> ieActivities = procInstance.Activities                    
            .Select (s => s)
            .Where (w => w.Title.IndexOf(strActivitytoMove) !=-1)
            .OrderByDescending(w =>w.StartDate);

            if (ieActivities != null && ieActivities.Count<ActivityInstance>() > 0)
            {
                ActivityInstance targetactivity = ieActivities.ElementAt(0);
                User lastperformuser = targetactivity.Performers.ElementAt(targetactivity.Performers.Count<User>() - 1);
                ActivityFinish finish = new ActivityFinish(targetactivity.FinishMessage, lastperformuser, workitem.Session);
                currentactivity.Finish(finish);

            }

        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:54:00.433

请注意，您正在使用自动活动中不支持的 API。允许您使用 TOM.NET 的唯一进程是事件系统处理程序和模板构建块，如此[处](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_19AF6C2427DF4781A866981FA8D62192)所述。

自动工作流活动——如果不是用 VBScript 开发的——必须使用 CoreService 接口。

好消息是我知道这是可行的——很多人让它在许多实现中工作。（对您而言）坏消息是错误在您的代码中。您是否尝试过调试/逐步调试您的代码？您可以附加到工作流进程 (cm_wf_svc.exe) 并以比我们更快的速度找出代码出了什么问题。

这是使用 CoreService 完成活动的一个非常简单的片段：

```
ActivityFinishData activityFinish = new ActivityFinishData
    {
        Message = "Automatically Finished from Expiration Workflow Extension"
    };
ActivityInstanceData activityInstance = 
    (ActivityInstanceData)processInstance.Activities[0];
client.FinishActivity(activityInstance.Id, activityFinish, readOptions); 
```

顺便说一句 - 如果您仍然打算使用 TOM.NET，为什么还要[问要使用哪个 API](https://stackoverflow.com/questions/11185079/which-api-can-i-use-for-writing-sdl-tridion-workflow-activities)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T14:32:56.410

按照 Nuno 的回答，是的，您应该更改代码以使用 TOM 或核心服务。TOM .Net 不受支持，因为它使用的线程单元与我们用于工作流 (COM) 的底层技术不同。

关于这个问题，我已经检查过您正在调用这样的活动。

```
Call workflowHandler.MoveBackToActivity(Cstr(CurrentWorkItem.ID, "Create or Edit     Component") 
```

活动名称似乎不匹配。“编辑”和“组件”之间有一些奇怪的字符

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:18:49.920

自动活动由工作流代理服务执行。已分配状态可能表明它只是没有被服务接收。您的服务是否正常运行，队列通知等设置是否正确？

# android - 如何在android的webChromeClient中覆盖隐藏方法

> ID：11339512
> 
> 赞同：0
> 
> 时间：2012-07-05T07:18:13.160
> 
> 标签：android, hide

android 中 webChromeClient.class 中的源代码。

```
 /**
 * Tell the client that the selection has been copied or canceled.
 * @hide
 */
public void onSelectionDone(WebView view) {
} 
```

有没有办法在我的项目中覆盖该方法？喜欢

```
WebChromeClient mWebChromeClient = new WebChromeClient() 
{
        @Override
        public void onSelectionDone(WebView view)
        {   
        }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:25:04.027

从中得到

```
webView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress)
            {
                activity.setTitle("Loading...");
                activity.setProgress(progress * 100);

                if(progress == 100)
                    activity.setTitle(R.string.app_name);
            }
        });

        webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
            {
            }

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url)
            {
                view.loadUrl(url);
                return true;
            }
        });

        webView.loadUrl("http://www.google.com"); 
```

# objective-c - 如何使 geocodeAddressString 对所有地区名称更敏感

> ID：11339513
> 
> 赞同：0
> 
> 时间：2012-07-05T07:18:13.223
> 
> 标签：objective-c, xcode4.3

```
 [Geocode geocodeAddressString:someSearchString completionHandler: ^(NSArray * placemarks, NSError *error)
     {
         [self ParseDistrict:placemarks];
         [ThreadClass CommitWithDoMOCUpdate];
         [[NSNotificationCenter defaultCenter] postNotificationName:notifyFinishDownloadingData object:self];
     }]; 
```

有一个地区叫Kemayoran。但是我必须喂一些SearchString kemayora 才能让kemayoran 出现。

就像我必须插入 tebet 才能让 Tebet 出现一样。

我已经使用区域并专注于我附近的区域。还是不行。

# javascript - 事件监听器ajax Jquery

> ID：11339514
> 
> 赞同：0
> 
> 时间：2012-07-05T07:18:15.763
> 
> 标签：javascript, jquery, ajax

我是 Js 和 Ajax 的新手。我正在通过 ajax 调用页面（使用 jquery）。被调用的页面有一个按钮。单击按钮时，我需要一个警报框。但是事件侦听器不会对按钮单击起作用。

```
 function setUpClickHandler() {
    addEventHandler(document.getElementById('sideLink1'), "click", onsideLinkClicked1, false);
    addEventHandler(document.getElementById('EnrollButtonClick11'), "click", onEnrollButtonClick11, false);
}

function onsideLinkClicked1(e) {
    $('#CrousalLoad').load('crousal1.html');
}
function onEnrollButtonClick11(e) {
    alert("hello");   
} 
```

crousal1.html 是加载的页面，“EnrollButtonClick11”是页面内的按钮 ID。有什么我在这里想念的吗。当我在这里感到震惊时，请为任何澄清添加评论。提前致谢.. ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:52:18.177

如果你使用 jQuery，你可以跳过它。

```
$("#sideLink1").click(function (){
alert('hello');//you do it directly in the function
onEnrollButtonClick11(); //or call a function from here.
}) 
```

来源：

[http://api.jquery.com/click/](http://api.jquery.com/click/) 说了同样的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:57:42.673

发生这种情况可能是因为此时页面上不存在您注册点击的 ID 为 EnrollButtonClick11 的按钮。由于您使用的是 jQuery，请尝试类似 $('body').on('click', 'EnrollButtonClick11', onEnrollButtonClick11);

# c++ - std::list 反向迭代和擦除导致崩溃

> ID：11339516
> 
> 赞同：3
> 
> 时间：2012-07-05T07:18:20.943
> 
> 标签：c++, list, crash

我正在使用反向迭代器遍历 std::list 并使用插入它们时获得的正向迭代器从列表中删除一些元素。示例程序如下所示。我读到从列表中删除元素不会使其他迭代器无效，除了那些引用已删除元素的迭代器。但是没有提到 reverse_iterators 并且我的程序正在崩溃。有人可以告诉用法是否不正确吗？

程序所做的是将一个元素添加到列表中，存储其迭代器，反向迭代列表并使用其存储的迭代器删除列表中的唯一元素。

输出粘贴在代码示例下方。

```
#include <list>
#include <iostream>
using namespace std;

struct node
{
    int data;
    list<node*>::iterator iter;
} a;

int main()
{
    list<node*> l;
    a.data = 1;
    l.push_front( &a );
    a.iter = l.begin();
    list<node*>::reverse_iterator ri = l.rbegin();
    while ( ri != l.rend() )
    {
        cout << (*ri)->data << endl;
        list<node*>::reverse_iterator rj = ri;
        ++ri;
        if ( ri ==  l.rend() )
            cout << "before erase: reached end" << endl;
        l.erase((*rj)->iter);
        if ( ri ==  l.rend() )
            cout << "after erase : reached end" << endl;
        else
            cout << "after erase : Not reached end" << endl;
    }
} 
```

输出

```
1
before erase: reached end
after erase : Not reached end
610568524
before erase : reached end
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:57:14.320

在 VS2010 下，它会在第一次循环传递时在这里抛出异常：

```
 l.erase((*rj)->iter);
 if ( ri ==  l.rend() ) // exception 
```

这应该让您大致了解发生了什么。你看，`reverse_iterator`它只是标准迭代器的包装器。也就是说，你应该记住它有`base()`返回底层迭代器的成员——你不必像在`node`struct 中那样将它存储在其他地方。

[这](https://stackoverflow.com/a/1830240/461632)`reverse_iterator`是与`iterator`. 在您的情况下，`rbegin`将基于`begin`迭代器。如果您`begin`从列表中删除 （您这样做，因为它只有一个元素），所有`reverse_iterator`基于此的 s`iterator`都将变为**invalid**。牢记这一点，您可以通过以下方式重写循环：

```
while ( ri != l.rend() )
{  
    cout << (*ri)->data << endl;
    list<node*>::reverse_iterator rj = ri;
    ++ri;

    if ( ri ==  l.rend() )
        cout << "before erase: reached end" << endl;

    // the actual underlying iterator has an offset of one
    list<node*>::iterator it = l.erase(--rj.base());
    ri = reverse_iterator<list<node*>::iterator>(it);
    // or just
    // ri = reverse_iterator<list<node*>::iterator>(l.erase(--rj.base()));

    if ( ri ==  l.rend() )
        cout << "after erase : reached end" << endl;
    else
        cout << "after erase : Not reached end" << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:27:00.270

反向迭代器（通常）不是一个唯一的类，而是普通迭代器上的一个适配器——它有一个迭代器到一个列表中作为成员，并使用它来进行自己的移动和取消引用。所以当这个列表迭代器失效时，反向迭代器也会失效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T23:02:45.880

我正在写一个答案来记录我的发现；如果你遇到这个问题试试

SingerOfTheFall 的建议方法，它就像一个魅力，例如：

```
 for(auto it=values.end();it!=values.begin();){
            if((*it).second.endPoint)
                break;
            values.erase((*(it--)).first);
        } 
```

回到我对此的发现：

当我遇到程序挂起的问题时，我进行了`valgrind`检查，它退出了一些奇怪`Invalid reads`的起源于`libstdc++`

```
Invalid read of size 8
    at 0x4EAA633: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.20)
    by 0x402FEC: std::_Rb_tree_iterator<std::pair<int const, GroupControl::Group::Entry> >::operator--() (stl_tree.h:218) 
```

i suspect that after the last element's erase the `rend()` doesnt stop the iterator, and the `++` op is trapped in a loop

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T07:40:17.233

您需要将擦除返回值存储到迭代器中。进行以下更改。

```
(*rj)->iter= l.erase((*rj)->iter); 
```

# c - c中标准输出的缓冲行为

> ID：11339519
> 
> 赞同：3
> 
> 时间：2012-07-05T07:18:41.173
> 
> 标签：c, stdio, output-buffering

当我运行第一个代码并立即按 ctrl-c 时，不会`45`写入文件。但是当我运行第二个代码时，我确实得到了`45`.

我不明白为什么在下面的代码中会发生这种行为？如果`stdout`行缓冲不应该在我输入字符后输出？我错过了什么？

**第一个代码：**

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
   FILE *fp=stdout;
   fp=fopen("myfile","w");
   fprintf(fp,"%d",45);
   getchar();
  // return 0;

} 
```

**第二个代码：**

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
   FILE *fp=stdout;
   fprintf(fp,"%d",45);
   getchar();
  // return 0;

} 
```

PS：我使用的是GCC，平台是Linux。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T07:37:50.717

我认为`getchar`与您在第一个代码中观察到的缓冲没有任何关系。如果您不按任何字符并等待一段时间（即留在里面`getchar()`），您很可能会看到一个空文件。无论您是否使用或停止了程序`getchar`，都会发生这种情况。`sleep``while(1)`

现在你按下`Ctrl-C`你的程序没有注册的处理程序，因此你的程序突然终止。***是否在程序突然终止时刷新缓冲区/流是实现定义***的。在这里阅读完整的故事

[为什么在进程退出时数据没有被刷新到文件中？](https://stackoverflow.com/questions/7281255/why-is-data-not-being-flushed-to-file-on-process-exit)

例如，在我的系统（Windows 7，内部使用 gcc 和 mingw 框架的代码块）上，当我突然终止它时，我可以看到`45`确实被刷新到文件中，而不管使用或任何东西。`getchar`即在我的系统上，实现是在程序突然终止时将数据刷新到文件中。

***所以，底线是，当你以非正常方式做事时会发生什么是实现定义的！***

但第二种情况确实是一种奇怪的情况，`getchar` *似乎*正在刷新`stdout`缓冲区。一旦我找到为什么`getchar`是/似乎是刷新`stdout`缓冲区的确切原因，我将立即更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:27:31.827

引起混淆的是**getchar()**，似乎当它被调用时它正在刷新**stdout**。

如果你`getchar()`用类似的东西替换，`sleep(10)`那么你 45 将不会被打印出来。

```
#include<stdio.h>
#include<unistd.h>
#include<stdlib.h>
int main()
{
   FILE *fp=stdout;
   //fp=fopen("myfile","w");
   fprintf(fp,"%d",45);
   sleep(10);
   //getchar();
  // return 0;

} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-05T07:30:28.943

您正在写入物理文件的第一种情况。fopen, fclose 是缓冲 I/O 取决于实现，数据可能不会立即提交，直到缓冲区已满。调用 fclose() 将导致缓冲区写入磁盘。

您正在写入 STDIO 的第二种情况，写入 STDIO 的数据通常会立即显示。

# javascript - Javascript 错误（缺少 }）

> ID：11339520
> 
> 赞同：0
> 
> 时间：2012-07-05T07:18:42.390
> 
> 标签：javascript, jquery

只是检查我的 JS，我有一个错误，但我看不到在哪里。想知道你是否可以？

```
$(document).ready(function(){
        $('input').hover(function()
        {
        $(this).popover('show')
        });
        $("#loginnow").validate({
            rules:{
                username:{
                    required:true,
                    minlength: 3
                },
                password:{
                    required:true,
                    minlength: 6
                },
            messages:{
                username:{
                    required:"Enter your Username",
                    minlength:"Username must be minimum 3 characters"
                },
                password:{
                    required:"Enter your password",
                    minlength:"Password must be minimum 6 characters"
                },
                    },
            errorClass: "help-inline",
            errorElement: "span",
            highlight:function(element, errorClass, validClass) {
                $(element).parents('.control-group').addClass('error');
            },
            unhighlight: function(element, errorClass, validClass) {
                $(element).parents('.control-group').removeClass('error');
                $(element).parents('.control-group').addClass('success');
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:23:31.077

使用[jshint](http://www.jshint.com/)。

这是您的报告： http: [//www.jshint.com/reports/623021](http://www.jshint.com/reports/623021)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:21:38.940

```
rules:{ 
```

你没有关闭这个大括号请检查dreamweaver

# c# - 将 Texture2D 保存为 JPEG

> ID：11339523
> 
> 赞同：0
> 
> 时间：2012-07-05T07:18:53.403
> 
> 标签：c#, windows-phone-7, cocos2d-iphone, image-conversion

我想知道是否可以在不使用 texture2d.saveAsJpeg 方法的情况下将 texture2d 保存到 jpeg，因为它的内存泄漏？

（不是 ImageTools 解决方案 - 因为我使用的是 cocos-2d）

# java - 分阶段加载弹簧上下文

> ID：11339524
> 
> 赞同：2
> 
> 时间：2012-07-05T07:18:58.803
> 
> 标签：java, spring, jetty, jax-rs

这是人们会问的奇怪问题之一——为什么？

所以我将从我为什么要这样做开始，然后讨论这个问题。我想更好地控制弹簧上下文的加载方式。例如，我不想同时加载域和 web-api。这将使资源在它们的依赖项准备好之前可用。在继续此过程之前，我可能还需要检查某些东西的状态。也就是说，模块/上下文之间会有顺序。也许不仅在启动，而且在关机。

所以问题是我找不到有关如何加载域上下文的任何信息，然后当完成后我会检查状态并最后加载 api 上下文。我想从 java 代码中完成所有这些，因为我需要控制启动流程。我有使用 SpringServlet 加载 web 上下文的基础知识。我没有找到任何信息是是否可以加载上下文，等待并加载另一个引用第一个上下文的上下文。

很高兴知道我没有使用 JavaEE 也没有使用容器。我只使用带有 servlet 和 spring 的嵌入式 Jetty。那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:36:13.813

我建议考虑以下：

*   阅读[`SmartLifeCycle`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/SmartLifecycle.html)和[`Phased`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/Phased.html)获取有关应用程序上下文生命周期管理顺序的扩展点。这个想法是让您的顶级重要 bean 实现接口，以便标准应用程序上下文初始化也将按照您自定义的顺序处理给这些 bean。
*   将您的应用程序上下文 XML 文件分成更小的部分。`<import />`在依赖于更高/更低上下文的环境中使用。
*   在关键任务 bean 上使用`depends-on`属性来确保依赖关系。
*   用于`InitializingBean`您需要确保在初始化后当前 bean 的依赖关系得到满足的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:58:46.010

考虑延迟加载的 bean 和延迟代理。所以bean只会在第一次使用时创建......

# vim - 有没有办法在一个 vim 选项卡中查看两个差异？

> ID：11339525
> 
> 赞同：0
> 
> 时间：2012-07-05T07:18:58.873
> 
> 标签：vim, diff, git-merge, vimdiff

我知道 vim 中的差异是页面本地的，这意味着我们只能在一个标签页中有一个差异，对吗？但是，如果我想在一个标签页中有两个差异怎么办。例如，一个差异在顶部两个窗口之间，另一个差异在底部两个窗口之间。这是处理 git merge 冲突的常见问题。我们可以在顶部两个窗口中设置远程提交更改差异，在底部两个窗口中设置本地文件和本地冲突文件差异，然后，我们确切地知道远程中的更改导致冲突并手动修复它们。

我怎样才能做到这一点？有没有插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:56:29.030

缓冲区是否参与 diff 取决于`'diff'`选项卡页中所有可见缓冲区的缓冲区设置（最多四个缓冲区）。实现你想要的需要一个“差异组”的概念，例如`:setlocal diff=group1`，但今天不存在这样的东西。

今天，在没有 Vim 补丁的情况下实现这一点的唯一方法（我能想到的）是在拆分窗口屏幕或 tmux 会话中运行两个单独的 Vim 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T09:12:31.633

如果要将 A.txt 与 B.txt 以及 A.java 与 B.java 进行比较，可以执行以下操作：

```
echo two way diffs separator > separator
cat A.txt separator A.java > A
cat B.txt separator B.java > B
vimdiff A B 
```

然后输入命令

`G:sp|set noscrollbind|normal gg<enter>`拆分左窗格并解除新窗格的滚动，

`<c-W>l`去右窗格，

`G:sp|set noscrollbind|normal gg<enter>`对右窗格执行相同的操作。

当然，这并不理想：顶部窗口的光标没有链接，如果向下或向上滚动太多，每个缓冲区也包含另一个缓冲区。

# ruby - 使用 Ruby 的 XML 数据扫描器：在性能方面是案例语句还是动态调度？

> ID：11339527
> 
> 赞同：3
> 
> 时间：2012-07-05T07:19:18.910
> 
> 标签：ruby, performance, xml-parsing

我正在编写一个 XML 数据扫描器，它使用一些 XML 解析器库（如 nokogiri 等）读取 XML 文本，并生成一个节点树。我需要为每个 XML 元素创建一个对象。所以，我需要一个根据给定元素名称和属性创建对象的方法，就像这样，不管我使用的是哪种解析器库选项（SAX 或 DOM）：

```
create_node(name, attributes_hash) 
```

此方法需要根据`name`. 实施的可能性是：

1.  案例陈述
2.  方法分派和预定义方法

由于这种方法可能会成为瓶颈，因此我编写了一个基准脚本来检查 Ruby 的性能。（在这个问题的最后部分附加了基准脚本。我不喜欢脚本的某些部分——尤其是如何创建案例语句——所以 也欢迎对我如何改进这一点*发表评论*，但请将其提供为评论不是答案...我可能也需要为此创建一个问题..）。

该脚本以两种范围大小测量以下四种情况：

1.  带有常量名称的方法调度
2.  方法调度与名称连接`#{}`
3.  方法调度与名称连接`+`
4.  使用 case 语句，调用相同的方法

结果：

```
 user     system      total        real
a to z: method_calls (with const name)       0.090000   0.000000   0.090000 (  0.092516)
a to z: method_calls (with dynamic name) 1   0.180000   0.000000   0.180000 (  0.181793)
a to z: method_calls (with dynamic name) 2   0.200000   0.000000   0.200000 (  0.202818)
a to z: switch_calls                         0.130000   0.000000   0.130000 (  0.132633)

                                                user     system      total        real
a to zz: method_calls (with const name)       2.900000   0.000000   2.900000 (  2.894273)
a to zz: method_calls (with dynamic name) 1   6.500000   0.010000   6.510000 (  6.507099)
a to zz: method_calls (with dynamic name) 2   6.980000   0.000000   6.980000 (  6.987534)
a to zz: switch_calls                         4.750000   0.000000   4.750000 (  4.742448) 
```

我观察到基于 const name 的方法调度比使用 case 语句更快，但是，如果在确定方法名称时涉及字符串操作，则确定方法名称的成本比实际的方法调用成本要高，有效地使这些选项（2 和 3 ) 比选项 4 慢。此外，选项 2 和 3 之间的差异可以忽略不计。

为了使扫描仪安全，我更喜欢为方法添加一些前缀，因为没有它，可以制作 XML 来调用一些我不希望发生的方法。但是确定方法名称的成本是不可忽略的。

你怎么写这些扫描仪？我想知道以下问题的答案：

1.  除了以上还有什么好的方案吗？
2.  如果不是，您选择哪种（case-when 或 method dispatch）方案？
3.  如果我不计算方法名称，它会更快。有什么好方法可以安全地进行方法调度吗？（例如，通过限制要调用的节点名称。）

## 基准脚本

```
# Benchmark to measure the difference of
# use of case statement and message passing

require 'benchmark'

def bench(title, tobj, count)
  Benchmark.bmbm do |b|
    b.report "#{title}: method_calls (with const name)" do
      (1..count).each do |c|
        tobj.run_send_using_const
      end
    end

    b.report "#{title}: method_calls (with dynamic name) 1" do
      (1..count).each do |c|
        tobj.run_send_using_dynamic_1
      end
    end

    b.report "#{title}: method_calls (with dynamic name) 2" do
      (1..count).each do |c|
        tobj.run_send_using_dynamic_2
      end
    end

    b.report "#{title}: switch_calls" do
      (1..count).each do |c|
        tobj.run_switch
      end
    end
  end
end

class Switcher
  def initialize(names)
    @method_names = { }
    @names = names
    names.each do |n|
      @method_names[n] = "dynamic_#{n}"
      @@n = n
      class << self
        mname = "dynamic_#{@@n}"
        define_method(mname) do
          mname
        end
      end
    end

    swst = ""
    names.each do |n|
      swst << "when \"#{n}\" then dynamic_#{n}\n"
    end

    st = "
    def run_switch_each(n)
      case n
#{swst}
      end
    end
    "
    eval(st)
  end

  def run_send_using_const
    @method_names.each_value do |n|
      self.send n
    end
  end

  def run_send_using_dynamic_1
    @names.each do |n|
      self.send "dynamic_#{n}"
    end
  end

  def run_send_using_dynamic_2
    @names.each do |n|
      self.send "dynamic_" + n
    end
  end

  def run_switch
    @names.each do |n|
      run_switch_each(n)
    end
  end

end

sw1 = Switcher.new('a'..'z')
sw2 = Switcher.new('a'..'zz')

bench("a to z", sw1, 10000)
bench("a to zz", sw2, 10000) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:30:51.973

我相信这是一个过早优化的例子。

> 但是确定方法名称的成本是不可忽略的。

与什么相比是不可忽视的？这里的方法有不同的性能数字，但是调度一个节点所花费的时间是否与解析节点（使用 Nokogiri 等）、构造专门的节点对象以及用它做任何你需要的事情所花费的时间相当？

我相信不会。我没有基准来证明该声明（您需要实际的代码），但是字符串连接与字符串插值实际上在结果中产生了显着差异（动态 1 与动态 2）这一事实是一个很好的指标，表明您是测量一些微不足道的东西。

或者每次调度添加一个字符串连接会使结果时间增加 2-2.5 倍（const vs dynamic2）。

# css - Bootstrap 中的响应式导航栏

> ID：11339528
> 
> 赞同：2
> 
> 时间：2012-07-05T07:19:30.283
> 
> 标签：css, twitter-bootstrap, responsive-design

我目前在我的网站上使用引导程序，并试图利用响应功能，其中之一是较小屏幕/设备上的导航栏按钮。现在我对导航栏进行了一些更改，其中之一是将其居中而不是默认的向左浮动，它看起来像这样：

```
 <div class="navbar navbar-fixed-top center">
  <div class="navbar-inner">
    <div class="container-fluid">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </a>

    <div class="nav-collapse">
      <ul class="nav">

      <li class =active ><a href="/">Home</a></li>

       <li class="dropdown" id="menu">
         <a class="dropdown-toggle" data-toggle="dropdown" href="#menu">Our Services<b class="caret"></b></a>
         <ul class="dropdown-menu">
         <li><a href="/our_services/registeredcare">Registered Care</a></a></li>
         <li><a href="/our_services/supportedliving">Supported Living</a></a></li>
         <li><a href="/our_services/vocationalservices">Vocational Services</a></a></li>
         <li><a href="/our_services/outreach">Outreach Support</a></a></li>
         <li><a href="/our_services/dayactivities">Day Activities</a></a></li>
         <li><a href="/our_services/therapeuticservices">Therapeutic Services</a></a></li>

        </ul>
</li>

        <li class="dropdown" id="menu1">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#menu1">Our Homes<b  class="caret"></b></a>
         <ul class="dropdown-menu">
        <li><a href="/our_homes/tynewydd">Ty Newydd</a></a></li>
         <li><a href="/our_homes/sandpiper">Sandpiper</a></a></li>
        <li><a href="/our_homes/woodside">Woodside</a></a></li>

        </ul>
        </li>

        <li class="dropdown" id="menu2">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#menu2">Our Team<b class="caret"></b></a>
        <ul class="dropdown-menu">
        <li><a href="/our_team">Our Team</a></a></li>
        <li><a href="/our_team/staff_vacancies">Staff Vacancies</a></a></li>

        </ul>
        </li>

        <li class = ><a href="/gallery">Gallery</a></li>
        <li class = ><a href="/faq">FAQ</a></li>
         <li class = ><a href="/news">News</a></li>

       <li class="dropdown" id="menu4">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#menu4">Feedback<b class="caret"></b></a>
        <ul class="dropdown-menu">
        <li><a href="/feedback/quality_report">Quality Reports</a></a></li>
        <li><a href="/feedback/care_standards">Care Standards</a></a></li>
        <li><a href="/feedback/testimonials">Testimonials</a></a></li>

        </ul>
        </li>

        <li class = ><a href="/contact">Contact Us</a></li>

        <li class="dropdown" id="menu3">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#menu3">Login<b class="caret"></b></a>
        <ul class="dropdown-menu">
    <div id="loginbox">

        <form accept-charset="UTF-8" action="/users/sign_in" class="new_user" id="new_user" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="5174LhGldMFczTwLf9sB+I5NKs3I0rLxGoA6xq1GKKs=" /></div>
        <div><label for="user_email">Email</label><br />
         <input id="user_email" name="user[email]" size="30" type="email" value="" /></div>

         <div><label for="user_password">Password</label><br />
         <input id="user_password" name="user[password]" size="30" type="password" /></div>

          <div><input name="user[remember_me]" type="hidden" value="0" /><input id="user_remember_me" name="user[remember_me]" type="checkbox" value="1" /> <label for="user_remember_me">Remember me</label></div>

         <div><input name="commit" type="submit" value="Sign in" /></div>
         </form>
         </div>

          </ul>
         </li>
         </div>

      </div>

    </ul>
   </div>
   </div>
   </div> 
```

对于一个活生生的例子，你可以访问

```
 http://46.32.253.11/ . 
```

我猜是因为我已将导航栏中的所有内容居中，然后它已进入 nav.collapse，但我不确定如何让它以默认方式运行而不影响我的导航栏。我想要的是让所有链接在导航栏按钮内向左对齐，而不是像现在一样全部在中心

虽然关于导航折叠的主题，是否有人知道自定义它的任何方法，例如列出所有标题，然后可能单击以显示所有子标题？只是一个想法。无论如何，如果有人可以提供任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:45:14.000

使用媒体查询应用您的覆盖

```
@media (min-width: 768px) {
  .navbar.center {
    ...
  }
} 
```

导航栏将从 768px 及之后居中。

# java - 连接到 Facebook 的 Java 桌面应用程序

> ID：11339531
> 
> 赞同：-2
> 
> 时间：2012-07-05T07:19:47.813
> 
> 标签：java, facebook-java-api, facebook-java-sdk

我必须开发一个连接到 Facebook 并允许我登录并与我的朋友聊天的 Java 应用程序。我在互联网上做了很多研究，但我找不到方法，所以请有人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:26:33.030

[http://code.google.com/p/facebook-java-api/](http://code.google.com/p/facebook-java-api/)

[http://blog.theunical.com/facebook-integration/facebook-java-api-example-to-publish-on-wall/](http://blog.theunical.com/facebook-integration/facebook-java-api-example-to-publish-on-wall/)

尝试输入像“facebook api java example”这样的谷歌词......

# java - 无法从客户端进行 JAX-RPC Web 服务调用

> ID：11339532
> 
> 赞同：0
> 
> 时间：2012-07-05T07:19:50.537
> 
> 标签：java

我正在使用 Jboss 5.0.1 服务器并尝试对`JAX-RPC`我们应用程序中的 EJB 之一进行 Web 服务调用。我下载并复制了以下三个罐子`JBOSS_HOME\server\default\lib`到`JBOSS_HOME\lib\endorsed`

*   jboss-jaxrpc.jar
*   jboss-jaxws.jar
*   jboss-saaj.jar

我无法进行 Web 服务客户端调用，当引发此异常时：

```
**11:54:33,995 ERROR [CommonClient] Exception caught while (preparing for) performing the invocation:
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
        at java.lang.String.substring(String.java:1937)
        at org.jboss.ws.core.client.EndpointInfo.lowerCaseProtocol(EndpointInfo.java:114)
        at org.jboss.ws.core.client.EndpointInfo.<init>(EndpointInfo.java:49)
        at org.jboss.ws.core.CommonClient.invoke(CommonClient.java:335)
        at org.jboss.ws.core.jaxrpc.client.CallImpl.invokeInternal(CallImpl.java:516)
        at org.jboss.ws.core.jaxrpc.client.CallImpl.invoke(CallImpl.java:275)
        at org.jboss.ws.core.jaxrpc.client.PortProxy.invoke(PortProxy.java:154)
        at $Proxy106.checkPlanData(Unknown Source)
        at org.apache.jsp.index_jsp._jspService(index_jsp.java:88)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:601)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Thread.java:662)
11:54:34,307 ERROR [STDERR] java.rmi.RemoteException: Call invocation failed; nested exception is:
        java.lang.StringIndexOutOfBoundsException: String index out of range: -1
11:54:34,323 ERROR [STDERR]     at org.jboss.ws.core.jaxrpc.client.CallImpl.invokeInternal(CallImpl.java:535)
11:54:34,323 ERROR [STDERR]     at org.jboss.ws.core.jaxrpc.client.CallImpl.invoke(CallImpl.java:275)
11:54:34,338 ERROR [STDERR]     at org.jboss.ws.core.jaxrpc.client.PortProxy.invoke(PortProxy.java:154)
11:54:34,338 ERROR [STDERR]     at $Proxy106.checkPlanData(Unknown Source)
11:54:34,354 ERROR [STDERR]     at org.apache.jsp.index_jsp._jspService(index_jsp.java:88)
11:54:34,354 ERROR [STDERR]     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
11:54:34,370 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
11:54:34,370 ERROR [STDERR]     at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
11:54:34,385 ERROR [STDERR]     at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
11:54:34,401 ERROR [STDERR]     at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
11:54:34,401 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
11:54:34,417 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
11:54:34,417 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
11:54:34,432 ERROR [STDERR]     at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
11:54:34,432 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
11:54:34,448 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
11:54:34,448 ERROR [STDERR]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
11:54:34,463 ERROR [STDERR]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
11:54:34,463 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
11:54:34,479 ERROR [STDERR]     at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
11:54:34,495 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
11:54:34,495 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
11:54:34,510 ERROR [STDERR]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
11:54:34,510 ERROR [STDERR]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
11:54:34,526 ERROR [STDERR]     at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
11:54:34,526 ERROR [STDERR]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
11:54:34,542 ERROR [STDERR]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
11:54:34,542 ERROR [STDERR]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
11:54:34,557 ERROR [STDERR]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:601)
11:54:34,557 ERROR [STDERR]     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
11:54:34,573 ERROR [STDERR]     at java.lang.Thread.run(Thread.java:662)
11:54:34,588 ERROR [STDERR] Caused by: java.lang.StringIndexOutOfBoundsException: String index out of range: -1
11:54:34,588 ERROR [STDERR]     at java.lang.String.substring(String.java:1937)
11:54:34,604 ERROR [STDERR]     at org.jboss.ws.core.client.EndpointInfo.lowerCaseProtocol(EndpointInfo.java:114)
11:54:34,604 ERROR [STDERR]     at org.jboss.ws.core.client.EndpointInfo.<init>(EndpointInfo.java:49)
11:54:34,620 ERROR [STDERR]     at org.jboss.ws.core.CommonClient.invoke(CommonClient.java:335)
11:54:34,620 ERROR [STDERR]     at org.jboss.ws.core.jaxrpc.client.CallImpl.invokeInternal(CallImpl.java:516)
11:54:34,635 ERROR [STDERR]     ... 30 more** 
```

我不知道可能是什么问题，请帮助我客户端代码如下：

```
<%@page import="java.util.Hashtable"%>   
<%@page import="javax.naming.*,com.test.*,javax.xml.rpc.*,stub.*"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>                                              
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>JSP
Page</title></head><body>
             <h1>Hello World!</h1>
             <%
              try{
                 InitialContext ic = new InitialContext( );
                  CarrierWS service = (CarrierWS)ic.lookup("java:comp/env/service/CarrierWS");            
                  out.println("======================="+service.getCarrierWSSEIPort().checkPlanData("2007-01-01"));

              }
              catch(Exception e)
                                {
                   out.println("Exception occurred : " + e.getMessage());
                    e.printStackTrace();
                } 
                 %>
               </body>
           </html> 
```

提前致谢

森提尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:45:44.793

你的配置`endpoint`正确吗？

该方法的内容`EndpointInfo.lowerCaseProtocol`表明您弄错了。

```
private String lowerCaseProtocol(String targetAddress) {
    int colonIndex = targetAddress.indexOf(':');
    String lowerCasedProtocol = targetAddress.substring(0, colonIndex).toLowerCase();
    return lowerCasedProtocol + targetAddress.substring(colonIndex);
} 
```

您的方法中似乎没有“：”，`endpoint`这意味着您`endIndex`的`substring`方法小于您的`beginIndex`，因此`StringIndexOutOfBoundsException`

检查您的配置，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:03:08.390

您得到的错误：`StringIndexOutOfBoundsException`意味着您试图在代码中的某处获取集合中的项目，但该集合没有您试图获取的索引。

因此，例如：

```
//lets say myList contains 10 items
List myList = new ArrayList();

myList.get(10) // will throw StringIndexOutOfBoundsException since there is no index 10 
```

由于在 jsp 代码中我没有看到任何集合的使用，我猜问题出在服务/EJB 本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:23:04.567

我遇到了这个问题，问题是我在认可文件夹中复制了错误版本的 jars。

解决方法是复制

```
 jboss-common-core.jar
                   jboss-logging-spi.jar
                   jbossws-native-jaxrpc.jar
                   jbossws-native-jaxws.jar
                   jbossws-native-jaxws-ext.jar
                   jbossws-native-saaj.jar 
```

从 \client 文件夹到背书文件夹。这解决了我的问题

# linux - 删除包含数千个文件的大目录的最佳和最快方法是什么（在 ubuntu 中）

> ID：11339534
> 
> 赞同：7
> 
> 时间：2012-07-05T07:19:51.823
> 
> 标签：linux, bash

据我所知，命令如

```
find <dir> -type f -exec rm {} \; 
```

不是删除大量文件（总文件，包括子文件夹）的最佳变体。如果您有少量文件，它会很好用，但如果您的子文件夹中有 10 多个 mlns 文件，它可能会挂起服务器。

有谁知道任何特定的linux命令来解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T07:23:06.093

这可能看起来很奇怪，但是：

```
$ rm -rf <dir> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T10:52:48.670

这是一个示例 bash 脚本：

```
#!/bin/bash

local LOCKFILE=/tmp/rmHugeNumberOfFiles.lock

# this process gets ultra-low priority
ionice -c2 -n7 -p $$ > /dev/null
if [ $? ]; then
    echo "Could not set disk IO priority. Exiting..."
    exit
fi
renice +19 -p $$ > /dev/null
if [ $? ]; then
    echo "Could not renice process. Exiting..."
    exit
fi

# check if there's an instance running already. If so--exit
if [ -e ${LOCKFILE} ] && kill -0 `cat ${LOCKFILE}`; then
    echo "An instance of this script is already running."
    exit
fi

# make sure the lockfile is removed when we exit. Then: claim the lock
trap "command rm -f -- $LOCKFILE; exit" INT TERM EXIT
echo $$ > $LOCKFILE

# also create a tempfile, and make sure that's removed too upon exit
tmp=$(tempfile) || exit
trap "command rm -f -- '$tmp'" INT TERM EXIT

# ----------------------------------------
# option 1
# ----------------------------------------
# find your specific files
find "$1" -type f [INSERT SPECIFIC SEARCH PATTERN HERE] > "$tmp"
cat $tmp | rm 

# ----------------------------------------
# option 2
# ----------------------------------------
command rm -r "$1"

# remove the lockfile, tempfile
command rm -f -- "$tmp" $LOCKFILE 
```

该脚本首先将自己的进程优先级和磁盘IO 优先级设置为非常低的值，以确保其他正在运行的进程尽可能不受影响。

然后它确保它是唯一运行的此类进程。

脚本的核心完全取决于您的喜好。如果您`rm -r`确定可以随意删除整个目录（选项 2），则可以使用，或者您可以`find`用于更具体的文件删除（选项 1，可能使用命令行选项“$2”和 onw。为方便起见）。

在上面的实现中，选项 1 ( `find`) 首先将所有内容输出到一个临时文件，因此该`rm`函数仅被调用*一次，*而不是在`find`. 当文件数量确实很大时，这可以节省大量时间。不利的一面是，临时文件的大小可能会成为一个问题，但这仅在您要删除数十亿个文件时才有可能，另外，由于 diskIO 的优先级如此之低，因此使用一个临时文件后跟一个单个文件`rm`可能总共是比使用`find (...) -exec rm {} \;`选项慢。与往常一样，您应该进行一些试验，看看最适合您的需求。

> 编辑：根据 user946850 的建议，您也可以跳过整个临时文件并使用`find (...) -print0 | xargs -0 rm`. 这具有更大的内存占用，因为所有匹配文件的所有完整路径都将插入 RAM 中，直到`find`命令完全完成。好的一面是：由于写入临时文件，没有额外的文件 IO。选择哪一个取决于您的用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:22:55.887

（`-r`递归）开关也删除目录下的所有内容 - 包括子目录。（您的命令不会删除目录，只会删除文件。）

您还可以加快`find`方法：

```
find -type f -print0 | xargs -0 rm 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T17:59:11.787

如果您有相当现代的 find 版本（4.2.3 或更高版本），您可以使用 -delete 标志。

```
find <dir> -type f -delete 
```

`\+`如果您有 4.2.12 或更高版本，则可以通过-exec 修饰符利用 xargs 样式的命令行堆栈。这样您就不会`/bin/rm`为每个文件运行单独的副本。

```
find <dir> -type f -exec rm {} \+ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-15T14:29:32.130

前面的命令很好。

`rm -rf directory/`也可以更快地处理一个文件夹中的数十亿个文件。我试过了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-23T15:26:27.467

我尝试了这些命令中的每一个，但我遇到的问题是删除进程正在锁定磁盘，并且由于没有其他进程可以访问它，因此有大量进程试图访问磁盘，使问题变得更糟。运行“iotop”并查看您的进程正在使用多少磁盘 IO。

这是解决我的问题的python脚本。它一次删除 500 个文件，然后需要 2 秒的休息时间让其他进程处理它们的业务，然后继续。

```
import os, os.path
import time

for root, dirs, files in os.walk('/dir/to/delete/files'):
    i = 0
    file_num = 0
    for f in files:
        fullpath = os.path.join(root, f)
        i = i + 1
        file_num = file_num + 1
        os.remove(fullpath)
        if i%500 == 1:
            time.sleep(2)
            print "Deleted %i files" % file_num 
```

希望这可以帮助一些人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-08T13:19:14.913

如果您需要处理非常大的文件树（在我的情况下是许多 perforce 分支）上的空间限制问题，有时**在运行**查找和删除过程时会被挂起 -

这是我每天安排的一个脚本，用于**查找具有特定文件**（“ChangesLog.txt”）的所有目录，然后对找到的所有**超过2 天的目录进行****排序**，并删除第一个匹配的目录（每个安排都可能有一个新的匹配):

 **```
bash -c "echo @echo Creating Cleanup_Branch.cmd on %COMPUTERNAME% - %~dp0 > Cleanup_Branch.cmd"
bash -c "echo -n 'bash -c \"find ' >> Cleanup_Branch.cmd"
rm -f dirToDelete.txt
rem cd. > dirToDelete.txt 
bash -c "find .. -maxdepth 9 -regex ".+ChangesLog.txt" -exec echo {} >> dirToDelete.txt \; & pid=$!; sleep 100; kill $pid "
sed -e 's/\(.*\)\/.*/\1/' -e 's/^./"&/;s/.$/&" /' dirToDelete.txt | tr '\n' ' ' >> Cleanup_Branch.cmd
bash -c "echo -n '-maxdepth 0 -type d -mtime +2 | xargs -r ls -trd | head -n1 | xargs -t rm -Rf' >> Cleanup_Branch.cmd"
bash -c 'echo -n \" >> Cleanup_Branch.cmd'
call Cleanup_Branch.cmd 
```

注意要求：

1.  仅删除带有“ChangesLog.txt”的目录，因为不应删除其他旧目录。
2.  **直接在 cygwin**中调用操作系统命令，否则它使用 Windows 默认命令。
3.  将要删除的目录收集到外部文本文件中，以**保存查找结果**，因为有时查找过程已挂起。
4.  **通过使用 & 在 100 秒后被杀死的后台进程**设置查找进程的超时。
5.  首先对最旧的目录进行排序，以获得删除优先级。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-21T01:52:47.660

如果您想尽快删除大量文件，请尝试以下操作：

`find . -type f -print0 | xargs -P 0 -0 rm -f`

请注意，该`-P`选项将`xargs`尽可能多地使用进程。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-01T16:03:56.420

```
mv large_folder /tmp/.
sudo reboot 
```

调用 mv 很快——它只是修改标签。系统重新启动将以最快的方式清除 /tmp 文件夹（再次挂载它？）。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-08-29T09:35:23.640

您可以创建一个空目录并将其 RSYNC 到您需要清空的目录。您将避免超时和内存不足的问题**

# android - Android Rest 客户端到 Delphi XE2 Datasnap Rest 服务器

> ID：11339536
> 
> 赞同：1
> 
> 时间：2012-07-05T07:19:54.840
> 
> 标签：android, delphi, rest, delphi-xe2, datasnap

我在 Stack Overflow 上找到了很多示例，但我不知道从哪里开始，因为我有一个特定的先决条件：

我的 Delphi Datasnap Rest 服务器正在使用`ZLibCompression`RSA 加密（in `TTransportFilterCollection`of `DSHTTPWebDispatcher`）。是否有可以处理这些的 Android RESTful API？任何已经实现的示例？

我找到了这个线程[Android REST 客户端，Sample?](https://stackoverflow.com/questions/8267928/android-rest-client-sample) 作为一个很好的起点，轻量级和格式良好的客户端都出现了，但这对我来说足够了吗？

提前感谢您可以指出我的任何提示、示例或库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:47:29.667

您可以使用[Android Rest-Client](https://github.com/TylerSmithNet/RESTclient-Android)将数据发送到网络服务

[在使用 HttpURLConnection 将调用正文添加到 POST](https://stackoverflow.com/questions/11326289/adding-body-of-call-to-post-using-httpurlconnection/11326578#11326578)的帖子中查看我的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:14:44.403

我刚刚使用了来自 Danasnap 服务器`TDSProxyGenerator`组件 ( `http://yourserver:port/proxy/java_android.zip`) 的代理生成器，并将此代码添加到我的 android 项目中......

我不得不搜索`DSRESTSSLFactory.java`不是由代理生成的文件（但需要！！），我在 embarcadero 的演示中找到它，从那时起，通信完全处理，所有可访问的程序都被公布，真的很简单使用...

# windows-8 - 是否可以从非 Metro 应用程序中使用 WinRT？

> ID：11339540
> 
> 赞同：2
> 
> 时间：2012-07-05T07:20:01.143
> 
> 标签：windows-8, desktop-application, windows-runtime

我在网上看到的演示和文章讨论了带有 Metro 风格应用程序的 Windows 运行时。是否可以将 API 与非 Metro 应用程序一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:49:19.983

刚刚在 Jeffrey Richter 的[博客](http://www.wintellect.com/cs/blogs/jeffreyr/archive/2011/09/20/using-the-windows-runtime-from-a-non-metro-application.aspx)上找到了一个方法，酷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:57:00.303

[真正的原生 WinRT 开发 -](http://www.interact-sw.co.uk/iangblog/2011/09/16/real-native-winrt)

# scheme - 为什么延续没有有用的数量？

> ID：11339541
> 
> 赞同：5
> 
> 时间：2012-07-05T07:20:02.547
> 
> 标签：scheme, racket, continuations

考虑以下代码：

```
(call-with-values
    (lambda ()
      (call/cc (lambda (k)
         (k k k))))
  (lambda (x y)
    (procedure-arity y))) 
```

这里很明显，`call/cc`调用点的延续是右侧的 lambda，所以它的 arity 应该是 2。但是，上面的返回值（在 Racket 中）是`(arity-at-least 0)`相反的。

事实上，在 Guile 中运行类似的代码（代替`procedure-minimum-arity`）`procedure-arity`表明延续也应该允许任意数量的参数，即使很明显不是这种情况。

那么，这是为什么呢？据我所知（如果我的理解有误，请纠正我），延续的元数非常简单：它是 1 ，但在 的上下文中除外`call-with-values`，在这种情况下，无论右侧 lambda 的元数是多少。（当然，如果它是 a`case-lambda`或类似的，可能会很复杂，但不会比`(procedure-arity (case-lambda ...))`直接调用更复杂。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:01:03.350

一个更简单的查看方法是：

```
(call-with-values
  (lambda () (error 'arity "~v" (procedure-arity (call/cc (λ (k) k)))))
  (lambda (x y) (procedure-arity y))) 
```

甚至更简单：

```
(procedure-arity (call/cc (λ (x) x))) 
```

对于你的问题——很明显，在第一种情况下，延续需要两个输入，但这样的情况并不太常见。例如，它们通常是这样的示例，而“真实代码”将使用`define-values`或具有一些未知的延续，其中`call/cc`创建的延续可能具有不同的数量，具体取决于它们创建的上下文。这意味着，试图找出这些罕见的情况（其中已知延续的数量）没有多大意义。

脚注：

```
;; nonsensical, but shows the point
(define (foo) (call/cc (λ (x) x)))
(define x (foo))
(define-values [y z] (foo)) 
```

# c# - 如何使用带有 'out' 参数的 'using'

> ID：11339547
> 
> 赞同：0
> 
> 时间：2012-07-05T07:20:31.610
> 
> 标签：c#, timeout, using, httpwebresponse, out

我有这样的方法

```
private bool VerbMethod(string httpVerb, string methodName, string url, string command, string guid, out HttpWebResponse response) 
```

我这样使用

```
 HttpWebResponse response;
  if (VerbMethod("POST", "TheMethod", "http://theurl.com", "parameter1=a", theGuid, out response))
  {
    using (StreamReader sr = new StreamReader(response.GetResponseStream()))
    {
      string responseString = sr.ReadToEnd();
    } 
```

它返回一个 bool 来指定方法是否运行良好，并且在 out 参数中设置响应以获取数据。

我有时会超时，然后后续请求也会超时。我看到这个 SO [WebRequest.GetResponse 锁定了？](https://stackoverflow.com/questions/1386628/webrequest-getresponse-locks-up)

它推荐`using`关键字。问题是，使用上述方法签名我不知道该怎么做。

*   我应该在finally中手动调用dispose吗？
*   有没有办法仍然使用`using`参数`out`？
*   重写方法，所以它不会暴露`HttpWebResponse`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T07:24:00.813

> 它返回一个布尔值以指定方法是否运行良好

那是你的问题。不要使用布尔成功值：如果出现问题，则抛出异常。（或者更确切地说，让异常冒泡。）

只需更改您的方法以返回响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T07:24:05.853

如果你想使用`using`（没有例外），只需交换 bool 和响应：

```
private HttpWebResponse VerbMethod(string httpVerb, string methodName, string url, string command, string guid, out bool canExecute);

bool canExecute = false;

using(HttpWebResponse response = VerbMethod("POST", "TheMethod", "http://theurl.com", "parameter1=a", theGuid, out canExecute))
{
  if (canExecute)
  {
    ..
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:27:00.953

你也可以使用

```
 HttpWebResponse response;
    if (VerbMethod("POST", "TheMethod", "http://theurl.com", "parameter1=a", theGuid, out response))
    {
        using (response)
        {
            using (System.IO.StreamReader sr = new System.IO.StreamReader(response.GetResponseStream()))
            {
                string responseString = sr.ReadToEnd();
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:27:35.247

您可以添加另一个`using`响应：

```
HttpWebResponse response; 
if (VerbMethod("POST", "TheMethod", "http://theurl.com", "parameter1=a", theGuid,
   out response)) 
{ 
  using(response)
  {
    using (StreamReader sr = new StreamReader(response.GetResponseStream())) 
    { 
      string responseString = sr.ReadToEnd(); 
    } 
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T07:28:01.300

你*可以*这样做：

```
private bool VerbMethod(string httpVerb, string methodName, string url, 
  string command, string guid, out HttpWebResponse response) {}

HttpWebResponse response = null;

if(VerbMethod(httpVerb, methodName, url, command, guid, out response) {
  using(response)
  {
    using (StreamReader sr = new StreamReader(response.GetResponseStream())) {
    }
  }
} 
```

该`using`语句不要求其中的表达式是`new`对象或方法返回 - 任何表达式都可以。

但是-通常在您调用之前不会触发请求，因此除了确认已创建对象之外，`GetResponseStream()`我看不到您的返回实际上正在做任何事情-并且对运行时进行单元测试没有意义（！）。`bool`因此，最好的办法是让该方法返回响应并将其放入`using`。我可以从其他答案中看出我并不孤单。

然而，同样的论点可以用来证明我在上面列出的改变是合理的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T07:24:54.610

`out`在函数的开头立即为参数分配默认值，并继续使用`using`你已经使用过的参数。

# cordova - 从 C2DM 到 GCM

> ID：11339551
> 
> 赞同：1
> 
> 时间：2012-07-05T07:20:41.047
> 
> 标签：cordova, phonegap-plugins, google-cloud-messaging

我们想通过 Phonegap 框架开始使用 android GCM。

有人将 GCM 与 Phonegap 结合使用吗？还是有人为此创建了插件？

# activex - ActiveX 注册

> ID：11339552
> 
> 赞同：0
> 
> 时间：2012-07-05T07:20:46.393
> 
> 标签：activex

我正在开发一个 ActiveX，其中相同的代码库应该用于两个不同的 ActiveX，这意味着，我有一个由多个 DLL 构建的单一解决方案。当我为创建 ActiveX A 的 CAB 构建解决方案时，我将 DLL 类 ID 更改为特定的，当我为第二个 ActiveX 创建 CAB 时，我将类 ID 更改为其他内容。

我需要两个 ActiveX 才能在同一台机器上运行。基本上，它工作正常，除了在某些情况下我运行不同版本的 ActiveX（ActiveX A 来自比 ActiveX B 更旧的代码版本）存在不希望的行为。看起来 ActiveX 从 ActiveX B 加载了一些 DLL（来自不同的代码版本）。

抱歉，描述很长，但最后一个重要信息，因为两个 ActiveX 都来自相同的代码，所以我有相同的类名，它暴露给调用 ActiveX 的 javascript。在注册表中，除了以下项（NetworkInterface 是公开的类）之外，所有键都是完全分离的：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MyActiveX.NetworkInterface\CLSID]
@="{31ED2205-F6AE-4133-AD30-60CA2783ADA6}" 
```

安装 ActiveX 时，我看到此条目具有正确的类 ID，但在安装第二个 ActiveX 时，该密钥被第二个 ActiveX 覆盖。

是否有可能实现我想要实现的目标？有没有办法让同一个班级注册不同的班级ID？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T09:10:18.743

@Lior，您自己用这句话回答了您的问题：“用不同的班级ID注册相同的班级”。事实上，我们正在谈论 ProgID 或程序标识符 - 在您的情况下为 MyActiveX.NetworkInterface。

ProgID 只有一个专用的注册表配置单元 - HKEY_LOCAL_MACHINE\SOFTWARE\Classes\，如果您在客户端代码中使用 ProgID 来实例化组件，则只能为一个 ActiveX 组件执行此操作。当您使用 ProgID 创建实例时，使用该注册表配置单元确定相应的 CLSID，并使用实现该类的可执行 DLL/OCX/EXE。对于后一种情况，相应的注册表配置单元如下所示：

HKEY_CLASSES_ROOT\Wow6432Node\Clsid{6935DB93-21E8-4ccc-BEB9-9FE3C77A297A}\InProcServer32

在这种情况下可以做的最好的事情是为您的两个 ActiveX 组件使用两个不同的 ProgID。即使您对主类使用相同的源代码，您也可以在两个不同的项目中“按原样”使用它们，这些项目用于编译具有不同 ProgID 的组件。看来，所有开发环境（您可能正在使用的 VB6）都允许您这样做。

可以在本文中找到有关此的更多信息：[http ://www.vbaccelerator.com/progid.htm](http://www.vbaccelerator.com/progid.htm)

我们的 ActiveX 组件也有同样的问题，我们的经验告诉我们，拥有不同的 ProgID 是最好的选择。即使您发布下一个版本，也要更改 ProgID。这将允许两个版本在同一个操作系统中共存而没有任何问题，并且开发人员可以逐步升级现有项目。

===

作为对您的问题的回答，如果您无法更改 ProgID，我知道如何尝试解决您的问题。据我所知，您可以直接使用其 CLSID 激活 ActiveX，并且不同的开发环境为此使用不同的技术。我没有你的项目，但如果你使用 JavaScript，你可以试试这篇文章中的方法：

[http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/08652e9e-7deb-40a3-8c1a-f9becdcbf56e/](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/08652e9e-7deb-40a3-8c1a-f9becdcbf56e/)

简而言之，您不需要使用如下调用来创建 ActiveX 对象：

```
myobject = new ActiveXObject("SAMPLEACTIVEX.sampleActiveXCtrl.1"); 
```

您需要使用 OBJECT 标记将两个 ActiveX 控件放在页面上，并使用网页上的对象名称（id）调用对象的方法。如果您查看 HTML OBJECT 标记的示例，您将看到如下内容：

如您所见，您可以使用指定的 ID 来访问您确切需要的对象的成员。许多这样的例子已经在 SO - 这里是其中之一：

[javascript：调用 ActiveX 对象时“对象不支持此属性或方法”](https://stackoverflow.com/questions/1458578/javascript-object-doesnt-support-this-property-or-method-when-activex-object)

# javascript - Three.js - 纹理大小的烦恼

> ID：11339557
> 
> 赞同：0
> 
> 时间：2012-07-05T07:20:57.370
> 
> 标签：javascript, three.js

更少的文字，更多的代码 =)

```
var objects = [];

var camera, scene, renderer;

document.addEventListener( 'mousedown', onDocumentMouseDown, false );

init();
render();

function onDocumentMouseDown( event ) {
    event.preventDefault();
    var vector = new THREE.Vector3( ( event.clientX / window.innerWidth ) * 2 - 1, - ( event.clientY / window.innerHeight ) * 2 + 1, 0.5 );
    projector.unprojectVector( vector, camera );
    var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );
    var intersects = ray.intersectObjects( objects );
    if ( intersects.length > 0 ) {
        console.log(intersects[ 0 ].object);
    }
}

function init() {

    container = document.getElementById( 'container' );
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera( 90, window.innerWidth / window.innerHeight, 1, 1100 );
    camera.position.z = 50;
    scene.add( camera );

    var particle = new THREE.Particle( new THREE.ParticleBasicMaterial( { map: THREE.ImageUtils.loadTexture( "img/satellite.png" ) } ) );
    objects.push( particle );
    //particle.scale.x = particle.scale.y = 0.25
    scene.add( particle );

    projector = new THREE.Projector();
    renderer = new THREE.CanvasRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );
    container.appendChild( renderer.domElement );
}

function render() {
    camera.lookAt( scene.position );
    renderer.render( scene, camera );
} 
```

结果，我们得到了带有纹理的可点击粒子。但我不明白几件事：

1.  为什么粒子的“可点击”区域如此之小？仅当我单击粒子中间时它才有效。

2.  为什么那个粒子这么大？纹理是这个![16×16](../Images/226a1bcaafb7e128967faf972c8100eb.png).png 文件，粒子比 16×16 大得多。我该如何解决？是的，我知道particle.scale，这会使粒子看起来更小。但是，粒子 woukd 的“可点击”区域也变小了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T19:52:10.837

我知道这是一个老问题，但我今天遇到了同样的问题，我发现这个问题没有答案，经过一些解决方法后，我找到了解决方案。

解决方案是创建 2 个粒子，一个是一个简单的粒子，它绘制一个几何体（矩形或弧形），它是一个 ParticleCanvasMaterial，然后是在其上显示图像的粒子。

因此，您可以使用 ParticleCanvasMaterial 跟踪交叉点并将另一个粒子显示为虚拟对象，其唯一目的是在 3D 场景上显示图像。

一点代码：

```
var programFill = function (context) {
                context.beginPath();
                context.rect(-0.5, -0.38, 1, 1);
                //context.fill(); 
            }

            //creating particle to intersect with.
            var p = new THREE.ParticleCanvasMaterial({ program: programFill, transparent: true }); 
            var particle = new THREE.Particle(p);
            particle.scale.set(23, 23);
            //use same position for both particle and imgParticle
            particle.position.set(200, 300, 200);

            //creating particle that displays image.
            var imgTexture = THREE.ImageUtils.loadTexture('images/image.png');
            var p2 = new THREE.ParticleBasicMaterial({
                map: imgTexture
                , size: 1
            });

            var imgParticle = new THREE.Particle(p2);
            imgParticle.scale.x = 0.5;
            imgParticle.scale.y = 0.5; 
            imgParticle.position.set(200, 300, 200); 
```

# android - 将 cp2102 或 FTDI 连接到 Android 4.x

> ID：11339560
> 
> 赞同：0
> 
> 时间：2012-07-05T07:21:02.777
> 
> 标签：android

我想将带有 cp2102 的自定义设备连接到 Android 平板电脑。我以 VCP 模式连接它（使用 PID EA60）并使用 JavaComm 找到它，

```
@SuppressWarnings("unchecked")
Enumeration <CommPortIdentifier> ports = CommPortIdentifier.getPortIdentifiers();

while (ports.hasMoreElements())
{
    final CommPortIdentifier port = ports.nextElement();
    Log.d(null, port.toString());
} 
```

但我从不进入循环。

我可以选择使用 FTDI 而不是 silabs。他们有一个通过 JNI 使用 D2xx dll 的变体。我按照他们的指南进行操作，但是当我连接 ft232r 并尝试确定连接设备的数量时，我遇到了内存崩溃（LogCat 中的信号和堆损坏消息）。当我从平板电脑上拔下设备时，相同的代码（他们的示例代码）工作得很好，返回零，这是真的。

当我将 JavaComm 与 FTDI 一起使用时，结果与 cp2102 相同：未进入循环。

我想我错过了什么或做错了什么。

如果我要使用 USB 模式而不是 VCP，我已准备好开始搜索，我只需要提示。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T15:19:03.937

这里的问题是默认情况下，Android 内核中未启用 CP210x 驱动程序。所以你要么需要在你的内核中构建这个驱动程序来获得 tty 访问和使用 JavaComm 的能力。

另一种选择是使用[USB 主机功能并通过](http://developer.android.com/guide/topics/connectivity/usb/host.html)[其 API](http://www.silabs.com/Support%20Documents/TechnicalDocs/AN571.pdf)直接访问您的 CP210x 。

# iphone - 如何在 Objective-C 中的 Twitter 中共享文本？

> ID：11339568
> 
> 赞同：0
> 
> 时间：2012-07-05T07:21:38.777
> 
> 标签：iphone, objective-c, ios, twitter

我使用 OAuthTwitterDemo，它给出了错误 [OAConsumer initWithKey:secret:]: unrecognized selector sent to instance 0x85b8dc0

我使用此方法登录...

```
if (_engine) return;
_engine = [[SA_OAuthTwitterEngine alloc] initOAuthWithDelegate: self];
_engine.consumerKey = kOAuthConsumerKey;
_engine.consumerSecret = kOAuthConsumerSecret;

UIViewController *controller = [SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine: _engine delegate: self];

if (controller) 
    [self presentModalViewController: controller animated: YES];
else {
    [_engine sendUpdate: [NSString stringWithFormat: @"Already Updated. %@", [NSDate date]]];
} 
```

但是登录不显示，它给出了一个错误......

[OAConsumer initWithKey:secret:]：无法识别的选择器发送到实例 0x85b8dc0 并导致 App 崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:21:26.977

您必须在此处插入您的 kOAuthConsumerKey 和您的 kOAuthConsumerSecret：

```
_engine.consumerKey = kOAuthConsumerKey;
_engine.consumerSecret = kOAuthConsumerSecret; 
```

如果你不这样做，它会崩溃。您收到的错误“[OAConsumer initWithKey:secret:]: unrecognized selector sent to instance 0x85b8dc0 and crash App”指向未插入的 kOAuthConsumerSecret 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:29:37.537

我使用了下面的代码，它对我来说工作正常。检查您的消费者密钥和消费者密钥。

```
if(!_engine){
        _engine = [[SA_OAuthTwitterEngine alloc] initOAuthWithDelegate:self];
        _engine.consumerKey    = kOAuthConsumerKey;
        _engine.consumerSecret = kOAuthConsumerSecret;  

    }

    UIViewController *controller =[SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:_engine delegate:self];

    if (controller)
        [self presentModalViewController:controller animated: YES]; 
```

# python - Python Pyqt4 QListWidget

> ID：11339576
> 
> 赞同：1
> 
> 时间：2012-07-05T07:22:12.840
> 
> 标签：python, indexing, pyqt4, qlistwidget

我正在研究 python 插件。我使用**PYQT4设计了我的表单**设计器设计了我的表单。

1）我使用了QListWidgets，其中m列出了一些值，如下所示：

![在此处输入图像描述](../Images/2e8202c701126483d644a39d11f649f9.png)

我的**QListWidget**的名称是**fieldsList_4**。现在，“ **ACO_43_HORSE_01** ”是 2,1,7 和 8 的父级。当用户从 2,1 ,7 和 8 中选择一个值时，我想检索它们各自的父级.在这种情况下，它是**ACO_43_HORSE_01**。

我想这样做使用来自 QListWidget 的选定值的索引。我试过了

```
idx=self.fieldsList_4.index(sel_stratum) 
```

但没有成功。如何找到**QListWidget**选定项目的索引？

2）当我从 QListWidget 中选择项目时，它们会突出显示，如下所示：

![在此处输入图像描述](../Images/8f535e250c73d9a75e303ea50ea80df7.png)

但是当我单击表单上的其他一些控件时，它们会变成这样：

![在此处输入图像描述](../Images/abea70ca74d2a5b1013056b5ca4e5570.png)

所以，我希望从 QListWidget 中选择的值保持突出显示。我该怎么做？

提前谢谢。

# java - 关于 IText 5.2.1 中的图像

> ID：11339580
> 
> 赞同：0
> 
> 时间：2012-07-05T07:22:26.850
> 
> 标签：java, itext

![在此处输入图像描述](../Images/4fd9698528cb6f4bb7463ee021060890.png)

当你放大PDF时，文字不会变形，图像也不会变形。如何使图片放大不失真，但不要矢量图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:34:35.667

您面临的问题是关于图像的 DPI。大多数 PDF 查看器以固定 dpi 绘制图像，而不管图像的 dpi。我的猜测是您使用的是 150 dpi 左右。尝试使用 dpi 值来找到适合您尝试将图像绘制到的区域和原始图像的大小。

还要确保您的原始图像对于您要覆盖的区域足够大。

# python - 我可以确定字典中的顺序吗？

> ID：11339587
> 
> 赞同：3
> 
> 时间：2012-07-05T07:23:08.083
> 
> 标签：python, dictionary, iterable-unpacking

我可以确定 Python 字典中的顺序吗？

该函数`op.GetTangent(id)`返回一个字典，其中包含与`'vl'`和关联的两个值`'vr'`。我想以懒惰的方式打开它。

```
vr, vl = op.GetTangent(id).values() 
```

我可以确定`vr`并`vl`具有正确的价值吗？或者是否存在交换它们的情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T07:26:17.277

不，您永远不应该依赖该`values`方法返回的条目的顺序。您有几个简单的选择：

*   调用`sorted`结果列表（如果可以对值进行排序）
*   调用`sorted`项目并提取值
*   用一个`collections.OrderedDict`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T07:39:48.270

```
vr, vl = map(op.GetTangent(id).get, ('vr', 'vl')) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T07:28:41.500

没有永不。

而是做

```
getbyname = lambda d, *kk: [d[k] for k in kk] 
```

并将其用作

```
vr, vl = getbyname(op.GetTangent(id), 'vr', 'vl') 
```

或者只是做

```
d = op.GetTangent(id)
vr, vl = [d[i] for i in ('vr', 'vl')] 
```

如果你只需要一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T08:19:18.633

只是为了完全避免任何疑问，我系统上的实际输出：

```
C:\Python32>python -c "print({'vr':1, 'vl':2})"
{'vr': 1, 'vl': 2}

C:\Python32>python -c "print({'vr':1, 'vl':2})"
{'vl': 2, 'vr': 1} 
```

那是运行 Python 3.2.3 并将 PYTHONHASHSEED 设置为“随机”，并且相同代码的不同运行在字典中具有不同的项目顺序。

# php - 在弹出关闭事件上更改按钮

> ID：11339589
> 
> 赞同：1
> 
> 时间：2012-07-05T07:23:17.083
> 
> 标签：php, javascript, jquery

当用户单击按钮时，我希望打开一个弹出窗口，当我单击弹出窗口中的接受按钮时，弹出窗口关闭。但是当它关​​闭时，我想更改用户单击以打开弹出窗口的按钮。我使用图像而不是按钮。请告知我该怎么做。

它对我不起作用。我想你没有得到我的问题。“我点击图像然后弹出窗口在再次接受该弹出窗口中的whaterver后打开它将显示前一个窗口，然后该图像应该改变”我应该怎么做? 我在这里向您发送更新的代码：

```
<?php
session_start();

if($_SESSION['typeimagedis']=='image/gif') 
        $namedis=$_SESSION['typeimagenamedis'];
        else
    $namedis=$_SESSION['typeimagenamedis'];

    if ($_POST['hidcropimg'] == 'hidcropimg')
{
if(file_exists('images/'.$_SESSION['typeimagenamedis']))
{
unlink('images/'.$_SESSION['typeimagenamedis']);
}
    $targ_w =$_POST['w'];$targ_h = $_POST['h'];
    $jpeg_quality = 20;

if(($_POST['typeimage'] == "image/gif"))
    {
    $src='upload/'.$_SESSION['typeimagenamedis'];
    $img_r = imagecreatefromgif($src);
    }
    if(($_POST['typeimage'] == "image/jpg")|| ($_POST['typeimage'] == "image/jpeg")|| ($_POST['typeimage'] == "image/pjpeg"))
    {
    $src='upload/'.$_SESSION['typeimagenamedis'];
    $img_r = imagecreatefromjpeg($src);
    }

    $dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

    @imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
    $targ_w,$targ_h,$_POST['w'],$_POST['h']);
$yes=1;
if(($_POST['typeimage'] == "image/gif"))
    {
    $name=$_SESSION['typeimagenamedis'];
        imagegif($dst_r,'images/'.$name,$jpeg_quality);
    }
    if(($_POST['typeimage'] == "image/jpg")|| ($_POST['typeimage'] == "image/jpeg") || ($_POST['typeimage'] == "image/pjpeg"))
    {
    $name=$_SESSION['typeimagenamedis'];
        imagejpeg($dst_r,'images/'.$name,$jpeg_quality);
    }

}

    if($_POST['subacc']=='Accept')
    {
    copy('images/'.$_SESSION['typeimagenamedis'],'crop/'.$_SESSION['typeimagenamedis']);
    setcookie ("cronimagename", $_SESSION['typeimagenamedis'], time()+60*60*24*30,'/','iphoneid.com');}
    ?>

    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
    <script type='text/javascript'>
    function closewin(){  
    window.close();
    $('#openimg',opener.document).attr('src','/v/vspfiles/photoutility/images/clickheretoTHK_off.gif');
    //alert('openimg');
    }
    </script>

<?php   

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>

        <script src="../js/jquery.min.js"></script>
        <script src="../js/jquery.Jcrop.js"></script>
        <link rel="stylesheet" href="../css/jquery.Jcrop.css" type="text/css" />
        <link rel="stylesheet" href="demo_files/demos.css" type="text/css" />
        <? if($_GET['ref']==1){?>
        <META HTTP-EQUIV="refresh" CONTENT="0; URL=http://serverl.iphoneid.com/demos/croped.php?ProductCode=<?=$_GET['ProductCode']?>">
<? }?>

    </head>

    <body>

    <div id="outer">
    <div class="jcExample" style="width: 802px;height: 1344px;">
    <table width="151" align="center" style="padding-right:65px;" > 
      <tr><td width="54"><form id="frmacc" name="frmacc" method="post" action=""><input type="submit" id="subacc" name="subacc" value="Accept" onClick="closewin();"  /></form></td><td width="238">
    <form id="frmcancel" name="frmcancel" method="post" action="crop.php?ref=1&ProductCode=<?=$_GET['ProductCode']?>" ><input type="submit" id="subcancel" name="subcancel" value="Select Again"  /></form></td></tr></table>
    <div class="article" style="position:relative; margin:70px 0 0 230px;">
<? if($_GET['ref']==1){
?>
<img  src="wait.gif" width="200px" height="75px"  >
<?
}else{ ?>
        <div style="float:left; height:530px; padding:0px 0 0 0px; width:580px;  background:url(<? if($_GET['ProductCode']=='IPBB'){?>black.png<? }elseif($_GET['ProductCode']=='IPBR'){?>red.png<? }elseif($_GET['ProductCode']=='IPBW'){?>white.png<? }?>) no-repeat; position:relative; z-index:999999999999">

        </div><!--style="padding-top:<?=$padding?>px"-->
        <div align="center"   style=" height: 148px; width: 148px; position:absolute; top:161px; left:61px; z-index:1" ><img  src="images/<?=$namedis?>" height="148" width="148" /></div>
<? }?>
    </div>
   </div>

    </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:32:49.630

要从弹出窗口更改按钮的背景图像，请使用：

```
<script>
$("#openimg1",opener.document).attr("src","/image-path-here");
</script> 
```

# php - 重定向到脸书页面

> ID：11339591
> 
> 赞同：1
> 
> 时间：2012-07-05T07:23:25.553
> 
> 标签：php, javascript, html, facebook, redirect

好吧，我的网站无法重定向到 [https://www.facebook.com/QuaFootSpa](https://www.facebook.com/QuaFootSpa)

从

[http://quafootspa.com/](http://quafootspa.com/)

我已经尝试通过标签 href 属性和 javascript 函数重定向到 facebook 页面。但它重定向到中间页面。请浏览[http://quafootspa.com/](http://quafootspa.com/)并单击顶部的 facebook 图标，这样它将重定向到显示 Go To Facebook.com 的中间页面

单击（转到 Facebook.com）将直接转到[https://www.facebook.com/QuaFootSpa](https://www.facebook.com/QuaFootSpa)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:28:39.053

`target='_top'`在href中尝试。

所以它变成

```
<a target='_top' href="https://www.facebook.com/QuaFootSpa/"> 
```

现在链接正在下框架中打开，FB不喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:31:52.357

试试`<a href='http://www.facebook.com/QuaFootSpa/' target='_blank'>Facebook Page</a>` 你的推杆`https://`，而不是`http://`

测试和工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:48:31.613

您正在使用框架，并且框架中的自身在框架中工作，因此请使用`target="_top"`

`<a href="https://www.facebook.com/QuaFootSpa/" target="_top"><img src="images/qspa/fb_btn.png"></a>`

# android - 警告对话框未在列表活动中显示 Android

> ID：11339597
> 
> 赞同：1
> 
> 时间：2012-07-05T07:24:08.617
> 
> 标签：android

我面临一个问题。我有一个扩展 listactivity 的类，它的代码是这样的：

```
public class QuestionListActivity extends ListActivity
{
//Members

private ImageButton bntRefresh;
private ImageButton bntSettings;
private ImageButton bntGetSurveys;

 /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.surveylist);

    initialize();

    currentSurveys=new SurveyList();
 }

private void initialize()
{
    bntRefresh= (ImageButton) findViewById(R.id.ibtnRefresh);
    bntRefresh.setImageResource(R.drawable.refresh);
    bntRefresh.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
        Toast.makeText(SurveyListActivity.this, "This will refresh the survey list.", Toast.LENGTH_SHORT).show();   
        }
    });

    bntSettings= (ImageButton) findViewById(R.id.ibtnSettings);
    bntSettings.setImageResource(R.drawable.settings);
    bntSettings.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(SurveyListActivity.this, "This will open the settings.", Toast.LENGTH_SHORT).show(); 
        }
    });

    bntGetSurveys= (ImageButton) findViewById(R.id.ibtnGetSurveys);
    bntGetSurveys.setImageResource(R.drawable.getsurvey);
    bntGetSurveys.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) 
        {
            AlertDialog getSurveyAlert = new AlertDialog.Builder(QuestionListActivity .this).create();
            getSurveyAlert.setTitle("Enter QR Code");
            getSurveyAlert.setMessage("Choose a source");
            getSurveyAlert.setButton("Camera", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                }
            });
            getSurveyAlert.setButton2("text", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                }
            });
        }
    });
}

    class SurveyAdapter extends ArrayAdapter<Survey>
    {
      //-- code here for adapter
    }
} 
```

在我的初始化函数中，您可以看到我有三个图像按钮，并且我已经为它们实现了 onClicklisteners。对于设置和刷新按钮，我展示了一个 Toast，它工作正常。对于获取按钮，我显示了一个对话框，进一步要求用户执行某些操作，但我面临的问题是对话框没有出现，我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:27:23.483

你忘了，写行

```
getSurveyAlert.show(); 
```

试试这个，

```
bntGetSurveys.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) 
        {
            AlertDialog getSurveyAlert = new AlertDialog.Builder(QuestionListActivity .this).create();
            getSurveyAlert.setTitle("Enter QR Code");
            getSurveyAlert.setMessage("Choose a source");
            getSurveyAlert.setButton("Camera", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                }
            });
            getSurveyAlert.setButton2("text", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                }
            });
        getSurveyAlert.create().show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:27:39.427

调用 show() 方法

```
@Override
        public void onClick(View v) 
        {
            AlertDialog getSurveyAlert = new AlertDialog.Builder(QuestionListActivity .this).create();
            getSurveyAlert.setTitle("Enter QR Code");
            getSurveyAlert.setMessage("Choose a source");
            getSurveyAlert.setButton("Camera", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                }
            });
            getSurveyAlert.setButton2("text", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                }
            });
getSurveyAlert.create().show();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:36:46.577

AlertDialog getSurveyAlert = new AlertDialog.Builder(QuestionListActivity.this).create(); // 使用这一行代替这一行

AlertDialog getSurveyAlert = new AlertDialog.Builder(QuestionListActivity .this).show();

# javascript - window.open() 仍然返回 null

> ID：11339600
> 
> 赞同：4
> 
> 时间：2012-07-05T07:24:12.517
> 
> 标签：javascript

我在 Windows 7 上使用 IE8。参考了几个线程并了解在 IE8 中，当我使用 window.open 弹出一个新窗口时，JavaScript window.open 返回 null 值。

如果我以管理员身份运行 IE 或禁用保护模式，我会看到 window.open 返回预期的对象。

我正在寻找除了上述选项之外的解决方案。对于这样一个小功能（打开一个弹出窗口），我不能要求客户以管理员身份运行 IE 或禁用保护模式。

如果有任何解决方法，请告诉我。这将是一个很大的帮助。

首先，我想确保当用户多次单击链接时只打开一个窗口，并将焦点放在已经打开的窗口上。为了实现这一点，我需要从 window.open 获取对象，以便我可以检查窗口是否已经打开并将焦点放在已经打开的窗口上。否则打开一个新窗口。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-28T11:28:50.127

对于 IE10，如果在 Internet 选项->安全->安全级别下选中启用保护模式，则 window.open 返回一个 NULL 引用对象，并且该区域的区域不同，即在我的情况下，本地文件从 Intranet 打开一个弹出窗口。

当 yoursite.com 在弹出窗口中打开 someothersite.com 即 Internet->Internet 时，即使选中了启用保护模式，window.open 也会返回一个引用对象

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T07:54:50.620

您可以使用**window.showModalDialog**作为**window.open**方法的替代或替代方法。

它比window.open 更安全。它不允许用户单击父页面。

示例用法：

```
var myFeatures = "dialogWidth:1060px;dialogHeight:550px;resizable:yes";

window.showModalDialog(url,window,myFeatures);
       //Here window is an object, no need to assign or declare. 
```

如果您需要更详细的说明，请参见[此处](http://antguider.blogspot.in/2012/06/javascript-tips-and-tricks-part-i.html)。//第五题。

# jquery-ui - 带有字符串值的Jquery ui滑块？

> ID：11339601
> 
> 赞同：9
> 
> 时间：2012-07-05T07:24:20.363
> 
> 标签：jquery-ui, slider, jquery-ui-slider

我正在使用[jQuery UI 滑块](http://jqueryui.com/demos/slider/#steps)。

这是我正在使用的代码：

```
$(function() {
        $( "#slider" ).slider({
            value:1,
            min: 0,
            max: 5,
            step: 1,
            slide: function( event, ui ) {
                $( "#amount" ).val( "$" + ui.value );
            }
        });
        $( "#amount" ).val( "$" + $( "#slider" ).slider( "value" ) );
    }); 
```

将有 5 个步骤，我想在每个步骤中显示字符串而不是数字：

```
1=very sad
2=sad
3=not so sad
4=happy
5=very happy 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-05T07:36:10.810

您可以将步骤标签放在一个数组中，然后使用滑块的值作为该数组的索引：

```
var steps = [
    "very sad",
    "sad",
    "not so sad",
    "happy",
    "very happy"
];

$(function() {
    $("#slider").slider({
        value: 1,
        min: 0,
        max: 4,
        step: 1,
        slide: function(event, ui) {
            $("#amount").val(steps[ui.value]);
        }
    });
    $("#amount").val(steps[$("#slider").slider("value")]);
}); 
```

# tinymce - 如何在 TinyMCE 中允许自定义大写标签

> ID：11339606
> 
> 赞同：1
> 
> 时间：2012-07-05T07:25:01.767
> 
> 标签：tinymce, customization

有谁知道如何允许在 TinyMCE 中使用自定义大写标签？TinyMCE 似乎不喜欢大写标签，即使它们已被声明为有效。这是我的 TinyMCE 配置：

```
tinyMCE.init({
    mode: "specific_textareas",
    theme: "advanced",
    language: "en",
    theme_advanced_toolbar_location: "top",
    theme_advanced_toolbar_align: "left",
    theme_advanced_statusbar_location: "bottom",
    theme_advanced_buttons1: "bold,italic,|,sub,sup,|,charmap,|,table,|,code",
    theme_advanced_path: false,
    theme_advanced_resizing: true,
    plugins: "fullscreen,paste,table",
    paste_auto_cleanup_on_paste : true,
    relative_urls: false,
    width: "300",
    height: "300",
    theme_advanced_resizing_min_height : "10",
    force_br_newlines : true,
    force_p_newlines : false,
    forced_root_block : '',
    entity_encoding: "raw",
    valid_elements : "B/strong,I/em,SUP/sup,SUB/sub",
    extended_valid_elements: "CUSTOM"
}) 
```

输入类似的东西

```
<CUSTOM>this is a custom tag</CUSTOM> 
```

不起作用，因为 <CUSTOM> 被剥离。

如果我将初始化脚本更改为`extended_valid_elements: "custom"`，那么它工作正常 - 我可以输入

```
<custom>this is a custom tag</custom> 
```

并且 <custom 被保留。

没有人知道任何解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:20:33.487

以下是如何做到这一点的描述（反向工作模拟）： http: [//www.codingforums.com/archive/index.php/t-148450.html](http://www.codingforums.com/archive/index.php/t-148450.html)

您应该使用 tinymce onInit 事件并将标签改回大写，使用 onSubmit 或 onSave（或者，您可以在将内容提交到任何其他合适的代码位置之前将内容改回）。要添加此处理程序，请使用[tinymce 设置配置参数](http://www.tinymce.com/wiki.php/Configuration%3asetup)

```
setup : function(ed) {

    ed.onInit.add(function(ed, evt) {
        $(ed.getBody()).find('p').addClass('headline');

        // get content from editor source html element
        var content = $(ed.id).html();

        // tagname to lowercase
        content = content.replace(/< *\/?(\w+)/g,function(w){return w.toLowerCase()});

        ed.setContent(content);
    });

    ed.onSubmit.add(function(ed, evt) {
        $(ed.getBody()).find('p').addClass('headline');

        // get content from edito
        var content = ed.getContent();

        // tagname to toUpperCase
        content = content.replace(/< *\/?(\w+)/g,function(w){return w.toUpperCase()});

        // write content to html source element (usually a textarea)
        $(ed.id).html(content );
    });
}, 
```

# sql-server - 如何实现对 varchar 类型的列的搜索

> ID：11339614
> 
> 赞同：0
> 
> 时间：2012-07-05T07:25:44.493
> 
> 标签：sql-server

我有一个表`tblJobs`，我想在其上实现对列的搜索`JobDescription`。我

我在这个表中有超过 70,000 行。我成功实现了这个，但是我使用的方式太慢了。

谁能帮我解决这个问题？我使用的 SQL 存储过程是这样的：

```
 Create Procedure Sp_SearchJobs
     (
        @SearchValue varchar(Max)
     )
    AS
BEGIN
    WITH SplitTblJobs AS
    (
        SELECT tbljobs.*, s.ListValue FROM tbljobs tbljobs
        CROSS APPLY  dbo.FN_ListToTable(' ',tbljobs.JobDescription) AS s
    )

    , WordMatchCount AS 
              (
      SELECT s.JobID,COUNT(*) AS CountOfWordMatch FROM                         dbo.FN_ListToTable('',@SearchValue) v
      INNER JOIN SplitTblJobs s ON v.ListValue=s.ListValue
      GROUP BY s.JobID
      HAVING COUNT(*)>0
               )
    , SearchLen AS 
    (
      SELECT n.Number,SUBSTRING(@SearchValue,1,n.Number) AS PartialSearchValue
      FROM Numbers n WHERE n.Number<=LEN(@SearchValue)
            )
     , MatchLen AS 
    (
      SELECT tbljobs.JobID,MAX(l.Number) MatchStartLen FROM tbljobs tbljobs
      LEFT OUTER JOIN SearchLen l ON LEFT(tbljobs.JobDescription,l.Number)=l.PartialSearchValue
      GROUP BY tbljobs.JobID
    )
      SELECT  tbljobs.*,w.CountOfWordMatch,m.MatchStartLen FROM tbljobs tbljobs
      LEFT OUTER JOIN WordMatchCount  w ON tbljobs.JobID=w.JobID
      LEFT OUTER JOIN MatchLen        m ON tbljobs.JobID=m.JobID
      WHERE w.CountOfWordMatch>0
      ORDER BY w.CountOfWordMatch DESC,m.MatchStartLen DESC,LEN(tbljobs.JobDescription) 
      DESC,tbljobs.JobDescription ASC
END 
```

这里在函数中有一个使用的函数。该表值函数的代码是这样的：

```
 Create FUNCTION [dbo].[FN_ListToTable]
  (
       @SplitOn  char(1)    
      ,@List   varchar(8000)
  )
  RETURNS TABLE

  AS  RETURN 
  (

    SELECT
      ListValue
    FROM (SELECT
              LTRIM(RTRIM(SUBSTRING(List2, number+1, CHARINDEX(@SplitOn, List2, number+1)-number - 1))) AS ListValue
              FROM (
                       SELECT @SplitOn + @List + @SplitOn AS List2
                   ) AS dt
                  INNER JOIN dbo.Numbers n ON n.Number < LEN(dt.List2)
              WHERE SUBSTRING(List2, number, 1) = @SplitOn
         ) dt2
    WHERE ListValue IS NOT NULL AND ListValue!=''); 
```

这里使用了另一个表。它的结构如下：

```
 CREATE TABLE [dbo].[Numbers]
   (
     [Number] [int] IDENTITY(1,1) NOT NULL,
         CONSTRAINT [PK_Numbers] PRIMARY KEY CLUSTERED 
         (
           [Number] ASC
         )
         WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) 
        ON [PRIMARY]
   ) ON [PRIMARY]

   GO 
```

要使此程序运行..

1.  制作上述表格
2.  制作函数
3.  制作存储过程。

我想在`tbljobs`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:28:16.627

假设您使用 SQL Server，您应该启用并使用全文搜索。

[http://msdn.microsoft.com/en-us/library/ms142571.aspx](http://msdn.microsoft.com/en-us/library/ms142571.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:29:21.843

我认为您正在尝试在这里重新发明轮子-如果您想要的只是简单的子字符串搜索，请使用 LIKE 运算符。

如果您需要更高级的搜索功能，请查看 RDBMS（我假设是 SQL 服务器）的文档以了解如何执行全文搜索。

# events - 使用 Flex 4 的 ListEvent 的 ITEM_CLICK 处理程序

> ID：11339616
> 
> 赞同：1
> 
> 时间：2012-07-05T07:25:45.510
> 
> 标签：events, flex4

如何在 flex 4 移动项目中为 spark ListEvent 设置 ITEM_CLICK。我试过这样，。

```
import spark.events.ListEvent;
fileList.addEventListener(ListEvent.ITEM_CLICK,itemDownloadHandler);

private function itemDownloadHandler(event:ListEvent):void
        {
            trace("now in item");
            // creating new FileReference
            file= new FileReference();
            // saving the clicked item to your computer
            // brings out a savedialogue

               file.save(event.itemRenderer.data.file,event.itemRenderer.data.label);

        } 
```

此代码在 Flex 3 中运行良好，但我不知道如何在 flex 4 中使用此单击事件。我也尝试过 ItemClickEvent，但我不知道如何在 ItemClickevent 中使用 event.itemRenderer。请任何人建议我一些想法来解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T14:29:06.897

在 Flex4 中，`ITEM_CLICK`List 组件不再有事件。您可以`MOUSE_CLICK`在列表中添加侦听器并在处理程序`RENDERER_ADD`中删除单击侦听器。`RENDERER_REMOVE`我使用这种方法来确保渲染器实例可以被 GCed。 [API：渲染器添加/渲染器删除](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/SkinnableDataContainer.html#event%3arendererAdd)

例如：

```
fileList.addEventListener(RendererExistenceEvent.RENDERER_ADD , onRendererAdd );
fileList.addEventListener(RendererExistenceEvent.RENDERER_REMOVE , onRendererRemove);

function onRendererAdd(event:RendererExistenceEvent){
event.renderer.addEventListener(MouseEvent.CLICK, onRendererClick );
};

function onRendererRemove(event:RendererExistenceEvent){
event.renderer.addEventListener(MouseEvent.CLICK , onRendererClick );
};

function onRendererClick(event:MouseEvent){
// your actions here ... 
trace("now in item");
}; 
```

# java - 启动数据节点时出现 Eclipse 错误的 Windows 上的 Hadoop

> ID：11339617
> 
> 赞同：0
> 
> 时间：2012-07-05T07:25:47.587
> 
> 标签：java, windows, eclipse, hadoop, cygwin

我正在关注本教程[http://v-lad.org/Tutorials/Hadoop/14%20-%20start%20up%20the%20cluster.html](http://v-lad.org/Tutorials/Hadoop/14%20-%20start%20up%20the%20cluster.html)

我在“启动集群”步骤，但是当我启动数据节点时（当我执行命令时：bin/hadoop datanode）我收到以下错误：

```
$ bin/hadoop datanode
12/07/04 23:53:53 INFO datanode.DataNode: STARTUP_MSG:
/************************************************************
STARTUP_MSG: Starting DataNode
STARTUP_MSG:   host = halgarci-WS/10.21.144.26
STARTUP_MSG:   args = []
STARTUP_MSG:   version = 0.19.1
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/core/branches/bra                             nch-0.19 -r 745977; compiled by 'ndaley' on Fri Feb 20 00:16:34 UTC 2009
************************************************************/
12/07/04 23:53:54 ERROR datanode.DataNode: java.io.IOException: Expecting a line                              not the end of stream
        at org.apache.hadoop.fs.DU.parseExecResult(DU.java:181)
        at org.apache.hadoop.util.Shell.runCommand(Shell.java:179)
        at org.apache.hadoop.util.Shell.run(Shell.java:134)
        at org.apache.hadoop.fs.DU.<init>(DU.java:53)
        at org.apache.hadoop.fs.DU.<init>(DU.java:63)
        at org.apache.hadoop.hdfs.server.datanode.FSDataset$FSVolume.<init>(FSDa                             taset.java:325)
        at org.apache.hadoop.hdfs.server.datanode.FSDataset.<init>(FSDataset.jav                             a:681)
        at org.apache.hadoop.hdfs.server.datanode.DataNode.startDataNode(DataNod                             e.java:291)
        at org.apache.hadoop.hdfs.server.datanode.DataNode.<init>(DataNode.java:                             205)
        at org.apache.hadoop.hdfs.server.datanode.DataNode.makeInstance(DataNode                             .java:1238)
        at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(D                             ataNode.java:1193)
        at org.apache.hadoop.hdfs.server.datanode.DataNode.createDataNode(DataNo                             de.java:1201)
        at org.apache.hadoop.hdfs.server.datanode.DataNode.main(DataNode.java:13                             23)

12/07/04 23:53:54 INFO datanode.DataNode: SHUTDOWN_MSG:
/************************************************************
SHUTDOWN_MSG: Shutting down DataNode at halgarci-WS/10.21.144.26
************************************************************/ 
```

关于如何解决此错误的任何建议？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:50:38.983

not sure if you have resolved the problem. The 'du' command Hadoop uses is the windows/system32/ builtin one, not the cygwin/bin/du.exe. I just removed the Windows builtid du.exe, and let haddop use cygwin's, then everything worked.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:58:35.257

该类`DU`执行命令`du -sk <dirPath>`并尝试解析其结果。

您得到的异常表明结果（标准输出）为空。这里的解析代码供参考：

```
 protected void parseExecResult(BufferedReader lines) throws IOException {
    String line = lines.readLine();
    if (line == null) {
      throw new IOException("Expecting a line not the end of stream");
    }
    String[] tokens = line.split("\t");
    if(tokens.length == 0) {
      throw new IOException("Illegal du output");
    }
    this.used.set(Long.parseLong(tokens[0])*1024);
  } 
```

如果`du`在命令行上运行，如果指定的目录不存在，则可以看到 std-out 为空。所以我认为这里就是这种情况。

您是否检查过 datanode 数据目录（通过`dfs.data.dir`in配置`hdfs-site.xml`）是否存在？

# mysql - Mysql union两个不同值的表

> ID：11339618
> 
> 赞同：2
> 
> 时间：2012-07-05T07:25:54.310
> 
> 标签：mysql, select, union, no-duplicates

我需要从一个表中返回所有值，然后将此表连接到另一个查询而不重复值。到目前为止，这是我的查询。

```
 CREATE TABLE tmp_tbl (Id INT(11) PRIMARY KEY, Per VARCHAR(30), Des VARCHAR(50), Rol INT(11));
INSERT INTO tmp_tbl(Id, Per, Des, Rol)
SELECT DISTINCT
     p.p_id AS Id,
    p.p_title AS Per,
    p.p_description AS Des,
    '' AS Rol
    FROM perm p;

 SELECT  
    p.p_id AS Id,
    p.p_title AS Per,
    p.p_description AS Des,
    r.id AS Rol
    FROM perm p
    LEFT JOIN roles rp
        ON p.p_id = rp.p_id
    INNER JOIN rol r
        ON r.id = rp.r_id AND rp.r_id IN (101)
    UNION  ALL
SELECT * FROM
tmp_tbl;
 DROP TABLE tmp_tbl; 
```

该语句返回第一个 select 中的所有行，但复制了第二个 select 语句中 union 上的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:28:57.850

尝试更换

```
UNION  ALL 
```

和

```
UNION 
```

`union all`不会删除重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:29:07.163

你应该使用`UNION`，而不是`UNION ALL`。
Infact`UNION`会删除重复记录（结果中的所有列都相同），`UNION ALL`但不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:29:53.467

使用`UNION DISTINCT`以确保：

```
(SELECT p.p_id AS Id, p.p_title AS Per, p.p_description AS Des, r.id AS Rol
FROM perm p
LEFT JOIN roles rp ON p.p_id = rp.p_id
INNER JOIN rol r ON r.id = rp.r_id AND rp.r_id IN (101))
UNION  DISTINCT
(SELECT * FROM tmp_tbl); 
```

# xpages - 1 个带有 2 次部分刷新和文档保存的按钮

> ID：11339623
> 
> 赞同：0
> 
> 时间：2012-07-05T07:26:14.000
> 
> 标签：xpages

我想通过单击 1 个按钮进行 2 次部分刷新和 1 个文档保存。我怎么能这样做？到目前为止我尝试了什么：

1.  在 CCJS 中，并没有提交到服务器

    ```
    XSP.partialRefreshGet("#{id:PanelSubitem}", {
        onComplete: function() {
             XSP.partialRefreshGet("#{id:PanelSubsubitem}", {
                 onComplete: function() { 
                '#{javascript:document1.save()}';
                }
            });
        }
    }); 
    ```

    结果： 2 次刷新工作，但文档没有保存（正常，因为您无法使用 ccjs 访问后端。

2.  将相同的代码放在 SSJS 中，部分刷新或完全刷新

    结果：首先单击按钮刷新第一个面板，然后停止。第二次刷新将更新第二个面板并停止。第三次单击按钮将保存文档。（这也是正常的，因为代码的部分或全部刷新与服务器选项的部分或全部刷新冲突，因为您一次只能进行 1 次刷新）

因此，如果我在 SSJS 中无法做到，而在 CSJS 中也无法做到，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:17:14.517

您可以尝试创建一个保存按钮，该按钮保存文档并在通过 CSJS 完成第二次部分刷新后自行部分刷新。所以你的片段会是这样的：

```
XSP.partialRefreshGet("#{id:PanelSubitem}", {
   onComplete: function() {
      XSP.partialRefreshGet("#{id:PanelSubsubitem}", {
         onComplete: function() { 
            document.getElementById("#{id:btnSave}").click();
         }
      });
   }
});
<xp:button value="Save" id="btnSave">
    <xp:eventHandler event="onclick" submit="true" refreshMode="partial" refreshId="btnSave">
        <xp:this.action><![CDATA[#{javascript:document1.save()}]]></xp:this.action>
    </xp:eventHandler>
</xp:button> 
```

您可以使用 CSS 隐藏“保存”按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-23T15:56:55.430

```
 <xp:eventHandler event="onclick" submit="true" refreshMode="complete">
            <xp:this.action>
                <xp:actionGroup>
                    <xp:executeScript>
                        <xp:this.script><![CDATA[#{javascript:document.save();}]]></xp:this.script>
                    </xp:executeScript>
                </xp:actionGroup>
            </xp:this.action>
        <xp:this.onComplete><![CDATA[(function(){
            XSP.partialRefreshGet("#{id:PanelSubItem}");
            XSP.allowSubmit();
            XSP.partialRefreshGet("#{id:PanelSubSubItem}");
          })();]]>
       </xp:this.onComplete>
    </xp:eventHandler> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:12:40.197

一种可能的方法是利用您可以在运行 CSJS 后运行 SSJS 的事实。SSJS 只会运行 CSJS 返回 true。

因此，对于您的按钮，您将现有的双重部分刷新代码作为客户端代码添加到按钮的 onClick 事件中（也许您还需要添加一条`return true`语句），然后将您的文档保存代码作为 SSJS 添加到相同的onClick 事件。

# asp.net-mvc-3 - Telerik Tabstrip（按需选项卡）无法正常工作

> ID：11339626
> 
> 赞同：0
> 
> 时间：2012-07-05T07:26:20.950
> 
> 标签：asp.net-mvc-3, razor, telerik-mvc

我的部分视图包含以下代码：

```
 @( Html.Telerik().TabStrip()
        .Name("MeasurementScheme")
        .Items(tab =>
        {
            tab.Add()
                .Text("Weight Measure")
                .LoadContentFrom("IndexWeight", "MeasurementScheme")
                .Selected(true);

            tab.Add()
                .Text("Dimension Measure")
                .LoadContentFrom("IndexDimension", "MeasurementScheme");

        })
        ) 
```

但是当我运行我的代码时，它只显示第一个选项卡的部分视图，当单击第二个选项卡时，它不会调用第二个选项卡。

还有人认为，当我将第二个选项卡的 .selected 属性更改为 true 而不是第一个选项卡时，第二个选项卡工作正常并且第一个不调用它的视图？

好的 kk 这是我的控制器

```
 using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Web;
  using System.Web.Mvc;
  using CommerceSuite.Services;
  using CommerceSuite.Web.Models;
  using CommerceSuite.Data;
  using System.Web.Mvc.Html;
  using CommerceSuite.Web.Infrastructure;
  using CommerceSuite.Web.Models.MeasurementScheme;
  using Telerik.Web.Mvc;
  using System.Threading;
  namespace CommerceSuite.Web.Controllers
  {
      public class MeasurementSchemeController : BaseCsController
{
    private readonly IMeasurementSchemeService _measurementSchemeService;
    public MeasurementSchemeController(IMeasurementSchemeService measurementSchemeService)
    {
        this._measurementSchemeService = measurementSchemeService;
    }

    public ActionResult Index()
    {
        return PartialView("_Index");
    }

    // Default Partial View Page of Measure Dimension
    public ActionResult IndexDimension()
    {
        return PartialView("_IndexDimension");
    }

    // return Json List of All MeasureDimension - Method is Invoked in Index Partival View 
    [GridAction]
    public ActionResult MeasureDimensionView()
    {
        var dimensionCollection= _measurementSchemeService.GetAllMeasurementDimension().Select(x=>
            new MeasureDimensionModel()
        {
           MeasureDimensionId=x.MeasureDimensionId,
           Name=x.Name,
           Symbol = x.Symbol,
           Ratio=x.Ratio.Value,
           IsActive=x.IsActive
        });
        return Json(dimensionCollection, JsonRequestBehavior.AllowGet);
    }

    public ActionResult IndexWeight()
    {
        return PartialView("_IndexWeight");
    }

    // return Json List of All MeasureDimension - Method is Invoked in Index Partival View 
    [GridAction]
    public ActionResult MeasureWeightView()
    {
        var weightCollection = _measurementSchemeService.GetAllMeasurementWeight().Select(x =>
           new MeasureWeightModel()
           {
               MeasureWeightId = x.MeasureWeightId,
               Name = x.Name,
               Symbol = x.Symbol,
               Ratio = x.Ratio.Value,
               IsActive = x.IsActive
           });
        return Json(weightCollection, JsonRequestBehavior.AllowGet);
    } 
```

这是我的部分观点 _Index.cshtml

```
 @model CommerceSuite.Web.Models.MeasurementScheme.MeasureWeightModel

       @{
        ViewBag.Title = "Measurement Information";
         Layout = "~/Views/Shared/_LayoutPartial.cshtml";

        }

      @Html.Partial("~/Views/Shared/_Notifications.cshtml")

    <div style="margin-top: 10px; background-color:rgba(18, 149, 223, 0.35); color:#000000; text-align:center; border-bottom-style:dotted; border-top-style:dotted; border-top-width:1px; border-top-color:#aaa; border-bottom-width:1px; border-bottom-color:#aaa;">
 <h1 style="font-size: 17px; line-height:24px; font-weight:normal;">Measurement Schemes</h1> 
```

```
 @section LeftOption{
<a href="#"><img src="@Url.Content("~/Content/themes/myicons/home.png")" width="28px;" title="Home" alt="Home" /></a> &nbsp;&nbsp;&nbsp;
<a href="#"><img src="@Url.Content("~/Content/themes/myicons/back.png")" width="28px;" title="Back" alt="Back" /></a> &nbsp;&nbsp;&nbsp;
<a href="#"><img src="@Url.Content("~/Content/themes/myicons/forward.png")" width="28px;" title="Forward" alt="Forward" /></a> &nbsp;&nbsp;&nbsp;
<a href="#"><img src="@Url.Content("~/Content/themes/myicons/refresh.png")" width="28px;" title="Refresh List" alt="Refresh" /></a> &nbsp;&nbsp;&nbsp;
<a href="#"><img src="@Url.Content("~/Content/themes/myicons/search.png")" width="28px;" title="Search" alt="Search" /></a>
 }
 @section RightOption{
<a href="#" Onclick="csPopupOpen('Add Measurement Scheme','@Url.Action("Create")')"><img src="@Url.Content("~/Content/themes/myicons/add.png")" width="28px;" title="Add New" alt="Add" /></a> &nbsp;&nbsp;&nbsp;
<a href="#" Onclick="csPopupOpen('Delete Measurement Scheme','@Url.Action("#")')"><img src="@Url.Content("~/Content/themes/myicons/delete.png")" width="28px;" title="Delete" alt="Delete" /></a> &nbsp;&nbsp;&nbsp;
<a href="#" Onclick="csPopupOpen('Print Measurement Schemes','@Url.Action("#")')"><img src="@Url.Content("~/Content/themes/myicons/print.png")" width="28px;" title="Print List" alt="Print" /></a> 
```

}

```
 @( Html.Telerik().TabStrip()
        .Name("TabStrip")
        .Items(tab =>
        {

             tab.Add()
                .Text("Dimension Measure")
                .LoadContentFrom("IndexDimension", "MeasurementScheme")
                .Selected(true);

            tab.Add()
               .Text("Weight Measure")
               .LoadContentFrom("IndexWeight", "MeasureWeight");

        })

        ) 
```

这是 measureweight _IndexDimension 的部分视图

```
 @model CommerceSuite.Web.Models.MeasurementScheme.MeasureDimensionModel

      @(Html.Telerik().Grid<CommerceSuite.Web.Models.MeasurementScheme.MeasureDimensionModel>()
                   .Name("MeasurementScheme")          
           .DataBinding(databinding => {
               databinding.Ajax().Select("MeasureDimensionView", "MeasurementScheme");
           })
           .Columns(columns =>
               {
                  columns.Bound(p=>p.MeasureDimensionId)
                  .ClientTemplate("<input type='checkbox' name='checkedRecords' value='<#= MeasureDimensionId #>' />")
                  .HeaderTemplate(
                    @<text>
                        <input type="checkbox" title="Select/Unselect All Records" id="checkAllRecords" />
                               </text>
                )
                  .Title("")
                  .Width(40)
                  .HtmlAttributes(new { style = "text-align:center" });
                   columns.Bound(p => p.Name).Width(300); 
                   columns.Bound(p => p.Symbol).Width(100);
                   columns.Bound(p => p.Ratio).Width(100);
                   columns.Bound(p => p.IsActive).Width(75);
                   columns.Bound(p => p.IsActive).Title("Update").Sortable(false).Filterable(false).Width(50)
                   .ClientTemplate("<img src='../../Content/themes/myicons/edit.png' title='Edit' width='20' onclick='csPopupOpen(\"HELLO\",\"" + @Url.Action("EditDimension") + "\",<#=MeasureDimensionId #>,\"" + @Url.Action("IndexDimension") + "\")' value='Edit' > <img src='../../Content/themes/myicons/del.ico' width='20' title='delete' name='<#=MeasureDimensionId #>' onclick='csPopupOpen(\"HELLO\",\"" + @Url.Action("Delete") + "\",<#=MeasureDimensionId #>)' value='Delete' > ").Width(50);
                })
           .Pageable()
           .Scrollable()
           .Sortable()
           .Groupable()
     ) 
```

这是 MeasureDimension _IndexDimension.cshtml 的部分视图

```
 @model CommerceSuite.Web.Models.MeasurementScheme.MeasureDimensionModel

@(Html.Telerik().Grid<CommerceSuite.Web.Models.MeasurementScheme.MeasureDimensionModel>()
                   .Name("MeasurementScheme")          
           .DataBinding(databinding => {
               databinding.Ajax().Select("MeasureDimensionView", "MeasurementScheme");
           })
           .Columns(columns =>
               {
                  columns.Bound(p=>p.MeasureDimensionId)
                  .ClientTemplate("<input type='checkbox' name='checkedRecords' value='<#= MeasureDimensionId #>' />")
                  .HeaderTemplate(
                    @<text>
                        <input type="checkbox" title="Select/Unselect All Records" id="checkAllRecords" />
                               </text>
                )
                  .Title("")
                  .Width(40)
                  .HtmlAttributes(new { style = "text-align:center" });
                   columns.Bound(p => p.Name).Width(300); 
                   columns.Bound(p => p.Symbol).Width(100);
                   columns.Bound(p => p.Ratio).Width(100);
                   columns.Bound(p => p.IsActive).Width(75);
                   columns.Bound(p => p.IsActive).Title("Update").Sortable(false).Filterable(false).Width(50)
                   .ClientTemplate("<img src='../../Content/themes/myicons/edit.png' title='Edit' width='20' onclick='csPopupOpen(\"HELLO\",\"" + @Url.Action("EditDimension") + "\",<#=MeasureDimensionId #>,\"" + @Url.Action("IndexDimension") + "\")' value='Edit' > <img src='../../Content/themes/myicons/del.ico' width='20' title='delete' name='<#=MeasureDimensionId #>' onclick='csPopupOpen(\"HELLO\",\"" + @Url.Action("Delete") + "\",<#=MeasureDimensionId #>)' value='Delete' > ").Width(50);
                })
           .Pageable()
           .Scrollable()
           .Sortable()
           .Groupable()
     ) 
```

就是这样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:12:52.180

是的，我找到了解决方案

我在错误的部分视图中使用了相同的网格名称

```
 @(Html.Telerik().Grid<ProjectName.Web.Models.MeasurementScheme.MeasureDimensionModel>()
               ***.Name("MeasurementScheme")***//This is the problem

  @(Html.Telerik().Grid<CommerceSuite.Web.Models.MeasurementScheme.MeasureDimensionModel>()
               ***.Name("MeasurementScheme")***//same as previous 
```

我们不能使用相同的网格名称。

# mongodb - mongodb 获取分组的最新日期

> ID：11339630
> 
> 赞同：2
> 
> 时间：2012-07-05T07:26:42.267
> 
> 标签：mongodb, group-by, mapreduce, pymongo

我有表格中的数据

```
{userid: 123,
actiontype: 'loggedin',
timestamp: date-time} 
```

我想运行一个查询，它将数据分组为 userid 和 actiontype 的唯一组合，并返回具有最新时间戳值的文档。

任何想法我怎么能做到这一点？目前我正在考虑进行查找，然后将返回的值放入数组（python 和 pymongo）中，然后在那里进行操作。但是，我觉得直接在 mongodb 上执行此操作会更加优雅/高效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T08:03:38.290

您可以使用[Mongo 组功能来做到这一点。](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group)以下代码显示了如何执行此操作。

```
db.stack.group(
{
    keyf: function(doc) {
        return {
            userid : doc.userid, 
            actiontype : doc.actiontype
        };
    },
    reduce: function(obj,prev) {
        if (prev.maxdate < obj.timestamp) { 
            prev.maxdate = obj.timestamp; 
        } 
    },
    initial: {maxdate:0}
}); 
```

# scala - 功能设计模式

> ID：11339637
> 
> 赞同：107
> 
> 时间：2012-07-05T07:26:55.537
> 
> 标签：scala, haskell, functional-programming, monads

有很多功能性习语：m​​onads、applicatives、arrows 等。它们在不同的文章中都有记录，但不幸的是，我不知道任何一本书或文章将它们总结在一个地方（有[Typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia)，但它有很多没有被很好地覆盖的区域）。任何人都可以推荐一篇文章/书籍，它可以在一个地方很好地涵盖它们并且可以让具有 FP 中级技能的程序员可以访问？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-09T11:20:57.423

我的建议是，如果您想学习 Scala，请阅读 Paul Chiusano 和 Runar Bjarnason 的书：

[http://manning.com/bjarnason/](http://manning.com/bjarnason/)

第二部分：功能设计和组合库

6.  制作小语言
7.  JSON序列化
8.  基于规范的测试
9.  解析器
10.  纯功能并行
11.  纯功能状态

第三部分：功能设计模式

1.  抽象案例
2.  Monoids
3.  函子
4.  单子
5.  应用函子
6.  可遍历和可折叠的数据结构
7.  共生体

第四部分：打破规则：效果和 I/O

1.  效果与副作用
2.  流处理和增量 I/O
3.  使用类型系统强制执行效果范围

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-05T08:09:23.673

很抱歉，我不知道有哪些文章或书籍详细介绍了所有这些结构的不同用法，但我可以为您提供一些指向各个资源的链接。

一个非常常见的模式是构建[monad 转换](http://en.wikibooks.org/wiki/Haskell/Monad_transformers)器而不是简单的 monad（另请参见下一段中的链接）。这基本上意味着您构建的东西必须与其他 monad 结合，从而产生一个更复杂的东西，能够处理它们两者的特性。

在*Real World Haskell*中有几章是关于单子的。在[第 14 章中，作者解释了 Monads](http://book.realworldhaskell.org/read/monads.html)的基础知识和一些常见用法（可能是列表、状态）。[第 15 章用 monad 编程](http://book.realworldhaskell.org/read/programming-with-monads.html)提供了更多关于如何有效使用它们的解释（它也涵盖了阅读器 monad）。下一章解释了如何使用[Parsec](http://www.haskell.org/haskellwiki/Parsec)，但搜索介绍它实际工作原理的文章可能会更有趣：它应该是一个很好的例子，说明了如何使用 monad 进行解析。Fianlly，[第 18 章。 Monad 转换器](http://book.realworldhaskell.org/read/monad-transformers.html)介绍了 monad 转换器的工作原理，然后逐步展示了如何构建一个转换器。对本章最后部分的考虑也很有趣。

我曾经读过一个关于 SO 的关于[创造性使用 monads](https://stackoverflow.com/questions/412929/creative-uses-of-monads)的非常有趣的问题。建议的链接是关于该主题的精彩阅读。带着这种精神，我试图对[箭头](https://stackoverflow.com/questions/9657387/creative-uses-of-arrows)提出同样的要求：我得到的答案肯定比单子上的要少，但仍然很有趣。

* * *

关于四人组的 OOP 模式，IBM 在他们的[功能性思维](http://www.ibm.com/developerworks/views/java/libraryview.jsp?search_by=functional%20thinking:)系列中有一组很好的关于该主题的 3 篇文章。目标函数式语言是 Scala。他们继续解释 OOP 中的常用设计模式并展示它们如何映射到 Scala。

1.  [功能性思维：功能性设计模式，第 1 部分](http://www.ibm.com/developerworks/java/library/j-ft10/index.html)。在这里，它们涵盖了工厂、模板方法、策略、享元。底线是，通过将函数作为第一类值，一切都变得更加简单。
2.  [功能性思维：功能性设计模式，第 2 部分](http://www.ibm.com/developerworks/java/library/j-ft11/)。这是关于 java 和[groovy](http://en.wikipedia.org/wiki/Groovy_%28programming_language%29)的。它解决了适配器模式。
3.  [功能性思维：功能性设计模式，第 3 部分](http://www.ibm.com/developerworks/java/library/j-ft12/)。在这里，他们谈论解释器模式。同样，目标语言是时髦的。

与您的问题最相关的文章肯定是第一篇，但另外两篇可能是有趣的相关读物。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-05T09:20:32.813

Jeremy Gibbons 有一个[Patterns in FP 博客](http://patternsinfp.wordpress.com/)，它最终注定会成为你想要的书。当然，这还没有达到你现在想要的那么有用的状态，但他值得一些鼓励！

同时，我会为 Brent Yorgey 的 Typeclassopedia 说 +1。它真的很有用，如果后面的部分令人困惑，这个网站是一个深入了解它们的好地方。我知道布伦特一直在审查它。如果他没有接触到他的读者，请给他一些帮助。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-05T14:57:28.567

很多 FP 的东西都发布在 Oleg 的网站上：http: [//okmij.org/ftp/](http://okmij.org/ftp/)

Josh Suereth 关于 FP 模式的介绍：http: [//jsuereth.com/intro-to-fp/](http://jsuereth.com/intro-to-fp/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-05T08:29:52.410

你读过《[Learn You a Haskell for Great Good](http://learnyouahaskell.com/chapters) 》后面的章节吗？

*   第 6 章介绍了映射和折叠，这是函数式语言中两个更重要的“设计模式”。

*   第 11-13 章依次介绍了 Functor、Applicative Functor 和 Monad。这很有帮助 - 许多教程先介绍 Functor，然后介绍 Monad，然后在最后添加 Applicative Functor（如果它们完全涵盖的话）。LYAH 中的顺序更好，因为从 Functors => Applicative Functors => Monads 移动你逐渐提升了一般性和权力的阶梯。

*   第 14 章介绍了 Zippers——你可以有效地将它们视为带有指向特定数据的指针的容器类，这意味着你可以在指针位置获得 O(1) 访问和更新。

它不包括 Arrows 或 Comonads，这是 Haskell 中更高级的主题。要了解如何以及为什么要使用 Arrows 或 Comonads，您绝对应该已经牢牢掌握 Monads，所以我认为这不是问题 - LYAH 坚定地针对 Haskell 市场的初学者端。

# crystal-reports - 运行时带有参数的水晶报表

> ID：11339641
> 
> 赞同：0
> 
> 时间：2012-07-05T07:27:24.373
> 
> 标签：crystal-reports

我想在我的网站上申请一个项目（ [http://www.aspdotnet-suresh.com/2012/01/pass-parameters-to-crystal-reports-in.html ）。](http://www.aspdotnet-suresh.com/2012/01/pass-parameters-to-crystal-reports-in.html)我只获得我第一次选择的任何值并获得所需的报告，但如果我选择其他值，那么我再次获得报告以前的报告。有谁能够帮我？

默认.aspx.cs

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    //CrystalReportViewer1.RefreshReport();
    ReportDocument reportdocument = new ReportDocument();
    reportdocument.Load(Server.MapPath("CrystalReport.rpt"));
    reportdocument.SetDatabaseLogon("", "", "ghaffar-pc", "Northwind");
    //reportdocument.SetParameterValue("Username", txtUserName.Text);
    reportdocument.SetParameterValue("CategoryID", Convert.ToInt32(txtUserName.Text));
    CrystalReportViewer1.ReportSource = reportdocument;
} 
```

默认.aspx

```
 <table>
    <tr>
    <td><b>Enter UserName</b></td>
    <td><asp:TextBox ID="txtUserName" runat="server"/></td>
    </tr>
    <tr>
    <td></td>
    <td><asp:Button ID="btnSearch" runat="server" Text="Search" onclick="btnSearch_Click" /></td>
    </tr>
    </table>

</div>
<CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server" 
    EnableDatabaseLogonPrompt="False" AutoDataBind="true" ReuseParameterValuesOnRefresh="False"
    EnableParameterPrompt="False" ToolPanelView="None" /> 
```

请注意，无论我选择什么值来显示报告，我都会在 CrystalReport.rpt 文件中获得所需的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:02:54.193

称呼

```
reportdocument.Refresh(); 
```

就在stmt之后。

```
CrystalReportViewer1.ReportSource = reportdocument; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T12:43:38.103

在这一行之后：

```
reportdocument.SetParameterValue("CategoryID", Convert.ToInt32(txtUserName.Text)); 
```

添加这个：

```
CrystalReportViewer1.ParameterFieldInfo.Clear(); 
```

# php - 使用 CURL 抓取时添加到 XML 的附加字符

> ID：11339642
> 
> 赞同：0
> 
> 时间：2012-07-05T07:27:28.290
> 
> 标签：php, xml, xmlreader

我在 PHP 中使用 CURL 从 URL 中获取一些 XML

```
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$base_xml = curl_exec($ch); 
curl_close($ch); 
```

当我在浏览器中查看链接时，XML 显示正常且有效。但是，当我查看 CURL ($base_xml) 的源代码时，它不是有效的 XML，因为在 XML 的末尾添加了一个额外的“1”字符，所以我得到了一个

```
Extra content at the end of the document in 
```

尝试使用 PHP XMLReader 解析 XML 时出错

为什么会这样，我该如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:33:47.177

```
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);//what you need to add.
$base_xml = curl_exec($ch); 
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T18:07:15.533

我有一个类似的问题，我可以通过设置以下选项来解决：

```
curl_setopt($ch, CURLOPT_SSLVERSION, 3); 
```

# linux - 如何在 QProcess 上强制优先级

> ID：11339643
> 
> 赞同：2
> 
> 时间：2012-07-05T07:27:29.873
> 
> 标签：linux, qt, qprocess

我没有看到任何 API`QProcess`在 Qt 文档中设置 a 的优先级。我假设该过程以正常优先级启动。

有没有办法在 Linux 上以较低的优先级启动进程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-24T12:09:36.840

重载`QProcess::setupChildProcess()`并写一些关于：

```
void QtvProcess::setupChildProcess()
{
#if defined Q_OS_UNIX
    if (::nice(5) == -1) // default: +5
        perror("nice");
#endif
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:42:12.073

我认为不存在使用 Qt 调用设置进程优先级的 API。我使用直接 Linux 调用并成功地更改了进程优先级。参考： http: [//pubs.opengroup.org/onlinepubs/009696699/functions/setpriority.html](http://pubs.opengroup.org/onlinepubs/009696699/functions/setpriority.html)

# objective-c - 在 iPhone 中显示少量自定义广告横幅

> ID：11339648
> 
> 赞同：0
> 
> 时间：2012-07-05T07:27:46.353
> 
> 标签：objective-c, ios, ios5, ios4

我的应用程序底部有一个区域，它显示来自 xml 提要的自定义横幅图像，如下所示：

```
<sponsor><image>image1.jpg</image></sponsor>
<sponsor><image>image2.jpg</image></sponsor>
<sponsor><image></image></sponsor>//image node is empty
<sponsor><image></image></sponsor>//image node is empty
<sponsor><image>image3.jpg</image></sponsor>
<sponsor><image>image4.jpg</image></sponsor> 
```

我将这些图像解析为一个数组，并随着时间的推移更改横幅广告，并且应该重复相同的循环。

`<image>`现在我在显示区域显示了这些图像，当节点中没有内容时，该区域变为空白。我需要的是跳过空`<image>`节点并用图像显示节点的内容。

我正在使用以下代码：

我有一个横幅对象：

横幅对象

```
@implementation bannerObj

@synthesize url,index;

@end 
```

我的 HomepageViewController.m 中的此方法存储数组，如下所示：

```
- (void)processCompleted{

NSMutableArray *bannerArray=[[self sponsorrssParser]sponsorrssItems];
banArray=[[NSMutableArray alloc]init];
bannerObj *bannObj = [[bannerObj alloc]init];

NSString *bannerImagestr;
for(int i=0; i<[bannerArray count]; i++){
    bannerImagestr = [[bannerArray objectAtIndex:i] BannerImage];

    NSLog(@"banner image str-------->>> %@",bannerImagestr);

    if(bannerImagestr != nil){

    bannerImagestr  = [ bannerImagestr  stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSURL *url = [NSURL URLWithString:bannerImagestr];
    NSData *data = [NSData dataWithContentsOfURL:url];

    img = [[[UIImage alloc] initWithData:data] autorelease];
        bannObj.url = img;
        bannObj.index = i;

    [banArray addObject:bannObj];

        NSLog(@"banner array---->>>%@",banArray);

    }
}

[spinner stopAnimating];
} 
```

这是在区域上设置图像的目标方法。

```
-(void) targetMethod:(id) sender {

int countOfBanners=[banArray count];

NSLog(@"count of banners ----->> %d",countOfBanners);
if(numTimerTicks< countOfBanners)
{

     roundedButtonType.tag = [[banArray objectAtIndex:numTimerTicks]index];
    [roundedButtonType setBackgroundImage:[[banArray objectAtIndex:numTimerTicks]url]forState:UIControlStateNormal]; //sets the background Image
    numTimerTicks++;

}
else{
    numTimerTicks=0;
}

NSLog(@"count of timer ticks ----->> %d",numTimerTicks);
} 
```

这会设置提要中的最后一张图片，我无法显示其他横幅图片。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:07:42.750

哎呀！！我应该`bannerObj *bannObj = [[bannerObj alloc]init];`在 for 循环中调用.. :D 我的错.. :P

# javascript - jquery animate scrollTop 导致点击事件在IOS safari 上停止工作

> ID：11339649
> 
> 赞同：1
> 
> 时间：2012-07-05T07:27:47.197
> 
> 标签：javascript, jquery, ios, mobile-safari

下面的代码有链接，点击后会将 body 的 scrollTop 设置为 400 或 600。它在桌面上运行良好，但在 iOS safari 上运行良好。滚动动画正在工作，但动画以某种方式禁用了单击事件侦听器。用户必须执行一些操作（例如手动滚动页面）才能重新启用点击事件。

要模拟问题，请单击第一个链接，然后页面将向下滚动。之后，单击另一个链接，这次（在 iOS Safari 上），单击链接不再起作用。尝试向下滚动一点，链接将再次起作用。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<style>
#test, #test2 {
    float: left;
    position: fixed;
    top: 200;
}
#test2 {
    top: 250;
}

#job{
    float: left;
    width: 300px;
    margin-left: 200px;
}
</style>

<script>
    $(function(){
        $("#test").click(function(e){
            e.preventDefault();
            $('body').animate({scrollTop: 400});
        });

        $("#test2").click(function(e){
            e.preventDefault();
            $('body').animate({scrollTop: 600});
        });
    });
</script>

<a href="#job" id="test"> Test one</a>
<a href="#job" id="test2"> Test two</a>

<div id="job">
"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"

"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"

"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"

</div> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:30:32.200

尝试指定`html`，这是您通常看到的动画滚动作为跨浏览器工作的修复：

```
$('html, body').animate..... 
```

# android - Android 较高的构建目标可以在较低平台的设备上运行吗？

> ID：11339653
> 
> 赞同：2
> 
> 时间：2012-07-05T07:27:59.007
> 
> 标签：android

我发现我可以构建具有更高 sdk 目标的 android apk（比如说 3.0），但我仍然能够在较低的设备上运行我的应用程序（比如说 2.1）。我可以知道为什么吗？仅当我将其设置`android:minSdkVersion`为特定数字时仍会停止执行。

如果我在我的应用程序中使用像 Fragment 这样的最新功能但在较低平台的设备上运行它是否有意义，如果我这样做，我的应用程序会发生什么？我的应用程序会崩溃吗？

我在处理 admob 时意识到这一点，因为我在 Android 4.1 中编译它但能够在设备 2.1 中运行它，这真的让我感到惊讶。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:35:29.407

为了在 sdk 低于 3.0 的设备中使用 Fragment，您必须将 Android Support v4 库作为引用库包含在内。这允许您使用 Android 发布的最新 sdk 引入的 Fragment 和其他功能。保持与旧的 Android 设备的复古兼容性非常重要，因为这些设备的扩散太多了。

有关 Android 支持 v4 库的一些参考资料，您可以查看：

[http://developer.android.com/reference/android/support/v4/app/package-summary.html](http://developer.android.com/reference/android/support/v4/app/package-summary.html)

和这个：

[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

没有它，您不能在低于 3.0（API 级别 11）的 sdk 中使用 Fragment。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:35:47.670

使用您的*AndroidManifest.xml*并使用声明式声明最低和目标 SDK 版本，您的 apk 应根据最低 SDK 版本运行：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="14"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:36:16.330

我可以知道为什么吗？

这是由于`android:minSdkVersion`

利用

```
<uses-sdk android:minSdkVersion="11" android:targetSdkVersion="11" /> 
```

如果我在我的应用程序中使用像 Fragment 这样的最新功能但在较低平台的设备上运行它是否有意义，如果我这样做，我的应用程序会发生什么？我的应用程序会崩溃吗？

当它使用旧平台中不存在的新 SDK 功能时，它将崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:37:51.103

> 我发现我构建了具有更高 sdk 目标的 android apk（比如说 3.0），但我仍然能够在较低的设备上运行我的应用程序（比如说 2.1）。我可以知道为什么吗？

这就是 android SDK 的工作原理。但是默认情况下，当您在 Eclipse 中创建 Android 项目并选择 SDK 版本为 3.0 时，ADT 会自动将 android:minSdkVersion 设置为 11。如果您不想在低于 3.0 的版本上运行您的应用程序，请不要更改此值.

> 如果我在我的应用程序中使用像 Fragment 这样的最新功能但在较低平台的设备上运行它是否有意义，如果我这样做，我的应用程序会发生什么？我的应用程序会崩溃吗？

肯定会崩溃。你会得到方法未找到异常。相反，您可以使用一个在较低和较高版本的 android 上都支持的库，例如[所有片段](http://android-developers.blogspot.in/2011/03/fragments-for-all.html)

# ios - 如何使用 node.JS 创建基于令牌的登录机制？

> ID：11339656
> 
> 赞同：1
> 
> 时间：2012-07-05T07:28:07.647
> 
> 标签：ios, node.js, mongodb

我正在制作一个需要我登录到基于 node.JS 的 Web 服务器的 iOS 应用程序。任何人都可以向我指出一个教程，它可以阐明如何为一个登录会话生成唯一令牌？

我的想法是，通过发布请求获取用户名和密码，验证凭据，然后生成时间戳哈希以及用户名和一些秘密并生成身份验证令牌，并将其发送回客户端以保存它并进一步使用它。

此会话文档将具有会话数据，并且 session_id 是唯一键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:00:40.863

*为了清楚起见，在此处添加答案：*

用户名是否唯一？然后把它算出来+时间。

# javascript - 平移和缩放

> ID：11339659
> 
> 赞同：0
> 
> 时间：2012-07-05T07:28:16.940
> 
> 标签：javascript, view, sencha-touch-2, layer, pinchzoom

我正在创建一个应用程序，我需要在手指捏合时放大/缩小文档。我也使用了 Viewport.js，但有一个小的限制。当文档被重绘时，它只从左上角重绘。我需要在至少 2 个方向上显示效果。我也需要javascript中的代码。

```
else if (evt.touches != null && evt.touches.length == 2) {
                //when touched with 2 fingers, i.e for zooming
                //Zooming only if the page is opened in 'view' mode
                if (pageScope.mode == 'view') {
                    var touchx1 = evt.touches[0].pageX;
                    var touchy1 = evt.touches[0].pageY;
                    var touchx2 = evt.touches[1].pageX;
                    var touchy2 = evt.touches[1].pageY;
                    var distXY = Math.sqrt(Math.pow((touchx2 - touchx1), 2) + Math.pow((touchy2 - touchy1), 2));
                    if (distXY > dist) {
                        viewport.zoomIn();
                    } else if (distXY < dist) {
                        viewport.zoomOut();
                    }
                    viewport.draw();
                    dist = distXY;
                }
            } 
```

附加的代码检测到 2 个手指触摸并相应地执行缩放。谁能建议如何实现这一目标？

# javascript - 行为不端的数组

> ID：11339661
> 
> 赞同：2
> 
> 时间：2012-07-05T07:28:25.993
> 
> 标签：javascript, arrays

我有一堂课，看起来像这样：

```
function MyClass()
{
    this.array1 = [];
    this.array2 = [];
    this.add_item = function( i_x, i_y, i_item )
    {
        var pos = { "x" : i_x, "y" : i_y, "data" : i_item };
        this.array1.push( pos );
        this.array2.push( pos );
    }
    return this;
} 
```

发生的事情是，当我在 add_item 方法的第二行（this.array1.push 行）设置断点时，array1 和 array2 都已经有了 pos 项！当我向前迈出一步时，**两个**数组都再次收到了 pos 项！

不太可能的答案是这是 Firefox 中的一个错误。我早些时候在 Object 的方法中进行了原型设计，但后来读到这可能会导致 for-each-loops 出现问题。这可能是什么原因造成的？旧代码还在里面蹦蹦跳跳吗？我需要一个线索。我已经删除了我拥有的所有 Array 和 Object 原型代码。我已经重新启动了Firefox。没有什么帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:36:37.910

事实证明问题出在萤火虫调试器上。它没有显示实际的数组。我不确定它显示的是什么，但我实现了自己的对象打印方法（处理循环对象引用），结果证明数组是正确的。

*呸*以为我在那里疯了一阵子。

# jquery - jquery 防止页面滚动顶部 - e.preventDefault(); 并返回假；不工作？

> ID：11339663
> 
> 赞同：1
> 
> 时间：2012-07-05T07:28:29.207
> 
> 标签：jquery, jquery-cycle

## 我试图阻止页面滚动到顶部。另外我希望用 e.preventDefault(); 或返回假；（因此其他身体标签解决方案不好）但是它似乎忽略了这些..

（.Slideshow fadeIn 和 fadeOut 工作正常。）

## 但是页面在（我认为）之后滚动到顶部：onAfter 函数如何防止这种情况？

评论返回 false 和 e.preventDefault 它似乎不起作用..

先感谢您。

```
 if ($('.slideshow').length) {
    $('.slideshow').cycle({
        fx: 'scrollHorz',
        speed: 'fast',
        timeout: 0,
        prev: '#prev',
        next: '#next',
        nowrap: 1,
        before: onBefore,
        after: onAfter,
        pager: '#slide-pager ul',
        pagerAnchorBuilder: function (idx, slide) {
            // return selector string for existing anchor 

            return '#slide-pager ul li:eq(' + idx + ') a';
        },
        onPrevNextEvent: function (dir, id, el) {
            if (dir === true) {
                //alert('slide right');
                if (id >= 3) {
                    //alert(i);
                    $('#slide-pager_next').click();
                }
            }
            else {
                //alert('slide left');
                if (id >= 1) {
                    //alert(i);
                    $('#slide-pager_prev').click();
                    return false;
                }
            }
        }
    });
};

function onBefore() {
    //e.preventDefault(); // same thing as above
    $(".chapter-content .slideshow").fadeOut("fast");
    // return false; // prevent default click action from happening!
}
function onAfter() {
    // return false; // prevent default click action from happening!
    //e.preventDefault(); // same thing as above
    $(".chapter-content .slideshow").fadeIn("100");
    // return false; // prevent default click action from happening!
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:34:37.127

我看不到你的演示，我可能误解了，但试试这个：

```
function onBefore() {
  if ( !$('.slideshow').is(':animated') ) {
    $(".chapter-content .slideshow").fadeOut("fast");
  }
}
function onAfter() {
  if ( !$('.slideshow').is(':animated') ) {
    $(".chapter-content .slideshow").fadeIn("100");
  }
} 
```

# compression - Jpeg量化表（16x16）

> ID：11339672
> 
> 赞同：2
> 
> 时间：2012-07-05T07:29:09.363
> 
> 标签：compression, dct, quantization

我尝试研究 jpeg 图像压缩。我有一个量化步骤的问题，我无法找到矩阵 16x16 的量化表。我正在使用 dct 搜索用于数字图像压缩的 JPEG 量化表 (16x16) 的 matlab 代码。我可以查找的任何链接或资源？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T11:47:54.157

JPEG 始终使用 8x8 矩阵。

# javascript - 打印一个div的内容

> ID：11339674
> 
> 赞同：1
> 
> 时间：2012-07-05T07:29:14.510
> 
> 标签：javascript, jquery, printing

我需要打印一个 div 的全部内容。注意 div 中的滚动。但是当我`Window.print()`用来打印它的内容时，它只打印屏幕上的可见部分。我想打印网格中的所有 154 条记录，但它只打印 21 条记录。

![在此处输入图像描述](../Images/a0a3bd1d6436252acff7b71de94dceaf.png)

注意：**我不想打开新窗口。**

**编辑：**

```
javascript function()
{
1\. Hide divs that you don't want to print
2\. window.print()
3\. show the divs you hide in step 1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:37:56.943

我认为最强的解决方案是创建一个 iframe，将要打印的内容复制到该框架，然后打印它。有用于此的 JQuery 插件。复制：[打印 DIV 的内容](https://stackoverflow.com/questions/2255291/print-the-contents-of-a-div)

另一种可能性是使用打印 CSS 隐藏您不想打印的内容（菜单等），并删除表格上的最小高度，从而删除滚动条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:40:13.993

使用具有打印媒体类型的样式表 -

```
link rel="stylesheet" type="text/css" media="print" href="print.css" 
```

并更改 DIV 样式 -

```
height:auto;
overflow:auto 
```

打印时（使用`window.print()`），DIV 将增加高度，并隐藏所有其他 DIV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:36:05.617

试试这个，但首先包括这个[库](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)

```
$('YourDiv').printElement(); 
```

或者

阅读这篇关于[Div 打印的文章](http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T20:39:13.103

[https://github.com/jasonday/jquery.printThis](https://github.com/jasonday/jquery.printThis)

我基于其他几个插件编写了上述插件，它允许在页面上打印元素（无弹出窗口）并维护页面样式或专门为打印元素加载新的 css 样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-11T20:14:36.520

我使用了 printThis，它适用于具有固定高度和滚动条的 div。 ***removeInline: true***属性打印整个文档，即使您在 div 中只能看到它的一部分。

```
function printpage(divId, title) {
                    var divID = "#" + divId;
                    var divTitle = title;
                    $(divID).printThis({
                        debug: false,
                        importCSS: true,
                        importStyle: true,
                        printContainer: true,
                        pageTitle: divTitle,
                        removeInline: true,
                        printDelay: 333,
                        header: null,
                        formValues: true
                    });

                } 
```

# java - 100% 完整的伊甸园空间，0% 使用的幸存者空间 - 垃圾收集未完成

> ID：11339679
> 
> 赞同：26
> 
> 时间：2012-07-05T07:29:45.507
> 
> 标签：java, garbage-collection

我遇到了一个相当混乱的 GC 案例：虽然 Eden 空间 100% 已满，但使用了 0% 幸存者空间。当伊甸园满了，应该触发垃圾收集，对吧？

是否存在阻止 GC 守护进程运行的情况？像 100% 的 CPU？

我们正在使用`jdk-1.7`.

可能是什么原因？以下是 jmap 输出。

我们还尝试使用 捕获更详细的内存使用情况`jmap -histo -F`，但随后 CPU 使用率降至 0%，java 进程变得无法访问。

```
using thread-local object allocation.
Parallel GC with 18 thread(s)

Heap Configuration:
   MinHeapFreeRatio = 40
   MaxHeapFreeRatio = 70
   MaxHeapSize      = 12884901888 (12288.0MB)
   NewSize          = 1310720 (1.25MB)
   MaxNewSize       = 17592186044415 MB
   OldSize          = 5439488 (5.1875MB)
   NewRatio         = 2
   SurvivorRatio    = 8
   PermSize         = 21757952 (20.75MB)
   MaxPermSize      = 85983232 (82.0MB)
   G1HeapRegionSize = 0 (0.0MB)

Heap Usage:
PS Young Generation
Eden Space:
   capacity = 4265738240 (4068.125MB)
   used     = 4265738240 (4068.125MB)
   free     = 0 (0.0MB)
   100.0% used
From Space:
   capacity = 14352384 (13.6875MB)
   used     = 0 (0.0MB)
   free     = 14352384 (13.6875MB)
   0.0% used
To Space:
   capacity = 14680064 (14.0MB)
   used     = 0 (0.0MB)
   free     = 14680064 (14.0MB)
   0.0% used
PS Old Generation
   capacity = 8589934592 (8192.0MB)
   used     = 8589931920 (8191.997451782227MB)
   free     = 2672 (0.0025482177734375MB)
   99.99996889382601% used
PS Perm Generation
   capacity = 41353216 (39.4375MB)
   used     = 41079056 (39.17604064941406MB)
   free     = 274160 (0.2614593505859375MB)
   99.33702858805468% used 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T08:05:19.157

当我看到您的堆配置时，我发现

`MaxNewSize = 17592186044415 MB`不正确，但它必须以字节为单位。

我看到几乎所有世代都在同一时间，并`Collector`试图收集两代人，以便他们互相阻挡。

我建议请使用以下参数调整内存。

```
-XX:NewRatio=3 - the young generation will occupy 1/4 the overall heap
-XX:NewSize - Calculated automatically if you specify -XX:NewRatio
-XX:MaxNewSize - The largest size the young generation can grow to (unlimited if this value is not specified at command line) 
```

`eden`我还建议使用一些幸存者空间，当对象被复制到“终身”一代时，它会给收集器时间。

```
-XX:SurvivorRatio=6 - each survivor space will be 1/8 the young generation 
```

如果幸存者空间太小，复制集合会直接溢出到终身代。

有关任何说明，请参阅[此](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html)链接。

**编辑：**

`-XX:NewRatio=3`- 年轻代将占据总堆的 1/4

**计算：**

```
 y/t=1/3

    y+t=h
    y+3y=h
    y=h/4

 t=tenured
 y=young
 h=heap 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T08:11:24.320

线程本地缓冲区是从伊甸园空间分配的。一旦分配了缓冲区，伊甸园空间中的空闲空间就会全部减少。这可能意味着您有许多几乎是空的 TLAB，但伊甸园空间似乎已满。当 eden 空间中没有足够的可用空间时触发 GC。

如果您关闭 TLAB `-XX:-UseTLAB`，这会降低性能，但您会更准确地了解空间的使用情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-09T22:55:37.987

> 幸存者比率计算：

如果 SurvivorRatio=6，则 (One SurvivorSpace : Eden) 的比率 = (1:6)。
所以两个幸存者会拿（2部分），伊甸园有6部分。所以总共8个部分。
因此，如果我有 40 MB 的年轻一代，伊甸园是 (6/8 * 40)MB，一个幸存者将拥有 (1/8 * 40)MB。

如果幸存者比率=7。那么总部分是（7 + 1 + 1 = 9）。伊甸园为 (7/9 * 40)MB，幸存者将拥有 (1/9 * 40)MB

> 理论上

```
 The SurvivorRatio parameter controls the size of the two survivor spaces.
 For example, -XX:SurvivorRatio=6 sets the ratio between each survivor space 
and eden to be 1:6, each survivor space will be one eighth of the young 
generation. 
```

> 数学上

S - 幸存者
E - 伊甸园
Y - 年轻一代

```
if SurvivorRatio=6
then S / E = 1/6
         E = 6S

2S + E = Y
2S + 6S = Y
S = Y / 8 
```

> 影响

如果将 SurvivorRatio 值增加到更大的值会导致 Survivor 的空间更小，则会将 eden 空间对象直接推入 old/tenured gen。通过次要 GC 在幸存者空间中过滤掉已拍摄的活动对象的机会较小。这也可能会增加完整 GC 的数量。

如果将此值降低到更低的值将导致更小的伊甸园空间，则会导致次要 GC 频繁。

知道 Minor GC 所花费的时间会更多，特别是如果我们使用串行 GC 算法，其中仅使用单线程进行 GC，尽管您的机器是多核机器。

另请注意，这`-XX:+UseAdaptiveSizePolicy`将在运行时确定 JVM 自己的 SurvivorRatio，但最好通过尝试多次加载运行来根据您的应用程序手动提及它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T07:54:28.683

只是一个想法，但我看到老根也满了。难道是GC而不是试图清理Eden正忙于运行full GC试图清理老一代以避免OOM。

# cakephp - 如何在 CakePHP 2.0 的控制器中导入一个类？

> ID：11339680
> 
> 赞同：2
> 
> 时间：2012-07-05T07:29:47.047
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我正在使用 CakePHP。我创建了一个既不是模型也不是控制器的外部类。类的结构看起来像这样

```
类上传图片{
    函数sayHello(){
       返回“哈哈哈”；
   }
}

```

我将类保存在 App->Lib 目录中，并将其命名为 UploadImage.php

我想`sayHello()`在我的控制器中调用该方法：

```
类 ContentsController 扩展 AppController {

    public $helpers = array('Html', 'Form');

    公共函数索引（）{
        $test = App::uses('UploadImage','Lib');
        调试($test->sayHello());
    }
}

```

现在，当我运行上述页面时，出现以下错误：

> 错误：在非对象上调用成员函数 sayHello()

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T07:43:23.663

App::uses() 是您放置在文件开头的语句

你仍然需要在 php5 中编程——这意味着你必须使用`new`！

```
App::uses('UploadImage','Lib');
class ContentsController extends AppController {} 
```

并在您的方法中：

```
$test = new UploadImage(); 
```

# grails - 如何在 Grails 中创建特定于应用程序的配置

> ID：11339685
> 
> 赞同：0
> 
> 时间：2012-07-05T07:30:12.873
> 
> 标签：grails, grails-2.0

我有一个在 Grails 2.0.4 中开发的应用程序，我正在对我的域类中的一些值进行硬编码，示例如下

```
class Training{
  String startTime ="09:00"
  String endTime  ="17:00"
} 
```

但它不是好方法，进行更改是开销，像这样我有 10 多个域类，其中的值是硬编码的。

所以，我打算创建一个单独的配置域类，从而我可以通过 UI（视图）输入值并将它们持久化。

这是我的计划，grails中是否有任何解决方案来处理它。

**更新：**

```
import org.grails.plugins.settings.*

class PublicTraining extends Training{
    Date startDate = Setting.valueFor("startDate")
} 
```

我创建了一个设置'startDate'。我可以在控制器中使用 Setting.valueFor("startDate") 方法访问设置，但不能在域类中访问设置

我得到的错误如下

```
*Caused by: org.hibernate.InstantiationException: could not instantiate test objectcom.springpeople.tms.PublicTraining
    ... 5 more
*Caused by: java.lang.reflect.InvocationTargetException
    ... 5 more
Caused by: groovy.lang.MissingMethodException: No signature of method: org.grails.plugins.settings.Setting.methodMissing() is applicable for argument types: () values: []
    at org.grails.plugins.settings.Setting.valueFor(Setting.groovy:53)** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:16:48.820

查看[设置](http://grails.org/plugin/settings)插件。我几乎在每个项目中都使用它。允许您创建任意数量的此类配置设置并在 GSP 或 Contollers/Services/etc 中访问它们。它甚至提供了一个 CRUD gui 来管理它们。

```
//programatically
import org.grails.plugins.settings.*

def startTime = Setting.valueFor("startTime")
def endTime = Setting.valueFor("endTime")

//gsp
<g:setting valueFor="startTime" default="9:00" encodeAs="HTML" /> 
```

为了在域类中使用它，我一直使用`beforeInsert`or`beforeUpdate`事件。

处理 String、Integer、BigDecimal 或 Date 类型的设置。

如果您有多个相似的值（例如“培训开始时间”和“库存开始时间”），您需要存储您也可以将它们`inventory.startTime`分段`training.startTime`。

# javascript - 如何使用 jQuery UI 选项卡确定选项卡的内容何时完成呈现

> ID：11339687
> 
> 赞同：0
> 
> 时间：2012-07-05T07:30:18.450
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我正在使用`jQuery UI`的标签视图。我在下面包含了我的 HTML，它是我所拥有的精简版。

```
<div id="UserDetailsTabs">

     <ul>
          <li><a href="#tabs-1">User Details</a></li>
          <li><a href="#tabs-2">Impersonation Details</a></li>
     </ul>

     <div id="tabs-1">
          <p>Tab 1 content</p>
     </div>

     <div id="tabs-2">
          <p>Tab 2 content</p>
     </div>

</div> 
```

这是我创建选项卡的 jQuery 代码：

```
$(document).ready(function () {
     $("#UserDetailsTabs").tabs();
}); 
```

有没有办法在单击选项卡后确定选项卡的内容何时完成呈现？我的意思是如果我点击tabs-2，是否有一个函数可以在所选选项卡的内容完成渲染后调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:34:05.600

```
$("#UserDetailsTabs").tabs({load: function(event, ui) { 
    alert('tabs loaded')    
});
//This will trigger when user clicks a tab after the page load
$( "#UserDetailsTabs" ).tabs({
   show: function(event, ui) { alert('clicked on the tabs'); }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:36:30.390

例如：

```
$( ".selector" ).tabs({
   create: function(event, ui) { ... }
});

$( ".selector" ).bind( "tabscreate", function(event, ui) {
  ...
}); 
```

但请参阅[文档](http://jqueryui.com/demos/tabs/#events)以找到适当的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-05T20:40:58.917

上面coolguy的回答是正确的。我花了一段时间才找到并整理出来，所以我想我会发布一个更完整的例子。这在很大程度上来自 Tabs 文档。唯一添加的是“加载：”部分。

```
$(function() {
    $( "#tabs" ).tabs({
        active: <?php echo $tab ?>,
        beforeLoad: function( event, ui ) {
        ui.jqXHR.error(function() {
            ui.panel.html(
            "Couldn't load this tab. We'll try to fix this as soon as possible. " +
            "If this wouldn't be a demo." );
            });
        },
        load: function( event, ui ) {
            //tab is loaded...now execute this code...
            $(".ResultsTable").tablesorter({ widgets: ['zebra'] }); 
        }       
    });
}); 
```

# javascript - 只有 OK 按钮的 Javascript 提示框

> ID：11339688
> 
> 赞同：0
> 
> 时间：2012-07-05T07:30:22.120
> 
> 标签：javascript, customization, prompt, cancel-button

是否可以将 javascript 提示框自定义为只有 OK 按钮？在我的 PhoneGap 应用程序中，我需要一个与普通 javascript 警报一样的框，该框只有他可以单击“确定”的选项，但它还应该有一个供用户输入的文本字段。

是的，我知道强制用户只能选择单击“确定”而不是“取消”并不是最友好的方式，但就我而言，这正是我需要做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:32:35.390

`alert`不可以，并且`confirm`不能通过 JavaScript 以任何方式设置或修改对话框。它们是底层操作系统的一部分。

您可以使用许多现有的灯箱脚本之一，例如[jQuery UI Dialog](http://jqueryui.com/demos/dialog/)。

# objective-c - XCode 4 自动导航到另一个视图

> ID：11339699
> 
> 赞同：0
> 
> 时间：2012-07-05T07:31:27.740
> 
> 标签：objective-c, xcode, navigation

在 Xcode 4... 我想知道如何在特定时间后自动重定向（或导航）到另一个 UIViewController 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:41:48.860

怎么样

```
 [self performSelector:@selector(yourRedirectMethod) withObject:nil afterDelay:1] 
```

# php - 使用 php 动态创建多个类似 Facebook 的按钮

> ID：11339702
> 
> 赞同：0
> 
> 时间：2012-07-05T07:31:39.923
> 
> 标签：php, facebook

我正在尝试将多个类似按钮添加到一个页面（用于不同的文章） - 我在网上查看过，它指出将 url 指向一个包含“您要显示的元数据”的新页面。

我创建了一个简单的 php 页面，它会根据新闻文章自动填充元数据。但是，每次我在 Facebook 调试器上运行它时，它似乎都没有拾起这些？

当我查询页面时，我可以看到元数据已完全自定义，但并未反映在 Facebook 上。

有没有人知道为什么会发生这种情况，如果是这样，也许是一个解决方案？我看到许多公司目前正在这样做，只是不确定如何，当然我不需要为每个喜欢按钮创建一个新的静态页面？

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:36:38.097

我使用以下代码，您需要在 foreach 中实现，并更改`data-href`

```
<div id="fb-root" style="display:none"></div>
    <script type="text/javascript">
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-like" data-send="false" data-layout="button_count" data-width="80" data-show-faces="false" data-href="<?php echo $someUrl; ?>"></div> 
```

# c# - 在用户设置路径构建中获取证据 eid 和哈希值

> ID：11339704
> 
> 赞同：5
> 
> 时间：2012-07-05T07:32:01.637
> 
> 标签：c#, winforms, settings

默认情况下，win 应用程序的用户设置存储在以下目录中

维斯塔/7

`C:\Users\<userId>\AppData\Local\Application Data\<companyname>\appdomainname>_<eid>_<hash>\<verison>`

经验值

`C:\Documents and Settings>\<username>\[Local Settings\]Application Data\<companyname>\appdomainname>_<eid>_<hash>\<verison>`

我需要知道如何获取**eid**和**hash**的值。

我试图从 GetHostEnumerator() 获取该信息`AppDomain.CurrentDomain.Evidence`，然后检查我从 GetHostEnumerator() 获取的值，但它们不适合实际的目录路径值。

例如，我有以下值

```
Some.exe_StrongName_fymjkuum4xrf5aopfjlsem3elhvjbgag 
```

但是我从代码中收到的信息是

```
<StrongName version="1"
Key="002400000480000094000000060200000024000052534131000400000100010027BFE9320943DDB4271C78B6B890E7BF02ECAA65585E252D8FBF07888FAAC54D8F8EF25C65061D4F8B904699701BF437F5A69BBDB6A496B989F8FD96853E43C621A84C187AF9EA90C0DAF7F32134A3BD42E94023DBB601C864CA1FF0B5E520CD090A4B90EDB1F95628F750316DBCC9593603E033D72FD67F2707D2670A2D1EB2"
Name="Some"
Version="0.0.0.0"/>

<System.Security.Policy.Url version="1">
<Url>file:///R:/Some/Some.Utilities/bin/Debug/Some.EXE</Url>
</System.Security.Policy.Url>

<System.Security.Policy.Zone version="1">
<Zone>MyComputer</Zone>
</System.Security.Policy.Zone>

<System.Security.Policy.Hash version="2">
<hash algorithm="SHA1"
value="8B19FB026023FE0C239D96EECDDC0266D36B415B"/>
<hash algorithm="SHA256"
value="46AA666701E20EF698ABE20F60CD52162BD0D7B72B43D1B1EB82826E525ACE73"/>
<hash algorithm="MD5"
value="244B4EA2E084F98345FE56FB4460A436"/>
</System.Security.Policy.Hash> 
```

顺便说一句，我的大会正在签署。可能是我的钥匙的价值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:34:52.683

您可以使用以下代码行获取应用程序默认保存设置文件的位置。从中您可以提取 eid 和哈希。

```
string configPath = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.PerUserRoamingAndLocal).FilePath; 
```

# .htaccess - codeigniter 多个应用程序

> ID：11339706
> 
> 赞同：1
> 
> 时间：2012-07-05T07:32:28.050
> 
> 标签：.htaccess, codeigniter, mod-rewrite

CodeIgniter 默认只支持一个应用程序。我想要基于子域的多个应用程序。所以 subdomain 是应用程序文件夹的名称。如果存在，它应该执行 else 默认值。我的要求和逻辑在这里......

要求：

```
http://dynamic.com              applications/application (default)
http://appone.dynamic.com       applicatons/appone
http://apptwo.dynamic.com       applicatons/apptwo
....                            ....
http://appx.dynamic.com         applicatons/appx 
```

当访问者键入上面的示例 URL 时，.htaccess 或 index.php 应该自动选择要使用的应用程序文件夹。

我在 index.php 中更改了 codeIgniter 默认代码并编写了这个运行良好的代码。

```
// multiple applications path //
$path = 'applications/';
// default folder //
$folder = 'application';

preg_match('/^(?<subdomain>\w+)\.(dynamic\.com)$/im', $_SERVER['HTTP_HOST'], $matches);
if (isset($matches['subdomain']) && is_dir($path . $matches['subdomain'])) {
    $folder = strtolower($matches['subdomain']);
}
$application_folder = $path . $folder; 
```

我的问题 - 是否可以在 .htaccess 中编写相同的逻辑？在 index.php 中编写类似我的代码是否存在性能问题？建议我或帮助我了解 htaccess 逻辑。还附上图片。谢谢！！

![在此处输入图像描述](../Images/399f0f7dd4c2ebf27e2b4a6d2b5d040e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:22:21.987

你这样做的方式是正确的。您正在设置 CodeIgniter 将在 index.php 文件中使用的应用程序文件夹。

您唯一关心的性能是您的 preg_match 函数和 is_dir 函数。在我看来，字符串相当小，不应该有太大的性能风险。但是，我会写在 switch() 语句中，以便它们更加硬编码，这样您就可以避免使用 is_dir 函数。通过使用这种方法，您还可以切换到使用 if 语句，它非常便宜，而不是 preg_match 函数。

没有理由将其写入 .htaccess 文件，CodeIgniter 使您能够执行此操作。如果您要使用 .htaccess 来使用它，则需要有单独的文件夹来安装并开始符号链接。

# c++ - 脆弱的 abi 不支持 -fobjc-arc

> ID：11339707
> 
> 赞同：2
> 
> 时间：2012-07-05T07:32:28.830
> 
> 标签：c++, xcode, dylib

我有这行代码：

```
GetVolParmsInfoBuffer volumeParms;
HParamBlockRec pb; 
```

我包括了这个标题：

```
#include </System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/Files.h> 
```

但是编译器仍然会抛出`HParamBlockRec`未知类型的错误。

在另一个具有相同文件的项目中，一切正常，即使不包括`Files.h`标题。
有什么我想念的吗？

**更新** 我能够通过将架构设置为 32 位来修复错误。

但现在我收到了这个构建错误：

```
error: -fobjc-arc is not supported with fragile abi 
```

我搜索了一下，有人说切换到 LLVM GGC 4.2 编译器会有所帮助，但事实并非如此。

现在我的构建设置是：

*   32 位英特尔
*   Mac OSX 10.7 SDK
*   仅构建活动架构**是**
*   Mach-O 类型设置为**动态库**

我对 XCode 中的编码非常不熟悉。所以，如果你能在这里帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:53:32.080

不幸的是，ARC 在 32 位 OS X 上根本不可用。显然 Apple 已经决定现在所有新的开发都应该转移到 x86-64，所以所有新的 Objective-C 2.0 特性——不仅仅是 ARC，而是此外`-fobjc-nonfragile-abi`，[容器字面量](http://clang.llvm.org/docs/ObjectiveCLiterals.html)、对象下标、[属性的默认合成](https://stackoverflow.com/a/11767553/1424877)……仅针对 64 位 OS X（当然也适用于 32 位 iOS）实现。

因此，如果您尝试为 32 位和 64 位版本的 OS X 生成包含代码的胖二进制文件，您将不得不将自己限制在 Objective-C 1.0 功能和/或使用#ifdefs 破解您的代码库. 这不公平，但这是真的。对不起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T08:23:55.447

您不应包含框架中的单个标头。改用伞头：

```
#include <Carbon/Carbon.h> 
```

此外，根据[文档](https://developer.apple.com/library/mac/documentation/Carbon/Reference/File_Manager/Reference/reference.html#//apple_ref/doc/uid/TP30000107-CH3g-C002500) `HParamBlockRec`在 64 位中不可用。您将需要找到一个现代替代您正在使用的基于参数块的功能。

至于`-fobjc-arc`警告，请确保将*Objective-C 自动引用计数*( `$CLANG_ENABLE_OBJC_ARC`) 构建设置设置为*否*( `NO`)。

# c++ - 有效地杀死一个windows进程

> ID：11339709
> 
> 赞同：2
> 
> 时间：2012-07-05T07:32:38.677
> 
> 标签：c++, windows, qt, process

我正在编写一个 C++ QT 桌面应用程序，旨在在 Windows 操作系统上运行。
此应用程序应枚举所有正在运行的进程，并将终止特定进程（按名称识别）。我知道有两种方法可以做到：

1.  使用 Windows API。
2.  使用`tasklist`命令获取进程，并`taskkill`结束进程。

在代码风格、效率和性能方面哪个选项更好？还是有第三种选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T07:45:36.673

效率和性能不应该让你担心，IMO。你可能不会在一秒钟内杀死 1000 个进程，所以如果一个需要 10 毫秒，另一个需要 100 毫秒，我怀疑有人会关心。

因此，选择其中之一的论据主要是易于编程和维护。枚举进程的 API 并不是最简单的，但您可以在网络上找到许多示例（如此[处](https://stackoverflow.com/questions/865152/how-can-i-get-a-process-handle-by-its-name-in-c)）。使用 tasklist 将需要获取输出并解析它。

出于以下原因，我会选择 API：

1.  如果操作失败，您可以获得更多信息。您将确切地知道问题出在哪里，以及它是什么。
2.  我不确定`tasklist`并且`taskkill`保证在每台 Windows 机器上都有。它们确实随操作系统一起提供，但有人可能会认为它们扩大了攻击面或其他任何东西，并将它们删除。
3.  解析文本很容易出错。例如，我不知道`tasklist`' 的输出是否取决于操作系统区域设置。你？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:44:11.823

实际上我使用 WMI 并且我读到你可以使用 WMI 杀死进程

[Win32_Process 类的终止方法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393907%28v=vs.85%29.aspx)

（仅供参考:)）

我在其他应用程序中使用 winAPI

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:44:23.087

当然，您使用的是 Windows Api。这比使用外部 exe 杀死进程要好得多。您可以使用需要进程 ID 的[OpenProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%28v=vs.85%29.aspx)获取进程句柄。打开后，您可以使用[TerminateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)提供进程句柄。

# c# - 全局命名空间 C# 中的命名空间

> ID：11339711
> 
> 赞同：1
> 
> 时间：2012-07-05T07:32:58.630
> 
> 标签：c#, .net, namespaces

所以我做了一个`.dll`包含一些我希望在另一个项目中使用的方法。一切顺利。我目前在集合中的`.cs`文件如下所示：`.dll`

```
GeneralClass.cs
NetworkingClass.cs
TextProcessingClass.cs 
```

他们每个人的内部都是这样的：

```
namespace General // The name of each .cs file without 'Class'
{
    ...
} 
```

所以我会有这些命名空间：

*   `General`

*   `Networking`

*   `TextProcessing`

我可以通过执行以下操作在另一个项目中访问它们：

```
using General;
using Networking;
... 
```

这一切都很好，但我想知道是否有办法做到这一点：

```
using MyDll.General;
using MyDll.Networking;
... 
```

所以一切都在`MyDll`, 就像`System`它的所有子命名空间一样。

如果你能帮助我，请在这里发帖。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T07:34:03.777

将命名空间定义为：

```
namespace MyDll.General 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T07:35:29.160

如果您希望命名空间有所不同，为什么不这样做呢？匹配文件名的命名空间没有限制（与其他一些语言不同）。

```
namespace MyDll.General 
{ 
    ... 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:35:13.870

改变你的命名空间

```
namespace MyDll.General
{
    // define classes here
}

namespace MyDll.Networking
{
    // define classes here
}

namespace MyDll.TextProcessing
{
    // define classes here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:37:48.923

在您的 dll 项目中，只需更改

```
namespace General {} 
```

到

```
namespace MyDll.General {} 
```

并重建它

# maven - 为什么我会因为缺少dependency.version而得到无效的pom，尽管版本是受管理的？

> ID：11339712
> 
> 赞同：5
> 
> 时间：2012-07-05T07:32:59.040
> 
> 标签：maven, dependencies, pom.xml

我的情况如下：

**极好的**

*   第三方依赖管理

**家长会**

*   超级的孩子

**项目A**

*   父母的孩子
*   依赖第三方

**项目B**

*   父母的孩子
*   对项目A的依赖

projectA 构建得很好，但是当我尝试编译 projectB 时，我得到：

[警告] [projectA] 的 POM 无效，传递依赖项（如果有）将不可用：为 [projectA] 构建有效模型时遇到 1 个问题

[错误] thrid-party.jar 的“dependencies.dependency.version”缺失。@

知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:17:27.473

您需要将 super 安装到您的本地存储库，对于这种情况，仅设置 relativePath 是不够的。

# java - httptransportse.call() 中的 android ksoap 错误；

> ID：11339718
> 
> 赞同：0
> 
> 时间：2012-07-05T07:33:15.353
> 
> 标签：java, android, ksoap, httptransportse

请任何人帮助我解决这个错误......这是ma Java代码：

```
public class MainActivity extends Activity implements Serializable {

    private static final String Url = "http://c.knotbiz.com/knotbizjob.asmx";
    private static final String Namespace = "http://tempuri.org/";
    private static final String methodName = "UploadFile";
    private static final String Soap_Action = "http://tempuri.org/UploadFile";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        handlerobj.post(runnableobj);    
    }

    private Handler handlerobj = new Handler();

    private Runnable runnableobj = new Runnable() {

        public void run() {
            // TODO Auto-generated method stub

            Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),
                    R.drawable.ic_launcher);
            ByteArrayOutputStream bao = new ByteArrayOutputStream();
            bitmapOrg.compress(Bitmap.CompressFormat.PNG, 90, bao);
            byte[] ba = bao.toByteArray();

            Log.v("Base64>>>>>>>",""+ Base64.encodeBase64(ba) );

            long user_id = 3;

            boolean Is_Created = false,Is_Overwrite = true,Is_resize = true;
            String FileName = "Hishamdocument";

            String FileType = "png";

            //Base64.encodeBase64(ba)

            SoapObject req = new SoapObject(Namespace, methodName);

            req.addProperty("UserId", user_id);

            req.addProperty("File", FileName);

            req.addProperty("FileName", FileName);

            req.addProperty("FileType", FileType);

            req.addProperty("isCreated", Is_Created);

            req.addProperty("Abspath", "");

            req.addProperty("FullPath", "");

            req.addProperty("IsOverwrite", Is_Overwrite);

            req.addProperty("IsResize", Is_resize);

            req.addProperty("Id", user_id);

            req.addProperty("SendEmailId", user_id);

            Log.v("Request>>>>>>>", req.toString());

            //SoapEnvelope              

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

            envelope.dotNet = true;             

            envelope.setOutputSoapObject(req);

            try{
            Log.v("envelope body in", envelope.bodyIn.toString());

            Log.v("envelope", envelope.toString());

            Log.v("envelope body Out", envelope.bodyOut.toString());

            }

            catch(Exception e) {

                Log.e("errror", ""+e);

            }               

            //httpTransportSe

            try{
            HttpTransportSE httpreq = new HttpTransportSE(Url);
            httpreq.debug = true;

            Log.v("inside httpreq"," envelope.bodyOut.toString()");

            httpreq.call(Soap_Action, envelope);

            Log.v("inside httpreq"," envelope.bodyOut.toString()");

            Log.v("After call httpreq",httpreq.responseDump.toString());

            }
            catch(Exception e){
                e.printStackTrace();
            }
        }
    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

抛出空指针异常......我不知道为什么会抛出它......我怎样才能得到正确的响应？请任何1帮助我吗？...在​​此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-14T03:48:45.540

移动

```
 Log.v("envelope body in", envelope.bodyIn.toString());
        Log.v("envelope", envelope.toString());
        Log.v("envelope body Out", envelope.bodyOut.toString()); 
```

后

```
httpreq.call(Soap_Action, envelope); 
```

在发送请求之前你不会得到数据

信封 bodyIn/Out 初始为 null，这就是你得到 NPE 的原因

# scope - QML 组件范围之谜

> ID：11339719
> 
> 赞同：10
> 
> 时间：2012-07-05T07:33:19.843
> 
> 标签：scope, obfuscation, qml

拿这个代码：

```
import QtQuick 1.1

Rectangle {
    width:  100
    height: 100

    property color fromColor: "red"
    property color toColor:   "blue"

    gradient: Gradient {
        property color fromColor: "yellow"
        property color toColor:   "green"

        GradientStop { position: 0; color: fromColor }
        GradientStop { position: 1; color: toColor }
    }
} 
```

为什么从封闭元素中`Gradient`选择它的`fromColor`和`toColor`属性？

这在哪里记录（至少在源代码注释中，在官方文档中更好）？

*注意：这个“QML 混淆示例来自 Girish Ramakrishnan 的演讲[Qt Quick Best Practices and Design Patterns](http://qt-project.org/videos/watch/qt-quick-best-practices-and-design-patterns)（倒退到第 25 分钟），他确实说这件事非常复杂，必须与组件范围有关，但没有时间解释原因。*

**[更新]**

因此，正如 MartinJ 在下面所说，元素属性（不仅是元素子）层次结构中的顶级组件的属性对所有属性可见，无论嵌套多么深，优先级是该属性的属性，以及根本没有看到“中间”项目。

这是一个小例子：

```
import QtQuick 1.1

Item {
    Item {
        property string s: "parent-str"
        Item { Component.onCompleted: console.log(s) }
    }
} 
```

这给出了：`"ReferenceError: Can't find variable: s"`

这按预期工作：

```
import QtQuick 1.1

Item {
    property string s: "parent-str"
    Item { Component.onCompleted: console.log(s) }
} 
```

，输出`"parent-str"`。

请参阅下面的 MartinJ 的评论。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T23:49:17.433

乍一看这肯定不直观，但在组件根项中注释掉，原因就很明显了`fromColor`。`toColor`从[QML Scope 文档](http://qt-project.org/doc/qt-4.8/qdeclarativescope.html)中，您可以看到范围包括：

*   `id`组件中定义的所有'。
*   本地属性
*   组件的根对象的属性

上例中的A`GradientStop {}`没有定义本地属性。根组件确实如此，它们是解析到`fromColor`的属性。`toColor`中的属性`Gradient {}`根本不在范围内`GradientStop {}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:30:28.913

另请参阅：

```
import QtQuick 1.1

Item {
    property string s: "outer"

    Item {
        property string s: "middle"

        property Item it: Item {
            property string dummy: function() { console.log("(5) s: "+s); "" }()
            Component.onCompleted: console.log("(1) s: " + s)
        }

        Item {
            property string dummy: function() { console.log("(4) s: "+s); "" }()

            function f() {
                console.log("(2) s: " + s)
            }

            Component.onCompleted: {
                console.log("(3) s: " + s)
                f()
            }
        }
    }
} 
```

此代码输出：

```
(5) s: outer
(4) s: outer
(3) s: outer
(2) s: outer
(1) s: outer 
```

请注意，但是（无论是否针对 Children 属性）以及我们绑定的任何内容（元素或 JavaScript 代码片段），都不会找到“中间”属性。

因此，名称查找是：

1.  id 在项目或组件中定义（参见 3）
2.  本地属性
3.  顶级项目的属性（或组件，如果它是内联定义的，即使省略了“组件”名称，例如方便地定义委托时）。

此外，当一个属性在组件中被引用，但没有在其中定义时，它仍然可以在“自定义”组件中引入，并且可以看到：

```
//OverrideInner.qml
import QtQuick 1.1

Item {
    Component.onCompleted: console.log(s)
} 
```

.

```
//OverrideOuter.qml
import QtQuick 1.1

Item {
    property string s: "overriden-outer"

    Item {
        property string s: "overriden-middle"

        OverrideInner {
            property string s: "overriden-inner"
        }
    }
} 
```

运行“OverrideOuter.qml”会产生：

```
overriden-inner 
```

再次，请参阅 Martin 的评论和文档以澄清此事。相关文档是：

*   [声明范围](http://doc.qt.nokia.com/4.7-snapshot/qdeclarativescope.html)
*   [属性绑定](http://doc.qt.nokia.com/4.7-snapshot/propertybinding.html)

# javascript - 如何查看经过的时间

> ID：11339720
> 
> 赞同：0
> 
> 时间：2012-07-05T07:33:40.390
> 
> 标签：javascript, jquery, asp.net, html, time

通过拖动 html 表格单元格，我变得像 startTime 13:30:00 endTime 14:15:00（24 小时格式）。在隐藏字段中，我存储值 starttime 和 endtime

```
 var hidStartTime=13:30:00;
                var hidEndTime=14:15:00; 
```

我必须检查用户的开始时间和结束时间是否与当前客户端机器时间相比已经过去，然后必须生成警报（“您不能允许修复过去时间的约会。”）；我如何检查

```
 var todaysDate = new Date();
            var currentHour = todaysDate.getHours();
            var currentMinutes = todaysDate.getMinutes();

            if (currentHour < endTimeHour)
            {
                alert("You can not allow to fix appointment for past time.");
                return false;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:21:27.000

假设日期将是今天，您可以创建包含开始和结束时间的 Date 对象，然后将它们与当前日期进行比较，就像这样。

```
var currDate  = new Date();
var startDate = setTime(hidStartTime);
var endDate   = setTime(hidEndTime);

// given an input string of format "hh:mm:ss", returns a date object with 
// the same day as today, but the given time.
function setTime(timeStr) {
    var dateObj = new Date();          // assuming date is today
    var timeArr = timeStr.split(':');  // to access hour/minute/second

    var hour    = timeArr[0]; 
    var minute  = timeArr[1];
    var second  = timeArr[2];

    dateObj.setHours(hour);
    dateObj.setMinutes(minute);
    dateObj.setSeconds(second);
    return dateObj;
}

// now we can subtract them (subtracting two Date objects gives you their 
// difference in milliseconds)
if (currDate - startDate < 0 || currDate - endDate < 0) {
    alert("Unfortunately, you can't schedule a meeting in the past. 
             We apologize for the inconvenience.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:12:49.700

您可以像这样比较 2 个 Date 对象：

```
// Get current date on the client machine
var currentDateTime = new Date(); // "Thu, 05 Jul 2012 08:05:57 GMT"

// Now if you have a date string of 8:30 on the same day
var endDateTime = Date.parse("Thu, 05 Jul 2012 08:30:00 GMT");

if (currentDateTime > endDateTime) {
  alert("...");
} 
```

困难的部分可能是将日期字符串组合成函数 Date.parse() 可以理解的格式

# php - 在 iframe 应用程序中使用 app_data 参数传输值

> ID：11339721
> 
> 赞同：-1
> 
> 时间：2012-07-05T07:33:42.710
> 
> 标签：php, facebook

我有一个 facebook iframe 应用程序而不是粉丝页面。
当我使用此代码时，它打印得很好

```
 $signed_request = $facebook->getSignedRequest();
 print_r($signed_request); 
```

它打印：

```
Array (   
[algorithm] => HMAC-SHA256   
[expires] => 1341475200   
[issued_at] => 1341470027     
[oauth_token] =>...  
[user] =>   
   Array (    
         [country] => tr   
         [locale] => en_US   
         [age] => Array ( [min] => 21 )  
         )   
         [user_id] => ...  
       ) 
```

但是，当我更改地址栏中的 url`https://apps.facebook.com/myappname/?app_data=hello`并按下回车时，它不会在数组中打印 app_data=hello 参数。我怎样才能打印它？

* * *

我的应用程序是 iframe 应用程序。看看这张照片你可以去我的应用程序[http://apps.facebook.com/gayriciddi/](http://apps.facebook.com/gayriciddi/)然后点击主页上的链接看看

```
$view = empty($_GET['view']) ? 'home' : $_GET['view'];
    echo '<br />'.$view; 
    $testid = $_REQUEST['testid'];
    echo '<br />'.$testid.'<br />'; 
```

代码是否有效

.

![](../Images/9d870190df937f7bd07439bde1d82e2b.png)

我的 index.php：

```
<?php
    include ('config.php');
    include ('db_fns.php');
    header('Content-type: text/html; charset=UTF-8'); 

    print_r($fbme); 

    $controller = 'page';

    $view = empty($_GET['view']) ? 'home' : $_GET['view'];
    echo '<br />'.$view; 
    $testid = $_REQUEST['testid'];
    echo '<br />'.$testid.'<br />';

    $signed_request = $facebook->getSignedRequest();
    print_r($signed_request);

    //includes home.php
    include(WEBSITE_ROOT.'/views/'.$controller.'.php');
?> 
```

我家.php：

```
 <table width="601" border="0">
 <?php foreach($testler as $key => $test){?>
  <tr>
    <td width="53">&nbsp;</td>
    <td width="420"><a href="<?=FB_BASE_URL?>?view=acilis&testid=<?=$test['id']?>" target="_top"><?php echo $test['ad'];?></a></td>
    <td width="50">&nbsp;</td>
    <td width="50">&nbsp;</td>
  </tr>
 <?php } ?>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:00:07.250

只需使用 $_GET['app_data'] 因为它不像页面选项卡中那样属于签名请求的一部分

# c - 将代码转换为 Neon 程序集

> ID：11339726
> 
> 赞同：1
> 
> 时间：2012-07-05T07:34:00.453
> 
> 标签：c, assembly, arm, simd, neon

我正在将下面的代码翻译成 Neon Assembly。任何帮助将不胜感激。

```
void sum(int length, int *a, int *b, int *c, int *d, char *result)
{
   int i;

   for (i = 0; i < length; i++)
      {
          int sum = (a[i] + b[i] + c[i] + d[i])/4;
          if (sum > threshold)
             result[i] = 1;
          else
             result[i] = 0;
      }
} 
```

实际代码是图像二值化算法。上面的代码只是为了演示这个想法，而不是让简单的事情变得更复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:14:56.737

这是一个相当简单的实现。请注意，我们将划分和阈值测试转换为仅针对的测试`threshold * 4`（以消除划分）：

```
void sum(const int n, const int32_t *a, const int32_t *b, const int32_t *c, const int32_t *d, int32_t *result)
{
   const int32_t threshold4 = threshold * 4;
   const int32x4_t vthreshold4 = { threshold4, threshold4, threshold4, threshold4 };
   const uint32x4_t vk1 = { 1, 1, 1, 1 };
   int i;

   for (i = 0; i < n; i += 4)
   {
      int32x4_t va = vld1q_s32(&a[i]);    // load values from a, b, c, d
      int32x4_t vb = vld1q_s32(&b[i]);
      int32x4_t vc = vld1q_s32(&c[i]);
      int32x4_t vd = vld1q_s32(&d[i]);

      int32x4_t vsum = vaddq_s32(va, vb); // sum values form a, b, c, d
      vsum = vaddq_s32(vsum, vc);
      vsum = vaddq_s32(vsum, vd);

      uint32x4_t vcmp = vcgtq_s32(vsum, vthreshold4);
                                          // compare with threshold * 4
      int32x4_t vresult = (int32x4_t)vandq_u32(vcmp, vk1);
                                          // convert result to 0/1
      vst1q_s32(&result[i], vresult);     // store result
   }
} 
```

笔记：

*   完全未经测试的代码 - 可能需要进一步的工作
*   `result`已更改为`int32_t *`- 打包起来并不难，`uint8_t`但它为这个初始示例增加了很多复杂性，所以我想我现在会保持简单
*   `a`, `b`, `c`, `d`,`result`都需要16字节对齐
*   `n`必须是 4 的倍数
*   `a`, `b`, `c`,的总和`d`需要适合 32 位有符号整数
*   `threshold * 4`需要适合 32 位有符号整数

# php - 使用 htaccess 添加/删除斜杠

> ID：11339728
> 
> 赞同：0
> 
> 时间：2012-07-05T07:34:03.833
> 
> 标签：php, .htaccess, url

我有以下情况：如果用户输入类似

*   [http://domain.tld/category-a/////](http://domain.tld/category-a/////)或
*   [http://domain.tld/category-a](http://domain.tld/category-a)（末尾不带斜线）

他/她必须被重定向到原始 URL

*   [http://domain.tld/category-a/](http://domain.tld/category-a/)

如何使用 htaccess 实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:53:20.407

例如：如果你想重定向

```
From : http://www.project.com/myfolder/rss.php
To   : http://www.project.com/rss.php 
```

那么你应该把它写到你的 .htacess 文件中

```
Redirect /myfolder/rss.php http://www.project.com/rss.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:44:22.693

```
RewriteRule ^category-([^/]*)//([^/]*)$ ./category-$1/ [R, L]
RewriteRule ^category-([^/]*)$ ./category-$1/ [R, L] 
```

# c# - C# 中的通用空对象模式

> ID：11339729
> 
> 赞同：16
> 
> 时间：2012-07-05T07:34:04.053
> 
> 标签：c#, null-object-pattern

我想知道是否有任何方法可以在 C# 中实现通用空对象模式。通用空对象是所有引用类型的子类，就像`Nothing`在 Scala 中一样。这好像是

```
public class Nothing<T> : T where T : class 
```

但它无法编译，我不知道**如何实现`T`提供默认行为或抛出异常**的方法。以下是一些想法：

1.  使用反射？
2.  创建时使用表达式树`Nothing<T>`？它可能看起来像起订量。另一个问题来了：在产品代码中使用mock framework/library可以吗？
3.  使用动态类型？

我知道也许我应该为特定类型实现特定的空对象。我只是想知道是否有任何解决方案。

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T07:40:39.477

使用泛型，您不能定义继承自`T`. 如果您的意图是使用`if(x is Nothing<Foo>)`，那么这是行不通的。尤其是，您需要考虑抽象类型、密封类型和非默认构造函数。但是，您可以执行以下操作：

```
public class Nothing<T> where T : class, new()
{
    public static readonly T Instance = new T();
} 
```

但是，IMO 无法满足空对象的大多数关键功能；特别是，您很容易最终有人在做：

```
Nothing<Foo>.Instance.SomeProp = "abc"; 
```

（也许是偶然的，在将物体向下传递了 3 层之后）

坦率地说，我认为你应该只检查`null`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-05T07:39:42.880

这个怎么样？

```
public class Nothing<T> where T : class
{
     public static implicit operator T(Nothing<T> nothing)
     {
          // your logic here
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:41:02.463

由于存在密封类，因此您不能在通用情况下进行此类继承。许多类预计不会派生自，因此它是否可以工作可能不是一个好主意。

使用@abatishchev 建议的隐式运算符听起来像是一种可能的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-27T20:56:49.923

我在我的项目中使用这样的东西：

```
public interface IOptional<T> : IEnumerable<T> { }
public interface IMandatory<T> : IEnumerable<T> { } 
```

从 IEnumerable 派生的两个接口，用于与 LINQ 兼容

```
public class Some<T> : IOptional<T>
{
    private readonly IEnumerable<T> _element;
    public Some(T element)
        : this(new T[1] { element })
    {

    }
    public Some()
        : this(new T[0])
    {}
    private Some(T[] element)
    {
        _element = element;
    }
    public IEnumerator<T> GetEnumerator()
    {
        return _element.GetEnumerator();
    }
    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
}

public class Just<T> : IMandatory<T>
{
    private readonly T _element;

    public Just(T element)
    {
        _element = element;
    }
    public IEnumerator<T> GetEnumerator()
    {
        yield return _element;
    }
    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

Just 和 Some 类的实现

> 注意：这个类的实现非常相似，但有一个区别。类 Just 派生自接口 IMandatory 并且只有一个构造函数，这保证了类 Just 的实例内部总是有一个值。

```
public static class LinqExtensions
{
    public static IMandatory<TOutput> Match<TInput, TOutput>(
        this IEnumerable<TInput> maybe,
        Func<TInput, TOutput> some, Func<TOutput> nothing)
    {
        if (maybe.Any())
        {
            return new Just<TOutput>(
                        some(
                            maybe.First()
                        )
                    );
        }
        else
        {
            return new Just<TOutput>(
                        nothing()
                    );
        }
    }
    public static T Fold<T>(this IMandatory<T> maybe)
    {
        return maybe.First();
    }
} 
```

一些实用性的扩展

> 注意：扩展方法 Match 需要两个函数并返回 IMandatory，之后扩展方法 Fold 使用 .First() 而不做任何检查。

现在我们可以使用 LINQ 的全部功能并编写类似的代码（我的意思是 monads .SelectMany()）

```
var five = new Just<int>(5);
var @null = new Some<int>();

Console.WriteLine(
            five
                .SelectMany(f => @null.Select(n => f * n))
                .Match(
                    some: r => $"Result: {r}",
                    nothing: () => "Ups"
                )
                .Fold()
        ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T07:39:45.780

.NET Framework 中已经存在的 Nullable 实现怎么样？ [http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)

# c - av_find_stream_info 适用于文件，不适用于管道

> ID：11339730
> 
> 赞同：4
> 
> 时间：2012-07-05T07:34:05.130
> 
> 标签：c, ffmpeg, pipe, libavformat

我有以下代码：

```
av_register_all();
pFormatCtx = avformat_alloc_context();
const char* input = "pipe:";
AVInputFormat* iFormat = av_find_input_format("mpegts");
if ( avformat_open_input(&pFormatCtx, input, iFormat, NULL) != 0 )
         return -1;
int res = av_find_stream_info(pFormatCtx); 
```

当我的输入是一个常规文件时，这很好用，并且 pFormatCtx 填充了文件中的流。但是，当我将输入设置为“管道：”时，av_find_stream_info 返回 -1。

我正在使用相同的文件并通过运行管道它 `cat mpeg.ts | myApp`

有任何想法吗？

谢谢， 艾丽莎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T16:15:13.420

原来我使用的文件太短了。

`av_format_open_input`读取 8K 文件并`av_find_stream_info`根据 max_analyze_duration （的`AVFormatContext`）读取。

由于我的文件太短，它在到达之前就到达了管道的末端，`max_analyze_duration`因此返回了-1。

我仍然不确定为什么它与常规文件一起使用 - 也许它在调用`av_format_open_input`.

`max_analyze_duration`在任何情况下，我都可以通过设置较小的值或使用较长的文件来解决他的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T20:49:31.553

这是来自[这篇](http://iosvideokit.com/2014/02/13/minimizing-the-initial-delay/)关于减少延迟和[ffmpeg 流媒体指南的文章](https://trac.ffmpeg.org/wiki/StreamingGuide#Latency)

您可以为探针大小和最大分析持续时间提供最小值。

```
pFormatCtx->probesize = 32;
pFormatCtx->max_analyze_duration = 32; 
```

> 另外，请注意，较小的值仅适用于已知的复用器，否则可能由于缺少有关流的数据而无法完成连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T16:05:43.113

还值得注意的是，如果您从 中读取**MOV**文件`stdin`，更改`probesize`/的值`analyzeduration`可能无济于事。根据[此电子邮件线程](https://lists.ffmpeg.org/pipermail/ffmpeg-user/2012-November/011084.html)，这是 mov 容器格式的限制：

> 通常不可能通过标准输入读取 mov 文件，因为 mov 文件在文件的最后包含解码所需的必要信息（如编解码器等）是完全正常的。（这不是 FFmpeg 的限制，而是 mov 文件格式的一个特性。）

# php - 使用格式为 html 的 substr 限制文本时出错？

> ID：11339734
> 
> 赞同：1
> 
> 时间：2012-07-05T07:34:10.393
> 
> 标签：php

```
$text = '<p>Download game <a href="">Avatar</a> for <b>Iphone 3GS</b></p>';
<?php 
echo strip_tags(substr($text, 0, 10))." ..."; 
?> 
```

但结果是`...`。

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:37:57.347

将您的`$text`定义放在`<?php ?>`标签中。否则，PHP 将其视为普通输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:43:47.453

正如所指出的，$text 变量声明需要在 PHP 部分中。

另外，我建议您先 strip_tags 然后再对结果进行 substr ，否则 strip_tags 将无法删除所有标签。

IE：

```
<?php
$text = '<p>Download game <a href="">Avatar</a> for <b>Iphone 3GS</b></p>';
echo substr(strip_tags($text), 0, 10)." ..."; 
```

甚至可能如下：所以你会得到`Download game Avatar ...Iphone 3GS`

```
<?php
$text = '<p>Download game <a href="">Avatar</a> for <b>Iphone 3GS</b></p>';
$ntext = strip_tags($text);
echo substr($ntext, 0, 20). 
     (strlen($ntext) > 20 ? "...".substr($ntext, min(20,strlen($ntext)-10)):""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:39:25.877

尝试这个

```
<?php 
  $text = '<p>Download game <a href="">Avatar</a> for <b>Iphone 3GS</b></p>';
  echo strip_tags(substr($text, 0, 10))." ..."; 
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:44:09.683

我试过：

```
<?php

 $text = '<p>Download game <a href="">Avatar</a> for <b>Iphone 3GS</b></p>';
 echo strip_tags(substr($text, 0, 10))." ...";

?> 
```

输出是`Downloa ...`

你希望展示什么？

# jakarta-ee - 如何将数据源动态添加到 jboss 7

> ID：11339736
> 
> 赞同：1
> 
> 时间：2012-07-05T07:34:15.647
> 
> 标签：jakarta-ee, jboss, datasource, jboss5.x, jboss7.x

我有一个应用程序，它为应用程序的每个实例动态添加数据库，然后在 JBoss 5 上将一个数据源文件写入部署文件夹，以便应用程序可以使用新数据库（并被锁定到它）。

在 JBoss 7 中，数据源配置位于standalone.xml 中。更重要的是，如果我在这个文件中输入新的数据源，它们似乎不会被读取，也没有可用的数据源。

有谁知道升级到 JBoss 7 后如何重现这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:14:57.720

在较新版本的 JBoss AS7 -ds.xml 策略将起作用。

但是管理 CLI 为您提供了另一种执行方式（因为它们不会有扫描延迟，这可能是更推荐的方式）。

您可以使用命令文件调用 jboss-cli.sh（有关如何执行此操作的详细信息，请参见此处：[http](http://planet.jboss.org/post/how_to_create_an_manage_datasources_in_as7) ://planet.jboss.org/post/how_to_create_an_manage_datasources_in_as7 ），也可以直接使用本机 API（https： //docs.jboss.org/author/display/AS71/The+native+management+API)。

使用后一种方法除了添加之外，您将能够查询现有数据源并更新它们。

# asp.net - 无论如何，是否可以检测用户是否在我们网站的某个页面上点击喜欢

> ID：11339737
> 
> 赞同：0
> 
> 时间：2012-07-05T07:34:18.290
> 
> 标签：asp.net, facebook, web

如果无论如何要检测用户是否在我们网站上的某个页面上点赞，那么我们就可以为人们在某个页面上点赞的人提供某种奖励。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:19:19.340

当然，您可以使用每当用户单击链接时都会启动的 javascript

或者

您可以使用 Facebook api，引用：

> 我如何知道用户何时点击了“赞”按钮？
> 
> 如果您使用的是 XFBML 版本的按钮，您可以通过 FB.Event.subscribe 订阅 'edge.create' 事件。

# javascript - javascript中电子邮件地址的TLD验证

> ID：11339740
> 
> 赞同：0
> 
> 时间：2012-07-05T07:34:31.857
> 
> 标签：javascript, validation, email, tld

我正在验证电子邮件地址。但这并不能验证我是否使用了正确的 tld。我只想验证 .com、.in、.org、.gov 和 .jo 。如何做到这一点？我的代码是这样的：

```
function validateConsumerEmail(){
    email = document.getElementById('customer_email').value;
    if ((email == null)||(email == "")){
        alert("Please Enter a Valid Consumer Email Address...")
        document.consumerEmail.customer_email.focus();
        return false
    }
    if (echeck(email)==false){
       email=""
       document.consumerEmail.customer_email.focus();
       return false
    }
    if(email != ''){
      var splitting = email.split('@');
      if(!isNaN(splitting[0])){
    alert('Please provide proper email address...');
    document.consumerEmail.customer_email.focus();
    return false;
      }
      if(splitting[0].length<6 || splitting[0].length > 250){
    alert('Please provide proper email address...');
    document.consumerEmail.customer_email.focus();
    return false;
       }

    }
} 
```

其中 customer_email 是字段名称的 id。

```
function echeck(str) {

   var at="@"
   var dot="."
   var lat=str.indexOf(at)
   var lstr=str.length
   var ldot=str.indexOf(dot)
   if (str.indexOf(at)==-1){
      alert("Please provide valid email ID.");
      return false
   }
   if (str.indexOf(at)==-1 || str.indexOf(at)==0 || str.indexOf(at)==lstr){
      alert("Please provide valid email ID.");
      return false
   }

   if (str.indexOf(dot)==-1 || str.indexOf(dot)==0 || str.indexOf(dot)==lstr){
     alert("Please provide valid email ID.");
     return false
   }

   if (str.indexOf(at,(lat+1))!=-1){
     alert("Please provide valid email ID.");
     return false
   }

   if (str.substring(lat-1,lat)==dot || str.substring(lat+1,lat+2)==dot){
    alert("Please provide valid email ID.");
    return false
   }

   if (str.indexOf(dot,(lat+2))==-1){
    alert("Please provide valid email ID.");
    return false
   }

   if (str.indexOf(" ")!=-1){
    alert("Please provide valid email ID.");
    return false
   }

  return true                   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:51:27.160

试试这个。对于电子邮件地址的验证，您确实想使用 REGEX，因为您当前的代码允许通过各种无效的电子邮件，并且不允许许多有效的电子邮件。

也就是说，能够真正验证任何有效的电子邮件是一个讨论点，并且已经存在多年。我的示例基于[此电子邮件匹配器 REGEX](http://www.regular-expressions.info/email.html)的改编版本。

我还稍微简化了您的代码。`echeck`因为你没有提供这个，所以我没有打电话。根据需要重新添加。

```
function validateConsumerEmail(){

    //prep
    var email = document.getElementById('customer_email'), error;

    //validate
    if (!email.value || !/^[\w\.%\+\-]+@[a-z0-9.-]+\.(com|gov|in|jo|org)$/i.test(email.value))
        error = 'Please enter a valid e-mail, with the domain .com, .in, .org, .jo or .gov';

    //feedback
    if (error) {
        email.focus();
        return false;
    } else {
        //OK - do something here
    }

} 
```

​</p>

# hibernate - 有没有办法在没有 JpaContainer 的情况下使用 vaadin 和 jpa？

> ID：11339748
> 
> 赞同：0
> 
> 时间：2012-07-05T07:35:10.050
> 
> 标签：hibernate, jpa, vaadin

我正在尝试使用 Vaadin 和 JPA Persistence 层做一个简单的概念证明。

我有一个与 fetchType = Lazy 有@OneToMany 关系的 Bean，当我尝试使用我的 DAO 将这些 bean 的集合添加到表中时。我有下一个例外：

```
Caused by: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: common.domain.Bill.detail, no session or session was closed 
```

有没有办法在没有 JPAContainer 的情况下使用 Vaadin 和 JPA？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T21:07:45.183

您可以使用 Bean(Item)Container 并在那里添加您的实体。

如果你只使用一个容器，你就没有像使用 JPAContainer 那样的延迟加载了。

使用容器的组件仍然会从容器中进行延迟加载，但所有对象都保存在容器中。然后必须自己完成容器的延迟加载。

有关 Bean(Item)Container 和 Containers 的更多信息，请[点击此处](https://vaadin.com/book/-/page/datamodel.container.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:21:22.970

这是一个旧帖子，但是...

让我们看看您的用例：
-您的浏览器请求您的应用程序
-在您的服务器端代码中，您使用 EntityManager 加载 bean（您的 bean 在会话中），但它的关系实例（它是惰性的）是代理 => 关系实例只会在您第一次访问它时加载
- 您的浏览器收到响应
- 您单击一个按钮（例如）向服务器发送请求
- 您尝试添加/更改某些内容到惰性关系
- 如代理没有会话（它是使用前一个会话创建的，但现在它不再附加到它也不是会话），它会引发异常

您可以尝试以下解决方案之一：
1-尝试合并您的 bean（将 bean 附加到当前会话）：`bean = em.merge(bean);`就在添加/更改惰性关系之前
2-尝试在加载实体时强制加载惰性关系第一次：`bean.getMyLazyRelationship();`
3-在修改之前再次加载您的实体
4-将 LAZY 更改为 EAGER，但它（通常）不是一个好的解决方案

使用容器**可能会**也**可能不会**解决这个问题。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:33:19.827

我正在使用来自[lazyquerycontainer](http://vaadin.com/addon/lazy-query-container)插件的EntityContainer 类。顾名思义，它支持延迟加载。它只是工作:)

一些示例代码：

```
 resultsTable = new Table();

    resultsTable.setSelectable(true);
    resultsTable.setCaption("JpaQuery");
    resultsTable.setPageLength(40);
    resultsTable.setImmediate(true);
    resultsTable.setEditable(false);
    resultsTable.setWriteThrough(true);

    container = new EntityContainer<Call>(em, false, true, true, Call.class, 100, new Object[] {"imsi"}, new boolean[] {true});

    container.addContainerProperty(LazyQueryView.PROPERTY_ID_ITEM_STATUS, QueryItemStatus.class, QueryItemStatus.None, true, false);
    container.addContainerProperty("startTime", Date.class, null, true, true);
    container.addContainerProperty("stopTime", Date.class, null, true, true);
    container.addContainerProperty("imsi", String.class, null, false, true);
    container.addContainerProperty("imei", String.class, null, false, true);
    container.addContainerProperty("callType", Integer.class, null, true, true);
    container.addContainerProperty("cdpn", String.class, null, true, true);
    container.addContainerProperty("cgpn", String.class, null, true, true);
    container.addContainerProperty("status", Integer.class, null, true, true);
    container.addContainerProperty("mmRelCause", Integer.class, null, true, true);
    container.addContainerProperty("rrRelCause", Integer.class, null, true, true);

    resultsTable.setContainerDataSource(container);

    resultsTable.setVisibleColumns(new String[] {"startTime" , "stopTime" , "imsi", "imei", "callType" , "cdpn", "cgpn", "status", "mmRelCause"      , "rrRelCause" });
    resultsTable.setColumnHeaders(new String[]  {"Start time", "Stop time", "IMSI", "IMEI", "Call Type", "CDPN", "CGPN", "Status", "MM Release Cause", "RR Release Cause"});

    resultsTable.setColumnCollapsingAllowed(true);
    resultsTable.setColumnCollapsed("mmRelCause", true);
    resultsTable.setColumnCollapsed("rrRelCause", true); 
```

要基于 JQL 过滤数据，您可以执行`filter`传递过滤器字符串和绑定变量映射的方法。

```
...
whereParameters.put("stopTimeFrom", filterParams.getStopTimeFrom());                    
where = "e.startTime >= :stopTimeFrom";
...

container.filter(where, whereParameters); 
```

如果你更喜欢 Criteria API，你可以使用[criteriacontainer](http://vaadin.com/addon/jpa-criteria-lazy-container)。

# .net - 带过滤器的 DynamoDB 扫描，匹配“is-in-set”条件

> ID：11339752
> 
> 赞同：14
> 
> 时间：2012-07-05T07:35:15.860
> 
> 标签：.net, amazon-web-services, amazon-dynamodb, database-scan

我正在尝试对 DynamoDB 表使用 Scan 操作来匹配具有给定“标签”的项目。项目的标签存储在单个集合属性中。例如：

```
machine-1: 标签 = "windows", "iis", "64bit"
machine-2: 标签 = "windows", "fs"
```

现在，我有一个支持高级支持的支持案例，但这需要一些时间。我想要做的是匹配“标签”包含条目“windows”*和*“iis”的机器。

例如，我可以通过使用`CONTAINS`模式匹配单个属性值，并使用字符串值“windows”指定单个属性值。

但是，`CONTAINS`不支持单个 AttributeValue 或多个 AttributeValue 中的集合。它给出了一个错误。

所以我尝试`IN`了（AWS 高级支持也建议这样做）：但是，无论我使用单个 AttributeValue（甚至只是再次寻找“窗口”还是多个），我都得到零结果。

的文档`IN`很差。该操作用 4 个无意义的词来描述，实际上是：“*检查完全匹配*”。

当我等待支持可能会继续进行几轮问答时，是否有人读过这篇文章，熟悉 Scan 的这种查询？（如果可以的话，请先测试你在回答中所说的话：我想我已经尝试了明显的那些！）

对于参考，扫描文档：[http ://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_Scan.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_Scan.html)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T09:38:37.127

这来自 AWS 高级支持：

*“你好。*

*我从 Dynamo DB 得到确认，目前不支持。CONTAINS 针对集合只能使用单个值执行。"*

呃。因此，现在我将为每个可能的标签创建一个新属性，在每列中使用“真”或“假”，然后过滤我的扫描。

# java - 为智能手机和平板电脑开发 Android 应用程序

> ID：11339753
> 
> 赞同：0
> 
> 时间：2012-07-05T07:35:20.630
> 
> 标签：java, android, version

我计划开发一个非常简单的应用程序（我的第一个 Android 应用程序），我想在智能手机设备和平板电脑上运行它。

我知道有很多 Android 版本，如果我没记错的话，3.x 和 4.x 仅适用于平板电脑。

所以我的问题是：我应该开发两个不同版本的应用程序吗？在不同设备上进行开发是否有一些指导方针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:46:55.893

您提到您的应用程序非常简单。我不知道你的 web 开发背景是什么，但如果你有一些（HTML、CSS、Javascript）你必须检查[Phonegap](http://phonegap.com/)。它更容易在 phonegap 中开发，并且您可以获得多种设备的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:38:29.980

`4.x` 适用于手机和平板电脑。 `3.x` 仅适用于平板电脑。

你可以阅读[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:01:40.333

您将在刚刚发布的链接的 Google 开发人员指南中了解您需要的所有内容，但这个概念非常简单。Android 运行时会自动搜索最佳布局文件以满足您当前设备的需求（密度、屏幕尺寸等）。该决定将由您指定的布局文件夹的名称完成。

因此，假设在一个 Android 4.0 项目中，您只`layout`指定了一个默认布局文件夹。您已经准备好在手机和平​​板电脑上部署它，它们将使用文件`layout`夹中的布局文件。

但是，您可以创建另一个文件夹，例如`layout-sw800dp`. 屏幕宽度至少为 800 像素的设备（例如平板电脑）现在将首先在此文件夹中搜索您的布局 xml 文件（例如`main.xml`）。只有在那里找不到布局文件时，它才会尝试在其他布局文件夹中找到它们。

本[Google 开发人员指南](http://developer.android.com/guide/practices/screens_support.html)将帮助您了解所需的所有详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:38:30.167

你应该做的是为不同的设备开发一个具有不同 UI 的应用程序。你可以阅读这篇关于支持不同屏幕尺寸的[精彩谷歌文章。](http://developer.android.com/guide/practices/screens_support.html)

这样您就可以编写一次应用程序，并为不同的设备使用不同的屏幕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T07:40:40.780

对于不同的设备，Java 代码不会改变。不同的布局只需要不同的布局。

检查

[链接1](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

[链接2](http://developer.android.com/guide/practices/screens_support.html)

谢谢

# java - 使用 EntityListIterator 进行搜索需要适当的事务

> ID：11339756
> 
> 赞同：2
> 
> 时间：2012-07-05T07:35:23.680
> 
> 标签：java, translation, ofbiz

我正在尝试通过 OfBiz 中的简单加入从 db 中获取一些数据。这是放置在从*controller.xml调用的**.java*方法中的代码

 *```
DynamicViewEntity dve = new DynamicViewEntity();
dve.addMemberEntity("PR", "Product");
dve.addAliasAll("PR", "productName");
dve.addAliasAll("PR", "description");
dve.addRelation("one", "", "ProductAttribute", ModelKeyMap .makeKeyMapList("productId"));
dve.addMemberEntity("PA", "ProductAttribute");
dve.addAlias("PA", "attrName");

// Selected Rows
List selectedFields = UtilMisc.toList("productName", "description");

// Condition
List conditionList = UtilMisc.toList(new EntityExpr("attrName", EntityOperator.LIKE, attr), new EntityExpr("productName", EntityOperator.LIKE, key));
EntityConditionList condition = new EntityConditionList(conditionList, EntityOperator.AND);

EntityListIterator eli = delegator.findListIteratorByCondition(dve, condition, null, selectedFields, null, null);
List result = eli.getPartialList(0, 10);
eli.close(); 
```

运行它时，这是我收到的异常：

*无法找到返回没有事务的 EntityListIterator 的查找。将此调用包装在事务中。*

在进一步调查中，我发现了这一点：

默认情况下，service-multi 将围绕所有服务包装一个大事务，超时设置为服务的 _rowCount 事务超时。如果您不希望将所有服务调用包装在一个事务中，请在 invoke="" 之后使用 global-transaction="false" 参数。

所以我明白，如果我没有指定任何内容，则应该围绕我的服务进行交易。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:24:23.723

您是否将此代码包装在服务中？确保你没有从控制器调用它*

# transactions - 启动日志“未找到事务管理器”

> ID：11339758
> 
> 赞同：13
> 
> 时间：2012-07-05T07:35:29.377
> 
> 标签：transactions, jetty

当我启动码头时，以下行出现在日志中：

```
:INFO:oejpw.PlusConfiguration:No Transaction manager found
- if your webapp requires one, please configure one. 
```

*   这是什么意思？
*   我怎么知道我的 webapp 需要事务管理器？
*   哪些功能为此类事务管理器服务，或者如果我没有，我缺少什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T12:32:35.740

通常，如果您需要一个，您就知道您需要一个。

像 Atomikos 或 JOTM 这样的事务管理器就是这里所指的。用于利用 JTA api 的分布式事务：

*   [http://en.wikipedia.org/wiki/Java_Transaction_API](http://en.wikipedia.org/wiki/Java_Transaction_API)

因此，在 jetty 的情况下，使用 jetty-plus 配置时，在启动时没有通过 jndi 绑定此类 api 是一条信息性消息。jetty-plus 本身就是一个模块，用于集成到严格的 servlet-api 意义之外但仍然通常对人们有用的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T15:13:15.990

我也有这个警告消息，并且在 spring 配置文件中有配置事务管理器。

但一切正常，所以，我认为您可以忽略此消息。

# java - 为什么在通过反射调用 main 时出现这些错误

> ID：11339761
> 
> 赞同：1
> 
> 时间：2012-07-05T07:35:30.977
> 
> 标签：java, reflection, loader

这是一个自定义执行器，它通过在自定义加载器加载的加载类中搜索它的 main 来执行应用程序。当我尝试使用我的执行程序执行程序时出现问题。

正在执行的程序的源代码可以位于以下链接

[http://agile.csc.ncsu.edu/SEMaterials/realestate/code/RealEstate.zip](http://agile.csc.ncsu.edu/SEMaterials/realestate/code/RealEstate.zip)

```
package executorOfLoaderClasses;

import java.io.File;
import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.ArrayList;
import customClassLoader.ClassLoaderOfExtClass;

/**
 * @author Sanyam
 *         
 *         sanyamgoyal007@gmail.com
 */

public class ClassExecutor{

    private ClassLoaderOfExtClass classLoader;
    private byte[][] ArrayOfClasses;
    private String[] ArrayOfBinaryNames;
    @SuppressWarnings("rawtypes")
    private ArrayList<Class> loadedClasses;
    private ArrayList<String> loadedClasesNames;
    private Object[] parameters;

    @SuppressWarnings("rawtypes")
    public ClassExecutor() {
        classLoader = new ClassLoaderOfExtClass();
        new ArrayList<Class>();
        loadedClasses = new ArrayList<Class>();
        loadedClasesNames = new ArrayList<String>();
    }

    @SuppressWarnings("unchecked")
    public void execute(File[] file, String[] binaryPaths) {
        Object[] actuals = { new String[] { "" } };
        Method m = null;
        try {
            Field classesx=ClassLoaderOfExtClass.class.getDeclaredField("classes");
            classesx.setAccessible(true);
        } catch (SecurityException e1) {
            e1.printStackTrace();
        } catch (NoSuchFieldException e1) { 
            e1.printStackTrace();
        }

        /*for (int i = 0; i < file.length; i++) {
            for (int j = 0; j < file.length; j++) {

                try {

                    @SuppressWarnings("rawtypes")
                    Class c = classLoader.loadClassCustom(file[i], binaryPaths[i]);
                //Fied classex=classLoader.getResource("classes");
                }catch(Exception e){

                }

            }
        }
        Class<?>[]classesxx= getLoadedClasses(classLoader);
        System.out.println("Loaded classes have size "+ classesxx.length);*/

        for (int i = 0; i < file.length; i++) {
            try {
                @SuppressWarnings("rawtypes")
                Class c = classLoader.loadClassCustom(file[i], binaryPaths[i]);

                try {
                    if (c.getMethod("main", new Class[] { String[].class }) != null) {
                        m = c.getMethod("main", new Class[] { String[].class });
                    } else {

                        System.out.println("This class does not contain main");
                        continue;
                    }

                } catch (NoSuchMethodException e) {
                //  System.out.println("Main not found!!!");
                    // System.out.println("M here");
                    // e.printStackTrace(); // not printing stack trace
                } catch (SecurityException e) {
                    e.printStackTrace();
                }

            } catch (ClassNotFoundException e) {
                System.out.println("No such class definition exist!!");
                // TODO Auto-generated catch block
                // e.printStackTrace();
            }

        }

        try {

            m.invoke(null, actuals);

            // CallStack.print();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @SuppressWarnings({ })
    public void execute(ArrayList<byte[]> stuffedFiles,
            ArrayList<String> binaryPaths) {
        convertToArray(stuffedFiles, binaryPaths);
        loadAllClasses(ArrayOfClasses, ArrayOfBinaryNames);
        Thread myThread = new MyThread();
        myThread.start();
        /*Object[] actuals = { new String[] { "" } };
        Method m = null;

         * Method[] m1= new Method[10]; for (Class c : loadedClasses) {
         * m1=c.getMethods(); } for(Method m2: m1){
         * System.out.println(m2.getName()); }

         System.out.println(loadedClasses.size()); 
        for (Class c : loadedClasses) {

             * System.out.println(c.toString());
             * System.out.println(c.getConstructors());

            // for (int i = 1; i < file.size(); i++) {

             * for(Method meth : c.getMethods()){ meth.setAccessible(true);
             * 
             * }

            try {
                if (c.getMethod("main", new Class[] { String[].class }) != null) {
                    m = c.getMethod("main", new Class[] { String[].class });
                    break;
                } else {

                //  System.out.println("This class does not contain main");
                    continue;
                }

            } catch (NoSuchMethodException e) {

                System.out.println("Program does not contain main");

            } catch (SecurityException e) {
                e.printStackTrace();
            }

        }

        try {

            if(parameters==null){

            m.invoke(null, actuals);
            }
            else{
                try {

                    System.out.println("It Fails Here");
                    m.invoke(null, parameters);
                } catch (Exception e) {
                    System.out.println("Illegal arguments");
                }
            }

            // CallStack.print();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }*/
// remove till here
        /*TraceParser pr = new TraceParser();
        pr.traceCollector();
        pr.traceStruct();
         ArrayList<SingleTraceStructure> parsedExpressions = pr
            .getTracedObjects();
        AllStackTraceValidator validator = new AllStackTraceValidator(
                parsedExpressions);
        finalObjects = validator.getTraceObjects();

        for(SingleTraceStructure ob : finalObjects){
            validatedTraceObjects.add(ob);
        }
        TraceObjectsMinimizer tracerObj = new TraceObjectsMinimizer();
        tracerObj.sortObjects(finalObjects);*/

        /*
         * for(SingleTraceStructure obj : finalObjects){
         * System.out.println(obj.getCalledBy());
         * System.out.println(obj.getClassName()+":"+obj.getMethodName()+":"+
         * obj.getCallSequenceNumbr()+obj.getCalledBy()); }
         */
    }

    private void convertToArray(ArrayList<byte[]> classes,
            ArrayList<String> binaryPaths) {
        /* = new byte[classes.size()][]; */

        ArrayOfClasses = new byte[classes.size()][];
        ArrayOfBinaryNames = new String[binaryPaths.size()];

        int i = 0;
        for (byte[] tempClass : classes) {
            ArrayOfClasses[i] = tempClass;
            i++;
        }

        int j = 0;
        for (String name : binaryPaths) {
            ArrayOfBinaryNames[j] = name;
            j++;
        }

    }

    @SuppressWarnings("rawtypes")
    public void loadAllClasses(byte[][] classes, String[] names) {

        for (int i = 0; i < classes.length; i++) {
            System.out.println("Round ----->" + i);
            Class c = null;

            for (int j = 0; j < classes.length; j++) {
                if (classes[j] != null) {
                    try {
                        c = classLoader.loadClassCustom(classes[j], names[j]);
                    } catch (ClassNotFoundException e) {
                        // TODO Auto-generated catch block
                        System.out.println("unsucessful");
                        e.printStackTrace();
                    }
                    if (c != null) {
                        System.out.println("loading successfull");
                        loadedClasses.add(c);
                        loadedClasesNames.add(names[j]);
                        classes[j] = null;
                        names[j] = null;
                    } else {
                        // move on
                    }
                } else {
                    // do nothing
                }

            }
        }
    }

    @SuppressWarnings("rawtypes")
    public ArrayList<Class> getLoadedClasses() {
        return loadedClasses;
    }

    public void parametersToMain(ArrayList<String> strs){

        if(strs!=null){
        String[] obj = new String[strs.size()];
        int i=0;
        for(String str : strs){
            obj[i]= (String)str;
            i++;
        }
        parameters=obj;
        }

        else{
        parameters=null;
        }
    }

    // return loaded classes of a loader

    public static Class<?>[] getLoadedClasses(final ClassLoader loader){

        final Class<?>[] classes = getLoadedClasses(loader);
        return classes;

    }

    public class MyThread extends Thread{
        Object[] actuals = { new String[] { "" }};
        public void run(){
            Method m = null;

            /*
             * Method[] m1= new Method[10]; for (Class c : loadedClasses) {
             * m1=c.getMethods(); } for(Method m2: m1){
             * System.out.println(m2.getName()); }
             */
            /* System.out.println(loadedClasses.size()); */
            for (Class<?> c : loadedClasses) {
                /*
                 * System.out.println(c.toString());
                 * System.out.println(c.getConstructors());
                 */
                // for (int i = 1; i < file.size(); i++) {
                /*
                 * for(Method meth : c.getMethods()){ meth.setAccessible(true);
                 * 
                 * }
                 */

                try {
                    if (c.getMethod("main", new Class[] { String[].class }) != null) {
                        m = c.getMethod("main", new Class[] { String[].class });
                        break;
                    } else {

                    //  System.out.println("This class does not contain main");
                        continue;
                    }

                } catch (NoSuchMethodException e) {

                    System.out.println("Program does not contain main");

                } catch (SecurityException e) {
                    e.printStackTrace();
                }

            }

            try {

                if(parameters==null){

                    //System.out.println("Invoker of" + actuals[1]);
                m.invoke(null, actuals);
                }
                else{
                    try {

                        System.out.println("It Fails Here");
                        m.invoke(null, parameters);
                    } catch (Exception e) {
                        System.out.println("Illegal arguments");
                    }
                }

                // CallStack.print();
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }
} 
```

我的执行者的问题是在执行房地产程序时出现以下错误

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at executorOfLoaderClasses.ClassExecutor$MyThread.run(ClassExecutor.java:365)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 1
    at edu.ncsu.realestate.gui.Main.main(Main.java:39)
    ... 5 more 
```

我意识到，在调用 main 时，我将参数传递给 main，它是 string 的对象，`""`但是 realestate 程序默认情况下不接受任何参数，所以暂时我将传递给方法的参数更改为 null 只是为了检查现在是否正常工作。

并再次生成错误，如下所示

```
java.lang.IllegalArgumentException: wrong number of arguments
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at executorOfLoaderClasses.ClassExecutor$MyThread.run(ClassExecutor.java:366) 
```

为什么会发生这种情况，http链接中提到的房地产程序默认情况下不接受任何参数。

这种执行方式对其他可能的输入程序有问题吗？

我提到的房地产程序在 Eclipse 中作为 Java 应用程序运行时工作得非常好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:44:30.210

# 问题中代码中的实际错误

您调用的 Main 方法需要零个或两个参数，但您传递了一个。

```
 public static void main(String[] args) {
            GameMaster master = GameMaster.instance();
            MainWindow window = new MainWindow();
            GameBoard gameBoard = null;
            if(args.length > 0) {
                    if(args[0].equals("test")) {
                            master.setTestMode(true);
                    }
                    try {
                            Class c = Class.forName(args[1]); // <-- this is l. 39
                            gameBoard = (GameBoard)c.newInstance();
                    } 
```

你应该写

```
Object[] actuals = { new String[] { }}; 
```

或者

```
Object[] actuals = { new String[0] }; 
```

为了不传递一个空参数，但根本不传递任何参数。

# 关于参数类型的一般信息

如果`main`是 Java 应用程序的启动方法，它*总是*有签名

```
public static void main(String[] args) 
```

出于这个原因，从 java 的角度来看，它总是一个需要*单个*参数的方法，它是一个*字符串数组。*因此，在命令行上，您使用可变数量的参数，但在 Java 应用程序中，它始终是单个数组。一些开发人员可能会将参数声明为`String... args`，这意味着您可以在 Java 应用程序中传递可变数量的字符串，但这只是编译器将转换为数组创建的语法糖。对于反射，您始终必须自己传递数组，因为那里没有为可变参数方法自动创建数组。`String[]`所以总是通过反射传递一个类型的参数。

`Method.invoke`接受`Object...`参数，因此您可以传递`Object[]`包含所有 Java 参数的 an，也可以单独传递每个参数并让编译器`Object[]`从这些参数中构造 an。因此，您是否将`String[]`数组直接传递给`invoke`或将其包装在一个`Object[]`中取决于您，就像您对`actuals`.

# python - 从文本文件中获取 ( ) 中的值并使用 python 将其写入文本文件

> ID：11339764
> 
> 赞同：-4
> 
> 时间：2012-07-05T07:35:59.723
> 
> 标签：python

读取包含的文本文件

> 段：xy (10472.14 3793.00) xy (10471.87 3796.71) 宽度 (0.00)

并获取 xy( ) 中存在的值并将它们写入磁盘上的新文本文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:10:08.923

你真的应该尝试自己写*一些东西*：

打开输入文件并读取`line`.

打开输出文件进行写入。

`finditer`from`re`模块执行连续搜索，并在成功时返回*匹配对象*。循环调用它。构造一个正则表达式来查找'xy ('，然后是任何东西，然后是')'。内括号捕获“任何东西”。你将需要一个最小的匹配。

写出由匹配对象 ( )`groups()`上调用的方法重新调整的元组的第一个元素。`m`这将是捕获的“任何东西”。

现在去阅读手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:50:51.527

您没有提供太多信息，但是这个非常基本的代码可以完成这项工作（未经测试的代码）：

```
whole = open('my_file','r').read()
for x in whole.split('\n'):
    buf = x[10:28] + x[34:49] # adjust these values accordingly

open('out_file','w').write(buf) 
```

请注意，此代码不会“适应”不同类型的字符串（例如模式小数点），因此正则表达式解决方案可能是更好的方法，但这将是您的功课；-)

# java - 使用 webdriver 捕获带有背景的屏幕截图

> ID：11339766
> 
> 赞同：1
> 
> 时间：2012-07-05T07:36:03.520
> 
> 标签：java, selenium, webdriver

我知道如何使用 截屏`TakesScreenshot`，但它没有任何附加参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:37:07.267

从 api 来看，我不认为 kwargs 是一种选择。

[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/TakesScreenshot.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/TakesScreenshot.html)

唯一的选择似乎是输出类型——文件、字节或base64。

# iphone - 提供不区分大小写的数据库搜索（核心数据）

> ID：11339775
> 
> 赞同：0
> 
> 时间：2012-07-05T07:36:27.503
> 
> 标签：iphone, case-sensitive

我是 iPhone 的初学者。我想做不区分大小写的搜索。使用的数据库助手：`Core Data`.

以下是我的代码：

```
 -(WebAttendee *) FindAttendeeBy:(NSString *) badgeID_
    {

        AppDelegate_Shared *delegate1 = [[UIApplication sharedApplication]delegate];

        badgeID_=[badgeID_ stringByReplacingOccurrencesOfString:@"\\" withString:@"\\\\"];

        badgeID_=[badgeID_ stringByReplacingOccurrencesOfString:@"'" withString:@"\\'"];

        self.managedObjectContext = delegate1.managedObjectContext;

        return (WebAttendee *)[self FetchManagedObject:@"WebAttendee" :[NSString stringWithFormat:@ "Barcode LIKE [c] %@",badgeID_ ]];

    }
    -(NSManagedObject *)FetchManagedObject:(NSString *)entity_:(NSString *)predicate_
        {

            NSFetchRequest *request = [[NSFetchRequest alloc] init];
            NSEntityDescription *entity = [NSEntityDescription entityForName:entity_ inManagedObjectContext:managedObjectContext];
            [request setEntity:entity];

            NSPredicate *predicate = [NSPredicate predicateWithFormat:predicate_];
            [request setPredicate:predicate];

            NSError *error = nil;

//--------------------------crashes at this step---------------------------------           
            mutableFetchResults = [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];

            NSLog(@"FetchResult=%@",mutableFetchResults);
            [request release];
            if (mutableFetchResults == nil) {
                // Handle the error.
            }

            if([mutableFetchResults count]!=0)
            return [mutableFetchResults objectAtIndex:0];
            else {
                return nil;
            }

        }

but i am getting the following error:

    2012-07-05 12:58:52.917 SpotLighter[963:207] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unimplemented SQL generation for predicate (Barcode LIKE[c] 1123)'
    *** Call stack at first throw:
    (
        0   CoreFoundation                      0x01783be9 __exceptionPreprocess + 185
        1   libobjc.A.dylib                     0x018d85c2 objc_exception_throw + 47
        2   CoreData                            0x00fe4676 -[NSSQLGenerator newSQLStatementForFetchRequest:ignoreInheritance:countOnly:nestingLevel:] + 1270
        3   CoreData                            0x00f1ca78 -[NSSQLAdapter _newSelectStatementWithFetchRequest:ignoreInheritance:] + 488
        4   CoreData                            0x00f1c881 -[NSSQLAdapter newSelectStatementWithFetchRequest:] + 49
        5   CoreData                            0x00f1c72e -[NSSQLCore newRowsForFetchPlan:] + 430
        6   CoreData                            0x00f1bab5 -[NSSQLCore objectsForFetchRequest:inContext:] + 357
        7   CoreData                            0x00f1b66e -[NSSQLCore executeRequest:withContext:error:] + 206
        8   CoreData                            0x00fcb0ec -[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 1084
        9   CoreData                            0x00f18807 -[NSManagedObjectContext executeFetchRequest:error:] + 359
        10  SpotLighter                         0x0000ff26 -[EntityCommands FetchManagedObject::] + 310
        11  SpotLighter                         0x0001436e -[WebAttendeeController FindAttendeeBy:] + 300
        12  SpotLighter                         0x0009aac6 -[MapBadge Map:::] + 4673
        13  SpotLighter                         0x000687d7 -[SpotLighterHomeScreen SpotLighterDataReceived::::] + 1111
        14  SpotLighter                         0x0002ca83 -[SpotlighterViewController txtNumericBadgeFieldDone:] + 445
        15  UIKit                               0x0051da6e -[UIApplication sendAction:to:from:forEvent:] + 119
        16  UIKit                               0x005ac1b5 -[UIControl sendAction:to:forEvent:] + 67
        17  UIKit                               0x005ae647 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
        18  UIKit                               0x005ad1f4 -[UIControl touchesEnded:withEvent:] + 458
        19  UIKit                               0x007a8987 _UIGestureRecognizerSortAndSendDelayedTouches + 3609
        20  UIKit                               0x007a90fc _UIGestureRecognizerUpdateObserver + 927
        21  CoreFoundation                      0x01764fbb __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 27
        22  CoreFoundation                      0x016fa0e7 __CFRunLoopDoObservers + 295
        23  CoreFoundation                      0x016c2bd7 __CFRunLoopRun + 1575
        24  CoreFoundation                      0x016c2240 CFRunLoopRunSpecific + 208
        25  CoreFoundation                      0x016c2161 CFRunLoopRunInMode + 97
        26  GraphicsServices                    0x01f07268 GSEventRunModal + 217
        27  GraphicsServices                    0x01f0732d GSEventRun + 115
        28  UIKit                               0x0052c42e UIApplicationMain + 1160
        29  SpotLighter                         0x00002168 main + 102
        30  SpotLighter                         0x000020f9 start + 53
    )
    terminate called after throwing an instance of 'NSException' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:02:41.777

```
 return (WebAttendee *)[self FetchManagedObject:@"WebAttendee" :[NSString stringWithFormat:@ "Barcode LIKE [c] %@",badgeID_ ]]; 
```

给出错误...

我将上面的行替换为

```
return (WebAttendee *)[self FetchManagedObject:@"WebAttendee" :[NSString stringWithFormat:@ "Barcode LIKE [c] '%@'",badgeID_ ]]; 
```

效果很好！

# objective-c - 如何在 iOS < 4 中停止 UIView 动画

> ID：11339777
> 
> 赞同：0
> 
> 时间：2012-07-05T07:36:31.917
> 
> 标签：objective-c, ios, animation, uiview

有什么方法可以在 iOS 3 中停止动画？

我知道：

```
 #import <QuartzCore/QuartzCore.h>
 [view.layer removeAllAnimations]; 
```

, 但它仅适用于 iOS 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:41:44.120

试试这个代码：

```
if([view.layer repondsToSelector:@selector(removeAllAnimations)]) //Check if the CALayer responds to removeAllAnimations method for iOS4+
    [view.layer removeAllAnimations];
else
    [view.layer addAnimation:nil forKey:@"TheKeyOfTheAnimation"]; // Change TheKeyOfTheAnimation with key you have added animation for, you can also use nil for the key... 
```

**更新：**根据文档 removeAllAnimations 自 iOS2.0 起可用 removeAllAnimations 删除附加到接收器的所有动画。

```
- (void)removeAllAnimations
Availability
Available in iOS 2.0 and later.
Declared In
CALayer.h 
```

# jquery - jquery：history.back(1) 问题

> ID：11339781
> 
> 赞同：12
> 
> 时间：2012-07-05T07:36:54.447
> 
> 标签：jquery

我对 jquery 和 history.back() 有疑问：我有一个链接：

```
<a href="#" id="backLink">Link back</a> 
```

我不能使用类似 href="javascript:history.back()" 的内容，因为所使用的 CMS 正在阻止内联 JS（无论出于何种原因）。

所以我放置了一个这样的JS：

```
$("#backLink").click(function() {
    event.preventDefault();
    history.back(1);
}); 
```

但这似乎不起作用！在 Safari 和 Chrome 上没问题，但在 FF、IE 上这个链接不起作用！

有没有办法在所有浏览器上使用它——或者上面的代码有什么错误？

提前致谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-05T07:39:02.170

可能您缺少指定`event`为函数参数，请尝试指定：

```
$("#backLink").click(function(event) {
    event.preventDefault();
    history.back(1);
}); 
```

换句话说，您遇到了`event.preventDefault();`最有可能阻止以下代码运行或工作的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-12T08:41:30.597

一个简单的方法：

```
 <a href="javascript: history.go(1)" id="backLink">Link back</a> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-04-18T08:01:29.047

我会尝试：

```
javascript: history.back(1) 
```

否则使用：

```
javascript: history.go(1) 
```

浏览器将留在原处。这不是最初要求的，是吗？

# asp.net - 如何授予网络服务在证书存储中安装证书的权限

> ID：11339782
> 
> 赞同：3
> 
> 时间：2012-07-05T07:36:57.220
> 
> 标签：asp.net, c#-4.0, certificate, x509certificate, network-service

我们开发了一个 ASP.Net 应用程序。我的 apppool 在网络服务识别下运行。通过代码我们需要安装证书。由于我的应用程序池使用网络服务特权运行，它会引发加密异常“访问被拒绝”。

我尝试了以下选项：

1.  为以下路径授予网络服务的完全权限：“C:\Documents and Settings\All Users\Application Data\Microsoft\Crypto\RSA\MachineKeys”
2.  安装以下工具以授予网络服务权限。WinHttpCertCfg.exe 无法授予证书根权限。此工具仅有助于授予访问特定证书的权限。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:38:57.597

根据在 msdn 上找到的文章

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa384088(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384088(v=vs.85).aspx)

它说：

> 注意 用户必须具有足够的权限才能使用此工具，这要求用户是管理员并且是安装客户端证书（如果已安装）的同一用户。

所以检查网络服务是否是本地管理员组的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T04:05:31.683

整个故事 [ASP.net 对根证书存储的权限](https://stackoverflow.com/questions/1271497/asp-net-permissions-to-root-certificate-store)

从下面的链接下载 WCF 示例项目并编译 FindPrivatekey 项目。（提示：添加参考 system.security 否则你会发现 undefine X509Certificate2UI 函数错误） [http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=21459](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=21459)

# c# - 参数无效异常

> ID：11339783
> 
> 赞同：1
> 
> 时间：2012-07-05T07:37:01.980
> 
> 标签：c#

我尝试使用网络服务从 iPhone 上传图像，但出现异常，例如 -

> {System.ArgumentException：参数无效。在 System.Drawing.Image.FromStream（流流，布尔值 useEmbeddedColorManagement，布尔值 validateImageData）}

在以下代码中

```
string acFolder = Server.MapPath("~/Images/");
string imgname = DateTime.UtcNow.ToString().Replace(" ", "").Replace("AM", "").Replace("PM", "").Replace("/", "").Replace("-", "").Replace(":", "") + ".jpeg";

byte[] imageBytes = Convert.FromBase64String(image.Replace(" ", "+"));
MemoryStream ms = new MemoryStream(imageBytes, 0, imageBytes.Length);

// Convert byte[] to Image
ms.Write(imageBytes, 0, imageBytes.Length);
System.Drawing.Image image2 = System.Drawing.Image.FromStream(ms,true,true);
image2.Save(acFolder + imgname); 
```

我在这一行得到了例外

```
 System.Drawing.Image image2 = System.Drawing.Image.FromStream(ms,true,true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:45:51.790

鉴于它[`ArgumentException`](http://msdn.microsoft.com/en-us/library/3w1b3114)与传递给该[`FromStream`](http://msdn.microsoft.com/en-us/library/21zw9ah6.aspx)方法的参数之一有关。

如果您打开上面两个链接中的第二个，您将从文档中看到`ArgumentException`当传递的流不代表有效的图像格式时引发 an（您可以通过检查异常的[ParamName](http://msdn.microsoft.com/en-us/library/system.argumentexception.paramname.aspx)属性来确认这一点。

这意味着`Image`该类不支持正在上传的图像格式。要么，要么图像的字节以某种方式被搞砸了。您自己的代码似乎支持这一点 - 您在 base 64 字符串中将 '+' 替换为 ' '。Base64 不打算在其中包含空格 - 去掉那行代码。

*更新*

既然你说没有它就行不通 - 我猜数据是以一种传入`'+'`被解释为空间的方式传递的，这就是你试图恢复它们的原因。如果在请求正文中发送这不应该发生，所以因为我猜测 iPhone 应用程序和您的服务器需要使用[修改后的 base64 来](http://en.wikipedia.org/wiki/Base64#URL_applications)代替 URL。

# cassandra - Cassandra 1.1.1 在使用 Hector 1.0.5 插入大量数据时崩溃

> ID：11339786
> 
> 赞同：2
> 
> 时间：2012-07-05T07:37:22.553
> 
> 标签：cassandra, hector

我正在使用 Cassandra 1.1.1 和使用 Hector 1.0.5，正在尝试将数据（大容量）插入到列族中。在我的程序执行期间，cassandra 服务器崩溃并显示 Out-of-memory 错误。在那之后，我别无选择，只能退出服务器。对于我试图存储 html 文件内容的一个列族，这会重复，但我从来没有机会完成它。html 文件内容从 225 KB 数据到一行 700 KB 数据不等，我试图插入近 1000 条记录。

* * *

在程序中它抛出以下

```
Exception in thread "main" me.prettyprint.hector.api.exceptions.HectorException: All host pools marked down. Retry burden pushed out to client.
    at me.prettyprint.cassandra.connection.HConnectionManager.getClientFromLBPolicy(HConnectionManager.java:393)
    at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:249)
    at me.prettyprint.cassandra.model.ExecutingKeyspace.doExecuteOperation(ExecutingKeyspace.java:97)
    at me.prettyprint.cassandra.model.MutatorImpl.execute(MutatorImpl.java:243)
    at com.epocrates.soa.rx.util.DiseaseImporter.insertDisease(DiseaseImporter.java:207)
    at com.epocrates.soa.rx.util.DiseaseImporter.batchProcess(DiseaseImporter.java:81)
    at com.epocrates.soa.rx. 
```

util.DiseaseImporter.main(DiseaseImporter.java:37)

## 在 System.log 中，我找到以下内容

```
java.io.IOError: java.io.IOException: Map failed
    at org.apache.cassandra.db.commitlog.CommitLogSegment.<init>(CommitLogSegment.java:127)
    at org.apache.cassandra.db.commitlog.CommitLogSegment.freshSegment(CommitLogSegment.java:80)
    at org.apache.cassandra.db.commitlog.CommitLogAllocator.createFreshSegment(CommitLogAllocator.java:244)
    at org.apache.cassandra.db.commitlog.CommitLogAllocator.access$500(CommitLogAllocator.java:49)
    at org.apache.cassandra.db.commitlog.CommitLogAllocator$1.runMayThrow(CommitLogAllocator.java:104)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:30)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Map failed
    at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:758)
    at org.apache.cassandra.db.commitlog.CommitLogSegment.<init>(CommitLogSegment.java:119)
    ... 6 more
Caused by: java.lang.OutOfMemoryError: Map failed
    at sun.nio.ch.FileChannelImpl.map0(Native Method)
    at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:755)
    ... 7 more

java.util.concurrent.RejectedExecutionException: ThreadPoolExecutor has shut down
    at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor$1.rejectedExecution(DebuggableThreadPoolExecutor.java:60)
    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:767)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:658)
    at org.apache.cassandra.service.StorageProxy.insertLocal(StorageProxy.java:457)
    at org.apache.cassandra.service.StorageProxy.sendToHintedEndpoints(StorageProxy.java:314)
    at org.apache.cassandra.service.StorageProxy$2.apply(StorageProxy.java:119)
    at org.apache.cassandra.service.StorageProxy.performWrite(StorageProxy.java:260)
    at org.apache.cassandra.service.StorageProxy.mutate(StorageProxy.java:193)
    at org.apache.cassandra.thrift.CassandraServer.doInsert(CassandraServer.java:637)
    at org.apache.cassandra.thrift.CassandraServer.internal_batch_mutate(CassandraServer.java:587)
    at org.apache.cassandra.thrift.CassandraServer.batch_mutate(CassandraServer.java:595)
    at org.apache.cassandra.thrift.Cassandra$Processor$batch_mutate.getResult(Cassandra.java:3112)
    at org.apache.cassandra.thrift.Cassandra$Processor$batch_mutate.getResult(Cassandra.java:3100)
    at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:32)
    at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:34)
    at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:186)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:30:39.253

这意味着您已经用完了将提交日志段映射到的地址空间。

最佳解决方案：升级到 64 位 JVM。

更糟糕的解决方案：在 cassandra.yaml 中，将 commitlog_segment_size_in_mb 和 commitlog_total_space_in_mb 都设置为 16。

这不是第一次出现这种情况。我已经打开[https://issues.apache.org/jira/browse/CASSANDRA-4422](https://issues.apache.org/jira/browse/CASSANDRA-4422)来改进默认设置。

# javascript - 根据某些条件，Knockout JS 绑定到可观察对象内的数组元素

> ID：11339787
> 
> 赞同：0
> 
> 时间：2012-07-05T07:37:29.953
> 
> 标签：javascript, knockout.js, knockout-2.0

我想绑定我的文本输入值

```
<input type="text" id="2" data-bind="value :  ??whatToWriteHere??    "> 
```

到以下可观察对象中的第二个对象的 name 属性（其中 input.id == object.id ）

```
myObject = {
    myArray : [ { id:1, name:'one' },{ id:2, name:'two' },{ id:3, name:'three' } ]
},
myObservableObject = ko.observable(myObject); 
```

我应该用什么表达式替换 ??whatToWriteHere??

编辑：实际上数组不一定在另一个对象内

```
 myArray : [ { id:1, name:'one' },{ id:2, name:'two' },{ id:3, name:'three' } ]
 myObservableArray = ko.observableArray(myArray); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:07:59.520

我有一个基于[ko.mapping 插件](http://knockoutjs.com/documentation/plugins-mapping.html)和为您的目的创建的自定义绑定的解决方案。

你可以在这里看到一个工作小提琴：

[http://jsfiddle.net/ingro/MhdZp/](http://jsfiddle.net/ingro/MhdZp/)

整个想法是映射您的 observableArray，然后使用映射插件的 mappedIndexOf 函数检索与您的输入 id 相关的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:27:32.330

这取决于输入的数据上下文是什么。如果 myObservableArray 中的对象被绑定到模板化输入元素，那么绑定将是“值：名称”。你在使用foreach吗？或者这里只有一个输入元素，您明确想要绑定到第二个数组元素，其中 myObservableArray 只是在页面的某处声明？如果是这样，它将是“值：myObservableArray()[1].name”。

# java - ECDSA 算法对字符串进行签名的教程

> ID：11339788
> 
> 赞同：19
> 
> 时间：2012-07-05T07:37:47.113
> 
> 标签：java, cryptography, digital-signature, bouncycastle

你能帮我找到一个简单的教程，说明如何在 Java 中使用 ECDSA 算法对字符串进行签名。但不使用任何第三方库，如 bouncycastle。只是JDK 7。我发现很难搜索一个简单的例子，我是密码学的新手。

* * *

```
import java.io.*;
import java.security.*;

public class GenSig {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        /*
         * Generate a DSA signature
         */

        try {

            /*
             * Generate a key pair
             */

            KeyPairGenerator keyGen = KeyPairGenerator.getInstance("DSA", "SUN");
            SecureRandom random = SecureRandom.getInstance("SHA1PRNG", "SUN");

            keyGen.initialize(1024, random);

            KeyPair pair = keyGen.generateKeyPair();
            PrivateKey priv = pair.getPrivate();
            PublicKey pub = pair.getPublic();

            /*
             * Create a Signature object and initialize it with the private key
             */

            Signature dsa = Signature.getInstance("SHA1withDSA", "SUN");

            dsa.initSign(priv);

            String str = "This is string to sign";
            byte[] strByte = str.getBytes();
            dsa.update(strByte);

            /*
             * Now that all the data to be signed has been read in, generate a
             * signature for it
             */

            byte[] realSig = dsa.sign();
            System.out.println("Signature: " + new String(realSig));

        } catch (Exception e) {
            System.err.println("Caught exception " + e.toString());
        }
    }
} 
```

如何为 ECDSA 修改它？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-05T23:36:52.933

这是基于您的示例的小示例。

**注意：**这是此答案的原始代码，请参阅下一个代码片段以获取更新版本。

```
import java.math.BigInteger;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.security.SecureRandom;
import java.security.Signature;

public class ECDSAExample {

    public static void main(String[] args) throws Exception {
        /*
         * Generate an ECDSA signature
         */

        /*
         * Generate a key pair
         */

        KeyPairGenerator keyGen = KeyPairGenerator.getInstance("EC");
        SecureRandom random = SecureRandom.getInstance("SHA1PRNG");

        keyGen.initialize(256, random);

        KeyPair pair = keyGen.generateKeyPair();
        PrivateKey priv = pair.getPrivate();
        PublicKey pub = pair.getPublic();

        /*
         * Create a Signature object and initialize it with the private key
         */

        Signature dsa = Signature.getInstance("SHA1withECDSA");

        dsa.initSign(priv);

        String str = "This is string to sign";
        byte[] strByte = str.getBytes("UTF-8");
        dsa.update(strByte);

        /*
         * Now that all the data to be signed has been read in, generate a
         * signature for it
         */

        byte[] realSig = dsa.sign();
        System.out.println("Signature: " + new BigInteger(1, realSig).toString(16));

    }
} 
```

更新：这里是稍微改进的示例，删除了不推荐使用的算法。它还使用[RFC 8422 中指定的 SECG 符号“secp256r1”明确请求 NIST P-256 曲线。](https://www.rfc-editor.org/rfc/rfc8422)

```
import java.math.BigInteger;
import java.security.*;
import java.security.spec.ECGenParameterSpec;

public class ECDSAExample {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws Exception {
        /*
         * Generate an ECDSA signature
         */

        /*
         * Generate a key pair
         */

        KeyPairGenerator keyGen = KeyPairGenerator.getInstance("EC");

        keyGen.initialize(new ECGenParameterSpec("secp256r1"), new SecureRandom());

        KeyPair pair = keyGen.generateKeyPair();
        PrivateKey priv = pair.getPrivate();
        PublicKey pub = pair.getPublic();

        /*
         * Create a Signature object and initialize it with the private key
         */

        Signature ecdsa = Signature.getInstance("SHA256withECDSA");

        ecdsa.initSign(priv);

        String str = "This is string to sign";
        byte[] strByte = str.getBytes("UTF-8");
        ecdsa.update(strByte);

        /*
         * Now that all the data to be signed has been read in, generate a
         * signature for it
         */

        byte[] realSig = ecdsa.sign();
        System.out.println("Signature: " + new BigInteger(1, realSig).toString(16));

    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-07T19:55:02.043

```
class ECCCipher {
    @Override
    public byte[] sign(PrivateKey privateKey, String message) throws Exception {
        Signature signature = Signature.getInstance("SHA1withECDSA");
        signature.initSign(privateKey);

        signature.update(message.getBytes());

        return signature.sign();
    }

    @Override
    public boolean verify(PublicKey publicKey, byte[] signed, String message) throws Exception {
        Signature signature = Signature.getInstance("SHA1withECDSA");
        signature.initVerify(publicKey);

        signature.update(message.getBytes());

        return signature.verify(signed);
    }
} 
```

=========================

```
public class ECCCipherTest {

private final KeyPairGenerator keygen;

public ECCCipherTest() throws NoSuchProviderException, NoSuchAlgorithmException, InvalidAlgorithmParameterException {
    Security.addProvider(new BouncyCastleProvider());
    this.keygen = KeyPairGenerator.getInstance("ECDSA", "BC");
    keygen.initialize(new ECGenParameterSpec("brainpoolP384r1"));
}

@Test
public void ECC_CipherTest_1() throws Exception {
    String message = "hello world";

    ICipher<PrivateKey, PublicKey> cipher = new ECCCipher();
    KeyPair keyPair = keygen.generateKeyPair();

    byte[] encrypted = cipher.sign(keyPair.getPrivate(), message);

    Assert.assertTrue(cipher.verify(keyPair.getPublic(), encrypted, message));
} 
```

}

这是我项目中的一个小代码片段。这个对我有用。我也包括了一个junit测试；希望这会有所帮助。

以防万一有人想知道我们如何加载私钥和 pubkey：（注意：privKey 是表示 java 中 BigInteger 的字节数组，而 pubKey 是二进制格式的曲线点）

```
 @Override
public PrivateKey generatePrivateKey(byte[] keyBin) throws InvalidKeySpecException, NoSuchAlgorithmException {
    ECNamedCurveParameterSpec spec = ECNamedCurveTable.getParameterSpec("secp256k1");
    KeyFactory kf = KeyFactory.getInstance("ECDSA", new BouncyCastleProvider());
    ECNamedCurveSpec params = new ECNamedCurveSpec("secp256k1", spec.getCurve(), spec.getG(), spec.getN());
    ECPrivateKeySpec privKeySpec = new ECPrivateKeySpec(new BigInteger(keyBin), params);
    return kf.generatePrivate(privKeySpec);
}

@Override
public PublicKey generatePublicKey(byte[] keyBin) throws InvalidKeySpecException, NoSuchAlgorithmException {
    ECNamedCurveParameterSpec spec = ECNamedCurveTable.getParameterSpec("secp256k1");
    KeyFactory kf = KeyFactory.getInstance("ECDSA", new BouncyCastleProvider());
    ECNamedCurveSpec params = new ECNamedCurveSpec("secp256k1", spec.getCurve(), spec.getG(), spec.getN());
    ECPoint point =  ECPointUtil.decodePoint(params.getCurve(), keyBin);
    ECPublicKeySpec pubKeySpec = new ECPublicKeySpec(point, params);
    return kf.generatePublic(pubKeySpec);
} 
```

# javascript - 将Class添加到链接中指定的元素的动态代码

> ID：11339792
> 
> 赞同：0
> 
> 时间：2012-07-05T07:37:52.917
> 
> 标签：javascript, jquery

我正在尝试通过单击按钮向我的 HTML 中指定的元素添加一个类。

HTML：

```
<div id="servicenext"><a href="#nav2"><p class="four">next</p></a> 
```

脚本：

```
$('#servicenext a').click(function(){
     $('ul.navigation a').removeClass('active');
     $(*the div in the href*).addClass('active');
}); 
```

我希望有动态的代码。基本上，它可以通过将类添加到`a`href 中指定的任何元素来工作。这是因为我有很多这些并且不想单独编码它们。

编辑：

谢谢詹姆斯！那太棒了！但我必须道歉，我对自己的要求感到困惑！我真正想要的`addClass`实际上`li`是`ul.navigation a`

所以，如果我想对了，我正在尝试这样做：

*   通过单击 servicenext 按钮，
*   代码获取`id`的`div``href`
*   `addClass`应用于`li`相同的`href`

我猜应该在某个地方有 if else 语句，请原谅我，我不是真正的程序员。

我想出的胡言乱语是：

```
$('#servicenext a').click(function(){
     $('ul.navigation a').removeClass('active');
     $($(this).attr("href").find($('ul.navigation li a').attr("href"))).addClass('active');
}); 
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T07:40:15.180

由于`href`属性的值已经是一个有效的 ID 选择器，你可以简单地使用属性的值：

```
$($(this).attr("href")).addClass('active'); 
```

请注意，您必须获取实际的属性值。本机 DOM 属性返回一个实际的 URL，而不仅仅是属性的值。

这是一个[工作示例](http://jsfiddle.net/jamesallardice/KtZ6z/1/)。

# iphone - TBXML 解析问题，而值无法进入 UILabel

> ID：11339793
> 
> 赞同：0
> 
> 时间：2012-07-05T07:37:55.690
> 
> 标签：iphone, ios, xcode, nsurlconnection, tbxml

在我的应用程序中，我正在使用 TBXML 解析器，我需要从 xml 文件中获取一个值并将其打印在标签上......这是我在服务器中的 xml 文件

```
 <gold>
 <price>
 <title>22 K Gold</title>
 </price>
 <price>
 <title>24 K Gold</title>
 </price>
 </gold> 
```

任何我的 Viewcontroller.h 看起来像

```
#import <UIKit/UIKit.h>
#import "TBXML.h"

 @interface ViewController : UIViewController{

IBOutlet UILabel *lab;
TBXML *tbxml;
}

@end 
```

我的 Viewcontroller.m 看起来像

```
 - (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
NSData *xmlData = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:@"http://www.abcde.com/sample.xml"]];
 tbxml = [[TBXML alloc]initWithXMLData:xmlData];

TBXMLElement * root = tbxml.rootXMLElement;

if (root)
{
    TBXMLElement * elem_PLANT = [TBXML childElementNamed:@"price" parentElement:root];
    while (elem_PLANT !=nil)
    {
        TBXMLElement * elem_BOTANICAL = [TBXML childElementNamed:@"title" parentElement:elem_PLANT];
        NSString *botanicalName = [TBXML textForElement:elem_BOTANICAL];
        lab.text=[NSString stringWithFormat:@"re %@", botanicalName];

        elem_PLANT = [TBXML nextSiblingNamed:@"price" searchFromElement:elem_PLANT]; 

        elem_BOTANICAL = [TBXML childElementNamed:@"title" parentElement:elem_PLANT]; 

        botanicalName = [TBXML textForElement:elem_BOTANICAL];
        lab1.text=[NSString stringWithFormat:@"re %@", botanicalName];
    }
}

} 
```

我收到了 BAD_ACCESS 线程。我错过了什么吗...请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:41:05.503

```
lab.text=[NSString stringWithFormat:@"re %@",elem_BOTANICAL]; 
```

**编辑 1.0：**

```
lab.text=[NSString stringWithFormat:@"re %@", botanicalName]; 
```

**编辑 2.0：**

```
lab.text=[NSString stringWithFormat:@"re %@", botanicalName];

NSString *plantName = [TBXML textForElement: elem_PLANT];

lab1.text=[NSString stringWithFormat:@"re %@", plantName]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:13:00.473

首先，我建议您以单独的方法解析您的 XML 文件，这样您的视图就不会弄乱您的模型。为您的 XML 项创建一个对象模型。然后，例如，在一种方法中，您使用代表 XML 文件中的项目的对象填充数组。只有这样，当您通过解析 XML 检索这些对象时，您才应该将此数组与您的视图绑定。

第二件事是你应该把这条线

```
elem_PLANT = [TBXML nextSiblingNamed:@"price" searchFromElement:elem_PLANT]; 
```

在 while 循环结束时，因为在第一次迭代中您只使用第一项，这是在 while 循环开始之前检索的。所以，如果你把它放在中间，就像你做的那样，在某个时刻，在解析 XML 结束时，这行之后的下一行将使用一个 nil 对象。

第三件事是，在从 TBXMLElement 获取文本之前，您应该检查它是否不为零：

```
NSString *plantName;
if (elem_PLANT) {
 plantName = [TBXML textForElement: elem_PLANT]; 
} 
```

# sql - 替换 SQL 中字符串的开头

> ID：11339801
> 
> 赞同：3
> 
> 时间：2012-07-05T07:38:27.450
> 
> 标签：sql, sql-server

```
SELECT REPLACE([strUrl], '/myoldurl', '/mynewurl') FROM [UrlRewrite] 
```

如果`strUrl`是`/myoldurl/myoldurl_something_else`，则返回`/mynewurl/mynewurl_something_else`。我希望它是`/mynewurl/myoldurl_something_else`。

如何从 SQL 中的字符串开头替换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T07:39:37.100

```
SELECT REPLACE([strUrl], '/myoldurl/', '/mynewurl/') FROM [UrlRewrite] 
```

解决马丁的观点：

```
SELECT CASE WHEN [strUrl] = '/myoldurl' THEN '/mynewurl' ELSE REPLACE([strUrl], '/myoldurl/', '/mynewurl/') END FROM [UrlRewrite] 
```

或者

```
SELECT 
    CASE 
    WHEN LEFT([strUrl], LEN('/myoldurl')) = '/myoldurl'
        THEN '/mynewurl' + SUBSTRING([strUrl], LEN('/myoldurl')+1, LEN([strUrl]))
    ELSE [strUrl]
    END
FROM [UrlRewrite] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T12:59:04.017

嗨，您可以使用 STUFF 功能检查这个简单的解决方案。

```
DECLARE @url varchar(255)='/myoldurl/myoldurl_something_else' 
SELECT STUFF(@url,CHARINDEX('old',@url,1),3,'new') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T07:44:46.440

怎么样

```
SELECT '/mynewurl' + SUBSTRING([strUrl], LEN('/myoldurl')+1,8000) FROM [UrlRewrite]
WHERE [strUrl] LIKE '/myoldurl%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:46:19.990

要从字符串的开头替换，您可以过滤使用`LIKE`，或者如果这不适合您的查询，请使用`CASE`，`SUBSTRING`并`CHARINDEX`有条件地进行替换

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-30T22:33:56.663

在您的示例中，请这样做：

```
SELECT REPLACE([strUrl], '/myoldurl/', '/mynewurl/') FROM [UrlRewrite] 
```

# c++ - 测试 std::wstring 长度中的分段错误

> ID：11339806
> 
> 赞同：0
> 
> 时间：2012-07-05T07:38:30.813
> 
> 标签：c++, std, wstring

我只是不明白。我有一个函数可以从列表中读取词干字符串，检查每个字符串是否包含标点符号，并在单个单词图像的循环中构建短语。当我在 if 语句中检查字符串构建/包含**s.length() > 0的短语时，我得到一个段错误。**这是功能：

```
std::wstring
Phrase::userFriendlyTerms() {
    std::wstring s = L"";

    List<Object> *terms = getTerms();

    Iterator<Object> *i = terms->iterator();
    for (; i->hasNext();) {
        StemmedTerm *t = (StemmedTerm *) i->next();
        std::wstring image = t->getTerm();

        // --- gdb shows me a seg. fault with s.length()
        if (s.length() > 0 &&
            !((image.compare(L",") == 0) || (image.compare(L"?" == 0))
                || (image.compare(L"!") == 0)
                || (image.compare(L";") == 0))) {
            s.append(L" ");
        }
        s.append(image);
    }   
    delete i;

    return s;
} 
```

确切的错误信息是：

```
Program received signal SIGSEGV, Segmentation fault.
__wcslen (s=0x0) at wcslen.c:30
30  wcslen.c: No such file or directory.
    in wcslen.c
(gdb) run
The program being debugged has been started already.
Start it from the beginning? (y or n) n
Program not restarted.
(gdb) backtrace
#0  __wcslen (s=0x0) at wcslen.c:30
#1  0x00007ffff7b89e56 in std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::compare(wchar_t const*) const () from /usr/lib/libstdc++.so.6
#2  0x00000000004833ed in Phrase::userFriendlyTerms (this=0x1425ac0) at algorithm/Phrase.cpp:56 
```

也许我是盲人或错过了什么......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:41:54.143

这里看起来很可疑

```
(image.compare(L"?" == 0) 
```

你确定你不是故意的

```
(image.compare(L"?") == 0) 
```

# c# - TextBoxWatermarkExtender 在 Response.Write 后丢失文本

> ID：11339807
> 
> 赞同：3
> 
> 时间：2012-07-05T07:38:41.420
> 
> 标签：c#, asp.net, textbox, watermark, response.write

我正在将 asp.net 导出`gridview`到 excel 工作表`Response.Write(*stringBuilder*)`，但是单击按钮时`TextBoxes`会丢失`TextBoxWatermarkExtender`文本。任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:02:22.383

你的 CSS 有问题……像这样工作……

```
.yourWatermarkedClass

{

color: Black;
font-family: Arial;

font-size: 11px;
border: solid 1px #a9a9a9;

text-indent:2px;
vertical-align:middle;

text-align:right;
background-image:url(../images/yourfileName.png);

background-repeat:no-repeat;
} 
```

# windows-phone-7 - Windows Phone 消息框中的可点击 URL

> ID：11339808
> 
> 赞同：1
> 
> 时间：2012-07-05T07:38:45.533
> 
> 标签：windows-phone-7, c#-4.0, windows-phone-7.1, messagebox, prompt

我想在我的消息框中显示一个 URL，用户可以在 Wp7 芒果上单击并导航到该 URL。这可能吗？如果是，我该如何实施？

我的消息框编码如下：

```
 public static void customizedMessageBox(int messageboxtype, string title, string text, IEnumerable<string> buttons, int focusbutton, MessageBoxIcon icon, AsyncCallback callback, object state)
    {
        if (!Guide.IsVisible)
        {
            try
            {
                ProgressBarControl.dismissProgressBar();
                Guide.BeginShowMessageBox(" ", text, buttons, focusbutton, MessageBoxIcon.None, callback, state);
                messageboxType = messageboxtype;
            }
            catch (GuideAlreadyVisibleException ex)
            {
                Logger.log("MsgBox", "Exception : messageboxtype: " + messageboxtype
                    + "\n" + ex.Message + "\n" + ex.StackTrace);
            }
        }
        //return messageboxtype;
    }
   public static void OnMessageBoxClosed(IAsyncResult ar)
    {
        int? dialogResult = Guide.EndShowMessageBox(ar);
        Game game;
        try
        {

            Logger.log("MsgBox", "result: " + dialogResult + " msg type: " + messageboxType);

            switch (messageboxType)
            {  case 7:
                    //ERROR E4000 case
                    switch (dialogResult)
                    {
                        case 0:

                            string url;
                            //url = CacheManager.getInstance().getApplicationSettings(CacheManager.APP_APK_UPGRADE_URI);
                            url = DataManager.URL_VALUE;
                            if (Utils.isNullString(url))
                            {
                                //url = CacheManager.getInstance().getUpgradeURL();
                            }
                            WebBrowserTask browse = new WebBrowserTask();
                            browse.URL = url;
                            browse.Show();
                            break;
                        default:
                            //delete data from the DB
                            ProgressBarControl.displayProgressBar(0, 10, AppResources.DOWNLOADING);
                            try
                            {
                                //byte[] data = (byte[])CacheManager.getInstance().getPersistanceData(Utils.MINOR_UPGRADE_DATA);
                                byte[] data = (byte[])CacheManager.getInstance().getDataFromDataFile();
                                if (data != null && data.Length > 0)
                                {
                                    DataManager.getInstance().processMyWidgetResponse(data);
                                    DataManager.getInstance().refresUI();
                                }
                            }
                            catch (Exception ex)
                            {
                            }
                            finally
                            {
                                //CacheManager.getInstance().deletaFromApplicationCache(Utils.MINOR_UPGRADE_DATA);
                            }

                            break;
                    }
                    break;

                default:
                    break;
            }
        }
        catch (Exception ex)
        {

            Logger.log(TAG, ex.Message);

        }
        finally
        {
             ProgressBarControl.dismissProgressBar();
        }
    } 
```

我这样调用消息框：-

```
 UIListen.customizedMessageBox(Utils.ERROR_CODE_E4000, ERROR_FORCE_REGISTRATION, responseHeaders[HEADER_URL_NAME, 1], Utils.valuesOk, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:54:12.017

看看这个：[http ://coding4fun.codeplex.com/](http://coding4fun.codeplex.com/)

探索他制作的不同类型的自定义对话框\消息框。您可以将此作为参考并自己制作，也可以直接使用现有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:01:19.330

考虑显示为用户提供正确选项的自定义屏幕或 xaml 页面。您可以提供任何您想要的选项。按钮等

# ajax - Spring依赖错误

> ID：11339809
> 
> 赞同：-1
> 
> 时间：2012-07-05T07:38:50.953
> 
> 标签：ajax, spring

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-core-asl</artifactId>
    <version>1.9.7</version>
    </dependency>
    <dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>1.9.0</version>
</dependency> 
```

我收到一个错误：

> （“cvc-complex-type.2.4.a：发现以元素'依赖'开头的无效内容。'{“http://www.springframework.org/schema/beans”之一：import，“http:// www.springframework.org/schema/beans":别名, "http://www.springframework.org/schema/beans":bean, WC[##other:"http://www.springframework.org/schema/豆”]}' 是
> 预期的。）

我已被包含（jackson-mapper-asl 和 jackson-core-asl）到我的工作空间中的库中，但没有得到为什么会发生此错误，请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:04:29.690

您有两件事混合在一起：Spring 配置文件和 Maven 的项目配置文件 (pom.xml)。该`<dependency>`元素属于 pom.xml 文件，而不是 Spring 配置。

此外，您不需要在任何地方包含 jar 文件，Maven 会处理依赖关系。

# excel - 函数参数 VBA

> ID：11339811
> 
> 赞同：2
> 
> 时间：2012-07-05T07:39:00.937
> 
> 标签：excel, function, vba, arguments

我有这三个功能：

当我运行前 2 个函数时，没有问题，但是当我运行最后一个函数 (LMTD) 时，它显示“除以零”，但当我调试一些参数时，有些参数有值，有些没有。我知道我必须做什么，但我想知道为什么我必须这样做，因为这对我来说毫无意义。

Tinn-function 没有 Tut 的参数，所以我必须将它们添加到 Tinn-function 的参数中。Tut 也是如此，它不知道 Tinn 的所有论点，而 LMTD 必须同时拥有 Tinn 和 Tut 的论点。如果我这样做，一切都会顺利进行。为什么我必须这样做？

```
Public Function Tinn(Tw, Qw, Qp, Q, deltaT)

Tinn = (((Tw * Qw) + (Tut(Q, fd, mix) * Q)) / Qp) + deltaT

End Function 
```

* * *

```
Public Function Tut(Q, fd, mix)

Tut = Tinn(Tw, Qw, Qp, Q, deltaT) _
    - (avgittEffektAiUiLMTD() / ((Q * fd * mix) / 3600))

End Function 
```

* * *

```
Public Function LMTD(Tsjo)

LMTD = ((Tinn(Tw, Qw, Qp, Q, deltaT) - Tsjo) - (Tut(Q, fd, mix) - Tsjo)) _
    / (WorksheetFunction.Ln((Tinn(Tw, Qw, Qp, Q, deltaT) - Tsjo) _
       / (Tut(Q, fd, mix) - Tsjo)))

End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:14:05.943

我将尝试对如何传递参数进行有用且完整的解释：

据我所知，LMTD 是调用另一个函数的主要函数。每次调用一个新函数时，它都会被放置在他们所谓的“堆栈”之上；
Stack的原理涉及在内存的一端（栈顶）分配和释放内存：内存被分配给在栈顶的函数中声明和使用的那些局部变量（被调用的函数在作用域内）并在堆栈顶部形成一个新层），而一旦函数超出范围（返回值时），这些局部变量就会被释放。通常称为“后进先出”（LIFO）的东西。
因此，如果您将 LMTD 视为基础（它可能不是最终基础，因为它必须由另一个子例程或函数调用），只要调用这些函数，Tinn 和 Tut 就会放在堆栈顶部。

但是（这就是重点），
不在函数中本地声明并作为参数传递的变量是通过引用传递的标准，它们是指针变量，包含由底层函数（或子）发送的参数的内存地址堆。当函数通过引用（默认）获取参数时，它可以更改传递的内存地址所包含的值，因此在返回被调用函数时可以更改原始变量值。

这个例子说明了这一点：

```
Sub Base_Sub()

Dim i as single
Dim c as single
Dim d as single

c = 5
d = 6

i = Function_1(c, d)

End Sub

Function Function_1(c, d)

c = 7 'Notice that the variables c and d are also changed in the Base_sub
d = 5 

Function_1 = c + d

End Function 
```

相反，如果您按值发送变量（byVal 关键字），这将意味着制作原始变量（作为参数传递）的副本，并且在函数中操作副本时原始变量保持不变. 换句话说，这个副本将成为堆栈顶部的局部变量，并在函数超出范围时立即释放。

因此，无需深入研究您的代码，当您在一个例程中调用许多函数时，它可能会帮助您牢记不同层的这一一般概念。为了密切关注您的局部变量，请使用 VBA 中的“locals”窗口进行跟进或使用 debug.print 在即时窗口中进行跟进。可以通过执行检查来帮助您获得更多关于错误的透明度。例如对于 Tinn 函数：

```
If QP = 0 then 
    'Notify problem at QP. 
end if 
```

如果我的解释超出了您的预期，我很抱歉，但我试图在这一点上尽可能完整。

# python - DJANGO 中的一页中的多个表单

> ID：11339815
> 
> 赞同：1
> 
> 时间：2012-07-05T07:39:10.540
> 
> 标签：python, django, django-forms

我已经开发了 1 个月的 django 项目。所以我是 Django 的新手。我目前对 Django 的问题是；当我在一个页面中有多个表单并且为表单提交页面时，其他表单字段值会丢失。因为他们没有发布。我找到了解决这个问题的方法；

*   当有 get 方法时，我用页面 url 发送其他表单值，我可以从 get 请求中处理它们。
*   当有 post 方法时，我将其他表单字段的值保留在 HTML 侧的隐藏输入中，并在发布的表单中。因此我可以从发布请求中处理它。

也许我可以将它们保留在会话对象中。但是在用户登录的整个时间内保留它们可能并不好。但我不知道。我可能不得不使用这种方法。

有没有另一种更有效的方法来保留 Django 中的所有表单字段？

有什么建议吗？

感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:15:59.930

您可以将 AJAX 用于单个表单提交而不是整个页面提交。

# android - 如何在android的自定义列表视图中删除一行的分隔符

> ID：11339816
> 
> 赞同：4
> 
> 时间：2012-07-05T07:39:14.020
> 
> 标签：android

任何人都可以告诉我删除 Android 中的行之间的分隔符吗？我想删除自定义列表视图中的第三行分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:46:11.697

`ListView`从属性上是不可能的。

另一种方法是使用自定义适配器在每一行中实现分隔符，并在方法中的索引为 3 时隐藏它：

```
public View getView(int position, View convertView, ViewGroup parent) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:38:08.570

编辑您的项目布局以包含一个 Textview，该 Textview 具有固定高度的分隔线并跨越整个宽度，但设置为 visibility=View.GONE。然后，仅显示您想要显示的那些分隔线（通过设置可见性 = GONE 或 VISIBLE）。如果您使用自定义视图包装该布局，则使用起来会非常舒适。这样您就不会干扰适配器/列表视图中的某些内部逻辑，并且您使用直接机制而不是在副作用上构建布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:53:58.400

你看过这篇文章[如何改变 Android ListView 分隔线的颜色吗？](https://stackoverflow.com/questions/2372415/how-to-change-color-of-android-listview-seperator-line)

*   制作一个自定义列表适配器。一个很好的例子是这里[android-amazing-listview](http://code.google.com/p/android-amazing-listview/)
*   `getView`在position 为 3的覆盖方法中，执行以下过程
*   通过这种方式，您可以更改边框颜色和宽度。
*   使其与背景颜色相同，使其显示为无边框
*   项目清单

# web-services - 限制对在 Tomcat (6.0.x) 上运行的 web 应用程序中某些 URL 的访问

> ID：11339829
> 
> 赞同：0
> 
> 时间：2012-07-05T07:40:01.700
> 
> 标签：web-services, security, authentication, tomcat, restriction

嗨，我的新问题如下：我有一个在 Tomcat 6.0.x 上运行的 Web 应用程序，它位于 Apache HTTPD 反向代理之后，它后面还有其他机器应该与某个 Web 服务（[http:// bla.com/restricted /](http://bla.com/) **stuff** /...) 而用户（从反向代理的 Internet 端连接）和其他机器不应该能够调用这些方法，最好甚至不知道它们存在。

1.  好吧，我知道我可以使用 RemoteAddrFilter 并过滤 IP，尽管它可以欺骗，但它可能“足够接近”，但不幸的是我被 Tomcat 的第 6 版所困。
2.  如果我有完全的自由，我可以在不同的端口上设置这个服务，然后只使用 iptables 来限制它，但不幸的是它必须是相同的 Tomcat 实例和相同的 Web 应用程序，而且我不熟悉将连接器限制为某些的方法Web 应用程序中的区域。
3.  该应用程序管理它自己的安全系统，由于“历史”原因，它不能用于验证“调用方机器”，即说制定几个安全约束很好，但这里的[规范](http://download.oracle.com/otn-pub/jcp/servlet-2.4-fr-spec-oth-JSpec/servlet-2_4-fr-spec.pdf)说一个人只能有一个 login-config 元素，所以即使我写受限 URL 的不同约束我将无法通过例如要求用户证书（从而识别调用机器）来阻止它，因为我已经有一个登录配置。

这更像是一个“如何做到最好”的问题，而不是“我不知道该怎么做”，因为有很多骇人听闻的方法来设置它，但我们现在不想滑向黑暗的一面我们？

我必须说我确实尝试过研究这个主题，但我没有找到任何明显的解决方案，但是如果我错过了一些优雅而明显的东西，我会更乐意听到它（也非常欢迎非平凡的解决方案:)），所以感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:50:02.600

需要调用“受限”服务的机器是否可以通过直接与[http://example.internal:8080/restricted](http://example.internal:8080/restricted)上的 tomcat 服务对话而不是使用反向代理来这样做？如果是这样，那么最简单的方法是设置代理，使其根本不通过受限制的 URI，这将使外部调用者无法访问它们。

# android - 在 TranslateAnimation 之后，LinearLayout onclick 不翻译

> ID：11339830
> 
> 赞同：0
> 
> 时间：2012-07-05T07:40:02.950
> 
> 标签：android, android-animation

这是我的问题。我有一个 LinearLayout，它的 onTouch 事件具有 clickable=true ，因此当触摸 LinearLayout 时，它会向上滑动屏幕。这可行，但之后当从新位置触发 onTouch 事件时，什么也没有发生。

脚步：

1.  我触摸了 LinearLayout，它按原样向上移动。
2.  我再次触摸它，没有任何反应
3.  我触摸了 LinearLayout 最初所在的屏幕部分，LinearLayout 将按应有的方式切换。

看起来好像视图已移动到新位置，但实际上并没有。

下面是我的 xml 和代码。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/julyContainer"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">

        <RelativeLayout android:id="@+id/rel01"/> 
        <ImageView />
        </RelativeLayout>

        <ImageView             
            android:id="@+id/shadow"
            android:paddingTop="6dip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/header_barshadow"/>

<ScrollView 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/bg_calendar" 
    android:id="@+id/calScroller">

<RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">        

        <LinearLayout android:id="@+id/circleLayout"
                android:orientation="horizontal"
                android:clickable="true"
                android:onClick="@string/circleAction"              
                android:paddingTop="10dip"
                android:paddingLeft="10dip"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <Button 
                android:id="@+id/circleCal"
                android:background="@drawable/cal_circle_button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="@string/circleAction"/>

                <LinearLayout 
                android:id="@+id/circleLayout01"
                android:orientation="vertical"        
            android:paddingLeft="10dip"
            android:paddingRight="3dip"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView/>  
                <TextView/>  
                <TextView/>  

               <LinearLayout android:id="@+id/julylayout2"
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:orientation="vertical">

              <TextView/>

               </LinearLayout>

            </LinearLayout>
        </LinearLayout>

       <ImageView android:id="@+id/etch1"
                  android:src="@drawable/etch_calendar"
                  android:paddingTop="15dip"
                  android:paddingBottom="15dip"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_below="@id/circleLayout"/>                     

      <LinearLayout android:id="@+id/squareLayout"
                android:clickable="true"
                android:onClick="@string/squareAction"              
                android:orientation="horizontal"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:paddingLeft="10dip"
                android:layout_below="@id/etch1">
        <Button 
                android:id="@+id/squareCal"
                android:background="@drawable/cal_square_button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="@string/squareAction"/>

                <LinearLayout
            android:orientation="vertical"
            android:paddingLeft="10dip"
            android:paddingRight="3dip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

                <TextView/>  
                <TextView/>  
                <TextView/> 

               <LinearLayout android:id="@+id/layout3"
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:orientation="vertical">

                    <TextView/>  

               </LinearLayout>
        </LinearLayout>        
    </LinearLayout>        

</RelativeLayout>
</ScrollView>      
</LinearLayout> 
```

代码：

```
private void slideUp(View view) {
    Animation slide = new TranslateAnimation(
            Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF,
            0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, -0.25f);
    slide.setDuration(1000);
    slide.setFillAfter(true);
    slide.setFillEnabled(true);

    view.startAnimation(slide);
}

private void slideDown(View view) {
    Animation slide = new TranslateAnimation(
            Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF,
            0.0f, Animation.RELATIVE_TO_SELF, -0.25f, Animation.RELATIVE_TO_SELF, 0.0f);
    slide.setDuration(1000);
    slide.setFillAfter(true);
    slide.setFillEnabled(true);
    view.startAnimation(slide);
} 
```

新变化：新职位的输出

07-05 13:20:22.084: I/System.out(15187): onAnimationStart 0 , 120

07-05 13:20:23.053: I/System.out(15187): onAnimationEnd 0 , 120

```
private void slideUp(final View view) {

        Animation slide = new TranslateAnimation(
                Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF,
                0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, -0.75f);
        slide.setDuration(1000);
        slide.setFillAfter(true);
        slide.setFillEnabled(true);
        view.startAnimation(slide);
        slide.setAnimationListener(new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {
                int[] startPosition = new int[2];
                view.getLocationOnScreen(startPosition);
                System.out.println("onAnimationStart " + startPosition[0] + " , " + startPosition[1]);
            }

            @Override
            public void onAnimationRepeat(Animation animation) {
            }

            @Override
            public void onAnimationEnd(Animation animation) {
                final int left = view.getLeft();
                final int top = view.getTop();
                final int right = view.getRight();
                final int bottom = view.getBottom();

                int offset = (int) 0.75;
                view.layout(left, top + offset * top, right, bottom + offset * bottom);

                int[] endPosition = new int[2];
                view.getLocationOnScreen(endPosition);
                System.out.println("onAnimationEnd " + endPosition[0] + " , " + endPosition[1]);

            }

        });

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:19:58.390

这是 android 动画的正常行为。这是因为动画并没有真正移动布局，所以它在显示器上的位置保持不变。如果要将布局重新定位到动画结束的位置，则需要调用`yourLayout.layout()`方法并在那里传递 4 个参数，这些参数描述了布局的新位置。请记住，`layout()`获取参数相对于它的父级。

请参阅下面的示例代码

```
private AnimationListener slideDownAnimationListener = new AnimationListener() {
        @Override
        public void onAnimationStart(Animation animation) {
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            final int left = view.getLeft();
            final int top = view.getTop();
            final int right = view.getRight();
            final int bottom = view.getBottom();
            view.layout(left, top - 0.25 * top, right, bottom - 0.25 * bottom);
        }
};

private Animation slideDownAnimation = new TranslateAnimation(
                                     Animation.RELATIVE_TO_SELF, 0.0f,
                                     Animation.RELATIVE_TO_SELF, 0.0f,
                                     Animation.RELATIVE_TO_SELF, -0.25f,
                                     Animation.RELATIVE_TO_SELF, 0.0f
                                     );

private void slideDown(final View view) {
    slide.setDuration(1000);
    slide.setFillAfter(true);
    slide.setFillEnabled(true);
    slide.setAnimationListener(slideDownAnimationListener);
    view.startAnimation(slideDownAnimation);
} 
```

# android - 画线并在线碰撞时产生错误

> ID：11339839
> 
> 赞同：0
> 
> 时间：2012-07-05T07:40:18.080
> 
> 标签：android, canvas, ondraw

我正在画圆圈，并希望当线条匹配在一起时会产生错误。我已经做了一些编码，这段代码能够在触摸时画线，但问题是当线条匹配在一起时它无法产生错误。所以有人可以建议我吗我做错了什么。

**代码**

```
 public class DrawView extends View implements View.OnTouchListener {
        private static final String TAG = "DrawView";

        List<Point> points = new ArrayList<Point>();
        Paint paint = new Paint();

        public DrawView(Context context) {
            super(context);
            setFocusable(true);
            setFocusableInTouchMode(true);

            DrawView.this.setOnTouchListener(DrawView.this);

            paint.setColor(Color.WHITE);
            paint.setAntiAlias(true);
        }

        public void onDraw(Canvas canvas) {
            for (Point point : points) {
                canvas.drawCircle(point.x, point.y, 5, paint);
                // canvas.drawLine(point.x, point.y, 5, 0, paint);
                // canvas.drawPaint(p);
                // Log.d(TAG, "Painting: "+point);
            }
        }

        public boolean onTouch(View view, MotionEvent event) {
            // if(event.getAction() != MotionEvent.ACTION_DOWN)
            // return super.onTouchEvent(event);
            Point point = new Point();
            point.x = event.getX();
            point.y = event.getY();
            for (int i = 0; i < points.size(); i++) {
                if (point.equals(points.get(i))) {
                    System.out
                            .println("*****************************ERROR*******************************************");
                } else {
                    System.out.println("Value of points" + points);
                    System.out
                            .println("***********************ELSE***********************************");
                }
            }
            points.add(point);
            invalidate();
            Log.d(TAG, "point: " + point);
            return true;
        }
    }

   class Point {
    float x, y;

    public boolean equals(Object o) {
        if (!(o instanceof Point))
            return false;
        Point p = (Point) o;
        return x == p.x && y == p.y;
    }

    public String toString() {
        return x + ", " + y;
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:10:42.370

您需要为您的 Point 类实现 equals() 方法。默认实现可能不会比较您的 x 和 y 属性。

# pdf - 从数据库问题索引二进制文件（无错误）

> ID：11339840
> 
> 赞同：1
> 
> 时间：2012-07-05T07:40:21.683
> 
> 标签：pdf, solr, binary, indexing

我正在尝试索引存储在数据库（mysql）中的二进制文件，但没有成功。我有一个如下配置的 solr： **Solr 文件结构**

```
+solr
   +bookledger(core0)
      -conf
      +lib(all necessary libraries)
        +contrib
        +dist
   +data
      +bookledger
        -index
        -spellchecker
      +ktimatologio
        -index
        -spellchecker
    +ktimatologio(core1)
      -conf
      +lib(all necessary libraries)
        +contrib
        +dist 
```

如您所见，配置涉及多核 solr 设置。现在，在 bookledger(core0) 上，我已成功索引二进制文件（存储在数据库中）。在第二个核心中，当我进行完全导入时，我看不到任何错误！然后，当我尝试查询二进制内容时，输出如下：[B@660b1b14\. 我在这里想念什么？

先感谢您，

汤姆

**solr.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<solr persistent="false">  
  <cores adminPath="/admin/cores">
    <core name="ktimatologio" instanceDir="ktimatologio" dataDir="../data/ktimatologio"/>
    <core name="bookledger" instanceDir="bookledger" dataDir="../data/bookledger"/>
  </cores>
</solr> 
```

**solrconfig.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8" ?>

<config>

  <abortOnConfigurationError>${solr.abortOnConfigurationError:true}</abortOnConfigurationError>

  <luceneMatchVersion>LUCENE_36</luceneMatchVersion>  

  <lib dir="lib/dist/" regex="apache-solr-cell-\d.*\.jar" />
  <lib dir="lib/dist/" regex="apache-solr-clustering-\d.*\.jar" />
  <lib dir="lib/dist/" regex="apache-solr-dataimporthandler-\d.*\.jar" />
  <lib dir="lib/dist/" regex="apache-solr-langid-\d.*\.jar" />
  <lib dir="lib/dist/" regex="apache-solr-velocity-\d.*\.jar" />
  <lib dir="lib/dist/" regex="apache-solr-dataimporthandler-extras-\d.*\.jar" />  

  <lib dir="lib/contrib/extraction/lib/" regex=".*\.jar" />  
  <lib dir="lib/contrib/clustering/lib/" regex=".*\.jar" />  
  <lib dir="lib/contrib/dataimporthandler/lib/" regex=".*\.jar" /> 
  <lib dir="lib/contrib/langid/lib/" regex=".*\.jar" />  
  <lib dir="lib/contrib/velocity/lib/" regex=".*\.jar" />  
  <lib dir="lib/contrib/extraction/lib/" regex="tika-core-\d.*\.jar" />
  <lib dir="lib/contrib/extraction/lib/" regex="tika-parsers-\d.*\.jar" /> 

  <dataDir>${solr.data.dir:}</dataDir>

  <directoryFactory name="DirectoryFactory" 
                    class="${solr.directoryFactory:solr.StandardDirectoryFactory}"/>

  <indexConfig>

  </indexConfig>

  <jmx />

  <!-- The default high-performance update handler -->
  <updateHandler class="solr.DirectUpdateHandler2">

  </updateHandler>

  <query>

    <maxBooleanClauses>1024</maxBooleanClauses>

    <filterCache class="solr.FastLRUCache"
                 size="512"
                 initialSize="512"
                 autowarmCount="0"/>

    <queryResultCache class="solr.LRUCache"
                     size="512"
                     initialSize="512"
                     autowarmCount="0"/>

    <documentCache class="solr.LRUCache"
                   size="512"
                   initialSize="512"
                   autowarmCount="0"/>

    <enableLazyFieldLoading>true</enableLazyFieldLoading>

   <queryResultWindowSize>20</queryResultWindowSize>

   <queryResultMaxDocsCached>200</queryResultMaxDocsCached>

    <listener event="newSearcher" class="solr.QuerySenderListener">
      <arr name="queries">

      </arr>
    </listener>
    <listener event="firstSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <lst>
          <str name="q">static firstSearcher warming in solrconfig.xml</str>
        </lst>
      </arr>
    </listener>

    <useColdSearcher>false</useColdSearcher>

    <maxWarmingSearchers>2</maxWarmingSearchers>

  </query>

  <requestDispatcher>

    <requestParsers enableRemoteStreaming="true" 
                    multipartUploadLimitInKB="2048000" />

  </requestDispatcher>

  <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">data-config.xml</str>
    </lst>
  </requestHandler>

  <requestHandler name="/select" class="solr.SearchHandler">

     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <int name="rows">100</int>
     </lst>

  </requestHandler>

  <requestHandler name="/browse" class="solr.SearchHandler">
     <lst name="defaults">
       <str name="echoParams">explicit</str>

       <!-- VelocityResponseWriter settings -->
       <str name="wt">velocity</str>

       <str name="v.template">browse</str>
       <str name="v.layout">layout</str>
       <str name="title">Solritas</str>

       <str name="df">text</str>
       <str name="defType">edismax</str>
       <str name="q.alt">*:*</str>
       <str name="rows">10</str>
       <str name="fl">*,score</str>
       <str name="mlt.qf">
         text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>
       <str name="mlt.fl">text,features,name,sku,id,manu,cat</str>
       <int name="mlt.count">3</int>

       <str name="qf">
          text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>

       <str name="facet">on</str>
       <str name="facet.field">cat</str>
       <str name="facet.field">manu_exact</str>
       <str name="facet.query">ipod</str>
       <str name="facet.query">GB</str>
       <str name="facet.mincount">1</str>
       <str name="facet.pivot">cat,inStock</str>
       <str name="facet.range.other">after</str>
       <str name="facet.range">price</str>
       <int name="f.price.facet.range.start">0</int>
       <int name="f.price.facet.range.end">600</int>
       <int name="f.price.facet.range.gap">50</int>
       <str name="facet.range">popularity</str>
       <int name="f.popularity.facet.range.start">0</int>
       <int name="f.popularity.facet.range.end">10</int>
       <int name="f.popularity.facet.range.gap">3</int>
       <str name="facet.range">manufacturedate_dt</str>
       <str name="f.manufacturedate_dt.facet.range.start">NOW/YEAR-10YEARS</str>
       <str name="f.manufacturedate_dt.facet.range.end">NOW</str>
       <str name="f.manufacturedate_dt.facet.range.gap">+1YEAR</str>
       <str name="f.manufacturedate_dt.facet.range.other">before</str>
       <str name="f.manufacturedate_dt.facet.range.other">after</str>

       <!-- Highlighting defaults -->
       <str name="hl">on</str>
       <str name="hl.fl">text features name</str>
       <str name="f.name.hl.fragsize">0</str>
       <str name="f.name.hl.alternateField">name</str>
     </lst>
     <arr name="last-components">
       <str>spellcheck</str>
     </arr>

  </requestHandler>

  <requestHandler name="/update" 
                  class="solr.XmlUpdateRequestHandler">

    </requestHandler>

  <requestHandler name="/update/javabin" 
                  class="solr.BinaryUpdateRequestHandler" />

  <requestHandler name="/update/csv" 
                  class="solr.CSVRequestHandler" 
                  startup="lazy" />

  <requestHandler name="/update/json" 
                  class="solr.JsonUpdateRequestHandler" 
                  startup="lazy" />

  <requestHandler name="/update/extract" 
                  startup="lazy"
                  class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <!-- All the main content goes into "text"... if you need to return
           the extracted text or do highlighting, use a stored field. -->
      <str name="fmap.content">text</str>
      <str name="lowernames">true</str>
      <str name="uprefix">ignored_</str>

      <!-- capture link hrefs but ignore div attributes -->
      <str name="captureAttr">true</str>
      <str name="fmap.a">links</str>
      <str name="fmap.div">ignored_</str>
    </lst>
  </requestHandler>

  <requestHandler name="/update/xslt"
                   startup="lazy"
                   class="solr.XsltUpdateRequestHandler"/>

  <requestHandler name="/analysis/field" 
                  startup="lazy"
                  class="solr.FieldAnalysisRequestHandler" />
  <requestHandler name="/analysis/document" 
                  class="solr.DocumentAnalysisRequestHandler" 
                  startup="lazy" />

  <!-- Admin Handlers

       Admin Handlers - This will register all the standard admin
       RequestHandlers.  
    -->
  <requestHandler name="/admin/" 
                  class="solr.admin.AdminHandlers" />

  <!-- ping/healthcheck -->
  <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
    <lst name="invariants">
      <str name="q">solrpingquery</str>
    </lst>
    <lst name="defaults">
      <str name="echoParams">all</str>
    </lst>
  </requestHandler>

  <!-- Echo the request contents back to the client -->
  <requestHandler name="/debug/dump" class="solr.DumpRequestHandler" >
    <lst name="defaults">
     <str name="echoParams">explicit</str> 
     <str name="echoHandler">true</str>
    </lst>
  </requestHandler>

  <searchComponent name="spellcheck" class="solr.SpellCheckComponent">

    <str name="queryAnalyzerFieldType">textSpell</str>

    <lst name="spellchecker">
      <str name="name">default</str>
      <str name="field">name</str>
      <str name="spellcheckIndexDir">spellchecker</str>

    </lst>

  </searchComponent>

  <requestHandler name="/spell" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <str name="spellcheck.onlyMorePopular">false</str>
      <str name="spellcheck.extendedResults">false</str>
      <str name="spellcheck.count">1</str>
    </lst>
    <arr name="last-components">
      <str>spellcheck</str>
    </arr>
  </requestHandler>

  <searchComponent name="tvComponent" class="solr.TermVectorComponent"/>

  <requestHandler name="/tvrh" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <bool name="tv">true</bool>
    </lst>
    <arr name="last-components">
      <str>tvComponent</str>
    </arr>
  </requestHandler>

  <searchComponent name="clustering" 
                   enable="${solr.clustering.enabled:false}"
                   class="solr.clustering.ClusteringComponent" >
    <!-- Declare an engine -->
    <lst name="engine">
      <!-- The name, only one can be named "default" -->
      <str name="name">default</str>

      <str name="carrot.algorithm">org.carrot2.clustering.lingo.LingoClusteringAlgorithm</str>

      <str name="LingoClusteringAlgorithm.desiredClusterCountBase">20</str>

      <str name="carrot.lexicalResourcesDir">clustering/carrot2</str>

      <str name="MultilingualClustering.defaultLanguage">ENGLISH</str>
    </lst>
    <lst name="engine">
      <str name="name">stc</str>
      <str name="carrot.algorithm">org.carrot2.clustering.stc.STCClusteringAlgorithm</str>
    </lst>
  </searchComponent>

  <requestHandler name="/clustering"
                  startup="lazy"
                  enable="${solr.clustering.enabled:false}"
                  class="solr.SearchHandler">
    <lst name="defaults">
      <bool name="clustering">true</bool>
      <str name="clustering.engine">default</str>
      <bool name="clustering.results">true</bool>
      <!-- The title field -->
      <str name="carrot.title">name</str>
      <str name="carrot.url">id</str>
      <!-- The field to cluster on -->
       <str name="carrot.snippet">features</str>
       <!-- produce summaries -->
       <bool name="carrot.produceSummary">true</bool>
       <!-- the maximum number of labels per cluster -->
       <!--<int name="carrot.numDescriptions">5</int>-->
       <!-- produce sub clusters -->
       <bool name="carrot.outputSubClusters">false</bool>

       <str name="df">text</str>
       <str name="defType">edismax</str>
       <str name="qf">
          text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>
       <str name="q.alt">*:*</str>
       <str name="rows">10</str>
       <str name="fl">*,score</str>
    </lst>     
    <arr name="last-components">
      <str>clustering</str>
    </arr>
  </requestHandler>

  <searchComponent name="terms" class="solr.TermsComponent"/>

  <!-- A request handler for demonstrating the terms component -->
  <requestHandler name="/terms" class="solr.SearchHandler" startup="lazy">
     <lst name="defaults">
      <bool name="terms">true</bool>
    </lst>     
    <arr name="components">
      <str>terms</str>
    </arr>
  </requestHandler>

  <searchComponent name="elevator" class="solr.QueryElevationComponent" >
    <!-- pick a fieldType to analyze queries -->
    <str name="queryFieldType">string</str>
    <str name="config-file">elevate.xml</str>
  </searchComponent>

  <!-- A request handler for demonstrating the elevator component -->
  <requestHandler name="/elevate" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <str name="df">text</str>
    </lst>
    <arr name="last-components">
      <str>elevator</str>
    </arr>
  </requestHandler>

  <!-- Highlighting Component

       http://wiki.apache.org/solr/HighlightingParameters
    -->
  <searchComponent class="solr.HighlightComponent" name="highlight">
    <highlighting>
      <!-- Configure the standard fragmenter -->
      <!-- This could most likely be commented out in the "default" case -->
      <fragmenter name="gap" 
                  default="true"
                  class="solr.highlight.GapFragmenter">
        <lst name="defaults">
          <int name="hl.fragsize">100</int>
        </lst>
      </fragmenter>

      <!-- A regular-expression-based fragmenter 
           (for sentence extraction) 
        -->
      <fragmenter name="regex" 
                  class="solr.highlight.RegexFragmenter">
        <lst name="defaults">
          <!-- slightly smaller fragsizes work better because of slop -->
          <int name="hl.fragsize">70</int>
          <!-- allow 50% slop on fragment sizes -->
          <float name="hl.regex.slop">0.5</float>
          <!-- a basic sentence pattern -->
          <str name="hl.regex.pattern">[-\w ,/\n\&quot;&apos;]{20,200}</str>
        </lst>
      </fragmenter>

      <!-- Configure the standard formatter -->
      <formatter name="html" 
                 default="true"
                 class="solr.highlight.HtmlFormatter">
        <lst name="defaults">
          <str name="hl.simple.pre"><![CDATA[<em>]]></str>
          <str name="hl.simple.post"><![CDATA[</em>]]></str>
        </lst>
      </formatter>

      <!-- Configure the standard encoder -->
      <encoder name="html" 
               class="solr.highlight.HtmlEncoder" />

      <!-- Configure the standard fragListBuilder -->
      <fragListBuilder name="simple" 
                       default="true"
                       class="solr.highlight.SimpleFragListBuilder"/>

      <!-- Configure the single fragListBuilder -->
      <fragListBuilder name="single" 
                       class="solr.highlight.SingleFragListBuilder"/>

      <!-- default tag FragmentsBuilder -->
      <fragmentsBuilder name="default" 
                        default="true"
                        class="solr.highlight.ScoreOrderFragmentsBuilder">
        <!-- 
        <lst name="defaults">
          <str name="hl.multiValuedSeparatorChar">/</str>
        </lst>
        -->
      </fragmentsBuilder>

      <!-- multi-colored tag FragmentsBuilder -->
      <fragmentsBuilder name="colored" 
                        class="solr.highlight.ScoreOrderFragmentsBuilder">
        <lst name="defaults">
          <str name="hl.tag.pre"><![CDATA[
               <b style="background:yellow">,<b style="background:lawgreen">,
               <b style="background:aquamarine">,<b style="background:magenta">,
               <b style="background:palegreen">,<b style="background:coral">,
               <b style="background:wheat">,<b style="background:khaki">,
               <b style="background:lime">,<b style="background:deepskyblue">]]></str>
          <str name="hl.tag.post"><![CDATA[</b>]]></str>
        </lst>
      </fragmentsBuilder>

      <boundaryScanner name="default" 
                       default="true"
                       class="solr.highlight.SimpleBoundaryScanner">
        <lst name="defaults">
          <str name="hl.bs.maxScan">10</str>
          <str name="hl.bs.chars">.,!? &#9;&#10;&#13;</str>
        </lst>
      </boundaryScanner>

      <boundaryScanner name="breakIterator" 
                       class="solr.highlight.BreakIteratorBoundaryScanner">
        <lst name="defaults">

          <str name="hl.bs.type">WORD</str>

          <str name="hl.bs.language">en</str>
          <str name="hl.bs.country">US</str>
        </lst>
      </boundaryScanner>
    </highlighting>
  </searchComponent>

  <queryResponseWriter name="json" class="solr.JSONResponseWriter">

    <str name="content-type">text/plain; charset=UTF-8</str>
  </queryResponseWriter>

    <queryResponseWriter name="velocity" class="solr.VelocityResponseWriter" startup="lazy"/>

    -->
  <queryResponseWriter name="xslt" class="solr.XSLTResponseWriter">
    <int name="xsltCacheLifetimeSeconds">5</int>
  </queryResponseWriter>
  <admin>

    <defaultQuery>*:*</defaultQuery>

  </admin>

</config> 
```

**schema.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8" ?>

<schema name="ktimatologio" version="1.5">

  <types>

    <!-- The StrField type is not analyzed, but indexed/stored verbatim. -->
    <fieldType name="string" class="solr.StrField" sortMissingLast="true" />

    <!-- boolean type: "true" or "false" -->
    <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true"/>
    <!--Binary data type. The data should be sent/retrieved in as Base64 encoded Strings -->
    <fieldtype name="binary" class="solr.BinaryField"/>

    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="float" class="solr.TrieFloatField" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="long" class="solr.TrieLongField" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="double" class="solr.TrieDoubleField" precisionStep="0" positionIncrementGap="0"/>

    <fieldType name="tint" class="solr.TrieIntField" precisionStep="8" positionIncrementGap="0"/>
    <fieldType name="tfloat" class="solr.TrieFloatField" precisionStep="8" positionIncrementGap="0"/>
    <fieldType name="tlong" class="solr.TrieLongField" precisionStep="8" positionIncrementGap="0"/>
    <fieldType name="tdouble" class="solr.TrieDoubleField" precisionStep="8" positionIncrementGap="0"/>

    <fieldType name="date" class="solr.TrieDateField" precisionStep="0" positionIncrementGap="0"/>

    <!-- A Trie based date field for faster date range queries and date faceting. -->
    <fieldType name="tdate" class="solr.TrieDateField" precisionStep="6" positionIncrementGap="0"/>

    <fieldType name="pint" class="solr.IntField"/>
    <fieldType name="plong" class="solr.LongField"/>
    <fieldType name="pfloat" class="solr.FloatField"/>
    <fieldType name="pdouble" class="solr.DoubleField"/>
    <fieldType name="pdate" class="solr.DateField" sortMissingLast="true"/>

    <fieldType name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="random" class="solr.RandomSortField" indexed="true" />
    <!-- Greek -->
    <fieldType name="text_el" class="solr.TextField" positionIncrementGap="100">
      <analyzer> 
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <!-- greek specific lowercase for sigma -->
        <filter class="solr.GreekLowerCaseFilterFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="false" words="lang/stopwords_el.txt" enablePositionIncrements="true"/>
        <filter class="solr.GreekStemFilterFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="text_ktimatologio" class="solr.TextField" positionIncrementGap="100">

      <analyzer type="index">       
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_en.txt" enablePositionIncrements="true"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPossessiveFilterFactory"/>   
        <filter class="solr.GreekLowerCaseFilterFactory"/>
        <filter class="solr.GreekStemFilterFactory"/>       
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
      </analyzer>

      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_en.txt" enablePositionIncrements="true"/>

        <filter class="solr.GreekLowerCaseFilterFactory"/>
        <filter class="solr.GreekStemFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPossessiveFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
      </analyzer>
    </fieldType>

    <fieldtype name="ignored" stored="false" indexed="false" multiValued="true" class="solr.StrField" />
    <fieldType name="point" class="solr.PointType" dimension="2" subFieldSuffix="_d"/>
    <fieldType name="location" class="solr.LatLonType" subFieldSuffix="_coordinate"/>
    <fieldtype name="geohash" class="solr.GeoHashField"/>
    <fieldType name="currency" class="solr.CurrencyField" precisionStep="8" defaultCurrency="USD" currencyConfig="currency.xml" />
 </types>

 <fields>

  <field  name="id" type="string" indexed="true" stored="true" multiValued="false"/> 
  <field  name="solr_id" type="string" indexed="true" stored="true" multiValued="false"/> 
  <field  name="title" type="text_ktimatologio" indexed="true" stored="true"/>
  <field  name="model" type="text_ktimatologio" indexed="true" stored="true" multiValued="false"/>
  <field  name="type" type="text_ktimatologio" indexed="true" stored="true"/>
  <field  name="url" type="text_ktimatologio" indexed="true" stored="true"/>
  <field  name="content" type="text_ktimatologio" indexed="true" stored="true" multiValued="true"/>
  <field  name="last_modified" type="string" indexed="true" stored="true"/>

 </fields>

 <uniqueKey>solr_id</uniqueKey>

 <defaultSearchField>content</defaultSearchField>

 <solrQueryParser defaultOperator="OR"/>

   <copyField source="title" dest="content" />

</schema> 
```

**data-config.xml 文件：**

```
<dataConfig>

  <dataSource type="JdbcDataSource"
          autoCommit="true" batchSize="-1"
          convertType="false"
          driver="com.mysql.jdbc.Driver"
          url="jdbc:mysql://127.0.0.1:3306/ktimatologio"
          user="root" 
          password="1a2b3c4d"/>

         <dataSource name="fieldReader" type="FieldStreamDataSource" />     

  <document>  

  <entity name="aitiologikes_ektheseis"
    dataSource="db" 
    transformer="HTMLStripTransformer" 
    query="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, body AS content from aitiologikes_ektheseis where type = 'text'"
    deltaImportQuery="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, body AS content from aitiologikes_ektheseis where type = 'text' and id='${dataimporter.delta.id}'"
    deltaQuery="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, body AS content from aitiologikes_ektheseis where type = 'text' and last_modified &gt; '${dataimporter.last_index_time}'">
        <field column="id" name="id" />          
        <field column="solr_id" name="solr_id" />
        <field column="title" name="title" stripHTML="true" />
        <field column="model" name="model" stripHTML="true"  />
        <field column="type" name="type" stripHTML="true"  />
        <field column="url" name="url" stripHTML="true"  />
        <field column="last_modified" name="last_modified" stripHTML="true"  />
        <field column="content" name="content" stripHTML="true" />
    </entity>

    <entity name="aitiologikes_ektheseis_bin"
      query="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, bin_con AS content from aitiologikes_ektheseis where type = 'bin'" 
      deltaImportQuery="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, bin_con AS content from aitiologikes_ektheseis where type = 'bin' and id='${dataimporter.delta.id}'"
      deltaQuery="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, bin_con AS content from aitiologikes_ektheseis where type = 'bin' and last_modified &gt; '${dataimporter.last_index_time}'"
      transformer="TemplateTransformer"
      dataSource="db">

        <entity dataSource="fieldReader" processor="TikaEntityProcessor" dataField="aitiologikes_ektheseis_bin.content" format="text">
          <field column="id" name="id" />        
          <field column="solr_id" name="solr_id" />
          <field column="title" name="title" stripHTML="true" />
          <field column="model" name="model" stripHTML="true"  />
          <field column="type" name="type" stripHTML="true"  />
          <field column="url" name="url" stripHTML="true"  />
          <field column="last_modified" name="last_modified" stripHTML="true"  />
          <field column="content" name="content" stripHTML="true" />
        </entity>

    </entity>

  </document>   

</dataConfig> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:36:35.057

最后我找到了解决方案。注意 data-config.xml 中的实体查询和列定义：

```
.... 
    <entity name="aitiologikes_ektheseis_bin"
      query="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, bin_con AS content from aitiologikes_ektheseis where type = 'bin'" 
      deltaImportQuery="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, bin_con AS content from aitiologikes_ektheseis where type = 'bin' and id='${dataimporter.delta.id}'"
      deltaQuery="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, bin_con AS content from aitiologikes_ektheseis where type = 'bin' and last_modified &gt; '${dataimporter.last_index_time}'"
      transformer="TemplateTransformer"
      dataSource="db">

        <entity dataSource="fieldReader" processor="TikaEntityProcessor" dataField="aitiologikes_ektheseis_bin.content" format="text">
          <field column="id" name="id" />        
          <field column="solr_id" name="solr_id" />
          <field column="title" name="title" stripHTML="true" />
          <field column="model" name="model" stripHTML="true"  />
          <field column="type" name="type" stripHTML="true"  />
          <field column="url" name="url" stripHTML="true"  />
          <field column="last_modified" name="last_modified" stripHTML="true"  />
          <field column="content" name="content" stripHTML="true" />
        </entity>

    </entity>

  </document>   

</dataConfig> 
```

为了“Tika”“看到”内容并提取它，我必须将“内容”更改为“文本”。还有一件事。正确的语法是：

```
<entity name="aitiologikes_ektheseis_bin"
      query="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, bin_con AS text from aitiologikes_ektheseis where type = 'bin'" 
      deltaImportQuery="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, bin_con AS text from aitiologikes_ektheseis where type = 'bin' and id='${dataimporter.delta.id}'"
      deltaQuery="select id, title, model, type, url, last_modified, CONCAT_WS('_',id,model) AS solr_id, bin_con AS text from aitiologikes_ektheseis where type = 'bin' and last_modified &gt; '${dataimporter.last_index_time}'"
      transformer="TemplateTransformer"
      dataSource="db">

          <field column="id" name="id" />        
          <field column="solr_id" name="solr_id" />
          <field column="title" name="title" />
          <field column="model" name="model" />
          <field column="type" name="type" />
          <field column="url" name="url" />
          <field column="last_modified" name="last_modified" />

        <entity dataSource="fieldReader" processor="TikaEntityProcessor" dataField="aitiologikes_ektheseis_bin.text" format="text">  
          <field column="text" name="content" />
        </entity>

    </entity>

  </document>   

</dataConfig> 
```

我希望这可以帮助别人。好起来，汤姆

# mirth - 如何从 Mirth 中的 Web 服务响应中提取 ACK？

> ID：11339844
> 
> 赞同：1
> 
> 时间：2012-07-05T07:40:41.327
> 
> 标签：mirth

我有一个向 WCF Web 服务发送 HL7 v2 消息的目的地。我已经成功地将消息正确地发送到了 web 服务（在修复了各种编码问题之后），并且我可以确认消息正确地到达了 WCF 端点。但是，在论坛和文档中四处寻找之后，我无法正确解析我们收到的 ACK 以指示何时发生错误。

从 Web 服务返回的响应如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Header/>
    <s:Body>
        <ProcessMessageResponse xmlns="http://www.bluewire-technologies.com/webservices">  
            <ProcessMessageResult>
               MSH|^~\&amp;|Epro|RGR|||||ACK||D||||||GBR|ASCII|
               MSA|AE||Empty message|
               ERR|^^^100|
            </ProcessMessageResult>
        </ProcessMessageResponse>
    </s:Body>
</s:Envelope> 
```

响应在 ProcessMessageResult 元素中包含一个 ACK​​。如何从响应中提取此 ACK 并将其作为目标的输出传递？Mirth 会自动解析 ACK 并确定有错误吗？

我曾认为我需要在目的地上使用某种转换器（称为“SOAP”）并使用以下内容：

```
var xml = responseMap.get('SOAP').getMessage(); 
```

然后提取 ProcessMessageResponse 元素，但 responseMap.get('SOAP') 返回 null 所以这似乎是错误的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:03:09.267

[由于Mirth 论坛上](http://www.mirthcorp.com/community/forums/showthread.php?t=7316)的回答，我现在已经解决了部分问题。

总而言之，我使用以下后处理器来提取 ack 并更新状态：

```
var s = new Namespace('http://schemas.xmlsoap.org/soap/envelope/');
var bw = new Namespace('http://www.bluewire-technologies.com/webservices');

var response = new XML($r('SOAP').getMessage());
var ack = new XML(SerializerFactory.getHL7Serializer().toXML(response.s::Body.bw::ProcessMessageResponse.bw::ProcessMessageResult.toString()));

var ackCode = ack.MSA['MSA.1']['MSA.1.1'].toString();
if(ackCode == 'AE')
{
    var errorMessage = ack.MSA['MSA.3']['MSA.3.1'].toString();
    var messageController = com.mirth.connect.server.controllers.DefaultMessageObjectController.create();
    var channelStatisticsController = com.mirth.connect.server.controllers.DefaultChannelStatisticsController.create();

    messageObject.getContext().put("replace", "true"); // yuk - this is to make setError below work.
    messageController.setError(messageObject, null, errorMessage, null, null);
    channelStatisticsController.decrementSentCount(new java.lang.String(channelId));
} 
```

不漂亮，但它的工作...

# wordpress - Wordpress 自定义帖子类型页面

> ID：11339846
> 
> 赞同：3
> 
> 时间：2012-07-05T07:40:45.180
> 
> 标签：wordpress

创建自定义帖子类型并用一些帖子填充它时，wordpress 会为该自定义帖子类型生成一个页面。

但我希望能够向该页面添加内容，因此我创建了一个常规页面并选择了一个模板，在该模板中手动调用自定义帖子类型的帖子并将它们循环出来。现在我可以在所见即所得的编辑器中添加内容。但这会导致这两个页面之间发生冲突，特别是如果 CPT 与页面具有相同的名称。

现在的问题是：有没有办法总是显示我选择了 CPT 模板的页面总是显示？即使有人尝试手动输入 CPT 生成页面的 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:36:55.560

这是我从你的问题中了解到的。您有自定义帖子类型。然后，您创建了一个页面模板，它遍历您的自定义帖子类型并输出它们。现在，当您创建一个新页面并为其分配您创建的页面模板时，如果它与自定义帖子类型具有相同的名称，您会遇到问题。

解决方案：我认为您需要做的是从管理菜单中更改自定义页面 slug。然后您就可以通过 URL 直接引用它。

# android - 如何添加进度对话框

> ID：11339847
> 
> 赞同：1
> 
> 时间：2012-07-05T07:40:47.737
> 
> 标签：android, android-asynctask, progressdialog

我正在从保管箱下载一个文件，这需要几秒钟。我想`ProgressDialog`为下载添加一个，但我不知道该怎么做。

```
public class DownloadFile extends AsyncTask<Void, Long, Boolean> {
    DownloadFile(Context context ,DropboxAPI<?> mApi ,String dropboxpath,String   sdpath,int pos,int s,ArrayList<String> folder) throws DropboxException {
        FileOutputStream mFos;
        File file=new File(sdpath);
        String path = dropboxpath;
        try{
            mFos = new FileOutputStream(file);
            mApi.getFile(path, null, mFos, null);
        }catch (Exception e) {
            // TODO: handle exception
        }
    } 

    @Override
    protected Boolean doInBackground(Void... params) {
        // TODO Auto-generated method stub
        return null;
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:44:19.687

这样做：

```
public final class DownloadFile extends AsyncTask<Void, Long, Boolean> {

private Context context;
private ProgressDialog progressDialog;

public DownloadFile (Context context) {
    this.context = context;
}

/* 
 * @see android.os.AsyncTask#onPreExecute()
 */
@Override
protected void onPreExecute() {
    try {
        progressDialog = ProgressDialog.show(context, "", "message", true);
    } catch (final Throwable th) {
        //TODO
    }
}

/* 
 * @see android.os.AsyncTask#doInBackground(Params[])
 */
@Override
protected Boolean doInBackground(Void... arg0) {
    //do something
}

    @Override
protected void onProgressUpdate(String... progress) {
    //do something
    super.onProgressUpdate(progress);
}

/* 
 * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
 */
@Override
protected void onPostExecute(Boolean result) {
    progressDialog.dismiss();
} } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:42:48.797

看到AsyncTask其实有4个方法：

1.  `onPreExecute()`- 你可以在这里做一些预执行任务。
2.  `doInBackground()`- 您可以在这里执行一些后台工作。
3.  `onPostExecute()`- 您可以在这里执行后期执行任务。比如在 ListView 中显示数据、更新 TextView 等。
4.  `onProgressUpdate()`- 在后台操作进行时更新 UI。

因此，在您的情况下，您可以在 AsyncTask 的方法中显示进度对话框或进度条`onPreExecute()`，并在内部显示相同的 dismiss(() `onPostExecute()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:46:43.977

使用这个简单的代码@sachin

```
public class DownloadFile extends AsyncTask<Void, Void, Void> {

    Home home;
    ProgressDialog dialog = null;

    public DownloadFile(Home home) {
        // TODO Auto-generated constructor stub
        this.home = home;
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        //Call hare method for download
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
         dialog.dismiss();  

    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
         dialog = ProgressDialog.show(home, "Downloading......", "", true);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:47:50.873

这篇文章可能对您有用：

[http://huuah.com/android-progress-bar-and-thread-updating/](http://huuah.com/android-progress-bar-and-thread-updating/)

在线程的 run() 方法中，您可以调用如下函数：

```
 public boolean download(String url, String path, String fileName, Handler progressHandler) {
    try {
        URL sourceUrl = new URL(formatUrl(url));
        if (fileName == null || fileName.length() <= 0) {
            fileName = sourceUrl.getFile();
        }
        if (fileName == null || fileName.length() <= 0) {
            throw new Exception("EMPTY_FILENAME_NOT_ALLOWED");
        }
        File targetPath = new File(path);
        targetPath.mkdirs();
        if (!targetPath.exists()) {
            throw new Exception("MISSING_TARGET_PATH");
        }
        File file = new File(targetPath, fileName);
        URLConnection ucon = sourceUrl.openConnection();
        InputStream is = ucon.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(is);
        ByteArrayBuffer baf = new ByteArrayBuffer(100);
        int current = 0;
        int totalSize = ucon.getContentLength();
        while ((current = bis.read()) != -1) {
            baf.append((byte) current);
            // BEGIN - Handler feedback
            if (progressHandler != null && (baf.length() % 100) == 0) {
                Message msg = progressHandler.obtainMessage();
                Bundle b = new Bundle();
                if (totalSize > 0) {
                    b.putInt("total", totalSize);
                    b.putInt("step", baf.length());
                    b.putBoolean("working", true);
                }
                msg.setData(b);
                progressHandler.handleMessage(msg);
            }
            // END
        }
        FileOutputStream fos = new FileOutputStream(file);
        fos.write(baf.toByteArray());
        fos.close();
        // BEGIN - Handler feedback
        if (progressHandler != null) {
            Message msg = progressHandler.obtainMessage();
            Bundle b = new Bundle();
            if (totalSize > 0) {
                b.putInt("total", 0);
                b.putInt("step", 0);
                b.putBoolean("working", false);
            }
            msg.setData(b);
            progressHandler.handleMessage(msg);
        }
        // END
        return file.exists();
    } 
```

这样做，您可以更准确地反馈下载的实际进度（每个字节的字节数）。

# java - 使用 Windows Azure 在云中安装 Red5 服务器？

> ID：11339848
> 
> 赞同：1
> 
> 时间：2012-07-05T07:40:53.540
> 
> 标签：java, azure, red5

我在 Windows Azure 中制作了一个虚拟机。安装了Java SE 6 build 33 JDK，安装了Red5 server version 0.9.1（最新的1.0 rc2版本不行）。

现在本地 red5 服务器完美运行。我安装了一个演示，它工作正常。如果我想从另一台机器调用 Red5 服务器，我无法让它工作。

我在 red5.properties 文件中输入来自虚拟机的公共 IP 地址。我已经设置防火墙以打开端口：1935、1936、1945、5080、8088，并且我在 Windows Azure 中设置了相同的端点。

如果我用端口 5080 (http://168.63.23.20:5080) 调用公共 IP，什么都不会发生。甚至标准的 Red5 主页也没有。如果我在没有后 5080 的情况下调用 IP IIS 会显示标准 IIS 主页，因此可以从 Internet 调用机器。

任何人都知道我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:39:24.720

我想知道您是否在门户上创建了端点。仅靠防火墙是不够的。它还需要一个端点。有关详细信息，请参阅[http://www.windowsazure.com/en-us/manage/windows/how-to-guides/setup-endpoints/ 。](http://www.windowsazure.com/en-us/manage/windows/how-to-guides/setup-endpoints/)

此致，

明旭。

# c# - WCF中的两个接口和一个具体类

> ID：11339853
> 
> 赞同：6
> 
> 时间：2012-07-05T07:41:23.613
> 
> 标签：c#, .net, wcf, known-types

请检查以下示例

```
namespace GServices
{
    [ServiceKnownType(typeof(SearchType))]
    [ServiceContract(SessionMode = SessionMode.Allowed)]
    public interface ITest
    {
        [OperationContract]
        int subtract(int x, int y);
    }

    [ServiceKnownType(typeof(SearchType))]
    [ServiceContract(SessionMode = SessionMode.Allowed)]
    public interface ITest2
    {
        [OperationContract]
        int add(int x, int y);

    }
    public class G : ITest2, ITest
    {
        public int add(int x, int y)
        {
            return x + y;
        }
        public int subtract(int x, int y)
        {
            return x + y;
        }
    }
} 
```

ITest 有subtract() 方法，Itest2 有add() 方法。

两者都由一个名为 G 的具体类实现。

如果我只想通过 WCF 公开 ITest，我有以下端点配置

```
 <service name="GQS1" behaviorConfiguration="GQwcfBehaviour">
    <endpoint address="DP2Svcs" binding="wsHttpContextBinding" bindingConfiguration="wsHttpEndpointBindingConfig" contract="GServices.itest">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
  </service> 
```

当我运行此服务并检查 wsdl 时，我可以看到 itest2 中的方法也出现在 wsdl 中。在这个例子中，subtract() 方法应该只被暴露。但是 add() 方法也暴露了。

我的要求是 ITest 接口中的方法应该只公开。在这种情况下，我只想公开在 ITest 中声明的减法（）方法。但是它们的两个实现都只存在于一个具体的类“G”中。我在这里想念什么？

编辑：我已经给出了我的 Service.svc 文件内容：

```
<%@ ServiceHost Language="C#" Debug="true" Service="GServices.G"  %> 
```

![在此处输入图像描述](../Images/bc669d2be87f4599fd220518e8f3b8de.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T14:39:39.403

确保配置中元素中的`name`属性值是服务类的**完全限定名称**。在您的配置中，您的端点合同名称由命名空间 (GServices.itest) 限定，但服务不是 (GQS1)。如果您没有针对特定服务的任何服务配置，WCF 将添加一个默认端点，该端点将暴露您遇到的问题。例如，在下面的代码中，添加一个端点的行被注释掉了，服务上的 WSDL 显示了这两种操作。但是如果您取消注释该行（这将使服务只有一个 ITest 类型的端点），则只会显示“减法”操作。`<service>`

 **```
public class StackOverflow_11339853
{
    [ServiceContract(SessionMode = SessionMode.Allowed)]
    public interface ITest
    {
        [OperationContract]
        int subtract(int x, int y);
    }

    [ServiceContract(SessionMode = SessionMode.Allowed)]
    public interface ITest2
    {
        [OperationContract]
        int add(int x, int y);

    }
    public class G : ITest2, ITest
    {
        public int add(int x, int y)
        {
            return x + y;
        }
        public int subtract(int x, int y)
        {
            return x + y;
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(G), new Uri(baseAddress));
        // host.AddServiceEndpoint(typeof(ITest), new BasicHttpBinding(), "");
        host.Description.Behaviors.Add(new ServiceMetadataBehavior { HttpGetEnabled = true });
        host.Open();
        Console.WriteLine("Host opened");

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:58:59.800

如果您不需要将`ITest2`接口公开为服务，只需`ServiceContract`从中删除属性即可。

如果你需要`ITest2`在不同的服务中，你可以使用接口继承来解决这个问题：

```
interface ITest2
{ 
    [OperationContract]
    int Add(int x, int y);
}

[ServiceContract]
interface ITest2Service : ITest2 { } 
```

`ITest2`在第一个服务（也实现`ITest`）和`ITest2Service`第二个服务中使用。**

# vb.net - CHRW 或 unicode 字符列表

> ID：11339859
> 
> 赞同：1
> 
> 时间：2012-07-05T07:41:53.257
> 
> 标签：vb.net, unicode

网络上是否有此类字符的列表？

例如，vb.net 考虑

这些字符是不同的，但 utf8 排序规则认为它们是相同的。

括号中的数字是发生率。

```
٥ (4)  <------->  5 (20321)
​​​ (4)  <------->  ​ (97)
つ (4)  <------->  ツ (17)
≈ (1)  <------->  ​≈ (1)
​◦☃β (1)  <------->  ◦☃β (2)
​☀ (1)  <------->  ☀ (14)
​​​☆ (1)  <------->  ☆ (32)
​​​​​​★☆ (1)  <------->  ★☆ (6)
​​​​☺ (2)  <------->  ☺ (266)
​☺ (5)  <------->  ☺ (266)
​♏ (3)  <------->  ♏ (19)
♚​ (2)  <------->  ♚ (33)
♚​​​​​ (1)  <------->  ♚ (33)
​​​​♧ (1)  <------->  ♧ (2)
​✽ (1)  <------->  ✽ (26)
١٥ (1)  <------->  15 (8862)
☺​ (1)  <------->  ☺ (266)
➎ (1)  <------->  5 (20321)
٥٠ (1)  <------->  50 (4155)
๙ (2)  <------->  9 (13777)
​© (1)  <------->  © (173)
​ (4)  <------->   (50)
​​© (1)  <------->  © (173)
⌣​ (1)  <------->  ⌣ (120)
oe (7)  <------->  œ (7)
​​β (1)  <------->  β (19)
​​☺ (2)  <------->  ☺ (266)
​з (1)  <------->  з (16)
​​ (17)  <------->  ​ (97)
丸ノ内店 (2)  <------->  丸の内店 (3)
❷ (1)  <------->  2 (40100)
ˆ⌣ˆ​​​​ (3)  <------->  ˆ⌣ˆ (45)
βενιζελου (1)  <------->  βενίζελου (45)
​ƪ (5)  <------->  ƪ (84)
​​​​ (3)  <------->  ​ (97)
❹❻ (1)  <------->  46 (2856)
​:þ (1)  <------->  :þ (3)
ラーメン (19)  <------->  らーめん (27)
​​​​​ (1)  <------->  ​ (97)
٩ (3)  <------->  9 (13777)
۶ (3)  <------->  6 (16464)
​♥ (4)  <------->  ♥ (18)
​’ (1)  <------->  ’ (146344)
•ˆ⌣ˆ• (7)  <------->  •ˆ⌣ˆ​​​​• (7)
つ (4)  <------->  っ (6)
​​​&gt; (1)  <------->  > (160)
​​♌ (2)  <------->  ♌ (8)
登美ヶ丘店 (1)  <------->  登美ケ丘店 (1)
​ (2)  <------->   (3)
​” (5)  <------->  ” (4389)
⌣»··✽​ (1)  <------->  ⌣»··✽ (2)
​​​​​​​ (1)  <------->  ​ (97)
トラへラント (1)  <------->  トラヘラント (3)
☆​ (1)  <------->  ☆ (32)
ԅ҈ (1)  <------->  ԅ (3)
√ (1)  <------->  ​√ (1)
ί (4)  <------->  ι (15)
​° (2)  <------->  ° (183)
​​° (1)  <------->  ° (183)
γαλατσι (1)  <------->  γαλατσί (2)
 (2)  <------->  ​ (97)
πατησιων (2)  <------->  πατησίων (12)
​​☎ (1)  <------->  ☎ (18)
ッ (1)  <------->  つ (4)
​┌п┐​ (1)  <------->  ┌п┐ (2)
​◦’⌣’◦ (1)  <------->  ◦’⌣’◦ (15)
➋ (7)  <------->  2 (40100)
ノ (4)  <------->  の (7)
えひすヒル (1)  <------->  エヒスヒル (1)
“​​ (1)  <------->  “ (5962)
​​ƪ (3)  <------->  ƪ (84)
​ツ (1)  <------->  つ (4)
​&gt; (1)  <------->  > (160)
​​ː (1)  <------->  ​ː (1)
​ː (1)  <------->  ː (2)
@​​ (1)  <------->  @ (11656)
‹ (1)  <------->  ​‹ (1)
〇 (1)  <------->  0 (431)
я۝ (1)  <------->  я (74)
新百合ケ丘店 (2)  <------->  新百合ヶ丘店 (4)
ψυχικο (1)  <------->  ψυχίκο (1)
•​”• (2)  <------->  •”• (4)
​◦ˆ▽ˆ◦ (1)  <------->  ◦ˆ▽ˆ◦ (1)
┏ (1)  <------->  ​┏ (1)
​​​ʀ (2)  <------->  ʀ (20)
​​​​​​ (1)  <------->  ​ (97)
​امين (1)  <------->  امين (2)
١٥٧٤ (1)  <------->  1574 (16)
➌ (1)  <------->  3 (27369)
ʃ​ (1)  <------->  ʃ (70)
๑ (2)  <------->  1 (57313)
εγνατια (2)  <------->  εγνατία (2)
​☎ (1)  <------->  ☎ (18)
ƾ (1)  <------->  ts (63)
‬ (1)  <------->  ​ (97)
ƍ (2)  <------->  zw (2)
κειριαδων (1)  <------->  κείρίαδων (1)
ακταιον (1)  <------->  ακταίον (2)
αστερια (1)  <------->  αστερία (4)
αστυνομικο (1)  <------->  αστυνομίκο (3)
αττικον (1)  <------->  αττίκον (1)
αφοι (1)  <------->  αφοί (6)
φιλιασ (1)  <------->  φίλίασ (3)
γευστικον (1)  <------->  γευστίκον (2)
δικαστικο (1)  <------->  δίκαστίκο (1)
χαιδαριου (1)  <------->  χαίδαρίου (1)
θεσνίκησ (1)  <------->  θεσνικησ (1)
εκδοσεισ (1)  <------->  εκδοσείσ (1)
σια (1)  <------->  σία (3)
εστια (1)  <------->  εστία (3)
μηχανικων (1)  <------->  μηχανίκων (5)
ηλιοσ (1)  <------->  ηλίοσ (2)
αγιου (1)  <------->  αγίου (32)
γεωργιου (2)  <------->  γεωργίου (18)
ελευθεριο (1)  <------->  ελευθερίο (5)
επιπλα (1)  <------->  επίπλα (2)
ίεροσ (1)  <------->  ιεροσ (9)
σταδιου (1)  <------->  σταδίου (5)
μεραρχιασ (1)  <------->  μεραρχίασ (2)
εκπαιδευσησ (1)  <------->  εκπαίδευσησ (3)
θεσσαλονικησ (1)  <------->  θεσσαλονίκησ (13)
λαμιασ (1)  <------->  λαμίασ (4)
κτίρίο (1)  <------->  κτιριο (1)
ατει (1)  <------->  ατεί (1)
κωνσταντινιδησ (1)  <------->  κωνσταντίνίδησ (1)
μεσογειων (1)  <------->  μεσογείων (15)
λαικη (1)  <------->  λαίκη (6)
χωριου (1)  <------->  χωρίου (2)
πλατεια (2)  <------->  πλατεία (113)
πολυτεχνειου (1)  <------->  πολυτεχνείου (13)
ναυτικοσ (1)  <------->  ναυτίκοσ (3)
ομιλοσ (1)  <------->  ομίλοσ (7)
νικοσ (1)  <------->  νίκοσ (2)
σίδ (1)  <------->  σιδ (1)
παιδικη (1)  <------->  παίδίκη (11)
παπαγίαννη (1)  <------->  παπαγιαννη (1)
παραδοσίακη (1)  <------->  παραδοσιακη (1)
τρίων (1)  <------->  τριων (1)
κομμωτηριο (1)  <------->  κομμωτηρίο (8)
σπιτακι (1)  <------->  σπίτακί (4)
σπιτι (2)  <------->  σπίτί (16)
φιλων (1)  <------->  φίλων (3)
για (1)  <------->  γία (2)
ταμείο (1)  <------->  ταμειο (1)
τζακί (1)  <------->  τζακι (1)
ηπειρου (1)  <------->  ηπείρου (3)
καραγιωργη (1)  <------->  καραγίωργη (1)
χωριατικο (1)  <------->  χωρίατίκο (1)
​السلام (1)  <------->  السلام (3)
٢ (1)  <------->  2 (40100)
٣٠٣ (1)  <------->  303 (406)
٥٦ (2)  <------->  56 (2242)
٢١ (1)  <------->  21 (8533)
٤ (1)  <------->  4 (19623)
١٩٥ (1)  <------->  195 (308)
٥٥١ (1)  <------->  551 (99)
٩٠ (1)  <------->  90 (1296)
٣ (1)  <------->  3 (27369)
๑๑ (1)  <------->  11 (11482)
๖ (1)  <------->  6 (16464)
๕๐ (1)  <------->  50 (4155)
๒๗ (1)  <------->  27 (4895)
๘๕ (1)  <------->  85 (1249)
๒ (2)  <------->  2 (40100)
๓ (2)  <------->  3 (27369)
ああ博多人情 (1)  <------->  あぁ博多人情 (1)
アタシンチ (1)  <------->  アタシんち (1)
アタン (1)  <------->  あたん (1)
ト (5)  <------->  と (5)
ヒッツエリア (1)  <------->  ヒッツェリア (3)
イオンモール奈良登美ケ丘 (1)  <------->  イオンモール奈良登美ヶ丘 (2)
イスミヤ (1)  <------->  いすみや (1)
ウインターラント (1)  <------->  ウィンターラント (2)
ウエルシア (1)  <------->  ウェルシア (2)
エヒス (1)  <------->  えひす (1)
サクラ (1)  <------->  さくら (2)
さんくす (1)  <------->  サンクス (50)
百合ヶ丘 (1)  <------->  百合ケ丘 (1)
シェル (1)  <------->  シエル (1)
茅ケ崎店 (2)  <------->  茅ヶ崎店 (4)
堀の内 (2)  <------->  堀ノ内 (6)
たいわ (1)  <------->  タイワ (1)
ツタヤ (1)  <------->  つたや (1)
トラック (1)  <------->  とらっく (3)
なないろ (1)  <------->  ナナイロ (1)
新百合ヶ丘 (2)  <------->  新百合ケ丘 (3)
ひすとろ (1)  <------->  ヒストロ (6)
富ケ谷 (1)  <------->  富ヶ谷 (3)
御幸ヶ原町 (1)  <------->  御幸ケ原町 (2)
ホンハトゥル (1)  <------->  ホンハトウル (2)
マルシケ (1)  <------->  まるしけ (1)
マルヤ (1)  <------->  まるや (2)
つるや (1)  <------->  ツルヤ (2)
くりえいと (2)  <------->  クリエイト (7)
ゆう (1)  <------->  ユウ (1)
ハン (1)  <------->  はん (1)
ふぅ (1)  <------->  ふう (2)
らーめん専門店 (1)  <------->  ラーメン専門店 (2)
あんと (1)  <------->  アント (1)
らいふ (1)  <------->  ライフ (5)
能ケ谷 (1)  <------->  能ヶ谷 (2)
新百合ケ丘エルミロート店 (1)  <------->  新百合ヶ丘エルミロート店 (3)
れすとらん (1)  <------->  レストラン (15)
中華ソハ (1)  <------->  中華そは (10)
串かつ (2)  <------->  串カツ (3)
九州らーめん (1)  <------->  九州ラーメン (1)
シン (1)  <------->  しん (1)
八ケ崎 (1)  <------->  八ヶ崎 (4)
まつもと (1)  <------->  マツモト (1)
向ケ丘遊園駅 (1)  <------->  向ヶ丘遊園駅 (1)
月見ヶ丘 (2)  <------->  月見ケ丘 (3)
日ノ出町 (1)  <------->  日の出町 (1)
幡ケ谷 (1)  <------->  幡ヶ谷 (7)
江ノ島店 (1)  <------->  江の島店 (1)
さくらラウンシ (1)  <------->  サクララウンシ (3)
大イチョウ (1)  <------->  大いちょう (1)
イチョウ (1)  <------->  いちょう (1)
さとう (1)  <------->  サトウ (2)
いちょう並木 (1)  <------->  イチョウ並木 (1)
横浜らーめん (1)  <------->  横浜ラーメン (1)
サスケ (1)  <------->  さすけ (1)
馬見ケ崎 (1)  <------->  馬見ヶ崎 (2)
サカイ (1)  <------->  さかい (2)
保土ケ谷区天王町 (1)  <------->  保土ヶ谷区天王町 (1)
樋ノ口 (1)  <------->  樋の口 (2)
ミンミン (1)  <------->  みんみん (2)
関ケ島 (1)  <------->  関ヶ島 (1)
ふらいむ (1)  <------->  フライム (1)
チョコリ (1)  <------->  ちょこり (1)
やまと (1)  <------->  ヤマト (2)
すわん (1)  <------->  スワン (1)
中ムラ (1)  <------->  中むら (1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:38:10.990

`&#822;`是的， SGML 中的字符引用`ChrW(822)`在 VB.NET 中。

一般来说，您可能应该学习如何阅读[Unicode 码表](http://www.unicode.org/charts/)。还有许多网站可以帮助理解特定字符，例如

*   [文件格式信息](http://www.fileformat.info/info/unicode/index.htm)
*   [decodeunicode.org](http://decodeunicode.org/)

但是，在其规范表示中搜索字符要容易得多，`U+`后面是十六进制字符代码。所以在你的情况下`&#822;`是[U+0336](http://www.google.com/search?q=U+0336)。

至于不同的应用程序将不同的字符视为平等：这与排序规则有关，即特定于文化的排序和字符之间的等价性。例如，在德语中`ß`，`ss`通常比较相同，并且不同文化中字符的排序顺序也不同（例如`ä`，在瑞典语中排序在字母表的末尾，而`ae`在德语中排序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:50:20.903

Wolfram Alpha 对这类东西很有用。这些将为您提供 unicode 字符的视觉形式，以及字符的 unicode-codes（取决于您在搜索框中输入的内容）：

*   [http://www.wolframalpha.com/input/?i=%26%23822%3B](http://www.wolframalpha.com/input/?i=%26%23822%3B)
*   [http://www.wolframalpha.com/input/?i=%E2%99%88](http://www.wolframalpha.com/input/?i=%E2%99%88)

您将在此处找到有关 VB.Net 中字符集的更多信息：[vb.net character set](https://stackoverflow.com/questions/4195096/vb-net-character-set)

（至于 Unicode 字符的一般列表，您应该可以通过简单的网络搜索找到它……或者您可以查看[Wikipedia 对此主题的评论](http://en.wikipedia.org/wiki/List_of_Unicode_characters)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-28T18:55:19.953

此处的注释 #5 中有一段代码：[https ://www.office-forums.com/threads/finding-chrw-codes.1872731/](https://www.office-forums.com/threads/finding-chrw-codes.1872731/)

如果您在 VBA 中运行，它将打印字符列表及其关联的 ChrW 编号。我发现它真的很有帮助。

来自其他线程的代码：

```
Sub charactercodes()

    Application.ScreenUpdating = False

    Range("B1") = "ChrW CODE"
    Range("C1") = "OUTPUT"
    Rows("1:1").ShrinkToFit = True

    A = 1 'CHARACTER CODE VALUE
    CROW = 2 'CURRENT ROW #
    CCOL = 2 'CURRENT COLUMN NUMBER
    Cells.Select

    With Selection
      .NumberFormat = "@"
      .HorizontalAlignment = xlCenter
      .VerticalAlignment = xlCenter
      .Font.Name = "ARIAL"
      .Font.Size = 14
      .RowHeight = 20
    End With

    Columns(1).ColumnWidth = 1
    Columns(1).Interior.ColorIndex = 14
    Columns(2).ColumnWidth = 10
    Columns(3).ColumnWidth = 6

    Do
      Cells(CROW, CCOL) = A
      Cells(CROW, (CCOL + 1)) = ChrW(A)
      A = A + 1
      CROW = CROW + 1
      If CROW = 102 Then
        CROW = 2
        CCOL = CCOL + 3
        Columns(CCOL - 1).ColumnWidth = 1
        Columns(CCOL - 1).Interior.ColorIndex = 14
        Columns(CCOL).ColumnWidth = 10
        Columns(CCOL + 1).ColumnWidth = 6
      End If
    If A = 65001 Then
    Exit Do
    End If
    Loop
    Application.ScreenUpdating = True

End Sub 
```

# mfc - GDI 的绘图不受控制

> ID：11339860
> 
> 赞同：2
> 
> 时间：2012-07-05T07:41:53.430
> 
> 标签：mfc, controls, gdi

我正在编写一个 MFC 应用程序。我在窗体对话框上创建了一个 CStatic 派生控件，以便在启动程序时直接看到窗体。我现在使用派生类中的 OnPaint() 方法在此控件中绘图。到目前为止，一切正常。然而，奇怪的是，这些图纸并没有被剪裁到控件之外。相反，如果我画了非常大的东西，整个形式都会被画出来。在我的理解中，应该只绘制控件。

在此先感谢安德烈亚斯 D。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:49:20.543

@dlb 现在知道了。

```
CDC* pDC = GetDC();
CRect rClient();
GetClientRect(rClient);
CRgn ClipRgn;
if (ClipRgn.CreateRectRgnIndirect(&rClient))
{
    pDC->SelectClipRgn(&ClipRgn);
}

// Drawing content

pDC->SelectClipRgn(NULL);
ReleaseDC(pDC); 
```

感谢您的回答

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:21:42.840

检查您的控件是否使用“未剪辑的设备上下文”选项。您可以通过获取控制标志来检查这一点。您也可以调用 IsOptimizedDraw()，如果返回 true，则您的绘图可以在控件之外绘制。

# python-3.x - 无法在使用 type() 创建的类中调用 base __init__

> ID：11339862
> 
> 赞同：0
> 
> 时间：2012-07-05T07:41:54.430
> 
> 标签：python-3.x, metaclass

我创建了一个具有类型的类，因为我需要使用一个变量作为基础。如果我不提供`__init__`方法，它可以正常工作，但是当我提供方法时，我无法调用 base 的`__init__`.

作品：

```
def constructor():
    blah blah
    api = importlib.import_module(xtype)
    mc = type('mc', (api.aclass,), {})
    obj = mv(**args)
    return obj 
```

不起作用，返回“ `SystemError: super(): __class__ cell not found`”

```
def constructor():
    blah blah
    api = importlib.import_module(xtype)
    mc = type('mc', (api.aclass,), dict(__init__ = mc__init)
    obj = mc(**args)
    return obj

def mc_init(*args, **kwargs):
    do_some_stuff
    super().__init__(*args, **kwargs) 
```

不起作用，`Base mc.__init__ not called.`稍后在创建对象时返回“”：

```
def constructor():
    global api
    blah blah
    api = importlib.import_module(xtype)
    mc = type('mc', (api.aclass,), dict(__init__ = mc__init)
    obj = mc(**args)
    return obj

def mc_init(*args, **kwargs):
    global api
    do_some_stuff
    api.aclass.__init__(*args, **kwargs)

x = constructor() 
```

如何调用基类的**init ？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:55:26.170

我很惊讶您的`type`电话正常工作；`bases`应该是一个元组 ( `(api.aclass,)`)。这只是一个错字吗？

您`super()`在 (2) 中的调用将不起作用，因为它在类声明之外；Python 3`super`的魔法相当复杂，说实话有点脆弱。你可以写`super(mc, self).__init__(*args, **kwargs)`。

但是，您没有理由不在这里使用正确的类声明（尤其是如果您不了解如何使用 3-argument `type`）；Python 完全可以使用变量基声明类：

```
def constructor():
    ...
    api = importlib.import_module(xtype)
    class mc(api.aclass):
        def __init__(self, *args, **kwargs):
            super().__init__(*args, **kwargs)
    obj = mc(**args)
    return obj 
```

# php - 添加多个 cron 作业后出现内部服务器错误

> ID：11339864
> 
> 赞同：2
> 
> 时间：2012-07-05T07:42:00.117
> 
> 标签：php, cron

我正在从我的 cpanel 添加多个 cron 作业。大约 10 分钟后，我收到了一封电子邮件

```
execl: couldn't exec `/bin/sh'
execl: Resource temporarily unavailable 
```

之后，我不断收到此错误：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, webmaster@********.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log.

Additionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request.
Apache Server at www.******.com Port 80 
```

我已经删除了所有的 cron 作业。但我仍然收到错误消息。请帮忙。提前谢谢！

# extjs4.1 - 在选项卡面板中添加面板

> ID：11339865
> 
> 赞同：0
> 
> 时间：2012-07-05T07:42:05.297
> 
> 标签：extjs4.1

我正在尝试显示一个网格，但在`List of customers`列之间添加一个面板`Customer Id, active, firstname last name, email address`。

我需要在这两个组件之间添加一个面板。在那个面板中，我将拥有不同的 UI 元素。我怎样才能做到这一点 ？

![在此处输入图像描述](../Images/9889f3d33c7a24efd90ce378540536d6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:56:55.760

好吧，我相信您只有一个带有客户标题列表的网格，最简单的方法是将一个面板和一个网格（没有标题的网格）放入另一个具有标题的面板中。

```
{
  xtype: 'panel',
  title: 'List of customers',
  layout:'border',
  items: [
      {
         //the panel you want
         xtype: 'panel',
         region: 'north',
         height: 100,
      },
      {
          //your current grid without a title
          xtype: 'gridpanel',
          region: 'center',
          height: 300,
      }
  ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:57:10.700

我需要添加面板，标题为“列出客户”和垂直布局。在其中你需要添加两个项目：你的新面板和那个网格（没有标题）。在那里你会得到你想要的。

```
{
  xtype: 'panel',
   layout: {
      type:"vbox",
      pack:"start",
      align:"stretch"}
   title:"List of Customers",
   items: [ ... your new panel and grid .. ] 
} 
```

# android - 缩放和滑动问题

> ID：11339867
> 
> 赞同：1
> 
> 时间：2012-07-05T07:42:24.383
> 
> 标签：android, zooming, viewflipper, swipe

我正在尝试实现一个 android 应用程序，我希望在其中实现捏合和缩放、滑动操作。为此，我在布局中使用了视图翻转器。我面临的问题如下：

1.  当我尝试实现缩放时，我无法滑动。画面一片空白
2.  当我尝试实现滑动时，我无法缩放。

我已经搜索了很多以使其与两者一起使用，但徒劳无功。

有人可以提出一些建议吗？

# c# - Programatically remove wifi (Wireless Network Connection) icon from system tray (notification area) in Windows 7

> ID：11339868
> 
> 赞同：0
> 
> 时间：2012-07-05T07:42:31.583
> 
> 标签：c#, .net, system-tray, notification-area

I want to remove wifi notification icon from system tray using C#. How this can be achieved?

**Modified**:

I do not want to disable wifi or any other network connection but hide.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:54:49.483

You need to remove the Network system notification icon. The following registry commands should do that for you. You can run the command via a command line like `regedit regcmd.reg` or simply add the keys manually using C#. For more info see this [article](http://www.sevenforums.com/tutorials/19085-system-icons-enable-disable.html).

*   [Disable the Network Icon](http://www.sevenforums.com/attachments/tutorials/140689d1298779770-system-icons-enable-disable-disable_network_notification_icon.reg)
*   [Enable the Network Icon](http://www.sevenforums.com/attachments/tutorials/140688d1298779770-system-icons-enable-disable-enable_network_notification_icon.reg)

# php - html中不同文件夹中的文件路径

> ID：11339872
> 
> 赞同：2
> 
> 时间：2012-07-05T07:42:50.343
> 
> 标签：php, html

我有以下包含文件的文件夹结构：

```
index.php
includes/header.php
includes/conn.php
contents/ad_list.php
contents/ad_posting.php 
```

在我的`index.php`我有以下包括

`include("includes/header.php");`没关系

但在`contents/ad_list.php`上面包含给出以下错误：

```
Warning: include(includes/header.php) [function.include]: failed to open stream: No such file or directory in C:\XAMPP\xampp\htdocs\NAYAAD\contents\ad_list.php on line 4 
```

我无法解决这个问题。

问候：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:44:57.157

您将需要上一级：

```
include("../includes/header.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:45:17.737

在这种情况下，`include("../includes/header.php");`解决问题，但是，最好的方法是知道应用程序的根并将其用作包含的基础。

您需要`include_path`在`php.ini`相对于您的应用程序根文件夹中进行设置，或者尝试使用`$_SERVER['DOCUMENT_ROOT'];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:44:41.787

尝试在您的包含中包含 dirname。

```
<?php
include dirname(__FILE__)."/../contents/ad_list.php";
?> 
```

dirname(_FILE) 可以使其更具可移植性，并且根据其运行位置，您可以将其复制并根据需要添加点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:47:08.913

试着放一个“。” 地址前面

```
include("./contents/ad_list.php"); 
```

# c++ - C++ 中的指针——初学者的困境

> ID：11339873
> 
> 赞同：-1
> 
> 时间：2012-07-05T07:42:51.150
> 
> 标签：c++, pointers, function-pointers

指针总是让我对我打算在代码中使用的逻辑一无所知，如果有人可以帮助我理解一些真正有用的概念。这是我程序中的代码片段，

```
vector <char> st; 
char *formatForHtml(string str, string htmlTag)
{ 
    string strBegin;
    strBegin = "<";
    strBegin.append(htmlTag);
    strBegin.append(">");
    strBegin.append(str);
    string strEnd = "</";
    strEnd.append(htmlTag);
    strEnd.append(">");
    strBegin.append(strEnd);
    st.resize(strBegin.size());
    for (int i =0;i <strBegin.size();i++) {
        st[i] = strBegin.at(i);
    }
    return &st[0];
} 
```

在上面的代码中，如果我必须返回的地址`st[0]`，我必须编写类型的函数`char *`。我需要知道这样做的原因，如果地址是整数值，为什么我不能将函数定义为`int`类型？

PS这是一个初学者级别的疑问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:51:40.970

你不告诉我们是什么`st`，所以我们无法判断代码是否完全不正确，或者只是糟糕的设计。如果`st`是一个错字`str` （只是猜测，因为`str`没有在任何地方使用），那么您有未定义的行为，并且程序不正确，因为您将指针返回到已被破坏的对象。无论如何，像这样的函数`formatForHtml`应该返回一个`std::string`, 作为一个值，而不是一个指针（当然也不是一个指向非常量的指针）。

我可能会补充一点，您不使用循环逐个字符地复制字符串值。`std::string`充当普通值类型，因此您可以分配：`st = strBegin;`。

编辑：

只是为了记录，我已经重新检查了你的代码。写它的自然方式是：

```
std::string
formatForHtml( std::string const& cdata, std::string const& tag )
{
    return '<' + tag + '>' + cdata + "</" + tag + '>';
} 
```

没有指针（至少不可见——实际上是“+ 运算符”），并且充分利用了 `std::string`s 设施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:46:41.233

> 我必须编写'char *'类型的函数我需要知道这样做的原因

没有理由这样做。只需返回一个`std::string`.

从您的代码的外观来看，`st`是一个`std::vector<char>`. 由于`std::vector`具有连续内存，`&st[0]`是向量中第一个的地址`char`，因此指向向量表示的**非**空终止字符串，这在函数之外不是很有帮助，因为您找不到长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:47:21.587

那是笨拙的代码，您期望 'str' 作为参数，但随后返回它的内存位置？为什么不返回字符串本身？

你的代码有一些错别字。（当您输入“st”时，您的意思是“str”吗？如果不是，那么“st”在哪里定义？）

至于为什么不能将函数定义为“int”类型，那是因为“int”与“pointer to char”是不同的类型。

就个人而言，我会返回“字符串”，并在最后有一个“返回 str”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:48:57.940

指针是指针，而不是整数值。当且仅当 st 是全局变量或在此函数中声明为静态时，代码才是正确的。但返回字符串最好，而不是返回指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T07:49:34.493

简单的。

```
string str 
```

是包含一堆字符的东西。

```
str[0] 
```

返回第一个字符。

所以，

```
&str[0] 
```

给你第一个字符的地址，因此它是一个“char *”---“char”是指针指向的任何内容，“*”是指针的“地址”部分。指针的类型与所指向的对象有关。

此外，地址可能只是硬件级别的“整数”（一切都是整数......除了整数本身，它们是一堆布尔值），但这对于更高级别的语言没有任何意义。对于高级语言，指针是指针，而不是整数。

将一个视为另一个几乎总是一个错误，C++11 甚至添加了 nullptr 关键字，因此我们不必依赖一个有效的“指针是整数”的情况。

顺便说一句，您的代码将无法正常工作。“str”仅在函数执行期间存在，因此当函数返回时，“str”不再存在，这意味着您返回的指针指向一个大黑无处。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T07:50:58.620

为什么不使用字符串作为函数的返回类型？

首先：指针是内存中某物的地址，所以你不能用整数替换它（只有一些肮脏的技巧）。

第二：&st[0] 是字符串用来存储其内容的内部缓冲区的地址。当 st 超出范围（或被重用于下一次调用）时，它将被覆盖或返回给堆管理器，因此调用此函数的人将以一些垃圾结束。

顺便说一句，你的大部分函数都做了字符串类可以自己做的不必要的工作（例如将 strBegin 复制到 st）。

# iphone - 从 App Store 下载的应用程序无法启动，没有崩溃或崩溃日志

> ID：11339875
> 
> 赞同：0
> 
> 时间：2012-07-05T07:42:58.690
> 
> 标签：iphone, crash, app-store

从 App Store 下载时，我的应用程序无法启动，见下文。没有崩溃或崩溃日志。有任何想法吗？

```
Jul  5 08:54:40 unknown fairplayd.N90[41] <Error>: libMobileGestalt computeUniqueDeviceID: total time for bb to return imei: 0
Jul  5 08:54:40 unknown SpringBoard[52] <Warning>: Unable to obtain a task name port right for pid 1310: (os/kern) failure
Jul  5 08:54:40 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:xxxxxxxx.Xxxxxxx[0x5760]) Exited: Killed: 9
Jul  5 08:54:40 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:xxxxxxxx.Xxxxxxx[0x5760]) Throttling respawn: Will start in 2147483647 seconds
Jul  5 08:54:40 unknown SpringBoard[52] <Warning>: Application 'Xxxxxxx' exited abnormally with signal 9: Killed: 9
Jul  5 08:54:40 unknown kernel[0] <Debug>: AppleFairplayTextCrypterSession::fairplayOpen() failed, error -42110
> 
Jul  5 08:55:29 unknown lockdownd[26] <Notice>: 00381000 spawn_and_handle_checkin: Timeout waiting for com.apple.crashreportmover service agent to checkin. spawn=1341471314 select=1341471314 now=1341471329
Jul  5 08:55:29 unknown ReportCrash[1346] <Error>: libMobileGestalt computeUniqueDeviceID: total time for bb to return imei: 0
Jul  5 08:55:29 unknown ReportCrash[1346] <Notice>: Saved crashreport to /Library/Logs/CrashReporter/stacks-2012-07-05-085529.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0
Jul  5 08:55:30 unknown lockdownd[26] <Notice>: 00381000 spawn_service_agent: Could not look up service in the map
Jul  5 08:55:30 unknown lockdownd[26] <Notice>: 00381000 spawn_and_handle_checkin: Could not spawn the com.apple.crashreportcopy service agent:InvalidService 
> 
Jul  5 08:55:30 unknown lockdownd[26] <Notice>: 00381000 spawn_service_agent: Could not look up service in the map
Jul  5 08:55:30 unknown lockdownd[26] <Notice>: 00381000 spawn_and_handle_checkin: Could not spawn the com.apple.crashreportcopy service agent:InvalidService 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T07:55:44.937

在过去的几个晚上，从 AppStore 下载的应用程序出现了一些问题，这些应用程序已从 AppStore 损坏。从 AppStore 删除并重新安装。

[http://www.marco.org/2012/07/04/app-store-corrupt-binaries](http://www.marco.org/2012/07/04/app-store-corrupt-binaries)

# excel - EXCEL VBA存储/将整行保存在数组中？

> ID：11339876
> 
> 赞同：1
> 
> 时间：2012-07-05T07:43:06.720
> 
> 标签：excel, excel-2010, vba

已收到帮助如何在列中搜索字符串，然后将其存储在数组中。是否可以存储整行？已搜索但找不到。

我想在一个包含字符串数据的工作表中搜索。然后将包含该字符串的那些行复制到另一个工作表。

我的代码看起来像这样。

```
Set wsRaw = Worksheets("raw_list")
Set phaseRange = wsRaw.Columns(PhaseCol)

SearchString = "start"
Set aCell = phaseRange.Find(What:=SearchString, LookIn:=xlValues, _
            LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False)
If Not aCell Is Nothing Then
    Set bCell = aCell
    ReDim Preserve arrStart(nS)
    arrStart(nS) = aCell.Row
    nS = nS + 1
    Do While ExitLoop = False
        Set aCell = phaseRange.FindNext(After:=aCell)
        If Not aCell Is Nothing Then
            If aCell.Row = bCell.Row Then Exit Do
            ReDim Preserve arrStart(nS)
            arrStart(nS) = aCell.Row
            nS = nS + 1
        Else
            ExitLoop = True
        End If
    Loop
Else
End If 
```

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:11:15.743

由于您是根据相关列中的搜索条件将数据从 Sheet1 复制到 Sheet2，那么我建议使用 Autofilter。

看到这个

```
Sub Sample()
    Dim wsRaw As Worksheet
    Dim strSearch As String
    Dim PhaseCol As Long, LastRow As Long
    Dim phaseRange As Range, rng As Range

    strSearch = "start"

    '~~> Change this to the relevant column
    PhaseCol = 1

    Set wsRaw = Sheets("raw_list")

    With wsRaw
        LastRow = .Range(Split(Cells(, PhaseCol).Address, "$")(1) & _
                  .Rows.Count).End(xlUp).Row

        Set phaseRange = wsRaw.Range( _
                                    Split(Cells(, PhaseCol).Address, "$")(1) & _
                                    "1:" & _
                                    Split(Cells(, PhaseCol).Address, "$")(1) & _
                                    LastRow)

        '~~> Remove any filters
        .AutoFilterMode = False

        '~~> Filter, offset(to exclude headers) and copy visible rows
        With phaseRange
            .AutoFilter Field:=1, Criteria1:=strSearch
            Set rng = .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow
            '~~> Chnage Sheet2 to the relevant sheet name where you want to copy
            rng.Copy Sheets("Sheet2").Rows(1)
        End With

        '~~> Remove any filters
        .AutoFilterMode = False
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/dc14602a5355907307168796773f9642.png)

# php - PHP表单，检查2个日期相距不远

> ID：11339884
> 
> 赞同：2
> 
> 时间：2012-07-05T07:43:55.177
> 
> 标签：php, javascript

我在工作中陷入了深渊，我从小就知道纯 HTML（90 年代中期），我被要求在工作中更改 PHP 表单，我可以更改其他人编写的 PHP 代码，但是我没有办法自己写。我已经将此表格更改为我想要的样子，但是我想更改一点，如果有人可以提供帮助，将不胜感激...

已经在这个网站上搜索了 2 天并尝试了一些东西，我有以下内容

```
 <p class="quest">Date from: <input type="text" name="acc2" class="tcal" value="" /> to: <input type="text" name="acc3" class="tcal" value="" /> 
```

它使用 javascript 弹出一个日历（tigra 日历），然后返回 2 个日期（acc2 和 acc3），日期为 d/m/Y (DD/MM/YYYY) 格式（欧洲/澳大利亚/新西兰的标准） . 我想要做的是让它检查差异是否大于 42 天（6 周），如果是我希望它显示一些带有链接的文本（42 天或更短的时间也可以）。如果我把页面作为测试：

```
<?php echo($acc3); ?> 
```

然后它在页面上显示 1341442800 （在选择日期之前），如果用户选择了一个日期，则上面的数字保持不变（不是动态的）

我想要的可能吗？如果没有，是否可以在提交时检查并弹出警报（没有链接）？我目前使用 Javascript 来检查表单，一个例子是：

```
<script language="javascript" type="text/Javascript">
    <!--
        function collect()  {
            if(document.all.ct.value == "TempAcc")
            {
                if(document.all.acc7.value.length <11)
                {
                    alert("You need to fill in your contact number with your FULL number including STD code.");
                    return false;
                }
            }
        }//end function collect
    //-->
    </script> 
```

对此的任何帮助将不胜感激，请尝试具体说明任何代码，因为我仍然是一个初学者。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:02:30.033

这对我有用：[fiddle.net 上的现场演示](http://jsfiddle.net/KqCpu/1/)

```
// parse dates from DD/MM/YYYY to YYYY/MM/DD
var oldBegin = parseDate("03/06/2012");
var oldEnd = parseDate("07/06/2012");

// calculate difference and format to days
var diff = Math.round((oldEnd - oldBegin)/1000/60/60/24);
alert(diff);

function parseDate(str) {
  var m = str.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);
  return (m) ? new Date(m[3], m[2]-1, m[1]) : null;
} 
```

**编辑：将** [jQuery 包含](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)到您的网页中。它将帮助您处理 javascript 部分。给两个输入字段一个唯一的 id（如 id="date1" 和 id="date2"），然后在 javascript 中获取值

```
$('date1').val();
$('date2').val(); 
```

整个代码应该是这样的：

```
<script type="text/javascript">
//The code will trigger when the user leaves the second input field
$("#date2").focusout(function() {
    // parse dates from DD/MM/YYYY to YYYY/MM/DD
    var date1 = parseDate($('date1').val());
    var date2 = parseDate($('date2').val());

    // calculate difference and format to days
    var diff = Math.round((date2 - date1)/1000/60/60/24);
    alert(diff);

    function parseDate(str) {
      var m = str.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);
      return (m) ? new Date(m[3], m[2]-1, m[1]) : null;
    }
});
</script> 
```

您现在可以添加一些 if 语句来检查一个输入是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:58:55.590

尝试这个 ：

```
<script type="text/javascript">
函数 daysBetween() {
    var one = new Date(2012, 0, 1); // 年年 - 月 - 日
    变量二 = 新日期(2012, 5, 5); // 年年 - 月 - 日

    var one_day=1000*60*60*24

   document.write(Math.ceil((two.getTime()-one.getTime())/(one_day))+"days")
}
</脚本>

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:50:07.780

[这是用PHP](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)和[Javascript](https://stackoverflow.com/questions/41948/how-do-i-get-the-difference-between-two-dates-in-javascript)编写的两个问题/答案

PHP

```
$date1 = "2007-03-24";
$date2 = "2009-06-26";

$diff = abs(strtotime($date2) - strtotime($date1));

$years = floor($diff / (365*60*60*24));
$months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
$days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));

printf("%d years, %d months, %d days\n", $years, $months, $days); 
```

Javascript

```
var oldBegin = ...
var oldEnd = ...
var newBegin = ...

var newEnd = new Date(newBegin + oldEnd - oldBegin); 
```

# html - 奇数表行未突出显示

> ID：11339885
> 
> 赞同：0
> 
> 时间：2012-07-05T07:43:56.020
> 
> 标签：html, css, hover

我有一个突出显示所有奇数行的表格。

为此，我只需检查行号是什么并将`alt`类应用于所述行。

`:hover`然后，我使用CSS 文件中的简单元素突出显示悬停时的行。

它完美地突出了非`.alt`行，但不是`alt`行。

这是我的 CSS 代码：

```
.datagrid tr:hover, .datagrid tr.alt:hover {
    background-color:#497A43;
    color:#D3F0D4;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:50:36.950

不要应用那些繁琐的类更改方法。而是使用 css 选择器

```
.datagrid tr:nth-child(even):hover {background: #CCC}
.datagrid tr:nth-child(odd):hover {background: #FFF} 
```

[js小提琴](http://jsfiddle.net/HSc4F/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:24:21.520

代替

```
.datagrid tr:hover, .datagrid tr.alt:hover 

{

    background-color:#497A43;

    color:#D3F0D4;

} 
```

使用以下

```
.datagrid tr.alt:hover 

{

    background-color:#497A43;

    color:#D3F0D4;

} 
```

以上将背景颜色和颜色应用于类为“alt”的行，并且仅当它们悬停时。

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:50:14.923

它无需`.alt`选择器即可工作。

见[http://jsbin.com/ixokoj/2/edit](http://jsbin.com/ixokoj/2/edit)

# wpf - 资源字典中使用的 WPF 资源文件

> ID：11339888
> 
> 赞同：3
> 
> 时间：2012-07-05T07:44:00.677
> 
> 标签：wpf, resources, resourcedictionary

为了使我的应用程序可本地化，我使用了此博客中的一种方法：

[http://www.rhyous.com/2010/10/20/using-resources-resx-for-strings-in-a-wpf-application-a-technique-to-prepare-for-localization/](http://www.rhyous.com/2010/10/20/using-resources-resx-for-strings-in-a-wpf-application-a-technique-to-prepare-for-localization/)

所以我有这样定义的控件来从资源文件中获取字符串：

```
<Label Content="{x:Static p:Resources.btn_tooltip_edit}"/> 
```

这工作正常。

为了使我的控件样式可重用，我将它们打包到一个额外的资源字典文件中。

问题是当我想从资源字典 (.xaml) 访问资源文件 (.resx) 时，这是不可能的，并且会引发 XAMl 解析异常 (System.Windows.Markup.StaticExtension)。

```
<Setter Property="ToolTip" Value="{x:Static p:Resources.btn_tooltip_edit}"/> 
```

怎么了？

是否可以从样式文件访问资源文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-12T20:50:01.443

将资源文件的访问修饰符从 internal 更改为 public。

# django - 在 Django 中保存编辑的信息

> ID：11339889
> 
> 赞同：0
> 
> 时间：2012-07-05T07:44:02.043
> 
> 标签：django, django-forms

我在我的应用程序中创建了一个表单，我可以在其中获取用户的详细信息。现在我可以编辑表格，但我无法保存数据。我想保存更改的数据并继续。

它说：该用户的成人已经存在。

我的 urls.py：

```
url(r'^home/editform/(?P<userpk>[^/]+)/$', 'lexuseditform', name='lexuseditform'),
url(r'^home/edited/(?P<userpk>[^/]+)/$', 'lexusedited', name='lexusedited') 
```

我的意见.py：

```
@login_required                              
def lexuseditform(request,userpk):
    if int(userpk) != request.user.pk:
        return HttpResponseForbidden()
    else:
        adult = Adult(user=request.user)
        if request.method == 'POST': # If the form has been submitted...
            form = AdultForm(request.POST,instance=adult) # A form bound to the POST data
            if form.is_valid(): # All validation rules pass
              form.save()
              redirect_url = reverse('lexusedited')
              return HttpResponseRedirect(redirect_url) # Redirect after POST
        else:
           form = AdultForm(instance=adult) # An unbound form

    return render(request,'lexus/lexuseditform.html', {'form': form})

@login_required                              
def lexusedited(request,userpk):
    return render(request,'lexus/lexusedited.html') 
```

我的forms.py：

从模型导入成人从 django.forms 导入 ModelForm

```
class AdultForm(ModelForm):
    """
    Edit Profile Information
    """
    class Meta:
        model = Adult
        fields = ('user', 'email','fullname') 
```

我的模型.py：

```
from django.db import models
from django.contrib.auth.models import User

class Adult(models.Model):
    """
    Adult Information
    """
    user = models.OneToOneField(User)
    fullname = models.CharField(max_length=100)
    email = models.EmailField()

    def __unicode__(self):
        return self.user.username 
```

不知道我的错误在哪里。需要一些指导..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:59:00.173

虽然你没有展示`Adult`模型结构，但我敢打赌它有类似的东西

```
class Adult(models.Model):
    user = models.ForeignKey(User, unique=True) 
```

这就是为什么您不能使用相同的用户（名称）保存 new Adult() 的原因。因此，您必须更改模型，或者为指定用户加载现有的 Adult：

```
if Adult.objects.filter(user=request.user).exists():
    adult = Adult.objects.get(user=request.user) # load existing Adult
else:
    adult = Adult(user=request.user) # create new Adult 
```

但我不知道你的表格和模型是什么样子的。

更新：

或使用：

```
adult, is_created = Adult.objects.get_or_create(user=request.user) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:01:10.857

有点猜测，因为您没有发布表单和模型的代码，但假设表单是常规模型表单，您的问题很可能来自您的成人模型对用户具有唯一约束（OneToOneField 或带有`unique=True`) 的外键。由于您为表单创建了一个新的 Adult 实例，因此它违反了唯一性约束。假设（再次）这个约束是您想要的，并且您的视图应该为用户创建一个相关的成人实例（如果它尚不存在）或编辑现有的实例，您需要首先检查是否有成人实例对于用户：

```
@login_required                              
def lexuseditform(request):
    try:
        adult = Adult.objects.get(user=request.user)
    except Adult.DoesNotExist:
       adult = Adult(user=request.user)
    #... your code here 
```

另请注意，如果您考虑一下，我删除了没有用的`userpk`论点和测试。`request.user.pk`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:47:05.767

正确版本（参考 Tisho 的回答）：

我的意见.py：

```
@login_required                              
def lexuseditform(request,userpk):
    if Adult.objects.filter(user=request.user).exists():
        adult = Adult.objects.get(user=request.user) # load existing Adult
    else:
        adult = Adult(user=request.user) # create new Adult
    if request.method == 'POST': # If the form has been submitted...
        form = AdultForm(request.POST,instance=adult) # A form bound to the POST data
        if form.is_valid(): # All validation rules pass
            form.save()
            redirect_url = reverse('lexusedited')
            return HttpResponseRedirect(redirect_url) # Redirect after POST
    else:
           form = AdultForm(instance=adult) # An unbound form

    return render(request,'lexus/lexuseditform.html', {'form': form}) 
```

# java - 班级设计查询

> ID：11339890
> 
> 赞同：0
> 
> 时间：2012-07-05T07:44:04.477
> 
> 标签：java, design-patterns

我有一个接口`Schema`，另一个叫`SchemaParser`. `SimpleSchemaParser`实现`SchemaParser`和`SimpleSchema`实现`Schema`。

`SimpleSchemaParser`有一个`parseSchema()`返回 a的方法`Schema`。这样，`SimpleSchemaParser.parseSchema()`将返回一个`Schema`对象。但我知道那`SimpleSchemaParser`总是会返回一个`SimpleSchema`. 我应该如何更改我的设计以使这一点变得明显，而不是总是必须将结果转换为`SimpleSchema`？在这种情况下我应该选择仿制药吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:51:51.963

您确实可以使用泛型，但它们不是必需的：

```
class SchemaExample 
{
    interface Schema 
    {
        // methods go here
    }

    interface SchemaParser 
    {
        Schema parseSchema();
    }

    class SimpleSchema implements Schema 
    {
        // implementation of Schema's methods
    }

    class SimpleSchemaParser implements SchemaParser 
    {
        @Override
        public SimpleSchema parseSchema() 
        {
            // real business logic here...
            return new SimpleSchema();
        }   
    }

    void usage() 
    {
        SimpleSchema schema = new SimpleSchemaParser().parseSchema();
    }
} 
```

一个稍微宽泛的问题是：*你为什么关心返回的是哪个模式的实现？*是否存在仅存在于 上的方法`SimpleSchema`？这些可以移动到界面`Schema`吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T07:53:21.317

从 java 5 开始，您可以返回 SimpleSchema。这称为“协变返回类型覆盖”。

所以就写

```
class SimpleSchemaParser implements SchemaParser {
  @Override
  public SimpleSchema parseSchema() {...}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T08:04:10.420

目前的做法是对的。它鼓励面向接口的编程：程序应该始终与实体 SchemaParser 和 Schema 一起工作，而不用担心它是基于 SimpleSchema 还是其他类型。如果接口设计良好，则不需要强制转换：接口方法是唯一应该使用/调用的方法。

```
SchemaParser parser = new SimpleSchemaParser()
Schema schema = parser.parseSchema() 
```

# iphone - 我将一些数据发送到 Web 服务，它返回一些 JSON 作为 NSData。如何转换为字典？（iOS 4.3）

> ID：11339899
> 
> 赞同：0
> 
> 时间：2012-07-05T07:44:25.583
> 
> 标签：iphone, objective-c, ios, xcode

我将一些凭据发送到 Web 服务。

我可以得到 NSData 或 NSString 的响应。

将（NSData 或 NSString）JSON 转换为 NSDictionary 以便我可以处理它的最简单方法是什么？

为 iOS4.3 构建非常感谢，-代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:51:36.890

从 iOS 5.0 开始，您可以[在此处](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)`NSJSONSerialization`使用文档。

[这里](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)有一个很好的使用教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:48:49.777

用这个 ：

```
NSString *urlString = [NSString stringWithFormat:kURLString,self.chapter,self.page];
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString]];
[urlRequest setHTTPMethod:@"POST"];
[urlRequest setHTTPBody:[urlString dataUsingEncoding:NSISOLatin1StringEncoding]];

NSData* responseData = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:nil error:nil];
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSISOLatin1StringEncoding];

NSDictionary* result = [(NSDictionary*)[responseString JSONValue] objectForKey:@"Result"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:12:03.243

我使用 SBJson

```
NSArray *arrObj = (NSArray*)[[JsonParser sharedJsonParser] getObjectsFromJsonString:responseString]; 
```

响应字符串在这里是一个 JSON 字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:25:12.850

使用链接下载 SBJsonParser 框架，[http](http://github.com/stig/json-framework/downloads) ://github.com/stig/json-framework/downloads 并将所需的类添加到您的项目 (SBJsonParser.h)。

导入 SBJsonParser.h 并使用以下代码，

```
 SBJsonParser *parser = [[SBJsonParser alloc] init];

     //dictionary with name,id
     NSDictionary *jsonObject = [parser objectWithString:jsonString error:NULL];  

     //name array                
      NSMutableArray *nameArray = [[NSMutableArray alloc]init];
   for (NSMutableDictionary *dic in jsonObject){

      [nameArray addObject:[dic valueForKey:@"name"]];
    } 
```

# jquery - Ajax Jquery Slider 自动播放

> ID：11339906
> 
> 赞同：0
> 
> 时间：2012-07-05T07:45:00.060
> 
> 标签：jquery, ajax, slider, autoplay

我有一个滑块，它使用以下按钮进行导航。我将如何为此添加自动播放功能 - SetTimeout 功能？

谢谢

// 下一个点击 jQuery('.ajax-next').click(function(){

```
 if ( jQuery(".ajax-portfolio-window").is(':animated') || jQuery(".ajax-portfolio-image-wrap").is(':animated') ) return;

        var total = jQuery('.portfolio-ajax').length;
        var index = jQuery('.ajax-gallery-navigation').attr("id");

        currindex=parseInt(index);
        nextIndex=currindex+1;
        if (nextIndex!=total) {
            jQuery('.portfolio-ajax').eq(nextIndex).trigger('click');
        }

        return false;

    });

    // Clicked Prev 

    jQuery('.ajax-prev').click(function(){

        if ( jQuery(".ajax-portfolio-window").is(':animated') || jQuery(".ajax-portfolio-image-wrap").is(':animated') ) return;

        var index = jQuery('.ajax-gallery-navigation').attr("id");
        if (index=='-1') { index='0'; }
        currindex=parseInt(index);
        prevIndex=currindex-1;
        if (prevIndex!=-1) {
            jQuery('.portfolio-ajax').eq(prevIndex).trigger('click');
        }

        return false;
    }); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:05:14.903

这是执行此操作的代码...

```
setInterval(function()
{
    // do you stuff here. for example
    jQuery('.ajax-next').click();
}, 10000); // 10 sec interval 
```

# javascript - 带有 JPopUp 脚本的多个独特的弹出窗口？

> ID：11339912
> 
> 赞同：0
> 
> 时间：2012-07-05T07:45:26.787
> 
> 标签：javascript, jquery, popup, jpopup

我知道这可能之前已经回答过多次，但这是我第二次使用 JQuery，我不*完全*确定我需要做什么，因为我不熟悉这种编码格式。我看过其他类似的问题，但没有一个答案对我来说有意义，我真的需要这个来点击我的脑海，这样我才能继续工作。

我为此使用[Jpopup](http://www.jquerypopup.com/)，所以脚本信息都在那里，但我的问题是：

我在图像中有两个区域需要可点击，它们都显示不同的内容，但我一次只能调用一个页面来弹出，多个锚标签只会给我两次相同的内容。我需要向该脚本添加什么以允许页面显示两个不同的弹出窗口？

**这是我的 HTML 页面中的脚本**

```
<script language="javascript">

  $(document).ready(function() {

    //Change these values to style your modal popup
    var source = "demo.html";
    var width = 920;
    var align = "center";
    var top = 100;
    var padding = 10;
    var backgroundColor = "#FFFFFF";
    var source = 'popups/demo.html';
    var borderColor = "#000000";
    var borderWeight = 4;
    var borderRadius = 5;
    var fadeOutTime = 300;
    var disableColor = "#666666";
    var disableOpacity = 40;
    var loadingImage = "popups/loading.gif";

    //This method initialises the modal popup
    $(".modal").click(function() {

        modalPopup( align,
            top,
            width,
            padding,
            disableColor,
            disableOpacity,
            backgroundColor,
            borderColor,
            borderWeight,
            borderRadius,
            fadeOutTime,
            source,
            loadingImage );

    }); 

    //This method hides the popup when the escape key is pressed
    $(document).keyup(function(e) {
        if (e.keyCode == 27) {
            closePopup(fadeOutTime);
        }
    });

  });

</script> 
```

**的HTML**

```
 <div style="margin-top:200px;margin-left:395px;">
        <a class="modal" href="javascript:void(0);"><img src="images/clickmelarge.png" border="0">
        </a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:43:22.617

我研究了“插件”的源代码，还研究了运行时 HTML 页面的调用源代码。在我看来，这个弹出插件不支持同时多个弹出窗口。为什么？

好吧，我使用 Firebug 在运行时检查源代码，我只看到相同的 div，通过它添加到 DOM 树中。据我所知，当 DOM 完成加载时，作者将主 div 添加到 DOM 树并将它们全部设置为“隐藏”。如果您调用您的函数，这些 div 将设置为“可见”。另一个原因是——在我看来这是一种非常棘手的方式——ID 为“blockModalPopupDiv”的 div 覆盖了整个浏览器窗口。如果点击该元素，将执行隐藏所有 div 的功能。您将没有机会在 div 元素之外单击。

所以，你可以做什么？我认为你只有三个选择：

1.  要求作者有机会添加您的要求。
2.  下载源代码并自行修改。它是用标准的 Javascript 创建的。
3.  尝试使用另一个插件或改变你的概念。

# c - 两种分配方式有什么区别？

> ID：11339913
> 
> 赞同：2
> 
> 时间：2012-07-05T07:45:27.820
> 
> 标签：c, malloc

我想测试当我请求 24M 内存时操作系统分配了多少。

```
 for (i = 0; i < 1024*1024; i++)
            ptr = (char *)malloc(24); 
```

当我这样写时，我从`top`命令中得到 RES is 32M。

```
 ptr = (char *)malloc(24*1024*1024); 
```

但是当我做一点改变时，RES 是 244。它们之间有什么区别？为什么结果是 244？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T07:52:01.427

分配器有自己的关于簿记的数据结构，也需要内存。当您分配小块时（第一种情况），分配器必须保留大量关于每个块分配位置和多长时间的附加数据。此外，您可能会在块之间获得未使用内存的间隙，因为`malloc`需要返回一个充分对齐的块，通常在 8 字节边界上。

在第二种情况下，分配器只给你一个连续的块，并且只为那个块做簿记。

总是小心大量的小分配，因为簿记内存开销甚至可能超过数据本身的数量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T07:58:35.840

第二次分配几乎没有触及内存。分配器告诉你“好的，你可以拥有它”，但如果你没有真正接触内存，操作系统就不会真正把它给你，希望你永远不会使用它。有点像庞氏骗局。另一方面，另一种方法将某些内容（最多几个字节）写入许多页面，因此操作系统被迫实际为您提供内存。

试试这个来验证，你应该得到大约 24m 的使用量：

```
memset(ptr, 1, 1024 * 1024 * 24); 
```

简而言之，top 不会告诉您分配了多少，即您从`malloc`. 它告诉您操作系统分配给您的进程的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:01:17.790

除了已经说过的：可能是一些编译器注意到你如何在一个循环中分配多个 24 字节块，将它们的地址分配给同一个指针并只保留你分配的最后一个块，有效地渲染之前的所有其他 malloc 无用. 因此，它可能会将您的整个循环优化为如下所示：

```
ptr = (char *)malloc(24);
i = 1024*1024; 
```

# java - 在 Java 中从文件加载纹理时出错

> ID：11339914
> 
> 赞同：0
> 
> 时间：2012-07-05T07:45:34.180
> 
> 标签：java, macos, file, textures, jogl

我写了一些代码来从文件中加载纹理。它在 Windows 机器上运行良好，但是一旦我把它送回家在 OSX 上工作，它就一直崩溃。这是一段简单的代码：

```
String path = System.getProperty("user.dir") + File.separator + "textures"
            + File.separator;
File file = new File(path + "steel.jpg");

try {
    shipTexture = TextureIO.newTexture(file , true);
} catch {GLException e) {
} catch {IOException e) {
} 
```

我得到以下异常：线程“main”中的异常 java.lang.NoClassDefFoundError: com/sun/gluegen/runtime/DynamicLookupHelper

在纹理初始化阶段，

原因：java.lang.ClassNotFoundException: com.sun.gluegen.runtime.DynamicLookupHelper at java.net.URLClassLoader$1.run

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:29:47.200

A`classNotFoundException`通常与您的代码没有太大关系，这意味着您的类不在类路径中，这可能是因为您的编辑器没有找到它 -

[http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)

或者因为您在 windows 和 mac 中的目录结构不同 -

[http://www.ibm.com/developerworks/library/j-classpath-unix/](http://www.ibm.com/developerworks/library/j-classpath-unix/)

尝试删除包并将其再次添加到您的类路径

# python - Django - （OperationalError）致命：用户“用户名”的身份验证失败

> ID：11339917
> 
> 赞同：11
> 
> 时间：2012-07-05T07:45:40.620
> 
> 标签：python, django, postgresql, sqlalchemy

根据本手册，我编写了一个简单的 sqlalchemy-django 模型：http: [//lethain.com/replacing-django-s-orm-with-sqlalchemy/](http://lethain.com/replacing-django-s-orm-with-sqlalchemy/)，这对我来说效果很好。
我的 Django 使用以下设置连接到远程 postgresql 数据库：

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'wetlab_dev',                               # Or path to database file if using sqlite3.
    'USER': 'limlim',                                 # Not used with sqlite3.
    'PASSWORD': '',                                     # Not used with sqlite3.
    'HOST': 'cab-27',                                   # Set to empty string for localhost. Not used with sqlite3.
    'PORT': '',                                         # Set to empty string for default. Not used with sqlite3.
    }
} 
```

几天前它对我有用，但现在当我再次尝试加载“主页”时，它向我显示以下错误消息：

```
(OperationalError) FATAL:  Ident authentication failed for user "limlim" 
```

sqlalchemy 引擎配置是：

```
CONNECTION_STR = 'postgresql://limlim:@cab-27/wetlab_dev'

engine = sqlalchemy.create_engine(CONNECTION_STR) 
```

似乎我没有更改与数据库配置相关的任何内容，但我仍然收到此错误消息。
另外，当我尝试使用我的用户名连接到远程服务器上的数据库时，我成功了，所以我想我的用户名访问该数据库不是权限问题。

可以做些什么来克服这个错误？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-05T12:25:20.283

您`pg_hba.conf`已配置为对来自 localhost (127.0.0.1) 的连接使用“身份”身份验证。您需要将其更改`md5`为您的数据库和用户组合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-29T18:01:51.273

@Craig 是对的，必须在文件 pg_hba.conf 中更新数据库用户的身份验证方法，这是我所做的：

`sudo nano /var/lib/pgsql/data/pg_hba.conf`

转到文件底部，然后在 IPv4 和 IPv6 行上将方法从 ident 更改为 md5：

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     peer
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5  # <- here
# IPv6 local connections:
host    all             all             ::1/128                 md5  # <- and here
# Allow replication connections from localhost, by a user with the
# replication privilege.
#local   replication     postgres                                peer
#host    replication     postgres        127.0.0.1/32            ident
#host    replication     postgres        ::1/128                 ident 
```

快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-08T08:48:10.403

有同样的错误，只是为了解决我的情况，而不是`md5`我使用`trust`. 这是因为 1) Django 需要 SELECT、INSERT、DELETE 和 UPDATE 权限，以及 2) 使用 postgres 用户不需要密码。

# eclipse - eclipse 在哪里存储有关开放视角等的信息？

> ID：11339922
> 
> 赞同：2
> 
> 时间：2012-07-05T07:45:56.700
> 
> 标签：eclipse, ubuntu, installation, eclipse-juno

在最近升级到 eclipse Juno 后，我遇到了一个问题，即 eclipse 在重新启动和工作区切换时不再能够记住某些设置。诸如打开哪些视角之类的事情，诸如“[x] Open Dashboard”（spring ide）之类的某些设置似乎会在 eclipse 重新启动时恢复为出厂设置。

我使用 Ubuntu，出于历史原因，我在 /opt/eclipse 中维护我的 eclipse 安装。安装由 root 拥有，除了一些升级问题之外，这实际上并不是问题 - 直到 Juno 版本。

我已经在 Eclipse 安装目录上尝试了 chown -R 自己：我自己，并且我已经验证了所有文件确实可以由我自己的用户编辑。不过，这些观点似乎重新设定了。

eclipse 是否还有其他地方存储此信息，这些信息可能仍归根用户所有？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-24T11:01:45.937

关于透视图的信息存储在
***<workspace>\.metadata\.plugins\org.eclipse.e4.workbench\workbench.xmi***

如果您使用复杂的自定义透视图，请备份此文件。

PS知道删除此文件可能会解决Eclipse无法启动时的问题也很有用（另请参见[此处](https://stackoverflow.com/questions/950476/how-to-recover-corrupted-eclipse-workspace/22918666)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:11:03.810

该信息保存在每个工作区根目录的 .metadata 目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:41:51.773

两种解决方案：

1.  **MENU -> 文件 -> 切换工作区 -> 其他 -> 复制设置**

    *   工作台布局
    *   工作集
2.  **复制/备份并将以下文件夹替换到新创建的工作区。**

    *   [工作区]/.metadata/.plugins/org.eclipse.ui.workbench/
    *   [工作区]/.metadata/.plugins/org.eclipse.core.runtime/.settings/

我个人更喜欢（2）。

* * *

上述答案归功于@Ischin，在以下[参考资料中](https://stackoverflow.com/questions/5991052/saving-eclipse-perspective-layout-and-other-things)......

# css - ie8：是否有可能在伪元素中进行转换？

> ID：11339929
> 
> 赞同：4
> 
> 时间：2012-07-05T07:46:27.357
> 
> 标签：css, internet-explorer-8, css-transforms

我需要在 ie8 上进行 css 转换工作，有可能做到吗？

我试过 progid:DXImageTransform 但它不适用于伪元素

```
.stack.twisted:before {
    -ms-transform:rotate(8deg); /* IE 9 */
    -webkit-transform: rotate(8deg);
    -moz-transform: rotate(8deg);
    transform: rotate(8deg);
    -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=-0.70710678, M21=0.70710678, M22=0.70710678,sizingMethod='auto expand')";filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=-0.70710678, M21=0.70710678, M22=0.70710678,sizingMethod='auto expand');

} 
```

为了清楚起见，我需要像在 ie8 中工作的 css3 中的变换一样的旋转效果。所以我找到了 progid:DXImageTransform.Microsoft.Matrix 但它在伪元素中不起作用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:10:12.410

有很多非常酷的库的解决方案，但我需要用一小段独立的代码来处理同样的问题。这也解决了矩阵变换的 ie6、ie7 和 ie8 问题，使用 Top/Left 作为原点而不是像所有其他矩阵一样的中心：

```
//
// Rotate a <DIV> element
//
// - DIV position must be absolute or relative
// - Will use the center point of DIV as origin for tilt
//
// I think it will work on most browsers (including ie6, ie7 & ie8)
//
function divRotate( divObj, divTop, divLeft, divHeight, divWidth, newAngleDeg )
    {
    var radAngle = Math.PI * newAngleDeg / 180;
    var spinAngle = radAngle;

    if ( window.navigator.userAgent.indexOf ( 'MSIE ' ) <= 0 || typeof document.documentElement.style.opacity!='undefined' )
        radAngle = -radAngle;

    var sinAngle = parseFloat(parseFloat(Math.sin(radAngle)).toFixed(8));
    var cosAngle = parseFloat(parseFloat(Math.cos(radAngle)).toFixed(8));

    var m11 = cosAngle;
    var m12 = -sinAngle;
    var m21 = sinAngle;
    var m22 = cosAngle;

    if ( window.navigator.userAgent.indexOf ( 'MSIE ' ) <= 0 || typeof document.documentElement.style.opacity!='undefined' )
        {
        divObj.style.WebkitTransform = 'matrix('+ m11 +','+ m12 +','+ m21 +','+ m22 +',' + 0 + ',' + 0 + ')';
        divObj.style.MozTransform = 'matrix('+ m11 +','+ m12 +','+ m21 +','+ m22 +',' + 0 + 'px,' + 0 + 'px)';
        divObj.style.msTransform = 'matrix('+ m11 +','+ m12 +','+ m21 +','+ m22 +',' + 0 + ',' + 0 + ')';
        divObj.style.OTransform = 'matrix('+ m11 +','+ m12 +','+ m21 +','+ m22 +',' + 0 + ',' + 0 + ')';
        divObj.style.transform = 'matrix('+ m11 +','+ m12 +','+ m21 +','+ m22 +',' + 0 + ',' + 0 + ')';

        divObj.style.top = divTop + 'px';
        divObj.style.left = divLeft + 'px';

        return;
        }

    var sinSpinAngle = -parseFloat(parseFloat(Math.sin(-spinAngle)).toFixed(8));
    var cosSpinAngle = parseFloat(parseFloat(Math.cos(-spinAngle)).toFixed(8));
    var sinAnglePerp = parseFloat(parseFloat(Math.sin(radAngle-Math.PI)).toFixed(8));
    var cosAnglePerp = parseFloat(parseFloat(Math.cos(radAngle-Math.PI)).toFixed(8));
    var halfHeight = divHeight/2;
    var halfWidth = divWidth/2;
    var radius = Math.sqrt(halfHeight*halfHeight + halfWidth*halfWidth);

    var ulx = divLeft + halfWidth - radius*cosSpinAngle + sinAnglePerp*halfHeight;
    var uly = divTop + halfHeight - radius*sinSpinAngle + cosAnglePerp*halfHeight;

    var urx = radius*cosSpinAngle + divLeft + halfWidth + sinAnglePerp*halfHeight;
    var ury = radius*sinSpinAngle + divTop + halfHeight + cosAnglePerp*halfHeight;

    var lrx = radius*cosSpinAngle + divLeft + halfWidth - sinAnglePerp*halfHeight;
    var lry = radius*sinSpinAngle + divTop + halfHeight - cosAnglePerp*halfHeight;

    var llx = divLeft + halfWidth - radius*cosSpinAngle - sinAnglePerp*halfHeight;
    var lly = divTop + halfHeight - radius*sinSpinAngle - cosAnglePerp*halfHeight;

    divObj.style.filter = "filter: progid:DXImageTransform.Microsoft.Matrix( M11="+m11+", M12="+m12+", M21="+m21+", M22="+m22+", sizingMethod='auto expand' );";

    var spinTop = Math.min( uly, ury, lry, lly );
    var spinRight = Math.max( ulx, urx, lrx, llx );
    var spinBottom = Math.max( uly, ury, lry, lly );
    var spinLeft = Math.min( ulx, urx, lrx, llx );

    divObj.style.top = spinTop + 'px';
    divObj.style.right = spinRight + 'px';
    divObj.style.bottom = spinBottom + 'px';
    divObj.style.left = spinLeft + 'px';
    } 
```

# c - 如何使用通过连接两个动态字符串生成的字符串动态引用数组？

> ID：11339936
> 
> 赞同：2
> 
> 时间：2012-07-05T07:47:15.600
> 
> 标签：c, arrays, string, dynamic, char

我正在尝试从数组中随机选择一个字符，将其连接到字符串`"array_"`，然后使用新字符串来引用数组。

例如，`'8'`从中选择字符`temp_holder[]`，将其连接到`"array_"`，然后使用它来引用`array_8[][]`。

这是代码：

```
#include <stdio.h>

main() {
   int i, j;

   char array_8[5][4];
   //Array
   for (i = 0; i < 5; i++) {
      for (j = 0; j < 4; j++) {
          array_8[i][j] = 'x';
          if ((i == 1 && j == 1) || (i == 1 && j == 2) || (i == 3 && j == 1) || (i == 3 && j == 2) ){
             array_8[i][j] = ' ';
          }
      }
  }

  char myArray[5][4];
  //Array
   for (i = 0; i < 5; i++) {
      for (j = 0; j < 4; j++) {
          myArray[i][j] = 'x';
          if ((i == 1 && j == 1) || (i == 1 && j == 2) || (i == 3 && j == 1) || (i == 3 && j == 2) ){
             myArray[i][j] = ' ';
          }
      }
  }

  char temp_holder[6] = {'8', '8', '8', '8', '8'};
  srand(time(NULL));
  int r = rand() % 6; 

  char arrName[1][10] = {"array_"}; 
  char namesArr[10];
  strcpy(namesArr, "array_");
  int len = 7;
  char arr_names[5][4];
  printf("\n%c\n", temp_holder[r]);
  strcat(namesArr, &temp_holder[r]);
  printf("\n%s\n", namesArr);
  strncpy(arr_names, namesArr, len);
  strcat(arr_names, "\0"); 
  printf("\n%s\n", arr_names);

  int accEntry = 0; //Correct entry counter
  for (i = 0; i < 5; ++i){
      for (j = 0; j < 4; j++ )
       if (myArray[i][j] == arr_names[i][j]){
          printf("\n MATCH FOUND  %c\n", arr_names[i][j]);
          accEntry++;
       }
   } 

   printf("\n\n\n%d\n\n\n", accEntry);

   getchar();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:07:56.643

除非您为数组查找表创建自己的名称，否则您无法做您想做的事情。假设您有一个 POSIX 系统，您可以按名称引用全局符号，但您必须使用`dlopen`/`dlsym`来这样做。如果变量或函数名不是来自共享库，那么您必须在`-rdynamic`使用 GCC 编译时链接程序，或者您的系统的任何等效项。

```
#include <assert.h>
#include <dlfcn.h>

char array_8[][10] = { "hello", "world" };

int main ()
{
    void *h = dlopen(0, RTLD_NOW);
    void *p = dlsym(h, "array_8");
    assert(p == array_8);
    dlclose(h);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:27:37.043

你显然不能那样做。您可以使用指针数组，该数组可用于保存对数组的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:16:45.633

您可以使用哈希表来存储指向数组的指针，这样您就可以按名称访问它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:49:57.047

> 例如，从 中选择字符“8”，将`temp_holder[]`其连接到“array_”并使用它来引用`array_8[][]`

你不能在 C 中这样做。变量的名称在运行时是没有意义的，即你不能“通过名称获取变量”。

# java - Java I/O mp3 文件读取

> ID：11339941
> 
> 赞同：2
> 
> 时间：2012-07-05T07:47:21.080
> 
> 标签：java, file, io

我想阅读 mp3 文件的详细信息，例如持续时间、比特率、艺术家等。我可以通过阅读以下某些行来找到一些信息：

```
File f=fc.getSelectedFile();
FileInputStream inp=null; 
  byte[] buffer=new byte[128];    
     inp= new FileInputStream(f)
     inp.skip(f.length()-128);
     inp.read(buffer);      

    }
    String str=new String(buffer);       
    tf.setText(str); 
```

我希望清楚地获取所有细节。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-26T09:09:28.410

> 使用 MP3SPI 获取持续时间：

```
private static void getDurationWithMp3Spi(File file) throws UnsupportedAudioFileException, IOException {

AudioFileFormat fileFormat = AudioSystem.getAudioFileFormat(file);
if (fileFormat instanceof TAudioFileFormat) {
    Map<?, ?> properties = ((TAudioFileFormat) fileFormat).properties();
    String key = "duration";
    Long microseconds = (Long) properties.get(key);
    int mili = (int) (microseconds / 1000);
    int sec = (mili / 1000) % 60;
    int min = (mili / 1000) / 60;
    System.out.println("time = " + min + ":" + sec);
} else {
    throw new UnsupportedAudioFileException();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T09:16:18.270

您可以使用 apache tika Java API 来解析 MP3 的元数据，例如标题、专辑、流派、持续时间、作曲家、艺术家等。所需的 jar 是 tika-parsers-1.4、tika-core-1.4。

**示例程序：**

```
package com.parse.mp3;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;

import org.apache.tika.exception.TikaException;
import org.apache.tika.metadata.Metadata;
import org.apache.tika.parser.ParseContext;
import org.apache.tika.parser.Parser;
import org.apache.tika.parser.mp3.Mp3Parser;
import org.xml.sax.ContentHandler;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class AudioParser {

/**
 * @param args
 */
public static void main(String[] args) {
    String fileLocation = "G:/asas/album/song.mp3";

    try {

    InputStream input = new FileInputStream(new File(fileLocation));
    ContentHandler handler = new DefaultHandler();
    Metadata metadata = new Metadata();
    Parser parser = new Mp3Parser();
    ParseContext parseCtx = new ParseContext();
    parser.parse(input, handler, metadata, parseCtx);
    input.close();

    // List all metadata
    String[] metadataNames = metadata.names();

    for(String name : metadataNames){
    System.out.println(name + ": " + metadata.get(name));
    }

    // Retrieve the necessary info from metadata
    // Names - title, xmpDM:artist etc. - mentioned below may differ based
    System.out.println("----------------------------------------------");
    System.out.println("Title: " + metadata.get("title"));
    System.out.println("Artists: " + metadata.get("xmpDM:artist"));
    System.out.println("Composer : "+metadata.get("xmpDM:composer"));
    System.out.println("Genre : "+metadata.get("xmpDM:genre"));
    System.out.println("Album : "+metadata.get("xmpDM:album"));

    } catch (FileNotFoundException e) {
    e.printStackTrace();
    } catch (IOException e) {
    e.printStackTrace();
    } catch (SAXException e) {
    e.printStackTrace();
    } catch (TikaException e) {
    e.printStackTrace();
    }
    }
} 
```

# f# - 在哪里向柯里化函数添加类型注释？

> ID：11339943
> 
> 赞同：3
> 
> 时间：2012-07-05T07:47:22.803
> 
> 标签：f#

在 F# interactive 中，我可以找到 sprintf 的类型。

```
>sprintf;;
val it : (Printf.StringFormat<'a> -> 'a) = <fun:clo@163> 
```

如果 curried 函数不是通用的，我可以使用第一个参数找到 sprintf curried 的类型。

```
> sprintf "%g";;
val it : (float -> string) = <fun:it@134-16> 
```

但如果它是通用的，那么我会得到值限制错误。

```
> sprintf "%A";;
error FS0030: Value restriction. The value 'it' has been inferred to have generic type
val it : ('_a -> string)    
Either make the arguments to 'it' explicit or, if you do not intend for it to be generic, add a type annotation. 
```

我可以添加一个类型注释来摆脱像这样的值限制，专门针对一个类型的函数，例如。约会时间。

```
>let f : (DateTime -> string) = sprintf "%A";;
val f : (DateTime -> string) 
```

如何在没有绑定的情况下添加类型注释？我尝试了以下...

```
>sprintf "%A" : (DateTime -> string);;
error FS0010: Unexpected symbol ':' in interaction. Expected incomplete structured construct at or before this point, ';', ';;' or other token. 
```

这是一个类似的例子，但更难......

```
>sprintf "%a";;
error FS0030: Value restriction. The value 'it' has been inferred to have generic type
val it : ((unit -> '_a -> string) -> '_a -> string)    
Either make the arguments to 'it' explicit or, if you do not intend for it to be generic, add a type annotation. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:11:20.670

您只需将表达式括在括号中：

```
open System;;
(sprintf "%A" : DateTime -> string);;

val it : (DateTime -> string) = <fun:it@2> 
```

这样您就可以在没有绑定的情况下指定类型注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:05:45.130

实际发生的是 fsi 将您键入的最后一个内容绑定到一个名为`it`. 它有效地做到了

```
let it = sprintf "%a";; 
```

`=`类型注释需要放在您无法访问的左侧。问题是您需要一个具体类型来赋予任何变量（在这种情况下`it`）。一种解决方法可能是

```
(fun t:DateTime -> sprintf "%a" t) 
```

# asp.net - 同步 webapp 客户端（IIS 并发请求）

> ID：11339946
> 
> 赞同：1
> 
> 时间：2012-07-05T07:47:32.163
> 
> 标签：asp.net, multithreading, concurrency, request, iis-7.5

**任务**：我正在使用静态类，所以每个人都共享已经加载的数据。如果有人进行更改，该请求会将一个项目放入具有增量 ID 的列表中，我的想法是每个客户端在客户端都有它的版本，并请求是否有任何更改。

**我的解决方案**：为此，我使用超时为 5000 毫秒的 $.post 并发送客户端版本，在服务器端我有一个 500 循环的循环，它检查是否有更新的东西并中断循环，返回更改并有 10 毫秒Thread.Sleep 在每个周期中，这样它就不会占用 CPU。如果在客户端超时，出现错误，我再次调用帖子，如果成功我处理返回数据，而不是再次调用帖子。这样，我总是应该几乎立即获得更改，而无需大量请求，如果出现故障，我只需要等待 5 秒即可恢复。

**我的问题**是，当这个循环运行时，其他请求没有得到处理。使用 asp.net 开发服务器，没关系，因为它是单线程的。但win7hp iis7.5也是如此。

**我尝试**了什么：在注册表中设置它（HKLM\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0\MaxConcurrentRequestsPerCPU），增加应用程序池的工作线程，使用 maxConcurrentRequestsPerCPU="12" maxConcurrentThreadsPerCPU= 更新 aspnet.config 文件“0” requestQueueLimit="5000" 设置，我还读到我的win7hp应该能够使用3个线程。我还认为这是一种优化，我在一个请求中使用相同的变量，因此它将其他变量排队，所以我评论了这些行，只留下了睡眠的 for 循环，但结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:00:42.907

不要在 ASP.Net 中处理请求的线程上使用 Thread.Sleep。这基本上会消耗线程并阻止启动更多请求。ASP.Net 为处理您尝试更改的请求而创建的线程数存在限制，但是线程数过多会使进程的响应速度降低，并且很容易导致 32 位进程的 OutOfMemeoryException - 所以这不是一个好方法。

还有其他几个线程在讨论用 ASP.Net 实现长轮询请求，就像这样 - [ASP.NET MVC 的 AsyncController 可以用于服务大量并发挂起请求（长轮询）吗？](https://stackoverflow.com/questions/4982882/can-asp-net-mvcs-asynccontroller-be-used-to-service-large-number-of-concurrent)显然彗星这样的问题 - [ASP.NET 的彗星实现？](https://stackoverflow.com/questions/65673/comet-implementation-for-asp-net).

# android - 地图中的空灰色瓷砖

> ID：11339947
> 
> 赞同：0
> 
> 时间：2012-07-05T07:47:32.540
> 
> 标签：android, android-mapview

我用别人给我的钥匙做了一个 mapActivity。但是当我运行它时，它只显示灰色瓷砖，但当我问他们时，他们说它在那里显示很好。可能是什么问题，为什么它没有显示在我身边。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:52:48.470

因为密钥是由其他密钥库生成的，你需要去这里

[注册 Android Maps API - Android Maps API - Google Code](https://developers.google.com/android/maps-api-signup)

并生成您的地图 API 密钥。

第二个选项，您必须使用用于创建 Map API 密钥的相同密钥库对应用程序进行签名。

# python - 字符串编码和解码？

> ID：11339955
> 
> 赞同：55
> 
> 时间：2012-07-05T07:48:06.307
> 
> 标签：python, python-2.7

这是我对错误消息的尝试。我究竟做错了什么？

```
string.decode("ascii", "ignore") 
```

> UnicodeEncodeError：“ascii”编解码器无法在位置 37 编码字符 u'\xa0'：序数不在范围内（128）

```
string.encode('utf-8', "ignore") 
```

> UnicodeDecodeError：“ascii”编解码器无法解码位置 37 中的字节 0xc2：序数不在范围内（128）

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-07-05T07:50:15.767

你不能解码 a `unicode`，也不能编码 a `str`。[试着反过来](http://farmdev.com/talks/unicode/)做。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-07-05T11:02:38.573

猜测原始问题中省略的所有内容，但是，假设 Python 2.x 关键是仔细阅读错误消息：特别是在您调用“编码”但消息显示“解码”的地方，反之亦然，而且消息中包含的值的类型。

在第一个示例`string`中`unicode`，您尝试对其进行解码，这是一个将字节字符串转换*为*unicode 的操作。Python 有用地尝试将 unicode 值转换为`str`使用默认的“ascii”编码，但由于您的字符串包含非 ascii 字符，因此您收到错误消息，表明 Python 无法编码**unicode****值**。这是一个显示输入字符串类型的示例：

```
>>> u"\xa0".decode("ascii", "ignore")

Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    u"\xa0".decode("ascii", "ignore")
UnicodeEncodeError: 'ascii' codec can't encode character u'\xa0' in position 0: ordinal not in range(128) 
```

在第二种情况下，您尝试对字节字符串进行反向编码。编码是将 unicode 转换为字节字符串的操作，因此 Python 会先尝试将字节字符串转换为 unicode，并且由于您没有给它一个 ascii 字符串，因此默认的 ascii 解码器会失败：

```
>>> "\xc2".encode("ascii", "ignore")

Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    "\xc2".encode("ascii", "ignore")
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 0: ordinal not in range(128) 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-08-08T23:05:56.237

除了获取`decode`和`encode`倒退之外，我认为这里的部分答案实际上*是不使用`ascii`编码*。这可能不是你想要的。

首先，`str`将您想象成一个纯文本文件。它只是一堆实际上没有附加编码的字节。它的解释方式取决于读取它的任何代码。如果您不知道这一段在说什么，请阅读 Joel 的[《每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求》，](http://www.joelonsoftware.com/articles/Unicode.html)然后再继续阅读。

自然，我们都知道造成的混乱。答案是，至少在内存中，对所有字符串都有一个标准编码。这就是`unicode`进来的地方。我很难准确地跟踪 Python 内部使用的编码，但这并不重要。关键是您知道这是一个以某种方式解释的字节序列。所以你只需要考虑字符本身，而不是字节。

问题是，在实践中，你会同时遇到这两种情况。一些库给你一个`str`，而一些期望一个`str`. 当然，只要您正在流式传输一系列字节（例如到磁盘或从磁盘或通过 Web 请求），这都是有意义的。所以你需要能够来回翻译。

Enter `codecs`：是这两种数据类型之间的翻译库。用于从文本字符串 ( )`encode`生成字节序列( )，并用于从字节序列( )中获取文本字符串 ( )。`str``unicode``decode``unicode``str`

例如：

```
>>> s = "I look like a string, but I'm actually a sequence of bytes. \xe2\x9d\xa4"
>>> codecs.decode(s, 'utf-8')
u"I look like a string, but I'm actually a sequence of bytes. \u2764" 
```

这里发生了什么？我给了 Python 一个字节序列，然后我告诉它，“给我这个的`unicode`版本，因为这个字节序列在`'utf-8'`.”中。它按照我的要求完成了，这些字节（[一个心形字符](http://www.fileformat.info/info/unicode/char/2764/index.htm)）现在被视为一个整体，由它们的 Unicode 代码点表示。

让我们反过来：

```
>>> u = u"I'm a string! Really! \u2764"
>>> codecs.encode(u, 'utf-8')
"I'm a string! Really! \xe2\x9d\xa4" 
```

`'utf-8'`我给 Python 一个 Unicode 字符串，并要求它使用编码将字符串转换为字节序列。确实如此，现在心脏只是一堆无法打印为 ASCII 的字节；所以它向我显示了十六进制。

当然，我们也可以使用其他编码：

```
>>> s = "I have a section \xa7"
>>> codecs.decode(s, 'latin1')
u'I have a section \xa7'
>>> codecs.decode(s, 'latin1')[-1] == u'\u00A7'
True

>>> u = u"I have a section \u00a7"
>>> u
u'I have a section \xa7'
>>> codecs.encode(u, 'latin1')
'I have a section \xa7' 
```

（`'\xa7'`是 Unicode 和 Latin-1 中的[节字符](http://en.wikipedia.org/wiki/Section_sign)。）

所以对于你的问题，你首先需要弄清楚你的编码`str`是什么。

*   它来自一个文件吗？来自网络请求？从你的数据库？然后源确定编码。找出源的编码并使用它来将其翻译成`unicode`.

    ```
    s = [get from external source]
    u = codecs.decode(s, 'utf-8') # Replace utf-8 with the actual input encoding 
    ```

*   或者，也许你正试图在某个地方写出来。目的地期望什么编码？用它把它翻译成`str`. UTF-8 是纯文本文档的不错选择；大多数东西都能读懂。

    ```
    u = u'My string'
    s = codecs.encode(u, 'utf-8') # Replace utf-8 with the actual output encoding
    [Write s out somewhere] 
    ```

*   您是否只是为了互操作性而在内存中来回翻译？然后只需选择一个编码并坚持下去；`'utf-8'`可能是最好的选择：

    ```
    u = u'My string'
    s = codecs.encode(u, 'utf-8')
    newu = codecs.decode(s, 'utf-8') 
    ```

在现代编程中，您可能永远不想为此使用`'ascii'`编码。它是所有可能字符的一个极小的子集，我所知道的任何系统都没有默认使用它或其他任何东西。

Python 3 does its best to make this *immensely* clearer simply by changing the names. In Python 3, `str` was replaced with `bytes`, and `unicode` was replaced with `str`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T07:58:02.163

那是因为你的输入字符串不能按照编码规则进行转换（默认是严格的）。

我不知道，但我总是直接使用 unicode() 构造函数进行编码，至少[官方文档](http://docs.python.org/howto/unicode.html#the-unicode-type)中是这样的：

```
unicode(your_str, errors="ignore") 
```

# facebook - 黑莓 facebook 下拉菜单

> ID：11339956
> 
> 赞同：-1
> 
> 时间：2012-07-05T07:48:20.493
> 
> 标签：facebook, blackberry

我在网站上到处找，但我找不到来源。菜单是半透明的`news feed`，`profile`等等。

我需要在当前屏幕上创建类似透明屏幕的示例。有人可以把我链接到那里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:43:28.193

我认为以下链接将对您有很大帮助...

[黑莓中的透明弹出屏幕](http://supportforums.blackberry.com/t5/Java-Development/Transparent-Popup-screen-in-Blackberry/td-p/1737717)

[透明屏……又来了！？](http://supportforums.blackberry.com/t5/Java-Development/Transparent-screen-again/td-p/389032)

[创建透明屏幕](http://supportforums.blackberry.com/t5/Java-Development/Creating-a-transparent-screen/td-p/396420)

[如何设置弹出屏幕透明...？](http://supportforums.blackberry.com/t5/Java-Development/How-to-set-popup-screen-transparent/td-p/1381583)

[想要调用主屏幕 api](http://supportforums.blackberry.com/t5/Java-Development/want-to-get-the-home-screen-api-called/td-p/559376/page/2)

# java - 在 JTable 中添加 JcomboBox

> ID：11339957
> 
> 赞同：0
> 
> 时间：2012-07-05T07:48:22.913
> 
> 标签：java, swing, jtable, jcombobox

我创建了一个表单，在其中添加了一个`jTable` 包含 3 列的表单。第 2 和第 3 列有`jcombobox`编辑器。

我希望当我们选择第二列组合框的第一项时，也应该选择第三列组合框的第一个组合框，反之亦然。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:23:39.100

您可以尝试覆盖`public void setValueAt(Object aValue, int rowIndex, int columnIndex)`方法并检查何时将值设置为已编辑的列，您还应该`setValueAt()`为第一列调用。

# php - 哈希/加盐时密码不匹配

> ID：11339958
> 
> 赞同：1
> 
> 时间：2012-07-05T07:48:26.043
> 
> 标签：php, mysql, hash, passwords, salt

好的，所以下面的所有代码都不是我自己的。我一直在关注互联网上的教程，但是当我尝试运行它时，似乎没有密码匹配。我相信加盐密码可能会出错，因为数据库中的内容与 login.php 脚本中描述的 64 个字符相去甚远。我不知道。代码如下：

**注册.php**

```
// Create a 256 bit (64 characters) long random salt
// Let's add 'something random' and the username
// to the salt as well for added security
$salt = hash('sha256', uniqid(mt_rand(), true) . 'something random' . strtolower($username));

// Prefix the password with the salt
$hash = $salt . $password;

// Hash the salted password a bunch of times
for ( $i = 0; $i < 100000; $i ++ )
{
    $hash = hash('sha256', $hash);
}

// Prefix the hash with the salt so we can find it back later
$hash = $salt . $hash;

// carry on with registration code... 
```

登录.php

```
$email = $_POST['email'];
$password = $_POST['password'];

$con = mysql_connect("localhost", "redacted", "redacted", "redacted");

$sql = '
    SELECT
        `password`
    FROM `users`
        WHERE `email` = "' . mysql_real_escape_string($email) . '"
    LIMIT 1
    ;';

$r = mysql_fetch_assoc(mysql_query($sql));

// The first 64 characters of the hash is the salt
$salt = substr($r['password'], 0, 64);

$hash = $salt . $password;

// Hash the password as we did before
for ( $i = 0; $i < 100000; $i ++ )
{
    $hash = hash('sha256', $hash);
}

$hash = $salt . $hash;

if ( $hash == $r['password'] )
{
    session_start();
    header('Location: /quiz/index.php');
}

if( $hash != $r['password'] ){
    session_start();
    header('Location: /?error=4');
}

// end login script 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:40:12.960

一个常见的错误是**数据库字段的长度不足以存储所有字符**。然后密码永远不会等于用户输入的密码。

对于这种功能，请始终编写**单元测试**来检查功能（仍然）是否按预期工作。有一天，有人会修改数据库，更改哈希算法，修改盐......并且没有人能够登录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T07:51:32.100

看起来您要添加 2 次盐：

```
$hash = $salt . $password;

// Hash the password as we did before
for ( $i = 0; $i < 100000; $i ++ )
{
    $hash = hash('sha256', $hash);
}

//skip the below one
$hash = $salt . $hash; 
```

**更新：**

实际上，在这种情况下需要添加 2 次盐。

虽然盐应该保存在单独的数据库列中，因此代码将更加简化 - 通过避免用于存储/检索盐的所有字符串连接。

除此之外，通过将每条信息存储在单独的插槽中，您的数据库结构将更接近**第三范式。**

# java - Servlet 过滤器中的错误

> ID：11339962
> 
> 赞同：0
> 
> 时间：2012-07-05T07:48:30.503
> 
> 标签：java, servlets, servlet-filters

执行时出现以下错误 `chain.doFilter(request, response);` 。此错误仅在某些时候发生。

堆栈跟踪如下::

```
enter code here

<i>javax.servlet.ServletException: For input string: "NULL"
    at org.apache.struts.action.RequestProcessor.processException(RequestProcessor.java:516)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:423)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:397)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
    at com.evermind.server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:835)
    at com.evermind.server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:341)
    at com.evermind.server.http.ServletRequestDispatcher.forward(ServletRequestDispatcher.java:261)
    at com.evermind.server.http.GetParametersRequestDispatcher.forward(GetParametersRequestDispatcher.java:257)
    at org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1056)
    at org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:388)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:231)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:397)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
    at com.evermind.server.http.ResourceFilterChain.doFilter(ResourceFilterChain.java:65)
    at my.SampleFilter.doFilter(SampleFilter.java:120)
    at com.evermind.server.http.EvermindFilterChain.doFilter(EvermindFilterChain.java:16)
    at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)
    at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)
    at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)
    at com.evermind.server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:670)
    at com.evermind.server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:341)
    at com.evermind.server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java:816)
    at com.evermind.server.http.AJPRequestHandler.run(AJPRequestHandler.java:231)
    at com.evermind.server.http.AJPRequestHandler.run(AJPRequestHandler.java:136)
    at com.evermind.util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:186)
    at java.lang.Thread.run(Thread.java:534)</i> 
```

我的过滤器代码如下::

```
<i>public class SampleFilter
implements Filter
{

private transient FilterConfig filterConfig;
Context initialContext;

public SampleFilter()
{
    filterConfig = null;
    initialContext = null;
}

public void destroy()
{
}

public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
    throws ServletException, IOException
{

    Connection conn=getJNDIConnection();

    request.setAttribute("CONNECTION", conn);
    try
    {
        System.out.println("Filter start GOOG Website");
        chain.doFilter(request, response);
    }
    catch(Exception e)
    {
        //System.out.println("@@@@@@@@@@@@@@@@@@@@@ Exception occured in doFilter @@@@@@@@@@@@@@@");
        closeConnection(initialContext, conn);
        System.out.println("@@@@@@@@@@@@@@@@@@@@@ Connection Closed @@@@@@@@@@@@@@@");

        String fullStackTrace = org.apache.commons.lang.exception.ExceptionUtils.getFullStackTrace(e);

        e.printStackTrace();
    }
    closeConnection(initialContext, conn);
    System.out.println("Filter end ");
}

Connection getJNDIConnection()
{
    Connection conn = null;
    try
    {
        initialContext = new InitialContext();
        if(initialContext == null)
        {
            System.out.println("JNDI problem. Cannot get InitialContext.");
        }
        DataSource datasource = (DataSource)initialContext.lookup("jdbc/MY_DS");
        if(datasource != null)
        {
            conn = datasource.getConnection();
        } else
        {
            System.out.println("Failed to lookup datasource.");
        }
    }
    catch(NamingException ex)
    {
        System.out.println("Cannot get connection: " + ex);
    }
    catch(SQLException ex)
    {
        System.out.println("Cannot get connection: " + ex);
    }
    return conn;
}

void closeConnection(Context ctx, Connection conn) {
    try {
        if (ctx != null) {
            ctx.close();
            ctx = null;
        }

        if (conn != null && !conn.isClosed()) {
            conn.close();
            conn = null;
        }
    } catch (NamingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SQLException sqe) {
        sqe.printStackTrace();
    } finally {
        conn = null;
    }
}

public void init(FilterConfig filterConfig)
    throws ServletException
{
    this.filterConfig = filterConfig;
}
}
</i> 
```

我的 web.xml 内容如下::

```
<i><?xml version="1.0" encoding="UTF-8"?>
<web-app>
  <servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
      <param-name>config</param-name>
      <param-value>/WEB-INF/struts-config.xml</param-value>
    </init-param>
    <init-param>
      <param-name>debug</param-name>
      <param-value>3</param-value>
    </init-param>
    <init-param>
      <param-name>detail</param-name>
      <param-value>3</param-value>
    </init-param>
    <load-on-startup>0</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
  </servlet-mapping>

  <filter>
     <filter-name>UrlRewriteFilter</filter-name>
     <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

    <filter>
        <filter-name>SampleFilter</filter-name>
        <filter-class> my.SampleFilter
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>SampleFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

     <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

     <session-config>
      <session-timeout>720</session-timeout> 
    </session-config>

</web-app>
</i> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:38:33.973

这里有一些误会。

```
javax.servlet.ServletException: For input string: "NULL"
    at org.apache.struts.action.RequestProcessor.processException 
```

此异常不是由您的过滤器引起的，而是由其他地方引起并抛出的，并且`try-catch`在您以不正确的方式处理异常的过滤器中的块之前永远不会被捕获。**您应该只**捕获那些您可以合理处理的异常。由于显然没有一个您可以合理处理的异常，您应该让这些异常通过完全删除整个`catch`块并将其替换为`finally`.

```
Connection conn = getJNDIConnection();
request.setAttribute("CONNECTION", conn);

try {
    chain.doFilter(request, response);
} finally {
    closeConnection(initialContext, conn);
} 
```

回到特定的异常，正如所说的，这是在其他地方引起的。由于堆栈跟踪不完整，我会做一个疯狂的猜测：你在某个地方输入了一个带有字符串值的数字字段，`"NULL"`它正在抛出一个`NumberFormatException`。*该*问题的解决方案应该很明显：要么不输入字符串值`"NULL"`，要么将其设为字符串字段而不是数字字段。

# android - 如何检测屏幕上的非人类触摸

> ID：11339965
> 
> 赞同：3
> 
> 时间：2012-07-05T07:48:39.613
> 
> 标签：android, touch

我正在为android创建一个重量测量应用程序，因为我想检测一个`non human touch`on，`android screen`以便通过测量它的压力我将能够检测到放置在屏幕上的物体的重量，但问题是`capicitive screen`android只检测到`human touch`。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:04:32.360

这完全取决于所使用的材料是否导电（不仅人的触摸是导电的）。这就是电容屏的工作原理。不可能检测到与岩石的接触，因为它不导电。

另一方面，硬币可能会起作用。因为大多数硬币（至少我来自哪里）都含有导电材料。

# iphone - AVFoundation 能否在 IOS 5.0 模拟器上播放音频并获取其详细信息？

> ID：11339974
> 
> 赞同：0
> 
> 时间：2012-07-05T07:49:15.340
> 
> 标签：iphone, xcode, ios5

以上可以仅使用 AVFoundation.framework 完成吗？

我试着做一些实验，但我真的不能让它工作

（对不起新手，请告诉我将代码放在哪里，例如：ViewController 或 MainView）

这些是我的代码，（UI 组件在里面，因为我不想使用界面生成器）

```
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        NSError *error;
        buttonPlay = [[UILabel alloc] initWithFrame:CGRectMake(0, 350, 100, 50)];

        buttonPlay.text = @"Play";

        // Get the file path to the song to play.
        NSString* path;
        NSURL* url;

        path = [[NSBundle mainBundle] pathForResource:@"Bring_Me_To_Life.mp3" ofType:nil];
        url = [NSURL fileURLWithPath:path];

        NSData *_objectData = [NSData dataWithContentsOfURL:url];

        //Initialize the AVAudioPlayer.
        audioPlayer = [[AVAudioPlayer alloc] initWithData:_objectData error:&error];

        // Preloads the buffer and prepares the audio for playing.
        audioPlayer.numberOfLoops = 0;
        audioPlayer.volume = 1.0f;
        [audioPlayer prepareToPlay];

        if (audioPlayer == nil)
            NSLog(@"%@", [error description]);
        else
            [audioPlayer play];

        [self addSubview:buttonPlay];
    }
    return self;
}

-(void)touchesBegan:(CGPoint)location{
    if(CGRectContainsPoint(buttonPlay.frame, location)){
        NSLog(@"Dec from Chl %f",[audioPlayer peakPowerForChannel:0]);
        NSLog(@"Length of Clip %f",[audioPlayer duration]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:47:10.983

试试这个 audioPlayer=[[AVAudioPlayer alloc]initWithContentsOfURL:url error:nil];

# java - 如何从 JAR 文件执行脚本？

> ID：11339979
> 
> 赞同：4
> 
> 时间：2012-07-05T07:49:43.407
> 
> 标签：java, maven, jar

我有一个 Maven 项目，我正在尝试执行一个脚本（用 R 编写）。我也将此脚本文件放在源代码目录中。我发现这个脚本根本没有执行。但是，当我将此脚本移到 jar 文件之外时，它会执行！谁能告诉我为什么，并给我一些解决方案以将脚本放入 jar 中同时确保其执行？

非常感谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T08:31:07.067

我会做以下事情：

*   使用 ClassLoader.getResourceAsStream() 获取文件的 InputStream
*   将此 InputStream 写入 tmp 目录
*   用 Runtime.getRuntime().execute(..) 执行它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:50:54.420

jar 中的文件不再是文件，因此要执行它，您首先需要将其[提取到某处](https://stackoverflow.com/questions/4764347/extract-and-load-dll-from-jar)，然后从外部提取的文件路径执行它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:56:06.367

您需要从 jar 文件中提取脚本：

```
jar -xvf my.jar com/foo/my.script.sh 
```

# android - 所有屏幕上的自定义吐司消息？

> ID：11339980
> 
> 赞同：1
> 
> 时间：2012-07-05T07:49:45.783
> 
> 标签：android, android-toast

我开发了一个有 15 个屏幕的应用程序。现在我想在所有这 15 个屏幕中显示自定义 toast 消息。为此，我夸大了一种布局。但它只能在一个屏幕上工作。因此，我编写了一个方法来`Toast`在所有屏幕上显示自定义。每当我想显示 toast 消息时，我都会调用该方法。但我得到了`java.lang.NullPointerException`。如何解决这个问题？以下是我的代码，

```
public static void showToastMessage(String message){

               LayoutInflater inflater = ((Activity) context).getLayoutInflater();

                View layout = inflater.inflate(R.layout.custom_toast,
                  (ViewGroup) ((Activity) context).findViewById(R.id.customToast));
            // set a message
                TextView text = (TextView) layout.findViewById(R.id.text);
                text.setText(message);

                // Toast...
                Toast toast = new Toast(context);
                toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                toast.setDuration(Toast.LENGTH_LONG);
                toast.setView(layout);
                toast.show();
           } 
```

日志是

```
java.lang.NullPointerException

    at com.guayama.utilities.CommonMethods.showToastMessage(CommonMethods.java:474)

    at android.view.View.performClick(View.java:3511)

    at android.view.View$PerformClick.run(View.java:14105)

    at android.os.Handler.handleCallback(Handler.java:605)

    at android.os.Handler.dispatchMessage(Handler.java:92)

    at android.os.Looper.loop(Looper.java:137)

    at android.app.ActivityThread.main(ActivityThread.java:4424)

    at java.lang.reflect.Method.invokeNative(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T07:53:31.707

改变你的方法

从

```
showToastMessage(String message) 
```

到

```
showToastMessage(Context context,String message); 
```

对我来说似乎是上下文问题

你的功能看起来像这样

```
public static void showToastMessage(Context context,String message){

               LayoutInflater inflater = context.getLayoutInflater();

                View layout = inflater.inflate(R.layout.custom_toast,
                  (ViewGroup) ((Activity) context).findViewById(R.id.customToast));
            // set a message
                TextView text = (TextView) layout.findViewById(R.id.text);
                text.setText(message);

                // Toast...
                Toast toast = new Toast(context);
                toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                toast.setDuration(Toast.LENGTH_LONG);
                toast.setView(layout);
                toast.show();
           } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-18T08:38:27.277

Toast 的自定义类实现，可用于任何项目。

```
public class ToastMessage {
        private Context context;
        private static ToastMessage instance;

    /**
     * @para
   m context
     */
    private ToastMessage(Context context) {
        this.context = context;
    }

    /**
     * @param context
     * @return
     */
    public synchronized static ToastMessage getInstance(Context context) {
        if (instance == null) {
            instance = new ToastMessage(context);
        }
        return instance;
    }

    /**
     * @param message
     */
    public void showLongMessage(String message) {
        Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
    }

    /**
     * @param message
     */
    public void showSmallMessage(String message) {
        Toast.makeText(context, message, Toast.LENGTH_LONG).show();
    }

    /**
     * The Toast displayed via this method will display it for short period of time
     *
     * @param message
     */
    public void showLongCustomToast(String message) {

        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        View layout = inflater.inflate(R.layout.layout_custom_toast, (ViewGroup) ((Activity) context).findViewById(R.id.ll_toast));
        TextView msgTv = (TextView) layout.findViewById(R.id.tv_msg);
        msgTv.setText(message);
        Toast toast = new Toast(context);
        toast.setGravity(Gravity.FILL_HORIZONTAL | Gravity.BOTTOM, 0, 0);
        toast.setDuration(Toast.LENGTH_LONG);
        toast.setView(layout);
        toast.show();

    }

    /**
     * The toast displayed by this class will display it for long period of time
     *
     * @param message
     */
    public void showSmallCustomToast(String message) {

        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        View layout = inflater.inflate(R.layout.layout_custom_toast, (ViewGroup) ((Activity) context).findViewById(R.id.ll_toast));
        TextView msgTv = (TextView) layout.findViewById(R.id.tv_msg);
        msgTv.setText(message);
        Toast toast = new Toast(context);
        toast.setGravity(Gravity.FILL_HORIZONTAL | Gravity.BOTTOM, 0, 0);
        toast.setDuration(Toast.LENGTH_SHORT);
        toast.setView(layout);
        toast.show();
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T07:53:52.467

传入`Context`并将其用作`showToastMessage(String message,Context context)`

因此：

```
public static void showToastMessage(String message){
   LayoutInflater inflater = ((Activity) context).getLayoutInflater();
   View layout = inflater.inflate(R.layout.custom_toast,
   (ViewGroup) ((Activity) context).findViewById(R.id.customToast));
   // set a message
   TextView text = (TextView) layout.findViewById(R.id.text);
   text.setText(message);

   // Toast...
   Toast toast = new Toast(context);
   toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
   toast.setDuration(Toast.LENGTH_LONG);
   toast.setView(layout);
   toast.show();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T07:52:39.280

我认为这是问题所在，

```
(Activity) context 
```

您尚未将上下文对象传递给此方法，并且您正在尝试引用一些您可以全局声明的上下文对象。

因此，此时如果您的 Context Object 为 null，您将获得 NullPointer。尝试在 showToastMessage() 的参数中传递当前活动的 conetxt

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-06T10:12:05.213

我一直在定制吐司，所以请按照以下过程，您将多次使用常用方法。

我的 custom_toast.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:card_view="http://schemas.android.com/apk/res-auto"
    android:id="@+id/custom_toast_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@color/white">

    <android.support.v7.widget.CardView
        android:id="@+id/card_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        card_view:cardBackgroundColor="@color/grey"
        card_view:cardCornerRadius="6dp"
        card_view:cardElevation="6dp"
        card_view:contentPadding="25dp"
       >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center">

            <ImageView
                android:id="@+id/custom_toast_image"
                android:layout_width="30dp"
                android:layout_height="30dp"
                android:gravity="center_vertical"
                android:src="@drawable/ic_launcher"/>

            <TextView
                android:id="@+id/custom_toast_message"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_vertical"
                android:textSize="16dp"/>

        </LinearLayout>

    </android.support.v7.widget.CardView>
</LinearLayout> 
```

第二件事是创建一个 java 类：比如 CustomToast.java

```
public class CustomToast {
Context context;

public static void showToastMessage(Context context,String message){

    LayoutInflater inflater = ((Activity) context).getLayoutInflater();

    View layout = inflater.inflate(R.layout.customtoast,
            (ViewGroup) ((Activity) context).findViewById(R.id.custom_toast_layout));
    // set a message
    TextView text = (TextView) layout.findViewById(R.id.custom_toast_message);
    text.setText(message);

    // Toast...
    Toast toast = new Toast(context);
    toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
    toast.setDuration(Toast.LENGTH_LONG);
    toast.setView(layout);
    toast.show();
} 
```

}

第三步在您的活动中创建 CustomToast.java 类的对象，并通过传递上下文和消息来调用该方法。

```
 CustomToast customToast=new CustomToast();
  customToast.showToastMessage(ctx,message); 
```

# php - 找不到实体存储库

> ID：11339985
> 
> 赞同：0
> 
> 时间：2012-07-05T03:23:41.563
> 
> 标签：php, doctrine

> **可能重复：**
> [Doctrine 错误：找不到 Class 'Doctrine\ORM\EntityRepository'](https://stackoverflow.com/questions/11338256/doctrine-error-class-doctrine-orm-entityrepository-not-found)

我是 Doctrine 的新手，我正在遵循文档中的示例。我创建了我的实体，一切正常，直到我创建了一个存储库。我有一个名为 User 的实体和一个 UserRepository。

但是当我尝试使用用户存储库时，我收到错误消息：**Fatal error: Class 'Doctrine\ORM\EntityRepository' not found in C:\xampp\htdocs\excap\repositories\UserRepository.php on line 10**

```
use Doctrine\ORM\EntityRepository;

/**
 * Description of UserRepository
 *
 * @author Mario
 */
class UserRepository extends EntityRepository
{ 
```

我该如何解决这个问题？

```
<?php
//bootstrap_doctrine.php
$isDevMode = true;
use Doctrine\ORM\Tools\Setup;
require_once 'vendor/autoload.php';

$config = Setup::createAnnotationMetadataConfiguration(array(__DIR__.'/entities'), $isDevMode);
$conn = array(
    'driver' => 'pdo_mysql',
    'user' => 'mydbuser',
    'password' => 'mydbpassword',
    'dbname' => 'mydbname'
);

$entityManager = \Doctrine\ORM\EntityManager::create($conn, $config);
?> 
```

* * *

```
<?php
//boostrap.php
//Entities
require_once 'entities/User.php';
require_once 'entities/Gender.php';
require_once 'entities/AccessPoint.php';

//Repositories
require_once 'repositories/UserRepository.php';

if(!class_exists("Doctrine\Common\Version", FALSE))
{
    require_once 'bootstrap_doctrine.php';
}
?> 
```

* * *

```
<?php
// autoload.php generated by Composer
if (!class_exists('Composer\\Autoload\\ClassLoader', false)) {
    require __DIR__ . '/composer' . '/ClassLoader.php';
}

return call_user_func(function() {
    $loader = new \Composer\Autoload\ClassLoader();
    $composerDir = __DIR__ . '/composer';

    $map = require $composerDir . '/autoload_namespaces.php';
    foreach ($map as $namespace => $path) {
        $loader->add($namespace, $path);
    }

    $classMap = require $composerDir . '/autoload_classmap.php';
    if ($classMap) {
        $loader->addClassMap($classMap);
    }

    $loader->register();

    return $loader;
});

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:34:26.097

由于您提供的信息有限，我敢猜测您的自动加载器配置错误；它似乎无法自动包含 EntityRepository 类。

[如果没有任何进一步的信息，除了向您指出Doctrine 关于自动加载器的文档](http://doctrine-orm.readthedocs.org/en/latest/reference/configuration.html)之外，我真的无法帮助您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:48:05.573

问题解决了。问题出在 bootstrap.php 文件中。我在加载 bootstrap_doctrine.php 之前加载了实体；就这样。

# web-services - 通过雅虎财经按行业获取股票

> ID：11339993
> 
> 赞同：10
> 
> 时间：2012-07-05T07:50:14.620
> 
> 标签：web-services, finance, yahoo-finance

我想列出所有可用的行业（例如：[http](http://biz.yahoo.com/p/) ://biz.yahoo.com/p/ ）并显示所有相应的股票。到目前为止，我使用 YAHOO.Finance.SymbolSuggest.ssCallback 进行符号建议，并使用[http://finance.yahoo.com/d/quotes.csv?s=](http://finance.yahoo.com/d/quotes.csv?s=) ... 获取股票数据。

有谁知道如何获得所有行业和相应的股票？是否还有另一个隐藏的 Yahoo API？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-02T07:52:49.473

[**`GICS Sectors`**](http://en.wikipedia.org/wiki/Global_Industry_Classification_Standard)标准普尔（标准普尔 500 指数将使用该列表）以及[**`ICB`**](http://en.wikipedia.org/wiki/Industry_Classification_Benchmark)道琼斯和富时指数都要求列出所有可用行业的列表。因此它被纳斯达克、纽约证券交易所和其他市场使用。雅虎似乎使用了晨星的第三种行业分类，但由于我不太确定我会提供两种检索数据的方式。

## 晨星

我不知道雅虎是否真的坚持这个分类，但有些名字真的很接近所以让我们看看：你需要去他们的[索引数据](http://corporate.morningstar.com/us/asp/detail.aspx?filter=Equity&page=DailyTrailingReturns.xml&xmlfile=613.xml)，在每个部门，点击它，然后在底部***查看完整的索引持有量***。它不像雅虎行业列表那样精确，但它是晨星所能做的。不是很有说服力，我知道...

## GICS 部门

**`GICS Sectors`**现在是标准普尔的商标，然后必须在标准普尔的网站上查找数据。
**简短的回答：**看看这个[页面](http://www.standardandpoors.com/indices/sp-500/en/us/%3FindexId=spusa-500-usduf--p-us-l--?ffFix=yes)，您需要注册（免费且简单），您可以下载包含股票和相应行业的电子表格（xls）。**然而**，事情并不总是那么容易，您将不得不进行一些搜索以检索所有具有相应行业的股票。例如，文件**INDICATED_RATE_CHANGE.xls**将为您提供 2012 年每个月的一些公司及其部门。使用该文件和**SP500_DividendAristocrats_2012.xls**，您应该能够检索至少大部分 S&P 500 公司。

## 国际商业银行

~~**`ICB`**纽约证券交易所，纳斯达克等都使用它......然后它比标准普尔和晨星简单得多。[这是你的答案](http://www.nyse.com/indexes/nyaindex.csv)。**繁荣！**直接链接！~~ 链接已死:(

## 最后

我强烈建议您使用更简单且最常用的行业分类索引：**`ICB`**. 由于数以百万计的投资者每天都在关注它，因此它将始终可用并公开展示，**而**无需使用标准普尔金融服务或晨星经纪服务......

# 编辑

您可以查看 nasdaq.com 以检索所有公司及其相应部门：[此处为纳斯达克](http://www.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=nasdaq&render=download)，[此处为 Nyse](http://www.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=nyse&render=download)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-07T20:08:09.987

从这里获取所有行业 ID：http: [//biz.yahoo.com/ic/ind_index.html](http://biz.yahoo.com/ic/ind_index.html) （查看链接）

然后使用 YQL ( [https://developer.yahoo.com/yql/console/](https://developer.yahoo.com/yql/console/) )

使用这样的查询： **select * from yahoo.finance.industry where id=912**

# sql - 从表中返回变量的条件查询

> ID：11339998
> 
> 赞同：1
> 
> 时间：2012-07-05T07:50:55.717
> 
> 标签：sql, sql-server

我试图在 Azure SQL 上做一些条件查询，但我完全不知道该怎么做。我有这两张表：

### 订单表

```
OrderID (PK)
... 
```

### 订单历史表

```
OrderHistoryId (PK)
OrderId (FK)
DisplayString
OrderStatus 
```

* * *

现在我想做的是将表 OrderHistory 加入到我的查询中，并根据针对 OrderHistory 的一些条件查询返回一个变量

```
SELECT O.OrderId, [...], Variable
FROM [Order] AS O

-- some code to get "Variable" from OrderHistory

ORDER BY O.OrderId DESC

OFFSET 0 ROWS
FETCH NEXT 200 ROWS ONLY 
```

### 条件

1.  如果与 O.OrderId 关联的任何行在 DisplayString 中包含 %FINISHED% 或 OrderStatus = 1；然后返回 1
2.  如果与 O.OrderId 关联的任何行在 DisplayString 中包含 OrderStatus = 2 AND NOT %FINISHED%; 然后返回 2
3.  如果与 O.OrderId 关联的所有 OrderStatus 的 SUM 等于 0；然后返回 3

### 结果

这就是我想要的结果：

```
OrderId    [...]    Variable
1           ...     1
2           ...     3
3           ...     2
4           ...     2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:54:11.227

用户[案例](http://msdn.microsoft.com/en-us/library/ms181765.aspx)语句根据您的 sql 的口味。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:42:21.910

这个查询可能需要更多的工作，但它应该展示“案例”：

```
select Variable = case when b.DisplayString like 'FINISHED%' or b.OrderStatus = 1
                       then 1
                       else case when b.DisplayString not like 'FINISHED%' and b.OrderStatus = 2
                            then 2
                            else case when c.sumOsStatus = 0 then 3
                            end
                       end
                  end,
* 
from [Order] a
inner join OrderHistory b
    on a.OrderId = b.OrderId
inner join (select OrderId, sum(OrderStatus) sumOsStatus from OrderHistory group by OrderId) c
    on a.OrderId = c.OrderId 
```

# java - Android：多选选择列表 - 仅在选中复选框而不是在文本视图上时选中复选框

> ID：11339999
> 
> 赞同：0
> 
> 时间：2012-07-05T07:50:56.037
> 
> 标签：java, android

我正在创建一个显示目录名称的 multiple_choice 列表视图。由于它是多选选择，每个项目都包含一个文本视图和一个复选框。默认情况下，当我单击任何项​​目时，复选框会被选中/取消选中。这不是我想要的功能。因为，我正在显示目录的名称，所以我希望当用户单击该项目时，而不是选中复选框，应该显示一个新列表，其中包含该目录的子文件夹的名称。

In simple terms, when the textview of the item is selected a new list should get displayed & when the the check box is selected then only the check box should be checked/unchecked.

下面是我到目前为止的代码：

```
public class DirectoryListing extends Activity implements OnItemClickListener {

    ListView dirlv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.directorylisting);
        try {
            ArrayList<String> dirList = new ArrayList<String>();
            dirList = getAllDirList();
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_multiple_choice,
                    android.R.id.text1, dirList);
            dirlv = (ListView) findViewById(R.id.lvDirList);
            dirlv.setAdapter(adapter);
            dirlv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
            dirlv.setOnItemClickListener(this);

        } catch (Exception e) {
            Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT).show();
        }

    }

    private ArrayList<String> getAllDirList() {
        ArrayList<String> result = new ArrayList<String>();
        File home = new File("/");
        File[] files = home.listFiles();
        for (File file : files) {
            if (file.isDirectory()) {
                result.add(file.getName());
            }
        }
        return result;
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        try {
            TextView tv = (TextView) view;
            //TODO
        } catch (Exception e) {
            Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT).show();
        }
    }

} 
```