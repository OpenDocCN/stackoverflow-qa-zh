# StackOverflow 问答 13000-13999

# javascript - 是否有一种“简洁”的方式在 JavaScript 中进行命名空间？

> ID：13021
> 
> 赞同：15
> 
> 时间：2008-08-16T05:57:37.487
> 
> 标签：javascript, namespaces

我经常遇到将所有 JavaScript 都放在一个`namespace`结构中的网站，其结构如下：

```
namespaces = { com : { example: { example.com's data} } 
```

但是，相对于其他命名空间框架安全地设置它似乎需要相对大量的代码（定义为 > 2 行）。我想知道是否有人知道这样做的简洁方法？此外，是否有一种相对标准/一致的方式来构建它？例如，`com`命名空间是直接附加到全局对象上，还是通过命名空间对象附加？

[编辑：哎呀，显然`{com = { ... } }`不会完成任何接近我预期的事情，感谢 Shog9 指出这一点。]

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-08-16T16:04:18.260

Javascript 没有独立的命名空间。它具有可以提供解析名称范围的功能，以及可以为给定范围内可访问的命名数据提供帮助的对象。

这是您的示例，已更正：

```
var namespaces = { com: { example: { /* example.com's data */ } } } 
```

`namespaces`这是一个被分配了一个对象字面量的变量。该对象包含一个属性：`com`，一个具有一个属性`example`的对象： ，一个可能包含有趣内容的对象。

因此，您可以键入类似**namespaces.com.example 的内容。*somePropertyOrFunctionOnExample***一切都会奏效。当然，这也很可笑。您没有分层命名空间，您有一个包含一个对象的对象，该对象包含一个包含您真正关心的东西的对象。

```
var com_example_data = { /* example.com's data */ }; 
```

没有毫无意义的层次结构，这也同样有效。

**现在**，如果你真的*想*建立一个层次结构，你可以尝试这样的事情：

```
com_example = com_example || {};
com_example.flags = com_example.flags || { active: false, restricted: true};

com_example.ops = com_example.ops || (function()
    {
       var launchCodes = "38925491753824"; // hidden / private
       return {
         activate: function() { /* ... */ },
         destroyTheWorld: function() { /* ... */ }
       };
    })(); 
```

...也就是说，恕我直言，相当简洁。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-17T05:31:35.683

这是 Peter Michaux 关于[Javascript 命名空间](http://peter.michaux.ca/article/7944)的一篇有趣的文章。他讨论了 3 种不同类型的 Javascript 命名空间：

1.  前缀命名空间
2.  单个对象命名空间
3.  嵌套对象命名空间

我不会抄袭他在这里所说的话，但我认为他的文章信息量很大。

彼得甚至指出其中一些有性能考虑。考虑到新的 ECMAScript Harmony 计划已经放弃了命名空间和打包的 4.0 计划，我认为谈论这个话题会很有趣。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-17T10:46:13.347

我尝试遵循 Yahoo 约定，在全局范围内制作单个父对象以包含所有内容；

```
var FP = {};
FP.module = {};
FP.module.property = 'foo'; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-18T14:55:22.313

为确保您不会覆盖现有对象，您应该这样做：

```
if(!window.NameSpace) {
    NameSpace = {};
} 
```

或者

```
var NameSpace = window.NameSpace || {}; 
```

这样，您可以将其放在应用程序/网站中每个文件的顶部，而不必担心覆盖命名空间对象。此外，这将使您能够单独为每个文件编写单元测试。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-16T16:06:03.860

[YUI 库](http://developer.yahoo.com/yui/yahoo/)库的代码使用您可能会觉得更可取的函数来处理命名空间。其他库也可以这样做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-18T01:38:36.340

作为点或下划线的替代方法，您可以使用美元符号字符：

```
var namespaces$com$example = "data"; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-18T21:16:12.787

我也喜欢这个（[来源](http://code.google.com/apis/ajax/playground/#anonymous_function_for_clean_namespace)）：

```
(function() {
    var a = 'Invisible outside of anonymous function';
    function invisibleOutside() {
    }

    function visibleOutside() {
    }
    window.visibleOutside = visibleOutside;

    var html = '--INSIDE Anonymous--';
    html += '<br/> typeof invisibleOutside: ' + typeof invisibleOutside;
    html += '<br/> typeof visibleOutside: ' + typeof visibleOutside;
    contentDiv.innerHTML = html + '<br/><br/>';
})();

var html = '--OUTSIDE Anonymous--';
html += '<br/> typeof invisibleOutside: ' + typeof invisibleOutside;
html += '<br/> typeof visibleOutside: ' + typeof visibleOutside;
contentDiv.innerHTML += html + '<br/>';​ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-03-23T23:25:16.507

使用对象字面量和`this`对象或显式名称根据包含函数的局部变量的同级属性进行命名空间。例如：

```
var foo = { bar: function(){return this.name; }, name: "rodimus" }
var baz = { bar: function(){return this.name; }, name: "optimus" }

console.log(foo.bar());
console.log(baz.bar());
```

或者没有显式`name`属性：

```
var foo = { bar: function rodimus(){return this; } }
var baz = { bar: function optimus(){return this; } }

console.log(foo.bar.name);
console.log(baz.bar.name);
```

或不使用`this`：

```
var foo = { bar: function rodimus(){return rodimus; } }
var baz = { bar: function optimus(){return optimus; } }

console.log(foo.bar.name);
console.log(baz.bar.name);
```

使用`RegExp`or`Object`构造函数将名称属性添加到计数器变量和其他常用名称，然后使用`hasOwnProperty`测试进行检查：

```
 var foo = RegExp(/bar/);

/* Add property */
foo.name = "alpha";

document.body.innerHTML = String("<pre>" + ["name", "value", "namespace"] + "</pre>").replace(/,/g, "&#09;");

/* Check type */
if (foo.hasOwnProperty("name")) 
  {
  document.body.innerHTML += String("<pre>" + ["foo", String(foo.exec(foo)), foo.name] + "</pre>").replace(/,/g, "&#09;");
  }

/* Fallback to atomic value */
else 
  {
  foo = "baz";
  }

var counter = Object(1);

/* Add property */
counter.name = "beta";

if (counter.hasOwnProperty("name")) 
  {
  document.body.innerHTML += String("<pre>" + ["counter", Number(counter), counter.name] + "</pre>").replace(/,/g, "&#09;");
  } 
else 
  {
  /* Fallback to atomic value */
  counter = 0;
  }
```

DOM 使用以下约定来命名 HTML 和 SVG 元素接口定义：

*   HTML标题元素
*   SVG 标题元素
*   SVGScriptElement
*   HTMLScriptElement

JavaScript 核心使用原型将`toString`方法命名为简单的多态形式。

**参考**

*   [javascript自动装箱吗？](https://stackoverflow.com/questions/17216847/1113772)
*   [在 JavaScript 对象文字中获取键的兄弟值](https://stackoverflow.com/questions/17216496/1113772)
*   [MDN：JavaScript 运算符 - this 作为对象方法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this#As_an_object_method)
*   [Lua：技术说明 7 - 模块和包](https://www.lua.org/notes/ltn007.html)
*   [HTMLTitleElement.webidl](https://github.com/mozilla/gecko-dev/blob/master/dom/webidl/HTMLTitleElement.webidl)
*   [SVGTitleElement.webidl](https://github.com/mozilla/gecko-dev/blob/master/dom/webidl/SVGTitleElement.webidl)
*   [SVGScriptElement.webidl](https://github.com/mozilla/gecko-dev/blob/master/dom/webidl/SVGScriptElement.webidl)
*   [HTMLScriptElement.webidl](https://github.com/mozilla/gecko-dev/blob/master/dom/webidl/HTMLScriptElement.webidl)
*   [ES6 中的函数名称](http://www.2ality.com/2015/09/function-names-es6.html)
*   [ECMAScript 2015 语言规范 - 19.2.4.2 函数实例：名称 | ECMA-262 第 6 版](http://www.ecma-international.org/ecma-262/6.0/#sec-function-instances-name)

# svn - Is there a tool that can display a SVN repository visually ( i.e. pretty charts )?

> ID：13039
> 
> 赞同：33
> 
> 时间：2008-08-16T07:57:42.987
> 
> 标签：svn

Real strange.

I cannot find a tool that enables one to display a SVN repository in graphical form.
I would like the ability to see changes in revision / time , branch / time graphs.

Does anyone know of one. **Ideally it would be platform neutral or even better web based**.

Solutions offered so far in brief:

*   svn-graph
*   [Fisheye](http://www.atlassian.com/software/fisheye/) ( you want how much !£?* )

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-08-16T08:11:58.153

[Fisheye](http://www.atlassian.com/software/fisheye/), from Atlassian, looks at an SVN repository and can show you a few graphs. Also provides a handy web interface for blame, diff, etc.

for example, some sample images at [one of the demo servers:](http://fisheye2.atlassian.com/chart/~charttype=Pie,stacktype=Author,extn=.java,extn=.js,extn=.jsp,extn=.xml/google-guice)

1.  ![pie chart](../Images/62964ae994336438cbea4e87905ad9eb.png)
2.  ![line change](../Images/e7528d835da52282b891112ad4aab9cc.png)

And if you like some pretty code metrics, [here are some samples](http://fisheye6.atlassian.com/plugins/servlet/code-metrics/ofbiz).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-06T19:39:43.950

You might also give [StatSVN](http://www.statsvn.org/downloads.html) a try.

It's written in Java (meets your platform-neutral requirement) and generates a static html tree with your revision history and commit graphs. You can use Ant or a batch file to automate the process of calling it.

I've also heard good things about Trac.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-16T08:24:16.287

for simplicity, [tortoise svn](http://tortoisesvn.tigris.org/) gives a basic revision graph

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-01-29T05:25:28.340

我正在编写名为[SVNPlot](https://bitbucket.org/nitinbhide/svnplot/)的颠覆统计图生成实用程序。它的灵感来自 StatSVN 生成的图表。然而，SVNPlot 图的生成分两步（a）首先它从颠覆日志信息创建一个[sqlite3](http://www.sqlite.org/)数据库（b）然后通过提取数据库 sqlite 数据库（使用简单的 sql 查询）生成实际的图。

我认为使用 sql 从日志信息中提取图形数据会带来更大的灵活性和良好的性能。现在 SVNPlot 只生成图表，但很容易从生成的 sqlite 数据库中提取任何其他统计信息。

SVNPlot 是用 python 编写的，它使用优秀的[Matplotlib](http://matplotlib.sourceforge.net/)包来生成图形。该代码可在谷歌代码的[SVNPlot](https://bitbucket.org/nitinbhide/svnplot/)页面上找到（许可证是新的 BSD 许可证）。为 Rietveld 存储库生成的示例图可在[http://thinkingcraftsman.in/projects/svnplot/index.htm获得](http://thinkingcraftsman.in/projects/svnplot/index.htm)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-16T08:13:59.630

The only tool that I've ever encountered is the [svn-graph.pl](http://svn.apache.org/repos/asf/subversion/trunk/tools/client-side/svn-graph.pl) perl script from the svn tools. It spits out a [graphviz](http://www.graphviz.org/) dot file which can be rendered in a variety of image formats. This could be wrapped up in a cgi script to form a basic web graph tool.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-06T19:35:29.123

[Trac](http://trac.edgewall.org/) is a wiki and issue tracking tool, which happens to include an SVN browser. The [RevtreePlugin](http://trac-hacks.org/wiki/RevtreePlugin), for Trac will allow you to display your repo in a graphical form. Trac is still a very young application(latest version is 0.11.1), but we use it at work for our software development and it's proved very useful so far.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-28T15:06:02.810

也许您可以详细说明您所追求的“视觉展示”和“漂亮图表”是什么？

[一种迂回的方法是使用git-svn](http://git-scm.com/docs/git-svn "手册页")克隆 svn 存储库，然后您可以使用图形[gitk](http://lwn.net/Articles/140350/ "截屏")或[giggle](http://developer.imendio.com/projects/giggle)工具来可视化分支和合并以及浏览细节。

（然后你会得到分布式的东西，[git](http://git.or.cz/)做得很好，作为一个很好的副作用。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-16T15:01:27.030

[Trac](http://trac.edgewall.org/wiki/TracGuide)包括源代码浏览器和有限的统计分析。当然，它是基于网络的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-11-05T09:55:10.453

还有漂亮的应用程序[SmartSVN](https://www.smartsvn.com/features/)和漂亮的图表。
但是带图的版本不是免费的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-09-24T13:55:59.833

还有[https://github.com/justinmassiot/svn-graph-branches](https://github.com/justinmassiot/svn-graph-branches)。尽管自 2010 年以来没有任何活动，并且对我不起作用（与我的 dot 版本不兼容）。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2008-10-08T09:43:31.750

您也可以尝试[MPY SVN STATS](http://mpy-svn-stats.berlios.de/)。[这](http://mpy-svn-stats.berlios.de/zope-stats/)是 Zope 的示例图。

# .net - .NET 中的结构和类有什么区别？

> ID：13049
> 
> 赞同：829
> 
> 时间：2008-08-16T08:21:47.947
> 
> 标签：.net, class, struct, value-type, reference-type

.NET 中的结构和类有什么区别？

* * *

## 回答 #1

> 赞同：1188
> 
> 时间：2008-08-16T18:41:38.037

在 .NET 中，有两类类型，*引用类型*和*值类型*。

结构是*值类型*，类是*引用类型*。

一般的区别是*引用类型*存在于堆上，而*值类型*存在于内联，也就是说，无论它是你的变量或字段的定义。

*包含值类型*的变量包含整个*值类型*值。对于结构，这意味着变量包含整个结构及其所有字段。

*包含引用类型*的变量包含一个指针，或对内存中实际值所在的其他位置的*引用。*

这有一个好处，首先是：

*   *值类型*总是包含一个值
*   *引用类型*可以包含一个*null*引用，这意味着它们现在根本不引用任何东西

在内部，*引用类型*被实现为指针，并且知道这一点并知道变量赋值是如何工作的，还有其他行为模式：

*   *将值类型*变量的内容复制到另一个变量中，将整个内容复制到新变量中，使两者不同。换句话说，在复制之后，对一个的更改不会影响另一个
*   *将引用类型*变量的内容复制到另一个变量中，复制引用，这意味着您现在有两个对相同的引用在*其他地方*存储实际数据。换句话说，在复制之后，更改一个引用中的数据似乎也会影响另一个引用，但这只是因为您实际上只是在两个地方查看相同的数据

当您声明变量或字段时，这两种类型的区别如下：

*   变量：*值类型*存在于堆栈中，*引用类型*存在于堆栈中，作为指向实际内存所在的堆内存中某处的指针（尽管请注意[Eric Lipperts 文章系列：堆栈是一个实现细节](https://blogs.msdn.microsoft.com/ericlippert/2009/04/27/the-stack-is-an-implementation-detail-part-one/)。）
*   class/struct-field：*值类型*完全存在于类型内部，*引用类型*存在于类型内部，作为指向实际内存所在的堆内存中某处的指针。

* * *

## 回答 #2

> 赞同：247
> 
> 时间：2008-10-04T22:07:32.267

每个的简短摘要：

**仅限课程：**

*   可以支持继承
*   是引用（指针）类型
*   引用可以为空
*   每个新实例都有内存开销

**仅结构：**

*   不支持继承
*   是值类型
*   按值传递（如整数）
*   不能有空引用（除非使用 Nullable）
*   每个新实例都没有内存开销 - 除非“装箱”

**类和结构：**

*   复合数据类型通常用于包含一些具有某种逻辑关系的变量吗
*   可以包含方法和事件
*   可支持接口

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2018-01-05T01:58:43.920

结构和类之间的区别：

*   **结构是值类型**，而**类是引用类型**。
*   **结构存储在堆栈上，**而**类存储在堆上**。
*   值类型将它们的值保存在声明它们的内存中，但引用类型保存对内存中对象的引用。
*   **值类型**在范围丢失后立即销毁，而引用类型仅在范围丢失后销毁变量。该对象稍后被垃圾收集器销毁。
*   当您将一个结构复制到另一个结构中时，会创建该结构的一个新副本。修改后的结构不会影响另一个结构的值。
*   当您将一个类复制到另一个类时，它只复制引用变量。
*   两个引用变量都指向堆上的同一个对象。对一个变量所做的更改将影响另一个参考变量。
*   **结构不能有析构函数**，但类可以有析构函数。
*   **结构不能有显式的无参数构造函数**，而类可以。结构不支持继承，但类支持。两者都支持从接口继承。
*   **结构为密封型**。

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2008-08-16T08:30:38.083

在 .NET 中，结构和类声明区分引用类型和值类型。

当你传递一个引用类型时，只有一个实际存储的。访问该实例的所有代码都在访问同一个。

当您传递一个值类型时，每个值类型都是一个副本。所有代码都在自己的副本上工作。

这可以用一个例子来展示：

```
struct MyStruct 
{
    string MyProperty { get; set; }
}

void ChangeMyStruct(MyStruct input) 
{ 
   input.MyProperty = "new value";
}

...

// Create value type
MyStruct testStruct = new MyStruct { MyProperty = "initial value" }; 

ChangeMyStruct(testStruct);

// Value of testStruct.MyProperty is still "initial value"
// - the method changed a new copy of the structure. 
```

对于一个班级，这将是不同的

```
class MyClass 
{
    string MyProperty { get; set; }
}

void ChangeMyClass(MyClass input) 
{ 
   input.MyProperty = "new value";
}

...

// Create reference type
MyClass testClass = new MyClass { MyProperty = "initial value" };

ChangeMyClass(testClass);

// Value of testClass.MyProperty is now "new value" 
// - the method changed the instance passed. 
```

类可以什么都不是——引用可以指向一个空值。

结构是实际值——它们可以为空，但不能为空。出于这个原因，结构总是有一个没有参数的默认构造函数——它们需要一个“起始值”。

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2017-05-14T19:58:36.697

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2020-06-18T16:38:10.040

我 ♥ 可视化，在这里我创建了一个来展示[structs](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/struct)和[classes](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/classes)之间的基本区别。 [![在此处输入图像描述](../Images/ae67d499134fe0592b58bf3ba3fcf153.png)](https://i.stack.imgur.com/M9c18.png)

* * *

以及文本表示以防万一；）

```
+--------------------------------------------------+------+----------------------------------------------+
|                      Struct                      |      |                      Class                    |
+--------------------------------------------------+------+----------------------------------------------+
| - 1 per Thread.                                  |      | - 1 per application.                         |
|                                                  |      |                                              |
| - Holds value types.                             |      | - Holds reference types.                     |
|                                                  |      |                                              |
| - Types in the stack are positioned              |      | - No type ordering (data is fragmented).     |
|   using the LIFO principle.                      |      |                                              |
|                                                  |      |                                              |
| - Can't have a default constructor and/or        |      | - Can have a default constructor             |
|   finalizer(destructor).                         |      |   and/or finalizer.                          |
|                                                  |      |                                              |
| - Can be created with or without a new operator. |      | - Can be created only with a new operator.   |
|                                                  |      |                                              |
| - Can't derive from the class or struct          |  VS  | - Can have only one base class and/or        |
|   but can derive from the multiple interfaces.   |      |   derive from multiple interfaces.           |
|                                                  |      |                                              |
| - The data members can't be protected.           |      | - Data members can be protected.             |
|                                                  |      |                                              |
| - Function members can't be                      |      | - Function members can be                    |
|   virtual or abstract.                           |      |   virtual or abstract.                       |
|                                                  |      |                                              |
| - Can't have a null value.                       |      | - Can have a null value.                     |
|                                                  |      |                                              |
| - During an assignment, the contents are         |      | - Assignment is happening                    |
|   copied from one variable to another.           |      |   by reference.                              |
+--------------------------------------------------+------+----------------------------------------------+ 
```

* * *

有关更多信息，请查看以下内容：

*   [类和结构](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/)（官方文档）。
*   [在 Class 和 Struct 之间进行选择](https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/choosing-between-class-and-struct)（官方文档）。

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2012-06-14T16:57:23.073

除了其他答案中描述的所有差异之外：

1.  结构[不能有显式的无参数构造函数](https://stackoverflow.com/q/333829/1709587)，而类可以
2.  结构[不能有析构函数](https://stackoverflow.com/q/8276036/1709587)，而类可以
3.  结构[不能](https://stackoverflow.com/q/1222935/1709587)从另一个结构或类继承，而一个类可以从另一个类继承。（结构和类都可以从接口实现。）

如果您正在观看解释所有差异的视频，您可以查看*[第 29 部分 - C# 教程 - C# 中类和结构之间的差异](http://csharp-video-tutorials.blogspot.com/2012/06/part-29-c-tutorial-difference-between.html)*。

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2018-07-26T10:43:00.110

|  | 结构 | 班级 |
| --- | --- | --- |
| 类型 | 值类型 | 参考型 |
| 在哪里 | 在包含类型的堆栈/内联 | 堆上 |
| 重新分配 | 堆栈展开/包含类型被释放 | 垃圾收集 |
| 数组 | 内联，元素是值类型的实际实例 | 不合时宜，元素只是对驻留在堆上的引用类型的实例的引用 |
| 德尔成本 | 廉价分配-解除分配 | 昂贵的分配-解除分配 |
| 内存使用情况 | 转换为引用类型或它们实现的接口之一 时装箱，转换回值类型时取消
装箱（负面影响，因为框是在堆上分配并被垃圾回收的对象） | 没有装箱-拆箱 |
| 作业 | 复制整个数据 | 复制参考 |
| 更改为实例 | 不影响其任何副本 | 影响所有指向实例的引用 |
| 可变性 | 应该是不可变的 | 可变的 |
| 人口 | 在某些情况下 | 框架中的大多数类型应该是类 |
| 寿命 | 昙花一现 | 长寿 |
| 析构函数 | 不能有 | 可以有 |
| 遗产 | 仅来自一个界面 | 全力支持 |
| 多态性 | 不 | 是的 |
| 密封 | 是的 | 何时有`sealed`关键字 (C#) 或`Sealed`属性 (F#) |
| 构造函数 | 不能有显式的无参数构造函数 | 任何构造函数 |
| 空赋值 | 标有可空问号时 | ^(是（在 C# 8+ 和 F# 5+ 1)中标有可为空的问号时） |
| 抽象的 | 不 | 何时有`abstract`关键字 (C#) 或`AbstractClass`属性 (F#) |
| 成员访问修饰符 | `public`, `private`,`internal` | `public`, `protected`, `internal`, `protected internal`,`private protected` |

¹`null` F# 中不鼓励使用，请改用Option[类型](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/options)。

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2008-08-16T12:16:50.450

类的实例存储在托管堆上。所有“包含”实例的变量都只是对堆上实例的引用。将对象传递给方法会导致传递引用的副本，而不是对象本身。

结构（技术上是值类型）存储在任何使用它们的地方，就像原始类型一样。运行时可以随时复制内容，而无需调用自定义的复制构造函数。将值类型传递给方法涉及复制整个值，同样无需调用任何可定制的代码。

通过 C++/CLI 名称可以更好地区分：“ref class”是第一个描述的类，“value class”是第二个描述的类。C# 使用的关键字“class”和“struct”只是必须学习的东西。

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2009-11-06T08:02:48.280

**结构与类**

结构是值类型，因此它存储在堆栈中，而类是引用类型并存储在堆中。

结构不支持继承和多态，但类支持两者。

默认情况下，所有结构成员都是公共的，但类成员默认情况下是私有的。

由于结构是值类型，我们不能将 null 分配给结构对象，但对于类则不是这样。

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2015-08-25T13:00:07.357

为了补充其他答案，有一个值得注意的根本区别，那就是数据如何存储在数组中，因为这会对性能产生重大影响。

*   使用结构，数组包含结构的实例
*   对于类，数组包含指向内存中其他位置的类实例的指针

所以一个结构数组在内存中看起来像这样

`[struct][struct][struct][struct][struct][struct][struct][struct]`

而一组类看起来像这样

`[pointer][pointer][pointer][pointer][pointer][pointer][pointer][pointer]`

对于类数组，您感兴趣的值不会存储在数组中，而是存储在内存中的其他位置。

对于绝大多数应用程序来说，这种差异并不重要，但是，在高性能代码中，这会影响内存中数据的局部性，并对 CPU 缓存的性能产生很大影响。当您可以/应该使用结构时使用类将大大增加 CPU 上缓存未命中的数量。

现代 CPU 做的最慢的事情不是处理数字，而是从内存中获取数据，并且 L1 缓存命中比从 RAM 中读取数据快很多倍。

这是您可以测试的一些代码。在我的机器上，遍历类数组需要比结构数组长约 3 倍的时间。

```
 private struct PerformanceStruct
    {
        public int i1;
        public int i2;
    }

    private class PerformanceClass
    {
        public int i1;
        public int i2;
    }

    private static void DoTest()
    {
        var structArray = new PerformanceStruct[100000000];
        var classArray = new PerformanceClass[structArray.Length];

        for (var i = 0; i < structArray.Length; i++)
        {
            structArray[i] = new PerformanceStruct();
            classArray[i] = new PerformanceClass();
        }

        long total = 0;
        var sw = new Stopwatch();
        sw.Start();
        for (var loops = 0; loops < 100; loops++)
        for (var i = 0; i < structArray.Length; i++)
        {
            total += structArray[i].i1 + structArray[i].i2;
        }

        sw.Stop();
        Console.WriteLine($"Struct Time: {sw.ElapsedMilliseconds}");
        sw = new Stopwatch();
        sw.Start();
        for (var loops = 0; loops < 100; loops++)
        for (var i = 0; i < classArray.Length; i++)
        {
            total += classArray[i].i1 + classArray[i].i2;
        }

        Console.WriteLine($"Class Time: {sw.ElapsedMilliseconds}");
    } 
```

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2008-08-16T08:27:14.457

好吧，对于初学者来说，结构是通过值而不是通过引用传递的。结构适用于相对简单的数据结构，而从架构的角度来看，类通过多态性和继承具有更大的灵活性。

其他人可能会给你比我更多的细节，但是当我想要的结构很简单时，我会使用结构。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2017-08-02T13:34:43.583

只是为了让它完整，使用`Equals`方法时还有另一个区别，它被所有类和结构继承。

假设我们有一个类和一个结构：

```
class A{
  public int a, b;
}
struct B{
  public int a, b;
} 
```

在 Main 方法中，我们有 4 个对象。

```
static void Main{
  A c1 = new A(), c2 = new A();
  c1.a = c1.b = c2.a = c2.b = 1;
  B s1 = new B(), s2 = new B();
  s1.a = s1.b = s2.a = s2.b = 1;
} 
```

然后：

```
s1.Equals(s2) // true
s1.Equals(c1) // false
c1.Equals(c2) // false
c1 == c2 // false 
```

**因此**，结构适用于类似数字的对象，例如点（保存 x 和 y 坐标）。课程适合其他人。即使两个人的名字、身高、体重……相同，他们仍然是两个人。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2011-07-25T05:24:46.203

1.  在类中声明的事件通过 lock(this) 自动锁定其 += 和 -= 访问，以使它们成为线程安全的（静态事件被锁定在类的类型上）。在结构中声明的事件不会自动锁定其 += 和 -= 访问权限。结构的 lock(this) 不起作用，因为您只能锁定引用类型表达式。

2.  创建结构实例不会导致垃圾回收（除非构造函数直接或间接创建引用类型实例），而创建引用类型实例会导致垃圾回收。

3.  结构始终具有内置的公共默认构造函数。

    ```
    class DefaultConstructor
    {
        static void Eg()
        {
            Direct     yes = new   Direct(); // Always compiles OK
            InDirect maybe = new InDirect(); // Compiles if constructor exists and is accessible
            //...
        }
    } 
    ```

    这意味着结构始终是可实例化的，而类可能不是，因为它的所有构造函数都可以是私有的。

    ```
    class NonInstantiable
    {
        private NonInstantiable() // OK
        {
        }
    }

    struct Direct
    {
        private Direct() // Compile-time error
        {
        }
    } 
    ```

4.  结构不能有析构函数。析构函数只是 object.Finalize 变相的覆盖，而作为值类型的结构不受垃圾回收的影响。

    ```
    struct Direct
    {
        ~Direct() {} // Compile-time error
    }
    class InDirect
    {
        ~InDirect() {} // Compiles OK
    }

    And the CIL for ~Indirect() looks like this:

    .method family hidebysig virtual instance void
            Finalize() cil managed
    {
      // ...
    } // end of method Indirect::Finalize 
    ```

5.  结构是隐式密封的，类不是。
    结构不能是抽象的，类可以。
    结构不能在其构造函数中调用 : base() 而没有显式基类的类可以。
    一个结构不能扩展另一个类，一个类可以。
    结构不能声明类可以声明的受保护成员（例如，字段、嵌套类型）。
    结构不能声明抽象函数成员，抽象类可以。
    结构不能声明虚函数成员，类可以。
    结构不能声明密封函数成员，类可以。
    结构不能声明覆盖函数成员，类可以。
    此规则的一个例外是结构可以覆盖 System.Object 的虚拟方法，即 Equals()、GetHashCode() 和 ToString()。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2015-09-23T11:32:37.447

如前所述：类是引用类型，而结构是具有所有后果的值类型。

作为规则框架设计指南建议在以下情况下使用结构而不是类：

*   它的实例大小小于 16 字节
*   它在逻辑上表示单个值，类似于原始类型（int、double 等）
*   它是不可变的
*   不必经常装箱

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2014-05-29T09:45:03.117

除了访问说明符的基本区别，以及上面提到的几个，我想补充一些主要的区别，包括上面提到的几个和输出的代码示例，这将使参考和价值更加清晰

**结构：**

*   是值类型，不需要堆分配。
*   内存分配不同，存放在栈中
*   适用于小型数据结构
*   影响性能，当我们将值传递给方法时，我们将整个数据结构传递给堆栈。
*   构造函数只返回结构值本身（通常在堆栈上的临时位置），然后根据需要复制该值
*   每个变量都有自己的数据副本，对一个变量的操作不可能影响另一个变量。
*   不支持用户指定的继承，它们隐式继承自类型对象

**班级：**

*   引用类型值
*   存储在堆中
*   存储对动态分配对象的引用
*   使用 new 运算符调用构造函数，但不会在堆上分配内存
*   多个变量可能引用同一个对象
*   对一个变量的操作可能会影响另一个变量引用的对象

**代码示例**

```
 static void Main(string[] args)
    {
        //Struct
        myStruct objStruct = new myStruct();
        objStruct.x = 10;
        Console.WriteLine("Initial value of Struct Object is: " + objStruct.x);
        Console.WriteLine();
        methodStruct(objStruct);
        Console.WriteLine();
        Console.WriteLine("After Method call value of Struct Object is: " + objStruct.x);
        Console.WriteLine();

        //Class
        myClass objClass = new myClass(10);
        Console.WriteLine("Initial value of Class Object is: " + objClass.x);
        Console.WriteLine();
        methodClass(objClass);
        Console.WriteLine();
        Console.WriteLine("After Method call value of Class Object is: " + objClass.x);
        Console.Read();
    }
    static void methodStruct(myStruct newStruct)
    {
        newStruct.x = 20;
        Console.WriteLine("Inside Struct Method");
        Console.WriteLine("Inside Method value of Struct Object is: " + newStruct.x);
    }
    static void methodClass(myClass newClass)
    {
        newClass.x = 20;
        Console.WriteLine("Inside Class Method");
        Console.WriteLine("Inside Method value of Class Object is: " + newClass.x);
    }
    public struct myStruct
    {
        public int x;
        public myStruct(int xCons)
        {
            this.x = xCons;
        }
    }
    public class myClass
    {
        public int x;
        public myClass(int xCons)
        {
            this.x = xCons;
        }
    } 
```

**输出**

结构对象的初始值为：10

Inside Struct Method Inside Method Struct Object 的值为：20

**结构对象的方法调用后值为：10**

类对象的初始值为：10

类对象内部方法的内部方法值为：20

**类对象的方法调用后值为：20**

在这里您可以清楚地看到按值调用和按引用调用之间的区别。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-12-18T08:21:36.527

有一个有趣的“类 vs 结构”难题的案例 - 当您需要从方法返回多个结果时：选择使用哪个。如果你知道 ValueTuple 的故事 - 你知道 ValueTuple (struct) 被添加是因为它应该比 Tuple (class) 更有效。但它在数字上意味着什么？两个测试：一个是具有 2 个字段的结构/类，另一个是具有 8 个字段的结构/类（维度大于 4 - 就处理器滴答而言，类应该比结构更有效，但当然也应该考虑 GC 负载）。

PS 特定案例“带有集合的结构或类”的另一个基准是：[https ://stackoverflow.com/a/45276657/506147](https://stackoverflow.com/a/45276657/506147)

```
BenchmarkDotNet=v0.10.10, OS=Windows 10 Redstone 2 [1703, Creators Update] (10.0.15063.726)
Processor=Intel Core i5-2500K CPU 3.30GHz (Sandy Bridge), ProcessorCount=4
Frequency=3233540 Hz, Resolution=309.2586 ns, Timer=TSC
.NET Core SDK=2.0.3
  [Host] : .NET Core 2.0.3 (Framework 4.6.25815.02), 64bit RyuJIT
  Clr    : .NET Framework 4.7 (CLR 4.0.30319.42000), 64bit RyuJIT-v4.7.2115.0
  Core   : .NET Core 2.0.3 (Framework 4.6.25815.02), 64bit RyuJIT

            Method |  Job | Runtime |     Mean |     Error |    StdDev |      Min |      Max |   Median | Rank |  Gen 0 | Allocated |
------------------ |----- |-------- |---------:|----------:|----------:|---------:|---------:|---------:|-----:|-------:|----------:|
  TestStructReturn |  Clr |     Clr | 17.57 ns | 0.1960 ns | 0.1834 ns | 17.25 ns | 17.89 ns | 17.55 ns |    4 | 0.0127 |      40 B |
   TestClassReturn |  Clr |     Clr | 21.93 ns | 0.4554 ns | 0.5244 ns | 21.17 ns | 23.26 ns | 21.86 ns |    5 | 0.0229 |      72 B |
 TestStructReturn8 |  Clr |     Clr | 38.99 ns | 0.8302 ns | 1.4097 ns | 37.36 ns | 42.35 ns | 38.50 ns |    8 | 0.0127 |      40 B |
  TestClassReturn8 |  Clr |     Clr | 23.69 ns | 0.5373 ns | 0.6987 ns | 22.70 ns | 25.24 ns | 23.37 ns |    6 | 0.0305 |      96 B |
  TestStructReturn | Core |    Core | 12.28 ns | 0.1882 ns | 0.1760 ns | 11.92 ns | 12.57 ns | 12.30 ns |    1 | 0.0127 |      40 B |
   TestClassReturn | Core |    Core | 15.33 ns | 0.4343 ns | 0.4063 ns | 14.83 ns | 16.44 ns | 15.31 ns |    2 | 0.0229 |      72 B |
 TestStructReturn8 | Core |    Core | 34.11 ns | 0.7089 ns | 1.4954 ns | 31.52 ns | 36.81 ns | 34.03 ns |    7 | 0.0127 |      40 B |
  TestClassReturn8 | Core |    Core | 17.04 ns | 0.2299 ns | 0.2150 ns | 16.68 ns | 17.41 ns | 16.98 ns |    3 | 0.0305 |      96 B | 
```

代码测试：

```
using System;
using System.Text;
using System.Collections.Generic;
using BenchmarkDotNet.Attributes;
using BenchmarkDotNet.Attributes.Columns;
using BenchmarkDotNet.Attributes.Exporters;
using BenchmarkDotNet.Attributes.Jobs;
using DashboardCode.Routines.Json;

namespace Benchmark
{
    //[Config(typeof(MyManualConfig))]
    [RankColumn, MinColumn, MaxColumn, StdDevColumn, MedianColumn]
    [ClrJob, CoreJob]
    [HtmlExporter, MarkdownExporter]
    [MemoryDiagnoser]
    public class BenchmarkStructOrClass
    {
        static TestStruct testStruct = new TestStruct();
        static TestClass testClass = new TestClass();
        static TestStruct8 testStruct8 = new TestStruct8();
        static TestClass8 testClass8 = new TestClass8();
        [Benchmark]
        public void TestStructReturn()
        {
            testStruct.TestMethod();
        }

        [Benchmark]
        public void TestClassReturn()
        {
            testClass.TestMethod();
        }

        [Benchmark]
        public void TestStructReturn8()
        {
            testStruct8.TestMethod();
        }

        [Benchmark]
        public void TestClassReturn8()
        {
            testClass8.TestMethod();
        }

        public class TestStruct
        {
            public int Number = 5;
            public struct StructType<T>
            {
                public T Instance;
                public List<string> List;
            }

            public int TestMethod()
            {
                var s = Method1(1);
                return s.Instance;
            }

            private StructType<int> Method1(int i)
            {
                return Method2(++i);
            }

            private StructType<int> Method2(int i)
            {
                return Method3(++i);
            }

            private StructType<int> Method3(int i)
            {
                return Method4(++i);
            }

            private StructType<int> Method4(int i)
            {
                var x = new StructType<int>();
                x.List = new List<string>();
                x.Instance = ++i;
                return x;
            }
        }

        public class TestClass
        {
            public int Number = 5;
            public class ClassType<T>
            {
                public T Instance;
                public List<string> List;
            }

            public int TestMethod()
            {
                var s = Method1(1);
                return s.Instance;
            }

            private ClassType<int> Method1(int i)
            {
                return Method2(++i);
            }

            private ClassType<int> Method2(int i)
            {
                return Method3(++i);
            }

            private ClassType<int> Method3(int i)
            {
                return Method4(++i);
            }

            private ClassType<int> Method4(int i)
            {
                var x = new ClassType<int>();
                x.List = new List<string>();
                x.Instance = ++i;
                return x;
            }
        }

        public class TestStruct8
        {
            public int Number = 5;
            public struct StructType<T>
            {
                public T Instance1;
                public T Instance2;
                public T Instance3;
                public T Instance4;
                public T Instance5;
                public T Instance6;
                public T Instance7;
                public List<string> List;
            }

            public int TestMethod()
            {
                var s = Method1(1);
                return s.Instance1;
            }

            private StructType<int> Method1(int i)
            {
                return Method2(++i);
            }

            private StructType<int> Method2(int i)
            {
                return Method3(++i);
            }

            private StructType<int> Method3(int i)
            {
                return Method4(++i);
            }

            private StructType<int> Method4(int i)
            {
                var x = new StructType<int>();
                x.List = new List<string>();
                x.Instance1 = ++i;
                return x;
            }
        }

        public class TestClass8
        {
            public int Number = 5;
            public class ClassType<T>
            {
                public T Instance1;
                public T Instance2;
                public T Instance3;
                public T Instance4;
                public T Instance5;
                public T Instance6;
                public T Instance7;
                public List<string> List;
            }

            public int TestMethod()
            {
                var s = Method1(1);
                return s.Instance1;
            }

            private ClassType<int> Method1(int i)
            {
                return Method2(++i);
            }

            private ClassType<int> Method2(int i)
            {
                return Method3(++i);
            }

            private ClassType<int> Method3(int i)
            {
                return Method4(++i);
            }

            private ClassType<int> Method4(int i)
            {
                var x = new ClassType<int>();
                x.List = new List<string>();
                x.Instance1 = ++i;
                return x;
            }
        }
    }
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-08-16T14:03:02.873

> 结构是实际值 - 它们可以为空但绝不为空

这是真的，但也请注意，从 .NET 2 开始，结构支持 Nullable 版本，并且 C# 提供了一些语法糖以使其更易于使用。

```
int? value = null;
value  = 1; 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2011-12-02T00:10:15.807

原始值类型或结构类型的每个变量或字段都包含该类型的唯一实例，包括其所有字段（公共和私有）。相比之下，引用类型的变量或字段可能为空，或者可能引用存储在其他地方的对象，也可能存在任何数量的其他引用。结构的字段将与该结构类型的变量或字段存储在同一位置，这些变量或字段可能位于堆栈上，也可能是另一个堆对象*的一部分。*

创建原始值类型的变量或字段将使用默认值创建它；创建结构类型的变量或字段将创建一个新实例，并以默认方式创建其中的所有字段。创建引用类型的新*实例*将首先以默认方式创建其中的所有字段，然后根据类型运行可选的附加代码。

将原始类型的一个变量或字段复制到另一个将复制该值。将结构类型的一个变量或字段复制到另一个会将前一个实例的所有字段（公共和私有）复制到后一个实例。将引用类型的一个变量或字段复制到另一个将导致后者引用与前者相同的实例（如果有）。

需要注意的是，在某些语言（如 C++）中，类型的语义行为与其存储方式无关，但对于 .NET 而言并非如此。如果一个类型实现了可变值语义，则将该类型的一个变量复制到另一个变量会将第一个变量的属性复制到另一个实例，由第二个实例引用，并使用第二个实例的成员对其进行变异将导致第二个实例被更改，但不是第一个。如果一个类型实现了可变引用语义，将一个变量复制到另一个变量并使用第二个变量的成员来改变对象将影响第一个变量引用的对象；具有不可变语义的类型不允许突变，因此复制是否创建新实例或创建对第一个实例的另一个引用在语义上并不重要。

在 .NET 中，值类型可以实现上述任何语义，前提是它们的所有字段都可以这样做。然而，引用类型只能实现可变引用语义或不可变语义；具有可变引用类型字段的值类型仅限于实现可变引用语义或奇怪的混合语义。

# language-agnostic - 什么是装箱和拆箱，权衡取舍是什么？

> ID：13055
> 
> 赞同：144
> 
> 时间：2008-08-16T08:34:25.143
> 
> 标签：language-agnostic, boxing, glossary, unboxing

我正在寻找一个清晰、简洁和准确的答案。

理想情况下作为实际答案，尽管欢迎提供良好解释的链接。

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2008-08-24T20:35:12.520

盒装值是对[原始类型](http://en.wikipedia.org/wiki/Primitive_type)*进行最小包装的[数据结构。](http://en.wikipedia.org/wiki/Data_structure)装箱值通常存储为指向[堆上对象的](http://en.wikipedia.org/wiki/Dynamic_memory_allocation)指针。

因此，装箱的值使用更多的内存，并且至少需要两次内存查找来访问：一次获取指针，另一次跟随该指针指向原语。显然，这不是您在内部循环中想要的那种东西。另一方面，盒装值通常与系统中的其他类型更好地配合使用。由于它们是语言中的一流数据结构，因此它们具有其他数据结构所具有的预期元数据和结构。

在 Java 和 Haskell 中，泛型集合不能包含未装箱的值。.NET 中的泛型集合可以保存未装箱的值而不会受到惩罚。Java 的泛型仅用于编译时类型检查，.NET 将为[在运行时实例化的每个泛型类型生成特定的类](http://msdn.microsoft.com/en-us/library/f4a6ta2h.aspx)。

Java 和 Haskell 有未装箱的数组，但它们明显不如其他集合方便。但是，当需要峰值性能时，避免装箱和拆箱的开销是值得的。

* 对于本次讨论，原始值是可以存储在[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)上的任何值，而不是存储为指向堆上值的指针。通常这只是机器类型（整数、浮点数等）、结构，有时是静态大小的数组。.NET-land 称它们为值类型（与引用类型相反）。Java 人称它们为原始类型。Haskellions 只是称它们为未装箱的。

** 在这个答案中，我还关注 Java、Haskell 和 C#，因为这就是我所知道的。值得一提的是，Python、Ruby 和 Javascript 都有专门的装箱值。这也被称为“一切都是对象”方法***。

*** 警告：在某些情况下，足够先进的编译器/JIT 可以实际检测到在查看源代码时被语义装箱的值，在运行时可以安全地成为未装箱的值。本质上，多亏了出色的语言实现者，您的盒子有时是免费的。

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2008-08-16T08:44:40.223

来自[C# 3.0 简而言之](http://books.google.com/books?id=_Y0rWd-Q2xkC&pg=PA81&vq=boxing&source=gbs_search_r&cad=1_1&sig=ACfU3U0SIw4v8UZzMH3f5xImIyHZHD90sA#PPA82,M1)：

> 装箱是将值类型转换为引用类型的行为：

```
int x = 9; 
object o = x; // boxing the int 
```

> 拆箱是......相反：

```
// unboxing o
object o = 9; 
int x = (int)o; 
```

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2008-08-16T08:39:41.700

装箱和拆箱是将原始值转换为面向对象的包装类（装箱）或将值从面向对象的包装类转换回原始值（拆箱）的过程。

例如，在 java 中，如果要将`int`值存储在 a 中，则可能需要将其转换为`Integer`（装箱），`Collection`因为原语不能存储在 a 中`Collection`，只能存储在对象中。但是，当您想将其从 中取回时，`Collection`您可能希望将值作为 an`int`而不是 an，`Integer`因此您可以将其拆箱。

装箱和拆箱本身并不*坏*，但它是一种权衡。根据语言实现，它可能比仅使用原语更慢且更占用内存。但是，它也可能允许您使用更高级别的数据结构并在代码中实现更大的灵活性。

如今，它最常在 Java（和其他语言）的“自动装箱/自动拆箱”功能的上下文中讨论。这是一个以[java 为中心的 autoboxing 解释](http://java.sun.com/j2se/1.5.0/docs/guide/language/autoboxing.html)。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2008-08-16T08:41:34.380

在 .Net 中：

通常，您不能依赖函数将使用的变量类型，因此您需要使用从最低公分母扩展的对象变量 - 在 .Net 中 this 是`object`.

然而`object`是一个类并将其内容存储为参考。

```
List<int> notBoxed = new List<int> { 1, 2, 3 };
int i = notBoxed[1]; // this is the actual value

List<object> boxed = new List<object> { 1, 2, 3 };
int j = (int) boxed[1]; // this is an object that can be 'unboxed' to an int 
```

虽然它们都包含相同的信息，但第二个列表更大且更慢。第二个列表中的每个值实际上都是对`object`包含`int`.

这被称为装箱，因为`int`被`object`. 当它的回退时`int`，它被取消装箱 - 转换回它的价值。

对于值类型（即 all `structs`），这很慢，并且可能会使用更多空间。

对于引用类型（即 all `classes`），这不是什么问题，因为它们无论如何都是作为引用存储的。

装箱值类型的另一个问题是，您处理的是盒子而不是值并不明显。当您比较两个`structs`时，您正在比较值，但是当您比较两个时`classes`（默认情况下）您正在比较参考 - 即这些是同一个实例吗？

在处理装箱值类型时，这可能会令人困惑：

```
int a = 7;
int b = 7;

if(a == b) // Evaluates to true, because a and b have the same value

object c = (object) 7;
object d = (object) 7;

if(c == d) // Evaluates to false, because c and d are different instances 
```

很容易解决：

```
if(c.Equals(d)) // Evaluates to true because it calls the underlying int's equals

if(((int) c) == ((int) d)) // Evaluates to true once the values are cast 
```

然而，在处理装箱值时要小心另一件事。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-05T21:16:55.583

`Boxing`是将值类型转换为引用类型的过程。而`Unboxing`将引用类型转换为值类型。

```
EX: int i = 123;
    object o = i;// Boxing
    int j = (int)o;// UnBoxing 
```

值类型是：`int`,`char`和`structures`, `enumerations`。引用类型为 ：`Classes`、`interfaces`、`arrays`和`strings``objects`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-16T09:24:15.527

.NET FCL 通用集合：

```
List<T>
Dictionary<TKey, UValue>
SortedDictionary<TKey, UValue>
Stack<T>
Queue<T>
LinkedList<T> 
```

都是为了克服以前的集合实现中的装箱和拆箱的性能问题而设计的。

有关更多信息，请参阅第 16 章，[*通过 C# 进行 CLR（第 2 版）*](http://books.google.com/books?id=C-V_AAAACAAJ&dq=clr+via+c%23&ei=tyKnSPqSI5T2iQHzwJTECQ)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-21T11:20:26.940

装箱和拆箱有助于将值类型视为对象。装箱意味着将值转换为对象引用类型的实例。例如，`Int`是一个类，`int`是一个数据类型。转换`int`成是装箱`Int`的一个例子，而转换`Int`成`int`是拆箱。这个概念有助于垃圾收集，另一方面，拆箱将对象类型转换为值类型。

```
int i=123;
object o=(object)i; //Boxing

o=123;
i=(int)o; //Unboxing. 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-16T14:54:35.267

盒子的语言无关含义只是“一个对象包含一些其他值”。

从字面上看，*装箱*是将一些值放入框中的操作。更具体地说，它是*创建*一个包含该值的新框的操作。装箱后，可以通过取消装箱从盒子对象中访问装箱后的*值*。

请注意，许多编程语言中的对象（不是特定于 OOP 的）是关于*identities*的，但值不是。两个对象是相同的iff。它们具有在程序语义中无法区分的身份。值也可以相同（通常在某些相等运算符下），但我们不会将它们区分为“一个”或“两个”*唯一*值。

提供盒子主要是为了将副作用（通常是突变）与对象的状态区分开来，否则用户可能看不到这些状态。

默认情况下，一种语言可能会限制访问对象的允许方式并隐藏对象的身份。例如，典型的 Lisp 方言在对象和值之间没有明确的区别。因此，实现可以自由地共享对象的底层存储，直到对象发生一些变异操作（因此必须在操作后将对象从共享实例中“分离”才能使效果可见，即变异存储在对象中的值可能与具有旧值的其他对象不同）。这种技术有时被称为*对象实习*。

如果对象是共享的而不需要频繁的变异，则实习使程序在运行时的内存效率更高，代价是：

*   用户无法区分对象的身份。
    *   在某些副作用实际发生之前，没有办法识别一个对象并确保它具有明确独立于*程序*中其他对象的状态（并且实现不会积极地同时进行实习；尽管这应该是罕见的情况）。
*   在互操作方面可能存在更多问题，需要为不同的操作识别不同的对象。
*   此类假设存在错误的风险，因此应用实习实际上会使性能变得更糟。
    *   这取决于编程范式。频繁改变对象的命令式编程肯定不适用于实习。
*   依赖于 COW（写时复制）来确保实习的实现可能会在并发环境中导致严重的性能下降。
    *   即使是专门针对一些内部数据结构的本地共享也可能很糟糕。例如，出于这个原因，ISO C++ 11 不允许共享内部元素`std::basic_string`，即使以破坏至少一个主流实现 (libstdc++) 上的 ABI 为代价。
*   装箱和拆箱会导致性能损失。这一点很明显，尤其是当这些操作可以手动避免但实际上对优化器来说并不容易时。但是，成本的具体衡量取决于（基于每个实施甚至每个程序）。

可变单元，即盒子，是完善的设施，可以解决上面列出的第 1 和第 2 个问题。此外，可以有不可变的盒子来实现函数式语言中的赋值。实际例子见[SRFI-111](https://srfi.schemers.org/srfi-111/srfi-111.html)。

使用可变单元格作为按值调用策略的函数参数实现了在调用者和被调用者之间共享突变的可见效果。从这个意义上说，盒子包含的对象实际上是“被共享调用的”。

有时，这些框被称为引用（这在技术上是错误的），因此共享语义被命名为“引用语义”。这是不正确的，因为并非所有引用都可以传播可见的副作用（例如不可变引用）。引用更多地是关于*通过间接*公开访问，而框是努力公开访问的*最小*细节，例如是否间接（这是不感兴趣的，最好通过实现避免）。

此外，“价值语义”在这里是无关紧要的。值不反对引用，也不反对框。上面所有的讨论都是基于价值调用策略。对于其他人（如按名称调用或按需要调用），不需要框来以这种方式共享对象内容。

Java 可能是第一个使这些特性在业界流行的编程语言。不幸的是，这个话题似乎有很多不好的后果：

*   整体编程范式不适合设计。
*   实际上，实习仅限于特定对象，如不可变字符串，并且经常指责（自动）装箱和拆箱的成本。
*   基本的 PL 知识，如语言规范中术语“对象”（作为“类的实例”）的定义，以及参数传递的描述，与[原始](https://classes.cs.uoregon.edu/14S/cis607pl/Papers/fundamental-1967.pdf)的、[众所周知的](https://en.wikipedia.org/wiki/Fundamental_Concepts_in_Programming_Languages)含义相比，在程序员采用Java。
    *   至少 CLR 语言遵循类似的说法。

有关实现的更多提示（以及[对此答案](https://stackoverflow.com/a/25324/2307646)的评论）：

*   将对象放在调用栈还是堆上是一个实现细节，与盒子的实现无关。
    *   一些语言实现不维护一个连续的存储作为调用堆栈。
    *   某些语言实现甚至不使（每个线程）激活记录成为线性堆栈。
    *   一些语言实现确实在空闲存储（“堆”）上分配堆栈，并在堆栈和堆之间来回传输帧切片。
    *   这些策略与盒子无关。例如，许多 Scheme 实现都有盒子，具有不同的激活记录布局，包括上面列出的所有方式。
*   除了技术上的不准确之外，“一切都是对象”的说法与拳击无关。
    *   Python、Ruby 和 JavaScript 都使用潜在类型（默认情况下），因此所有引用某些对象的标识符都将评估为具有相同静态类型的值。Scheme也是如此。
    *   一些 JavaScript 和 Ruby 实现使用所谓的[NaN-boxing](https://softwareengineering.stackexchange.com/questions/185406/what-is-the-purpose-of-nan-boxing)来允许内联分配一些对象。其他一些（包括[CPython](https://softwareengineering.stackexchange.com/a/185431/154697)）没有。使用 NaN 装箱，普通`double`对象无需拆箱即可访问其值，而某些其他类型的值可以装箱到宿主`double`对象中，并且没有引用`double`或装箱后的值。使用朴素指针方法，宿主对象指针的值就像`PyObject*`是一个对象引用，它持有一个盒子，盒子的装箱值存储在动态分配的空间中。
    *   [至少在 Python 中](https://stackoverflow.com/questions/865911/is-everything-an-object-in-python-like-ruby)，对象不是“一切”。除非您谈论与特定实现的互操作性，否则它们也不称为“装箱值”。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2008-09-19T12:59:41.143

像其他任何事情一样，如果不小心使用，自动装箱可能会出现问题。经典的是最终得到一个 NullPointerException 并且无法追踪它。即使使用调试器。试试这个：

```
public class TestAutoboxNPE
{
    public static void main(String[] args)
    {
        Integer i = null;

        // .. do some other stuff and forget to initialise i

        i = addOne(i);           // Whoa! NPE!
    }

    public static int addOne(int i)
    {
        return i + 1;
    }
} 
```

# c# - ref、val 和 out 对方法参数的含义是什么？

> ID：13060
> 
> 赞同：22
> 
> 时间：2008-08-16T08:46:16.633
> 
> 标签：c#, .net, vb.net

我正在寻找一个清晰、简洁和准确的答案。

理想情况下作为实际答案，尽管欢迎提供良好解释的链接。

这也适用于 VB.Net，但关键字不同 -`ByRef`和`ByVal`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-08-16T12:06:17.337

默认情况下（在 C# 中），将对象传递给函数实际上会将引用的副本传递给该对象。更改参数本身只会更改参数中的值，而不是指定的变量。

```
void Test1(string param)
{
    param = "new value";
}

string s1 = "initial value";
Test1(s1);
// s1 == "initial value" 
```

使用`out`或`ref`传递对函数调用中指定的变量的引用。`out`对or参数值的任何更改`ref`都将传回给调用者。

两者`out`和`ref`行为相同，除了一点点不同：`ref`参数需要在调用之前初始化，而`out`参数可以不初始化。通过扩展，`ref`参数保证在方法开始时被初始化，而`out`参数被视为未初始化。

```
void Test2(ref string param)
{
    param = "new value";
}

void Test3(out string param)
{
    // Use of param here will not compile
    param = "another value";
}

string s2 = "initial value";
string s3;
Test2(ref s2);
// s2 == "new value"
// Test2(ref s3); // Passing ref s3 will not compile
Test3(out s2);
// s2 == "another value"
Test3(out s3);
// s3 == "another value" 
```

**编辑**：正如[dp](https://stackoverflow.com/questions/13060/what-do-ref-val-and-out-mean-on-method-parameters#13105 "dp")指出的那样，和之间的区别`out`仅`ref`由 C# 编译器强制执行，而不是由 CLR 强制执行。据我所知，VB 没有等效的 for`out`并且仅实现`ref`(as `ByRef`)，与 CLR 的支持相匹配。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-16T12:32:38.983

关于 ref 与 out 的附加说明：两者之间的区别由 C# 编译器强制执行。CLR 不区分 out 和 ref。这意味着您不能有两个方法的签名仅由 out 或 ref 不同

```
void foo(int value) {}

// Only one of the following would be allowed

// valid to overload with ref
void foo(ref int value) {}

// OR with out
void foo(out int value) {} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-16T08:49:21.760

`out`表示参数将由以下方法初始化：

```
int result; //not initialised

if( int.TryParse( "123", out result ) )
   //result is now 123
else
   //if TryParse failed result has still be 
   // initialised to its default value (0) 
```

`ref`将强制传递底层引用：

```
void ChangeMyClass1( MyClass input ) {
   input.MyProperty = "changed by 1";
   input = null;
   //can't see input anymore ... 
   // I've only nulled my local scope's reference
}

void ChangeMyClass2( ref MyClass input ) {
   input.MyProperty = "changed by 2";
   input = null;
   //the passed reference is now null too.
}

MyClass tester = new MyClass { MyProperty = "initial value" };

ChangeMyClass1( tester );
// now tester.MyProperty is "changed by 1"

ChangeMyClass2( ref tester );
// now tester is null 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-16T09:21:35.563

我自己在 stackoverflow 上的一个问题也处理了这个话题。
它处理不同类型语言中的[“按引用传递”和“按值传递” ，](https://stackoverflow.com/questions/2027/pass-by-reference-or-pass-by-value)[包括 c#，](https://stackoverflow.com/questions/2027/pass-by-reference-or-pass-by-value#2554)所以也许你也可以在那里找到一些额外的信息。

基本上它归结为：

*   ref：带有ref关键字的参数将通过*引用传递*
*   out：带有 out 关键字的参数将被视为*输出参数*

但这确实是您可以给出的最基本的答案，因为它比此处说明的要复杂一些

# delphi - 现有 .NET 开发人员的 Delphi 资源

> ID：13086
> 
> 赞同：5
> 
> 时间：2008-08-16T10:24:05.797
> 
> 标签：delphi

任何人都可以为希望获得 Delphi 语言高级概述的 .NET 开发人员推荐一些体面的资源吗？

我们即将收购一家小型企业，其主要产品是在德尔福开发的，我想积累足够的知识来与他们交谈。

书籍、网站等都受到赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-16T11:46:16.050

*   [DelphiBasics](http://www.delphibasics.co.uk)很好地概述了基本语法、库函数等。
*   [Essential Delphi](http://www.marcocantu.com/edelphi/default.htm)是 Marco Cantu 的免费电子书，它应该提供一个很好的概述，也包括 VCL

如果您遇到特定问题，也可以在此处或 Delphi 新闻组中随意询问 :)

* * *

[编辑] @马丁：

*   Codegear/Embarcadero 网站上有一个[免费的“Turbo”版本。](http://cc.codegear.com/Free.aspx?id=24722)我想它有一些限制，所以你也可以尝试[下载试用版](http://cc.codegear.com/Free.aspx?id=24966)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-16T12:58:36.530

还有一个[Delphi wiki](http://delphi.wikia.com/wiki/Main_Page)
这甚至有一个“Beginning Delphi”页面，上面有很多外部链接。（其中一些已经提到）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-16T10:43:39.047

[http://www.delphifeeds.com/](http://www.delphifeeds.com/)是一个很好的起点，它有关于德尔福社区正在发生的事情的大部分新闻。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-20T10:05:17.857

[在codegearguru](http://www.codegearguru.com)有许多 Alister Christie 的视频- 看看它们：)

编辑... @Martin，查看[CodeGear的 Turbo 产品](http://cc.codegear.com/free/turbo)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-20T11:16:14.613

@Martin 有一个免费版本。

[涡轮德尔福](http://www.turboexplorer.com/)

如果您熟悉 c#，您会发现与 Delphi 有许多相似之处。

我还发现围绕新闻组的社区非常活跃且乐于助人。他们对 MVP 有一个相似的概念，他们被称为 Team B（但由于 Borland 不拥有他们，所以现在名称可能已经改变）。

# c# - 如何在 .Net / C# 中将日期转换为 HTTP 格式的日期

> ID：13087
> 
> 赞同：54
> 
> 时间：2008-08-16T10:33:42.033
> 
> 标签：c#, .net, http

如何将 .Net DateTime 转换为有效的 HTTP 格式日期字符串？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2008-08-16T10:37:41.430

可以使用 .Net 中的“r”格式字符串将日期转换为 HTTP 有效日期 (RFC 1123)。HTTP 日期需要是 GMT / 不偏移 - 这可以使用 ToUniversalTime() 方法来完成。

因此，以 C# 为例：

```
string HttpDate = SomeDate.ToUniversalTime().ToString("r"); 
```

现在，产生 HttpDate = "Sat, 16 Aug 2008 10:38:39 GMT"

有关.Net 标准日期和时间格式字符串的列表，请参阅标准日期和时间格式字符串[。](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

请参阅HTTP 日期规范的[协议参数，以及 HTTP 日期的其他有效（但已过时）RFC 类型的背景。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html)

# asp.net - 我应该支持 ASP.NET 1.1 吗？

> ID：13106
> 
> 赞同：4
> 
> 时间：2008-08-16T12:34:58.060
> 
> 标签：asp.net, .net-1.1

我刚刚开始从事一个`ASP.NET`项目，我希望一旦它达到合适的阶段就可以开源。它基本上将是一个可供现有网站使用的库。我的偏好是支持`ASP.NET 2.0`通过`3.5`，但我想知道不支持我会遗漏多少人`ASP.NET 1.1`？更具体地说，有多少人仍在使用不`ASP.NET 1.1`适合谁`ASP.NET 2.0/3.5`的选项？如果升级服务器不是您的选择，为什么不呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-16T12:43:39.493

我越来越觉得不是。

目前仍然坚持使用 1.1 的那种大型僵化组织（可能是因为他们只是升级到它）也是极不可能关注开源解决方案的那种。

如果我现在开始一个新的 ASP.Net 项目，我会坚持使用 .Net 3.5，可能还有新的 MVC 预览版。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-17T00:42:05.890

请记住，.NET 1.1 将于今年 10 月停止提供全面支持（包括 ASP.NET 1.1）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-17T00:40:29.500

我认为您只针对 2.0 及更高版本就可以了，使用您的库的人很可能会进行新的开发并至少使用 ASP.NET 2.0。我认为这将是一小群人在 1.1 中进行新的开发。

# php - PHP：动态访问数组值

> ID：13109
> 
> 赞同：50
> 
> 时间：2008-08-16T12:42:54.017
> 
> 标签：php, arrays, coding-style

在 php 中，我经常需要使用数组来映射变量……但我似乎无法在一个内衬中做到这一点。cf 示例：

```
// the following results in an error:
echo array('a','b','c')[$key];

// this works, using an unnecessary variable:
$variable = array('a','b','c');
echo $variable[$key]; 
```

这是一个小问题，但它每隔一段时间就会出现问题......我不喜欢这样一个事实，即我没有使用变量；）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-08-28T09:58:36.653

技术上的答案是 PHP 语言的***语法***只允许在**变量表达式**的末尾使用下标符号，而不是一般的**表达式**，这就是它在大多数其他语言中的工作方式。我一直将其视为语言的缺陷，因为可以有一种语法可以明确地针对任何表达式解析下标。但是，可能是他们使用了不灵活的解析器生成器，或者他们只是不想破坏某种向后兼容性。

以下是有效表达式上无效下标的更多示例：

```
$x = array(1,2,3);
print ($x)[1]; //illegal, on a parenthetical expression, not a variable exp.

function ret($foo) { return $foo; }
echo ret($x)[1]; // illegal, on a call expression, not a variable exp. 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2011-10-25T11:28:48.267

这称为数组解引用。它已在 php 5.4 中添加。 [http://www.php.net/releases/NEWS_5_4_0_alpha1.txt](http://www.php.net/releases/NEWS_5_4_0_alpha1.txt)

*更新[2012-11-25]：*从 PHP 5.5 开始，取消引用已添加到内容/字符串以及数组

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-08-16T12:55:29.953

我真的不会为那个额外的变量而烦恼。但是，如果您愿意，也可以在使用后将其从内存中删除：

```
$variable = array('a','b','c');
echo $variable[$key];
unset($variable); 
```

或者，您可以编写一个小函数：

```
function indexonce(&$ar, $index) {
  return $ar[$index];
} 
```

并调用它：

```
$something = indexonce(array('a', 'b', 'c'), 2); 
```

现在应该自动销毁该数组。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2011-12-23T07:36:14.593

这可能没有直接关系。但我来到这篇文章寻找解决这个特定问题的方法。

我从以下形式的函数中得到了结果。

```
Array
(
    [School] => Array
            (
                [parent_id] => 9ce8e78a-f4cc-ff64-8de0-4d9c1819a56a
            )
) 
```

我想要的是 parent_id 值“9ce8e78a-f4cc-ff64-8de0-4d9c1819a56a”。我使用了这样的功能并得到了它。

```
array_pop( array_pop( the_function_which_returned_the_above_array() ) ) 
```

所以，它是在一行中完成的 :) 希望它对某人有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-02-18T10:40:42.493

```
function doSomething()
{
    return $somearray;
}

echo doSomething()->get(1)->getOtherPropertyIfThisIsAnObject(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-05-26T11:50:04.483

实际上，有一个优雅的解决方案:) 下面将把 myfunc 返回的数组的第三个元素分配给 $myvar：

```
$myvar = array_shift(array_splice(myfunc(),2)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-13T06:29:03.100

或者类似的东西，如果你需要变量中的数组值

```
$variable = array('a','b','c');
$variable = $variable[$key]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-24T11:46:04.177

**您可以使用 php array_***函数想出几个*oneliners 。*但我向您保证，这样做与您想要实现的目标相比完全是多余的。

 **您可以使用以下示例，但这不是一个优雅的解决方案，我不确定它的性能；

```
 array_pop ( array_filter( array_returning_func(), function($key){    return $key=="array_index_you_want"? TRUE:FALSE;    },ARRAY_FILTER_USE_KEY ) ); 
```

如果您使用的是 php 框架并且您被旧版本的 php 卡住了，那么大多数框架都有帮助库。

示例：Codeigniter 数组助手

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-10T06:21:39.143

尽管在 PHP >=5.4 中添加了取消引用这一事实，但您可以使用三元运算符在一行中完成：

```
echo $var=($var=array(0,1,2,3))?$var[3]:false; 
```

这样你就不会只保留数组变量。并且您不需要额外的函数来执行此操作...如果在函数中使用此行，它将在最后自动销毁，但您也可以自己销毁它，如`unset`代码后面所述，如果未使用一个函数。**

# c++ - 如何将多个 C/C++ 库合并为一个？

> ID：13128
> 
> 赞同：43
> 
> 时间：2008-08-16T13:46:01.987
> 
> 标签：c++, c, archive

我厌倦了在我的项目中添加十个链接库，或者需要其中的八个来使用我自己的。我想采用现有的库，如 libpng.a、libz.a、libjpeg.a，并将它们组合成一个 .a 库。那可能吗？组合 .lib 库怎么样？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-08-16T16:18:30.823

您可以从每个库中提取目标文件

```
ar x <library name> 
```

然后将它们全部合并到一个新库中

```
ar cs <new library name> <list each extracted object file> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-16T14:15:23.037

在类 Unix 系统上，ld 和 ar 实用程序可以做到这一点。查看[http://en.wikipedia.org/wiki/Ar_(Unix)](http://en.wikipedia.org/wiki/Ar_(Unix))或在任何 linux 机器上或通过 google 查找手册页，例如“unix man ar”。

请注意，链接到共享（动态）库可能会更好。这会给您的可执行文件添加一个依赖项，但会大大减小其大小，尤其是在您编写图形应用程序时。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-28T11:43:54.630

在 Linux 或 MinGW 或 Cygwin 上，使用 GNU 工具链：

```
ar -M <<EOM
    CREATE libab.a
    ADDLIB liba.a
    ADDLIB libb.a
    SAVE
    END
EOM
ranlib libab.a 
```

或者，如果您可以保持`liba.a`and的存在`libb.a`：

```
ar crsT libab.a liba.a libb.a 
```

在 Windows 上，使用 MSVC 工具链：

```
lib.exe /OUT:libab.lib liba.lib libb.lib 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-16T14:08:54.733

我不确定如何将它们物理组合到一个文件中，但是您可以使用某种抽象并只包含一个“AllMyLibs.a/h”，而该“AllMyLibs.a/h”又包含您想要的所有内容。你也可以把它放在你的编译器搜索库的位置，所以它适用于任何项目。

PS - 出于好奇，你为什么不喜欢包含单个库？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-22T10:32:09.833

也许我误解了，但是如果最终用户代码直接调用它们，您是否只需要发送这些库？如果对 Jpeg 方法等的所有访问都来自静态库中的代码，那么只需将这些库链接到您的库中。

IE

```
----------------
| End-user exe |
----------------
      |
      | makes calls to
      |
      v
 --------------------
 | Your static lib.a | 
 --------------------
         | makes calls to and links
         v
     ------------------------------------ .....
     |                    |         |
  -------------    -------- ---------- 
  | libjpeg.a |    |libz.a| |libpng.a|
  -------------    -------- ---------- 
```

也就是说，如果最终代码需要直接调用 libz.a、libpng.a 等，这只是一个问题。

例如，如果应用程序代码有调用 libz.a 的合法需求，那么上面提到的就是使用动态模块的情况。

PS：我可以获得艺术家徽章吗？:)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2008-08-28T02:58:33.463

将几个第三方库合并为一个可能会给您带来更多问题——例如，如果其中两个库定义了您的程序不使用的公共符号。现在，您必须在组合库之前提取公共符号的所有（或所有但一个）实例。

# svn - 在生产 win2008 网络服务器上安装 SVN 是否安全？

> ID：13154
> 
> 赞同：3
> 
> 时间：2008-08-16T14:46:10.773
> 
> 标签：svn, windows-server-2008

我有一个网络服务器，我目前正在一家专门托管 svn 的公司支付 SVN 托管费用。

我想在我的专用服务器上安装 SVN，这有什么安全隐患吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-17T00:13:38.727

Small correction to Jedi: it's VisualSVN Server from [http://www.visualsvn.com/server/](http://www.visualsvn.com/server/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-16T19:10:08.120

[我使用来自http://www.visualsvn.com/server/](http://www.visualsvn.com/server/)的VisualSVN 服务器，非常容易安装并且可以与活动目录集成。在win2008上安装没有问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-16T19:17:01.710

这取决于你想考虑这个问题的程度。

如果你想自己安装 Subversion 服务器，看起来你有两个选择：

*   阿帕奇
*   颠覆自己的协议

无论哪种情况，问题不在于两人做了什么，而在于两人*无意中做*了什么。

如果 Apache 中存在允许外部攻击者访问您的数据的错误，那么这很糟糕。如果 Subversions 自己的服务器中存在允许相同的错误，那就不好了。

您需要做的是考虑场景的*风险*和*后果*，并在可能的情况下提出满足您要求的服务器设置。

您至少必须考虑的情况是：

*   任一系统中允许攻击者下沉您的服务器的错误（例如：使您的服务器使用过多 CPU 时间的东西）
*   任一系统中的错误，允许攻击者访问该服务器上的数据
*   任一系统中允许攻击者访问您的域的错误（即，您的所有服务器和该公共服务器上可用的机器）

就我个人而言，我已经考虑过现在有多少通过 Apache 托管 subversion 服务器，并且毫无疑问地安装了[VisualSVN Server](http://www.visualsvn.com/server)来托管我自己的源代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-16T15:59:27.383

对于简单的安全要求，使用 svnserve 设置 Subversion 几乎是微不足道的。即使让它在 Apache 下运行以满足更广泛的安全需求也不是太困难。

这是一个很好的演练：

[http://donie.homeip.net:8080/pebble/Steve/2006/02/27/1141079943879.html](http://donie.homeip.net:8080/pebble/Steve/2006/02/27/1141079943879.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T21:42:04.823

VisualSVN 是如此罕见 - 一个安装工具，在 Windows 上安装 SVN 比在 Linux 上更容易。考虑到 Linux，你只需要输入“yum install subversion”，这是值得称赞的。

但是，如果您真的担心，我会安装 VMware 并在您的 Web 服务器上的来宾操作系统中运行您的 SVN 服务器。

安全性：如果您运行 svnserve，则只需阻止除您的计算机之外的所有端口（3960）访问该端口。如果没有，您需要保护 svn auth 配置文件。如果您使用 apache 运行它，那么它只是另一个需要保护的网站，与往常一样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-17T00:29:52.563

Apache and SVN are fairly easy to get running together but there are a number of steps. It is definitely easier today than 2 years ago when I first tried. Make sure you have matching versions of the modules and spend some time playing with Apache locally before deploying to your server. There are versions of Apache with and without SSL. Check you have the one with OpenSSL included to protect credentials on the wire.

Install Apache so that it can be manually started eg. not as a service. You'll want to do this to avoid a collision with any IIS apps on your server. You can install Apache to run as a service later, once your config is right.

Normally Apache will use Basic Authentication. You need to secure this using SSL, the credentials are not encrypted in transit. You put user details in a test file on disk. If you want to authenticate users against windows or active directory, you will have a larger task on your hands (perhaps see VisualSVN for this).

I had a quick look at VisuaSVN and it seems to be a good option. However a little Apache config experience can go a long way. Coming from an IIS background it wasn't too difficult, it just took some time to review all of the options/settings.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-04T22:02:48.190

生产 svn 服务器在可用性方面很重要，但它永远不够，无论是 Windows Srvr 2007，还是 RH Linux 都无关紧要。你需要一个深思熟虑的备份策略并注意访问管理。

* * *

## 回答 #8

> 赞同：-8
> 
> 时间：2008-08-16T15:19:18.943

SVN 在 Windows 环境中很难设置，至少如果你想托管 SVN，本地存储库是不同的。我的建议是坚持公司或寻找更便宜的 SVN，不会花费那么多钱。它们并不难设置，但您会讨厌由于备份不当而丢失所有源代码。

# web-services - Web 服务的最佳实践

> ID：13160
> 
> 赞同：2
> 
> 时间：2008-08-16T14:58:30.860
> 
> 标签：web-services

我创建了一个 web 服务，当我想使用它的方法时，我在 a 过程中实例化它，调用该方法，最后我将它处理掉，但是我认为也可以在“private void”中实例化 web 服务Main_Load(object sender, EventArgs e)" 事件。

问题是，如果我以第一种方式执行此操作，则每次我需要其中一个方法时都必须实例化 Web 服务，但另一方面，当我以某种形式使用它时，我必须始终保持 Web 服务连接。

我想知道这些做法中哪一个更好，或者是否有更好的方法来做到这一点

**策略一**

```
private void btnRead_Click(object sender, EventArgs e)
{
    try
    {
        //Show clock
        this.picResult.Image = new Bitmap(pathWait);

        Application.DoEvents();

        //Connect to webservice
        svc = new ForPocketPC.ServiceForPocketPC();
        svc.Credentials = new System.Net.NetworkCredential(Settings.UserName, Settings.Password);
        svc.AllowAutoRedirect = false;
        svc.UserAgent = Settings.UserAgent;
        svc.PreAuthenticate = true;
        svc.Url = Settings.Url;
        svc.Timeout = System.Threading.Timeout.Infinite;

        svc.CallMethod();
         ...
    }
    catch (Exception ex)
    {
        ShowError(ex);
    }
    finally
    {
        if (svc != null)
            svc.Dispose();
    }
} 
```

**策略二**

```
private myWebservice svc;

private void Main_Load(object sender, EventArgs e)
{
    //Connect to webservice
    svc = new ForPocketPC.ServiceForPocketPC();
    svc.Credentials = new System.Net.NetworkCredential(Settings.UserName, Settings.Password);
    svc.AllowAutoRedirect = false;
    svc.UserAgent = Settings.UserAgent;
    svc.PreAuthenticate = true;
    svc.Url = Settings.Url;
    svc.Timeout = System.Threading.Timeout.Infinite;
}

private void btnRead_Click(object sender, EventArgs e)
{
    try
    {
        //Show clock
        this.picResult.Image = new Bitmap(pathWait);

        Application.DoEvents();
        svc.CallMethod();
         ...
    }
    catch (Exception ex)
    {
        ShowError(ex);
    }
}

private void Main_Closing(object sender, CancelEventArgs e)
{
    svc.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-16T15:04:56.603

这取决于您调用 Web 服务的频率。如果您要几乎不断地调用它，那么使用方法#2 可能会更好。但是，如果它不会被如此频繁地调用，则最好使用方法 #1，并且仅在需要时实例化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-16T15:24:19.807

现在我为移动设备做了一个解决方案，它可以在不规则的时间使用，它可以在 10 分钟、1 小时、4 小时内使用，它非常可变，似乎更好的方法是第一个策略。

去年我们进行了一个使用 web 服务的项目，事实是我们在 Sub New() 过程中实例化了我们的 web 服务并且它运行得很好，但是，有时一些用户声称他们从椅子上醒来并且当他们返回并尝试继续使用应用程序时，他们收到了超时错误消息，他们不得不再次重新登录。

我们认为这也许没问题，因为也许用户离开座位很长一段时间，但有一次在与 CEO 一起演示应用程序时，它发生了完全相同的场景，我个人不喜欢这种行为和这就是为什么这个问题。

感谢你的回答。

# c# - 尝试重新启动线程时发生 ThreadStateException

> ID：13170
> 
> 赞同：6
> 
> 时间：2008-08-16T15:24:19.153
> 
> 标签：c#, .net, multithreading, exception

尝试重新启动线程时，有时我会收到 System.Threading.ThreadStateException。有问题的代码如下：

```
// Make sure the thread is done stopping
while (this.mThread.ThreadState == ThreadState.Running)
{ 
    Thread.Sleep(0);
}
// Respawn a thread if the current one is stopped or doesn't exist
if (this.mThread == null || this.mThread.ThreadState == ThreadState.Stopped)
{ 
    this.mThread = new Thread(new ParameterizedThreadStart(Monitor)); }
// Start the thread
if (check)
{ 
    this.mThread.Start(60000); 
}
else
{   
    this.mThread.Start(0); 
} 
```

所以有两个问题——这是正确的做事方式吗，有没有办法防止错误发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-16T16:25:07.003

线程可能同时处于多个状态，因此 ThreadState 属性实际上是可能状态的位图。因此，仅用一种状态测试平等不会给您正确的结果。您需要执行以下操作：

```
if((mThread.ThreadState & ThreadState.Running) != 0) 
```

但是，检查线程状态是错误的。我不完全清楚您要实现的目标，但我猜您正在等待线程终止，然后再重新启动它。在这种情况下，您应该这样做：

```
mThread.Join();
mThread = new Thread(new ParameterizedThreadStart(Monitor));
if(check)
    mThread.Start(60000);
else
    mThread.Start(0); 
```

尽管如果您更详细地描述您要解决的问题，我几乎可以肯定会有更好的解决方案。等待线程结束只是为了再次重新启动它对我来说似乎没有那么有效。也许您只需要某种线程间通信？

约翰。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-16T17:56:47.147

问题是您的代码首先检查它是否应该创建一个新的线程对象，而另一段代码确定是否启动线程对象。由于竞争条件和类似情况，您的代码最终可能会尝试在现有线程对象上调用 .Start。考虑到您没有在*check*变量后面发布详细信息，因此不可能知道什么会触发此行为。

您应该重新组织您的代码，以保证 .Start 只在新对象上被调用。简而言之，您应该将 Start 方法放入与创建新线程对象的 if 语句相同的 if 语句中。

就个人而言，我会尝试重新组织整个代码，这样我就不需要创建另一个线程，而是将代码包装在循环内的线程对象中，以便线程继续运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-16T16:18:58.060

抛出 ThreadStateException 是因为您试图启动一个未处于可启动状态的线程。最可能的情况是它已经在运行，或者它已经完全退出。

可能会发生一些事情。首先，线程可能已经从 Running 转换为 StopRequested，它还没有完全停止，所以你的逻辑不会创建一个新线程，你正在尝试启动一个刚刚完成运行或即将运行的线程完成运行（这两种状态都不是重新启动的有效状态）。

另一种可能性是线程被中止。被中止的线程进入 Aborted 状态，而不是 Stopped 状态，当然也对重新启动无效。

实际上，唯一可以“重新启动”的仍然活着的线程是被挂起的线程。您可能想改用此条件：

`if (this.mThread == null || this.mThread.ThreadState != ThreadState.Suspended)`

# continuous-integration - 如何将我的持续集成系统与我的错误跟踪系统集成？

> ID：13200
> 
> 赞同：6
> 
> 时间：2008-08-16T16:09:16.240
> 
> 标签：continuous-integration, bug-tracking, fogbugz, cruisecontrol.rb

我使用 Cruisecontrol.rb 进行 CI 和 FogBugz 进行错误跟踪，但答案越通用越好。

首先是技术问题：FogBugz 有 API 吗？有没有好的教程，或者更好的预写代码？

其次是程序问题：当构建中断时，CI 究竟应该在错误跟踪器中放入什么？也许：

标题：“#{last committer} 破坏了构建！”

正文：“#{ 错误跟踪 }”

我想这预设了这个问题的答案：我是否应该将 CI 中断放入我的错误跟踪中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-16T18:02:03.717

在我的公司，我们最近采用了（商业）Atlassian 堆栈——包括用于问题跟踪的 JIRA 和用于构建的 Bamboo。就像 Microsoft 世界（我猜——我们是一家 Java 商店）一样，如果您从单一供应商处获得所有产品，您将获得紧密集成的好处。

有关他们如何完成互操作性的示例，请查看他们的[互操作性页面](http://www.atlassian.com/software/bamboo/features/interoperability.jsp "互操作性")。

足够的先令。一般来说，我可以将他们的一般方法总结为：

*   在您的错误跟踪器中创建问题（例如：PROJ-123 的问题键）。
*   当您提交代码时，将“PROJ-123”添加到您的提交注释中以指示此代码更改修复了哪些错误。
*   当您的 CI 服务器签出代码时，请扫描差异的提交注释。记录与问题键的正则表达式匹配的任何字符串。
*   构建完成后，生成关于找到哪些问题密钥的报告。

具体到你的第二个问题：

您的 CI 不必在错误跟踪器中添加任何内容。Bamboo 不会在 JIRA 中添加任何内容。相反，Atlassian 人员向 JIRA 提供了一个插件，该插件将对 Bamboo 进行远程 api 调用，询问“Bamboo，我与什么构建（一个 JIRA 问题）相关？”。这可能最好用[截图](http://confluence.atlassian.com/display/BAMBOO/Bamboo+2.1+Release+Notes#Bamboo2.1ReleaseNotes-LinkIssuesandBuilds "截屏")来解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-16T19:56:45.093

我使用过的所有 CI 设置都会发送一封电子邮件（发送到一个列表），但如果你确实想要——特别是如果你的团队将 FogBugz 用作待办事项系统——你可以在 FogBugz 6 中打开一个案例。[它有一个 API](http://www.fogcreek.com/FogBugz/docs/60/topics/advanced/API.html)可以让您打开案例。就此而言，您可以将其配置为将电子邮件发送到您的 FogBugz 的电子邮件提交地址，但 API 可能会让您做更多事情，例如将案例分配给最后一个提交者。

[Brian](https://stackoverflow.com/users/1557/brian-laframboise)的回答向我建议，如果您的 CI 在具有案例编号的提交中发现失败，您甚至可以重新打开现有案例。然而，就像为每一件小事编写一个案例字段一样，CI 自动化在某一点上可能“太聪明了”，弄错了，而且很烦人。打开一个新的案例可能就足够了。

谢谢：这让我想知道我是否应该尝试将我们的[黑猩猩](http://search.cpan.org/~zev/Test-Chimps-0.07/)设置与我们的 FogBugz 集成！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-16T16:23:57.770

CC 带有一个实用程序，可以在构建失败时向您发出警告，可能不值得在 FogBugz 中记录失败的构建 - 您不需要跟踪立即解决的问题（因为大多数损坏的构建都会如此）

反过来（FogBugz 显示修复问题的签入），您需要一个基于 Web 的存储库浏览器 - FogBugz 易于配置，以便显示正确的更改。

# ruby-on-rails - 为什么我的 Cron 作业不能正常工作？

> ID：13204
> 
> 赞同：7
> 
> 时间：2008-08-16T16:15:18.363
> 
> 标签：ruby-on-rails, ruby, linux, ubuntu, cron

我在 Ubuntu Hardy VPS 上有一个 cron 工作，只有一半工作，我不知道为什么。该作业是一个 Ruby 脚本，它使用 mysqldump 备份 Rails 应用程序使用的 MySQL 数据库，然后将其压缩并使用 SFTP 上传到远程服务器。

gzip 文件已成功创建和复制，但始终为零字节。但是，如果我直接从命令行运行 cron 命令，它就可以完美运行。

这是 cron 作业：

```
PATH=/usr/bin
10 3 * * * ruby /home/deploy/bin/datadump.rb 
```

这是 datadump.rb：

```
#!/usr/bin/ruby
require 'yaml'
require 'logger'
require 'rubygems'
require 'net/ssh'
require 'net/sftp'

APP        = '/home/deploy/apps/myapp/current'
LOGFILE    = '/home/deploy/log/data.log'
TIMESTAMP  = '%Y%m%d-%H%M'
TABLES     = 'table1 table2'

log        = Logger.new(LOGFILE, 5, 10 * 1024)
dump       = "myapp-#{Time.now.strftime(TIMESTAMP)}.sql.gz"
ftpconfig  = YAML::load(open('/home/deploy/apps/myapp/shared/config/sftp.yml'))
config     = YAML::load(open(APP + '/config/database.yml'))['production']
cmd        = "mysqldump -u #{config['username']} -p#{config['password']} -h #{config['host']} --add-drop-table --add-locks --extended-insert --lock-tables #{config['database']} #{TABLES} | gzip -cf9 > #{dump}"

log.info 'Getting ready to create a backup'
`#{cmd}`    

# Strongspace
log.info 'Backup created, starting the transfer to Strongspace'
Net::SSH.start(ftpconfig['strongspace']['host'], ftpconfig['strongspace']['username'], ftpconfig['strongspace']['password']) do |ssh|
  ssh.sftp.connect do |sftp|
    sftp.open_handle("#{ftpconfig['strongspace']['dir']}/#{dump}", 'w') do |handle|
      sftp.write(handle, open("#{dump}").read)
    end
  end
end
log.info 'Finished transferring backup to Strongspace'

log.info 'Removing local file'
cmd       = "rm -f #{dump}" 
log.debug "Executing: #{cmd}"
`#{cmd}`
log.info 'Local file removed' 
```

我已经检查并仔细检查了所有路径，它们是正确的。sftp.yml （SFTP 凭证）和**database.yml （MySQL 凭证）****都归**执行用户（部署）所有，对该用户具有只读权限（chmod 400）。我正在使用 1.1.x 版本的 net-ssh 和 net-sftp。我知道它们不是最新的，但它们是我目前熟悉的。

 **什么可能导致 cron 作业失败？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-18T03:42:10.793

当脚本以交互方式正确运行但由 cron 运行时，问题通常是由于环境环境设置到位......例如@Ted Percival 提到的 PATH，但可能是其他环境变量。

这是因为 cron 在执行之前不会调用 .bash_profile、.bashrc 或 /etc/profile。

避免这种情况的最好方法是确保 cron 调用的任何脚本在执行时不对环境做出任何假设。克服这一点很简单，只需在脚本中包含几行代码以确保环境设置正确。例如，在我的例子中，我在 /etc/profile（对于 RHEL）中有所有重要的设置，所以我将在任何要在 cron 下运行的脚本中包含以下行：

```
source /etc/profile 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-16T16:50:15.687

看起来您`PATH`缺少一些目录，最重要的是`/bin`（对于`/bin/rm`）。这是我的系统的`/etc/crontab`用途：

```
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-16T16:34:37.357

您确定在作为 cron 作业运行时正确创建了临时文件吗？脚本的工作目录将在 HOME 环境变量中指定，或者在 /etc/passwd 条目中为安装 cron 作业的用户指定。如果 deploy 对其执行所在的目录没有写权限，那么您可以为转储文件指定一个绝对路径来解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-19T16:56:04.113

cron 是否发送带有日志的电子邮件？

如果没有，请将 cron 的输出通过管道传输到日志文件。

确保将 STDERR 重定向到日志。**

# url - 没有ID的网址

> ID：13213
> 
> 赞同：5
> 
> 时间：2008-08-16T16:24:58.827
> 
> 标签：url, rewrite

我经常看到（重写）没有 ID 的 URL，就像在一些 wordpress 安装中一样。实现这一目标的最佳方法是什么？示例：site.com/product/some-product-name/ 也许将页面名称和 ID 数组保存在缓存中，以避免对每个页面请求进行数据库查询？如何避免冲突，以及使用没有 ID 的 url 的其他问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-16T16:32:16.787

实际上，使用 ID 会带来同样的难题——您只是在检查数据库中的不同值。上面 URL 的“some-product-name”部分也是独一无二的。有些人称它们为蛞蝓（Wordpress，也称为永久链接）。因此，您不是在数据库中查询具有特定 ID 的行，而是在数据库中查询具有特定 slug 的行。您无需知道 ID 即可检索记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-16T16:30:10.143

只要产品名称是唯一的，它就不应该成为问题。只要列被索引，就不会花费任何时间（至少不重要）通过唯一名称而不是数字 ID 来查找产品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-16T16:50:44.393

Wordpress 在 wp_posts 表中有一个字段用于 slug。当您创建帖子时，它会根据帖子标题创建一个 slug（如果您是这样配置的），用破折号替换空格（或者我认为您可以将其设置为下划线）。它还去掉了撇号、逗号或诸如此类的东西。我相信它也限制了蛞蝓的总长度。

因此，简而言之，它不会将 URL 动态解码为帖子的标题——表中有一个字段直接匹配帖子名称的 URL 版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T04:02:36.550

您可能知道也可能不知道，这些 URL 正在使用 Apache 的**mod_rewrite**模块重写。正如这里提到的，Wordpress 在后台处理标题或帖子名称后分配一个 slug。

但是，要回答您的问题，您所描述的是 Wordpress 的“Pretty Permalinks”功能，您可以在[Wordpress codex](http://codex.wordpress.org/Using_Permalinks)中了解更多信息。较新版本的 Wordpress 在内部进行重写（没有 .htaccess 编辑，而是[wp_rewrite](http://codex.wordpress.org/Function_Reference/WP_Rewrite)）。这就是为什么您会看到任何永久链接结构的相同规则集。

但是，如果您进行一些挖掘，您可以找到旧的重写规则。例如：

```
RewriteRule ^([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/?$ /index.php?year=$1&monthnum=$2&day=$3 [QSA,L] 
```

将采用类似的 URL`/2008/01/01/`并将其定向到`/index.php?year=2008&monthnum=01&day=01`（并加载日期类别）。

但是，如前所述，`product-name`存在这样的页面**只是**因为 Wordpress 已经清理了帖子标题并将其作为字段存储在数据库中。

# c# - 如何从 Silverlight 中的 HttpWebRequest.BeginGetRequestStream 更新我的 UI

> ID：13217
> 
> 赞同：5
> 
> 时间：2008-08-16T16:32:06.257
> 
> 标签：c#, silverlight

我正在使用 HttpWebRequest 的 BeginGetRequestStream 上传多个文件，但我想更新我在发布数据流时编写的进度控件。

这应该怎么做，我尝试从将数据推送到流中的循环中调用 Dispatch.BeginInvoke （如下所示），但它会锁定浏览器直到完成，所以它似乎处于某种工作线程/ui线程死锁.

这是我正在做的几乎所有代码片段：

```
class RequestState
{
    public HttpWebRequest request;  // holds the request
    public FileDialogFileInfo file; // store our file stream data

    public RequestState( HttpWebRequest request, FileDialogFileInfo file )
    {
        this.request = request;
        this.file = file;
    }
}

private void UploadFile( FileDialogFileInfo file )
{
    UriBuilder ub = new UriBuilder( app.receiverURL );
    ub.Query = string.Format( "filename={0}", file.Name );

    // Open the selected file to read.
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create( ub.Uri );
    request.Method = "POST";

    RequestState state = new RequestState( request, file );
    request.BeginGetRequestStream( new AsyncCallback( OnUploadReadCallback ), state );
}

private void OnUploadReadCallback( IAsyncResult asynchronousResult )
{
    RequestState state = (RequestState)asynchronousResult.AsyncState;
    HttpWebRequest request = (HttpWebRequest)state.request;

    Stream postStream = request.EndGetRequestStream( asynchronousResult );
    PushData( state.file, postStream );
    postStream.Close();

    state.request.BeginGetResponse( new AsyncCallback( OnUploadResponseCallback ), state.request );
}

private void PushData( FileDialogFileInfo file, Stream output )
{
    byte[] buffer = new byte[ 4096 ];
    int bytesRead = 0;

    Stream input = file.OpenRead();
    while( ( bytesRead = input.Read( buffer, 0, buffer.Length ) ) != 0 )
    {
        output.Write( buffer, 0, bytesRead );
        bytesReadTotal += bytesRead;

        App app = App.Current as App;
        int totalPercentage = Convert.ToInt32( ( bytesReadTotal / app.totalBytesToUpload ) * 100 );

        // enabling the following locks up my UI and browser
        Dispatcher.BeginInvoke( () =>
        {
            this.ProgressBarWithPercentage.Percentage = totalPercentage;
        } );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-19T18:09:03.233

我要说的是，我不认为 Silverlight 2 的 HttpWebRequest 支持流式传输，因为请求数据被完全缓冲到内存中。不过自从我上次查看它已经有一段时间了，因此我回去看看 Beta 2 是否支持它。事实证明确实如此。我很高兴在说明之前我回去阅读了。您可以通过将 AllowReadStreamBuffering 设置为 false 来启用它。您是否在 HttpWebRequest 上设置了此属性？这可能会导致你的阻塞。

*   [MSDN 参考](http://shrinkster.com/11cn)
*   [Silverlight 和 ASP.NET 的文件上传组件](http://www.wilcob.com/Wilco/View.aspx?NewsID=212)

编辑，为您找到另一个参考。您可能希望通过将文件分成块来遵循这种方法。这是去年三月写的，因此我不确定它是否适用于 Beta 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-20T17:54:22.940

谢谢你，我会看看那些链接，无论如何我都在考虑分块我的数据，这似乎是我可以从中获得任何合理进度报告的唯一方法。

# asp.net - 移动设备被检测为非移动设备

> ID：13224
> 
> 赞同：6
> 
> 时间：2008-08-16T16:42:27.827
> 
> 标签：asp.net, mobile, mobile-website

我在我的 asp.net 项目中包含了一个移动 Web 表单，我认为它可以/应该只为我的移动用户看到，但我意识到它也可以从任何浏览器中看到，我没有看到问题原因我可以使用 HttpBrowserCapabilities.IsMobileDevice=true 来区分访问并转移到适当的 aspx 页面，但结果是当我从移动设备访问 Web 表单时，它被标识为 IsMobileDevice = false 并将我发送到另一个页面。

怎么可能呢？

移动设备运行 Pocket PC 2003。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-18T04:27:17.060

恕我直言： 的值`HttpContext.Current.Request.Headers("User-Agent")`是一个更安全的赌注，因为它实际上指示发出请求的浏览器，而不是设备*本身*的类型。

我从经验中了解到，如果智能手机通过第三方浏览器向您的服务发出请求，那么“您是什么类型的设备”测试（`HttpCapabilitiesBase.IsMobileDevice`和/或`HttpContext.Current.Request.Browser.IsMobileDevice`）通常会失败.

不幸的是，由于缺少大量允许的用户代理（或不允许的用户代理），您只需要在渲染页面之前确保它不以 Mozilla、iPhone 或 Opera 开头。 .

这是一个很难打球的竞技场。
祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-16T16:46:28.270

有些无法识别，因为 UserAgent 已被弄乱或正在使用新的浏览器。比如Opera Mobile 9.5。要解决此问题，您需要创建一个专门用于定义它的浏览器 (*.browser) 文件。我必须为从 Google 发送的新的基于 Mozilla 的 UserAgent 做这件事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-25T08:37:13.220

我认为您应该使用比 Microsoft 浏览器功能更好的其他 DDR。我正在使用 http://wurfl.sourceforge.net>WURFL，它是开源的，也许它得到了更多的扩展和更新。还有其他商业 DDR，例如[DeviceAtlas](http://deviceatlas.com/)。

有很多 .net 库，但我使用的[是 Marg.Wurfl](http://wurfl.marg.si/)。它允许使用 wurfl 功能呈现网页移动页面。

# java - 如何从我的属性文件中重构 HTML 标记？

> ID：13225
> 
> 赞同：9
> 
> 时间：2008-08-16T16:42:50.070
> 
> 标签：java, jsp, internationalization, struts

我最近继承了一个国际化和大量文本的 Struts 1.1 Web 应用程序。许多 JSP 文件如下所示：

```
<p>
    <bean:message key="alert" />
</p> 
```

属性文件如下所示：

```
messages.properties
alert=Please update your <a href="/address.do">address</a> and <a href="/contact.do">contact information</a>. 
```

带有 N 种其他语言的适当翻译（messages_fr.properties 等）。

问题：

1.  ***DRY 违规***- 我有 N 个对我的 Struts 操作 URL 的引用而不是 1 个，这使得重构操作 URL 容易出错。
2.  ***混合的关注点***——我的应用程序的标记现在不仅仅是我的 JSP 文件，这使得 Web 专家很难调整标记（使用 CSS 等）。
3.  ***翻译后标记***——每当我收到新翻译的文本时，我必须决定用`<a>...</a>`标记包围什么。英语很容易，但对于不熟悉的语言就不那么容易了。

我考虑在消息文件中添加占位符，例如：

```
alert=Please update your {0} and {1}. 
```

但是随后“地址”和“联系信息”这两个词需要以某种方式本地化，用标记包装，并传递给我的消息标签——我看不到一个简单的方法来做到这一点。

我能做些什么来改善这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-16T21:59:07.157

> 避免在长文本块中创建链接。更喜欢可以充当逻辑完整和独立链接的较短文本。

一般来说，它会导致更少的问题。有时您必须妥协您的 UI 设计以适应本地化；有时您需要妥协您的本地化过程以适应 UI。

任何时候开发人员手动操作翻译后的字符串都是潜在的昂贵错误的来源。剪切/粘贴或字符串编辑可能导致字符损坏、字符串错位等。翻译缺陷需要外部各方参与修复，这涉及成本和时间。

考虑一下，这样的事情可能不那么难看：

```
<p>Please update your address and contact information.
<br />
<a href="/address.do">update address</a>
<br />
<a href="/contact.do">update contact information</a></p> 
```

...但我不是 UI 设计师。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-16T17:40:46.880

想到的一种方法是您可以将翻译后的替换参数（即“地址”和“联系信息”）存储在单独的属性文件中，每个语言环境一个。然后让你的 Action 类（或者可能是一些帮助类）从正确的 ResourceBundle 中查找当前语言环境的值并将它们传递给消息标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-16T16:55:36.910

也许：

```
#
alert=Please update your {0}address{1} and {2}contact information{3}. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-16T20:56:26.517

> 消息消息标签 API 只允许 5 个参数参数

啊! 我责怪我对 Struts API 的完全无知。

引用[手册](http://struts.apache.org/1.2.7/userGuide/dev_bean.html)：

> JavaServer Pages 标准标记库 (JSTL) 中也提供了此标记库中的一些功能。Struts 团队鼓励尽可能使用标准标签而不是 Struts 特定标签。

您可以使用**[http://java.sun.com/jsp/jstl/fmt](http://java.sun.com/jsp/jstl/fmt)** taglib 执行此操作。

```
<fmt:bundle basename="messages">
    <fmt:message key="alert">
        <fmt:param value='<a href="/">' />
        <fmt:param value="</a>" />
        <fmt:param value='<a href="/">' />
        <fmt:param value="</a>" />
    </fmt:message>
</fmt:bundle> 
```

缺点是这不是有效的 XML，并且将值拉到变量中涉及更多的间接、查找和冗长。这不是一个好的解决方案。

我不了解 Struts，但如果它类似于 JavaServer Faces（相同的架构师），那么可能支持配置替换控件。我要么用更灵活的控件替换现有控件，要么添加一个新控件。

> 每当我收到新翻译的文本时，我必须决定用`<a>...</a>`标记包围什么。

你不可能这样做，我认为这是你翻译过程中的一个错误（我是一名前本地化工程师和本地化工具的前开发人员）。`{0}`字符应包含在发送给翻译人员的文件中。本地化指南应解释字符串的上下文和任何变量的含义。

您可以在返回时以编程方式验证属性包。特定于字符串的正则表达式可能会起作用。在翻译过程中，“地址”和“联系信息”会交换顺序并不超出可能的范围。

最简单的解决方案是重新设计要呈现的消息：

```
<a href="/address.do">Please update your address.</a>
<a href="/contact.do">Please update your contact information.</a> 
```

我接受这可能不是所有情况下的解决方案，并且可能会让您的 UI 设计师吐口水。

# ruby-on-rails - Ruby on Rails 中的 OpenID 身份验证

> ID：13254
> 
> 赞同：23
> 
> 时间：2008-08-16T17:54:58.100
> 
> 标签：ruby-on-rails, ruby, authentication, openid

我是 Ruby on Rails 的新手，但我创建了几个小应用程序。无论如何，我对 OpenID 真的很感兴趣，我想在 Rails 应用程序中实现 OpenID 身份验证以及一些 Sreg 的东西。我所做的所有研究都提出了已过时或对我不起作用的文章。由于我对 Rails 很陌生，我很难调试问题，所以......

在 Rails 中实现 OpenId 的最佳方法是什么？

# internationalization - 对于使用不同方向的语言有什么好的资源或建议吗？（如日语或中文）

> ID：13279
> 
> 赞同：8
> 
> 时间：2008-08-16T18:57:53.887
> 
> 标签：internationalization, multilingual

我们有一个企业 Web 应用程序，其中系统中的每一位文本都本地化为用户浏览器的文化设置。

到目前为止，我们只支持英语、美式（类似但拼写错误；-）和法语（针对加拿大政府 - 英语或法语应用程序，具体取决于用户偏好）。在开发过程中，我们还考虑了一些欧洲语言，例如荷兰语和德语，它们倾向于将单词连接成很长的单词。

我们目前正在调查对东方语言的支持：中文、日语等。我知道这些使用转换为书面字符的语音输入。这在网络上是如何工作的？在编辑输入和文本区域时触发相同的事件（我们非常重 Ajax）。

这些自上而下的语言的用户在网上期望什么约定？

他们的双输入（拼音输入+转换）对网页控件有什么影响？

对于像阿拉伯语这样的 RTL 语言，用户是否希望整个界面都被镜像？例如，是否应该在左侧交换 OK/Cancel 按钮之类的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-16T19:11:16.900

作为说阿拉伯语的人，当我查看阿拉伯语网站时，我确实希望可以交换 OK/Cancel 之类的内容。阅读阿拉伯语时，我的眼睛从右到左阅读。因此，如果您希望读者在否定/不作为按钮（取消、清除、否等）之前查看肯定/操作按钮（例如确定、提交、是等），您可能会想把前者放在右边。

警告：听起来很奇怪，以上仅适用于（对我个人而言）按钮文本为阿拉伯语的情况。如果按钮文本是英文（在混合语言网页中），我希望看到左侧的 OK 按钮。

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-06T02:04:37.263

阅读Microsoft[的《逐步全球化》 。](https://web.archive.org/web/20080829004345/http://www.microsoft.com/globaldev/getwr/steps/WRGuide.mspx)

我可以回答有关 CJKV 的具体问题，但您可能想要一本关于这个主题的书。我还没有读过它，但 CJKV 信息处理来自 O'Reilly（2008 年 12 月第二版）。

> 我知道这些使用转换为书面字符的语音输入。这在网络上是如何工作的？

输入由Windows、Mac 和 Linux（例如 SCIM）上称为[IME（输入法编辑器）的一类软件完成。](http://en.wikipedia.org/wiki/Input%5Fmethod%5Feditor)当 IME 打开时，来自键盘的输入首先进入 IME，然后用户可以选择正确的汉字/平假名组合。当用户通过按回车键提交时，输入法会使用当前编码将汉字/平假名输入到 Web 浏览器中。编码情况非常混乱，但如果你正在编写一个 Web 应用程序，请使用 Unicode 编码。我建议使用 UTF-8。

> 在编辑输入和文本区域时是否会触发相同的事件？

精通 Unicode 的网络浏览器和操作系统组合可处理多种语言。例如，可以使用英文普通版 Firefox 浏览和发布到日本网站。从浏览器的角度来看，它只是 Unicode 中的“bla bla bla”数组。换句话说，如果事件以英语触发，如果您使用 Unicode 变体，相同的事件应该以 CJKV 触发。

> 这些自上而下的语言的用户在网上期望什么约定？

CJKV 读者期望从左到右在线。数学和科学教科书是从左到右书写的。大多数文字处理器，包括 Word 的本地化版本，都是从左到右书写的。

> 他们的双输入（拼音输入+转换）对网页控件有什么影响？

在大多数情况下，您不必担心它，除非您正在捕获键盘事件。例如，我讨厌将日语键盘与一堆额外的键盘一起使用。因此，当我必须将 IME 开/关命令分配给美国键盘上的某个键时。我个人使用右-Alt。此外，在转换过程中使用了空格键和回车键，但不确定这些事件是否传递给浏览器。

如果你愿意，我可以测试你的网站。（我的用户名）@gmail。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-02T22:05:22.513

东亚语言的方向性问题很容易回答：网站通常是从左到右、从上到下的。

其实，一般的网页设计布局原则大同小异。看看[报纸](http://www.yomiuri.co.jp/)的网站（名字左上角，导航栏下面有“主页”在左边，标题链接下面最重要的在顶部）或[搜索引擎](http://www.baidu.com/)（我认为我不需要说哪个美国您应该将该布局与之进行比较的站点）。

然而，正如阿拉伯语/希伯来语/等从右到左的语言用户在某些情况下（嵌入的英语片段等）会期望从左到右的进展一样，在某些情况下，即使在网络上，从上到-底部布局是首选。这通常通过包含具有所需文本布局和字体的图像或使用 Flash 来完成。

从 5.5 版开始，Internet Explorer 实际上已经提供了带有 CSS [writing-mode 属性的 tb-rl 布局，但是](http://msdn.microsoft.com/en-us/library/ms531187.aspx)[其他浏览器](http://www.blooberry.com/indexdot/css/properties/intl/writingmode.htm)都没有打扰实现它（或者 ruby​​，这对于针对年轻受众的网站很有用）。IE 5.5 发布于 2000 年，支持了 8 年，2003 年有[W3C 候选推荐](http://www.w3.org/TR/2003/CR-css3-text-20030514/#Progression)，但[CSS 中的文本布局仍然被戳中](http://dev.w3.org/csswg/css3-text-layout/#writing-mode)。

至于您对文本输入和 IME 的担忧，只要您不做一些虚假的事情，例如尝试将 keydown 事件给出的虚拟键手动转换为文本字符串，您就不太可能遇到问题。

但是，还有一些您没有提到的其他问题。最小的舒适可读字体大小大于使用拉丁脚本编写的语言。强调流的粗体和斜体通常是不合适的。汉统一意味着在使用 unicode 时需要为不同的 CJK 语言指定正确的字体。您可能希望为中文提供繁体和简体界面，具体取决于您期望的受众。

一段时间以来，我一直想写一个更全面的指南，如果您需要更多信息，请随时踢我。

# php - 如何确定 CodeIgniter 的速度？

> ID：13293
> 
> 赞同：19
> 
> 时间：2008-08-16T19:27:20.473
> 
> 标签：php, performance, codeigniter, benchmarking

我正在考虑使用一个名为[CodeIgniter](http://codeigniter.com/)的 PHP 框架。

我感兴趣的一件事是它的速度。然而，我没有办法知道它有多快，也不想简单地接受他们网站上的说法。有谁知道我如何自己确定它的速度，或者有人可以告诉我一个可以的网站吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-08-16T21:19:51.167

Code Igniter 也有一些内置的基准测试工具： [http ://codeigniter.com/user_guide/general/profiling.html](http://codeigniter.com/user_guide/general/profiling.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-17T10:39:26.747

是的，问题是你必须构建你的应用程序来分析它。

在工作中，我们有几个在外面编写的项目，我们在将它们放在我们的主盒子上之前进行了负载测试。我们非常惊讶地发现两者都存在严重的性能问题。一个是用 CakePHP 编写的，另一个是用 Drupal 编写的。我不认为这突出了任何框架或 CMS 的问题，除了需要在任何将获得大量流量的站点上进行分析和负载测试。在这两种情况下，导致问题的都是开发人员所做的，而不是软件平台的特性。例如，开发人员在 Cake 项目中创建了一个递归函数调用，它在每次递归时实例化整个 Cake 对象，如果服务器在负载下运行，这将导致服务器中断。

在我看来，性能不应该是选择框架的决定性因素；客观差异可能是微不足道的，并且您使用它的方式可能会导致比框架的固有性能更多的性能问题。

我相信，要将任何 PHP 应用程序扩展为在负载下运行，您将需要一个操作码缓存，并且您需要使用诸如 memcached 之类的东西或您的框架支持的任何内置缓存来编写智能内容缓存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-17T10:17:57.103

如果您的站点是数据库驱动的，如果您的瓶颈是应用程序框架，我会感到非常惊讶。我担心的是更快开发中的“快速”，而不是快速处理请求中的“快速”。通过缓存策略和优化数据库访问可以更好地进行重大优化。

除了数据库访问之外，您自己的代码将是每个请求花费大部分时间的地方（即使这与数据库访问相比通常并不重要），框架可能不会影响花费在请求上的时间，除非它真的是写得不好。

最好寻找一个具有良好缓存支持的框架（Code Igniter 可能有，我不知道），这几乎总是可以为您节省更多的时间，而不是您可以通过使用稍快的框架。

也看看 Zend 框架，它具有 PHP 5 的优点，而据我了解，Code Igniter 仍然是 PHP 4。在速度方面这可能是一个问题，但我不知道支持哪个框架。Zend 具有良好的缓存支持和数据库分析器，可以帮助您找到瓶颈所在。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-16T19:51:18.273

我建议自己测试一下。使用[xdebug 的分析器](http://www.xdebug.org/docs/profiler)创建一个 cachegrind 兼容文件和[webgrind](http://code.google.com/p/webgrind/)来可视化文件。

这样你就可以得到非常可靠的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-04T00:46:47.640

CodeIgniter 对于大多数项目来说都非常快。有些人在这里发帖，如果你用谷歌搜索，你会发现它在速度方面优于其他框架。

我同意另一位发帖者的观点，即在框架选择方面，性能通常不是一个大问题。主要框架对于大多数项目都有足够的性能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-03-24T19:12:35.963

我维护了一个每年都会被抨击几次的网站。去年，开发团队使用 Codeigniter 重写了整个网站，我们在性能方面非常幸运。此外，执行重写所需的时间非常短，因为这个框架很容易使用。如果您发现自己不喜欢 Codeigniter，我认为 CakePHP 也是一个不错的选择。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-27T07:51:24.320

对于 CodeIgniter 和其他 PHP 框架，**PHP Quick Profiler**对于基准测试和测量速度非常方便，尤其是对于数据库查询。您必须检查一下： [php-quick-profiler](http://www.particletree.com/features/php-quick-profiler/)

它非常易于安装，并提供了一个很棒的 GUI 来检查不同的基准测试。

# asp.net - 没有 System.Drawing/GDI+ 的 asp.net/c# 中的图像处理

> ID：13299
> 
> 赞同：11
> 
> 时间：2008-08-16T19:42:42.937
> 
> 标签：asp.net, system.drawing

.net 是否有任何替代图像处理库？我更喜欢托管和开源的东西。

我问这个是因为两个原因：

1.  过去我遇到过使用 System.Drawing 难以调试 GDI+ 错误
2.  我读过在 asp.net web 应用程序中使用 System.Drawing 不是 100% 支持的。

谢谢！

编辑：澄清，我知道 System.Drawing 可以运行 asp.net 网络应用程序 - 我过去曾使用过它。我真的只是想知道是否有任何用于 .net 的托管图像处理库 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-19T17:35:27.210

您应该查看[.NET 3.0 附带的 WPF Imaging 库](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.aspx)。它们经过优化且功能强大（用于运行 Aero，因此您知道它们很高效）。它们不依赖于 WPF 调度程序，易于扩展，并得到官方支持。你还能想要什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-25T23:41:34.683

我不知道有任何完全托管的 2D 绘图库是免费的还是开源的（似乎有一些商业可用，但 OSS 是要走的路）。但是，您可能会查看[Mono 与 Cairo 的绑定](http://www.go-mono.com/docs/index.aspx?tlink=0@N:Cairo)。

Cairo 是一个独立于平台的 2D 绘图 API。[您可以在开罗主页](http://cairographics.org)上找到有关它的更多信息。开[罗维基百科页面](http://en.wikipedia.org/wiki/Cairo_(graphics))也有一些很好的信息。

Cairo 在开源世界中也被广泛使用，这对我来说说明了它的稳健性。Mozilla、Webkit 和 Mono 都使用它，等等。具有讽刺意味的是，Mono 实际上使用它来支持他们的 System.Drawing 实现......看图。

也可能有一种方法可以使用 Mono 的 System.Drawing 实现作为 Microsoft 实现的直接替代品，尽管我不确定它如何或是否会起作用。我可能会先用 Mono 的版本替换 System.Drawing.dll 引用，然后尝试处理任何错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-16T20:13:46.480

轶事证据 #1：我使用 GDI+ 在 ASP.NET 中进行动态图像创建，没有任何问题。我不确定甚至会出现什么问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-16T20:05:50.910

关于 (1)，大多数难以调试的错误是由于未关闭打开的句柄（托管区域中的 Dispose()）。我很好奇你在哪里听到的（2）。

# estimation - 您一天中有多少时间用于编码？

> ID：13343
> 
> 赞同：28
> 
> 时间：2008-08-16T20:30:56.273
> 
> 标签：estimation, time-management

我最近一直在考虑软件估算，我有很多关于编码时间的问题。我很想听听那些至少有几年软件开发经验的人的来信。

当您必须估算您将花费在某件事上的时间时，您一天中有多少小时用于编码？什么占据了其他非编码时间？

你发现你花在编码上的时间比你的队友多还是少？你觉得你完成的工作比他们多还是少？

你的工作条件如何？私人办公室、共享办公室、团队室？单独编码还是成对编码？您的工作条件如何改变了您每天花在编码上的时间？如果您可以在家工作，这对您的工作效率有帮助还是有损？

您使用什么开发方法？瀑布？敏捷？从一种方法更改为另一种方法是否对您每天的编码时间产生了影响？

最重要的是：您对自己的工作效率满意吗？如果不是，你会做出哪一个改变会对它产生最大的影响？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-08-16T21:25:03.607

我是一名企业开发人员，乔尔·斯波尔斯基（Joel Spolsky）在几个 StackOverflow 播客中称其为“沮丧”。因为我的公司不是一家软件公司，所以几乎没有商业理由来实施软件专家建议公司为提高开发人员生产力而采取的许多措施。

我们没有私人办公室和双 30 英寸显示器。我们的源代码控制系统是 Microsoft Visual Source Safe。说够了。另一方面，我可以做很多事情来充实我的一天，并为我的工作增添一些变化。我参与业务分析、项目管理、开发、生产支持、国际实施、培训支持、团队规划和流程改进。

我会说我一天中有 85% 的时间用于编码，那时我可以集中精力并且有一项主要的编程任务。但更多时候，我一天中有 50% 的时间用于编码。如果生产支持（非编码相关）很繁重，我可能只有 15% 的时间用于编码。

我工作过的大多数公司都没有积极参与评估敏捷流程或测试驱动开发，但他们也没有做好瀑布式工作；他们的大多数开发人员都像剪切和粘贴的牛仔一样肆无忌惮地工作。

有时我会在家和孩子一起工作，这*太可怕*了。我的工作效率更高。

我的工作效率很好，但如果消除干扰因素和心理上下文切换的成本可能会更好。生产支持和项目管理开销都会造成这些类型的中断。但两者都是工作的必要部分，所以我认为我无法摆脱它们。我想考虑的是对团队进行重组，以便项目人员可以专注于项目，而其他人可以通过专注于支持来阻止中断。然后在项目结束时交换。

不幸的是，没有人愿意提供支持，所以我希望的其他生产力改进措施将是以下之一：

*   更好的测试工具/方法来加速单元测试
*   更好的业务分析工具/技能，以提高新开发的质量并限制其对生产支持负载的贡献

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-08-16T21:38:59.863

实际上，它可能平均每天 4 或 5 个小时。虽然它“笨拙” - 可能有几天可能有 8 或 9 个小时。

在我认识的所有软件开发人员中，4 到 5 人编写生产代码（而不是研究代码）似乎是实际编码的最大值。还有很多其他的事情。

老实说，有很多拖延。我觉得它有点像作家们的障碍。有时它只是很难开始，但是一个好的 2 小时的会议是完成了很多工作。它只是您必须经历的所有准备工作，以及确保您采用正确方法的实验。无休止地盯着窗外检查电子邮件等......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-16T22:30:51.413

我每周工作 37.5 小时。
其中 30 个小时（80%）我应该向我们的客户收费。
实际上，我发现我在实际客户端系统上使用了大约 60% 的编码，20% 用于试验新技术和阅读博客，20% 被浪费在办公室政治和“社交”上。

我对此感到高兴吗？
我是否希望我可以每周 30 小时盯着屏幕对给定的作业进行编码？

好。由于 20% 的时间用于提高自己的手艺，因此在 60% 的有效编码中，我可能会比我在 90% 的时间里如果不这样做的情况下产出更多。
再说一次，试着向高层解释这个事实；）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-17T00:34:27.497

> 嗯，我通常至少迟到十五分钟，啊，我使用侧门——这样Lumbergh 就看不到我了，嘿嘿——然后，呃，在那之后我就在外面闲逛了大约一个小时。
> 
> ...是的，我只是盯着我的办公桌；但看起来我正在工作。午饭后我也这样做了一个小时。我会说在给定的一周内，我可能只做大约 15 分钟真正的、实际的工作。

对我来说，项目之间的切换是拖延的一个重要原因。当我刚刚完成一个项目时，我倾向于拖延开始分配给我的下一个要求。我的头脑感觉仍然像在编码模式，但我必须先估算创建规范的费用。所以我不得不从编码切换到打电话给客户之类的，这感觉很不舒服。

最能帮助我提高工作效率的是在一天的最初几个小时内消除任何分心，并立即开始一天中最重要的任务。我需要尽早进入流程。

* * *

我建议看一下 The Programmers' Stone：

[我们知道压力会损害一些认知功能。失去这些功能可以准确地解释为什么编程很困难，并向我们展示了许多其他改进我们组织事物方式的机会。其后果涉及语言、逻辑和文化规范。点击这里查看简介...](http://the-programmers-stone.com/about/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-08-16T21:47:45.137

我每天大约有 40% 的时间用于编码。40% 用于非编码活动（例如与我们粗略的构建服务器打架，或者弄清楚为什么 NUnit 失败而没有再次出现错误消息，或者试图弄清楚为什么我们的代码停止与楼下的 Oracle 服务器通信......像这样的垃圾）。另外 20% 通常用于拖延或开会。

我对自己的生产力满意吗？绝对不。我每天工作 7 个小时左右，我花了大约 2.5 个小时进行编码。我宁愿每天花 5 到 6 个小时进行编码，而只花一个小时来处理所有其他事情（遗憾的是，会发生这种情况的一件事——PM 不再每天都在玩弄构建脚本—— - 不会发生）。不幸的是，由于我是一名企业开发人员，管理层并没有看到时间被浪费掉。因为我在一天中 40% 的时间里完成的工作比大楼里的大多数无人机在一周内完成的工作要多得多（包括 PM），所以他们认为我的工作效率很高。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-17T03:23:34.350

@Bernard Dy：我大概有 30% 的职业生涯是在公司环境中度过的（目前还没有）。通常是在一些失败（或没有失败，但失败）的启动想法或某种倦怠/改变之后。有一点没关系，很高兴认识来自完全不同背景的人（他们会认为与律师和精算师一起出去玩会很有趣），但最后，我觉得很难得到早上起来有动力（或在假期害怕回去之后） - 可能是因为你定义的原因（只是缺乏关心）。但它至少有很好的经验和想法的来源。你可以在任何地方遇到聪明的人（不仅仅是聪明的程序员——我总是试图找出谁是企业背后的真正大脑）。

有趣的是，我唯一一次练习严格的敏捷/XP 是在公司环境中——在那种情况下，每天可能有 7 个小时是实际动手编写代码（成对）——在那一天之后，我从未如此筋疲力尽。不确定这是否是一件好事，也许我只是懒惰。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-16T20:36:02.877

回答我自己的一些问题：

我目前所在的团队只进行粗略的任务估算，因此很难跟踪每天的小时数。我想说的是，在我的职业生涯中，编码时间在 25%（主要是管理）到 85%+（每周 4 天在家工作，每周一次半天开会）之间。但是，如果我不得不猜测，平均值可能在 60% 附近。

对我来说，编码时间对我影响最大的是会议的存在与否。当我和每个人在同一个房间里进行敏捷项目时，会议往往是临时的，而且时间很短，所以编码所花费的时间非常多。当我在团队房间时，我还觉得我花更少的时间——有时是更少的时间——做非编码的事情，因为当没有人清楚地看到你的显示器时，更容易浪费时间，不管是意外还是其他. :)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-17T07:34:31.550

我做外包，基本上我整天都在编码，我有两个项目，我没有太多时间做其他事情，这意味着我不能做更多的工作，因为我无法完成任何事情，这是一个好政策，你应该尽可能地服用。

还要记住，你应该有空闲时间，非常重要的是要充分休息，因为如果你不这样做，你就不会很有效率。这里的关键是计划和纪律。

在我的非编码时间里，我和妻子一起度过，我也喜欢出城，尽量不去想我的项目，我越是平衡这种平衡，我就越有效率。

当我工作不多时，我喜欢阅读编程博客，也喜欢学习编程。

最后我想说的是，恕我直言，我们的职业不应该被视为一部作品，而应该将其视为有趣的东西。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-03-21T07:33:49.087

我是研发部门的一名软件开发人员，每周工作 40 小时。

我花了... 10% 的时间实际编码。在我的非编码时间，我主要测试、评估、比较和记录结果。我还花很多时间为我将要编写的代码编写规范和研究我将要编写的代码，我参加当前项目的头脑风暴会议等。

我可以说，从我的队友（也是软件开发人员）来看，我是目前编码最多的人；但取决于我们每次工作的任务。我不会将实际编码量化为努力工作。如果有一个好的规范、适当的研究和对项目的良好理解，编码只是一个`formality`并且几乎可以顺利快速地进行。

在这里，我们有一个共享办公室，有两个团队。我们大多是一个人编码，很少一对一。我的工作改变了我编码的时间；过去我大部分时间都花在编码上，对编码没有很好的理解。如果我有一项任务，我会立即开始编码，并且每次我意识到自己做错了什么时都会重新编码，等等。这是非常无效的。

开发方法现在介于原型和螺旋之间。它清楚地改变了我编码的小时数。

我对自己的工作效率感到满意，这与我的截止日期和目标有关。

# firefox - Firefox 插件 - 套接字

> ID：13345
> 
> 赞同：4
> 
> 时间：2008-08-16T20:31:44.867
> 
> 标签：firefox, dom, sockets, plugins

我一直想要一种与服务器建立套接字连接并允许服务器操作页面 DOM 的方法。例如，这可以在股票报价页面中使用，因此服务器可以在新报价可用时推送它们。

我知道这是 HTTP 请求/响应协议的经典限制（功能？），但我认为这可以作为 Firefox 插件实现（跨浏览器兼容性对我的应用程序并不重要）。Java/Flash 解决方案是不可接受的，因为（据我所知）它们存在于一个盒子中并且不能与 DOM 交互。

谁能确认这是否在 Firefox 插件的能力范围内？有人已经创建了这个或类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-16T20:47:26.553

您可能想查看[Comet](http://en.wikipedia.org/wiki/Comet_(programming))，这是一个花哨的名称，表示服务器可以将更新推送到页面的长时间运行的 HTTP 连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-17T02:58:47.783

这应该是可能的。我开发了一个使用套接字连接到 TCP 服务器的 xulrunner 应用程序。扩展开发可能具有相同的功能。我使用了 mozdev - [JSLib](http://jslib.mozdev.org/)的库。具体检查[网络代码](http://jslib.mozdev.org/libraries/network/network.html)。Firefox 的 JSlib 插件有一个[Firefox 插件](https://addons.mozilla.org/en-US/firefox/search?q=jslib&cat=all)，这一事实让您更加自信。

本质上，据我了解，套接字不是 JavaScript 的一部分，但通过 XPCOM，您可以像在任何 c/c++ 应用程序中一样获得原始套接字访问。

警告： *JSLib 似乎没有受到太多关注，而且邮件列表非常稀疏。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T20:14:19.783

> Java/Flash 解决方案是不可接受的，因为（据我所知）它们存在于一个盒子中并且不能与 DOM 交互。

Java 并非如此。您可以通过 JavaScript 与 Java 交互并进行 DOM 更改。

[http://stephengware.com/proj/javasocketbridge/](http://stephengware.com/proj/javasocketbridge/)

在这个例子中，有两种 JavaScript 交互方法

发送：

`socket_send("This was sent via the socket\n\n");`

收到：

`on_socket_get(message){ more_code(message); }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-16T22:28:23.307

> 你可能想看看彗星

又名[服务器推送](http://ejohn.org/blog/streaming-http-server-push/)。这不会让服务器直接“更新”客户端页面，而是通过单个连接将所有新数据发送到页面。

当然，Firefox[扩展](http://developer.mozilla.org/en/docs/Extension)（以及[插件](http://developer.mozilla.org/en/docs/Plugins)，它们是二进制库，可以做任何其他应用程序可以做的任何事情）也可以与套接字一起使用。见[1、2](http://www.xulplanet.com/tutorials/mozsdk/serverpush.php)。_ [_](http://www.xulplanet.com/tutorials/mozsdk/serverpush.php)

# user-interface - 多显示器开发

> ID：13347
> 
> 赞同：9
> 
> 时间：2008-08-16T20:37:09.053
> 
> 标签：user-interface, hardware, monitor, environment

我们目前正在开发我们的主要应用程序的新版本。我真正想做的一件事是为多台显示器提供支持。我们的目标用户越来越多地在他们的桌面上添加第二个屏幕，我认为我们的产品可以利用这个额外的空间来提高用户性能。

我们的应用程序是一个支持租赁和车队公司的财务方案——一个非常专业的市场。话虽如此，我相信许多拥有多台显示器的人都有自己喜欢的软件，他们认为如果能更好地支持这些额外的屏幕，它们会得到改进。

我正在寻找一些关于您对当前软件的小问题的意见，以及您认为如何改进它们以支持多显示器设置。我的目标是审查这些并决定如何实施它们，并希望为我的用户提供更好的环境。

感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-16T21:37:14.360

一些随机提示：

*   如果可以同时打开多个窗口，则允许用户将它们显示在不同的屏幕上。看起来很明显，但是一些非常流行的应用程序（例如 Visual Studio）在这方面失败了。
*   记住上次打开窗口的位置，并在同一个屏幕上打开新窗口。但是，有时用户会在多显示器和单显示器之间切换（例如，将笔记本电脑与外部 CRT 对接），所以手表也覆盖了这种情况。
*   考虑您的特定用户的工作方式，以及同时拥有两个最大化的窗口可能会有所帮助。通常，有一个（相当被动的）参考窗口（例如网络浏览器/帮助）和一个供用户切换的数据输入的活动窗口（例如编辑器/数据库）。
*   不要**将**工具箱/工具栏放在与它们操作的对象不同的窗口上（到目前为止移动鼠标很不方便）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-08-16T22:37:11.447

自 1987 年以来， Apple 的Mac[人机界面指南](http://developer.apple.com/documentation/UserExperience/Conceptual/AppleHIGuidelines/index.html "人机界面指南")涵盖了多台显示器的窗口管理，当时 Mac II 推出了六个插槽，所有插槽都可以包含显卡。该指南提供了一些在实施多窗口支持时您可能不会想到的好的指南。例如，如果一个窗口跨越多个显示器，应该在哪个显示器上打开新窗口？在处理窗口行为的章节中，[图 14-33](http://developer.apple.com/documentation/UserExperience/Conceptual/AppleHIGuidelines/XHIGWindows/chapter_18_section_5.html#//apple_ref/doc/uid/20000961-TPXREF39)有一个答案。

微软现在可能有类似的东西供 Windows 开发人员效仿；如果是这种情况，请检查并遵循他们的指导方针，因为您不希望无缘无故地表现出与系统上其他应用程序（或您的用户习惯）不同的行为。但是，如果没有指南，请遵循 Apple 的指南，因为它们经过深思熟虑，最初是通过实验和研究开发的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-08-17T01:39:01.003

**请请请**。如果您记得多个显示器的窗口位置。请检测是否连接了第二台显示器。我有一台有时会对接的笔记本电脑。当我尝试打开一个窗口并且它在屏幕外打开时，这很烦人。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-16T20:50:47.373

当我将一个窗口拖到另一个监视器上时，如果应用程序生成一个弹出对话框或生成另一个窗口，如果该弹出/对话框重新显示在主监视器上，这很烦人。

我还没有为多显示器开发，但我认为如果您将子窗口/对话框定位在其父窗口的中心而不是桌面中心（我猜这是我如上所述）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-16T22:21:59.793

我将不得不向 dbkk 的方向点头，因为他们抓住了您需要记住的几个要点。

另外，我建议您注意如何使用双显示器，并在开发过程中牢记这一点。一般来说，你应该尽量避免做你工作的应用程序做的让你烦恼的事情。另外，不要假设用户有双显示器，他们就会想在双显示器上使用您的应用程序。

我要强调的最重要的事情是跟踪应用程序中的焦点位置，并确保在该区域内出现任何弹出窗口，人们似乎最不喜欢的一件事是弹出窗口与他们正在处理的窗口不同的窗口。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-16T21:44:17.203

绝对将对话框保持在您单击以显示它们的位置附近。记住会话之间的窗口在哪个监视器上。请注意，如果它们的监视器比上次运行应用程序时少，则需要将窗口带回可见区域。提供一个图标或按钮来切换监视器。根据应用程序的类型，能够轻松地将应用程序的窗口平铺在监视器上或全部上可能很有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-21T03:37:22.220

要记住的一件事是，用户可能有两个以上的显示器。我的主系统有六台显示器，我在 Linux、Windows 和 Mac OS 上运行了 4 台以上的显示器。许多应用程序——甚至是多显示器实用程序——将支持 2 个显示器，但会超过 2 个。

当应用程序知道他们的窗口在哪里并且与这些窗口的位置相关时，它们的工作效果最好。正如其他人提到的，如果您要记住窗口的位置，请确保当用户返回时几何图形仍然有意义。

如果操作系统/窗口系统调度与屏幕几何形状变化相关的事件，如果您正在做任何时髦的事情，请处理它。

我认为现在大多数编码良好的应用程序通常都能正常工作。

# database - 为每个客户使用单一数据库有什么优势？

> ID：13348
> 
> 赞同：66
> 
> 时间：2008-08-16T20:39:26.070
> 
> 标签：database, database-design, multi-tenant

在为多个客户端设计的以数据库为中心的应用程序中，我一直认为为所有客户端使用单个数据库“更好” - 将记录与适当的索引和键相关联。在收听 Stack Overflow 播客时，我听到 Joel 提到 FogBugz 每个客户端使用一个数据库（因此，如果有 1000 个客户端，则将有 1000 个数据库）。使用这种架构有什么好处？

我知道对于某些项目，客户需要直接访问他们的所有数据——在这样的应用程序中，很明显每个客户都需要自己的数据库。但是，对于客户端不需要直接访问数据库的项目，每个客户端使用一个数据库有什么好处吗？似乎就灵活性而言，使用具有单个表副本的单个数据库要简单得多。添加新功能更容易，创建报告更容易，并且更易于管理。

在我听到 Joel（一位经验丰富的开发人员）提到他的软件使用不同的方法之前，我对“所有客户的一个数据库”方法非常有信心——我对他的决定有点困惑......

我听说有人提到数据库会因大量记录而变慢，但任何具有某些优点的关系数据库都不会出现这个问题——尤其是在使用适当的索引和键的情况下。

非常感谢任何输入！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-08-16T20:48:00.403

假设将所有客户端存储在一个数据库中没有扩展损失；对于大多数人以及配置良好的数据库/查询而言，如今这将是相当真实的。如果您不是这些人中的一员，那么单个数据库的好处是显而易见的。

在这种情况下，好处来自对每个客户端的封装。从代码的角度来看，每个客户端都是孤立存在的——数据库更新不可能覆盖、破坏、检索或更改属于另一个客户端的数据。这也简化了模型，因为您无需考虑记录可能属于另一个客户端的事实。

您还可以获得可分离性的好处 - 提取与给定客户端关联的数据并将它们移动到不同的服务器是微不足道的。或者在调用“我们删除了一些关键数据！”时使用内置数据库机制恢复该客户端的备份。

您可以获得轻松且免费的服务器移动性——如果您超出了一台数据库服务器的规模，您可以在另一台服务器上托管新客户端。如果它们都在一个数据库中，您需要获得更强大的硬件，或者在多台机器上运行数据库。

您可以轻松进行版本控制 - 如果一个客户想要保留软件版本 1.0，而另一个客户想要 2.0，其中 1.0 和 2.0 使用不同的数据库模式，那么没有问题 - 您可以迁移一个，而无需将它们从一个数据库中拉出。

我猜我还能想出几十个。但总而言之，关键概念是“简单”。该产品管理一个客户端，因此管理一个数据库。“但数据库还包含其他客户端”问题从来没有任何复杂性。它适合用户单独存在的心理模型。能够同时轻松报告所有客户的优势是微乎其微的 - 您希望多久报告一次全世界，而不仅仅是一个客户？

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-08-16T23:14:32.260

这是我以前见过的一种方法：

*   每个客户都有一个存储在主客户数据库中的唯一连接字符串。
*   该数据库的设计使得所有内容都按 CustomerID 进行分段，即使数据库中只有一个客户。
*   如果需要，将创建脚本以将所有客户数据迁移到新数据库，然后只需更新该客户的连接字符串以指向新位置。

这允许首先使用单个数据库，然后在您拥有大量客户后轻松进行分段，或者更常见的是当您有几个过度使用系统的客户时。

我发现当所有数据都在同一个数据库中时，恢复特定客户数据非常困难，但管理升级要简单得多。

当每个客户使用一个数据库时，您会遇到一个巨大的问题，即让所有客户都以相同的模式版本运行，这甚至不考虑在一大堆客户特定数据库上的备份作业。恢复数据自然更容易，但如果您确保不永久删除记录（只需用已删除标志标记或移动到存档表），那么您首先不需要数据库恢复。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-08-16T22:52:52.010

保持简单。您可以确定您的客户只看到他们的数据。记录较少的客户不必支付与数十万条可能在数据库中但不是他们的记录竞争的惩罚。我不在乎所有内容的索引和优化程度如何，会有一些查询决定他们必须扫描每条记录。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-08-16T20:45:23.920

那么，如果您的一位客户由于某些拙劣的导入工作或类似情况而告诉您恢复到他们的数据的早期版本怎么办？想象一下，如果您告诉客户“您不能这样做，因为您的数据在我们所有的客户之间共享”或“抱歉，您的更改丢失了，因为客户 X 要求恢复数据库”，您的客户会有什么感受。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-08-16T23:18:55.623

至于一次升级 1000 台数据库服务器的痛苦，一些相当简单的自动化应该可以解决这个问题。只要每个数据库都维护一个相同的模式，那么它就不会成为真正的问题。我们还使用每个客户端的数据库方法，它对我们很有效。

这是一篇关于这个确切主题的文章（是的，它是 MSDN，但它是一篇独立于技术的文章）：http: [//msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)。

关于多租户的另一个讨论，因为它与您的数据模型有关：http: [//www.ayende.com/Blog/archive/2008/08/07/Multi-Tenancy--The-Physical-Data-Model.aspx](http://www.ayende.com/Blog/archive/2008/08/07/Multi-Tenancy--The-Physical-Data-Model.aspx)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-08-16T20:48:35.193

可扩展性。安全。我们公司也使用每个客户方法 1 DB。它还使代码更易于维护。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-16T23:31:29.637

在医疗保健等受监管的行业中，可能需要每个客户一个数据库，甚至可能需要一个单独的数据库服务器。

升级时更新多个数据库的简单答案是将升级作为事务进行，并在必要时在升级之前拍摄快照。如果您的操作运行良好，那么您应该能够将升级应用到任意数量的数据库。

集群并不是真正解决索引和全表扫描问题的方法。如果你移动到一个集群，几乎没有什么变化。如果您有许多较小的数据库要分布在多台机器上，那么您可以在没有集群的情况下更便宜地做到这一点。可靠性和可用性是考虑因素，但可以通过其他方式处理（有些人仍然需要集群，但大多数人可能不需要）。

我有兴趣从您那里听到更多关于此的背景信息，因为集群不是一个简单的主题，并且在 RDBMS 世界中实施起来很昂贵。在非关系世界 Google Bigtable 等领域有很多关于集群的讨论/虚张声势，但他们正在解决一组不同的问题，并且失去了 RDBMS 的一些有用功能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-16T22:46:34.550

“数据库”有几种含义

*   硬件箱
*   正在运行的软件（例如“oracle”）
*   特定的数据文件集
*   特定的登录名或架构

乔尔很可能是指较低层之一。在这种情况下，这只是软件配置管理的问题……例如，您不必修补 1000 台软件服务器来修复安全漏洞。

我认为这是个好主意，这样软件错误就不会在客户端之间泄漏信息。想象一下带有错误 where 子句的情况，该子句向我显示了您的客户数据以及我自己的数据。

# c# - 覆盖 WinForms 中的选项卡行为

> ID：13353
> 
> 赞同：5
> 
> 时间：2008-08-16T20:48:00.590
> 
> 标签：c#, .net, winforms

我有一个由三个文本框组成的用户控件。在一个表单上，我可以有一个或多个或我的 UserControl。我想实现我自己的选项卡行为，所以如果用户在第二个 TextBox 中按下 Tab，我应该只在第二个 TextBox 输入任何内容时移动到第三个 TextBox。如果在第二个 TextBox 中没有输入任何内容，则表单的下一个控件应该按照正常的选项卡行为获得焦点。如果用户没有在第一个或第二个 TextBox 和 presses 选项卡中输入任何内容，那么在这种特殊情况下，应该跳过表单上的控件。

通过使用 ProcessDialogKey，我设法让它工作得很好，但我仍然有一个问题。我的问题是是否有办法检测 WinForms 控件如何获得焦点，因为我还想知道我的 UserControl 是否从 Tab 或 Shift-Tab 获得焦点，然后做我奇怪的事情，但如果用户单击控件我不想做任何特别的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-16T20:55:29.483

作为一般规则，我会说覆盖 TAB 键的标准行为是一个坏主意。也许您可以执行诸如禁用第三个文本框之类的操作，直到在第二个文本框中输入有效条目为止。

*现在，说了这么多，我也应客户的要求打破了这个规则。我们使回车键的功能类似于制表键，回车键会将值保存在文本字段中，并将光标移动到下一个字段。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-16T21:38:26.090

我不认为有一种内置的方式可以做到这一点。所有的 WinForms 焦点事件（GotFocus、LostFocus、Enter、Leave）都是用空的 EventArgs 参数调用的，它不会给你任何额外的信息。

正如 Rob Thomas 所说，就个人而言，我会禁用第三个文本框。但是，如果您决心这样做，那么设置手动（阅读：hackish）解决方案并不难。一旦按下 tab 键（如果焦点在第二个文本框上），在表单中设置一个变量。如果下一个聚焦的对象是第三个文本框，那么您就知道它是如何发生的了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-17T06:50:14.633

这种奇怪的选项卡行为的原因在于输入过程的速度。获得一些输入真的很好，我没想过禁用文本框，但这实际上可以工作。但是我什至没有想到使用 Enter 键接受输入。这样会好很多。用户可以输入数字，然后按回车键接受输入，下一个可能的文本框将是活动的。就像吃蛋糕一样，速度因素就在那里，因为当使用回车键时，无需进行不必要的制表键即可到达正确的字段，并且使用数字键盘旁边的回车键使其非常流畅。

感谢您的输入！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-16T22:02:07.150

我同意丹尼蓝精灵的观点。如果应用程序的要求发生变化，弄乱标签顺序可能会在以后给您带来麻烦。

您可以做的另一件事是为用户实现某种向导。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-22T20:18:13.167

比禁用控件更好，尝试使用 TabStop 到处乱跑 - 如果这是错误的，则在切换时将简单地跳过控件。

我还建议 TextBox 的 Changed 事件是在其他控件上更新 TabStop 的地方。

我用登录控件做了类似的事情，用户可以输入用户名或电子邮件地址（在单独的字段中），加上他们的密码，而 tabStop 是我用来完成工作的。

# javascript - 使用 JavaScript 滚动溢出的 DIV

> ID：13362
> 
> 赞同：49
> 
> 时间：2008-08-16T21:04:17.250
> 
> 标签：javascript, jquery, ajax, html, scroll

我有一个 div，它使用 overflow:auto 将内容保留在 div 中，因为它被调整大小并在页面上拖动。我正在使用一些 ajax 从服务器检索文本行，然后将它们附加到 div 的末尾，因此内容向下增长。每次发生这种情况时，我想使用 JS 将 div 滚动到底部，以便可以看到最近添加的内容，类似于聊天室或命令行控制台的工作方式。

到目前为止，我一直在使用这个片段来做到这一点（我也在使用 jQuery，因此使用了 $() 函数）：

```
$("#thediv").scrollTop = $("#thediv").scrollHeight; 
```

然而，它给了我不一致的结果。有时它可以工作，有时不能，如果用户手动调整 div 大小或移动滚动条，它就会完全停止工作。

目标浏览器是 Firefox 3，它被部署在一个受控的环境中，所以它根本不需要在 IE 中工作。

有什么想法吗？这个让我难住了。谢谢！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2008-08-16T21:10:20.827

`scrollHeight`应该是内容的总高度。`scrollTop`指定要在元素客户区顶部显示的内容的像素偏移量。

所以你真的想要（仍然使用 jQuery）：

```
$("#thediv").each( function() 
{
   // certain browsers have a bug such that scrollHeight is too small
   // when content does not fill the client area of the element
   var scrollHeight = Math.max(this.scrollHeight, this.clientHeight);
   this.scrollTop = scrollHeight - this.clientHeight;
}); 
```

...这会将滚动偏移设置为最后`clientHeight`的内容。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-04-12T16:12:24.753

[`scrollIntoView`](https://developer.mozilla.org/en/DOM/element.scrollIntoView)

> **scrollIntoView**方法将元素滚动到视图中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-08-18T12:09:39.047

使用循环遍历一个元素的 jQuery 是非常低效的。选择 ID 时，您可以使用 get() 或 [] 表示法检索 jQuery 的第一个唯一元素。

```
var div = $("#thediv")[0];

// certain browsers have a bug such that scrollHeight is too small
// when content does not fill the client area of the element
var scrollHeight = Math.max(div.scrollHeight, div.clientHeight);
div.scrollTop = scrollHeight - div.clientHeight; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-09-30T02:19:26.407

```
$("#thediv").scrollTop($("#thediv")[0].scrollHeight); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-03T07:32:16.400

它可以用普通的 JS 来完成。诀窍是将 scrollTop 设置为等于或大于元素总高度 ( `scrollHeight`) 的值：

```
const theDiv = document.querySelector('#thediv');
theDiv.scrollTop = Math.pow(10, 10); 
```

来自[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTop#Syntax)：

> 如果设置的值大于元素可用的最大值，scrollTop 会将自身设置为最大值。

虽然 的值`Math.pow(10, 10)`使用了太高的值，例如[`Infintiy`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity)or`Number.MAX_VALUE`会将 scrollTop 重置为`0`（Firefox 66）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-10-25T20:34:39.813

我有一个 div 包装了 3 个向左浮动的 div，其内容正在调整大小。当您尝试解决此问题时，它有助于为 div-wrapper 打开时髦颜色的边框/背景。问题是调整后的 div 内容溢出到 div 包装器之外（并流到包装器下方的内容区域下方）。

通过使用上面@Shog9 的答案解决。适用于我的情况，这是 HTML 布局：

```
<div id="div-wrapper">
  <div class="left-div"></div>
  <div id="div-content" class="middle-div">
  Some short/sweet content that will be elongated by Jquery.
  </div>
  <div class="right-div"></div>
</div> 
```

这是我的 jQuery 来调整 div-wrapper 的大小：

```
<script>
$("#div-content").text("a very long string of text that will overflow beyond the width/height of the div-content");
//now I need to resize the div...
var contentHeight = $('#div-content').prop('scrollHeight')
$("#div-wrapper").height(contentHeight);
</script> 
```

需要注意的是， $('#div-content').prop('scrollHeight') 产生包装器需要调整大小的高度。此外，我不知道有任何其他方法可以获取 scrollHeight 一个实际的 jQuery 函数；$('#div-content').scrollTop() 和 $('#div-content').height 都不会产生真正的内容高度值。希望这可以帮助那里的人！

# .net - 替换 for... if 数组迭代

> ID：13396
> 
> 赞同：12
> 
> 时间：2008-08-16T22:28:39.827
> 
> 标签：.net, python, arrays, loops, iteration

我喜欢 Python 中的列表推导，因为它们简洁地代表了列表的转换。

然而，在其他语言中，我经常发现自己在写一些类似的东西：

```
foreach (int x in intArray)
  if (x > 3) //generic condition on x
    x++ 
    //do other processing 
```

这个例子是用 C# 编写的，我的印象是 LINQ 可以帮助解决这个问题，但是是否有一些通用的编程结构可以替代这个稍微不那么优雅的解决方案？也许我不考虑的数据结构？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-17T00:44:57.650

原始`foreach`循环中的增量不会影响数组的内容，这样做的唯一方法仍然是`for`循环：

```
for(int i = 0; i < intArray.Length; ++i)
{
    if(intArray[i] > 3) ++intArray[i];
} 
```

Linq 不打算修改现有的集合或序列。它基于现有序列创建新序列。使用 Linq 实现上述代码是可能的，尽管它稍微违背了它的目的：

```
var newArray1 = from i in intArray select ((i > 3) ? (i + 1) : (i));
var newArray2 = intArray.Select(i => (i > 3) ? (i + 1) : (i)); 
```

如其他一些答案所示，使用`where`（或等效）将从结果序列中排除任何小于或等于 3 的值。

```
var intArray = new int[] { 10, 1, 20, 2 };
var newArray = from i in intArray where i > 3 select i + 1;
// newArray == { 11, 21 } 
```

数组上有一个`ForEach`方法可以让你使用 lambda 函数而不是`foreach`块，尽管除了方法调用之外我会坚持使用`foreach`.

```
intArray.ForEach(i => DoSomething(i)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-16T23:06:52.013

在 C# 中，您可以对 IEnumerable 中的任何内容应用选择性处理，如下所示：

```
intArray.Where(i => i > 3).ConvertAll();
DoStuff(intArray.Where(i => i 3)); 
```

ETC..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-16T22:56:30.863

在 Python 中，您有[filter 和 map](http://docs.python.org/tut/node7.html#SECTION007130000000000000000)，可以满足您的需求：

```
map(lambda x: foo(x + 1) filter(lambda x: x > 3, intArray)) 
```

还有[列表推导](http://docs.python.org/tut/node7.html#SECTION007140000000000000000)式可以在一个简单的语句中同时完成：

```
[f(x + 1) for x in intArray if x > 3] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-16T22:47:53.953

在红宝石中：

```
intArray.select { |x| x > 3 }.each do |x|
  # do other processing
end 
```

或者如果“其他处理”是一个简短的单行：

```
intArray.select { |x| x > 3 }.each { |x| something_that_uses x } 
```

最后，如果要返回一个新数组，其中包含对大于 3 的元素的处理结果：

```
intArray.select { |x| x > 3 }.map { |x| do_something_to x } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-06-25T11:28:54.993

```
map(lambda x: test(x + 1) filter(lambda x: x > 3, arr)) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-08-16T22:37:06.690

取决于语言和您需要做什么，在许多语言中称为“地图”可能就是您正在寻找的。我不知道 C#，但根据[这个](http://blogs.msdn.com/devdev/archive/2006/06/30/652802.aspx)页面，.NET 2.0 调用映射“ConvertAll”。

“map”的含义非常简单——获取一个列表，并将一个函数应用于它的每个元素，返回一个新列表。您可能还在寻找“过滤器”，它会为您提供满足另一个列表中谓词的项目列表。

# time-management - 你有“闲暇”时间吗？

> ID：13409
> 
> 赞同：21
> 
> 时间：2008-08-16T23:17:23.317
> 
> 标签：time-management

CodePlex 团队有一个[Slack](https://rads.stackoverflow.com/amzn/click/com/0767907698)时间策略，并且对他们来说效果很好。

*   Jim Newkirk 和我用它来处理[xUnit.net](http://www.codeplex.com/xunit)项目。
*   Jonathan Wanagel 用它在[SvnBridge](http://www.codeplex.com/SvnBridge)上工作。
*   Scott Densmore 和我自己使用它来开发[ObjectBuilder 2.0](http://www.codeplex.com/ObjectBuilder)原型。

对于其他人来说，这是探索技术上不在日程上的事情的好时机，但最终可能对团队的其他成员很有用。我深信这样做的价值，如果我再次管理一个团队，我会让它成为团队文化的一部分。

你的团队有正式的 Slack 政策吗？效果如何？

**编辑：**我刚刚意识到我没有定义 Slack。对于那些没有读过这本书的人来说，Slack 就是谷歌的“20% 时间”：你可以在一天/周/月/年的某个时间段上做一些与你没有直接关系的事情。日常工作，但可能有间接好处（显然，如果您从事的工作对您的工作或公司完全没有用处，您的经理可能不会很好地考虑您花费时间的方式：-p ）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-08-16T23:30:13.837

我只想提一下谷歌在这个问题上的政策。
一天的 20% 应该用于私人项目和研究。

我认为是时候让管理者面对一个事实，即大多数优秀的开发人员都有点懒惰。如果不是这样，我们就不会有代码重用之类的概念。
如果这种懒惰可以集中在创造力上，并且开发人员可以阅读技术问题并尝试架构和语言功能，我相信最终结果将是更好的代码和更满意的开发人员。

因此，如果您是经理：让您的开发人员时不时地放松一下。鼓励他们与团队举行小型研讨会，讨论做事的新方法。

如果您是开发人员：阅读、学习并热爱您的手艺。只要您愿意花一些时间学习完成工作的最佳方法，您就拥有世界上最好的工作之一。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-17T01:06:20.553

我目前是一名全职自由职业者，为一个客户工作。如果我想获得整整 40 小时的工资，那么我花在编码上的每一分钟都需要计入批准的项目计划中。或者至少它必须完成某种现实的维护任务。我想你可以说这是承包的缺点之一......真的没有懈怠或闲置的余地。你只需要继续前进并继续手头的任务。这可能会让人筋疲力尽，但话又说回来，我有点喜欢它让我负责的方式。当然，薪水比平时要好一些。

也就是说，我很想有空闲时间来从事宠物项目，但没有客户会同意为此付费。

无论如何，我只是想指出这如何体现了自由职业者和全职工作之间的一些重大差异。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-17T00:10:33.287

我也从未在任何有正式政策的地方工作过，但我一直发现在旁边挤出一点研发/工具构建时间。很多时候，我会从中获得生产力收益，这将使我有更多的“闲暇”时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-16T23:52:26.117

我从来没有在任何有正式政策的地方工作过，但实际上我遇到的每一位经理都允许我花一些时间在与当前项目或灭火没有直接关系的事情上。

我认为关键是谈论你想尝试的事情。大多数经理都希望他们的团队做一些很酷的、非同寻常的事情，所以如果你能说服他们你可以交付一些东西，你就有机会。或者他们可能会让你这样做只是为了让你开心。

现在我是一名承包商而不是员工，我不会因为做有趣的事情而获得报酬，但我通常每周只工作 30-35 小时，所以我还有时间学习和玩耍。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-17T04:12:09.570

我们有空闲时间，我们尝试在发布之间安排它们。一旦一个版本发布，我们要求我们的开发人员每天花费 60% 的时间来修复错误，然后将另外 40% 的时间用于空闲时间。不过，我们有关于您可以使用空闲时间做什么的政策。然后，当一个版本再次发布时，我们要求所有开发人员花一整天的时间来实现该版本的功能或修复错误。

The policy lets the developer use the slack time for training, creating something new that the company could use, or just creating tools within the company to make things easier for ourselves. It has worked well for us. We think it is an awesome benefit.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T16:01:24.990

We don't have a formal policy in my team - mostly because there is just so much work to do that justifying it would be hard. Which is pretty ironic.

I've started doing some formal things in the guise of "Development Meetings" in order to at least inject the essence of this into the team. An example of this is a development project that is intended to both teach new technologies and produce a cool app at the end of it.

It's early days, we'll see how it goes.

# iis-7 - CruiseControl.NET 是否在 IIS 7.0 上运行？

> ID：13430
> 
> 赞同：8
> 
> 时间：2008-08-17T00:37:17.680
> 
> 标签：iis-7, cruisecontrol.net

我是开发新手（行业管理员），我正在设置我的开发环境，我想在 Server 2008 上设置一个 CruiseControl.Net 服务器。快速谷歌没有提供任何让它运行的说明在 IIS 7.0 上，所以我想知道是否有人有安装此设置的经验。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-02-08T07:59:50.167

这是一篇对我有用的文章：

[让 CruiseControl.NET 在 IIS7 下工作](http://huntjason.wordpress.com/2009/08/13/getting-cruisecontrol-net-working-under-iis7/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-17T17:38:12.783

戴尔拉根说了什么；它完美地安装在我们的 Windows Server 2008 机器上，包括在 IIS 7 上运行的仪表板。试一试；应该可以正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-17T01:01:49.970

我从未在 Server 2008 上尝试过，但我已经在包含 IIS 7.0 的 Vista 上安装了 CruiseControl.NET。我不记得有任何问题。您确实有管理员背景，如果确实弹出某些内容，应该会有所帮助。

只需使用[CruiseControl.NET wiki](http://confluence.public.thoughtworks.org/display/CCNET/Welcome+to+CruiseControl.NET)即可完成安装并进行设置。这就是我所做的一切。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T11:50:27.687

我按照[此博客](http://www.matthewbussa.com/2011/05/installing-and-configuring-cruise.html)中的步骤运行它。此外，我必须启用 ASP.NET，如[本博客](http://lamiavitaintrycatch.wordpress.com/2008/05/20/http-error-50019-iis-70-thoubles-fixed/)所示。最后，为了让软件包安装工作，我在 webdashboard 目录上向本地用户授予了完全权限，就像在[这个错误报告](http://jira.public.thoughtworks.org/browse/CCNET-1664)中一样。

# .net - 在 .net 中以编程方式访问调用堆栈

> ID：13434
> 
> 赞同：12
> 
> 时间：2008-08-17T00:44:01.393
> 
> 标签：.net, reflection, callstack

如何以编程方式访问调用堆栈？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-08-17T00:49:09.247

尝试[System.Diagnostics.StackTrace](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-17T00:50:07.873

您可以使用`StackTrace`和中的`StrackFrame`类`System.Diagnostics`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-17T13:20:43.723

正确的方法是使用`StackTrace`and`StackFrame`类。仅仅为了获取堆栈跟踪而抛出异常完全是滥用异常。

# python - Python version of PHP's stripslashes

> ID：13454
> 
> 赞同：13
> 
> 时间：2008-08-17T01:23:50.067
> 
> 标签：python, string, escaping

I wrote a piece of code to convert PHP's striplashes into valid Python [backslash] escapes:

```
cleaned = stringwithslashes
cleaned = cleaned.replace('\\n', '\n')
cleaned = cleaned.replace('\\r', '\n')
cleaned = cleaned.replace('\\', '') 
```

How can I condense it?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-08-17T12:15:13.170

不完全确定这是你想要的，但是..

```
cleaned = stringwithslashes.decode('string_escape') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-17T12:55:25.100

听起来你想要的东西可以通过正则表达式合理有效地处理：

```
import re
def stripslashes(s):
    r = re.sub(r"\\(n|r)", "\n", s)
    r = re.sub(r"\\", "", r)
    return r
cleaned = stripslashes(stringwithslashes) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T19:02:19.183

利用`decode('string_escape')`

```
cleaned = stringwithslashes.decode('string_escape') 
```

使用

> **string_escape**：在 Python 源代码中生成一个适合作为字符串文字的字符串

或像威尔逊的回答一样连接 replace() 。

```
cleaned = stringwithslashes.replace("\\","").replace("\\n","\n").replace("\\r","\n") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-17T01:26:52.043

You can obviously concatenate everything together:

```
cleaned = stringwithslashes.replace("\\n","\n").replace("\\r","\n").replace("\\","") 
```

Is that what you were after? Or were you hoping for something more terse?

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2008-08-17T10:28:00.967

Python 有一个类似于 PHP 的 addlashes 的内置 escape() 函数，但没有 unescape() 函数（stripslashes），这在我看来有点荒谬。

正则表达式救援（代码未经测试）：

```
p = re.compile( '\\(\\\S)')
p.sub('\1',escapedstring) 
```

理论上，它采用 \\(not whitespace) 形式并返回 \(same char)

编辑：经过进一步检查，Python 正则表达式被彻底破坏了；

```
>>> escapedstring
'This is a \\n\\n\\n test'
>>> p = re.compile( r'\\(\S)' )
>>> p.sub(r"\1",escapedstring)
'This is a nnn test'
>>> p.sub(r"\\1",escapedstring)
'This is a \\1\\1\\1 test'
>>> p.sub(r"\\\1",escapedstring)
'This is a \\n\\n\\n test'
>>> p.sub(r"\(\1)",escapedstring)
'This is a \\(n)\\(n)\\(n) test' 
```

总之，到底是什么，Python。

# version-control - 源代码控制背后的理论（和术语）

> ID：13460
> 
> 赞同：7
> 
> 时间：2008-08-17T01:38:24.797
> 
> 标签：version-control

我已经尝试对几个项目使用源代码控制，但仍然不太了解。对于这些项目，我们使用了 TortoiseSVN，并且只进行了一行修改。（没有主干、分支或任何其他。）如果有推荐的方法来设置源代码控制系统，它们是什么？这样设置的原因和好处是什么？集中式和分布式源代码控制系统的工作方式之间的根本区别是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-17T01:39:54.310

将源代码管理视为源代码的巨大“撤消”按钮。每次签入时，您都会添加一个可以回滚的点。即使您不使用分支/合并，仅此功能就非常有价值。

此外，通过拥有一个“权威”版本的源代码控制，备份变得更加容易。

集中式与分布式……区别在于，在分布式中，不一定有一个“权威”版本的源代码控制，尽管实际上人们通常仍然拥有主树。

分布式源代码控制的最大优势有两个：

1.  当您使用分布式源代码控制时，您的本地计算机上拥有整个源代码树。您可以提交、创建分支和工作，就像您一个人一样，然后当您准备好推送您的更改时，您可以将它们从您的机器提升到主副本。如果您经常“离线”工作，这可能是一个巨大的好处。

2.  您无需征得任何人的许可即可成为源代码管理的分销商。如果 A 人正在运行项目，但 B 和 C 人想要进行更改并相互共享这些更改，那么使用分布式源代码控制会变得更加容易。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-17T01:44:24.237

我建议查看 Eric Sink 的以下内容：

[http://www.ericsink.com/scm/source_control.html](http://www.ericsink.com/scm/source_control.html)

拥有某种版本控制系统可能是程序员审查代码更改和了解谁对谁做了什么的最重要工具。即使对于单人项目，能够将当前代码与以前已知的工作版本进行比较以了解由于更改而可能出现的问题是非常宝贵的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-17T01:47:59.377

这里有两篇对理解基础知识非常有帮助的文章。除了提供信息之外，Sink 的公司还销售一个伟大的源代码控制产品，称为 Vault，它对单个用户免费（我与该公司没有任何关联）。

[http://www.ericsink.com/scm/source_control.html](http://www.ericsink.com/scm/source_control.html)

[http://betterexplained.com/articles/a-visual-guide-to-version-control/](http://betterexplained.com/articles/a-visual-guide-to-version-control/)

www.vault.com 上的保险柜信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-17T01:47:18.473

即使你不分支，你也会发现使用标签来标记发布很有用。

想象一下，您昨天推出了软件的新版本，并开始对下一个版本进行重大更改。一位用户打电话给您报告昨天发布的一个严重错误。您不能只是修复它并从您的开发主干复制更改，因为您刚刚使整个事情变得不稳定的更改。

如果您已经标记了该版本，您可以查看它的工作副本并使用它来修复错误。

然后，您可以选择在标签上创建一个分支并将错误修复签入其中。这样，您可以在继续升级主干的同时修复该版本上的更多错误。您还可以将这些修复合并到主干中，以便它们将出现在下一个版本中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-17T01:51:00.743

设置 Subversion 的通用标准是在存储库的根目录下拥有三个文件夹：主干、分支和标签。主干文件夹包含您当前的“主要”开发线。对于许多商店和情况，这就是他们所使用的全部......只是一个单一的工作代码存储库。

标签文件夹更进一步，允许您在某些时间点“检查”您的代码。例如，当您发布新版本时，或者有时甚至只是*制作*新版本时，您会将副本“标记”到此文件夹中。这只是让您准确地知道您的代码在那个时间点的样子。

分支文件夹包含您在特殊情况下可能需要的不同类型的分支。有时，分支是一个研究实验性功能或可能需要很长时间才能稳定的功能的地方（因此您还不想将它们引入您的主线）。其他时候，一个分支可能代表你的代码的“生产”副本，它可以独立于你的主代码行进行编辑和部署，其中包含用于未来版本的更改。

无论如何，这只是如何设置系统的一个方面，但我认为对这种结构进行一些思考很重要。

# regex - 此正则表达式中 {1} 的用途是匹配 url 协议

> ID：13470
> 
> 赞同：4
> 
> 时间：2008-08-17T02:01:56.230
> 
> 标签：regex

我正在阅读[有关](https://stackoverflow.com/questions/6173/regular-expression-for-parsing-links-from-a-webpage)如何从网页中解析 URL 的问题，并且对提供此解决方案的[已接受答案有疑问：](https://stackoverflow.com/questions/6173/regular-expression-for-parsing-links-from-a-webpage#6183)

```
((mailto\:|(news|(ht|f)tp(s?))\://){1}\S+) 
```

该解决方案由[csmba](https://stackoverflow.com/users/350/csmba)提供，他将其归功于[regexlib.com](http://regexlib.com/Search.aspx?k=URL)。唷。学分完成。

我认为这是一个相当幼稚的正则表达式，但它是构建更好的东西的一个很好的起点。但是，我的问题是：

有什么意义`{1}`？它的意思是“完全是以前的分组之一”，对吧？这不是正则表达式中分组的默认行为吗？如果`{1}`删除了，表达式会以任何方式改变吗？

如果我从同事那里看到这一点，我会指出他或她的错误，但当我写这篇文章时，响应被评为 6 分，而 regexlib.com 上的表达式被评为 4 分，5 分。所以也许我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-17T02:46:42.740

@Rob [：](https://stackoverflow.com/questions/13470/question-about-specific-regular-expression#13479)我不同意。为了强制执行您的要求，我认为您需要使用消极的后视，这是可能的，但肯定与使用 {1} 无关。正则表达式的两个版本都没有解决该特定问题。

让代码说话：

```
tibook 0 /home/jj33/swap > cat text
Text this is http://example.com text this is
Text this is http://http://example.com text this is
tibook 0 /home/jj33/swap > cat p
#!/usr/bin/perl

my $re1 = '((mailto\:|(news|(ht|f)tp(s?))\://){1}\S+)';
my $re2 = '((mailto\:|(news|(ht|f)tp(s?))\://)\S+)';

while (<>) {
  print "Evaluating: $_";
  print "re1 saw \$1 = $1\n" if (/$re1/);
  print "re2 saw \$1 = $1\n" if (/$re2/);
}
tibook 0 /home/jj33/swap > cat text | perl p
Evaluating: Text this is http://example.com text this is
re1 saw $1 = http://example.com
re2 saw $1 = http://example.com
Evaluating: Text this is http://http://example.com text this is
re1 saw $1 = http://http://example.com
re2 saw $1 = http://http://example.com
tibook 0 /home/jj33/swap > 
```

因此，如果两个版本之间存在差异，那么它似乎不是您建议的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-17T02:58:18.083

我认为 {1} 在该正则表达式中没有任何有效功能。

> **(**mailto:|(news|(ht|f)tp(s?))://** ){1}**

您应该将其阅读为：“仅一次捕获括号中的内容”。但是我们并不真正关心捕获它以供以后使用，例如替换中的 1 美元。所以毫无意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-17T02:18:06.773

我不认为它有任何目的。但是因为 RegEx 几乎不可能理解/分解，所以人们很少指出错误。这可能就是为什么没有其他人指出它的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-17T02:56:56.337

@Jeff Atwood，您的解释有点偏离- {1} 表示仅匹配一次，但对“捕获”没有影响-由于括号而发生捕获-大括号仅指定模式必须匹配的次数来源 - 一次，正如你所说。

我同意@Marius，即使他的回答有点简洁并且可能会显得轻率。正则表达式很难，如果一个人不习惯使用它们，并且问题中的 {1} 并不是完全错误 - 在支持它的系统中，它确实意味着“完全匹配”。从这个意义上说，它并没有真正做任何事情。

不幸的是，与现在已删除的帖子相反，它不会阻止正则表达式匹配`http://http://example.org`，因为末尾的 \S+ 将匹配一个或多个非空白字符，包括`http://example.org`in `http://http://example.org`（使用 Python 2.5 验证，以防万一我正则表达式读取已关闭）。所以，给出的正则表达式并不是最好的。我不是 URL 专家，但可能有必要（但不足以）在第一个之后限制“：”和“//”的出现以确保良好的 URL。

# delphi - Are there any "mind mapping" components for Delphi? (native VCL preferably)

> ID：13471
> 
> 赞同：6
> 
> 时间：2008-08-17T02:02:46.633
> 
> 标签：delphi, components, vcl, mindmapping

I'm looking for a pre-written component (w/source) for a Delphi project that I'm working on, to generate mind-maps / concept-maps similar to these:

[http://en.wikipedia.org/wiki/Image:MindMeister_screenshot_OS_X.jpg](http://en.wikipedia.org/wiki/Image:MindMeister_screenshot_OS_X.jpg) [http://en.wikipedia.org/wiki/Image:XMIND_2008_in_Windows_Vista.png](http://en.wikipedia.org/wiki/Image:XMIND_2008_in_Windows_Vista.png)

Any ideas?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-18T12:15:27.677

您可能想看看 TMS Software 的[Diagram Studio](http://www.tmssoftware.com/site/diagram.asp)，它不是专门的思维导图组件，但它确实在您的 delphi 应用程序中提供了图表功能。并且开发人员许可证确实带有源代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-17T06:52:46.097

作为前 Delphi 开发人员，我对此表示同情。过去，您可以找到一个免费的组件，其中包含几乎任何东西的源代码。你可能知道[Delphi Super Page](http://delphi.icm.edu.pl/)（我以前的 Delphi 一切的首选来源）。我看了; 那里没有思维导图组件。（当然，该网站大约有 2 年没有更新了）。

不过，我确实有一个建议，但它不是最优的： [StarUML](http://staruml.sourceforge.net/en/)是用 Delphi 编写的，它包含用于创建 UML 图的自定义组件。源代码可供下载，在我看来，UML 原语（框、线、云等）可以适应您的目的。该网站是[http://staruml.sourceforge.net/en/](http://staruml.sourceforge.net/en/)。

我知道这并不理想，但至少您不必从头开始。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T13:21:04.213

我知道[Graphcis32](http://graphics32.org "图形32")已被用于实现类似 visio 的图表。在“应用程序”页面上有一个指向 MindVisualizer 的链接，证明它也可以用于思维导图。虽然不是开箱即用的解决方案......

如前所述，[TMS Diagram Studio和 DevExpress](http://www.tmssoftware.com/site/diagram.asp) [OrgChart](http://www.devexpress.com/Products/VCL/ExOrgChart/)或[FlowChart](http://www.devexpress.com/Products/VCL/ExFlowChart/)可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-20T13:37:17.050

[Steema Software](http://www.steema.com/)有一个很棒的组件，叫做 TeeTree，它似乎可以做所有事情。我不确定它要花多少钱*（成本是有效的词）*

我们用它来制作饼图和报告，但它似乎无所不能，你可以从他们的网站上获得编译好的演示。

* * *

它是一个 VCL 组件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-18T12:23:18.520

Delphi 组件的另一个重要来源是 torry.net。[在那里搜索](http://www.torry.net/quicksearchd.php?String=mind+map&Title=No)我发现了一个看起来很有趣的组件：[绘图对象](http://angusj.com/delphi/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-24T20:15:32.573

我只知道一个思维导图组件：[MetaTree](http://www.metaproducts.com/mp/metatree_component.htm)。它支持 Delphi 5、6、7 和 2005，并附带完整的源代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-17T09:25:39.627

不完全是您正在寻找的东西，但如果您找不到本机 VCL 组件，它可能是一个选择。

Tree GX [http://www.componentsource.com/products/treegx/index-gbp.html](http://www.componentsource.com/products/treegx/index-gbp.html)是一个带有源代码的.NET 思维导图组件。

然后，您可以使用 RemObects 的 Hydra [http://www.remobjects.com/product/?id={B6BD1030-F630-4DA8-9018-73C03265A0EF}](http://www.remobjects.com/product/?id=%7BB6BD1030-F630-4DA8-9018-73C03265A0EF%7D)在 Delphi 应用程序中托管 WinForms 控件，如果去纯 .Net 不是选项。

编辑：预览似乎显示链接正常，但是当我提交帖子时它们都错了，所以我不得不将网址内联

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T23:13:18.870

请尝试 [http://www.delphiarea.com/products/simplegraph/](http://www.delphiarea.com/products/simplegraph/)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-15T18:55:45.150

JVCL : 名为 JvDesignerDemo 的演示

# c++ - 如何按值对数组进行排序（排序）？*有一个转折*

> ID：13473
> 
> 赞同：5
> 
> 时间：2008-08-17T02:13:55.533
> 
> 标签：c++, c, arrays, sorting

我想使用升序对数组进行排序`C/C++`。结果是一个包含元素索引的数组。每个索引对应于排序数组中的元素位置。

**例子**

```
Input:  1, 3, 4, 9, 6
Output: 1, 2, 3, 5, 4 
```

**编辑：**我正在使用 shell 排序程序。重复值索引是根据原始数组中首先出现的重复值来任意选择的。

### 更新：

尽管我尽了最大努力，但我仍然无法为指针数组实现排序算法。当前示例无法编译。

有人可以告诉我有什么问题吗？

我非常感谢一些帮助！

```
void SortArray(int ** pArray, int ArrayLength) 
{
    int i, j, flag = 1;    // set flag to 1 to begin initial pass
    int * temp;    // holding variable orig with no *

    for (i = 1; (i <= ArrayLength) && flag; i++)
    {
        flag = 0;
        for (j = 0; j < (ArrayLength - 1); j++)
        {
            if (*pArray[j + 1] > *pArray[j])    // ascending order simply changes to <
            { 
                &temp = &pArray[j];    // swap elements
                &pArray[j] = &pArray[j + 1];    //the problem lies somewhere in here
                &pArray[j + 1] = &temp;
                flag = 1;    // indicates that a swap occurred.
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-17T02:33:32.687

由于您使用的是 C++，所以我会这样做。该`SortIntPointers`函数可以是任何排序算法，重要的部分是它根据指针指向的数组对指针数组进行排序`int`。完成后，您可以遍历指针数组并分配它们的排序索引，该索引最终将位于原始数组中的原始位置。

```
int* intArray; // set somewhere else
int arrayLen;  // set somewhere else  

int** pintArray = new int*[arrayLen];
for(int i = 0; i < arrayLen; ++i)
{
    pintArray[i] = &intArray[i];
}

// This function sorts the pointers according to the values they
// point to. In effect, it sorts intArray without losing the positional
// information.
SortIntPointers(pintArray, arrayLen);

// Dereference the pointers and assign their sorted position.
for(int i = 0; i < arrayLen; ++i)
{
    *pintArray[i] = i;
} 
```

希望这足够清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-23T07:30:30.587

好的，这是我在 C++ 中的尝试

```
#include <iostream>
#include <algorithm>

struct mycomparison
{
    bool operator() (int* lhs, int* rhs) {return (*lhs) < (*rhs);}
};

int main(int argc, char* argv[])
{
    int myarray[] = {1, 3, 6, 2, 4, 9, 5, 12, 10};
    const size_t size = sizeof(myarray) / sizeof(myarray[0]);
    int *arrayofpointers[size];
    for(int i = 0; i < size; ++i)
    {
        arrayofpointers[i] = myarray + i;
    }
    std::sort(arrayofpointers, arrayofpointers + size, mycomparison());
    for(int i = 0; i < size; ++i)
    {
        *arrayofpointers[i] = i + 1;
    }
    for(int i = 0; i < size; ++i)
    {
        std::cout << myarray[i] << " ";
    }
    std::cout << std::endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-17T02:46:22.833

创建一个新数组，其值从 0 增加到 n-1（其中 n 是要排序的数组的长度）。然后根据新数组中的值索引的旧数组中的值对新数组进行排序。

例如，如果您使用冒泡排序（易于解释），则不是比较新数组中的值，而是比较旧数组中由新数组中的值索引的位置处的值：

```
function bubbleRank(A){
  var B = new Array();
  for(var i=0; i<A.length; i++){
    B[i] = i;
  }
  do{
    swapped = false;
    for(var i=0; i<A.length; i++){
      if(A[B[i]] > A[B[i+1]]){
        var temp = B[i];
        B[i] = B[i+1];
        B[i+1] = temp;
        swapped = true;
      }
    }
  }while(swapped);
  return B;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-18T06:21:35.523

创建一个新数组并使用冒泡排序对元素进行排名

```
int arr[n];
int rank[n];
 for(int i=0;i<n;i++)
    for(int j=0;j<n;j++)
       if(arr[i]>arr[j])
         rank[i]++; 
```

每个元素的排名将是 rank[i]+1 到 1,2,....n 的顺序

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-17T02:21:28.563

好吧，有一个简单的 n^2 解决方案。

在蟒蛇中：

```
newArray = sorted(oldArray)
blankArray = [0] * len(oldArray)
for i in xrange(len(newArray)):
  dex = oldArray.index(newArray[i])
  blankArray[dex]  = i 
```

根据您的列表有多大，这可能会起作用。如果你的列表很长，你需要做一些奇怪的并行数组排序，这看起来不是很有趣，而且是在你的代码中引入额外错误的快速方法。

另请注意，上述代码假定 oldArray 中的值是唯一的。如果不是这种情况，您将需要进行一些后期处理来解决绑定值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-23T16:23:01.290

使用 boost::lambda 对向量进行并行排序...

```
 std::vector<int> intVector;
   std::vector<int> rank;

   // set up values according to your example...
   intVector.push_back( 1 );
   intVector.push_back( 3 );
   intVector.push_back( 4 );
   intVector.push_back( 9 );
   intVector.push_back( 6 );

   for( int i = 0; i < intVector.size(); ++i )
   {
      rank.push_back( i );
   }

   using namespace boost::lambda;
   std::sort( 
              rank.begin(), rank.end(),
              var( intVector )[ _1 ] < var( intVector )[ _2 ] 
            );

   //... and because you wanted to replace the values of the original with 
   //    their rank
   intVector = rank; 
```

注意：我使用 vectorS 而不是数组，因为它更清晰/更容易，而且我使用了从 0 开始计数的 C 样式索引，而不是 1。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-30T07:23:10.373

这是c语言的解决方案

```
#include <stdio.h>

void swap(int *xp, int *yp) {
    int temp = *xp;
    *xp = *yp;
    *yp = temp;
}

// A function to implement bubble sort
void bubbleSort(int arr[], int n) {
    int i, j;
    for (i = 0; i < n - 1; i++)

        // Last i elements are already in place
        for (j = 0; j < n - i - 1; j++)
            if (arr[j] > arr[j + 1])
                swap(&arr[j], &arr[j + 1]);
}

/* Function to print an array */
void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++)
        printf("%d ", arr[i]);
    printf("\n");
}

int main() {
    int arr[] = {64, 34, 25, 12, 22, 11, 98};
    int arr_original[] = {64, 34, 25, 12, 22, 11, 98};
    int rank[7];

    int n = sizeof(arr) / sizeof(arr[0]);
    bubbleSort(arr, n);

    printf("Sorted array: \n");
    printArray(arr, n);

    //PLACE RANK
    //look for location of number in original array
    //place the location in rank array
    int counter = 1;
    for (int k = 0; k < n; k++){
        for (int i = 0; i < n; i++){
            printf("Checking..%d\n", i);
            if (arr_original[i] == arr[k]){
                rank[i] = counter;
                counter++;
                printf("Found..%d\n", i);
            }
        }
    }

    printf("Original array: \n");
    printArray(arr_original, n);

    printf("Rank array: \n");
    printArray(rank, n);
    return 0;
} 
```

# sql-server - 您如何使两个相关但独立的系统保持同步？

> ID：13485
> 
> 赞同：20
> 
> 时间：2008-08-17T02:57:46.633
> 
> 标签：sql-server, database, synchronization, distributed

我目前的开发项目有两个方面。首先，有一个公共网站，外部用户可以在其中提交和更新用于各种目的的信息。然后，此信息将保存到 colo 设施的本地 SQL Server。

第二个方面是内部应用程序，员工使用它来管理这些相同的记录（概念上）并提供状态更新、批准等。该应用程序托管在公司防火墙内，具有自己的本地 SQL Server 数据库。

这两个网络通过硬件 VPN 解决方案连接，这很不错，但显然不是世界上最快的东西。

这两个数据库相似，并且共享许多相同的表，但它们不是 100% 相同。两边的许多表都非常特定于内部或外部应用程序。

所以问题是：当用户更新他们的信息或在公共网站上提交记录时，你如何将这些数据传输到内部应用程序的数据库中，以便内部人员进行管理？反之亦然……您如何将员工所做的更新推送回网站？

值得一提的是，这些更新发生得越“实时”越好。并不是说它必须是即时的，只是相当快。

到目前为止，我已经考虑过使用以下类型的方法：

1.  双向复制
2.  双方的 Web 服务接口都带有代码，以便在更改发生时（实时）同步更改。
3.  双方的 Web 服务接口带有异步同步更改的代码（使用排队机制）。

有什么建议吗？有没有人遇到过这个问题？您是否提出了适合您的解决方案？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-08-17T03:22:49.017

我相信这是一个非常常见的集成场景。就个人而言，我认为使用队列的异步消息传递解决方案是理想的。

您应该能够实现近乎实时的同步，而无需像复制这样的开销或复杂性。

同步 Web 服务并不理想，因为您的代码必须非常复杂才能处理故障情况。当一个系统重新启动而另一个系统继续发布更改时会发生什么？发送系统是否超时？它和那些有什么关系？除非您准备好丢失数据，否则您将需要某种事务队列（如 MSMQ）来接收更改通知并确保它们到达其他系统。如果任何一个系统出现故障，更改（作为消息传递）只会累积，一旦建立连接，重新启动的服务器将处理所有排队的消息并赶上，使系统完整性更容易实现。

如果您使用 .NET（尤其是如果您想使用 MSMQ），有一些开源工具可以让您真正轻松地做到这一点。

1.  Udi Dahan 的[nServiceBus](http://www.nservicebus.com/)
2.  Dru Sellers 和 Chris Patterson 的[公共交通](http://code.google.com/p/masstransit/)

还有商业产品，如果您正在考虑商业选项，请参阅[此处](http://www.thefreakparade.com/2008/06/esbs-for-the-microsoft-net-platform/)以获取 .NET 上的选项列表。当然，WCF 可以使用 MSMQ 绑定进行异步消息传递，但是像 nServiceBus 或 MassTransit 这样的工具将为您提供非常简单的发送/接收或 Pub/Sub API，这将使您的需求变得非常简单。

如果您使用的是 Java，那么有许多开源服务总线实现可以让这种双向、异步消息传递变得轻而易举，比如 Mule 或者可能只是 ActiveMQ。

您可能还想考虑阅读[Udi Dahan](http://www.udidahan.com/)的博客，收听他的一些播客。这里有[一些更好的资源](https://stackoverflow.com/questions/13211/good-reads-for-distributed-systems#13244)可以帮助您入门。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T01:53:31.300

我正在进行一个类似的项目，除了我有多个站点需要通过慢速连接保持同步（在某些情况下是拨号）。

首先你需要跟踪更改，如果你可以使用 SQL 2008（如果 2Gb 限制不是问题，即使是 Express 版本也足够了）这将大大减轻痛苦，只需在数据库和每个表上打开 Change Tracking 即可。我们在总部使用带有扩展架构的 SQL Server 2008，在每个站点使用带有数据子集和有限架构的 SQL Express 2008。

其次，您需要跟踪您的更改，[同步服务](http://msdn.microsoft.com/sync/ "微软同步服务")很好地完成了这个技巧，并支持使用 WCF 网关进入主数据库。在此示例中，您将需要使用[Sync using SQL Express Client](http://blogs.msdn.com/sync/archive/2008/06/24/sample-sql-express-client-synchronization-using-sync-services-for-ado-net.aspx)示例作为起点，请注意它基于 SQL 2005，因此您需要对其进行更新以利用 2008 年的更改跟踪功能。默认情况下，同步服务在客户端上使用 SQL CE，我敢肯定在你的情况下还不够。您需要一个在您的 Web 服务器上运行的服务，该服务会定期（如果需要，可以每 10 秒一次）运行 Synchronize() 方法。这将告诉您的主数据库有关本地所做的更改，然后向服务器询问在那里所做的所有更改。您可以设置获取和应用 SQL 代码来调用存储过程，您可以添加事件处理程序来处理冲突（例如客户端更新与服务器更新）并在每一端相应地解决它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-21T11:52:50.507

我们有一个商店作为客户端，三个商店连接到同一个 VPN
两个商店有一台计算机作为该商店的“服务器”运行，第三个有“主数据库”
为了同步所有到主我们没有最好的解决方案，但它可以工作：有一台专用 PC 运行一个应用程序，该应用程序检查两个存储的每个表中每条记录的时间戳，如果与上次同步时不同，它会复制结果
请注意，这是双向的。即，如果您更新主数据库中的产品，此更改将传播到其他两个商店。如果您在其中一家商店有新订单，它将被传输给“主人”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-02T08:20:54.087

最近，我在 SQL Server Service Broker 上取得了很大的成功，它提供了可靠的、持久的、开箱即用的异步消息传递，实现起来几乎没有痛苦。

*   它可以快速设置，并且随着您了解更多，您可以使用一些更高级的功能。
*   大多数人都不知道，它也是桌面版本的一部分，因此可以用作工作站消息传递系统
*   如果您有现有的 T-SQL 技能，则可以利用它们，因为读取和写入消息的所有代码都是在 SQL 中完成的
*   它快得令人眼花缭乱

它是 SQL Server 的一个大肆宣传的部分，非常值得一看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-17T04:07:34.323

我想说只是有一份工作，将 pub 数据库输入表中的数据复制到私有数据库挂起表中。然后，一旦您更新了私有端的数据，就将其复制到公共端。如果您没有更新公共端的任何复制数据，它应该是一个相当简单的事务复制解决方案。

# windows - 多台设备上的同时 Outlook 提醒

> ID：13498
> 
> 赞同：7
> 
> 时间：2008-08-17T03:25:36.607
> 
> 标签：windows, outlook, synchronization, reminders

*免责声明：这实际上不是一个编程问题，但我觉得 stackoverflow 上的观众比大多数问答网站更有可能得到答案。*

请原谅我，乔尔，偷了你的问题。乔尔不久前在播客上问了这个问题，但我认为它没有得到解决。我也有同样的情况，所以我也在寻找答案。

我有多个设备都与 MS-Outlook 同步。PC、膝上型电脑、智能手机、PDA 等都具有将其数据（日历、电子邮件、联系人等）与 Exchange 服务器同步的能力。我喜欢使用 Outlook 会议通知或预约提醒来提醒我即将召开的会议或医生预约等。问题在于所有设备都会弹出相同的提醒，我必须单独访问每个设备才能打盹或关闭所有相同的提醒弹出窗口。

既然这是一种同步技术，为什么我在一个设备上打盹或关闭的事实不能自动同步其他设备。我什至尝试在关闭提醒后强制同步，但在强制同步后它仍会显示在我的其他设备上。这对我来说非常烦人。

是否有我忽略的设置，或者是否有我应该使用的第 3 方提醒实用程序而不是内置的东西？

谢谢，库尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-17T04:05:15.403

至少对于个人电脑来说，你关闭一个项目的事实确实会得到同步，而且对我来说相当快。不过，我不确定为什么手机似乎没有这样做。也许 ActiveSync 协议不提供该选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-17T04:05:57.820

我没有答案，但每次我的手机和我的电脑在几分钟内互相发出嗡嗡声时，我都会感受到你（和乔尔）的痛苦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-20T21:54:53.487

我也谢谢你:)

也许是因为您所有设备的时钟都与时间服务器同步，所以它们都有完全正确的原子钟时间，并且所有设备都会在几秒钟内通知您，所以“关闭”同步只是没有发生得不够快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-31T19:39:59.297

我假设“客户端”实现不是标准化的。例如，如果您的手机已经向您显示提醒弹出窗口，则 Outlook 同步机制无法强制删除该弹出窗口，因为它是特定于设备的。它在“计算机”上这样做的事实使我假设该协议确实支持这一点，但一些电话供应商只是不实施它。

# firefox - 跨多台机器的浏览器同步

> ID：13518
> 
> 赞同：2
> 
> 时间：2008-08-17T04:58:38.510
> 
> 标签：firefox, browser, synchronization

每个人都记得谷歌浏览器同步对吗？我以为很好。不幸的是，谷歌决定不将该服务升级到 Firefox 3.0。Mozilla 正在开发一个替代谷歌浏览器同步的替代品，这将成为 Weave 项目的一部分。我曾尝试使用 Wea​​ve，但发现它非常缓慢或完全无法操作。当然，他们现在处于早期开发阶段，所以我真的不能抱怨。

这个浏览器同步的具体问题让我开始思考。你们所有人如何看待 Mozilla 或制作我们用户可以在您的“主”机器上运行的服务器/客户端软件包的人？现在，您只需要知道自己的 IP 或通过某种方式在工作或任何地方向您的客户端浏览器公布它。

我可以想到几个问题：非静态 IP、在本地计算机上打开端口等。似乎 Mozilla 不想处理由许多人同步浏览器创建的流量。他们无法通过这种流量获利，因为上传的所有数据都必须加密。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-17T05:17:05.697

Mozilla Weave 能够在个人服务器上运行。它使用 WebDAV 与 HTTP 服务器进行通信，并且可以配置为连接到私有服务器。我尝试在自己的服务器上设置它，但没有成功（主要是因为我不太擅长使用 Apache 来配置 WebDAV）

我希望 Mozilla Weave 最终允许 FTP 访问，这样我就可以轻松地使用我的服务器来托管我的 firefox 配置文件。

如果你有兴趣在个人服务器上尝试 Mozilla Weave，这里有一个教程：http:
[//marios.tziortzis.com/page/blog/article/setting-up-mozilla-weave-on-your-server/](http://marios.tziortzis.com/page/blog/article/setting-up-mozilla-weave-on-your-server/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-17T06:36:59.390

[Browser Sync](http://code.google.com/p/browsersync/)现已在 Google Code 上运行。不过，就让它托管在个人服务器/计算机上而言，它看起来还没有做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-17T06:46:26.093

我一直在使用 Firefox Scrapbook 扩展，通过 FolderShare 同步。这需要一些设置，但好的是 Scrapbook 会抓取每个页面的本地副本，因此它可以脱机工作或在网站消失时工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-17T10:04:18.923

不是这个问题的完整解决方案，但我发现[FoxMarks](http://www.foxmarks.com/)是一个非常好的书签同步扩展。

# c# - GridView delete not working

> ID：13524
> 
> 赞同：3
> 
> 时间：2008-08-17T05:57:59.653
> 
> 标签：c#, asp.net, gridview

I'm using a `GridView` in C#.NET 3.5 and have just converted the underlying `DataSource` from `Adapter` model to an object which gets its data from LINQ to SQL - i.e. a Business object that `returns` a `List<>` for the `GetData()` function etc.

All was well in Denmark and the `Update`, and conditional `Select` statements work as expected but I can't get the `Delete` function to work. Just trying to pass in the ID or the entire object but it's being passed in a **"new"** object with none of the properties set. I'm just wondering if it's the old `OldValuesParameterFormatString="original_{0}"` monster in the `ObjectDataSource` causing confusion again.

Anybody have any ideas?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-17T06:22:37.280

I found the solution. I had to set the GridView's DataKeyNames property to the unique key that my data was returning (in this case a classically named ID field). I'm guessing that this property "unset" itself when the Grid refreshed.

# compiler-construction - 自举仍然需要外部支持

> ID：13537
> 
> 赞同：102
> 
> 时间：2008-08-17T06:46:11.210
> 
> 标签：compiler-construction, bootstrapping

我听说过引导语言的想法，即为语言本身编写编译器/解释器。我想知道如何做到这一点并环顾四周，看到有人说这只能由任何一方完成

*   用另一种语言编写初始编译器。
*   在 Assembly 中手动编写初始编译器，这似乎是第一个编译器的特例

对我来说，从它们都需要外部支持的意义上说，它们似乎都不是真正*引导*一种语言。有没有办法用自己的语言实际编写编译器？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2008-08-17T07:20:55.103

> 有没有办法用自己的语言实际编写编译器？

你*必须*有一些现有的语言来编写你的新编译器。如果你正在编写一个新的，比如 C++ 编译器，你只需用 C++ 编写它，然后先用现有的编译器编译它。另一方面，如果您正在为一种新语言创建编译器，我们称之为 Yazzleof，您需要先用另一种语言编写新编译器。通常，这将是另一种编程语言，但并非必须如此。它可以是汇编代码，或者如果需要，可以是机器代码。

如果您要*为*Yazzleof 引导编译器，通常最初不会为完整语言编写编译器。相反，您将为 Yazzle-lite 编写一个编译器，这是 Yazzleof 的最小可能子集（嗯，至少是*一个很小的子集）。*然后在 Yazzle-lite 中，您将为完整语言编写一个编译器。（很明显，这可以迭代地发生，而不是一次跳转。）因为 Yazzle-lite 是 Yazzleof 的一个真子集，所以您现在有了一个可以自行编译的编译器。

有一篇关于从可能的最低级别（在现代机器上基本上是一个十六进制编辑器）引导编译器的*非常好的文章，标题为**Bootstrapping a simple compiler from nothing*。它可以在[https://web.archive.org/web/20061108010907/http://www.rano.org/bcompiler.html](https://web.archive.org/web/20061108010907/http://www.rano.org/bcompiler.html)找到。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-08-17T07:00:39.310

您阅读的解释是正确的。*[Compilers: Principles, Techniques, and Tools](http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools)* (the Dragon Book)中对此进行了讨论：

*   用语言 Y 为语言 X 编写编译器 C1
*   使用编译器 C1 为语言 X 编写语言 X 的编译器 C2
*   现在 C2 是一个完全自托管的环境。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-08-17T07:07:05.037

Unix 联合创始人[Ken Thompson](http://en.wikipedia.org/wiki/Ken_Thompson)的[图灵奖](http://en.wikipedia.org/wiki/Turing_Award)讲座中对此进行了非常有趣[的讨论。](http://cm.bell-labs.com/who/ken/trust.html)

他开始说：

> 我要描述的是当编译器用他们自己的语言编写时出现的许多“鸡和蛋”问题之一。在这种情况下，我将使用 C 编译器中的一个特定示例。

并继续展示他如何编写一个 Unix C 编译器版本，该版本始终允许他无需密码即可登录，因为 C 编译器会识别登录程序并添加特殊代码。

> 第二种模式针对 C 编译器。替换代码是一个第一阶段的自我复制程序，它将两个特洛伊木马都插入到编译器中。这需要一个学习阶段，就像第二阶段的例子一样。首先，我们用普通的 C 编译器编译修改后的源代码，以生成一个错误的二进制文件。我们将这个二进制文件安装为官方 C。我们现在可以从编译器的源代码中删除错误，新的二进制文件将在编译时重新插入错误。当然，login 命令将一直存在错误，并且在任何地方都没有源代码跟踪。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-17T07:00:23.787

我听说的方法是用另一种语言编写一个极其有限的编译器，然后用它来编译一个更复杂的版本，用新语言编写。然后可以使用第二个版本来编译自己和下一个版本。每次编译时都会使用最后一个版本。

这是[引导的定义：](http://en.wikipedia.org/wiki/Bootstrapping_(computing))

> 一个简单系统激活一个服务于相同目的的更复杂系统的过程。

编辑：[关于编译器引导的维基百科文章](http://en.wikipedia.org/wiki/Bootstrapping_(compilers))比我更好地涵盖了这个概念。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-20T09:29:29.450

查看播客[软件工程广播第 61 集](http://www.se-radio.net/2007/07/episode-61-internals-of-gcc/)(2007-07-06)，其中讨论了 GCC 编译器内部结构以及 GCC 引导过程。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2011-08-10T14:56:40.810

[Donald E. Knuth](http://en.wikipedia.org/wiki/Donald_Knuth)实际上通过在其中编写编译器来构建[WEB](http://en.wikipedia.org/wiki/WEB)，然后将其手动编译为汇编或机器代码。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-07-09T19:54:17.183

据我了解，第一个[Lisp](http://en.wikipedia.org/wiki/Lisp_%28programming_language%29)解释器是通过手动编译构造函数和令牌读取器来引导的。然后从源代码中读入解释器的其余部分。

您可以通过阅读原始的 McCarthy 论文*[“符号表达式的递归函数及其机器计算，第一部分](http://www-formal.stanford.edu/jmc/recursive/recursive.html)*”来检查自己。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-17T07:01:08.340

我能想到的每个引导语言的示例（[C](http://en.wikipedia.org/wiki/C_%28programming_language%29)、[PyPy](http://en.wikipedia.org/wiki/PyPy)）都是在有一个工作编译器之后完成的。你必须从某个地方开始，重新实现一种语言本身需要先用另一种语言编写编译器。

它还能如何工作？我认为甚至在概念上也不可能这样做。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-08-17T07:06:30.577

这是鸡和蛋悖论的计算机科学版本。我想不出不用汇编程序或其他语言编写初始编译器的方法。如果可以做到，我应该 Lisp 可以做到。

实际上，我认为 Lisp 几乎可以胜任。查看[它的维基百科条目](http://en.wikipedia.org/wiki/Lisp_(programming_language))。根据这篇文章，Lisp eval 函数可以用机器代码在[IBM 704](http://en.wikipedia.org/wiki/IBM_704)上实现，完整的编译器（用 Lisp 本身编写）于 1962 年在[麻省理工学院问世](http://www.mit.edu/)。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-17T13:21:16.500

另一种选择是为您的语言创建一个字节码机器（或者如果它的功能不是很不寻常，则使用现有的）并编写一个编译器到字节码，无论是在字节码中，还是在您想要的语言中使用另一种中间体 - 例如解析器工具包，它将 AST 输出为 XML，然后使用 XSLT（或另一种模式匹配语言和基于树的表示）将 XML 编译为字节码。它不会消除对另一种语言的依赖，但可能意味着更多的引导工作最终会出现在最终系统中。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-01T08:16:01.393

一些自举编译器或系统将源形式和对象形式都保存在其存储库中：

*   [ocaml](http://ocaml.org/)是一种同时具有字节码解释器（即 Ocaml 字节码的编译器）和本机编译器（x86-64 或 ARM 等...汇编器）的语言。它的 svn 存储库包含编译器的源代码（文件`*/*.{ml,mli}`）和字节码（文件`boot/ocamlc`）形式。因此，当您构建它时，首先使用它的字节码（以前版本的编译器）来编译自己。后来新编译的字节码能够编译本机编译器。所以 Ocaml svn 存储库包含`*.ml[i]`源文件和`boot/ocamlc`字节码文件。

*   [rust](http://www.rust-lang.org/)编译器下载（使用，`wget`因此您需要一个有效的 Internet 连接）其二进制文件的先前版本来编译自己。

*   [MELT](http://gcc-melt.org/)是一种类似 Lisp 的语言，用于自定义和扩展[GCC](http://gcc.gnu.org/)。它由自举翻译器翻译成 C++ 代码。翻译器生成的 C++ 代码是分布式的，因此 svn 存储库包含翻译器的`*.melt`源文件和`melt/generated/*.cc`“目标”文件。

*   J.Pitrat 的[CAIA](http://bootstrappingartificialintelligence.fr/WordPress3/2014/04/caia-my-colleague/)人工智能系统完全是自我生成的。它可作为数千个`[A-Z]*.c`生成文件的集合（也带有生成的`dx.h`头文件）和数千个`_[0-9]*`数据文件的集合。

*   几个 Scheme 编译器也被引导。Scheme48，鸡计划，...

# sql - 在 SQL Server 上插入更新存储过程

> ID：13540
> 
> 赞同：107
> 
> 时间：2008-08-17T06:48:50.487
> 
> 标签：sql, sql-server, stored-procedures, upsert

我编写了一个存储过程，如果记录存在，它将进行更新，否则它将进行插入。它看起来像这样：

```
update myTable set Col1=@col1, Col2=@col2 where ID=@ID
if @@rowcount = 0
insert into myTable (Col1, Col2) values (@col1, @col2) 
```

我以这种方式编写它的逻辑是，更新将使用 where 子句执行隐式选择，如果返回 0，则插入将发生。

这样做的替代方法是进行选择，然后根据返回的行数进行更新或插入。我认为这是低效的，因为如果您要进行更新，它将导致 2 次选择（第一次显式选择调用和第二次隐式在更新的位置）。如果proc要进行插入，那么效率就没有区别。

我的逻辑在这里合理吗？这是您将插入和更新组合到存储过程中的方式吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-08-17T07:22:43.960

您的假设是正确的，这是执行此操作的最佳方法，称为[upsert/merge](http://en.wikipedia.org/wiki/Upsert)。

[UPSERT 的重要性 - 来自 sqlservercentral.com](http://www.sqlservercentral.com/articles/T-SQL/61773/)：

> 对于上述案例中的每次更新，如果我们使用 UPSERT 而不是 EXISTS，我们将从表中删除一个额外的读取。不幸的是，对于插入来说，UPSERT 和 IF EXISTS 方法都在表上使用相同数量的读取。因此，只有当有非常正当的理由证明额外的 I/O 是合理的时，才应该检查是否存在。做事的优化方法是确保您在数据库上的读取尽可能少。
> 
> 最好的策略是尝试更新。如果没有行受更新影响，则插入。在大多数情况下，该行已经存在并且只需要一个 I/O。

**编辑**：请查看[此答案](https://stackoverflow.com/questions/13540/insert-update-stored-proc-on-sql-server/193876#193876)和链接的博客文章，以了解此模式的问题以及如何使其安全工作。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2008-10-11T09:04:47.527

请阅读[我博客上](http://samsaffron.com/blog/archive/2007/04/04/14.aspx)的帖子，了解您可以使用的良好、安全的模式。有很多考虑因素，这个问题的公认答案远非安全。

要快速回答，请尝试以下模式。它可以在 SQL 2000 及更高版本上正常工作。SQL 2005 为您提供了打开其他选项的错误处理，而 SQL 2008 为您提供了一个 MERGE 命令。

```
begin tran
   update t with (serializable)
   set hitCount = hitCount + 1
   where pk = @id
   if @@rowcount = 0
   begin
      insert t (pk, hitCount)
      values (@id,1)
   end
commit tran 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-08-24T20:21:28.530

如果要与 SQL Server 2000/2005 一起使用，则需要将原始代码包含在事务中，以确保数据在并发场景中保持一致。

```
BEGIN TRANSACTION Upsert
update myTable set Col1=@col1, Col2=@col2 where ID=@ID
if @@rowcount = 0
insert into myTable (Col1, Col2) values (@col1, @col2)
COMMIT TRANSACTION Upsert 
```

这会产生额外的性能成本，但会确保数据完整性。

添加，如前所述，应在可用的情况下使用 MERGE。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-08-17T07:24:48.200

顺便说一下，MERGE 是 SQL Server 2008 中的新功能之一。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-17T07:26:40.640

你不仅需要在事务中运行它，它还需要高隔离级别。我实际上默认隔离级别是已提交读，并且此代码需要可序列化。

```
SET transaction isolation level SERIALIZABLE
BEGIN TRANSACTION Upsert
UPDATE myTable set Col1=@col1, Col2=@col2 where ID=@ID
if @@rowcount = 0
  begin
    INSERT into myTable (ID, Col1, Col2) values (@ID @col1, @col2)
  end
COMMIT TRANSACTION Upsert 
```

也许还添加@@error 检查和回滚可能是个好主意。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-02T20:13:39.647

如果您没有在 SQL 2008 中进行合并，则必须将其更改为：

如果@@rowcount = 0 和@@error=0

否则，如果由于某种原因更新失败，那么它将尝试在之后插入，因为失败语句的行数为 0

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-29T21:41:33.417

UPSERT 的忠实拥护者，真正减少了要管理的代码。这是我这样做的另一种方法：其中一个输入参数是 ID，如果 ID 为 NULL 或 0，则您知道它是一个 INSERT，否则它是一个更新。假设应用程序知道是否有 ID，因此不会在所有情况下都有效，但如果您这样做会将执行次数减半。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-01T14:27:53.913

修改后的 Dima Malenko 帖子：

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE 

BEGIN TRANSACTION UPSERT 

UPDATE MYTABLE 
SET    COL1 = @col1, 
       COL2 = @col2 
WHERE  ID = @ID 

IF @@rowcount = 0 
  BEGIN 
      INSERT INTO MYTABLE 
                  (ID, 
                   COL1, 
                   COL2) 
      VALUES      (@ID, 
                   @col1, 
                   @col2) 
  END 

IF @@Error > 0 
  BEGIN 
      INSERT INTO MYERRORTABLE 
                  (ID, 
                   COL1, 
                   COL2) 
      VALUES      (@ID, 
                   @col1, 
                   @col2) 
  END 

COMMIT TRANSACTION UPSERT 
```

您可以捕获错误并将记录发送到失败的插入表。
我需要这样做，因为我们正在获取通过 WSDL 发送的任何数据，并在可能的情况下在内部对其进行修复。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-02T13:37:56.477

您的逻辑看起来很合理，但是如果您传入了特定的主键，您可能需要考虑添加一些代码来防止插入。

否则，如果您总是在更新不影响任何记录的情况下进行插入，那么当有人在您“UPSERT”运行之前删除记录时会发生什么？现在您尝试更新的记录不存在，因此它将创建一条记录。这可能不是您要寻找的行为。

# .net - .NET 3.5 SP1 和 aspnet_client 水晶报表

> ID：13545
> 
> 赞同：0
> 
> 时间：2008-08-17T07:00:25.677
> 
> 标签：.net, asp.net, .net-3.5, crystal-reports

我最近（几天前）安装了 .NET 3.5 SP1，随后一个带有一堆 Crystal Reports 支持代码的 aspnet_client 文件夹被注入到我的 .net Web 应用程序中。

还有其他人经历过吗？我说这是 SP1 的副作用是否正确？这是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-19T13:20:16.953

不，这是 Crystal Reports 的副作用。如果您不需要它，请将其从计算机中删除，这只是令人头疼的问题。删除 aspnet_client 文件夹是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-21T00:05:59.053

你需要删除什么？它继续将该文件夹添加回我正在处理的项目中......

# case-tools - 使用 CASE 工具进行开发的生产力收益

> ID：13550
> 
> 赞同：2
> 
> 时间：2008-08-17T07:08:41.383
> 
> 标签：case-tools

我正在使用一个名为[MAGIC](http://www.magicsoftware.com/)的 CASE来开发我正在开发的系统，我之前从未使用过这种工具，乍一看我很喜欢，一个月后我生成了很多应用程序，我觉得很有效率，而且 . ..我会说...满意。

在某种程度上感觉不舒服，因为没有代码和我习惯的一切，但另一方面我可以加快我的开发速度。事实是，最终我回到了使用 C#，因为我发现它开发起来更灵活，我可以进行单元测试，使用 CVS，我可以访问更多资源，基本上我拥有“所有控制权”。我觉得这个工具没有给我信心，我认为在项目的后期我无法管理它，因为它强制建立了开发规则。还有很多事情，比如发送电子邮件、使用我自己的控件以及其他事情都有其复杂性，似乎在某些时候它不会像最初我想象的那样简单，也没有最初产品声称的那么容易。这让我想起了一篇很好的文章，叫做“[没有银弹](http://www.virtualschool.edu/mon/SoftwareEngineering/BrooksNoSilverBullet.html)”。

此 CASE 有其优势，但另一方面它没有可供您参考的资源，而且实际上许可证和认证非常昂贵。对我来说，另一个令人失望的事情是，由于它的开发方法过于简单，我一方面感到害怕，因为我对这类工具缺乏经验，另一方面我认为如果我继续使用它，它可能会变成一个复杂的怪物我在项目后期无法管理。

我认为使用这类解决方案来加快速度是件好事，但我想知道，如果这些程序声称比我使用的工具能更好地提高生产力，为什么它们不像 VS.Net、J2EE、Ruby、Python 等那样受欢迎已经指出了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-17T15:21:50.513

我们在我目前的公司使用 CASE 工具进行代码生成，我们正试图摆脱它。

在我看来，它带来的好处 - 代码制作组件的图形表示“更容易”为新开发人员挑选 - 被我认为的缺点所抵消。

这些主要缺点是：

1.  我们无法进行自动合并，这使得在一个组件上进行并行开发几乎是不可能的。

2.  开发人员会依赖该工具并“忘记”如何手动编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-17T15:32:34.517

只问你几个问题：

与您使用的控件相比，您获得了多少生产力？您创建的代码的可测试性和可靠性如何？您在设计中实施新模式的能力如何？

我无法想象有一个 CASE 可以让我先编写一个测试，然后使用 CASE 生成我需要的代码。我宁愿坚持使用 resharper，它可以轻松完成我的日常任务并完全控制我的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-17T22:17:46.947

我参与的项目最初使用 Oracle Development Suite 来组合一个 Web 应用程序。

随着时间的推移（5 年以上），客户要求变得比最初预期的更加复杂，而且屏幕不易维护。因此，该团队非正式地决定开始在 Web PL/SQL 中制作自定义（手动编码）屏幕，而不是使用 Oracle Development Suite CASE 工具（Oracle Designer）生成它们。

团队仍在使用 Development Suite 的 Oracle Report Builder 组件，因为它似乎可以及时“完成工作”。通常，使用 Report Builder 工具的开发人员不太习惯编码。

在这种情况下，此类 CASE 工具的生产力方面似乎在很大程度上取决于客户要求和开发人员技能集/培训/背景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-20T13:25:53.647

不幸的是，[Magic](http://www.magicsoftware.com/)工具不会生成代码，也无法实现设计模式。正如我之前所说的，我无法控制代码原因，因为它没有要修改的代码。底线是它可以以某种方式提高生产力，但它对用户 CVS 和模式来说是不可能的，而且我无法控制所有细节。

我同意 Gary 的说法，“似乎此类 CASE 工具的生产力方面在很大程度上取决于客户要求和开发人员技能集/培训/背景”，但我也非常同意 Klelky；

**这些主要缺点是： 1\. 我们不能进行自动合并，使得在一个组件上并行开发几乎是不可能的。2.开发人员依赖于工具并“忘记”如何手动编码。**

谢谢

# asp.net - 用户控件和 asp.net mvc

> ID：13561
> 
> 赞同：3
> 
> 时间：2008-08-17T08:25:46.440
> 
> 标签：asp.net, asp.net-mvc, user-controls

这是一个微不足道的问题，我不知道如何处理。我需要在每个页面上显示类别列表，并且能够从特定类别中选择要显示的项目。我使用 asp.net MVC，并选择创建一个显示类别的用户控件。我的问题是：将数据传递给用户控件的最佳方法是什么。我已经在这些博客文章中找到了一些信息：

[http://weblogs.asp.net/stephenwalther/archive/2008/08/12/asp-net-mvc-tip-31-passing-data-to-master-pages-and-user-controls.aspx](http://weblogs.asp.net/stephenwalther/archive/2008/08/12/asp-net-mvc-tip-31-passing-data-to-master-pages-and-user-controls.aspx)

[http://blog.matthidinger.com/2008/02/21/ASPNETMVCUserControlsStartToFinish.aspx](http://blog.matthidinger.com/2008/02/21/ASPNETMVCUserControlsStartToFinish.aspx)

我也想听听你的意见。

PS。我想听听 Jeff 的意见，特别是因为他在 UC 在 Stackoverflow 上的经验

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-17T10:30:14.317

我正在使用 mvc 组件，它在预览版 4 中替换了 ascx 用户控件。
示例： [http](http://blog.wekeroad.com/blog/asp-net-mvc-preview-4-componentcontroller-is-now-renderaction/)
://blog.wekeroad.com/blog/asp-net-mvc-preview-4-componentcontroller-is-now-renderaction/ 所以，您从 View 调用组件操作，然后选择 View 进行渲染。您也可以在此调用中传递数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-17T11:02:40.617

这是mvc期货项目。我可能会试试这个 [http://forums.asp.net/t/1303328.aspx](http://forums.asp.net/t/1303328.aspx)。我需要用类别渲染菜单。

# php - mysqli 或 PDO - 有什么优点和缺点？

> ID：13569
> 
> 赞同：342
> 
> 时间：2008-08-17T09:47:22.610
> 
> 标签：php, mysql, pdo, mysqli, database-abstraction

取而代之的是，我们在使用 mysqli 和 PDO 来处理诸如准备好的语句和事务支持之类的东西之间进行划分。有些项目使用一个，有些项目使用另一个。我们几乎不可能迁移到另一个 RDBMS。

我更喜欢 PDO 的唯一原因是它允许为准备好的语句命名参数，而据我所知 mysqli 不允许。

当我们整合我们的项目以仅使用一种方法时，选择其中一种作为标准是否还有其他优点和缺点？

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2008-12-15T16:49:17.780

Well, you could argue with the object oriented aspect, the prepared statements, the fact that it becomes a standard, etc. But I know that most of the time, convincing somebody works better with a killer feature. So there it is:

A really nice thing with PDO is you can fetch the data, injecting it automatically in an object. If you don't want to use an [ORM](http://en.wikipedia.org/wiki/Object-relational_mapping) (cause it's a just a quick script) but you do like object mapping, it's REALLY cool :

```
class Student {

    public $id;
    public $first_name;
    public $last_name

    public function getFullName() {
        return $this->first_name.' '.$this->last_name
    }
}

try 
{
    $dbh = new PDO("mysql:host=$hostname;dbname=school", $username, $password)

    $stmt = $dbh->query("SELECT * FROM students");

    /* MAGIC HAPPENS HERE */

    $stmt->setFetchMode(PDO::FETCH_INTO, new Student);

    foreach($stmt as $student)
    {
        echo $student->getFullName().'<br />';
    } 

    $dbh = null;
}
catch(PDOException $e)
{
    echo $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2008-08-17T09:55:03.420

将应用程序从一个数据库移动到另一个数据库并不常见，但迟早您可能会发现自己正在使用不同的 RDBMS 处理另一个项目。如果您在家中使用 PDO，那么此时至少要少学一件事。

除此之外，我发现 PDO API 更直观一点，而且感觉更真正面向对象。mysqli 感觉它只是一个被客观化的程序 API，如果你明白我的意思的话。简而言之，我发现 PDO 更易于使用，但这当然是主观的。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2008-09-08T14:17:40.213

在我看来，我开始使用 PDO 是因为语句支持更好。我正在使用 ActiveRecord-esque 数据访问层，实现动态生成的语句要容易得多。MySQLi 的参数绑定必须在单个函数/方法调用中完成，因此如果您直到运行时才知道要绑定多少个参数，您将被迫使用`call_user_func_array()`（我相信这是正确的函数名称）进行选择. 忘记简单的动态结果绑定。

最重要的是，我喜欢 PDO，因为它是一个非常合理的抽象级别。在您不想编写 SQL 的完全抽象的系统中使用它很容易，但它也可以很容易地使用更优化的纯查询类型的系统，或者混合搭配两者。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2008-09-10T21:56:31.030

PDO 是标准，它是大多数开发人员期望使用的。mysqli 本质上是针对特定问题的定制解决方案，但它具有其他特定于 DBMS 的库的所有问题。PDO 是所有辛勤工作和聪明思考的地方。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2008-12-15T15:45:02.933

这里还有一点要记住：目前（PHP 5.2）PDO 库是有**缺陷**的。它充满了奇怪的错误。例如：在`PDOStatement`变量中存储 a 之前，该变量应该`unset()`避免大量错误。其中大部分已在 PHP 5.3 中修复，它们将在 2009 年初在 PHP 5.3 中发布，其中可能会有许多其他错误。如果你想要一个稳定的版本，你应该专注于使用 PDO for PHP 6.1，如果你想帮助社区，你应该专注于使用 PDO for PHP 5.3。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2011-07-26T04:20:45.663

关于 PDO 的另一个显着（好的）区别是它的[`PDO::quote()`](http://php.net/manual/en/pdo.quote.php)方法会自动添加封闭引号，而[`mysqli::real_escape_string()`](http://php.net/manual/en/mysqli.real-escape-string.php)（和类似的）不会：

> PDO::quote() 使用适合底层驱动程序的引用样式在输入字符串周围放置引号（如果需要）并转义输入字符串中的特殊字符。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-04-20T22:58:40.663

如果您的站点/Web 应用程序真正成为现实，那么 PDO 将使扩展变得更加容易，因为您可以每天设置主连接和从连接以在数据库中分配负载，而且 PHP 正朝着将 PDO 作为标准迁移。

[PDO 信息](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

[扩展 Web 应用程序](http://www.oracle.com/technetwork/articles/dsl/white-php-part1-355135.html)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-04-10T06:04:27.493

在执行速度方面 MySQLi 胜出，但除非你有一个使用 MySQLi 的好的包装器，否则它处理准备好的语句的函数很糟糕。

我的仍然有错误，但如果有人想要它，[就在这里](http://gorilla3d.com/blog/entry/2008-08-03/improved-mysqli-db-wrapper-prepared-statements)。

简而言之，如果您正在寻找速度增益，那么 MySQLi；如果你想要易用性，那么 PDO。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-08-19T18:55:06.277

我个人使用 PDO，但我认为这主要是一个偏好问题。

PDO 有一些有助于防止 SQL 注入（[prepared statements](http://de.php.net/manual/de/pdo.prepared-statements.php)）的特性，但是如果你小心你的 SQL，你也可以使用 mysqli 来实现。

迁移到另一个数据库并不是使用 PDO 的主要原因。只要不使用“特殊 SQL 功能”，就可以从一个 DB 切换到另一个 DB。但是，一旦您使用例如“SELECT ... LIMIT 1”，您就不能转到“SELECT TOP 1 ...”的 MS-SQL。所以这无论如何都是有问题的。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-01-13T13:06:20.920

*编辑答案。*

在对这两个 API 有一些经验之后，我会说有 2 个阻塞级功能使 mysqli 无法与本机准备语句一起使用。
他们已经在 2 个出色的（但被低估的）答案中提到：

1.  [**将值绑定到任意数量的占位符**](https://stackoverflow.com/a/4351461/285587)
2.  [**以数组的形式返回数据**](https://stackoverflow.com/a/127218/285587)

（在[这个答案](https://stackoverflow.com/a/49787/285587)中也提到了）

由于某种原因，mysqli 两者都失败了。
现在它对第二个（[get_result](http://php.net/manual/en/mysqli-stmt.get-result.php)）有了一些改进，但它只适用于 mysqlnd 安装，这意味着你不能在脚本中依赖这个函数。

然而，直到今天它还没有按值绑定。

所以，只有一个选择：**PDO**

所有其他原因，例如

*   命名占位符（这种语法糖被高估了）
*   不同的数据库支持（实际上没有人使用过它）
*   获取对象（只是无用的语法糖）
*   速度差（没有）

没有任何重要意义。

同时这两个API都缺乏一些**真正重要的特性**，比如

*   标识符占位符
*   复杂数据类型的占位符，使动态绑定不那么繁琐
*   更短的应用程序代码。

因此，为了满足*现实*生活的需求，必须基于这些 API 之一创建自己的抽象库，实现手动解析的占位符。在这种情况下，我更喜欢 mysqli，因为它的抽象级别较低。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2010-10-14T20:43:32.693

在我的[基准脚本](http://pbox.ca/1628i)中，每种方法都测试了 10000 次，并打印了每种方法的总时间差。您应该根据自己的配置进行此操作，我相信结果会有所不同！

这些是我的结果：

*   "`SELECT NULL" -> PGO()`快了 ~ 0.35 秒
*   "`SHOW TABLE STATUS" -> mysqli()`快了 ~ 2.3 秒
*   "`SELECT * FROM users" -> mysqli()`快了约 33 秒

注意：通过对 mysqli 使用 ->fetch_row()，列名不会添加到数组中，我在 PGO 中没有找到这样做的方法。但即使我使用 ->fetch_array() ，mysqli 也比 PGO 稍慢但仍比 PGO 快（SELECT NULL 除外）。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-24T14:01:54.383

PDO 有一点我不喜欢 MySQLi 的东西，那就是 PDO 能够将结果作为指定类类型的对象（例如`$pdo->fetchObject('MyClass')`）返回。MySQLi`fetch_object()`只会返回一个`stdClass`对象。

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2008-09-24T13:45:36.497

有一件事要记住。

Mysqli 不支持 fetch_assoc() 函数，该函数将返回带有表示列名的键的列。当然可以编写你自己的函数来做到这一点，它甚至不是很长，但我**真的**很难写它（对于非信徒：如果你觉得这很容易，请自己尝试一下，不要'不要作弊 :) )

# windows - 确定用户登录 Windows 的时间

> ID：13578
> 
> 赞同：4
> 
> 时间：2008-08-17T10:22:25.877
> 
> 标签：windows

在我们的产品中，需要确定当前用户登录 Windows（特别是 Vista）的时间。似乎没有直接的 API 函数，我找不到任何与 WMI 相关的东西（虽然我不是 WMI 专家，所以我可能错过了一些东西）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-17T12:24:51.310

对于不熟悉 WMI 的人（比如我），这里有一些链接：

*   有关使用各种语言的 WMI 的 MSDN 页面：http: [//msdn.microsoft.com/en-us/library/aa393964 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa393964(VS.85).aspx)
*   关于 Win32_Session 的参考：http: [//msdn.microsoft.com/en-us/library/aa394422](http://msdn.microsoft.com/en-us/library/aa394422(VS.85).aspx) (VS.85).aspx ，但 Win32_session 中的对象属于 Win32_LogonSession 类型（[http://msdn.microsoft.com/en -us/library/aa394189(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa394189(VS.85).aspx) )，它有更多有趣的属性。
*   [WMI Explorer](http://www.ks-soft.net/hostmon.eng/wmi/index.htm) - 一种可用于轻松运行查询的工具，例如 Michal 发布的查询。

下面是从 VBS 查询 Win32_Session 的示例：

```
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" _
    & strComputer & "\root\cimv2")
Set sessions = objWMIService.ExecQuery _
   ("select * from Win32_Session")

For Each objSession in sessions
   Wscript.Echo objSession.StartTime
Next 
```

它为我的个人计算机提醒 6 个会话，也许您可​​以按 LogonType 过滤以仅列出真实（“交互式”）用户。我看不到如何选择“当前用户”的会话。

[编辑] 这是谷歌对您的问题的结果：http: [//forum.sysinternals.com/forum_posts.asp?TID=3755](http://forum.sysinternals.com/forum_posts.asp?TID=3755)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-04T23:12:52.270

在 Powershell 和 WMI 中，以下单行命令将返回显示用户及其登录时间的对象列表。

```
Get-WmiObject win32_networkloginprofile | ? {$_.lastlogon -ne $null} | % {[PSCustomObject]@{User=$_.caption; LastLogon=[Management.ManagementDateTimeConverter]::ToDateTime($_.lastlogon)}} 
```

解释：

*   从 WMI 检索登录用户列表
*   过滤掉任何非交互用户（有效删除`NT AUTHORITY\SYSTEM`）
*   重新格式化用户和登录时间以提高可读性

参考：

*   要使用的 WMI 对象：[https ://forum.sysinternals.com/topic3755.html](https://forum.sysinternals.com/topic3755.html)
*   格式化日期/时间：[https ://blogs.msdn.microsoft.com/powershell/2009/08/12/get-systemuptime-and-working-with-the-wmi-date-format/](https://blogs.msdn.microsoft.com/powershell/2009/08/12/get-systemuptime-and-working-with-the-wmi-date-format/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-15T08:30:16.640

您可以简单地使用 CMD 或 PowerShell 使用以下命令查询用户：

```
C:\> query user
USERNAME              SESSIONNAME        ID  STATE   IDLE TIME  LOGON TIME
john                  rdp-tcp#56          9  Active          .  5/3/2020   10:19 AM
max                   rdp-tcp#5          30  Active    5+23:42  9/4/2020   7:31  PM
yee                                      35  Disc         6:41  10/14/2020 6:37  PM
mohammd               rdp-tcp#3          37  Active          .  10/15/2020 7:51  AM 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-17T10:33:36.400

在 WMI 中执行：“select * from Win32_Session”，您将获得“StartTime”值。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-12T21:25:49.810

使用 WMI，Win32Session 是一个很好的开始。同样，应该指出的是，如果您在网络上，您可以使用 Win32_NetworkLoginProfile 来获取各种信息。

```
Set logins = objWMIService.ExecQuery _
   ("select * from Win32_NetworkLoginProfile")
For Each objSession in logins
   Wscript.Echo objSession.LastLogon
Next 
```

您可以收集的其他信息包括用户名、上次注销以及各种与个人资料相关的内容。

# performance - 解释语言——利用解释器背后的编译语言

> ID：13586
> 
> 赞同：5
> 
> 时间：2008-08-17T11:12:51.813
> 
> 标签：performance, language-agnostic, language-features, interpreted-language

如果那里有任何语言设计者（或者只是知道的人），我很好奇为解释语言创建标准库的方法。具体来说，什么似乎是最好的方法？在解释语言中定义标准函数/方法，或者在编写解释器的编译语言中执行这些调用的处理？

让我想到这一点的是关于 Python 中类似 stripslashes() 的函数的 SO 问题。我的第一个想法是“为什么不定义自己的，只在需要时调用它”，但它提出了一个问题：对于这样的函数，让解释语言处理该开销是否更可取，还是更好编写扩展并利用解释器背后的编译语言？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-17T12:39:58.860

如今，“解释”和“编译”语言之间的界限真的很模糊。例如，Python 在看到源代码时所做的第一件事就是将其编译为字节码表示，这与 Java 在编译类文件时所做的基本相同。这是 *.pyc 文件包含的内容。然后，python 运行时在不参考原始源的情况下执行字节码。传统上，纯解释型语言在执行程序时会连续引用源代码。

在构建一门语言时，这是一个很好的方法来构建一个坚实的基础，您可以在此基础上实现更高级别的功能。如果你有一个可靠、快速的字符串处理系统，那么语言设计者可以（并且应该）在基本运行时之外实现类似 stripslashes() 的东西。这样做至少有几个原因：

*   语言设计者可以证明该语言足够灵活，可以处理这类任务。
*   语言设计者实际上用该语言编写了真正的代码，该语言有测试，因此表明基础是坚实的。
*   其他人可以更轻松地阅读、借用甚至更改更高级别的功能，而无需能够构建甚至理解语言核心。

仅仅因为像 Python 这样的语言编译成字节码并执行并不意味着它很慢。没有理由不能按照 Java 和 .NET 已经在做的那样为 Python 编写即时 (JIT) 编译器来进一步提高性能。事实上，IronPython 将 Python 直接编译为 .NET 字节码，然后使用包括 JIT 在内的 .NET 系统运行。

要直接回答您的问题，语言设计者唯一会在运行时背后的语言（例如 Python 的 C 语言）中实现函数的时候是最大化该函数的性能。这就是为什么像正则表达式解析器这样的模块是用 C 而不是原生 Python 编写的。另一方面，像 getopt.py 这样的模块是用纯 Python 实现的，因为它都可以在那里完成，并且使用相应的 C 库没有任何好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-17T13:33:17.053

还有一种趋势是重新实现传统上被认为是“解释”到 JVM 或 CLR 等平台上的语言，然后允许轻松访问“本机”代码以实现互操作性。因此，您可以从 Jython 和 JRuby 轻松访问 Java 代码，而从 IronPython 和 IronRuby，您可以轻松访问 .NET 代码。

在这种情况下，“利用解释器背后的编译语言”的能力可以被描述为新实现的主要动力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T19:44:41.070

[请参阅www.lua.org](http://www.lua.org/docs.html)上的“论文”部分。

特别是[Lua 5.0的实现](http://www.tecgraf.puc-rio.br/~lhf/ftp/doc/jucs05.pdf)

Lua defines all standard functions in the underlying (ANSI C) code. I believe this is mostly for performance reasons. Recently, i.e. the 'string.*' functions got an alternative implementation in pure Lua, which may prove vital for subprojects where Lua is run on top of .NET or Java runtime (where C code cannot be used).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-17T13:41:11.327

只要您为编译的代码库使用可移植的 API，例如[ANSI C 标准库](http://en.wikipedia.org/wiki/C_standard_library)或C++ 中的[STL](http://en.wikipedia.org/wiki/Standard_Template_Library)，那么利用这些函数就可以避免重新发明轮子，并可能提供更小、更快的解释器。[Lua](http://www.lua.org/)采用这种方法，与许多其他方法相比，它绝对是小而快的。

# asp.net - ASP.net AJAX 拖放？

> ID：13589
> 
> 赞同：2
> 
> 时间：2008-08-17T11:40:38.963
> 
> 标签：asp.net, ajax

我想知道是否有人知道是否有预先制作的解决方案：我在 ASP.net 网站上有一个列表，我希望用户能够通过拖放重新排序列表。此外，我希望有第二个列表，用户可以将项目从第一个列表拖到其中。

到目前为止，我找到了两个解决方案：

*   [Ajax Control Toolkit](http://www.codeplex.com/AjaxControlToolkit)中的 ReorderList需要一些手动工作来确保将更改[持久保存](http://www.codeproject.com/KB/ajax/PersistentReorderList.aspx)到数据库中，并且不支持列表之间的拖放。
*   Telerik的[RadGrid](http://www.telerik.com/DEMOS/ASPNET/Prometheus/Grid/Examples/Programming/DragAndDrop/DefaultCS.aspx)可以满足我的所有需求，但价格远远超出我的预算。

是否还有其他人有一些想法或至少有一些关键字/指针可以进行​​进一步调查？特别是两个列表之间的拖放是我对如何在 ASP.net 中执行此操作一无所知。

顺便说一下，目标框架是 3.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-17T11:49:10.397

这只是个人意见，但我发现在这种情况下使用现成控件的问题是它们非常臃肿，因为它们试图满足每个人的目的。如果您只需要一个可排序的列表，那么一个简单的[Scriptaculous 列表](http://demo.script.aculo.us/ajax/sortable_elements)或带有快速 WebMethod 回调的[jQuery 列表应该非常适合您，并且您显然可以将其粘贴到您自己的用户控件中。](http://docs.jquery.com/UI/Sortables/sortable)

正如我所说，这只是我的意见，但我不会花钱购买会增加页面开销的东西，因为我可以（字面上）花 10 分钟免费写一篇文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-28T12:30:02.403

Mootools sortables 插件就是这样做的，最重要的是，它是免费的；）

[http://demos.mootools.net/Sortables](http://demos.mootools.net/Sortables)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-18T12:36:57.960

我已经评估了[Telerik](http://www.telerik.com/)网格以及[Infragistics](http://www.infragistics.com/Default.aspx)版本。最后，我们采用了类似于 tags2k 建议的方法。我们只是编写了自己的 javascript 并调用[.Net PageMethods](http://www.singingeels.com/Articles/Using_Page_Methods_in_ASPNET_AJAX.aspx)来完成服务器端的工作。

我们发现这两种“开箱即用”的解决方案都很臃肿。除非您以每行 20 条记录的速度进行分页，否则它们确实会影响性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-29T18:19:33.473

查看 Raj Kaimal 的 ajax 控件扩展器：

[http://weblogs.asp.net/rajbk/Contents/Item/Display/517](http://weblogs.asp.net/rajbk/Contents/Item/Display/517)

它就像一个魅力。

# html - 浏览器之间的 HTML 差异

> ID：13594
> 
> 赞同：4
> 
> 时间：2008-08-17T12:02:23.600
> 
> 标签：html, browser

你知道在不同的浏览器中处理 HTML 标签/属性有什么不同吗？例如，我曾经看到一个页面，其输入标签的最大长度字段设置为“2o”。Firefox 和 Opera 忽略“o”，并将最大长度设置为 2，而 Internet Explorer 完全忽略该字段。你知道更多吗？

（注意：因为这可能是一个列表，所以如果差异的通用名称是粗体文本，那就太好了，例如：**标签属性中的不同不稳定值处理**）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-17T17:08:10.503

**错误列表**

Web 开发人员已经编制了一些非常全面的列表；我认为编译资源列表比复制这些列表更好。

*   [http://www.positioniseverything.net/](http://www.positioniseverything.net/)
*   [http://www.richinstyle.com/bugs/table.html](http://www.richinstyle.com/bugs/table.html)
*   [http://www.quirksmode.org/](http://www.quirksmode.org/)（如[Kristopher Johnson](https://stackoverflow.com/users/1175/kristopher-johnson)所述）

**Javascript**

我同意[Craig](https://stackoverflow.com/users/1611/craig)的观点 - 最好使用处理浏览器之间差异的库（以及简化命名空间、AJAX 事件处理和上下文等）来编写 Javascript。这是克雷格答案的跳转（在此页面上）。

**CSS 重置**

CSS 重置可以真正简化 Web 开发。它们覆盖在浏览器之间略有不同的设置，为您提供更通用的起点。我喜欢 Yahoo 的[YUI Reset CSS](http://developer.yahoo.com/yui/reset/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-17T12:04:27.247

查看[http://www.quirksmode.org/](http://www.quirksmode.org/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-17T14:58:25.257

如果您使用 javascript 编程，我可以给出的最佳建议是使用 javascript 库而不是尝试自己编写。这些库经过了很好的测试，更有可能遇到了极端情况。

Scriptalicious - [http://script.aculo.us/](http://script.aculo.us/)
jQuery - [http://jquery.com/](http://jquery.com/)
Microsoft AJAX - [http://www.asp.net/ajax/](http://www.asp.net/ajax/)
Dojo - [http://dojotoolkit.org/](http://dojotoolkit.org/)
原型 - [http ://www.prototypejs.org/](http://www.prototypejs.org/)
YUI - [http://developer.yahoo.com/yui/](http://developer.yahoo.com/yui/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-17T18:07:40.540

> > 你知道在不同浏览器中处理 HTML 标签/属性有什么不同吗？

这个问题是否要求提供所有差异的信息，包括 DOM 和 CSS？有点大的话题。我认为 OP 是专门询问 HTML 行为，而不是所有其他的东西......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-17T16:28:13.720

真正让我烦恼的是 IE 损坏的 document.getElementById javascript 函数 - 在大多数浏览器中，这会给你一些具有你指定的 id 的东西，IE 很乐意给你一些在 name 属性中具有值的东西，即使有文档中稍后带有您要求的 ID 的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-17T21:51:34.217

**HTML 模式下 XHTML 解析不一致**

HTML 解析器不是为处理 XML 而设计的。

如果 XHTML 文档以“text/html”的形式提供，并且不遵循[兼容性指南，您可能会得到意想不到的结果。](http://www.w3.org/TR/xhtml1/#guidelines)

空标签是问题的一种可能来源。<tag/> 和 <tag></tag> 在 XML 中是等价的。然而，HTML 解析器可以用两种方式解释它们。

例如 Opera 和 IE 将 <br></br> 视为两个 <br> 而 Firefox 和 WebKit 将 <br></br> 视为一个 <br>。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-23T01:53:45.193

> 我曾经看到一个页面，其输入标签的最大长度字段设置为“2o”。

在这种特定情况下，您正在谈论*无效*代码。maxlength 属性不能包含字母，只能包含数字。

正如您自己所见，浏览器对无效代码的处理方式差异很大。

如果你真的在问“所有不同的浏览器在面对由于无数原因中的任何一个而被破坏的 HTML 代码时会做什么？”，那是疯狂的。

*通过使用有效代码*，我们可以大大减少问题空间。

 *因此，请使用有效的 HTML。然后，您将面临两个主要问题领域：

*   浏览器错误——浏览器如何遵循 HTML 标准以及它做错了什么
*   浏览器默认值的差异，例如它给主体的填充/边距量*

# c# - 将枚举转换为人类可读的值

> ID：13599
> 
> 赞同：26
> 
> 时间：2008-08-17T12:24:21.840
> 
> 标签：c#, enums, human-readable

有谁知道如何将枚举值转换为人类可读的值？

例如：

> ThisIsValueA 应该是“这是值 A”。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-08-17T13:10:20.513

从很久以前某个 Ian Horwill 在[博客文章](http://secretgeek.net/progr_purga.asp)中留下的 vb 代码片段转换它......我已经成功地在生产中使用了它。

```
 /// <summary>
    /// Add spaces to separate the capitalized words in the string, 
    /// i.e. insert a space before each uppercase letter that is 
    /// either preceded by a lowercase letter or followed by a 
    /// lowercase letter (but not for the first char in string). 
    /// This keeps groups of uppercase letters - e.g. acronyms - together.
    /// </summary>
    /// <param name="pascalCaseString">A string in PascalCase</param>
    /// <returns></returns>
    public static string Wordify(string pascalCaseString)
    {            
        Regex r = new Regex("(?<=[a-z])(?<x>[A-Z])|(?<=.)(?<x>[A-Z])(?=[a-z])");
        return r.Replace(pascalCaseString, " ${x}");
    } 
```

（需要，'使用 System.Text.RegularExpressions;'）

因此：

```
Console.WriteLine(Wordify(ThisIsValueA.ToString())); 
```

会回来，

```
"This Is Value A". 
```

它比提供描述属性更简单，也更少冗余。

仅当您需要提供间接层（问题没有要求）时，属性才在这里有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-17T16:05:16.417

Enums 上的 .ToString 在 C# 中相对较慢，与 GetType().Name 相当（它甚至可能在幕后使用它）。

如果您的解决方案需要非常快速或高效，您最好将转换缓存在静态字典中，然后从那里查找它们。

* * *

@Leon 的代码的一个小改编以利用 C#3。作为枚举的扩展，这确实是有意义的——如果您不想把所有枚举都弄乱，您可以将其限制为特定类型。

```
public static string Wordify(this Enum input)
{            
    Regex r = new Regex("(?<=[a-z])(?<x>[A-Z])|(?<=.)(?<x>[A-Z])(?=[a-z])");
    return r.Replace( input.ToString() , " ${x}");
}

//then your calling syntax is down to:
MyEnum.ThisIsA.Wordify(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-17T12:28:36.230

我见过的大多数示例都涉及使用 [Description] 属性标记您的枚举值，并使用反射在值和描述之间进行“转换”。这是一篇关于它的旧博客文章：

[http://geekswithblogs.net/rakker/archive/2006/05/19/78952.aspx](http://geekswithblogs.net/rakker/archive/2006/05/19/78952.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-17T13:01:02.030

您可以从 System.Reflection 的“属性”类继承来创建自己的“描述”类。像这样（从[这里](http://blogs.msdn.com/abhinaba/archive/2005/10/20/483000.aspx)）：

```
using System;
using System.Reflection;
namespace FunWithEnum
{
    enum Coolness : byte
    {
        [Description("Not so cool")]
        NotSoCool = 5,
        Cool, // since description same as ToString no attr are used
        [Description("Very cool")]
        VeryCool = NotSoCool + 7,
        [Description("Super cool")]
        SuperCool
    }
    class Description : Attribute
    {
        public string Text;
        public Description(string text)
        {
            Text = text;
        }
    }
    class Program
    {
        static string GetDescription(Enum en)
        {
            Type type = en.GetType();
            MemberInfo[] memInfo = type.GetMember(en.ToString());
            if (memInfo != null && memInfo.Length > 0)
            {
                object[] attrs = memInfo[0].GetCustomAttributes(typeof(Description), false);
                if (attrs != null && attrs.Length > 0)
                    return ((Description)attrs[0]).Text;
            }
            return en.ToString();
        }
        static void Main(string[] args)
        {
            Coolness coolType1 = Coolness.Cool;
            Coolness coolType2 = Coolness.NotSoCool;
            Console.WriteLine(GetDescription(coolType1));
            Console.WriteLine(GetDescription(coolType2));
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-17T13:00:10.487

你也可以看看这篇文章： http: [//www.codeproject.com/KB/cs/enumdatabinding.aspx](http://www.codeproject.com/KB/cs/enumdatabinding.aspx)

它专门关于数据绑定，但展示了如何使用属性来装饰枚举值并提供“GetDescription”方法来检索属性的文本。使用内置描述属性的问题在于该属性还有其他用途/用户，因此描述有可能出现在您不希望出现的位置。自定义属性解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-17T13:57:07.190

我发现最好用低于分数来定义你的枚举值，所以 ThisIsValueA 将是 This_Is_Value_A 然后你可以做一个 enumValue.toString().Replace("_"," ") 其中 enumValue 是你的变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-28T23:58:04.810

向每个枚举添加属性的另一种`Description`方法是创建扩展方法。要重用 Adam 的“Coolness”枚举：

```
public enum Coolness
{
    NotSoCool,
    Cool,
    VeryCool,
    SuperCool
}

public static class CoolnessExtensions
{
    public static string ToString(this Coolness coolness)
    {
        switch (coolness)
        {
            case Coolness.NotSoCool:
                return "Not so cool";
            case Coolness.Cool:
                return "Cool";
            case Coolness.VeryCool:
                return "Very cool";
            case Coolness.SuperCool:
                return Properties.Settings.Default["SuperCoolDescription"].ToString();
            default:
                throw new ArgumentException("Unknown amount of coolness", nameof(coolness));
        }
    }
} 
```

虽然这意味着描述离实际值更远，但它允许您使用本地化来为每种语言打印不同的字符串，例如在我的`VeryCool`示例中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-19T13:54:27.230

```
Enum.GetName(typeof(EnumFoo), EnumFoo.BarValue) 
```

# c++ - GUI系统开发资源？

> ID：13607
> 
> 赞同：1
> 
> 时间：2008-08-17T12:50:15.000
> 
> 标签：c++, user-interface, playstation-portable

有人可以推荐任何用于创建图形用户界面的好资源，最好是在 C/C++ 中？

目前我最大的影响是[3DBuzz.com](http://www.3dbuzz.com)的[C++/OpenGL VTMs](http://www.3dbuzz.com/xcart/product.php?productid=30&cat=12&page=1)（视频培训模块）。虽然它们非常好，但它们涵盖了很大范围的图形编程，因此只浏览了 GUI 编程的表面。

这个问题确实与“[我如何制作 GUI？](https://stackoverflow.com/questions/7489/how-do-i-make-a-gui) ”有关，其中还有我当前结构的粗略轮廓。

任何回应将不胜感激。

**编辑：** 我刚刚阅读了一些答案，发现我错过了一些要点。我不得不输入两次问题，因为我抓住了错误的按钮并丢失了它。

我错过了两个重要的点，第一：这将用于跨平台，包括索尼 PSP 上的自制软件。第二：我想创建一个不使用现有系统的 GUI 系统。

**编辑 2：**我认为你们中的一些人没有抓住重点，我不知道如何**使用**我想要构建的现有 GUI 系统。

当前形式的 Qt 不能移植到 PSP 上，更不用说这种任务的过度杀伤力了。

也就是说，我决定创建一个 IM-GUI，并开始对代码进行原型设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-17T13:18:18.673

我不会将 OpenGL 用于 GUI，除非您计划使用更传统的 GUI 工具包（例如[Qt](http://trolltech.com/)、[wxWidgets](http://www.wxwidgets.org/)、[GTK](http://www.gtk.org/)等）无法获得的硬件加速和/或 3D 效果。如果您只需要一个快速简单的 GUI 来托管您的 OpenGL 图形，那么[FLTK](http://www.fltk.org/)是一个不错的选择。否则，为了直接在 OpenGL 中渲染 GUI，它们是像[Crazy Eddie 的 GUI](http://www.cegui.org.uk/wiki/index.php/Main_Page)这样的库，它们可以做到这一点，并提供许多您不必重新发明的[可换肤](http://en.wikipedia.org/wiki/Skinnable) [小部件。](http://en.wikipedia.org/wiki/GUI_widget)然后可以为窗口和 OpenGL 上下文提供像[SDL](http://www.libsdl.org/)这样的可移植库。

**编辑**：既然我已经回去看了你的[另](https://stackoverflow.com/questions/7489/how-do-i-make-a-gui)一篇文章，我想我对你的要求有了更好的理解。对于像 Nintendo DS 这样的嵌入式系统上的 GUI，我会考虑使用“即时模式”GUI。[Jari Komppa](http://sol.gfxile.net/who.html)有一个[关于它们的很好的教程](http://sol.gfxile.net/imgui/)，但是你可以使用比他提供的 C 代码更面向对象的 C++ 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-17T12:58:57.013

看看[Qt](https://www.qt.io/download-open-source/)。它是一个用于制作 GUI 的开源库。与 Java 中的 Swing 不同，它假设了很多东西，因此制作功能性 GUI 真的很容易。例如，textarea 假定您需要一个上下文菜单，当您右键单击它时使用复制、粘贴、全选等。[文档](https://doc.qt.io/qt-5/)也非常好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-17T13:03:00.653

如果您正在寻找如何使用特定框架，[http://www.fox-toolkit.org有一个 API 参考。](http://www.fox-toolkit.org/)还是您对一般理论更感兴趣，或者您对如何自己做低级工作更感兴趣？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-18T10:13:45.660

有关“即时模式”GUI 的更多信息，我可以推荐[Molly Rocket 论坛](https://mollyrocket.com/forums/viewtopic.php?t=134)。有一个很好的视频演示了 IM-GUI 背后的思想，还有很多讨论。

我最近根据 Jari 页面上的演示编写了一个非常快速的 IM-GUI 系统，就我而言，我真的只是希望能够在屏幕上获得几个按钮和框，或多或少只是硬代码对输入的响应，它确实感觉是正确的做法，而不是采用更成熟的 GUI 架构。（这是在 DirectX 应用程序中，所以我的选择数量非常有限）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-19T13:49:31.153

最快的方法之一是将 python 与 pyQt、PyFLTK、tkinter、wxPython 之类的 gui 绑定一起使用，甚至通过使用 SDL 的 pygame。

它简单快速且独立于平台。包的管理也是无与伦比的。

看：

*   [http://wiki.python.org/moin/PyQt](http://wiki.python.org/moin/PyQt)
*   [http://www.fltk.org/](http://www.fltk.org/)
*   （tkinter 是默认的，已经用 python 打包了）
*   [http://wxpython.org/](http://wxpython.org/)
*   [http://www.pygame.org/news.html](http://www.pygame.org/news.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-19T18:14:50.227

对于像 PSP 这样的平台，我会稍微担心 IM GUI 解决方案的性能。使用传统的保留模式类型的解决方案，当您创建控件时，您还可以创建顶点缓冲区/显示列表或渲染它所需的内容。使用即时模式解决方案，在我看来，您需要在每一帧动态地重新创建它。

你可能不关心这个，如果你只做几个按钮，或者它不会在游戏中使用（假设你正在制作游戏）但是，特别是如果你有相当多的文字，成本如果您找不到以某种方式缓存显示列表的方法，则渲染可能会开始受到影响。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T13:23:17.603

我会第二个Qt。它是跨平台的，我发现它比内置的 Visual Studio GUI*更*容易使用。它是双重许可的，所以如果您不希望您的代码成为 GPL，您可以购买许可证。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-19T11:19:04.920

我看过 Molley Rocket 的视频并浏览了 Jari Komppa 的缓存教程。

IM-GUI 似乎是最好的方式，我认为它会比我最初设想的系统更加精简，构建起来也快得多。

现在一个新问题，我只能除了一个答案。:(

再次感谢 Monjardin 和 dooz，干杯。

东西2k

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-19T11:47:09.277

我会看看[GLAM](http://glam.sourceforge.net/)和[GLGooey](http://glgooey.sourceforge.net/)

# c# - 验证枚举值

> ID：13615
> 
> 赞同：83
> 
> 时间：2008-08-17T13:14:42.720
> 
> 标签：c#, validation, enums

我需要验证一个整数才能知道它是否是一个有效的枚举值。

在 C# 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2011-01-26T17:02:44.867

您一定会爱上这些认为数据不仅总是来自 UI，而且在您的控制范围内的 UI 的人！

`IsDefined`在大多数情况下都很好，您可以从以下开始：

```
public static bool TryParseEnum<TEnum>(this int enumValue, out TEnum retVal)
{
 retVal = default(TEnum);
 bool success = Enum.IsDefined(typeof(TEnum), enumValue);
 if (success)
 {
  retVal = (TEnum)Enum.ToObject(typeof(TEnum), enumValue);
 }
 return success;
} 
```

（显然，如果您认为它不适合 int 扩展，请删除“this”）

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-01T22:03:57.430

恕我直言，标记为答案的帖子不正确。
参数和数据验证是几十年前钻研给我的事情之一。

**为什么**

验证是必需的，因为基本上任何整数值都可以分配给枚举而不会引发错误。
我花了很多天研究 C# 枚举验证，因为它在许多情况下是必要的功能。

**在哪里**

对我来说，枚举验证的主要目的是验证从文件中读取的数据：你永远不知道文件是否已损坏、是否被外部修改或被故意黑客入侵。
并且通过对从剪贴板粘贴的应用程序数据进行枚举验证：您永远不知道用户是否编辑了剪贴板内容。

也就是说，我花了几天时间研究和测试许多方法，包括分析我能找到或设计的每种方法的性能。

调用 System.Enum 中的任何内容都非常缓慢，以至于对于包含成百上千个对象的函数而言，这些对象的属性中具有一个或多个必须验证边界的枚举，这是一个明显的性能损失。

最重要的是，在验证枚举值时远离System.Enum 类中的*所有内容*，它非常慢。

**结果**

我目前用于枚举验证的方法可能会引起这里许多程序员的翻白眼，但恕我直言，对于我的特定应用程序设计而言，它是最不邪恶的。

我定义了一个或两个常量，它们是枚举的上限和（可选）下限，并在一对 if() 语句中使用它们进行验证。
一个缺点是，如果更改枚举，则必须确保更新常量。
此方法也仅在枚举是“自动”样式时才有效，其中每个枚举元素都是增量整数值，例如 0,1,2,3,4,.... 它不能与标志或枚举一起正常工作具有非增量值。

另请注意，此方法几乎与常规 int32 上的 "<" ">" 一样快（在我的测试中获得了 38,000 个滴答声）。

例如：

```
public const MyEnum MYENUM_MINIMUM = MyEnum.One;
public const MyEnum MYENUM_MAXIMUM = MyEnum.Four;

public enum MyEnum
{
    One,
    Two,
    Three,
    Four
};

public static MyEnum Validate(MyEnum value)
{
    if (value < MYENUM_MINIMUM) { return MYENUM_MINIMUM; }
    if (value > MYENUM_MAXIMUM) { return MYENUM_MAXIMUM; }
    return value;
} 
```

**表现**

对于那些感兴趣的人，我描述了枚举验证的以下变体，以下是结果。

分析是在发布编译时在每个方法上循环一百万次执行的，具有随机整数输入值。每个测试运行 10 次以上并取平均值。滴答结果包括执行的总时间，其中包括随机数生成等，但这些在测试中将保持不变。1 个滴答声 = 10ns。

注意这里的代码不是完整的测试代码，它只是基本的枚举验证方法。对这些进行了测试，还有许多其他变体，所有这些变体的结果都与此处显示的 1,800,000 滴答声相似。

列出从最慢到最快的四舍五入结果，希望没有错别字。

**在方法中确定的界限**= 13,600,000 滴答

```
public static T Clamp<T>(T value)
{
    int minimum = Enum.GetValues(typeof(T)).GetLowerBound(0);
    int maximum = Enum.GetValues(typeof(T)).GetUpperBound(0);

    if (Convert.ToInt32(value) < minimum) { return (T)Enum.ToObject(typeof(T), minimum); }
    if (Convert.ToInt32(value) > maximum) { return (T)Enum.ToObject(typeof(T), maximum); }
    return value;
} 
```

**Enum.IsDefined** = 1,800,000 tick
注意：此代码版本不会限制为 Min/Max，但如果超出范围则返回 Default。

```
public static T ValidateItem<T>(T eEnumItem)
{
    if (Enum.IsDefined(typeof(T), eEnumItem) == true)
        return eEnumItem;
    else
        return default(T);
} 
```

**System.Enum Convert Int32 with casts** = 1,800,000 tick

```
public static Enum Clamp(this Enum value, Enum minimum, Enum maximum)
{
    if (Convert.ToInt32(value) < Convert.ToInt32(minimum)) { return minimum; }
    if (Convert.ToInt32(value) > Convert.ToInt32(maximum)) { return maximum; }
    return value;
} 
```

**if() 最小/最大常数**= 43,000 个滴答 = 获胜者快 42 倍和 316 倍。

```
public static MyEnum Clamp(MyEnum value)
{
    if (value < MYENUM_MINIMUM) { return MYENUM_MINIMUM; }
    if (value > MYENUM_MAXIMUM) { return MYENUM_MAXIMUM; }
    return value;
} 
```

-eol-

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-12-04T22:16:46.543

正如其他人提到的那样，`Enum.IsDefined`它很慢，如果它处于循环中，您必须注意这一点。

在进行多重比较时，更快的方法是首先将值放入`HashSet`. 然后简单地使用`Contains`来检查该值是否有效，如下所示：

```
int userInput = 4;
// below, Enum.GetValues converts enum to array. We then convert the array to hashset.
HashSet<int> validVals = new HashSet<int>((int[])Enum.GetValues(typeof(MyEnum)));
// the following could be in a loop, or do multiple comparisons, etc.
if (validVals.Contains(userInput))
{
    // is valid
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-03-06T16:50:39.363

这是一个快速的通用解决方案，使用静态构造的`HashSet<T>`.

您可以在工具箱中定义一次，然后将其用于所有枚举验证。

```
public static class EnumHelpers
{
    /// <summary>
    /// Returns whether the given enum value is a defined value for its type.
    /// Throws if the type parameter is not an enum type.
    /// </summary>
    public static bool IsDefined<T>(T enumValue)
    {
        if (typeof(T).BaseType != typeof(System.Enum)) throw new ArgumentException($"{nameof(T)} must be an enum type.");

        return EnumValueCache<T>.DefinedValues.Contains(enumValue);
    }

    /// <summary>
    /// Statically caches each defined value for each enum type for which this class is accessed.
    /// Uses the fact that static things exist separately for each distinct type parameter.
    /// </summary>
    internal static class EnumValueCache<T>
    {
        public static HashSet<T> DefinedValues { get; }

        static EnumValueCache()
        {
            if (typeof(T).BaseType != typeof(System.Enum)) throw new Exception($"{nameof(T)} must be an enum type.");

            DefinedValues = new HashSet<T>((T[])System.Enum.GetValues(typeof(T)));
        }
    }
} 
```

请注意，通过使用带有字符串键的字典（注意不区分大小写和数字字符串表示），这种方法也很容易扩展到枚举解析。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-08-17T13:46:20.833

**`Enum.IsDefined`**布拉德艾布拉姆斯在他的帖子中特别警告不要[过度简化的危险](https://docs.microsoft.com/en-us/archive/blogs/brada/the-danger-of-over-simplification-enum-isdefined)。

摆脱这种要求（即验证枚举的需要）的最好方法是删除用户可能会出错的地方，例如某种输入框。例如，使用带有下拉菜单的枚举来强制使用有效的枚举。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-02-24T14:10:23.250

该答案是对 deegee 的回答的回应，该回答引发了 System.Enum 的性能问题，因此不应将其视为我首选的通用答案，更多地解决严格性能场景中的枚举验证。

如果您遇到关键任务性能问题，其中缓慢但功能性代码在紧密循环中运行，那么我个人会考虑尽可能将该代码移出循环，而不是通过减少功能来解决。例如，如果将来有人决定弃用某些枚举值，则将代码限制为仅支持连续枚举可能是寻找错误的噩梦。简单地说，您可以在开始时调用 Enum.GetValues 一次，以避免触发所有反射等数千次。这应该可以立即提高性能。如果您需要更高的性能并且您知道很多枚举是连续的（但您仍然希望支持“gappy”枚举），您可以更进一步并执行以下操作：

```
public abstract class EnumValidator<TEnum> where TEnum : struct, IConvertible
{
    protected static bool IsContiguous
    {
        get
        {
            int[] enumVals = Enum.GetValues(typeof(TEnum)).Cast<int>().ToArray();

            int lowest = enumVals.OrderBy(i => i).First();
            int highest = enumVals.OrderByDescending(i => i).First();

            return !Enumerable.Range(lowest, highest).Except(enumVals).Any();
        }
    }

    public static EnumValidator<TEnum> Create()
    {
        if (!typeof(TEnum).IsEnum)
        {
            throw new ArgumentException("Please use an enum!");
        }

        return IsContiguous ? (EnumValidator<TEnum>)new ContiguousEnumValidator<TEnum>() : new JumbledEnumValidator<TEnum>();
    }

    public abstract bool IsValid(int value);
}

public class JumbledEnumValidator<TEnum> : EnumValidator<TEnum> where TEnum : struct, IConvertible
{
    private readonly int[] _values;

    public JumbledEnumValidator()
    {
        _values = Enum.GetValues(typeof (TEnum)).Cast<int>().ToArray();
    }

    public override bool IsValid(int value)
    {
        return _values.Contains(value);
    }
}

public class ContiguousEnumValidator<TEnum> : EnumValidator<TEnum> where TEnum : struct, IConvertible
{
    private readonly int _highest;
    private readonly int _lowest;

    public ContiguousEnumValidator()
    {
        List<int> enumVals = Enum.GetValues(typeof (TEnum)).Cast<int>().ToList();

        _lowest = enumVals.OrderBy(i => i).First();
        _highest = enumVals.OrderByDescending(i => i).First();
    }

    public override bool IsValid(int value)
    {
        return value >= _lowest && value <= _highest;
    }
} 
```

你的循环变成这样的地方：

```
//Pre import-loop
EnumValidator< MyEnum > enumValidator = EnumValidator< MyEnum >.Create();
while(import)   //Tight RT loop.
{
    bool isValid = enumValidator.IsValid(theValue);
} 
```

我确信 EnumValidator 类可以更有效地编写（这只是一个快速演示），但坦率地说，谁在乎导入循环之外发生了什么？唯一需要超快的位是在循环内。这就是采用抽象类路由的原因，以避免循环中不必要的 if-enumContiguous-then-else（工厂 Create 基本上是预先完成的）。您会注意到有点虚伪，为简洁起见，此代码将功能限制为 int-enums。我应该使用 IConvertible 而不是直接使用 int，但是这个答案已经够罗嗦了！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-26T18:46:22.953

这就是我根据网上的多个帖子进行操作的方式。这样做的原因是为了确保用`Flags`属性标记的枚举也可以成功验证。

```
public static TEnum ParseEnum<TEnum>(string valueString, string parameterName = null)
{
    var parsed = (TEnum)Enum.Parse(typeof(TEnum), valueString, true);
    decimal d;
    if (!decimal.TryParse(parsed.ToString(), out d))
    {
        return parsed;
    }

    if (!string.IsNullOrEmpty(parameterName))
    {
        throw new ArgumentException(string.Format("Bad parameter value. Name: {0}, value: {1}", parameterName, valueString), parameterName);
    }
    else
    {
        throw new ArgumentException("Bad value. Value: " + valueString);
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-27T17:57:20.040

基于 Timo 的回答，我精心设计了以下扩展方法（C# 6 语法）来提供快速、通用的解决方案。

这避免了 的性能问题`Enum.IsDefined`，并且语法更简洁。

```
public static class EnumHelpers
{
    /// <summary>
    /// Returns whether the given enum value is a defined value for its type.
    /// </summary>
    public static bool IsDefined<T>(this T enumValue)
        where T : Enum
        => EnumValueCache<T>.DefinedValues.Contains(enumValue);

    /// <summary>
    /// Caches the defined values for each enum type for which this class is accessed.
    /// </summary>
    private static class EnumValueCache<T>
        where T : Enum
    {
        public static readonly HashSet<T> DefinedValues = new HashSet<T>((T[])Enum.GetValues(typeof(T)));
    }
} 
```

用法：

```
if (!myEnumValue.IsDefined())
   // ... 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-24T14:41:23.500

您可以将 FluentValidation 用于您的项目。这是“枚举验证”的一个简单示例

让我们使用 FluentValidation 创建一个 EnumValidator 类；

```
public class EnumValidator<TEnum> : AbstractValidator<TEnum> where TEnum : struct, IConvertible, IComparable, IFormattable
{
    public EnumValidator(string message)
    {
        RuleFor(a => a).Must(a => typeof(TEnum).IsEnum).IsInEnum().WithMessage(message);
    }

} 
```

现在我们创建了我们的 enumvalidator 类；让我们创建一个类来调用 enumvalidor 类；

```
 public class Customer 
{
  public string Name { get; set; }
  public Address address{ get; set; }
  public AddressType type {get; set;}
}
public class Address 
{
  public string Line1 { get; set; }
  public string Line2 { get; set; }
  public string Town { get; set; }
  public string County { get; set; }
  public string Postcode { get; set; } 
```

}

```
public enum AddressType
{
   HOME,
   WORK
} 
```

是时候为客户类中的地址类型调用我们的枚举验证器了。

```
public class CustomerValidator : AbstractValidator<Customer>
{
    public CustomerValidator()
   {
     RuleFor(x => x.type).SetValidator(new EnumValidator<AddressType>("errormessage");
  }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-17T14:40:04.500

我发现这个[链接](http://www.cambiaresearch.com/c4/52a7e5fe-c7fc-49ab-b21d-37e6194687f3/Convert-Integer-To-Enum-Instance-in-csharp.aspx)很好地回答了它。它用：

```
(ENUMTYPE)Enum.ToObject(typeof(ENUMTYPE), INT) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-12T14:09:39.347

要验证一个值是否是枚举中的有效值，您只需要调用静态方法[Enum.IsDefined 即可](https://msdn.microsoft.com/en-us/library/system.enum.isdefined(v=vs.110).aspx)。

```
int value = 99;//Your int value
if (Enum.IsDefined(typeof(your_enum_type), value))
{
   //Todo when value is valid
}else{
   //Todo when value is not valid
} 
```

# php - 在php5中使用内联字符串与连接的速度差异？

> ID：13620
> 
> 赞同：56
> 
> 时间：2008-08-17T13:19:32.587
> 
> 标签：php, optimization, performance

（假设 php5）考虑

```
<?php

    $foo = 'some words';

    //case 1
    print "these are $foo";

    //case 2
    print "these are {$foo}";

    //case 3
    print 'these are ' . $foo;
?> 
```

1和2差别大吗？

如果不是，那么在 1/2 和 3 之间呢？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2009-01-27T02:53:53.920

至少从 2012 年 1 月开始，性能差异就变得[无关紧要了，而且可能更早：](http://nikic.github.com/2012/01/09/Disproving-the-Single-Quotes-Performance-Myth.html)

```
Single quotes: 0.061846971511841 seconds
Double quotes: 0.061599016189575 seconds 
```

PHP 的早期版本可能有所不同——我个人更喜欢单引号而不是双引号，所以这是一个方便的区别。文章的结论提出了一个很好的观点：

> 永远不要相信不是你自己伪造的统计数据。

（虽然文章引用了这句话，但最初的俏皮话很可能被错误地[归因](http://www.statistik.baden-wuerttemberg.de/Service/Veroeff/Monatshefte/20041111.mha)于温斯顿丘吉尔，由约瑟夫戈培尔的宣传部发明，将丘吉尔描绘成一个骗子：

> Ich traue keiner Statistik, die ich nicht selbst gefälscht habe。

这大致翻译为“我不相信我没有伪造自己的统计数据。”）

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2008-08-17T15:10:24.843

好吧，就像所有“现实生活中什么可能更快”的问题一样，你无法通过现实生活中的测试。

```
function timeFunc($function, $runs)
{
  $times = array();

  for ($i = 0; $i < $runs; $i++)
  {
    $time = microtime();
    call_user_func($function);
    $times[$i] = microtime() - $time;
  }

  return array_sum($times) / $runs;
}

function Method1()
{ 
  $foo = 'some words';
  for ($i = 0; $i < 10000; $i++)
    $t = "these are $foo";
}

function Method2()
{
  $foo = 'some words';
  for ($i = 0; $i < 10000; $i++)
    $t = "these are {$foo}";
}

function Method3()
 {
  $foo = 'some words';
  for ($i = 0; $i < 10000; $i++)
    $t = "these are " . $foo;
}

print timeFunc('Method1', 10) . "\n";
print timeFunc('Method2', 10) . "\n";
print timeFunc('Method3', 10) . "\n"; 
```

运行几次以将所有内容分页，然后...

0.0035568

0.0035388

0.0025394

因此，正如预期的那样，插值实际上是相同的（噪声水平差异，可能是由于插值引擎需要处理的额外字符）。直接串联大约是速度的 66%，这并没有太大的冲击。插值解析器会查找，发现无事可做，然后以简单的内部字符串 concat 结束。即使 concat 很昂贵，插值器仍然必须这样做，**毕竟**解析变量和修剪/复制原始字符串的工作。

**索姆纳特的更新：**

我将 Method4() 添加到上述实时逻辑中。

```
function Method4()
 {
  $foo = 'some words';
  for ($i = 0; $i < 10000; $i++)
    $t = 'these are ' . $foo;
}

print timeFunc('Method4', 10) . "\n";

Results were:

0.0014739
0.0015574
0.0011955
0.001169 
```

当您只声明一个字符串而无需解析该字符串时，为什么要混淆 PHP 调试器来解析。我希望你明白我的意思。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-01-27T04:08:03.113

实时基准：

[http://phpbench.com/](http://phpbench.com/)

使用单引号和双引号连接变量时，实际上存在细微差别。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2008-08-17T15:44:57.443

使用@Adam 的测试

```
"these are " . $foo 
```

请注意，以下内容甚至更快：

```
'these are ' . $foo; 
```

这是由于这样一个事实，即双引号“字符串”被评估，其中单引号“字符串”按原样...

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2008-08-19T13:12:17.407

不要太着迷于尝试优化 PHP 中的字符串操作。如果您的数据库查询写得不好或者您没有使用任何类型的缓存方案，则连接与插值是没有意义的（在现实世界的性能中）。以这样一种方式编写字符串操作，以便以后调试代码很容易，性能差异可以忽略不计。

@uberfuzzy 假设这只是一个关于语言细节的问题，我想这很好。我只是想补充一点，与实际性能下降（例如糟糕的数据库查询）相比，比较现实世界应用程序中单引号、双引号和heredoc 之间的性能毫无意义。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-06-19T18:27:54.517

执行时间的任何差异都可以忽略不计。

请参见

*   [NikiC 的博客：Disproving the Single Quotes Performance Myth](http://nikic.github.com/2012/01/09/Disproving-the-Single-Quotes-Performance-Myth.html)以技术解释插值和连接在 PHP 中的工作原理，以及为什么关心它们的速度毫无意义。

不要在这样的微优化上浪费时间。使用分析器来衡量您的应用程序在真实场景中的性能，然后在真正需要的地方进行优化。与在整个代码中应用微优化相比，优化单个草率的 DB 查询可能会带来更大的性能改进。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-09-16T21:25:50.950

连接变量时存在差异......以及您对结果所做的事情......如果您正在做的是将其转储到输出，是否正在输出缓冲。

另外，服务器的内存情况如何？通常，高级平台上的内存管理比低级平台上的更差......

```
$a = 'parse' . $this; 
```

正在用户代码平台级别管理内存...

```
$a = "parse $this"; 
```

正在php系统代码平台级别管理内存...

所以这些与 CPU 相关的基准测试并不能说明全部情况。

运行基准测试 1000 次与在尝试同时运行相同模拟 1000 次的服务器上运行基准测试 1000 次...根据应用程序的范围，您可能会得到截然不同的结果。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-01-27T03:22:48.493

我似乎记得论坛软件的开发者 Vanilla 用单引号替换了他代码中的所有双引号，并注意到性能有合理的提升。

不过，我目前似乎无法找到讨论的链接。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-10-12T10:01:43.920

如果您在双引号字符串语法中使用变量，只需添加其他内容：

```
$foo = "hello {$bar}"; 
```

比

```
$foo = "hello $bar"; 
```

这两个都比

```
$foo = 'hello' . $bar; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-27T04:36:01.700

双引号可能会慢得多。我从几个地方读到最好这样做

```
'parse me '.$i.' times' 
```

比

```
"parse me $i times" 
```

虽然我会说第二个给你更多可读的代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-05-27T22:10:33.607

几乎没有任何区别！查看时间： http: [//micro-optimization.com/single-vs-double-quotes](http://micro-optimization.com/single-vs-double-quotes)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-26T04:56:08.187

应该注意的是，当使用 Adam Wright 的示例的修改版本和 3 个变量时，结果是相反的，前两个函数实际上更快、更一致。这是 CLI 上的 PHP 7.1：

```
function timeFunc($function, $runs)
{
    $times = array();

    for ($i = 0; $i < $runs; $i++)
    {
        $time = microtime();
        call_user_func($function);
        @$times[$i] = microtime() - $time;
    }

    return array_sum($times) / $runs;
}

function Method1()
{ 
    $foo = 'some words';
    $bar = 'other words';
    $bas = 3;
    for ($i = 0; $i < 10000; $i++)
         $t = "these are $foo, $bar and $bas";
}

function Method2()
{
    $foo = 'some words';
    $bar = 'other words';
    $bas = 3;
    for ($i = 0; $i < 10000; $i++)
         $t = "these are {$foo}, {$bar} and {$bas}";
}

function Method3()
{
    $foo = 'some words';
    $bar = 'other words';
    $bas = 3;
    for ($i = 0; $i < 10000; $i++)
         $t = "these are " . $foo . ", " . $bar . " and " .$bas;
}

print timeFunc('Method1', 10) . "\n";
print timeFunc('Method2', 10) . "\n";
print timeFunc('Method3', 10) . "\n"; 
```

我也试过用 '3' 而不是整数 3，但我得到了同样的结果。

使用 $bas = 3：

```
0.0016254
0.0015719
0.0019806 
```

使用 $bas = '3'：

```
0.0016495
0.0015608
0.0022755 
```

应该注意的是，这些结果差异很大（我得到大约 300% 的变化），但平均值似乎相对稳定，几乎（10 个案例中有 9 个）总是显示前两种方法的执行速度更快，方法 2 总是略快于方法1。

总而言之：对于 1 个单一操作（无论是插值还是串联）正确的情况对于组合操作并不总是正确的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-07-19T22:08:43.527

是的，最初这是关于 PHP5，但几个月后 PHP8 出现了，今天在我的**PHP 7.4.5**上测试的最佳选择是使用[PHP - Nowdoc](https://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)（在 WIN 10 + Apache 和 CentOs 7 + Apache 上测试）：

```
function Method6(){
    $k1 = 'AAA';
    for($i = 0; $i < 10000; $i ++)$t = <<<'EOF'
K1= 
EOF
.$k1.
<<<'EOF'
K2=
EOF
.$k1;
    } 
```

这里是方法#5（使用**Heredoc**连接）：

```
function Method5(){
    $k1 = 'AAA';
    for($i = 0; $i < 10000; $i ++)$t = <<<EOF
K1= $k1
EOF
.<<<EOF
K2=$k1 
EOF;
    } 
```

方法1到4在这篇文章的开头

在我所有的测试中，“赢家”是方法#6（Newdoc），不是很容易阅读，但在 CPU 中速度非常快，并且曾经使用过`function timeFunc($function)`@Adam **Wright**的函数。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-01T08:03:44.710

我已经用以下测试用例测试了 php 7.4 和 php 5.4，这对我来说仍然有点困惑。

```
<?php
$start_time = microtime(true);
$result = "";
for ($i = 0; $i < 700000; $i++) {
    $result .= "THE STRING APPENDED IS " . $i;
    // AND $result .= 'THE STRING APPENDED IS ' . $i;
    // AND $result .= "THE STRING APPENDED IS $i";
}
echo $result;
$end_time = microtime(true);
echo "<br><br>";
echo ($end_time - $start_time) . " Seconds"; 
```

PHP 7.4 输出

```
 1\. "THE STRING APPENDED IS " . $i = 0.16744208335876
 2\. 'THE STRING APPENDED IS ' . $i = 0.16724419593811
 3\. "THE STRING APPENDED IS $i" = 0.16815495491028 
```

PHP 5.3 输出

```
 1\. "THE STRING APPENDED IS " . $i = 0.27664494514465
 2\. 'THE STRING APPENDED IS ' . $i = 0.27818703651428
 3\. "THE STRING APPENDED IS $i" = 0.28839707374573 
```

我已经测试了很多次，在 php 7.4 中，似乎所有 3 个测试用例都多次得到相同的结果，但串联在性能上仍然没有一点优势。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-07-15T09:56:04.250

根据@adam-wright 的回答，我想知道速度差异是否在没有连接/字符串中没有变量的情况下发生。

**== 我的问题...**

*   是`$array['key']`调用还是设置比`$array["key"]`！？
*   慢`$var = "some text";`于`$var = 'some text';`?

**==我**每次都使用新变量进行测试以避免使用相同的内存地址：

```
function getArrDblQuote() { 
    $start1 = microtime(true);
    $array1 = array("key" => "value");
    for ($i = 0; $i < 10000000; $i++)
        $t1 = $array1["key"];
    echo microtime(true) - $start1;
}
function getArrSplQuote() {
    $start2 = microtime(true);
    $array2 = array('key' => 'value');
    for ($j = 0; $j < 10000000; $j++)
        $t2 = $array2['key'];
    echo microtime(true) - $start2;
}

function setArrDblQuote() { 
    $start3 = microtime(true);
    for ($k = 0; $k < 10000000; $k++)
        $array3 = array("key" => "value");
    echo microtime(true) - $start3;
}
function setArrSplQuote() {
    $start4 = microtime(true);
    for ($l = 0; $l < 10000000; $l++)
        $array4 = array('key' => 'value');
    echo microtime(true) - $start4;
}

function setStrDblQuote() { 
    $start5 = microtime(true);
    for ($m = 0; $m < 10000000; $m++)
        $var1 = "value";
    echo microtime(true) - $start5;
}
function setStrSplQuote() {
    $start6 = microtime(true);
    for ($n = 0; $n < 10000000; $n++)
        $var2 = 'value';
    echo microtime(true) - $start6;
}

print getArrDblQuote() . "\n<br>";
print getArrSplQuote() . "\n<br>";
print setArrDblQuote() . "\n<br>";
print setArrSplQuote() . "\n<br>";
print setStrDblQuote() . "\n<br>";
print setStrSplQuote() . "\n<br>"; 
```

**== 我的结果：**

数组获取**双**引号**2.1978828907013**

数组获取**单**引号**2.0163490772247**

数组集**双**引号**1.9173440933228**

数组获取**单**引号**1.4982950687408**

var 设置**双**引号**1.485809803009**

var 设置**单**引号**1.3026781082153**

**==我的结论！**

所以，结果是差异不是很显着。但是，在一个大项目上，我认为它可以有所作为！

# c# - Is there an easy way to convert C# classes to PHP?

> ID：13647
> 
> 赞同：7
> 
> 时间：2008-08-17T14:16:50.833
> 
> 标签：c#, php

I am used to writing C# Windows applications. However, I have some free hosted PHP webspace that I would like to make use of. I have a basic understanding of PHP but have never used its object-oriented capabilities.

Is there an easy way to convert C# classes to PHP classes or is it just not possible to write a fully object-oriented application in PHP?

**Update:** There is no reliance on the .NET framework beyond the basics. The main aim would be to restructure the class properties, variable enums, etc. The PHP will be hosted on a Linux server.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-19T04:07:39.110

PHP doesn't support enums, which might be one area of mismatch.

Also, watch out for collection types, PHP despite it's OO features, tends to have no alternative to over-using the array datatype. Check out the sections on the PHP manual on iterators if you would like to see beyond this.

Public, protected, private, and static properties of classes all work roughly as expected.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-17T14:20:42.137

A huge problem would be to replicate the .Net Framework in PHP if the C# class usses it.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-17T15:05:51.170

It is entirely possible to write a PHP application almost entirely in an object-oriented methodology. You will have to write some procedural code to create and launch your first object but beyond that there are plenty of MVC frameworks for PHP that are all object-oriented. One that I would look at as an example is [Code Igniter](http://codeigniter.com) because it is a little lighter weight in my opinion.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-17T14:57:13.823

I don't know about a tool to automate the process but you could use the Reflexion API to browse your C# class and generate a corresponding PHP class.

Of course, the difficulty here is to correctly map C# types to PHP but with enough unit testing, you should be able to do what you want.

I advice you to go this way because I already did a C# to VB and C++ conversion. That was a pain but the result was worth it.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T05:55:19.380

If the problem is that you want to transition to PHP and you are happy to continue running on a windows server with .NET support you might consider wrapping your code using [swig](http://swig.sourceforge.net/).

This can be used to generated stubs to execute from php and you can then go about rewriting the .NET code into PHP in an incremental fashion.

This works for any of the supported languages. ie. you could incrementally rewrite an application in c++ to java if you really wanted to.

# .net - C# .NET 列出远程文件的内容

> ID：13655
> 
> 赞同：4
> 
> 时间：2008-08-17T14:48:00.350
> 
> 标签：.net

.NET 中是否可以像 URL 一样列出远程位置上的文件？System.IO 类的工作方式大致相同。我需要的只是远程服务器上图像的 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-17T14:52:09.513

**简短回答：**不，除非您对该网络服务器有更多控制权

**长答案：**这里有可能的解决方案......

1.  您将需要在本地执行并以您喜欢的格式输出此列表的服务器端脚本。

2.  大多数网络服务器都实现了默认的文件浏览页面，所以理论上你可以解析这些页面，但是这个解决方案非常脆弱，即使在同一网络服务器的不同版本之间也不是很便携。

3.  如果您有 FTP 访问权限...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-17T17:36:21.727

> .NET 中是否可以像 URL 一样列出远程位置上的文件？

您应该指定我们正在谈论的协议。

对于 HTTP，lubos hasko 给出了答案：不。HTTP 没有文件的概念；只属于资源。如果您可以控制 Web 服务器，则可以要求它提供目录列表，或者更好的是，您可以编写代码为您列出服务器端的目录。如果没有这样的控制，你必须*依靠*服务器提供一个列表，1）出于安全原因可能会被禁用，2）其格式是非标准化的，3）就像 lubos 说的那样，解析很脆弱（[“刮”](http://en.wikipedia.org/wiki/Web_scraping)）。

如果您的意思是/如果服务器提供了用于文件传输的协议，例如 FTP、SMB/CIFS 等，那会容易得多。例如，对于 FTP，您需要查看[WebRequestMethods.Ftp.ListDirectoryDe​​tails](http://msdn.microsoft.com/en-us/library/system.net.webrequestmethods.ftp.listdirectorydetails.aspx)。

# robotics - 文本与图形编程语言

> ID：13678
> 
> 赞同：33
> 
> 时间：2008-08-17T15:39:57.560
> 
> 标签：robotics, labview, graphical-language

我是一个高中机器人团队的一员，关于使用哪种语言对我们的机器人进行编程存在一些争论。我们在 C（或者可能是 C++）和 LabVIEW 之间进行选择。每种语言都有优点。

C(++):

*   被广泛使用的
*   为未来做好准备（大多数编程职位都需要基于文本的程序员。）
*   我们可以从去年开始扩展我们的 C 代码库
*   让我们更好地了解我们的机器人在做什么。

LabVIEW

*   更容易可视化程序流程（块和连线，而不是代码行）
*   更容易教（据说......）
*   “编程的未来是图形化的。” （也这样觉得？）
*   更接近一些新成员可能拥有的 Robolab 背景。
*   不需要亲密地知道发生了什么。只需告诉模块找到红球，不需要知道如何。

这对我们来说是一个非常艰难的决定，我们已经争论了一段时间。基于每种语言的这些优点，以及你所拥有的经验，**你认为更好的选择是什么？**请记住，我们不一定要追求纯粹的效率。我们也希望让我们的程序员为未来的编程做好准备。

还：

*   **您认为 LabVEIW 等图形语言是编程的未来吗？**
*   **图形语言比文本语言更容易学习吗？** 我认为他们应该同样具有学习挑战性。
*   鉴于我们部分植根于帮助人们学习，**我们应该在多大程度上依赖预先编写的模块，以及我们应该尝试自己编写多少？** （“优秀的程序员写出优秀的代码，优秀的程序员复制优秀的代码。”但首先成为一名优秀的程序员不值得吗？）

感谢您的建议！

* * *

编辑：我想更加强调这个问题：队长认为LabVIEW更好，因为它易于学习和教学。 **真的吗？** 我认为 C 可以很容易地教授，初学者级别的任务仍然可以使用 C。我真的很想听听您的意见。 **输入 while{} 是否比创建“while 框”更困难？** **程序逐行流动，仅由 ifs 和循环修改，这不是很直观，因为程序流过线路很直观，仅由 ifs 和循环修改！？**

再次感谢！

* * *

编辑：我刚刚意识到这属于“语言辩论”的主题。我希望它没问题，因为它是关于什么最适合特定的编程分支，有特定的目标。如果不是……对不起……

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-08-17T17:23:27.023

在我到达之前，我们的团队（博士科学家，几乎没有编程背景）已经尝试断断续续地实现一个 LabVIEW 应用程序将近一年。代码不整洁，太复杂（前端和后端），最重要的是，它不起作用。我是一个热心的程序员，但从未使用过 LabVIEW。在一位 LabVIEW 大师的帮助下，他可以帮助将我所知道的文本编程范例转化为 LabVIEW 概念，因此可以在一周内编写应用程序。这里的重点是*基本的编码概念仍然需要学习，语言，即使是像LabVIEW这样的语言，也只是表达它们的不同方式*。

LabVIEW 非常适合用于最初设计的用途。即从 DAQ 卡中获取数据并将其显示在屏幕上，可能需要在两者之间进行一些小的操作。然而，编程*算法*并不容易，我什至建议它更难。例如，在大多数程序语言中，执行顺序通常是逐行遵循的，使用伪数学符号（`y = x*x + x + 1`即在画布上。

此外，作为职业的编程不仅仅是了解编码的技术。能够有效地寻求帮助/搜索答案、编写可读代码和使用遗留代码都是关键技能，这在 LabVIEW 等图形语言中无疑更加困难。

我相信图形编程的某些方面可能会成为主流——子 VI 的使用完美体现了编程的“黑盒”原则，并且也用于其他语言抽象，如[Yahoo Pipes](http://pipes.yahoo.com/pipes/)和 Apple Automator——也许未来的一些图形语言将彻底改变我们的编程方式，但 LabVIEW 本身并不是语言设计的大规模范式转变，我们仍然有`while, for, if`流控制、类型转换、事件驱动编程，甚至对象。如果未来真的会用LabVIEW来编写，C++程序员跨界就不会有太大麻烦了。

作为附言，我会说 C/C++ 更适合机器人技术，因为学生在某些时候无疑必须处理嵌入式系统和 FPGA。低级编程知识（位、寄存器等）对于这类事情非常宝贵。

*@mendicant*实际上，LabVIEW 在工业中被大量使用，尤其是用于控制系统。尽管 NASA 不太可能将其用于机载卫星系统，但空间系统的软件开发是[完全不同的球类游戏](http://www.fastcompany.com/magazine/06/writestuff.html)......

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-17T19:44:21.653

我在我目前工作的研究小组中遇到过类似的情况。这是一个生物物理学小组，我们到处都在使用 LabVIEW 来控制我们的仪器。这绝对是伟大的：很容易组装一个 UI 来控制仪器的各个方面，查看它的状态并保存您的数据。

现在我不得不阻止自己写一篇 5 页的长篇大论，因为 LabVIEW 对我来说是一场噩梦。让我试着总结一些优点和缺点：

**免责声明**我不是 LabVIEW 专家，我可能会说一些有偏见、过时或完全错误的话 :)

## LabVIEW专家

*   是的，它**很容易学习**。我们小组中的许多博士似乎已经掌握了足够的技能，可以在几周甚至更短的时间内破解。
*   **图书馆**。这是一个重点。您必须根据自己的情况仔细调查（我不知道您需要什么，是否有适合它的 LabVIEW 库，或者是否有其他语言的替代方案）。就我而言，在 Python 中寻找一个好的、快速的图表库一直是一个主要问题，这阻止了我用 Python 重写我们的一些程序。
*   您的学校可能已经安装并运行了它。

## LabVIEW缺点

*   可能*太*容易学了。无论如何，似乎没有人真正费心去学习最佳实践，所以程序很快就变成了一个完整的、无法弥补的混乱。当然，如果你不小心的话，基于文本的语言也必然会发生这种情况，但在 IMO 中，在 LabVIEW 中做正确的事情要困难得多。
*   **在LabVIEW中寻找子VI**往往存在重大问题（我认为甚至高达8.2版）。LabVIEW有自己的方式知道在哪里可以找到库和子VI，这使得完全破坏您的软件变得非常容易。如果您周围没有知道如何处理此问题的人，这会使大型项目变得痛苦。
*   **让 LabVIEW 与版本控制一起工作是一件痛苦的事情**。当然可以，但无论如何我都会避免使用内置的 VC。查看[LVDiff](http://meta-diff.sourceforge.net/#lvdiff)以获得 LabVIEW 差异工具，但不要考虑合并。

（最后两点使在一个项目的团队中工作变得困难。这对你来说可能很重要）

*   这是个人的，但我发现许多算法在视觉编程时不起作用。**这是一团糟**。
    *   一个例子是严格顺序的东西。这很快就会变得很麻烦。
    *   很难对代码进行概览。
    *   如果您将子 VI 用于小任务（就像制作执行小任务且适合一个屏幕的函数一样，这是一种很好的做法），您不能只给它们命名，而是必须为每个函数绘制图标其中。这只会在几分钟内变得非常烦人和麻烦，所以你很想*不*把东西放在子 VI 中。这太麻烦了。顺便说一句：制作一个非常好的图标可能需要专业的时间。尝试为您编写的每个子 VI 制作一个独特、立即可理解、可识别的图标 :)
*   您将在一周内拥有腕管。保证。
*   @Brendan：听，听！

## 结束语

至于您的“我应该编写自己的模块”的问题：我不确定。取决于你的时间限制。如果没有必要，不要花时间重新发明轮子。花几天时间编写低级代码然后意识到你已经没有时间了，这太容易了。如果这意味着您选择 LabVIEW，那就去吧。

如果有简单的方法可以将 LabVIEW 和例如 C++ 结合起来，我很想听听：这可能会给您带来两全其美的效果，但我怀疑是否存在。

但请确保您和您的团队花时间学习最佳实践。看对方的代码。互相学习。编写可用的、可理解的代码。并且玩得开心！

请原谅我听起来前卫，也许有点迂腐。只是LabVIEW对我来说是一场*真正的*噩梦:)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-10-02T10:56:27.357

我认为是否选择 LabVIEW 取决于您是想学习用常用语言编程作为一种有市场的技能，还是只是想完成工作。LabVIEW 使您能够快速高效地完成工作。正如其他人所观察到的那样，它并不能神奇地让您不必了解自己在做什么，而且如果您不这样做，很可能会造成一团糟——尽管有趣的是，LabVIEW中糟糕的编码风格最糟糕的例子是通常是由具有文本语言经验并拒绝适应 LabVIEW 工作方式的人所为，因为他们“已经知道如何编程，该死！”

当然，这并不是说 LabVIEW 编程不是一种有市场的技能。只是它不像 C++ 那样面向大众市场。

LabVIEW使管理并行进行的不同事情变得非常容易，这在机器人控制情况下很可能会发生。应该是顺序的代码中的竞争条件也不应该是一个问题（即，如果它们是，你做错了）：有一些简单的技术可以确保事情在必要时以正确的顺序发生 - 使用链接子VI错误线或其他数据，使用通知器或队列，构建状态机结构，甚至在必要时使用LabVIEW的序列结构。同样，这只是花时间了解 LabVIEW 中可用的工具及其工作原理的一个例子。我不认为必须制作 subVI 图标的抱怨是很好的指导。您可以非常快速地创建一个包含几个文字的文字，可能带有背景颜色，

“图形语言是未来的方式吗”是基于错误二分法的红鲱鱼。有些东西非常适合图形语言（例如并行代码）；其他东西更适合文本语言。我不希望 LabVIEW 和图形化编程要么消失，要么接管世界。

*顺便说一句，如果 NASA不在*太空计划中使用 LabVIEW ，我会感到非常惊讶。最近有人在 Info-LabVIEW 邮件列表中描述了他们如何使用 LabVIEW 开发和测试波音 787 上由电动机驱动的飞行表面的闭环控制，并给人的印象是 LabVIEW 在飞机的开发中被广泛使用。[它还用于大型强子对撞机](http://sine.ni.com/cs/app/doc/p/id/cs-10795)中的实时控制！

除了 National Instruments 自己的网站和论坛之外，目前获取更多 LabVIEW 信息和帮助的最活跃的地方似乎是[LAVA](http://forums.lavag.org/home.html "岩浆")。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-17T15:55:24.627

这不会直接回答您的问题，但您可能需要考虑使用解释语言进行混合的第三种选择。例如，[Lua](http://www.lua.org/)[已经](http://luaforge.net/projects/lrt/) [用于](http://www.hougaard.com/robot/)机器人领域。它速度快、重量轻，并且可以配置为使用定点数而不是浮点数运行，因为大多数微控制器没有 FPU。[Forth](http://en.wikipedia.org/wiki/Forth_language)是另一种用法类似的替代方法。

用 C 语言编写一个薄的接口层应该很容易，然后让学生使用解释脚本来放松。您甚至可以将其设置为允许动态加载代码，而无需重新编译和刷新芯片。这应该会减少迭代周期，并让学生通过更快地看到结果来更好地学习。

我偏向**于**使用 LabVIEW 等可视化工具。我似乎总是碰到一些不能或不会像我想要的那样工作的东西。所以，我更喜欢通过文本代码获得的绝对控制。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-11-26T14:12:41.563

LabVIEW 的另一个优势（除了库）是**并发性**。它是一种[数据流语言](http://en.wikipedia.org/wiki/Dataflow_programming)，这意味着运行时可以为您处理并发。因此，如果您正在做一些高度并发的事情并且不想进行传统的同步，LabVIEW 可以帮助您。

未来并不像今天那样属于图形语言。它属于任何能够提出数据流表示（或另一种对并发友好的编程类型）的人，它与图形方法一样简单，但也可由程序员自己的工具解析。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-17T16:18:10.947

National Instruments 主持了一项关于该主题的已发表研究：

[用于 DSP 教学的图形与文本编程的研究](http://zone.ni.com/devzone/cda/tut/p/id/3798)

它专门研究了 LabVIEW 与 MATLAB（而不是 C）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-08-17T21:34:02.650

我认为与文本语言相比，图形语言的表达能力总是有限的。将尝试使用视觉符号（例如 REBUS 或手语）进行交流与使用文字进行交流进行比较。

对于简单的任务，使用图形语言通常更容易，但对于更复杂的逻辑，我发现图形语言会阻碍。

然而，这个论点中隐含的另一个争论是声明式编程与命令式编程。声明式通常更适合您确实不需要对如何完成某事进行细粒度控制的任何事情。您*可以*以声明性方式使用 C++，但您需要做更多的工作才能做到这一点，而 LABView 被设计为声明性语言。

一张图片值一千个字，但如果一张图片代表一千个你不需要的单词并且你无法改变它，那么在这种情况下，一张图片是毫无价值的。然而，您可以使用文字创建数千张图片，指定每个细节，甚至明确引导观众的焦点。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-11-26T03:38:00.423

LabVIEW 让您可以快速入门，并且（正如其他人已经说过的）拥有一个庞大的代码库，用于执行各种测试、测量和控制相关的事情。

然而，LabVIEW 最大的一个缺点是你失去了程序员为自己编写的所有工具。

您的代码存储为 VI。这些是不透明的二进制文件。这意味着您的代码真的不是您的，而是 LabVIEW 的。您无法编写自己的解析器，无法编写代码生成器，无法通过宏或脚本进行自动更改。

当您有一个 5000 VI 应用程序需要普遍应用一些小的调整时，这很**糟糕。**您**唯一**的选择是手动检查每个 VI，如果您错过某个角落某个 VI 的更改，天堂会帮助您。

是的，因为它是二进制的，所以你不能像使用文本语言那样做差异/合并/补丁。这确实使使用多个版本的代码成为可维护性的可怕噩梦。

如果您正在做一些简单的事情，或者需要原型，或者不打算维护您的代码，请务必使用 LabVIEW。

如果您想做真正的、可维护的编程，请使用文本语言。您可能会较慢开始，但从长远来看，您会更快。

（哦，如果您需要 DAQ 库，NI 也有 C++ 和 .Net 版本。）

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-10-02T00:39:35.850

我在这里的第一篇文章 :) 要温柔...

我来自汽车行业的嵌入式背景，现在我在国防工业。我可以根据经验告诉你，C/C++ 和 LabVIEW 是真正不同的野兽，有着不同的目的。C/C++ 一直用于微控制器上的嵌入式工作，因为它结构紧凑，编译器/工具很容易获得。另一方面，LabVIEW 用于驱动测试系统（与测试台一起作为定序器）。我们使用的大多数测试设备都来自 NI，因此 LabVIEW 提供了一个环境，我们拥有工作所需的工具和驱动程序，以及我们想要的支持......

就易于学习而言，有许多 C/C++ 资源和许多网站，这些资源在您免费获得的几乎所有内容上都列出了设计注意事项和示例算法。对于 LabVIEW，用户社区可能不像 C/C++ 那样多样化，检查和比较示例代码需要更多的努力（必须有正确版本的 LabVIEW 等）......我发现 LabVIEW 很容易选择起来学习，但是有些人在这里提到的与并行性和其他各种需要一些经验才能意识到它们有关的麻烦。

那么这一切之后的结论呢？我想说这两种语言都值得学习，因为它们确实代表了两种不同的编程风格，当然值得了解并精通这两种语言。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-22T00:47:38.400

天哪，答案太简单了。使用**LabView**。

我已经为嵌入式系统编程了 10 年，我可以说，如果没有至少几个月的基础设施（非常小心的基础设施！），您将不会像使用**LabView**的第一天那样高效。

如果您正在设计一个用于出售和用于军事的机器人，请继续并从 C 开始 - 这是一个很好的选择。

否则，请使用允许您在最短的时间内尝试最多品种的系统。那是**LabView**。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-08-22T01:05:55.220

我喜欢LabVIEW。我强烈推荐它，特别是如果其他人记得使用过类似的东西。普通程序员需要一段时间才能习惯它，但如果你已经知道如何编程，结果会好得多。

C/C++ 等于管理自己的内存。你会在记忆链接中游泳并担心它们。使用 LabVIEW 并确保您阅读了 LabVIEW 附带的文档并注意竞争条件。

学习一门语言很容易。学习如何编程不是。即使它是一种图形语言，这也不会改变。图形语言的优点是更容易看到代码将做什么，而不是坐在那里破译一堆文本。

重要的不是语言，而是编程概念。你学习用什么语言编程并不重要，因为只要稍加努力，你就应该能够用任何语言很好地编程。语言来来去去。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-11-26T14:51:50.830

免责声明：我没有见过 LabVIEW，但我使用过一些其他的图形语言，包括 WebMethods Flow 和 Modeller，大学里的动态仿真语言，呃，麻省理工学院的 Scratch :)。

我的经验是图形语言可以很好地完成编程的“管道”部分，但我积极使用的那些会妨碍算法。如果您的算法非常简单，那可能没问题。

另一方面，我认为 C++ 也不适合您的情况。与有用的工作相比，您将花费更多时间来跟踪指针和内存管理问题。

如果您的机器人可以使用脚本语言（Python、Ruby、Perl 等）进行控制，那么我认为这将是一个更好的选择。

然后是混合选项：

如果您的机器人没有脚本选项，并且您的团队中有一个 C++ 极客，那么请考虑让该极客编写绑定以将您的 C++ 库映射到脚本语言。这将使具有其他专业知识的人更容易对机器人进行编程。绑定将成为社区的好礼物。

如果 LabVIEW 允许，请使用其图形语言将用文本语言编写的模块组合在一起。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-08-17T15:59:08.287

我认为图形语言可能是未来的语言......对于所有那些特设的 MS Access 开发人员来说。纯文本编码人员总会有一席之地。

就个人而言，我不得不问，如果一切都为你完成，那么建造机器人的真正乐趣是什么？如果您只是将“找到红球”模块放在那里并看着它消失？你对自己的成就会有怎样的自豪感？就个人而言，我不会有太多。另外，它会教你什么编码，或者软件/硬件接口的（非常重要的）方面，这对机器人技术至关重要？

我不自称是该领域的专家，但问自己一件事：你认为 NASA 使用 LabVIEW 来编写火星漫游者的代码吗？你认为真正在机器人技术领域有名的人在使用 LabView 吗？

真的，如果你问我，使用 LabVIEW 之类的千篇一律的东西来构建它唯一能让你做好准备的就是成为一些后院机器人建造者，仅此而已。如果您想要一些能给您带来更多行业经验的东西，请构建您自己的“LabVIEW”类型的系统。构建您自己的“找球”模块，或您自己的“跟随路线”模块。这将更加困难，但也将更加酷。:D

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-15T16:28:05.317

你在高中。你有多少时间在这个程序上工作？你的小组有多少人？他们已经知道 C++ 或 LabView 了吗？

从你的问题中，我看到你知道 C++ 而大多数人都不知道。我还怀疑组长的洞察力足以注意到团队中的一些成员可能会被基于文本的编程语言吓倒。这是可以接受的，你在高中，这些人是*常态*。感觉普通高中生能比C++更直观的理解LabView。我猜大多数高中生，就像一般人一样，都害怕命令行。对你来说，差别要小得多，但对他们来说，这是白天和黑夜。

您是正确的，相同的概念可以像 C++ 一样应用于 LabView。每个都有其优点和缺点。关键是为工作选择正确的工具。LabView 就是*为这种应用*而设计的。C++ 更加通用，可以应用于许多其他类型的问题。

我将推荐 LabView。有了正确的硬件，您几乎可以开箱即用地启动并运行。你的团队可以花更多的时间*让机器人做你想做*的事，这才是本次活动的重点。

图形语言不是编程的未来；多年来，它们一直是为解决某些类型的问题而创建的可用选择之一。编程的未来是远离机器代码的层层抽象。将来，我们会想知道为什么我们一遍又一遍地浪费所有时间来编程“语义”。

**我们应该在多大程度上依赖预先编写的模块，以及我们应该尝试自己编写多少？** 你不应该浪费时间重新发明轮子。如果 Labview 中有可用的设备驱动程序，请使用它们。您可以通过复制功能相似的代码并根据您的需要对其进行定制来学习很多东西——您可以了解其他人如何解决类似问题，并且必须先解释他们的解决方案，然后才能将其正确应用于您的问题。如果你盲目地复制代码，让它工作的机会很小。即使您复制代码，您也必须做得很好。

祝你好运！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-16T19:16:18.603

我建议你使用 LabVIEW，因为你可以让机器人更快更容易地完成你想做的事情。LabVIEW 就是以这种思想设计的。OfCourse C(++) 是很棒的语言，但 LabVIEW 比其他任何语言都做得更好。人们可以在 LabVIEW 中编写非常好的软件，因为它提供了足够的范围和支持。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-10-24T20:23:35.233

在我的应用程序中使用 LabVIEW 时，我发现一件巨大的不利因素：组织设计的复杂性。作为一名物理学家，我发现 Labview 非常适合原型设计、仪器控制和数学分析。没有任何一种语言可以让您在 LabVIEW 中获得更快更好的结果。我从 1997 年开始使用 LabView。从 2005 年开始，我完全切换到 .NET 框架，因为它更易于设计和维护。

在 LabVIEW 中，必须绘制一个简单的“if”结构，并在图形设计中占用大量空间。我刚刚发现我们的许多商业应用程序都很难维护。应用程序越复杂，阅读起来就越困难。

我现在使用文本语言，我在维护一切方面都做得更好。如果您将 C++ 与 LabVIEW 进行比较，我会使用 LabVIEW，但与 C# 相比，它不会胜出

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-12-09T09:22:13.003

一如既往，这取决于。

我使用 LabVIEW 大约 20 年了，做过很多工作，从简单的 DAQ 到非常复杂的可视化，从设备控制到测试序列器。如果还不够好，我肯定会换的。也就是说，我开始用打孔卡编写 Fortran，并在 8 位“机器”上使用了大量编程语言，从基于 Z80 的机器开始。语言范围从 Assembler 到 BASIC，从 Turbo-Pascal 到 C。

LabVIEW 是一项重大改进，因为它具有广泛的数据采集和分析库。然而，人们必须学习另一种范式。你肯定需要一个轨迹球;-))

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-12-09T10:18:44.963

我对 LabView（或 C/C++）一无所知，但是..

> 您认为 LabVEIW 等图形语言是编程的未来吗？

不...

> 图形语言比文本语言更容易学习吗？我认为他们应该同样具有学习挑战性。

更容易学习？不，但它们*更*容易解释和理解。

要解释一种编程语言，您必须解释什么是变量（这非常困难）。这不是流程图/节点编码工具的问题，例如 LEGO Mindstroms 编程接口或 Quartz Composer。

例如，[这是一个相当复杂的 LEGO Mindstroms 程序](http://www.bufbotics.org/buf/mindstorms/roverbot/programming_screenshot.jpg)- 很容易理解其中的内容......但是如果你想让机器人运行`INCREASEJITTER`5 次积木，然后向前行驶 10 秒，然后尝试 INCREASEJITTER再次循环？事情很快开始变得混乱..

Quartz Composer 就是一个很好的例子，为什么我认为图形语言永远不会“成为未来”

它使真正酷的东西变得非常容易（3D 粒子效果，相机由网络摄像头像素的平均亮度控制）.. 但做简单的事情却非常困难，比如迭代 XML 文件中的元素，或存储将平均像素值写入文件。

> 鉴于我们部分植根于帮助人们学习，我们应该在多大程度上依赖预先编写的模块，以及我们应该尝试自己编写多少？（“优秀的程序员写出优秀的代码，优秀的程序员复制优秀的代码。”但首先成为一名优秀的程序员不值得吗？）

对于学习，解释和理解图形语言要容易得多。

也就是说，我会推荐一种专门的基于文本的语言作为进展。例如，对于像[Processing](http://processing.org/)或[NodeBox](http://nodebox.net)这样的图形。它们是“普通”语言（Processing 是 Java，NodeBox 是 Python），其中嵌入了非常专业、易于使用（但功能异常强大）的框架。

重要的是，它们是非常互动的语言，您不必为了在屏幕上显示一个圆圈而写数百行。您只需键入`oval(100, 200, 10, 10)`并按下运行按钮，它就会出现！这也使它们很容易演示和解释。

更多与机器人相关的东西，甚至像 LOGO 这样的东西都会是一个很好的介绍 - 你输入“FORWARD 1”，乌龟向前行驶一个盒子。输入“LEFT 90”，它会转动 90 度。这与现实非常简单。您可以想象每条指令将做什么，然后尝试并确认它确实以这种方式工作。

向他们展示看起来很闪亮的东西，他们会一路拾起他们从 C 中学到的有用的东西，如果他们有兴趣或进步到他们需要一种“真正的”语言，他们将拥有所有这些知识，而不是遇到语法错误并编译砖墙..

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-08-17T21:02:37.910

似乎如果你想让我们的团队为未来的编程做好准备，那么 C(++) 可能是更好的途径。使用可视化构建块构建的通用编程语言的承诺似乎从未实现，我开始怀疑它们是否会实现。似乎虽然它可以针对特定的问题域完成，但一旦您开始尝试解决许多一般性问题，基于文本的编程语言就很难被击败。

有一次，我有点接受了可执行 UML 的想法，但似乎一旦你超越了对象关系和一些流程流，UML 将是构建应用程序的一种非常糟糕的方式。想象一下试图将它全部连接到一个 GUI。我不介意被证明是错误的，但到目前为止，我们似乎不太可能很快进行点击式编程。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-08-19T16:31:17.987

大约 2 年前我开始使用 LabVIEW，现在一直在使用它，所以可能会有偏见，但发现它非常适合涉及数据采集和控制的应用程序。

我们使用 LabVIEW 主要用于进行连续测量和控制气阀和 ATE 外壳的测试。这涉及数字和模拟输入和输出以及信号分析例程和过程控制，所有这些都从 GUI 运行。通过将每个部分分解为子 VI，我们可以通过单击和拖动鼠标来重新配置测试。

与 C/C++ 不完全相同，但使用 Visual BASIC 进行的测量、控制和分析的类似实现似乎很复杂，并且很难通过比较来维护。

我认为编程过程比实际的编码语言更重要，你应该遵循图形编程语言的风格指南。LabVIEW 框图显示了数据流（[数据流编程](http://en.wikipedia.org/wiki/Dataflow_programming)），因此尽管我从未遇到任何问题，但应该很容易看到潜在的竞争条件。如果您有 C 代码库，则将其构建到 dll 中将允许 LabVIEW 直接调用它。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-17T07:07:59.297

这两种选择肯定都有优点。但是，由于您的领域是一种教育体验，我认为 C/C++ 解决方案最有利于学生。图形编程将始终是一种选择，但根本无法以优雅的方式提供功能，这使得它比文本编程更有效地用于低级编程。这不是一件坏事——抽象的全部意义在于允许对问题域有新的理解和看法。我相信很多人可能对图形编程感到失望的原因是，对于任何特定的程序，从 C 编程到图形编程的增量收益与从汇编到 C 的编程几乎不同。

图形编程知识肯定会使任何未来的程序员受益。将来可能会有机会只需要图形编程知识，也许您的一些学生可以从一些早期的经验中受益。另一方面，文本方法提供的基本编程概念的坚实基础将使您的**所有**学生受益，并且肯定是更好的答案。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-17T18:04:01.623

> 队长认为LabVIEW更易于学习和教学。真的吗？

我怀疑这对于任何单一语言或范式都是正确的。LabView 对于具有电子工程背景的人来说肯定会更容易；在其中制作程序是“简单地”拉线。再说一次，这些人也可能已经接触过编程。

除了图形之外，一个重要的区别是 LV 是基于需求的（流）编程。你从结果开始，然后告诉你需要什么来达到它。传统编程往往是命令式的（反之亦然）。

有些语言可以同时提供这两者。我最近为 Lua (Lanes) 制作了一个多线程库，它可用于在其他命令式环境中进行基于需求的编程。我知道有一些成功的机器人主要在 Lua 中运行（ Lua Oh Six 的[Crazy Ivan](http://www.youtube.com/watch?v=K4xAEP4jcVQ)）。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-12-09T09:30:06.590

你看过微软机器人工作室吗？ [http://msdn.microsoft.com/en-us/robotics/default.aspx](http://msdn.microsoft.com/en-us/robotics/default.aspx)

它允许可视化编程 (VPL)：http: [//msdn.microsoft.com/en-us/library/bb483047.aspx](http://msdn.microsoft.com/en-us/library/bb483047.aspx) 以及 C# 等现代语言。我鼓励你至少看看教程。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-08-24T18:36:49.183

我对 Labview（以及这方面的 Matlab）的抱怨是，如果您计划将代码嵌入 x86 以外的任何东西（并且 Labview 有将 Labview VI 放在 ARM 上的工具），那么您将不得不在这个问题上投入尽可能多的精力尽你所能，因为它效率低下。

Labview 是一个很棒的原型设计工具：有很多库，很容易将块串在一起，做高级算法可能有点困难，但可能有你想做的块。您可以快速完成功能。但是如果你认为你可以把那个 VI 放在一个设备上，那你就错了。例如，如果您在 Labview 中制作一个加法器块，您将有两个输入和一个输出。它的内存使用量是多少？三个变量值的数据？二？你知道在 C 或 C++ 中，因为你可以编写`z=x+y`or`x+=y`并且你确切地知道你的代码在做什么以及内存情况是什么。内存使用会迅速飙升，尤其是因为（正如其他人指出的）Labview 是高度并行的。因此，请准备好在问题上投入比您想象的更多的 RAM。以及更多的处理能力。

简而言之，Labview 非常适合快速原型制作，但在其他情况下您会失去太多控制。如果您正在处理大量数据或内存/处理能力有限，请使用基于文本的编程语言，这样您就可以控制发生的事情。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2013-09-14T12:35:53.937

人们总是将labview与C ++进行比较，“哦，labview是高级别的，它具有如此多的内置功能，尝试通过dfft获取数据并显示数据，在labview中很容易尝试在C ++中”。

误区 1：用 C++ 做任何事情都很难，因为它的级别太低了，而且 labview 已经实现了很多东西。问题是，如果您正在使用 C++ 开发机器人系统，则必须使用 opencv 、 pcl .. 等库，如果您使用专为构建机器人系统（如 ROS（机器人操作系统））而设计的软件框架，您会更加聪明。因此，您需要使用一整套工具。事实上，当您使用时，还有更多高级工具可用，ROS + python/c++ 以及诸如 opencv 和 pcl 之类的库。我使用过 labview 机器人技术，坦率地说，像 ICP 这样的常用算法不存在，它不像你现在可以轻松使用其他库。

误区二：图形编程语言更容易理解吗

这取决于实际情况。当您编写复杂的算法时，图形元素将占用宝贵的屏幕空间，并且很难理解该方法。要理解 labview 代码，您必须阅读从上到下阅读的代码复杂度为 O(n^2) 的区域。

如果你有并行系统怎么办。ROS 实现了基于使用回调实现的订阅者/发布者消息的基于图形的体系结构，并且很容易让多个程序运行和通信。将单独的并行组件分开可以更容易地进行调试。例如，单步执行并行 labview 代码是一场噩梦，因为控制流会从一个地方跳转到另一个地方。在 ROS 中，您没有像在 labview 中那样明确地“绘制出您的架构”，但是您仍然可以在运行命令 ros run rqt_graph 时看到它（这将显示所有连接的节点）

“编程的未来是图形化的。” （也这样觉得？）

我希望不会，labview 的当前实现不允许使用基于文本的方法和图形方法进行编码。（有 mathscript ，但是这非常慢）

它很难调试，因为你不能轻易隐藏并行性。

很难阅读 labview 代码，因为你必须查看这么多区域。

Labview 非常适合数据 aq 和信号处理，但不适用于实验机器人，因为缺少大多数高级组件，如 SLAM（同时定位和映射）、点云配准、点云处理等。即使他们确实添加了这些组件并且它们很容易像在 ROS 中那样集成，因为 labview 是专有的且价格昂贵，它们永远不会跟上开源社区的步伐。

总之，如果labview是机电一体化的未来，我正在改变我的投资银行职业道路......如果我不能享受我的工作，我不妨赚些钱并提前退休......

# php - php Zend / MVC 没有 mod_rewrite

> ID：13698
> 
> 赞同：2
> 
> 时间：2008-08-17T16:06:03.827
> 
> 标签：php, model-view-controller, zend-framework

我在网络上的许多博客中都看到过它，但我认为应该在这里讨论它。当我们在 PHP 中有一个 MVC 框架（我对 ZEND 感兴趣）但我们的主机不提供 mod_rewrite 时，我们该怎么办？有没有“捷径”？我们可以以任何方式转移控制权（以便在页面之间发生映射）吗？有任何想法吗？谢谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-17T18:00:47.387

Zend 框架应该在没有`mod_rewrite`. 如果您可以忍受您的 URL：s 看起来更像“/path/to/app/index.php/controller/action”。如果您有 mod_rewrite，您可以取消“index.php”位，但它也应该可以使用。

只需设置路由以接受 index.php 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-31T15:58:47.513

好的，我的判断 :-)：我已经成功使用了没有 mod_rewrite 的 zend，就像你们所说的 site/index.php/controller/action。在发这个之前我就知道了。我还在网上发现了一种将 404 页面“推送”到 index.php 的技术，因此什么不是资源（例如 CSS、图像等）可以到达那里，但有一个例外：POST 值。所以我决定下次必须在特定服务器上创建应用程序时，礼貌地请求 mod_rewrite。如果管理员无法提供，请与我的老板交谈，或者如果是我，请切换供应商。一般来说，有时 PHP 市场如此分散（php4、php5、php6、mod_rewrite、mod_auth、mod_whatever）令人遗憾，但这是另一回事了……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-17T17:18:12.293

mod_rewrite 在当今的托管环境中几乎是必不可少的。但不幸的是，并不是每个人都明白这一点。

当 mod_rewrite 不可用时，许多大型 php 程序（我在想 magento，但大多数可以应付）都有一个漂亮的 url 后备模式。

URL 最终看起来像 www.site.com/index.php?load-this-page

他们必须运行一些魔法来从 $_GET 变量中获取变量名，并将其用作要执行的模块/功能的选择器。

在相关说明中，我在使用 #. 所以链接看起来像 www.new.facebook.com/home.php#/inbox/ 显然我们不应该看到它，但它表明它们可能正在解析 $_SERVER['REQUEST_URI'] 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-17T18:07:22.927

如果您可以找到一种非 mod_rewrite 方式将所有请求重定向到 index.php（或您的 init 脚本所在的任何位置），则可以如上所述，使用“REQUEST_URI”获取域之后的地址部分，然后解析随心所欲，并使请求做你想做的事。这就是 Wordpress 的做法（当然，使用 mod_rewrite）。只要您可以将请求重定向到您的索引页面，同时保留相同的 URI，您就可以做您需要做的事情来处理请求。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2008-11-05T23:44:07.447

Drupal 的重写规则翻译

[http://example.com/path/goes/这里](http://example.com/path/goes/here)

进入

[http://example.com/index.php?q=path/goes/here](http://example.com/index.php?q=path/goes/here)

...并且具有决定生成哪种 URL 的逻辑。如果您可以忍受丑陋的 URL，这将使您保持单个前端控制器的所有逻辑不变，而无需依赖 URL 重写。

# .net - 从 ASP.NET WebForms 迁移到 ASP.NET MVC 的建议？

> ID：13704
> 
> 赞同：5
> 
> 时间：2008-08-17T16:18:54.097
> 
> 标签：.net, asp.net, asp.net-mvc, webforms

ASP.NET MVC 已经在这个论坛上[讨论](https://stackoverflow.com/questions/tagged/mvc)过几次。我即将对几个网站从经典的 ASP/ASP.NET WebForms 到 ASP.NET MVC 进行大规模**迁移**，并且想知道在这两种技术方面有经验的人有什么建议。

我所拥有的：一个典型的 ASP.NET 应用程序，具有高度耦合的表示/业务逻辑，各种杂乱无章的 ASP.NET 生成的 Javascript 杂乱无章，等等。

我想要什么：清理 ASP.NET MVC 生成的不可知标记。'纳夫说。

有什么需要注意的提示、提示、技巧或陷阱吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-17T16:25:40.573

哇，我不确定我们是否在这里谈论迁移 - 不同之处更像是重写！

* * *

正如其他人所说，MVC 是一种构建 Web 应用程序的全新方式——您的大部分演示代码都不会被继承。

但是，如果您在 MVC 中重写，那么您已经拥有的是一个好的原型。您的问题很可能是很难一点一点地做——例如 MVC 使用开箱即用的 URL 重命名，使得来回链接相当混乱。

另一个问题是为什么？我们中的许多人都有庞大的遗留应用程序，我们希望采用最新技术，但如果您的应用程序已经在工作，为什么要切换？

如果我现在正在研究一个新的应用程序，MVC 将是一个非常强大的候选者，但没有足够大的收益在项目后期切换到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-17T17:01:50.593

> 有什么需要注意的提示、提示、技巧或陷阱吗？

好吧，我认为你可能离思考技巧和陷阱还有一点距离:) 我相信你知道，ASP.NET MVC 不是 ASP.NET 的某个新版本，而是完全不同的范式ASP.NET，您不会迁移，您将启动全新的开发工作来替换现有系统。因此，也许您可​​以帮助确定应用程序的需求，但其余的可能会从头开始重新构建。

根据您在现有代码库中描述的（非常常见的）问题，您应该考虑借此机会学习一些当前设计松散耦合系统的最佳实践。这很容易做到，因为现代“最佳实践”易于理解和实践，并且有巨大的社区支持和高质量的开源工具在此过程中提供帮助。

我们此时也在将 ASP/ASP.NET 应用程序迁移到 ASP.NET MVC，无论如何，这是我的预备研究得出的结论。

[这是一篇关于使用 ASP.NET MVC 的链接的帖子](http://www.thefreakparade.com/2008/07/to-aspnetmvc-or-not-to-mvc-or-aspnet-mvc-hyperlink-acupuncture/)，但我将从[阅读这篇文章](http://www.thefreakparade.com/2008/07/so-you-want-to-learn-nhibernate-part-12-prerequisites-or-nhibernate-marijuananet/)开始。这篇文章表面上是关于 NHibernate（一个 ORM 工具）的，但讨论和链接是关于打好基础的，是准备将 ASP.NET 站点移植到 MVC 的结果。该帖子中链接的一些参考架构基于 ASP.NET MVC。[这是关于 NHibernate 的另一篇文章](http://www.thefreakparade.com/2008/07/so-you-want-to-learn-nhibernate-part-1-of-1-the-links/)，但在“最佳实践和参考应用程序”部分列出的大多数（如果不是全部）参考应用程序也是 ASP.NET MVC 应用程序。参考体系结构对于快速了解如何设计最佳、可维护的 ASP.NET MVC 站点非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-28T03:07:46.500

WebForms 可以在同一个应用程序中与 MVC 控制器一起使用。默认情况下，路由不会路由对磁盘上存在的文件的请求。因此，您可以开始一次重写站点的一小部分以使用 MVC 模式，而将其余部分使用 WebForms。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-17T16:49:18.980

我的观点是，这两种技术是如此不同，以至于如果您在原始 Web 窗体应用程序中有紧密耦合的代码，那么最好的方法是首先选择其中一种，然后通过创建一个新的 ASP.NET MVC 应用程序并删除它来转换它代码到各自的层。这将使您走上移植其他应用程序的重用之路。

# wordpress - 关于 wordpress 主题开发的资源

> ID：13708
> 
> 赞同：13
> 
> 时间：2008-08-17T16:35:15.920
> 
> 标签：wordpress, themes

WordPress 主题开发的最佳资源是什么？我目前正处于创建自己的博客的阶段，并且不想使用众多免费主题之一。我的网站已经有了一个主题，所以我想了解最佳实践。

任何关于如何开始的建议都非常受欢迎:)

* * *

我现在已经创建了我的主题（哇哦！），并认为我应该总结我找到的最佳资源。让我们来看看..

**资源：**

*   [ThemeTation 从头开始​​创建 wordpress 主题的三部分指南](http://themetation.com/2008/07/14/how-to-create-wordpress-themes-from-scratch-part-1/)
*   [Nettuts.com 的指南：如何从头开始创建 Wordpress 主题 并](https://code.tutsplus.com/articles/how-to-create-a-wordpress-theme-from-scratch--net-706)
    没有真正使用它，这是一篇相当新的文章，但无论如何 - 它很棒。这几天也会有后续的。。
*   [Wordpress.org 自己的模板指南](http://codex.wordpress.org/Theme_Development)
    绝对是每个 wordpress 设计新手的必读之物。
*   [《循环》](http://codex.wordpress.org/The_Loop)
    必备知识，也是必读
*   wordpress 用于实际输出博客内容[的所有模板标签的目录。](http://codex.wordpress.org/Template_Tags)

**灵感：**

*   Smashing Magazine 的名单：[第一个](http://www.smashingmagazine.com/2008/01/08/100-excellent-free-high-quality-wordpress-themes/)，[一个](http://www.smashingmagazine.com/2007/02/09/83-beautiful-wordpress-themes-you-probably-havent-seen/)，[另一个](http://www.smashingmagazine.com/2008/08/25/30-free-high-quality-wordpress-themes/)
*   [Wordpress.org 的主题目录](http://wordpress.org/extend/themes/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-17T16:55:33.820

我认为最好的学习方法是看看其他人如何构建他们的主题。第一个开始的是标准 WordPress 安装中包含的默认 Kubrick 主题。它具有所有基础知识，并将向您展示一些高级技术，例如包括侧边栏小部件。接下来，结合[主题开发](http://codex.wordpress.org/Theme_Development)（Mark 之前提到的）、[Blog Design and Layout](http://codex.wordpress.org/Blog_Design_and_Layout)和[Using Themes](http://codex.wordpress.org/Using_Themes)的文档，进入 Wordpress.org 网站上的[主题目录](http://wordpress.org/extend/themes/)，下载几个流行的主题，然后浏览它们，查看向上任何[模板标签](http://codex.wordpress.org/Stepping_Into_Template_Tags)或者你不懂的技术。完成此操作后，您应该能够从头开始编写自己的主题，或根据需要修改现有主题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-17T16:46:44.337

Wordpress 部分很简单。这基本上是将您的静态 HTML 页面转换为 PHP 并插入 Wordpress 标签以从数据库中提取内容。在某些地方，这些标签将处于循环中，例如页面列表。

最困难的部分是设计。您应该确定您想要的页面类型（例如主页、帖子列表、静态页面、关于）并使用模型文本创建实际模板。只有当您感到高兴时，您才应该考虑 Wordpress 部分。

如果您使用 Google 搜索，您会发现很多关于创建自己的 Wordpress 主题或将 HTML 转换为主题的页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-17T17:21:56.483

[这是关于该主题的另一篇好文章](http://lorelle.wordpress.com/2005/09/28/designing-a-wordpress-theme-from-scratch/)。当然，[还有更多类似的](http://www.google.com/search?q=designing+wordpress+theme)。不过，我过去曾查看过这篇特定的文章，发现它是一个很好的详细教程，在需要的地方还提供了一些不错的外部参考资料。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-07-30T19:57:41.963

[codex.wordpress.org](http://codex.wordpress.org)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-17T16:42:28.527

[这是关于主题开发](http://codex.wordpress.org/Theme_Development)的 WordPress 文档

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-01-14T10:23:50.233

我发现 Yoast 分享的这张插图对于解释 Wordpress 主题的构建方式非常有帮助：

[完整图片在这里![Yoast 图像的裁剪版本](../Images/331b05e5653c9da4d1a2da6a1897c41b.png)](http://yoast.com/wordpress-theme-anatomy/)

这是完整图像的裁剪 - 我建议[在那里查看整页](http://yoast.com/wordpress-theme-anatomy/)，因为它非常清晰，并且经过深思熟虑。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-26T09:53:01.127

在这里找到了一个新的。如果您想制作一个简单的主题，这是一个很好的资源。:)

[http://www.webhostingsearch.com/articles/create-your-own-wordpress-theme-tutorial.php](http://www.webhostingsearch.com/articles/create-your-own-wordpress-theme-tutorial.php)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-07-31T06:27:30.747

检查 css-tricks.com Chris 有一些截屏视频。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-08-03T08:25:05.613

有一本关于 WordPress 主题设计的非常好的书，称为“WordPress 主题设计”:) 可从[亚马逊](http://amzn.com/1847193099)和其他书店购买。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-02-12T22:31:43.543

“Starkers”是一个很棒的空白 WordPress 主题，可以开始任何主题开发。

[http://elliotjaystocks.com/blog/2008/free-starkers-wordpress-theme/](http://elliotjaystocks.com/blog/2008/free-starkers-wordpress-theme/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-06-27T15:30:14.970

这个[WordPress Meta Box PHP Helper 类](http://farinspace.com/wpalchemy-metabox/)可能会在您使用 WordPress Meta Boxes 时为您提供帮助。

# asp.net - 如何在asp.net中安排批处理

> ID：13718
> 
> 赞同：2
> 
> 时间：2008-08-17T16:54:57.190
> 
> 标签：asp.net

我想在 asp.net 页面中运行每周批处理。怎么可能呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-17T17:15:30.537

> 该解决方案是否有任何已知的缺点？

[这是 Jeff Atwood 讨论这种方法的博客文章](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)。与 Jeff 的大多数帖子一样，评论中的内容是大量固执己见的人对优缺点进行了极其详细的讨论，因此这是回答您问题的特定部分的理想场所。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-17T16:56:26.313

考虑使用[Cache](http://www.codeproject.com/KB/aspnet/ASPNETService.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-21T18:38:30.013

开发一个 Windows 服务并安排它每周运行一次。

# objective-c - 在 Cocoa 中你更喜欢 NSInteger 还是 int，为什么？

> ID：13725
> 
> 赞同：48
> 
> 时间：2008-08-17T17:01:45.150
> 
> 标签：objective-c, cocoa, types

`NSInteger`/`NSUInteger`是 Cocoa 定义的常规内置类型的替代品。

使用 NS* 类型而不是内置函数有什么好处吗？你更喜欢哪个？为什么？32 位/64 位平台上的宽度`NSInteger`是否相同？`int`

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-08-17T17:20:31.803

我理解它的方式是 NSInteger 等人。是相应 C 类型的体系结构安全版本。基本上，它们的大小因架构而异，但例如，NSInteger 可以保证为当前架构保存任何有效指针。

Apple 建议您将这些用于 OS X 10.5 及更高版本，Apple 的 API:s 将使用它们，因此养成使用它们的习惯绝对是个好主意。它们需要更多的输入，但除此之外，似乎没有任何理由不使用它们。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2008-10-13T23:48:46.133

## 64 位运行时的量化问题

在某些情况下，可能有充分的理由使用标准类型而不是`NSInteger`：64 位系统中的“意外”内存膨胀。

显然，如果整数是 8 而不是 4 字节，则值占用的内存量会加倍。但是，鉴于并非每个值都是整数，您通常不应期望应用程序的内存占用量翻倍。但是，Mac OS X 分配内存的方式会根据请求的内存量而变化。

目前，如果您要求 512 字节或更少，`malloc`则向上舍入到 16 字节的下一个倍数。但是，如果您要求超过 512 个字节，则`malloc`向上舍入到 512 的下一个倍数（至少 1024 个字节）。假设您定义了一个类——其中包括——声明了五个`NSInteger`实例变量，并且在 32 位系统上，每个实例占用例如 272 个字节。在 64 位系统上，实例理论上需要 544 个字节。但是，由于内存分配策略，每个实际上将占用 1024 字节（几乎增加了四倍）。如果您使用大量这些对象，您的应用程序的内存占用量可能会比您预期的要大得多。如果您用`NSInteger`变量替换`sint_32`变量，您将只使用 512 个字节。

因此，当您选择要使用的标量时，请确保选择合理的值。是否有任何理由需要一个大于 32 位应用程序所需的值？不太可能需要使用 64 位整数来计算秒数……

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-08-17T17:09:21.343

64 位实际上是 NSInteger 和 NSUInteger 存在的理由；在 10.5 之前，那些不存在。两者在 64 位中被简单地定义为 long，在 32 位中被定义为 int：

```
#if __LP64__ || NS_BUILD_32_LIKE_64
typedef long NSInteger;
typedef unsigned long NSUInteger;
#else
typedef int NSInteger;
typedef unsigned int NSUInteger;
#endif 
```

因此，当您想要“位原生”大小时，可以使用它们代替更基本的 C 类型。

[CocoaDev 有更多信息。](http://web.archive.org/web/20120206001941/http://www.cocoadev.com/index.pl?NSUInteger)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-17T17:58:56.970

我更喜欢标准的 c 风格声明，但这只是因为我在几种语言之间切换，我不必考虑太多，但听起来我应该开始看 nsinteger

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T03:36:19.607

为了将数据导入和导出到文件或通过网络，我使用**UInt32**、**SInt64**等...

无论架构如何，它们都保证具有一定的大小，并有助于将代码移植到也共享这些类型的其他平台和语言。

# c# - C# 和 VB.net 的区别

> ID：13731
> 
> 赞同：3
> 
> 时间：2008-08-17T17:09:25.337
> 
> 标签：c#, vb.net

> **可能重复：**
> [C# 和 VB.NET 之间最重要的功能差异是什么？](https://stackoverflow.com/questions/11632/what-are-the-most-important-functional-differences-between-c-and-vb-net)

除了语法，C# 和 vb.net 之间的主要区别是什么？

# svn - Resharper 和 TortoiseSVN

> ID：13745
> 
> 赞同：13
> 
> 时间：2008-08-17T17:22:26.590
> 
> 标签：svn, tortoisesvn, resharper, visualsvn, ankhsvn

当文件受源代码控制并且 TortoiseSVN 是客户端时，有什么好的方法可以处理 Resharper 的类重命名重构。我现在正在尝试 VisualSVN，但我最近不需要重命名任何东西。我不想更改我们的存储库只是为了尝试一下。

也不确定仅此功能是否值得 VisualSVN 的成本。

**更新：**我已经卸载了 VisualSVN 的试用版并尝试了 AhknSVN。到目前为止，我似乎提供了相同的功能。

我知道这听起来微不足道，但指标似乎缺乏一些功能，似乎它们并没有涓涓细流。（如果项目中的文件不同，我认为项目指示器也会指示这一点。）我倾向于尽可能多地滚动项目，因此除非项目扩展，否则很难判断哪些文件已更改。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-17T17:35:59.167

TortoiseSVN 1.5 在签入窗口中有一个简洁的隐藏功能：

选择一个丢失的文件和一个新文件并右键单击。选项之一将是“修复移动”。

我倾向于重构，然后使用它来修复名称已更改的任何文件。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-19T04:04:14.470

你真的应该检查[AnkhSVN](http://ankhsvn.open.collab.net/)的 Free as in Beer 选项。他们在 v2.x 中进行了一些重大改进，在 Visual Studio 中进行 ReSharper 重构忍者移动时，我不再感到受到惩罚。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-19T03:53:24.180

我发现 VisualSVN 物有所值。有办法用 Tortoise 做到这一点，但 VisualSVN 的集成非常好。我之前尝试过像 Ankh 这样的 VS 集成工具，但并没有留下深刻的印象。V-SVN 确实提高了 IDE 与存储库的交互级别。

TortoiseSVN 中修复移动的快速技巧听起来也不错，我需要尝试一下。

另一个好处：自从我获得 Visual SVN 以来，我还没有“忘记”向存储库添加文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-08-17T17:24:54.433

是时候分支你的存储库了。这就是版本控制的好处，你可以创建新的分支而不用汇总旧的分支。

# intellij-idea - 如何在 IntelliJ 中永久启用行号？

> ID：13751
> 
> 赞同：1378
> 
> 时间：2008-08-17T17:31:38.380
> 
> 标签：intellij-idea

如何在 IntelliJ IDEA 中永久启用行号？

* * *

## 回答 #1

> 赞同：1405
> 
> 时间：2009-05-26T18:46:03.617

## IntelliJ 14.X 以上

从 14.0 版本开始，设置对话框的路径略有不同，在**Editor**和**Appearance**之间添加了**General**子菜单，如下所示

 ****![在此处输入图像描述](../Images/f984d81ec31ecb5a346e5e5f74770578.png)

## IntelliJ 8.1.2 - 13.X

从 IntelliJ 8.1.2 开始，此选项位于**File | 设置**¹。在该对话框的**IDE Settings**部分中，您可以在**Editor |下找到它。外貌。**

1.  在 Mac 上，这些被命名为**IntelliJ IDEA | 喜好...**

![在此处输入图像描述](../Images/f72a596ef769a356bfc2b63de91cad37.png)

* * *

## 回答 #2

> 赞同：377
> 
> 时间：2015-04-14T07:07:00.627

这个问题显然已经得到很好的回答，但是从 IJ 13 开始，您可以在 2 秒内启用行号：

1.  按`shift`两次
2.  输入“行号”
3.  该选项显示在菜单中，然后按`enter`启用/禁用。

![在此处输入图像描述](../Images/b7db5975636d0fbf9f1f812d897bb511.png)

等等瞧;)

* * *

## 回答 #3

> 赞同：109
> 
> 时间：2011-11-25T08:54:12.380

不是解决方案，而是仅适用于当前编辑器和当前会话的**临时解决方案：**

只需**右键单击**行号所在的位置，您就会看到一个小菜单。

然后，标记“显示行号”选项。

![在此处输入图像描述](../Images/a08a8d158baa89386adab36018f8e636.png)

请注意，这仅适用于每个文件。享受。

* * *

## 回答 #4

> 赞同：94
> 
> 时间：2013-10-10T19:21:11.350

在 Intellij 13 中，布局发生了变化，设置按钮只能在文件 -> 设置中找到，而不是在工具栏中，从那里你可以按照相同的步骤：编辑器 -> 外观 -> 显示行号，或搜索行号在设置搜索输入中。![Intellij 设置搜索行号](../Images/765b5dca9d7a5135a2ee38019c0820f6.png)

* * *

## 回答 #5

> 赞同：76
> 
> 时间：2015-09-19T10:50:16.993

# **Android Studio 1.3.2 及更高版本，IntelliJ 15 及更高版本**

**全局配置**

文件 -> 设置 -> 编辑器 -> 常规 -> 外观 -> 显示行号

[![在此处输入图像描述](../Images/f4a1bfefcb6e242ee2cee4c44a324014.png)](https://i.stack.imgur.com/VeB78.png)

* * *

**当前编辑器配置**

*第一种方式：*查看 -> 活动编辑器 -> 显示行号（此选项仅在您之前单击活动编辑器的文件时可用）

*第二种方法：*右键单击项目结构和活动编辑器（即可以设置断点的那个）之间的小区域 -> 显示行号。 [![在此处输入图像描述](../Images/b45e60fc69edf5430aa614a4873815d5.png)](https://i.stack.imgur.com/YGkgw.gif)

* * *

## 回答 #6

> 赞同：54
> 
> 时间：2011-12-28T10:09:57.733

**对于 InteliJ IDEA 11.0 及更高版本**
转到**文件**-->**设置**窗口**编辑器**中的设置-->**外观**
并勾选显示行号复选框。

![在此处输入图像描述](../Images/1ce0cb166913124ef59132770db4eb30.png)

* * *

## 回答 #7

> 赞同：33
> 
> 时间：2014-11-20T05:44:43.857

IntelliJ 14（Ubuntu）：

请参阅：[how-do-i-turn-on-line-numbers-permanently-in-intellij-14](https://stackoverflow.com/questions/27032622/how-do-i-turn-on-line-numbers-permanently-in-intellij-14)

永久：

文件 > 设置 > 编辑器 > 常规 > 外观 > 显示行号

![编辑](../Images/df6dc2d5167c1bf2d4387068d6dda9e6.png)

对于当前编辑：

视图 > 活动编辑器 > 显示行号

![菜单](../Images/c41fbb7502b2fee27b75508c6bde4b17.png)

* * *

## 回答 #8

> 赞同：31
> 
> 时间：2016-01-10T23:33:42.767

## IntelliJ IDEA 15

### 5 种方法

* * *

### 全球变化

1.  文件 > 设置... > 编辑器 > 常规 > 外观 > 显示行号

    [![显示行号](../Images/15b45f8e9d8abf94d1d338782792592b.png)](https://i.stack.imgur.com/NvEi2.png)

2.  点击`Shift` **两次**>写“行号”>显示行号（有切换的那个）>将切换更改为ON

    [![换班](../Images/b1627313489b36f87b08a6b914f47930.png)](https://i.stack.imgur.com/T7U2L.png)

* * *

### 活动编辑器的更改

1.  右键单击左侧栏 > 显示行号

    [![右键点击](../Images/8bbd764c0ba0a4ef652f2061f38c0754.png)](https://i.stack.imgur.com/3wTbv.png)

2.  点击`Shift` **两次**>写“行”>显示行号（该行没有切换）

    [![换档线](../Images/bec89525b0ba7c150c888e20cc0ddf99.png)](https://i.stack.imgur.com/Kiyb7.png)

3.  `Ctrl`+ `Shift`+ `A`> 写“显示行” > 活动编辑器：显示行号 > 将切换切换到 ON

    [![Ctrl Shift A](../Images/105fc6e166508ea2b11722d08644b716.png)](https://i.stack.imgur.com/q1WeF.png)

* * *

## 回答 #9

> 赞同：23
> 
> 时间：2014-12-16T10:17:16.593

好的 intelliJ 14 Ultimate 使用 Mac 版本就是这样。

> IntelliJ Idea > 首选项 > 编辑器 > 常规 > 外观 > 显示行号

* * *

## 回答 #10

> 赞同：20
> 
> 时间：2013-08-07T18:05:11.700

在 MAC OSX 上的 IntelliJ 12 上，我很难找到它。由于某种原因，搜索不会给我指路。转到首选项，然后在 IDE 设置、编辑器、外观下选择“显示行号”

![在此处输入图像描述](../Images/2e725218a4c184c8d0e958f0602f0b4e.png)

* * *

## 回答 #11

> 赞同：15
> 
> 时间：2015-07-12T13:25:46.710

安卓工作室

转到**Android Studio** => **Preferences** => **Editor** => **General** => **Appearance** => 设置 Checked " **Show line numbers** "

![在此处输入图像描述](../Images/833ec7e0002f94e80cfb497cdeb70e05.png)

* * *

## 回答 #12

> 赞同：15
> 
> 时间：2016-01-07T06:52:48.207

我刚刚安装了 IdeaVim 插件，即使我设置`Show Line Numbers`了，它仍然会继续隐藏它们。

（值得打额头的）解决方案是：

```
:set nu 
```

* * *

## 回答 #13

> 赞同：14
> 
> 时间：2018-05-01T09:28:18.183

**我为IntelliJ IDEA 2018.2 - Ultimate**添加了此响应。

**使用菜单**

*IntelliJ Idea > 首选项 > 编辑器 > 常规 > 外观 > 显示行号*

[![在此处输入图像描述](../Images/d862bdc73d0e7f94f6f520934613c1bb.png)](https://i.stack.imgur.com/hrzEN.png)

**使用快捷方式 - 第一种方式**

对于 Windows：`Ctrl`+ `Shift`+`a`
对于 Mac：`Cmd`+ `shift`+`a`

[![在此处输入图像描述](../Images/1bbd5a13ef276f5b897c4b60863880b5.png)](https://i.stack.imgur.com/yExMF.png)

**使用快捷方式 - Seconde way**

触摸`Shift`两次

[![在此处输入图像描述](../Images/1a7b2af6b8311c26874e818cc0c6504e.png)](https://i.stack.imgur.com/lJpH2.png)

这三种方法自 Intellij 的最后 4 个版本以来就存在，我认为它们在很长一段时间内仍然有效。

* * *

## 回答 #14

> 赞同：13
> 
> 时间：2011-09-01T12:30:30.977

对于 9.0.4

文件 > 设置

在树视图组中

------------IDE 设置 ---------

单击编辑器 [+]

选择外观...它就在那里。

* * *

## 回答 #15

> 赞同：13
> 
> 时间：2015-02-23T05:19:34.473

**第一种方式：**转到查看 => 活动编辑器 => 显示行号

![在此处输入图像描述](../Images/a02fa0b14bc2a3ce6c54416686b91d97.png)

**第二种方式**转到 Android Studio => 首选项 => 编辑器 => 外观 => 设置选中“显示行号”

![在此处输入图像描述](../Images/4717c93fff0dabcc76c0c1781667439b.png)

![在此处输入图像描述](../Images/cbd4414e636578af470c0f146a7aa550.png)

* * *

## 回答 #16

> 赞同：10
> 
> 时间：2013-05-03T19:17:49.130

在 Mac Intellij 12.1.2 上没有文件设置：

“文件”左侧有一个应用程序名称菜单项和“首选项”菜单项：

![选择](../Images/82be5f434a2c94f77f0d607d693a6679.png)

其中是 Windows Intellij 显示的“设置”对话框。

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2014-12-08T07:48:05.053

在 IntelliJ 14 中，它再次移到了菜单下方。

现在我们有了它`Editor -> General -> Appearance`

![在此处输入图像描述](../Images/548f1e64aa64eda4945cbe147dd0182a.png)

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2016-02-10T08:54:35.750

只是Windows 上***Android Studio 1.5.1的更新：***

转到**文件**->**设置**->按照图片 [![在此处输入图像描述](../Images/edf61a479283a24eb5a185058894e71f.png)](https://i.stack.imgur.com/mXdJ7.jpg)

* * *

## 回答 #19

> 赞同：7
> 
> 时间：2016-05-17T16:05:38.063

上**`IntelliJ IDEA 2016.1.2`**

转到**设置>编辑器>常规>外观** ，然后检查显示行号选项

[![在此处输入图像描述](../Images/4d0d6411d555324427368649fd581830.png)](https://i.stack.imgur.com/gjMvm.png)

* * *

## 回答 #20

> 赞同：6
> 
> 时间：2019-09-24T16:47:14.397

IntelliJ 2019 社区版默认有行号。如果要显示或隐藏行号，请转到以下设置以更改外观。

转到→文件→设置→编辑器→常规→外观→[检查]显示行号

[![show_line_numbers](../Images/a8d6be09632b2140eba6c072256b14a7.png)](https://i.stack.imgur.com/1iZww.png)

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2020-04-24T08:51:53.777

对于 IntelliJ 20.1 或更高版本，在 Mac OSX 上：

**IntelliJ IDEA -> 编辑器 -> 常规 -> 外观 -> 显示行号**

**需要注意的一点：** 总是寻找`Editor`

[![在此处输入图像描述](../Images/4f2cbb19c49cfb54535bbbe916150ab5.png)](https://i.stack.imgur.com/nESrm.png)

对于快捷方式：

⌘ + ⇧ + A（命令 + shift + A）

类型[![在此处输入图像描述](../Images/1bc7eb8c9e54fd3d572ff20cecd5c183.png)](https://i.stack.imgur.com/G9ILU.png)

然后单击弹出窗口打开`Show line numbers`，您就可以开始了。****

# .net - 引用 System.DirectoryServices.ResultPropertyCollection

> ID：13753
> 
> 赞同：1
> 
> 时间：2008-08-17T17:33:54.727
> 
> 标签：.net, powershell, scripting, active-directory

我在这里遗漏了一些东西：

```
$objSearcher = New-Object System.DirectoryServices.DirectorySearcher  
$objSearcher.SearchRoot = New-Object System.DirectoryServices.DirectoryEntry  
$objSearcher.Filter = ("(objectclass=computer)")  
$computers = $objSearcher.findall() 
```

所以问题是为什么以下两个输出不同？

```
$computers | %{ 
"Server name in quotes $_.properties.name" 
"Server name not in quotes " + $_.properties.name 
}
PS> $computers[0] | %{"$_.properties.name"; $_.properties.name}
System.DirectoryServices.SearchResult.properties.name
GORILLA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-17T22:10:02.907

当您在字符串中包含 $_.properties.name 时，它​​会返回属性的类型名称。当一个变量包含在一个字符串中并且该字符串被求值时，它会对该变量引用的对象调用 ToString 方法（不包括之后指定的成员）。

在这种情况下， ToString 方法返回**类型 name**。您可以强制评估类似于 EBGreen 建议的变量和成员，但使用

```
"Server name in quotes $($_.properties.name)" 
```

在另一种情况下，**PowerShell**正在评估首先指定的变量和成员，然后将其添加到前一个字符串中。

你是对的，你正在取回一组属性。如果您通过管道将**$computer[0].properties**传递给 get-member，您可以直接从命令行探索对象模型。

重要的部分如下。

> 类型名称：System.DirectoryServices.ResultPropertyCollection
> 
> 名称 MemberType 定义
> 
> * * *
> 
> 值属性 System.Collections.ICollection 值 {get;}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-17T17:41:14.103

我相信这与PS在“”中插入信息的方式有关。试试这个：

"引号中的服务器名称 $($_.properties).name"

或者你甚至可能需要一组 $()。我现在不是可以测试它的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-17T19:37:45.070

关闭——下面的工作正常，但如果有人有更深入的解释，我会很感兴趣。

```
PS C:\> $computers[0] | %{ "$_.properties.name"; "$($_.properties.name)" }
System.DirectoryServices.SearchResult.properties.name
GORILLA 
```

所以看起来 $_.properties.name 并没有像我预期的那样受到尊重。如果我正确地可视化，那么 name 属性是多值的这一事实会导致它返回一个数组。哪个（我认为）可以解释为什么以下工作：

```
$computers[0] | %{ $_.properties.name[0]} 
```

如果“name”是一个字符串，它应该返回第一个字符，但是因为它是一个数组，它返回第一个字符串。

# javascript - 如何使用 JavaScript 删除 HTML 中的子节点？

> ID：13763
> 
> 赞同：78
> 
> 时间：2008-08-17T17:48:04.057
> 
> 标签：javascript, html, dom

有没有类似的功能`document.getElementById("FirstDiv").clear()`？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2008-08-18T15:16:16.437

要回答最初的问题 - 有多种方法可以做到这一点，但以下是最简单的。

如果您已经有了要删除的子节点的句柄，即您有一个 JavaScript 变量来保存对它的引用：

```
myChildNode.parentNode.removeChild(myChildNode); 
```

显然，如果您没有使用已经这样做的众多库之一，您可能需要创建一个函数来抽象它：

```
function removeElement(node) {
    node.parentNode.removeChild(node);
} 
```

* * *

编辑：正如其他人所提到的：如果您有任何事件处理程序连接到您要删除的节点，您将需要确保在对要删除的节点的最后一个引用超出范围之前断开这些处理程序，以免糟糕的实现JavaScript 解释器的内存泄漏。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2008-08-17T17:56:17.130

如果要清除 div 并删除所有子节点，可以输入：

```
var mydiv = document.getElementById('FirstDiv');
while(mydiv.firstChild) {
  mydiv.removeChild(mydiv.firstChild);
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-11-11T08:19:46.207

# 现代解决方案 -`child.remove()`

对于您的用例：

```
document.getElementById("FirstDiv").remove() 
```

这是 W3C 自 2015 年底以来推荐的，是**vanilla JS**。所有主流浏览器都支持它。

[Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove)

[支持的浏览器](https://caniuse.com/#feat=childnode-remove)- 96% 2020 年 5 月

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-17T18:03:46.133

您必须在删除节点之前删除您在节点上设置的所有事件处理程序，以避免 IE 中的内存泄漏

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-08-02T14:02:40.090

一个 jQuery 解决方案

**HTML**

```
<select id="foo">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
</select> 
```

**Javascript**

```
// remove child "option" element with a "value" attribute equal to "2"
$("#foo > option[value='2']").remove();

// remove all child "option" elements
$("#foo > option").remove(); 
```

参考：

[属性等于选择器 [name=value]](http://api.jquery.com/attribute-equals-selector/ "属性等于选择器 [name=value]")

> 选择具有与某个值完全相等的指定属性的元素。

[子选择器（“父>子”）](http://api.jquery.com/child-selector/)

> 选择“parent”指定的元素的“child”指定的所有直接子元素

[。消除（）](http://api.jquery.com/remove/)

> 与 .empty() 类似，.remove() 方法将元素从 DOM 中取出。当我们想要删除元素本身以及其中的所有内容时，我们使用 .remove() 。除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-10-13T06:40:31.487

使用以下代码：

```
//for Internet Explorer
document.getElementById("FirstDiv").removeNode(true);

//for other browsers
var fDiv = document.getElementById("FirstDiv");
fDiv.removeChild(fDiv.childNodes[0]); //first check on which node your required node exists, if it is on [0] use this, otherwise use where it exists. 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-22T11:51:43.060

```
 var p=document.getElementById('childId').parentNode;
    var c=document.getElementById('childId');
    p.removeChild(c);
    alert('Deleted'); 
```

p 是父节点，c 是子节点
parentNode 是包含父引用的 JavaScript 变量

易于理解

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-17T17:54:01.707

您应该能够使用节点的 .RemoveNode 方法或父节点的 .RemoveChild 方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-17T17:58:55.923

您可能应该使用 JavaScript 库来执行此类操作。

例如，MochiKit 有一个函数[removeElement](http://mochikit.com/doc/html/MochiKit/DOM.html#fn-removeelement)，而 jQuery 有[remove](http://docs.jquery.com/Manipulation/remove#expr)。

# openid - Open ID - 当您决定不喜欢现有的提供商时会发生什么？

> ID：13768
> 
> 赞同：17
> 
> 时间：2008-08-17T17:55:57.723
> 
> 标签：openid

所以我还不太相信 OpenID，原因如下：

我已经有一个 OpenID，因为我有一个 Blogger 帐户。[但是当我尝试在altdotnet](http://altdotnet.org)页面上表明自己的身份并收到以下消息时，我发现 Blogger 似乎是一个糟糕的提供者：

> **您必须使用指定有效电子邮件地址的 OpenID 角色。**

让我们忘记这个小错误的细节，假设我想换一个不同的提供者。所以我注册了一个不同的提供商并获得了一个新的、不同的 OpenID - 我将如何切换我现有的 StackOverflow 帐户以与我的新 OpenID 关联？

我知道如果我将自己的域设置为委托给提供商，这将很容易，因为我可以更改委托。假设我没有自己的域。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-17T20:59:10.850

理想情况下，Stack Overflow 将允许您更改 OpenID。

OTOH，理想情况下，您应该在自己的站点上设置[OpenID 委托，并使用它来标识您自己。](http://wiki.openid.net/Delegation)

使用委托，您只需更改您委托的服务。您仍然可以通过您控制的自己的 URL 来识别。但这现在无济于事，除非 Stack Overflow 允许您更改它。大多数网站将 OpenID 绑定到真实帐户，并允许您切换或至少添加额外的 OpenID。除非访问的结果完全微不足道，否则您似乎无法将 OpenID 以 1:1 的比例映射到帐户；否则，您将处于这种情况，您将失去现有的问题、答案和切换 ID 的声誉。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-21T18:41:42.037

那么 OpenID 协议实际上并没有为这种情况提供解决方案吗？我将不得不依靠个别站点来提供某种迁移功能？这是相当不幸的。OpenID 的整个设计似乎集中在“一个篮子里的所有鸡蛋”的方法上，即您应该尝试在任何可能的地方使用您的 OpenID。如果所有提供者都是相同的，这会很好，但它们不是。

想象一下更糟糕的情况，您选择的供应商最终倒闭。您不会在许多网站上丢失您的帐户吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T20:21:44.703

这对我来说是个问题，因为我以新时尚 firstName.lastName@gmail.com 的方式更改了我的电子邮件。在对该网站进行了多次搜索之后，我确认由于问题中描述的问题，在另行通知之前，像我这样的人运气不佳。

要么保留那个旧ID，要么放弃你的积分。

# apache-flex - SoapException：从 Flex 调用 .NET Web 服务时发生根元素丢失

> ID：13775
> 
> 赞同：0
> 
> 时间：2008-08-17T17:58:57.170
> 
> 标签：apache-flex, web-services, soap

我有一个在页面中嵌入了 Flex 应用程序的 .net Web 应用程序。这个 flex 应用程序调用一个 .net web 服务。我可以通过调试器跟踪执行过程，一切看起来都很好，直到我得到响应：

```
 soap:ReceiverSystem.Web.Services.Protocols.SoapException: Server was unable to process request

. ---> System.Xml.XmlException: Root element is missing.

   at System.Xml.XmlTextReaderImpl.Throw(Exception e)

   at System.Xml.XmlTextReaderImpl.ThrowWithoutLineInfo(String res)

   at System.Xml.XmlTextReaderImpl.ParseDocumentContent()

   at System.Xml.XmlTextReaderImpl.Read()

   at System.Xml.XmlTextReader.Read()

   at System.Web.Services.Protocols.SoapServerProtocol.SoapEnvelopeReader.Read()

   at System.Xml.XmlReader.MoveToContent()

   at System.Web.Services.Protocols.SoapServerProtocol.SoapEnvelopeReader.MoveToContent()

   at System.Web.Services.Protocols.SoapServerProtocolHelper.GetRequestElement()

   at System.Web.Services.Protocols.Soap12ServerProtocolHelper.RouteRequest()

   at System.Web.Services.Protocols.SoapServerProtocol.RouteRequest(SoapServerMessage message)

   at System.Web.Services.Protocols.SoapServerProtocol.Initialize()

   at System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest

 request, HttpResponse response, Boolean& abortProcessing)

   --- End of inner exception stack trace --- 

```

来自 flex 的调用看起来不错，通过 web 服务的执行很好，但这是我通过 wireshark 捕获的响应，这是怎么回事？

我尝试了几种网络方法，从“Hello World”到参数化方法……都以相同的响应返回……

我认为这可能与使用“--->”进行编码有关，但我不确定如何控制 .net 作为响应呈现的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-18T22:07:24.877

看起来您可能正在向服务发送格式不正确的 XML 文档。您可以使用 Fiddler 或类似的东西来获取到 Web 服务的实际调用的副本吗？这对于找出问题所在有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T05:04:59.060

我最近使用了一个 .NET REST 接口，我使用 Flex 应用程序使用它。我也遇到了一些奇怪的异常，我的问题是我在发送请求时忘记包含在根元素的 xmlns（命名空间）中。这是一个疯狂的猜测，但我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T00:47:15.390

您使用的是 Flex 3 吗？如果是这样，您可以在执行 web 服务时设置断点，并在 Flex 框架对您的请求进行编码时实际单步执行。查看 mx.rpc.soap.SoapEncoder ，您将能够准确地看到将通过网络发送的内容。

# internet-explorer - 我们应该不再支持 IE6 吗？

> ID：13786
> 
> 赞同：15
> 
> 时间：2008-08-17T18:15:14.097
> 
> 标签：internet-explorer, internet-explorer-6

我们是否应该在我们的 Web 应用程序中找到解决方法，以便它们适用于各种情况？是时候废除 IE6 编程了吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2010-05-18T22:47:28.150

这一切都是为了让您的网站在您使用越来越旧的浏览器（或禁用用户）时*优雅地降级。*不幸的是，有很多 IE6 和 IE7 用户或多或少*无法*切换，因此您的网站似乎不太可能强迫许多人这样做。如果您的网站看起来很糟糕，那没关系。如果它无法使用，那么你就有一个真正的问题。一般来说，你越是遵守当前的标准（而不是仅仅追逐最新的浏览器），你就可以更好地使用旧的浏览器而不需要额外的努力。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-08-17T21:08:32.343

这在很大程度上取决于应用程序及其用户的上下文。有两个关键方面：您的用户使用什么浏览器；以及他们可以访问您的网站/与您的网站互动的重要性。

第一部分通常很容易建立，**如果**你有一个带有统计数据的现有版本（谷歌分析或类似的简单而伟大），或者你可以从类似的应用程序/产品中访问这些数据。

后者有点难以决定。例如，如果您正在开发一个公开可用的广告赞助网站，这只是一个数字游戏 - 计算出您失去了多少观众，并考虑到额外的开发时间的价值。但是，如果您是根据一组用户的请求专门做某事（例如企业 Web 应用程序），您可能会被这些用户浏览的内容所困扰。

根据我的经验，对于不同的应用程序，这两件事可能会发生显着变化。我们仍然有网络应用程序（上周的统计数据），IE6 使用率接近 70%（20% IE7，其余部分在 IE5.5 和 FF2 之间），而其他应用程序的 IE6 使用率接近 0%。出于相对明显的原因，后者是那种失去一些用户并不那么重要的应用程序。

说了这么多，我们通常发现支持 IE6（和其他人指出的 IE5.5）很容易，因为我们已经这样做了一段时间。是的，这很痛苦，是的，这需要更多时间，但通常不会太多。在极少数情况下，必须支持 IE6 会极大地改变您所做的开发类型 - 这只是意味着更多的工作。支持它（并对其进行测试）的另一个好处是，由于 IE6 行为的极性，您通常最终会做更好的全面浏览器和怪癖测试。

您需要根据您的应用程序/产品的要求来决定是否应该找到解决方法。那就是 IE6 并没有那么重要——这种问题在其他情况下一直发生，而 IE6 恰好是混合标准、版本控制和遗留支持的成本和影响的一个很好的例子。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-18T05:05:58.730

这取决于您的观众，以及获得这些 IE6 观众的成本（开发、维护、开发到 7 岁最低公分母的机会成本）是否值得。

还值得一问 - IE6 用户是否可能关心或使用您的网站？我认为大量的 IE6 用户不关心新技术 (duh) 或者从限制浏览器安装的公司网络访问网络。也许那些观众不值得付出努力——只有你能回答这个问题。

我很高兴看到 Apple 的 Mobile Me 网站不支持 IE6。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-05-18T23:15:11.407

对此没有硬性规定。支持 IE6 和 IE7 需要花费您可能没有的时间和知识，但另一方面，如果您希望您的网站看起来像您想要的那样，这是必须进行的投资。所以问题变成了：哪个对你更重要？

你说“如果我检查页面的统计数据，我注意到几乎一半的访问者使用这种浏览器”，这对我说，除非你对一半的访问者看到设计/布局以外的东西感到满意您打算，您将需要进行该投资或获得有能力的人的帮助。

如果这不是一个选项，您可以尝试使用一些 CSS“框架”，例如 Blueprint 或 Grid960，看看是否更容易，但这也需要一些学习。

其他选项要么采用更简单的设计，可能跨浏览器工作，删除 IE6/7 的样式表并让查看者看到原始 HTML 文档结构，要么使用基于表格的布局，如果你知道如何使用它们（与有些人会告诉您，如果这条路线最适合您的项目要求并结合您的能力和资源的限制，那么这条路线没有任何问题）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-17T18:25:21.800

我建议人们在做出此决定之前检查他们自己网站的用户统计信息，但这里有一个关于流行浏览器版本的常见参考：

[http://www.w3schools.com/browsers/browsers_stats.asp](http://www.w3schools.com/browsers/browsers_stats.asp)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-17T18:26:14.027

视情况而定。像这样的网站，如果大多数人都是技术娴熟的人，我认为假设人们拥有最新的浏览器是安全的。

但是，如果您对可能不那么技术的人开放，您可能会让 IE6 大量访问您的网站。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-17T18:35:17.457

大约一周前有人[问了同样的问题，并得到了一些很好的答案。](https://stackoverflow.com/questions/6611/ie6-to-support-or-not-to-support)我个人最喜欢的是[doekman 建议尝试 IE7-js](https://stackoverflow.com/questions/6611/ie6-to-support-or-not-to-support#6698)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-05-18T22:46:22.363

遗憾的是，在大多数情况下，我们仍然需要支持 IE6，因为它仍然代表了很大一部分互联网冲浪用户。如果您在公司环境中，则更是如此，因为公司没有动力仅仅为了一些天上掉馅饼的“网络标准”而升级作品。

如果没有，请尝试使用 gmail 方法，并为 IE6 查看器抛出错误和/或显示免责声明，如果他们升级，该站点将工作/看起来更好。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-17T20:49:36.517

不幸的是，我认为自己是一个技术含量很高的人，在家里我使用 Firefox 3 和 IE7，但在工作中（一家大型美国制药公司）我必须使用 IE6，而且我认为这不会很快改变. 该公司对基于 Web 的内部应用程序线进行了大量投资——针对另一个浏览器（甚至升级）测试和升级它们的商业案例并不引人注目。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-18T05:15:25.480

问问你的客户：他们愿意升级到 Vista 吗？如果他们说是，那么不支持 IE6。您的目标客户是那些“哇！远景。*流口水*”的人。他们也是想要*最快、最强大的计算机*的人。

如果你的客户说“嗯？vista 是什么？我想要我的猫屏保”，那么你需要支持 IE6。

简而言之：如果他们有 Vista，那么他们就没有 IE6。具有讽刺意味的是：Web 开发人员要想最终摆脱 IE6 及其遗留问题，他们必须推广 Vista 或希望 Vista 能够成功。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-20T22:39:45.797

我是一个为游戏部落创建免费模板的小组的程序员。我们的观点是，当 IE8 完全发布时，我们将放弃对 IE6 的支持。但归根结底，正如许多人所说，这取决于您的用户受众。我们的目标受众相对广泛（人们在我们无法预测的地方下载和使用我们的模板）——但主要是游戏玩家，他们通常足够聪明，可以让他们的软件保持最新。

我发现我的自然编码风格在我第一次尝试时通常在 IE6 中工作，而且这些错误很容易根除，所以也许我不会像其他人那样觉得它很痛苦。就我个人而言，当 IE6 生命周期结束或 IE8 完全发布时（以先到者为准），我将放弃对 IE6 的支持。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-08-20T23:42:54.070

> 是时候废除 IE6 编程了吗？

是的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-08-10T07:36:17.517

仅仅是因为截至 2009 年 7 月，IE6 仍占[网络人口的 27.21%](http://marketshare.hitslink.com/browser-market-share.aspx?qprid=2) [（或 15.21%，具体取决于您的数字）](http://www.w3counter.com/globalstats.php?date=2009-07-31)。

现在我知道你们中的一些人可能会告诉我，如果越来越多的网站停止支持 IE6，浏览器最终会消失。**这是一个谎言。**

* * *

想象一下：

> Corporation ACME 拥有超过 150 000 台运行 Windows 2000/XP 的计算机。他们还有一个 7 年前开发的不错的 Intranet 站点，它在 IE6 中运行良好，但在其他浏览器中则不然。

当他们控制了完整的 IT 基础架构以及谁获得了哪些更新时，您真的认为他们会投资修复他们的 Intranet 应用程序吗？将更新推迟到迁移到新系统之前的成本更低。

很多企业都处于这种情况。

* * *

这是另一个例子：

> Business FooBar 在互联网上销售其产品。他们超过四分之一的流量来自 IE6，这也意味着他们四分之一的销售额。

您认为 FooBar 会简单地阻止这些客户，还是会用一个[巨大的通知来惹恼他们，告诉他们他们正在使用有缺陷的浏览器](http://www.browsesad.com/)？这将花费他们近四分之一的销售额！只要支持 IE6 具有货币价值（它确实并将直到其市场份额降至约 8% 以下），IE6 就会占上风，这也是谷歌不会很快停止对 IE6 的支持的原因。

* * *

[Browse Sad](http://www.browsesad.com/)等活动不了解企业文化的心态（变革代价高昂），也不了解最终消费者对全球 IT 生态系统的影响可以忽略不计。大公司控制它。

[消费者确实产生了越来越大的影响，但与企业的影响相比，它仍然微不足道。]

让我们在这里说实话：拥有技术专长并且可以升级到更好的浏览器的每个人都已经做到了。其余的人仍在运行过时的操作系统，不知道如何升级，或者在他们的机器上没有管理员权限。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-10-02T17:45:32.857

我的猜测是，这些天大多数 IE6 用户是由于大量公司/组织陷入不合逻辑的浏览器升级恐惧。

我是美国政府的承包商，截至本文发布之时，美国政府的整个卫生与公共服务部门仍在 IE6 上进行标准化（而且似乎近期内不打算升级）。当我询问 IT 人员时，他们声称政府测试新浏览器是否符合安全标准的成本太高，但我理解真正的原因是他们害怕不得不处理跨浏览器呈现不同的事物。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-05-18T22:58:01.667

是（强调）和否（怀疑）​​。

除非您正在为您知道 IE6 渗透率（没有双关语）很高的团队创建某种内部工具；忽略IE6。充满活力。

至于IE7，就有点折腾了。一般来说，如果你的目标是私营部门，你可以忽略它（在大多数情况下）并假设你的 IE8 支持会解决最令人发指的问题；但如果它是一个卖东西的网站（特别是网上商店；推销网站等），您可能至少要检查它是否看起来*有点*理智，并酌情添加一些小修复。

作为旁白; 和一个真实的例子；在我的工作地点（我们做网站），我们目前正在（或者更确切地说，考虑）总体上对 IE 支持进行转变：价格以基本的 IE8 支持为准；完整的 IE8 支持将花费约 10%；IE7 多约 30%，IE6 支持多约 100%。

**编辑：**可以将其视为额外收费，以制造专为 WV 设计的露营车，分别与 pinto、yugo 和马车一起工作。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2010-05-18T23:10:31.740

在IE6下，让它至少显示一些东西。一个在 IE6 上死掉的 FF3 页面看起来很糟糕，就像你没有好好计划一样。如果您根本不支持 IE6，请确保用户知道这是故意的，通过显示一个特殊页面来建议他们去哪里。

如果您期待企业访问者，它必须在 IE6 下工作，即使只是一个简化版本。如果没有，如果您如上所述处理好，您可以完全放弃 IE6。

不过，现在还远未准备好考虑放弃 IE7。我希望这是 XP 上的默认浏览器，这是最流行的操作系统。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2010-05-19T05:01:19.787

如果您不想花精力为您的网站支持 IE6，您可以使用以下 URL 中的任何一种方法。

这些方法建议用户下载任何高级浏览器，例如 IE7+、Firefox 3+、Safari 3+、Opera 9.5+ 或 Google Chrome

> [http://garmahis.com/tools/ie6-update-warning/](http://garmahis.com/tools/ie6-update-warning/)

**但是，那是关于 IE6 的。我相信你还是应该支持IE7。**

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2010-05-19T05:21:08.357

始终牢记您的目标受众、客户需求/要求、项目目标，当然还要保持真实（根据您的预算/时间）

编写/设计一个适合大多数浏览器的网站并不是一件容易的事，你需要使用所谓的“黑客”来解决常见问题（主要是在 IE 浏览器上）这是我个人不鼓励的，但我去过那里当目标主要是IE。

现在你有几个选择，你可以选择检测它正在使用什么浏览器来浏览你的网站并触发一个脚本来推荐一个遵循更好标准的替代浏览器（有或没有显示清晰的内容），或者你可以编写一个替代的代码那些 IE 小伙子的入口页面或我更喜欢的（大部分时间）是优雅地降级页面并让用户了解他/她过时的浏览器并推荐一个选项。

我已经读到您正在使用 CMS 来创建这些网站，大多数 CMS 在大多数开箱即用的浏览器上都能“正常”工作，因为您指出某些 CSS 和 JavaScript 元素在您使用更多“前卫”技术时不起作用。

如果您打算开发更多网站，请允许我推荐以下网站：

要尝试您的网站在多个浏览器（版本、操作系统、JavaScript、Java 等）上的外观，您可以使用

```
http://browsershots.org/ 
```

比较您最喜欢的 CMS 选项

```
http://www.cmsmatrix.org/ 
```

要开始学习 (x)html、css、php 等，您可以访问

```
http://www.w3schools.com/ 
```

一个好的 CSS 重置样式表是 Meyer 的

```
http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/ 
```

我不得不说这是跨浏览器存档一致性的起点:)

我相信您可能听说过或知道这些网站，它们只是我不时使用的工具，用于寻找参考、新知识或替代品。我还可以推荐几个 FF 扩展，例如 Web Developer Toolbar 和 FireBug。

我想现在就这些了，希望对您有所帮助，并祝您编码/webdev 愉快。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2010-05-19T06:03:16.793

问题是，如果您不愿意添加对 IE6/7 的支持，那么有很多竞争对手会很乐意“窃取”您的客户，以换取一点浏览器黑客攻击。只要有钱，对这些浏览器的支持就会非常缓慢地逐步淘汰。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2010-05-19T06:08:10.833

您可能想看看[IE7.js](http://code.google.com/p/ie7-js/)。

> IE7.js 是一个 JavaScript 库，用于使 Microsoft Internet Explorer 的行为类似于符合标准的浏览器。它修复了许多 HTML 和 CSS 问题，并使透明 PNG 在 IE5 和 IE6 下正常工作。

他们的 IE9.js 声称：

> 升级 MSIE5.5-8 以兼容现代浏览器。

我自己没有用酸或其他标准测试对此进行测试，但这可能很有希望。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-08-17T18:29:43.117

我完全赞成推动用户升级到最新的可用 IE 版本（因为每个版本都会改​​善问题），但我也反对告诉人们升级或更改他们的浏览器。

我仍然在我的网站上支持 IE6。我认为我什至支持 IE5.5。

一般来说，不要强迫您的用户升级他们的系统只是为了查看您的网站是一个很好的做法。当然，除非您正在开发内部应用程序，否则我会说每个人都应该升级到最新的可用版本。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-08-17T18:32:09.163

Dean Edwards 的[ie7.js](http://code.google.com/p/ie7-js/)使 IE6 的行为（大部分）像一个受人尊敬的 Web 浏览器。它要求客户端打开 Javascript，但这是一个合理的让步。我在我创建的网站上使用该脚本和[Save the Developers](http://www.savethedevelopers.org/)中的脚本，它使支持 IE6 变得轻而易举。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-08-17T21:12:29.107

如果我们可以拒绝支持非常不兼容的浏览器，那就太好了。问题是，**拒绝 IE 支持会伤害您的网站，伤害您的潜在用户，但不会伤害 IE。** 这正是我们的目标。我提出了一种不同的技术。如果所有反 IE 开发人员都为所有访问其网站的 IE(6) 用户设置“请停止使用您的垃圾浏览器”启动画面会怎样。他们可以提供一些好的、简单的切换理由，用户不能忽略，但随后允许用户访问（符合 IE 的）站点。这样他们就可以理解重点，而不会伤害自己（很多）或用户（除了一点点）。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-08-18T04:48:14.130

这取决于您的目标受众，以及您是否认为自己有能力疏远用户。如果您正在制作一个极客网络应用程序，并且您认为大多数用户会使用 firefox，那么不要担心 IE6。我将在 Firefox、IE7 和 Safari 中启动它并查看谁访问了您的站点。如果你看到需要让它在 IE6 中运行，那么就开始着手处理它。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-08-18T05:25:38.253

请注意，企业中的某些用户别无选择。因此，如果您以企业客户为目标，请注意他们仍在使用 IE6。一般来说，企业的移动速度比消费者慢。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-08-20T22:24:29.343

Vista 未能获得大众接受的主要原因是我们仍然必须支持 IE6。大多数仍在使用 IE6 的人是从不升级浏览器或更新操作系统的人。如果他们中的大多数只是迁移到 Vista，IE7 将自动替换 IE6

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-08-20T22:30:41.763

取决于您的目标受众.. 我的意思是，有些大学有 Firefox，对吧？只有（我认为）第三世界国家默认使用 IE6。（我知道，我看到他们）不过我不知道其他国家。但我很确定仍然有很大一部分人默认使用 IE6。如果您认为这真的有必要（我认为是），请继续。我看不出有什么问题。（因为我在软件开发等方面缺乏经验……XD）

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-08-20T22:45:03.427

通过不阻止它并让它在大多数情况下自生自灭来支持 IE6。仅解决破坏主要功能的 IE6 错误。

至于 JS 错误和可怕的 DOM 支持，在 IE7 和 IE8 中仍然存在。在这种情况下，您不妨使用 JS 工具包并几乎免费获得 IE6 支持。

错误就是错误，它们应该被修复（在任何浏览器中）而不是被解决。但是，你必须做你必须做的事情来取悦游客。

总有一天，要解决 IE6 错误会要求太多。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-08-20T23:01:10.253

我当然反对将浏览器排除在面向公众的网站之外。没有什么比访问一个网站并发现他们只支持 IE 更令人恼火的了，因为某处的某些开发人员无法让事情“工作”。

正如上面许多其他作者所指出的，有相当多的用户使用公司强加的桌面构建或安装 IE6。您最好的选择始终是识别用户并与他们交流，而不是将您严厉的概念强加给他们。

Ryan Farley[最近有一篇关于此](http://ryanfarley.com/blog/archive/2008/08/18/why-i-am-no-longer-supporting-ie6.aspx)的文章，其中描述了我认为将用户转换到不同浏览器的最佳第一步。它鼓励人们升级并解释为什么在一个图形中可能无法正确渲染。许多年前，BinaryBonsai.com 是我遇到的第一个博客，它出现了一个暗示 FireFox 的徽章，我完全下载了它，只是为了不被额外的图形所困扰。

真的没有什么能比得上书呆子的同伴压力了。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2009-10-02T17:58:40.043

如果您正在编写一个免费或向公众开放的应用程序，可能会减少对 IE6 的支持，以便有时间为您的大多数用户构建更多东西。

如果您正在编写一个不是免费的应用程序，请以您的用户为基础。很可能您会希望再为 IE6 提供一两年的全面支持。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2010-05-18T22:46:15.090

我真的不会费心支持 IE6。它正在被逐步淘汰（并且应该由仍在使用它的任何人更新）。

我仍然会尝试支持 IE7，因为我认为它仍然有些流行。您可能总是在网站上显示“此网站在：Firefox/Chrome/Safari/IE8 中的表现要好得多”

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2010-05-18T23:32:29.987

这不是一个是或否的问题。这是您和您的客户（那些付钱给您创建网站的人）之间的谈判问题。谈判通常是这样的：您的网站将花费您 $x 并支持浏览器 a、b、c。如果您想要 IE6 支持，它将是 $x+$y 等。然后您的客户打电话来决定是否值得花费 $y 来为那些坚持使用 IE6 的客户提供服务。

如果您是自己的客户，您可以剪掉中间部分，自己打电话；-)

（IE7 相同）

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2010-05-19T05:26:07.200

地狱是的。至少在 IE6 下。支持 IE7 还不错。我从事网络开发已经有一段时间了，我所做的就是显示警告：“您使用的是过时的浏览器。此网页的某些部分可能无法正常工作，请升级或选择 Firefox”，因为您可以t 简单地忽略这些用户，你必须给他们一个选择。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2010-05-19T06:31:26.097

我必须同意那些说“这取决于”的人。

最重要的部分是网站的受众使用什么，如果他们使用 IE6，则开发您的页面以支持 IE6。

根据我的经验，您可以期待这样的观众：

**私有**：IE7+ 或 FF
**私有和技术 || 游戏玩家**：IE8、FF、Chrome
很多人仍然使用带有 IE6/7 的 XP，除非他们是技术人员或经常使用 PC。

**艺术与设计**：Safari、FF（通常基于 Mac）
Mac 仍然广泛用于图形环境，几乎每个艺术家和设计师都拥有一台，即使它只是为了适应人群。

**老人**：IE6，很少IE7
Windows 95/98 不支持IE7。您还应该避免为这些受众使用 javascript，因为他们通常拥有糟糕的 PC。

**企业**：IE6/IE7
许多公司更新非常缓慢，因为它涉及大量的文书工作、组织和预算。根据公司中的哪些人可能会使用您的页面以及它是什么类型的公司，您可以预期会更糟（秘书、低工资奴隶等）或更好（首席执行官、首席技术官……）。

请注意，这不是基于任何统计数据，仅基于我的个人经验。

放弃 IE6 和 IE7 会很好，但尤其是商业网站不能失去用户。作为网站的创建者，您*根本没有*权力让用户切换浏览器。在某些情况下（如公司环境），甚至用户都没有权力，他们只能使用管理员允许的东西。在其他情况下，他们不知道如何安装任何东西（老人、孩子……）。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2010-05-19T19:45:38.107

在大型全球企业环境中，我将使用 IE6 直到明年。

我打算花几百万买一些新奇的软件。必须支持IE6...

# python - Python 正则表达式实现字符串反转义

> ID：13791
> 
> 赞同：17
> 
> 时间：2008-08-17T18:20:21.060
> 
> 标签：python, regex, backreference

我正在尝试使用 Python 正则表达式和反向引用来实现字符串转义，但它似乎并不想很好地工作。我确定这是我做错了，但我不知道是什么...

```
>>> import re
>>> mystring = r"This is \n a test \r"
>>> p = re.compile( "\\\\(\\S)" )
>>> p.sub( "\\1", mystring )
'This is n a test r'
>>> p.sub( "\\\\\\1", mystring )
'This is \\n a test \\r'
>>> p.sub( "\\\\1", mystring )
'This is \\1 a test \\1' 
```

我想将 \\[char] 替换为 \[char]，但是 Python 中的反向引用似乎并不遵循它们在我曾经使用过的所有其他实现中所遵循的相同规则。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-17T21:36:32.693

这不是安德斯的第二个例子吗？

在 2.5 中，`string-escape`您还可以应用一种编码：

```
>>> mystring = r"This is \n a test \r"
>>> mystring.decode('string-escape')
'This is \n a test \r'
>>> print mystring.decode('string-escape')
This is 
 a test 
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-17T19:01:02.990

好吧，我想你可能错过了 r 或者记错了反斜杠......

```
"\\n" == r"\n"

>>> import re
>>> mystring = r"This is \\n a test \\r"
>>> p = re.compile( r"[\\][\\](.)" )
>>> print p.sub( r"\\\1", mystring )
This is \n a test \r
>>> 
```

哪一个，如果我理解的话，就是所要求的。

我怀疑更常见的要求是：

```
>>> d = {'n':'\n', 'r':'\r', 'f':'\f'}
>>> p = re.compile(r"[\\]([nrfv])")
>>> print p.sub(lambda mo: d[mo.group(1)], mystring)
This is \
 a test \
>>> 
```

感兴趣的学生还应该阅读 Ken Thompson 的[关于信任信任的思考”](http://cm.bell-labs.com/who/ken/trust.html)，其中我们的英雄使用了一个类似的例子来解释信任编译器的危险，你自己没有从机器代码中引导。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-17T19:40:49.820

这个想法是我将读取一个转义的字符串，然后取消它（Python 明显缺乏的一个特性，你不应该首先求助于正则表达式）。不幸的是，我没有被反斜杠欺骗......

另一个说明性示例：

```
>>> mystring = r"This is \n ridiculous"
>>> print mystring
This is \n ridiculous
>>> p = re.compile( r"\\(\S)" )
>>> print p.sub( 'bloody', mystring )
This is bloody ridiculous
>>> print p.sub( r'\1', mystring )
This is n ridiculous
>>> print p.sub( r'\\1', mystring )
This is \1 ridiculous
>>> print p.sub( r'\\\1', mystring )
This is \n ridiculous 
```

我想要打印的是

```
This is 
ridiculous 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-17T19:26:33.250

您被 Python 对结果字符串的表示所欺骗。Python 表达式：

```
'This is \\n a test \\r' 
```

表示字符串

```
This is \n a test \r 
```

这就是我认为你想要的。尝试在每个 p.sub() 调用前添加“打印”以打印返回的实际字符串，而不是字符串的 Python 表示。

```
>>> mystring = r"This is \n a test \r"
>>> mystring
'This is \\n a test \\r'
>>> print mystring
This is \n a test \r 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-17T21:55:54.167

标记; 他的第二个示例要求最初将每个转义字符放入数组中，如果转义序列恰好不在数组中，则会生成 KeyError 。除了提供的三个字符（尝试 \va ）之外，它会死在任何东西上，并且每次您想要取消转义字符串（或保留全局数组）时枚举每个可能的转义序列是一个非常糟糕的解决方案。类似于 PHP，它使用`preg_replace_callback()`lambda 而不是`preg_replace()`，在这种情况下完全没有必要。

很抱歉，如果我对此感到很讨厌，我只是对 Python 感到非常沮丧。我用过的所有其他正则表达式引擎都支持这一点，我不明白为什么这不起作用。

感谢您的回复；该`string.decode('string-escape')`功能正是我最初寻找的。如果有人对正则表达式反向引用问题有一个通用的解决方案，请随时发布它，我也会接受它作为答案。

# c++ - 除了createfile和openfile之外，还有什么windows api可以获取文件句柄吗？

> ID：13806
> 
> 赞同：5
> 
> 时间：2008-08-17T18:27:08.473
> 
> 标签：c++, windows, api, logfiles

我试图窥探应用程序正在写入的日志文件。

我已经成功地将 createfile 与 MSR 中的 detours 库挂钩，但 createfile 似乎从未被我有兴趣窥探的文件调用。我也尝试过使用相同的结果挂钩 openfile。

我不是经验丰富的 windows/c++ 程序员（甚至不是经验丰富的程序员），所以我最初的两个想法是应用程序在我挂钩 api 之前调用 createfile，或者有一些其他 api 用于为它们创建文件/获取句柄.

编辑：感谢您的两个伟大的答复。我会赞成codingthewheel的回复，因为它提供了丰富的信息，但我没有足够的代表:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-17T19:26:56.637

您可以使用 Sysinternal 的[FileMon](http://technet.microsoft.com/en-us/sysinternals/bb896642.aspx)。它是一个出色的监视器，可以准确地告诉您正在进行哪些与文件相关的系统调用以及参数是什么。

我认为这种方法比挂钩 API 调用要容易得多，而且侵入性要小得多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-17T19:04:47.227

这是一个可能有用的链接：

[使用 C# 和 C++ 进行游击式文件监控](http://www.codingthewheel.com/archives/how-i-built-a-working-online-poker-bot-6)

可以在不接触 CreateFile API 的情况下创建文件，但我能问**一下您使用的是什么 DLL 注入方法**吗？如果您使用 Windows Hooks 之类的东西，您的 DLL 将在目标应用程序初始化后的某个时间安装，您将错过对 CreateFile 的早期调用。而如果您使用 DetourCreateProcessWithDll 之类的东西，则可以在任何应用程序启动代码运行之前安装 CreateFile 挂钩。

根据我的经验，99.9% 的创建/打开文件都会调用 CreateFile，包括通过 C 和 C++ 库、第三方库等打开的文件。也许有一些未记录的 DDK 函数不通过 CreateFile 路由，但是对于一个典型的日志文件，我对此表示怀疑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-05T08:39:16.857

来自 sysinternals 的[Process Monitor也可以提供帮助。](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

# vb.net - 如何在 NAnt 中为 VB.Net 创建自动构建文件？

> ID：13832
> 
> 赞同：2
> 
> 时间：2008-08-17T18:52:13.803
> 
> 标签：vb.net, nant, .net-1.0

我已经接手了一个以 .net 1.0 框架为目标并用 C# 和 Visual Basic 编写的 Web 应用程序的开发。

我决定我们需要做的第一件事是改进构建过程，我为 C# 项目编写了构建文件，但是在为 Visual Basic 创建构建文件时遇到了很多问题。

诚然，我个人并不了解 VB，但似乎我必须对构建文件中的所有导入和引用进行硬编码才能让任何东西正常工作......当然不是最好的做事方式......

对于任何示例：如果我没有在构建文件中包含命名空间系统，我将收到几个常见未知类型的错误，例如：Guid

NAnt 通常是否需要 VB 代码，或者 VB 代码是否需要可能的 NAnt-freindly 重构？

有人有 VB NAnt 提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-22T21:20:47.893

对于使用 Visual Studio 开发的 VB.NET 项目，我对 NAnt 和 vbc 编译器有过类似的体验。我的解决方案是避免在 Visual Studio 中的项目级别导入命名空间（默认情况下），并在类/文件级别使用显式 Imports 语句。C# 项目默认以这种方式工作（没有项目级命名空间导入），我喜欢在查看文件时显式命名空间指令提供的额外信息。

有趣的是 VB.NET 和 C# VS 项目在这方面是如此不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-28T14:24:01.663

我建议您将特定语言的编译器排除在此之外。您仍然可以使用 NAnt 来执行此操作：

首先从使用 MSBuild 的目标开始，因为无论使用何种语言，它都会编译您的项目并为您处理依赖关系。这意味着您不需要对它们进行硬编码。

例子：

```
<target name="WinBuild">
  <exec program="msbuild.exe"
        basedir="${DotNetPath}"
        workingdir="${SolutionPath}"
        commandline="MySolution.sln 
                     /nologo /verbosity:normal /noconsolelogger 
                     /p:Configuration=Debug /target:Rebuild" />
</target> 
```

我想一旦你搞定了——你可以花大量时间尝试让 NAnt 本地编译，但在我看来，这就是我将用于这个项目的，因为它似乎是一次性的？

希望有帮助，

干杯，

抢G

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-19T21:24:02.950

您是在调用 msbuild 来构建吗？或者你是在调用 VS.NET IDE exe 来构建。我们的 c#/VB.NET 混合使用 CC.NET 和 NAnt 没有问题，并且不必在构建文件中指定引用的程序集。

我们所做的是使用 IDE exe 来构建包含我们想要构建的项目的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-17T21:15:22.237

我不确定，如果您谈论 VB 或 VB.Net。
无论哪种方式，看看[Nant Contrib](http://nantcontrib.sourceforge.net/release/latest/help/tasks/)。也许他们有解决办法。

# svn - VisualSVN 使用 TortoiseSVN 取消删除

> ID：13848
> 
> 赞同：6
> 
> 时间：2008-08-17T19:03:33.500
> 
> 标签：svn, tortoisesvn, visualsvn-server

对 VisualSVN 使用 TortoiseSVN 我删除了一个我不应该删除的源文件。现在这不是火车粉碎，因为我可以从每日备份中取回文件。但是我想从 SVN (VisualSVN) 中取消删除它，以便我可以取回历史记录。但是我不知道该怎么做。

有人知道如何使用 VisualSVN 界面或最新版本的 TortoiseSVN 从 VisualSVN 中取消删除文件吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-17T19:17:43.783

您需要做的是：

1.  右键单击您认为它所在的文件夹。
2.  在 TortioseSVN 下选择 Show Log
3.  找到文件被删除的签入
4.  向下列表并找到文件
5.  选择还原此版本的更改以取消删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-17T19:21:45.850

您是仅在本地删除它，还是您提交了删除？在后一种情况下，请尝试检查以前的版本。

# html - IE7：菜单上方的标题

> ID：13851
> 
> 赞同：1
> 
> 时间：2008-08-17T19:10:28.510
> 
> 标签：html, css, internet-explorer-7

我在使用 IE7 时遇到问题。我有一个标题，它是一个 IMG。在它下面我有一个代表菜单的 div，它们必须相互连接，中间没有空格。两者都是 1000px 宽度。在 Opera 和 FireFox 中，标题和菜单整齐地相互连接。但是，在 IE7 中，菜单 DIV 和 IMG 之间有一个很小的空间。我已经尝试在 IMG 上明确定义填充和边距，但是它不起作用。我以前遇到过这个问题，所以它似乎是一个 IE7 怪癖。

我的 HTML 代码：

```
<div id="middle">
  <img id="ctl00_headerHolder_headerImage" src="pictures/headers/header_home.jpg" style="border-width:0px;" />

  <div id="ctl00_menuPanel" class="menu">
    <a id="ctl00_home" href="Default.aspx" style="color:#FFCC33;">Home</a> |
    <a id="ctl00_leden" href="Leden.aspx">Leden</a> |
    <a id="ctl00_agenda" href="Agenda.aspx">Agenda</a> |
    <a id="ctl00_fotos" href="Fotos.aspx">Foto's</a> |
    <a id="ctl00_geschiedenis" href="Geschiedenis.aspx">Geschiedenis</a> |
    <a id="ctl00_gastenboek" href="Gastenboek.aspx">Gastenboek</a>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-17T19:12:09.193

试试 IE 开发者工具栏，它可以让你检查元素正在发生的事情，并为你提供所覆盖区域的轮廓。它可能会让你更好地理解问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-17T19:12:51.407

解决方案：

```
img {
padding: 0px;
margin: 0px;
display: block;
} 
```

显示：块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-17T19:16:03.380

我经常遇到这种情况。与其寻找特定的行为，不如通过将 img/div/etc 选择器的填充和边距属性显式设置为 0 来尝试健全性检查，设置 border-style: none border-width: 0px border="0" 等。

IE Dev Toolbar 是必备工具，但它能否帮助您解决单像素问题却不太可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-17T19:23:49.933

请注意，IE7 使用空格做了一些非常奇怪的事情，而不是使用显示块；尝试删除图像和 div 之间的空白，看看会发生什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-17T19:25:43.813

CSS 重置（如[YUI 重置 CSS](http://developer.yahoo.com/yui/reset/)）非常适合这种事情。他们在许多 HTML 元素上重置填充、边距和其他显示属性，以最大限度地减少显示差异。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-17T20:20:50.193

> > 解决方案...显示：块

如果不知道浏览器所处的渲染模式，这个问题就无法正确回答；如果你有 CSS 渲染问题，你需要告诉人们你有什么文档类型。您所指的图像行为在怪癖模式与标准模式下是不同的。一个最小的测试用例必须包括一个完整的 HTML 文档和重现问题的 CSS。请不要在没有给他们需要的信息的情况下向人们寻求帮助，而不会浪费他们的时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T04:28:37.867

真正的解决方案：

```
#middle { font-size: 0; line-height: 0; } 
```

# python - 你能解释一下闭包（因为它们与 Python 有关）吗？

> ID：13857
> 
> 赞同：94
> 
> 时间：2008-08-17T19:14:30.747
> 
> 标签：python, functional-programming, closures

我一直在阅读很多关于闭包的文章，我想我理解它们，但在不给自己和其他人蒙上阴影的情况下，我希望有人能尽可能简洁明了地解释闭包。我正在寻找一个简单的解释，可以帮助我理解我想在哪里以及为什么要使用它们。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2008-09-26T19:28:32.573

[关闭关闭](http://mrevelle.blogspot.com/2006/10/closure-on-closures.html)

> 对象是附加了方法的数据，闭包是附加了数据的函数。

```
def make_counter():
    i = 0
    def counter(): # counter() is a closure
        nonlocal i
        i += 1
        return i
    return counter

c1 = make_counter()
c2 = make_counter()

print (c1(), c1(), c2(), c2())
# -> 1 2 1 2 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2008-08-17T19:32:33.160

很简单：一个从包含范围引用变量的函数，可能在控制流离开该范围之后。最后一点非常有用：

```
>>> def makeConstantAdder(x):
...     constant = x
...     def adder(y):
...         return y + constant
...     return adder
... 
>>> f = makeConstantAdder(12)
>>> f(3)
15
>>> g = makeConstantAdder(4)
>>> g(3)
7 
```

请注意，12 和 4 分别在 f 和 g 中“消失”了，这个特性使 f 和 g 成为正确的闭包。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-08-23T07:43:18.127

老实说，我非常了解闭包，只是我一直不清楚究竟什么是“闭包”以及什么是“闭包”。我建议您放弃寻找术语选择背后的任何逻辑。

无论如何，这是我的解释：

```
def foo():
   x = 3
   def bar():
      print x
   x = 5
   return bar

bar = foo()
bar()   # print 5 
```

这里的一个关键思想是，从 foo 返回的函数对象保留了到本地 var 'x' 的钩子，即使 'x' 已经超出范围并且应该已失效。这个钩子是针对 var 本身的，而不仅仅是 var 当时的值，所以当 bar 被调用时，它会打印 5，而不是 3。

还要清楚 Python 2.x 的封闭性有限：我无法修改 'bar' 内的 'x' 因为编写 'x = bla' 会在 bar 中声明一个本地 'x'，而不是分配给 foo 的 'x' . 这是 Python 的 assignment=declaration 的副作用。为了解决这个问题，Python 3.0 引入了 nonlocal 关键字：

```
def foo():
   x = 3
   def bar():
      print x
   def ack():
      nonlocal x
      x = 7
   x = 5
   return (bar, ack)

bar, ack = foo()
ack()   # modify x of the call to foo
bar()   # print 7 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2008-08-17T20:25:18.687

我喜欢[这个粗略、简洁的定义](http://effbot.org/zone/closure.htm)：

> 可以引用不再活动的环境的功能。

我会补充

> 闭包允许您将变量绑定到函数*中，而无需将它们作为参数传递*。

接受参数的装饰器是闭包的常见用途。闭包是这种“函数工厂”的常见实现机制。当策略在运行时被数据修改时，我经常选择在[策略模式中使用闭包。](http://c2.com/cgi/wiki?StrategyPattern)

在允许匿名块定义的语言中——例如，Ruby、C#——闭包可用于实现（相当于）新颖的新控制结构。缺少匿名块是[Python 中闭包的限制之一](http://ivan.truemesh.com/archives/000411.html)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-08-17T20:20:20.333

我从未听说过在解释闭包是什么的相同上下文中使用事务，并且这里实际上没有任何事务语义。

它被称为闭包，因为它“关闭”了外部变量（常量）——即，它不仅仅是一个函数，而是创建函数的环境的封闭。

在下面的例子中，在改变 x 之后调用闭包 g 也会改变 g 中 x 的值，因为 g 在 x 上闭合：

```
x = 0

def f():
    def g(): 
        return x * 2
    return g

closure = f()
print(closure()) # 0
x = 2
print(closure()) # 4 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-23T16:13:53.473

这是闭包的典型用例 - GUI 元素的回调（这将是子类化按钮类的替代方法）。例如，您可以构造一个函数，该函数将响应按钮按下而被调用，并“关闭”父范围内处理单击所需的相关变量。这样，您可以从同一个初始化函数连接相当复杂的接口，将所有依赖项构建到闭包中。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-07-18T03:33:13.887

在 Python 中，闭包是一个函数的实例，它具有不变地绑定到它的变量。

事实上，[数据模型](https://docs.python.org/3.3/reference/datamodel.html#the-standard-type-hierarchy)在其对函数`__closure__`属性的描述中解释了这一点：

> 无或包含函数自由变量绑定**的单元格元组。**只读

为了证明这一点：

```
def enclosure(foo):
    def closure(bar):
        print(foo, bar)
    return closure

closure_instance = enclosure('foo') 
```

显然，我们知道我们现在有一个从变量 name 指向的函数`closure_instance`。从表面上看，如果我们用一个对象来调用它`bar`，它应该打印字符串，`'foo'`以及任何字符串表示形式`bar`。

实际上，字符串 'foo'绑定到函数的实例，我们可以直接在这里读取它，通过访问*属性*`cell_contents`元组中第一个（也是唯一一个）单元格的`__closure__`属性：

```
>>> closure_instance.__closure__[0].cell_contents
'foo' 
```

顺便说一句，C API 文档中描述了单元对象：

> [“Cell”对象用于实现多个作用域引用的变量](https://docs.python.org/2/c-api/cell.html)

我们可以演示闭包的用法，注意它`'foo'`卡在函数中并且不会改变：

```
>>> closure_instance('bar')
foo bar
>>> closure_instance('baz')
foo baz
>>> closure_instance('quux')
foo quux 
```

没有什么可以改变它：

```
>>> closure_instance.__closure__ = None
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: readonly attribute 
```

### 偏函数

给出的示例使用闭包作为部分函数，​​但如果这是我们唯一的目标，同样的目标可以通过`functools.partial`

```
>>> from __future__ import print_function # use this if you're in Python 2.
>>> partial_function = functools.partial(print, 'foo')
>>> partial_function('bar')
foo bar
>>> partial_function('baz')
foo baz
>>> partial_function('quux')
foo quux 
```

还有更复杂的闭包不适合偏函数示例，我将在时间允许的情况下进一步演示它们。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-12-26T16:41:29.813

```
# A Closure is a function object that remembers values in enclosing scopes even if they are not present in memory.

# Defining a closure

# This is an outer function.
def outer_function(message):
    # This is an inner nested function.
    def inner_function():
        print(message)
    return inner_function

# Now lets call the outer function and return value bound to name 'temp'
temp = outer_function("Hello")
# On calling temp, 'message' will be still be remembered although we had finished executing outer_function()
temp()
# Technique by which some data('message') that remembers values in enclosing scopes 
# even if they are not present in memory is called closures

# Output: Hello 
```

**闭包满足的标准是：**

1.  我们必须有嵌套函数。
2.  嵌套函数必须引用封闭函数中定义的值。
3.  封闭函数必须返回嵌套函数。

* * *

```
# Example 2
def make_multiplier_of(n): # Outer function
    def multiplier(x): # Inner nested function
        return x * n
    return multiplier
# Multiplier of 3
times3 = make_multiplier_of(3)
# Multiplier of 5
times5 = make_multiplier_of(5)
print(times5(3)) # 15
print(times3(2)) #  6 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-22T20:16:22.093

这是 Python3 闭包的示例

```
def closure(x):
    def counter():
        nonlocal x
        x += 1
        return x
    return counter;

counter1 = closure(100);
counter2 = closure(200);

print("i from closure 1 " + str(counter1()))
print("i from closure 1 " + str(counter1()))
print("i from closure 2 " + str(counter2()))
print("i from closure 1 " + str(counter1()))
print("i from closure 1 " + str(counter1()))
print("i from closure 1 " + str(counter1()))
print("i from closure 2 " + str(counter2()))

# result

i from closure 1 101
i from closure 1 102
i from closure 2 201
i from closure 1 103
i from closure 1 104
i from closure 1 105
i from closure 2 202 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-20T13:39:53.483

对我来说，“闭包”是能够记住它们创建的环境的功能。此功能允许您在闭包中使用变量或方法，以其他方式，您将无法使用它们，因为它们不再存在或由于范围而超出范围。让我们看一下 ruby​​ 中的这段代码：

```
def makefunction (x)
  def multiply (a,b)
    puts a*b
  end
  return lambda {|n| multiply(n,x)} # => returning a closure
end

func = makefunction(2) # => we capture the closure
func.call(6)    # => Result equal "12" 
```

即使“乘法”方法和“x”变量不再存在，它也可以工作。都是因为要记住的闭包能力。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-17T19:00:31.750

我们都在 python中使用过**装饰器。**它们是展示 Python 中的闭包函数的好例子。

```
class Test():
    def decorator(func):
        def wrapper(*args):
            b = args[1] + 5
            return func(b)
        return wrapper

@decorator
def foo(val):
    print val + 2

obj = Test()
obj.foo(5) 
```

这里的最终值为 12

在这里，wrapper 函数能够访问 func 对象，因为 wrapper 是“词法闭包”，它可以访问它的父属性。这就是为什么它能够访问 func 对象。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-12T04:17:47.993

我想分享我的例子和关于闭包的解释。我做了一个 python 例子，和两个图来演示堆栈状态。

```
def maker(a, b, n):
    margin_top = 2
    padding = 4
    def message(msg):
        print('\n’ * margin_top, a * n, 
            ' ‘ * padding, msg, ' ‘ * padding, b * n)
    return message

f = maker('*', '#', 5)
g = maker('', '♥’, 3)
…
f('hello')
g(‘good bye!') 
```

此代码的输出如下：

```
*****      hello      #####

      good bye!    ♥♥♥ 
```

这里有两个图来显示堆栈和附加到函数对象的闭包。

[当函数从 maker 返回时](https://i.stack.imgur.com/q34kz.jpg)

[稍后调用该函数时](https://i.stack.imgur.com/Jwssu.jpg)

通过参数或非局部变量调用函数时，代码需要margin_top、padding以及a、b、n等局部变量绑定。为了保证函数代码能够正常工作，早就消失的 maker 函数的栈帧应该是可访问的，它与 'message 的函数对象一起备份在闭包中。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2008-09-18T17:10:42.087

我见过的关于闭包的最好解释是解释机制。它是这样的：

将您的程序堆栈想象成一棵退化树，其中每个节点只有一个子节点，而单个叶节点是您当前执行过程的上下文。

现在放宽每个节点只能有一个孩子的约束。

如果你这样做，你可以有一个构造（'yield'），它可以从一个过程返回而不丢弃本地上下文（即当你返回时它不会将它从堆栈中弹出）。下一次调用该过程时，该调用会拾取旧的堆栈（树）帧并从中断处继续执行。

# java - 在 Java 中解析搜索查询

> ID：13863
> 
> 赞同：7
> 
> 时间：2008-08-17T19:21:26.037
> 
> 标签：java, search

我一直在尝试找到一种简单的方法来解析搜索查询并将其转换为我的数据库的 SQL 查询。

我找到了两个解决方案：

1.  *[Lucene](https://lucene.apache.org/)*：强大的基于 Java 的搜索引擎，包含一个查询解析器，但它不是很可配置，我可以找到一种方法来轻松破解/调整它以创建 SQL 查询。
2.  *[ANTLR](http://www.antlr.org/)*：一个资深的文本词法分析器。用于构建从编译器到摩天大楼的任何东西。ANTLR 是高度可配置的，但从现在开始接触代码的每个人都必须学习一门新语言......

还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-30T20:09:50.023

[SQL-ORM](http://sqlorm.sourceforge.net/dynamic_query_builder_doc.html)是一个非常轻量级的 Java 库，它包括在 Java 中将（动态）SQL 查询构造为对象图的能力

恕我直言，这是一种比通常的字符串连接方法更好的构建动态 SQL 查询的技术。

免责声明：我对这个项目做了一些**非常**小的贡献

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-30T19:43:55.280

您可以尝试使用[javacc](https://javacc.java.net/) (Java Compiler Compiler) 之类的东西来实现解析器，或者只是通过蛮力手动解析字符串。每次遇到表达式时，都将其表示为对象。然后，您只需要将表达式树转换为 where 子句。

例如：“哈利波特”变成

```
new AndExp(new FieldContainsExp("NAME", "Harry"), new FieldContainsExp("NAME", "Potter") 
```

并且“publisher:Nature* pages > 100”变成

```
new AndExp(new FieldContainsExp("PUBLISHER", "Nature"), FieldGreaterThan("PAGES", 100)) 
```

然后，一旦你有了这些，就很容易把它们变成 SQL：

```
FieldContainsExp.toSQL(StringBuffer sql, Collection<Object> args) {
  sql.append(fieldName);
  sql.append(" like ");
  sql.append("'%?%'");
  args.add(value);
}

AndExp.toSQL(StringBuffer sql, Collection<Object> args) {
    exp1.toSQL(sql, args);
    sql.append(" AND ");
    exp2.toSQL(sql, args);
} 
```

你可以想象剩下的。您可以随意嵌套 And 表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-17T19:30:37.063

你到底有什么想法？我已经使用 Lucene 进行文本搜索，但它擅长的是构建索引并搜索它，*而不是*完全访问数据库。

我最近建立了一个系统，通过将所有列（用空格分隔）连接到一个字段中，然后将其弹出到 Lucene 中，然后在单独的列中添加主键，我在 Lucene 中索引了一个表。Lucene 完成所有搜索并返回一个主键列表，我用它来提取一组填充的结果并显示给用户。

将搜索查询转换为 SQL 语句在我看来有点混乱。

此外，这是[一个很好的入门教程，解释了 Lucene 的基本结构](http://www.darksleep.com/lucene/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-18T17:50:11.917

尝试结合使用 ORM 工具（如 openJPA）和 Compass（OSEM 框架）。它会自动索引通过 ORM 工具完成的更新，并为您提供 Lucene 搜索功能。之后，您当然可以从数据库中检索对象。它优于任何基于 SQL 的搜索解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-17T19:28:04.760

很大程度上取决于您必须解析的查询类型，并且在某种程度上取决于数据库中数据的结构。我将假设您不会尝试在数据库中进行全文搜索（即整个数据库中的搜索引擎），因为正如大多数信息检索人员会告诉您的那样，这样做的性能很糟糕。倒排索引无疑是最好的方法。

告诉我们更多关于实际问题的信息：用户将输入什么，他们期望输出什么，以及数据模型是什么样的。在没有这些信息的情况下设计一个搜索解决方案，您将获得远离最佳结果的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-17T19:37:41.620

您认为我不是在寻找全文搜索是正确的。该信息类似于图书信息的以下架构：名称：字符串，出版商：字符串，num_pages int，publish_date：date ...

搜索查询是这样的：

1.  **哈利波特**（搜索任何名字中同时包含哈利和波特的书籍）
2.  **publisher:Nature*** pages>100（来自以 Nature 开头的出版商的书籍，超过 100 本书）
3.  **（“新年”或圣诞节）和礼物**（你明白了......）
4.  **物理和出版>2008 年 1 月 1 日**（新物理书籍）

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-09-27T12:45:08.783

字符串 [] 数组；

```
int checkWord(String searchWord)
{
    for(int i = 0; i < array.length; i++)
    {
        if(searchWord.equals(array[i]))
            return i;
    }
    return 0;

} 
```

# api - Picasa 插件入门

> ID：13881
> 
> 赞同：5
> 
> 时间：2008-08-17T19:39:51.697
> 
> 标签：api, plugins, picasa, photo-management

这里有人知道如何开始为 Google 的 Picasa 编写插件的任何资源吗？我喜欢它用于照片管理，但我有一些关于如何更好的想法。

*   Riya-esque 面部搜索：给定足够大的面部和图片语料库（人们往往会在个人的相册（家人、朋友）中经常重复出现，我认为可以完成一些半可行的版本。并且 13+ gigs/7 年的照片，很适合搜索。
*   上传到 Facebook 编辑： [有人已经做了一个非常好的版本](http://apps.new.facebook.com/picasauploader/)
*   实际上，上传到任何非 Google 资源。

我知道那里有某些 API 和 Picasa2Flickr 插件，我想知道是否有人看过有关此主题的任何资源或有任何经验

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-17T22:41:06.087

有一个[开源项目](http://picasa2flickr.sourceforge.net/index.html#about)创建了一个“上传到 FlickR”插件。也许你可以把它作为一个起点......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-18T08:19:44.487

很多年前我就想到了面部识别，但我的搜索只找到了一个 Web API - 没有插件 API。我的想法是使用外部面部识别程序来慢慢索引我的整个图片目录，并根据其中的人物可靠地标记它们。它不需要 100% 准确，但任何超过 85% 的结果都是可以接受的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-08-17T19:43:53.527

我将从 Picasa API 开始：

[Picasa API](http://code.google.com/apis/picasaweb/overview.html)

# deployment - 如何制作自定义 .net 客户端配置文件安装程序？

> ID：13893
> 
> 赞同：4
> 
> 时间：2008-08-17T20:03:22.600
> 
> 标签：deployment, .net-3.5, installation, .net-client-profile

对于 .net 3.5 SP1，Microsoft 有新的客户端配置文件，它仅将 .net 3.5 SP1 的一个子集安装到 Windows XP 用户的计算机上。

我知道如何准备我的程序集客户端配置文件。我已经阅读了有关如何为[ClickOnce](http://msdn.microsoft.com/en-us/library/cc656916.aspx)或[MSI](http://msdn.microsoft.com/en-us/library/cc656819.aspx)实施安装程序的文章。

但到目前为止，我一直在为我的项目使用 Inno Setup，并且我想继续使用它（作为 Express 用户，我无法轻松制作 MSI），我需要知道如何使用客户端配置文件安装程序在自定义环境中。

有[一篇](http://msdn.microsoft.com/en-us/library/cc656920.aspx)关于 Deployment.xml 架构的文章，但没有说明如何编写、打包或其他任何内容。有人可以解释这个过程吗？查找我单独链接的文章是一种痛苦的搜索体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T02:02:19.423

Microsoft 现已发布客户端配置文件配置设计器 (Beta)。

此设计器允许您编辑 XML 文件，但有一些限制，这绝不是“Google 测试版”。

[资料及下载](http://windowsclient.net/wpf/wpf35/wpf-35sp1-client-profile-config-overview.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-17T21:02:04.820

您能否澄清一下：您是否正在尝试为您的应用程序编写一个安装程序，这取决于客户端配置文件，或者您是否正在尝试*为*客户端配置文件编写一个自定义安装程序？

我没有亲自使用过它，但是如果它类似于 dotnetfx 1 和 2 msi，您基本上只需在 InstallExecuteSequence 启动之前从您自己的 .exe 文件或从 Msi 调用它的可执行文件 - 您不能将这些“嵌入”到您自己的应用程序中，MS 会竭尽全力告诉您不要这样做，因为 MSI 很糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T16:24:23.117

客户端配置文件仅适用于干净的 XP。如果您的用户安装为 .Net 1 或 2，则客户端配置文件不会安装...

您有一个离线版本（集成完整的 .Net3.5 安装以防客户端无法安装）200 到 300Mo 不记得在线版本将获得所需的文件。

您可以从安装的第一步调用静默安装。

# cocoa - 在 Cocoa 中，我是否需要在释放对象时从接收 KVO 通知中删除它？

> ID：13927
> 
> 赞同：23
> 
> 时间：2008-08-17T21:05:13.083
> 
> 标签：cocoa, macos

当我注册一个对象**foo以从另一个对象****bar**接收 KVO 通知时（使用 addObserver:...），如果我随后解除分配**foo**是否需要在 -dealloc 中向**bar**发送`removeObserver:forKeyPath:`消息？

 *** * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-08-18T00:33:13.943

您需要在运行`-removeObserver:forKeyPath:`之前使用删除观察者`-[NSObject dealloc]`，所以是的，在`-dealloc`您的类的方法中这样做会起作用。

比这更好的是有一个确定性的点，任何拥有正在执行观察的对象的东西都可以告诉它它已经完成并且（最终）将被释放。这样，当不再需要进行观察的事物时，您可以立即停止观察，而不管它何时实际被释放。

记住这一点很重要，因为 Cocoa 中对象的生命周期并不像某些人认为的那样具有确定性。各种 Mac OS X 框架本身**将**发送您的对象`-retain`，并`-autorelease`延长它们的生命周期，超出您的预期。

此外，当您过渡到 Objective-C 垃圾收集时，您会发现`-finalize`它将在非常不同的时间运行 - 并且在非常不同的上下文中 - 与以前相比`-dealloc`。一方面，终结发生在不同的线程上，所以你真的**不能**安全地发送`-removeObserver:forKeyPath:`到`-finalize`方法中的另一个对象。

坚持 and 中的内存（和其他稀缺资源）管理，`-dealloc`并`-finalize`使用单独的`-invalidate`方法让所有者告诉对象您在确定的点上完成了它；做一些事情，比如删除那里的 KVO 观察。代码的意图会更清晰，需要处理的细微错误也会更少。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-29T15:56:34.167

我从痛苦的经历中获得了一些额外的信息：虽然 NSNotificationCenter 在垃圾收集下运行时使用归零弱引用，但 KVO 没有。因此，您可以在使用 GC 时不移除 NSNotificationCenter 观察者（当使用保留/释放时，您仍然需要移除您的观察者），但您仍然必须移除您的 KVO 观察者，正如 Chris 所描述的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T18:16:34.263

绝对同意 Chris 关于“在 -dealloc 和 -finalize... 中坚持记忆（和其他稀缺资源）管理”的评论。很多时候，我会看到人们试图在他们的 dealloc 函数中使 NSTimer 对象无效。问题是，NSTimer 保留了它的目标。因此，如果 NSTimer 的目标是 self，则永远不会调用 dealloc，从而导致一些潜在的令人讨厌的内存泄漏。

无效并在您的和中`-invalidate`进行其他内存清理`dealloc``finalize.`**

# visual-studio - 如何在 Visual Studio 中分别在不同文件夹/项目中运行（单元）测试？

> ID：13938
> 
> 赞同：4
> 
> 时间：2008-08-17T21:21:07.670
> 
> 标签：visual-studio, unit-testing, configuration, vsx, extensibility

![Visual Studio 文件夹结构](../Images/c2bdba9bebf53478b6226bdfe5ba1e09.png)

我需要一些关于如何在 Visual Studio 中轻松分离单元测试和集成测试的测试运行的建议。通常，或总是，我按照上图所示构建解决方案：单元测试和集成测试的单独项目。单元测试运行非常频繁，而集成测试自然会在上下文正确对齐时运行。

我的目标是在我使用键盘快捷键时能够以某种方式配置要运行的测试（或测试文件夹）。测试最好由图形测试运行程序 (ReSharpers) 运行。所以例如

*   Alt+1 在项目 BLL.Test 中运行测试，
*   Alt+2 在项目 DAL.Tests 中运行测试，
*   Alt+3 同时运行它们（即 [Tests] 文件夹中的所有测试，以及
*   Alt+4 运行文件夹 [Tests.Integration] 中的测试。

TestDriven.net 可以选择只运行所选文件夹或项目中的测试，方法是右键单击它并选择 Run Test(s)。能够做到这一点，但通过键盘命令和图形测试运行器会很棒。

![TestDriven.net 测试运行输出](../Images/eeabc66b28f438b23dcbad2eb13b2714.png)

目前我使用 VS2008、ReSharper 4 和 nUnit。但是，一般设置的建议当然也值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-17T22:08:13.627

实际上，我通过使用绑定到宏的键盘命令自己找到了一种解决方案。宏是从菜单工具>宏>记录临时宏中记录的。在录制时，我选择了我的 [Tests] 文件夹并运行了 ReSharpers UnitTest.ContextRun。这导致了以下宏，

```
Sub TemporaryMacro()
    DTE.Windows.Item(Constants.vsWindowKindSolutionExplorer).Activate
    DTE.ActiveWindow.Object.GetItem("TestUnitTest\Tests").Select(vsUISelectionType.vsUISelectionTypeSelect)
    DTE.ExecuteCommand("ReSharper.UnitTest_ContextRun")
End Sub 
```

然后在工具>选项>环境>键盘中绑定到它自己的键盘命令。

然而，更棒的是一个更通用的解决方案，我可以准确地配置要运行的项目/文件夹/类以及何时运行。例如通过 xml 文件。然后可以轻松地将其签入版本控制并分发给与该项目一起工作的每个人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-17T21:52:03.737

这是一个有点繁琐的解决方案，但是您可以为要运行的每组测试配置一些[外部工具。](http://blogs.msdn.com/saraford/archive/2008/04/24/did-you-know-you-can-run-external-tools-within-visual-studio-201.aspx)我不确定您是否能够以这种方式启动 ReSharper 测试运行程序，但您可以运行 nunit 的控制台版本。完成这些工具设置后，您可以为命令“Tools.ExternalCommand1”、“Tools.ExternalCommand2”等分配键盘快捷键。

这不会很好地扩展，而且改变起来很尴尬 - 但它会给你键盘快捷键来运行你的测试。确实感觉应该有一种更简单的方法来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T01:47:11.017

您可以使用 VS 宏来解析 XML 文件，然后使用 /fixture 命令行参数调用 nunit.exe 以指定要运行的类或生成选择保存文件并使用该文件运行 nunit。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-25T04:03:06.313

我从来没有用过这个，但也许它可以帮助....

[http://www.codeplex.com/VS2008UnitTestGUI](http://www.codeplex.com/VS2008UnitTestGUI)

“项目描述这个项目是关于在使用 Visual Studio 2008 编码的多个 .NET 单元测试程序集中运行所有单元测试。”

# python - 蟒蛇之声（“钟声”）

> ID：13941
> 
> 赞同：68
> 
> 时间：2008-08-17T21:33:39.780
> 
> 标签：python, macos, audio, terminal

我想让一个 python 程序在它完成任务时发出哔哔声来提醒我。目前，我使用`import os`然后使用命令行语音程序说“处理完成”。我宁愿它是一个简单的“铃铛”。

*我知道Cocoa*应用程序中可以使用一个功能`NSBeep`，但我认为这与此没有太大关系。

我也试过

```
print(\a) 
```

但这没有用。

我正在使用 Mac，如果您无法通过我的*Cocoa*评论来判断，那么这可能会有所帮助。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2008-08-17T21:46:02.533

你有没有尝试过 ：

```
import sys
sys.stdout.write('\a')
sys.stdout.flush() 
```

这在 Mac OS 10.5 上对我有用

实际上，我认为您最初的尝试也可以稍作修改：

```
print('\a') 
```

（您只需要字符序列周围的单引号）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-29T15:47:05.843

如果您安装了 PyObjC（Python - Objective-C 桥）或正在 OS X 10.5 的系统 python（PyObjC 附带）上运行，您可以这样做

```
from AppKit import NSBeep
NSBeep() 
```

播放系统警报。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2011-05-24T12:14:54.530

我尝试了 pygame 模块中的混音器，它工作正常。首先安装模块：

```
$ sudo apt-get install python-pygame 
```

然后在程序中，这样写：

```
from pygame import mixer
mixer.init() #you must initialize the mixer
alert=mixer.Sound('bell.wav')
alert.play() 
```

使用 pygame，你有很多自定义选项，你可以另外尝试。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-08-17T21:56:10.750

我必须在 iTerm 的活动终端配置文件中关闭“静音终端铃”选项`print('\a')`才能工作。默认情况下，它在终端中似乎工作正常。

您也可以使用 Mac 模块`Carbon.Snd`播放系统提示音：

```
>>> import Carbon.Snd
>>> Carbon.Snd.SysBeep(1)
>>> 
```

Carbon 模块没有任何文档，所以我不得不使用它`help(Carbon.Snd)`来查看可用的功能。它似乎是 Carbon 的直接接口，因此 Apple Developer Connection 上的文档可能会有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-14T09:37:20.923

以 Barry Wark 的回答为基础...... `NSBeep()`来自 AppKit 的工作正常，但也会使任务栏中的终端/应用程序图标跳转。一些额外的行`NSSound()`避免了这种情况，并提供了使用另一种声音的机会：

```
from AppKit import NSSound
#prepare sound:
sound = NSSound.alloc()
sound.initWithContentsOfFile_byReference_('/System/Library/Sounds/Ping.aiff', True)
#rewind and play whenever you need it:
sound.stop() #rewind
sound.play() 
```

可以通过命令行找到标准声音文件`locate /System/Library/Sounds/*.aiff` 使用的文件`NSBeep()`似乎是`'/System/Library/Sounds/Funk.aiff'`

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2020-04-09T05:23:57.047

[![使用 beepy 模块中的“哔”功能，您可以听到下面屏幕截图中提到的声音。](../Images/bcd6f5be910f1f6a5bfd422e001eaf3a.png)](https://i.stack.imgur.com/1HbxF.jpg)

从哔哔声模块中，您可以选择您喜欢的声音

# c# - C#中文本文件解析的最佳方法？

> ID：13963
> 
> 赞同：9
> 
> 时间：2008-08-17T22:02:31.097
> 
> 标签：c#, fileparse

我想解析一个配置文件排序的东西，像这样：

```
[KEY:Value]     
    [SUBKEY:SubValue] 
```

现在我从 开始`StreamReader`，将行转换为字符数组，当我认为必须有更好的方法时。所以我请求你，谦虚的读者，来帮助我。

一个限制是它必须在 Linux/Mono 环境中工作（准确地说是 1.2.6）。我没有最新的 2.0 版本（Mono），因此请尝试将语言功能限制为 C# 2.0 或 C# 1.0。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-17T22:39:50.833

> 我考虑过，但我不会使用 XML。我将要手动编写这些东西，而手动编辑 XML 让我很头疼。:')

你看过[YAML](http://www.yaml.org/)吗？

您可以享受 XML 的好处，而无需承受所有的痛苦。它在 ruby​​ 社区中被广泛用于配置文件、预先准备好的数据库数据等

这是一个例子

```
customer:
  name: Orion
  age: 26
  addresses:
    - type: Work
      number: 12
      street: Bob Street
    - type: Home
      number: 15
      street: Secret Road 
```

这里似乎有一个[C# 库](http://yaml-net-parser.sourceforge.net/default.html)，我没有亲自使用过，但是 yaml 很简单，所以“它有多难？” :-)

我会说最好发明自己的临时格式（并处理解析器错误）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-17T22:25:55.433

前几天我几乎在研究这个确切的问题：[这篇](http://trackerrealm.com/blogs/2007/04/tokenize-string-with-c-regular.html)关于字符串标记的文章正是你所需要的。您需要将令牌定义为：

```
@"(?&ltlevel>\s) | " +
@"(?&ltterm>[^:\s]) | " +
@"(?&ltseparator>:)" 
```

这篇文章很好地解释了它。从那里你开始吃你认为合适的代币。

Protip：对于[LL(1) 解析器](http://en.wikipedia.org/wiki/LL_parser)（阅读：easy），标记不能共享前缀。如果你有`abc`作为令牌，你就不能`ace`作为令牌

注意：文章缺少 | 示例中的字符，只需将它们放入即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-18T00:35:36.310

使用库几乎总是比自己滚动更好。这是“哦，我永远不需要那个/我没想到那个”点的快速列表，这些点最终会在以后咬你：

*   转义字符。如果你想要 : 在键或 ] 值怎么办？
*   转义转义字符。
*   统一码
*   制表符和空格的混合（请参阅 Python 的空格敏感语法问题）
*   处理不同的返回字符格式
*   处理语法错误报告

就像其他人建议的那样，YAML 看起来是您最好的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-26T23:33:36.833

There is [another YAML library for .NET](http://yamldotnet.wiki.sourceforge.net/) which is under development. Right now it supports reading YAML streams and has been tested on Windows and Mono. Write support is currently being implemented.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-17T22:12:15.740

在我看来，您最好使用基于 XML 的配置文件，因为已经有 .NET 类可以相对轻松地为您读取和存储信息。这是不可能的吗？

@伯纳德： ~~手动编辑 XML 确实很乏味，但您呈现的结构已经看起来与 XML 非常相似。~~

那么是的，那里有一个好方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-17T22:12:19.267

您还可以使用堆栈，并使用推送/弹出算法。这个匹配打开/关闭标签。

```
public string check()
    {
        ArrayList tags = getTags();

        int stackSize = tags.Count;

        Stack stack = new Stack(stackSize);

        foreach (string tag in tags)
        {
            if (!tag.Contains('/'))
            {
                stack.push(tag);
            }
            else
            {
                if (!stack.isEmpty())
                {
                    string startTag = stack.pop();
                    startTag = startTag.Substring(1, startTag.Length - 1);
                    string endTag = tag.Substring(2, tag.Length - 2);
                    if (!startTag.Equals(endTag))
                    {
                        return "Fout: geen matchende eindtag";
                    }
                }
                else
                {
                    return "Fout: geen matchende openeningstag";
                }
            }
        }

        if (!stack.isEmpty())
        {
            return "Fout: geen matchende eindtag";
        }            
        return "Xml is valid";
    } 
```

您可能可以适应，以便您可以阅读文件的内容。正则表达式也是一个好主意。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T07:52:29.237

@Gishu

实际上，一旦我适应了转义字符，我的正则表达式的运行速度比我的手写自上而下递归解析器稍慢，而且没有嵌套（将子项链接到它们的父项）和错误报告手写解析器有。

正则表达式的编写速度稍快（尽管我确实有一些手动解析器的经验），但这并没有很好的错误报告。一旦你添加它，它就会变得稍微困难​​和更长的时间。

我还发现手写解析器更容易理解其意图。例如，这里是一段代码：

```
private static Node ParseNode(TextReader reader)
{
    Node node = new Node();
    int indentation = ParseWhitespace(reader);
    Expect(reader, '[');
    node.Key = ParseTerminatedString(reader, ':');
    node.Value = ParseTerminatedString(reader, ']');
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-08-18T07:22:11.950

无论持久化格式如何，使用正则表达式都是最快的解析方式。在 ruby​​ 中，它可能是几行代码。

```
\[KEY:(.*)\] 
\[SUBKEY:(.*)\] 
```

这两个将为您提供第一组中的 Value 和 SubValue。查看 MSDN，了解如何将正则表达式与字符串匹配。

这是每个人都应该在他们的小猫身上拥有的东西。正则表达式之前的日子看起来就像冰河时代。

# c - 如何从 C 级代码访问 Ruby AST？

> ID：13981
> 
> 赞同：2
> 
> 时间：2008-08-17T22:23:58.790
> 
> 标签：c, ruby, tree, interpreter

我知道`Ruby 1.8 AST`在运行时使用大 switch 语句遍历，并且许多事情，比如在类或父模块中调用方法，都需要解释器在树上上下查找。有没有一种直接的方法可以`AST`在`Ruby C`扩展中访问它？它是否涉及 Ruby 扩展 API，或者需要直接破解内部数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-17T22:36:13.103

一个很好的起点可能是阅读[ParseTree](http://rubyforge.org/projects/parsetree/)库的源代码，它可以让您从 ruby​​ 中获取和处理 AST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-18T12:11:19.837

谢谢你的提示。你是对的 -`ParseTree`似乎是唯一可以对 AST 进行任何操作的代码，除了它实际上是用 RubyInline 编写的。

因此，这是 Ruby 和 C 代码之间的奇怪混合。非常有趣的阅读，虽然。

另一个参考当然是来自 Ruby 本身的 eval.c。

这将需要对两者进行相当多的阅读，才能理解它。