# StackOverflow 问答 11002000-11002999

# hadoop - NLineInputFormat 没有效果

> ID：11002000
> 
> 赞同：3
> 
> 时间：2012-06-12T17:46:19.613
> 
> 标签：hadoop, mapreduce

我正在使用 Hadoop 0.20.2，并且正在使用旧 API。我正在尝试将大块数据发送到映射器，而不是一次发送一行（数据涵盖多行）。我尝试使用 NLineInputFormat 设置一次获取多少行，但映射器一次仍然只接收 1 行。我很确定我有正确的代码。是否有任何原因导致这无法正常工作？

供你参考，

> JobConf conf = new JobConf(WordCount.class);
> 
> conf.setInt("mapred.line.input.format.linespermap", 2);
> 
> conf.setInputFormat(NLineInputFormat.class);

基本上，我使用来自[http://hadoop.apache.org/common/docs/r0.20.2/mapred_tutorial.html#Example%3A+WordCount+v1.0](http://hadoop.apache.org/common/docs/r0.20.2/mapred_tutorial.html#Example%3A+WordCount+v1.0)的示例代码，仅更改 TextInputFormat。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:01:09.927

NLineInputFormat 旨在确保所有映射器都接收相同数量的输入记录（每个文件拆分的最后部分除外）。

因此，通过将输入属性更改为 2，每个映射器应该（最多）接收 2 个输入对，而不是一次接收 2 个输入行（这是我认为您正在寻找的）。

您应该能够通过查看每个映射任务的计数器来确认这一点，“*映射输入记录*”应该为大多数映射器报告 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T06:27:55.727

我最近通过简单地创建自己的 InputFormat 来解决这个问题，它覆盖 NLineInputFormat 并实现自定义 MultiLineRecordReader 而不是默认的 LineReader。

我选择扩展 NLineInputFormat 是因为我希望获得相同的保证，即每次拆分恰好有 N 行。

这个记录阅读器几乎是从[http://bigdatacircus.com/2012/08/01/wordcount-with-custom-record-reader-of-textinputformat/](http://bigdatacircus.com/2012/08/01/wordcount-with-custom-record-reader-of-textinputformat/)

我唯一修改的是`maxLineLength`现在使用新 API 的属性，它的值是`NLINESTOPROCESS`从 NLineInputFormat 的`setNumLinesPerSplit()`硬编码中读取的（以获得更大的灵活性）。

结果如下：

```
public class MultiLineInputFormat extends NLineInputFormat{
    @Override
    public RecordReader<LongWritable, Text> createRecordReader(InputSplit genericSplit, TaskAttemptContext context) {
        context.setStatus(genericSplit.toString());
        return new MultiLineRecordReader();
    }

    public static class MultiLineRecordReader extends RecordReader<LongWritable, Text>{
        private int NLINESTOPROCESS;
        private LineReader in;
        private LongWritable key;
        private Text value = new Text();
        private long start =0;
        private long end =0;
        private long pos =0;
        private int maxLineLength;

        @Override
        public void close() throws IOException {
            if (in != null) {
                in.close();
            }
        }

        @Override
        public LongWritable getCurrentKey() throws IOException,InterruptedException {
            return key;
        }

        @Override
        public Text getCurrentValue() throws IOException, InterruptedException {
            return value;
        }

        @Override
        public float getProgress() throws IOException, InterruptedException {
            if (start == end) {
                return 0.0f;
            }
            else {
                return Math.min(1.0f, (pos - start) / (float)(end - start));
            }
        }

        @Override
        public void initialize(InputSplit genericSplit, TaskAttemptContext context)throws IOException, InterruptedException {
            NLINESTOPROCESS = getNumLinesPerSplit(context);
            FileSplit split = (FileSplit) genericSplit;
            final Path file = split.getPath();
            Configuration conf = context.getConfiguration();
            this.maxLineLength = conf.getInt("mapreduce.input.linerecordreader.line.maxlength",Integer.MAX_VALUE);
            FileSystem fs = file.getFileSystem(conf);
            start = split.getStart();
            end= start + split.getLength();
            boolean skipFirstLine = false;
            FSDataInputStream filein = fs.open(split.getPath());

            if (start != 0){
                skipFirstLine = true;
                --start;
                filein.seek(start);
            }
            in = new LineReader(filein,conf);
            if(skipFirstLine){
                start += in.readLine(new Text(),0,(int)Math.min((long)Integer.MAX_VALUE, end - start));
            }
            this.pos = start;
        }

        @Override
        public boolean nextKeyValue() throws IOException, InterruptedException {
            if (key == null) {
                key = new LongWritable();
            }
            key.set(pos);
            if (value == null) {
                value = new Text();
            }
            value.clear();
            final Text endline = new Text("\n");
            int newSize = 0;
            for(int i=0;i<NLINESTOPROCESS;i++){
                Text v = new Text();
                while (pos < end) {
                    newSize = in.readLine(v, maxLineLength,Math.max((int)Math.min(Integer.MAX_VALUE, end-pos),maxLineLength));
                    value.append(v.getBytes(),0, v.getLength());
                    value.append(endline.getBytes(),0, endline.getLength());
                    if (newSize == 0) {
                        break;
                    }
                    pos += newSize;
                    if (newSize < maxLineLength) {
                        break;
                    }
                }
            }
            if (newSize == 0) {
                key = null;
                value = null;
                return false;
            } else {
                return true;
            }
        }
    }

} 
```

# jquery - 用户使用 CAS 登录时访问 gmail atom 提要

> ID：11002002
> 
> 赞同：1
> 
> 时间：2012-06-12T17:46:25.340
> 
> 标签：jquery, gmail, cas, atom-feed

我正在研究liferay门户。用户通过 CAS 登录登录到门户，同样的 CAS 登录也将用户登录到他们的 gmail 帐户（单点登录）。密码不会从 ldap 导入门户，因此我无权访问用户密码。我希望将 gmail atom 提要放在门户首页。用户将通过 CAS 登录登录到门户网站，他们可以在门户网站的首页上查看他们是否有未读消息。如果我使用服务器端代码访问 atom 提要，那么我需要向它提供我无权访问的 gmail 用户名和密码。所以，我想使用 javascript / jquery 并通过客户端代码访问 atom 提要（一旦用户使用 CAS 登录，通过浏览器访问 gmail atom 提要时它不会要求输入密码）。但我现在意识到我受到跨域策略的限制，因此客户端对提要的 ajax 调用将无法正常工作。如果用户已经通过 CAS 进行了身份验证，但我无法明确向 gmail 提供密码，是否还有其他解决方案？

# vb6 - Windows 服务的两个不同名称 (VB6)

> ID：11002007
> 
> 赞同：1
> 
> 时间：2012-06-12T17:46:54.980
> 
> 标签：vb6, windows-services, windows-server-2003, windows-server-2000

我在自动启动和停止服务时遇到了一个小问题。当我打开`services.msc`并查看服务列表时，它们都有名称。但是，当我运行此代码时：

```
Dim objService As Object
Dim objSet As Object
IsServiceRunning = False
Set objSet = GetObject("winmgmts:").ExecQuery("SELECT * FROM Win32_Service")
For Each objService In objSet
    If (UCase(strServiceName) = UCase(objService.Name)) And (UCase(objService.State) = UCase("Running")) Then
        IsServiceRunning = True
    End If
Next 
```

该`objService.Name`值与列表中的名称不同。例如，“计算机浏览器”就是“浏览器”，“分布式文件系统”就是“dfs”，“Net Logon”就是“netlogon”。有没有办法从这个 objService 对象中提取这些服务的完整、更长的名称？我可以解决这个问题，但为了代码清晰起见，我宁愿使用相同的值来确定服务是否正在运行、进行`NET START`或`NET STOP`命令行调用以及日志记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:50:03.580

Just use `objService.Caption` to access "long name" of service.

I discovered the name of the property like this:

```
For Each objService In objSet
    For Each vElem In objService.Properties_
        Debug.Print vElem.Name; "=";
        Debug.Print vElem.Value
    Next
    Exit For
    ...
Next 
```

Just put `objService` in watch window to find out `Properties_` property. Put `vElem` in watch window too to find `Name` and the default property `Value` (besides `IsArray`, etc.) of `SWbemProperty` object.

# concurrency - X10 并行处理共享变量

> ID：11002010
> 
> 赞同：2
> 
> 时间：2012-06-12T17:47:13.920
> 
> 标签：concurrency, parallel-processing, x10-language

如果我的问题不专业，请见谅。我正在阅读 IBM x10 的教程。这是计算 PI 但让我感到困惑的代码：

```
public static def countPoints(n: Int, rand: ()=>Double) {
 var inCircle: Double = 0.0;
 for (var j:Long = 1; j<=n; j++) {
    val x = rand();
    val y = rand();
    if (x*x +y*y <= 1.0) inCircle++;
 }
    return inCircle;
}

val N = args.size() > 0 ? Long.parse(args(0)) : 100000;
 val THREADS = args.size() > 1 ? Int.parse(args(1)) : 4;
 val nPerThread = N/THREADS;
 val inCircle = new Array[Long](1..THREADS);
 finish for(var k: Int =1; k<=THREADS; k++) {
     val r = new Random(k*k + k + 1);
     val rand = () => r.nextDouble();
     val kk = k;
     async inCircle(kk) = countPoints(nPerThread,rand);
 }
 var totalInCircle: Long = 0;
 for(var k: Int =1; k<=THREADS; k++) {
     totalInCircle += inCircle(k);
}
val pi = (4.0*totalInCircle)/N; 
```

程序本身并不难，我的问题是，由于在每个 countPoints() 调用它重复调用参数 rand，并且在产生多线程之前，只创建一个 rand，不同的线程会共享相同的 rand 并产生竞争条件吗？如果不是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:16:23.300

很好，您担心这里可能存在竞争条件。它在随机数生成器的并行调用中经常被忽略。

幸运的是，这个例子没有 RNG 竞争条件。for 循环的每次迭代`k`都会创建一个随机数生成器的新实例（并为其播种）并产生一个线程。由于`countPoints`调用了自己的 RNG，因此这里没有竞争条件。

# php - IE9 - PHP 中的 Valums Fileupload 问题？

> ID：11002012
> 
> 赞同：0
> 
> 时间：2012-06-12T17:47:27.837
> 
> 标签：php, file-upload, internet-explorer-9

我正在努力使用 Valumx 出色的文件上传。我已经使用它几年了，直到最近才意识到它在 IE9 中不起作用。

我在这里找到了几个答案，但似乎无法弄清楚如何在我的 PHP 项目中实现它。

这里应该有答案：[Valums file-uploader doesn't work under Internet Explorer 9](https://stackoverflow.com/questions/9882692/valums-file-uploader-doesnt-work-under-internet-explorer-9)

但我不知道在哪里放什么，让它工作。

谁能帮我，写一个 Valums+IE9+PHP-for-dummies？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T21:02:42.400

这似乎是 IE 缓存问题，如果您使用的是 Ajax 和 GET，请在 Ajax 参数的 get 参数中添加时间戳值，这将起到如下作用：

```
$.ajax({
  url : "http:'//myexampleurl.php' + '?ts=' + new Date().getTime(),
  dataType: "json",
  contentType: "application/json; charset=utf-8", 
  .
  .
  //more stuff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:54:02.840

当你从 GitHub 下载 Valums File Uploader 包时，你还会发现这个包带有[一个 PHP 示例](https://github.com/valums/file-uploader/blob/master/server/php.php)，我在这里转储：

```
<?php

/**
 * Handle file uploads via XMLHttpRequest
 */
class qqUploadedFileXhr {
    /**
     * Save the file to the specified path
     * @return boolean TRUE on success
     */
    function save($path) {    
        $input = fopen("php://input", "r");
        $temp = tmpfile();
        $realSize = stream_copy_to_stream($input, $temp);
        fclose($input);

        if ($realSize != $this->getSize()){            
            return false;
        }

        $target = fopen($path, "w");        
        fseek($temp, 0, SEEK_SET);
        stream_copy_to_stream($temp, $target);
        fclose($target);

        return true;
    }
    function getName() {
        return $_GET['qqfile'];
    }
    function getSize() {
        if (isset($_SERVER["CONTENT_LENGTH"])){
            return (int)$_SERVER["CONTENT_LENGTH"];            
        } else {
            throw new Exception('Getting content length is not supported.');
        }      
    }   
}

/**
 * Handle file uploads via regular form post (uses the $_FILES array)
 */
class qqUploadedFileForm {  
    /**
     * Save the file to the specified path
     * @return boolean TRUE on success
     */
    function save($path) {
        if(!move_uploaded_file($_FILES['qqfile']['tmp_name'], $path)){
            return false;
        }
        return true;
    }
    function getName() {
        return $_FILES['qqfile']['name'];
    }
    function getSize() {
        return $_FILES['qqfile']['size'];
    }
}

class qqFileUploader {
    private $allowedExtensions = array();
    private $sizeLimit = 10485760;
    private $file;

    function __construct(array $allowedExtensions = array(), $sizeLimit = 10485760){        
        $allowedExtensions = array_map("strtolower", $allowedExtensions);

        $this->allowedExtensions = $allowedExtensions;        
        $this->sizeLimit = $sizeLimit;

        $this->checkServerSettings();       

        if (isset($_GET['qqfile'])) {
            $this->file = new qqUploadedFileXhr();
        } elseif (isset($_FILES['qqfile'])) {
            $this->file = new qqUploadedFileForm();
        } else {
            $this->file = false; 
        }
    }

    private function checkServerSettings(){        
        $postSize = $this->toBytes(ini_get('post_max_size'));
        $uploadSize = $this->toBytes(ini_get('upload_max_filesize'));        

        if ($postSize < $this->sizeLimit || $uploadSize < $this->sizeLimit){
            $size = max(1, $this->sizeLimit / 1024 / 1024) . 'M';             
            die("{'error':'increase post_max_size and upload_max_filesize to $size'}");    
        }        
    }

    private function toBytes($str){
        $val = trim($str);
        $last = strtolower($str[strlen($str)-1]);
        switch($last) {
            case 'g': $val *= 1024;
            case 'm': $val *= 1024;
            case 'k': $val *= 1024;        
        }
        return $val;
    }

    /**
     * Returns array('success'=>true) or array('error'=>'error message')
     */
    function handleUpload($uploadDirectory, $replaceOldFile = FALSE){
        if (!is_writable($uploadDirectory)){
            return array('error' => "Server error. Upload directory isn't writable.");
        }

        if (!$this->file){
            return array('error' => 'No files were uploaded.');
        }

        $size = $this->file->getSize();

        if ($size == 0) {
            return array('error' => 'File is empty');
        }

        if ($size > $this->sizeLimit) {
            return array('error' => 'File is too large');
        }

        $pathinfo = pathinfo($this->file->getName());
        $filename = $pathinfo['filename'];
        //$filename = md5(uniqid());
        $ext = $pathinfo['extension'];

        if($this->allowedExtensions && !in_array(strtolower($ext), $this->allowedExtensions)){
            $these = implode(', ', $this->allowedExtensions);
            return array('error' => 'File has an invalid extension, it should be one of '. $these . '.');
        }

        if(!$replaceOldFile){
            /// don't overwrite previous files that were uploaded
            while (file_exists($uploadDirectory . $filename . '.' . $ext)) {
                $filename .= rand(10, 99);
            }
        }

        if ($this->file->save($uploadDirectory . $filename . '.' . $ext)){
            return array('success'=>true);
        } else {
            return array('error'=> 'Could not save uploaded file.' .
                'The upload was cancelled, or server error encountered');
        }

    }    
}

// list of valid extensions, ex. array("jpeg", "xml", "bmp")
$allowedExtensions = array();
// max file size in bytes
$sizeLimit = 10 * 1024 * 1024;

$uploader = new qqFileUploader($allowedExtensions, $sizeLimit);
$result = $uploader->handleUpload('uploads/');
// to pass data through iframe you will need to encode all html tags
echo htmlspecialchars(json_encode($result), ENT_NOQUOTES); 
```

# php - 如何更改/隐藏服务器目录名称？

> ID：11002013
> 
> 赞同：4
> 
> 时间：2012-06-12T17:47:28.960
> 
> 标签：php, apache, .htaccess

我有问题。我在 facebook 上有一些应用程序并收到此错误

```
Fatal error: Uncaught OAuthException: An active access token must be used to query 
             information about the current user. thrown in 
             /home/xxx/public_html/domain/lib/base_facebook.php on line 1024 
```

但不管此时..问题是，是否可以更改/隐藏这个“ `xxx`”名称？你明白？例如，相反，我会`/public_html/domain/...` 或完全隐藏路径？

提前感谢=）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:51:19.973

建议的操作是在生产模式下禁用所有 PHP 错误的公开显示。

为此，请编辑您的`php.ini`文件并设置`display_errors`为`0`. 您仍然可以将级别设置`error_reporting`为合适的级别，并且所有错误都将记录到`error_log`文件中，但最终用户看不到实际错误本身。

否则，无法修改 PHP 内置的错误消息以隐藏路径。这样做会使错误消息的帮助大大降低。

请参阅[display_errors](http://php.net/display_errors)和[error_reporting](http://php.net/error_reporting) PHP 指令。

编辑：如果您的问题中有确切的错误消息，您可以处理错误（try/catch），然后显示一个更友好的错误，它可以帮助您，但也不会暴露您的路径。它显示的原因是因为抛出的异常未被捕获。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:51:20.610

不。如果您不希望在出现**未捕获异常的情况下进行****完整**的调试回溯，则***每次***都需要**捕获它**。这里没有捷径。

# python - 使用 Python mechanize 下载文件

> ID：11002014
> 
> 赞同：12
> 
> 时间：2012-06-12T17:47:36.210
> 
> 标签：python, web-scraping, mechanize

我正在尝试使用 python 和机械化从网站下载文件。我当前的代码成功登录网站并打开包含下载链接的页面。

下载链接为：[https ://www.lendingclub.com/browse/browseNotesRawDataV2.action](https://www.lendingclub.com/browse/browseNotesRawDataV2.action)

链接的信息是：

```
Link(base_url='https://www.lendingclub.com/browse/browse.action', url='/browse/browseNotesRawDataV2.action', text='', tag='a', attrs=[('class', 'master_pngfix'), ('id', 'browseDownloadAllLink'), ('href', '/browse/browseNotesRawDataV2.action')]) 
```

我使用follow_link方法点击链接：

```
br = mechanize.Browser()
br.follow_link(url='/browse/browseNotesRawDataV2.action') 
```

但是，没有任何反应，也没有下载文件。当我登录后在浏览器中打开链接时，它会暂停几秒钟并下载文件。

如何使用 Python 下载文件？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-13T16:27:18.623

对于任何感兴趣的人，这是解决方案：

```
br.retrieve('https://www.lendingclub.com/browse/browseNotesRawDataV2.action','l‌​oans.csv')[0] 
```

# android - 如何获得 TTS 的幅度

> ID：11002015
> 
> 赞同：0
> 
> 时间：2012-06-12T17:47:37.040
> 
> 标签：android, voice, audio, text-to-speech

我正在尝试听 TTS 语音幅度和单词之间的静音。我将使用它来显示一些与 TTS 语音同步的动画

我找不到让它工作的方法。希望如果我可以将 TTS 转换为声音文件并阅读它是可能的，但不确定。

请给我建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:43:43.210

如果您需要将音频与视觉动作同步，您必须为TTS 引擎设置一个[`TextToSpeech.OnUtteranceCompletedListener`](http://developer.android.com/reference/android/speech/tts/TextToSpeech.OnUtteranceCompletedListener.html)（或自 ICS: an 起）。[`UtteranceProgressListener`](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#setOnUtteranceProgressListener%28android.speech.tts.UtteranceProgressListener%29)这样您就可以确定何时合成了一段特定的文本。

或者，您可以使用该方法将文本合成为音频文件[`synthesizeToFile(String text, HashMap<String, String> params, String filename)`](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#synthesizeToFile%28java.lang.String,%20java.util.HashMap%3Cjava.lang.String,%20java.lang.String%3E,%20java.lang.String%29)。

# python - django 找不到应用

> ID：11002018
> 
> 赞同：4
> 
> 时间：2012-06-12T17:47:43.000
> 
> 标签：python, django

我在 django 中遇到导入错误。我的主要 urls.py 设置文件位于`main/main/urls.py`我的模块或应用程序位于此处`main/apps/builder/urls.py`。

回溯错误

```
ImportError at /
No module named apps.builder.urls
Request Method: GET
Request URL:    ***************
Django Version: 1.4
Exception Type: ImportError
Exception Value:    
No module named apps.builder.urls
Exception Location: /usr/lib/python2.6/site-packages/django/utils/importlib.py in     import_module, line 35
Python Executable:  /usr/bin/python26
Python Version: 2.6.0
Python Path:    
['/home/pycode/main',
 '/usr/lib/python26.zip',
 '/usr/lib/python2.6',
 '/usr/lib/python2.6/plat-linux2',
 '/usr/lib/python2.6/lib-tk',
 '/usr/lib/python2.6/lib-old',
 '/usr/lib/python2.6/lib-dynload',
 '/usr/lib/python2.6/site-packages']
Server time:    Tue, 12 Jun 2012 12:39:17 -0500 
```

主/主/urls.py

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('',
    url(r'^$', include('main.apps.builder.urls')),
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:12:11.967

你的`apps`模块必须在下面`main/main`，或者你必须确保你的`apps`文件夹在你的`sys.path`，可能最好设置 PYTHONPATH.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:53:46.260

您是否将其添加到`INSTALLED_APPS`您的 settings.py 文件中？

[https://docs.djangoproject.com/en/dev/ref/settings/#installed-apps](https://docs.djangoproject.com/en/dev/ref/settings/#installed-apps)

正如 ramdaz 建议的那样，每个目录都需要一个`__init__.py`文件，即使它是空的。

# ios - 显示来自数据库的数据 - CoreData 的路要走？

> ID：11002026
> 
> 赞同：0
> 
> 时间：2012-06-12T17:48:00.207
> 
> 标签：ios, database, xcode, uitableview, core-data

我已经开发了很多本地应用程序，但是这是我第一次引入网络（更具体地说是发布到数据库并从数据库中读取）。我从数据库中接收到一个 JSON 对象，但我目前正在使用数组和字典。这些对象之间确实存在关系，我想知道 CoreData 是否是要走的路。如果是这样，我是否只是复制我希望在应用程序中查看的部分数据库并将其存储在我的 CoreData 模型中？有没有这方面的教程？

另外，顺便说一句，我还包含了 Facebook 集成，我通过它下载了用户的朋友列表。CoreData 也适合存储此类信息吗？还是我会更好地坚持字典？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:17:46.420

根据我的经验（其他人可能会说不同的话）Core Data 是正确的选择，但它的采用可能取决于您可以投入的时间。起初可能非常复杂，但我认为您可以利用在其他项目中应用这些知识。

那里有一些关于核心数据的教程或书籍。

首先，我建议阅读[core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。我认为在该站点中还有其他教程。然后，您可以尝试阅读我前段时间写的关于核心数据的文章：[Mapping Business Objects with Core Data in iOS](https://stackoverflow.com/questions/10619613/mapping-business-objects-with-core-data-in-ios/10681386#10681386)。Apple doc 也是您的朋友。因此，请阅读《[核心数据编程指南简介》](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html)以了解正在发生的细节。

> 如果是这样，我是否只是复制我希望在应用程序中查看的部分数据库并将其存储在我的 CoreData 模型中？

是的，只是一部分。您可以创建一个最小模型，其中包含您需要在设备中拥有的关键部件。我想强调的是，在处理 Core Data 时，您不需要关心规范化概念。是的，你可以，但是在 CD 中你处理对象，重要的是要注意内存消耗（框架可以帮助你）和性能。

> CoreData 也适合存储此类信息吗？还是我会更好地坚持字典？

使用 CD，您可以利用`NSFetchedResultsController`. 对象经过优化以使用`NSFetchedResultsController`表，它也用于批量显示数据。通过这个组件，您可以处理很多元素（比如 Facebook 中的朋友），而不会导致内存过载。请参阅[core-data-tutorial-how-to-use-nsfetchedresultscontroller](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)。

如果你想知道别的，请告诉我。

希望有帮助。

# javascript - 使用数据类型脚本未定义 302 成功数据的 Jquery 跨站点 Ajax 调用，否则返回错误

> ID：11002032
> 
> 赞同：-1
> 
> 时间：2012-06-12T17:48:37.960
> 
> 标签：javascript, jquery

我正在使用 JQuery 1.7.2，尝试执行一个跨站点 Ajax 请求，该请求应该通过 4 个重定向返回一个 html 页面。所有这些重定向不是我理想的世界，但它是规范的一部分。

现在，使用以下代码：

```
$.ajax({
     type: "GET",
     url: myUrl,

     dataType: "script",
     success: function(data) {
      alert("success :"+ data);
     },
     error: function(jqXHR, textStatus, errorThrown) {
          alert("revoke: "+textStatus + ' / ' + errorThrown+"/"+jqXHR.status);
     },
     complete: function(jqXHR, textStatus){
         alert("complete : "+jqXHR.statusText + ": "+jqXHR.readyState);
     }
  }); 
```

我可以在 Firebug/Safari 开发人员工具中看到，所有重定向都有效（例如，返回带有 Location 标头的 302 状态）。然后奇怪的事情发生了：在返回 200 状态的最后一页，我的脚本结束，我尝试查看返回的数据。但输出只是“未定义”。我同意在尝试获取 html 页面时不应该期望脚本数据类型，但是当我尝试使用所有其他数据类型（如[jquery ajax 页面](http://api.jquery.com/jQuery.ajax/)中定义的）时，错误处理程序被调用并且状态代码为 0。一直以来，在 Safari DT 中，第一次重定向后的状态只是设置为“（已取消）”（一直以来，仅针对第二个重定向页面的请求只是挂在 Firebug 中-但我只是猜测它必须做他们不同的实现）。

当我收到 200 状态时，我可以在调试器中看到最后一页的大小约为 18kb，这意味着其中应该有某种数据。

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:08:44.923

您不能使用 重定向`AJAX`，您只能向服务器发送和从服务器获取数据。

对于重定向，您必须使用“常规”HTTP 请求。

也可以用javascript完成`window.location = myUrl`

# emacs - 在 org babel 中，如何从输出文件中获取结果？

> ID：11002034
> 
> 赞同：1
> 
> 时间：2012-06-12T17:48:44.140
> 
> 标签：emacs, org-mode

我正在尝试为 SAS 编写一个 org babel。众所周知，如果未指定输出 lst 文件，SAS 只能从源“XXX.sas”生成“XXX.lst”。现在遇到的问题是将'XXX.lst'的文件内容获取到对应的结果'#+RESULTS:'。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:26:42.183

Org 模式将尝试调用您的 org-babel-execute:sas 函数。如果您通过 ESS 使用 SAS，在 Org 模型中执行 SAS 源代码块的最佳方法是模拟与 R 的集成（在 ob-R.el 中）并将 Org 连接到 ESS SAS 会话。用户的文档在[这里](http://orgmode.org/worg/org-contrib/babel/languages/ob-doc-R.html)。

或者您可以在 org-babel-execute:sas 中调用 SAS 并替换输出文件，如下所示：

```
(with-temp-buffer (insert-file-contents your-sas-output-file) (buffer-string)) 
```

# mdx - MDX Slicer 轴尺寸属性

> ID：11002039
> 
> 赞同：0
> 
> 时间：2012-06-12T17:49:19.220
> 
> 标签：mdx

如何在 MDX 请求的切片器轴/WHERE 部分请求维度属性。我需要成员的 CHILDREN_CARDINALITY 属性。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:38:26.620

你不能。但是，您可以使用该属性在 WITH 部分中创建一个 Set，如下所示：

```
WITH
SET [Set Filter]  As Filter({Dimension.Members}, Dimension.CurrentMember.Properties("PROPERTY_NAME") = "Value")
Select {} On 0, {} On 1 FROM [Cube]
WHERE ([Set Filter]) 
```

# ssh - SSH 登录时出现密码问题

> ID：11002042
> 
> 赞同：0
> 
> 时间：2012-06-12T17:49:37.800
> 
> 标签：ssh

嗨，我有以下脚本可以通过 ssh 登录到我的服务器。

```
 spawn ssh presnetwork@192.168.244.14
                              expect "*(yes/no)?"
                             send "yes"
                                expect  "password:"
                                  send  "pwd\n"
                              close 
```

它工作正常，但它没有将'pwd'值传递给系统，所以脚本超时并退出。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:17:49.673

您可以尝试将“KbdInteractiveAuthentication”设置为“no”（`ssh -o KbdInteractiveAuthentication="no" presnetwork@192....`）。SSH 默认使用键盘交互式身份验证，这`expect`可能是无法理解的。

我强烈建议您改用公钥身份验证（正如 Flo 已经推荐的那样）。它更容易处理，更安全，更舒适。如果您只是在寻找一种无需每次都输入密码即可登录远程服务器的方法，请查看 ssh-agent，它会在您在桌面会话中输入*一次密码后为您存储密码。*如果您真的不想输入密码，请使用[pam_ssh](http://www.clasohm.com/blog/one-entry?entry_id=12085)，其中将使用您的桌面登录密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:55:32.793

默认情况下，expect 命令尚未安装。因此，您安装它以获得正确的输出。

# objective-c - 我可以使用在框架中声明的常量而不链接到框架吗？

> ID：11002043
> 
> 赞同：3
> 
> 时间：2012-06-12T17:49:38.053
> 
> 标签：objective-c, frameworks

我想访问一个在objective-c的框架中定义的常量NSString，而不是静态链接到框架。我自己正在开发一个框架，我不想链接到另一个框架，因为我知道我的框架的某些客户端不支持新框架。我发现我可以使用 NSBundle 动态加载框架，并且可以使用 NSClassFromString 动态创建类的实例，但是编译器（实际上我猜它是链接器）不会让我使用常量，因为它们是未定义的符号.

编辑：我怀疑我的答案在这里：http: [//developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WeakLinking.html](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WeakLinking.html)

我在这里找到了答案：[How do I weak link frameworks on Xcode 4?](https://stackoverflow.com/questions/6480765/how-do-i-weak-link-frameworks-on-xcode-4)

如果我尝试从框架中访问某些东西会发生什么？我只是得到零吗？

# ruby - 用 each_with_index 把索引放在第一位

> ID：11002044
> 
> 赞同：2
> 
> 时间：2012-06-12T17:49:39.333
> 
> 标签：ruby

我正在使用 Array() 和 each_with_index 来输出一个带索引的数组，但我希望它输出

```
[[0,obj1],[1,obj2]....] 
```

而 each_with_index 使其输出

```
[[obj1,0],[obj2,1]....] 
```

无论如何，这可以轻松解决吗？

被要求显示代码。

```
Array(test.each_with_index) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:52:06.413

尝试`.map { |x| x.reverse }`在`each_with_index`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:15:51.247

用这个：

```
[obj1, obj2, ..., objN].map.with_index{|a,i| [i,a] }
#=> [[0, obj1], [1, obj2], ..., [N-1, objN]] 
```

# http - 使用 Express 提取 POST 数据

> ID：11002046
> 
> 赞同：4
> 
> 时间：2012-06-12T17:49:43.170
> 
> 标签：http, post, express

我读过[node.js Extracting POST data](https://stackoverflow.com/questions/4295782/node-js-extracting-post-data)。

**但这是我的问题，当我收到这样的 HTTP 请求时**，如何使用 Express 提取 POST 数据？

 **```
POST /messages HTTP/1.1
Host: localhost:3000 
Connection: keep-alive
Content-Length: 9
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5 
Content-Type: application/xml 
Accept: */* 
Accept-Encoding: gzip,deflate,sdch 
Accept-Language: zh-TW,zh;q=0.8,en-US;q=0.6,en;q=0.4 Accept-Charset: UTF-8,*;q=0.5 

msg=hello 
```

我似乎无法`msg=hello`使用 Express 将键值对从正文中取出。

我已经尝试了所有这些方法`req.header()` `req.param()` `req.query()` `req.body`，但它们似乎是空的。

如何获取body的内容？

```
app.post('/messages', function (req, res) {
    req.??
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:10:05.737

您的问题是 bodyParser 不处理 'application/xml'，我主要通过阅读这篇文章解决了这个问题：[https ://groups.google.com/forum/?fromgroups=#!topic/express-js/6zAebaDY6ug](https://groups.google.com/forum/?fromgroups=#!topic/express-js/6zAebaDY6ug)

您需要编写自己的解析器，我已将以下更详细的内容发布到 github：

**[https://github.com/brandid/express-xmlBodyParser](https://github.com/brandid/express-xmlBodyParser)**

```
var utils = require('express/node_modules/connect/lib/utils', fs = require('fs'), xml2js = require('xml2js');

function xmlBodyParser(req, res, next) {
    if (req._body) return next();
    req.body = req.body || {};

    // ignore GET
    if ('GET' == req.method || 'HEAD' == req.method) return next();

    // check Content-Type
    if ('text/xml' != utils.mime(req)) return next();

    // flag as parsed
    req._body = true;

    // parse
    var buf = '';
    req.setEncoding('utf8');
    req.on('data', function(chunk){ buf += chunk });
    req.on('end', function(){  
        parser.parseString(buf, function(err, json) {
            if (err) {
                err.status = 400;
                next(err);
            } else {
                req.body = json;
                next();
            }
        });
    });
} 
```

然后使用它

```
app.use (xmlBodyParser); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:21:24.620

如果你在配置中有这个：

app.use(express.bodyParser());

在您看来，这是：

```
form(name='test',method='post',action='/messages')
    input(name='msg') 
```

那么这应该工作：

```
app.post('/messages', function (req, res) {
    console.log(req.body.msg);
    //if it's a parameter then this will work
    console.log(req.params.msg)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T11:34:33.020

请求正文的格式可能（不确定它取决于什么，但它发生在我身上一次，它可能是 bodyParser）是可能的（您的 JSON 数据被视为键值对中的键） , 对应的值为空白。在这种情况下对我有用的是首先提取 JSON 对象，然后正常进行：

```
var value;
for (var item in req.body)
{
    var jObject = JSON.parse(item);
    if (jObject.valueYouWant != undefined)
    {
        value = jObject.valueYouWant;
    }
} 
```

这可能不是最理想的，但如果没有其他方法（我尝试了很长时间试图找到更好的方法但没有找到），这可能对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:36:08.703

我相信您需要配置 express 才能使用`bodyParser`中间件。 `app.use(express.bodyParser());`

请参阅快速[文档](http://expressjs.com/guide.html#routing)。

它说：

> 例如，我们可以发布一些 json，并使用 bodyParser 中间件回显 json，该中间件将解析 json 请求主体（以及其他），并将结果放在 req.body

`req.body()`现在应该返回预期的帖子正文。

我希望这有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-06T10:41:32.967

如我所见，您正在发布 xml，您得到的答案是基于 JSON 输入的。如果要显示 xml 的内容，请处理原始请求：

```
app.post('/processXml',function (req, res)
{
    var thebody = '';
    req.on('data' , function(chunk)
    {
        thebody += chunk;
    }).on('end', function()
    {
        console.log("body:", thebody);
    });
}); 
```

作为使用 curl 作为邮递员的示例：

```
curl -d '<myxml prop1="white" prop2="red">this is great</myxml>' -H 
"Content-type: application/xml" -X POST 
http://localhost:3000/processXml 
```

输出：

```
'<myxml prop1="white" prop2="red">this is great</myxml>' 
```

确保您的 body-parser 中间件不会妨碍您：body-parser-xml 将您的请求对象即时处理为 json 对象，之后您将无法再处理您的原始请求。（你可以猜到谁在这之后几个小时被卡住了......）**

# silverlight - ListBox SelectedItem 已绑定：页面导航、获取项目、在新视图中显示其属性并重置 SelectedIndex。我能怎么做？

> ID：11002049
> 
> 赞同：2
> 
> 时间：2012-06-12T17:50:01.013
> 
> 标签：silverlight, windows-phone-7, mvvm, listbox, databound

我正在尝试使用 MVVM Light 在我的应用程序中应用 MVVM 模式。我有一个数据绑定的列表框...

MainView.xaml [摘录]

```
<ListBox Name="recipesListBox" 
                             ItemsSource="{Binding RecipeList}"
                             SelectedItem="{Binding SelectedRecipe, Mode=TwoWay}"
                             HorizontalAlignment="Stretch"
                             VerticalAlignment="Stretch"
                             Grid.Row="1"
                             Margin="12,0,12,0"
                             SelectionChanged="recipesListBox_SelectionChanged" > 
```

MainViewModel.cs [摘录]

```
 private Recipe selectedRecipe;

    public Recipe SelectedRecipe
    {
        get
        {
            return selectedRecipe;
        }
        set
        {
            selectedRecipe = value;
            RaisePropertyChanged("SelectedRecipe");
        }
    } 
```

...在 SelectionChanged 上执行页面导航：

MainView.xaml.cs [摘录]

```
private void recipesListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            string destination = "/RecipeView.xaml";
            if (recipesListBox.SelectedIndex == -1) // If selected index is -1 (no selection) do nothing
                return;
            this.NavigationService.Navigate(new Uri(destination, UriKind.Relative));
            //recipesListBox.SelectedIndex = -1; // Reset selected index to -1 (no selection)
        } 
```

//之后，您可以看到在页面导航后重置索引的旧代码 - 现在，使用绑定数据，显然它也将我的选定项目设置为 null！我该如何导航到新视图，显示所选项目的属性并在我返回时重置所选索引？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:32:28.407

我这样做的方式是这样的：

```
protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
{
    if (listBox.SelectedItem != null)
    {
        listBox.SelectedIndex = -1;
    }

    base.OnNavigatedFrom(e);
} 
```

然后将以下内容添加到 SelectionChanged 事件

```
if(SelectedItem != null)
{
    // Do something with SelectedItem
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:57:42.637

最好的方法是将您的集合存储在您可以在任何地方访问它的地方（例如在 Windows Phone 数据绑定应用程序项目中）并在导航 uri 中传递所选项目的索引

```
int index = recipesListBox.SelectedIndex;
this.NavigationService.Navigate(new Uri(destination +"?index="+index , UriKind.Relative)); 
```

然后在新页面的 OnNavigatedTo 方法中从查询中获取索引并获取项目

```
override OnNavigatedTo(
{
    string index;
    if(NavigationContext.QueryString.TryGetValue("index", index))
    {
        // get the item from your collection based on this index
    }

} 
```

# vb.net - VB.net 毫秒格式

> ID：11002053
> 
> 赞同：0
> 
> 时间：2012-06-12T17:50:24.137
> 
> 标签：vb.net

我得到了这个字符串：

```
00:00:59,950 
```

假设我想要：
**00:00:59,950** + 100

那么字符串看起来像：
**00:01:00,050**
有一个函数可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:54:47.130

您可以使用[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)类型来处理此问题：

```
Dim ci = CultureInfo.InvariantCulture
Dim original As TimeSpan = TimeSpan.ParseExact("00:00:59,950", "hh\:mm\:ss\,fff", ci)
Dim difference As TimeSpan = TimeSpan.FromMilliseconds(100)

Dim final = original + difference

Dim output as String = final.ToString("hh\:mm\:ss\,fff", ci) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:55:07.680

尝试这个：

```
 Dim dateFormat As String = "hh:mm:ss.fffffff" 
    Dim date1 As Date = #00:00:59,950"
    date1.AddMilliseconds(100) 
```

更新：

我一定比昨天意识到的更累，对此我深表歉意。这应该做得更好：

```
 Dim sTime As String = "00:00:59.950"
    Dim dOffset As DateTimeOffset = DateTimeOffset.Parse(sTime)
    dOffset = dOffset.AddMilliseconds(100)

    Dim sDisplayTime As String = dOffset.ToString("HH:mm:ss.fff tt") 
```

在那里，您将以您在问题中所述的格式获得毫秒数。

# javascript - 在侦听器函数中调用方法时引用错误（Javascript）

> ID：11002057
> 
> 赞同：3
> 
> 时间：2012-06-12T17:50:42.890
> 
> 标签：javascript, oop, scope

```
function LolClass(){

    this.init = function(){             
        button_a.bind("tap", function(){                
            this.refreshFields(); // doesn't work 
            //refreshFields(); // doesn't work either
        });     
    }

    this.refreshFields = function(){
        alert("LOL");
    }

    this.dummy = function(){
        this.refreshFields(); // W O R K S!
    }
} 
```

当我点击 button_a 时，我得到一个参考错误，因为 refreshFields 方法没有“找到”。

> 未捕获的 ReferenceError：refreshFields 未在 file:///android_asset/www/src/pages/main.js:70 中定义

但是，如果我在该点击侦听器之外的其他地方调用该方法，它就可以工作。

我完全确定`this`点击侦听器函数内部引用的是事件目标 button_a。

我的问题是：最好的（oo）解决方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T17:53:00.783

尝试这个

```
function LolClass(){

    var someVar = 0; 
    var self = this;

    this.init = function(){             
        button_a.bind("tap", function(){                
            self.refreshFields(); // now works!
            //refreshFields(); // doesn't work
        });     
    }

    this.refreshFields = function(){
        alert("LOL");
    }

    this.dummy = function(){
        this.refreshFields(); // W O R K S!
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T17:53:16.053

你应该缓存`this`：

```
var that = this; // "that" is a convention name for "this"
this.init = function(){             
        button_a.bind("tap", function(){                
            that.refreshFields(); 
        });     
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T17:53:22.323

您需要修改您的代码：

```
function LolClass(){

    var someVar = 0; 
    var $this = this;

    this.init = function(){             
        button_a.bind("tap", function(){                
            $this.refreshFields();
        });     
    }

    this.refreshFields = function(){
        alert("LOL");
    }

    this.dummy = function(){
        this.refreshFields(); // W O R K S!
    }
} 
```

回调中的“this”指的是不同的对象。我添加了 var $this = this; 并在回调中使用了 $this。

# simple-html-dom - 简单的 HTML DOM 问题

> ID：11002058
> 
> 赞同：0
> 
> 时间：2012-06-12T17:50:47.320
> 
> 标签：simple-html-dom

在使用简单 HTML DOM 库时，我遇到了一些网站的问题。当我尝试加载以下网址[http://www.t-mobile.com/shop/phones/cell-phone-detail.aspx?cell-phone=HTC-One-S-Gradient-Blue&tab=reviews#BVRRWidgetID](http://www.t-mobile.com/shop/phones/cell-phone-detail.aspx?cell-phone=HTC-One-S-Gradient-Blue&tab=reviews#BVRRWidgetID)

**我的 PHP 代码是：**

```
<?php

include "simple_html_dom.php";

$html=new simple_html_dom();
$url="http://www.t-mobile.com/shop/phones/cell-phone-detail.aspx?cell-phone=HTC-One-S-    Gradient-Blue&tab=reviews#BVRRWidgetID";
$html->load_file($url);
echo $html;

?> 
```

php脚本没有错误，但每次都显示以下内容。

```
Unsupported Browser
It appears that you are viewing this page with an unsupported Web browser. This Web site works best with one of these supported browsers:

Microsoft Internet Explorer 5.5 or higher
Netscape Navigator 7.0 or higher
Mozilla Firefox 1.0 or higher

If you continue to view our site with your current browser, certain pages may not display correctly and certain features may not work properly for you. 
```

问题是什么？Simple HTML DOM 有限制吗？有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:50:20.340

有些网站不允许直接废弃其内容。

您可以使用**curl**获取 html 内容，然后使用 dom 对象的 load()。

我希望它对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-31T21:23:13.227

只需在 simple_html_dom 请求中设置您的 USERAGENT：

```
# Creating useragent array
$useragent = array("http" => "User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1.6) Gecko/20091201 Firefox/3.5.6");

# Creating a line from array
$useragent = stream_context_create($useragent);

# Starting Simple_HTML_Dom with our useragent
$html = file_get_html($urlCategory, $useragent) 
```

因此，我们的请求将来自比您更新的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-21T06:52:30.667

设置用户代理

```
$context = stream();
stream($context, array('user_agent' => 'Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1.6) Gecko/20091201 Firefox/3.5.6\r\n'));
file_get_html('http://www.t-mobile.com/shop/phones/cell-phone-detail.aspx?cell-phone=HTC-One-S-    Gradient-Blue&tab=reviews#BVRRWidgetID', 0, $context); 
```

# windows - 将 .sh 文件转换为 .bat 文件

> ID：11002060
> 
> 赞同：0
> 
> 时间：2012-06-12T17:50:55.353
> 
> 标签：windows, shell, batch-file

我需要一个 .sh 文件才能在 windows 环境下工作，所以我想**手动**将其转换为 .bat 文件，但是我不知道正确的语法的问题，请你帮帮我，这里是.sh 文件：

```
#!/bin/sh

# Needed by labeler.
export CLASSPATH=lthlabeler.jar
CLASSPATH=$CLASSPATH:utilities.jar
CLASSPATH=$CLASSPATH:trove.jar

# Needed for parser.
CLASSPATH=$CLASSPATH:lthparser.jar
CLASSPATH=$CLASSPATH:trove.jar
CLASSPATH=$CLASSPATH:proj2NonProj.jar
CLASSPATH=$CLASSPATH:nonProj2Proj.jar

MEMORY=1800M

MAIN_CLASS=se.lth.cs.nlp.labeler3.FrameNetLabeler

java -Xmx$MEMORY $MAIN_CLASS $* 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T18:11:37.927

1.  `export`在`set`批处理文件中。见`help set`。
2.  `FOO=BAR`也是`set`。
3.  `$FOO`变成`%FOO%`.
4.  用于分隔路径条目的冒号在 Windows 上是分号。
5.  `$*`变成`%*`.
6.  注释用`REM`代替`#`。

现在，您应该能够相当容易地弄清楚它。

# python - Python查找重复数组操作

> ID：11002062
> 
> 赞同：0
> 
> 时间：2012-06-12T17:51:05.073
> 
> 标签：python

如何形成由不在 a 中的 b 元素组成的数组 (c)？

```
a=[1,2,"ID123","ID126","ID124","ID125"]
b=[1,"ID123","ID124","ID125","343434","fffgfgf"]
c= [] 
```

这可以在不使用列表理解的情况下完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T17:54:04.150

如果列表很长，你想先做一组`a`：

```
a_set = set(a)
c = [x for x in b if x not in a_set] 
```

如果元素的顺序无关紧要，那么只需使用集合：

```
c = list(set(b) - set(a)) 
```

`-`Python 列表不像 Ruby 数组那样提供直接运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:52:42.620

使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)是最直接的：

```
[i for i in b if i not in a]
c
['343434', 'fffgfgf'] 
```

*但是*，如果您真的**不想**使用列表推导，您可以使用[生成器表达式](http://www.python.org/dev/peps/pep-0289/)：

```
c = (i for i in b if i not in a) 
```

这也不会在内存中一次生成所有结果列表（以防万一）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:55:15.553

以下将做到这一点：

```
c = [v for v in b if v not in a] 
```

如果`a`很长，将其变成一个集合可能会提高性能：

```
a_set = set(a)
c = [v for v in b if v not in a_set] 
```

# xml - xquery 等效于 XML 节点中的 tsql where 子句

> ID：11002063
> 
> 赞同：2
> 
> 时间：2012-06-12T17:51:08.223
> 
> 标签：xml, tsql, sql-server-2005, xquery

我正在尝试分解具有不寻常布局的 XML 文件，因为项目不是按常规元素和属性排列的，而是以一种“xml 中的列表”格式排列的：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"> 
<SOAP-ENV:Body> 
<ns:Lists xmlns:ns="urn:Listing"> 
    <ns:items>
      <ns:listRef>List1</ns:listRef> 
      <ns:name>Test list items</ns:name> 
      <ns:extendedFields>
         <ns:extendedField>
             <ns:name>Fruit</ns:name> 
             <ns:data>Apple</ns:data> 
      </ns:extendedField>
      <ns:extendedField>
             <ns:name>Vegetable</ns:name> 
              <ns:data /> 
      </ns:extendedField>
      <ns:extendedField>
              <ns:name>Sweet</ns:name> 
             <ns:data>Crunchie</ns:data> 
      </ns:extendedField>
    </ns:extendedFields>
    </ns:items>
</ns:Lists>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我已经尝试了下面的 XQuery 的变体，但没有得到正确的结果。例如，我需要做的是与“select ns:data from x where ns:name = 'Fruit'”等效的 Xpath。在过去，我能够使用单例编号来指向树上我想要的位的位置，但在这种情况下，扩展字段的数量是可变的，并且序列会发生变化，所以唯一的方法是您想要的节点将指定您想要的名称/值对。

```
DECLARE @x xml 
 SET @x = 
(   SELECT xml_data_column   
   FROM dbo.Table   
 WHERE xmlFileName = 'D:\XML_list.xml'); 

;WITH XMLNAMESPACES('urn:Listing' AS ns) 
SELECT t.c.value('../ns:listRef[1]', 'varchar(20)') listRef  
, t.c.value('../ns:name[1]', 'varchar(20)') name  
, t.c.value('/.', 'varchar(30)') ext1b
, t.c.value('ns:extendedField[1]/ns:name[1]', 'varchar(30)') name1
, t.c.value('ns:extendedField[1]/ns:data[1]', 'varchar(30)') data1
, t.c.value('ns:extendedField[2]/ns:name[1]', 'varchar(30)') name2
, t.c.value('ns:extendedField[2]/ns:data[1]', 'varchar(30)') data2
, t.c.value('ns:extendedField[3]/ns:name[1]', 'varchar(30)') name3
, t.c.value('ns:extendedField[3]/ns:data[1]', 'varchar(30)') data3
FROM  @x.nodes('//ns:Lists/ns:items/ns:extendedFields[1]') AS t(c) 
```

所以如果我想看看这个人选择了什么水果，那么我希望输出看起来像：

```
listRef, name,                Fruit 
List1,   Test list items,   Apple 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:13:54.733

```
with xmlnamespaces('urn:Listing' AS ns)
select L.X.value('ns:listRef[1]', 'varchar(20)') as listRef,
       L.X.value('ns:name[1]', 'varchar(20)') as name,
       E.X.value('ns:data[1]', 'varchar(30)') as Fruit
from @x.nodes('//ns:Lists/ns:items') as L(X)
  cross apply L.X.nodes('ns:extendedFields/ns:extendedField[ns:name = "Fruit"]') as E(X) 
```

# c# - 将表列绑定到复选框列表

> ID：11002064
> 
> 赞同：0
> 
> 时间：2012-06-12T17:51:09.737
> 
> 标签：c#, visual-studio-2008

美好的一天，只是一个简单的问题：我想将一个表绑定到一个复选框列表控件，所以我在 Page_Load 方法中这样做了：

```
CBL_categ.DataSource = FilmsAccess.Pop_check();
CBL_categ.DataBind(); 
```

我指定`Pop_check`返回一列的表。

当我运行时，而不是该列中的值，我看到`"System.Data.DataRowView"`了很多次，带有复选框。我也试过： `CBL_categ.DataSource = FilmsAccess.Pop_check().Column[0];`但它给出了这个错误：`Data source is an invalid type. It must be either an IListSource, IEnumerable, or IDataSource.`

非常感谢。安娜

编辑：这是应要求的 Pop_check() 方法：

```
public static DataTable Pop_check()
        {
            DbCommand com = GenericDataAccess.CreateCommand();
            com.CommandText = "Catalog_CBL";
            DataTable table = GenericDataAccess.ExecuteSelectCommand(com);
            return table;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:24:50.423

在 ASCX 文件中绑定以下两个字段，最好按名称

```
<asp:CheckBoxList ID="cblMyList" runat="server" 
   DataTextField="ID" DataValueField="ID"></asp:CheckBoxList> 
```

# c# - JsonConvert.DeserializeXmlNode - 必须以对象开头

> ID：11002065
> 
> 赞同：1
> 
> 时间：2012-06-12T17:51:13.043
> 
> 标签：c#, json, json.net

我在以 [[ 开头的 JSON 数据上调用 DeserializeXmlNode() 收到 JsonSerializationException （即它是一个数组数组）。

哪个最好

1.  将其转换为 XML 的方法？
2.  是否还有其他无法转换为 XML 的 JSON 模式？

**更新：** XML 应该如何出现是一个有趣的问题。拥有一个数组数组意味着没有根节点（这是一个简单的插入），但子节点集也没有名称。我不确定这里有什么意义。这可能是在 JSON 上使用 XPath 的交易杀手。所以在这部分也是，有什么建议吗？

**更新 2** - JSON 数据：

```
[["P0010001","NAME","state"],
["4779736","Alabama","01"],
["710231","Alaska","02"],
["6392017","Arizona","04"],
["2915918","Arkansas","05"],
["37253956","California","06"],
["5029196","Colorado","08"],
["3574097","Connecticut","09"],
["897934","Delaware","10"],
["601723","District of Columbia","11"],
["18801310","Florida","12"],
["9687653","Georgia","13"],
["1360301","Hawaii","15"],
["1567582","Idaho","16"],
["12830632","Illinois","17"],
["6483802","Indiana","18"],
["3046355","Iowa","19"],
["2853118","Kansas","20"],
["4339367","Kentucky","21"],
["4533372","Louisiana","22"],
["1328361","Maine","23"],
["5773552","Maryland","24"],
["6547629","Massachusetts","25"],
["9883640","Michigan","26"],
["5303925","Minnesota","27"],
["2967297","Mississippi","28"],
["5988927","Missouri","29"],
["989415","Montana","30"],
["1826341","Nebraska","31"],
["2700551","Nevada","32"],
["1316470","New Hampshire","33"],
["8791894","New Jersey","34"],
["2059179","New Mexico","35"],
["19378102","New York","36"],
["9535483","North Carolina","37"],
["672591","North Dakota","38"],
["11536504","Ohio","39"],
["3751351","Oklahoma","40"],
["3831074","Oregon","41"],
["12702379","Pennsylvania","42"],
["1052567","Rhode Island","44"],
["4625364","South Carolina","45"],
["814180","South Dakota","46"],
["6346105","Tennessee","47"],
["25145561","Texas","48"],
["2763885","Utah","49"],
["625741","Vermont","50"],
["8001024","Virginia","51"],
["6724540","Washington","53"],
["1852994","West Virginia","54"],
["5686986","Wisconsin","55"],
["563626","Wyoming","56"],
["3725789","Puerto Rico","72"]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-24T13:46:23.603

我有一系列对象，形状如下：

```
[{foo:bar}, {foo:bar2}] 
```

...我为解决这个问题所做的就是首先像这样包装文本：

```
public XmlDocument JsonArrayToXml(string json)
{
    var wrappedDocument = string.Format("{{ item: {0} }}", json);
    var xDocument = JsonConvert.DeserializeXmlNode(wrappedDocument, "collection");
    return xDocument;
} 
```

这不会引发错误。XML 的形状类似于：

```
<?xml version="1.0" encoding="UTF-8"?>
<collection>
    <item>
        <foo>bar</foo>
    </item>
    <item>
        <foo>bar2</foo>
    </item>
</collection> 
```

# javascript - jQuery-UI - 多个自动完成字段共享结果

> ID：11002069
> 
> 赞同：1
> 
> 时间：2012-06-12T17:51:29.347
> 
> 标签：javascript, jquery, jquery-ui, codeigniter

我正在尝试构建一个包含多个自动完成字段的表单。我正在使用 jQuery-ui 1.8.21 通过 .autocomplete 绑定进行自动完成。我有 5 个不同的字段，它们绑定了自动完成功能，每个字段都将他们的建议发送到页面末尾的表单之外的不同 div。

表格如下所示：

```
<form>
    <input type="text" name="afield" />
    <input type="text" name="bfield" />
</form>
<div id="a_complete">
</div>
<div id="b_complete">
</div> 
```

像这样的jQuery代码：

```
$(function(){
    $("[name=afield]").autocomplete({
        source: "/data/source/a",
        open: function(event, ui) {
        $('ul.ui-autocomplete')
            .removeAttr('style').hide().appendTo('#a_complete').show();
        }
    });
    $("[name=bfield]").autocomplete({
        source: "/data/source/b",
        open: function(event, ui) {
        $('ul.ui-autocomplete')
            .removeAttr('style').hide().appendTo('#b_complete').show();
        }
    });
}); 
```

这样做的问题是，当我开始输入*bfield时，* *afield*的匹配结果也显示在 *b_complete* 以及*bfield*的结果中。

我尝试将*cacheLength*设置为 0 或 1，并在不同的事件（*搜索、打开、关闭、选择）上使用**flushCache()*没有成功。

 *这只是一个装饰性问题，因为当我单击结果时，它会更新正确的字段，而当我使用箭头键浏览结果时，它们只会返回正确字段的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T17:54:41.010

您还需要使用另一个类定义或“id”来使您的`$('ul.ui-autocomplete')`独特性，例如，以便它`$('ul.ui-autocomplete#a')`和`$('ul.ui-autocomplete#b')`*

# android - 在android的listview中从服务器异步显示图像？

> ID：11002071
> 
> 赞同：1
> 
> 时间：2012-06-12T17:51:53.340
> 
> 标签：android

嗨，我在 android的**列表视图中显示****两个文本视图和一个图像视图。**我在列表标题中保留了一个**下一个按钮**，每当我单击下一个按钮时，都会调用同一页面，并且文本和图像会显示在该页面上。我所有的图像都存储在服务器中。现在我需要从服务器获取这些图像并将它们显示在文本视图下方的列表视图中。从服务器显示图像需要更多时间，所以我想异步显示图像。但是我没有得到如何在 listview 的 getview 方法中使用处理程序和异步任务。帮我解决这个问题。

 ****将不胜感激，将非常感谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:59:41.553

你在正确的轨道上。异步任务或处理程序是要走的路。

我可能会选择 Asynctask。这真的很简单，onPre 和 onPost 函数在 UI 线程上运行，因此您可以在其中更新视图。doInBackground() 不在 UI 上运行，因此您的 Web 服务将被调用。

你可能应该先用谷歌搜索一些答案。 [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:00:48.273

检查以下链接 [Android 中的解决方案：使用 Asynctask 从 Web 加载图像](https://stackoverflow.com/questions/3090650/android-loading-an-image-from-the-web-with-asynctask)。`getView()`在您的列表适配器中使用本文中提供的解决方案。****

# vb.net - iframe 内存泄漏

> ID：11002078
> 
> 赞同：0
> 
> 时间：2012-06-12T17:52:23.623
> 
> 标签：vb.net, pdf, iframe, label

我有一个显示页面的 iframe。底层页面重定向到我从数据库中获得的 pdf。iframe 实际上是标签控件的文本。在查看图像时，内存使用量似乎会随机增加。并非每次在 IE 中加载图像时都会发生这种情况。我似乎无法弄清楚发生了什么。这是显示 pdf 的标签文本的代码。

```
strReturn &= "<iframe name=""pdffrname"" width=""100%"" height=""100%"" src=""dataframe.aspx?" & Request.QueryString.ToString & "&topage=" & cboToPage.SelectedValue & """/>" 
```

我需要对 iframe 做些什么以使内存使用量停止飙升吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:24:17.170

[Jens-Ingo Farley的 IE8（以及 IE9 和 IE10）中的内存泄漏](http://com.hemiola.com/2009/11/23/memory-leaks-in-ie8/)表明，除了重新加载整个页面之外，您实际上无能为力：

> 用户偶尔按 F5（如果页面可以处理）将卸载 window.top 并释放其内存，但没有明显的编程解决方法。如果页面在 iframe 中，则卸载 iframe 无效。看来 window.top 必须卸载。

# excel - 工作表找不到 Excel VBA 宏，#NAME

> ID：11002083
> 
> 赞同：2
> 
> 时间：2012-06-12T17:52:30.423
> 
> 标签：excel, vba

我试图让一个简单的 VBA 函数在 excel (.xlsm) 工作表中运行。

我创建了这个函数：

```
Function abc()

abc = 2

End Function 
```

在 Module2 中，它起作用了。

但是在我将电子表格复制到另一个系统后，它现在只显示“#name”，就好像它找不到它一样。但是，该功能显示在可用功能列表中。

这让我觉得我需要启用某种设置，但我已经启用了我被提示的任何设置。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:03:44.083

我应该知道它在信任中心：

[http://office.microsoft.com/en-us/excel-help/change-macro-security-settings-in-excel-HP010096919.aspx](http://office.microsoft.com/en-us/excel-help/change-macro-security-settings-in-excel-HP010096919.aspx)

基本上，击球并四处寻找，直到找到“信任”和“启用宏”并选择最不安全的选项。

然后关闭并重新打开电子表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:14:47.520

我想我们可能需要更多信息。您使用的是哪个版本的 Excel？它与目标系统版本不同吗？

您需要确保 Module2 在您复制到其他系统的工作簿中。Excel 2007 有时默认将宏存储在个人工作簿中，因此您需要检查代码实际上是否在 .xlsm 文件中。

如果您仍然卡住并需要快速修复，只需将代码文本直接复制到新系统的 Excel 工作簿中，而无需制作 .xlsm 文件（在其他系统中创建新模块然后粘贴）。

如果您想了解如何组合加载项，您可以从[此处](http://www.ozgrid.com/VBA/excel-add-in-create.htm)或[此处](http://www.fontstuff.com/vba/vbatut03.htm)开始。

# java - grizzly2 jersey REST 应用程序在第一次请求时返回 404，然后在所有其他请求上成功

> ID：11002100
> 
> 赞同：3
> 
> 时间：2012-06-12T17:53:43.637
> 
> 标签：java, jersey, jax-rs, grizzly

我有一个非常简单的 Java REST 应用程序，它使用 grizzly2 (jersey-grizzly2 1.12) 和 jersey (jersey-bundle 1.12)

当我发出第一个 http 请求时，我得到一个 404 响应（但映射的方法仍然在服务器上执行）。如果我再次发出相同的请求，那么我会得到预期的 200 响应。

疯狂的部分是，即使是 404 错误，映射的方法仍然执行。

也许有一个错误？还是我错误地配置了我的服务器？这是我第一次尝试 grizzly2，所以欢迎任何见解！

我这样启动服务器：

```
final ResourceConfig rc = new DefaultResourceConfig(
            TestResource.class
            );
rc.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, true);
rc.getFeatures().put(ResourceConfig.FEATURE_TRACE, true);

URI path = UriBuilder.fromPath(baseUri).build();                        
HttpServer httpServer = GrizzlyServerFactory.createHttpServer(path, rc);            
httpServer.start(); 
```

我的资源如下所示：

```
@Path("/test")
public class TestResource {
    @GET    
    @Produces(MediaType.APPLICATION_JSON)
    @Path("go") 
    public Integer startSomethingElse() {
        return new Integer(4);
    }        
} 
```

还有我的示例连接示例：

```
C:\Users\Paul>curl -v -H "Accept: application/json"  http://10.0.0.156:9998/test/go
* About to connect() to 10.0.0.156 port 9998 (#0)
*   Trying 10.0.0.156... connected
> GET /test/go HTTP/1.1
> User-Agent: curl/7.23.1 (x86_64-pc-win32) libcurl/7.23.1 OpenSSL/0.9.8r zlib/1.2.5
> Host: 10.0.0.156:9998
> Accept: application/json
>
< HTTP/1.1 404 Not Found
< Content-Type: text/html
< Date: Tue, 12 Jun 2012 17:49:24 GMT
< Content-Length: 1061
<
<html><head><title>Grizzly/2.1</title><style><!--div.header {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#003300;font-size:22px;-moz-border-radius-topleft: 10px;border-top-left-radius: 10px;-moz-border-radius-topright: 10px;border-top-right-radius: 10px;padding-left: 5px}div.body {font-family:Tahoma,Arial,sans-serif;color:black;background-color:#FFFFCC;font-size:16px;padding-top:10px;padding-bottom:10px;padding-left:10px}div.footer {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#666633;font-size:14px;-moz-border-radius-bottomleft: 10px;border-bottom-left-radius: 10px;-moz-border-radius-bottomright: 10px;border-bottom-right-radius: 10px;padding-left: 5px}BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;}B {font-family:Tahoma,Arial,sans-serif;color:black;}A {color : black;}HR {color : #999966;}--></style> </head><body><div class="header">Not Found</div><div class="body">Resource identified by path '/test/go', does not exist.</div><div class="footer">Grizzly/2.1</div></body></html>* Connection #0 to host 10.0.0.156 left intact
Closing connection #0 
```

然后第二次尝试（完全相同的请求，紧随第一次之后）

```
C:\Users\Paul>curl -v -H "Accept: application/json"  http://10.0.0.156:9998/test/go
About to connect() to 10.0.0.156 port 9998 (#0)
Trying 10.0.0.156... connected
> GET /test/go HTTP/1.1
> User-Agent: curl/7.23.1 (x86_64-pc-win32) libcurl/7.23.1 OpenSSL/0.9.8r zlib/1.2.5
> Host: 10.0.0.156:9998
> Accept: application/json
>
< HTTP/1.1 200 OK
< Content-Type: application/json
< X-Jersey-Trace-000: accept root resource classes: "/test/go"
< X-Jersey-Trace-001: match path "/test/go" -> "/application\.wadl(/.*)?", "/test(/.*)?"
< X-Jersey-Trace-002: accept right hand path java.util.regex.Matcher[pattern=/test(/.*)? region=0,8 lastmatch=/test/go]: "/test/go" -> "/test" : "/go"
< X-Jersey-Trace-003: accept resource: "test" -> @Path("/test") com.subserveo.skyhook.http.resource.TestResource@30813486
< X-Jersey-Trace-004: match path "/go" -> "/go2(/)?", "/go(/)?", ""
< X-Jersey-Trace-005: accept right hand path java.util.regex.Matcher[pattern=/go(/)? region=0,3 lastmatch=/go]: "/go" -> "/go" : ""
< X-Jersey-Trace-006: accept sub-resource methods: "test" : "/go", GET -> com.subserveo.skyhook.http.resource.TestResource@30813486
< X-Jersey-Trace-007: matched sub-resource method: @Path("/go") public java.lang.Integer com.subserveo.skyhook.http.resource.TestResource.startSomethingElse()
< X-Jersey-Trace-008: matched message body writer: java.lang.Integer@4, "application/json" -> com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy@576f8789
< Date: Tue, 12 Jun 2012 17:49:26 GMT
< Transfer-Encoding: chunked
<
4* Connection #0 to host 10.0.0.156 left intact
* Closing connection #0 
```

# c++ - C++ 和 Qt：观察者模式错误

> ID：11002102
> 
> 赞同：0
> 
> 时间：2012-06-12T17:53:50.190
> 
> 标签：c++, qt, observer-pattern

我正在尝试实现一个简单的观察者模式来更新带有汽车模型相关信息的小部件。我的观察者模式的更新方法不断收到一个相当令人困惑的错误，编译器似乎无法识别所传递参数的类型。这是观察者的标题：

```
#include "Subject.h"

class Observer
{
public:

    virtual void update(Subject &car) = 0;
}; 
```

主题头文件：

```
#include <QList>

#include "Observer.h"

class Subject
{
protected:

    QList<Observer *> m_observers;

public:

    virtual void registerObserver(Observer &) = 0;
    virtual void removeObserver(Observer &) = 0;
    virtual void notifyObservers() = 0;
}; 
```

Subject 的实现（类 Car 继承 Subject 接口）：

```
//
// Subject interface implementation
//
void Car::registerObserver(Observer &observer)
{
    m_observers.append(&observer);
}

void Car::removeObserver(Observer &observer)
{
    int i = m_observers.indexOf(&observer);

    if (i >= 0)
        m_observers.removeAt(i);
}

void Car::notifyObservers()
{
    for(int i = 0; i < m_observers.size(); ++i)
        m_observers.at(i)->update(*this);
} 
```

但是，编译器在 notifyObservers 方法中给了我一个错误：

```
/home/dylan/Desktop/CarModel/Car.cpp:50: error: no matching function for call to ‘Observer::update(Subject&)’

 candidate is: /home/dylan/Desktop/CarModel/Observer.h:11: virtual void Observer::update(int&) 
```

呃……什么？？如您所见，编译器似乎认为 update 的参数是对 int 的引用。这是因为我的 Observer 标头是抽象的吗？我还没有为它写一个实现，所以也许这就是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:02:51.413

`Observer`您在和之间存在循环依赖关系`Subject`。您可以通过前向声明`Subject`而`Observer.h`不是包括来避免它`Subject.h`：

```
class Subject; // forward declaration

class Observer {
  ...
}; 
```

并在下面做同样的事情`Subject.h`：

```
class Observer; // forward declaration
class Subject {
  ...
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:04:07.810

您有一个循环包含依赖项。`Observer`包括`Subject`和`Subject`包括`Observer`。现在标题保护将负责防止无限包含，但仍然必须首先包含一个标题，它们不能同时包含。碰巧要包含的第一个是`Observer`，此时`Subject`尚未声明。

幸运的是，您似乎不需要任何这些包括。您可以用前向声明替换它们：

```
class Subject;

class Observer
{
public:

    virtual void update(Subject &car) = 0;
}; 
```

# jquery - jquery获取列中表格单元格的值，将值相加并在页面上输出

> ID：11002106
> 
> 赞同：2
> 
> 时间：2012-06-12T17:54:05.823
> 
> 标签：jquery, add

这似乎是一个奇怪的问题，我不确定这是否可能。

我在 wordpress 中创建了一个 HTML 表格，并构建了一个 PHP 循环以表格格式输出帖子数据。

我正在使用这个[jQuery table sorted plugin](http://tablesorter.com/docs/)使它成为一个可排序的表。

但我的问题是，是否可以使用 jQuery 将表格列中的所有数值相加`<th>Hours</th>`并输出结果？

如果需要将一个类添加到`<td><?php echo get_post_meta($post->ID, 'Labour Time Hours', true); ?></td>`单元格中，那很酷，它不会影响表格排序器。

然后我想在我的表格页脚单元格中输出结果。

这可能吗？我似乎在谷歌上找不到任何东西，但我可能在搜索错误的术语。

谢谢

**我的 WORDPRESS 循环生成表内容**

```
<?php 

        $data = new WP_Query(array(

        'post_type'         => 'job',
        'order'             => 'ASC',
        'posts_per_page'    => -1,
        'orderby'           => 'date'

)); ?>

<?php if ($data->have_posts()) : ?>

<table id="myTable" class="tablesorter"> 

    <thead> 

        <tr> 

            <th>Date</th> 
            <th>Job Title</th> 
            <th>Category</th> 
            <th>Hours</th> 

        </tr> 

    </thead> 

    <tbody> 

        <?php while ($data->have_posts()) : $data->the_post(); ?>

        <tr> 

            <td><?php the_time('Y/m/d'); ?></td> 
            <td><a href="<?php the_permalink() ?>" title="View Job" ><?php the_title(); ?></a></td> 
            <td><?php the_category(', ') ?></td> 
            <td><?php echo get_post_meta($post->ID, 'Labour Time Hours', true); ?></td> 

        </tr> 

        <?php endwhile; ?>

    </tbody>

    <tfoot>

        <tr>

            <td></td>
            <td></td>
            <td></td>
            <td><!-- Total to go here --></td>

        </tr>

    </tfoot>

</table>

<?php unset($data); endif; wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:03:39.900

一个简单的方法是为要添加的元素分配一个类。

所以你会做这样的事情：

```
<td class="add">5</td>
<td class="add">8</td>
<td id="Total"></td> 
```

然后，如果您绝对肯定这些值将始终是整数（或浮点数），您可以这样做

```
function adding() {
    var total = 0;
    $(".add").each(function(index, element) {
        total += parseInt($(element).text());
    });
    $("#Total").text(total);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:03:50.813

你可以用一些相当简单的 jQuery 来做到这一点：

```
var $table = $('#myTable'),
    $tr = $table.find('tbody tr'),
    totalHours = 0;

$tr.each(function(i, el){
    totalHours += parseInt($(this).find('td:last').html() || 0, 10);
});

$table.find('tfoot td:last').html(totalHours); 
```

## [看演示](http://jsfiddle.net/agVgU/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:01:29.570

最好在服务器 imo 上添加，但您可以这样做：

```
var total = 0;

 $("td.whateverClass").each(function () 
    { 
        total += $(this).text();

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:01:56.087

将类添加`hours`到您各自的表格单元格中`<td class='hours></td>'`

然后你可以像这样 jQuery 它。

`var sum = 0;`

然后

`$('tbody td.hours').each(function(index, td)) { sum += parseInt(td.html()); });`

最后

`$('tfoot td.hours').html(sum);`

# backup - 数据可以备份到 iCloud 但不同步吗？

> ID：11002108
> 
> 赞同：1
> 
> 时间：2012-06-12T17:54:14.090
> 
> 标签：backup, sync, icloud

我有一个开发人员为我编写了一个应用程序，他们声称一些照片数据正在备份到 iCloud，但是这些数据没有同步，当从 iCloud 完成恢复时，没有恢复任何图片数据。

我的问题是，是否可以在不跨设备同步数据的情况下进行 iCloud 备份？在我看来，iCloud 的定义是，如果它在 iCloud 中，它就是同步的。有人可以确认吗？

# c# - 解码串口通信

> ID：11002109
> 
> 赞同：2
> 
> 时间：2012-06-12T17:54:14.323
> 
> 标签：c#, serial-port, hex

我希望在尝试编写一个允许我从我拥有的串行磁卡读卡器读取数据的软件时得到一些帮助。

我们有这个读卡器，它是一种非常古老的设备，我们用来在我们的场地中获取会员卡的详细信息。读卡器有一个软件可以下载卡的详细信息（存储在读卡器上），然后该软件将详细信息放在 C 驱动器上的文本文件中。我想写一些软件来做同样的事情。

我可能是在叫错树或希望太多，但任何帮助都会很棒。

到目前为止，我已将读卡器连接到我机器的串行端口并运行旧版软件并使用 com 端口监视器来捕获通信。这是我有点卡住的地方，想知道是否有人可以告诉我我捕获的内容是否有用，并希望能指出我正确的方向。

当读卡器上没有存储卡信息并捕获它时，我运行了下载序列。

```
[12/06/2012 18:28:55] - Open port COM4

[12/06/2012 18:29:02] - Written data
31 00 01 00 00 00 32                                1.....2         

[12/06/2012 18:29:04] - Read data
31 00 06 00 0c 06 0c 00 00 00 00 55                 1..........U    

[12/06/2012 18:29:04] - Written data
33 00 01 00 00 00 34                                3.....4         

[12/06/2012 18:29:05] - Read data
33 00 14 00 06 03 00 00 0c 00 00 0d 00 00 42 00     3.............B.
00 43 00 00 63 00 00 00 01 51                       .C..c....Q      

[12/06/2012 18:29:06] - Written data
34 00 01 00 00 00 35                                4.....5         

[12/06/2012 18:29:08] - Read data
34 00 01 00 00 00 35                                4.....5         

[12/06/2012 18:29:08] - Written data
35 00 07 00 0c 06 0c 12 1c 36 00 00 be              5........6..¾   

[12/06/2012 18:29:10] - Read data
35 00 01 00 00 00 36                                5.....6         

[12/06/2012 18:29:11] - Close port COM4 
```

然后我刷了一张卡，读卡器将其存储在内存中并再次运行下载，这次我得到了

```
[12/06/2012 18:31:23] - Open port COM4

[12/06/2012 18:31:48] - Written data
31 00 01 00 00 00 32                                1.....2         

[12/06/2012 18:31:50] - Read data
31 00 06 00 0c 06 0c 00 00 00 00 55                 1..........U    

[12/06/2012 18:31:51] - Written data
33 00 01 00 00 00 34                                3.....4         

[12/06/2012 18:31:53] - Read data
33 00 14 00 06 03 00 00 0c 00 00 0d 00 00 42 00     3.............B.
00 43 00 00 63 00 00 00 01 51                       .C..c....Q      

[12/06/2012 18:31:55] - Written data
34 00 01 00 00 00 35                                4.....5         

[12/06/2012 18:31:57] - Read data
34 00 01 00 00 00 35                                4.....5         

[12/06/2012 18:31:57] - Written data
35 00 07 00 0c 06 0c 12 1f 16 00 00 a1              5...........¡   

[12/06/2012 18:32:01] - Read data
35 00 01 00 00 00 36                                5.....6         

[12/06/2012 18:32:01] - Close port COM4 
```

最后我刷了 3 张卡并再次运行下载并捕获了这个

```
[12/06/2012 18:30:21] - Open port COM4

[12/06/2012 18:30:22] - Written data
31 00 01 00 00 00 32                                1.....2         

[12/06/2012 18:30:24] - Read data
31 00 06 00 0c 06 0c 00 03 00 00 58                 1..........X    

[12/06/2012 18:30:24] - Written data
32 00 04 00 03 00 01 00 00 3a                       2........:      

[12/06/2012 18:30:26] - Read data
32 00 1c 00 03 00 01 00 12 1e 58 28 54 08 33 00     2.........X(T.3.
12 1e 58 28 53 96 95 00 12 1e 58 28 54 12 32 00     ..X(S–•...X(T.2.
05 07                                               ..              

[12/06/2012 18:30:27] - Written data
33 00 01 00 00 00 34                                3.....4         

[12/06/2012 18:30:29] - Read data
33 00 14 00 06 03 00 01 0c 00 00 0d 00 00 42 00     3.............B.
00 43 00 00 63 00 00 00 01 52                       .C..c....R      

[12/06/2012 18:30:30] - Written data
34 00 01 00 00 00 35                                4.....5         

[12/06/2012 18:30:41] - Read data
34 00 01 00 00 00 35                                4.....5         

[12/06/2012 18:30:41] - Written data
35 00 07 00 0c 06 0c 12 1e 15 00 00 9f              5...........Ÿ   

[12/06/2012 18:30:43] - Read data
35 00 01 00 00 00 36                                5.....6         

[12/06/2012 18:30:43] - Close port COM4 
```

我所知道的是，旧版软件会检查设备是否连接到所选的 com 端口，然后下载数据，然后从读卡器中清除数据

如果它有帮助..如果我没有连接读卡器并尝试下载，我会收到此错误

> 命令 0x31 未发送

任何人都可以对此有所了解吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T22:12:53.810

这是一个非常典型的串口协议。字节顺序是最小字节序。前两个字节是块号，即响应与请求的匹配方式以及如何检测数据包丢失。接下来的两个字节是消息的长度，以字节为单位。消息中的字节如下。最后两个字节是校验和，是在整个消息中添加字节的结果。Big-endian 出于某种奇怪的原因，afaict。

这只是协议帧规范，对于一个人来说并不完美，因为它没有显示数据被加扰时会发生什么。*真正*重要的是消息中的数据字节。如果不联系制造商并获取规范，就无法找出这些字节的含义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T22:25:17.360

非常熟悉这些协议，我能想到的唯一方法是：

1.  联系制造商，为您提供他们的软件实用程序用来与卡对话的 API（消息格式）
2.  对 API 协议进行逆向工程。这可能需要付出巨大的努力来弄清楚所有数据字节的含义，这些数据字节的含义会随着卡提供的功能数量呈指数增长。一个好的开始是刷一张卡并记录数据并重新启动硬件，刷第二张卡，记录并重新启动，第三张卡也是如此。然后在二进制消息之间进行二进制差异，以找出从一张卡更改为另一张卡的字节。

# python-3.x - Python打印一个对象

> ID：11002111
> 
> 赞同：0
> 
> 时间：2012-06-12T17:54:29.410
> 
> 标签：python-3.x

在下面的代码中，我需要打印联系人列表对象。我该怎么做？

```
# Test.py
class ContactList(list):
    def search(self, name):
        '''Return all contacts that contain the search value
        in their name.'''
        matching_contacts = []
        for contact in self:
            if name in contact.name:
                matching_contacts.append(contact)
        return matching_contacts

class Contact:
    all_contacts = ContactList()

    def __init__(self, name, email):
        self.name = name
        self.email = email
        self.all_contacts.append(self) 
```

我创建了 2 个 Contact 对象，但想查看 all_contacts 列表中的所有元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:57:43.710

怎么样：

```
print(Contact.all_contacts) 
```

或者：

```
for c in Contact.all_contacts:
    print("Look, a contact:", c) 
```

要控制 Contact 的打印方式，您需要在 Contact 类上定义一个`__str__`or`__repr__`方法：

```
def __repr__(self):
    return "<Contact: %r %r>" % (self.name, self.email) 
```

或者，但是您想代表联系人。

# maven-2 - 部署 Web 应用程序，包括使用 Maven2 在 Glassfish 中进行测试

> ID：11002114
> 
> 赞同：0
> 
> 时间：2012-06-12T17:54:40.063
> 
> 标签：maven-2, glassfish

最近，我使用 Eclipse 和 Oracle Glassfish 服务器插件在服务器上部署我的 web 应用程序。

但是，我想使用 Maven 2 以批处理模式执行此操作，并在部署之前进行一些测试。

我想做以下任务：

1.  从任何存储库（我应该使用哪个？）获取所需的依赖项（如果有的话）。
2.  运行单元测试
3.  如果测试成功，部署它

我正在运行 Maven 2 和 Glassfish 3.2.1

你能支持我一些示例项目，包括 pom.xml 文件吗？这种事情有知识资源吗？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:04:22.177

你描述的过程很常见。确实，maven 本身会

> 构建生命周期由阶段组成
> 
> 这些构建生命周期中的每一个都由不同的构建阶段列表定义，其中构建阶段代表生命周期中的一个阶段。
> 
> 例如，默认生命周期具有以下构建阶段（有关构建阶段的完整列表，请参阅生命周期参考）：
> 
> *   验证 - 验证项目是否正确并且所有必要的信息都可用
> *   compile - 编译项目的源代码 test - 使用合适的单元测试框架测试编译好的源代码。这些测试不应该要求打包或部署代码
> *   package - 获取编译后的代码并将其打包成可分发的格式，例如 JAR。
> *   集成测试 - 如有必要，将包处理并部署到可以运行集成测试的环境中
> *   验证 - 运行任何检查以验证包是否有效并符合质量标准
> *   install - 将包安装到本地存储库中，作为本地其他项目的依赖项
> *   部署 - 在集成或发布环境中完成，将最终包复制到远程存储库以与其他开发人员和项目共享。这些构建阶段（以及此处未显示的其他构建阶段）按顺序执行以完成默认生命周期。鉴于上述构建阶段，这意味着当使用默认生命周期时，Maven 将首先验证项目，然后尝试编译源代码，针对测试运行它们，打包二进制文件（例如 jar），针对该项目运行集成测试package，验证包，将验证过的包安装到本地仓库，然后将安装好的包部署到指定的环境中。
>     
>     
>     
>     要完成所有这些，您只需要调用要执行的最后一个构建阶段，在这种情况下，部署：
>     
>     
>     
>     mvn 部署

您应该使用[maven glassfish 插件](http://maven-glassfish-plugin.java.net/)，然后执行

```
mvn glassfish:deploy 
```

这里是来自官方文档的完整示例：

```
 ...
    <build>
        ...
        <plugins>
            ...
            <plugin>
                <groupId>org.glassfish.maven.plugin</groupId>
                <artifactId>maven-glassfish-plugin</artifactId>
                <version>2.1</version>
                <configuration>
                    <glassfishDirectory>${glassfish.home}</glassfishDirectory>
                    <user>${domain.username}</user>
                    <adminPassword>${domain.password}</adminPassword>
                    <!-- <passFile>path/to/asadmin/passfile</passFile> -->
                    <autoCreate>true</autoCreate>
                    <debug>true</debug>
                    <echo>false</echo>
                    <terse>true</terse>
                    <skip>${test.int.skip}</skip>
                    <domain>
                        <name>${project.artifactId}</name>
                        <adminPort>4848</adminPort>
                        <httpPort>8080</httpPort>
                        <httpsPort>8443</httpsPort>
                        <iiopPort>3700</iiopPort>
                        <jmsPort>7676</jmsPort>
                        <reuse>false</reuse>
                        <jvmOptions>
                            <option>-Djava.security.auth.login.config=${project.build.testOutputDirectory}/login.conf</option>
                        </jvmOptions>
                        <properties>
                            <property>
                                <name>server.log-service.file</name>
                                <value>${domain.log.dir}/server.log</value>
                            </property>
                        </properties>
                        <auth>
                            <realm>
                                <name>testRealm</name>
                                <className>com.sun.enterprise.security.auth.realm.file.FileRealm</className>
                                <properties>
                                    <property>
                                        <name>jaas-context</name>
                                        <value>test</value>
                                    </property>
                                    <property>
                                        <name>file</name>
                                        <value>${project.build.outputDirectory}/keyfile</value>
                                    </property>
                                </properties>
                            </realm>
                        </auth>
                        <!-- <resourceDescriptor>path/to/resources.xml</resourceDescriptor> -->
                        <resources>
                            <connectionFactory>
                                <jndiName>jms/testQueueConnectionFactory</jndiName>
                                <type>queueConnectionFactory</type>
                                <properties>
                                    <property>
                                        <name>UserName</name>
                                        <value>guest</value>
                                    </property>
                                    <property>
                                        <name>Password</name>
                                        <value>guest</value>
                                    </property>
                                    <property>
                                        <name>AddressList</name>
                                        <value>localhost:7676</value>
                                    </property>
                                </properties>
                            </connectionFactory>
                            <jmsTopic>
                                <jndiName>jms/testTopic</jndiName>
                                <destinationName>TestTopic</destinationName>
                                <connectionFactory>
                                    <jndiName>jms/testTopicConnectionFactory</jndiName>
                                    <properties>
                                        <property>
                                            <name>UserName</name>
                                            <value>guest</value>
                                        </property>
                                        <property>
                                            <name>Password</name>
                                            <value>guest</value>
                                        </property>
                                        <property>
                                            <name>AddressList</name>
                                            <value>localhost:7676</value>
                                        </property>
                                    </properties>
                                </connectionFactory>
                            </jmsTopic>
                            <jdbcDataSource>
                                <name>SomeDS</name>
                                <type>connectionPoolDataSource</type>
                                <poolName>SomePool</poolName>
                                <className>com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource</className>
                                <description>Some JDBC Connection Pool</description>
                                <allowNonComponentCallers>false</allowNonComponentCallers>
                                <validateConnections>true</validateConnections>
                                <validationMethod>metaData</validationMethod>
                                <properties>
                                    <property>
                                        <name>portNumber</name>
                                        <value>3306</value>
                                    </property>
                                    <property>
                                        <name>password</name>
                                        <value>somePassword</value>
                                    </property>
                                    <property>
                                        <name>user</name>
                                        <value>someUser</value>
                                    </property>
                                    <property>
                                        <name>serverName</name>
                                        <value>some.host.somewhere</value>
                                    </property>
                                    <property>
                                        <name>databaseName</name>
                                        <value>SomeDB</value>
                                    </property>
                                </properties>
                            </jdbcDataSource>
                        </resources>
                    </domain>
                    <components>
                        <component>
                            <name>${project.artifactId}</name>
                            <artifact>${project.build.directory}/artifacts/${project.build.finalName}.war</artifact>
                        </component>
                    </components>
                </configuration>
            </plugin>
            ...
        </plugins>
        ...
    </build>
    ...
</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:03:37.047

我假设您的意思是 GlassFish Server 3.1.2 :-)

嵌入式服务器指南中介绍了将 Maven 与 GlassFish 文档结合使用：http:
[//docs.oracle.com/cd/E26576_01/doc.312/e24932/embedded-server-guide.htm#gijhs](http://docs.oracle.com/cd/E26576_01/doc.312/e24932/embedded-server-guide.htm#gijhs)

希望这可以帮助。

# .net - 有没有办法将 ObjectXPathNavigator 与 JSON.NET 一起使用？

> ID：11002116
> 
> 赞同：0
> 
> 时间：2012-06-12T17:54:41.123
> 
> 标签：.net, json, xpath, json.net

我需要将 XPath 应用于 JSON 对象。我可以使用这个库将 JSON 转换为 XML，然后使用 XPath。但我想知道是否有办法在某种 JSON 对象上使用 ObjectXPathNavigator - 那会更快吗？

我采用这种方法是因为 JSON 查询没有标准（请参阅[this](https://stackoverflow.com/questions/777455/is-there-a-query-language-for-json)和[this](https://stackoverflow.com/questions/8481380/is-there-a-json-equivalent-of-xquery-xpath)）。XPath 似乎可以很好地映射，并且是一个众所周知的标准。

谢谢 - 戴夫

# iphone - objective-c - 删除后重新设置发件人标签

> ID：11002119
> 
> 赞同：0
> 
> 时间：2012-06-12T17:54:47.320
> 
> 标签：iphone, objective-c, view, sender

删除项目时，有没有办法像 NSMutableArray 一样重新设置发件人标签？我的标签看起来像：1、2、3、4... 20。当我删除视图时，我想检索正确的顺序，而不是 1、2、4、5... 如果我要删除视图3号。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:15:59.457

不，您必须手动完成。从已删除视图的标签中迭代父视图的子视图。

另一种方法是：如果您以预定义的顺序添加这些视图，则可以使用子视图数组的索引。

# windows - 无法将密码发送到 ftp 服务器

> ID：11002124
> 
> 赞同：2
> 
> 时间：2012-06-12T17:55:11.947
> 
> 标签：windows, emacs, ftp, tramp, emacsw32

我在我的 Windows 7 上运行 filezilla ftp 服务器

我正在运行 emacs w32 客户端（GNU Emacs 23.1.50.1）

我的 ~/.emacs 配置文件包含：

```
M-x (setq ange-ftp-ftp-program-name "C:/cygwin/bin/ftp.exe") ;;http://www.emacswiki.org/emacs/AngeFtp -> ftp://ftp.gnu.org/old-gnu/emacs/windows/contrib/ftp-for-win32.zip
M-x (setq tramp-default-method "ftp") 
```

但我无法连接到我的本地主机，但是

```
explorer ftp://mycustomlogin:mycustonpassword@localhost 
```

工作正常并显示文件夹内容，因此 ftp 服务器运行良好。

如果我尝试执行

```
M-x load-file RET /mycustomlogin@localhost:/index.php 
```

它提示我登录。在 filezilla 日志中，我看到登录已被接受，然后我被要求在 minibuffer 中输入 ftp.exe 的密码，然后再次在 ftp-connection 缓冲区中输入密码。

*问题是我无法从 windows 连接到 ftp 服务器*，整个过程在 linux ubuntu 上完成得非常好。有没有人尝试在 emacsw32 上这样做并为他/她工作？

有画面的问题 ![emacs ftp 画面](../Images/147a147f4c0aad506b5d03d9a28148d9.png)

# java - JAXB 通过套接字解组问题

> ID：11002131
> 
> 赞同：1
> 
> 时间：2012-06-12T17:55:21.073
> 
> 标签：java, sockets, jaxb, unmarshalling

对不起，我重复一个话题。但我不明白这里的答案

[https://stackoverflow.com/a/9598909/1404852](https://stackoverflow.com/a/9598909/1404852) “Kafka”说他使用 XMLEventWriter 修复了解组块。导致建议写入流字符串，然后将它们连接到不适合我的解组。

我有这样的代码。

```
public class InputThread implements Runnable {
    private BufferedReader in;  
    private String fserver; // = CharBuffer.allocate(0);
    private static final Logger LOG = Logger.getLogger(InputThread.class);
    private JAXBContext jaxbContext;
    private Unmarshaller jaxbUnmarshaller;
    private XMLProtocol protocol;

    public InputThread(Socket fromserver, BufferedReader in) throws IOException, JAXBException {
        jaxbContext = JAXBContext.newInstance(XMLProtocol.class);
        jaxbUnmarshaller = jaxbContext.createUnmarshaller();
        this.in = in;
        new Thread(this);
    }

    public void run() {
        while (true) {
            try {
                if (in.ready()) 

                    protocol = (XMLProtocol) jaxbUnmarshaller.unmarshal(in);

            }
        }
    }

} 
```

或者在服务器端我应该插入流的结尾？但我认为 JAXB 可以做任何事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T00:52:38.633

流可以预先对长度进行编码，它可以以 EOF 之类的特殊字符结尾，或者服务器可以关闭连接。如果您预先对长度进行编码，您可能需要构建某种特殊的输入流，在那么多字符之后自行关闭。这就像带有 Content-Length 标头和流水线的 HTTP。如果以 EOF 之类的特殊字符结尾，则必须将该字符视为保留字符。此外，如上所述，您将需要一个特殊的输入流。这次它在读取特殊字符时很接近。它不能出现在您的数据中，因为它现在是一个元字符。关闭连接就像没有流水线的 HTTP。

# c++ - 错误：未在此范围内声明“类”

> ID：11002135
> 
> 赞同：4
> 
> 时间：2012-06-12T17:55:38.033
> 
> 标签：c++, class, templates, declaration

我想问一下，如何在另一个类中定义类。在下面的代码中。我尝试以 #define "CCompField.h" 的方式定义它，但它不起作用。:(。我认为这是一个很常见的编程问题，可能在互联网上解决了100000次，但我不知道如何找到它。谢谢帮助。

```
#ifndef CNEWGAME_H
#define CNEWGAME_H

class CNewGame{
    public:
               CNewGame();
              ~CNewGame();

        void  BeginnerGame();
        void  IntermediateGame();
        void  AdviceGame();
        void  HowToPlay();
        void  NetGame( int mode );

        int MoveInMenu();

    protected:
        void  Intro();
        void  Animation ();
        void  Menu(int);
         int  MoveInNetMenu();
        void  NetMenu(int);

        void  HeadOfGame();
template <class T> void BodyOfGame(CCompField & b, T & a);
        void  FooterOfGame();
};

#endif 
```

它会产生以下错误。

```
In file included from src/CNewGame.cpp:12:0:
src/CNewGame.h:37:36: error: ‘CCompField’ was not declared in this scope
src/CNewGame.h:37:45: error: ‘b’ was not declared in this scope
src/CNewGame.h:37:50: error: expected primary-expression before ‘&amp;’ token
src/CNewGame.h:37:52: error: ‘a’ was not declared in this scope
src/CNewGame.h:37:53: error: variable or field ‘BodyOfGame’ declared void 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:58:34.277

而不是`#define "CCompField.h"`你需要包括它：

```
#include "CCompField.h" 
```

你还有一对额外的

```
#ifndef CNEWGAME_H
#define CNEWGAME_H 
```

但只有一关`#endif`。你不需要第二对`#ifndef`/`#define`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:58:03.790

> 我尝试以 #define "CCompField.h" 的方式定义它，但它不起作用。:(

您需要找出`CCompField`定义的头文件和`#include`（不是`#define`）它来自`CNewGame.h`.

# c++ - 列表迭代器不可取消引用

> ID：11002140
> 
> 赞同：0
> 
> 时间：2012-06-12T17:56:07.410
> 
> 标签：c++, list, iterator

我一直在寻找与迭代器相同的问题；我发现了很多标题几乎相同的主题，以及类似的问题，但我的有点不同。

我试图在特定位置获取 *iterator，但在运行时出现错误：“list iterator not deferencable”，这是我的代码：

```
 CompetidorFormula2000* retornarCompetidorF2000(int pos){
        list<Competidor*>::iterator itr=miLista.begin();
        CompetidorFormula2000* f1=new CompetidorFormula2000(); 

        if(pos>0 && pos<=miLista.size()){
            advance(itr,pos);

        }
        f1=(CompetidorFormula2000*) (*itr);
        return f1;
        delete f1;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:58:31.840

如果`pos`等于`miLista.size()`，那么您将获得一个指向列表末尾的迭代器，与您调用`miLista.end()`. 列表末尾的迭代器是*不可取消引用*的。

# actionscript-3 - 如何在 Flash actionscript3 中动态加载图像？

> ID：11002143
> 
> 赞同：0
> 
> 时间：2012-06-12T17:56:18.097
> 
> 标签：actionscript-3, flash, actionscript, 3d

我想在 Flash actionscript 中动态加载图像，如下所示：![在此处输入图像描述](../Images/02efb0858e13802b23ed5bd823cd58d5.png)

当用户选择它应该包含在框架内而不是黑色平面框内的图像时。我在想如果我可以将该图像应用为那个黑色平面框（我在框架内单独绘制）的背景图像，那就太好了。因为这里的问题是图像在框架内应该看起来像 3D，所以也许背景或纹理方法可以解决这个问题。请朋友给我建议...

谢谢。

# android - 应用程序开始加载 Facebook 然后退出

> ID：11002145
> 
> 赞同：0
> 
> 时间：2012-06-12T17:56:40.073
> 
> 标签：android, facebook

我按照[本](http://hossaindoula.blogspot.hu/2011/06/android-facebook-tutorial.html)教程将 facebook 实现到我的应用程序中。我想要的只是在用户的墙上贴上一段文字。我像 RyanM 所说的那样导入了所有必要的[文件](https://stackoverflow.com/questions/2953146/android-java-post-simple-text-to-facebook-wall)。

问题：当我没有提供应用程序 ID 时，facebook 开始加载，然后说发生了错误。然后我点击右上角的 OKAY 并加载 facebook。为什么？

还有另一个用于在墙上张贴的按钮。我不想要任何按钮，我应该把`postOnWall("Testing from Android");`线放在哪里？我希望帖子在用户登录后立即出现在用户墙上。

当我提供我的应用程序 ID 时，facebook 开始加载然后退出。为什么？

后期活动：

```
package com.bfarago.af2;

import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;

public class PostActivity extends FacebookActivity {
    /** Called when the activity is first created. */
    private TextView txtUserName;
    private ProgressBar pbLogin;
    private Button btnLogin;
    private Button btnWall;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        txtUserName = (TextView) findViewById(R.id.textFacebook);
        pbLogin = (ProgressBar) findViewById(R.id.progressLogin);
        btnLogin = (Button) findViewById(R.id.buttonLogin);
        btnWall = (Button) findViewById(R.id.buttonWall);

        btnLogin.setOnClickListener(listener);
        btnWall.setOnClickListener(listener1);
    }

    OnClickListener listener = new OnClickListener(){
        @Override
        public void onClick(View v) {
            // pbLogin.setVisibility(ProgressBar.VISIBLE);
            setConnection();
            getID(txtUserName, pbLogin);
            postOnWall("Testing from Android");
        }
    };

    OnClickListener listener1 = new OnClickListener(){
        @Override
        public void onClick(View v) {
        // postOnWall("Testing from Android");
        }
    };
} 
```

脸书活动：

```
package com.bfarago.af2;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.MalformedURLException;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;

import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.AsyncFacebookRunner.RequestListener;
import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;
import com.facebook.android.Util;

public abstract class FacebookActivity extends Activity {
    public static final String TAG = "FACEBOOK";
    private Facebook mFacebook;
    public static final String APP_ID = "394196520626466"; //the API Key for your Facebook APPs
    private AsyncFacebookRunner mAsyncRunner;
    private static final String[] PERMS = new String[] { "publish_stream" };
    private SharedPreferences sharedPrefs;
    private Context mContext;

    private TextView username;
    private ProgressBar pb;

    public void setConnection() {
            mContext = this;
            mFacebook = new Facebook(APP_ID);
            mAsyncRunner = new AsyncFacebookRunner(mFacebook);
    }

    public void getID(TextView txtUserName, ProgressBar progbar) {
            username = txtUserName;
            pb = progbar;
            if (isSession()) {
                    Log.d(TAG, "sessionValid");
                    mAsyncRunner.request("me", new IDRequestListener());
            } else {
                    // no logged in, so relogin
                    Log.d(TAG, "sessionNOTValid, relogin");
                    mFacebook.authorize(this, PERMS, new LoginDialogListener());
            }
    }

    public boolean isSession() {
            sharedPrefs = PreferenceManager.getDefaultSharedPreferences(mContext);
            String access_token = sharedPrefs.getString("access_token", "x");
            Long expires = sharedPrefs.getLong("access_expires", -1);
            Log.d(TAG, access_token);

            if (access_token != null && expires != -1) {
                    mFacebook.setAccessToken(access_token);
                    mFacebook.setAccessExpires(expires);
            }
            return mFacebook.isSessionValid();
    }

    private class LoginDialogListener implements DialogListener {

            @Override
            public void onComplete(Bundle values) {
                    Log.d(TAG, "LoginONComplete");
                    String token = mFacebook.getAccessToken();
                    long token_expires = mFacebook.getAccessExpires();
                    Log.d(TAG, "AccessToken: " + token);
                    Log.d(TAG, "AccessExpires: " + token_expires);
                    sharedPrefs = PreferenceManager
                                    .getDefaultSharedPreferences(mContext);
                    sharedPrefs.edit().putLong("access_expires", token_expires)
                                    .commit();
                    sharedPrefs.edit().putString("access_token", token).commit();
                    mAsyncRunner.request("me", new IDRequestListener());
            }

            @Override
            public void onFacebookError(FacebookError e) {
                    Log.d(TAG, "FacebookError: " + e.getMessage());
            }

            @Override
            public void onError(DialogError e) {
                    Log.d(TAG, "Error: " + e.getMessage());
            }

            @Override
            public void onCancel() {
                    Log.d(TAG, "OnCancel");
            }
    }

    private class IDRequestListener implements RequestListener {

            @Override
            public void onComplete(String response, Object state) {
                    try {
                            Log.d(TAG, "IDRequestONComplete");
                            Log.d(TAG, "Response: " + response.toString());
                            JSONObject json = Util.parseJson(response);

                            final String id = json.getString("id");
                            final String name = json.getString("name");
                            FacebookActivity.this.runOnUiThread(new Runnable() {
                                    public void run() {
                                            username.setText("Welcome: " + name+"\n ID: "+id);
                                            pb.setVisibility(ProgressBar.GONE);

                                    }
                            });
                    } catch (JSONException e) {
                            Log.d(TAG, "JSONException: " + e.getMessage());
                    } catch (FacebookError e) {
                            Log.d(TAG, "FacebookError: " + e.getMessage());
                    }
            }

            @Override
            public void onIOException(IOException e, Object state) {
                    Log.d(TAG, "IOException: " + e.getMessage());
            }

            @Override
            public void onFileNotFoundException(FileNotFoundException e,
                            Object state) {
                    Log.d(TAG, "FileNotFoundException: " + e.getMessage());
            }

            @Override
            public void onMalformedURLException(MalformedURLException e,
                            Object state) {
                    Log.d(TAG, "MalformedURLException: " + e.getMessage());
            }

            @Override
            public void onFacebookError(FacebookError e, Object state) {
                    Log.d(TAG, "FacebookError: " + e.getMessage());
            }

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            mFacebook.authorizeCallback(requestCode, resultCode, data);
    }

    public void postOnWall(String msg) {
        Log.d("Tests graph API %%%%%$$$$%%%", msg);
         try {
                String response = mFacebook.request("me");
                Bundle parameters = new Bundle();
                parameters.putString("message", msg);
                parameters.putString("description", "test test test");
                response = mFacebook.request("me/feed", parameters, 
                        "POST");
                Log.d("Tests", "got response: " + response);
                if (response == null || response.equals("") || 
                        response.equals("false")) {
                   Log.v("Error", "Blank response");
                }
         } catch(Exception e) {
             e.printStackTrace();
         }
    }

} 
```

我想要的是：

![在此处输入图像描述](../Images/29a40e16c3101a3f551f202743572f83.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:25:32.013

以下是您的代码发生的情况：

用户单击调用该`OnClickListener.onClick`方法的任何按钮。
此方法调用`setConnection`构造 facebook 对象并返回的活动的方法。
然后`getID`调用该方法来检查用户是否被授权。

如果用户被授权你发出一个**异步**请求`/me`，然后该方法返回立即调用`postOnWall`。
问题是`/me/feed`在异步请求与数据一起返回之前发送请求。

如果用户未获得授权，则您调用`mFacebook.authorize`，并在此`onComplete`方法中再次发出**异步**请求，`/me`但不要等待它完成后再调用`postOnWall`。

在这两种情况下，您都需要等待异步请求完成，例如：

```
OnClickListener listener = new OnClickListener(){
    @Override
    public void onClick(View v) {
        // pbLogin.setVisibility(ProgressBar.VISIBLE);
        setConnection();
        getID(txtUserName, pbLogin);
    }
}; 
```

并且（请注意，我将`postOnWall`调用移至`onComplete`此处）：

```
private class IDRequestListener implements RequestListener {
    @Override
    public void onComplete(String response, Object state) {
            try {
                    Log.d(TAG, "IDRequestONComplete");
                    Log.d(TAG, "Response: " + response.toString());
                    JSONObject json = Util.parseJson(response);

                    final String id = json.getString("id");
                    final String name = json.getString("name");
                    FacebookActivity.this.runOnUiThread(new Runnable() {
                            public void run() {
                                    username.setText("Welcome: " + name+"\n ID: "+id);
                                    pb.setVisibility(ProgressBar.GONE);

                            }
                    });
                    postOnWall("Testing from Android");
            } catch (JSONException e) {
                    Log.d(TAG, "JSONException: " + e.getMessage());
            } catch (FacebookError e) {
                    Log.d(TAG, "FacebookError: " + e.getMessage());
            }
    }

    ... 
```

# c# - 如何在 C# 中获取当前登录的用户名？

> ID：11002147
> 
> 赞同：2
> 
> 时间：2012-06-12T17:56:46.443
> 
> 标签：c#

> **可能重复：**
> [在 C# 中获取登录用户名](https://stackoverflow.com/questions/4040290/get-the-logged-on-user-name-in-c-sharp)

C# 应用程序可以直接执行（双击 exe），也可以以管理员身份执行（以管理员身份运行）。

即使在简单的用户帐户中，我也需要以管理员身份运行我的应用程序（以管理员身份运行）。

我想使用 C# 获取当前登录的用户名（但我得到了 admin 的用户名）。

我尝试了许多选项，例如：Environment.Username、WindowsIdentity 类等。它给了我管理员的用户名（因为我以管理员身份运行 exe）而不是当前登录的用户名。

这是一个在.net 3.5 上开发的winForm 应用程序。应用程序可执行文件通过 vb 脚本在管理员登录的情况下执行。vb 脚本在用户登录时以 soos 方式执行。

这四个中有许多类似的查询，但所有答案都提供了管理员的用户名，而不是当前登录的用户用户名。因此我发布了这个问题。

请回答我的问题。提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:08:33.227

这里有几个答案：[Get the logged on user name in C#](https://stackoverflow.com/questions/4040290/get-the-logged-on-user-name-in-c-sharp)

我会先尝试 Win32 api。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:01:10.933

您可以尝试查询会话列表。

[检索登录会话信息](http://msdn.microsoft.com/en-us/library/aa379437%28VS.85%29.aspx)

您可以通过查找不是管理员会话的活动会话来找出当前登录的实际用户。

[http://pinvoke.net/](http://pinvoke.net/)包含有关如何从 C# 调用本机方法的信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T18:11:36.420

您可以使用`System.Security.Principal.WindowsIdentity.GetCurrent().Name;`并将其分配给`string`.

例如：

```
string username = System.Security.Principal.WindowsIdentity.GetCurrent().Name; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T18:15:02.330

这应该做的工作 -

```
AppDomain appDomain = Thread.GetDomain();
appDomain.SetPrincipalPolicy(PrincipalPolicy.WindowsPrincipal);
WindowsPrincipal windowsPrincipal = (WindowsPrincipal)Thread.CurrentPrincipal;

Console.WriteLine(windowsPrincipal.Identity.Name); 
```

# c# - 从其后面的代码访问用户控件（ascx）的父 DIV

> ID：11002148
> 
> 赞同：2
> 
> 时间：2012-06-12T17:57:02.153
> 
> 标签：c#, asp.net, code-behind

在 ASP .NET Web 用户控件 ( `ascx`) 的代码隐藏中，我需要（在运行时）访问其父元素，即 div 元素。目的很简单，就是修改提到的父 div 的可见性。

我不能接触太多的网页代码，所以我需要一个只需要修改用户控件代码的解决方案。

所以在网页代码的HTML“部分”中，我有这个：

```
<div id="parentDIV" runat="server">
    <uc:MyUserControl ID="myUserControlInstance" runat="server" />
</div> 
```

我想在用户控件后面的代码中做这样的事情：

```
this.Container.Visible = false; 
```

请注意，我不是在问这是否是一种好习惯。

**编辑：** 后面的用户控制代码不“知道”父 DIV 的 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:14:59.777

我会把它隐藏在客户端上。用“awesomeUserControl”之类的类装饰您的用户控件容器（div？）。然后使用 ScriptManager 对象发出一些 javascript 来隐藏父对象，如下所示：

> ScriptManager.RegisterStartupScript(this, this.GetType(), "HideMyAwesomeUserControl", "$('.awesomeUserControl').parent().hide();", true);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:06:25.473

**更好的方法...**

您应该做的是在您的用户控件中创建一个自定义事件，您的容器将订阅该事件 - 非常类似于订阅按钮事件，只是这是您的自定义控件。此事件将信息传递给您的容器，然后容器可以从中辨别出它需要什么，例如 div 是否应该/不可见。

它可能看起来像：

```
protected void Page_Load(object sender, EventArgs e)
{
    this.myuserControl.Update += new MyUserControlUpdateEventHandler(myuserControl_Update);
}

void myuserControl_Update(object sender, MyuserControlEventArgs e)
{
    this.parentDiv.visible = !e.ShouldHideUI;
} 
```

此方法将您的父级与用户控件解耦，即您的用户控件不必了解所有父级控件，也不应该了解。

如果你好奇，这里有一个***粗略***的例子来说明你的用户控件将如何定义这样一个事件：

```
public class MyuserControlEventArgs : EventArgs 
{
    public bool ShouldHideUI { get;set;}
    public MyuserControlEventArgs (bool shouldHideUI) 
    {
         this.ShouldHideUI = shouldHideUI;
    }
}
public delegate void MyUserControlUpdateEventHandler(object sender, MyuserControlEventArgs e);
public event MyUserControlUpdateEventHandler Update;
protected void OnUpdate(MyuserControlEventArgs e)
{
    if (Update!= null)
        Update(this, e);
} 
```

您的用户控件只需要在其订阅者需要了解它时调用 OnUpdate。

**快速而肮脏的方式......**

如果您需要快速和肮脏，那么试试这个（在您的用户控件内）：

```
TheParentControl parentControl = (TheParentControl)this.Parent;
parentControl.ParentDiv.Visible = true; 
```

关键是转换*为适当的类型*（显然你的用户控件会知道它有什么类型的父级），然后设置父级的属性。您可能会将您的 div 公开为父控件中的属性。请注意，该父级可以是您的用户控件所在的控件集合中的任何控件（页面、FooControl、BarControl 等）。一旦您获得了父级的句柄，您甚至`FindControl()`可以按名称查找控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:02:02.320

您快到了....

```
this.Parent.Visible = false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:05:42.257

当所有控件都被渲染时，`HTML`父子控件可以如下确定。

我正在使用 while 循环，所以如果您添加一些其他中间控件，它可能不会导致崩溃或意外结果。

```
public Control ParentControl
{
    get
    {
        Control ctl = this.Parent;
        while (true)
        {
            if (ctl == null) break;
            if (ctl.ID.Equals("parentDIV"))
            {
                break;
            }
            ctl = ctl.Parent;
        }
        return ctl;
    }
}

if(ParentControl != null)
    ParentControl.Visible = true|false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-17T16:26:32.623

我错过了什么吗，听起来你有一个用户控件和一个 aspx 页面（两者都有代码）。用户控件似乎已添加到 aspx 页面中，并包含在一个 div 中。您已经使 div 控件运行在服务器上（尽管您仍然可以通过 htmlcontrol 执行此操作）。管理 div 所需要做的就是：

parentDIV.visible = false;

或者你需要对 div 做的任何事情。

为什么背后的 UC 代码需要知道 APSX 页面 DIV，它不需要。

# eclipse - 用于远程系统的 eclipse 插件

> ID：11002154
> 
> 赞同：0
> 
> 时间：2012-06-12T17:57:25.647
> 
> 标签：eclipse, plugins

我可以从 eclipse 中获得“远程服务器系统”的插件是什么？我只想从远程服务器打开文件并从特定的主文件夹继续我的 Web 项目。

我还需要能够输入 mysql 数据库，以便 eclipse 也能够调试它。

有这样的插件吗？我一直在寻找这个很长时间，但我没有找到任何。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:27:25.977

您可能正在寻找[Remote Systems Explorer](http://www.eclipse.org/tm/)，它是 Eclipse 中目标管理项目的一部分。

# javascript - Selenium：IE8 CSS 定位器

> ID：11002162
> 
> 赞同：2
> 
> 时间：2012-06-12T17:57:54.710
> 
> 标签：javascript, internet-explorer, internet-explorer-8, selenium-webdriver

我在 IE 7、8、9 中使用 selenium，由于某种原因，一些 CSS 3 定位器在 IE 7 和 9 中工作，但不是 8。这是定位器的代码：

**即 9**

`tab = driver.find_element_by_css_selector('ul.tabs:nth-of-type(1) li:nth-of-type(%d)' % x)`

**即 7**

`tab = driver.find_element_by_css_selector('ul.tabs:eq(1) li:nth-child(%d)' % x)`

但在 IE 8 中，使用`nth-child, or :eq, or nth-of-type`定位器会产生一个 WebDriverException，表示它找不到该元素。

此外，上面的代码通过开发控制台在 IE 8 上运行，它只是不适用于 selenium（可能是因为 selenium 使用 Sizzle 作为选择器）。

谁能告诉我为什么这在 IE 8 上不起作用，或者提出可行的解决方法。`ul.tabs:eq(1) > li:nth-child(%d)`（我已经尝试过在选择器之间插入s 之类的东西`>`，但这没有用）

我正在使用 selenium server 2.23，带有 IEDriverServer 32 位和 python 2.23 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:58:39.393

正如@AJ 所说，Selenium 2 使用浏览器的原生 CSS 选择器（如果它们可用）。所以在这种情况下，它使用了 IE 7 的 Sizzle，以及 IE 8 和 9 的原生选择器。显然，IE 8 的选择器无法正确处理事情。

我最终使用的解决方法是`ul.tabs`通过后代选择器定位正确的目标，然后使用`+`选择器和 jQuery 的`next()`方法来遍历列表。

# node.js - mqtt.js 节点 - 使用消息传递 qos

> ID：11002164
> 
> 赞同：1
> 
> 时间：2012-06-12T17:57:55.787
> 
> 标签：node.js, mqtt, qos

我正在使用 MQTT.js 为我的新应用程序创建代理。在过去的几个小时里，我一直在努力传递 QoS 标志。我可以轻松传递 messageId、dup、保留标志，但不能传递 QoS。我的代码相当简单，在客户端（使用 MQTT.js 创建）我这样做：

```
client.publish({ messageId: 1001, qos: 1, topic: ..., payload: ... }); 
```

在服务器上，我正在执行以下操作：

```
client.on('publish', function(packet) {
  for ( var key in packet ) {
    util.puts(i+'::'+packet[i]);
  }
}); 
```

无论我在客户端上设置什么 QoS，我总是在服务器上得到 0。我期待这能开箱即用。有人有这方面的经验吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:22:36.960

我找到了解决这个问题的方法。作者的动作其实挺快的。解决方案在以下拉取请求中：[https ://github.com/adamvr/MQTT.js/pull/18](https://github.com/adamvr/MQTT.js/pull/18)

# sql - 分组时COUNT不正确？

> ID：11002169
> 
> 赞同：6
> 
> 时间：2012-06-12T17:58:06.273
> 
> 标签：sql, group-by

我正在尝试使用下表**显示管理其他员工的每个员工的员工编号以及他或她管理的**人数**emp**。

```
empno  ename   job         mgr         hiredate    sal      comm       deptno
-----  ------  ----------  ----------  ----------  -------  -------    ------
7369   Smith   Clerk       7902        1980-12-17  800                 20
7499   Allen   Salesman    7698        1981-02-20  1600     300        30
7521   Ward    Salesman    7698        1981-02-22  1250     500        30
7566   Jones   Manager     7839        1981-04-02  2975                20
7654   Martin  Salesman    7698        1981-09-28  1250     1400       30
7698   Blake   Manager     7839        1981-05-01  2850                30
7782   Clark   Manager     7839        1981-06-09  2450                10
7788   Scott   Analyst     7566        1982-12-09  3000                20
7839   King    President               1981-11-17  5000                10
7844   Turner  Salesman    7698        1981-09-08  1500     0          30
7876   Adams   Clerk       7788        1983-01-12  1100                20
7900   James   Clerk       7698        1983-12-03  950                 30
7902   Ford    Analyst     7566        1983-12-13  3000                20
7934   Miller  Clerk       7782        1982-01-23  1300 
```

知道我该怎么做吗？

我试过了

```
select empno,count(mgr) from emp group by empno,mgr; 
```

但这会返回：

```
empno       count(mgr)
----------  ----------
7369        1
7499        1
7521        1
7566        1
7654        1
7698        1
7782        1
7788        1
7839        0
7844        1
7876        1
7900        1
7902        1
7934        1 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:02:40.680

`select count(*) from employee_table group by mgr`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T18:04:32.710

我实际上会按 分组`mgr`，然后每个经理都有一个组，并且可以计数以查看该经理管理的人数。然后，您可以在表上进行自联接以获取该经理的信息。就像是：

```
SELECT E1.Mgr, E2.ename, Count(*) as Number FROM Employees E1
INNER JOIN Employees E2 ON E1.mgr = E2.empno
GROUP BY E1.Mgr 
```

虽然我没有测试过这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:33:58.763

您可以尝试这些不使用连接的方法：

```
select mgr, count(eno) 
  from employee 
 group by mgr 
```

或者

```
select name, e1.mgr, count(e1.eno) 
  from employee e1
 group by rollup (e1.mgr, name) 
```

# ruby - Devise + Omniauth 仅用于 google 登录

> ID：11002172
> 
> 赞同：3
> 
> 时间：2012-06-12T17:58:27.583
> 
> 标签：ruby, ruby-on-rails-3, login, devise

我正在开发一个将与谷歌 API 交互的网络应用程序。

由于使用该应用程序的唯一方法是通过谷歌帐户，我只想允许通过谷歌帐户登录。

我想我将使用“omniauth-google-oauth2”策略，因为 OAuth2 是访问 google API 的首选方式。为了处理登录本身，我想使用 Devise，因为我不喜欢从头开始编写它（因此重新发明轮子并且必须关心与登录系统相关的所有安全问题）。

我的问题是我可以禁用非谷歌帐户的设计登录吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T18:19:44.647

在您的用户模型中，您将有一条如下所示的行：

```
 devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable, :omniauthable 
```

您要做的只是删除您不想要的策略。可以在[设计存储库的页面](https://github.com/plataformatec/devise)上找到每一个的解释。

实际上，您希望保留`:omniauthable`和删除`:database_authenticatable`提供基于密码的身份验证的服务。

# crystal-reports - Crystal Server / Business Objects Enterprise 自定义重复计划

> ID：11002178
> 
> 赞同：0
> 
> 时间：2012-06-12T17:58:49.640
> 
> 标签：crystal-reports, business-objects, crystal-reports-server

我们有一个带有 SAP Business Objects Enterprise 的 Crystal 服务器。在 SAP 的中央管理控制台 (CMC) 中，我尝试将报告安排为每 15 分钟运行一次（简单），但仅在工作时间（即工作日上午 8 点到下午 6 点之间）运行。

有没有办法创建自定义时间表（除了只允许您选择特定日期的日历）？

提前感谢您提供的任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:14:15.913

取决于您拥有的其他资源...

如果您能够在托管服务器上运行操作系统级别的计划事件，并且您有权创建/操作外部文件，则可以尝试使用事件：

在操作系统级别，执行计划任务（或 cron 作业）以在上午 8 点到下午 6 点之间每 15 分钟运行一次（仅在工作日等）。
1) 检查指定文件是否存在。如果存在，请将其删除。
2）创建文件（或从另一个文件复制，重命名文件等）。
（根据当前文档，事件仅在文件出现时触发——如果您希望报告多次运行，则需要安排每 15 分钟重复一次。）

在 CMC 中，使用文件的绝对路径创建一个新的 FILE 事件。

在 CMC 中，设置 SCHEDULE 时，选择 DAILY，运行“每 X 小时 N 分钟，有事件” 为报告设置定期的每小时（15 分钟重复）计划，但在计划中包括事件。

我现在无法访问我们的系统，否则我会玩这个并且有一些结果要报告。您可能必须结合常规调度（“在这个星期一、星期二、星期三运行......”）和基于事件的调度。

如果您需要该功能，您还可以尝试将常规业务日历与事件相结合。出于常规目的，您甚至可能不需要商务日历。

让我们知道事件和日历的合并如何为您工作。

# backbone.js - require.js 正在请求 html 文件，但将它们作为脚本元素提供

> ID：11002182
> 
> 赞同：1
> 
> 时间：2012-06-12T17:58:59.000
> 
> 标签：backbone.js, requirejs, cors

我正在使用带有文本的 require.js 文本插件！将 xhr 响应呈现为 html 的语法。

```
text       : 'libs/require/text' ... 
```

在我看来，我将它们定义为

```
define([
    'text!templates/categories.html'
    , 'models/Categories'
    , 'views/CategoryView'
    ], ... 
```

一切都在本地正常运行。

但是，当我将此代码推送到服务器时，它开始将 *.html 作为`<script></script>`元素加载。

此外，它还在 .html 文件名上附加了一个 .js 扩展名。

有什么想法吗？正在加载的资产是 CORS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:31:19.843

通过强制文本修复了问题！插件配置为始终执行 CORS。

为此，我添加了以下内容：

```
 require.config({
     text: {
          useXhr: function (u,p,h,p) {
               return true;
           }
      }, ... 
```

我对 CORS 问题的猜测是正确的。直到我将其缩小到文本插件，我才看到它正在尝试在本地加载资产。

我也可以通过执行以下操作来解决这个问题。

```
define([
'text!http://location.com/to/external/domain/aka/cors/templates/categories.html'
, 'models/Categories'
, 'views/CategoryView'
], ... 
```

我明确告诉 require 和文本插件从远处加载这些文件。

埃里克

# android - 签署应用程序多个开发人员

> ID：11002183
> 
> 赞同：1
> 
> 时间：2012-06-12T17:59:12.977
> 
> 标签：android, eclipse

我正在与一个使用 Eclipse 为 android 开发的团队合作。我们经常遇到一个问题，即当不同的开发人员编译了 apk 时，如果不卸载由不同的开发人员/机器编译的应用程序，它将无法安装在设备上。我假设这是因为 eclipse 在编译时运行的自动签名过程。但无法弄清楚如何更改设置/创建我们都可以使用的签名。我们的项目是通过 SVN 共享的..

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:06:16.063

对于生产，只使用一个只有领导者拥有的密钥库，或者给每个人一份副本（不推荐）。

对于开发，选择你最喜欢的机器，并从 ~/.android/debug.keystore 获取它的 debug.keystore。然后将其粘贴到其他机器上的相同位置，覆盖现有位置，或配置 eclipse 以将其用作设置中的调试密钥库（检查 Android -> 构建）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:04:11.707

不确定这是否是最好的方法，但如果你们都共享一个 privateKey，那么只需确保在 Eclipse [http://developer.android.com/guide/publishing/app-signing.html#ExportWizard中导出您的 apk](http://developer.android.com/guide/publishing/app-signing.html#ExportWizard)

可能更好的方法是共享一个调试密钥，并且只有当 apk 准备好发布时，让您的负责人使用 privateKey 在 Google 注册时对其进行签名。

# zend-framework - ZEND SOAP 方法必须通过 SSL 访问

> ID：11002186
> 
> 赞同：1
> 
> 时间：2012-06-12T17:59:18.000
> 
> 标签：zend-framework, soap, ssl, https, zend-soap

我的网站上有 SSL 证书。它是由我的托管服务提供商安装的，我已经测试它安装正确。我正在尝试使用来自 mindbodyonline.com/api 的 SOAP Web 服务，并且在响应中收到此消息

> 此方法必须通过 SSL (HTTPS) 访问。

我正在使用 Zend Framework 的 Soap Client，它一直在为大多数服务工作，但这个特定的服务包含信用卡信息，这可能就是它需要安全连接的原因。我一直无法找到有关如何安全地发送我的 SOAP 请求的任何信息。我正在使用下面的代码创建客户端。

```
$client = new Zend_Soap_Client('https://api.mindbodyonline.com/0_5/ClientService.asmx?WSDL', array("soap_version"=>SOAP_1_1)); 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:51:17.987

WSDL 将所有端点指定为 http 而不是 https。所以我不得不更改 Zend_Soap_Client 构造函数中的端点。Zend_Soap_Client 文档[http://framework.zend.com/manual/en/zend.soap.client.html](http://framework.zend.com/manual/en/zend.soap.client.html)说 location 选项在 WSDL 模式下不起作用，但他们错了。添加 location 选项会覆盖 WSDL 中指定的端点。我让它使用这个代码工作

```
$client = new Zend_Soap_Client('https://api.mindbodyonline.com/0_5/ClientService.asmx?WSDL', array("soap_version"=>SOAP_1_1,'location'=>'https://api.mindbodyonline.com/0_5/ClientService.asmx')); 
```

感谢draw010的帮助！

# c# - Winrt 中的 C# gpgpu

> ID：11002188
> 
> 赞同：2
> 
> 时间：2012-06-12T17:59:23.677
> 
> 标签：c#, windows-runtime, microsoft-metro, gpgpu

基本上问题是如何在 Metro 应用程序中运行 gpgpu 代码。该库不需要专门用于计算，例如，使用 XNA 的 hlsl（最初旨在渲染事物）进行通用计算（XNA 不包含在 Metro 中，因此是我的问题）。默认 Metro 库优于对外部库的引用。

我意识到可以在 C++ 中调用核心 DirectX 函数，但是，我想问是否可以在 Metro 应用程序中使用 C# 中的 gpu。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T03:21:26.087

DirectCompute 在 Metro 应用程序中与[SharpDX](http://sharpdx.org)完美结合使用（因为它来自桌面应用程序，这是相同的 API）。不过，如果您的目标是某些平板电脑，则至少需要 DirectX10 显卡。[如果平板电脑是 10.0 或 10.1，则在 Downlevel hardware 上](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476873%28v=vs.85%29.aspx)使用 Compute Shaders 会有一些限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:23:58.537

实际上，我认为这是不可能的，但是在寻找证明其不可能性的链接时，我想出了[对 SharpDX 的引用](http://code4k.blogspot.com/2011/10/managed-directx-with-win8-metro-style.html)，它声称是一个托管的 DirectX 包装器，它也将支持 Win8 Metro 应用程序。请参阅[这个包含 .hlsl 文件的 SharpDX 示例项目](http://code.google.com/p/sharpdx/source/browse/Samples/Win8/D2DCustomPixelShaderEffect/?r=85b782f618014918aed5cde7f19d25a42e8c4862)以了解更多信息。

这不是我的专业领域，所以我不知道这是否可行；另外，我想知道他们如何做到这一点，并且仍然允许应用程序在商店中获得销售认证。但根据您的要求，这可能需要检查。

（注意：第一个链接确实声称“[n]ext 版本的 SharpDX 将提供完全兼容并为 Win8 Metro 风格应用程序提供认证的程序集”，因此他们的意图很明确。我上面关于认证的评论只是听起来这需要进行互操作，我不知道在此类应用程序中是允许的，所以他们可能对此持乐观态度。不过，我可能完全错了。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:47:17.837

GPU.NET 会将特别标记和编写的 C# 代码 JIT 编译为 GPU 代码。

www.tidepowerd.com

我还没有尝试过，但是这个概念很有前途，而且代码看起来比较干净。所有这些都在 C# 中......

# ios - 在 Xcode 4 中同步两个目标

> ID：11002192
> 
> 赞同：6
> 
> 时间：2012-06-12T17:59:34.583
> 
> 标签：ios, xcode

有没有一种快速的方法来同步 Xcode 中的两个（或更多）目标？当我忘记将新文件添加到我的单元测试和集成目标时，这会成为一个问题。然后我必须去打猎看看我忘了添加什么。我可以复制我的“开发”目标，然后重新添加“单元测试”配置，但这很痛苦。有没有更简单的方法？

编辑：

我喜欢约翰下面的答案，但最终我使用了[这里](https://stackoverflow.com/questions/8333507/how-to-copy-and-paste-files-in-compile-sources-from-one-target-to-another)的答案，这涉及手动编辑项目文件。使用多个丢失的文件是最快的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T08:57:53.550

您的问题集中在您将单个文件添加到目标的情况下，忘记选中两个框以将其添加到您想要的目标。

也许你的意思是使用身份检查器很痛苦，但我认为这是一种方便的方法来添加一个我没有正确添加到第二个目标的文件。您可以通过首先单击要检查信息的文件，然后使用 Cmd-Opt-1，然后单击最右侧的选项卡来访问身份检查器。请注意在底部附近，对我来说，两个目标都已检查。对你来说，如果一个文件没有被添加到两个目标中，一个将被取消选中。

![身份检查员](../Images/f01931f1d654b15d05058a516cd1e3a0.png)

如果不记得您最近向目标添加了哪些文件：

*   如果您的项目处于源代码控制之下，您可以执行“查看”->“版本编辑器”->“显示版本编辑器”（或 Cmd-Opt-Shift-Return），您将获得基于文本的差异比较代表您的项目的 XML 与上次提交时的样子。如上图所示，无论是新的，都可能是要查看复选框的文件集。
*   如果不受源代码控制，您可能必须逐个浏览文件，尽管您可以使用查找器按修改日期对源代码进行排序，并根据您添加的文件记忆，然后直接转到那。就逐个浏览而言，一旦身份检查器打开，您应该只需单击列表中的第一个文件，然后使用向下箭头逐步浏览所有文件，看看哪些在所需的文件中一组目标，哪些不是。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T01:37:15.463

将次要目标文件夹及其所有文件复制到主要目标文件夹中。然后只需将次要目标 xcodeproj 拖放到 xcode 中的主要目标中即可。

# jquery - jquery 元素属性未加载到 rjs 文件元素中？

> ID：11002194
> 
> 赞同：1
> 
> 时间：2012-06-12T17:59:41.637
> 
> 标签：jquery, rjs, rails-3.1

我正在使用 rails3 ，在我的应用程序中有自动完成功能。当用户/新模板自动完成功能工作时。users/new 也是一个部分文件。如果我想以 ajax 请求的形式调用该文件，则自动完成字段不起作用。

据我所知，jquery 属性不适用于 rjs 或部分文件元素。

预先感谢，普拉萨德。

# css - Chrome 不会重绘 隐藏后

> ID：11002195
> 
> 赞同：27
> 
> 时间：2012-06-12T17:59:46.033
> 
> 标签：css, google-chrome, browser, redraw

我有一些`div`s 在悬停时出现，然后被隐藏。但是，在 Chrome（19.0.1084.56 m，Windows XP）中，当您取消悬停时，Chrome 不会将它们重新绘制为已消失，直到您执行滚动或调整窗口大小等操作。

[http://jsfiddle.net/y7NdR/3/](http://jsfiddle.net/y7NdR/3/)

我知道对我的 CSS 进行某些修改将解决问题，例如删除`position`or`z-index`和`overflow`属性，但我真的不想这样做——JSfiddle 是从我需要它们的完整站点配对下来的。

任何人都可以解释为什么这个重绘问题会在 Chrome 中发生吗？有没有人有任何提示来修复它而不会弄乱我需要的 CSS？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-12T18:59:57.597

显然，这是一个 WebKit 错误。

我发现添加`-webkit-transform: scale3d(1,1,1);`修复它：

[http://jsfiddle.net/thirtydot/y7NdR/5/](http://jsfiddle.net/thirtydot/y7NdR/5/)

我不确定这个修复是否有任何缺点。我想这是可行的，因为在 WebKit 内部，使用不同的代码来呈现 3D 变换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-18T00:39:56.407

我为此苦苦挣扎了很长时间，虽然添加`-webkit-transform: scale3d(1,1,1);`确实解决了我的问题，但我想找出原因。所以，我深入研究了我的代码，试图缩小我的问题范围。我发现我正在使用淡入淡出动画，在这里面，我包含在同一个类中：

```
-webkit-backface-visibility:hidden;
backface-visibility:hidden; 
```

单独删除这两行，在没有缩放变换黑客的情况下解决了我的问题。

看到背面可见性与变换有关，并且应该对 2D 变换没有影响，我将其删除，它完全解决了我的问题。

有很多关于 chrome 的背面可见性的错误，所以我把这个发布给任何未来试图在没有太多工作的情况下找到修复的人。

# algorithm - 在矩阵中找到所有具有某些属性的矩形区域

> ID：11002205
> 
> 赞同：7
> 
> 时间：2012-06-12T18:00:44.080
> 
> 标签：algorithm, complexity-theory, rectangles

给定一个 n*m 矩阵，其可能值为 1、2 和 null：

```
 . . . . . 1 . .
  . 1 . . . . . 1
  . . . 2 . . . .
  . . . . 2 . . .
  1 . . . . . 1 .
  . . . . . . . .
  . . 1 . . 2 . .
  2 . . . . . . 1 
```

我正在寻找所有块 B（包含 (x0,y0) 和 (x1,y1) 之间的所有值）：

*   至少包含一个“1”
*   不包含“2”
*   不是具有上述属性的另一个块的子集

例子：

![块](../Images/d1018ed460f2fdb75e4639f7a89f6eda.png)

红色、绿色和蓝色区域都包含一个“1”，没有“2”，并且不是更大区域的一部分。这张图片中当然有超过3个这样的块。我想找到所有这些块。

找到所有这些区域的快速方法是什么？

我有一个可行的蛮力解决方案，遍历所有可能的矩形，检查它们是否满足前两个标准；然后遍历所有找到的矩形，删除另一个矩形中包含的所有矩形；我可以通过首先删除连续的相同行和列来加快速度。但我相当肯定有一种更快的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:16:23.093

您可以在考虑每个矩形和适当聪明的解决方案之间找到某个地方。

例如，从每个开始，`1`您可以创建一个矩形，然后在 4 个方向上逐渐向外扩展其边缘。当您击中 2 时停止，如果 (a) 您必须在所有 4 个方向上停止，并且 (b) 您之前没有见过这个矩形，请记录这个矩形。

然后回溯：您需要能够从`1`左上角附近开始生成红色矩形和绿色矩形。

不过，这个算法有一些非常糟糕的最坏情况。`1`脑海中浮现出一个由所有 s 组成的输入。所以它确实需要与其他一些聪明才智或对输入的一些限制相结合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:35:21.933

考虑更简单的一维问题：

找出`.2.1.1...12....2..1.1..2.1..2`其中至少包含一个`1`且没有`2`且不是该字符串的子串的所有子串。这可以在线性时间内解决，您只需要检查`1`两个之间是否存在 a `2`。

现在您可以轻松地将此算法应用于二维问题：

对于从到的`1≤i≤j≤n`所有行求和，使用以下定律：, , , , ,并将一维算法应用于结果行。`i``j``.+.=.``.+1=1``.+2=2``1+1=1``1+2=2``2+2=2`

复杂度：O(n²m)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T19:24:28.677

我终于找到了一个几乎在线性时间内起作用的解决方案（有一个小因素取决于找到的区域的数量）。我认为这是最快的解决方案。

受此答案的启发：[https](https://stackoverflow.com/a/7353193/145999) ://stackoverflow.com/a/7353193/145999 （图片也取自那里）

首先，我逐列处理矩阵，创建一个新矩阵 M1 测量到最后一个“1”的步数和一个矩阵 M2 测量到最后一个“2”的步数 ![M1 & M2](../Images/f2c6582c8a42920050de0b57f379db5f.png)

想象上图中任何灰色块中的“1”或“2”

最后我的 M1 和 M2 看起来像这样：

![在此处输入图像描述](../Images/aab9492d9d2af12e73d9abcb12d01a7a.png)

不按行反向通过 M1 和 M2：

![在此处输入图像描述](../Images/0f3c5d544a45ec8858ad1ee6f6835ab0.png)

我执行以下算法：

```
 foundAreas = new list()

 For each row y backwards:
     potentialAreas = new List()
     for each column x:
        if M2[x,y]>M2[x-1,y]:
            add to potentialAreas: 
                new Area(left=x,height=M2[x,y],hasOne=M1[x,y],hasTop=false)
        if M2[x,y]<M2[x-1,y]:
            for each area in potentialAreas:
                 if area.hasTop and area.hasOne<area.height:
                        add to foundAreas:
                             new Box(Area.left,y-area.height,x,y)
            if M2[x,y]==0: delete all potentialAreas
            else:
                 find the area in potentialAreas with height=M2[x,y] 
                 or the one with the closest bigger height: set its height to M2[x,y]
                 delete all potentialAreas with a bigger height

            for each area in potentialAreas:
                 if area.hasOne>M1[x,y]: area.hasOne=M1[x,y]
                 if M2[x,y+1]==0: area.hasTop=true 
```

现在 foundAreas 包含所有具有所需属性的矩形。

# hadoop - flume-ng的奇怪行为

> ID：11002209
> 
> 赞同：1
> 
> 时间：2012-06-12T18:00:56.920
> 
> 标签：hadoop, hdfs, flume

我正在尝试使用 flume-ng 将 apache Web 服务器日志聚合到 hdfs 中。但奇怪的是，我只将前几行放入 hdfs 中。更奇怪的是，每次我启动代理时都会创建两个文件，而第二个文件是总是小于第一个。我的代理 conf 文件如下所示：

```
agent1.sources = tail
agent1.channels = MemoryChannel-2
agent1.sinks = HDFS

agent1.sources.tail.type = exec
agent1.sources.tail.command = tail -f /var/log/apache2/access.log.1
agent1.sources.tail.channels = MemoryChannel-2

agent1.sinks.HDFS.channel = MemoryChannel-2
agent1.sinks.HDFS.type = hdfs
agent1.sinks.HDFS.hdfs.path = hdfs://localhost:9000/flume
agent1.sinks.HDFS.hdfs.file.Type = DataStream

agent1.channels.MemoryChannel-2.type = memory 
```

此外，我在终端上没有收到任何错误消息..这是正常的还是我的一些错误？

# xcode - XCode 检查器中的图像属性不显示图像的大小

> ID：11002218
> 
> 赞同：4
> 
> 时间：2012-06-12T18:01:36.187
> 
> 标签：xcode, png

我很好奇为什么当我选择图像时右侧属性检查器窗口 Xcode 不显示我的 PNG 图像的尺寸和分辨率（图像预览工作得很好）。图像属性显示每个属性的“--”（双破折号），如下图所示：[1](https://i.stack.imgur.com/2g1WD.png)

![属性编辑器截图](../Images/b33d90b9d2007c08c36c0ed67977bb94.png)

附言。我使用 Xcode 4.3.3 和 Lion 10.7.4

# android - 使用 java 动画在活动之间切换（以编程方式定义）

> ID：11002219
> 
> 赞同：1
> 
> 时间：2012-06-12T18:01:36.420
> 
> 标签：android, android-animation

如果我在 xml 中定义了我的动画，那么我可以在活动之间制作动画，例如

```
//Calls a new Activity  
startActivity(new Intent(this, NewActivity.class));  

//Set the transition -> method available from Android 2.0 and beyond  
overridePendingTransition(R.anim.push_left_in,R.anim.push_up_out); 
```

但我的动画是用 Java 定义的。函数“overridePendingTransition(int, int)”接受动画的 int 参数。如何改用以编程方式定义的动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T18:29:54.477

我在这里找到了解决方案 [http://blog.robert-heim.de/karriere/android-startactivity-rotate-3d-animation-activityswitcher/comment-page-1/#comment-12025](http://blog.robert-heim.de/karriere/android-startactivity-rotate-3d-animation-activityswitcher/comment-page-1/#comment-12025)

# ssis - 如何构建动态 SSIS 包？

> ID：11002220
> 
> 赞同：1
> 
> 时间：2012-06-12T18:01:37.920
> 
> 标签：ssis

我是 SSIS 包的新手。

我需要执行在多个远程数据库中可用的相同存储过程，并将这些数据插入我办公室的主数据库中。我正在尝试创建一个 SSIS 包来实现上述要求。（我为此使用了 OLE DB 源控件和 OLE DB 目标控件）无论如何我希望将来增加远程数据库的数量。每次我向系统添加新的远程数据库时，有没有办法做这个过程而不是修改 SSIS 包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:52:34.450

OLE DB 源控件和 OLE DB 目标控件使用连接管理器，您可以在其中通知连接字符串，其中包括数据库名称等。您可以使用 SSIS 配置使此属性变量，例如，包将从 XML 文件中读取它。

阅读配置文件，它将解决您的问题

# centos - CentOS 6 上的 Jodconverter - “无法启动和连接”

> ID：11002221
> 
> 赞同：1
> 
> 时间：2012-06-12T18:01:50.463
> 
> 标签：centos, openoffice.org, centos6, jodconverter

我正在尝试在 CentOS 6.2 服务器上设置 jodconverter-beta-4，但经过几天的尝试，我无法超越我目前所处的位置。我不是 *nix 的巫师，所以如果我犯了一些新手错误，请多多包涵。

我使用添加/删除软件为 OpenOffice.org 安装的组件是：

*   核心品牌
*   核心模块
*   计算，绘图，印象，数学，作家
*   电子表格、绘图、演示文稿、方程式、文字处理器库
*   额外的图形过滤器
*   UNO

我在 /opt/ 中创建了一个符号链接

```
ln -s /usr/lib64/openoffice.org3/ openoffice.org3 
```

当我执行时：

```
java -jar jodconverter-core-3.0-beta-4.jar test.docx test.pdf 
```

我得到以下信息：

```
 Jun 12, 2012 10:56:40 a.m. org.artofsolving.jodconverter.office.ProcessPoolOfficeManager <init>
INFO: ProcessManager implementation is LinuxProcessManager
Exception in thread "main" org.artofsolving.jodconverter.office.OfficeException: failed to start and connect
   at org.artofsolving.jodconverter.office.ManagedOfficeProcess.startAndWait(ManagedOfficeProcess.java:64)
   at org.artofsolving.jodconverter.office.PooledOfficeManager.start(PooledOfficeManager.java:101)
   at org.artofsolving.jodconverter.office.ProcessPoolOfficeManager.start(ProcessPoolOfficeManager.java:62)
   at org.artofsolving.jodconverter.cli.Convert.main(Convert.java:112)
Caused by: java.util.concurrent.ExecutionException: java.lang.NoSuchMethodError: method java.util.regex.Pattern.quote with signature (Ljava.lang.String;)Ljava.lang.String; was not found.
   at java.util.concurrent.FutureTask$Sync.innerGet(libgcj.so.10)
   at java.util.concurrent.FutureTask.get(libgcj.so.10)
   at org.artofsolving.jodconverter.office.ManagedOfficeProcess.startAndWait(ManagedOfficeProcess.java:62)
   ...3 more
Caused by: java.lang.NoSuchMethodError: method java.util.regex.Pattern.quote with signature (Ljava.lang.String;)Ljava.lang.String; was not found.
   at org.artofsolving.jodconverter.process.LinuxProcessManager.findPid(LinuxProcessManager.java:51)
   at org.artofsolving.jodconverter.office.OfficeProcess.start(OfficeProcess.java:65)
   at org.artofsolving.jodconverter.office.OfficeProcess.start(OfficeProcess.java:60)
   at org.artofsolving.jodconverter.office.ManagedOfficeProcess.doStartProcessAndConnect(ManagedOfficeProcess.java:119)
   at org.artofsolving.jodconverter.office.ManagedOfficeProcess.access$000(ManagedOfficeProcess.java:31)
   at org.artofsolving.jodconverter.office.ManagedOfficeProcess$1.run(ManagedOfficeProcess.java:58)
   at java.util.concurrent.Executors$RunnableAdapter.call(libgcj.so.10)
   at java.util.concurrent.FutureTask$Sync.innerRun(libgcj.so.10)
   at java.util.concurrent.FutureTask.run(libgcj.so.10)
   at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(libgcj.so.10)
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(libgcj.so.10)
   at java.lang.Thread.run(libgcj.so.10) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:44:10.527

我安装了 Java GCJ，它导致了同样的错误。即，确保您安装了正确版本的 JAVA（我假设您需要 OpenJDK 运行时环境）。

找到您想要的包`yum search java`和/或`yum provides java`. 就我而言，它是`java-1.7.0-openjdk.x86_64`，然后：

```
yum install java-1.7.0-openjdk.x86_64 
```

不要忘记删除以前的版本 ( `yum remove`)

# objective-c - UIView 对父视图控制器的访问

> ID：11002223
> 
> 赞同：0
> 
> 时间：2012-06-12T18:01:51.463
> 
> 标签：objective-c, ios, uiview, uiviewcontroller

我无法访问 UIView 父视图引用或对象。在我的示例中，我有两个 UIWebview 和 UIView。从 UIView 我必须控制 UIWebView 但我没有从 UIView 获得任何参考。

对此有任何帮助吗？

-穆拉利

# javascript - 触发带参数的点击事件

> ID：11002224
> 
> 赞同：7
> 
> 时间：2012-06-12T18:01:53.610
> 
> 标签：javascript, jquery

我有一个 click 函数，我想用参数在函数之外触发。

```
<div id="menubar">
    <a id="menu_file_open">File Open</a>
    <a id="menu_file_save">Save File</a>
</div>

$("#menubar a").click(function(event){

    var menu_item = $(this).attr('id');
    var $context = $(this);

    switch(menu_item){

        case 'menu_file_open':
             //Do menu file open dialog
        break;

        case 'menu_file_save': break;

    }

});

$('#menubar a').trigger('click'); //not working (ID,context not defined); 
```

我将如何在实际单击时传递 div 的 ID 和上下文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T18:15:59.183

这个对我有用：

```
<div id="menubar">
    <a id="click_me" href="#">Click me</a>
    <a id="dont_click" href="#">Don't click</a>
</div>

$("#menubar a").click(function(event){
    var menu_item = $(this).attr('id');
    var $context = $(this);

    //....
});

$('#menubar a#click_me').click();​ // or $('#menubar a#dont_click').trigger('click'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T18:18:33.017

[您可以将任意数据](http://api.jquery.com/event.data/)传递和检索到 jQuery 事件处理程序，如下所示：

```
$(selector).click({ dataItem1: 'value1', dataItem2: 'value2' }, function(e) {
    var val1 = e.data.dataItem1,
        val2 = e.data.dataItem2;
}); 
```

但是，由于您的代码[在这里工作](http://jsfiddle.net/fbkxk)，我怀疑可能还有另一个问题，例如未加载 jQuery 库或脚本中的其他位置存在错误。

# wpf - 访问 WPF ListBox 中的 ListBoxItem-Controls

> ID：11002227
> 
> 赞同：2
> 
> 时间：2012-06-12T18:02:00.933
> 
> 标签：wpf, listbox, datatemplate, listboxitem

在 WPF 应用程序中，我使用在 XAML 中的以下 DataTemplate 中定义的 ItemTemplate 创建列表框：

```
<DataTemplate x:Key="ListItemTemplate">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"></RowDefinition>
      <RowDefinition Height="*"></RowDefinition>
    </Grid.RowDefinitions>
    <StackPanel>
      <Button/>
      <Button/>
      <Button Name="btnRefresh" IsEnabled="false"/>
      <TextBlock/>
      <TextBlock/>
      <TextBlock/>
      <TextBlock/>
    </StackPanel>
    <TextBox/>
  </Grid>
</DataTemplate> 
```

生成 ListBox 后，我需要在所有 ListBoxItem(s) 上将以下按钮 IsEnabled 属性更改为 true：`<Button Name="btnRefresh" IsEnabled="false"/>`

**问题：**

我无法访问 ListBoxItem(s)，因此无法使用其中的那个按钮访问他们的孩子。

WPF 中是否有像 Silverlight 中的 ListBox.Descendents() 之类的东西，或者以任何其他方式访问该按钮，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T22:46:51.327

执行此操作的首选方法是更改`ViewModel`​​绑定到该按钮的 IsEnabled 属性的属性。向事件添加一个处理程序，`ListBox.Loaded`并在加载 ListBox 时将 ViewModel 中的该属性设置为 false。

另一个选项，如果您需要遍历 ListBox 中的每个数据模板项，请执行以下操作：

```
 if (listBox.ItemContainerGenerator.Status == System.Windows.Controls.Primitives.GeneratorStatus.ContainersGenerated)
        {
           foreach (var item in listBox.Items)
           {
              ListBoxItem container = listBox.ItemContainerGenerator.ContainerFromItem(item) as ListBoxItem;
              // Get button
              ContentPresenter contentPresenter = contentPresenter.ContentTemplate.FindName("btnRefresh", contentPresenter);
              Button btn = contentPresenter as Button;
              if (btn != null)
                  btn.IsEnabled = true;
           }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T20:50:56.577

如果您只需要启用 ListBoxItem 中的按钮，则可以使用 XAML 解决方案。使用 DataTemplate.Triggers：

```
<DataTemplate.Triggers>
    <DataTrigger Binding="{Binding RelativeSource=
        {RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}}, Path=IsSelected}" Value="True">
        <Setter TargetName="btnRefresh" Property="IsEnabled" Value="true"/>
    </DataTrigger>
</DataTemplate.Triggers> 
```

这样，无论何时选择 ListBoxItem，都会启用该项目上的按钮。不需要 c# 代码。简单干净。

可以在以下位置找到更多详细信息：[http ://wpftutorial.net/DataTemplates.html](http://wpftutorial.net/DataTemplates.html)

# css - 更少的编译时变量

> ID：11002233
> 
> 赞同：2
> 
> 时间：2012-06-12T18:02:16.020
> 
> 标签：css, less

有没有办法在编译时定义一个较少的变量？

我想做的是根据编译较少文件的环境定义@base-path，以便服务器引用CDN，而路径将指向开发人员机器上的本地路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-28T13:17:26.870

NodeJS 上的 lessc 编译器提到了以下选项（来自[https://lesscss.org/usage/#less-options](https://lesscss.org/usage/#less-options)）：

> ### 全局变量
> 
> `lessc --global-var="color1=red"` `{ globalVars: { color1: 'red' } }`
> 
> 该选项定义了一个可以被文件引用的变量。实际上，声明放在基础 Less 文件的顶部，这意味着它可以使用，但如果在文件中定义了此变量，它也可以被覆盖。
> 
> ### 修改变量
> 
> `lessc --modify-var="color1=red"` `{ modifyVars: { color1: 'red' } }`
> 
> 与全局变量选项相反，这会将声明放在基本文件的末尾，这意味着它将覆盖您的 Less 文件中定义的任何内容。

根据您调用编译器的方式，您可以在此处插入环境变量。

# php - PDO 从 API 请求中插入相同的字段数据

> ID：11002234
> 
> 赞同：0
> 
> 时间：2012-06-12T18:02:16.080
> 
> 标签：php, api, pdo, duplicates, rapidshare

我正在使用他们的 API 将我的网站与另一个网站集成。从其中一个 API 调用中，我想将响应插入到表中。我正在使用 cURL 来查询他们的 API，并使用 PDO 将其插入到我的 MySQL 数据库中。

以下是相关代码：

```
// Upload the file to RapidShare
$uploadID = mt_rand(1000000000, 9999999999);
$url = 'http://rs' . $uploadServer . '.rapidshare.com/cgi-bin/rsapi.cgi?uploadid=' . $uploadID;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1);
$postFields = array('sub' => 'upload',
                    'login' => 'mylogin',
                    'password' => 'mypassword',
                    'uploadid' => $uploadID,
                    'filename' => $filename,
                    'filecontent' => '@' . $targetDir . '/' . $id);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postFields);
if(!$resp = curl_exec($ch)) {
    error('upload call failed');
} 
```

然后，我有一个名为的变量`$uploadDetails`，它是 API 响应的数组，其中包含文件的文件 ID、文件名、文件大小和 md5 值。我使用以下查询将文件 ID 插入到我的数据库中：

```
// Database shinanagans
try {
    $dbh = new PDO('mysql:host=localhost;dbname=mytable', 'root', '');

    $query = 'INSERT INTO `files` (f_id, s_id, u_id, name, size, uploaded, rs_fileid)
              VALUES (?, (SELECT s_id FROM `servers` WHERE name = ? LIMIT 1), (SELECT u_id FROM `users` WHERE username = ?), ?, ?, ?, ?)';

    $sth = $dbh->prepare($query);
    $sth->execute(array($id, $server, 11, $uploadDetails[1], $uploadDetails[2], date('c'), $uploadDetails[0]));

    $dbh = null;
} catch(PDOException $e) {  
    error($e->getMessage());  
} 
```

每个 API 响应都有一个唯一的文件 ID，我确信这一点。而且我知道我从 API 调用中得到了正确且唯一的文件 ID。我已经通过回显响应来验证这一点。但是，出于某种原因，PDO 一直在列下插入此值`rs_fileid`：`2147483647`.

为澄清起见，以下是 API 调用的示例响应：

```
Array
(
    [0] => 3294575677
    [1] => Untitled_1.png
    [2] => 478923
    [3] => ae83e53e5bf26406715daed0d44adc45
) 
```

这是相关的数据库行：

![在此处输入图像描述](../Images/b2fe3d1ebb055f70e98d5520eea3ac35.png)

如您所见，`rs_fileid`列的所有字段值都是相同的，但它们应该是唯一的，并且 API 以唯一值响应。

有人知道会发生什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:18:09.867

请注意，`2147483647`是 32 位有符号整数的最大值——并且您的示例中的文件 ID 明显高于该值。不确定 PHP 将如何处理它，因为这取决于您的 PHP 是 32 位还是 64 位（以及它是否会费心尝试和 intify 数据），但[MySQL 会将数字限制在它所用的字段范围内进入](http://dev.mysql.com/doc/refman/5.5/en/out-of-range-and-overflow.html).

检查以确保您的数据库列是`BIGINT`或至少是`UNSIGNED INT`- 或者，除非您确实需要该列是数字，否则`VARCHAR`适当长度的字段也可以工作。

# clojure - 如何获得一个持久的本地datomic数据库？

> ID：11002236
> 
> 赞同：20
> 
> 时间：2012-06-12T18:02:27.970
> 
> 标签：clojure, datomic

使用 Datomic，我对如何使用本地数据库感到困惑

如果我输入：

```
>>(ns datomic-tut (:use [datomic.api :as d]))
nil

>>(d/create-database "datomic:mem://hello")
true

>> (d/connect "datomic:mem://hello")
#<LocalConnection datomic.peer.LocalConnection@57102fab>

>> Ctrl-D to Disconnect 
```

然后，如果我重新启动 repl：

```
>> (ns project-ns   (:use [datomic.api :as d]))
nil

>> (d/connect "datomic:mem://hello")
ExceptionInfo :peer/db-not-found Could not find hello in catalog  clojure.core/ex-info (core.clj:4227) 
```

我可以创建另一种类型的本地 uri 来保存我创建的数据库吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-12T18:21:03.200

[入门](http://docs.datomic.com/getting-started.html)指南讨论使用免费存储协议

**使用免费存储协议运行交易者**

免费存储协议使用本地磁盘文件进行存储。

您可以使用免费存储启动本地事务，如下所示：

```
bin/transactor config/samples/free-transactor-template.properties 
```

该脚本将打印几行输出，包括您将用于连接的基本 URI，例如

```
datomic:free://localhost:4334/<DB-NAME> 
```

要创建连接字符串，只需替换为您选择的数据库名称，例如“hello”：

```
datomic:free://localhost:4334/hello 
```

使用此 URI，您现在应该能够重复上一节中的步骤，这一次连接到事务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-20T17:22:25.070

截至 2020 年，虽然 datomic free 仍然存在，但它[在功能方面有点落后](https://forum.datomic.com/t/datomic-free-being-out-phased/1211/6)。Cognitect 推出了新的 Pro Starter 版本，他们打算将其作为更好的入门方式。这也是免费的，并提供永久许可证。限制只是您获得的免费更新的持续时间，限制为一年。

这是最新的安装指南：[https ://docs.datomic.com/on-prem/dev-setup.html](https://docs.datomic.com/on-prem/dev-setup.html)

如果您只想尝试一下，最好先使用内存：[https ://docs.datomic.com/on-prem/getting-started/connect-to-a-database.html](https://docs.datomic.com/on-prem/getting-started/connect-to-a-database.html)

另请注意，datomic cloud 是一个更新的产品。但即使考虑到云，首先探索本地部署似乎也不是不合理的。如果是这样，请注意尽管专注于学习客户端 api，而不是对等点，因为对等点不存在于 datomic 云中（实际上，它们作为对等服务器存在......这是轻量级客户端然后连接的内容to，运行查询）。

# java - 粘贴代码时如何防止Eclipse自动导入包？

> ID：11002239
> 
> 赞同：18
> 
> 时间：2012-06-12T18:02:40.700
> 
> 标签：java, eclipse, ide

我经常从现有代码库中复制和粘贴代码。Eclipse 经常引入我不需要的错误导入语句

例如，我将代码复制并粘贴到我的项目包`com.myproject.utilities`中，名为`twitter_class.java`

并在java文件中添加

`import com.pigmal.android.ex.twitter4j.TwitterConstants;`

这会导致错误`The import cannot be resolved`。当然不能为什么，为什么我什至没有选择要复制的部分时，它甚至尝试导入该部分

我可以想象到哪里很方便，但对我来说从来都不方便，而且经常修理很费时间。

如何在 Eclipse 中使用 Eclipse 将其关闭。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-12T18:05:14.160

粘贴时关闭自动导入

windows **>**首选项**>** java **>** editor **>** Typing **>** (在粘贴时)**取消选中更新导入**

# ios - 在 iphone 中更新 xcdatamodel 中的数据

> ID：11002244
> 
> 赞同：0
> 
> 时间：2012-06-12T18:02:58.257
> 
> 标签：ios, xcode, xcdatamodel

我有带有 xcdatamodeld 的 ios 应用程序，我想更新一些数据，所以需要一个代码

我有插入代码

```
NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];
[newManagedObject setValue:txtName.text forKey:@"name"];   [newManagedObject setValue:txtid.text forKey:@"id"];     
// Save the context.
NSError *error = nil;
if (![context save:&error]) {      
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
} 
```

并删除

```
NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]]; 
```

但我需要更新数据的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:17:49.070

您可以使用 NSFetchRequest 简单地选择数据（并且可能对描述符和谓词进行排序）。您将返回一个包含该获取请求结果的数组。这些结果都是您从中选择的实体类型，然后您需要做的就是更新这些子类的属性。一个例子是这样的：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntity:@"Car"];
request.predicate = [NSPredicate predicateWithFormat:@"make == %@", @"Ford"]; // make is an attribute of the Car entity

NSArray *fetchResults = [self.fetchedResultsController.managedObjectContext executeFetchRequest:request error:nil];
Car *car = [fetchResults objectAtIndex:0]; // First result
car.make = @"Chevrolet"; 
```

现在，您的 Core Data 后端将自动更新为拥有一个品牌为 Chevrolet 的 Car 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:27:20.870

```
 NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];       
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];     

    request.predicate = [NSPredicate predicateWithFormat:@"id == %@", strId];        
    NSArray *fetchResults = [self.fetchedResultsController.managedObjectContext executeFetchRequest:request error:nil];       

    [fetchResults setValue:txtName.text forKey:@"name"];
    [fetchResults setValue:txtPhone.text forKey:@"phone"];
    [fetchResults setValue:txtEmail.text forKey:@"email"];

    NSError *error = nil;
    if (![context save:&error]) {        
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    } 
```

# asp.net - ASP.net 中的全局 OnLoggedIn 事件？

> ID：11002245
> 
> 赞同：5
> 
> 时间：2012-06-12T18:03:26.813
> 
> 标签：asp.net, forms-authentication, stay-logged-in

当用户使用 ASP.net 网站登录时，有没有办法得到通知？

> **注意**：用户无需访问“登录页面”即可登录。如果“记住我”cookie 存在，他们可以点击任意页面并登录。

当用户登录时，我想获取一些与会话相关的信息。

> **注意**：有[`Login.LoggedIn`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.loggedin)事件。问题是该控件并非在每个页面上都存在。并且它出现在 ( ) 上的一页`Login.aspx`不会调用`OnLoggedIn`事件。

与`Global.asax`具有全局*On Session Start*通知的方式相同：

```
void Session_Start(object sender, EventArgs e) 
{
} 
```

我假设某处有一个*用户登录*通知：

```
void LoggedIn(object sender, EventArgs e)
{
} 
```

## 奖金阅读

*   [登录页面 ASP.NET 上的 OnLoggedIn 事件](https://stackoverflow.com/questions/4656469/onloggedin-event-on-login-page-asp-net)
*   [登录时运行自定义代码](https://stackoverflow.com/questions/420237/run-custom-code-on-login)
*   [MDSN Logon.OnLoggedIn 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.loggedin)
*   如果设置了“记住我”，如何更新上次登录日期？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T08:28:15.373

我认为你没有一个独特的地方可以做到这一点。在我的情况下（MVC + log4net）我使用这个：

*   在`Global.asax`我使用预先存在的 cookie 检查经过身份验证的用户。

    ```
    protected void Session_Start()
    {
        string ip = HttpContext.Current.Request.UserHostAddress;

        log.InfoFormat("Starting session: {0} from {1}.",Session.SessionID, ip);

        if ((HttpContext.Current != null) &&
            (HttpContext.Current.User != null) &&
            (HttpContext.Current.User.Identity.IsAuthenticated) )
        {
            string user = HttpContext.Current.User.Identity.Name;
            string type = "Cookie";

            log.InfoFormat("User {0} logged in with {1}.", user, type);
        }

    } 
    ```

*   在我的帐户控制器中，我检查本地登录（我使用的是 MVC4 中的 Internet 应用程序模板，但`Login.OnLoggedIn`如果您使用的是 Web 表单，则可以在您的帐户中执行此操作）

    ```
    [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid && WebSecurity.Login(model.EMail, model.Password, persistCookie: model.RememberMe))
        {
            string user = model.EMail;
            string type = "Forms";

            log.InfoFormat("User {0} logged in with {1}.", user, type);

            return RedirectToLocal(returnUrl);
        }

        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
        log.ErrorFormat("Bad password or user name. User={0}", model.EMail, model.Password);
        return View(model);
    } 
    ```

*   但我也需要检查 OAuth 登录，如下所示：

    ```
    [AllowAnonymous]
    public ActionResult ExternalLoginCallback(string returnUrl)
    {
        AuthenticationResult result = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));
        if (!result.IsSuccessful)
        {
            log.Debug("External login failure.");

            return RedirectToAction("ExternalLoginFailure");
        }

        if (OAuthWebSecurity.Login(result.Provider, result.ProviderUserId, createPersistentCookie: false))
        {
            log.InfoFormat("User {0} logged in with External {1} login. External UserID = {2}",
                Membership.GetUser(OAuthWebSecurity.GetUserName(result.Provider, result.ProviderUserId)).UserName,
                result.Provider,
                result.ProviderUserId);

            return RedirectToLocal(returnUrl);
        }

        ...
    } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T18:11:16.090

您可以`Application_AuthenticateRequest`在 global.asax 上进行检查，这是您可以检查请求是否与会话数据一起登录的地方，并决定会话数据是否需要按照您所说的进行初始化。

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    string cookieName = FormsAuthentication.FormsCookieName;
    HttpCookie authCookie = Context.Request.Cookies[cookieName];

    //  check for logged in or not
    if (null != authCookie)
    {
        // is logged in... check if the session needs init

    }   
} 
```

或相同的结果

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    //  check for logged in or not
    if(HttpContext.Current.User != null && 
        HttpContext.Current.User.Identity != null 
            && HttpContext.Current.User.Identity.IsAuthenticated)
    {
        // is logged in... check if the session needs init

    }   
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T18:07:05.587

您可以在这两个地方调用您的代码：`OnLoggedIn`来自`Login`控件的事件以及会话开始时（使用`Session_Start`Global.asax 中的事件），因为这将是使用用户数据的第一个请求。在那里您可以检查用户是否已登录，如果是，请执行您需要的操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T10:14:32.153

虽然在技术上登录与通过身份验证相同，但我对此有不同的心理模型。

在我看来，以下三件事是不同的问题：

*   用户拥有/获得会话
*   用户已通过身份验证
*   用户已登录

对我来说，其中最后一个意味着：“*已为用户创建了一个会话，该用户已通过身份验证，并且已为经过身份验证的用户初始化了该会话*”。

使用此模型，用户可以在以下情况下登录：

*   用户在登录页面上登录，并使用必要的用户数据初始化预先存在的会话
*   预认证的用户来到站点，并为他/她创建和初始化一个新会话

同样，当他/她的初始化会话被破坏时，用户将被注销。

使用此模型将意味着：

*   您可以在`Login.OnLoggedIn`事件 the 或`Session_Start`事件 in中识别用户何时“登录” `Global.asax`。当然，会话开始事件也会针对未经身份验证的用户触发，因此您需要在事件触发时验证用户是否已通过身份验证。
*   `Session_End`您可以通过显式注销或在 Global.asax 中的事件中正确初始化的会话何时被破坏来可靠地判断用户何时“注销” 。我说得有些可靠，因为我认为 Session_End 事件不一定会在应用程序池回收或崩溃时被触发。虽然我没有测试过这个，所以我可能是错的。
*   一个用户可以同时“登录”多次。至少在 IE 中，您可以从“文件”菜单启动“新会话”。这将启动一个新的 IE，它不与任何预先存在的 IE 窗口共享会话 cookie。这意味着当用户访问站点时，服务器将创建一个新会话，并且根据所使用的身份验证机制，这可能意味着他/她还必须再次进行身份验证。

它不会让您“*列出所有当前登录的用户*”开箱即用。我认为您将需要创建一些自己跟踪的方式。这可以我或多或少难以做到。尤其是当您的应用程序在某种负载平衡环境中运行时，获取所有当前用户的列表可能会很棘手。

# python - 如何减少 Python 脚本内存使用

> ID：11002247
> 
> 赞同：26
> 
> 时间：2012-06-12T18:03:33.647
> 
> 标签：python, optimization, module, package, organization

我有一个非常大的 python 脚本，200K，我想使用尽可能少的内存。它看起来像：

```
# a lot of data structures
r = [34, 78, 43, 12, 99]

# a lot of functions that I use all the time
def func1(word):
    return len(word) + 2

# a lot of functions that I rarely use
def func1(word):
    return len(word) + 2

# my main loop
while 1:
   # lots of code
   # calls functions 
```

如果我将很少使用的函数放在一个模块中，并且仅在必要时动态导入它们，我就无法访问数据。这就是我所得到的。

我是python的新手。

谁能让我走上正确的道路？我怎样才能分解这个大脚本，以便它使用更少的内存？是否值得将很少使用的代码放入模块中并仅在需要时调用它们？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-12T18:50:18.500

**组织：**

你的 python 脚本看起来确实很大，也许你应该考虑先重新组织你的代码，把它分成几个[模块或包](http://docs.python.org/tutorial/modules.html)。它可能会使代码分析和优化任务更容易。

你可能想看看那里：

*   [Python 项目指南](http://infinitemonkeycorps.net/docs/pph/#id9)
*   [Python 包](http://pythonconquerstheuniverse.wordpress.com/2009/10/15/python-packages/)
*   [SO：组织我的 Python 项目](https://stackoverflow.com/questions/391879/organising-my-python-project)

并且可能：

*   [SO：Python：常见的标头格式是什么？](https://stackoverflow.com/questions/1523427/python-what-is-the-common-header-format)
*   [你如何组织 Python 模块？](https://stackoverflow.com/questions/171785/how-do-you-organize-python-modules)
*   [搭便车者的包装指南](http://guide.python-distribute.org)

**优化：**

有很多事情可以用来优化你的代码......

例如，关于您的数据结构......如果您大量使用列表或列表推导式，您可以尝试找出您真正需要列表的位置，以及它们可能被不可变数据结构（如元组或“volatile”对象，“lazy”容器，如生成器表达式。

看：

*   [SO：元组比 Python 中的列表更有效吗？](https://stackoverflow.com/questions/68630/are-tuples-more-efficient-than-lists-in-python)
*   [SO：生成器表达式与列表理解](https://stackoverflow.com/questions/47789/generator-expressions-vs-list-comprehension)
*   [PEP 255 - 简单生成器](http://www.python.org/dev/peps/pep-0255/) 和[PEP 289 - 生成器表达式](http://www.python.org/dev/peps/pep-0289/)

在这些页面上，您可以找到一些有用的信息和提示：

*   [http://wiki.python.org/moin/PythonSpeed](http://wiki.python.org/moin/PythonSpeed)
*   [http://wiki.python.org/moin/PythonSpeed/PerformanceTips](http://wiki.python.org/moin/PythonSpeed/PerformanceTips)
*   [http://wiki.python.org/moin/TimeComplexity](http://wiki.python.org/moin/TimeComplexity)
*   [http://scipy.org/PerformancePython](http://scipy.org/PerformancePython)

此外，你应该研究你的做事方式，并想知道是否有一种方法可以减少贪婪，一种最好在 Python 中做的方法（你会在标签[pythonic](https://stackoverflow.com/questions/tagged/pythonic)中找到一些提示）......尤其是在 Python 中确实如此，因为在 Python 中，通常*有一种“明显”的方式*（而且只有一种）可以做比其他更好的事情（参见[Python 之禅](http://www.python.org/dev/peps/pep-0020/)），这被称为*pythonic*。它与您的代码的形状并没有特别的关系，但也 - 最重要的是 - 与性能有关。与许多提倡应该有多种方法来做任何事情的语言不同，Python 更喜欢只关注最好的方法。所以很明显，做某事有很多方法，但通常，一种是*真的*更好的。

现在，您还应该验证您是否使用了最好的方法来做事，因为 pythonicality 不会为您安排算法。

但最后，它会根据您的代码而有所不同，并且如果没有看到它就很难回答。

并且，请务必考虑[eumiro](https://stackoverflow.com/users/449449/eumiro)和[Amr](https://stackoverflow.com/users/1413450/amr)的评论。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T18:33:43.680

这个视频可能会给你一些好主意： http: [//pyvideo.org/video/451/pycon-2011---quot-dude--where--39-s-my-ram--quot-](http://pyvideo.org/video/451/pycon-2011---quot-dude--where--39-s-my-ram--quot-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T19:01:56.647

关于生成器表达式和使用模块的建议很好。过早的优化会导致问题，但在坐下来编写代码之前，您应该始终花几分钟时间思考您的设计。特别是如果该代码旨在被重用。

顺便说一句，您提到您在脚本顶部定义了很多数据结构，这意味着它们在开始时都已加载到内存中。如果这是一个非常大的数据集，请考虑将特定数据集移动到单独的文件中，并仅在需要时加载它。（使用`csv`模块，或`numpy.loadtxt()`等）

除了使用更少的内存之外，还要寻找更有效地使用内存的方法。例如，对于大型数值数据集，numpy 数组是一种存储信息的方式，可以在计算中提供更好的性能。[在http://wiki.python.org/moin/PythonSpeed/PerformanceTips](http://wiki.python.org/moin/PythonSpeed/PerformanceTips)有一些稍微过时的建议

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T18:11:37.587

移动函数不会改变你的内存使用情况。一旦您导入该其他模块，它将定义该模块中的所有功能。但是函数不会占用太多内存。它们是否非常重复，也许您可​​以通过重构函数来减少代码？

@eumiro 的问题是对的：您确定您的脚本使用了太多内存吗？它使用了多少内存，为什么太多了？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-07T22:25:08.330

如果您正在利用 OOP 并拥有一些对象，请说：

```
class foo:
    def __init__(self, lorem, ipsum):
        self.lorem = lorem
        self.ipsum = ipsum
    # some happy little methods 
```

您可以通过输入以下内容让对象占用更少的内存：

```
__slots__ = ("lorem", "ipsum") 
```

就在`__init__`函数之前，如图：

```
class foo:
    def __init__(self, lorem, ipsum):
        self.lorem = lorem
        self.ipsum = ipsum
    # some happy little methods 
```

当然，“过早优化是万恶之源”。还要在添加之前和之后分析 mem 的使用情况，看看它是否真的做了什么。在理解这可能最终无法正常工作的情况下，小心破坏代码（令人震惊）。

# android - AsyncTask - 在哪里处理我返回的代码更好？

> ID：11002255
> 
> 赞同：0
> 
> 时间：2012-06-12T18:04:08.140
> 
> 标签：android, android-asynctask

我有一个远程调用，我想知道把这个处理代码放在哪里更好：

```
 if ( result == null )
        {       
            Toast.makeText(getApplicationContext(), "Some error message", Toast.LENGTH_LONG).show();                                

        }
        else
        if ( result.equals( "all_problems_db_error" ))
        {
        Log.d( "AllBusinessesActivity" , "result: " + result )                                      
        }
        else
        {
            // Unwrap the stuff from the JSON string                
            String problem_title = null;
            String problem_id = null;

            try
            {
                JSONArray obj = new JSONArray(result);

                if ( obj != null )
                {
                    problems.clear();

                    for ( int i = 0; i < obj.length(); i++ )
                    {
                        JSONObject o = obj.getJSONObject(i);

                        problem_title = o.getString("problem_title");
                        problem_id = o.getString("problem_id");

                        Problem p = new Problem ( );
                        p.setProblemId(problem_id);                         
                        p.setProblemName(problem_title);

                        problems.add( p );
                    }

                    adapter.notifyDataSetChanged();             

                }                                   
            }
            catch ( Exception e )
            {
           // Do something :)
            }               
        } 
```

将它放在 onPostExecute() 或末尾或 doInBackground() 中更好吗？

我现在在 onPostExecute() 中执行此操作，但有时我会遇到一些缓慢，并且我一直在阅读，在 doInBackground 中执行此操作可能会更好。

有人可以向我解释一下区别吗？如果我在 doInBackground() 中执行此操作，那么使用 onPostExecute 方法的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:08:45.220

当您需要在 UI 线程上做一些事情时，该`onPostExecute`方法很有用。实际上，您*无法*`doInBackground`在方法 中对 UI 进行任何操作。

因此，请尝试在该方法中进行所有计算/数据下载等`doInBackground`，并且仅在该方法中操作您的 UI `onPostExecute`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:25:35.633

`Is it better to have it in the onPostExecute()`

由于在您的情况下没有任何 UI 组件的操作，您可以将代码放在`doInBackground()`. 但是，由于您`toast`在结果为时显示 a ，因此`null`您可以检查结果`doInBackground()`，如果结果不为 null 您可以`result`在同一函数中对其进行剩余处理，否则您可以传递到`onPostExecute()`可以显示`toast`.

`at the end or doInBackground()` 是的。您可以在末尾使用此代码，`doInBackground()`因为此方法在非 UI 线程上运行，这肯定会减少您遇到的缓慢。

这两种方法之间的区别`doInBackground()`只是`onPostExecute()`前者在非 UI 线程上运行，而后者在 UI-Thread 上运行。

`And if I do this in the doInBackground() then what is the purpose of having the onPostExecute method`

通常`doInBackground()`用于执行耗时的操作。这些操作可能包括调用 Web 服务或从服务器获取图像等活动。在这种情况下（例如从服务器获取图像），您希望这些图像显示在您的屏幕（即您的 UI）上。获取这些资源后，您将数据传递到`onPostExecute()`您可以更新 UI 的地方，因为它在您的 UI 线程上运行。

希望这个解释能消除你的疑惑。

# bash - bash nslookup 无心运行 ls

> ID：11002259
> 
> 赞同：1
> 
> 时间：2012-06-12T18:04:23.367
> 
> 标签：bash, nslookup

当我跑

```
echo `nslookup 100.100.100.100` 
```

在 bash 中，它列出了所有文件（独立于（不存在的）IP 地址）。这是一个未记录的错误，还是发生了什么？

**我确实意识到这里不需要回声。**

```
hpek@hpek:~/temp/nslookupTest$ touch fil1.txt
hpek@hpek:~/temp/nslookupTest$ touch fil2.txt
hpek@hpek:~/temp/nslookupTest$ touch fil3.txt
hpek@hpek:~/temp/nslookupTest$ echo `nslookup 100.100.100.100`
Server: 10.10.10.1 Address: 10.10.10.1#53 fil1.txt fil2.txt fil3.txt server can't find 100.100.100.100.in-addr.arpa.: NXDOMAIN
hpek@hpek:~/temp/nslookupTest$ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T18:08:45.260

该`nslookup`命令的输出包含一个星号`*`，该星号`echo`扩展为当前目录的文件（通配符）。您可以通过用引号将命令括起来来解决此问题`"`

```
$ echo "$(nslookup 100.100.100.100)" 
```

# javascript - 向下滚动页面时如何切换固定元素

> ID：11002264
> 
> 赞同：1
> 
> 时间：2012-06-12T18:05:05.220
> 
> 标签：javascript, jquery, html, css, css-position

人们在向下滚动页面时如何切换固定元素？这是我的意思的一个完美的例子`www.Joel.is`。如果您查看共享按钮，当您向下滚动查看一个帖子时，下一个帖子的共享按钮会使用`position:fixed`

我只看到过回答如何创建初始固定位置的帖子，但没有看到切换。（http://stackoverflow.com/questions/4907872/changeing-an-elements-css-position-after-scrolling-down-the-page）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:16:09.320

您将使用相同的原则，但编辑元素的样式。

```
<div style="position: static;" id="ele"></div> 
```

进而：

```
document.getElementById('ele').style.position = "absolute"; 
```

或者对于 jQuery：

```
$('#ele').css('position', 'absolute'); 
```

# c# - 如何同步 WCF 服务中的对象访问？

> ID：11002266
> 
> 赞同：-1
> 
> 时间：2012-06-12T18:05:15.407
> 
> 标签：c#, multithreading, wcf

我正在编写一个实时计算程序。该程序需要在内存中保存大量数据。我想编写一些服务函数，将数据保存在内存中以便快速访问。我希望该服务具有以下功能。

1.  如果客户端请求一些不在内存中的数据，则将这些数据从数据库加载到内存中，然后发送给客户端。客户需要在此期间等待。

2.  如果两个客户端请求相同的数据，那么如果服务正在向一个客户端请求加载数据，那么服务应该知道不要再次尝试加载。我该如何解决这个并发问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:08:10.260

您可以查看.NET应用程序中的[缓存。](http://msdn.microsoft.com/en-us/library/dd997357.aspx)MemoryCache类[非常](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)适合您的要求。

# c# - 使用 Visual Studio 2010 检测内存泄漏？

> ID：11002268
> 
> 赞同：2
> 
> 时间：2012-06-12T18:05:31.627
> 
> 标签：c#, wpf

我有一个 wpf 应用程序正在泄漏内存...有没有办法仅使用 Visual Studio 检测和修复这些泄漏而不使用任何分析工具？或者有没有我可以用来检测和修复它们的免费的？塔克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:07:18.270

Scitech 的[内存分析器](http://memprofiler.com/)有免费试用期，是调查内存消耗问题的绝佳工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:13:32.253

您只能在 Visual Studio 中调查用 C++ 编写的应用程序的内存泄漏，请查看[官方](http://msdn.microsoft.com/en-us/library/x98tx3cf%28v=vs.80%29.aspx)文档...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:18:28.973

看看[这个](https://stackoverflow.com/a/5001873/142637)答案，它提供了一些有用信息的链接。

您基本上需要[SOS](http://msdn.microsoft.com/en-us/library/bb190764.aspx)调试器扩展。

# javascript - 如何获取div值并将其拆分为javascript中的数组

> ID：11002272
> 
> 赞同：0
> 
> 时间：2012-06-12T18:05:48.903
> 
> 标签：javascript, html, arrays, dom

有一个 div 有一些像这样的值：

```
<div id="links">
<link1>||<link2>||<link3>
</div> 
```

我知道在 javascript 中我们可以创建一个字符串数组，`str.split("||");`但我的问题是在这种情况下由于某些原因我无法定义变量，我只需要像 var 一样获取 div 块的值，但我不知道怎么样，我需要从上面的块中得到这样的东西：

```
var str = '<link1>||<link2>||<link3>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:09:21.037

从您的 div中获取[innerHTML](https://developer.mozilla.org/en/DOM%3aelement.innerHTML)，然后通过删除字符串开头和结尾的空格来修剪它：

```
var str = document.getElementById('links').innerHTML.
            replace(/^\s*/, '').replace(/\s*$/, ''); 
```

然后你可以继续做：

```
var arr = str.split("||"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:13:34.110

这个怎么样？

```
var array = document.getElementById('links').innerHTML.trim().split('||'); 
```

如果你只想要一个字符串，使用这个：

```
var str = document.getElementById('links').innerHTML.trim(); 
```

# java - 使用 EXTRA_CONFIDENCE_SCORES 将 wav 与预定义的 wav 进行比较 - Android

> ID：11002278
> 
> 赞同：1
> 
> 时间：2012-06-12T18:06:17.943
> 
> 标签：java, android, wav, voice-recognition

有没有办法在某个地方存储一个 wav 文件（即，一个朋友的名字，通常不能从语音识别器中理解，“Geraldo Alkasami”），然后将它与我使用[extra_confidence_scores](http://developer.android.com/reference/android/speech/RecognizerIntent.html#EXTRA_CONFIDENCE_SCORES)对识别器说相同的短语进行比较？它会依赖于用户（我宁愿它是依赖的）吗？

# c# - C# 4.0 任务库死锁

> ID：11002280
> 
> 赞同：1
> 
> 时间：2012-06-12T18:06:23.520
> 
> 标签：c#, .net, sql

我正在试验这段代码：

```
 foreach (var r in _vm.Rules.Take(20)) {
            Task.Factory.StartNew(() => {
                new SQLRuleSerializer().SaveRule(_vm.SelectedKey, r);
            });             
        } 
```

错误：

> 事务（进程 ID 600）与另一个进程在锁资源上死锁，并已被选为死锁牺牲品。重新运行事务。

考虑到我没有任何显式锁，我不确定这是如何死锁的。我想问题是序列化程序是一个代理，即使通过单独的实例也不能并行调用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T18:07:52.693

> 事务（进程 ID 600）与另一个进程在锁资源上死锁，并已被选为死锁牺牲品。重新运行事务。

死锁来自 SQL Server，而不是 C# 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:32:27.643

您正在尝试并行保存 20 条不同的规则，但似乎每次保存都需要 SQL 服务器上的一些锁。这意味着并行化很可能没有任何好处，因此您应该使用普通循环而不使用 TPL。

# javascript - JavaScript XML 解析在 IE 中有效，但在 Firefox/Chrome 中无效

> ID：11002288
> 
> 赞同：0
> 
> 时间：2012-06-12T18:06:49.623
> 
> 标签：javascript, xml, internet-explorer, google-chrome

我的 XML 解析存在以下问题，我的脚本在 IE 中有效，但在 Firefox/Chrome 中无效（这很奇怪）。当然，我正在做的事情真的很愚蠢，但非常感谢任何帮助。

以下 JavaScript 函数：

```
this.displayData = function(xml)
{
    var table = document.createElement("table"); // table for results
    table.border=0;
    table.width="100%";
    table.classname="requestList";

    var container = document.getElementById('mainright');

    if (container.hasChildNodes())
    {
        while(container.childNodes.length >= 1)
            container.removeChild(container.firstChild);
    }

    container.appendChild(table);

    var entities = xml.getElementsByTagName("entity");

    for (var i=0; i<entities.length; ++i)
    {
        var entity = entities[i];
        var row = table.insertRow(table.getElementsByTagName("tr").length);
        var fields = entity.getElementsByTagName("field");

        for (var z=0; z<fields.length; ++z)
        {
            var cell = row.insertCell(z);
            cell.innerHTML = "("+fields[z].childNodes[0].nodeValue+")";
        }
    }
} 
```

被称为 xmlhttp 回调，并且 XML 似乎有效。XML 输出示例：

```
<data-list>
<entity entity="">
<field field="requestid">
<![CDATA[ 1 ]]>
</field>
<field field="customer">
<![CDATA[ 1 ]]>
</field>
<field field="assignteam">
<![CDATA[ 0 ]]>
</field>
<field field="assignuser">
<![CDATA[ admin ]]>
</field>
<field field="class">
<![CDATA[ 1 ]]>
</field>
<field field="openeddt">
<![CDATA[ 2012-06-11 19:39:26 ]]>
</field>
<field field="status">
<![CDATA[ 1 ]]>
</field>
</entity>
<entity entity="">
<field field="requestid">
<![CDATA[ 2 ]]>
</field>
<field field="customer">
<![CDATA[ 1 ]]>
</field>
<field field="assignteam">
<![CDATA[ 0 ]]>
</field>
<field field="assignuser">
<![CDATA[ admin ]]>
</field>
<field field="class">
<![CDATA[ 1 ]]>
</field>
<field field="openeddt">
<![CDATA[ 2012-06-11 19:40:02 ]]>
</field>
<field field="status">
<![CDATA[ 1 ]]>
</field>
</entity>
</data-list> 
```

在 IE 中，当我发出请求时，它会在新创建的表中显示数据，每个实体一行，每个字段一列。

然而，在 Firefox 和 Chrome 中，请求被调用正常并且不会产生错误，但空字符串作为 nodeValues 返回，例如，我得到的只是 () 在每个（正确数量的）行和列中。

我敢肯定我真的很愚蠢。非常感谢任何帮助。

干杯，

戴夫。

** 回答我希望，但我无法再 7 小时回答我自己的问题 **

问完一分钟后，我似乎偶然发现了答案……

文本内容

这似乎是 Firefox 和 Chrome 中用于文本数据的属性（我假设是因为它包含在 CDATA 标记中）。但是，将代码更改为 fields[z].textContent 会破坏 IE。

所以我做了以下事情：

```
var data = (fields[z].textContent == undefined) ? fields[z].firstChild.nodeValue : fields[z].textContent;
cell.innerHTML = data; 
```

这似乎在两者中都可以正常工作。

但我欢迎任何“适当的”解决方案。

干杯，

戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T00:54:10.503

这被证明是一个标题问题 - 愚蠢的是，我没有将 XML 生成中的输出标题设置为 text/xml。虽然 IE 不关心 FF 而 Chrome 关心。

在 PHP 中设置 Content-type 标头解决了它。

# wpf - 将其内容转换为不同颜色的自定义文本块

> ID：11002289
> 
> 赞同：0
> 
> 时间：2012-06-12T18:06:52.463
> 
> 标签：wpf, wpf-controls, textblock

我将编写一个自定义文本块来拆分其文本内容。它将根据条件使文本具有不同的颜色，并且文本将用逗号分隔。逗号将保持黑色。我不知道如何开始。你能提供帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:22:21.327

下面的用户控件使用项目控件以随机颜色显示每个标记。

用法：

```
 <local:ColorTextBlock Text="abcd,abcde, abc, abcdef, abc, abcde, "/> 
```

XAML：

```
<UserControl x:Class="WpfApplication1.ColorTextBlock"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:WpfApplication1"
             mc:Ignorable="d">

    <UserControl.Resources>
        <local:TextColorConverter x:Key="TextColorConverter" />
    </UserControl.Resources>

    <ItemsControl Name="_itemsControl">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding .}" Foreground="{Binding ., Converter={StaticResource TextColorConverter}}" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
</UserControl> 
```

后面的代码：

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Media;

namespace WpfApplication1
{
    public partial class ColorTextBlock : UserControl
    {
        public ColorTextBlock()
        {
            InitializeComponent();
        }

        public string Text
        {
            get { return (string)GetValue(TextProperty); }
            set { SetValue(TextProperty, value); }
        }

        public static readonly DependencyProperty TextProperty = 
            DependencyProperty.Register("Text", typeof(string), typeof(ColorTextBlock), new UIPropertyMetadata(""));

        protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e)
        {
            base.OnPropertyChanged(e);

            if (e.Property.Name == "Text")
            {
                // Below code does not handle text that includes stars. Null check probably needed. 
                _itemsControl.ItemsSource = Text.Replace(",", "*,*").Split('*');
            }
        }
    }

    public class TextColorConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            string text = value as string;
            if (text == ",") return Brushes.Black;

            return new SolidColorBrush() { Color = Color.FromArgb(255, (byte)_random.Next(255), (byte)_random.Next(255), (byte)_random.Next(255)) };
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }

        private static Random _random = new Random();
    }
} 
```

# c - Linux procfs系统信息api

> ID：11002304
> 
> 赞同：2
> 
> 时间：2012-06-12T18:08:27.483
> 
> 标签：c, linux, monitoring

我正在编写一个工具，我需要收集一些关于运行 Linux 系统的信息，而不是那些可以从`sysinfo`.`/proc/`用于执行此操作的 API，或者我应该只编写为我执行此操作并将结果传递给我的 C 程序的函数或脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:09:42.300

[`proc`](http://en.wikipedia.org/wiki/Procfs)文件系统就是*API*：你读取伪文件来获取数据。这可以用任何编程语言完成，包括 C。

# javascript - 日期格式和删除谷歌图表中的列名

> ID：11002307
> 
> 赞同：0
> 
> 时间：2012-06-12T18:08:37.090
> 
> 标签：javascript, google-visualization

[![IMG](../Images/610a1398383cd2fb7c6ec0c87f0ab622.png)](https://i.stack.imgur.com/DDq8T.png)

我在这个谷歌图表中有两个问题。

1.  我想摆脱`Resour...`右侧的单词或显示整个单词。
2.  当我将鼠标悬停在任何条上时，我想显示该数据点的时间或时间和日期

这是我显示图表的代码：

```
<script type='text/javascript'>
    google.load('visualization', '1', { 'packages': ['corechart'] });
    google.setOnLoadCallback(drawSizeChart);

    function drawSizeChart() {

        $.post('/metrics/GetSiteSize', { sID: "@Model.SiteId" },
        function (data) {

            var tdata = new google.visualization.DataTable();
            tdata.addColumn('string', 'Date');
            tdata.addColumn('number', 'Resources');

            for (var i = 0; i < data.length; i++) {
                var date = (new Date(parseInt(data[i].created_at.substr(6)))).toString().substring(4, 15);
                var rCount = data[i].resource_count;
                tdata.addRow([date, rCount]);
            }

            var options = {
                title: 'Resource Count',
                };

            var chart = new google.visualization.ColumnChart(document.getElementById('site_size'));
            chart.draw(tdata, options);
        });
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:17:12.080

[根据这个问题](https://stackoverflow.com/questions/5202029/hiding-the-legend-in-google-chart)的顶部评论，“它实际上看起来好像你可以省略 chdl= 参数来获得一个没有图例的散点图。” 希望有帮助。编辑：哈，我没有读完整本书。

采用...

```
legend: {position: 'none'} 
```

# ajax - 如何测试ajax页面

> ID：11002309
> 
> 赞同：1
> 
> 时间：2012-06-12T18:08:43.867
> 
> 标签：ajax, codeigniter, testing

我创建了一个 codeigniter 应用程序，其中包含一个带有一些 ajax 的页面。我试图向自己证明 ajax 页面实际上是有效的。也就是说，我的页面只有一个部分正在更新，其余部分保持不变。

这是我在控制器中的代码：（索引是在初始页面加载时调用的方法。单击刷新按钮时会调用 index2()）

```
 public function index()
       {
           $this->load->model('locations_model');
           $data['clienthistory'] = $this->locations_model->get_locations();
           $data['main_content'] = 'dashboard';
           $this->load->view('includes/template', $data);
       }

       public function index2()
       {
          $this->load->model('locations_model');
          $data['clienthistory'] = $this->locations_model->get_locations();
          return json_encode($data['clienthistory']);                                                                     
       } 
```

这是我的观点：

```
 <h2>timer test</h2>
    <?php echo now();?>

<h2>Latest Client Status</h2>
            <?php echo form_open('Dashboard/index');          
            echo form_submit('submit', 'Refresh Client Data', 'id="clientsubmit" class="btn-primary"');
            ?>
      <div class="row-fluid">
             <div class="span12" id="ajaxcontainer">
               <table class="table table-bordered table-striped">
                <thead>
                 <tr>
                   <th>IP</th>                                                                                                          
                   <th>Name</th>                                                                           
                   <th>Last Updated</th>
                 </tr>
                 </thead>
                <tbody>
               <?php foreach ($clienthistory as $histitem): ?>
                    <tr>
                        <td><?php echo $histitem['network'] ?></td>
                        <td><?php echo $histitem['name'] ?></td>
                        <td><?php echo $histitem['lastupdated'] ?></td>
                    </tr>
               <?php endforeach ?>

                </tbody>
               </table>
       </div>

     <?php echo form_close();  ?>
     <script type="text/javascript">
        $('#clientsubmit').click(function() {                   
               $.ajax({                                
                    url:"<?php echo site_url('Dashboard/index2'); ?>",
                    type: 'POST',
                    dataType: 'html'
                    success: function(returnDataFromController) {
                          $('#ajaxcontainer').html(returnDataFromController)
                    }
                  });

       return false;      
     });
    </script> 
```

这个想法是在页面上显示当前时间，在我的 ajax 调用不应该更新的区域中。但是当我点击我的刷新按钮时，除了更新表格数据之外，时间也在更新。我不确定我理解为什么会这样。任何帮助，将不胜感激。提前为补救问题道歉 - 对 codeigniter 和 ajax 来说是新手。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:16:52.147

你的按钮是一个`submit`，所以它会在点击时刷新页面。

您需要将其更改为其他内容，例如`<a></a>`并向其附加操作，如下所示：

```
<a href="#" id="clientsubmit" class="btn btn-primary">Refresh Client Data</a> 
```

由于您使用的是 twitter 引导程序，因此该链接不会与您的布局混淆，将 a 添加`btn`到它的类中。

如果没有该`submit`按钮，您的页面将不会刷新，您的日期功能将保持不变。

为了预防起见，单击时禁用该链接/按钮，直到返回请求。

```
$('#clientsubmit').click(function() {
$(this).attr("disabled", "disabled");
...
$('#ajaxcontainer').html(returnDataFromController);
$(this).removeAttr("disabled");
... 
```

在您的 ajax 调用中，您将只更新`ajaxcontainer`元素。

希望能帮助到你。

# php - php中的逗号分隔值添加空格和小方块

> ID：11002315
> 
> 赞同：0
> 
> 时间：2012-06-12T18:08:50.920
> 
> 标签：php

我有一个文本区域，我正在写的形式是在文本区域中粘贴逗号分隔值

喜欢

```
1,2,3,4,5

6,7,8,9,10

11,12,13,14,15 
```

当我从其创建 csv 文件提交但第 1 行中的 csv 文件包含标题时

它在第一行附加逗号分隔值的第一行值

我得到这样的，我得到小方块，第一行逗号分隔值是

附加到标题

```
id, grpname, grpid,code,name1,2,3,4,5

6,7,8,9,10

11,12,13,14,15 
```

这是代码

```
$csvdata = $_REQUEST['csvdata'];
$arr     = explode(",", $csvdata);
$fname   = 'file.csv';

$fp = fopen($fname, 'w');

$heading_row = array('id', 'grpname', 'grpid', 'code', 'name');
fputcsv($fp, $heading_row);

foreach ($arr as $val) {
    $v = trim($val);
    $v .= ',';

    fwrite($fp, $v, strlen($v)) || die("not written");

}
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:12:12.270

尝试这个 ：

```
$csvdata = $_REQUEST['csvdata'];
$arr     = explode(",", $csvdata);
$fname   = 'file.csv';

$fp = fopen($fname, 'w');

$heading_row = array('id', 'grpname', 'grpid', 'code', 'name');
fputcsv($fp, $heading_row);

foreach ($arr as $val) {
    $v = "\n";
    $v.= trim($val);
    $v.= ',';

    fwrite($fp, $v, strlen($v)) || die("not written");

}
fclose($fp); 
```

请下次，花点时间写你的帖子。非常混乱。感谢@Truth 让可读性更强。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:14:40.573

你可以用这个

```
$fh = fopen($myFile, 'a') or die("can't open file"); 
```

我认为这个链接会有帮助 [http://www.tizag.com/phpT/fileappend.php](http://www.tizag.com/phpT/fileappend.php)

# gcc - g++ 内联汇编约束的含义（等于 vs 加等）

> ID：11002316
> 
> 赞同：2
> 
> 时间：2012-06-12T18:08:52.513
> 
> 标签：gcc, x86, inline-assembly

我一直在 gcc/x86 下使用这个小函数来进行 int16_t 的快速字节交换：

```
static inline int16_t MySwapInt16t(int16_t val)
{
   __asm__ ("xchgb %b0, %h0" : "=Q" (val) : "0" (val));
   return val;
} 
```

...今天在网上浏览别人的代码时，我看到他有一个类似的功能，看起来像这样：

```
static inline int16_t HisSwapInt16t(int16_t val)
{
   __asm__ ("xchgb %h0, %b0" : "+Q" (val));
   return val;
} 
```

我的功能和他的功能（AFAICT）之间的区别是：

1.  他指定“+Q”而不是“=Q”
2.  交换 %h0 和 %b0 的位置
3.  他的函数末尾没有 : "0" (val) 子句

据我所知，这两种实现似乎都可以正常工作，但内联汇编对我来说有点像魔法，所以有知识的人可以解释一下：

1.  上面列出的三个差异有什么意义？
2.  这两种实现中的一种是否比另一种更好或更快，或者它们的性能是否相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:17:59.700

> 他指定“+Q”而不是“=Q”
> 
> 他的函数末尾没有 : "0" (val) 子句

修饰符代表输入和输出操作数，因此`+`无需添加输入列表，请查看[CGG 手册](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Modifiers.html#Modifiers)。

> 交换 %h0 和 %b0 的位置

我想这并不重要，因为`xchg`指令在两个操作数之间进行内容交换。

> 这两种实现中的一种是否比另一种更好或更快，或者它们的性能是否相同？

为了找出最佳实现，我将编译两者并检查`objdump`编译器如何包装这些函数，因为核心函数将是相同的单条指令。

希望这有帮助！

# php - 从给定的最大数字中减去并输出数字输入值

> ID：11002317
> 
> 赞同：1
> 
> 时间：2012-06-12T18:09:01.100
> 
> 标签：php, javascript, jquery

我有多个按 div 分组的输入文本字段：

```
<div class="container0">
<input class="containerItem0" name="containerItem[0][0]" id="containerItem_0_0" type="text">  
<input class="containerItem1" name="containerItem[0][1]" id="containerItem_0_1" type="text">
</div

<div class="container1">
<input class="containerItem0" name="containerItem[1][0]" id="containerItem_1_0" type="text">
<input class="containerItem1" name="containerItem[1][1]" id="containerItem_1_1" type="text">
</div>

<div class="container2">
<input class="containerItem0" name="containerItem[2][0]" id="containerItem_2_0" type="text">
<input class="containerItem1" name="containerItem[2][1]" id="containerItem_2_1" type="text">
</div> 
```

让我解释一下这段代码：
我有三个容器：0,1 和 2。但是这是可变的。可能会有更多或更少。在每个容器中，我总是有相同数量的项目，在这种情况下是两个。这也可能会有所不同，但所有容器的数量总是相同的。
相同等级的物品是相同的物品！唯一的区别是它们在不同的容器中。
每个输入项的名称和 ID 在我的 php 脚本中用于在提交表单后确定：

```
containerItem[1][0]
containerItem[ContainerNumber][Item] 
```

**我想要完成的事情：**
每个 containerItem 都有一个单独的最大数量。
假设containerItem0 = 100，containerItem1 = 200，containerItem2 = 300。
现在，当我在containerItem0的输入字段中输入一个数值时，例如20。它应该更新可能在输入字段后面的a，在这种情况下还剩多少80.
它不仅应该更新我刚刚输入数值的输入字段的后面，而且还应该更新所有其他 containerItem0 的后面。

**我试过的**

```
// php part
// Create variables for use in jquery for the max values for the containerItems
$jqueryVars="";
$j=0;
// containerItems is an array I get with the numberOrdered value which equals the maximum number allowed
foreach ($containerItems as $key => $value) {
    $jqueryVars .= "var maxContainerItem".$j." = ".$value['NumberOrdered'].";\n";
    $j++;
}

// jQuery part:
// Calculate left amount of container items.
'$(document).change(function() {
    '.$jqueryVars.'
    var sumOfValues = 0;
    //I USED >>.containerItem0<< in this case to see if it works, however this should be variable
    $(".containerItem0").each(function(){
       sumOfValues+=$(this).val();
    });
    alert(sumOfValues);
}); 
```

正如你所看到的，我被困在让整个事情变得动态化。我部分收到 sumOfValues 的警报消息。为什么是部分？它不添加数字，而是将它们作为字符串附加。
另外，我不知道如何遍历所有容器类并监听输入字段的变化。

我期待着得到任何指向正确方向的指示:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:23:25.510

您正在使用`$(this).val()`which 返回`input`字段的值。这些值确实是字符串，因此`+`在它们上使用会将它们连接起来。

如果您在添加它们之前解析这些值，它应该会产生您期望的结果：

```
$(document).change(function() {
  var sumOfValues = 0;
  $(".containerItem0").each(function() {
     sumOfValues += parseFloat($(this).val());
  });
  alert(sumOfValues);
}); 
```

# ruby-on-rails - 带有 Rails 的登陆页面的 RESTful（或适当的）MVC 设计

> ID：11002331
> 
> 赞同：1
> 
> 时间：2012-06-12T18:10:09.237
> 
> 标签：ruby-on-rails, model-view-controller, rest, restful-authentication

我有一个关于 Rails MVC/应用程序设计的非常简单的问题，重点是 RESTful。我对 Rails 非常非常陌生；这实际上是我自己构建的第一个应用程序（尽管我已经阅读了[Michael Hartl 的 Rails 教程](http://www.railstutorial.org)和[Rails for Zombies 1 & 2](http://www.codeschool.com)）。

**目标：**我想创建一个收集电子邮件地址的页面——这与[早期的 Mint 原型](http://okdork.com/mint/?i=2)非常相似，其中在构建他们的应用程序之前，他们使用登录页面来评估对想法的兴趣并测试潜在的营销信息。

**方法：**我的第一个直觉是创建一个 LandingPages 控制器和一个电子邮件模型，这实际上工作得很好，直到我进入电子邮件收集表单 - 那时，我在编写 Rspec 测试和应用程序代码时遇到了一堆障碍。

我的大部分麻烦都在于分配表单，它由 LandingPages 控制器和视图提供服务，但当然是向电子邮件模型提交数据。

**问题：**我上面建议的双模型方法是否合适？还是我应该将所有内容整合到一个电子邮件模型和控制器方案中？可能是因为控制器 A 与模型 B 交互而导致我的应用程序代码变得更复杂的原因吗？

如果上述方法合适，我将以另一种形式提交我的实际代码问题。:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:18:44.830

为了 RESTful，你在 LandingPageController 的表单应该指向 EmailController#create。但如果你不这样做，没有人会死。

两种型号是什么？

# c# - 登录视图显示为已登录，但我未登录

> ID：11002332
> 
> 赞同：1
> 
> 时间：2012-06-12T18:10:13.777
> 
> 标签：c#, asp.net

![使用登录控制器的问题](../Images/d578b1482cd57876de174681f3585ef5.png)

我在母版页上的登录视图有问题。

当我登录时一切正常，但如果我关闭选项卡一段时间或重建应用程序，我的会话将关闭，但登录视图仍显示 Session :/.

我在 Site.Master 中有这段代码

```
<div class="loginDisplay">
            <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    [ <a href="~/Login.aspx" id="HeadLoginStatus" runat="server">Log In</a>
                    ]
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Bienvenido <span class="bold">
                   <%-- HeadLoginName--%>
                        <asp:LoginName ID="MemberName" runat="server" />
                    </span>! [
                    <asp:LoginStatus ID="MemberLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out"
                        LogoutPageUrl="~/Login.aspx" onloggingout="HeadLoginStatus_LoggingOut" />
                    ]
                </LoggedInTemplate>
            </asp:LoginView>
        </div> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:17:43.780

恐怕您对以下两个概念没有区别：

*   [ASP.NET 会话](http://msdn.microsoft.com/en-us/library/ms178581.aspx)
*   [表单认证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

让我试着详细说明一下：ASP.NET 会话允许解决 HTTP 协议的无状态特性。服务器向客户端发送一个 cookie，然后客户端在每个后续请求中发送该 cookie。然后服务器将内存中的一些信息与这个cookie相关联。`Session["someKey"]`您可以使用该对象访问此信息。默认情况下，此信息存储在内存中，尽管您可以将其配置为进程外。因此，当您重建应用程序或达到超时时，服务器上的内存将被释放，您存储的所有对象都会消失。要为 ASP.NET 会话配置超时，您可以使用以下命令：

```
<system.web>
    <sessionState timeout="30" />
</system.web> 
```

另一方面，表单身份验证完全不同。它使用 cookie 来跟踪经过身份验证的用户。此 cookie 与 ASP.NET 会话 cookie 不同。它具有不同的超时值并独立配置：

```
<authentication mode="Forms">
  <forms
    loginUrl="/login"
    timeout="30" />
</authentication> 
```

表单身份验证机制不会在服务器的内存中存储任何内容。它跟踪存储在 cookie 中的经过身份验证的用户。因此，即使您重新编译应用程序，用户仍然会在 web.config 中定义的给定超时期限内进行身份验证。请注意`slidingExpiration`更新每个请求的超时的属性。

# api - 如何获取关注者姓名而不是 ID？

> ID：11002334
> 
> 赞同：0
> 
> 时间：2012-06-12T18:10:17.077
> 
> 标签：api, asana

我认为这将为我提供关注者姓名列表，而不仅仅是 ID：

[https://app.asana.com/api/1.0/projects?opt_fields=name,followers&opt_expand=followers](https://app.asana.com/api/1.0/projects?opt_fields=name,followers&opt_expand=followers)

我是否错误地使用了 opt_expand？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:41:59.823

（我在 Asana 工作）

`opt_fields`和之间的相互作用`opt_expand`可能令人困惑，因为`opt_fields`目前优先。

`name`列表中的键`opt_fields`将与项目相关，而不是关注者。尝试通过只是`opt_fields=followers,followers.name`。

# mvvm - 我可以用 RaisePropertyChanged 做什么？

> ID：11002336
> 
> 赞同：5
> 
> 时间：2012-06-12T18:10:18.680
> 
> 标签：mvvm, mvvm-light, propertychanged

我在 Windows Phone Silverlight 应用程序中使用 MVVM Light。

我真的不明白 RaisePropertyChanged 应该如何工作；让我解释一下，用这样的代码

```
private Recipe _selectedRecipe;

public Recipe SelectedRecipe
{
    get
    {
        return this._selectedRecipe;
    }
    set
    {
        this._selectedRecipe = value;
        RaisePropertyChanged("SelectedRecipe");
    }
} 
```

调用 RaisePropertyChanged("SelectedRecipe") 时会发生什么？

我希望使用我的代码执行对新方法的调用，或者类似的东西，但我无法在我找到的（少数）示例中找到类似的东西。那么，它是如何工作的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:30:07.153

该`InotifyPropertyChanged`事件对于 Silverlight 中的数据绑定很重要，`RaisePropertyChanged`作为 MVVM-Light 工具包的一部分提供的方法是一个帮助程序，可以在有人监听它时引发该事件。

# ios - 使用字幕为 HTTP 实时流编码视频

> ID：11002337
> 
> 赞同：4
> 
> 时间：2012-06-12T18:10:18.997
> 
> 标签：ios, video-streaming, http-live-streaming

我一直在关注 Apple 的[HTTP Live Streaming](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/UsingHTTPLiveStreaming/UsingHTTPLiveStreaming.html)指南，并让它在我的应用程序中运行良好，但我想在视频中嵌入字幕。[Quora 上的这个帖子](http://www.quora.com/Are-subtitles-closed-captions-supported-for-HTTP-Live-Stream-videos-on-Apple-iOS-devices)表明 Netflix 已经做到了。

我的源视频使用 QuickTime Pro 通过 .srt 文件嵌入了字幕，在 QuickTime 和我的 iOS 应用程序中播放视频时可以看到字幕。一旦我使用 mediafilesegmenter（根据 HLS 的要求）将视频拆分为较小的 .ts 文件，字幕就会消失。我正在使用[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)。

是否有一种特殊的方法来编码源视频或使用 mediafilesegmenter 进行字幕工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:48:14.840

ts 流中可以有字幕（例如 EIA-608 或 EIA-708）。我不知道有什么好的免费工具可以将这样的字幕插入到 ts 流中，但[Manzanita](http://www.manzanitasystems.com)可能会卖给你一些东西（以荒谬的价格）。

不幸的是，许多 HLS 播放器会忽略字幕，因为 HLS 规范没有提到应该如何处理字幕轨道。在您自己的应用程序中，您可以通过找到一个已经包含 EIA-608/EIA-708 文本的 ts 文件并对其进行分段来测试它。

坦率地说，我认为在 TS 中嵌入字幕是一条死路，您会发现编写自己的由 TimedMetadata 触发的字幕显示器会更容易。

=== 更新 ===

自 HLS 草案第 9 版（2012 年 9 月 22 日）起，HLS 支持 WebVTT 字幕。我不知道有什么工具可以用它们来准备流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:56:32.323

我认为对于浏览器中的 HTTP Live Streaming，不支持字幕（我可能是错的）。

然而，像[http://captionatorjs.com/](http://captionatorjs.com/)这样的 polyfill 允许在 iOS 上的视频中添加字幕。现在，我知道字幕适用于非 HLS 视频，但不确定它是否适用于 HLS……您需要研究/测试。

* * *

PS，如果它是您拥有的本机应用程序，那么您正在寻找定时元数据[http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPTimedMetadata_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPTimedMetadata_Class/Reference/Reference.html)来支持字幕等内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-19T17:16:23.837

如果它对某人有帮助，我有一个应用程序可以从 Vimeo Pro 帐户流式传输 HLS 内容。Vimeo 允许您添加在 iOS 和 tvOS 设备上完美处理的 WebVTT 字幕。

为了生成 .vtt 文件，我使用了 YouTube，如下所示：[https ://www.youtube.com/watch?v=vlj_Lq31BKw](https://www.youtube.com/watch?v=vlj_Lq31BKw)

# python - 如何在 python 中的图形上仅重新绘制一组轴？

> ID：11002338
> 
> 赞同：8
> 
> 时间：2012-06-12T18:10:18.980
> 
> 标签：python, matplotlib

我使用子图在一个图中有几个图。每个轴实例用于引用一组特定的轴。像这样：

```
ax[0] = fig.add_subplot(2, 2, 1)
ax[1] = fig.add_subplot(2, 1, 2)
ax[2] = fig.add_subplot(2, 2, 2,projection='3d') 
```

如您所见，我的一组轴是 3d 图。我对其他图的属性之一进行了更改，如下所示：

```
plt.setp(zh, xdata=event.xdata,ydata=event.ydata) 
```

并像这样重新绘制：

```
zh.figure.canvas.draw(); 
```

然而，这是用所有的 suplot 重新绘制整个图形，包括 3D 投影的图形，这大大减慢了速度。

我试过这个：

```
ax[0].draw_artist(zh) 
```

我认为这是有希望的，但轴没有被更新。我没有收到错误，只是没有重新绘制。我也试过：

```
zh.axes.draw(zh,ax[0]) 
```

但这给出了错误：

```
AttributeError: 'Line2D' object has no attribute 'open_group' 
```

关于为什么会发生这种情况的任何想法，以及如何重新绘制我正在更改的轴实例而不是整个图形？

**编辑：**

zh 是 Line2D 对象：

```
zh, = plt.plot(z.real, z.imag, 'x', ms=10) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T20:59:39.523

您不能绘制单个轴，但只能更新单个轴。

基本上，您需要对事物进行 blit。如果轴的范围（以及刻度等）发生变化，这将变得更加复杂。目前，我认为情况并非如此。

作为一个过于简单的例子：

```
import matplotlib.pyplot as plt
import numpy as np

plt.ion()
x = np.linspace(0, 4*np.pi, 100)
fig, axes = plt.subplots(nrows=3)

fig.canvas.draw()
background = fig.canvas.copy_from_bbox(axes[0].bbox)

lines = [ax.plot(x, np.cos(x))[0] for ax in axes]
fig.canvas.draw()

for phase in range(1000):
    fig.canvas.restore_region(background)
    lines[0].set_ydata(np.cos(x + phase / 5.0))
    axes[0].draw_artist(lines[0])
    fig.canvas.blit(axes[0].bbox) 
```

但是，新的`matplotlib.animations`将为您处理此操作，并且只会对您指定的艺术家的轴进行 blit。

这是使用 编写的相同示例`matplotlib.animations.FuncAnimation`：

```
import matplotlib.pyplot as plt
from matplotlib.animation import FuncAnimation
import numpy as np

x = np.linspace(0, 4*np.pi, 100)
fig, axes = plt.subplots(nrows=3)

lines = [axes[0].plot(x, np.cos(x), animated=True)[0]]
lines += [ax.plot(x, np.cos(x)) for ax in axes[1:]]

class Update(object):
    def __init__(self, line):
        self.phase = 0
        self.line = line
    def __call__(self, _):
        self.line.set_ydata(np.cos(x + self.phase / 5.0))
        self.phase += 1.0
        return [self.line]

anim = FuncAnimation(fig, Update(lines[0]), interval=0, blit=True) 
plt.show() 
```

哪些艺术家被动画化（以及哪些轴被更新）由函数（或可调用对象，如在本例中）返回的艺术家控制。

# scala - 如何在 x:Myclass => Boolean 列表上使用 fold left 来获得连词？

> ID：11002339
> 
> 赞同：4
> 
> 时间：2012-06-12T18:10:20.627
> 
> 标签：scala, fold

我有一些过滤器表示为函数 List(MyClass => Boolean) 的列表。我试图获得所有成员的逻辑连接（AND）。我有一种感觉，我可以在这里使用折叠。但我没有得到语法，尤其是关于如何将 MyClass 参数传递给函数的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:26:32.510

您可以`foldLeft`在这里使用，但`forall`要好得多：

```
def check[A](filters: Seq[A => Boolean])(a: A) = filters.forall(_(a)) 
```

其工作原理如下：

```
scala> val filters = Seq[Int => Boolean]((_ > 0), (_ % 2 == 1), (_ < 1000))
filters: Seq[Int => Boolean] = List(<function1>, <function1>, <function1>)

scala> check(filters)(10)
res0: Boolean = false

scala> check(filters)(103)
res1: Boolean = true 
```

它还有一个懒惰的额外优势：

```
scala> check(filters :+ { i: Int => print(i); true })(10)
res2: Boolean = false 
```

最后一个过滤器（有副作用）没有应用，因为第二个过滤器失败了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:18:51.450

这很简单。假设您`List(MyClass => Boolean)`的函数名为`predicates and`MyClass `you are testing is named`myClass`：

```
val result: Boolean = predicates.foldLeft(true) {
  (value, predicate) => 
    value && predicate(myClass)
} 
```

或者在包装函数中：

```
def conjunction(myClass: MyClass, predicates: List[MyClass => Boolean]) = 
  predicates.foldLeft(true) {
    (value, predicate) => 
      value && predicate(myClass)
  } 
```

解释：如果你的谓词列表由三个函数组成：`foo(myClass: MyClass): Boolean`，上面`bar(myClass: MyClass): Boolean`的`buzz(myClass: MyClass): Boolean`代码大致相当于：

```
((true && foo(myClass)) && bar(myClass) && buzz(myClass) 
```

不久前我写了一篇[关于`foldLeft`](http://nurkiewicz.blogspot.no/2012/04/secret-powers-of-foldleft-in-scala.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:36:36.190

好吧，让我们考虑两个这样的谓词：

```
val pa: T => Boolean = ???
val pb: T => Boolean = ??? 
```

它们的结合将是这样的：

```
val pab: T => Boolean = (v: T) => pa(V) && pb(v) 
```

从那里你有折叠的公式：

```
list.tail.foldLeft(list.head) {
  case (pa, pb) => v => pa(v) && pb(v)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:24:57.363

`predicates.foldLeft( true ) ( _ && _( myClass ) )`也可能工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T20:07:05.623

在这些情况下，我所做的是使用“Pimp-My-Library”模式在谓词上添加布尔运算，这只是对结果的布尔运算，提升到谓词上的明显布尔组合器。因此我可以说类似

```
import MyRichPredicate;

val f:Int=>Boolean = (x:Int)=>x%3==0
val g:Int=>Boolean = (x:Int)=>x%5==0
val h = f && !g  //equivalent to (x:Int)=> x%3 == 0 && x%5!=0
print(h(9)) // prints true
print(h(15)) // prints false 
```

鉴于那种管道，你想要的折叠可以写成

```
predicates.foldLeft(x=>true)(_&&_) 
```

甚至更性感

```
predicates.reduce(_&&_) 
```

# ios - 如何在 IOS 中创建一个允许直接跳转到设置屏幕的对话框

> ID：11002340
> 
> 赞同：0
> 
> 时间：2012-06-12T18:10:33.427
> 
> 标签：ios, api, user-interface, settings

在我的应用程序中，我想创建一个对话框，其中有一个按钮可以直接跳转到 IOS 设置页面。我认为这在 5.0 中是可能的，但苹果似乎已经删除了这个功能。在 5.1+ 中是否有一组新的 API 允许这样做？

此链接中描述了执行此操作的旧方法，但我认为 5.1+ 不支持此操作

[http://maniacdev.com/2011/11/tutorial-using-url-schemes-to-open-the-settings-app-to-a-specific-page-in-ios-5/](http://maniacdev.com/2011/11/tutorial-using-url-schemes-to-open-the-settings-app-to-a-specific-page-in-ios-5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:19:40.677

如果它在 iOS 5.1 中真的被删除了，并且没有为设置应用注册 URL 方案，那么使用官方 API 是不可能的。但是，如果可以选择使用非官方 API，那么您可以使用 SpringBoardServices 框架：

```
int SBSLaunchApplicationWithIdentifier(CFStringRef displayIdentifier, Boolean suspended); 
```

是专用于打开应用程序的功能。你可以像这样使用它：

```
SBSLaunchApplicationWithIdentifier(CFSTR("com.apple.preferences"), false); 
```

希望这可以帮助。

# php - bootstrap 一般是如何工作的，特别是在 Zend Framework 中？

> ID：11002346
> 
> 赞同：4
> 
> 时间：2012-06-12T18:10:56.903
> 
> 标签：php, zend-framework, bootstrapping

我正在阅读 Zend Framework 手册，无法理解引导程序是如何工作的，特别是在 ZF 和一般情况下。他们写：

> 您的 Bootstrap 类定义了要初始化的资源和组件。

行。这意味着首先应该实例化 Bootstrap 类。但是后来他们写了配置`ini`文件。里面有关于`Bootstrap`类本身的指令：

```
1\.  bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
2\.  bootstrap.class = "Bootstrap" 
```

所以据我了解，这意味着`Bootstarp`首先实例化的不是类。首先必须读取配置文件，获取有关`Bootstrap`类的信息并让该信息实例化。否则就不需要`Bootstrap`在配置文件中有关于类的信息。因为我可以这样做：

```
require_once(/application/bootstrap.php) 
$b = new Bootstrap(); 
```

并且 Bootstrap 被实例化。

但是他们对读取配置文件然后创建`Bootstrap`.

1.  Bootstrap 是如何工作的？
2.  谁在哪个阶段实例化它？
3.  他们说`APPLICATION_PATH`是一个常数。必须先在某个地方定义一个常量，然后才能使用它。如果在 Bootstrap 类中使用，可以在哪里定义？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T18:48:57.417

如果您查看`index.php`ZF 附带的文件，这应该可以回答大部分问题。

常量在`APPLICATION_PATH`中定义`index.php`，这也是`Zend_Application`创建对象的地方，它简单地引导应用程序，然后运行它。

有两种方法可以告诉`Zend_Application`您引导程序在 ZF1 中的位置。

第一种方式（明确设置）：

```
$application = new Zend_Application(
    APPLICATION_ENV,
    array(
        'bootstrap' => array(
            'class' => 'Bootstrap',
            'path' => APPLICATION_PATH . '/Bootstrap.php',
        ),
        'config' => APPLICATION_PATH . '/configs/application.ini',
    )
); 
```

在上面的示例中，引导类和引导脚本与文件一起作为`$options`直接 to`Zend_Application`的构造函数的一部分传递`application.ini`。

如果将引导类和脚本放在`application.ini`文件中，则可以`Zend_Application`像这样初始化：

```
$application = new Zend_Application(
    APPLICATION_ENV,
    array('config' => APPLICATION_PATH . '/configs/application.ini')
); 
```

`Zend_Application`将处理`application.ini`文件并从那里收集引导信息。

然后，您可以调用`$application->bootstrap()->run();`以运行该应用程序。

直接回答您的问题：

1.  引导程序设置您的应用程序。处理完您的`ini`文件后，第一件事就是发生。这将为您的 ZF 应用程序设置所有必需的组件（例如 Front Controller、Zend_View、Layouts、DB 连接等）。
2.  index.php 一开始就将其实例化。
3.  `APPLICATION_PATH`在 index.php 中立即定义

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:46:54.647

这是我的简短解释：

Bootstrap初始化框架资源、初始化框架配置、加载类等框架准备工作，在每次请求时启动，默认配置下由index.php文件启动。

1.  首先在定义常量的`index.php`地方调用`APPLICATION_PATH`并传递给`Application`类构造函数。
2.  在构造函数框架中创建的应用程序类实例读取配置文件并存储以备后用。
3.  然后框架引导开始：

    I. 创建了应用程序/引导类实例（框架开始创建所需的插件，在您的 *.ini 文件中定义的资源。）

    二、获取您的自定义引导类并使用`init`前缀初始化方法。

    三、加载 FrontController 资源，前端控制器启动请求调度过程（加载模块、控制器、视图、调用插件回调）。

总体而言，您可以自己跟踪所有内容，从`index.php`文件开始，然后到库，并尝试了解以什么顺序加载了哪些类。

# html - 如何在桌子上制作复杂的表格并避免嵌套 元素

> ID：11002355
> 
> 赞同：0
> 
> 时间：2012-06-12T18:11:54.853
> 
> 标签：html, forms, xhtml

我要问可能是你听过的最愚蠢的问题（我感到羞耻）。我想为表格写一个标记，看起来应该是这样的：

```
============================================================
| Layout  | Date edited | Actions | Is active | Is default |
============================================================
| lauout1 | 04.05.2012  |[Delete] |    [ ]    |     o      |
... 
```

第四列和第五列对应地包含复选框和单选按钮，第三列包含按钮。按钮提交应通过网站上的一页和带有单选框的复选框 - 由另一页进行。但是根据这个[问题](https://stackoverflow.com/questions/555928/is-it-valid-to-have-a-html-form-inside-another-html-form)，我不能将一个元素放在另一个元素中！我的意思是整个表周围一个全局，每个删除按钮周围一个。我想我会做一些非常糟糕的事情。什么是正确的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:31:52.993

您仍然可以使用一个包含整个表格的表单元素，并根据需要放置尽可能多的提交按钮。每个按钮的名称将与它的值一起发送到您的脚本。例如：

```
<form method="post">
    <!-- table ... -->
    <!-- first item ... -->
    <input type="submit" value="Delete" name="delete1" />

    <!-- second item ... -->
    <input type="submit" value="Delete" name="delete2" />

    <!-- ... -->
</form> 
```

单击不同的按钮将仅发布您按下的按钮，您可以解析 id 以查看您按下的按钮。

在下面的 php 脚本中，如果你按下我们之前看到的第一个删除按钮，你会得到类似的东西：

```
<?php
    isset($_POST["delete1"]); //true
    isset($_POST["delete2"]); //false
?> 
```

对于复选框和选项项目，使用输入数组：

```
<input type="checkbox" name="check[]" value="firstitemid" />
<input type="checkbox" name="check[]" value="seconditemid" /> 
```

在您的 php 代码中，您将在 $_POST['check'] 上收到一个数组

我想建议您还阅读有关[跨站点请求伪造的信息](http://en.wikipedia.org/wiki/Cross-site_request_forgery)

# .net - TabControl中的WPF MVVM Light主细节，使用消息传递所选项目

> ID：11002360
> 
> 赞同：0
> 
> 时间：2012-06-12T18:12:22.497
> 
> 标签：.net, wpf, mvvm, mvvm-light, message

我对 WPF MVVM (Light) 很陌生，我需要一些帮助。

我所拥有的是一个主细节场景，主视图中的 TabControl，第一个选项卡中的主视图（ProductsView）和以下选项卡中的多个不同的详细信息视图（例如 DetailsView）。

根据 ProductsView 中选择的项目（SelectedProduct），我想在 DetailsView 中获取项目，但不是立即获取 - 仅当用户单击包含此详细信息视图的 tabitem 时。

因此，从数据库中获取详细数据应该以某种方式推迟到用户单击适当的详细信息选项卡时（他可能根本不会单击它）。

这是我的xml：

```
<!-- Main View -->
<UserControl x:Class="MyApp.Views.MainView">
  <TabControl>
    <TabControl.Items>
      <TabItem>
        <views:ProductsView />
      </TabItem>
      <TabItem>
        <views:DetailsView />
      </TabItem>
      <!-- More TabItems with details views -->
    </TabControl.Items>
  </TabControl>
</UserControl>

<!-- Products View -->
<UserControl x:Class="MyApp.Views.ProductsView">
  <Grid DataContext="{Binding Source={StaticResource Locator}, Path=ProductsVM}">
    <DataGrid ItemsSource="{Binding Products}" SelectedItem="{Binding SelectedProduct}">
      <DataGridTextColumn Binding="{Binding Path=Model.ProductID}" Header="Product ID" />
    </DataGrid>
  </Grid>
</UserControl>

<!-- Details View -->
<UserControl x:Class="MyApp.Views.DetailsView">
  <Grid DataContext="{Binding Source={StaticResource Locator}, Path=DetailsVM.Details}">
    <StackPanel>
      <TextBox Text="{Binding Path=Model.Field1}" />
      <TextBox Text="{Binding Path=Model.Field2}" />
    </StackPanel>
  </Grid>
</UserControl> 
```

和代码：

```
public class ProductsViewModel : ViewModelBase
{
    private ObservableCollection<Product> products;
    public ObservableCollection<Product> Products
    {
        get
        {
            return products;
        }
        set
        {   // RaisePropertyChanged
            Set("Products", ref products, value);
        }
    }

    private Product selectedProduct;
    public Product SelectedProduct
    {
        get
        {
            return selectedProduct;
        }
        set
        {   // RaisePropertyChanged and broadcast message of type PropertyChangedMessage<Product>
            Set("SelectedProduct", ref selectedProduct, value, true);
        }
    }

    public ProductsViewModel(IDataService dataService)
    {
        this.dataService = dataService;
        Products = dataService.GetAllProducts();
    }
}

public class DetailsViewModel : ViewModelBase
{
    private Details details;
    public Details Details
    {
        get
        {
            return details;
        }
        set
        {   // RaisePropertyChanged
            Set("Details", ref details, value);
        }
    }

    public DetailsViewModel(IDataService dataService)
    {
        this.dataService = dataService;
        Messenger.Default.Register<PropertyChangedMessage<Product>>(this, m => Details = dataService.GetDetails(m.NewValue.Model.ProductID));
    }
} 
```

现在这可行，但在选择产品后，所有详细信息都会立即在所有详细信息选项卡中获取。我一直在想，也许当用户单击 MainView 中的选项卡时，MainViewModel 应该向 ProductviewModel 发送带有选项卡索引的消息，然后 ProductviewModel 应该根据选项卡索引向当前请求的 tabitem 的 DetailsViewModel 发送另一条消息，这将更新它的详细数据。

但是我如何根据标签索引仅向当前请求的 tabitem/DetailsView 发送消息，而不是全部发送消息？

而且这种往返听起来太复杂了。你能给我一些建议吗？或者这是完全错误的？也许还有另一种更简单、更优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:37:39.647

通常我也会有我的`ViewModel`跟踪`Tabs`和`SelectedTab`，并且会简单地加载`SelectedTab` `PropertyChanged`事件中的当前选项卡

像这样的东西：

```
// Not expanding these to full properties with property change 
// notifications for sake of simplicity here
ObservableCollection<ViewModelBase> Tabs;
ViewModelBase SelectedTab;

void MyViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    if (e.PropertyName == "SelectedTab")
    {
        if (SelectedTab is IDetailsTab)
            ((IDetailsTab)SelectedTab).LoadProduct(SelectedProduct);

            // Or depending on your structure:
            var productsTab = Tabs[0] as ProductsViewModel;
            ((IDetailsTab)SelectedTab).LoadProduct(productsTab.SelectedProduct);
    }
} 
```

你的 XAML 看起来像这样：

```
<TabControl ItemsSource="{Binding Tabs}" SelectedItem="{Binding SelectedTab}">
    <TabControl.Resources>
        <DataTemplate DataType="{x:Type local:ProductsViewModel}">
            <local:ProductsView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:DetailsViewModel}">
            <local:DetailsView />
        </DataTemplate>
    </TabControl.Resources>
</TabControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:44:06.977

我认为您正在寻找的是经典的 pub / sub 模型。当用户单击选项卡控件项时，将引发名为 RequestViewOfProductDetails 的事件。您将在主视图模型中设置发布，如下所示：

```
public MasterViewModel()
{
    Messenger.Default.Send<RequestViewOfProductDetails>(_selectedProduct); 
} 
```

然后，在您的详细信息视图模型中，您将设置视图模型以响应该事件：

```
Messenger.Default.Register<RequestViewOfProductDetails>(this, delegate(Product prod) 
{ 
  // fetch details
}); 
```

您将为每种详细信息类型设置一个消息，在每次选择选项卡项时发布该特定详细信息事件。乏味，我知道，但这将所有选项卡分开。现在如果是我，我会做一些不同的事情。我会在后台工作线程上执行请求，这样您就可以避免针对特定选项卡的这种头痛。选择产品后，只需调度 getter 以异步填充所有选项卡，事情就会透明地发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T13:32:58.740

当您选择详细选项卡时，通过此事件刷新选项卡上的数据。通过事件参数选择的产品。

# c# - 班级责任，我的“移动对象”班级是否真的关心它是否在移动？

> ID：11002365
> 
> 赞同：1
> 
> 时间：2012-06-12T18:13:00.397
> 
> 标签：c#, oop, scope, single-responsibility-principle

我想要一些关于哪个类应该保存某些信息的指导。如果我有一个在“空间对象”内四处移动的“移动对象”，移动对象是否真的关心它在空间对象中的位置、移动的速度以及向哪个方向移动？

将属性分配给“位置”的移动对象当然看起来很方便，但我认为它确实对此没有任何顾虑。所以我想出了：

```
class Mobile
    {        
        //some properties/fields/etc

        event EventHandler<MovementEventArgs> move;

        public void Move(Vector direction)
        {
            raiseMove(direction);
        }

        private raiseMove(Vector direction)
        {
            EventHandler<MovementEventArgs> handler = move;
            if (move != null)
                handler(this, New MovementEventArgs(direction));
        }
    }

class Space
    {
        Mobile someObject;
        Vector someObjectLocation;

        public Space()
        {
            someObject = new someObject();
            someObject.Move += HandleMobileMove;
        }

        public void MoveSomeObject(Vector direction)
        {
            someObject.Move(new Vector(1,0));
        }

        private void HandleMobileMove(object sender, MovementEventArgs e)
        {
            someObjectLocation += e.Direction;
        }
    } 
```

写的有点仓促……但我希望它能传达我的意思。总而言之：手机应该拥有一个位置，还是空间？谁应该控制运动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:19:36.320

在 WPF 中，Canvas 对象负责了解其子对象的位置。这将为您的方法提供可信度（它使用与附加属性类似的结构）。

如果您对存储在 Space 对象中的位置感到不舒服，您还可以使用[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)模式将附加信息附加到 Mobile 对象。这将使您可以选择是否定位对象，而无需关注对象本身。

在获取孩子的集合时，您可以只过滤掉那些使用您的位置装饰器的对象（可能使用 OfType 扩展方法）并使用它们做您需要的事情。您必须转换为使用接口而不是硬类引用。不过，这可能是件好事。

但最终，这取决于您的 Space 和 Mobile 对象在做什么。如果 Space 对象正在显示 Mobile 对象（如 Canvas），那么它需要知道位置信息，但 Mobile 不需要。另一方面，如果移动设备本身使用它们的位置信息来跟踪某事或执行某项任务（而 Space 对象并不关心，可能只提供边界等），那么最好将该信息存储在他们。

为了进一步说明这一点，请问自己这个问题：如果我改变位置，谁在乎？控件是 WPF 通常不受其 Top 和 Left 坐标的影响，但其容器控件受此影响，因此将这些信息存储在容器中是有意义的。如果您更改移动设备的位置，这会对移动设备或其工作方式产生任何影响吗？如果 Mobile X 从 Y 移动到 Z，Space 的行为是否会有所不同？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:27:23.337

以纯粹的 OOP 术语思考，我认为这些当然应该是移动对象的属性，就像我的位置和速度是我在空间中移动时的属性一样。如果您的空间对象需要访问这些属性以进行边界检查，它可以从移动实例上的公共 get 方法中检索它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T23:40:40.660

你的论点是合乎逻辑的，但想想`someObject.Move += HandleMobileMove;`你的实现（`someObjectLocation +=`）的浪费：本质上你是在浪费`this`指针。你`Mobile`当然和它有 1:1 的关系，`Location`我希望一个`Space`类与它有 1:M 的关系`Mobile`（除非你在空间中只有 1 个对象）。在您的设计中，这需要您`Space`维护 to 的关联`Mobile`，`Location`这很麻烦，特别是因为替代方案只是简单地制作`Location`您的`Mobile`.

# mysql - MySql JOIN 表作为内容？

> ID：11002368
> 
> 赞同：1
> 
> 时间：2012-06-12T18:13:03.937
> 
> 标签：mysql

我有一张联系方式表（姓名、省份等），我有一张单字答案表，它们具有相同的用户 ID。我想将一个单词的答案加入到联系方式中，这样我就得到了。

```
first name, last name, province, email, list of one word answers separated by a , or another character 
```

我知道我需要进行子选择，但是如何获取所有值并用字符分隔它们，然后将其作为主选择中的内容返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:19:06.480

您可以在[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)的帮助下完成：

```
SELECT name, province, 
(SELECT GROUP_CONCAT(word) FROM answers a WHERE a.user_id = c.user_id) AS words 
FROM contacts c 
```

# mysql - 休眠选择日期范围内的 n 个点

> ID：11002376
> 
> 赞同：0
> 
> 时间：2012-06-12T18:13:51.557
> 
> 标签：mysql, nhibernate

所以这是我的情况：我有两个包含统计信息的表，一个用于统计定义的表，一个用于统计事件的表。统计事件表中的每一行都有一个时间戳、一个值和一个对其应用的统计定义的引用，每个统计定义都有一个统计条目的集合。（即一对多）

我的应用程序允许用户选择统计定义和日期范围，并为所选定义绘制统计事件表中的条目。但是，用户可以选择较大的日期范围，这可能会导致返回的事件数量超出所需。

我想返回在用户选择的时间范围内均匀分布的数据子集（n 个点）。我当前的（天真的）实现如下：

```
var totalEntries = session.QueryOver<StatEvent>()
                          .Where(x => x.Date > start_date && x.Date < end_date && StatDef.Id == defn.Id)
                          .List()
int modFactor = (int) Math.Ceiling((double)totalEntries.Count/30);
var temp = totalEntries.Where((x, i) => i%modFactor == 0);
return temp.OrderBy(x => x.Date).ToList(); 
```

所以我从数据库中检索与日期范围和统计定义匹配的所有记录，然后选择 30 个条目。

这种方法的问题是：

1）从数据库中获取所有条目，然后丢弃我不想要的条目是低效的。

2）如果数据是聚集的（即某个时间附近有很多记录，而另一个时间附近没有很多记录），则选择将被加权到数据最多的地方。这不一定是坏事，但我希望我的图表更漂亮，并且数据点分布均匀。

那么，有没有人知道以更有效的方式实现相同结果的聪明方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:32:18.940

我建议在一组间隔内聚合值，其中间隔的大小计算为所选日期范围的 1/30。您聚合的方式将取决于统计数据，但一个简单的实现可能只是将它们相加或平均它们或获得最大值。

# java - 查询java中变量的范围

> ID：11002382
> 
> 赞同：0
> 
> 时间：2012-06-12T18:14:12.970
> 
> 标签：java

```
public class Knowing {

    static final long tooth = 343L;

    static long doIT(long tooth) {
        System.out.print(++tooth + " ");
        return ++tooth;
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        System.out.print(tooth + " ");
        final long tooth = 340L;

        new Knowing().doIT(tooth);
        System.out.println(tooth);
    }
} 
```

好的，这是我的问题：

*   如果我们声明了一个全局变量`static final long tooth = 343L;`我们如何在主方法中声明另一个变量`final long tooth = 340L;`我只想知道为什么允许这样做，因为我运行了它并且没有错误？

*   而且不应该通过使用*className.variableName*而不是通过创建新的*instance.variable*名称来访问全局静态变量tooth，为什么只允许一个警告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T18:19:22.153

> 我们如何才能在 main 方法中声明 final long 牙 = 340L; 中的另一个变量；

因为语言规范说你可以。从[JLS 的第 6.4.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4.1)，关于*阴影*：

> 一个名为 n 的局部变量或异常参数的声明 d 在 d 的范围内隐藏，(a) 任何其他名为 n 的字段的声明在 d 出现点的范围内，以及 (b) 任何其他名为 n 的变量在 d 出现的点的范围内，但未在声明 d 的最内层类中声明。

你应该*这样做*吗？很少。另一方面，我也很少看到它是一个问题。

对于你的第二个问题：

> 而且不应该通过使用className.variableName而不是通过创建新的instance.variable名称来访问全局静态变量tooth，为什么只允许一个警告？

这是Java，IMO中的设计缺陷。甚至警告也不是语言规范的一部分。您应该*始终*避免这样做，因为它会使代码做一些看起来不像正在做的事情。我通常举的例子是：

```
Thread backgroundThread = new Thread(someRunnable);
backgroundThread.start();
backgroundThread.sleep(1000); 
```

这使得*执行*线程休眠，而不是新线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:17:59.250

局部变量使全局黯然失色。但是您仍然可以通过使用 classname.variable 来访问全局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:18:53.670

`tooth`in 变量是局部变量，`main`优先于全局变量。如果你想访问全局的，你应该如下引用它`this.tooth`。

如果您想了解更多关于变量和范围的信息，我建议您阅读[Oracle 文档。](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T18:21:03.263

参数/变量隐藏是语言设计中的常见特征。例如，第三方库中的方法的客户端无法控制该库用于形式参数的名称。语言设计的另一个常见做法是一致性。这意味着在任何可以声明变量的地方，都可以在外部范围内隐藏同名变量。请注意，如果您尝试声明与*同一*范围内的变量同名的局部变量，您将收到编译器错误。

使用 Builder 模式时，静态变量的非静态访问是一个方便的特性。但是，它具有欺骗性（正如另一个答案以图形方式展示的那样），因此编译器将其标记为警告。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T18:25:42.683

首先`className.variableName is a legal way of accessing a static member, but its possible to create an instance of the class which has the static member`，访问那个静态成员。将此视为错误或缺陷，在诸如 Math 之类的类中变得不可能，其中构造函数是私有的，而且该类中没有实例变量，因此创建对象毫无用处。对于范围的事情，请查看此链接 [http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4.1)

# android - Ant 编译错误 - 用于 Android 的 Tesseract

> ID：11002383
> 
> 赞同：0
> 
> 时间：2012-06-12T18:14:14.000
> 
> 标签：android, ubuntu, ant, tesseract

我正在按照指南让 Tesseract for android 工作。最后一条指令是运行 ant-compile。如果我运行此命令，我会收到一条错误消息；

```
BUILD FAILED Target "compile" does not exist in the project "tesseract-android-tools". 
```

我不确定这实际上意味着什么，因此我无法真正猜测如何解决它。请问我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:44:18.360

您可能想尝试一下`ant release`。

# javascript - jqueryui datepicker 未显示范围内的所有年份

> ID：11002384
> 
> 赞同：5
> 
> 时间：2012-06-12T18:14:15.513
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

. 你好，

我正在使用 jqueryui 的 datepicker，它工作得很好，但是有一个问题。年份列表不完整，例如仅显示 10 年。如果我想回到 10 年前，我必须单击第一年，然后再次单击以选择一年

这是我的设置：

```
 $.datepicker.setDefaults( $.datepicker.regional["es"] );
    $("#birth_date").datepicker(
    {
        shortYearCutoff: 1,
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd-mm-yy',
        minDate: "-70Y", 
        maxDate: "-15Y" 
    }); 
```

第一次显示这个范围是 1997 到 1987，如果我想设置 1960，那么我必须点击 2 次，有时会很麻烦。

我想知道是否有办法显示从 1942 年到 1997 年的整个年份列表

提前致谢

哈维尔

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T18:20:03.247

您还需要使用[yearRange](http://jqueryui.com/demos/datepicker/#option-yearRange)选项。MaxDate 和 MinDate 仅验证所选日期。年份范围修改可见年份。

```
$.datepicker.setDefaults( $.datepicker.regional["es"] );
    $("#birth_date").datepicker(
    {
        shortYearCutoff: 1,
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd-mm-yy',
        minDate: "-70Y", 
        maxDate: "-15Y",
        yearRange: "1942:1997"
    }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T18:20:04.303

您要添加年份范围选项：

演示：http: [//jsfiddle.net/lucuma/NAuEx/2/](http://jsfiddle.net/lucuma/NAuEx/2/)

```
$(document).ready(function() {
    $.datepicker.setDefaults( $.datepicker.regional["es"] );
    $("#birth_date").datepicker(
    {
        shortYearCutoff: 1,
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd-mm-yy',
        minDate: "-70Y", 
        maxDate: "-15Y",
         yearRange: "1900:2010" 
    });

});
​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T09:42:29.317

在您的情况下，设置更动态的范围将如下所示

```
yearRange: "-70Y:-15Y" 
```

# c# - 在 C# 中异步加载图像

> ID：11002385
> 
> 赞同：4
> 
> 时间：2012-06-12T18:14:16.913
> 
> 标签：c#, wpf, multithreading, image, asynchronous

我正在开发一个 C# WPF 应用程序，它加载大量图像并将其显示为缩略图。我想以多线程的方式来做。因此我尝试实现一个BackgroundWorker。

BackgroundWorker 的 DoWork() 的代码：

```
string[] files = e.Argument as string[];
foreach (string file in files)
{
    ImageModel image = new ImageModel();
    image.FilePath = file;
    _importWorker.ReportProgress(1, image);
    _imageCollectionVM.Images.Add(image); // also tried this one in ReportProgress()
} 
```

在我的 XAML 代码中，我绑定到 ImageModel 的 BitmapImage 属性。（AsyncState=True 没有帮助。）在这里我得到这个错误：“DependencySource”和“DependencyObject”必须在同一个线程中。

```
<Image Source="{Binding BitmapImage}" /> 
```

如果我将此注释掉，则图像似乎已导入但我无法访问它，例如通过在 ListView 中选择它。在其 SelectionChanged 中，它说该对象由另一个线程拥有。

我该如何解决这些问题？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:17:42.853

您必须将 GUI 的更新编组到主线程。基本上你只能多线程从磁盘加载图像，但 GUI 的实际更新必须单线程完成。

有很多方法可以做到这一点，stackoverflow 上的许多问题都解决了这个问题。这里有一些可以帮助您入门

[从后台线程更新 UI](https://stackoverflow.com/questions/7959005/update-ui-from-background-thread)

[从后台线程更新 BindingList<>？](https://stackoverflow.com/questions/3587032/update-bindinglist-from-a-background-thread)

[从后台 C# 线程更新图片框是邪恶的吗？](https://stackoverflow.com/questions/6527825/is-it-evil-to-update-a-picturebox-from-a-background-c-sharp-thread)

如何为此使用 BindingList

[如何从后台线程正确更新数据绑定 datagridview](https://stackoverflow.com/questions/455766/how-do-you-correctly-update-a-databound-datagridview-from-a-background-thread)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:22:15.053

BackGround Worker 对于大型任务来说是很好的 imo，但如果它像你正在做的那样简单，我更愿意这样做

从图像列表开始

```
List<Image> Images =new List<Image>(); 
```

然后运行这个

```
Task.Factory.StartNew( () =>
{
    string[] files = e.Argument as string[];
    foreach (string file in files)
    {
        ImageModel image = new ImageModel();
        image.FilePath = file;
       // _importWorker.ReportProgress(1, image);

      this.BeginInvoke( new Action(() =>
         {
            Images.Add(image);
         }));
     }
 }); 
```

不能保证我在该代码中有正确数量的括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:22:20.340

在类似的情况下，我做了以下事情：

*   创建一个实际执行图像加载工作的 ImageProvider 类
*   让图像的视图模型绑定到我的 ItemViewModel 中的 ImageSource
*   让这个 ImageSource 变得懒惰

    // // 这里的伪代码

    懒惰 = new Lazy(imageProvider.LoadImage(this.imagePath))

    // 在 ImageViewModel ...

    imageSource { 获取 { 返回lazy.Value; } }

# javascript - Jquery 类/对象创建和一个小问题。好奇为什么“新”不起作用

> ID：11002389
> 
> 赞同：1
> 
> 时间：2012-06-12T18:14:49.273
> 
> 标签：javascript, jquery

如果可以的话，我有两个要求。

1.  最不重要，但会喜欢你对我下面的代码的意见。任何改善它的方法。让它更便携/更健壮等？

2.  似乎在创建“新”时代码无法完全正常工作。我的猜测是我并没有真正创建一个有效的对象。我究竟做错了什么。

这在尝试创建新对象时不起作用。

```
var ll_port2 = New ll_port;
    ll_port2.init({'aa':'#_div1','bb':'#_div2','cc':'1000'}); <-- no work 
```

如果我从不制作新商品，它会起作用，阿拉：

```
ll_port.init({'aa':'#_div1','bb':'#_div2','cc':'1000'});  <-- works 
```

下面的代码：

```
 var ll_port = {
                   items:{
                       outside: /billabong|newage/,
                    },
                   assign: function(){
                       ccont = this.items.aa;
                       if (typeof $(ccont) === 'object' && $(ccont).css('z-index') && $(ccont).css('z-index') != this.items.cc) {
                              $(ccont).css('zIndex','').css('zIndex', this.items.zi);
                       }
                   },
                   closeit:function(){
                       if($(this.items.bb).length && $(this.items.bb).is(':visible')){
                           $(this.items.bb).hide();
                       }
                   },
                   strL: function(){
                       var _self = this;
                         $("body :not(" + _self.items.aa + ")")
                             .mousedown(function(event){
                                  event.stopPropagation();
                                  _self.closeit();
                                  _self.assign();
                              });
                        $('iframe').live('mouseover', 
                            function () {
                                if(_self.items.outside.test($(this).attr('src'))){
                                  _self.closeit();
                                }
                            });​
                  },
                  init: function(data){
                      $.extend(this.items, data);
                      this.strL();
                      var _self = this;
                      setTimeout(function(){
                          _self.assign();
                      }, 1500);
                  }
           }; 
            ll_port.init({'aa':'#_div1','bb':'#_div2','cc':'1000'}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:17:18.803

`New`（除了错字，应该是`new`）应该只用在`function`s 而不是对象上。

这些函数*应该*是构造函数。

> new 运算符创建用户定义对象类型或具有构造函数的内置对象类型之一的实例。

[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:20:32.890

你需要创建`ll_port`一个函数，而不是一个对象。

```
var ll_port = function(){
    //... all your stuff
    this.items = {outside: /billabong|newage/};
} 
```

然后你可以使用`var ll_port2 = new ll_port()`

[有关使用 JS 进行面向对象编程](https://developer.mozilla.org/en/Introduction_to_Object-Oriented_JavaScript)的更多信息，请参见此处

# access-violation - 32 位 windows 代码中推送指令的假访问异常

> ID：11002390
> 
> 赞同：1
> 
> 时间：2012-06-12T18:14:56.950
> 
> 标签：access-violation

我有一个复杂的 32 位多线程程序在 64 位 Windows Server 2008 R2 Enterprise SP1 系统上运行。

在 MSVC 调试器下运行时，我有时会在 winsock 代码中的一条指令上报告访问冲突而停止，该指令没有明显的原因导致异常。一个典型的例子：

调试器报告了 82 个线程。当访问冲突触发程序中断时选择的那个显示这个......

寄存器：

```
 EAX = 0DBC9918 EBX = 54007022
 ECX = 00374248 EDX = 00000000
 ESI = 00000000 EDI = 00370924
 EIP = 745616B4 ESP = 0DBC98C8
 EBP = 0DBC9934 EFL = 00010246 
```

拆卸：

```
745616B4 68 27 2F 58 74       push        74582F27h
745616B9 64 FF 35 00 00 00 00 push        dword ptr fs:[0]
745616C0 8B 44 24 10          mov         eax,dword ptr [esp+10h]
745616C4 89 6C 24 10          mov         dword ptr [esp+10h],ebp 
```

内存（地址 esp-4）

```
0DBC98C4  00370844  745636C2  74563808  0000003C  
0DBC98D4  75B83D70  00000002  00000001  00000000 
```

堆栈边界数据来自几个推送和一个调用，似乎工作得很好：

```
745636B6 6A 3C                push        3Ch
745636B8 68 08 38 56 74       push        74563808h
745636BD E8 F2 DF FF FF       call        745616B4
745636C2 ... 
```

考虑到它的地址和之前的成功推送，推送似乎不应该遇到保护页面异常。从调用堆栈信息来看，其他线程似乎不太可能导致异常。我不知道是否有一些我忽略的机制可能会在该指令上产生访问冲突，或者调试器是否误导了我。任何你能散发出来的光都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T14:55:00.580

那肯定是[DEP](https://stackoverflow.com/questions/1209052/iis-how-to-disable-data-execution-prevention-in-windows-server-2008)（数据执行预防）。只是有完全相同的问题，类似的代码；在这些东西上花了几个小时；一直忘记 UAC 和 DEP 是两个不同的东西。

# r - 在列表中获取匹配索引的快速方法

> ID：11002391
> 
> 赞同：15
> 
> 时间：2012-06-12T18:15:00.223
> 
> 标签：r, list, optimization, indexing, vectorization

给定一个`a`包含长度不等的向量的列表和一个`b`包含来自向量中的一些元素的向量`a`，我想获得一个长度相等的向量，以包含与 in中的元素匹配`b`的索引（我知道这是一个不好的解释）...`a``b`

以下代码完成了这项工作：

```
a <- list(1:3, 4:5, 6:9)
b <- c(2, 3, 5, 8)

sapply(b, function(x, list) which(unlist(lapply(list, function(y, z) z %in% y, z=x))), list=a)
[1] 1 1 2 3 
```

用 for 循环替换`sapply`当然可以达到同样的效果

问题是这段代码将与长度超过 1000 的列表和向量一起使用。在现实生活中，该函数大约需要 15 秒（for 循环和`sapply`）。

有谁知道如何加快速度，对并行方法安全吗？我没有看到矢量化方法（我不能用 C 编程，尽管这可能是最快的）。

**编辑：**

将只强调 Aaron 使用 match() 的优雅解决方案，它使速度提高了 1667 倍（从 15 到 0.009）

我对其进行了扩展以允许多个匹配项（然后返回一个列表）

```
a <- list(1:3, 3:5, 3:7)
b <- c(3, 5)
g <- rep(seq_along(a), sapply(a, length))
sapply(b, function(x) g[which(unlist(a) %in% x)])
[[1]]
[1] 1 2 3

[[2]]
[1] 2 3 
```

运行时间为 0.169，可以说是相当慢，但另一方面更灵活

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T18:18:42.110

这是使用的一种可能性`match`：

```
> a <- list(1:3, 4:5, 6:9)
> b <- c(2, 3, 5, 8)
> g <- rep(seq_along(a), sapply(a, length))
> g[match(b, unlist(a))]
[1] 1 1 2 3 
```

`findInterval`是另一种选择：

```
> findInterval(match(b, unlist(a)), cumsum(c(0,sapply(a, length)))+1)
[1] 1 1 2 3 
```

要返回列表，请尝试以下操作：

```
a <- list(1:3, 4:5, 5:9)
b <- c(2,3,5,8,5)
g <- rep(seq_along(a), sapply(a, length))
aa <- unlist(a)
au <- unique(aa)
af <- factor(aa, levels=au)
gg <- split(g, af)
gg[match(b, au)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:36:32.607

正如对您的帖子的评论所暗示的那样，这取决于如果/当相同元素出现在`a`. 假设你想要你可以做的最低索引：

```
apply(sapply(a, function(vec) {b %in% vec}), 1, which.max) 
```

# queue - 允许查询消息列表的队列服务

> ID：11002392
> 
> 赞同：0
> 
> 时间：2012-06-12T18:15:02.100
> 
> 标签：queue, message-queue

正在寻找一个消息队列软件，它允许对队列消息列表进行简单的查询。例如，用 userid 标记消息，并在以后接收与特定用户相关的队列中的所有消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:32:50.917

虽然我个人从未使用过它，但似乎 SQL Server 的[服务代理](http://blog.sqlauthority.com/2009/09/21/sql-server-intorduction-to-service-broker-and-sample-script/)（于 2005 年推出）可以完成这项工作。
您可以像任何其他表一样[查询](http://msdn.microsoft.com/en-us/library/ms166127%28v=sql.90%29.aspx)队列，并收集您需要的有关消息的信息
PS oracle 在他们的数据库中也有一个排队基础设施，如果您更喜欢它而不是 mssql

# c - 完整路径包含与搜索路径包含的 GCC 奇怪行为

> ID：11002397
> 
> 赞同：1
> 
> 时间：2012-06-12T18:15:33.077
> 
> 标签：c, gcc, include

我遇到了我试图理解的 GCC 包含行为。我提供的示例是最简单的测试代码，实际代码（以及此行为）是我用来检测代码的工具的结果。我**必须**使用这个工具。我只是想了解出现错误的原因。有趣的是，g++ 工作正常。这是示例：

如果我包含`<sys/types.h>`所有编译都很好，但如果我包含`"/usr/include/sys/types.h"`然后我得到一个错误。

这是我运行`gcc`下面包含完整路径的第一个命令时出现的错误：

```
In file included from hello.c:7:
/usr/include/sys/types.h:195: error: redefinition of typedef ‘int8_t’
hello.c:5: error: previous declaration of ‘int8_t’ was here 
```

编译器命令，使用 GCC 4.1.2 (CentOS 5) 导致错误：

`gcc -g -I. --verbose -c -o hello.o -DLONG_INCLUDE hello.c`

或者这个不会导致错误的

`gcc -g -I. --verbose -c -o hello.o hello.c`

代码：

```
/* hello2.h */

#ifdef _cplusplus
extern "C" {
#endif

int myFunc(int *a);

#ifdef _cplusplus
}
#endif

/* hello.c */
#include <stdio.h>
#include <string.h>
typedef signed char int8_t;
#ifdef LONG_INCLUDE
#include "/usr/include/sys/types.h"
#else
#include <sys/types.h>
#endif
#include "hello.h"

int myFunc(int *a)
{

  if (a == NULL)
    return -1;

  int b = *a;

  b += 20;

  if (b > 80)
    b = 80;

  return b;
} 
```

谢谢

**更新：**

在通过`gcc -E`它看起来指定完整路径时查看预处理器输出后，gcc 不会将其视为系统包含路径，并且不知何故，正在促成（导致？）错误。尝试使用该`-isystem`选项`/usr/include`但`/usr/include/sys`无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:08:58.830

在 Glibc 中`<sys/types.h>`，`int8_t`等的类型定义由

```
#if !__GNUC_PREREQ (2, 7)

/* These types are defined by the ISO C99 header <inttypes.h>. */
# ifndef __int8_t_defined
#  define __int8_t_defined
typedef char int8_t;
typedef short int int16_t;
typedef int int32_t;
#  if __WORDSIZE == 64
typedef long int int64_t;
#  elif __GLIBC_HAVE_LONG_LONG
__extension__ typedef long long int int64_t;
#  endif
# endif 
```

所以解决这个问题的方法是在命令行上定义保护宏，`-D__int8_t_defined`除了`-DLONG_INCLUDE`.

# html - 大！重要；烦恼

> ID：11002402
> 
> 赞同：0
> 
> 时间：2012-06-12T18:15:51.440
> 
> 标签：html, css

我还是不明白，“test1”段落将是哪种颜色，为什么？

```
<style>
  p {
    color: red; 
    font-style: italic;
  }
</style>

<div style="color: green;!important">
  <p style="color: blue;">test1</p>
  <p>test2</p>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:18:36.573

> 哪种颜色将是段落“test1”，为什么？

**蓝色**。即使你的错字，它仍然是蓝色的。该`color: green !important`样式仅适用于`div`. 因此*内联*样式`color: blue;`是最*具体*的。

[请参阅此小提琴](http://jsfiddle.net/8PyNW/)中的差异。

我鼓励您了解[CSS 特殊性是如何工作](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T18:19:33.597

重要性不会级联。

即使父元素 ( `<div>`) 具有`!important`属性（请注意，由于语法错误，它实际上没有），它仍将被应用于子元素的任何属性覆盖。

`!important`只能覆盖应用于*同一*元素的其他规则。

因此，第一个`<p>`将是蓝色的，因为没有什么可以覆盖它的内联样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:18:34.387

它将是蓝色的，因为它有一个样式属性使它变成蓝色。div 表示绿色，但`!important`分号后有标志。但即使你有一个空格而不是分号，样式属性也会覆盖它。它将是蓝色的。

# drupal-7 - Drupal 7.14，我想在查看特定页面时发送电子邮件

> ID：11002403
> 
> 赞同：2
> 
> 时间：2012-06-12T18:15:54.523
> 
> 标签：drupal-7

使用 Drupal 7.14，我想在每次查看特定页面时收到一封电子邮件。

我已经尝试使用规则进行此操作。它确实会发送电子邮件，但会针对我设置的所有规则向我发送一封电子邮件。例如：我设置了 3 条规则向我发送一封电子邮件，给定的内容在 3 个单独的 URL 上查看，但每次查看任何一个页面时，都会触发所有 3 条规则，我收到 3 封电子邮件。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:45:26.063

以下规则应该有效

1.  事件应设置为“内容已查看”
2.  在“条件”下添加以下内容：

    **数据比较**--> 数据选择器应该是 ' **node:nid** ' （或者你可以使用节点 url 或类似的东西作为你感兴趣的节点）--> 继续 --> 为操作符选择 ' **equals** '以及实际的 nid 或 URl 或您选择的任何内容，以区分 Data 值的单独节点

3.  保留您的电子邮件操作，因为这已经有效...

这能解决问题吗？添加一个条件来区分您的节点？

# linux - 无法让 php mail() 在 linux ubuntu 上工作

> ID：11002412
> 
> 赞同：-2
> 
> 时间：2012-06-12T18:16:29.817
> 
> 标签：linux, amazon-web-services, postfix-mta, php

我已按照[此页面](http://sourcelibrary.org/2011/08/29/how-to-set-up-the-php-mail-function-on-a-ubuntu-linux-lamp-server/)上的说明在 AWS linux ubuntu 上进行设置`mail()`，但邮件功能不起作用。我知道我已经正确编写了发送邮件脚本，那么我还需要其他什么东西才能让它工作吗？是否有特殊的网络邮件软件或我需要的东西？

**编辑：**

`display_errors`开启。PHP代码如下。显示成功消息，但从未收到电子邮件。

```
$to = "myemail@gmail.com";
$subject = "Hi!";
$body = "Hi,\n\nHow are you?";

if (mail($to, $subject, $body))
{
    echo("Message successfully sent!");
} 
else
{
    echo("Message delivery failed...");
} 
```

**编辑2：**

我尝试将其发送到由 godaddy 和 gmail 帐户托管的电子邮件。两者都在错误日志中返回了相同的响应。

**错误日志：**

> “8C029：主机 smtp.secureserver.net[ ***...*** ]拒绝与我交谈***：*** **-****-* *。***.*** . ***.*** 554 由于发送 MTA 的声誉不佳，您对该邮件系统的访问已被拒绝。如果您认为此失败是错误的，请通过其他方式联系预期的收件人。”*

 *没关系，Gmail 15 分钟后收到了邮件。我猜这两个错误都与 Godaddy 托管的电子邮件有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:19:11.943

> 没关系，Gmail 15 分钟后收到了邮件。我猜这两个错误都与 Godaddy 托管的电子邮件有关。

该错误确实不是源自您的`mail()`代码或服务器设置——您的 MTA 接收来自`mail`命令的消息并尝试传递该消息。

该错误源自 GoDaddy 的接收邮件服务器（您的 postfix 试图将邮件传递到的服务器）。或沿途的 SMTP 中继服务器之一。

不过，拒绝并不意外：您声明您的服务器正在 AWS 中运行。不幸的是，您不是唯一来自 AWS 实例的邮件。许多臭名昭著的垃圾邮件发送者比您早，破坏了 AWS 的 IP 地址作为值得信赖的邮件来源的可信度。这就是为什么许多 ISP 会阻止来自 AWS 的传入邮件（这就是 554 错误：中继访问被拒绝）。

使您的问题恶化：如果您继续使用这种方法，AWS 将自动阻止来自您的实例的所有外发邮件，以试图解决垃圾邮件问题。但是，在手动验证您的意图后，他们应该恢复您的邮寄权限。

Your best option on AWS to reliably send email would probably be using their own [SES service](http://aws.amazon.com/ses/), which should probably get you past most [RBL](http://en.wikipedia.org/wiki/DNSBL#Terminology) checks in MTA's. But SES does cost money..*

# linux - lighttpd 条件重写

> ID：11002419
> 
> 赞同：0
> 
> 时间：2012-06-12T18:16:57.757
> 
> 标签：linux, rewrite, lighttpd

最初我想在我的 url (lighttpd) 中添加尾随 /

这可能与

```
 url.redirect = ( "^(.*[^/])$" => "$1/" ) 
```

现在我需要排除一些扩展名，如 .txt、png 等。我想为除这些扩展名之外的所有内容添加斜杠，我似乎无法正常工作。

在 apache 中我可以使用条件重写，你将如何在 lighttpd 中做到这一点。

任何方向将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:15:06.057

只是为了使它在一起，这将起作用（经过测试）

```
 $HTTP["url"] !~ "^(.*)(\..{3}|/)$" {
          url.redirect = (

           "^(.*[^/])$" => "$1/"
          )
        } 
```

@david这将创建永无止境的循环.....

```
 "^(.*)\.(png|txt)$" => "$1.$2",
    "^(.*[^/])$" => "$1/" 
```

这将创造永恒的循环

@Matthew 这不会很有效，因为您将所有内容都推送到 %1

```
$HTTP["url"] !~ "^(.*)(\..{3}|/)$" {
  url.redirect = (
    ".*" => "%1/" 
  )
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:36:13.260

您可以有多个重定向规则：

```
url.redirect = (
    "^(.*)\.(png|txt)$" => "$1.$2",
    "^(.*[^/])$" => "$1/"
) 
```

在这种情况下，它将与文字匹配所有内容`.png`or `.txt`，然后尝试您的原始规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:11:48.870

```
$HTTP["url"] !~ "^(.*)(\..{3}|/)$" {
  url.redirect = (
    ".*" => "%1/" 
  )
} 
```

# javascript - 选择下拉菜单时触发的 JQuery 事件——但值未更改

> ID：11002421
> 
> 赞同：10
> 
> 时间：2012-06-12T18:17:00.603
> 
> 标签：javascript, jquery

我有一个下拉菜单，如果有人单击它，我想将一个 JQuery 事件连接到该事件，然后选择已选择的相同选项。

我已经使用“更改”事件运行了所有内容，但在某些情况下，用户单击下拉菜单并重新选择相同的选项是有效的。如果发生这种情况，我需要触发我的事件处理程序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T18:31:32.043

试试下面的东西，

使用`.click`

```
$(function () {
    var cc = 0;
    $('select').click(function () {        
        cc++;
        if (cc == 2) {
            $(this).change();
            cc = 0;
        }         
    }).change (function () {
        $('#result').append('Changed triggered ');
        cc = -1;
    });     
}); 
```

**演示：http:** [//jsfiddle.net/skram/NAHXP/2/](http://jsfiddle.net/skram/NAHXP/2/)

或使用`.focus`和`.blur`

```
$(function () {
    var ddVal = '';
    $('select').focus(function () {
        ddVal = $(this).val();
    }).blur(function () {
        if (ddVal == $(this).val()) {
            $(this).change();
        }
    }).change (function () {
        $('#result').append('Changed triggered ');
    });       
}); 
```

**演示：http:** [//jsfiddle.net/skram/NAHXP/](http://jsfiddle.net/skram/NAHXP/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T18:22:55.743

使用焦点和模糊事件...

```
var selectValue;
$('select').focus(function(){
   selectValue = $(this).val();
}).blur(function(){
  if (selectValue == $(this).val()) {
     //nothing change event
  }
}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T21:02:30.847

这是点击解决方案

```
var oldValue = null;
$('select').click(function(){
  s = $(this);
  val = s.val();
  if (oldValue == null) {
      oldValue = val;
  } else {
      oldValue == s.val() ? alert('nothing changed') : alert('new value');
      $(document).unbind('click.valueCheck');
      oldValue = null;      
  }
}) 
```

[演示](http://jsfiddle.net/acrashik/wLWMc/)

这是扩展文档单击的更高级解决方案

[演示2](http://jsfiddle.net/acrashik/wLWMc/1/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-07T13:48:24.837

其他答案似乎没有提供既能处理所有边缘情况（例如单击下拉列表外部然后再次单击它）和/或避免触发双重事件的解决方案。

第一个技巧是从下拉集中的那一刻起存储值。默认的 change() 事件用于`changewithRepeats`在下拉列表值发生更改时触发该方法，就像往常一样。

否则，第二次单击聚焦元素将调用 blur()，`changewithRepeats`当且仅当下拉值保持与最初相同时，才会强制散焦并触发。

无法打开下拉菜单并取消它，这是故意的。任何散焦都会调用该方法。所有键盘交互也有效（*但选择相同值时对 blur() 的调用对于使用屏幕阅读器的用户来说会有点烦人*）。

下面的焦点状态是 0 = 未聚焦，1 = 获得焦点时，2 = 有焦点。

```
$(function () {
  var lastFocusValue = '';
  var focusState = 0;

  var changeWithRepeats = function (newestValue) {
    // Your change action here
  };

  $('select').click (function () {
    if (focusState == 1) { focusState = 2; return; }
    else if (focusState == 2) $(this).blur();
  }).focus(function (e) {
    focusState = 1;
    lastFocusValue = $(this).val();
  }).blur(function () {
    focusState = 0;
    if ($(this).val() == lastFocusValue) {
      // Same value kept in dropdown
      changeWithRepeats($(this).val());
    }
  }).change (function () {
    changeWithRepeats($(this).val());
  });
}); 
```

小提琴有更多的调试输出：[https ://jsfiddle.net/dsschneidermann/tb5csdhp/15/](https://jsfiddle.net/dsschneidermann/tb5csdhp/15/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T18:29:08.987

使用添加类来解决这个问题

```
 $("#test").change(function(event){
 if($(this).find('option:selected').hasClass('actived'))
   alert('already selected');//write you code here
 else
   $(this).find('option:selected').addClass('actived');

}); 
```

并参考此链接[http://jsfiddle.net/muthukumar0705/nARVu/1/](http://jsfiddle.net/muthukumar0705/nARVu/1/)

# sql - Rails ActiveRecord 中的 LEFT JOIN 无条件

> ID：11002424
> 
> 赞同：1
> 
> 时间：2012-06-12T18:17:26.993
> 
> 标签：sql, ruby-on-rails, activerecord

我有以下型号

```
class Product < ActiveRecord::Base
end

class Supplier < ActiveRecord::Base
end

class ProductSupplierInfo < ActiveRecord::Base
  has_many :product_supplier_info_packings, :inverse_of => :product_supplier_info
  belongs_to :supplier
end

class ProductSupplierInfoPacking < ActiveRecord::Base
  belongs_to :product_supplier_info, :inverse_of => :product_supplier_info_packings
end 
```

我正在执行以下查询：

```
rows = Product.includes(:product_supplier_infos => [:supplier, :product_supplier_info_packings]) 
```

它现在正在进行 4 个 SQL 查询。

如果我添加以下条件

```
.where("product_supplier_infos.name = ?", "foobar") 
```

它在所有连接的表上进行 LEFT OUTER JOIN

有没有办法让 AR 在不使用条件时在包含的表上进行 LEFT OUTER JOIN？

我还尝试使用 :joins(:product_supplier_infos => [:supplier, :product_supplier_info_packings]) 最终得到我不想要的 CROSS JOIN 和 .joins(["LEFT OUTER JOIN product_supplier_infos...", "LEFT OUTER加入供应商...", "LEFT OUTER JOIN product_supplier_info_packings ..."]) 但它没有任何效果。我仍然有 4 个 SQL 查询。

# excel - 如果单元格中的数据超过 255 个字符，则无法使用 VBA 编辑单元格

> ID：11002425
> 
> 赞同：1
> 
> 时间：2012-06-12T18:17:27.913
> 
> 标签：excel, excel-2003, vba

我正在尝试使用 VBA 编辑单元格中的数据，如下所示：

`ActiveCell.Characters(155,1).Text = "Adding Text Here"`

如果字符数少于 255 但不能用于超过 255 个字符，则效果很好。

我的单元格有一些颜色的数据，如下所示。线条不应该失去颜色，但我应该在中间添加一些文字。

```
Bread Q1 Required
Jam Q2 NotRequired
Water Q1 Required
Drink Q3 Require
Jam Q2 NotRequired
Water Q1 Required 
```

我正在使用 Office 2003。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:14:22.277

有关 Office 2003 的官方限制，请参见[此处](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx) 。AFAIK 没有解决方法，即使使用较新版本的 excel。当然，您总是可以将这些单元格的内容拆分到多个单元格中，然后`&`在 VBA 中将它们连接起来。

# abap - 在 SELECT 查询中否定 FOR ALL ENTRIES？

> ID：11002438
> 
> 赞同：0
> 
> 时间：2012-06-12T18:17:56.600
> 
> 标签：abap, opensql

我想从FOR ALL ENTRIES itab 中**不**存在的透明表中获取那些记录。

虽然默认逻辑是包含内部表中存在的那些条目，但我想排除它们。我想要某种类型的 FOR ALL ENTRIES NOT IN 语句。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-27T13:02:11.040

好吧，在闲置 8 年后，我可以为我的问题提出可能的解决方案。

[由于版本 7.52](https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-US/abennews-752-open_sql.htm#!ABAP_MODIFICATION_1@1@) ABAP 允许将 itab 作为 SELECT 语句的数据源，因此上述任务可以简化为以 FOR ALL ENTRIES itab 作为数据源附加 NOT EXISTS 子查询：

示例编码：

```
* filling FOR ALL ENTRIES table
SELECT *
  FROM spfli
  INTO TABLE @DATA(lt_exclude_FAE)
 WHERE carrid = s~carrid AND
       connid = s~connid AND
     cityfrom = 'NEW YORK'

* excluding FAE rows
SELECT *
   FROM sflight AS s
   WHERE seatsocc < s~seatsmax AND
     NOT EXISTS ( SELECT  *
                    FROM @lt_exclude_FAE AS exclude
                   WHERE carrid = s~carrid AND
                         connid = s~connid AND
                       cityfrom = s~cityfrom )
   INTO TABLE @DATA(flights_wo_ny). 
```

不过，现在这肯定只在 HANA 数据库上有效，也许在其他几个数据库上有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:51:18.520

我不认为这是否可能。我会为此使用范围。如果这不合适，可以使用循环+读表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T05:13:45.097

您可以对这个问题使用简单的查询。

检查此编码...

```
TABLES : table1 , table2 .

DATA : it_table1 TYPE STANDARD TABLE OF table1 ,
   it_table2 TYPE STANDARD TABLE OF table2 ,
   wa_table1 TYPE table1 ,
   wa_table2 TYPE table2 .

 SELECT * FROM table1 INTO CORRESPONDING FIELDS OF TABLE it_table1 .

 LOOP AT it_table1 INTO wa_table1 .

        SELECT field1 FROM table2 INTO CORRESPONDING FIELDS OF TABLE it_table2 WHERE field2 = wa_table1-field1 .

    IF  sy-subrc = 0 .
        delete TABLE it_table1 FROM wa_table1 .
    ENDIF.

ENDLOOP. 
```

# python - IPython Notebook 在启动时冻结

> ID：11002445
> 
> 赞同：4
> 
> 时间：2012-06-12T18:18:22.650
> 
> 标签：python, browser, ipython

当我从命令行启动 ipython 时，没有任何问题。但是当我调用 ipython notebook 时，我首先得到了“仪表板”选项卡。如果我点击“新笔记本”，我会得到一个完全空白的新标签（没有“In[]”标记，只是完全冻结、空白、白色的浏览器窗口）。

我尝试修改我通常使用的配置文件并删除其中的所有内容（因此它应该就像在本地调用 ipython，我的额外库都没有尝试导入，等等）。这根本没有帮助。

我还尝试在关闭 MathJax 的情况下运行 IPython 笔记本，将端口更改为`--port=`在我知道未使用且正常的端口上运行，然后进入 Firefox 设置并关闭代理的使用（确保避免已知Firefox 代理问题）。

这些东西都没有帮助。让它在 Firefox 中工作也很重要，因为代码将被移植到工作中的社区 Linux 服务器，许多人使用 IPython Notebook，并且只有 Firefox 可用。所以目前，仅仅切换到不同的浏览器是不可行的。

找不到任何有用的错误报告或以前描述此类问题的网页。任何帮助，将不胜感激。

系统：运行 Red Hat 5.5、IPython 0.12 版和 Firefox 3.6

**补充**：我在尝试所有这些时打开了 Firefox 错误控制台，现在我看到一个错误，内容如下。

```
console is not defined
http://127.0.0.1:8892/static/js/notebook.js 
```

我现在正在寻找如何解决这个问题，但指针会很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T22:46:59.627

在[IPython 文档](http://ipython.org/ipython-doc/dev/install/install.html#browser-compatibility)中，Notebook 支持以下浏览器：

> *   铬合金
> *   苹果浏览器
> *   火狐 6 及以上
> *   Firefox 4 和 5：这些浏览器支持 WebSocket，但默认禁用。如果您无法升级，您可以通过在 URL 栏中输入 about:config 然后将 network.websocket.enabled 和 network.websocket.override-security-block 设置为 true 来启用它。

笔记本不兼容FF3。它应该比看起来更好地传达关于浏览器缺陷的信息。您是对的，iptest 结果与此完全无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-03T21:19:38.863

如果您尝试启动大型 Notebook，此 Notebook 可能包含大量输出数据，您应该手动剥离或使用 nbstripout 实用程序精确剥离 Jupyter 和 iPython Notebooks 的输出。

```
pip3 install --upgrade nbstripout

nbstripout MY_BIG_NOTEBOOK_FILE.ipynb 
```

# php - 从 PHP 中的字符串获取文件名

> ID：11002461
> 
> 赞同：1
> 
> 时间：2012-06-12T18:18:52.593
> 
> 标签：php

我将这些字符串以如下格式保存在我的 mysql 数据库中：

```
/uploads/attachments/18/105/WordPress_3_Cookbook.pdf 
```

现在，我只需要获取文件名。

我想我需要 PHP 中的一些函数来从后面检查字符串并将所有内容都放在第一个斜杠上。

这种东西怎么写？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T18:20:01.223

你可以使用[`basename()`](http://php.net/basename)这种方式

```
$filename = basename("/uploads/attachments/18/105/WordPress_3_Cookbook.pdf"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-31T09:48:55.547

1.如果你不想在“basename()”函数中输入所有的链接路径，你可以使用：

```
$_SERVER['REQUEST_URI'] 
```

这将返回整个路径 - （下面的示例）

```
"/uploads/attachments/18/105/WordPress_3_Cookbook.pdf" 
```

2.然后像这样使用'baseline()'函数：

```
 echo basename($_SERVER['REQUEST_URI']); 
```

并将返回所需的文件名作为字符串。

```
 // the output will be : WordPress_3_Cookbook.pdf 
```

# javascript - 连接 # 以创建一个 id

> ID：11002464
> 
> 赞同：1
> 
> 时间：2012-06-12T18:18:54.467
> 
> 标签：javascript

我有以下代码将以下 html 动态附加到我的用户界面。

```
<a href =\'#\' onClick=\'scroll('+data.cid+')\'>comment</a> 
```

data.cid 是通过 pusher.com 检索的，是一个整数值，例如 428。

在滚动功能中，我需要在 data.cid 前面连接一个标签以使其滚动到 div #428

我的滚动功能基本上就是这个。

```
function scroll(cid) {

    var id = "#" + cid; 
            $.scrollTo(id) ; 

 } 
```

这应该相当于：

```
$.scrollTo('#428') ; 
```

除了它不是，它没有滚动到所需的 div。如果我在上面的函数中硬编码#428，一切正常。

显然，在数值前连接主题标签存在问题。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:21:22.447

你的JS看起来不错。你的标记搞砸了。请参阅下面的评论：

```
<a href =\'#\' id =onClick=\'scroll('+data.cid+')\'>comment</a>
               ^ id=onclick=...? 
```

如果标记更改不能解决您的问题，请使用`console.log`检查`cid`inside的值`scroll()`。很可能它没有被正确传递。你的 JS 没问题。

# linux - Linux 上的 EGL 支持

> ID：11002468
> 
> 赞同：0
> 
> 时间：2012-06-12T18:19:10.957
> 
> 标签：linux, opengl-es-2.0, nvidia, egl

我有一个跨平台应用程序，我想在 Linux 上编译。问题是二进制 nVidia 驱动程序不公开*EGL*接口（应用程序使用）。因此，为了尽可能少地更改应用程序，我想知道是否有一个包装器，例如将*GLX*映射到*EGL*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:15:54.397

尽管*Nvidia*没有公开*EGL* / *GLES2* ，但您可以使用*Mesa*和它的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-04T18:07:21.763

> 我想知道是否有一个包装器，例如将 GLX 映射到 EGL。

如果您使用 EGL 来获得 OpenGL-ES 上下文，那么 PowerVR SDK 仿真器就是一个出色的包装器。它有一个公平的许可模型来分发二进制文件（MIT 许可），并且有助于多平台应用程序。只需从相应的平台文件夹中选择 libegl.so（或 libegl.dll）和 libglesv2.so（libglesv2.dll），然后将其与您的应用程序一起放入，请[参阅 PowerVR SDK](https://community.imgtec.com/developers/powervr/graphics-sdk/ "PowerVR SDK”")

> SDK 支持 iOS、Android 和 Linux PowerVR 设备。它还支持 Windows、OS X 和 Linux PC 仿真。Imagination 的 OpenGL ES 仿真库 PVRVFrame 可以从我们的网站下载。

在 Windows 平台上，您还可以使用 Google 的 ANGLE，它将 OpenGL-ES 调用转换为 DirectX D3D（而且速度非常快！）。它也有公平的许可模式（BSD License）。GitHub 上有一个 Microsoft 分支，并进行了一些增强。您可以从 Google Chrome 浏览器安装文件夹中获取 DLL 二进制文件。查找以下文件：libegl.dll、libglesv2.dll 和 d3dcompiler_XX.dll。

# java - 在 Android 中以位图或 jpeg 或 png 图像的形式查看 PowerPoint XML

> ID：11002474
> 
> 赞同：2
> 
> 时间：2012-06-12T18:19:35.023
> 
> 标签：java, android, xml, bitmap, xpsdocument

我有许多 PowerPoint 演示文稿，我需要能够将它们添加到我的应用程序的 res 文件夹中。如果我不将它们保存为 XML、PDF 或 XPS，它们将占用大量内存。PDF 和 android 根本不容易结合在一起，所以我选择 XML 或 XPS 的路径。我需要这些能够被查看和/或编辑为位图。

我不明白 PowerPoint XML 如何能够/实现以在屏幕上查看或绘制。我也不明白如何对 PowerPoint XPS 做同样的事情，但只需要一种方法（XPS 或 XML）。我确实知道 PDF 已经慢慢成为文件复杂性的选项，并且没有标准的查看器 API。

所以基本上...

*   我需要在 android 上以位图的形式显示/查看 XML 或 XPS PP 演示文稿
*   我可以使用 XML 和 Java
*   我已经进行了研究，但我仍然需要了解执行此操作的潜在因素

我会在下面附上代码，但对于 Stack Overflow 来说太大了。如果需要，我建议使用 PP 进行测试并保存为 PowerPoint XML 格式。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:30:29.820

我认为在 Android 上不会有一种简单的方法让您解析 Powerpoint XML 文件中存在的 BinaryData。

我认为您最好将您的 pp 幻灯片保存为图像，这样您就已经将它们保存在易于制作为 Bitmap 对象并根据需要进行编辑的东西中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:15:30.070

试试 Apache.org 上的[HSLFSlideShow](http://poi.apache.org/apidocs/org/apache/poi/hslf/HSLFSlideShow.html)模块。该模块承诺能够解析 PPT 文件、获取嵌入的对象、图片等。它可能会有所帮助。

# iphone - 当视频以嵌入的 html 播放时，如何使用带有不正确证书的 https 连接播放视频 URL

> ID：11002478
> 
> 赞同：1
> 
> 时间：2012-06-12T18:19:39.863
> 
> 标签：iphone, ios, ipad

我有一个 UIWebView，我们在其中使用嵌入式 html 播放视频并使用**loadHtmlString**打开 webview 。

但是如果视频 URL 是带有不正确证书的 HTTPS，我们就无法加载视频。

对于带有 HTTPS 和不正确证书的**普通网页**URL，如果我们覆盖 NSURLConnection 它**可以工作**......但它**不适用于**使用**loadHtmlString打开的视频**

当 URL 具有带有不正确证书的 HTTPS 时，有关如何使用**loadHtmlString打开视频的任何线索....**

谢谢，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:27:49.037

从 NSURLProtocol 派生一个类并将其注册到您的应用程序委托中。

这将使您能够拦截 https 请求并使用 NSURLConnection 将其替换为您自己的请求，然后在 NSURLConnection 的 willSendRequestForAuthenticationChallenge 中：您可以忽略不正确的证书，当您返回结果时，您可以通过 NSURLProtocol 将它们转发到 UIWebView。

这在处理诸如在网页加载过程中连接性消失、服务器无响应、保持异步等情况时会有点棘手。

# internet-explorer - 如何使用 IE 自动化获取 RSS 源？

> ID：11002487
> 
> 赞同：0
> 
> 时间：2012-06-12T18:20:06.247
> 
> 标签：internet-explorer, powershell, rss

我有以下 powershell 脚本来获取 RSS 结果。但是，该脚本返回的是格式化的 RSS 内容的 HTML 代码，而不是原始的 RSS 源，可以通过右键单击 IE 屏幕和“查看源”来查看。

**问题：**

> 如何获取原始 RSS(XML) 源？

```
$url = "http://www.osnews.com/files/recent.xml"
$ie = New-Object -com "InternetExplorer.Application"
$ie.Navigate($url)

while ($ie.busy) { start-sleep -milliseconds 1000; }

$ie.Document.documentElement.OuterHTML 
```

* * *

**更新：**
我没有使用 webclient，因为我需要先登录我的网站（这里我只是使用 osnews.com 作为示例）。使用 webclient 使用 powershell（cookie、凭据等）登录我的网站似乎并不容易。

我原来的例子：

```
$ie$url = New-Object -com "InternetExplorer.Application"
$ie.Navigate("http://mysite.com/login")
$ie.visible = $true

while ($ie.busy) { start-sleep -milliseconds 1000; }

$ie.Document.getElementById("username").value = "myusername";
$ie.Document.getElementById("password").value = "mypassword";
$ie.Document.getElementById("login").click();

while ($ie.busy) { start-sleep -milliseconds 1000; }

$url = "http://mysite.com/rss/..."
$ie.Navigate($url)}

[xml]$rss = $ie.Document.documentElement.OuterHTML 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:59:30.030

不要使用 Internet Explorer。您可以通过以下代码（PowerShell V2）来做到这一点：

```
$w = New-Object Net.WebClient
$xml = [xml]$w.DownloadString('http://www.osnews.com/files/recent.xml') 
```

**更新**：

获取 RSS 源要复杂得多，因为 InternetExplorer 会自动对其进行格式化。此外，如果我取消选中*工具-> 内容-> 设置（用于信息服务）-> 类似“打开信息通道...”*（只是猜测，我将窗口本地化为捷克语），那么它会在 IE 中显示 rss 本身（不是格式为提要，但格式为 XML）。但是， $ie.document.body.innerhtml 仍然是 html :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:59:37.940

尝试使用 WebClient，而不是：

```
$url = "http://www.osnews.com/files/recent.xml"
$client = new-object System.Net.WebClient
$htmlsource = $client.DownloadString($url)
$xml = [xml]($htmlsource) 
```

一旦你达到这一点，那么你可以做任何事情。例如，您可以打印所有内容，如下所示：

```
$xml.rss.channel.item 
```

或者，只是前 10 个标题，如下所示：

```
$xml.rss.channel.item | select title -f 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:09:35.397

尝试这样的事情：

```
$feed=[xml](new-object system.net.webclient).downloadstring("http://www.osnews.com/files/recent.xml")  
$results= $feed.rss.channel.item | Select-Object TITLE,DESCRIPTION | ConvertTo-Html | out-file c:\rss.htm

Invoke-Expression C:\rss.htm 
```

# loops - 如何在 CMD 中解决循环上下文中的时间问题

> ID：11002490
> 
> 赞同：0
> 
> 时间：2012-06-12T18:20:11.333
> 
> 标签：loops, time, batch-file, cmd

当我在 FOR 循环中执行程序时，我编写了自己的代码来尝试计算延迟。缺点是值 %time% 是在同一时刻评估的。所以我想问你，是否可以更改代码以将 2 个计算块（使用 SET /A）移动到单独的子例程中。我用 goto 在网上搜索了这个解决方案，但我不清楚如何返回循环。作为我发现的例子，在文件末尾提到。

```
@echo off 
Setlocal EnableDelayedExpansion

FOR /F "tokens=*" %%A IN ('DATE/T') DO FOR %%B IN (%%A) DO SET Today=%%B
ECHO It's %Today% today

CHCP 1250 > NUL

SET tpath=TEMP

for /f "delims=" %%x in (delimiter.ini) do set TAB=%%x

if not exist proxies.ini (
  echo Proxies not Found!
  pause 
exit
)

REM Set array of proxies
FOR /F "eol= tokens=1,2 delims=%TAB%" %%A IN (proxies.ini) DO (
  if "%%A"=="*" (
    SET asterisk=1
    SET http_proxy=%%B
    SET t0=%time%
    wget.exe http://www.nasa.gov/images/content/297522main_image_1244_946-710.jpg 
    SET t1=%time%
    REM FOR /F %%A IN ('TIME/T') DO SET t1=%%A

    echo !t0!
    SET /a s = !t0:~6,2!*100
    SET /a c = !t0:~9,2!
    SET /a c = "!c!-(!c!/10)*4"
    SET /a d1 = !s!+!c!
    echo !s!+!c! = !d1!
    echo !d1!

    echo !t1!
    SET /a s = !t1:~6,2!*100
    SET /a c = !t1:~9,2!
    SET /a c = "!c!-(!c!/10)*4"
    SET /a d2 = !s!+!c!
    echo !s!+!c! = !d2!
    SET /a delay = !d1!-!d2!   
    echo Delay:!delay!

   pause
   Echo Working proxy ... !proxy!     
  )
)

pause 
```

**编辑** 这是第二次测试，在 dBenham 发布他更好的解决方案之前：

```
@echo off 
Setlocal EnableDelayedExpansion

FOR /F "tokens=*" %%A IN ('DATE/T') DO FOR %%B IN (%%A) DO SET Today=%%B
ECHO It's %Today% today

CHCP 1250 > NUL

SET tpath=TEMP

for /f "delims=" %%x in (delimiter.ini) do set TAB=%%x

if not exist proxies.ini (
  echo Proxies not found. 
  pause 
exit
)

REM Set array of proxies
FOR /F "eol= tokens=1,2 delims=%TAB%" %%A IN (proxies.ini) DO (
  if "%%A"=="*" (
    SET asterisk=1
    SET http_proxy=%%B
    SET t0=!time!
    wget.exe http://www.nasa.gov/images/content/297522main_image_1244_946-710.jpg 
    call :setTime !t0! !time!
    SET t1=!time!

:setTime
   Setlocal EnableDelayedExpansion
    SET t0=%1
    SET t1=%2
    echo !t0! !t1!
    pause
    SET /a m1 = !t0:~3,2!
    SET /a s1 = !t0:~6,2!
    SET /a s = !s1!*100
    SET /a c = !t0:~9,2!
    SET /a c = "!c!-((!c!/10)*4)"
    SET /a d1 = !s!+!c!
    echo !s!+!c! = !d1!
    echo !d1!

    echo !t1!
    SET /a m2 = !t1:~3,2!
    SET /a s2 = !t1:~6,2!
    if "!m2!" GTR "!m1!" (
      IF "!s2!" LSS "!s1!" (
          REM e.g. s1=20, s2=04 => 
          SET /a s2_cor = 60-!s1!+!s2!
          echo Correction: s2: !s2!
          SET /a s2_cor = "!s2!+60*(!m2!-!m1!)" 
      ) ELSE (
          SET /a s2_cor = "!s2!+60*(!m2!-!m1!-1)"
      )

      SET /a s2 = "!s2!+!s2_cor!"
    )

    SET /a s = !s2!*100    
    echo s2:!s2! , s:!s!    
    SET /a c = !t1:~9,2!
    SET /a c = "!c!-((!c!/10)*4)"
    SET /a d2 = !s!+!c!
    echo !s!+!c! = !d2!
    SET /a delay = !d2!-!d1!   
    echo Delay:!delay!
   pause
   endlocal
exit /b

   Echo Working proxy ... !proxy!     
  )
)

if NOT !asterisk!==1 (
 echo .
 echo Asterix not set
 echo .
 exit
)
pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:00:21.810

乔伊诊断出你的一个问题。但是您对经过时间的计算有很多问题。

*   正如乔伊指出的那样，您需要在循环中使用延迟扩展

*   您应该从 Time2 中减去 Time1。你正在做相反的事情。

*   您对小数秒的处理是完全错误的。

*   您假设经过的时间少于一分钟。这可能是真的，也可能不是。但是您错误地认为您只需要查看时间中的秒部分。如果 T0=09:59:59.99 和 T1=10:00:00.00 怎么办？正确的结果应该是 0.01 秒。获得正确结果的唯一方法是查看所有时间分量。计算该值的最简单方法是在进行任何减法之前将每次转换为午夜过后的厘秒数（1/100 秒）。

*   如果 T0=23:59:59.99 和 T1=00:00:00.00 怎么办？正确的结果应该是 0.01 秒。但是，如果将两个值都转换为厘秒，然后从 T1 中减去 T0，您将得到一个负数。诀窍是如果结果是否定的，则将 1 天 (24*60*60*100) 添加到结果中。这允许该技术在一天中的任何时间计算小于 24 小时的任何时间间隔。

*   SET /A 将以 0 开头的任何数字解释为八进制表示法。因此，任何大于 7 的数字在您的代码中都会被错误地解释。像 08 和 09 这样的加值会引发错误，因为 8 和 9 不是有效的八进制数字。下面的解决方案使用一些数学技巧在每个时间分量之前添加一个数字以强制 SET /A 使用十进制表示法，然后在最后减去额外的时间。

其他问题：

*   大多数情况下，使用 SET /A 您不需要扩展变量。例如，如果你想给一个数值变量加一，你可以简单地使用`set /A var=var+1`，或者更简洁`set var+=1`的 。

*   我不认为你的 FOR /F 选项`"eol= tokens=1,2 delims=%TAB%"`正在做你想做的事。我怀疑您正在尝试禁用 EOL 选项，但实际上您正在将 EOL 设置为`<space>`字符。禁用它的正确方法是将 EOL 设置为您的 DELIM 值之一：`"eol=%TAB% tokens=1,2 delims=%TAB%"`.

这是代码的相关部分，使用一些工作批处理子例程来计算经过的时间。我用于处理时间计算的算法源自此处的代码：http: [//www.dostips.com/DtCodeFunctions.php#_Toc128586395](http://www.dostips.com/DtCodeFunctions.php#_Toc128586395)

下面的代码中有很多高级批处理技术。如果其中大部分没有意义，请不要感到难过。但是您应该能够将子例程复制到您想要的任何脚本中并轻松计算经过的时间。

```
setlocal enableDelayedExpansion
FOR /F "eol= tokens=1,2 delims=%TAB%" %%A IN (proxies.ini) DO (
  if "%%A"=="*" (
    SET asterisk=1
    SET http_proxy=%%B
    SET t0=!time!
    wget.exe http://www.nasa.gov/images/content/297522main_image_1244_946-710.jpg
    SET t1=!time!

    call :diffTime t0 t1 Delay
    call :diffTime /f t0 t1 FormattedDelay
    echo Delay=!Delay!
    echo FormattedDelay=!FormattedDelay!

    pause
    Echo Working proxy ... !proxy!
  )
)
exit /b

:diffTime  [/F]  StartTimeVar  EndTimeVar  [ReturnVar]
::
:: Compute the elapsed time between the time values stored in
:: variables StartTimeVar and EndTimeVar. The value is returned
:: in units of centiseconds (1/100 second). If the /F option is
:: specified then the result is formatted as HH:MM:SS.DD
::
:: The result is returned in variable ReturnVar.
::
:: If ReturnVar is not specified then simply echo the result.
::
  setlocal enableDelayedExpansion
  set "diffTime.formatTime="
  if /i "%~1"=="/F" (
    set diffTime.formatTime=1
    shift /1
  )
  call :parseTime %1 diffTime.t1
  call :parseTime %2 diffTime.t2
  set /a "diff=diffTime.t2-diffTime.t1"
  if %diff% lss 0 set /a "diff+=24*60*60*100"
  if defined diffTime.formatTime (
    set /a "DD=diff, HH=DD/360000, DD-=HH*360000, MM=DD/6000, DD-=MM*6000, SS=DD/100, DD-=SS*100"%\n%
    if "!HH:~1!"=="" set "HH=0!HH!"
    if "!MM:~1!"=="" set "MM=0!MM!"
    if "!SS:~1!"=="" set "SS=0!SS!"
    if "!DD:~1!"=="" set "DD=0!DD!"
    set diff=!HH!:!MM!:!SS!.!DD!
  )
  endlocal & if "%~3"=="" (echo %diff%) else set "%~3=%diff%"
exit /b

:parseTime  TimeVar  ReturnVar
::
:: Parse the time value stored in TimeVar and compute the number of centiseconds (1/100 second) past midnight.
:: The result is returned in variable ReturnVar
::
  for /f "tokens=1-4 delims=:.," %%A in ("!%~1: =0!") do set /a "%~2=(((1%%A*60)+1%%B)*60+1%%C)*100+1%%D-36610100"
exit /b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:25:12.590

实际上*使用*延迟扩展。在循环内使用`!time!`而不是。`%time%`同样对于您在循环中设置和使用的所有其他变量。

# javascript - 查找与搜索匹配的歌曲（艺术家和/或曲目名称）

> ID：11002494
> 
> 赞同：1
> 
> 时间：2012-06-12T18:20:32.887
> 
> 标签：javascript, jquery, search, playlist

我正在开发一个搜索功能，可以找到搜索匹配艺术家姓名和曲目名称的歌曲。如果您对此主题感兴趣并且有解决此问题的理想方法，您的意见将不胜感激。这更像是一个逻辑问题而不是编程知识问题。

这是我当前的代码。

```
searchPlaylist: function(a,b){
    var retArr = [];
    if (typeof a === 'string') a = eval(a);
    $.each(b, function(i,v){
        if (typeof v['id'] !== "string" || typeof v['artist'] !== "string" || typeof v['track'] !== "string") return;
        var artist = v['artist'].replace(/[^a-zA-Z 0-9]+/g,'').replace('   ',' ').replace('  ',' ');
        var track = v['track'].replace(/[^a-zA-Z 0-9]+/g,'').replace('   ',' ').replace('  ',' ');
        if (artist.match(a) || track.match(a)) retArr.push(i);
    });
    aC.searchLength = retArr.length;
    return retArr;
} 
```

这就是我调用该函数的方式。

```
doSearch: function(){
    var val = $.trim($("#sB").val().replace(/[^a-zA-Z 0-9]+/g,'').replace('   ',' ').replace('  ',' '));
    if (1 < val.length && val != search) {
        aC.search = val;
        var rlength = aC.searchLength;
        aC.searchResults = aC.searchPlaylist("/" + aC.search + "/i", aC.playlist);
        if (aC.searchLength > 0) $("#sresultcount").text(aC.searchLength);
        if (rlength != aC.searchLength) {
            aC.loadPlaylist($.grep(aC.playlist, function(v,i){
                return $.inArray(i,aC.searchResults) > -1;
            }));
        }           
    } else if (0 == val.length) {
        aC.search = "";
        aC.searchLength = 0;
        $("#sresultcount").empty();
        aC.loadPlaylist(aC.playlist);
    }
} 
```

aC.searchPlaylist 函数被传递一个用于搜索的 RegEx 语句，第二个参数是存储播放列表的数组的变量。

这是播放列表数组的结构。

```
aC.playlist = [
    {"id":"bd6ve0ydHVo","artist":"0SM","track":"The Landing feat. Alex G - Original Mix","img":"http://i.ytimg.com/vi/bd6ve0ydHVo/default.jpg","duration":322},
    {"id":"KIijaPllLNI","artist":"2 Chainz","track":"No Lie - Explicit Version","img":"http://i.ytimg.com/vi/KIijaPllLNI/default.jpg","duration":240},
    {"id":"esBlVulbkQQ","artist":"2 LIVE CREW","track":"We Want Some P--sy","img":"http://i.ytimg.com/vi/esBlVulbkQQ/default.jpg","duration":170},
    {"id":"5sc_nQiuDN0","artist":"2 LIVE CREW","track":"Face Down A-- Up","img":"http://i.ytimg.com/vi/5sc_nQiuDN0/default.jpg","duration":115},
    {"id":"42vxicGNumM","artist":"2 LIVE CREW","track":"Me So Horny","img":"http://i.ytimg.com/vi/42vxicGNumM/default.jpg","duration":284},
    {"id":"42boE4fc5X4","artist":"2 LIVE CREW","track":"Hoochie Mama","img":"http://i.ytimg.com/vi/42boE4fc5X4/default.jpg","duration":180},
    {"id":"sNRa1M39RRY","artist":"2Pac","track":"I Ain't Mad At Cha","img":"http://i.ytimg.com/vi/sNRa1M39RRY/default.jpg","duration":233},
    {"id":"2cjv7hEAytU","artist":"2Pac","track":"Me Against The World","img":"http://i.ytimg.com/vi/2cjv7hEAytU/default.jpg","duration":283},
    {"id":"8p9jSRxguAA","artist":"2Pac","track":"Ambitionz Az A Ridah","img":"http://i.ytimg.com/vi/8p9jSRxguAA/default.jpg","duration":276},
    {"id":"W69SSLfRJho","artist":"2Pac","track":"Life Goes On","img":"http://i.ytimg.com/vi/W69SSLfRJho/default.jpg","duration":302},
    {"id":"W6S7dAsIzIU","artist":"2Pac","track":"All Eyez On Me","img":"http://i.ytimg.com/vi/W6S7dAsIzIU/default.jpg","duration":318},
    {"id":"khkx7yXzGhc","artist":"2Pac","track":"2 Of Amerikaz Most Wanted - (Explicit)","img":"http://i.ytimg.com/vi/khkx7yXzGhc/default.jpg","duration":316}
]; 
```

这就是我认为的结果应该是什么。

*搜索词可以是以下之一：*

**现场工作人员 - 想要一些** 或 **现场工作人员想要一些**

我通常更喜欢第二个选项，因为我删除了特殊字符，所以第一个示例中的连字符会被删除。

一旦您将字符串拆分为基于空格的数组，您就可以看出困境，我们如何在艺术家或曲目名称中搜索。（我认为搜索所有可用组合不是一个好主意。）

[HnS音乐发现](http://music.hns.netai.net/)

提前致谢。您的意见将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:17:03.940

```
searchPlaylist: function(a,b){
    var retArr = [], search = a.split(' ');
    $.each(b, function(i,v){
        if (typeof v['id'] !== "string" || typeof v['artist'] !== "string" || typeof v['track'] !== "string") return;
        var artist = v['artist'].replace(/[^a-zA-Z 0-9]+/g,'').replace('   ',' ').replace('  ',' ');
        var track = v['track'].replace(/[^a-zA-Z 0-9]+/g,'').replace('   ',' ').replace('  ',' ');
        var song = artist + " " + track;
        var rg = new RegExp('^(?=.*?'+search.join(")(?=.*?")+')',"i");
        if (song.match(rg)) retArr.push(i);
    });
    aC.searchLength = retArr.length;
    return retArr;
} 
```

# c# - 单元测试内部列表

> ID：11002495
> 
> 赞同：2
> 
> 时间：2012-06-12T18:20:33.757
> 
> 标签：c#, unit-testing

```
using System;
using System.Collections.Generic;
using System.Text;

[Serializable]
public class ColumnDataField
{
    #region Fields

    private int _columnIndex;
    private string _dataFields;

    #endregion Fields

    #region Properties

    /// <summary>
    /// Column index
    /// </summary>
    public int ColumnIndex
    {
        get { return _columnIndex; }
        set { _columnIndex = value; }
    }

    /// <summary>
    /// Data fields
    /// </summary>
    public string DataFields
    {
        get { return _dataFields; }
        set { _dataFields = value; }
    }

    /// <summary>
    /// Convert DataFields string to data field list
    /// </summary>
    internal List<String> DataFieldList
    {
        get
        {
            if (string.IsNullOrWhiteSpace(DataFields)) return new List<String>();

            string[] _array = DataFields.Split(new Char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);

            List<String> _fields = new List<String>(_array);

            for (int _i = _fields.Count - 1; _i >= 0; _i--)
            {
                _fields[_i] = _fields[_i].Trim();
                if (string.IsNullOrWhiteSpace(_fields[_i])) _fields.RemoveAt(_i);
            }

            return _fields;
        }

        set
        {
            StringBuilder _buffer = new StringBuilder();

            foreach (string _field in value)
            {
                if (_buffer.Length > 0) _buffer.Append(",");
                _buffer.Append(_field);
            }

            DataFields = _buffer.ToString();
        }
    }

    #endregion Properties
} 
```

}

我是 C# 中的实习生单元测试，所以请放轻松。

我的其他项目没有太多问题，但我似乎无法弄清楚我应该如何对内部列表进行单元测试。

这是我到目前为止的单元测试代码：

```
 [TestMethod]
    public void DataFields_Test()
    {
        ColumnDataField questionText = new ColumnDataField();
        questionText.DataFields = "test";
        string expected = "test";
        string actual = questionText.DataFields;
        Assert.AreEqual(expected, actual);
    } 
```

所以这将运行 DataFields 属性，但除此之外它不会遍历任何其他代码。我已经在网上搜索了几天，试图找出解决这个问题的最佳方法。我不需要确切地告诉我该怎么做，但我们将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:30:10.933

选项#0：向你的老板咨询他们希望如何测试内部方法。

选项 #1：将[InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)添加到您正在测试的程序集并`DataFieldList`直接调用。

```
[assembly:InternalsVisibleTo("YourTestAssemblyName")] 
```

选项#2：测试调用内部属性的东西，让您访问结果。

选项#3：只是不要测试内部属性/字段/方法/类/等。

我敢肯定还有更多选择...

选项#ProbablyShouldn't：您可以使用反射来“找到”内部属性​​，但您可能不应该这样做。

* * *

顺便说一句，您可以大大简化未测试属性中的代码：

```
//.Net 4
get
{
    var cleansed = DataFields.Split(new [] { ',' }, StringSplitOptions.RemoveEmptyEntries)
                             .Select(df => df.Trim())
                             .Where(str => !string.IsNullOrWhitespace(str));
    return new List<string>(cleansed);
}
set
{
    DataFields = string.Join(",", value);
} 
```

# django - 稍后更改上传文件的名称 - django

> ID：11002504
> 
> 赞同：0
> 
> 时间：2012-06-12T18:21:18.690
> 
> 标签：django, file-upload

文件上传后是否可以更改文件名。并且更改必须在文件上传时而不是在稍后阶段进行。在另一个函数中，我处理该文件并且必须更改文件的名称。但与对象的其他属性不同，我似乎无法更改文件的名称。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:12:04.443

你能找到这样的东西吗：？

```
class BaseImage(models.Model):
    """
        Base Image model
    """

    path_format_str = u'%(id_prefix)s/gallery-%(object_id)s/%(image_name)s'

    def upload_to(self, original_name):

        return self.path_format_str % {
            'id_prefix': str(self.object_id).zfill(6)[:3],
            'object_id': self.object_id,
            'image_name': sanitize_file_name(original_name),
        }

    file_data = models.ImageField(
        blank=True,
        upload_to=upload_to,
        verbose_name=u'soubor s obrázkem',
        help_text=mark_safe(u'Připojte fotku - formát JPG, bla bla bla ,...'),
        max_length=255
    ) 
```

# iphone - NSString initWithData 在额外的引号中返回字符串值，如何解决？

> ID：11002506
> 
> 赞同：0
> 
> 时间：2012-06-12T18:21:22.837
> 
> 标签：iphone, ios, nsstring, nsdata, quotes

每个人，

NSString 的方法 initWithData 将额外引号中的值返回给我，我该如何解决？例如：

> NSString *result = [[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding];

recievedData 包含 SessionID 并且在调试结果看起来像：“”33BD76C7F62B4B95805D15BF120594C1E901“”所以当我尝试发送 HTTP 请求时，我得到这样的 url：[http](http://server.com?SessionID=) ://server.com?SessionID= “33BD76C7F62B4B95805D15BF120594C1E901”，但它应该是 [http:// server.com?SessionID=33BD76C7F62B4B95805D15BF120594C1E901](http://server.com?SessionID=33BD76C7F62B4B95805D15BF120594C1E901)

如果没有这些外部引号，如何从 NSData 获取字符串值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:26:25.567

快速而肮脏的解决方案。

```
result = [result stringByReplacingOccurrencesOfString:@"\""
                                 withString:@""]; 
```

# php - 未定义的变量，通过 AJAX 加载视图时

> ID：11002507
> 
> 赞同：-1
> 
> 时间：2012-06-12T18:21:33.777
> 
> 标签：php, javascript, codeigniter, jquery

我使用 ajax 为我的网站动态加载一些内容，它在加载注册和登录表单等内容时效果很好，因为我不必向视图本身发送任何数据（`register_view`等）。
但是，当我尝试加载不同的东西时，例如用户的配置文件，它需要我将一些变量传递给视图，并且当我遇到 AJAX 问题时。
而且我确定我发送的变量在控制器中经过测试`isset`，`!empty`但是在视图中，它突然变成了未定义的变量，这只发生在通过 AJAX 访问配置文件时。
PHP代码：
控制器：

```
if($this->uri->segment(4)){//if viewing a specific profile.
                /*escape the uri segment*/
                $segment = intval($this->uri->segment(4));
                if($segment == 0){//the uri segment was a string
                    /*display error message.*/
                    $data['content'] = 'redirect_message';
                    $data['information'] = 'Could\'nt find the profile!, please try again.';
                    $this->load->view('templates/manage', $data);
                }
                else{//else , the uri segment is a number, considered safer.
                    $query_result = $this->db_model->getProfile($segment);//get the Profile
                    /*check if any results were returned.*/
                    if($query_result->num_rows() > 0){
                        /*load a view to display the specified Profile.*/
                        $data['information'] = $query_result;

                        if($this->input->is_ajax_request())//requesting via ajax, display the content only.
                        $this->load->view("view_Profile_view", $query_result);
                        else{
                            $data['content'] = 'view_Profile_view';
                            $this->load->view('templates/manage', $data);

                        }
                    }
                    else{ //no rows returned.
                        /*show error message.*/
                        $data['content'] = 'redirect_message';
                        $data['information'] = 'Error viewing the Profile!';
                        $this->load->view('templates/manage',$data);
                    }
                }
            } 
```

视图（`view_Profile_view`）：

```
/*display the profile:*/
$row = $information->row();//error occurs here!
echo $row->username.'</br>';
echo $row->email; 
```

jQuery/JS 代码：

```
var base_url = "/";
var site_url = "/index.php/";

$(document).ready(function(){
$('.ajax_anchor').click(function(){
    loadForm(this);
    return false;
});

});
function loadForm(anchor){
    var splitted_url = $(anchor).attr('href').split("/");

    if(splitted_url.length == 7){//probably accessing /site/login or /site/register not something like /site/profiles/view/[ID].
        var url = splitted_url[splitted_url.length-2]+"/"+splitted_url[splitted_url.length-1];
        }
    else if(splitted_url.length == 9) {//probabbly accessing /site/profiles/view/[ID] not something like /site/login.
        var url=
            splitted_url[splitted_url.length-4]+"/"
            +
            splitted_url[splitted_url.length-3]+"/"
            +
            splitted_url[splitted_url.length-2]+"/"
            +
            splitted_url[splitted_url.length-1]+"/"

            ;
    }

    var csrf_token = $.cookie('csrf_cookie_name');//holding the csrf cookie generated by CodeIgniter, using jQuery cookie plugin
    $.ajax({
          type: "POST",
          url: site_url+url,
          data: {csrf_test_name:csrf_token}//pass the csrf token otherwise codeigniter will return an error(500).
        }).done(function( html ) {
            var ajaxResult$ = $('#ajax_result');//ajax_result is an empty div, used to display ajax results.
            ajaxResult$.empty().append(html).dialog();//dialog:is a jquery-ui function.
        });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:02:31.963

从外观上看，您分配的 `$data['information'] = $query_result;`so`$information`对象可用于视图，但您直接传递`$query_result`给视图而不是`$data`

所以改变： `$this->load->view("view_Profile_view", $query_result);`

到： `$this->load->view("view_Profile_view", $data);`

# iphone - 带有 UILabel 的 UIToolbar 灵活空间不起作用

> ID：11002508
> 
> 赞同：3
> 
> 时间：2012-06-12T18:21:39.193
> 
> 标签：iphone, xcode, uilabel, uitoolbar

我正在创建一个工具栏，上面有 2 个标签。

在左边我想要我的税标签。在右边我想要我的总标签。

这是我在 viewDidLoad 方法中设置的代码。

```
self.taxLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0 , 11.0f, self.view.frame.size.width, 21.0f)];
self.taxLabel.backgroundColor = [UIColor clearColor];
self.taxLabel.textColor = [UIColor whiteColor];
self.taxLabel.text = @"$$$$.$$ TAX"; 

self.totalLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0 , 11.0f, self.view.frame.size.width, 21.0f)];
self.totalLabel.backgroundColor = [UIColor clearColor];
self.totalLabel.textColor = [UIColor greenColor];
[self.totalLabel setTextAlignment:UITextAlignmentRight];
self.totalLabel.text = @"$$$$.$$"; 

// create the bar button item where we specify the label as a view to use to init with
UIBarButtonItem *taxButton = [[UIBarButtonItem alloc] initWithCustomView:self.taxLabel];

UIBarButtonItem *flex = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

UIBarButtonItem *totalButton = [[UIBarButtonItem alloc] initWithCustomView:self.totalLabel];

NSArray *toolbarItemArr = [NSArray arrayWithObjects:taxButton, flex, totalButton, nil];

[infoBar setItems:toolbarItemArr animated:YES]; 
```

我遇到的问题是灵活的空间似乎没有做任何事情。如果我将总标签文本设置为左对齐，它会与税标签重叠。就好像它们被叠加到工具栏上一样。

标签也可以相互重叠。我不确定我做错了什么。但我认为这与我如何初始化框架有关。

任何帮助，将不胜感激。

# email - 电子邮件主题是否需要 html 转义？

> ID：11002510
> 
> 赞同：10
> 
> 时间：2012-06-12T18:21:56.067
> 
> 标签：email, html-email

我即将在可能包含不安全用户输入的代码中发送 html 电子邮件。我注意到，如果我对主题进行 html 转义，GMail 将显示转义的内容（因此，如果我的主题是`"This & That"`，我将其清理为`"This &amp; That"`，Gmail 将显示后者）。雷鸟也是如此。假设所有电子邮件客户端都不需要转义主题 html 是否安全？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T08:17:28.237

无需在主题行中编码 HTML 实体。在 HTML 正文中进行编码的原因是，如果您使用 XHTML，因为它源自 XML，所以将`&`其视为保留字符。

但是，电子邮件的主题行不是 HTML、XML 或 XHTML。这只是纯文本。因此，您不需要将 & 符号编码为`&amp;`. 如果您对它进行编码，因为它没有被解析为 HTML，它将显示为已编码。

如果您想包含非 ASCII 字符（例如`£`），那么您需要将整个“信封”（包括电子邮件正文）编码为 UTF-8。

因此，在代码中，以下内容将显示为：

```
 | Subject Line |    Body
====================================
&amp;   |    &amp;     |     &       
&       |      &       |     & 
UTF-8 £ |      £       |     £
ASCII £ |     n/a      |    n/a
&pound; |   &pound;    |     £ 
```

注意：Microsoft Office 有一个奇怪的 UTF-8 实现，所以不是所有的 UTF-8 字符都可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T14:03:23.583

主题不需要进行 html 转义，但是可以转义。最初的 SMTP 规范定义消息应该是 ascii（[RFC822](http://www.ietf.org/rfc/rfc822.txt)第 3 节）。这在[RFC2822](https://www.rfc-editor.org/rfc/rfc2822)中得到了证实，但是[RFC2047](https://www.rfc-editor.org/rfc/rfc2047)定义了标题扩展，允许您对 mime 消息中的标题字段进行编码以允许非 ascii 文本。

这种编码字格式允许您在电子邮件标题中使用像 utf-8 这样的编码。例如：

```
=?iso-8859-1?q?this=20is=20some=20text?= 
```

这是“这是一些文本”的 ISO-8859-1 编码版本。此方法可用于对诸如英镑符号 (£) 或重音/非 ascii 字符之类的内容进行 enode。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T18:31:36.083

主题字段位于“HTML 内容”*之外*。它与 HTML 没有任何关系。

* * *

但是，我没有这方面的参考......

# groovy - Gradle 中的项目

> ID：11002511
> 
> 赞同：0
> 
> 时间：2012-06-12T18:21:57.667
> 
> 标签：groovy, build-automation, gradle

我是新手。我可以看到类似**project.getPlugins()**的东西。这个**项目**是指什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:42:05.697

`project`是引用当前项目的 Project 类型的对象。有关更多详细信息，请参阅[此变量的 groovydoc](http://www.gradle.org/docs/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project%3aproject)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:42:59.167

也许不出所料，当前的项目。

这是一个[`Project`（文档）](http://www.gradle.org/docs/current/dsl/org.gradle.api.Project.html)，指的是[当前项目](http://www.gradle.org/docs/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project%3aproject)。

更高级的文档可以在[用户指南](http://www.gradle.org/docs/current/userguide/tutorial_using_tasks.html#N101B3)中找到，中级（关于脚本中项目的用法）可以在[编写构建脚本文档](http://www.gradle.org/docs/current/userguide/writing_build_scripts.html#sec%3aproject_api)中找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-30T08:30:38.737

project.getPlugins() == 插件 == project.plugins。project 是当前项目构建的实例。plugins 是当前构建对象（项目）的属性之一。gradle 可以自动为一个属性创建 getter 和 setter，这就是为什么你也可以使用 getPlugins() 的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T10:51:13.337

**project.plugins**等价于**getProject().getPlugins()**

> Groovy 自动将属性引用转换为对适当 getter 或 setter 方法的调用。

# java - 为什么调用 shutdownNow() 方法后 Future.get() 方法不返回任何内容？

> ID：11002516
> 
> 赞同：1
> 
> 时间：2012-06-12T18:22:11.463
> 
> 标签：java, executorservice

此类在执行 ExecutorService.shutdownNow() 调用后挂在 Future.get() 方法。我不知道我在犯什么错误。

此类创建固定线程池，并在 5 秒后超时。如果连续发生 5 个错误，这将调用 shutdownNow()。

```
 public class TestExecutor {

private AtomicInteger mThresholdCount = new AtomicInteger();
// Default error threshold limit
private int mThresholdLimit = 5;

private ExecutorService executor;

private ThreadPool pool;

public TestExecutor() {
    option2();
}   

private void option2() {
    executor = Executors.newFixedThreadPool(2);
    Collection<Future<String>> runnableList = new ArrayList<Future<String>>();
    for (int count = 0; count <= 10; count++) {
        MyCallable runnable = new MyCallable(count);
        runnableList.add(executor.submit(runnable));
    }
    for (Future<String> future : runnableList) {
        try {
            System.out.println("Before Get");
            future.get();
            System.out.println("After Get");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    executor.shutdown();
}   

public static void main(String[] args) {
    new TestExecutor();
}

private class TimeOutTask extends TimerTask {
    private Thread t;

    public TimeOutTask(Thread t) {
        this.t = t;
    }

    public void run() {
        if (t != null && t.isAlive()) {
            t.interrupt();
        }
    }
}

private class MyCallable implements Callable<String> {

    private int count = 0;
    private Timer timer = new Timer(true);

    public MyCallable(int count) {
        this.count = count;
    }

    @Override
    public String call() {
        try {
            System.out.println("Started Processing " + count);
            timer.schedule(new TimeOutTask(Thread.currentThread()), 5000);
            Thread.sleep(100000);
            System.out.println("Completed processing " + count);
        } catch (Exception e) {
            System.out.println("Error while processing:" + count);
            if (mThresholdCount.incrementAndGet() == mThresholdLimit) {
                System.out.println("while processing:" + count
                        + " Reached maximum error threshold limit! "
                        + "Requested to stop the process.");
                if (executor != null) {
                    executor.shutdownNow();
                    System.out.println("Shut down now");
                }

            }
        }
        return String.valueOf(count);
    }
} 
```

}

请帮助我理解为什么在 5 个线程连续中断并调用 shutdownNow() 之后 get() 挂在这里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:33:15.533

因为列表末尾的 Callables 从未真正执行过，因此永远不会完成（您有 2 个线程和 10 个任务）。您会注意到该`shutdownNow()`方法返回了一个永远不会执行的 Runnable 列表。您可能应该对这些做一些有意义的事情。

# java - keytool.exe 对获取 Google Maps Android API 密钥的 Win32 应用程序无效

> ID：11002518
> 
> 赞同：0
> 
> 时间：2012-06-12T18:22:18.223
> 
> 标签：java, android, window, keytool

当我尝试运行以下命令时，它会给我这个错误**keytool.exe 对 Win32 应用程序无效**

1：

> C:\Program Files\Java\jdk1.7.0_04\bin>keytool -list -alias androiddebugkey -keystore “C:\Users\Jani.android\debug.keystore.keystore” -storepass android -keypass android

2：

> keytool -list -alias androiddebugkey -keystore "C:\Users\Jani.android\debug.keystore.keystore" -storepass android -keypass android

我正在使用窗口 7（64 位）任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:28:07.643

发生这种情况的原因有以下三个：

1.  在您安装 JDK 期间，keytool.exe 没有正确安装。如果这是尝试，那么它的大小将是 0kB（罕见）
2.  我看到你使用的是JDK7。众所周知，Android 工具存在问题。安装JDK6应该可以解决问题（常见）
3.  您可能正在使用 64 位版本的 JDK。尝试卸载现有的 JDK 并重新安装 32 位版本

一般来说，修复以上3个应该可以解决这个问题。

# php - Facebook 访问令牌终身问题

> ID：11002521
> 
> 赞同：0
> 
> 时间：2012-06-12T18:22:41.313
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试设置一个 FB 应用程序，每当我们的 CMS 中有人发布特定帖子时，该应用程序就会发布到单个特定页面。我不希望在没有 CMS 的情况下启用 facebook 统一登录等。我们有一个钓鱼应用程序，每当有人在我们用 PHP 编写的 CMS 应用程序中签入鱼时，我们只想在特定页面上发布。

我遇到的问题是我需要我们的 CMS 能够在无需用户干预、登录等的情况下将内容推送到 Facebook 页面。到目前为止，一切正常，除了 60 天访问令牌到期。

我猜想没有办法获得“永恒”的令牌。那么，为了使我们的 php CMS 能够在我们的 Facebook 页面上永久发布内容，我需要编写哪些代码？

只有我们的单页 Facebook 帐户需要访问该应用程序。

抱歉，如果这已在其他地方得到回答，但我一直在谷歌上搜索答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:34:45.597

您找不到所需解决方案的原因是它不存在。扩展的访问令牌将在 60 天后过期。您的页面管理员用户必须定期返回您的应用程序以刷新他们的登录信息（然后您将使用该短访问令牌并将其“交换”为 60 天）。这是使其工作的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:44:42.423

所以，这在理论上应该有效：

1.  引入一些在令牌过期时捕获的错误处理。
2.  编写一个服务器端功能/模块，为您发布登录到 facebook 并自动检索您需要的内容。有一些插件可以通过 php 为您执行此操作（我的意思是模拟浏览器）（请参阅链接）。或者只是在 perl/python 中使用 mechanize（或其他命令行浏览器）构建您自己的脚本，为您提取信息并将其写回 php 文件等。
3.  从您的服务器端代码调用 perl 脚本/python 模块/php 类/函数。

@DMCS，如果你能想到，你可以做到；）

抱歉，如果这看起来很复杂，DMCS 是正确的，通常你必须手动完成，但理论上你总是可以编写脚本，我想这是我的观点。

选项 2：创建上述 perl/python 脚本并每 59 天在 cron 作业中运行一次，或者你有什么。:)

[http://www.lastcraft.com/browser_documentation.php](http://www.lastcraft.com/browser_documentation.php) -- php“机械化”模块

[http://sourceforge.net/projects/snoopy/](http://sourceforge.net/projects/snoopy/) -- 另一个类似 php 的“机械化”模块

[http://bit.ly/L3PRgR](http://bit.ly/L3PRgR) -- 机械化 perl :)

[http://bit.ly/L3PZgc](http://bit.ly/L3PZgc) -- 机械化 python :)

# reflection - Activator.CreateInstance 带有可选参数

> ID：11002523
> 
> 赞同：26
> 
> 时间：2012-06-12T18:22:47.220
> 
> 标签：reflection, .net-4.0, optional-parameters

有谁知道如何使用只有一个可选参数的构造函数来实例化一个类？

我都试过了

```
(T)Activator.CreateInstance(typeof(T), new object[] { Type.Missing }); 
```

和

```
(T)Activator.CreateInstance(typeof(T), new object[] { }); 
```

没有成功...我收到 MissingMethodException

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-12T19:05:08.083

这有效：

```
(T)Activator.CreateInstance(typeof(T), 
                    BindingFlags.CreateInstance |
                    BindingFlags.Public |
                    BindingFlags.Instance | 
                    BindingFlags.OptionalParamBinding,null, new object[] {Type.Missing },CultureInfo.CurrentCulture); 
```

# c# - 调出 Modal Pop Up Extender 时，UI 会出现一秒钟的空白

> ID：11002525
> 
> 赞同：0
> 
> 时间：2012-06-12T18:22:58.983
> 
> 标签：c#, asp.net

我有一个 asp.net 转发器，它有一个编辑按钮，它会弹出一个模态弹出扩展器 (MPE)，用户可以在其中输入修改后的值，然后在 MPE 中提交更改。单击中继器中的“编辑”按钮后出现 MPE 时 - 重新加载整个页面 - 因为屏幕会空白一秒钟，然后重新填充。这是由于转发器中的操作而触发的 Page_load 吗？如果是这样，我可以防止这种情况。以下是相关代码：

页面：

```
<td><asp:ImageButton runat="server" ID="imgBtEdit" ToolTip="Edit" AlternateText="Edit" CommandName="Edit" CommandArgument='<%#DataBinder.Eval(Container.DataItem,"Id")%>' ImageUrl="~/css/images/icon.png"/></td> 
```

代码背后：

```
 protected void REPEATER_ItemCommand(object source, RepeaterCommandEventArgs e)
        {
          if (e.CommandName == "Edit")
            {  
               MPExtender.Show();            
            }
        }

 protected void Page_Load(object sender, EventArgs e)
        {

           if (!IsPostBack)
            {
                List<T> lst = GetList();              
                REPEATER.DataSource = lst;
                REPEATER.DataBind();
            }
        } 
```

# c# - 从字符串中提取数字以创建仅数字字符串

> ID：11002527
> 
> 赞同：12
> 
> 时间：2012-06-12T18:23:11.450
> 
> 标签：c#, .net, regex, string

我收到了一些格式不正确的数据，需要从字符串中提取数字。我不确定最好的方法是什么。数字可以是任意长度。

```
string a = "557222]]>";
string b = "5100870<br>"; 
```

知道我能做什么，所以我会得到这个：

```
a = "557222"
b = "5100870" 
```

谢谢

解决方案是针对 c# 抱歉。编辑问题以具有该标签

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-12T18:27:28.563

您可以编写一个简单的方法来提取所有非数字字符，但这不会处理浮点数据：

```
public string ExtractNumber(string original)
{
     return new string(original.Where(c => Char.IsDigit(c)).ToArray());
} 
```

这纯粹是提取“数字” - 您也可以使用[Char.IsNumber](http://msdn.microsoft.com/en-us/library/yk2b3t2y)而不是[Char.IsDigit](http://msdn.microsoft.com/en-us/library/7f0ddtxh)，具体取决于您希望的结果。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-19T12:50:24.597

试试这个oneliner：

```
Regex.Replace(str, "[^0-9 _]", ""); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-12T18:26:26.443

对 .NET 不够熟悉，无法获得确切的代码。尽管如此，有两种方法是：

*   将其转换为整数。如果非数字字符在末尾（即`21389abc`），这是最简单的。
*   如果您混合了非数字字符（即`1231a23v`）并希望保留*每个*数字，请使用正则表达式`[^\d]`替换非数字字符。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-12T18:32:36.960

您可以使用一个简单的正则表达式：

```
var numericPart = Regex.Match( a, "\\d+" ).Value; 
```

如果您需要它是一个实际的数值，则可以使用`int.Parse`or `int.TryParse`。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-02-17T22:32:23.797

你可以使用 LINQ。下面的代码将字符串过滤为只有数字的 IEnumerable，然后将其转换为 char[]。然后字符串构造函数可以将 char[] 转换为字符串：

```
string a = "557222]]>";
string b = "5100870<br>";

a = new string(a.Where(x => char.IsDigit(x)).ToArray());
b = new string(b.Where(x => char.IsDigit(x)).ToArray()); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-12T18:33:01.700

试试这个

```
string number = Regex.Match("12345<br>", @"\d+").Value; 
```

这将返回第一组数字。示例：对于输入`"a 123 b 456 c"`，它将返回`"123"`.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-01-18T18:35:53.273

该问题没有明确说明您只想要字符 0 到 9，但是从您的示例集和评论中相信这是正确的并不是一件容易的事。所以这是执行此操作的代码。

```
 string digitsOnly = String.Empty;
        foreach (char c in s)
        {
            // Do not use IsDigit as it will include more than the characters 0 through to 9
            if (c >= '0' && c <= '9') digitsOnly += c;
        } 
```

为什么不想使用 Char.IsDigit() - 数字包括分数、下标、上标、罗马数字、货币分子、带圆圈的数字和特定于脚本的数字等字符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-02T08:10:35.660

这是适用于我的案例的版本

```
 public static string ExtractNumbers(this string source)
    {
        if (String.IsNullOrWhiteSpace(source))
            return string.Empty;
        var number = Regex.Match(source, @"\d+");
        if (number != null)
            return number.Value;
        else
            return string.Empty;
    } 
```

# html - 网站在 Chrome 中严重滞后 在 Firefox 中运行良好

> ID：11002528
> 
> 赞同：4
> 
> 时间：2012-06-12T18:23:14.307
> 
> 标签：html, css

我得到了一个我一直在努力的网站，非常接近我想要的位置，并且在 Firefox 中它运行得很好。然而，当我滚动时，Chrome 会像没有明天一样滞后。我试过禁用框阴影、文本阴影、背景重复、自定义字体等。没有运气。

对不起，我的问题不是更具体，因为我真的不知道*为什么*它滞后。

（PS 它在 IE 中根本不起作用，在我完成所有设计工作之后，我会回去做让它在那里工作的痛苦过程。）

编辑：哇，我本可以发誓我放了一个指向该网站的链接，我绝对是故意的，真的很抱歉！

[http://zimmster.com/frostbyte/](http://zimmster.com/frostbyte/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:41:08.683

盒子阴影是 Webkit 浏览器的一个问题（它是 CSS3 的一部分，仍在实现中）。[这很奇怪，因为这个问题似乎在几个月前](https://bugs.webkit.org/show_bug.cgi?id=22102)就已经解决了。

我从 post.css 中删除了这些行（它并没有真正影响视觉效果）并修复了延迟。（在 Chrome 21 上测试）

```
-webkit-box-shadow: 1px 1px 10px #202020;
box-shadow: 1px 1px 10px #202020; 
```

# c# - DataGridView 中重新创建的列

> ID：11002532
> 
> 赞同：0
> 
> 时间：2012-06-12T18:23:34.603
> 
> 标签：c#, winforms, datagridview

我有一个 Windows 窗体中的 DataGridView。我为此 DataGridView dgv 定义了 5 列。

存储过程返回的数据表与此 DataGridView 绑定。

```
 DataTable table1 = returned by a stored procedure in C#;
         dgv.DataSource = table1;
         dgv.AutoGenerateColumns = false;
         dgv = System.Windows.Forms.DataGridViewEditMode.EditProgrammatically; 
```

然后在另一个按钮事件中。我想重新绑定 DataGridView 一个数据源。

```
 DataTable dt1 = new DataTable(); 
```

然后

```
 DataRow dr = dt1.NewRow();
            dr["Interval"] = txtBox1.Text;
            dr["Count"] = txtBox2.Text;
            dr["AgeBegin"] = txtBox3.Text;
            dr["AgeEnd"] = txtBox4.Text;
            dr["Gender"] = txtBox5.Text;
            dt1.Rows.Add(dr);
            dgv.DataSource = dt1; 
```

dt1 只有一行。现在 dgv 显示 10 列。前 5 列是空的，后 5 列是真实数据。

为什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:30:44.337

您需要先设置`AutoGenerateColumns`为，`false` **然后再将**其分配给`DataSource`

```
DataTable table1 = returned by a stored procedure in C#;
dgv.AutoGenerateColumns = false; // Before assigning the DataSource
dgv.DataSource = table1;
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:25:24.040

如果没有放置数据的位置，Datagridviews 会自动在您身上添加行。除非您告诉它不要这样做，否则这不是设计师的选择。

```
dgv.AutoGenerateColumns=false; 
```

没关系你已经有了这个。

您不应该这样做，但您是否尝试在重新绑定之前清除 dgv，只是为了找出问题？

您是否在 datagridview 中预定义了列？我建议将其留空以启动并允许自动生成列，至少在您找出缺陷之前

# mysql - 协助 MySQL SELECT

> ID：11002533
> 
> 赞同：0
> 
> 时间：2012-06-12T18:23:41.703
> 
> 标签：mysql

我坐在这个 SELECT 语句中

我将一种产品分成 5 种产品，每个产品都有一列，说明您应该订购多少才能以该价格获得它。

我想要的是，例如，如果我订购 54，我应该从 50 得到价格。

如果我要订购 100 或 101 等。我应该从 100 获得价格。等等。

到目前为止，这是我的 SELECT ..

```
SELECT  
entity.entity_id AS "ID",
entity.value AS "Name",
qty_price.qty AS "Pcs",
qty_price.value AS "Price"
FROM `mg_catalog_product_entity_tier_price` qty_price 
JOIN `mg_catalog_product_entity_varchar` entity 
ON qty_price.entity_id = entity.entity_id 
WHERE entity.entity_id = 300 
AND entity.value = (SELECT name FROM `mg_catalog_product_flat_1` WHERE `mg_catalog_product_flat_1`.entity_id  = entity.entity_id)
LIMIT 10; 
```

编辑：这是回复评论中提到的屏幕截图： ![语句和输出的屏幕截图](../Images/05145675fec5a012cfd3aea4e7e56f85.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:42:49.497

你可能需要这样的东西（注意，我不是指你的确切表格）：

```
SELECT 
    item_id, 
    item_quantity, 
    (
        SELECT base_price 
        FROM prices p 
        WHERE 
            o.item_id = p.item_id AND 
            o.item_quantity >= p.base_quantity 
        ORDER BY p.base_quantity
        LIMIT 1
    ) FROM orders o 
```

这里的 orders 是你的订单表，它有 item_id 和数量。价格是一个静态表，其中包含该数量的 item_id、数量和每件商品的基本价格。因此，如果您有 `17 6`订单（意味着您要购买 6 个 id=17 的商品）并且`17 1 3.50`, `17 5 3.29`, `17 100 3.01`( `item_id, quantity, base_price`) 您将得到`17 6 3.29`结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T18:37:44.780

您可能需要重新考虑您的餐桌设计。您可能希望有一个 `mg_catalog_product_entity_tier_price`表格，列出可以订购以获得该价格等级的最小和最大数量的项目。然后陈述很简单。

否则，这将涉及使用类似`select max(prices.items_required) from prices where order_qty<items_required_for_tier`. 这将从价目表中找到最大的商品数量，其中订购的商品数量少于实际订单大小。

# java - Java + SSH + Postgres

> ID：11002535
> 
> 赞同：3
> 
> 时间：2012-06-12T18:23:45.010
> 
> 标签：java, postgresql, ssh

我们正在实施一个大学项目：Java 中的拼车服务。

我们需要解决一个与“如何管理 postgres 服务器”相关的问题：PostgreSQL 数据库配置在名为“golem”（130.136.4.sth）的实验室服务器中，只能通过同一子网（130.136.4.0）中的终端访问。我们有四个帐户（我们的），通过我们可以建立到主机的 ssh 连接。

是否可以通过 SSH 对 JAVA 中的 Postgres DB 进行 SQL 查询？

谢谢 :) 戴维德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:29:50.610

如果这只是为了开发，你可以使用 ssh 端口转发来访问数据库，就像它是本地安装的一样。如何启用端口转发取决于您使用的客户端软件，例如 openssh 有一个命令行开关（-L）：

```
ssh user@host -L localport:remotehost:remoteport 
```

此命令将使`remoteport`on `remotehost`（尽管只能通过访问）在您的计算机上`host`可用。`localport`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:39:48.450

看看其他建议的答案，因为它们似乎更容易完成您的需求。

但是，如果您真的需要为您的实验室作业使用 Java 实现命令提交，您可以查看此处的 JSch（Java 安全通道）库：[http](http://www.jcraft.com/jsch/) ://www.jcraft.com/jsch/示例在此处[http://www.jcraft.com/jsch/examples/](http://www.jcraft.com/jsch/examples/)

有了它，您可以提交 ssh 命令并通过 Java API 执行任何类型的操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:26:29.280

如果您运行“ssh”，然后运行该命令在远程主机上执行的任何命令。因此，您应该能够通过 ssh 以批处理模式运行预烘焙查询。

考虑进行密钥生成和密钥交换以启用无密码 ssh 执行。

示例（这只是将目录列表转储到您的终端）：

```
ssh me@mybox ls 
```

# android - Android - 从 RandomAccessFile (byte[]) 播放 mp3

> ID：11002537
> 
> 赞同：0
> 
> 时间：2012-06-12T18:23:58.740
> 
> 标签：android, mp3, media-player

我的 mp3 在 byte[] 中（从 RandomAccessFile 读取）：

```
RandomAccessFile raf=new RandomAccessFile("sdcard\myfile.mf", "r" );;
byte[] data = new byte[10000];
raf.read(data, 300, 10300); 
```

我想在我的设备上播放它，我该怎么做？有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:03:04.583

恕我直言，你不能。但是您可以将 FileDescriptor 传递给播放器，而不是从文件中读取它。这将播放从字节位置 300 开始且长度为 10000 字节的 mp3：

```
RandomAccessFile raf=new RandomAccessFile("sdcard\myfile.mf", "r" );
MediaPlayer player = new MediaPlayer();
player.setDataSource(raf.getFD(), 300, 10000);
player.prepare();
player.start(); 
```

我认为您在 read 调用中也有一个错误，因为这将从文件开头读取 10300 个字节并将其放入从 300 开始的数据。意思是：在数据中您将有 300 个字节未设置（垃圾），然后文件的前 9700 个字节（其余的不适合缓冲区）

# google-app-engine - 数据存储表单数据插入帮助请

> ID：11002539
> 
> 赞同：1
> 
> 时间：2012-06-12T18:24:40.967
> 
> 标签：google-app-engine, google-cloud-datastore

目标是将“姓名”、“心情”变量和日期输入数据存储区。尽管我多次提交 Web 表单，但我在 Datastore 中看到的所有有价值的只是一个看起来像加密的实体密钥和没有数据的访客姓名心情日期索引。

这是表格

名：

选择

好的

坏的

公平的

在 DS Console 中运行它给了我

> ameError：未定义名称“访客”

```
q = Visitor.all()
q = db.GqlQuery("SELECT * FROM Visitor")  #in DS Console
results = q.fetch(2)
for p in results:
    print "%s" % (p.name)

#DATASTORE v v
class Visitor(db.Model):                   # index.py
    name = db.StringProperty()
    mood = db.StringProperty()
    date = db.DateTimeProperty(auto_now_add=True)

 class Post(webapp.RequestHandler):           #yaris
  def get(self):
    visitor_db = Visitor()
    visitor_db.name = self.request.get("name")
    visitor_db.mood = self.request.get("mood")
    visitor_db.put() 
```

和 index.yaml：

```
indexes:                              # seems like this is OK

-   kind: Visitor 
    properties:
    -   name: name
    -   name: mood
    -   name: date
        direction: asc 
```

提交表单时也会在终端中出现 405 错误。

**编辑**：得到这个工作与以下; 感谢帮助。

```
class MainPage(webapp.RequestHandler):
    def get(self):
        self.response.out.write("""<html><body>
<form action="/" method="post">
                           # form is here
</body></html> """) 

        name = self.request.get("name")
        name = name.capitalize()
        mood = self.request.get("mood")
        localtime = time.localtime(time.time())
        mon = localtime[1] # MONTH
        h = localtime[3] # HOUR

        # if/elif statements with %s specifiers follow...still in MainPage class v v

> def post(self):
>         name = self.request.get("name")
>         name = name.capitalize()
>         mood = self.request.get("mood")
>         info = Visitor(name = name, mood = mood)
>         info.put()
>         self.redirect("/index.py") 
```

这会将数据存储在 Datastore 中！现在，我唯一需要解决的问题是**让表单响应打印在原始表单页面 (index.py)**中，在正确的 div 中，我在表单旁边有浮动。相反，表单提交的响应出现在不同的、未格式化的页面上。我已经使用了 self.redirect 和以下内容，但我需要一些指导如何实现这一点，或者即使我是正确的路径，也要让表单响应打印在表单页面上，而不是在不同的页面上：

# 创建的处理程序

```
 redirectionHandler = urllib2.HTTPRedirectHandler() 

    # 2 apply the handler to an opener
    opener = urllib2.build_opener(redirectionHandler)

    # 3\. Install the openers
    urllib2.install_opener(opener)

    request = urllib2.Request("http://*my url*", #commented out     data=urllib.urlencode({'key':'value'}))
    response = urllib2.urlopen(request) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:03:14.890

看起来您没有创建任何实体来实现`put()`. 试试这个开始：

```
class Post(webapp.RequestHandler):   
  def post(self):
    visitor_db = Visitor()
    visitor_db.name = self.request.get("name")
    visitor_db.mood = self.request.get("mood")
    visitor_db.put() 
```

上面的代码将创建一个新条目并存储它。

我更新了我的答案，如果您使用表单提交数据，那么您应该将其更改为`get(self)`，`post(self)`因为浏览器`POST`在表单提交时请求请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:06:52.213

看起来你有正确的想法，但你应该调试 ApplyHandler.post()，很可能你的问题就在那里。您可能会丢失请求中的 post 数据，并且 newuser 对象可能会使用一堆 None 数据进行初始化。

# java - JPA 懒惰设计建议

> ID：11002540
> 
> 赞同：1
> 
> 时间：2012-06-12T18:24:42.110
> 
> 标签：java, hibernate, jakarta-ee, jpa, ejb

我想知道在数据库中存储大型对象树的最佳方法是什么。到目前为止，我有以下内容：

```
@Entity
class Element1 {
    @OneToMany(fetch=FetchType.LAZY)
    Collection<Element2> elements;
    ....
} 
```

fetch 类型设置为 LAZY 因为 Element2 并不总是需要并且可以非常巨大（其他元素集合的集合的集合）。

问题是当我从 servlet 检索 Element2 类型的元素时（会话已关闭），我（当然）得到一个惰性异常。第一个解决方案是在查询中急切地获取元素集合，但我怎么知道什么时候做呢？我是否必须创建方法：

```
Element1 get(Integer Id);
Element1 getEager(Integer Id); 
```

我想知道是否可以从 Element1 中删除字段元素并“反转”映射：

```
class Element2 {
     @ManyToOne
     Element1 owner;

     .....
} 
```

然后有两种方法：

```
Element1 get(Integer Id);
Collection<Element2> getElements(Element1 owner); 
```

做这些事情的最好方法是什么？

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:49:39.467

你可以做你在问题中描述的一切，但第二个选项不是我会做的。如果您需要从 element1 导航到它的 element2 列表，那么拥有 OneToMany 关联是最自然且显而易见的事情。请注意，关联可以是双向的：您可以选择同时从父节点导航到子节点，以及从子节点导航到父节点。

我会采用您的第一个解决方案：一个只返回 element1 的方法，以及另一个返回 element1 及其子项的方法。不过，我会为这些方法选择更有意义的名称。

# ruby-on-rails - 未知操作：无法为 RegistrationsController 找到操作“创建”？

> ID：11002553
> 
> 赞同：2
> 
> 时间：2012-06-12T18:25:46.367
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, devise

我决定制作一个 RegistrationsController，这样我就可以在注册时将用户重定向到特定页面。唯一的问题是用户甚至没有被创建，因为我得到了错误：

```
Started POST "/users" for 127.0.0.1 at 2012-06-12 14:01:22 -0400

AbstractController::ActionNotFound (The action 'create' could not be found for R
egistrationsController): 
```

我的路线和控制器：

```
devise_for :users, :controllers => { :registrations => "registrations" }
  devise_scope :user do
    get "/sign_up" => "devise/registrations#new"
    get "/login" => "devise/sessions#new"
    get "/log_out" => "devise/sessions#destroy"
    get "/account_settings" => "devise/registrations#edit"
    get "/forgot_password" => "devise/passwords#new", :as => :new_user_password
    get 'users', :to => 'pages#home', :as => :user_root
  end

class RegistrationsController < ApplicationController
  protected

  def after_sign_up_path_for(resource)
    redirect_to start_path
  end

  def create # tried it with this but no luck.

  end
end 
```

这里发生了什么？这是如何解决的？

**更新**

* * *

我把`create`动作放在外面，`protected`但现在我得到了一个`Missing template registrations/create`. 删除动作让我回到`Unknown action: create`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T20:31:50.290

你的`create`方法是`protected`，这意味着它不能被路由到。

将您的`create`方法移出您的`protected`方法：

```
class RegistrationsController < ApplicationController

  def create

  end

  protected

  def after_sign_up_path_for(resource)
    redirect_to start_path
  end

end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T21:07:29.377

看起来问题出在您设置`RegistrationsController`. 如果您查看[解释如何执行此操作的设计 wiki 页面](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-on-successful-sign-up-%28registration%29)，您将看到以下示例：

```
class RegistrationsController < Devise::RegistrationsController
  protected

  def after_sign_up_path_for(resource)
    '/an/example/path'
  end
end 
```

请注意，`RegistrationsController`继承自`Devise::RegistrationsController`而不是`ApplicationController`。这样做是为了让您的自定义控制器从 Devise 继承所有正确的行为，包括`create`操作。

# ruby-on-rails - 为什么 'coffee-rails' 在 :assets 组中，而 'jquery-rails' 在 :default 组中的新 Rails 项目的 Gemfile 中？

> ID：11002554
> 
> 赞同：3
> 
> 时间：2012-06-12T18:25:47.723
> 
> 标签：ruby-on-rails, bundler, asset-pipeline

如果组中的 gem`:assets`不包含在生产环境中（根据[本文](https://stackoverflow.com/questions/7351607/how-is-the-assets-group-in-rails-3-1-handled-by-bundler)），那么为什么默认`coffee-rails`在组中？`:assets`我应该把我的其他`*-rails`宝石放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:20:54.053

在生产环境中，coffeeScripts 将被预编译，因此没有必要在[生产环境中包含该 gem](http://guides.rubyonrails.org/asset_pipeline.html#in-production)

如果您想包含用于生产的 gem，您应该创建另一个组

```
group:production do
    gem 'mysql'
    gem 'sinatra'
end 
```

[并让 bundler 安装这里](https://stackoverflow.com/a/7806673/1064025)提到的这个组

# python - 列表索引必须是整数 python

> ID：11002560
> 
> 赞同：0
> 
> 时间：2012-06-12T18:26:09.170
> 
> 标签：python

我有一个字典，user_dict，并为每个用户值创建一个列表，这个列表包含 json 对象：

```
user_dict[user].append(obj) 
```

现在我想打印这个字典中的所有项目，但是只从列表中的每个项目中选择一些字段，所以字典是这样的，我这里只列出一个用户

```
{u'user1':[{u'host_dst': {u'addr': u'195.149.144.60', u'vid': 0, u'port': 80},

            'usi': '7932fee11ba72ae84180044d75521368', u'host_src': {u'addr': u'83.233.59.215', 

            u'vid': 0, u'port': 51068},item2...]} 
```

我所做的是：

```
for item in user_dict.values():
    fd_out1.write("%s\t%s\n" % (item["host_dst"][addr],item["host_dst"]["vid"])) 
```

它返回：

```
TypeError: list indices must be integers, not str 
```

比如之前我用 obj["host_dst"][addr] 来表示值 195.149.144.60，效果很好，但是这里当我想打印一些东西的时候就不行了。任何人都可以帮忙吗？非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:38:35.003

你错过了帖子中的括号

正确格式化后，您的数据如下所示

```
{
  u'user1': [
                {
                  u'host_dst': {
                                  u'addr': u'195.149.144.60',
                                  u'vid': 0,
                                  u'port': 80
                               },

                  'usi': '7932fee11ba72ae84180044d75521368',
                  u'host_src': {
                                  u'addr': u'83.233.59.215', 
                                  u'vid': 0, 
                                  u'port': 51068
                                }
                 },
                item2,
                ...
           ]
} 
```

所以`item`循环中的每个都是`list`

你应该打印出类似的东西`item[0]["host_dst"][addr]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:29:29.983

的值`user_dict`是列表，而不是字典。不过，它似乎可能是一个只有一个项目的列表，所以试试

```
for item in user_dict.values():
    fd_out1.write("%s\t%s\n" % (item[0]["host_dst"][addr],item[0]["host_dst"]["vid"])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:31:44.303

您检索的第一个项目是以下内容，它是 a`list`并且您无法使用 a`string`中的 a访问其元素`dict`。

```
[{u'host_dst': {u'addr': u'195.149.144.60', u'vid': 0, u'port': 80},
        'usi': '7932fee11ba72ae84180044d75521368', u'host_src': {u'addr': '83.233.59.215', 
        'u'vid': 0, u'port': 51068},item2...]} 
```

你应该使用一个`integer`.

# uiview - Cocos2d 2.0 添加 UIView 到 CClayer openglview 已弃用

> ID：11002562
> 
> 赞同：11
> 
> 时间：2012-06-12T18:26:20.903
> 
> 标签：uiview, cocos2d-iphone, deprecated, cclayer

我在向 cocos2d v2.0 添加 UIView 时遇到了一些麻烦，因为不推荐使用 openGlView 我无法向其中添加视图。我四处寻找另一种方法来做到这一点，但我找不到任何东西。

谁能告诉我在所有 cc 层前添加 UIView 的新方法？或者我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-12T18:44:19.553

使用它而不是 openGLView：

```
[[CCDirector sharedDirector] view]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-17T13:43:11.860

这对我有用！

[[[CCDirector sharedDirector] view] addSubview:myUiView];

考虑到 openGLView 已被弃用！

# javascript - 有效网页在 WebKit 浏览器和 IE 中显示，但不是 Firefox

> ID：11002563
> 
> 赞同：2
> 
> 时间：2012-06-12T18:26:22.060
> 
> 标签：javascript, html, css

我的网站[http://derek.genevievehoward.com/](http://derek.genevievehoward.com/)不会在 Firefox 中显示，即使 HTML 和 CSS 是有效的。正文`display:none;`在 CSS 中，但我的脚本应该使用 Javascript 淡入正文。

当我查看 Firefox 中的开发人员工具时，它会加载所有脚本、CSS 和 HTML，但似乎没有发生淡入。我的猜测是页面加载时 Javascript 不会自动执行，但我不知道为什么会这样。

我尝试注释掉我的 CSS 链接，然后我的链接将使用 jQuery 加载到其他内容中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:30:36.047

您调用 script.js 两次，我建议将第一个从标题中取出。您还应该将 jquery 函数放在文档就绪函数中。

例如

```
$(document).ready(function() {
$(this).css("display", "block");
    //Fade in
    $("body").fadeIn(2000, function () {
        notify("My page is currently being changed. Expect brokenness.");
        $("article").fadeIn(1000);
    });

    //Link fades
    $("nav a").hover(function () {$(this).fadeTo(300,1)},function () {$(this).fadeTo(300,.3)});

    //notifications
    function notify(message) {
        document.getElementById("notifyText").innerHTML = message;
        $("#notification").fadeIn(500).fadeOut(4000);
    }

    //fade new content
    function fadeLoad(newUrl) {
        $("article").fadeOut(1000,function () { 
            $("article").load(newUrl, function () { 
                $("article").fadeIn(1000);
                });
        })
    }
    }); 
```

# php - MySql 自引用查询

> ID：11002565
> 
> 赞同：1
> 
> 时间：2012-06-12T18:26:24.523
> 
> 标签：php, mysql

我有一个名为 [clients] 的下表，其列和值如下：

```
+--------+-----------+--------------+----------------+
| uid    | client_id | client_input |  input_value   |
+--------+-----------+--------------+----------------+
| 1      |   22      |  City        |  Seattle       |
+--------+-----------+--------------+----------------+
| 2      |   45      |  City        |  Ojai          |
+--------+-----------+--------------+----------------+
| 3      |   22      |  State       |  OR            |
+--------+-----------+--------------+----------------+
| 4      |   45      |  State       |  CA            |
+--------+-----------+--------------+----------------+
| 5      |   65      |  City        |  Orlando       |
+--------+-----------+--------------+----------------+
| 6      |   74      |  State       |  AB            |
+--------+-----------+--------------+----------------+
| 7      |   65      |  State       |  FL            |
+--------+-----------+--------------+----------------+
| 8      |   12      |  City        |  Los Angeles   |
+--------+-----------+--------------+----------------+
| 9      |   12      |  State       |  CA            | 
```

我需要**PHP/MySql 查询**，该查询将**列出****input_value**列中位于“CA”状态的所有城市。显然，通用标识符是始终匹配的**client_id**，因为如果客户端在**“洛杉矶”**，则相同的 client_id 也在**input_value**列中包含**“CA”**值的行中。该表有超过 800 万行，任何快速执行的 equerry 都受到高度赞赏。

 **脑筋急转弯，截止日期快到了，无法更改表设计，需要帮助，拜托！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:39:22.473

```
SELECT *
FROM table AS t1 INNER JOIN table AS t2 ON t1.client_id = t2.client_id
WHERE t1.client_input = 'City' AND t2.client_input = 'State' AND t2.input_value = 'CA' 
```

**注意：**这可能需要一些调整，并且可能会进行优化。但它应该让你开始并冷却你的大脑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:42:31.817

我没有测试这个查询。但是这个或类似的查询应该可以工作。我首先使用了两个子查询来避免不必要的连接。第一个子查询过滤州“CA”，第二个子查询过滤城市。如果您想要按州列出所有城市的表，请从子查询 a 中删除“CA”子句。

```
SELECT b.input_value AS city, a.input_value AS state
FROM 
  (SELECT client_id, input_value
   FROM tablename
   WHERE input_value = 'CA'
   AND client_input = 'State')
  AS a,
  (SELECT client_id, input_value
   FROM tablename
   WHERE client_input = 'City')
  AS b
WHERE a.client_id = b.client_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:46:53.620

```
SELECT distinct 
      t2.Input_Value as City
   from
      YourTable t1
         JOIN YourTable t2
            on t1.client_ID = t2.Client_ID
           AND t2.client_input = 'City'
   where
          t1.client_input = 'State'
      AND t1.Input_Value = 'CA' 
```

我会有两个索引......（Client_Input，Input_Value）和（Client_ID，Client_Input，Input_Value）**

# windows-phone-7 - 如何模拟 2d 3D 样（放下）

> ID：11002571
> 
> 赞同：-1
> 
> 时间：2012-06-12T18:26:32.383
> 
> 标签：windows-phone-7, 3d, xna, 2d

如果我有一个文本和图像网格，比如日历视图。如果我希望整个网格放下 45 度并且仍然能够响应手指单击/滚动，该怎么做？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T21:26:52.170

有一个非常简单的解决方案。如果您使用 Expression Blend 打开项目，一旦您选择了网格，转到属性选项卡，向下滚动到“变换”，应该有一个名为“旋转”的属性，只需更改 X：Y：Z：值直到网格旋转到您想要的样子。它的行为完全符合您的预期。

这是 XAML 代码：

```
<Grid.Projection>
    <PlaneProjection RotationX="-43"/>
</Grid.Projection> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:42:47.617

好的，如果你在 XNA 中这样做，你会想要使用 Billboard。恐怕我还不需要广告牌，所以我不能给你细节，但像往常一样，有一个[Riemers 教程](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series4/Billboarding.php)。现在，特别是您想要一个带有控件的交互式广告牌。如果您以前从未有过 3D 体验，这将会很复杂。以下是您要执行的操作：

1.  像平常使用 SpriteBatch 一样绘制控件/文本，但事先将 GraphicsDevice 的 RenderTarget 设置为新的 RenderTarget，然后保存。[在此处](http://msdn.microsoft.com/en-us/library/bb198872%28v=xnagamestudio.31%29.aspx)查找有关更改渲染目标的文档。请记住在绘制控件后将其重新设置。
2.  现在使用显式转换将 RenderTarget 转换为 Texture2D：`Texture2D myTex = (Texture2D)myRenderTarget;`
3.  在广告牌上绘制此纹理。
4.  现在到了棘手的部分：您需要使用一种称为“拾取”的技术来确定用户在 3D 空间中单击的位置。App Hub 有一些挑选教程，但它们是针对复杂模型的。由于广告牌仅使用具有 2 个三角形的平面，因此在这种情况下它们不会以任何精度工作，而这是您需要的。相反，我建议[使用 Viewport.UnProject 来选择飞机](http://www.enchantedage.com/xna-picking)。

从本质上讲，您将需要一个好的系统来跟踪可点击的东西在 3D 空间中广告牌上的位置。如果你知道的话，你可以使用平面方程（我想我在微积分 III 中学到了这些）。如果您只需要基本功能，则可以使用这些方程式仅跟踪按钮的中心，然后对点击进行半径测试，但除非您的按钮是圆形，否则这并不完全准确。

如果您不知道，当您尝试在 3D 世界中应用 2D 概念时，事情会很快变得复杂。

# c# - 在 Visual Studio 中查看 LINQ 执行的 SQL 的方法？

> ID：11002573
> 
> 赞同：10
> 
> 时间：2012-06-12T18:26:34.090
> 
> 标签：c#, sql, visual-studio-2010, tsql, linq-to-sql

> **这个问题在这里已经有了答案：**
> [查看 linq-to-sql 产生的 sql](https://stackoverflow.com/questions/1235758/view-sql-that-linq-to-sql-produces) *3 个答案*

我想知道在运行 LINQ to SQL 查询时是否有办法查看在 Visual Studio 2010 Ultimate 中针对数据库执行的 T-SQL。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-12T18:28:18.003

如果您有 Visual Studio Ultimate，您可以在调试时在 IntelliTrace 窗口中查看您的应用程序运行的每个 SQL 查询。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-12T18:26:59.673

您可以使用 SQL Server Profiler 来执行此操作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-12T18:29:32.633

你基本上有两个选择：

1.) 使用分析器，AnjLab 免费提供一个[http://anjlab.com/en/projects/opensource/sqlprofiler](http://anjlab.com/en/projects/opensource/sqlprofiler)

2.) 使用 LinqPad（又是一个免费的解决方案）[http://www.linqpad.net/](http://www.linqpad.net/)

你真的不需要 Ultimate VS 或像某些人已经建议的那样付费的东西......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-12T18:29:25.663

您可以使用 DataContext 的[Log 属性](http://msdn.microsoft.com/en-us/library/bb386961.aspx)。

```
db.Log = Console.Out;
var custQuery =
    from cust in db.Customers
    where cust.City == "London"
    select cust;

foreach(Customer custObj in custQuery)
    Console.WriteLine(custObj.CustomerID); 
```

# mysql - 比较最接近交易日期的有效历史记录

> ID：11002576
> 
> 赞同：1
> 
> 时间：2012-06-12T18:26:45.587
> 
> 标签：mysql, sql, sql-server-2008, history, audit

我正在尝试进行审计​​，将当天的实际汇率与当天应支付的历史汇率进行比较。

我创建了一个临时表来从历史中获取所需的信息，并将其称为 PPDAUDIT。这是审计 SQL

```
SELECT EMPLOYEE, PAY_SUM_GRP, HOURS, RATE, TR_DATE, DATE, CORRECT_RATE
FROM 
( 
SELECT  A.EMPLOYEE 
    , A.PAY_SUM_GRP
    , A.HOURS
    , A.RATE
    , A.TR_DATE
    , A.DATE 
    , CASE
        WHEN (MAX((B.BEG_DATE) < A.TR_DATE))
        AND B.FLD_NBR = '730'
        THEN B.N_VALUE/C.ANNUAL_HOURS
    END AS 'CORRECT_RATE'
FROM `PPDAUDIT` AS A 
    INNER JOIN `[dbo]_[hrhistory]`    AS B ON B.EMPLOYEE = A.EMPLOYEE
INNER JOIN `[dbo]_[employee]`     AS C ON C.EMPLOYEE = A.EMPLOYEE
WHERE A.RATE <> (B.N_VALUE/C.ANNUAL_HOURS) 
) AS D
WHERE CORRECT_RATE IS NOT NULL 
```

我期望得到的是当时较少但最接近交易日期的历史记录，然后只得到那些历史和过渡不匹配的记录。它拉的是第二接近的。

示例：如果交易发生在 2012 年 1 月 1 日，并且在 2011 年 12 月 31 日、2011 年 10 月 10 日和 2011 年 7 月 24 日有历史记录，则它会在 10 月 10 日而不是 12 日提取附加到历史记录的汇率/31 这是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:38:54.833

在 SQL Server 2008 中，您可以使用`outer apply`来搜索最新的历史记录。例如，这将搜索交易日期之前的最后一个汇率：

```
select  *
from    TransactionUnderInvestigation tui
outer apply
        (
        select  top 1 *
        from    RateHistory rh
        where   rh.EmployeeId = tui.EmployeeId
                and RateStartDate <= tui.TransactionDate
        order by
                RateStartDate desc
        ) hist 
```

# android - 在 Android 中创建“自定义 URI”意图的最佳方式

> ID：11002578
> 
> 赞同：1
> 
> 时间：2012-06-12T18:26:52.837
> 
> 标签：android, android-intent

我听说使用你自己的 URI 方案 a) 会导致命名空间冲突 b) 其他人可以创建拦截相同 URI 方案的应用程序。

因此，`myapp://whatever`您应该使用意图 uris（从 I presume 开始`intent://`），而不是使用 URI 方案。

现在当然在谷歌上搜索“intent://”会发现很多关于`intent`s 的信息，但没有关于 uri 方案/拦截的信息。

如果有人能对此有所了解，我将不胜感激。具体来说，我想创建一个应用程序来联系 OAuth api，并且不希望其他人能够创建可以“拦截”我调用的相同 uri 方案的应用程序。例如，任何人都可以编写一个响应的android 应用程序，但如果我使用该方法`myapp://something`，显然他们不能。`intent://`

非常感谢

# linux - 在 bash 脚本中更改目录

> ID：11002580
> 
> 赞同：1
> 
> 时间：2012-06-12T18:27:03.463
> 
> 标签：linux, bash

我现在正在运行一个 bash 脚本，我需要在其中更改我的目录并从更改的目录执行脚本。

我想将我的文件夹更改为`myfolder`并运行`script.sh`到该特定文件夹。

有什么办法可以在 Bash 中做到这一点？

我已经试过了

```
cd myfolder
./script.sh 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:28:43.807

尝试

```
cd myfolder
./script.sh 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:29:49.453

简单得要命

`(cd myfolder && ./script.sh)`

希望这有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:29:10.187

为什么不简单地试试这个：

```
cd /absolute_path/myfolder
./script.sh 
```

指定绝对路径使其独立于脚本的发布位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T00:40:37.017

脚本相对于什么位置`myfolder`？发布的所有这些答案都应该有效。例如，如果`myfolder`在根目录中，并且脚本在其中，则`/path/to/file.sh`您需要先转义。

```
cd ../../myfolder
./script.sh 
```

`ls`您也可以通过在脚本中添加一个来检查这一点。如果你没有看到`myfolder`，那么你就在错误的位置。

你的脚本是可执行的吗？尝试 a`chmod +x script.sh`并再次运行它。

您收到什么错误消息？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T18:32:36.830

可能是因为“myfolder”中的其他脚本没有执行权限。

```
cd myfolder
chmod 755 myscript
./myscript.sh 
```

# php - 根据数组中的值检查值并使用 PHP 返回键

> ID：11002581
> 
> 赞同：2
> 
> 时间：2012-06-12T18:27:09.750
> 
> 标签：php, arrays, if-statement, comparison, logic

**问题：**

我有一个在 $record 中设置的值，例如 1.69。然后我有一个包含不同等级和值的数组。我想先将 $record 与最高值进行比较，看看它是否高于或等于，如果不是，则转到低于它的值，依此类推。

**PHP代码：**

```
$record1 = '1.69';
$record2 = '2.90';
$record3 = '3.40';
$record4 = '3.80'; 
```

**数组（$等级）：**

```
Array
(
    [G] => 2.8
    [VG] => 3.8
) 
```

**设想：**

$record1 应该与数组中的最大值进行比较，这将返回 false。它将与低于最高值的值进行比较，该值也将返回 false。如果两者都返回 false，则返回字符串 'U'，否则返回键 G 或 VG。

*   记录 1 应产生 U。
*   记录 2 应产生 G。
*   记录 3 应产生 G。
*   记录 4 应产生 VG。

**问题：**

我可以做很多 if 语句作为解决方案，但我想知道是否有任何聪明的方法可以更好地进行此检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:36:11.740

首先，尝试按降序对数组进行排序。

然后，在 while 循环中，检查初始数组元素（使用[key()](http://in2.php.net/key)函数）是更大还是更小，如果为 FALSE，则使用[next()](http://php.net/manual/en/function.next.php)函数移动到下一个元素并进行比较。

当您想要的比较返回 TRUE 时，循环应该结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:36:46.120

使用简单的逻辑：

```
$grades  = array('G' => 2.8, 'VG' => 3.8);
$records = array(1.69, 2.9, 3.4, 3.8);

foreach ($records as $v) {
    $res = ($v < $grades['G'] ? 'U' : ($v < $grades['VG'] ? 'G' : 'VG'));
    echo "$v = $res\n";
}

/*
1.69 = U
2.9 = G
3.4 = G
3.8 = VG
*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:33:10.277

我会编写一个函数来遍历你的`$grades`数组，设置结果的值并在值大于输入时立即中断。

像这样的东西（未经测试）：

```
function returnGrade($record, $grades)
{
  $return = 'U';
  foreach  ($grades as $key => $value)
  {
    if ($record >= $value)
    {
      $return = $key;
    }
    else
    {
      break;
    }
  }
  return $return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:36:40.680

你可以这样做

首先按记录数循环旋转，并通过此函数检查值是否在数组中`in_array()`

如果找到结果，则通过此函数获取密钥`array_search("value_to_search","array_variable");`

希望这对你有帮助

# java - Java中的ThreadLocal初始化？

> ID：11002583
> 
> 赞同：1
> 
> 时间：2012-06-12T18:27:18.830
> 
> 标签：java

我正在构建一个具有 ThreadLocal 作为实例变量的单例，这个单例有一个可以被多个线程访问的方法，并且它是延迟实例化的。现在我正在考虑这样的事情：

```
static final ThreadLocal<HashMap> bindingContext = new ThreadLocal<HashMap>(); 
```

但是我不确定这是否是一个好主意，我也可以选择将其设为实例变量，因为我正在使用它（正如我在单例中所说的那样）。

所以问题是，初始化该类变量的最佳位置在哪里，或者它应该是一个类变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:37:26.380

保证静态初始化程序以线程安全的方式执行。JLS 特别提到了这一点：

> 因为 Java 编程语言是多线程的，所以类或接口的初始化需要仔细同步，因为其他一些线程可能同时尝试初始化同一个类或接口。还有一种可能性是，作为该类或接口初始化的一部分，可以递归地请求类或接口的初始化；例如，类 A 中的变量初始化器可能会调用不相关的类 B 的方法，而后者又可能调用类 A**的方法。Java 虚拟机的实现负责**通过使用以下程序。

请参阅 JLS 的第[12.4.2](http://docs.oracle.com/javase/specs/jls/se5.0/html/execution.html#12.4.2)节，其中详细描述了这件事。

**编辑**：你正在尝试的是非常好的。来自 ThreadLocal 的 javadocs：

> ThreadLocal 实例通常是希望将状态与线程相关联的类中的私有静态字段（例如，用户 ID 或事务 ID）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T15:16:45.843

静态成员将确保创建一个新的 ThreadLocal，但对于每个新线程，该 ThreadLocal 的初始值将为空。您可以通过重写 initialValue() 方法轻松地提供特定于线程的初始值。一种方法是使用匿名内部类 EG

```
static final ThreadLocal<HashMap> bindingContext = new ThreadLocal<HashMap>() {
    @Override protected HashMap initialValue() {return new HashMap();}
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-10T04:09:04.887

使用Lamda，我们可以这样写：

```
private ThreadLocal<Map<String,String>> bindingContext = ThreadLocal.withInitial(HashMap::new); 
```

# android - 查找输入的值是否存在于表中

> ID：11002585
> 
> 赞同：1
> 
> 时间：2012-06-12T18:27:27.223
> 
> 标签：android, sqlite

我正在尝试查找用户名是否存在于数据库中，如果存在，则布尔变量将设置为 true，否则将设置为 false。即使表中不存在用户名，该变量似乎也始终设置为 true。我检查了表中的数据并尝试了很多次，但变量始终设置为 true，并且无论用户名是否在数据库中，始终显示消息“用户名存在”。这是我的代码。我究竟做错了什么？

----登录类，定义按钮和编辑文本字段并在单击登录按钮时触发消息-------------

```
public class Login extends Activity{
Button sqllogin;
EditText sqlusername, sqlpassword;

 @Override
    protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    sqlusername = (EditText) findViewById(R.id.etuname1);
    sqlpassword = (EditText) findViewById(R.id.etpass);

    sqllogin = (Button) findViewById(R.id.bLogin);
    sqllogin.setOnClickListener(new View.OnClickListener() {

            //Method that fires a message when the Login button is clicked

        public void onClick(View v) {
            switch (v.getId()){
            case R.id.bLogin:
            String username = sqlusername.getText().toString();
            String password = sqlpassword.getText().toString();

            DBAdapter entry = new DBAdapter(Login.this); 
            entry.open();
            boolean r = entry.findUsername(username);
            if(r == true){
                Toast.makeText(Login.this, "Username Exists", Toast.LENGTH_LONG).show();
            }
            else{
                Toast.makeText(Login.this, "Username does not Exists", Toast.LENGTH_LONG).show();
            }
            entry.close();
            break;
        }
      }
    });
 }
 } 
```

---------DBAdpater 类中检查用户名是否存在于表中的方法------------

```
public boolean findUsername(String username) {
Cursor c = ourDatabase.query(true, DATABASE_TABLE_L, new String[] {
        KEY_USERNAME, KEY_PASSWORD}, KEY_USERNAME + "='"
        + username +"'", null, null, null, null, null);
if (c!= null) {
    return false;
}
else{
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:33:31.027

而不是检查游标是否为空，而是尝试检查游标是否包含任何数据，例如：

```
if(cursor.getCount()!=0)
   return false;
else
   return true; 
```

getCount() 返回查询返回的行数。

# visual-studio-2010 - 调试套接字服务器代码

> ID：11002593
> 
> 赞同：0
> 
> 时间：2012-06-12T18:28:05.540
> 
> 标签：visual-studio-2010, debugging, sockets, visual-c++

我正在尝试逐步完成我没有编写的程序的代码（我有源代码）。它是一个小型 http 服务器。我能够放置断点，并且它们将在从`main()`. 但是，当我尝试在响应来自浏览器的连接而调用的行上放置断点时，它会被忽略。

关于调试套接字代码有什么我不知道的吗？我真的不太了解套接字编程，但这不是我想要看到的部分。

这适用于 Visual C++ 2010。

**编辑**
我发现了问题。有一个深度嵌套的调用`system`实际上是用不同的参数再次运行程序。所以它不是线程或套接字或其他什么，它实际上是一个全新的子进程。有没有办法让调试器继续这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:35:23.610

**选项1**

更改您的“系统”调用以将“--waitfordebugger”参数传递给子进程。然后在 main 或 WinMain 中，检查为此参数传递的命令行参数。如果检测到，使您的代码进入无限循环。

```
volatile int x = false;
while (x == false)
{
    Sleep(100);
} 
```

当您的子进程生成时，使用 Visual Studio 将“附加”到子进程（顶级菜单，选择“调试”和“附加到进程...”）。然后在 Sleep 语句上设置一个断点。当断点被命中时（应该是立即的），将监视窗口中的“x”更改为 true，将新断点设置到代码中要单步执行的位置。然后按“继续”(F5) 键让程序继续。

此技术还有其他变体，包括使用等待 IsDebuggerPresent() API 返回 TRUE。

**选项 2**

在代码中要调试的位置附近，插入 DebugBreak() 语句。这通常会创建弹出打开的崩溃对话框。如果它提示您附加调试器，请让它。否则，只需按照选项 1 中的说明直接附加调试器，然后按崩溃对话框上的相应按钮继续。这种方法的 YMMV 取决于已安装的异常处理程序类型和/或系统函数调用是否设置为隐藏崩溃。

# asp.net - 将 UserControl 的按钮链接到父控件上的功能

> ID：11002598
> 
> 赞同：0
> 
> 时间：2012-06-12T18:28:19.750
> 
> 标签：asp.net

我在另一个用户控件中显示了一个带有保存和取消按钮的用户控件。当用户点击保存时，我希望内部用户控件执行它的标准功能，但我也希望父控件执行一些操作。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:38:37.607

最好的方法是引发您可以在“外部”控件中处理的自定义*保存事件。*

[http://www.codeproject.com/Articles/8797/Mastering-Page-UserControl-Communication#4.3](http://www.codeproject.com/Articles/8797/Mastering-Page-UserControl-Communication#4.3)

这种事件方法的优点是 UserControls 仍然是可重用的。即使它们不处理此事件，您也可以在其他页面（或 UserControls）中使用 UserControl A。它是控制器的一部分，用于决定需要什么以及应该做什么。

UserControls 通常不应依赖于特定的控制器，否则它们是硬链接且不可重用的。这也是令人讨厌的错误的好来源。UserControl 可能是其他嵌套（用户）控件的控制器，但不是页面本身的控制器。

**通讯摘要**：

*   页面 -> 用户控件 -> 公共属性和方法
*   用户控件 -> 页面 -> 事件
*   UserControl -> UserControl -> controller-UserControl 采用页面角色（见上文，您的用例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:50:03.923

泡沫事件符合要求， http: [//msdn.microsoft.com/en-us/library/aa719644 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa719644(v=vs.71).aspx)

您可以在用户控件中引发气泡事件，它将递归地传递给每个用户控件的祖先，直到它被处理

# content-management-system - 大数据CMS全文检索

> ID：11002600
> 
> 赞同：0
> 
> 时间：2012-06-12T18:28:26.677
> 
> 标签：content-management-system, full-text-search, bigdata

目前我有一个应用程序，用户可以在其中上传文档（pdfs/excel/word，少量图片）。在哪里可以寻找大数据（Hadoop-MangoDB）解决方案

1.  存储数千个 pdf、word、excel 文件（因为我们的大小也在增长）

2.  搜索图像元信息

3.  全文搜索（大部分是实时的）

4.  更快的检索

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:46:38.727

看看 apache Hbase 也..你可能会发现它对你的用例很有用..它是一个运行在 Hdfs 之上并提供随机实时读/写访问的 NOSQL 数据库..你可以看看 Apache Hive好吧..虽然它不像 Hbase 那样用于实时处理，但它在 Hadoop 集群之上提供了一个具有类似 SQL 接口的数据仓库..您可以在后台运行 Hive 作业，如果您知道提前进行处理..如果您来自 SQL 背景，这将很有用。

# compilation - gfortran：非法预处理器指令和无效字符/非数字字符编译错误

> ID：11002602
> 
> 赞同：3
> 
> 时间：2012-06-12T18:28:32.480
> 
> 标签：compilation, preprocessor, fortran, gfortran, directive

因此，我尝试使用 NAS 基准对特定 MPI 实现进行性能测试。所以我去编译fortran代码，我遇到了障碍。每当我输入此命令进行编译时：

```
gfortran -O0 -Wall -I/home/stephen/trunk/include -I.  -c ./TestData/common/timers.f 
```

我得到这些编译器错误：

```
Warning: mpif.h:2: Illegal pdreprocessor directive
Warning: mpif.h:3: Illegal preprocessor directive
Warning: mpif.h:4: Illegal preprocessor directive
Warning: mpif.h:5: Illegal preprocessor directive
Warning: mpif.h:6: Illegal preprocessor directive
Warning: mpif.h:7: Illegal preprocessor directive
Warning: mpif.h:8: Illegal preprocessor directive
Warning: mpif.h:9: Illegal preprocessor directive
Warning: mpif.h:12: Illegal preprocessor directive
Warning: mpif.h:13: Illegal preprocessor directive
Warning: mpif.h:14: Illegal preprocessor directive
Warning: mpif.h:2: Illegal preprocessor directive
Warning: mpif.h:3: Illegal preprocessor directive
Warning: mpif.h:4: Illegal preprocessor directive
Warning: mpif.h:5: Illegal preprocessor directive
Warning: mpif.h:6: Illegal preprocessor directive
Warning: mpif.h:7: Illegal preprocessor directive
Warning: mpif.h:8: Illegal preprocessor directive
Warning: mpif.h:9: Illegal preprocessor directive
Warning: mpif.h:12: Illegal preprocessor directive
Warning: mpif.h:13: Illegal preprocessor directive
Warning: mpif.h:14: Illegal preprocessor directive
mpif.h:1.1:
    Included at ./TestData/common/timers.f:30:

/*
 1
Error: Non-numeric character in statement label at (1)
mpif.h:1.2:
    Included at ./TestData/common/timers.f:30:

/*
  1
Error: Invalid character in name at (1)
mpif.h:1.1:
    Included at ./TestData/common/timers.f:50:

/*
 1
Error: Non-numeric character in statement label at (1)
mpif.h:1.2:
    Included at ./TestData/common/timers.f:50:

/*
  1
Error: Invalid character in name at (1)
make: *** [cg] Error 1 
```

这是错误的 timers.f 代码（第 30 和 50 行是包含行）：

```
c---------------------------------------------------------------------                                                                                                                                         
c---------------------------------------------------------------------                                                                                                                                         
      subroutine timer_start(n)
c---------------------------------------------------------------------                                                                                                                                         
c---------------------------------------------------------------------                                                                                                                                         
      implicit none
      integer n
      include 'mpif.h'
      double precision start(64), elapsed(64)
      common /tt/ start, elapsed
      start(n) = MPI_Wtime()
      return
      end
c---------------------------------------------------------------------                                                                                                                                         
c---------------------------------------------------------------------                                                                                                                                         
      subroutine timer_stop(n)
c---------------------------------------------------------------------                                                                                                                                         
c---------------------------------------------------------------------                                                                                                                                         
      implicit none
      integer n
      include 'mpif.h'
      double precision start(64), elapsed(64)
      common /tt/ start, elapsed
      double precision t, now
      now = MPI_Wtime()
      t = now - start(n)
      elapsed(n) = elapsed(n) + t
      return
      end 
```

有任何想法吗？我已经为 gfortran 尝试了各种命令行参数来尝试让它进行不同类型的预处理（我承认其中大部分都是盲目地完成的）。对我来说奇怪的是，编译器在我的代码中没有的非数字字符 /* 上出错了，所以我很迷茫。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T20:30:03.233

您肯定是以非标准方式编译此代码。使用 mpi 编译 f77 或 f90 代码的常用方法是使用程序**mpif77**或**mpif90**，它们环绕用于构建特定 MPI 版本的编译器。

例如，在我的笔记本电脑上（使用用 gfortran/gcc 编译的 OpenMPI），该命令`mpif77`大致相当于：

```
gfortran -I/usr/local/include -L/usr/local/lib -lmpi_f77 -lmpi -lopen-rte -lopen-pal -lutil 
```

（我通过`mpif90 -showme`-- 我不知道该命令行选项是否是 MPI 标准的一部分，因此它可能对您不起作用）获得了此信息。

要编译你的代码，我会尝试这样的事情：

```
mpif77 -O0 -Wall -c ./TestData/common/timers.f -o timers.o 
```

由于没有要包含的其他文件，因此使用附加`-I`标志增加编译器包含路径实际上没有任何意义——您只会增加意外找到错误头文件的可能性；）。

也许在您的当前目录或 /home/stephen/trunk/include 中有一个文件“mpif.h”，它在不应该被选中时被选中。（看起来你可能会看到一个 C 头文件，因为`/*`它是 C 注释的开头——尽管我不明白为什么 ac 头文件会被称为“mpif.h”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:14:18.173

我同意您应该使用 mpif77 或 mpif90 链接到正确的库。如果 gfortran 不喜欢预处理器宏，您应该尝试 -cpp 编译器选项。

# java - Java和PHP之间的Base64_encode不同

> ID：11002603
> 
> 赞同：1
> 
> 时间：2012-06-12T18:28:36.507
> 
> 标签：java, php, encoding, base64, hmac

这是我的问题：

我有一个 JAVA 函数来生成加密字符串。我必须在 PHP 中做同样的事情。

我的 Java 函数：

```
String generateSignature () {
    byte[] Sequence = ("hello").getBytes("UTF-8");
    Mac HMAC = Mac.getInstance("HMACSHA256");
    HMAC.init("SECRET_KEY");
    byte[] Hash = HMAC.doFinal(Sequence);
    String Signature = new String(Base64.encodeBase64(Hash));
    return Signature;
} 
```

我的 PHP 函数：

```
function generateSignature() {
    $sequence = "hello";
    $encrypted = hash_hmac('sha256', $sequence, "SECRET_KEY");
    return base64_encode($encrypted);
} 
```

两个函数的返回值不一样。我注意到的是，在编码为 base 64 之前，这两个函数具有相同的结果。所以，对我来说，问题不在于密钥的生成，而在于编码。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:36:32.940

答案在PHP 函数 hash_hmac的[文档中。](http://php.net/manual/en/function.hash-hmac.php)

> 当设置为 TRUE 时，输出原始二进制数据。FALSE 输出小写十六进制。

传递“true”作为最后一个参数。哈希是二进制的。将它们转换为字符串时，它们通常以十六进制编码。但在这种情况下，您将对其进行 base-64 编码，因此您需要原始二进制形式。

# java - Java 按特定顺序放入树形图

> ID：11002609
> 
> 赞同：4
> 
> 时间：2012-06-12T18:29:03.790
> 
> 标签：java, string, collections, treemap

我有一个大列表并将其放入树形图中。

然后我想把“ALL”放在列表的最顶端，但是在“ALL”之前有“AAA”的东西

编辑：我希望对所有其他输入进行排序

```
List     ->    List
-----          -----
AAA            AAA
BBB            ALL
CCC            BBB
               CCC 
```

我可以使用 arrayList 或其他东西，但我想知道是否有办法控制这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T18:31:49.420

一种选择是构建一个自定义比较器，该比较器始终将“ALL”一词排在其他所有内容之前：

```
TreeMap<String, T> myMap = new TreeMap<String, T>(new Comparator<String>() {
    public int compare(String lhs, String rhs) {
        /* See which of the inputs, if any, are ALL. */
        bool oneAll = lhs.equals("ALL");
        bool twoAll = rhs.equals("ALL");

        /* If both are ALL or neither are ALL, just do a normal comparison. */
        if (oneAll == twoAll) {
            return lhs.compareTo(rhs);
        }
        /* Otherwise, exactly one of them is ALL.  Determine which one it is and
         * react accordingly.
         */
        else if (oneAll) {
            return -1;
        } else {
            return +1;
        }
    }
}); 
```

这将按升序对所有内容进行排序，但优先`"ALL"`于其他所有内容。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T18:30:38.737

基本不用`TreeMap`。如果您想按特定顺序放置事物，只需使用 an`ArrayList`或 a即可`LinkedList`。`TreeMap`按其键的顺序对其条目进行排序。在这种情况下，您不希望这样。

编辑：如果您*只是*关心将 ALL 放在顶部，那么自定义比较器就可以了。但是，如果您真的希望能够以一种不容易仅由所涉及的键确定的方式指定每个条目的位置，那么我支持我的建议，这`TreeMap`不是前进的方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:33:26.503

你可以自己写 `compareTo()` ，这样 ALL 总是最重要的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T18:33:28.013

使用 LinkedHashMap 可以让您保持与添加到地图的元素相同的顺序。如果您需要自定义订单，您可以将自己的比较器与 TreeMap 一起使用。

# wordpress - Wordpress - 在主索引上显示特定页面而不是最新页面

> ID：11002613
> 
> 赞同：0
> 
> 时间：2012-06-12T18:29:23.727
> 
> 标签：wordpress

我的 WP 上显示了 3 个最新页面。这是代码。

[http://pastebin.com/nGn2AAfA](http://pastebin.com/nGn2AAfA)

我想在主索引页面上放置 3 个我想要的特定页面。我该如何调整它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:35:48.153

如果您使用自定义查询，则可以指定页面 ID。来自法典；

```
$query = new WP_Query( array( 'post_type' => 'page', 'post__in' => array( 2, 5, 12, 14, 20 ) ) ); 
```

要查找您的页面 id，您将鼠标悬停在后端页面屏幕中每个单独页面的链接上，您将在 url 中看到页面 id

编辑 - 好的，根据您的评论，您可以将其更改为以下内容（假设您的页面 ID 为 2、5 和 12）；

```
 <?php $homepage_query = new WP_Query( array( 'post_type' => 'page', 'post__in' => array( 2, 5, 12 ) ) );
        while ($homepage_query->have_posts()) : $homepage_query->the_post(); ?>

            <div class="main_post"> 
                    etc etc
            </div>

    <?php endwhile; ?> 
```

# c# - 我的 BackgroundWorker 仍然阻止我的 UI

> ID：11002616
> 
> 赞同：2
> 
> 时间：2012-06-12T18:29:28.623
> 
> 标签：c#, wpf, dll, user-interface, backgroundworker

我在一个隐藏在我没有源代码的 .dll 中的类中有一个耗时的方法。我不想在调用此方法时阻止 UI。我一直在尝试使用 BackgroundWorker 来做到这一点。我从 btn_Click 事件处理程序调用 RunWorkerAsync。当我在工作线程之外（如下所示）创建 dllClass 实例时，UI 会冻结，直到操作完成。该操作还阻止计时器滴答作响。

```
public static dllClass dllClassInstance = new dllClass();

void worker1_DoWork(object sender, DoWorkEventArgs e)
{
    dllClassInstance.TimeConsumingMethod();
} 
```

另一方面，如果我在工作线程中实例化该类（如下一个代码段），它会按预期工作。

```
void worker1_DoWork(object sender, DoWorkEventArgs e)
{
    dllClass dllClassInstance = new dllClass();

    dllClassInstance.TimeConsumingMethod();
} 
```

使用后者的问题是我需要访问该特定工作程序之外的类实例，因为我必须在耗时方法之前和之后调用其他方法。我还尝试通过 e.Argument 将类实例传递给 BackgroundWorker，但这也导致 UI 冻结。有没有人建议如何在不阻塞 UI 的情况下调用该方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:35:12.103

> 有没有人建议如何在不阻塞 UI 的情况下调用该方法？

不知道内部发生了什么`dllClass`，就无法确定。

通常，这两种代码都不会导致 UI 冻结。我怀疑`dllClass`是在其构造函数中捕获电流`SynchronizationContext`，并在内部使用它`TimeConsumingMethod`，导致阻塞。如果是这种情况，您可能会在 DoWork 处理程序中构造该类，但将其范围限定为该类，这可能会起作用。但是，如果它正在捕获同步上下文，则该类很可能具有线程亲和性，并*期望*在 UI 线程上运行。

您可以尝试在处理程序中构造实例，如下所示：

```
public dllClass dllClassInstance;

void worker1_DoWork(object sender, DoWorkEventArgs e)
{
    dllClassInstance = new dllClass(); // Construct here
    dllClassInstance.TimeConsumingMethod();
} 
```

这可能有效，但正如我所说，它可能有其他副作用。我会验证`dllClass`没有线程关联规则要求它在 UI 线程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:35:57.310

这可能是因为你的`dllClass`. 您所看到的不应该发生，除非有人想确保对实例的所有调用都在同一个线程中处理。如果`dllClass`在其构造函数中使用调度程序，然后`TimeConsumingMethod`通过该调度程序调用实际处理，您将看到冻结的 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:40:58.053

正如 Reed 指出的那样，如果不知道该类的内部结构是什么，可能很难真正解决。但是，如果你有其他需要加载/准备、设置的东西，我会让你的后台工作类“ReportsProgress”=true，当它启动时，立即调用一个方法，该方法将基于 ex 抓取和/或准备其他设置：进度为 1（开始），然后，执行长过程的其他元素，然后报告进度，其值为 99（结束），并从中进行一些清理。

这听起来会有所帮助吗？您仍然可以将其全部封装到一个后台工作人员类中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T17:24:01.533

我正在开发一个 VB.net 应用程序，并且在与安捷伦设备通信的 Visa Com 3.0 驱动程序中遇到了同样的问题。这是我解决它的方法：

```
Dim task = New Threading.Tasks.Task(Of dllClass)(Function()
                                                     Return New dllClass()
                                                 End Function)
task.Start()
task.Wait()

public static dllClass dllClassInstance = task.Result;

void worker1_DoWork(object sender, DoWorkEventArgs e)
{
    dllClassInstance.TimeConsumingMethod();
} 
```

本质上，我在一个新线程中创建我的 dllClass 实例，但立即丢弃该线程并保留引用。

# cuda - 在包含 CUDA 运行时 API 的主机代码中使用 CUDA 驱动程序 API

> ID：11002619
> 
> 赞同：1
> 
> 时间：2012-06-12T18:29:37.427
> 
> 标签：cuda

如果我的程序已经包含运行时 API，是否可以使用 CUDA 驱动程序 API？换句话说，驱动 API 和运行时 API 是否可以并排使用？这是因为驱动 API 为设备提供了良好的控制，同时运行时 API 便于编码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:43:44.373

是的。您甚至可以互换地使用 CUDA 流和事件等对象的句柄。

# ads - 放置广告的正确语义 HTML5 标记是什么？

> ID：11002621
> 
> 赞同：2
> 
> 时间：2012-06-12T18:29:41.650
> 
> 标签：ads

我知道 HTML5 的大部分内容是关于更好的语义，用于向爬虫（以及屏幕阅读器）指定标签中包含的内容类型。是否有用于放置广告的正确语义标签？

我最好的猜测是`<aside>`标签……但我不确定。我也在想也许没有，因为这样的标签不仅可以让网站管理员“盘点”以展示广告，还可以让不想看到广告的人使用浏览器插件过滤掉它们。

# jquery - asp.net mvc3 如何实例化客户端验证？

> ID：11002627
> 
> 赞同：4
> 
> 时间：2012-06-12T18:30:08.223
> 
> 标签：jquery, asp.net-mvc-3, validation

这个问题与 asp.net mvc3 框架关系最密切。它开始于“如何确保使用带有 asp.net mvc3 的 jQuery 对动态附加的输入字段进行主动验证？” 然而，经过一些搜索、测试和咖啡，我发现了这个：

```
function reValidate(formId) {
 $("#" + formId).removeData("validator");
 $("#" + formId).removeData("unobtrusiveValidation");
 $.validator.unobtrusive.parse("#" + formId);
} 
```

这工作得很好。但是，我对框架实际使用的机制更好奇。我有一个完全基于脚本生成的页面。视图中唯一的东西是一个`<div>`，一个`<script>`用于加载我的库的标签，另一个`<script>`用于填充`<div>`. 渲染一个完全动态的页面后，验证完美无缺。但是，如果在页面加载后使用页面加载时使用的相同过程来包含一些新内容，则验证会中断。当然，只要打电话`reValidate()`。

但 -

**a) 一旦页面加载（或加载时），框架如何实例化验证？**

**b) 框架的哪一部分处理它？是 mvc3 部分、asp.net 部分、razor 引擎还是其他部分？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T18:32:37.360

> a) 一旦页面加载（或加载时），框架如何实例化验证？

它解析 DOM，查找`data-*`输入字段的属性并添加[jquery.validate 规则](http://docs.jquery.com/Plugins/Validation/rules)。jQuery validate 是一个客户端验证插件，它与 ASP.NET MVC 无关，可以与任何服务器端框架甚至纯静态 HTML 一起使用。

> b) 框架的哪一部分处理它？是 mvc3 部分、asp.net 部分、razor 引擎还是其他部分？

是`jquery.validate.unobtrusive.js`剧本。ASP.NET MVC 帮助程序，例如简单地使用模型元数据，根据您用于模型的数据注释`Html.TextBoxFor`生成具有适当属性的输入字段。`data-*`这些属性包含所有必要的信息，以便生成本机 jquery 验证规则。因此，不显眼的脚本在 ASP.NET MVC 模型元数据和`jquery.validate`插件之间建立了粘合剂。这`$.validator.unobtrusive.parse`是完成这项工作的功能。这就是为什么在动态修改 DOM 时需要手动调用它的原因 - 您正在添加/删除`data-*`需要转换为 jquery 验证规则的属性。不要犹豫，看看它是如何在里面实现的`jquery.validate.unobtrusive.js`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:38:40.947

它的工作原理正如 Darin Dimitrov 在他的回答中所描述的那样，在客户端，在服务器端，mvc 渲染引擎使用为模型提供的元数据（通常是我们放在模型类的属性上的属性）来决定哪些数据是需要 data-* 属性，以及是否应该渲染它们。
如果您对更精确的答案感兴趣，您可以随时查看[mvc 3 的源代码](https://aspnet.codeplex.com/releases/view/58781)，以准确了解 html 辅助方法何时以及如何读取元数据，最终为您创建 html 字符串。

# c# - C# Thread 模拟键盘点击并等待

> ID：11002630
> 
> 赞同：0
> 
> 时间：2012-06-12T18:30:13.947
> 
> 标签：c#, multithreading, keyboard, simulate

我制作了一个机器人程序，我想在某个时间间隔之间发送一些键盘键。

这是我线程中的代码。我记录了：“F”点击然后等待 4 秒然后“S”、“A”、“Q”点击。问题是等待时间（4秒），然后所有后者都以“fsaq”的顺序弹出......

```
public void Run()
    {
        Thread.Sleep(3000);
        for (int i = 0; i <= Form.BotEvents.Items.Count - 1; i++)
        {
            string[] EventText = Form.BotEvents.Items[i].ToString().Split(' ');
            if (EventText[2] == "Time")
            {
                Thread.Sleep(Convert.ToInt32(EventText[3]));
            }
            else
            {
                SendKey(EventText[3]);
            }
            Thread.Sleep(100);
        }
        Run();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:34:32.040

这是因为通过让您的 UI 线程进入休眠状态，您可以防止消息循环处理“F”键按下。您需要在不同的线程上运行您的代码，或者避免使用 Thread.Sleep，尝试使用 System.Windows.FOrms.Timer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:55:34.380

给定代码的另一个问题是您遇到了无限递归的情况。

```
public void Foo
{
    for(int i = 1; i < 100; i++)
    {
        if( i % 2 == 0 )
        {
            Console.WriteLine("Foo: " + i);
        }
        else
        {
            Console.WriteLine("Bar: " + i);
        }
    }

    Foo();
} 
```

看到这里的问题了吗？没有终止条件。这个机器人将运行，运行，直到它最终耗尽内存（这会发生，因为该方法永远不会结束，因此垃圾收集永远不会发生，除非在 if 和 for 循环的边界内。）

在短期内，最好为某种 End 或 Done 命令添加解释指令，该指令将从调用方法返回。从长远来看，考虑重构以在具有终止条件的无限循环中运行。

# facebook-graph-api - 经过身份验证的推荐人无法在初始页面加载时完成登录或注册

> ID：11002631
> 
> 赞同：1
> 
> 时间：2012-06-12T18:30:24.900
> 
> 标签：facebook-graph-api

情况：在应用程序中使用经过身份验证的推荐。我们希望通过单击时间线帖子或新闻源来验证用户与我们的应用程序，当他们被定向到我们的应用程序时，我们希望注册或登录该用户以进行初始显示。也没有为用户弹出对话框。

问题：当用户到达时，他们没有 fb cookie，因为我们的应用程序服务器正在处理请求。同样在返回请求中，没有 access_code 或代码或 facebook id 来进行进一步处理。

根据[http://developers.facebook.com/docs/opengraph/authentication/](http://developers.facebook.com/docs/opengraph/authentication/)上的文档 Auth Token Parameter: 如果启用了 Authenticated Referrals 并且当用户通过内联 Auth Dialog 授权您的应用程序时，我们将向您的应用程序传递 Auth此处指定格式的令牌。可用格式： URI 片段：如果您的应用正在使用客户端身份验证 查询字符串：如果您的应用正在使用服务器端身份验证。如果您的应用是画布应用，我们将不使用此设置，并将自动使用“signed_request”作为响应类型。

我们将其设置为查询字符串，但确实有一个画布应用页面，可将用户发送到我们的网站以获取邀请。

测试：使用带有 firebug 的 Firefox，单击时间轴用户中的链接，该用户在我们的应用程序中不存在，并且我们的应用程序与该用户没有来自 facebook 的权限

因此，当我们单击时间轴中的链接并加载我们的页面时，我们没有数据来完成身份验证，但是在页面完成后我们确实会获得 cookie，并且用户刷新页面将完成登录或注册过程。

# c# - 有没有办法在 C++ CLI 和 C# 之间序列化一个类

> ID：11002638
> 
> 赞同：0
> 
> 时间：2012-06-12T18:30:44.613
> 
> 标签：c#, serialization, c++-cli

我知道答案可能是否定的，但我想确定一下，因为它会为我省去很多麻烦。
解释一下：
我想要一个只使用 .net 容器和常规整数、双精度数的 C++ CLI 类……我希望能够序列化该 CLI 类并将其反序列化为一个用C＃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:32:04.707

是的; 您可以使用任何 .Net 序列化机制。
（二进制、XML、DataContract，...）

只要不使用任何非托管代码，用 C++/CLI 编写的托管类型与用 C# 编写的托管类型之间就没有根本区别。

请注意，.Net 二进制序列化不能在等效类型之间操作；要使用二进制序列化，您需要在库中定义类型并从两个项目中引用该库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:35:13.867

我只会使用 a`BinaryWriter`手动序列化它，然后使用 a`BinaryReader`反序列化它。它不是自动的，因此如果您更改类，则必须更新代码，但它的性能比任何动态序列化都要好。

# c++ - unique_ptr 的动态转换

> ID：11002641
> 
> 赞同：54
> 
> 时间：2012-06-12T18:31:08.220
> 
> 标签：c++, casting, c++11, smart-pointers, unique-ptr

与 Boost 中的情况一样，C++11 提供了一些用于强制转换的函数`shared_ptr`：

```
std::static_pointer_cast
std::dynamic_pointer_cast
std::const_pointer_cast 
```

但是，我想知道为什么`unique_ptr`.

考虑以下简单示例：

```
class A { virtual ~A(); ... }
class B : public A { ... }

unique_ptr<A> pA(new B(...));

unique_ptr<A> qA = std::move(pA); // This is legal since there is no casting
unique_ptr<B> pB = std::move(pA); // This is not legal

// I would like to do something like:
// (Of course, it is not valid, but that would be the idea)
unique_ptr<B> pB = std::move(std::dynamic_pointer_cast<B>(pA)); 
```

有什么理由不鼓励这种使用模式，因此`shared_ptr`没有提供与中存在的功能等效的功能`unique_ptr`？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-12T18:51:26.330

除了 Mark Ransom 的[答案](https://stackoverflow.com/a/11002783/981959)之外， a`unique_ptr<X, D>`甚至可能不存储 a `X*`。

如果删除器定义了类型`D::pointer`，那么这就是存储的内容，并且可能不是真正的指针，它只需要满足`NullablePointer`要求并且（如果`unique_ptr<X,D>::get()`被调用）有一个`operator*`返回`X&`，但它不需要支持转换为其他类型。

`unique_ptr`非常灵活，不一定表现得非常像内置指针类型。

根据要求，这是一个存储类型不是指针的示例，因此无法进行强制转换。这有点做作，但在 C++ RAII 风格的 API 中包装了一个虚构的数据库 API（定义为 C 风格的 API）。OpaqueDbHandle 类型满足`NullablePointer`要求，但只存储一个整数，用作通过一些实现定义的映射查找实际 DB 连接的键。我并不是把它作为一个伟大设计的例子来展示，只是作为一个例子`unique_ptr`来管理一个不可复制的、可移动的资源，它不是一个动态分配的指针，其中“删除器”不只是调用一个析构函数和当`unique_ptr`超出范围时释放内存。

```
#include <memory>

// native database API
extern "C"
{
  struct Db;
  int db_query(Db*, const char*);
  Db* db_connect();
  void db_disconnect(Db*);
}

// wrapper API
class OpaqueDbHandle
{
public:
  explicit OpaqueDbHandle(int id) : id(id) { }

  OpaqueDbHandle(std::nullptr_t) { }
  OpaqueDbHandle() = default;
  OpaqueDbHandle(const OpaqueDbHandle&) = default;

  OpaqueDbHandle& operator=(const OpaqueDbHandle&) = default;
  OpaqueDbHandle& operator=(std::nullptr_t) { id = -1; return *this; }

  Db& operator*() const;

  explicit operator bool() const { return id > 0; }

  friend bool operator==(const OpaqueDbHandle& l, const OpaqueDbHandle& r)
  { return l.id == r.id; }

private:
  friend class DbDeleter;
  int id = -1;
};

inline bool operator!=(const OpaqueDbHandle& l, const OpaqueDbHandle& r)
{ return !(l == r); }

struct DbDeleter
{
  typedef OpaqueDbHandle pointer;

  void operator()(pointer p) const;
};

typedef std::unique_ptr<Db, DbDeleter> safe_db_handle;

safe_db_handle safe_connect();

int main()
{
  auto db_handle = safe_connect();
  (void) db_query(&*db_handle, "SHOW TABLES");
}

// defined in some shared library

namespace {
  std::map<int, Db*> connections;      // all active DB connections
  std::list<int> unused_connections;   // currently unused ones
  int next_id = 0;
  const unsigned cache_unused_threshold = 10;
}

Db& OpaqueDbHandle::operator*() const
{
   return connections[id];
}

safe_db_handle safe_connect()
{
  int id;
  if (!unused_connections.empty())
  {
    id = unused_connections.back();
    unused_connections.pop_back();
  }
  else
  {
    id = next_id++;
    connections[id] = db_connect();
  }
  return safe_db_handle( OpaqueDbHandle(id) );
}

void DbDeleter::operator()(DbDeleter::pointer p) const
{
  if (unused_connections.size() >= cache_unused_threshold)
  {
    db_disconnect(&*p);
    connections.erase(p.id);
  }
  else
    unused_connections.push_back(p.id);
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-06-12T18:40:03.097

您引用的每个函数都会*复制*指针。由于您无法制作 a 的副本，`unique_ptr`因此为其提供这些功能是没有意义的。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-12T19:01:57.503

为了建立戴夫的答案，这个模板函数将尝试将一个内容移动`unique_ptr`到另一个不同类型的内容。

*   如果它返回 true，那么：
    *   源指针为空。目的指针将被清除，以符合“将这个指针（无）的内容移入那个”的语义请求。
    *   源指针指向的对象可转换为目标指针类型。源指针将为空，而目标指针将指向它曾经指向的同一个对象。目标指针将接收源指针的删除器（仅在使用第一个重载时）。
*   如果返回 false，则操作不成功。两个指针都不会改变状态。

```
template <typename T_SRC, typename T_DEST, typename T_DELETER>
bool dynamic_pointer_move(std::unique_ptr<T_DEST, T_DELETER> & dest,
                          std::unique_ptr<T_SRC, T_DELETER> & src) {
    if (!src) {
        dest.reset();
        return true;
    }

    T_DEST * dest_ptr = dynamic_cast<T_DEST *>(src.get());
    if (!dest_ptr)
        return false;

    std::unique_ptr<T_DEST, T_DELETER> dest_temp(
        dest_ptr,
        std::move(src.get_deleter()));

    src.release();
    dest.swap(dest_temp);
    return true;
}

template <typename T_SRC, typename T_DEST>
bool dynamic_pointer_move(std::unique_ptr<T_DEST> & dest,
                          std::unique_ptr<T_SRC> & src) {
    if (!src) {
        dest.reset();
        return true;
    }

    T_DEST * dest_ptr = dynamic_cast<T_DEST *>(src.get());
    if (!dest_ptr)
        return false;

    src.release();
    dest.reset(dest_ptr);
    return true;
} 
```

请注意，声明的指针`std::unique_ptr<A>`和需要第二个重载`std::unique_ptr<B>`。第一个函数将不起作用，因为第一个指针实际上是类型`std::unique_ptr<A, default_delete<A> >`，第二个是`std::unique_ptr<A, default_delete<B> >`; 删除器类型将不兼容，因此编译器将不允许您使用此函数。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-12T18:41:56.297

这不是*为什么*的答案，但它是一种方法......

```
std::unique_ptr<A> x(new B);
std::unique_ptr<B> y(dynamic_cast<B*>(x.get()));
if(y)
    x.release(); 
```

它并不完全干净，因为有一小会 2`unique_ptr`秒认为他们拥有同一个对象。正如所评论的那样，如果您使用自定义删除器，您还必须管理移动自定义删除器（但这非常罕见）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-08T16:49:15.030

对于 C++11 方法，这个怎么样：

```
template <class T_SRC, class T_DEST>
inline std::unique_ptr<T_DEST> unique_cast(std::unique_ptr<T_SRC> &&src)
{
    if (!src) return std::unique_ptr<T_DEST>();

    // Throws a std::bad_cast() if this doesn't work out
    T_DEST *dest_ptr = &dynamic_cast<T_DEST &>(*src.get());

    src.release();
    return std::unique_ptr<T_DEST>(dest_ptr);
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-15T01:35:05.980

如果您只是在小范围内使用向下转换指针，一种替代方法是简单地向下转换对由 管理的对象的*引用*`unique_ptr`：

```
auto derived = dynamic_cast<Derived&>(*pBase);
derived.foo(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-27T17:35:52.323

我改进了@Bob F [https://stackoverflow.com/a/14777419/1702991](https://stackoverflow.com/a/14777419/1702991)的答案，因此您现在像往常一样只需要一个模板参数即可用于其他类型的演员表

```
template <class destinationT, typename sourceT>
std::unique_ptr<destinationT> unique_cast(std::unique_ptr<sourceT>&& source)
{
    if (!source)
        return std::unique_ptr<destinationT>();

    // Throws a std::bad_cast() if this doesn't work out
    destinationT* dest_ptr = &dynamic_cast<destinationT&>(*source.get());

    source.release();
    return std::unique_ptr<destinationT>(dest_ptr);
} 
```

更新（非投掷版本）：

```
template <class destinationT, typename sourceT>
std::unique_ptr<destinationT> unique_cast(std::unique_ptr<sourceT>&& source)
{
    if (!source)
        return std::unique_ptr<destinationT>();

    destinationT* dest_ptr = dynamic_cast<destinationT*>(source.get());
    if(dest_ptr)
        source.release();

    return std::unique_ptr<destinationT>(dest_ptr);
} 
```

用法：

```
std::unique_ptr<MyClass> obj = unique_cast<MyClass>(std::make_unique<MyOtherClass>()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-10T23:04:27.127

我喜欢 cdhowie 的回答......但我希望他们*返回*而不是使用 out-args。这是我想出的：

```
template <typename T_DEST, typename T_SRC, typename T_DELETER>
std::unique_ptr<T_DEST, T_DELETER>
dynamic_pointer_cast(std::unique_ptr<T_SRC, T_DELETER> & src)
{
  if (!src)
    return std::unique_ptr<T_DEST, T_DELETER>(nullptr);

  T_DEST * dest_ptr = dynamic_cast<T_DEST *>(src.get());
  if (!dest_ptr)
    return std::unique_ptr<T_DEST, T_DELETER>(nullptr);

  std::unique_ptr<T_DEST, T_DELETER> dest_temp(dest_ptr, std::move(src.get_deleter()));

  src.release();

  return dest_temp;
}

template <typename T_SRC, typename T_DEST>
std::unique_ptr<T_DEST>
dynamic_pointer_cast(std::unique_ptr<T_SRC> & src)
{
  if (!src)
    return std::unique_ptr<T_DEST>(nullptr);

  T_DEST * dest_ptr = dynamic_cast<T_DEST *>(src.get());
  if (!dest_ptr)
    return std::unique_ptr<T_DEST>(nullptr);

  std::unique_ptr<T_DEST> dest_temp(dest_ptr);

  src.release();

  return dest_temp;
} 
```

我在这里把它放到了一个 GitHub 仓库中：[https ://github.com/friedmud/unique_ptr_cast](https://github.com/friedmud/unique_ptr_cast)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-01T20:46:30.600

到目前为止我看到的所有样本都想出了这个版本。

```
template <typename T_DEST, typename T_SRC, typename T_DELETER>
std::unique_ptr<T_DEST, T_DELETER>
dynamic_pointer_cast(std::unique_ptr<T_SRC, T_DELETER>&& src)
{
    // When nullptr, just return nullptr
    if (!src) return std::unique_ptr<T_DEST, T_DELETER>(nullptr);

    // Perform dynamic_cast, throws std::bad_cast() if this doesn't work out
    T_DEST* dest_ptr = dynamic_cast<T_DEST*>(src.get());

    // Do not return nullptr on bad_cast
    //if (!dest_ptr) return std::unique_ptr<T_DEST, T_DELETER>(nullptr);

    // But throw std::bad_cast instead
    if (!dest_ptr) throw std::bad_cast();

    // Move into new unique_ptr
    std::unique_ptr<T_DEST, T_DELETER> dest_temp(dest_ptr, std::move(src.get_deleter()));
    src.release();

    return dest_temp;
}

template <typename T_DEST, typename T_SRC>
std::unique_ptr<T_DEST>
dynamic_pointer_cast(std::unique_ptr<T_SRC>&& src)
{
    // When nullptr, just return nullptr
    if (!src) return std::unique_ptr<T_DEST>(nullptr);

    // Perform dynamic_cast, throws std::bad_cast() if this doesn't work out
    T_DEST* dest_ptr = dynamic_cast<T_DEST*>(src.get());

    // Do not return nullptr on bad_cast
    //if (!dest_ptr) return std::unique_ptr<T_DEST>(nullptr);

    // But throw std::bad_cast instead
    if (!dest_ptr) throw std::bad_cast();

    // Move into new unique_ptr
    std::unique_ptr<T_DEST> dest_temp(dest_ptr);
    src.release();

    return dest_temp;
} 
```

如果您想让 dynamic_cast 抛出 std::bad_cast ，只需将 dynamic_cast 改为引用

像这样使用它

```
auto src = std::make_unique<Base>();
auto dst = dynamic_pointer_cast<Derived>(std::move(src));
auto dst2 = dynamic_pointer_cast<Derived>(FunctionReturningBase()); 
```

# php - 用于替换平面文件中的文本的脚本

> ID：11002642
> 
> 赞同：0
> 
> 时间：2012-06-12T18:31:09.747
> 
> 标签：php, unix, csv

我有一个包含 60 个值的平面文件（以 csv 分隔），需要用 60 个不同的新值替换。

```
Original_Value1 ---> New_Value1
Original_Value2 ---> New_Value2
Original_Value3 ---> New_Value3
Original_Value4 ---> New_Value4 
```

.... 到 60。

该文件有超过 200k 个条目，其中 60 个值需要更改。实现这一目标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:37:32.117

这是示例代码：

```
$input  = 'input.txt';
$output = 'output.txt';

if ($fpin = fopen($input, 'r')) {
  if ($fpout = fopen($output, 'a')) {
    while ($data = fread($fpin, 1024)) {
      fwrite($fpout, your_replacement_function($data));
    }

    fclose($fpout);
  }

  fclose($fpin);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:38:36.827

看一下[`fgetcsv`](http://www.php.net/manual/en/function.fgetcsv.php)逐行读取文件并添加一些代码以查看每行是否包含要替换的字符串。

读完每一行后，做你需要做的事情并将其写入一个新文件。您可以使用[`fputcsv`](http://php.net/manual/en/function.fputcsv.php)CSV 来编写。最后删除旧文件。

也许有人知道编辑文件中间的方法？我不认为这是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:36:53.770

珀尔。至少那是我的建议，应该能够在一条线上做到这一点......类似于

```
open( IN, " < filename.csv ");
open( OUT, " > output.csv ");

while (<IN>) { # reads in each line of the file
   $line =~ s/Original_Value1/New_Value1/gi;  # g is for global, i is to ignore case
   $line =~ s/Original_Value2/New_Value2/gi;  # g is for global, i is to ignore case
   $line =~ s/Original_Value3/New_Value3/gi;  # g is for global, i is to ignore case
   # ... continue to your values... probably a better way of doing this from a file, but this is quick and dirty, and should work
   print OUT $line; # prints out $line to the output file.
}
close(IN);
close(OUT); 
```

无论如何，这已经很接近了，我已经有一段时间没有编写 perl 了，它可能会被擅长 PERL 高尔夫的人优化为几个字符... =）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:35:25.503

假设

1) 新旧值的长度可能不同

2）您不知道哪些行包含要提前更改的值

使用 fgetcsv() 逐行遍历文件，检查该行中的字段，根据需要进行替换。使用 fputcsv() 将该行写回另一个文件

# javafx-2 - 圆圈中的javafx布局节点

> ID：11002643
> 
> 赞同：0
> 
> 时间：2012-06-12T18:31:19.187
> 
> 标签：javafx-2, radial

我正在尝试做一个音量旋钮，我有旋钮，但我想在旋钮周围放置音量指示器，由启迪大点表示。`Circle`我用节点试了一下。我声明了一个`Circle`将它们全部添加到 a的数组，`Group`以便我可以将组放置在框架中我想要的位置。`Circle`我使用setTranslateX 和 setTranslateY 方法放置每个圆圈。每个`Circle`都有用于填充的径向渐变，并且不可见。我将滑块（音量旋钮）的值映射到`Circle`数组中的每个值，并调用 valueChanged 方法以获取所有`Circle`低于或等于该值的值并将它们中的每一个设置为可见。`Circle`我的内部位置有问题`Group`. 当它们都可见时，它们就被完美地放置了，但是当它们的属性变为 false 时，剩下的可见的就不会停留在它们的位置上。所以我正在寻找一种更好的设计方法来做到这一点。谢谢你。

**代码示例：** 圆创建

```
audioSelectionValueToCircle = new HashMap<Double, Circle>(audioSelectionCircle.length);
    for (int i = 0; i < 6; i++) {
        final int count = i;
        audioSelectionCircle[count] = new Circle(15.0);
        RadialGradient rgrad = RadialGradientBuilder.create().centerX(audioSelectionCircle[count].getCenterX() - audioSelectionCircle[count].getRadius() / 5).centerY(audioSelectionCircle[count].getCenterY() - audioSelectionCircle[count].getRadius() / 5).radius(audioSelectionCircle[count].getRadius()).proportional(false).stops(new Stop(0.0, Color.WHITE), new Stop(0.3, Color.ORANGE), new Stop(1.0, Color.TRANSPARENT)).build();
        audioSelectionCircle[count].setFill(rgrad);
        audioSelectionValueToCircle.put(audioSelectionValue[count], audioSelectionCircle[count]);
        audioSelectionCircle[count].setVisible(false);
    } 
```

组创建

```
 gAudioSelectionCircle = new Group();
gAudioSelectionCircle.resizeRelocate(1225, 520, 280, 280);
        gAudioSelectionCircle.setRotate(90); 
```

圆圈放置

```
 int n = 6;
        for (int i = 0; i < n; i++) {
            final int count = i;
            double t = 2 * Math.PI * i / n;
            double x = 60 * Math.cos(t);
            double y = 60 * Math.sin(t);
            audioSelectionCircle[count].setTranslateX(x);
            audioSelectionCircle[count].setTranslateY(y);

            gAudioSelectionCircle.getChildren().add(audioSelectionCircle[count]);
//            audioSelectionCircle[count].resizeRelocate(x, y, 41, 41);
        } 
```

旋钮行为

```
audioSelectionKnob.valueProperty().addListener(new ChangeListener<Number>() {

            @Override
            public void changed(ObservableValue<? extends Number> ov, Number oldVal, Number newVal) {
//                if (!audioSelectionKnob.isValueChanging()) {
//                }
                Iterator<Map.Entry<Double, Circle>> it = audioSelectionValueToCircle.entrySet().iterator();
                while(it.hasNext()) {
                    Map.Entry<Double, Circle> pairs = it.next();
                        Circle c = pairs.getValue();
                    if(pairs.getKey() >= newVal.doubleValue()) {
                        c.setVisible(true);
                    } else {
                        c.setVisible(false);
                    }
                }
            }
        }); 
```

也许一件事，如果我在我的旋钮上方添加组是一个问题吗？我将旋钮添加到根组，并将圆形组添加到旋钮上方的根组。

* * *

我部分解决了将采样时钟的旋转方法应用于我的圆圈的问题。但是，当我使用`group.setRotate(rotation);`. 当我所有的圆圈都可见时，圆圈的位置很好，但是当我开始更改可见属性时，通过滑动旋钮，该组的行为就像我做了一样`group.setRotation(0);`。看起来它没有保留我首先设置的旋转值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:48:14.477

> 其余可见的没有停留在他们的位置

这可能是您的放置算法中的一个错误，导致了这种情况。要进行诊断，您需要提供一个简短、简化、可编译的示例应用程序。

仅修改节点的可见性属性不应以任何方式影响应用程序的布局。

对于围绕一个圆圈布置节点，您可以查看这个[时钟示例](https://gist.github.com/2658491)。时钟样本所做的是将 12 个节点定位在 12 点钟位置，然后对节点应用旋转以使它们到达适当的位置。布局似乎与您描述的有点相似，但如果没有参考图片很难确定。

正确放置节点后，您的音量旋钮“滑块”位于中间，然后您可以根据滑块值（类似于您当前进行可见性调整的方式）调整节点的 css 样式类以设置样式他们打开或关闭。您永远不需要从组中添加或删除更多节点，并且布局不应仅更改应用于不同样式节点的可见性或效果。

You might want to look at this [audio player example](http://fxexperience.com/2012/01/fun-javafx-2-0-audio-player/) which features knob based sliders based on replacing the slider behaviour and skin (though you would need to tweak the implementation a bit to get the kind of effect you are describing).

# database - 附近坐标

> ID：11002650
> 
> 赞同：-3
> 
> 时间：2012-06-12T18:31:31.620
> 
> 标签：database, algorithm, location, geo

我将创建一个应该发布“坐标”的应用程序，另一个功能是通过数据库查找附近的坐标。假设我的数据库中有 1.000.000 个条目，使用什么算法？如何比较距给定坐标 100m 的坐标？很多应用程序都在这样做，但这似乎很困难。

更新：通过坐标我的意思是经纬度。我不知道你为什么认为这不是“真正的”问题，但我需要一个起点，这就是我问这个“一般”问题的原因

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:38:42.083

过去，我使用了一种叫做[大圆距离](http://en.wikipedia.org/wiki/Great-circle_distance)的方法来做到这一点。它将地球视为一个完美的球体（它不是），并使用两组纬度来确定该球体上两点之间的距离。由于地球不是一个完美的球体，这些距离并不完全准确。如果您正在处理小距离并且计算和实际之间的微小差异是可以的，这对您来说可能没问题。这是一个计算 GCD 的函数：

```
SET QUOTED_IDENTIFIER ON 
GO
SET ANSI_NULLS ON 
GO
CREATE FUNCTION dbo.GreatCircleDistance
(
    @Latitude1 float = NULL,
    @Longitude1 float = NULL,
    @Latitude2 float = NULL,
    @Longitude2 float = NULL
)
RETURNS float
AS
BEGIN
    IF @Latitude1 IS NULL RETURN 0.0
    IF @Longitude1 IS NULL RETURN 0.0
    IF @Latitude2 IS NULL RETURN 0.0
    IF @Longitude2 IS NULL RETURN 0.0

    DECLARE @sin1 float
        ,@sin2 float
        ,@sind float
        ,@cos1 float
        ,@cos2 float
        ,@cosd float

    SELECT @sin1 = SIN(RADIANS(@Latitude1))
        ,@sin2 = SIN(RADIANS(@Latitude2))
        ,@sinD = SIN(RADIANS(@Longitude2 - @Longitude1))
        ,@cos1 = COS(RADIANS(@Latitude1))
        ,@cos2 = COS(RADIANS(@Latitude2))
        ,@cosD = COS(RADIANS(@Longitude2 - @Longitude1))

    RETURN ATN2     (SQRT(SQUARE(@cos2 * @sinD) + SQUARE(@cos1 * @sin2 - @sin1 * @cos2 * @cosD))
                ,@sin1 * @sin2 + @cos1 * @cos2 * @cosD
            ) * 3959.871
END
GO 
```

[从这里](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=85363)偷来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:44:56.547

纬度，经度以度-分-秒还是十进制度？如果是十进制，则 dist^2 ~= lat^2 + lon^2。不要忘记检查象限。如果进行多次查找，您可能希望将搜索列表排序到 2d 搜索树中。

# android - Thread.Sleep() 安卓用户界面

> ID：11002657
> 
> 赞同：2
> 
> 时间：2012-06-12T18:31:59.627
> 
> 标签：android, multithreading, user-interface

我正在开发一款适用于 Android 的记忆游戏，但遇到了问题。当用户点击第二张图像时 - 如果图像不同，我希望第二张图像显示 1、2 秒。

我试过的是睡1-2秒。激活第二张图片后的 UI 线程 - 但这似乎不起作用 - 第二张图片似乎没有显示！（仅显示第一张图片）

这是我的代码：

```
public void whenTapedImage(View v, int position)
{
    i++;
    ImageView imgV=(ImageView)v;
    if(i%2!=0)
    {
        firstClick=position;
        imgV.setImageResource(im.images.get(firstClick));           
    }
    else
    {   
        secondClick=position;
        imgV.setImageResource(im.images.get(secondClick));                      
        try {
            Thread.currentThread().sleep(1000);
            if(!(im.images.get(firstClick).equals(im.images.get(secondClick))))
            {
                Toast.makeText(easyGame.this, "Try Again!", Toast.LENGTH_SHORT).show();
                im.notifyDataSetChanged();
                gridview.setAdapter(im);
                gridview.invalidate();
                aux=player1Turn;
                player1Turn=player2Turn;
                player2Turn=aux;
            }
            else{
                done=done+2;
                ImageAdapter.keepVisibleViews.add(firstClick);
                ImageAdapter.keepVisibleViews.add(secondClick);
                if(player1Turn==true)
                {
                    player1Score++;
                    String score=Integer.toString(player1Score);
                    score1.setText(score);
                }
                if(player2Turn==true)
                {
                    player2Score++;
                    String score=Integer.toString(player2Score);
                    score2.setText(score);
                }
            }   
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    }           
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T18:34:45.053

您不能休眠 UI 线程，因为这会阻止 android 将任何其他事件传递到您的 Activity 的 UI。

相反，做一些事情，例如使用计时器，并让计时器的方法使用在 ui 线程上运行的工具来进行所需的延迟更改。

为了稳健性，您可能需要实现一个状态机（正式或实际）以跟踪应该发生的事情 - 如果按下另一个按钮，您需要决定是否应该中止或强制执行当前延迟，并让状态机适当地对待它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T18:39:54.300

这类似于[在 android 应用程序中等待](https://stackoverflow.com/questions/10428726/waiting-in-android-app)

尝试按照那里发布的解决方案并使用[Timer Class](http://developer.android.com/reference/java/util/Timer.html)

# javascript - 向循环的 Wordpress/Genesis 子主题添加全屏背景图像

> ID：11002662
> 
> 赞同：1
> 
> 时间：2012-06-12T18:32:08.907
> 
> 标签：javascript, css, wordpress

我的目标是为我的 Genesis 子主题添加一个全尺寸背景图像，该主题在主页上循环显示四到五个图像，并且是与每个后续页面（或其子页面）相对应的静态图像。

您可以在此处查看进度：http: [//devel.hodgsonco.com](http://devel.hodgsonco.com)

循环部分工作，这很好，但全屏部分没有。我想让图像与浏览器的大小相匹配，这样图像的侧面就会被切断，但高度是准确的。我不希望图像失真。

这是我如何让自行车部分工作的方法。我在这里遵循了一个教程：http: [//www.marcofolio.net/webdesign/advanced_jquery_background_image_slideshow.html](http://www.marcofolio.net/webdesign/advanced_jquery_background_image_slideshow.html)

我的functions.php中有这个：

```
add_action('genesis_before_header', 'add_bg_images_html');
function add_bg_images_html () {
  echo '<!-- jQuery handles to place the header background images -->
  <div id="headerimgs">
  <div id="headerimg1" class="headerimg"></div>
  <div id="headerimg2" class="headerimg"></div>
  </div>';
} 
```

然后在我的 CSS 中添加一些内容：

```
.headerimg { 
background-position: center top; 
background-repeat: no-repeat; 
/* Set rules to fill background */
min-height: 100%;
/*  min-width: 100%; */
/* Set up positioning */
position: fixed;
top: 0;
left: 0;
width: 100%; 
height:auto; 
position:absolute;
} 
```

然后有一个 javascript 文件在这里做了一些魔术：

[http://devel.hodgsonco.com/wp-content/themes/ionclub/js/script.js?ver=3.3.2](http://devel.hodgsonco.com/wp-content/themes/ionclub/js/script.js?ver=3.3.2)

我从那个脚本中注释掉了很多东西，因为我不需要它包含的任何动画控件。

所以，我的问题是图像又好又大（1680 像素宽乘以其他较大的数字高），但在较小的窗口中，您看到的只是图像的顶部。

那么，我做错了什么，或者没有做我应该做的事？有没有办法让这个看起来漂亮和花哨？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:39:23.457

要使用的是 CSS3 属性“background-size”。您可以在[W3 Schools](http://www.w3schools.com/cssref/css3_pr_background-size.asp)上阅读它。如果您包含[Modernizr](http://modernizr.com/)，您还可以提供后备支持。

无论如何，只需按如下方式设置您的背景：

```
background-size:cover; 
```

这就是它的全部！“Cover”将背景图像设置为缩放以填充元素区域而不扭曲纵横比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:38:28.930

你可能想看看[这个问题](https://stackoverflow.com/questions/5559764/background-image-scaling-while-maintaining-aspect-ratio)的答案。看起来可以通过将图像设置为来做你想做的事

```
position:absolute;
z-index:-1;
height:100%;
overflow:hidden; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:40:32.753

如果您希望它在不使用 CSS3 的情况下具有可扩展性，则不能使用 background-image 属性；您必须使用实际图像并将它们缩放到跨越窗口大小的 div 的宽度或高度（在您的情况下为高度）。

[拉伸和缩放 CSS 背景](https://stackoverflow.com/questions/376253/stretch-and-scale-css-background)

# c# - 防止 Excel 在 C# 中更新屏幕

> ID：11002664
> 
> 赞同：3
> 
> 时间：2012-06-12T18:32:15.847
> 
> 标签：c#, excel, add-in

我正在为 Excel 2010 编写 VIsual C# 中的加载项。此加载项从我们的服务中检索一些数据，并将结果写入某个电子表格的单元格。但是我不希望 Excel 显示用值填充单元格，因为这需要很多时间。所以我尝试了以下代码：

```
ExcelApp = (Excel.Application)System.Runtime.InteropServices.Marshal.GetActiveObject("Excel.Application");
ExcelApp.ScreenUpdating = false;
GetFolderTreeRecursive(FolderTree);
ExcelApp.ScreenUpdating = true; 
```

`GetFolderTreeRecursive`基本上处理 Web 服务调用并将响应值写入 Excel 单元格，如下所示：

`Globals.TestCases.Cells[FolderTreeRowIndex, FolderTreeColumnIndex].Value2 = CurrentFolder.recordid;`

不幸的是，Excel 仍然显示所有正在写入的单元格。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:49:50.410

我只是引用了错误的 Excel 应用程序对象。使用以下语句返回当前的 Excel 应用程序，而不是我意外实现的新应用程序。

`ExcelApp = Globals.ThisWorkbook.ThisApplication;`

# wpf - 访问在祖先资源中定义的 DataTemplate

> ID：11002666
> 
> 赞同：0
> 
> 时间：2012-06-12T18:32:34.490
> 
> 标签：wpf, resourcedictionary, windows-phone-7.1.1

我正在尝试访问其子级中派生抽象类（来自PhoneApplicationPage）的资源。这是一个更具体的例子：

**父 WPF**

```
<phone:PhoneApplicationPage.Resources >
    <DataTemplate x:Key="EntryTemplateAbstract">
        <!-- some ui elements -->
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

**子 WPF**

```
<controls:Pivot ItemTemplate="{StaticResource EntryTemplateAbstract}" /> 
```

由于 DataTemplate 的性质 - 包含点击事件 - 我无法将其移动到应用程序资源中。虽然理论上这会起作用。

附带说明：有趣的是，我无法在父构造函数或子构造函数中访问资源。

```
var test = base.Resources["EntryTemplateAbstract"]; /* <- always returns null */ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:46:54.250

我想我解决了这个问题。这是由于我的疏忽造成的，因为我忘记在基本构造函数中调用 InitializeComponent()。

# wpf - 在 WPF 中编辑变量列表的最佳方法是什么？

> ID：11002675
> 
> 赞同：0
> 
> 时间：2012-06-12T18:33:08.967
> 
> 标签：wpf, datagrid, wpfdatagrid

我想在 WPF 表单中添加一些行数和列数可变的数据，对其进行编辑并将其取回（以供将来保存和加载）。

我只想知道哪种方法最适合？

我已经尝试过，`DataGrid`但似乎只有在我设置`ItemSource`属性时才允许我编辑单元格，但我不能这样做，因为我在运行时添加列而没有任何类实例，因为每次列数都不同。

**例如**：

我需要一个`5x60`（5 列和 60 行）表。然后（比如说 5 分钟）我需要一个`9x30`（9 列，30 行）表。然后是另一个。而且我一直需要让`DataGrid`（或其他）可编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:19:30.017

似乎唯一的方法是创建`TextBox`-filled `UniformGrid`。

# ios - 弹出视图以选择图像

> ID：11002682
> 
> 赞同：0
> 
> 时间：2012-06-12T18:33:28.153
> 
> 标签：ios, uiview, uiimagepickercontroller

我想创建一个如下图所示的示例，而是从照片库中选择图像或使用相机拍照（如 facebook 应用程序）。这个视图是内置的还是我需要创建自定义视图？

![例子](../Images/0e63c3500b5986285b536769bf67dd44.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:48:39.177

所以你想要一个 UIActionSheet？

做这个：

```
UIActionSheet *actionSheet = [[UIActionSheet alloc] 
                                  initWithTitle:@"What do you want to do?" 
                                  delegate:self 
                                  cancelButtonTitle:@"Cancel" 
                                  destructiveButtonTitle:nil 
                                  otherButtonTitles:@"Camera", @"Photos", nil];
    [actionSheet showInView:self.view];
    [actionSheet release]; 
```

然后在 clickedButtonAtIndex 做这样的事情：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;

    if ([[actionSheet buttonTitleAtIndex:buttonIndex] isEqualToString:@"Camera"]) {
        picker.sourceType = UIImagePickerControllerSourceTypeCamera; 
    } 
    else if ([[actionSheet buttonTitleAtIndex:buttonIndex] isEqualToString:@"Photos"]) {
        picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    }
   [self presentModalViewController:picker animated:YES];
   [picker release];
} 
```

# iphone - 恢复自动续订订阅的应用内交易？

> ID：11002686
> 
> 赞同：0
> 
> 时间：2012-06-12T18:33:45.400
> 
> 标签：iphone, objective-c, ios, xcode, in-app

我正在尝试恢复用户的购买并在应用程序中重新启用自动更新功能；但是似乎每当我调用这个函数时

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

出于某种原因，我得到了我所做的所有交易的列表，这个函数被调用的数量与队列中的交易数量一样多（不知道为什么）

```
- (void)restoreTransaction:(SKPaymentTransaction *)transaction
{
    [self recordTransaction:transaction.originalTransaction];
    [self provideContent:transaction.originalTransaction.payment.productIdentifier];
    [self finishTransaction:transaction wasSuccessful:YES];
} 
```

这会导致该应用多次重新启用专业版功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:37:55.090

这就是它应该做的。它正在恢复每笔交易。每次自动续订交易续订时，您都会获得一笔新交易。只需检查您是否已经在上述方法中恢复了该功能，如果有，请忽略恢复的事务。

# java - 对于此设计，JFrame 与 Jpanels 或 JDesktop 与 JInternalFrames 哪个是更好的顶级容器

> ID：11002687
> 
> 赞同：2
> 
> 时间：2012-06-12T18:33:47.873
> 
> 标签：java, swing, awt, java-2d

我是 Swing 和 AWT 的初学者，我正在寻找使用 Netbeans 构建 GUI。我的 GUI 需要三个区域，我目前将其视为 JFrame 上的 JPanel。我需要一个“绘图”面板来监听鼠标输入并绘制 Java2D 形状。绘图面板将固定在左上角。其他两个区域是“属性”滚动窗格和“控制器”滚动窗格。控制器窗格将确定将通过按钮显示哪些绘制的元素，属性滚动窗格将显示有关在绘图窗格中单击的任何形状对象的详细信息（端点、颜色等）。

绘图区域的一个典型用例是，在绘图区域中的第一次单击将是形状的第一组坐标，即：一条线。该点击将被捕获为 point2d 对象。第二次单击将是第二个 point2D 对象，并且将在两者之间建立一条线。控制器区域将具有“圆形”“线”“椭圆”等按钮。根据单击的控制器按钮，仅在绘图区域中绘制该类型的形状。控制器和属性滚动窗格将不可移动，它们将被锁定并分别调整到 GUI 的底部和右侧。

作为初学者，我正在努力使用最好的组件。我一直在阅读 JDesktop 和 JInternalFrame，但似乎我并不真的需要这些。一个带有三个 JPanel 的简单 JFrame 就足够了，对吧？更具体地说，我认为我需要一个顶级 JFrame，一个用于绘图框的 JPanel 和两个 JScrollPanel。我需要绘图窗格上的鼠标侦听器来捕获每次单击的坐标，以及控制窗格中每个按钮的侦听器。我可以在 JPanel 上放置一个鼠标侦听器，并为其绘制 Java2D 形状，还是需要在 JPanel 内使用不同的（更好的？）容器来进行绘图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T18:52:42.017

[`GraphPanel`](https://sites.google.com/site/drjohnbmatthews/graphpanel)可能会给您一些构建此类应用程序的想法。

![图形面板截图](../Images/f7fb6d024f53471a2b86d26c6250cadb.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T18:44:53.330

JInternalFrames 通常有标题栏、离开框等。[这里的示例](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JInternalFrame.html)似乎不适合您的模型。（除非您希望用户能够将面板移动到他们想要的任何地方，或者让它们消失？）所以我建议使用 JPanel 的更简单的 JFrame。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T19:00:24.917

考虑两个 JSplitPanes 来分隔绘图区、控制区和属性区。JSplitPane 允许用户通过用鼠标单击并拖动分割线来调整区域的大小。

![在此处输入图像描述](../Images/13f53eb5c28686958e163b1090754024.png)

（使用 JFrame 作为顶级组件。）

作为初学者，如果您不需要调整大小和滚动，如果您制作一个不调整大小或滚动的应用程序，您将有更轻松的时间。

# android - ActionBar setBackgroundDrawable() 从 Thread/Handler 清空背景

> ID：11002691
> 
> 赞同：11
> 
> 时间：2012-06-12T18:34:07.643
> 
> 标签：android, handler, android-actionbar, actionbarsherlock

我正在尝试从处理程序更改 ActionBar 的背景。最终目标是将 Handler 传递给 AsyncTask，但现在即使从 Thread 调用 Handler.sendMessage() 也会导致奇怪的行为。通过调试器，我可以看到处理程序接收到消息并随后运行 setActionBarBackground() 直到结束。

底部为蓝色笔划的默认 ActionBar 完全从屏幕上消失，并且不会被新的 GradientDrawable 取代。我怀疑背景以某种方式无效。此外，当我再次关注 EditText 时，会出现正确的 GradientDrawable ActionBar 背景。我期望的行为是让背景在 actionDone 上进行简单的更改。

任何关于为什么会发生这种情况的见解将不胜感激！

相关代码：

测试活动.java

```
public class TestActivity extends RoboSherlockFragmentActivity {

    @InjectView(R.id.ET_test) EditText testET;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i(MainApp.TAG, "onCreate");
        setContentView(R.layout.test_activity);

        testET.setOnEditorActionListener(new TextView.OnEditorActionListener() {
            @Override
            public boolean onEditorAction(TextView textView, int i, KeyEvent keyEvent) {
                if (i == EditorInfo.IME_ACTION_DONE) {
                    String loc = testET.getText().toString();
                    InputMethodManager mgr = (InputMethodManager) getSystemService(
                            Context.INPUT_METHOD_SERVICE);
                    mgr.hideSoftInputFromWindow(testET.getWindowToken(), 0);
                    Toast.makeText(TestActivity.this, "EditText done!", Toast.LENGTH_SHORT).show();

                    /*TestQuery tq = new TestQuery(TestActivity.this, mHandler);
                    tq.execute();*/
                    new Thread(new Runnable() {
                        public void run() {
                            try {
                                Thread.sleep(1000);
                            } catch (InterruptedException e) {
                                e.printStackTrace();
                            }
                            mHandler.sendMessage(new Message());
                        }
                    }).start();
                }
                return true;
            }
        });
    }

    private Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            //setActivityColors();
            setActionBarBackground();
        }
    };

    private void setActionBarBackground() {
        ActionBar ab = getSupportActionBar();
        //Drawable d = WidgetUtils.getActionBarDrawable(TestActivity.this, 0xFF00FFFF);

        GradientDrawable gd = new GradientDrawable(
                GradientDrawable.Orientation.TOP_BOTTOM,
                new int[]{0xFFFFFFFF, 0xFF000000});
        gd.setCornerRadius(0f);
        ab.setBackgroundDrawable(gd);
    }

} 
```

test_activity.xml

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="button"/>
    <EditText
        android:id="@+id/ET_test"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:singleLine="true"
        android:maxLines="1"
        android:lines="1"
        android:inputType="number"
        android:imeOptions="actionDone"
        android:nextFocusUp="@id/ET_test"
        android:nextFocusLeft="@id/ET_test"/>
    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="button2"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-16T19:53:52.860

Hendrik 的解决方法可以解决问题，但在使用自定义标题视图时却不行。这可以代替：

```
actionBar.setBackgroundDrawable(newBackground);
actionBar.setDisplayShowTitleEnabled(true);
actionBar.setDisplayShowTitleEnabled(false); 
```

不过，您可能需要一个标题集才能使其正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T09:46:30.227

我遇到了同样的问题。当我将操作栏的背景动态更改为`setBackgroundDrawable()`new`GradientDrawable`时，操作栏将变为全黑。

我发现这与操作栏标题有关。我不使用标题并将其设置为空字符串。出于测试目的，我将其设置为测试字符串“Test”，问题`setBackgroundDrawable()`立即消失。对我来说，这看起来像是 ICS 中的错误。

因此，以下解决方法对我有用，而不是隐藏和显示操作栏：

```
actionBar.setBackgroundDrawable(newBackground);
actionBar.setTitle(".");
actionBar.setTitle(""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:51:27.253

好吧，这似乎是一个疯狂的边缘案例，它发生在 ActionBarSherlock 和 ActionBar 的 Android 实现中。我最终调用 ab.hide() 和 ab.show() 来解决它...:(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:49:07.657

我也在使用 ActionBarSherlock，我也想通过在任意时间`Drawable`调用来更改 ActionBar的背景。`setBackgroundDrawable()`但是，我发现背景颜色设置一次后，后续调用`setBackgroundDrawable()`似乎没有任何效果。我认为这与您遇到的问题相似。

为了绕过它，我作弊了。我只是`View`在我的布局中放置了一个，它会出现在 ActionBar 的后面，并使 ActionBar 本身透明。通过调用ActionBar可以轻松地将高度`View`设置为正确的高度。`getHeight()`

# hibernate - 休眠条件查询 - 子属性的属性

> ID：11002695
> 
> 赞同：0
> 
> 时间：2012-06-12T18:34:31.683
> 
> 标签：hibernate, hibernate-criteria

我正在使用带有 jqgrid 插件的 spring MVC 3.0。我正在为 jqgrid 构建搜索功能，它将一个 json 对象发送到服务器端。每当触发搜索时，我创建了一个虚拟 java 类来解析 jqgrid 的 json。到目前为止，一切都很好。

我正在动态创建我的条件查询，因为用户可以自由选择搜索条件（相等，不相等，......等）。下面是 jqgrid 发送的 json 字符串的示例。

```
{
    "groupOp": "AND",
    "rules": [{
        "field": "company",
        "op": "cn",
        "data": "School"},
    {
        "field": "numberOfStudents",
        "op": "eq",
        "data": "2"}]
}​ 
```

这是用作模板来解析此 JSON 的 Java 类：

```
public class JsonJqgridSearchModel {

    public String groupOp;

    public ArrayList<JqgridSearchCriteria> rules;
} 
```

注意名为 JqgridSearchCriteria 的类型。`getRestriction()`这是一个类，只要我调用它的方法，它就会简单地返回一个限制。这是`JqgridSearchCriteria`课程：

```
public class JqgridSearchCriteria {

    public String field;

    public String op;

    public String data;

    public SimpleExpression getRestriction(){
        if(op.equals("cn")){
            return Restrictions.like(field, data, MatchMode.ANYWHERE);
        }else if(op.equals("eq")){
            return Restrictions.eq(field, data);
        }else if(op.equals("ne")){
            return Restrictions.ne(field, data);
        }else if(op.equals("lt")){
            return Restrictions.lt(field, data);
        }else if(op.equals("le")){
            return Restrictions.le(field, data);
        }else if(op.equals("gt")){
            return Restrictions.gt(field, data);
        }else if(op.equals("ge")){
            return Restrictions.ge(field, data);
        }else{
            return null;
        }       
    }   
} 
```

如果您观察 JSON 字符串，您将了解为什么使用**字段**和**数据**通过 getRestriction() 返回 SimpleExpression。

事情是这样的：我有**Object-A**，它有**Object-B**作为参考。我从网格中得到的是**Object-B.getName()**因此有一个`JqgridSearchCriteria`where **field=Object-B.getName()**并且数据是用户提供的名称。当它运行时，我得到一个异常如下：

```
Internal Error
Sorry, we encountered an internal error.
Details
could not get a field value by reflection getter of tt.edu.sbcs.model.Organization.id
org.hibernate.property.DirectPropertyAccessor$DirectGetter.get(DirectPropertyAccessor.java:62)
org.hibernate.tuple.entity.AbstractEntityTuplizer.getIdentifier(AbstractEntityTuplizer.java:230)
org.hibernate.persister.entity.AbstractEntityPersister.getIdentifier(AbstractEntityPersister.java:3852)
org.hibernate.persister.entity.AbstractEntityPersister.isTransient(AbstractEntityPersister.java:3560)
org.hibernate.engine.ForeignKeys.isTransient(ForeignKeys.java:204)
org.hibernate.engine.ForeignKeys.getEntityIdentifierIfNotUnsaved(ForeignKeys.java:243)
org.hibernate.type.EntityType.getIdentifier(EntityType.java:449)
org.hibernate.type.ManyToOneType.nullSafeSet(ManyToOneType.java:142)
org.hibernate.loader.Loader.bindPositionalParameters(Loader.java:1789)
org.hibernate.loader.Loader.bindParameterValues(Loader.java:1760)
                               .
                               .
                               .** 
```

这是所有内容的一个片段。

```
Criteria criteria = session.createCriteria(CorporateRegistration.class); 
Iterator<JqgridSearchCriteria> iterator = jsonJqgridSearchModel.rules.iterator();
String operation = jsonJqgridSearchModel.groupOp;
if(operation.equals("AND")){
    Conjunction conjunction = Restrictions.conjunction();
    while(iterator.hasNext()){  
        conjunction.add(iterator.next().getRestriction());
    }           
    criteria.add(conjunction);
}//conjunctions are for AND operation
else{
    Disjunction disjunction = Restrictions.disjunction();
    while(iterator.hasNext()){  
        disjunction.add(iterator.next().getRestriction());
    }           
    criteria.add(disjunction);          
}//disjunctions are for OR operations       
    for(Object o: criteria.list()){
        corpRegList.add((CorporateRegistration)o);
    } 
```

我也尝试搜索数字，但遇到的值是一个字符串。我是否使用标准的 createAlias？我可以在返回 SimpleExpression 时指定名为 data 的属性的数据类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:21:27.563

对于那些可能正在寻找答案的人，我使用了一个子标准。也就是说，如果您有一个称为**A**的标准，对于这些类型的情况，您可以说`A.createCriteria(field).add(conjunction);` where 字段指的是拥有实体中的实际属性。这是我创建的内容，以允许更通用的特定于项目的搜索逻辑。所以当你打电话时，`A.list()`你很高兴。它有点长，但很容易理解。

```
public class JqgridSearchCriteria {

    public String field;

    public String op;

    public String data;

    public String dataType;

    public String dataProperty;

    public SimpleExpression getSimpleExpression(String myField, Object o){
        if(op.equals("cn")){
            return Restrictions.like(myField, o.toString(), MatchMode.ANYWHERE);
        }else if(op.equals("eq")){
            return Restrictions.eq(myField, o);
        }else if(op.equals("ne")){
            return Restrictions.ne(myField, o);
        }else if(op.equals("lt")){
            return Restrictions.lt(myField, o);
        }else if(op.equals("le")){
            return Restrictions.le(myField, o);
        }else if(op.equals("gt")){
            return Restrictions.gt(myField, o);
        }else if(op.equals("ge")){
            return Restrictions.ge(myField, o);
        }else{
            return null;
        }       
    }   

    public void addMyRestriction(String groupOperation, Criteria criteria){
        Conjunction conjunction = Restrictions.conjunction();
        Disjunction disjunction = Restrictions.disjunction();
        if(groupOperation.equals("AND")){
            if(dataType.isEmpty()){
                conjunction.add(this.getSimpleExpression(field, data));
                criteria.add(conjunction);
            }else{
                if(dataType.equals("Calendar")){
                    try{
                        DateFormat formatter = new SimpleDateFormat("MMMM dd, yyyy");
                        Date date = (Date)formatter.parse(data);
                        Calendar cal = Calendar.getInstance();
                        cal.setTime(date);
                        conjunction.add(this.getSimpleExpression(field, cal));
                        criteria.add(conjunction);
                    }catch (ParseException e){
                        System.out.println("Exception :"+e);
                    }                   //used for calendar data types 
                }else if(dataType.equals("Long")){
                    Long myLong = Long.parseLong(data);
                    conjunction.add(this.getSimpleExpression(field, myLong));
                    criteria.add(conjunction);
                                        //used for Long data types
                }else if(dataType.equals("Integer")){
                    Integer myInt = Integer.parseInt(data);
                    conjunction.add(this.getSimpleExpression(field, myInt));
                    criteria.add(conjunction);
                                        //used for Integer data types
                }else{
                    conjunction.add(this.getSimpleExpression(dataProperty, data));
                    criteria.createCriteria(field).add(conjunction);
                }                       //used for custom or project specific data types
            }// AND operation used conjunctions
        }else{
            if(dataType.isEmpty()){
                disjunction.add(this.getSimpleExpression(field, data));
                criteria.add(disjunction);
            }else{

                if(dataType.equals("Calendar")){
                    try{
                        DateFormat formatter = new SimpleDateFormat("MMMM dd, yyyy");
                        Date date = (Date)formatter.parse(data);
                        Calendar cal = Calendar.getInstance();
                        cal.setTime(date);
                        disjunction.add(this.getSimpleExpression(field, cal));
                        criteria.add(disjunction);
                    }catch (ParseException e){
                        System.out.println("Exception :"+e);
                    } 
                }else if(dataType.equals("Long")){
                    Long myLong = Long.parseLong(data);
                    disjunction.add(this.getSimpleExpression(field, myLong));
                    criteria.add(disjunction);
                }else if(dataType.equals("Integer")){
                    Integer myInt = Integer.parseInt(data);
                    disjunction.add(this.getSimpleExpression(field, myInt));
                    criteria.add(disjunction);
                }else{
                    disjunction.add(this.getSimpleExpression(dataProperty, data));
                    criteria.createCriteria(field).add(disjunction);
                }
            }           
        }// OR operation used disjunctions
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:26:21.400

关于搜索数字，我认为您将需要 JqgridSearchCriteria 类上的“类型”属性。此外，在 UI 中，您可能希望定制可用的运算符，例如，用户不能为数值选择“包含”。

在我们刚刚开发的类似系统中，我们使用 ['string', 'number', 'date'] 作为搜索值类型。用户可以选择进行搜索的每一列都有一个类型，以便我们可以使用 javascript 来显示适当的运算符列表。

这意味着您将知道在构建 Criteria 时正确转换搜索条件值。它增加了您的应用程序的复杂性，但我没有看到任何替代方案。

# php - 从 CURL 中的表单中提取数据

> ID：11002698
> 
> 赞同：0
> 
> 时间：2012-06-12T18:34:45.020
> 
> 标签：php, mysql, curl

有人可以指导我如何使用 DOMDocument() 从下面的表单中提取内容吗？. 我能够提取所有链接，即 ../index.html、descriptions/page001 等，并将提取的数据保存到 mysql 数据库中，但我被困在如何获取内容，即会计、成人继续教育等并将信息保存到数据库中。

```
<HTML>
<HEAD></HEAD>
<BODY>
<FORM ACTION="#">
<SELECT ONCHANGE="MM_jumpMenu('parent',this,0)" NAME="menu1"> 
<OPTION VALUE="../index.html" SELECTED="SELECTED"></OPTION> 
<OPTION VALUE="descriptions/page001.html">Accounting</OPTION> 
<OPTION VALUE="descriptions/page122.html">Adult Continuing Education</OPTION>
<OPTION VALUE="descriptions/page115.html">Energy Engineering</OPTION> 
</SELECT>
</P></FORM> 
</BODY>
</HTML>

MY CURL SCRIPT
// parse the html into a DOMDocument
$dom = new DOMDocument();
@$dom->loadHTML($html);

// grab all on the page
$xpath = new DOMXPath($dom);

// GET AND LOOP THROUGH LINKS
$values = $xpath->evaluate("/html/body//option");
for ($cnt = 0; $cnt < $values->length; $cnt++) {
$value = $values->item($cnt);
$url = $value->getAttribute('value');
    //store extracted links and links source into the database function
storeLink($url,$target_url);
echo "Link stored: $url";
} 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:56:02.480

对于标签之间的值，例如会计：

`<OPTION VALUE="descriptions/page001.html">Accounting</OPTION>`

你需要`->nodeValue`

```
...
$options = $document->getElementsByTagName('option');

foreach ($options as $option) {
  storeLink($option->getAttribute('value'), $option->nodeValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:42:55.937

这是解决方案：

```
$html = '<HTML>
  <HEAD></HEAD>
  <BODY>
  <FORM ACTION="#">
  <SELECT ONCHANGE="MM_jumpMenu(\'parent\',this,0)" NAME="menu1"> 
  <OPTION VALUE="../index.html" SELECTED="SELECTED"></OPTION> 
  <OPTION VALUE="descriptions/page001.html">Accounting</OPTION> 
  <OPTION VALUE="descriptions/page122.html">Adult Continuing Education</OPTION>
  <OPTION VALUE="descriptions/page115.html">Energy Engineering</OPTION> 
  </SELECT>
  </P></FORM> 
  </BODY>
  </HTML>';

$document = new DOMDocument();
$document->loadHTML($html);
$options = $document->getElementsByTagName('option');

foreach ($options as $option) {
  echo $option->getAttribute('value');
  echo "\n";
} 
```

# sql-server - sys.dm_tran_current_transaction。transaction_id 的唯一性

> ID：11002700
> 
> 赞同：5
> 
> 时间：2012-06-12T18:34:59.547
> 
> 标签：sql-server

我在我的审计触发器中从 sys.dm_tran_current_transaction 捕获 transaction_id。我想知道的是transaction_id的唯一性。文档只说“当前快照的事务 ID”。

我只能假设这个“ID”将在以后重复使用，但我希望能对此进行一些确认。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:52:48.253

**[参考详情可在此链接查看](http://blog.sqlauthority.com/2009/04/11/sql-server-interesting-observation-of-dmv-of-active-transactions-and-dmv-of-current-transactions/)**

![在此处输入图像描述](../Images/8f805676ef1c0749997c27687361d780.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-31T10:57:55.200

@abcdefghi 的答案很好，但只是补充一下；

*   Transaction_id 在一个事务中是相同的，
*   在显式事务之外，每个批次的 transaction_id 更新，
*   transaction_id 在服务器重置时重置，因此随着时间的推移您将遇到相同的 transaction_id。

这导致您不能在审计表中使用 transaction_id，因为这种情况；

使用 transaction_id = 42 插入审计记录 sql server reset ... 执行了 41 个新批次 ... 插入了 transaction_id = 42 的审计记录

此外，您不能像时间戳一样使用 transaction_id（较高的值并不意味着以后的更改_并且您不能说相同的 ID 意味着相同的事务。

# sql-server-2008 - 可变列输出

> ID：11002701
> 
> 赞同：-1
> 
> 时间：2012-06-12T18:35:03.337
> 
> 标签：sql-server-2008, tsql, loops, while-loop, case

我可以使用循环根据计算创建可变数量的列吗？

表 A：包含 id、name、date、item 列。它显示谁在哪一天购买了一件物品。每次购买商品时，名称都会出现多次。id 是唯一的。

表 B：有名称，开始日期。它显示名称何时开始工作。

（我知道如何将 name 与 begindate 相关联，所以它实际上不在下面的伪代码中。）

表 C 是我希望我的结果看起来像的样子：

```
name   itemsday1 itemsday2 itemsday3... itemsdayn 
```

第二列对应于今天购买的物品，最后一列对应于名称开始日期之前购买的物品。列数需要根据最早开始的人而有所不同。我希望我的查询循环并为从 begindate 到今天的每一天创建一个列，它计算当天 Name 购买的商品数量。

伪代码：

```
declare mostd INT
select datediff(dd, begindate, getdate()) as spans  into #span from B
set mostd = select max(spans) from #span

select
    name
    ,while mostd !=0
        begin
            case when???
                count(items)
            end as column.mostd
            mostd=mostd-1
        end
    end
from A (join B blah blah)
group by name

Results
NAME    column4    column3    column2    column1    column0
James   9          8          7          6          NULL
Wade    5          4          3          NULL       NULL
Bosh    2          1          NULL       NULL       NULL
Durant  0          9          8          NULL       NULL 
```

TSQL 可以做到这一点吗？你能帮我把它固化成真正的代码吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:45:01.570

关于动态旋转数据的 SO 有一些答案 - 这是我提供的答案，知道它是一件有用的事情。

[sql server 2008 基于序数值的动态透视](https://stackoverflow.com/questions/6022742/sql-server-2008-dynamic-pivot-based-on-ordinal-value/7144869#7144869)

通过使用 XML PATH 运算符，您还可以在结果集中获得体面的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:53:33.743

这可以使用 PIVOT 运算符[http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

更新：一个例子。它的灵感来自这篇伟大的文章：[http](http://dotnetgalactics.wordpress.com/2009/10/23/using-sql-server-20052008-pivot-on-unknown-number-of-columns-dynamic-pivot/) ://dotnetgalactics.wordpress.com/2009/10/23/using-sql-server-20052008-pivot-on-unknown-number-of-columns-dynamic-pivot/ ：

```
-- create table #items (id int, name varchar(40), date datetime, userid int)
-- create table #users (id int, name varchar(40), begindate datetime)

declare @dates varchar(4000)
declare @query varchar(4000)

SELECT  @dates = STUFF(( SELECT DISTINCT
                        '],[' + cast(date as varchar(30))
                        FROM    #items
                        ORDER BY '],[' + cast(date as varchar(30))
                        FOR XML PATH('')
                        ), 1, 2, '') + ']'

set @query = 'SELECT * FROM (SELECT #users.name, date FROM #items
        INNER JOIN #users ON #items.userid = #users.id) items 
        PIVOT (COUNT(date) FOR date IN (' + @dates + ')) pvt'

EXECUTE(@query) 
```

结果：

```
name  2012-10-01 2012-10-02 2012-10-03 2012-10-04 2012-10-05 2012-10-06 2012-10-07

user1     0          0           1          0          0          1         0
user2     1          6           0          0          0          1         1
user3     1          1           7          0          0          3         0
user4     0          0           0          1          1          1         1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:55:08.370

您将需要使用动态 SQL 来执行此操作。从...开始

```
DECLARE @SelectSQL varchar(max) = "SELECT name"; 
```

然后执行 while 循环，跟踪字段名称的整数计数器（如果您真的想以相反的顺序执行此操作，则需要使用 DATEDIFF(day, getdate(), begindate) 并倒数）。对于您想要一列表示的每一天，输出以下内容：

```
SELECT @SelectSQL = @SelectSQL + ', (SELECT COUNT(id) FROM TableA where name = TableB.name AND [date] = ''' + CONVERT(varchar, @mostd) + ''') AS column' + str(@ColumnCounter) 
```

然后，在循环之外，您将查询的其余部分挂起：

```
@SelectSQL = @SelectSQL + ' FROM TableB'; 
```

请注意，不要加入到 TableA，因为这一切都在子查询中得到处理。此外，出于同样的原因，您不需要`GROUP BY.`

**编辑：**哎呀，忘了最后一部分。

要执行此操作，只需运行：

```
EXEC (@SelectSQL); 
```

# php - XML-RPC PHP 只发送空数组

> ID：11002706
> 
> 赞同：0
> 
> 时间：2012-06-12T18:35:14.567
> 
> 标签：php, joomla, xml-rpc, joomla2.5

我在服务器上运行它，使用 Joomla 的 XMLRPC for PHP 实现。无论我尝试发送什么 xmlrpcval（包括`null`）都不会发送。而是发送一个空数组。

相关主码。我尝试过发送不同种类的 xmlrpcmsg（从复杂的数组到简单的字符串）：

```
$articleData = new xmlrpcmsg("insertContent", array(new xmlrpcval($articleArray, "struct")));
$client = new xmlrpc_client("/administrator/components/com_quickagencyslave/remote/easyblog.php", $clientArray["url"]);
$response = $client->send($articleData); 
```

从属代码（不是实际功能，只是试图让它工作：

```
function insertContent($params){        
    $data = $params->getParam(0);
    $result = gettype($data);

    return new xmlrpcresp(new xmlrpcval($result));
} 
```

返回码显示`$data`类型为`NULL`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:41:46.187

As it turns out XMLRPC is very strict about what data it will accept (something that isn't entirely reflected in the [docs](http://phpxmlrpc.sourceforge.net/doc-2/)). An array can't contain plain objects, even if that array has been converted into an XMLRPC object. The code below wraps an array and everything in it into an XMLRPC struct:

```
//Takes an array containing strings, returns an xmlrpc array of xmlrpcvals
function xmlrpcpack($input){
    if(is_array($input)){
        $return = array();
        foreach($input as $item){
            if(gettype($item) === "array")
                $return[] = xmlrpcpack($item);
            else
                $return[] = new xmlrpcval($item);
        }
        return new xmlrpcval($return, "array");
    }else{
        debug_print_backtrace();
    }
} 
```

# historian - 如何将 C# 应用程序中的数据写入 GE Proficy Historian

> ID：11002717
> 
> 赞同：1
> 
> 时间：2012-06-12T18:36:04.803
> 
> 标签：historian, proficy

我想使用 GE Proficy Historian 将未连接到 PLC 的仪器中的数据存档。这可以使用c#来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:13:33.320

您可以使用 Historian c# User API 包装器从 c# 访问和更新 Historian。与客户端工具一起安装的 Historian 文档中提供了有关它的信息。不过，使用来自非 PLC 连接设备的数据更新 Historian 是违反直觉的，因为您在其他地方拥有数据（我假设），而 Historian 旨在记录来自 PLC 和类似设备的活动。

将非 PLC 连接设备的数据读入 c# 可能比将数据写入 Historian 更难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T11:39:02.403

使用 Historian File collector（historian File Collector 是安装了 Histoiran Server 的机器上可用的服务），我们可以将数据写入 Proficy Historian。步骤 1\. 验证 Histoarian 文件收集器服务是否已启动。步骤 2\. 找到文件夹：\Proficy Historian Data\ImportFiles\Incoming.（在服务器上） 步骤 3\. 编写一个程序来创建 csv 文件。在该文件中以以下语法写入日期。语法：Tagname,TimeStamp,Value,DataQuality 示例 TIGER.IMPORT_TAG1.F_CV,7/20/01 11:07,1,Good 步骤 4\. 在上述 lication 上创建此 csv 文件。

Historian 文件收集器将自动处理此 csv 文件，并将文件移动到同一 lication 上可用的已处理文件夹。如果 csv 文件有一些错误，它可以移动到错误文件夹。csv 文件移动到 Processed 文件夹表示数据已写入 historian 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T01:11:32.717

您有 4 个选项：

1.  通过 ihuapi.dll 使用用户 API 接口。现在 GE 提供了 DLL 导入和结构定义，这变得容易了一些，但它仍然有点令人生畏。不过它会起作用。实际上，它工作得很好。

2.  通过 ihsdk.dll 使用 SDK 接口。与用户 API 相比，这实际上更容易使用。SDK 是一个 COM 库，因此必须在机器上注册。

3.  如果仪器符合 OPC，您可以使用 OPC 收集器将数据直接转发到服务器；无需编码。

4.  从 5.0 开始，安装时免费提供收集器工具包。我还不能对此发表太多评论，因为我与定制收藏家的合作并不多。

# ruby-on-rails - 在 Rspec 测试中使用 Devise 进行身份验证

> ID：11002721
> 
> 赞同：14
> 
> 时间：2012-06-12T18:36:31.493
> 
> 标签：ruby-on-rails, rspec, devise

我无法让我的 Rspec 测试在 Devise 尝试在 before_filter 中对用户进行身份验证的项目上正确运行。

我遵循了 Devise Git wiki 中的示例：[How To: Controllers and Views tests with Rails 3 (and rspec)](https://github.com/plataformatec/devise/wiki/How-To:-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)

规范/spec_helper.rb：

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
   config.include Devise::TestHelpers, :type => :controller
   config.extend ControllerMacros, :type => :controller
   config.fixture_path = "#{::Rails.root}/spec/fixtures"
   config.use_transactional_fixtures = true
   config.infer_base_class_for_anonymous_controllers = false
end 
```

规范/支持/controller_macros.rb：

```
 module ControllerMacros
   def login_user
     before(:each) do
       @request.env["devise.mapping"] = Devise.mappings[:user]
       user = FactoryGirl.create(:user)
       sign_in user
     end
   end
 end 
```

规格/控制器/test.rb：

```
require 'spec_helper'
describe ProjectsController do
  def valid_attributes
    {
    :name         => 'Project',
    :description  => 'Description'
    }
  end

  def valid_session
    {}
  end

  describe "Test" do

    login_user

    it "assigns all projects as @projects" do
      # test passes if the following line is here, otherwise fails
      subject.current_user.should_not be_nil

      project = Project.create! valid_attributes
      get :index, {}, valid_session
      assigns(:projects).should eq([project])
    end
  end
end 
```

app/controllers/projects_controller.rb （直接来自生成器，除了添加前过滤器：

```
class ProjectsController < ApplicationController

  before_filter :authenticate_user!

  # GET /projects
  # GET /projects.json
  def index
    @projects = Project.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @projects }
    end
  end

  # GET /projects/1
  # GET /projects/1.json
  def show
    @project = Project.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @project }
    end
  end

  # GET /projects/new
  # GET /projects/new.json
  def new
    @project = Project.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end

  # GET /projects/1/edit
  def edit
    @project = Project.find(params[:id])
  end

  # POST /projects
  # POST /projects.json
  def create
    @project = Project.new(params[:project])

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /projects/1
  # PUT /projects/1.json
  def update
    @project = Project.find(params[:id])

    respond_to do |format|
      if @project.update_attributes(params[:project])
        format.html { redirect_to @project, notice: 'Project was successfully updated.' }
        format.json { head :ok }
      else
        format.html { render action: "edit" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /projects/1
  # DELETE /projects/1.json
  def destroy
    @project = Project.find(params[:id])
    @project.destroy

    respond_to do |format|
      format.html { redirect_to projects_url }
      format.json { head :ok }
    end
  end
end 
```

为什么包含的测试通过`subject.current_user.should_not be_nil`但不包含的测试失败？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-28T09:43:59.297

[遵循您提到的操作](https://github.com/plataformatec/devise/wiki/How-To:-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)方法时，我遇到了同样的问题。解决方案是从每个请求中删除对的调用`valid_session`，因为它会覆盖`sign_in`助手设置的会话值。

它实际上以相同的方法记录在代码块中，我也错过了:(

# sql-server-2008 - 根据sql server中的条件返回空行

> ID：11002722
> 
> 赞同：0
> 
> 时间：2012-06-12T18:36:34.333
> 
> 标签：sql-server-2008

编辑：

我有一个搜索存储过程。存储过程接收一些名为@filter1、@filter2 等的位参数。这些参数指示过程是否将返回上下文过滤器。然而，该过程可能会返回错误。就像是：

```
if error
    select * from erros
else
    select 0

if filter1
    select * from tablea
else
    select 1

select * from search 
```

`select 0`and语句只是为了将`select 1`搜索保持在同一位置，但它们会在后端导致一些意大利面条代码，因为我必须检查表格内容以确定是否存在错误并评估几个过滤器参数为了正确构建我的对象。检查表中有多少行更简单。

我的问题是，是否有一种不昂贵的方法来返回一个空数据集以避免选择 0 和选择 1 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:21:47.833

试试这个

```
select top 0 * from tablea
select top 0 * from tableb 
```

这将返回空行和`TableA`列`TableB`

# java - 通过代码将 Payflow 交易转换为循环配置文件

> ID：11002729
> 
> 赞同：2
> 
> 时间：2012-06-12T18:36:48.473
> 
> 标签：java, paypal, payflowpro

问题：有没有办法通过代码将 Payflow Transaction（任何类型）转换为 Recurring Profile？我们的计费服务要求我们：

1.  通过 Payflow 设置交易，将信用卡信息锁定在 Paypal 的服务器中。
2.  转换/使用该交易来制作经常性档案”
3.  向他们发送指向它的配置文件 ID。

我设置了代码来执行步骤 1 和步骤 3，但我不知道通过代码将任何类型的 Transaction 对象或 Transaction 响应转换为此类配置文件的方法。

我首先更喜欢使用 Java，因为这是我迄今为止一直在使用的语言，但如果这不是一个选项，任何替代方案都将不胜感激。**Payflow 为每种语言/策略提供了许多 API，这使得了解某些内容是否不受支持**成为一项艰巨的任务。

如果有人需要有关我的任务的更多信息，我很乐意提供。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:20:21.780

我不知道它是否仍然是最新的。但是是的，这是可能的，但仅限于销售或延迟捕获交易（如 Payflow Pro 定期计费服务用户指南[https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_PayflowPro_RecurringBilling_Guide 中所述。 .pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_PayflowPro_RecurringBilling_Guide.pdf) )。我为销售交易实现了这个，并且可以证明它是有效的。

唯一的缺陷是，当您创建 RecurringAddTransaction 时将招标设置为 null（因为您没有信用卡信息，如果您设置它，您将收到无效的信用卡号码错误消息）：

```
RecurringAddTransaction trans = 
    new RecurringAddTransaction(userInfo, connection, invoice, null, recurringInfo, requestId); 
```

然后使用`setExtData`方法添加 TENDER 参数（否则您将收到 Invalid Tender 错误消息）：

```
trans.setExtData(new ExtendData("TENDER", PayflowConstants.TENDERTYPE_CARD)); 
```

如果您检查请求，则它看起来像这样：

```
"TRXTYPE=R&TENDER=C&PARTNER=PayPal&VENDOR=Acme&USER=Acme&PWD=a1b2c3d4&ACTIO
N=A&PROFILENAME=RegularSubscription&ORIGID=XYZ123&START=12012002&PAYPERIOD=
WEEK&TERM=12&OPTIONALTRX=S&OPTIONALTRXAMT=2.00&COMMENT1=First-time 
customer&AMT=42.00" 
```

# jquery - 使用 Zend 框架的 JQuery UI 自动完成

> ID：11002730
> 
> 赞同：4
> 
> 时间：2012-06-12T18:36:49.980
> 
> 标签：jquery, zend-framework, autocomplete

我想知道如何在不使用 ZendX 的情况下将自动完成 JQuery UI 小部件添加到我在 Zend Framework 中开发的表单中。该网站的文件夹是根据框架设置的，但我没有使用 Zend_Form。

因此，我将所有内容简化为最简单的形式，该形式有效：

```
<script>
  $(document).ready(function() {
    $("input#autocomplete").autocomplete({
    source: ["best", "buy"]
});
  });
  </script>

<input id="autocomplete" /> 
```

但是我有一个 PHP 文件，它以 JSON 格式从数据库中返回条目。我该如何使用它呢？我尝试用文件名替换数组，但没有任何反应。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T07:10:41.887

这应该适合你：

```
// js stuff
$( "input#autocomplete" ).autocomplete({
    source: "http://localhost/application/index/autocomplete"
});

//IndexController.php

/**
 * Return AutoComplete stuff
 */
public function autocompleteAction()
{
    // disable view and layout, we want some fanzy json returned
    $this->_helper->layout()->disableLayout(); 
    $this->_helper->viewRenderer->setNoRender(true);

    $values = array('best', 'buy');
    $valuesJson = Zend_Json::encode($values);
    echo $valuesJson;
} 
```

您可以将 BaseUrl 传递给您的脚本（而不是使用完整路径）

```
//layout.phtml
<script type="text/javascript">
var baseUrl = "<?= $this->baseUrl(); ?>";
</script> 
```

所以你可以这样做：

```
source: baseUrl + "/index/autocomplete" 
```

# r - ggplot2 - 网格线似乎在对数刻度上的非常小的数字失败

> ID：11002734
> 
> 赞同：4
> 
> 时间：2012-06-12T18:37:00.747
> 
> 标签：r, ggplot2

我在 ggplot2 中以 log10 的比例制作了一堆非常小数字的箱线图。似乎有一些阈值 ggplot2 停止正确显示网格。使用 dat1 的绘图缺少网格线，而 dat2 可以按我的意愿工作。两者之间的差异似乎只是范围问题。

```
library(ggplot2)

set.seed(1234)
dat1 = data.frame(
    val = c(10^(runif(90,-12,-10)), 10^(runif(10,-15,-12)),
            10^(runif(94,-12, -9)), 10^(runif(6, -14,-12))),
    d = c(rep(1,100),rep(2,100))
)

dat2 = data.frame(
    val = c(10^(runif(90,-9,-7)), 10^(runif(10,-11,-9)),
            10^(runif(94,-9,-6)), 10^(runif(6, -10,-9))),
    d = c(rep(1,100),rep(2,100))
)

p = ggplot(dat1, aes(factor(d), val))
print(p + geom_boxplot() + scale_y_log10())

p = ggplot(dat2, aes(factor(d), val))
print(p + geom_boxplot() + scale_y_log10()) 
```

有人有什么建议吗？这是记录日志的数字问题吗？所有值都应大于`.Machine$double.eps`

![网格线在哪里！](../Images/98f57597dd3851496d2613ec1db31180.png) ![找到网格线！](../Images/61d309f53fd59691676a03a58b2805ba.png)

# vb.net - VB6 到 VBNet - ListBox.Selected

> ID：11002736
> 
> 赞同：3
> 
> 时间：2012-06-12T18:37:09.727
> 
> 标签：vb.net, vb6, listbox, vb6-migration

我目前有一个选择案例，它将从记录集中读取名称字段，并从该记录集中读取布尔值，假设确定是否将该字段包含在稍后将生成的报告中。

问题是，在 VB6 中，您可以为 ListBox.Selected(i) 分配一个布尔值

现在，我一生都无法弄清楚将其分配给什么，根据记录集中的布尔值选择或不选择该字段。

**代码：**

```
Do Until rs_1.EOF
        'Until we run out of records ...

        str_FieldName = rs_1.Fields("FieldName").Value
        b_IncludeField = rs_1.Fields("IncludeInBatchReport").Value

        Select Case str_FieldName
            Case "Sequence"
                listbox_Fields.Items.Add("Sequence")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "BldgNo"
                listbox_Fields.Items.Add("BldgNo")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "BldgName"
                listbox_Fields.Items.Add("BldgName")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "BldgFunc"
                listbox_Fields.Items.Add("BldgFunc")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "POC"
                listbox_Fields.Items.Add("POC")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "Phone"
                listbox_Fields.Items.Add("Phone")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "AH_Phone"
                listbox_Fields.Items.Add("AH_Phone")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "Batch"
                listbox_Fields.Items.Add("Batch")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "Status"
                listbox_Fields.Items.Add("Status")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "Region_Req"
                listbox_Fields.Items.Add("Region_Req")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "Region_Alt"
                listbox_Fields.Items.Add("Region_Alt")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "Region_Fin"
                listbox_Fields.Items.Add("Region_Fin")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
            Case "Comments"
                listbox_Fields.Items.Add("Comments")
                listbox_Fields.SelectedItem(listbox_Fields.Items.Count - 1) = b_IncludeField
        End Select

        rs_1.MoveNext()

        '... until we run out of records.
    Loop 
```

如您所见，我已经尝试过 SelectedItem，但这当然行不通。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T18:38:50.957

您正在寻找[`SetSelected(index, bool)`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.setselected.aspx)。

# dns - 每个请求的 DNS 解析

> ID：11002739
> 
> 赞同：2
> 
> 时间：2012-06-12T18:37:32.673
> 
> 标签：dns, ip, resolve

有没有人有任何想法，甚至更好的任何数据来备份它，每个“正常”使用网站会发生多少 DNS 解析。在有人开始问我认为网站的正常使用情况之前，你们有什么想法和数据来支持它。

换句话说，假设用户每个月访问一个网站 20 天，他每天花费一整天时间查看大约 10 个页面，那么假设他每天发出大约 1000 个页面请求。意味着每天有 20 000 个页面请求。

任何 DNS 解析的想法都是因为我知道浏览器和操作系统现金 DNS 解析，但我不知道他们会保留多长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:55:46.803

嗯..这是一个很难正确回答的问题，因为如果你以这种方式问它，它是一个棘手的问题。

您真的无法通过考虑 HTTP 请求来衡量这一点，因为可能会发生很多事情，这会使您的数字发生变化。例如，ISP 或用户刷新其 DNS 缓存，因此需要一个新请求来获取您的域的 IP 地址。此外，一些客户端实现可能会选择不遵守您的到期时间。让我们不要谈论真正可以让您的服务器崩溃的[斜线效果！](http://en.wikipedia.org/wiki/Slashdot_effect)此外，如果您处理邮件，您可能会收到对 MX 记录的请求，并且无论出于何种原因，您都可能会收到来自邪恶实体的大量无效 DNS 请求，这可能会给服务器带来一些不希望的负载。

现在，关于到期时间：DNS 服务器可以配置为分别为每个 DNS 记录设置一个 TTL（生存时间）（如何设置它取决于您的特定服务器和/或托管解决方案）。

如果你不希望改变域名的IP地址，那么你可以设置一个非常高的TTL（以秒为单位），比如86400，相当于1天。这意味着当 ISP 查询您的 DNS 以获取域的 IP 地址时，它将在发出新的 DNS 请求之前保留记录 1 天。

通常，最终用户将查询他们使用的 ISP 的 DNS，因此他们将首先查询（如果需要）ISP 的 DNS 而不是您的 DNS，然后 ISP 将决定（基于 TTL）是否需要查询您自己的 DNS . 如果没有，他们会将缓存的记录提供给客户端。这将大大减少您对自己服务器的请求*。*

有时，DNS 记录用于进行循环解决方案，为每个 DNS 请求返回一个新的 IP 地址。在这种情况下，TTL 可能会短得多。另一种方法是在相同的 IP 地址处理请求，但将它们负载平衡到“内部”服务器，没有公共 IP 地址。

您可以在此处阅读有关 DNS ttl 的更多信息：[http ://www.simpledns.com/help/v51/index.html?df_ttl.htm](http://www.simpledns.com/help/v51/index.html?df_ttl.htm)

希望能帮助到你！

# dependency-injection - 如何将消息放入 Seam 3 中的静态方法

> ID：11002740
> 
> 赞同：1
> 
> 时间：2012-06-12T18:37:35.563
> 
> 标签：dependency-injection, static, cdi, code-injection, seam3

在 Seam 2 中，我们有一个 Component.getInstance(someClass)，它可以用于静态方法来实例化一个 bean。

我如何在 Seam 3 中使用这种方法？

前任：

```
public static someMethod()
{
     SomeClass sc = (SomeClass.class) Component.getInstance(SomeClass.class);
     ...
} 
```

以及如何在静态方法中获取消息？

更新：

我用了

```
BeanManager beanManager = new BeanManagerLocator().getBeanManager();
Bean<?> bean = beanManager.resolve(beanManager.getBeans(SomeClass.class));
SomeClass sc = (SomeClass) beanManager.getReference(bean, SomeClass.class, beanManager.createCreationalContext(bean)); 
```

一切正常。但是所有这些代码都必须编写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:29:12.013

您可以在[BeanManager](http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html#d0e4939)中查询CDI bean 的实例。这应该在任何情况下都有效，不管是静态的还是非静态的。顺便说一句，它不是特定于 Seam 3 的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:08:14.987

在这里[http://javalabor.blogspot.in/2011/08/our-seam-2-to-jee-6-replacement-list.html](http://javalabor.blogspot.in/2011/08/our-seam-2-to-jee-6-replacement-list.html)你可以找到解决方案。

# objective-c - 为什么我的 NSManagedObject 不符合 KVC？

> ID：11002743
> 
> 赞同：2
> 
> 时间：2012-06-12T18:37:53.947
> 
> 标签：objective-c, ios, core-data, ios5, key-value-coding

我正在尝试使用 KVC 来检索使用核心数据构建的自定义 NSManagedObject 实体的属性值。尝试访问几个级别的属性时，我遇到了 UnknownKeyException，而对于我的生活，我无法弄清楚为什么......

根实体称为“Catch”。它具有许多属性：重量、长度等。它还与另一个称为“物种”的实体具有一对一的关系。Species 有一个名称属性定义为 NSString。

所以：

```
//this will output the species name (i.e. "Brook Trout")
NSLog(@"Catch.species.name = %@", catch.species.name);

//this will throw a NSUnknownKeyException
NSLog(@"Catch.species.name = %@", [catch valueForKey:@"species.name"]);

//but this works...!?
Species *species = (Species*)[catch valueForKey:@"species"];
NSLog(@"Species.name = %@", species.name); 
```

具体异常详情如下：

***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[valueForUndefinedKey:]：实体 Catch 与键“species.name”的键值编码不兼容。

有谁比我更了解这些东西的人知道发生了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T18:42:51.603

在这种情况下，尝试使用`-valueForKeyPath:`而不是`-valueForKey:`一串键，即“species.name”。

# oracle - USER() 和 SYS_CONTEXT('USERENV','CURRENT_USER') 有什么区别？

> ID：11002746
> 
> 赞同：20
> 
> 时间：2012-06-12T18:37:59.153
> 
> 标签：oracle, plsql, oracle10g, oracle11g

在 Oracle 数据库中，以下各项有什么区别：

*   用户（）
*   sys_context('USERENV', 'CURRENT_USER')
*   sys_context('USERENV', 'SESSION_USER')

这些是否也可能与“当前用户”相关的值？

*   sys_context('USERENV', 'CURRENT_SCHEMA')
*   sys_context('USERENV', 'AUTHENTICATED_IDENTITY')

我特别感兴趣的是哪些可以更改，哪些可以更改，哪些不能更改值，哪些根据连接类型具有不同的值，哪些始终是用于登录的模式数据库。

在我的大多数测试中，这些值总是相同的。唯一的例外是在运行以下命令来更改“CURRENT_SCHEMA”时：

```
alter session set current_schema=<SCHEMA> 
```

执行以下操作会导致错误：

```
alter session set current_user=<USER> --even as sys/system, which is good I suppose 
```

因此，所有这些都存在某种安全/规则。但是，拥有 SESSION_USER 和 CURRENT_USER 背后一定有一些原因。我还认为 user() 可能是 sys_context('USERENV', 'CURRENT_USER') 的快捷方式，但我找不到有关此事的文档。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-12T21:30:41.283

来自手册：[http ://docs.oracle.com/cd/E11882_01/server.112/e26088/functions184.htm#SQLRF51825](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions184.htm#SQLRF51825)

### 当前用户

> 权限当前处于活动状态的数据库用户的名称。这可能会在会话期间发生变化，以反映任何活动定义者权利对象的所有者。当没有定义者的权限对象处于活动状态时，CURRENT_USER 返回与 SESSION_USER 相同的值。当直接在视图定义的主体中使用时，这将返回正在执行正在使用视图的光标的用户；它不尊重游标中使用的视图作为定义者的权利。

### SESSION_USER

> 登录时数据库用户的名称。对于企业用户，返回架构。对于其他用户，返回数据库用户名。该值在整个会话期间保持不变。

因此 SESSION_USER 和 CURRENT_USER 之间存在**差异**，尤其是当 CURRENT_USER 用于存储过程或函数时。

我不得不承认我不知道“企业用户”这个词是什么意思。

顺便说一句：还有第三个：

### SESSION_USERID

> 登录时数据库用户的标识符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T21:01:39.440

`sys_context('USERENV', 'CURRENT_SCHEMA')`- 当前正在使用的模式以及您已经发现的模式可以更改为`alter session`

`sys_context('USERENV', 'SESSION_USER')`- 在创建会话期间用于身份验证的用户，不能更改

`sys_context('USERENV', 'CURRENT_USER')`-~~很像“session_user”~~已弃用（至少根据[10g 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions165.htm)）
（根据@a_horse_with_no_name 的回答和他对[11g 文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions184.htm#SQLRF51825)的参考进行编辑）

`sys_context('USERENV', 'AUTHENTICATED_IDENTITY')`- 用于身份验证的身份取决于“AUTHENTICATION_METHOD”。
来自[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions165.htm)：

> *   Kerberos 认证的企业用户：kerberos 主体名称
> *   Kerberos 认证的外部用户：kerberos 主体名称；与架构名称相同
> *   SSL认证企业用户：用户PKI证书中的DN
> *   SSL认证的外部用户：用户PKI证书中的DN
> *   密码认证企业用户：昵称；与登录名相同
> *   密码认证的数据库用户：数据库用户名；与架构名称相同
> *   OS-authenticated external user：外部操作系统用户名
> *   Radius/DCE 认证的外部用户：模式名称
> *   带 DN 的代理：客户端的 Oracle Internet Directory DN
> *   带证书的代理：客户端的证书 DN
> *   Proxy with username：如果客户端是本地数据库用户，则为数据库用户名；如果客户端是企业用户，则为昵称。
> *   SYSDBA/SYSOPER 使用密码文件：登录名
> *   SYSDBA/SYSOPER 使用 OS 认证：操作系统用户名

`user pseudo column`- 我不确定，根据文件我认为它就像`CURRENT_SCHEMA`但显然它就像`CURRENT_USER`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-10T07:53:16.900

`USER`在使用PL/SQL中的函数时需要考虑一个重要的注意事项。正如我[在这篇博文中所记录的那样](https://blog.jooq.org/2018/09/07/beware-of-hidden-pl-sql-to-sql-context-switches/)，`STANDARD.USER()`实现如下：

```
function USER return varchar2 is
c varchar2(255);
begin
    select user into c from sys.dual;
    return c;
end; 
```

因此，它委托给`user`SQL 引擎中的评估，这会导致隐藏的 PL/SQL 到 SQL 上下文切换。如果您经常这样做，例如在触发器中，那么这在生产系统中可能会非常有害。尽量避免`USER()`从 PL/SQL 调用，`sys_context('USERENV', 'SESSION_USER')`而是使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-03T15:44:32.120

`CURRENT_SCHEMA`是如果您命名一个对象而不指定其所有者将假定的架构。例如，如果 my`CURRENT_SCHEMA`是`SCOTT`，则`SELECT * FROM EMP`与 相同`SELECT * FROM SCOTT.EMP`。默认情况下，当我第一次连接到 Oracle 时，`CURRENT_SCHEMA`它​​与 CURRENT_USER 相同。

但是，如果我连接为`SCOTT`，我可以发出`ALTER SESSION SET CURRENT_SCHEMA=JOE`，然后当我这样做时`SELECT * FROM EMP`，它被解释为`JOE.EMP`而不是`SCOTT.EMP`。当然，如果我没有`SELECT`权限`JOE.EMP`，或者`JOE`没有名为 的对象`EMP`，`SELECT`则将失败。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-22T02:37:02.993

USER 和使用 sys_context 之间也存在性能差异

```
declare 
  v_result varchar2(100);
begin
  for i in 1..1000000 loop
  v_result := sys_context('userenv','session_user');
  end loop;
end;
/

-- 2.5s

declare 
  v_result varchar2(100);
begin
  for i in 1..1000000 loop
  v_result := user;
  end loop;
end;
/ 

-- 47s 
```

另请参阅 [https://svenweller.wordpress.com/2016/02/24/sequence-and-audit-columns-with-apex-5-and-12c/](https://svenweller.wordpress.com/2016/02/24/sequence-and-audit-columns-with-apex-5-and-12c/) 和 [http://www.grassroots-oracle.com/2019 /01/oracle-user-vs-sys-context.html](http://www.grassroots-oracle.com/2019/01/oracle-user-vs-sys-context.html)

# java - 在本地测试 TCP/IP 连接

> ID：11002749
> 
> 赞同：1
> 
> 时间：2012-06-12T18:38:22.303
> 
> 标签：java, tcp-ip

目前，我有一个应用程序使用 IP 地址和端口通过 TCP/IP 连接到终端服务器。我是否可以在我的笔记本电脑上本地创建一个模拟 TCP/IP 连接，以便我可以使应用程序连接到我的笔记本电脑上的特定 IP 和端口？

我是网络新手，所以如果问题不清楚，请执行。

我尝试这样做的原因是，应用程序正在侦听终端服务器上 TCP/IP 连接上的特定端口，并且我使用 VB 宏将一些数据远程发送到同一端口。我想在没有终端服务器的情况下（仅使用我的笔记本电脑）在本地测试相同的内容，但是当我运行应用程序时，它只能使用 TCP/IP 连接进行连接。

该应用程序是用 Java 编写的，可以通过提供要连接的 IP 地址和端口在本地运行，所以我想看看是否可以让应用程序作为 TCP/IP 连接连接到我的笔记本电脑。

任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:40:27.997

当然。只需在本地计算机上运行模拟，并在客户端使用特殊的`127.0.0.1`IP 地址或`localhost`名称。在每台计算机上，这意味着*同一台机器*。这就是所谓的环回接口。

# python - 解析 Tor 退出地址列表

> ID：11002751
> 
> 赞同：0
> 
> 时间：2012-06-12T18:38:24.347
> 
> 标签：python, tor

想从[exit-addresses](http://exitlist.torproject.org/exit-addresses)解析 IPv4 地址。文件格式：

```
ExitNode 006C3FA7C3F6E3ACD13D0DD9B10C7DFA933C237B
Published 2012-06-12 05:04:03
LastStatus 2012-06-12 06:03:22
ExitAddress 220.0.231.71 2012-06-12 10:23:05 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:40:59.150

```
with open('data.txt') as inf:
    for line in inf:
        if line.startswith('ExitAddress'):
            print line.split()[1] 
```

会给你

```
220.0.231.71 
```

where`data.txt`包含您发布的四行（我还使用您链接到的大文件运行它）。当您完成或遇到异常时，使用`with`还将“自动”为您关闭文件。

打开数据文件后，此[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)将为您收集列表中的所有数据：

```
 a = [line.split()[1] for line in inf if line.startswith('ExitAddress')] 
```

或者，如果您不想一次在内存中收集整个列表，您可以使用[生成器表达式](http://www.python.org/dev/peps/pep-0289/)：

```
 g = (line.split()[1] for line in inf if line.startswith('ExitAddress')) 
```

您还需要自己关闭文件。

# unit-testing - 列出 FsUnit 中的成员相等性

> ID：11002754
> 
> 赞同：1
> 
> 时间：2012-06-12T18:38:32.257
> 
> 标签：unit-testing, f#, fsunit

我想检查两个列表是否具有相同的成员，无论顺序如何：

```
let memCount items = items |> Seq.countBy id |> Map.ofSeq
let memberEquals items1 items2 = memCount items1 = memCount items2 
```

目前，我在测试中使用它如下：

```
memberEquals expected actual |> should be True 
```

但是，这对于错误报告来说并不那么好。

我可以扩展 FsUnit 以添加`memberEquals`类似于`equals`or`contains`吗？或者，我可以总是在比较它们之前对列表进行排序。这里最好的方法是什么？

（我将 FsUnit 与 nUnit 一起使用，值得。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:16:24.147

您的`memberEquals`函数不会测试列表是否具有相同的成员（只有相同数量的项目）。最简单的方法是：

```
let memberEquals items1 items2 = (set items1 = set items2) 
```

如果列表可能包含重复项，您需要将它们作为列表进行排序和比较。

^(†</sup> 您可以在[MSDN](http://msdn.microsoft.com/en-us/library/ee353747)`set`上阅读有关该功能的信息。)

# c# - MSDN Basic Rss for Windows Phone 错误

> ID：11002758
> 
> 赞同：0
> 
> 时间：2012-06-12T18:38:38.633
> 
> 标签：c#, windows-phone-7, xaml

首先，对不起，如果我的英语不完美。[我从 MSDN http://msdn.microsoft.com/en-us/library/hh487167%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/hh487167%28v=vs.92%29.aspx)尝试了本教程

我收到了这个错误信息：

找不到类型“转换器：RssTextTrimmer”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。

我从 msdn 下载了示例文件，我得到了同样的错误。我是 C# 和 Windows Phone 的新手。

我希望有人能帮助我。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:00:47.530

确保根据项目的命名空间为“转换器”指定正确的 xmlns 值。

从[MSDN](http://msdn.microsoft.com/en-us/library/hh487167%28v=vs.92%29.aspx)上的示例：

> 8.通过在**解决方案资源管理器**中双击**App.xaml**并将以下代码添加到 < **Application.Resources** > 标记内，将 RssTextTrimmer 类设置为转换器：
> 
>  ****`<converter:RssTextTrimmer xmlns:converter="clr-namespace:sdkRSSReaderCS" x:Key="RssTextTrimmer" />`
> 
> 其中**sdkRSSReaderCS**是项目命名空间的名称。****

# java - Android/Eclipse 错误 - “找不到类 'org.jivesoftware.smack.ConnectionConfiguration'，从方法中引用”

> ID：11002762
> 
> 赞同：0
> 
> 时间：2012-06-12T18:38:46.553
> 
> 标签：java, android, eclipse, smack

这是我第一次使用 Android/Java。我正在尝试运行此基本代码，但我不断收到以下错误：

**“找不到类 'org.jivesoftware.smack.ConnectionConfiguration'，从方法中引用”**

*   **我的代码：**

    ```
    package message.pack;
    import org.jivesoftware.smack.ConnectionConfiguration;
    import org.jivesoftware.smack.XMPPConnection;
    import org.jivesoftware.smack.XMPPException;

    import android.app.Activity;
    import android.os.Bundle;

    public class ThesimpleigniteandroidActivity extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

        }

                  public static void main(String[] args) {
                  ConnectionConfiguration conf = new     ConnectionConfiguration("jabber.com",5222);
                  XMPPConnection connection = new XMPPConnection(conf);
                      try {
                      connection.connect();
                      connection.login("myusername", "mypassword");
                      } catch (XMPPException e) {
                      e.printStackTrace();
                      } finally {
                              connection.disconnect();
                      }
                      }
                      } 
    ```

我正在使用此页面中的 smack.jar：

[http://vidorsolutions.blogspot.com/2011/01/writing-xmppjabber-chat-application-for.html?m=1](http://vidorsolutions.blogspot.com/2011/01/writing-xmppjabber-chat-application-for.html?m=1)

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T19:08:50.493

这类似于围绕 android 项目中的外部 jar 的许多相关问题（尤其是使用新的 sdk 工具）。解决方案是让您在项目中创建一个名为的文件夹`libs`并将 jar 复制到该文件夹​​中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:43:01.557

你把jar文件放在你的eclipse路径中了吗？

这将告诉您如何操作：http: [//www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-(Java)](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)

# r - 更改逻辑回归中分类预测变量的参考组

> ID：11002766
> 
> 赞同：12
> 
> 时间：2012-06-12T18:38:58.917
> 
> 标签：r

我正在使用级别为 0-6 的分类预测变量运行逻辑回归。默认情况下，R 将级别 0 视为参考组。

例如，我如何告诉 R 使用级别 3 而不是级别 0 作为参考而不重命名级别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T19:20:15.823

使用该`C`函数在数据框中定义您的对比。

如果您的数据框是`DF`并且因子变量是`fct`，那么

```
DF$fct <- C(DF$fct, contr.treatment, base=3) 
```

（未经测试）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T19:20:05.290

使用 Frank Harrell 的软件包（它允许许多附加功能），这非常容易。
例如，对于名为“df”的数据框

```
library(Hmisc) 
library(rms)
dd=datadist(df)
options(datadist='dd')
(m=lrm(y ~ catvar, data=df)) #uses the mode as the reference group
summary(m, catvar=3) #using level=3 as the reference group
summary(m, catvar=0) #using level=0 as the reference group 
```

（而且，一些样本数据会很好——你总是可以`dput`用来输出一个小数据集）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T20:10:04.397

该`C`功能已被建议，还请查看`contrasts`、`relevel`和`reorder`等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-31T06:44:50.177

您可以使用 relevel 函数： dataframe$x1 <- relevel(datafrmae$x1, "type here the reference category")

# postgresql - PostgreSQL 流式复制

> ID：11002767
> 
> 赞同：4
> 
> 时间：2012-06-12T18:38:58.793
> 
> 标签：postgresql, replication

我正在尝试在一台机器上设置两个 PostgreSQL 服务器并执行流复制。我已经成功了一次，但是当我再次尝试按照完全相同的步骤时它不起作用..这些是步骤：我有 $PGDATA = home/postgresql/9.1/data 和 $STANDBY = home/postgresql/9.1 /数据2

1.  设置两个节点：

`initdb -D $PGDATA`

`initdb -D $STANDBY`

1.  在主节点中创建一个用于复制的用户。我在 pgAdmin 中这样做（它确实具有超级用户权限）

2.  在 pg_hba.conf 的主节点中添加允许备用连接的部分：

`host replication repuser 127.0.0.1/0 md5`

1.  在 postgresql.conf 设置的主节点中：

`max_wal_senders = 1`

`archive_mode = on`

`archive_command = 'cp %p ~/postgresql/backup/archivedir/%f'`

`wal_level = archive`

`wal_keep_segments = 32`

1.  启动主节点并进行基本备份：

`psql -d dellstore2 -c "SELECT pg_start_backup('backup for replication', true)"`

`rsync -av ${PGDATA}/ $STANDBY --exclude postmaster.pid`

`psql -d dellstore2 -c "select pg_stop_backup()"`

pg_stop_backup 说一切都很好，所有的 WAL 文件都被归档了

1.  在备用（data2）节点中，我使用以下命令创建 recovery.conf：

`standby_mode = 'on'`

`primary_conninfo = 'host=127.0.0.1 port=5432 user=repuser password=haslo'`

`trigger_file = '/home/michau/postgresql/replication.trigger'`

`restore_command = 'cp /home/michau/postgresql/backup/archivedir/%f "%p"'`

1.  启动主节点，然后启动备用节点——复制应该开始，备用应该赶上主节点。这正是第一次发生的事情。现在，当我启动待机时，我得到：**“地址已在使用中”**错误。当然，standby 和 master 都具有在 postgresql.conf 中指定的相同端口（它们具有完全相同的 postgresql.conf 文件）。如果我将待机端口更改为 5433，那么我会得到：

`LOG: database system was shut down in recovery at 2012-06-12 19:48:01 CEST`

`LOG: entering standby mode`

`cp: cannot stat /home/michau/postgresql/backup/archivedir/000000010000000000000007: No such file or directory`

`LOG: consistent recovery state reached at 0/7000070`

`LOG: record with zero length at 0/7000070`

`cp: cannot stat /home/michau/postgresql/backup/archivedir/000000010000000000000007: No such file or directory`

`LOG: streaming replication successfully connected to primary`

`LOG: redo starts at 0/7000070`

它就挂在这里。运行 ps -ef | grep postgresql 产生：

`michau 2491 1898 0 19:46 pts/0 00:00:00 postgres -D /home/michau/postgresql/9.1/data`

`michau 2493 2491 0 19:46 ? 00:00:01 postgres: writer process`

`michau 2494 2491 0 19:46 ? 00:00:00 postgres: wal writer process`

`michau 2495 2491 0 19:46 ? 00:00:00 postgres: autovacuum launcher process`

`michau 2496 2491 0 19:46 ? 00:00:00 postgres: archiver process last was 000000010000000000000008`

`michau 2497 2491 0 19:46 ? 00:00:00 postgres: stats collector process`

`michau 2571 2214 0 19:49 pts/1 00:00:00 postgres -D /home/michau/postgresql/9.1/data2`

`michau 2572 2571 0 19:49 ? 00:00:01 postgres: startup process recovering 000000010000000000000009`

`michau 2575 2571 0 19:49 ? 00:00:01 postgres: writer process`

`michau 2578 2571 0 19:49 ? 00:00:02 postgres: wal receiver process streaming 0/99782DC`

`michau 2579 2491 0 19:49 ? 00:00:00 postgres: wal sender process repuser 127.0.0.1(42142) streaming 0/99782DC`

`michau 2586 2491 0 19:51 ? 00:00:00 postgres: michau postgres ::1(49941) idle`

`michau 2587 2491 0 19:51 ? 00:00:01 postgres: michau dellstore2 ::1(49942) idle`

恢复中的 0000000010000009 会发生一段时间的变化，但半小时后就不再变化了。

我确定有些事情我必须是第一次做的，但没有写下来或其他什么，但我完全不知道它是什么。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:14:30.457

我完成了您在上面发布的步骤，我得到了您发布的确切错误，但我能够解决问题。

我试图将您的步骤与本网站 [http://www.debian-administration.org/article/How_to_setup_Postgresql_9.1_Streaming_Replication_Debian_Squeeze中发布的步骤合并](http://www.debian-administration.org/article/How_to_setup_Postgresql_9.1_Streaming_Replication_Debian_Squeeze)

除了您发布的步骤之外，我还从我提供的站点中添加了 2 个步骤。2个步骤如下：

*   在从主服务器 rsync 之前删除备用服务器中的所有文件和文件夹。
*   在 master 的 postgresql.conf 中，将 wal_level 设置为 hot_standby 而不是 archive 并将 hot_standby 设置为 on。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T06:26:02.443

您的备用服务器在不断恢复，这正是 PostgreSQL 中流式复制的工作方式。您是否能够登录到备用服务器并运行查询？如果是这样，恭喜，它正在工作。如果没有，请发布发生的情况。

# java - 将 ByteMessage 转换为字符串？

> ID：11002772
> 
> 赞同：2
> 
> 时间：2012-06-12T18:39:11.460
> 
> 标签：java, jms

转换为的最佳方法是`ByteMessage`什么`String`？我有以下代码，我们有更干净的方法吗？

```
BytesMessage byteMessage; // set byteMessage

byte[] byteArr = new byte[(int)byteMessage.getBodyLength()];

for (int i = 0; i < (int) byteMessage.getBodyLength(); i++) {
    byteArr[i] = byteMessage.readByte();
}
String msg = new String(byteArr); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:48:06.253

[BytesMessage 规范](http://docs.oracle.com/javaee/1.4/api/javax/jms/BytesMessage.html)有一个可能有用的方法 readUTF() 。只需调用此方法替换从 BytesMessage 到 String 定义的所有行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:46:58.857

好吧，首先调用 readBytes(byte[]) 可能会更有效。

其次，您正在使用平台字符编码将字节转换为字符串，这总是很危险的。您应该使用显式字符集。要么是已知为消息类型指定的，要么可能是作为消息属性包含的字符集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:40:11.820

这可能会帮助你

```
 String msg = byteArr.readUTF(); 
```

您还可以通过使用来避免循环

```
 byteMessage.readBytes(byteArr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:45:35.330

如果您知道这些字节是 UTF-8 编码的，请使用[`BytesMessage.readUTF()`](http://docs.oracle.com/javaee/6/api/javax/jms/BytesMessage.html#readUTF%28%29)便捷方法：

```
String s = byteMessage.readUTF(); 
```

如果`byte[]`数组表示使用不同字符编码（例如 UTF-16）编码的字符串，请使用[`String(byte[], java.lang.String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28byte%5b%5d,%20java.lang.String%29)构造函数：

```
byte[] byteArr = new byte[(int)byteMessage.getBodyLength()];
byteMessage.readBytes(byteArr); 
String msg = new String(byteArr, "UTF-16"); 
```

最后，考虑使用[`TextMessage`](http://docs.oracle.com/javaee/6/api/javax/jms/TextMessage.html)以避免整个喧嚣。

# javascript - 从函数中拉出 var

> ID：11002773
> 
> 赞同：2
> 
> 时间：2012-06-12T18:39:20.723
> 
> 标签：javascript, function, global, variables

似乎无法从函数中提取值……看起来很简单，但无法实现。我认为这是一个异步问题，但即使使用 async:false; 它仍然返回未定义。

```
<script type="text/javascript">
var activeTab;

function toggleVisibility(selectedTab) {
//Let the navigation know what tab is selected
activeTab = selectedTab;
return activeTab;
}
</script>

<script type="text/javascript">
document.write(window.activeTab);
</script> 
```

这是对函数的调用

```
<a href="#" onclick="toggleVisibility('linkname');">LinkName</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:45:35.090

您的脚本包含 document.write(window.activeTab); 在您单击链接之前运行良好，否则它将覆盖您的整个文档，因为如果 DOM 已经加载，这就是 document.write 所做的。

由于您在单击链接之前运行它 window.activeTab 尚未分配值。

有很多解决方案，但是您需要什么解决方案取决于您实际想要使用`activeTab`. 我假设您真的想将它用于某事，而不仅仅是`document.write`它。

**更新**

您似乎想根据 的值更新图像`window.activeTab`。您更新图像的代码也应该在 onclick 处理程序中，以便在单击链接时执行，而不是在加载页面时执行。出于几个原因，您也应该避免`document.write`，但最明显的是我已经说过的：如果页面在您使用时已经加载，它将覆盖您的整个文档。

您可能想尝试以下方法：

```
<a href="#tab1" class="tabs">LinkName</a> 
```

在标签页的 HTML 之后的某处：

```
<script>
(function(){

var tabs = document.getElementsByClassName('tabs');

// For each tab
for(var i = tabs.length; i--;){

    // Add click handler to tab
    tabs[i].onclick = switch_tab;

    // Hide tab
    a_to_tab(tabs[i]).style.display = 'none';
}

// Show first tab
a_to_tab(tabs[0]).style.display = '';

function switch_tab(){
    // Hide all tabs
    for(var j = tabs.length; j--;){
        a_to_tab(tabs[j]).style.display = 'none';
    }

    // Show this tab
    a_to_tab(this).style.display = '';

    // Cancel default onclick action
    return false;
}

// Get the tab element from the a element that refers to it by href
function a_to_tab(a){
    return document.getElementById(a.href.replace(/^[^#]*#/, ''));
}

})();
</script> 
```

请参阅此[**JSFiddle**](http://jsfiddle.net/Paulpro/ZcLpa/)。

您可能还想查看[jQuery UI 选项卡](http://jqueryui.com/demos/tabs/)

# race-condition - 比赛条件

> ID：11002774
> 
> 赞同：2
> 
> 时间：2012-06-12T18:39:21.520
> 
> 标签：race-condition, circuit, digital-logic, circuit-diagram

我目前正试图理解与比赛条件相关的两件事。

**问题一：**

我收到了以下问题：

```
We consider the digital circuit and the value of its inputs a,
and b as given below. For all logic gates, we assume that
there is a gate delay of exactly one time unit (i.e. the gate
delay equals the time between two dotted lines in the
diagram). Give the values of c, d, e, f in the digital circuit for
every point of time between 0 and 8. 
```

![在此处输入图像描述](../Images/3c4295d6aa6f9989d980f171586977aa.png)

给出的答案如下：

![在此处输入图像描述](../Images/5ad27b76875da79bbcfc5492c68bda24.png)

这究竟是如何实现的？到目前为止，这是我的想法：

*   **c**从 1 开始，因为**a**从 0 开始
*   **d**从 0 开始，因为**b**从 1 开始
*   当时间等于 2 时，**a变为 1...** **c**切换到 0的传播延迟为 1，因此它在 3 个时间单位变为 0
*   同样的逻辑适用于**d**
*   **e**和**f**应该是常数 1 或 0，但似乎受到某些东西的影响。

这里到底发生了什么？它是否与布尔函数或某些东西有关。如果是这样呢？

**问题 2：**

有没有人有一种简单的方法或逻辑方法来产生一个简单的电路（使用 XOR、AND、OR、NOT、NAND 布尔函数：

*   静态竞争条件 - 当值是常量时
*   动态竞争条件 - 当一个值预期改变时

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:53:40.633

好的，所以当一个门的输入在不同时间发生变化时，异步电路中的竞争条件就会发生。假设您的逻辑函数如下所示

```
λ = ab + ~b~a 
```

用门实现这个功能的最直接的方法看起来像

**注意**：我假设您的基本构建块是 AND、OR 和 NOT。显然，在 CMOS 电路中，NAND、NOR 和 NOT 是您构建电路的方式，但一般原则保持不变。我还假设 AND、NOR 和 NOT 具有相同的延迟，而实际上 NAND 和 NOR 如果输出形式为`0 to 1`or则具有不同的延迟`1 to 0`，并且 NOT 比 NAND 或 NOR 快约 20%。

```
a ->| AND |-------->| OR | -> λ
b ->|  1  |         |    |
                    |    |
a ->| NOT |->|AND|->|    |
b ->| NOT |->| 2 |  |    | 
```

现在，假设 AND 和 NOT 都有 2ns 的延迟。这意味着 OR 门在它看到第二个位置变化的值之前 2 ns 看到它的第一个位置变化的值。

这意味着如果`a`和`b`两者都从`1`to `0`，你会期望`λ`保持不变，因为第一个 AND 门的输出是从`1`to `0`，但是 AND 门的输出从`0`to `1`，这意味着 OR 条件保持为真。

但是，如果您在第一个 AND 门之后一点点从第二个 AND 门获得输出，那么您的 OR 门将在从 过渡到`0,0`时暂时看到它的输入。这意味着会有一个短暂的下降，它看起来像`1,0``0,1``λ`

```
 __
   a   |___________
     __
   b   |___________
     ____
AND1     |_________
            _______
AND2 ______|
     ______   _____
   λ       |_| 
```

如果您在 AND1 下降和 AND2 上升之间查看 OR 门的输入，它会`0`通过 OR 门传播 a，果然，2ns 后输出中出现下降。

这是对竞争条件如何产生的一般概述。希望能帮助你理解你的问题。

# c++ - Windows 7 上的 AbortSystemShutdown 不起作用

> ID：11002779
> 
> 赞同：1
> 
> 时间：2012-06-12T18:39:36.127
> 
> 标签：c++, windows, winapi, shutdown, system-administration

我想防止在 Windows 7 上关闭我成功获得 se_shutdown_privilege，但 AbortSystemShutdown 总是失败我尝试了 AbortSystemShutdown(NULL)、AbortSystemShutdown("127.0.0.1")、AbortSystemShutdown(PcName)。

至今没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:49:59.170

显然，中止由[InitiateSystemShutdown](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376873%28v=vs.85%29.aspx)（以及该函数的[Ex](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376874%28v=vs.85%29.aspx)`AbortSystemShutDown`版本）调用的关闭，而不是.`ExitWindows`

> InitiateSystemShutdown 和 InitiateSystemShutdownEx 函数显示一个对话框，通知用户系统正在关闭。在关机超时期间，AbortSystemShutdown 函数可以防止系统关机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:19:55.013

这在 Windows 7 x64 上对我来说很好。由于您没有发布任何代码，我不知道您在做什么不同。该`SetPrivilege`函数是从这个 MSDN 页面复制的：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa446619%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446619%28v=vs.85%29.aspx)

我通过在命令提示符中键入以下内容来启动关机：'shutdown /s /t 500000' 并运行程序将其取消。

```
#include <Windows.h>
#include <stdio.h>

BOOL SetPrivilege(HANDLE hToken, LPCTSTR lpszPrivilege, BOOL bEnablePrivilege) 
{
    TOKEN_PRIVILEGES tp;
    LUID luid;

    if ( !LookupPrivilegeValue(NULL, lpszPrivilege, &luid ) )
    {
        printf("LookupPrivilegeValue error: %u\n", GetLastError() ); 
        return FALSE; 
    }

    tp.PrivilegeCount = 1;
    tp.Privileges[0].Luid = luid;
    tp.Privileges[0].Attributes = bEnablePrivilege ? SE_PRIVILEGE_ENABLED : 0;

    if ( !AdjustTokenPrivileges(hToken, FALSE, &tp, sizeof(TOKEN_PRIVILEGES), (PTOKEN_PRIVILEGES) NULL, (PDWORD) NULL) )
    { 
        printf("AdjustTokenPrivileges error: %u\n", GetLastError() ); 
        return FALSE; 
    } 

    if (GetLastError() == ERROR_NOT_ALL_ASSIGNED)
    {
        printf("The token does not have the specified privilege. \n");
        return FALSE;
    } 
    return TRUE;
}

int main()
{
    HANDLE hToken;
    OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES, &hToken);
    if(!SetPrivilege(hToken, SE_SHUTDOWN_NAME, TRUE))
    {
        printf("Could not adjust privileges\n");
    }
    if(!AbortSystemShutdown(NULL))
    {
        printf("AbortSystemShutdown failed (%08x)", GetLastError());
    }
    CloseHandle(hToken);
    return 0;
} 
```

# jquery - django简单的ajax请求

> ID：11002787
> 
> 赞同：1
> 
> 时间：2012-06-12T18:40:10.463
> 
> 标签：jquery, python, django

我正在尝试向我的views.py 发送一个ajax 请求，但我不知道如何使用该路径。我的视图位于我的服务器上`/home/pycode/main/main/apps/builder/views.py.` 我发送请求的页面位于`/home/dbs/www/python.html` 我需要在我的 urls.py 中添加一些内容吗？

视图.py

```
#!/usr/bin/env python26
from django.http import HttpResponse
def main(request):
    return HttpResponse("from python with love") 
```

python.html jquery ajax

```
<script language="JavaScript">
$(document).ready(function() {
$("#myform").submit(function() {

    var myCheckboxes = new Array();
    $("input:checked").each(function() {
       myCheckboxes.push($(this).val());
    });
    $.ajax({
        type: "POST",
        url: '/main',
        data: { myCheckboxes:myCheckboxes },
        success: function(response){
            alert(response);
        }
    });
    return false;
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T18:44:23.183

要访问视图中的函数，您可以通过它们的条目来引用它们，而`urls.py`不是通过它们在文件系统中的位置来引用它们。

浏览 django 教程（4 页）将有很大帮助。

[https://docs.djangoproject.com/en/dev/topics/http/urls/](https://docs.djangoproject.com/en/dev/topics/http/urls/)

在 urls.py 中，您使用类似于以下内容的条目将 url 映射到函数：

```
urlpatterns = patterns('',
    (r'^main/$', 'apps.builder.views.main'),
) 
```

然后，每当您键入 '/main/` 作为 url 时，它都会映射到您的视图函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:47:47.877

就服务器而言，Ajax 请求与任何其他请求一样。所以，是的，你需要 urls.py 中的一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:05:45.773

对于 ajax 请求，您可以使用 json 响应：

```
# -*- coding: utf-8 -*-

from django.http import HttpResponse
from django.utils import simplejson

class JsonResponse(HttpResponse):
    """ JSON response

    """
    def __init__(self, content, status=None, mimetype=None):
        """
            @param content: string with json, or python dict or tuple
            @param status: Http status
            @param mimetype: response mimetype
        """
        if not isinstance(content, basestring):
            content = simplejson.dumps(content)
        super(JsonResponse, self).__init__(
            content=content, 
            mimetype=mimetype or 'application/json', 
            status=status
        )
        self['Cache-Control'] = 'no-cache'
        self['Pragma'] = 'no-cache' 
```

# azure - Web 应用程序的 SQL Azure 故障转移/备份策略

> ID：11002789
> 
> 赞同：2
> 
> 时间：2012-06-12T18:40:16.843
> 
> 标签：azure, azure-sql-database, azure-data-sync

我正在使用 Azure 和 SQL Azure 构建一个 Web 应用程序。我正在设置它，以便每个组织都有自己的数据库。每个客户组织的低到中等流量。

我正在考虑使用 SQL Azure 数据同步作为故障转移/备份计划的一部分，这样如果 SQL Azure 出现故障，我的应用程序可以切换到我的本地 SQL Server（只读模式）。

我还可以在本地进行所有备份，而不是在可能产生成本的云中进行备份。

*   一个问题可能是尝试将多个数据库数据同步到我的本地 sql 服务器（不确定可以同步到一台服务器的数据库数量的限制是多少）

*   带宽可能是个问题，但我可能只会每天同步。

有没有人看到这种方法有任何其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:09:37.853

数据同步没问题，但可能对您的特定 DR 计划有利也可能不利，因为它不是事务同步模型。

要考虑的一种选择是制作数据库副本：

```
CREATE DATABASE destination_database_name
    AS COPY OF [source_server_name.]source_database_name 
```

然后，您可以从此副本创建备份，将备份存储在 blob 存储中，并（可选）删除数据库副本。虽然由于第二个数据库处于活动状态，这确实会增加额外的成本，但如果您在创建备份并存储到 blob 存储后删除数据库实例（请记住，数据库每天摊销），则可以将成本保持在最低水平。

由于您的备份将在 blob 存储中，因此您可以在 blob 存储中保留多个备份，并在需要时将备份拉取到本地服务器。

# android - 如何从不扩展 FragmentActivity 的类的上下文中访问 FragmentManger

> ID：11002795
> 
> 赞同：1
> 
> 时间：2012-06-12T18:40:34.653
> 
> 标签：android, android-layout, android-intent, android-widget

我正在开发一个 android 应用程序，我需要从不扩展 FragmentActivity 的类中启动一个 Fragment 。我正在使用支持 v4 包。我将在我当前的课程中了解上下文。谁能帮助我如何从当前上下文创建 FragmentManager 对象？

```
public ToolBarGenerator(Context c)
{
      context = c;
}

FragmentManager fm = (FragmentActivity)context.getSupportFragmentManager(); //getting error at this line.
//Called like the above
new ToolBarGenerator(getActivity()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:45:34.900

如果`Context`您拥有来自`FragmentActivity`，您可以将其转换为`FragmentActivity`，但我不确定是否是您的情况。

也就是说，听起来你正在做的是不好的做法。我会将所有 Fragment 事务保留在`FragmentActivity`课堂上。如果另一个类需要请求不同的`Fragment`显示，您应该使用回调或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:49:44.657

刚刚在另一个线程中回答了这个问题，但这可能对其他人有所帮助。我的情况可能与您的情况相似，对于如何解决将`Adapter`类与类分开的问题没有准确的答案`FragmentActivity`，同时需要访问`getSupportFragmentManager`适配器中的 ()。

传递上下文不起作用，因为它不允许转换 FragmentActivity （原因我仍然不明白）。

但是我放弃了，只是保存了对经理本身的访问权限并直接调用它：

```
public ViewPagerAdapter(Context context, FragmentManager fm, Fragment f) {
    super(fm);  
    _fm = fm; // declared in the class "private FragmentManager _fm;"
    _context=context;       
} 
```

# javascript - FB API 发布到 feed

> ID：11002796
> 
> 赞同：0
> 
> 时间：2012-06-12T18:40:36.733
> 
> 标签：javascript, facebook, facebook-graph-api

我已经坚持了一段时间。我的 FB SDK 可以完美地运行一切；登录，注销，获取用户图片等。但我无法弄清楚这个简单的问题。

为什么此代码警告“发生错误”而不是我想要的。

```
<a href="#" onClick="postToFacebook()">Post to Facebook</a>
<script>
function postToFacebook() {
    FB.api('/me/feed', 'post', { message: 'Test Message' }, function(response) {
        if (!response || response.error) {
            alert('Error occured');
        } else {
            alert('Post ID: ' + response);
        }
    });
}
</script> 
```

先感谢您！

# python - 如何与 SQLAlchemy 中的无类值建立关系？

> ID：11002797
> 
> 赞同：2
> 
> 时间：2012-06-12T18:40:38.980
> 
> 标签：python, sqlalchemy, flask-sqlalchemy

我在 Flask 下使用 SQLAlchemy。我有一个表格，代表我的系统可以处于的模式。我还有一个表格，其中包含适用于每种模式的海拔列表。（所以这是一个多对多的关系。）过去，当我向映射到表的类添加属性（如`elevations`内部`ScanModes`）时，目标也是一个类。

将高程包装在一个类中（并制作相应的表？）这样我可以`relationship`用来`ScanModes.elevations`工作，还是应该使用[启用查询的属性](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#building-query-enabled-properties)？我也愿意接受其他建议。

```
elevation_mode_table = db.Table('elevation_mode', db.metadata,
                                db.Column('scan_mode', db.String,
                                          db.ForeignKey('scan_modes'),
                                          nullable=False),
                                db.Column('elevation', db.Float,
                                          nullable=False),
                                db.PrimaryKeyConstraint('scan_mode', 
                                                        'elevation'))

class ScanModes(db.Model):
    scan_mode = db.Column(db.String, primary_key=True)
    elevations = ?

    def __init__(self, scan_mode):
        self.scan_mode = scan_mode 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T22:10:36.540

最直接的方法是将elevation_mode_table映射到一个类：

```
from sqlalchemy.orm import mapper
class ElevationMode(object):
    pass

mapper(ElevationMode, elevation_mode_table)

class ScanModes(db.Model):
    elevations = relationship(ElevationMode) 
```

当然更容易的是首先让 ElevationMode 成为一个声明的类，如果你需要处理elevation_mode_table，你可以从`ElevationMode.__table__`......

这里的“查询启用属性”的想法，当然你也可以这样做，尽管你会失去关系的缓存优势。

# javascript - 表单提交在 Chrome 中不起作用，即

> ID：11002798
> 
> 赞同：1
> 
> 时间：2012-06-12T18:40:41.680
> 
> 标签：javascript

有许多具有唯一 ID 的表单

```
<form id='fu_edit_1' method='post' action=''>
....
</form>

<form id='fu_edit_2' method='post' action=''>
....
</form> 
```

使用这个js代码

```
 var formName = 'fu_edit_'+id;
document.forms[formName].submit(); 
```

所以这里的代码在 ff 最后一个版本中可以正常工作，但是在 chrome 中，ie 拒绝工作。但是，如果您直接指定表单的 id，它会起作用，例如：

```
document.forms["fu_edit_2"].submit(); 
```

怎么了？

* * *

在控制台中，Chrome 写道：**Uncaught TypeError: Object # has no method 'submit'**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:48:37.440

我多次遇到这个问题，最后发现如果您在 fu_edit_2 表单中有一个表单元素，其 name 属性为 submit 那么 document.forms["fu_edit_2"].submit 将是对该元素的引用，而不是提交表单的方法。我发现最好不要使用名称为 submit 的任何表单字段来规避此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:50:48.997

我认为您的问题出在`id`我建议您这样做的变量上：

```
 alert(id.toString()); 
```

也许您的数字转换为字符串存在问题，也许警报会用类似`01`或类似的东西让您感到惊讶

# php - PHP Zend 框架

> ID：11002799
> 
> 赞同：0
> 
> 时间：2012-06-12T18:40:45.673
> 
> 标签：php, zend-framework

我是 PHP 新手，我想了解 PHP Zend Framework。我需要先安装哪些工具软件？我一直在从谷歌搜索很多。但是我还需要向经验丰富的开发人员 (PHP) 询问，或者任何提示、参考等可能对像我这样的初学者有任何帮助？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:46:05.397

我将向您推荐这个不久前对我非常有用的教程：[创建和运行 Zend 框架示例项目](http://files.zend.com/help/previous-version/Zend-Studio-6/creating_and_running_a_zend_framework_example_project.htm)

对于初学者来说，最好的开始方法可能是设置一个示例并从它开始，然后根据您的需要拒绝它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T22:52:27.973

使用 Zend Framework 不需要特殊的软件工具。您用于编写 PHP 代码的任何工具都是 ZF 需要的。[您可以使用任何文本编辑器，但我更喜欢Eclipse PDT](http://www.eclipse.org/pdt/downloads/)之类的 IDE 。

要启动 Zend Framework 项目，最好使用他们的[快速入门教程](http://framework.zend.com/manual/en/learning.quickstart.intro.html)并从那里扩展。

# cookies - cookie“mp_super_properties”从何而来？

> ID：11002809
> 
> 赞同：0
> 
> 时间：2012-06-12T18:41:13.490
> 
> 标签：cookies, session-cookies

当我检查为我的网站设置了哪些 cookie 时，我注意到有一个名为：

```
'mp_super_properties' 
```

我的应用没有创建这个 cookie。但是哪个应用程序做到了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T20:47:51.010

这是来自 mixpanel 的数据跟踪服务。

# c++ - 在渲染之前按y值对对象进行排序？

> ID：11002811
> 
> 赞同：0
> 
> 时间：2012-06-12T18:41:24.023
> 
> 标签：c++, graphics

我有一个 2D 自上而下的 45 度游戏，比如口袋妖怪或塞尔达。由于对象的 y 值决定了它的深度，因此需要按照 y 值的顺序绘制对象。因此，例如，当您站在一棵树后面时，树会被绘制在您的播放器顶部，看起来就像您站在树后面一样。

我目前的设计是画一排瓷砖，然后画站在那排的任何玩家，然后画下一行，然后画站在上面的任何玩家。这样，任何 y 值高于玩家的图块都被绘制在它们前面以模拟深度。

但是，我的玩家目前是一个`std::vector`在绘制所有瓷砖后简单地迭代和绘制的对象。为了使我的方法起作用，我必须为**每一行**图块迭代向量，并且仅在它们位于当前行时才渲染，或者以某种方式按每帧的 y 值对每个玩家进行排序。这两种方法似乎都占用大量 CPU，也许我想多了，在这种类型的游戏中有一种更简单的模拟深度的方法。

*编辑：* 这个游戏是MMORPG类型的游戏，所以可能会有很多玩家/NPC四处走动，这就是为什么我需要一个非常有效的方法。

和想法或意见将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:18:43.027

您可以使用`std::set`or`std::map`代替`vector`来保持您的对象排序。不幸的是，您无法简单地修改它们的位置，每次需要更改`y`坐标时都必须删除/插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:56:32.760

（忽略我最初的建议，如果你读过它；那是愚蠢的。）

据我所知，每次渲染帧时，您基本上都必须遍历已排序的容器；这会带来计算上的损失，并且每次都必须进行复制和排序不会那么糟糕（我猜是 O(N log N) 排序时间）。

一个聪明的数据结构可能会帮助你；例如，一个包含游戏对象向量作为每个元素的数组。数组的每个元素代表您的平铺网格的一行，并且您遍历对象向量并将它们合并到深度缓冲区数组中（这将花费大约 O(N) 时间）。然后只需遍历表示每一行的向量并依次绘制每个对象，再次为 O(N)。

可能有更聪明的 z-buffering 技术，但我将把这些留给读者作为练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:58:18.420

只要您不尝试根据其他标准对玩家进行排序，那么每次您想要遍历他们时，您只需按 y 坐标对玩家进行排序即可。只要您使用在输入大部分已排序时以线性时间运行的排序，那么您甚至可能不会为此步骤花费 O(n log n) 时间。我在这里假设您的玩家组变化缓慢，并且他们的 y 坐标也将缓慢变化。如果是这种情况，那么每次您需要对向量进行排序时，它已经大部分排序，并且诸如平滑排序或 Tim 排序之类的东西将在线性时间内运行。

[对于 c++，您可以在此处](https://github.com/swenson/sort)找到 Tim sort 的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T21:26:50.303

如果你有空间，另一种选择是创建一个球员列表数组，数组的索引是行号，数组包含该行中的球员集合。

正如我所提到的，这将需要一些额外的内存，并且每次玩家移动到不同的行时都会进行一些记录，但是绘制只是遍历行并绘制存在于该行中的玩家的问题。

# c++ - 使用 winhttp.h 许多未知类型说明符

> ID：11002812
> 
> 赞同：0
> 
> 时间：2012-06-12T18:41:25.170
> 
> 标签：c++, types

我想使用 winhttp 库编写一些东西，但是当在 Visual Studio 中的项目中包含头文件并对其进行编译时，它会引发很多错误，它无法识别类型说明符，例如：LPVOID、HINTERNET、WORD、DWORD、 LPWSTR 等。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:43:11.127

你需要`#include <windows.h>`先。

# css - 为什么我们应该在字体中包含 ttf、eot、woff、svg、...

> ID：11002820
> 
> 赞同：344
> 
> 时间：2012-06-12T18:42:07.497
> 
> 标签：css, font-face, webfonts

在**CSS3** `font-face`中，包括多种字体类型，如`ttf`、`eot`、和.`woff``svg``cff`

为什么我们要使用所有这些类型？

如果它们对不同的浏览器是特殊的，为什么它们的数量比主要的网络浏览器的数量还要多？

* * *

## 回答 #1

> 赞同：516
> 
> 时间：2012-06-12T18:45:56.360

### 2019年的答案：

仅使用 WOFF2，或者如果您需要旧版支持，则使用 WOFF。[不要使用任何其他格式](https://stackoverflow.com/questions/36105194/are-eot-ttf-and-svg-still-necessary-in-the-font-face-declaration/36110385#36110385)

（`svg`并且`eot`是死格式，`ttf`是`otf`完整的系统字体，不应用于网络目的）

### 2012年的原始答案：

总之，font-face 很老了，不过最近才被IE 以上支持。

*   `eot`早于 IE9 的 Internet Explorer 需要 - 他们发明了规范，但 eot 是专有解决方案。

*   `ttf`并且`otf`是普通的旧字体，所以有些人很生气，这意味着任何人都可以免费下载昂贵的许可字体。

*   随着时间的流逝，SVG 1.1 增加了一个“字体”一章，解释了如何纯粹使用 SVG 标记对字体进行建模，人们开始使用它。更多的时间过去了，事实证明，与普通字体格式相比，它们*绝对是可怕的，而 SVG 2 明智地再次删除了整个章节。*

*   然后，`woff`由具有相当多领域知识的人发明，这使得以丢弃对系统安装至关重要但与网络无关的位的方式托管字体成为可能（让担心盗版的人感到高兴）和允许内部压缩以更好地满足 Web 的需求（使用户和主机满意）。这成为首选格式。

*   **2019 年编辑**几年后，`woff2`被起草并接受，这改进了压缩，导致文件更小，以及“部分”加载单个字体的能力，以便支持 20 个脚本的字体可以存储为“块” " 而是在磁盘上，浏览器能够根据需要自动“部分”加载字体，而不是需要预先传输整个字体，进一步改善了排版体验。

如果您不想支持 IE 8 及更低版本、iOS 4 及更低版本以及 android 4.3 或更早版本，则可以只使用 WOFF（以及 WOFF2，一种更高压缩的 WOFF，适用于支持它的最新浏览器。）

```
@font-face {
  font-family: 'MyWebFont';
  src:  url('myfont.woff2') format('woff2'),
        url('myfont.woff') format('woff');
} 
```

`woff`可以在 http://caniuse.com/woff 上查看[支持](http://caniuse.com/woff)可以在[http://caniuse.com/woff2](http://caniuse.com/woff2)
上查看 支持`woff2`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-05-26T19:28:06.237

Woff 是 TrueType - OpenType 字体的压缩（压缩）形式。它很小，可以像图形文件一样通过网络传递。最重要的是，这种方式完全保留了字体，包括很少有人关心的渲染规则表，因为他们只使用拉丁文字。

看一看[已删除的死 URL]。您看到的字体是一种实验性的网络交付 smartfont (woff)，它有数千个组合字符组成复杂的形状。底层文本是罗马化僧伽罗语的简单拉丁代码。（复制并粘贴到记事本并查看）。

只有 woff 可以做到这一点，因为没有人拥有这种字体，但它可以在任何地方看到（Mac、Win、Linux 甚至智能手机上的所有浏览器，除了 IE。IE 不完全支持 Open Types）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-11-15T11:22:50.743

WOFF 2.0 基于 Brotli 压缩算法和对 WOFF 1.0 的其他改进，文件大小减少了 30% 以上，在 Chrome、Opera 和 Firefox 中受支持。

[http://en.wikipedia.org/wiki/Web_Open_Font_Format](http://en.wikipedia.org/wiki/Web_Open_Font_Format) [http://en.wikipedia.org/wiki/Brotli](http://en.wikipedia.org/wiki/Brotli)

[http://sth.name/2014/09/03/Speed-up-webfonts/](http://sth.name/2014/09/03/Speed-up-webfonts/)有一个如何使用它的例子。

基本上，您将 src url 添加到 woff2 文件并指定 woff2 格式。在 woff 格式之前有这个很重要：浏览器将使用它支持的第一种格式。

# c++ - 在 C++ 中使用字符串指定文件路径（将文件存储在文件夹中）

> ID：11002821
> 
> 赞同：0
> 
> 时间：2012-06-12T18:42:10.827
> 
> 标签：c++, directory, fopen, filepath

我正在生成数百个输出文件，并希望将它们存储在工作目录中名为 OUT 的文件夹中，而不是工作目录本身。每个文件都是根据当前迭代命名的。（out1.txt、out2.txt...等）。我已经看了很长时间的文档并尝试了不同的东西但没有成功。这是代码。（它在一个循环中，其中 k 是迭代次数。

```
char outname[50];
char filepath[30];
char iter_str[10];
sprintf(iter_str,"%d",k)
strcpy(outname,"out");
strcat(outname,iter_str);
strcat(outname,".txt");
strcpy(filepath,"..\\OUT\\");
strcat(filepath,outname);
file = fopen(filepath,"w"); 
```

它没有进入“OUT”文件夹，而是进入工作目录并将其命名如下：

```
..\OUT\out1.txt
..\OUT\out2.txt
..\OUT\out3.txt
etc 
```

我们欢迎所有的建议！

我现在意识到在 unix 上我应该使用“/”而不是“\”。我已经这样做了，并且遇到了段错误。使用“//”时也会出现段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:53:36.833

如果您使用[Boost Filesystem Library](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/tutorial.html)，那么您不必担心是否必须使用`\`或`/`同时组合子路径。您可以使用运算符`/`和`/=`来组合子路径。

```
using boost::filesystem::path;

path pathname("out");
pathname /= "abc"; //combine
pathname /= "xyz"; //combine
pathname /= "file.txt";   //combine 
```

如果是 Windows，那么`pathname`会变成`out\abc\xyz\file.txt`.

如果是Linux，那么`pathname`会变成`out/abc/xyz/file.txt`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:57:05.680

使用单个正斜杠 ( `/`) 而不是转义的反斜杠 ( `\\`)。这应该适用于所有操作系统（包括从 XP 开始的 Windows）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-01T10:14:56.537

我认为您可以使用 std::stringstream 而不是 strcpy() 和 sprintf();

```
std::stringstream l_strStream{};
#if defined(_WIN32)
    l_strStream << outName << "\\" << iter_str << ".txt";//for filename with path
#elif defined(__linux__)
    l_strStream << outName << "/" << iter_str << ".txt";//for filename with path
#endif // try this , no need to use other libs 
```

# c# - 使用 NUnit 创建嵌套的 TestFixture 类

> ID：11002822
> 
> 赞同：5
> 
> 时间：2012-06-12T18:42:15.280
> 
> 标签：c#, unit-testing, nunit

我正在尝试根据特定场景将单元测试类划分为逻辑分组。但是，我需要一个`TestFixtureSetUp`并且`TestFixtureTearDown`将在整个测试中运行。基本上我需要做这样的事情：

```
[TestFixture]
class Tests { 
    private Foo _foo; // some disposable resource

    [TestFixtureSetUp]
    public void Setup() { 
        _foo = new Foo("VALUE");
    }

    [TestFixture]
    public class Given_some_scenario { 
        [Test]
        public void foo_should_do_something_interesting() { 
          _foo.DoSomethingInteresting();
          Assert.IsTrue(_foo.DidSomethingInteresting); 
        }
    }

    [TestFixtureTearDown]
    public void Teardown() { 
        _foo.Close(); // free up
    }
} 
```

在这种情况下，我得到一个 NullReferenceException`_foo`大概是因为在执行内部类之前调用​​了 TearDown。

我怎样才能达到预期的效果（测试范围）？我可以使用 NUnit 的扩展或其他东西来帮助吗？我现在宁愿坚持使用 NUnit，而不是使用 SpecFlow 之类的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T18:58:42.090

您可以为您的测试创建一个抽象基类，在那里完成所有设置和拆卸工作。然后，您的场景从该基类继承。

```
[TestFixture]
public abstract class TestBase {
    protected Foo SystemUnderTest;

    [Setup]
    public void Setup() { 
        SystemUnterTest = new Foo("VALUE");
    }

    [TearDown]
    public void Teardown() { 
        SystemUnterTest.Close();
    }
}

public class Given_some_scenario : TestBase { 
    [Test]
    public void foo_should_do_something_interesting() { 
      SystemUnderTest.DoSomethingInteresting();
      Assert.IsTrue(SystemUnterTest.DidSomethingInteresting); 
    }
} 
```

# vim - 在 VIM 中提供文件编辑的路径？

> ID：11002825
> 
> 赞同：1
> 
> 时间：2012-06-12T18:42:35.393
> 
> 标签：vim, configuration

有没有办法设置类似 PATH 的目录序列来搜索 vim 中的文件？我的项目有多个目录中的 C 文件，如果每次都来回跳转而不记住完整路径，那就太好了。

例如，如果我有：

```
platform/drivers/uart.c
ui/display/menu.c
cpu/registers/regs.h 
```

我希望能够将 PATH 设置为“platform/drivers:ui/display:cpu/registers”。然后当我想切换到一个文件时，我可以输入：

```
:e uart.c 
```

代替

```
:e platform/drivers/uart.c 
```

我知道我可以更改工作目录，但我必须输入

```
:e ../../ui/display/menu.c 
```

进入另一个目录。

或者，有没有比使用 :edit 更好的方法来导航这样的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:54:27.237

有，而且叫[`path`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27path%27)。您使用的方式`path`是使用[`:find`](http://vimdoc.sourceforge.net/htmldoc/editing.html#%3afind)命令：`:find menu.c`将在目录中搜索 menu.c`path`并对其进行编辑。还有其他使用 的命令`path`，例如`:sfind`在新拆分中打开找到的文件。有关详细信息和使用它的其他命令，请参阅[文档。`path`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27path%27)

可以帮助您找到文件的另一件事是可以扩展到任何目录路径的[**-通配符。](http://vimdoc.sourceforge.net/htmldoc/editing.html#starstar-wildcard)例如`:edit **/menu.c`，将在子目录中查找 menu.c，因此您无需记住并键入完整路径。

# jsp - 将请求参数作为 UTF-8 编码字符串传递

> ID：11002827
> 
> 赞同：26
> 
> 时间：2012-06-12T18:42:46.363
> 
> 标签：jsp, servlets, utf-8, character-encoding

我正在创建一个简单的登录页面，我想将登录名和密码参数作为 UTF-8 编码字符串传递。正如您在下面的代码中看到的，第一行是我将编码设置为 UTF-8 的地方，但这似乎没有意义，因为它不起作用。当我使用带有重音符号的登录名和密码参数时，结果页面会收到奇怪的字符。

如何以适用于所有浏览器的方式正确设置字符编码？

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>My Page</title>
    </head>

    <body>
        <h1>Welcome to My Page</h1>

        <form name="login" action="login.jsp" method="POST">
            Login:<br/>
            <input type="text" name="login" value="" /><br/>
            Password:<br/>
            <input type="password" name="password" value="" /><br/>
            <br/>
            <input type="submit" value="Login" /><br/>
        </form>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-12T18:49:39.117

`pageEncoding`唯一设置响应字符编码和`charset`HTTP标头的属性`Content-Type`。基本上，它告诉服务器在将 JSP 生成的字符发送到客户端之前将其解码为 UTF-8，并且标头告诉客户端使用 UTF-8 对它们进行编码，并在同一页面中的任何表单时使用它提交回服务器。`contentType`已经默认为，所以下面`text/html`就足够了：

```
<%@page pageEncoding="UTF-8"%> 
```

通过 HTTP 提供页面时，将忽略 HTML 元标记。它仅在页面被客户端保存为本地磁盘系统上的 HTML 文件，*然后*在浏览器中通过`file://`URI 打开时使用。

在您的特定情况下，HTTP 请求正文编码显然未设置为 UTF-8。在请求中涉及的任何 servlet 或过滤器中进行第一次调用*之前*[`ServletRequest#setCharacterEncoding()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setCharacterEncoding%28java.lang.String%29)，需要在 servlet 或过滤器中设置请求正文编码。*`request.getXxx()`*

 *```
request.setCharacterEncoding("UTF-8");
String login = request.getParameter("login");
String password = request.getParameter("password");
// ... 
```

### 也可以看看：

*   [如何在Tomcat中设置请求编码？](https://stackoverflow.com/questions/6876697/how-to-set-request-encoding-in-tomcat/)
*   [为什么 POST 不支持字符集，但 AJAX 请求却支持？雄猫 6](https://stackoverflow.com/questions/4392610/why-does-post-not-honor-charset-but-an-ajax-request-does-tomcat-6/)
*   [https://stackoverflow.com/questions/14177914/passing-turkish-char-from-form-to-java-class-with-struts2/](https://stackoverflow.com/questions/14177914/passing-turkish-char-from-form-to-java-class-with-struts2/)
*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-16T17:09:09.303

在某些情况下，调用 ServletRequest#setCharacterEncoding() 仍然会失败。

如果您的容器仔细遵循 servlet 规范（与 tomcat 一样），它将默认将 post 参数解释为 ISO-8859-1。这可能会在 UTF-8 字符（例如我最近处理的案例中的日语）到达您的代码之前出现乱码，尤其是如果您有一个使用`getParameter()`or检查请求参数的 servlet 过滤器`getParameters()`。这两种方法强制对参数进行解码，并且解码只进行一次。

如果您有查看请求参数的过滤器，这是如何在 Tomcat 中解决此问题的链接。人们会想要检查他们特定容器的文档。

[http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q1](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q1)

关键是：

添加

```
useBodyEncodingForURI="true" URIEncoding="UTF-8" 
```

到 Tomcat 的 server.xml 中的 Context 元素并添加

```
 <filter>
    <filter-name>Character Encoding Filter</filter-name>
    <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>Character Encoding Filter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping> 
```

与在 web.xml 中调用 getParameter() 或 getParameters() 的任何过滤器一样。我发现虽然上面的链接使上下文元素的两个属性看起来像是替代品，但 useBodyEncodingForURI 一个是绝对必要的，否则tomcat不会为查询字符串设置编码。来自 tomcat 7.0.42 中的 Request.java：

```
boolean useBodyEncodingForURI = connector.getUseBodyEncodingForURI();
if (enc != null) {
    parameters.setEncoding(enc);
    if (useBodyEncodingForURI) {
        parameters.setQueryStringEncoding(enc);
    }
} else {
    parameters.setEncoding
        (org.apache.coyote.Constants.DEFAULT_CHARACTER_ENCODING);
    if (useBodyEncodingForURI) {
        parameters.setQueryStringEncoding
            (org.apache.coyote.Constants.DEFAULT_CHARACTER_ENCODING);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-13T12:37:26.477

问题取决于使用哪个应用程序服务器。即使页面被正确设置为 UTF8，尝试以正确的形式（根据预期的语言）获取参数也不会给出好的结果，即 request.getParameter(...) 返回非预期字符，因为参数的默认代码页是主要是 8859-1。这意味着，参数的代码页独立于 JSP 页面的代码页，参数的默认代码页会影响结果。我发现的最佳描述在这里： [[1]：http://docs.cksource.com/CKFinder_2.x/Developers_Guide/Java/Configuration/URI_Encoding](http://docs.cksource.com/CKFinder_2.x/Developers_Guide/Java/Configuration/URI_Encoding). 在某些应用程序服务器中，“request.setCharacterEncoding(...)”无效。您必须在描述符中设置参数编码。最复杂的是JBoss，Apache Tomcat，中间是Glassfish。更好的是 WebLogic，最好的是 Jetty（UTF-8 是默认设置）。在我的情况下，我必须创建 glassfish-web.xml 描述符并将参数编码标签放在那里。就我而言（GlassFish）：

```
<glassfish-web-app error-url="">
  <!-- request.setCharacterEncoding("UTF-8") not functioning -->
  <parameter-encoding default-charset="UTF-8" />
</glassfish-web-app> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-24T12:22:34.113

我最近遇到了这个问题，在这里找不到答案。我正在使用 Weblogic，大多数解决方案都是针对 Tomcat 的。

要使编码与 Weblogic 一起使用，您必须将其放入您的`weblogic.xml`

```
<charset-params> 
    <input-charset> 
        <resource-path>/*</resource-path> 
        <java-charset-name>UTF-8</java-charset-name> 
    </input-charset> 
</charset-params> 
```

来源：[weblogic.xml 文档](https://docs.oracle.com/cd/E24329_01/web.1211/e21049/weblogic_xml.htm#WBAPP614)

注意：我的 _JAVA_OPTIONS 中也有这些选项，但不知道它们是否必要。

```
-Dweblogic.webservice.i18n.charset=utf-8 
-Dfile.encoding=UTF-8 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T18:55:21.530

示例字符编码：

```
<%@ page language="java" pageEncoding="utf8" contentType="text/html;charset=UTF-8" %> 
```*

# version-control - 将 SSIS 包置于源代码控制之下

> ID：11002831
> 
> 赞同：4
> 
> 时间：2012-06-12T18:42:54.080
> 
> 标签：version-control, ssis

我将所有 SSIS 包以及它们的配置文件都存储在 Subversion 存储库中。配置文件几乎总是存储在包所在的同一文件夹中。

问题是 - SSIS 似乎总是将配置文件的路径（保存在包本身中的那个）存储为绝对路径。

当其他人在与我在开发 PC 上的位置不同的位置检出包含包的文件夹时，未检测到配置文件（因为存储了我的绝对路径，并且它在另一台开发 PC 上不存在）。因此，另一个开发人员必须删除此配置，然后从其本地硬盘驱动器上的位置重新添加它。然后保存更改的包，这将导致提交新版本。当我从 SVN 获得该版本时，它将不再匹配我 PC 上的本地路径。

在相关说明中：另一个开发人员可能也想更改配置文件中的值。如果我以后从 SVN 包中获得最新版本的所有内容，我的 PC 将不再工作。

您如何解决这些不便？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:14:17.823

另一种解决方案是将您的配置保存在数据库中，并使用环境变量作为第一个配置来告诉它要查看哪个数据库，这就是我们所做的。我们有脚本来为源代码控制中的每个服务器填充 ssisconfig，但该包使用我们正在使用的环境变量中的数据库的实际表数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T20:34:48.533

任何听过我的 SQL 星期六演讲的人都知道我不太关心 XML，这也是原因之一。使用具有不同位置的 XML 配置的一个技巧是使用环境变量（间接配置）来指导 SSIS 在哪里可以查找该资源。这种方法最大的缺点是您通常需要为每组配置文件创建一个环境变量，或者拥有一个庞大的 .dtsconfig 文件，这对于版本控制来说变得很痛苦。

如果 XML 配置是必须的，我更喜欢的选项是删除“可变性”。开发人员和管理员聚在一起，每个人都同意“在 SSIS 完成的任何地方都会有一个文件夹来保存配置文件，并且该位置是 X”，然后只需解决 X 的问题。在以前的工作中，我们使用 D:\ssisdata \配置

@HLGEM 的配置表方法是我最喜欢的 SSIS 配置方法（直到您到 2012 年及其项目部署模型，其中配置是完全不同的动物）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:48:35.687

我在我的项目文件夹下添加了一个名为“config”的文件夹，将其添加到源代码管理并在此文件夹中维护配置文件。如果您愿意，也可以将其添加到 SSIS 项目中。

我认为这是一个很好的解决方案，因为每个人都可以拥有这个文件夹并下载配置文件。

部署包时，它将从您在部署清单中通知的位置读取配置文件，因此此解决方案不会影响您的开发

# r - 如何在同一个图上获得这两个散点以进行比较？

> ID：11002838
> 
> 赞同：0
> 
> 时间：2012-06-12T18:43:22.653
> 
> 标签：r, scatter-plot

现在我正在使用的 R 片段是：

```
a <- read.table('A.out')
a <- cbind(1:nrow(a), a)
colnames(a) <- c('Observation','Time')

med.a <- median(a$Time)
plot(a$Observation, a$Time, xaxt="n", yaxt="n", xlab="",
     ylab="", type="b", col="red", pch=19)
abline(med.a,0, col='red', lty=2)
grid(col='darkgray', lty=1)

#Overlay Someone else
b <- read.table('B.out')
b <- cbind(1:nrow(b), b)
colnames(b) <- c('Observation','Time')

par(new=TRUE)
med.b <- median(b$Time)
plot(b$Observation, b$Time, xaxt="n", ylab="units", type="b", col="blue", pch=19)
abline(med.b,0, col='blue', lty=2) 
```

但这并不能说明规模差异。（即，即使 A.out 值远大于 B.out 值，它们也会以相同的 y 比例显示。我如何获得想要的效果才能比较它们？）

这是我的 A.out 和 B.out 的内容：

```
> a
  Observation     Time
1           1 11758000
2           2 10523000
3           3 10306000
> b
  Observation         Time
1           1 133721740000
2           2 133759475000
3           3 133724604000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:19:58.050

你打`plot`了两次电话。每次调用都会建立一个新的坐标系。相反，使用一次调用来`plot`设置轴和坐标系，然后使用`lines`来绘制实际点：

```
xrange <- range(c(a$Observation, b$Observation))
yrange <- range(c(a$Time, b$Time))
plot(0, type="n", xlim=xrange, ylim=yrange)
lines(a$Observation, a$Time, type="b", col="red", pch=19)
lines(b$Observation, b$Time, type="b", col="blue", pch=19) 
```

从这里，您应该能够根据需要添加其他内容，例如中线、轴标签等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:20:22.270

您应该在*两个*绘图调用中添加它：

```
 ..., xlim=range(c( a$Observation, b$Observation )), 
       ylim= range(c( a$Time, b$Time )),  ... 
```

# nhibernate - NHibernate 分离 OrderBy

> ID：11002839
> 
> 赞同：1
> 
> 时间：2012-06-12T18:43:29.777
> 
> 标签：nhibernate, repository, queryover, detachedcriteria

我正在使用存储库模式来包装 NHibernate 实体。其中一种方法是`public IList<T> GetAll()`简单地返回该实体的所有项目。实现是在 Criteria 或 QueryOver 中完成的。

我想重载这个方法来接受一个排序顺序，像这样：`public IList<T> GetAll(NHOrderFor<T> order)`我可以调用它并流畅地定义它的顺序。这可能吗？QueryOver 是首选但不是必需的。

## 更新

我领先了一点。我将参数定义为`Expression<Func<T,object>> path`QueryOver.OrderBy() 所期望的参数，但表达式缺少`.Asc or .Desc`需要遵循的规范。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:14:54.343

您可以传入一个 bool 变量以确定它是 asc 还是 desc - 唯一“棘手”的部分是 .Asc 和 .Desc 是属性，因此您必须将它们分配给结果（您不需要做任何事情结果寿 - 它只返回相同的查询），例如：

```
public IList<T> GetAll(Expression<Func<T,object>> path, bool ascending) {
    if (ascending)
        queryOver = queryOver.OrderBy(path).Asc;
    else
        queryOver = queryOver.OrderBy(path).Desc;
    return queryOver.List<T>();
} 
```

# selenium - PHPUnit Selenium - 我可以在消息中使用验证方法吗？

> ID：11002843
> 
> 赞同：0
> 
> 时间：2012-06-12T18:43:47.723
> 
> 标签：selenium, phpunit

在 PHPUnit 中，我想使用`verifyText()`带有可选消息的方法作为最后一个参数，就像我使用`assertStringEquals($expected, $actual, $message)`. 它似乎不起作用。我错过了什么吗？

我会告诉自己阅读代码，但我试过了，我什至不知道如何调用任何方法*。*`verify()`它一定是某种`__call()`功能，但我看不到。所以这是我的后续问题，如何`verify()`调用这些方法？然后我可以根据需要覆盖它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T08:24:31.510

我正在探索同样的问题，尽管是在 Selenium 的背景下。

我在查找源代码时发现了一个数组 $autoGeneratedCommands，它是在 SeleniumTestCase/Driver 中设置的。这里的机制通过调用verifyCommand()来实现/映射verifyTextPresent()，verifyCommand()调用assertCommand()。随后调用系列之一 assert*() ......省略了调用中的消息。这对我来说似乎是一个无意的功能。好吧，编码错误。

# python - 在不安装的情况下使用/导入 Beautiful Soup 4

> ID：11002846
> 
> 赞同：3
> 
> 时间：2012-06-12T18:44:07.233
> 
> 标签：python, beautifulsoup

正如 Beautiful Soup 文档所说：

> 如果一切都失败了，Beautiful Soup 的许可允许您将整个库与您的应用程序打包在一起。您可以下载 tarball，将其 bs4 目录复制到应用程序的代码库中，然后使用 Beautiful Soup，根本无需安装它。

这正是我想要的，也是我所做的……直到在我的代码中使用它。我不知道如何导入 Beautiful Soup 4。与 v3 不同，没有独立的，只有带有一堆 python 脚本的`BeautifulSoup.py`那个目录。`bs4`当您的项目中有源代码时，是否有人有如何使用 Beautiful Soup 4 的示例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T18:47:27.290

那“一堆python脚本”被称为[python包](http://docs.python.org/tutorial/modules.html#packages)；那里应该有一个`__init__.py`文件。它们一起形成一个连贯的整体，一组命名空间的模块。

您可以`BeautifulSoup`从`bs4`包中导入类：

```
from bs4 import BeautifulSoup 
```

有关更多信息，请参阅[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。

# c++ - 在较大的字符串中搜索字符串

> ID：11002847
> 
> 赞同：0
> 
> 时间：2012-06-12T18:44:09.150
> 
> 标签：c++, string, find

我真的需要帮助我的程序的最后一部分。我需要在更大的字符串中找到一个字符串，如果找到则返回子字符串的起始位置。从方向：

> 请注意，您的字符串位置从 0 开始，以长度 -1 结束。如果未找到该字符串，则将返回值 -1。

我已经开始并编译了以下代码，我只想知道这是否真的正确。我不想太过分，但我需要专家的一些反馈。我这样做对吗？或者至少我朝着正确的方向前进？

```
const int MyString::Find(const MyString& other)
{
    int start(0);
    int counter(0);
    int end = other.Size;
    int count(0);
    int end1 = Size;
    int nfound = -1;
    char* temp;

    if(other.String[0] != '\0' && other.String[0] != ' ')
    {
        if(other.String[count] == String[counter])
        {
            start = counter;

            for(int i = count; i < end-1;i++)
            {
                for(int j = counter; j < end1 -1; j++)
                {
                    temp[j] = String[j];
                }
            }
            if(other == temp)
            {
                return start;
            }
            else
                return nfound;
        }

        else{
            while(other.String[count] != String[counter])
            {
                counter++;
                if(other.String[count] == String[counter])
                {
                    start = counter;
                    for(int i = count; i < end-1;i++)
                    {
                        for(int j = counter; j < end1 -1; j++)
                        {
                            temp[j] = String[j];
                        }
                    }
                    if(other == temp)
                    {
                        return start;
                    }
                    else
                        return nfound;
                }
            }
        }
    }
    else
    {
        return nfound;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:49:16.040

假设您不想做任何非常复杂的事情，请考虑这`needle`是`haystack`当且仅当存在某个索引`haystack`的子字符串时，从该索引开始的子字符串等于`needle`.

此外，您不需要复制大量子字符串。从您选择的索引开始，只需逐个字符进行比较，直到（a）您发现不匹配，在这种情况下尝试另一个索引，或者（b）您用完`haystack`，在这种情况下，此或任何都不可能匹配更大的索引，否则 (c) 你用完了`needle`，在这种情况下你找到了一个匹配，所以返回你正在使用的索引。

如果有多个匹配项（例如搜索`"na"`in `"banana"`），那么希望方向会告诉您返回哪一个。这告诉您考虑索引的顺序`haystack`。

如果您确实想做一些非常复杂的事情，请查看 Boyer-Moore、Knuth-Morris-Pratt 和许多其他已发布的字符串搜索算法，这些算法具有不同的权衡取舍。似乎需要不止一个人来发明一个好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:53:54.310

从我的角度来看，这是一个糟糕的代码。\0 用于 char*-strings 以指示字符串的结尾。没有必要在封装字符串的类中使用它。在字符串中查找子串的算法有很多，其中之一是 Knuth-Morris-Pratt 算法。其他在本文中列出[字符串搜索算法](http://en.wikipedia.org/wiki/String_searching_algorithm)

# java - MouseWheel 闪烁，更多关于原因

> ID：11002848
> 
> 赞同：1
> 
> 时间：2012-06-12T18:44:10.510
> 
> 标签：java, swing, graphics, mousewheel, mouselistener

几天前，我发布了一个关于在滚动鼠标滚轮时导致屏幕上的文本改变颜色的程序的问题。不幸的是，这是一个糟糕的问题，因为发布了太多代码而没有特别有用。

我收到了几个回复，其中一个来自用户垃圾狗，他发布了解决问题的内容（可以在此页面底部找到：[在 MouseWheelMotion 事件期间窗口变为空白](https://stackoverflow.com/questions/10967016/window-going-blank-during-mousewheelmotion-event)），但是阅读了所有的类描述在他发布并执行的程序中我不知道的事情我不明白为什么他的效果与我的不同。

他似乎记录了每个鼠标滚轮的移动，而我的只是初始移动。还有几个人评论说他们无法复制我的程序的效果可能是因为它太大了。

下面是一个极其简化的版本，它仍然会产生相同的效果（我希望如此）。

**问题：**处理鼠标滚轮事件时修复屏幕变黑的两个程序之间的*根本区别是什么？*

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.MouseWheelEvent;
import java.awt.event.MouseWheelListener;
import java.util.LinkedList;
import javax.swing.JFrame;

public class WheelPrinter implements MouseWheelListener, Runnable {

    JFrame frame;
    LinkedList colorList;
    int colorCount;

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        WheelPrinter w = new WheelPrinter();
        w.run();
    }

    public WheelPrinter() {
        frame = new JFrame();
        frame.setSize(500, 500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.addMouseWheelListener(this);
        frame.setVisible(true);
        frame.setBackground(Color.WHITE);
        colorList = new LinkedList();
        colorList.add(Color.BLACK);
        colorList.add(Color.BLUE);
        colorList.add(Color.YELLOW);
        colorList.add(Color.GREEN);
        colorList.add(Color.PINK);
    }

    @Override
    public void mouseWheelMoved(MouseWheelEvent e) {
        colorChange();
    }

    @Override
    public void run() {
        while(true) {
            draw(frame.getGraphics());
            try {
                Thread.sleep(20);
            } catch (Exception ex) {

            }
        }
    }

    public void draw(Graphics g) {
        g.setColor(frame.getBackground());
        g.fillRect(0,0,frame.getWidth(),frame.getHeight());
        g.setFont(new Font("sansserif", Font.BOLD, 32));
        g.setColor(frame.getForeground());
        g.drawString("yes", 50, 50);
    }

    public void colorChange() {
                colorCount++;
        if (colorCount > 4) {
            colorCount = 0;
        }

        frame.setForeground((Color) colorList.get(colorCount));
    }

    } 
```

（如果您尝试运行我的代码，请尝试非常努力地旋转鼠标滚轮，它会变得更加明显）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:58:06.553

1.  `while(true) {`是无限循环，没有中断；铁

2.  使用`Swing Timer`而不是`Runnable#Thread`延迟`Thread.Sleep()`

3.  画到`JPanel`or `JComponent`，而不是直接画到 the`JFrame`

4.  所有的绘画都`Swing JComponent`应该在`paintComponent()`

5.  [2D 图形教程](http://docs.oracle.com/javase/tutorial/2d/index.html)中的更多内容

编辑

![在此处输入图像描述](../Images/377e786fee54fc105069faaf026a2801.png)

![在此处输入图像描述](../Images/d3ac6727f3b3d2bdd5ecc88580dee8f9.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseWheelEvent;
import java.util.LinkedList;
import java.util.Queue;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

/**
 * based on example by @trashgod
 * 
 * @see http://stackoverflow.com/a/10970892/230513
 */
public class ColorWheel extends JPanel {

    private static final int N = 32;
    private static final long serialVersionUID = 1L;
    private final Queue<Color> clut = new LinkedList<Color>();
    private final JLabel label = new JLabel();

    public ColorWheel() {
        for (int i = 0; i < N; i++) {
            clut.add(Color.getHSBColor((float) i / N, 1, 1));
        }
        //clut.add(Color.BLACK);
        //clut.add(Color.BLUE);
        //clut.add(Color.YELLOW);
        //clut.add(Color.GREEN);
        //clut.add(Color.PINK);
        label.setFont(label.getFont().deriveFont(36f));
        label.setForeground(clut.peek());
        label.setText("@see http://stackoverflow.com/a/10970892/230513");
        setBackground(Color.white);
        add(label);
        label.addMouseWheelListener(new MouseAdapter() {

            @Override
            public void mouseWheelMoved(MouseWheelEvent e) {
                label.setForeground(clut.peek());
                clut.add(clut.remove());
            }
        });
    }

    @Override
    public Dimension getPreferredSize() {
        int w = SwingUtilities.computeStringWidth(label.getFontMetrics(
                label.getFont()), label.getText());
        return new Dimension(w + 20, 80);
    }

    private void display() {
        JFrame f = new JFrame("ColorWheel");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ColorWheel().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T00:34:38.183

*根本*区别在于，您尝试从错误的线程与 Graphics 对象进行交互，并且不知道 Graphics 对象当时所处的状态。

在 Swing 中与 Graphics 对象交互的一般正确方法是制作一个覆盖该`paintComponent(Graphics)`方法的自定义组件。您在该方法中进行绘图。

你的 colorChange() 方法可以告诉你的组件通过调用来重新绘制自己`repaint()`，这最终会导致`paintComponent(Graphics)`在正确的时间调用正确的线程。

[看这里的教程](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)

# php - 如何组合 sql 表中的 2 列来搜索全名

> ID：11002850
> 
> 赞同：1
> 
> 时间：2012-06-12T18:44:17.060
> 
> 标签：php, mysql, phpmyadmin

> 我有一个带有 FirstName 和 LastName 列的 mySQL 数据库，目前我有一个搜索 Lastnames 的搜索查询，当 LastNames 匹配时，它们会在屏幕上与它所在行的 FirstName 一起回显，现在太好了，我想找到什么out 是如何使查询搜索输入到输入字段中的 FullNames，请记住，我没有 FullName 列，全名将是用户输入的内容，下面是我目前拥有的示例在职的！谢谢。

```
if(isset($_GET['name'])){   
    $raw_name=$_GET['name'];

    if(preg_match("/[A-Z | a-z]+/", $raw_name)){        
        $name=$raw_name;        
        include "connect.php";      
        //-query the database table
        $sql="SELECT userId, FirstName, LastName FROM residential2 WHERE FirstName='" . $name   ."'";
        //-run the query against the mysql query function
        $result=mysql_query($sql);
        //-count results
        $numrows=mysql_num_rows($result);

        echo "<div align=\"center\">" . $numrows . " results found for " . stripslashes($name) . "</div>";

        while($row=mysql_fetch_array($result)){         
            $FirstName =$row['FirstName'];
            $LastName=$row['LastName'];
            $userId=$row['userId']; 
            //-display the result of the array
            echo "<ul>\n"; 
            echo "<li>" . "<a href=\"index.php?id=$userId\">" . $LastName . " "  .$FirstName . "   </a></li>\n";
            echo "</ul>";
        }
    }
    else {      
        echo "<p>Please enter a search query</p>";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-08T07:30:09.370

**它非常非常简单！**

SELECT * FROM your_table WHERE CONCAT( field1, ' ' , filed2 ) like '% $query %'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:46:24.273

利用[`concat()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)

```
$sql="SELECT userId, CONCAT(FirstName, ' ', LastName) AS fullname FROM residential2 WHERE FirstName='" . $name   ."'";

<?php
    $fullname = $row['fullname']; 
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:47:56.457

你可以这样做：

```
$sql="SELECT userId, FirstName, LastName 
            FROM residential2 
            WHERE concat(FirstName, ' ', LastName) like '%$name%'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:53:53.897

您必须将全名拆分为名字和姓氏，然后进行相应搜索。给你的代码片段：

```
SELECT REVERSE(SUBSTR(REVERSE(name),INSTR(REVERSE(name),' ')+1)) AS first_name,
REVERSE(SUBSTR(REVERSE(name),1,INSTR(REVERSE(name),' '))) AS last_name 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-25T12:04:11.500

```
SELECT lname, fname FROM TABLE where CONCAT(fname, ' ', lname) LIKE '%$fullname%' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-19T11:43:16.340

```
$frnd_name = trim(preg_replace( "/[ ]+/", " ", $_GET['frnd_search'] ) );
$arr = explode(" ", $frnd_name, 2);

if(!empty($arr[1]))
    $sql_where = "name LIKE '%".$arr[0]."%' AND lastname LIKE '%".$arr[1]."%'";
else
    $sql_where = "name LIKE '%".$arr[0]."%' OR lastname LIKE '%".$arr[0]."%' OR username LIKE '%".$arr[0]."%' OR email LIKE '%".$arr[0]."%'";

$sql = "SELECT name,lastname,username,email FROM user WHERE ".$sql_where;
$result = $conn->query($sql);

if ($result->num_rows > 0) {
    while($row = $result->fetch_assoc()) {
        echo "".$row['name']." ".$row['lastname']."<br>";
    }
} 
```

# redirect - mod重写的学习优先级

> ID：11002855
> 
> 赞同：1
> 
> 时间：2012-06-12T18:44:31.540
> 
> 标签：redirect

我想将一些旧链接重定向到新位置。我正在使用wordpress。

我将这些行添加到 .htaccess 文件的顶部，因为我希望格式为 authors/NNNNN/WORDS-GO_HERE 的 URL 映射到 /?author=NNNNarticles/NNNN/WORDS-GO_HERE 以映射到 /?p=NNNN

第二个工作正常，但作者没有。如果我在浏览器中键入查询字符串，它会找到作者，但如果我尝试 www.myurl.com/authors/NNNNN/blah，我会得到一个找不到。

最后，当有一篇标题为 Authors should Publish 的文章时，正在寻找作者的 URL 将重定向到该文章。我重命名了这篇文章并重置了它的 slug，现在我得到了 not found 错误。

有任何想法吗？我想成为重写大师，但我没有一个好的开始。

干杯

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^authors/([0-9]+)/(.*)$ /?author=$1 [N]
RewriteRule ^articles/([0-9]+)/(.*)$ /?p=$1 [N]
</IfModule>

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

# eclipse - 使用 Coldfusion Builder 和 Mercurial Eclipse 插件，如何签入更改 - 包括链接文件夹中的更改

> ID：11002856
> 
> 赞同：0
> 
> 时间：2012-06-12T18:44:34.577
> 
> 标签：eclipse, coldfusion, mercurial, coldfusionbuilder

我们为网络服务器的根目录设置了一个 Hg 存储库。有许多项目都有自己的目录，并且有一个通用的 C 组件目录。

在 CFBuilder 中，我为它们中的每一个都设置了一个项目，并且我正在使用链接文件夹来更轻松地访问这些组件。

CFBuilder 和插件正确显示两者都在版本控制之下，并在进行更改时正确更新 - 但是当从 Project > Team > Commit 中选择我要提交时，C 目录中的任何更改都不会显示在将提交的更改。

是否可以让它以这种方式工作，或者是否有首选的方式来处理链接文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:56:58.440

您需要为组件设置一个单独的项目，并从那里进行提交。在链接文件夹中所做的更改应反映在 C 项目中，但如果 C 项目是不同存储库的一部分（鉴于您的链接文件夹，情况似乎如此），您需要从该项目提交。

# ios - ui 表视图单元格重新排序 *无* 阴影

> ID：11002858
> 
> 赞同：2
> 
> 时间：2012-06-12T18:44:41.023
> 
> 标签：ios, uiview, uitableview, shadow

我有一个 uitableview，当我将其置于编辑模式并重新排序单元格时，当我拖动单元格时，本机 ui 会显示单元格分隔符/阴影。有没有办法在不可见阴影的情况下拖动单元格？我已经在我的表格视图上设置了 setSeparatorStyle:UITableViewCellSeparatorStyleNone，但是对于被拖动的单元格，阴影仍然可见。谢谢！

# eclipse - Eclipse Arduino 制作：*** 错误 1

> ID：11002866
> 
> 赞同：2
> 
> 时间：2012-06-12T18:45:23.470
> 
> 标签：eclipse, gcc, makefile, arduino, avr-gcc

以下是我尝试构建项目时遇到的错误。我不确定它在说什么文件或目录。所有文件和目录都在项目目录中。

我按照[http://arduino.cc/playground/Code/Eclipse](http://arduino.cc/playground/Code/Eclipse)中的说明设置了我的 IDE。

Arduino 核心文件是否应该在项目目录中并专门添加到 Arduino 核心库中？我给它的只是`liArduinoCore.a`我的 Arduino IDE 生成的文件。这可能是问题吗？

### 错误信息

```
**** Build of configuration Debug for project CustomLEDPoi ****

make all 
Building target: CustomLEDPoi.elf
Invoking: AVR C++ Linker
avr-gcc -Wl,-Map,CustomLEDPoi.map,--cref Wl,--gc-sections -    L"C:\Users\Justin\workspaceArduino\arduino_core\src" -L"C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src" -L"C:\Users\Justin\workspaceArduino\CustomLEDPoi\arduinolib" -L"C:\Users\Justin\workspaceArduino\CustomLEDPoi\lib" -mmcu=atmega328p -o "CustomLEDPoi.elf"  ./src/glowstick2.o  ./lib/CShiftPWM.o ./lib/MeetAndroid.o ./lib/hsv2rgb.o  ./arduinolib/HardwareSerial.o ./arduinolib/SPI.o   -lArduinoCore
avr-gcc.exe: Wl,--gc-sections: No such file or directory
make: *** [CustomLEDPoi.elf] Error 1

**** Build Finished **** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:24:54.410

似乎`-`缺少a `Wl,--gc-sections`。它实际上应该是`-Wl,--gc-sections`。如果没有正确的标志，编译器会假定它是一个源文件。您应该检查生成文件并进行验证。

# html - html 5 音频流伪造文件。渐进式下载，PCM WAV

> ID：11002879
> 
> 赞同：1
> 
> 时间：2012-06-12T18:46:14.833
> 
> 标签：html, audio, streaming, wav, pcm

据我所知，html5 中没有可用的音频流。即使有音频标签。

也就是说，您始终必须提供文件而不是传递某种音频流。

所以，我们知道最常用的格式是 ogg 和 mp3（不是免费的）。也可以使用 wav，但由于其大小不常用。

我的问题是我可以伪造一个文件，就好像它是一个流一样，比如创建 wav 文件（带有 riff 标头）并指定 PCM 格式详细信息（频率、通道、等等等等）并将其作为前几个字节传递，然后通过线路发送 PCM 流（实际上是音频块）。

我看到的第一个问题是 wav 文件中的 RIFF 标头是否需要块大小，即文件的长度。好吧，我们没有长度，因为它是音频流​​。

有任何想法吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:59:05.947

是的，一点没错。

客户端不需要知道或关心它正在播放的媒体是实时创建的，还是从磁盘加载的。

根据使用的编解码器，您可能会遇到挑战。WAV 提出了您在标题中提到的问题，但应该是可能的。使用 MP3，您通常可以在任何时候发送数据，解码器将自行同步到帧。

# android - 从通知启动活动

> ID：11002882
> 
> 赞同：1
> 
> 时间：2012-06-12T18:46:30.350
> 
> 标签：android, android-activity, android-intent, notifications

我有一个 ListActivity 和一个包含警报对象详细信息的 Listview。当应用程序未打开并且发生警报（应用程序使用 AlarmManager 在用户选择的时间唤醒）时，会出现一个通知，单击该通知会启动 ListActivity 并将警报对象传递给它。

ListActivity 检查 onCreate 中的 Alarm 对象，如果存在将突出显示正确的 ListItem 以表示刚刚发生的警报。所有这些都运作良好。

当 ListActivity 已经在前台时，我想做类似的事情。我已将 single_top 添加到通知的 Intent 中，因此我不会在现有 ListActivity 之上获得新的 ListActivity。但问题是 onCreate 或 onResume 没有被调用，所以我没有机会检查传递的警报对象。

有没有办法达到我想要的效果？我错过了生命周期方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:49:10.567

缺少的生命周期方法是`onNewIntent`.

# javascript - javascript, regexp - 在 span 中包装颜色值

> ID：11002889
> 
> 赞同：0
> 
> 时间：2012-06-12T18:46:56.053
> 
> 标签：javascript, html, regex, string

我希望`<code>`元素中的所有 CSS 颜色值都包含在 span 标签中。

所以这：

```
<code id="colorful-css">
body {
    color: black;
}
a {
    text-decoration: none;
    color: #0cf;
}
#box {
    outline: 1px solid rgb(255,0,0);
    background: hsla(235, 85%, 43%,.5);
}
</code> 
```

会变成这样：

```
<code id="colorful-css">
body {
    color: <span class="css-color">black</span>;
}
a {
    text-decoration: none;
    color: <span class="css-color">#0cf</span>;
}
#box {
    outline: 1px solid <span class="css-color">rgb(255,0,0)</span>;
    background: <span class="css-color">hsla(235, 85%, 43%,.5)</span>;
}
</code> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:14:32.817

如果您不打算完全解析 CSS，因此不介意一些可能的错误（注释、引号等），您可以使用如下表达式：

```
#(?:[\da-f]{3}){1,2}\b|\b(?:rgba?|hsla?)\([^()]+\)|\b(?:red|blue|list|of|valid|color|names|...)\b 
```

根据需要扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:00:59.780

为此，您需要一个语法荧光笔。我不是编码专家，但您可以使用一些插件，例如[Google Code Prettify](http://code.google.com/p/google-code-prettify/)

# javascript - 如何访问 JSON 内数组中的数组值？

> ID：11002895
> 
> 赞同：1
> 
> 时间：2012-06-12T18:47:55.363
> 
> 标签：javascript, jquery, json, google-maps, google-maps-api-3

如何访问每个和元素`features`中的每个数组值？我试过这样：`condo``house`

```
attr.features.name, 
```

...但`undefined`会在 Web 控制台中弹出。

**JSON**：

```
({condos:[{Address:'123 Fake St.', Lat:'56.645654', Lng:'23.534546', features:[{id:'1', name:'Swimming Pool'},{id:'2', name:'BBQ'},{..etc..}]},{... another condo ...},{...}],houses:[{Address:'1 Main Ave.', Lat:'34.765766', Lng:'27.8786674', features:[{...},{...}]},{... another house ...}, {...}]}) 
```

**代码**：

```
 $.each(markers, function(type, elements) {
        $.each(elements, function(index, attr){
            // if it's a house - make house marker. if it's a condo - make condo marker.
            if (type == 'houses') {
                $('#map').gmap('addMarker', { 'features': attr.features.name, 'position': new google.maps.LatLng(parseFloat(attr.lat), parseFloat(attr.lng)), 'bounds':true, 'icon':'house.png' });
            }
            else if (type == 'condos') {
                $('#map').gmap('addMarker', { 'features': attr.features.name, 'position': new google.maps.LatLng(parseFloat(attr.lat), parseFloat(attr.lng)), 'bounds':true, 'icon':'condo.png' });
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:23:10.150

您有一个包含两个数组的对象。您应该分别访问每个数组

```
$(markers.condos).each(function(index, elem) {
    $('#map').gmap('addMarker', {
        'features': elem.features,
        'position': new google.maps.LatLng(parseFloat(elem.lat), parseFloat(elem.lng)),
        'bounds': true,
        'icon': 'condo.png'
    });
});​ 
```

和同样的`markers.houses`

# ios - UIImageView 在顶部并设置大小

> ID：11002897
> 
> 赞同：0
> 
> 时间：2012-06-12T18:47:59.967
> 
> 标签：ios, xcode, cocoa-touch, uiimageview, uigesturerecognizer

1）我有一个`UIView`，`UIImageView`我从图片库加载图片。我想知道如何将图片“居中”在屏幕上并使纵横比不变。例如，如果我加载一张处于横向模式的图片，我如何确保图片不会在整个屏幕上拉伸？我的应用程序在纵向模式下工作。

2）在同一个视图中，我想添加这样的效果，即当用户触摸屏幕时，按钮菜单会在他再次按下时淡出并重新出现。我不确定那叫什么，我无法让它`tap gesture recognizer`工作。

编辑：

我设置了`UIImageView`页面加载

```
- (void)viewDidLoad
{
[super viewDidLoad];
xlabel = [[UILabel alloc] initWithFrame:self.setLablePosition];
xlabel.backgroundColor = [UIColor clearColor];

imgView.image = self.appDelegate.theImg; // now the image is put on a UIImageView that is "full screen"
xlabel.text = @"Some text";
[imgView addSubview:xlabel];
// Do any additional setup after loading the view.
} 
```

至于`Tap gesture`：

```
-(IBAction)screenTapped{
NSLog(@"screen Tapped");
} 
```

`IBAction`链接到`tap gesture recognizer`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:14:10.853

为了使 UIImageView 在视图中居中，您可以执行以下操作

```
//First give imgView the correct size
//You may need to divide the size by some constant if the image is too big
imgView.frame = CGRectMake(0, 0, self.appDelegate.theImg.size.width, self.appDelegate.theImg.size.width);
//Then center it
imgView.center = self.view.center; 
```

要添加点击手势识别器，请执行以下操作

```
UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(screenTapped)];
//By deafualt interaction is disabled
imgView.userInteractionEnabled = YES;
[imgView addGestureRecognizer:recognizer]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:03:30.180

我的解决方案是

1) 添加`imgView.contentMode = UIViewContentModeScaleAspectFit;`

2) 就像 Omar Abdelhafith 说我添加的那样`imgView.userInteractionEnabled = YES;`，`UITapGestureRecognizer`为我创建了故事板。

# asp.net-mvc-3 - 在 MVC3 中查看超过 3 个表数据

> ID：11002902
> 
> 赞同：0
> 
> 时间：2012-06-12T18:48:35.630
> 
> 标签：asp.net-mvc-3, sql-server-2008

我正在使用 MVC3 构建一个 Intranet 网站。我有一个要显示 3 个表格的视图。仅从一个数据库中获取所有 3 个表数据。对于 3 个表数据，我有 3 个不同的存储过程。我正在考虑在 index.cshtml 中使用 3 个不同的局部视图。并且可以使用3个存储过程来获取数据。

有人可以帮助我如何设置控制器索引方法，以便它返回所有 3 个部分视图的视图吗？我可以使用viewbag。但是我在网上阅读了一些文章，它说这不是使用 viewbag 的好方法。目前，控制器中的 Index 方法使用 1 个存储过程仅返回一个部分视图的视图。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:01:09.390

创建自定义视图模型。

模型：

```
public class MyViewModel 
{
    public DataSet Result1 { get; set; }
    public DataSet Result2 { get; set; }
    public DataSet Result3 { get; set; }
} 
```

控制器动作：

```
public ViewResult myAction()
{
    var myViewModel = new MyViewModel({
         Result1 = XXX, // get result 1
         Result2 = XXX, // get result 2
         Result3 = XXX  // get result 3
    });

    return View(myViewModel);
} 
```

看法：

```
@model MyViewModel;

<div id="results1">@Model.Result1.Tables[0].Rows[0]["someValueFromDB"].ToString();</div>
... etc. 
```

# git - 我可以从命令行向 github 添加问题吗？

> ID：11002908
> 
> 赞同：32
> 
> 时间：2012-06-12T18:48:58.763
> 
> 标签：git, github, command-line-interface, github-issues

我是 git 新手，我希望能够通过 github 为我的项目绘制计划和进度。

问题是，这需要在 github.com 上使用浏览器进行大量点击，我希望能够通过使用命令行程序来自动完成任务。

github有命令行界面吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-12T18:53:21.470

有一个[`ghi`gem](http://rubygems.org/gems/ghi)可以用来管理问题。

> ```
> The most commonly used ghi commands are:
>    list        List your issues (or a repository's)
>    show        Show an issue's details
>    open        Open (or reopen) an issue
>    close       Close an issue
>    edit        Modify an existing issue
>    comment     Leave a comment on an issue
>    label       Create, list, modify, or delete labels
>    assign      Assign an issue to yourself (or someone else)
>    milestone   Manage project milestones 
> ```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-12T18:51:41.473

你可以查看[这个 cli](http://rubygems.org/gems/ghi)以获取 Github 问题 API。请注意，这仅特定于 Github 问题。

希望这可以帮助。

[编辑] 原始答案提到了[这个](https://github.com/jsmits/github-cli)不再起作用的应用程序并推荐`ghi`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-04-27T16:52:01.373

使用 Github 新的官方[CLI](https://cli.github.com/)（命令行界面）：

```
gh issue create --title "How to create an issue?" --body "I need a github CLI" 
```

请参阅其他[详细信息和选项](https://cli.github.com/manual/gh_issue_create)以及[安装说明](https://cli.github.com/manual/installation)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T23:14:21.477

我正在开发一个[github_cli](https://github.com/peter-murach/github_cli) gem，它提供了对整个 GitHub API v3 的命令行访问。请试一试并报告任何问题/想法/功能请求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-30T17:36:10.877

[NodeGH](http://nodegh.io/) - Github 命令行工具。让您创建新问题、评论、打开或关闭。你可以在他们的[Github repo](https://github.com/node-gh/gh)找到所有可用的命令。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-21T18:43:14.167

您有 3 个选项：

1.  **使用github支持的官方命令行界面：**

    教程： http: [//pythonhosted.org/hub/](http://pythonhosted.org/hub/)

    Github repo：[https](https://github.com/github/hub) ://github.com/github/hub （~12k stars）

2.  **使用 NodeH 接口**：

    教程： http: [//nodegh.io/](http://nodegh.io/)

    Github 仓库：[https ://github.com/node-gh/gh](https://github.com/node-gh/gh)

3.  **使用 ghi 接口：**

    教程和 Github 存储库：[https ://github.com/stephencelis/ghi/](https://github.com/stephencelis/ghi/)

所有 3 看起来都很酷。该`hub`应用程序看起来拥有最多的星星，并且得到了 github 的官方支持。所以它最有可能长期维持。所以，如果我正在寻找一个可以长期支持的解决方案，我会选择选项#1：`hub`

# c#-4.0 - 在运行 ASP.NET MVC 3 应用程序的集成测试时，如何记录完整的 HTTP 请求和响应？

> ID：11002909
> 
> 赞同：2
> 
> 时间：2012-06-12T18:49:02.563
> 
> 标签：c#-4.0, httpwebrequest, httpwebresponse

假设我有一个 ASP.NET MVC 3 控制器和我为其编写集成测试的操作。

```
namespace Sample.Controllers {
    public class MyController : Controller {
        [HttpPost]
        public ActionResult Edit(MyModel model)
        {
            // process requests
        }
    }
} 
```

测试具有以下“模式”。

```
namespace Sample.Controllers.IntegrationTests {

    [TestClass] 
    public class MyControllerTests 
    {
        [TestMethod]
        public void Edit()
        {
            var request = (HttpWebRequest) WebRequest.Create(new Uri(uri));
            request.Method = "POST";
            request.Accept = "application/json";
            request.AllowAutoRedirect = false;
            request.AutomaticDecompression = DecompressionMethods.GZip;
            request.UserAgent = "IntegrationTests/1.0";
            request.ContentType = "application/json";
            var resource = CreateResource();
            using (Stream stream = request.GetRequestStream())
            {
                // serialize resource to stream
            }

            using (var response = (HttpWebResponse) request.GetResponse())
            {
                 Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);

                 /* perform more tests */
            }
        }

        public MyModel CreateResource() {
            /* create an instance of mymodel */
        }
    }

} 
```

这些测试旨在验证功能、安全性等；所以模拟和单元测试是不够的。测试以无人值守的方式执行，并且始终使用 https（出于安全原因，对证书进行了验证），因此使用代理是有问题的。它们也以有限的特权执行。

时不时地测试失败。我想保存请求和响应的副本（类似于[提琴手](http://www.fiddler2.com/fiddler2/)所做的）并将其与每个测试相关联，以便可以追溯使用它来诊断问题（如果存在）。

可以将请求和响应（包括它们的标头）保存到磁盘而不会产生改变测试结果的副作用吗？例如，对于大型流，响应流不可查找，因此在继续测试响应之前尝试将流保存到磁盘似乎不起作用。

# php - 使用 YII 搜索连接表

> ID：11002912
> 
> 赞同：1
> 
> 时间：2012-06-12T18:49:16.917
> 
> 标签：php, mysql, yii

我有以下表结构。tb_posts 具有与 YII 中的 tb_author.id 相关的字段 author_id 我的帖子中有以下内容 activeRecord

```
public function relations()
{

    return array(
        'authorRelation' => array(self::BELONGS_TO, 'authorRecord', 'author')
    );
} 
```

我如何搜索名为“foo”的作者的帖子？我正在尝试以下但没有成功

```
$criteria=new CDbCriteria;
$criteria->with = array('authorRelation');
$criteria->together = true;
$criteria->compare( 'author.name', 'foo', true );
$posts=PostsRecord::model()->findAll($criteria); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:15:58.993

在初始化时为您的模型设置表别名。

```
class PostsRecord extends CActiveRecord
{
    // ...
    public function init() { $this->setTableAlias( 'postsrecord' ); }
    // ...
}

class AuthorRecord extends CActiveRecord
{
    // ...
    public function init() { $this->setTableAlias( 'authorrecord' ); }
    // ...
} 
```

最后：

```
$condition=new CDbCriteria;
$condition->with = array('authorRelation');
$condition->together = true;
$condition->condition = 'authorrecord.name=:authorname';
$condition->params = array( ':authorname' => 'foo' );
$posts=PostsRecord::model()->findAll($condition); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:19:20.593

你的关系应该是`'authorRelation' => array(self::BELONGS_TO, 'authorRecord', author_id')`。第三个参数是外键。

代码的第二部分没有任何错误，如果您正确设置了关系，搜索应该可以工作。

# php - 提高 PHP 性能 PHP INI

> ID：11002916
> 
> 赞同：-1
> 
> 时间：2012-06-12T18:49:29.397
> 
> 标签：php, ini

该服务器由 JustHost 托管，并且有几个单独的域。我正在将文件上传到其中一个域的 wordpress 博客，而我的导入每次只能通过 1332 条记录。

我认为这是因为没有足够的数据允许上传。我已经更改了 PHP.ini，它现在非常快，但仍在上传相同数量的记录。

我在公共 HTML 文件夹中放置了一个 PHP ini，在站点路由域文件夹中也放置了一个，但仍然得到相同的结果。

```
post_max_size = 500M
upload_max_filesize = 400M
max_execution_time = 3000
max_input_time = 6000
memory_limit = 2200M 
```

我也将这一行放在了 wordpress 配置文件中

```
define('WP_MEMORY_LIMIT', '2200M'); 
```

有什么建议么？

致命错误：第 991 行 /home/divethe1/public_html/callinggrove.co.uk/wp-includes/kses.php 中允许的 67108864 字节内存大小已用尽（尝试分配 44 字节）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:19:34.400

> 致命错误：第 991 行 /home/divethe1/public_html/callinggrove.co.uk/wp-includes/kses.php 中允许的 67108864 字节内存大小已用尽（尝试分配 44 字节）

这种错误是由您的代码中的内存泄漏引起的，它与您的服务器配置无关，您构建一个字符串或存储一个值，该值在每次迭代中按其自身的值呈指数增长。

```
<?php //$str is added to $str
$str = str_repeat('abc',1000);
for($i=0;$i<=100;$i++){
    $str = $str.$str;
}?> 
```

或者在您的情况下，您可能会构建一个您添加的帖子数组，并将整个内容添加到一个值中，并且内存不足。

请在发生错误的地方发布一些代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-12T18:53:10.153

如果可能，请尝试使用持久连接。

我不知道你是否可以使用 wordpress 做到这一点。

# jquery - knockoutjs 绑定到可观察数组中的单个对象

> ID：11002917
> 
> 赞同：1
> 
> 时间：2012-06-12T18:49:34.250
> 
> 标签：jquery, asp.net-mvc, knockout.js

我是 Knockoutjs 的新手。我有一个可观察的用户数组。这是我的用户模型：

```
function User(data) {
        this.NameID = ko.observable(data.NameID);
        this.UserID = ko.observable(data.UserID);
        this.InTime = ko.observable(data.InTime);
        this.OutTime = ko.observable(data.OutTime);
        this.Notes = ko.observable(data.Notes);
        this.StatusID = ko.observable(data.StatusID);
        this.Status = ko.observable(data.Status);
        this.InOut = ko.observable(data.InOut);
        this.Name = ko.observable(data.Name);
        return this;
    } 
```

然后在我的视图模型中，我创建了一组用户。在我的视图中执行 foreach 以显示表格中的所有用户很容易，但我想制作一个表单，以便当前用户可以更改他的变量。我正在使用会话变量来设置用户 ID。然后我使用*ko.utils.arrayFirst*从数组中查找当前用户。我觉得我在这里没有任何意义。无论如何要制作一个表格来访问用户？如下所示：

```
function UserViewModel() {
        var self = this;
        self.users = ko.observableArray([]);
        self.statuses = ko.observableArray([]);
        self.currentUser = ko.utils.arrayFirst(self.users(), function (user) {
                return user.UserID() == @HttpContext.Current.Session["UserID"];
        });
} 
```

然后在我看来制作一个表格（我正在使用 twitter-bootstrap），如下所示：

```
 <form class="well form-horizontal">    
        <div class="control-group">
            <label class="control-label" for="Statuses">
                Status</label>
            <div class="controls">
                <select id="Statuses" data-bind="options: statuses, optionsValue: 'StatusID', optionsText: 'Stat', value: currentUser.StatusID">
                </select>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="InTime">
                In:</label>
            <div class="controls">
                <input id="InTime" data-bind="value: currentUser.InTime" class="span1" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="OutTime">
                Out:</label>
            <div class="controls">
                <input id="OutTime" data-bind="value: currentUser.OutTime" class="span1" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="Notes">
                Notes</label>
            <div class="controls">
                <textarea id="Notes" data-bind="value: currentUser.Notes" /></textarea>
                 <p><span style="text-align:center;"><a id="chg" class="btn btn-primary" >Update</a></span></p>
            </div>
        </div>   
       </form> 
```

如果我没有任何意义或者您需要更多信息来帮助解决我的问题，请发表评论。谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:24:18.623

你得到什么样的错误？在我看来，您的 currentUser 属性将在构造函数中设置，而数组看起来仍然是空的，也许您只是没有显示用户的填充位置。另一个是您只设置一次，您可以为用户 ID 创建一个 observable 并使用计算来查找匹配的用户，然后您可以在稍后或设置用户之后通过更改 ID 轻松更改用户：

```
self.currentUserId = ko.observable(@HttpContext.Current.Session["UserID"]);
self.currentUser = ko.computed(function() {
    return ko.utils.arrayFirst(self.users(), function (user) {
            return user.UserID() == self.currentUserId();
    });
}); 
```

当您更新数组或 currentUserId 可观察对象时，应正确设置 currentUser。如果用户是可观察的，则需要将其作为函数调用，***或***在表单上使用 with 绑定：

```
<input id="InTime" data-bind="value: currentUser().InTime" class="span1" />

<form data-bind="with: currentUser">
<input id="InTime" data-bind="value: InTime" class="span1" /> 
```

# r - 计算向量中每个索引的排名

> ID：11002920
> 
> 赞同：3
> 
> 时间：2012-06-12T18:49:47.640
> 
> 标签：r, rank

我想计算向量中每个索引的排名，例如：

```
x <- c(0.82324952352792, 0.11953364405781, 0.588659686036408, 0.41683742380701, 
       0.11452184105292, 0.438547774450853, 0.586471405345947, 0.943002870306373, 
       0.28184655145742, 0.722095313714817)

calcRank <- function(x){
  sorted <- x[order(x)]
  ranks <- sapply(x, function(x) which(sorted==x))
  return(ranks)
}

calcRank(x)

> calcRank(x)
 [1]  9  2  7  4  1  5  6 10  3  8 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T19:00:37.987

为什么不只是：

```
rank(x)     # ..... ?

# [1]  9  2  7  4  1  5  6 10  3  8 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T18:51:30.770

`match`是你想要的：

```
match(x, sort(x)) 
```

# c++ - 将 asio 与 accepter.async_accept 一起使用时出现 boost::bind 错误

> ID：11002923
> 
> 赞同：0
> 
> 时间：2012-06-12T18:49:53.843
> 
> 标签：c++, boost, boost-asio, boost-bind

我正在通过[http://gwenael-dunand.developpez.com/tutoriels/cpp/boost/asio/](http://gwenael-dunand.developpez.com/tutoriels/cpp/boost/asio/)上的这个提升教程，它给了我很多错误

```
boost::bind(&tcp_server::handle_accept, this, new_connection, boost::asio::placeholders::error); 
```

我在这里使用它

```
m_acceptor.async_accept(new_connection.socket(), boost::bind(&tcp_server::handle_accept, this, new_connection, boost::asio::placeholders::error)); 
```

由于这条线的存在，我收到了这个巨大的错误

```
In file included from /usr/include/boost/asio/basic_socket.hpp:24,                                                                                                                                                              
                 from /usr/include/boost/asio/basic_datagram_socket.hpp:25,
                 from /usr/include/boost/asio.hpp:20,
                 from /home/dipro/Development/asio/main.cpp:5:
/usr/include/boost/noncopyable.hpp: In copy constructor ‘boost::asio::basic_io_object<boost::asio::stream_socket_service<boost::asio::ip::tcp> >::basic_io_object(const boost::asio::basic_io_object<boost::asio::stream_socket_service<boost::asio::ip::tcp> >&)’:
/usr/include/boost/noncopyable.hpp:27: error: ‘boost::noncopyable_::noncopyable::noncopyable(const boost::noncopyable_::noncopyable&)’ is private
/usr/include/boost/asio/basic_io_object.hpp:30: error: within this context
In file included from /usr/include/boost/asio/datagram_socket_service.hpp:33,
                 from /usr/include/boost/asio/basic_datagram_socket.hpp:26,
                 from /usr/include/boost/asio.hpp:20,
                 from /home/dipro/Development/asio/main.cpp:5:
/usr/include/boost/noncopyable.hpp: In copy constructor ‘boost::asio::detail::reactive_socket_service<boost::asio::ip::tcp, boost::asio::detail::epoll_reactor<false> >::implementation_type::implementation_type(const boost::asio::detail::reactive_socket_service<boost::asio::ip::tcp, boost::asio::detail::epoll_reactor<false> >::implementation_type&)’:
/usr/include/boost/noncopyable.hpp:27: error: ‘boost::noncopyable_::noncopyable::noncopyable(const boost::noncopyable_::noncopyable&)’ is private
/usr/include/boost/asio/detail/reactive_socket_service.hpp:58: error: within this context
In file included from /usr/include/boost/asio/basic_socket.hpp:24,
                 from /usr/include/boost/asio/basic_datagram_socket.hpp:25,
                 from /usr/include/boost/asio.hpp:20,
                 from /home/dipro/Development/asio/main.cpp:5:
/usr/include/boost/asio/basic_io_object.hpp: In copy constructor ‘boost::asio::basic_io_object<boost::asio::stream_socket_service<boost::asio::ip::tcp> >::basic_io_object(const boost::asio::basic_io_object<boost::asio::stream_socket_service<boost::asio::ip::tcp> >&)’:
/usr/include/boost/asio/basic_io_object.hpp:30: note: synthesized method ‘boost::asio::detail::reactive_socket_service<boost::asio::ip::tcp, boost::asio::detail::epoll_reactor<false> >::implementation_type::implementation_type(const boost::asio::detail::reactive_socket_service<boost::asio::ip::tcp, boost::asio::detail::epoll_reactor<false> >::implementation_type&)’ first required here 
In file included from /usr/include/boost/asio/basic_datagram_socket.hpp:25,
                 from /usr/include/boost/asio.hpp:20,
                 from /home/dipro/Development/asio/main.cpp:5:
/usr/include/boost/asio/basic_socket.hpp: In copy constructor ‘boost::asio::basic_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> >::basic_socket(const boost::asio::basic_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> >&)’:
/usr/include/boost/asio/basic_socket.hpp:45: note: synthesized method ‘boost::asio::basic_io_object<boost::asio::stream_socket_service<boost::asio::ip::tcp> >::basic_io_object(const boost::asio::basic_io_object<boost::asio::stream_socket_service<boost::asio::ip::tcp> >&)’ first required here 
In file included from /usr/include/boost/asio.hpp:28,
                 from /home/dipro/Development/asio/main.cpp:5:
/usr/include/boost/asio/basic_stream_socket.hpp: In copy constructor ‘boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> >::basic_stream_socket(const boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> >&)’:
/usr/include/boost/asio/basic_stream_socket.hpp:49: note: synthesized method ‘boost::asio::basic_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> >::basic_socket(const boost::asio::basic_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> >&)’ first required here 
/home/dipro/Development/asio/main.cpp: In copy constructor ‘tcp_connection::tcp_connection(const tcp_connection&)’:
/home/dipro/Development/asio/main.cpp:9: note: synthesized method ‘boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> >::basic_stream_socket(const boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> >&)’ first required here 
/home/dipro/Development/asio/main.cpp: In member function ‘void tcp_server::start_accept()’:
/home/dipro/Development/asio/main.cpp:39: note: synthesized method ‘tcp_connection::tcp_connection(const tcp_connection&)’ first required here 
/home/dipro/Development/asio/main.cpp:39: error:   initializing argument 3 of ‘boost::_bi::bind_t<R, boost::_mfi::mf2<R, T, A1, A2>, typename boost::_bi::list_av_3<A1, A2, A3>::type> boost::bind(R (T::*)(B1, B2), A1, A2, A3) [with R = void, T = tcp_server, B1 = tcp_connection&, B2 = const boost::system::error_code&, A1 = tcp_server*, A2 = tcp_connection, A3 = boost::arg<1> (*)()]’
make[2]: *** [CMakeFiles/asio.dir/main.cpp.o] Error 1
make[1]: *** [CMakeFiles/asio.dir/all] Error 2
make: *** [all] Error 2
dipro@bong:~/Development/asio/build$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:55:28.037

该教程似乎有错误。该参数`new_connection`是通过引用获取的，因此绑定需要使用`boost::ref`，否则它将尝试复制它，并且错误显示该类型是*不可*复制的。*将绑定*更改为：

```
boost::bind(
    &tcp_server::handle_accept
  , this
  , boost::ref(new_connection) // << pass by reference
  , boost::asio::placeholders::error); 
```

# jqgrid - 一次将 10k+ 行 JSON 加载到 jqGrid 1k 行中

> ID：11002924
> 
> 赞同：0
> 
> 时间：2012-06-12T18:50:03.890
> 
> 标签：jqgrid

**介绍**

我通过 ajax 将 JSON 对象加载到 jqGrid 之外的浏览器中。然后，我使用以下命令将 JSON 加载到初始设置的网格中`datatype: "local"`：

```
 $("#myGrid").jqGrid("setGridParam", {datatype: "json", loadonce: true});
  $("#myGrid")[0].addJSONData(jsonObject);
  $("#myGrid").jqGrid("setGridParam", {datatype: "local", loadonce: true}); 
```

上面的技巧让网格允许我加载 JSON 对象，而 jqGrid 不会自动调用它（这是它的默认行为）。

实现服务器端分页将是理想的，但在我的情况下目前不可行。

**问题**

我需要从 JSON 将大约 10-20k 行加载到网格中。但这需要几秒钟。为了提高性能，我试图一次从一个 JSON 对象添加 1k 行（这很快并且不会让浏览器停止运行），但我不知道如何使用我手上的 JSON 对象来做到这一点. 这是我的尝试，它将前 1k 行加载到网格中，但没有正确更新寻呼机，并且不允许我通过`addJSONData`.

```
$("#myGrid").jqGrid({
  jsonReader: {
    page: function(json) { return 1; },
    records: function(json) { return json.records; },
    repeatitems: false,
    root: "objects",
    total: function(json) { return json.totalPages; }
  },
  // . . .
}

$.jgrid.extend({
  loadJsonFirstPageOnly: function(json) {
    return this.each(function() {
      // copy the first page of data into a truncated JSON object to load into the grid
      var resultsPerPage = $("#" + this.id + "_ResultsPerPage").val();
      var numberOfPages = parseInt(json.objects.length / resultsPerPage);
      var firstPageData = {"objects": [], "pages": numberOfPages, "records": json.objects.length};
      for (var i = 0; i < 1000 && i < json.objects.length; i++) {
        firstPageData.objects[i] = json.objects[i];
      }
      // load the truncated JSON object into the grid
      var $this = $(this).jqGrid("setGridParam", {datatype: "json", loadonce: true});
      this.addJSONData(firstPageData);
      $this.jqGrid("setGridParam", {datatype: "local", loadonce: true});
      // adjust the grid's internal state
      this.p.allData = json;
    });
  }
}); 
```

有什么想法吗？谢谢！

# c# - 在 WindowsCE 上设置输入面板位置

> ID：11002927
> 
> 赞同：2
> 
> 时间：2012-06-12T18:50:25.167
> 
> 标签：c#, winforms, keyboard, compact-framework, windows-ce

也许这是不可能的，但我可以设置输入面板的位置吗？

我试过`inputpanel.Bounds = new Rectangle(x, y, width, height)`了，但输入面板是只读的。

我不想重新调整输入面板的大小，只需设置它的位置。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:06:59.263

由于某种原因（只有创建它的团队知道），[InputPanel 类](http://msdn.microsoft.com/en-us/library/microsoft.windowsce.forms.inputpanel_members%28v=vs.90%29)没有公开实际 SIP（​​软输入面板）支持的所有内容。在这种情况下，对接。一般来说，可以将 SIP 设置为“浮动”（关闭的`SIPF_DOCKED`位[`SIPINFO`](http://msdn.microsoft.com/en-us/library/ee499105%28v=winembedded.60%29.aspx)），然后可以移动它。您可以使用 P/Invoke[`SipSetInfo`](http://msdn.microsoft.com/en-US/library/ee505516%28v=winembedded.60%29)将 设置为`SIPINFO`关闭该`SIPF_DOCKED`位以及设置 SIP 的新位置。

# c# - Web 应用程序和 ISA 身份验证问题

> ID：11002928
> 
> 赞同：0
> 
> 时间：2012-06-12T18:50:32.937
> 
> 标签：c#, asp.net, windows-authentication, isaserver

现在，此代码通过获取经过身份验证的用户（Windows 身份验证）来工作。我们正在使用活动目录。但是，如果您断开网络并尝试登录此特定应用程序，您将被重定向到我们的 ISA 2006 服务器，然后将登录信息传递到应用程序（理论上，哈哈）

当我在我的手机上通过 3g 访问这个应用程序时它非常慢，但我没有收到错误（错误只是一个带有确定按钮的弹出窗口，有时它会说错误，有时它不会）。但是，当我在外部使用更快更好的计算机时，它确实给了我这个错误。我的同事进行的单元测试显示，存在某种递归循环或某种导致错误的循环。每当您在网络上登录 Web 应用程序时，它都会毫无问题地进行 Windows 身份验证并且不会出错。我花了 3 天时间试图找出我的错误但找不到它，我希望另外几双眼睛可以帮助我找到它（我正在使用带有 C# 的 ASP.net 4.0）

```
public string IdentifyUser()
    {
        string retval = string.Empty;
        try{

               //System.Security.Principal.WindowsPrincipal p = System.Threading.Thread.CurrentPrincipal as System.Security.Principal.WindowsPrincipal;
                //string UserIdentityName = p.Identity.Name;
                string UserIdentityName = Request.ServerVariables["AUTH_USER"];
                //string UserIdentityName = HttpContext.Current.User.Identity.Name.ToString();
                string slash = @"\";
                string Username = UserIdentityName.Substring(UserIdentityName.IndexOf(slash) + 1);
                retval = Data_Access_Layers.SQL.GetUserID(Username);

           }
        catch (Exception ex)
        {
            throw ex;
        }
        return retval;
    } 
```

基本上这会触发，拉取用户名，它被发送到“GetUserID”，它会查找该用户名并将附加到该人的用户 ID 发送回，然后将其发送回主页，并存储在 javascript 变量中（用于页面的其他部分）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:23:07.410

AUTH_USER 是空的问题吗？

从网络内外访问应用程序时，AUTH_TYPE 标头的值是多少？

# android - 基于语音（噪音）强度级别的语音识别？

> ID：11002930
> 
> 赞同：1
> 
> 时间：2012-06-12T18:50:44.397
> 
> 标签：android, voice-recognition

我想构建一个 android 应用程序，它可以识别我的声音，将其转换为文本，并显示我刚刚在祝酒词中所说的话。我可以通过使用将为我启动语音识别器的按钮来做到这一点。但现在我只想让它在我的声音的基础上工作。

该应用程序应触发语音识别器并仅在我开始讲话时才开始听我讲话，并且在感觉到静音时应停止聆听。就像会说话的汤姆应用程序的功能一样。它在那里记录声音，但我想使用语音识别器识别它。像这样的一些事情：

```
if(no silense)
   Launch Recognizer
else if(silence)
   Stop Recognizer
Show toast 
```

主要问题是我如何在启动语音识别器之前感知用户是否在说话。有什么方法可以感知噪音强度..？？

其次，有没有办法在后台启动语音识别器......？？

如果我可以在后台服务中检测到音频信号（有人开始说话），是否可以立即启动语音识别器来识别语音。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:54:24.783

大多数语音识别器已经有一个端点来检测语音的开头和结尾。端点通常会尝试读取环境噪声级别以确定静音的基线并调整信噪比。但是，如果输入噪声电平发生变化，它可能会触发终结者的讲话开始。如果一直用敏感的麦克风收听，终结者可能还会接听在你旁边说话的人，而不是你。

因此，使用语音按钮是一种很好的做法，可以在您希望讲话时进行宣布。试图让识别器一直在听可能不是您想要做的，或者应该留给研究人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T15:15:13.440

好的，我已经弄清楚了。我已经`mediaRecorder`为此使用了类。当应用程序启动时，我开始使用录制音频`mediaRecoder`（或者您可以提供一个按钮来启动和停止整个过程）。我检查 mediaRecorder 录制的音频的幅度。如果幅度超过预定义的阈值，我会暂停记录并启动`Voice Recognition activity`. 在`OnActivityResult`我再次恢复录音机。

```
if(mRecorder != null){
        int i= mRecorder.getMaxAmplitude();   // Getting amplitude 
        Log.d("AMPL : ", String.valueOf(i));

        if(i>20000){      // If amplitude is more than 20000
            onRecord(false);    //Stop recording before launching recognizer
            Intent intent=new Intent(this,VoiceRecognizer.class);   //Launch recognizer activity
            startActivityForResult(intent, 12112);
        } 
```

或者：您也可以使用[此](https://stackoverflow.com/questions/6316937/how-can-i-use-speech-recognition-without-the-annoying-dialog-in-android-phones)SO 帖子中提到的[RecognitionListener接口。](http://developer.android.com/reference/android/speech/RecognitionListener.html)

# ruby - 替换除 Ruby 中的第一个以外的所有匹配项。正则表达式跨越多行

> ID：11002933
> 
> 赞同：1
> 
> 时间：2012-06-12T18:50:55.730
> 
> 标签：ruby, regex, rubygems, rest-client

我正在尝试使用 restclient gem 将我最后的 3200 条推文分成 200 条（在多个页面中）。

在此过程中，我最终将以下几行多次添加到我的文件中：

```
</statuses>
<?xml version="1.0" encoding="UTF-8"?>
<statuses type="array"> 
```

为了做到这一点（因为 XML 解析需要折腾），在下载文件后，我想替换除第一个字符串之外的所有出现的上述字符串。我正在尝试以下操作：

```
 tweets_page = RestClient.get("#{GET_STATUSES_URL}&page=#{page_number}")
      message = <<-MSG
</statuses>
<?xml version="1.0" encoding="UTF-8"?>
<statuses type="array">
MSG
      unless page_number == 1
       tweets_page.gsub!(message,"")
     end 
```

上面有什么问题？有没有更好的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:20:11.253

我相信一次下载全部内容并按消息拆分您的响应正文并将其添加到第一个条目会更快。像这样的东西，无法尝试，所以将其视为一个想法。

```
tweets_page = RestClient.get("#{GET_STATUSES_URL}").body
tweets = tweets_page.split(message)
tweets_page = tweets[0]+message+tweets[1..-1] 
```

您也可以像这样轻松地将它们分成 200 人一组

如果您想在整个文本上使用 gsub 来执行此操作，您可以使用以下内容

```
tweets_page = <<-MSG
first
</statuses>
<?xml version="1.0" encoding="UTF-8"?>
<statuses type="array">
second
</statuses>
<?xml version="1.0" encoding="UTF-8"?>
<statuses type="array">
rest
MSG

message = <<-MSG
</statuses>
<?xml version="1.0" encoding="UTF-8"?>
<statuses type="array">
MSG

new_str = tweets_page.gsub message do |match|
  if defined? @first
    ""
  else
    @first = true
    message
  end
end

p new_str 
```

给

```
type=\"array\">\nrest\n"
"first\n</statuses>\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<statuses type=\"array\">\nsecond\nrest\n" 
```

# salesforce - Salesforce 验证如何在现有记录上失败？

> ID：11002934
> 
> 赞同：1
> 
> 时间：2012-06-12T18:50:55.927
> 
> 标签：salesforce, validation

想象一下，我在帐户中有两个复选框字段：“不是程序员”和“程序 Java”

我可以使用以下错误条件公式设置验证规则：`AND( Not_a_programmer__c = True, Programs_Java__c = True )`

如果两个框都被选中，这条规则将不允许我保存记录。

*但是*，已经选中两个框的现有记录会发生什么？该错误是如何引发的，又是如何报告的？

我在这里问而不是对其进行测试，因为我只能访问实时环境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:01:55.540

验证规则仅在保存记录（插入、更新、更新插入）时执行。有关详细信息，请参阅[执行顺序](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_triggers_order_of_execution.htm)(#4) 文档。

如果您想验证所有现有记录，最好的方法是运行带有字段过滤器的报告，或者您可以使用[计划批处理](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#apex_batch.htm)作业来记录错误。

# java - 这两个绑定声明与 Google Guice 有什么区别？

> ID：11002935
> 
> 赞同：2
> 
> 时间：2012-06-12T18:50:57.097
> 
> 标签：java, guice

有什么区别

```
bind(FooImpl.class).in(Scopes.SINGLETON);
bind(Foo.class).to(FooImpl.class); 
```

和

```
bind(Foo.class).to(FooImpl.class).in(Scopes.SINGLETON); 
```

使用 Google Guice？

**编辑：**

第二个声明在我正在处理的项目中在 Singleton 上创建两个实例。 [参考这里](https://stackoverflow.com/questions/11001920/why-there-is-two-instances-of-a-singleton-with-google-guice-dependency-injection)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:25:30.953

[参考](http://code.google.com/p/google-guice/wiki/Scopes)Google Guice 文档：

> 在链接绑定中，范围适用于绑定源，而不是绑定目标。假设我们有一个 Applebees 类，它同时实现了 Bar 和 Grill 接口。这些绑定允许该类型的两个实例，一个用于 Bars，另一个用于 Grills：

```
bind(Bar.class).to(Applebees.class).in(Singleton.class);
bind(Grill.class).to(Applebees.class).in(Singleton.class); 
```

> 这是因为范围适用于绑定类型（Bar、Grill），而不是满足该绑定的类型（Applebees）。要仅允许创建单个实例，请在`@Singleton`该类的声明上使用注释。或者添加另一个绑定：

```
bind(Applebees.class).in(Singleton.class); 
```

因此，`FooImpl`在第二种方式中可能有两个实例，但在编写绑定的第一种方式中没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:56:07.067

没有区别。两者都将绑定到范围内`Foo`的实例。`FooImpl``SINGLETON`

# sql - SQL Server 2012 跨链接服务器迁移空间数据，查询超时？

> ID：11002940
> 
> 赞同：2
> 
> 时间：2012-06-12T18:51:49.713
> 
> 标签：sql, sql-server

我们正在从旧系统（sql server 2008）迁移到新系统（sql server 2012），我们使用的数据源是远程的，所以我们将它配置为**链接服务器**，我们正在迁移的源中的数据有**特殊数据**（地理类型），我们正在迁移每个客户的数据，因此一些客户拥有比其他客户更多的数据，我们对数据进行批处理，并且我们正在使用**OPENQUERY**来拉取空间数据。对于数据较少的客户，迁移顺利并成功完成，但对于一个表中有超过几百万条记录的客户，迁移停止并主要出现2个错误：

错误是这样来的：

**链接服务器“xxx”的 OLE DB 提供程序“yyy”返回消息“查询超时已过期”。消息 7399，级别 16，状态 1，服务器 nnn，第 1 行链接服务器“xxx”的 OLE DB 提供程序“yyy”报告错误。由于达到资源限制，提供程序终止执行。消息 7320，级别 16，状态 2，服务器 ttt，第 1 行无法执行查询“**

```
select top (200000)            
        [row] = row_number () over ( order by t.[x]) 
    , .....
    , [Spatial] = cast(ts.[Spatial] as varbinary(max))
from [..].[..].[..] t
    join [...].[..].[… ] s
        on t.[..] = s.[...]
where (t.[x] > '00000000-0000-0000-0000-000000000000')
        and v.[x] = x
order by t.[x] 
```

**“针对链接服务器“xxx”的 OLE DB 提供程序“yyy”。构建步骤“执行 Windows 批处理命令”将构建标记为失败**

这个问题也发生在另一个没有空间数据的表上。

我们尝试遵循的方法，我们增加了查询的超时时间，我们将批次大小降低到每批次 200,000 个 Provider 处于“进程模式”，我们只有几个链接的服务器，所以缓冲区大小是可以接受的，我们尝试使用管理员角色运行迁移以确保它不是权限问题我们认为这可能是网络问题，但它不是负载均衡器问题。也许是别的东西，

另一个经常出现的错误是

**HResult 0x40，级别 16，状态 1 TCP 提供程序：指定的网络名称不再可用。**

任何想法可能是一个原因将非常感激

谢谢，

赛义夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T17:48:18.493

我会说“指定的网络名称不再可用”。错误表示远程服务器没有响应。由于 SQL Server 已经有一段时间没有“听到”来自远程服务器的消息，所以它放弃了。我会将批量减少到非常小的程度，并随着成功而增加（而不是相反）。这样你就会找到一个有效的批量大小。此外，这可能因“客户”而异，具体取决于您与他们的连接（即线路的类型和大小、线路上的流量等）。

就个人而言，我也喜欢 BCP OUT/BCP IN 选项，因为我知道它有效，但是您仍然需要考虑从远程服务器传输数据的方法。如果您在专用 T1 或更高版本上拥有强大的企业 MFT，那么您可能不会遇到问题。

SSIS 提供更多的直接传输，但我想您会遇到与现在相同的网络问题。也就是说，您可以在 SSIS 中创建通用 BCP 解决方案。

# objective-c - 属性未在 drawRect 方法中设置 - iOS

> ID：11002949
> 
> 赞同：2
> 
> 时间：2012-06-12T18:52:39.630
> 
> 标签：objective-c, ios, drawrect, quartz-core

当我尝试访问 drawRect 方法中的类变量或属性时，我看到了一些奇怪的行为。

在我的 .h 文件中，我有以下内容

```
@interface DartBoard : UIView
{
    Board * board;
    int index;
}
@property (readwrite, assign, nonatomic) NSNumber * selectedIndex;
@end 
```

在我的 .m 文件中，我有以下内容

```
@implementation DartBoard

@synthesize selectedIndex;

-(id)init
{
    self.selectedIndex = [NSNumber numberWithInt:5];
    index = 123;
    return self;
}

- (void)drawRect:(CGRect)rect {
    NSLog(@"selectedIndex: %d",[self.selectedIndex intValue]);
    NSLog(@"index: %d",index);
}

@end 
```

输出是

```
2012-06-12 19:48:42.579 App [3690:707] selectedIndex: 0
2012-06-12 19:48:42.580 App [3690:707] index: 0 
```

我一直在努力寻找解决方案，但没有运气..

我发现了一个类似的问题，但这个问题没有真正的答案

参见：[UIView drawRect；类变量超出范围](https://stackoverflow.com/questions/2712502/uiview-drawrect-class-variables-out-of-scope)

我有一种感觉 drawRect 与普通方法不同，并且没有正确获得类的范围，但是我该如何解决呢？

干杯达米安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:31:16.460

> 我有一种感觉 drawRect 与普通方法不同，并且没有正确获得类的范围

不，没有什么特别的`-drawRect:`。

有两种可能：

**1.你的`-init`方法没有被调用。**

你没有说这个视图是如何创建的——如果你是手动调用`[[DartBoard alloc] init]`的，或者它是从一个 nib 文件中取消归档的。

如果它来自笔尖，`UIView`则取消归档不知道`init`应该调用您的方法。它将改为调用[指定的初始化程序](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Initialization.html)，即`-initWithFrame:`.

因此，您应该改为实现该方法，并确保调用 super!

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        self.selectedIndex = [NSNumber numberWithInt:5];
        index = 123;
    }
    return self;
} 
```

**2\. 您的视图可能有*两个*实例：**一个是您手动`init`创建的，另一个来自其他地方，可能是一个笔尖。第二个实例是正在绘制的实例。由于它的变量和属性从未设置，因此它们显示为零（默认值）。

您可以将此行添加到您的`-init`和`-drawRect:`方法中，以查看的值`self`是什么。（或者，使用调试器检查它。）

```
NSLog(@"self is %p", self); 
```

# java - jFileChooser 作为表格中的单元格编辑器

> ID：11002953
> 
> 赞同：1
> 
> 时间：2012-06-12T18:53:05.613
> 
> 标签：java, swing, jtable, jfilechooser

我想将 jFileChooser 设置为表格单个单元格的编辑器（不是该表格的整个列，因为将使用各种其他编辑器，例如组合框等）。请问有什么建议或示例代码吗？（我已经在这里查看了这些示例[How to use tables by Oracle](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:12:08.793

[教程方法](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)是正确的。请参阅这个使用未装饰来唤起实际编辑器的[示例。](https://stackoverflow.com/a/3591230/230513)`JButton`而不是`PopupDialog`，您将使用`JFileChooser`.

附录：要将编辑器单独应用于任何单元格，请覆盖`prepareEditor()`所需的行和列，如此[处](https://stackoverflow.com/q/7045851/230513)所述。

# javascript - 使用 JQuery 的竞争条件

> ID：11002954
> 
> 赞同：0
> 
> 时间：2012-06-12T18:53:08.957
> 
> 标签：javascript, jquery, html, css, race-condition

我正在尝试编写一些代码，将 HTML`select`框中的每个项目都加粗，然后将播放器的名称加粗。仅当我在行之间有一个警告框时才有效，如下所示：

```
$("#users > option").css("font-weight", "normal");
alert('AHAHSDYHSAUDHSAUDHSAUDH');           
$('#users option[value="' + strPlayer + '"]').css("font-weight", "bold"); 
```

如果我删除警报框，播放器项目不会变为粗体。我唯一的猜测是 JQuery 操作是异步的。不知道如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:00:26.500

为什么不将 CSS 用于第一部分（将所有设置为非粗体），将 jQuery 用于最后部分（将用户名设置为粗体）。最好使用 CSS 规则应用默认的、可预测的样式，然后使用 jQuery 进行自定义：

```
<style type="text/css">
#users > option {font-weight:normal;}
</style>
<script type="text/javascript">
$('#users option[value="' + strPlayer + '"]').css("font-weight", "bold");
</script> 
```

* * *

**编辑：**

如果两个语句的重叠存在冲突，请尝试删除重叠：

```
$('#users option:not([value="' + strPlayer + '"])').css("font-weight", "normal");
$('#users option[value="' + strPlayer + '"]').css("font-weight", "bold"); 
```

# android - Android默认浏览器不滚动网页

> ID：11002956
> 
> 赞同：9
> 
> 时间：2012-06-12T18:53:18.297
> 
> 标签：android, mobile, browser, scroll, responsive-design

我正在构建的页面上的库存 Android 浏览器存在问题。简单地说，页面不会在不先放大的情况下垂直滚动。当我发现标签报告的高度小于浏览器窗口的高度时，我以为我已经弄清楚了，但是修复该问题并不能解决滚动问题。（索引页面上的黑框报告元素的计算高度。）

我的测试设备是运行 Android 2.3 的 Droid Incredible。滚动功能适用于 Android 版 Firefox，以及我的 Android 4.0 平板电脑和所有 iOS 设备。

我的网站开发版本在这里：[www.adamjdesigns.info/csu/engage](http://www.adamjdesigns.info/csu/engage)

编辑 - 我尝试过的其他代码：

1.  `<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">`
2.  `if(navigator.userAgent.match(/Android 2/) && $(window).height() < 600) { $('html').css({'height':$(window).height(),'overflow':'auto'}); }`

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T23:15:52.757

虽然这是一个 hack，但我还有另一个可能对开发人员有所帮助的修复程序。我发现使用现有的 Android 2.3.4 浏览器，如果将初始页面加载大小从“1”增加到稍微增加的大小，则垂直滚动可以正常工作，而无需先捏缩放。例如：

```
<meta name="viewport" content="width=device-width, initial-scale=1.02" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T21:47:14.577

我想到了！页面中有`iframe`一个 YouTube 视频，我不确定是它`iframe`本身还是在其中播放视频的相关脚本，但是从 DOM 中删除它解决了这个问题。（无论如何，我都将它设置为隐藏在移动屏幕上。）

谢谢大家的帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-25T12:53:49.323

FWIW，我的网页在 Android 2.3 中没有滚动时遇到了类似的问题。我使用了 Gatsby 的回答和一些有条件的 Javascript 来解决这个问题。这是我的最终代码：

```
<meta name="viewport" content="width=device-width, initial-scale=1.00"/>
<script type="text/javascript">
    window.onload=function(){
        var ua = navigator.userAgent;
        if(ua.indexOf("Android")>=0){
            var androidversion=parseFloat(ua.slice(ua.indexOf("Android")+8)); 
            if(androidversion<=2.3){
                document.getElementsByName("viewport")[0].setAttribute("content","width=device-width, initial-scale=1.02");
            }
        }
    };
</script> 
```

此解决方案首先设置适用于大多数设备的正常元视口标签，然后使用条件 javascript 检测 android 版本并将元标签内容更改为允许在 Android <= 上滚动的“hacked”值（由 Gatsby 提供） 2.3\. 这可以防止不需要 hack 的设备进行不必要的水平滚动。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-11T03:02:56.523

我发现问题是我添加了溢出-x：隐藏；到我的身体标签。这应该关闭水平滚动条，但在 Android 中它会关闭垂直滚动条。在 Android 中，我只能水平滚动。可能是Android浏览器中的一个错误。我正在使用旧的安卓手机（HTC Thunderbolt）。我浏览了我的 css 文件并删除了所有 overflow-x:hidden ，现在我可以再次垂直滚动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T19:01:49.407

试试这个为你的视口：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# jquery - 许多按钮，jquery

> ID：11002967
> 
> 赞同：0
> 
> 时间：2012-06-12T18:54:03.140
> 
> 标签：jquery

**jQuery** :

```
$("#direction").click(function() {
    var direction = $(this).text();
    alert(direction);
} 
```

**HTML**

```
<button id="direction">South</button>
<button id="direction">North</button> 
```

只有第一个按钮会提醒文本。我不明白为什么。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T18:55:38.080

您不能有两个具有相同 id 的元素，您可以做的是给它们相同的类，然后在其上添加事件处理程序。

例子：

```
<button class="directionBtn">South</button>
<button class="directionBtn">North</button>

$(".directionBtn").click(function() {
                var direction = $(this).text();
                alert(direction);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:56:48.977

多个元素相同是无效的`id`（在文档中`id` ***必须***是唯一的）；由于 jQuery 可能在`document.getElementById()`内部实现，这只会（正确地）返回它遇到的第一个元素 that `id`。

在您的情况下，您应该使用 a `class`of 方向，并根据该方向进行选择：

```
$('.direction').click(
    function(){/*...*/}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:58:00.487

您不能有两个具有相同 id 的元素，如果您想一次引用多个元素，请使用类，例如：

```
<button class="direction">South</button>
<button class="direction">North</button> 
```

然后在你的脚本中：

```
 $(".direction").click(function() {
    var direction = $(this).text();
    alert(direction);
}); 
```

# git - git归档快速解压

> ID：11002970
> 
> 赞同：0
> 
> 时间：2012-06-12T18:54:11.883
> 
> 标签：git, archive, unzip

有没有办法使用 git archive 命令而不将所有文件发送到 .zip？我需要解压缩它，但如果我只运行该命令需要一段时间。想法？

# c++ - 如何组织正确的并行程序输出？

> ID：11002971
> 
> 赞同：0
> 
> 时间：2012-06-12T18:54:12.897
> 
> 标签：c++, parallel-processing, openmp, cout

我有类似的 C++ 程序和 openMP 用法

```
#pragma omp parallel for private(i)
for (j=0;j<NUM_STEPS_J) {

    for (i=0;i<NUM_STEPS_I;i++) {

        std::cout << "Print some information about step i" << std::endl;

    }

    std::cout << "Check of item " << j << " finished" << std::endl;
} 
```

在我的情况下，提供正确输出的最佳方法是什么？

我知道，使用“printf”代替“cout”可以解决这个问题。

但是当我将“cout”更改为“printf”时，我的程序执行时间从大约 80 秒增加到大约 120 秒。我认为，它对程序的生产力有足够的影响。

没有“printf”解决这个问题的最佳方法是什么？

是否可以在输出期间以某种方式锁定“cout”功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:02:26.820

我会惊讶地看到`printf`它比 iostreams 慢...（考虑到您正在使用`std::endl`它强制刷新缓冲区，更是如此）但无论如何，您可以使用 a`stringstream`一次构造输出，然后调用其中一个`printf`或`std::cout <<`一次与已经建成的生产线。

# sql - 从多列过滤空值

> ID：11002972
> 
> 赞同：1
> 
> 时间：2012-06-12T18:54:15.487
> 
> 标签：sql, sql-server, sql-server-2005

使用 SQL Server 2005。

数据位于 2 个单独的表中，我只获得了写权限。

数据如下：

```
DateTime1  |  DateTime2
-----------------------
2012-06-01 | 2012-06-01
2012-06-02 | 2012-06-02
2012-06-04 | 2012-06-05
2012-06-02 | NULL
NULL       | 2012-06-05
2012-06-04 | 2012-06-05
NULL       | NULL 
```

我想要做的是能够计算 DateTime1 和 DateTime2 包含值，DateTime1 包含日期并且 DateTime2 为 NULL，DateTime1 为 NULL 并且 DateTime2 包含值的值。

总体而言，我试图避免 DateTime1 为 Null 并且 DateTime2 为空。

我的***where***语句如下所示：

```
Where (DateTime1 is not null or DateTime2 is not null) 
```

唯一的问题是它仍然显示两者都是空值。任何人都知道为什么会发生这种情况或如何解决它？

谢谢

**根据@Lamak 的要求**编辑完整查询****

 **```
;With [CTE] As (
Select
    TH.ID
    ,AMT
    ,Reason
    ,EffDate
    ,DateReq
    ,CS_ID
    ,ROW_NUMBER()
        Over (Partition By ID Order By [pthPrimeKey] Desc) as [RN]
From
    DateTime1Table as [MC] (nolock)
    Left Join History as [TH] (nolock) on [TH].[ID] = [MC].[ID]
    Left Join Trans as [SUB] (nolock) on [SUB].TransactionReasonCode = [TH].Reason
    Left Join Renew as [RM] (nolock) on [MC].ID = [RM].ID
Where 
    ([MC].[DateTime1] is not null or [RM].[DateTime2] is not null)
    And [PostingDate] = DATEADD(dd, datediff(dd, 1, GetDate()),0)
)
SELECT 
[ID]
,[AMT] as [Earned]
,[Reason] as [Reason]
,[EffDate] as [Eff]
,[DateReq] as [Date_Cancel_Req]
,[pthUserId_Number] as [CSR]
FROM [CTE]
Where RN <= 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T22:43:20.580

以下将允许包含行，如果

*   只有 DateTime1 有值
*   只有 DateTime2 有值
*   两者都有价值

它将排除两个值都为 NULL 的行。这就是你所追求的吗？（我试图跟踪对话，但迷路了，希望您对示例数据有一个更简单的复制 - 我认为 CTE 和所有其他联接和逻辑确实消除了您遇到的实际问题。）

```
WHERE COALESCE([MC].[DateTime1], [RM].[DateTime2]) IS NOT NULL 
```

但是，由于您正在执行 a `LEFT OUTER JOIN`，因此 this 可能属于`ON`for`[RM]`而不是`WHERE`. 否则，您将不知道是否因为匹配行中的值为 NULL 或没有匹配行而排除了某行。也许没关系，只是想我会提到它。

**编辑**

当然，该子句提供与...完全相同的结果

```
WHERE ([MC].[DateTime1] is not null or [RM].[DateTime2] is not null) 
```

想要证据？

```
DECLARE @a TABLE(id INT, DateTime1 DATETIME);
DECLARE @b TABLE(id INT, DateTime2 DATETIME);

INSERT @a SELECT 1, '20120602' ; INSERT @b SELECT 1, NULL;
INSERT @a SELECT 2, NULL       ; INSERT @b SELECT 2, '20120605';
INSERT @a SELECT 3, '20120604' ; INSERT @b SELECT 3, '20120605';
INSERT @a SELECT 4, NULL       ; INSERT @b SELECT 4, NULL;
INSERT @a SELECT 5, '20120602' ; INSERT @b SELECT 9, NULL;
INSERT @a SELECT 6, NULL       ; INSERT @b SELECT 10, '20120605';
INSERT @a SELECT 7, '20120604' ; INSERT @b SELECT 11, '20120605';
INSERT @a SELECT 8, NULL       ; INSERT @b SELECT 12, NULL;

SELECT * FROM @a AS a LEFT OUTER JOIN @b AS b
ON a.id = b.id
WHERE COALESCE(a.DateTime1, b.DateTime2) IS NOT NULL;

SELECT * FROM @a AS a LEFT OUTER JOIN @b AS b
ON a.id = b.id
WHERE a.DateTime1 IS NOT NULL OR b.DateTime2 IS NOT NULL; 
```

两个查询都产生：

```
id DateTime1  id   DateTime2
-- ---------- ---- ----------
1  2012-06-02 1    NULL       -- because left is not null
2  NULL       2    2012-06-05 -- because right is not null
3  2012-06-04 3    2012-06-05 -- because neither is null
5  2012-06-02 NULL NULL       -- because of no match
7  2012-06-04 NULL NULL       -- because of no match 
```

因此，正如我在评论中建议的那样，如果您没有看到您期望的行，您需要查看查询的其他部分。如果您提供样本数据和所需结果，我们可以尝试帮助您缩小范围。事实上，我认为我们对您的架构和数据了解得不够多，无法确定问题出在哪里。**

# javascript - Javascript：在机器和本地服务器上运行时的不同行为

> ID：11002976
> 
> 赞同：0
> 
> 时间：2012-06-12T18:54:27.647
> 
> 标签：javascript

因为我的标题太短，我会解释的更清楚。我在 JavaScript 中创建了一个代码。我有两个选项可以运行：

1）在机器上运行：简单点击进入html文件。

2) 在本地服务器上运行：意味着我启动 Apache，并在 localhost 中启动这个 html 文件。

（`http://localhost:85/Javascript/index.html`例如）

当我选择解决方案 1 时，什么都没有发生。当我选择解决方案 2 时，如我所愿。但我不知道为什么。

这是我的代码。目的：获取一个 json 文件并对其进行处理。

```
<script>
        window.onload = function(){
            var url = "http://localhost:85/javascript/json1.json";  // problem here
            var request = new XMLHttpRequest();
            request.open("GET", url);
            request.onload = function(){
                if (request.status == 200){
                    update(request.responseText);
                }
            }
            request.send(null);
        };
function update(responseText){ // some code here }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:56:21.503

您不能使用 AJAX 来读取来自不同域的内容。

运行的 Javascript`file://whatever`无法读取`localhost:85`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:56:24.723

您是否将此行替换为服务器的原始路径？

```
var url = "http://localhost:85/javascript/json1.json"; 
```

和

```
var url = "http://10.0.0.X:85/javascript/json1.json"; // Did you change the right path? 
```

并确保该页面没有被`file://`协议调用！

# iphone - 通用应用程序工作流程

> ID：11002980
> 
> 赞同：0
> 
> 时间：2012-06-12T18:54:53.467
> 
> 标签：iphone, ios, xcode, ipad, ios-universal-app

到目前为止，我只处理了 iPhone 应用程序，现在是让它们通用的时候了。我正在 iTunesU 上观看 Paul Hegarty 关于通用应用程序的讲座，一些问题突然出现在我的脑海中。

如果我理解了这个概念，那么 iPad 和 iPhone 之间的主要区别（编码时）是 iPad 允许拆分视图控制器，并且应该利用它，对吗？

Hegarty 先生所做的是调整一个 App 上的代码，并添加条件以在 App 在 iPad 或 iPhone 上运行时有所不同。

我的问题是，这是通常的做法吗？我是一个非常有条理的人，我喜欢尽可能有条理的东西。所以我的第一个想法是创建一套完整的视图控制器来管理 iPad 故事板，而不是使用一个视图控制器来填充两种设备的代码。是否也可以这样做？什么被认为是好的做法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:02:17.143

我认为通用应用程序的一个好的做法是尽可能多地重用代码。否则，为什么不创建两个不同的应用程序呢？

除了在 iPad 上我们可以使用 popover 和 split view 之外，iphone 和 ipad 控件之间没有太多区别。所以我会尽可能多地分享视图控制器中的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T15:14:24.420

我刚刚发布了一个用于将 iPhone 应用程序“转换”为通用应用程序的 git。看看 - [https://github.com/BTLibrary/BTSplitViewController](https://github.com/BTLibrary/BTSplitViewController)

# pdf - 使用 ImageMagick 和/或 GhostScript 将多页 PDF 转换为多个 JPG

> ID：11002982
> 
> 赞同：3
> 
> 时间：2012-06-12T18:55:06.490
> 
> 标签：pdf, imagemagick, jpeg, ghostscript

我正在尝试将多页 PDF 文件转换为一堆 JPEG，PDF 中的每一页都有一个。我花了好几个小时寻找如何做到这一点，最终我发现我需要安装 Ghostscript。所以我这样做了（来自这个网站： http: [//downloads.ghostscript.com/public/](http://downloads.ghostscript.com/public/)我使用了 2012 年 2 月 8 日的最新链接“ghostscript-9.05.tar.gz”）。

但是，即使安装/下载了这个，我仍然无法做我想做的事。我应该把它保存在某个特殊的地方，比如与 ImageMagick 相同的文件夹中吗？

到目前为止，我发现的是：

*   在命令提示符中，我将工作目录更改为保存该文件夹的 ImageMagick 文件夹。

*   然后我输入

    ```
    convert "<full file path to pdf>" "<full file path to jpg>" 
    ```

紧随其后的是一个巨大的错误。它开始于：

```
 Unrecoverable error: rangecheck in.setuserparams
    Operand stack: 
```

紧随其后的是一堆不可读的数字和大写字母。它以：

```
 While reading gs_lev2.ps:
    %%[ Error: invalidaccess; OffendingCommand: put ]%% 
```

不用说，经过数小时的审议，我认为我离完成将这个 PDF 转换为 JPG 的看似简单的任务还差得远。

我想要的是一些关于如何完成这项工作的分步说明。不要遗漏任何东西，无论它看起来多么“明显”（尤其是任何涉及ghostscript的东西）。这几个月来一直困扰着我和我的主管。

为了进一步说明，我们使用的是 Windows XP 操作系统。最终目的是在统计语言 R 中调用这些命令行，并在脚本中运行它。此外，我已经能够成功地将 JPG 转换为 PNG 格式，反之亦然，但 PDF 无法正常工作。

帮助！！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T20:23:13.813

您不需要 ImageMagick，Ghostscript 可以单独完成。（如果您使用 ImageMagick，它本身无法进行转换，它必须使用 Ghostscript 作为其**“***代表”*。）

试试这个直接使用 Ghostscript：

```
 c:\path\to\gswin32c.exe ^
   -o page_%03d.jpg ^
   -sDEVICE=jpeg ^
    d:/path/to/input.pdf 
```

这将为每个页面创建一个新的 JPEG，并且文件名将递增为*page_001.jpg*、*page_002.jpg*、...

请注意，这还将创建使用`jpeg`设备所有默认设置的 JPEG（最重要的设置之一是分辨率为 72dpi）。

如果您需要更高（或更低）的图像分辨率，您可以添加其他选项：

```
 gswin32c.exe ^
   -o page_%03d.jpg ^
   -sDEVICE=jpeg ^
   -r300 ^
   -dJPEGQ=100 ^
    d:/path/to/input.pdf 
```

`-r300`将分辨率设置为 300dpi 并`-dJPEGQ=100`设置最高 JPEG 质量级别（Ghostscript 的默认值为 75）。

**另请注意：** ***JPEG 不太适合表示具有锐利边缘和高对比度的高质量形状（例如您通常在带有小字符的黑白文本页面中看到的）。***

（有损）JPEG 压缩方法***针对连续色调***图片 + 照片进行了优化，而不是针对线条图形。因此，对于此类主要包含文本的 PostScript 或 PDF 输入页面来说，它是次优的。在这里，即使输入非常好，JPEG格式的有损压缩也会导致输出质量较差。有关此主题的更多详细信息，另请参阅[**JPEG 常见问题解答。**](http://www.faqs.org/faqs/jpeg-faq/)

通过选择 PNG 作为输出格式，您可以获得更好的图像输出（PNG 使用无损压缩）：

```
 gswin32c.exe ^
   -o page_%03d.png ^
   -sDEVICE=png16m ^
   -r150 ^
    d:/path/to/input.pdf 
```

该`png16m`设备产生 24 位 RGB 颜色。您可以将其替换为`pnggray`（纯灰度输出）、`png256`（8 位颜色）、`png16`（4 位颜色）、`pngmono`（仅黑白）或`pngmonod`（替代黑白模块）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-09-26T22:19:39.333

有许多 SaaS 服务也可以为您做到这一点。想到 HyPDF 和 Blitline。

# php - 如何在表单发布失败后使用用户给出的值初始化表单？

> ID：11002987
> 
> 赞同：1
> 
> 时间：2012-06-12T18:55:23.950
> 
> 标签：php, forms

我有一个表单，如果它无法发布到服务器，我希望用户回到表单，数据仍然存在。现在我已经设置好从表单到 php 文件的位置，该文​​件负责将内容提交到数据库，并在几秒钟后重定向回表单。但如果出现故障，我想确保最终用户不必重新输入所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:02:47.453

如果表单数据无法发布，您最好的选择是首先将其写入会话变量。逻辑如下：

1.  输入表单数据
2.  使用表单值设置会话变量
3.  将数据发布到数据库，如果成功则清除会话变量
4.  如果发布失败，则重定向回表单，使用会话变量数据填充字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:00:33.743

当用户提交验证失败的表单时，只需使用您在 POST 或 GET 中获得的值重建表单的 HTML 并将其发送回用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:05:19.527

一个简单的方法是让表单自己发布并执行您需要做的任何错误检查。如果它通过验证，那么您可以做任何其他需要做的事情（将其插入数据库、发送电子邮件、转发到感谢页面等）但是如果失败，它将再次生成表单并填充字段，您可以使用 $_POST、$_GET 或 $_REQUEST 变量（取决于表单的方法）重新填充字段。

例如，如果您有一个 name 字段，`<input type="text" name="fname" id="fname" />`您可以将其修改为：

```
<input type="text" name="fname" id="fname" value="<?php echo $_POST['fname']?>" /> 
```

这将使用用户输入的任何数据填充该字段。选择菜单、复选框和单选按钮也可以使用之前输入的表单数据重新填充，并且代码稍微复杂一些。

# javascript - jQuery each() 在 IE 7 中不起作用

> ID：11002994
> 
> 赞同：0
> 
> 时间：2012-06-12T18:55:57.940
> 
> 标签：javascript, jquery, html, internet-explorer-7, each

我有以下功能在 Chrome 和 Firefox 中可以正常工作，但在 IE7 中不能。该函数应该在所选表中行的每个实例上运行。在 IE 7 中它只运行一次。

```
function rowTotalit(targee) {
    var sum = 0;
    var thisRow = targee.closest('tr');
    thisRow.find('td.tmipt input').each(function() {
        var numChk = $(this).val();
        sum = sum + Number(numChk);
        thisRow.find('.total').fadeOut(200, function() {
            $(this).html(sum);
            $(this).fadeIn(500);
            $(this).val(sum);
        });
        thisRow.find('.total').next().val(sum);
    });
}​ 
```

这是另一个函数中的触发器：

```
for (trs = 1; trs <= tblerows; trs++) {
    $("#testingmsg").append("ARGH!!" + trs);
    rowTotalit($("#timeChart tr:nth-child(" + trs + ")"));
}​ 
```

在 Chrome 和 Firefox 中**testingmsg** div 的输出是：

> 啊！！1啊！！2啊！！3啊！！4啊！！5啊！！6啊！！7

在 IE7 中是：

> 啊！！1啊！！2

所以输出告诉我函数到达函数中的每个语句并在 IE 中死掉。有人有想法么？

**更新：** 保存 for 循环的函数由按钮上的单击事件触发：

```
function addEmAllUp(){
    var tblerows = ($('#timeChart tr').length - 2);
    alert(tblerows);
    for (trs = 1; trs <=tblerows; trs++){
        $("#testingmsg").append("ARGH!!" + trs);
        rowTotalit($("#timeChart tr:nth-child(" + trs +")"));
    }
} 
```

当我多次单击该按钮时，函数递增 1。所以我按了两次，它转到第二行，第三次让我进入第三行，依此类推。

**这是表格行 HTML 的示例：**

```
 <tr class="timerow">
    <td class='projName' >Holiday<br /><span class='small'>999906</span></td>
<td class="tmipt" align="center"><input type="text" class="numbersOnly  alertME"  name="999906[]" value="0.00" /></td>
    <td class="tmipt" align="center"><input type="text" class="numbersOnly  alertME"  name="999906[]" value="0.00" /></td>
    <td class="tmipt" align="center"><input type="text" class="numbersOnly "  name="999906[]" value="0.00" /></td>
    <td class="tmipt" align="center"><input type="text" class="numbersOnly "  name="999906[]" value="0.00" /></td>
    <td class="tmipt" align="center"><input type="text" class="numbersOnly "  name="999906[]" value="0.00" /></td>
    <td class="tmipt" align="center"><input type="text" class="numbersOnly "  name="999906[]" value="0.00" /></td>
    <td class="tmipt" align="center"><input type="text" class="numbersOnly "  name="999906[]" value="0.00" /></td>
    <td align="center"><div id="total_1" class="total">0.00</div><input type="hidden" name="total_999906" class="total" value="0.00" /></td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:06:57.657

您的表格行是否`<tr>`被切换（显示/隐藏）？

IE 处理此问题的方式与其他浏览器不同，您可能需要使用 Chrome (F12) 中的 DOM 检查器来调查这是否是您的问题。

[这是一篇](http://jszen.blogspot.ca/2004/07/table-rowsrevealed.html)讨论该 IE 错误的文章，尽管有很多可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:59:06.163

**知道了！！**

在 each() 中还有另一个 find() 语句过早地杀死了 each。

```
thisRow.find('.total').fadeOut(200, function() {
            $(this).html(sum);
            $(this).fadeIn(500);
            $(this).val(sum);
        });
        thisRow.find('.total').next().val(sum); 
```

我只是将上面的代码从每个语句中移出，它可以正常工作。

对于任何可能遇到相同问题的 IE 无法正确运行 .each() 的人，这是我调试问题的方法。

```
if($.browser.msie){
alert(someTestValue);
} 
```

我使用上述条件仅针对 IE 测试了我的代码的不同部分，这不仅有助于缩小错误的范围，而且我能够保持我的工作代码在 FF 和 Chrome 上的完整。

我的最终解决方案是准确地使用浏览器 if 语句为 IE 运行不同的功能，为 FF 和 Chrome 运行另一个功能。

感谢那些提供帮助的人。希望这对其他人有帮助。

# android - 适用于 Android 的带有远程 json 的图片库

> ID：11002995
> 
> 赞同：0
> 
> 时间：2012-06-12T18:56:01.000
> 
> 标签：android, json, android-gallery, appcelerator-mobile

我想知道是否有任何关于如何使用 appcelerator 为 Android 构建图像库的教程、示例等？

我想从我的 FB 页面显示我的照片。我有 json 并已准备好身份验证令牌登录。

任何想法或链接都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:06:00.997

从源代码的 android 教程开始：http: [//developer.android.com/resources/tutorials/views/hello-gallery.html](http://developer.android.com/resources/tutorials/views/hello-gallery.html)

[这是来自 appcelerator 开发论坛https://gist.github.com/1163654](https://gist.github.com/1163654)的示例要点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:59:26.720

打开日志并检查日志以确保您真正连接到 facebook 并且您正在查看公开或可访问的照片。您可以使用 facebook api explorer 来确保您的图形调用是正确的。您还必须确保设置您的 facebook 应用程序以获得 facebook 所需的所有权限。以及您对 android 应用程序的互联网权限。如果你没有做过 Android 或 Java，这有点复杂。 [关联](http://developers.facebook.com/tools/explorer)