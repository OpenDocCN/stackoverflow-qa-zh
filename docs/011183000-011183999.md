# StackOverflow 问答 11183000-11183999

# regex - 通过正则表达式查找以任意数字结尾的字符串

> ID：11183000
> 
> 赞同：0
> 
> 时间：2012-06-25T02:56:08.517
> 
> 标签：regex

我想识别两种字符串：一种通过正则表达式以数字结尾（或不以数字结尾）。

但我不能用`\d+$`or`^\D*\d*$`或 or对它们进行分类`^[a-zA-Z]*[0-9]*$`

谁能告诉我为什么？以及如何解决这个问题..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:13:25.933

`\d+$``\d$`如果您使用正则表达式引擎的`search`方法（而不是`match`在某些情况下需要整个字符串匹配的方法），它确实应该有效（正如 minopret 在他的评论中指出的那样）。

但是，两者`^\D*\d*$`和`^[a-zA-Z]*[0-9]*$`都不适合此任务，因为在这两者中，尾随数字是可选的（`*`允许零重复， `+`至少需要一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T06:14:24.637

首先，您的答案很不完整，因此很难回答。您的评论也没有澄清任何事情。

**我猜：**

使用您的两个表达式`^\D*\d*$`and `^[a-zA-Z]*[0-9]*$`，您无法验证您要查找的内容，因为量词`*`也匹配 0 次出现 ==> 它匹配空字符串。

因此，`^\D*\d*$`将匹配任何开头有非数字的字符串，或空字符串，后跟数字或空字符串直到结尾。

意思是，这个表达式会匹配。

*   空字符串
*   富吧
*   美食吧 123
*   123

但不是

*   123Fooo

[在 Regexr 上](http://regexr.com?31bjf)查看

# c# - C#返回和显示语法问题

> ID：11183006
> 
> 赞同：0
> 
> 时间：2012-06-25T02:58:53.590
> 
> 标签：c#, loops, methods, for-loop, iteration

如果 if 语句作为 true 传递，我无法将返回值从 TheMethod() 传递给 Main 并显示单词。

我想到了两种方法，但都没有奏效，但我想我错过了 synatx。

1.  使用返回 ?; 非 void 方法，然后显示返回值。
2.  使用 void 方法并实际写出（下面的示例）

所以是的，我是新来的，但是我做了很多次迭代，一切都融合在一起了，我忘记了我尝试过的东西。任何有关语法的帮助都适用于这两种方式中的任何一种。

基本上我需要它来迭代数字

1,2,3,4 并根据当前迭代是否与 if 语句中的表达式匹配，它将显示一个单词。

例子：

```
if (3 = i)
{
   Console.WriteLine("Word");
} 
```

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Proj5
{
class Program
{
    int i = 0;

    static void Main(int i)
    {

        for (i = 0; i < 101; i++)
        {

            Console.WriteLine("test");
        }
    }

    string TheMethod(int i)
    {
        string f = "Word1";
        string b = "Word2";

        if (i == 3)
        {
            return f;
        }

        if (i == 5)
        {
            return b;
        }

        if (0 == (i % 3))
        {
            return f;
        }

        if (0 == i % 5)
        {
            return b;
        }
        else
        {
            return b;
        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:03:31.443

您不能从静态*Main*类中引用非静态变量 (i) 和方法 (TheMethod)。试试这个：

* * *

```
class Program
{
static void Main()
{
    for (int i = 0; i < 101; i++)
    {
        Console.WriteLine(TheMethod(i));
    }
}

static string TheMethod(int i)
{
    string f = "Word1";
    string b = "Word2";

    if (i%3 == 0) return f;
    if (i%5 == 0) return b;
    return b;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:12:53.360

注意：如果 i == 5 和 i % 5 == 0 的单独一个，则不需要。% 是“mod”，表示除法后的余数，所以 5 / 5 = 1，没有余数，所以 5模 5 = 0...

这是您尝试 FizzBu​​zz 的粗略指南/修复：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Proj5
{
class Program
{
    private static void Main()
    {
        for (int i = 0; i < 101; i++)
        {
            Console.WriteLine(TheMethod(i));
        }
    }

    string TheMethod(int i)
    {
        string f = "Fizz";
        string b = "Buzz";

        if ((i % 3 == 0) && (i % 5 == 0))
        {
            return f+b;
        }
        if (i % 3 == 0)
        {
            return f;
        }

        if (i % 5 == 0)
        {
            return b;
        }

        return i.ToString();

    }
}
} 
```

但是有更清洁的解决方案：

```
string result = "";
for (int i = 1; i < = 101; ++i)
{
    if ((i % 3 == 0) && (i % 5 == 0)) result += "FizzBuzz";
    else if (i % 3 == 0) result += "Fizz";
    else if (i % 5 == 0) result += "Buzz";
    else result += i.ToString();
    result += ", ";
} 
```

或者，如果您更喜欢 LINQ-y Lambas：

```
public static void FizzBuzz()
{
    Dictionary<Func<int, bool>, Func<int, string>> rules = new Dictionary<Func<int, bool>, Func<int, string>>();
    rules.Add(x => x % 5 == 0 && x % 3 == 0, x => “fizzbuzz”);
    rules.Add(x => x % 3 == 0, x => "fizz");
    rules.Add(x => x % 5 == 0, x => "buzz");
    rules.Add(x => x % 5 != 0 && x % 3 != 0, x => x.ToString());
    rules.Add(x => true, x => "\n");

    var output = from n in Enumerable.Range(1, 100)
                 from f in rules
                 where f.Key(n)
                 select f.Value(n);

    output.ToList().ForEach(x => Console.Write(x));
} 
```

# iphone - 基本数组比较算法

> ID：11183008
> 
> 赞同：1
> 
> 时间：2012-06-25T02:59:09.210
> 
> 标签：iphone, ios, core-data, collections

我正在尝试按照[此处找到的步骤](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html)比较两个数组，并知道何时创建一个新对象，但我只是不明白它是如何工作的：

> 您最终会得到两个排序的数组——一个包含传递到 fetch 请求中的员工 ID，另一个包含与它们匹配的托管对象。要处理它们，请按照以下步骤遍历排序列表：

```
Get the next ID and Employee. If the ID doesn't match the Employee ID, create a new Employee for that ID.
Get the next Employee: if the IDs match, move to the next ID and Employee. 
```

> 不管你传入多少个 ID，你只执行一次 fetch，其余的只是遍历结果集。

基本上发生的事情是我有一个来自外部源的对象 id 数组，而客户端系统只有这些 id 表示的对象的一个​​子集。我需要弄清楚我已经拥有哪些对象，如果没有，就一个一个地创建它们。

我不明白这是如何工作的。我无法将其转换为代码：

```
for (int i =0;i<ids.count;i++) {
    currentId = [ids objectAtIndex:i];
    currentObject = [objects objectAtIndex:i];

    if(currentObject.id != currentId) {
        //create new object
    }

    //"get the next employee"
    //uh what?
    nextEmployee = [objects objectAtIndex:i+1]; //?
    if(nextEmployee.id == currentId) {
        //"move on to the next id"
        continue;
    }
} 
```

我不明白这将如何工作？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:03:31.497

在查看 Core Data Programming Guide 中的相同示例后，我发现了这个问题。

这是我的解决方案：

关键是你分别走2个数组，一个数组包含Core Data中需要存在的所有employeeId字符串，另一个包含Core Data中已经存在的Employee对象，通过employeeId字符串过滤。两个数组都已排序。

假设我们有一个包含字符串的已排序的employeeIds 数组：

```
@"10",@"11",@"12",@"15",@"20" 
```

我们有一个matchingEmployees 数组，其中包含2 个Employee 对象，其employeeId 为10 和15。

我们需要为员工 ID 为 11,12 和 20 的员工创建新的 Employee 对象，同时可能更新员工 10 和 15 的属性。所以：

```
int i = 0; // employeeIds array index
int j = 0; // matchingEmployees array index

while ((i < [employeeIds count]) && (j <= [matchingEmployees count])){

  NSString *employeeId = [employeeIds objectAtIndex:i];

  Employee *employee = nil;

  if ([matchingEmployees count]!=0)
      employee = [matchingEmployees objectAtIndex:j];

  if (![employeeId isEqualToString:employee.employeeId]){

      employee = //Insert new Employee entity into context
      employee.employeeId = employeeId;

      //Set any attributes for employee that do not change
  }
  else {
      //We matched employeeId to Employee so the next iteration
      //of this loop should check the next Employee object
      j++; 
  }

  //Set any attributes for employee that change with each update

  i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:37:30.843

您需要在对象数组中进行线性搜索以检查是否可以找到它，可能是这样的：

```
for (int i = 0; i < ids.count; i++) {
    bool found = NO;
    currentId = [ids objectAtIndex:i];

    // We need to traverse the whole array to check if we can find the objectID somewhere...
    for(int j = 0; j < objects.count; j++) {
        currentObject = [objects objectAtIndex:j];

        if (currentId == currentObject) {
            found = YES;
            break;
        }
    }

    if (!found)
    {
        // Create the new object
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T03:38:43.653

像这样的东西：

```
NSArray *wholeList = [[NSArray alloc]initWithObjects:@"employee1", @"employee2", @"employee3", @"employee4", @"employee5",@"employee6", nil];
NSArray *partialList = [[NSArray alloc]initWithObjects:@"employee2", @"employee13", @"employee7", nil];

for (id employeeID in partialList)  //get one employee from the partialList
{
    if (![wholeList containsObject:employeeID])  //check to see if it is in the wholeList
    {
        NSLog(@"This employee is not in the wholeList: %@", employeeID);
        // do create new employee object for this employeeID, whatever...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T03:49:57.020

尝试这样的事情：

```
//Employee.h
@property (nonatomic) NSInteger ID;
@property (nonatomic, strong) NSString *name;

//Employee.m
@synthesize ID, name;

//Place where you put algorithm
#import "Employee.h"
------------------------
NSMutableArray *employeeIDs = [NSArray arrayWithObjects:[NSNumber numberWithInt:123], [NSNumber numberWithInt:456], [NSNumber numberWithInt:789], nil];

//Creates employee objects
Employee *employee1 = [[Employee alloc] init];
employee1.ID = 123;
employee1.name = @"John Smith";

Employee *employee2 = [[Employee alloc] init];
employee2.ID = 456;
employee2.name = @"Bob Day";

Employee *employee3 = [[Employee alloc] init];
employee3.ID = 789;
employee3.name = @"Steve Jobs";

NSMutableArray *employeesArray = [NSArray arrayWithObjects:employee1, employee2, employee3, nil];

for (int index = 0; index <= [employeeIDs count]; index++) {

    for(id currentEmployee in employeesArray){

        if(currentEmployee.ID != currentID){

            Employee *newEmployee = [[Employee alloc] init];
            newEmployee.name = [NSString stringWithFormat:@"Employee Name"];
            newEmployee.ID = 384;

            [employeeIDs addObject:[NSNumber numberWithInteger:newEmployee.ID]];
            [employees addObject:newEmployee.name];

        }
    }
} 
```

希望这可以帮助！

# jsf - jsf 2.0 阅读 标记为字符串“ "

> ID：11183009
> 
> 赞同：1
> 
> 时间：2012-06-25T02:59:20.907
> 
> 标签：jsf

在某些情况下，我希望将 ul 标签添加到我的 jsf 中。我的代码如下：

```
<c:if test="${level ne 1}" >&lt;ul&gt;</c:if>
<li>..</li>
<li>..</li>
<li>..</li>
<c:if test="${level ne 1}" >&lt;/ul&gt;</c:if> 
```

当我使用 jsf 1.2 时，它运行良好。但是在我更改为 jsf 2.0 之后，它看起来像

```
 "<ul>"
 <li>..</li>
 <li>..</li>
 <li>..</li>
 "</ul>" 
```

我该如何解决？非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T03:03:20.323

您似乎也用 Facelets 替换了旧版 JSP（干得好！）。此行为特定于 Facelets。它隐式地对所有模板文本进行 HTML 转义，作为内置 XSS 攻击预防的一部分。

改为使用`<h:outputText escape="false">`。

```
<c:if test="${level ne 1}"><h:outputText value="&lt;ul&gt;" escape="false" /></c:if>
<li>..</li>
<li>..</li>
<li>..</li>
<c:if test="${level ne 1}"><h:outputText value="&lt;/ul&gt;" escape="false" /></c:if> 
```

顺便说一句，你最好使用它的`rendered`属性而不是那些丑陋的 JSTL 标签。

```
<h:outputText value="&lt;ul&gt;" escape="false" rendered="#{level ne 1}" />
<li>..</li>
<li>..</li>
<li>..</li>
<h:outputText value="&lt;/ul&gt;" escape="false" rendered="#{level ne 1}" /> 
```

* * *

**与具体问题无关**，对于具体的功能需求，您可能会发现[OmniFaces`<o:tree>`组件](http://showcase.omnifaces.org/components/tree)很有用。

# php - Slug URL 生成函数覆盖Ç

> ID：11183010
> 
> 赞同：0
> 
> 时间：2012-06-25T02:59:24.027
> 
> 标签：php, special-characters, slug

我上面有这个函数来从帖子标题创建 url slugs，问题是`ç`字符没有被转换为`c`. 它实际上被函数覆盖。

示例帖子标题：Coração de Pelúcia

生成的蛞蝓：coraao-de-pelucia

我怎样才能修复这个函数来生成像这样的蛞蝓：coracao-de-pelucia

```
function generate_seo_link($input,$replace = '-',$remove_words = true,$words_array = array())
{
    //make it lowercase, remove punctuation, remove multiple/leading/ending spaces
    $return = trim(ereg_replace(' +',' ',preg_replace('/[^a-zA-Z0-9\s]/','',strtolower($input))));

    //remove words, if not helpful to seo
    //i like my defaults list in remove_words(), so I wont pass that array
    if($remove_words) { $return = remove_words($return,$replace,$words_array); }

    //convert the spaces to whatever the user wants
    //usually a dash or underscore..
    //...then return the value.
    return str_replace(' ',$replace,$return);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T03:43:44.460

您应该使用 iconv 模块和这样的函数来进行转换：

```
function url_safe($string){
    $url = $string;
    setlocale(LC_ALL, 'pt_BR'); // change to the one of your language
    $url = iconv("UTF-8", "ASCII//TRANSLIT", $url);  
    $url = preg_replace('~[^\\pL0-9_]+~u', '-', $url);
    $url = trim($url, "-");
    $url = strtolower($url);
    return $url;
} 
```

# android - JSON 无法读取，可能是键读取失败

> ID：11183012
> 
> 赞同：0
> 
> 时间：2012-06-25T02:59:41.887
> 
> 标签：android, json

我想知道为什么我不能像这样读取 JSON 对象：

```
{
    "1":{"bulan":"Januari","tahun":"2012","tagihan":"205000","status":"Lunas"},
    "2":{"bulan":"Februari","tahun":"2012","tagihan":"180000","status":"Lunas"},
    "3":{"bulan":"Maret","tahun":"2012","tagihan":"120000","status":"Lunas"},
    "4":{"bulan":"April","tahun":"2012","tagihan":"230000","status":"Lunas"},
    "5":{"bulan":"Mei","tahun":"2012","tagihan":"160000","status":"Lunas"},
    "6":{"bulan":"Juni","tahun":"2012","tagihan":"150000","status":"Belum Lunas"},
    "panjang":6
} 
```

用我的android代码是这样的：

```
 try {
        int length = jobj.getInt("panjang");

        for(int n = 0; n < length; n++){

            String m = Integer.toString(n)
            JSONObject row = jobj.getJSONObject(m);

            String bulan = row.getString("bulan");
            String tahun = row.getString("tahun");
            String tagihan = row.getString("tagihan");
            String status = row.getString("status");

            HashMap<String, String> map = new HashMap<String, String>();

            map.put("bulan", bulan);
            map.put("tahun", tahun);
            map.put("tagihan", tagihan);
            map.put("status", status);

            list.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

它总是什么都不返回，但是如果我将键 m 更改为特定键，例如 if

```
String m = "1"; 
```

我不能使用

```
JSONObject row = jobj.getJSONObject(n); 
```

因为 getJSONObject() 只接受字符串，而不是 int。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:13:06.683

您的问题在于初始迭代器值。它无法搜索键“0”，因为您没有“0”。将其更改为：

```
for(int n = 1; n <= length; n++){ 
```

应该解决问题。

# c# - 似乎无法解决 KeyedByTypeCollection？

> ID：11183016
> 
> 赞同：2
> 
> 时间：2012-06-25T03:00:27.683
> 
> 标签：c#, .net, visual-studio-2012, portable-class-library

我正在使用 .NET 便携版来创建一个库，并且在尝试创建 KeyedByTypeCollection 的实例时遇到了一些问题。

我检查了我的参考资料（.NET Portable Subset），System.Collections.Generic 似乎显示了 KeyedByTypeCollection。

[http://msdn.microsoft.com/en-us/library/ms404549.aspx](http://msdn.microsoft.com/en-us/library/ms404549.aspx) - MSDN 似乎表明它也应该被支持。

尽管如此，Visual Studio 和编译器似乎仍然无法解析该类型。

知道我在这里可能缺少什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:38:32.947

文档是错误的。可移植库不支持 KeyedByTypeCollection。你的用途是什么？

# solr - WhitespaceTokenizerFactory 和 StandardTokenizerFactory 的区别

> ID：11183017
> 
> 赞同：11
> 
> 时间：2012-06-25T03:00:28.447
> 
> 标签：solr, tokenize

我是 Solr 的新手。通过阅读 Solr 的 wiki，我不明白 WhitespaceTokenizerFactory 和 StandardTokenizerFactory 之间的区别。他们真正的区别是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-25T03:13:57.513

它们的不同之处在于如何将分析的文本拆分为标记。

**StandardTokenizer**基于以下内容（取自 lucene javadoc）执行此操作：

*   在标点符号处拆分单词，删除标点符号。但是，后面没有空格的点被视为标记的一部分。
*   在连字符处拆分单词，除非标记中有数字，在这种情况下，整个标记被解释为产品编号并且不被分割。
*   将电子邮件地址和 Internet 主机名识别为一个标记。

**WhitespaceTokenizer**基于空白字符执行此操作：

WhitespaceTokenizer 是在空白处划分文本的标记器。相邻的非空白字符序列形成标记。

您应该选择最适合您的应用程序的标记器。在任何情况下，您都必须使用相同的分析器/标记器进行索引和搜索！

# ruby-on-rails - 在 Rails 3 中处理大量报告/财务数据，而不放慢速度？

> ID：11183018
> 
> 赞同：1
> 
> 时间：2012-06-25T03:00:34.850
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我试图弄清楚如何问这个问题 - 所以我会更新这个问题，以便在需要时解决问题。

我有一个虚拟的证券交易所游戏网站，我一直在建立一个好玩的网站。人们进行大量交易，每笔交易在表格中都有自己的记录。

当显示投资组合页面时，我必须在数据表上即时计算所有内容 - 即用户拥有多少股份，总收益，损失等。

当我尝试按公司每天的交易对其进行细分时，事情确实开始放缓。

我真的没有任何代码可以展示这一点 - 但感觉就像我没有正确处理这个问题。

更新：这段代码特别慢

```
 #Returning an array of values for a total portfolio over time
  def portfolio_value_over_time
    portfolio_value_array = []

    days = self.from_the_first_funding_date

    companies = self.list_of_companies

    days.each_with_index do |day, index|

      #Starting value
      days_value = 0

      companies.each do |company|
        holdings = self.holdings_by_day_and_company(day, company)
        price = Company.find_by_id(company).day_price(day)
        days_value = days_value + (holdings * price).to_i
      end

      #Adding all companies together for that day
      portfolio_value_array[index] = days_value 
    end 
```

页面加载时间可能长达 20 多秒 - 完全疯狂。而且我已经在 Memcache 中缓存了很多请求。

我不应该像这样在实时数据上生成报告/图表吗？我应该运行一个 cron 任务并将它们存储在某个地方吗？在 Rails 中处理这么多数据的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T03:22:14.280

### 问题

当然，它很慢。您可能正在从每个表中查找大量数据，并在循环的每次迭代中对多个表执行多次查找。

### 一种解决方案（众多）

您需要标准化您的数据，创建一些新模型来存储昂贵的计算值，并将更多的计算推送到数据库或表中。

您正在对大量数据进行嵌套循环这一事实是一个危险信号。您正在对数据库进行多次调用，而理想情况下，您应该尽可能少地发出顺序请求。

我不知道*您*需要如何规范化数据或优化查询，但您可以从查看[explain](http://weblog.rubyonrails.org/2011/12/6/what-s-new-in-edge-rails-explain/)的输出开始。但是，一般来说，您可能希望消除任何全表扫描并以更大的块返回数据，而不是一次返回一条记录。

这看起来更像是一个建模或查询问题，而不是 Rails 问题。希望这能让你指出正确的方向！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:26:14.030

您应该预先计算所有这些数据并将其存储在另一个表中。示例表可能如下所示：

```
Table: PortfolioValues
Column: user_id
Column: day
Column: company_id
Column: value
Index: user_id 
```

然后，您可以通过单个查询轻松加载所有用户的投资组合数据，例如：

```
current_user.portfolio_values 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T03:42:56.343

由于无论如何您都在使用 memcached，因此请使用它来缓存其中一些查询。例如：

```
Company.find_by_id(company).day_price(day) 
```

# javascript - 构建我的第一个 Javascript 应用程序（jQuery），在一些事情上苦苦挣扎

> ID：11183021
> 
> 赞同：1
> 
> 时间：2012-06-25T03:01:01.600
> 
> 标签：javascript, jquery

我非常感谢有关解决此问题的最有效方法的建议。

我正在构建一个简单的 javascript 应用程序，它显示记录列表并允许用户通过单击记录行中的“编辑”链接来编辑记录。用户还可以单击“添加”链接弹出一个对话框，允许他们添加新记录。

这是一个工作原型：http: [//jsfiddle.net/FfRcG/](http://jsfiddle.net/FfRcG/)

您会注意到，如果您单击“编辑”，则会弹出一个对话框，其中包含一些固定值。而且，如果您单击“添加”，则会弹出一个包含空值的对话框。

我需要有关如何解决两个问题的帮助

1.  我相信我们需要将索引传递给我们的编辑对话框并引用 JSON 中的值，但我不确定当用户单击编辑时如何传递索引。

2.  令我困扰的是 Edit 和 Add div 的内容是如此相似（Edit 只是预先填充了值）。我觉得有一种更有效的方法可以做到这一点，但不知所措。

这是我的代码供参考

```
$(document).ready( function(){

// Our JSON (This would actually be coming from an AJAX database call)
people = {
    "COLUMNS":["DATEMODIFIED", "NAME","AGE"],
    "DATA":[
    ["9/6/2012", "Person 1","32"],
    ["9/5/2012","Person 2","23"]
    ]
} 

// Here we loop over our JSON and build our HTML (Will refactor to use templating eventually)
members = people.DATA;  

var newcontent = '<table width=50%><tr><td>date</td><td>name</td><td>age</td><td></td></tr>';

for(var i=0;i<members.length;i++)
{
    newcontent+= '<tr id="member'+i+'"><td>' + members[i][0] + '</td>';
    newcontent+= '<td>' + members[i][1] + '</td>';
    newcontent+= '<td>' + members[i][2] + '</td>';
    newcontent+= '<td><a href="#" class="edit" id=edit'+i+'>Edit</a></td><td>';
}
newcontent += "</table>";
$("#result").html(newcontent);

// Bind a dialog to the edit link
$(".edit").click( function(){ 

    // Trigger our dialog to open
    $("#edit").dialog("open");

    // Not sure the most efficient way to change our dialog field values
    $("#name").val() // ???

    alert($());
    return false;
});

// Bind a dialog to the add link
$(".edit").click( function(){ 

    // Trigger our dialog to open
    $("#add").dialog("open");

    return false;
});

// Bind a dialog to our edit DIV
$("#edit").dialog();

// Bind a dialog to our add DIV
$("#add").dialog(); 

}); 
```

这是HTML

```
<h1>People</h1>

<a href="#" class="add">Add a new person</a>

<!-- Where results show up -->
<div id="result"></div>

<!-- 
Here's our edit DIV - I am not clear as to the best way to pass the index in our JSON so that we can reference positions in our array to pre populate the input values.
-->
<div id="edit">
<form>
    <p>Name:<br/><input type="text" id="name" value="foo"></p> 
    <p>Age:<br/><input type="text" id="age" value="33"></p>
    <input type="submit" value="Save" id="submitEdit">
</form>
</div>

<!-- 
Here's our add DIV - This layout is so similiar to our edit dialog. What is the
most efficient way to handle a situation like this?
-->
<div id="add">
<form>
    <p>Name:<br/><input type="text" id="name"></p>
    <p>Age:<br/><input type="text" id="age"></p>
    <input type="submit" value="Save" id="submitEdit">
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:13:05.697

1) 索引可以通过隐藏值或通过更改表单 url 来传递。如果您使用表单模板，您可能可以即时填写表单并重新呈现。如果您的网站是 RESTful 的，那么更改 url 可能是更合适的选择。

然后，您可能还需要为 URL 编写一个帮助程序。帮助函数将帮助找出适当的 url，具体取决于它是“新”还是“编辑”。接下来，您可以使用“序列化” [http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)来获取表单中的所有字段，并在需要时将其转换为 $.POST 的键值对。

2) 您有 2 个选择：尝试制作 1 个表格，或使用模板。如果您一开始只有 1 个表单，那么您唯一的选择是使用 .val() 来更改表单的值。

如果您使用模板方法，您可以将模板嵌入到页面中，也可以在服务器上使用 $.GET 提取最终表单。一种不错的方法可能是使用haml 或jade 作为您的模板语言。然后，您可以混合和匹配这些方法。我的意思是你实际上可以在你的页面上创建一个模板标签，并在页面最初呈现时加载模板，并只用表单部分填充它。然后，您可以在其他各种页面上使用该表单，包括不在对话框中的基本编辑页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T04:22:46.187

我对您的演示进行了一些重要的修改，并发表了很多评论。 [http://jsfiddle.net/FfRcG/1/](http://jsfiddle.net/FfRcG/1/)

首先，我将数据从数组数组重新映射到对象数组。`'<td>'+item.name+'</td>'` 当您可以编写像VS 这样的字符串时，通常解析 html 会容易得多`'<td>'+item[5]+'</td>'`。阅读什么是什么和调试更简单。以这种方式从服务器获取数据并不需要在服务器上添加更多代码。

我为原始数据中的每个成员添加了一个 ID，这将有助于与服务器通信和存储数据。这个 id 也作为一个 html `data-`属性添加到编辑按钮中，可以使用 jQuery data() 方法轻松读取（参见小提琴示例）

现在不用担心在本地存储数据可能会更容易，每次进行添加/编辑时只需使用 ajax 调用更新服务器。出于这个原因，我设置了一个行解析器来在单击编辑按钮时更新您的编辑表单。为每一列添加类有助于简化表单更新过程。我对存储本地的想法是现在它只是少了一步，服务器将与页面保持同步。

请记住，元素 ID 在页面中必须是唯一的，因此需要更改表单中的重复项。

至于 2 个表单之间的视觉效果，我在对话框中添加了标题选项，并稍微更改了“保存”按钮文本。如果您想知道对话框的 css 来自哪里，它是在 fiddle 的“管理资源”面板中设置的，来自 Google CDN。

其中一些想法应该会有所帮助。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:20:22.537

我尝试了一些关于输入值的事情。您可以使用 .attr() 更改输入值。在这里工作（仅从 jSON 调用第一人。）复制[http://jsfiddle.net/serkanalgur/zs3tW/](http://jsfiddle.net/serkanalgur/zs3tW/)

我添加了什么；

```
 // Bind a dialog to the edit link
$(".edit").click( function(){ 

    // Trigger our dialog to open
    $("#edit").dialog("open");
    $('input#name').attr('value', people.DATA[0][1]); // for name
    $('input#age').attr('value', people.DATA[0][2]); // for age. but needed dynamic ids
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T03:16:39.677

研究使用[克隆](http://api.jquery.com/clone/)方法，并在用户单击添加/编辑链接时动态创建它（如果您有多个编辑）。然后，您可以通过选择输入并设置它们的`val`属性来动态设置值。

至于传递 id 进行编辑，您可以使用：

```
<input type="hidden" name="index" value="" /> 
```

或者你可以像这样向 div 添加一个属性：

```
<div id="edit" data-index="1"> 
```

然后用

```
$('#edit').click(function() {
    $(this).attr('data-index');
}); 
```

在点击处理程序中获取 id。

# c# - 如何使用 C# 获取上次关机时间

> ID：11183024
> 
> 赞同：2
> 
> 时间：2012-06-25T03:01:14.407
> 
> 标签：c#

我有一个应用程序，需要获取最后一次关机时间。我使用 EventLog 类来获取关机时间。我有单独的类文件，旨在读/写事件日志。ReadPowerOffEvent 函数旨在获取电源关闭事件。

```
public void ReadPowerOffEvent()
    {
        EventLog eventLog = new EventLog();
        eventLog.Log = logName;
        eventLog.MachineName = machineName;

        if (eventLog.Entries.Count > 0)
        {
            for (int i = eventLog.Entries.Count - 1; i >= 0; i--)
            {
                EventLogEntry currentEntry = eventLog.Entries[i];

                if (currentEntry.InstanceId == 1074 && currentEntry.Source=="USER32")
                {
                    this.timeGenerated = currentEntry.TimeGenerated;
                    this.message = currentEntry.Message;
                }
            }
        }
    } 
```

但是每当它试图获取事件条目计数时，它就会抛出一个 IOException 说“找不到网络路径”。我试图解决，但我失败了。请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-26T08:34:23.053

我认为您发送了错误的日志名称，这对我有用

```
EventLog myLog = new EventLog();
myLog.Log = "System";
myLog.Source = "User32";

var lastEntry = myLog;
EventLogEntry sw;
for (var i = myLog.Entries.Count -1 ; i >=0; i--)
{
    if (lastEntry.Entries[i].InstanceId == 1074)
        sw = lastEntry.Entries[i];
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:45:49.790

您必须在您的机器（或您要运行此应用程序的机器）上运行“远程注册表”服务。我怀疑此服务设置为在您的机器上手动启动。您可能必须将此服务的设置更改为自动。

如果此应用程序要在其他机器上运行，您可能需要在应用程序中添加一些逻辑来检查以确保该服务首先运行。如果不是，那么您将需要通过您的应用程序启动它。

笔记：

> “远程注册表”服务使远程用户能够修改您计算机上的注册表设置。默认情况下，“远程注册表”服务的“启动类型”设置可能设置为“自动”或“手动”，这对单个用户（或）笔记本电脑用户来说是一个安全风险。因此，为了确保只有您计算机上的用户可以修改系统注册表，请禁用此“远程注册表”服务。

# c# - 如何编写 PostSharp Invoke 方面以简化跨线程控制更新

> ID：11183026
> 
> 赞同：3
> 
> 时间：2012-06-25T03:01:36.427
> 
> 标签：c#, winforms, postsharp, multithreading

当我想跨线程更新控件时，我通常会这样做：

```
this.Invoke((MethodInvoker)delegate { SomeProcedure(); }); 
```

建议的方法实际上是为您要更新的特定控件调用调用程序，但 99% 的时间表单（即我的示例中的“this”）和控件将在同一个上创建线程所以为了简单起见，我真的很喜欢这样做。

我在想，如果我只是有一个 PostSharp 方面放在 SomeProcedure 之上，它将把它包装在对我来说是一团糟的声明中，那会很好。

然后去...（哦，是的，第一个可用答案加分 100 分 :)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T03:37:02.900

我以前没有在 WinForms 上编写过线程访问，但我已经用 PostSharp + Silverlight 完成了。因此，通过一些谷歌搜索，我会试一试。但不能保证它有效！

```
[Serializable]
public class OnGuiThreadAttribute : MethodInterceptionAspect
{
    private static Control MainControl;

    //or internal visibility if you prefer
    public static void RegisterMainControl(Control mainControl) 
    {
        MainControl = mainControl;
    }

    public override void OnInvoke(MethodInterceptionArgs eventArgs)
    {
        if (MainControl.InvokeRequired)
            MainControl.BeginInvoke(eventArgs.Proceed);
        else
            eventArgs.Proceed();
    }
} 
```

这个想法是在您的应用程序开始时，使用属性注册您的主/根控件。然后你想确保在主线程上运行的任何方法，只需用`[OnGuiThread]`. 如果它已经在主线程上，它只是运行该方法。如果不是，它会将方法调用作为委托异步提升到主线程。

编辑：我刚刚发现（为时已晚）您要求对正在使用的目标控件使用特定的调用方法。假设您在控件的子类上装饰*实例*方法：

```
[Serializable]
public class OnGuiThreadAttribute : MethodInterceptionAspect
{
    public override void OnInvoke(MethodInterceptionArgs eventArgs)
    {
        //you may want to change this line to more gracefully check 
        //if "Instance" is a Control
        Control targetControl = (Control)eventArgs.Instance;

        if (targetControl.InvokeRequired)
            targetControl.BeginInvoke(eventArgs.Proceed);
        else
            eventArgs.Proceed();
    }
} 
```

# opengl - opengl 翻译

> ID：11183028
> 
> 赞同：-1
> 
> 时间：2012-06-25T03:01:44.350
> 
> 标签：opengl

```
#include <iostream>
#include <X11/Xlib.h>
#include <GL/glut.h>
#include <GL/glui.h>

using namespace std;

GLsizei wh = 500;
GLsizei ww = 500;

void MyInit();    
void DisplayLine(void);    
void DisplaySquare(void ); 

void MyInit()
{
    glClearColor( 1, 1, 1, 0 );
    glColor3f( 1, 0, 0 );
    glPointSize( 10 );
    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity(  );
    glOrtho( 0.0, ww, 0.0, wh, -1.0, 1.0 );
}

void DisplayLine()
{
    glClear( GL_COLOR_BUFFER_BIT );

    glBegin( GL_LINES );
        glVertex2i( 100, 100 );
        glVertex2i( 170, 170 );
        glVertex2i( 30, 370 );
        glVertex2i( 160, 50 );
    glEnd(  );

    glFlush(  );
}

void DisplaySquare()
{
    glClear( GL_COLOR_BUFFER_BIT );

    glBegin( GL_LINE_STRIP );
        glBegin( GL_POLYGON );
        glVertex2f( 150, 150 );
        glVertex2f( 350, 150 );
        glVertex2f( 350, 350 );
        glVertex2f( 150, 350 );
        glVertex2f( 150, 150 );
    glEnd(  );

    glFlush(  );
}

void DisplayRSquare()
{
    glClear( GL_COLOR_BUFFER_BIT );

#if 0
    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity(  );
    glBegin( GL_LINE_LOOP );
        glVertex2f( 50, 50 );
        glVertex2f( 250, 250 );
        glVertex2f( 50, 250 );
    glEnd(  );
#endif

    glBegin( GL_LINE_LOOP );
        glVertex2f( 0, 0 );
        glVertex2f( 500, 0 );
        glVertex2f( 500, 500 );
        glVertex2f( 0, 500 );
    glEnd(  );
    glTranslatef( 100, 0, 0 );

#if 0
    glRotatef( 20, 0, 0, 1 );
    glTranslatef( -50, -50, 0 );
    glColor3f( 0, 1, 0 );

    glBegin( GL_LINE_LOOP );
        glVertex2f( 0, 0 );
        glVertex2f( 500, 0 );
        glVertex2f( 500, 500 );
        glVertex2f( 0, 500 );
    glEnd(  );

    glBegin( GL_LINE_LOOP );
        glVertex2f( 50, 50 );
        glVertex2f( 250, 50 );
        glVertex2f( 250, 250 );
        glVertex2f( 50, 250 );
    glEnd(  );

    glRotatef( 12, 0, 0, 1 );
    glBegin( GL_LINE_LOOP );
        glVertex2f( 75, 75 );
        glVertex2f( 75, 550 );
        glVertex2f( 550, 550 );
        glVertex2f( 550, 75 );
    glEnd(  );

    glFlush(  );
    glBegin( GL_LINES );
        glVertex2f( 0, 0 );
        glVertex2f( 150, 150 );
    glEnd()
#endif

    glFlush(  );
}

void DisplayCube()
{
    glClear( GL_COLOR_BUFFER_BIT );
    glBegin( GL_LINE_STRIP );
    glBegin( GL_POLYGON );
    glVertex2i( 150, 150 );
    glVertex2i( 350, 150 );
    glVertex2i( 350, 350 );
    glVertex2i( 150, 350 );
    glVertex2i( 150, 150 );
    glEnd(  );
    glBegin( GL_LINE_STRIP );
    glBegin( GL_POLYGON );
    glVertex2i( 250, 250 );
    glVertex2i( 450, 250 );
    glVertex2i( 450, 450 );
    glVertex2i( 250, 450 );
    glVertex2i( 250, 250 );
    glEnd(  );
    glBegin( GL_LINE_STRIP );
    glBegin( GL_LINES );
    glVertex2i( 150, 150 );
    glVertex2i( 250, 250 );
    glVertex2i( 350, 150 );
    glVertex2i( 450, 250 );
    glVertex2i( 350, 350 );
    glVertex2i( 450, 450 );
    glVertex2i( 150, 350 );
    glVertex2i( 250, 450 );
    glEnd(  );
    glFlush(  );
}

void DisplayRotate()
{
    glClear( GL_COLOR_BUFFER_BIT );
    glColor3f( 0.0, 1.0, 0.0 );
    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity(  );
    for( int angle = 0; angle < 18; angle += 3 ) 
    {
        glRotatef( angle, 1, 0, 0 );
        if( angle > 8 ) 
            {
            glRotatef( angle * 2, 1, 0.0, 0 );
            glColor3f( 1.0, 0.0, 0.0 );
        }
        glBegin( GL_LINE_LOOP );
        glVertex2f( 150, 150 );
        glVertex2f( 350, 150 );
        glVertex2f( 350, 350 );
        glVertex2f( 150, 350 );
        glEnd(  );
    }
    glFlush(  );
}

void pressMouse(int button, int state, int x, int y )
{
    if( state == GLUT_DOWN )
    {
        glBegin( GL_POINTS );
        glPointSize( 50 );
        glVertex2i( x, wh - y );
        glEnd(  );
        glFlush(  );
    }
}

void holdMouse(int x, int y )
{
    glBegin( GL_POINTS );
        glPointSize( 50 );
        glVertex2i( x, wh - y );
    glEnd(  );
    glFlush(  );
}

void mouse(int btn, int state, int x, int y )
{
    if( state == GLUT_DOWN ) 
    {
        mouseState = state;
        mouseButton = btn;
        mouseX = x;
        mouseY = y;
    } 
    else 
    {
        mouseState = 0;
    }
}

void motion(int x,  int y )
{
    if( mouseState == GLUT_DOWN ) 
   {
        if( MouseButton == GLUT_LEFT_BUTTON ) 
            {
            yrotation -= ( mouseX - x );
            xrotation -= ( mouseY - y );
        }
    }
    mouseX = x;
    mouseY = y;
    glutPostRedisplay(  );
}

void DisplayFSquare()
{
    glClear( GL_COLOR_BUFFER_BIT );
    glColor3f( 0, 0, 1 );
    glBegin( GL_LINE_LOOP );
        glVertex2f( ( GLdouble ) 0.25, ( GLdouble ) 0.25 );
        glVertex2f( ( GLdouble ) 0.75, ( GLdouble ) 0.25 );
        glVertex2f( ( GLdouble ) 0.75, ( GLdouble ) .75 );
        glVertex2f( ( GLdouble ) 0.25, ( GLdouble ) 0.75 );
    glEnd(  );
    glFlush(  );
}

int main(int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_SINGLE | GLUT_RGB );
    glutInitWindowSize( ww, wh );
    glutInitWindowPosition( 150, 150 );
    glutCreateWindow( "Line" );
    MyInit(  );
    glutDisplayFunc( DisplayRSquare );
    glutMouseFunc( pressMouse );
    glutMotionFunc( holdMouse );
    glutMainLoop(  );
} 
```

我刚刚创建了几个简单的模型来测试基本转换。我有两个问题：

1.  DisplayRSquare：在这个函数中，我用窗口大小绘制了一个正方形，并希望将其移动到 (100, 0)，但它转换为 (200, 0)。如果我将它移动到 (50, 0)，它将移动到 (100, 0)。

更奇怪的是，该程序有时有效，有时无效。

1.  对于函数`glVertex2f(0.3,0.7)`，我们应该在 0.3*widthofthewindow，0.7*height 的位置找到一个点，对吧？但我找不到它。我必须计算坐标并运行`glVertex2f(0.3*width,0.7*height)`。

我的编译命令是 g++ -o line Line.cpp -lGL -lGLU -lglut -lglui 然后运行 ​​./line(File name is Line.cpp)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:04:25.297

请跟我说话：*“OpenGL 不是场景图！——它不维护场景，它所做的只是执行绘图命令，一次绘制一个点、线和三角形。”*

您的代码缺少某些基本步骤。首先，您需要设置适当的投影和模型视图矩阵。您在程序开头的模型视图矩阵中放置了一个投影矩阵（正交）。然后您只需在模型视图矩阵上进行乘法、乘法和乘法，而无需将其重置为已知（身份）状态。

每个固定函数OpenGL显示过程的粗略轮廓大致如下：

1.  设置清除颜色和深度，然后清除
2.  设置视口和投影矩阵

    1.  矩阵模式投影
    2.  加载标识
    3.  乘投影（正交或透视）
3.  设置初始视图矩阵

    1.  矩阵模式模型视图
    2.  加载标识
    3.  设置视图（lookat 或其他）
4.  绘制几何图形

    1.  对于每个对象
    2.  矩阵模式模型视图
    3.  推矩阵
    4.  应用局部变换
    5.  绘制对象
    6.  弹出矩阵

* * *

### 更新 1

首先是重写你的程序，它以一种可预测的方式工作并且做你最初设计的事情。

在它之后找到你的问题的答案

```
#include <GL/glut.h>

void DrawRSquare(
    float sz,
    float tx,
    float ty )
{
    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();

    /* 
       Order of operations matters.
       Drawing commands use the current state
       of OpenGL, which includes the transformation
       matrix state. So this must be set before
       drawing.
    */
    glTranslatef(tx, ty, 0);

    glColor3f(1, 0, 0);
    glBegin( GL_LINE_LOOP );
    glVertex2f( 0, 0 );
    glVertex2f( sz, 0 );
    glVertex2f( sz, sz );
    glVertex2f( 0,  sz );
    glEnd();

    glPopMatrix();
}

void Display(void)
{
    glClearColor( 1, 1, 1, 0 );
    glClear( GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT );

    const int windim[2] = {
        glutGet(GLUT_WINDOW_WIDTH),
        glutGet(GLUT_WINDOW_HEIGHT)
    };

    glViewport(0, 0, windim[0], windim[1]);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0, windim[0], 0.0, windim[1], -1, 1);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    DrawRSquare(50, 100, 0);
    DrawRSquare(50, 200, 100);

    glutSwapBuffers();
}

int main(
    int argc,
    char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGB );
    glutCreateWindow( "" );
    glutDisplayFunc( Display );

   glutMainLoop(  );
} 
```

* * *

> 实际上程序正在运行 DisplayRSquare，在这个函数中，我绘制了一个与我们创建的窗口相同大小的正方形，并希望在二维空间中使用向量 (100,0) 来增加它，但实际上它是平移的 (200,0)。如果将向量更改为 (50,0)，它将移动 (100,0)。

这样做的原因是，您的 Display 函数可能被调用了三次，然后就不再调用了。在 DisplayRSquare 的第一次调用中，在创建窗口但尚未暴露时绘制了一些线之后应用了 (100,0,0) 的转换。然后窗口暴露出来，下一次重绘将另一个 (100,0,0) 应用于已设置的转换。但是窗口仍然会再次暴露，现在将再次绘制正方形，现在应用了 (100,0,0) + (100,0,0)。如果您调整窗口大小，则该正方形将进一步平移，直到每次重绘时都看不见。

这就是为什么您**必须**在开始任何绘图之前将您的 OpenGL 状态重置为众所周知的状态。

> 更重要的是，该程序有时运行良好。有时不是。我的代码是 glTranslatef(100,0,0)。对于同一个程序，有时会翻译 100，有时会翻译 200……有点像有线……

发生的情况是，您的程序收到的重绘事件的数量会有所不同。这是通过在其上移动其他窗口，对其进行图标化和恢复等。

> 对于函数 glVertex2f(0.3,0.7)，我们应该在 0.3*widthofthewindow，0.7*height 的位置找到一个点，对吧？

这完全取决于设置的投影和模型视图矩阵。如果不知道它们是如何设置的，并且您的程序永远不会将它们设置为明确定义的状态，我们不知道。

> 但我找不到它。

很可能，因为您的转换矩阵将与您缩进的内容相去甚远。

> 我必须计算坐标并运行 glVertex2f(0.3*width,0.7*height)？

不。好吧，至少不是你想的那样。

* * *

一个建议：您正在使用固定功能管道和立即模式。两者都严重过时和弃用。事实上，它们已从最新版本的 OpenGL 中删除，所以我什至懒得去学习它们。

如果您想学习现代 OpenGL，我强烈建议您阅读并完成 Nicol Bolas 的教程，恕我直言，这是您目前能找到的最好的教程之一：

[http://arcsynthesis.org/gltut](http://arcsynthesis.org/gltut)

# jquery - 由于标签上的显示块，fadeToggle() 在 chrome/safari 上失败

> ID：11183036
> 
> 赞同：1
> 
> 时间：2012-06-25T03:03:01.707
> 
> 标签：jquery

[http://jsfiddle.net/GGsEt/3/](http://jsfiddle.net/GGsEt/3/)

### 在火狐上工作

HTML

```
<ul>
    <li class="lib_undefined">
       <span class="hidden_toggle">
           <a href="/">Test</a>
       </span>
    </li>
</ul>
​ 
```

CSS

```
.hidden_toggle{
    text-align: center;
    font-size: 20px;
    font-weight: 600;
    color: #999;
    line-height: 80px;
    display: none;
}
    .hidden_toggle a{
        color: #999;
        border: none;
        display: block;
        width: 100%;    
        height: 90px;
    }

.lib_undefined{
    min-height: 90px;
    border: 1px solid #000;
} 
```

jQuery

```
$('.lib_undefined').hover(function(){
     $(this).children('.hidden_toggle').fadeToggle();
});​ 
```

任何已知的修复？标签需要填满整个`a`li，这就是 display 设置为 block 的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T03:04:41.660

工作时`fadeToggle()`它添加`display: inline` `CSS`到淡入淡出元素。您可以使用一些块元素，例如`div`/`p`来包装您的`a`.

只需使用

`display: inline-block`并`.hidden_toggle a`希望您的问题能够解决。

IE。

```
.hidden_toggle a {
    color: #999;
    border: none;
    display: inline-block; // change here
    width: 100%;    
    height: 90px;
} 
```

**[演示](http://jsfiddle.net/GGsEt/7/)**

### 笔记

虽然`display: inline-block`对于较旧的 IE 版本会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:45:05.313

问题在于 fadeToggle() 函数是如何实现的。如果应用于跨度元素，它将在元素样式上使用 display:inline 作为切换的最终结果。这不是你想要的。

在您的 html 代码中将 <span/> 更改为 <div/> 以使其在任何地方都可以工作：http: [//jsfiddle.net/GGsEt/3/](http://jsfiddle.net/GGsEt/3/)

如果出于某些语义原因必须使用跨度，我认为除了使用 animate() 之外别无他法。

# twitter - Twitter：Twitter4j 用户的国家

> ID：11183039
> 
> 赞同：1
> 
> 时间：2012-06-25T03:03:22.043
> 
> 标签：twitter, twitter4j

我正在使用 twitter4j 获取 Twitter 用户的位置：

```
Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
long id = accessToken.getUserId();
User user = twitter.showUser(id);

System.out.print("LOCATION: " +user.getLocation()); 
```

`user.getLocation()`不包括国家。如何使用 twitter4j 获取用户所在的国家/地区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:51:04.653

用户所在国家/地区没有单独的字段。该方法应返回在 Twitter 个人资料页面上的位置字段中设置的任何信息`getLocation()`。

我注意到您的代码的一件事是您没有显示 accessToken 变量是如何初始化的。尝试以下操作：

```
Twitter twitter = new TwitterFactory().getInstance();
long id = new AccessToken(ACCESS_TOKEN, ACCESS_TOKEN_SECRET).getUserId();
User user = twitter.showUser(id);
System.out.print("LOCATION: " + user.getLocation()); 
```

[在您的Twitter 开发人员](https://dev.twitter.com/apps)页面上授予您的应用程序访问您的 Twitter 帐户的权限后，您获得的值在哪里`ACCESS_TOKEN`以及在哪里。当我运行上面的代码时，我得到了预期：“位置：美国北卡罗来纳州夏洛特”`ACCESS_TOKEN_SECRET`

# facebook - Facebook实时api：注册用户/点赞但未收到更新

> ID：11183050
> 
> 赞同：1
> 
> 时间：2012-06-25T03:07:26.853
> 
> 标签：facebook, facebook-graph-api

我为我的一个应用程序创建了 Facebook 实时 api 订阅。我订阅了`user`对象和`likes`字段。我通过请求我当前的订阅来验证我的原始订阅是成功的，并且我从 facebook 收到了正确的信息：

```
{
   "data": [
      {
         "object": "user",
         "callback_url": "http://mydomain.com/myapp/callback.php",
         "fields": [
            "likes"
         ],
         "active": true
      }
   ]
} 
```

如果我理解正确，只要授权我的应用程序的人喜欢 Facebook 上的某些内容，我就会收到回调。

第一个问题，正确吗？

如果是这样，我在我的个人 Facebook 页面上授权了我的应用，然后喜欢[https://www.facebook.com/frontalot](https://www.facebook.com/frontalot)的页面，但我没有收到回调。

任何想法为什么？

编辑：

建议的答案之一提到文档说尚不支持喜欢连接，但这就是文档所说的：

> 以下是您可以订阅的用户连接列表：供稿、朋友、活动、兴趣、音乐、书籍、电影、电视、喜欢、签到、位置、事件。
> 
> 您还不能订阅这些用户连接：家庭、标记、帖子、照片、相册、视频、群组、便笺、收件箱、发件箱、更新、帐户。

所以它说我可以订阅点赞连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:44:14.067

如果您查看[文档](https://developers.facebook.com/docs/reference/api/realtime/)，`likes`则尚不支持连接。如果您想记录在您的网站上发生的类似情况，您可以使用[此处](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)`FB.Event.subscribe`提到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T14:20:23.977

即使我有一些回调没有被解雇的问题。您可以订阅用户的提要。并且您还应该在登录时将权限范围指定为 read_stream 。您将收到回电，说用户的提要发生了变化。然后，您可以查询该提要并获得喜欢。

# php - 有时会加载旧的 PHP 会话变量

> ID：11183056
> 
> 赞同：0
> 
> 时间：2012-06-25T03:09:34.267
> 
> 标签：php, javascript, jquery

我有一个页面，其中包含一些用户可选择的选项和一个按钮，单击该按钮会运行 PHP 脚本，然后使用另一个 PHP 文件刷新 div，该文件使用在第一个 PHP 脚本末尾创建的会话变量。如果用户再次按下按钮，选择了不同的选项，则使用新替换的会话变量更新 div。问题是，有时，可能 10 次左右，有 1 次会加载旧的会话变量数据。我怀疑第二个 PHP 文件在更新之前太早地捕获了该变量，但我尝试在各个点取消设置会话变量，但没有任何运气。

第一个 PHP 文件：

```
session_start();
$needle = array();
foreach($_POST['checkboxes'] as $key => $value){
$needle[] = "$value";
}
// code that processes the values from needle and outputs $data
unset($_SESSION['data']);
$_SESSION['data']=$data; 
```

第二个 PHP 文件：

```
session_start();
echo $_SESSION['data']; 
```

Javascript：

```
$(".userdata").click(function() {
   $.post("first.php", $("form#checkboxes").serialize());
});
$(function() {
   $("#button").click(function() {
   $("#div").load('second.php')
   })
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:30:31.217

问题是，在某些情况下，在您单击加载第二个 PHP 脚本的按钮之前，第一个 PHP 脚本尚未完成运行（就像我之前在评论中暗示的那样）。发生这种情况的事实与网络服务器如何调度脚本有关（这完全是一个不同的主题）。

因此，您需要确保当您单击运行第二个脚本的按钮时，第一个脚本已完全运行完毕。

因为据我所知，javascript 不允许对变量进行阻塞/发送信号（就像 Java 一样），您将不得不使用一种更“脏”的技术，称为忙等待。

最好的方法是在您使用的 javascript 中包含一个额外的变量。

```
var wait = false;
function reloadSecond (){
  if (wait){
    setTimeout('reloadSecond()',200);
  } else {
    $("#div").load('second.php');
  }  
}

$(".userdata").click(function() {
   wait = true;
   $.post("first.php", $("form#checkboxes").serialize(), function(){
     wait = false;
   });

});
$(function() {
   $("#button").click(reloadSecond);
}) 
```

虽然“忙等待”通常不被认为是最优雅的解决方案，但我认为在这种情况下您没有很多其他选择（除了服务器端推送，这要复杂得多）。此外，您可能只会导致额外的 200 毫秒（或更短，您当然可以更改此值）等待时间一次或两次。

（旁注：我假设 javascript 在这里是单线程的，这在几乎所有情况下都是正确的：[JavaScript 是否保证是单线程的？](https://stackoverflow.com/questions/2734025/is-javascript-guaranteed-to-be-single-threaded)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:32:47.160

可能是浏览器或代理服务器正在缓存 html 数据的情况吗？尝试设置标题以告诉他们不要缓存。[有关要设置的标头，请参阅http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)中的示例。

# php - ZF2 Zend\Db 使用 Mysql 表达式插入/更新 (Zend\Db\Sql\Expression?)

> ID：11183061
> 
> 赞同：8
> 
> 时间：2012-06-25T03:11:14.860
> 
> 标签：php, zend-framework2, zend-db

有没有办法通过 Zend\Db 和/或 TableGateway insert()/update() 语句在 ZF2 (2.0.0beta4) 的当前构建中包含 MySQL 表达式，如 NOW()？

这是邮件列表上的相关帖子，尽管尚未得到答复：http: [//zend-framework-community.634137.n4.nabble.com/Zend-Db-Expr-and-Transactions-in-ZF2- db-td4472944.html](http://zend-framework-community.634137.n4.nabble.com/Zend-Db-Expr-and-Transactions-in-ZF2-Db-td4472944.html)

ZF1似乎使用了类似的东西：

```
 $data = array( 
        'update_time'   => new \Zend\Db\Expr("NOW()") 
    ); 
```

在浏览完 Zend\Db\Sql\Expression 之后，我尝试了：

```
 $data = array(
        'update_time' => new \Zend\Db\Sql\Expression("NOW()"),
    ); 
```

但是得到以下错误：

```
Catchable fatal error: Object of class Zend\Db\Sql\Expression could not be converted to string in /var/www/vendor/ZF2/library/Zend/Db/Adapter/Driver/Pdo/Statement.php on line 256 
```

如此处推荐：http: [//zend-framework-community.634137.n4.nabble.com/ZF2-beta3-Zend-Db-Sql-Insert-new-Expression-now-td4536197.html](http://zend-framework-community.634137.n4.nabble.com/ZF2-beta3-Zend-Db-Sql-Insert-new-Expression-now-td4536197.html)我目前只是设置日期与 PHP 代码，但我宁愿使用 MySQL 服务器作为日期/时间的单一事实来源。

```
 $data = array(
        'update_time' => date('Y-m-d H:i:s'),
    ); 
```

谢谢，我很感激任何意见！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-07T02:58:24.540

Zend_Db_Sql_Expression 现在对我有用。

```
$data = array(
    'update_time' => new \Zend\Db\Sql\Expression("NOW()"),
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T20:27:59.750

我不确定他们是否在最新的更新中修复了这个问题，但这是一个已知的[错误](http://framework.zend.com/issues/browse/ZF2-263)，即使他们说它已修复，对我来说，修复后它仍然无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T13:16:18.573

它也适用于我。也许，你的问题和我的一样。字符串错误转换是因为我传递给方法的参数是数组元素而不是数组。检查此项并确保您正在传递 $object->method($array)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-20T11:48:06.813

你可以试试：

```
\Zend\Db\Sql\Predicate\Literal();
//or
\Zend\Db\Sql\Literal();
------------------------------------
$data = array(
    'update_time' => new \Zend\Db\Sql\Literal("NOW()"),
); 
```

> [https://framework.zend.com/manual/2.2/en/modules/zend.db.sql.html#literal-literal](https://framework.zend.com/manual/2.2/en/modules/zend.db.sql.html#literal-literal)

# objective-c - 如何使用 convertToWorldSpace 计算触摸位置？

> ID：11183062
> 
> 赞同：0
> 
> 时间：2012-06-25T03:11:16.323
> 
> 标签：objective-c, cocos2d-iphone, coordinates

我想在我的瓷砖游戏中将触摸位置转换为世界坐标。使用这段代码，我点击了屏幕的右侧（这样我的角色在平铺游戏中行走，背景慢慢向左移动）：

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    for( UITouch *touch in touches ) {
        CGPoint location = [touch locationInView: [touch view]];

        location = [[CCDirector sharedDirector] convertToGL: location];
        CGPoint test = [self convertToWorldSpace:location];

        CCLOG(@"test : %.2g", test.x); 
```

`test`日志给了我：

> 50, 72, 1e+02, 2.6e+02, 4.2e+02, （然后下降） 3.2e+02, 9.5, -1.9e+02 等

有谁知道为什么？我想计算触摸的“真实”坐标，以便我知道角色何时必须继续前进（**单击其实际位置的右侧**）或者他是否必须转身并向后走。（**点击其实际位置左侧**）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:35:21.283

打印的这些数字看起来不错，但是您使用的是`%g`格式说明符，根据[Apple](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)关于该主题的文档，它执行以下操作：

> 64 位浮点数 (double)，如果指数小于 –4 或大于或等于精度，则以 %e 的样式打印，否则以 %f 的样式打印。

除非那是您想要的，否则您可能应该`%f`改用它，它不会产生任何科学计数法的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:00:10.580

您使用 cocos2d 所做的一切，都是在单个 OpenGL 视图中进行的。因此，如果您通过场景或具有场景大小的图层来处理触摸，则调用这些线就足够了

```
 CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector] convertToGL: location]; 
```

获得相对于您的屏幕的触摸位置。`convertToWorldSpace`只是将本地节点坐标转换为世界坐标

# android - wifi 提供商 onLocationChanged 永远不会被调用

> ID：11183064
> 
> 赞同：6
> 
> 时间：2012-06-25T03:11:33.607
> 
> 标签：android, location, android-wifi

我遇到了一个奇怪的问题。我使用 wifi 来检索用户位置。我已经在几部手机上进行了测试；在其中一些上，我永远无法获得位置更新。似乎从未调用过 onLocationChanged 方法。我的代码附在下面..任何建议表示赞赏！！！

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  LocationManager locationManager;
  locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

  String provider = locationManager.NETWORK_PROVIDER;
  Location l = locationManager.getLastKnownLocation(provider);

  updateWithNewLocation(l);

  locationManager.requestLocationUpdates(provider, 0, 0,
                                       locationListener);
}

private void updateWithNewLocation(Location location) {
  TextView myLocationText;
  myLocationText = (TextView)findViewById(R.id.myLocationText);

  String latLongString = "No location found";
  if (location != null) {
    double lat = location.getLatitude();
    double lng = location.getLongitude();
    latLongString = "Lat:" + lat + "\nLong:" + lng;
  }

  myLocationText.setText("Your Current Position is:\n" +
                       latLongString);
}

private final LocationListener locationListener = new LocationListener() {
  public void onLocationChanged(Location location) {
    updateWithNewLocation(location);
    Log.i("onLocationChanged", "onLocationChanged");
    Toast.makeText(getApplicationContext(), "location changed", 
            Toast.LENGTH_SHORT).show();
  }

public void onProviderDisabled(String provider) {}
public void onProviderEnabled(String provider) {}
public void onStatusChanged(String provider, int status, 
                            Bundle extras) {} 
```

};

显现

```
<uses-permission
android:name="android.permission.ACCESS_FINE_LOCATION"
/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:32:17.280

我的猜测是，您没有从中获取位置更新的手机没有正确的数据连接。网络提供商需要 GSM/3G 或 WiFi 数据连接才能使用手机的手机/wifi 数据从 Google 服务器检索位置修复。您可以使用下面的方法进行检查。

```
public boolean isOnline() {
ConnectivityManager cm =
    (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo netInfo = cm.getActiveNetworkInfo();
if (netInfo != null && netInfo.isConnectedOrConnecting()) {
    return true;
}
return false; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:08:09.750

现在我怀疑谷歌位置服务在某些地区出现故障。我的应用程序重新开始工作，没有更改代码（来自 Play 商店的 apk）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T03:24:03.127

请检查您的 onProviderDisabled 方法是否没有立即被调用。

如果您发现提供商在注册后立即被呼叫，则意味着您使用的电话已禁用定位服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T16:55:41.513

我遇到了同样的问题，结果证明`onLocationChanged`如果存在`getLastKnownLocation`与“当前”相同的问题，则不会调用它。这意味着您不会获得新位置，因为没有什么新的要报告...解决方案是使用最后一个已知位置，即使它很旧（如果您需要更精确/新的位置（如果这样），请继续侦听更新发生））。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T06:04:22.627

`NetworkProvider`在（4.0）中进行测试时，我也遇到了同样的问题，`ICS`但在旧版本（我测试过的 2.2 和 2.3.3）中工作正常。这是我找到的解决方案，也可以正常工作`ICS`。请使用`Criteria`获取位置更新，如下所示：

```
 LocationManager locationManager= (LocationManager) <YourAct>
            .getSystemService(Context.LOCATION_SERVICE);
 Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_COARSE);  //ACCURACY_COARSE or ACCURACY_FINE based on usage

    String provider = locationManager.getBestProvider(criteria, true);
    // Register the listener with the Location Manager to receive location
    // updates
    locationManager.requestLocationUpdates(provider, 0, 0, locationListener); 
```

替换上面的代码。这将帮助您获取位置更新。

# html - div没有并排对齐

> ID：11183065
> 
> 赞同：0
> 
> 时间：2012-06-25T03:12:14.747
> 
> 标签：html, css

在过去的几个月里，我一直在学习 div，现在我能够并排对齐 div。

然而，今天我在我的网站上工作，我的 div 突然停止了排队。

有问题的 div 是`#dorsey_left`：`#dorsey_middle`和`#dorsey_right`.

当我`#dorsey_left`从`HTML`文档中取出`#dorsey_middle`并`#dorsey_right`正确对齐时。我猜这个问题与 相关`#dorsey_left`，但我在代码中找不到任何东西。

这是[JsFiddle](http://jsfiddle.net/juaZg/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:19:40.287

I think you'll find the solution by cleaning up your code. There are numerous syntax errors (unclosed quotes, children of `<ul>` that aren't `<li>`, etc). If your code passes [validation](http://validator.w3.org/) and the problem still exists try to simplify it so you get to the root of the problem by removing things that clearly aren't the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:32:43.603

检查每个左边的大小 | 中间 | 对了，还要检查主计数器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T05:33:57.853

本教程将解决您的问题，其中还包含用于水平对齐 3 个 div 的代码 [http://codejigz.com/forget-tables-use-divscss-for-page-layouts/](http://codejigz.com/forget-tables-use-divscss-for-page-layouts/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T03:22:23.807

[布局](http://www.w3schools.com/html/html_layout.asp)

这是一些简单的例子，请参考这个

[结盟](http://www.w3schools.com/cssref/css3_pr_box-align.asp)

# silverlight - 检查文件是否被锁定或捕获错误以尝试打开

> ID：11183067
> 
> 赞同：3
> 
> 时间：2012-06-25T03:12:21.220
> 
> 标签：silverlight, filestream, silverlight-5.0, openfiledialog

我正在尝试处理用户可以尝试使用`OpenFileDialog`Excel 打开的文件打开的问题。

使用简单的`FileInfo.OpenRead()`，它会抛出一个`IOException`“进程无法访问文件'cakes.xls'，因为它正被另一个进程使用。” 除了用户实际上会得到“调试资源字符串不可用”的废话外，这对用户来说是可以的。

似乎无法打开由另一个进程打开的文件，因为使用`FileInfo.Open(FileMode.Open, FileAccess.Read, FileShare.ReadWrite)`夹头 a `SecurityException`，“不允许文件操作。访问路径 'C:\whatever\cakes.xls' 被拒绝。”，对于任何文件。比较没用。

因此，要么找到某种方法来检查文件是否被锁定，要么尝试捕获 IOException。我不想捕获*所有*IOExceptions 并假设它们都是锁定的文件错误，所以我需要某种方法来将这种类型的异常分类为这种错误......但是“调试资源字符串”是胡说八道的事实该消息本身可能已本地化，这很棘手。我是部分信任，所以我不能使用`Marshal.GetHRForException`.

那么：是否有任何明智的方法来检查文件是否被锁定，或者至少在不捕获所有 IOExceptions 的情况下确定是否发生了此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:24:32.790

我刚刚解决了这个问题：就像阅读文档一样简单。

[FileInfo.Open](http://msdn.microsoft.com/en-us/library/ya63c7c5.aspx)指定：

*   FileNotFoundException - 找不到文件。
*   UnauthorizedAccessException - 该文件是只读的或者是一个目录。
*   DirectoryNotFoundException - 指定的路径无效，例如位于未映射的驱动器上。
*   **IOException - 文件已打开。**

因此，捕获所有 IOException 并将它们视为此文件已打开问题是安全的，因为它指定这是唯一会抛出 IOException 的情况。

# ruby-on-rails - 使用 jquery ui 的可排序列表未传递更新的列表顺序

> ID：11183069
> 
> 赞同：0
> 
> 时间：2012-06-25T03:12:51.550
> 
> 标签：ruby-on-rails, jquery-ui, jquery-ui-sortable

我正在关注可排序的列表 railscast 并且除了排序时一切正常，每次都将相同的（原始）顺序传递给更新方法，因此它不会更新真实的顺序。

这是代码：

在视图中：

```
%tbody#lineup{"data-update-url" => sort_lineups_url}
      - @lineup.pieces.each_with_index do |piece, index|
        = content_tag_for :tr, piece do
          = render 'piece', :piece => piece, :index => index 
```

和pieces.js.coffee：

```
jQuery ->
  $('#lineup').sortable(
    axis: 'y'
    update: ->
      $.post($(this).data('update-url'), $(this).sortable('serialize'))
  ); 
```

阵容控制器的排序和显示方法：

```
 def show
    @lineup = Lineup.find_by_user_id(current_user.id)
    @pieces = @lineup.pieces.order("position")
  end

  def sort
    params[:piece].each_with_index do |id, index|
      current_user.lineup.pieces.update_all({position: index+1}, {id: id})
    end
    render nothing: true
  end 
```

和更新请求：

```
Started POST "/lineups/sort" for 127.0.0.1 at 2012-06-24 20:06:14 -0700
Processing by LineupsController#sort as */*
  Parameters: {"piece"=>["8", "2", "1", "4", "3", "7"]}
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
  Lineup Load (0.6ms)  SELECT `lineups`.* FROM `lineups` WHERE `lineups`.`user_id` = 2 LIMIT 1
  SQL (2.9ms)  UPDATE `pieces` INNER JOIN `piece_lineups` ON `pieces`.`id` = `piece_lineups`.`piece_id` SET `position` = 1 WHERE `piece_lineups`.`lineup_id` = 3 AND `pieces`.`id` = 8
  SQL (0.6ms)  UPDATE `pieces` INNER JOIN `piece_lineups` ON `pieces`.`id` = `piece_lineups`.`piece_id` SET `position` = 2 WHERE `piece_lineups`.`lineup_id` = 3 AND `pieces`.`id` = 2
  SQL (0.6ms)  UPDATE `pieces` INNER JOIN `piece_lineups` ON `pieces`.`id` = `piece_lineups`.`piece_id` SET `position` = 3 WHERE `piece_lineups`.`lineup_id` = 3 AND `pieces`.`id` = 1
  SQL (0.5ms)  UPDATE `pieces` INNER JOIN `piece_lineups` ON `pieces`.`id` = `piece_lineups`.`piece_id` SET `position` = 4 WHERE `piece_lineups`.`lineup_id` = 3 AND `pieces`.`id` = 4
  SQL (0.6ms)  UPDATE `pieces` INNER JOIN `piece_lineups` ON `pieces`.`id` = `piece_lineups`.`piece_id` SET `position` = 5 WHERE `piece_lineups`.`lineup_id` = 3 AND `pieces`.`id` = 3
  SQL (0.5ms)  UPDATE `pieces` INNER JOIN `piece_lineups` ON `pieces`.`id` = `piece_lineups`.`piece_id` SET `position` = 6 WHERE `piece_lineups`.`lineup_id` = 3 AND `pieces`.`id` = 7
  Rendered text template (0.0ms) 
```

所以每次我拖放列表时，它都会再次发送相同的订单。参数没有通过正确的更新顺序，我做错了什么？在 2757 毫秒内完成 200 次 OK（查看次数：1.0 毫秒 | ActiveRecord：6.7 毫秒）

```
%tr{:style => 'height: 60px;'}
  %td{:style => 'text-align: center;'}
    %h5= index + 1
  %td{:style => 'padding-left: 10px;'}
    %h5= "#{piece.name} - #{piece.id}"
  %td{:style => 'text-align: center;'}
    %h5= piece.category
  %td{:style => 'padding-left: 10px;'}
    %h5= piece.description
  %td{:style => 'padding-left: 10px;'}
    %h5= @lineup.get_piece_status(piece.id)
  %td.pop{:style => 'text-align: center;', :rel => 'popover',:'data-title' => piece.name, :'data-placement' => 'bottom', :'data-content' => image_tag(piece.photo.url(:small))}
    = image_tag(piece.photo.url(:tiny))
  %td{:style => 'text-align: center;'}
    - unless ['Preparing', 'Shipped', 'Arrived'].include?(@lineup.get_piece_status(piece.id))
      = form_for(@lineup, :html => {:id => "remove#{piece.id}", :style => "margin-bottom: 0px;"}) do |f|
        = f.hidden_field(:piece_id, :value => piece.id)
        = link_to 'x', '#', :onclick=>"document.getElementById('remove#{piece.id}').submit(); return false;" 
```

# load-testing - QTP 用于负载测试？

> ID：11183074
> 
> 赞同：2
> 
> 时间：2012-06-25T03:13:32.750
> 
> 标签：load-testing, qtp, performance-testing, loadrunner

我对 QTP 11 有一些疑问，QTP 11 可以在 Performance Center 中使用 loadtesting 进行类似 loadruner 的性能测试吗？还是 QTP 仅用于功能测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T04:38:10.923

AFAIK 通常 QTP 不用于负载测试，尽管可以使用开始和结束事务来测量业务场景的事务时间。您可以执行 QTP 脚本，这反过来又是负载测试的一部分。但是要深入进入负载测试，您需要使用其他负载测试工具，例如 HP LoadRunner。很明显，QTP 和 LoadRunner 这两个工具都来自 HP（这也意味着，根据 HP 的负载测试，您应该使用不同的测试工具）这两个工具可以一起用于负载测试， [这](http://www.loadrunnertnt.com/concepts/using-qtp-with-loadrunner-for-load-testing/)是链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T00:12:02.297

QTP 在 LoadRunner 模型中用作图形虚拟用户。这需要每个虚拟用户有一个操作系统实例。GUI 虚拟用户是 LoadRunner 版本 1 中的第一个虚拟用户类型，它运行多个 XRunner 版本。在版本 4 之前，XRunner 一直是 GUI 虚拟用户的首选。从版本 4 到 6，图形虚拟用户在 UNIX 和 Windows 系统上都可用，在 UNIX 上使用 XRunner，在 Windows 上使用 WinRunner。到版本 3 时，虚拟用户的 API 版本已经取代了主要负载的 GUI 虚拟用户。

从版本 8 开始，QuickTest Profession 可作为图形虚拟用户类型使用。在版本 11 中，默认的 GUI 虚拟用户类型是 QTP，不再支持 WinRunner。

所以是的，两者可以整合。将 Mercury/HP 系列中的功能自动化测试工具与性能测试工具结合使用已有很长的历史。

在瘦 Web 客户端时代，图形性能测试工具的使用一度失宠。随着 Web 客户端变得越来越厚，能够运行 Javascript、C# 和其他技术，衡量 API 级别和 GUI 级别之间差异的需求又重新流行起来。除了传统的 GUI 虚拟用户外，惠普还提供 TruClient。TruClient 的主要优点是您可以在每个操作系统实例上运行多个 TruClient 虚拟用户，而 GUI 虚拟用户在每个操作系统实例上只能执行一个虚拟用户（在 Microsoft Windows 上）。

与您的 VAR 交谈。GUI 虚拟用户以五个或更多的捆绑包运行每个虚拟用户大约 1k。预计您不会使用所有图形虚拟用户运行完整的性能测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T14:27:30.753

您当然可以在 QTP 中编写一个脚本，例如登录网站并通过 loadrunner 运行该脚本。

但首先，时间不会准确，因为 QTP 会将自己的时间（用于执行）添加到响应时间中。

其次，您每台机器只能模拟一个用户，而 Load runner 一次模拟数百个用户。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-21T04:35:54.837

不可以。单独的 UFT 无法执行负载测试。您所能做的就是测量事务时间。UFT 工具的目的是自动化 GUI 和 API 测试。对于负载测试，您需要使用 Load Runner。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-05-17T11:04:59.007

UFT 基本上是针对功能测试的，表示可以使用 UFT 进行基本的性能测试。交易时间和页面加载。您可以获得完成任何操作所需的时间，或加载页面/图像所需的时间。

# mysql - 如何更改列数据类型以包含特殊字符？

> ID：11183077
> 
> 赞同：0
> 
> 时间：2012-06-25T03:15:00.413
> 
> 标签：mysql

我是 MySQL 新手，我创建了一个表来包含一个 datatype 列`varchar(20)`。

我需要为列插入像`12:322:13:aa`,这样的值`1:22:00:ee:2w`。我怎样才能做到这一点？是否有任何接受此类字符串的数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:35:49.703

您的字符串仅包含 ASCII 字符，因此任何字符集都可以存储它们。但是如果您需要更广泛的字符集，您可以为特定字段或整个表指定它。

```
CREATE TEMPORARY TABLE t (c VARCHAR(20) CHARACTER SET "utf8");
INSERT INTO t (c) VALUES ("12:322:13:aa"), ("1:22:00:ee:2w");

>SELECT * FROM t;
+---------------+
| c             |
+---------------+
| 12:322:13:aa  |
| 1:22:00:ee:2w |
+---------------+
2 rows in set (0.00 sec) 
```

# design-patterns - CUDA 设计模式

> ID：11183079
> 
> 赞同：4
> 
> 时间：2012-06-25T03:15:18.730
> 
> 标签：design-patterns, cuda, gpu

我是 CUDA 编程的初学者，我想知道是否有人知道任何讨论 CUDA 设计模式的好资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T04:47:02.120

我认为[现代 GPU 计算](http://nvlabs.github.io/moderngpu/)对于想要学习 CUDA 的人来说是很好的资源。您可以找到关于缩减、扫描、流压缩并行编程模式和其他有关 CUDA 优化的有趣内容的很好的解释。这是此博客中代码示例的[GitHub链接。](https://github.com/NVlabs/moderngpu)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T05:22:15.793

我听说过有关[并行编程模式的](http://www.pearsoned.co.uk/bookshop/detail.asp?item=100000000052063)好消息，我认为将它与 CUDA 最佳实践指南（包含在 CUDA 工具包中）结合起来应该是一个好的开始。

正如 marina.k 所提到的，像 Sean Baxter 的 ModernGPU 这样的网站将有助于一些常见并行算法模式的 CUDA 实现（但我会使用 ModernGPU 中的 Thrust 或 Sean 的代码，而不是实现你自己的代码，除非你将其作为学习锻炼）。

# symfony - 删除或自定义嵌入的表单标签

> ID：11183080
> 
> 赞同：4
> 
> 时间：2012-06-25T03:15:34.963
> 
> 标签：symfony, symfony-forms

当我像这样设置我的表单类型文件时：

```
$builder->add( 'producer', new ProducerType() ); 
```

它总是为我返回嵌入表单的一般标题（标签），例如“生产者”，我如何删除或自定义此标签？

更新：最新的 Fosuserbundle 已删除这个恼人的标签

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T15:09:11.290

删除标签的正确（？）方法是将其设置为`false`.

```
$builder->add( 'producer', new ProducerType(), array( 'label' => false )); 
```

然后标签根本不会被渲染。[尽管目前文档](http://symfony.com/doc/master/reference/forms/types/form.html)中以某种方式缺少它，但您可以通过查看默认的树枝[表单样式](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig)（第 3 行）来重构此行为：

```
{% block form_label %}
{% spaceless %}
    {% if label is not sameas(false) %}
        {% if not compound %}
            {% set label_attr = label_attr|merge({'for': id}) %}
        {% endif %}
        {% if required %}
            {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
        {% endif %}
        {% if label is empty %}
            {% set label = name|humanize %}
        {% endif %}
        <label{% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>{{ label|trans({}, translation_domain) }}</label>
    {% endif %}
{% endspaceless %}
{% endblock form_label %} 
```

这些树枝样式也是表单定制的一个很好的开始。更多关于这个主题的信息可以在这个[食谱条目](http://symfony.com/doc/master/cookbook/form/form_customization.html)中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T03:19:27.990

you can try adding a label as an option, depending on what options ProductType is inheriting this may be enough.

```
$builder->add('producer', new ProducerType(), array('label' => 'Some Label')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:44:25.743

To avoid fighting with formbuilder, you can disable labels using css.

```
<style>
    table.record_properties td label {
        display: none;
    }
</style>

<form action="{{ path('equipment_update', { 'id': entity.id }) }}" method="post" {{ form_enctype(edit_form) }}>
    <table class="record_properties" style="text-align: left;width: 500px;">
        <tbody>

        <tr>
            <th>{% trans %}title{% endtrans %}</th>
            <td>&nbsp;</td>
            <td>{{ form_row(edit_form.title) }}</td>
        </tr>
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T08:11:13.190

要获得一个空的嵌入表单标签，请尝试添加一个空的（一个空格字符）标签属性

```
$builder->add( 'producer', new ProducerType(), array('label' => ' ')) 
```

结果如下：

```
<div id="producer">
  <div>
    <label class=" required"></label>
    <div id="mainEntityName_producer">
      <div>
        <label.../>
        <input.../>
      </div>
    </div>
  </div>
</div> 
```

# python - django外键关系查找

> ID：11183081
> 
> 赞同：3
> 
> 时间：2012-06-25T03:15:35.963
> 
> 标签：python, django, foreign-key-relationship

给定以下模型：

```
class Post(models.Model):
    title = models.CharField(max_length=200)
    html = models.TextField()

class PostTag(models.Model):
    post = models.ForeignKey('Post')
    tag = models.CharField(max_length=200) 
```

我想根据给定的 PostTag 完成查找 Post。因此，如果我有两个帖子，A 和 B，标记为“foo”，我希望能够查找所有带有该标签的帖子并获取帖子 A 和 B。

我想象查询看起来像下面这样：

```
posts = Post.objects.filter(tag=tag) 
```

关于从哪里开始完成此任务的任何提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T03:22:11.707

关闭。您需要指定[要跨越的](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)字段。

```
Post.objects.filter(posttag__tag=tag) 
```

# c - 有限状态机实现

> ID：11183082
> 
> 赞同：1
> 
> 时间：2012-06-25T03:16:13.190
> 
> 标签：c, function-pointers, fsm

我正在尝试在 C 中实现有限状态机，并且需要它非常快。所以我决定使用函数指针作为“状态”：

```
void *state1(void){ /* function body here */ }
void *state2(void){ /* ... */ }
void *state3(void){ /* ... */ } 
```

然后，主 FSM 循环可以非常简单：

```
void *(*fp)(void);
fp = state1;

while(fp)
    fp = fp(); 
```

有一个问题：

1) 是否可以避免在函数返回类型中使用 void 指针？理想情况下，状态函数应该具有某种类型定义的类型，以确保在 FSM 中仅使用具有这种类型的函数。

2）在 C 中实现 FSM 的传统方法是使用枚举作为状态和基于开关的调度程序循环，因此与基于函数指针的实现相比，会有一个间接级别。
但我不确定，指令缓存或分支预测是否存在一些问题？换句话说，是否存在可以胜过我的解决方案的实现？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T04:03:44.777

要在 C 中创建这样的递归类型定义，您需要在`struct`某处使用 a ，因为您不能“前向声明”类型定义。例如，您可以将函数指针包装在 a 中`struct`：

```
struct state {
    struct state (*func)(void);
}; 
```

然后在循环中：

```
struct state state = { state1 };

while (state.func) {
    state = state.func();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T08:35:35.650

在这里您可能会找到有关您的问题的答案：[http ://code.google.com/p/fwprofile/](http://code.google.com/p/fwprofile/)

它是用 C 语言实现的状态机的开源版本 (GNU GPLv3)。其概念和实现非常适合用于任务关键型应用程序。在工业应用中有部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T04:01:41.027

在 C 中不可能声明一个返回指向其自身类型函数的指针的函数。此外，您不能使用`void *`，因为 C 不允许函数和对象指针之间的转换。相反，您可以使用：

```
typedef void (*generic_func_ptr)(void);
typedef generic_func_ptr (*state_func_ptr)(void);
generic_func_ptr state1(void), state2(void), state3(void);
state_func_ptr fp;

while(fp)
    fp = (state_func_ptr)fp(); 
```

丑陋，但它的工作原理。相反，我会考虑使用 switch 语句。实现状态机要干净得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-09T22:07:33.870

如果其他人想为 fsm 使用免费框架，请查看[http://www.block-net.de/Programmierung/cpp/fsm/fsm.html](http://www.block-net.de/Programmierung/cpp/fsm/fsm.html) 有一个 C 和 C++ 有限状态机框架，包括状态带有 PlantUML 的图表生成器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T03:20:18.163

1) `typedef void(*state_fp)(void);`

```
state_fp state1(void) { } 
```

2) depends, a small loop with the code built into the function will be faster than making function calls. eg, a switch statement where each state is implemented in the switch statement, however, if there is too many case statements, this will degrade below function calls

# php - 订单详情未显示 (WooCommerce)

> ID：11183083
> 
> 赞同：1
> 
> 时间：2012-06-25T03:16:22.683
> 
> 标签：php, wordpress

我正在设计的网站有一个奇怪的问题。我正在使用 WooCommerce 系统并正在运行，并且正在使用 Wootique 主题。我已经编辑了一点，但没有什么太大的影响，主要是颜色。

发生的事情是，当我去买东西并结帐时，我可以输入我的详细信息，但在您的订单标题下没有出现任何内容。NEXT/CONTINUE 按钮也不见了，所以我不能再进一步了。

有没有其他人经历过这个？我似乎无法弄清楚它为什么会发生或如何解决它？

测试站点在[http://kelvinwinscom.fatcow.com/](http://kelvinwinscom.fatcow.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:58:57.580

我在 woocommerce 设置中遇到了完全相同的错误。在我的情况下，这是与 jQuery 的冲突。

Woocommerce 在您的主题头部部分加载最新版本的 jQuery。我在主题页脚中手动加载了旧版本的 jQuery。拥有两个 jQuery 副本会破坏“订单”部分，导致无法加载。通过删除我手动添加的 jQuery 副本，问题得到了解决。

您可能做过类似的事情，或者您正在使用以非 wordpress 方式添加 jQuery 的插件（不使用 wp_enqueue_script 和其他脚本注册和入队功能）

# javascript - 即时创建文本文件并要求用户下载

> ID：11183084
> 
> 赞同：1
> 
> 时间：2012-06-25T03:16:32.597
> 
> 标签：javascript, asp-classic

是否可以“即时”创建一个文本文件，然后要求客户下载它？

我只有两个可用的选项：1\. javascript 2\. asp classic

这两个中的哪一个可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:21:38.300

You can use classic ASP by creating a text file on disk then redirecting to the text file. Note that the file in this example `test.txt` is created in the folder where the page lives (E.G., \inetpub\wwwroot, etc.)

```
<%
Dim fs, fname

Set fs = Server.CreateObject("Scripting.FileSystemObject")
Set fname = fs.CreateTextFile(Server.MapPath("test.txt"), true)

fname.WriteLine("Hello World!")
fname.Close

Set fname = Nothing
Set fs = Nothing

Response.Redirect("text.txt")
%> 
```

# awk - 返回文本字符串的中间

> ID：11183088
> 
> 赞同：0
> 
> 时间：2012-06-25T03:16:56.170
> 
> 标签：awk

以下 awk 语句按预期工作。它从由 | 分隔的文本文件返回第 1、第 2 和最后 4 列

```
awk '{print $1,"|", $2,"|", $(NF-3), "|",$(NF-2), "|", $(NF-1),"|", $(NF)}' 
```

我想返回中间的列。换句话说，我需要将以下行中的 $something 替换为可以使用的东西。

```
awk '{print $1, $2, $something, $(NF-3), $(NF-2) $(NF-1), $(NF)}' 
```

可以有 3 到 11 列将替换 something 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:59:25.807

我想我已经理解你期望你的输出是什么样子了。试试这行`awk`：

```
awk 'BEGIN { OFS="|" } { for (i=1; i<=NF; i++) if (i <= 3 || i >= NF - 3) printf "%s"OFS, $i; else printf "%s", $i; print "" }' file.txt 
```

测试输入：

```
1 2 3 4 5 6 7 8 9 10 11 12 13 14
X1 X2 X3 X4 X5 X6 X7 X8 X9 X10 X11 X12 X13 X14
Y1 Y2 Y3 Y4 Y5 Y6 Y7 Y8 Y9 Y10 Y11 Y12 Y13 Y14
101 102 103 104 1010 1011 1012 1013 1014 
```

测试输出：

```
1|2|3|4567891011|12|13|14
X1|X2|X3|X4X5X6X7X8X9X10X11|X12|X13|X14
Y1|Y2|Y3|Y4Y5Y6Y7Y8Y9Y10Y11|Y12|Y13|Y14
101|102|103|10410101011|1012|1013|1014 
```

高温高压

# php - PHP MYSQL - combining 2 while loops

> ID：11183092
> 
> 赞同：1
> 
> 时间：2012-06-25T03:18:11.737
> 
> 标签：php, mysql, while-loop

I want to populate a table form a MYSQL database.

I have defined the tables and the mysql_query's so that this should be a lot cleaner.

Separately I am able to get the results, but I need to combine them since I am making a 4 column table.

looks like this:

```
-------------------------------------------------------------
|              |              |              |              |
| Menu 01 info | Menu 01 info | Menu 06 info | Menu 06 info |
|              |              |              |              |
-------------------------------------------------------------

while ($menu01 = mysql_fetch_array($order01)) AND while ($menu06 = mysql_fetch_array($order06)) 
{

  //TableStuff 
```

It is the line with **while** that I need to be without errors. Any help would be great. PHP is not my strongest point of knowledge sorry:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T03:20:43.797

Boolean and, and mind the grouping.

```
while (($menu01 = mysql_fetch_array($order01)) && ($menu06 = mysql_fetch_array($order06))) 
```

# ffmpeg - Video metadata edit with Ffmpeg

> ID：11183093
> 
> 赞同：2
> 
> 时间：2012-06-25T03:18:31.140
> 
> 标签：ffmpeg, metadata

I want to change the video metadata.

Orginal video info(ffmpeg -i video.mp4)

```
 Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2007-11-22 09:11:58
  Duration: 00:00:52.70, start: 0.000000, bitrate: 235 kb/s
    Stream #0:0(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, s16, 107 kb/s
    Metadata:
      creation_time   : 2007-11-22 09:11:58
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
    Stream #0:1(und): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p, 140x96 [SAR 1:1 DAR 35:24], 125 kb/s, 10 fps, 10 tbr, 10k tbn, 20k tbc
    Metadata:
      creation_time   : 2007-11-22 09:11:58
      handler_name    : (C) 2007 Google Inc. v06.24.2007. 
```

My ffmpeg shell code:

```
ffmpeg -i test.mp4 -metadata handler_name="Ahmetka" -i logo.png -filter_complex "overlay=(main_w-overlay_w):(main_h-overlay_h)" output.flv 
```

Output video info(ffmpeg -i output.flv)

```
 Input #0, flv, from 'output.flv':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2007-11-22 09:11:58
    encoder         : Lavf54.11.100
  Duration: 00:00:53.60, start: 0.000000, bitrate: 212 kb/s
    Stream #0:0: Video: flv1, yuv420p, 140x96, 200 kb/s, 10 tbr, 1k tbn, 1k tbc
    Stream #0:1: Audio: mp3, 44100 Hz, stereo, s16, 128 kb/s 
```

How can I do?

# javascript - Why use jQuery's css() function instead of maxHeight or the other named CSS functions?

> ID：11183094
> 
> 赞同：0
> 
> 时间：2012-06-25T03:18:34.913
> 
> 标签：javascript, jquery, css

After reading jQuery's [CSS documentation](http://api.jquery.com/css/), it doesn't look like it offers any advantages over just getting the Javascript element directly and manipulating its CSS by updating the property. Am I missing something?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T03:33:42.697

你应该使用 jQuery`css`方法，它提供了很多好处：

*   您可以在单个`.css`调用中设置多个 css 属性。
*   您可以传递整数值，它会自动转换为 px。
*   它规范了许多跨浏览器问题。例如，我可以直接使用`.css('opacity', 0.8)`而无需测试用户是否使用 IE 并应用丑陋的 alpha 变通方法。
*   我发现`$('#foo').css('prop', 'value')`比
    `$('#foo')[0].style.prop = 'value';`

更不用说`.css`提供其他 jQuery 的功能了，例如链接方法和自动迭代元素数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T03:25:14.747

jQuery 使 DOM 查找更容易，我喜欢 jQuery 中的 CSS 函数，因为我不需要记住附加函数的名称来操作样式。我可以将 .css() 与标准 CSS 属性和值结合使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T03:27:53.553

与基本 JS 实现相比，有很多好处，以下是我的最爱：

*   使用选择器 $('a').css(....) 它将将该 CSS 应用于所有匹配“a”的选择器。您将不得不使用循环，否则会创建更多代码
*   可以传入一个对象 {} 并以这种方式添加样式
*   可以执行一个函数来计算值（就像上面提到的循环一样）。

在我看来，所有这些都会导致代码更简洁、更简洁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T03:28:41.113

一个优点可能是将您设置的样式与设置它们的行为分开。例如，也许您在其他地方的 JavaScript 代码中动态构建样式。这将允许您调整该逻辑，而无需调整应用样式的代码。

或者，也许您想制作一个“可配置”脚本并将所有样式放入标题变量中，以分隔成一个可配置选项部分。（编写您自己的 jQuery 插件通常会涉及到这一点。）您可以将应用样式的代码隐藏在文件的“不要在此行以下修改”部分中，将可设置的属性留给人们可以配置它们的地方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T03:40:57.233

jQuery`$.fn.css`真的什么都没做。我的意思是，这是源函数本身：

```
css: function( elem, name, extra ) {
    var ret, hooks;

    // Make sure that we're working with the right name
    name = jQuery.camelCase( name );
    hooks = jQuery.cssHooks[ name ];
    name = jQuery.cssProps[ name ] || name;

    // cssFloat needs a special treatment
    if ( name === "cssFloat" ) {
        name = "float";
    }

    // If a hook was provided get the computed value from there
    if ( hooks && "get" in hooks && (ret = hooks.get( elem, true, extra )) !== undefined ) {
        return ret;

    // Otherwise, if a way to get the computed value exists, use that
    } else if ( curCSS ) {
        return curCSS( elem, name );
    }
} 
```

哦，我想当我说“不做任何事情”时，我的意思是它规范化名称以便您可以使用`hyphen-notation`而不是`camelCase`，支持跨浏览器兼容性并在返回适当的值之前`opacity`规范化属性名称。`float`

我想我也掩盖了这只是函数的*访问器*版本，mutator方法是：

```
style: function( elem, name, value, extra ) {
    // Don't set styles on text and comment nodes
    if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
        return;
    }

    // Make sure that we're working with the right name
    var ret, type, origName = jQuery.camelCase( name ),
        style = elem.style, hooks = jQuery.cssHooks[ origName ];

    name = jQuery.cssProps[ origName ] || origName;

    // Check if we're setting a value
    if ( value !== undefined ) {
        type = typeof value;

        // convert relative number strings (+= or -=) to relative numbers. #7345
        if ( type === "string" && (ret = rrelNum.exec( value )) ) {
            value = ( +( ret[1] + 1) * +ret[2] ) + parseFloat( jQuery.css( elem, name ) );
            // Fixes bug #9237
            type = "number";
        }

        // Make sure that NaN and null values aren't set. See: #7116
        if ( value == null || type === "number" && isNaN( value ) ) {
            return;
        }

        // If a number was passed in, add 'px' to the (except for certain CSS properties)
        if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
            value += "px";
        }

        // If a hook was provided, use that value, otherwise just set the specified value
        if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value )) !== undefined ) {
            // Wrapped to prevent IE from throwing errors when 'invalid' values are provided
            // Fixes bug #5509
            try {
                style[ name ] = value;
            } catch(e) {}
        }

    } else {
        // If a hook was provided get the non-computed value from there
        if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
            return ret;
        }

        // Otherwise just get the value from the style object
        return style[ name ];
    }
} 
```

因此，总而言之，优点是您在尝试动态设置 HTML 元素样式时不必担心跨浏览器问题，因为专门的 jQuery 开发人员已经将所有内容很好地规范化为一个函数。

[来自[jQuery 版本 1.7.2的代码](http://code.jquery.com/jquery-1.7.2.js)]

# c# - MVC Razor for loop

> ID：11183096
> 
> 赞同：17
> 
> 时间：2012-06-25T03:18:47.197
> 
> 标签：c#, asp.net-mvc, razor

I have this code (nested inside a form post) but am continually getting the error that it's missing the closing **}**

```
@for(int i=0;i< itemsCount; i++){
    <input type="hidden" @string.Format("name= item_name_{0} value= {1}",i,items[i].Description) >
    <input type="hidden" @string.Format("name= item_name_{0} value= {1}",i,items[i].UnitPrice.ToString("c"))>
} 
```

I've been staring at it long enough...can anyone help?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-25T03:21:00.530

Try put `@:` before your html code like this:

```
 @for(int i=0;i< itemsCount; i++)
 {
    @: html code here
 } 
```

Alternatives: 1\. wrap your html code with `<text></text>` 2\. use `HtmlHelper` to generate the html code

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-18T04:32:23.767

您可能会注意到，要编写代码块，您可以通过两种方式编写

1.  For Only a line of Block ，就像您在代码中编写的那样，它仅包含包含前面 @ 的行
2.  对于使用 @{... } 的代码块，这使您可以自由地使用不带 @ 前面的代码，除非在 HTML 表达式中。对于任何 html/文本，您必须在其前面加上 @：您要按原样打印，否则 Razor 将尝试将其解释为代码（因为 @: 将内容定义为 @ 下每个代码表达式的文字：您必须再次对代码使用 @）

在您的情况下，您可以执行以下操作

```
@{
    for(int i=0; i < itemsCount; i++)
    {
       @:<input type="hidden" @Html.Raw(string.Format("name= item_name_{0} value=  {1}",i,items[i].Description)) />
       @:<input type="hidden" @Html.Raw(@string.Format("name= item_name_{0} value= {1}",i,items[i].UnitPrice.ToString("c"))) />
    }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T03:49:35.417

最简单的方法是使用 HTML Helpers。代码也会很干净（您的 Description 和 UnitPrice 的名称格式似乎遵循相同的格式；您可能想要更改它）

```
 @for (int i = 0; i < itemsCount; i++)
    {
        @Html.Hidden(string.Concat("ïtem_name_", i), items[i].Description)
        @Html.Hidden(string.Concat("ïtem_name_", i), items[i].UnitPrice.ToString("c"))           
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T03:23:36.847

或者你可以使用`Html.Raw`助手

```
@for(int i=0; i < itemsCount; i++)
{
    <input type="hidden" @Html.Raw(string.Format("name= item_name_{0} value= {1}",i,items[i].Description)) />
    <input type="hidden" @Html.Raw(@string.Format("name= item_name_{0} value= {1}",i,items[i].UnitPrice.ToString("c"))) />
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T09:57:13.100

尝试将您的 for 循环主体包含在文本标记之间。

[http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T03:48:27.197

尝试：

```
@for (int i = 0; i < itemsCount; i++) {
    <input type="hidden" name="@("item_name_" + i)" value="@items[i].Description" />
    <input type="hidden" name="@("item_name_" + i)" value="@(items[i].UnitPrice.ToString("c"))" />
} 
```

请注意 prashanth 的另一个更改/注释。

# visual-studio - 如何使视觉工作室仅在未处理的异常上中断？

> ID：11183099
> 
> 赞同：38
> 
> 时间：2012-06-25T03:18:58.550
> 
> 标签：visual-studio, debugging, ide

在我的其他机器上，Visual Studio 总是在没有 try/catch 来处理错误时中断，但如果有 try/catch 则它不会中断。

出于某种原因，在这台笔记本电脑上，它不能那样工作。一开始它根本没有中断，但后来我发现如何通过调试/异常将其设置为中断。但是，将其配置为在此处中断会导致它始终在出现异常时中断，即使存在 try/catch 块也是如此。

我如何让它像我习惯的那样工作？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-25T04:33:01.963

`Just My Code Enabled`通过进入工具-->选项-->调试器-->常规-->启用我的代码来确保你有。这将更改您的 Debug--> Exceptions 对话框以显示用户未处理错误的 CheckBox。

![在此处输入图像描述](../Images/1e866ec9dadd3be79922b41ee958d8de.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-22T22:35:24.563

我在接受的答案中找不到对话。

根据我的经验，在异常设置中，如果您点击“将列表恢复为默认设置”，它不会因您处理的异常而中断。如果您在异常设置中检查了特定异常，那么无论您是否在代码中处理此异常，它都会中断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-15T01:27:23.727

有关更新的答案：

当您转到异常设置时，右键单击所需的异常类型，对于 C#，这可能是公共语言运行时异常，并启用“在用户代码中未处理时继续”设置。

对我来说，这似乎不会因为在 try catch 或其他方式中处理的异常而中断，但是当发生未处理的异常时它确实会中断。该选项的命名使它感觉有点不确定，但它似乎完全按照您和我现在希望的方式工作。

[例外设置](https://i.stack.imgur.com/AxcSu.png)
[启用所需设置](https://i.stack.imgur.com/8gglw.png)

# apache - 使用 .htaccess 处理数千个重定向

> ID：11183100
> 
> 赞同：2
> 
> 时间：2012-06-25T03:19:03.063
> 
> 标签：apache, .htaccess, redirect

我正在对网站进行大修。结果，我将几页移到了新格式。他们没有保持与以前相同的文件名，因此迁移有点棘手。

**例子：**

news.alpinezone.com/93467/ 正在变成 [http://alpinezone.com/still-more-skiing-and-riding-at-whiteface/](http://alpinezone.com/still-more-skiing-and-riding-at-whiteface/)

新闻子域在几年内积累了3000多篇文章。可以将 3000 + 301 重定向放入[.htaccess](http://en.wikipedia.org/wiki/Htaccess)文件吗？

附带说明一下，对于正确的[SEO](http://en.wikipedia.org/wiki/Search_engine_optimization)，我是否还应该确保我使用 http:// 而不是 http:// www 并确保它们完全小写，并且在 URL 的末尾也以 / 结尾。我正在重新设计 wordpress 和任何组合都非常有效，但我知道对于谷歌来说，它们可以被认为是独特但相似的 URL，所以我想尽可能地坚持使用一个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T03:59:38.037

Apache 确实为此提供了一些东西，例如 RewriteMap 或 RewriteProg。我认为每次请求都会读取 htaccess 文件，所以我不想让它的大小因 3000 行文本而爆炸——尽管我直觉告诉我它会处理得很好。我认为 RewriteMap 每次服务器启动或类似的东西只加载一次，所以这是一个好处。

但就个人而言，我认为我只是将对新闻子域的任何请求进行内部重写到像php这样的服务器端脚本，然后检查uri，查询数据库以获得id的最新/最新的url slug，然后做一个外部 301 重定向到新的 url。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T03:38:14.950

您是否考虑过 mod_authnz_ldap 将身份验证和授权查找卸载到另一台服务器？我在几台企业服务器上使用这个特定模块，没有任何问题。它可以轻松地允许您按组等设置对页面的访问。

# javascript - How to add non-variable text into javascript print popup?

> ID：11183101
> 
> 赞同：0
> 
> 时间：2012-06-25T03:19:16.777
> 
> 标签：javascript, printing, popup

I have a recipe blog and there is an option to print just the recipe from a blog post, this is all set up and works great, the right stuff gets printed etc using this javascript:

```
<script type='text/javascript'>

// Print recipe using iframe
function printRecipe(){
var content = document.getElementById(&quot;recipe&quot;);
var pri = document.getElementById(&quot;ifmcontentstoprint&quot;).contentWindow;
pri.document.open();
pri.document.write(content.innerHTML);
pri.document.close();
pri.focus();
pri.print();
} 
```

What I want to do is to add a footer with the website address to the bottom of every 'Print Recipe'. This will be unchanging from recipe to recipe, but I don't want it showing on the original recipe so it needs to show up only when the recipe is printed. So i know i have to add it somewhere in this code, but so far have had no luck.

I have tried to search loads of forums with no real answer to what must be a simply question..

please help! Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:22:05.077

在这一行之后：

```
pri.document.write(content.innerHTML); 
```

添加页脚：

```
pri.document.write("My custom footer! Can include HTML"); 
```

最终代码：

```
<script type='text/javascript'>

// Print recipe using iframe
function printRecipe(){
var content = document.getElementById("recipe");
var pri = document.getElementById("ifmcontentstoprint").contentWindow;
pri.document.open();
pri.document.write(content.innerHTML);
pri.document.write("My custom footer! Can include HTML");
pri.document.close();
pri.focus();
pri.print();
}
</script> 
```

# android - Scaling images automatically instead of pre-defined images

> ID：11183106
> 
> 赞同：0
> 
> 时间：2012-06-25T03:20:29.833
> 
> 标签：android, image

I'm quite new to Android development. My understanding is that you can create several versions of the same image with different sizes and put them into the folders drawable-ldpi, drawable-mdpi, drawable-hdpi.

It seems obvious to me that you can handle this problem "the lazy way" by just resizing one image depending on the device's pixel density. For this I programmatically find out what density the device has, like ldpi. The implementation itself is not the problem. I'm just afraid of any drawbacks (that prevent me later from running the app on different devices).

So, are there any (major) drawbacks of scaling images automatically ?

In which of the three folders do I put the image so that the compiler can find it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:30:04.357

Android 会自动缩放并且在某些情况下可以正常工作，但它不适用于许多，尤其是带有重要细节（如文本）的小图像。缩小较大的图像会使这些细节变得模糊。放大较小的图像会更糟。这就是为什么图标文件在 GUI 的早期就具有多分辨率的原因。也就是说，文本缩放非常复杂。询问任何字体设计师，并注意到 Adob​​e 建立了一家自动执行算法的公司。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:33:24.243

您可以将图像放在常规的可绘制文件夹中。这样任何手机都可以找到它。

虽然您可以以编程方式缩小图像，但缩小通常会减少图像细节并导致锯齿。

添加较小的资产也将减少较小手机的内存使用量。请记住，某些 Android 手机的内存非常糟糕（请参阅：HTC 状态），因此任何和所有节省都会有所帮助。

我建议您只用 Photoshop 自己缩小大图像。对于较小的图像，这没什么大不了的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T03:28:04.837

它在 mdpi 文件夹中。它会自动改变大小。但不推荐，因为图像质量下降。

# c# - How can i use interop excel on c++

> ID：11183111
> 
> 赞同：1
> 
> 时间：2012-06-25T03:21:02.237
> 
> 标签：c#, visual-studio-2010, c++-cli, office-interop, excel-interop

I'm having a big problem porting C# code to C++ code. I'm trying to save all my `datagridview` info into an Excel file but it's giving me a lot of errors. These are my 2 headers and I already added the interop dll. I'm just having problems cause I've found a lot of C# info but not C++ and I'm still a student.

```
using namespace Microsoft::Office::Interop::Excel;

#define Excel   Microsoft::Office::Interop::Excel 
```

// Here is the button:

```
Excel::Application^ xlApp =gcnew Excel::ApplicationClass();
Excel::Workbook^ xlWorkBook=xlApp->Workbooks->Add(Type::Missing); 
Excel::Worksheet xlWorkSheet =(Excel::Worksheet)xlWorkBook::Worksheets->get_Item(1); 
object misValue = System->Reflection->Missing->Value;

int i = 0;
int j = 0; 

for (i = 0; i <= DGV_ComprasUsuarios->RowCount  - 1; i++)
{
    for (j = 0; j <= DGV_ComprasUsuarios->ColumnCount  - 1; j++)
    {
        DataGridViewCell cell = DGV_ComprasUsuarios[j, i];
        xlWorkSheet.Cells[i + 1, j + 1] = cell->Value;
    }
}

xlWorkBook::SaveAs("csharp.net-informations.xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
xlWorkBook::Close(true, misValue, misValue);
xlApp::Quit();

releaseObject(xlWorkSheet);
releaseObject(xlWorkBook);
releaseObject(xlApp);

MessageBox.Show("Excel file created , you can find the file c:\\csharp.net-informations.xls"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T20:07:04.837

这是我测试工作的代码。我唯一注意到的是这些值在小数点后 6、7 或 8 位后四舍五入。这应该没什么大不了的。

```
 System::Void yourForm::saveAttenuDataGridViewCalValues(
                 System::Windows::Forms::DataGridView^ DataGridView1)
     {
         Excel::Application^ xlApp = nullptr ;
         Excel::Workbook^ xlWorkBook = nullptr;
         Excel::Worksheet^ xlWorkSheet = nullptr;
         Object^ misValue = System::Reflection::Missing::Value;

         xlApp = gcnew Excel::ApplicationClass();
         xlWorkBook = xlApp->Workbooks->Add(misValue);
         xlWorkSheet = static_cast<Excel::Worksheet^>(xlWorkBook->Worksheets->Item[1]);
         int i = 0;
         int j = 0; 

         for (i = 0; i <= dataGridView1->RowCount  - 1; i++)
         {
             for (j = 0; j <= dataGridView1->ColumnCount  - 1; j++)
             {
                 DataGridViewCell^ cell = dataGridView1[j, i];
                 xlWorkSheet->Cells[i + 1, j + 1] = cell->Value;
             }
          }

          xlWorkBook->SaveAs("cppCli.net-informations.xls", Excel::XlFileFormat::xlWorkbookNormal, 
                             misValue, misValue, misValue, misValue,           
                             Excel::XlSaveAsAccessMode::xlExclusive, misValue, misValue, misValue, 
                             misValue, misValue);
          xlWorkBook->Close(true, misValue, misValue);
          xlApp->Quit();

           MessageBox::ShowMessage("Excel file created , you can find the file cppCli.net-
                                   informations.xls", false);
       } 
```

# zend-framework - Zend Custom ViewScript for Form 不呈现文件元素

> ID：11183127
> 
> 赞同：0
> 
> 时间：2012-06-25T03:23:23.367
> 
> 标签：zend-framework, zend-form, zend-form-element

我为 zend 表单创建了一个自定义视图脚本。在表单中，有一个文件元素。当我运行代码`echo $this->element->elementname->renderViewHelper()`时，它可以在除文件元素之外的所有元素上正常工作。当我在自定义视图脚本中的文件元素上运行以下代码时，出现以下错误：`Uncaught exception 'Zend_Form_Element_Exception' with message 'Decorator by name ViewHelper does not exist'`

```
<?php if($this->element->avatarimage->hasErrors()):?>
        <div class="control-group error">
    <?php else: ?>
        <div class="control-group">
    <?php endif;?>
        <label for="avatarimage" class="control-label">Avatar Image</label>
        <div class="controls">
            <?php echo $this->element->avatarimage->renderViewHelper();?>
            <?php if($this->element->avatarimage->hasErrors()):
                    $messages = $this->element->avatarimage->getMessages();
                    $messages = array_values($messages);
                    $message  = $messages[0];
                    echo '<span class="help-inline">'.$message.'</span>';
                endif;
            ?>              
        </div>
    </div> 
```

如何将我的文件元素合并到我的自定义表单视图脚本中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T18:19:15.427

这绝对应该有效。

```
<? echo $this->element->avatarimage->renderFile(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:55:04.870

试试这样：

```
<?php echo $this->element->avatarimage;?> 
```

# backbone.js - Backbone.Marionette 中的 itemview 和布局中的额外 div

> ID：11183130
> 
> 赞同：9
> 
> 时间：2012-06-25T03:23:48.483
> 
> 标签：backbone.js, marionette

我正在尝试 Backbone.Marionette，我对为什么我的布局和 ItemViews 不断生成额外的 div 感到困惑。

顺便说一句，例如在咖啡中。

```
AppLayout = Backbone.Marionette.Layout.extend
  template: "#my-layout",

  regions:
    menu: "#menu",
    content: "#content"

MyMenuView = Backbone.Marionette.ItemView.extend
  template: '#project_wiz_nav_template'

MyContentView = Backbone.Marionette.ItemView.extend
  template: '#project_setup_template'

MyApp = new Backbone.Marionette.Application()

MyApp.addRegions
  mainRegion: '#project'

MyApp.addInitializer ->
  layout = new AppLayout()
  MyApp.mainRegion.show(layout)

  layout.menu.show(new MyMenuView())
  layout.content.show(new MyContentView())

MyApp.start() 
```

这是 index.html 包含的内容：

```
<div id='project'></div>
<script type='text/template' id='project_wiz_nav_template'> <h2>HI</h2> </script>
<script type='text/template' id='project_setup_template'> <h2>WORLD</h2> </script>
<script id="my-layout" type="text/template">
  <h2>Hello!</h2>
  <div id="menu"></div>
  <div id="content"></div>
</script> 
```

这是它产生的：

```
<div id="project">
  <div>
    <h2>Hello!</h2>
    <div id="menu">
      <div> 
        <h2>HI</h2> 
      </div>
    </div>
    <div id="content">
      <div> 
        <h2>WORLD</h2> 
      </div>
    </div>
  </div>
</div> 
```

如您所见，它不断为视图和布局生成额外的 div。我试过添加`el: '#menu'`，`el: '#content'`但无济于事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T12:44:07.683

这不是因为木偶。Backbone 默认为你生成一个`<div>`类。`tagName`您可以通过属性设置标签。有关此问题的重复项，请参阅对问题的评论。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T19:56:02.277

一个 hacky 解决方法，但 jQuery 的最接近（）实际上为我完成了这项工作。`myView.el`我没有直接使用返回的，而是使用`$(myView.el).closest("div").html()`- 正如我所说的那样，hacky，但作为一个短期修复它正在工作。
我正在修改本教程：[http](http://davidsulc.com/blog/2013/02/03/tutorial-nested-views-using-backbone-marionettes-compositeview/comment-page-1/#comment-3801) ://davidsulc.com/blog/2013/02/03/tutorial-nested-views-using-backbone-marionettes-compositeview/comment-page-1/#comment-3801 ，这需要嵌套模型并使用 Bootstrap 创建手风琴视图。我想对他的起点做同样的事情，只使用 jQueryUI 手风琴小部件，这就是我需要返回未包装视图的原因——因此使用最接近（）进行过滤。
除了添加 jqueryUI 链接和更改返回的 HTML 之外，它运行良好：[http://dartsleague.parentleafarm.com/superheroes/](http://dartsleague.parentleafarm.com/superheroes/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-25T03:57:29.757

指定您的 el 属性。我认为这将解决它：

[http://documentcloud.github.com/backbone/#View-el](http://documentcloud.github.com/backbone/#View-el)

# java - 如何检索搜索引擎查询结果的 HTML？

> ID：11183132
> 
> 赞同：1
> 
> 时间：2012-06-25T03:24:21.267
> 
> 标签：java, html

我正在尝试使用 Java 检索 Google 搜索查询结果的 html。也就是说，如果我在 Google.com 中搜索特定短语，我想检索结果网页的 html（包含指向可能匹配项的链接及其描述、URL 等的页面）。

我尝试使用在相关帖子中找到的以下代码来执行此操作：

```
import java.io.*;
import java.net.*;
import java.util.*;

public class Main {

    public static void main (String args[]) {

        URL url;
        InputStream is = null;
        DataInputStream dis;
        String line;

        try {
            url = new URL("https://www.google.com/#hl=en&output=search&sclient=psy-ab&q=UCF&oq=UCF&aq=f&aqi=g4&aql=&gs_l=hp.3..0l4.1066.1471.0.1862.3.3.0.0.0.0.382.1028.2-1j2.3.0...0.0.OxbV2LOXcaY&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=579625c09319dd01&biw=944&bih=951");
            is = url.openStream();  // throws an IOException
            dis = new DataInputStream(new BufferedInputStream(is));

            while ((line = dis.readLine()) != null) {
                System.out.println(line);
            }
        } catch (MalformedURLException mue) {
             mue.printStackTrace();
        } catch (IOException ioe) {
             ioe.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException ioe ) {
                // nothing to see here
            }
        }
    }
} 
```

来自：[你如何以编程方式在 Java 中下载网页](https://stackoverflow.com/questions/238547/how-do-you-programmatically-download-a-webpage-in-java)

此代码中使用的 URL 是通过从 Google 主页执行 Google 搜索查询获得的。出于某种原因，我不明白，如果我在 Web 浏览器的 URL 栏中写下要搜索的短语，然后在代码中使用生成的搜索结果页面的 URL，我会收到 403 错误。

但是，此代码没有返回搜索查询结果页面的 html。相反，它返回了 Google 主页的源代码。

经过进一步研究，我注意到如果您查看谷歌搜索查询结果的源代码（通过右键单击搜索结果页面的背景并选择“查看页面源”）并将其与谷歌主页的源代码进行比较, 它们都是相同的。

如果不是查看搜索结果页面的源代码，而是保存搜索结果页面的 html（通过按 ctrl+s），我可以获得我正在寻找的 html。

有没有办法使用 Java 检索搜索结果页面的 html？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T03:45:12.327

与其从标准的谷歌搜索解析生成的 HTML 页面，不如查看官方的[自定义搜索 api](https://developers.google.com/custom-search/v1/overview)以以更可用的格式从谷歌返回结果。API 绝对是要走的路；否则，如果 Google 要更改 google.com 前端 html 的某些功能，您的代码可能会简单地中断。该 API 旨在供开发人员使用，您的代码将不那么脆弱。

但是，要回答您的问题：仅根据您提供的信息，我们无法真正为您提供帮助。您的代码似乎检索了 stackoverflow 的 html；从您链接到的问题中精确复制和粘贴代码。您是否尝试过更改代码？您实际尝试使用哪个 URL 来检索 Google 搜索结果？

我尝试使用运行您的代码`url = new URL("http://www.google.com/search?q=test");`，但我个人收到 HTTP 错误 403 禁止。对问题的快速搜索表明，如果我没有在 Web 请求中提供 User-Agent 标头，则会发生这种情况，尽管如果您实际上返回的是 HTML ，这并不能完全帮助*您。*如果您希望获得特定帮助，则必须提供更多信息 - 尽管切换到自定义搜索 API 可能会解决您的问题。

* * *

编辑：原始问题中提供的新信息；现在可以直接回答问题了！

在对 java 发送的 web 请求进行数据包捕获并应用一些基本调试后，我发现了你的问题......让我们来看看！

这是 Java 使用您提供的示例 URL 发送的 Web 请求：

```
GET / HTTP/1.1
User-Agent: Java/1.6.0_30
Host: www.google.com
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive 
```

请注意，该请求似乎忽略了大部分 URL……只留下“GET /”。这很奇怪。我不得不查一下这个。

根据 Java URL 类的文档（这是所有网页的标准），`A URL may have appended to it a "fragment", also known as a "ref" or a "reference". The fragment is indicated by the sharp sign character "#" followed by more characters ... This fragment is not technically part of the URL.`

让我们看一下您的示例网址...

`https://www.google.com/#hl=en&output=search&sclient=psy-ab&q=UCF&oq=UCF&aq=f&aqi=g4&aql=&gs_l=hp.3..0l4.1066.1471.0.1862.3.3.0.0.0.0.382.1028.2-1j2.3.0...0.0.OxbV2LOXcaY&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=579625c09319dd01&biw=944&bih=951`

请注意“#”是文件路径中的第一个字符？Java 只是忽略了“#”之后的所有内容，因为尖号仅由客户端/Web 浏览器使用 - 这给您留下了 url `https://www.google.com/`。嘿，至少它按预期工作！

我不能确切地告诉你谷歌在做什么，但尖锐的符号 url 绝对意味着谷歌正在通过一些客户端（ajax / javascript）脚本返回查询结果。我敢打赌，如果没有正确的标头，您直接发送到服务器的任何查询（即没有“#”符号）都会返回 403 禁止错误 - 看起来他们鼓励您使用 API :)

编辑2：根据张腾吉对问题的回答，这里是返回谷歌查询“测试”结果的工作代码

```
 URL url;
    InputStream is = null;
    DataInputStream dis;
    String line;
    URLConnection c;

    try {
        url = new URL("https://www.google.com/search?q=test");
        c = url.openConnection();
        c.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168");
        c.connect();
        is = c.getInputStream();
        dis = new DataInputStream(new BufferedInputStream(is));
        while ((line = dis.readLine()) != null) {
            System.out.println(line);
        }
    } catch (MalformedURLException mue) {
         mue.printStackTrace();
    } catch (IOException ioe) {
         ioe.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException ioe ) {
            // nothing to see here
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:45:14.217

我建议你试试[http://seleniumhq.org/](http://seleniumhq.org/)

google上有一个很好的搜索教程

[http://code.google.com/p/selenium/wiki/GettingStarted](http://code.google.com/p/selenium/wiki/GettingStarted)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-26T08:18:49.927

您没有在代码中设置用户代理。

`URLConnection.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168");`

或者您可以阅读“http://www.google.com/robots.txt”。该文件告诉您 google 服务器允许哪个 url。

下面的代码是成功的。

```
package org.test.stackoverflow;

import java.io.*;
import java.net.*;
import java.util.*;

public class SearcherRetriver {
    public static void main (String args[]) {

        URL url;
        InputStream is = null;
        DataInputStream dis;
        String line;
        URLConnection c;

        try {
            url = new URL("https://www.google.com.hk/#hl=en&output=search&sclient=psy-ab&q=UCF&oq=UCF&aq=f&aqi=g4&aql=&gs_l=hp.3..0l4.1066.1471.0.1862.3.3.0.0.0.0.382.1028.2-1j2.3.0...0.0.OxbV2LOXcaY&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=579625c09319dd01&biw=944&bih=951");
            c = url.openConnection();
            c.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168");
            c.connect();
            is = c.getInputStream();
            dis = new DataInputStream(new BufferedInputStream(is));
            while ((line = dis.readLine()) != null) {
                System.out.println(line);
            }
        } catch (MalformedURLException mue) {
             mue.printStackTrace();
        } catch (IOException ioe) {
             ioe.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException ioe ) {
                // nothing to see here
            }
        }
    }
} 
```

# mysql - EXPLAIN 能否提供更多的查询计划？

> ID：11183135
> 
> 赞同：2
> 
> 时间：2012-06-25T03:24:56.900
> 
> 标签：mysql, sql-server, performance, oracle, informix

了解给定 SQL 语句的磁盘读取/写入、内存、CPU 等统计信息也会很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T04:29:07.130

Oracle Explain 工具是一种成本估算工具，而不是资源消耗的预测器。您可以查询 Oracle 中的字典（例如，V$SQLAREA 视图）以了解给定 SQL 语句的实际资源消耗。

顺便说一句，两个 SQL 语句可能会产生相同的执行计划，但 Oracle 可能会将其视为不同的 SQL 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:42:15.627

标签中有 4 种不同的 DBMS。它们中的每一个都通过不同的机制提供有关查询的大量额外信息——通常不是通过 EXPLAIN 本身，这是优化器预测查询成本而不是记录它的成本的方式。然而，在每个 DBMS 中完成此操作的机制完全不同，远远超出了除事实标准之外的任何东西（并且每个 DBMS 都是其自己的事实标准）。

# xslt-1.0 - 调用 XSLT 模板并将所有输出保存到变量

> ID：11183138
> 
> 赞同：6
> 
> 时间：2012-06-25T03:25:47.397
> 
> 标签：xslt-1.0

我想调用模板并将输出保存到变量中。我想保存包括 HTML 标记在内的*所有*输出，但事实并非如此。

例如，以这个简单的 XSLT 为例：

```
<xsl:call-template name="demonstration">

<xsl:template name="demonstration">
    <p>Just a test</p>
</xsl:template> 
```

这个简单的模板将输出`<p>Just a test</p>`到 HTML 页面。如果我查看页面源代码，我会看到（当然）。现在以使用相同模板为例，但不只是输出到 HTML，我想将输出保存到一个变量：

```
<xsl:variable name="test">
    <xsl:call-template name="demonstration">
</xsl:variable>
<xsl:value-of select="$test"/>

<xsl:template name="demonstration">
    <p>Just a test</p>
</xsl:template> 
```

查看变量显示现在唯一的输出是`Just a test`.

HTML 标记去哪儿了？我希望能够将调用模板的输出保存到变量中，但我也需要 HTML 标记。

有没有办法在调用这样的模板时避免丢失 HTML 标签？是否有不同的方式来编写我的模板？也许我错过了一个设置？我试过`disable-escape-encoding`了，但这没什么区别（至少在 Safari 中）。

我更喜欢使用模板来满足这两种需求：我希望能够调用它并将输出放在 HTML 页面中以供查看。我还希望能够将调用包装在一个变量中，但重要的是这两种调用方法都包括模板中指定的所有 HTML 标记/标记。

**编辑：**

到目前为止，我已经尝试了两个发布的答案，但`copy-of`结果与`value-of`. 实际上，我没有使用`value-of`，我只是在展示如何复制问题。这是对我正在尝试做的事情的更彻底的解释。

有一个样式表，用于转换从 REST 响应接收到的相当大的 XML。样式表的输出方法设置为 html。

此样式表中的一个模板对如何在表格中显示多达 4 行数据进行了大量决策。有 2 列，一列用于标签，另一列用于数据。

所做的决策包括标签的文本是什么以及什么类 - 有时标签是绿色的，有时是红色的，等等。数据列可以包含文本和/或数字。有些文本可能是粗体，有些可能是彩色的。有许多先决条件决定了这些属性。

如果我要显示单个项目的详细信息，我会使用此模板完成，但其中一个项目可以选择多个属性。例如，可能有尺寸和颜色。根据用户选择的尺寸或颜色，价格可能会有所不同，特定商品可能会缺货，如果价格不同，那么它会给用户带来不同的节省。不同的商品可能有免费送货服务，或者可能仅可用于预购。有很多属性。

所以我有一个模板，它可以对所有这些先决条件进行任何化处理，并构造一个`<tr><td></td><td></td></tr>`由一些不那么简单的逻辑派生出来的非常简单的文本和数据。

我已经模块化了这个模板，以便我可以为任何一个项目调用它。它是参数化的，所以我可以指定标签文本、数据、类和其他一些东西。

当网页加载时，默认/主要项目与一般信息一起显示 - 例如价格范围和节省范围等。

但是当用户选择颜色或尺寸时，这些表行需要使用正确的数据进行更新。我已经处理了来自 XML 的数据，并且发出另一个服务器请求会非常昂贵，所以我所做的是创建一个 JSON 字符串数组，其中包含所有不同类型项目的所有数据。我将此 JSON 保存在隐藏输入控件的 value 属性中。是的，还有其他方法可以做到这一点，但这很有效，而且对我来说似乎是可以管理的。

由于创建这些表行的逻辑位于服务器上的样式表中，因此我对所有项目执行所有这些逻辑，然后将计算得到的字符串传递给客户端。这是一个示例：

```
<input id="hfData" type="hidden" value="[
{"ProductID": "00001", "Color": "Beige", "Size": "14"},
{"ProductID": "00002", "Color": "Black", "Size": "14"},
{"ProductID": "00003", "Color": "Blue", "Size": "10"},
{"ProductID": "00004", "Color": "Pink", "Size": "10"},
{"ProductID": "00005", "Color": "Yellow", "Size": "10"}
]"
/> 
```

然后，我有一个小的 JQuery 脚本，只要用户更改下拉列表选择或更改属性，就会触发该脚本。该脚本解析上述 JSON 并确定当前配置的 ProductID 是什么。

注意：由于输入控件的 value 属性如果像这样散布双引号将无效，因此它们实际上都是`&quot;`. 我在这里显示双引号以便于查看。

确定 ProductID 后，页面会更新许多不同的详细信息，如本编辑前面所述。这些细节来自我创建的另一个 JSON 对象——同样，因为所有产品细节在 XSLT 样式表中都是已知的，这就是我创建 JSON 字符串数组的地方。

```
<input id="hfDetails" type="hidden" value="[
{"ProductID": "00001", "ListPrice": "<tr class="collapsed"><td class="datalabel">List Price:</td><td class="datainfo"></td></tr>", "YourPrice": "<tr><td class="datalabel">Price:</td><td class="datainfo">$23.99 & is elegible for <span class="freeshipping">FREE</span> shipping <a href="#">Details</a></td></tr>"},

... etc, etc, etc ...

]"
/> 
```

如您所见，上面的隐藏输入有一个 value 属性，其中包含一个包含 HTML 标记的 JSON 对象。我见过这项工作，但为了让 JSON 正常工作，我必须转义所有标签。与号必须是`&amp;`，然后是`&lt;`，`&gt;`并且还用反斜杠转义所有引号。我已经将它全部编码并且它工作 - 尽管看起来很讨厌，但它工作并且它阻止我不得不往返于服务器 - 它阻止我将所有逻辑放在客户端上创建这些字符串.

这些都与我遇到的问题无关，但我希望摆脱 JSON 和 XSL/XML 教授的所有评论，他们挑战我在一个句子中使用 JSON 和 XSLT（或 HTML） ...

现在，我希望我能（非常简单地）展示我遇到的确切问题。首先，它与 JSON 几乎没有关系。`xsl:value-of`它几乎与使用over无关`xsl:copy-of`。

在这里，我创建了一个隐藏的输入字段，其 value 属性包含一个 JSON 字符串：

```
<input>
  <xsl:attribute name="id">
    <xsl:value-of select="$id"/>
  </xsl:attribute>
  <xsl:attribute name="type">
    <xsl:text>hidden</xsl:text>
  </xsl:attribute>
  <xsl:attribute name="runat">
    <xsl:text>server</xsl:text>
  </xsl:attribute>
  <xsl:attribute name="value">
    <xsl:text>[</xsl:text>

    <xsl:for-each select="Items/Item">
          <xsl:call-template name="JSONItemDetails">
            <xsl:with-param name="offerNode" select="Offers"/>
            <xsl:with-param name="lastitem" select="position() = last()"/>
          </xsl:call-template>
    </xsl:for-each>

    <xsl:text>]</xsl:text>
  </xsl:attribute>
</input>

<xsl:template name="JSONItemDetails">
    <xsl:param name="offerNode" select="."/>
    <xsl:param name="attributesNode" select="ItemAttributes"/>
    <xsl:param name="listprice" select="0"/>
    <xsl:param name="lastitem" select="false()"/>

    <!-- Product ID -->
    <xsl:text>{</xsl:text>
    <xsl:text>&quot;ProductID&quot;: </xsl:text>
    <xsl:text>&quot;</xsl:text>
    <xsl:value-of select="./ProductID"/>
    <xsl:text>&quot;,</xsl:text>

    <xsl:for-each select="msxml:node-set($offerNode)">

        <!-- Title -->
        <xsl:text>&quot;Title&quot;: </xsl:text>
        <xsl:text>&quot;</xsl:text>
        <xsl:call-template name="escapeQuote">
            <xsl:with-param name="pText">
            <xsl:call-template name="title">
                <xsl:with-param name="node" select="$attributesNode" />
            </xsl:call-template>
            </xsl:with-param>
        </xsl:call-template>
        <xsl:text>&quot;,</xsl:text>

        <!-- List Price -->
        <xsl:text>&quot;ListPrice&quot;: </xsl:text>
        <xsl:text>&quot;</xsl:text>
        <xsl:call-template name="escapeQuote">
            <xsl:with-param name="pText">
            <xsl:call-template name="DataTableRow">
                <xsl:with-param name="label" select="'List Price:'" />
                <xsl:with-param name="data" select="./Price/FormattedPrice" />
                <xsl:with-param name="dataid" select="'listprice'" />
            </xsl:call-template>
            </xsl:with-param>
        </xsl:call-template>
        <xsl:text>&quot;</xsl:text>

    </xsl:for-each>

    <xsl:text>}</xsl:text>
    <xsl:if test="$lastitem != true()">
        <xsl:text>,</xsl:text>
    </xsl:if> 
```

DataTableRow 模板做了很多事情，主要提供一致性，但也清理了所有用于创建行和列的杂散 HTML 标记。这是那个模板。

```
<xsl:template name="DataTableRow">
    <xsl:param name="label" select="''"/>
    <xsl:param name="data" select="''"/>
    <xsl:param name="dataid" select="''"/>
    <xsl:param name="concat" select="''"/>
    <xsl:param name="class" select="''"/>

    <tr>
        <xsl:choose>
        <xsl:when test="$data = not(string(.))">
          <xsl:attribute name="style">
            <xsl:text>display:none</xsl:text>
          </xsl:attribute>
        </xsl:when>
        <xsl:otherwise>
           <xsl:attribute name="style">
           <xsl:text>display:block</xsl:text>
        </xsl:attribute>
        </xsl:otherwise>
        </xsl:choose>

        <!-- Label Column -->
        <td>
            <div>
                <xsl:choose>
                <xsl:when test="$class = 'bigmaroon'">
                    <xsl:attribute name="class">
                        <xsl:text>datalabel maroon</xsl:text>
                    </xsl:attribute>
               </xsl:when>
               <xsl:otherwise>
                    <xsl:attribute name="class">
                       <xsl:text>datalabel</xsl:text>
                    </xsl:attribute>
               </xsl:otherwise>
               </xsl:choose>
               <xsl:value-of select="$label"/>
           </div>
        </td>

        <!-- Data Column -->
        <td class="datainfo">
            <xsl:attribute name="id">
                <xsl:value-of select="$dataid"/>
            </xsl:attribute>

            <xsl:choose>
            <xsl:when test="$class = 'strike'">
                <strike>
                    <xsl:value-of select="$data" />
                </strike>
                <xsl:value-of select="$concat"/>
            </xsl:when>
            <xsl:when test="$class = 'maroon'">
                <span class="maroon">
                    <xsl:value-of select="$data" />
                </span>
                <xsl:value-of select="$concat"/>
            </xsl:when>
            <xsl:when test="$class = 'bigmaroon'">
                <span class="bigmaroon">
                    <xsl:value-of select="$data" />
                </span>
                <xsl:value-of select="$concat"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$data" />
                <xsl:value-of select="$concat" />
            </xsl:otherwise>
            </xsl:choose>
        </td>
    </tr> 
```

DataTableRow 模板有一些逻辑，每次我需要编写这些行中的一个时，这些逻辑都会很混乱。首先，所有这些行都必须存在于 HTML 中。如果没有数据，则将它们设置为`display:none`. 这很重要，因为除非有一个有效的选择器，否则我将无法用我的 JQuery 脚本中的数据填充它们......

问题是，毕竟，当像这样直接调用 DataTableRow 时，它工作得很好：

```
<xsl:call-template name="DataTableRow"/> 
```

在上述调用中，HTML 标记都输出到我的网页。他们看起来很好，他们的班级和风格是正确的。我可以从模板中的任何位置这样调用它，它工作得很好。我确定这里或那里存在错误，我可能会看到更好/更有效的编码方式，但它基本上适用于 HTML。

问题：当我在上面构建我的隐藏输入字段时，我无法获得任何 HTML 标签。存储在我的 JSON 字符串中的唯一值是 innerhtml。DataTableRow 从 JSONItemDetails 模板调用，而不是得到以下结果：

```
<tr><td>Some Label</td><td>Some Data</td></tr> 
```

我得到的结果

```
Some LabelSome Data 
```

提出这样一个简单问题的信息非常多，但我收到的回复似乎暗示我在处理 XSLT/HTML 中的 JSON 时做的不对。

谁能帮我解决我的问题？当我在 JSONItemDetails 中调用它以创建我的 JSON 字符串时，为什么从 DataTableRow 的输出中去除 HTML 标记？

**编辑＃2：**

我的代码发生了几件事，这些事情导致了 HTML 标签被剥离的问题。我终于弄清了导致问题的原因，现在我一直在尝试找出解决问题的方法。以下是附加说明。

我能够确认，`xsl:value-of`正在从模板调用的输出中剥离我的 HTML 标记。`xsl:copy-of`向我展示了我期望的标签。这对我了解问题所在有很大帮助，但它也让我能够识别其他问题。

1.  `xsl-copy`不能用于在标签的 value= 属性下输出。我明白为什么，尽管如果我朝着我要去的方向前进，我不知道如何处理这个问题。
2.  即使我找到了#1 的解决方案，我也必须弄清楚如何在我的 HTML 标记中转义双引号。即：双引号在 value= 属性中无效。我知道撇号会起作用，但是这些双引号是通过`xsl:attribute`在某些标签下使用来指定类或临时样式而创建的。我有一个模板，它用反斜杠转义双引号，但调用它也会去掉我的 HTML 标签，我不明白为什么 - 所以我不知道如何修复它。我将在下面发布此模板的代码。

如果我对上述两个问题有解决方法，我可以按照我一直在走的方向继续前进，但我愿意听取关于为什么我不应该在我的 JSON 中将数据与显示混合的建议。

我将两者混合是因为我不喜欢将显示逻辑放在我的 JQuery 脚本中的想法。我希望我的脚本对这个逻辑一无所知。在 JQuery 中使用这些 JSON 对象来深入到 ProductID 并替换表行很简单，如下所示：

```
 var details = $.parseJSON($("#[id*='hfDetails']").val());

        var filteredDetails = $.grep(details, function (n) {
            return n.ProductID == ProductID;
        });

        if (filteredDetails.length > 0) {
            var product = filteredDetails[0];

            $("div#title").html(product.Title);

            $("td#listprice").parent().html(product.ListPrice);
            $("td#price").parent().html(product.Price);
            $("td#yousave").parent().html(product.YouSave);
        } 
```

如果我按照 Dimitre 的建议从我的 JSON 字符串中删除显示，突然间我必须在我的 jquery 脚本中添加很多逻辑，不仅要提供`<tr>`和`<td>`格式化（类），还要包含包装实际数据的逻辑，例如`<strike`，、`<strong>`颜色规格和字体大小，甚至特定表格行是 a`display:block`还是 a `display:none`。我绝对不想在客户端的 JQuery 脚本中编写任何逻辑。

在我的 XSLT 模板中非常简单`xsl:for-each`地在服务器上创建这些字符串并将结果填充到我的 JSON 对象中，以便我可以使用上面的脚本。诚然，这是很难看的数据。

另请注意，无论我是否将显示与数据分开，如果只有一个项目具有单一显示的可能性，我仍然需要我用来处理我的 XML 的当前 XSLT 模板。如果只有一个产品，则 JSON 不会出现在图片中，因为页面上没有显示控件来更改产品的属性（颜色、尺寸等）。

我绝对想把这个“正确”编码，所以我当然很高兴听到经验。我只是认为没有人能在不知道让我到达那里的所有考虑因素的情况下有效地建议我支持或反对最终结果

这是（曾经）我用来转义双引号的模板：

```
<!--
Escape quotes with \ for JSON strings
-->
<xsl:template name="escapeQuote">
  <xsl:param name="pText" select="."/>

  <xsl:if test="string-length($pText) >0">
    <xsl:copy-of select="substring-before(concat($pText, '&quot;'), '&quot;')"/>

    <xsl:if test="contains($pText, '&quot;')">
      <xsl:text>\"</xsl:text>

      <xsl:call-template name="escapeQuote">
        <xsl:with-param name="pText" select="substring-after($pText, '&quot;')"/>
      </xsl:call-template>
    </xsl:if>
  </xsl:if>

</xsl:template> 
```

此模板从输入字符串中去除 HTML 标记。我这样称呼它：

```
<xsl:variable name="output3">
    <xsl:call-template name="escapeQuote">
        <xsl:with-param name="pText">
        <xsl:call-template name="DataTableRow">
            ... with-params ...
        </xsl:call-template>
        </xsl:with-param>
    </xsl:call-template>
</xsl:variable> 
```

马上做：

```
<xsl:copy-of select="$output3"/> 
```

显示 HTML 标记不再存在，因此也不存在双引号。但是，这样做会显示我所有的 HTML 标记：

```
<xsl:variable name="output3">
    <xsl:call-template name="DataTableRow">
        ... with-params ...
    </xsl:call-template>
</xsl:variable>
<xsl:copy-of select="$output3"/> 
```

感谢您阅读所有这些 - 顺便说一句，我看到其他帖子 XSL 代码的格式和颜色都很好。它更容易阅读，但我无法让它与我发布的代码一起使用。一切都是黑色文本和左对齐。我已经尝试纠正它，但它对我不起作用。

**编辑#3：**

Dimitre 评论说，引号可以在隐藏输入字段的 value 属性中按字面意思使用，所以我在心里做了一些试验。我所看到的任何地方似乎都有一个陷阱。

`<input value='something containing " literally'/>`

为了让我的`value=`内容用撇号而不是双引号括起来，我尝试`<input>`像这样创建我的隐藏：

```
<input>
  <xsl:attribute name="id">
    <xsl:value-of select="$id"/>
  </xsl:attribute>
  <xsl:attribute name="type">
    <xsl:text>hidden</xsl:text>
  </xsl:attribute>
  <xsl:attribute name="runat">
    <xsl:text>server</xsl:text>
  </xsl:attribute>
  <xsl:text> value='[</xsl:text>
  <xsl:copy-of select="$output"/>
  <xsl:text>]'</xsl:text>
</input> 
```

这不起作用，因为标签在关闭之后使用属性（及其内容）`<input...>`呈现。`value=``</input>`

所以我删除了`xsl:attribute`元素并用`xsl:text`. 不幸的是，使用`<`内部 a`xsl:text`无效并产生错误。所以我改变了`<`to`&lt;`以及相应的`>`. 这不会产生任何错误，但会导致整个`<input>`页面及其内容在呈现页面时显示为字符串。（我在 Firefox 中查看该页面）。

我没有尝试使用 CDATA 进行编码，因为我很确定这也不起作用，我会得到与后者相同的结果——所有内容都显示为字符串。

*耸耸肩*

**编辑＃4：**

OJay 建议放弃将我的 JSON 放入隐藏字段的 value= 属性的想法。我一直都在考虑这一点，但不确定我必须更改多少代码。当他展示了我需要改变多少的例子时，我决定去做。

不幸的是，还有另一个问题。

```
<script type="text/javascript">

var hfDetails = [{ProductID: '000001',Title: '<h3>American Apparel Sheer Jersey Chemise X-Small-Asphalt</h3>',Condition: 'New',ListPrice: '<tr style="display:block">
    <td>
      <div class="datalabel">0List Price:</div>
    </td>
    <td class="datainfo" id="listprice">$24.99</td>
  </tr>',Price: '<tr style="display:block">
    <td>
      <div class="datalabel maroon">Sale:</div>
    </td>
    <td class="datainfo" id="price"><span class="bigmaroon">$15.49</span></td>
  </tr>',YouSave: '<tr style="display:block">
    <td>
      <div class="datalabel">You Save:</div>
    </td>
    <td class="datainfo" id="yousave"><span class="maroon">$9.50 (38%)</span></td>
  </tr>'},

 ....

]
</script> 
```

这是来自渲染网页的粘贴。我收到“未终止的字符串文字”错误，它指向第一行之前的撇号`<tr>`- 在第二行。

我假设这是因为字符串有空格将其分布在几行上。空白是来自制作调用模板的原样。我不确定如何禁用此空白，或者这是否会有所作为。我将对此进行一些谷歌搜索，但有谁知道是否有办法为调用模板关闭空格？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T03:58:42.683

尝试`<xsl:copy-of select="$test">`代替 `<xsl:value-of ... />`

另请注意，`<xsl:value-of />`（`<xsl:copy-of />`就此而言），应该在模板内，而不是在根级别`<xsl:stylesheet >....</xsl:stylesheet>`- 在我的 XSLT 调试器中引发错误

所以对我有用的测试是

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">    
  <xsl:output method="xml" indent="yes"/>

  <xsl:variable name="test">
    <xsl:call-template name="demonstration" />
  </xsl:variable>

  <xsl:template match="/">
    <xsl:copy-of select="$test"/>
  </xsl:template>

  <xsl:template name="demonstration">
    <p>Just a test</p>
  </xsl:template>

</xsl:stylesheet> 
```

value-of 将获取变量的值，因为我们在 XML 中，所以该值将与节点的值相同，即标签之间的数据。Copy of 将准确输出完整的副本、标签和所有

编辑根据我开始的评论，我的意思是这样的：

从 XSLT

```
<script type="text/javascript">
var hfDetails = [{"ProductID": "00001", "ListPrice": '<tr class="collapsed"><td class="datalabel">List Price:</td><td class="datainfo"></td></tr>', "YourPrice": '<tr><td class="datalabel">Price:</td><td class="datainfo">$23.99 & is elegible for <span class="freeshipping">FREE</span> shipping <a href="#">Details</a></td></tr>'},

... etc, etc, etc ...

];
</script> 
```

而不是隐藏的输入字段。这将创建一个全局 javascript 数组对象。本质上跳过了所需的步骤

```
var details = $.parseJSON($("#[id*='hfDetails']").val()); 
```

你可以这样做

```
var details = hfDetails; 
```

并且没有更多的代码需要更改。

如果您担心撇号和引号的转义。一个可以用来在javascript中定义一个字符串，然后另一个可以安全地在字符串中使用，即

```
"ListPrice" : '<tr class="collapsed"><td class="datalabel">List Price:</td><td class="datainfo"></td></tr>' 
```

是有效的，所以是

```
"ListPrice" : "<tr class='collapsed'><td class='datalabel'>List Price:</td><td class='datainfo'></td></tr>" 
```

另请注意，您不必将对象的属性括在引号中，即

```
"ProductID" : "00001" 
```

只能是

```
ProductID : "00001" 
```

只要您的属性名称中没有空格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T03:53:49.803

> ```
> <xsl:value-of select="$test"/> 
> ```

**您必须使用`xsl:copy-of`（或`xsl:sequence`在 XSLT 2.0 中推荐） -- 而不是`xsl:value-of`.**

**[根据定义](http://www.w3.org/TR/1999/REC-xslt-19991116#value-of)**，属性`xsl:value-of`中表达式的求值结果的字符串值`select`

`<xsl:copy-of>``select`输出（按文档顺序）在其属性中指定的节点集的所有节点。或者，再次引用 W3C XSLT 1.0 规范：

> " *xsl:copy-of 元素可用于将节点集复制到结果树，而无需将其转换为字符串*"

**在 XSLT 2.0[`xsl:sequence`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#element-sequence)中，可用于以任何所需的顺序输出节点集的节点**。

# ajax - 在 fancybox 中加载第二个组合框

> ID：11183139
> 
> 赞同：0
> 
> 时间：2012-06-25T03:25:54.160
> 
> 标签：ajax, jquery, fancybox

我有一个带有 2 个花式框模式、州和城市的组合框。选择州后，我需要加载一个组合城市。我的代码：

```
<div id="city" class="hide">

    <asp:Literal ID="litCity" runat="server"></asp:Literal>
    <a href="#data">Trocar de Cidade</a>

</div>

<asp:UpdatePanel ID="updCity" runat="server" UpdateMode="Conditional">
<ContentTemplate>

    <div id="data" class="hide">

    <asp:HiddenField ID="hdnNovaCidade" runat="server" Value="" />
    <div class="row">

    <label for="drpState">Estado *</label>
    <asp:DropDownList ID="drpState" runat="server" AutoPostBack="True" > </asp:DropDownList>

    </div>

<div class="row">

    <label for="drpCity">Cidade *</label>
    <asp:DropDownList ID="drpCity" runat="server"></asp:DropDownList>

</div>

    <input id="btCidade" type="submit" value="Escolher Cidade" />

</div>
</ContentTemplate>
<Triggers>

    <asp:AsyncPostBackTrigger ControlID="btCarregaCidade" EventName="Click" />

</Triggers>
</asp:UpdatePanel> 
```

查询

```
$('[id$="drpState"]').change(function () {

    $('[id$="hdnState"]')[0].value = $(this).val();
    $('[id$="btCarregaCidade"]')[0].click();

}); 
```

发生的情况是页面在事件按钮后重新加载并关闭了fancybox。如何在不关闭模式的情况下加载组合框城市？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:40:45.143

我建议为此目的使用 Ajax..这里是详细的代码，首先在您的状态选择框附近放置一个空的 span 或 div，id=“citycontainer”

```
$('[id$="drpState"]').change(function () {
var stid = $(this).val();
var cityhtml = '';
         //call an ajax function to load the states
    $.ajax({
      url:'Your_url_containing_thephp_function_for_states',
      data : {'stateid',stid},
      dataType:'json',
      type: "POST",
      success:function(msg){
             cityhtml+='<select id="city">';
                if(count(msg)>0){
                for(i=0;i<msg.length;i++){

             cityhtml+='<option value="'+msg[i]['your_city_id_index']+'">'+msg[i]['your_city_name_index']+'</option>';
                 }
             }
$('#citycontainer').html(cityhtml);
      }    
});

});

//State.php (The php side)

$stateid = $_POST['stateid'];
$cities = someFuntionReturningCitiesbasedOnstateid($stateid); //must return as array
echo json_encode($cities);exit; 
```

# android - “私人”意图过滤器仅供自己的应用程序使用

> ID：11183145
> 
> 赞同：5
> 
> 时间：2012-06-25T03:27:14.633
> 
> 标签：android, intentfilter

我创建了一个文件资源管理器并注册

```
<action android:name="android.intent.action.GET_CONTENT" />
<category android:name="android.intent.category.DEFAULT" />
<category android:name="android.intent.category.OPENABLE" /> 
```

但我不希望我的内部文件资源管理器开始显示供用户选择何时另一个应用程序发送具有“可打开”类别的隐式意图。我该怎么做？我应该创建自己的动作名称吗？

我没有明确的，因为我希望用户在我的应用程序中选择其他文件资源管理器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-10T08:02:11.693

If it's important that only your own app is able to start one of your components, set the exported attribute to "false" for that component in the manifest.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T04:12:12.543

如果您问我-我认为对于您的情况，最好的方法是创建自己的意图过滤器（正如您在问题中所建议的那样），因为如果您声明您的活动以接收内置广播的系统-它就有意义。那么使用这个内置广播有什么意义呢，如果你从系统的角度来看有点“违反他的合同”，并且在某些情况下想忽略它？

如果您仍然决定使用此内置过滤器，尽管我已经建议了，那么实现您想要的方法是：

不是在清单中注册您的接收器，而是在您的第一个启动活动的 onCreate() 方法中注册，并在 onDestroy() 中取消注册他。

这样，当您的所有活动都不是前台时，您的活动将不会被注册 - 从用户的角度来看，这接近于哪个应用程序关闭的状态。

如果您不确定它是如何完成的，那就是这样：

```
private BroadcastReceiver mMyCustomReceiver = new  BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    registerReceiver(mMyCustomReceiver, IntentFilter.create(YOUR_FILTER_ACTION_COMMAND, YOUR_FILTER_DATA_TYPE));
}

@Override
protected void onDestroy() {
    unregisterReceiver(mMyCustomReceiver);
    super.onDestroy();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T04:32:53.993

我同意[Chris Stratton](https://stackoverflow.com/users/429063/chris-stratton)和[Tal Kanel](https://stackoverflow.com/users/1039461/tal-kanel)的观点。但是您可以在您的意图过滤器中使用特定的“数据”。文档说：

> 仅当过滤器同样未指定任何 URI 或数据类型时，既不包含 URI 也不包含数据类型的 Intent 对象通过测试。

因此，如果意图具有“可打开”类别并且没有与您的意图过滤器特定数据部分匹配的数据部分，则不会向用户显示您的内部文件浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-21T17:17:32.883

您可以使用“活动别名”来制作具有 android:exported="false" 和私有意图的活动的“副本”？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T04:23:08.477

如果您愿意通过显式意图调用您的活动（即，给出目标组件名称），那么您可以省略该活动的意图过滤器。

# c++ - 如何使生成的线程停止足够长的时间以使生成线程执行某些操作？

> ID：11183146
> 
> 赞同：2
> 
> 时间：2012-06-25T03:27:27.480
> 
> 标签：c++, multithreading, c++11

[另一个 SO 线程](https://stackoverflow.com/questions/1479945/setting-thread-priority-in-linux-with-boost/)解释了如何用`thread::native_handle`它来做 C++ 线程 API 之外的事情（例如，设置线程的优先级）。要点是：

```
std::thread t(functionToRun);
auto nh = t.native_handle());
// configure t using nh 
```

这种方法的问题在于，`functionToRun`在配置 t 的代码完成之前，它可能会执行任意时间（包括完成）。

我相信我们可以防止这种情况发生如下（未经测试）：

```
std::atomic<bool> configured(false);

std::thread t([&]{ while (!configured);   // spin until configured is true
                   functionToRun(); });
auto nh = t.native_handle();
// configure t using nh
configured = true; 
```

不幸的是，这会导致生成的线程旋转等待`configured`变为真。生成的线程最好在配置完成之前阻塞。

实现这一目标的一种方法似乎是使用互斥锁（也未经测试）：

```
std::mutex m;

std::unique_lock<std::mutex> lock(m);

std::thread t([&]{ std::lock_guard<std::mutex> lg(m);   // block until m available
                   functionToRun(); });
auto nh = t.native_handle();
// configure t using nh
lock.unlock();                                          // allow t to continue 
```

这似乎应该可以工作，但是从概念上讲，condvar 似乎更适合指示何时满足条件（配置完成）的工作。但是使用 condvar 需要上述所有条件，再加上一个 condvar，并且需要处理虚假唤醒的可能性，据我所知，这对于互斥锁来说不是问题。

有没有更好的方法来产生一个线程，然后让它立即停止，以便我可以使用它的本机句柄来配置它，然后再允许它进一步运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T07:23:52.153

当我希望延迟线程主函数的启动直到完成一些外部配置时，我使用未来。这避免了自旋等待，并且具有与互斥锁或 condvar 相同的阻塞属性，但提供了更清晰的意图。使用此模式，您可以将示例编写为：

```
std::promise<void> p;
std::thread t([&p]{
    p.get_future().wait();
    thread_func();
}

auto nh=t.native_handle();
// configure nh
p.set_value(); 
```

我特别喜欢在多线程测试中使用这种模式`shared_future`——这样你可以确保所有线程都在运行并准备好在测试开始之前运行。

# css - 绝对定位图像的水平居中

> ID：11183149
> 
> 赞同：0
> 
> 时间：2012-06-25T03:28:16.377
> 
> 标签：css, position, centering

[这](http://jsfiddle.net/MtV9B/)是一个居中的小提琴，但图像用`position:relative`而不是`position:absolute`.

[这](http://jsfiddle.net/9nkDS/)是另一个绝对定位但不居中的小提琴。

请注意，图像具有**可变宽度**。

图像**必须居中**的原因是因为我想淡出一个，而另一个在它后面淡入。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:40:34.467

更好的解决方案是根本不使用 CSS 位置属性。

尝试将图像显示为块元素，并告诉浏览器在左右两侧使用自动边距。

```
#imagesContainer img{
    display:block;
    margin:0 auto;
} 
```

概念证明小提琴（添加边框只是为了让您可以看到图像实际上居中）：http: [//jsfiddle.net/9nkDS/5/](http://jsfiddle.net/9nkDS/5/)

# php - 任何人都知道为什么这个 MYSQL INSERT 不起作用？

> ID：11183152
> 
> 赞同：0
> 
> 时间：2012-06-25T03:28:46.553
> 
> 标签：php, mysql, sql

```
$con = mysql_connect("localhost","root","");
if (!$con) die('Could not connect: ' . mysql_error());
mysql_select_db("pilot", $con);

$sql = "INSERT INTO logs (id, userid, date, plane, from, to, blocksoff, takeoff,
landing, blockson, flighttime, traveltime, tachobefore, tachoafter, tacho, 
hobbsbefore, hobbsafter, hobbs, landings) VALUES ('$nfid', '$nfuserid', 
'$nfdate', '$nfplane', '$nffrom', '$nfto', '$nfblocksoff', '$nftakeoff', 
'$nflanding', '$nfblockson', '$nfflighttime', '$nftraveltime', '$nftachobefore', 
'$nftachoafter', '$nftacho', '$nfhobbsbefore', '$nfhobbsafter', '$nfhobbs',
'$nflandings')";

mysql_query($sql); 
```

$sql 没有任何问题，它似乎只是不会查询.. :(

```
id|userid=int(11)  
date=date  
plane|from|to=text  
blocksoff|takeoff|landing|blockson=time  
flighttime|traveltime|tachobefore|tachoafter|tacho|hobbsbefore|hobbsafter|hobbs|landings=double 
```

所有的 $ 变量都来自一个文本框（如果重要的话）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T03:33:39.597

可能有些列名是MySql 的保留字（尤其是`from`and `to`）。请逃离他们。

```
INSERT INTO logs (`id`, userid, date, plane, `from`, `to` ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:32:47.663

您应该始终检查错误：

```
$result = mysql_query($sql);
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T03:33:36.660

有点开放式的问题......

您的任何变量是否返回 NULL 值？如果您尝试将 NULL 插入数据库，并且数据库列未设置为接受 NULL 值，则可能会导致错误。

您需要查看查询实际在做什么。如果文本框中有任何单引号或其他无效字符，那可能会搞砸你。

此外，为了您自己的个人进步，请查找 PDO。它可以帮助您通过使用准备好的语句编写更安全的查询。 [http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

# css - @font 不能从 fontsquirrel 工作

> ID：11183154
> 
> 赞同：-1
> 
> 时间：2012-06-25T03:29:04.823
> 
> 标签：css, html, font-face

我正在尝试使用这种字体：[http](http://www.fontsquirrel.com/fontfacedemo/eb-garamond) ://www.fontsquirrel.com/fontfacedemo/eb-garamond 所以我下载了类型工具包并将其放在正确的目录中。

**CSS**：

`@font-face {`

 ````
font-family: 'EBGaramondSC';
src: url('/EBGaramondSC-webfont.eot');
src: url('/EBGaramondSC-webfont.eot?#iefix') format('embedded-opentype'),
     url('/EBGaramondSC-webfont.woff') format('woff'),
     url('/EBGaramondSC-webfont.ttf') format('truetype'),
     url('/EBGaramondSC-webfont.svg#EBGaramondRegular') format('svg');
font-weight: normal;
font-style: normal;
}

p.style2 {font: 18px/27px 'EBGaramondSC', Arial, sans-serif;} 
````  `**HTML**： `[p class="style2"] Alfab Solutions, LLC is a custom security firm who focuses on rural secruity solutions. We offer rugged, secure camera systems which integrate into our SSL encrypted website. We provide 24/7 access to your security footage, so you can have peace of mind that your assets are safe. [/p] Ignore brackets`

Firebug 甚至不显示正确的字体图像。是什么赋予了？
我有一个奇怪的目录结构。索引是 .php，它是从模板文件生成的。所以我的字体应该在模板目录中，因为它们只影响那里的html。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T03:35:31.347

如果您查看 CSS 代码，您会注意到 url 都是绝对路径（您知道相对路径和绝对路径吗？如果不知道，请阅读它们：D）

```
@font-face {
   src: url('/EBGaramondSC-webfont.eot');
} 
```

注意`/`?

它应该是：

```
src: url('/templates/EBGaramondSC-webfont.eot'); 
```

或者，如果字体文件与 CSS 位于同一文件夹中：

```
src: url('EBGaramondSC-webfont.eot'); 
```

打开 Chrome 检查器（输出 404 警告）告诉我：

> 加载资源失败：服务器响应状态为 404（未找到）[http://www.alfabsolutions.com/EBGaramondSC-webfont.svg](http://www.alfabsolutions.com/EBGaramondSC-webfont.svg)

所以，是的，那个！祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:35:56.397

查看您的站点和代码，它正在尝试从 / 加载字体。尝试将 @font-face 声明中的路径更改为 /template/* 并查看它是否有效。

问候， 拉吉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T03:38:45.697

您只需要更改 CSS 文件，`style.css`使`src`属性指向每个字体文件的正确路径：

**不正确**

```
src: url('/EBGaramondSC-webfont.eot'); 
```

**已更正**

```
src: url('/templates/EBGaramondSC-webfont.eot'); 
````

# c - 快速排序算法的加速超线性

> ID：11183155
> 
> 赞同：0
> 
> 时间：2012-06-25T03:29:21.483
> 
> 标签：c, quicksort

我已经实现了快速排序的顺序版本和并行版本。

我已经在我的实现中验证了快速排序的最坏情况的加速：源数组已经排序，在我的情况下，枢轴始终是数组的第一个元素。

因此，分区生成两个集合，一个包含小于枢轴的元素，另一个包含高于枢轴的元素，即 n - 1 个元素，其中 n 是作为快速排序函数的参数传递的数组元素的数量。递归深度的大小为 N -1，其中 N 是作为快速排序函数的参数传递的原始数组的元素数。

Obs：集合实际上由两个变量表示，其中包含数组部分的初始位置和最终位置，对应于元素小于枢轴和元素高于枢轴。整个划分都在原地进行，这意味着没有在进程中创建新数组。并行的顺序的区别在于并行版本中创建了多个数组，其中元素在它们之间平均分配（按顺序情况排序）。对于并行情况下的元素连接，使用了算法合并。

获得的加速比理论值高，这意味着与顺序版本相比，使用两个线程实现的加速比超过 2 倍（更准确地说是 3 倍），而使用 4 个线程的加速比是 10 倍。

我运行线程的计算机是运行 Ubuntu Linux 10.04、64 位的 4 核机器（Phenom II X4），如果我没记错的话。编译器是 gcc 4.4，除了包含用于并行实现的库 pthread 之外，没有为编译器传递任何标志；

那么，有人知道实现超线性加速的原因吗？有人可以指点一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T03:35:10.127

最好使用一些性能分析器来更详细地研究这一点，但我的第一个猜测是，这种超线性加速是由于如果添加线程可以获得更多缓存空间这一事实。这样，将从缓存中读取更多数据。由于内存传输的成本非常高，因此可以轻松提高性能。

您是否使用[阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)来评估您的最大加速比？

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T03:41:24.517

如果你看到两个线程对 1 个线程的 3 倍加速，以及 4 个线程对 1 个线程的 10 倍加速，那么事情就很可疑了。

Amdahl 定律指出加速比为 1/(1-P+P/S)，其中 P 是算法的并行部分，S 是并行部分的加速因子。假设四个核心的 S=4（可能的最佳结果），我们发现 P=2.5，这是不可能的（它必须在 0 和 1 之间，包括 0 和 1）。

换句话说，如果您可以使用 4 个内核获得 10 倍的改进，那么您可以简单地使用一个内核来模拟四个内核，仍然可以获得 2.5 倍的改进（或大约）。

换句话说，四个核心在一秒内执行的操作比一个核心在十秒内执行的操作更少。所以并行版本实际上执行的操作更少，如果是这种情况，串行版本没有理由不能也执行更少的操作。

可能的结论：

*   您的顺序版本可能有问题。也许它优化得很差。

*   您的并行版本可能有问题。他们可能是不正确的。

*   测量可能执行不正确。这很常见。

不可能的结论：

*   该算法超线性缩放。

# php - 持续的 xampp phpmyadmin 错误

> ID：11183156
> 
> 赞同：2
> 
> 时间：2012-06-25T03:29:25.120
> 
> 标签：php, xampp

当我单击我的 phpmyadmin 页面时，它给了我这个错误： phpMyAdmin 无法读取您的配置文件！如果 PHP 在其中发现解析错误或 PHP 找不到该文件，则可能会发生这种情况。请使用下面的链接直接调用配置文件并阅读您收到的 PHP 错误消息。在大多数情况下，某处缺少引号或分号。如果您收到空白页，则一切正常。

我今天早些时候下载了 xampp 并卸载了，因为它给了我错误。所以我现在重新安装了它，我收到了这个错误:(

我很欣赏你的建议，谢谢。

```
<?php
/*
* This is needed for cookie based authentication to encrypt password in
* cookie
*/
$cfg['blowfish_secret'] = 'xampp'; 

/*
* Servers configuration
*/
$i = 0;

/*
* First server
*/
$i++;

/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true;

/* User for advanced features */
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = '';

/* Advanced phpMyAdmin features */
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
$cfg['Servers'][$i]['tracking'] = 'pma_tracking';
$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';

/*
* End of servers configuration
*/

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:33:11.000

您是否尝试过访问它要求您直接访问的链接？它给你什么错误？这将帮助我们确定哪里出了问题。

# asp.net - 是否可以从网络而不是本地访问 asp.net Web 应用程序管理

> ID：11183162
> 
> 赞同：0
> 
> 时间：2012-06-25T03:30:08.117
> 
> 标签：asp.net, visual-studio-2010, iis

我认为这个问题说明了一切，

ASP.net 本地开发服务器下的 Visual Studio 提供了访问 asp.net Web 应用程序管理的能力。但是，如果我想在发布后在网络上访问它，有什么方法可以实现吗？

我问是因为我希望不要再次重新发明轮子！我想使用管理功能、管理角色、文件夹的用户安全等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:28:43.050

您可以通过自己创建一个管理面板来做到这一点。意味着 1\. 您必须创建页面，您可以在其中拥有您想要提供给管理员的功能。2.您必须创建一个管理员用户和密码。3\. 并且必须检查只有管理员才能登录到管理页面的管理页面。

如果我的问题正确。这可能会对您有所帮助。

如果这对您有帮助，请让我知道我还有更多技巧来限制其他技巧并保护管理页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:42:56.073

那将是有史以来最大的后门...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:19:23.157

答案是否定的！，我们必须重新发明轮子并再次开发管理面板，我相信微软 - 在功能中 - 会将其包含在模板中，就像注册和登录表单一样。

# java - 我在 LWJGL 中绘制四边形时做错了什么？

> ID：11183165
> 
> 赞同：2
> 
> 时间：2012-06-25T03:31:07.857
> 
> 标签：java, opengl, lwjgl

如果我将 GL_QUADS 切换到 GL_TRIANGLES 并删除最后一个点，三角形渲染得很好。但是，将其更改回 GL_QUADS 并添加另一个点只会让我出现黑屏。那我该怎么办？

```
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import org.lwjgl.util.glu.GLU;

public class Main {
public Main() {
    this.start();
}

private void start() {  
    try {
        Display.setDisplayMode(new DisplayMode(640,640));
        Display.setTitle("FPSTest");
        Display.create();
    } catch (LWJGLException e) {
        e.printStackTrace();
    }
    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glOrtho(-10, 10, -10, 10, -1000, 1000);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    while (!Display.isCloseRequested()) {
        GL11.glClear(GL11.GL_DEPTH_BUFFER_BIT|GL11.GL_COLOR_BUFFER_BIT);
        GL11.glRotatef(0, 1, 1, 1);
        GL11.glBegin(GL11.GL_QUADS);
//          GL11.glBegin(GL11.GL_TRIANGLES);
        {
            GL11.glColor3f(1.0f, 0.0f, 0.0f);
            GL11.glVertex3f(0.0f, 3.0f, 0.0f);
            GL11.glColor3f(0.0f, 1.0f, 0.0f);
            GL11.glVertex3f(0.0f, 0.0f, -3.0f);
            GL11.glColor3f(0.0f, 0.0f, 1.0f);
            GL11.glVertex3f(3.0f, 0.0f, 0.0f);
            GL11.glColor3f(0.0f, 1.0f, 0.0f);
            GL11.glVertex3f(0.0f, 0.0f, 3.0f);
        }
        GL11.glEnd();
        GL11.glLoadIdentity();
        Display.update();
    }

    Display.destroy();
}

public static void main(String[] argv) {
    new Main();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T03:53:18.507

正如 mgibsonbr 提到的，顶点是非共面的。他也发布了一个很好的工具来帮助你。

这也可能对您有所帮助。

如果是四个顶点，有分量；1 <= n <= 4 是共面的，那么矩阵的行列式：

```
|x1  y1  z1  1|
|x2  y2  z2  1|
|x3  y3  z3  1|
|x4  y4  z4  1| 
```

将为0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:38:48.913

四边形的顶点必须共面。您指定的四个顶点不是，根据[this](http://www.opengl.org/wiki/Primitives#Quads)，在这种情况下结果未定义（这可能是空白屏幕的原因）。

这是一个帮助您找到平面方程的[工具，因此您可以选择共面的第 4 点。](http://www.easycalculation.com/analytical/cartesian-plane-equation.php)您的前 3 个点构成方程`-9x -9y +9z + 27 = 0`，因此合适点的一个示例是：

```
GL11.glVertex3f(2.0f, 2.0f, 1.0f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T20:32:11.193

您也可以使用 glBegin(GL_TRIANGLE_STRIP)，所有三角形都是共面的；)

# c# - 连接互操作事件使 Excel VBA 宏执行时间加倍

> ID：11183167
> 
> 赞同：1
> 
> 时间：2012-06-25T03:31:42.890
> 
> 标签：c#, excel, interop

我有一个问题，即使事件没有被触发，连接事件也会导致 vba 宏的执行时间加倍。

在 C# interop 中，我在 Excel 工作簿中调用了一个宏，用于计算保险单的专门评级信息。该工作簿还调用另一个工作簿来计算一些标准评级数字。我还在工作簿打开时连接了一个事件，这样如果用户打开一个单独的（不相关的）电子表格，它就会在一个单独的应用程序实例中打开。这一切都很好。

用户在 VDI 环境中操作。他们抱怨是因为这个过程最多需要 30 秒，他们希望它更快。在物理机上，通常只需要 3-10 秒，具体取决于策略。

在测试中，我注意到如果我不连接工作簿打开事件，那么这个过程会快两倍（或更多）。一旦我将事件添加回来，宏就需要两倍的时间才能完成。即使未触发事件中的代码也会发生这种情况。我添加了断点和日志来检查这一点。没有输入事件（当然，除非我打开另一个电子表格）。

我们还有一个用于 Excel 的自定义 VSTO 加载项。我已经卸载了它，但它没有任何区别。我已经测试了将互操作工作簿开放代码移动到加载项中并设法获得快速执行时间，但高级开发人员希望我不要将代码放在那里。所以我的问题是为什么连接互操作工作簿打开事件会导致执行时间增加，有没有办法防止这种情况不涉及将代码移动到加载项中？我正在使用 Excel 2010。

相关代码如下：

```
var args = new object[] {"RateProcess", "StandardRating.xls"};

_spreadsheet = new Application();
Workbooks workbooks = _spreadsheet.Workbooks;

_commonWorkbook = workbooks.Open("StandardRating.xls", 0, false, 5, "", "", true,
    XLPlatform.xlWindows, "\t", true, false, 0, false, false, XLCorruptLoad.xlNormalLoad);

_specialisedWorkbook = workbook.Open("SpecialisedRating.xls", 0, false, 5, "", "", true, XlPlatform.xlWindows, "\t", true, false, 0, false, false, XlCorruptLoad.xlNormalLoad);

// This line causes the problem.
_spreadsheet.WorkbookOpen += spreadsheet_WorkbookOpen;

_spreadsheet.GetType().InvokeMember("Run", BindingFlags.Default | BindingFlags.InvokeMethod, null, _spreadsheet, args); 
```

# google-app-engine - 曾祖父AppEngine祖先查询

> ID：11183169
> 
> 赞同：1
> 
> 时间：2012-06-25T03:32:20.847
> 
> 标签：google-app-engine

**情景一：** 如果我有一个曾祖父（我们叫他A）；我的钥匙来自“child1”；有没有办法检查我的曾祖父是A？（希望我可以做到这一点而无需循环）

或者我可以检查一下 child1 的密钥是否属于路径“A->B->C”。
***A -> B -> C -> (child1, child2...)***

**场景2：** 从上面。曾爷爷还有另一个“G”后裔，想找回“H”的孩子：

***A-> B -> C -> (C 的子代)
...-> G -> H -> (H 的子代)***

我喜欢找回“H”的孩子，以为爷爷知道从A，G，到H的路径……我可以这样做吗？（希望我可以在查询中做到这一点，而无需循环）

如果你有一个 Go1 的例子：那就太棒了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T07:02:18.563

场景一：

如果要检查 Child 1 的曾祖父是 A，则必须调用 key.getParent() 两次（检查 null 父母）。没有 API 可以为您检查。

如果你想检查实体 X 是否有 A 作为祖先，那么你将不得不调用 key.getParent() N 次。

但是请注意，开销很小。调用 key.getParent() 不会导致对实际数据存储的任何调用。

您当然可以通过祖先查询确保 C /实体 X 是 A 的后代（正如您的场景 2 所暗示的那样）。从而避免检查查询结果。查询执行的数据存储将为您检查这一点。

[https://developers.google.com/appengine/docs/java/datastore/queries](https://developers.google.com/appengine/docs/java/datastore/queries) => 搜索祖先查询 [https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api /datastore/Query#setAncestor(com.google.appengine.api.datastore.Key](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Query#setAncestor(com.google.appengine.api.datastore.Key) )

childCQuery.setAncestor(entityA.getKey());

场景二：

爷爷“A”不知道到“H”的路径，因为可以随时添加和删除孩子。对哪些实体可以是“A”的后代没有限制。因此，只有通过数据存储查询才能确定“A”的后代。

但如场景 1 中所述，您可以在查询中将“A”指定为祖先，以便过滤“A”不是祖先的任何结果。

希望这能回答你的问题。

注意：我对您问题的回答是指 java API。我还不熟悉 Go API。

谢谢。

阿米尔

# javascript - 检测夹点的最简单方法

> ID：11183174
> 
> 赞同：94
> 
> 时间：2012-06-25T03:32:51.983
> 
> 标签：javascript, jquery, ios, mobile-safari

这是一个**WEB APP**不是原生应用程序。请不要使用 Objective-C NS 命令。

所以我需要在 iOS 上检测“捏”事件。问题是我看到的用于执行手势或多点触控事件的每个插件或方法，（通常）都与 jQuery 一起使用，并且是阳光下每个手势的完整附加插件。我的应用程序很大，而且我对代码中的枯木非常敏感。我所需要的只是检测捏，使用类似 jGesture 的东西只是为了满足我的简单需求而臃肿。

此外，我对如何手动检测夹点的理解有限。我可以得到两个手指的位置，似乎无法正确混合以检测到这一点。有没有人有一个简单的片段可以检测到捏？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-06-25T03:55:14.883

想想什么是`pinch`事件：两个手指放在一个元素上，彼此靠近或远离。据我所知，手势事件是一个相当新的标准，因此最安全的方法可能是使用触摸事件，如下所示：

（`ontouchstart`事件）

```
if (e.touches.length === 2) {
    scaling = true;
    pinchStart(e);
} 
```

（`ontouchmove`事件）

```
if (scaling) {
    pinchMove(e);
} 
```

（`ontouchend`事件）

```
if (scaling) {
    pinchEnd(e);
    scaling = false;
} 
```

要获取两个手指之间的距离，请使用以下`hypot`函数：

```
var dist = Math.hypot(
    e.touches[0].pageX - e.touches[1].pageX,
    e.touches[0].pageY - e.touches[1].pageY); 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-06-25T03:50:51.047

您想使用[`gesturestart`、`gesturechange`和`gestureend`events](https://developer.apple.com/reference/webkitjs/gestureevent)。每当 2 个或更多手指触摸屏幕时，这些都会触发。

根据您需要对捏合手势执行的操作，您的方法需要进行调整。`scale`可以检查乘数以确定用户的捏合手势有多剧烈。有关该属性的行为方式的详细信息，请参阅[Apple 的 TouchEvent 文档。](https://developer.apple.com/reference/webkitjs/touchevent)`scale`

```
node.addEventListener('gestureend', function(e) {
    if (e.scale < 1.0) {
        // User moved fingers closer together
    } else if (e.scale > 1.0) {
        // User moved fingers further apart
    }
}, false); 
```

`gesturechange`如果您需要它以使您的应用程序感觉更具响应性，您还可以拦截该事件以检测捏合。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-06-25T03:57:37.943

Hammer.js 一路走好！它处理“变换”（捏）。 [http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

但是，如果您想自己实现它，我认为 Jeffrey 的回答非常可靠。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-30T15:41:33.513

使用 Hammer.js 等 3rd 方库检测两个手指捏缩放任何元素，轻松且无麻烦（注意，hammer 有滚动问题！）

```
function onScale(el, callback) {
    let hypo = undefined;

    el.addEventListener('touchmove', function(event) {
        if (event.targetTouches.length === 2) {
            let hypo1 = Math.hypot((event.targetTouches[0].pageX - event.targetTouches[1].pageX),
                (event.targetTouches[0].pageY - event.targetTouches[1].pageY));
            if (hypo === undefined) {
                hypo = hypo1;
            }
            callback(hypo1/hypo);
        }
    }, false);

    el.addEventListener('touchend', function(event) {
        hypo = undefined;
    }, false);
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-07-22T16:12:33.083

不幸的是，跨浏览器检测捏合手势并不像人们希望的那么简单，但是 HammerJS 让它变得容易多了！

查看[Pinch Zoom and Pan with HammerJS 演示](http://bl.ocks.org/redgeoff/raw/6be0295e6ebf18649966d48768398252/)。此示例已在 Android、iOS 和 Windows Phone 上进行了测试。

[你可以在Pinch Zoom and Pan with HammerJS](https://gist.github.com/redgeoff/6be0295e6ebf18649966d48768398252)找到源代码。

为了您的方便，这里是源代码：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport"
        content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
  <title>Pinch Zoom</title>
</head>

<body>

  <div>

    <div style="height:150px;background-color:#eeeeee">
      Ignore this area. Space is needed to test on the iPhone simulator as pinch simulation on the
      iPhone simulator requires the target to be near the middle of the screen and we only respect
      touch events in the image area. This space is not needed in production.
    </div>

    <style>

      .pinch-zoom-container {
        overflow: hidden;
        height: 300px;
      }

      .pinch-zoom-image {
        width: 100%;
      }

    </style>

    <script src="https://hammerjs.github.io/dist/hammer.js"></script>

    <script>

      var MIN_SCALE = 1; // 1=scaling when first loaded
      var MAX_SCALE = 64;

      // HammerJS fires "pinch" and "pan" events that are cumulative in nature and not
      // deltas. Therefore, we need to store the "last" values of scale, x and y so that we can
      // adjust the UI accordingly. It isn't until the "pinchend" and "panend" events are received
      // that we can set the "last" values.

      // Our "raw" coordinates are not scaled. This allows us to only have to modify our stored
      // coordinates when the UI is updated. It also simplifies our calculations as these
      // coordinates are without respect to the current scale.

      var imgWidth = null;
      var imgHeight = null;
      var viewportWidth = null;
      var viewportHeight = null;
      var scale = null;
      var lastScale = null;
      var container = null;
      var img = null;
      var x = 0;
      var lastX = 0;
      var y = 0;
      var lastY = 0;
      var pinchCenter = null;

      // We need to disable the following event handlers so that the browser doesn't try to
      // automatically handle our image drag gestures.
      var disableImgEventHandlers = function () {
        var events = ['onclick', 'onmousedown', 'onmousemove', 'onmouseout', 'onmouseover',
                      'onmouseup', 'ondblclick', 'onfocus', 'onblur'];

        events.forEach(function (event) {
          img[event] = function () {
            return false;
          };
        });
      };

      // Traverse the DOM to calculate the absolute position of an element
      var absolutePosition = function (el) {
        var x = 0,
          y = 0;

        while (el !== null) {
          x += el.offsetLeft;
          y += el.offsetTop;
          el = el.offsetParent;
        }

        return { x: x, y: y };
      };

      var restrictScale = function (scale) {
        if (scale < MIN_SCALE) {
          scale = MIN_SCALE;
        } else if (scale > MAX_SCALE) {
          scale = MAX_SCALE;
        }
        return scale;
      };

      var restrictRawPos = function (pos, viewportDim, imgDim) {
        if (pos < viewportDim/scale - imgDim) { // too far left/up?
          pos = viewportDim/scale - imgDim;
        } else if (pos > 0) { // too far right/down?
          pos = 0;
        }
        return pos;
      };

      var updateLastPos = function (deltaX, deltaY) {
        lastX = x;
        lastY = y;
      };

      var translate = function (deltaX, deltaY) {
        // We restrict to the min of the viewport width/height or current width/height as the
        // current width/height may be smaller than the viewport width/height

        var newX = restrictRawPos(lastX + deltaX/scale,
                                  Math.min(viewportWidth, curWidth), imgWidth);
        x = newX;
        img.style.marginLeft = Math.ceil(newX*scale) + 'px';

        var newY = restrictRawPos(lastY + deltaY/scale,
                                  Math.min(viewportHeight, curHeight), imgHeight);
        y = newY;
        img.style.marginTop = Math.ceil(newY*scale) + 'px';
      };

      var zoom = function (scaleBy) {
        scale = restrictScale(lastScale*scaleBy);

        curWidth = imgWidth*scale;
        curHeight = imgHeight*scale;

        img.style.width = Math.ceil(curWidth) + 'px';
        img.style.height = Math.ceil(curHeight) + 'px';

        // Adjust margins to make sure that we aren't out of bounds
        translate(0, 0);
      };

      var rawCenter = function (e) {
        var pos = absolutePosition(container);

        // We need to account for the scroll position
        var scrollLeft = window.pageXOffset ? window.pageXOffset : document.body.scrollLeft;
        var scrollTop = window.pageYOffset ? window.pageYOffset : document.body.scrollTop;

        var zoomX = -x + (e.center.x - pos.x + scrollLeft)/scale;
        var zoomY = -y + (e.center.y - pos.y + scrollTop)/scale;

        return { x: zoomX, y: zoomY };
      };

      var updateLastScale = function () {
        lastScale = scale;
      };

      var zoomAround = function (scaleBy, rawZoomX, rawZoomY, doNotUpdateLast) {
        // Zoom
        zoom(scaleBy);

        // New raw center of viewport
        var rawCenterX = -x + Math.min(viewportWidth, curWidth)/2/scale;
        var rawCenterY = -y + Math.min(viewportHeight, curHeight)/2/scale;

        // Delta
        var deltaX = (rawCenterX - rawZoomX)*scale;
        var deltaY = (rawCenterY - rawZoomY)*scale;

        // Translate back to zoom center
        translate(deltaX, deltaY);

        if (!doNotUpdateLast) {
          updateLastScale();
          updateLastPos();
        }
      };

      var zoomCenter = function (scaleBy) {
        // Center of viewport
        var zoomX = -x + Math.min(viewportWidth, curWidth)/2/scale;
        var zoomY = -y + Math.min(viewportHeight, curHeight)/2/scale;

        zoomAround(scaleBy, zoomX, zoomY);
      };

      var zoomIn = function () {
        zoomCenter(2);
      };

      var zoomOut = function () {
        zoomCenter(1/2);
      };

      var onLoad = function () {

        img = document.getElementById('pinch-zoom-image-id');
        container = img.parentElement;

        disableImgEventHandlers();

        imgWidth = img.width;
        imgHeight = img.height;
        viewportWidth = img.offsetWidth;
        scale = viewportWidth/imgWidth;
        lastScale = scale;
        viewportHeight = img.parentElement.offsetHeight;
        curWidth = imgWidth*scale;
        curHeight = imgHeight*scale;

        var hammer = new Hammer(container, {
          domEvents: true
        });

        hammer.get('pinch').set({
          enable: true
        });

        hammer.on('pan', function (e) {
          translate(e.deltaX, e.deltaY);
        });

        hammer.on('panend', function (e) {
          updateLastPos();
        });

        hammer.on('pinch', function (e) {

          // We only calculate the pinch center on the first pinch event as we want the center to
          // stay consistent during the entire pinch
          if (pinchCenter === null) {
            pinchCenter = rawCenter(e);
            var offsetX = pinchCenter.x*scale - (-x*scale + Math.min(viewportWidth, curWidth)/2);
            var offsetY = pinchCenter.y*scale - (-y*scale + Math.min(viewportHeight, curHeight)/2);
            pinchCenterOffset = { x: offsetX, y: offsetY };
          }

          // When the user pinch zooms, she/he expects the pinch center to remain in the same
          // relative location of the screen. To achieve this, the raw zoom center is calculated by
          // first storing the pinch center and the scaled offset to the current center of the
          // image. The new scale is then used to calculate the zoom center. This has the effect of
          // actually translating the zoom center on each pinch zoom event.
          var newScale = restrictScale(scale*e.scale);
          var zoomX = pinchCenter.x*newScale - pinchCenterOffset.x;
          var zoomY = pinchCenter.y*newScale - pinchCenterOffset.y;
          var zoomCenter = { x: zoomX/newScale, y: zoomY/newScale };

          zoomAround(e.scale, zoomCenter.x, zoomCenter.y, true);
        });

        hammer.on('pinchend', function (e) {
          updateLastScale();
          updateLastPos();
          pinchCenter = null;
        });

        hammer.on('doubletap', function (e) {
          var c = rawCenter(e);
          zoomAround(2, c.x, c.y);
        });

      };

    </script>

    <button onclick="zoomIn()">Zoom In</button>
    <button onclick="zoomOut()">Zoom Out</button>

    <div class="pinch-zoom-container">
      <img id="pinch-zoom-image-id" class="pinch-zoom-image" onload="onLoad()"
           src="https://hammerjs.github.io/assets/img/pano-1.jpg">
    </div>

  </div>

</body>
</html>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-13T15:19:12.840

这些答案都没有达到我想要的，所以我自己写了一些东西。我想使用我的 MacBookPro 触控板在我的网站上捏缩放图像。以下代码（需要 jQuery）似乎至少可以在 Chrome 和 Edge 中运行。也许这对其他人有用。

```
function setupImageEnlargement(el)
{
    // "el" represents the image element, such as the results of document.getElementByd('image-id')
    var img = $(el);
    $(window, 'html', 'body').bind('scroll touchmove mousewheel', function(e)
    {
        //TODO: need to limit this to when the mouse is over the image in question

        //TODO: behavior not the same in Safari and FF, but seems to work in Edge and Chrome

        if (typeof e.originalEvent != 'undefined' && e.originalEvent != null
            && e.originalEvent.wheelDelta != 'undefined' && e.originalEvent.wheelDelta != null)
        {
            e.preventDefault();
            e.stopPropagation();
            console.log(e);
            if (e.originalEvent.wheelDelta > 0)
            {
                // zooming
                var newW = 1.1 * parseFloat(img.width());
                var newH = 1.1 * parseFloat(img.height());
                if (newW < el.naturalWidth && newH < el.naturalHeight)
                {
                    // Go ahead and zoom the image
                    //console.log('zooming the image');
                    img.css(
                    {
                        "width": newW + 'px',
                        "height": newH + 'px',
                        "max-width": newW + 'px',
                        "max-height": newH + 'px'
                    });
                }
                else
                {
                    // Make image as big as it gets
                    //console.log('making it as big as it gets');
                    img.css(
                    {
                        "width": el.naturalWidth + 'px',
                        "height": el.naturalHeight + 'px',
                        "max-width": el.naturalWidth + 'px',
                        "max-height": el.naturalHeight + 'px'
                    });
                }
            }
            else if (e.originalEvent.wheelDelta < 0)
            {
                // shrinking
                var newW = 0.9 * parseFloat(img.width());
                var newH = 0.9 * parseFloat(img.height());

                //TODO: I had added these data-attributes to the image onload.
                // They represent the original width and height of the image on the screen.
                // If your image is normally 100% width, you may need to change these values on resize.
                var origW = parseFloat(img.attr('data-startwidth'));
                var origH = parseFloat(img.attr('data-startheight'));

                if (newW > origW && newH > origH)
                {
                    // Go ahead and shrink the image
                    //console.log('shrinking the image');
                    img.css(
                    {
                        "width": newW + 'px',
                        "height": newH + 'px',
                        "max-width": newW + 'px',
                        "max-height": newH + 'px'
                    });
                }
                else
                {
                    // Make image as small as it gets
                    //console.log('making it as small as it gets');
                    // This restores the image to its original size. You may want
                    //to do this differently, like by removing the css instead of defining it.
                    img.css(
                    {
                        "width": origW + 'px',
                        "height": origH + 'px',
                        "max-width": origW + 'px',
                        "max-height": origH + 'px'
                    });
                }
            }
        }
    });
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-13T22:12:43.440

我的回答受到杰弗里的回答的启发。在该答案给出了更抽象的解决方案的地方，我尝试提供有关如何实现它的更具体的步骤。这只是一个指南，可以更优雅地实现。有关更详细的示例，请查看 MDN Web 文档的本[教程](https://developer.mozilla.org/en-US/docs/Web/API/Touch_events/Multi-touch_interaction)。

HTML：

```
<div id="zoom_here">....</div> 
```

JS

```
<script>
var dist1=0;
function start(ev) {
           if (ev.targetTouches.length == 2) {//check if two fingers touched screen
               dist1 = Math.hypot( //get rough estimate of distance between two fingers
                ev.touches[0].pageX - ev.touches[1].pageX,
                ev.touches[0].pageY - ev.touches[1].pageY);                  
           }

    }
    function move(ev) {
           if (ev.targetTouches.length == 2 && ev.changedTouches.length == 2) {
                 // Check if the two target touches are the same ones that started
               var dist2 = Math.hypot(//get rough estimate of new distance between fingers
                ev.touches[0].pageX - ev.touches[1].pageX,
                ev.touches[0].pageY - ev.touches[1].pageY);
                //alert(dist);
                if(dist1>dist2) {//if fingers are closer now than when they first touched screen, they are pinching
                  alert('zoom out');
                }
                if(dist1<dist2) {//if fingers are further apart than when they first touched the screen, they are making the zoomin gesture
                   alert('zoom in');
                }
           }

    }
        document.getElementById ('zoom_here').addEventListener ('touchstart', start, false);
        document.getElementById('zoom_here').addEventListener('touchmove', move, false);
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-30T15:38:56.853

最简单的方法是响应 'wheel' 事件。

您需要调用`ev.preventDefault()`以防止浏览器进行全屏缩放。

浏览器会为触控板上的捏合合成“滚轮”事件，作为奖励，您还可以处理鼠标滚轮事件。这是地图应用程序处理它的方式。

我的示例中的更多详细信息：

```
let element = document.getElementById('el');
let scale = 1.0;
element.addEventListener('wheel', (ev) => {
  // This is crucial. Without it, the browser will do a full page zoom
  ev.preventDefault();

  // This is an empirically determined heuristic.
  // Unfortunately I don't know of any way to do this better.
  // Typical deltaY values from a trackpad pinch are under 1.0
  // Typical deltaY values from a mouse wheel are more than 100.
  let isPinch = Math.abs(ev.deltaY) < 50;

  if (isPinch) {
    // This is a pinch on a trackpad
    let factor = 1 - 0.01 * ev.deltaY;
    scale *= factor;
    element.innerText = `Pinch: scale is ${scale}`;
  } else {
    // This is a mouse wheel
    let strength = 1.4;
    let factor = ev.deltaY < 0 ? strength : 1.0 / strength;
    scale *= factor;
    element.innerText = `Mouse: scale is ${scale}`;
  }
});
```

```
<div id='el' style='width:400px; height:300px; background:#ffa'>
  Scale: 1.0
</div>
```

# django - 在 django 模板中打印图片 x 次

> ID：11183175
> 
> 赞同：0
> 
> 时间：2012-06-25T03:32:54.723
> 
> 标签：django, templates

假设我有一个整数值，我输出到 django 模板说 x。我还有一张图片，我想连续打印 x 次。我如何在模板中输出这张图片 x 次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:18:09.100

一个快速但丑陋的 hack 是使用[make_list](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#make-list)过滤器：

```
{% for i in "xxxx"|make_list %}
    {{ image_html }}
{% endfor %} 
```

这将打印四次图像（因为字符串中有四个字符）。

一种更简洁的方法是将列表传递到您的模板中`range()`：

```
context['image_print_range'] = range(1, 5)
...
{% for i in image_print_range %}
    {{ image_html }}
{% endfor %} 
```

另一种解决方案（可能是最干净的）是自定义模板标签或过滤器，例如：

```
@register.simple_tag
def print_multiple(value, count):
    """Print a value multiple times."""
    return ' '.join([value] * count) 
```

在您的模板中：

```
{% print_multiple "foobar" 4 %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:36:19.010

您可以将其添加到视图中的列表 x 次以在标签中对其进行迭代`{% for %}`，或者创建[自定义模板标签](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/#writing-custom-template-tags)以重复图像 url x 次。

# arrays - 如何将 Web 服务的结果更改为纯 JSON 变量？

> ID：11183176
> 
> 赞同：0
> 
> 时间：2012-06-25T03:33:07.860
> 
> 标签：arrays, json, web-services

我有使用 C# 的 .NET Web 服务，并将此 Web 服务的结果发布在 JSON 数组变量中，但我的结果有些奇怪，它不是纯 JSON 变量。如何将其更改为纯 JSON 变量？

这是我的代码：

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public ModelReport.Report[] GetReports()
    {
        List<ModelReport.Report> reports = new List<ModelReport.Report>();
        string connectionString = ConfigurationManager.ConnectionStrings["ConnWf"].ConnectionString;
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            string sql = "select type, sum(OrderQty) as total from tbl_weeklyflash_ID where type <> 'NULL' group by type";
            connection.Open();
            SqlCommand command = new SqlCommand(sql, connection);

            command.CommandText = sql;
            using (SqlDataReader reader = command.ExecuteReader())
            {
                while (reader.Read())
                {
                    ModelReport.Report report = new ModelReport.Report();
                    report.type = reader["type"].ToString();
                    report.total = reader["total"].ToString();
                    reports.Add(report);
                }
            }
        }

        return reports.ToArray();
    } 
```

这是我当前的网络服务结果：

```
-<string>[{"total":"209480","type":"ESL500ML"},{"total":"10177","type":"CHEESE1K"},{"total":"2719928","type":"ESL"},{"total":"145920","type":"WHP"},{"total":"417236.136","type":"UHT"}]</string> 
```

我想把它改成：

```
{"report":[{"total":"209480","type":"ESL500ML"},{"total":"10177","type":"CHEESE1K"},{"total":"2719928","type":"ESL"},{"total":"145920","type":"WHP"},{"total":"417236.136","type":"UHT"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:48:55.227

尝试构建一个`WCF service`. 请参阅[使用 C#.NET 制作 JSON Web 服务](https://stackoverflow.com/questions/8308449/making-of-json-webservice-using-c-sharp-net)。

您可以学习使用[此](http://blogs.msdn.com/b/jmeier/archive/2007/10/15/how-to-create-a-hello-world-wcf-service-using-visual-studio.aspx)创建 WCF 服务。

希望能帮助到你。

# java - 一些客户在升级我的 Android 应用程序时收到 java.lang.UnsatisfiedLinkError。我该如何解决？

> ID：11183182
> 
> 赞同：2
> 
> 时间：2012-06-25T03:33:35.190
> 
> 标签：java, android, installation, java-native-interface

每次我更新我的 Android 应用程序时，几个随机客户都会收到此异常。我将其缩小到两个原因，都与使用 jni 有关。

1.  升级应用程序时会删除 *.so 库。
2.  应用升级时*.so库没有升级，老版本依然存在。

设备报告并未表明此问题与操作系统版本、内存或任何合理因素有关。与其关注为什么 Android 在升级库时遇到问题，我希望有人知道如何在遇到此错误时手动将库从应用程序的 APK 中拉出并将它们放在正确的目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T04:43:29.887

似乎您可能有 ABI 不匹配 - 或者可能是由人们一直在谈论的 Android 错误引起的*错误ABI 不匹配，当首选专用品种之一时，可能不接受通用 arm 库。*

至于您的解决方法...您无法写入应用程序安装的 lib/ 目录，但如果您使用 System.load() 具有精确的路径/文件名而不是 loadLibrary() 仅具有库，则可以将库放在其他位置姓名。我认为没有任何官方（如未来证明）方法可以从您的 apk 中提取任意内容，尽管目前使用 zipfile 类（可能使用诸如 Context.getPackageCodePath() 之类的东西来发现apk 的位置和**安装变量名称）**

检查库加载尝试是否成功并在失败时报告有关设备的信息可能同样有用。

# python - 需要帮助在谷歌应用引擎中创建永久链接

> ID：11183186
> 
> 赞同：0
> 
> 时间：2012-06-25T03:33:57.153
> 
> 标签：python, google-app-engine, google-cloud-datastore, url-mapping

因此，每次有人在我的网页上发帖时，我都会尝试创建一个唯一的永久链接，并且我希望它对搜索引擎相对友好，所以我编写了一些代码来将标题更改为一个好的搜索引擎标题，它正在工作但是那么我的处理程序不能接受它。至少这是我认为正在发生的事情，因为网页只是给了我一个 404 错误。HTML 工作正常，因为当我重定向到静态页面时，它会全部通过。这是适用的代码：

```
def post(self):
    subject = self.request.get('subject')
    content = self.request.get('content')

    if subject and content:
        p = Post(parent = blog_key(), subject = subject, content = content)
        p.put()

        id=str(p.key().id())

        subject = str(subject)
        subject = subject.replace(' ', '25fdsa67ggggsd5')
        subject = ''.join(e for e in subject if e.isalnum())
        subject = subject.replace('25fdsa67ggggsd5', '-')
        subject = subject.lower()

        url = '/blog/%s/%s' % (id, subject)
        self.redirect('/blog/%s/%s' % (id, subject))

class PostPage(BlogHandler):
    def get(self, post_id):
       key = db.Key.from_path('PersonalPost', int(post_id), parent=blog_key())
       post = db.get(key)

       if not post:
          self.error(404)
          return

       self.render("permalink.html", post = post)

class PersonalPost(db.Model):
    subject = db.StringProperty(required = True)
    content = db.TextProperty(required = True)
    created = db.DateTimeProperty(auto_now_add = True)
    last_modified = db.DateTimeProperty(auto_now = True)
    user_id = db.StringProperty(required = True)

    def render(self):
        self._render_text = self.content.replace('\n', '<br>')
        return render_str("post.html", p = self)

def blog_key(name = 'default'):
    return db.Key.from_path('blogs', name)

app = webapp2.WSGIApplication([('/blog/([0-9]+)/([.*]+)', PostPage)] 
```

当我将其重定向到主页并列出它们时，它再次起作用，但当我尝试定向到新的 SEO 页面时它不起作用。

更新：

我正在使用的测试网址正在设置

```
subject = "test-url"
id = "1234" 
```

然后该应用程序将我定向到 www.url.com/blog/1234/test-url 但它给了我一个 404 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:27:01.267

您在其中定义了两个组，`('/blog/([0-9]+)/([.*]+)`但您的 PostPage.get() 只需要一个。
将其更改为 def`get(self, post_id, subject)`或删除第二组`('/blog/([0-9]+)/[.*]+`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-07T07:21:34.977

我认为你应该看看你的处理程序映射上的引号，它似乎不一致。

*   你的：`app = webapp2.WSGIApplication([('/blog/([0-9]+)/([.*]+)', PostPage)]`

*   尝试 ：`app = webapp2.WSGIApplication(['/blog/([0-9]+)/([.*]+)', PostPage)]`

# oop - 重载不可变类中的方法

> ID：11183187
> 
> 赞同：1
> 
> 时间：2012-06-25T03:34:00.017
> 
> 标签：oop, inheritance, immutability

假设我有一个带有和参数的不可变`Point`类，以及一个这样定义的方法：`x``y``add`

```
class Point:
  Point add(int x, int y):
    return new Point(this.x + x, this.y + y); 
```

由于它是不可变的，因此它返回一个新点。这一切都很好，直到我们有一个扩展 Point 并重新定义的类`add`。

```
class ColoredPoint extends Point:
  ColoredPoint add(int x, int y):
    return new ColoredPoint(this.x + x, this.y + y, this.width, this.height) 
```

我们必须编写新的定义，否则`add`on 方法`ColoredPoint`会返回`Point`，这是不好的。但是现在这在大多数语言中都不起作用，因为我们正在覆盖`add`，但我们只是在返回类型上消除歧义。语言不允许您拥有仅在返回类型上消除歧义的方法，因为在大多数情况下这可能是模棱两可的。

那么我们该怎么办？

我看到的唯一解决方案是：

*   让他们都实现一些接口，比如`IPositionable`
*   放弃不变性。

还要别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:55:17.153

如果要强制执行不变性，则不能有子类。例如`java.lang.String`，这是一个`final`类，原因如下：防止人们继承 String 以使其可变。

另外，为什么会首先`Rect`扩展`Point`？这不是完全不同的事情吗？在几何方面，它们甚至不存在于同一维度中。

最后，我看不到子类上的方法问题返回更受限制的类型（以及一些语言不能很好地支持这一点）与不变性之间的联系。

# php - preg_replace 用于重复字符的正确正则表达式

> ID：11183188
> 
> 赞同：1
> 
> 时间：2012-06-25T03:34:16.523
> 
> 标签：php, regex, preg-replace

好吧，我又被卡住了，这次是正则表达式的问题......正在搜索谷歌，正在搜索 SO，但没有一篇让我开心的帖子......所以长话短说：

*   §text = 数据库条目字符串 -> 可以是一切
*   $text 被解析，正则表达式应该将 2 * 之间的所有内容替换为：

    [bla].$matchedtext.[blub]

所以我试图为此找到正确的正则表达式，这就是我想出的：

```
$text= preg_replace('~(/\*([^\"]*?)\*/)~', "$1<b>$2</b>", $text); 
```

每场比赛的 2 * 也应该消失：/...

显然它不起作用，否则我不会发布 :D -> 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:45:30.533

这可能应该这样做：

```
preg_replace('/\*([^"*]*)\*/', '<b>\1</b>', $text); 
```

对您之前的正则表达式的一些评论：

```
[^\"]*? 
```

非贪婪`*`是不必要的；当您查看否定字符集时，只需在字符集中添加“*”即可。此外，双引号不需要转义。

```
[^"*]* 
```

你只需要你想记住的东西的记忆组；在你的情况下，你不想知道你匹配了一个开始和结束的星号。所以你可以只用一个记忆组来完成你的整个匹配。

# php - 某些类的访问级别必须是 PHP 中的公共错误

> ID：11183190
> 
> 赞同：10
> 
> 时间：2012-06-25T03:34:27.663
> 
> 标签：php, dry, abstract, public

我创建了这个类

```
<?php
    abstract class Validator{
        public $_errors = array();
        abstract public function isValid($input);

        public function _addErrors($message){
            $this->_errors = $message;
        }

        public function getErrors(){
            return $this->_errors;
        }

        public function getMessage(){
            return $this->message;
        }
    }

    class Validator_NoSpaces extends Validator{

        public function __construct($value){
            $this->isValid($value);
        }
        public function isValid($value){
                if (preg_match('/\s/', $value)){
                $this->_addErrors("Spaces are not allowed");
                return false;
            }
            return true;
        }       
    }

    class Validator_MinimumLength extends Validator{

        protected $_minLength;
        protected $value;

        public function __construct($value ,$minLength=8){
            $this->_minLength = $minLength;
            $this->value = $value;
            $this->isValid($value);
        }

        public function isValid($input){
             if (strlen($input) > $this->_minLength) {
                 return true;
            }else{
                $this->_addErrors("Input must be at least {$this_minLength}");
                return false;
          }
        }
    }

    class Form_Element_Validators extends Validator{

        protected $_validators = array();

    public function addValidator(Validator $validator)
    {
        $this->_validators[] = $validator;
    }

    public function getValidators()
    {
        return $this->_validators;
    }

    protected function _addErrors(array $errors)
    {
        foreach ($errors as $error) {
            $this->_addErrors($error);
        }
    }

    public function hasErrors()
    {
        return (count($this->getErrors()) !== 0);
    }

    public function isValid($input)
    {
        foreach ($this->_validators as $validator) {
            if (!$validator->isValid($input)) {
                $this->_addErrors($validator->getErrors());
            }
        }
        return !$this->hasErrors();
    }

    }

    class Form_Element extends  Form_Element_Validators{

        public function __construct($value){
              $this->addValidator(new Validator_NoSpaces($value));
              $this->addValidator(new Validator_MinimumLength($value));
        }
    } 
```

出于验证目的，但它一直给我这个错误

```
Fatal error: Access level to Form_Element_Validators::_addErrors() must be public (as in class Validator) in C:\xampp\htdocs\beatbeast\includes\Db\Validators.php on line 91 
```

但是这个类中的实例变量 $_errors 被声明为公共的，我不明白为什么我会收到这个错误。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-25T03:39:32.973

您收到该错误是因为该方法的可见性必须与其在父类上的定义相同或限制较少。在这种情况下，您在抽象`addErrors`类上拥有`public`它，并试图`protected`在子类上制作它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-25T03:54:29.770

正如其他人所提到的，您不能使子类方法比父类方法更具限制性；这是因为子类应该是其父类的有效替代品。

在您的特定情况下，我会将以下划线开头的所有方法和属性的可见性更改为`protected`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T03:39:42.060

您已经指定了对类方法的`protected`访问权限。所以改为公开。`protected function _addErrors(array $errors)``Form_Element_Validators`

编辑：

你注意到了吗？子类方法（被覆盖的方法）是用[Type Hinting](http://php.net/manual/en/language.oop5.typehinting.php)定义的。请保持两者的参数类型相同；超类和子类方法。

```
 abstract class Validator{
        public $_errors = array();
        abstract public function isValid($input);

        public function _addErrors(array $message){
            $this->_errors = $message;
        }
        .... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-04T13:38:41.353

自 PHP 7.2.0 以来，修复了一个错误 #61970（限制`__construct()`子类中的访问级别会导致致命错误）。

将您的 PHP 版本升级到 7.2，您可以制作它`private`或`protected`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-08T18:16:20.153

当你试图用特定的守卫做某事时也会发生这种情况。你可以加

```
 protected $guard = "guard_name"; 
```

在您的模型中添加上述行。这将解决问题。

# android - Android 从 Widget 启动现有应用程序实例

> ID：11183191
> 
> 赞同：1
> 
> 时间：2012-06-25T03:34:32.977
> 
> 标签：android, android-activity, widget, instance, launchmode

我有一个包含多个活动的应用程序......所以假设用户正在导航活动堆栈 A->B->C。然后按主页按钮。现在，当用户单击小部件时，我只想将我的应用程序的现有/当前实例带到前台。我不想要应用程序的新实例。我希望活动 C 回到前台。

我尝试了launchMode，`"singleTask" | "singleInstance"`但这并没有解决我想要的要求，因为它清除了当前实例并创建了一个带有活动A的新实例。

任何想法如何解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:45:01.580

我设法想出了一个解决方案。我设置了专门的启动模式....

```
android:launchMode="singleInstance" 
```

每次用户再次点击小部件或应用程序图标时，都会启动默认活动 A。要在上次所在的位置打开应用程序，只需`onCreate()`在类的方法中`MainActivity`检查`isTaskRoot()`. 如果为 false，`finish()`则调用并且活动 A (MainActivity) 将不会出现，并且应用程序将打开到活动 B 中的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T23:57:48.260

使用 " `singleInstance`" 并不是一个好主意（有很多原因）。这是一种更好的方法-来自您的小部件意图处理程序：

```
Intent yourActivity = new Intent(context, YourActivity.class);
yourActivity.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
context.startActivity(yourActivity); 
```

您不需要添加`CLEAR_TOP`到召回活动 C，但如果您想带 A 或 B，则需要它。

我之所以发帖，是因为在 10 多个类似的帖子之间，实际上没有人指出正确的做法。

[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP) - 最后一段。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T03:38:09.607

尝试将此添加到您的意图中

```
intent.setFlags( Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT); 
```

# javascript - ontouch事件问题

> ID：11183192
> 
> 赞同：1
> 
> 时间：2012-06-25T03:34:44.013
> 
> 标签：javascript, events, touch, handler

我对触摸处理程序有一个小问题......它有时在触摸时工作有时不工作，并且在我绘制它之后它无法读取我的数据，并且它以直线绘制，所以我想知道什么问题以及我做错了什么？请帮助我..我已经将我的代码放入 jsfiddle..请帮助我（http://jsfiddle.net/Frebu/1/）

```
function touchHandler(event) {
        var touches = event.changedTouches,
        first = touches[0],
        type = "";
        switch (event.type) {
            case "touchstart": type = "mousedown"; break;
            case "touchmove": type = "mousemove"; break;
            case "touchend": type = "mouseup"; break;
            default: return;
        }

        var simulatedEvent = document.createEvent("MouseEvent");
        simulatedEvent.initMouseEvent(type, true, true, window, 1,
                      first.screenX, first.screenY,
                      first.clientX, first.clientY, false,
                      false, false, false, 0/*left*/, null);

        first.target.dispatchEvent(simulatedEvent);
        event.preventDefault();
    }

    function init(id) {
        document.getElementById(id).addEventListener("touchstart", touchHandler, true);
        document.getElementById(id).addEventListener("touchmove", touchHandler, true);
        document.getElementById(id).addEventListener("touchend", touchHandler, true);
    }
$(document).ready(function() {
        init('myCanvas');
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:47:10.190

我的建议是使用hammer.js，它是一个很棒的触摸库（可以在浏览器上使用鼠标）。

[http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

除此之外，我在模拟触摸事件的 Chrome 上测试小提琴没有任何问题。虽然很奇怪，但代码似乎很好。

# http - CSocket - DataArrival 未发生（GET 请求）

> ID：11183195
> 
> 赞同：1
> 
> 时间：2012-06-25T03:35:03.730
> 
> 标签：http, vb6, get, winsock, webrequest

我正在尝试使用 CSocket 在 VB6 中执行 GET 请求。数据发送成功，但未收到响应（在多个站点上测试）。我的代码如下。

```
Option Explicit
Dim WithEvents WinSock As CSocket

Private Sub Form_Load()
Set WinSock = New CSocket
End Sub

Private Sub btnConnect_Click()
WinSock.Protocol = sckTCPProtocol
WinSock.Connect "winhome.de", 80

MsgBox "Connecting..."
End Sub

Private Sub WinSock_OnConnect()
MsgBox "Connected."

Dim Data$
Data = "GET http://www.winhome.de/index.html HTTP/1.0" & vbCrLf & "Accept: */*" & _
vbCrLf & "Accept: text/html" & vbCrLf & vbCrLf

WinSock.SendData Data
MsgBox Data
End Sub

Private Sub WinSock_OnDataArrival(ByVal bytesTotal As Long)
Dim Data$
WinSock.GetData Data, vbString
MsgBox Data
End Sub 
```

OnConnect 事件似乎永远不会触发，但与普通 WinSock 控件一起工作正常，有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:23:01.333

对于这些场景，您不希望任何“阻塞”调试，包括`MsgBox`IDE 中断——事件会丢失。

例如，将调试日志累积到字符串或文件中，并在运行后查看结果。

# mysql - 创建视图：单个表的多个外键关系

> ID：11183204
> 
> 赞同：0
> 
> 时间：2012-06-25T03:36:08.577
> 
> 标签：mysql

我有一个表 tblNoComp，它有两列，两个外键都指向 tblPackage.ID。tblNoComp 的目的是存储哪些包不兼容，只需将这些包的 ID 存储在两列中，`OneID`然后`TwoID`.

可能不是存储它的最佳方式，但由于多个包与其他包不兼容，它似乎是最合乎逻辑的。

尝试创建一个并排显示 tblPackage.Name 的视图 - 我有以下内容，但不确定如何获取`TwoID`包名称..

选择`tblNoComp`。`OneID`, `tblPackages`. `Package`, `tblNoComp`. `TwoID`, `tblPackages`. `Package` FROM tblNoComp, tblPackages WHERE ( `tblNoComp`. `OneID`= `tblPackages`. `PID`)

目前第二`tblPackages`。`Package`只是显示 OneID 名称，而不是 TwoID .. 不知道如何解决？

谢谢！

--抱歉，如果是一个简单的问题，我已经搜索了一个小时，但还不能正确描述我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:39:36.607

您在评论中的代码：

```
SELECT
  tblNoComp.OneID,
  tblPackages.Package AS OneIDPackageName,
  tblNoComp.TwoID,
  tblPackages.Package AS TwoIDPackageName
FROM
  tblNoComp
  LEFT JOIN tblPackages
    ON tblNoComp.OneID = tblPackages.PID 
```

别名列而不是表。别名背后的想法是`JOIN`将同一个表两次作为两个不同的表，使用两个不同的别名。您只加入一次并尝试*使用*它两次。

你可能更倾向于这样：

```
SELECT
  tblNoComp.OneID,
  tblOnePackages.Package AS OneIDPackageName,
  tblNoComp.TwoID,
  tblTwoPackages.Package AS TwoIDPackageName
FROM
  tblNoComp
  LEFT JOIN tblPackages AS tblOnePackages
    ON tblNoComp.OneID = tblOnePackages.PID
  LEFT JOIN tblPackages AS tblTwoPackages
    ON tblNoComp.TwoID = tblTwoPackages.PID 
```

（请注意，我没有方便的 MySQL 语法检查器，因此可能需要对其进行调整才能正常运行。）

请注意，同一个表在两个不同的键上连接了两次，并且每次都给它一个不同的别名，以便可以在`SELECT`子句中将它作为两个单独的表引用。

# java - 提取相对于类路径的资源

> ID：11183205
> 
> 赞同：3
> 
> 时间：2012-06-25T03:36:12.890
> 
> 标签：java, spring, embedded-resource

我正在尝试从我的类路径中提取某些类型的文件并将其放入临时目录，并且我希望根据其“类路径的相对路径”来提取资源。

我可以使用 Spring 的 PathMatchingResourcePatternResolver 来检索匹配资源的列表。例如，我正在`classpath*:/xyz/**/*.bar`从类路径中扫描，假设在类路径中我有一个`/xyz/some/dir/foo.bar`，并且我想将此资源提取到`MY_TEMP_DIR/some/dir/foo.bar`. 无论如何要获取此资源到类路径的相对路径，以便我可以相应地构造输出位置？

PathMatchingResourcePatternResolver 只返回资源数组，我只能检索资源的 URL，但我也想知道这个资源的“根”目录是什么。返回的资源可以是各种“格式”，例如`jar:file:/some/path/somejar.jar!/xyz/some/dir/foo.bar`等`file:/some/output/directory/xyz/some/dir/foo.bar`。

有人可以给我提示如何实现资源的提取或类路径根相对路径查找吗？

谢谢

* * *

***编辑：***

我不确定如果我以另一种方式提出我的问题是否更好：

有什么方法可以知道资源的“类路径的相对路径”是什么？只需使用我之前的示例，如果我扫描`classpath*:/xyz/**/*.bar`并获得资源`file:/some/output/directory/xyz/some/dir/foo.bar`，有什么方法可以获得该资源的“相对路径”（`/xyz/some/dir/foo.bar`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:16:36.977

You you use the `PathMatchingResourcePatternResolver.getResources(String pattern)` to get a list of resources matching the pattern, it should be trivial to parse the URL returned by Resource.getURL().

It should look something like `jar:file://path/to/jar.jar!/path/to/your/resource/foo.bar`

# python - 如何使用 BeautifulSoup 在网页中找到具有特定类的元素？

> ID：11183208
> 
> 赞同：3
> 
> 时间：2012-06-25T03:36:19.237
> 
> 标签：python, beautifulsoup

我试图在带有此代码的网页中找到一个带有“数据”类的表。

```
import urllib2
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://www.cbssports.com/nba/draft/mock-draft').read())

rows = soup.findAll("table.data")
print rows 
```

但是，即使我确定该页面上存在具有“数据”类的表，我也没有得到任何行。使用 BeautifulSoup 在网页上查找具有“数据”类的元素的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T08:46:08.583

如果要拾取行，则需要以下内容

```
import urllib2
from BeautifuSoup import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://www.cbssports.com/nba/draft/mock-draft').read())

# if there's only one table with class = data
table = soup.find('table', attrs = {'class' : 'data'})

# if there are multiple tables with class = data
table = soup.findAll('table', attrs = {'class' : 'data'})[n]
# suppose you need the n-th table of the list returned

rows = table.findAll('tr') # gives all the rows, you can set attrs to filter 
```

然后您还可以遍历列：

```
for row in rows:
    cols = row.findAll('td')
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:11:43.667

你想要类似的东西

```
rows = soup.find_all('table', attrs = {"class": "data"}) 
```

而不是您当前的行（已测试）。元素的类是一个属性，因此您可以在 中按属性进行过滤`find_all`。此行从您的示例页面返回一个大表格元素。

# android - 在android中处理大位图

> ID：11183210
> 
> 赞同：2
> 
> 时间：2012-06-25T03:36:41.140
> 
> 标签：android, bitmap, android-camera, high-resolution

我只想从我的应用程序中打开本机相机应用程序以捕获照片并将其设置为我的屏幕的背景图像，然后在单击按钮时旋转它。如果使用 3MP 相机拍摄，照片会旋转 n 次。如果我将相机分辨率设置为 5MP 或更高，则应用程序将在第 5 次单击按钮时强制关闭（照片旋转 4 次）。

```
Bitmap rotatedBitmap = null; 
int curAngle = 0; 

private Bitmap rotateImageBitmap(Bitmap capturedPhotoBitmap) {       

if(rotatedBitmap != null  ) 
{ 
    rotatedBitmap = null; 
} 

Matrix matrix = new Matrix(); 
curAngle = (curAngle + 90) % 360; 
matrix.postRotate(curAngle); 
rotatedBitmap =  Bitmap.createBitmap(capturedPhotoBitmap, 0, 0,  capturedPhotoBitmap.getWidth(),  capturedPhotoBitmap.getHeight(), matrix, true); 

return rotatedBitmap;         
 } 
```

这来自开发人员指南....
1\. 移动设备通常具有受限的系统资源。Android 设备可以为单个应用程序提供低至 16MB 的内存。

2\. 位图占用大量内存，尤其是照片等丰富的图像。例如，Galaxy Nexus 上的相机可拍摄高达 2592x1936 像素（5 兆像素）的照片。如果使用的位图配置是 ARGB_8888（Android 2.3 以后的默认配置），则将此图像加载到内存中大约需要 19MB 内存（2592*1936*4 字节），会立即耗尽某些设备上的每个应用程序的限制。

**现在大多数手机都有 8mp 或更高的摄像头。所以图片会很大。** 如何在不影响相机分辨率的情况下旋转我的照片“n”次。我需要压缩它吗？什么是最好的方法？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:44:12.150

我不会将图像放在 RAM 中的堆上，而是将图像加载（读取：缓冲区）到应用程序缓存目录中的磁盘上。[http://developer.android.com/reference/android/content/Context.html#getCacheDir()](http://developer.android.com/reference/android/content/Context.html#getCacheDir())

图像在磁盘上后，我会使用样本大小将其膨胀到内存中以减少内存消耗。

请参阅[http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)和[http://developer.android.com/reference/android/graphics/BitmapFactory.html](http://developer.android.com/reference/android/graphics/BitmapFactory.html)

您选择的样本大小与位图的大小（以像素为单位）和您将图像加载到的视图的大小（以像素为单位）有关。

要查找图像的尺寸，请使用 BitmapFactory.Options 对象中的“inJustDecodeBounds”选项。

请记住，您选择的样本大小应该是 2 的幂。数字越大，节省的内存越多，但图像质量越低。

样本大小 2 = 大小的 1/4。样本大小 4 = 大小的 1/16，等等。

# android - Android apk 大小会影响应用性能吗？

> ID：11183212
> 
> 赞同：3
> 
> 时间：2012-06-25T03:36:53.730
> 
> 标签：android, apk

我在我的应用程序中使用 OCR 库。仅当用户选择 OCR 选项时才会加载“OCR.so”库。这个 OCR 库将我的 apk 文件大小从 700KB 增加到 4.7MB。我想知道这种apk大小的增加是否会对应用程序的性能产生影响，即使在用户没有选择OCR选项的情况下也是如此？

也就是说apk大小是4.7MB，但是如果我不调用System.loadLibrary("OCR")的话，apk大小会不会因为内存限制对app的性能有影响呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T05:50:38.167

操作系统不会根据 apk 文件大小分配内存。APK 文件只不过是一个 zip 文件，它在安装过程中被解压到一个文件夹中。打开应用程序时，操作系统会加载第一个可执行文件，在您的情况下，该文件将是主本机库。然后哪个本机库加载其他库，其他库文件也被加载。否则，如果您不调用 system.loadlibrary，则操作系统不会将其加载到内存中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T05:09:15.473

肯定会有延迟。让我用简单的话解释一下——内存分配。当应用程序启动时，操作系统会评估、优化和分配内存以进行处理，大小越大，约束越多，启动延迟也越大。

现在，在启动后的应用程序生命周期内，取决于很多因素。但简而言之，降低 apk 会更好。

# linux - 在 linux 中编译可视化 C++ 代码？

> ID：11183217
> 
> 赞同：1
> 
> 时间：2012-06-25T03:37:16.133
> 
> 标签：linux, visual-c++, gcc, opencv, cmake

我有一个执行图像匹配的可视 C++ 程序。我正在使用openCV。我希望在 linux 服务器上运行 exe。但我不知道如何在 linux 中编译可视化 C++ 代码？

任何人都可以在这方面帮助我。. .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T06:13:07.537

如果您在 MSVC 中编写 C++ 代码时做得很聪明，那么您从一开始就将所有依赖于平台的代码（即 Microsoft 对 C++ 的扩展和仅限 Windows 的库的使用）与其余代码隔离开来，并且确切地知道在哪里做修改使其也可以在 Linux 上运行。

不幸的是，您的问题暗示这是您第一次尝试跨平台编码，在这种情况下，您可能在您的代码中到处乱扔微软主义，并且必须一个一个地挑选它们。启动编译器，查看它的错误消息，然后从那里开始。祝你好运，这将是一个痛苦，但也是你下一个项目非常宝贵的一课。

（我不是在这里指责 MSVC。对于那些用 GNU 主义乱扔代码然后想在 MSVC 上编译的人来说也是如此……）

通常的构造如下所示：

```
#if defined( _MSC_VER )
// Microsoft version
#elif defined( __GNUC__ )
// GCC version
#else
#error Platform / compiler not supported.
#endif 
```

**编辑：**如果不是很明显，我们的想法是将上面的 ifdef 代码保持在绝对最小值。使用 typedef 的转发函数（即 log() 以使用 Unix 或 Windows 日志记录），或者 - 如果所有其他方法都失败 - 宏。*不要*在代码中使用以上所有内容，将其隔离在几个头文件/实现文件中，保存在单独的源文件夹中。

您还需要熟悉 Makefile（无耻插件：[Makefile 教程](http://wiki.osdev.org/Makefile)），因为 MSVC 项目文件在 Linux 上不起作用（显然）。另一方面，Makefile 也可以在 Windows 上很好地工作（例如，通过[Cygwin](http://www.cygwin.com)，如果您想深入研究如何在命令行上调用 MSVC 编译器，大致如下：

```
ifeq ($(OSTYPE),linux)
    CC := gcc
else
    CC := cl.exe
endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T07:44:15.580

还有 winelib 和其他东西。将您的构建系统指向使用 winegcc/wineg++ 作为您的编译器，然后继续使用它。它可以编译相当大的 Windows 程序子集。如果您只需要让一两个程序运行，这应该是一个不错的选择。

# nhibernate - JSON.Net + NHibernate：将字段设置为可保存，但不可更新

> ID：11183221
> 
> 赞同：0
> 
> 时间：2012-06-25T03:38:06.290
> 
> 标签：nhibernate, json.net

我所有的数据模型都有字段 DateAdded。当用户（通过 MVC Web API）发送保存模型的请求时，服务器端使用 DateTime 对象填充此字段，然后通过休眠继续保存该对象。

现在考虑更新的情况。即使用户手动修改了 DateAdded 字段，也不应该更改数据库中的值。无论用户提供什么，有没有一种方法可以指定不更新此字段？如果该字段不是由用户填充的，则 datetime 字段变为空，这也不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:43:24.400

原来有一个你可以在 hbm 文件中设置的属性！

只需在您不想更新的所有属性上设置 update="false" 即可。很抱歉在浪费宝贵的 SO 资源之前没有做更多的研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:44:53.857

将所有映射更改为：

```
<property name="DateAdded" update="false">
<column name="DateAdded" sql-type="smalldatetime" not-null="true" />
 </property> 
```

# ios - 以下屏幕截图代码是否可以在 App Store 应用程序中使用？

> ID：11183224
> 
> 赞同：0
> 
> 时间：2012-06-25T03:38:16.900
> 
> 标签：ios, screenshot

我正在使用此代码在 iOS 5.0 应用上的应用中截取屏幕截图：

```
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

这是为将提交到 App Store 的应用程序截屏的可接受方式吗？我听说其他应用程序因截屏而被拒绝，所以我想确保这是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:33:57.113

该代码可用于截屏。

您听说过应用程序被拒绝，因为有（或曾经有）一个函数，`UIGetScreenImage`会返回屏幕截图。然而，苹果后来决定停止允许应用程序使用该功能，并开始拒绝使用该功能的应用程序。

[允许使用的公告`UIGetScreenImage`](https://devforums.apple.com/thread/34908)

[禁止使用公告`UIGetScreenImage`](https://devforums.apple.com/message/266836#266836)

# java - Java子执行祖先的方法

> ID：11183226
> 
> 赞同：1
> 
> 时间：2012-06-25T03:38:25.463
> 
> 标签：java, inheritance, extends

共有三个类 - `Children`、`Father`和`Ancestor`。`Children`extends`Father`和`Father`extends `Ancestor`，如下所示：

```
public class Ancestor {
    public void test() {
    }
}

public class Father extends Ancestor {
    @Override
    public void test() {
    }
}

public class Children extends Father {
    @Override
    public void test() {
    }
} 
```

如何在儿童的 test() 方法中使用祖先的 test() 方法？我想跳过父亲的 test() 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:03:06.820

你不能。Java 不允许做类似`super.super.method()`. [这个出色的答案](https://stackoverflow.com/a/586397/465378)中概述了其原因，但最重要的是它违反了封装。

如果该功能确实是必要的，并且做这样的事情是有意义的，你总是可以在你的`Father`类中添加一个只调用该方法的`super.test()`方法，但是做这样的事情通常是不好的做法。除非您有一些*非常*好的推理，否则请重新考虑您的代码。真的没有必要从 or 调用`this`方法`super`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:03:32.887

简短的回答是，你不能。它违反了封装，通常是不好的做法。完成您想要的更好的方法是使 Ancestor.test() 抽象并具有新的受保护方法，例如 Ancestor.baseTest(); 然后，您可以从父亲、孩子和任何其他想要访问逻辑的子类中调用 Ancestor.baseTest()。

# java - 如何实现消息发送系统？

> ID：11183227
> 
> 赞同：2
> 
> 时间：2012-06-25T03:38:32.127
> 
> 标签：java, generics, interface

我有一个专门的对象类，它向它的组件发送消息，以便它们可以根据需要进行更改。对象类允许我混合和匹配组件，这样我就可以拥有具有相似功能的不同对象，而无需庞大的继承树。（我认为这被称为组件模式。）这就是我想要做的：

```
//MyObject.java
public class MyObject {

    private HashSet<MyComponent> components_;

    void send(Message message) {
        for (MyComponent component : components_) {
            component.receive(message);
        }
    }

    // other unrelated methods and variables...

}

// MyComponent.java
public interface MyComponent {

    public void receive(Message message);

    // other unrelated methods...

}

// RendererComponent.java
public class RendererComponent implements MyComponent {

    public void receive(Message message) {
        if (message.getType() == Message.Type.POSITION_CHANGED) {
            Point positionDifference = message.getInfo();
            redraw(positionDifference);
        } else if (message.getType() == Message.Type.SCORE_CHANGED) {
            Integer score = message.getInfo();
            redraw(score);
        } // else if...
    }

    private void redraw(Point positionDifference) {
        // draws item at new position...
    }

    private void redraw(Integer score) {
        // draws the new score...
    }

    // other unrelated methods and variables..
} 
```

我有很多组件，它们会收到许多不同类型的消息。如何编写我的 Message 类，以便从中获取不同类类型的信息？我是否需要更改组件类处理消息的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:52:09.707

> 我有一个专门的对象类，它向它的组件发送消息，以便它们可以根据需要进行更改。

做这种事情的正常（和简单）方法是使用 Java 的内部事件发布机制。您定义一个表示事件的类，以及事件侦听器/消费者必须使用“事件发生”回调方法实现的接口。事件生产者有一个注册事件消费者的注册方法，并保存一个已注册消费者的列表。当生产者想要发送事件时，它会创建一个事件对象，然后为所有注册的消费者调用“事件发生”回调。

这种方法在整个 Java 的 GUI 库和其他地方都使用过。它是轻量级和高效的......并且可能比通过消息传递来做这种事情更好。

* * *

开始学习事件的一个好地方是Swing 教程中的[事件监听器简介。](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T05:12:10.010

听起来您想要的是一个[发布/订阅（或发布/订阅）系统](http://en.m.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)。查看[`EventBus`Guava 库中的实现](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/eventbus/package-summary.html)。

# iphone - UINavigationController 导航栏可见性设置不起作用

> ID：11183237
> 
> 赞同：0
> 
> 时间：2012-06-25T03:40:37.437
> 
> 标签：iphone, user-interface

我正在尝试在我的应用程序中添加一些导航控制器，它喜欢：

在我的索引页面视图控制器中，我尝试像这样初始化导航控制器：

```
-(void)viewDidLoad{
    ...
    //allocate a navigation controller.
    myNavigationController = [[UINavigationController alloc]init];
    myNavigationController.delegate = self;
    myNavigationController.navigationBar.hidden = YES;
    [self.view addSubview:myNavigationController.view];

    [myNavigationController pushViewController:tabViewController animated:YES];
    [self presentModalViewController:myNavigationController animated:YES];
} 
```

在这里，索引页面视图控制器是我的应用程序的根视图控制器，在这里它只是一个普通的 UIViewController。

```
[myNavigationController pushViewController:tabViewController animated:YES]; 
```

这里我推入导航控制器的 tabViewController 是一个自定义的 tabview 控制器，它利用容器视图来保存选项卡按钮，还保存一个用于切换选项卡的导航控制器。

这里的问题是：

```
myNavigationController.navigationBar.hidden = YES; 
```

因为我已经使导航栏不可见，所以当我的自定义视图控制器显示时它不会显示，但是当我想使用导航控制器切换到其他视图控制器并且我还希望导航栏可见时：

```
myNavigationController.navigationBar.hidden = NO;
MyViewController *toSwitchNC = [[MyViewController alloc]init];
[myNavigationController pushViewController:toSwitchNC animated:YES]; 
```

导航栏将不再显示。我也试过把：

```
self.navigationController.navigationBar.hidden = NO 
```

在 MyViewController 的 viewDidLoad、ViewDidAppear 甚至导航控制器的委托方法中，它也没有显示导航栏。

那么它有什么问题呢？为什么我一开始将导航栏初始化为不可见，即使我将隐藏标志设置为false，它也不会再次显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:07:26.253

好的，我已经通过删除我的索引页面视图控制器中的导航控制器容器来解决这个问题。这可能是一个愚蠢的问题，因为苹果已经在开发者文档中正式声明导航视图控制器应该尽可能地放置在视图堆栈中。由于 IOS 是一个封闭的系统，谁知道 WTH 是在地下进行的，除了苹果。

# delphi - 获取重载方法的地址位置

> ID：11183243
> 
> 赞同：8
> 
> 时间：2012-06-25T03:42:10.310
> 
> 标签：delphi, overload-resolution, object-address

如何获取重载的函数/过程/方法的所有地址位置？

例如，Dialogs.MessageDlgPosHelp 有两个不同版本的重载 - 一个没有默认按钮，一个有默认按钮。如何获取这两个函数的地址位置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T05:14:23.253

根据[Thomas Mueller](https://plus.google.com/u/0/108684844040122144755)[`this thread`](http://www.delphigroups.info/2/1d/510395.html)指出的内容，您可以定义具有相同签名的类型作为您想要获取其地址的方法（对于每个重载）。如果您随后声明这些类型的变量并将方法指针分配给它们，您将确保编译器为您已知的变量类型选择正确的重载，而且如果它们不会在代码中的任何地方使用，它也不会忽略它们（某些重载可能不会在您的二进制文件中链接）。

所以根据他的想法，它可能会寻找这样的[`MessageDlgPosHelp`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Dialogs.MessageDlgPosHelp)函数重载：

```
type
  TMessageDlgPosHelp1 = function(const Msg: string; DlgType: TMsgDlgType;
    Buttons: TMsgDlgButtons; HelpCtx: Longint; X, Y: Integer;
    const HelpFileName: string): Integer;
  TMessageDlgPosHelp2 = function(const Msg: string; DlgType: TMsgDlgType;
    Buttons: TMsgDlgButtons; HelpCtx: Longint; X, Y: Integer;
    const HelpFileName: string; DefaultButton: TMsgDlgBtn): Integer;

procedure TForm1.Button1Click(Sender: TObject);
var
  MessageDlgPosHelp1: TMessageDlgPosHelp1;
  MessageDlgPosHelp2: TMessageDlgPosHelp2;
begin
  MessageDlgPosHelp1 := MessageDlgPosHelp;
  MessageDlgPosHelp2 := MessageDlgPosHelp;
  ShowMessage(Format('%p; %p', [@MessageDlgPosHelp1, @MessageDlgPosHelp2]));
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T11:15:45.717

您还可以创建派生类，将这个重载方法公开为具有不同名称的简单方法，将该类的任何实例转换为新类，并轻松使用包装器方法的地址。

# c# - 在 for 语句中获取值作为返回值

> ID：11183244
> 
> 赞同：0
> 
> 时间：2012-06-25T03:42:19.637
> 
> 标签：c#, loops, for-loop, iteration

Id 需要迭代方法中的 i 作为 Iteration() 的返回值....目前它错误地说它没有返回值。我假设它在 for 语句中。

```
using System;

class Program
{
int i = 1;

static string globalValue = "I was declared outside any method";

static void Main()
{
    for (int b = 0; b < 101; b++)
    {
        Console.Write(Iteration());
    }
}
static string FizzBuzz()
{
    string f = "word1";

    return f;
}
static string Buzz()
{
    string b = "word2";

    return b;
}
static int Iteration()
{
    for (int i = 0; i < 101; i++)
    {
        return i;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T03:44:04.590

C# 编译器只有有限的导航代码的能力，以确定您的函数是否总是返回一个值。虽然您编写的代码总是*会*返回，但编译器并没有“足够聪明”来解决这个问题。

只需`return -1;`在循环后的函数末尾加上 a 即可满足编译器的要求。

当然，您现在拥有的代码没有多大意义，因为`Iteration()`总是会返回`0`。它不会遍历整个循环，因为函数只能返回一个值。（迭代器块是语法异常，但不是*实际*异常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:48:11.817

如果不编译，如果你说迭代函数抱怨所有代码路径不返回整数，那是因为返回包含在 for 中，编译器不知道循环是否真的会运行. 也许：

```
static int Iteration()
{
   int retValue = 0;     // some default value
   for (int i = 0; i < 101; i++)
   {
       retValue = i;
       break;         // break when you get the iteration you want           
   }

   return retValue;
} 
```

尽管代码实际上没有意义，但它应该对您有用。

# iphone - iOS 相机捕捉视图已经？

> ID：11183248
> 
> 赞同：0
> 
> 时间：2012-06-25T03:42:56.503
> 
> 标签：iphone, ios

我想要一个将图像捕获到本地文件或让用户从本地照片库中选择图像的相机视图。我想也许有人为此编写了很好的库/代码。也许我可以利用它。已经有好的了吗？谢谢。我只是避免重新发明轮子:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T03:46:19.497

UIImagePickerController 内置于 iOS 并且非常易于使用，它允许您想要的所有功能。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

对于用户拍摄新照片：

" `UIImagePicker *imagePicker`"

```
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera] == YES)
{
    imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;
    imagePicker.delegate = self;
    imagePicker.allowsEditing = NO;
    imagePicker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
    imagePicker.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:imagePicker animated:YES];
} 
```

或从设备中选择现有照片：

```
if( ![UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum] ) return;

imagePicker.delegate = self;
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
imagePicker.allowsEditing = NO;

[self presentModalViewController:imagePicker animated:YES]; 
```

一定要包括这个！

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    [self dismissModalViewControllerAnimated:YES];
} 
```

# mysql - DELETE 查询仍在运行并存在严重问题

> ID：11183249
> 
> 赞同：0
> 
> 时间：2012-06-25T03:43:14.230
> 
> 标签：mysql

嗨昨晚我使用了这个查询

```
DELETE FROM `messages` WHERE  last_change < 1332201600 && last_change !=0 
```

但第一个问题是在这个 mysql 使我的 last_change 字段 =0 之后，第二个问题是 8 小时后消息表变得越来越少，例如去 1,000,000 然后去 2,000,000 然后去 1,500,000 ...... ..... 问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:51:54.463

不要以整数形式给出`timestamp`值，而是尝试这个查询，因为没有类似的运算符`&&`并且不建议使用`!=`：

```
DELETE FROM `messages` WHERE  `last_change` < TIMESTAMP('1332201600') AND NOT `last_change` 0; 
```

Coz，一个关于这个查询的例子是：

```
SELECT TIMESTAMP('2003-12-31 12:00:00','12:00:00');
    -> '2004-01-01 00:00:00' 
```

# google-chrome - 无法在 Google Chrome 中打开 IndexedDB 数据库

> ID：11183250
> 
> 赞同：1
> 
> 时间：2012-06-25T03:43:16.860
> 
> 标签：google-chrome, indexeddb

Google Chrome 中的这段代码有什么问题

```
r = webkitIndexedDB.open(db_name,1);
r.onsuccess = success_callback;
r.onerror = error_callback;
r.onupgradeneeded = function(e){
   var db = e.currentTarget.result;
   db.createObjectStore('os_name',{keyPath:id,autoIncrement:true});
}; 
```

它适用于Firefox（mozIndexedDB），但不适用于chrome。即使 onerror 也不会被触发。无论如何我得到这个错误

```
Uncaught Error: NOT_FOUND_ERR: DOM IDBDatabase Exception 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:30:47.757

`onupgradeneeded`谷歌浏览器不支持该功能，相反，您应该使用在数据库打开事件 `setversion`开始时启动数据库的方法，如下所述：http: [//www.html5rocks.com/en/tutorials/indexeddb/todo/#toc -第2步](http://www.html5rocks.com/en/tutorials/indexeddb/todo/#toc-step2)`onsuccess`

您的代码应如下所示：

```
r.onsuccess = function(e) {
    var v = "1.0";
    var db = e.currentTarget.result;
    // We can only create Object stores in a setVersion transaction;
    if(v!= db.version) {
      var setVrequest = db.setVersion(v);

      setVrequest.onfailure = error_callback;
      setVrequest.onsuccess = function(e) {
        var store = db.createObjectStore('os_name',{keyPath:id,autoIncrement:true});
        ...
      };
    }
    ...
} 
```

2013 年 11 月编辑：这是一个过时的答案，因为 Google Chrome 仅支持使用`onupgradeneeded`事件升级数据库。

# c# - 托管在 Sharepoint 中的 ASP.NET ascx 控件在尝试保存文件时获取 System.UnauthorizedAccessException

> ID：11183252
> 
> 赞同：1
> 
> 时间：2012-06-25T03:43:34.153
> 
> 标签：c#, sharepoint, permissions, sharepoint-2007, ascx

我们有一个 ascx 自定义控件（不是 Web 部件）托管在一个特殊的 Sharepoint 页面中。此页面允许用户将文件上传到我们的服务器。不幸的是，权限问题阻止了 Sharepoint 将文件保存到网络位置。

归属于基于 Sharepoint 2007 站点的应用程序池的网络帐户具有对该位置的“修改”和“读取”访问权限。

我们已经使用应用程序池帐户使用的凭据登录到另一台计算机，并且可以在指定的网络位置创建目录和文件而不会出现任何问题。

Sharepoint 是否有可能尝试使用其他帐户来保存这些文件，而不是在 IIS7 的应用程序池中设置的那个？

我们得到的错误：

**消息：**对路径 '\opal\gwl\pictures\L36' 的访问被拒绝。

**堆栈跟踪：** System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) at System.IO.Directory.InternalCreateDirectory(String fullPath, String path, DirectorySecurity dirSecurity) at System.IO.Directory.CreateDirectory(String path, DirectorySecurity directorySecurity ) 在 ECan.SharePoint.Web.Applications.MyECan_WaterMeterFormDatalogger.SavePhotos()

**异常类型：** System.UnauthorizedAccessException

**用户：**系统帐户

ascx 代码隐藏文件中 SavePhotos 函数的代码：

```
protected void SavePhotos()
{
    string wellNo = WellNo.Value;
    string epoWaterMeterID = EPO_WaterMeterID.Value;
    string dirRoot = ConfigurationManager.AppSettings["PhotoDir"];
    string map = wellNo.Substring(0, wellNo.IndexOf('/'));

    int photoSaveCount = 1;
    foreach (string filePath in Request.Files)
    {
        HttpPostedFile file = (HttpPostedFile)Request.Files[filePath];
        if (file.InputStream.Length > 0)
        {
            try
            {
                // Create dir if does not exist
                string dir = dirRoot + map;
                if (!Directory.Exists(dir)) Directory.CreateDirectory(dir);

                // Save file
                file.SaveAs(dir + @"\" + wellNo.Replace('/', '_') + "-" + epoWaterMeterID.ToString() + "-" + photoSaveCount.ToString() + ".jpg");

                photoSaveCount++;
            }
            catch (Exception ex)
            {
                Logger.Write(ex);
            }
        }
    }
} 
```

任何人都有任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:42:14.770

我认为您必须以提升的权限调用 SavePhotos。即使用户没有完全控制权限，使用提升的权限运行代码也会以完全控制权限执行指定的方法。

见链接：

[http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges(v=office.12).aspx)

请尝试以下代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
   SPSecurity.CodeToRunElevated elevatedGetSitesAndGroups = new SPSecurity.CodeToRunElevated(SavePhotos);
   SPSecurity.RunWithElevatedPrivileges(elevatedGetSitesAndGroups);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:25:59.877

您是否尝试设置新创建的目录或文件夹的权限？您可以通过使用 System.Security.AccessControl 命名空间中的 DirectorySecurity 类，特别是该类的 SetAccessControl 方法来做到这一点。

# java - 文件读取进度

> ID：11183253
> 
> 赞同：1
> 
> 时间：2012-06-25T03:43:35.003
> 
> 标签：java

我正在使用 java 读取大小为 4gb 的 TSV 文件，我想知道 java 是否有办法告诉我在程序运行时它通过任务的距离。我在想文件流可能能够告诉我它读取了多少字节，我可以用它做一些简单的数学运算。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T04:03:37.583

普通流或阅读器不计算读取的字节数/字符数。

我想你可能正在寻找[`ProgressMonitorInputStream`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ProgressMonitorInputStream.html).

如果您不想要/不需要 Swing 集成，那么另一种选择是编写 FilterReader 或 FilterInputStream 的自定义子类，它计算读取的字符/字节并提供读取计数的 getter。然后将自定义类放入您的输入堆栈中的适当位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T03:46:58.270

当您从流中读取时，请记录读取的字节数。例如，如果您直接从流中读取字节数组：

```
 long bytesReadTotal = 0L;
    int bytesRead = stream.read(bytes);
    while (bytesRead != -1) {
        bytesReadTotal += bytesRead;
        // process these bytes ...
        bytesRead = stream.read(bytes)
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T03:52:26.397

如果你通过 HTTP 读取这个文件，有一个名为“Content-Length”的 header 可以告诉你应该读取的总字节数，然后你就知道你正在阅读的进度。

如果你通过TCP/UDP读取文件，我猜你应该同时写客户端和服务器进行文件传输，那么你应该先将文件长度发送给客户端，然后读取文件。

如果你只是读取本地文件，这不是问题。

# asp.net-mvc-3 - 为什么我会收到此错误：运算符“&&”不能应用于 System.Linq.IQueryable 类型的操作数？

> ID：11183255
> 
> 赞同：0
> 
> 时间：2012-06-25T03:43:52.483
> 
> 标签：asp.net-mvc-3, linq-to-sql

我正在尝试从实体中检索数据并填充 viewModel 属性，如下所示：

```
viewModel.Enrollments = db.Enrollments.Where(b => b.classDays == "Monday") && (db.Enrollments.Where(b => b.CourseID == courseID); 
```

但我得到一个运算符`&&`不能应用于类型`System.Linq.IQerable<>`错误的操作数。你能帮忙找到所有周一班的同一个 ID 吗？

我试过这个： `viewModel.Enrollments = db.Enrollments.Where(b => b.classDays == "Monday")`但我得到了所有星期一的课程，但我想将它们限制为特定的 courseID。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T03:48:56.200

你需要检查你的括号。这段代码甚至不会编译：

```
viewModel.Enrollments = db.Enrollments.Where(b => b.classDays == "Monday")
                    && (db.Enrollments.Where(b => b.CourseID == courseID); 
```

在该代码中，您尝试`&&`在两次调用之间使用`.Where()`，这将返回一个`IQueryable`. 您可能的意思是在`&&` *子句*`.Where()`中使用：

```
viewModel.Enrollments = db.Enrollments.Where(b => (b.classDays == "Monday")
                                               && (b.CourseID == courseID)); 
```

或者可能附加第二个`.Where()`子句：

```
viewModel.Enrollments = db.Enrollments.Where(b => b.classDays == "Monday")
                                      .Where(b => b.CourseID == courseID); 
```

请注意，它`.Where()`可以无限链接，本质上导致在`AND`结果查询中依次应用每个子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:52:00.190

&& 运算符应与其中的条件一起使用，而不是与注册集一起使用（在您的情况下）

尝试这个：

```
viewModel.Enrollments = db.Enrollments.Where(b => (b.classDays == "Monday") && (b.CourseID == courseID)); 
```

# scheduling - AVPF调度算法

> ID：11183267
> 
> 赞同：1
> 
> 时间：2012-06-25T03:45:47.810
> 
> 标签：scheduling, rtp, rfc, rtcp

根据 RFC4585：

> 如果 R 的 FB 消息没有按照 5 被其他接收方 FB 消息抑制，则当达到 te 时，R 必须发送包含其 FB 消息的（最小）复合 RTCP 数据包。然后 R 必须设置 allow_early = FALSE，必须重新计算 tn = tp + 2*T_rr，并且必须将 tp 设置为前一个 tn。一旦达到新计算的 tn，无论 R 是发送其下一个常规 RTCP 数据包还是因为 T_rr_interval 抑制它，它必须再次设置 allow_early = TRUE。

假设在时间 t1'
t1---t1'------t2------------t3传输了一个早期的 RTCP 数据包
，并且 t1, t2, t3 是常规时间将发送 RTCP 数据包。RFC 建议如果在时间 t1' 发送数据包，则在时间 t2 的 RTCP 数据包将被丢弃，并且在 t3 之前不允许反馈消息。
然而，后来在同一个 RFC 中，据说

> 必须定期发送完整的复合 RTCP 数据包。这些
> 数据包也可以包含一个或多个 FB 消息。常规 RTCP 数据包的传输
> 安排如下：
> 
> 如果 T_rr_interval == 0，则传输必须遵循本文档第 3.2 节和第 3.4 节中指定的规则，并且必须遵守第 3.5.2 节中指定的 tn 调整（即，如果早期 RTCP 数据包传输，则跳过一次常规传输已经发生了）。当按照 [1] 达到 tn 时，将重新考虑计时器。Regular RTCP 数据包在定时器重新考虑后传输。每当发送或
> 抑制常规 RTCP 数据包时，allow_early 必须设置为 TRUE，并且 tp, tn 必须
> 按照 [1] 进行更新。在第一次传输常规 RTCP
> 数据包后，Tmin 必须设置为 0。

这似乎是矛盾的，因为该段是说当一个RTCP数据包被抑制时，allow_early必须设置为TRUE，所以似乎allow_early应该在时间t2设置为TRUE。

# linux - 远程访问 Linux Box - udp 打孔？

> ID：11183268
> 
> 赞同：1
> 
> 时间：2012-06-25T03:45:48.917
> 
> 标签：linux, remote-access

我想知道是否有人可以帮助我阐明我正在尝试解决的特定问题。

一般的想法是我有一个在 localhost（linux 机器）上运行的 web 应用程序。我希望用户可以选择单击一个按钮，该按钮将打开与主机的远程隧道，以便可以从本地主机网络外部管理该框。加密对话也是理想的。

是否有处理这种客户端/服务器类型设置的开源项目可以帮助我？任何有益的方向的指针将不胜感激。

我知道这是可以做到的，只是想知道我应该关注哪些工具或关注领域。

# iphone - NSMutableArray 索引删除

> ID：11183270
> 
> 赞同：0
> 
> 时间：2012-06-25T03:45:56.150
> 
> 标签：iphone, ios, xcode

我正在使用 制作我的老虎机应用程序`iCarousel`，我`iCarousel`包含的`NSDocumentDirectory`这些图像中的图像来自我的`ImagePicker`. 所以这就是我的应用程序的工作方式，当用户按下按钮时，`iCarousel`旋转。当它停止时，显示该项目 3 秒钟，然后将其删除。

我的问题是当我转到另一个视图时，已删除的索引/项目又在那里。即使我去不同的观点，如何维护我的阵列。仅在应用程序重新启动之前，不会显示已删除的索引/项目，例如保存数组。谢谢您的帮助。

// 我的数组

```
- (void)viewDidLoad
{
    self.images = [NSMutableArray new];  
    for(int i = 0; i <= 100; i++) 
    { 
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDir = [paths objectAtIndex:0];

        NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"images%d.png", i]]; 
            if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
                [images addObject:[UIImage imageWithContentsOfFile:savedImagePath]]; 
            } 
    } 
}

- (void)viewWillAppear:(BOOL)animated {    
    spinButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [spinButton addTarget:self action:@selector(spin) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:spinButton];
}
- (void) carouselDidEndScrollingAnimation:(iCarousel *)carousel{
    [NSTimer scheduledTimerWithTimeInterval:0.56 //this arranges the duration of the scroll
                                     target:self
                                   selector:@selector(deleteItem)
                                   userInfo:nil
                                    repeats:NO];   
} 
```

//旋转和删除方法

```
- (void)spin {
        [carousel scrollByNumberOfItems:-35 duration:10.7550f];
}

-(void) deleteItem {
    //Removes the object chosen 
        NSInteger index = carousel.currentItemIndex;
        [carousel removeItemAtIndex:index animated:YES];
        [images removeObjectAtIndex:index];
} 
```

我需要的是，当索引/项目被删除时，即使我转到其他视图，它也不会暂时显示。只有在应用关闭并再次打开后才会重新启动视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:20:13.180

您的问题是您`NSMutableArray`每次进入视图时都在创建图像。

正如@Saleh 所说，您应该将数组放在视图控制器之外。要在 中做到这一点`appDelegate`，就像他建议的那样，请执行以下操作：

在**AppDelegate.h**中声明：

```
@property( strong, nonatomic) NSMutableArray *images; 
```

在**AppDelegate.m**中：

```
@synthesize images;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Read the images after the existing code ....

    self.images = [NSMutableArray array];
    for(int i = 0; i <= 100; i++) 
    { 
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDir = [paths objectAtIndex:0];

        NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"images%d.png", i]]; 
        if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
            [images addObject:[UIImage imageWithContentsOfFile:savedImagePath]]; 
        } 
    }     

    return YES;
} 
```

然后在您的**ViewController.m**中：

```
#import "AppDelegate.h" 
```

并改变你的`viewDidLoad`方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.images = ((AppDelegate *)[[UIApplication sharedApplication] delegate]).images;
} 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:50:56.597

使用数组的一个实例，您只初始化一次。将数组放入 appDelegate 中，这将使它成为整个应用程序的单例。

# xml - Silverlight 的 C# XML 序列化

> ID：11183274
> 
> 赞同：0
> 
> 时间：2012-06-25T03:47:05.220
> 
> 标签：xml, asp.net-mvc-3, visual-studio-2010, silverlight, serialization

我正在尝试将一个对象从我的 ASP .NET C# MVC3 项目发送到同一解决方案中的 Silverlight 项目。

这是我用来序列化和反序列化的代码，我从 CodeProject (http://www.codeproject.com/Articles/233914/Passing-Objects-between-ASP-NET-and-Silverlight-Co) 获得的

```
 public string getSerializedGameData()
    {

            Game g = Game.populateByID(this.gameID);
            MemoryStream mem = new MemoryStream();
            XmlSerializer xs = new XmlSerializer(typeof(Game));
            mem.Seek(0, SeekOrigin.Begin);
            xs.Serialize(mem, g);
            byte[] data = mem.GetBuffer();
            return Encoding.UTF8.GetString(data, 0, data.Length);
    }

    public static Game GetDeserializedGameObject(string xmlData)
    {
        StringReader sr = new StringReader(xmlData);
        XmlSerializer xs = new XmlSerializer(typeof(Game));
        return (Game)xs.Deserialize(sr);
    } 
```

这就是似乎有效的序列化和反序列化。

在我的 ASPX 页面中，我放了：

```
<input type="hidden" id="game" value="<%=HttpUtility.HtmlEncode(Game.populateByID(Convert.ToInt32(Request["gameID"])).getSerializedGameData()) %>" /> 
```

它应该获取对象，将其构建为字符串，并将其编码为 HTML。然后将其嵌入为隐藏字段。

要解码它，我正在使用：

```
 string s = HttpUtility.HtmlDecode(HtmlPage.Document.GetElementById("game").GetProperty("value").ToString());
            Game g = Game.GetDeserializedGameObject(s); 
```

现在，当我运行时，我得到了错误：

```
Data at the root level is invalid. Line 443, position 8 
```

查看数据，我看到有效的 XML，直到...

```
...
  </gameEvents>
</Game>����������� 
```

除了有数千个无效字符外，我删除了它们以保持简短。

看看我看到的来源：

```
...
  &lt;/gameEvents&gt;

&lt;/Game&gt;" /> 
```

因此，这似乎不是编码问题。

最初我认为数据缓冲区中多余的字符，但我没有看到它在源代码中出现，如果 XML Serialize 和 Deseriailize 已经过测试，那就留下 HTMLDecode ..但我什么都找不到错了。

我意识到我可能会在最后一个 > 之后剥离所有内容，但我想知道是什么原因造成的，因为我不应该这样做。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:12:20.600

您应该在 MemoryStream 上使用`.ToArray()`而不是。`.GetBuffer()`缓冲区可能大于实际内容，因此最后的无效字节。此外，您应该通过将 IDisposable 资源包装在`using`语句中来正确处理它们：

```
public string getSerializedGameData()
{
    Game g = Game.populateByID(this.gameID);
    using (MemoryStream mem = new MemoryStream())
    {
        XmlSerializer xs = new XmlSerializer(typeof(Game));
        xs.Serialize(mem, g);
        byte[] data = mem.ToArray();
        return Encoding.UTF8.GetString(data, 0, data.Length);
    }
}

public static Game GetDeserializedGameObject(string xmlData)
{
    using (StringReader sr = new StringReader(xmlData))
    {
        XmlSerializer xs = new XmlSerializer(typeof(Game));
        return (Game)xs.Deserialize(sr);
    }
} 
```

现在我们已经修复了服务器端代码，视图也需要修复。你应该在你的视图中使用 HTML 助手，它会负责正确编码隐藏字段中的值：

```
<%= Html.Hidden(
    "game", 
    Game.populateByID(Convert.ToInt32(Request["gameID"])).getSerializedGameData(),
    new { id = "game" }
) %> 
```

# matlab - 过滤矩阵或元胞数组中的浮点数

> ID：11183277
> 
> 赞同：0
> 
> 时间：2012-06-25T03:47:23.403
> 
> 标签：matlab

元胞数组由 400x1 双元素组成（并且可以扩展到 1,000,000 x 1）。我想用 -1.000 过滤所有条目。过滤浮动值的最佳方法是什么？我应该在单元格数组还是矩阵中进行？或者我应该通过创建一个 for 循环、遍历每个元素并将非 -1.000 条目存储到新数组中来做到这一点？

我使用 textscan 从文件中读取值，然后将其转换为矩阵以绘制 cdf 图。但是，我想从图中消除所有带有 -1 的条目。

* * *

```
fid = fopen('t1_error.txt','r');
C = textscan(fid, '%.3f');            
fclose(fid);

A = cell2mat(C);
[ycdf,xcdf] = cdfcalc(A);
ycdf = ycdf(2:length(ycdf));
plot(xcdf, ycdf, 'LineWidth', 2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:57:48.740

@Ansari 有正确的想法，但我很确定在你的情况下不需要查看容差，因为 -1 是无效值的标志，并且精确地以浮点表示，因此你不会得到公差技巧旨在解决的任何奇怪的舍入问题。

```
Z = (A == -1);   % Z(i) = 1 if A(i) == -1,
                 %        0 otherwise

A1 = A(~Z);      % Subset of A excluding all -1 values. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:35:01.587

你永远不会在 Matlab 中编写 for 循环，除非你尝试了所有其他可能性；）记住，它是面向矩阵的编程。

如果要过滤掉-1，只需执行以下操作：

```
A = magic(6);
A(1,3) = -1.23;
A(2:4,3:5) = -1.00;
% the -1.23 value is preserved by the following line
A(A==-1.0000) = 0; 
```

或者，如果您想知道那些 -1 在哪里：

```
A = magic(6);
A(2:4,3:5) = -1;
minus_one_loc = find(A == -1);
A(minus_one_loc) = 0; 
```

所以，如果我很好地理解你想要什么，这就是答案。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:18:55.757

你可以简单地做类似的事情

```
tolerance = 1e-6;
A(A+1 < tolerance) = []; 
```

`-1`在将公差设置为您的应用程序的某个可接受值后过滤掉非常接近的值。

# c# - 优化六角网格上的移动

> ID：11183282
> 
> 赞同：1
> 
> 时间：2012-06-25T03:48:26.650
> 
> 标签：c#, recursion, hexagonal-tiles

我正在制作一个基于回合的六角网格游戏。玩家选择单位并在六角网格中移动它们。网格中的每个图块都属于特定的地形类型（例如沙漠、丘陵、山脉等），并且每种单位类型在地形上移动时具有不同的能力（例如，有些可以轻松越过山脉，有些比较困难，有些一点也不）。

每个单位都有一个移动值，每个图块根据其地形类型和单位类型进行一定的移动。例如，在沙漠上移动需要花费 1 辆坦克，在沼泽上需要花费 4 辆，并且无法在所有山脉上移动。飞行单位以 1 为代价移动所有东西。

我遇到的问题是，当一个单位被选中时，我想突出显示它周围的一个区域，显示它可以移动的位置，这意味着计算出通过周围六角形的所有可能路径，每条路径将采取多少移动并点亮基于该信息的瓷砖。

我用递归函数得到了这个，发现计算时间太长了，我把函数移动到一个线程中，这样它就不会阻塞游戏，但线程仍然需要大约 2 秒来计算一个可移动区域单位移动为 8。它的递归超过一百万次，这显然是有问题的。

我想知道是否有人对如何优化这个问题有聪明的想法。

这是我目前正在使用的递归函数（它的 C# 顺便说一句）：

```
private void CalcMoveGridRecursive(int nCenterIndex, int nMoveRemaining)
{
    //List of the 6 tiles adjacent to the center tile
    int[] anAdjacentTiles = m_ThreadData.m_aHexData[nCenterIndex].m_anAdjacentTiles;

    foreach(int tileIndex in anAdjacentTiles)
    {
        //make sure this adjacent tile exists
        if(tileIndex == -1)
            continue;

        //How much would it cost the unit to move onto this adjacent tile
        int nMoveCost = m_ThreadData.m_anTerrainMoveCost[(int)m_ThreadData.m_aHexData[tileIndex].m_eTileType];

        if(nMoveCost != -1 && nMoveCost <= nMoveRemaining)
        {
            //Make sure the adjacent tile isnt already in our list.
            if(!m_ThreadData.m_lPassableTiles.Contains(tileIndex))
                m_ThreadData.m_lPassableTiles.Add(tileIndex);

            //Now check the 6 tiles surrounding the adjacent tile we just checked (it becomes the new center).
            CalcMoveGridRecursive(tileIndex, nMoveRemaining - nMoveCost);
        }
    }
} 
```

在递归结束时，m_lPassableTiles 包含该单元可能到达的所有图块的索引列表，并且它们会发光。

这一切都有效，只是时间太长了。有谁知道更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:00:25.317

如您所知，使用递归函数，您希望使问题尽可能简单。看起来它仍然试图一次咬掉太多。几个想法：

1.  尝试使用`HashSet`结构来存储`m_lPassableTiles`？您可以通过这种方式避免这种`Contains`情况，这通常是一项昂贵的操作。

2.  我还没有在脑海中彻底测试过这个逻辑，但是你能在`foreach`循环之前设置一个基本案例吗？即，那个`nMoveRemaining == 0`？

3.  在不知道您的程序是如何内部设计的情况下，我希望`m_anAdjacentTiles`无论如何只包含现有的图块，因此您可以消除该检查（`tileIndex == -1`）。不是一个巨大的性能提升，但使您的代码更简单。

顺便说一句，我认为这样做的游戏，如文明 V，只会在用户建议将单位移动到某个位置时计算移动成本。换句话说，你选择了一块瓷砖，它会显示它需要走多少步。这是一个更有效的操作。

当然，当你移动一个单位时，会显示周围的土地——但我认为它只会显示单位可以在一个“回合”内移动的土地，然后随着它的移动显示更多的土地。如果您选择将几个转弯移动到未知区域，您最好仔细观察或一次转一圈。:)

**（之后...）**

...等等，一百万次递归？是的，我想这是正确的数学：`6^8`（8 是可用的动作）——但是你的网格真的那么大吗？1000x1000？该单位实际上可以穿越多少格？假设不同的地形类型，在任何给定方向上平均可能有 4 或 5 个？

如果我错了，请纠正我（因为我不知道你的底层设计），但我认为存在一些重叠......主要重叠。它正在检查已检查的相邻瓷砖的相邻瓷砖。我认为唯一能让你免于无限递归的是检查剩余的动作。

当一个图块被添加到 时`m_lPassableTiles`，将它从接收到您的函数的任何相邻图块列表中删除。你在你的行中做类似的事情`Contains`......如果你附加该`if`语句以包括你的递归调用怎么办？我想，这应该可以将您的递归调用从一百万以上减少到……最多数千。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:07:13.767

感谢大家的意见和建议。我通过用[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)替换递归函数解决了这个问题，它工作得很好。

# bash - 从 HTML 文件中提取 .co.uk 网址

> ID：11183285
> 
> 赞同：1
> 
> 时间：2012-06-25T03:48:49.323
> 
> 标签：bash, url, tld

需要从包含大量条目、一些 .com .us 等的文件中提取 .co.uk 网址。我只需要 .co.uk 的网址。有什么办法吗？PD：我正在学习 bash

编辑：

代码示例：

```
<a href="http://www.mysite.co.uk/" target="_blank">32</a>
<tr><td id="Table_td" align="center"><a href="http://www.ultraguia.co.uk/motets.php?pg=2" target="_blank">23</a><a name="23"></a></td><td id="Table_td"><input type="text" value="http://www.ultraguia.co.uk/motets.php?pg=2" size="57" readonly="true" style="border: none"></td> 
```

注意一些重复

重要：我也需要所有链接，损坏或 404

在网上的某处找到了这段代码：

```
cat file.html | tr " " "\n" | grep .co.uk 
```

输出：

```
href="http://www.domain1.co.uk/"
value="http://www.domain1.co.uk/"
href="http://www.domain2.co.uk/"
value="http://www.domain2.co.uk/" 
```

认为我很接近

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:07:39.363

一种使用方式`awk`：

```
awk -F "[ \"]" '{ for (i = 1; i<=NF; i++) if ($i ~ /\.co\.uk/) print $i }' file.html 
```

输出：

```
http://www.mysite.co.uk/
http://www.ultraguia.co.uk/motets.php?pg=2
http://www.ultraguia.co.uk/motets.php?pg=2 
```

如果您只对唯一的 url 感兴趣，请将输出通过管道传输到`sort -u`

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:24:40.733

由于还没有答案，我可以为您提供一个丑陋但强大的解决方案。您可以利用该`wget`命令来获取文件中的 URL。通常，`wget`用于从这些 URL 下载，但通过拒绝`wget`它通过 DNS 查找的时间，它不会解析任何内容而只是打印 URL。然后，您可以对其中包含 .co.uk 的那些 URL 进行 grep。整个故事变成：

```
wget --force-html --input-file=yourFile.html --dns-timeout=0.001 --bind-address=127.0.0.1 2>&1 | grep -e "^\-\-.*\\.co\\.uk/.*" 
```

如果你想去掉每一行剩余的时间戳信息，你可以通过管道输出`sed`，如`| sed 's/.*-- //'`.

如果你没有`wget`，那么你可以在[这里得到它](http://www.gnu.org/software/wget/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:28:40.773

以下方法使用真正的 HTML 引擎来解析您的 HTML，因此在面对 CDATA 部分或其他难以解析的语法时会更加可靠：

```
links -dump http://www.google.co.uk/ -html-numbered-links 1 -anonymous \
  | tac \
  | sed -e '/^Links:/,$ d' \
        -e 's/[0-9]\+.[[:space:]]//' \
  | grep '^http://[^/]\+[.]co[.]uk' 
```

它的工作原理如下：

*   `links`（基于文本的网络浏览器）实际上检索该站点。
    *   Using`-dump`导致渲染的页面被发送到标准输出。
    *   使用`-html-numbered-links`请求编号的链接表。
    *   使用`-anonymous`调整默认值来增加安全性。
*   `tac`在行序列表中反转 Links 的输出
*   `sed -e '/^Links:/,$ d'`删除链接表之后（预反转，之前）的所有内容，确保实际页面内容不会被错误解析
*   `sed -e 's/[0-9]\+.[[:space:]]//'`从各个链接中删除编号的标题。
*   `grep '^https\?://[^/]\+[.]co[.]uk'`仅查找其主机部分以 . 结尾的链接`.co.uk`。

# cocoa - 以编程方式将关闭按钮添加到 NSWindow

> ID：11183287
> 
> 赞同：5
> 
> 时间：2012-06-25T03:48:51.270
> 
> 标签：cocoa, button, nswindow

我想以`NSWindow`编程方式向一个关闭按钮添加一个关闭按钮。我可以让按钮显示，但没有鼠标悬停或鼠标按下效果。当我单击按钮时，我的“选择器”似乎永远不会被调用。我不太确定出了什么问题，为什么这很烦人。

这是我一直在搞砸的：

```
closeButton = [NSWindow standardWindowButton:NSWindowCloseButton forStyleMask:self.styleMask];

NSView *themeFrame = [[self contentView] superview];
NSRect c = [themeFrame frame];  // c for "container"
NSRect aV = [closeButton frame];    // aV for "accessory view"
NSRect newFrame = NSMakeRect(                                                c.size.width - aV.size.width - 5,  // x position                                                c.size.height - aV.size.height - 5,    // y position                                           aV.size.width,  // width                                                aV.size.height); // height

[closeButton setFrame:newFrame];    
[themeFrame addSubview:closeButton];
[closeButton setAutoresizingMask:NSViewMaxXMargin | NSViewMinYMargin];  
[closeButton setEnabled:YES];
[closeButton setTarget:self];
[closeButton setAction:NSSelectorFromString(@"testClick:") ]; 
```

其中“testClick”只是我班级的一个成员函数，定义如下：

```
- (void)testClick:(id)sender 
```

问题似乎是调用：
[themeFrame addSubview:closeButton];

themeFrame 所在的位置：`[[self contentView] superview]`只需将按钮添加到`[self contentView]`作品中，但我希望将其添加到标题栏中。

请不要界面生成器...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:59:38.513

潜在问题 #1)

你打电话给“ `NSSelectorFromString`”的方式对我来说似乎不正确。我认为您不能在 Objective C 中通过这种方式传递参数。

尝试这个：

```
[closeButton setAction: @selector(closeWindow:)]; 
```

并创建一个新的 " `closeWindow:`" 动作，如下所示：

```
- (void) closeWindow: (id) sender; 
```

关闭窗口。

潜在问题 #2)

代替：

```
closeButton = [NSWindow standardWindowButton:NSWindowCloseButton forStyleMask:self.styleMask];
NSView *themeFrame = [[self contentView] superview]; 
```

为什么不使用：

```
NSWindow * parentWindow = [[self contentView] window];
if(parentWindow)
{
   closeButton = [parentWindow standardWindowButton:NSWindowCloseButton forStyleMask:self.styleMask];
} 
```

# blackberry - 在侦听文件更改时，在 BlackBerry 中使用设备时延迟持久性

> ID：11183290
> 
> 赞同：0
> 
> 时间：2012-06-25T03:49:04.533
> 
> 标签：blackberry, java-me

我尝试根据 FileExplorer 示例在 BlackBerry 中侦听文件更改事件，但每当我添加或删除文件时，它总是显示“**在使用设备时延迟持久性**”，我无法捕捉到任何东西。
这是我的代码：

```
public class FileChangeListenner implements FileSystemJournalListener{

private long _lastUSN; // = 0;     
public void fileJournalChanged() {
    long nextUSN = FileSystemJournal.getNextUSN();
    String msg = null;       
    for (long lookUSN = nextUSN - 1; lookUSN >= _lastUSN && msg == null; --lookUSN) 
    {
        FileSystemJournalEntry entry = FileSystemJournal.getEntry(lookUSN);
        // We didn't find an entry
        if (entry == null) 
        { 
            break;
        }
        // Check if this entry was added or deleted
        String path = entry.getPath();            
        if (path != null) 
        {  
            switch (entry.getEvent()) 
            {
                case FileSystemJournalEntry.FILE_ADDED:
                    msg = "File was added.";                       
                    break;

                case FileSystemJournalEntry.FILE_DELETED:
                    msg = "File was deleted.";
                    break;
            }
        }
    }        
    _lastUSN = nextUSN;        
    if ( msg != null ) 
    {           
        System.out.println(msg);
    }
}
} 
```

这是调用者：

```
Thread t = new Thread(new Runnable() {
            public void run() {
                new FileChangeListenner();
                try {
                    Thread.sleep(5000);
                    createFile();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }                   
            }
        });
        t.start(); 
```

创建文件方法工作正常：

```
 private void createFile() {
    try {
        FileConnection fc = (FileConnection) Connector
                .open("file:///SDCard/newfile.txt");
        // If no exception is thrown, then the URI is valid, but the file
        // may or may not exist.
        if (!fc.exists()) {
            fc.create(); // create the file if it doesn't exist
        }
        OutputStream outStream = fc.openOutputStream();
        outStream.write("test content".getBytes());
        outStream.close();
        fc.close();
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
} 
```

和输出：

```
 0:00:44.475: Deferring persistence as device is being used.
 0:00:46.475: AG,+CPT
 0:00:46.477: AG,-CPT
 0:00:54.476: VM:+GC(f)w=11
 0:00:54.551: VM:-GCt=9,b=1,r=0,g=f,w=11,m=0
 0:00:54.553: VM:QUOT t=1
 0:00:54.554: VM:+CR
 0:00:54.596: VM:-CR t=5
 0:00:55.476: AM: Exit net_rim_bb_datatags(291)
 0:00:55.478: Process net_rim_bb_datatags(291) cleanup started
 0:00:55.479: VM:EVTOv=7680,w=20
 0:00:55.480: Process net_rim_bb_datatags(291) cleanup done
 0:00:55.481: 06/25 03:40:41.165 BBM FutureTask Execute: net.rim.device.apps.internal.qm.bbm.platform.BBMPlatformManagerImpl$3@d1e1ec79
 0:00:55.487: 06/25 03:40:41.171 BBM FutureTask Finish : net.rim.device.apps.internal.qm.bbm.platform.BBMPlatformManagerImpl$3@d1e1ec79 
```

我还尝试直接在模拟器的 sdcard 中删除线程或创建或删除文件，但它没有帮助。
请告诉我我的问题在哪里。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:28:59.363

您实例化`FileChangeListenner`，但您从不注册它，也不要将它作为变量保存在任何地方。您可能需要添加此调用

```
FileChangeListenner listener = new FileChangeListenner();
UiApplication.getUiApplication().addFileSystemJournalListener(listener); 
```

`listener`只要您想接收事件，您可能还需要保留引用 ( )。但也许不是（`addFileSystemJournalListener()`电话可能会这样做）。但是，您至少需要对 的调用`addFileSystemJournalListener()`，否则您将永远不会`fileJournalChanged()`被回调。

# python - 不完全有两个元素

> ID：11183292
> 
> 赞同：0
> 
> 时间：2012-06-25T03:49:18.143
> 
> 标签：python, django, django-admin

我正在启动 python 和 django。我想制作和“添加”页面以将数据添加到 sqlite3。

```
1\. #my admin.py file
2\. from django.contrib import admin
3\. from jobs.models import Location
4\. from jobs.models import Job
5\. 
6\. class JobAdmin(admin.ModelAdmin):
7\.     fieldsets = [(None, {'fields': ['pub_date']},
8\.                         {'fields': ['job_title']},
9\.                         {'fields': ['job_description']},)
10\. #       ('More info',  {'fields': ['location']},)
12\.    ]
13\. 
14\. class LocationAdmin(admin.ModelAdmin):
15\.     list_display = ('city', 'state', 'country')
16\. 
17\. admin.site.register(Job,JobAdmin)
18\. admin.site.register(Location, LocationAdmin) 
```

如果我取消注释第 10 行，则会出现错误。

```
Exception Type:      TypeError
Exception Value:     'tuple' object is not callable
Exception Location:  /home/python/djproject/jobs/admin.py in JobAdmin, line 10 
```

如果我像上面一样评论第 10 行，则有错误。

```
Exception Type:     ImproperlyConfigured
Exception Value:    'JobAdmin.fieldsets[0]' does not have exactly two elements.
Exception Location: /usr/lib/python2.6/site-packages/django/contrib/admin/validation.py in validate_base, line 291 
```

字段“位置”是外键。数据库中作业的字段中没有数据，我想创建一个添加页面将数据插入数据库。我的models.py是：

```
#my models.py
from django.db import models

class Location(models.Model):
    city = models.CharField(max_length=50)
    state = models.CharField(max_length=50, null=True, blank=True)
    country = models.CharField(max_length=50)

    def __str__(self):
        if self.state:
            return "%s, %s, %s" % (self.city, self.state, self.country)
        else:
            return "%s, %s" % (self.city, self.country)

class Job(models.Model):
    pub_date = models.DateField()
    job_title = models.CharField(max_length=50)
    job_description = models.TextField()
    location = models.ForeignKey(Location)

    def __str__(self):
        return "%s (%s)" % (self.job_title, self.location) 
```

我不知道该怎么做，谁能给我一些参考或建议？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:01:51.697

如果您需要取消注释该行，那么您需要在该行之前添加一个**逗号**。

```
class JobAdmin(admin.ModelAdmin):
 fieldsets = [(None, {'fields': ['pub_date']},
                     {'fields': ['job_title']},
                     {'fields': ['job_description']},),
    ('More info',  {'fields': ['location']},)
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T04:06:06.737

第 9 行末尾缺少“，”（逗号）。

# ruby-on-rails - 如何根据连接模型的属性对列表进行排序

> ID：11183304
> 
> 赞同：0
> 
> 时间：2012-06-25T03:51:22.407
> 
> 标签：ruby-on-rails, activerecord

我有piece_lineup加入的片断和阵容

piece_lineup 是一个具有多个直通关系的连接并具有属性“位置”

我将如何根据连接模型中的相关位置属性对片段列表进行排序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:01:11.217

我认为现在可以这样做：

```
Piece.joins(:piece_lineups).order("piece_lineups.some_attribute DESC") 
```

如果您只想根据“属性”排序，那么“加入”是最好的。

如果您确实希望这是模型，那么您只需要：

```
class Piece < ActiveRecord::Base
  has_many :lineups, :order => 'lineups.postion'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:21:39.040

尝试

```
Piece.includes(:piece_lineups).where('some condition').order('piece_lineups.position') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:50:03.600

试试这个：

```
class Piece < ActiveRecord::Base
  has_many :piece_lineups
  has_many :lineups, :through => :piece_lineups, 
             :order => "piece_lineups.position"
end 
```

现在`piece.lineups`根据您的要求进行排序。

# ruby-on-rails - 用户更新其个人资料后重定向到新路径

> ID：11183305
> 
> 赞同：0
> 
> 时间：2012-06-25T03:51:42.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller

重定向有一个有趣的问题。在我的用户更新页面（在 /username/edit），用户可以更新他们的姓名、电子邮件和**用户名**。更新完成后，如果用户更新他们的用户名，他们被重定向的路径（在这种情况下，它`edit_user_path`会导致错误：

```
Cannot redirect to nil! 
```

我的用户控制器如下所示：

```
def update
    find_user

    if @user.update_attributes(params[:user])
        sign_in @user
        flash[:success] = "User updated"
        redirect_to edit_user_path
    else
        flash[:notice] = "There was an error updating this user:"
        redirect_to edit_user_path
    end
end 
```

`find_user`是一种查找方法`@user`。

本质上，一旦发生此更新，我如何强制更新路由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T03:55:07.237

也许尝试：

```
edit_user_path(@user) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:56:19.283

路由器需要用户 id 才能知道要编辑哪个用户。

```
redirect_to edit_user_path(@user) 
```

# mule - 无法在 ia64 上运行 mule 3.1.2

> ID：11183311
> 
> 赞同：0
> 
> 时间：2012-06-25T03:52:32.013
> 
> 标签：mule, itanium

我需要在 ia64 上运行 mule 3.1.2，但在下面显示错误：

```
MULE_HOME is set to /df8003/df8600/esb/mule-standalone-3.1.2
Unable to locate any of the following binaries:
  /df8003/df8600/esb/mule-standalone-3.1.2/lib/boot/exec/wrapper-linux-ia-32
  /df8003/df8600/esb/mule-standalone-3.1.2/lib/boot/exec/wrapper-linux-ia-64 (Found but not executable.)    
  /df8003/df8600/esb/mule-standalone-3.1.2/lib/boot/exec/wrapper 
```

我已经设置了权限。我需要做任何配置吗？

# css - 阻止文本在 a:hover 上移动，边框顶部

> ID：11183312
> 
> 赞同：3
> 
> 时间：2012-06-25T03:52:32.997
> 
> 标签：css

我有一个浮动`h2 a`标签，在悬停时应用了 6px `border-top`。当我将鼠标悬停在文本上时，它会将文本和其下方的元素向下推。如何阻止边框移动文本和其他元素？谢谢！

我的 CSS：

```
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  border: 0;
  font-size: 100%;
  font: inherit;
  margin: 0;
  padding: 0
}

article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {
  display: block
}

body {
  line-height: 1
}

ol, ul {
  list-style: none
}

blockquote,
q {
  quotes: none
}

blockquote:before,
blockquote:after,
q:before,
q:after {
  content: none
}

table {
  border-collapse: collapse;
  border-spacing: 0
}

.container {
  width: 960px;
  margin: 0px auto;
}

.logo {
  float: left;
  clear: both;
  margin-top: 30px;
}

body {
  background-image: url("../images/bg.jpg");
  border-top: 8px solid black;
}

h2 a {
  font-family: arial;
  text-decoration: none;
  text-transform: uppercase;
  font-size: 94px;
  color: black;
  float: right;
  margin: 0px;
  padding-top: 20px;
}

h2 a:hover {
  border-top: 6px solid orange;
  padding-top: 0px;
}

.clocknotes {
  width: 437px;
  margin: 0px auto;
  clear: both;
}

.brand-three {
  clear: both;
  margin-top: 85px;
}

.brand-three {
  font-size: 200px;
  line-height: 140px;
  float: left;
  letter-spacing: -20px;
}

.quote {
  clear: both;
  width: 417px;
  float: right;
  text-align: right;
  margin-top: -250px;
  font-size: 26px;
}

.social {
  clear: both;
  float: right;
  margin-top: -80px;
}

.footer {
  clear: both;
  top: 50px;
  position: relative;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T04:11:03.463

**CSS：**

```
h2 a:hover {
    border-top: 6px solid orange;
    padding-top:14px;

} 
```

**演示：http:** [//jsfiddle.net/rathoreahsan/VyRZW/](http://jsfiddle.net/rathoreahsan/VyRZW/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T04:06:56.297

减少等量的顶部填充，而不是零：

```
h2 a:hover {
border-top: 6px solid orange;
padding-top: 14px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T03:54:04.243

给出这个代码：

```
h2 a {border-top: 6px solid #fff;} /* Should match your background color */ 
```

# jquery - jQuery 多选自动选择

> ID：11183313
> 
> 赞同：1
> 
> 时间：2012-06-25T03:52:34.003
> 
> 标签：jquery, multi-select

我在某个时候有这个工作，因为过去我有一个关于这个的问题对我有帮助，但现在我丢失了代码，所以我回到我的问题并试图让它工作，但现在不是。 ..

请有人帮我解释为什么这不再起作用了？

***代码***

```
var valArr = [3, 4];
size = valArr.length;
for (i = 0; i < size; i++) {
    $("#secondary_group option[value='" + valArr[i] + "']").
                                            attr("selected", 1);
    $("#secondary_group").multiselect("refresh");
} 
```

**演示：http:** [//jsfiddle.net/VXbLE/](http://jsfiddle.net/VXbLE/)

它应该做的是根据它的值选择选项，基本上，您可以从 jsfiddle 中读取代码并弄清楚。

我是 JavaScript/jQuery 的初学者，所以我不完全理解它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:57:14.307

```
var valArr = [3, 4];
size = valArr.length; // detect array length
// looping over array
for (i = 0; i < size; i++) {

    // $("#secondary_group option[value='" + valArr[i] + "']")
    // select the option with value match with the valArr
    // from the select with id=secondary_group and if match found
    // .attr("selected", 1);  make that option as default selected

    $("#secondary_group option[value='" + valArr[i] + "']")
                                            .attr("selected", 1);
}

// after selecting the options
// refresh the select using below code
// And this code should belong outside of
// above loop, because
// refreshing within loop will only 
// select last matched element
// not all matched

$("#secondary_group").multiselect("refresh"); 
```

[**演示**](http://jsfiddle.net/VXbLE/2/)

# android - 位图的最佳使用方式

> ID：11183314
> 
> 赞同：0
> 
> 时间：2012-06-25T03:52:45.197
> 
> 标签：android, bitmapfactory

我只是想知道最好的使用方法是`BitmapFactory`什么？我对解码流和解码源感到困惑。在这两个上哪个是最好用的？我在这里看到了一些使用位图解码器资源的代码和许多 android 程序员和开发人员的一些解码流，这是最好的使用方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T03:56:53.873

没有真正的“最佳方式”来使用 BitmapFactory。它提供了对情境有益的实用程序。

如果您从 Web 拉取位图，您可能有一个输入流提供位图数据。或者，如果磁盘上有图像，则可以打开文件系统的 InputStream。无论哪种情况，您都可能需要使用 decodeStream 调用。

您可以使用 decodeResource 从您的 res 文件夹之一解码位图，例如 drawable 文件夹或 raw 文件夹，这有时也很有用。

# css - 在悬停时将 CSS 应用于 LinkBut ton

> ID：11183320
> 
> 赞同：0
> 
> 时间：2012-06-25T03:53:47.363
> 
> 标签：css

我在标签 ul 中有一个链接按钮。我为ul设置了css。我想在悬停时为 Linkbutton 设置前景色

```
.MainMenu
{
position: absolute;
top:135px;
left:15px;    
background-color: #033E6B;
color:White;
border-style:double;
border-color:White;
}

.MainMenu li
{
float:right;
}

.MainMenu li a
{
color:Black;
}

.MainMenu li a:hover
{
color:Red;
}

 <ul class="MainMenu">
    <li><a>Home</a></li>
     <li><asp:LinkButton id="lnk" runat="server" PostBackUrl="Default.aspx">Home</a>   </li>
 </ul> 
```

我使用此代码，它适用于标签 a，但不适用于 LinkBut​​ton！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T03:59:58.310

您的标记有错误，请将其更改`<asp:LinkButton id="lnk" runat="server" PostBackUrl="Default.aspx">Home</a>`为`<asp:LinkButton id="lnk" runat="server" PostBackUrl="Default.aspx" Text="Home" />`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T04:03:02.310

您的代码中存在错误，请使用以下标记`LinkButton`：

```
<asp:LinkButton 
    id="lnk"
    runat="server" 
    PostBackUrl="Default.aspx" 
    Text="Home">
</asp:LinkButton> 
```

并记得关闭你的`<ul>`标签。

希望能帮助到你！

# awk - 对字段进行排序时 awk 中的语法错误

> ID：11183330
> 
> 赞同：1
> 
> 时间：2012-06-25T03:55:02.997
> 
> 标签：awk

大家好，我正在使用 awk 来打印输出，对它们进行排序，然后将其存储在一个文件中，但是当我插入排序命令时，我收到了一个语法错误。这是我下面的代码。。请让我知道如果我做对了

代码

`id !~ /^\s*$/){print id,ip[id];}|sort -k 1 > "file"} for (key in h) {split(key,values," "); if(values[1] !~ /^\s*$/ && values[2] !~ /^\s*$/){print values[1],values[2],h[key]}|sort -k 1 -k 2 > "file"}}`

`awk: ^ syntax error`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:07:20.063

这应该工作，改变：

```
... | sort -k 1 > "file" } ... 
```

到

```
... | "sort -k 1 > file" } ... 
```

和你的其他相同的变化`sort`。即，将整个`sort`命令括在双引号内。

# drupal - 简单的 Drupal PHP 连接帮助

> ID：11183337
> 
> 赞同：0
> 
> 时间：2012-06-25T03:55:40.173
> 
> 标签：drupal, drupal-7, concatenation, drupal-themes

我正在开发一个自定义的 drupal 用户页面，并在 php 中遇到了一个连接问题。我是一个 nube，所以提前感谢您的帮助。

当我输入此代码时：

```
<h2><?php echo About; ?> <?php print render($user_profile['field_first_name']); ?> </h2> 
```

它分成两行

> 关于
> 詹姆斯

...代替...

> 关于詹姆斯

请帮我连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:15:43.410

这是因为 render() 函数将 div 和其他 html 标签添加到您的内容中。如果您检查了源代码，您将看到不必要的 div 标签。

如果你需要获取原始值，你可以试试这个。在您的 tpl.php 文件中，添加以下行：

```
<?php print '<pre>'.print_r($user_profile['field_first_name'], 1).'</pre>'; ?> 
```

现在您将看到一个格式良好的变量列表。

它会说这`$user_profile['field_first_name']`是一个数组，它会列出整个数组。现在，找到你想要的值。在大多数情况下，它类似于`$user_profile['field_first_name']['und'][0]['value']`.

现在，您需要做的就是使用这个值。

```
<h2><?php print 'About '.check_plain($user_profile['field_first_name']['und'][0]['value']); ?> </h2> 
```

这会将值放在同一行。注意 check_plain() 函数使该值可以安全地与另一个 html 标记一起使用。如果您有任何问题，请告诉我们，让我们尝试解决：）

# ios - 自定义 UITableViewCell 不显示所有属性

> ID：11183340
> 
> 赞同：0
> 
> 时间：2012-06-25T03:56:19.670
> 
> 标签：ios, xcode, uitableview, nib

这里有点奇怪的问题：

我有一个`UITableViewCell`带有一堆标签和一个图像视图的自定义笔尖。我将文件所有者设置为`UITableViewDelegate`/ `Datasource`，我在 nib 文件中设置了自定义类，并将其加载到我的 VC 中，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier = @"BuildCell";
    BuildCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle]loadNibNamed:@"BuildCell" owner:self options:nil];
        cell = [topLevelObjects objectAtIndex:0];
    }
    ...
    return cell
} 
```

奇怪的是，每当我将 cellIdentifier 设置为与故事板中的 ID 不同的 ID 时，一切都会正常加载（但这是一个问题，从那时起我无法让 segue 正常工作）。当我将单元格标识符设置为匹配时，只有一些属性可以正常工作。这怎么可能？？

这是完整的实现`cellForRowAtIndexPath`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier = @"BuildCell";
    BuildCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle]loadNibNamed:@"BuildCell" owner:self options:nil];
        cell = [topLevelObjects objectAtIndex:0];
    }

    Build *build = [self.builds objectAtIndex:indexPath.row];

    //cell.school.text = build.school;
    cell.device.text = build.sdk;
    cell.buildType.text = build.config;
    cell.creator.text = [NSString stringWithFormat:@"By %@", build.creator];
    cell.time.text = build.dateCreated;

    switch (build.buildStatus) {
        case kSuccess:
            cell.imageView.image = [UIImage imageNamed:@"greensmall.png"];
            break;
        case kInProgress:
            cell.imageView.image = [UIImage imageNamed:@"yellowsmall.png"];
            break;
        default:
            cell.imageView.image = [UIImage imageNamed:@"redsmall.png"];
            break;
    }        

    return cell;        
} 
```

唯一正确加载的部分是 imageView。没有任何标签出现。有任何想法吗？

# java - Android中的发送和接收套接字实现

> ID：11183342
> 
> 赞同：0
> 
> 时间：2012-06-25T03:56:52.080
> 
> 标签：java, android, sockets

我目前正在开发android和服务器之间的套接字通信，这是一个在终端中运行的简单java程序。一切进展顺利，但当我关闭应用程序时，logCat 中总是出现警告：

```
IInputConnectionWrapper    showStatusIcon on inactive InputConnection 
```

我正在互联网上搜索以找出我在 StackOverflow [Similar Problem](https://stackoverflow.com/questions/9633188/android-input-connection-error)中找到的帖子的问题。不同之处在于我可以在我的程序中很好地发送和接收信息。这个类似问题的答案是连接没有关闭。这是否意味着我`socket.close();`在手术后没有打电话？这导致了更复杂的实施问题。

首先，我想要一个单独的静态套接字来监听并发送到服务器。因为我可能不会在每次传输东西时关闭套接字，所以我只是在侦听器完成工作后关闭它。

详细代码贴在下面

我在构造函数中将连接初始化为：

```
client = new Socket(mServerName, mport);
out = new DataOutputStream(client.getOutputStream()); 
inFromServer = new InputStreamReader(client.getInputStream());
reader = new BufferedReader(inFromServer); 
```

并让他们在整个过程中都在那里。

我将从 android 到服务器的传输写入如下函数：

```
public void sendRequest(int type, int what1, int what2, Object data)
{
    try{
        if(client.isConnected())
        {
            out.writeUTF(encoded(type,what1,what2,data) + "\n");            
        }
    }catch(IOException e){
        Log.e(TAG, "IOException at SendRequest");
        e.printStackTrace();
    }
} 
```

新线程中的侦听器：

```
try {       
        String line = null;
        while ((line = reader.readLine()) != null)
        {
            ReceiveHandler(line);
        }
    } catch (IOException e) {
        Log.e(TAG, "IOException at StartListen");
        e.printStackTrace();
    }finally{
        try { 
         // The Only Place that I close the Socket
            inFromServer.close();
            out.close();
            reader.close();
            client.close();
        } catch (IOException e) {
            Log.e(TAG, "Close Socket with IOException " + e.toString());
            e.printStackTrace();
        } 
    } 
```

我的问题是：

> 我的实现有问题还是有更好的方法来做到这一点？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:24:37.507

有一个工具可以帮助您诊断 Android 设备和模拟器中的网络相关问题。它可以帮助您进一步追查问题。ARO 工具是开源的，可在此处[获取 http://developer.att.com/developer/forward.jsp?passedItemId=9700312](http://developer.att.com/developer/forward.jsp?passedItemId=9700312)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:37:59.857

我不确定这是否对您有用..但我给你我用于客户端服务器通信的代码..

**客户端代码：**

```
public class ClientWala {

    public static void main(String[] args) throws Exception{

        Boolean b = true;
    Socket s = new Socket("127.0.0.1", 4444);

    System.out.println("connected: "+s.isConnected());

    OutputStream output = s.getOutputStream();
    PrintWriter pw = new PrintWriter(output,true);

    // to write data to server
    while(b){

        if (!b){

             System.exit(0);
        }

        else {
            pw.write(new Scanner(System.in).nextLine());
        }
    }

    // to read data from server
    InputStream input   = s.getInputStream();
    InputStreamReader isr = new InputStreamReader(input);
    BufferedReader br = new BufferedReader(isr);
    String data = null;

    while ((data = br.readLine())!=null){

        // Print it using sysout, or do whatever you want with the incoming data from server

    }

    }
} 
```

**服务器端代码：**

```
import java.io.*
import java.net.*;

public class ServerTest {

    ServerSocket s;

    public void go() {

        try {
            s = new ServerSocket(44457);

            while (true) {

                Socket incoming = s.accept();
                Thread t = new Thread(new MyCon(incoming));
                t.start();
            }
        } catch (IOException e) {

            e.printStackTrace();
        }

    }

    class MyCon implements Runnable {

        Socket incoming;

        public MyCon(Socket incoming) {

            this.incoming = incoming;
        }

        @Override
        public void run() {

            try {
                PrintWriter pw = new PrintWriter(incoming.getOutputStream(),
                        true);
                InputStreamReader isr = new InputStreamReader(
                        incoming.getInputStream());
                BufferedReader br = new BufferedReader(isr);
                String inp = null;

                boolean isDone = true;

                System.out.println("TYPE : BYE");
                System.out.println();
                while (isDone && ((inp = br.readLine()) != null)) {

                    System.out.println(inp);
                    if (inp.trim().equals("BYE")) {
                        System.out
                                .println("THANKS FOR CONNECTING...Bye for now");
                        isDone = false;
                        s.close();
                    }

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                try {
                    s.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                e.printStackTrace();
            }

        }

    }

    public static void main(String[] args) {

        new ServerTest().go();

    }

} 
```

# c++ - 如何在c ++中记录函数的堆栈返回地址

> ID：11183346
> 
> 赞同：1
> 
> 时间：2012-06-25T03:57:15.477
> 
> 标签：c++, c, logging, assembly, hook

我想知道如何记录函数的堆栈返回地址？

如果您记录这样的参数：

```
int (WINAPI *pSend)(SOCKET s, const char* buf, int len, int flags) = send;
int WINAPI MySend(SOCKET s, const char* buf, int len, int flags); 
```

// 在 DllMain 下面

```
int WINAPI MySend(SOCKET s, const char* buf, int len, int flags)
{
    fopen_s(&pSendLogFile, "C:\\SendLog.txt", "a+");
    fprintf(pSendLogFile, "%s\n", buf);
    fclose(pSendLogFile);
    return pSend(s, buf, len, flags);
} 
```

那么我将如何记录发送的返回地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T04:23:19.407

我不确定您要达到什么目标，因此很难知道这是否是正确的答案。我假设您知道自己在做什么，但我会敦促您重新考虑您的设计。

话虽如此，请查看[http://msdn.microsoft.com/en-us/library/64ez38eh](http://msdn.microsoft.com/en-us/library/64ez38eh)`_ReturnAddress()`上的内在函数，它将为您提供将在您从返回调用的函数之后立即执行的指令的地址，以及在[http://msdn.microsoft.com/en-us/library/s975zw7](http://msdn.microsoft.com/en-us/library/s975zw7)这将为您提供存储返回地址的地址。`_ReturnAddress()``_AddressOfReturnAddress()`

*请*务必*仔细*阅读文档并*了解*您返回的地址代表什么。如果您操纵退货地址，请务必**非常小心**，因为如果您做错了事情，事情可能（并且将会）变得繁荣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T04:03:38.700

您不能以独立于平台/编译器的方式执行此操作。在 Windows 中，您可以使用 StackWalk/StackWalk64 函数。几年前我用过它们。如果您有堆栈上模块的调试信息，您可以获得函数的名称。

例如看看这个： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms680650 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680650(v=vs.85).aspx)

# c# - 如何关闭另一个程序使用的串口

> ID：11183348
> 
> 赞同：3
> 
> 时间：2012-06-25T03:57:26.023
> 
> 标签：c#, serial-port

我正在编写一个 SerialPort 程序。有时当我想打开 SerialPort 时，会抛出 UnauthorizedAccessException ：拒绝访问 COM1。这是因为另一个程序（由其他人编写，我没有它的源代码）正在使用 COM1，并且该程序在退出时不会关闭 COM1。我想问2个问题：

1.  当 COM1 被另一个程序使用时，如何用我的代码（尤其是 C# 代码）关闭它？
2.  如果无法使用 C# 代码关闭 COM1，如何在 Windows 操作系统中关闭或释放 COM1？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T04:17:10.887

这个 Stack Overflow 问题是第一步：[如何在 C# 中按进程获取打开文件句柄的列表？](https://stackoverflow.com/questions/177146/how-do-i-get-the-list-of-open-file-handles-by-process-in-c)

一旦你有了它，你可以修改那里的代码来关闭句柄，或者干脆杀死打开句柄的进程。

然而，这是非常危险的*，容易出现问题，并且需要根据特定的部署（x32 与 x64 与 ARM）以及“COM1”映射到该特定机器上的内容进行重新设计。

有风险：如果串行端口用于例如在手机或类似设备上安装新固件 - 关闭端口可能会导致设备变砖。如果端口正在用于传输数据，则关闭端口可能会导致数据丢失。

祝你好运。但是，如果您破坏系统或丢失数据，请不要怪我。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T04:01:08.600

您可以通过调用关闭 C# 中的 comm 端口

```
serialPort.Close(); 
```

但是您不能关闭 COMM 端口，除非它仅由您打开。

确保在关闭应用程序时关闭通信端口。如果您可以放置​​代码，我们可以查看它。

# jquery - 基于jQuery中的下拉列表选择隐藏/显示工具和绑定数据

> ID：11183353
> 
> 赞同：0
> 
> 时间：2012-06-25T03:58:05.240
> 
> 标签：jquery, asp.net, drop-down-menu

我编写了一个 jquery 代码来隐藏一些标签，包含在表格中的文本框并根据下拉列表的选择显示其中一个表格。我还从服务器检索一些数据并将其分配给标签，jquery 代码本身的表中的文本框。我的问题是当我选择所有表都隐藏的选项之一时。但我的代码逻辑是显示一张表。一切安好。即使代码文件后面没有回发。你能帮帮我吗？提前致谢。我的代码如下，

```
$(function() {
    //start of function...

var d1;

 $.ajax({
    type: "POST",
    url: "<%=ResolveUrl("~/HRLetterService.asmx") %>/GetUserDetailsByUserId",                    
    contentType: "application/json; charset=utf-8",
    data: "{userid : '" + $("#<%=hInitiatorUserId.ClientID %>").val() + "'}",
    dataType: "json",
    success: function(msg) {
        //alert("success executed");
        d1 = eval(msg.d);               
                            } 
});

$("#<%=ddlLetterType.ClientID %>").change(function (ev) {
    var o = $(this);
    if(o.val() == "1") {
        $("#<%=lblEmployeeName.ClientID %>").text(d1.employee_name);
        $("#<%=tblBusinessData.ClientID %>").show();
        $("#<%=tblEmploymentData.ClientID %>").hide();
        $("#<%=tblNoObjectionData.ClientID %>").hide();
        $("#<%=tblPersonalData.ClientID %>").hide();
        $("#<%=tblSalaryData.ClientID %>").hide();
        $("#<%=tblSalaryTransferData.ClientID %>").hide();                 
    } else if(o.val() == "2") {
        $("#<%=tblBusinessData.ClientID %>").hide();
        $("#<%=tblEmploymentData.ClientID %>").show();
        $("#<%=tblNoObjectionData.ClientID %>").hide();
        $("#<%=tblPersonalData.ClientID %>").hide();
        $("#<%=tblSalaryData.ClientID %>").hide();
        $("#<%=tblSalaryTransferData.ClientID %>").hide();                 
    } else if(o.val() == "3") {
        $("#<%=tblBusinessData.ClientID %>").hide();
        $("#<%=tblEmploymentData.ClientID %>").hide();
        $("#<%=tblNoObjectionData.ClientID %>").show();
        $("#<%=tblPersonalData.ClientID %>").hide();
        $("#<%=tblSalaryData.ClientID %>").hide();
        $("#<%=tblSalaryTransferData.ClientID %>").hide();                 
    } else if(o.val() == "4") {
        $("#<%=tblBusinessData.ClientID %>").hide();
        $("#<%=tblEmploymentData.ClientID %>").hide();
        $("#<%=tblNoObjectionData.ClientID %>").hide();
        $("#<%=tblPersonalData.ClientID %>").show();
        $("#<%=tblSalaryData.ClientID %>").hide();
        $("#<%=tblSalaryTransferData.ClientID %>").hide();                
    } else if(o.val() == "5") {
        $("#<%=tblBusinessData.ClientID %>").hide();
        $("#<%=tblEmploymentData.ClientID %>").hide();
        $("#<%=tblNoObjectionData.ClientID %>").hide();
        $("#<%=tblPersonalData.ClientID %>").hide();
        $("#<%=tblSalaryData.ClientID %>").show();
        $("#<%=tblSalaryTransferData.ClientID %>").hide();                 
    } else if(o.val() == "6") {
        $("#<%=tblBusinessData.ClientID %>").hide();
        $("#<%=tblEmploymentData.ClientID %>").hide();
        $("#<%=tblNoObjectionData.ClientID %>").hide();
        $("#<%=tblPersonalData.ClientID %>").hide();
        $("#<%=tblSalaryData.ClientID %>").hide();
        $("#<%=tblSalaryTransferData.ClientID %>").show();                 
    } else {
        $("#<%=tblBusinessData.ClientID %>").hide();
        $("#<%=tblEmploymentData.ClientID %>").hide();
        $("#<%=tblNoObjectionData.ClientID %>").hide();
        $("#<%=tblPersonalData.ClientID %>").hide();
        $("#<%=tblSalaryData.ClientID %>").hide();
        $("#<%=tblSalaryTransferData.ClientID %>").hide();                 
    }
});

});
//end of function. 
```

我的其中一张表的代码如下，

```
<div style="width: 98%; margin-left: 10px; margin-right: 10px;">
    <table class="tableClass" id="tblBusinessData" style="display: none; width: 100%"
        runat="server">
        <tr class="trClass" style="width: 100%">
            <th class="full" colspan="4">
                Details
            </th>
        </tr>
        <tr class="trClass">
            <td class="first" style="width: 20%">
                Employee Name:
            </td>
            <td class="last" style="width: 30%">
                <asp:Label ID="lblEmployeeName" runat="server" Width="62%" TabIndex="1"></asp:Label>
            </td>
            <td class="first" style="width: 20%">
                Company:
            </td>
            <td class="last" style="width: 30%">
                <asp:Label ID="lblCompanyName" runat="server" Width="62%" TabIndex="2"></asp:Label>
            </td>
        </tr>
        .
        .
        .
        . 
```

我在页面加载时的文件代码后面的代码如下，

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        try
        {
            if (Request["requestid"] == "0")
            {
                BindLetterType();
            }
            else
            {}
        }
        catch (Exception exp)
        {
           throw exp;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T05:01:35.860

您可以通过简单地用一行隐藏整个表类并删除其中包含的所有其他行来摆脱显示的 90% 的代码`hide()`。

现在仅根据所选选项显示适用的表格。现在，如果您将表“名称”存储在选项标签中，您可以简单地使用它来匹配表的 ID，您可以将其从更改事件中提取出来

```
 <option value="2" data-table="tblBusinessData">Option text</option>

   $("#<%=ddlLetterType.ClientID %>").change(function (ev) {
       /* hide all tables*/
       $('.tableClass').hide();
        var table=$(this).find(':selected').data('table');
        /* show table chosen*/
        $('#'+table).show();
        /* prevent default */
       return false;
   }); 
```

除了添加`data-table`到选项标签之外，如果选项标签的数值与 tableClass 表之间存在任何索引关系，您可以执行以下操作：

```
$("#<%=ddlLetterType.ClientID %>").change(function (ev) {

        var tableINdex= 1* $(this).val()-1;
       /* hide all tables, except indexed one*/
       $('.tableClass').hide().eq( tableIndex).show();  

   }); 
```

[jQuery 索引方法文档](http://api.jquery.com/index/)

或将表 ID 存储在数组中，索引与选项标签值匹配

```
 var tables=['tblBusinessData',
    'tblEmploymentData',
    'tblNoObjectionData',
    'tblPersonalData',
    'tblSalaryData',
    'tblSalaryTransferData'];

   $("#<%=ddlLetterType.ClientID %>").change(function (ev) {           
        var tableINdex= 1* $(this).val()-1;
       /* hide all tables, except indexed one*/
       $('.tableClass').hide()
       $('#'+ tables [ tableINdex ]).show(); 
        /* prevent default */
       return false;           
   }); 
```

# qt - 如何使用带有事件/信号的自定义小部件作为 QStyledItemDelegates？

> ID：11183354
> 
> 赞同：3
> 
> 时间：2012-06-25T03:58:16.010
> 
> 标签：qt, pyqt, pyqt4, pyside

我正在尝试使 QStyledItemDelegate 的行为类似于我编写的自定义 QWidget，因此我可以将代码切换为模型/视图方法。

自定义 QWidget 是一个复杂的按钮，它在鼠标悬停时在其角落显示四个“子按钮”（因此总共有五个信号）。它也可以通过自定义拖动像素图进行拖放。为此，我使用了 mousePressEvent、mouseReleaseEvent、mouseMoveEvent、enterEvent 和 leaveEvent。这是有和没有鼠标悬停时显示的“子按钮”的样子： ![在此处输入图像描述](../Images/4d99f13feb0977a2e873e7f95197b282.png)

此后，我将主要代码切换为使用模型/视图方法，并尝试将此小部件用作自定义 ListView 的 QStyledItemDelegate。我尝试将自定义小部件分配为这样的编辑器：

```
class ToolButtonDelegate( QStyledItemDelegate ):

    def __init__( self, parent=None ):
        super( ToolButtonDelegate, self).__init__( parent )
        self.parent = parent

    def createEditor( self, parent, option, index ):
        if not index.isValid():
            return False
        btn = FancyButton( index.data( Qt.UserRole ), parent=parent )
        return btn 
```

这似乎很有希望，因为它为我单击的项目绘制了“FancyButton”类。但是，我需要这是一个鼠标悬停事件。经过更多研究后，我尝试将 QAbstractItemView.entered 插槽连接到 QAbstractItemView.edit 信号：

```
self.entered.connect( self.edit ) 
```

这仅适用于我将鼠标指针移到上方的第一项，然后出现以下错误：

```
edit: editing failed 
```

所以现在我又遇到了这些问题：

*   如何正确关闭编辑器（没有“QAbstractItemView.leave”事件或类似事件）。
*   如何确保鼠标点击实际触发 FanyButton 类中的按钮，而不仅仅是与 QAbstractIremView 交互

我有一种感觉，我正朝着错误的方向前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:43:16.483

I'd urge you to go back to delegates instead of widgets, purely for performance reasons =)

You can work with delegates mouse over events in paint method using states, particularly QStyle::State_MouseOver. As for clicks on buttons you can override editorEvent which receives all mouse events and then work with regions of where mouse clicks occurred. For example:

```
void paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
    if (option.state & QStyle::State_MouseOver)
    {
        // draw stuff which appears on mouse over
    } else {
        // draw stuff that appears when mouse is not over control
    }
 }

bool editorEvent(QEvent *event, QAbstractItemModel*, const QStyleOptionViewItem &option, const QModelIndex &index)
{
        // Emit a signal when the icon is clicked
        if(event->type() == QEvent::MouseButtonRelease)
        {
            QMouseEvent *mouseEvent = static_cast<QMouseEvent*>(event);
            QRect editButtonRect = editIcon.rect().translated(editIconPos(option));
            QRect deleteButtonRect = deleteIcon.rect().translated(deleteIconPos(option));

            if(editButtonRect.contains(mouseEvent->pos()))
            {
                emit editIndexClicked(index);
            } else if (deleteButtonRect.contains(mouseEvent->pos())) {
                emit deleteIndexClicked(index);
            }
        }
        return false;
    } 
```

Also you can check out this topic [HowTo create delegate for QTreeWidget?](https://stackoverflow.com/questions/7175333/howto-create-delegate-for-qtreewidget), this is for QTreeWidget, but I think same methods would apply to your case too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:47:54.177

AFAIK，您不能使用自定义小部件来查看列表/表格/树视图代表中的项目。您可以使用它们进行编辑，但如果视图模式需要重绘以外的任何内容，那么您将很难过。

我们通过拥有自己的容器小部件来解决这个问题，这些小部件监听模型事件并动态添加/删除项目小部件。真的很遗憾，因为它感觉很基本。

原因可能是视图应该很快并且能够显示很多项目，并且拥有很多小部件并不快，所以他们选择只允许自定义重绘功能（这允许他们使用justone 容器小部件，在不同区域具有自定义绘画。）

也许有办法解决它，如果是这样，我很高兴听到它。

**更新**

如果您需要捕获事件，也许您可​​以在容器视图中安装一个事件过滤器，然后使用[QListView::indexAt](https://doc.qt.io/archives/qt-4.8/qlistview.html#indexAt)找到正确的项目/小部件/委托将事件发送到？

然后，您可以在 mouseenter/leave 上使用[openPersistentEditor](https://doc.qt.io/archives/qt-4.8/qabstractitemview.html#openPersistentEditor)和 closePersistentEditor 来启用编辑，即在项目上显示/关闭您的自定义小部件。

# postgresql - Postgresql9.1 突然连接不上服务器：No route to host

> ID：11183355
> 
> 赞同：5
> 
> 时间：2012-06-25T03:58:29.707
> 
> 标签：postgresql, networking

这个问题是昨晚我使用 Adempiere 时发生的。我的 adempiere 服务器崩溃了，提示没有数据库，这一切都是突然发生的，我不知道为什么。

所以我检查了`netstat -nlp | grep 5432`，它显示如下

```
tcp        0      0 0.0.0.0:5432            0.0.0.0:*               LISTEN      -               
tcp6       0      0 :::5432                 :::*                    LISTEN      -               
unix  2      [ ACC ]     STREAM     LISTENING     150917   -                   /var/run/postgresql/.s.PGSQL.5432 
```

我尝试 psql -U postgres -h localhost ，它连接成功，但是当我尝试时`psql -U postgres -h 192.168.1.103`，它连接失败，显示如下：

```
psql: could not connect to server: No route to host
Is the server running on host "192.168.1.103" and accepting
TCP/IP connections on port 5432? 
```

然后我检查了pg_hba.conf和postgresql.conf，它们是对的，如下：

```
host all all 192.168.1.0/24 md5
listen_addresses='*' 
```

所以我认为我的配置是正确的，我之前连接成功，现在可能无法连接，谁能帮助我，谢谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:50:09.550

“No route to host”表示可能是网络问题，先ping 192.168.1.103；如果它工作，比“telnet 192.168.1.103 5432”看看端口是否正常。

而且不是pg_hba的问题。</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-21T11:08:51.353

我在 Centos 7 上运行 POstgres 9.5 并且遇到了同样的问题。从客户端机器上，我可以 ping 和 telnet 到端口 22。然后我从客户端机器上执行到端口 5432 的 telnet 并出现以下错误。

```
[pegusr@test ~]$ telnet  192.168.xx.x1 5432
Trying 192.168.56.111...
telnet: connect to address 192.168.xx.1x: No route to host 
```

由于这是一个测试环境，我刚刚禁用了数据库服务器上的防火墙，即

```
systemctl stop firewalld 
```

从那以后它一直有效。对于生产环境，请让您的系统管理员将防火墙规则从客户端计算机添加到数据库服务器的端口 543x。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-09T15:36:18.113

您可能需要运行：

```
 firewall-cmd --add-service=postgresql --permanent 
```

这允许传入连接通过 Redhat\CentOS 中的操作系统防火墙，用于 postgresql 默认端口 5432。

参考。[https://serverfault.com/a/789015/518039](https://serverfault.com/a/789015/518039)

# ruby-on-rails - content_for 在开发中工作但不是在生产中工作？

> ID：11183361
> 
> 赞同：0
> 
> 时间：2012-06-25T03:59:45.180
> 
> 标签：ruby-on-rails, caching, content-for

我有一个使用 caches_action 的控制器

`controllers/bar_controller.rb:`

```
caches_action :bar, :layout => false 
```

鉴于此操作，我将在布局中设置 html 标题。

`views/foo/bar.html.erb:`

```
<%= content_for :mytitle do "testing" end %> 
```

这是我的布局文件：

`views/layouts/application.html.erb:`

```
<title><%= yield :mytitle %></title> 
```

但是，这仅在开发中有效。在生产中，它不起作用。任何想法都值得赞赏。谢谢。

类似的问题：[对于带有 caches_action 和 :layout => false 的被忽略的 content_for 块是否有解决方法？](https://stackoverflow.com/questions/8177011/is-there-a-workaround-for-ignored-content-for-blocks-with-caches-action-and-lay)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-15T10:58:58.247

在启用缓存的环境中，Rails 将简单地忽略 content_for 块。用于`ActionController::Filters`计算值并将这些值存储在实例变量中。在布局中引用实例变量。

# xml - 无法使用最终构建器读取 xml 节点

> ID：11183367
> 
> 赞同：1
> 
> 时间：2012-06-25T04:00:07.797
> 
> 标签：xml, finalbuilder

这是我想从 xml 文件中读取所有 xml 节点并找到每个父节点的最后一个子节点的要求，并`"Class=Last"`使用 finalbuilder (FB6) 在每个最后一个子节点中包含一个条目。这是xml文件结构

```
<HelpTOC>
<HelpTOCNode>
<HelpTOCNode> </HelpTOCNode>
</HelpTOCNode>
</HelpTOC> 
```

我已经使用`xml iterator`最终构建器中的操作来读取节点并使用 Read`XML value to variable`来读取节点并将其分配到变量中并尝试找到最后一个子节点。它读取 xml 文件中的所有节点，但返回它们的 Xpath 值，如下所示。

```
/HelpTOC/HelpTOCNode[1]/ 
```

你能帮我解决这个问题吗？

如何读取 xml 文件中的所有 xml 节点并找到每个父节点的最后一个子节点。说明需求的示例 FB 项目会更有帮助。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:41:31.780

我可以帮助解决部分问题，因为我不记得用于选择集合中最后一个节点的 XPATH 逻辑。

当您定义 XML 文档时，请为文档根节点包含一个标识符前缀。我用“n”。 ![Final Builder 7 XML 文档定义](../Images/06828daca468900181a0b4e215f7a07d.png)

当您使用各种 XML 节点时，您可以使用以下 XPATH 语法。这是 SSRS rdl 报告定义的 XPath 定义示例。

![Final Builder Xpath 语法示例](../Images/32eada365c1efa6187ad85a7135fda02.png)

# javascript - 如何在 javascript 中访问标签的“src”属性？

> ID：11183368
> 
> 赞同：5
> 
> 时间：2012-06-25T04:00:18.147
> 
> 标签：javascript

```
<html>
<head></head>
<body>
<div id="ctl00_ContentPlaceHolder1_ctl00_ctl01_Showcase">
<div style="width:100%;text-align:center;"><img src="http://www.xyz.com/aaa.gif" id="ctl00_ContentPlaceHolder1_ctl00_ctl01_loderImg" alt="Loading" /></div>        </div>
<script>
q= document.getElementById('ctl00_ContentPlaceHolder1_ctl00_ctl01_Showcase').childNodes[1].getAttribute('src').innerHTML;

alert(q);

</script>
</body>
</html> 
```

如何访问 img 标签的“src”属性？我上面的代码它给出了空值所以有什么问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-25T04:09:31.933

您可以`src`直接在图像上使用。此外，您不需要`.innerHTML`.

演示：http: [//jsfiddle.net/ThinkingStiff/aU2H2/](http://jsfiddle.net/ThinkingStiff/aU2H2/)

```
document.getElementById( 'ctl00_ContentPlaceHolder1_ctl00_ctl01_loderImg' ).src; 
```

HTML：

```
<html>
<head></head>
<body>
<div id="ctl00_ContentPlaceHolder1_ctl00_ctl01_Showcase">
    <div style="width:100%;text-align:center;"><img src="http://placekitten.com/100/100" id="ctl00_ContentPlaceHolder1_ctl00_ctl01_loderImg" alt="Loading" /></div>        
</div>
<script>
    q = document.getElementById( 'ctl00_ContentPlaceHolder1_ctl00_ctl01_loderImg' ).src;
    alert(q);
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-25T04:04:14.140

```
alert(document.getElementById('your_image_id').getAttribute('src')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:02:25.527

首先，你不应该在最后使用 .innerHTML，因为属性没有 innerHTML 数据。其次，JS 在处理空白字符时非常脆弱。正如其他人指出的那样，我建议按 ID 定位图像。或者你可以使用这样的东西：

```
q= document.getElementById('ctl00_ContentPlaceHolder1_ctl00_ctl01_Showcase').getElementsByTagName("img")[0].getAttribute("src"); 
```

引用**ctl00_ContentPlaceHolder1_ctl00_ctl01_Showcase**节点，然后找到它下面的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T04:03:41.660

使用[jQuery](http://www.jquery.com)：

`var imgsrc = $("#ctl00_ContentPlaceHolder1_ctl00_ctl01_loderImg").attr("src");`

jQuery 是 IMO 最强大的方式。

# ms-access-2010 - Access 2010 查询计数加倍

> ID：11183370
> 
> 赞同：0
> 
> 时间：2012-06-25T04:00:31.107
> 
> 标签：ms-access-2010

全部。

我在 Access 2010 中建立了一个非常简单的预算数据库。当我运行查询以查找每个类别的费用总和时，我发现以下结果：

在某些情况下，金额加起来。即我花了 240 美元，这就是退回的金额。

在一种情况下，退回的金额是输入金额的两倍。当我在查询设计模块中将“Sum”更改为“Group By”时，它返回了 6 条记录，这些记录加起来是我使用“Sum”找到的数量的一半。当我将“分组依据”更改为“计数”时，它返回值 12。

在其他情况下，我有类似的结果。但是，在该类别中，我会使用“Group By”找到 33 条记录，但是当我使用“Count”时，它返回的值是 40。

这是我的 SQL：

```
SELECT tblType.typName, tblCategories.catName,
Sum(tblEntries.entAmount) AS SumOfentAmount,
tblBudgetParameters.budAmount
FROM tblVendors INNER JOIN (tblType INNER JOIN ((tblCategories INNER
JOIN tblBudgetParameters ON tblCategories.catID =
tblBudgetParameters.budItem) INNER JOIN tblEntries ON
tblCategories.catID = tblEntries.entCategory) ON
tblType.typIncomeExpenditure = tblEntries.entType) ON tblVendors.venID
= tblEntries.entVendor
WHERE (((tblEntries.entDate) Between [Enter Start Date] And [Enter End
Date]) AND ((tblBudgetParameters.budExpired)=False))
GROUP BY tblType.typName, tblCategories.catName, tblBudgetParameters.budAmount; 
```

我如何找出什么是加倍以及如何解决它？

谢谢，-罗伯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:53:47.103

尝试逐个消除表格并计数以找出哪个表格为您提供了重复项。例如：

```
SELECT tblVendors.VenID, Count(tblVendors.VenID)
FROM tblVendors 
INNER JOIN tblEntries 
ON tblVendors.venID = tblEntries.entVendor
HAVING Count(tblVendors.VenID) >1 
```

# python - 是否可以使用 python 获取网页的前几个，比如 1K？

> ID：11183371
> 
> 赞同：1
> 
> 时间：2012-06-25T04:00:41.507
> 
> 标签：python, webpage

是否可以使用 python 获取网页的前几个，比如 1K？

非常感谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T04:23:01.147

[Requests](http://docs.python-requests.org/)库允许您在响应进入时对其进行迭代，以便您可以执行以下操作：

```
import requests
beginning = requests.get('http://example.com/').iter_content(1024).next() 
```

如果您只想要标头，您可以随时使用 http HEAD 方法：

```
req = requests.head('http://example.com') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:45:55.340

这是一个使用 Python 3内置的[urllib.request的示例。](http://docs.python.org/dev/library/urllib.request.html)

```
import urllib.request
url = urllib.request.openurl("http://example.com").read(1024) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T06:35:39.177

当然：

```
>>> len(urllib2.urlopen('http://google.com').read(1024))
1024 
```

# mysql - mySQL（左连接？）

> ID：11183373
> 
> 赞同：1
> 
> 时间：2012-06-25T04:00:53.397
> 
> 标签：mysql, sql

我有 2 个要从中查询的表。

第一个表（我们称之为`users`）有这些列：`id`和`name`。

第二个表（我们称之为`transactions`）有这些列`user_id`：`amount`和`timestamp`。

如何找出表中`transactions`每个用户的最新时间戳`users`？

编辑：

感谢您迄今为止的所有回答！真的很感激。如果我想选择最新时间戳大于某个值的用户呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T04:05:20.843

```
SELECT u.*,MAX(t.timestamp) latest_timestamp
FROM transactions t
LEFT JOIN users u ON t.user_id=u.id
GROUP BY t.user_id 
```

应该是你要找的。此查询应为每个用户选择最新的事务时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T04:07:11.970

```
SELECT 
     id,
     name,
     max(timestamp) 
FROM users 
INNER JOIN transactions 
ON users.id = transactions.user_id
GROUP BY id,name 
```

这应该为用户表中的每个用户提供最大的时间戳

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:08:35.040

尝试这个

```
SELECT Users.name,MAX(T.timestamp) As LastTimeStamp
FROM Users 
LEFT JOIN Transactions as T ON Users.user_id=T.user_id    
GROUP BY Users.name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T04:13:01.887

这个查询比你问的要多，但这是为了以防你的下一个问题是“如果我也想知道属于最大时间戳的数量怎么办？”：

```
SELECT id, name, t.`timestamp`, amount
FROM (SELECT id, name, MAX(`timestamp`) AS `timestamp`
    FROM users u
    INNER JOIN transactions t ON t.user_id=u.id
    GROUP BY id, name
) AS maxt
INNER JOIN transactions t 
ON t.user_id = maxt.id AND t.`timestamp` = maxt.`timestamp` 
```

# jquery - css父容器没有滚动条

> ID：11183376
> 
> 赞同：0
> 
> 时间：2012-06-25T04:01:18.363
> 
> 标签：jquery, css

我正在尝试创建一个类似于许多其他的 jquery 滚动图像显示，但我真的很难通过一个路障。我基本上想围绕这段代码创建一个父容器，这样浏览器窗口就不会滚动。我猜有时是一个视口？我已经尝试了一百万种不同的东西。我的css还不够好

这是小提琴：http: [//jsfiddle.net/68unq/](http://jsfiddle.net/68unq/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:01:36.627

为什么您的 HTML 中间有任意样式？无论如何，将它们从 HTML 中取出，放入 CSS 中，然后将 ID 添加到您的容器中。

jsFiddle：http: [//jsfiddle.net/68unq/2/](http://jsfiddle.net/68unq/2/)

html:

```
<div id="container">
    <div id="holder" >
        <img src="http://placehold.it/290x27" class='img'>
        <img src="http://placehold.it/257x65" class='img'>
        <img src="http://placehold.it/270x27" class='img'>
        <img src="http://placehold.it/257x120" class='img'>
    </div>
<div>​ 
```

CSS：

```
#container {
    position: relative;
    width:400px;
    height:200px;
    background-color:black;
    overflow:scroll;
} 
```

# php - 自定义 RSS 提要

> ID：11183382
> 
> 赞同：0
> 
> 时间：2012-06-25T04:01:52.997
> 
> 标签：php, joomla, rss

我需要一些关于 RSS 提要的帮助。我需要来自多个网站的所有 RSS 提要数据应该首先到达 Joomla 管理面板，然后管理员从中选择提要并发布到主页。我也需要论坛的相同功能。是否有任何扩展提供相同的功能或将采取什么方法？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:35:05.803

[您可以从Joomla!](http://extensions.joomla.org/)获得扩展！[可能会满足您的 RSS 导入需求的扩展目录](http://extensions.joomla.org/)，请尝试查看[自动文章部分](http://extensions.joomla.org/extensions/social-web/social-edition/automatic-articles)。

我们已经使用了这个 - [ObFullTextRSS](http://extensions.joomla.org/extensions/social-web/social-edition/automatic-articles/11403) - 一个用于多个客户，但我不确定管理员批准方面的事情。

# php - 随机变化的背景

> ID：11183386
> 
> 赞同：1
> 
> 时间：2012-06-25T04:02:27.410
> 
> 标签：php, javascript, css

有没有办法创建一个页面背景图像每隔几秒钟自动更改一次的网站？我想要大约每十秒钟旋转一次的六张图像。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:50:39.557

几个小时前在这里提出了类似的问题：

[随机改变背景颜色](https://stackoverflow.com/questions/11181856/change-bgcolor-of-page)

我已经从那里得到了答案，并根据你的情况进行了修改。

```
 <html>
    <head>
    <script type="text/javascript">
    function myFunction()
    {
        setInterval("myTimer()",1000);
        return false;
    }

    function myTimer()
    {
       var randomImage = [
'http://onlyhdwallpapers.com/wallpaper/light_gray_suede_anon_delivers_high_resolution_desktop_1500x1500_hd-wallpaper-463812.jpg',
       'http://3.bp.blogspot.com/-kO0Mq7eCchs/TY6MDA6-KqI/AAAAAAAAAEE/90FlAM_QJLs/s1600/BigGrayBox.jpg',
       'http://test3.jpg']
       var r = Math.floor((Math.random()*randomImage .length));
       var newImage = "url(" + randomImage [r] + ")";
       document.body.style.backgroundImage= newImage ;
    }
    </script>
    </head>
    <body onLoad="myFunction()">
         <div> Some text </div>
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:05:49.470

你可以使用[这个 jquery 插件](http://www.robwalshonline.com/posts/jquery-plugin-random-image-on-page-load/)。作者做了一个页面上的图像重新加载的实现。您可以将图像放在一个 div 中，该 div 将保留在页面中所有元素的后面，以便它成为背景。

jquery可以在[这里下载](http://jquery.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:13:31.963

就在这里。我使用了[bgStretcher jQuery 插件](http://www.ajaxblender.com)。工作得很好。

这是[一个投资组合](http://www.cnash44.com/jqueryportfolio/JQueryPortfolio.html)的实现示例（在后台） 。

```
<script type="text/javascript">
$(document).ready(function(){
    $(document).bgStretcher({
    images: ['img/Backgrounds/abst.jpg','img/Backgrounds/curvy.jpg','img/Backgrounds/circuits.jpg'], 
    //images: ['img/Backgrounds/space/1.jpg','img/Backgrounds/space/3.jpg','img/Backgrounds/space/4.jpg','img/Backgrounds/space/5.jpg','img/Backgrounds/space/6.jpg','img/Backgrounds/space/7.jpg'], 
    imageWidth: 1024, 
    imageHeight: 768,
    slideShowSpeed: 8000,
    nextSlideDelay: 8000,
    });
});
</script> 
```

希望有帮助。一切顺利！纳什

# parsing - 如何将收到的电子邮件显示到网站？

> ID：11183396
> 
> 赞同：0
> 
> 时间：2012-06-25T04:03:46.797
> 
> 标签：parsing, email

我想在我的网站上显示收到的电子邮件。我有三个基于网络的电子邮件帐户（在 gmail 上），我想在我的网站上显示每封传入这些帐户的电子邮件的内容。是否有工具或基于云的服务可以做到这一点。听说过 Wordpress POSTIE，但我猜它适用于一封电子邮件。amazon ses 能帮我实现这个吗？

如果可以做到这一点，我也愿意购买 gmail 应用程序。

我不太喜欢技术，但如果可以用最少的钱实现，我会外包。谢谢期待:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:55:05.647

*您可以使用 Perl 模块[Mail::POP3Client](http://search.cpan.org/~sdowd/Mail-POP3Client-2.16/POP3Client.pm)。*

```
#!/usr/bin/perl

use strict;
use warnings;
use IO::Socket::SSL;
use Mail::POP3Client;

my $username  = '...@gmail.com';
my $password  = '...';

my $mailhost  = 'pop.gmail.com';
my $port      = '995';

my $pop = new Mail::POP3Client(
            USER     => $username,
            PASSWORD => $password,
            HOST     => $mailhost,
            PORT     => $port,
            USESSL   => 'true',
            DEBUG    => 0,
);

for (my $i = 1; $i <= $pop->Count(); $i++) {
  my $message = $pop->Body($i);
  ...
}

$pop->Close(); 
```

# jquery - Jquery改变元素顺序

> ID：11183401
> 
> 赞同：14
> 
> 时间：2012-06-25T04:04:26.333
> 
> 标签：jquery, html

如何使用 jQuery 将每个标签移动到它们旁边的输入元素前面？

```
<div class="input select classCheckBox">
    <label for="checkboxId">classCheckBoxs</label>
    <input type="hidden" id="checkboxId" value="" name="checkboxName" />
    <br /> 
    <div class="classCheckBox"> 
        <input type="checkbox" id="checkboxId24" value="1" name="checkboxName[]" />
        <label for="checkboxId24">1 </label>
    </div>
    <div class="classCheckBox">
        <input type="checkbox" id="checkboxId25" value="2" name="checkboxName[]" />
        <label for="checkboxId25">2</label>
    </div>
    <div class="classCheckBox"> 
        <input type="checkbox" id="checkboxId26" value="3" name="checkboxName[]" />
        <label for="checkboxId26">3</label>
    </div>
    <div class="classCheckBox">
        <input type="checkbox" id="checkboxId27" value="4" name="checkboxName[]" />
        <label for="checkboxId27">4</label>
    </div>
    <div class="classCheckBox"> 
        <input type="checkbox" id="checkboxId28" value="5" name="checkboxName[]" />
        <label for="checkboxId28">5</label>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-25T04:07:28.660

```
$('.select .classCheckBox label').each(function() {
  $(this).insertBefore( $(this).prev('input') );
}); 
```

**[演示](http://jsfiddle.net/QStkd/437/)**

* * *

### 稍微解释一下

*   `$('.select .classCheckBox label')``label`在每个中选择每个`.classCheckBox`

*   `$(this)`循环内指向`label`

*   `.insertBefore()`在作为参数传递的匹配元素之前插入任何元素

*   `$(this).prev('input')`指出`input`之前`label`

*   因此，将在其前一个之前 `$(this).insertBefore( $(this).prev('input') )`插入每个`label``input`

* * *

**相关参考：**

*   [`.insertBefore()`](http://api.jquery.com/insertBefore)

*   [`.prev()`](http://api.jquery.com/prev)

*   [`.each()`](http://api.jquery.com/each)

* * *

### 替代方式：

```
$('.select .classCheckBox input').each(function() {
  $(this).insertAfter( $(this).next('label') );
}); 
```

**[演示](http://jsfiddle.net/QStkd/438/)**

**或者**

```
$('.select .classCheckBox input').each(function() {
  $(this).before( $(this).next('label') );
}); 
```

**[演示](http://jsfiddle.net/QStkd/442/)**

# c# - 实体框架和泛型类型参数

> ID：11183403
> 
> 赞同：0
> 
> 时间：2012-06-25T04:05:04.753
> 
> 标签：c#, entity-framework, generic-type-argument

我有一个数据库，其中包含从第三个来源导入的数百个表。使用实体框架，这些表成为标记为 E_1、E_2、E_3 的 ObjectSet……所有的表都有一组共同的列，并且可以使用一个函数进行查询。

我有以下代码：

```
namespace Foo{
    public static class Data{

       public static MyEntities dataContext = new MyEntities();

       public static void getData<T>(string entityName) where T : class
       {
          string queryString = "SELECT result FROM ";
          queryString += Data.dataContext.DefaultContainerName + "." + entityName;

          ObjectQuery<T> myQuery = Data.dataContext.CreateQuery<T>(queryString, null);

        // do stuff
       }

       public static void test(){
         string entityName = "E_1";
         Data.getData<E_1>(entityName);
       }
} 
```

在 test() 中，我将字符串“E_1”传递给函数 getData()，并将类型类 Foo.E_1 作为泛型类型参数插入到 getData<> 中。

实际上，E_1 直到运行时才知道。在运行时，我创建了 entityName 字符串，但我如何才能将此字符串转换为 getData<> 所需的通用参数类型？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:54:14.200

> 所有表都有一组共同的列

`ExecuteStoreQuery`因此，您可以创建一个类（例如MyImportType ）来捕获查询结果，并使用`ObjectQuery`

```
var data = Data.dataContext.ExecuteStoreQuery<MyImportType>(queryString); 
```

getData 不需要泛型类型参数。

顺便说一句：我同意 TomTom 的观点，即数据库设计非常糟糕。如果可以，至少将具有相同列的表合并到一个表中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T04:51:53.573

> 实际上，E_1 直到运行时才知道

Anjd实际上是：

*   非常糟糕的数据库设计和
*   实体框架不支持的东西。

就这么简单。

# c++ - 斯坦福 CS106B 词典库 foreach 功能不起作用

> ID：11183413
> 
> 赞同：0
> 
> 时间：2012-06-25T04:06:08.283
> 
> 标签：c++, debugging

我已经在所有图书馆玩了很长时间（可能是 2 个月）。

所有其他 Collection 类，如`vector`, `stack`, queue 都运行良好。

但是，当我使用词典库时。除了我使用 foreach 函数一个一个地提取单词外，所有事情都进行得很顺利。

有一个错误，我试图弄清楚如何解决它一整天。

```
Ld ./WordLadder.app/Contents/MacOS/WordLadder normal i386
    cd "/Users/leungtimothy/Desktop/106B assignment/Assignment2-xcode 3/WordLadder"
    /Developer/usr/bin/llvm-g++-4.2 -arch i386 "-L/Users/leungtimothy/Desktop/106B assignment/Assignment2-xcode 3/WordLadder" -LStanfordCPPLib "-L/Users/leungtimothy/Desktop/106B assignment/Assignment2-xcode 3/WordLadder/StanfordCPPLib" "-F/Users/leungtimothy/Desktop/106B assignment/Assignment2-xcode 3/WordLadder" -filelist /Users/leungtimothy/Library/Developer/Xcode/DerivedData/WordLadder-awuwtyghwhswlubvikhvzubfsmuw/Build/Intermediates/WordLadder.build/Debug/WordLadder.build/Objects-normal/i386/WordLadder.LinkFileList -framework Cocoa -framework Carbon -framework QuickTime -lStanfordCPPLib -o "/Users/leungtimothy/Desktop/106B assignment/Assignment2-xcode 3/WordLadder/./WordLadder.app/Contents/MacOS/WordLadder"

ld: bad codegen, pointer diff in _fe::Range::Range()to global weak symbol vtable for _fe::Rangefor architecture i386
Command /Developer/usr/bin/llvm-g++-4.2 failed with exit code 1 
```

我知道它看起来有点乱，是使用 g++ 4.2 的问题吗？我已经下载了最新的 cs106b 库。

```
/*
 * File: lexicon.h
 * ---------------
 * This interface exports the <code>Lexicon</code> class, which is a
 * compact structure for storing a list of words.
 */

#ifndef _lexicon_h
#define _lexicon_h

#include <string>
#include "FOR.cpp"
#include "set.h"
#include "stack.h"

/*
 * Class: Lexicon
 * --------------
 * This class is used to represent a <i>lexicon,</i> or word list.
 * The main difference between a lexicon and a dictionary is that
 * a lexicon does not provide any mechanism for storing definitions;
 * the lexicon contains only words, with no associated information.
 * It is therefore similar to a set of strings, but with a more
 * space-efficient internal representation.  The <code>Lexicon</code>
 * class supports efficient lookup operations for words and prefixes.
 */

#include <cctype>

class Lexicon {

public:

/*
 * Constructor: Lexicon
 * Usage: Lexicon lex;
 *        Lexicon lex(filename);
 * -----------------------------
 * Initializes a new lexicon.  The default constructor creates an empty
 * lexicon.  The second form reads in the contents of the lexicon from
 * the specified data file.  The data file must be in one of two formats:
 * (1) a space-efficient precompiled binary format or (2) a text file
 * containing one word per line.  The Stanford library distribution
 * includes a binary lexicon file named <code>English.dat</code>
 * containing a list of words in English.  The standard code pattern
 * to initialize that lexicon looks like this:
 *
 *<pre>
 *    Lexicon english("English.dat");
 *</pre>
 */

   Lexicon();
   Lexicon(std::string filename);

/*
 * Destructor: ~Lexicon
 * Usage: (usually implicit)
 * -------------------------
 * The destructor deallocates any storage associated with the lexicon.
 */

   ~Lexicon();

/*
 * Method: size
 * Usage: int n = lex.size();
 * --------------------------
 * Returns the number of words contained in the lexicon.
 */

   int size() const;

/*
 * Method: isEmpty
 * Usage: if (lex.isEmpty()) . . .
 * -------------------------------
 * Returns <code>true</code> if the lexicon contains no words.
 */

   bool isEmpty() const;

/*
 * Method: clear
 * Usage: lex.clear();
 * -------------------
 * Removes all words from the lexicon.
 */

   void clear();

/*
 * Method: add
 * Usage: lex.add(word);
 * ---------------------
 * Adds the specified word to the lexicon.
 */

   void add(std::string word);

/*
 * Method: addWordsFromFile
 * Usage: lex.addWordsFromFile(filename);
 * --------------------------------------
 * Reads the file and adds all of its words to the lexicon.
 */

   void addWordsFromFile(std::string filename);

/*
 * Method: contains
 * Usage: if (lex.contains(word)) . . .
 * ------------------------------------
 * Returns <code>true</code> if <code>word</code> is contained in the
 * lexicon.  In the <code>Lexicon</code> class, the case of letters is
 * ignored, so "Zoo" is the same as "ZOO" or "zoo".
 */

   bool contains(std::string word) const;

/*
 * Method: containsPrefix
 * Usage: if (lex.containsPrefix(prefix)) . . .
 * --------------------------------------------
 * Returns true if any words in the lexicon begin with <code>prefix</code>.
 * Like <code>containsWord</code>, this method ignores the case of letters
 * so that "MO" is a prefix of "monkey" or "Monday".
 */

   bool containsPrefix(std::string prefix) const;

/*
 * Macro: foreach
 * Usage: foreach (string word in lexicon) . . .
 * ---------------------------------------------
 * Iterates over the words in the lexicon in alphabetical order.
 */

   /* The foreach macro is defined in foreach.h */

/*
 * Method: mapAll
 * Usage: lexicon.mapAll(fn);
 *        lexicon.mapAll(fn, data);
 * --------------------------------
 * Calls the specified function on each word in the lexicon.  The second
 * form of the call allows the client to pass a data value of any type
 * to the callback function.
 */

   void mapAll(void (*fn)(std::string value));

   template <typename ClientDataType>
   void mapAll(void (*fn)(std::string value, ClientDataType & data),
               ClientDataType & data);

#include "private/lexiconpriv.h"

};

#include "private/lexiconimpl.cpp"

#endif

/*
 * File: foreach.h
 * ---------------
 * This interface defines the <code>foreach</code> keyword, which is
 * used to simplify iteration.  All iterable classes import this
 * interface, so clients never need to do so explicitly.  This version
 * of the interface also supports C++ strings and arrays.
 */

#ifndef _foreach_h
#define _foreach_h

/*
 * Statement: foreach
 * Usage: foreach (type var in collection) { . . . }
 * -------------------------------------------------
 * The <code>foreach</code> statement steps through the elements in
 * a collection.  It works correctly with the collection classes in
 * both the Standard Template Library and the Stanford C++ libraries,
 * but can also be used with C++ strings and statically initialized
 * arrays.
 *
 * <p>The following code, for example, prints every element in the
 * string vector <code>lines</code>:
 *
 *<pre>
 *    foreach (string str in lines) {
 *       cout << str << endl;
 *    }
 *</pre>
 *
 * Similarly, the following function calculates the sum of the character
 * codes in a string:
 *
 *<pre>
 *    int sumCharacterCodes(string str) {
 *       int sum = 0;
 *       foreach (char ch in str) sum += ch;
 *       return sum;
 *    }
 *</pre>
 *
 * As a simplification when iterating over maps, the <code>foreach</code>
 * macro iterates through the keys rather than the key/value pairs.
 */

   /* The foreach and in macros are defined in the foreachpriv.h file */

    #include "private/foreachpriv.h"

    #endif

/*main program*/
#include <iostream>
#include "console.h"
#include "lexicon.h"
#include "queue.h"
#include "simpio.h"
#include "vector.h"

using namespace std;

int main() {
// [TODO: fill in the code]
    Lexicon eng("EnglishWords.dat");
    foreach(string word in eng)
    cout << word;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T04:37:05.380

简单的解决方法是包含“foreach.h”标头。看这里：[foreach 在 C++ 中不被识别](https://stackoverflow.com/questions/4764858/foreach-not-recognized-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:41:23.597

尝试通过使用导入字符串库，然后尝试编译它

# javascript - 创建一个模式窗口以使用 AngularJS 加载数据

> ID：11183414
> 
> 赞同：12
> 
> 时间：2012-06-25T04:06:23.417
> 
> 标签：javascript, angularjs

我一直在尝试使用 AngularJS 在模态窗口中加载数据，但我不知道该怎么做。我还需要在单击链接时更改 url，并在模式窗口中加载数据而不是加载新页面。

我曾尝试使用 jQuery Facebox 插件，但它似乎不起作用，我也在使用 twitter 引导模式组件。

下面是我的代码：

```
<div class="subnav span12" id="post-main-container" ng-controller="PostsController">
  <div class="btn-group pull-left span5" id="sort-nav">
    <a class="btn active">Popular</a>
    <a class="btn">Recent</a>
    <a class="btn">Favorite</a>
  </div>
  <div class="btn-group pull-right " id="view-nav">
    <a class="btn" id="2col"><i class="icon-th-large"></i></a>
    <a class="btn active" id="4col"><i class="icon-th"></i></a>
    <a class="btn" id="6col"><i class="icon-th-list"></i></a>
  </div>
  <div class="btn-group pull-right">
    <a id="reload" class="btn"><i class="icon-refresh"></i></a>
    <a class="btn"><i class="icon-random"></i></a>
  </div>
  <div class="row-fluid span12" id="img-container">
    <ul class="unstyled" id="image-container">
      <li class="post-container box2" ng-repeat="post in posts">
        <div class="post-btns" style="display:none;">
          <a class="btn btn-mini" href="#">Share</a>
          <a class="btn btn-mini" href="#">Add</a>
        </div>
        <a href="#/posts/{{post.id}}">
          <img ng-src="{{post.image}}">
        </a>
        <p class="post-snippet" style="display:none;">{{post.description}}</p>
      </li>
    </ul>
  </div>
</div> 
```

我想`"#/posts/{{post.id}}"`在模态窗口中加载。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T21:07:46.887

不确定这是否会完全解决您的问题，但我们在[http://angular-ui.github.com/](http://angular-ui.github.com/)上有一个引导模式的指令包装器。因为您在页面中定义 div，所以双向数据绑定应该可以正常工作。关于要更改的 url 链接，我不确定您为什么要这样做，因为这是一个模态控件。

Angular-ui 组有一个 angularjs 替换模态的 js 和其他一些引导控件，请参见[此处](http://angular-ui.github.com/bootstrap/)

- 担

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T01:00:12.190

**Angular 方式是查看模型并更改模型：**

*   将对话框放入标记中。
*   将对话框的内容绑定到类似`selectedPost`.
*   单击链接只会更改`selectedPost`和隐藏/显示对话框。

这是一个非常快速的版本： [http ://plnkr.co/edit/0fsRUp?p=preview](http://plnkr.co/edit/0fsRUp?p=preview)

Checkout [Angular UI](http://angular-ui.github.com/#directives-modal)，他们已经有一个用于 Bootstrap 模式的组件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T22:50:32.337

如果你碰巧使用[Twitter BootStrap](http://twitter.github.com/bootstrap/javascript.html#modals)的模态，[这个 jsfiddle](http://jsfiddle.net/jjzabkar/MWAek/1/)将 Angular 组件分开，它允许你创建一个只有模态的 html 和适当范围绑定的部分 html 文件。

这意味着您可以在 html 中以声明方式使用[Angular 指令：](http://docs.angularjs.org/guide/directive)

```
 <a my-popup-directive="partials/myModal.html">Open MyModal</a> 
```

**编辑**：根据@DanDoyon 的（正确）评论，该指令被重命名为非`ng`命名空间。 **更新**：使用带有 Angular 1.x的[Bootstrap 3 模态使得自定义指令或](http://getbootstrap.com/javascript/#modals)[angular-ui 模态](http://angular-ui.github.io/bootstrap/#/modal)几乎没有必要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T05:20:47.540

这是我为它制定指令的尝试。

[http://jsfiddle.net/tadchristiansen/gt92r/](http://jsfiddle.net/tadchristiansen/gt92r/)

希望你觉得它有用。

# android - Android：无法在 Google Guava 的 ImmutableSortedSet 中调用 SortedSet 方法

> ID：11183416
> 
> 赞同：1
> 
> 时间：2012-06-25T04:07:09.267
> 
> 标签：android, guava

Android 编译器抱怨 Google Guava v12`ImmutableSortedSet`没有方法`first()`、、、`last()`等，并且`ImmutableSortedSet`没有实现`SortedSet`。我目前正在使用 Android API 8。这是一些示例代码：

```
/* 
 * I only have one set, 'mSet', but for the sake of this example
 * I added an ImmutableSortedSet instance.
 */
private final SortedSet<Item> mSet;
private final ImmutableSortedSet<Item> mImmutableSet;

private MyObject(Collection <? extends Item> items) {
  // Fails -- cannot convert from ImmutableSortedSet<Item> to SortedSet<Item>
  mSet = ImmutableSortedSet.copyOf(items);
  mImmutableSet = ImmutableSortedSet.copyOf(items);
}

private Item getFirstItem() {
  // Fails -- no such method 'first()' in ImmutableSortedSet
  return mImmutableSet.first();
} 
```

**更新**
我做了一些挖掘，结果发现`NavigableSet`，`ImmutableSortedSet`实现的接口仅在 API 级别 9 及更高级别中可用。不幸的是，我只能使用 API 级别 8。我的问题仍然存在。有没有办法解决这个问题而不必使用谷歌的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T05:53:36.993

Guava 12.0 不支持你的 Android 版本，所以请暂时坚持使用 11.0.2 版本，直到我们有一个 backport。

# android - android 上的 youtube 数据 forceclose

> ID：11183421
> 
> 赞同：0
> 
> 时间：2012-06-25T04:07:34.650
> 
> 标签：android, eclipse, youtube, youtube-api, android-sdk-2.1

我正在尝试为 android 应用程序连接 youtube api，我下载了所有必需的 jar 并开始遵循[https://developers.google.com/youtube/2.0/developers_guide_java#Retrieving_and_searching_for_videos](https://developers.google.com/youtube/2.0/developers_guide_java#Retrieving_and_searching_for_videos)上的示例。

我试着放进去

```
"YouTubeService service = new YouTubeService(clientId,develober_key)" and "service.setUserCredentials("user@gmail.com", "mypassword");". 
```

当我尝试运行该应用程序时，我得到一个 forceclose 并显示错误消息“06-24 21:27:24.286:

`E/AndroidRuntime(10191): java.lang.NoClassDefFoundError: com.google.gdata.client.youtube.YouTubeService"`

我看到的包含在我的参考库文件夹中。课堂上可能有问题，还是我错过了什么？

我想做的就是在 android 应用程序的列表视图中显示我的视频列表。我是否缺少任何要求？我必须采取哪些进一步的步骤才能使身份验证运行？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:14:30.913

来自[http://code.google.com/p/google-api-java-client/wiki/Setup](http://code.google.com/p/google-api-java-client/wiki/Setup)

据说：警告：对于 Android，jar 必须放在名为“libs”的目录中，以便 APK 打包器找到它们。否则，您将在运行时收到 NoClassDefFoundError。

我没有使用那个 API，但是这个：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_audience](https://developers.google.com/youtube/2.0/developers_guide_protocol_audience)

手动移动 lib 文件夹中的 jar 后，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:19:46.200

这属于 Google APIs 部分。将构建目标更改为 Google APIs 下

```
Project Properties > Android 
```

此外，请验证 gdata 库是否未包含多次。清理项目，再次包含库并重试。

# deployment - 流星应用程序如何知道它是在开发、测试还是生产环境中运行？

> ID：11183424
> 
> 赞同：37
> 
> 时间：2012-06-25T04:08:46.690
> 
> 标签：deployment, meteor

当流星应用程序作为开发、测试或生产环境运行时，我需要使用不同的帐户提供者的配置。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2016-03-31T17:29:00.700

从 Meteor 1.3 开始，这些标志开箱即用：

```
Meteor.isDevelopment
Meteor.isProduction
Meteor.isTest
Meteor.isAppTest 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-06-22T20:00:56.557

在服务器上：

```
var inDevelopment = function () {
  return process.env.NODE_ENV === "development";
};

var inProduction = function () {
  return process.env.NODE_ENV === "production";
}; 
```

Meteor 在运行时将环境变量 NODE_ENV 设置为“开发” `meteor`。在生产中，您可以将变量设置为您想要的任何值，否则它将默认为“生产”。

**更新**：我创建了一个智能包以允许它在客户端和服务器上工作。

```
mrt add allow-env 
```

只需在服务器文件中设置权限规则。

```
allowEnv({
 NODE_ENV: 1
}); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-12-12T20:36:48.463

您可以使用[`Meteor.settings`](http://docs.meteor.com/#meteor_settings)与`--settings`运行时使用的选项`meteor run`或`meteor deploy`.

例如，要在`dev`模式下运行，请创建一个 JSON 文件，将其命名为 meteorConfigDev.json，并将以下内容放入其中：

```
{
  "public" : {
    "mode" : "dev"
  },
  "anotherProperty" : "anotherValue"
} 
```

使用运行您的应用程序

```
meteor --settings meteorConfigDev.json 
```

在服务器和客户端上，您可以使用以下方式访问“模式”：

```
Meteor.settings.public.mode //in this case it will be "dev" 
```

请注意，“public”中的设置在服务器和客户端上都可用，而其他所有设置（在本例中为“anotherProperty”）仅在服务器上可用。

然后，您可以为不同的环境使用不同的配置文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-10T09:21:49.033

很容易。我在五个（是的，五个！）不同的环境中运行我的应用程序。我只是在 ROOT_URL 上使用 switch 语句，如下所示，用于四种不同的环境。当然，如果你只有两个环境，你可以使用 if-else。在服务器上工作。只需创建一个名为 startup.js 的新文件并使用下面的代码示例。干杯!

```
switch (process.env.ROOT_URL) {
    case "http://www.production.com/":
       BLOCK OF CODE HERE
       break;
    case "http://www.staging.com/":
       BLOCK OF CODE HERE
       break;
    case "http://www.development.com/":
       BLOCK OF CODE HERE
       break;
    case "http://localhost:3000/":
       BLOCK OF CODE HERE
       break;
} 
```

一般来说，javascript中switch语句的格式是

```
switch(expression) {
    case n:
        code block
        break;
    case n:
        code block
        break;
    default:
        default code block
} 
```

**更新：**请注意，Meteor 现在提供`Meteor.absoluteUrl()`，这类似于`process.env.ROOT_URL`添加了额外的功能。请参阅[文档](http://docs.meteor.com/#/full/meteor_absoluteurl)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T04:16:05.437

github 上有一个开放的[pull request](https://github.com/meteor/meteor/pull/243)允许这样做。评论/投票，所以它更有可能被收录！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T17:20:45.060

实现这一目标的一种非常混乱的方式

[https://github.com/possibilities/meteor-environment-hooks](https://github.com/possibilities/meteor-environment-hooks)

注意：接口没问题恕我直言，实现很混乱

# mysql - 选择用户不是任何人的朋友

> ID：11183428
> 
> 赞同：0
> 
> 时间：2012-06-25T04:09:37.067
> 
> 标签：mysql, sql

![在此处输入图像描述](../Images/f9bf9d137cd2df776af24430176e3e5a.png)

嗨，我有这两个表：用户和朋友（friend_status = 1 表示请求已发送，friend_status = 2 表示他们是朋友）。现在我想选择所有用户都不是任何人的朋友。怎么做？

假设当前用户是 1。我试过这个，但它似乎是错误的。因为它只显示发送请求但尚未确认的用户。

```
SELECT user_id, name, email
                FROM
                (
                    SELECT user_id, name, email
                    FROM users u INNER JOIN friends f ON u.user_id = f.sender
                    WHERE f.receiver = 1 AND friend_status <> 2
                    UNION
                    SELECT user_id, name, email
                    FROM users u INNER JOIN friends f ON u.user_id = f.receiver
                    WHERE f.sender = 1 AND friend_status <> 2
                ) T
                LIMIT 0, 10 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T04:19:32.913

```
SELECT
    a.user_id,
    a.name,
    a.email
FROM
    users a
LEFT JOIN
    friends b ON 
        a.user_id IN (b.sender, b.receiver) AND
        b.friend_status = 2
WHERE
    b.friend_id IS NULL 
```

在这里，我们希望在用户已经发送或接收请求并且友谊已被接受的条件下`LEFT JOIN`使用`users`和表。`friends`如果用户不满足这两个标准，则连接`friends`表中的值将为`NULL`.

现在我们想要***不***符合加入条件的用户，所以我们过滤掉符合条件的`WHERE b.friend_id IS NULL`用户，这将选择在朋友表中没有任何对应条目的用户（在发送者/接收者字段中）***或***有相应的条目，***但***没有一个具有`friend_status`of `2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T04:25:37.917

另一种解决方案。请注意，这可能不如 Zane 的解决方案执行得那么好，但它确实具有不那么神秘的优点：

```
SELECT * FROM users AS u
  WHERE NOT EXISTS(
    SELECT * FROM friends
      WHERE friend_status = 2
      AND (sender = u.user_id OR receiver = u.user_id)
  ); 
```

应该足够简单易读：它选择没有任何入站或出站朋友关系的每个用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:25:07.037

```
SELECT user_id,name,email
FROM users
WHERE user_id NOT IN (
    SELECT sender FROM friends WHERE friend_status<>2
    UNION
    SELECT receiever FROM friends WHERE friend_status<>2
) 
```

如果有人可以发布比这更优化的解决方案，我很想看看！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T04:25:25.473

所有用户都没有朋友？

```
SELECT * FROM users 
WHERE user_id NOT IN(SELECT sender FROM friends WHERE friend_status=2)
AND user_id NOT IN(SELECT receiver FROM friends WHERE friend_status=2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T04:37:15.027

试试这个

```
U.User_ID,u.Name
From Users AS U
Where User_ID NOT IN 
(Select Sender From Friends Where Status=2) AND User_ID NOT IN 
(Select Receiver From Friends Where Status=2) 
```

# c++ - 在 cpp/c++ 中使用字符串值数据声明变量名称

> ID：11183429
> 
> 赞同：0
> 
> 时间：2012-06-25T04:09:49.717
> 
> 标签：c++, c, variables, declaration

例如，假设您从某处提取数据并将其放入字符串变量中，然后您想使用其中的数据作为另一个字符串名称：

```
int main(void){

   string strVar ="StringData"; //this is a string variable with text inside 

   cout<<strVar<<endl;    //displaying the variables contents

   string strVar.c_str() = "stuff in string variable 'StringData'"; //this uses what was inside of strVar to be the name of the new string variable

   cout<<StringData<<endl; //prints the contents of the variable StringData (who got its name from the data inside of strVar
}

//OUTPUT:
StringData
stuff in string variable 'StringData' 
```

我知道您绝对不能以这种方式执行此操作，在此示例中，您必须在使用变量 StringData 之前事先知道 strVar 中的内容，但理论上我们可以这样做吗？

编辑：

谢谢大家，所以我从你们那里得到的基本上是不可能的，C++ 不是动态变量语言，我能得到的最接近的东西是映射（字符串，字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T04:15:10.110

没有什么像你在想的那样明确，但也许你会对`std::map`? 听起来您想要的是键值对。

参考 std::Map -> [http://www.cplusplus.com/reference/stl/map/](http://www.cplusplus.com/reference/stl/map/)

例子：

```
#include <map>
#include <string>
#include <iostream>
using namespace std;

int main(void)
{
    map<string, string> myMap;
    myMap.insert(pair<string, string>("StringData", "Stuff in StringData"));

    // Get our data
    cout << myMap["StringData"] << endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:13:19.723

变量名仅在 C++ 编译时存在。最接近的方法是使用带有字符串键的地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:14:57.710

我不确定你在问什么，但如果你想拥有“动态”变量名，那么你不能直接在代码中这样做。您将不得不使用一些地图类型的数据结构。看看你`std::hash_set`是否`std::map`可以使用标准库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T04:17:22.277

有些*语言*可以动态创建变量。C++ 不是其中之一；）

# javascript - 使用 Javascript/html 调暗灯光/更改颜色按钮？

> ID：11183431
> 
> 赞同：0
> 
> 时间：2012-06-25T04:10:20.033
> 
> 标签：javascript, html, css

我正在开发一个网站（主要是 html/css）。我想合并一个按钮，单击该按钮会更改页面的背景颜色/图像。我该怎么做你能帮我写必要的代码吗？我相信这可以在 html/javascript 中完成。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T04:17:01.273

你可以纯javascript`document.body.style.backgroundImage`

```
<input type="button" onclick="changeBackground();" />

<img src="../images/someimage.png" onclick="changeBackground();" />

<script type="text/javascript"> 
    function changeBackground()
        {
            document.body.style.backgroundImage = 'url(../images/yourimage.png)';
        }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T04:32:54.493

您可以使用本演示中使用的 Javascript：http: [//jsfiddle.net/rathoreahsan/NZwGb/](http://jsfiddle.net/rathoreahsan/NZwGb/)

**HTML**

```
<input type="button" value="Change BG Image" onclick="changeBG();" /><br />

OR<br />

<img src="http://www.naturewallpaper.co.uk/wallpapers/nature-wallpaper-90.jpg" width="200px;" onclick="changeBG();"> 
```

**Javascript**

```
function changeBG() {
  document.body.style.backgroundImage = 'url(http://4.bp.blogspot.com/-C6ZUDP_SUjo/T90hd_j90qI/AAAAAAAAADw/I2fhPhJcS-8/s1600/Nature+river+sun.jpg)';
} 
```

# git - 从 Subversion 中的工作副本标记的 Git 等价物是什么？

> ID：11183433
> 
> 赞同：2
> 
> 时间：2012-06-25T04:10:48.310
> 
> 标签：git, svn

我有一个项目，它有一个清单文件（其中包括一个版本号），但没有一个构建过程。当我使用 Subversion 时，我会通过将清单中的版本号从“SVN”更改为“1.3”或者你有什么，从工作副本中标记并恢复清单来处理这个问题。然后版本号存在于标签中，但在主干中仍然是“SVN”。

在 Git 中是否有等价物？似乎应该可以创建一个分支，在其上提交版本号，标记并删除分支（留下一个无头标记），但这似乎相当复杂。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T04:15:09.810

```
git commit -m "Change manifest version to vX.Y"
git tag -a -m "MyProject vX.Y" vX.Y
git reset --hard HEAD~1 
```

该`git reset`命令允许您将分支指针回绕到现有提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T04:39:27.283

您可以标记任意提交或对象。您无需签出提交即可执行此操作。例如：

```
git checkout master # You're on HEAD
git tag v1.0 HEAD~2 # Apply tag to 2nd commit behind HEAD 
```

请参阅 gitrevisions(7) 了解可以指定提交对象的所有方式。

# zend-framework - 任何使用标准文件夹结构且不使用 zend 工具的 zend 教程？

> ID：11183435
> 
> 赞同：-1
> 
> 时间：2012-06-25T04:11:01.327
> 
> 标签：zend-framework, structure, zend-tool

我想在不使用 zend 工具的情况下学习 zend。

我找到了一些很好的教程，但我认为他们没有做标准的 botstrapping 和文件夹结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:49:42.653

这是 Zend
[http://framework.zend.com/manual/en/project-structure.html的文档](http://framework.zend.com/manual/en/project-structure.html)

**标准结构**
[http://framework.zend.com/manual/en/project-structure.project.html](http://framework.zend.com/manual/en/project-structure.project.html)

**模块化结构**
[http://framework.zend.com/manual/en/zend.controller.modular.html](http://framework.zend.com/manual/en/zend.controller.modular.html)

# javascript - 替换 chrome.Port 原型

> ID：11183437
> 
> 赞同：3
> 
> 时间：2012-06-25T04:11:06.180
> 
> 标签：javascript, html, google-chrome, google-chrome-extension, chromium

我的扩展，[sharkzapper](https://github.com/adammw/sharkzapper)在旧版本的 Google Chrome 中工作，但在 Chrome 18 或 19 发布时停止了一段时间，因为我使用了不再存在的 chrome.Port.prototype 属性。我以前使用它来创建一个对象，该对象通过原型继承扩展了 chrome.Port，因此我可以记录所有消息以进行调试。特别是这部分的源代码在[这里](https://github.com/adammw/sharkzapper/blob/master/lib/sharkzapper_background.js#L48-63)。

是否有任何其他方法可以从 chrome.Port 继承，或者我可以使用任何其他解决方法来让我的扩展程序再次工作？

谢谢。

# javascript - 使用 Java 脚本将标签的内容替换为另一个标签

> ID：11183439
> 
> 赞同：0
> 
> 时间：2012-06-25T04:11:45.107
> 
> 标签：javascript

我想替换标签的值

```
<h2>..</h2> 
```

带有标签的内容

```
<h3>..<h3> 
```

我是这样写剧本的，

```
<!DOCTYPE html>
<html>
<body>
<div>
            <h3><span><!-- Start Component Field: {"XPath":"tcm:Content/custom:Content/custom:addwidget[1]/custom:text[1]"} -->
                        <strong>Section Text</strong>
                    </span> </h3>

                <h2>
                        <a title="Google" href="http://google.com">google.com</a>
                    </h2>
            </div>  

        <script type="text/javascript">
        var x=document.getElementsByTagName("div");

        for (var i=0; i<x.length; i++) {
        var children = x[i].getElementsByTagName('h2');

        var demo= children["demo"].innerHTML;

        var childd =x[i].getElementsByTagName('h3');

        var all=childd["all"].innerHTML;

        children["demo"].childNodes[0].innerHTML=all;
        childd["all"].innerHTML=null;
        }

        </script>

</body>
</html> 
```

规则：

在上面的示例中，我想将“google.com”替换为`<h3>`标签中的文本。但我没有得到输出。

需要输出。

```
 <!DOCTYPE html>
<html>
<body>
<div>

                <h2>
                        <a title="Google" href="http://google.com">
                        <span><!-- Start Component Field: {"XPath":"tcm:Content/custom:Content/custom:addwidget[1]/custom:text[1]"} -->
                            <strong>Section Text</strong>
                        </span> 
                        </a>
                    </h2>
            </div>  

</body>
</html> 
```

我没有得到确切的输出。我使用了 for 循环，因为我想对每次出现的 div 标签都执行此操作。

任何人都可以研究它并建议如何纠正它。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T04:19:45.733

这应该很简单：

```
document.getElementById('demo').innerHTML = document.getElementById('all').innerHTML​;​ 
```

**编辑**：使用新的 HTML 代码，您可以像这样`<h2>`用 s 替换所有 s 。`<h3>`

```
var divs = document.getElementsByTagName('div');
for(var i = 0, len = divs.length; i < len; i++){
    var div = divs[i],
        h2 = div.getElementsByTagName('h2'),
        h3 = div.getElementsByTagName('h3');

    if(h2.length === 1 && h3.length === 1){
        h2[0].innerHTML = h3[0].innerHTML;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:19:44.213

[jQuery](http://jquery.com/)解决方案：

```
$('#demo').html($('#all').html()); 
```

# java - 用 Java 关闭远程计算机 - 无法启动关闭但没有错误

> ID：11183441
> 
> 赞同：2
> 
> 时间：2012-06-25T04:12:13.317
> 
> 标签：java, shutdown

我正在学习 java 中的 Runtime 类，并在其中测试命令行指令的使用。我正在尝试使用 Runtime.getRuntime().exec(...); 远程关闭计算机；当我运行它时，没有错误，但指定的机器没有关闭。我不知道为什么。

代码：

```
import java.io.IOException;

class shutdownVirus {
    public static void main(String[] args) throws IOException {
        Runtime.getRuntime().exec("shutdown -m \\\\T12-LEOPARDIJ -s -t 10");
    }
} 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T04:39:04.807

它可能不起作用，因为您运行 Java 类的 VM 是从没有关闭权限的用户启动的。该进程将继承这些访问限制，因此不允许关闭。

可以说是好事。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T04:35:05.850

尝试

`Runtime.getRuntime().exec("shutdown -s");`

**编辑部分：**

用这个。

`shutdown /s /m <Computer_Name>` **关闭远程 PC**

# jquery-mobile - 通过 AJAX 加载页面内容，然后通过 JQM 转换显示

> ID：11183450
> 
> 赞同：1
> 
> 时间：2012-06-25T04:14:06.223
> 
> 标签：jquery-mobile

我已经为 JQM 应用程序构建了一个小型模板系统，以便我可以使用通用脚本标签、页眉和页脚维护相同的 index.html 文件，并将主要内容加载到内容数据角色中。它工作得很好，除了我失去了过渡。

例如，当有人点击一个链接时，我只是`$.load`用来获取该链接的 URL 并将其加载到内容 div 中。我想做的是使用 ajax 将内容加载到即将显示的 div 中，然后触发 JQM 的转换之一，例如幻灯片或其他，以将新的 div 滑动到位。

这可能吗？ `loadPage`加载整个页面并且不支持转换，并且 changePage 要求我更改完整页面。

这是运行它的 js 的主要内容。HTML 是标准的单页模板：

```
$(document).live('pagecreate', function() {
    \\ load a page in the views folder called needing.html into the content div
    loadContent("needing");
});

function loadContent (location, nav) {
    return $('#content').load("views/"+location+".html", function(resp) { 
            $(this).trigger('create');
            $('a').unbind('click').click(function (ev) {
            var $this = $(this), location = $this.attr('href');
                loadContent(location, nav);
                return false;
        })
   });
} 
```

# android - 如何从 android 的 listView 中获取 Selected 视图？

> ID：11183451
> 
> 赞同：2
> 
> 时间：2012-06-25T04:14:26.937
> 
> 标签：android, listview, android-arrayadapter

我创建了一个自定义列表视图。我通过子类化 arrayadapter 使用自定义适配器添加了联系人详细信息列表。如果我选择列表中的特定联系人意味着我需要获取所选的详细信息。我怎么能做到这一点。这是我的编码，

```
public class ContactListAdapter extends ArrayAdapter<ContactList> {

    Context context;
    int layoutResourceId;
    ContactList objects[] = null;

    View row;

    public ContactListAdapter(Context context, int layoutResourceId, ContactList[] objects) {
        super(context, layoutResourceId, objects);
        // TODO Auto-generated constructor stub

        this.context = context;
        this.layoutResourceId = layoutResourceId;
        this.objects = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        row = convertView;
        final ContactListHolder holder;

        if ( row == null ) {

            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new ContactListHolder();
            holder.image    = (ImageView) row.findViewById(R.id.contactImage);
            holder.name     = (TextView) row.findViewById(R.id.contactName);
            holder.number   = (TextView) row.findViewById(R.id.contactNumber);
            holder.check    = (CheckBox) row.findViewById(R.id.selectedContact);
            holder.check.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    // TODO Auto-generated method stub

                }
            });

            row.setTag(holder);
            holder.check.setTag(objects[position]);

        } else {

            holder = (ContactListHolder) row.getTag();
            holder.check.setTag(objects[position]);
        }

        ContactList contact = objects[position];
        if(contact.imageIcon != null) {

            Bitmap imgBitmap = BitmapFactory.decodeByteArray(contact.imageIcon, 0, contact.imageIcon.length);
            holder.image.setImageBitmap(imgBitmap);
        } else {

            holder.image.setImageResource(R.drawable.ic_launcher);
        }

        holder.name.setText(contact.name);
        holder.number.setText(contact.number);
        holder.check.setChecked(objects[position].isSelected());    

        return row;

    }

    static class ContactListHolder {

        ImageView image;
        TextView name;
        TextView number;
        CheckBox check;
    }
} 
```

在 manin 活动中，我使用列表视图作为，

```
ContactList contactList[] = new ContactList[MyTrackList.size()];

            for(int i=0;i<MyTrackList.size();i++) {

                MyContact contact = MyTrackList.get(i);
                contactList[i] = new ContactList(contact.getName(), contact.getNumber(), contact.getImage());

            }

            ContactListAdapter adapter = new ContactListAdapter(this, R.layout.manage_track_list_custom_view, contactList);

            trackList = (ListView) findViewById(R.id.manage_track_listView);
            trackList.setAdapter(adapter); 
```

这里的联系人列表是一个有很多对象的类。

我尝试过这种方式，但没有成功。请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:33:43.493

首先，我将在 XML 布局中定义一个 onclick 侦听器以显示列表项。这是通过将属性**android:onClick="methodName"**添加到顶级布局视图来完成的。

然后在您的主要活动中，您需要实现在 XML 布局中定义的方法（即 methodName(View v)），当用户点击列表项时将调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:21:51.610

设置`setOnItemClickListener`或`setOnItemSelectedListener`列出，您将获得点击并选择项目的调用...

```
 setOnItemClickListener 
```

注册一个回调，以便在单击此 AdapterView 中的项目时调用。

```
trackList.setOnItemClickListener(new OnItemClickListener() 
   {
   public void onItemClick(AdapterView<?> parent, View view,int position, long id) 
   {
              contact =  contactList[position]          
   }
 }); 
```

..

```
setOnItemSelectedListener 
```

注册一个回调，以便在选择此 AdapterView 中的项目时调用。

```
 trackList.setOnItemSelectedListener(new OnItemSelectedListener() 
            {
                public void onItemSelected(AdapterView<?> parent, View view, int position, long i) 
                {
                      // TODO Auto-generated method stub

                                   contact =  contactList[position] 
                                   //   or 
                                // Object obj= parent.getItemAtPsotion(position);
                }

                @Override
                public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub

                }
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:42:56.143

尝试这个，

1.  使用**onItemClickListener()**

例如：

```
ListView lv = (ListView)findViewById(R.id.myList);

lv.setOnItemClickListener(new OnItemClickListener() {

public void onItemSelected(AdapterView<?> parent, View view, int position, long i) 
            {
                  // Get the item here
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

# java - 如何在 Java 中调用具有 DateFormat 参数的方法？

> ID：11183455
> 
> 赞同：0
> 
> 时间：2012-06-25T04:14:58.167
> 
> 标签：java, multithreading, date, concurrency, date-format

这是我的代码，它处理线程。我在 run() 中遇到问题，因此我无法编译它。如果有人知道如何使用 DateFormat 参数调用方法，请告诉我。

```
import java.text.DateFormat;
import java.text.ParseException;
import java.util.Calendar;
import java.util.Date;

class Base implements Runnable {
  static DateFormat format =
  DateFormat.getDateInstance(DateFormat.MEDIUM);
  public Date parse(String str) throws ParseException {
    synchronized (getClass()) {
      return format.parse(str);
    }
  }

  @Override
  public void run() {
/*Date date = new Date(111111);
DateFormat dateF = DateFormat.getDateInstance(DateFormat.FULL, Locale.US);
date.getDateInstance(dateF);*/
parse("Hello"); 
  }
}

class Derived extends Base implements Runnable{
  public Date doSomethingAndParse(String str) throws ParseException {
    synchronized(Base.class) {
      System.out.println("Derived Class");
      return format.parse(str);
    }
  }

  public static void main(String[] args) {
    Derived d = new Derived();
    Thread t = new Thread(d);
    Thread t2= new Thread (d);
    t.start();
    t2.start();

  }

  @Override
  public void run() {

getClass();
    try {
        doSomethingAndParse("1111111111");
    } catch (ParseException e) {
        e.printStackTrace();
    }
System.out.println("Run in Derived Class");

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:24:30.273

为了避免 US-Format 和 DE 之间的麻烦，我在示例中使用了 SimpleDateFormat。除此之外，它几乎是您的代码：

```
import java.text.*;
import java.text.ParseException;
import java.util.Date;

class Base implements Runnable {

    // DateFormat format = DateFormat.getDateInstance (DateFormat.MEDIUM);
    DateFormat format = new SimpleDateFormat ("YYYY-MM-dd");

    public Date parse (String str) throws ParseException {
        return format.parse (str);
    }

    @Override
    public void run () {
        try {
            parse ("Hello");
        } catch (ParseException e) {
            e.printStackTrace ();
        }
    }
}

class Derived extends Base implements Runnable {

    public Date doSomethingAndParse (String str) throws ParseException {
        System.out.println ("Derived Class");
        return format.parse (str);
    }

    @Override
    public void run () {
        try {
            doSomethingAndParse ("1962-10-08");
        } catch (ParseException e) {
            e.printStackTrace ();
        }
        System.out.println ("Run in Derived Class");
    }

    public static void main (String [] args) {
        Derived d = new Derived ();
        Thread t1 = new Thread (d);
        Thread t2 = new Thread (d);
        t1.start ();
        t2.start ();
    }
} 
```

我从 DateFormat 格式中删除了“静态”修饰符和“同步”部分。请参阅 Dateformat 的 javadocs - 它不是线程保存，那么为什么要在不同的线程中使用相同的格式？躲开它！

Java文档：

> 同步
> 
> 日期格式不同步。建议为每个线程创建单独的格式实例。如果多个线程同时访问一个格式，它必须在外部同步。

# iphone - 核心数据多线程 - 视图控制器未更新

> ID：11183456
> 
> 赞同：0
> 
> 时间：2012-06-25T04:15:08.173
> 
> 标签：iphone, ios, multithreading, core-data, nsmanagedobjectcontext

我正在尝试在我正在开发的应用程序中使用 Core Data；在应用程序委托中，此代码开始从下载的 JSON 文件导入数据。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    //setup app window, etc.

    BECDRefreshOperation *loadData = [[BECDRefreshOperation alloc] initWithStoreCoordinator:self.persistentStoreCoordinator];

    [queue addOperation:loadData]; //queue is an NSOperationQueue

    return YES;

} 
```

BECDRefreshOperation 是运行导入的 NSOperation 的子类。它创建自己的托管对象上下文，以便将主进程与后台进程分开。

```
- (id) initWithStoreCoordinator:(NSPersistentStoreCoordinator *)storeCoordinator{
    if (![super init]) return nil;
    [self setPersistentStoreCoord:storeCoordinator];
    return self;
}

- (void) main{
    NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
    [f setNumberStyle:NSNumberFormatterDecimalStyle];

    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init];

    [context setPersistentStoreCoordinator:self.persistentStoreCoord];

    //import the data from JSON

} 
```

实际导入工作并更新数据存储；但是，使用 NSFetchedResultsController 的表视图控制器不会更新。表视图控制器是 NSFetchedResultsControllerDelegate 并包含所有委托方法。

在应用程序的第二次运行时，表格视图控制器正确显示，因为数据之前已加载到存储中；但是，导入中所做的任何更新都不会刷新。

我已多次阅读 Apple 的[核心数据并发](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)指南，并在 Google 和 SO 上多次搜索以寻找答案。我相信它在于使用mergeChangesFromContextDidSaveNotification，但我已经尝试通过注册保存通知并调用合并更改的方法在应用程序委托和表视图控制器的许多不同位置执行此操作，但我没有尝试过作品。[Cocoa is my GF's implementation](http://www.cimgf.com/2011/08/22/importing-and-displaying-large-data-sets-in-core-data/)是我为了做到这一点而尝试适应的方式之一。

表视图控制器在创建时传递给应用委托的 managedObjectContext。

我已经在没有多线程的情况下运行了它，并且导入数据存储并在表格视图控制器中显示的代码可以正常工作，但当然它在导入数据时会冻结 UI。

很明显我在这里做错了；任何帮助将不胜感激。

**更新** 我添加了一些 NSLog 语句和断点，以查看两个 managedObjectContexts 是否确实指向相同的内存地址，并且似乎它们是，而后台 MOC 位于不同的地址。通知代码似乎应该可以工作并更新主 MOC，但到目前为止还没有。

```
2012-06-25 21:48:02.669 BE_CoreData[18113:13403] beerListViewController.managedObjectContext = <NSManagedObjectContext: 0x94233d0>
2012-06-25 21:48:02.671 BE_CoreData[18113:13403] appDelegate.managedObjectContext = <NSManagedObjectContext: 0x94233d0>
2012-06-25 21:48:02.722 BE_CoreData[18113:15003] backgroundMOC = <NSManagedObjectContext: 0x7b301b0> 
```

**更新 2**经过额外的故障排除后，似乎 NSFetchedController 委托方法没有触发。这是 NSFetchedResultsController 及其委托的代码。

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Beer" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                              initWithKey:@"beertitle" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:20];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"beertitle"
                                                   cacheName:@"BeerTable"];
    _fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;

}

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller is about to start sending change notifications, so prepare the table view for updates.
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[self.tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [self.tableView deleteRowsAtIndexPaths:[NSArray
                                               arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [self.tableView insertRowsAtIndexPaths:[NSArray
                                               arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id )sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller has sent all current change notifications, so tell the table view to process all updates.
    [self.tableView endUpdates];
} 
```

这里还有 changeCell 的代码，当单元格需要更新时调用它：

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    Beer *beer = [_fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = beer.beertitle;

    if (beer.beerthumb != nil){
        [cell.imageView setImageWithURL:[NSURL URLWithString:beer.beerthumb]
                           placeholderImage:[UIImage imageNamed:@"placeholder.png"]];
    }
    else {
        [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://beersandears.net/images/missing.jpg"] placeholderImage:[UIImage imageNamed:@"placeholder.png"]];
    }

} 
```

最后，viewDidLoad 调用 fetchBeers 方法来实际执行提取。

```
- (void)fetchBeers{

    NSError *error;
    if (![[self fetchedResultsController] performFetch:&error]) {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
    }
} 
```

**更新 3**

测试以确保首先发生提取。确实如此，但幅度不大（这是在 4S 上运行的）。

```
2012-06-28 20:47:37.214 BE_CoreData[3559:907] Fetch called
2012-06-28 20:47:37.281 BE_CoreData[3559:1103] Import started
2012-06-28 20:47:37.285 BE_CoreData[3559:1103] backgroundMOC = <NSManagedObjectContext: 0x1f03f050>
2012-06-28 20:47:39.124 BE_CoreData[3559:1103] call contextDidSave
2012-06-28 20:47:40.926 BE_CoreData[3559:1103] call contextDidSave
2012-06-28 20:47:42.071 BE_CoreData[3559:1103] call contextDidSave
2012-06-28 20:47:45.551 BE_CoreData[3559:1103] call contextDidSave
2012-06-28 20:47:45.554 BE_CoreData[3559:1103] Finished refresh operation 
```

我没有从一个空白的 SQLlite 存储开始，而是播种了一个 SQLlite 存储并运行了相同的过程。种子在启动时会正确加载，但种子之后的更改不会立即出现在表格视图中。如果您滚动到应该在加载之前添加行的位置（并且它不存在），即使在导入完成后它也不会出现。但是，滚动并返回并显示添加的行。似乎当数据库为空时，它没有可滚动的内容，因此不会添加任何内容。有了种子，它最终会添加它们，但不是以我看到的核心数据存储与动画插入一起工作的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:05:25.403

只要您在主线程上的上下文对于应用程序委托和视图控制器是相同的，这只是您执行合并的设计决策。

合并本身非常简单。

1.  注册 NSManagedObjectContextDidSave 通知。
2.  启动后台操作。
3.  保存在后台线程上。
4.  在主线程的观察者方法中合并上下文。

以下是如何执行合并的示例代码：

```
// Whatever method you registered as an observer to NSManagedObjectContextDidSave
- (void)contextDidSave:(NSNotification *)notification
{    
       [self.managedObjectContext performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) withObject:notification waitUntilDone:YES];
} 
```

请注意，您实际上必须保存在后台线程上才能触发通知。

# android - 通过 adb monkey 测试拍照

> ID：11183467
> 
> 赞同：0
> 
> 时间：2012-06-25T04:17:18.857
> 
> 标签：android

My App 使用系统 Intent 拍照

```
...
Intent intent = new Intent(
   android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
intent.putExtra( MediaStore.EXTRA_OUTPUT, mImageFileUri );
... 
```

我想使用测试猴子测试我的应用程序；但到目前为止，我还没有让猴子拍照。这可能吗？

以下是我能想到的最好的：

```
adb shell monkey -p com.google.android.camera -p ny.package.name -v 500 
```

当我运行此命令时，我的应用程序已启动，并且相机 Activity 也已正确启动。甚至看起来猴子点击了系统相机应用程序中的拍照按钮。从猴子的运行来看，一个可能的解释可能是猴子在实际保存图像之前点击了其他按钮，并且由于某种原因这“取消”了保存照片操作。

顺便说一句，我在装有 Android 2.3.6 的 Nexus 上运行 Monkey，而不是模拟器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:39:06.413

您使用了错误的工具，**monkey**是一个[UI/Application Exersiser](http://developer.android.com/tools/help/monkey.html)，它生成伪随机的用户事件流，例如点击、触摸或手势，以及一些系统级事件。您可以使用 Monkey 以随机但可重复的方式对正在开发的应用程序进行压力测试。

如果您的意图是测试单个事件，您最有可能寻找的是[monkeyrunner](http://developer.android.com/tools/help/monkeyrunner_concepts.html)，这是一个提供 API 的工具，用于编写从 Android 代码外部控制 Android 设备或模拟器的程序。通过这种方式，您将能够连接到设备并发送触发图像捕获的事件。

# bash - 在匹配文本块后使用 sed 插入一行

> ID：11183469
> 
> 赞同：5
> 
> 时间：2012-06-25T04:17:50.040
> 
> 标签：bash, shell, sed, awk

我尝试使用 sed 在以下文件的 [Block B] 之后插入一行：

```
[Block A]  
line 1  
line 2  

[Block B]  
line 1  
line 2  

[Block C]  
line 1  
line 2 
```

我使用的命令：

```
sed '/\[Block B\]/,/^$/a\inserted line' file 
```

正确/期望的结果应该是：

```
[Block B]  
line 1  
line 2  
inserted line 
```

但是，我得到了这个：

```
[Block B]  
inserted line  
line 1  
inserted line  
line 2  
inserted line 
```

请告诉我如何使用 sed 获得所需的结果。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T04:26:40.347

```
sed -e '/\[Block B\]/{:a;n;/^$/!ba;i\inserted line' -e '}' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T17:17:39.473

我在寻找自己的问题的解决方案时发现了这个问题，这很相似，但有点不同。我在这里调整了答案来解决我的问题。

我需要在配置文件中的块末尾插入一些文本，如下所示：

```
name1 {
    ...
}

name2 {
    ...
    inserted text line 1
    inserted text line 2
}

name3 {
    ....
} 
```

为了实现这一点，我从上面获取了@toyntz 评论并对其进行了调整：

```
/^name2 {/,/^}/{
    /^}/i\    inserted text line 1
    /^}/i\    inserted text line 2
} 
```

那只是 sed 表达式；它可以放在一个文件中并`sed -f`像这样执行：

```
$ sed -f sed_expression data_file 
```

第一个表达式搜索从`name2 {`出现在行首开始到也出现在行首结束`}`的行范围。这选择了要处理的块。剩余的表达式用`{`大括号括起来，`}`并对选定的范围进行操作。它包含我们希望插入的每一行命令，每个命令都有一个表达式`/^}/`，该表达式与带有右花括号的行匹配，然后是插入`i`操作以插入一行文本。The`i`后面跟着 a `\`，因此也插入了前导空格。

然后我将表达式更进一步，将两个插入命令替换为一个：

```
/^name2 {/,/^}/{
    /^}/i\
    inserted text line 1\
    inserted text line 2
} 
```

在这里，一个命令要插入的文本分布在以下两行中。请注意第一行的附加尾随`\`以继续单个命令。

接下来，我将其缩减为一行。它使它变得混乱且难以阅读，但它仍然有效：

```
/^name2 {/,/^}/{/^}/i\    inserted text line 1\n    inserted text line 2
} 
```

要插入的两行由换行符分隔`\n`。精明的读者会注意到实际上有两行——你不能把右大括号放在第一行的末尾；这就是为什么上面的其他答案有第二个 -e 表达式。所以，以上是我能做的最好的。在 bash 命令行上表示：

```
sed -e '/^name2 {/,/^}/{/^}/i\    inserted text line 1\n    inserted text line 2' -e '}' data_file 
```

我写了这个速记，希望它能向任何希望在文本块末尾插入的人解释如何编写 sed 表达式来实现这一点。Sed 表达式可能非常神秘且难以理解——希望我的解释在这方面有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T15:03:05.070

这可能对您有用（GNU sed）：

```
sed '/^\[Block B\]/,/^$/!b;/^$/i\inserted line' file 
```

# objective-c - ObjC：我可以使用 property = nil 而不是 self.property = nil 来释放它吗？

> ID：11183470
> 
> 赞同：1
> 
> 时间：2012-06-25T04:18:09.857
> 
> 标签：objective-c, properties, release, dealloc

我在 .h 文件中有属性并在 .m 文件中合成，我知道我可以使用以下方法释放它：

```
self.property = nil; 
```

但我可以使用：

```
property = nil; 
```

反而？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T04:22:01.210

不，这是因为`@synthesized`使用`retain`选项（或者`strong`，如果您使用 ARC）生成的方法实际上看起来像这样：

```
- (void)setValue:(NSString *)newValue {
    [value autorelease];
    value = [newValue retain];
} 
```

因此，当你这样做时`self.property = nil`，旧值将被自动释放，而`nil`将被保留，这无论如何都不做任何事情。

当您这样做时`iVar = nil`，您永远不会释放变量先前包含的对象，因此您会泄漏。

当然，如果您使用 ARC（自动引用计数），您不必担心这些。编译器将为您完成工作。在这种情况下，`iVar = nil`将具有与 完全相同的效果`self.iVar = nil`，尽管有些人可能认为它不太清楚。

# c++ - 识别继承类的最佳方法

> ID：11183471
> 
> 赞同：1
> 
> 时间：2012-06-25T04:18:17.977
> 
> 标签：c++, oop

我正在使用 C++ 开发一个小型框架，以在我的一些项目中使用，以静态链接作为各种实用程序库。我想你可以把它比作一个更符合我个人需求的特定领域，以及更简单的库，比如[juce。](http://www.rawmaterialsoftware.com/jucefeatures.php)这与其他任何事情一样都是一种学习和体验练习，所以我想花时间正确地做事并了解我应用的技术。我目前在 linux 中工作，但旨在使代码具有可移植性，因此这将允许我将任何特定于平台的代码写入接口。

目前我正在开发一个基本的消息传递系统，我想允许包含各种类型对象的消息。我最初的想法是这样的：

```
class Message {
  virtual std::string type;
};
class DataMessage : Message {
  std::vector<std::string> *data;
}; 
```

我的问题是，识别 Message 是 DataMessage 并将其转换为实际类型或访问它包含的数据的最佳方法是什么？

我可以为上面的类型使用一个字符串，但这并不能保证每个子类实际上都有一个唯一的类型 ID。另外，我想知道字符串处理的开销是否会比替代方法慢（例如，我可以扩展一个枚举吗？）。

至于访问数据，如果我可以将 Message 转换为正确的类型，这不是问题。否则，我可以向基类添加一个虚函数作为访问器（但是我如何让它使用与基类中指定的返回类型不同的返回类型？如果该类不需要任何其他数据怎么办？ )，或者作为作用于数据的工作函数（但我宁愿将它作为类之间的数据传递机制，而不是回调样式框架）。

非常感谢任何建议、替代方案或链接。讨论不同的方法会很棒！

提前谢谢各位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T04:44:27.603

> **我的问题是，识别 Message 是 DataMessage 并将其转换为实际类型或访问它包含的数据的最佳方法是什么？**

你不应该那样做！
一旦你这样做了，你的设计就会变弱。你基本上最终打破了***[SOLID 范式](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)***的基本原则之一，即***[“里氏替换原则”](http://en.wikipedia.org/wiki/Liskov_substitution_principle)***。
请注意，如果您根据对象的具体类型执行操作，则在代码中的任何地方，您正在对实现而不是接口进行编码。基本的设计准则是：
***“代码到接口而不是实现”。***
如果您开始对具体类型进行编码，您的代码将变得更难以维护并且耦合更紧密。每次您想要添加一个新的派生类时，您的代码甚至会进一步分解并且您会失去慷慨。

相反，您应该依靠多态来为您完成任务。您应该在基类中实现虚方法并在派生类中适当地覆盖它们。你只需要调用这样一个方法，运行时就会在每个类中调用适当的方法，因为运行时*知道*具体的类型是什么。重要的是你编写的代码不需要知道类型。

您可能想查看一些不错的模式，例如***[模板方法模式](http://www.oodesign.com/template-method-pattern.html)***，它们可能对您很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T04:21:50.050

使用 typeid 运算符。这是 C++ RTTI 的一部分。几乎所有编译器都支持它。虽然如果这是您自己的框架，使用数据字段（更好的枚举类型）的方法也不错。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T04:29:42.033

您可以使用`DataMessage* pDataMessage = dynamic_cast<DataMessage*>(pMessage)`. `pDataMessage`仅当是`pMessage`一个`DataMessage`对象时才有效。否则会`NULL`。

# c# - 是否需要创建多个流读取器实例来读取多个文件？

> ID：11183474
> 
> 赞同：2
> 
> 时间：2012-06-25T04:19:28.020
> 
> 标签：c#, performance, file, streamreader

我想使用流式阅读器将多个文件的文本读入一个字符串，但截至目前，我的代码让我每次想读取不同的文件时都创建一个新的流式阅读器。这行得通，尽管重复数百次后，它似乎效率很低。我相信这是一个非常容易解决的问题，但我对编程还是很陌生，所以我会非常感谢一些知识。

我想避免的低效代码示例：

```
someloop
{

    using (StreamReader sR = new StreamReader(changingfilename))
    {
      textString = sR.ReadToEnd();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T04:35:57.910

从磁盘读取比较慢。StreamReader 的实例化可以忽略不计。缓慢的部分是 ReadToEnd()，而不是新的 StreamReader()。如果您的代码太慢，请尽量避免从磁盘读取。

某些版本的 Visual Studio 附带一个分析器，它会准确告诉您哪些方法正在花费程序的 cpu/时钟时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:28:21.363

那么你必须为每个文件创建一个 stramreader 你可以做的是创建一个数组并像这样读取它

```
List<string> lstFileNames=new List<string>();
StringBuilder stringBuffer=new StringBuilder();
lstFileNames.Add("File1");
lstFileNames.Add("File2");
for(int i=0;i<lstFiles.Count;i++)
{
     using (StreamReader sR = new StreamReader(lstFiles[i]))
    {
        stringBuffer.Append(sR.ReadToEnd());
    }
} 
```

用于附加字符串的用户字符串生成器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:32:40.357

更好的方法是让 .NET 为您处理此问题并使用`File.ReadAllText(yourFileNameAndPath)`静态方法。

# ruby - 即使项目是基于django的，使用heroku时ruby中的分段错误

> ID：11183476
> 
> 赞同：1
> 
> 时间：2012-06-25T04:19:41.423
> 
> 标签：ruby, heroku, segmentation-fault, abort

我已经在互联网上广泛搜索并尝试了很多很多建议的解决方案，但这个问题仍然存在。我的 heroku 项目是基于 Django 的，但这些错误都是基于 ruby​​ 的（我什至没有编程）。当我推送到 heroku 或运行 heroku status（或我的 OSX 终端中的任何 heroku 命令）时，我收到以下错误：

```
/usr/local/heroku/vendor/gems/excon-0.14.0/lib/excon/ssl_socket.rb:74: [BUG] Segmentation fault
ruby 1.8.7 (2009-06-12 patchlevel 174) [universal-darwin10.0]

Abort trap 
```

当我在 ruby​​ 项目目录中运行 bundle install 时，出现以下错误：

```
Fetching gem metadata from https://rubygems.org/./Users/mycomp/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:678: [BUG] Segmentation fault
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin10.8.0] 
```

以及控制框架和回溯信息。

不确定什么是相关的，但是：

-以前我也遇到过一个 libssl 错误，当我安装 openssl 时它似乎已经消失了
-根据我的阅读，分段错误错误源于 ruby​​ 的 C 编译器的问题。我在网上找到的解决方案都没有解决这个问题。
-在某一时刻，我删除并重新安装了可能影响 gcc/c 编译器的 XCode
-我使用此命令 rvm install ruby​​-1.9.3 --with-openssl-dir=/usr/bin重新安装了 ruby​​ -
我删除并重新安装了我的计算机上的一个 gemset
- 我也尝试了这个不起作用的修复：

rvm gemset empty
rvm use ree@my-gemset
gem install bundler
bundle install

我实际上并没有在 ruby​​ 中编码（只有一个测试应用程序）-->我可以从 heroku/vendor 和我的计算机中删除它来解决问题吗？宁愿修复它，但更关心确保我可以在我的 Django 项目中使用 heroku。

谢谢！

# node.js - 如何在 mongoose、Node.js 中通过 var 设置键？

> ID：11183480
> 
> 赞同：6
> 
> 时间：2012-06-25T04:19:48.403
> 
> 标签：node.js, mongodb, mongoose

我没有将变量设置为更新的关键，我的代码......

```
mongoose.model('members', Schema).update({ id: '0' }, {$push: {'this_key': 'value'}} , [], function (err, data){}); 
```

如果我使用

```
var this_key = 'test'; 
```

但是 this_key 不是“测试”它是“this_key”

```
 mongoose.model('members', Schema).update({ id: '0' }, {$push: {this_key: 'value'}} , [], function (err, data){}); 
```

我需要一些值 ext POST[] 来设置变量 this_key，

如何在 mongoose、Node.js 中按变量设置键？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T04:24:46.077

对象字段名称中的字符串字面量的语法在这里让你很苦恼。为了绕过它，制作一个中间对象并在不使用文字的情况下构造它：

```
var this_key = 'test';
var push = {};
push[this_key] = 'value';   // here, it will use the variable

mongoose.model('members', Schema).update(
   { id: '0' }, {$push: push} , [], function (err, data){}); 
```

# objective-c - iOS | 基于唯一文件名加载图像

> ID：11183483
> 
> 赞同：0
> 
> 时间：2012-06-25T04:20:04.270
> 
> 标签：objective-c, ios, ios5

我有近 5000 张公司销售的产品图片，每张图片都有一个唯一标识符的名称，该名称与数据库中产品的唯一标识符相同。我想在我的程序中查看产品的图片，问题是 ios 无法帮助我处理图片的名称，以便我可以将每个产品与其图片相关联。有一个解决方案，我从 http 服务器获取图片并将其加载到视图中，但我需要减少流量并能够离线工作。

任何解决此问题的建议或方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:36:47.910

这里最简单的解决方案是分发**没有图像**的应用程序。当用户开始从您的应用中探索产品时，应用应**下载所需产品的图像并将这些图像缓存在设备上**。下次当用户尝试查看产品时，他或她将获得缓存的图像。

对于离线工作应用程序将使用缓存图像和标准占位符图像用于以前未查看过的产品。此外，您可以选择浏览次数最多的产品，例如 5% 的产品，并将这些产品的图像包含到应用程序包中（帕累托原则 - 80/20 - 规则）。

# regex - 从 JMeter 中的 JSON 响应中提取数据

> ID：11183486
> 
> 赞同：2
> 
> 时间：2012-06-25T04:21:37.800
> 
> 标签：regex, json, response, jmeter

我正在尝试为创建汽车索赔维修预订的在线保险应用程序创建 JMeter 脚本。对此应用程序的响应之一返回一个 JSON 对象，该对象具有可用和不可用于预订维修作业的时隙。下面是 JSON 的一个示例。

```
{
    "7": {
        "45": 1,
        "30": 1
    },
    "8": {
        "45": 1,
        "30": 0,
        "15": 1,
        "00": 0
    },
    "9": {
        "45": 1,
        "30": 1,
        "15": 1,
        "00": 1
    },
    "10": {
        "45": 0,
        "30": 1,
        "15": 1,
        "00": 1
    }
} 
```

这显示了上午 7 点、上午 8 点、上午 9 点和上午 10 点的时间。对于时隙 7:45、7:30、7:00 等。对分钟时隙的 1 表示该时隙是空闲的。所以第一个空闲时段是 7:45。

如何使用正则表达式提取第一个空闲槽？

我想出了这个正则表达式来获取小时槽... `"(\d{1})":{"\d{2}":1`，但无法弄清楚如何准确地提取分钟槽。

我想知道使用 BSF 后处理器和一些 javascript 是否更容易做到这一点。不幸的是，我的脚本技能很差。

任何人都可以为我提供如何使用正则表达式或可能使用 BSF 后处理器提取此信息的任何帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:48:21.930

更强大——也更复杂——的方式将是使用 BeanShell 脚本（~java）+任何 json 处理库（例如[json-rpc-1.0](http://repo1.maven.org/maven2/com/metaparadigm/json-rpc/1.0/json-rpc-1.0.jar)）来实现 JSON 响应处理。

查看下面的链接以获取详细信息/示例/代码：

*   [使用 RegEx Extractor 从 JSON 响应中提取多个值](https://stackoverflow.com/questions/8125896/pulling-multiple-values-from-json-response-using-regex-extractor)
*   [JMeter 中的 JSON](http://theworkaholic.blogspot.com/2012/05/json-in-jmeter.html)
*   [使用 Jmeter 和 BSF 后处理器处理 JSON 响应](http://www.havecomputerwillcode.com/blog/?p=500)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:25:39.993

嗯，如果你想找到前两个数字出现，你可以使用这样的东西：

```
(\w+)(?:[\D]*)(\w*) 
```

我在[regexplanet](http://fiddle.re/3gnc)上发布了表达式，以便您可以测试各种输入 JSON。

# oracle - 列不明确定义创建视图时出错

> ID：11183488
> 
> 赞同：0
> 
> 时间：2012-06-25T04:21:42.587
> 
> 标签：oracle, oracle11g

我正在尝试使用以下查询创建视图。

```
SELECT the_day, t1, t2
  FROM year_days
    LEFT JOIN (SELECT tea_prodcution_date, SUM(quantity) t1
                  FROM TEA_PRODUCTION
                  WHERE field_name like 'T1'
               GROUP BY tea_prodcution_date) ON the_day = tea_prodcution_date
     LEFT JOIN (SELECT tea_prodcution_date, SUM(quantity) t2
                  FROM TEA_PRODUCTION
                  WHERE field_name like 'T2'
               GROUP BY tea_prodcution_date) ON the_day = tea_prodcution_date
 ORDER BY the_day 
```

**year_days**是使用以下查询创建的视图。

```
SELECT add_months(TRUNC(sysdate - (365), 'YYYY'),to_number(to_char(sysdate,'mm'))) + (level - 1) AS the_day
  FROM dual
CONNECT BY level <=
           to_number(TO_CHAR(last_day(add_months(TRUNC(sysdate, 'YYYY'), 11)),
                             'DDD')) 
```

当我尝试执行第一个查询以创建视图时，出现以下错误。

```
ORA-00918: column ambiguously defined
00918\. 00000 -  "column ambiguously defined"
*Cause:    
*Action:
Error at Line: 10 Column: 58 
```

从`ON the_day = tea_prodcution_date`线路发生错误。

我怎样才能纠正这个错误并创建上面的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:12:59.387

我的查询发现错误。查询应正确如下。

```
SELECT the_day, t1, t2
  FROM year_days
    LEFT JOIN (SELECT tea_prodcution_date, SUM(quantity) t1
                  FROM TEA_PRODUCTION
                  WHERE field_name like 'T1'
               GROUP BY tea_prodcution_date) aa ON the_day = aa.tea_prodcution_date
     LEFT JOIN (SELECT tea_prodcution_date, SUM(quantity) t2
                  FROM TEA_PRODUCTION
                  WHERE field_name like 'T2'
               GROUP BY tea_prodcution_date) bb ON the_day = bb.tea_prodcution_date
 ORDER BY the_day 
```

# com - 从主机应用程序调试 COM dll

> ID：11183493
> 
> 赞同：0
> 
> 时间：2012-06-25T04:21:56.130
> 
> 标签：com, debug-symbols

我有一个我想从外部应用程序运行调试的 COM dll，我确信这以前可以工作，但不再工作了。（使用 VS 2012 RC）我已经阅读了很多文章，但我还没有看到其中提到使用外部应用程序的文章，这仍然可能吗？

我收到“未加载调试符号”消息，当我转到“调试”>“Windows”>“模块”时，我的 dll 未列出但外部应用程序已列出，对吗？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:38:07.970

我强烈建议使用早期版本的 MSVS（例如 MSVS 2010 Pro）或下载 WinDbg。任何一个都应该轻松完成这项工作：

*   [http://msdn.microsoft.com/en-us/library/windows/hardware/ff551063%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551063%28v=vs.85%29.aspx)

*   [http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)

*   [http://therightstuff.de/2010/07/24/WinDbg-Commands.aspx](http://therightstuff.de/2010/07/24/WinDbg-Commands.aspx)

# objective-c - 将 NSTextView 格式的文本转换为 NSData（并返回）

> ID：11183495
> 
> 赞同：3
> 
> 时间：2012-06-25T04:22:03.107
> 
> 标签：objective-c, nsdata, nstextview, nsattributedstring, nstextstorage

我应该如何将 a 的内容转换`NSTextView`为`NSData`，然后在 Mac OS X 上将其转换回来并显示？

我可以使用`textView.textStorage.string`（其中 textView 是`NSTextView`对象）转换文本而不进行格式化。但是，我也想保存文本格式。

事实上，我已经实施了一种可行的方法，但我不确定它是否能保证始终有效。我对对象本身进行编码`NSTextStorage`并编写它，然后将其作为`NSAttributedString`. （`NSTextStorage`是 的子类`NSAttributedString`。）我这样做是因为我不能直接`textStorage`为设置`NSTextView`，但我可以设置其属性字符串。

这是我的转换代码（结果在 中`data`）：

```
NSMutableData *data = [[NSMutableData alloc] init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];          
[archiver encodeObject:textView.textStorage forKey:@"attrs"];
[archiver finishEncoding]; 
```

读回来：

```
NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
NSAttributedString* theAttrString = [unarchiver decodeObjectForKey:@"attrs"];
[unarchiver finishDecoding]; 
```

并显示它：

```
[textView.textStorage setAttributedString:theAttrString]; 
```

考虑到我对一个`NSTextStorage`对象进行编码并将其读回并将其解释为`NSAttributedString`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T05:14:15.530

是的，这会起作用。`NSTextStorage`将使用. `NSCoding`_ 这意味着即使您编写了一个可变对象，您也会将数据作为不可变对象读回。`NSAttributedString``NSAttributedString`

显然，如果您使用该`setAttributedString:`方法就可以了，因此您将使用编码的不可变数据来更新可变状态。只要您的序列化/反序列化代码正确，这应该可以完美运行。

# c++ - 如何知道 QDockWidget 是通过按钮还是通过拖动取消停靠？

> ID：11183502
> 
> 赞同：2
> 
> 时间：2012-06-25T04:23:37.620
> 
> 标签：c++, qt, qt4

我是 Qt 新手，我不知道如何解决这个问题。当用户单击取消停靠按钮时，我有一个 QDockWidget 放置在某个位置（我不知道它的名称）。发生这种情况时，小部件的可见性会更改两次，因为它会消失并再次出现但未停靠。为了在它脱离后将其放置在某个位置，我在可见性更改事件中使用它：

```
if (ui->searchBar->isFloating()) {
    int x = (this->x() + this->width()) - 410;
    int y = (this->y() + this->height()) - 70;
    ui->searchBar->setGeometry(QRect(x,y,400,60));
} 
```

问题是，在 Linux 中，如果我通过拖动小部件而不是单击取消停靠按钮来取消停靠，当我将它放在窗口的某个位置时，它会自动移动到上面代码指定的位置。这是有道理的，但是这不会在 Windows 中发生（而且我需要应用程序在两个操作系统中运行）。在 Windows 中，如果您单击按钮，它会转到指定位置，但如果您拖动它，它会停留在您放置它的位置。

要修复它，我计划仅在未拖动小部件时才使用上述代码，但我不确定如何执行此操作。有人可以帮助我或对如何解决这个问题有更好的想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T07:44:31.050

QDockWidget 有名为“qt_dockwidget_floatbutton”的未记录按钮。您可以像这样访问它：

```
QAbstractButton* button = 
        YourDockWidget->findChild<QAbstractButton*>("qt_dockwidget_floatbutton");

connect(button, SIGNAL(clicked()), this, SLOT(yourSlot())); 
```

因此，您可以将代码放在该插槽上方，以仅在通过按钮取消停靠时移动小部件。

# xcode - 如何创建带有按钮点击历史的 UITableView

> ID：11183503
> 
> 赞同：0
> 
> 时间：2012-06-25T04:24:17.010
> 
> 标签：xcode, list, uitableview, button, history

我正在创建一个应用程序，该应用程序应列出单击按钮时的日期和时间，并将列表放入 UITableView 中。我的想法是每次用户点击按钮时获取日期和时间戳，然后将其保存在单击按钮时的每次时间和日期的字典对象数组中。我还将有另一个按钮，它只是加载一个模式视图，显示所述 UITableView 和按钮点击历史列表。

我能够部分地做到这一点，因为我的表填充了数组中的字典条目数。问题是，它总是以所有条目的相同时间和日期结束。

这是最初带有一个条目的表格的屏幕截图。 ![在此处输入图像描述](../Images/4773dcbde0165dcb3fc4afaa87bc3363.png)

当我多次点击按钮时会发生这种情况。它显示所有行的更新时间。 ![在此处输入图像描述](../Images/9d452bf5e57e6085a74ee407a3cf343c.png)

如何在表格中显示历史记录并防止其被更新？我只是使用 NSUserDefaults 来保存数据。

这是我的 Button Clicked 方法中的一些代码：

```
- (IBAction)btnClicked:(id)sender
{
    NSLog(@"Button pressed");

    // Gets the current time and formats it
    NSDate *timeNow = [NSDate date];
    NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
    [timeFormatter setDateFormat:@"HH:mm a"];

    // Gets the current date and formats it
    NSDate *dateNow = [[NSDate alloc] init];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"MMM dd, yyyy"];

    NSString *currentTime = [timeFormatter stringFromDate:timeNow];
    NSString *currentDate = [dateFormatter stringFromDate:dateNow];
    NSString *timestamp = currentTime;
    NSString *date = currentDate;

    // This is where values gets saved
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:timestamp       forKey:@"TimeStamp"];
    [defaults setObject:date            forKey:@"Date"];
    [defaults synchronize];

    NSString *time = [defaults objectForKey:@"TimeStamp"];
    NSString *dateToday = [defaults objectForKey:@"Date"];

    tableVC.tableDict = [[NSMutableDictionary alloc] initWithObjectsAndKeys:time, @"Time", dateToday, @"Date", nil];

    [tableVC.tableArray addObject:tableVC.tableDict];
    [tableVC.table reloadData];
} 
```

这是我的 viewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *time = [defaults objectForKey:kTimeStampText];
    NSString *date = [defaults objectForKey:kDateText];

    tableDict = [[NSMutableDictionary alloc] initWithObjectsAndKeys:time, @"Time", date, @"Date", nil];

    tableArray = [[NSMutableArray alloc] initWithObjects:tableDict, nil];
} 
```

这是我的表格方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tableArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *customCell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:@"CustomCell"];
    if (customCell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" 
                                                     owner:self 
                                                   options:nil];
        for (id oneObject in nib) if ([oneObject isKindOfClass:[CustomCell class]])
            customCell = (CustomCell *)oneObject;
    }

    customCell.dateLbl.text = [tableDict objectForKey:@"Date"];
    customCell.timeLbl.text = [tableDict objectForKey:@"Time"];

    return customCell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 74;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:35:39.093

好的，我想我发现了您的问题，您正在访问每个表格行的相同日期。

```
customCell.dateLbl.text = [tableDict objectForKey:@"Date"];
customCell.timeLbl.text = [tableDict objectForKey:@"Time"]; 
```

是不正确的

```
NSDictionarry *dict = [tableArray objectAtIndex:[indexPath row]];
customCell.dateLbl.text = [dict objectForKey:@"Date"];
customCell.timeLbl.text = [dict objectForKey:@"Time"]; 
```

现在应该很好地循环并打印所有日期。

您所拥有的代码的问题是，对于 tableview 中的每一行，都会调用 index path 方法的行，即它就像一个循环，因此您自己分配每个单元格属性，希望这是有道理的。

# mysql - MySQL 表排序规则突然变为“正在使用”

> ID：11183504
> 
> 赞同：4
> 
> 时间：2012-06-25T04:24:27.020
> 
> 标签：mysql, phpmyadmin

我今天下午早些时候通过 Firefox 连接到我的网站，我收到一条错误消息，内容为“未知存储引擎‘InnoDB’”。这特别奇怪，因为在过去的几天里我根本没有接触过数据库，而且我的网站直到几个小时前都运行良好。当我去 phpmyadmin 时，我注意到一些具有排序规则 utff8_general_ci 的表已更改为“in_use”，并且它们的引擎已从 MyISAM 更改为空...引擎类型在 phpmyadmin 中只是留空。我对mysql更复杂的方面有点陌生，不知道发生了什么。有人可以提供一些可能会引导我走向正确方向的见解吗？

谢谢，

槊

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:05:14.790

尝试以下操作：

```
REPAIR TABLE `table_name` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T06:12:24.587

这可能不是一个表，而是一个引用另一个不再存在的表/视图的视图。如果是这种情况，当你点击表名时，就会出现错误：

# 1356 - 视图“PervAtOtherData”引用无效的表或列或函数或视图的定义者/调用者缺乏使用它们的权限

要查看视图调用的内容，请使用以下 SQL：

```
SHOW CREATE VIEW `PervAtOtherData`; 
```

或者，要删除视图：

```
DROP VIEW `PervAtOtherData`; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-19T20:11:36.460

如果在Windows上，请进行系统还原。我在 37 张桌子上遇到了同样的问题。它对我有用。如果托管，请将数据库表替换为您计算机上的表

# java - 如何为 JAXB 绑定自定义 Getter 和 Setter 方法

> ID：11183505
> 
> 赞同：1
> 
> 时间：2012-06-25T04:24:35.990
> 
> 标签：java, jaxb

我们有 5 个 xsd 文件，first.xsd、second.xsd、third.xsd 等等。

我们希望对每个 xsd 文件中定义的 dateTime 类型使用 Calendar，first.xsd 除外。

```
<jaxb:globalBindings>
    <jaxb:javaType name="java.util.Calendar" xmlType="xsd:dateTime" parseMethod="javax.xml.bind.DatatypeConverter.parseDateTime" printMethod="javax.xml.bind.DatatypeConverter.printDateTime"/>
    <jaxb:serializable/>
</jaxb:globalBindings> 
```

我们使用此条目的目的是告诉 JAXB 在我们在 xsd 文件中使用 dateTime 时生成日历。但是，我们希望将 XMLGregorianCalendar 用于我们在 first.xsd 中定义的 java 类型：

```
 ...
 <xsd:simpleType name="myDateType">
    <xsd:restriction base="xsd:dateTime">
    </xsd:restriction>
 </xsd:simpleType>
 ... 
```

为此，我们在 jaxbBinding 文件中添加以下条目：

```
<jaxb:bindings schemaLocation="first.xsd">

    <jaxb:bindings node="xsd:simpleType[@name='myDateType']">
        <jaxb:class name="XMLGregorianCalendar" implClass="javax.xml.datatype.XMLGregorianCalendar" />                  
        <jaxb:schemaBindings>
            <jaxb:package name="javax.xml.datatype"/>
        </jaxb:schemaBindings>
    </jaxb:bindings>

  </jaxb:bindings> 
```

我们发现生成的java文件有一个奇特的getter setter方法：

```
package com.time;

public class MyClass{

   @XmlElement(name = "MyDate", required = true)
   protected XMLGregorianCalendar sentenceDate;

   public com.time.XMLGregorianCalendar getMyDate() {
    return myDateType;
   } 

   public void setMyDate(com.time.XMLGregorianCalendar value) {
    return this.myDateType = (com.time.XMLGregorianCalendar)value;
   } 
```

我们期望 JAXB 将创建一个 getter setter 方法来设置并返回一个 com.time.XMLGregorianCalendar。然而事实并非如此。

有谁知道我应该用什么来告诉 JAXB 在我的类中使用 javax.xml.datatype.XMLGregorianCalendar 作为 getter 和 setter 方法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:04:55.193

删除限制，您的代码将遵循。

```
 <xsd:simpleType name="myDateType" type="xsd:dateTime">
 </xsd:simpleType> 
```

# entity-framework-4 - 为什么在使用 Entity Framework 4 时 MSpec 会报告误报？

> ID：11183507
> 
> 赞同：1
> 
> 时间：2012-06-25T04:25:03.390
> 
> 标签：entity-framework-4, mspec

我正在尝试针对某些 EF4 对象编写一些 Mspec 测试。然而，他们正在返回误报。我不知道这是我编写测试的方式还是发生了其他事情。测试类如下：

```
[Subject(typeof (Product))]
public class When_loading_a_known_product 
{
    protected static Product product;
    protected static ProductDbContext dbContext;

    Establish context = () =>
    {
        dbContext = new ProductDbContext(ConnectionStringProvider.GetConnectionString(BusinessDomain.Product));
    };

    Because of = () =>
                     {
                         product = dbContext.Products.First(x => x.Id == 2688);
                     };

    // The next four tests should be false but all pass ( the actual count is 4 for the given record)
    It should_have_a_known_number_of_Classifications = () => product.Classifications.Count().Equals(9999);
    It should_have_a_known_number_of_Classifications2 = () => product.Classifications.Count().Equals(1);
    It should_have_a_known_number_of_Classifications3 = () => product.Classifications.Count().Equals(-99);
    It should_have_a_known_number_of_Classifications4 = () => product.Classifications.Count().Equals(4.5);
    //
} 
```

在 Nunit 中编写的相同测试可以正常工作。

```
[Test]
public void It_should_have_a_known_number_of_Classifications()
{
    private ProductDbContext dbContext = new ProductDbContext(ConnectionStringProvider.GetConnectionString(BusinessDomain.Product));;
    Product product = dbContext.Products.Find(2688);
    // true
    Assert.That(product.Classifications.Count(), Is.EqualTo(4));

    // All of these will correctly regester as false
    //Assert.That(product.Classifications.Count(), Is.EqualTo(9999));
    //Assert.That(product.Classifications.Count(), Is.EqualTo(1));
    //Assert.That(product.Classifications.Count(), Is.EqualTo(-99));
    //Assert.That(product.Classifications.Count(), Is.EqualTo(4.5));
} 
```

作为 EF4 和 MSpec 的新手，我希望有人能指出我的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:13:38.143

您应该使用 MSpec 的断言库：

```
It should_have_a_known_number_of_Classifications =
  () => product.Classifications.Count().ShouldEqual(9999); 
```

MSpec（和 NUnit）根据框架方法 ( `[Test]`, `It`) 中的代码是否引发异常来识别测试结果（成功、失败）。您使用 .NET Framework 的`object.Equals()`方法来断言仅返回 true 或 false。因此，MSpec 认为您的规范是成功的，因为`Equals()`不会引发不平等。

# ruby-on-rails - 当已经有 rails 2.x 时，为什么 prawnto gem 安装 rails 3.x？

> ID：11183509
> 
> 赞同：0
> 
> 时间：2012-06-25T04:25:11.763
> 
> 标签：ruby-on-rails, rubygems

我安装了`rails`(2.3.5) 和`prawn`(0.12.0)。当我安装时`prawnto`，gem`rails`也会安装 3.2.6 版本。

的依赖`prawnto`是：

```
prawn >= 0
rails >= 2.1 
```

`prawnto`当依赖项已经存在时，为什么要安装 Rails 3.x ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T05:39:36.790

## **tl;博士**使用捆绑器。它摇摆不定。

好吧，这基本上取决于依赖解析在 RubyGems 中的工作方式。如果您对它不是很熟悉，[可以像使用此 XKCD 漫画中的 Primer 面板一样快速上手](http://xkcd.com/657/)。RubyGems 依赖管理和 Primer 故事情节在复杂性方面非常相似。

当一个 gem 指定一个依赖项时，比如说`rails >= 2.1`，当你去安装那个 gem 时，RubyGems 会方便地忽略你当前安装的所有 gem，然后查询 Web API 以找到大于或等于的绝对最新版本的 Rails到`2.1`.

在撰写本文时，它将找到 version `3.2.6`，因此会尽职地安装该版本的 Rails，因为它符合依赖项要求。它还将安装 Rails 的每一个依赖项，以及它们的依赖项，以及子子子子子依赖项，直到没有一个 gem 没有安装依赖项。

我不会详细说明它是如何工作的，因为当我想到它时，它会让我的视线变得模糊。

* * *

现在，如果您使用的不是纯 RubyGems，例如 Bundler，您将能够拥有这样的 Gemfile：

```
source 'http://rubygems.org'
gem 'rails', '2.3.4'
gem 'prawnto', '0.1.1' 
```

然后运行`bundle install`，然后会发生一些*神奇的*事情。Bundler 将找出所有在 中指定的 gem 的依赖关系`Gemfile`，以及它们所依赖的 gem，然后只安装这些 gem。

这意味着如果您`prawnto`想要 Rails `>= 2.1`，它**不会**安装 3.2.6 因为还有另一个依赖项说 Rails**必须精确地是** `2.3.4`。因此，将安装 Rails 2.3.4。

如果您有冲突的版本，并且 gem A 指定了对 gem B 的依赖项`~> 1.0`，但是 gem C 指定了 gem B 必须为 '= 0.5.0' 的依赖项，Bundler 将不会很高兴并且会引发错误，因为无法解决依赖关系。

* * *

我真的建议对所有 Rails 项目使用 Bundler。即使是在 Rails 2 上运行的那些[。Bundler 网站上有一个页面](http://gembundler.com/rails23.html)可以帮助您开始使用 Rails 2.3 项目和 Bundler。

# virtualbox - Vagrant 安装程序有什么优势吗？

> ID：11183510
> 
> 赞同：1
> 
> 时间：2012-06-25T04:25:20.997
> 
> 标签：virtualbox, chef-infra, vagrant

`gem install vagrant`除了非 Ruby 主义者可以更轻松地开始使用它之外，使用 Vagrant 的可下载安装程序是否有任何实质性优势（对用户而言） ？

我正在为我工​​作的一家公司介绍 Vagrant，有人问我为什么不让每个人都使用安装程序。我更喜欢使用`gem install vagrant`，因为（除了更熟悉并安装到“正常”位置之外）它们`gem install whatever`无论如何都需要在某个时候做，并且最好将所有东西都设置好。

但是，我想知道以一种或另一种方式进行操作是否有优势（一旦一切都设置好）。

我怀疑安装程序是首选方法，因为它减少了分散开发人员为项目做出更多贡献的支持问题，并且因为它降低了进入障碍。这两个都是很好的理由，但不一定有足够的重量让我让每个人都切换，因为他们都设置了 Vagrant、Chef、VirtualBox、Ruby、Git 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T01:03:23.273

我看到的主要优势是在使用多个版本的 Ruby 时。假设您在某个 gemset 中安装了 RVM 并`gem install vagrant`在某个版本的 ruby​​ / 下。除非您将该版本的 ruby​​ 与该 gemset 一起使用，否则它将不能作为 gem 使用。

但是，我怀疑使用安装程序会将`vagrant`“二进制”（ruby 脚本）放置在 /usr/local/bin 或类似的位置，这样无论当前活动的 ruby​​ 是什么，它都始终可用。

例如，我用 rvm 安装了 gem `$ which vagrant /Users/chrislundquist/.rvm/gems/ruby-1.9.3-p194/bin/vagrant`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:02:26.183

如果我没记错的话，安装程序将是从 1.1 及更高版本安装 Vagrant 的唯一方法。

# javascript - 强制同步 iframe 加载

> ID：11183512
> 
> 赞同：4
> 
> 时间：2012-06-25T04:25:27.050
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

我有一个指向任意外部域的 iframe `http://A`。我想`http://B`在用户事件中将其发送到另一个外国域。

说`http://B`是加载缓慢。如果我只是设置`iframe.src = "http://B"`，则 iframe 将保留内容，`A`直到`B`完全下载并可以呈现。这让用户感到困惑，因为他们要求`B`，但他们看到的只是`A`.

我想从我的域中加载一个页面，例如`../html/loading.html`，介于`A`和之间`B`。假设这个页面加载总是很快的。

我观察到设置`iframe.src`是异步的。考虑以下代码：

```
iframe.src = '../html/loading.html';
iframe.src = 'http://B'; 
```

这会跳过打开`../html/loading.html`并直接转到`http://B`. （不管`loading.html`可能有多快，或者可能有多慢`B`）。我也试过这样做：

```
iframe.src = '../html/loading.html';
iframe.contentWindow.location.reload();
iframe.src = 'http://B'; 
```

但是，这会引发跨域错误，说我无法访问 of 中的`contentWindow`内容`http://A`（因为`loading.html`尚未加载，我们仍在运行`http://A`，我无法强制重新加载）。

有没有办法强制 iframe 同步加载 URL？我正在编写一个 Chrome 扩展程序，所以如果它必须具体`crx`到那也没关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T04:50:15.630

一旦当前 URL 完成加载，您将希望加载下一个 URL，幸运的是，iframe 有一个我们可以使用的 onload 事件。

你会想做这样的事情：

```
iframe.src='../html/loading.html'
//load the next page after finishing loading the last one
iframe.onload=function(){iframe.src='http://B';} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T04:34:26.707

尝试这个：

最初 iframe 应该使用加载 loading.html

```
 iframe.src = '../html/loading.html'; 
```

在 loading.html 的客户端 onload 事件中，应使用将源更改为其他域 B

```
 iframe.src = 'http://B'; 
```

# iphone - 当我分配启动图像时，Xcode 将 Default.png 作为图标文件放入我的 plist

> ID：11183514
> 
> 赞同：1
> 
> 时间：2012-06-25T04:26:07.383
> 
> 标签：iphone, ios, objective-c, xcode, plist

当我设置 a`Launch Image`时，Xcode 创建一个副本并在我的图标文件`Default.png`中创建一个条目（`plist``iOS 5) / Primary Icon / Icon Items --> Item 1 : Default.png`

`Item 0 : MyIcon.png`是我已经通过 Target 放置的应用程序图标。

这是一个问题的原因是启动图像优先于实际图标，因此，它显示为主图标而不是我的实际图标图像。

为什么 Xcode 会这样做？我可以安全地`Default.png`从我的 . `plist`? （这似乎解决了问题）我需要在`Default.png`其他地方复制吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T04:30:39.233

还有一种替代方法。按照这个简单的步骤：

![在此处输入图像描述](../Images/99aa60a55348abc98cfffb2ae0bdecd8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:36:10.603

只需删除 Default.png 文件。在摘要部分项目的目标设置中再次选择它。您也可以将其拖放到摘要部分的启动图像图标上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:36:31.390

答案是，如果您正在为 iOS 5 开发应用程序，则有两个不同的部分用于声明您的图标。项目编辑器中的信息编辑器不显示 iOS 5 部分。您必须在属性列表编辑器中加载文件。

基本上对于 iOS 5 之前的版本，有“CFBundleIconFiles”，对于 iOS 5+，它是“CFBundleIcons”

确保它们具有相同的图标文件名称。

# google-apps-script - 通过脚本将图像（固定位置）添加到 Google Apps 文档

> ID：11183518
> 
> 赞同：1
> 
> 时间：2012-06-25T04:27:04.527
> 
> 标签：google-apps-script

虽然我们可以在段落中添加内联图像，但似乎没有一种方法可以使用 Google Apps 脚本添加“固定位置”的图像。如何插入或操作固定位置的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:02:45.340

DocumentApp 目前仅支持返回和创建内联图像的功能。如果您想查看对固定位置图像的访问，您可以在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上提交功能请求。

# ios - UISegmentedControl 和 UIAppearance 的奇怪行为

> ID：11183519
> 
> 赞同：5
> 
> 时间：2012-06-25T04:27:13.493
> 
> 标签：ios, uisegmentedcontrol, uiappearance

我正在通过应用程序委托中的这些语句设置分段控件的外观。

```
 [[UISegmentedControl appearance] setBackgroundImage:[[UIImage imageNamed:@"segmentation_normal.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0 , 0, 0)] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setBackgroundImage:[[UIImage imageNamed:@"segmentation_selected.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0 , 0, 0)] 
        forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

    [[UISegmentedControl appearance] setDividerImage:[UIImage imageNamed:@"segmentation_divider_NormalNormal.png"]   forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setDividerImage:[UIImage imageNamed:@"segmentation_divider_NormalSelected.png"] forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setDividerImage:[UIImage imageNamed:@"segmentation_divider_SelectedNormal.png"] forLeftSegmentState:UIControlStateSelected rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

结果很好。当我选择任何段时，背景和分隔符设置正确（应用程序首次启动时默认选择订单段）。当我选择 Release 部分时，如下所示，一切看起来都很好。

![在此处输入图像描述](../Images/136317cb77f9899fe377235e1848286c.png)

问题是当我离开视图然后返回视图时（我存储所选索引并将其设置在 viewDidLoad 中以重新选择段），由于某种未知原因，分隔符设置不正确。

![在此处输入图像描述](../Images/64c663cd0832b8b0201046fcd9b55315.png)

如果我点击 AZ，然后点击 Release，它会自行纠正。此错误仅在视图首次加载且所选段为 Release 或 AZ 时发生。选择 Order 并加载视图时，分隔线总是看起来很好。

图像尺寸：分隔线宽 2 像素（所有 3 张图像大小相同），背景各 2 像素宽。

任何想法或指示将不胜感激，在过去的 10 个小时里，我一直在努力寻找解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T14:54:05.477

我认为这是 UISegmentedControl 的一个错误。您可以通过在延迟后设置选定的段来解决它，以允许控制时间自行绘制。您甚至不必使用实际的延迟，就像：

```
[self performSelector:@selector(setPreferences) withObject:nil afterDelay:0.0]; 
```

Where`setPreferences`会更新分段控件的值。

# macos - 在系统级 Mac OS X Lion 上修改传出 HTTP 标头

> ID：11183520
> 
> 赞同：3
> 
> 时间：2012-06-25T04:27:48.893
> 
> 标签：macos, http, networking, osx-lion, filtering

我想编写一个程序来修改所有传出（请求）HTTP 请求，以在我的 Mac OS X Lion 系统上即时更改其中一个传出标头。是否有任何系统 API 可以让我像这样重写端口 80 流量？

作为参考，我只需要在不实际更改标题长度的情况下就地替换标题。我也已经尝试过使用标准 HTTP 代理，但是设置起来并不容易，并且只过滤我配置了代理的程序上的流量，并尊重该设置。我也想知道它是否容易打开和关闭，因为我只需要在某个网络位置而不是在家里。

[PS 我确实在Modify http headers on system level (Linux)](https://stackoverflow.com/questions/8107848/modify-http-headers-on-system-level-linux)中找到了有关在 linux 中执行此操作的信息，但是我很确定 Mac OS X lion 不支持 iptables，虽然它确实支持 ipfw，但它已被弃用的PF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:45:33.453

你真的确定，你需要它“系统范围”不会像[live-http-headers](https://addons.mozilla.org/en-US/firefox/addon/live-http-headers/)或[modify-headers](https://addons.mozilla.org/en-US/firefox/addon/modify-headers/)这样的浏览器插件就足够了吗？

如果您确定需要它，也许这个攻击工具可以提供帮助： [middler](https://code.google.com/p/middler/)

或：[提琴手](http://www.fiddler2.com/fiddler/help/httpsdecryption.asp)

但请注意使用，在某些国家，甚至拥有此类工具可能是非法的。也请尊重他人的隐私。

# objective-c - 如何在目标 c 中为解析的数据创建部分

> ID：11183521
> 
> 赞同：1
> 
> 时间：2012-06-25T04:27:53.907
> 
> 标签：objective-c, sections

我已经解析了按字母顺序放入 tableview 的数据。字母顺序是基于一个人的姓氏。现在我需要添加索引栏和部分。我正在创建的是一种地址簿。这是我用来将解析后的数据放入单元格的代码`label.text = [arrayOfTitle objectAtIndex:indexPath.row];`

这是我在 tableview 上放置索引栏和节标题的代码：

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[self arrayOfNames] count];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 26;
}

-(NSArray*)sectionIndexTitlesForTableView:(UITableView *)tableView

{

    return [[UILocalizedIndexedCollation currentCollation] sectionIndexTitles];
}

- (NSString *)tableView:(UITableView *)aTableView titleForHeaderInSection:(NSInteger)section {

    if ([self.arrayOfNames objectAtIndex:section] ) {
        return [[[UILocalizedIndexedCollation currentCollation] sectionTitles]
                objectAtIndex:section];
    }

    return nil;

}

@end 
```

我知道如何从 plist 文件中创建部分，但是因为这里我只有一个解析数据数组，所以我很难将它分成部分。谢谢您的帮助。

# ios - CCSprite 在 iPad+Retina 上不显示

> ID：11183528
> 
> 赞同：0
> 
> 时间：2012-06-25T04:29:04.880
> 
> 标签：ios, ipad, cocos2d-iphone, ccsprite, retina-display

我还有一个奇怪的问题，我无法在合理的时间内解决。我的应用程序在 iPhone 4S 和 iPod 4 上运行良好，无论是否启用视网膜。它也适用于没有视网膜的 iPad3。但是当 iPad 启用了视网膜时，CCSprites 就不会出现。我确实有显示的相机图像底层，但上面没有图形。我想我有所有可用的“-hd”版本的文件，它们在 iPhone 上的视网膜模式下也能很好地显示。

我粘贴了我认为相关的代码：

```
- (void) applicationDidFinishLaunching:(UIApplication*)applicationv{
    CCLOG(@"applicationDidFinishLaunching");

    window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
        [CCDirector setDirectorType:kCCDirectorTypeDefault];

    CCDirector *director = [CCDirector sharedDirector];

    viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
    viewController.wantsFullScreenLayout = YES;

    EAGLView *glView = [EAGLView viewWithFrame:[window bounds]
                                   pixelFormat:kEAGLColorFormatRGBA8
                                   depthFormat:0    // GL_DEPTH_COMPONENT16_OES
                        ];

    // attach the openglView to the director
    [director setOpenGLView:glView];

    // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    if( ! [director enableRetinaDisplay:YES] )
        CCLOG(@"Retina Display Not supported");

#if GAME_AUTOROTATION == kGameAutorotationUIViewController
    [director setDeviceOrientation:kCCDeviceOrientationPortrait];
#else
    [director setDeviceOrientation:kCCDeviceOrientationLandscapeRight];
#endif

    [director setAnimationInterval:1.0/20];
    [director setDisplayFPS:NO];

    [viewController setView:glView];
    [window addSubview: viewController.view];

    [CCDirector sharedDirector].openGLView.backgroundColor = [UIColor clearColor];
    [CCDirector sharedDirector].openGLView.opaque = NO;

    glClearColor(0.0, 0.0, 0.0, 0.0);

    _cameraView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    _cameraView.opaque = NO;
    _cameraView.backgroundColor=[UIColor clearColor];
    [window addSubview:_cameraView];

    _imageView = [[UIImageView alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
    [_cameraView addSubview:_imageView];

    [window bringSubviewToFront:viewController.view];    
    [window makeKeyAndVisible];

    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    CCScene *scene = [CCScene node];
    _layer =[[[HelloWorldLayer alloc] init] autorelease]; 
    _menu =[MenuScene node]; 
    [scene addChild:_layer];
    [_layer addChild:_menu];
    viewController.fdLayer = _layer;
    _layer.root = viewController;
    [[CCDirector sharedDirector] runWithScene: scene]; 
```

和 MenuScene.m：

```
@implementation MenuScene
+(id) scene {
    CCScene* scene = [CCScene node];
    CCLayer* layer = [MenuScene node];
    [scene addChild:layer];
    return scene;
}

-(id) init {
    if ((self = [super init])) {
        CCLOG(@"init %@", self);

        CGSize screen = [[CCDirector sharedDirector] winSize];
        CCLOG(@"%f %f",screen.width,screen.height);
        CCLayerColor *b = [CCLayerColor layerWithColor:ccc4(0, 0, 0, 100) width:screen.width height:screen.height/4];
        b.isRelativeAnchorPoint=YES;
        b.anchorPoint=ccp(0, 1); // left top corner
        b.position=ccp(0, screen.height);
        [self addChild:b];

        CCSprite* bg = [CCSprite spriteWithFile:@"01-main-logo.png"];
        bg.position = CGPointMake(screen.width / 2, screen.height*0.12);
        [b addChild:bg]; 
```

编辑：我做了临时破解：

```
if (UI_USER_INTERFACE_IDIOM() != UIUserInterfaceIdiomPad)  {
    // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    if( ! [director enableRetinaDisplay:YES] )
        CCLOG(@"Retina Display Not supported");
    } 
```

但问题仍然存在 - 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:38:01.673

问题解决了。“清洁”还不够。按下“清理”时按住“选项”按钮会强制清理更多内容。在那之后，事情开始起作用了。也有可能它与“压缩 PNG 文件”设置有关，我在问题开始后将其更改为“否”，但可能未强制执行。无论如何问题消失了，感谢观看:)

# html - iPad上HTML提交按钮中的多行

> ID：11183531
> 
> 赞同：0
> 
> 时间：2012-06-25T04:29:13.230
> 
> 标签：html, css

我在现有网站上有以下内容 -`'&#10;'`创建一个多行按钮 - 我需要文本出现在按钮的多行上（CSS 的“button1”提要创建带圆边的按钮）

桌面/笔记本电脑浏览器中出现多行按钮，**除了**通过 iPad safari 查看时，一切都可以找到和花花公子 - 只有按钮的第一行出现在 iPad 的 safari 浏览器中。

你有任何关于如何在 iPad 浏览器中工作的提示吗？

```
<INPUT id="button1" type="submit" VALUE="I wish to update my &#10;legal name" tabindex="1"> 
```

# c# - Visual C# 速成版中的 Rss 阅读器

> ID：11183535
> 
> 赞同：4
> 
> 时间：2012-06-25T04:29:50.933
> 
> 标签：c#, rss, rss-reader

您好我正在尝试在 Visual C# Express 中创建一个 RSS 阅读器。当表单加载时，我需要将 rss 提要读入文本框。我以前从未使用过 RSS 提要，我遇到的所有示例都是在 Visual Studio 中完成的，似乎我无法使用它：

```
 (XmlReader reader = XmlReader.Create(Url)) 
```

这就是我到目前为止所得到的。它不起作用。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        var s = RssReader.Read("http://ph.news.yahoo.com/rss/philippines");
        textBox1.Text = s.ToString();
    }
    public class RssNews
    {
        public string Title;
        public string PublicationDate;
        public string Description;
    }

    public class RssReader
    {
        public static List<RssNews> Read(string url)
        {
            var webResponse = WebRequest.Create(url).GetResponse();
            if (webResponse == null)
                return null;
            var ds = new DataSet();
            ds.ReadXml(webResponse.GetResponseStream());

            var news = (from row in ds.Tables["item"].AsEnumerable()
                        select new RssNews
                        {
                            Title = row.Field<string>("title"),
                            PublicationDate = row.Field<string>("pubDate"),
                            Description = row.Field<string>("description")
                        }).ToList();
            return news;
        }
    } 
```

我不确定我应该怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T04:47:40.683

好吧，您的代码按预期工作，因为您正在返回一个 RSSNews 项目列表，但是您以错误的方式将其分配给文本框。做`textBox1.Text = s.ToString();`会得到`System.Collections.Generic.List....`结果。

您的方法是从数据集中读取 RssNews 项目，并针对提要返回大约 23 个项目。您需要遍历这些项目并在文本框中显示其文本，或者如果您可以使用 GridView 或类似控件来显示这些结果则更好。

`Main`您可以在您的方法中尝试以下代码：

```
 var s = RssReader.Read("http://ph.news.yahoo.com/rss/philippines");
        StringBuilder sb = new StringBuilder();
        foreach (RssNews rs in s)
        {
            sb.AppendLine(rs.Title);
            sb.AppendLine(rs.PublicationDate);
            sb.AppendLine(rs.Description);
        }

        textBox1.Text = sb.ToString(); 
```

这将为 RssNews 的每个项目创建一个字符串，并将结果显示在 textBox1 中。

# java - Swing 中的 JScrollpane 中的 ScrollBar 移动不平滑

> ID：11183536
> 
> 赞同：3
> 
> 时间：2012-06-25T04:30:09.157
> 
> 标签：java, swing, jscrollpane

我有这样的情况。我有滚动窗格，其 viewportView 是 JPanel，而 JPanel 的布局为 BoxLayout。在这个面板中，我添加了一个扩展 JPanel 的类，该类包含 JComponents。

因此，在运行应用程序时，JComponents 显示在 JScrollPane 中。这就是我的 ScrollPane 的形成方式。

这里的问题是，当数据超过大约 750 行时，滚动条开始出现问题。用鼠标滚轮上下滚动时，滚动不流畅，中间突然停了又开始，说是有生涩的动作。我的问题是如何在这种情况下获得平滑的鼠标移动。

我的 scrollPane 是这样的

```
public JScrollPane getScrollPane() {
    if (scrollPane == null) {
        scrollPane = new JScrollPane();
        scrollPane.setSize(new Dimension(1000, 433));
        scrollPane.setLocation(new Point(10, 10));
        scrollPane.setColumnHeaderView(getHeaderOfRowPanel());
        scrollPane
                .setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        scrollPane.setViewportView(getScrollPanel());
        scrollPane
                .setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        scrollPane.getVerticalScrollBar().setUnitIncrement(
                unitIncrement);

    }
    return scrollPane;
}

private JPanel getScrollPanel() {
    if (scrollPanel == null) {
        scrollPanel = new JPanel();
        scrollPanel.setBorder(null);
        scrollPanel.setLayout(new BoxLayout(getScrollPanel(),
                BoxLayout.Y_AXIS));
    }
    return scrollPanel;
}

private class RowPanel extends JPanel {
//My components are here ..
//I add this Panel in scrollPanel
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T04:59:30.747

看看[JScrollBar.setUnitIncrement](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollBar.html#unitIncrement)，因为其中的一堆`JPanels`有`JScollPane`un_natural 滚动比较`JList`，`JTable`或者`JTextArea`

例子

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class JScrollBarUnitIncrement {

    public static void main(String[] args) {
        final JFrame f = new JFrame("");
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(2000, 1));
        for (int i = 0; i != 2000; i++) {
            JButton btn = new JButton("Button 2");
            panel.add(btn);
        }
        final JScrollPane sPane = new JScrollPane(panel);
        final int increment = 50;
        sPane.getVerticalScrollBar().setUnitIncrement(increment);
        KeyStroke kUp = KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0);
        KeyStroke kDown = KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0);
        sPane.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(kUp, "actionWhenKeyUp");
        sPane.getActionMap().put("actionWhenKeyUp", new AbstractAction("keyUpAction") {

            private static final long serialVersionUID = 1L;

            public void actionPerformed(ActionEvent e) {
                final JScrollBar bar = sPane.getVerticalScrollBar();
                int currentValue = bar.getValue();
                bar.setValue(currentValue - increment);
            }
        });
        sPane.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(kDown, "actionWhenKeyDown");
        sPane.getActionMap().put("actionWhenKeyDown", new AbstractAction("keyDownAction") {

            private static final long serialVersionUID = 1L;

            public void actionPerformed(ActionEvent e) {
                final JScrollBar bar = sPane.getVerticalScrollBar();
                int currentValue = bar.getValue();
                bar.setValue(currentValue + increment);
            }
        });
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(sPane);
        f.pack();
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                f.setVisible(true);
            }
        });
    }

    private JScrollBarUnitIncrement() {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T04:50:30.727

填充这么大的数字从来都不是一件好事。JScrollPane 中的行数。因为，可视部分仅在视口中大约 20 到 30 行，具体取决于滚动窗格的高度和 RowPanel 的高度。那么，为什么要一次填充这么大的行呢？平滑的问题是因为可能有异常（见控制台）。所以，解决这个问题，我看到了两个选项。一种是使用分页，另一种是允许用户输入一些搜索条件以过滤掉不需要的记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T16:49:19.113

正如@mKorbel 所指出的，两者都`JTable`实现`JList` [了`Scrollable`](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#scrollable)方便的滚动增量，并且它们都使用享元[模式](http://en.wikipedia.org/wiki/Flyweight_pattern)来提高[渲染](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)速度。如果您不能直接使用任一组件，您仍然可以使用这些模式。本教程包含`Scrollable`示例，[这里](https://stackoverflow.com/a/7776211/230513)`CellRendererPane`有一个示例。

# ruby - 如何在 Ruby 中使用 max_by 和 with_index？

> ID：11183537
> 
> 赞同：1
> 
> 时间：2012-06-25T04:30:17.207
> 
> 标签：ruby, max, ruby-1.9.3

```
a = %w(albatross dog horse)
a.max_by {|x| x.length }   #=> "albatross" 
```

您如何使用`max_by.with_index`获取最大值的索引（在本例中为 0）？

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T04:33:06.207

```
a.each_with_index.max_by { |x,i| x.length }.last 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T04:32:53.883

找到了：`a.each_with_index.max_by {|x, idx| x.length }`

# jquery - 如何在jquery中实现字符串格式化？

> ID：11183542
> 
> 赞同：1
> 
> 时间：2012-06-25T04:31:16.943
> 
> 标签：jquery, string-formatting

我想在将字符串分配给 jquery 中标签的文本属性之前对其进行格式化。我想要如下内容（代码在 C# 中），

```
string.Format("{0:MM/dd/yyyy}", m.hire_dt); 
```

我也在尝试格式化日期和其他字符串。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T05:11:40.170

如果您尝试格式化日期字符串，您可以尝试回答[这个](https://stackoverflow.com/a/1056730/637369)[问题](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)。它基本上建议您需要连接不同的日期组件。

如果您使用的是 jquery UI 并且您需要内置的日期时间选择器，那么[`formatDate`](http://docs.jquery.com/UI/Datepicker/formatDate)您可以在其中指定您喜欢的格式。

对于一般日期操作，最好使用[Date.js](http://www.datejs.com/)。

# android - 如何在 SQLite 中保存 pdf 文件

> ID：11183544
> 
> 赞同：4
> 
> 时间：2012-06-25T04:31:34.273
> 
> 标签：android, sqlite

在我的应用程序中，我有 pdf 文件。我想将这些 pdf 文件保存到我的数据库中。我使用 SQLite 作为我的后端。如何将这些 pdf 文件格式化为字节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T04:45:32.103

您可以简单地读取 pdf 文件的所有字节并将它们存储在 sqlite DB 的 blob 字段中，但是强烈推荐的更好的解决方案是将文件存储在内部存储中，而在您的数据库中只存储文件的路径。您还必须检查是否有足够的内存存储空间供您使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-05T06:08:03.157

1.  检查本地存储中的可用空间。
2.  保存 PDF（您可以将其保存到您的自定义文件夹以便更好地访问
3.  获取PDF的路径
4.  将路径存储在 SQLite 中

# c# - windows phone 的自动网页浏览

> ID：11183555
> 
> 赞同：0
> 
> 时间：2012-06-25T04:33:17.863
> 
> 标签：c#, windows-phone-7, automation

有一个网站（电话公司），我可以在其中获得有关当月手机传输的数据量的统计信息。要访问该信息，我需要：
* 访问网站并使用用户名和密码登录（html 表单）
* 然后在组合框中选择一个选项（html 选择）
* 最后单击显示信息的链接（html a）

我想开发一个自动完成所有这些过程的应用程序，并且只显示统计数据。
有办法在 C# 中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:57:10.150

你需要使用`System.Windows.Forms.WebBrowser`.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T05:44:56.933

请阅读[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowser_methods%28v=vs.92%29.aspx)。方法`InvokeScript(String, String[])`可能有用。尝试使用上面完整的javascript，如果网站页面包含那些“登录，html 选择，提交......”就更好了。

# android - Android：图像视图中插入的图像不会出现在现有视图上

> ID：11183556
> 
> 赞同：0
> 
> 时间：2012-06-25T04:33:36.677
> 
> 标签：android, imageview

我有一个可以在画布上绘制的应用程序。当我尝试从图库中插入图像时，我在 ImageView 中找不到插入的图像。当我降低前一个视图的可见性时，我可以看到图像。我需要将此图像作为先前视图的一部分并继续在其上绘制。以下是我的代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
   super.onActivityResult(requestCode, resultCode, data);

   if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
       Uri selectedImage = data.getData();
       String[] filePathColumn = { MediaStore.Images.Media.DATA };

       Cursor cursor = getContentResolver().query(selectedImage,
               filePathColumn, null, null, null);
       cursor.moveToFirst();

       int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
       String picturePath = cursor.getString(columnIndex);
       cursor.close();

       ImageView imageView = (ImageView) findViewById(R.id.imgView);
       imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:58:17.977

根据您在评论中给出的布局看起来 scribbleView 是 match_parent 所以它会填满屏幕并且你没有 ScrollView 所以无法看到可能在全屏 scribbleView 之后的图像所以请试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout

        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <com.tel.scribble.ScribbleView
            android:id="@+id/scribbleView"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

        <ImageView
            android:id="@+id/imgView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" >
        </ImageView>
    </LinearLayout>

</ScrollView> 
```

# android - 将图像放在可绘制文件夹中？

> ID：11183557
> 
> 赞同：1
> 
> 时间：2012-06-25T04:33:41.810
> 
> 标签：android, image

我在我的**res/drawable**文件夹中放了一张图片，但是当我清理并构建我的项目时，我收到了错误消息`R cannot be resolved`。我不明白为什么会发生这种情况，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T06:19:12.843

查看以下链接：http: [//source.android.com/source/using-eclipse.html](http://source.android.com/source/using-eclipse.html)

> 注意：Eclipse 有时喜欢在使用资源的文件顶部添加“import android.R”语句，尤其是当您要求 eclipse 对导入进行排序或以其他方式管理导入时。这将导致您的制造中断。留意这些错误的导入语句并删除它们。

删除错误的导入后，删除您的 R.java 文件并尝试再次清理和构建项目。如果问题仍然存在，请在此处发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T05:56:10.440

可能的原因：

1.  重复文件名（跨所有可绘制文件夹）。例如，是否有一个名为“h1.png”和“h1.jpg”的文件？

2.  坏文件名。只允许使用小写英文字母和数字。

3.  隐藏文件，如那些操作系统。在 windows 上，它可能是 "Thumb.db" 。要么删除它们，要么删除并禁用它们。linux 和 mac 也有这样的文件，但名称不同，通常以“.”开头。.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T06:49:03.760

可能是你正在使用 android.R.drawable.your_image

从导入中删除 android.R。使用 R.drawable.your_image

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T04:42:53.133

确保您的图像名称在**小后者**和**res/drawable**文件夹中。有关我们如何在项目中添加可绘制对象和支持的图像格式，请参阅文档[Drawable Resources](http://developer.android.com/guide/topics/resources/drawable-resource.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-02T17:58:56.913

对于**Android 工作室**：

1.  右键res，新建**图片资源**
2.  在**资产类型**上选择**操作栏和选项卡图标**
3.  选择**图片路径**
4.  在资源名称中为您的图像命名
5.  下一步->完成

**图像将保存在 /res/drawable 文件夹中！**

# android - Android：如果已选中，则单击时微调器项目不起作用

> ID：11183562
> 
> 赞同：7
> 
> 时间：2012-06-25T04:34:25.460
> 
> 标签：android, android-spinner

我有一个带有 onItemSelected 交互的 Spinner，但是 Api 规范是如何说的：

```
This callback is invoked only when the newly selected position is different from the 
previously selected position or if there was no selected item. 
```

我需要删除此限制，并且我希望在用户选择相同元素时也调用回调。怎么做？
有人做过同样的事情吗？

任何关于这个的想法都会很明显..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:56:14.023

`i want that the callback is invoked also if the user select the same element. How to do that?`

为 Spinner设置`OnItemClickListener`将引发异常，`ItemSelectedListener`如果用户单击所选/相同元素，则不会通知您使用。

我想克服这个限制的唯一方法是对 Spinner 项目使用 CustomAdapter 并 `setOnClickListener`为适配器中的每个视图实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:19:50.053

我遇到了同样的问题，并环顾四周。可能有多种方法可以使此功能正常工作，但**扩展微调器**对我有用。你可以做一些类似于我在[这里](https://stackoverflow.com/a/11227847/1854874)找到的事情。

因此，不要使用默认的 Android 微调器扩展它并向其添加一些将触发您的回调方法的代码。

我想补充一点，在 Spinner 上使用 setOnItemClickListener 将引发异常，如文档中所述：

```
A spinner does not support item click events. Calling this method will raise an exception. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-02T07:28:21.670

在这种情况下，您必须制作一个自定义微调器：试试这个

```
public class MySpinner extends Spinner{

OnItemSelectedListener listener;

public MySpinner(Context context, AttributeSet attrs)
{
    super(context, attrs);
}

@Override
public void setSelection(int position)
{
    super.setSelection(position);

    if (position == getSelectedItemPosition())
    {
        listener.onItemSelected(null, null, position, 0);
    }       
}

public void setOnItemSelectedListener(OnItemSelectedListener listener)
{
    this.listener = listener;
}
} 
```

# c# - 由于泛型类型，类名不必要地长

> ID：11183564
> 
> 赞同：3
> 
> 时间：2012-06-25T04:34:32.590
> 
> 标签：c#, generics, inheritance

所以我有一个类，里面有一个包装类，如下所示：

```
public class RandomClass<TK, TV>
{
    internal class RandomClassWrapper<TK, TV> : RandomClass<TK, TV> {}
} 
```

现在这样做的原因是，RandomClassWrapper 正在使用`new`关键字来覆盖 RandomClass 中某些方法的行为。这是因为我只希望我的库能够访问这些功能。

它还需要修改RandomClass中的一些私有变量，这也是它嵌套的原因。

但是，当我想初始化它时，我必须去

```
var rc = new RandomClass<int, int>.RandomClassWrapper<int, int>(); 
```

为什么首先`<int, int>`需要它？为什么不能这样写：

```
var rc = new RandomClass.RandomClassWrapper<int, int>(); 
```

有什么办法可以避免输入额外的`<int, int>`内容，这些内容可能会变成：`<Dictionary<string, nameofclass>, List<thisistoolong>>`

这有点夸张，但你明白我的意思。必须将这些类型放置两次是对空间的巨大浪费。

任何人都可以提出不同的方法吗？

由于这有助于稍微澄清问题，因此我将注意以下两条评论：

> 那么，您的问题是“为什么编译器不能从 RandomClass 的参数推断 RandomClassWrapper 的通用参数？ – Ed S. 3 分钟前
> 
> @EdS。这是问题的一个组成部分，是的。另一个是：由于它不能，是否有另一种方法/黑客可以清理它并避免必须输入两次通用参数。– 凯撒刚刚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T05:08:49.250

第二个类嵌套在外部泛型类中，因此不需要重新指定类型。

```
internal class RandomClassWrapper : RandomClass<TK, TV> {} 
```

应该正确编译，那么您只需要指定一组泛型，因为嵌套类会自动共享类型：

```
var rc = new RandomClass<int, int>.RandomClassWrapper(); 
```

您需要意识到的是，在底层，编译器会为每组不同的泛型类型生成新的类定义（我认为措辞不好）。这意味着

`RandomClass<int, int>`已经是一个不同的定义`RandomClass<string, string>`，因此它的内部嵌套类也已经包含在一个单独的通用定义中。

# sql - oracle 中的 RANK() 和 DENSE_RANK() 函数有什么区别？

> ID：11183572
> 
> 赞同：199
> 
> 时间：2012-06-25T04:35:25.957
> 
> 标签：sql, oracle, window-functions

`RANK()`和功能有什么区别`DENSE_RANK()`？如何在下表中找出第 n 个薪水`emptbl`？

```
DEPTNO  EMPNAME    SAL
------------------------------
10       rrr    10000.00
11       nnn    20000.00
11       mmm    5000.00
12       kkk    30000.00
10       fff    40000.00
10       ddd    40000.00
10       bbb    50000.00
10       ccc    50000.00 
```

如果表中有数据`nulls`，如果我想查出`nth`工资会怎样？

* * *

## 回答 #1

> 赞同：306
> 
> 时间：2012-06-25T04:43:03.883

`RANK()`为您提供有序分区内的排名。平局被分配相同的排名，下一个排名被跳过。因此，如果您在 2 级有 3 个项目，则列出的下一个等级将是 5 级。

`DENSE_RANK()`再次为您提供有序分区内的排名，但排名是连续的。如果有多个项目的排名，则不会跳过排名。

至于空值，它取决于`ORDER BY`子句。这是一个简单的测试脚本，您可以使用它来看看会发生什么：

```
with q as (
select 10 deptno, 'rrr' empname, 10000.00 sal from dual union all
select 11, 'nnn', 20000.00 from dual union all
select 11, 'mmm', 5000.00 from dual union all
select 12, 'kkk', 30000 from dual union all
select 10, 'fff', 40000 from dual union all
select 10, 'ddd', 40000 from dual union all
select 10, 'bbb', 50000 from dual union all
select 10, 'xxx', null from dual union all
select 10, 'ccc', 50000 from dual)
select empname, deptno, sal
     , rank() over (partition by deptno order by sal nulls first) r
     , dense_rank() over (partition by deptno order by sal nulls first) dr1
     , dense_rank() over (partition by deptno order by sal nulls last) dr2
 from q; 

EMP     DEPTNO        SAL          R        DR1        DR2
--- ---------- ---------- ---------- ---------- ----------
xxx         10                     1          1          4
rrr         10      10000          2          2          1
fff         10      40000          3          3          2
ddd         10      40000          3          3          2
ccc         10      50000          5          4          3
bbb         10      50000          5          4          3
mmm         11       5000          1          1          1
nnn         11      20000          2          2          2
kkk         12      30000          1          1          1

9 rows selected. 
```

[这是](http://www.oracle-base.com/articles/misc/rank-dense-rank-first-last-analytic-functions.php)一个很好的解释和一些例子的链接。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2014-02-27T21:40:53.290

[这篇文章在这里很好地解释了它。](http://blog.jooq.org/2013/10/09/sql-trick-row_number-is-to-select-what-dense_rank-is-to-select-distinct/)本质上，您可以这样看待它：

```
CREATE TABLE t AS
SELECT 'a' v FROM dual UNION ALL
SELECT 'a'   FROM dual UNION ALL
SELECT 'a'   FROM dual UNION ALL
SELECT 'b'   FROM dual UNION ALL
SELECT 'c'   FROM dual UNION ALL
SELECT 'c'   FROM dual UNION ALL
SELECT 'd'   FROM dual UNION ALL
SELECT 'e'   FROM dual;

SELECT
  v,
  ROW_NUMBER() OVER (ORDER BY v) row_number,
  RANK()       OVER (ORDER BY v) rank,
  DENSE_RANK() OVER (ORDER BY v) dense_rank
FROM t
ORDER BY v; 
```

以上将产生：

```
+---+------------+------+------------+
| V | ROW_NUMBER | RANK | DENSE_RANK |
+---+------------+------+------------+
| a |          1 |    1 |          1 |
| a |          2 |    1 |          1 |
| a |          3 |    1 |          1 |
| b |          4 |    4 |          2 |
| c |          5 |    5 |          3 |
| c |          6 |    5 |          3 |
| d |          7 |    7 |          4 |
| e |          8 |    8 |          5 |
+---+------------+------+------------+ 
```

用言语

*   `ROW_NUMBER()`为每一行赋予一个唯一的值
*   `RANK()`将相同的行号赋予相同的值，留下“漏洞”
*   `DENSE_RANK()`将相同的行号赋予相同的值，不留“漏洞”

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-08-05T05:28:36.263

**rank()**：用于对一组行中的记录进行排名。

**dense_rank()**： DENSE_RANK 函数的作用类似于 RANK 函数，只是它分配连续的等级。

询问 -

```
select 
    ENAME,SAL,RANK() over (order by SAL) RANK
from 
    EMP; 
```

输出 -

```
+--------+------+------+
| ENAME  | SAL  | RANK |
+--------+------+------+
| SMITH  |  800 |    1 |
| JAMES  |  950 |    2 |
| ADAMS  | 1100 |    3 |
| MARTIN | 1250 |    4 |
| WARD   | 1250 |    4 |
| TURNER | 1500 |    6 |
+--------+------+------+ 
```

询问 -

```
select 
    ENAME,SAL,dense_rank() over (order by SAL) DEN_RANK
from 
    EMP; 
```

输出 -

```
+--------+------+-----------+
| ENAME  | SAL  |  DEN_RANK |
+--------+------+-----------+
| SMITH  |  800 |         1 |
| JAMES  |  950 |         2 |
| ADAMS  | 1100 |         3 |
| MARTIN | 1250 |         4 |
| WARD   | 1250 |         4 |
| TURNER | 1500 |         5 |
+--------+------+-----------+ 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-12-10T10:35:05.897

```
SELECT empno,
       deptno,
       sal,
       RANK() OVER (PARTITION BY deptno ORDER BY sal) "rank"
FROM   emp;

     EMPNO     DEPTNO        SAL       rank
---------- ---------- ---------- ----------
      7934         10       1300          1
      7782         10       2450          2
      7839         10       5000          3
      7369         20        800          1
      7876         20       1100          2
      7566         20       2975          3
      7788         20       3000          4
      7902         20       3000          4
      7900         30        950          1
      7654         30       1250          2
      7521         30       1250          2
      7844         30       1500          4
      7499         30       1600          5
      7698         30       2850          6

SELECT empno,
       deptno,
       sal,
       DENSE_RANK() OVER (PARTITION BY deptno ORDER BY sal) "rank"
FROM   emp;

     EMPNO     DEPTNO        SAL       rank
---------- ---------- ---------- ----------
      7934         10       1300          1
      7782         10       2450          2
      7839         10       5000          3
      7369         20        800          1
      7876         20       1100          2
      7566         20       2975          3
      7788         20       3000          4
      7902         20       3000          4
      7900         30        950          1
      7654         30       1250          2
      7521         30       1250          2
      7844         30       1500          3
      7499         30       1600          4
      7698         30       2850          5 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-07-05T12:41:57.350

```
select empno
       ,salary
       ,row_number() over(order by salary desc) as Serial
       ,Rank() over(order by salary desc) as rank
       ,dense_rank() over(order by salary desc) as denseRank
from emp ; 
```

`Row_number()`-> 用于生成序列号

`Dense_rank()`将给出连续排名，但`Rank()`在排名冲突的情况下将跳过排名。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-29T07:34:30.227

RANK() 和 DENSE_RANK() 函数之间的唯一区别在于存在“平局”的情况；即，在一组中的多个值具有相同排名的情况下。在这种情况下，RANK() 将为集合中的值分配不连续的“排名”（导致出现平局时整数排名值之间的差距），而 DENSE_RANK() 将为集合中的值分配连续的排名设置（因此在平局的情况下整数排名值之间不会有差距）。

例如，考虑集合 {25, 25, 50, 75, 75, 100}。对于这样的集合，RANK() 将返回 {1, 1, 3, 4, 4, 6}（注意值 2 和 5 被跳过），而 DENSE_RANK() 将返回 {1,1,2,3, 3,4}。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-20T08:42:36.977

Rank() SQL 函数在有序值集中生成数据的排名，但前一个排名之后的下一个排名是该特定行的 row_number。另一方面，Dense_Rank() SQL 函数生成下一个数字而不是生成 row_number。下面是阐明概念的 SQL 示例：

```
Select ROW_NUMBER() over (order by Salary) as RowNum, Salary, 
RANK() over (order by Salary) as Rnk, 
DENSE_RANK() over (order by Salary) as DenseRnk from (
Select 1000 as Salary union all
Select 1000 as Salary union all
Select 1000 as Salary union all
Select 2000 as Salary union all
Select 3000 as Salary union all
Select 3000 as Salary union all
Select 8000 as Salary union all
Select 9000 as Salary) A 
```

它将生成以下输出：

```
----------------------------
RowNum  Salary  Rnk DenseRnk
----------------------------
1       1000    1   1
2       1000    1   1
3       1000    1   1
4       2000    4   2
5       3000    5   3
6       3000    5   3
7       8000    7   4
8       9000    8   5 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-18T20:40:35.687

`Rank(), Dense_rank(), row_number()` 这些都是窗口函数，这意味着它们首先充当一些有序输入集的窗口。这些窗口根据要求附加了不同的功能。继承人以上 3 ：

`row_number()`

首先，`row_number()`这构成了这些相关窗口函数的基础。`row_number()`顾名思义，它为应用它的行集提供了一个唯一的编号。类似于给每一行一个序列号。

`Rank()`

`row_number()`可以说是一种颠覆`rank()`。`row_number()`Rank() 用于为那些重复的有序集合行提供相同的序列号，但对于重复 rank() 之后的所有行，它仍然保持与 a 相似的计数，如下所示。对于数据 2 row_number() =rank() 意味着两者只是在重复的形式上有所不同。

```
Data row_number() rank() dense_rank() 
    1         1                    1       1
    1         2                    1       1
    1         3                    1       1
    2         4                    4       2 
```

最后，

Dense_rank() 是 rank() 的扩展版本，顾名思义，它是密集的，因为从上面的示例中可以看到，所有数据 1 的 rank() = dense_rank() 但只是对于数据 2，它的形式不同维护前一个 rank() 的 rank() 顺序，而不是实际数据

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-02T13:55:50.943

Rank and Dense rank 给出分区数据集中的排名。

Rank() ：它不会给你连续的整数。

Dense_rank() ：它给你连续的整数。

[![在此处输入图像描述](../Images/56862888b7dd6e792aba5c0ce3fa1d6d.png)](https://i.stack.imgur.com/fbv8Z.png)

在上图中，考虑 row_number 时，10008 zip 的排名是 2，dense_rank() 函数和 rank() 函数的 24。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-23T14:43:23.917

RANK() 和 DENSE_RANK() 函数之间的唯一区别在于存在“平局”的情况；即，在一组中的多个值具有相同排名的情况下。在这种情况下，RANK() 将为集合中的值分配不连续的“排名”（导致出现平局时整数排名值之间的差距），而 DENSE_RANK() 将为集合中的值分配连续的排名设置（因此在平局的情况下整数排名值之间不会有差距）。

例如，考虑集合 {30, 30, 50, 75, 75, 100}。对于这样的集合，RANK() 将返回 {1, 1, 3, 4, 4, 6}（注意值 2 和 5 被跳过），而 DENSE_RANK() 将返回 {1,1,2,3, 3,4}。

# php - 使用安装在不同驱动器中的 php 执行 bat 文件

> ID：11183577
> 
> 赞同：1
> 
> 时间：2012-06-25T04:36:30.327
> 
> 标签：php, batch-file, windows-xp, exec, drive

`exec('C:\execute\batfile.bat');`当我在 C 中安装我的 xampp时运行它时：

但是当我在另一台服务器中移动我的代码时，那里的 xampp 安装在 D 中：

所以我的代码`exec('D:\execute\batfile.bat');`失败并且在我在浏览器中测试时没有显示任何错误。

请帮助了解如何运行未保存在 C 中的 bat 文件：

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:53:12.797

感谢您的建议和解决方案:)

我按照@preet sangha 的建议，发现“错误：参数不正确”。

然后我更多地研究了参数不正确的原因。[然后我在http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)中偶然发现了 laluca 和 ernestokarim 的 juan 的答案。我遵循 ernestokarim 的回答

> 开始 > 运行 > “services.msc”
> 
> 搜索 Apache 服务，右键单击并选择属性。
> 
> 您将看到两个单选按钮，如果不是，请选中第一个，然后也选中下面的复选框。 ![在登录选项卡下](../Images/8400214842f91d61448eb0b35a512b8e.png)
> 
> 现在重新启动 Apache

我意识到，由于某种原因，当 xampp 安装在 C 中时，函数 exec 工作正常，但是当您将它安装在其他驱动器中时，它并不是因为某些权限问题。上述步骤解决了我的困境:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:42:17.113

尝试回显输出，也许您只是错过了 bat 文件中的某些内容，这不是 php 问题

```
echo system("D:\execute\batfile.bat"); 
```

# ipad - iOS中城市名称的反向地理编码问题

> ID：11183580
> 
> 赞同：0
> 
> 时间：2012-06-25T04:36:52.383
> 
> 标签：ipad, reverse-geocoding, cllocation, clgeocoder

我可以使用在我的 iPad 应用程序中检索当前位置，

```
CLLocation *location = [[CLLocation alloc] initWithLatitude:[latitude floatValue]   longitude:[longitude floatValue]];
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];

    [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error)
     {

         NSLog(@"-----------------Placemark is %@-----------------", placemarks);

          locationLabel.text = placemarks;

     }]; 
```

输出是，

```
-----------------Placemark is ("South Atlantic Ocean, South Atlantic Ocean @<-42.60533670,-21.93128480> +/- 100.00m,    region (identifier <-41.51023865,-31.60774370> radius 4954476.31) <-41.51023865,-31.60774370> radius 4954476.31m"
)----------------- 
```

我可以使用相同的信息来获取城市和国家名称吗？而不是一长串信息？

此外，'locationLabel.text = placemarks' 给出警告，“从 'NSArray*_strong' 分配给 'NSString*' 的指针类型不兼容，我无法解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T01:00:11.823

您可以获得以下所有地点的详细信息

```
 placeNameLabel.text     = [placemarks[0] name];
        addressNumberLabel.text = [placemarks[0] subThoroughfare];
        addressLabel.text       = [placemarks[0] thoroughfare];
        neighborhoodLabel.text  = [placemarks[0] subLocality];
        cityLabel.text          = [placemarks[0] locality];
        countyLabel.text        = [placemarks[0] subAdministrativeArea];
        stateLabel.text         = [placemarks[0] administrativeArea];
        zipCodeLabel.text       = [placemarks[0] postalCode];
        countryLabel.text       = [placemarks[0] country];
        countryCodeLabel.text   = [placemarks[0] ISOcountryCode];
        inlandWaterLabel.text   = [placemarks[0] inlandWater];
        oceanLabel.text         = [placemarks[0] ocean]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T05:03:41.493

是的你可以。
但是你做的有点不对。首先，`placemarks`是一个数组而不是一个字符串。这就是为什么`locationLabel.text = placemarks`发出警告。

`Placemarks`是一个[CLPlacemarks](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLPlacemark_class/Reference/Reference.html)数组。这是因为地理编码器可以为一个坐标返回多个结果。在最简单的情况下，其中的第一项应该没问题。

A`CLPlacemark`具有`addressDictionary`包含该位置数据的属性。[您可以使用ABPerson](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/doc/uid/TP40007210-CH991-SW26)头文件 定义的地址属性常量访问此数据。

例如：

从数组中获取第一个地标：

```
CLPlacemark *place = [placemarks objectAtIndex:0]; 
```

然后从这个地标获取城市：

```
NSString *cityName = [place objectForKey: kABPersonAddressCityKey]; 
```

不要忘记导入 AVPerson 标头！

# java - GridBagLayout 中的 JComboBox 宽度问题

> ID：11183587
> 
> 赞同：4
> 
> 时间：2012-06-25T04:38:35.953
> 
> 标签：java, swing, jcombobox, gridbaglayout

当我将 JComboBox 放入带有 GridBagLayout 的 JPanel 时，我发现最长的 JComboBox 项目不会完全显示，而是显示部分带有 '...'

例如，它为“保健成分”显示“保健成分...”。

请看这里的截图：

![JComboBox 宽度问题](../Images/54b5b68b96168edaaa1e8ec9857dc0b2.png)

代码是这样的：

```
JPanel infoPanel = JPanel(new GridBagLayout());            
dataTypeCB = new JComboBox(dataTypeList.toArray());
infoPanel.add(dataTypeCB, new GridBagConstraints(1, 1, 1, 1, 1, 0, GridBagConstraints.NORTHWEST, GridBagConstraints.NONE, new Insets(5,5,5,5), 0, 0)); 
```

我已经找到了两个解决方案：

1.  覆盖JComboBox的getPreferenceSize，不过有点烦人。
2.  用 JPanel 包装 JComboBox，如下所示，但是扭曲的 JPanel 引入了一些意图并导致对齐问题，仍然不完美：

第二种解决方案的代码：

```
dataTypeCB = new JComboBox(dataTypeList.toArray());
JPanel dataTypeCBPanel = new JPanel();//make item can be fully show up.
dataTypeCBPanel.add(dataTypeCB, BorderLayout.CENTER);
infoPanel.add(dataTypeCBPanel, new GridBagConstraints(1, 1, 1, 1, 1, 0, GridBagConstraints.NORTHWEST, GridBagConstraints.NONE, new Insets(5,5,5,5), 0, 0)); 
```

我的问题是：还有其他简单的方法可以解决这个问题吗？

环境：windows 7 with JDK 1.6_25(64bit version)

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T04:50:52.010

看看[JComboBox.setPrototypeDisplayValue()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#setPrototypeDisplayValue%28E%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:57:55.707

自己解决这个问题。

我得到这个的原因是因为我使用了一个名为“JIDE”的库，它将它的 LookAndFeel 带入了我的应用程序。

我在JDK的默认外观上测试过，他们看起来没有这个问题。然后我切换到 JIDE 的外观和感觉，然后我可以重现这个问题。

所以我认为这个问题与 LookAndFeel 有关。ComboBoxUI 类。

所以我真正需要做的是编写自己的 ComboBoxUI 或扩展 JIDE 库中的 UI 类。

抱歉没有提供足够的信息，当我问问题时，我没有意识到它与 LookAndFeel 有关。

谢谢

# objective-c - 尝试添加核心位置时出现未知问题

> ID：11183588
> 
> 赞同：0
> 
> 时间：2012-06-25T04:38:51.463
> 
> 标签：objective-c, view, crash, core-location, cgaffinetransform

我正在开发一个应用程序，其中我有一个 UIView 的子类，其中包含七个子视图，它们的方向排列成一个 7 面的形状。这些子视图中的每一个在它们前面都有额外的子视图，它们的方向与主视图相同。

到目前为止还好。然后我尝试添加一些代码来利用核心位置服务。[我使用了本教程](http://www.iphonedevsdk.com/forum/iphone-sdk-development/42992-how-do-i-make-compass.html)中概述的基本程序。使用那里显示的代码，我成功地将标题显示在调试器窗口中。

下一步是将它绑定到我的应用程序中。为了确保我走在正确的轨道上，我只是添加了以下代码：

```
 float radianHeading = newHeading.trueHeading * M_PI / 180;
   CGAffineTransform transformTrollCalendar = CGAffineTransformMakeRotation(radianHeading);
   [self setTransform:transformTrollCalendar]; 
```

有两个问题。首先是视图没有明显旋转。我为此做好了准备，因为我可能必须触发一些东西来重绘视图。但是，我遇到了另一个让我担心的问题。

当我从指南针获得大量更新时，我的 Mac 和我的 iPad 之间的连接会丢失，停止按钮变灰就证明了这一点。片刻之后，iPad 会发出您将电缆连接到 Mac 或电源时所听到的声音。然后我得到了你第一次打开 iPad 时得到的滑块。我认为这意味着我做错了什么。但是，该应用程序似乎仍在 iPad 上运行，并且没有生成任何崩溃日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:31:07.550

我解决了我自己的问题。显然，问题是我将代码放入错误的方法的结果。我不记得我将代码放入了哪个错误的方法，但是当我将它放入正确的方法时，它工作得很好。

我会尽快更新它，当它仍然在我脑海中时，但我在此期间去过危地马拉，这导致我对这个问题的记忆消失了。

# asp.net - 返回几个数组作为 Json 结果，如何序列化服务器上 的响应？

> ID：11183590
> 
> 赞同：0
> 
> 时间：2012-06-25T04:39:05.920
> 
> 标签：asp.net, ajax, json, asp.net-mvc-3, jquery

当下面的 Action 方法尝试返回 Json 结果时，没有数据对象返回到 $.ajax 函数。因此，我假设我没有在将数组作为 Json 结果发送之前对它们进行序列化。我需要保留数组名称，即：ProgTypes、Ages 等。所以当数据从服务器返回时，我知道哪个数组是哪个数组。

```
 $.ajax({
            url: '/Education/FilterLists',
            dataType: 'json',
            data: { svalues: svalues, firsttype: $firsttype },
            traditional: true,
            success: function (data) {

              //do something with data

                alert('done');
            }
        }); 
```

..

```
 public JsonResult FilterLists(int[] svalues, string firsttype)
        {

 //Some logic takes place and below arrays are produced

            int[] ProgTypes = programs.Select(x => x.FilterValToCatMaps.FirstOrDefault(c => c.FilterValue.FilterID == 5).FilterValueID).Distinct().ToArray();

            int[] Ages = programs.Select(x => x.FilterValToCatMaps.FirstOrDefault(c => c.FilterValue.FilterID == 4).FilterValueID).Distinct().ToArray();

            int[] Countries = programs.Select(x => x.ParentCategory.ParentCategory.ParentCategory.CatID).Distinct().ToArray();

            return Json(new { progtypes = ProgTypes, ages = Ages, countries = Countries});

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:33:10.743

您正在尝试通过 GET 请求检索 JSON 数据（jQuery AJAX 隐式执行 GET，除非您指定“类型：'POST'”选项“）。出于安全原因，ASP.NET 阻止 JSON 返回 GET，但以下消息除外：

“此请求已被阻止，因为在 GET 请求中使用敏感信息可能会泄露给第三方网站。要允许 GET 请求，请将 JsonRequestBehavior 设置为 AllowGet。”

您的成功函数永远不会被执行，因为请求不成功。如果您要进行任何 Web 开发（尤其是 AJAX），我建议您为 FireFox 获取 FireBug 并使用“网络”选项卡或使用内置调试器的 chrome 并使用“网络”选项卡。网络错误会在那里弹出，它可以为您节省**大量**时间。

此时您有两个选择，更改您的 .NET 代码或更改您的 JavaScript，请在​​下面选择一个：

```
$.ajax({
    url: '/Education/FilterLists',
    dataType: 'json',
    type: 'POST', //ADD POST HERE
    data: { svalues: svalues, firsttype: $firsttype },
    traditional: true,
    success: function (data) {

      //do something with data

        alert('done');
    }
}); 
```

或者

```
return Json(new { progtypes = ProgTypes, ages = Ages, countries = Countries}, JsonRequestBehavior.AllowGet); 
```

# security - Actionscript 3.0 禁用 navigateToURL

> ID：11183591
> 
> 赞同：1
> 
> 时间：2012-06-25T04:39:07.080
> 
> 标签：security, actionscript

我玩的一款允许用户上传内容的网页游戏在人们使用 navigateToURL 功能将玩家发送到随机网站时遇到了很多问题。我很好奇是否有一种方法可以使用 Actionscript 2 或 3 禁用此功能。我已经看到了一种使用 HTML 嵌入的方法，但我没有对该网站的管理访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:29:00.957

在做了更多研究之后，我得出了一个可靠的答案：您应该在服务器端使用 PHP 和名为 swfdump 的可执行文件的组合来验证用户上传的内容。

swfdump 是一个 exe 文件，位于 Flex SDK 的 bin 文件夹中。您可以使用 exec 从 PHP 运行它。它将读取 swf 的字节码并生成报告。从中您可以轻松找到哪些文件包含 navigateToURL() 并拒绝这些文件。

我使用 swfdump -abc -out myfilereport.swfx myfile.swf 测试了我自己的文件，在该输出中我发现了这个：

```
 findpropstrict  flash.net:navigateToURL
        findpropstrict  flash.net:URLRequest
        pushstring      "http://www.plasticsturgeon.com"
        constructprop   flash.net:URLRequest (1)
        callproperty    flash.net:navigateToURL (1) 
```

我使用的网址是“http://www.plasticsturgeon.com”。但是删除任何包含 flash.net.navigateToURL 的 swf 会容易得多。一旦您确定 tha 存在，您就可以向最终用户生成错误通知。

因此，使用此方法，您可以找到并拒绝任何使用导航到 URL 的 swf。您甚至可以创建一个批处理来运行和使任何存在此问题的断言无效。

有关使用字节码的更多信息： [http ://code.google.com/p/redtamarin/wiki/ABC](http://code.google.com/p/redtamarin/wiki/ABC)

关于反编译 ASbytecode： [http ://dougmccune.com/flex/FOTB_Decompiling_Doug_McCune.pdf](http://dougmccune.com/flex/FOTB_Decompiling_Doug_McCune.pdf)

# database-migration - Entity Framework 5 - 从实体迁移和创建表

> ID：11183595
> 
> 赞同：3
> 
> 时间：2012-06-25T04:39:49.747
> 
> 标签：database-migration, entity-framework-5

我正在使用 Entity Framework 5 RC，并且我有一些代码需要数据库上的特定表。该实体已使用 Code-First 创建。

a）如果尚未在数据库中创建表，是否有办法告诉 EF 创建表？如果是的话..怎么样？b）另外..如果表已经存在，它可以处理实体更改，例如向实体添加属性..它会反映在数据库上吗？（我们这里仍然使用代码优先的方法）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T08:55:02.577

使用代码优先迁移（[自动](http://msdn.com/data/jj554735)或[基于代码](http://msdn.com/data/jj591621)）。如果要将表添加到现有数据库，请先创建[初始迁移](http://www.ladislavmrnka.com/2012/03/ef-4-3-migrations-and-existing-database/)，然后添加新实体。所有链接都适用于 EF 4.3，但在 EF 5 中的用法完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T18:13:42.837

作为其他有此问题的人的参考，我遇到了同样的问题，我的解决方案在这里 [Entity Framework: Generate specific table if doesn't exist?](https://stackoverflow.com/questions/14539055/entity-framework-generating-specific-table-if-doesnt-exist/18856893#18856893)

# c - c99 语义中的存储类说明符“注册”

> ID：11183598
> 
> 赞同：0
> 
> 时间：2012-06-25T04:40:57.933
> 
> 标签：c, c99

我是读C99的老外，而一句话（在6.7.1中）让我很困惑：

*   '（使用存储类说明符寄存器声明对象的标识符建议尽可能快地访问对象。）**这些建议的有效程度是实现定义的。**'

我应该如何解析第二句话：

*   **这些建议的有效**程度是由实现定义的。
*   **这些建议的有效**程度是由实现定义的。

哪一个更好？

这是否意味着实现具有决定如何处理*register*的全部权力，即使终止翻译？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:57:01.557

不要将`register`变量与 CPU 的寄存器混为一谈。这些不一样。

`register`目的是允许优化。禁止获取此类变量的地址，因此此类变量永远不能别名，编译器始终掌握其最新值。因此，它可以很容易地实现这样的变量，例如 CPU 寄存器或汇编程序立即数。

作为一个特定的子案例，有一些`const`限定`register`变量不能被程序直接改变，也不能被其他通过指针访问的代码在幕后改变。只有这样的变量可以很容易地保证在整个程序执行过程中保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:45:29.867

不——建议的有效程度是由实现定义的，但代码的整体效果不是。

稍微不同的是，当/如果您放入`register`代码中（在允许的情况下），编译器可以完全忽略它——我觉得有义务补充一点，几乎所有合理的现代编译器*都会*.

尽管如此，仅仅存在`register`不会阻止代码编译，除非您尝试将它应用到不允许的地方（例如，应用到全局变量）。

底线：不要使用它，但也不要担心从已经拥有它的代码中删除它。这是浪费时间和精力，但是对于相当现代的编译器来说，这是一个完全无害的编译器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:43:23.110

注册是一个古老的关键字。基本上它是对优化器的一个提示，告诉它最好使用寄存器来存储这个变量。您提到的短语意味着编译器可以以任何它想要的方式处理这个提示。在我们优化编译器的时代，99% 的意义和价值毫无意义。

# c# - 富文本框如何突出显示文本块

> ID：11183599
> 
> 赞同：5
> 
> 时间：2012-06-25T04:41:12.833
> 
> 标签：c#, .net, winforms, richtextbox

我需要在 RTB 中突出显示我的文本的特定部分，而不是在更改字体样式/颜色的意义上，而是在使用特定颜色进行块选择的意义上。这类似于 Visual Studio 在调试模式下突出显示一行的方式。

我如何使用 RTB 完成此功能，或者更确切地说，它甚至可能吗？如果不可能，我想听听另一种执行上述任务的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T04:55:15.210

[是的，您可以使用RichTextBox.SelectionBackColor](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionbackcolor)属性设置 RichTextBox 选择的背景颜色。

```
int blockStart = 1; //arbitrary numbers to test
int blockLength = 15;
richTextBox1.SelectionStart = blockStart;
richTextBox1.SelectionLength = blockLength;
richTextBox1.SelectionBackColor = Color.Yellow; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-25T04:46:24.973

我认为您正在寻找[ScintillaNET](http://scintillanet.codeplex.com/)。

另一方面，如果您想在 RTB 中自己执行此操作，则可以通过首先找到`lineNumber`using [TextBoxBase.Lines](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.lines.aspx)属性来执行此操作。然后 ...

```
//Select the line from it's number
startIndex = richTextBox.GetFirstCharIndexFromLine(lineNumber);
richTextBox.Select(startIndex, length);

//Set the selected text fore and background color
richTextBox.SelectionColor = System.Drawing.Color.White;
richTextBox.SelectionBackColor= System.Drawing.Color.Blue; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-26T12:45:37.337

在这里，我创建了 CustomRichTextBox 来实现这一点。

这里解释了一个很长的场景的源代码。如果你有兴趣，那么你可以直接重用这个用户控件，而不用担心太多

设想

[https://sites.google.com/site/greateindiaclub/mobil-apps/windows8/customwpfrichtextboxwithcolorchangeandhighlightfunctionality](https://sites.google.com/site/greateindiaclub/mobil-apps/windows8/customwpfrichtextboxwithcolorchangeandhighlightfunctionality)

源代码：

[https://github.com/boobalaninfo/CustomRichTextBoxWithHighligh](https://github.com/boobalaninfo/CustomRichTextBoxWithHighligh)

# c# - 发送仅包含更复杂结构的一部分的数组集合的通用方法

> ID：11183605
> 
> 赞同：0
> 
> 时间：2012-06-25T04:42:39.420
> 
> 标签：c#, arrays, generics

让我们说一个这样的程序：

```
class MyClass
{
    public int Numbers;
    public char Letters;
}
class Program
{
    static void Main()
    {
        var mc = new MyClass[5];
        for (var i = 0; i < 5; i++)
        {
            mc[i].Numbers = i + 1;
            mc[i].Letters = (char) (i + 65);
        }
    }
} 
```

现在，让我们假设一个“X”方法需要包含在 object 中的所有数字`mc`，在一个单独的数组中，作为参数发送。

我的第一个想法是一个for，一个新的整数数组，并一个一个地复制到其各自的位置。但是，如果`MyClass`不同了，现在它有字符串和浮点数，我想拉出字符串，现在 for 必须在其内部完全重新定义，以便为另一个“X”方法创建所需的数组。

我知道 Linq 有很大帮助的情况，例如 Sum、Average、Count 和其他数字函数的泛型，当然，它与 lambda 表达式结合使用。

我想知道是否存在类似的东西`MyClass`以更快的通用方式制作上述数组（当然还有其他数组）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:22:46.860

如果要使用 LINQ，可以执行以下操作：

```
int [] numbers = mc.Select<MyClass, int>(m => mc.Number).ToArray(); 
```

为了使其更通用，它会变得更复杂一些，您可能需要反射或动态对象。反射的一个简单示例是：

```
 private TValue[] ExtractFields<TClass, TValue>(TClass[] classObjs, string fieldName)
    {
        FieldInfo fInfo = typeof(TClass).GetField(fieldName, BindingFlags.Public | BindingFlags.Instance);
        if (fInfo != null && fInfo.FieldType.Equals(typeof(TValue)))
            return classObjs.Select<TClass, TValue>(c => (TValue)fInfo.GetValue(c)).ToArray();
        else
            throw new NotSupportedException("Unidentified field, or different field type"); 
    } 
```

然后就这样称呼它：

```
int [] fields = ExtractField<MyClass, int>(mc, "Number"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:55:23.670

为什么不直接使用`Dictionary<int, char>`，或者如果数据类型未知，那么简单`Dictionary<object, object>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:41:24.067

如果您的目标是生成一个与原始数组分离但包含从中复制的数据的新数组，那么您可以做的最通用的事情是定义一个方法，例如：

```
  T my_array[]; // 存放真实事物的数组
  U[] CopyAsConvertedArray<U>(Func<T,U> ConversionMethod);

```

这将允许生成一个新数组，该数组使用任何所需的方法从原始数组中提取项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T04:54:36.687

如果您使用的是 C# 4.0，那么您可以使用[动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

```
class MyClass
{
    public dynamic Numbers;
    public char Letters;
} 
```

编辑：*基于评论*

我不确定这是否是您想要的：

```
int[] arr = mc.Select(a => a.Numbers).ToArray<int>(); 
```

或不铸造

```
int[] arr = mc.Select(a => a.Numbers).ToArray(); 
```

# jquery - svg 在 Firefox 中的性能不佳

> ID：11183611
> 
> 赞同：0
> 
> 时间：2012-06-25T04:43:16.043
> 
> 标签：jquery, svg

我对 SVG 有疑问。在 Opera 中一切正常，但在 Firefox 中则冻结。
请参阅[jsFiddle](http://jsfiddle.net/EeN9c/1/)上的代码。

**jQuery代码**

```
var sessionId = 1;
        var clientId =1;
        $("g").each(function () {
            var path = $(this).children("path");
            var levelId = $(path).attr("level");
            $(this).qtip(
                {
                    content: {
                        text: 'Получаю свободные места...',
                        ajax: {
                            url: 'http://localhost:12736/PremieraInteraction.svc/GetPlacesInfoForSession',
                            data: { levelId: levelId, sessionId: sessionId, clientId: clientId },
                            dataType: 'jsonp',
                            contentType: "application/json; charset=utf-8",
                            type: "GET",
                            success: function (data) {
                                var jsonData = $.parseJSON(data);
                                if(jsonData.Success) {
                                    var content;
                                    content = "<div>Всего мест: " + jsonData.PlacesCount + "<br/>Свободно мест: " + jsonData.FreePlacesCount + "</div>";
                                    this.set('content.text', content);
                                } else {
                                    content = "<div>" + jsonData.Message + "</div>";
                                    this.set('content.text', content);
                                }
                                return false;
                            },
                            error: function(error) {
                                alert("Ошибка: " + error);
                            }
                        }
                    },
                    position: {
                        target: 'mouse',
                        adjust: {
                            x: 10

                        }
                    },
                    style: {
                        classes: 'ui-tooltip-tipsy ui-tooltip-shadow',
                        tip:true
                    }

                });
        }); 
```

**HTML**

```
<svg version="1.1" xml:space="preserve" width="660" height="" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 660 372">
 <defs>
  <style type="text/css">

  </style>
 </defs>
  <g id="_936269552">
   <path level="33" d="M113 7c-7,17 -15,35 -22,52 -21,4 -41,9 -61,14 -8,-14 -15,-28 -23,-42 35,-10 71,-18 107,-25z"/>
   <text x="54" y="45" class="fil1 fnt0"/>
  </g>
  <g id="_936265840" aria-describedby="ui-tooltip-206">
   <path level="9" d="M101 57c6,-13 11,-27 17,-40 17,-3 34,-5 51,-7 -2,13 -5,25 -7,38 -20,3 -41,6 -61,10z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="134" y="35" class="fil1 fnt0">1D</text>
  </g>
  <g id="_932878064">
   <path level="9" d="M154 106c3,-14 6,-27 9,-41 0,-2 -1,-3 -1,-5 -17,4 -38,11 -56,20 6,12 12,25 18,37 10,-4 19,-8 30,-11z" fill="#3399FF"/>
   <text x="130" y="94" class="fil1 fnt0">1D</text>
  </g>
  <g id="_932874352" aria-describedby="ui-tooltip-208">
   <path level="9" d="M213 94c7,-14 13,-27 20,-41 0,-2 0,-3 0,-5 -23,2 -42,6 -65,11 0,1 1,3 1,4 -3,14 -6,28 -9,41 18,-5 32,-8 53,-10z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="190" y="79" class="fil1 fnt0">1D</text>
  </g>
  <g id="_932870640" aria-describedby="ui-tooltip-209">
   <path level="9" d="M218 93c17,-2 34,-3 53,-3 7,-5 14,-10 21,-15 -6,-2 -13,-4 -19,-6 6,-8 12,-17 17,-25 -19,0 -35,1 -53,3 0,2 0,4 0,6 -6,13 -13,27 -19,40z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="251" y="71" class="fil1 fnt0">1D</text>
  </g>
  <g id="_932866928">
   <path level="9" d="M286 67c19,9 30,17 36,22 10,-4 20,-8 31,-12 -2,-2 -4,-4 -7,-7 10,-8 21,-15 31,-23 -21,-2 -49,-4 -74,-4 -6,8 -11,15 -17,23z" fill="#3399FF"/>
   <text x="319" y="68" class="fil1 fnt0">1D</text>
  </g>
  <g id="_932863216">
   <path level="2" d="M356 74c10,11 18,22 26,34 9,-2 17,-3 26,-5 -2,-4 -4,-7 -6,-11 20,-11 39,-21 59,-32 -23,-5 -47,-9 -71,-12 -11,8 -22,17 -34,25z" fill="#FF6347"/>
   <text x="391" y="81" class="fil1 fnt0"/>
  </g>
  <g id="_932859504">
   <path level="4" d="M410 99c4,9 7,20 9,31 7,1 14,1 21,2 -1,-3 -2,-6 -3,-9 20,-4 41,-8 61,-13 -8,-15 -16,-30 -23,-45 -22,12 -43,23 -65,35z" fill="#FF6347"/>
   <text x="448" y="104" class="fil1 fnt0"/>
  </g>
  <g id="_932855792" aria-describedby="ui-tooltip-213">
   <path level="9" d="M510 104c8,19 16,50 16,79 -23,0 -47,0 -70,0 0,-11 -3,-35 -9,-54 18,-4 37,-7 55,-11 -1,-4 -2,-8 -2,-12 3,-1 7,-1 10,-2z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="485" y="155" class="fil1 fnt0">1D</text>
  </g>
  <g id="_932852080">
   <path level="9" d="M510 265c8,-19 16,-50 16,-79 -23,0 -47,0 -70,0 0,11 -3,35 -9,54 18,4 37,7 55,11 -1,4 -2,8 -2,12 3,1 7,1 10,2z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="485" y="220" class="fil1 fnt0">1D</text>
  </g>
  <g id="_932848368" aria-describedby="ui-tooltip-215">
   <path level="9" d="M507 292c3,1 7,1 10,2 3,-4 6,-7 9,-11 20,-12 41,-23 61,-35 3,-21 7,-42 10,-62 -21,0 -41,0 -62,0 0,22 -5,63 -28,105z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="558" y="228" class="fil1 fnt0">1D</text>
  </g>
  <g id="_931857392" aria-describedby="ui-tooltip-216">
   <path level="9" d="M507 77c3,-1 7,-1 10,-2 3,4 6,7 9,11 20,12 41,23 61,35 3,21 7,42 10,62 -21,0 -41,0 -62,0 0,-22 -5,-63 -28,-105z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="557" y="146" class="fil1 fnt0">1D</text>
  </g>
  <g id="_931853680">
   <path level="9" d="M419 143c-3,-1 -6,-2 -10,-3 0,-2 0,-5 0,-7 -12,2 -23,5 -35,7 4,13 7,29 7,43 14,0 28,0 43,0 0,-12 -2,-28 -6,-40z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="397" y="163" class="fil1 fnt0">1D</text>
  </g>
  <g id="_931849968">
   <path level="9" d="M419 226c-3,1 -6,2 -10,3 0,2 0,5 0,7 -12,-2 -23,-5 -35,-7 4,-13 7,-29 7,-43 14,0 28,0 43,0 0,12 -2,28 -6,40z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="397" y="212" class="fil1 fnt0">1D</text>
  </g>
  <g id="_931846256">
   <path level="9" d="M344 126c1,1 3,3 4,4 9,2 18,5 27,7 11,-4 21,-7 32,-11 -4,-6 -8,-12 -11,-18 -5,1 -10,2 -15,3 -1,-1 -3,-3 -4,-4 -11,6 -22,13 -32,19z" fill="#3399FF"/>
   <text x="373" y="127" class="fil1 fnt0">1D</text>
  </g>
  <g id="_931842576">
   <path level="9" d="M296 116c0,1 1,1 1,2 15,2 30,4 45,6 11,-6 22,-13 32,-19 -3,-3 -6,-7 -9,-10 -9,-2 -18,-5 -27,-7 -6,4 -12,7 -19,11 0,0 -1,0 -1,0 -8,6 -15,12 -23,18z" fill="#3399FF"/>
   <text x="332" y="112" class="fil1 fnt0">1D</text>
  </g>
  <g id="_931838864" aria-describedby="ui-tooltip-221">
   <path level="9" d="M271 108c0,2 0,4 0,5 2,1 5,2 7,3 5,0 11,-1 16,-1 7,-6 15,-12 22,-18 -8,-2 -15,-5 -23,-7 -7,6 -15,12 -22,18z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="288" y="108" class="fil1 fnt0">1D</text>
  </g>
  <g id="_931835184">
   <path level="9" d="M365 137c-6,-2 -12,-3 -18,-5 -2,-2 -4,-3 -6,-5 -15,-2 -31,-4 -46,-6 -1,-1 -2,-2 -2,-3 -14,1 -27,2 -41,4 3,13 5,25 8,38 37,0 74,0 110,0 -1,-7 -3,-15 -5,-22z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="306" y="146" class="fil1 fnt0">1D</text>
  </g>
  <g id="_931831472" aria-describedby="ui-tooltip-223">
   <path level="9" d="M260 163c37,0 74,0 111,0 2,11 2,32 0,42 -37,0 -74,0 -111,0 0,-14 0,-28 0,-42z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="311" y="188" class="fil1 fnt0">1D</text>
  </g>
  <g id="_931827792" aria-describedby="ui-tooltip-224">
   <path level="9" d="M365 232c-6,2 -12,3 -18,5 -2,2 -4,3 -6,5 -15,2 -31,4 -46,6 -1,1 -2,2 -2,3 -14,-1 -27,-2 -41,-4 3,-13 5,-25 8,-38 37,0 74,0 110,0 -1,7 -3,15 -5,22z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="306" y="231" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935652064">
   <path level="9" d="M296 253c0,-1 1,-1 1,-2 15,-2 30,-4 45,-6 11,6 22,13 32,19 -3,3 -6,7 -9,10 -9,2 -18,5 -27,7 -6,-4 -12,-7 -19,-11 0,0 -1,0 -1,0 -8,-6 -15,-12 -23,-18z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="332" y="265" class="fil1 fnt0">1D</text>
  </g>
  <g id="_934799152">
   <path level="9" d="M344 243c1,-1 3,-3 4,-4 9,-2 18,-5 27,-7 11,4 21,7 32,11 -4,6 -8,12 -11,18 -5,-1 -10,-2 -15,-3 -1,1 -3,3 -4,4 -11,-6 -22,-13 -32,-19z" fill="#3399FF"/>
   <text x="372" y="250" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935831616">
   <path level="9" d="M271 261c0,-2 0,-4 0,-5 2,-1 5,-2 7,-3 5,0 11,1 16,1 7,6 15,12 22,18 -8,2 -15,5 -23,7 -7,-6 -15,-12 -22,-18z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="288" y="269" class="fil1 fnt0">1D</text>
  </g>
  <g id="_933532368">
   <path level="9" d="M154 263c3,14 6,27 9,41 0,2 -1,3 -1,5 -17,-4 -38,-11 -56,-20 6,-12 12,-25 18,-37 10,4 19,8 30,11z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="130" y="282" class="fil1 fnt0" style="dominant-baseline: middle; text-anchor: middle;">1D</text>
  </g>
  <g id="_934988576">
   <path level="9" d="M213 275c7,14 13,27 20,41 0,2 0,3 0,5 -23,-2 -42,-6 -65,-11 0,-1 1,-3 1,-4 -3,-14 -6,-28 -9,-41 18,5 32,8 53,10z" fill="#3399FF"/>
   <text x="189" y="297" class="fil1 fnt0">1D</text>
  </g>
  <g id="_934835296">
   <path level="9" d="M218 276c17,2 34,3 53,3 7,5 14,10 21,15 -6,2 -13,4 -19,6 6,8 12,17 17,25 -19,0 -35,-1 -53,-3 0,-2 0,-4 0,-6 -6,-13 -13,-27 -19,-40z" fill="#3399FF"/>
   <text x="249" y="304" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935660960">
   <path level="9" d="M286 302c19,-9 30,-17 36,-22 10,4 20,8 31,12 -2,2 -4,4 -7,7 10,8 21,15 31,23 -21,2 -49,4 -74,4 -6,-8 -11,-15 -17,-23z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="320" y="308" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935940352" aria-describedby="ui-tooltip-232">
   <path level="9" d="M356 295c10,-11 18,-22 26,-34 9,2 17,3 26,5 -2,4 -4,7 -6,11 20,11 39,21 59,32 -23,5 -47,9 -71,12 -11,-8 -22,-17 -34,-25z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="392" y="297" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935177216" aria-describedby="ui-tooltip-233">
   <path level="9" d="M410 270c4,-9 7,-20 9,-31 7,-1 14,-1 21,-2 -1,3 -2,6 -3,9 20,4 41,8 61,13 -8,15 -16,30 -23,45 -22,-12 -43,-23 -65,-35z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="448" y="272" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935905664" aria-describedby="ui-tooltip-234">
   <path level="9" d="M477 311c3,12 6,24 9,35 30,-6 60,-13 89,-21 -5,-11 -10,-22 -15,-33 -27,7 -55,14 -83,19z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="520" y="323" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935901952" aria-describedby="ui-tooltip-235">
   <path level="9" d="M652 263c0,12 0,25 0,37 -21,8 -42,14 -63,21 -5,-11 -9,-22 -14,-33 27,-8 52,-16 77,-24z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="612" y="297" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935898240" aria-describedby="ui-tooltip-236">
   <path level="9" d="M462 314c3,12 6,24 9,35 -26,4 -52,7 -77,11 -1,-12 -3,-24 -4,-36 24,-3 48,-7 73,-10z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="425" y="341" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935894528" aria-describedby="ui-tooltip-237">
   <path level="9" d="M301 330c0,12 0,24 0,36 27,0 53,-2 80,-4 -1,-12 -3,-24 -4,-36 -25,2 -51,4 -76,4z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="335" y="351" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935890816" aria-describedby="ui-tooltip-238">
   <path level="9" d="M178 360c-2,-12 -4,-25 -7,-37 40,5 79,7 119,7 0,12 0,24 0,36 -38,0 -75,-2 -112,-6z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="229" y="351" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935887104" aria-describedby="ui-tooltip-239">
   <path level="9" d="M101 312c6,13 11,27 17,40 17,3 34,5 51,7 -2,-13 -5,-25 -7,-38 -20,-3 -41,-6 -61,-10z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="134" y="340" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935883392">
   <path level="9" d="M113 362c-7,-17 -15,-35 -22,-52 -21,-4 -41,-9 -61,-14 -8,14 -15,28 -23,42 35,10 71,18 107,25z" fill="#3399FF"/>
   <text x="54" y="331" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935879680" aria-describedby="ui-tooltip-241">
   <path level="9" d="M178 9c-2,12 -4,25 -7,37 40,-5 79,-7 119,-7 0,-12 0,-24 0,-36 -38,0 -75,2 -112,6z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="230" y="26" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935875968">
   <path level="9" d="M301 39c0,-12 0,-24 0,-36 27,0 53,2 80,4 -1,12 -3,24 -4,36 -25,-2 -51,-4 -76,-4z" fill="#3399FF" width="200" style="" height="30%" stroke="rgb(0,255,255)" stroke-width="0" transform=" rotate(0,0,0)"/>
   <text x="335" y="26" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935866048">
   <path level="9" d="M462 55c3,-12 6,-24 9,-35 -26,-4 -52,-7 -77,-11 -1,12 -3,24 -4,36 24,3 48,7 73,10z" fill="#3399FF"/>
   <text x="425" y="36" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935868064">
   <path level="9" d="M477 58c3,-12 6,-24 9,-35 30,6 60,13 89,21 -5,11 -10,22 -15,33 -27,-7 -55,-14 -83,-19z" fill="#3399FF"/>
   <text x="519" y="53" class="fil1 fnt0">1D</text>
  </g>
  <g id="_935871936">
   <path level="9" d="M652 106c0,-12 0,-25 0,-37 -21,-8 -42,-14 -63,-21 -5,11 -9,22 -14,33 27,8 52,16 77,24z" fill="#3399FF"/>
   <text x="612" y="79" class="fil1 fnt0">1D</text>
  </g>
</svg> 
```

# plugins - 我想在 iPad 上使用 phonegap 打印插件

> ID：11183612
> 
> 赞同：1
> 
> 时间：2012-06-25T04:43:17.407
> 
> 标签：plugins, cordova, printing

我正在为 iPad 开发 webapp。

我想使用 Phonegap 打印插件。

但是，iPad 打印插件不起作用。（在 5.1 版上）

（iPad 4.3 版或 iPhone 5.1 版打印插件运行良好）

如何使用 Phonegap 打印插件？

# css - 页脚未修复

> ID：11183616
> 
> 赞同：3
> 
> 时间：2012-06-25T04:43:59.157
> 
> 标签：css, internet-explorer, windows-phone-7

我正在使用 Windows mobile 测试我的移动应用程序。我在页脚部分遇到了一些问题。问题与页脚修复有关。当我滚动内容时，页脚也起来了。但是页脚在所有浏览器中都是固定的，包括 IE 和除 windows 版本之外的所有手机。

查看代码，对于我给的 IE，

```
* html #footer {
   position:absolute;
   top:expression((0-(footer.offsetHeight)+(document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight)+(ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop))+'px');
} 
```

编辑：

```
html, body {height: 100%;}

#wrapper {min-height: 100%;}

#footer {
    position:fixed; z-index:999;
    width:100%;
    bottom:-20px;
    margin-top: -72px; /* negative value of footer height */
    margin-top: 0px !ie; /* for IE */
    height: 92px;
    clear:both; text-align:center;
    background:url(../../) repeat-x #115c9c;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T00:14:42.743

Windows Phone 7 – Mango 前后都忽略固定定位并将固定元素呈现为 position: static。您测试的 IE9 桌面和其他浏览器支持位置：已修复。 [http://bradfrostweb.com/blog/mobile/fixed-position/](http://bradfrostweb.com/blog/mobile/fixed-position/)

似乎不再支持表达式 [http://blogs.msdn.com/b/ie/archive/2008/10/16/ending-expressions.aspx](http://blogs.msdn.com/b/ie/archive/2008/10/16/ending-expressions.aspx)

所以我建议删除“位置：固定”并使其首先在 IE9 桌面上工作，因为在 WP7 中调试 html 没有简单的方法。看来您还必须继续使用其他 js 才能在 WP7 中获得固定页脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:33:44.597

这是修复页脚的解决方案：

HTML：

```
<div class="header">
  Website Header
</div>
<div class="content">
  <p>
    A Solution for fixing footer section on webpage. it works every where even with mobile application too.
    blah....blah...blah....blah...blah....blah.... blah....blah... ... blah....blah.... ....blah....blah ...blah....blah ....blah....blah .... blah....blah..... blah....blah... blah....blah...blah....blah..!! 
  </p>
</div>
<div class="footer">
  Fixed Footer is copyright&copy;2012
</div> 
```

CSS：

```
.header{
  width:90%;
  height:15%;
  background-color:#152087;
  font-size:20px;
  font-weight:bold;
  text-align:center;
  color:#a7a575;
  vertical-align:middle;
  padding:5px;
  margin:0px;
}
.content{
  margin:0px;
  font-size:16px;
  height:70%;
  overflow:scroll;
}
.footer{
  position:fixed;

  z-index:999;
  width:90%;
  clear:both;

  text-align:center;
  height: 50px;
  bottom:-20px;
  margin-top: -72px;
  /* value of footer height */
  margin-top: 0px !IE;
  /* for IE */
  vertical-align:middle;
  background-color:#152087;
  color:#a7a575;
  font-size:14px;

} 
```

我也测试过垃圾箱，所以点击[http://codebins.com/codes/home/4ldqpbv](http://codebins.com/codes/home/4ldqpbv)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:06:34.683

您可能想查看 Windows 移动浏览器是否支持固定定位。您可能需要编写一些 javascript 来检查页面向下滚动的距离并相应地放置页脚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:18:27.997

如果您使用的是 jquery mobile，请将其添加到您的 css

```
.ui-page .ui-footer {
   position: absolute;
   bottom: 0;
   z-index: 2;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-01T07:18:47.187

您必须更改 windows phone 8 中所有 3 种分辨率的视口宽度

以下代码适用于 HTC windows phone 8x

在您的头部部分包含元标记。

```
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1"> 
```

在您的头部部分包含以下样式

```
<style>
    @media screen and (min-width: 640px) and (max-width: 1024px) and (orientation:portrait) {
        @-ms-viewport { width: 50%; }        
    }
</style 
```

您需要为适用于 windows phone 8 的所有 3 种分辨率编写此内容。您可能必须为更高 DPI 手机减小宽度，为更低 DPI 手机增加宽度。

诺基亚 lumia 920 的视口宽度约为 70-80%，诺基亚 Lumia 820 的视口宽度约为 85-95%。但是您需要找出这两款手机的最小宽度和最大宽度。

# php - 编写 SQL 查询来过滤和返回大量表中的数据（多对多、一对多）

> ID：11183621
> 
> 赞同：0
> 
> 时间：2012-06-25T04:45:04.523
> 
> 标签：php, mysql, sql

我正在构建在新网站上过滤结果的功能。每个结果都包含来自三个单独表格的数据（如下所示的 A、B 和 C）。映射表（D 到 K）包含我的大多数过滤器所基于的数据。

我希望返回包含 A.id、A.name、B.rating、C.price 列的行，其中 DK 包含 B 上的某些数据。我拥有的过滤器内容是映射表中的一系列 ID。在返回一个 A、B、C 关系之前，我可以有最少的过滤器，也可以有多达 20 个我必须检查的 ID。此外，每页只能显示 12 个结果。

光是想着上面的就炸我的脑袋。我已经在下面尽可能地画出了表格的结构。您能提供的任何帮助将不胜感激。谢谢！

![数据库设计](../Images/067f4164d7782bb53ab6a3143b9df5a3.png) .

**架构信息** *编辑*

`A: id INT PRIMARY, name VARCHAR(255)`

`B: id INT PRIMARY, a_id INT, rating FLOAT`

`C: id INT PRIMARY, b_id INT, price DECIMAL(10, 2)`

映射表`D-K: b_id INT, ?_id INT`

`D-K: id INT PRIMARY, name VARCHAR(255)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:19:25.267

听起来你想做一些`JOIN`s。

```
SELECT A.name, B.rating, C.price
FROM A
JOIN B ON A.id = B.a_id
JOIN C ON B.id = C.b_id 
```

然后，要从其他表中进行过滤，您也可以将它们加入：

```
SELECT A.name, B.rating, C.price
FROM A
JOIN B ON A.id = B.a_id
JOIN C ON B.id = C.b_id
JOIN BDmapping ON B.id = BDmapping.b_id
JOIN BEmapping on B.id = BEmapping.b_id
WHERE BDmapping.d_id = <some value>
AND BEmapping.e_id = <some value> 
```

理想情况下，您只想加入实际需要用于任何给定查询的表 - 如果您没有过滤给定字段，请不要加入其表。

# mysql - 在 MySQL 中，我如何进行日期查询？

> ID：11183632
> 
> 赞同：0
> 
> 时间：2012-06-25T04:47:11.417
> 
> 标签：mysql, database

我想要做`SELECT count(*) FROM users where created_at within 3 days ago`

Created_at 是日期时间列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:49:31.057

用于三天前的日期：

```
WHERE t.date >= DATE_ADD(CURDATE(), INTERVAL -3 DAY); 
```

检查[DATE_ADD](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)文档。

或者您可以使用：

```
WHERE t.date >= ( CURDATE() - INTERVAL 3 DAY ) 
```

# image-processing - 两张带有相机位置和角度到 3d 数据的图像？

> ID：11183633
> 
> 赞同：1
> 
> 时间：2012-06-25T04:47:29.467
> 
> 标签：image-processing, opencv

假设我有两张由同一台相机拍摄的图像。我知道拍摄每张照片时相机的 3d 位置和相机的 3d 角度。我想从重叠部分的图像中提取一些 3d 数据。似乎 OpenCV 可以帮助我解决这个问题，但我似乎无法找到我的相机位置和角度将在他们的方法堆栈中使用的位置。帮助？还有其他一些 C 库会更有帮助吗？我什至不知道在网上搜索什么关键字。重叠图像内容的技术术语是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:18:45.627

您需要了解更多关于相机几何和立体绑定几何的知识。除非你的相机安装在一个特殊的装置上，否则它在每张图像上的姿势是否可以只用一个角度和一个点来指定是相当值得怀疑的。相反，您需要三个角度（例如滚动、俯仰、偏航）。另外，如果您希望您的重建在度量上准确，您需要准确校准相机的焦距（至少）。

# android - USB 调试 - 为 Epson Moverio 安装驱动程序时出现问题

> ID：11183634
> 
> 赞同：4
> 
> 时间：2012-06-25T04:47:36.237
> 
> 标签：android, debugging, usb, driver, epson-moverio

作为 Android 开发的新手，我使用[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)制作了一个可以在虚拟 Android 设备上完美运行的小应用程序。现在，我想在真实设备上运行它：Moverio，爱普生制造的头戴式显示器，但我的电脑无法将其识别为 Android 设备。

在 Windows 7 上，我知道我需要一个特定的 USB 驱动程序。爱普生向我发送了安装驱动程序的说明，但仍然无法正常工作。我该怎么做？

以下是我遵循的步骤：

1.  在 \extras\google\usb_driver\android_winusb.inf 的 [Google.NTx86] 和 [Google.NTamd64] 部分添加以下两行：
    `%SingleAdbInterface% = USB_Install, USB\VID_04B8&PID_0C04
    %CompositeAdbInterface% = USB_Install, USB\VID_04B8&PID_0C04&MI_01`
2.  在 [username].android\adb_usb.ini] 中添加供应商 ID
3.  在设备上启用 USB 调试模式
4.  按照此处给出的说明安装 USB 驱动程序[http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver](http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver)

我在第四步遇到了一个问题：在我的设备管理面板中，Moverio 在“磁盘驱动器”类别中。当我右键单击它以安装或更新驱动程序时，输入`<sdk>\extras\google\usb_driver\`文件夹，它说驱动程序是最新的。当我尝试使用 Eclipse 运行该应用程序时，它要求我安装一个虚拟设备，因为它找不到任何连接的真实设备。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-21T18:20:00.643

我设法找到了一篇博文，介绍了启用[ADB](http://en.wikipedia.org/wiki/Android_Debug_Bridge)访问设备所需的过程。[原件](http://pasopia700.blogspot.com/2012/08/blog-post_25.html)是日文的，谷[歌翻译](http://translate.google.com/translate?hl=en&sl=ja&tl=en&u=http://pasopia700.blogspot.com/2012/08/blog-post_25.html)还有一些不足之处。

我正在提供我对以下过程的娱乐；这部分是翻译，部分是原始文档与官方[文档](http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver)的扩展和组合，未能涵盖 Moverio 遇到的问题。

最后指出了一些修改，我怀疑这应该适用于在其他设备上安装调试支持，默认情况下也只识别为外部数据驱动器。

1.  您需要做的第一件事是编辑 Google USB 驱动程序的 .inf 文件。

    该文件位于`\android-sdk\extras\google\usb_driver\android_winusb.inf`.

    默认情况下，该`android-sdk`文件夹位于`C:\User\YourUserName\AppData\Local\Android\`.

    您需要将以下行添加到文件末尾：

    ```
    [Google.NTamd64]
    ; BT-100
    %SingleAdbInterface% = USB_Install, USB\VID_04B8&PID_0C04
    %CompositeAdbInterface% = USB_Install, USB\VID_04B8&PID_0C04&MI_01 
    ```

2.  接下来连接禁用开发者模式的设备。Windows 会将其识别为[USB 大容量存储设备](https://en.wikipedia.org/wiki/USB_mass-storage_device_class)(MSC)。

3.  您需要进入[设备管理器](http://en.wikipedia.org/wiki/Device_Manager)并卸载它。如果您在 USB 串行总线控制器下列出了多个 USB-MSD，您可以通过断开连接来识别哪个是 Moverio，右键单击仍然存在的每个，选择属性并注意常规选项卡上的位置值。然后重新连接 Moverio 并寻找它添加的新条目。

4.  卸载 Moverio 的 USB 大容量存储设备条目后，断开它并在设备上启用开发人员模式。

5.  然后重新连接它。设备管理器将更新以在`BT1`下面显示一个条目`Other Devices`

6.  右键单击 BT1 条目，选择*更新驱动程序软件*，mrowse*我的电脑*以获取驱动程序软件。提供第一步中 USB 驱动程序文件夹的路径。单击*下一步*。

7.  在这一点上，我收到一个关于无法验证驱动程序发布者的警告。我相信这与我编辑了 .inf 文件有关。仍然单击安装此驱动程序软件。

8.  Windows 将报告驱动程序已成功安装。关闭更新对话框。您现在应该`Android Composite ADB Interface`在设备管理器中看到一个条目。在我的电脑上，它出现在`ASUS Android Devices`; 我认为这是我过去连接的 Transformerpad 的遗产；在我用作来源的博客中，它出现在`Android Phone`.

9.  但是，仍需要通知亚行该设备可用。为此，您需要编辑`\.Android\adb_usb.ini`文件。`C:\User\YourUserName\`通过将供应商 ID 作为新行附加到末尾的默认位置。这是一个自动生成的文件；但是在评论中运行更新过程将删除我们需要的条目。如果您意外失去调试能力，这可能是重新检查的好地方。

    ```
    # ANDROID 3RD PARTY USB VENDOR ID LIST - DO NOT EDIT.
    # USE 'android update adb' TO GENERATE.
    # 1 USB VENDOR ID PER LINE.
    0x04B8 
    ```

10.  唯一剩下的就是停止并重新启动亚行。为此，请在`\android-sdk\platform-tools`. 发出命令`adb kill-server`，然后发出命令`adb devices`。

    ```
    C:\Users\Neelyd\AppData\Local\Android\android-sdk\platform-tools>adb kill-server

    C:\Users\Neelyd\AppData\Local\Android\android-sdk\platform-tools>adb devices
    * daemon not running. starting it now on port 5037 *
    * daemon started successfully *
    List of devices attached
    WS000   device 
    ```

    当 ADB 重新启动时，设备应该被列出，并出现在 Eclipse 的 DDMS 中。

要使用此过程在其他设备上安装通用 Android USB 驱动程序，我认为您需要做的就是在设备管理器中右键单击设备的 USB 大容量存储设备条目（步骤 3）；选择详细信息，选择 Hardware Ids 属性，记下显示的值，并使用它们代替`android_winusb.inf`文件中的 Moverio（步骤 1）和供应商 ID `adb_usb.ini`（步骤 10）。

**可能更简单的选择**

搞清楚后，我终于得到了爱普生支持的回复。他们说应该可以将他们的驱动程序直接安装到步骤 2 中确定的 USB-MSD。如果可行，它将取代步骤 3-6。不过我还没有测试过，所以我只是把这个笔记作为附言留下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:22:36.397

为 Windows 安装驱动程序可能比看起来要困难得多。根据我的经验，在任何 Linux 平台上成功开发 Android 的机会都会大得多，无论是安装在 PC 上的 Windows 安装旁边，还是在虚拟机中运行。Linux 几乎可以识别任何 Android 设备，并且无需安装任何驱动程序即可访问。

# ruby - 将哈希从 ruby 传递到 bash 脚本？

> ID：11183636
> 
> 赞同：1
> 
> 时间：2012-06-25T04:48:13.243
> 
> 标签：ruby, bash, shell, hashtable

我正在尝试将值从 ruby​​ 哈希传递到 bash 脚本。最好的方法是什么？ruby 中的大小和键/值对总是不同的。

所以如果我想要类似的东西..

```
 hsh = {"key1"=>"value1", "key2"=>"value2"}
 %x[sh script.sh #{hsh}] 
```

在 bash 方面我需要什么？

编辑：如果 ruby​​ 端的哈希不起作用，我可以使用另一个数据结构，我关心的是容器的大小（哈希/数组）总是不同的..

EDIT2：“关心大小”是指哈希/数组每次都会有不同数量的元素...... 抱歉不清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:07:41.340

您可以打印 Ruby 脚本中的值并在 Bash 脚本中读取它们。您将需要 Bash 4 才能使用关联数组，或者您可以迭代这些值并在读取它们时对其进行操作。为什么不在 Ruby 脚本中的 Bash 中做您想做的事情呢？

```
# works with Bash 3 or 4
while read -r key value
do
    echo "$key $value"   # act on the keys and values
done < <(ruby-script) 
```

# sql-server - 使 sql 查询与区分大小写的排序规则兼容

> ID：11183638
> 
> 赞同：0
> 
> 时间：2012-06-25T04:48:36.723
> 
> 标签：sql-server, collation, case-sensitive

在一个项目中，我有大量的存储过程（SQL Server）。一个客户试图用`Turkish_CS_AI`排序规则运行它。事实证明，很多存储过程都是在没有考虑大小写的情况下编写的，所以对于这种区分大小写的排序规则，会有很多错误。

有没有办法在区分大小写的排序规则中运行脚本/过程而不更正大小写？这是我得到的错误的快照。

![在此处输入图像描述](../Images/a21a84e0993ebb2c9a2eda065a91ae62.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:05:25.993

更改客户端服务器上的数据库排序规则以匹配您的排序规则设置。

ALTER DATABASE MyOptionsTest COLLATE Latin1_General_100_CS_AS_SC; 去

# java - 在我的情况下，提交 JPA 事务的最佳方式是什么？

> ID：11183641
> 
> 赞同：0
> 
> 时间：2012-06-25T04:49:23.870
> 
> 标签：java, hibernate, jpa, transactions, playframework

假设我有 3 个实体模型：

```
History.class
DetilHistory.class
Logs.class 
```

我必须这样写我的代码：

```
//Create History
History h = new History(new Date(), 1, 1, 1);
h.save();

//Create Detil History
DetilHistory dh = new DetilHistory(1, 1, 1, h.id);
dh.save();

//Create Logs
Logs l = new Logs(1,1,1,dh.id);
l.save(); 
```

对于 dh.referecendIdOfHistory，我必须先获取 h.id。而且我必须先获取 dh.id 以获取 l.referecendIdOfDetilHistory。

但是，有时我必须像这样更改该代码下方的变量 h 或 dh ：

```
h.closeDate= new Date();
h.value = 2;
h.save(); 
```

我也是为 Detil History 做的。

不幸的是，JPA 不能那样做。我知道 JPA 不允许这样做的原因。

我有以下问题：

*   分离的实体传递给坚持
*   JPA 尚未初始化
*   ETC

我已经解决了它们：

```
- JPAPluginStartTx(rollback)
- JPA.em().flush(); JPA.em().getTransaction().commit(); 
```

有人可以告诉我最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:53:41.943

你的 save() 方法是做什么的？也许您可以尝试获取 EntityManager 实例，使用 em.getTransaction().begin 打开事务，然后按顺序保存所有实体，然后提交事务。

# security - GORM 的这个实现目前不支持基于字符串的查询，如 [executeQuery]

> ID：11183643
> 
> 赞同：7
> 
> 时间：2012-06-25T04:49:35.530
> 
> 标签：security, mongodb, grails, spring-security, grails-orm

我正在尝试使用 grails mongo 插件在 mongodb 中保留 spring-security-acl 域对象。在执行以下代码行时

```
aclUtilService.addPermission Phone.class, phoneInstance.id, new PrincipalSid(username), BasePermission.ADMINISTRATION 
```

我收到以下错误：

```
String-based queries like [executeQuery] are currently not supported in this  implementation of GORM. Use criteria instead.. Stacktrace follows:
Message: String-based queries like [executeQuery] are currently not supported in this implementation of GORM. Use criteria instead. 
```

有什么硬仗吗？

**Grails 配置详细信息：**

```
app.grails.version=2.0.3
app.name=eateri
app.servlet.version=2.5
app.version=0.1
plugins.mongodb=1.0.0.RC5
plugins.spring-security-acl=1.1
plugins.spring-security-core=1.2.7.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:22:21.377

正如@sudhir 提到的，aclService 中有一些使用 hql executeQuery 方法的方法，例如：

```
 protected AclObjectIdentity retrieveObjectIdentity(ObjectIdentity oid) {
        return AclObjectIdentity.executeQuery(
                "FROM AclObjectIdentity " +
                "WHERE aclClass.className = :className " +
                "  AND objectId = :objectId",
                [className: oid.type,
                 objectId: oid.identifier])[0]
        } 
```

但是mongodb gorm插件不支持hql，因此你的代码陷入hql错误的调用路径如下：

> aclUtilService.addPermission -> aclService.createAcl -> retrieveObjectIdentity

还有另外两个使用 hql 的 aclService 方法：

> 删除条目，查找儿童

因此，一个简单的解决方案是将 ACL 对象存储在 mysql 中并[启用 hibernate 与 mongodb gorm 一起使用](http://springsource.github.com/grails-data-mapping/mongo/manual/guide/2.%20Getting%20Started.html#2.2%20Combining%20Mongo%20and%20Hibernate)。

[另一种是用元编程](http://groovy.codehaus.org/Dynamic+Groovy)覆盖这 3 个 aclService 方法。

# android - android/eclipse 中的广播接收器

> ID：11183646
> 
> 赞同：-1
> 
> 时间：2012-06-25T04:50:08.443
> 
> 标签：android, eclipse, broadcastreceiver

如何制作注册 BroadCastReceiver 的活动？

因为如果我单击最后一个活动（Activity5.java）的关闭按钮，我需要关闭以下所有活动

（考虑我有5个活动，即Activity1.java，Activity2.java，Activity3.java，Activity4.java，Activity5.java）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T04:54:03.450

> 如何制作注册 BroadCastReceiver 的活动？

如果您需要在所有活动中广播，则通过 manifestXml 注册，如果针对特定活动，则

在 onstart()

```
registerReceiver(BroadcastReceiver receiver, new IntentFilter("android.net.wifi.STATE_CHANGE")); 
```

在 onStop()

```
unregisterReceiver(BroadcastReceiver receiver); 
```

# c - 无法从 MSR 读回

> ID：11183654
> 
> 赞同：1
> 
> 时间：2012-06-25T04:50:53.450
> 
> 标签：c, gcc, assembly, x86, inline-assembly

我正在编写一个内核模块，它是关于读写 MSR 的。我写了一个简单的测试程序，但它仍然失败。它所做的只是写入 MSR，然后再读回来。这是代码：

```
static int __init test3_init(void)
{
    uint32_t hi,lo;
    hi=0; lo=0xb;
    asm volatile("mov %0,%%eax"::"r"(lo));
    asm volatile("mov %0,%%edx"::"r"(hi));
    asm volatile("mov $0x38d,%ecx");
    asm volatile("wrmsr");
    printk("exit_write: hi=%08x lo=%08x\n",hi,lo);
    asm volatile("mov $0x38d,%ecx");
    asm volatile("rdmsr":"=a"(lo),"=d"(hi));
    printk("exit_write2: hi=%08x lo=%08x\n",hi,lo);
    return 0;
} 
```

输出如下所示：

`exit_write: hi=00000000 lo=0000000b`

`exit_write2: hi=00000000 lo=00000000`

有人能告诉我为什么第二个输出中的返回值为 0，而不是原来的？我的代码有问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T08:19:01.130

问题与以下事实有关. 相关`mov`和`xxmsr`指令应该在同一个 asm 块中。

看看 gcc 对你的代码做了什么（我对它做了一点修改，使它可以作为常规程序编译）......

来源：

```
// file: msr.c
#include <stdio.h>

typedef unsigned uint32_t;
#define printk printf
#define __init

static int __init test3_init(void)
{
    uint32_t hi,lo;
    hi=0; lo=0xb;
    asm volatile("mov %0,%%eax"::"r"(lo));
    asm volatile("mov %0,%%edx"::"r"(hi));
    asm volatile("mov $0x38d,%ecx");
    asm volatile("wrmsr");
    printk("exit_write: hi=%08x lo=%08x\n",hi,lo);
    asm volatile("mov $0x38d,%ecx");
    asm volatile("rdmsr":"=a"(lo),"=d"(hi));
    printk("exit_write2: hi=%08x lo=%08x\n",hi,lo);
    return 0;
}

int main(void)
{
  return test3_init();
} 
```

编译（使用 MinGW gcc 4.6.2）：

```
gcc msr.c -c -S -o msr.s 
```

`test3_init()`从 msr.s反汇编：

```
_test3_init:
        pushl   %ebp
        movl    %esp, %ebp
        pushl   %esi
        pushl   %ebx
        subl    $32, %esp
        movl    $0, -12(%ebp)
        movl    $11, -16(%ebp)
        movl    -16(%ebp), %eax
        mov %eax,%eax
        movl    -12(%ebp), %eax
        mov %eax,%edx
        mov $0x38d,%ecx
        wrmsr
        movl    -16(%ebp), %eax
        movl    %eax, 8(%esp)
        movl    -12(%ebp), %eax
        movl    %eax, 4(%esp)
        movl    $LC0, (%esp)
        call    _printf
        mov $0x38d,%ecx
        rdmsr
        movl    %edx, %ebx
        movl    %eax, %esi
        movl    %esi, -16(%ebp)
        movl    %ebx, -12(%ebp)
        movl    -16(%ebp), %eax
        movl    %eax, 8(%esp)
        movl    -12(%ebp), %eax
        movl    %eax, 4(%esp)
        movl    $LC1, (%esp)
        call    _printf
        movl    $0, %eax
        addl    $32, %esp
        popl    %ebx
        popl    %esi
        popl    %ebp
        ret 
```

请注意，当 CPU 开始执行时，`wrmsr`它有`ecx`=0x38d（OK）、`edx`=0（OK）、`eax`=0（不是 0xb，哎呀！）。按照说明进行查看。

您可以并且应该写的内容类似于以下内容，甚至比以前更短：

```
static int __init test3_init2(void)
{
    uint32_t hi,lo;
    hi=0; lo=0xb;
    asm volatile("wrmsr"::"c"(0x38d),"a"(lo),"d"(hi));
    printk("exit_write: hi=%08x lo=%08x\n",hi,lo);
    asm volatile("rdmsr":"=a"(lo),"=d"(hi):"c"(0x38d));
    printk("exit_write2: hi=%08x lo=%08x\n",hi,lo);
    return 0;
} 
```

现在，反汇编`test3_init2()`：

```
_test3_init2:
        pushl   %ebp
        movl    %esp, %ebp
        pushl   %esi
        pushl   %ebx
        subl    $48, %esp
        movl    $0, -12(%ebp)
        movl    $11, -16(%ebp)
        movl    $909, %ecx
        movl    -16(%ebp), %eax
        movl    -12(%ebp), %edx
        wrmsr
        movl    -16(%ebp), %eax
        movl    %eax, 8(%esp)
        movl    -12(%ebp), %eax
        movl    %eax, 4(%esp)
        movl    $LC0, (%esp)
        call    _printf
        movl    $909, -28(%ebp)
        movl    -28(%ebp), %ecx
        rdmsr
        movl    %edx, %ebx
        movl    %eax, %esi
        movl    %esi, -16(%ebp)
        movl    %ebx, -12(%ebp)
        movl    -16(%ebp), %eax
        movl    %eax, 8(%esp)
        movl    -12(%ebp), %eax
        movl    %eax, 4(%esp)
        movl    $LC1, (%esp)
        call    _printf
        movl    $0, %eax
        addl    $48, %esp
        popl    %ebx
        popl    %esi
        popl    %ebp
        ret 
```

另外，请记住每个 CPU 都有自己的 MSR，您可能希望在所有 CPU 上都设置此 MSR。另一个重要的考虑因素是，在您完成 MSR 之前，不应在不同 CPU 之间移动您正在操作 MSR 的线程。

# ruby - 如何扩展 Ruby Enumerable 类 max_by 以忽略 nil？

> ID：11183657
> 
> 赞同：1
> 
> 时间：2012-06-25T04:51:28.390
> 
> 标签：ruby, extension-methods, overloading, ruby-1.9.3, enumerator

```
a = [4, 3, 2, nil]
a.max_by { |v| v * 2 } => NoMethodError: undefined method `*' for nil:NilClass 
```

如何重载 max_by 以忽略 nil 值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T04:54:31.700

您可以[`Array.compact`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-compact)在调用`max_by`.

```
a.compact.max_by { |v| v * 2 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T07:54:34.847

欢迎使用 Ruby：解决问题的方法有很多！

一个非常简单的解决方案是：

```
a.max_by { |v| v.to_f * 2 } 
```

因为 nil 强制浮动为 0。这不处理负值，但由于 nil 只是一个名为 NilClass 的类的单个实例，现在与 Ruby 中的所有类一样，我们可以打开它并让它学习一点数学：

```
class NilClass
  # overloading * operator
  def *(y)
    # returning negative infinity: Ruby 1.8.7
    -1.0/0.0
    # returning negative infinity: Ruby 1.9.2
    # -Float::INFINITY
  end
end 
```

现在我们有了

```
a.max_by { |v| v * 2 } 
```

返回 4。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T07:21:21.573

这是另一个：

```
a.max_by { |v| v.nil? ? -Float::INFINITY : v }
#=> 4 
```

对于您的示例，这显然比 更复杂`compact`，但是如果您想对数组进行排序并保留`nil`值，这是一个方便的技巧。或者，如果您想以一种奇怪的方式进行排序，比如最后的零：

```
[0,4,5,6,1,9].sort_by { |v| v.zero? ? Float::INFINITY : v }
#=> [1, 4, 5, 6, 9, 0] 
```

# php - 试图显示 2 个表数据

> ID：11183658
> 
> 赞同：2
> 
> 时间：2012-06-25T04:51:29.590
> 
> 标签：php, mysql, sql, join, group-by

我有 2 张桌子

表名`Dist`。

```
NAME|Phone|ID 
----------------
Oakley|555-555|1
Maui|666-666|2
lux|777-7777|3 
```

表名`Patientacct`。

```
Name|prescription|id|orderfrom
-------------------------------
bob|20-20|1|oakley
billy|15-20|2|Oakley, Maui
kim|20-20|3|Lux 
```

我正在寻找像这样的显示器

```
奥克利
--------------------
鲍勃
比利

```

```
毛伊岛
------------------
比利

```

```
勒克斯
--------------
金

```

到目前为止的试验

```
SELECT *
FROM `dist`
JOIN `patientacct` ON patientacct.dist LIKE CONCAT('%', `dist`.name ,'%')
GROUP BY `dist`.name 
```

这仅显示 1 个 dist

如果我通过示例删除该组：

```
SELECT *
FROM `dist`
JOIN `patientacct` ON patientacct.dist LIKE CONCAT('%', `dist`.name ,'%') 
```

我得到了两次记录，所以我需要的是介于两者之间的某个地方。我对加入非常陌生，所以在解释时很容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:41:46.350

首先，请使表结构关系。在每个表中都有一个主 auto_increment 值，并使用从 Dlist 外键到 Patientacct 的主键。这样，一个简单的连接将获取您想要的记录。

关于显示，你的意思是你不想记录两次。由于您使用的是连接，因此您将获得两个 Oakley 与患者 Bob 和 Billy 的记录。这就是您想要的，并且在关系表中也可以通过简单的连接来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:38:10.223

您必须更改表结构，并且需要添加具有以下值的关系表：

订单：

```
dist_id, patientacct_id PRIMARY_KEY(dist_id, patientacct_id) 
```

# php - jquery load 函数在 IE 中不起作用并显示 Object required 错误

> ID：11183661
> 
> 赞同：1
> 
> 时间：2012-06-25T04:53:11.993
> 
> 标签：php, jquery, internet-explorer

我正在使用 jquery 加载功能来加载页面。它在 FF 中工作正常，但在 IE 中显示如下错误消息

```
 Message: Object required
    Line: 24
    Char: 1
    Code: 0
    URI: http://sample/index.php?option=com_propertylist&amp;controller=propertylist&amp;view=propertylist&amp;propty=220

    Message: Permission denied
    Line: 6081
    Char: 6
    Code: 0
    URI: http://sample/templates/sample/js/jquery-1.6.2.min.js 
```

代码是

```
 jQuery("#listing a").bind('click', function(){
            jQuery(".dashboard-listing").empty();
            overlayapply();
            jQuery(".dashboard-listing").load('index.php?option=com_propertylist&controller=listing&task=overview&propty='+propertyid+'&tmpl=component',null,function(){overlayremove();}); 
        }); 
```

有任何想法吗？

# ruby-on-rails-3 - 带有has_many的Rails Form通过-选择哪种模型？

> ID：11183663
> 
> 赞同：0
> 
> 时间：2012-06-25T04:53:31.150
> 
> 标签：ruby-on-rails-3, associations

我有以下型号：

```
Student has_many :subjects, :through => :classes

Subject has_many :students, :through => :classes

Class belongs_to :subject
      belongs_to :student 
```

模型类有一个额外的属性（在主题和学生表的外键中）称为级别。

基本上我希望能够有一个表格，让学生选择一个主题并将该主题与其记录相关联。所以，我有这个：

```
ClassesController < ApplicationController

def new
 @list_of_subjects = Subject.all
 # What should I do here?
end 
```

我的问题是：我应该如何为表单创建对象？它应该来自哪个模型，学科、学生或班级？我希望能够在班级表中创建一条记录，将学生和学生选择的科目联系起来，但我不知道我是否做错了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:50:49.380

我不认为你可以创建一个名为的模型，`Class`因为它是一个关键字，但这既不是这里也不是那里......

首先，我认为应该使用您的控制器和视图，`Student`因为选择这些东西的是学生。接下来，我认为您想要做的是添加`accepts_nested_attributes_for :class`您的`Student`模型，它允许您`Class`从`Student`.

你想做的事情听起来有点像我想做的事情。我在那里有我的完整代码。

[使用嵌套属性轻松选择表单中的关联](https://stackoverflow.com/questions/13282543/using-nested-attributes-to-easily-select-associations-in-a-form)

我后来也在这个问题中对其进行了一些改进，以使代码不那么可怕：

[Rails：如何在构建之前添加或插入关联？](https://stackoverflow.com/questions/13599519/rails-how-do-i-prepend-or-insert-an-association-with-build)

我知道已经晚了，但我希望这会有所帮助。

# algorithm - 如何在不跨越另一条路径的情况下连接两点？

> ID：11183668
> 
> 赞同：7
> 
> 时间：2012-06-25T04:54:22.757
> 
> 标签：algorithm, graph-algorithm

假设我有以下网格。我必须连接成对的字母。不仅必须连接相同的字母，而且我还必须确保连接路径不会相互交叉。什么算法可以告诉我是否可以在不交叉路径和最短路径的情况下连接所有对？

我意识到这是一个图形问题，最短路径部分可以使用 BFS 解决。我不确定的是交叉路径。

```
 +---+---+---+---+---+---+---+---+
  | A |   |   | B |   |   |   |   |
  +-------------------------------+
  |   |   |   |   |   |   |   |   |
  +-------------------------------+
  |   |   | B |   |   |   | D |   |
  +-------------------------------+
  |   |   |   |   |   |   |   |   |
  +-------------------------------+
  |   | C |   |   | C |   |   |   |
  +-------------------------------+
  |   |   |   | A |   |   |   |   |
  +-------------------------------+
  |   |   |   |   |   |   | D |   |
  +-------------------------------+
  |   |   |   |   |   |   |   |   |
  +---+---+---+---+---+---+---+---+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T07:15:30.787

这是一个 NP 完全问题，称为“不相交的连接路径”。除了一些超多项式算法（真的很慢），还有一些近似算法（可能会出错，或者不是最优的）。

*   [偶度平面图中不相交路径问题的近似算法 - Jonas Kleinberg (pdf)](http://www.cs.cornell.edu/home/kleinber/focs05-even.pdf)

# php - 无法发送会话 cookie - 标头已由

> ID：11183672
> 
> 赞同：0
> 
> 时间：2012-06-25T04:54:41.850
> 
> 标签：php

我有一个 php 脚本，代码中的第一件事是`session_start();`，但我一直收到这个错误

`Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /home/****/public_html/admincp/index.php:1) in /home/****/public_html/admincp/index.php on line 1`

但该脚本在`localhost`.

```
<?php session_start();?>
<?php
require 'global.php';
?>

<?php

//check if the user logged in
if(!isset($_SESSION['user_id']))
page_redirect('login.php'); // go to login.php.
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:53:40.070

在您喜欢的文本编辑器中打开文件并将文件转换为不带 BOM 的 UTF8。恼人的错误，曾经做过同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:57:09.873

很多时候，文件顶部的单独空白字符会导致此错误，因为空白字符会得到输出。确保上面没有任何内容`<?php session_start(); ?>`，甚至没有空格字符。如果您所在的主机有一个 auto_prepend_file，那也可能会将其丢弃。

# sql-server-2008 - 我们可以在同一个 PC 用户上安装 SQL Server 的 Express 版和 Standard 版吗？

> ID：11183673
> 
> 赞同：3
> 
> 时间：2012-06-25T04:54:54.640
> 
> 标签：sql-server-2008, sql-server-2008-r2

我同时使用 SQL Server 2008 和 2008 R2，我有一种情况，我需要在同一台计算机和同一用户中。

但随着不同的版本。

我想安装 SQL Server 2008 Express 和 SQL Servre 2008 R2 Standard Edition。

我的问题是我们可以这样做吗？如果是，那么请指导我如何安装它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T04:58:09.340

是的，你当然可以这样做。此外，没有什么特别的“指导”安装 - 只需安装它们。

您需要注意的唯一一点：如果您安装了多个版本的 SQL Server，它们必须有一个单独的**实例名称**（您在安装时选择）。

默认情况下，“常规”SQL Server 安装为“默认实例”，没有明确的实例名称。SQL Server Express 默认使用`SQLEXPRESS`实例名称。

所以基本上：是的，这完全有可能，只需为两个安装选择单独的实例名称！

# adsense - 谷歌 Adsense 不可见

> ID：11183674
> 
> 赞同：0
> 
> 时间：2012-06-25T04:54:55.080
> 
> 标签：adsense

我将 Google Adsense 代码插入到我的网站，我收到了来自 Google 的邮件，说一切正常，广告将在几个小时后起作用。但它没有显示它是第三天。我查看了浏览器代码，发现在脚本代码处写着*style="display: none; visibility: hidden; "*

为什么？我该如何解决？怎么了，谁能帮帮我？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-08-05T17:41:11.817

1.  有时与报价不相关的广告可用广告未显示，但尝试在同一网站的其他链接中它会起作用
2.  删除浏览器的广告拦截软件和小部件
3.  可能是广告因违反规则而被屏蔽
4.  检查浏览器是否支持 adobe flash

# javascript - 如何防止“您确定要离开此页面吗？” 提交表单时发出警报？

> ID：11183682
> 
> 赞同：4
> 
> 时间：2012-06-25T04:56:18.720
> 
> 标签：javascript, html

我有一个简单的 html 表单，里面的字段很少。

我想确保用户在尝试离开页面时收到警报消息。所以我在页面上添加了脚本，当用户试图离开这个页面时，它就会运行。

但是当用户尝试提交表单时，我也会收到此警报消息。当用户保存表单时，我不想要此警报消息。

请帮忙。

下面是一些示例代码。

```
<html>
    <head>

    <script>
        function verifyexit() { return 'Are you sure ?'; }           window.onbeforeunload = verifyexit;
    </script>       
</head>
<body>
        Go to <a href="b.html"> another page </a> 
        <form action="c.html">
            name : <input type="text" name="name" value=""/> <br>
            email : <input type="text" name="email" value=""/> <br>
            <input type="submit" value="save"/>
        </form>
</body> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T04:59:01.887

[堆栈溢出参考](https://stackoverflow.com/questions/1119289/how-to-show-the-are-you-sure-you-want-to-navigate-away-from-this-page-when-ch?rq=1)

打开它：

```
window.onbeforeunload = "Are you sure you want to leave?"; 
```

要关闭它：

```
window.onbeforeunload = null; 
```

请记住，这不是一个正常的事件 - 您不能以标准方式绑定到它。

检查值？这取决于您的验证框架。

在 jQuery 中，这可能类似于（非常基本的示例）：

```
$('input').change(function() {
    if( $(this).val() != "" )
        window.onbeforeunload = "Are you sure you want to leave?";
}); 
```

[使用 JQuery](http://jonstjohn.com/node/23)，这些东西很容易做到。因为你可以**绑定**到集合。

仅执行 onbeforeunload 是不够的，如果有人开始编辑内容，您只想触发导航离开。

要在 Chrome 和 Safari 中进行这项工作，您必须这样做

```
window.onbeforeunload = function (e) {
    e = e || window.event;

    var msg = "Sure you want to leave?";

    // For IE and Firefox prior to version 4
    if (e) {
        e.returnValue = msg;
    }

    // For Safari
    return msg;
}; 
```

**这是参考的一般规则**

```
window.onbeforeunload = function (e) {
  e = e || window.event;

  // For IE<8 and Firefox prior to version 4
  if (e) {
    e.returnValue = 'Any string';
  }

  // For Chrome, Safari, IE8+ and Opera 12+
  return 'Any string';
}; 
```

[参考：https://developer.mozilla.org/en/DOM/window.onbeforeunload](https://developer.mozilla.org/en/DOM/window.onbeforeunload)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T04:59:11.930

试试这个：

```
<form action="c.html" onsubmit="window.onbeforeunload=function(){}"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T04:13:39.117

试试这个：

```
$(window).bind("beforeUnload", verify);
$("form").submit(function (){
    $(window).unbind("beforeUnload");
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T06:13:14.353

试试这个：[http ://cfsilence.com/blog/client/index.cfm/2009/10/12/jQuery-Method-To-Prompt-A-User-To-Save-Changes-Before-Leaving-Page](http://cfsilence.com/blog/client/index.cfm/2009/10/12/jQuery-Method-To-Prompt-A-User-To-Save-Changes-Before-Leaving-Page)

我在函数中添加了一点：

```
 $('#submitButton').click(function () {
        isDirty = false;
}); 
```

只是这样表格在您要提交时不会要求验证:)

我希望这有帮助

注意：如果您不喜欢依赖通用命名，您也可以执行类似 $("input[type=submit]") 的操作（否则您的提交按钮需要称为 submitButton）

# c - 如何在C中将char *拆分为整数表

> ID：11183683
> 
> 赞同：1
> 
> 时间：2012-06-25T04:56:41.907
> 
> 标签：c

我有一个像“1 10 14 16”这样的字符 * 我想将它拆分为整数数组，如 1,10,14,16 ......我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T05:10:01.457

我建议在循环中使用[strtol](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strtol.html)`endptr` ，显式使用它的 参数，例如：

```
char* pc = input_string;
char* end = NULL;
while (*pc) {
   long l = strtol (pc, &end, 0);
   if (end == pc) break;
   do_something_useful_with_the_number (l);
   pc = end;
} 
```

如果要累积数组中的所有数字，请替换`do_something_useful_with_the_number (l);`为增长该数组的代码（可能使用`malloc`和/或`realloc`...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T05:13:00.467

我会像这样使用 strtok() ：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main() {
   char string[] = "1 10 14 16",
        *next = NULL;
   int number[10] = {0},
       noOfNumbers = 0,
       i = 0;

   next = strtok(string, " "); /* first call must have the string and delimiters */

   while ( next != NULL ) {
      number[noOfNumbers++] = atoi(next);
      next = strtok(NULL, " "); /* second call only the delimiters */
   }

   for ( i = 0; i < noOfNumbers; i++ ) {
      printf("number[%d] = %d\n", i, number[i]);
   }

   return 0;
} 
```

如何确保整数数组足够大由您决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T05:02:38.293

用于`strtok`分隔数字，然后`atoi`在每个数字上使用以将它们转换为整数。

[http://www.elook.org/programming/c/strtok.html](http://www.elook.org/programming/c/strtok.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T05:02:51.127

```
int output[4];

char *input_string = "1 10 14 16";

sscanf(input_string, "%d %d %d %d", &output[0], &output[1], &output[2], &output[3]);

printf(" OUTPUT : %d %d %d %d\n", output[0], output[1], output[2], output[3]); 
```

上面的代码应该可以工作

问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T05:03:11.440

1 你将不得不一次`strtok`获得一个数字字符串。

2 然后您必须`atoi`将数字字符串转换为int。

这需要在循环条件`strtok`返回有效字符串之前完成

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T11:04:17.927

```
 #include <stdio.h>
        ///i is count *input_string[] times
        ///j is count temp[] times
        int main() {
            int i,j=0,num=0,*ptr,output;
            char temp[9]={'\0'};
            char *input_string[] = {"1 10 14 16 20 31 34 67 23 45 23"};

            for(i=0;*(*(input_string+0)+i)!='\0';)
            {
                switch(*(*(input_string+0)+i))
                {
                   case ' ':i++;break;
                   case '1':case '2':case '3':
                   case '4':case '5':case '6':
                   case '7':case '8':case '9':
                   case '0':
                       j=0;
                       while(*(*(input_string+0)+i) != ' ' || j>9 )
                       {
                            temp[j]=*(*(input_string+0)+i);
                            i++;j++;
                       }
                       j++;
                       temp[j]='\0';
                       output=atoi(temp);
                       ptr=malloc( sizeof(int) );
                       ptr=&output;
                       printf("%d ",*ptr);
                       break;
                }
            }
            return 0;
        }
I made small modifications.I updated the malloc (); function.May I ask whether the          condition?Thank you! 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-25T15:36:10.550

```
 #include <stdio.h>
            ///i is count *input_string[] times
            ///j is count temp[] times
            ///num is count output[] times
            int main() {
                int i,j=0,num=0;
                int output[4];
                char temp[9]={'\0'};
                char *input_string[] = {"1 10 14 16"};

                for(i=0;*(*(input_string+0)+i)!='\0';)
                {
                    switch(*(*(input_string+0)+i))
                    {
                       case ' ':i++;break;
                       case '1':case '2':case '3':
                       case '4':case '5':case '6':
                       case '7':case '8':case '9':
                       case '0':
                           j=0;
                           while(*(*(input_string+0)+i) != ' ' || j>9 )
                           {
                                temp[j]=*(*(input_string+0)+i);
                                i++;j++;
                           }
                           j++;
                           temp[j]='\0';
                           output[num]=atoi(temp);
                           num++;
                           break;
                    }
                }
                for(i=0;i<4;i++)///print number
                    printf("%d ",output[i]);
                return 0;
            }

 ///*(*(input_string+0)+i) you can see is e.g char input_string[][]; 
```

# c# - 公式字段水晶报表子报表错误

> ID：11183684
> 
> 赞同：0
> 
> 时间：2012-06-25T04:56:53.273
> 
> 标签：c#, crystal-reports

我正在使用编码在 Crystal Report 中制作子报表。公式字段中有一个错误，我无法理解，因为所有的东西都很完美。

公式字段：

```
if {Command.opbal}<0 then "Dr." Else "Cr." 
```

> 类似的错误：此字段名称未知。文件 C:\Users\user\AppData\Local\Temp\Debtors_Total_Outstanding_Report {A682B99D-A38B-43F3-BB05-63C258E9E0E2}.rpt 中的错误：公式中的错误。'if {Command.opbal}<0 then 0 else {Command.opbal}' 此字段名称未知。

单击报告时。

我使用命令按钮，如：

```
select *  from {?database}.dbo.AC_LEDGER

string str = "select crbal*-1 as crbal, glname, glcode,contprsn, refby, glphone1, glcity, glphone2, email, crlimit, restorddueamt  from glmast WHERE drgroup='A3402' and crbal<>0 and glcode in(" + strSelection + ")";
                SqlDataAdapter ad = new SqlDataAdapter(str, con2);
                DataSet ds = new DataSet();

ad.Fill(ds);

path = Server.MapPath("Debtors_Total_Outstanding_Report.Rpt");
cr = new ReportDocument();
cr.Load(path);

cr.SetDataSource(ds.Tables[0]);

cr.SetParameterValue(0,ds.Tables[0].Rows[0][1].ToString());
cr.SetParameterValue(1,company_name);
cr.SetParameterValue(2, database_name);

CrystalReportViewer1.ReportSource = cr;
CrystalReportViewer1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:17:16.987

这只是一个错字吗？您的选择查询返回 crbal 并且您的公式字段引用 opbal？

# android - Eclipse 经常作为 XSL 转换运行

> ID：11183685
> 
> 赞同：0
> 
> 时间：2012-06-25T04:57:06.950
> 
> 标签：android, eclipse, android-layout, transformation

我有 Eclipse 的问题，我是一名 Android 开发人员，当我在`XML`布局文件中编辑时，我想使用快捷方式作为 Android 应用程序运行`Ctrl+F11`，但它会自动作为**XSL Transformation**运行，并在当前文件夹中创建一个`xxx.out.xml`，如何我禁用它？
谢谢你的帮助，对不起我的英语。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:25:56.043

避免此问题的一种方法是将 Eclipse 配置为始终启动先前启动的应用程序。为此，导航到`Window -> Preferences -> Run/Debug -> Launching -> Launch Operation`并选择`Always launch the previously launched application`。

我发现这个选项比启动当前打开的内容要方便得多。

# php - PHP RSS阅读器不起作用

> ID：11183688
> 
> 赞同：0
> 
> 时间：2012-06-25T04:57:11.383
> 
> 标签：php, xml, facebook, rss

嘿，我写这篇文章是为了获取一个 FB 页面提要并将其输出到一个站点。

它在我的本地主机上工作得很好，但在将它放在服务器上时就不行了。它只是空白。

```
<?php
$xml_url = "http://fbrss.com/f/7f823b5ba0557decbd324199136326ac_7LpQh7MAJ22MISS1omjI.xml";
$xml = simplexml_load_file($xml_url);

$json = json_encode($xml);
$objects = json_decode($json,TRUE);
$object = $objects;

$i=0;
foreach ($object as $items) {
    $json = json_encode($items);
    $objects = json_decode($json,TRUE);
    $object = $objects;
    $i=0;
    foreach ($object as $items) {
        $item[$i] = $items;
        $i++;
    }

}
$entries = $item[5];
foreach ($entries as $entry) {
    echo '<a href="'.$entry["guid"].'">', substr($entry["title"], 0, 50), '...</a><br /><span>', substr($entry["pubDate"], 4, 18),'</span><br /><hr /><br />';
}   
?> 
```

我的问题是 1）为什么它不能实时工作，以及 2）有没有更好的方法来做到这一点？

**更新**

好的，我已经提取了错误日志，这就是我得到的：

[Mon Jun 25 03:08:20 2012][debug] mod_deflate.c(615): [client 74.192.47.34] Zlib: Compressed 0 to 2 : URL / *** */* *** /xmlFeed.php (* 添加由我)

所以......它的压缩问题？这是什么意思，我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:54:30.887

试试这个，它会工作的。

```
<?php
$xml_url = "http://fbrss.com/f/7f823b5ba0557decbd324199136326ac_7LpQh7MAJ22MISS1omjI.xml";
$xml = simplexml_load_file($xml_url);

foreach ($xml->channel->item as $item) {
    echo '<a href="'.$item->guid.'">', substr($item->title, 0, 50), '...</a><br /><span>', substr($item->pubDate, 4, 18),'</span><br /><hr /><br />';
}
?> 
```

简短，甜蜜，简单。

# php - Uploadify 如何创建新文件夹并将文件加载到其中

> ID：11183692
> 
> 赞同：0
> 
> 时间：2012-06-25T04:57:50.490
> 
> 标签：php, jquery, codeigniter, uploadify

**谁能告诉如何将值从 jquery 传递给 uploadify.php `dynfolder:$("#storeloyaltyid").val()`，//值是 photo1 m 无法在 uploadify.php 中获取**

jQuery

```
if($("#uploadphotoz").length>0){

        uploadphotoz();

    }

    function uploadphotoz(){

        $('#uploadphotoz').Uploadify({

            uploader:urljs+"/jslib/Uploadify.swf",
            cancelImage:urljs+"/image/cancel.png",
            buttonImage:urljs+"/image/browse_button.png",
            uploadUrl:urljs+"/jslib/uploadify.php",
            dynfolder:$("#storeloyaltyid").val(),//value is photo1
            height  : 21,
            width   :59,
            auto    : true,
            fileLimit:1,
            preview:'stuimgpreview',
            onComplete: function(event,status,imgs){   
                $("#memPhoto").val(imgs);
            },
            onRemove:function(event,imgs){
                $("#memPhoto").val(imgs);
            }
        });
    } 
```

上传.php

```
<?php
if (!empty($_FILES)) {

    $filename = $_FILES['Filedata']['name'];
    $filetmpname = $_FILES['Filedata']['tmp_name'];
    $fileType = $_FILES["Filedata"]["type"];
    $fileSizeMB = ($_FILES["Filedata"]["size"] / 1024 / 1024);

    // Place file on server, into the images folder
    //move_uploaded_file($_FILES['Filedata']['tmp_name'], "../uploaded_photos/".$filename);
    $dynfolder=$_POST['dynfolder'];
mkdir($dynfolder, 0755, true);move_uploaded_file($_FILES['Filedata']['tmp_name'], "../uploaded_photos"."/".$dynfolder."/".$filename);.../uploaded_photos/photos1/1.jpg

}elseif($_POST['d']){
    $filename = $_POST['d'];
    $dynfolder=$_POST['dynfolder'];
mkdir($dynfolder, 0755, true);
$dFile=move_uploaded_file($_FILES['Filedata']['tmp_name'], "../uploaded_photos"."/".$dynfolder."/".$filename);//.../uploaded_photos/photos1/1.jpg
    unlink($dFile);

}
?> 
```

我无法在uploaded_photos 文件夹中创建一个名为photos1 的新文件夹......路径应该是`.../uploaded_photos/photos1/1.jpg` ，，`dynfolder:$("#storeloyaltyid").val(),//value is photo1`谁能告诉代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:23:57.303

```
$('#uploadphotoz').Uploadify({
    ...
    'method': 'post',
    'formData': { 'dynfolder': $("#storeloyaltyid").val() },
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:58:41.553

试试这个：您可能必须更改`/../`为`../`. 我目前无法测试这个。

此外，您应该检查目录是否存在以及文件上传是否成功。如果文件夹已经存在，我不知道 PHP 会做什么。

```
<?php
$basepath = dirname(__FILE__);

if (!empty($_FILES)) {
    $filename = $_FILES['Filedata']['name'];
    $filetmpname = $_FILES['Filedata']['tmp_name'];
    $fileType = $_FILES["Filedata"]["type"];
    $fileSizeMB = ($_FILES["Filedata"]["size"] / 1024 / 1024);
    $dynfolder = $_POST['dynfolder'];
    mkdir($basepath.'/../'.$_POST['dynfolder'], 0755, true);
    move_uploaded_file($_FILES['Filedata']['tmp_name'], $basepath.'/../'.$_POST['dynfolder'].'/'.$filename);
}
?> 
```

编辑：

Javascript 问题是您只是在名为`dynfolder`. Uploadify 有一个名为 formData 的设置。在这里传递变量。

例如：

```
[...]
height : 21,
width : 59,
auto : true,
formData : jQuery.parseJSON('{"dynfolder":"'+$("#storeloyaltyid").val()+'"}'),
[...] 
```

# command - 如何在linux中删除pendrive中的所有exe

> ID：11183694
> 
> 赞同：0
> 
> 时间：2012-06-25T04:58:24.783
> 
> 标签：command, rm

我的笔式驱动器中有很多 exe 文件（位于不同的目录中）。

如何使用 Linux 命令删除所有文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T05:04:50.680

删除`exe`当前目录树中的所有文件。

```
find . -name "*.exe" -delete 
```

如果您的笔式驱动器有超过 2 个目录，那么您需要在每个目录中运行此命令。

# xml - wordpress 创建一个新文件，该文件可以从 wordpress 获取数据并使用函数

> ID：11183699
> 
> 赞同：0
> 
> 时间：2012-06-25T04:59:06.373
> 
> 标签：xml, wordpress, export

我正在从管理员 wordpress 制作导出 xml 文件。在我构建的自定义管理页面中，它有一个导出 xml 文件的按钮。

导出按钮将转到导出文件的 url，它将获取数据并显示为 xml 文件。

问题是wordpress不允许创建一个可以获取数据和使用wordpress功能的新文件。

导出功能是自定义wordpress主题的一部分，所以导出文件必须预定义！我可以创建一个 wordpress 页面模板来导出数据。但它需要创建一个新页面并使用导出页面模板。

我可以创建一个 wordpress 管理页面，但它看起来总是加载管理屏幕，所以它不能变成一个 xml 文件。

导出 xml 文件的内容几乎是来自 wordpress 选项和主题构建的自定义数据库的数据！

有人有解决这个问题的想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:35:13.510

这可能不是您想听到的答案，而是自己编写代码。我必须创建一个插件来生成 JSON 文件，但是当按下“发布”按钮时，我已将插件链接到该插件。PHP 有一个可以帮助您的[XML 解析器（PHP 的 JSON 解析器适用于我的目的）。](http://php.net/manual/en/book.xml.php)

# python - 如何正确地做 HttpResponseRedirect 与反向？

> ID：11183704
> 
> 赞同：5
> 
> 时间：2012-06-25T04:59:24.503
> 
> 标签：python, django

当我尝试反转时，我收到一个错误“_reverse_with_prefix() 参数后 * 必须是一个序列，而不是 int”。我之前在视图中对参数进行了硬编码，但正在尝试使其动态化。有什么建议吗？

看法：

```
def add_review(request, product_id):
    p = get_object_or_404(Product, pk=product_id)
    if request.method == 'POST':
        form = ReviewForm(request.POST)
        if form.is_valid():
            form.save()
            #HARDCODED: return HttpResponseRedirect('/products/1/reviews/')
            return HttpResponseRedirect(reverse('view_reviews', args=(p.id)))
    else:
        form = ReviewForm()
    variables = RequestContext(request, {'form': form})
    return render_to_response('reserve/templates/create_review.html', variables)        

def view_reviews(request, product_id):
    product = get_object_or_404(Product, pk=product_id)
    reviews = Review.objects.filter(product_id=product_id)
    return render_to_response('reserve/templates/view_reviews.html', {'product':product, 'reviews':reviews},
    context_instance=RequestContext(request))

urlpatterns = patterns('reserve.views',
    url(r'^clubs/$', 'index'),
    url(r'^products/(?P<product_id>\d+)/reviews/$', 'view_reviews'),
    url(r'^products/(?P<product_id>\d+)/add_review/$', 'add_review'),
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-25T05:18:18.577

检查`args=(p.id)`里面`reverse()`，一定是`args=(p.id,)`。第一种形式被视为整数而不是序列。

参考[文档](http://docs.python.org/reference/datamodel.html#the-standard-type-hierarchy)和[教程](http://docs.python.org/tutorial/datastructures.html#tuples-and-sequences)：

> 一个特殊的问题是包含 0 或 1 项的元组的构造：语法有一些额外的怪癖来适应这些。空元组由一对空括号构成；一个包含一个项目的元组是通过一个带有逗号的值来构造的（将单个值括在括号中是不够的）。

此外，使用`'reserve.views.view_reviews'`而不是仅`'view_reviews'`，因此：

```
reverse('reserve.views.view_reviews', args=(p.id,)) 
```

检查[反向文档](https://docs.djangoproject.com/en/dev/topics/http/urls/#django.core.urlresolvers.reverse)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T05:39:59.507

由于您的模式将匹配项分配给变量，因此它被视为关键字参数，因此您应该将调用调整为 reverse。

`return HttpResponseRedirect(reverse('view_reviews', kwargs={'product_id':p.id})`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T12:02:18.750

那是因为 args 需要元组，但是当你使用 args=(p.id) 时，实际上，python 会认为是整数 p.id，你可以查看源代码 django 1.6 如下：

```
def reverse(viewname, urlconf=None, args=None, kwargs=None, prefix=None, current_app=None):
if urlconf is None:
    urlconf = get_urlconf()
resolver = get_resolver(urlconf)
args = args or []
kwargs = kwargs or {}
if prefix is None:
    prefix = get_script_prefix()
if not isinstance(viewname, six.string_types):
    view = viewname
else:
    parts = viewname.split(':')
    parts.reverse()
    view = parts[0]
    path = parts[1:]
    resolved_path = []
    ns_pattern = ''
    while path:
        ns = path.pop()

        # Lookup the name to see if it could be an app identifier
        try:
            app_list = resolver.app_dict[ns]
            # Yes! Path part matches an app in the current Resolver
            if current_app and current_app in app_list:
                # If we are reversing for a particular app,
                # use that namespace
                ns = current_app
            elif ns not in app_list:
                # The name isn't shared by one of the instances
                # (i.e., the default) so just pick the first instance
                # as the default.
                ns = app_list[0]
        except KeyError:
            pass

        try:
            extra, resolver = resolver.namespace_dict[ns]
            resolved_path.append(ns)
            ns_pattern = ns_pattern + extra
        except KeyError as key:
            if resolved_path:
                raise NoReverseMatch(
                    "%s is not a registered namespace inside '%s'" %
                    (key, ':'.join(resolved_path)))
            else:
                raise NoReverseMatch("%s is not a registered namespace" %
                                     key)
    if ns_pattern:
        resolver = get_ns_resolver(ns_pattern, resolver)

return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)) 
```

看看这个 iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))，它使用 *args，所以你应该确保 args 是一个序列，

根据文档，一个项目的元组应该添加逗号来创建，你的代码应该是这样的：

```
return HttpResponseRedirect(reverse('view_reviews', args=(p.id,))) 
```

# php - PHP电子邮件发件人不断循环

> ID：11183705
> 
> 赞同：1
> 
> 时间：2012-06-25T04:59:28.870
> 
> 标签：php, html, email

我有一个简单的电子邮件发件人。它工作正常并发送电子邮件，但它在提交时向我发送了几份副本，几乎就像它的循环一样。我无法确定导致它循环的原因：

```
<div id="content">

    <?php 
    $email = $_POST['email'];
    $message = $_POST['message'];
    $firstName = $_POST['fname'];
    $lastName = $_POST['lname'];

    $errorForm = false;
    if(strlen($message) < 12){
        $errorForm = true;
        $errorMessage = true;
    }

    if(strlen($email) < 12){
        $errorForm = true;
        $errorMail = true;
    }

    if(strlen($firstName) < 3){
        $errorForm = true;
        $errorFname = true;
    }

    if(strlen($lastName) < 3){
    $errorForm = true;
        $errorLname = true;
    }

    if($errorForm == true ){?>

    <h3>Jane Doe</h3>
    <p>Owner, Founder &amp; Graphic Designer</p>
    <a href="mailto:info@example.com">info@example.com</a>

    <div id="contact">
            <form action="sender-contact.php" method="post">
              <fieldset>

                  <legend>There was an error in your submission. Please correct it.</legend>

                  <label for="fname">First Name</label>
                  <input type="text" size="20" maxlength="18" name="fname" id="fname" class="<?php if($errorFname == true){echo "error";}?>" value ="<?=$firstName?>"/>

                  <label for="lname">Last Name</label>
                  <input type="text" size="20" maxlength="18" name="lname" id="lname" class="<?php if($errorLname == true){echo "error";}?>"value ="<?=$lastName?>"/>

                  <label for="email"> eMail address</label>
                  <input type="text" size="40" maxlength="38" name="email" id="email" class="<?php if($errorMail == true){echo "error";}?>"value ="<?=$email?>"/>

                   <label for="message"> Your message</label>
                   <textarea name="message" id="message" rows="8" cols="60" class="<?php if($errorMessage == true) {echo "error"; }?>" ><?=$message?></textarea>

                  <input type="submit" value="Send" id="submit"  class="submit-button" />
              </fieldset>
          </form> 
    </div>

        <?php } 

        if($errorForm == false){

            $to = "info@example.com";
            $email = $_REQUEST['email'] ;
            $subject = "New Email from info@example.com" ;
            $message = $_REQUEST['message'] ;
            $headers = 'New message from '.$_POST['fname'].' '.$_POST['lname'].': \n';
            $headers .= $_POST['email'];
            mail($to, $subject, $message, $headers);
            ?>

         <?php
            echo ("<h3>\r\nWhen you buy from a small business, you aren't helping a CEO buy a 3rd vacation home. You are helping a little girl get dance lessons, a boy play hockey, a mom put food on the table, a dad pay a mortgage, or a student pay for college. Our customers are our neghbours and our shareholders...they are the ones we strive to make happy.<br/> <br/>Thank you for supporting small business and I'll get in touch with you within 72 hours!</h3>"); ?>

    <?php   } ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:56:40.577

在显示表单并运行 php 邮件功能之前，请尝试检查您的提交按钮是否被点击：

```
<?php

if (isset($_POST['theNameOfSubmitButton']))
{
    //create your variables from the form
      $email = $_POST['email'];
      $message = $_POST['message'];
      $firstName = $_POST['fname'];
      $lastName = $_POST['lname'];

      ....

    //send email
    if(mail("$to","$subject","$message","$headers"))
    {
    //if mail sends, say thank you
    echo ("<h3>\r\nWhen you buy from a small business, you aren't helping a CEO buy a 3rd vacation home. You are helping a little girl get dance lessons, a boy play hockey, a mom put food on the table, a dad pay a mortgage, or a student pay for college. Our customers are our neghbours and our shareholders...they are the ones we strive to make happy.<br/> <br/>Thank you for supporting small business and I'll get in touch with you within 72 hours!</h3>");

    // else, if mail fails, email web master, give "pretty" error message
      }
      else
      {
      echo "Message failed to send. sorry about that....";
      mail("webmaster@domain.com", "problem with email form", "fix this", From:admin@domain.com");
      }
    //else, the submit button was not clicked... display the form
    }

    <!-- code for form goes here --> 
```

使用这种方法将有助于避免很多“奇怪的事情”

# xml - 如何使这种 XSL 转换只考虑具有相同 id 的兄弟姐妹？

> ID：11183707
> 
> 赞同：1
> 
> 时间：2012-06-25T04:59:38.863
> 
> 标签：xml, xslt

我有这个 XSLT 2.0：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/> <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="region/*/*/*
         [deep-equal(.,preceding-sibling::*[name()=current()/name()]
                       [@id = current()/@id]
                       [../../@id = current()/../../@id][1])]" />
</xsl:stylesheet> 
```

所以基本上任何后续的重复项（具有相同的名称、id、方法和子项）都将被删除，直到它被**重置**（被视为唯一的或第一次被发现）

*如果具有相同和 id 的节点具有不同的方法，则会发生重置。*

为了更清楚，我有这个简化的例子作为说明：

```
<elem id="1" method="a" />
   <elem id="1" method="a" /> <!-- 1\. this is duplicate -->
   <elem id="1" method="b" /> <!-- 2\. this elem id=1 has different method, so it will be the reset point for elem id=1 -->
   <elem id="1" method="a" /> <!-- 3\. this will be treated as unique because it's reset now so we don't remove this-->
   <elem id="2" method="a" /> <!--4.-->
   <elem id="1" method="a" /> <!-- this is repetitive for 3 and it willl be removed -->
   <elem id="2" method="a" /> <!-- this is repetitive for 4 so we remove this-->
and will be removed --> 
```

**转换后将简化为：**

```
 <elem id="1" method="a" />
   <elem id="1" method="b" />
   <elem id="1" method="a" /> <!-- 3\. this will be treated as unique because it's reset now so we don't remove this-->
   <elem id="2" method="a" /> 
```

因此，如果它应用于我的 XML 输入：

```
<map>
    <region>
        <gridA id="1">
            <blockA id="01" method="build">                 
                <building1 id="x" method="build">
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be removed -->
                    <otherchild>a</otherchild>
                </building1>
            </blockA>    

            <blockA id="01">                 
                <building1 id="x" method="modify"> <!-- this will be the reset point -->
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be kept (prev node have same id but diff method so it's not considered as successive -->
                    <otherchild>a</otherchild>
                </building1>
            </blockA>    

            <blockA id="02">
                <building3 id="y" method="modify">
                    <otherchild>b</otherchild>
                </building3>
                <building2 id="x" method="demolish"/>
            </blockA>      

            <blockA id="01">                
                <building1 id="y" method="build"> <!-- this one will be kept (diff id) -->
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be removed -->
                    <otherchild>a</otherchild>
                </building1>
            </blockA>

            <blockA id="02">                
                <building3 id="y" method="modify"> <!-- this one will be removed -->
                    <otherchild>b</otherchild>
                </building3>
                <building2 id="x" method="demolish"/> <!-- this one will be removed -->
            </blockA>          
        </gridA>   

        <gridA id="2">
            <blockA id="01" method="build">                 
                <building1 id="x" method="build">
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be removed -->
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be kept (diff children) -->
                    <otherchild>b</otherchild>
                </building1>
            </blockA>                              
            <blockA id="01">                
                <building1 id="x" method="build"> <!-- this one will be removed -->
                    <otherchild>b</otherchild>
                </building1>
            </blockA> 
        </gridA>
        <gridB id="1">
            ...and so on..
        </gridB>
    </region>    
</map> 
```

这是预期的输出：

```
<map>
    <region>
        <gridA id="1">
            <blockA id="01" method="build">                 
                <building1 id="x" method="build">
                    <otherchild>a</otherchild>
                </building1>
            </blockA>    

            <blockA id="01">                 
                <building1 id="x" method="modify"> <!-- this will be the reset point -->
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be kept (prev node have same id but diff method) so it's not considered as successive -->
                    <otherchild>a</otherchild>
                </building1>
            </blockA>    

            <blockA id="02">
                <building3 id="y" method="modify">
                    <otherchild>b</otherchild>
                </building3>
                <building2 id="x" method="demolish"/>
            </blockA>      

            <blockA id="01">                
                <building1 id="y" method="build"> <!-- this one will be kept (diff id) -->
                    <otherchild>a</otherchild>
                </building1>
            </blockA>

            <blockA id="02"/>        
        </gridA>   

        <gridA id="2">
            <blockA id="01" method="build">                 
                <building1 id="x" method="build">
                    <otherchild>a</otherchild>
                </building1>

                <building1 id="x" method="build"> <!-- this one will be kept (diff children) -->
                    <otherchild>b</otherchild>
                </building1>
            </blockA>                              
            <blockA id="01"/>
        </gridA>
        <gridB id="1">
            ...and so on..
        </gridB>
    </region>    
</map> 
```

此外，如果被比较的两个节点不共享相同的“gridA”级别节点，则不应将它们视为要删除的重复节点。

我也考虑使用

```
<xsl:value-of select="count($this-node/(preceding-sibling::* | ../preceding-sibling::*[@id = $this-node/parent::*/@id]/*)[name() = $this-node/name()][@id = $this-node/@id][deep-equal(*, $this-node/*)][@method = $this-node/@method]) mod 2 = 1"/> 
```

作为我的重置算法，但第一个解决方案最好只需要调整它以在具有相同 ID 的兄弟姐妹上工作。（从示例中，它是`<blockA id="xx">`：）或者如果有人有更好的解决方案，我真的很想知道。

我希望任何人都可以在这个问题上启发我，因为这对我来说很难理解。

非常感谢，并为冗长的问题道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:15:20.550

看起来您只需要将轴从前同级更改为前级并测试相同的“gridA”级别父级。

试试这个 ...

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes"/> <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="region/*/*/*
         [deep-equal(.,preceding::*   (: Note axis! Look back even past 'block' level :)
            [name()=name(current())]   (: Compare with same name :)
            [@id = current()/@id]      (: ... and same id :)
            [../.. is current()/../..] (: ... but only within the same 'gridA' level :)
            [1] (: Get the first predecessor that satisfies these conditions. :)
         )]" />

</xsl:stylesheet> 
```

上述解决方案满足您发布的用例。

* * *

# 更新

我变了 ...

```
 ../.. = current()/../.. 
```

... 为了 ...

```
 ../.. is current()/../.. 
```

# java - onDraw() 中未更新的秒数

> ID：11183708
> 
> 赞同：0
> 
> 时间：2012-06-25T05:00:23.130
> 
> 标签：java, android, android-date

我有一个简单的图形应用程序，可以在屏幕上绘制一些东西。`invalidate()`以前，当我在`onDraw()`没有支票的情况下打电话时，我没有任何问题。在我的应用程序`onDraw()`中每秒调用多次（我通过日志了解到），但我不想每秒调用多次，因为我只想在每秒后更新屏幕。所以我尝试比较之前和当前的秒数——如果它们相同，我不会打电话`invalidate()`；如果第二个发生变化，我会打电话给`invalidate()`. 这是我的代码：

```
protected void onDraw(Canvas canvas) {         
    // Create date to check current second
    Date date = new Date();
    canvas.drawColor(Color.WHITE);

    drawArcs(canvas, mBigOval, mUseCenters[0], mPaints[0]); 

    //Get the current second 
    curSec = date.getSeconds();
    //compare if its same as lastSec which is updated in drawArcs() which i called before

    do {    
        Log.d("Graphics","curSec="+curSec+"  lastSec="+lastSec);
        curSec = date.getSeconds();
    } while(curSec == lastSec);

    Log.d("Graphics","Calling invalidate() and  count="+(++count));
    invalidate();
} 
```

使用上面的代码，如果我的应用程序在第 30 秒启动，则日志显示：

```
 06-25 10:25:52.257: D/Graphics(14711): curSec=30  lastSec=30 
```

上面的日志不断重复，curSec 和 lastSec 没有变化。为什么即使我每次循环通过时都更新它，第二个也不更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:14:56.833

您的`Date`对象已创建并设置为您实例化它时的当前时间：

```
Date date = new Date(); 
```

每次调用 时`date.getSeconds()`，您只是在同一个`Date`对象上获得秒数，其时间没有改变。

也就是说，您真正的问题是您正在调用`invalidate()`from `onDraw()`，强制另一个调用 to `onDraw()`（这会强制另一个......）。你不需要这样做；`onDraw()`每当视图变得无效时就已经调用了。如果您*尝试*制作动画（以 1 fps？），您可以使用带有`postDelayed()`SurfaceView 和另一个线程的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:20:38.440

我通过每次创建新对象及其现在工作来更改代码。

```
 do{ 
        Log.d("Filling","curSec="+curSec+"  lastSec="+lastSec);
        curSec = new Date().getSeconds();
        }while(curSec == lastSec); 
```

# javascript - 如何在 javascript 中创建受密码保护的应用程序？

> ID：11183710
> 
> 赞同：2
> 
> 时间：2012-06-25T05:01:35.363
> 
> 标签：javascript, firefox-addon

我使用 java 脚本制作了火狐插件。我想为这个插件提供密码保护。我可以在哪里永久存储用户密码？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:34:37.810

如果需要密码来向服务器验证用户身份，那么您应该使用[nsILoginManager](https://developer.mozilla.org/en/XPCOM_Interface_Reference/Using_nsILoginManager)来存储它。如果用户定义了主密码，密码将加密存储在磁盘上。如果您想保护扩展程序的用户界面不受用户影响，那么您将密码存储在哪里都没有关系 - 这种保护仅适用于没有经验的用户。例如，您可以使用[Preferences](https://developer.mozilla.org/en/Code_snippets/Preferences)来存储它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:20:23.560

最好的解决方案是存储在外部存储上。就像网站一样。您发送身份验证数据，服务器检查用户并返回真或假。这有一些问题。如果您想限制非注册用户的部分附加组件，那是不可能的。整个代码可供用户使用，他可以修改它。

如果您创建网站特定的附加/搜索数据（很可能在网站的 cookie 和首选项中），该数据对于单个用户来说是秘密的、不可预测的、唯一的和统一的。您可以对其进行哈希处理并将其用作密码。连同该特定网站的用户名。这样您就可以避免注册。

通过 HTTP 进行服务器通信并不太安全，但是，大多数网站仍然使用它。

如果您没有可用的外部服务器，则可以使用 SQLite 之类的本地存储，或者我只有一个密码，您可以使用about:config 下也提供的[首选项。](https://developer.mozilla.org/en/Adding_preferences_to_an_extension)但这些远非永久性。它一直存在，直到用户重新安装操作系统，不幸的是这很常见。

如果您希望封闭源代码隐藏存储模式，哈希生成或类似 XP-COM 组件可能会帮助您，但我不推荐，因为它真的很难维护（所有平台上的所有版本）。

# google-apps-script - 为什么 e.parameter.source 未定义？

> ID：11183713
> 
> 赞同：1
> 
> 时间：2012-06-25T05:01:51.540
> 
> 标签：google-apps-script

我试图找出回调函数的来源，但`e.parameter.source`尚未定义。

我用来创建回调事件的代码是：

```
var temp_handler = app.createServerHandler("do_things");
container.add(app.createButton(s_list[i][2]).setId("goto_"+s_list[i][1]).addClickHandler(temp_handler));
container.add(app.createLabel("goto_"+s_list[i][1])); 
```

`container`稍后添加到应用程序的位置。

被调用的函数的第一部分是：

```
function do_things (e)
{
  var app = UiApp.getActiveApplication();
  Logger.log(e.parameter);
  var src = e.parameter.source; 
```

由此，我已经能够说的`e.parameter`是：

```
{clientY=61, clientX=38, button=1, alt=false, eventType=click, screenY=278, ctrl=false, screenX=493, y=11, shift=false, meta=false, x=34} 
```

这不包括`source`. 我觉得这很奇怪，因为据我所知，同一文件中的其他回调函数已经能够`e.parameter.source`毫无问题地访问和使用。

有谁知道我在这个回调中做错了什么，导致源参数无法访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:51:12.167

其他答案对我来说没有多大意义。

首先，因为参数是由生成事件`source`的元素填充的，而不是它的.`id``name`

它也是自动填充的，不需要`addCallbackElement`，这是通过它们访问小部件内容所必需的`name`。最后，`name`为 a设置 a`label`仅在您为其设置标签时才有用，因为标签没有“内容”。

综上所述，我能想象的唯一问题是，如果您`id`在另一个小部件上设置相同并且它与您原来的小部件（按钮）相混淆。但我还没有测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T05:26:09.150

您只是忘记为 Label 小部件命名。e.parameter 返回的值按**名称**分配给小部件。

ID 用于在需要修改时从 UiApp 创建函数外部访问小部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T05:40:06.923

除了 Serge 回答的内容之外，您可能还想在处理程序上提供一个回调元素，使用

```
 ServerHandler.addCallbackElement() 
```

# android - 在 Android 中使用现有的 sqlite 表？

> ID：11183717
> 
> 赞同：1
> 
> 时间：2012-06-25T05:02:37.997
> 
> 标签：android, android-sqlite

在我的 Android 应用程序中，我想使用我现有的 sqlite 数据库。我遵循[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)本教程并成功复制数据库文件。但我的问题是我无法访问复制的数据库。任何人都可以检查我的代码并帮助我访问我的数据库吗？谢谢你..

这是我用来复制数据库的方法，

```
public class Databaseopenhelper extends SQLiteOpenHelper {

    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/com.basim.database/databases/";

    private static String DB_NAME = "db3";

    private SQLiteDatabase myDataBase; 

    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public Databaseopenhelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

        // Add your public helper methods to access and get content from the database.
       // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
       // to you to create adapters for your views.

} 
```

我想知道如何访问复制的数据库文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:51:38.770

检查这个方法。这样你就可以像往常一样透明地使用你的 SQLiteOpenHelper 实现。无特殊处理。
[使用带有 SQLiteOpenHelper 的预加载 sqlite 数据库](http://blog.kdehairy.com/2012/08/19/using-a-preloaded-sqlite-database-with-sqliteopenhelper/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:08:51.227

试试这个方法。

```
private DataBaseHelper dataBaseHelper;
    private SQLiteDatabase sqLiteDatabase;
sqLiteDatabase = dataBaseHelper.getReadableDatabase();
cursor = sqLiteDatabase.rawQuery("SELECT * FROM TABLE_NAME", null);
        if (cursor != null) {
            try {
                cursor.moveToFirst();
                do {
                    int abc=
                            cursor.getString(cursor.getColumnIndex("TABLE_COLOUM_NAME")),

                } while (cursor.moveToNext());
            } finally {
                cursor.close();
                sqLiteDatabase.close();
            }

        } 
```

谢谢

# ruby-on-rails - 修订控制如何在 quora 上起作用？数据库设计

> ID：11183720
> 
> 赞同：6
> 
> 时间：2012-06-25T05:02:49.160
> 
> 标签：ruby-on-rails, database-design, version-control, relational-database

好吧，我已经看到了一些插件来创建版本表来跟踪特定模型的修改，但不能像 quora 节目那样轻松完成

![在quora上更改主题照片](../Images/4e69868434cda36707bd47ce62f6bc8d.png)

到目前为止，我有一张这样的桌子：

*   **ID**
*   **item_type**：指定模型修订所指的内容：“主题”
*   **item_id**
*   **事件**：如果是：“已编辑、添加、还原、删除”
*   **who** : 谁触发了事件
*   **column**：值已更改的“主题”中的哪一列。“主题*。photo_url* ”
*   **新**：新值：“ [http://s3.amazonaws.../pic.png](http://s3.amazonaws.../pic.png) ”
*   **旧**旧值：“” [http://s3.amazonaws.../oldpic.png](http://s3.amazonaws.../oldpic.png) “
*   **revision_rel** : 指向过去的修订
*   **时间戳**

![在此处输入图像描述](../Images/66af6ccf7b8f8c4669cb6d9799db01a7.png)

有人可以给我一些关于这个设计的帮助和指导吗？我担心性能、错误的列、缺少的列等

```
id  | item_type | item_id |  event  |    who    | column |   new      |    old     | revision_rel |  date
________________________________________________________________________________________________________
1   |   Topic   |    2    |  edit   |   Luccas  |  photo | pic.png    | oldpic.png |    null      |  m:d:y
2   |   Topic   |    2    |  revert |   Chris   |  photo | oldpic.png | pic.png    |      1       |  m:d:y 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:14:17.790

有一些可用的宝石已经可以满足您的需求。你有没有调查过：

看看现有的宝石： [https ://www.ruby-toolbox.com/categories/Active_Record_Versioning](https://www.ruby-toolbox.com/categories/Active_Record_Versioning)

我正在使用经过审计的（以前是acts_as_audited）来处理非常相似的事情： [https ://github.com/collectiveidea/audited](https://github.com/collectiveidea/audited)

# mysql - MySQL：用于创建列数未知的表的键值与空列

> ID：11183725
> 
> 赞同：0
> 
> 时间：2012-06-25T05:03:17.843
> 
> 标签：mysql

我正在设计一个为用户保存大量信息的数据库。目前我需要存储 20 个不同的值，但随着时间的推移，我可能会添加越来越多的值。

我在 StackOverflow 上查看了类似的问题，但通常以提问者没有正确设计他的表格而告终。

因此，根据我在 StackOverflow 上看到的情况，我应该：

1.  创建一个包含许多空列的表并在需要时使用它们（这对我来说似乎很糟糕）
2.  创建一个用户表和一个信息表，其中信息是一个键值对：[user_id, key, value]
3.  你还有什么可以建议的吗？

请记住，这是针对 MySQL 数据库的，所以我理解不喜欢关系数据库上的键值表。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:07:55.610

嗯，我对这个问题有点困惑，但听起来你想为一个用户提供很多属性，对吧？并且将来您想添加更多？好吧，那不是只有某种 customer_attribute_ref 参考表，然后您可以通过插入参考表轻松添加更多内容，然后在客户表中您至少有三列：1.客户 ID 2.客户属性ID 3\. 客户属性值...

可能是我错过了你的问题。你能澄清一下吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:11:11.120

我建议 3\. 1 和 2 的混合体。也就是说，将您已经知道并且您知道您将经常查询的核心字段放入主表中。然后添加键值表以获得更模糊或扩展的属性。我认为这种方法平衡了保持表宽度相对较窄和最小化基本查询所需的连接数量的竞争目标。

您可以考虑替代或结合上述方法的另一种方法是某种 ETL 过程。也许您将键值表定义为应用程序添加数据的便捷方式；然后设置复制、触发器和/或每晚/每小时存储过程，以将数据转换为更适合查询和报告目的的形式。

确切的最佳方法应通过仔细规划和考虑应用程序的整个架构来确定。

# java - 数据库如何通过 Hibernate 与 jpa 注释的 pojo 类交互？

> ID：11183726
> 
> 赞同：0
> 
> 时间：2012-06-25T05:03:30.560
> 
> 标签：java, mysql, hibernate, jpa, jpa-2.0

我对 JPA 注释 POJO 类中的 getter 和 setter 如何通过 Hibernate 与建议的 MySQL 数据库交互感到有些困惑。

我了解您可以拥有例如以下内容：

```
@Entity
@Table(appliesTo = "users")
public class UserDM implements UserIF, Serializable {

  private static final long serialVersionUID = 1L;
  private long              id;
  private String            name;
  private Date              createDate;

  @Id  
  @Column(name="id")  
  @GeneratedValue(strategy=GenerationType.AUTO)
  public long getId() {
      return id;
  }

  public void setId(long id) {
    this.id = id;
  }

  public String getName() {
    return name;
  }

  public void setName(final String n) {
    name = n;
  }

  public Date getCreateDate() {
    return createDate;
  }

  public void setCreateDate(final long time) {
    createDate = new Date(time);
  }
} 
```

*   为什么*自动 ID 生成策略*与**Getter**相关联？

*   当存储新用户时，该方法实际上如何*自动增加 ID ？*

*   *操作顺序是*什么？POJO是通过setter（或者可能是构造函数？）填充的，然后hibernate通过getter获取信息，然后存储到db中？

*   让我的“getCreateDate”方法返回一个日期是个好主意，还是最好让 pojos 中的字段映射到 MySQL 友好的字段？如果我想从时间戳 ms 值中获取 Date 对象，那么最好的方法是使用瞬态映射函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T06:45:13.280

> 为什么自动 ID 生成策略与 Getter 相关联？

大多数时候，这是一个品味问题。您可以将注释放在字段或访问器（getter）上，这取决于您喜欢的方式，只要它是一致的（总是在方法上，或总是在属性上）。通过将其设置为属性，Hibernate 将使用反射来访问该属性（它并不像听起来那么糟糕）。通过将其设置为方法，Hibernate 将使用它而不是反射。

> 当存储新用户时，该方法实际上如何自动增加 ID？

不确定您想要答案的详细程度，但要简短：
Auto 将为您正在使用的数据库服务器使用最佳的自动增量策略。它可能是 Sybase/SQLServer 的“身份”，它可能是 Oracle 的“序列”，或者它可能是 MySQL 的“自动增量”。所有这些情况的共同点是，在数据库生成 ID 之前，Hibernate 不会知道 ID。触发“插入”后，Hibernate 将使用标准 JDBC 方法访问[“生成的 id”](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#getGeneratedKeys%28%29)

> 操作顺序是什么？POJO是通过setter（或者可能是构造函数？）填充的，然后hibernate通过getter获取信息，然后存储到db中？

同样，我不知道您想要哪个级别的详细信息，但是是的，这就是顺序。您填充 POJO 并调用 EntityManager 上的 persist 方法，将此 POJO 作为参数传递。然后 Hibernate 将调用 getter（或访问属性）并将此数据发送到数据库。

> 让我的“getCreateDate”方法返回一个日期是个好主意，还是最好让 pojos 中的字段映射到 MySQL 友好的字段？如果我想从时间戳 ms 值中获取 Date 对象，那么最好的方法是使用瞬态映射函数吗？

Try to keep your application "database agnostic". So, don't make it "mysql friendly" if you don't really need. In general, using a java.util.Date in a field mapped with `@Temporal(TIMESTAMP)` would do, but if you need more "powerful" date/time objects, like *Joda-time*, you can also use it (as long as you tell Hibernate how to use it).

# mysql - 如何解决 MySQL max_user_connections 错误

> ID：11183727
> 
> 赞同：9
> 
> 时间：2012-06-25T05:03:39.080
> 
> 标签：mysql

当我尝试登录 phpMyAdmin 时出现以下错误。

用户*** * 已经有超过 'max_user_connections' 个活动连接

谁能让我知道如何从 MySQL 服务器端关闭这些数据库连接？

感谢您的时间！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T06:38:31.553

阅读[max_connections](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_connections)文档来解决您的问题

> 如果客户端在尝试连接到 mysqld 服务器时遇到 Too many connections 错误，则所有可用连接都被其他客户端使用。
> 
> 允许的连接数由 max_connections 系统变量控制。当 MySQL 与 Apache Web 服务器一起使用时，默认值为 151 以提高性能。要支持更多连接，请将 max_connections 设置为更大的值。

首先：检查您当前的数据库 max_connection 变量

```
SHOW VARIABLES LIKE 'max_connections';
+-----------------+-------+
| Variable_name   | Value |
+-----------------+-------+
| max_connections | 151   |
+-----------------+-------+ 
```

然后尝试使用以下运行命令增加 max_connection 参数：

```
 SET GLOBAL max_connections = 300; 
```

或者在位于 /etc/my.cnf 的 my.cnf 中设置此参数

```
vi /etc/my.cnf
max_connections = 300 
```

**最后：重启mysql服务**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-13T15:14:01.137

你最好的选择是增加`max_connections`。对于服务于多个不同 Web 应用程序（原始 php、WordPress、phpBB）的 MySQL 实例，您可能需要至少 60 的值。

发出这个命令，你会发现你有多少全局连接可用：

```
show global variables like '%connections%' 
```

您可以像这样找出在任何给定时刻正在使用的连接数：

```
show status like '%connected%' 
```

您可以像这样找出每个连接在做什么：

```
show full processlist 
```

如果我是你，我会尝试至少 100 个连接的全局值。如果您无权执行此操作，您的服务提供商应该能够帮助您。它需要在`my.cnf`MySQL 的文件配置中完成。不要把它设置得太高，否则你的 MySQL 服务器进程会吞噬你所有的 RAM。

第二种方法允许您将这些整体连接分配给不同的 MySQL 用户。如果您的每个 Web 应用程序都有不同的 MySQL 用户名，那么这种方法将适合您。这种方法写在这里。[https://www.percona.com/blog/2014/07/29/prevent-mysql-downtime-set-max_user_connections/](https://www.percona.com/blog/2014/07/29/prevent-mysql-downtime-set-max_user_connections/)

控制这个问题的最终方法更加微妙。您可能正在使用 Apache Web 服务器作为底层技术。您可以*减少*同时运行的 Apache 任务的数量，以*提高*吞吐量。那是因为 Apache 将请求排队。如果它有几个任务有效地通过队列，那通常比很多任务更快，因为竞争更少。它还需要更少的 MySQL 连接，这将解决您的直接问题。这在这里解释：[Restart Mysql automatically when ubuntu on EC2 micro instance kill it when running out of memory](https://stackoverflow.com/questions/17251240/restart-mysql-automatically-when-ubuntu-on-ec2-micro-instance-kills-it-when-runn/17251878#17251878)

顺便说一句，像 WordPress 这样的网络应用程序使用持久连接池。也就是说，它们建立与 MySQL 数据库的连接，保持它们打开并重用它们。如果您的应用程序很忙，则每个连接的生命周期应该是几分钟。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-16T02:05:46.160

这是由于 mysql 配置中指定的限制，系统变量`max_user_connections`。

### 解决方案

杀死卡在后端的查询只是我建议的一个解决方案，如果它是一个 SELECT 查询。不会终止更改数据的查询，例如 UPDATE/DELETE/INSERT。

其次，您可以使用该命令`mysqladmin processlist`检查 mysql 内部发生了什么。

如果锁定导致您的问题，您可以检查您正在使用哪个引擎并将其更改为另一个。[IBM关于表锁](https://www.ibm.com/support/knowledgecenter/SSPK3V_6.5.0/com.ibm.swg.im.soliddb.sql.doc/doc/table.locks.html)的 SolidDB文档可能会对您有所帮助。尽管这可能还有另一个原因。（例如，您的查询可能由于未优化的查询而花费了太长时间，或者表大小太大，或者您有一个垃圾邮件数据库）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-09T12:03:37.173

首先，这是一个 hack，但可以工作，尤其是在共享主机上。
有时我们都有坏“邻居”，对吧？

如果您有权访问您的 /etc/，则在您的 my.cnf 中或通过信息模式将限制从 30 增加到 50。

1.  要忽略访问者可能看到的错误消息，请使用`@mysql_connect()`.

2.  如果MUC超过30个，使用“ `or die()`”语句停止查询。

3.  `die(header(location: THIS PAGE))`用并确保替换“或死”信息`mysql_close()`；

是的，它会导致页面加载延迟。但最好加载而不是白屏死机 - 或者访问者不了解的更糟糕的错误消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-01T18:34:55.240

看起来查询卡在服务器上。重新启动，一切都会好起来的。如果您使用的是共享主机，请联系您的主机提供商，他们会修复它。我是 namecheap 用户，他们解决了它。

# jquery - jQuery UI datetimepicker 更改文本中显示的日期和时间格式

> ID：11183730
> 
> 赞同：3
> 
> 时间：2012-06-25T05:03:44.947
> 
> 标签：jquery, jquery-ui, datetimepicker

jQuery：[http ://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

用户更改时间后，文本字段显示为 20120625 122900。

我想更改 20120625122900 的格式，日期和时间之间没有空格。

谁能提供一种显示我想要的格式的好方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T15:58:02.433

```
<script type="text/javascript">
    $(function(){  

       // $("#datepicker").datepicker();
        $("#datepicker").datetimepicker(
                {
                    changeMonth: true,
                    changeYear: true,
                    timeFormat: 'hhmm',
                    showSecond: false,
                    dateFormat:'ymmdd',
                    separator: ''
                });

        //$('#datepicker').datetimepicker({
            //altField: "#alt_example_4_alt",
            //altFieldTimeOnly: false ,
            //timeFormat: 'hhmm' ,
            //dateFormat:'ymmdd'
        //});

    });

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:18:03.377

[在github repo](https://github.com/trentrichardson/jQuery-Timepicker-Addon/blob/master/src/jquery-ui-timepicker-addon.js#L94)中检出这一行。

如果你改变它，`''`它应该可以解决问题。

# grails - 将 grails hasMany 从 LinkedHashSet 更改为 ArrayList

> ID：11183733
> 
> 赞同：0
> 
> 时间：2012-06-25T05:04:28.810
> 
> 标签：grails, arraylist, grails-orm, has-many, linkedhashset

我有以下内容：

```
class A{

    static hasMany = [b: B]
} 
```

Grails 生成属性 b 为 a 的类`LinkedHashMap`。我想配置 Grails 以生成一个`ArrayList`代替。

我知道这可以通过显式编写列表来完成：

```
class A{

    static hasMany = [b: B]

    List<B> b = new ArrayList<B>()
} 
```

但我正在寻找一种通过一些外部配置来实现这一目标的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:36:34.953

这是不可配置的 - 唯一的解决方案是像您在示例中所做的那样声明类型列表的属性。

# c++ - Poco 在 SMTPClientSession.login 之后停止

> ID：11183738
> 
> 赞同：2
> 
> 时间：2012-06-25T05:05:57.100
> 
> 标签：c++, email, poco-libraries

我刚开始使用 Poco 库并尝试创建一个电子邮件程序（我对此几乎一无所知）。以下是我的代码（除了我目前遇到的问题之外，它可能还有其他问题，但我刚刚开始研究它）

```
 int main(int argc, char** argv)
{
    Poco::Net::SocketAddress add("smtp.gmail.com:465");
    Poco::Net::StreamSocket sock(add);
    Poco::Net::SMTPClientSession sess(sock);
    std::cout << "-";
    sess.login(
            "gmail.com",
            Poco::Net::SMTPClientSession::AUTH_LOGIN,
            "----",
            "----"
    );
    Poco::Net::MailMessage msg;
    Poco::Net::MailRecipient resp(Poco::Net::MailRecipient::PRIMARY_RECIPIENT,"michaelrgoldfine@gmail.com");
    msg.addRecipient(resp);
    std::string content("HELP SOS");
    msg.encodeWord(content);
    std::cout << msg.getContent() << "-";
} 
```

当我进入调试器时，它运行良好，直到它到达 sess.login 然后突然代表我在代码中的小条消失但程序继续运行（我没有足够的经验知道这意味着什么）。我放入的 cout 内容都没有实际打印，调试器只是越过了那条线，但什么也没显示。过了一会儿，这出现了：

```
terminate called throwing an exception 
```

发生什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:18:46.210

您正在尝试通过 TLS 使用 SMTP（传递给 的 465 端口`SocketAddress`）。您必须一次性学习 (1) POCO 中的 TLS 和证书处理，然后再专注于 (2) 您的目标：发送电子邮件。

我建议从更简单的例子开始学习 POCO。`samples`您可以在 POCO 源代码的各个目录中找到示例代码。

我认为您的代码只是挂在 TLS 握手上，因为它不知道该怎么做。

这些是您在查看解决方案**之前**应该做的修复：

1.  将您的代码放在一个`try/catch`块中。POCO 使用异常。
2.  替换`StreamSocket`为[`SecureStreamSocket`](http://pocoproject.org/docs/Poco.Net.SecureStreamSocket.html)。
3.  正确初始化的最简单方法`SecureStreamSocket`是通过`Application`类。请参阅[应用程序](http://pocoproject.org/slides/190-Applications.pdf)幻灯片和`Util/samples/SampleApp/src/SampleApp.cpp`.
4.  [`SSLManager`](http://pocoproject.org/docs/Poco.Net.SSLManager.html)有关如何正确告诉应用程序使用哪些证书，请参阅文档。
5.  不要为该`login()`方法指定主机名。主机名是可选的，应该是客户端主机名，而不是服务器（请参阅 SMTP RFC）。
6.  记得实际发送消息！你的代码没有发送它:-)

好的，现在是运行代码。我将第 4 步和第 6 步留作练习，但此代码至少会运行 TLS 握手，会告诉您它无法验证服务器的证书，如果您在终端上对证书问题回答“是”，它将失败SMTP 身份验证。

```
class MiniApp : public Poco::Util::Application {
    int main(const vector <string>& args) {
        try {
            Poco::Net::SocketAddress add("smtp.gmail.com:465");
            Poco::Net::SecureStreamSocket sock(add);
            Poco::Net::SMTPClientSession session(sock);
            session.login(Poco::Net::SMTPClientSession::AUTH_LOGIN, "user", "pw");
            Poco::Net::MailMessage msg;
            Poco::Net::MailRecipient recipient(Poco::Net::MailRecipient::PRIMARY_RECIPIENT,
                                    "michaelrgoldfine@gmail.com");
            msg.addRecipient(recipient);
            string content("HELP SOS");
            msg.encodeWord(content);
        } catch (Poco::Exception& e) {
            cout << "Error: " << e.displayText() << endl;
            return -1;
        }
        return 0;
    }
};

POCO_APP_MAIN(MiniApp) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T02:15:04.880

是的，所以我在尝试使用 smtp.gmail.com 时遇到了 login()。这是与使其工作的 SSL 会话通信的摘录。

```
string host("smtp.gmail.com")
Poco::UInt16 port = 587;

SecureSMTPClientSession session(host, port);

session.open();

Poco::Net::initializeSSL();

SharedPtr<InvalidCertificateHandler> ptrHandler = new AcceptCertificateHandler(false);

Context::Ptr ptrContext = new Context(Context::CLIENT_USE, "", "", "", Context::VERIFY_RELAXED, 9, true, "ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH");

SSLManager::instance().initializeClient(0, ptrHandler, ptrContext);

try
{
  // SSL
  session.login();
  if (session.startTLS(ptrContext))
  {
    session.login(SMTPClientSession::AUTH_LOGIN, "user@gmail.com", "yourpassword");
    session.sendMessage(message);
  }
  session.close();
  Poco::Net::uninitializeSSL();
}
catch (SMTPException &e)
{
  cout << e.message() << endl;
  session.close();
  Poco::Net::uninitializeSSL();
  return 0;
} 
```

原始来源：

[http://www.axistasoft.sg/tutorials/cpp/poco/item/sending-email-messages-using-smtp-protocol](http://www.axistasoft.sg/tutorials/cpp/poco/item/sending-email-messages-using-smtp-protocol)

# bash - Bash：如何使用 $! 当一个进程仍在运行时？

> ID：11183742
> 
> 赞同：0
> 
> 时间：2012-06-25T05:06:25.587
> 
> 标签：bash

我目前正在启动一个 Java 进程，并尝试使用 获取其 PID `$!`，并将其写入文件。问题是，当我启动 Java 进程时，它会进入自己的“控制台”。（我不确定这叫什么）。

`$!`在我停止进程并退出其“控制台”之前，我无法将其写入文件，此时 PID 将无用。

我将如何启动 Java 进程，并在不结束它的情况下获取它的 PID？我正在使用`echo $! > pidfile.pid`将 Java 进程的 PID 写入文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T20:35:17.190

编写小型 Java 包装器启动器*java.sh*（例如）：

```
#!/bin/bash
pidfile=/some/path/pidfile.pid
echo $$ > $pidfile
exec java $@ 
```

简而言之，shell 脚本会写出它的 PID，然后用您传递给 shell 脚本的所有参数将自己替换为 java 进程。然后只需在脚本中用*java.sh替换**java* ......当然你可以通过导出的变量传递*pidfile 。*

# javascript - 如何从网站下载 Javascript 数组？

> ID：11183744
> 
> 赞同：2
> 
> 时间：2012-06-25T05:06:56.577
> 
> 标签：javascript, arrays, variables, screen-scraping

在我正在访问的网站中，有一个包含 500 个元素的 javascript 数组（var arrayname），但该网站只给了我一次显示十个元素的选项。

我试过使用 Chrome 控制台：我可以输入“arrayname”，它会显示整个数组的树，但不能以一种我可以有效提取我需要的信息的方式。

如何下载数组以便我可以使用解析器自己提取每个元素中的数据？我的目标只是将数组的内容放入一个文本文件中，然后我可以将其放入 Excel 中。

- 编辑 -

该数组实际上是一个由 5 元素数组组成的数组。控制台输出还将 500 个元素的数组划分为较小的数组范围，您必须单击才能进入。我会显示屏幕截图，但我还没有足够的声誉！这是输出的文本，未格式化。

```
> arrayname
Array[500]
[0 … 24]
[0 … 4]
0: Array[5]
0: "data1" //sample output - this is the element i actually want to extract
1: "data2" //sample output
2: "data3" //sample output
3: "data4" //sample output
4: "data5" //sample output
length: 5
__proto__: Array[0]
1: Array[5]
2: Array[5]
3: Array[5]
4: Array[5]
[5 … 9]
[10 … 14]
[15 … 19]
[20 … 24]
[25 … 49]
[50 … 74]
[75 … 99]
[100 … 124]
[125 … 149]
[150 … 174]
[175 … 199]
[200 … 224]
[225 … 249]
[250 … 274]
[275 … 299]
[300 … 324]
[325 … 349]
[350 … 374]
[375 … 399]
[400 … 424]
[425 … 449]
[450 … 474]
[475 … 499]
length: 500
__proto__: Array[0] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T05:11:56.563

在 chrome 控制台中，您可以使用内置的复制命令：

```
copy(arrayname.join('\n')) 
```

您将数组复制到剪贴板，每行 1 个元素。

# python - Python 构造字典数据类型？

> ID：11183750
> 
> 赞同：1
> 
> 时间：2012-06-25T05:09:09.780
> 
> 标签：python, dictionary

我是 python 新手，刚刚遇到了这个语句

```
data = dict( (k, v) for k, v in data.items() if v != 'null') 
```

我真的不知道他们在这里做什么来构建一个字典。你能给我解释一下吗？为什么在 dict() 中使用 for 循环以及为什么 if 紧随其后？我在 python 文档中没有看到这样的东西。

多谢你们

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T05:16:53.860

该代码使用[`dict`](http://docs.python.org/library/stdtypes.html#mapping-types-dict)构造函数来创建一个新字典。构造函数可以采用[可迭代](http://docs.python.org/glossary.html#glossary)的键值对来初始化新字典。正如其他人指出的那样，示例代码有一个[生成器表达式](http://docs.python.org/howto/functional.html#generator-expressions-and-list-comprehensions)，用于创建这个可迭代的键值对。

生成器表达式有点像列表，可以这样重写：

```
mylist = []
for k, v in data.items():
    if v != 'null':
        mylist.append((k, v)) 
```

但它从来没有真正创建一个列表，它只是在 dict 构造函数处理它时依次产生每个值。

至于为什么在`if`循环之后出现，这是python开发人员选择的语法，所以你必须问他们。但请注意，在我重写的生成器表达式中，该`if`语句位于 for 语句内部（即之后）。

我已经链接到[python 文档中关于生成器表达式](http://docs.python.org/howto/functional.html#generator-expressions-and-list-comprehensions)的部分，但应 unkulunkulu 的要求，这里还有一些：

1.  Carl 的 Groner[对列表理解的介绍](http://carlgroner.me/Python/2011/11/09/An-Introduction-to-List-Comprehensions-in-Python.html)
2.  Fredrik Haard 的[如何（有效地）解释列表理解](http://css.dzone.com/articles/how-effectively-explain-list)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T05:13:43.027

to 的参数`dict()`是一个生成器表达式，它产生由从 中提取的键、值对（即`(k, v)`）组成的元组`data.items()`。`dict()`内置函数可以从此类元组的列表或序列中自动构造字典对象，例如：

```
>>> kvs = [('a', 1), ('b', 2)]
>>> dict(kvs)
{'a': 1, 'b': 2} 
```

`if v != 'null'`限定符指示生成器忽略/跳过值（即元组中的第二项）等于的那些元素（`'null'`更准确地说，它只产生值不等于的那些对`'null'`）。

有关生成器表达式的更详细说明，请参阅[PEP 289](http://www.python.org/dev/peps/pep-0289/)。

# asp.net - 如何从文件上传检查图像大小以及如何检查所选文件是否为图像

> ID：11183753
> 
> 赞同：-1
> 
> 时间：2012-06-25T05:09:26.223
> 
> 标签：asp.net, sql-server-2008, stored-procedures

我的网页有文件上传选项..它必须检查两个条件。1）所选项目是否为图像..如果图像表示则仅允许用户执行，否则不会。2）检查选定的图像尺寸（它只允许有限的尺寸）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:17:05.733

要判断文件是否为图像，只需查看扩展名 (System.File.Path.GetExtension)。您可以轻松调整图像大小并确保它不超过特定大小：

```
public static Bitmap CreateThumbnail(Bitmap loBMP, int lnWidth, int lnHeight)
{
    System.Drawing.Bitmap bmpOut = null;
    try
    {
        ImageFormat loFormat = loBMP.RawFormat;

        decimal lnRatio;
        int lnNewWidth = 0;
        int lnNewHeight = 0;

        if (loBMP.Width < lnWidth && loBMP.Height < lnHeight)
            return loBMP;

        if (loBMP.Width > loBMP.Height)
        {
            lnRatio = (decimal)lnWidth / loBMP.Width;
            lnNewWidth = lnWidth;
            decimal lnTemp = loBMP.Height * lnRatio;
            lnNewHeight = (int)lnTemp;
        }

        else
        {
            lnRatio = (decimal)lnHeight / loBMP.Height;
            lnNewHeight = lnHeight;
            decimal lnTemp = loBMP.Width * lnRatio;
            lnNewWidth = (int)lnTemp;
        }

        bmpOut = new Bitmap(lnNewWidth, lnNewHeight);
        Graphics g = Graphics.FromImage(bmpOut);
        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
        g.FillRectangle(Brushes.White, 0, 0, lnNewWidth, lnNewHeight);
        g.DrawImage(loBMP, 0, 0, lnNewWidth, lnNewHeight);
    }
    catch
    {
        return null;
    }

    return bmpOut;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:40:22.157

1.  您可以使用 RegularExpressionValidator 使其变得简单

    ```
     <asp:FileUpload ID="UploadFile" runat="server" />
     <asp:RegularExpressionValidator id="UpLoadValidator" runat="server" ErrorMessage="Upload Images only." ValidationExpression="^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))(.jpg|.png|.bmp|.jpeg|.gif)$" ControlToValidate="FileUpload1"> </asp:RegularExpressionValidator> 
    ```

2.  在 web.config 中设置图像最大尺寸

    ```
    <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="524288"/>
      </requestFiltering>
    </security>
    </system.webServer> 
    ```

# android - 专为 Android 设计的 Gdata 库

> ID：11183754
> 
> 赞同：1
> 
> 时间：2012-06-25T05:09:51.293
> 
> 标签：android, google-docs-api, gdata-api, google-drive-api

```
import com.google.gdata.client.docs.DocsService;
import com.google.gdata.util.AuthenticationException;
import com.google.api.client.googleapis.*;
import com.google.api.client.googleapis.auth.clientlogin.*;
import com.google.api.client.googleapis.json.*;
import com.google.api.client.http.*;

import java.io.*;

public class AccountFeedExample {
  public static void main(String[] args) throws IOException, AuthenticationException {
      DocsService service = new DocsService("Document List Demo");
      service.setUserCredentials("username","password");
    }
  } 
```

我正在尝试将上述代码作为 Android 应用程序运行，但 apk 崩溃了。我认为 Gdata 库是 Java 特定的。我可以在我的应用程序中使用任何 Gdata Android 特定库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:31:50.283

您应该使用 Google Drive 客户端库（而不是 Google 文档列表客户端库）。正如在其他几个问题中所讨论的，GData 客户端库在 Android 上运行不佳。

Google Drive API 的文档：[https ://developers.google.com/drive/](https://developers.google.com/drive/)

您需要下载 Drive 特定的包装：[http ://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)

以及具有依赖项的库的核心：[http ://code.google.com/p/google-api-java-client/downloads/list](http://code.google.com/p/google-api-java-client/downloads/list)

# .net - 如何将带有 JSON 的 .net Web 服务更改为 wcf 服务？

> ID：11183757
> 
> 赞同：0
> 
> 时间：2012-06-25T05:10:56.973
> 
> 标签：.net, json, wcf, web-services

我想将我以前的 .NET Web 服务更改为 WCF 服务，因为我希望我的 Web 服务为我的 android 应用程序发布纯 JSON 变量。这是我到目前为止所做的，但我仍然遇到错误。如何修复此代码？

我的 IService.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.ServiceModel.Activation;
using System.Configuration;
using System.Data.SqlClient;
using System.IO;
using System.Runtime.Serialization.Json;

public class Service : IService
{
    [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, UriTemplate = "tampil")]
    public String GetReport()
    {
        List<Report> reports = new List<Report>();
        string connectionString = ConfigurationManager.ConnectionStrings["ConnWf"].ConnectionString;
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            string sql = "select type, sum(OrderQty) as total from tbl_weeklyflash_ID where type <> 'NULL' group by type";
            connection.Open();

            SqlCommand command = new SqlCommand(sql, connection);
            SqlDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                Report report = new Report();
                report.type = reader["type"].ToString();
                report.total = reader["total"].ToString();
                reports.Add(report);
            }
        }

        MemoryStream stream = new MemoryStream();
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(Report[]));
        serializer.WriteObject(stream, reports.ToArray());
        stream.Position = 0;
        StreamReader streamReader = new StreamReader(stream);
        return streamReader.ReadToEnd();
    }
} 
```

我的Service.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.ServiceModel.Activation;
using System.Configuration;
using System.Data.SqlClient;
using System.IO;
using System.Runtime.Serialization.Json;

public class Service : IService
{
    [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, UriTemplate = "tampil")]
    public String GetReport()
    {
        List<Report> reports = new List<Report>();
        string connectionString = ConfigurationManager.ConnectionStrings["ConnWf"].ConnectionString;
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            string sql = "select type, sum(OrderQty) as total from tbl_weeklyflash_ID where type <> 'NULL' group by type";
            connection.Open();

            SqlCommand command = new SqlCommand(sql, connection);
            SqlDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                Report report = new Report();
                report.type = reader["type"].ToString();
                report.total = reader["total"].ToString();
                reports.Add(report);
            }
        }

        MemoryStream stream = new MemoryStream();
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(Report[]));
        serializer.WriteObject(stream, reports.ToArray());
        stream.Position = 0;
        StreamReader streamReader = new StreamReader(stream);
        return streamReader.ReadToEnd();
    }
} 
```

# php - 将图像存储在数据库中与存储在文件系统中

> ID：11183758
> 
> 赞同：1
> 
> 时间：2012-06-25T05:10:57.457
> 
> 标签：php, database, image, blob

我正在开发一个在线购物网站，它也会有产品图片。我对是否应该存储图像感到困惑。如果我将这些图像存储在数据库中，图像 url 必须保存到数据库中，如果我以 blob 格式存储图像，我必须在使用 php 之前对其进行解码。谁能告诉哪一个会是更好的选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T05:16:34.013

我认为最好的解决方案是保持数据库中没有任何图像。以下是一些原因 -

*   数据库将很快开始增长
*   文件系统适合存储文件
*   你已经付出了额外的努力来用 PHP 解码它们（资源开销）
*   我研究过的许多数据库都将图像保存在文件系统中（WordPress 源代码）

希望能帮助到你

# php - Joomla 2.5 隐藏 div

> ID：11183760
> 
> 赞同：0
> 
> 时间：2012-06-25T05:11:25.783
> 
> 标签：php, css, html, joomla2.5

如果打开的 URL 不是基本 URL 或主页，我会尝试在模板中隐藏 div。现在，当用户打开链接时，div 应该是不可见的。我可以在 Joomla 2.5 中使用 php 检测并执行此操作吗？我该如何执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:23:07.483

使用 javascript 试试这个：

```
if(window.location.href.indexOf("base url")>0){
    $('something').show();
}
else{
        $('something').hide();
} 
```

演示小提琴：http: [//jsfiddle.net/surendraVsingh/ZHsH7/](http://jsfiddle.net/surendraVsingh/ZHsH7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:23:11.947

试试下面的。

```
if(JRequest::getVar('view') == "frontpage" && JRequest::getVar('option') == 'com_content) {
    //您正在查看主页！
}

```

注意：即使您安装了一个名为的组件，这也不会中断`frontpage`

替代

```
$app = JFactory::getApplication();
$menu = $app->getMenu();
if ($menu->getActive() == $menu->getDefault()) {
    echo '这是首页';
}

```

[http://docs.joomla.org/How_to_determine_if_the_user_is_viewing_the_front_page](http://docs.joomla.org/How_to_determine_if_the_user_is_viewing_the_front_page)

# android - java.lang.RuntimeException 试图使用回收的位图

> ID：11183761
> 
> 赞同：0
> 
> 时间：2012-06-25T05:11:37.933
> 
> 标签：android, bitmap

运行此代码时出现此错误。它说`java.lang.RuntimeException trying to use recycled bitmap`。他们说我应该使用`Bitmap.recycle()`，但我遇到了这个错误。我的代码正确吗？

这是我的代码：

```
ImageView image = (ImageView) findViewById(R.id.imageView1);
Bitmap bMap = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
image.setImageBitmap(bMap);
bMap.recycle(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:18:02.637

看看这段代码：

```
if (null != bMap && !bMap .getBitmap().isRecycled()) 
{
    bMap .getBitmap().recycle();
} else {
    log("bitmap is already recycled");
} 
```

我想它会对你有所帮助。

# http - .htaccess SSL 单域

> ID：11183766
> 
> 赞同：0
> 
> 时间：2012-06-25T05:12:08.183
> 
> 标签：http, .htaccess, ssl, https

我有 Godaddy 托管，我正在使用它来托管多个域。通过此托管，我获得了免费的标准（一个域）SSL 证书。我在我的主域上设置了它，一切都很好，[https://www.primarydomain.com](https://www.primarydomain.com)有效。此外，我的辅助站点仍然可以使用常规 http。

[（你也知道，当我访问https://secondarydomain.com](https://secondarydomain.com)时，大多数浏览器都会告诉我返回，坏站点，可能会损坏计算机等，因为证书仅适用于主证书。）

所以我想做的是当用户访问我的主站点时，htaccess 会使用以下代码自动更改为 https：

```
RewriteEngine On
RewriteCond %{HTTPS} !on
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

这行得通，一切都很好，但是由于辅助域从第一个域的目录中获取内容，因此 .htaccess 会影响我拥有的所有域，因此尝试将 https 添加到我的辅助域。（告诉用户离开网站）

我将如何告诉 .htaccess 仅在我的主域上更改为 https 并仅将其与我的辅助域的 http 分开？

如果您不知道我在说什么，您可以立即看到我的主域如何更改为 https：[http ://www.alexkafer.com](http://www.alexkafer.com)

然后我的辅助域之一：http: [//www.codingapple.com](http://www.codingapple.com)也尝试更改为 https，即使它不是为该域创建的。我保证我的辅助不会损害您的计算机，只是证书不适用于域 codingapple.com 这就是我要解决的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:23:28.757

添加一个`RewriteCond`以检查网址。

例如，`HTTPS`如果不是本地连接，以下代码将打开。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^(127\.0\.0\.1|localhost)$
RewriteCond %{HTTPS} !on
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:35:59.173

感谢@Scott S 的代码。它工作得很好，除了它做了我想要的相反。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^(127\.0\.0\.1|localhost)$
RewriteCond %{HTTPS} !on
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

上面的代码将每个辅助域更改为 HTTPS，而不是将主域更改为 HTTPS。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(127\.0\.0\.1|localhost)$
RewriteCond %{HTTPS} !on
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

我删除了！在 ^(127.0.0.1|localhost)$ 之前，现在它正在做我需要的！

# php - xml 数据转换成 php 或 js

> ID：11183768
> 
> 赞同：0
> 
> 时间：2012-06-25T05:12:15.597
> 
> 标签：php, javascript, xml

我正在编辑一个网页并遇到了一个 xml 问题。目前，该网站使用包含一些信息的 xml 文件，该文件被发送到 Flash 应用程序，该应用程序在滚动标题中显示该信息。所以 xml 由一个`<newsTicker>`标签和标签内的多个项目组成：

```
<item>
<header>
FEATURED ARTIST
</header>
<date/>
<body>
Some Artist
</body>
<link>
www.somelink.com
</link>
<graphic>
AnImage.gif
</graphic>
</item> 
```

我应该做的是编写一个 javascript 代码来获取此信息，并以相同的方式显示它。唯一的问题是我不知道如何将每个项目从 xml 解析为 javascript，因为我从未使用过 xml。我什至更愿意将数据输入 php，然后渲染 js，但这并没有太大的区别——但是你可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:22:59.677

解析为 XML DOM 对象，然后您可以使用 js 访问它

[http://www.w3schools.com/xml/xml_parser.asp](http://www.w3schools.com/xml/xml_parser.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:29:27.147

```
var text = "xml text here";
var node = new DOMParser().parseFromString(text, "text/xml").documentElement; 
```

然后，您可以使用 querySelector 和 querySelectorAll 方法获取所需的所有信息。

例子：

```
var items = node.querySelectorAll("item"); //get all items

for (var i = 0; i < items.length; i++) {
   var item = items[i];
   var header = item.querySelector("header"); //get the header of the current item
} 
```

小提琴：http: [//jsfiddle.net/nemo13/yRwkW/](http://jsfiddle.net/nemo13/yRwkW/)

# c++ - 在 C / Unix 中侦听 IP 子网的套接字

> ID：11183769
> 
> 赞同：1
> 
> 时间：2012-06-25T05:12:32.573
> 
> 标签：c++, c, unix, network-programming, unix-socket

我正在尝试用 C 编写服务器-客户端套接字程序。目的是让服务器在特定端口上侦听，但跨越属于**同一 IP 子网*****的 IP 地址范围***。此 IP 子网属于**127.xxx**范围（当然不是 127.0.0.1）。

 ****需要注意的几点：

*   这是一个基于流的套接字，而不是数据报套接字。
*   这不是广播地址。
*   仅在 Unix/Linux 平台上以 C/C++ 实现

我不想在服务器上为范围内的每个 IP 地址打开多个套接字。这是不可扩展的。

任何帮助将不胜感激。这甚至可行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T05:19:05.157

您只能绑定到单个套接字上的一个地址。为什么不能绑定到 INADDR_ANY 并简单地拒绝任何未绑定到目标 IP 的数据包？或者，您可以绑定到任意端口并使用操作系统级别的魔法（例如 iptables、bpf）将发往这些 IP/端口组合的数据包重新路由到您的套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:10:03.450

套接字 API 不允许绑定到子网——您可以绑定到一个 IP 或*任何*IP。您可以侦听所有入站连接并拒绝那些不适用的连接。如果您需要在同一服务器上的进程之间分配连接，请使用单个侦听套接字，并将传入连接传输到工作进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T06:05:00.180

您可以使用防火墙来阻止来自所需子网之外的任何人连接（即在 o/s 级别）。您可以将套接字置于混杂模式并接受给定接口上的所有连接。我不知道你是否可以两者都做（在混杂模式下有一个套接字并在其上运行 iptables）。从本质上讲，这就像构建一个仅侦听一个端口的数据包嗅探器。****

# drupal - 从视图列表中更改 CCK 字段值

> ID：11183773
> 
> 赞同：0
> 
> 时间：2012-06-25T05:13:00.697
> 
> 标签：drupal, view, drupal-6, cck, taxonomy

我有一个内容类型任务，我们在其中为自己或用户创建任务，其中有一个下拉菜单，其中包含一些分类术语，显示任务的状态。在此表单下方，我列出了当前用户的所有任务，其中在某些列中显示了内容类型任务的一些输入值。我想将列中的状态（CCK 字段）显示为选择框，它将显示任务的当前状态，用户可以选择其他状态并直接提交。这样用户就不必去任务节点了。

是否可以 ？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:30:01.897

1.  上传 - 可编辑字段模块
2.  启用它
3.  转到视图（或创建视图）
4.  在内容下添加 CCK 字段
5.  选择“格式”下的可编辑字段

# android - 用于检测 USB 扫描仪的 Android 设备

> ID：11183777
> 
> 赞同：0
> 
> 时间：2012-06-25T05:14:11.730
> 
> 标签：android

Android 3.1 有 USB api。实际上，我想检测 USB 扫描仪并更改其权限以从中提取指纹印记。可以在不root设备的情况下检测和更改android 3.1中的权限吗？这可以用 android 3.1 中的 USB api 完成吗？

模拟器也没有检测到 USB 扫描仪。有什么方法可以先在模拟器中测试吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:06:21.757

USB API 功能目前在模拟器中不可用。

对于实际设备，您只能从支持的设备列表中插入设备，据我所知，其中不包括任何指纹扫描仪。如果您根设备并编译/安装缺少的模块，您可能会获得指纹硬件支持，但我仍然**不清楚**如何从 Java 访问该硬件。

因此，除非您要进行设备生根和内核模块调整，否则恐怕很难让您的指纹扫描仪在 Android 设备上工作。

除此之外，还有一款内置指纹扫描仪的摩托罗拉 Atrix 手机，[Authentec 已经](http://forum.xda-developers.com/showthread.php?t=1206033)为该设备发布了 SDK。

# ios - 打印 sdk 用于除 Airprint 和 google cloud print 之外的 IOS

> ID：11183780
> 
> 赞同：0
> 
> 时间：2012-06-25T05:14:22.107
> 
> 标签：ios

我的要求是在 iphone 应用程序中打印 webview 内容。我不想使用 airprint 或谷歌云打印。是否有任何 3rd 方 sdk 可用于打印，例如 windows mobile 的“Hp 移动打印 sdk”。

在此先感谢 Srividya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:17:34.713

有适用于 ios 和 android 的 epson sdk。[你可以在这里](http://pos.epson.com/mobilesdks/index.htm)查看 sdk

# php - 如何确保用户只按一次我的点赞按钮？

> ID：11183783
> 
> 赞同：1
> 
> 时间：2012-06-25T05:14:34.000
> 
> 标签：php, javascript, jquery, validation, session

喜欢巴顿的桌子

*   LIKE_ID（每个帖子的唯一like ID）
*   LIKES（有人点赞按钮的次数）
*   POST_ID（对应posts表的POST_ID）

一个单独的帖子表具有上面的 POST_ID，对于每个帖子来说都是唯一的

为用户存在单独的用户表

因此，当用户单击“赞”按钮时，它会将 +1 添加到“赞”表中，其中 post_id 是他们喜欢的任何帖子。

文件

```
$(document).ready(function() {
$('img.like_click').click(function() {
var form = $(this).closest('form[name=like_form]');
var lid = $(form).find('input[name=lid]').val();
$.post("like.php?lid='" + lid + "', function(data) {
$(form).find('span.like_count').html(data);
});
}); 
```

like.php 文件

```
$lid = $_GET['lid'];
mysql_query("UPDATE tbl_likes SET likes=likes+1 WHERE like_id=".$lid) or     die(mysql_error());
$result = mysql_query("SELECT likes from files where fileid=" . $id) or die(mysql_error());
$row = mysql_fetch_assoc($result);
echo $row['likes']; 
```

我不知道如何阻止用户一遍又一遍地喜欢。我发现 facebook 风格，比如网络上阻止人们这样做的脚本，但它们是基于 IP 地址的（如果你没有登录，你就不能喜欢我的帖子）并且这些代码让我感到困惑，因为我不是jQuery的家伙。我仍在尝试弄清楚如何使用上面的代码正确显示点赞按钮，但最难的部分是限制多个点赞，这让我很困惑。任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T05:35:41.957

您说除非用户登录，否则他们不会喜欢您的帖子。因此，在您的情况下，您自己做起来很容易。您只需要跟踪哪些用户喜欢哪些帖子以防止重复。

在like 表中，删除该`likes`列。我们稍后会计算。添加一`user_id`列，以便您可以跟踪哪些用户喜欢哪些帖子。然后在AND上添加一个*组合* 以防止重复。`primary_key``post_id``user_id`

然后像这样构造您的查询：

```
$q = mysql_query("INSERT INTO tbl_likes (user_id, post_id) VALUES ('{$user_id}', {$post_id})");

if( $q === false ) {
    // query didn't work, probably a duplicate
}
else {
    // return a success etc
} 
```

如果你想获得喜欢的次数，请使用如下计数查询：

```
SELECT post_id, count(*) as c FROM tbl_likes WHERE post_id = $post_id; 
```

# eclipse - 如何为 Hibernate 指定运行时提供的库 - Eclipse Dali JPA 集成

> ID：11183787
> 
> 赞同：2
> 
> 时间：2012-06-25T05:15:03.440
> 
> 标签：eclipse, hibernate, jpa, hibernate-tools, dali

我正在尝试添加 Eclipse Dali JPA 集成并将 Hibernate 指定为 JPA 实现。我收集了不同的说明，但在配置项目方面时很难指定用户库。此处的页面（http://docs.redhat.com/docs/en-US/JBoss_Developer_Studio/4.0/html/Hibernate_Tools_Reference_Guide/dali_integration.html）显示了一个选项，`Library Provided by Target Runtime`但我没有这个选项。我有`User Library`和`Disable Library Configuration`。当我已经使用 maven 在项目中指定它们时，我宁愿不下载休眠 jar 并将它们单独存储以进行 eclipse 配置。并且禁用选项会使配置出错。

任何人都对在 Eclipse 中获得该选项或其他建议的 Hibernate/JPA 配置有任何提示吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:46:32.810

如果您已经在使用 Maven 和 m2e 进行库管理，则应选择禁用库配置选项。您的情况正是该选项所针对的场景。如果您指定在遵循此方法时遇到的错误，那么有人可能会帮助找到完整的解决方案。

或者，按照用户库选项并使用本地已有的 Hibernate jar 创建用户库。无需重新下载它们。

# git - 在 Git 存储库中，如何正确重命名目录？

> ID：11183788
> 
> 赞同：859
> 
> 时间：2012-06-25T05:15:06.927
> 
> 标签：git, directory, rename

我认为应该可以将要重命名的目录复制到具有所需名称的新目录，并[删除旧目录](https://stackoverflow.com/questions/1947430/git-remove-directory)，和`git add`， `git commit`以及`push`所有内容。但这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1602
> 
> 时间：2012-06-25T05:22:38.827

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2014-11-26T00:45:40.983

如果您收到此错误：致命：重命名“文件夹名”失败：参数无效

尝试这个：

## *尼克斯操作系统

`git mv foldername tempname && git mv tempname folderName`

## 操作系统

`git config core.ignorecase false; git mv foldername tempname; git mv tempname folderName`

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2016-03-04T17:42:06.530

**1.将文件夹的名称从旧文件夹更改为新文件夹**

```
git mv oldfolder newfolder 
```

**2\. 如果 newfolder 已经在您的存储库中并且您想覆盖它并使用：-** *强制*

```
git mv -f oldfolder newfolder 
```

不要忘记将更改添加到索引并在使用 git mv 重命名后提交它们。

**3\. 在不区分大小写的文件系统上将文件夹名重命名为文件夹名**

使用普通 mv 命令（不是 git mv）进行简单重命名不会被识别为来自 git 的文件更改。如果您尝试使用 'git mv' 命令，如下行所示

```
git mv foldername folderName 
```

如果您使用的是不区分大小写的文件系统，例如您在 Mac 上并且没有将其配置为区分大小写，您将遇到如下错误消息：

**致命：重命名“文件夹名”失败：参数无效**

为了使它发挥作用，您可以采取以下措施：-

```
git mv foldername tempname && git mv tempname folderName 
```

这通过首先将文件夹重命名为完全不同的文件夹名称来拆分重命名过程。将其重命名为不同的文件夹名称后，该文件夹最终可以重命名为新的文件夹名称。在那些 'git mv' 之后，不要忘记添加并提交更改。虽然这可能不是一个漂亮的技术，但它工作得非常好。文件系统仍然无法识别字母大小写的变化，但是由于将其重命名为新的文件夹名称，git 确实如此，这就是我们想要的 :)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-25T05:18:35.920

您可以使用文件系统重命名目录。然后你可以做`git rm <old directory>`和`git add <new directory>`（[帮助页面](http://www.kernel.org/pub/software/scm/git/docs/git-rm.html)）。然后你可以提交和推送。

Git 会检测到内容相同，只是重命名操作，会在历史记录中显示为重命名条目。您可以在使用提交之前检查是否是这种情况`git status`

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-12-30T08:06:57.987

很多正确的答案，但是当我登陆这里复制并粘贴一个*文件夹重命名历史*时，我发现这个

```
git mv <old name> <new name> 
```

将*旧文件夹*（本身）移动到*新文件夹中*

尽管

```
git mv <old name>/ <new name> 
```

（注意'/'）会将**嵌套内容**从*旧文件夹*移动到*新文件夹*

这两个命令都没有复制嵌套文件的历史记录。我**最终分别重命名了每个嵌套文件夹**✔</p>

```
git mv <old name>/<nest-folder> <new name>/<nest-folder> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-08-02T09:51:59.737

从 Web 应用程序我认为你不能，但你可以重命名 Git 客户端中的所有文件夹，它会将你的文件移动到新重命名的文件夹中，而不是提交并推送到远程存储库。

**我有一个非常相似的问题：** 我不得不将不同的文件夹从大写重命名为小写（如 Abc -> abc），我用一个虚拟名称（如'abc___'）重命名了所有文件夹，然后提交到远程存储库，之后我将所有文件夹重命名为带有小写字母的原始名称（如 abc），然后它们就被占用了！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-20T22:30:15.613

对于区分大小写的重命名，`git mv somefolder someFolder`以前对我有用，但由于某种原因今天没有。因此，作为一种解决方法，我创建了一个新文件夹`temp`，将所有内容`somefolder`移入`temp`、删除`somefolder`、提交`temp`，然后创建`someFolder`，将所有内容`temp`移入`someFolder`、删除`temp`、提交和推送`someFolder`，并且成功了！`someFolder`在 git 中显示。

* * *

## 回答 #8

> 赞同：-24
> 
> 时间：2012-06-25T15:45:22.927

只需重命名文件夹。git 是一个“内容跟踪器”，所以 SHA1 哈希是相同的，git 知道，你重命名它。唯一改变的是树对象。

```
rm <directory>
git add .
git commit 
```

# iphone - Sybase 无线平台混合 Web 容器 IPHONE BLACKBERRY

> ID：11183789
> 
> 赞同：0
> 
> 时间：2012-06-25T05:15:30.453
> 
> 标签：iphone, sup

我正在 Sybase Unwired Platform 混合 Web 容器中开发应用程序。当我在 Android 上部署它时它工作正常，但是当我在 Iphone 或黑莓上部署它时，我可以看到菜单项，如返回，下一个显示在菜单栏上，一些在工具栏上，因为它在 Iphone 本机应用程序中，屏幕上的按钮是不工作。我认为这是因为 JQuery，但有什么解决方法可以删除此菜单栏和工具栏并使其正常运行。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:22:21.347

我还没有尝试过，但是如果你是最后一个 SUP 版本，应该可以在屏幕上有按钮来调用 SUP 请求和操作，而无需将它们添加为 menuItems。

菜单项的问题在于它们在每个平台上的工作方式不同，不建议再使用它们（甚至 google 也这么说），这使得 HTML5 应用程序少了多平台。

在我的 SUP 应用程序中，我在工作流初始化后动态隐藏了 menuItem，并创建了一个调用 menuItem javascript 函数的自定义 html 按钮（使用 Custom.js）。

# android - Android USB 主机和隐藏设备

> ID：11183792
> 
> 赞同：24
> 
> 时间：2012-06-25T05:15:51.927
> 
> 标签：android, api, usb, host

我正在开发一个必须与 USB 设备通信的 Android 应用程序。我尝试在我的应用程序中使用标准 google API，但设备列表始终为空。

如果我将 USB 设备信息与 google api 一起使用，情况相同。google api搜索到的设备列表为空，

lsusb 给出以下结果：

```
Bus 001 Device 001: ID 1d6b:0001
Bus 002 Device 001: ID 1d6b:0002
Bus 003 Device 001: ID 1d6b:0001
Bus 002 Device 002: ID 2226:0014 
```

我的设备是 2226:0014

日食日志：

```
I/USB3G(92): event { 'add', '/devices/platform/sw-ehci.1/usb2/2-1', 'usb', '', 189, 133 }
I/USB3G(92): path : '/sys/devices/platform/sw-ehci.1/usb2/2-1'
I/USB3G(92): VID :size 5,vid_path '/sys/devices/platform/sw-ehci.1/usb2/2-1/idVendor',VID  '2226
I/USB3G(92): '.
I/USB3G(92): PID :size 5,Pid_path '/sys/devices/platform/sw-ehci.1/usb2/2-1/idProduct',PID  '0014
I/USB3G(92): '.
I/USB3G(92): cmd=/system/etc/usb_modeswitch.sh /system/etc/usb_modeswitch.d/2226_0014 &,
I/USB3G(92): excute ret : 0,err:No such file or directory 
```

如果我插入 rs232 适配器、蓝牙加密狗等设备，则没有任何反应，并且 API 和 lsusb 没有任何结果。

设备的协议基于 ezusb 库。Android v.：4.0.3 内核 v.：3.0.8 固件版本：crane_evb-eng 4.0.3 IMLK74k 20120330

有什么方法可以通过 API 访问隐藏的 USB 设备，还是我应该通过编写驱动程序并将其修补到固件中来实现对该设备的支持？

更新：即使我在 *system/etc/usb_modeswitch.d/* 中创建名称为 2226_0014 的信息文件，其中包含

```
DefaultVendor= 0x2226
DefaultProduct=0x0014
TargetVendor=  0x2226
TargetProductList="0014"
MessageEndpoint="0x00"
NeedResponse=1
CheckSuccess=20 
```

我得到同样的错误：“没有这样的文件或目录”

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-16T17:43:53.247

要启用 USB 主机 API 支持，您应该添加一个名为
**android.hardware.usb.host.xml** 并包含以下行的文件：

```
<permissions>
 <feature name="android.hardware.usb.host"/>
</permissions> 
```

进入文件夹

```
/system/etc/permissions 
```

在该文件夹中找到名为

```
handheld_core_hardware.xml or tablet_core_hardware.xml 
```

并添加

```
<feature name="android.hardware.usb.host" /> 
```

进入`<permissions>`部分。

重新启动您的设备。Usb 主机 api 应该可以工作。

在带有 android 4 的 CUBE U30GT 上测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-11T03:19:06.317

出色的！这适用于我运行 Android 4.0.4 的 Envizen V700NA。

小错字： `<feature name="android.hardware.usb.host">`

应该： `<feature name="android.hardware.usb.host"/>`

程序：

1.  adb pull /system/etc/permissions/tablet_core_hardware.xml
2.  更新该文件并创建 Greg-q 指定的 android.hardware.usb.host.xml。
3.  adb push android.hardware.usb.host.xml /system/etc/permissions
4.  adb push tablet_core_hardware.xml /system/etc/permissions
5.  重启。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-25T01:26:04.423

在 micromax A120 canvas 2 手机 (kitkat 4.4.2) 上工作就像一个魅力。现在我可以控制我的 Arduino 了！我使用busybox 工具来完成所有命令行工作（否则chmod 将不起作用）。我的步骤（也许有些不是必需的）：

(0)在我的 Windows 8 计算机上安装 PDAnet 驱动程序 ( [http://pdanet.co/a/ )。](http://pdanet.co/a/)(1) 在[http://www.mgyun.com/m/en](http://www.mgyun.com/m/en)使用 Vroot（现在称为 iRoot）对手机进行 root 。很简单，唯一需要注意的是 su grant/deny 页面部分是中文的，没什么大不了的。（2）安装busybox和jackpal的Android-Terminal-Emulator（见github [https://github.com/jackpal/Android-Terminal-Emulator](https://github.com/jackpal/Android-Terminal-Emulator) or play store [https://play.google.com/store/apps/details?id =jackpal.androidterm&hl=en](https://play.google.com/store/apps/details?id=jackpal.androidterm&hl=en) )

(3) 打开一个终端窗口并成为超级用户：

```
# su 
```

(4) 文件系统可能是只读的，因此您可能需要重新挂载它：

```
# mount -o rw,remount -t yaffs2 / 
```

或者

```
# mount -o rw,remount -t rootfs / 
```

或者

```
# mount -o rw,remount -t rootfs rootfs /system 
```

另请参阅[http://www.pocketmagic.net/write-on-the-android-read-only-file-system/](http://www.pocketmagic.net/write-on-the-android-read-only-file-system/) ，请参阅[Android 2.3：只读文件系统](https://stackoverflow.com/questions/18918456/android-2-3-read-only-file-system-stuck) 也卡住了，[https://ckirbach.wordpress.com /2012/11/27/how-to-remount-system-as-read-write-in-android/](https://ckirbach.wordpress.com/2012/11/27/how-to-remount-system-as-read-write-in-android/)

(5) 使 default.prop 读/写：

```
chmod 666 /default.prop 
```

(6)编辑/default.prop，进行如下修改：

```
ro.secure=0
ro.debuggable=1
persist.service.adb.enable=1 
```

请参阅[https://android.stackexchange.com/questions/28653/obtaining-root-by-modifying-default-propro-secure](https://android.stackexchange.com/questions/28653/obtaining-root-by-modifying-default-propro-secure) 或[http://bclary.com/blog/2014/04/14/splitting-and-packing -android-boot-images/](http://bclary.com/blog/2014/04/14/splitting-and-packing-android-boot-images/)

最后，为了完整起见，正如上面的答案所说（[https://stackoverflow.com/a/11992683/979369](https://stackoverflow.com/a/11992683/979369)）：

(7) 要启用 USB 主机 API 支持，您应该添加一个名为 android.hardware.usb.host.xml 并包含以下行的文件：

```
<permissions>
 <feature name="android.hardware.usb.host"/>
</permissions> 
```

进入文件夹

```
/system/etc/permissions 
```

在该文件夹中找到名为

```
handheld_core_hardware.xml or tablet_core_hardware.xml 
```

并添加

```
<feature name="android.hardware.usb.host" /> 
```

进入部分。

(8) 重新启动您的设备。Usb 主机 api 应该可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-23T16:31:30.460

我在 MK809、Android 4.1 Jelly Bean 上使用过 adb，命令是：

adb remount /../../file.xml rw adb push...

使用普通命令我没有权限并且文件是只读的

对不起我的英语不好：P

# php - Node.js php 性能

> ID：11183796
> 
> 赞同：0
> 
> 时间：2012-06-25T05:16:29.290
> 
> 标签：php, performance, node.js

这是我预期的场景：我有一个用 PHP 编写的应用程序，它有一个域层（包含验证器等）。我想将 node.js 用于我的 Web 服务，以在高并发情况下提高性能。如果我为我的 php 域层创建一个命令行界面（见下文），这会给我带来比仅使用 Apache 更好的性能吗？这甚至是一个好方法吗？我是 node.js 的新手，我正在努力了解自己的方向。节点：领域层的命令行界面将返回 json 编码的对象。

```
//Super simple example:
var http = require("http");
var exec = require('child_process').exec;

function onRequest(request, response) {
  exec("php domain-cli.php -model Users -method getById -id 32", function(error, stdout, stderr){
      response.writeHead(200, {"Content-Type": "application/json"});
      response.write(stdout);
      response.end();
  });

}

http.createServer(onRequest).listen(80); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T05:26:03.460

> 这会给我比仅使用 Apache 更好的性能吗？

您必须对其进行测量才能确定，但​​我对此表示高度怀疑。

Node 的性能优势来自于它是一个`select()`基于 - 的服务器，因此它避开了线程和阻塞（具有昂贵的上下文切换和 CPU 管道停顿），而支持非阻塞 IO（又名绿色线程）。如果您将所有工作都交给 PHP，那么您基本上只是将 Node 用作前端服务器——此时您应该只使用 Apache，因为 mod_php 将几乎完全按照您正在做的事情做。只有 mod_php 可以做得更好，因为它可以让 PHP 解释器在内存中保持热状态，而不必像你正在做的那样在每个请求上启动一个新的解释器。

> 这甚至是一个好方法吗？

本质上，您所做的是使用 Node.js 重新实现 CGI。所以我会说不——如果 CGI 是你想要的，那里有很多现有的实现！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T05:25:26.923

您的代码将为每个客户端请求生成一个新的 php 进程。不好！Web 服务器（如 Apache）通常具有保持打开状态以处理多个客户端请求的子进程，因此不必生成新进程。在这些情况下，PHP 也作为模块运行，因此不必为它创建一个进程来执行 php 脚本，它已经在内存中等待。

# linux - 从另一个脚本运行 bash 脚本而不等待脚本完成执行？

> ID：11183805
> 
> 赞同：26
> 
> 时间：2012-06-25T05:17:42.723
> 
> 标签：linux, bash, shell, process

有没有办法在第一个阻塞的情况下执行两个 bash 脚本？以下不起作用：

```
exec ./script1.sh #this blocks!
exec ./script2.sh 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-25T05:19:05.820

放在`&`行尾。

```
./script1.sh & #this doesn't blocks!
./script2.sh 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T05:19:45.997

使用在后台运行第一个`&`，你应该很好。

# c# - C# XNA 鼠标通过速度移动？

> ID：11183811
> 
> 赞同：0
> 
> 时间：2012-06-25T05:18:35.083
> 
> 标签：c#, xna, mouse

我正在尝试将鼠标对象设置为通过速度而不是通过绝对位置工作。（虽然它同时跟踪两者，但 Velocity 是我想要更新它的方式。）

但是我遇到了一些问题。

首先，在窗口模式下，鼠标动作不正确。因为一旦它移出屏幕，鼠标就会消失。我尝试在每个 Update() 滴答声中使用 Mouse.SetPosition 将其设置为屏幕中心，并将其锁定到窗口。但是，这也会导致问题。

要查看实际问题，只需在此处编译 .sln -> [https://github.com/redcodefinal/Clixel](https://github.com/redcodefinal/Clixel)

一切都是自动的，因此您只需编译即可。ClxG 已经有一个 ClxMouse 对象。（ClxG.鼠标）

这是我正在研究的整个鼠标类。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace org.clixel
{
    public class ClxMouse : ClxSprite
    {
        private MouseState _curmouse, _lastmouse;

        private int _scrollwheel;

        public bool LeftDown
        {
            get
            {
                if (_curmouse.LeftButton == ButtonState.Pressed)
                    return true;
                else
                    return false;
            }
            set { }
        }

        public bool RightDown
        {
            get
            {
                if (_curmouse.RightButton == ButtonState.Pressed)
                    return true;
                else
                    return false;
            }
            set { }
        }

        public bool MiddleDown
        {
            get
            {
                if (_curmouse.MiddleButton == ButtonState.Pressed)
                    return true;
                else
                    return false;
            }
            set { }
        }

        public bool LeftPressed
        {
            get
            {
                if (_curmouse.LeftButton == ButtonState.Pressed && _lastmouse.LeftButton == ButtonState.Released)
                    return true;
                else
                    return false;
            }
            set { }
        }

        public bool RightPressed
        {
            get
            {
                if (_curmouse.RightButton == ButtonState.Pressed && _lastmouse.RightButton == ButtonState.Released)
                    return true;
                else
                    return false;
            }
            set { }
        }

        public bool MiddlePressed
        {
            get
            {
                if (_curmouse.MiddleButton == ButtonState.Pressed && _lastmouse.MiddleButton == ButtonState.Released)
                    return true;
                else
                    return false;
            }
            set { }
        }

        public MouseState CurMouse
        {
            get
            {
                return _curmouse;
            }
            set { }
        }

        public MouseState LastMouse
        {
            get
            {
                return _lastmouse;
            }
            set { }
        }

        public ClxMouse()
            : base(ClxAssets.Textures.Cursor)
        {
            _curmouse = Mouse.GetState();
            _lastmouse = _curmouse;
            CollisionBox = new Rectangle(ClxG.Screen.X/2, ClxG.Screen.Y/2, Texture.Width, Texture.Height);
            this.Solid = false;
            Mouse.SetPosition(CollisionBox.X, CollisionBox.Y);
        }

        public ClxMouse(Texture2D _texture)
            : base(_texture)
        {
            _curmouse = Mouse.GetState();
            _lastmouse = _curmouse;
            CollisionBox = new Rectangle(ClxG.Screen.Center.X, ClxG.Screen.Center.Y, Texture.Width, Texture.Height);
        }

        public override void Update()
        {
            _lastmouse = _curmouse;
            _curmouse = Mouse.GetState();

            Velocity = new Vector2(_curmouse.X - _lastmouse.X, _curmouse.Y - _lastmouse.Y);
            Console.WriteLine(Velocity.ToString());
            base.Update();
        }
    }
} 
```

TLDR：如何在过程中将鼠标锁定到一个窗口而不爆炸整个世界？

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:47:47.793

您可以检查您的鼠标是否超出每一帧的范围。如果是，则需要将其设置到窗口的另一侧。您将需要在屏幕内创建某种边距以检查是否越界，因为如果鼠标实际上不在屏幕外，则为时已晚）因此，例如，如果您的屏幕为 800x600，则可以使用边距20px（因此鼠标需要停留在 760x560 的盒子中，偏移量为 (20,20)），并且在某个帧中，鼠标位置为 (400,567) 你知道它超出了 (0,7) [鼠标位置 - 边距]-> 如果 x 和/或 y 为正，则需要使用这些值重置鼠标位置。所以在这个例子中，新的鼠标位置将是 (400,27) [27 因为你在每个边缘都有 20px 的边距]（x 保持不变，因为 400-760 会小于 0）。

# ios - 同时播放两个 AVPlayer 音频文件时出现音频故障

> ID：11183820
> 
> 赞同：10
> 
> 时间：2012-06-25T05:18:59.737
> 
> 标签：ios, audio, avplayer

我有一个 iOS 应用程序，它使用一个 AVPlayer 播放背景音轨，并使用第二个 AVPlayer 在“顶部”播放其他声音片段。（声音片段是从 Internet 流式传输的，因此需要 AVPlayer。）问题是，当第二个 AVPlayer 开始播放时，它会导致背景 AVPlayer 停止几分之一秒，类似于此评论中描述的内容：

[使用 AVPlayer 播放多个音频文件](https://stackoverflow.com/questions/6193844/play-multiple-audio-files-with-avplayer#comment7213305_6193844)

我正在用这种方法准备音频剪辑：

```
- (void)prepareAudio:(NSURL *)assetURL {

asset = [AVURLAsset URLAssetWithURL:assetURL options:nil];
playerItem = [AVPlayerItem playerItemWithAsset:asset];
[player replaceCurrentItemWithPlayerItem:playerItem];

[playerItem addObserver:self forKeyPath:@"playbackBufferEmpty" options:NSKeyValueObservingOptionNew context:nil];
[playerItem addObserver:self forKeyPath:@"playbackLikelyToKeepUp" options:NSKeyValueObservingOptionNew context:nil];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(playerItemDidReachEnd:)
                                             name:AVPlayerItemDidPlayToEndTimeNotification
                                           object:[player currentItem]];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(playerItemFailedToReachEnd:)
                                             name:AVPlayerItemFailedToPlayToEndTimeNotification
                                           object:[player currentItem]];
 } 
```

...然后`[player play];`在我想听到每个声音时调用。

**当我设置音频会话或 AVPlayer 的每个实例时，我需要做些什么，以便声音混合而不会出现故障？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:06:24.023

这可能是软件编码器启动的结果。当软件编码器尝试播放第二个声音剪辑时，您会看到内存中出现相当大的峰值。看看苹果文档部分“iOS硬件和软件音频编解码器” [http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html "使用音频")

“使用硬件辅助解码时，设备一次只能播放一种受支持格式的单个实例。”

另外...“要以最佳性能播放多种声音，或在 iPod 在后台播放时有效地播放声音，请使用线性 PCM（未压缩）或 IMA4（压缩）音频。”

如果您对可以提供的媒体编解码器别无选择，请查看 AudioUnit 框架以获得更无缝的混合。特别是[http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010210上的“音频混音器（MixerHost）”](http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010210)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:02:14.000

我终于弄清楚了问题所在。我正在编写一个应用程序，我正在使用 AVMutableAudioMixInputParameters 类调整音量，并且我试图通过在每个样本的基础上向上或向下移动音量来使用这个类来标准化音频。

虽然这种方法在只有几个音量斜坡时有效，但似乎斜坡的应用发生在缓冲音频的同一线程上，所以当我使用太多（>〜1000）它们时，这最终会吃掉应该忙于缓冲音频的 CPU，然后音频中出现 ggg 故障。

我的解决方案是重构我的音量标准化算法，以使用更少的音量斜坡来实现相同的目标。一旦我能够将每组音量斜坡/歌曲降低到大约 500 左右，我就不再有这个问题，并且音频故障消失了。

# android - 安卓启动画面

> ID：11183828
> 
> 赞同：2
> 
> 时间：2012-06-25T05:20:04.467
> 
> 标签：android, splash-screen

我制作了一个启动图像以在我的活动开始时显示。图像显示完美。但问题是当我调用它时

```
public class SplashImageActivity extends Activity {
    protected boolean active = true;
    protected int splashTime = 5000; // time to display the splash screen in ms

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        // thread for displaying the SplashScreen
        Thread splashTread = new Thread() {
            @Override
            public void run() {
                try {
                    int waited = 0;
                    while(active && (waited < splashTime)) {
                        sleep(100);
                        if(active) {
                            waited += 100;
                        }
                    }
                } catch(InterruptedException e) {
                    // do nothing
                } finally {
                    startActivity(new Intent(SplashImageActivity.this,Myapps.class));
                    finish();
                    //startActivity(new Intent("com.splash.com.MyApps"));
                    //startActivity( new Intent(getApplicationContext(), Myapps.class));
                }
            }
        };
        splashTread.start();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            active = false;
        }
    return true;
    }
} 
```

去下一个活动`stop()`不起作用。它不去这个活动。我在清单中添加所有活动。在这样的`stop()`代码中显示

![在此处输入图像描述](../Images/36834672e344a00211fc959d6fdcd724.png)

有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T05:28:44.027

开始活动后无需调用 stop() 和调用 finish()

```
finally 
{

    startActivity(new Intent(currentclass.this,nextActivity.class);
    finish();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T05:30:53.060

我使用线程来显示启动画面，它对我有用：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    mSplashThread =  new Thread(){
        @Override
        public void run(){
            try {
                synchronized(this){
                    wait(4000);
                }
            }catch(InterruptedException ex){                   
            }
            finish();

            Intent i=new Intent(getApplicationContext(),NextActivity.class);
            startActivity(i);

            interrupt();
        }

    }; 
    mSplashThread.start();        
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T05:27:22.770

请尝试以下代码..

```
public class Splashscreen extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            Thread t2 = new Thread() {
                public void run() {
                    try {
                        sleep(2000);
                        startActivity( new Intent(getApplicationContext(), Exercise.class));
                        finish();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            };
            t2.start();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T05:21:44.493

首先它不是 Activity 的 onStop 所以看起来你正在调用线程的停止函数，这就是`Deprecated`为什么你得到罢工线所以使用其他方式来停止使用更好的方式来实现启动的线程...... .

看起来你尝试一些类似这个[链接的东西](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T05:35:11.923

无需调用 stop() 只需在开始活动后调用 finish()

```
finally {
startActivity(new Intent(currentclass.this,nextActivity.class);
finish();
} 
```

您还可以使用处理程序 postdelayed() 来制作如下所示的启动画面

```
 public class SplashScreenActivity extends Activity{

        private Handler handler;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_splash_screen);

            final Runnable runnable = new Runnable() {

                @Override
                public void run() {
                       Intent intent=new Intent(SplashScreenActivity.this, nextActivity.class);
                       startActivity(intent);
                       finish();

                }
            };
            handler = new Handler();
            handler.postDelayed(runnable, 5000);

        }

    } 
```

您将显示启动屏幕 5 秒钟，然后移动到下一个活动

# c++ - 基类析构函数不是虚拟的，子类析构函数是虚拟的，程序崩溃

> ID：11183832
> 
> 赞同：2
> 
> 时间：2012-06-25T05:20:49.837
> 
> 标签：c++, virtual-destructor

为什么以下程序会崩溃？我有一个基类，其析构函数不是虚拟的，但子类析构函数是虚拟的：

```
#include <iostream>

class Base {
public:
  Base() {
    std::cout << "Base::Base CTOR " << std::endl;
  }
  ~Base() {
    std::cout << "Base::Base DTOR " << std::endl;
  }
};

class Child : public Base {
public:
  Child(){
    std::cout << "Child::Child CTOR " << std::endl;
  }
  virtual ~Child() {
    std::cout << "Child::Child DTOR " << std::endl;
  }

};

int main (int argc, char **argv) {
  Base *ptr = new Child;
  delete ptr;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T05:24:09.293

您所观察到的称为“未定义行为”。`Base`如果您想`Child`通过指针对实例调用 delete，则将 dtor设为虚拟`Base`。

从 2003 年标准 5.3.5/3 开始：

> 在第一种选择（删除对象）中，如果操作数的静态类型与其动态类型不同，则静态类型应为操作数动态类型的基类，并且静态类型应具有虚拟析构函数或行为未定义.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T05:27:12.323

您有未定义的行为，因为要删除的指针操作数的静态类型与其指向的对象的动态类型不匹配，并且您不满足允许将指针传递给基类的此规则的例外要求到被删除的对象，因为此异常要求*基*类具有虚拟析构函数。

任何行为都是可能的，包括代码“按预期”工作或崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T05:45:43.467

希望这个例子能帮助你明白这一点：

```
#include <iostream>
class Base {
public:
 Base() {
    std::cout << "Base::Base CTOR " << std::endl;
 }
 ~Base() {
   std::cout << "Base::Base DTOR " << std::endl;
 }
private:
protected:
};

class Child : public Base {
 public:
 Child(){
std::cout << "Child::Child CTOR " << std::endl;
  }
  ~Child(){
std::cout << "Child::Child DTOR " << std::endl;
 }
  private:
 protected:
 };
  class gChild : public Child {
   public:
   gChild(){
    std::cout << "Child::Child gCTOR " << std::endl;
   }
  ~gChild(){
    std::cout << "Child::Child gDTOR " << std::endl;
  }
private:
protected:
};
int main ( int argc, char **argv) {
    Base *ptr = new gChild;
 delete ptr;
} 
```

如果是虚拟的 ~Base() ，则打印所有析构函数的打印。

如果 virtual ~child() 或 virtual ~gChild()，则仅打印基本析构函数。

这是因为析构函数以相反的方向执行。这里的行为是未定义的。您必须定义基本析构函数虚拟才能获得预期的结果。

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T06:56:26.817

看看这个：

```
#include <iostream>

class Base
{
public:
    void nonvirtualmethod()
    { std::cout << "Base nonvirtualmethod" << std::endl; }
    virtual void virtualmethod()
    { std::cout << "Base virtualmethod" << std::endl; }
};

class Derived: public Base
{
public:
    void nonvirtualmethod()
    { std::cout << "Derived nonvirtualmethod" << std::endl; }
    virtual void virtualmethod()
    { std::cout << "Derived virtualmethod" << std::endl; }
};

int main()
{
    Derived d;
    Derived* pd = &d;
    Base* pb = &d;    //< NOTE: both pd and pb point to the same object

    pd->nonvirtualmethod();
    pb->nonvirtualmethod();
    pd->virtualmethod();
    pb->virtualmethod();
} 
```

我给你以下输出：

```
Derived nonvirtualmethod
Base nonvirtualmethod
Derived virtualmethod
Derived virtualmethod  //< invoked by a Base* 
```

`pb`这是因为指针的静态类型 ( `Base*`) 和它指向的动态类型( )之间存在差异`Derived`。虚拟方法和普通方法的区别在于，非虚拟方法遵循静态类型映射（因此`Base`指针调用`Base::`方法），而虚拟方法遵循运行时类型链，因此如果 a`Base*`指向 a `Derived`，则该`Derived`方法将被调用.

从这个意义上说，析构函数没有什么特别的：如果它不是虚拟的，`Base`指针将不会调用`Derived`它，因此你会得到一个半毁坏的对象，它会被返回给内存存储。

这是 UB（而不是简单地否认）的原因是因为“内存存储”不是由语言本身管理的，而是从程序所在的平台管理的：崩溃很可能取决于缺少该`Derived`部分（仍然存在）将导致操作系统尝试释放具有错误起始地址的内存块。

# php - 全随机和半随机有什么区别

> ID：11183834
> 
> 赞同：0
> 
> 时间：2012-06-25T05:21:24.447
> 
> 标签：php, random

有人知道全随机函数和半随机函数之间的区别吗？如何在 PHP 中使用它们？有什么例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:20:37.233

您可能是指伪随机与真正随机。真正的随机数通常是使用“TRNG”（字面意思是真正的随机数生成器）从环境噪声或其他来源创建的，并且难以以编程方式实现。伪随机数更容易生成，PHP 提供了多种获取它们的函数，包括 mt_rand()。Mt_rand 使用 Mersenne twister 伪随机算法，该算法与其他选项相比质量更高。

如果你在 PHP 中生成随机图像，你需要的不仅仅是随机数。因为您需要为图像的每个像素创建一个随机颜色值。您可能想做这样的事情（它为 50*50 图像中的每个像素生成一个包含颜色分配的矩阵。您需要使用 GD 或 ImageMagick 将其转换为实际图像）

```
 <?php
 $pixels = array();
 for($i = 0; $i < 50; ++$i)
 {
     $pixels[$i] = array();
     for($j=0; $j < 50; ++$j)
     {
         $pixel[$i][$j] = hexdec( sprintf("%02X%02X%02X", mt_rand(0, 255), mt_rand(0, 255), mt_rand(0, 255) ) );
     }
 } 
```

# db2 - 如何在 IBM db2 中创建和编译过程

> ID：11183837
> 
> 赞同：1
> 
> 时间：2012-06-25T05:21:45.047
> 
> 标签：db2

我是 db2 的新手。我在oracle中写了程序。我需要将这些过程从 oracle 转换为 db2。我想知道如何创建和编译 db2 中的过程。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:54:29.003

可以在[这里](http://resources.devx.com/ibm/Article/28308)找到一个很好的演练。

但是你总是有 IBM 推出的红皮书，比如[这个](http://www.redbooks.ibm.com/abstracts/sg246503.html)或[这个](http://www.redbooks.ibm.com/abstracts/sg247083.html)。值得指出的是这个[迁移工具](http://www.ibm.com/developerworks/data/downloads/migration/mtk/)，您可能会发现它很有用。

# c# - 从模型生成数据库文件 (sdf) 时发生错误

> ID：11183839
> 
> 赞同：1
> 
> 时间：2012-06-25T05:22:15.693
> 
> 标签：c#, sql-server-ce, visual-studio-2012

我已经安装了 Visual Studio 2012。我正在尝试从我的模型（EDMX 文件）生成数据库。指定 SQL Server Express 连接字符串时，它工作正常。但是当我尝试指定要生成的 SQL Server Compact 文件时，它给了我以下错误：

> 找不到合适的 DbProviderManifest 来生成 SSDL。提供的提供程序不变名称“System.Data.SqlServerCe 4.0 无效”

知道如何解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:23:01.410

检查您的 machine.config 文件中是否存在以下行：

```
 <system.data>
        <DbProviderFactories>
  <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
</DbProviderFactories>
    </system.data> 
```

否则，请尝试重新安装 SQL Server Compact 4.0 或验证您的项目目标对于 x86 或 x64 是否正确...

此致，

# iphone - 区分应用内 iTunes 的产品

> ID：11183841
> 
> 赞同：0
> 
> 时间：2012-06-25T05:22:21.003
> 
> 标签：iphone, ipad, in-app-purchase, app-store-connect, storekit

如果我购买了一个产品，我会使用产品标识符（名称）来调用它，然后将所需的详细信息保存在 NSUserDefaults 中。这样，我可以在购买后随时解锁功能。但是，如果我使用不同的设备或删除应用程序，NSUserDefaults 会被重置，并且我在恢复产品时获得的唯一信息是交易 ID、日期、收据等（无产品标识符）。

解决此问题的一种方法可能是在我购买产品时将交易 ID 保存在服务器上，但我无法访问服务器，并且希望能够通过代码执行此操作。

所以谁能告诉我：当我恢复产品时，有什么方法可以访问产品标识符吗？还是我缺少任何其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:50:36.833

您可以按如下方式获取产品ID，

```
- (void)restoreTransaction:(SKPaymentTransaction *)transaction
{
    [self recordTransaction:transaction.originalTransaction];
    [self provideContent:transaction.originalTransaction.payment.productIdentifier];
    [self finishTransaction:transaction wasSuccessful:YES];
} 
```

此[链接](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)将对您有用。

# sql - SQL多对多组合表

> ID：11183847
> 
> 赞同：1
> 
> 时间：2012-06-25T05:22:53.587
> 
> 标签：sql, sql-server, database-design, many-to-many, normalization

我在数据库设计中遇到了一个有趣的问题，其解决方案还不能令人满意。

我有一个包含以下字段的**站点**
表： - key_station（主键）
- station_name
- info

然后我有一个**位置**表：
- key_position（主键）
- position_number
- info
- key_station（外键到站）

和表**：** -
key_setup（主键）
- setup_number
- info
- key_station（站外键）

现在，Positions 表列出了一个站的所有插槽号，而 Setups 表列出了一个站的所有可能的不同设置。我需要的是一张桌子，根据设置在每个位置都有不同的部分。有些职位可能是空的。例如...

**设置 1**
位置 1 - AA
Position2 - BB
Position3 - *NULL*

**设置 2**
Position1 - *NULL*
Position2 - CC
Position3 - *NULL*

所以我创建了一个表名**Settings**，其中包含以下字段：
- key_setting （主键）
- key_position （外键）
- key_setup （外键）
- 部分

这里的问题是我必须确保**设置**始终具有引用表的组合。因此，当我在示例中插入一个新位置时，它必须在设置中插入 2 条记录（每个设置一个），或者当我插入一个新设置时，它必须在设置中插入 3 条记录（每个位置一个），其中 NULL 部分用户可以稍后填写。为什么？因为每个设置中的位置都不会改变，只会改变它们分配的部分。

我目前所做的是使用两个 SQL 语句在表 Positions 和 Settings（或 Setups 和 Settings）中插入和删除。不幸的是，我遇到了插入位置或设置的问题，而表设置中没有相应的记录，因为我没有注意操作的原子性。

所以我想知道对于中间表必须具有该关系的所有组合的多对多关系的最优雅和正确的解决方案是什么。我需要什么样的标准化？或者我可以在 SQL Server 中添加什么样的约束？这个问题是否有一个特定的名称，以便我可以搜索更多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:40:16.603

![在此处输入图像描述](../Images/d2ba6e89e9e4850f8bd1ee72c741d4ba.png)

*   配置**FK** _`ON UPADE CASCADE ON DELETE CASCADE`

*   插入新的`StationSlot`或`StationSetup`运行后

* * *

```
insert into StationConfiguration (StationID, StationSlotNo, StationSetupNo)
select
      a.StationID
    , b.StationSlotNo
    , a.StationSetupNo
from StationSetup as a
join StationSlot  as b on b.StationID = a.StationID
where not exists (
     select 1 
     from StationConfiguration as xx
     where xx.StationID      = a.StationID
       and xx.StationSlotNo  = b.StationSlotNo
       and xx.StationSetupNo = a.StationSetupNo
     )  
; 
```

* * *

*   这将插入任何新的组合`Part`为 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T05:42:29.893

在 Setups 表中删除 key_station 并添加 key_position 并完全删除 Settings 表。这样，您将通过跟踪位置参考来了解给定行属于哪个站，并且您将位置与其值之间的映射存储在同一个表（设置）中。

# windows-phone-7 - wp7 - 是否可以在页面之间加载用户控件？

> ID：11183849
> 
> 赞同：0
> 
> 时间：2012-06-25T05:23:00.793
> 
> 标签：windows-phone-7

我正在尝试解决游戏中 AdMob 控件的一些问题，并且该控件需要一些时间来加载（它会劫持 UI 线程长达 1 秒）。是否可以加载一次控件，然后将其存储在某处并将其附加到后续页面的可视化树中？

或者这不能完成，我必须找到其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:34:57.643

是的你可以。您需要在该页面上保存该控件的状态。

[请参阅此 MSDN 文档了解 windows phone 7 的状态](http://msdn.microsoft.com/en-us/library/ff967547%28v=vs.92%29.aspx)

我希望你能从中得到更好的想法

更新 ====

```
 Deployment.Current.Dispatcher.BeginInvoke(new System.Action(delegate()
            {
               // Load Your Control Here
            })); 
```

它不会冻结您的用户界面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:53:08.547

您可以在运行时简单地在页面上添加控件：

```
this.LayoutRoot.Children.Add( control ) 
```

如果您静态定义控件，则可以在 OnNavigatingFrom 事件上将其从当前页面中删除，然后将其加载到下一页或类似内容中，以防止多个父级崩溃。

# c# - 创建一个没有对话框的新电话簿条目

> ID：11183850
> 
> 赞同：2
> 
> 时间：2012-06-25T05:23:01.013
> 
> 标签：c#, .net, windows, winapi, visual-c++

我发现`RasCreatePhonebookEntry`创建了一个电话簿条目，但在 SDK 中它被称为

> “从 Windows Vista 开始，此功能已被弃用，其功能已被 RasDialDlg 取代”

那么有没有其他方法可以创建一个新的电话簿条目而不提示用户，它支持所有版本的 Windows？

而如果`RasCreatePhonebookEntry`它本身可以用于所有版本的windows创建一个新的电话簿条目，那么如何使用“ ”结构来设置“ `Preferred COM port`”选项的值呢？我没有在STRUCTURE 中`RASENTRY`找到任何参数来设置首选端口..`RASENTRY`

我想在电话簿中设置以下参数：

```
PreferredPort=COM31
PreferredDevice=Communications cable between two computers #5

MEDIA=serial
Port=COM10
Device=Communications cable between two computers #5
ConnectBPS=460800 
```

如何通过在电话簿中创建新条目以编程方式设置上述参数。

**更新：**

`RasGetEntryProperties`最后，我使用and创建了一个 Ras 电话簿`"RasSetEntryProperties"`，但我在这里面临的唯一问题`"DeviceName"`是`"RASEntry" structure`. 仅当我将 DeviceName 指定为`"Communications cable between two computers #13".`

我尝试枚举“RasEnumDevices”，但正在获取设备列表。

```
WAN Miniport (L2TP)
WAN Miniport (L2TP)
WAN Miniport (PPTP)
WAN Miniport (PPTP)
WAN Miniport (PPPOE)
Communications cable between two computers #14
Communications cable between two computers #13 
```

如何从中选择我的设备？

# php - PHP 绝对唯一的随机字符串

> ID：11183853
> 
> 赞同：1
> 
> 时间：2012-06-25T05:23:15.770
> 
> 标签：php, function, random

我们这个时代是否有任何 php 函数可以生成**绝对唯一的随机**字符串？或者换个说法，在我们这个时代如何在 php 中制作绝对唯一和随机的字符串？结合几个随机函数就足够了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T05:30:16.697

只是为了挑剔......如果它必须是独一无二的，那么它并不是真正的“随机”。随机性包括重复的可能性，因为生成随机状态不依赖（或参考）先前的状态。

您只想创建一个[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)吗？PHP 有几种生成随机 ID 的方法：

*   [`uniquid()`功能_](http://php.net/manual/en/function.uniqid.php)
*   [`com_create_guid()`功能_](http://php.net/manual/en/function.com-create-guid.php)

似乎其他一些人也[找到了这样做的方法。](http://phpgoogle.blogspot.com/2007/08/four-ways-to-generate-unique-id-by-php.html)

# android - 是否有任何 C++ 库可以通过蓝牙获取 android 手机的加速数据？

> ID：11183857
> 
> 赞同：0
> 
> 时间：2012-06-25T05:23:55.657
> 
> 标签：android, c++, visual-c++, bluetooth

我想在 Visual C++ 上开发一个接收安卓手机加速数据的应用程序。据我所知，有任何方法可以通过蓝牙从安卓手机发送此类数据，但我不确定如何在 PC 上获取数据，尤其是在 Visual C++ 上。是否有任何库或一些 API 可以通过蓝牙从 android 手机接收数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:37:35.530

默认情况下，Android 上的任何内置应用程序都不会通过蓝牙共享此类数据。您将不得不为此编写一个 Android 应用程序。

在这种情况下，数据传输将通过蓝牙串行端口连接进行。您可以编写一个应用程序以在您选择的平台和语言上接收该数据。我不确定如何用 VC 做到这一点。

正式回答您的问题：没有库可以开箱即用地执行您想要的操作，因为必须合并一个在目标设备上运行的应用程序。

# android - 在android中查找当前位置

> ID：11183859
> 
> 赞同：1
> 
> 时间：2012-06-25T05:24:18.260
> 
> 标签：android, google-maps

我正在尝试查找当前位置，这是我的代码。

```
 LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);        
        Location location =new Location(mlocManager.GPS_PROVIDER);      

 System.out.println("***longitude **"+location.getLongitude());
        System.out.println("***latitude **"+location.getLatitude()); 
```

但是当我运行应用程序时，它总是显示 0.0 任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:34:02.970

位置是异步获取的。您需要向您的 注册一个`LocationListener`，只要有新的位置信息可用`LocationManager`，`onLocationChanged(Location l)`就会调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:02:46.750

```
Location location =new Location(mlocManager.GPS_PROVIDER); 
```

写完此语句后，如果您将光标放在位置上，您将了解此语句的确切含义。

根据谷歌文档

> 以上构造一个新的位置。默认情况下，时间、纬度、经度和 numSatellites 为 0；hasAltitude、hasSpeed 和 hasBearing 为 false；并且没有额外的信息。

您需要开火`requestLocationUpdate`才能获得经纬度（如果有）。

此外，由于您在模拟器上运行此示例。您将需要手动模拟发送纬度和经度。

![在此处输入图像描述](../Images/8291bf77627bff2a3ab52bcc437d1b8b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T05:30:02.147

确保您在真实设备而不是模拟器中运行应用程序。您的设备也应该启用数据。

`Menifest`还要在文件中给出 uses:permission 。`FINE_LOCATION`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T05:58:33.257

我想你的意思是这样

```
Location location = mlocManager.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
```

但请注意，这只有在您的 gps 已经抓取了以前的位置时才有效。因此，在模拟器上，您需要在调用这条线路之前发送一个位置，而在真实设备上，gps 必须在线路之前激活并接收到一个位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T05:58:48.807

试试这个...

```
package com.ShowLocationActivity;
 import java.util.List;
 import java.util.Locale;
 import android.app.Activity;
 import android.content.Context;
 import android.location.Address;
 import android.location.Criteria;
 import android.location.Geocoder;
 import android.location.Location;
 import android.location.LocationListener;
 import android.location.LocationManager;
 import android.os.Bundle;
 import android.widget.TextView;
 import android.widget.Toast;

  public class ShowLocationActivity extends Activity implements LocationListener{
private TextView latituteField;
private TextView longitudeField;
private TextView placeName;
private LocationManager locationManager;
private String provider;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    latituteField = (TextView) findViewById(R.id.TextView02);
    longitudeField = (TextView) findViewById(R.id.TextView04);
    placeName=(TextView) findViewById(R.id.TextView06); 
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    if (location != null) {
    //  Toast.makeText(this, String.valueOf("Provider " + provider + " has been selected."), 600).show();
        latituteField.setText(String.valueOf(location.getLatitude()));
        longitudeField.setText(String.valueOf(location.getLongitude()));
    } else {
        latituteField.setText("Provider not available");
        longitudeField.setText("Provider not available");
    }

    try {
        Geocoder geo = new Geocoder(this.getApplicationContext(), Locale.getDefault());
        List<Address> addresses = geo.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
        if (addresses.isEmpty()) {
            placeName.setText("Waiting for Location");
        }
        else {
            if (addresses.size() > 0) {
                placeName.setText(addresses.get(0).getFeatureName() + ", " + addresses.get(0).getLocality() +", " + addresses.get(0).getAdminArea() + ", " + addresses.get(0).getCountryName());
            }
        }
    }
    catch(Exception e){
        Toast.makeText(this, "No Location Name Found", 600).show();
    }
}

@Override
protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, this);
}
@Override
protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this);
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    latituteField.setText(String.valueOf(location.getLatitude()));
    longitudeField.setText(String.valueOf(location.getLongitude()));

    try {
        Geocoder geo = new Geocoder(this.getApplicationContext(), Locale.getDefault());
        List<Address> addresses = geo.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
        if (addresses.isEmpty()) {
            placeName.setText("Waiting for Location");
        }
        else {
            if (addresses.size() > 0) {
                placeName.setText(addresses.get(0).getFeatureName() + ", " + addresses.get(0).getLocality() +", " + addresses.get(0).getAdminArea() + ", " + addresses.get(0).getCountryName());
            }
        }
    }
    catch(Exception e){
        Toast.makeText(this, "No Location Name Found", 600).show();
    }
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
    Toast.makeText(this, "Disabled provider " + provider,Toast.LENGTH_SHORT).show();
}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub
    Toast.makeText(this, "Enabled new provider " + provider,Toast.LENGTH_SHORT).show();
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

} 
```

}

这是 XML 文件

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="40dip"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="5dip"
        android:text="Latitude: "
        android:textSize="20dip" >
    </TextView>

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="unknown"
        android:textSize="20dip" >
    </TextView>
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/TextView03"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="5dip"
        android:text="Longitute: "
        android:textSize="20dip" >
    </TextView>

    <TextView
        android:id="@+id/TextView04"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="unknown"
        android:textSize="20dip" >
    </TextView>
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/TextView05"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="5dip"
        android:text="Place Name "
        android:textSize="20dip" >
    </TextView>

    <TextView
        android:id="@+id/TextView06"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="unknown"
        android:textSize="20dip" >
    </TextView>
</LinearLayout> 
```

这是清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.ShowLocationActivity"
  android:versionCode="1"
  android:versionName="1.0">
  <uses-permission android:name="android.permission.INTERNET"></uses-permission>
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission> 
   <application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".ShowLocationActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

对我有用..试试这个，它会为你工作 2.... :)

# build - 是否有任何免费/开源的构建系统，您可以自愿使用自己的计算机作为构建代理？

> ID：11183865
> 
> 赞同：7
> 
> 时间：2012-06-25T05:25:16.637
> 
> 标签：build, continuous-integration, jenkins, teamcity, build-automation

是否有任何免费或开源的构建系统，您可以自愿使用自己的计算机作为构建代理？我没有遇到过，但我喜欢它的想法。

## 目标

为需要在所有支持的平台（Windows、MacOS X 和 Linux）上独立构建的特定开源项目设置持续集成（或至少每晚）构建系统。

## 要求

1.  允许任意用户自愿将他们的计算机作为构建系统的新构建代理。
2.  支持 Windows、MacOS X 和 Linux 系统作为构建代理（如果构建定义适当地支持它）。
3.  允许我将生成的构建输出（例如，通常是二进制可执行文件或库）传输回中央位置。
4.  构建系统可以验证自愿代理是否能够运行构建定义，或者可以自动安装必要的工具来实现它。
5.  可以监视 GitHub（或任意 URL）的新提交（更改）以启动对可用构建代理的构建推送。
6.  如果没有必要类型的构建代理可用，则构建将保​​持排队，直到可以处理（不过，可能会在几天后从队列中删除）。

我知道我可以通过使用 Amazon Web Services[免费套餐](http://aws.amazon.com/free/)设置几个 Amazon EC2 实例来实现大部分目标，但是：

*   它仅免费使用 12 个月
*   它不提供 MacOS X 实例

## 我从哪里得到这个主意

1.  jQuery 的[TestSwarm](http://swarm.jquery.org/)：TestSwarm 是一个分布式 CI 设置，用于在多个浏览器中执行 JavaScript 测试。可用的浏览器由用户自愿提供他们的浏览器以“加入 swarm”（本质上是被捕获/连接到 Swarm 并能够接收指令以按需执行给定的测试套件。
2.  分布式计算项目，例如斯坦福的[Folding@Home](http://folding.stanford.edu/English/HomePage)软件和伯克利的[BOINC](http://boinc.berkeley.edu/)基础设施计划。
3.  Microsoft 的 Team Foundation Server (TFS) Team Build：虽然我通常鄙视 TFS，但它的 Team Build 系统基本上可以满足我的需求，它允许您指定能够运行给定构建定义的构建代理（服务器）池。Team Build 与我所寻求的最大区别在于 Team Build [大概] 仅使用受信任的受控服务器作为其构建代理（相对于随机提供的众包服务器）。

## 已知问题：安全！

虽然我希望自愿将您自己的计算机作为构建服务器的过程就像自愿将您的浏览器自愿加入 TestSwarm 一样简单，但当允许访问您的实际文件系统和命令处理引擎时，显然存在大量安全隐患：

*   客户端计算机（构建代理）将希望确保构建系统不会尝试在他们自愿提供的计算机上执行任何恶意操作。
*   构建系统将希望确保“不受信任”的客户端计算机（构建代理）不会产生恶意构建输出（例如，使用被破解的 GCC 版本来产生恶意软件/病毒缠身的二进制文件）。这是一个巨大的问题，可能*只能*通过让构建系统安装自己的软件（la Folding@Home）来解决，该软件将整个构建过程包装起来，这样构建代理就没有任何外部输入来构建（例如不依赖于用户必须安装的其他工具，例如编译器）。否则，构建系统必须至少要求两个不同的构建代理构建相同的二进制文件，以便可以比较和验证输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:49:01.080

詹金斯可以用奴隶做到这一点。请参阅[此文档](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)。您可以通过给它们（多个）标签并将构建“附加”到标签来对从属设备进行分组。Jenkins 从代理可以在权限有限的用户下运行。从属所有者可以启动和终止代理 - 因此他们可以确保没有安全问题。
一个潜在的问题是在构建过程中可能会关闭从站。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T14:37:53.587

我只在 Windows 上使用过它，但 TeamCity 可能会这样做。

# web-services - 如何使用一项服务接收多个应用程序的通知？

> ID：11183866
> 
> 赞同：0
> 
> 时间：2012-06-25T05:25:21.637
> 
> 标签：web-services, apple-push-notifications

有没有人知道是否可以使用通用 Web 服务（来自同一服务器）在多个 iOS 应用程序上发送苹果推送通知？

我能够在我的第一个应用程序（例如**ABC**是第一个应用程序）上发送推送通知，但是当我尝试使用相同的 Web 服务在另一个应用程序上发送推送通知（例如**XYZ**是第二个应用程序）时，它完成了该过程，设备收到了通知，但它显示**ABC app name 而不是 XYZ App name**。

我不想为我的每个应用程序创建服务。我应该尝试在我的所有应用程序中注册相同的服务，还是将服务作为单个应用程序发布？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:09:40.250

您可以使用相同的服务器和软件设置将推送消息发送到各种应用程序。消息发送到哪个 App 取决于属于您的特定 App 的 bundle id 的证书。使用 App ABC 的正确证书打开 SSL 套接字，然后向 App ABC 发送消息，使用 App XYZ 的证书打开 SSL 套接字，然后向 XYZ 发送消息。

# java - 如何使用 JPA 2 和 HBN maven 插件创建对休眠友好的 MySQL 数据库字段？

> ID：11183868
> 
> 赞同：0
> 
> 时间：2012-06-25T05:25:32.440
> 
> 标签：java, hibernate, maven, jpa

有什么方法可以使用 JPA 或休眠注释来指定字段应该在数据库中的确切类型和长度（根据 MySQL）？

例如：

```
@Entity
@Table { appliesTo="test" }
public class Test implements Serializable {

    private string info;

    public void setInfo(String i) {
       info = i;
    }

    @Column { name="id", length="25" }
    public String getInfo() {
        return info;
    }
} 
```

我想使用hibernate-maven-plugin对这个类进行逆向工程，我想在@Column注释中添加“varchar 35”或其他东西，这样当我进行逆向工程时，字段会按照我指定的方式创建并使用我指定的长度。

此外，在 java 字段（例如私有长年龄）和 getter 方法（我通常在哪里看到它）上使用“列”注释有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:40:14.690

就在这里。Column 注释中的属性[columnDefinition](http://docs.oracle.com/javaee/5/api/javax/persistence/Column.html#columnDefinition%28%29)就是为了满足这种需求。如果不需要对生成的 SQL DDL 进行如此详细的控制 - 长度、精度和比例属性可能很有用。

您不应该将持久性注释传播到字段和方法。只要它们始终如一地放置，就可以了。提供的持久性（如 Hibernate）选择它是否使用字段或方法来根据注释所在的位置来持久化值。如果两者都存在，则结果未定义且不太可能起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:52:21.423

这是示例

```
@Column(name = "delFlag", nullable = false, columnDefinition = "boolean default false")
private boolean delFlag;   

@Column(length = 30)
private String propertyState; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-26T09:32:28.127

实体中的字段存在访问模式的概念。如果您想使用混合访问模式（即在某些属性的字段上使用注释，而在其他属性上使用getter），您也可以这样做。

例如 ：

设置实体的默认访问模式。

```
@Entity
@Access(AccessType.FIELD)
public class Test implements Serializable {..} 
```

这将默认需要字段级别的注释。然后对于要在 getter 上注释的属性，将访问类型显式设置为 PROPERTY：

```
@Access(AccessType.PROPERTY)
@Column(length=25)
public String getInfo() { return info; } 
```

# javascript - 如何对多个项目使用一个函数 JEditable/JQuery

> ID：11183870
> 
> 赞同：0
> 
> 时间：2012-06-25T05:25:38.360
> 
> 标签：javascript, jquery, jeditable

我有用于使简单字段可编辑的简单 JS 代码：

```
<html>
<head>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jquery.jeditable.js"></script>
</head>
<body>
    <table border='1'>
    <div id="load-button" style="border:1px solid black; background-color:white;padding:5px;cursor:pointer;width:200px;text-align:center;border-radius:4px;">Load button</div>
    <b class="mouseover1" style="display: inline">mouseover me1</b>
    <b class="mouseover2" style="display: inline">mouseover me2</b>
    <script type="text/javascript" charset="utf-8">
        $(function() {
          $(".mouseover1").editable("echo.php", { 
              event     : "mouseover",
              style  : "inherit"
          });  
        });
    </script>
</body>
</html> 
```

我对JS的了解很少，我需要知道如何设置mouseover1字段和mouseover2的功能。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:41:28.927

使用选择器：

```
$(".mouseover1,.mouseover2") 
```

或者更好地使它们都属于同一类

# python - 给 openid 用户额外的信息

> ID：11183872
> 
> 赞同：6
> 
> 时间：2012-06-25T05:25:53.833
> 
> 标签：python, google-app-engine, openid, jinja2

所以我正在为 jinja2 模板平台上的 google appengine 用 python 编写一个应用程序。我已经让 OpenID 在我的网站上正常工作，它允许用户登录，我可以在右上角显示他们的电子邮件/ID。

现在我希望用户拥有自己的用户名，并能够存储一些关于他们的额外数据，例如站点访问和站点区域的某些帖子。

我知道我需要在数据库中创建一个包含用户和所有内容的表，但使用 OpenID 执行此操作的正确方法是什么。我想在有人第一次登录时自动创建用户，但我不太确定如何有效地做到这一点。我想我可以通过在登录后将它们重定向到一个页面来管理它，该页面检查他们在数据库中的 federated_identity，如果它已经存在，它只是将它们重定向到主页，但如果不存在，它会创建一个新用户。

有没有更有效的方法，这样我就不会在每次有人登录时都查询数据库，或者这是一种相当不错的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T10:28:43.687

您是对的，您必须创建自己的用户模型并存储额外的信息以及您在应用程序中拥有的任何业务逻辑。您所要做的就是存储一些独特的东西（`federated_id`例如）以及额外`username`的 ,`name`等。

使用 OpenID 登录后，您将检查该特定信息`federated_id`是否在您的数据存储中，您将返回该特定信息`user_db`，或者使用默认值创建一个新的并返回新创建的`user_db`.

重要的是，在您的请求中，您将始终处理您自己的`user_db`实体，而不是`users.get_current_user()`因为这基本上是只读的和有限的。

这是一个完整的示例，它还演示了一个带有函数的[基本处理程序类](https://stackoverflow.com/a/11181467/8418)，该`get_user()`函数将`user_db`在用户登录时返回您自己的实体，`None`否则。如果用户是第一次登录，则会使用一些默认值（`name`, `username`, `email`, `admin`, `federated_id`）创建一个新的 user_db 实体：

```
from google.appengine.api import users
from google.appengine.ext import ndb
import webapp2

class User(ndb.Model):
  name = ndb.StringProperty(required=True)
  username = ndb.StringProperty(required=True)
  email = ndb.StringProperty()
  federated_id = ndb.StringProperty()
  admin = ndb.BooleanProperty()

class BaseHandler(webapp2.RequestHandler):
  def get_user_db(self):
    federated_user = users.get_current_user()
    if not federated_user:
      return None
    user_db_qry = User.query(User.federated_id == federated_user.user_id())
    user_db_list = user_db_qry.fetch(1)
    #If that returns non empty list, then return the first element which is the user_db
    if user_db_list:
      return user_db_list[0]

    #Otherwise create a new user_db entity, with default values and return
    user_db = User(
        name=federated_user.nickname().title(),
        username=federated_user.nickname(),
        email=federated_user.email(),
        federated_id=federated_user.user_id(),
        admin=users.is_current_user_admin(),
      )
    user_db.put()
    return user_db

class MainHandler(BaseHandler):
  def get(self):
    self.response.headers['Content-Type'] = 'text/html'
    if self.get_user_db():
      self.response.out.write('Hello, %s!</br>' % self.get_user_db().name)
      self.response.out.write('<a href="%s">Logout</a>' % (users.create_logout_url(self.request.uri)))
    else:
      self.response.out.write('Hello, stranger!<br>')
      self.response.out.write('<a href="%s">Login</a>' % (users.create_login_url(self.request.uri)))

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

这个问题有很多不同的方法，但我认为这是一个很好的开始。

# javascript - 在某个滚动点开始页面

> ID：11183873
> 
> 赞同：32
> 
> 时间：2012-06-25T05:25:55.653
> 
> 标签：javascript, html, css, web

有没有办法（使用 CSS3、JS 或介于两者之间的任何东西）让页面从向下滚动的某个点开始？

我希望我的页面在加载时没有最初显示的标题（这意味着它在用户的实际视口之上）。

有没有简单/容易的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-25T05:36:33.970

您可以使用标准 javascript: [`window.scroll(x, y)`](https://developer.mozilla.org/en/DOM/window.scroll)。

考虑到您将在 处执行此操作，这应该工作得很好`onload`，即窗口应该从 (0, 0) 开始。反复尝试，`(x, y)`直到你的头球到达你满意的位置。当然，只要标题移动，您就需要更改它。

例子：

```
<body onLoad="window.scroll(0, 150)"> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-25T05:42:30.070

## HTML/DOM 解决方案

如果您有一个在标题之后包含您的内容的`id`给定`div`，那么您可能可以使用这种 URL 加载页面，`http://website.com/page#id`.

这将带您到 div 所在的位置。

## Javascript 解决方案

您可以`window.scroll(x,y)`在页面加载时使用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-02-29T17:14:32.880

当前的答案会导致页面明显“跳转”，或者要求您知道要跳转的确切像素数。

我想要一个跳过容器的解决方案，无论容器的大小/内容如何，​​这就是我想出的：

HTML

```
<div class="skip-me">Skip this content</div> 
```

CSS

```
// Hide the content initially with display: none.
.skip-me {
  display: none;
}
.unhide {
  display: block;
} 
```

JS

```
// Unhide the content and jump to the right place on the page at the same time
function restoreAndSkipContent() {
  var hidden = document.querySelector('.skip-me');

  hidden.classList.add('unhide');
  window.scroll(0, hidden.offsetHeight);
};
restoreAndSkipContent(); 
```

[工作演示在这里](http://codepen.io/bryanbraun/full/pyvypv/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-03-31T14:43:09.590

这些是非常简单的技巧：

1.  创建css偏移类并分配给body

    ```
    .offset{
         margin-top:-500px;
        } 
    ```

    这样该主体将加载从顶部偏移 500px

2.  然后将以下代码添加到正文

    ```
    <body class="offset" onLoad="window.scroll(0, 150)"> 
    ```

3.  然后使用jquery，在页面加载时删除偏移类

    ```
    $(document).ready(function(){
       $(".row").removeClass("offset");
    }); 
    ```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-25T05:44:56.387

**HTML - 命名锚点**

您也可以使用好的旧锚。使用定义命名锚点

```
 <a id="start">any text</a> 
```

这应该在必须考虑的地方进行定义。由于即使在屏幕底部也可以看到它，所以您可能需要将锚点设置在比要求低一点的位置。这样，我们将确保顶部不需要显示的内容被很好地隐藏。一旦定义为在页面加载时向下滚动，URL 应该是 page.aspx#start 而不是 page.aspx

```
<a href="#start">access within the same page</a>

<a href="page.aspx#start">access from outside the page</a> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-25T05:43:24.870

使用 javascript `scrollBy`。要使此方法起作用，必须将窗口滚动条的可见属性设置为 true。因此，请确保您的页面足够长，以便垂直滚动条出现。

```
<html>
<head>
</head>
<body onLoad="window.scrollBy(0,100)">
     <div style="height:300px;"> Some text </div>
     <div style="height:900px;"> Some text 2 </div>
</body>
</html> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-25T05:47:18.627

使用 Javascript `window.scroll`：

```
$(window).scroll(function(){ 
  if ($(this).scrollTop() > 100){ 
    $('something').hide();
  } 
  else{
      $j('something').show();

  }
});​ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-23T18:57:33.907

这对我有用。

```
<div class="demo">
        <h2>Demo</h2>
</div>

<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script>
        $(document).ready(function () {
            $('html, body').animate({
                scrollTop: $('.demo').offset().top
            }, 'slow');
        });
    </script> 
```

谢谢。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-25T05:29:56.997

jquery 中有一个名为 .scroll() 的函数。您可以使用该函数使标题仅在用户滚动站点时可见。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-11T23:49:20.923

我遇到了问题中提到的完全相同的问题：

> “我希望我的页面在加载时最初不显示标题”

我不是 Javascript 专家，但我认为我找到了一种聪明的方法，因为其他答案对最终结果并不满意。这是我的方式：

CSS：

```
#header {display:none} 
```

JS：

```
window.onscroll = function() {document.querySelector('#header').style.display = "block"}
window.onload = function () {window.scrollTo({top: 1,behavior: 'smooth'})} 
```

这是我运行的网站上的[视频预览。](https://dl.dropboxusercontent.com/s/bh5oibq7n5o2y2i/Z5jM567HrJ.mp4)

这对我来说很完美。1 像素向下滚动真的不是一个交易破坏者恕我直言，几乎不可能注意到，并且允许能够直接滚动顶部。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-25T13:08:04.553

**组合解决方案**

每个单一的 JavaScript 优先解决方案都可能（并且通常确实）在 pageLoad 事件之前导致打嗝。正如 Uday 建议的那样，实现无缝滚动加载的最佳方法是使用负 CSS 边距。

就个人而言，我使用了类似于 Uday 的代码片段，但稍作调整以使其在没有 JavaScript 的浏览器中也能工作，并且不会重复滚动声明。

```
<!doctype html>
<html>
<head>
    <style>
        /* Can be in an external stylesheet as well */
        /* This is the ONLY place where you will specify the scroll offset */
        BODY.initialoffset {margin-top: -100px; /* Or whatever scroll value you need */}
    </style>
    <noscript>
        <!-- Browsers without JavaScript should ignore all this margin/scroll trickery -->
        <style>
            BODY.initialoffset {margin-top: initial; /* Or 0, if you wish */}
        </style>
    </noscript>
</head>
<body onLoad = "(function(){var B=document.getElementsByTagName('body')[0],S=B.currentStyle||window.getComputedStyle(B),Y=parseInt(S.marginTop);B.className=B.className.replace(/\binitialoffset\b/g,'');window.scroll(0,-Y);})()">
</body>
</html> 
```

onLoad属性中的短自调用函数可以展开如下：

```
(function(){
    /* Read the marginTop property of the BODY element */
    var body=document.getElementsByTagName('body')[0],
        style=body.currentStyle||window.getComputedStyle(body),
        offsetY=parseInt(style.marginTop);
    /* Remove the initialoffset class from the BODY. (This is the ugly, but everywhere-working alternative)... */
    body.className=body.className.replace(/\binitialoffset\b/gi,'');
    /* ...and replace it with the actual scroll */
    window.scroll(0, -offsetY);
    })() 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-09T17:35:24.730

我发现@bryanbraun 的建议非常有用。我发现删除 window.scroll 对隐藏导航栏产生了很好的效果。我只是将它添加到我的文档的头部：

```
 <script>
        function restoreSkippedContent() {
          var hidden = document.querySelector('.onScrollHide');

          hidden.classList.add('unhide');
          // window.scroll(0, hidden.offsetHeight);
        };
      </script>
      <style>
        .onScrollHide {
          display: none;
        }
        .unhide {
          display: unset !important;
        }
      </style> 
```

然后在我的导航栏周围添加一个包装器和一个 onscroll 触发器而不是 onload：

```
<body onscroll="restoreSkippedContent()">
  <div class="navBarContainer onScrollHide">
    <nav> .... </nav>
  </div>
  ...
</body> 
```

这是不会对用户造成任何干扰的好效果，但是当他们向上滚动时，他们会看到导航栏:)

目前在[这里使用](https://weteachblockchain.org/developer-toolkit)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-06T09:25:15.200

```
 function ScroolPositionButtom() {
    var elment = document.querySelector(".right .chat.active-chat");
    elment.scrollTo(0, elment.scrollHeight);
} 
```

这对我来说是工作。我将此功能用于特定类。

# mysql - Mysql - 根据两列的前三个字母比较选择行

> ID：11183876
> 
> 赞同：1
> 
> 时间：2012-06-25T05:26:31.350
> 
> 标签：mysql, sql

下面的 mysql 表有两列。如何仅选择 A 列名称的前 3 个字母与 B 列名称的前 3 个字母匹配的行？

```
 ColumnA              ColumnB
      nameA1                nameB1  
      nameA2                nameB2
      nameA3                nameB3
      nameA4                nameB4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:31:44.580

```
SELECT * FROM tablename WHERE LEFT(ColumnA,3)=LEFT(ColumnB,3) 
```

不确定我是否正确理解了问题。您是否还想查看 ColumnA 的内容以包含字母字符以避免空格和数字或其他内容？如果是，那么您可能需要将[http://dev.mysql.com/doc/refman/5.0/en/regexp.html#operator_regexp](http://dev.mysql.com/doc/refman/5.0/en/regexp.html#operator_regexp)添加到其中。

# magento - Magento 亚马逊集成

> ID：11183882
> 
> 赞同：-1
> 
> 时间：2012-06-25T05:27:12.473
> 
> 标签：magento

我正在尝试在 Magento 中开发一个模块，该模块在 Amazon.com 上显示用于销售的 magento 产品。为此我做了很多研发，但我没有得到任何结果。此外，我还在寻找可以将 Magento 与 Amazon 集成的连接器或扩展。我有很多扩展，但它们都是付费扩展。请建议我的方法或建议我一个免费的连接器或扩展，以便我可以完成我的任务。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T06:23:27.807

试试[M2E Pro](http://www.m2epro.com/) - 它同时集成了 eBay 和 Amazon，而且是免费的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T12:31:55.157

Camiloo 将 Amazon Marketplace 与他们称为[ChannelUnity](http://www.channelunity.com/)的产品集成在一起。这是一个基于付费/订阅的设置，但我听说它们非常好。他们之前完全买断的 Magento 扩展，我也听说了一些好消息。

另一方面，这个 ChannelUnity 东西将有能力在未来集成到其他市场。显然 eBay 的目标是在 7 月底，而且他们也在考虑在未来的某个时间点将 Pixmania 和 Play.com 整合起来。

（我不是上述公司的附属公司，我只是觉得他们的产品很好。我最近和那里的代表谈过，听起来很有帮助）。

# c# - 在设置文件中初始化自定义类

> ID：11183886
> 
> 赞同：1
> 
> 时间：2012-06-25T05:27:47.003
> 
> 标签：c#, serialization, devexpress, settings, dockpanel

在我的 WinForms C# 应用程序中，我试图将自定义类保存在设置文件中。这是我当前的代码：

```
public class PanelSaver : ApplicationSettingsBase
{
  private DockingStyle ds;
  System.Drawing.Point location;
  System.Drawing.Size panelSize;

  [UserScopedSetting()]
  [SettingsSerializeAs(System.Configuration.SettingsSerializeAs.Xml)]
  public DockingStyle Style
  {
     get { return ds; }
     set { ds = value; }
  }
  public System.Drawing.Point Location
  {
     get { return location; }
     set { location = value; }
  }
  public System.Drawing.Size Size
  {
     get { return panelSize; }
     set { panelSize = value; }
  }
} 
```

DockingStyle 变量来自 DevExpress Dockpanels。

以下是设置文件中使用的对象：

![在此处输入图像描述](../Images/4c550a170b54af3c9bb2ba8a2f46fade.png)

当我尝试使用这些变量时，将它们传递给这个函数：

```
private void DockPanelSave(PanelSaver savingPanel, DockPanel realDockingPanel)//
{
   try
   {
      savingPanel.Location = realDockingPanel.Location;
      savingPanel.Size = realDockingPanel.Size;
      savingPanel.Style = realDockingPanel.Dock;
   }
   catch (Exception e)
   {
      MessageBox.Show(e.Message);
      throw new NotSupportedException("You may have added a new panel, and may not have added a corresponding " +
      "settings variable to hold it in the Settings.settings file");
   }

} 
```

我得到一个空错误。

我应该如何初始化设置文件中的值？我猜我需要输入某种 XML，但是我不知道生成它的正确步骤。对于我的空错误的这个或其他原因的任何指示将不胜感激

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-25T13:13:06.390

你可以通过[这个答案](https://stackoverflow.com/questions/8995194/using-linq-to-pull-from-ienumerablexelement-and-store-in-data-table/9035905#9035905)看到我展示了如何做你所要求的。

它不是内置的序列化，但您可以通过我的示例定义您的类并获得相同的结果。

[这是另一个例子](https://stackoverflow.com/questions/9881930/how-to-mark-up-your-c-sharp-object-to-deserialize-this-xml/9882118#9882118)，

[和另一个](https://stackoverflow.com/questions/10323352/reading-an-xml-configuration-data-file-from-c-sharp/10325517#10325517)

# json - 尝试从 web 服务获取数据表到 JSON 时出现问题

> ID：11183887
> 
> 赞同：0
> 
> 时间：2012-06-25T05:28:03.497
> 
> 标签：json, web-services

```
 function testWebservice() {

            var jsonParam = { DataID: 10 };
            $.ajax({
                url: "http://localhost/testwebservice/WebServices/abc.asmx/GetDataValues",
                type: "POST",
                dataType: "JSON",
                data: JSON.stringify(jsonParam),
                contentType: "application/json; charset=utf-8",

                success: function(msg) {

                    console.log(msg.d);
                },
                error: function(msg2) {
                    alert("Error occured" + msg2);
                }
            });          
        } 
```

这是从 web 服务获取数据的函数。问题是，webservice 正在返回一个数据表。我必须将网格与该数据绑定。但我猜不支持数据表格式或 json 格式。我没有遇到 listitem 的这个问题。有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T13:33:40.547

让我们一步一步调试它。

*   你有没有命名你的数据表 - 如果没有，那么首先命名它 DataTable dt = new DataTable("user");
*   如果是这样，但仍然没有任何结果，至少检查是否有任何工作，mabe尝试从另一端向您的客户端发送一个字符串。

它应该可以工作，尝试制作一个创建/填充此表并与我们分享的代码。

# svg - 实现 SVG 缩放/旋转变换（以及如何理解坐标系）

> ID：11183888
> 
> 赞同：3
> 
> 时间：2012-06-25T05:28:15.767
> 
> 标签：svg

所以我对 SVG 坐标系有点困惑。我正在做一个将 SVG 对象转换为多边形的项目（然后在 OpenGL 中显示）。我有所有的代码，包括矩形、圆、路径（使用曲线近似）等，并将它们转换为每个对象的一组点。到目前为止，这一切都很好。

我现在正处于实施转换的阶段。我已经编写了所有矩阵函数并准备就绪，但我对 translate(x,y) 和任何以 0,0 为中心的操作（主要是旋转和缩放）之间的关系感到困惑。

因此，假设我们在 0,0 处有一个对象。`rotate(45, 100, 100)`相当于`translate(100, 100) rotate(45) translate(-100, -100)`，但是如果我将对象移动到 100,100 并且旋转仍然应用在 0,0，这是否意味着旋转中心实际上相对于对象的原始位置发生在 -100,-100？

我想我的问题是如何`translate`影响对象的坐标系？似乎在某些情况下它用于将 0,0 移动到指定点*而不移动对象*，而在其他情况下它用于移动对象。

我对坐标系的理解完全有缺陷吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T15:49:34.927

我认为[SVG 规范](http://www.w3.org/TR/SVG/)非常清楚地解释了[坐标转换。](http://www.w3.org/TR/SVG/coords.html#TransformMatrixDefined)每次转换都意味着将当前坐标与 3x3 矩阵相乘。[`transform`您可以在属性](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)中指定的最通用的转换是 custom `matrix(...)`，而所有其他类型的转换（平移、旋转、缩放、倾斜）只是易于使用的快捷方式。最后，一切都以矩阵形式结束。

组合几个变换很简单，它只是意味着每个变换矩阵按顺序与其他变换矩阵相乘，跟踪所有变换意味着只记住从这个乘法得到的最终 3x3 矩阵，计算一个元素的最终坐标意味着只需将初始坐标的 3x1 矩阵与该 3x3 矩阵相乘。

所以，我的建议是只使用矩阵并忘记手动应用每个转换。

# matlab - Matlab中的凸优化

> ID：11183894
> 
> 赞同：2
> 
> 时间：2012-06-25T05:29:36.730
> 
> 标签：matlab, optimization, convex

我想解决以下优化问题：

非乳胶：给定 x 和 mu，找到

argmin_p ||xp||_2 st ||p||_2 < 亩。

乳胶：

给定`$\mathbf{x}$`and `$\mu$`，找到

```
$\mathrm{argmin}_p \|\mathbf{x}-\mathbf{p}\|_2 \;\; \mathrm{s.t.}\;\;\|\mathbf{p}\|_2 \leq \mu$, 
```

这是一个凸集上的凸函数。我一直在使用 Matlab `fmincon`，但它太慢了。到目前为止，搜索引擎结果给我带来了比我正在寻找的更具理论性的材料。我不是第一个想要解决这个问题的人，而是希望找到一个现有的高效的 Matlab 实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T06:00:52.443

[cvx](http://cvxr.com/cvx/)可以很简单地处理这个问题。即使你不熟悉它，它的语法也很直观：

```
% test data
n = 1e4;
x = randn(n,1);
mu = 1;

cvx_begin
variable p(n)
minimize norm(x-p)
subject to
norm(p) <= mu
cvx_end 
```

在我的系统上，对于 10^4 个变量，这需要不到一秒钟的时间。

# iphone - 更改按钮框架时按钮操作不起作用

> ID：11183898
> 
> 赞同：2
> 
> 时间：2012-06-25T05:29:58.400
> 
> 标签：iphone, objective-c, ipod

我正在尝试根据方向更改更改按钮框架，但按钮操作未检测框架是否更改。

" `addButtonsOnScrollView`" 方法是从 " `viewWillAppear`"方法中调用的

这是我的代码

```
//scaleFactor = 320 if portrait orientation scaleFactor= 480 if landscape orientation

- (void) addButtonsOnScrollView 
{ 
   containerViewForButtons = [[UIView alloc]initWithFrame:CGRectMake(scaleFactor-100, 22, 100, 37)];
      addButton = [UIButton buttonWithType:UIButtonTypeCustom];
  [addButton addTarget:self action:@selector(addFriend:)forControlEvents:UIControlEventTouchDown];
  [addButton setBackgroundImage:[UIImage imageNamed:@"add_btn.png"] forState:UIControlStateNormal];
  addButton.frame = CGRectMake(0, 0, 37, 37);   
  [containerViewForButtons addSubview:addButton];
    [self.view addSubview:containerViewForButtons];
}

- (void) addFriend:(UIButton *) button {
   NSLog("Button clicked....");
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 // Return YES for supported orientations
   if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) {

       [self layoutLandscapeView];
      }
      else if (interfaceOrientation == UIInterfaceOrientationPortrait) {

       [self layoutPortraitView];
      }
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}
- (void) layoutLandscapeView {

     containerViewForButtons.frame = CGRectMake(380, 22, 100, 37);

}
- (void) layoutPortraitView {

    containerViewForButtons.frame = CGRectMake(220, 22, 100, 37);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T05:52:10.797

您是否将按钮添加到滚动视图（从方法名称看起来像）？当您旋转时，您的滚动视图的内容大小很可能没有得到更新。这就是按钮无法检测到触摸的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:23:54.867

尝试这个......

```
- (void) layoutLandscapeView 
{

   [containerViewForButtons removeFromSuperview];
   containerViewForButtons.frame = CGRectMake(380, 22, 100, 37);
   [self.view addSubview:containerViewForButtons];
}
- (void) layoutPortraitView 
{

   [containerViewForButtons removeFromSuperview];
   containerViewForButtons.frame = CGRectMake(220, 22, 100, 37);
   [self.view addSubview:containerViewForButtons];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T05:33:15.530

最初创建`UIButtonTypeRoundRect`而不是`UIButtonTypeCustom`. 这样您就可以看到 Button 的可见性。检查按钮可见且可触摸。

另一件事可能是 Change `UIControlEventTouchDown`to `UIControlEventToucUpInSide`That 会帮助我猜。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T05:37:35.717

尝试设置`containerViewForButtons.clipsToBounds = YES;`只是检查按钮是否仍在视图框架中并且没有被切断。如果`clipsToBounds`设置为 NO，您仍然会看到该按钮，但它不会拦截任何触摸，因为它超出了`containerViewForButtons`范围

# android - 选择框不适用于 iscroll4

> ID：11183899
> 
> 赞同：0
> 
> 时间：2012-06-25T05:30:00.367
> 
> 标签：android, iscroll

与 iscroll4 一起使用时选择框在 htc 野火（Android 版本 2.2）（屏幕分辨率 240x320）、htc 图例（2.1）（320x480）中无法正常工作..这是 iscroll 或选择框或操作系统版本的问题吗？它在更高的 android 版本和更高的屏幕分辨率下在这些相同的操作系统版本中正常工作。我已经尝试过解决方案

[在页面中加载/使用iscroll后组合框不起作用](https://stackoverflow.com/questions/10006606/combo-box-not-working-after-load-use-iscroll-in-page)

[iScroll 4 不适用于表单 <select> 元素 iPhone Safari 和 Android 浏览器](https://stackoverflow.com/questions/5745374/iscroll-4-not-working-with-form-select-element-iphone-safari-and-android-brows)

但没有解决我的问题..任何人都可以帮助..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:45:58.557

您只需要在 iscroll 的加载程序中更改此行：

更改此行：

```
myScroll = new iScroll('wrapper'); 
```

为了这：

```
myScroll = new iScroll('wrapper', {
useTransform: true,
zoom: false,
onBeforeScrollStart: function (e) {
   var target = e.target;
   while (target.nodeType != 1) target = target.parentNode;

   if (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA')
   e.preventDefault();
   }
}); 
```

# jquery-mobile - 在 iOS 中加载外部资源时遇到问题（不是白名单问题）

> ID：11183919
> 
> 赞同：0
> 
> 时间：2012-06-25T05:33:31.547
> 
> 标签：jquery-mobile, cordova, xcode4.2, ios-simulator

我有一个 Cordova 应用程序，它运行 jQuery 移动框架并通过 ajax 从远程站点加载页面及其脚本/样式/图像（按需）。这一切都在Android中完美运行。

在 xcode + iOS sim 中加载相同的应用程序时，图像拒绝显示，`$.mobile.base`is`undefined`并将 CSS 附加`<link>`到`<head>`失败。我已附加到该`pageload`事件，以便`<head>`手动添加在 ajax 获取的页面中引用的资源，因为 jQm 默认只关注`<body>`。我怀疑这是一个白名单问题，因为我将域添加到外部主机，并且页面本身加载与使用`$.ajax`. 一切都来自同一个域。

Cordova 上的版本是 1.7。

有没有人知道为什么图像和 CSS 无法加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:12:38.330

这是 jQuery mobile 中的一个错误，特别是`$.mobile.path.get()`. [我在 github 上](https://github.com/jquery/jquery-mobile/issues/4633)提交了问题。

# android - 如何将自定义日志发送到 Google Play 开发者控制台？

> ID：11183923
> 
> 赞同：1
> 
> 时间：2012-06-25T05:34:00.313
> 
> 标签：android, google-play

我已将我的 android 应用程序上传到**Google Play**。我的应用程序运行良好。但在某些设备上，它有一些问题。每当我的应用程序崩溃时，Google Play 开发者控制台都会收到该错误。就像是：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.asdasd.dfgdfgdfgd/com.asdasd.dfgdfgdfgd.SplashScreenActivity}: android.view.InflateException: Binary XML file line #19: Error inflating class android.widget.ImageView
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
at android.app.ActivityThread.access$1500(ActivityThread.java:121)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3701)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #19: Error inflating class android.widget.ImageView
at android.view.LayoutInflater.createView(LayoutInflater.java:518)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:227) 
```

使用这种日志，我无法找到产生该错误的 android 设备以及使用什么 android 操作系统。

**有没有办法在应用程序崩溃时将自定义日志发送到开发者控制台？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T06:00:03.467

不，Android 自动错误报告不值得使用。用户评论与错误分开，您无法得知它来自哪个设备。

试试[http://www.bugsense.com/](http://www.bugsense.com/)，因为它更全面且免费，低使用率。您可以使用此功能将自定义添加添加到您的日志中，但仅限于付费帐户。

更新：Bugsense 现在是 Splunk。另一种选择是[https://fabric.io](https://fabric.io)

# javascript - 锁定网页的 div 并专注于单个 div

> ID：11183925
> 
> 赞同：0
> 
> 时间：2012-06-25T05:34:07.823
> 
> 标签：javascript, jsp

如何将焦点设置在一个div（div id =rotate）并锁定网页中的其他div，直到该div的工作完成？旋转 div 包含一个旋转的图像，直到从数据库中提取数据？我必须阻止用户在网页中进行其他工作，直到从 db 中提取数据并显示@另一个 div (div id= display_db)？

**伪代码：**

```
while(clicked on div id = rotate )
lock other divs of webpage and,

div id = rotate
    rotate image until data is extracted from db
then
    display at another div id = display_db

unlock all divs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:58:43.307

我认为您正在寻找所谓的“模态窗口”。这将在您的页面上方添加一个图层，阻止所有鼠标输入以防止在一段时间内与任何元素进行进一步交互（例如，直到单击“确定”按钮，或者在您的情况下，某些服务器请求已完成）。

例如，请参阅 jQuery BlockUI 插件：http: [//malsup.com/jquery/block/#page](http://malsup.com/jquery/block/#page)

# jwplayer - 如何在不重新启动当前播放视频的情况下加载播放列表

> ID：11183926
> 
> 赞同：1
> 
> 时间：2012-06-25T05:34:18.693
> 
> 标签：jwplayer

当我们向播放列表添加新项目时，在播放视频时使用以下代码。

```
var playlist = jwplayer().getPlaylist();
    var newItem = {
        file: videoUrl,
        image: videoThumb,
        title: videoTitle
    };
    playlist.push(newItem);
    jwplayer().load(playlist); 
```

添加项目时，当前视频将重新启动。但我不希望视频被打断。有人知道怎么做吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T17:18:01.227

```
var curpos = jwplayer().getPosition();
var playlist = jwplayer().getPlaylist();
var newItem = {
    file: videoUrl,
    image: videoThumb,
    title: videoTitle
};
playlist.push(newItem);
jwplayer().load(playlist).onPlay(function () {
    jwplayer().seek(curpos);
}); 
```

获取当前播放项目的位置，获取播放列表，将项目添加到播放列表，加载播放列表并使用搜索和位置变量继续播放。您可能必须获取当前播放项目的索引，以便在播放列表加载后返回该项目，然后继续播放。

# c# - 选择特定复选框时如何在特定的gridview中显示数据？

> ID：11183930
> 
> 赞同：0
> 
> 时间：2012-06-25T05:35:02.500
> 
> 标签：c#, asp.net

我在 1 个面板中有 6 个复选框，在其他七个不同的面板中有 6 个网格视图。当我选中复选框 1 时，数据应显示在 gridview 一中，依此类推。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:47:25.543

尝试这个

```
 void firstcheckbox_CheckedChanged(object sender, EventArgs e)
        {
           dridview1.Datasource=something;
           dridview1.Visible=firstcheckbox.Checked;
        } 
```

并重复其他

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:54:42.207

请设置所有复选框的 `AutoPostBack="True"`并处理每个复选框的单击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T05:52:15.777

`gridview`您必须在 CheckBox的事件中绑定数据`OnCheckedChanged`： 例如：您必须通过以下方式在复选框中定义事件

```
 <asp:CheckBox id="checkbox1" runat="server"
                        AutoPostBack="True"
                        Text="CheckBox1"
                        OnCheckedChanged="CheckBox1_Clicked"/>. 
```

你必须实现事件处理程序：

```
 void CheckBox1_Clicked(Object sender, EventArgs e) 
      {

         //Here,bind the data in respective gridview

      } 
```

注意：对于`checkboxlist`，您必须通过 `OnSelectedIndexChanged`以下方式定义事件而不是 OnCheckedChanged 事件：

```
 <asp:CheckBoxList id="checkboxlist1" 
           AutoPostBack="True"
           OnSelectedIndexChanged="CheckBox1_Clicked"
           runat="server"> 
```

对于 CheckBoxList`OnSelectedIndexChanged`事件处理程序实现：

```
 void CheckBox1_Clicked(Object sender, EventArgs e) 
  {
     // Iterate through the Items collection of the CheckBoxList 
     // control and bind the data in gridview
     for (int i=0; i<checkboxlist1.Items.Count; i++)
     {

        if (checkboxlist1.Items[i].Selected)
        {

         //Bind the data here in respective gridview

        }

     }

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T06:08:39.803

在`Page_Init`事件处理程序中，`gridbox.visible`根据选中的复选框修改属性。

# rest - 参数组合的 HTTP 状态代码无效？

> ID：11183933
> 
> 赞同：1
> 
> 时间：2012-06-25T05:35:13.670
> 
> 标签：rest, http-status-codes

我已经使用名为 project 和 device 的两个资源创建了一个安静的 Web 服务。它旨在使用诸如“/project/{projectId}/device/{deviceId}”之类的 URI 来访问项目中的特定设备。但是，如果设备不属于该项目，则没有任何意义。如果 projectId 和 deviceId 不匹配，系统应该返回什么状态码？

1.  HTTP 400 错误请求：不太可能，因为请求的语法是正确的。

2.  HTTP 403 Forbidden：很可能，但我想在项目或设备被禁用时返回 403。

3.  未找到 HTTP 404：projectId 和 deviceId 都存在。他们只是不匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T05:36:01.847

404 未找到

这表明 URL**整体**上不对应任何资源。

从[RFC 2616 秒 10.4.5](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.5)：

> 服务器未找到任何与请求 URI 匹配的内容。没有说明这种情况是暂时的还是永久性的。

但是，您始终可以在正文和标题中提供其他信息。例如，您可以在正文中放置相关项目 URI 和相关设备 URI 的链接，并说明设备与项目无关。

```
404 Not Found

The project http://example.com/project/1234 does not contain the device
http://example.com/device/4321 
```

“400 Bad Request”状态应该只用于有语法错误的请求。从[RFC 2616 秒 10.4.1](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.1)

> 由于语法错误，服务器无法理解该请求。

“403 Forbidden”语义有点模糊。

# testing - 软件测试中的“测试项目”和“测试条件”

> ID：11183935
> 
> 赞同：-2
> 
> 时间：2012-06-25T05:35:28.913
> 
> 标签：testing, function-points

据我所知，在编写测试用例时，第一步/任务是确定测试项/功能点和测试条件。什么是“测试项目”和“测试条件”，识别它们的过程/方式是什么？请举例说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T05:50:51.780

1) 测试项目：要测试的单个元素。“测试对象”中基本上有很多测试项目，实际上是要测试的组件/子系统。此处无需引用示例，因为它是不言自明的。

2) 测试条件：可以通过一个或多个测试用例验证的组件或系统的项目或事件，例如功能、事务、特性、质量属性或结构元素。例如，对于`username`注册表单上的字段，测试条件可能是
- 它不应该以非字母开头
- 在第一个输入字符之后最多可以包含两位数字且没有非字母数字字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T11:36:51.403

测试条件是测试应用程序应遵循的过程的条件。

例如： – 您有登录表单。测试条件1：-当用户名和密码有效时，应用程序将继续前进。以上是测试条件，它是测试过程将通过的基本条件。

测试项：测试项表示软件应用程序中需要测试的所有项目和不需要测试的项目......

示例：假设我们开始测试电子商务网站，最初我们需要测试需要的项目（即）
1.我们需要验证客户注册表 2.结帐流程是主要项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-28T18:37:56.347

在 IEEE 829 测试计划的上下文中，“测试项”是指正在测试的代码包。根据教科书《*软件测试：ISTQB-ISEB 基础指南》*，“测试项是作为测试对象的软件项。软件项是源代码、目标代码、作业控制代码或控制数据”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T05:52:41.143

测试项目：要测试的单个元素。通常有一个测试对象和多个测试项目。

测试条件：可以通过一个或多个测试用例验证的组件或系统的项目或事件，例如功能、事务、特性、质量属性或结构元素。

例如：测试对象：登录表单

测试项目：登录认证

测试条件：1）用户名和密码都为空 2）用户名为空，密码无效.....等等

有帮助吗？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-10-16T12:05:45.500

**案例1**：首先将其作为“用户名和密码”并具有有效数据..

**Case2** : 用户名和密码应接受最少 6-8 个字符

**Case3**：用户名字段应该接受“字母数字”，密码也应该接受字母数字和特殊符号。

**Case4**：用户名和密码不应该接受空值。

**案例5**：将用户名视为有效，密码字段为空。应该显示验证。

**案例6**：将用户名作为空，密码字段作为有效数据。它应该显示验证。

**Case7**：用户名和密码字段都像 min-1 个字符一样无效。不应接受。

**案例 8**：用户名和密码字段都接受无效的详细信息，例如 Max+1 个字符。不应接受。

**案例 9**：密码应该接受 min+mid/2 个字符。

**案例 10**：用户名和密码字段应接受有效数据，例如 min+1 和 Max-1 个字符。

# package - 为什么“go build”找不到包？

> ID：11183937
> 
> 赞同：5
> 
> 时间：2012-06-25T05:35:36.530
> 
> 标签：package, go

我安装了一个`test0`包`$gopath\pkg\windows_386\hello\test0.a`，但是当我构建一个依赖于`test0`包的主包时，编译器说：`import "hello/test0": cannot find package`.

为什么会这样？

我有两个 go 文件：

`$gopath/src/hello.go`

```
package main

import (
    "fmt"
    "hello/test0"
)

func main() {
    fmt.Println(test0.Number)
} 
```

`$gopath/src/hello/test0/test0.go`

```
package test0

const (
    Number int = 255
) 
```

起初，我运行`go install hello/test0`，它生成`$gopath\pkg\windows_386\hello\test0.a`

然后，我删除目录`$gopath/src/hello`

最后，我运行`go build hello.go`，编译器说`hello.go:5:2: import "hello/test0": cannot find package`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:09:42.703

目前这似乎通常不可能：[https ://code.google.com/p/go/issues/detail?id=2775](https://code.google.com/p/go/issues/detail?id=2775)

也许对于 Go1.1

Dave 的一个技巧（我没有测试过）：

> 对于名为“hello”的包，go 工具将在 $GOPATH/src/hello 中查找 .go 源，并且仅当 .a 文件的时间戳在 .go 文件的最新时间戳之前时才重新构建。欺骗它只接受 .a 文件的一种简单方法是将虚拟 .go 文件放入正确的 src 目录中，并将其时间戳设置为 .a 文件之前的时间戳。

*（这是一个社区答案，使用[golang-nuts 上所说的内容](https://groups.google.com/forum/?fromgroups#!topic/golang-nuts/F74GAxN_SOs)）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:18:05.847

为什么要删除源？go 工具中的 build 命令用于构建包及其所有依赖项。为此，它会检查包的来源以查看它们是否因更改而需要构建。如果找不到它们，它会将它们视为未安装。

如果您真的只想处理二进制发行版，则需要直接使用编译器和链接器。你可以在这里找到关于这些的文档：http: [//golang.org/cmd/](http://golang.org/cmd/)

# java - 弹簧集成

> ID：11183940
> 
> 赞同：6
> 
> 时间：2012-06-25T05:36:02.173
> 
> 标签：java, spring, jms, spring-integration, message-queue

我们的应用程序是使用 Spring Integration Framework 设计的。完整的消息操作流从侦听队列开始，其中使用了 JMS 消息驱动的适配器，之后定义了基于通道的队列端点，并且每个端点都由服务激活器处理。

我们目前处于性能阶段，我们正在产生 200 条消息请求。最初我们观察到消息不是并行执行的，经过阅读后发现通过向 JMS 消息驱动的侦听器适配器添加 concurrent-consumer 和 max-concurrent-consumer 属性将有助于启用多线程模式。确实，这有所帮助，但仍处于进程之间，我仍然看到单线程效果。这是由于端点的定义方式造成的吗？为每个端点添加队列容量有什么好处？您是否认为通过向每个 Channel 端点定义添加队列容量将再次有助于在多线程模式下运行。

根据要求的设计快照：

![动作流](../Images/87193b9a766d8d907721f5a773f337a1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:00:01.560

查看您的流程图，看起来流程有很多单线程元素，并且可以优化为更多并发，并有望获得更高的吞吐量。

从消息驱动的通道适配器开始（您还没有显示配置），可以配置**为具有超过 1 个默认使用者**，并且可以使**每个消耗周期消耗合理数量的消息**。

经过消息驱动的通道适配器，将消息放入直接通道 1 的线程将不幸地运行其余的流程，因为其他任何地方都没有缓冲，所以当您的消息被放入“直接通道 1”时，它将立即在同一个线程中调用路由器，然后在同一个线程中调用服务激活器和邮件适配器或 JMS 出站通道适配器。此处的更改可能是**引入队列通道而不是直接通道 1**，这样使用消息的线程只需将消息放置在队列通道中即可完成。

除了直接通道 1（更改为队列通道 1），我认为它可以是单线程的，具体取决于您的流量有多快或多慢，**如果说邮件适配器很慢，那么直接通道 4 也可以作为队列通道**，与**直接频道 5**

您能否看看这些以粗体突出显示的更改是否有助于改善流程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:28:24.090

查看频道的确切定义会很有帮助。

默认情况下，Spring 通道在发送者的线程中使用它的消息。换句话说，它是同步的。如果您希望通道异步使用消息，则必须指定一个 TaskExecutor。见[http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/scheduling.html](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/scheduling.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T22:32:45.723

为了提高性能，我建议使用带有任务执行器的 executorchannel 来控制线程池大小的数量。这样，当消息到达 jms 队列时，消费者会收到消息并在单独的线程中处理流。请记住，在这种配置中，多线程工作由 taskexecutor 通道执行，taht 将在单独的线程中执行消息的接收，因此您已经很好地考虑了您想要的多线程等级。

对于队列消息通道，确实需要一个轮询器来轮询通道以执行接收，队列容量是幕后原子队列的容量。

你可以在xml中这样配置am executor channel

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:si="http://www.springframework.org/schema/integration"
       xmlns:tx="http://www.springframework.org/schema/task"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/integration 
        http://www.springframework.org/schema/integration/spring-integration.xsd 
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd">

       <tx:executor id="taskExecutor" pool-size="10" queue-capacity="10"/>
       <si:channel id="ch" >
              <si:dispatcher task-executor="taskExecutor"/>       
       </si:channel>
</beans> 
```

或以这种方式在 java-dsl

```
 @Bean
    public IntegrationFlow storeBookPageByPage(ConnectionFactory connectionFactory,
                                               @Qualifier("createBookQueue") Destination createBookQueue,
                                               @Qualifier("createBookResultQueue") Destination createBookResultQueue,
                                               PdfBookMasterRepository pdfBookMasterRepository,
                                               BookRepository bookRepository){
        String tempFilePathBaseDir = environment.getProperty("bookService.storeBookPageByPage.tempFilePathBaseDir");

        return IntegrationFlows.from(Jms.messageDriverChannelAdapter(connectionFactory)
                .destination(createBookQueue)
                .errorChannel(storeBookPageByPageErrorChannel()))
                .channel(channels -> channels.executor(Executors.newScheduledThreadPool(5)))
                .....

        } 
```

# jquery - 动态加载内容时如何添加 jQuery 事件？

> ID：11183943
> 
> 赞同：0
> 
> 时间：2012-06-25T05:37:03.393
> 
> 标签：jquery

我有以下内容：

```
$("#menu, #home")
    .on('click', 'a[href^="/C"], a[href^="/City"], 
       function (event) { 
```

但是#menu 的内容是动态加载的。

```
<div id="cityList" class="columns menu-list">
   <ul id="menu" class="controls-buttons question-grid">
      <li> </li>
      ......
      ...... 
```

即使#menu 内容尚不存在，如何才能使上述 jQuery 工作？

# java - 泛型树和泛型节点 Java

> ID：11183945
> 
> 赞同：1
> 
> 时间：2012-06-25T05:37:16.900
> 
> 标签：java, generics

我想实现一个通用 TreeNode 和一个通用树。我在 stackoverflow 和其他地方看过几个例子，但不能完全理解。

```
public interface Node<K, V>
{
    K getId();         
    V getData();
    K getParentId();  
    void addChild(Node<K, V> child);
    List<Node<K, V>> getChildren();
}

public class Tree<K, V> 
{
   private Node<K, V> root;
   public void loadData(Map<K, V> data)
   {
         // by figuring out the root node from map, populate tree
         // root node is the one with parentId as null
         // and the logic follows. Simple level order insertion 
   } 
} 
```

虽然上面的代码服务于我的目的，但我想了解是否有更好的方法来实现这一点。

就像将 Tree 声明为

```
public class Tree<T extends Node<?, ?> 
{
   private T root;
   public void loadData(Map<K, V> data) 
   {
         // by figuring out the root node from map, populate tree
         // root node is the one with parentId as null
         // and the logic follows. Simple level order insertion 
   } 
} 
```

在上述情况下，我的数据加载方法应该驻留在哪里？一些 Util 类？

基本上，我想了解在创建泛型类而不是泛型类型时要遵循的原则。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:59:58.570

如果您需要孔树类型泛型，这是我能想到的唯一选择：

```
 public class Tree<K extends Object, V extends Object, T extends Node<K, V>>
    {
       private T root;
       public void loadData(Map<K, V> data) 
       {
             // ...
       } 
    } 
```

我不确定我是否明白了你的意思，从这个问题中你的需求是什么并不清楚，所以如果这没有意义或者不完全是你所需要的，请在否决我之前让我知道（：

问候。

# javascript - iOS/Android Webview 中的 Twitter Web Intents - 任何重定向/回调 URL？

> ID：11183946
> 
> 赞同：11
> 
> 时间：2012-06-25T05:37:22.650
> 
> 标签：javascript, uiwebview, webview, twitter, twitter-oauth

Twitter Web Intents 提供了方便的 JS 库，允许用户从外部网站发布推文。

```
 <script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
  <p><a href="https://twitter.com/intent/tweet?text=textToTweet">link</a></p> 
```

这在移动浏览器上非常有用，通过打开一个带有 twitter 文本区域的新窗口供用户提交其推文。一旦推特关闭弹出窗口，用户就会回到原始页面。

然而，在使用 webviews 的本机应用程序的上下文中（一个很好的例子是 facebook webview），流程似乎被打破了。它不会打开弹出窗口或新窗口，而是将当前 web 视图重定向到 twitter 页面。从那里用户无法返回原始页面。

是否有任何参数可以传递给 [https://twitter.com/intent/tweet](https://twitter.com/intent/tweet)，以便 twitter 在发推文或取消后重定向回用户页面。我也尝试过使用 twitter @anywhere，但推文框甚至没有显示在 iOS UIWebview 上。

仅客户端流程是否有任何替代方案？

# salesforce - 堆大小相关错误

> ID：11183958
> 
> 赞同：-1
> 
> 时间：2012-06-25T05:38:43.393
> 
> 标签：salesforce, apex-code, visualforce

如何增加堆大小？或者如何克服与堆大小相关的问题。我面临与堆大小相关的错误。我的错误是：

Apex 堆大小太大：9264402 页面 page1 中组件的表达式“{！method}”中出现错误

我在变量中使用了瞬态关键字，但它对我不起作用。我在页面上显示表格，如果我使用瞬态关键字，我的表格内容不会显示在我的页面上。

所以，如果你知道如何解决这个问题，请给我回复。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:41:59.067

将成员变量标记为`transient`意味着您不需要跨 HTTP 请求维护变量的值，因此它永远不会作为视图状态的一部分发送到页面。

从可用的有限信息中，我只能建议两件事（在这里发布代码会有所帮助）：

1.  您在某处使用内存中的数据效率低下，当不再需要它们时，您可以通过清除集合（或将它们设置为空）来减少使用量。
2.  您只是从数据库中加载了太多数据。看起来这是一个利用新 SOQL`OFFSET`语句并实现某种分页的好地方，这样您就不会一次显示所有数据（或者甚至只是限制您`LIMIT X`的查询结果）。

# jquery - 在 iPad 上设置日期输入的值

> ID：11183959
> 
> 赞同：10
> 
> 时间：2012-06-25T05:38:47.560
> 
> 标签：jquery, ipad, html, mobile-safari

**WEB APP**不是原生的，没有Objective-C

这太简单了，让人心疼。

```
 <input type="date" /> 
```

完成使用 iPad 原生日期选择器。然后用jQuery设置初始值

```
 $('input[type="date"]').val('Jun 25, 2012'); 
```

导致输入字段为空。上面的 jQuery 在 ie7-9、chrome、safari 和 FF 中运行良好，但在 iOS 中却不行！

我没主意了。有谁知道解决方法？或者为什么会这样？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T05:42:28.177

在 iOS 5 上为 Safari 试试这个

```
 $('input[type="date"]').val('yyyy-MM-dd'); 
```

您可以使用该函数将您使用的日期类型转换为`yyyy-MM-DD`JavaScript 中的类型。`Date()`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T21:26:15.387

对于 iOS6，需要 ISO 格式“YYYY-MM-DDTHH:mm:ss.sssZ”：

```
var now = new Date().toISOString();
$("input[type=datetime]").val(now); 
```

# php - PHP curl POST 到远程 Web 服务调用从服务器返回 curl 错误 7，但从 localhost 可以正常工作

> ID：11183960
> 
> 赞同：1
> 
> 时间：2012-06-25T05:39:09.710
> 
> 标签：php, post, curl

我有一个 php 脚本，它发出一个 curl POST，其中包含对远程 Web 服务的数据调用（在我同事的个人计算机上运行）。当我从本地主机运行脚本时，它工作正常并返回预期结果，但是当我将脚本上传到服务器（共享，非专用）时出现 curl 错误 7（无法连接到主机）和 HTTP 状态代码 0 和运行。

我尝试使用相同的脚本向雅虎 API Web 服务调用发出 POST，它可以在服务器和本地主机上运行。

我提到的 Web 服务在我同事 PC 上的端口 8080（不是 80）上运行，我通过他的 IP 地址（静态）访问它。

 `````
error_reporting(E_ALL);

$request =  'http://xx.xx.xx.xx:8080/services/dataconsume';

$postargs = json_encode(array(
   'x'=> '10',
   'y'=> '20'
   ));;

$session = curl_init($request);

curl_setopt ($session, CURLOPT_POST, true);
curl_setopt ($session, CURLOPT_POSTFIELDS, $postargs);
curl_setopt($session, CURLOPT_HEADER, true);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
curl_setopt($session,CURLOPT_FOLLOWLOCATION,true);

$response = curl_exec($session);
echo "CURL ERROR NO : ".curl_errno($session); //returns 7
echo "<br />CURL STATUS : ".curl_getinfo($session, CURLINFO_HTTP_CODE); //returns 0
echo "<br />CURL ERROR : ".curl_error($session); //returns "couldn't connect to host"
curl_close($session); 
`````

# java - 是否可以使用视图充气机为单个项目充气？

> ID：11183967
> 
> 赞同：4
> 
> 时间：2012-06-25T05:40:07.387
> 
> 标签：java, android, listview, view

现在我正在使用自定义列表视图，并且正在扩充要查看的 xml 文件。我想根据位置膨胀布局以产生不同的膨胀。

```
public View getView(int position,View v,ViewGroup parent) {
    if (v == null) {
        v = li.inflate(R.layout.grid_item,null);

        final TextView tv = (TextView) v.findViewById(R.id.grid_text);
        tv.setText(String.valueOf(position+1));
    } 
```

网格项目是我正在膨胀的。我想根据位置膨胀几个不同的项目，同时仍然保持文本视图。目前要做到这一点，我在 grid_item 中有一个我正在更改的图像，但我宁愿这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:42:43.717

为不同的位置创建不同的xml

```
 or 
```

创建一个带有容器的 xml（仅限线性布局）并在运行时根据位置添加视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:55:10.030

好的，所以如果您想根据位置膨胀不同的 xml，那么只需使用一些我会说的旧学校代码，例如

```
if (v == null) {
    if(position < 5){//whatever condition you want here    
        v = li.inflate(R.layout.grid_item,null);
    }
    else{
        v = li.inflate(R.layout.grid_item2,null);
    }
}

final TextView tv = (TextView) v.findViewById(R.id.grid_text);
tv.setText(String.valueOf(position+1)); 
```

然后只需确保在所有 xmls grid_text 中命名文本字段即可。

# java - 我简单的 antlr 语法有什么问题？

> ID：11183972
> 
> 赞同：1
> 
> 时间：2012-06-25T05:41:10.473
> 
> 标签：java, antlr

我正在尝试创建一个非常简单的 antlr 语法文件，它应该解析以下文件：

```
Report (MyReport)
Begin
End 
```

或没有报告名称：

```
Report
Begin
End 
```

这是我的语法文件：

```
grammar RL;

options {
  language = Java;
}

report:
  REPORT ('(' SPACE* STRING_LITERAL SPACE* ')')?
  BEGIN
  END
  ;

REPORT
    :   'Report'
    ;     

BEGIN
    :   'Begin'
    ;

END :   'End';

NAME:   LETTER (LETTER | DIGIT | '_')*;

STRING_LITERAL :    NAME SPACE*;

fragment LETTER: LOWER | UPPER;

fragment LOWER: 'a'..'z';

fragment UPPER: 'A'..'Z';

fragment DIGIT: '0'..'9';

fragment SPACE: ' ' | '\t';

WHITESPACE: SPACE+ { $channel = HIDDEN; };

rule: ; 
```

但是，当我在 ANTLRWorks 中调试时，我总是会收到以下错误：

```
 root -> report -> MismatchedTokenException(0!=0) 
```

我的语法文件有什么问题？

谢谢，绿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:33:11.973

几点说明：

*   `Java`是默认语言，所以可以省略`language=Java;`；
*   您在`SPACE`解析器规则中使用，而此`SPACE`标记是`fragment`: 这会导致词法分析器永远不会创建此标记：将其从解析器规则中删除；
*   输入`"Report "`（“报告”后跟一个空格）被标记为 a `STRING_LITERAL`，而不是 a `REPORT`！ANTLR 的词法分析器贪婪地消耗字符，只有当两个或多个规则匹配相同数量的字符时，首先定义的规则才会获得优先权。词法分析器不会**产生**解析器试图匹配的标记（解析和标记化是独立执行的！）。

请尝试以下操作：

```
grammar RL;

report
 : REPORT ('(' NAME ')')? BEGIN END
 ;

REPORT : 'Report';     
BEGIN  : 'Begin';
END    : 'End';
NAME   : LETTER (LETTER | DIGIT | '_')*;

fragment LETTER : LOWER | UPPER;
fragment LOWER  : 'a'..'z';
fragment UPPER  : 'A'..'Z';
fragment DIGIT  : '0'..'9';

SPACE  : (' ' | '\t' | '\r' | '\n')+ { $channel = HIDDEN; }; 
```

> ***绿色写道：***
> 
> 如果我想在报告名称中允许“SPACE”怎么办？

我仍然会跳过词法分析器中的空格。接受名称之间的空格但在其他上下文中忽略它们会导致一些笨拙的规则。而不是考虑报告名称之间的空格，我会做这样的事情：

```
report
 : REPORT ('(' report_name ')')? BEGIN END
 ;

report_name
 : NAME+
 ; 
```

产生以下解析树：

![在此处输入图像描述](../Images/2f93dde09fa0c67242d446ed468c8469.png)

对于输入：

```
报告（带空格的名称）
开始
结尾
```

> ***绿色写道：***
> 
> 那么是否可以允许我在名称中使用保留字，例如“报告”？

当然，在`report_name`规则中明确添加它们：

```
report_name
 : (NAME | REPORT | BEGIN | END)+
 ; 
```

# javascript - 如何使用下拉菜单中的地点库在 Google 地图上显示标记？

> ID：11183974
> 
> 赞同：2
> 
> 时间：2012-06-25T05:41:25.090
> 
> 标签：javascript, html, google-maps, google-maps-api-3

使用 google maps api（利用新的“Places Library”）我试图：

1.  显示具有特定经度和纬度的地图。成功完成
2.  显示一个下拉列表，其中包含 Google 可以搜索的所有可用商店类型。成功完成
3.  检测下拉选择何时更改并更改 setlocationtype() 函数中的“类型”值。
4.  因此，地图应根据下拉列表选择显示所有可用的位置类型（即邮局、加油站等）。

难住了。我希望我没有转储太多代码。我想我应该尽可能彻底地解释一切以获得正确的结果。

提前致谢

```
 var map;
  var infowindow;

  function populateselect(){

        var placetype = [];
        placetype[0] ="accounting";
        placetype[1] ="airport";
        placetype[2] ="amusement_park";
        placetype[3] ="aquarium";
        placetype[4] ="art_gallery";
        placetype[5] ="atm";
        placetype[6] ="bakery";
        placetype[7] ="bank";
        placetype[8] ="bar";
        placetype[9] ="beauty_salon";
        placetype[10] ="bicycle_store";
        placetype[11] ="book_store";
        placetype[12] ="bowling_alley";
        placetype[13] ="bus_station";
        placetype[14] ="cafe";
        placetype[15] ="campground";
        placetype[16] ="car_dealer";
        placetype[17] ="car_rental";
        placetype[18] ="car_repair";
        placetype[19] ="car_wash";
        placetype[20] ="casino";
        placetype[21] ="cemetery";
        placetype[22] ="church";
        placetype[23] ="city_hall";
        placetype[24] ="clothing_store";
        placetype[25] ="convenience_store";
        placetype[26] ="courthouse";
        placetype[27] ="dentist";
        placetype[28] ="department_store";
        placetype[29] ="doctor";
        placetype[30] ="electrician";
        placetype[31] ="electronics_store";
        placetype[32] ="embassy";
        placetype[33] ="establishment";
        placetype[34] ="finance";
        placetype[35] ="fire_station";
        placetype[36] ="florist";
        placetype[37] ="food";
        placetype[38] ="funeral_home";
        placetype[39] ="furniture_store";
        placetype[40] ="gas_station";
        placetype[41] ="general_contractor";
        placetype[42] ="geocode";
        placetype[43] ="grocery_or_supermarket";
        placetype[44] ="gym";
        placetype[45] ="hair_carev";
        placetype[46] ="hardware_store";
        placetype[47] ="health";
        placetype[48] ="hindu_temple";
        placetype[49] ="home_goods_store";
        placetype[50] ="hospital";
        placetype[51] ="insurance_agency";
        placetype[52] ="jewelry_storev";
        placetype[53] ="laundry";
        placetype[54] ="lawyer";
        placetype[55] ="library";
        placetype[56] ="liquor_store";
        placetype[57] ="local_government_office";
        placetype[58] ="locksmith";
        placetype[59] ="lodging";
        placetype[60] ="meal_delivery";
        placetype[61] ="meal_takeaway";
        placetype[62] ="mosque";
        placetype[63] ="movie_rental";
        placetype[64] ="movie_theater";
        placetype[65] ="moving_company";
        placetype[66] ="museum";
        placetype[67] ="night_club";
        placetype[68] ="painter";
        placetype[69] ="park";
        placetype[70] ="parking";
        placetype[71] ="pet_store";
        placetype[72] ="pharmacy";
        placetype[73] ="physiotherapist";
        placetype[74] ="place_of_worship";
        placetype[75] ="plumber";
        placetype[76] ="police";
        placetype[77] ="post_office";
        placetype[78] ="real_estate_agency";
        placetype[79] ="restaurant";
        placetype[80] ="roofing_contractor";
        placetype[81] ="rv_park";
        placetype[82] ="school";
        placetype[83] ="shoe_store";
        placetype[84] ="shopping_mall";
        placetype[85] ="spa";
        placetype[86] ="stadium";
        placetype[87] ="storage";
        placetype[88] ="store";
        placetype[89] ="subway_station";
        placetype[90] ="synagogue";
        placetype[91] ="taxi_stand";
        placetype[92] ="train_station";
        placetype[93] ="travel_agency";
        placetype[94] ="university";
        placetype[95] ="veterinary_care";
        placetype[96] ="zoo";

        var select = document.getElementById("selectPlace");

        //var preselected = document.getElementById(playtype["mosque"]);
        //preselected.selected = true;

        for(var i = 0; i < placetype.length; i++) {
            var opt = placetype[i];
            var el = document.createElement("option");
            el.textContent = opt.replace("_"," ");
            el.value = opt;
            select.appendChild(el);
        }

    }

    //Create Function that will initialize that map and get things moving  
    function initialize() {
    //Set the Latitude and Longitude coordinates that the map will be centered
    //on. 
    var pyrmont = new google.maps.LatLng(39.0724, -76.7902);

    //Create our map and grab the DOM id and populate our map to the DOM id 
    //specified or passed to the map object. Also we are passing in our map 
    //options ex. zoom, MapType, etc.
    map = new google.maps.Map(document.getElementById('map'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: pyrmont,
      zoom: 10
    });

  }

  function setlocationtype(){

    //Set the request options. These options will be passed to the places 
    //object to we can search for a specific establishment type 
    //(ie. Store, accountant, hospital, police, etc.

    var si = document.getElementById("selectPlace").selectedIndex;
    var op = document.getElementById("selectPlace").options;
    var pyrmont = new google.maps.LatLng(39.0724, -76.7902);
    var request = {
      location: pyrmont,
      radius: 50000,
      types: [op[si].text]

    };

    //Create an info window that 
    infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(map);
    service.search(request, callback);   

  }

  function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      countplaces(results);  
      for (var i = 0; i < results.length; i++) {
        createMarker(results[i]);
      }
    }
  }

  function countplaces(placecount){
      var nplaces = placecount.length;
      document.getElementById('nplaceholder').innerHTML = nplaces + '&nbsp;Beauty Salons in Maryland';
  }

  function createMarker(place) {
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map: map,
      position: placeLoc
    });

    google.maps.event.addListener(marker, 'click', function() {
      var placedata = place.rating + "<br>";
      placedata = placedata + place.name + "<br>";
      placedata = placedata + place.formatted_phone_number+ "<br>";
      placedata = placedata + place.formatted_address+ "<br>";
      infowindow.setContent(placedata);
      infowindow.open(map, this);
    });
  }

google.maps.event.addDomListener(window, 'load', initialize);

function start() {
    populateselect();
    initialize();
    setlocationtype();

}
window.onload = start; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:00:55.080

我认为这个链接会有所帮助。这将 Fusion Tables API 与 Maps API [https://developers.google.com/fusiontables/docs/samples/change_query结合使用](https://developers.google.com/fusiontables/docs/samples/change_query)

如果您使用融合表，我几乎可以肯定您将拥有完成项目所需的所有工具。所有源代码都在下面的链接中，为您实现了 3 和 4。

[https://developers.google.com/fusiontables/docs/sample_code#FTLayers](https://developers.google.com/fusiontables/docs/sample_code#FTLayers)

# javascript - 在鼠标悬停时显示/隐藏 DIV

> ID：11183975
> 
> 赞同：4
> 
> 时间：2012-06-25T05:41:27.283
> 
> 标签：javascript, jquery

我想在图像/链接悬停上显示一个 DIV，我已经编写了以下代码

```
 $("#NotificationSummary").hover(
      function () {
          $("#dvNotifications").slideDown();
      },
      function () {           

          $("#dvNotifications").slideUp();
      }
    ); 
```

DIV 在悬停时显示，但是当我移动到 div 时它会隐藏，当鼠标悬停时如何阻止 div 隐藏

请查看演示[http://jsfiddle.net/3hqrW/15/](http://jsfiddle.net/3hqrW/15/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T07:02:47.273

[根据评论重新编辑] jsfiddle 修改，删除了仅 css 的解决方案**。**诀窍是监视滑动元素的悬停状态并使用超时来允许用户在滑动元素上移动（另请参见更新的 jsfiddle 中的注释）。

jsfiddle 源自 OPs jsfiddle [@here](http://jsfiddle.net/q9v5A/)

使用您的#ids 的悬停功能：

```
function hover(e){
 e = e || event;
 var el = e.target || e.srcElement
    ,showel = $('#dvNotifications')
 ;
 if (!/NotificationSummary/i.test(el.id)) {
  showel .attr('data-ishovered',/over/i.test(e.type));
 } else {
  showel .attr('data-ishovered',false)
 }

 if (/true/i.test(showel .attr('data-ishovered'))){return true;}

 if (/over$/i.test(e.type) && /NotificationSummary/i.test(el.id)){
    showel .slideDown();
 } else {
    setTimeout(function(){
        if (/false/i.test(showel .attr('data-ishovered'))) {
            showel .slideUp();
            showel .attr('data-ishovered',false);
        }
      }
    ,200);
 } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:10:48.973

Tanveer 请看这个**演示：http:** [//jsfiddle.net/rathoreahsan/3hqrW/](http://jsfiddle.net/rathoreahsan/3hqrW/)

您要在悬停时显示的 div 应该在您要悬停的主 div 内，并且主 div 应该具有 css 属性：`display:block`

**另一个演示：http:** [//jsfiddle.net/rathoreahsan/SGUbC/](http://jsfiddle.net/rathoreahsan/SGUbC/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T07:09:17.123

```
 $("#NotificationSummary").mouseenter(function() {
       $("#dvNotifications").fadeIn();
  }).mouseleave(function() {
      $("#dvNotifications").fadeOut();
  }); 
```

# c# - 为什么 C# 允许从 Long 到 Float 的 *implicit* 转换，而这可能会丢失精度？

> ID：11183980
> 
> 赞同：22
> 
> 时间：2012-06-25T05:42:26.190
> 
> 标签：c#, .net, floating-point, long-integer, implicit-conversion

一个类似的问题[Long in Float，为什么？](https://stackoverflow.com/questions/4352213/long-in-float-why)这里没有回答我正在寻找的东西。

C# 标准允许从 long 到 float 的隐式转换。但是当表示为浮点数时，任何大于 2^24 的 long 都必然会失去其“价值”。C# 标准明确指出 long to float 转换可能会失去“精度”，但永远不会失去“幅度”。

我的问题是

1.  关于整数类型，“精度”和“量级”是什么意思。数字 n 与数字 n+1 是否完全不同，这与实数不同，其中 3.333333 和 3.333329 可能被认为足够接近以进行计算（即取决于程序员想要的精度）
2.  不允许从 long 隐式转换到浮动对细微错误的邀请，因为它可能导致 long '默默地'失去价值（作为 C# 程序员，我习惯于编译器在保护我免受此类问题方面做得很好）

那么 C# 语言设计团队允许这种隐式转换的基本原理是什么？我在这里缺少什么来证明从 long 到 float 的隐式转换是合理的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T15:09:34.520

这是一个很好的问题。实际上你可以概括这个问题，因为同样的问题存在于隐式转换：

*   `int`到`float`
*   `uint`到`float`
*   `long`到`float`（*你要问的*）
*   `ulong`到`float`
*   `long`到`double`
*   `ulong`到`double`.

事实上，*所有整数类型*（甚至`char`!!）都隐式转换为`float`and `double`; 但是，只有上面列出的转换会导致精度损失。另一个需要注意的有趣的事情是，C# 语言规范在解释“为什么没有从十进制到双精度的隐式转换”时有一个自相矛盾的论点：

> 十进制类型比浮点类型具有更高的精度但范围更小。因此，从浮点类型到十进制的转换可能会产生溢出异常，**而从十进制到浮点类型的转换可能会导致*精度损失。*由于这些原因，浮点类型和小数之间不存在隐式转换**，并且如果没有显式转换，就不可能在同一个表达式中混合浮点和小数操作数。

我认为“为什么做出这个决定”的问题最好由像 Eric Lippert 这样的人来回答。我最好的猜测......这是语言设计者没有任何强有力的论据来选择一种方式的事情之一，所以他们选择（他们认为是）更好的替代方案，尽管这是有争议的. 在他们的辩护中，当您将大数转换为 时`long`，`float`您的精度会降低，但您仍然会得到浮点世界中该数字的*最佳表示形式。*这与将 an 转换`int`为`byte`可能存在溢出的地方（整数值可能超出 a 的范围）完全不同。`byte`可以代表），你得到一个不相关/错误的数字。`decimal`但是，在我看来，如果它们也没有导致精度损失的其他转换，它会更符合没有从浮点到浮点的隐式转换。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-25T11:14:24.937

一般来说，[浮点数](http://en.wikipedia.org/wiki/Floating_point)不能准确地表示很多数字。就其性质而言，它们是不精确的并且容易出现精度误差。它确实没有增加价值来警告您浮点的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T10:09:38.577

> 1.  关于整数类型，“精度”和“量级”是什么意思。数字 n 与数字 n+1 是否完全不同，这与实数不同，其中 3.333333 和 3.333329 可能被认为足够接近以进行计算（即取决于程序员想要的精度）

“精度”定义了一个数字可以携带的位数。如果您（为方便起见）将它们编码为 BCD，则一个字节只能携带 2 个十进制数字。假设您有 2 个字节可用。您可以使用它们以整数格式对数字 0-9999 进行编码，或者您可以定义最后一位表示十进制指数的格式。

您可以编码然后 0-999 * (10^0 - 10^9)

您现在可以将数字编码为 999 000 000 000，而不是从 0-9999 编码数字。但是，如果您将 9999 从整数格式转换为新格式，则只能得到 9990。您已经获得了可能数字的范围（您的幅度），但你失去了精度。

使用双精度和浮点数，您可以得到以下可以精确表示的值：（int = 32 位，long = 64 位，均带符号：）

整数 -> 浮点数 -2^24 - 2^24

int -> 将所有值加倍

长 -> 浮动 -2^24 - 2^24

长 -> 双 -2^53 - 2^53

> 不允许从 long 隐式转换到浮动对细微错误的邀请，因为它 > 可能导致 long '默默地'失去价值（作为 C# 程序员，我习惯于编译器 > 在保护我免受此类问题方面做得很好）

是的，它引入了无声的错误。如果您希望编译器可以*帮助*您解决这些问题，请忘记它。你只能靠自己。我不知道任何警告不要失去精确度的语言。

一个这样的错误： [阿丽亚娜火箭......](http://en.wikipedia.org/wiki/Cluster_%28spacecraft%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T06:31:44.213

最大值`long`可以放入`float`as

```
float.MaxValue ~= 3.402823+e38 
long.MaxValue ~= 9.223372+e18 
```

尽管`long`是一个`64bit Integer`类型并且`float`是`32bit`，但是计算机处理的方式`float's`是不同的`long's`。但`float`更大的范围是以牺牲精度为代价的。

`long`具有比10 ^ 18更高的精度，`float`但浮点数具有更高的数量级 10 ^ 38 。`long`

我不认为他们犯了一个错误，允许隐式转换`long`到`float`as`float`仍然精确到 7 位。因此，如果有人需要更高的精度，他们总是可以使用`double`或小数`

`Double`-15-16 位（64 位）

`Decimal`-28-29 位有效数字（128 位）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T11:38:22.853

进一步思考，似乎所有三个答案（或多/少指向同一件事）都能够正确解释其中的“为什么”部分。

1.  float 和 long 都是数字类型
2.  浮动的范围足够大以容纳多头的范围

我认为以上两个标准足以表明 long to float 转换应该是隐式的。

由于 float 是单精度的，它不能准确地表示 long 的所有值。因此，他们将其作为事实陈述包含在标准中。long 到 float 的转换是“安全的”，因为生成的 float 可以很容易地表示 long 值，但会失去精度。

进一步的 float 到 long 的转换不是隐含的（因为 float 的范围远远大于 long 可以容纳的范围），这确保了这样的事情是不允许的

```
long lng = 16777217;
float flt = lng; //loses precision here
long lng2 = flt; //if permitted, would be 16777216 or 2^24
bool eq = lng == lng2; 
```

只有在可以默默取回转换后的多头时，才会出现多头失去其价值的问题。

感谢大家帮助我加深理解。

# wcf - 在不同的 IIS 上托管 WFC 服务

> ID：11183981
> 
> 赞同：0
> 
> 时间：2012-06-25T05:42:28.060
> 
> 标签：wcf, iis, iis-7

这是关于我昨天的[问题](https://stackoverflow.com/questions/11178111/hosting-wcf-service-on-iis-the-resource-cannot-be-found/11178254)

现在，我将此服务部署在两台不同 PC 上的两个相同的 IIS 上。此服务在我的 PC 上的 IIS 上运行良好，在其他服务器上不起作用：

```
The resource cannot be found.
Description: HTTP 404\. The resource you are looking for... 
```

相同的代码、相同的程序集、相同的 Web.config 文件。而且我无法找出这些 IIS 之间的区别。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:23:33.213

我已经解决了这个问题。问题是我在同一个应用程序中开发了 MVC3 网站和 WCF 服务，我必须添加以下代码才能解决这个问题：

```
routes.IgnoreRoute("{resource}.svc/{*pathInfo}"); 
```

我希望它对将在同一应用程序中使用 WFC 和 MVC 的人有所帮助。

# java - Java：试图通过网络发送一堆信息

> ID：11183989
> 
> 赞同：2
> 
> 时间：2012-06-25T05:42:43.987
> 
> 标签：java, networking

好的，我已经为此工作了好几天，但在任何地方都找不到任何信息。我制作了一个运行良好的简单游戏，但我想添加两个玩家的功能。我已经通过 LAN 与另一台计算机建立了连接，但我不知道如何发送数据。我了解写入 ObjectOutputStream 的内容，但是如何让对方解释它？我是否分别发送每个变量？截至目前，我正在尝试为敌人、玩家位置、得分和生命发送一个数组。如何以客户能够理解的方式发送和接收它？感谢您的帮助，如果我的要求不清楚，我很抱歉。我不知道如何表达它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T05:46:10.723

你需要[序列化](http://en.wikipedia.org/wiki/Serialization)。这意味着将包含信息的 Java 类转换为一堆字节。然后可以将这些字节传输到您的客户端，在那里它将被反序列化以取回保存您想要的数据的原始 Java 类。

在 Java 中，大部分操作都是自动为您完成的。你可以先看看[这个](http://en.wikipedia.org/wiki/Serialization#Java)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T05:46:49.207

这真的取决于。我认为只发送文本数据流是一个好主意，这将允许您更好地调试您的应用程序，并使其他语言编写的其他应用程序与您自己的应用程序交互成为可能。

您可以查看[XStream （](http://xstream.codehaus.org/)[此处](http://xstream.codehaus.org/tutorial.html)为教程）。这将允许您轻松地将数据转换为 XML 格式并发送。

为了澄清起见，您仍然会最终将数据作为字节发送。但在我的建议中，字节将代表字符串而不是序列化的 Java 对象。

编辑：根据您对另一个问题的评论，您可以这样做：

```
public class GameDataProtocol
{
    private Enemy[] enemies;
    private Point position;
    private int score;
    private int liveCount;

    //Constructors, Getters and Setters.
} 
```

您将使用您的信息填充上面的类，将其编码为 XML 并将其发送到客户端。客户端将对其进行解码并相应地更新数据。

# jquery - 检查 DOM 是否附加了类名

> ID：11183992
> 
> 赞同：2
> 
> 时间：2012-06-25T05:43:01.703
> 
> 标签：jquery

我想检查一个 Dom 是否附加了类值。由于该 DOM 将被动态分配一个随机类值，所以我不会具体知道类名，所以是否可以检查它是否附加了一个类元素与其类名无关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T05:45:15.807

那？

```
if($('div').prop('class').length) { } 
```

相关文档：

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

这基本上从（将其更改为您想要检查类是否存在的实际 DOM 元素）中提取`class`属性并检查它是否具有`div``length > 0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:50:04.123

```
if($('div').attr('class')!= "") { //class is there and its not empty } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T05:50:16.467

标记中的类是一个属性，因此可以使用：

```
 var className=  $(selector).attr('class');
  if( className ){
      /* do Something*/
  } 
```

[attr() API 文档](http://api.jquery.com/attr/)

# .net - 有没有办法在运行时将所需的类对象转换为另一个而不直接在.net中转换？

> ID：11183995
> 
> 赞同：0
> 
> 时间：2012-06-25T05:43:12.937
> 
> 标签：.net, object, casting, runtime

例如，我有这个：

```
class BasePacket
{
   int header;
   int type;
}

class ChildPacket1 : BasePacket
{
   //...
}

class ChildPacket2 : BasePacket
{
   //...
}

BasePacket bp;
Type t;
object obj = CreateNeededChildPacket(out t); //return one of childs as object and it's real type
bp = ...// anyway to cast obj to type represented by t? or by using something else? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T05:45:31.863

[Convert.ChangeType](http://msdn.microsoft.com/en-us/library/system.convert.changetype.aspx)可以处理范围广泛的类型转换场景，包括这个，非常有效，受制于以下几点：

> 读者必须了解 Convert.ChangeType() 仅适用于某些标准的 .NET 系统类型。它不适用于任何未实现 IConvertible 的组件，也不适用于自定义类型。

```
float f = 1.1f;
int i;
Type t = typeof(int);
i = (int)Convert.ChangeType(f, t);
Console.WriteLine(i); 
```

请注意，在您的具体示例中，两种值类型之间的转换`ChangeType`不会像直接转换那样有效，因为它`ChangeType`返回装箱为对象的整数值。

如果它们实现，您可以`ChangeType`与您自己的类一起使用`IConvertable`，例如

```
public class MyClass : IConvertible
{
    public float MyFloatValue { get; set; }

    int IConvertible.ToInt32(IFormatProvider provider)
    {
        return (int)MyFloatValue;
    }

    // TODO: Implement the rest of IConvertable
}

MyClass myClass = new MyClass() { MyFloatValue = 42.42f };
i = (int) Convert.ChangeType(myClass, t);
Console.WriteLine(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:27:35.553

在您的示例中，您正在创建两个派生类之一并将其存储在一个基变量中......这根本不需要任何强制转换，因为根据继承法则执行此操作非常好。基类型变量总是可以分配一个更派生的对象，因为基类能够做到的任何事情都保证派生类也可以做到，所以它是安全的。例如，数学老师可以执行普通老师可以执行的任何操作（例如 GradePapers()）。用 Teacher 变量指向 Math Teacher 对象是安全的。

```
BasePacket bp = (BasePacket) CreateNeededChildPacket(); 
```

* * *

**编辑：** 为了回应您的评论，理想情况下，您应该让 CreateNeededChildPacket() 方法返回 BasePacket 类型（如果返回的对象始终来自 BasePacket）。就像基参数可以接受派生对象一样，基返回类型可以返回派生对象，这就是继承的美妙之处。对于在路上调用您的方法的人来说，这会更安全。

```
BasePacket CreateNeededChildPacket() 
{
    // do something
    return AnyObjectThatDerivesFromBasePacket;    
} 
```

* * *

如果您无法更新该方法，那么您可以添加一些额外的类型检查以确保安全。

```
object obj = CreateNeededChildPacket();
BasePacket bp = null;

if (obj is BasePacket) 
   bp = (BasePacket) obj;
else
   throw new Exception("Object was not a valid BasePacket type: " + obj.GetType.ToString()); 
```

# objective-c - 用于创建新页面的 xcode/interface builder 按钮

> ID：11183998
> 
> 赞同：2
> 
> 时间：2012-06-25T05:43:39.803
> 
> 标签：objective-c, ios, xcode

我在我的一个类中有一个按钮，我用 xcode/interface builder 创建它，我想将我的按钮连接到另一个类，它创建一个基于事件的日历，

我想按下我的按钮，但之后它会自动创建另一个页面，并且在该页面内部还有另一个按钮->当我按下该按钮时，我可以访问基于事件的日历页面，我的问题是

如何删除第二页

这是生成第二页和第三页的代码

添加事件.h

```
#import <UIKit/UIKit.h>
#import <EventKit/EventKit.h>
#import <EventKitUI/EventKitUI.h>

@interface AddEvent : UIViewController <UINavigationBarDelegate, UITableViewDelegate, 
EKEventEditViewDelegate, UINavigationControllerDelegate, UIActionSheetDelegate> {

EKEventViewController *detailViewController;
EKEventStore *eventStore;
EKCalendar *defaultCalendar;
NSMutableArray *eventsList;
}

@property (nonatomic, retain) EKEventStore *eventStore;
@property (nonatomic, retain) EKCalendar *defaultCalendar;
@property (nonatomic, retain) NSMutableArray *eventsList;
@property (nonatomic, retain) EKEventViewController *detailViewController;

- (NSArray *) fetchEventsForToday;

@end 
```

添加事件.m

```
#import "AddEvent.h"

 @interface AddEvent ()

@end

@implementation AddEvent

@synthesize eventsList, eventStore, defaultCalendar, detailViewController;

  #pragma mark -
  #pragma mark View lifecycle

 - (void)viewDidLoad { 
```

**这是创建第二个屏幕的代码**

```
self.title = @"Events List";

// Initialize an event store object with the init method. Initilize the array for events.
self.eventStore = [[EKEventStore alloc] init];

self.eventsList = [[NSMutableArray alloc] initWithArray:0];

// Get the default calendar from store.
self.defaultCalendar = [self.eventStore defaultCalendarForNewEvents];

//  Create an Add button 
UIBarButtonItem *addButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:
                              UIBarButtonSystemItemAdd target:self action:@selector(addEvent:)];
 self.navigationItem.rightBarButtonItem = addButtonItem;

self.navigationController.delegate = self;

  // Fetch today's event on selected calendar and put them into the eventsList array
  [self.eventsList addObjectsFromArray:[self fetchEventsForToday]];

  }

 // Allow event editing.
 detailViewController.allowsEditing = YES;

 // Push detailViewController onto the navigation controller stack
 // If the underlying event gets deleted, detailViewController will remove itself from
//  the stack and clear its event property.
  [self.navigationController pushViewController:detailViewController animated:YES];

  }

  #pragma mark -
  #pragma mark Add a new event

  // If event is nil, a new event is created and added to the specified event store. New events are 
  // added to the default calendar. An exception is raised if set to an event that is not in the 
  // specified event store.

  - (void)addEvent:(id)sender {
  // When add button is pushed, create an EKEventEditViewController to display the event.
  EKEventEditViewController *addController = [[EKEventEditViewController alloc] initWithNibName:nil bundle:nil];

  // set the addController's event store to the current event store.
  addController.eventStore = self.eventStore;

  // present EventsAddViewController as a modal view controller
  [self presentModalViewController:addController animated:YES];

  addController.editViewDelegate = self;

   } 
```

**而且我不知道如何将第一个屏幕中的按钮连接到第三页并删除第二个屏幕**

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:33:23.667

在您的第一个视图控制器的 viewDidLoad 中，为加号按钮添加以下 UIBarButtonItem 代码

```
UIBarButtonItem *addButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:
                          UIBarButtonSystemItemAdd target:self action:@selector(addEvent:)]; 
```

self.navigationItem.rightBarButtonItem = addButtonItem;

并添加操作代码

```
- (void)addEvent:(id)sender 
{
// When add button is pushed, create an EKEventEditViewController to display the event.
EKEventEditViewController *addController = [[EKEventEditViewController alloc]initWithNibName:nil bundle:nil];         
// set the addController's event store to the current event store.
addController.eventStore = self.eventStore;

// present EventsAddViewController as a modal view controller
[self presentModalViewController:addController animated:YES];

addController.editViewDelegate = self;

} 
```

然后添加必要的代码以在 EKEventEditViewController 的 viewDidLoad 中添加事件。