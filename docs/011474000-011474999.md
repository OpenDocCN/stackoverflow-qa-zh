# StackOverflow 问答 11474000-11474999

# asp.net-mvc-3 - 使用 MVC 路由匹配路由

> ID：11474000
> 
> 赞同：0
> 
> 时间：2012-07-13T15:55:09.353
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我有以下网址

1.  网址/说明
2.  URL/首页/会员/说明
3.  网址/主页/说明

这是我的路线

对于上面的#1：

```
 routes.MapRoute(
                name: "DescriptionNoController",
                url: "{d}",
                defaults: new {controller = "Home", action = "Index", d = UrlParameter.Optional}
                ); 
```

对于上面的#2：

```
 routes.MapRoute(
                name: "DescriptionDefault",
                url: "{controller}/{action}/{d}",
                defaults: new {controller = "Home", action = "Index", d = UrlParameter.Optional}
                ); 
```

我在使用#3 时遇到了麻烦。

我以为我能做到

```
 routes.MapRoute(
                name: "DescriptionDefaultNoAction",
                url: "{controller}/{d}",
                defaults: new { controller = "Home", action = "Index", d = UrlParameter.Optional }
                ); 
```

但这会造成无限循环。基本上我希望#3 示例将“home/description”映射到 Home Controller 和 Index 操作。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:30:37.643

您的问题是场景 3 将与 Route config 2 匹配，因为它会认为描述是操作，而您没有 {d} 部分。

解决此问题的唯一方法是制定非常具体的路线，并且您需要在方案 2 之前满足方案 3。

您应该添加的最后一条路线是这条路线，这是您的全部。

```
routes.MapRoute(
            name: "DescriptionDefault",
            url: "{controller}/{action}/{d}",
            defaults: new {controller = "Home", action = "Index", d = UrlParameter.Optional}
            ); 
```

您的问题不清楚的是您的 url 的描述部分是占位符还是文字值。如果是字面的，那么在你的路由配置中使用它。

# ios - 无法让 OpenCV 在 iOS 上检测到人

> ID：11474005
> 
> 赞同：3
> 
> 时间：2012-07-13T15:55:33.657
> 
> 标签：ios, opencv

我从 OpenCV 源代码中获取了一个样本并尝试在 iOS 上使用它，我做了以下操作：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection {

  // get cv::Mat from CMSampleBufferRef

  UIImage * img = [self imageFromSampleBuffer: sampleBuffer];  
  cv::Mat cvImg = [img CVGrayscaleMat];

  cv::HOGDescriptor hog;
  hog.setSVMDetector(cv::HOGDescriptor::getDefaultPeopleDetector());
  cv::vector<cv::Rect> found;     

  hog.detectMultiScale(cvImg, found, 0.2, cv::Size(8,8), cv::Size(16,16), 1.05, 2);

  for( int i = 0; i < (int)found.size(); i++ )
  {

    cv::Rect r = found[i];

    dispatch_async(dispatch_get_main_queue(), ^{
      self.label.text = [NSString stringWithFormat:@"Found at %d, %d, %d, %d", r.x, r.y, r.width, r.height];
    });

    NSLog(@"Found at %d, %d, %d, %d", r.x, r.y, r.width, r.height);         

  }
} 
```

CVGrayscaleMat 在哪里

```
-(cv::Mat)CVGrayscaleMat
{
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();
    CGFloat cols = self.size.width;
    CGFloat rows = self.size.height;

    cv::Mat cvMat = cv::Mat(rows, cols, CV_8UC1); // 8 bits per component, 1 channel

    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to backing data
                                                    cols,                      // Width of bitmap
                                                    rows,                     // Height of bitmap
                                                    8,                          // Bits per component
                                                    cvMat.step[0],              // Bytes per row
                                                    colorSpace,                 // Colorspace
                                                    kCGImageAlphaNone |
                                                    kCGBitmapByteOrderDefault); // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), self.CGImage);
    CGContextRelease(contextRef);
    CGColorSpaceRelease(colorSpace);

    return cvMat;
} 
```

并且 imageFromSampleBuffer 是来自 Apple 文档的示例。问题是 - 该应用程序无法检测到人，我尝试了不同的尺寸和姿势 - 对我没有任何作用。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:38:10.117

我设法让它工作。事实证明，CV_8UC1 矩阵不是正确的矩阵，尽管 openCV 没有告诉我，当我将它传递给 detectMultiScale 方法时，出现了问题。当我将 CV_8UC4 转换为 CV_8UC3 时

```
-(cv::Mat) CVMat3Channels
{
  cv::Mat rgbaMat = [self CVMat];

  cv::Mat rgbMat(self.size.height, self.size.width, CV_8UC3); // 8 bits per component, 3 channels

  cvtColor(rgbaMat, rgbMat, CV_RGBA2RGB, 3);

  return rgbMat;
} 
```

检测开始工作。

# iphone - CFNetwork WebCore 崩溃

> ID：11474013
> 
> 赞同：3
> 
> 时间：2012-07-13T15:55:55.127
> 
> 标签：iphone, ios, crash

我从 App Store 收到了一些我无法真正遵循的崩溃报告。所以线程总是这样崩溃

```
0    libobjc.A.dylib    
objc_msgSend + 15
1    CFNetwork ✭    
HostBase::lock() + 14
2    CFNetwork  
DispatchHost::performInvocation(void const*) + 12
3    CFNetwork  
__setupTCPConnection_block_invoke_2 + 290
4
...
libsystem_network.dylib 
__tcp_connection_notify_complete_block_invoke_1 + 18
5    libdispatch.dylib  
_dispatch_call_block_and_release + 12
6    libdispatch.dylib  
_dispatch_worker_thread2 + 258
7    libsystem_c.dylib  
_pthread_wqthread + 294 
```

我有 14 次这样的崩溃。他们唯一的共同点是另一个线程。

```
...
libsystem_kernel.dylib  
mach_msg_trap + 20
1    CoreFoundation 
__CFRunLoopServiceMachPort + 126
2    CoreFoundation 
__CFRunLoopRun + 882
3    CoreFoundation 
CFRunLoopRunSpecific + 300
4    CoreFoundation 
CFRunLoopRunInMode + 104
5    WebCore    
WebCore::runLoaderThread(void*) + 128
6    libsystem_c.dylib  
_pthread_start + 320 
```

我在我的应用程序中使用 UIWebViews（虽然不是很密集。WebCore 是否仅在使用 webViews 时调用？或者这可以与其他东西有关吗？

我无法在我的设备中复制。任何想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:53:09.717

在我们的应用程序中获得了相同的堆栈跟踪，并在 devforums 中进行了讨论：[https ://devforums.apple.com/message/683938#683938](https://devforums.apple.com/message/683938#683938)

并得出结论：

> 我在这里看不到任何有趣的东西，这让我回到结论，这要么是您的应用程序中的某种内存损坏问题，要么是 CFNetwork 中的错误（两者都很可能）。

所以我跟踪并修复了应用程序中的一些内存泄漏，然后我会在下一个应用程序版本中查看崩溃是否仍然发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:56:37.017

由于您对 UIWebViews 的使用并不广泛，因此最好调查所有 UIWebView 操作是否都在主 UI 线程上进行。您可以在加载请求或在 UIWebView 上设置数据时处于后台线程上。

# javascript - 一次两次更改div的内容

> ID：11474017
> 
> 赞同：0
> 
> 时间：2012-07-13T15:55:58.887
> 
> 标签：javascript, ajax

我正在做一个简单的 ajax 调用，它工作正常。但是，响应速度很慢，我不希望用户单击两次以为它​​不起作用。因此，我想在收到回复之前显示一条消息，例如“正在转换，请稍候”。这是我尝试过的代码：

```
function postajax()
{
    document.getElementById('linksarea').innerHTML = "<img src='images/waiting.gif'> Converting please wait...";

    var xmlhttp;

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            document.getElementById("links").innerHTML=xmlhttp.responseText;
    }

    var links = window.document.getElementById('linksarea').value;

    xmlhttp.open("POST","ajax.php",true);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlhttp.send("links="+links+"&username=xxxx");
} 
```

这是我要修改的html部分

```
<div id="memberright">
  Convert the links here<br />
  <textarea name="links" id="linksarea" cols="65" rows="10"></textarea><br />
  <input type="button" id="buttonr" onclick="postajax()" value="Convert">
</div>

<div id="ajax">
  <div id="links">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:12:16.063

您当前正在使用：

```
document.getElementById('linksarea').innerHTML = "<img src='images/waiting.gif'>
   Converting please wait..."; 
```

应该将 设置`innerHTML`为加载图像并显示加载消息。稍后您将获取该元素的值：

```
window.document.getElementById('linksarea').value; 
```

该`value`属性将仅存在于输入上，而输入上没有`innerHTML`.

尝试以下操作，假设`#links`是您要修改的元素，根据您的问题标题，您尝试将`div`元素的值更改两次：

```
document.getElementById("links").innerHTML = "<img src='images/waiting.gif'>
       Converting please wait..."; 

// or if you have another div with an ID of `linksarea`

document.getElementById("linksarea").innerHTML = "<img src='images/waiting.gif'>
       Converting please wait..."; 
```

如果没有看到您的 HTML，我可能完全错了，但这看起来好像是您的问题。您需要确保您正在尝试修改正确的元素。

**更新：**

使用 jQuery：

```
function postajax(){
    $('#links').html("<img src='images/waiting.gif'> Converting please wait...");

    var params = "links=" + $('#linksarea').val() + "&username=xxxx";

    $.ajax({
        url: "ajax.php",
        type: "POST",
        data: params,
        success: function(result){
            $('#links').html(result)
        }
    }); 
} 
```

[如图所示，jQuery 使用$.ajax()](http://api.jquery.com/jQuery.ajax/)函数极大地简化了 AJAX 请求的执行。我建议您在使用图书馆之前了解幕后发生的事情，以便您能够完全理解一切。这将有助于鼓励更积极的行为和倾向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:07:24.387

尝试向 onreadystatechange 函数添加另一个 if 语句。“加载”的状态值（我认为您正在寻找）是“1”。以此作参考：[桃坑](http://www.peachpit.com/articles/article.aspx?p=443580&seqNum=2)。基本上，您希望使它看起来像这样：

```
 xmlhttp.onreadystatechange=function()
  {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
          document.getElementById("links").innerHTML=xmlhttp.responseText;
      }
      else if (xmlhttp.readyState==1 && xmlhttp.status==200)
      {
        document.getElementById('linksarea').innerHTML = "<img src='images/waiting.gif'> Converting please wait...";
      }
  } 
```

# sql - 在一系列日期之间进行选择，控制这些日期的年龄

> ID：11474020
> 
> 赞同：0
> 
> 时间：2012-07-13T15:56:11.290
> 
> 标签：sql

我正在尝试搜索结构如下的记录

```
trans_Date, customer_age, etc 
```

其中客户年龄是交易时的年龄。我需要做的是选择当前特定年龄的所有客户，他们在日期范围之间进行了交易。

假设我只想要在 2005 年至 2010 年之间购买的当前 20 岁的人

我想出了这个

```
select * from trans_logs 
where trans_date between TO_DATE("07/13/2005:00:00","MM/DD/YYYY:HH24:MI" and TO_DATE("01/01/2010:00:00","MM/DD/YYYY:HH24:MI")
and customer_age between 13 and 18 
```

我得到了一些正确的结果，但我也得到了 2005 年 18 岁时进行交易的人（现在他们 25 岁）

```
and((customer_age=13 and trans_date BETWEEN TO_DATE('01-JAN-2005:00:00'.'DD-MON-YYYY:HH24:MI') and TO_DATE('31-DEC-2005:23:59','DD-MON-YYYY:HH24:MI'))
or (customer_age=14 and trans_date BETWEEN TO_DATE('01-JAN-2006:00:00'.'DD-MON-YYYY:HH24:MI') and TO_DATE('31-DEC-2006:23:59','DD-MON-YYYY:HH24:MI'))
or (customer_age=15 and trans_date BETWEEN TO_DATE('01-JAN-2007:00:00'.'DD-MON-YYYY:HH24:MI') and TO_DATE('31-DEC-2007:23:59','DD-MON-YYYY:HH24:MI'))
or (customer_age=16 and trans_date BETWEEN TO_DATE('01-JAN-2008:00:00'.'DD-MON-YYYY:HH24:MI') and TO_DATE('31-DEC-2008:23:59','DD-MON-YYYY:HH24:MI'))
or (customer_age=17 and trans_date BETWEEN TO_DATE('01-JAN-2009:00:00'.'DD-MON-YYYY:HH24:MI') and TO_DATE('31-DEC-2009:23:59','DD-MON-YYYY:HH24:MI'))
or (customer_age=18 and trans_date BETWEEN TO_DATE('01-JAN-2010:00:00'.'DD-MON-YYYY:HH24:MI') and TO_DATE('31-DEC-2010:23:59','DD-MON-YYYY:HH24:MI')) ) 
```

但这会返回一个错误，说我缺少正确的括号。1\. 我错过了什么？和 2\. 有没有更有效的方法来做到这一点？

**编辑**：忘记了第二个日期和其他一些格式化的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:08:58.990

鉴于您拥有的信息，您需要计算当前年龄。这个想法是将交易后的年数添加到年龄。我对 Oracle 日期时间函数不是很好，但以下应该可以工作：

```
select tl.*, 
from trans_logs tl
where customer_age + (SYSDATE- trans_Date)/365 = 20 
```

请注意这是一个近似值，因为根据他们的出生日期和交易日期之间的关系，您会得到大约“20”的人。

如果可以的话，最好带上生日。我确实理解询问人们的年龄可能比询问人们的生日更容易，因此您可能别无选择。

# xcode - 是否有在 Xcode 4.3 中启用用鼠标平移情节提要的热键？

> ID：11474035
> 
> 赞同：26
> 
> 时间：2012-07-13T15:56:56.387
> 
> 标签：xcode, mouse, xcode-storyboard, pan

我正在寻找一个热键，例如`spacebar`+ `Click 'n drag`，它可以让我使用鼠标来平移 Xcode Storyboard。

显然我可以使用鼠标滚轮来平移情节提要，但是单击并将其拖动到我想要的确切位置要乏味得多。

有没有办法通过单击和拖动动作来平移 Xcode 故事板？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-03-04T13:22:07.667

我知道这是一篇旧帖子，但我最近一直在想同样的事情，并认为我会将我发现的内容发布给其他正在搜索的人。

[Mac OS X 水平滚动技巧](http://rohdesign.com/weblog/2006/9/21/mac-os-x-horizontal-scroll-trick.html)。它与平移并不完全相同，但它确实可以让您水平滚动。基本上，按住 shift 键并使用滚轮水平滚动。放开垂直滚动。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-09-12T04:45:40.363

与平移不完全相同，但它对我有用

*   水平滚动 | *Shift + 鼠标滚动*
*   垂直滚动 | *鼠标滚动*
*   放大和缩小 | *选项 + 滚动*

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-05T13:30:24.310

不幸的是，没有办法做到这一点......相反，这里有一些关于在故事板中移动事物的替代方法的提示：[在故事板编辑器中移动 UI 元素](https://stackoverflow.com/a/13471484/1323652)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-14T12:32:18.590

[找到了推荐Smart Scroll](http://www.marcmoini.com/sx_en.html)的好答案

抓取和滚动（使用鼠标中键）是您正在寻找的。

[https://apple.stackexchange.com/a/85777](https://apple.stackexchange.com/a/85777)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-07T13:41:36.183

我有一个没有滚轮的花哨鼠标，但我可以用它平移。按住 shift 并在鼠标上水平、垂直等移动食指……就像轨迹球一样工作。

# c++ - 如何从文本文件中读取文件名列表并在 C++ 中打开它们？

> ID：11474038
> 
> 赞同：0
> 
> 时间：2012-07-13T15:57:02.340
> 
> 标签：c++, string, file-io, ifstream

我有一个存储在文本文件中的文件列表。我逐行读取文件并将它们存储在字符串数组中。文件列表如下所示：

```
04_02_1310.csv
04_03_1350.csv
04_04_0421.csv
04_05_0447.csv 
```

等等。让我们调用我的字符串数组

```
filelist[i] 
```

假设我正在尝试打开列表中的第一个文件：

```
inputFile.open(filelist[0].c_str()); // This cannot open file 
```

该文件无法打开。如果我将文件名放在引号中，一切正常：

```
inputFile.open("04_02_1310.csv"); // This works perfectly 
```

如果我打印 filelist[i] 的内容，那么它也可以正常工作：

```
cout << filelist[0] << endl; // This outputs 04_02_1310.csv on screen. 
```

有人可以告诉我上述方法有什么问题吗？在过去的 2 天里，这让我发疯了，我要手动输入所有内容以完成它（一个接一个地完成 100 多个文件）。

我也愿意以任何其他方式来完成这项简单的任务。

谢谢！！！

编辑：如果您想了解它是如何实现的，我将添加代码的相关部分：

```
#include <cstdlib>
#include <iostream>
#include <time.h>
#include <string>
#include <sstream>
#include <fstream>
#include <vector>
#include <algorithm>
#include <iterator>

using namespace std;

//Declarations for I/O files
ifstream inputFile;

//Declare other variables (forgot to add these in my previous EDIT, sorry)
int number_of_files;
string line;
string *filelist = NULL;

//Open file list and count number of files
inputFile.clear();
inputFile.open("filelist.txt", ios::in);

//exit and prompt error message if file could not be opened
if (!inputFile){
    cerr << "File list could not be opened" << endl;
    exit(1);
}// end if

// count number of lines in the data file and prompt on screen
number_of_files = 0;

while (getline(inputFile, line))        
    number_of_files++;

cout << "Number of files to be analyzed: " << number_of_files << endl;

filelist = new string[number_of_files];
inputFile.close();

//Re-open file list and store filenames in a string array
inputFile.clear();
inputFile.open("filelist.txt", ios::in);

//exit and prompt error message if file could not be opened
if (!inputFile){
    cerr << "File list could not be opened" << endl;
    exit(1);
}// end if

// store filenames
i = 0;
while (getline(inputFile, line)){
    filelist[i] = line;
    //cout << filelist[i] << endl;
    i = i + 1;
}        

inputFile.close();

//open first file in the list, I deleted the loop to focus on the first element for now

inputFile.clear();
inputFile.open(filelist[0].c_str(), ios::in);

//exit and prompt error message if file could not be opened
if (!inputFile){
    cerr << "Data file could not be opened" << endl;
    exit(1);
}// end if 
```

输出是：

```
Data file could not be opened 
```

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:26:44.890

该字符串中的文本文件中可能仍然存在 '\n' 字符（或 EOF,'\0' ），您应该尝试检查字符串是否“干净”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:37:17.577

> 我也愿意以任何其他方式来完成这项简单的任务。

```
#include <cstdlib>
#include <iostream>
#include <time.h>
#include <string>
#include <sstream>
#include <fstream>
#include <vector>
#include <algorithm>
#include <iterator>

using namespace std;

int main () {

  std::ifstream inputFile("filelist.txt");
  std::vector<std::string> fileList;
  std::string line;

  if(!inputFile) {
    std::cerr << "File list could not be opened\n";
    return 1;
  }

  while(std::getline(inputFile, line)) {
    fileList.push_back(line);
  }

  std::cout << "Number of files to be analyzed: " << fileList.size() << "\n";

  std::vector<std::string>::const_iterator it(fileList.begin());
  std::vector<std::string>::const_iterator end(fileList.end());
  for(;it != end;++it) {
    std::ifstream inputTxt(it->c_str());

    if(!inputTxt) {
      std::cerr << "Data file could not be opened:" << *it << "\n";
      return 1;
    }
    while(std::getline(inputTxt, line)) {
      std::cout << line << "\n";
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:37:17.407

我建议使用更“C++ - ish”的方法，尽管与 Blood 发布的优雅解决方案不同：

```
int main()
{
    std::vector<std::string> fileList;

    // ...

    std::ifstream inputFile("filelist.txt");

    // ...

    std::string line;
    while(inputFile >> line)
        filelist.push_back(line);

    inputFile.close();

    // ...

    for(size_t t = 0; t < filelist.size(); t++)
    {
        std::ifstream dataFile(filelist[t].c_str());

        // ...

        dataFile.close();
    }
} 
```

# r - 将黄土平滑应用于时间序列

> ID：11474039
> 
> 赞同：5
> 
> 时间：2012-07-13T15:57:02.690
> 
> 标签：r, loess

我想通过应用黄土函数来平滑我绘制的时间曲线，但我无法让它工作。一个例子：

```
mydat <- runif(50)
day1 <- as.POSIXct("2012-07-13", tz = "UTC")
day2 <- day1 + 49*3600*24
pdays <- seq(day1, day2, by = "days")
lo <- loess(mydat ~ pdays) 
```

我收到以下消息：

```
Error: NA/NaN/Inf in foreign function call (arg 2) 
```

是否可以对时间序列应用黄土平滑

非常感谢任何帮助或指导！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-30T09:09:19.300

我认为这里的想法是将您的时间序列转换为数字形式（使用`as.numeric`），以便您可以执行操作。

```
mydat <- runif(50)
day1 <- as.POSIXct("2012-07-13", tz = "UTC")
day2 <- day1 + 49*3600*24
pdays <- seq(day1, day2, by = "days")
lo <- loess(mydat ~ as.numeric(pdays))

# And then if you want to plot the result:
plot(pdays,mydat)
lines(pdays, lo$fitted) 
```

# jquery - Internet Explorer 将选择框呈现为绝对？

> ID：11474042
> 
> 赞同：0
> 
> 时间：2012-07-13T15:57:13.080
> 
> 标签：jquery, html, internet-explorer

使用常规的 HTML 选择框：

```
<select>
    <option value="">click to select a task type</option>
    <option value="">Awesome Option</option> 
```

使用此 jQuery 时：

```
 $("select, option").live({
    mouseenter: function(){
      console.log("INSIDE");
    },
    mouseleave: function(){
      console.log("OUTSIDE");
    }
  }); 
```

当我单击选择框并将鼠标悬停在任何选项上时，IE 将响应我的鼠标为“外部”。

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:13:07.857

当您将事件绑定到 just 时，什么都不会发生`option`。我不认为你可以将事件绑定到那个。或者，如果可以，不是所有事件；`click`当然，显然这些也是。

这种行为是有意义的，因为`select`当您向下移动以选择一个选项时，您确实将鼠标移到了元素之外。浏览器/操作系统处理显示菜单。这样做的不仅仅是 IE。铬也是。

我建议使用该`blur`事件，因为它会在元素失去焦点时触发。这只会在您单击外部并关闭菜单时触发。

```
 $("select").live({
    mouseenter: function(){
      console.log("INSIDE");
    },
    blur: function(){
      console.log("OUTSIDE");
    }
  }); 
```

[演示](http://jsbin.com/icayes)

# python - 编写用于更改比例值的 MEL/Python 脚本

> ID：11474048
> 
> 赞同：3
> 
> 时间：2012-07-13T15:57:51.760
> 
> 标签：python, maya, mel

动态图形领域的人很难编写 MEL 脚本（因为他们都不是程序员）。所以我尝试了一下，但我遇到了很大的困难，因为我不知道很多变量和语法等。

基本上想选择比例值为0.001或更小的dagObjects的关键帧，然后将比例值更改为0。

我尝试将所有 dagObjects 分配到一个数组中，然后尝试遍历该数组，但之后就丢失了。

此外，如果这可以在 Python 中完成，那很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:54:11.103

嗨，很高兴知道你的 dagObjects 是什么形式。这是一个简单的 python 脚本。

```
from maya import cmds
import math

dags = ['obj']
attrs = ['sx', 'sy', 'sz']
tol = 0.001

for dag in dags:
    frames = [frame for frame in cmds.keyframe(dag, q=1)]
    for frame in frames:
        attrib_vals = [cmds.getAttr(dag+'.'+attr, time=frame) for attr in attrs]
        length = math.sqrt(sum(attr_val * attr_val for attr_val in attrib_vals))
        if length < tol:
            cmds.setKeyframe(dag, at=attrs, t=[frame], v=0) 
```

# java - 无法从网站下载 JD-Eclipse？还有其他下载源吗？

> ID：11474049
> 
> 赞同：6
> 
> 时间：2012-07-13T15:57:55.263
> 
> 标签：java, decompiler

在未安装 JD 反编译器的备用笔记本电脑上工作。去该站点下载 (http://java.decompiler.free.fr) 但下载链接现在似乎引用了 Google Drive 位置，并且下面的错误消息不断出现。

我肯定会确保我不会公开分享 GD 的任何内容，我没有意识到有限制。与此同时，有人知道我还能从哪里获得该软件吗？

错误：

> 抱歉，您目前无法查看或下载此文件。
> 
> 最近有太多用户查看或下载了此文件。请稍后再尝试访问该文件。如果您尝试访问的文件特别大或与多人共享，则最多可能需要 24 小时才能查看或下载该文件。如果 24 小时后您仍然无法访问文件，请联系您的域管理员。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T16:11:01.907

I can no longer store JD-GUI and JD-Eclipse binary files on free.fr. Any suggestions to store them elsewhere ?

In the short term, try this link : [http://web.archive.org/web/20110720221237/http://java.decompiler.free.fr/jd-eclipse/update/jdeclipse_update_site.zip](http://web.archive.org/web/20110720221237/http://java.decompiler.free.fr/jd-eclipse/update/jdeclipse_update_site.zip)

[EDIT] I fear that "java.decompiler.free.fr" is definitely closed. Try this link : [http://jd.benow.ca/jd-eclipse/downloads/jdeclipse_update_site.zip](http://jd.benow.ca/jd-eclipse/downloads/jdeclipse_update_site.zip) [/EDIT]

# matlab - 灵活最小二乘 (FLS) 回归的 MATLAB 实现

> ID：11474052
> 
> 赞同：2
> 
> 时间：2012-07-13T15:58:09.227
> 
> 标签：matlab, regression, least-squares

是否有用于[灵活最小二乘 (FLS) 回归](http://www2.econ.iastate.edu/tesfatsi/flshome.htm)¹的 MATLAB 实现？

我正在寻找一种体面的（嗯，最不痛苦的）方法来处理随时间变化的系数的回归。欢迎所有想法，但最好是指向 FLS 回归实现的指针，因为经过广泛的谷歌搜索后我找不到一个。

* * *

[^(1\. R. Kalaba 和 L. Tesfatsion (1989)，*“通过灵活最小二乘法进行时变线性回归”*，计算机和数学及其应用，卷。17，第 1215-1245 页)](http://www2.econ.iastate.edu/tesfatsi/TimeVaryingLinearReg.CMWA1989.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:11:28.997

我在 FLS 回归的[GitHub 上找到了 R 代码。](https://github.com/bwlewis/fls/blob/master/R/fls.R)我已将其转换为 MATLAB，但由于 R 和 MATLAB 的功能不同，它可能会出现一些错误。现在，我们只需要对其进行测试即可进行最终调整。

```
function X = fls(A, b, mu, ncap, smoothed)

if isempty(mu)
    mu = 1;
end

if isempty(ncap)
    ncap = length(b);
end

if isempty(smoothed)
    smoothed = true;
end

[m n] = size(A);

M = zeros(n, n, ncap);
E = zeros(n, ncap);
X = zeros(n, ncap);
R = eye(n) * mu;

for j = 1:ncap
    Z = linsolve( qr( R + tcrossprod(A(j,:)) ), eye(n) );
    M(:,:,j) = mu * Z;               % (5.7b)
    v = b(j) * A(j,:);

    if (j == 1) 
        p = zeros(n,1);
    else
        p = mu * E(:,j-1);
    end

    w = p + v;

    E(:,j) = Z * w;                  % (5.7c)
    R = -mu * mu * Z;

    diag = R(1:n+1:end);
    R(diag) = R(diag) + 2*mu;
end

% Calculate eqn (5.15) FLS estimate at ncap
Q = -mu * M(:,:,ncap-1);

diag = Q(1: (size(Q,1)+1) : end);
Q(diag) = Q(diag) + mu;
Ancap = A(ncap,:);

C = Q + Ancap' * Ancap;
d = mu * E(:,ncap-1) + b(ncap)*Ancap';
X(:,ncap) = C * d;
X(:,ncap) = linsolve(qr(C),d);

if smoothed
    % Use eqn (5.16) to obtain smoothed FLS estimates for
    % X[,1], X[,2], ..., X[,ncap-1]

    for j = 1:ncap-1
        l = ncap - j;
        X(:,l) = E(:,l) + M(:,:,l) * X(:,l+1);
    end
else
    X = X(:,ncap);
end

end

function resp = tcrossprod(A)
resp = A * A';
end 
```

# spotify - SPLoginViewController 记住凭据

> ID：11474055
> 
> 赞同：5
> 
> 时间：2012-07-13T15:58:14.453
> 
> 标签：spotify, cocoalibspotify-2.0

在 CocoaLibSpotify 中，如何让 SPLoginViewController 存储凭据，以便用户以后可以通过 [[SPSession sharedSession] attemptLoginWithStoredCredentials:] 自动登录？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T19:26:39.230

你没有。

相反，实现该`SPSessionDelegate`方法`-session:didGenerateLoginCredentials:forUserName:`并将凭据存储在`NSUserDefaults`或其他任何内容中（给定的凭据已经加密并且可以安全地以明文形式存储）。

下次您的应用启动时，如果您有可用的凭据，则完全跳过并使用'方法`SPLoginViewController`登录。如果这会产生登录错​​误，则令牌已失效，您需要要求用户再次登录 - 如果用户在生成令牌后更改密码，则可能会发生失效。`SPSession``attemptLoginWithUserName:existingCredential:rememberCredentials:`

请注意，`rememberCredentials:`参数和旧`attemptLoginWithStoredCredentials:`的做事方式现在被认为已弃用，并将很快消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-16T02:56:37.670

先前的答案也不再相关，因为尝试登录WithUserName:existingCredential:rememberCredentials: 方法不再存在（尽管它仍然在SPSession.h 的评论中被提及）

要进行设置：

1.  从 github 获取最新的 cocoalibspotify 并在 Xcode 中构建它： [https ://github.com/spotify/cocoalibspotify](https://github.com/spotify/cocoalibspotify)
2.  构建并放入您的项目：

如果之前未登录，自动登录或提示用户身份验证：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSMutableDictionary *storedCredentials = [defaults valueForKey:@"SpotifyUsers"];

if (storedCredentials == nil)
    [self performSelector:@selector(showLogin) withObject:nil afterDelay:0.0];
else
{
    NSString *u = [storedCredentials objectForKey:@"LastUser"] ;
    [[SPSession sharedSession] attemptLoginWithUserName:u existingCredential:[storedCredentials objectForKey:u]];
} 
```

登录时存储凭据的回调方法：

```
-(void)session:(SPSession *)aSession didGenerateLoginCredentials:(NSString *)credential forUserName:(NSString *)userName
{
    NSLog(@"stored credentials");
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSMutableDictionary *storedCredentials = [[defaults valueForKey:@"SpotifyUsers"] mutableCopy];

    if (storedCredentials == nil)
        storedCredentials = [NSMutableDictionary dictionary];

    [storedCredentials setValue:credential forKey:userName];
    [storedCredentials setValue:userName forKey:@"LastUser"];
    [defaults setValue:storedCredentials forKey:@"SpotifyUsers"];
    [defaults synchronize];
} 
```

# objective-c - 使基类调用子类中的方法

> ID：11474057
> 
> 赞同：3
> 
> 时间：2012-07-13T15:58:15.767
> 
> 标签：objective-c, inheritance

作为 C#/Java 程序员，我很难解决以下问题：

有一个基类“B”。在它的 init Method 中，它调用了一个方法“SetupStuff”。对于基类，此方法只是空的。

然后有一个从“B”继承的派生类“D”。D 也实现了方法“SetupStuff”（实际上在那里做了一些事情）。

问题是：当我创建 D 的对象时，它的“SetupStuff”永远不会被调用。调用 B 的 init 方法，然后调用空的“SetupStuff”。

我需要做什么才能调用派生类的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:39:17.647

如果您尝试从初始化程序内部调用覆盖，它将无法正常工作。原因很容易理解：由于override属于子类，并且由于子类初始化之前需要完成超类实例初始化，调用派生方法就违反了规则" 方法被调用，实例的初始化已经完成。通常，出于同样的原因，从 Java 或 C# 构造函数调用虚拟函数并不是一个好主意。在 C++ 中，从构造函数调用 virtuals 会重定向到构造函数自己的类中的实现（即与您在 Objective C 中观察到的相同）。

与不允许覆盖静态方法的 C# 和 Java 不同，Objective C 允许您提供类方法的特定于类的实现。您可以使用这种机制来实现您想要做的事情：在派生类中定义一个*类方法*，并从基类中调用它，如下所示：

```
@interface TT : NSObject
-(id)init;
@end

@interface Test1 : TT
+(void)doit;
@end

@interface Test2 : TT
+(void)doit;
@end

@implementation Test1
+(void) doit {
    NSLog(@"Test1");
}
@end

@implementation Test2
+(void) doit {
    NSLog(@"Test2");
}
@end

@implementation TT
-(id) init {
    if (self=[super init]) {
        // The "magic" is in the following line:
        [self->isa doit];
    }
    return self;
}
@end 
```

你打电话时

```
[[Test1 alloc] init];
[[Test2 alloc] init]; 
```

你看

```
Test1
Test2 
```

在日志中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:02:35.557

默认情况下，objective-c 中的所有方法都是虚拟的。所以你只需要在你的派生类中实现你想要覆盖的方法。只是不要忘记调用父方法以确保您没有错过任何内容

并确保您创建 D 类的实例，而不是 B。如果您像这样创建它

```
[[D alloc] init]; 
```

然后应该正确调用被覆盖的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:04:10.200

您是否忘记使用以下方法初始化子方法：

```
-(void) SetupStuff{ // This is the child class implementation
[super SetupStuff];
} 
```

在objective-c中，您必须手动调用父方法，即使它们覆盖了预先存在的方法。

# c# - 从 AC# COM 组件方法返回一个字符串

> ID：11474060
> 
> 赞同：0
> 
> 时间：2012-07-13T15:58:25.933
> 
> 标签：c#, com

我有一个 C# 类库，它是 COM 可见的，可以从 Visual Studio 6 应用程序中调用。其中一种方法需要返回一个字符串。我试过这两种方法：

```
public void GetString(out string sText)
{
    sText = MemberStringVariable;
} 
```

当我从 VC6 调用上述内容时，我会抛出异常。

```
public string GetString()
{
    return MemberStringVariable;
} 
```

当我调用上述方法（以 BSTR* 作为参数）时，我得到一个 NULL 指针。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:05:55.847

你的第二种方法：

```
public string GetString() { return MemberStringVariable; } 
```

应该管用。我一直都这样做。您在 C++ 中获得的类型是 comutil.h 中定义的 _bstr_t

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:13:38.707

请参阅[此](https://stackoverflow.com/q/2179270/845279)问题和答案。我怀疑您是否可以将 a 返回`string`到本机代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:14:49.417

哦，自从我进行 COM 互操作以来已经有一段时间了，但我似乎记得您可能需要`MarshalAsAttribute`在方法的返回值上使用。

```
[return: MarshalAs(UnmanagedType.Bstr)]
public string GetString() 
{ 
    return MemberStringVariable; 
} 
```

有关更多示例，请参阅[http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshalasattribute(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshalasattribute(v=vs.100).aspx)。

# java - 破坏单元测试的语义

> ID：11474063
> 
> 赞同：3
> 
> 时间：2012-07-13T15:58:30.263
> 
> 标签：java, unit-testing, junit

我正在为我们的主要产品编写单元测试，并且有一个问题：如何区分

*   因测试出错而失败的测试（例如，发现了一个错误，并且它是一个非回归测试）
*   由于测试的另一个意外部分失败而失败的测试（因为测试错误或出现未知错误）

对于第一个，我们肯定有 jUnit Assert 框架，但是对于第二个，我们有什么？

示例：我的单元测试是测试 c() 不会抛出 MyException，但要执行 c()，我需要先执行 a()，然后执行 b()，两者都可以抛出 MyException()，所以我会写：

```
@Test
public void testC() {
  a();
  Object forC = b();
  try {
    c(forC);
  } catch (MyException e) {
    Assert.fail("....");
  }
} 
```

但是接下来我需要处理可以由 a 或 b 抛出的 MyException，并且还要处理 forC 不应该为 null 的事实。做这个的最好方式是什么？

*   捕获由 a 或 b 和 Assert.fail 引发的 MyException，但 a 和 b 未通过此测试进行测试，因此对我而言，当它们失败时不应将它们标记为测试失败。也许他们稍后会失败，因为此时我们应该做 b();a() 而不是 a();b();。
*   让 testC 抛出 MyException，这样测试将因“MyException”而失败，但这是误导性的，因为 MyException 不会告诉测试写错了。然后，所有测试都会因各自的异常而失败。在这种情况下，如果 forC 为 null，我还需要抛出类似 NullPointerException 的东西，这也没有语义。
*   捕获 a 和 b 抛出的 MyException 并将其包装到一个异常中，该异常表明测试可能是错误的，例如 TestCorruptedException。但是我在 jUnit 中找不到这样的异常，所以 jUnit 不会识别它们（这对我来说没问题）。此外，我需要从我的所有单元测试中知道这个异常，这些单元测试当然被分成多个模块、项目等......所以这是可行的，但会增加依赖项。

您对这个问题的解决方案是什么？我可能会选择第二个，但如上所述，我对它不满意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T16:11:22.153

单元测试的基石是测试所需的最少代码量，否则它可能会落入您正在寻找端到端功能的集成测试空间。

如果您可以证明`a()`可以在它自己的测试类中`b()`创建和测试，并且也可以在它自己的测试类中创建和测试，那么您上面的测试可以忽略测试，`a()`而是`b()`使用已知的获胜值不会失败。这通常可以通过使用[模拟对象](http://en.wikipedia.org/wiki/Mock_object)来满足。

将 a() 和 b() 创建为模拟对象，`c()`可以单独进行测试。如果您发现无法单独测试 c() 和 a() 和 b()，那么这表明您的代码需要更改以便分离关注点。这通常通过将a() 和 b()[的依赖项注入 c() 来满足。](http://en.wikipedia.org/wiki/Dependency_injection)

这篇关于[何时在单元测试中使用模拟对象的](https://stackoverflow.com/questions/38181/when-should-i-mock)帖子可能有助于进一步了解这个主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:15:44.907

聪明人的一句话——永远不要在单元测试中这样做

```
 try {
    c(forC);
  } catch (MyException e) {
    Assert.fail("....");
  } 
```

这对于任何必须处理您的代码的人来说都有一个非常烦人的副作用：异常的原始原因丢失了。这意味着修复开发人员将进入并调试测试或删除 try/catch 块以查看异常的根本原因。

如果测试抛出异常并且不应该，**就让它**。测试将失败，测试运行的开发人员可以很容易地在控制台/日志中首先看到导致异常的原因。采纳@piotrek 的建议，让您的测试尽可能简单。我数不清有多少次我不得不从格式错误的测试中剔除这个结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:05:29.003

著名的问题：谁来测试我们的测试？简短的回答：你无法区分。您始终可以定义测试之间的依赖关系（在某些测试框架中）。当一项测试失败时，所有依赖于它的测试都不会执行。你永远不会知道你的测试代码是否正确。这就是为什么它应该尽可能简单。它也应该在你修复代码之前执行——这样你可以避免当你认为你的代码是固定的，而实际上测试通过了，因为它是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T16:14:22.107

很酷的问题！:)

我编写的每个单元测试都遵循以下结构：

```
// Given
 setup for the test

// When
what i specifically test

// Then
my assertions 
```

在您的示例中，我假设尝试之前是设置。你需要打电话给你的考试做准备，没关系。

但如果你做得好，a(); 和 b(); 在别处测试。因此，如果其中一种方法存在错误，其他测试，他们的测试，将会中断。这就是你如何区分它打破的地方。

Given 和 Then 永远不应该中断。您正在测试何时。

如果您不确定 a() 和 b()，请模拟它们。

而且，最后一种情况，如果您想区分异常，请断言消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T19:02:04.653

只是不要捕获异常，而是将它们从您的测试方法中抛出。JUnit 将指示测试失败和测试错误之间的区别：

```
public void test() throws MyException {
    boolean result = instance.doStuff();
    Assert.true(result);
} 
```

当您期望出现异常时，请执行以下操作：

```
public void test() {
    try {
        instance.doStuff();
        Assert.fail("Expected MyException");
    }
    catch(MyException e) {
        // expected
    }
} 
```

# entity-framework - Entity Framework DB First (EDMX) 是否会阻止适当的关注点分离？

> ID：11474066
> 
> 赞同：0
> 
> 时间：2012-07-13T15:59:06.490
> 
> 标签：entity-framework, edmx, separation-of-concerns

我是实体框架和 MVC 的新手，并试图了解什么构成了新应用程序的良好设计方法。

有几种使用实体框架的方法。但是，对于我的项目，最好的选择是 DB First。我玩过一个 EDMX 文件，并且我已经使用 DbContext 代码生成器来创建我的包装类。

我计划使用存储库和工作单元模式，并使用 ninject 进行 DI。

但是，从 SoC 的角度来看，虽然我的存储库将从我的代码中隐藏数据存储 (EF) 的实现，但模型类本身非常具有 EF 风格，这似乎并不“合适”。

似乎使用基于 EDMX 的 EF 方法模糊了关注点的分离。只有 POCO 支持似乎允许真正的分离，但 POCO 还有一些我不喜欢的其他限制。

我错过了什么，还是使用 EDMX 有这个缺点？

人们是否使用自动映射器在实体模型和另一个干净的 SoCced 模型之间进行转换？

谢谢

田

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:14:33.347

我对 Separation of Concerns 问题没有强烈的意见，但是我使用了标准 ADO.Net 版本的 EF 和 POCO，并且为 POCO 自定义 T4 代码生成脚本的输出一点也不难解决您对创建的对象结构的任何担忧。这听起来可能是您想要做的事情的一个很好的起点。

一旦您知道您正在寻找 T4 模板，就会有很多教程和许多有用的 SO 问题可以让您了解需要做什么。

# jquery - Jquery 自动完成和更新面板

> ID：11474068
> 
> 赞同：0
> 
> 时间：2012-07-13T15:59:10.410
> 
> 标签：jquery, asp.net, jquery-autocomplete

在 WebUserControl 我有一个输入元素，我希望它使用 Jquery 自动完成显示值列表。它根本不起作用。

这是填充列表的脚本：

```
$(document).ready(function() {    
    var availableTags = [
            "ActionScript",
            "AppleScript",
            "Other one"
            ];
    $("#listaCecos").autocomplete({
        source: availableTags
    });
}); 
```

我建立了一个断点，发现：

*   当 .autocomplete 行被执行时，`$("#listaCecos")`似乎未初始化。在控制台中，它显示以下内容：`[]`
*   页面完全加载后，`$("#listaCecos")`正确显示元素`[<input id=​"listaCecos" name=​"listaCecos">​]`
*   加载页面后，我可以在控制台上执行 .automcomplete 代码（代码块上方），输入开始正常工作。

所以，我想它不起作用，因为在执行 .autocomplete 脚本时，输入元素没有正确加载（它在 webusrcontrol 内，并且在初始页面加载时不可见）。

请帮助我确定我应该在何时何地放置自动完成设置脚本，以便正确填充输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:47:53.537

我设法解决了它。输入位于 UpdatePanel 内，它会替换其内容，因此会丢失自动完成配置。

解决方案是在每个 end_Request 上重新配置自动完成功能：

```
$(document).ready(function() {
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);

    function EndRequestHandler(sender, args) {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "ceshar"
            ];
        $(".listaCecos").autocomplete({
            source: availableTags
        });
    } 
}); 
```

# sql - Linq to sql - 聚合未在数据库服务器上执行

> ID：11474069
> 
> 赞同：0
> 
> 时间：2012-07-13T15:59:12.097
> 
> 标签：sql, linq, group-by, linqpad

我在 c# 中有一个 linq to sql 查询可以工作 - 但在将数据摘要输出到网页的 ASP.NET 应用程序中使用时会导致性能非常差。此查询尝试对来自单个 log4net 表的日志进行分组。没有连接。

```
.GroupBy(l => new
{
Level = l.Level,
Period = ((DateTime.Now - l.Created).TotalMinutes <= 60)
             ? "Within last hour"
             : (((DateTime.Now - l.Created).TotalMinutes > 60) &&
                ((DateTime.Now - l.Created).TotalMinutes <= 360)
               )
                   ? "Within last 6 hours"
                   : (((DateTime.Now - l.Created).TotalMinutes > 360) &&
                      ((DateTime.Now - l.Created).TotalMinutes <= 1440)
                     )
                         ? "Within last 24 hours"
                         : (((DateTime.Now - l.Created).TotalMinutes >
                             1440) &&
                            ((DateTime.Now - l.Created).TotalMinutes <=
                             10080)
                           )
                               ? "Within last week"
                               : (((DateTime.Now - l.Created).
                                       TotalMinutes > 10080) &&
                                  ((DateTime.Now - l.Created).
                                       TotalMinutes <= 302400)
                                 )
                                     ? "Within last month"
                                     : (((DateTime.Now - l.Created).
                                             TotalMinutes > 302400) &&
                                        ((DateTime.Now - l.Created).
                                             TotalMinutes <= 907200)
                                       )
                                           ? "Within last quarter"
                                           : (((DateTime.Now -
                                                l.Created).
                                                   TotalMinutes >
                                               907200) &&
                                              ((DateTime.Now -
                                                l.Created).
                                                   TotalMinutes <=
                                               3628800)
                                             )
                                                 ? "Current year"
                                                 : ((DateTime.Now -
                                                     l.Created).
                                                        TotalMinutes >
                                                    3628800)
                                                       ? "Before current year"
                                                       : String.Empty,
PeriodType = ((DateTime.Now - l.Created).TotalMinutes <= 60)
                 ? 1
                 : (((DateTime.Now - l.Created).TotalMinutes > 60) &&
                    ((DateTime.Now - l.Created).TotalMinutes <= 360)
                   )
                       ? 2
                       : (((DateTime.Now - l.Created).TotalMinutes >
                           360) &&
                          ((DateTime.Now - l.Created).TotalMinutes <=
                           1440)
                         )
                             ? 3
                             : (((DateTime.Now - l.Created).
                                     TotalMinutes > 1440) &&
                                ((DateTime.Now - l.Created).
                                     TotalMinutes <= 10080)
                               )
                                   ? 4
                                   : (((DateTime.Now - l.Created).
                                           TotalMinutes > 10080) &&
                                      ((DateTime.Now - l.Created).
                                           TotalMinutes <= 302400)
                                     )
                                         ? 5
                                         : (((DateTime.Now - l.Created)
                                                 .TotalMinutes >
                                             302400) &&
                                            ((DateTime.Now - l.Created)
                                                 .TotalMinutes <=
                                             907200)
                                           )
                                               ? 6
                                               : (((DateTime.Now -
                                                    l.Created).
                                                       TotalMinutes >
                                                   907200) &&
                                                  ((DateTime.Now -
                                                    l.Created).
                                                       TotalMinutes <=
                                                   3628800)
                                                 )
                                                     ? 7
                                                     : ((DateTime.Now -
                                                         l.Created).
                                                            TotalMinutes >
                                                        3628800)
                                                           ? 8
                                                           : 0
                                              }
                            ).ToList(); 
```

当我运行 SQL 探查器时，我发现实际正在运行的查询是这样的：

```
SELECT 
[Extent1].[LogID] AS [LogID], 
[Extent1].[Created] AS [Created], 
[Extent1].[RoleInstance] AS [RoleInstance], 
[Extent1].[DeploymentId] AS [DeploymentId], 
[Extent1].[Machine] AS [Machine], 
[Extent1].[Thread] AS [Thread], 
[Extent1].[Level] AS [Level], 
[Extent1].[Logger] AS [Logger], 
[Extent1].[Message] AS [Message], 
[Extent1].[Exception] AS [Exception]
FROM [dbo].[Logs] AS [Extent1] 
```

本质上，看起来所有的分组等都是在客户端完成的。由于 Web 服务器和数据库服务器之间的链接很慢 - 这导致网页实际显示结果之前需要很长时间。此外，日志数据库越大，响应越慢。

奇怪的是——当我在 LinqPad 中运行类似的查询时——我得到了一个完全不同的计划——像这样（略有不同的查询）：

```
exec sp_executesql N'SELECT COUNT(*) AS [Count], [t1].[Level], [t1].[value] AS [Period], [t1].[value2] AS [PeriodType]
FROM (
    SELECT [t0].[Level], 
        (CASE 
            WHEN ((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p0))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p0), [t0].[Created]), @p0)) * 10000))) / 600000000) <= @p1 THEN CONVERT(NVarChar(20),@p2)
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p3))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p3), [t0].[Created]), @p3)) * 10000))) / 600000000) > @p4) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p5))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p5), [t0].[Created]), @p5)) * 10000))) / 600000000) <= @p6) THEN CONVERT(NVarChar(20),@p7)
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p8))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p8), [t0].[Created]), @p8)) * 10000))) / 600000000) > @p9) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p10))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p10), [t0].[Created]), @p10)) * 10000))) / 600000000) <= @p11) THEN @p12
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p13))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p13), [t0].[Created]), @p13)) * 10000))) / 600000000) > @p14) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p15))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p15), [t0].[Created]), @p15)) * 10000))) / 600000000) <= @p16) THEN CONVERT(NVarChar(20),@p17)
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p18))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p18), [t0].[Created]), @p18)) * 10000))) / 600000000) > @p19) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p20))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p20), [t0].[Created]), @p20)) * 10000))) / 600000000) <= @p21) THEN CONVERT(NVarChar(20),@p22)
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p23))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p23), [t0].[Created]), @p23)) * 10000))) / 600000000) > @p24) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p25))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p25), [t0].[Created]), @p25)) * 10000))) / 600000000) <= @p26) THEN CONVERT(NVarChar(20),@p27)
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p28))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p28), [t0].[Created]), @p28)) * 10000))) / 600000000) > @p29) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p30))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p30), [t0].[Created]), @p30)) * 10000))) / 600000000) <= @p31) THEN CONVERT(NVarChar(20),@p32)
            WHEN ((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p33))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p33), [t0].[Created]), @p33)) * 10000))) / 600000000) > @p34 THEN CONVERT(NVarChar(20),@p35)
            ELSE CONVERT(NVarChar(20),@p36)
         END) AS [value], 
        (CASE 
            WHEN ((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p37))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p37), [t0].[Created]), @p37)) * 10000))) / 600000000) <= @p38 THEN @p39
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p40))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p40), [t0].[Created]), @p40)) * 10000))) / 600000000) > @p41) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p42))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p42), [t0].[Created]), @p42)) * 10000))) / 600000000) <= @p43) THEN @p44
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p45))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p45), [t0].[Created]), @p45)) * 10000))) / 600000000) > @p46) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p47))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p47), [t0].[Created]), @p47)) * 10000))) / 600000000) <= @p48) THEN @p49
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p50))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p50), [t0].[Created]), @p50)) * 10000))) / 600000000) > @p51) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p52))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p52), [t0].[Created]), @p52)) * 10000))) / 600000000) <= @p53) THEN @p54
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p55))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p55), [t0].[Created]), @p55)) * 10000))) / 600000000) > @p56) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p57))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p57), [t0].[Created]), @p57)) * 10000))) / 600000000) <= @p58) THEN @p59
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p60))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p60), [t0].[Created]), @p60)) * 10000))) / 600000000) > @p61) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p62))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p62), [t0].[Created]), @p62)) * 10000))) / 600000000) <= @p63) THEN @p64
            WHEN (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p65))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p65), [t0].[Created]), @p65)) * 10000))) / 600000000) > @p66) AND (((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p67))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p67), [t0].[Created]), @p67)) * 10000))) / 600000000) <= @p68) THEN @p69
            WHEN ((CONVERT(Float,CONVERT(BigInt,(((CONVERT(BigInt,DATEDIFF(DAY, [t0].[Created], @p70))) * 86400000) + DATEDIFF(MILLISECOND, DATEADD(DAY, DATEDIFF(DAY, [t0].[Created], @p70), [t0].[Created]), @p70)) * 10000))) / 600000000) > @p71 THEN @p72
            ELSE @p73
         END) AS [value2]
    FROM [Logs] AS [t0]
    ) AS [t1]
GROUP BY [t1].[Level], [t1].[value], [t1].[value2]',N'@p0 datetime,@p1 float,@p2 nvarchar(4000),@p3 datetime,@p4 float,@p5 datetime,@p6 float,@p7 nvarchar(4000),@p8 datetime,@p9 float,@p10 datetime,@p11 float,@p12 nvarchar(4000),@p13 datetime,@p14 float,@p15 datetime,@p16 float,@p17 nvarchar(4000),@p18 datetime,@p19 float,@p20 datetime,@p21 float,@p22 nvarchar(4000),@p23 datetime,@p24 float,@p25 datetime,@p26 float,@p27 nvarchar(4000),@p28 datetime,@p29 float,@p30 datetime,@p31 float,@p32 
nvarchar(4000),@p33 datetime,@p34 float,@p35 nvarchar(4000),@p36 nvarchar(4000),@p37 datetime,@p38 float,@p39 int,@p40 datetime,@p41 float,@p42 datetime,@p43 float,@p44 int,@p45 datetime,@p46 float,@p47 datetime,@p48 float,@p49 int,@p50 datetime,@p51 float,@p52 datetime,@p53 float,@p54 int,@p55 datetime,@p56 float,@p57 datetime,@p58 float,@p59 int,@p60 datetime,@p61 float,@p62 datetime,@p63 float,@p64 int,@p65 datetime,@p66 float,@p67 datetime,@p68 float,@p69 int,@p70 datetime,@p71 float,@p72 int,@p73 int',@p0='2012-07-11 23:46:56.457',@p1=60,@p2=N'Within last hour',@p3='2012-07-11 23:46:56.457',@p4=60,@p5='2012-07-11 23:46:56.457',@p6=360,@p7=N'Within last 6 hours',@p8='2012-07-11 23:46:56.457',@p9=360,@p10='2012-07-11 23:46:56.457',@p11=1440,@p12=N'Within last 24 hours',@p13='2012-07-11 23:46:56.457',@p14=1440,@p15='2012-07-11 23:46:56.457',@p16=10080,@p17=N'Within last week',@p18='2012-07-11 23:46:56.457',@p19=10080,@p20='2012-07-11 23:46:56.457',@p21=302400,@p22=N'Within last month',@p23='2012-07-11 23:46:56.457',@p24=302400,@p25='2012-07-11 23:46:56.457',@p26=907200,@p27=N'Within last quarter',@p28='2012-07-11 23:46:56.457',@p29=907200,@p30='2012-07-11 23:46:56.457',@p31=3628800,@p32=N'Current year',@p33='2012-07-11 23:46:56.457',@p34=3628800,@p35=N'Before current year',@p36=N'',@p37='2012-07-11 23:46:56.460',@p38=60,@p39=1,@p40='2012-07-11 23:46:56.460',@p41=60,@p42='2012-07-11 23:46:56.460',@p43=360,@p44=2,@p45='2012-07-11 23:46:56.460',@p46=360,@p47='2012-07-11 23:46:56.460',@p48=1440,@p49=3,@p50='2012-07-11 23:46:56.460',@p51=1440,@p52='2012-07-11 23:46:56.460',@p53=10080,@p54=4,@p55='2012-07-11 23:46:56.460',@p56=10080,@p57='2012-07-11 23:46:56.460',@p58=302400,@p59=5,@p60='2012-07-11 23:46:56.460',@p61=302400,@p62='2012-07-11 23:46:56.460',@p63=907200,@p64=6,@p65='2012-07-11 23:46:56.460',@p66=907200,@p67='2012-07-11 23:46:56.460',@p68=3628800,@p69=7,@p70='2012-07-11 23:46:56.460',@p71=3628800,@p72=8,@p73=0 
```

现在，如果这是我在 c# 中编写的查询的结果，那么输出到网页所需的时间会大大减少。

在调试 c# 代码时，我尝试了几个选项 - 围绕在 linq 查询的各个点添加 .ToList() 语句。我什至尝试在 EF4 设计器中更改 LazyLoadingEnabled。当我查看 SQL 探查器时，似乎没有什么可以使用正确的计划。我也尝试过 DataLoadOptions - 但它们似乎也没有任何不同，因为看起来这些选项在使用表连接时会更有用。

我究竟做错了什么？如何让 group by 和任何其他聚合发生在数据库服务器上，以便将更少的记录传输到网络服务器？这是由于 Linq 中的延迟加载造成的吗？我该如何纠正？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:25:35.127

如果无法访问您的完整查询，至少我认为您可以对日期和三元运算符进行更清洁和更高效的计算。

通过使用该`let`命令，您应该只在 SQL 中进行一次计算，而不是每次比较。

此外，通过反转从最早时间段到最早时间段搜索时间段的方式，您只需检查它是否更大。您可以将相同类型的思维应用于您的时期类型。

我不能确定这是否会转化为服务器端，但这应该是朝着正确方向迈出的一步：

```
var results = (from u in YOURTABLE
    let totalMinutes = (DateTime.Now - u.Created).TotalMinutes
    orderby u.Created
    select new
    {
       u,
       Period = totalMinutes > 3628800 ? "Before current year" :
                (totalMinutes > 907200 ? "Current year" :
                (totalMinutes > 302400 ? "Within last quarter" :
                (totalMinutes > 10080 ? "Within last month" :
                (totalMinutes > 1440 ? "Within last week" :
                (totalMinutes > 360 ? "Within Last 24 hours" :
                (totalMinutes > 60 ? "Within last 6 hours" :
                "Within last hour"
                ))))))
    }).GroupBy (l =>
    new
    {
    Level = l.u.Level,
    l.Period
    }
    ); 
```

# asp.net - 异常过滤器之外的异常处理？

> ID：11474076
> 
> 赞同：1
> 
> 时间：2012-07-13T15:59:47.687
> 
> 标签：asp.net, asp.net-web-api

使用 Asp.net WebApi (RC)，如何捕获[异常过滤器](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)或`Application_Error()`global.asax 中未捕获的错误？

有了这两个，似乎还有一类例外情况仍未涵盖。例如：`ApiControllerActionSelector_AmbiguousMatch`错误 ( `Multiple actions were found that match the request: {0}`)。

*我并不特别关心上面的错误*，这个错误只是指出有一类错误没有被我的异常过滤器或`Application_Error`方法捕获。

那么我怎样才能覆盖我所有的基础呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:37:53.657

你是对的，有几类异常没有被 Application_Error 或 ExceptionFilter 捕获。Web API 请求管道与 ASP.NET MVC 管道分开处理（至少通过 MVC 4），因此 MVC Application_Error 不会启动。此外，如果您的应用程序抛出`HttpResponseException`类型异常，它们**将不会**被`ExceptionFilter` [设计](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)捕获（参见`ExceptionFilter`段落）。*要访问您的*代码引发的所有异常，您需要按照`DelegatingHandler`此代码的行创建一个：

```
public class ResponseExceptionTrapper : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(
        HttpRequestMessage request,
        CancellationToken cancellationToken)
    {
        return base
            .SendAsync(request, cancellationToken)
            .ContinueWith(response =>
                 {
                     var result = response.Result;
                     if (!result.IsSuccessStatusCode)
                     {
                          var exceptionResult = string.Format(
                               "Response exception: Path({0}) Status({1}) ",
                               request.RequestUri,
                               result.StatusCode);

                          if (result.Content != null)
                          {
                               var exceptionReadTask =
                                      result.Content.ReadAsStringAsync();

                               exceptionReadTask.Wait();
                               exceptionResult += "Message:\n\r" +
                                                 exceptionReadTask.Result;
                           }

                           // Do something appropriate with exceptionResult
                      }

                      return result;
                 }, cancellationToken);
    }
} 
```

您可以在全局配置逻辑中使用此行连接处理程序：

```
GlobalConfiguration.Configuration.MessageHandlers.Add(
     new ResponseExceptionTrapper()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T10:11:55.420

我相信只有在调用操作后才会调用异常过滤器（在这种情况下，它周围有一个 try/catch）。歧义匹配错误会在此之前在管道中弹出，之后可能会弹出其他错误（例如格式化程序错误），正如您所提到的。

我不确定您是否可以有一种解决方案来解决所有方面的问题（因为托管实现可能会有所不同），但您可以尝试覆盖`HttpControllerDispatcher`. 此类是管道中使用的“根”类之一。具体来说，您可以重写`SendAsync`以执行您的 try/catch 并相应地处理。

# windows - 在 Windows 和 Ubuntu Emacs for PHP 中接收 Flymake 错误

> ID：11474077
> 
> 赞同：2
> 
> 时间：2012-07-13T15:59:50.613
> 
> 标签：windows, ubuntu, emacs, flymake, nxhtml

我收到此错误。

```
Error (flymake): Flymake: Failed to launch syntax check process 'php' with args (-f test_flymake.php -l): Searching for program: no such file or directory, php. Flymake will be switched OFF 
```

我在 Windows 7 上使用 emacs 24 GNU Emacs 24.1.1 (i386-mingw-nt6.1.7601) 有一篇文章强调了这个错误，但它指的是在 linux 中检查 /etc 但是我在 Windows 上。[http://sachchua.com](http://sachachua.com/blog/2008/07/emacs-and-php-on-the-fly-syntax-checking-with-flymake/)

这是我的 .emacs 中当前相关的部分，我该怎么做才能让它工作。

```
(add-to-list 'load-path "C:/Users/renshaw family/AppData/Roaming/.emacs.d/elpa/flymake-0.4.11")
(require 'flymake)
(global-set-key [f3] 'flymake-display-err-menu-for-current-line)
(global-set-key [f4] 'flymake-goto-next-error)

;;(require 'flymake-php)

(require 'zencoding-mode)
(add-hook 'sgml-mode-hook 'zencoding-mode) ;; Auto-start on any markup modes

(defun flymake-php-init ()
  "Use php to check the syntax of the current file."
  (let* ((temp (flymake-init-create-temp-buffer-copy 'flymake-create-temp-inplace))
     (local (file-relative-name temp (file-name-directory buffer-file-name))))
    (list "php" (list "-f" local "-l"))))

(add-to-list 'flymake-err-line-patterns 
  '("\\(Parse\\|Fatal\\) error: +\\(.*?\\) in \\(.*?\\) on line \\([0-9]+\\)$" 3 4 nil 2))

(add-to-list 'flymake-allowed-file-name-masks '("\\.php$" flymake-php-init))

;; Drupal-type extensions
(add-to-list 'flymake-allowed-file-name-masks '("\\.module$" flymake-php-init))
(add-to-list 'flymake-allowed-file-name-masks '("\\.install$" flymake-php-init))
(add-to-list 'flymake-allowed-file-name-masks '("\\.inc$" flymake-php-init))
(add-to-list 'flymake-allowed-file-name-masks '("\\.engine$" flymake-php-init))

(add-hook 'php-mode-hook (lambda () (flymake-mode 1)))
(define-key php-mode-map '[M-S-up] 'flymake-goto-prev-error)
(define-key php-mode-map '[M-S-down] 'flymake-goto-next-error) 
```

编辑：

我现在也在 ubuntu 12.04 中尝试过这个并且收到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:33:09.847

看起来 flymake 找不到 PHP 解释器。尝试添加关于在哪里可以找到 PHP 的明确提示。

您可以这样做的一种方法是将以下 defun 添加到您的 .emacs 中：

```
(defun my-flymake-get-php-cmdline  (source base-dir)
  "Gets the command line invocation needed for running a flymake
   session in a PHP buffer. This gets called by flymake itself."
    (list "C:\Path\to\PHP\php.exe"
    ;; Or the path to the PHP CLI executable on the Ubuntu machine you mentioned.
      (list "-f" source  "-l"))) 
```

然后将您现在使用的 flymate-php-init 修改为：

```
(defun flymake-php-init ()
  "Use php to check the syntax of the current file."
  (let* (
    (temp
      (flymake-init-create-temp-buffer-copy 'flymake-create-temp-inplace))
    (local
       (file-relative-name temp (file-name-directory buffer-file-name))))
  (get-cmdline-f 'my-flymake-get-php-cmdline))) 
```

该建议很大程度上基于[其他人在 Windows 上使用 flymake for PHP 的回答](https://stackoverflow.com/a/7432082/244494)。您可能还会发现该答案很有帮助，因为他们的情况与您的情况相似。

# c++ - QPainterPaths 的高效离屏渲染（需要 OpenGL 和非 OpenGL 解决方案）

> ID：11474078
> 
> 赞同：45
> 
> 时间：2012-07-13T15:59:55.870
> 
> 标签：c++, qt, opengl, qpainter

1.  在我的应用程序中，我`QPainter`使用`widget`
    *   由`QPainterPaths`包含要绘制的预先计算的路径制成
    *   当前`widget`是 a `QWidget`，而不是 a `QGLWidget`，但这可能会改变。
2.  我正在尝试将绘画移出屏幕并将其拆分为分块作业
    *   我想将每个块绘制到 a 上`QImage`，最后将所有图像绘制到`widget`
    *   `QPainterPaths`已经分块，所以这不是问题
    *   问题是，绘图`QImages`比绘图**慢 5 倍**`QWidget`
3.  我做过的一些基准测试
    *   时间值是多次运行的四舍五入平均值
    *   测试块包含 100 个`QPainterPaths`，每个块有大约 150 个线性线段
    *   `QPainter::Antialiasing`使用渲染提示绘制大约 15k 条路径，`QPen`使用圆帽和圆连接
4.  请记住，我的来源是`QPainterPaths`（和线宽+颜色；一些***绘制***，一些***填充***）
    *   我不需要所有其他类型的绘图`QPainter`支持
    *   可以`QPainterPaths`转换为可以在 a 上绘制的其他东西`OpenGL buffer`，这将是一个很好的解决方案。
    *   我不熟悉`OpenGL`离屏渲染，我知道有不同类型的 OpenGL 缓冲区，其中大多数不是用于 2D 图像渲染，而是用于顶点数据。

```
Paint Device for chunk | Rendering the chunk itself | Painting chunk on QWidget
-----------------------+----------------------------+--------------------------
QImage                 |                    2000 ms |                   < 10 ms
QPixmap (*)            |                     250 ms |                   < 10 ms
QGLFramebufferObj. (*) |                      50 ms |                   < 10 ms
QPicture               |                      50 ms |                    400 ms
-----------------------+----------------------------+--------------------------
none (directly on a QWidget in paintEvent)          |                    400 ms
----------------------------------------------------+-------------------------- 
```

`(*) These 2 lines have been added afterwards and are solutions to the problem!`

如果您也可以告诉我一个**非基于 OpenGL 的解决方案**，那就太好了，因为我想在两个版本中编译我的应用程序：`OpenGL`和`non-OpenGL`version.
另外，我希望解决方案能够在**非 GUI 线程**中呈现。

* * *

*有没有一种有效地在屏幕外绘制块的好方法？*
*是否有`QGLWidget`（`OpenGL`屏幕外缓冲区）的屏幕外计数器部分可以用作绘画设备`QPainter`？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:31:28.550

Qt-interest Archive的文档[，2008 年 8 月 QGLContext::create()](http://lists.trolltech.com/qt-interest/2008-08/thread00046-0.html)

说：

> QGLContext 只能使用有效的 GL 绘制设备创建，这意味着它需要在创建时绑定到 QGLWidget、QGLPixelBuffer 或 QPixmap。如果您使用 QPixmap，它将为您提供纯软件渲染，而您不希望这样。**QGLFramebufferObject 本身不是有效的 GL 绘制设备，它只能在 QGLWidget 或 QGLPixelBuffer 的上下文中创建**。这意味着您*需要*一个 QGLWidget 或 QGLPixelBuffer 作为 QGLFramebufferObject 的基础。

如文档所示，如果要使用 opengl 在屏幕外缓冲区中进行渲染，则需要 QGLPixelBuffer。下面的代码是一个非常简单的示例，它演示了如何在 OpenGL 中使用 QGLPixelBuffer：

```
#include <QtGui/QApplication>
#include <Windows.h>
#include <gl/GL.h>
#include <gl/GLU.h>
#include <QtOpenGL/QGLFormat>
#include <QtOpenGL/QGLPixelBuffer>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    // Construct an OpenGL pixel buffer.
    QGLPixelBuffer glPixBuf(100, 100); 
    // Make the QGLContext object bound to pixel buffer the current context
    glPixBuf.makeCurrent();
    // The opengl commands 
    glClearColor(1.0, 1.0, 1.0, 0.0);
    glViewport(0, 0, 100, 100);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0, 100, 0, 100);
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1.0, 0.0, 0.0);
    glPointSize(4.0);
    glBegin(GL_TRIANGLES);
    glVertex2i(10, 10);
    glVertex2i(50, 50);
    glVertex2i(25, 75);
    glEnd();
    // At last, the pixel buffer was saved as an image
    QImage &pImage = glPixBuf.toImage();
    pImage.save(QString::fromLocal8Bit("gl.png"));

    return a.exec();
} 
```

该程序的结果是一个 png 图像文件，如下所示：

![在此处输入图像描述](../Images/cccf082f68570cb48cd1d68ebb2fa271.png)

对于使用 QPixmap 的非 opengl 版本，代码可能如下形式：

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QPixmap pixmap(100, 100);
    QPainter painter;
    painter.begin(&pixmap);
    painter.drawText(10, 45, QString::fromLocal8Bit("I love American."));
    painter.end();
    pixmap.save(QString::fromLocal8Bit("pixmap.png"));

    return a.exec();
} 
```

上面程序的结果是一个 png 文件，如下所示：

![在此处输入图像描述](../Images/8cbe9c43359e4d78c05c16ef59ae53ad.png)

虽然代码很简单，但它可以工作，也许您可​​以做一些更改以使其适合您。

# telerik-mvc - 如何更改 Telerik MVC 图表标题的字体大小和颜色？

> ID：11474080
> 
> 赞同：1
> 
> 时间：2012-07-13T16:00:00.480
> 
> 标签：telerik-mvc

可以做到吗？我做了很多研究，找不到任何东西。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:11:52.210

Chart API 中似乎没有任何设置，但是当我检查 Telerik ASP.NET MVC 演示页面时，我发现了标题上使用的文本元素。

使用一些 JavaScript，您可以轻松更改标题字体大小和颜色。

![Telerik Chart 演示的 DOM 视图](../Images/47aa2f1743ae90716a4ec5787c54126a.png)

这是一个 jQuery 示例：

```
$('#chart').find('text:nth(0)').css('font-size', '30px').css('text', 'red') 
```

首先，我将获取带有 id 的图表控件，然后找到作为第一个文本元素的标题。然后我会放置我自己的css样式。

这不是执行此操作的最佳方法，它基本上是一种 hack，但如果没有其他方法无法完成，那么这可能是您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-29T06:47:08.650

**in razor page add this code for the category in chart**

```
.CategoryAxis(axis => axis.Categories(model => model.MonthName)                                                                                         
                          .Labels(labels => labels.Font("tahoma").Color("red").Margin(15))                                                                                                  
                          .Labels(labels => labels.Rotation(-90))                                                                                                  
                          .MajorGridLines(lines => lines.Visible(true)))                                                  
)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-17T21:00:36.250

有一个不同的方法，因为我们遇到了同样的事情，但试图加粗标题...... Kendo MVC Chart API 现在让您可以访问它推送到样式标签中的字体标签。好吧，我们所做的只是关闭该元素并将我们自己的元素添加到样式标签中：

```
.Title(t => t.Text("My Chart Title").Font(";font-weight:bolder;")) 
```

正如您在下面看到的，它呈现样式并反过来加粗标题文本。

[![呈现的 HTML](../Images/009fb1fa42bf4fde3eaa8e7220a7f757.png)](https://i.stack.imgur.com/ozaU6.png)

# iphone - NSFileManager fileExistsAtPath 总是在设备中返回 NO 而不是在模拟器中

> ID：11474081
> 
> 赞同：1
> 
> 时间：2012-07-13T16:00:01.433
> 
> 标签：iphone, objective-c, xcode, ios5

我按照 iOS 上的斯坦福课程 - 核心数据课程编写了一个应用程序。我的应用程序在模拟器上运行良好，但在设备上导致问题，`[NSFileManager defaultManager] fileExistsAtPath:`总是返回 NO，导致应用程序`SAveFORcreating`总是进入，一段时间后它变慢并且不再从核心数据加载数据。这在模拟器中不会发生。所以请大家帮忙！

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (!self.recipiesDatabase) {  
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        self.fileurl = [url URLByAppendingPathComponent:@"RecipiesDatabase"];
        NSLog(@"URL IN FILE %@", url);
        self.recipiesDatabase = [[UIManagedDocument alloc] initWithFileURL:self.fileurl]; // setter will create this for us on disk
    }
}

- (void)useDocument
{

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.recipiesDatabase.fileURL path] ]) {
        // does not exist on disk, so create it
        [self.recipiesDatabase saveToURL:self.recipiesDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            NSLog(@"No existe");
            [self setupFetchedResultsController];
            [self fetchFlickrDataIntoDocument:self.recipiesDatabase];

        }];
    } else if (self.recipiesDatabase.documentState == UIDocumentStateClosed) {
        // exists on disk, but we need to open it
        [self.recipiesDatabase openWithCompletionHandler:^(BOOL success) {
            NSLog(@"OPen");
            [self setupFetchedResultsController];
            //[self fetchFlickrDataIntoDocument:self.recipiesDatabase];

        }];
    } else if (self.recipiesDatabase.documentState == UIDocumentStateNormal) {
        // already open and ready to use
        NSLog(@"Normal");
        [self setupFetchedResultsController];

    }
} 
```

# java - Java Hibernate 注解@JoinTable 关系

> ID：11474082
> 
> 赞同：0
> 
> 时间：2012-07-13T16:00:01.650
> 
> 标签：java, sql, hibernate, join

我最近开始使用 Hibernate，并试图了解所有注释并确保我做事正确。我有两个类似于下面的表'user'和'user_friends'

```
+------+------+-------+
| id   | name | email |
+------+------+-------+ 
```

和用户朋友表

```
+--------+---------+----------+
| userid | buddyid | accepted |
+--------+---------+----------+ 
```

现在在 SQL 中，我运行了一个看起来类似于

```
SELECT u.id AS id, u.name AS username, u.email AS email FROM user_friends 
INNER JOIN users AS u ON u.id = '1' WHERE buddyid = '2' AND ACCEPTED = 1 UNION ALL 
SELECT u.id as id, u.name AS username, u.email AS email FROM user_friends
INNER JOIN users AS u ON u.id = '2' WHERE buddyid = '1' AND ACCEPTED = 1; 
```

我在 Java 设置中有两个类，其方式与此类似

```
@Entity
@Table(name="users")
public class User {

  @Id
  @GeneratedValue
  private int id;

  private int name;
  private int email;

  @OneToMany(fetch=UserBuddy.class, mappedBy="user", fetch=FetchType.LAZY)
  @JoinColumn(name="userid")
  private Set<UserBuddy> _buddies;
}

@Entity
@Table(name="user_friends")
public class UserBuddy {

   @ManyToOne
   @JoinColumn(name="id")
   private User friendId;

   private int id;
   private int name;
   private int email;
} 
```

我不知道我会怎么做，从 user 表中获取 user_friends 名称和电子邮件。任何人都可以提供任何帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:32:06.073

由于您的 UserBuddy 中有 User 对象，因此只需引用它

```
@Entity
@Table(name="user_friends")
public class UserBuddy 
{

   @ManyToOne
   @JoinColumn(name="id")
   private User friend; // This is a User not an id

   public String getEmail()
   {
     return friend.getEmail();
   }
} 
```

# c# - 是否有 Windows 7 文件夹位置控制或需要自定义代码？

> ID：11474091
> 
> 赞同：5
> 
> 时间：2012-07-13T16:00:33.897
> 
> 标签：c#, winforms

所以我正在寻找一种在我的应用程序中实现 Windows 7 文件夹位置控制的方法，有人知道我可以用来执行此操作的控件或一些代码来启动我吗？

例如：

![像这样的东西](../Images/79c18e2c2732d04a3c9a80127a520512.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:16:47.267

似乎 devcomponents 有一个很好的控制，看起来它会完成这项工作，所以要使用它：

[http://www.devcomponents.com/dotnetbar/BreadCrumbHorizo​​ntalTreeControl.aspx](http://www.devcomponents.com/dotnetbar/BreadCrumbHorizontalTreeControl.aspx)

# objective-c - 目标 C 中 sqlite3_bind_text 函数导致 Xcode 崩溃

> ID：11474092
> 
> 赞同：0
> 
> 时间：2012-07-13T16:00:34.753
> 
> 标签：objective-c, xcode, xcode4.3

我正在尝试获取用户在文本视图部分（名为插座`viewNotes`）中输入的文本，并在单击提交按钮后将其放入数据库中。当我运行应用程序时，它工作正常，直到我点击提交，然后我在`sqlite3_bind_text`函数上遇到崩溃（断点）。我无法弄清楚我做错了什么。这是操作代码：

```
- (IBAction)submitNotes:(id)sender {
NSString *docsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *path = [docsDir stringByAppendingPathComponent:@"highpeaks.db"];

sqlite3 *database;
sqlite3_stmt *theNewStmt;
if(sqlite3_open([path UTF8String], &database) == SQLITE_OK)
{
    const char *sql = "UPDATE Peaks SET notes=? WHERE ID=?";
    if(sqlite3_prepare_v2(database, sql, -1, &theNewStmt, NULL) != SQLITE_OK)
        NSLog(@"Error while creating update statement. %s", sqlite3_errmsg(database));
}
NSLog(@"%@",self.viewNotes.text);
sqlite3_bind_text(theNewStmt, 1, [self.viewNotes.text UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_int(theNewStmt, 2, [self.detailItem ID]);

char* errmsg;
sqlite3_exec(database, "COMMIT", NULL, NULL, &errmsg);

if(SQLITE_DONE != sqlite3_step(theNewStmt))
    NSLog(@"Error while updating. %s", sqlite3_errmsg(database));
sqlite3_finalize(theNewStmt);

sqlite3_close(database);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:39:51.443

我不完全确定上面的代码有什么问题，但这段代码工作得很好：

```
sqlite3_stmt *stmt=nil;
sqlite3 *cruddb;

//insert
const char *sql = "UPDATE Peaks SET notes=? where ID=?";

//Open db
NSString *docsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *cruddatabase = [docsDir stringByAppendingPathComponent:@"highpeaks.db"];

sqlite3_open([cruddatabase UTF8String], &cruddb);
sqlite3_prepare_v2(cruddb, sql, -1, &stmt, NULL);
sqlite3_bind_text(stmt, 1, [self.viewNotes.text UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_int(stmt, 2, [self.detailItem ID]);

sqlite3_step(stmt);
sqlite3_finalize(stmt);
sqlite3_close(cruddb); 
```

# mysql - 无法在 Google 地图 v3 中保存航点

> ID：11474099
> 
> 赞同：0
> 
> 时间：2012-07-13T16:01:09.357
> 
> 标签：mysql, google-maps-api-3

我下载了这个项目：

[http://vikku.info/programming/google-maps-v3/draggable-directions/saving-draggable-directions-saving-waypoints-google-directions-google-maps-v3.htm](http://vikku.info/programming/google-maps-v3/draggable-directions/saving-draggable-directions-saving-waypoints-google-directions-google-maps-v3.htm)

为了了解如何保存航点，我打开了 html，并尝试保存航点，但它不起作用，我不知道我是否需要在 SQL 中做某事，我只是尝试让它工作，拜托如果您成功使其正常工作，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:16:45.447

你必须：

1.  创建一个名为**mapdir的数据库**
2.  在这个数据库中创建一个名为**mapdir**的表，该表应该只有 1 个名为**value**的字段，类型为**text**（ZIP 文件中有一个文件 mapdir.sql，您可以使用它来创建表）
3.  在 process.php 中，您必须编辑第 5 行并设置正确的值`mysql_connect(servername,username,password)`

您还应该将 process.php,Line#3 更改为

```
@$data = $_REQUEST['mapdata']; 
```

....否则您以后将无法在打开时加载航点`error_reporting`。

但是，我不建议像现在这样使用这个项目，没有任何针对 SQL 注入的保护。

# c# - 在excel中扩展列的代码

> ID：11474100
> 
> 赞同：2
> 
> 时间：2012-07-13T16:01:15.853
> 
> 标签：c#, asp.net, excel, export

当我将数据导出到 excel 中时，它会加载列但不会扩展列。它显示数据而无需双击该行来展开列。我可以编写一些代码来自动调整列，以便单元格可以显示整个数据吗？我正在使用 asp.net 和 c#。

第一张照片是它目前的样子，第二张显示了我想要的样子。

![它看起来像什么](../Images/2ba66846e2f7c073da8373f2fcdd8491.png)

![我希望它看起来像什么](../Images/5b1ebc218f260679f9e2b9230555bf76.png)

```
protected void Button1_Click(object sender, EventArgs e)
{
    Response.Clear();
    Response.Buffer = true;

    DataSet dataSet = new DataSet();

    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ISALog1ConnectionString"].ToString());
    SqlCommand cmd = new SqlCommand("exec ProxyReport", conn);
    cmd.CommandTimeout = 200;
    SqlDataAdapter ad = new SqlDataAdapter(cmd);
    ad.Fill(dataSet);

    GridView1.DataSource = dataSet.Tables[0];
    GridView1.DataBind();
    GridView2.DataSource = dataSet.Tables[1];
    GridView2.DataBind();
    GridView3.DataSource = dataSet.Tables[2];
    GridView3.DataBind();

    dataSet.Tables[0].TableName = "1";
    dataSet.Tables[1].TableName = "2";
    dataSet.Tables[2].TableName = "3";

    int count = 3;

    ExcelPackage pack = new ExcelPackage();

    for (int i = 1; i <= count; i++)
    {
        DataTable table = dataSet.Tables[i.ToString()];
        ExcelWorksheet ws = pack.Workbook.Worksheets.Add("Top" + i);
        ws.Cells["A1"].LoadFromDataTable(table, true);
    }  

            Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
            Response.AddHeader("content-disposition", "attachment;  filename=ExcelExport.xlsx");
            Response.BinaryWrite(pack.GetAsByteArray());
            Response.Flush();
            Response.End();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:13:36.933

```
Excel.Range range;

range = ws.get_Range("A1", "1");
range.AutoFit(); 
```

[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.autofit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:11:52.863

Looks like the BestFit property is what you want, though it might be buggy:

[http://excelpackage.codeplex.com/discussions/248406/](http://excelpackage.codeplex.com/discussions/248406/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T13:18:15.270

我一直在寻找解决同一问题的方法。上面检查的答案对我没有直接作用。

它通过一个简单的添加工作：

```
Excel.Range range;

range = ws.get_Range("A1", "1");
range.Columns. AutoFit(); 
```

# python - 运行使用 PyInstaller 制作的应用程序时遇到问题，导入 GTK - 搜索不存在的目录

> ID：11474102
> 
> 赞同：0
> 
> 时间：2012-07-13T16:01:28.983
> 
> 标签：python, gtk, pygtk, pyinstaller

我正在尝试创建一个使用 PyGTK 制作 GUI 的 Python 应用程序的可执行文件。我有一个使用 Pyinstaller 的完善的自动化构建过程，它对我以前的应用程序有用。只需说它使用 32 位 Python 2.7 调用通常的 Makespec.py 和 Build.py，并为 32 位配置 Pyinstaller。生成的 32 位应用程序在我的机器和另一台运行 Windows 7 64 位的机器上运行良好，但在 32 位 Windows XP 上失败并出现以下错误：

```
C:\OutNav_0_64\OutNav_0.64>outnav
Traceback (most recent call last):
  File "<string>", line 23, in <module>
  File "C:\Pyinstaller-1.5\iu.py", line 436, in importHook
  File "C:\Pyinstaller-1.5\iu.py", line 521, in doimport
  File "C:\Users\462974\Documents\Local Sandbox\tools\utilities\Oni\build\pyi.win32\OutNav\outPYZ1.pyz/gtk", line 40, in
 <module>
  File "C:\Pyinstaller-1.5\iu.py", line 477, in importHook
  File "C:\Pyinstaller-1.5\iu.py", line 495, in doimport
  File "C:\Pyinstaller-1.5\iu.py", line 297, in getmod
  File "C:\Pyinstaller-1.5\archive.py", line 468, in getmod
  File "C:\Pyinstaller-1.5\iu.py", line 109, in getmod
ImportError: DLL load failed: The specified procedure could not be found. 
```

奇怪的是，我的机器上没有 C:\Pyinstaller-1.5 目录或遇到错误的那个。我不知道它为什么试图从这个不存在的目录运行代码，或者丢失的 DLL 是什么。谁能帮我将 PyGTK 折叠到我的应用程序中？

注意：跟踪的第一行，我的程序中的第 23 行，是

```
import gtk 
```

更新：我的经理在 64 位 Windows XP 上成功运行了它。更新 2：他弄错了，它是 64 位 Windows 7。在他的 Windows XP 安装上也有同样的问题。

此外，在它失败的原始机器上，从可执行文件的目录中，我这样做了：

```
>>> import imp
>>> fp = open('gtk._gtk.pyd', 'rb')
>>> mod = imp.load_module('gtk._gtk', fp, 'gtk._gtk.pyd', ('.pyd', 'rb', 3))

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: DLL load failed: A dynamic link library (DLL) initialization routine failed. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:37:01.263

据我所知，Windows 7 上 pyinstaller 生成的 .pyd 文件（格式为 .DLL 文件）与 Windows XP 不兼容。我的解决方案是简单地在 Windows XP 机器上重新创建我的构建过程，这让我很满意。

# ruby-on-rails - 使用 fields_for 时抑制 Rails 验证消息中的子记录名称

> ID：11474104
> 
> 赞同：0
> 
> 时间：2012-07-13T16:01:38.577
> 
> 标签：ruby-on-rails, validation, model, nested, form-for

我有两个模型，定价和定价细节。定价 has_many 定价_详细信息。我有一个使用 form_for 的表单，因此我可以在同一个表单中创建定价对象和详细信息，并在一次保存调用中保存所有内容。

所有代码都按预期运行，问题是，当我在 price_details 模型上遗漏一个已验证字段时，验证消息如下所示：

“定价明细成本年度价格不能为空”

我的验证是：

```
def validate_cost
  field_name = PriceType.find(self.price_type_id).name
  if self.cost.blank?
    self.errors.add :cost, field_name + " cannot be blank"
  end
end 
```

我想要的只是：“年价格不能为空”

我可以用来抑制子模型和字段名称的语言环境是否有一些技巧？我尝试添加到 base 中，如下所示：

```
self.errors.add :base, field_name + " cannot be blank" 
```

但后来我得到“定价细节基础年度价格不能为空白”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:57:10.783

您可以使用语言环境更改嵌套字段的名称。看到这个答案[https://stackoverflow.com/a/11129637/18038](https://stackoverflow.com/a/11129637/18038)

# objective-c - 更改未选中的 UITabBarItems 的文本颜色

> ID：11474105
> 
> 赞同：0
> 
> 时间：2012-07-13T16:01:39.980
> 
> 标签：objective-c, ios, uistoryboard, uitabbaritem

这是我尝试过的：

我在**父视图控制器**中尝试了以下内容：

```
[self.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                               [UIColor whiteColor], UITextAttributeTextColor,
                                               nil] forState:UIControlStateNormal]; 
```

我在**应用程序委托**中尝试了以下内容：

```
[[UITabBarItem appearance] 
 setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                         [UIColor whiteColor], UITextAttributeTextColor,
                         nil]
 forState:UIControlStateNormal]; 
```

我什至尝试更改`UIControlStateNormal`为任何其他可用的常量。唯一改变任何东西的是`UIControlStateHighlighted`改变突出显示选项卡的颜色。这是 API 中的错误还是我遗漏了什么？

需要注意的关键事项：

*   我正在使用故事板
*   我有一个`UITabBarController`每个选项卡都有一个嵌入的地方`UINavigationController`（非常标准的设置）
*   我已经尝试将第一个代码片段嵌入到子类`UINavigationController`以及. 那里也没有运气。`UIViewController``UINavigationController`

# symfony - symfony2 中带有模板注释的最后修改标题

> ID：11474106
> 
> 赞同：3
> 
> 时间：2012-07-13T16:01:43.327
> 
> 标签：symfony

有没有办法在继续使用模板注释的同时修改响应头？对最后修改的标头特别感兴趣。我知道我可以做`$this->render`并获得一个响应对象，但我真的很喜欢注释的想法，并希望尽可能多地使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:43:22.407

我似乎记得有一个正在进行的拉取请求来促进这种行为，但不幸的是我找不到它。

如果您不介意自己做，您可以使用[@Cache](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/cache.html)注释使用的相同方法，并创建一个侦听器以在生成响应后设置适当的标头（请参阅[此处](https://github.com/sensio/SensioFrameworkExtraBundle/blob/master/EventListener/CacheListener.php)），但是这种解耦可能会使其变得困难生成准确的（即与实体相关的）最后修改日期。

# silverlight - 从哪里获取 StackedSplineArea 和 StepAreaSeries 的项目样式？

> ID：11474107
> 
> 赞同：0
> 
> 时间：2012-07-13T16:01:47.933
> 
> 标签：silverlight, charts, telerik

我正在创建一个带有 Teleriks silverlight 控件的应用程序。
我在图表着色方面遇到了问题。它为图表添加了一些不透明度和渐变。
可以通过从 SeriesDefinition 更改项目样式来修复它。
对于条形图，我通过谷歌搜索找到了模板并根据需要进行了更改，但我找不到 StackedSplineArea 和 StepAreaSeries 的模板。
我在哪里可以找到这个模板？
我尝试使用混合，但它没有提供任何模板。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:34:41.480

我找到了解决方案。
要禁用颜色不透明度，您需要将`PaletteBrushesUseSolidColors`属性设置`RadChart`为`true`。就我而言，这已经足够了，不需要模板。

# javascript - JQuery 选择器：如何选择网页上第二个表单的提交按钮？

> ID：11474108
> 
> 赞同：1
> 
> 时间：2012-07-13T16:01:48.420
> 
> 标签：javascript, jquery, jquery-ui, jquery-selectors

如何在网页上选择第二个表单的提交按钮？

我是否能够通过在所选提交元素上使用 .click() 函数来提交所述表单？

这是我目前尝试这样做的脚本：

```
function Ellipsis_Mouse_Click()
{
     $("form:eq(1):submit:eq(0)").trigger('click');
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T16:03:19.790

选择第二种形式：

```
$('form').eq(1);
// Or
$('form:eq(1)'); 
```

[`.eq()`](http://api.jquery.com/eq/)从基于零的索引开始工作，因此使用`.eq(1)`而不是`.eq(2)`.

这不是选择表单的特别好的方法，因为它容易受到任何 DOM 更改（无论是手动进行还是使用更多 JS）的影响。考虑将类或 ID 添加到表单，或相对于具有类或 ID 的容器选择它。

提交表格：

```
$('form').eq(1).submit(); 
```

您不需要找到提交按钮并触发`click`它。相反，您可以只调用`.submit()`表单本身。

# java - 用另一个字段类型重载 Java 数据字段类型

> ID：11474109
> 
> 赞同：7
> 
> 时间：2012-07-13T16:01:55.830
> 
> 标签：java

是否可以将字段类型重载为另一种字段类型？

如果是这样，是否可以提供一些例子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T16:05:14.847

您不能*重载*字段（只能重载方法），您可能会对*覆盖*字段感到困惑——这无论如何都是不可能的，您最终会从超类中隐藏字段。看看这个[帖子](https://stackoverflow.com/questions/685300/is-there-a-way-to-override-class-variables-in-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:38:47.990

看看这段代码

```
class A<T> {
    protected T field1;
}

class B extends A<String> {
    public char field1;

    public static void main(String[] args) {
        A a = new B();
        a.field1 = 12442;
    }
} 
```

它运行时没有任何异常，如果 field1 被覆盖，它应该引发异常，但它不会

而且这也毫无例外地运行

```
class A<T> {
    protected T field1;
}

class B extends A<Character> {
    public char field1;

    public static void main(String[] args) {
        A a = new B();
        a.field1 = 12442;
    }
} 
```

不可能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:07:04.320

我相信java支持接口，接口应该能够帮助你实现你想要实现的东西

[这是我快速找到的一个例子](http://www.codemiles.com/java-examples/java-interface-example-t3505.html)

[这是一个教程](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)

只要确保您没有以这种方式超载公共成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-11T09:35:47.457

**Java 语言 (JLS) 不允许，但 Java 字节码 (JVMS) 允许**

Oracle JDK 1.8.0_45 甚至依赖它来实现`assert`。例如：

```
public class Assert {
    static final int[] $assertionsDisabled = new int[0];
    public static void main(String[] args) {
        System.out.println(int.length);
        assert System.currentTimeMillis() == 0L;
    }
} 
```

生成两个`Oracle JDK 1.8.0_45`，一个显式 ( `int[]`) 和一个合成 ( `bool`)，并且很高兴能够区分它们。但是如果我们声明：

```
static final boolean $assertionsDisabled = false; 
```

它将无法编译：

```
the symbol $assertionsDisabled conflicts with a compile synthesized symbo 
```

有关更多详细信息，请参阅[https://stackoverflow.com/a/31355548/895245](https://stackoverflow.com/a/31355548/895245)。

**不可能的可能原因**

问题是无法确定字段的类型。考虑：

```
void f(int i) { System.out.println("int"); }
void f(float i) { System.out.println("float"); }
int i;
float i;
// Which overridden method is called?
void m() { f(i); } 
```

# android - 我无法将按钮置于布局底部

> ID：11474110
> 
> 赞同：0
> 
> 时间：2012-07-13T16:02:02.437
> 
> 标签：android, xml

我正在尝试将按钮置于布局的底部，但它不起作用......该按钮正在将其自身显示在应该位于其上方的图像上。

这是xml代码：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:layout_gravity="center"
     >
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
         >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="28dp"
            android:layout_marginTop="32dp" />

        <TextView
            android:id="@+id/txtAppName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/imageView1"
            android:layout_marginLeft="22dp"
            android:layout_toRightOf="@+id/imageView1"
            android:text=""
            android:textSize="36px"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txtAppAuthor"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/txtAppName"
            android:layout_below="@+id/txtAppName"
            android:layout_marginTop="5px"
            android:text=""
            android:textSize="24px"
            android:textStyle="normal" />

        <TextView
            android:id="@+id/txtAppDesc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/imageView1"
            android:layout_below="@+id/imageView1"
            android:layout_marginTop="20dp"
            android:maxHeight="350px"
            android:text=""
            android:width="600px"
            android:maxLines="10"
            android:scrollbars = "vertical"
             /> 

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/txtAppDesc"
            android:layout_below="@+id/txtAppDesc"
            android:layout_marginTop="30dp" />

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/imageView2"
            android:layout_toRightOf="@+id/imageView2" />

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/imageView3"
            android:layout_toRightOf="@+id/imageView3"
            android:visibility="visible" />

        <Button
            android:id="@+id/btnInstall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_alignBottom="@+id/imageview4"
            android:text="Download &amp; Install" />

    </RelativeLayout>
</ScrollView> 
```

结果是：

![在此处输入图像描述](../Images/dd6ca12e34e9b6b1c95e9ca5788058c9.png)

预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:07:19.117

你用过`android:layout_alignBottom="@+id/imageview4"`

这意味着您将按钮的底部与图像的底部对齐。

你必须使用`android:layout_below="@+id/imageview4"`

编辑：我并不是说这是最好的解决方案，因为有多种布局（用于优化......），但这应该有效：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/ScrollView01"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:fillViewport="true"
            android:layout_gravity="center"
        >
    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:orientation="vertical">

        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:gravity="center"
                >

            <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true"
                    android:layout_marginLeft="28dp"
                    android:layout_marginTop="32dp"/>

            <TextView
                    android:id="@+id/txtAppName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignTop="@+id/imageView1"
                    android:layout_marginLeft="22dp"
                    android:layout_toRightOf="@+id/imageView1"
                    android:text=""
                    android:textSize="36px"
                    android:textStyle="bold"/>

            <TextView
                    android:id="@+id/txtAppAuthor"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/txtAppName"
                    android:layout_below="@+id/txtAppName"
                    android:layout_marginTop="5px"
                    android:text=""
                    android:textSize="24px"
                    android:textStyle="normal"/>

            <TextView
                    android:id="@+id/txtAppDesc"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/imageView1"
                    android:layout_below="@+id/imageView1"
                    android:layout_marginTop="20dp"
                    android:maxHeight="350px"
                    android:text=""
                    android:width="600px"
                    android:maxLines="10"
                    android:scrollbars="vertical"
                    />

            <ImageView
                    android:id="@+id/imageView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/txtAppDesc"
                    android:layout_below="@+id/txtAppDesc"
                    android:layout_marginTop="30dp"/>

            <ImageView
                    android:id="@+id/imageView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignTop="@+id/imageView2"
                    android:layout_toRightOf="@+id/imageView2"/>

            <ImageView
                    android:id="@+id/imageView4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignTop="@+id/imageView3"
                    android:layout_toRightOf="@+id/imageView3"
                    android:visibility="visible"/>

        </RelativeLayout>

        <Button
                android:id="@+id/btnInstall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:text="Download &amp; Install"/>
    </LinearLayout>
</ScrollView> 
```

我添加了一个线性布局，其中放置了内容和按钮。希望这会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:17:58.463

您是否只想缩小按钮结束的图像以便为其腾出空间？如果是这样，您需要将包含该图像的 Imageview 作为相对布局中的最后一项。它将为除图像之外的所有内容分配空间，然后将剩余空间分配给图像，这就是为什么它需要放在最后。

另外，我建议给您的 imageViews 提供比“imageView#”更多信息的名称，因为很难分辨哪个是哪个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:31:34.440

您可能希望将图像包装在 Horizo​​ntalScrollView 中以保持所有图像的完整高度和宽度。我更改了很多 ViewGroups 的宽度和高度以适应 Horizo​​ntalScrollView，最后我在图像下方设置了 Button：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:fillViewport="true" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="28dp"
            android:layout_marginTop="32dp" />

        <TextView
            android:id="@+id/txtAppName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/imageView1"
            android:layout_marginLeft="22dp"
            android:layout_toRightOf="@+id/imageView1"
            android:text=""
            android:textSize="36px"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txtAppAuthor"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/txtAppName"
            android:layout_below="@+id/txtAppName"
            android:layout_marginTop="5px"
            android:text=""
            android:textSize="24px"
            android:textStyle="normal" />

        <TextView
            android:id="@+id/txtAppDesc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/imageView1"
            android:layout_below="@+id/imageView1"
            android:layout_marginTop="20dp"
            android:maxHeight="350px"
            android:maxLines="10"
            android:scrollbars="vertical"
            android:text=""
            android:width="600px" />

        <HorizontalScrollView
            android:id="@+id/images"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txtAppDesc"
            android:layout_marginTop="30dp" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <ImageView
                    android:id="@+id/imageView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <ImageView
                    android:id="@+id/imageView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <ImageView
                    android:id="@+id/imageView4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            </LinearLayout>
        </HorizontalScrollView>

        <Button
            android:id="@+id/btnInstall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/images"
            android:layout_centerHorizontal="true"
            android:text="Download &amp; Install" />
    </RelativeLayout>

</ScrollView> 
```

了解将 Horizo​​ntalScrollView 嵌套在 ScrollView 内（反之亦然）不会**同时**在 x 和 y 方向上产生平滑的滚动效果。但是您可以创建此效果，如下所述：[Scrollview vertical and Horizo​​ntal in android](https://stackoverflow.com/q/2044775/1267661)。

# .net - Visual Studio 想以一种奇怪的方式重新定位我的项目

> ID：11474116
> 
> 赞同：1
> 
> 时间：2012-07-13T16:02:10.127
> 
> 标签：.net, visual-studio-2010, visual-studio-2012

我已经安装了 VS11beta 并随后将其卸载。现在，我的旧 VS2010 安装没有按预期工作。

![](../Images/bc22ab0b617e92fa8036fe1987f247a5.png)

我不明白为什么它说我应该从 4.0 版重新定位到 4 版。

构建输出中会弹出类似的消息：

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(847,9)：警告 MSB3644：**未找到框架“.NETFramework,Version=v4.0”的参考程序集。**要解决此问题，请为此框架版本安装 SDK 或 Targeting Pack，或者将您的应用程序重新定位到已安装 SDK 或 Targeting Pack 的框架版本。请注意，程序集将从全局程序集缓存 (GAC) 中解析，并将用于代替引用程序集。因此，您的程序集可能无法正确定位于您想要的框架。

我已经修复了 Windows SDK 7.1 的安装，其中包括 .NET 框架 4.0。它似乎没有帮助。

当我也执行构建时，Visual Studio 2010 现在会崩溃。

对此是否有一些解释，以及更好的方法来修复我的 VS2010 而无需完全卸载并重新安装它？

当然希望我有在 VM 中安装测试版的常识！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:15:13.460

.NET 4.5 是 4.0 的就地更新。尽管卸载了 Visual Studio，但您计算机上的 .NET 的“4”或“4.0”版本可能会有所不同。如果您的 2010 项目是在 VS 2012 之前为“4”创建的，则该版本的“4”不再可用 - 解释该消息。如果您想避免重定向，您可以尝试卸载并重新安装 .NET 4。

# c# - XNA Space Simulator 中的奇怪问题四元数旋转

> ID：11474121
> 
> 赞同：0
> 
> 时间：2012-07-13T16:02:28.000
> 
> 标签：c#, matrix, xna, quaternions

我花了 8 个小时试图找到解决方案。

所以这是我的问题。我的船在旋转，就像它在绕着什么东西旋转，比如一根绳子。当我离起始位置越来越远时，我开始旋转得越来越奇怪。就像我附着在一根绳子上一样。

这是旋转和运动的代码。

```
public void MoveShip(List<InputAction> InputActionList, GameTime gameTime)
    {
        float second = (float)gameTime.ElapsedGameTime.TotalSeconds;
        float currentTurningSpeed = second * TurningSpeed;
        float leftRightRotation = 0; 
        float upDownRotation = 0;
        float linearLeftRightRotation = 0;
        foreach(InputAction action in InputActionList)
        {
            switch(action)
            {
                case InputAction.Left:
                    leftRightRotation -= currentTurningSpeed;
                    break;
                case InputAction.Right:
                    leftRightRotation += currentTurningSpeed;
                    break;
                case InputAction.Up:
                    upDownRotation += currentTurningSpeed;
                    break;
                case InputAction.Down:
                    upDownRotation -= currentTurningSpeed;
                    break;
                case InputAction.IncreaseSpeed:
                    if (ShipSpeed < MaxShipSpeed)
                        ShipSpeed += Acceleration;
                    break;
                case InputAction.DecreaseSpeed:
                    if (ShipSpeed > MinShipSpeed)
                        ShipSpeed -= Acceleration;
                    break;
                case InputAction.LinearLeft:
                    linearLeftRightRotation += currentTurningSpeed;
                    break;
                case InputAction.LinearRight:
                    linearLeftRightRotation -= currentTurningSpeed;
                    break;
                case InputAction.Fire1:
                    WeaponSystem2D.RequestFire(ShipPosition, ShipRotation);
                    break;
            }

        }

        Quaternion currentRotation = Quaternion.CreateFromAxisAngle(new Vector3(0, 0, 1), leftRightRotation) * 
            Quaternion.CreateFromAxisAngle(new Vector3(1, 0, 0), upDownRotation) *
            Quaternion.CreateFromAxisAngle(new Vector3(0, 1, 0), linearLeftRightRotation);

        currentRotation.Normalize();
        ShipRotation *= currentRotation;

        ShipPosition *= Vector3.Transform(new Vector3(0, 0, 1), ShipRotation) * (ShipSpeed * second);

        ShipWorld = Matrix.CreateFromQuaternion(ShipRotation) * Matrix.CreateTranslation(ShipPosition);

    } 
```

问题是什么？为什么要这样做？我希望船在一**角钱**上旋转，因为它是空间。

编辑：-模型不是问题。

编辑2：没关系，旋转实际上是在工作，是我的天空盒坏了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:39:02.033

这段代码实际上是完美的，我的天空盒让它看起来像是坏了。

# sql-server - 创建 DTS 包以将 Access 数据库复制到 SQL 2000

> ID：11474122
> 
> 赞同：1
> 
> 时间：2012-07-13T16:02:30.913
> 
> 标签：sql-server, ms-access, dts

我需要创建一个 DTS 包，将数据从 Access 文件复制到 SQL Server 2000 数据库。

访问数据库位置：

> \Fileserver1\HR\Employees.mdb

访问表：

*   员工信息
*   MGRSPVSR
*   班次信息

SQL Server 2000 数据库位置：

> 生产

此 DTS 作业需要每小时运行一次。

Human Resourses 使用一个旧程序将数据存储到此 Access 数据库中，并且需要该作业以使数据在 SQL 服务器上可用。

目前，我们有一个旧的 DTS 作业将一 (1) 个表复制到：`EmployeeInfo`.

在这里工作的人现在没有人编写（或创建）该作业，也没有人知道如何编辑它以包含其他表......或编写另一个 DTS 作业以包含其他表。

我的一位同事对 SQL 有足够的了解，可以告诉我*图片*（下图）实际上定义了当前的 DTS 作业；然而，他不知道如何去创建一个新的或编辑我们现在拥有的。

![现有 DTS 包截图](../Images/f8ac820241d2852178357558466f4757.png)

现有作业所做的是从 SQL Server 中删除表，然后将表从 Access 文件`EmployeeInfo`复制到我们的 SQL Server 数据库中。`EmployeeInfo`

似乎没有任何错误检查。如果 Access 数据库文件神秘地消失了，SQL Server 上的表将被删除并且永远不会重新填充（如果我没看错的话）。

我想要一个作业，首先检查所有三 (3) 个表中的 Access 数据是否可用，**然后**从 SQL Server 中删除相应的表，并将 Access 数据插入其中。

谁能给我一些帮助？

# iphone - iPhone 3G 网络 SOAP 请求速度

> ID：11474126
> 
> 赞同：1
> 
> 时间：2012-07-13T16:02:43.863
> 
> 标签：iphone, xcode, soap, httprequest

有人可以帮我吗？

我为 iPhone 开发了一个应用程序，它需要与我的 Web 服务进行通信（我使用 SOAP 进行通信，使用 TOMCAT 作为 Web 服务器）。当我在我的 iPhone4 上使用 WiFi 连接运行该应用程序时，它完全没有问题。我从网络服务器得到了非常快的响应。

但是，当我使用我的 3G 网络（澳大利亚的沃达丰）时，我意识到响应时间不在可接受的范围内。有人可以告诉我应该做些什么来提高性能吗？

![Charles Proxy 调试工具图片](../Images/0933c7be90e85e218a32effcc138484c.png)

*在我的 iPhone 应用程序中，我尝试过：`NSURLConnection synchronous, asynchronous and ASIHTTPFormRequest.`但在性能方面，它们是相同的！:(

*让我很困惑的是，当我做 YouTube 时，它​​在我的 3G 网络上运行得非常快，没有延迟。*

非常感谢你们的时间。对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:05:57.617

除非您可以提供更少的数据，否则您无法控制运营商的 3G 网络速度。即使您使用较少的数据，建立连接也可能需要一段时间。

# sql - 如何仅选择具有活动状态的行

> ID：11474127
> 
> 赞同：0
> 
> 时间：2012-07-13T16:02:45.900
> 
> 标签：sql, oracle, oracle11g

我有这个 oracle 表：

```
CREATE TABLE USERS(
        USERID INTEGER NOT NULL,
        GROUPID INTEGER,
        SPECIALNUMBER VARCHAR2(60 ),
        USERNAME VARCHAR2(50 ),
        PASSWD VARCHAR2(50 ),
        DATETOCHANGEPASSWD DATE,
        ADDRESS VARCHAR2(60 ),
        STATEREGION VARCHAR2(50 ),
        COUNTRY VARCHAR2(50 ),
        USERSTATUS VARCHAR2(30 ),
        TELEPHONE VARCHAR2(50 ),
        DATEUSERADDED DATE,
        USEREXPIREDATE DATE,
        DATEUSERLOCKED CHAR(20 ),
        CITY VARCHAR2(50 ),
        EMAIL VARCHAR2(50 ),
        DESCRIPTION CLOB
        ) 
```

我使用这个 SQL 查询来获取行：

```
SqlStatementSmall = "SELECT c.*"
            + " FROM (SELECT b.*, rownum rn"
            + " FROM (SELECT a.*"
            + " FROM USERS a"
            + " ORDER BY %s %s) b"
            + " WHERE rownum <= ?) c"
            + " WHERE rn > ?"; 
```

如何修改 SQL 查询以仅选择状态为“活动”的行？

最好的祝愿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:09:37.660

```
SqlStatementSmall = "SELECT c.*"
            + " FROM (SELECT b.*, rownum rn"
            + " FROM (SELECT a.*"
            + " FROM USERS a"
            + " ORDER BY %s %s) b"
            + " WHERE rownum <= ?) c"
            + " WHERE rn > ? AND USERSTATUS = 'ACTIVE'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:45:42.730

这实际上取决于您希望在哪里应用过滤器。我猜你在开始限制 rownum 之前想要它（我想你正在做分页）。在这种情况下，您想要：

```
SqlStatementSmall = "SELECT c.*"
            + " FROM (SELECT b.*, rownum rn"
            + " FROM (SELECT a.*"
            + " FROM USERS a"
            + " WHERE UPPER(USERSTATUS) = 'ACTIVE'"
            + " ORDER BY %s %s) b"
            + " WHERE rownum <= ?) c"
            + " WHERE rn > ?"; 
```

我把 UPPER() 函数放在那里，因为你问忽略大小写。

# matlab - matlab在matlab图中选择区域

> ID：11474132
> 
> 赞同：0
> 
> 时间：2012-07-13T16:03:18.307
> 
> 标签：matlab, plot, mouse, regions

我在 Matlab 中处理绘图时遇到问题。以下是我的情节问题：

*   使用鼠标绘制数据后如何选择区域？
*   选择区域后如何从该区域获取数据？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T21:57:10.343

使用 rbbox 功能用鼠标选择区域非常容易。

首先，将 ButtonDownFcn 添加到要绘制 rbbox 的轴上。

```
hax = axes( ... , 'ButtonDownFcn', @OnClickAxes); 
```

然后你像这样在回调中调用 rbbox

```
function OnClickAxes( hax, evt )

point1 = get(hax,'CurrentPoint'); % hax is handle to axes
rbbox;
point2 = get(hax,'CurrentPoint'); % hax is handle to axes

end 
```

这里 point1 和 point2 将定义鼠标在数据坐标中绘制的矩形的两个角。在 matlab 提示符下键入**doc rbbox以获取更多信息**

现在回答你关于二维图的第二个问题。

这段代码将为轴内的所有线提取并返回选定区域内的数据。

[https://gist.github.com/3107790](https://gist.github.com/3107790)

# xml - 用xml字符串中的值替换占位符的最佳方法

> ID：11474134
> 
> 赞同：1
> 
> 时间：2012-07-13T16:03:19.733
> 
> 标签：xml, vb.net, c#-4.0

我有具有占位符及其值的替换 xml。我有 XML 字符串，我需要在其中搜索占位符并将其替换为值。

例如，

**占位符 XML**：

```
<PlaceHolders>
  <PlaceHolder placeholder="PD1" value="value1" />
</PlaceHolders> 
```

**XML**

```
<customers>
  <customer avatarURL="PD1"/>
</customers> 
```

用值“value1”替换“PD1”的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:46:14.863

这是使用 XPath 的一种方法。这将用正确的值替换单个占位符。您需要循环并为每个占位符执行一次。这将替换 XML 中任何元素的任何属性中的占位符：

```
Dim doc As New XmlDocument()
doc.LoadXml("...")
For Each node As XmlNode In doc.SelectNodes("//@*[.='PD1']")
    node.InnerText = "value1"
Next 
```

但是，如果您还需要在元素的文本值中替换它（例如`<customer>PD1</customer>`），那么您需要更改 XPath 以查找属性或元素文本值：

```
Dim doc As New XmlDocument()
doc.LoadXml("...")
For Each node As XmlNode In doc.SelectNodes("//@*[.='PD1'] | //*[text()='PD1']")
    node.InnerText = "value1"
Next 
```

# python - 雅虎！商户结账 API 问题

> ID：11474137
> 
> 赞同：1
> 
> 时间：2012-07-13T16:03:43.413
> 
> 标签：python, xml, yahoo, yahoo-api

我正在尝试与 Yahoo! 的 Checkout API 集成，用于基于 Django 的网络应用程序中的现有商家帐户。我已经成功地集成了他们的 Catalog API，但由于某种原因，我根本无法让 Checkout API 工作。我根据他们文档中的示例制作了一个 XML 请求，但它总是简单地返回一个 10009 Auth Required 错误。我已确认我的合作伙伴帐户确实具有正确的授权，但我无法弄清楚为什么会出现此错误。我不相信这是一个格式错误的请求，因为当我复制并粘贴他们的示例请求（显然更改 API 令牌等）时，我得到了完全相同的结果。

这就是我的请求的样子（商店 ID 和令牌已清理）：

```
<ystorews:ystorewsRequest xmlns:ystorews="urn:yahoo:sbs:ystorews">
  <Version>1.0</Version>
  <StoreID>{storeid}</StoreID>
  <SecurityHeader>
        <PartnerStoreContractToken>{token}</PartnerStoreContractToken>
  </SecurityHeader>
  <Verb>create</Verb>
  <ResourceList>
    <CheckoutBasket>
      <ShoppingCart>
        <Item>
          <ID>foo</ID>
          <Quantity>5</Quantity>
        </Item>
      </ShoppingCart>
    </CheckoutBasket>
  </ResourceList>
</ystorews:ystorewsRequest> 
```

这是我得到的回应：

```
<?xml version="1.0" encoding="utf-8"?>
<ystorewsResponse>
<ErrorMessages>
<Error>
<Code> 10009 </Code>
<Message> Auth Required </Message>
</Error>
</ErrorMessages>
</ystorewsResponse> 
```

这就是我的合作伙伴 API 访问的样子： ![雅虎！ 合作伙伴 API 访问](../Images/f5db187f2e57efdc519f385a851f4bca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:25:41.627

原来雅虎内部存在问题！这阻止了它的工作。在我联系了他们的小型企业支持团队后，他们能够解决问题，我的代码突然开始工作。

万一其他人遇到类似问题，我发现了解他们的最佳方式是通过他们的 Twitter 帐户：[@YSmallBizCare](http://twitter.com/YSmallBizCare)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:24:21.830

在这里疯狂猜测，但值得一试。

您声明了一个 XML 名称空间，但根本不使用它。我怀疑你想要：

```
<ystorewsRequest xmlns="urn:yahoo:sbs:ystorews">
  <Version>1.0</Version>
  <StoreID>{storeid}</StoreID>
  <SecurityHeader>
        <PartnerStoreContractToken>{token}</PartnerStoreContractToken>
  </SecurityHeader>
  <Verb>create</Verb>
  <ResourceList>
    <CheckoutBasket>
      <ShoppingCart>
        <Item>
          <ID>foo</ID>
          <Quantity>5</Quantity>
        </Item>
      </ShoppingCart>
    </CheckoutBasket>
  </ResourceList>
</ystorewsRequest> 
```

请注意根元素中缺少 ystorews 命名空间。

# javascript - jquery - 如何向此 jquery 代码库添加警报消息？

> ID：11474138
> 
> 赞同：1
> 
> 时间：2012-07-13T16:04:00.257
> 
> 标签：javascript, jquery, alert

## **问题**

为了帮助避免最终用户混淆，我想添加一条警报消息，如果/当用户单击任何其他键 ["alert('Only Numerical data allowed')"] 时会弹出该消息。因此，如果他们按“k”，则会弹出上述消息。任何人都可以看到如何在此代码库中设置此代码

*   **jsfiddle**：http: [//jsfiddle.net/EN8pT/4/](http://jsfiddle.net/EN8pT/4/)

* * *

## **编码**

**jQuery**：

```
$('input.numberinput').bind('keypress', function (e) {
    var w = e.which;
    return (w != 8 && w != 0 && (w < 48 || w > 57) && w != 46) ? false : true;
}); 
```

​</p>

**html**

```
<div class="containercontent">

         <div class="label">Enter a number:</div>
        <input type="text" name="txtNumber1" id="txtNumber1" value=""  class="numberinput" />

         <div class="label">Enter a number:</div>
        <input type="text" name="txtNumber2" id="txtNumber2" value="" class="numberinput" />
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:07:41.857

简单的 ：

```
$(document).ready(function () {
$('input.numberinput').bind('keypress', function (e) {

    if((e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57) && e.which != 46) )
    {
       alert('Only Numbers');
        return false;
    }
    else{
      return true;
    }
});
}); 
```

链接：http: [//jsfiddle.net/justmelat/EN8pT/](http://jsfiddle.net/justmelat/EN8pT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:05:59.980

你好：）我也可以帮你解决这个问题：

```
$(document).ready(function () {
    $('input.numberinput').bind('keypress', function (e) {
        var allow = (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57) && e.which != 46) ? false : true;
        if (!allow) {
            alert('Only Numerical data allowed');
        }
        return allow;
    });
});? 
```

**JSFiddle**：http: [//jsfiddle.net/EN8pT/3/](http://jsfiddle.net/EN8pT/3/)

享受和好运！

# backbone.js - 如何在主干中指定 url 和 header 以在我的模型上使用 crud 方法？

> ID：11474139
> 
> 赞同：11
> 
> 时间：2012-07-13T16:04:00.850
> 
> 标签：backbone.js

我需要在需要特定 api 密钥的服务器上发出请求，我需要使用 crud 方法更新我的模型，并尽快...

例如，我在 ajax 中有这个代码来从服务器获取元素：

```
 function getapi() {

$.ajax({
    url: 'https://api.parse.com/1/classes/autolavaggi/QSfl*****',
    type: 'GET',
    dataType: 'json',

    success: function(obj) { 

        alert("nome autolavaggio "+obj.nome);

    },
    error: function() {
        alert('Errore');

    },
    beforeSend: setHeader
});
}  

    //GET GET  GET  GET  GET GET  GET  GET  Header Header Header Header
    function setHeader(xhr) {
xhr.setRequestHeader('X-Parse-Application-Id', 'aqLJlmE2rRXBOy***************');
xhr.setRequestHeader('X-Parse-REST-API-Key', 'gvT2Isd5vAvjgq*****************');
} 
```

我该怎么做才能将此特定的 ajax 调用分配给 crud 方法 save、fetch 或其他方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-14T02:18:00.357

每个 crud 方法都接受一个选项散列，该散列将被转发到 ajax 调用。在集合获取的情况下：

```
var Model = Backbone.Model.extend({});
var Collection = Backbone.Collection.extend({
  model: Model,
  url: 'https://api.parse.com/1/classes/autolavaggi/QSfl*****'
});

var setHeader = function (xhr) {
  xhr.setRequestHeader('X-Parse-Application-Id', 'aqLJlmE2rRXBOy***************');
  xhr.setRequestHeader('X-Parse-REST-API-Key', 'gvT2Isd5vAvjgq*****************');
}

var collection = new Collection();
collection.fetch({ beforeSend: setHeader }); 
```

或者，覆盖同步：

```
var sync = Backbone.sync;
Backbone.sync = function(method, model, options) {
  options.beforeSend = function (xhr) {
    xhr.setRequestHeader('X-Parse-Application-Id', 'aqLJlmE2rRXBOy***************');
    xhr.setRequestHeader('X-Parse-REST-API-Key', 'gvT2Isd5vAvjgq*****************');
  };

  // Update other options here.

  sync(method, model, options);
}; 
```

# c++ - 为什么我的内存占用越来越大？

> ID：11474142
> 
> 赞同：0
> 
> 时间：2012-07-13T16:04:13.197
> 
> 标签：c++, ios, memory-leaks, openframeworks

以下示例使用了 openFrameworks 工具包，但我想我的错误不是 openFrameworks 特定的，所以我希望有人能提供帮助。

我使用 ofxThreadedImageLoader 来动态加载图像。我使用另一个线程来卸载/删除。我已将我的问题浓缩为一小段代码。在这个例子中我不需要删除线程，但在我的真实程序中确实需要它，所以这就是它在这里的原因。（另外，如果我在主循环而不是线程中删除，我不会遇到问题。使用线程就像图像被复制到某处并且只有一个副本被删除。）

```
void testApp::setup(){  
alreadyLoaded = false;
tmpImage = new ofImage();

loader.loadFromDisk(tmpImage, "images/test.png");
loader.startThread(true, false);
imageDeleter.start();

}

void testApp::update(){
bool alreadyLoaded = tmpImage->isUsingTexture();

if(alreadyLoaded) {
    ofTexture& tex = tmpImage->getTextureReference();
    alreadyLoaded = tex.bAllocated();
}

if(alreadyLoaded) { 
    imageDeleter.addImageToDelete(tmpImage);

    tmpImage = new ofImage();
    int nImages = DIR.listDir("images/");

    loader.loadFromDisk(tmpImage, DIR.getPath((int) ofRandom(nImages)));
}
} 
```

更新是程序的主循环。这是线程删除：

```
class threadedDelete : public ofxThread{

public:
deque<ofImage *> images_to_delete;

//--------------------------
threadedDelete() {

}

threadedDelete(ofImage*  _imageToDelete){
    lock();
    images_to_delete.push_back(_imageToDelete);
    unlock();
}

void addImageToDelete(ofImage*  _imageToDelete) {
    lock();
    images_to_delete.push_back(_imageToDelete);
    unlock();
}

void start(){
    startThread(true, false);   // blocking, verbose
}

void stop(){
    stopThread();
}

//--------------------------
void threadedFunction(){
    while(isThreadRunning()){
        if (images_to_delete.size() > 0) {
            lock();

            ofImage  * imageToDelete(images_to_delete.front());
            ofLog(OF_LOG_NOTICE, "deleting " + ofToString(imageToDelete)); 
            images_to_delete.pop_front();
            delete imageToDelete;

            unlock();
        }
        else {
            ofSleepMillis(50);
        }
    }
}

}; 
```

所以基本上我只是加载一个随机图像，当它加载时，我删除它并加载另一个。即使每个新的 ofImage 都被删除，我的内存占用量也会增加，直到我收到内存警告 (iOS) 并且我的应用程序崩溃。我想念什么？正如我所说，我知道代码使用的是 openFrameworks 类，但我想我的错误非常基本，所以有人可能会根据这个片段看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:21:09.620

这就是创建[valgrind](http://valgrind.org/)的原因。确保使用调试符号（`-g`例如 g++）编译应用程序并运行：

```
valgrind --leak-check=full ./your_program --args --to --your program 
```

# jquery - JQuery Ajax 查询在 3 次执行后停止工作

> ID：11474144
> 
> 赞同：2
> 
> 时间：2012-07-13T16:04:15.380
> 
> 标签：jquery, ajax

我尝试搜索类似的问题，但没有一个与我所处的困境相匹配......所以，首先，如果我的搜索不成功，很抱歉。

项目背景：我正在用Joomla建一个旅游指南网站！+ SEBLOD + Youtheme Warp。度假村的注册用户/所有者可以将他们的业务添加到列表中，但他们需要广告位置。由于有许多州，后来有许多海滩要链接到，所以想法是按地区过滤位置（5 个地区，来自 Region 类别的 SEBLOD/Joomla 文章 > 州（来自 State 类别的 SEBLOD/Joomla 文章，通过SEBLOD 相关文章字段到地区）> 海滩（SEBLOD/Joomla 内容类型，通过 SEBLOD 相关文章字段链接到州和地区），从而减少了选择中的列表选项。

我的问题是：选择是从有效的 JQuery/Ajax 函数填充的，但是在 3 次执行之后，它停止工作。

我在 Firefox 上使用 Firebug（因为它在“离线”时工作。在 localhost 上运行）和 WebDeveloper 扩展。

我收到以下 JS 错误：错误 1 ​​- 来自 webdeveloper（似乎与 Yootheme Warp 有关）：

```
Timestamp: 13/07/2012 12:55:45
Error: TypeError: $.onMediaQuery is not a function
Source File: http://localhost/viapraia2/templates/yoo_master/js/template.js
Line: 37 
```

错误 2 - 来自萤火虫（（似乎与 Yootheme Warp 有关，但不确定是否与上述相同）

```
TypeError: $.onMediaQuery is not a function 
invalid: function() { 
```

我认为这些错误与我的问题无关，尽管 Yootheme Warp 警告正在加载多个 JQuery 库。我检查了文件，扩展名似乎是单独封装自己的，所以它们不应该冲突，但我不能确定。由于脚本工作了几次，我认为它们与问题无关......

这就是我认为相关的JS：

```
/**
    * Check if RESORT select object exists and has value
    **/
    var resort = $j('#vp_related_resort');
    var resortValue = (resort.length <0) ? 0 : resort.val();
    var resortCatId = (isEmpty($j('#vp_resort_catid'))) ? 0 : $j('#vp_resort_catid').val();

    var arrKeys = ['region', 'state', 'related_beach','resort'];
    var varArr = [region, state, beach, resort];

    mySelects={
        'region':{'select':region,'value':regionValue,'catid':regionCatId},
        'state':{'select':state,'value':stateValue,'catid':stateCatId},
        'related_beach':{'select':beach,'value':beachValue,'catid':beachCatId},
        'resort':{'select':resort,'value':resortValue,'catid':resortCatId}
        };

    /**
    * Set AJAX request to retrieve STATES according to the REGION selected
    * Change the STATES select content according to the result
    **/   
    function _ajax(ajaxUrl,value,item,obj){
        var nUrl = (item.match(/beach/)) ? '&item=beach' : '&item=' + item;

        nUrl = ajaxUrl + nUrl;

        $j.ajax ({
            url: nUrl,
            contentType: "application/json;charset=UTF-8",
            success: function(data){
                if(data.length) {
                    $j.each(data,function(c,d){
                        var o = new Option();
                        var newTitle = d.title;
                        $j(o).html(newTitle).val(d.id);
                        obj.append(o);                       
                        //obj.val(value);
                    });
                }            
            },
            beforeSend: function(){
                obj.children("option:not(:first)").remove();
                obj.hide();
            },
            complete:function(){
                nUrl = ajaxUrl = '';
                obj.show();
            },
            dataType: 'json', 
        });

    }
    /**
    * Execute _ajax function when region SELECT changes
    **/
    region.change(function(){
        var aUrl = theUrl;
        if($j(this).val() > 0){
            var w = arrKeys.indexOf('region');
            var kArr = arrKeys;
            kArr.splice(w,1);
            var vArr = varArr;
            vArr.splice(w,1);
            aUrl = aUrl + 'region&regionSelectId=' + $j(this).val() + '&regionCatId=' + mySelects.region.catid + '&catid=';
            for(var i=0; i < kArr.length; i++){
                var v = 0;
                if(vArr[i].length > 0) {
                    v = aUrl + mySelects[kArr[i]].catid;
                    _ajax(v, mySelects[kArr[i]].catid,kArr[i],vArr[i]);
               }
            }
        }
    }); 
```

可以通过在[此处](http://adoroisso.com.br/viapraia2)以 user/testuser 身份登录，然后加载[此表单](http://adoroisso.com.br/viapraia2/index.php/pt/pousadas/incluir-pousada) 进行测试选择出来。我不知道从哪里开始寻找错误。

感谢您的时间！！

**[更新] - [已解决]** 在昨天花了几个小时（并且失眠！！）和今天，我终于找到了问题所在。这绝对是对 splice 和 indexOf 方法的滥用。我替换了 region.change 函数来循环键和对象数组，并且仅当循环项与选择对象本身的处理值不同时才执行 ajax 调用。

如果有人关心，这是更新版本：

```
/**
* Execute _ajax function when region SELECT changes
**/
region.change(function(){
    var aUrl = theUrl;
    var k = $j(this).attr('id').replace('vp_','');
    if($j(this).val() != 0){
        aUrl = aUrl + 'region&regionSelectId=' + $j(this).val() + '&regionCatId=' + mySelects.region.catid + '&catid=';
        for(var i=0; i < kArr.length; i++){
            var v = '';
            if(kArr[i] != k) {
                v = aUrl + mySelects[kArr[i]].catid;
                _ajax(v, mySelects[kArr[i]].catid,kArr[i],vArr[i]);
           }
        }
    }
}); 
```

# php - 如何验证是否是授权用户发送请求？

> ID：11474145
> 
> 赞同：0
> 
> 时间：2012-07-13T16:04:19.050
> 
> 标签：php, validation, authentication

我陷入了这种情况，我需要验证是否是正确的用户将请求/信息发送到服务器。例如，用户提交删除好友请求，在 URL 中作为参数我包含好友的 id（另一个成员 id）；我还应该包括要求朋友删除请求 ID 的成员吗？

我只是想验证或确保发送请求的是正确的用户。一般来说，最好的方法是什么？如果用户已登录，我们可以仅通过登录成员的 ID 进行验证吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:10:49.933

Without knowing how your authentication works, it's a little difficult to say.

When I've had to do this in the past, I've used a combination of server-side authentication to identify the user sending the request, and URL parameters to specify what they want to delete. A user needs to be logged in to send a Delete request, and I'm tracking their userID with a $_SESSION variable. So when I get a Delete request, the SQL looks vaguely like:

```
DELETE FROM 
    friends 
WHERE 
    userID=$_SESSION["id"] AND friendID=$_POST["friend"] 
```

As halfer explains in the comments, this is a generally bad way of doing things, as it opens an SQL injection vulnerability in the code. You can consider a couple of ways of avoiding that.

Firstly, you can sanitize the data - if you know that your friendID is always going to be an integer, you can check for that. A regular expression to check for non-numeric characters will work - if there's anything dodgy in there, you can deal with it appropriately and not pass it to the database.

The second approach is the one I prefer - when you make your query, you can use a prepared statement, and bind the parameters to it. Using PDO, you'll end up with something that looks like:

```
$sth = $dbh->prepare('DELETE FROM friends WHERE userID=? AND friendID=?');
$sth->bindParam(1, $_SESSION["id"]);
$sth->bindParam(2, $_POST["friend"]);
$sth->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:11:47.997

Try to require more secure UUID identifiers (generated and stored by you) for such requests, they are still not completely secure but considerably better than simple ids

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:08:42.460

使用[会话变量](http://php.net/manual/en/features.sessions.php)来存储登录的用户 ID。一旦建立了会话并且您的身份验证方案插入了`logged in`您所有设置的标志。`logged in`当您需要执行任何用户请求时，只需检查标志。

# c++ - 用另一个字符串中的单个字符初始化字符串的最优雅方法

> ID：11474147
> 
> 赞同：1
> 
> 时间：2012-07-13T16:04:29.877
> 
> 标签：c++, string, char

有没有更优雅的方法用第一个字符串中的单个字符初始化第二个字符串？例如。不求助于字符串 ( size_t n, char c ) 构造函数？

```
string first = "foobar";
string second(string(1, first[0])); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T16:06:59.667

您提到的构造函数*是*从一个字符创建字符串的方法，因此不会有明显更优雅的方法。但是，无需创建和复制/移动临时文件：

```
string second(1, first[0]); 
```

或者，您可以从以下子字符串构造`first`：

```
string second(first, 0, 1); 
```

在 C++11 中，您可以使用初始化列表：

```
string second {first[0]}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T16:06:10.323

关于什么：

```
string ( );
string ( const string& str );
string ( const string& str, size_t pos, size_t n = npos );
string ( const char * s, size_t n );
string ( const char * s );
string ( size_t n, char c ); //<<--- this 
```

IE

```
string second(1, first[0]); 
```

请注意，以上是您唯一的初始化选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:07:10.120

我建议你：

```
string first = "foobar";
string second;
second = first[0]; 
```

# coldfusion - ColdFusion 9：嵌套隐式结构问题

> ID：11474149
> 
> 赞同：1
> 
> 时间：2012-07-13T16:04:33.477
> 
> 标签：coldfusion

当我尝试在嵌套的隐式结构中使用带引号的键值时，我遇到了一个奇怪的问题。

```
<cfset outer = {
    inner = {
        standard = "works",
        "quoted" = "does not work"
    }
} />
<cfdump var=#outer.inner["quoted"]# /> 
```

这会产生错误：`Element quoted is undefined in a CFML structure referenced as part of an expression.`

转储整个`outer`结构也没有任何价值。

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:08:31.603

你的代码对我有用。您在使用 ColdFusion 9.0.1 吗？我相信在 9.0.1 中有一些与嵌套结构/数组相关的错误修复。如果还没有，请尝试安装更新程序。

# php - 如何抑制foreach（）警告php

> ID：11474150
> 
> 赞同：0
> 
> 时间：2012-07-13T16:04:36.847
> 
> 标签：php, wordpress, loops, for-loop, foreach

我需要帮助来抑制我从`foreach()`

```
Warning: Invalid argument supplied for foreach() in 
/sitename/pages/admin/questions/index.php 
```

我得到了我想要的结果。我只需要删除警告...

这是我的代码：

```
for($i = 1; $i <= $RESULTS_count; $i++){

$rawResult = $wpdb->get_row(
                $wpdb->prepare("SELECT * FROM ".WPSQT_TABLE_RESULTS." WHERE id = $i"),ARRAY_A);

$rawResult['sections'] = unserialize($rawResult['sections']);

     foreach($rawResult['sections'] as $result_sections){
         if($result_sections['answers'][1]['mark'] == 'correct') $correct_answer++;
    }
}
echo $correct_answer/$RESULTS_count; 
```

如果我将代码从 FOR 循环中取出并替换`WHERE id = $i`为`WHERE id = 1`它将起作用......问题可能是 FOREACH 不喜欢处于 FOR 循环中吗？

你觉得我应该怎么做？

编辑：我认为我收到的警告是由于我删除了 ID 为 2 的结果，因此当循环遍历表行时，其中一个为空，这就是我收到警告的方式...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:07:09.550

您应该首先确保数据是一个数组或将其类型转换为一个数组。

是数组：

```
 if (is_array($rawResult['sections'])) {
        foreach ($rawResult['sections'] as $result_sections) {
            if ($result_sections['answers'][1]['mark'] == 'correct')
                $correct_answer++;
        }
    } 
```

类型转换：

```
 foreach ( (array) $rawResult['sections'] as $result_sections) {
        if ($result_sections['answers'][1]['mark'] == 'correct')
            $correct_answer++;
    } 
```

# sql-server - 按顺序插入更快

> ID：11474151
> 
> 赞同：4
> 
> 时间：2012-07-13T16:04:40.950
> 
> 标签：sql-server, optimization, insert

我有以下查询：

```
 INSERT INTO table(field, field1)
 SELECT value, value1  FROM table2 e 
 ORDER BY value 
```

这比这个花费更少的时间：

```
 INSERT INTO table(field, field1)
 SELECT value, value1  FROM table2 e 
```

有谁知道为什么？

第二个的执行计划显示sql无论如何都会执行“order by”操作，但性能不如我的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:18:20.690

Insert performance depends on how many indexes you have and on what columns. If there is a clustered index on `table.field` inserting unsorted values is quite expensive (values not sorted by `field`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:49:26.797

Do you have any nonclustered index on the value column in the table table2? Do you have clustered index on table on value clause? I could see two possible reason for this.

1.There is some kind of nonclustered index on column value so that optimizer picks this index and avoids sorts (it could be a covering index as well, in this case it will be very fast). The reason why the query without any order by did not pick that index is because it is a simple query and no optimization happened and it did a clustered index or table scan and then sorted the data and it caused the performance degraded as compared to order by. This is the most likely reaosn.

1.  The other reason could be that while inserting the data it inserts the data as it get and then if the data is ordered and same clustered index on order by column. There are no page splits and things will be fine.But if there is no sort then values will be inserted randomly an dcould cause page splits which slightly degrades performance. However, OP has mentioned that optimizer has done a sort before inserting that means this scenario is not applicable here.

# html - CSS：由于某种原因，单元格边框未圆角

> ID：11474157
> 
> 赞同：0
> 
> 时间：2012-07-13T16:05:03.993
> 
> 标签：html, css, rounded-corners

我想制作一个漂亮的导航栏，但由于某种原因，我无法将栏末端的单元格边框弄圆。如果您仔细观察角落，您应该能够看到背景发生了一些圆角，但由于某种原因，边框没有。

你可以在这里看到我的意思：http: [//jsfiddle.net/7veZQ/299/](http://jsfiddle.net/7veZQ/299/)

这是我的代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<style type="text/css">
table {
    border-collapse: collapse;
    border: none;
    box-shadow: 0px 5px 10px #BBB;
}
.nav tr td {
    width: 160px;
    height: 40px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    text-transform: uppercase;
    color: #666;
    border: 1px solid #999;
    vertical-align: middle;
    text-align: center;
    background: #eeeeee; /* Old browsers */
    background: -moz-linear-gradient(top, #eeeeee 0%, #cccccc 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#cccccc)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #eeeeee 0%,#cccccc 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #eeeeee 0%,#cccccc 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #eeeeee 0%,#cccccc 100%); /* IE10+ */
    background: linear-gradient(to bottom, #eeeeee 0%,#cccccc 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#cccccc',GradientType=0 ); /* IE6-9 */
    text-shadow: 1px 1px 0px #FFFFFF;
    letter-spacing: 3px;
}
.nav tr td:hover {
    background: #F4F4F4; /* Old browsers */
    background: -moz-linear-gradient(top, #F4F4F4 0%, #E0E0E0 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F4F4F4), color-stop(100%,#E0E0E0)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #F4F4F4 0%,#E0E0E0 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #F4F4F4 0%,#E0E0E0 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #F4F4F4 0%,#E0E0E0 100%); /* IE10+ */
    background: linear-gradient(to bottom, #F4F4F4 0%,#E0E0E0 100%); /* W3C */
}
.nav tr td#first {
    border-radius: 5px 0px 0px 5px; 
    -moz-border-radius: 5px 0px 0px 5px; 
    -webkit-border-radius: 5px 0px 0px 5px;
}

.nav tr td#last {
    color: #09C;
    border-radius: 0px 5px 5px 0px; 
    -moz-border-radius: 0px 5px 5px 0px; 
    -webkit-border-radius: 0px 5px 5px 0px;
}
</style>
</head>
<body>
<table class="nav" width="960" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td id="first">Home</td>
    <td>Options</td>
    <td>Prices</td>
    <td>Showcase</td>
    <td>Help</td>
    <td id="last">Order Now!</td>
  </tr>
</table>

</body>
</html> 
```

那么我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:09:40.810

> 那么我做错了什么？

使用表格进行布局。

[表格不是布局工具](http://www.hotdesign.com/seybold/)。一些浏览器不会在表格单元格上圆角。你有一个数据列表，[使用 list markup](http://css.maxdesign.com.au/listamatic/%5D)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:20:34.463

将您的表格 css 更改为

```
border-collapse: separate; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:25:28.460

看这个：

[http://jsfiddle.net/7veZQ/313/](http://jsfiddle.net/7veZQ/313/)

该表被转换为`div`+ `ul`。

查看`line-height`（此处用于将文本垂直居中）。

另外，我更改了`first`and `last`to be `classes`（而不是`id's`），因为它们是非常常见的名称，并且`id's`在文档中应该是唯一的。

最后，看看`borders`。我们没有`border-collapse`列表，因此该`last`项目与其他项目略有不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T16:24:28.460

不幸的是，这不是跨浏览器 CSS。并非在所有浏览器中都找到 CSS3。话虽如此，我建议进行一些更改。首先，你不应该对任何东西使用精确的高度和宽度。

其次，您应该使用 DIV。 [不错的论坛帖子，为什么...](http://www.sitepoint.com/forums/showthread.php?721289-Why-Switch-from-Table-to-CSS-layout)

无论如何，这是“修复”（我个人反对浮动任何东西，但是哦，好吧。有时会发生这种情况：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<style type="text/css">
.nav {
    float:left;
    width:960px;
    height:40px;
    border: 1px solid #999;
    border-radius: 5px; 
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
    box-shadow: 0px 5px 10px #BBB;
}
.nav a {
    float:left;
    display:inline-block;
    margin:0;
    padding:0;
    line-height:40px;
    text-decoration:none;
    width: 160px;
    height: 40px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    text-transform: uppercase;
    color: #666;
    text-align: center;
    background: #eeeeee; /* Old browsers */
    background: -moz-linear-gradient(top, #eeeeee 0%, #cccccc 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#cccccc)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #eeeeee 0%,#cccccc 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #eeeeee 0%,#cccccc 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #eeeeee 0%,#cccccc 100%); /* IE10+ */
    background: linear-gradient(to bottom, #eeeeee 0%,#cccccc 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#cccccc',GradientType=0 ); /* IE6-9 */
    text-shadow: 1px 1px 0px #FFFFFF;
    letter-spacing: 3px;
}
.nav a:hover {
    background: #F4F4F4; /* Old browsers */
    background: -moz-linear-gradient(top, #F4F4F4 0%, #E0E0E0 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F4F4F4), color-stop(100%,#E0E0E0)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #F4F4F4 0%,#E0E0E0 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #F4F4F4 0%,#E0E0E0 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #F4F4F4 0%,#E0E0E0 100%); /* IE10+ */
    background: linear-gradient(to bottom, #F4F4F4 0%,#E0E0E0 100%); /* W3C */
}
.nav a#first {
    border-radius: 5px 0px 0px 5px; 
    -moz-border-radius: 5px 0px 0px 5px; 
    -webkit-border-radius: 5px 0px 0px 5px;
}

.nav a#last {
    color: #09C;
    border-radius: 0px 5px 5px 0px; 
    -moz-border-radius: 0px 5px 5px 0px; 
    -webkit-border-radius: 0px 5px 5px 0px;
}
</style>
</head>
<body>

<div id="main-menu" class="nav">
    <a href="#" id="first">Home</a>
    <a href="#">Options</a>
    <a href="#">Prices</a>
    <a href="#">Showcase</a>
    <a href="#">Help</a>
    <a href="#" id="last">Order Now!</a>
</div>

</body>
</html> 
```

这应该是它工作所需要的一切......如果您在使用 CSS 布局时遇到问题，请查看 YUI3 Grids。我是 YUI 3 的粉丝，所以是的，这是一个可耻的插件。

[YUI 库](http://yuilibrary.com)

# java-me - 如何访问 Netbeans 的资源编辑器文件

> ID：11474163
> 
> 赞同：1
> 
> 时间：2012-07-13T16:05:45.607
> 
> 标签：java-me, lwuit, lwjgl

如何访问Netbeans的资源编辑器文件？/如何在Netbeans中导入和打开资源编辑器文件？详细说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:30:47.560

好的，要从代码中打开 .res 文件，您需要使用以下行：

```
try{
    Resources.open("/myResFile.res");
catch(IOException ioe){
    //manage the exception
} 
```

.res 文件的路径会有所不同，在我的示例中就像在 src 文件夹中一样。

# c++ - emacs C/C++ 缩进：前后评论不同 // 或者：我怎样才能使某些评论像 //^ 被额外缩进？

> ID：11474164
> 
> 赞同：1
> 
> 时间：2012-07-13T16:05:48.577
> 
> 标签：c++, c, emacs

最简单的：

最初的问题归结为：

许多（如果不是大多数）emacs c 缩进样式自己在一行上进行注释，例如

```
// ... 
```

缩进以匹配周围的代码。

我想让看起来像 //+ 或 //- 的注释比周围的代码缩进一个或多个缩进设置。

我通常认为相同缩进级别的注释适用于下一行代码，而额外缩进级别的注释适用于前面的代码行。但这只是风格。

简短的：

是否有（合理的标准）emacs 设置来获得 C/C++ 注释的不同缩进，这取决于注释是否与下一行相关联（在这种情况下，我希望它为语法适当缩进）或注释是否与上一行（在这种情况下，我希望它缩进一个额外的级别）？

例如

```
int
foo() 
{
     // this comment is for the variable bazz below
     int bazz;
         //- this comment is for the variable bazz,on the line above.
         //- I want it indented an extra level, which I will do by hand here.

     // this comment is for the next variable, biff
     int biff;

     int example; /* comment
               * on multiple lines
               * but this can be too much indented
               */

     int example_of_a_really_long_name_that_can_produce_excessive_indentation; /* comment
                                            * on multiple lines
                                            * but this can be too much indented
                                            */

} 
```

以//和//-开头的评论几乎是我想要的。// 与周围的代码一起缩进。这就是emacs给我的。

我希望 //- 缩进一个额外的缩进级别。或者 //+，或者其他，如果有约定的话。听起来像是一个正则表达式的工作。

我提供了我知道如何处理 // 和 / 的示例*。/*注释分散在多行中，但可以过度缩进。

细节：

我现在正在安装 emacs 24.1 - 或者至少我希望我正在安装它，工作中的系统有非常老旧的发行版。但是，如果某些东西适用于较旧的 emacs，例如 21.4.1，我会更高兴 - 避免必须在许多不同系统上安装 emacs 的麻烦。

=================================

顺便说一句，我已经知道 c-indent-comment-syntactically 和 cc-mode.el 的大部分内容。

特别是，c-indent-comment-syntactically 给了我：

```
int
foo()
{
  // this comment is for the variable bazz below
  int bazz;
  //- this comment is for the variable bazz,on the line above.
  //- I want it indented an extra level, which I will do by hand here.

  // this comment is for the next variable, biff
  int biff;

  int example; /* comment
            * on multiple lines
            * but this can be too much indented
            */

  int example_of_a_really_long_name_that_can_produce_excessive_indentation; /* comment
                                             * on multiple lines
                                             * but this can be too much indented
                                             */

  if( foo )
    // comment
    bar();

  if( foo ) {
    // comment
    bar();
  }

} 
```

这不是我想要的。我希望 //- 注释行缩进一个额外的缩进级别。

哎呀，为什么不喜欢elisp：

/// <-- 从第 0 列开始

// 语法缩进（与下一行代码有关）

或者可能是 //^（^ 表示“以上”。

//- 或 //^ - 缩进一个额外的缩进级别（与前一行代码有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:32:43.720

嗯，你试过[设置这个](http://www.gnu.org/software/emacs/manual/html_node/ccmode/Comment-Commands.html#Comment-Commands)吗？

> ### — 用户选项：c-indent-comments-syntactically-p
> 
> 通常，当这个样式变量为 nil 时，M-；将根据 c-indent-comment-alist 缩进仅注释行，就像其他代码在注释之前的行一样。但是，如果您希望它像只用于注释的行一样，您可以通过将 c-indent-comments-syntactically-p 设置为非零来实现。
> 
> 如果 c-indent-comments-syntactically-p 不为零，则根本不会咨询 c-indent-comment-alist 以获取仅注释行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T13:10:04.160

因此，如果我了解您想要什么，您只需要能够基于某个标记添加一层额外的缩进。这完全可以通过使用您自己的阵容功能来实现，您可以在**“CC 模式”手册**中找到更多信息- 具体请查看以下部分：

**(ccmode) 阵容功能**

这是自定义阵容功能，它检查注释是否以您的特殊序列开头（我使用//+），如果是这样，它会添加一个额外的级别（返回加号）。否则，我们忽略它并将其视为注释通常是缩进的（返回 nil）。正如您可能想象的那样，使用阵容功能，我们可以随心所欲地变得棘手 - 例如多个令牌或嵌套级别。

```
(defun brian-comment-offset (langelem)
  (save-excursion
    (back-to-indentation)
    (cond 
      ((re-search-forward (regexp-quote "//+") (point-at-eol) t)
       '+)
      (t
       nil)))) 
```

要使用它，您需要设置偏移别名变量**comment-intro**来运行该函数。我通过创建自己的 c 样式来做到这一点，如下所示。我建议你复制你当前的风格，只修改/添加**评论介绍**列表。

```
(c-add-style 
 "briancpp" '((c-basic-offset . 2)
        (c-comment-only-line-offset . 0)
        (c-offsets-alist
         (comment-intro . brian-comment-offset)  ; Here's our workhorse
         (defun-open . 0)
         (defun-close . 0)
         (statement-block-intro . +)
         (substatement-open . 0)
         (substatement-label . 0)
         (label . 0)
         (statement-cont . +)
         (inline-open . 0)
         (inline-close . 0)
         (innamespace . 0))))

(add-hook 'c++-mode-hook (lambda () 
               (c-set-style "briancpp"))) 
```

下面是它在行动中的样子：

![CC 模式额外缩进截图](../Images/b0aa4745798ac795416ebc36396fca3f.png)

# php - 从函数返回“错误”的最佳实践

> ID：11474168
> 
> 赞同：21
> 
> 时间：2012-07-13T16:06:03.367
> 
> 标签：php, function

我有一个功能：

```
public function CustomerRating() {
     $result = $db->query("...");
     $row = $result->fetch_assoc();

     if($row)
          $output = $row['somefield'];
     } else {
          $output = "error";
     }

     return $output;
}

//somewhere on another page...
if(is_numeric($class->CustomerRating()) {
     echo $class->CustomerRating;
} else {
      echo "There is an error with this rating.";
} 
```

有没有更好的方法来查找错误？在这个函数中，如果没有返回任何行，它本身并不意味着“错误”，它只是意味着无法计算该值。当我检查函数的结果时，我觉得有一种更好的方法来检查返回的数据，然后再将其显示在 if 函数中。最好的方法是什么？我想返回一个“false”，但是在调用函数时我该如何检查呢？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T16:10:31.777

There are (in my opinion) 2 common ways:

1.  **Returning** `false`
    Many builtin PHP functions do that

2.  **Using [SPL exceptions](http://php.net/manual/en/spl.exceptions.php)**
    Evolved PHP frameworks (Symfony2, ZF2, ...) do that

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T16:09:05.237

你需要[例外](http://php.net/manual/en/language.exceptions.php)：

```
public function CustomerRating() {
     $result = $db->query("...");
     $row = $result->fetch_assoc();
     if ($row !== null) {
          return $row['somefield'];
     } else {
          throw new Exception('There is an error with this rating.');
     }
}

// Somewhere on another page...
try {
    echo $class->CustomerRating();
} catch (Exception $e) {
    echo $e->getMessage();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T16:08:45.867

使用例外。避免从函数和方法返回错误

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-13T02:17:23.257

尽管返回 false 以指示错误在 PHP 库中很普遍，但也有几个缺点：

1.  您无法返回有关错误的描述
2.  如果 false 值是函数的有效返回值，则不能使用这种方法

我在工作中看到的另一种方法是返回一个包含正常结果和可能错误的数组，基本上返回一对，但是要获得真正的结果，您必须从数组中检索它，这是编写更令人不快的代码

异常是这个问题的完整解决方案，但是为简单的错误编写 try...catch 块有点麻烦。对于记录为抛出异常的函数，如果在调用它时没有捕获异常，PhpStorm 会抱怨，所以我认为异常最好保留用于更严重的错误

返回结果和可能的错误的一种方法是使用按引用传递参数，这在 Objective C 中经常使用

```
/**
 * get element from array
  * @param $index int
  * @param $list array
  * @param $error object
  */
function getFromArray($index, $list, &$error=null) {
    if ($index >= 0 && $index < count($list)) {
        return $list[$index];
    }

    $error = "out of index";
    return null;
}

$list = ['hello', 'world'];

$error = null;
$result = getFromArray(-1, $list, $error);
if ($error) {
    echo "an error occurred " . $error;
} else {
    echo $result;
} 
```

如果您不关心错误，则可以调用该函数而忽略错误参数

```
echo getFromArray(0, $list); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T16:12:03.977

Try this out:

```
public function CustomerRating() {
     $result = $db->query("...");
     $row = $result->fetch_assoc();

     if($row){
         $output = $row['somefield'];
     } else {
         $output = false;
     }

     return $output;
}

//somewhere on another page...
if($class->CustomerRating() !== false) {
     echo $class->CustomerRating();
} else {
     echo "There is an error with this rating.";
} 
```

This will make sure that it won't break if you return a zero.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T16:08:25.610

我会使用[例外](http://php.net/manual/en/language.exceptions.php)——避免混乱。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T16:08:39.777

处理错误的最好方法是抛出异常。这样你就可以有各种不同的错误并相应地处理它们。

然后你可以这样做：

```
try {
    $myvar = CustomerRating();
    //do something with it
} catch (Exception $e) {
    echo $e->getMessage();
} 
```

# html - Mailchimp 中的弹出窗口

> ID：11474171
> 
> 赞同：0
> 
> 时间：2012-07-13T16:06:13.197
> 
> 标签：html, popup, popupwindow, newsletter, mailchimp

表面上是一个非常简单的请求：D

我希望能够拥有如下所示的代码：

```
<a href="#" 
onClick="MyWindow=window.open('www.thisIsAPopup.html','MyWindow','toolbar=no,location=no,directories=no,status=no, 
menubar=no,scrollbars=no,resizable=no,width=550,height=880'); 
return false;">
                CLICK HERE FOR THE POPUP!</a> 
```

在 MailChimp 时事通讯中工作。

这个问题无法通过谷歌搜索，因为有很多类似的问题与使用可以嵌入现有网站的 Mailchimp 邮件列表的弹出窗口有关。

Mailchimp (TinyMCE ?) 会覆盖与上述类似的任何代码

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:06:20.197

抱歉，无论您想实现什么，这都是完全错误的策略。即使您有技术能力，您也没有任何道德许可在客户端浏览器中打开任何弹出窗口，尤其是在关闭工具栏和菜单栏等的情况下。就我而言，我总是在我使用的所有浏览器中禁止弹出窗口。

请尝试通过 Ajax 将内容发送到`<DIV>`with `z-order = 0`。换句话说，尝试使用图层的概念。

谢谢！

# java - 为一组功能切换状态的设计模式

> ID：11474172
> 
> 赞同：2
> 
> 时间：2012-07-13T16:06:13.227
> 
> 标签：java, design-patterns

我在一个类中有一系列实例函数。还有一个布尔实例变量指定对象状态。几乎所有的实例函数都依赖于这个布尔状态。他们的身体看起来像

```
int f() {

   if (state) {
      //do stuff
   }
   else {
      // do other stuff
   }
} 
```

除此之外，状态还交换了一些功能。因此，如果状态为真，那么当用户调用 f() 时，它实际上会运行。但是当状态为假时，当用户调用 f() 时，会发生 antiF() 运行。

所以有些功能内部有开关，有些功能完全交换。

如果我用 C++ 做这个，我可能会使用函数指针。我将如何用 Java 做到这一点？策略模式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T16:23:10.327

看起来你想要[state pattern](http://en.wikipedia.org/wiki/State_pattern#Java)。您无需让每个函数检查状态，而是将这些函数拉入状态接口并为每个状态分别实现：

```
public interface State {
  void f();
  void g();
  void h();
}

public class StateA : State {
  public void f() { do something; }
  ...
}

public class StateB : State {
  public void f() { do something else; }
  ...
} 
```

`State`然后，您将维护一个特定的实例，而不是一个布尔变量：

```
State currentState = new StateA();
...
currentState = new StateB(); 
```

# sql - MS ACCESS -> 动态数据透视图

> ID：11474177
> 
> 赞同：1
> 
> 时间：2012-07-13T16:06:20.190
> 
> 标签：sql, ms-access, graph, pivot

我正在尝试为一家小公司建立一个数据库来记录其支出，然后生成报告来分析支出。我在处理一份我想做的报告时遇到了问题。我希望报告比较用户指定的时间段并在图表上显示数据。

例如，数据的结构如下：

日期 -- 费用分类 -- 金额

现在，我希望用户能够通过查询选择两个时间段以进行比较，并显示在这两个时间段内每个费用分类上花费的总金额，并将它们绘制在数据透视图上。

因此，例如查询将允许用户说，选择比较以下期间（期间 1）01-04-12 到 15-04-12 和（期间 2）15-04-12 到 30-04-12 . 该报告现在应该安排数据，以便按费用分类（例如水电费、文具费用、零用现金费用、一般费用等）进行分组，并提供两个时间段内每个分类的总支出金额。

有人可以帮我解决这个问题。我试过使用交叉表查询，但我不能限制数据只显示我想要的时间段。我已经尝试过联合查询，但仍然没有得到我需要的结果。我也尝试过基于几个不同的查询构建报告，但无法让图表正确绘制数据。

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:19:25.197

The easiest thing to do is to create the chart as you wish and then change the sql of the query on which it is based according to the required period.

So say it is:

```
SELECT stuff FROM Table 
```

It becomes

```
sSQL= "SELECT stuff FROM Table WHERE SDate =#" & sDate & "#"
Set qdf = CurrentDB.QueryDefs("MyChart").SQL = sSQL 
```

# c - 如何在 DOS/C 中访问非标准 COM 端口（USB->Serial、COM5+）？

> ID：11474180
> 
> 赞同：2
> 
> 时间：2012-07-13T16:06:33.210
> 
> 标签：c, usb, serial-port, dos, turbo-c

我正在使用一个内部软件工具来显示和记录从我为其开发嵌入式软件的产品的串行调试端口收集的格式化诊断数据。它是 C 语言并且非常古老。它是使用 Borland Turbo-C v1.01（版权所有 1990！）构建的。如果可能的话，我更愿意为现代环境修改而不是重写该工具。

我想一次从多个设备收集调试数据。我设想通过 USB-> 串行适配器连接到集线器的几个设备，连接到 PC（运行 Windows XP）。每个设备运行一个诊断工具实例（同样在 Windows 中），指向相应的 COM 端口。容易，对吧？

不完全的。观察我正在使用的串口初始化函数：

```
void serinit(int baudrate, char paristat, char adaptnum) {
  int hibcon, lobcon, paricon;
  if(adaptnum == '3') {
    sioreg = lowbaud = 0x3E8;     // SIO (Serial I/O Reg.)
    intenreg = highbaud = 0x3E9;  // IER (Interrupt Enable Reg.)
    intidreg = 0x3EA;             // IIR (Interrupt Ident. Reg.)
    linecon = 0x3EB;              // LCR (Line Control Reg.)
    modemcon = 0x3EC;             // MCR (Modem Control Reg.)
    linestat = 0x3ED;             // LSR (Line Status Reg.)
    modemstat = 0x3EE;            // MSR (Modem Status Reg.)
    sintvect = 0x0C;
    sintmask = 0x10;
  } else if(adaptnum == '2') {
    //omitted for brevity, similar to above w/ different magic numbers
  } else {
    //ditto
  }

  outportb(linecon, 0x80);        // LCR - set up to set baud rate

  switch(baudrate) {
    case 9600:  hibcon = 0x00;  lobcon = 0x0C; break;
    //more magic numbers for other baud rates
  }

  outportb(lowbaud, lobcon);            // Baud Rate Divisor LSB
  outportb(highbaud, hibcon);           // Baud Rate Divisor MSB

  switch(paristat) {
    case 'o': //odd parity, 2 stop, 7 data
    case 'O': paricon = 0x0E; break;
    //more magic numbers for other parity settings
  }

  outportb(linecon, paricon);  //Line Control Register
  outportb(intenreg, 0x01);    //IER - receive enabled
  outportb(modemcon, 0x09);    //x x x x +out2 x -rts +dtr

  imodemcon = 0x09;     //update image
  inportb(sioreg);      //Just in case there's anything lurking in the register
  intvsave = getvect(sintvect);
  setvect(sintvect, serint);   //Set up interrupt vector.
  outportb(0x21, inportb(0x21) & !sintmask); //OCW 1 - enable serial interrupts
} 
```

当 USB-> 串行适配器将显示为时，我有什么选择可以为 COM 端口 5+ 调整这种配置？我可以使用 DOS 命令按预期看到它们`mode`（并且在 Windows 设备管理器中像普通人一样），但我不确定如何从诊断程序中访问它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T16:45:48.843

直接寻址 I/O 寄存器需要模拟传统 COM 端口行为的设备驱动程序。标准的 Microsoft 设备驱动程序执行此操作。但是您没有使用该驱动程序，您有一个供应商特定的 USB 驱动程序。

这些驱动程序通过将自己连接到串行端口的标准 winapi 函数来模拟串行端口。像 CreateFile()、SetCommConfig() 等。这需要编写 32 位代码才能使用这些功能。他们没有做的是模拟寄存器，所以 DOS 应用程序仍然可以工作，这已经结束了。并且不能正常工作，DOS 只支持 4 个 COM 端口，因此只使用了 4 组寄存器。COM5 及以上没有标准寄存器地址。

也许你可以找到一个 USB 模拟器，它的驱动程序仍然可以做到这一点。但我认为几率非常低。相反，将 90 年代的软件与 90 年代的硬件结合起来。购买您拧入总线的老式 PCI 卡。这样标准的 Microsoft 驱动程序才能工作。上次我看时（胖一年前）这些卡仍然可用，尽管选择越来越少。或者从旧机器中挖出一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:22:44.383

如果您运行的是纯 DOS，您将受限于系统上可用的 COM 端口。查看[此](http://www.startech.com/Cards-Adapters/Serial-Cards-Adapters/2-Port-16550-Serial-ISA-Card~ISA2S550)串行端口扩展器的用户手册。它允许您选择最多 7 个 com 端口。

如果您在 Windows 中运行此 DOS 应用程序，请查看设备管理器中的设备资源。它告诉您的 I/O 范围将是您程序的寄存器地址范围。该网页[演示](http://www.logix4u.net/parallel-port/43-how-to-read-parallel-serial-port-address-from-bios)了查找信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-22T00:02:50.867

超级终端 Hilgraeve/Microsoft 虚拟化 COM1。腻子紧随其后。DOSBox 下一个带有 serial1/realport。示例： http: [//www.prosefights.org/irp2014/ganssle.htm#14510USB](http://www.prosefights.org/irp2014/ganssle.htm#14510USB) :)

# .net - Biztalk 错误？全局（引用）时在元素名称中使用连字符或句点时 XSD 阻塞

> ID：11474182
> 
> 赞同：3
> 
> 时间：2012-07-13T16:06:53.990
> 
> 标签：.net, xsd, biztalk

这是 XSD 的一些代码，它在 XML Spy 中是有效的，但在 Biztalk 中使用句点或连字符在引用的元素上阻塞。谁能告诉我我做错了什么，或者确认这是错误还是“功能”？有人有解决方法吗？我在 .NET（和 BizTalk）中搜索并搜索了 XSD/XML 验证中的异常情况，但没有看到任何内容（任何有类似问题的人。）

```
 <?xml version="1.0" encoding="UTF-8"?>
<!-- edited with XMLSpy v2012 rel. 2 (x64) (http://www.altova.com) by ZiggyDude (PA DPW-BIS) -->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="DotNetRestrictions">
        <xs:complexType>
            <xs:choice>
                <xs:element name="Valid">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="Embedded-Hyphen"/>
                            <xs:element name="Embedded.Period"/>
                            <xs:element name="Embedded_Underscore"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
                <xs:element name="Invalid">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element ref="Embedded-Hyphen"/>
                            <xs:element ref="Embedded.Period"/>
                            <xs:element ref="Embedded_Underscore"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:choice>
        </xs:complexType>
    </xs:element>
    <xs:element name="Embedded.Period"/>
    <xs:element name="Embedded-Hyphen"/>
    <xs:element name="Embedded_Underscore"/>
</xs:schema> 
```

请注意，嵌入的下划线在 .NET 中不会失败。通过将所有句点和连字符更改为下划线来实现这一点，但发送机构不会以“下划线”格式提供 XML 或 XSD。这些文件使用句点和连字符发送到太多地方。我们要么需要 1) 配置此权限，使其尽可能工作，2) 修复 BizTalk 和 .NET (heh.heh.heh) 或 3) 动态转换这些 XML 文档以在处理之前替换句点和连字符。

想法？并且请确认/反驳我的理论，即当元素被称为参考时，BizTalk/.NET 会阻塞这些字符。

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:16:54.277

如果 BizTalk “窒息”的症状是您遇到以下错误：

> 节点“Embedded.Period”——为此根节点指定一个有效的 .NET 类型名称

然后，您可以通过在 BizTalk 架构编辑器中选择有问题的节点并修改其 Rootnode TypeName 属性来解决此问题。将句点或连字符换成下划线 - 这只会影响生成的 .NET 类型，而不是 XML 表示 - 看看这是否能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:13:55.357

通过将“Rootnode TypeName 属性”中的违规字符替换为下划线，XSD 会自行验证并能够接受元素名称中包含违规字符的传入 XML。

代码是

```
<xsd:element name="Embedded-Hyphen" type="xsd:anyType"/>
<xsd:element name="Embedded_Underscore" type="xsd:anyType"/>
<xsd:element name="Embedded.Period" type="xsd:string"/> 
```

将此添加到每个元素：

```
<xsd:annotation>
   <xsd:appinfo>
      <fieldInfo rootTypeName="Embedded_Period" xmlns="http://schemas.microsoft.com/BizTalk/2003"/>
    </xsd:appinfo>
</xsd:annotation> 
```

现在看起来像这样：

```
<xsd:element name="Embedded-Hyphen" type="xsd:anyType">
    <xsd:annotation>
        <xsd:appinfo>
            <recordInfo rootTypeName="Embedded_Hyphen" xmlns="http://schemas.microsoft.com/BizTalk/2003"/>
        </xsd:appinfo>
    </xsd:annotation>
</xsd:element>
<xsd:element name="Embedded_Underscore" type="xsd:anyType"/>
<xsd:element name="Embedded.Period" type="xsd:string">
    <xsd:annotation>
        <xsd:appinfo>
            <fieldInfo rootTypeName="Embedded_Period" xmlns="http://schemas.microsoft.com/BizTalk/2003"/>
        </xsd:appinfo>
    </xsd:annotation>
</xsd:element> 
```

谢谢你们！

# c# - 后台传输计数 windows phone

> ID：11474183
> 
> 赞同：2
> 
> 时间：2012-07-13T16:06:56.530
> 
> 标签：c#, windows-phone-7, networking, file-transfer

我要使用 WP7 的后台传输服务下载文件，但问题是有时我的应用程序由于我仍然未知的原因而崩溃，当我尝试再次启动它时，它再次崩溃并出现以下错误。

> System.UriFormatException 未处理 Message=Invalid URI: 无法确定 URI 的格式。StackTrace：在 System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind) 在 Microsoft.Phone.BackgroundTransfer.BtsApi.QueryBackgroundTransferRequestTransferParameters(BtsRequestHandle requestHandle) 在 Microsoft.Phone.BackgroundTransfer 的 System.Uri..ctor(String uriString)。 BackgroundTransferRequest..ctor(BtsRequestHandle requestHandle, String requestId, RequestStatus requestStatus) 在 Microsoft.Phone.BackgroundTransfer.BackgroundTransferService.BackgroundTransferRequestsEnumerator.MoveNext() 在 Transffr.MainPage.InitialTansferStatusCheck() 在 Transffr.MainPage.OnNavigatedTo(NavigationEventArgs e) 在 Microsoft.Phone .Controls.PhoneApplicationPage。*DisplayClass4.b* _0(Object args) at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfoculture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark & stackMark) 在系统。 Reflection.RuntimeMethodInfo.InternalInvoke（Object obj，BindingFlags invokeAttr，Binder binder，Object[] 参数，CultureInfo 文化，StackCrawlMark 和 stackMark）在 System.Reflection.MethodBase.Invoke（Object obj，Object[] 参数）
> 在 System.Delegate.DynamicInvokeOne(Object[] args) 在 System.MulticastDelegate.DynamicInvokeImpl(Object[] args) 在 System.Delegate.DynamicInvoke(Object[] args) 在 System.Windows.Threading.DispatcherOperation.Invoke() 在 System .Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority) 在 System.Windows.Threading.Dispatcher.OnInvoke(Object context) 在 System.Windows.Hosting.CallbackCookie.Invoke(Object[] args) 在 System.Windows.Hosting.DelegateWrapper System.Windows.RuntimeHost.ManagedHost.InvokeDelegate 处的.InternalInvoke(Object[] args)
> (IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult)

我不明白，因为在这行代码中：

```
if (TransferListBox.Items.Count > 0)
{
   //Some code here
} 
```

我正在尝试计算列表项，为什么它会告诉我无效的 URI？

并且总是使用有效的绝对 URL 崩溃。

谢谢你的帮助。

# iphone - 在 Mac 中定位 .Storedata 文件

> ID：11474187
> 
> 赞同：0
> 
> 时间：2012-07-13T16:07:06.100
> 
> 标签：iphone, objective-c, core-data

我已经在我的 IOS 设备上构建了一个 iPhone 项目。我使用核心数据来存储一些数据。当我构建时，它正在醒来。我只需要找到这个 .storedata 文件，当我跟踪时，位置是 /var/mobile/Applications/211B3C9E-82B3-4304-90D2-EE5E4337D9F1/Documents/MyProject.storedata。我打开了机器中的所有隐藏文件，但我无法找到设备的指定路径。当我在模拟器中构建它时，我可以找到该文件。任何人都可以建议我找到这个文件的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:53:54.640

如果您在设备上运行它，那么您就是在设备上创建数据库。你需要一个 iPhone 文件浏览器（我使用[iFunBox](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CEYQFjAA&url=http://www.i-funbox.com/&ei=f1IAUL71JKnk2wWF0_XABA&usg=AFQjCNF9USijQCeC-BUxnX0jN34pGFQamw)）。

# android - 处理在自定义类中创建的数组列表（新手困惑）

> ID：11474193
> 
> 赞同：0
> 
> 时间：2012-07-13T16:07:14.853
> 
> 标签：android, class, arraylist

基本上，我需要将项目添加到数组列表中。我使用单独的类是正确的（这部分是我在这里练习的）还是这是一个愚蠢的想法，因为它基本上只是一个数组列表。我想我会创建一个类，因为我想随机添加它等等。或者，因为它只是一个数组列表类，我应该使用“扩展数组列表”还是类似的东西？代码示例最受欢迎。我显然在这里遗漏了一些关键的编程理论。谢谢你。

*注意*我已经删除了我认为不相关的代码我有一个主要的：

```
public class cgame2 extends Activity {

private ArrayList<Integer> cToChooseFromImages; // clear image list

colourlist colourlistused = new colourlist();
colourlist userscolourlist = new colourlist();

....truncated....towards the end of my code I have......
colourlistused.randomaddnewitem(); 
```

我有一个类（称为colorlist）：

```
import java.util.ArrayList;
import java.util.Random;
import android.util.Log;

public class colourlist {

private ArrayList<Integer> clist;

private int picked;

int imagetodisp;

public colourlist() {
}

public void randomaddnewitem() {
    Random randomtouse = new Random(System.nanoTime());
    picked = randomtouse.nextInt(3);
    clist.add(picked); // this is where the program crashes according to log info
}
public void addnewitem(int itemtoadd) {
    clist.add(itemtoadd);
}

.....etc..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:21:37.030

如果您要向 ArrayList 添加功能，最好的方法就是您已经完成的方法。

创建类的成员 ArrayList 并创建函数来扩展行为。这称为组合。与继承相比，或者创建 ArrayList 的子类，这可能会通过将您的实现不必要地耦合到 ArrayList 来产生更多问题。

不要忘记初始化列表。最好的方法是：

```
List<Integer> clist = new ArrayList<Integer>(); 
```

`List`如果您选择稍后更改特定的列表实现，请使用该接口使您的代码更加灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:42:10.103

为您的数组列表创建一个类并不是一个坏主意，类本身就是数据结构，这将允许更轻松地操作数据。通过将数组列表放在它自己的类中，您将能够轻松地获取、设置、发送、更改等。但是，在创建类时，您通常希望创建可以被视为对象的类。如果您是初学者，我建议您探索和研究面向对象的分析和设计，因为这将帮助您确定什么应该和不应该是类。

而且，正如其他人指出的那样，请确保初始化数组列表：

```
List<Integer> clist = new ArrayList<Integer>(); 
```

至于扩展`ArrayList`vs. `List`，我会使用`ArrayList`，因为 1\. 它具有所有方法和功能`List`（因为 is 是 的实现`List`）和 2\. 它由数组支持，这就是您正在使用的。只是我的偏好，随意做一些研究，找出最适合你需要的东西；a`List`可能就是您所需要的，在这种情况下，您应该使用它。

我要指出的另一件事，因为看起来你正在创建一个游戏，如果你要通过和反对，在你的情况下`ArrayList`，你会想要熟悉`Parcelable`界面。这将允许您将数据从一个活动传递到另一个活动。这是一个可以帮助您入门的链接，以及一个可能会提供一些洞察所需内容的教程：

教程`Parceleable`：

[http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

开发者信息：

[http://developer.android.com/reference/android/os/Parcelable.html](http://developer.android.com/reference/android/os/Parcelable.html)

祝你好运！

# c# - 打开和关闭绑定

> ID：11474203
> 
> 赞同：1
> 
> 时间：2012-07-13T16:07:41.960
> 
> 标签：c#, wpf, binding

假设您有一个带有 ObservableCollection (OC) 的 ViewModel，它绑定到 View 内的某个控件。

有没有办法在不删除绑定的情况下暂时禁用 OC 和控件之间的绑定？我希望能够在不通知视图的情况下修改我的 ObservableCollection。

原因很简单：我在 OC 上做了很多 Add() 和 Insert() 操作。大多数情况下一切正常，但有时我调用 Add() 的频率如此之高，以至于视图中的更新看起来令人不快。在这些时间段内，我想事先“关闭”绑定，然后再“打开”。

有没有人遇到过类似的情况/有人有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:12:17.373

只需包装`ObservableCollection`（甚至从它继承），然后`OnCollectionChanged`通过添加自定义逻辑来覆盖 mthod，这将根据您的要求推迟事件触发，我相信这是实现自己的可延迟可观察集合的一种非常标准的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:20:02.440

当集合中有很多项目时，我更喜欢使用 List<> 作为 CollectionViewSource 的来源。然后视图绑定到 CollectionViewSource.View。CollectionViewSource 具有 DeferRefresh() 和 Refresh() 方法，可让您在没有查看通知的情况下完成更改源列表的所有后台工作。CollectionViewSource 的性能比 ObservableCollection 好得多，而且它支持过滤。如果您不断添加和删除项目，则可能需要过滤。

# c# - 如何在 C# 中打印 .htm 文件？

> ID：11474205
> 
> 赞同：0
> 
> 时间：2012-07-13T16:07:44.893
> 
> 标签：c#, .net, html, visual-studio-2010, printing

我似乎找不到使用 .net 4.0、visual studio 2010 和**windows forms**在 c# 中打印 .htm 文件的好方法。当我尝试直接打印它时，它打印了原始 html 数据而不是打印“页面”本身。

我知道打印它的唯一方法是使用 WebBrowser 控件。当我打印文档时，它不打印颜色并且页面打印不正确。例如，不绘制边缘等。

网页浏览器代码：

```
public void Print()
{
    // Create a WebBrowser instance. 
    WebBrowser webBrowserForPrinting = new WebBrowser();

    // Add an event handler that prints the document after it loads.
    webBrowserForPrinting.DocumentCompleted +=
        new WebBrowserDocumentCompletedEventHandler(PrintDocument);

    // Set the Url property to load the document.
    webBrowserForPrinting.Url = new Uri(Core.textLog);
}

private void PrintDocument(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    ((WebBrowser)sender).ShowPrintDialog();
    //// Print the document now that it is fully loaded.
    //((WebBrowser)sender).Print();

    //// Dispose the WebBrowser now that the task is complete. 
    ((WebBrowser)sender).Dispose();
} 
```

我能做些什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:14:35.453

打印网页将永远成为您存在的祸根。只是没有一种解决方案可以将 HTML 直接打印到您的打印机，非常非常好。即使您确实找到了一个做得很好的程序，您尝试打印带有一些不受支持的格式的页面也只是时间问题，在这种情况下，您又回到了开始的地方。

我们所做的是使用名为[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)的程序将 HTML 打印到 pdf 文件。然后我们在 Acrobat（它具有出色的打印支持）中打开它并从那里打印。关于 wkhtmltopdf，我不能说太多好话。它是命令行驱动的，而且超级超级快。 **最重要的是，它是免费的**。它有一个名为 wkhtmltoimage 的配套程序，它也可以打印成最流行的图像格式（bmp、jpg、png 等）。

下载/安装程序后，您可以通过转到命令提示符、导航到安装文件夹并键入以下内容来运行快速测试：

```
wkhtmltopdf "http://YouWebAddress.com" "C:/YourSaveLocation.pdf" 
```

它还具有[大量命令行开关](http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltoimage_0.10.0_rc2-doc.html)，可让您更好地控制输出（页眉、页脚、页码等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:40:58.983

好的，正如我所说，问题是没有绘制边缘，也没有绘制背景。

这是我解决它的方法。

```
Hashtable values = new Hashtable();

values.Add("margin_left", "0.1");
values.Add("margin_right", "0.1");
values.Add("margin_top", "0.1");
values.Add("margin_bottom", "0.1");
values.Add("Print_Background", "yes");

using (RegistryKey key = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Internet Explorer\PageSetup", true))
{
    if (key == null) return;

    foreach (DictionaryEntry item in values)
    {
        string value = (string)key.GetValue(item.Key.ToString());

        if (value != item.Value.ToString())
        {
            key.SetValue(item.Key.ToString(), item.Value);
        }
    }
} 
```

所以在我打印之前，我去 regedit，更改值，并且文档得到完美打印。希望这可以帮助其他在 Windows 窗体中从 webbrowser 控件打印时遇到相同问题的人。

# android - Android Market 捐赠选项

> ID：11474206
> 
> 赞同：2
> 
> 时间：2012-07-13T16:07:45.803
> 
> 标签：android

我希望为我正在开发的 android 应用程序添加支持开发人员选项。

市场上有一款名为 Metro Messaging Beta 的应用程序。此应用程序有一个捐赠选项，可让您选择捐赠等级。一旦你点击一个选项，它就会带你到一个安卓市场页面来实际购买捐赠。它真的很光滑并且集成得很好。从技术上讲，它可能是激活购买或类似的东西。

我该怎么做呢？我想要一个不会出现在我的安卓市场开发者页面上的捐赠选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T16:15:07.877

如果您不希望它在开发者页面上显示为单独的应用程序，则必须使用[应用内购买。](http://developer.android.com/guide/google/play/billing/billing_overview.html)

如果您对它在开发人员页面上显示为单独的应用程序感到满意，那么您可以拥有一种解锁器，当您第一次下载并运行时，它会在某处创建一个文件，您的原始应用程序可以检查该文件。如果您要提供附加功能，那么您可以通过应用内或创建文件来解锁它们，或者您可以将公共代码从免费和捐赠版本移动到库项目中，将额外的功能代码添加到捐赠项目和发布一个单独的apk。

您可以尝试使用 PayPal，但这违反了 Google Play 政策，而且我知道有人因为使用它而被禁止使用应用程序，所以我不推荐它。

# eclipse - 如何禁用 eclipse4 内置键盘快捷键？

> ID：11474207
> 
> 赞同：1
> 
> 时间：2012-07-13T16:07:46.463
> 
> 标签：eclipse

Eclipse 4.2 似乎有一些内置的快捷键，例如 Ctrl+P、Alt+C、Alt+X 等，你无法从“Window->preferences->General->Keys”中找到它们。我想重新定义这些快捷方式，例如绑定 Alt+X 以运行 maven build，但是当我在 Eclipse 的右下角按 Alt+X 时，它快速闪烁并且我的鼠标失控，我想这是因为快捷方式冲突。

谁知道如何禁用内置快捷方式？谢谢。

编辑： Ctrl+p 只绑定到一个动作。 ![在此处输入图像描述](../Images/06de9054ce01ff681437c7ed4bd26efe.png)

当我单击 Ctrl+p 时，右下角显示，此消息来自 eclipse：

![在此处输入图像描述](../Images/0170cb2ebc9fad4b2c722a15ef768e82.png)

好吧，以上是好的情况——至少你可以选择运行哪个动作。对于 Alt+P，Alt+c 你没有机会选择，eclipse 正在翻转，你失控了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:32:44.657

您确定您的操作系统或其他应用程序中没有处理这些键盘触发器的东西吗？如果你在 Eclipse 的 Preferences 中分配了一个键盘快捷键，它会在发生冲突时提示；如果您没有看到，那么它不是 Eclipse 快捷方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:07:02.470

我找到了这个问题的根本原因，我将我所有的键从 Eclipse 3.7 导入到 4.2，它们中的大多数都可以工作，但是其中一些冲突但 Eclipse 无法显示冲突的快捷方式，比如说，Ctrl+P，这是打印快捷方式对于 eclipse 默认情况下，在 eclipse 3.7 中我将 Ctrl+p 绑定到另一个命令，导入后，eclipse 4.2 显示就像 3.7（见上文），但实际上它仍然存在冲突，即使它没有显示冲突。我认为这可能是一个日食错误。我是一个广泛使用快捷方式的人。希望这可以帮助其他人迁移快捷方式。

# wpf - 在后面的代码中指定 WPF 网格中的列添加顺序？

> ID：11474208
> 
> 赞同：1
> 
> 时间：2012-07-13T16:07:47.260
> 
> 标签：wpf, wpf-controls

在后面的代码中向网格中添加一列很容易：

```
col10 = new ColumnDefinition();
col10.SharedSizeGroup = "column1"; 
```

当您添加它添加到网格末尾的列时，例如您有一个包含 A 列和 B 列的网格，您使用上面的代码和一个新列 (C)，并将其添加为 AB C。

可以这样设置吗？

出租车

而是将其添加到末尾？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:35:39.430

`ColumnDefinitions`与任何其他 Collection 一样，并支持 IList<> 接口。所以只需使用插入方法来控制添加的顺序。

```
ColumnDefinition myColumn = new ColumnDefintion();
Grid myGrid = new Grid();
myGrid.ColumnDefinitions.Insert(0, myColumn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:43:35.180

试试这个：

XAML 文件：

```
<Window x:Class="DataGridAddColumn.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal">
            <ComboBox Name="cbWhere" Width="100" VerticalAlignment="Center">
                <ComboBoxItem>Front</ComboBoxItem>
                <ComboBoxItem>End</ComboBoxItem>
            </ComboBox>

            <TextBlock Text="Name:" VerticalAlignment="Center" Margin="10,0,0,0" />
            <TextBox Name="tbName" MinWidth="100" VerticalAlignment="Center" />

            <Button Content="Create" VerticalAlignment="Center" Margin="10,0,0,0" Click="Button_Click" />

        </StackPanel>

        <DataGrid Grid.Row="1" Name="grid" />
    </Grid>
</Window> 
```

代码隐藏：

```
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace DataGridAddColumn
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void AddColumn(DataGrid grid, string name, int where)
        {
            if (where == 0)
            {
                grid.Columns.Insert(0, new DataGridTextColumn{Header = name});
            }
            else
            {
                grid.Columns.Add(new DataGridTextColumn { Header = name });
            }
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            AddColumn(grid, tbName.Text, cbWhere.SelectedIndex);
        }
    }
} 
```

# mysql - 轻松导入 MySQL --tab 转储

> ID：11474210
> 
> 赞同：4
> 
> 时间：2012-07-13T16:07:50.440
> 
> 标签：mysql, mysqldump, mysqlimport

我已经使用该选项转储了一个 MySQL 数据库，该`--tab`选项为每个表创建 2 个文件（一个带有数据的 SQL 文件`create table`和一个带有数据的制表符分隔值文件）。

有没有一种简单的方法可以将此文件目录导入 MySQL 服务器？我在 中找不到选项`mysqlimport`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T10:42:37.610

```
for i in `ls *.sql`; do 
  sql_file=$i; 
  table_name=`echo $sql_file | sed "s/.sql$//"`
  mysql -u root database_name < $sql_file
  echo "LOAD DATA LOCAL INFILE '$table_name.txt' INTO TABLE $table_name" | mysql -u root database_name
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:37:40.457

您可以通过多种方式做到这一点 - 最直接的是

```
mysql db < sql_structure_file 
```

这将创建表。然后做（从mysql客户端）

```
LOAD DATA LOCAL INFILE tab_delimited_file INTO TABLE 
```

（带有适当的名称、分隔符等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-12T00:40:39.017

我正在使用这个 bash 脚本，它首先导入所有 sql 文件来构建表，然后是 txt 文件。数据是使用后台进程并行加载的——基本上是模拟`mysqlimport`. 用法是这样的：

```
./import_table.sh database_name /path/to/dump/files 
```

**脚本：**

```
#!/bin/bash

DIR=$(echo $2 | sed 's/\/$//')

function import_sql() {
    mysql $1 < $2;
    echo "mysql $1 < '$2'";
}

function import_txt() {
    mysqlimport --silent $1 $2;
    echo "mysqlimport --silent $1 '$2'";
}

for filename in $DIR/*.sql; do
    [ -e "$filename" ] || continue
    import_sql $1 $filename &
done
wait
echo 'ALL SQL IMPORTED';

for filename in $DIR/*.txt; do
   [ -e "$filename" ] || continue
   import_txt $1 $filename &
done
wait
echo 'ALL TXT IMPORTED'; 
```

# jquery - HTML5 音频/视频在 iOS 上使用 fancybox 覆盖不起作用

> ID：11474214
> 
> 赞同：1
> 
> 时间：2012-07-13T16:08:02.927
> 
> 标签：jquery, fancybox

当我将 HTML5 音频/视频标签嵌入到 fancybox 覆盖中时，音频/视频播放器不会使用任何 iOS 设备（iPhone/iPad）显示。调用 open_audio_overlay() 时，您可以使用此 MP3 [http://www.w3schools.com/html5/song.mp3](http://www.w3schools.com/html5/song.mp3)。我正在使用 fancybox 的第 2 版（最新代码）。我提供了我正在使用的以下代码：

CSS：

```
div.overlay .fancybox-skin
{
    background: #1f1f1f;
    border-radius: 8px;
    color: white;
}

div.overlay-content
{
    background-color: black;
    padding: 20px 10px 20px 10px;
    border-radius: 4px;
}

div#audio-overlay
{
    display: none;
    text-align: center;
} 
```

HTML：

```
<div id="audio-overlay">
    <div class="overlay-content">
        <div id="audio-title" style="margin-bottom: 10px; text-align: center; font-weight: bold;"></div>
            <audio id="audio-player" controls="controls" autoplay="autoplay"></audio>
    </div>
</div> 
```

JAVASCRIPT：

```
function open_audio_overlay(url, title)
{
    $('#audio-player').attr('type', 'audio/mp3');
    $('#audio-player').attr('src', url);

    $('#audio-title').html(title);

    $.fancybox.open($('#audio-overlay'),
    {
        wrapCSS: 'overlay',
        openEffect: 'none',
            helpers:
            {
                overlay:
                {
                    opacity: 0.50,
                    closeClick: false,
                    css:
                    {
                        cursor: 'auto'
                    }
                }
            }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:10:58.360

I have experienced problems with "controls" and "autoplay" attributes added to html5 video elements when viewed in Safari Mobile on the iPad. I believe my problems stemmed from the removal of "controls" and/or setting controls to not be displayed but I would attempt adjusting these first and see if you can get a change from there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:55:52.253

问题解决了，原来我使用的是旧版本的 fancybox（即使文件版本在评论顶部声明为 2.0.6）。我下载了最新的，现在可以使用了。

# github - 如何设置/调试 github WebHook？

> ID：11474215
> 
> 赞同：1
> 
> 时间：2012-07-13T16:08:09.717
> 
> 标签：github

我有这个本地仓库，我进行了更改并运行：

```
git add .
git commit -m "message"
git push -u origin master 
```

我的 github 有两个 WebHook 设置，一个转到[http://requestb.in](http://requestb.in) URL，另一个转到同一文件夹中的 PHP 可执行脚本 (755)（可从外部访问）。

PHP 脚本：

```
<?php echo `git pull origin master`; 
// echo "works"; 
// echo `whoami` ?> 
```

注释的测试行正在工作，所以这是我证明脚本路径和语法都可以的证明。

但是，在我将更改从本地推送到 github 存储库后，我检查了服务器上的文件但没有任何反应，显然`git pull origin master`我的 PHP 脚本的回显什么也没做。

如果我在以 root 身份登录的 shell（git pull origin master）中运行它，则文件将使用 repo 中的最新版本进行更新。

此外，我设置的第二个钩子，来自 requestb.in 的钩子可以正常工作，因为我可以看到来自 github 的请求。

我在服务器上的文件夹具有正确的权限，可以从外部访问，我很绝望，我不知道如何让它工作。

**出了什么问题，我怎样才能使它工作？如何在 github 的管理面板中设置 WebHook**，或者是 PHP 脚本，是否存在权限问题，出了什么问题？！:O

谢谢你。

在我的 3 条评论之后更新：在处理了几个小时之后，我可以清楚地看到 WebHook 并没有真正启动 php 文件。如果我在以 root 身份登录的 shell 中运行“php test.php”，我会得到：

```
root@echo [/home/moove/public_html/dev/wert]# php hooh.php 
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 3 (delta 1), reused 3 (delta 1)
Unpacking objects: 100% (3/3), done.
From github.com:chrisdemetriad/wert
 * branch            master     -> FETCH_HEAD
Updating 0c67b85..89e4fdf
Fast-forward
 XXX.php |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
root@echo [/home/moove/public_html/dev/wert]# 
```

这是我需要的，并且服务器上的文件得到更新。但是如果我不手动执行，文件不会得到更新，这一定是因为 php 脚本。我的最新版本有效：

```
<?php echo `git pull origin master`; 
```

# linux - 大文件的补丁工具

> ID：11474216
> 
> 赞同：-1
> 
> 时间：2012-07-13T16:08:10.437
> 
> 标签：linux, embedded, diff, patch, embedded-linux

我是 10 个 rasberry pie 的新主人，它们都运行相同的操作系统和相同的工具。

我正在寻找一种简单的方法来一次更新它们。

操作系统快4GB了，一个个拷贝很慢。

我找到了两个工具 bsdiff/bspatch，但它使用了大量内存，在我的情况下无法使用。

所以我正在寻找像这样的其他工具......我不想拥有最小的补丁。

我只是想避免每次都复制 2Go 的零。

我不能使用 aptitude 或 git，因为我每次都需要做很多修改。

完美的解决方案将像这样运行：

wget [http://myserver.com/mynewimg](http://myserver.com/mynewimg) | 修补程序 /dev/sda

有人有想法吗？

祝大家周末愉快

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:13:23.477

尝试使用`rsync`. 它具有内置算法，仅更新文件的更改区域。

# c# - 从列表中删除图像c#

> ID：11474217
> 
> 赞同：1
> 
> 时间：2012-07-13T16:08:19.677
> 
> 标签：c#, image, list, checkbox

我试图在选中复选框时将图像添加到图像列表中，而当未选中复选框时，我想从列表中删除图像。添加图像可以正常工作，但是当未选中该框时，它不会从列表中删除图像。

```
List<Image> images = new List<Image>();
private void chkRadiation_CheckedChanged(object sender, EventArgs e)
    {

            if (chkRadiation.Checked == true && images.Count < 4)
        {
            images.Add(Image.FromFile(@"C:\Users\joe\documents\radiation.gif"));                
        }
            else if (chkRadiation.Checked == false)
            {                 
                images = images.Where(x => x !=  Image.FromFile(@"C:\Users\joe\documents\radiation.gif")).ToList();
            }
            else if
                (chkRadiation.Checked == true)
            {
                MessageBox.Show("Please select only 3 images");
                chkRadiation.Checked = false;
            }               
    } 
```

我也试过

```
images.Remove(Image.FromFile(@"C:\Users\joe\documents\radiation.gif")); 
```

它也没有工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:14:11.030

问题是您正在使用 class 的实例`Image`，因此您的所有比较`images.Remove`都在处理引用。

当你`Image.FromFile(@"C:\Users\joe\documents\radiation.gif")`创建一个新的图像对象/引用时，它恰好包含与列表中的数据相同的数据，但由于引用不一样，删除它是行不通的。

您可能会更好地使用`Generic.Dictionary<String,Image>`其中键字符串是图像的路径（在没有任何更好的键的情况下）重新编码。这样，您可以检查字典中是否有带有路径的项目并以相同的方式删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:14:07.750

默认情况下 List.Remove 使用实例值比较来检测要删除的元素。由于您要再次加载图像以将其删除，因此这是一个不同的实例。我会跟踪添加图像的索引，并使用它从列表中删除它。CheckBox.Tag 可能是隐藏索引的好地方......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:15:14.350

用表达式

```
x !=  Image.FromFile(@"C:\Users\joe\documents\radiation.gif") 
```

你比较两个对象：

*   对象一：x 是您收藏中已有的图像。
*   对象二：是此时根据源路径创建的图像。

当您比较两者时，它总是返回 false，因为它们是对象 Image 的两个不同实例。

[运算符 == 的工作原理](http://msdn.microsoft.com/de-de/library/53k8ybth%28v=vs.80%29)

# mysql - 为什么 MySQL 插入比 JDBC 慢？

> ID：11474235
> 
> 赞同：6
> 
> 时间：2012-07-13T16:09:00.423
> 
> 标签：mysql, jdbc

桌子

```
+-----------+-------------+------+-----+--------- ----------+----------------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+-----------+-------------+------+-----+--------- ----------+----------------+
| 编号 | 整数(11) | 否 | 优先级 | 空 | 自动增量 |
| 姓名 | varchar(32) | 否 | | 空 | |
| 进程号 | varchar(32) | 否 | | 空 | |
+-----------+-------------+------+-----+--------- ----------+----------------+

```

程序：测试

```
begin
  set @i=0;
  while @i<200 do
    insert into test.table_test
      (name, pid) values ('1', '1');
    set @i=@i+1;
  end while;
end 
```

跑：

```
mysql> call test();
Query OK, 0 rows affected (17.24 sec) 
```

但是当我用 jdbc 插入数据时，插入 10^5 行只需要大约 9 秒（如果我使用批量插入，插入 10^5 行只需要大约 2.4 秒）。

爪哇代码：

```
static String mySqlUrl="jdbc:mysql://127.0.0.1:3306/test?rewriteBatchedStatements=true";

static String sql = "insert into bael_test(name, pid) values(?, ?)"; 

public static void test_mysql_batch(int point){  
    Connection conn=getConn("mysql");  
    clear(conn);
    try {        
        PreparedStatement prest = conn.prepareStatement(sql);        
        long a=System.currentTimeMillis();  
        for(int x = 1; x <= 100000; x++){            
            prest.setString(1, "name");
            prest.setString(2, "pid");
            prest.addBatch();    
            if(x%point==0){
                    prest.executeBatch();      
                    conn.commit();
            }
        }        
        long b=System.currentTimeMillis();  
        print("MySql batch insert 10^5 rows",a,b,point);
    } catch (Exception ex) {  
        ex.printStackTrace();  
    }finally{  
        close(conn);    
    }  
} 
```

那么为什么 MySQL 插入比 JDBC 慢呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:01:52.440

您的 Java 代码使用准备好的语句，而您的 MySQL 代码没有。

换句话说，如果您的查询语法正确，您的过程必须在循环的每个步骤中检查，以及在磁盘上定位表，而准备好的语句仅执行此操作，并且只会在正确的位置插入值无需进一步处理。

如果要比较，可以使用`PREPARE`-> [http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)

只是从内存中写出来，所以它可能是错误的：

```
PREPARE stmt1 FROM 'INSERT INTO test.table_test (name,pid) values(?,?)';
while @i<200 do
    EXECUTE stmt1 USING @i, @i;;
    set @i=@i+1;
  end while;
DEALLOCATE PREPARE stmt1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:10:21.470

JDBC 代码正在执行扩展插入。

（我们在这里没有看到实际的 SQL 语句，也没有看到 SQL 文本中第一个位置参数的绑定，只有第二个和第三个参数。我将做一个假设（可能是错误的） JDBC 为 unbound 参数提供 NULL 值。）

因此，从 JDBC 驱动程序发送到 MySQL 的实际 SQL 语句是以下形式：

```
INSERT INTO test.table_test (id,name, pid) VALUES (NULL,'name','pid')
,(NULL,'name','pid')
,(NULL,'name','pid')
,(NULL,'name','pid')
,... 
```

但是，在您的 MySQL 过程中，您正在执行单独的语句：

```
INSERT INTO test.table_test (id,name,pid) VALUES (NULL,'name','pid');
INSERT INTO test.table_test (id,name,pid) VALUES (NULL,'name','pid');
INSERT INTO test.table_test (id,name,pid) VALUES (NULL,'name','pid');
INSERT INTO test.table_test (id,name,pid) VALUES (NULL,'name','pid'); 
```

扩展的插入形式将比单独的插入语句更有效。（MySQL 为每个语句执行做了很多繁重的工作。）

要从 MySQL 过程中获得更好的性能，您需要执行以下操作：

```
BEGIN
  SET @sqltext= 'insert into test.table_test (name,pid) values (''1'',''1'')'; 
  SET @i=1;
  WHILE @i<200 DO
    SET @sqltext = CONCAT(@sqltext,',(''1'', ''1'')');
    SET @i=@i+1;
  END WHILE;
  PREPARE stmt FROM @sqltext;
  EXECUTE stmt;
  DEALLOCATE PREPARE stmt;
END 
```

为了从 JDBC 中获得同样的性能下降，您需要执行单独的 INSERT 语句。

这是您看到的巨大性能差异的最大贡献者。

这并不是说这是唯一的区别，但这解释了您在执行程序时看到的大部分 17 秒经过的时间。使用单个扩展插入的过程可能比运行 200 个单独插入快 100 倍。

您仍然存在性能差异，但至少与苹果相比，您更接近于比较苹果。

# javascript - 不使用闪光灯的视频会议解决方案

> ID：11474241
> 
> 赞同：-2
> 
> 时间：2012-07-13T16:09:43.537
> 
> 标签：javascript, ipad, video-conferencing

我正在寻找不使用 Flash 的视频会议 API 的建议。

我正在进行的项目将是一个网站，主要通过 iPad 上的 Safari 浏览，尽管也可能为其他平板电脑设计。这意味着该解决方案将无法使用 Flash（Apple 不支持它）并且将使用 JavaScript 编写，因为它是一个网站而不是一个应用程序。

一个视频会议最多需要 12 人，并且必须包括调整窗口大小、更改音量等功能。

如果有人有任何建议或可以指向我的任何链接，我将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:05:46.967

不幸的是，WebRTC 还不适合您。我感觉到你的痛苦。

您*可以*使用 Adob​​e AIR，但使用它进行交互式流视频确实需要 RTMFP（TCP 是一个杀手）和服务器上的视频混合。如果您愿意忍受动作脚本，这可能是您的一个选择。从技术上讲，这不是“Flash”，因为 AIR 应用程序是完全封装的移动应用程序。

我可以为您推荐的最佳替代方案是使用 Mirial 的 SDK 软件客户端（最近被罗技的 LifeSize 部门收购），并将其嵌入到您的 iOS 应用程序中。然而，这确实需要一个相当昂贵的 Miril Carrier Server (MCS) 来注册这些端点。

目前，针对聋哑人和重听者的多家视频中继服务提供商使用该平台引擎来提供他们的移动应用程序产品。这包括 Purple (HOVRS)、ZVRS (CSDVRS)、Convo Relay 和其他一些。

不幸的是，在同一个“房间”中有*很多*人需要像 MCU 这样的东西来混合视频。今天有两个值得注意的开源项目可以做到这一点：OpenVCS 和 OpenMCU。

还有其他新兴技术浮出水面，但大多数人似乎都在等待 WebRTC 达到可以在移动设备上无缝使用的地步。

如果您希望将其嵌入到您的产品中，这就是视频远程呈现最前沿的当前状态。

# javascript - IE8/9 不运行 JavaScript，但 IE8/9 调试器可以

> ID：11474243
> 
> 赞同：0
> 
> 时间：2012-07-13T16:09:49.003
> 
> 标签：javascript, internet-explorer-8

我没有看到任何证据表明 IE8 正在运行我的 JavaScript。

但是，当我使用 f12 工具对其进行调试时，它会在调试器处理重新加载时运行我的 javascript。

但是，如果我从用户的角度进行重新加载（点击重新加载），我再次看到 javascript 没有运行。

很明显，调试辅助重新加载与用户重新加载不同。（调试器请求重新加载）

为什么不同...我该怎么办？

没有错误消息。我不打算支持 IE8，但我需要运行此代码以识别它并向用户报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:20:47.373

如果您没有 ieshiv，那么您可能需要考虑。[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)。我也同意@Rocket 的评估，确保没有 console.log 语句。

# javascript - 带有 2 个计时器的 jquerymobile 会话超时

> ID：11474244
> 
> 赞同：2
> 
> 时间：2012-07-13T16:09:49.667
> 
> 标签：javascript, jquery-mobile, timeout

编辑：我看到问题在于使用 live 而不是 on。我解决了这个问题，但是无法让第二个计时器触发..

错误：`Object [object Object] has no method "popup"`

我正在尝试使用 jquery mobile 实现客户端会话超时。我的代码在：http: [//jsfiddle.net/83BSW/5](http://jsfiddle.net/83BSW/5)

欣赏任何见解..

为了方便起见，这里是代码：

```
<!DOCTYPE html>
<html> 
<head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

<!-- Application specific -->

<script> 
var first_timer = 2 * 1000;
var second_timer = 3 * 1000;
var down = -1;

function initTimer() {
  down = setTimeout(processTimeout, first_timer)
}

function processTimeout() {
        down = setTimeout(logout, second_timer);
        $.mobile.changePage('#timeout1',{transition:'slide', role:'dialog'});
        //alert ("Timeout of first timer, timerid:" + down );
}

function logout() {
    $("#timeout").popup('close');
  $.mobile.changePage('#timeout2',{transition:'slide', role:'dialog'});
  alert("You are logged out");
//  window.location = "http://www.google.com"
}

function resetMyTimer() {
  if ( -1 != down )
    clearTimeout(down);
  alert("Restarting timer");
  initTimer();
}

$("#loadingpage").on(function() {
    resetMyTimer();
});

initTimer();

</script>

</head>
<body>
<div data-role="page" id="loadingpage">
  <div data-role="header" data-position="fixed"> 
      <div class="headerlogo"> </div>
      <h1> Test </h1>
  </div> 
  <div data-role="content" >
    <div id="ssagov"> 
    <h1> Hi there </h1>
    </div> 
    <input type="button" data-shadow="false" data-corners="false" value="Next"  />
  </div><!-- /content --> 
</div><!-- /launch page -->
<div data-role="page" id="timeout1" data-role="popup">
  <div data-role="header" data-backbtn="false">
    <h1>Timeout1</h1>
  </div>
  <div data-role="content">
    Your session will timeout in 2 mins.
  </div>
</div>
<div data-role="page" id="timeout2" data-role="popup">
  <div data-role="header" data-backbtn="false">
    <h1>Timeout2</h1>
  </div>
  <div data-role="content">
    Your session has timed out
  </div>
</div>

</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:06:42.927

最后我解决了这个问题，而不是弹出窗口，我应该使用对话框。这是工作版本：http: [//jsfiddle.net/83BSW/6](http://jsfiddle.net/83BSW/6)

# android - 列表项点击触发子视图的选择器

> ID：11474247
> 
> 赞同：2
> 
> 时间：2012-07-13T16:10:03.677
> 
> 标签：android, listview

我的布局中有一个用于列表中各个项目的 ImageView。

ImageView 的 src 是可绘制文件夹中的一个 XML 文件，它定义在按下项目的各种状态期间要使用哪些图像。

但是，我注意到当您单击列表行（而不是 ImageView 本身）时，分配给 ImageView 的选择器被激活。它实际上并没有点击 ImageView 的 onClick 代码，但图像会像被点击一样切换。

在某些情况下，这实际上是一种理想的效果，但在这种特定情况下并非如此。有没有办法阻止这种情况发生？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T12:13:31.340

设置`android:duplicateParentState`在孩子`true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:31:23.027

我认为你应该阅读 Cyril Mottier 的博客。他在[这里](http://android.cyrilmottier.com/?p=525)有一个关于这个的帖子。

总之，您必须扩展您的子视图以覆盖这样的方法`setPressed(boolean)`：

```
 @Override
    public void setPressed(boolean pressed) {
        if (pressed && getParent() instanceof View && ((View) getParent()).isPressed()) {
            return;
        }
        super.setPressed(pressed);
    } 
```

# facebook-graph-api - Facebook 签到，需要用户访问密钥

> ID：11474248
> 
> 赞同：0
> 
> 时间：2012-07-13T16:10:19.873
> 
> 标签：facebook-graph-api, facebook-checkins

我可以通过 url 访问签到和位置，将 Graph API Explorer 与我的应用程序一起使用。

因此，用户令牌似乎没问题。

现在，当我尝试：

```
$ curl  "https://graph.facebook.com/[my id]/locations?access_token=[my app token] 
```

它指出：

```
{"error":{"message":"A user access token is required to request this resource.","type":"OAuthException","code":102}} 
```

在 Graph API Explorer 中，我为我的应用启用了每一个权限。我试过签到和位置，但都不起作用。我可以看到基本信息，喜欢，朋友等，但没有位置信息。

# 应用设置

**2012 年 8 月启用** 重大更改：删除 offline_access 权限：

**已禁用** Stream post URL 安全性：强制对 auth.login 使用登录密码：2012 年 9 月 重大更改：2012 年 10 月 重大更改：

我正在阅读有关此的所有 stackoverflow 主题，并且正在阅读文档，但我似乎遗漏了一些东西。

知道我缺少什么吗？

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:40:05.157

好的，所以我不清楚用户令牌是如何发挥作用的，尽管还有其他帖子在谈论它，以及 user1438003 的评论。

我可以从 php-sdk facebook api 获取用户令牌，确保它在 60 天内长期存在：

```
https://graph.facebook.com/oauth/access_token?client_id=[my app id]&client_secret=[my secret]&grant_type=fb_exchange_token&fb_exchange_token=[user token] 
```

这将返回一个新的用户令牌。

```
https://graph.facebook.com/[user id]/checkins?access_token=[new user token] 
```

这将返回我期望的信息。

# ms-access - 报告字段应基于单独的字段显示“N/A”

> ID：11474249
> 
> 赞同：1
> 
> 时间：2012-07-13T16:10:24.113
> 
> 标签：ms-access, report, conditional-formatting

我有以下报告显示：

```
F1    |    F2    |    F3    |
`````````````````````````````
TRUE  |   TRUE   |  FALSE   |
TRUE  |   FALSE  |  FALSE   |
FALSE |   N/A    |  N/A     | 
```

如您所见，我只想在 F1 为真时才显示字段 F2 和 F3。F1 为假，F2 和 F3 应显示“N/A”，无论其实际值如何。

我该怎么做？我试过了

```
Private Sub Detail_Format(Cancel As Integer, PrintCount As Integer)
If (Me.F1 = false) Then
    Me.F2.Visible = False
    Me.F3.Visible = False
End If
End Sub 
```

但这不会将值更改为文本（仅删除我可以解决的字段），但它也会为所有字段删除它；不只是那一排。我还能如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:12:08.597

最简单的方法是将控件从 F2 重命名为 txtF2，然后将控件源设置为函数。

```
=iif(F1=true,F2,"N/A") 
```

关于设置可见性，你必须把两边都放进去：

```
Private Sub Detail_Format(Cancel As Integer, PrintCount As Integer)

If (Me.F1 = false) Then
    Me.F2.Visible = False
    Me.F3.Visible = False
Else
    Me.F2.Visible = True
    Me.F3.Visible = True
End If
End Sub 
```

或者更简单地说：

```
Private Sub Detail_Format(Cancel As Integer, PrintCount As Integer)
Me.F2.Visible = Me.F1
Me.F3.Visible = Me.F1 
```

# javascript - Open info window on non-click event

> ID：11474256
> 
> 赞同：1
> 
> 时间：2012-07-13T16:11:00.400
> 
> 标签：javascript, html, google-maps-api-3, google-fusion-tables

I am working on a map using Fusion Tables and would like to have the info window pop up when the user searches a country, or selects a country from the selection list.

The map is here: [https://mywebspace.wisc.edu/csterling/web/index.html](https://mywebspace.wisc.edu/csterling/web/index.html)

My goal is to have the info window pop-up when the user selects/searches a country and zooms to that country.

EDIT: I would like the info-window to have the same information as it does when a polygon is clicked.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:44:58.363

这是[一个示例](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_Watershed_Stewards_Map_sidebar2.html)，它显示了如何创建从可单击侧边栏打开的信息窗口。信息窗口内容由使用 google 可视化库的 FusionTable 查询中的数据填充。不会直接适用，但演示了这个概念。您需要修改 openFtInfoWindow 以显示表中的数据。

[这是您的地图，其中包含在使用下拉菜单或文本搜索时打开的信息窗口](http://www.geocodezip.com/wisc_edu_csterling_FusionTablesA.html)

# html - Having an issue with my Web site loading. This is a .SWF file embedded into the index.html

> ID：11474264
> 
> 赞同：0
> 
> 时间：2012-07-13T13:25:58.503
> 
> 标签：html, css, javascript, flash, xhtml

My Web site [http://www.KushKouture.com/](http://www.KushKouture.com/) does not seem to load correctly in ANY web browser. The flash seems to be there, as I can right click to get the flash options as expected, but the .SWF does not play.

I have included the code from the index.html below for your review. Not sure if anything is missing/incorrect.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

<meta http-equiv="Content-Type" content="text/html"; charset="UTF-8" />
<meta name="author" content="Kush Kouture" />
<meta name="keywords" content="Kush Kouture, men's lifestyle and street apparel clothing company" />
<meta name="description" content="Kush Kouture is an upcoming, upmarket men's lifestyle and street apparel clothing company. The brand is exclusively manufactured in the UK and currently, based solely online. Inspired by the 'Lifestyle' culture, the brand has conceived its designs based on influences from a variety of musical genres ranging from Punk Rock to Hip-Hop, along with many traits from today's teen demographic." />

<title>Kush Kouture</title>

<script type="text/javascript" src="swfobject.js"></script>   
<script type="text/javascript" src="swfaddress.js"></script>   
<script type="text/javascript" src="swffit.js"></script>   
<script type="text/javascript">   
var flashvars = {};   
flashvars.url_config = "xml/configuration_site.xml";   
flashvars.initServices = true;   
var params = {};   
params.allowfullscreen = true;   
params.allowScriptAccess = "always";
params.play = true;   
var attributes = {};   
attributes.id = 'flashObject';   
attributes.bgcolor = '#000000';   

swfobject.embedSWF("index.swf", "flashContent", "100%", "100%", "8",false, flashvars, params, attributes);  
</script>

<style type="text/css">
    /* hide from ie on mac \*/
    html {
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    #flashContent {
        width: 100%;
        height: 100%;
    }
    /* end hide */

    body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        background-color: #ffffff;
    }
    p {

    font-size: 10px;
    font-family: Verdana;
    line-height:17px;
    color:#ffffff;

} 
.style1 {
    font-size: 11px;
    font-family: Verdana;
    color:#ffffff;
    text-transform:uppercase;
}
</style>

</head>
<body>

<div id="flashContent">
<p style="color:#999999">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kush Kouture | You require the latest version of Adobe Flash Player. Please click the image below to download this.</p>   
<p><a href="http://get.adobe.com/flashplayer/"><img src="flash.jpg" alt="Get Adobe Flash player" /></a></p>
</div>   

</body>
</html> 
```

I hope somebody will be able to help! Regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:06:02.157

Do you know what type of server your using? If IIS, you need to make sure that it's set up to work with your file extensions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:06:02.063

正在加载 Flash 文件并播放。

如果您按几次 Tab 键，将激活 Flash 辅助功能，您会看到一个黄色矩形标记全屏按钮所在的位置。

我的猜测是菜单系统没有加载，因为您在 -many- XML 文件之一中有语法错误。

# sql - groupBy using alias in Doctrine QueryBuilder

> ID：11474268
> 
> 赞同：2
> 
> 时间：2012-07-13T16:11:25.563
> 
> 标签：sql, doctrine-orm, group-by

I'm trying to query a database to get all initials from a table. In SQL, the query would be:

```
SELECT SUBSTRING(t.name, 1, 1) AS initial FROM Tool t GROUP BY initial 
```

But using QueryBuilder, I haven't found the way to group by aliases. I've tried:

```
 $q = $this->em->createQueryBuilder()
     ->select('SUBSTRING(i.name, 1, 1) AS initial')
     ->from('...\Entity\Tool', 't')
     ->groupBy('initial');

Error: 'initial' does not point to a Class.

$q = $this->em->createQueryBuilder()
     ->select('SUBSTRING(t.name, 1, 1)')
     ->from('...\Entity\Tool', 't')
     ->groupBy('SUBSTRING(t.name, 1, 1)');

(t.name, 1, ': Error: Cannot group by undefined identification variable. 
```

And after half an hour of looking for documentation I'm asking again for help. Is it possible, or should I go to another way ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:44:24.393

好吧，

正如[这里](https://stackoverflow.com/questions/3995268/doctrine-2-group-by-field-alias-error-does-not-point-to-a-class)所解释的，问题来自我原来的 sql。使用 DISTINCT 解决问题：

```
$q = $this->em->createQueryBuilder()
    ->select('DISTINCT UPPER(SUBSTRING(t.name, 1, 1))')
    ->from('...\Entity\Tool', 't')
    ->orderBy('t.name'); 
```

为了更安全，我添加了一个 UPPER。

谢谢阅读！

# css - 与 2 个内联 div 对齐？

> ID：11474270
> 
> 赞同：0
> 
> 时间：2012-07-13T16:11:34.720
> 
> 标签：css, html, alignment, inline

我有 2 个内联 div 的问题。

我有这样的东西（显示：内联）：

```
DIV1 DIV2 
```

与文本。

我想要：

```
DIV 1 -------------------- DIV2 (aligned right: 60px). 
```

我做不到，**正确的**财产没有生效。

JSFIDDLE：http: [//jsfiddle.net/tyfNx/](http://jsfiddle.net/tyfNx/)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:16:18.243

`position: absolute;`在你的`.welcomeText`课堂上使用：

```
.welcomeText {
    text-align: right;
    right: 50px;
    position: absolute;
}​ 
```

[这是一个演示](http://jsfiddle.net/luissanchezm86/tyfNx/1/)

希望能帮助到你！

# file - Clang not creating object files when using plugin

> ID：11474275
> 
> 赞同：0
> 
> 时间：2012-07-13T16:11:58.513
> 
> 标签：file, object, plugins, hyperlink, clang

I'm trying to use clang++ instead of g++ to create object files that will later be linked by the gnu linker.

I'm am able to do this successfully using native clang++, but when I use clang++ with a plugin, I get a link error:

clang: error: linker command failed with exit code 1 (use -v to see invocation)

That's okay! I just need the object files! However, when I specify -S or -c I do not get any object file, even if I use .o to explicitly specify an output file.

I am unable to do this even with clang's example plugins.

How can I get clang to give an object file?

Much Thanks!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T13:34:37.153

我有同样的问题。对我来说，在我的命令行上用“-add-plugin”替换“-plugin”解决了这个问题。我不确定有什么区别或为什么会起作用，但确实如此。

此外，如果您在命令行上使用“-cc1”，请尝试删除它并在每个插件特定参数前加上“-Xclang”，即“clang -Xclang -load -Xclang plugin.so -Xclang -add-plugin -Xclang”插件名称”。同样，我不确定为什么 -cc1 对我不起作用，但事实并非如此，这解决了它。

# javascript - 对 JSON 字符串进行切片

> ID：11474278
> 
> 赞同：1
> 
> 时间：2012-07-13T16:12:11.093
> 
> 标签：javascript, parsing, json, slice

我从 MySQL 获取数据并回显 JSON 编码数据，如下所示：

```
$result = mysql_query ("SELECT * FROM order_list");
$myjsons = array();
$i = 0;
while ($row = mysql_fetch_assoc($result)) {
    $myjsons[$i] = json_encode(array($row));
    $i++;
}
echo json_encode($myjsons); 
```

我有一个 Javascript 函数可以读取字符串并将其显示在文本框中：

```
if(ajaxRequest.readyState == 4){
$.post('userfind.php', function(data) {
    $("#txtfld").val(data);
    var arr =data.slice(1);
    var user_arr = arr.slice(0,-1);
    var json = user_arr,
    obj = JSON.parse(json);
    alert(obj.user_id);
    $("#resultTXT").val(obj.user_id);
    },'json'
    );}
}
ajaxRequest.open("POST", "userfind.php", true);
ajaxRequest.send(null); 
    } 
```

问题是 txtfld 将字符串显示为 [{"user_id":"2790","fre.....tst":""}] 并且 resultTXT 由于两个 [ ] 而没有显示任何内容。我曾尝试使用 slice 删除它们，但似乎 slice 不适用于 JSON 字符串。我还能做些什么来删除 [ ] 以便 resultTXT 显示 user_id？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T18:40:48.107

1.  您将数组转换为 json 两次。
2.  php 不需要下一个数组元素的索引
3.  我还会添加正确的标题“application/json”
4.  $row 已经是一个关联数组

* * *

```
$result = mysql_query ("SELECT * FROM order_list");
$myjsons = array();
while ($row = mysql_fetch_assoc($result)) {
 $myjsons[] = $row;
}
header('Content-type: application/json');
echo json_encode($myjsons); 
```

这为您提供了正确格式化的 json

要在 javascript 中访问您的 json，您可以：

```
var obj=JSON.parse(json); 
```

我假设你的 mysql 返回一个订单或用户列表 [{"user_id":1},{"user_id":2}] 所以如果你想访问第一个用户的 ID：

```
obj[0].user_id 
```

但如果我误解了你可以发布更多关于你的 json 的信息。

# jquery - Tablesorter jquery display total rows in the html table above table

> ID：11474280
> 
> 赞同：0
> 
> 时间：2012-07-13T16:12:11.560
> 
> 标签：jquery, tablesorter

I am using Tablesorter and a mod of Tablesorter

1.  [http://tablesorter.com/docs/](http://tablesorter.com/docs/)
2.  [http://www.pengoworks.com/workshop/jquery/tablesorter/tablesorter.htm](http://www.pengoworks.com/workshop/jquery/tablesorter/tablesorter.htm)

I have a pretty simple question. In the mod functionality, how can I display the total visible row count above the table? I understand it will require a textbox to display the result, but how do I get that value? It should display something like, "total rows retrieved: 100".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:17:13.013

您可以只添加一个标题行：

```
<tr>
    <th colspan="6" class="total">
        Total Rows: <span>0</span>
    </th>
</tr> 
```

然后输入信息，根本不需要tablesorter（[演示](http://jsfiddle.net/Mottie/eY8uH/31/)）

```
var totalrows = $('table tbody tr').length;
$('.total span').html(totalrows);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T18:59:53.397

使用了 fudgey 的逻辑，但希望我的总行在表之外，所以修改如下。

```
Total Rows: <span class="total"> 0  </span>
<table cellspacing="1" class="tablesorter"> 
....  </table> 
```

javascript:Active 是我的 tr 行的类。

```
var totalrows = $('.Active').length;

$('.total').html(totalrows); 
```

# php - PDOException on Windows Server

> ID：11474281
> 
> 赞同：0
> 
> 时间：2012-07-13T16:12:13.340
> 
> 标签：php, mysql, pdo, mysqli

I'm fairly new to MySQL and PHP, so bear with me. After some research, I found out...much to my distress...that apparently my site is hosted on a Windows server (by default) on GoDaddy which doesn't support PDO.

I just recently switched all database calls to use prepared statements through recommendation from another question I posted. I now find out that these aren't running and I'm getting a nasty error:

```
Fatal error: Uncaught exception 'PDOException' with message 'could not find driver' in D:\Hosting\8446415\html\ROOTFOLDER\php\Connect.php:8

Stack trace: #0 D:\Hosting\8446415\html\ROOTFOLDER\php\Connect.php(8): PDO->__construct('mysql:host=HOSTNAME', 'DBNAME', 'PASSWORD') 

#1 D:\Hosting\8446415\html\ROOTFOLDER\admin.php(67): Connect->connect()
#2 {main} thrown in D:\Hosting\8446415\html\ROOTFOLDER\php\Connect.php on line 8 
```

Here is Connect.php:

```
<?php
    class Connect {
        const expAddress = "HOSTNAME";
        const expUser = "USERNAME";
        const expPwd = "PASSWORD";

        function connect() {
            $db = new PDO('mysql:host='.self::expAddress.';dbname='.self::expUser.';charset=UTF-8', self::expUser, self::expPwd);

            if(!$db) {
                die("<p>Could not establish a connection to the database.</p>");
                include('footer.php');  
            }
            else {
                return $db; 
            }
        }
    }
?> 
```

So what is the fix here? I don't know what is supported, and I was told to shy away from all mysql_* statements.

**I cannot upgrade my hosting account to Linux, even though that would be easiest.** Do I need to use mysqli_* statements? How would this particular call change so that the input is safe from injection?

```
$stmt = $db->prepare("SELECT * FROM logins WHERE username=? AND password=?");
$stmt->execute(array($user, $pass));
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T09:06:48.287

如果您确实有权访问 php.ini，请确保取消注释此行：

```
extension_dir = "ext" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:19:03.220

You need to make sure you have `pdo_mysql` installed. Check `phpinfo()` for `pdo_mysql` ... if you know it's installed, you may just need to uncomment the `extension=php_pdo_mysql.dll` in php.ini ...

To catch your create error and display it nicely, you can modify your code as such:

```
try{
    $db = new PDO('mysql:host='.self::expAddress.';dbname='.self::expUser.';charset=UTF-8', self::expUser, self::expPwd);
} catch (PDOException $e) {
    die('Connect Failed: ' . $e->getMessage());
}

return $db; 
```

# objective-c - Objective-c 点表示法或方括号表示法中首选什么？

> ID：11474284
> 
> 赞同：39
> 
> 时间：2012-07-13T16:12:21.400
> 
> 标签：objective-c, notation

我正在读一本书 - Big Nerd Ranch iOS Programming。它说不建议使用点表示法，因为它会混淆代码。我同时在观看斯坦福的 iOS 编程课程，他在那里广泛使用点符号。你会推荐什么？我个人更倾向于括号符号。

您能否解释一下如何将此代码转换为括号符号？

```
self.display.text = [self.display.text stringByAppendingString:digit]; 
```

据我了解应该是：

```
[[self display] setText]:[[[self display] text] stringByAppendingString:digit]; 
```

这是正确的吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-13T16:19:49.740

这是个人选择的问题。有些人认为，点表示法使消息正在发送（正在调用的方法）变得不清楚，因为它看起来就像 C 样式的结构元素访问。争论的另一面是点符号更容易输入、更容易阅读、更简洁。

作为在引入点表示法（在 Objective-C 2.0 中）之前一直在编写 Objective-C 的人，我可以理解双方的论点，但我自己更喜欢使用点表示法。就是说，我认为对于开始使用 Objective-C 的人来说，理解点符号语法在编译时转换为标准访问器方法调用是很重要的。我认为 Big Nerd Ranch 这本书的作者可能有类似的态度，这也是他们决定在书中使用括号符号的重要原因。

所以简而言之，做你最喜欢的事。两者都是有效的，两者之间的选择本质上是风格问题。无论您选择哪种，请确保您了解两种样式都会生成等效的编译代码。

编辑：我忘了回答关于将点表示法转换为括号语法的问题。你很接近，但你写的是错误的，实际上不会编译。应该是：`[[self display] setText:[[[self display] text] stringByAppendingString:digit]]`。如果我写它，我会把它分成两行（好吧，我真的会使用点符号）：

```
NSString *stringWithDigit = [[[self display] text] stringByAppendingString:digit];
[[self display] setText:stringWithDigit]; 
```

编辑2：我写这个答案已经3年多了。我只是想指出，这些天来，更多的 Apple 框架类已经将以前的常规方法转换为 @properties（例如`-[NSArray count]`），大概是为了更好的 Swift 互操作。这使我比以前更自由地使用点符号。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-13T17:01:41.437

这是我的看法：

处理属性时，应始终使用点表示法。不仅写起来更快（self.foo 的字符比 [short foo] 少），而且更重要的是它使链式消息更容易理解。例如：

`self.myTextField.text.length`

比更容易理解

`[[[self myTextField] text] length]`

此外，它降低了您弄乱标点符号的可能性（确保您有正确数量的括号通常很痛苦）。

但是，正如其他人在上面所说的那样，最终这是个人意见。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-08T13:29:43.733

我知道这是一篇旧帖子，但我想添加一个更现代的答案。

随着 swift 的发布和我们最喜欢的语言即将消亡，偏好应该倾向于点符号。所有 iOS 框架都更新了它们的 API 以支持点表示法（更喜欢标头中的只读属性而不是 getter）。这使得最终向 swift 的转换更加流畅。

需要明确的是，对于要公开 getter 和/或 setter 的实例，最好使用属性。幸运的是，Xcode 的[现代 Objective-c 迁移工具](http://useyourloaf.com/blog/xcode-6-objective-c-modernization.html)将为您完成大部分工作。

# c# - (De)Serializing multiple items to file

> ID：11474285
> 
> 赞同：0
> 
> 时间：2012-07-13T16:12:23.417
> 
> 标签：c#, serialization, persistence

I want to serialize/deserialize multiple object from/to a file. The syntax should be similar to this:

```
obj.Append(byteArray);
obj.Append(byteArray);
obj.Append(byteArray);
IEnumerable<byte[]> obj.Extract(); 
```

While this is very simple to accomplish (e.g., write a class that uses a filestream and protobuf-net internally), I'm wondering if there is any more elegant way of doing this. Is there any class (from a third party library), that uses a serializer to write to an filestream?

**Edit:** I need this as a filestream that captures video data that is sent through network. So the filestream must be open for a dedicated amount of time. My previous solution was to save every video frame to a new file, but it's not scalable (especially for hdd, and increasing video partners).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:04:27.260

关于什么：

```
using(var stream = File.Open(filename, FileMode.Create))
{
      var formatter = new BinaryFormatter();
      formatter.Serialize(stream, firstObjectToSerialize);
      formatter.Serialize(stream, secondObjectToSerialize);
} 
```

# php - Accessing $_SESSION from within a class

> ID：11474286
> 
> 赞同：0
> 
> 时间：2012-07-13T16:12:23.847
> 
> 标签：php, oop

Any reason why I wouldn't be able to access $_SESSION vars I created in "Class A" within a different class, say "Class B"? If I var_dump outside of the Class B, its fine, but within Class B, its report undefined.

Any help would be awesome!

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:16:44.073

假设您已经在代码中的某处启动了会话 (session_start())，您应该能够从同一请求中的任何位置访问 $_SESSION 超全局变量。

如果您在单独的请求中加载 B 类，请确保您已启动会话。如果这仍然不起作用，请查看您的 php 配置。

# asp.net-mvc - Griffin 本地化和 Fluent 验证

> ID：11474293
> 
> 赞同：0
> 
> 时间：2012-07-13T16:12:45.923
> 
> 标签：asp.net-mvc, localization, fluentvalidation, griffin.mvccontrib

我是格里芬本地化的新手，看起来很酷。但是，示例仅向我展示了如何翻译 MVC 验证属性。

如果不是所有 mvc 验证属性，我正在使用最低限度。我的想法是（尝试）不要在数据层和 UI 层两次验证和报告消息。我使用 Fluent Validation 在数据层创建验证器。

您能否给我一个快速指针（如果存在）我们如何在数据层将 Griffin 本地化与 Fluent Validation 集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:09:06.547

Griffin.MvcContrib 不支持 Fluent Validation。

只是快速浏览了一下流利的验证，它似乎从 IStringSource 中提取了它的字符串。所以你基本上可以为它创建一个适配器，从 Griffin.MvcContrib 资源中读取字符串。

就像是：

```
public class FluentValidationTranslator : IStringSource 
{
    public FluentValidationTranslator(ILocalizedStringProvider griffinProvider)
    {
    }

    // implement the translation here
} 
```

# objective-c - NSAppleScript 返回值

> ID：11474299
> 
> 赞同：-1
> 
> 时间：2012-07-13T16:13:23.787
> 
> 标签：objective-c, xcode, applescript, nsmenuitem

如何从 NSAppleScript 获取返回值。我正在使用苹果脚本在 iTunes 中获取歌曲标题并获取该值并设置 NSMenuItem 的标题。

我的代码：.M

```
//run applescript
NSAppleScript *script = [[NSAppleScript alloc] initWithSource:@"tell application      \"iTunes\" to set song to name of current track"];
[script executeAndReturnError:nil];
//set menu item title
[songName setTitle:script]; 
```

我的代码：.H

```
IBOutlet NSMenuItem *songName; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:33:26.360

当你`NSAppleEventDescriptor`执行 a `NSAppleScript`(不是**NSString**。

```
NSAppleEventDescriptor *theResult = [script executeAndReturnError:nil];
//set menu item title
[songName setTitle:[theResult stringValue]]; 
```

# c# - C#结合两组不同的列表进行迭代

> ID：11474301
> 
> 赞同：1
> 
> 时间：2012-07-13T16:13:29.463
> 
> 标签：c#, linq, list

我有两个形状的列表 - 矩形和圆形。它们都共享 3 个共同属性 - ID、Type 和 Bounds

圆有 2 个额外的属性 - 范围和中心

我如何将每种类型的列表加入一个列表中，这样我就可以遍历它们，这样我就不必输入两个 foreach 循环

这可以以比合并列表更好的方式完成吗？

```
public interface IRectangle
{
    string Id { get; set; }
    GeoLocationTypes Type { get; set; }
    Bounds Bounds { get; set; }
}

public class Rectangle : IRectangle
{
    public string Id { get; set; }

    public GeoLocationTypes Type { get; set; }

    public Bounds Bounds { get; set; }
}

public interface ICircle
{
    string Id { get; set; }
    GeoLocationTypes Type { get; set; }
    Bounds Bounds { get; set; }
    float Radius { get; set; }
    Coordinates Center { get; set; }
}

public class Circle : ICircle
{
    public string Id { get; set; }

    public GeoLocationTypes Type { get; set; }

    public Bounds Bounds { get; set; }

    public float Radius { get; set; }

    public Coordinates Center { get; set; }
}

public class Bounds
{
    public Coordinates NE { get; set; }

    public Coordinates SW { get; set; }
}

public class Coordinates
{
    public float Lat { get; set; }

    public float Lng { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T16:16:48.410

制作两者`IRectangle`并`ICircle`从共享类型继承 - 说`IShape`。

然后A`List<IShape>`将能够采用任何`IRectangle`和`ICircle`类型及其继承类型。

由于`IRectangle`和`ICircle`共享许多属性，您可以这样做：

```
public interface IShape
{
    string Id { get; set; }
    GeoLocationTypes Type { get; set; }
    Bounds Bounds { get; set; }
}

public interface ICircle : IShape
{
    float Radius { get; set; }
    Coordinates Center { get; set; }
}

public interface IRectangle : IShape
{
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T16:16:47.460

创建一个包含公共属性的接口`IShape`，然后实现它以及 ICircle 和 IRectangle。（您也可以使用具有这些属性的基类）。

您应该能够加入 Circles 和 Rectangles 列表以获取 IShapes 列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T16:16:31.983

您可以进一步添加一个接口

```
public interface IShape
{
    string Id;
    GeoLocationTypes Type;
    Bounds Bounds;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T16:17:43.100

您可以让它们每个都使用 IShape 接口，或者您可以迭代对象并进行转换。

```
public interface IShape
{
    string Id { get; set; }
    GeoLocationTypes Type { get; set; }
    Bounds Bounds { get; set; }
}

public interface IRectangle : IShape { }

public class Rectangle : IRectangle
{
    // No change
}

public interface ICircle : IShape
{
    float Radius { get; set; }
    Coordinates Center { get; set; }
}

public class Circle : ICircle
{
    // No change
}

public class Bounds
{
    // No change
}

public class Coordinates
{
    // No change
} 
```

还有一个[Zip](http://msdn.microsoft.com/en-us/library/dd267698%28VS.100%29.aspx)函数可以让你枚举所有这些。

一个例子：

```
var numbers= new [] { 1, 2, 3, 4 };
var words = new [] { "one", "two", "three" };

var numbersAndWords = numbers.Zip(words, (n, w) => new { Number = n, Word = w });
foreach(var nw in numbersAndWords)
{
    Console.WriteLine(nw.Number + nw.Word);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T16:22:29.690

这个怎么样

```
var merged = Rectagles.Select(r => new { 
        r.Id, 
        r.Type, 
        r.Bounds,
        Radius = float.NaN,
        Centre = default(Coordinates) })
    .Concat(Circles.Select(c => new {
        c.Id, 
        c.Type, 
        c.Bounds,
        c.Radius,
        c.Centre })); 
```

它给出了公开所需信息的匿名类型的可枚举列表。

* * *

**编辑**

令我惊讶的是，这实际上似乎可以编译。所以有一个解决方案可以在不定义通用接口的情况下工作。然而，除了快速和肮脏之外，我会考虑多态而不是匿名。

# ruby - Ruby：使用 Flexmock 模拟文件写入

> ID：11474306
> 
> 赞同：0
> 
> 时间：2012-07-13T16:13:52.193
> 
> 标签：ruby, unit-testing, mocking

抱歉，如果之前有人问过这个问题。

一个简单的类：

```
class AskSO

  def initialize( filehandle )
    @filehandle   = filehandle
  end

  def library_start
    @filehandle << '<plist version="1.0">'
  end
end 
```

使用 Flex 模拟的简单单元测试

```
require 'rubygems'
require 'flexmock/test_unit'
require 'AskSO'
require 'test/unit'

class AskSOTest < Test::Unit::TestCase

  def setup
    @filehandle = flexmock( "filehandle", "<<" => "" )
  end

  def test_library_start
    @filehandle.should_receive( "<<" ).with( '<plist version="1.0">' ).once
    @AskSOInstance = AskSO.new( @filehandle )
    @AskSOInstance.library_start
  end
end 
```

当我运行它时，`ruby AskSO-test.rb`我得到

```
 1) Failure:
test_library_start(AskSOTest)
    [/Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/validators.rb:40:in `validate'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/expectation.rb:123:in `flexmock_verify'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/expectation.rb:122:in `each'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/expectation.rb:122:in `flexmock_verify'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/expectation_director.rb:64:in `flexmock_verify'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/expectation_director.rb:63:in `each'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/expectation_director.rb:63:in `flexmock_verify'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/core.rb:76:in `flexmock_verify'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/core.rb:75:in `each'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/core.rb:75:in `flexmock_verify'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/core.rb:191:in `flexmock_wrap'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/core.rb:74:in `flexmock_verify'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/mock_container.rb:40:in `flexmock_verify'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/mock_container.rb:39:in `each'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/mock_container.rb:39:in `flexmock_verify'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/mock_container.rb:32:in `flexmock_teardown'
     /Library/Ruby/Gems/1.8/gems/flexmock-0.9.0/lib/flexmock/test_unit.rb:26:in `teardown']:
in mock 'filehandle': method '<<("<plist version=\"1.0\">")' called incorrect number of times.
<1> expected but was
<0>. 
```

我究竟做错了什么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:33:33.760

回答我自己的问题以防其他人偶然发现同样的问题 - 将模拟定义更改为

```
def setup
  @filehandle = flexmock( "filehandle" )
end 
```

即，没有方法。出于同样的原因，这解决了问题

# ide - JDeveloper 11g 无法打开

> ID：11474309
> 
> 赞同：2
> 
> 时间：2012-07-13T16:14:08.473
> 
> 标签：ide, jdeveloper, jdeveloper-11g

我正在尝试打开 jdeveloper 11g，但它什么也没做。运行 jdev.exe 时出现以下错误

```
IDE boot startup failed.
java.lang.NoClassDefFoundError: oracle/classloader/SharedCodeSourceURL
        at oracle.ide.boot.IdeLauncher.initURLStreamHandlerFactory(IdeLauncher.j
ava:146)
        at oracle.ide.boot.IdeLauncher.launchImpl(IdeLauncher.java:87)
        at oracle.ide.boot.IdeLauncher.launch(IdeLauncher.java:65)
        at oracle.ide.boot.IdeLauncher.main(IdeLauncher.java:54)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at oracle.ide.boot.Launcher.invokeMain(Launcher.java:713)
        at oracle.ide.boot.Launcher.launchImpl(Launcher.java:115)
        at oracle.ide.boot.Launcher.launch(Launcher.java:68)
        at oracle.ide.boot.Launcher.main(Launcher.java:57)
Caused by: java.lang.ClassNotFoundException: oracle.classloader.SharedCodeSource
URL
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:305)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:246) 
```

我尝试安装 oracle 服务总线和 oracle 数据库快速版，是否有可能某些文件被覆盖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:52:19.187

尝试删除JDeveloper的系统目录应该在C:\Users\yourUser\AppData\Roaming\JDeveloper下然后重启JDeveloper

看起来它正在尝试打开一个无法通过网络访问的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T11:04:53.730

删除 system11.1.xxxx 文件夹后要做的下一件事是删除或卸载整个 JDev，然后再次安装。然后，可能被其他安装覆盖的所有文件都应恢复为原始版本。

您应该将 JDev 安装到没有空格的路径中。

蒂莫

# soa - 缓存和负载平衡方法

> ID：11474311
> 
> 赞同：0
> 
> 时间：2012-07-13T16:14:10.763
> 
> 标签：soa, distributed-caching

假设我有一个在一台服务器上运行的 WCF 服务。

现在，出于性能原因，我们在 wcf 服务上引入了一些缓存。

现在，如果我想做一些负载平衡......是否有一些现有的解决方案可以让我的缓存在不同服务器上时也可以同步？？？

我们如何处理这类问题？

也许一个解决方案是创建一个单独的 CachingService 将托管在另一台服务器上......但是如果我想对该服务进行负载平衡......我需要以某种方式同步驻留在不同机器上的那些缓存......

或者也许对缓存服务器进行负载平衡没有意义，而只有你的 wcf 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:24:14.393

是的，有许多解决方案/产品（通常）在服务器（memcached、ehcache 等）之间同步缓存。我个人发现，在位置较近的服务器引用缓存的情况下表现更好。这是缓存，其中（可能多个）缓存服务器在第一次“请求”的基础上共享负载和存储对象，然后在所有缓存服务器之间共享对对象的引用。

# windows - UpdateDriverForPlugAndPlayDevices 错误告诉我我*没有*做我正在做的事情

> ID：11474317
> 
> 赞同：4
> 
> 时间：2012-07-13T16:14:48.360
> 
> 标签：windows, setupapi

我正在研究一种安装驱动程序的方法。由于这必须在多个平台上工作，因此我会在需要时让 devcon 和 dpinst 完成驱动程序安装/更新/删除的工作。在测试时，我遇到了对 devcon 的炮击问题。为了隔离，我编写了一个小应用程序来执行 devcon 在更新中所做的事情，[请参阅此处](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544832%28v=vs.85%29.aspx)，使用 WinDDK 中的 devcon 源代码作为参考。我在使用 Setup API（实际上是 Newdev.dll 的一部分）的 UpdateDriverForPlugAndPlayDevices() 时遇到了一些问题，[请参见此处](http://msdn.microsoft.com/en-us/library/ff553534%28v=vs.85%29.aspx)。源代码在这里：

```
#include <iostream>
#include <Windows.h>
#include <newdev.h>

int main(int argc, char** argv) {
    // Go through the same steps as does dev con for this update crap
    char infFile[MAX_PATH];

    if(3 > argc) {
        std::cerr << "an INF and HW ID must be specified" << std::endl;
        return 1;
    }

    DWORD result(GetFullPathName(argv[1], MAX_PATH, infFile, NULL));
    if((result >= MAX_PATH) || (0 == result)) {
        std::cerr << "path is too long for buffer" << std::endl;
        return 1;
    }

    if(GetFileAttributes(infFile) == -1) {
        std::cerr << "file doesn't exist" << std::endl;
        return 1;
}

    BOOL reboot(FALSE);
    if(!UpdateDriverForPlugAndPlayDevices(NULL, argv[2], infFile, INSTALLFLAG_FORCE, &reboot)) {
        std::cerr << "Failed to install the driver.  Code: "
                  << GetLastError()
                  << std::endl;
        return 2;
}

    if(reboot) {
        std::cout << "A reboot is needed to complete driver install"
                  << std::endl;
    }

    return 0;
} 
```

当 UpdateDriverForPlugAndPlayDevices() 返回 false 时程序失败。然后打印由 GetLastError() 返回的错误代码，这样我就知道出了什么问题。返回的错误代码：259。根据[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)资源说这是ERROR_NO_MORE_ITEMS。根据 UpdateDriverForPlugAndPlayDevices() 的链接，此函数在以下情况下返回此错误代码：“函数找到了 HardwareId 值的匹配项，但指定的驱动程序不是比当前驱动程序更好的匹配，并且调用者没有***指定***INSTALLFLAG_FORCE 标志。” 你会从我的代码中注意到我***确实***指定了这个标志。

我不知道从这里去哪里。有人可以从这段代码中识别出我缺少什么吗？这只是一种简单的“感觉”，但我完全想念它。

谢谢你，安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:43:54.840

问题似乎不在于代码，而在于 INF 文件。有趣的是，该函数的文档说使用该标志将强制安装，但当 INF 文件没有在模型部分中“列出”任何设备类时没有。这就是我最终能够安装的方式。我将正确的设备类添加到 INF 中的模型部分。

* * *

编辑 2020 年 9 月 17 日（编辑）今天有人要求添加 INF 中的示例。我遇到这个问题已经 8 年了，我不再为这个团队工作。但是，据我所知，并大量参考[INF 模型部分](https://docs.microsoft.com/en-us/windows-hardware/drivers/install/inf-models-section)和[INF 制造商部分](https://docs.microsoft.com/en-us/windows-hardware/drivers/install/inf-manufacturer-section)的文档，我希望这会有所帮助。

本质上，类别由*模型部分*指定，模型由*制造商部分*指定。

```
[Manufacturer]
%MfgName%=Standard,NTamd64

[Standard.NTamd64]
%DeviceString%=<class path or GUID>\<device>

[Strings]
MfgName=ACME
DeviceString="Device Type" 
```

# c# - 升级应用程序时安装到同一路径

> ID：11474320
> 
> 赞同：4
> 
> 时间：2012-07-13T16:14:56.897
> 
> 标签：c#, .net, vb.net, installation, upgrade

我有一个正在实施自动更新的应用程序。我有一个程序检查的 Web 服务，如果它需要升级它下载并运行新的安装程序（Visual Studio 2005 安装项目），之后程序重新启动。一切都很好。

但是如何确保安装程序中的安装路径默认与用户最初安装程序的路径相同？

例如，如果用户将其从程序文件更改为 C:\SomeFolder，我将如何让安装程序检测到这一点并将其安装路径更改为 C:\SomeFolder 而不是程序文件？或者如果用户选择为“当前用户”而不是“所有用户”安装它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T06:42:45.523

-右击Setup Project
-View -Registry
-
在左侧，展开HKey_Local_Machine和Software并单击Manufacturer节点
-在右侧，右键单击并添加字符串注册表项
-命名注册表项InstallDir
-设置其值 `[TARGETDIR]`。

![在此处输入图像描述](../Images/1c593480da4fa7faeff0cecc14de2938.png)

**安装程序后，您可以看到 InstallDir regkey 包含该位置。您的更新程序应用程序可以使用相同的路径。**

![在此处输入图像描述](../Images/8f2a9358e0f075ef7617a4202c681a02.png)

*通常，“Just Me”和“Everyone”之间的唯一区别是创建的快捷方式的位置。您可以在安装期间运行 Process Monitor 并亲自查看。*

**编辑：**

更新程序应用程序可以通过这些步骤使用 InstallDir RegistryKey。参考：[如何：使用注册表启动条件指定目标目录](http://msdn.microsoft.com/en-us/library/h0z89y5d(v=vs.80).aspx)

-右键单击更新程序的安装项目 -查看 - 启动条件-添加 对 RegistryKey 的搜索 -将属性指定为 SEARCHFORINSTALLDIR
- 将 RegKey 指定为 SOFTWARE\ManufacturerName - 让根指向 HKLM -将值指定为 InstallDir

![在此处输入图像描述](../Images/54f68ea87ce70c41aad04338a63692c9.png)

- 添加启动条件
- 将条件指定为 SEARCHFORINSTALLDIR -
保留 InstallUrl 和消息

![在此处输入图像描述](../Images/fbe103f0ab4bac7c2049acab23c367f3.png)

-右键单击安装项目-查看- 文件系统- 选择应用程序文件夹 -按F4查看应用程序文件夹的属性-指定默认位置为[
SEARCHFORINSTALLDIR ]

![在此处输入图像描述](../Images/0eb5205c37788a0ce068533fa58c3cf1.png)

现在，当您为更新程序构建安装程序包并运行它时，它将为您提供安装路径的 InstallDir regkey 中的值。

如果您希望禁用“文件夹文本框”和“浏览”按钮以防止用户更改更新程序安装路径，您可以使用[Orca.exe](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557(v=vs.85).aspx)。Orca 是一个数据库表编辑器，用于创建和编辑 Windows Installer 包和合并模块。然后只需按照这个[设置项目，固定安装套件的位置](https://stackoverflow.com/a/2677159/495455)

* * *

另一种方法是遵循 Aaron Stebner 的[How to modify the default install path in an MSI-based setup based on a registry value](http://blogs.msdn.com/b/astebner/archive/2005/09/20/472125.aspx)

# ruby-on-rails - Rails 生产模式下的奇怪行为

> ID：11474327
> 
> 赞同：1
> 
> 时间：2012-07-13T16:15:33.523
> 
> 标签：ruby-on-rails, actionmailer, production-environment, spree

我有一个基于 Spree 电子商务平台的 Rails 3 应用程序。它发送有关不同事件（由 state_machine gem 提供支持）的确认电子邮件，例如下订单、订单批准等。在开发模式下一切正常，但在生产模式下，它发送 2 封相同的确认电子邮件而不是 1 封，在某些情况下4\. 可能是什么原因造成的？

# java - 检索在匿名内部类回调中收到的方法的结果？

> ID：11474334
> 
> 赞同：2
> 
> 时间：2012-07-13T16:15:47.300
> 
> 标签：java, gwt, scjp

我在这里有一个小问题。

```
private boolean isSomethingTrue(String param) {
    boolean result = false;
    myService.hasAlerts(param,new Callback<Boolean>(
        @Override
        public void onSuccess(Boolean hasAlerts) {
            result = hasAlerts;
        }
    });
    return result;
} 
```

在此代码中，我如何返回在回调中收到的布尔 hasAlerts？这不起作用，因为结果变量不是最终的。但是当它是最终的时，它不能被修改，所以......

我做过这样的事情：

```
private boolean isSomethingTrue(String param) {
    class ResultHolder {
        boolean result=false;
    }
    final ResultHolder resultHolder = new ResultHolder();
    myService.findBoolean(param,new Callback<Boolean>(
        @Override
        public void onSuccess(Boolean hasAlerts) {
            resultHolder.result = hasAlerts;
        }
    });
    return resultHolder.result;
} 
```

但是有没有更简单的解决方案来处理这种情况？

我在尝试调用 GWT RPC 服务时发现了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:40:16.310

我能想到一些变化——没有一个特别令人兴奋。如果您可以在其他地方使用它，您可以将结果持有者和回调合并到一个类中并使其成为静态，但这并不是真正的改进。

```
private boolean isSomethingTrue(String param) {
    class MyCallback implements Callback<Boolean> {
        boolean result = false;
        @Override
        public void onSuccess(Boolean hasAlerts) {
            result = hasAlerts;
        }
    }
    final MyCallback callback = new MyCallback();
    myService.findBoolean(param, callback);
    return callback.result;
} 
```

您可以实现一个通用的 synchronous [`Future`](http://docs.oracle.com/javase/1.7.0/docs/api/java/util/concurrent/Future.html)，但这可能会产生误导。

最后，如果您经常这样做，您可以泛化价值持有者。

```
public class Result<T> {
    private T value;
    public void set(T value) { this.value = value; }
    public T get() { return value; }
}

private boolean isSomethingTrue(String param) {
    final Result<Boolean> result = new Result<Boolean>();
    myService.findBoolean(param,new Callback<Boolean>(
        @Override
        public void onSuccess(Boolean hasAlerts) {
            result.set(hasAlerts);
        }
    });
    return result.get();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T11:28:48.400

您需要的是同步 RPC。有关详细信息，请参阅[>这里<](http://code.google.com/p/gwt-syncproxy/)和[>这里<](https://stackoverflow.com/questions/8729994/fake-a-gwt-synchronous-rpc-call)。

但我更愿意改变你的编码风格（假设你可以访问调用 isSomethingTrue() 的代码）。假设你有一些像这样调用你的方法 isSomethingTrue 的代码：

```
if(isSomethingTrue("foo")) {
    doSomeCoolStuff();
} 
```

您可以通过将其更改为以下内容来将其转换为异步编码样式：

```
isSomethingTrue("foo", new Callback<Boolean>(
    @Override
    public void onSuccess(Boolean result) {
        if(result) {
            doSomeCoolStuff();
        }
    }
}); 
```

和

```
private void isSomethingTrue(String param, Callback callback) {
    myService.hasAlerts(param,callback);
} 
```

# c# - 如何转换内文？

> ID：11474335
> 
> 赞同：0
> 
> 时间：2012-07-13T16:15:49.687
> 
> 标签：c#, visual-studio-2010, window, winapp

您好，我使用 getelementbyid 从 webbrowser 控件中检索数据。

**var element = webbrowser.document.getelementbyid(something);**

我有一个问题是不能转换为可以转换为字符串的双精度。我想知道转换是双倍的。有可能吗？

* * *

我已经试过了，但是......

输入字符串的格式不正确。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:19:52.377

Use value of html element.

Try this,

```
double d = double.Parse(webbrowser.document.getelementbyid(something).value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:29:33.010

我假设您正在尝试做这样的事情；

```
string innerHtml = webbrowser.Document.GetElementById(something).InnerHtml;
double value;

if(Double.TryParse(innerHtml, out value))
{
    // value is now populated
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:20:01.540

You could use

```
double d;
string element = webbrowser.document.getelementbyid(something).Value;
if (Double.TryParse(element, out d))
{
    // Conversion succesful: in d you find your number
} 
```

Take a look at [Double.TryParse](http://msdn.microsoft.com/it-it/library/system.double.tryparse.aspx) syntax.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T16:20:18.990

以字符串形式检索值后，您应该使用[`Double.TryParse`](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)将其解析为`double`，例如：

```
double number;

if (Double.TryParse(webbrowser.document.getelementbyid(something), out number))
{
   // ... do something useful with 'number' ...
} 
```

# javascript - 外行术语中的同源策略

> ID：11474336
> 
> 赞同：8
> 
> 时间：2012-07-13T16:15:55.207
> 
> 标签：javascript, html, same-origin-policy

有人可以帮助我更好地理解同源政策。我看过几个描述它的网站，但我正在寻找一个更简单的解释，你会如何向孩子描述它？

这个[链接](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript) 似乎做了我发现的最好的工作。任何人都可以扩展吗？有人能解释为什么这个政策存在吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-13T16:58:32.040

需要同源策略来防止[CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)。想象一下这个场景：

1.  银行经理 Joe Fatcat 在其银行的管理后台有一个帐户。该帐户使他可以访问在 TBtF 银行开户的任何人的机密帐户信息。他甚至可以重置某人的密码、转移资金、更改帐户所有权等。
2.  现在，TBtF 银行解雇了 ​​IT 专家杰克。现在他是愤愤不平的前 IT 人杰克，他想报复他的前雇主。Jack 无权访问银行的管理后台，但他知道 Joe 可以。
3.  因此，杰克向他的老板发送了一封电子邮件，其中包含指向杰克创建的页面的链接。在页面上，有一些 JavaScript，例如：

```
var xhr = new XMLHttpRequest(),
    data = "from="+victimAccount
           + "&to="+jacksAccount
           + "&amt=a+gazillion+dollars";
xhr.open("POST", "http://tbtfbank.tld/accounts/wiretransfer.aspx", true);
xhr.send(data); 
```

3.  第二天，Joe 到达他的办公室并像往常一样登录到他的管理帐户，并在后台保持选项卡处于打开状态。
4.  乔看到一封电子邮件，其中包含指向娜塔莉·波特曼（Natalie Portman）的照片的链接。所以他很自然地点击它，打开了恶意网页。
5.  浏览器在页面上运行 JavaScript 并向 TBtF 银行的管理后端站点发出 AJAX POST 请求。因为 Joe 已经登录到该站点并且有一个活动会话，所以银行应用程序接受该命令并将大量美元汇入 Jack 的离岸银行帐户。

杰克本可以很容易地使用相同的技术来收集数千个帐号和密码或银行经理可以通过他的帐户访问乔的任何其他信息。

幸运的是，同源策略在大多数情况下保护我们免受这些类型的攻击，因为 Jack 的恶意页面托管在与银行应用程序不同的域中，因此不允许对银行应用程序进行 XHR。尽管恶意页面仍可能包含向银行应用程序发出 GET 请求的图像，但重要的是不要通过 GET 请求启动具有副作用的操作，并且应用程序检查它们收到的请求的引用标头并利用反CSRF 代币。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T16:27:36.260

基本上这意味着 - 只有来自同一域的脚本才能不受限制地访问彼此的对象和属性（因此，如果您有一个`.js`定义了命名函数的文件，您可以从托管在同一域上的任何其他文件中调用它）。

因此，如果您提供来自*不同*域限制的脚本，*请*务必应用。

之所以存在此策略，是因为将链接注入到不同域中的 javascript 文件（例如一些注入此类文件的链接的 javascript 代码）太容易了。这是一个安全风险——您真的只想要来自您所在站点的代码来执行，而不仅仅是那里的任何代码。

# scala - 如果特征 A[+T] 扩展 B，我应该能够在需要 B 的地方传递 A[T] 类型的类吗？

> ID：11474337
> 
> 赞同：2
> 
> 时间：2012-07-13T16:15:59.820
> 
> 标签：scala

这是我所处的确切情况（我不想简化它，以免错过错误原因）：

在我工作的框架中有一个

```
trait RequestHeader{...} 
```

和另一个特点

```
trait Request[+A] extends RequestHeader{...} 
```

有一个函数期望接收一个类型的参数：

```
def f(arg: RequestHeader => Result) = {...} 
```

我希望能够通过

```
arg': Request[AnyContent] => Result 
```

但是，这会导致编译器抱怨。为什么是这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T16:30:25.403

[`Function1`](http://www.scala-lang.org/api/current/scala/Function1.html)它的输入类型是逆变的，如果您考虑一下，这是有道理的。考虑以下更简单的示例：

```
trait Foo
case object Bar extends Foo
case object Baz extends Foo

def f(g: Foo => Foo): Foo = g(Baz) 
```

如果我给出`f`type 的函数`Bar => Foo`，它将无法将其应用于`Baz`. `Foo => Bar`（另一方面，type 的函数会非常好。）

# objective-c - 使用委托关闭视图不起作用

> ID：11474338
> 
> 赞同：0
> 
> 时间：2012-07-13T16:16:05.863
> 
> 标签：objective-c, ios, uiviewcontroller, delegates, protocols

我正在尝试使用我不熟悉的委托来消除模态呈现的视图。我试图让它按照[这里](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html)看到的苹果文档的方式工作。到目前为止，我的代码如下：

1.  将两个视图放在情节提要上，将第一个视图连接到第二个视图与模态 segue。（到 view2 的 segue 工作正常）

2.  在第二个 viewcontroller/create 方法中创建委托以在返回时调用：

    ```
    //inside of view2ViewController.h
    @class view2ViewController;
    @protocol view2ViewControllerDelegate <NSObject>
    -(void)goBack:(OptionsViewController *)controller;
    @end

    @interface OptionsViewController : UIViewController
    @property (nonatomic, weak) id <view2ViewControllerDelegate>delegate;
    - (IBAction)return:(id)sender;//connected to button
    @end 
    ```

3.  在 view1ViewController 中实现委托`@interface view1ViewController : UIViewController <view2ViewControllerDelegate>`

4.  在 view1Controller.m 中为委托方法 goBack 编写代码

    ```
    -(void)goBack:(view2ViewController *)controller{
    [self dismissViewControllerAnimated:YES completion:nil];} 
    ```

5.  通过在 view2ViewController.m 中为返回方法编写代码来完成

    ```
    - (IBAction)return:(id)sender {
    [self.delegate goBack:self];} 
    ```

我不确定这段代码哪里出错了。返回方法被调用，但 goBack 没有被调用。我确实阅读了开发人员文档，并认为我理解了，但我想不是......

PS 我将 StackOverflow 上的所有类/变量名称更改为更通用的名称，因此如果变量名称拼写之间存在细微差异，可能是因为我输入了一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:27:07.293

我能尝试的最好的镜头 -

确保将 SplashViewController 分配为 view2ViewController 的委托。

通过代码，您可以这样做（在 SplashViewController m 文件中）：

```
view2ViewController.delegate = self; 
```

或者你可以在故事板上做。

**顺便说一句** ，我不确定调用你的函数“return”是个好主意。

# php - 如何将文件移动到另一个文件夹？

> ID：11474340
> 
> 赞同：-1
> 
> 时间：2012-07-13T16:16:09.297
> 
> 标签：php, html, forms, file, input

```
<html>
<head>
<title>Main Page</title>
</head>
<body>
<h2>Main Page</h2>
<form  method="post" action="index.php" enctype="multipart/form-data">
<input type="file" name="filename">
<input type="hidden" name="MAX_FILE_SIZE" value="102400"/>
<input type="submit"  value="Upload file">
<br>
<?php
echo $_FILES['filename']['name'];
$uploads_dir = '/uploads';
$tmp_name = $_FILES['filename']['tmp_name'][$key];
$name = $_FILES['filename']['name'][$key];
move_uploaded_file($tmp_name, "$uploads_dir/$name");
?>
</body>
</html> 
```

如何将此文件移动到文件夹？我尝试使用 move_uploaded_file 但它不适合移动......（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:17:12.080

用这个

```
echo $_FILES['filename']['name']; 
```

正如**BrianDriscoll**指出的，`MAX_FILE_SIZE`必须在文件输入字段之前声明 。

```
<form action = "index.php" method="post" enctype="multipart/form-data">
    <input type="hidden" name="MAX_FILE_SIZE" value="102400" />
    <input type="file" name="filename" />
    <input type="submit"  value="Upload file" />
</form> 
```

**$_FILES['filename']['name']** -`name`包含用户上传文件的原始路径。

**$_FILES['filename']['tmp_name']** -`tmp_name`包含驻留在服务器上的临时文件的路径。该文件应存在于服务器上具有临时名称的临时目录中。

[请参阅有关 Tizag](http://www.tizag.com/phpT/fileupload.php/)的本教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:24:02.987

您可以使用该[`$_FILES`](http://php.net/manual/en/reserved.variables.files.php)数组来获取有关上传文件的信息。

做`var_dump($_FILES)`看看它包含什么。

`$_FILES['filename']`将包含文件的信息。

*   `$_FILES['filename']['name']`作为原始文件名
*   `$_FILES['filename']['tmp_name']`作为服务器上临时文件的路径。除非您移动它，否则它将被删除！移动它使用[`move_uploaded_file()`](http://www.php.net/manual/en/function.move-uploaded-file.php)

我建议阅读[本教程](http://www.tizag.com/phpT/fileupload.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:24:58.450

除了其他人所说的之外，您**还**缺少 PHP 手册中的 MAX_FILE_SIZE 声明：

> MAX_FILE_SIZE 隐藏字段（以字节为单位）必须在文件输入字段之前，其值是 PHP 接受的最大文件大小。应始终使用此表单元素，因为它为用户节省了等待传输大文件却发现文件太大而传输失败的麻烦。请记住：在浏览器端欺骗此设置非常容易，因此切勿依赖此功能阻止更大大小的文件。它只是为应用程序客户端的用户提供的便利功能。然而，最大尺寸的 PHP 设置（在服务器端）不能被愚弄。

`<input type="hidden" name="MAX_FILE_SIZE" value="102400"/>`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-13T16:18:21.133

You need to define the action-attribute of the form.

```
<form  method="post" action="" enctype="multipart/form-data"> 
```

**edit**: and what abhshkdz wrote.

# java - Java，队列的迭代器错误。

> ID：11474343
> 
> 赞同：1
> 
> 时间：2012-07-13T16:16:13.583
> 
> 标签：java

我的代码如下。我只是在 Eclipse 中有一个警告说“Iterator 是一种原始类型。对泛型类型 Iterator 的引用应该被参数化”。这是什么意思，我该如何正确解决这个问题？

```
import java.util.Iterator;
import java.util.LinkedList;
import java.util.Queue;

public class EmployeeList 
{
    Queue<Employee> empList = new LinkedList<Employee>();

    Employee find (String nm)
    {
    Iterator it = empList.iterator(); //Iterator is a raw type. References to generic type Iterator<E> should be parameterized
    while(it.hasNext())
    {
        Employee em = (Employee)it.next();
        if(em.name.equals(nm))
        {
            return em;
        }   
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T16:16:47.183

添加到迭代器将清除警告，当您将泛型类型添加到迭代器时，您不需要在 next() 调用上显式转换，因为可以保证现在迭代器指向 Employee..

```
 Iterator<Employee> it = empList.iterator();
    while(it.hasNext())
    {
        Employee em = it.next();
        if(em.name.equals(nm))
        {
            return em;
        }   
    } 
```

# javascript - 强制浏览器刷新 CSS、JavaScript 等

> ID：11474345
> 
> 赞同：99
> 
> 时间：2012-07-13T16:16:24.757
> 
> 标签：javascript, css, browser, xampp

我正在通过 XAMPP 开发一个基于 WordPress 源代码的网站。有时我更改 CSS 代码、脚本或其他东西，我注意到我的浏览器需要时间来应用修改。这导致我使用多个浏览器来刷新一个，如果它不应用新样式，我尝试第二个，它总是这样。

有什么方法可以避免这个问题？

有时我在没有注意到以前的修改的情况下更改代码。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-07-13T16:18:33.787

## General solution

Pressing `Ctrl` + `F5` (or `Ctrl` + `Shift` + `R`) to force a cache reload. I believe Macs use `Cmd` + `Shift` + `R`.

## PHP

In PHP, you can disable the cache by setting the expiration date to a time in the past with headers:

```
header("Expires: Tue, 01 Jan 2000 00:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); 
```

## Chrome

Chrome's cache can be disabled by opening the developer tools with `F12`, clicking on the gear icon in the lower right corner and selecting Disable cache in the settings dialog, like this:

![enter image description here](../Images/4adc39e07f870b237360b6ae805f895c.png)
^(Image taken from [this answer](https://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development).)

## Firefox

Type `about:config` into the URL bar then find the entry titled `network.http.use-cache`. Set this to `false`.

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-07-13T16:23:47.507

如果您想在客户端避免这种情况，您可以`?v=1.x`在文件内容更改时添加类似 css 文件链接的内容。例如，如果`<link rel="stylesheet" type="text/css" href="css-file-name.css">`您可以将其更改为`<link rel="stylesheet" type="text/css" href="css-file-name.css?v=1.1">`这将绕过缓存。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-13T16:26:30.130

如果你会写php，你可以写：

```
<script src="foo.js<?php echo '?'.mt_rand(); ?>" ></script>
<link rel="stylesheet" type="text/css" href="foo.css<?php echo '?'.mt_rand(); ?>" />
<img src="foo.png<?php echo '?'.mt_rand(); ?>" /> 
```

它会一直刷新！

编辑：当然，这对于整个网站来说并不实用，因为您不会为所有内容手动添加它。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-10-20T21:49:15.903

检查这个：[如何强制浏览器使用我的样式表的最新版本？](https://www.impressivewebs.com/force-browser-newest-stylesheet/)

假设您的 css 文件是`foo.css`，您可以通过附加查询字符串来强制客户端使用最新版本，如下所示。

```
<link rel="stylesheet" href="foo.css?v=1.1"> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-05-30T04:49:40.313

**开发人员的观点**
如果您处于开发模式（如在原始问题中），最好的方法是通过 HTML 元标记禁用浏览器中的缓存。要使这种方法通用，您必须插入至少三个元标记，如下所示。

```
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" /> 
```

这样，您作为开发人员，只需要刷新页面即可看到更改。但是不要忘记在生产中注释该代码，毕竟缓存对您的客户来说是一件好事。

**生产模式**
因为在生产中您将允许缓存并且您的客户端不需要知道如何强制完全重新加载或任何其他技巧，所以您必须保证浏览器将加载新文件。是的，在这种情况下，我知道的最好方法是更改​​文件名。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-13T08:33:58.960

```
<script src="foo.js?<?php echo date('YmdHis',filemtime('foo.js'));?>"></script> 
```

修改后会刷新。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-06-19T09:35:28.857

而且我没有看到有人回答。这是每次加载外部css的简单技巧

```
<link rel="stylesheet" href="/myExternalCss.css?<?=time()?>"> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-26T00:04:34.600

确保这不是从您的 DNS 发生的。例如，Cloudflare 有它，您可以在其中打开开发模式，在其中强制清除样式表和图像，因为 Cloudflare 提供加速缓存。这将禁用它并强制它在每次有人访问您的网站时进行更新。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-18T12:44:50.410

代替 html-head 中的链接标签到外部 css 文件，使用 php-include：

```
<style>
<?php
include("style.css");
?>      
</style> 
```

有点黑客，但对我有用:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-12T22:09:43.317

这个 Firefox 扩展是我可以开始工作的唯一解决方案： [https ://addons.mozilla.org/en-us/firefox/addon/css-reloader/](https://addons.mozilla.org/en-us/firefox/addon/css-reloader/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-13T16:18:39.263

Try clearing your browsers cache.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-07-13T16:19:50.080

You can turn off caching with Firefox's web developer toolbar.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-12-31T15:43:21.243

我已经决定，由于浏览器不检查新版本的 css 和 js 文件，所以每当我进行更改时，我都会重命名我的 css 和 js 目录。我使用 css1 到 css9 和 js1 到 js9 作为目录名称。当我到 9 点时，我下一次从 1 点开始。这很痛苦，但每次都能完美运行。不得不告诉用户键入是荒谬的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-28T10:25:02.973

您可以使用 Firefox/Chrome 开发者工具栏：

1.  打开开发工具栏`Ctrl`+ `Shift`+`I`
2.  转到网络选项卡
3.  按下“禁用缓存”复选框（Firefox：工具栏右上角；Chrome：工具栏顶部中心）

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-01-30T02:19:30.460

如果您想确保 Chrome 为所有用户正确刷新了这些文件，那么您需要`must-revalidate`在`Cache-Control`标题中设置。这将使 Chrome 重新检查文件以查看它们是否需要重新获取。

推荐以下响应头：

```
Cache-Control: must-validate 
```

这告诉 Chrome 与服务器检查，看看是否有更新的文件。如果有更新的文件，它将在响应中接收它。如果没有，它将收到 304 响应，并保证缓存中的响应是最新的。

如果您不设置此标头，那么在没有任何其他设置使文件无效的情况下，Chrome 将*永远不会*检查服务器以查看是否有更新的版本。

这是一篇[博客文章](https://agiletribe.wordpress.com/2018/01/29/caching-for-chrome/)，进一步讨论了这个问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-11-07T18:55:05.227

上面接受的答案是正确的。但是，如果您只想定期重新加载缓存，并且您使用的是 Firefox，则 Web 开发人员工具（截至 2015 年 11 月在工具菜单项下）提供了网络选项。这包括一个重新加载按钮。选择重新加载一次缓存重置。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-09-20T07:51:25.457

我有一个案例，我需要能够创建和更改远程影响数千个客户端的样式表，但由于网络负载过重的风险，我没有关闭缓存。

因为我可以远程更改 HTML 内容，所以我将样式表与与样式表内容匹配的哈希码链接起来。

[https://example.com/contents/stylesheetctrl?id=12345&hash=-1456405808](https://example.com/contents/stylesheetctrl?id=12345&hash=-1456405808)

也就是说，我还使用客户端 javascript 函数在 HTML 内容更改时小心替换节点和属性，这意味着样式表链接标记不会被替换，只有 href 属性会更改。

此方案在 Windows 上的 Chrome、Firefox 和 Edge 以及 Android 上的 Chrome 中运行良好，但令我惊讶的是，它并不总是适用于 Android 上的网络客户端。所以我或多或少地在寻找使用javascript强制/触发更新的东西——最好不需要重新加载页面。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2017-08-18T02:30:11.133

尝试这个：

```
link href="styles/style.css?=time()" rel="stylesheet" type="text/css" 
```

如果您在“？”之后需要一些东西 每次访问页面时都会有所不同，然后`time()`就会这样做。将其永久保留在您的代码中并不是一个好主意，因为它只会减慢页面加载速度并且可能没有必要。

我发现如果您对页面布局进行了大量更改并且访问新样式表对于在屏幕上显示合理的内容至关重要，那么强制刷新样式表会很有帮助。

# css - 如何在 HTML 中编码图像？

> ID：11474346
> 
> 赞同：4
> 
> 时间：2012-07-13T16:16:25.103
> 
> 标签：css, html

如何在 HTML 中编码背景图像？例子：

```
background-image: url(data:image/gif;base64,XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX); 
```

如果我有一个图像文件，如何对其内容进行编码，然后将其转换为字符串？这和那些自定义字体服务一样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:24:19.867

您可以使用此网站转换您的图像：

[http://www.greywyvern.com/code/php/binary2base64](http://www.greywyvern.com/code/php/binary2base64)

并像这样使用它：

(X)HTML 图片嵌入示例

```
<img alt="Embedded Image" width="158" height="158" 
  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4A..." /> 
```

CSS 图像嵌入示例

```
div.image {
  width:158px;
  height:158px;
  background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4A...);
} 
```

XML 图像嵌入示例

```
<image>
  <title>An Image</title>
  <link>http://www.your.domain</link>
  <url>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4A...</url>
</image> 
```

嵌入其他东西！

数据 URI 可以潜在地存储任何类型的数据，而不仅仅是图像！试试这些例子：(X)HTML CSS Embedding Example

```
<link rel="stylesheet" type="text/css"
  href="data:text/css;base64,LyogKioqKiogVGVtcGxhdGUgKioq..." /> 
```

(X)HTML Javascript 嵌入示例

```
<script type="text/javascript"
  src="data:text/javascript;base64,dmFyIHNjT2JqMSA9IG5ldyBzY3Jv..."></script> 
```

# asp.net - mvc 应用程序需要 fpexedll.dll 吗？

> ID：11474347
> 
> 赞同：1
> 
> 时间：2012-07-13T16:16:27.487
> 
> 标签：asp.net, asp.net-mvc

我有一个我一直在开发的 mvc4 应用程序，我正准备部署它。在 VS10 中，我一直在使用“Visual Studio 开发服务器”进行开发，为了利用发布包生成器以便我可以指定目标服务器上的安装目录，我需要将项目转换为使用“本地 IIS Web 服务器”

问题是，当我进行更改并创建虚拟目录、保存、构建等...在实际加载新站点时，我收到以下错误：

```
HTTP Error 500.0 - Internal Server Error
Calling LoadLibraryEx on ISAPI filter "C:\program files\Common Files\Microsoft Shared\Web Server Extensions\50\bin\fpexedll.dll" failed
Module........ IIS Web Core 
Notification.. Unknown 
Handler....... ExtensionlessUrlHandler-Integrated-4.0 
Error Code.... 0x8007007e 
```

我无法想象我真的需要在网站的首页扩展中添加（事实上，我被告知这是不允许的）。在我的各种搜索中，我没有看到 asp.net mvc 应用程序需要这个，所以我希望我只是做了某种脑残操作。

你能建议我如何让它再次运行吗？

注意：根据错误信息，我应该检查isapi dll的路径是否正确，以及web.config是否具有良好的权限，以及日志等。我已经完成了所有这些并且没有发现任何*我*发现不正常的东西，但这并不意味着我仍然没有遗漏一些明显的东西......

现在，该`C:\program files\Common Files\Microsoft Shared\Web Server Extensions\50\bin\fpexedll.dll`文件不存在，但我不希望它存在。我怎样才能摆脱对它的要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:38:50.697

dll 很可能是不必要的。

进入 IIS 7.5，单击有问题的网站。然后，在对话框窗口中心的 IIS 分组下，双击 ISAPI Filters。

删除有问题的过滤器。

繁荣！完毕。

# xcode - 将 CVS 文件放入 NSArray 以使用 core-plot 库绘制图形

> ID：11474349
> 
> 赞同：0
> 
> 时间：2012-07-13T16:16:40.640
> 
> 标签：xcode, excel, csv, nsarray, core-plot

我正在尝试使用带有 x 和 y 值的简单 excel csv 文件并将其放入 NSArray 中，以便我可以使用它来使用 core-plot 绘制散点图。我已经设置了代码来显示带有某些数据图的图表：

**JACViewController.m**

```
#import "JACViewController.h"
@implementation JACViewController
@synthesize scatterPlot;

- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];

NSMutableArray *data = [NSMutableArray array];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(-10, 100)]];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(-8, 50)]];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(-6, 20)]];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(-4, 10)]];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(-2, 5)]];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(0, 0)]];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(2, 4)]];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(4, 16)]];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(6, 36)]];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(8, 64)]];
[data addObject:[NSValue valueWithCGPoint:CGPointMake(10, 100)]];

self.scatterPlot = [[JACSimpleScatterPlot alloc] initWithHostingView:_graphHostingView andData:data];
[self.scatterPlot initialisePlot];
}

@end 
```

但现在我想使用 excel 中的 CSV 文件并显示我从那里获得的数据。

Excel 文件如下所示：

a1= "数据 X" b1= "数据 Y" a2:a8=(1,2,3,4,5,6,7) b2:b8=(10,20,30,40,50,60,70)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:35:11.367

假设您的数据导出为 UTF8 文本。将指向 CSV 文档的 URL 传递到此调用中。

您可以使用

`NSString *exceldata = [NSString stringWithContentsOfURL:aurl encoding:NSUTF8StringEncoding error:&error];`

获取数据然后将字符串拆分为行

`NSArray *lines = [exceldata componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];`

最后每一行都可以拆分成组件

```
NSMutableArray *plotdata = [NSMutableArray array];
for(NSString *line in lines)
{
NSArray *points = [line componentsSeparatedByString:@","];
CGFloat xpoint = [[points objectAtIndex:0] floatValue];
CGFloat ypoint = [[points objectAtIndex:1] floatValue];

[plotdata addObject:[NSValue valueWithCGPoint:CGPointMake(xpoint,ypoint)]];
} 
```

这忽略了第 0 行是标题，并且空行或格式错误的行会使例程崩溃，但会显示您需要执行的基本代码。

# .net - 删除父级时如何避免绑定错误

> ID：11474351
> 
> 赞同：5
> 
> 时间：2012-07-13T16:16:41.280
> 
> 标签：.net, wpf, xaml, binding, styles

我正在开发一个 WPF 项目，并且正在创建一些样式，其中之一就是`DataGridCell`样式，它工作正常。

我的问题是：**当用户删除任何行时，Visual Studio 的输出窗口中会显示许多错误。**

这是错误：

```
System.Windows.Data Warning: 4 : Cannot find source for binding with reference 
 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.DataGrid', 
 AncestorLevel='1''.
 BindingExpression:Path=CanUserAddRows; DataItem=null; target element is 'DataGridCell' 
 (Name=''); target property is 'NoTarget' (type 'Object') 
```

所以，我猜这个错误是因为当从`DataGridCell`中删除时`DataGrid`，绑定找不到父，但是，**我该怎么做才能避免出现这些错误？我的意思是，我怎样才能为绑定建立条件？**

我的 XAML 样式代码如下：

```
<DataGrid Margin="6,25,6,35" x:Name="dataGrid">            
        <DataGrid.CellStyle>
            <Style TargetType="{x:Type DataGridCell}">
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}, Path=CanUserAddRows}" Value="False" />
                            <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsSelected}" Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Background" Value="#A4A4A4"/>
                    </MultiDataTrigger>
. . . . . 
```

希望有人可以帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:12:31.717

我也遇到过这类问题，设置[TargetNullValue](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.targetnullvalue.aspx)和[FallbackValue](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.fallbackvalue.aspx)大部分时间都可以摆脱这些绑定错误。

```
<MultiDataTrigger.Conditions> 
   <Condition Binding="{Binding RelativeSource={RelativeSource FindAncestor, 
                         AncestorType= {x:Type DataGrid}}, Path=CanUserAddRows, 
                         TargetNullValue=False, FallbackValue=False}" Value="False" /> 
   <Condition Binding="{Binding RelativeSource={RelativeSource Self}, 
                         Path=IsSelected, TargetNullValue=False, 
                         FallbackValue=False}" Value="True" /> 
</MultiDataTrigger.Conditions> 
```

一般来说，我也尽量减少使用，`RelativeSource`尽可能的使用`DataContext`。

# ruby-on-rails-3.1 - Rails 共享控制器功能和菜单

> ID：11474353
> 
> 赞同：0
> 
> 时间：2012-07-13T16:16:44.117
> 
> 标签：ruby-on-rails-3.1

抱歉，如果这看起来很愚蠢（最近睡眠不多），但我正在尝试找出在控制器之间共享控制器（和方法）功能的最佳方法，而无需为每个控制器编写相同的代码。

假设我有各种具有相同方法的控制器，称为`search`. 在此方法中，对于不同的控制器，我有相同术语的情况，例如：

```
 case term
      when "beginning_parens"
       @books = Book.where("title REGEXP ? AND localeLanguage LIKE ?", '^\\([0-9]*\\)', params[:language]).not_locked.reorder(order).paginate(:page => params[:page])
      when 'search_all_caps'
       @books = Book.detect_uppercase.not_locked.reorder(order).where("localeLanguage LIKE ?", params[:language]).paginate(:page => params[:page]) 
```

现在我不想为每个控制器编写所有这些。而且我不想将 , 等传递`params[:language]`给`paginate`每个案例，因为我希望每个案例都按语言搜索并分页。

或者当然，实例变量会在控制器之间改变，而不是`@books`我们会有`@dvds`,`@games`等。

我还发现自己必须通过`params`菜单链接中的所有内容：

```
= link_to 'with all CAPS', books_search_path(:term => 'search_all_caps', :language => params[:language]) 
```

而且我确信必须有更好的方法来做到这一点。

我已经在使用我在每个模型顶部调用的文件共享模型的常用方法`extend ModelFunctions`。该文件包含`detect_uppercase`上面使用的方法，并且在许多控制器中都很常见。所以至少我有那部分工作:)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:52:31.837

如果你要编写一堆做同样事情的控制器，看起来继承可能是这里的方法。

制作一个控制器（我们称它为`BaseController`）并为其提供您希望其他控制器拥有的所有方法。然后，您的每个其他控制器都可以继承`BaseController`并覆盖您需要它们的方法，并为要搜索的模型、要设置的实例变量等设置类变量。例如：

```
 class BaseController < ActionController::Base
    def search
      @@model.where("title REGEXP ? AND localelanguage ...")
    end
  end

  class BooksController < BaseController
    @@model = Book
  end 
```

# c# - DirectShow IVMRSurfaceAllocator9 (YUV Mixing) DirectX 丢失设备

> ID：11474355
> 
> 赞同：2
> 
> 时间：2012-07-13T16:16:44.443
> 
> 标签：c#, directx, directshow

我使用自定义`IVMRSurfaceAllocator9`在 DirectX9 应用程序中呈现来自 DirectShow 的视频。我一直在尝试为我的 DirectX 设备实例处理丢失的设备（当 HDMI [un] 插入时）。我释放所有依赖于 DX 设备的资源（纹理、表面等），重置 DX 设备，然后重新加载这些资源。我这样做很好，一切都重新开始渲染（期待视频）；当涉及到自定义 IVMRSurfaceAlloctor9 时，我遇到了问题。我尝试了三种不同的方法。

每次，视频都只是黑色（或我清除表面的任何其他颜色）

遵循 MSDN 文档： [为 VMR-9 提供自定义分配器演示器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407172%28v=vs.85%29.aspx) 我在该页面上完成了每一步，起初我没有使用`IVMRSurfaceAllocatorNotify9::AllocateSurfaceHelper`创建表面；但我也改用它，但没有结果。当我打电话时`IVMRSurfaceAllocatorNotify9::ChangeD3DDevice`，它会打电话给`IVMRSurfaceAllocator9::InitializeDevice`。我会重新创建表面，一切都很好。然后它开始调用`IVMRSurfaceAllocator9::GetSurface`，并`IVMRSurfaceAllocator9::PresentImage`使用正确的参数，就像丢失设备和重置之前一样

Google 调查结果： [VMR9 和丢失的设备](http://www.tech-archive.net/Archive/Development/microsoft.public.win32.programmer.directx.video/2007-06/msg00127.html) 我发现一些帖子说要断开引脚与源过滤器和 VMR9 过滤器的连接，然后重新连接它们。我这样做了，结果和以前一样。我什至更进一步，我完全移除了 VMR9 过滤器，将其丢弃并创建了一个新的过滤器以放置在它的位置，结果相同。

GraphEdit：经过很多想法后，我最终开始认为视频解码器可能会提供空白图像（因为这不仅仅是一个普通的丢失设备，我完全丢失了显示器/适配器并且必须在新设备上重新创建 DX 设备[主要] 适配器）。[因此，我在Windows SDK 图形编辑工具](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407274%28v=vs.85%29.aspx)中重新创建了 DirectShow 图形并强制丢失设备（[un]plug hdmi），VMR9 窗口可以很好地处理它；但在第一次尝试时，我没有像在应用程序中那样设置 VMR 混音器设置（使用`IVMRMixerControl9::SetMixingPrefs`）。我在 Graph Edit 工具中更改了 VMR9 过滤器设置以进行 YUV 混合并再次强制丢失设备，令我沮丧的是，VMR9 窗口变黑并保持黑色；与我的应用程序中的结果相同。

在将我的应用程序切换到 RGB 混合并重置 DX 设备后，视频不再是黑色的，并且继续像什么都没发生过一样。

所以我的问题是，为什么在 YUV 混合模式下，我的自定义 IVMRSurfaceAllocator9（也不是默认分配器）在丢失 DX 设备后无法正确重新初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:52:59.160

根据我使用 VMR7 和 VMR9 的经验，YUV 混合纯粹是为了[减少所需的内存带宽](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391026%28v=vs.85%29.aspx)。我想很多处理都是由当前机器上的 GPU 直接执行的，GPU 驱动程序管道的 YUV 部分很可能无法像经过充分测试和广泛使用的 RGB 对应部分那样正常工作。

您是否尝试过将 YUV 与参考光栅化器或其他一些设备一起使用以确保正确性，而不是速度（作为测试）？我认为它会正常工作。

# java - JTextArea/JTextComponent setText 导致崩溃

> ID：11474361
> 
> 赞同：5
> 
> 时间：2012-07-13T16:17:00.417
> 
> 标签：java, swing, settext

一般来说，我是 Java 新手，尤其是 Swing 库。当我尝试使用记事本演示（来自 JDK 的标准演示）时，尝试更改编辑器窗口中的文本时发生了崩溃。我的示例代码：

```
void Filter(Component f){
  if (f instanceof JTextComponent){
    JTextComponent textComponent = (JTextComponent) f;
    textComponent.setVisible(false); //Works
    textComponent.setVisible(true); //Works
    textComponent.getText(); //Works
    textComponent.updateUI(); //Works
    textComponent.setText("Hello world!"); //Crashes
  }else{
    RecursiveGet(f);
  }
}
void RecursiveGet(Component c){
  for (Component f : ((JComponent) c).getComponents()) {
    if (f instanceof JComponent) {
      Filter(f);
    }
  }
} 
```

我搜索了例如**JTextComponent**，直到找到它然后测试了一些方法。我想我遗漏了一些东西，一些细节。我的环境 JDK 1.7、JRE 7.0、Win7 x64。我很乐意得到任何帮助。谢谢你。

**更新** 我添加异常处理程序

```
void Filter(Component f){
        if (f instanceof JTextComponent){
            JTextComponent textComponent = (JTextComponent) f;
            textComponent.setVisible(false);  //Work
            textComponent.setVisible(true);  //Work
            textComponent.getText();  //Work
            textComponent.updateUI(); //Work
            try {
            textComponent.setText("Hello world!"); //Crash
            } catch (Exception e) {
                e.printStackTrace();
            }
        }else{
            RecursiveGet(f);
        }
    } 
```

得到这个..

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
        at javax.swing.plaf.synth.SynthContext.getPainter(Unknown Source)
        at javax.swing.plaf.synth.SynthTextAreaUI.update(Unknown Source)
        at javax.swing.JComponent.paintComponent(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JViewport.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JComponent.paintToOffscreen(Unknown Source)
        at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown S
ource)
        at javax.swing.RepaintManager$PaintManager.paint(Unknown Source)
        at javax.swing.RepaintManager.paint(Unknown Source)
        at javax.swing.JComponent._paintImmediately(Unknown Source)
        at javax.swing.JComponent.paintImmediately(Unknown Source)
        at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
        at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
        at javax.swing.RepaintManager.prePaintDirtyRegions(Unknown Source)
        at javax.swing.RepaintManager.access$700(Unknown Source)
        at javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)
        at java.awt.event.InvocationEvent.dispatch(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$000(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source) 
```

**添加异常处理程序块后**更新 2 setText 方法工作。**但我想念什么？**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:52:57.017

这不是答案，而是显示您的方法或其变体（允许编码人员更改要发布的文本）有效的代码帖子：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import javax.swing.*;
import javax.swing.text.*;

@SuppressWarnings("serial")
public class TestFilter extends JPanel {
   public TestFilter() {
      JPanel textFieldPanel = new JPanel(new GridLayout(0, 3));
      for (int i = 0; i < 15; i++) {
         textFieldPanel.add(new JTextField(10));
      }

      JPanel buttonPanel = new JPanel();
      buttonPanel.add(new JButton(new FilterAction("Show Text", "Hello World")));
      buttonPanel.add(new JButton(new FilterAction("Clear Text", "")));

      setLayout(new BorderLayout());
      add(textFieldPanel, BorderLayout.NORTH);
      add(new JScrollPane(new JTextArea(10, 15)));
      add(buttonPanel, BorderLayout.SOUTH);
   }

   private class FilterAction extends AbstractAction {
      private String text;

      public FilterAction(String name, String text) {
         super(name);
         this.text = text;
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         filter(TestFilter.this, text);
      }
   }

   void filter(Component f, String text) {
      if (f instanceof JTextComponent) {
         JTextComponent textComponent = (JTextComponent) f;
         textComponent.setVisible(false); // Works
         textComponent.setVisible(true); // Works
         textComponent.getText(); // Works
         textComponent.updateUI(); // Works
         textComponent.setText(text); // Crashes
      } else {
         RecursiveGet(f, text);
      }
   }

   void RecursiveGet(Component c, String text) {
      for (Component f : ((JComponent) c).getComponents()) {
         if (f instanceof JComponent) {
            filter(f, text);
         }
      }
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("TestFilter");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new TestFilter());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

因此，问题可能在于您如何调用您的方法，而您尚未向我们展示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:27:54.983

根据您对原始问题的评论，

> “[...] 它在另一个线程中工作 [s]，但 [原始] 线程在创建所有对象后开始 [s]..”

所有修改 Swing 组件的代码都必须在事件分派线程中运行。如果你等到所有东西都被创建是不够的。

```
java.awt.EventQueue.invokeLater(new Runnable() {
    public void run() {
        // modify swing components
    }
}); 
```

您可能想阅读以下内容：[Java Event-Dispatching Thread 解释](https://stackoverflow.com/questions/7217013/java-event-dispatching-thread-explanation)

...还有这个：[Java：Swing 库和线程安全](https://stackoverflow.com/questions/182316/java-swing-libraries-thread-safety)**

# c++ - 命令行参数问题

> ID：11474364
> 
> 赞同：0
> 
> 时间：2012-07-13T16:17:24.183
> 
> 标签：c++, command-line-arguments

我正在尝试在我的代码中实现命令行选项。出于某种原因，我的 -a 选项可以正常工作，但我的 -c 选项不能正常工作，即使它们基本相同。当我尝试使用 -c 选项运行我的代码时，我收到以下消息。

```
terminate called after throwing an instance of 'std::logic_error'
what():  basic_string::_S_construct NULL not valid
Aborted 
```

下面是我的代码。

```
int c;
std::string config = def+std::string("SamplesConfig.xml");
std::string cal = def+std::string("calibration.bin");
while ((c = getopt(argc, argv, "a:c"))>=0)
{
    switch(c)
    {
        case 'a':
        {
            config = std::string(optarg);
            printf("%s", (char *)config.c_str());
            break;
        }
        case 'c':
        {
            cal = std::string(optarg);
            printf("%s", (char *)cal.c_str());
            break;
        }
        default:
        {
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:42:46.200

你不应该打电话给 getopt("a:b:c:") 吗？我想你已经指定了 c，当它到达那个点时 optarg 将为空。

# python - Shell文本到python字符串

> ID：11474369
> 
> 赞同：2
> 
> 时间：2012-07-13T16:17:59.210
> 
> 标签：python, shell, documentation

我正在编写一个小的 python 实用程序来帮助将我们的 shell`-help`文档移动到可搜索的网页，但我遇到了一个奇怪的问题：

```
output = subprocess.Popen([sys.argv[1], '--help'],stdout=subprocess.PIPE).communicate()[0]
output = output.split('\n')
print output[4]
#NAME
for l in output[4]:
    print l
#N
#A
#
#A
#M
#
#M
#E
#
#E

#or when written, n?na?am?me?e 
```

它对`heading/subheading`文档中的任何内容都执行此操作，这使其几乎无法使用。

有关获得正确格式的任何提示？我哪里搞砸了？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:26:01.703

该文档包含以古老的行打印机方式完成的过度字符：打印每个字符，然后是退格键（`\b`aka `\x08`），然后再次是相同的字符。所以“NAME”变成了`"N\bNA\bAM\bME\bE"`。如果您可以说服程序*不要那样*输出，那将是最好的；否则，你可以用类似的东西清理它`output = re.sub(r'\x08.', '', output)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:23:17.817

在终端中将字符标记为粗体的一种常用方法是打印字符，然后是退格字符，然后是字符本身（就像在机械打字机上那样）。终端仿真器喜欢`xterm`检测此类序列并将其转换为粗体字符。如果标准输出不是终端，程序不应该打印这样的序列，但如果你的工具是这样，你将不得不自己清理混乱。

# c# - 从 List 生成最长 X 长度的所有组合 字数

> ID：11474377
> 
> 赞同：1
> 
> 时间：2012-07-13T16:18:26.447
> 
> 标签：c#, asp.net, .net

我将如何从源中生成不超过一定长度的所有单词组合的列表`List<string>`？

例如，`List<string>`我需要将 a 转换为 10,600 多个单词`List<List<string>>`，但是，子列表只需要包含不超过并包括给定最大长度的组合，对于这个例子，我会说 3。

我不关心单词在子列表中出现的顺序。例如，我只需要列表中的以下一项：

```
"laptop", "computer", "reviews" 
"laptop", "reviews", "computer"
"computer", "laptop", "reviews" 
"computer" "reviews", "laptop"
"reviews", "computer", "laptop" 
"reviews", "laptop", "computer" 
```

考虑到我需要生成大量组合，它甚至可能吗？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T16:43:30.227

首先，我不确定您是否真的要生成如此庞大的列表。如果你真的这样做，那么我建议你考虑使用[迭代器](http://msdn.microsoft.com/ru-ru/library/dscyy5s0.aspx)来生成惰性列表，而不是这个巨大的列表：

```
static void Main()
{
    var words = new List<string> {"w1", "w2", "w3", "w4", "w5", "w6", "w7"};

    foreach (var list in Generate(words, 3))
    {
        Console.WriteLine(string.Join(", ", list));
    }
}

static IEnumerable<List<string>> Generate(List<string> words, int length, int ix = 0, int[] indexes = null)
{
    indexes = indexes ?? Enumerable.Range(0, length).ToArray();

    if (ix > 0)
        yield return indexes.Take(ix).Select(x => words[x]).ToList();

    if (ix > length)
        yield break;

    if (ix == length)
    {
        yield return indexes.Select(x => words[x]).ToList();
    }
    else
    {
        for (int jx = ix > 0 ? indexes[ix-1]+1 : 0; jx < words.Count; jx++)
        {
            indexes[ix] = jx;
            foreach (var list in Generate(words, length, ix + 1, indexes))
                yield return list;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:26:29.553

希望我没有弄乱任何东西。

```
for(int i = 0; i < list.Count; i ++)
{
  list1 = new List<string> { list[i] };
  listcombinations.Add(list1);
  for(int j = i + 1; j < list.Count; j ++)
  {
    list1 = new List<string> { list[i], list[j] };
    listcombinations.Add(list1);
    for(int k = j + 1; k < list.Count; k ++)
    {
      list1 = new List<string> { list[i], list[j], list[k] };
      listcombinations.Add(list1);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:34:47.877

我想问题主要是检查列表中是否已经存在单词组合：

你可以为此做些什么：

```
//generate a dictionary with key hashcode / value list of string
Dictionary<int, List<string>> validCombinations= new Dictionary<int, List<string>>();

//generating anyway your combinations (looping through the words)
List<string> combinationToCheck = new List<string>(){"reviews", "laptop", "computer"};

//sort the words
combinationToCheck.Sort();
string combined = String.Join("", combinationToCheck.ToArray());

//calculate a hash
int hashCode = combined.GetHashCode();

//add the combination if the same hash doesnt exist yet
if(!validCombinations.ContainsKey(hashCode))
    validCombinations.Add(hashCode, combinationToCheck); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T13:04:02.273

```
private List<List<string>> GetCombinations()
{

    List<List<string>> mResult= new List<List<string>>();

    for (int i = 0; i < mList.Count; i++)
    {
        for (int k = 0; k < mList.Count; k++)
        {
            if (i == k) continue;

            List<string> tmpList = new List<string>();

            tmpList.Add(mList[i]);
            int mCount = 1;
            int j = k;
            while (true)
            {

                if (j >= mList.Count) j = 0;
                if (i != j)
                {

                    tmpList.Add(mList[j]);
                    mCount++;
                }
                j += 1;
                if (mCount >= mList.Count) break;
            }

            mResult.Add(tmpList);
        }

    }
    return mResult;
} 
```

# ruby - Rails controllers and "protected" variables involving inheritance

> ID：11474378
> 
> 赞同：0
> 
> 时间：2012-07-13T16:18:30.193
> 
> 标签：ruby, ruby-on-rails-3, scope

I would like to declare a variable in my `application_controller.rb` controller that is accessible to all controllers that inherit from it. if possible I would like the variable only accessible in the child classes, nowhere else, including the views (unless specifically passed into the view).

I am new to Ruby and Rails and am unsure if the "protected" scope exists for variables, I have seen that it does for functions. I have not been able to find a simple answer and I have been experimenting a little in my app with different ways to declare variables and where they can be accessed. That has provided me with no information about how I can accomplish this.

Any help would be greatly appreciated.

**Code:**

```
class ApplicationController < ActionController::Base
    protect_from_forgery
    @admin_name = "AdminUserName"
    @admin_password = "AdminPassword"
end

class ProjectsController < ApplicationController
    http_basic_authenticate_with :name => @admin_name, :password => @admin_password, :except => [:index, :show]

    # controller functions here
end 
```

This does not seem to be working for me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:44:28.793

正如您所认识到的，ruby 中的变量不存在类似受保护范围的东西。您可以在 Rails 中使用[实例变量](http://www.thesatya.com/blog/2009/06/rails_instance_variables.html)来设置视图可访问的控制器中的变量。这是一个旧的 Rails 功能，[您可以在视图中使用控制器中设置的实例变量](http://www.stephencelis.com/2008/09/06/rails-controllers-views-and-variables.html)。

实例变量从一个实例继承到另一个实例

```
class A
  def make_ivar
    @foo = 'bar'
  end
end

class B < A
  def get_ivar
    @foo
  end
end

b = B.new
b.make_ivar
b.get_ivar #=> @foo 
```

但请注意，通过将实例变量传递给视图 rails[会破坏封装](https://stackoverflow.com/questions/9384649/why-use-instance-variables-to-connect-controllers-with-views)，并且通过所有部分使用它[可能不是好的做法](https://softwareengineering.stackexchange.com/questions/127838/why-do-people-suggest-not-to-use-instance-variable-for-views-in-ruby-on-rails)。最重要的是，[一旦实例变量出现在视图中，就用局部变量替换它们](http://rails-bestpractices.com/posts/27-replace-instance-variable-with-local-variable)

**更新**

在您的情况下，请使用[constants](http://rubylearning.com/satishtalim/ruby_constants.html)。常量在定义它们的类的范围内并被继承，但它们对视图不可用，除非使用范围调用

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  ADMIN_NAME = "AdminUserName"
  ADMIN_PW = "AdminPassword"
end

class ProjectsController < ApplicationController
  http_basic_authenticate_with :name => ADMIN_NAME, :password => ADMIN_PW, :except => [:index, :show]

  # controller functions here
end 
```

我猜你不想在视图中调用它们。如果你真的想这样做，你可以这样做：

```
ApplicationController::ADMIN_NAME 
```

# javascript - date error for date class google appscript

> ID：11474381
> 
> 赞同：0
> 
> 时间：2012-07-13T16:18:37.750
> 
> 标签：javascript, google-apps-script

The problem that i am having here is that when i minus back to then end of the month, instead of going back to the 29 or 28 of last month the program starts to minus months instead of days. Bellow is my full code and below that is the output it produces in the google spread sheet.

```
function trying(){ 

  var date = new Date(); 
  var datechange = new Date();
  var array = new Array(7);

 for (var i = 0; i < 7; i++) {
    array[i] = new Array(0);
  }

  for ( var i = 0; i < 7; i++){ 
   days = i + 8
   datechange.setDate(date.getDate() - days);
   var tabName = Utilities.formatDate(datechange, 'MST', 'yyyy-MM-dd').toString(); 
       array[i][0] = tabName;
    }

  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Want");
  sheet.getRange("B2:B8").setValues(array); 

} 
```

This are the dates that are produced.

05/07/2012 04/07/2012 03/07/2012 02/07/2012 01/07/2012 30/06/2012 30/05/2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:15:04.170

Date.getDate() returns the date (1-31) - so what you are doing is not correct.

Instead try this:

```
var ONE_DAY = 24 * 60 * 60 * 1000; //in milliseconds
for ( var i = 0; i < 7; i++){ 
  days = i + 8
  datechange.setDate(date.getTime() - (days * ONE_DAY));
  var tabName = Utilities.formatDate(datechange, 'MST', 'yyyy-MM-dd').toString(); 
     array[i][0] = tabName;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:55:23.877

您必须`datechange`在循环内部定义，而不是在外部定义：

```
var date = new Date();

for ( var i = 0; i < 30; i++){ 
   days = i + 8
   var datechange = new Date();
   datechange.setDate(date.getDate() - i);
   console.log(datechange);
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:56:51.910

这就是 JavaScript 日期的工作方式。请参阅[此处](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)了解完整详情。

# c++ - C++ and Objc Build Errors

> ID：11474385
> 
> 赞同：0
> 
> 时间：2012-07-13T16:18:57.227
> 
> 标签：c++, objective-c, ios, xcode4

I have been trying to add MobileSynth to my application for some time now and I am only running into errors.

I have followed the steps [here](http://yannickloriot.com/2011/04/how-to-install-zxing-in-xcode-4/) which explain how to add a project into another one.

When I compile, both projects are compiled correctly without errors, but the moment I try import the code into my objective C source code I get a large number of errors.

This is a screenshot of the errors. ![enter image description here](../Images/4a0c7b9256941c8a4725d61c27fba957.png)

![enter image description here](../Images/84231c8e05a0b208754789c50059be28.png)

Im sure there are more errors than these as there seems to be something wrong with the dependencies.

I also approved Xcodes recommendation to convert the project 2 (containing the objective C viewcontrollers with .mm extensions and the .cpp files) from an old 3.something version to the version 4 project type, and made the snapshot. Didnt seem to change anything.

I am not sure how to solve these issues. I would really appreciate any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:20:12.587

您知道使用 C++ 的文件需要 .mm 扩展名。您还需要考虑导入依赖项。由于此标头包含 C++，因此导入它的任何其他文件也需要具有 .mm 扩展名。我几乎可以肯定这就是发生在你身上的事情。

出于这个原因，我通常会尝试将 C++ 隔离到实现文件中。

此外，为了澄清以前的建议：

```
// Correct
namespace synth { class something; }

// Incorrect
using namespace synth { class something; } 

// Optional
namespace synth { class something; }
using namespace synth; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:21:09.917

使用`using namespace`而不是`namespace`.

# eclipse - Scala、Maven、Sbt 和 Eclipse

> ID：11474388
> 
> 赞同：4
> 
> 时间：2012-07-13T16:19:09.300
> 
> 标签：eclipse, scala, maven, sbt

我想知道同时使用 Sbt 和 Eclipse 的最有效方法是什么？似乎有一个[Sbt Eclipse 插件](https://github.com/typesafehub/sbteclipse/)，但是生成 eclipse 配置的一般推荐的工作流是什么？然后通过 Eclipse 中的 Eclipse Maven 插件添加依赖项似乎有点错误？那是人们通常做的吗？

对生态系统来说有点新，所以也许我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T16:21:59.150

我通过 sbt 配置文件添加 maven 依赖项。然后在每次修改后重新生成 eclipse 项目，保持 sbt 配置作为最终的项目规范。我怀疑这是运行设置的唯一明智的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:18:49.513

我将 IvyDE 插件用于带有 sbt deliver-local 的 Eclipse。

这里的优点是它可以轻松地为您提供不同配置的单独类路径容器，并且您不需要定期对 Eclipse 项目设置进行吹嘘。

如果 scala-ide 支持与 sbt 更紧密的集成，那就太好了。

# python - Is there go up line character? (Opposite of \n)

> ID：11474391
> 
> 赞同：87
> 
> 时间：2012-07-13T16:19:33.470
> 
> 标签：python, c++, terminal, console

I would like to overwrite something on a line above in a serial console. Is there a character that allows me to move up?

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-07-13T16:26:50.013

大多数终端都理解[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)。此用例的相关代码：

*   `"\033[F"`– 将光标移动到上一行的开头
*   `"\033[A"`– 将光标上移一行

示例（Python）：

```
print("\033[FMy text overwriting the previous line.") 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-13T16:20:09.150

No, not really easily, for that you'd have to use something like the [curses library](http://docs.python.org/library/curses.html), especially if you want to have more control over cursor placement and do more things programatically.

Here's a link for the Python docs on [Programming with Curses](http://docs.python.org/howto/curses.html), and this short [tutorial/example](https://web.archive.org/web/20170108081234/http://www.dev-explorer.com/articles/python-with-curses) might be of interest too.

I just found this note in the [docs](http://docs.python.org/howto/curses.html) in case you are using Windows:

> No one has made a Windows port of the curses module. On a Windows platform, try the Console module written by Fredrik Lundh. The Console module provides cursor-addressable text output, plus full support for mouse and keyboard input, and is available from [http://effbot.org/zone/console-index.htm](http://effbot.org/zone/console-index.htm).

I believe for C++ there is the [NCurses](http://hughm.cs.ukzn.ac.za/~murrellh/os/notes/ncurses.html) library, the linked page has a section on [moving the cursor](http://hughm.cs.ukzn.ac.za/~murrellh/os/notes/ncurses.html#cursor) if you want to poke around with C++. Also there's the [NCurses Programming HowTo](http://www.bigwebmaster.com/General/Howtos/NCURSES-Programming-HOWTO/).

*Long* time ago I used the curses library with C quite successfully.

**Update**:

I missed the part about running this on a terminal/serially, for that the ANSI escape sequence, especially for a simple task like yours, will be easiest and I agree with @SvenMarnach solution for this.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-26T07:45:57.680

```
for i in range(10):  
    print("Loading" + "." * i) 

    doSomeTimeConsumingProcessing()

    sys.stdout.write("\033[F") # Cursor up one lin 
```

在 Python 中尝试这个并用任何需要的例程替换 doSomeTimeConsumingProcessing()，希望它有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-27T10:39:42.270

我可能错了，但是：

```
#include <windows.h>

void gotoxy ( int column, int line )
{
  COORD coord;
  coord.X = column;
  coord.Y = line;
  SetConsoleCursorPosition(
    GetStdHandle( STD_OUTPUT_HANDLE ),
    coord
    );
} 
```

在 Windows 标准控制台中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-14T20:19:36.820

回车可用于转到行首，而 ANSI 代码`ESC A`( `"\033[A"`) 可将您带上一行。这适用于 Linux。它可以在 Windows 上使用该`colorama`包启用 ANSI 代码：

```
import time
import sys
import colorama

colorama.init()

print("Line 1")
time.sleep(1)
print("Line 2")
time.sleep(1)
print("Line 3 (no eol)", end="")
sys.stdout.flush()
time.sleep(1)
print("\rLine 3 the sequel")
time.sleep(1)
print("\033[ALine 3 the second sequel")
time.sleep(1)
print("\033[A\033[A\033[ALine 1 the sequel")
time.sleep(1)
print()  # skip two lines so that lines 2 and 3 don't get overwritten by the next console prompt
print() 
```

输出：

```
> python3 multiline.py
Line 1 the sequel
Line 2
Line 3 the second sequel
> 
```

[在幕后](https://docs.microsoft.com/en-us/windows/console/console-virtual-terminal-sequences) ，colorama 可能使用`SetConsoleMode`.

# joomla - 从 Joomla 2.5 到 Joomla 3.0 的组件

> ID：11474397
> 
> 赞同：11
> 
> 时间：2012-07-13T16:19:53.517
> 
> 标签：joomla, components, joomla-extensions, joomla2.5, joomla3.0

自昨晚发布 Joomla 3.0 Alpha 以来，我想尝试着手将我编写的 Joomla 2.5 组件转换为新的 Joomla 3.0。我一直在关注所有的开发团队，他们说 JController、JView 和 JModel 将被更改为在每个之后都有“Legacy”，这就是你需要更改的所有内容。

我遇到了另一个问题，收到如下错误消息：

“**严格的标准：MYCOMPONENTController::display() 的声明应该与 JControllerLegacy::display() 的声明兼容**”

我查看了更多文档和帖子，但没有人遇到或谈论它，所以只是想把它拿出来，看看我需要做什么来解决这个问题。谢谢大家！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-13T16:36:46.627

找到了答案，函数显示需要一个我没有的参数。所以从这个改变：

```
class MYCOMPONENTController extends JControllerLegacy
{
    function display($cachable = false) 
```

对此：

```
 function display($cachable = false, $urlparams = false) 
```

希望这可以帮助某人！

# java - 使用 POI HSSF 出错

> ID：11474402
> 
> 赞同：1
> 
> 时间：2012-07-13T16:20:17.653
> 
> 标签：java, apache-poi, poi-hssf

尝试使用 MS Office 2003 打开 Excel 工作表时出现错误。此 Excel 工作表是使用 HSSFWorkbook 创建的，实现了用户模型范围 org.apache.poi.hssf.usermodel

在 Microsoft Excel 2003 中：“不同的单元格格式太多”。在 Microsoft Excel 2007/2010 中，文件可能会产生以下错误消息：“Excel 在文件中发现不可读的内容”。这是关于单元格格式的，请参阅以下页面：

[http://support.microsoft.com/kb/213904](http://support.microsoft.com/kb/213904)

那么如何在代码中解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:51:04.053

Excel 对您可以拥有的不同单元格样式的数量有限制，而且非常低。对于刚接触 POI 的人来说，一个常见的问题是他们跳过了关于单元格样式在工作簿范围内的部分，而是为每个单元格创建一个单元格样式。这很快将它们推到了 Excel 的极限……

您以前编码的地方可能看起来像

```
Sheet s = wb.createSheet();
for (int rn=0; rn<=10; rn++) {
    Row r = s.createRow(rn);
    for (int cn=0; cn<=4; cn++) {
        Cell c = r.createCell(c);
        c.setCellValue( getMyCellValue(rn,cn) );

        CellStyle cs = wb.createCellStyle();
        cs.setBold(true);
        if (cn == 2) { 
            cs.setDataFormat( DataFormat.getFormat(yyyy/mm/dd) );
        }
        c.setCellStyle(cs);
    }
} 
```

相反，您需要从头开始创建单元格样式，例如

```
CellStyle bold = wb.createCellStyle();
bold.setBold(true);

CellStyle boldDate = wb.createCellStyle();
boldDate.setBold(true);
boldDate.setDataFormat( DataFormat.getFormat(yyyy/mm/dd) );

Sheet s = wb.createSheet();
for (int rn=0; rn<=10; rn++) {
    Row r = s.createRow(rn);
    for (int cn=0; cn<=4; cn++) {
        Cell c = r.createCell(c);
        c.setCellValue( getMyCellValue(rn,cn) );

        CellStyle cs = bold;
        if (cn == 2) { 
            cs = boldDate;
        }
        c.setCellStyle(cs);
    }
} 
```

# javascript - 有没有办法缩短 jQuery 代码，尤其是在使用显示和隐藏函数时？

> ID：11474406
> 
> 赞同：0
> 
> 时间：2012-07-13T16:20:22.553
> 
> 标签：javascript, jquery

我试图找到可能使这个 jQuery 代码更短的 jQuery 函数。我试着看一下切换，但我看不出它是如何工作的。我现在只是想学习 jQuery 的最佳实践。谢谢你。

```
$(".play").click(function (e) {
  e.preventDefault();
  video.ref.playVideo();
  $(".play").hide();
  $(".pause").show();
});
$(".pause").click(function (e) {
  e.preventDefault();
  video.ref.pauseVideo();
  $.(".pause").hide();
  $(".play").show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:30:48.713

我想不出如何让它更短，但是通过缓存两个主要的 jQuery 对象并在可能的情况下引用当前对象 $(this) 可以更好地执行。

```
`var $_play = $('#play'),
    $_pause = $('#pause');
$_play.click(function(e){
    video.ref.playVideo();
    $(this).hide();
    $_pause.show();
    e.preventDefault();
});
$_pause.click(function(e){
    video.ref.pauseVideo();
    $(this).hide();
    $_play.show();
    e.preventDefault();
});`
```

* * *

 `## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:34:51.260

代码已经很短了，但如果你*真的*想的话，你可以结合这两个事件。

```
var $playPause = $(".play,.pause").click(function(e){
    var func = $(this).hasClass('play') ? 'play' : 'pause';
    e.preventDefault();
    video.ref[func+'Video']();
    $playPause.toggle();
}); 
````

# javascript - 用于 ASP.NET 的 JavaScript UI 控件

> ID：11474408
> 
> 赞同：0
> 
> 时间：2012-07-13T16:20:30.127
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, kendo-ui

我一直在使用 Django 和 Kendo UI 以及 jQuery 来制作网页。到目前为止，我非常喜欢可以与这些一起使用的 UI。

我在 Kendo UI web 上检查了对 ASP.NET 和 ASP.NET MVC 的支持只是一个试用版，所以我想知道是否有类似 KendoUI 和 jQuery UI 的 ASP.NET 的东西。我是这方面的初学者，所以我不太了解。

你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:11:26.850

[KendoUI Web](http://www.kendoui.com/download.aspx)的开源版本可用于任何平台（php、asp.net、java 等）。它只是 javascript ui 库。完整产品附带的 asp.net mvc 包装器只是用 mvc html 帮助程序包装了 javascript 调用......没有理由你不能自己这样做。

# ruby - rails 3覆盖模型设置器

> ID：11474413
> 
> 赞同：1
> 
> 时间：2012-07-13T16:20:37.910
> 
> 标签：ruby, ruby-on-rails-3

我正在制作一个插件，我需要它来覆盖我的模型的 setter/getter。这是我到目前为止的代码：

```
module Iplong
    extend ActiveSupport::Concern

    module ClassMethods
        ...

        def override_setter
            self.class_eval %(
                def #{attribute}=(raw_value)
                    self[:#{attribute}] = #{ip2long('raw_value')}
                end
            )
        end
    end

end

ActiveRecord::Base.send :include, Iplong 
```

注意`raw_value`参数。如果我在评估代码中打印它，它会打印设置属性时出现的正确值，但是如果我在`ip2long`发送它的函数内打印它，它会返回一个字符串：`raw_value`那么我如何传递这个参数而不将它解释为字符串?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:23:36.017

您的问题出在这段特定的代码中：

```
"#{ip2long('raw_value')}" 
```

将其从字符串转换为 Ruby 代码，您将获得：

```
ip2long('raw_value') 
```

因此，您实际上是在发送“raw_value”字符串而不是该变量的实际值。

将代码替换为：

```
"#{ip2long(raw_value)}" 
```

你应该没事。

*编辑：此示例代码显示了它是如何工作的：*

```
class A
  attr_accessor :ip

  def ip2num(ip)
    ip.gsub(".", "")
  end

  def override(attr)
    code = "def #{attr}=(value); @ip = ip2num(value); end"
  self.class.class_eval(code)
  end
end

a = A.new
a.ip = "0.0.0.0"
puts a.ip

a.override("ip")
a.ip = "0.0.0.0"
puts a.ip 
```

# dictionary - 在协议缓冲区中定义字典

> ID：11474416
> 
> 赞同：5
> 
> 时间：2012-07-13T16:20:45.800
> 
> 标签：dictionary, protocol-buffers

我对协议缓冲区和 C++ 都是新手，所以这可能是一个基本问题，但我没有任何运气找到答案。基本上，我想要在我的`.proto`文件中定义的字典的功能，例如`enum`. 我正在使用协议缓冲区发送数据，并且我想定义单位及其各自的名称。An`enum`将允许我定义单位，但我不知道如何将人类可读的字符串映射到该单位。

作为我的意思的一个例子，该`.proto`文件可能看起来像：

```
message DataPack {
    // obviously not valid, but something like this
    dict UnitType {
        KmPerHour = "km/h";
        MiPerHour = "mph";
    }

    required int id = 1;
    repeated DataPoint pt = 2;

    message DataPoint {
        required int id = 1;
        required int value = 2;
        optional UnitType theunit = 3;
    }
} 
```

然后有类似创建/处理消息的东西：

```
// construct
DataPack pack;
pack->set_id(123);
DataPack::DataPoint pt = pack.add_point();
pt->set_id(456);
pt->set_value(789);
pt->set_unit(DataPack::UnitType::KmPerHour);

// read values
DataPack::UnitType theunit = pt.unit();
cout << theunit.name << endl; // print "km/h" 
```

我可以`enum`用单位名称定义一个并编写一个函数将它们映射到接收端的字符串，但是将它们定义在同一个位置会更有意义，而且该解决方案似乎太复杂了（至少，对于某人最近被 Python 的便利性宠坏了）。有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T19:13:17.113

您可以使用自定义选项将字符串与每个枚举成员关联： [https ://developers.google.com/protocol-buffers/docs/proto#options](https://developers.google.com/protocol-buffers/docs/proto#options)

它在 .proto 中看起来像这样：

```
extend google.protobuf.FieldOptions {
  optional string name = 12345;
}

enum UnitType {
    KmPerHour = 1 [(name) = "km/h"];
    MiPerHour = 2 [(name) = "mph"];
} 
```

但请注意，一些第三方 protobuf 库不理解这些选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-18T18:22:57.030

在 proto3 中，它是：

```
extend google.protobuf.EnumValueOptions {
  string name = 12345;
}

enum UnitType {
  KM_PER_HOUR = 0 [(name) = "km/h"];
  MI_PER_HOUR = 1 [(name) = "mph"];
} 
```

并在 Java 中访问它：

```
UnitType.KM_PER_HOUR.getValueDescriptor().getOptions().getExtension(MyOuterClass.name); 
```

# csv - 从 CSV 中删除特定列与输入文件匹配的行

> ID：11474417
> 
> 赞同：0
> 
> 时间：2012-07-13T16:20:46.023
> 
> 标签：csv, grep, row

我有一个包含多列和多行的 CSV [File1.csv]。

我有另一个 CSV 文件（只有一列），其中列出了特定的单词 [File2.csv]。

如果任何列与 File2 中列出的任何单词匹配，我希望能够删除 File1 中的行。

我最初使用这个：

```
 grep -v -F -f File2.csv File1.csv > File3.csv 
```

这在一定程度上奏效了。我遇到的这个问题是包含多个单词的列（例如 word1、word2、word3）。File2 包含 word2 但没有删除该行。

我厌倦了将单词分开看起来像这样：（word1，word2，word3），但原始命令不起作用。

如何从 File2 中删除包含单词并且可能包含其他单词的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:54:13.640

一种使用方式`awk`。

内容`script.awk`：

```
BEGIN {
    ## Split line with a doble quote surrounded with spaces.
    FS = "[ ]*\"[ ]*"
}

## File with words, save them in a hash.
FNR == NR {
    words[ $2 ] = 1;
    next;
}

## File with multiple columns.
FNR < NR {
    ## Omit line if eigth field has no interesting value or is first line of
    ## the file (header).
    if ( $8 == "N/A" || FNR == 1 ) {
        print $0
        next
    }

    ## Split interested field with commas. Traverse it searching for a
    ## word saved from first file. Print line only if not found.

    ## Change due to an error pointed out in comments.
    ##--> split( $8, array, /[ ]*,[ ]*/ )
    ##--> for ( i = 1; i <= length( array ); i++ ) {
    len = split( $8, array, /[ ]*,[ ]*/ )
    for ( i = 1; i <= len; i++ ) {
    ## END change.

        if ( array[ i ] in words ) {
            found = 1
            break
        }
    }
    if ( ! found ) {
        print $0
    }
    found = 0
} 
```

假设`File1.csv`并且在*Thor 的*`File2.csv`回答的评论中提供了内容（我建议将该信息添加到问题中），请运行如下脚本：

 *```
awk -f script.awk File2.csv File1.csv 
```

具有以下输出：

```
"DNSName","IP","OS","CVE","Name","Risk"
"ex.example.com","1.2.3.4","Linux","N/A","HTTP 1.1 Protocol Detected","Information"
"ex.example.com","1.2.3.4","Linux","CVE-2011-3048","LibPNG Memory Corruption Vulnerability (20120329) - RHEL5","High"
"ex.example.com","1.2.3.4","Linux","CVE-2012-2141","Net-SNMP Denial of Service (Zero-Day) - RHEL5","Medium"
"ex.example.com","1.2.3.4","Linux","N/A","Web Application index.php?s=-badrow Detected","High"
"ex.example.com","1.2.3.4","Linux","CVE-1999-0662","Apache HTTPD Server Version Out Of Date","High"
"ex.example.com","1.2.3.4","Linux","CVE-1999-0662","PHP Unsupported Version Detected","High"
"ex.example.com","1.2.3.4","Linux","N/A","HBSS Common Management Agent - UNIX/Linux","High" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:53:27.950

您可以将包含多个模式的分割线转换为`File2.csv`.

下面用于`tr`将包含的行转换`word1,word2`为单独的行，然后再将它们用作模式。该`<()`构造临时充当文件/fifo（在 中测试`bash`）：

```
grep -v -F -f <(tr ',' '\n' < File2.csv) File1.csv > File3.csv 
```*

# shell - 使用 Shell 查询参数操作

> ID：11474421
> 
> 赞同：0
> 
> 时间：2012-07-13T16:20:56.697
> 
> 标签：shell, unix

我是 shell 脚本的新手。谁能帮我写这个脚本？

问题：

给定一个带有一些查询参数的 url： 例如： URL: [http://xyz.ubs.com/xyzApp.do?lang=fr&fmt=xml&showresults=true&cty=DE](http://xyz.ubs.com/xyzApp.do?lang=fr&fmt=xml&showresults=true&cty=DE) "

我有一个元素数组，我想用这些元素替换上述 URL 中每个查询参数的值，并进行 curl 调用以从服务器获取响应。我成功地对单个输入进行了成功的 curl 调用。我想对每一种可能的组合都做同样的事情

我使用的向量数组元素是：

Vectors=("\script>alert (0)" '"/ ()' "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" "lasfasf")

我需要帮助来使用 shell 脚本构建各种可能的请求。

例如：[http](http://xyz.ubs.com/xyzApp.do?lang=) ://xyz.ubs.com/xyzApp.do?lang='\script>alert (0)'&fmt=xml&showresults=true&cty=DE" [http://xyz.ubs.com/xyzApp.do?lang =fr&fmt=](http://xyz.ubs.com/xyzApp.do?lang=fr&fmt=) '\script>alert (0)'&showresults=true&cty=DE" [http://xyz.ubs.com/xyzApp.do?lang=fr&fmt=xml&showresults=](http://xyz.ubs.com/xyzApp.do?lang=fr&fmt=xml&showresults=) '\script>alert(0)'&cty=DE "

等等..

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:18:52.410

下面是我在 perl 中的做法：

```

    如果（@ARGV > 0）{
            #print "参数数量：" . 标量 @ARGV 。"\n";
            foreach (@ARGV) {
                    打印“$_\n”；
            }
            如果（@ARGV > 3）{
                    print "参数太多！用法：script.pl arg1 arg2\n";
                    死;
            }
    } 别的 {
            print "没有参数！用法：script.pl arg1 arg2\n";
            死;
    }

    $arg1 = $ARGV[0];
    $arg2 = $ARGV[1];

```

# javascript - 如果重复，则从数组中删除两个值 - JavaScript/jQuery

> ID：11474422
> 
> 赞同：10
> 
> 时间：2012-07-13T16:20:57.710
> 
> 标签：javascript, jquery, arrays

我在这里有一个数组：

```
var myArr = [1, 1, 2, 5, 5, 7, 8, 9, 9]; 
```

现在我想删除重复的两个外观。所以想要的结果**不是**：

```
var myArr = [1, 2, 5, 7, 8 ,9]; 
```

但

```
var myArr = [2, 7, 8]; 
```

基本上我知道如何删除重复项，但不是那种特殊的方式。这就是为什么任何帮助将不胜感激！

请注意：我的数组充满了字符串。这里的数字仅用作示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:34:07.540

无论在何处涉及删除重复项，使用[set data structure](http://en.wikipedia.org/wiki/Set_%28abstract_data_type%29)都不是一个坏主意。

JavaScript 没有原生的集合实现，但对象的键也可以工作——在这种情况下很有帮助，因为这些值可以用来跟踪一个项目在数组中出现的频率：

```
function removeDuplicates(arr) {
    var counts = arr.reduce(function(counts, item) {
        counts[item] = (counts[item]||0)+1;
        return counts;
    }, {});
    return Object.keys(counts).reduce(function(arr, item) {
        if(counts[item] === 1) {
            arr.push(item);
        }
        return arr;
    }, []);
}

var myArr = [1, 1, 2, 5, 5, 7, 8, 9, 9];
removeDuplicates(myArr); 
```

[查看 jsfiddle 上的示例](http://jsfiddle.net/yLb2e/)。

或者，您不能使用对 的调用`reduce()`，而是使用`for`和`for(item in counts)`循环：

```
function removeDuplicates(arr) {
    var counts = {};
    for(var i=0; i<arr.length; i++) {
        var item = arr[i];
        counts[item] = (counts[item]||0)+1;
    }
    var arr = [];
    for(item in counts) {
        if(counts[item] === 1) {
            arr.push(item);
        }
    }
    return arr;
} 
```

[查看 jsfiddle 上的示例](http://jsfiddle.net/yLb2e/4/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:32:26.700

编辑有更好的答案：

```
var myArr = [1, 1, 2, 5, 5, 7, 8, 9, 9];

function removeDuplicates(arr) {
    var i, tmp;
    for(i=0; i<arr.length; i++) {
        tmp = arr.lastIndexOf(arr[i]);
        if(tmp === i) {
            //Only one of this number
        } else {
            //More than one
            arr.splice(tmp, 1);
            arr.splice(i, 1);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:34:02.053

[此代码的jsfiddle](http://jsfiddle.net/BumbleB2na/XvgTb/1/)：

```
var myArr = [1, 1, 2, 5, 5, 7, 8, 9, 9];
var newArr = myArr;
var h,i,j;

for(h = 0; h < myArr.length; h++) {
    var curItem = myArr[h];
    var foundCount = 0;
    // search array for item
    for(i = 0; i < myArr.length; i++) {
        if (myArr[i] == myArr[h])
            foundCount++;
    }
    if(foundCount > 1) {
        // remove repeated item from new array
        for(j = 0; j < newArr.length; j++) {
            if(newArr[j] == curItem) {                
                newArr.splice(j, 1);
                j--;
            }
        }            
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T16:35:28.807

这是我的版本

```
var a = [1, 1, 2, 5, 5, 7, 8, 9, 9];

function removeIfduplicate( arr ) {
    var discarded = [];
    var good      = [];
    var test;
    while( test = arr.pop() ) {
        if( arr.indexOf( test ) > -1 ) {
            discarded.push( test );
            continue;
        } else if( discarded.indexOf( test ) == -1 ) {
            good.push( test );
        }
    }
    return good.reverse();
}

x = removeIfduplicate( a );
console.log( x ); //[2, 7, 8] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T16:43:29.930

如果它只是字母数字，重复项区分大小写，并且任何元素不能超过两个，那么这样的事情可以工作：

```
var a = [2, 1, "a", 3, 2, "A", "b", 5, 6, 6, "B", "a"],

    clean_array = $.map(a.sort(), function (v,i) {
        a[i] === a[i+1] && (a[i] = a[i+1] = null);
        return a[i];
    });

// clean_array = [1,3,5,"A","B","b"] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-13T14:20:03.427

在这个例子中，我们将两个数组作为函数参数，从这里我们将只打印两个数组的唯一值，从而删除两个数组中存在的值。

首先，我将两个数组连接成一个。然后我一次取每个数组值并循环遍历数组本身以寻找它的出现次数。如果没有出现（即计数）等于 1，那么我们将该元素推入结果数组。然后我们可以返回结果数组。

```
function diffArray(arr1, arr2) {
  var newArr = [];
  var myArr=arr1.concat(arr2);
  var count=0;
  for(i=0;i<myArr.length;i++){
    for(j=0;j<myArr.length;j++){
      if(myArr[j]==myArr[i]){
        count++;
      }
    }
    if(count==1){
      newArr.push(myArr[i]);
    }
    count=0;
  }
  return newArr;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-11T14:37:11.423

这是一个使用`Array.filter()`. 诀窍是首先找到所有不唯一的值，然后使用此数组拒绝原始数组中的所有唯一项。

```
let myArr = [1, 1, 2, 5, 5, 7, 8, 9, 9];
let duplicateValues = myArr.filter((item, indx, s) => s.indexOf(item) !== indx);
myArr.filter(item => !duplicateValues.includes(item));
// => [2, 7, 8] 
```

## （如果你对解释感兴趣）

```
// this statement removes all dupicate values
myArr.filter((item, indx, s) => s.indexOf(item) === indx)

// by changing === to !== we do the "opposite", which means that we remove
// all items that are unique
myArr.filter((item, indx, s) => s.indexOf(item) !== indx) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-13T16:59:15.117

编辑：这是 jspref [http://jsperf.com/deleting-both-values-from-array](http://jsperf.com/deleting-both-values-from-array)

[http://jsfiddle.net/3u7FK/1/](http://jsfiddle.net/3u7FK/1/)

这是在两遍中完成它的最快方法，无需使用任何花哨的技巧并保持灵活性。您首先旋转并找到每次出现的计数并将其放入键值对中。然后再次旋转并过滤掉计数大于 1 的过滤器。这也具有能够应用其他过滤器的优点，而不仅仅是“大于 1”；以及如果您还需要其他事情的话，还可以计算发生次数。

这也适用于字符串而不是数字。

[http://jsfiddle.net/mvBY4/1/](http://jsfiddle.net/mvBY4/1/)

```
var myArr = [1, 1, 2, 5, 5, 7, 8, 9, 9];
var map = new Object();

for(var i = 0; i < myArr.length; i++)
{
    if(map[myArr[i]] === undefined)
    {
        map[myArr[i]] = 1;
    }
    else
    {
        map[myArr[i]]++;
    }
}

var result = new Array();

for(var i = 0; i < myArr.length; i++)
{   
    if(map[myArr[i]] > 1)
    {
        //do nothing
    }
    else
    {
        result.push(myArr[i]);
    }

}

alert(result); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-01-25T14:20:46.587

您可以使用 Set（在 IE 11+ 中可用）如下

```
const sourceArray = [1, 2, 3, 4, 5, 5, 6, 6, 7, 7, 8];
const duplicatesRemoved = new Set();

sourceArray.forEach(element => {
    if (duplicatesRemoved.has(element)) {
        duplicatesRemoved.delete(element)
    } else {
        duplicatesRemoved.add(element)
    }
})

console.log(Array.from(duplicatesRemoved)) 
```

**旧版浏览器不支持**NB箭头功能。**请改用普通函数语法。但是，`Array.from`可以很容易地为旧版浏览器[填充。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from#Polyfill)**

 **[在这里试试](https://jsfiddle.net/uvdoz1qt/)。**

# java - 任何符合 IEEE754(r) 的 Java 实现？

> ID：11474424
> 
> 赞同：8
> 
> 时间：2012-07-13T16:21:03.810
> 
> 标签：java, floating-point, ieee-754

是否有任何可用于 Java 的完全兼容的 IEEE754r 实现支持 Java 选择省略的所有功能（或者更确切地说，一般来说高级语言喜欢省略）：

*   陷阱
*   粘滞标志
*   定向舍入模式
*   加长/长双
*   四倍精度
*   DPD（密集小数）

在任何人弄错之前进行澄清：我不是在寻找 JVM 为上述提供任何支持，只是一些在软件中实现类型和操作的类，基本上是已经存在的原始包装类 Float/ 的风格。双倍的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T19:37:40.460

不，不存在完全兼容的 IEEE754R 实施。不仅在 Java 中，而且在所有当前可用的语言中（状态 2012 年 7 月）。

编辑：海报要求 IEEE754 *R*支持与 IEEE 754-2008 相同。如果我想添加没有这样的事情的所有原因，这会很长。

*   陷阱：不，使用 SIGFPE 调用具有 OVERFLOW、UNDERFLOW、INEXACT 等的自己的例程不是陷阱。参见 IEEE754（旧版本）第 10 页。21 什么是陷阱。信号 NaN。NaN 有效载荷访问。标志访问。列举可以做到这一点的语言。

*   舍入模式：新标准将 roundTiesToAway (p. 16) 定义为新的舍入模式。不幸的是，AFAIK 没有支持这种模式的处理器，也没有软件仿真。

*   四倍精度：仅在极少数编译器中支持，甚至更少未损坏的编译器。

*   Densely packed Decimals：可能只支持使用小数的语言，例如 COBOL。

所有集合的交集：空集合。没有任何。没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:41:57.397

[这](http://www.dose-of-reality.org/?IEEE754)与以下[源](http://www.dose-of-reality.org/dose-reality/src/java/org/dosereality/util/IEEE754.java)实现的功能如下：

```
double nextAfter(double x, double y) - returns the double adjacent to x in the direction of y
    double scalb(double x, int e) - computes x*2e quickly
    boolean unordered(double c1, double c2) - returns true iff the two cannot be compared numerically (one or both is NaN)
    int fpclassify(double value) - classifies a floating-point value into one of five types:
        FP_NAN: "not any number", typically the result of illegal operations like 0/0
        FP_INFINITY: represents one end of the real line, available by 1/0 or POSITIVE_INFINITY
        FP_ZERO: positive or negative zero; they are different, but not so much that it comes up much
        FP_SUBNORMAL: a class of numbers very near zero; further explanation would require a detailed examination of the floating-point binary representation
        FP_NORMAL: most values you encounter are "normal" 
    double copySign(double value, double sign) - returns value, possibly with its sign flipped, to match "sign"
    double logb754(double value) - extracts the exponent of the value, to compute log2
    double logb854(double value) - like logb754(value), but with an IEEE854-compliant variant for subnormal numbers
    double logbn(double value) - also computing log2(value), but with a normalizing correction for the subnormals; this is the best log routine
    double raise(double x) - not actually an IEEE754 routine, this is an optimized version of nextAfter(x,POSITIVE_INFINITY)
    double lower(double x) - not actually an IEEE754 routine, this is an optimized version of nextAfter(x,NEGATIVE_INFINITY) 
```

“所有这些例程也有浮点变量，仅在参数和返回类型上有所不同。类是 org.dosereality.util.IEEE754”

[Sun 错误参考 2003](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4406429)

# javascript - 获取插件以触发实时/在线事件

> ID：11474429
> 
> 赞同：1
> 
> 时间：2012-07-13T16:21:42.607
> 
> 标签：javascript, jquery, ajax

我有一个通过 ajax 引入一些新内容的链接，并且在每个内容和平中都有一个链接可以触发 jQuery 插件颜色框。当我在原始页面加载时单击触发器时，颜色框触发良好，但是一旦我加载了一些新内容，颜色框将不再触发，这是我的 jquery，

```
$(".magnify").on("click", function(e) {
        $(this).colorbox({ 
            inline:true, 
            opacity: 0.9,
            innerWidth: 800,
            innerHeight:700
        });
        e.preventDefault(); 
    }); 
```

这是我的 HTML

```
 <a href="#inline_content" class="magnify inline"><img src="http://<?php echo $_SERVER['HTTP_HOST'];?>/_/images/magnify.png" alt="Magnify" />
                                    <span class="play">Watch the Logic+ being manufactured at our plant in Hull</span>
                                    </a>

<div style="display:none">
                                    <div id="inline_content">
                                        <span class="zoomImage" id="ex1">
                                            <img src="http://<?php echo $_SERVER['HTTP_HOST']; ?>/_/images/combi-inside-large.jpg" width="329" height="606"/>
                                        </span>                 
                                    </div>
                                </div> 
```

如何使颜色框与我的 ajax 请求一起使用？

# jquery - 使用 jQuery 更改 CSS 类属性

> ID：11474430
> 
> 赞同：77
> 
> 时间：2012-07-13T16:21:56.397
> 
> 标签：jquery, css, ajax, class, properties

有没有办法使用 jQuery 更改 CSS 类的属性，而不是元素属性？

这是一个实际的例子：

我有一个带类的 div`red`

```
.red {background: red;} 
```

我想更改类背景属性，而不是分配`red`了类背景的元素。`red`

如果我用 jQuery [.css() 方法](https://api.jquery.com/css/)来做：

```
$('.red').css('background','green'); 
```

它将影响现在具有 class 的元素`red`。到这里一切都很好。但是，如果我进行 Ajax 调用，并插入更多带有`red`类的 div，它们将没有绿色背景，它们将具有初始`red`背景。

我可以再次调用 jQuery [.css() 方法](https://api.jquery.com/css/)。但我想知道是否有办法改变班级本身。请考虑这只是一个基本示例。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-13T16:27:33.693

您不能直接使用 jQuery 更改 CSS 属性。但是你至少可以通过两种方式达到同样的效果。

## 从文件中动态加载 CSS

```
function updateStyleSheet(filename) {
    newstylesheet = "style_" + filename + ".css";

    if ($("#dynamic_css").length == 0) {
        $("head").append("<link>")
        css = $("head").children(":last");

        css.attr({
          id: "dynamic_css",
          rel:  "stylesheet",
          type: "text/css",
          href: newstylesheet
        });
    } else {
        $("#dynamic_css").attr("href",newstylesheet);
    }
} 
```

上面的例子复制自：

*   [如何使用 jQuery 即时切换 CSS 文件](http://www.webgeekly.com/tutorials/jquery/how-to-switch-css-files-on-the-fly-using-jquery/)

## 动态添加样式元素

```
$("head").append('<style type="text/css"></style>');
var newStyleElement = $("head").children(':last');
newStyleElement.html('.red{background:green;}'); 
```

示例代码是从[这个 JSFiddle fiddle](http://jsfiddle.net/eM24t/)复制的，最初由 Alvaro[在他们的评论中](https://stackoverflow.com/questions/11474430/change-css-class-properties-with-jquery#comment34840592_11474522)引用。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-11-07T01:36:36.107

如果您无法通过动态加载来使用不同的样式表，您可以使用此功能来修改 CSS 类。希望对你有帮助...

```
function changeCss(className, classValue) {
    // we need invisible container to store additional css definitions
    var cssMainContainer = $('#css-modifier-container');
    if (cssMainContainer.length == 0) {
        var cssMainContainer = $('<div id="css-modifier-container"></div>');
        cssMainContainer.hide();
        cssMainContainer.appendTo($('body'));
    }

    // and we need one div for each class
    classContainer = cssMainContainer.find('div[data-class="' + className + '"]');
    if (classContainer.length == 0) {
        classContainer = $('<div data-class="' + className + '"></div>');
        classContainer.appendTo(cssMainContainer);
    }

    // append additional style
    classContainer.html('<style>' + className + ' {' + classValue + '}</style>');
} 
```

此函数将采用任何类名并将任何先前设置的值替换为新值。请注意，您可以通过将以下内容传递给 classValue: 来添加多个值`"background: blue; color:yellow"`。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-14T00:06:54.137

没有找到我想要的答案，所以我自己解决了：
*修改一个容器div！*

```
<div class="rotation"> <!-- Set the container div's css -->
  <div class="content" id='content-1'>This div gets scaled on hover</div>
</div>

<!-- Since there is no parent here the transform doesnt have specificity! -->
<div class="rotation content" id='content-2'>This div does not</div> 
```

执行 $target.css() 后要保留的 css

```
.content:hover {
    transform: scale(1.5);
} 
```

使用 css() 修改内容包含的 div

```
$(".rotation").css("transform", "rotate(" + degrees + "deg)"); 
```

[代码笔示例](http://codepen.io/chyde/pen/RrWJam "代码笔示例")

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-23T10:22:17.387

您可以动态删除类和添加类

```
$(document).ready(function(){
    $('#div').removeClass('left').addClass('right');
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-27T18:11:36.413

`$(document)[0].styleSheets[styleSheetIndex].insertRule(rule, lineIndex);`

* * *

`styleSheetIndex`是与您加载文件的顺序相对应的索引值`<head>`（例如，0 是第一个文件，1 是下一个文件，等等。如果只有一个 CSS 文件，则使用 0）。

`rule`是文本字符串 CSS 规则。像这样：`"body { display:none; }"`。

`lineIndex`是该文件中的行号。要获取最后一个行号，请使用`$(document)[0].styleSheets[styleSheetIndex].cssRules.length`. 只是`console.log`那个 styleSheet 对象，它有一些有趣的属性/方法。

因为 CSS 是“级联”，所以无论您尝试为该选择器插入什么规则，您都可以附加到 CSS 文件的底部，它会覆盖任何在页面加载时设置的样式。

在某些浏览器中，在处理完 CSS 文件后，您必须通过调用 DOM JS 中的一些无意义的方法来强制 CSS“重绘” `document.offsetHeight`（它被抽象为 DOM 属性，而不是方法，所以不要使用“()”） -- 只需在您的 CSSOM 操作后强制页面在旧浏览器中重绘即可。

* * *

所以这里有一个例子：

`var stylesheet = $(document)[0].styleSheets[0]; stylesheet.insertRule('body { display:none; }', stylesheet.cssRules.length);`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-07T03:09:03.503

您可以向红色 div 的父级添加一个类，例如 green-style

```
$('.red').parent().addClass('green-style'); 
```

然后将样式添加到css

```
.green-style .red {
     background:green; 
} 
```

所以每次在绿色样式下添加红色元素时，背景都是绿色的

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-08T11:28:23.857

您可能希望采用不同的方法：与其动态更改 css，不如按照您想要的方式在 CSS 中预定义您的样式。然后使用 JQuery 在 Javascript 中添加和删除样式。（参见 Ajmal 的代码）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-27T01:17:22.597

这是对 Mathew Wolf 提供的出色答案的一些改进。这会将主容器作为样式标记附加到 head 元素，并将每个新类附加到该样式标记。更简洁一点，我发现它运作良好。

```
function changeCss(className, classValue) {
    var cssMainContainer = $('#css-modifier-container');

    if (cssMainContainer.length == 0) {
        var cssMainContainer = $('<style id="css-modifier-container"></style>');
        cssMainContainer.appendTo($('head'));
    }

    cssMainContainer.append(className + " {" + classValue + "}\n");
} 
```

# html - IE7 CSS z-index 问题在任何其他浏览器上都不明显

> ID：11474432
> 
> 赞同：0
> 
> 时间：2012-07-13T16:22:21.827
> 
> 标签：html, css, internet-explorer, internet-explorer-7, z-index

我在 IE7 上遇到了 CSS z-index 的问题，我似乎无法深入了解。

```
#screen {
    display: none;
    background-image: url('/images/bg.png');
    background-repeat: repeat;
    position: fixed;
    top: 0px;
    left: 0px;
    min-width: 100%;
    min-height: 100%;
    z-index: 10000;
}

<div id="screen"></div> 
```

我有一个出现在页面加载上的叠加层，称为`r_box`

```
<div id="r_box">
    <div id="message_panel">
        ...Content in here...
    </div>
</div>

#r_box
{
    width: 335px;
    height: 337px;
    background: url("/images/panel.png") no-repeat scroll 0 0 transparent;
    position: fixed;
    margin-left: -150px;
    margin-top: -130px;
    left: 50%;
    top: 50%;
    z-index: 10001;
    display: none;
}

#r_box #message_panel {     
    color: #fff;
    z-index: 10001;
    bottom: 95px;
} 
```

但是，我在 IE7 上遇到的问题*是*页面加载时`screen`div 始终位于`r_box`. 我已经在 IE8、IE9、FF、Safari 和 Chrome 上对此进行了测试，并且它适用于所有这些浏览器。唯一存在问题的是 Internet Explorer 7。

这可能是 DIV 或 DIV 的问题，`screen`还是`r_box`可能是其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:19:42.377

这归结为一个堆叠上下文问题，正如许多人发现的那样，只有在 Internet Explorer 7 中才明显。

我决定只删除 IE7 的问题行为*，*因为我相信应用程序不需要在每个浏览器中看起来都一样。

# c# - EmguCV 无法调试。NET4.0

> ID：11474440
> 
> 赞同：0
> 
> 时间：2012-07-13T16:22:49.983
> 
> 标签：c#, .net, visual-studio-2010, debugging, emgucv

我在调试一个应用程序时遇到了麻烦。网络 4.0。

一个写的 WPF/.NET4.0 和 WPF/.NET3.5 中的其他都编译得很好，但是在 .NET4.0 中我无法调试，应用程序突然关闭，我看过所有的例子，这些都是 EmguCV 制作的.NET3.5。

**我如何通过 .NET4.0 使用 EmguCV 调试应用程序？**

# python - while(True) 循环中断 SSH 脚本

> ID：11474443
> 
> 赞同：0
> 
> 时间：2012-07-13T16:23:03.497
> 
> 标签：python, bash, ssh, while-loop

我正在使用自动 SSH 脚本通过 SSH 将硬件测试复制/运行/记录到几台计算机上，除了一件事外，一切正常。测试文件应该每 30 分钟无限期地运行一次并收集数据，然后将其写入文件直到被杀死。由于缺乏更好的例子：

注意：这些文件都不是实际代码。我面前没有它来复制它。

文件.py：

```
#!/usr/bin/env python
import os

idleUsage = []
sleepTime = 1800

while(True):
    holder = os.popen('mpstat | awk \'{printf("%s\n", $9)}\'')
    idleUsage.append(100.0 - float(holder[1]))

    f = open("output.log", 'w')
    f.write(%idleUsage)
    f.close()

    sleep(sleepTime) 
```

自动 ssh.sh：

```
#!/bin/bash

autossh uname1 password1 ip1 command <----gets stuck after ssh runs
autossh uname2 password2 ip2 command
autossh uname3 password2 ip3 command 
```

毫无疑问，它会卡在运行命令上。我已经尝试过“命令&”以及在整行代码的末尾放置一个＆符号。有大佬给点建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:57:28.003

不确定您当前的上下文，但我建议使用[subprocess](http://docs.python.org/library/subprocess.html?highlight=subprocess#replacing-shell-pipeline)：

```
from subprocess import Popen

p1 = Popen(["sar"], stdout=PIPE)
p2 = Popen(["grep", "kb"], stdin=p1.stdout, stdout=PIPE)
p1.stdout.close()  # Allow p1 to receive a SIGPIPE if p2 exits.
output = p2.communicate()[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:53:01.107

那么，您的 shell 脚本通过 ssh 连接到远程机器并运行一个无休止的 python 命令，并且您希望该 ssh 连接进入后台？

```
#!/bin/sh
ssh thingie 1 > out.1 &
ssh thingie 2 > out.2 &
ssh thingie 3 > out.3 &
wait 
```

这将在后台启动三个 ssh 命令记录到单个文件，然后脚本将等待它们全部退出（`wait`如果没有给出 pid 作为参数，则等待所有子级退出）。如果您终止脚本，子 ssh 进程也应该终止。我不确定这是否是您要问的，但也许它有帮助？:)

# debugging - jquery - 无法在复杂页面上选择文本 - 我该如何调试？

> ID：11474444
> 
> 赞同：0
> 
> 时间：2012-07-13T16:23:04.977
> 
> 标签：debugging, mouseevent, jquery

我无法在包含大量 jquery 和 css 内容的页面上选择文本。我已经注释掉了许多看起来明显是罪魁祸首的 mousedown 事件处理程序，但我仍然没有找到错误。

问题是......调试它的最佳方法是什么？有没有比在我发现问题之前注释掉所有事件处理程序更好的方法来调试它？我可以使用某种事件检查器吗？

仅供参考，页面是：

[http://www.musiclessons.com/youtube/#6NxVucKQHG8](http://www.musiclessons.com/youtube/#6NxVucKQHG8) - 您不能选择视频下方的任何文字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:13:09.070

它是：

```
$('#youtube-list').disableSelection (); 
```

在您的页面加载的以下文件中找到：

[http://musiclessons.com/youtube/js/youtube.js?v=9](http://musiclessons.com/youtube/js/youtube.js?v=9)

这就是它的内容：

[http://forum.jquery.com/topic/disableselection](http://forum.jquery.com/topic/disableselection)

至于你关于有效调试方法的问题：我真的不知道。正在查看 css 文件中的某些“用户选择”属性（请参阅[Is there a way to make text unselectable on an HTML page?](https://stackoverflow.com/q/69430/176140)），然后在偶然发现上述内容之前阅读了一些 js。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T17:12:07.383

我不确定您为什么需要选择要调试的文本，也许您可​​以用它来更新问题。

现在，如果您需要复制文本或类似的东西，您可以随时使用 firebug 或诸如此类的东西进行检查，然后从那里选择文本。

# java - Db4o 客户端似乎没有从其他客户端获取提交事件

> ID：11474445
> 
> 赞同：0
> 
> 时间：2012-07-13T16:23:07.350
> 
> 标签：java, db4o

我有一个带有两个客户端的 db4o 服务器的系统。一个客户端托管在进程中，另一个是托管许多需要查询数据库的 servlet 的 Web 服务器。

[在 Web 服务器的连接代码中，我已经注册了提交事件，并按照http://community.versant.com/documentation/reference/db4o-8.0/java/reference/](http://community.versant.com/documentation/reference/db4o-8.0/java/reference/Content/advanced_topics/callbacks/possible_usecases/committed_event_example.htm)上的 db4o 文档的建议使用它来刷新对象[内容/advanced_topics/callbacks/possible_usecases/committed_event_example.htm](http://community.versant.com/documentation/reference/db4o-8.0/java/reference/Content/advanced_topics/callbacks/possible_usecases/committed_event_example.htm)：

```
 client = Db4oClientServer.openClient (context.getBean ("db4oClientConfiguration", ClientConfiguration.class),
        arg0.getServletContext ().getInitParameter ("databasehost"),
        Integer.parseInt (arg0.getServletContext ().getInitParameter ("databaseport")),
        arg0.getServletContext ().getInitParameter ("databaseuser"),
        arg0.getServletContext ().getInitParameter ("databasepassword"));

    System.out.println ("DB4O connection established");

    EventRegistry events = EventRegistryFactory.forObjectContainer (client);
    events.committed ().addListener (new EventListener4<CommitEventArgs> () {
        public void onEvent (Event4<CommitEventArgs> commitEvent, CommitEventArgs commitEventArgs)
        {
            for (Iterator4<?> it = commitEventArgs.updated ().iterator (); it.moveNext ();)
            {
                LazyObjectReference reference = (LazyObjectReference) it.current ();
                System.out.println ("Updated object: " + reference.getClass () + ":" + reference.getInternalID ());
                //if (trackedClasses.contains (reference.getClass ()))
                {
                    Object obj = reference.getObject ();
                    commitEventArgs.objectContainer ().ext ().refresh (obj, 1);
                    System.out.println ("  => updated (" + obj + ")");
                }
            }
        }
    }); 
```

然后在进程内客户端中执行以下代码：

```
 try {
        PlayerCharacter pc = new PlayerCharacter (player, name);
        pc.setBio(bio);
        pc.setArchetype(archetype);
        player.getCharacters ().add (pc);
        database.store (pc);
        database.store (player.getCharacters ());
        database.store (player);
        database.commit ();
        con.sendEvent (id, "CHARACTER_CREATED".getBytes (Constants.CHARSET));
    }
    catch (Exception e) 
    {
        con.sendEvent (id, EventNames.ERROR, e.toString ());
    } 
```

'CHARACTER_CREATED' 事件发送成功，所以我知道提交没有引发异常，但其他客户端上没有显示任何内容。它继续使用旧版本的对象，并且我期望的“更新对象”消息不会出现在服务器控制台上。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:41:47.157

显然，当提交来自其他 TCP 客户端时，.committed() 事件仅在客户端上触发。

因此，您需要将内部 .openClient() / .openSession() 客户端转换为完整的 TCP 客户端以查看事件。

.openClient() / .openSession() 对象容器的重量更轻，可以绕过所有与网络通信相关的代码。显然也是整个网络的事件分布。

# php - 错误：在 cakephp 控制器中的非对象上调用成员函数 find()

> ID：11474447
> 
> 赞同：4
> 
> 时间：2012-07-13T16:23:15.150
> 
> 标签：php, cakephp

我是 cakephp 新手，并尝试使用控制台工具生成一些 CRUD 操作。除了一张桌子（最大的）外，它工作正常。

尝试添加新元素时，它返回：

> 错误：在非对象文件上调用成员函数 find()：C:\wamp\www\cakephp\app\Controller\ChantiersController.php
> 行：50

这是第 50 行及以后：

```
 $programs = $this->Chantier->Program->find('list');
    $etats = $this->Chantier->Etat->find('list');
    $types = $this->Chantier->Type->find('list');
    $champsLibres = $this->Chantier->ChampsLibre->find('list');
    $feuillesDeRoutes = $this->Chantier->FeuillesDeRoute->find('list');
    $directionsPilotes = $this->Chantier->DirectionsPilote->find('list');
    $this->set(compact('programs', 'etats', 'types', 'champsLibres',    
            'feuillesDeRoutes', 'directionsPilotes')); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T17:44:03.350

**TLDR/答案：**

您可以修复关联，或加载模型，然后删除直通调用（`->Chantier`部分：

```
$this->loadModel('Program');
$programs = $this->Program->find('list'); 
```

**详情/说明：**

该错误基本上意味着您正在尝试调用`find()`未加载到控制器中的模型。

默认情况下，会加载 Controller 的模型。而且，正如您所做的那样，您可以通过加载的模型使用模型。（如果关联设置正确）。

例如：

```
//ChantiersController
$this->Pizza->find('all'); //ERROR - Pizza model isn't loaded 
```

要解决此问题，只需在尝试使用之前加载模型：

```
$this->loadModel("Pizza");
$this->Pizza->find('all'); //All is good - loaded on the line above 
```

在您的情况下，由于您似乎正在使用与`Chantier`模型的关联来查找其他模型，因此两个模型之间的关联可能不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T07:50:53.073

如果您不想使用 loadModel() 函数，那么您可以定义

```
var $uses = array('Program'); 
```

您还可以在数组中提及其他型号名称

# powershell - Get-Childitem 试图从当前工作目录获取注册表项

> ID：11474449
> 
> 赞同：0
> 
> 时间：2012-07-13T16:23:23.427
> 
> 标签：powershell

我正在尝试获取注册表项值，但我遇到了问题。

以下是我尝试执行的命令。

```
Get-ChildItem "HKEY_LOCAL_MACHINE\SFTWARE\Wow6432Node\Mycompany\MyProj\Model" | ForEach-Object {Get-ItemProperty $_.pspath} 
```

但是在附加了当前工作目录的注册表项路径中，会产生如下所示的意外问题。

```
PS C:\Users\Administrator\Desktop\MyDoc\Core\NodeRenameMaster> Get-ChildItem "HKEY_LOCAL_MACHINE\S
FTWARE\Wow6432Node\Mycompany\MyProj\Model" | ForEach-Object {Get-ItemProperty $_.pspath}
Get-ChildItem : Cannot find path 'C:\Users\Administrator\Desktop\MyDoc\Core\NodeRenameMaster\HKEY_
LOCAL_MACHINE\SOFTWARE\Wow6432Node\Mycompany\MyProj\Model' because it does not exist.
At line:1 char:14
+ Get-ChildItem <<<<  "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Mycompany\MyProj\Model" | ForEach-Object {Get-Item
Property $_.pspath}
    + CategoryInfo          : ObjectNotFound: (C:\Users\Admini...\Model:String) [Get-ChildItem], ItemNotFound
   Exception
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetChildItemCommand 
```

为什么会发生？如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:29:11.350

路径无效，将“HKEY_LOCAL_MACHINE”替换为“HKLM:\”，将“SFTWARE”替换为“SOFTWARE”

# .net - 为什么 WCF ServiceHost 一旦超出范围就保持打开状态？

> ID：11474453
> 
> 赞同：2
> 
> 时间：2012-07-13T16:23:30.937
> 
> 标签：.net, multithreading, wcf, self-hosting, servicehost

我只是在整理我的一些 WCF（自托管）代码，并意识到我的 ServiceHost 对象在最初设置后超出了范围，但我仍然可以连接到它。

```
public void StartMyService()
{
    var host = new ServiceHost(typeof(MyService), new Uri("http://localhost:8000/MyService"));
    host.Open();
} 
```

如果我再次调用它并重新实例化它并尝试再次打开它，我会收到一条错误消息，指出已经有一些东西连接到端点。它仅在应用程序关闭时才被释放。

我只能假设对 Open() 的调用在较低级别上做了一些事情，以使其以*现在*不受管理的方式保持打开状态。但是，除非我在这里完全误解了事情，否则我找不到任何有关此的信息。

考虑一下，连接现在仍然打开，但我无法在不杀死应用程序的情况下恢复它（关闭等），这似乎并不正确。或者也许这甚至无关紧要，如果它不伤害任何东西，我可以一直让它打开？

**更新**：所以我接受了 Eiver 的回答，因为它解释了我最初的问题，即为什么即使在超出范围后它仍然保持打开状态。但是，我现在想知道一些关于此的事情（或者我可能对线程缺乏经验）。首先，只要它是开放的，我是否会为此烦恼，这一切都是正确的。如果有某种方法可以通过将线程保持在范围内来访问线程，它甚至会有所帮助。也许，像这样设置它（并且从不调用 close）使调用代码变得简单（即不必保留引用），我什至可以将它包装在一个静态方法中以进行更简单的调用。听起来有点躲闪……嗯！

**更新2**：所以，我知道这样做不好，因为这意味着我不再控制主机和启动它的线程。所以我把它全部包装成一个单例，让我能够在任何时候访问主机（对于错误、事件、在同一端点上关闭/重新打开等）并使调用非常简单（就像一个简单的静态方法称呼）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:00:03.610

My guess is the Class with the method StartMyService() is still alive. If you code it like this it does what (I think) it is supposed to do. Left the commented out code as I think that is a cleaner way of starting a service and letting it go out of scope.

```
 class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("**** Console Based WCF Host *****");

            //using (ServiceHost serviceHost = new ServiceHost(typeof(MagicEightBallService)))
            //{
            //    serviceHost.Open();
            //    Console.WriteLine("The service is running");
            //    Console.ReadLine();
            //}
            using (MySvc ms = new MySvc())
            {
                ms.StartMyService();
            }
            Console.ReadLine();
        }

        public class MySvc: IDisposable
        {
            ServiceHost serviceHost;
            public void StartMyService()
            {
                serviceHost = new ServiceHost(typeof(MagicEightBallService));
                serviceHost.Open();
            }
            public void Dispose() 
            {
                // the class needs to clean up after itself
                serviceHost.Close();
            }
            public MySvc() { }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:49:11.880

并非所有超出范围的内容都会被终止。如果一个类产生另一个线程（我确信 WCF 会这样做），即使对创建它的类的引用被垃圾回收，该线程也可能存在。

您可能需要调用 host.Close()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:34:50.637

在您尝试访问它之前，它可能没有被收集。

# ajax - Ajax jsf 2根据选择列表项选择对数据表进行排序（单击按钮）

> ID：11474454
> 
> 赞同：0
> 
> 时间：2012-07-13T16:23:35.803
> 
> 标签：ajax, jsf

所以我想根据下拉列表中选择的状态来改变和过滤数据表。我有以下内容：

```
 <p>Choose State to Filter By:</p> 

                <h:selectOneMenu value="#{productListingBean.choosenState}">
                    <f:selectItem itemValue="All" />
                    <f:selectItems value="#{productListingBean.stateList}" />
                </h:selectOneMenu>
                <h:commandButton value="Sort">
                    <f:ajax event="action" render="myTable" />
                </h:commandButton> 
```

和

```
<h:dataTable id="myTable" value="#{productListingBean.getAllProducts()}" var="product" styleClass="hovertable">
            <h:column>
                <f:facet name="header">
                    ID
                </f:facet> ... 
```

我的产品 bean 是请求范围的，我将 selectOnmenu 中的选择保存在 Choosen 状态变量中，getAllProducts() 方法处理过滤。

我错过了什么，这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:06:28.557

问题似乎是这需要用标签括起来。

# javascript - .htaccess Gzip 不工作

> ID：11474456
> 
> 赞同：0
> 
> 时间：2012-07-13T16:23:39.563
> 
> 标签：javascript, apache, .htaccess, gzip

我正在尝试压缩一些文件以提高我网站的速度。我在 htaccess 文件中执行此操作，它适用于除少数文件之外的所有内容。

这是我用来压缩文件的代码：

```
<IfModule mod_gzip.c>
mod_gzip_on       Yes
mod_gzip_dechunk  Yes
mod_gzip_item_include file      \.(html?|txt|css|js|min|js?|js?1|1|css|php|pl|svg)$
mod_gzip_item_include handler   ^cgi-script$
mod_gzip_item_include mime      ^text/.*
mod_gzip_item_include mime      ^text/css.*
mod_gzip_item_include mime      ^application/javascript.*
mod_gzip_item_include mime      ^application/.*
mod_gzip_item_exclude mime      ^image/.*
mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</IfModule> 
```

但是这 4 个文件没有被压缩，我不明白为什么：

```
tryten . com/javascript/jquery.js?1 
tryten . com/javascript/jquery/plugins/jquery-ui.min.js
tryten . com/javascript/common.js?1 
tryten . com/javascript/jquery/plugins/imodal/imodal.js?1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:53:35.547

尝试这个

```
# Enable GZIP
<ifmodule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4.0[678] no-gzip
BrowserMatch bMSIE !no-gzip !gzip-only-text/html
</ifmodule>
# Expires Headers – 2678400s = 31 days
<ifmodule mod_expires.c>
  ExpiresActive On
  ExpiresDefault “access plus 1 seconds”
  ExpiresByType text/html “access plus 0 seconds”
  ExpiresByType image/gif “access plus 2678400 seconds”
  ExpiresByType image/jpeg “access plus 2678400 seconds”
  ExpiresByType image/png “access plus 2678400 seconds”
  ExpiresByType text/css “access plus 518400 seconds”
  ExpiresByType text/javascript “access plus 2678400 seconds”
  ExpiresByType application/x-javascript “access plus 2678400 seconds”
</ifmodule>
# Cache Headers
<ifmodule mod_headers.c>
  # Cache specified files for 31 days
  <filesmatch “.(ico|flv|jpg|jpeg|png|gif|css|swf)$”&gt;
  Header set Cache-Control “max-age=2678400, public”
  </filesmatch>
  # Don’t cache HTML
  <filesmatch “.(html|htm)$”&gt;
  Header set Cache-Control “max-age=0, private, must-revalidate”
  </filesmatch>
  # Cache PDFs for a day
  <filesmatch “.(pdf)$”&gt;
  Header set Cache-Control “max-age=86400, public”
  </filesmatch>
  # Cache Javascripts for 31 days
  <filesmatch “.(js)$”&gt;
  Header set Cache-Control “max-age=2678400, private”
  </filesmatch>
</ifmodule> 
```

[资源](http://www.urtechnology.com/blogs/htaccess-code-for-web-site-speed-optimization/)

# image-processing - 索引模式将图像减少到只有 2 种颜色

> ID：11474458
> 
> 赞同：0
> 
> 时间：2012-07-13T16:23:51.470
> 
> 标签：image-processing, gimp

我使用原始 RGB 图像（包含黄色和黑色阴影）在 gimp 中创建了一个新调色板，它给了我大约 200 种颜色（在导入对话框中间隔 = 2）。然后我使用上面创建的调色板将模式从 RGB 更改为 Indexed，但生成的图像仅包含 2 种颜色 - 黑色和黄色。没有所有的深灰色、浅灰色和不同的黄色。

我希望我的索引图像尽可能地类似于 RGB，但结果看起来很糟糕。请帮忙。

我的问题的视觉说明：http: [//i49.tinypic.com/w1tchw.png](http://i49.tinypic.com/w1tchw.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:15:53.657

从原始图像来看，看起来您正在处理顶层为黄绿色而底层为黑色的图层，并且形状和图案由它们的透明度定义。您需要将这两层合二为一。恐怕我不了解 Gimp，所以我无法给出具体说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:54:11.410

转换为索引模式时，请选择一个`Dithering`选项。

# html - 用于 Outlook 2007 和 2010 的 HTML 电子邮件中的多层元素

> ID：11474463
> 
> 赞同：1
> 
> 时间：2012-07-13T16:24:11.507
> 
> 标签：html, email, html-email

希望每个人都喜欢这个美妙的 Aloha Friday，我有一个关于 HTML 电子邮件的问题。特别是关于 2007 年和 2010 年的展望。

我正在做一个项目，该项目涉及在彼此之上叠加几个 PNG，实际上甚至不是几个，只有 2 个。

目前几乎适用于我其他市场的解决方案是

```
 <table>
    <tr>
      <td></td>
      <td valign="top" rowspan="2" style="padding-left:7px;padding-top:17px">
        <img src="path/to/image.jpg" />
      </td>
  </tr>
  <tr>
    <td colspan="2">
        <img src="path/to/image.jpg" />
    </td>
  </tr>
</table> 
```

这很棒，如果 Outlook 07 和 2010 仍然支持属性，那就太好了。

所以我一直在环顾四周，看到了关于使用 VML [http://blog.oxagile.com/2010/04/23/background-images-for-outlook-2007-and-outlook-2010-beta/](http://blog.oxagile.com/2010/04/23/background-images-for-outlook-2007-and-outlook-2010-beta/)的教程图层图像。话虽如此，我非常愿意尝试一下，但为了简单起见，我想看看是否有人有比“如果 MS 软件在此处包含不同的代码”类型的交易更优雅的解决方案。

请让我知道你们的想法/知道的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:44:36.460

在 Outlook 2007 和 2010 中，CSS 支持受到限制，因此专有解决方案是唯一的选择。

# c# - 如何获得类似于此 tsql 查询的 lambda 查询？

> ID：11474469
> 
> 赞同：3
> 
> 时间：2012-07-13T16:24:22.030
> 
> 标签：c#, linq, entity-framework, tsql, group-by

有一个 T-SQL 查询：

```
select [ProductNumber] ,max([ProductRevNumber])
from Products  
group by [ProductNumber] 
```

尝试的 LINQ 查询：

```
ProductsDBContext.Products.GroupBy(x => x.ProductRevNumber)
                          .Select(group => ProductNumber, 
                                           ProductRevNumber = group.Max(x => x.ProductRevNumber)); 
```

lambda 查询不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T16:28:36.977

我认为这就是你所追求的：

```
var latestProducts = ProductsDBContext.Products
    .GroupBy(p => p.ProductNumber).Select(g => new 
    {
        ProductNumber = g.Key,
        MaxProductRevNumber = g.Max(p => p.ProductRevNumber))
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:35:00.257

```
from p in db.Products
group p by p.ProductNumber into g
select new
{
    ProductNumber = g.Key,
    ProductRevNumber = g.Max(p => p.ProductRevNumber)
}; 
```

# c - 按 GTK 按钮停止 CPU 密集型操作

> ID：11474471
> 
> 赞同：1
> 
> 时间：2012-07-13T16:24:23.520
> 
> 标签：c, gtk, glib

我正在扩展一个 GTK 应用程序，它执行一组需要高 CPU 负载的操作。我想包括通过单击 GUI 中的按钮来停止此操作的可能性。问题在于，正如预期的那样，来自按钮的信号实际上是在操作完成后立即触发的。

现在，代码看起来像这样：

```
[...]
// code snippet to show the dialog and to enable user interactions with the buttons on the lower side of the window
while(TRUE) {
    gint run = gtk_dialog_run (window_main);
    if (run == GTK_RESPONSE_APPLY) {
        gboolean success = start_long_operation();
    }
    else if (run == GTK_RESPONSE_HELP) {
        open_about();
    }
    else if (run == GTK_RESPONSE_CANCEL) {
        stop_long_operation();
    }
    else {
        gtk_widget_destroy (window_main);
        return;
    }
} 
```

我已经声明了一个`busy_state`由长操作的函数检查的全局变量：如果它是 TRUE，则内部循环继续循环。否则，循环退出并且函数返回结果。

`stop_long_operation()`只需将此全局变量设置为 FALSE。

如前所述，在操作完成之前，我无法按下“停止”按钮和“发送”GTK_RESPONSE_CANCEL，因为它阻塞了整个窗口。

我已经尝试在函数`while (g_main_context_iteration(NULL, FALSE))`内部使用技巧`stop_long_operation()`，如 gtk's docs 中所述，但没有结果。

我真的需要设置多线程功能吗？我可以避免这种情况吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T00:25:38.480

如果您可以将长时间的操作分解为多个较小的任务，则可以避免使用线程。最简单的方法是创建一个回调，然后将其传递给[g_idle_add](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-idle-add)（或[g_idle_add_full](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-idle-add-full)）。每次回调运行时，它都会做少量工作，然后返回 TRUE。任务完成后，返回 FALSE，回调不再运行。当您想中断任务时，只需将 g_idle_add 返回的值传递给[g_source_remove](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-source-remove)即可删除回调。

如果您不能中断操作，那么线程几乎是您唯一的选择。 [g_thread_new](http://developer.gnome.org/glib/stable/glib-Threads.html#g-thread-new)是执行此操作的低级方法，但通常使用[GThreadPool](http://developer.gnome.org/glib/stable/glib-Thread-Pools.html)更容易。更高级的选项是使用[g_simple_async_result_run_in_thread](http://developer.gnome.org/gio/stable/GSimpleAsyncResult.html#g-simple-async-result-run-in-thread)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:31:03.707

如果您不想使用线程，这是另一种选择（尽管您应该使用线程，这是非常不安全的）：

使用流程。流程要简单得多，并且可以为您提供更大的灵活性。这是您需要做的：

*   创建另一种 C/C++/任何你想要的语言来完成这个任务的程序
*   使用`spawn()`或生成它`popen()`
*   （可选）使用命令行或 IPC 传递参数
*   按下按钮时，使用`kill()`UNIX 上的调用或 Win32 kill 函数来终止进程。您可以`SIGTERM`在 UNIX 上使用并注册一个处理程序，以便您可以控制关​​闭。

# php - PHP - 包含文件而不继承变量？

> ID：11474473
> 
> 赞同：5
> 
> 时间：2012-07-13T16:24:30.993
> 
> 标签：php, variables, include, scope

*是否可以在不继承父脚本中设置的变量的情况下*从 PHP 脚本中包含（或出于我的用途*运行*）另一个 PHP 文件？我知道这很可能通过[将 include 包装在一个函数中](https://stackoverflow.com/a/8479013/1382779)来实现，但这感觉很草率。

 *有没有更优雅的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-17T01:50:48.553

将包含命令包装到包含函数中。

```
 <?php
    //Führt die Cronjobs aus
    set_time_limit(30);

    /** Alle Dateien mit _cronjob am schluss sollen minütlich ausgeführt werden.*/
    $files = scandir(__DIR__ ."/cronjob");

    foreach($files as $file) {
        if($file == "." || $file == "..") continue;
        include_easy(__DIR__ ."/cronjob/". $file);
    }

    //Damit die variablen nicht überschrieben werden, wird das include über eine funktion gemacht.
    function include_easy($pfad) {
        include($pfad);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:51:04.750

不幸的是，在撰写本文时，将您想要包含在函数或方法中的内容包装起来似乎是实现此目的的唯一方法。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-13T16:55:54.660

使文件中的变量包含私有变量。这样，它们仅包含在您要从中继承函数的文件中。这是解决问题的一种更简洁的方法。*

# ios - iOS：需要在 plist 中显示 Retina

> ID：11474474
> 
> 赞同：0
> 
> 时间：2012-07-13T16:24:33.120
> 
> 标签：ios, plist, retina-display

这是一个奇怪的要求，但我希望能够要求设备具有视网膜显示器才能构建应用程序。是否有我可以添加到我的 plist 以添加构建要求的键和值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:33:05.807

您可以检查是否有前置摄像头，并将其设置在 info.plist UIRequiredDeviceCapabilities 键中。

```
<key>UIRequiredDeviceCapabilities</key>
<array>
    <string>front-facing-camera</string>
</array> 
```

在这里查看更多详细信息： [iPhoneOSKeys](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

顺便说一句，这只适用于 iPhone。

# windows - Windows 的作业/任务队列管理器

> ID：11474475
> 
> 赞同：2
> 
> 时间：2012-07-13T16:24:36.467
> 
> 标签：windows

**我正在使用一个简单的 GUI 来按顺序**启动一堆脚本/应用程序（无调度）。一种简单的可视化任务/队列启动器/管理器。在网络上搜索这个非常困难：术语“作业队列”、“任务”、“经理”被广泛使用！

# php - 保存表行jquery ui可排序的新位置，MySQL

> ID：11474478
> 
> 赞同：1
> 
> 时间：2012-07-13T16:24:48.477
> 
> 标签：php, jquery, mysql, jquery-ui, jquery-ui-sortable

我想允许用户对从数据库派生的表行进行排序并将新位置保存在数据库 中问题是在数据库 mysql 表**中的界面中没有更新位置：**`id int primary key auto_increment, sort int, author_affliation varchar, author_email varchar`

脚本：

```
$('#myTable tbody').sortable({
                    start: function (event, ui) {
                        //fix firefox position issue when dragging.
                        if (navigator.userAgent.toLowerCase().match(/firefox/) && ui.helper !== undefined) {
                            ui.helper.css('position', 'absolute').css('margin-top', $(window).scrollTop());
                            //wire up event that changes the margin whenever the window scrolls.
                            $(window).bind('scroll.sortableplaylist', function () {
                                ui.helper.css('position', 'absolute').css('margin-top', $(window).scrollTop());
                            });
                        }
                    },
                    beforeStop: function (event, ui) {
                        //undo the firefox fix.
                        if (navigator.userAgent.toLowerCase().match(/firefox/) && ui.offset !== undefined) {
                            $(window).unbind('scroll.sortableplaylist');
                            ui.helper.css('margin-top', 0);
                        }
                    },
                    helper: function (e, ui) {
                        ui.children().each(function () {
                            $(this).width($(this).width());
                        });
                        return ui;
                    },
                    scroll: true,
                    update: function (event, ui) {
                        serial = $(this).sortable('serialize');
                        $.ajax({
                            url: "sort_coauthors.php",
                            type: "POST",
                            data: serial,
                            success: function(response) {
                              alert(response);
                            },
                            error: function(){
                                alert("theres an error with AJAX");
                            }
                        });
                    }
                }).disableSelection(); 
```

排序合著者：

```
@mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db("mydb") or die(mysql_error());

if (isset($_POST['menu']) && is_array( $_POST['menu'])) {
$menu = $_POST['menu'];
for ($i = 0; $i < count($menu); $i++) {
    $q = mysql_query("UPDATE `co_authors` SET `sort`=" . $i . " WHERE `id`='" . intval($menu[$i]) . "'") or die(mysql_error());
if($q) {
    echo "success";
}
}
}
else {
    echo "fail";
} 
```

主页：

```
while ($row = mysql_fetch_assoc($co_authors)) {

                    echo "<tbody><tr id='menu_" . $row['id'] . "'><td>{$row['author_email']}</td>
                     <td>{$row['coauthor_affliation']}</td>";
                    ?><td><button class='remove' id='remove' name='remove' email="<?php echo $row['author_email'] ?>"
                            paper="<?php echo $row['paper_id'] ?>">Remove</button></td> 
```

# sql - 会计交易表设计

> ID：11474479
> 
> 赞同：3
> 
> 时间：2012-07-13T16:24:49.147
> 
> 标签：sql, accounting, process-accounting

我有以下会计表：

[http://sqlfiddle.com/#!3/b93f3/2](http://sqlfiddle.com/#!3/b93f3/2)

我的交易详情表有以下字段：

```
[transdetailid] [int] IDENTITY(1,1) NOT NULL,
    [transid] [int] NOT NULL,
    [debitaccount] [varchar](10) NOT NULL,
    [creditaccount] [varchar](10) NOT NULL,
    [amount] [money] NOT NULL,
    [isdebit] [bit] NOT NULL,
    [isactive] [bit] NOT NULL, 
```

我认为这张桌子还可以，但我的问题是关于会计交易......

示例：电力承包商向我收取了 1,000 美元的电梯服务费用，然后我将这些信息记录如下：

```
transdetailid   transid debitaccount    creditaccount   amount  isdebit isactive
    1              1    REPAIRS INCOME   ACC PAYABLE    1300.00    1        1 
```

然后我将不得不支付该账单，因此我进入下一笔交易：

```
transdetailid   transid debitaccount    creditaccount   amount  isdebit isactive
    2              2    ACC PAYABLE     BANK ACCT       1300.00    0        1 
```

在这里，我可以看到“应付账款”**余额**为**0**，但是**维修收入**呢...？如果我进行查询，它会说维修收入仍为 1,300，我想我必须添加另一个字段或其他内容，以便我知道付款交易也会扼杀维修收入。

有什么线索吗？希望我能清楚地解释这一点..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:43:09.830

您偶然发现的是交易和报告之间的区别。

您的数据库设计存在缺陷，因为您没有将账单与付款联系起来。顺便说一句，这可能非常具有挑战性。通常，由于缺乏更好的词，它是通过使用供应商来完成的。账单来自供应商，付款给供应商。

您可能想在付款记录中包含计费交易。这是一个坏主意，因为这意味着每笔付款必须与一张账单完全匹配。部分付款会怎样？同时支付多张账单怎么办？滞纳金怎么办？

您需要修改您的结构，以包含有关谁在收费以及谁在获得报酬的信息。

# oracle - 使用oracle序列时的sqlplus set命令

> ID：11474483
> 
> 赞同：1
> 
> 时间：2012-07-13T16:24:59.960
> 
> 标签：oracle, sqlplus

从 sqlplus 会话返回数据时，我通常使用以下 set 命令来抑制除数据之外的所有内容。

```
Connected to:
Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - 64bit Production
With the Partitioning, OLAP and Data Mining options

SQL> select sysdate from dual;

SYSDATE
---------
13-JUL-12

SQL> set pagesize 0 feedback off ver off heading off echo off;
SQL> select sysdate from dual;
13-JUL-12 
```

但是，当尝试从序列中获取数据时，似乎正在自动添加一个选项卡。是否需要设置另一个 sqlplus 参数？

```
SQL> select test_seq.nextval from dual;
         2

SQL> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:32:47.020

你可以[`set tab off`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2683445)，但这不是问题——你只会得到空格而不是制表符。序列值是一个数字，SQL*Plus 将数字左填充到列的宽度。如果您显示标题，您会看到它与（伪）列标题的最右侧字符对齐。

阻止它的最简单方法是，因为您不知道值的大小，因此无法真正设置具有所需字符数的格式掩码，只需执行以下操作：

```
select to_char(test_seq.nextval) as my_val from dual; 
```

如果您选择的列不止一列，但每个值之间仍会出现多个空格。

**编辑添加**：实际上这还不够完整。您也可以[`set numformat`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2699195)使用我斜指的格式掩码；并且还可以[`set numwidth`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2699209)。但`numwidth`必须至少为 2，因此您仍然会在一位数之前获得一个空格（我认为允许符号）；如果数字有太多数字，它将显示`#`。如果列标题长于`numwidth`它仍然会保留它。更多信息[在这里](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_six.htm#sthref554)。

# django - 从我的 django 应用程序发推文

> ID：11474488
> 
> 赞同：2
> 
> 时间：2012-07-13T16:25:35.217
> 
> 标签：django, jquery, twitter

我有以下 jQuery 代码可以从我的 Django 应用程序中发送推文。它按原样完美运行，但是有没有办法知道我当前的用户是否发了推文？我想在用户发推文时将布尔属性设置为 true。关于如何做到这一点的任何想法？

```
!function(d,s,id,emp){
    var js,fjs=d.getElementsByTagName(s)[0];
    if(!d.getElementById(id)){
        js=d.createElement(s);
        js.id=id;
        js.src="//platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js,fjs);
        }}(document,"script","twitter-wjs"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:15:10.540

Since Javascript is runs in browser an Django is running on server side, I think you will have to make a request to your server that will tell Django the current user has tweeted, this means you will have to create a view that will handle that request.

# wpf - 编辑一个数据网格会改变另一个数据网格

> ID：11474493
> 
> 赞同：1
> 
> 时间：2012-07-13T16:25:53.597
> 
> 标签：wpf, data-binding, datagrid, wpfdatagrid

绑定到单独的 ObservableCollections 的两个 WPF 数据网格有一个奇怪的问题。

这是我的 XAML：

```
<Grid Name="gridShifts">
<Grid.ColumnDefinitions>
    <ColumnDefinition/>
    <ColumnDefinition/>
</Grid.ColumnDefinitions>
    <Custom:C1DataGrid Name="dgShift1"
                       HorizontalAlignment="Left" AutoGenerateColumns="False" CanUserAddRows="False" CanUserRemoveRows="False" CanUserReorderColumns="False" Grid.Column="0">
        <Custom:C1DataGrid.Columns>
            <Custom:DataGridTextColumn Binding="{Binding Path=Type, Mode=TwoWay}" IsReadOnly="True"  Header="Work Center"/>
            <Custom:DataGridTextColumn Binding="{Binding Path=RegularSkill, Mode=TwoWay }" Header="Personnel"/>
        </Custom:C1DataGrid.Columns>
    </Custom:C1DataGrid>
    <Custom:C1DataGrid Name="dgShift2"
                       HorizontalAlignment="Left" AutoGenerateColumns="False" CanUserAddRows="False" CanUserRemoveRows="False" CanUserReorderColumns="False" Grid.Column="1">
        <Custom:C1DataGrid.Columns>
            <Custom:DataGridTextColumn Binding="{Binding Path=Type, Mode=TwoWay}" IsReadOnly="True"  Header="Work Center"/>
            <Custom:DataGridTextColumn Binding="{Binding Path=RegularSkill, Mode=TwoWay }" Header="Personnel"/>
        </Custom:C1DataGrid.Columns>
    </Custom:C1DataGrid>
</Grid> 
```

这是我背后的代码：

```
public partial class MainWindow : Window
{
    AMMData.Manpower mp = new AMMData.Manpower();

    public MainWindow()
    {
        InitializeComponent();

        gridShifts.DataContext = mp;
        dgShift1.ItemsSource = mp.WorkShifts[0].WCList;
        dgShift2.ItemsSource = mp.WorkShifts[1].WCList;

    }
} 
```

编辑：这是人力资源类：

```
public enum WCSpecialty
{
    Indirect,
    Airframes,
    AviationLifeSupport,
    PeriodicMaintenance,
    Electronics,
    Electrical_Instruments,
    Armaments,
    Reconnaissance,
    Line,
    NA
}

public class Manpower : ComponentDataWrapper
{
    #region Private Properties

    private ObservableCollection<WCCollection> workShifts = new ObservableCollection<WCCollection>();

    #endregion

    #region Public Properties

    public ObservableCollection<WCCollection> WorkShifts { set { workShifts = value; NotifyPropertyChanged("WorkShifts"); } get { return workShifts; } }

    #endregion

    public Manpower()
    {
        Name = "New Work Center Structure";
        Description = "New Work Center Personnel Description";
        LastChanged = System.DateTime.Now;

        var wcc1 = new AMMData.WCCollection();
        var wcc2 = new AMMData.WCCollection();

        var wc1 = new AMMData.WorkCenter { Type = AMMData.WCSpecialty.Indirect, RegularSkill = 0, MedSkill = 999, HighSkill = 999 };
        var wc2 = new AMMData.WorkCenter { Type = AMMData.WCSpecialty.Airframes, RegularSkill = 0, MedSkill = 999, HighSkill = 999 };
        var wc3 = new AMMData.WorkCenter { Type = AMMData.WCSpecialty.AviationLifeSupport, RegularSkill = 0, MedSkill = 999, HighSkill = 999 };
        var wc4 = new AMMData.WorkCenter { Type = AMMData.WCSpecialty.PeriodicMaintenance, RegularSkill = 0, MedSkill = 999, HighSkill = 999 };
        var wc5 = new AMMData.WorkCenter { Type = AMMData.WCSpecialty.Electronics, RegularSkill = 0, MedSkill = 999, HighSkill = 999 };
        var wc6 = new AMMData.WorkCenter { Type = AMMData.WCSpecialty.Electrical_Instruments, RegularSkill = 0, MedSkill = 999, HighSkill = 999 };
        var wc7 = new AMMData.WorkCenter { Type = AMMData.WCSpecialty.Armaments, RegularSkill = 0, MedSkill = 999, HighSkill = 999 };
        var wc8 = new AMMData.WorkCenter { Type = AMMData.WCSpecialty.Reconnaissance, RegularSkill = 0, MedSkill = 999, HighSkill = 999 };
        var wc9 = new AMMData.WorkCenter { Type = AMMData.WCSpecialty.Line, RegularSkill = 0, MedSkill = 999, HighSkill = 999 };
        var wc10 = new AMMData.WorkCenter { Type = AMMData.WCSpecialty.NA, RegularSkill = 0, MedSkill = 999, HighSkill = 999 };

        wcc1.WCList.Add(wc1);
        wcc1.WCList.Add(wc2);
        wcc1.WCList.Add(wc3);
        wcc1.WCList.Add(wc4);
        wcc1.WCList.Add(wc5);
        wcc1.WCList.Add(wc6);
        wcc1.WCList.Add(wc7);
        wcc1.WCList.Add(wc8);
        wcc1.WCList.Add(wc9);
        wcc1.WCList.Add(wc10);

        wcc2.WCList.Add(wc1);
        wcc2.WCList.Add(wc2);
        wcc2.WCList.Add(wc3);
        wcc2.WCList.Add(wc4);
        wcc2.WCList.Add(wc5);
        wcc2.WCList.Add(wc6);
        wcc2.WCList.Add(wc7);
        wcc2.WCList.Add(wc8);
        wcc2.WCList.Add(wc9);
        wcc2.WCList.Add(wc10);

        WorkShifts.Add(wcc1);
        WorkShifts.Add(wcc2);

    }
}

public class WCCollection : ComponentDataWrapper
{
    private ObservableCollection<WorkCenter> wcList = new ObservableCollection<WorkCenter>();

    public ObservableCollection<WorkCenter> WCList { set { wcList = value; NotifyPropertyChanged("WCList"); } get { return wcList; } }
}

    public class WorkCenter : ComponentDataWrapper
{
    #region private

    private WCSpecialty type;
    private int regularSkill;
    private int highSkill;
    private int medSkill;

    #endregion

    #region public

    public WCSpecialty Type { set { type = value; NotifyPropertyChanged("Type"); } get { return type; } }
    public int RegularSkill { set { regularSkill = value; NotifyPropertyChanged("RegularSkill"); } get { return regularSkill; } }
    public int HighSkill { set { highSkill = value; NotifyPropertyChanged("HighSkill"); } get { return highSkill; } }
    public int MedSkill { set { medSkill = value; NotifyPropertyChanged("MedSkill"); } get { return medSkill; } }

    public int RegularWholePeople { get { return regularSkill / 10; } }

    #endregion
} 
```

我的问题是，当我编辑一个数据网格时，另一个的值也会改变。我已经尝试将两个网格的数据上下文设置为它们各自的 ObservableCollections，但同样的事情发生了。我觉得我现在对 WPF 数据绑定的工作方式比较熟悉，但我完全被这个问题难住了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:03:40.043

看起来您的项目是`ObservableCollections`通过引用而不是按价值添加到您的。

这意味着两个集合都包含对内存中同一对象的引用，因此更新一个集合中的对象实际上是更新单个对象引用，这会导致另一个集合也更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:05:48.257

您已经将 mp 对象传递给 DataGrid。因此，无需使用后面的代码传递集合。

像这样更新您的绑定：

```
<Custom:DataGridTextColumn Binding="{Binding ElementName=gridShifts, Path=DataContex.WorkShifts[0].WCList Mode=TwoWay}" IsReadOnly="True"  Header="Work Center"/> 
```

您还应该`CollectionViewSource`为您的数据源使用实例，如此处[WPF 的 CollectionViewSource](http://bea.stollnitz.com/blog/?p=387)所示。这是一种更简洁的设计，以后可能会带来好处。

# wordpress - WordPress电子商务数字下载动态产品

> ID：11474495
> 
> 赞同：0
> 
> 时间：2012-07-13T16:26:01.020
> 
> 标签：wordpress, download, e-commerce, digital-downloads

有人可以告诉我如何在 Wordpress 电子商务中拥有动态数字产品吗？

即，我有一个信息数据库，可以从中生成报告。我希望用户能够搜索关键字，使用它可以搜索数据库并生成报告。报告的成本是从数据库动态生成的。现在我向用户显示结果，我希望能够将此产品添加到购物车中。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:07:28.907

对于带有 WP 电子商务的 WP 来说，这是一项相当繁重的工作。您希望： - 用户能够动态生成报告 - 报告的成本也是动态的

这两个功能是可能的，但并未真正与该设置结合。我建议重新考虑你的商业模式，让它更常见（因此更有可能得到支持。）

一些示例： - 向用户收取访问该站点的费用，允许他们生成固定的每日/每周/每月报告...费用 - 提供预定义的报告。您可能会提供类似于动态定价的报告变体。

如果您可以设置预定义的报告，您可能会设置它们，以便下载链接将 URL 中的参数传递到从数据库中提取报告内容的 Web 服务。

# c# - C# 文件关联：将双击的文件路径传递给字符串

> ID：11474505
> 
> 赞同：4
> 
> 时间：2012-07-13T16:26:37.943
> 
> 标签：c#

我最近为 C# 制作了一个类似记事本的程序，并找到了一个使用文件关联的库。我想知道如何将在资源管理器中双击的文件的路径传递给一个字符串，以便文件可以读取和“打开”文本文件（就像记事本一样）。我google了一段时间，问了几个论坛，还有我的朋友。任何正确方向的答案或轻推表示赞赏。谢谢你

（注意：我已经尝试从其他人建议的`string[] args`参数中读取它）`Main()`

编辑：已解决，它是`args[0]`. 当我开始做这个的时候我真的很累

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:37:19.260

这对我来说很好！

```
public static void Main(string[] args){            
     if (args.Length == 0){
       // Show your application usage or show an error box              
       return;
     }
     string file = args[0];
     Application.Run(new MyProgram(file));           
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T16:33:12.010

建议是正确的，您在资源管理器中双击的文件名将作为 args 参数在您的应用程序中可见。然后你可以用它做你喜欢的事，比如打开一个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:39:49.720

我刚刚制作了以下程序

使用此程序打开文件时，它会告诉我文件的路径。

```
class Program
{
    static void Main(string[] args)
    {

        Console.WriteLine(args.Length);
        foreach (string s in args)
        {
            Console.WriteLine(s);
        }
        Console.ReadLine();

    }
} 
```

我的输出是

```
1
C:\Users\MyUserName\Documents\Visual Studio 2010\Projects\ConsoleApplication1\ConsoleApplication1\bin\Debug\New Text Document.txt 
```

您可能想通过使用 file.openWith 来执行类似的程序，看看会发生什么。

# android - Android Webview 打开会话相关页面

> ID：11474511
> 
> 赞同：0
> 
> 时间：2012-07-13T16:27:00.487
> 
> 标签：android, wordpress, webview

我想在 android webview 中打开一个 wordpress 页面

该页面的 URL 是：“http://www.mydomain.com/dashboard”

用户完成登录并维护 wordpress 会话后，仪表板页面出现。

现在我的问题是我可以发送登录参数或其他东西来维护 wordpress 会话以直接在 android 中打开仪表板页面吗？

任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:13:23.740

最后我自己解决了这个问题，

脚步：

1）在我在android webview中使用的服务器上创建了一个php文件 2）在那个php文件中，我使用自动登录的wordpress功能来创建wordpress会话，因为wp会话与其他会话不同。3）自动登录后，我将用户重定向到仪表板页面

很简单嗯？

# css - IE8 的 css3-mediaqueries.js 导致我的网站页面闪烁

> ID：11474518
> 
> 赞同：1
> 
> 时间：2012-07-13T16:27:28.800
> 
> 标签：css, internet-explorer-8, media-queries

媒体查询在 IE8 中使用 css3-mediaqueries.js 工作得很好，但是当页面加载时它会闪烁相同的秒数。

当我删除此脚本时，良好的布局和闪烁消失了。

有谁知道如何阻止这种闪烁？

这是 mij HTML 代码：

```
<!DOCTYPE html> 
<!--[if IE 6]>
<html id="ie6" dir="ltr" lang="en-US">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" dir="ltr" lang="en-US">
<![endif]-->
<!--[if IE 8]>
 <html id="ie8" dir="ltr" lang="en-US">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html dir="ltr" lang="en-US">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />

<title>Algemeen | testWebsite</title>

<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://localhost/wordpress/wp-content/themes/sub_marm_theme/style.css" />
<link rel="pingback" href="http://localhost/wordpress/xmlrpc.php" />

<!--[if lte IE 8]>
<script src="http://localhost/wordpress/wp-content/themes/marm_site/js/html5.js" type="text/javascript"></script>
<script src="http://localhost/wordpress/wp-content/themes/marm_site/js/css3-mediaqueries.js"></script>
<link rel="stylesheet" type="text/css" href="http://localhost/wordpress/wp-content/themes/marm_site/style_ie8.css" /> 
<![endif]-->

<!--[if !(lte IE 8)]><!-->
<link rel="stylesheet" type="text/css" media="all and (max-width:800px)" href="http://localhost/wordpress/wp-content/themes/marm_site/style800.css" />
<link rel="stylesheet" type="text/css" media="all and (min-width:801px)" href="http://localhost/wordpress/wp-content/themes/marm_site/style_gt_800.css" /> 

<![endif]-->

<link rel="alternate" type="application/rss+xml" title="testWebsite &raquo; Feed" href="http://localhost/wordpress/feed/" />
<link rel="alternate" type="application/rss+xml" title="testWebsite &raquo; Comments Feed" href="http://localhost/wordpress/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="testWebsite &raquo; Algemeen Comments Feed" href="http://localhost/wordpress/fullservice-softwarebedrijf/feed/" />
<script type='text/javascript' src='http://localhost/wordpress/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript' src='http://localhost/wordpress/wp-content/plugins/font-resizer/js/jquery.cookie.js?ver=3.3.1'></script>
<script type='text/javascript' src='http://localhost/wordpress/wp-content/plugins/font-resizer/js/jquery.fontsize.js?ver=3.3.1'></script>
<script type='text/javascript' src='http://localhost/wordpress/wp-content/plugins/font-resizer/js/main.js?ver=3.3.1'></script>
<script type='text/javascript' src='http://localhost/wordpress/wp-includes/js/jquery/jShowOff/jquery.jshowoff.min.js?ver=3.3.1'></script>
<script type='text/javascript' src='http://localhost/wordpress/wp-includes/js/comment-reply.js?ver=20090102'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://localhost/wordpress/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://localhost/wordpress/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Mailformulier' href='http://localhost/wordpress/internetbureau_mailformulier/' />
<link rel='next' title='Rightcolumn goede service' href='http://localhost/wordpress/rightcolumn-goede-service/' />
<meta name="generator" content="WordPress 3.3.1" />
<link rel='canonical' href='http://localhost/wordpress/fullservice-softwarebedrijf/' />

</head>

<body class="page page-id-1069 page-child parent-pageid-2 page-template page-template-overMarm-php single-author singular one-column sidebar-content-sidebar">
<div id="page" class="hfeed">
    <header id="branding" role="banner">

                        <a href="http://localhost/wordpress/">
                                    <img src="http://localhost/wordpress/wp-content/uploads/2012/06/internetbureau-logo.png" width="230" height="73" alt="" />
                            </a>
            <div class="marm-Header2"> </div>

            <h2 id="site-description">Le ghhj jhj hljh kjet marketing</h2>

            <nav id="access" role="navigation">
                <h3 class="assistive-text">Main menu</h3>
                                <div class="skip-link"><a class="assistive-text" href="#content" title="Skip to primary content">Skip to primary content</a></div>
                <div class="skip-link"><a class="assistive-text" href="#secondary" title="Skip to secondary content">Skip to secondary content</a></div>
                                <div class="menu-marm_menu-container"><ul id="menu-marm_menu" class="menu"><li id="menu-item-334" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-334"><a href="http://localhost/wordpress/">Home</a></li>
<li id="menu-item-257" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-257"><a href="#">Diensten</a>
<ul class="sub-menu">
    <li id="menu-item-261" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-261"><a href="#">Software ontwikkeling</a>
    <ul class="sub-menu">
        <li id="menu-item-264" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-264"><a href="http://localhost/wordpress/webdiensten/web-applicaties/">Webdiensten</a></li>
        <li id="menu-item-263" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-263"><a href="http://localhost/wordpress/producten-en-diensten/software/mobiele-applicatie-website/">Mobiel</a></li>
        <li id="menu-item-510" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-510"><a href="http://localhost/wordpress/producten-en-diensten/software/desktopapplicaties/">Cloud</a></li>
    </ul>
</li>
    <li id="menu-item-487" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-487"><a href="http://localhost/wordpress/producten-en-diensten/beheer/">Onderhoud en beheer</a></li>
    <li id="menu-item-265" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-265"><a href="http://localhost/wordpress/producten-en-diensten/design/">Design | ontwerp</a></li>
    <li id="menu-item-259" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-259"><a href="http://javascript:void(0);">IT advies</a></li>
    <li id="menu-item-514" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-514"><a href="http://localhost/wordpress/producten-en-diensten/webmarketing/">Internet marketing</a></li>
</ul>
</li>
<li id="menu-item-269" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor current-menu-ancestor current-menu-parent current-page-parent current_page_parent current_page_ancestor menu-item-269"><a href="#">Over testWebsite</a>
<ul class="sub-menu">
    <li id="menu-item-1078" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-1069 current_page_item menu-item-1078"><a href="http://localhost/wordpress/fullservice-softwarebedrijf/">Algemeen</a></li>
    <li id="menu-item-267" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-267"><a href="http://localhost/wordpress/missie_internetbureau/">Missie en visie</a></li>
    <li id="menu-item-827" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-827"><a href="http://localhost/wordpress/contactgegevens_softwarebedrijf/">Contactgegevens</a></li>
</ul>
</li>
<li id="menu-item-266" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-266"><a href="http://localhost/wordpress/portfolio/">Portfolio</a></li>
</ul></div>         </nav><!-- #access -->
    </header><!-- #branding -->
<ul class="breadcrumb_trail"><p id="breadcrumbs">                                                             <a href="http://localhost/wordpress/"></a><a href="#">Over testWebsite</a><font> &raquo;</font> Algemeen</p></ul>

    <div id="main"> <div id="maincontent">

<article id="post-1069" class="post-1069 page type-page status-publish hentry">
    <header class="entry-header">
        <h1 class="entry-title">Algemeen</h1>
    </header><!-- .entry-header -->

    <div class="entry-content">
        <p>testWebsite is een full rnetburu dat ont en bow hj iel. hkjhjkh h h hh  hjhjh jhlhlhjk hhh jhh k hkhjhkjh h jhljhjh jhjkhjkh jhjkhjh jhjh maken.</p>

            </div><!-- .entry-content -->

</article><!-- #post-1069 -->

                        <div id="comments">

</div><!-- #comments -->

    </div>          
     <div class="separator"></div>  
    <div id="marm_right_column">

         <div class="marm_strkPn">
            <h2>On ten </h2>             

             <h3><a class="strkpnt_arrow" href="javascript:void(0);"><span>Siel</span></a> </h3>
              <div> <blockquote>Keep le!</blockquote>
<ul class="simpelElements">
    <li><span>Duide praken</span></li>
    <li><span>Overzic jke we </span></li>
    <li><span>Hele men</span></li>
    <li><span>Spr ign</span></li>
    <li><span>Gebruik ndelijke sware</span></li>
</ul></div>

             <h3><a class="strkpnt_arrow" href="javascript:void(0);"><span>Voic omer</span></a> </h3>
              <div> <blockquote>Mjkhjhjkhs wen!</blockquote>
Wij vertalen de st sdfdfte product/dienst en meten wij:
<ul>
    <li><span>Klajhenheid</span></li>
    <li><span>Klanving</span></li>
    <li><span>Aanbeheid</span></li>
</ul>
Om on jh hkj kjhkj h jkhhj erberen.</div>

             <h3><a class="strkpnt_arrow" href="javascript:void(0);"><span>Product op maat</span></a> </h3>
              <div> <blockquote>Wj denke hghgjhgjhn wat u zt.</blockquote>
Sam met u m jhjhj jkh , wensen en verwacfgfg htingen voldoet.
Uiterds d aard  gven wij u advffgfgiezen,  ondegfdfd rsteungen op maat.</div>

        </div>

        <div class="home_hulp">
            <h2>Waar ghghjgn j u pen</h2>
<p><img class="contactfoto" title="marmfoto1" src="http://localhost/wordpress/wp-content/uploads/2012/03/marmfoto1.jpg" alt="" /><br />
oor  speciale wense  hghg gjhghj ghghjgct infoatie a.</p>
             <div><a class="hulpinfo"href="http://localhost/wordpress/internetbureau_mailformulier"></a></div>
        </div>
    </div>  

    <footer id="doormat" role="contentinfo">

         <div class="doormat-item" style="border-right: 1px solid #FFFFFF;">
            <h2>In deze website</h2>
            <ul>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="http://localhost/wordpress/over-ons/informatie_adres/">Algemeen</a></li>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="http://localhost/wordpress/contactgegevens_softwarebedrijf/">Contact</a></li>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="http://localhost/wordpress/over-ons/sitemap/">Sitemap</a></li>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="http://localhost/wordpress/softwarebedrijf-info">Privacybeleid</a></li>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="http://localhost/wordpress/softwarebedrijf/disclaimer/">Disclaimer</a></li>
                            </ul>
        </div>

        <div class="doormat-item">
            <h2>Nieuws</h2>
            <ul>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="http://localhost/wordpress/nieuws/nieuws1/">HTML5 en CSS3</a></li>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="http://localhost/wordpress/nieuws/nieuws2/">Web 3.0</a></li>
                            </ul> 
        </div>

        <div class="doormat-item" style="border-right: 1px solid #FFFFFF; border-left: 1px solid #FFFFFF;">
            <h2>Een greep uit onze projecten</h2>
            <ul>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="#http://localhost/wordpress/projecten/websites-bouwe/">qqqqq</a></li>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="#http://localhost/wordpress/projecten/website-ontwer/">hhhhhh</a></li>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="#http://localhost/wordpress/projecten/website-desig/">jjjjj</a></li>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="#http://localhost/wordpress/projecten/cloud-ap/">jhjhjhj</a></li>
                                    <li><img src="/wordpress/wp-content/images/arrow-right-icon.png"/><a href="#http://localhost/wordpress/projecten/logo-ontwer/">Logo&#8217;s</a></li>
                            </ul> 
        </div>
        <div class="doormat-item">
            <h2>Vosl  op</h2>
        </div>      

    </footer><!-- #marm_footer -->

</div><!-- #main -->

</div><!-- #page -->

</body>
</html> 
```

这是css代码

```
/*
Theme Name:     hhghjtgh
Theme URI:      http://example.com/
Description:    jk j j k jk jkj sad kjds jsldk jskld skdjkls d
Author:         MARC T. 
Author URI:     http://example.com/about/
Version:        0.2
Template:       masite 
*/

@import url("./css/style.css");  /* wordpress.org css*/ 

@media screen and (min-width: 801px){

div.marm-Header2{
position: absolute;
z-index:-1;
top: 0;
right:0;
width: 200px;
height: 115px;
background: no-repeat url('../marm_site/images/headers/header2.png') right center;
float: right;

}

img.size-full, img.size-large {
    opacity: 1.0;
    image-rendering:-webkit-optimize-contrast;
  }

  img.technologo {
    float:left;
    height: auto;
    width: 130px;
    margin:0 10px 5px 0;
    clear:left;
}

.singular .hentry {
border-bottom: medium none;
padding: 0;
position: relative;
}

  .design-ontwerp{
  float:left;
  margin-right:15px;
  }

 .ontwerp_block {
  border-style:solid;
border-bottom:dotted #E5E5E5 ;
border-bottom-width: thin; 
padding:25px 0;
  }
.category-nieuws {
border-bottom: medium none;
padding: 0;
position: relative;
margin-top:0;
} 

ol#mediaList li {
    list-style: none outside none;
    margin: 0 0 0em 0em;
}

/* Path mavigation */
.breadcrumb_trail { 
    font: 11px Arial, Helvetica, sans-serif; 
    height:25px; 
    line-height:30px; 
    color:#9b9b9b; 
    width:94%; 
    overflow:hidden;
    margin-left:30px; 
    padding:0px; 
}

.breadcrumb_trail a {
height:10px; 
padding-right: 1px; 
text-decoration: none; 
color:#454545; 
} 

.breadcrumb_trail font{
color:#006600; 
} 

.breadcrumb_trail a:hover { color:#006600; } 

.current-menu-item a, .current-menu-item:hover > a, .current-menu-item:focus > a, .current-menu-item:active >a{

color:#0066A1;
}

#sociale_media{
behavior: url(http://localhost/wordpress/wp-includes/css/pie/pie.htc);
position: relative;
z-index: 1;
float: left;
border-radius: 15px;
border:1px solid #000;
width:300px;
height: auto;
border-radius: 15px;
border:1px solid #D0D0D0   ;
margin-bottom: 10px;
padding: 0px;
} 

#site_beveiliging{
behavior: url(http://localhost/wordpress/wp-includes/css/pie/pie.htc);
position: relative;
z-index: 1;
float: left;
border-radius: 15px;
border:1px solid #000;
width:280px;
height: auto;
border-radius: 15px;
border:1px solid #D0D0D0   ;
margin: 0 10px 0 10px;
padding: 0px;
} 

#site_verkeer{
behavior: url(http://localhost/wordpress/wp-includes/css/pie/pie.htc);
position: relative;
z-index: 1;
float: left;
border-radius: 15px;
border:1px solid #000;
width:210px;
height: auto;
border-radius: 15px;
border:1px solid #D0D0D0   ;
margin: 0 10px 0 10px;
padding: 0px;

} 

/* ****** Footer */
#doormat {
behavior: url(http://localhost/wordpress/wp-includes/css/pie/pie.htc);
position: relative;
z-index: 1;
clear: both;
width: 99%;
text-align:center;
height:160px;
border-radius: 15px 15px 0 0;
border:1px solid #D8D8D8    ;
background-color:#E8E8E8 ;
margin-right:10px;

}

.doormat-item {
float: left;
width: 24%;
padding-bottom: 10px;
bottom: 0px;
}
.doormat-item ul {
bottom: 0px;
} 

address{
    border: 0 none;
    font-family: inherit;
    font-size: 82%;
    font-style: normal;
    font-weight: normal;
    margin: 0;
    padding: 0;
    text-align: left;
    color: #707070 ;
}   

ul, ol {

    margin: 10px 0 0em 0em;
}
ul li{
padding-left: 1em;
border-bottom: 1px solid #F0F0F0 ;
font-weight: bold;
} 

#access ul ul li{
padding-left: 0em;
border-bottom: 2px solid #FFFFFF ;
font-weight: bold;
background:#006600 ;
} 

ol li{
border-bottom: 1px solid #F0F0F0 ;
font-weight: bold;
padding-left: 30px;
} 

.groep_diensten ol li, .groep_diensten ul li{
margin-left:0px;
padding-left:0px;
}

.doormat-item ul li{
margin-left:0px;
padding-left:0px;
}

.doormat-item ul li img, .groep_diensten ol li  img, .groep_diensten ul li img{
float:left;
height:18px;
width:25px;

}

#doormat ul {
    list-style: none;
}
.groep_diensten  h2{
behavior: url(http://localhost/wordpress/wp-includes/css/pie/pie.htc);
position: relative;
z-index: 1;
font-size: 12px;
padding: 5px 20px 0px;
margin: 0;
margin-left: 0px;
background:#F8F8F8 ;
background: -moz-linear-gradient(#F8F8F8  , #E5E5E5) repeat scroll 0 0 transparent;
border-radius: 15px 15px 0 0;
color: #006600;
font-weight: bold;
}

ul.ulzonderbold  li{
 border-bottom: none;
 font-weight: normal;
 padding-left: 6px;
 margin-left:15px;
 list-style-type:disc;
}
.groep_diensten  ul a {
color:#383838  ;
font-weight: normal;
font-size: 13px;
margin-bottom:2px;
text-decoration:none;
}

.entry-header .comments-link a:hover,
.entry-header .comments-link a:focus,
.entry-header .comments-link a:active {
    background-color: #1982d1;
    color: #fff;
    color: rgba(255,255,255,0.8);
}
.contactfoto {
    border-radius: 15px 0 0 0;
    float: left;
    height: 140px;
    margin: 0 10px 0 0;
    padding: 9px 0 0 1px;
    width: 110px;
    z-index: 1;
}

.marm_copyright{
width: 40%;
bottom: 10px;
font-style:italic;
font-size:12px;
padding: -20px;
}

ol#mediaList{
list-style-type:none;
}

#doormat ul li {
    list-style: outside none;
    margin:0 0.3em;
    color:#006600;
}
#doormat ul li a{
    color:#000000;
    font-size:13px;
}

#doormat h2 {
    display:inline;
    font-size: 11px;
    font-weight: bold;
    color: #0072BC;
    padding: 5px;
    margin:10px;
    border-bottom: 1px dotted #0072BC;
    }

.marm_strkPn {
height: auto;
/* border-radius voor IE*/
behavior: url(http://localhost/wordpress/wp-includes/css/pie/pie.htc);
position: relative;
z-index: 1;
border-radius: 10px;
padding:9px 0 0;
background-color: #FFFFFF ;
-webkit-box-shadow: 5px 5px 5px #D8D8D8  ;
box-shadow: 2px 3px 5px #D8D8D8  ;
border: 1px solid #D8D8D8 ;
margin-right: 0px;
}

.mobieleApp {
color: #0072BC;
font-weight: bold;
font-size:12px;
margin-left: 8px;
padding-top:10px;
}

.mobieleApp  h2{
color: #0072BC;
font-weight: bold;
font-size:12px;
margin-left: 8px;
padding-top:10px;
} 

.ophetmenu h2, .marm_strkPn h2{
/* border-radius voor IE*/

position: relative;
z-index: 1;
font-size: 13px;
padding:5px 0 0 0;
text-align: center ;
margin: -10px -2px 2px -1px;
background: #A0A0A0; 
filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, startColorStr="#A0A0A0", endColorStr="#E5E5E5"); /* gradient voor IE8 en lager */
height: 1%;
background: -moz-linear-gradient(#A0A0A0 , #E5E5E5) repeat scroll 0 0 transparent;
background: -ms-linear-gradient(#A0A0A0 , #E5E5E5) repeat scroll 0 0 transparent; /* gradient voor IE10 en hoger*/
background: linear-gradient(#A0A0A0 , #E5E5E5) repeat scroll 0 0 transparent;
width: 100%;
border-radius: 10px 10px 0 0;
 border: 1px solid #B0B0B0 ;
color: #0072BC;
font-weight: bold;

}
.marm_strkPn h3 {
clear:left;
margin: 1px;
border:1px solid    #E5E4E9     ;
color: #383838;
font-size: 13px;
color: #383838;
font-weight: bold;
background-color: #F5F5F5;
background-image: -moz-linear-gradient(center top , #FFFFFF 0pt, #E8E7EC 100%);
background-image: linear-gradient(center top , #FFFFFF 0pt, #E8E7EC 100%);
background-image: -ms-linear-gradient(center top , #FFFFFF 0pt, #E8E7EC 100%);
background-image: -webkit-linear-gradient(center top , #FFFFFF 0pt, #E8E7EC 100%);
background-image: -o-linear-gradient(center top , #FFFFFF 0pt, #E8E7EC 100%);
padding-left: 2px;
}

.marm_strkPn a{
    text-decoration: none; 
    font-size: 11px;
    color:  #606060    ;
    padding: 12px 5px;
    font-weight: bold;
    line-height:20px; 

}

.marm_strkPn h3 img{
float: left;
margin-top:5px;
padding:0px;
height:5px;
}

.marm_strkPn a:hover{
    text-decoration: none; 
    font-size: 12px;
    color: #303030  ;
    font-weight: bold;
   }

 .marm_strkPn a:active{
    font-size: 12px;
    font-weight: bold;
    color: #300000;
    text-decoration: none; 

   }
  .marm_strkPn a:focus{
    font-size: 12px;
    font-weight: bold;
    color: #202020;
    text-decoration: none; 

   }
 .marm_strkPn h3  font{
font-size: 80%;
color: #006600;
 }

 .marm_strkPn div {
padding: 0em .25em;
border: 1px solid #E8E8E8 ;
background: #FFFFFF  ;
height: 200px;
 font-size: 12px;
 border-radius: 5px;

}
.marm_strkPn ul {
 margin-left: 7px;
 font-style: inherit;
font-family:inherit;
}

.marm_strkPn ul  li{
font-size: 8px;
font-weight: normal;
color: #68B629;
font-style: inherit;
font-family:inherit;
list-style: disc inside; 
}

a:hover.strkpnt_arrow, a:focus.strkpnt_arrow{
background: url("/wordpress/wp-content/images/down-arrow.png") no-repeat scroll 1px 14px transparent;
background-size:6px 8px;
}

a.strkpnt_arrow{
background: url("/wordpress/wp-content/images/right-arrow.png") no-repeat scroll 1px 14px transparent;
background-size:6px 8px;

}
a.strkpnt_arrow span{
margin-left:10px;
font-weight:13px;
font-size:11px;
font-weight: bold;
}

ul  li span{
color: #000000;
font-size: 12px;
}

.separator{
background: url("/wordpress/wp-content/images/separator.gif") repeat-y scroll right top transparent;
background-size:100% 86px;
width:0.3%;
padding-right:1%;
height: 90%;
z-index:9999;
position:absolute;
right:30%;
z-index:-1111;
}

.ophetmenu {
width: 230px;
height: 200px;
/* border-radius voor IE*/
behavior: url(http://localhost/wordpress/wp-includes/css/pie/pie.htc);
z-index: 1;
border-radius: 10px;
padding:9px 0 0;
border: 1px solid #D8D8D8 ;
margin-top: 60px;
}

.ophetmenu ul li{
background-image: url(/wordpress/wp-content/images/isgoed.png);
background-size:10px 12px;
background-repeat:no-repeat;
background-position: 0 .4em;

padding-left: 1.4em;
border-bottom: 1px solid #F0F0F0 ;
font-weight: lighter;
margin-left: 20px;
list-style: none;
color:#006600;
} 

a {
    color: #FE6700;
    text-decoration: none;
}

#maincontent{
float: left;
margin:0 0px 30px auto ;
width:60%;
padding-right: 50px;
}

}

@media screen and (min-width: 681px) and (max-width: 800px){
/* code */
} 
```

# .net - 已安装程序的 SQLite 数据库 - 权限

> ID：11474520
> 
> 赞同：2
> 
> 时间：2012-07-13T16:27:30.600
> 
> 标签：.net, sqlite, permissions

我不确定如何正确处理以下情况：

1.  我的程序使用安装程序安装
2.  我在应用程序文件夹中创建 SQLite 数据库（程序启动时）

在某些配置中，我收到“尝试写入只读数据库”错误。这是权限问题，现在我通过将主 EXE 标记为“以管理员身份运行”来解决它

似乎这是“程序文件”下的文件夹权限

问题是：我应该在不同的位置创建数据库吗？或者以某种方式自动将“以管理员身份运行”属性添加到我的 EXE（我认为这是不可能的）。我的应用程序也作为服务运行，因此我需要一个数据库中心位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:08:28.057

在应用程序文件夹中创建数据库的正确方法，此路径在没有权限问题的情况下工作：

```
Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData) + "\\MyCompany" 
```

# java - 如何检索数据库中最后插入的值？

> ID：11474525
> 
> 赞同：9
> 
> 时间：2012-07-13T16:27:55.907
> 
> 标签：java, sql, sql-server, database

谁能告诉我数据库列中最后插入值的查询。

问题是插入的值可以在使用后放置在数据库的内部行中，`ASC`所以`DESC`我无法使用该方法。如果有人有解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T16:30:55.693

您将需要使用`TIMESTAMP`数据列来跟踪插入时间。不幸的是，由于固有的竞争条件，在这种情况下使用自动递增的主键将不起作用。只需将条目时间戳添加为数据列并检索`ORDER BY time_stamp DESC LIMIT 1`以获取最后一条记录。如果你感觉非常防御，目标是在`WHERE`子句中包含原始调用所特有的条件`INSERT`（即，`WHERE ID = x AND KEY = y`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:05:10.593

我支持@Daniel Li 的评论。

在我创建的每个持久表中，我都有以下列：

*   id 这是第一列和自动递增/身份/序列列
*   CreatedBy 默认为用户（SQL Server 中的“default system_user”），所以我知道谁更新了该列
*   CreatedAt 默认为创建的日期时间（SQL Server 中的“default getdate()”）。

（确切的语法因数据库而异。）

除了竞争条件，我可以通过执行“select * from table order by 1 desc”找到最后插入的行。

尽管这些占用了额外的空间，但我发现它们能够随着时间的推移解决问题而不仅仅是回报。

# python - 使用Python区分一个点的线和两个点的线

> ID：11474528
> 
> 赞同：1
> 
> 时间：2012-07-13T16:28:06.810
> 
> 标签：python, parsing, separator

我有一个大文件，我想以某种方式对其进行格式化。文件输入示例：

```
DVL1    03220   NP_004412.2 VANGL2  02758   Q9ULK5  in vitro    12490194
PAX3    09421   NP_852124.1 MEOX2   02760   NP_005915.2 in vitro;yeast 2-hybrid 11423130
VANGL2  02758   Q9ULK5  MAGI3   11290   NP_001136254.1  in vitro;in vivo    15195140 
```

这就是我希望它变成的样子：

```
DVL1    03220   NP_004412   VANGL2  02758   Q9ULK5
PAX3    09421   NP_852124   MEOX2   02760   NP_005915
VANGL2  02758   Q9ULK5  MAGI3   11290   NP_001136254 
```

总结一下：

*   如果该行有 1 个点，则删除该点及其后面的数字并添加一个 \t，因此输出行将只有 6 个制表符分隔值
*   如果该行有 2 个点，则将这些点连同它们后面的数字一起删除并添加一个 \t，因此输出行将只有 6 个制表符分隔值
*   如果该行没有点，则保留前 6 个制表符分隔值

我的想法目前是这样的：

```
for line in infile:
    if "." in line: # thought about this and a line.count('.') might be better, just wasn't capable to make it work
        transformed_line = line.replace('.', '\t', 2) # only replaces the dot; want to replace dot plus next first character
        columns = transformed_line.split('\t')
        outfile.write('\t'.join(columns[:8]) + '\n') # if i had a way to know the position of the dot(s), i could join only the desired columns
    else:
        columns = line.split('\t')
        outfile.write('\t'.join(columns[:5]) + '\n') # this is fine 
```

希望我能解释清楚。谢谢你们的努力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:34:03.393

```
import re
with open(filename,'r') as f:
    newlines=(re.sub(r'\.\d+','',old_line) for old_line in f)
    newlines=['\t'.join(line.split()[:6]) for line in newlines] 
```

现在您有一个删除了“.number”部分的行列表。据我所知，您的问题并没有受到足够的限制，无法使用正则表达式在 1 遍中完成整个工作，但它可以在 2 遍中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:35:58.047

你可以尝试这样的事情：

```
 with open('data1.txt') as f:
        for line in f:
            line=line.split()[:6]
            line=map(lambda x:x[:x.index('.')] if '.' in x else x,line)  #if an element has '.' then
                                                                         #remove that dot else keep the element as it is
            print('\t'.join(line)) 
```

**输出：**

```
DVL1    03220   NP_004412   VANGL2  02758   Q9ULK5
PAX3    09421   NP_852124   MEOX2   02760   NP_005915
VANGL2  02758   Q9ULK5  MAGI3   11290   NP_001136254 
```

**编辑：**

正如@mgilson 建议的那样，该行`line=map(lambda x:x[:x.index('.')] if '.' in x else x,line)`可以简单地替换为`line=map(lambda x:x.split('.')[0],line)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:39:17.130

我想有人应该用一个正则表达式来做到这一点，所以......

```
import re
beast_regex = re.compile(r'(\S+)\s+(\S+)\s+(\S+?)(?:\.\d+)?\s+(\S+)\s+(\S+)\s+(\S+?)(?:\.\d+)?\s+in.*')
with open('data.txt') as infile:
    for line in infile:
        match = beast_regex.match(line)
        print('\t'.join(match.groups()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T16:43:05.570

你可以用一个简单的正则表达式来做到这一点：

```
import re
for line in infile:
    line=re.sub(r'\.\d+','\t',line)
columns = line.split('\t')
outfile.write('\t'.join(columns[:5]) + '\n') 
```

这取代了任何“。” 后跟一个或多个带制表符的数字。

# three.js - 三个.js 纹理闪烁

> ID：11474529
> 
> 赞同：0
> 
> 时间：2012-07-13T16:28:07.763
> 
> 标签：three.js

看看[http://www.benmarshall.me/projects/playground/072012/solar-system.html](http://www.benmarshall.me/projects/playground/072012/solar-system.html)。请注意，当地球旋转时，云或地球的纹理之一会闪烁。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T18:38:21.340

如果两个球体的大小相同，您将遇到 z 缓冲区问题。基本上，显卡不知道什么距离相机更近，有时一个球体比另一个球体更近并且交替出现。

# xcode - Xcode WebView 不传递 POST 参数

> ID：11474531
> 
> 赞同：0
> 
> 时间：2012-07-13T16:28:16.997
> 
> 标签：xcode, macos, webview, httprequest

我需要将一些 post 参数传递给服务器，但 php 得到一个空数组 $_POST 这是我的代码：

```
 NSString* user=UserNameField.stringValue;
NSString* pass=PasswordField.stringValue;
NSString* ID=IDField.stringValue;

NSURL *url = [NSURL URLWithString:ENTERANCE];
url = [NSURL URLWithString:@"http://sphere-beauty.com/test.php"];

NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
NSString* post=[NSString stringWithFormat:@"uname=%@&passwd=%@&id=%@",user,pass,ID];

[req setHTTPMethod:@"POST"];
[req setHTTPBody: [post dataUsingEncoding:NSUTF8StringEncoding]];

[[browser mainFrame] loadRequest:req]; 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T01:11:29.120

这段代码对我有用，向测试页面发送一个简单的 POST 请求。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *name=@"Freddy Krueger!";
    NSString *encodedName = [name urlencode];
    NSString *postString = [NSString stringWithFormat:@"name=%@", encodedName];
    NSData *data = [postString dataUsingEncoding:NSASCIIStringEncoding];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://192.168.1.100/www/posttest.php"]];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:data];

    [web loadRequest:request];

    // Non-ARC
    // [request release];
} 
```

在此处找到的`[name urlencode]`调用`urlencode`类别方法：[如何对字符串进行 URL 编码](https://stackoverflow.com/questions/8088473/url-encode-a-nsstring)`NSString *`

`web`显然是我的`UIWebView`。

您的代码可能会失败，因为您没有对参数进行 URL 编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:29:55.653

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"www.aaa.com"]];
[request setHTTPMethod:@"POST"];
NSString *request_body = [NSString stringWithFormat:@"u=aaa&p=aaa"];
[request setHTTPBody:[request_body dataUsingEncoding:NSASCIIStringEncoding]];
NSError *error;
NSURLResponse *response;
NSData *theData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; 
```

这就是我通常以同步方式与服务器通信的方式......

# python - 如何在不创建新文件的情况下使用 ffmpeg/avconv 更改元数据？

> ID：11474532
> 
> 赞同：32
> 
> 时间：2012-07-13T16:28:19.940
> 
> 标签：python, command-line, ffmpeg, metadata

我正在编写一个用于制作音频和视频播客的 python 脚本。有一堆录制的媒体文件（音频和视频）和包含元信息的文本文件。

现在我想编写一个函数，它将元数据文本文件中的信息添加到所有媒体文件（原始文件和转换后的文件）中。因为我必须处理许多不同的文件格式（`wav`, `flac`, `mp3`, `mp4`, `ogg`, `ogv`...），所以拥有一个将元数据添加到任意格式的工具会很棒。

**我的问题：**

如何在`ffmpeg/avconv`不更改文件的音频或视频且不创建新文件的情况下更改文件的元数据？是否有另一个命令行/python 工具可以为我完成这项工作？

**到目前为止我尝试了什么：**

我想`ffmpeg/avconv`可能是这样一个工具，因为它可以处理几乎所有的媒体格式。我希望，如果我将`-i input_file`和设置`output_file`为同一个文件，`ffmpeg/avconv`它将足够聪明以保持文件不变。然后我可以设置`-metadata key=value`并且只更改元数据。

但我注意到，如果我输入`avconv -i test.mp3 -metadata title='Test title' test.mp3`音频，音频`test.mp3`将以另一种比特率重新转换。

所以我想用它`-c copy`来复制所有的视频和音频信息。不幸的是，这也不起作用：

```
:~$ du -h test.wav # test.wav is 303 MB big
303M    test.wav

:~$ avconv -i test.wav -c copy -metadata title='Test title' test.wav
avconv version 0.8.3-4:0.8.3-0ubuntu0.12.04.1, Copyright (c) 2000-2012 the
Libav    developers
built on Jun 12 2012 16:37:58 with gcc 4.6.3
[wav @ 0x846b260] max_analyze_duration reached
Input #0, wav, from 'test.wav':
Duration: 00:29:58.74, bitrate: 1411 kb/s
    Stream #0.0: Audio: pcm_s16le, 44100 Hz, 2 channels, s16, 1411 kb/s
File 'test.wav' already exists. Overwrite ? [y/N] y
Output #0, wav, to 'test.wav':
Metadata:
    title           : Test title
    encoder         : Lavf53.21.0
    Stream #0.0: Audio: pcm_s16le, 44100 Hz, 2 channels, 1411 kb/s
Stream mapping:
Stream #0:0 -> #0:0 (copy)
Press ctrl-c to stop encoding
size=     896kB time=5.20 bitrate=1411.3kbits/s    
video:0kB audio:896kB global headers:0kB muxing overhead 0.005014%

:~$ du -h test.wav # file size of test.wav changed dramatically
900K    test.wav 
```

你看，我不能使用`-c copy`if`input_file`和`output_file`are the same。当然我可以生成一个临时文件：

```
:-$ avconv -i test.wav -c copy -metadata title='Test title' test_temp.mp3
:-$ mv test_tmp.mp3 test.mp3 
```

但是这个解决方案会（临时）在文件系统上创建一个新文件，因此不是可取的。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-13T22:15:07.580

您可以使用 FFmpeg 执行此操作，如下所示：

```
ffmpeg -i input.avi -metadata key=value -codec copy output.avi 
```

例子：

```
$ du -h test.mov 
 27M    test.mov
$ ffprobe -loglevel quiet -show_format out.mov | grep title    # nothing found
$ ffmpeg -loglevel quiet -i test.mov -codec copy -metadata title="My title" out.mov
$ du -h out.mov
 27M    out.mov
$ ffprobe -loglevel quiet -show_format out.mov | grep title
TAG:title=My title 
```

有关更多信息，请参阅流式复制的[文档`-metadata`](http://ffmpeg.org/ffmpeg.html#Main-options)和有关[流式复制](http://ffmpeg.org/ffmpeg.html#Stream-copy)的文档。

另请注意，并非所有格式都允许设置任意元数据，例如，Quicktime会执行`-metadata title="my title"`您所期望的操作，但`-metadata foo=bux`什么也不做。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-15T13:50:58.837

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-08-21T14:35:10.673

你也可以做这样的事情，在成功时删除文件并重命名输出

```
ffmpeg -i default.mp4 -metadata title="my title" -codec copy output.mp4 && mv output.mp4 default.mp4 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-08T22:19:53.627

由于更改元数据会改变文件的长度，并且我希望元数据接近文件的开头，因此音频和视频将从文件开头的不同偏移量开始。因此，如果不先创建临时文件，然后重命名文件，就无法更改元数据。

如果新元数据的大小*完全相同*，*并且*您知道元数据在容器（文件）中的位置，则*可以*使用某种十六进制编辑器来简单地替换字符。祝你好运。

还。如果你用空值填充，你也许可以直接放置较短的数据，但这对某些玩家来说可能是个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-26T17:20:08.093

使用`ffmpeg`，您将始终必须复制到新文件。但它的优点是可以处理许多不同的格式。

不复制整个文件的替代方法取决于格式。对于许多人来说，有一些工具可以让您“就地”编辑元数据。

*   `exiftool`适用于多种格式
*   `metaflac`对于 FLAC
*   `MP4Box`对于.mp4
*   `eyeD3`, `mid3v2`, 等用于 MP3
*   等等

因此，您确实必须检查每种特定文件格式对您有用的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-22T04:31:42.577

这取决于文件中元数据的物理位置。如果数据位于文件的开头，您可以“切分”该部分并编辑数据，然后将这些部分“拼接”在一起。仅当您有很多文件要批量处理时，这才有用。如果只编辑一个，请使用两份复制方法之一。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-12-20T18:22:22.247

如果像我一样，您有很多长名称（和空格）的文件要重命名，您可以在之前将文件名和标题保存为变量，然后始终执行相同的`ffmpeg`命令：

```
input="My default video.mp4" && title="My title video"
ffmpeg -i "$input" -metadata title="$title" -codec copy output.mp4 && mv output.mp4 "$input" 
```

如果您有`ffmpeg`< v.3.2，则可以通过添加标志来防止`Codec for stream 0 does not use global headers but container format requires global headers`警告：`-flags +global_header`

```
ffmpeg -i "$input" -metadata title="$title" -codec copy -flags +global_header output.mp4 && mv output.mp4 "$input" 
```

注意：我还必须更改权限以检索与以前相同的文件（`sudo`可能需要）：

```
chmod 774 "$input" && chown admin:users "$input" 
```

# c# - .net 线程的 HTML 敏捷包对于使用跨并行线程的单个 HtmlDocument 实例进行只读访问是否安全？

> ID：11474534
> 
> 赞同：0
> 
> 时间：2012-07-13T16:28:25.887
> 
> 标签：c#, .net, html, web-scraping

.net 线程的 HTML 敏捷包对于使用跨并行线程的单个 HtmlDocument 实例进行只读访问是否安全？

我正在抓取一个页面，但是为了我需要的数据而抓取页面的某些部分可能会很慢，所以我想使用 Parallel c# library 一次抓取页面的多个部分。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-13T16:36:31.053

我在我的多线程程序中使用了 HTMLAgilityPack，它运行良好。我认为您只需要使用锁定块等方法来保护您的程序。

eg lock(asyncObject) { // 做 html 处理... }

# ssas - MDX 计算成员问题 20120713

> ID：11474536
> 
> 赞同：1
> 
> 时间：2012-07-13T16:28:31.710
> 
> 标签：ssas, mdx, hierarchy, dimension

我对以下计算成员有疑问，

```
WITH MEMBER NewSeedGBP AS
IIF([Dim Player].[FirstTransaction].Value =[Dim Date].[CalendarYearMonth].CurrentMember, 

   ([Dim Player].[FirstTransaction].[Date], [Measures].[Amount GBP - Seed])

   , IIF([Dim Player].[FirstDeposit].Value = [Dim Date].[CalendarYearMonth].CurrentMember, 

        ([Dim Player].[FirstDeposit].[Date], [Measures].[Amount GBP - Seed])

        ,NULL))

SELECT {NewSeedGBP} ON COLUMNS,
{[Dim Date].[CalendarYearMonth].[Date]} ON ROWS
FROM Finance 
```

我希望返回`Amount GBP - Seed`FirstTransaction 值等于 CalendarYearMonth 或 FirstDeposit 值等于 CalendarYearMonth 的度量值 - 它们都是日期值 YYYY-MM

IIF 验证工作正常，虽然在 THEN 子句中我需要`[Dim Player].[FirstTransaction].[Date]`引用`[Dim Date].[CalendarYearMonth].CurrentMember`IIF 语句中的值，但不幸的是，由于它们位于不同的层次结构中`[Dim Player].[FirstDeposit].[Date]`，因此 THEN 子句中没有 .CurrentMember ，我已经测试过它是否有效我硬编码日期如下

```
([Dim Player].[FirstTransaction].[2012-07], [Measures].[Amount GBP - Seed]) 
```

我需要恢复`[Measures].[Amount GBP - Seed]`层次结构`[Dim Player].[FirstTransaction]`而不是`[Dim Date].[CalendarYearMonth]`层次结构。

虽然我需要这个经过计算的成员才能加入`[Dim Date].[CalendarYearMonth]`层次结构。

# c++ - 嵌入式系统的地图文件解释教程

> ID：11474538
> 
> 赞同：4
> 
> 时间：2012-07-13T16:28:42.893
> 
> 标签：c++, c, embedded

语境：

我正在为我的微控制器编写 C++ 代码，并且想了解每个类/函数/stl 对代码大小的贡献程度。要查看此信息，我在地图文件的 .text 部分进行了搜索。我还看到一些 .objdump 文件。我有点迷失在哪里开始。

问题：

1.  有关如何解释地图文件的任何微控制器的任何教程/示例，
2.  关于如何理解地图文件符号的任何通用示例，
3.  它们是一个通用文件（如 .map），我可以将其用于任何可用于分析堆栈大小、代码大小等的控制器/编译器...

PS：我也在从 [http://www.tenouk.com/ModuleW.html之类的链接中学习编译过程](http://www.tenouk.com/ModuleW.html)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T21:16:54.630

映射文件由链接器生成，每个链接器的文件格式会有所不同。您最好的选择是链接器本身的文档 - 不太可能有“通用”教程。然而，在大多数情况下，地图文件只是一个符号表，它们的位置和大小。通常会对静态数据和代码空间的内存使用情况进行总体总结。我不确定有什么可以“教”的。

一些链接器可以将其他信息放在映射文件中，例如每个函数的堆栈使用分析。关键值是 main() 以及任何任务/线程和 ISR 入口点的值。

有些还可能生成交叉引用表或调用图，但在大多数情况下，一个像样的 IDE 或代码导航或文档工具会生成更有用的结果。

您最好的选择可能是发布有关您正在使用的地图文件的特定部分导致您遇到困难的问题。

# mysql - MySQL如何在单列中插入多个值

> ID：11474541
> 
> 赞同：2
> 
> 时间：2012-07-13T16:28:51.427
> 
> 标签：mysql, phpmyadmin

我在 phpmyadmin 中创建了两个简单的表。“内容创建者”列表和“内容创建者类型”列表。每个“内容创建者”可以有多个与之关联的“内容创建者类型”，因此这是一对多的关系。在 phpmyadmin 中，我创建了以下关系。

```
ALTER TABLE  `contentcreator` 
ADD FOREIGN KEY (  `ContCreat_TypeID` ) 
  REFERENCES `MyDatabase`.`contentcreator_types` (`ContCreat_TypeID`) 
  ON DELETE RESTRICT ON UPDATE RESTRICT ; 
```

现在，当我尝试将数据（使用 phpmyadmin 中的插入数据接口）插入到表“内容创建者”中时 - 我得到一个下拉菜单，允许我选择“内容创建者类型 ID”之一。但是，我希望能够为每个内容创建者添加多个“内容创建者类型 ID”。如何使用插入数据接口在 phpmyadmin 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:35:18.547

听起来你在这里有一个多对多的关系，而不是一对多。您需要将带有外键的交集表添加到您的类型表和内容创建者表中。

如果您想将其作为一对多关系来执行，则多的一方获得外键，而不是一的一方。这意味着您将在内容创建者类型表上拥有内容创建者表的外键。然后，每个内容创建者都会在类型表中为其拥有的每种类型获取一个新条目，但是在这种情况下您会出现重复。

多对多：

```
ContentCreatorID CreatorName
---------------- ------------------
1                Creator1
2                Creator2
3                Creator3

CreatorTypes (intersection Table)

ContentCreatorID TypeID
---------------- ------------------
1                1
1                2
2                3
3                2

Types

TypeID            TypeName
---------------- ------------------
1                 Type1
2                 Type2
3                 Type3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:40:59.323

您可能需要考虑创建一个映射表以将创建者与其类型相关联

```
 creator table
    id | creator

    type table
    id | type

    mapping table
    creator_id | type_id 
```

# java - 为什么带有空字符串的 getResourceAsStream 返回一个空的 InputStream？

> ID：11474548
> 
> 赞同：5
> 
> 时间：2012-07-13T16:29:39.900
> 
> 标签：java

我刚刚遇到了 getResourceAsInputStream 的一些特殊行为，我希望有人能对此有所了解。

传递这个方法，一个不存在的资源的名称返回 null，就像我期望的那样。但是，将空字符串或空格填充的字符串传递给它实际上会返回一个有效的 InputStream，其中包含零字节。似乎只有空的或充满空格的字符串才能做到这一点。像“\t”或“\n”这样的空格将导致空值。

这是预期的行为吗？如果是这样，它的目的是什么？

```
this.class.getResourceAsStream("no_such_resource"); // returns null
this.class.getResourceAsStream("");                 // returns an InputStream
this.class.getResourceAsStream("    ");             // returns an InputStream
this.class.getResourceAsStream("\t");               // returns null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:39:47.750

试试这个代码：

```
InputStream is = this.class.getResourceAsStream("");
BufferedReader br = new BufferedReader(new InputStreamReader(is));
String line;
while((line = br.readLine()) != null) System.out.println(line);
br.close(); 
```

这将打印位于当前类同一目录中的类列表。例如：

```
a.class
CallablePrintTask.class
java.policy.applet
RunnablePrintTask.class
ZoomableImageFrame.class
ZoomableImageFrame$FlagHolder.class
ZoomableImageFrame$ImageViewer.class
ZoomableImageFrame$LoadAction.class
ZoomableImageFrame$LoadAction$1.class
ZoomableImageFrame$ScaleAction.class 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T16:57:01.827

`getResourceAsStream`要求 ClassLoader 为路径构造一个 URL。末尾带有空字符串或空格的路径指向您的 classes .class 文件所在的文件目录，因此它构造了一个`FileURLConnection`对象。`getResourceAsStream`反过来询问该对象，`getInpuStream()`并且实现在字符串中建立一个排序的目录列表，根据默认语言环境将其转换为字节，并为您提供`ByteArrayInputStream`这些字节。

FileURLConnections 行为没有很好的记录，但是如果您的搜索...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:03:44.373

我的猜测如下：

```
this.class.getResourceAsStream("no_such_resource"); // returns null
this.class.getResourceAsStream("");                 // returns an InputStream
this.class.getResourceAsStream("    ");             // returns an InputStream
this.class.getResourceAsStream("\t"); 
```

`getResourceAsStream("c:\t")`<-- 有效。

巧合的`\t`是制表符。然而，将其作为查找的路径是完全有效的。

# paypal - 贝宝没有返回到设置中指定的网址

> ID：11474552
> 
> 赞同：0
> 
> 时间：2012-07-13T16:29:52.673
> 
> 标签：paypal, eclipse-pdt

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" accept-charset="utf-8">  
<input type="hidden" name="cmd" value="_xclick" /> 
<input type="hidden" name="charset" value="utf-8" /> 
<input type="hidden" name="business" value="address@gmail.com" /> 
<input type="hidden" name="item_name" value="company - product" />
<input type="hidden" name="item_number" value="1" />
<input type="hidden" name="amount" value="0.01" />
<input type="hidden" name="currency_code" value="GBP" />
<input type="hidden" name="return" value="http://mywebsite.com/folder/success.php" /> 
<input type="hidden" name="cancel_return" value="http://mywebsite.com/folder//booking.html" />
<input type="hidden" name="bn" value="company_BuyNow_product_UK" /> 
<input type="image" src="https://www.paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" name="submit" alt="Buy Now" /> 
</form> 
```

我已将网站支付首选项 > 网站支付的自动退货 > 单选按钮设置为“开启”。我还设置了重定向 url 以匹配我的按钮代码：

```
<input type="hidden" name="return" value="http://mywebsite.com/folder/success.php" /> 
```

单击按钮时，浏览器重定向到贝宝，正确显示我的产品详细信息并允许我付款，然后在加载轮旋转约十五秒时显示“查看您的信息”，收到付款确认电子邮件给我，然后什么也没有发生，轮子不停地旋转，无限期地卡在“查看您的信息”屏幕上，永远不会重定向到我的返回网址......

在 google 或 here 或 paypal 文档上找不到任何相关内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:59:05.977

您是否在沙盒中验证了测试卖家的电子邮件地址？

登录沙盒点击测试账户；选择卖家账户；点击进入沙盒测试站点；以沙盒卖家身份登录；验证电子邮件（检查沙箱 > 测试电子邮件以获取确认电子邮件和确认代码）；使用确认页面上的链接手动输入确认码

希望这可以帮助。

# jquery - jquery 旋转文本动画（重新创建 css3 效果）

> ID：11474554
> 
> 赞同：0
> 
> 时间：2012-07-13T16:30:17.667
> 
> 标签：jquery

有人知道是否有一个 jquery 插件可以做类似这种效果的事情吗？ [http://tympanus.net/Tutorials/CSS3RotatingWords/index5.html](http://tympanus.net/Tutorials/CSS3RotatingWords/index5.html)

我喜欢这个效果，但我需要它兼容到 IE7，或者至少，只在 IE9/8/7 中显示那些旋转单词的文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:23:01.020

在 jQuery 之后将此添加到页面（可能在单独的 js 文件中）

```
(function($){
    $.fn.rotate = function(params){
        return this.each(function(index, el){
            var defaults = {
                text : [],
                interval : 2000
            };

            var options = $.extend({}, defaults, params);
            var i = 0;

            if(options.text.length){
                setInterval(function(){
                    i = i < options.text.length -1 ? ++i : 0;
                    $(el).fadeOut(function(){ 
                        $(this).text(options.text[i]).fadeIn();
                    });
                }, options.interval);
            }
        });
    };
})(jQuery); 
```

要使用它，只需执行

```
$(selector).rotate({ 
    text: ['text1', 'text2'] // an array of strings
    interval: 2000 // Optional. number in milliseconds, I've put default as two seconds  
}); 
```

看看小提琴：http: [//jsfiddle.net/U9ZTa/1/](http://jsfiddle.net/U9ZTa/1/)

您可以根据需要进行更改。褪色效果应该适用于所有浏览器 IE6+。

如果您愿意，可以在现代浏览器中添加该 css 动画...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T15:37:58.970

这可能会有所帮助 - jQuery 简单文本旋转器：[http ://www.thepetedesign.com/demos/jquery_super_simple_text_rotator_demo.html](http://www.thepetedesign.com/demos/jquery_super_simple_text_rotator_demo.html)

您可能需要对此进行调整，以便能够对您提供的链接产生相同的效果。

# tdd - 如何实现以可测试方式创建另一个域实体的域方法

> ID：11474555
> 
> 赞同：1
> 
> 时间：2012-07-13T16:30:18.010
> 
> 标签：tdd, domain-driven-design, factory, creation

选项1。`ParentTest.CreateChild()`它本质上`Child`也是在测试构造函数（我不喜欢）。

```
public class Parent
{
    public Child Child { get; private set; }

    public void CreateChild(int param1, string param2)
    {
        Child = new Child(param1, param2);
    }
}

public class Child
{
    public int Param1 { get; private set; }
    public string Param2 { get; private set; }

    public Child(int param1, string param2)
    {
        Param1 = param1;
        Param2 = param2;
    }
}

[TestFixture]
public class ParentTest
{
    [Test]
    public void CreateChild()
    {
        const int param1 = 23;
        const string param2 = "param2";
        var parent = new Parent();

        parent.CreateChild(param1, param2);

        Assert.That(parent.Child, Is.Not.Null);
        Assert.That(parent.Child.Param1, Is.EqualTo(param1));
        Assert.That(parent.Child.Param2, Is.EqualTo(param2));
    }
}

[TestFixture]
public class ChildTest
{
    [Test]
    public void Create()
    {
        const int param1 = 23;
        const string param2 = "param2";

        var child = new Child(param1, param2);

        Assert.That(child.Param1, Is.EqualTo(param1));
        Assert.That(child.Param2, Is.EqualTo(param2));            
    }
} 
```

选项 2\. 使用工厂服务创建`Child`实例。在这里，我不太确定将服务作为域方法参数传递的想法。

```
public class Parent
{
    public Child Child { get; private set; }

    public void CreateChild(int param1, string param2, IChildFactory childFactory)
    {
        Child = childFactory.Create(param1, param2);
    }
}

public class Child
{
    public int Param1 { get; private set; }
    public string Param2 { get; private set; }

    protected Child() {} // to be able to generate stub

    public Child(int param1, string param2)
    {
        Param1 = param1;
        Param2 = param2;
    }
}

public interface IChildFactory
{
    Child Create(int param1, string param2);
}

public class ChildFactory : IChildFactory
{
    public Child Create(int param1, string param2)
    {
        return new Child(param1, param2);
    }
}     

[TestFixture]
public class ParentTest
{
    [Test]
    public void CreateChild()
    {
        const int param1 = 23;
        const string param2 = "param2";
        var child = MockRepository.GenerateStub<Child>();
        var childFactory = MockRepository.GenerateStub<IChildFactory>();
        childFactory.Stub(x => x.Create(param1, param2)).Return(child);
        var parent = new Parent();

        parent.CreateChild(param1, param2, childFactory);

        Assert.That(parent.Child, Is.SameAs(child));
    }    
}

[TestFixture]
public class ChildTest
{
    // empty as contructor is tested in ChildFactoryTest
}

[TestFixture]
public class ChildFactoryTest
{
    [Test]
    public void Create()
    {
        const int param1 = 23;
        const string param2 = "param2";
        var childFactory = new ChildFactory();

        var child = childFactory.Create(param1, param2);

        Assert.That(child.Param1, Is.EqualTo(param1));
        Assert.That(child.Param2, Is.EqualTo(param2));
    }
} 
```

我实际上更喜欢选项 2，因为每次域方法创建另一个域实体时，我不必测试创建的实体的属性（在工厂测试中只测试一次）。

有人有更好的解决方案吗？

**更新：** 来自@user1494736 的回答：*“我认为，如果您正在测试 Parent，您还应该测试 Child 构造函数”*。您可能有另一种`Parent`创建方法`Child`，并且在其测试中您需要`Child`再次测试属性。一般来说，我不想在`Child`每次`Parent`方法调用它时都测试构造函数的结果。让我们假设`Child`构造函数根据构造函数参数进行一些复杂的计算。您将`Child`仅对构造函数进行几次测试，以测试各种组合和结果。现在，如果您要在测试中测试`Child`构造函数`Parent`，并且您将修改`Child`构造函数实现，这些`Parent`测试会开始失败（我不喜欢的事情，也是我更喜欢选项 2 的主要原因，即使我也有一些保留意见）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:15:23.480

您可以修改选项 2 以将`ChildFactory`in 传递给`Parent`的构造函数，而不是将其作为参数传递给`CreateChild()`：

```
public class Parent
{
    private IChildFactory _childFactory;

    public Parent(IChildFactory childFactory)
    {
        _childFactory = childFactory;
    }

    public Child Child { get; private set; }

    public void CreateChild(int param1, string param2)
    {
        Child = _childFactory.Create(param1, param2);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T00:17:25.353

您可以提取创建并使方法虚拟：

```
public class Parent
{
    public Child Child { get; private set; }

    public void CreateChild(int param1, string param2)
    {
        Child = new ObtainChild(param1, param2);
    }
    virtual public Child ObtainChild(int param1, string param2)
    {
        return new Child(param1, param2);
    }
} 
```

然后创建一个具有不同实现的“可测试”子类，并对其进行测试： public class TestableParent : Parent { override public Child GainChild(int param1, string param2) { //在这里做任何你想做的事情 } }

或者：

公共类 TestableParent : Parent { Func GetChildImplementation; 覆盖公共子获取子（int param1，字符串参数2）{返回获取子实现（）；} }

请注意，让 Child 实现 IChild 接口并使用它会使事情变得更容易......

或者，您可以在不使用“可测试”类的情况下实现相同的效果，只需使用可以处理此问题的模拟框架（例如 Moq）： var testableParent = new Mock(/* you can put parents parameters here*/); testableParent.Setup(parent => parent.ObtainChild(/* 匹配参数*/).Returns(/* return something*/);

BTW：我个人认为白盒测试是一个非常糟糕的主意......而且由于大多数单元测试都是白盒测试，我通常认为大多数单元测试也是一个坏主意......我认为最好的测试是功能黑盒测试，或集成测试，或任何你想调用它们的东西......我认为如果你正在测试 Parent，你也应该测试 Child 构造函数。我认为这是一件好事，而不是一件坏事......但如果你真的想这样做......

**更新：**如果你*只改变*Child 的实现，但你不改变它的作用，那么如果你做了功能测试，Parent 的测试就不会中断。此外，如果您有 Parent 测试，您可以对 Child 做任何您想做的事情，并且不会因为您在所有地方都嘲笑 Child 而中断，那么您怎么知道 Parent 正确使用 Child？以我的经验，在集成两个组件时最常发现大多数错误，最困难的错误，因为一个假设某事以一种合理的方式完成，另一个假设以另一种合理的方式完成（但不同的方式）。我认为您应该尽可能多地测试集成（和功能）。关于必须一次又一次地测试 Child 的属性的问题，你说的感觉就像你有重复的代码，

# javascript - Javascript？：如何将文本输入/表单字段动态添加到 HTML 表单？

> ID：11474563
> 
> 赞同：5
> 
> 时间：2012-07-13T16:30:45.623
> 
> 标签：javascript, jquery, html, forms, input

我正在构建一个包含输入列表的 Web 表单。到现在为止还挺好。

但是，如何添加链接/按钮以将另外 5 个字段添加到列表中。例如：

```
<input>
<input>
<input>
<input>

<a href="" onclick="">Add 10 more fields</a> 
```

我在这个网站上浏览了许多类似的 q，但似乎没有一个描述如何添加多个字段。

谢谢你的帮助，

哈雷

**编辑：感谢大家的帮助，看起来 jquery append 是要走的路。但是，我很欣赏不使用 jquery 的替代方案。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T16:35:28.260

```
 $("#anyDiv").html('<input id="id1"/>'); 
```

……

```
 $("#anyDiv").append('<input id="id2"/>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:36:22.143

这是一个[**js fiddle**](http://jsfiddle.net/jarekb84/pNVmf/)，显示了使用 jQuery 的[append()](http://api.jquery.com/append/)函数添加 10 个输入的示例。我建议每次点击只做一次添加，就像 user1301840 的例子一样。

**HTML**

```
<div id="inputList"></div>
<input type="button" value="Add 10 Inputs" id="addInputs" />​ 
```

**Javascript**

```
$('#addInputs').click(function() {
    for (i = 0; i < 10; i++) {
        $('#inputList').append('<input type="text" />');

    }
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T17:14:45.557

虽然您已经有了答案，但我想我会尝试提供一个非 jQuery 解决方案：

```
function addInput(insertAt, formEl, num, inputType, defaultVal) {
    console.log(formEl);
    if (!formEl) {
        return false;
    }
    else {
        num = num ? num : 5;
        var fieldset = document.createElement('fieldset'),
            newInput;
        for (var i = 0; i < num; i++) {
            newInput = document.createElement('input');
            newInput.value = defaultVal || '';
            newInput.type = inputType || 'text';
            fieldset.appendChild(newInput);
        }
        formEl.insertBefore(fieldset, insertAt);
    }
}

var formEl = document.getElementById('theForm'),
    aElem = document.getElementById('aElement');

if (window.addEventListener) {
    // up to date browsers
    aElement.addEventListener('click', function() {
        addInput(this, formEl, 10);
    }, false);
} else if (window.attachEvent) {
    // legacy IE, <9
    aElement.attachEvent('onclick', function() {
        addInput(this, formEl);
    });
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DPwmJ/)。

我没有要测试的 IE，但是上面*应该*使用 IE < 9 使用`attachEvent`后备，并且 >= 9，我认为，实现了标准`addEventListener()`。

参考：

*   [`addEventListener()`](https://developer.mozilla.org/en/DOM/element.addEventListener).
*   [`attachEvent()`](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx).
*   [`document.createElement()`](https://developer.mozilla.org/en/DOM/document.createElement).
*   [`insertBefore()`](https://developer.mozilla.org/en/DOM/Node.insertBefore).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T16:33:57.793

尝试使用 JQuery [.append()](http://api.jquery.com/append/)函数

```
$("a").click(function(e){
 $("form").append("<input />");
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T16:39:36.980

是的，jquery 是去这里的方式。

```
$("<input type='text'>").appendTo("#someContainer"); 
```

祝你好运。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-25T06:05:46.290

以下示例在单击链接时添加输入框：

```
<div id="start">
    <input/><br/><br/>
</div> 
<a href="#" id="box">Add more fields</a> 
```

* * *

```
$("#box").click(function(){
    var add="";
    add+='<input/>'+'<br/>'+'</br/>';
    $("#start").append(add);
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-24T17:04:43.067

```
<script type='text/javascript'>
    var counter = 1;
    var limit = 3;
    function addInput(divName) {

        var newdiv = document.createElement('div');
        newdiv.innerHTML = "<br><input type='text' name='myInputs" + counter + "'> <input type='text' name='myInputs" + counter + "'> <select><option value='88888'>888888888</option></select>";
        document.getElementById(divName).appendChild(newdiv);
        counter++;
    }
</script> 
```

```
<form method="POST">
    <div id="dynamicInput">

        <input type="button" value="Add another text input" onclick="addInput('dynamicInput');">
</form> 
```

# c# - 从十进制中删除区域

> ID：11474565
> 
> 赞同：1
> 
> 时间：2012-07-13T16:30:49.537
> 
> 标签：c#, asp.net, type-conversion

我们有区域相关的网络客户端，其中货币设置为区域格式，我们解析如下：

```
bool result = decimal.TryParse(currencyValue, NumberStyles.Currency, myCulture, out value); 
```

当我们将此小数序列化为 xml 并且之前在 myCulture=en-US 中解析过小数时，xmlserializer 返回`<Curr id="2" amnt="100000000.00"/>`并将其反序列化回相同的数字......但是当我们在 sk-SK 或 cs-CZ 中执行此操作时，它返回`<Curr id="2" amnt="100000000,00"/>`返回 *100关于反序列化（忽略逗号）...

是否有可能从十进制中删除该区域，或使其保持不变？（如果我不想将其转换为字符串并再次解析以处理区域）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:20:59.777

所以我写了我自己问题的答案，可以关闭这个主题......

有一个新的有趣点，我今天早上开始工作后得到的。在序列化之前将有问题的十进制添加到字典中，这有点问题，因为 IDictionary 不能被序列化，直到它实现 IXmlSerializable。有两种方法可以覆盖，ReadXml 和 WriteXml。这是目标，在 WriteXml 中有 used `decimalValue.ToString()`，这导致了问题。我不知道为什么会这样，但这会`.ToString()`返回我所描述的不匹配结果。我不知道它是如何发生的，因为在测试项目中它运行良好，但在我们的完整上下文中却没有。但正如特工 Mulder 所相信[的那样，真相就在那里](http://img855.imageshack.us/img855/3088/decimal.png)

所以只有我需要做的就是`decimalValue.ToString()`改变`decimalValue.ToString(CultureInfo.InvariantCulture)`

谢谢你的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:27:11.557

区域用于屏幕显示——您以用户理解或喜欢的格式向用户显示信息。当数据没有显示给用户时（在内存中，在数据库中，通过网络），总是以已知的格式序列化它。正如@Oded 所指出的，就文化信息而言，这通常是InvariantCulture。

这使您可以将数据从一种文化转移到另一种文化，而无需让每种文化了解另一种文化。

# ios - 取决于弹出框的核心动画 - iPad

> ID：11474569
> 
> 赞同：1
> 
> 时间：2012-07-13T16:31:10.333
> 
> 标签：ios, ipad, core-animation, uipopovercontroller, popover

我需要做一个动画，当弹出窗口显示时 UIView 向左移动。它工作正常，但到目前为止我已经硬编码了它移动的距离。显然问题在于，如果弹出框可见并且设备旋转，则弹出框最终会与视图重叠一点。

所以我宁愿需要一种方法来了解弹出框的框架，这样我就不必对距离进行硬编码。

有没有办法做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:37:34.220

我还没有尝试过，但是您应该能够按顺序查询以下内容：

弹出框的 popoverContentSize。如果它不为零，那就是你的尺寸。

在弹出窗口中显示的视图控制器的 contentSizeForViewInPopover 属性。如果那不是零，那就是你的尺寸

显示的视图控制器的内容视图的 bounds.size。

还是您需要弹出框的位置和大小？这会更难，因为它取决于您提供的作为弹出框源的矩形、您指定的箭头方向和屏幕布局。

为了获得特定的解决方案，您将必须更加具体。

# mysql - 处理大量状态和评论的问题

> ID：11474570
> 
> 赞同：0
> 
> 时间：2012-07-13T16:31:10.820
> 
> 标签：mysql, sql, database, social-networking

嗨，我是 Web 开发的新手。我正在尝试开发一个社交网站。在数据库设计级别，我觉得我遇到了一些问题。这是我的问题。

我有一个状态表，其中属性是：

*   status_id (auto_increment)
*   用户身份
*   地位

我的计划是，当我的主页加载时，它将从关系表中查找我的朋友（我有一个关系表），并使用关系表中的 user_id 从状态表中加载状态（按最新排序）。这是一个好计划吗？我正在考虑它，因为这个表可以包含数百万行（如果我很幸运，但我需要最有效的方法），如果一个用户有 200 或 300 个朋友查询会变慢吗？是否有必要在表中保持非常旧的状态？请给我一些建议。这张表会有频繁的插入，所以索引可能不是一个好主意，你怎么看？我还有评论表，其中属性是：

*   用户身份
*   friend_id(评论谁的状态)
*   status_id（评论哪个状态）
*   评论

这里没有主键。对于这个表问题是一样的。我使用 MySQL 数据库和 MyISAM 作为数据库引擎。InnoDB 呢？哪种引擎最适合社交网络？请指教，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:32:23.940

您需要存储历史状态吗？如果没有，只需将其设置为表`NVARCHAR`中的字段。`Users`如果您确实想知道比尔在 2011 年 7 月 3 日的状态，则需要日期。我更熟悉 Microsoft SQL，应该这样做：

```
CREATE TABLE Statuses
(
UserID  INT NOT NULL REFERENCES Users (UserID) ON DELETE CASCADE,
EffectiveDate   DATETIME NOT NULL DEFAULT NOW(),
PRIMARY KEY (UserID, EffectiveDate DESC),
Status  NVARCHAR(100) NOT NULL
) 
```

*如果*某天最终表现不佳，您还可以将其存储`CurrentStatus`在`Users`表中，或使用仅包含每个用户最新状态的物化视图。

# java - 如何返回线程找到的信息

> ID：11474571
> 
> 赞同：1
> 
> 时间：2012-07-13T16:31:13.000
> 
> 标签：java, multithreading

我有以下情况：

*   大约 10 个线程在网络上抓取图像
*   所有找到的图像必须以某种方式返回到其他 10 个线程（用于分析）

如前所述，我想与其他 10**个线程**同时**处理图像**。

 **目前我有一个自己的列表的**单例**实现：

```
public class ImageList extends Observable implements Iterable<Image> {
    private final BlockingQueue<Image> images = new LinkedBlockingQueue<Image>();

    private static class InstanceHolder {
        public static ImageList instance = new ImageList();
    }

    public static ImageList getInstance() {
        return InstanceHolder.instance;
    }

    private ImageList() {

    }

    public synchronized void execute(Image job) throws InterruptedException {
        images.put(job);

        new Thread(job).start();

        System.out.println("notify observers");
        this.setChanged();
        this.notifyObservers();

        System.out.println(this.countObservers());
    }

    @Override
    public Iterator<Image> iterator() {
        return images.iterator();
    }
} 
```

一旦找到图像，我就会执行`ImageList.execute(image)`，但我不喜欢这个解决方案，因为并行进程**没有上限**（它可能会变成数千个）。

我的另一个想法：

*   将**附加列表** `imagesFound`传递给我所有的爬虫，让他们将所有图像添加到该列表中
*   在 Main 类中启动 5 个线程，不断检查`imagesFound`并处理新元素

但是，我也不喜欢这个解决方案，因为传递一个线程**并不真正需要**的数组（但只是用来传回找到的数据）对我来说**似乎是错误**的。如果我想在一个网站上搜索 20 个不同的信息，它可能会变成 20 个不同的列表。

那么，您通常如何实现从线程返回数据（在我的情况下：特别是如果该数据本身应由其他线程处理）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:34:27.587

也许是一个线程池？查看[ExecutorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html)。

*   您可以设置工作线程的数量。
*   它自动封装了一个线程安全的工作队列。

例子：

```
class Task implements Callable<Object> {

    private Image job;

    public Task(Image job) {
       this.job = job;
    }

    public Object call() {
        // crawl
        return result;
    }
} 
```

...

```
// Initialize thread pool
ExecutorService exec = Executors.newFixedThreadPool(10);

// every time you get a new job
Future<Object> result = exec.submit(new Task(job));

// when you want to collect the result
Object obj = result.get(); 
```**

# php - Wordpress get_the_author 函数测试什么也没做？

> ID：11474574
> 
> 赞同：1
> 
> 时间：2012-07-13T16:31:22.310
> 
> 标签：php, wordpress

我试图仅在它是指定作者时才显示 Wordpress 帖子的署名。我不想显示管理员用户的署名。

这是我用来尝试此操作的代码：

`<?php if (get_the_author() != 'admin')?> <h3 style="font-style:italic;">by <?php the_author(); ?></h3> <?php endif;?>`

我看到但不想要的行为是页面挂起并仅显示标题。只有当我注释掉 h3 内容显示的两个 php 行时。

我已经验证了使条件为真的完整字符串正是我在上面显示的内容。我从渲染页面的视图源复制/粘贴它。我什至尝试将数字 1 用作整数和字符类型进行测试，但它仍然挂起页面。

我可能做错了什么？我是否正确理解这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:00:49.683

您的问题，*“页面挂起”*是语法之一。您的陈述`:`后遗漏了一个：`if`

```
<?php if (get_the_author() != 'admin')?>
                                      ^ 
```

这应该解决它：

```
<?php if (get_the_author() != 'admin'): ?> <h3 style="font-style:italic;">by <?php the_author(); ?></h3> <?php endif;?> 
```

这种错误很容易通过启用`error_reporting`和检查日志来检测，或者也启用`display_errors`：

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

# django - 如何将模板变量作为字符串参数的一部分传递给模板标签？

> ID：11474576
> 
> 赞同：0
> 
> 时间：2012-07-13T16:31:27.643
> 
> 标签：django, url, query-string, django-pagination, templatetag

我将此链接用于我的模板。我的目的是将用户带到分页的下一页......好吧，页面：

```
<a href="{% query_string 'page=page.next_page_number' 'page' %}">Next</a> 
```

问题是 page.next_page_number 没有被评估为下一个页码。

模板标记函数 query_string 应该删除然后将字符串参数附加到 url。

我看到这张票正是我的问题所在：

[将查询字符串辅助方法添加到 Page 类](https://code.djangoproject.com/ticket/10941)

我的目标是解决这个问题：

[使用模板标签使用上下文变量操作 URL 查询字符串](http://djangosnippets.org/snippets/2237/)

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:41:52.557

我不是 100% 确定它会有所帮助，但在您的示例中，您将文字传递给模板标签，传递变量，删除引号：

```
<a href="{% query_string page=page.next_page_number page %}">Next</a> 
```

# namespaces - Fortran 命名空间冲突

> ID：11474579
> 
> 赞同：2
> 
> 时间：2012-07-13T16:31:39.713
> 
> 标签：namespaces, fortran, fortran-common-block

我正在将几个模拟代码耦合在一起。目前，有 3 个代码，但将来可能会更多。您可以在下图中考虑信息交换：

```
 sim1  <====>  sim_main <=====> sim2 
```

信息交换是通过每一侧的有限接口完成的。

我最近诊断出一个问题，sim1 中的一个公共块与 sim2 中的子程序同名，这导致了分段错误。简单的解决方案是更改 sim1 中公共块的名称，但这并不理想，因为如果 sim1 的开发人员推出 sim1-2.0，那么我将不得不再次挖掘并更改该公共块的名称。由于接口相对有限，我想知道是否更好的解决方案是编写一个简单的模块：

```
module sim2_mod
contains
include "sim2.f90"
end 
```

因为这应该将 sim2 中的所有例程放入 sim2_mod 命名空间，这可以`use`在有限的基础上进行。这是一个好主意吗？一个坏主意？有没有这行不通的情况？sim2 中使用的通用块是否仍然具有全局范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:21:34.710

好吧，如果`sim2.f90`只包含在拼接到您提出`sim2_mod`的 时形成语法上有效的 Fortran 源文件的行，那么您的建议将起作用。如果没有，您将不得不编辑源代码。

当你这样做的时候，你也可以让它成为一个模块，并在`sim_main`. 一旦你做到了这一点，你可以在语句上添加一个`only`带有一些重命名的子句，并以`use`这种方式解决名称冲突。

通用块确实在整个程序中具有全局范围，我认为 Fortran 编写社区内的共识是，避免这种全局可用性可能导致的问题的首选方法是替换它们，而不仅仅是您当前面临的问题带有一个模块，该模块定义了公共块包含的所有变量。然后，您可以使用模块变量对（以前的）全局变量的可用性和命名进行更多控制。

这种方法实施起来可能很麻烦，并且确实增加了下一个版本`sim1`也需要重新设计的可能性。但是，是不是该告诉开发人员`sim1`放弃通用块并实现一些更现代的东西了？

# php - Git 从本地到 FTP（不是工作副本）

> ID：11474585
> 
> 赞同：0
> 
> 时间：2012-07-13T16:32:12.713
> 
> 标签：php, git, deployment, ssh

将我的本地存储库推送（发布）到 bitbucket 和我的共享主机（hostgator）的最佳方式是什么？

我正在使用带有 Git 的 Windows。

实际上，我可以`git push`进行 bitbucket 和工作。但我想在我的 FTP（共享主机）中发布，但我认为只发布文件而不是`.git`文件夹，换句话说，工作副本（克隆）很好。

实际上我通过 git bash 访问 ssh，然后点击`git clone ...`，但这不是一个好/更好的方式（我认为）。

所以我看到了这个链接：`http://github.com/resmo/git-ftp`而且`http://github.com/ezyang/git-ftp` 我想知道是否存在更好的方法来做到这一点，而不必安装 python 或其他软件，如 cygwin。

我的项目很小（大约 3mb），所以没有必要只发送更改的文件。可以是所有文件。

我查看了许多有关此的链接，并尝试了其他方法，但也许有一种很好且简单的方法可以做到这一点……因为我来到stackoverflow寻求您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:07:11.577

您有几种不同的选择：

1) 在本地创建一个脚本，它执行 git push 到 bitbucket，`git checkout-index -a -f --prefix=/destination/path/`到本地目录，然后 ftp 的本地目录到您的 ftp 服务器。

2) 创建一个指向 ftp 服务器上的裸存储库的新远程，然后创建一个在`git checkout-index -a -f --prefix=/destination/path/`ftp 服务器上执行的 post-receive 挂钩。设置完成后，您将执行`git push`and `git push ftp`（如果需要，可以将其别名为一个命令）

3) 使用 git archive 指向远程存储库： `git archive --format=tar --remote=ssh://remote_server/remote_repository master | (cd /path/to/dir/ && tar -xf -)` 显然，您希望为此命令创建一个别名。

# java - 构造正则表达式

> ID：11474588
> 
> 赞同：0
> 
> 时间：2012-07-13T16:32:20.567
> 
> 标签：java, android

我是正则表达式的新手，所以很难编译我自己的模式。

基本上我正在从我的 android 手机上读取 LogCat，并试图将这个字符串分成几部分以便能够在 TextView 中显示它

这是我试图标记的实际字符串。 **“07-06 12:18:45.790: W/dalvikvm(571): TaintLog: OSNetworkSystem.write(91.121.171.39) 接收到带有标签 0x400 数据=[POST / HTTP/1.1”的数据**

我能够使用扫描仪方法检索“标记”之后的数字，但现在我需要从 OSnetworkSystem.Write(xxx.xxx.xxx.xxx) 中提取 IP 地址

任何人都可以向我提供一些关于使用什么来增加 IP 地址的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:38:13.583

好吧，对于正则表达式部分，我可以提供帮助。

正则表达式：

```
([0-9]{0,3}\.[0-9]{0,3}\.[0-9]{0,3}\.[0-9]{0,3}) 
```

将匹配给定字符串中的任何 IP 地址。

对于 RegExp，我使用了一个网站[http://rubular.com/](http://rubular.com/)，它对我的​​工作流程很有帮助。我可以输入任意数量的“测试用例”并开始编写正则表达式代码。

* * *

*根据下面的评论进行编辑。*

而不是重新发明轮子。我发现了一篇关于 IPv4 Regex 的精彩文章： [How do I write a regular expression that match an IPv4 dotted address?](http://blogs.msdn.com/b/oldnewthing/archive/2006/05/22/603788.aspx)

基本上说：

```
/^0*([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])\.0*([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])\.0*([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])\.0*([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])$/ 
```

它又长又复杂。但是在写完之后，应该可以很好地理解它的实际作用。

根据我的经验，正则表达式成功率越复杂和可靠，它可能失败的可能性就越大。我建议永远不要依赖正则表达式来获取**关键数据**......找到另一种方法，总有:)

# javascript - 无法访问 javascript 关联数组中的项目

> ID：11474589
> 
> 赞同：0
> 
> 时间：2012-07-13T16:32:21.700
> 
> 标签：javascript, module, associative-array

我在一个名为thing.js的文件中有一个javascript“模块”（我们在python中称之为）：

```
function Thing(){
this.a = "foo";
this.b = "bar";
this.c = "";

this.d = function(){
    this.c = this.a + this.b;
};
};

var things = {
'one':Thing(),
'two':Thing(),
'three':Thing()
};
alert(things["one"]); // output: undefined!!??

/* Pick out two random items from things. */
var random_thing = function(){
    //var grabbed = 0;
    //while(grabbed < 1){
var pick = getRandomInt(0,2);
alert(things["one"]); // output: undefined!!
    //if ()
    //return pick;
}; 
```

代码有点不完整，我想从事物中随机挑选出两个项目并返回。不过，这不是眼前的问题。

我有一个名为 main.js 的单独的“主”javascript 文件，它调用这些对象和函数：

```
$div1.append(random_thing()); 
```

在我的 html 文件中，我包含了两个 javascript 文件：

```
<script type="text/javascript" src="thing.js"></script>
<script type="text/javascript" src="main.js"></script> 
```

但是我不断得到的输出是“未定义”的警报（事物['one']）！我不明白第一个警报是如何返回未定义的，它就在事物关联数组的定义之下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:33:53.867

除了破坏属性之外，调用`Thing()`不会为您做任何事情。`window`您正在寻找`new Thing()`

```
var things = {
    'one': new Thing(),
    'two': new Thing(),
    'three': new Thing()
}; 
```

`new`如果您在不使用关键字的情况下调用“类”函数，那么`this`将引用`window`全局对象，这几乎可以确保事情会出错 - 有时非常糟糕。当您**使用**关键字`new`时，`this`将引用将自动返回的全新对象。

这是 JavaScript“类”的一个常见问题，并且（在我看来）最好通过使用创建函数来避免：

```
function Thing() {
    this.a = "foo";
    this.b = "bar";
    this.c = "";

    this.d = function(){
        this.c = this.a + this.b;
    };
};
Thing.create = function() {
    return new Thing();
};

var things = {
    'one': Thing.create(),
    'two': Thing.create(),
    'three': Thing.create()
}; 
```

这里的目标是永远不要依赖于`new`创建函数之外的关键字。

# javascript - 从被调用函数的回调中访问函数变量

> ID：11474591
> 
> 赞同：1
> 
> 时间：2012-07-13T16:32:29.547
> 
> 标签：javascript, node.js

这是我下面的代码，除了 return_info 没有设置之外，它都可以正常工作。是否可以从请求函数调用的回调中访问父 return_info 变量？

```
module.exports = {
  fetch_template_by_id : function(id) {
    var request = require('request');
    var return_info = {}; //TO BE MODIFIED
    request('http://localhost:5000/templates/v1/template/' + id, function (error, response, body) {
      if (!error && response.statusCode == 200) {
        console.log("Success - Error = " + error + " | Response = " + response + " | Body = " + body);
        return_info.body = body;                  // Should Modify the top
        return_info.json = JSON.parse(body);      // Should Modify the top
        return_info.success = true;              // Should Modify the top
      } else {
        console.error("There was an error requesting template ID=" + id)
        return_info.error = error;                // Should Modify the top
        return_info.response = response;          // Should Modify the top
        return_info.success = false;              // Should Modify the top
      }
    });
    return return_info;
  }
} 
```

编辑：供进一步参考，这是调用它的代码。

```
app.get('/form', function (req, res) {
var template_helper = require('../services/template-helper');
var template = template_helper.fetch_template_by_id("BirthRecord");
console.log(template);
if (template.success === true) {
  res.render('form', {"template": template.json });
} else {
  res.render('index');
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:36:15.970

由于请求是异步的，它会在你返回后执行`return_info`。因此，您需要为函数提供回调，如下所示

```
module.exports = {
  fetch_template_by_id : function(id, cb) {
    var request = require('request');
    var return_info = {}; //TO BE MODIFIED
    request('http://localhost:5000/templates/v1/template/' + id, function (error, response, body) {
      if (!error && response.statusCode == 200) {
        console.log("Success - Error = " + error + " | Response = " + response + " | Body = " + body);
        return_info.body = body;                  // Should Modify the top
        return_info.json = JSON.parse(body);      // Should Modify the top
        return_info.success = true;              // Should Modify the top
      } else {
        console.error("There was an error requesting template ID=" + id)
        return_info.error = error;                // Should Modify the top
        return_info.response = response;          // Should Modify the top
        return_info.success = false;              // Should Modify the top
      }
      cb(return_info);
    });
  }
}

fetch_template_by_id('awesome', function (info) {
  console.log(info);
}); 
```

**编辑 - 与上下文**

如果你想开始使用 node.js，你需要考虑回调的方式，下面是你应该如何做的例子。

```
app.get('/form', function (req, res) {
  var template_helper = require('../services/template-helper');
  template_helper.fetch_template_by_id("BirthRecord", function (template) {
    console.log(template);
    if (template.success === true) {
      res.render('form', {"template": template.json });
    } else {
      res.render('index');
    }
  });
}); 
```

# php - 文件内容回显到屏幕但未执行

> ID：11474594
> 
> 赞同：0
> 
> 时间：2012-07-13T16:32:47.963
> 
> 标签：php, include, mediawiki

我在安装 MediaWiki 时遇到了这个错误，但我不确定它是否过于本地化到 MediaWiki。

在 PHP 脚本中包含（或要求或使用其他方法）文件时，我得到以下信息：

```
class aClass() { }                               //Contents of file
Fatal error: Class 'aClass' not found in /path/path/file.php on line 9 
```

`aClass`只是一个测试，如您所见，它没有被加载。

`aClass`在我包含的文件中定义。（这个文件是被回显的那个。）这个文件只包含`class aClass() { }`语句，没有其他内容。

这是执行要求的文件：

```
$dir = dirname(__FILE__) . '/';

$wgAutoloadClasses['RatingData'] = $dir . 'RatingDataClass.php';
//MediaWiki class-loading statement

include $dir . 'RatingDataClass.php'; 
//simple include still fails

new aClass(); 
```

没有`new aClass();`，页面加载正常，没有错误或任何异常回显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:42:10.873

您的类文件中没有任何内容告诉 PHP 它要被处理，因此它被视为 HTML；尝试将其包装在`<?php`标签中：

```
<?php

class aClass() { }

?> 
```

# join - 如何连接两个按日期排序的表并按特定值限制每个表的结果？

> ID：11474596
> 
> 赞同：0
> 
> 时间：2012-07-13T16:32:58.837
> 
> 标签：join, limit

我有两张表，想加入这两张表的结果，但我的情况是：

```
成员表
+--------+----------+--------+---------- +
| a_id | 姓名 | 活跃 | 日期 |
+--------+----------+--------+---------- +
| 1 | 达芬奇 | 1 | 2012-03-27 15:40:14 |
| 2 | 莫奈 | 0 | 2012-04-16 01:14:17 |
| 3 | 梵高 | 0 | 2012-03-22 15:49:59 |
| 4 | 毕加索 | 1 | 2012-02-27 09:40:05 |
| 5 | 雷诺阿 | 1 | 2012-04-22 15:40:14 |
+--------+----------+--------+---------- +

采购表
+------+------+-------+-------------- ------+--------+
| a_id | p_id | 标题 | 购买日期 | 价格 |
+------+------+-------+-------------- ------+--------+
| 1 | 1 | 最后的晚餐 | 2012-03-27 15:40:14 | 34 |
| 1 | 2 | 蒙娜丽莎 | 2012-04-27 15:40:14 | 87 |
| 3 | 3 | 星夜 | 2012-03-27 15:40:14 | 48 |
| 3 | 4 | 吃土豆的人 | 2012-03-27 15:40:14 | 67 |
| 3 | 5 | 岩石 | 2012-03-27 15:40:14 | 33 |
| 5 | 6 | 双人舞 | 2012-04-30 15:40:14 | 64 |
+------+------+-------+-------------- ------+--------+

```

从上面的表格中，我想找到 2 个最近活跃的成员（成员表）和他们最近 1 次从购买表进行的购买。其结果应如下所示：

```
+------+------+-------+-------------- ------+--------+
| a_id | p_id | 标题 | 购买日期 | 价格 |
+------+------+-------+-------------- ------+--------+
| 1 | 2 | 蒙娜丽莎 | 2012-04-27 15:40:14 | 87 |
| 5 | 6 | 双人舞 | 2012-04-30 15:40:14 | 64 |
+------+------+-------+-------------- ------+--------+

```

我已经尝试了几个小时来找到这个问题的答案，但没有找到任何解决方案。请帮我。

谢谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:44:52.830

尝试

```
SELECT a.a_id, p.p_id, p.title, p.purchase_date, p.price 
FROM Member a LEFT JOIN Purchase p ON a.a_id = p.a_id 
WHERE a.Active = 1 
ORDER BY a.Date DESC LIMIT 2 
```

改变

```
ORDER BY a.Date DESC 
```

至

```
ORDER BY a.Date DESC, p.purchase_date DESC 
```

# c++ - 使用 sync_val_compare_and_swap 锁定空闲列表

> ID：11474598
> 
> 赞同：0
> 
> 时间：2012-07-13T16:33:09.803
> 
> 标签：c++, lock-free, compare-and-swap

我正在尝试提供一种线程安全的方式来更新对象。我看过一些关于它的帖子，但没有什么能 100% 回答我的问题。

我想要做的是维护一个名为“m_First”的指针来指向我的数据。如果有人调用 get，我会尊重该指针，返回对它指向的对象的引用。

如果有人调用 set，传入一个指向新对象的指针，我们将该指针添加到我们的列表并更新 m_First 以指向新对象。

我将对象存储在一个向量中，这样我们就可以在完成后清理内存。

目前我定义了这些成员：

```
std::vector<MyObject*> m_List;
const MyObject* m_First; 
```

首先是这样初始化的。m_First = m_List.back();

我想允许多个线程读取 m_First，同时多个线程也写入 m_First。

我的班级有两种方法

```
MyObject& getMyObject() {return *m_First;}

void setMyObject(MyObject* newObj) {

  m_List.push_back(newObj); // add to list so we can later cleanup mem

  do {
    Node* oldHead = m_First;
  } while (!__sync_bool_compare_and_swap(m_First, *oldHead, *newObj));
} 
```

我想知道的是，在 get 方法线程安全中返回 *m_First 。即我可以安全地取消引用它并返回对对象的引用，而另一个线程正在尝试更新 m_First，或者我是否需要使用某种原子方法来读取 m_First。

任何建议/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:10:55.223

为了确保从内存而不是寄存器中读取值，您需要进行原子读取。

有不同的方法可以实现这一目标。在某些系统上，通过 volatile 指针强制转换来读取对齐的字长值是`*(const volatile MyObject*)p`可行的。但是由于您已经在使用内置的原子操作，您可以使用`__sync_add_and_fetch`添加 0 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:17:41.890

> 我想允许多个线程读取 m_First，同时多个线程也写入 m_First。

多个线程将如何写入`m_First`？如果通过了，`setMyObject`那么他们都会`m_List`同时修改向量，这将是一场数据竞争，几乎肯定会破坏向量。

# google-analytics - 谷歌分析异步事件推送的限制？

> ID：11474600
> 
> 赞同：1
> 
> 时间：2012-07-13T16:33:12.160
> 
> 标签：google-analytics, google-analytics-api

我有一段代码在我的应用程序初始化时根据一组数据记录 Google Analytics 中的事件。它就像

```
function recordInitialData(dataArray) {
  for(var i = dataArray.length; i >= 0; i--) {
    _gaq.push(["_trackEvent", category1, action1, label1, dataArray[i].value1],["_trackEvent", category2, action2, label2, dataArray[i].value2]);
  }
} 
```

问题是，无论我实际调用多少`_gaq.push`次（因为有时 dataArray可能相当`_gaq.push`长）。谷歌分析只提到每个用户会话 500 个事件推送的限制（[分析文档](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#implementationConsiderations)）。这个“一次 10 个”的限制是否在任何地方都有记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:55:14.030

[直接](https://twitter.com/googleanalytics/status/223847029573562368)从谷歌得到答案：

“您可以一次发送 10 个，然后他们以每秒 1 个请求的速度补充。”

# javascript - 如何立即强制 .trigger(...) ？

> ID：11474606
> 
> 赞同：4
> 
> 时间：2012-07-13T16:33:33.930
> 
> 标签：javascript, jquery, jquery-mobile

我有一个按钮可以进行一些繁重的计算，并且在我想刷新页面的计算步骤之间。

**JavaScript：**

```
.on('click', function() {
    // compute something

    jQuery('#page')
        .trigger('pageshow')
    ;

    // compute something

    jQuery('#page')
        .trigger('pageshow')
    ;

    // compute something
} 
```

遗憾的是，这不起作用，因为- 事件在完成`pageshow`后被触发`.on(click)`。

有没有办法强制`.trigger(...)`立即执行？

**JavaScript - 丑陋的解决方案：**

```
.on('click', function() {
    // compute something

    window.setTimeout(function() {
        // compute something

        jQuery('#page')
            .trigger('pageshow')
        ;

        window.setTimeout(function() {
            // compute something

            jQuery('#page')
                .trigger('pageshow')
            ;
        }, 1);
    }, 1);
} 
```

丑陋的解决方案会起作用，但真的很丑陋。还必须实施检查`.on('click', ...)`- 事件在被触发时是否被完全计算。

**JavaScript - 更漂亮但仍然丑陋的解决方案：**

```
var functionFirst = function() {
    // compute something

    jQuery('#page')
        .trigger('pageshow')
    ;

    window.setTimeout(functionSecond, 1);
};

var functionSecond = function() {
    // compute something

    jQuery('#page')
        .trigger('pageshow')
    ;

    window.setTimeout(functionThird, 1);
};

var functionThird = function() {
    // compute something

    jQuery('#idJqGame')
        .trigger('pageshow')
    ;
};

window.setTimeout(functionFirst, 1); 
```

更漂亮但仍然丑陋的解决方案基本上与丑陋的解决方案做同样的事情 - 它更容易阅读，因此到目前为止我一直在使用这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:33:08.243

JavaScript 解释器是围绕“事件循环”构建的。由于这种设计以及解释器在单个线程中运行，所有事件都按*顺序*处理。

如果在您的应用程序设计中可能，请尝试定期调用页面刷新而不是事件。

如果您可以保证您的应用程序只能在现代浏览器上运行，另一种选择是将“繁重的计算”转移给网络工作者。更多信息在这里：[https ://developer.mozilla.org/en/Using_web_workers](https://developer.mozilla.org/en/Using_web_workers)

编辑1：

根据[http://dev.opera.com/articles/view/timing-and-synchronization-in-javascript/](http://dev.opera.com/articles/view/timing-and-synchronization-in-javascript/)的“嵌套事件”部分，只要您使用本机浏览器，就有可能实现您想要的将您的事件排队的功能

另一个优雅的解决方案可能是利用事件的顺序处理。将您的“繁重计算”移至事件处理程序。然后交替推送 'compute' 和 'pageshow' 事件，以便交替调用它们。这就是说，恐怕这会导致页面看起来没有响应，因为常规 DOM 事件也会*在*.

编辑2：

刚刚发现这个：[http](http://api.jquery.com/queue/) ://api.jquery.com/queue/可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:15:55.873

很抱歉，丑陋的解决方案是最好的解决方案。
它可以被美化，但底线是你需要将你的代码分成更小的块，以便有可能控制它们。

# java - 简单的 PHP NAT 穿透服务器脚本

> ID：11474607
> 
> 赞同：1
> 
> 时间：2012-07-13T16:33:40.910
> 
> 标签：java, php, p2p, nat, hole-punching

我正在尝试编写一个 PHP 脚本，它可以充当“主服务器”并促进两个 Java 游戏客户端之间的 P2P 连接。我正在使用一个允许主服务器端口访问的共享网络主机。

对于初学者，我想测试主服务器和 java 客户端之间的 UDP 套接字连接。这是我的 PHP 脚本，名为“masterServer.php”

```
<?php
error_reporting(E_ALL);
set_time_limit(40); // Allow script to execute for at most 40 seconds.
$myFile = "output.txt";
$fh = fopen($myFile, 'w');

if ($socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP))
{

if(socket_bind($socket,0, 2005))
{
    $clientAddress = 0;
    $clientPort = 0;
    fwrite($fh, "Start at: ".time());
    fwrite($fh, "Waiting for socket at ".time());
    if(socket_recvfrom($socket, &$udp_buff, 23, MSG_WAITALL, &$clientAddress, &$clientPort)) // BLOCKING METHOD
    {
        fwrite($fh, print_r($udp_buff, true));
    }
    else
    {
        echo(socket_strerror(socket_last_error()));
        die();
    }
}
else
{
    echo(socket_strerror(socket_last_error()));
    die();
}
}
else
{
echo(socket_strerror(socket_last_error()));
die();
}

fwrite($fh, "End at: ".time());
fclose($fh);
?> 
```

我访问 masterServer.php 以使脚本运行，并在几秒钟内启动一个简单的 Java 应用程序，该应用程序应将 UDP 数据包发送到主服务器。下面是 Java 应用程序的代码：

```
package comm;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketException;

public class UDPSocket 
{
public static void main (String[] asdf)
{

    try 
    {

        String host = <SERVER ADDRESS>;
        int port = 2005;

        byte[] message = "Java Source and Support".getBytes();

        // Get the internet address of the specified host
        InetAddress address = InetAddress.getByName(host);

        // Initialize a datagram packet with data and address
        DatagramPacket packet = new DatagramPacket(message, message.length,
                address, port);

        // Create a datagram socket, send the packet through it, close it.
        DatagramSocket dsocket = new DatagramSocket();
        dsocket.send(packet);
        dsocket.close();

    } 
    catch (SocketException e)
    {
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
} 
```

据我了解，PHP 服务器没有收到 UDP 数据包。该脚本不会继续通过阻塞 socket_recvfrom() 方法，并且不会将 UDP 数据包的内容写入输出文本文件。谁能帮我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-17T20:37:32.240

![在此处输入图像描述](../Images/37fb2b42c8010b52d6be22b10455e730.png)

由于共享主机在路由器和防火墙后面运行，因此您的套接字将侦听其未连接到 Internet 的内部 IP 地址“192.168.1.102”（如上图所示），因此它无法接收从内部网络外部发送的任何数据.

**解决方案** 由于您使用的是 UDP，您可以使用一种称为[UDP Puch Holing](http://en.wikipedia.org/wiki/UDP_hole_punching)的流行方法，您可以使用该方法从 Internet 发送和接收数据。根据您的要求。

# grails - 如何让 Spock 重试失败的 Geb 测试？

> ID：11474609
> 
> 赞同：3
> 
> 时间：2012-07-13T16:33:43.087
> 
> 标签：grails, groovy, spock, geb

我对使用 Geb 和 Spock 的 Grails 应用程序进行了功能测试。有时，功能测试会因超时或其他零星行为而失败。在以前使用 TestNG 的项目中，我有一个 retryAnalyzer 只是在测试执行期间触发重试以查看它是否两次都失败（然后真正失败）。

如何让 Spock 重试失败的测试？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-12T17:54:40.727

我知道这个问题已经有一年了，但我们一直有同样的问题。按照 Peter 的建议，我创建了一个 Spock 扩展（[https://github.com/anotherchrisberry/spock-retry](https://github.com/anotherchrisberry/spock-retry)）。

如果你有一个基本规范（这是我们的例子），你可以`@RetryOnFailure`给它添加一个注释：

```
@RetryOnFailure
class BaseFunctionalSpec extends Specification {
    //    all tests will execute up to two times before failing
} 
```

或者，您可以将其添加到特定功能：

```
class SomeSpec extends Specification {

    @RetryOnFailure(times=3)
    void 'test something that fails sporadically'() {
        // will execute test up to three times before failing
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T18:37:18.370

您必须编写一点 JUnit 规则（例如[https://gist.github.com/897229](https://gist.github.com/897229)之类的）或 Spock 扩展。您可能不得不忍受一些限制，例如重用同一个规范实例并且 JUnit 只报告一个测试，但希望没有什么能完全排除这种方法。（想到的一件事是模拟可能不起作用。）在 Spock 的未来版本中，重复测试（或其构建块）可能会成为一流的概念，消除这些限制。

# ruby - 关于 ruby 'main' 对象的不一致

> ID：11474610
> 
> 赞同：3
> 
> 时间：2012-07-13T16:33:50.090
> 
> 标签：ruby, metaprogramming

Ruby 在类和对象方面非常一致。但是，当涉及到顶级方法声明时，该规则会以某种方式失效。例如，

```
$ puts self # => main
$ puts self.class # => Object 
```

但是，在此`main`对象的上下文中声明的方法以某种方式可用作 class 的私有方法`Object`。

这有什么合乎逻辑的解释吗？我知道这非常方便，因为这些方法显示为“独立函数”，但是将其视为“它就是这样”会破坏其他一致的规则，因为通常您必须在类的上下文中定义一个方法使其成为该类的方法。但是，`main`对象不是 class `Object`，也根本不是 class 。

**重新构建我的问题：** 在 ruby​​ 的 REPL 中声明该方法的范围是什么？{类对象/对象主或模块内核}

关于 REPL 中声明的方法的私有性质，请参见以下示例：

```
def my_method # "a method declared in REPL"
  puts "method called"
end

# calling my_method in REPL aka top-level scope
my_method # => "method called"
[].my_method # => private method `my_method' called for []:Array (NoMethodError)
Array.my_method # => private method `my_method' called for Array:Class (NoMethodError) 
```

Q：如果my_method被定义为Object类下的私有方法，那为什么self设置为main而不是Object类。如果有人说它不在私有范围内，那么为什么我会遇到上述错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:15:17.630

Although I'm not sure I fully understand the question, I'll try to answer:

When you're working inside `irb` you're really working in a context like this:

```
class Object
  # you're here
end 
```

So, if you declare a method inside the REPL you're actually declaring it inside `main`'s class:

```
ruby-1.9.3-rc1 :001 > def foo; end
 => nil 
ruby-1.9.3-rc1 :002 > self.class.public_methods.include?(:foo)
 => true 
```

I'm not sure where you get the idea that the methods defined there are private to the class (but again, I might be misunderstanding the question).

The class you're inside in `irb` includes the `Kernel` module so that's why you have access to its functions (which, since you're inside the class, appear as stand-alone functions even though they're regular methods):

```
ruby-1.9.3-rc1 :003 > self.class.included_modules
 => [Kernel] 
```

This would make it consistent with the typical Ruby behavior and indeed, `main` is just `self` inside the Object class.

If you call `self` you'll receive `main` because that's the way it's instructed to do it through inspect. We can remove the `#to_s` method from `self` and see the real value:

```
ruby-1.9.3-p0 :001 > self
 => main 
ruby-1.9.3-p0 :002 > class << self; remove_method :to_s; end
 => #<Class:#<Object:0x007fc08387af00>> 
ruby-1.9.3-p0 :003 > self
 => #<Object:0x007fc08387af00 @prompt={:PROMPT_I=>"ruby-1.9.3-p0 :%03n > ", :PROMPT_S=>"ruby-1.9.3-p0 :%03n%l> ", :PROMPT_C=>"ruby-1.9.3-p0 :%03n > ", :PROMPT_N=>"ruby-1.9.3-p0 :%03n?> ", :RETURN=>" => %s \n", :AUTO_INDENT=>true}> 
```

*Edit: Before moving forward I think you should clarify which Ruby version are you using, see the sample below for 1.9.3:*

```
ruby-1.9.3-p0 :001 > def my_method
ruby-1.9.3-p0 :002?>     puts "method called"
ruby-1.9.3-p0 :003?> end
 => nil 
ruby-1.9.3-p0 :004 > 
ruby-1.9.3-p0 :005 >   [].my_method
method called
 => nil 
ruby-1.9.3-p0 :006 > Array.my_method 
method called 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:39:08.680

IMO 顶级方法是在~~module~~~~的上下文`Kernel`~~中定义的，而不是`Object`在 class 中，因此它们最终会出现在`Object`实例和类方法中（因为`Class`class`Kernel`也包括）：

```
def a_method
  "inside a_method"
end

public :a_method

p Object.a_method
p Object.new.a_method
p self.a_method
p Kernel.a_method 
```

这允许它们在任何情况下使用。

**更新**：它更简单，`Module.superclass`是一个`Object`，所以当我们在其中定义一些东西时，`Object`它最终也会作为`Module`实例方法。And `Class.superclass`is a `Module`，所以它最终也成为所有类的类方法。并且因为`Kernel.class`是一个`Module`，`Kernel.a_method`是一个类的实例方法`Module`。嗯，真的很简单吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:31:54.397

如果您问为什么可以在顶层定义方法/函数，而您不在任何类中，那么答案是您*也可以*在对象中为其所属的类定义方法。让我们看一个例子。

```
class C
  def f
    def g
      'g'
    end
    'f'
  end
end

C.new.g # NoMethodError: undefined method `g' for #<C:0x0>
C.new.f # => 'f'
C.new.g # => 'g' 
```

不建议这样做，但在这种情况下是一致的。

# java - 通过 java 连接到电话系统

> ID：11474618
> 
> 赞同：0
> 
> 时间：2012-07-13T16:34:10.460
> 
> 标签：java, call, jtapi, octopus

我想开发一个 Java 应用程序来记录我们电话系统的所有来电。我们使用由电信提供的章鱼开放系统。

经过一番研究，我发现 jtapi 将是一个解决方案，但我找不到任何好的教程。我在正确的轨道上吗？你能给我举一些例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T07:34:54.163

*   下载 JTAPI 库文件“ECsjtapia.jar”将其添加到您的项目中。
*   将 tsapi.pro 文件添加到您的项目中。在您的 tsapi.pro 文件中更改以下行 10.100.100.110 (您的 cms 服务器 ip)=450 (端口)
*   使用以下代码创建 listener.java `import javax.telephony.*;

公共类监听器{

```
static Provider provider;
static JtapiPeer peer1=null;
static String myService = "";

public static void main(String args[]){
    try {
        peer1 = JtapiPeerFactory.getJtapiPeer("com.avaya.jtapi.tsapi.TsapiPeer");
        //"com.avaya.jtapi.tsapi.TsapiPeer"
    }
    catch(Exception hata)
    {
        System.out.println("Error: "+hata.getMessage());
    }
    //System.out.println("Test is ok: "+peer1.getName());
    String[] services = peer1.getServices();

    if (services == null)
    {
        System.out.println("Unable to obtain the services list from JTAPI peer");
        System.exit(0);
    }
    myService = services[0];
    //System.out.println("Service is "+myService);

    System.out.println("Connecting to server-:"+myService+";login=;passwd=");       
    provider = peer1.getProvider(myService + ";login=;passwd=;");

    try {
        Terminal[] terminals = provider.getTerminals();
        for(int i=0;i<=terminals.length-380;i++){
            String arrterminals =terminals[i].getName() ;
            try {
                    Terminal terminal = provider.getTerminal(arrterminals);
                    terminal.addCallListener(new callListener());
                    System.out.println("Terminal added for monitoring : " + i + " : " + terminal.getName());

            } catch (InvalidArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ResourceUnavailableException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (MethodNotSupportedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } catch (ResourceUnavailableException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:36:26.883

如果你能找到一张旧的传真卡，你可以在电话线上唤起一个听众，同时进行录音。除此之外，不知道还有什么可以工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:10:46.790

我认为没有直接支持 Telekom Octopus 的 JTAPI 实现。您可以使用 gjtapi（在 sourceforge 上）在 TAPI 上尝试 JTAPI。

JTAPI 的标准 API 文档可以在 Java 社区进程 (jcp.org) 中找到。

本文档在 javax.telephony 的包描述中包含一些示例代码。

监控/跟踪通话非常简单：

*   连接到你的电话系统（细节取决于实现），这将导致一个连接
*   获取您要观察的扩展名：Connection.getTerminal 或 Connection.getAddress
*   实现 CallObserver 或 CallListener
*   现在您可以添加您的 CallObserver 或 CallListener ：例如 Address.addCallObserver。

在事件处理例程中，例如 CallObserver.callCahngedEvent(CallEv ev[])，您可以从事件对象中获取所有相关信息并使用它做任何您想做的事情。

就这样 ...

观察者听者？

根据您的 JTAPI 实现，Observer 可能会被弃用或不被弃用。

# php - 如何使用 Propel 1.6 的自定义 SQL 查询行数？

> ID：11474623
> 
> 赞同：1
> 
> 时间：2012-07-13T16:34:49.490
> 
> 标签：php, sql, postgresql, propel, symfony-2.1

我在 Symfony2 中有一个使用 Propel ORM 1.6 和 PostgreSQL 的项目。我正在尝试使用自定义 SQL 从查询中获取行数，[如此链接中所示，](http://www.propelorm.org/documentation/03-basic-crud.html)方法如下：

```
$con = Propel::getConnection(VerbNounPeer::DATABASE_NAME);
$countSql = "SELECT COUNT(*) FROM ("
               ." SELECT DISTINCT ON (fk_noun_id) *"
               ." FROM verb_noun"
               ." ORDER BY fk_noun_id, verb_noun_vote_count DESC"
               .") inner_tb";
$countSqlStmt = $con->prepare($countSql);
$countSqlStmt->execute(); 
```

上面的查询工作正常。但是，如何从 stmt（上面的 $countSqlStmt）对象中获取行数的整数值？我尝试使用：

```
$recordsCount = $countSqlStmt[0]; 
```

但是，鉴于 $countSqlStmt 是一个对象而不是数组，我得到“致命错误：无法使用 DebugPDOStatement 类型的对象作为数组...”

我还尝试使用 Propel 的格式化程序将其转换为数组：

```
$countSqlFormatter = new PropelArrayFormatter();
$countSqlRow = $countSqlFormatter->format($countSqlStmt); 
```

但是，这也不起作用，因为我需要为数组指定一个条件，而且我不知道该放什么，因为我的查询结果只是具有计数值而不是类的行。如果它是一个类，我会使用：

```
$formatter->setClass('VendorName\NameBundle\Model\VerbNoun'); 
```

有任何想法吗？在[此链接中使用了 PropelArrayFormatter()](http://trac.propelorm.org/browser/branches/1.5/test/testsuite/runtime/formatter/PropelArrayFormatterTest.php?rev=1371)但这对我没有太大帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:53:53.633

为了从 PDOStatement 中获取数据，您必须调用[`fetch`](http://fr2.php.net/manual/en/pdostatement.fetch.php#example-997)它的方法。

# javascript - Javascript & jQuery：更新对象数组

> ID：11474628
> 
> 赞同：1
> 
> 时间：2012-07-13T16:34:52.597
> 
> 标签：javascript, jquery

在尝试找到一个好的逻辑来更新 Javascript 中的对象数组时，我遇到了一些困难。
我通过向服务器发出请求来获得第一个数组。我得到一组对象，如下所示：

```
{id: 2, text: 'some text'}  //Object 
```

这就是数组的样子：

```
[Object, Object, Object] 
```

这些对象被转换成html。
过了一会儿，它执行第二次请求并获得一个新的数据对象列表。如何将旧列表与新列表同步？我所说的同步的意思是：删除不再存在的对象，以及相关的 html 部分，并在正确的位置插入当前不存在的节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:54:06.607

您可以找到添加和删除的项目，如下所示：

```
var origArray = [...];   // assume first set of data is in origArray
var newArray = [...];    // second set of data is in newArray

function makeMap(array, key) {
    var map = {};
    for (var i = 0; i < array.length; i++) {
        map[array[i][key]] = true;
    }
    return(map);
}

function compareArrayToMap(array, map) {
    var item, var results = [];
    for (var i = 0; i < array.length; i++) {
        item = array[i];
        if (!(item.id in map)) {
            results.push(item);
        }
    }
    return(results);
}

// build id map for each array
var origMap = makeMap(origArray, "id");
var newMap = makeMap(newArray, "id");

// find items that have been removed
var removedItems = compareArrayToMap(origArray, newMap);

// find items that have been added
var addedItems = compareArrayToMap(newArray, origMap); 
```

# entity-framework - 每个具体类型继承的实体框架表：通过 .EDMX 生成

> ID：11474632
> 
> 赞同：1
> 
> 时间：2012-07-13T16:35:15.763
> 
> 标签：entity-framework, inheritance

可以通过实体框架设计器生成TPC继承结构吗？我已经设法让 TPC 继承结构通过 Code First 工作，但是我连接的数据库有 20 个关系表。我不想首先通过代码来管理所有这些关系。

如果那不可能，是否可以通过代码优先生成 .EDMX，然后通过设计器对其进行编辑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T21:59:00.140

Gil Fink 对此有一个博客：

[http://blogs.microsoft.co.il/blogs/gilf/archive/2010/01/25/table-per-concrete-type-in​​heritance-in-entity-framework.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/01/25/table-per-concrete-type-inheritance-in-entity-framework.aspx)

# string - 计算将一个字符替换为另一个字符的所有可能性

> ID：11474634
> 
> 赞同：6
> 
> 时间：2012-07-13T16:35:20.130
> 
> 标签：string, list, haskell, replace, char

```
> magicFunction 'l' '_' "hello world"
["he_lo world", "hel_o world", "hello wor_d"] 
```

标准 Prelude 中是否有这样的神奇功能，还是可以轻松与其他功能组合？

不，这不是家庭作业，但是，请不要花太多时间手动滚动您自己的复杂解决方案，我宁愿自己做也不愿浪费您的时间；）只是询问它是否在标准中。

* * *

编辑：这是我的第一次尝试：

```
import Data.List (findIndices)

replace i y xs = take i xs ++ y : drop (i+1) xs

magicFunction x y xs = map (\i -> replace i y xs) (findIndices (== x) xs) 
```

可以改进吗？`replace`当然，标准中必须有类似的东西吗？我在`replace :: Eq a => a -> a -> [a] -> [a]`中找到`Network.CGI.Protocol`，但它的签名错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T21:44:41.137

`magicFunction`不，标准库中没有类似的东西。但是自己写很容易，所以除非它是一个经常使用的函数，否则将它放在库中是没有意义的。除了您的版本和 Daniel Wagner 使用`tails`and的提示之外`inits`，这里有一个简单的实现：

```
magicFunction find replace = init . helper
  where
    helper (c:cs) = if c == find then ((replace:cs):) else id $ map (c:) (helper cs)
    helper [] = [[]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:01:26.257

在标准发行版中没有这样的东西。但是，有一个众所周知的技巧可以形成解决方案的开始：

```
Prelude Data.List> (\xs -> zip (inits xs) (tails xs)) "Hello, world!"
[("","Hello, world!"),("H","ello, world!"),("He","llo, world!"),("Hel","lo, world!"),("Hell","o, world!"),("Hello",", world!"),("Hello,"," world!"),("Hello, ","world!"),("Hello, w","orld!"),("Hello, wo","rld!"),("Hello, wor","ld!"),("Hello, worl","d!"),("Hello, world","!"),("Hello, world!","")] 
```

# rad - 理性应用开发者更新到 8.5

> ID：11474635
> 
> 赞同：0
> 
> 时间：2012-07-13T16:35:20.690
> 
> 标签：rad

我的机器上安装了 RAD 8.0.4。我想更新到 8.5。我必须从头开始安装吗？更新管理器有 8.0.4.1 可用，但没有列出 8.5。有人知道吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T20:33:25.650

我不认为那样工作。

从 developerWorks 查看此链接： [Upgrade from 8.0.4 to 8.5.1 - blocker](https://www.ibm.com/developerworks/community/forums/html/topic?id=77777777-0000-0000-0000-000014934249&ps=100)

# android - Android datepicker 获取日期

> ID：11474640
> 
> 赞同：0
> 
> 时间：2012-07-13T16:35:42.083
> 
> 标签：android

我在布局上放置了一个日期选择器，让用户选择他们的生日。我之前通过单击按钮并打开对话框来使用 datepickerdialogs。但是这次日期选择器本身在布局上，我可以选择一个日期。每次用户更改日、月或年时，如何获取日期？

![在此处输入图像描述](../Images/ff8a4df4fa2106d464a59301f7cd8b7a.png)

**解决方案：**

```
dpResult = (DatePicker) findViewById(R.id.dpResult);

dpResult.init(year, month, day, new OnDateChangedListener() {
    @Override
    public void onDateChanged(DatePicker view, int year, int monthOfYear,int dayOfMonth) {

           //here I got all the values I need
    }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:40:04.923

我想你必须使用 [`init(int year, int monthOfYear, int dayOfMonth, DatePicker.OnDateChangedListener yourListenerHere)`](http://developer.android.com/reference/android/widget/DatePicker.html#init%28int,%20int,%20int,%20android.widget.DatePicker.OnDateChangedListener%29). 你试过这个吗？

# c# - 基于子实体的属性构建 OrderBy Lambda 表达式

> ID：11474643
> 
> 赞同：12
> 
> 时间：2012-07-13T16:35:50.643
> 
> 标签：c#, linq, lambda, expression-trees

我正在尝试`OrderBy`使用 lambda 表达式生成一个 LINQ 子句，并将实体的列名作为字符串输入（在下面的“sortOn”变量中）。

下面的代码适用于 sortOn 值，如生成 lambda 的“代码”

```
p => p.Code 
```

但我也想对一个子实体进行排序，其中 lambda 可能在

```
p => p.Category.Description 
```

所以在这种情况下，我只想设置 sortOn = "Category.Description" 并生成正确的 lamdba 表达式。

这可能吗？任何有关执行此操作的最佳方法的建议都将受到欢迎。

此代码适用于简单的情况：

```
var param = Expression.Parameter(typeof (Product), "p");

var sortExpression = Expression.Lambda<Func<Product, object>>(
    Expression.Property(param, sortOn), param);

if (sortAscending ?? true)
{
   products = products.OrderBy(sortExpression);
}
else
{
   products = products.OrderByDescending(sortExpression);
} 
```

此问题的用例是显示数据网格并能够对数据进行排序，只需将要排序的列名传递回服务器即可。我想让解决方案通用，但现在已经开始使用特定类型（示例中的产品）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-13T17:10:31.230

这将生成正确的 lambda 表达式：

```
var sortOn = "Category.Description";
var param = Expression.Parameter(typeof(Product), "p");
var parts = sortOn.Split('.');

Expression parent = param;

foreach (var part in parts)
{
    parent = Expression.Property(parent, part);
}

var sortExpression = Expression.Lambda<Func<Product, object>>(parent, param); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:28:36.810

您可以使用[动态 LINQ 查询库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)轻松完成此操作。假设你有一个[`IQueryable<T>`实现](http://msdn.microsoft.com/en-us/library/bb351562.aspx)，`Product`你可以很容易地做到：

```
IQueryable<Product> products = ...;

// Order by dynamically.
products = products.OrderBy("Category.Description"); 
```

博客文章有一个[指向 libary 的链接](http://msdn2.microsoft.com/en-us/vcsharp/bb894665.aspx)，您必须自己在解决方案中构建/包含该项目，但它运行良好，并且解析非常健壮。它使您不必自己编写解析代码；即使对于如此简单的事情，如果需求扩展，该库也可以满足您的需求，而本土解决方案却没有。

它还具有许多其他动态运算符（`Select`、`Where`等），因此您可以执行其他动态操作。

引擎盖下没有魔法，它只是解析你传递给它的字符串，然后根据解析结果创建 lambda 表达式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-10T10:36:38.230

这是一个扩展**OrderBy**方法，它适用于任意数量的嵌套参数。

```
public static IQueryable<T> OrderBy<T>(this IQueryable<T> query, string key, bool asc = true)
{
  try
  {
    string orderMethodName = asc ? "OrderBy" : "OrderByDescending";
    Type type = typeof(T);
    Type propertyType = type.GetProperty(key)?.PropertyType; ;

    var param = Expression.Parameter(type, "x");
    Expression parent = param;

    var keyParts = key.Split('.');
    for (int i = 0; i < keyParts.Length; i++)
    {
      var keyPart = keyParts[i];
      parent = Expression.Property(parent, keyPart);

      if (keyParts.Length > 1)
      {
        if (i == 0)
        {
          propertyType = type.GetProperty(keyPart).PropertyType;
        }
        else
        {
          propertyType = propertyType.GetProperty(keyPart).PropertyType;
        }
      }
    }

    MethodCallExpression orderByExpression = Expression.Call(
      typeof(Queryable),
      orderMethodName,
      new Type[] { type, propertyType },
      query.Expression,
      CreateExpression(type, key)
    );

    return query.Provider.CreateQuery<T>(orderByExpression);
  }
  catch (Exception e)
  {
    return query;
  }
} 
```

`CreateExpression`我的解决方案中使用的方法[在这篇文章](https://stackoverflow.com/a/16208620/2028810)中定义。

扩展方法的用法`OrderBy`如下。

```
IQueryable<Foo> q = [Your database context].Foos.AsQueryable();
IQueryable<Foo> p = null;

p = q.OrderBy("myBar.name");  // Ascending sort
// Or
p = q.OrderBy("myBar.name", false);  // Descending sort
// Materialize
var result = p.ToList(); 
```

类型`Foo`及其属性也取自与 method 相同的帖子`CreateExpression`。

希望这篇文章对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:01:56.170

如果您不需要表达式，如何：

```
products = products.Orderby(p1 => p1.Code).ThenBy(p2 => p2.Category.Description) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T18:09:52.357

嗨，您还可以创建一个扩展方法，例如它可以排序到任何深度，而不仅仅是子级

```
 public static IEnumerable<TSource> CustomOrderBy<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey> keySelector)
    {
        List<string> list=new List<string>();
        List<TSource> returnList=new List<TSource>();
        List<int> indexList = new List<int>();

        if (source == null)
            return null;
        if (source.Count() <= 0)
            return source;
        source.ToList().ForEach(sc=>list.Add(keySelector(sc).ToString())); //Extract the strings of property to be ordered

        list.Sort(); //sort the list of strings

        foreach (string l in list) // extract the list of indexes of source according to the order
        {
            int i=0;
            //list.ForEach(l =>

                foreach (var s in source.ToList())
                {
                    if (keySelector(s).ToString() == l)
                        break;
                    i++;
                }
                indexList.Add(i);
        }
        indexList.ForEach(i=>returnList.Add(source.ElementAt(i))); //rearrange the source according to the above extracted indexes
        return returnList;
    }
}
public class Name
{
    public string FName { get; set; }
    public string LName { get; set; }
}
public class Category
{
    public Name Name { get; set; }
}
public class SortChild
{
    public void SortOn()
    {
        List<Category> category = new List<Category>{new Category(){Name=new Name(){FName="sahil",LName="chauhan"}},
            new Category(){Name=new Name(){FName="pankaj",LName="chauhan"}},
            new Category(){Name=new Name(){FName="harish",LName="thakur"}},
            new Category(){Name=new Name(){FName="deepak",LName="bakseth"}},
            new Category(){Name=new Name(){FName="manish",LName="dhamaka"}},
            new Category(){Name=new Name(){FName="arev",LName="raghaka"}}
        };
        var a = category.CustomOrderBy(s => s.Name.FName);

    }

} 
```

它的自定义方法，现在它仅适用于字符串属性，但是它可以使用泛型进行反应以适用于任何原始类型。我希望这将有所帮助。

# ruby-on-rails - 是否有一种“声明性”方式来授权可以更改模型的哪些属性？

> ID：11474649
> 
> 赞同：1
> 
> 时间：2012-07-13T16:36:07.117
> 
> 标签：ruby-on-rails, activerecord, model, authorization

attr_accessible 的使用还不够，因为它要么打开要么关闭。

一些模型有用户表单，也有管理表单。对于管理员来说，他们需要能够批量分配的属性需要在 attr_accessible 中，但这意味着普通用户可以恶意注入这些参数。在管理员端手动分配所有内容似乎需要做很多工作，并且将 attr_accessible 分配给普通用户可以更改的那些属性。

是否有针对此问题的以 Rails 为中心的标准解决方案？也许是宝石？

我设想这样的事情：

```
model.update_attributes_with_user(params[:model], user) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:45:11.947

您`:as`想要`attr_accessible`.

有关更多信息和示例，请参阅[此 Rails 文档](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)。

作为一个简单的例子（来自链接）：

```
 attr_accessible :name, :credit_rating, :as => :admin
 customer.assign_attributes({ "name" => "David", ... }, :as => :admin) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:48:58.820

我建议您阅读有关在控制器中设置批量分配属性的官方博客文章：[http ://weblog.rubyonrails.org/2012/3/21/strong-parameters/](http://weblog.rubyonrails.org/2012/3/21/strong-parameters/)

它还链接到帮助实现所谓的切片模式（或其提取）的 gem： [https ://github.com/rails/strong_parameters](https://github.com/rails/strong_parameters)

此解决方案允许您在用户控制器和 admin_users 控制器中以不同方式指定可编辑属性。

# javascript - 如何计算选择和验证的单选框数量？

> ID：11474650
> 
> 赞同：0
> 
> 时间：2012-07-13T16:36:10.477
> 
> 标签：javascript, validation

所以这就是我的代码的作用：

它显示 10 组单选按钮，每组有 2 个选项。（所以总共 20 个单选按钮）。这10个集合都有不同的名称，但在同一形式内。一个人只能从 10 个按钮中选择 5 个。我有一段代码可以在选择 5 个后禁用单选按钮。现在，如果选择了 4 个或更少的按钮，我想阻止人们提交表单。

以下是代码示例：

HTML：

```
 <form method="post" action="index.php" name="buttons" onsubmit="return Validation()">
 <input type="radio" id="button" value="first_button" name="1" />
 <input type="radio" id="button" value="second_button" name="1" />
 <input type="radio" id="button" value="first_button" name="2" />
 <input type="radio" id="button" value="second_button" name="2" />
 <input type="radio" id="button" value="first_button" name="3" />
 <input type="radio" id="button" value="second_button" name="3" />
 <input type="radio" id="button" value="first_button" name="4" />
 <input type="radio" id="button" value="second_button" name="4" />
 <input type="radio" id="button" value="first_button" name="5" />
 <input type="radio" id="button" value="second_button" name="5" />
 <input type="radio" id="button" value="first_button" name="6" />
 <input type="radio" id="button" value="second_button" name="6" />
 <input type="radio" id="button" value="first_button" name="7" />
 <input type="radio" id="button" value="second_button" name="7" />
 <input type="radio" id="button" value="first_button" name="8" />
 <input type="radio" id="button" value="second_button" name="9" />
 <input type="radio" id="button" value="first_button" name="9" />
 <input type="radio" id="button" value="second_button" name="9" />
 <input type="radio" id="button" value="first_button" name="10" />
 <input type="radio" id="button" value="second_button" name="10" />
 </form> 
```

JAVASCRIPT

```
 function Validation()
 {
 var bol2 = $("input:radio:checked").length;
 if (bol2<=4)
   {
   alert("Please select 5 buttons");
   return false;
   }
 } 
```

代码现在可以工作了。谢谢@Climbage，我查看了其他代码并弄清楚该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:01:31.213

试试这个 - [http://jsfiddle.net/BeT4h/](http://jsfiddle.net/BeT4h/)

```
<form method="post" action="index.php" name="buttons" id="form">

<script>
function showTime() {
    var inputs = document.getElementById("form").elements;
    var count  = 0;
    for (var i = 0; i < inputs.length; i++) {
        if (inputs[i].type == 'radio' && inputs[i].checked) {
            count++;
        }
    }
    alert(count);
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:01:13.967

只需默认选中其中的 5 个即可。放置`check='checked'`其他所有输入。放入所有 first_button 或 second_button。

# c - 无法以正确模式从文件复制/读取到列表

> ID：11474652
> 
> 赞同：2
> 
> 时间：2012-07-13T16:36:19.210
> 
> 标签：c, list, addressbook, scanf

我从文件读/写有问题并正确查看输入：

```
// LOAD THE LIST FROM THE FILE
struct elemento *caricalista(struct elemento *p) {
    struct elemento *punt;
    FILE * utenti = fopen ("miarubrica.txt", "r");

    char nome[MAX];
    char cognome[MAX];
    char telefono[MAX];
    char mail[MAX];

    if (utenti == NULL) {
        printf("non ho caricato gli utenti");
    } else {
        while (!feof(utenti)) {    
            if (p != NULL) {
                punt = (struct elemento *)malloc(sizeof(struct elemento));

                fscanf(utenti, "%s", nome);
                puts(nome);
                fscanf(utenti, "%s", cognome);
                puts(cognome);
                fscanf(utenti, "%s", telefono);
                puts(telefono);
                fscanf(utenti, "%s", mail);
                puts(mail);

                strcpy(punt->nome, nome);
                strcpy(punt->cognome, cognome);
                strcpy(punt->telefono, telefono);
                strcpy(punt->mail, mail);

                punt->pun = p;
            } else if (p == NULL) {
                p = (struct elemento *)malloc(sizeof(struct elemento));
                fscanf(utenti, "%s", nome);
                fscanf(utenti, "%s", cognome);
                fscanf(utenti, "%s", telefono);
                fscanf(utenti, "%s", mail);

                strcpy(p->nome, nome);
                strcpy(p->cognome, cognome);
                strcpy(p->telefono, telefono);
                strcpy(p->mail, mail);

                p->pun = NULL;
                punt = p;
            }
        }
    }

    fflush(utenti);
    fclose(utenti);
    return(punt);
}

// SAVE THE LIST 
int salva(struct elemento *p) { 
    FILE *stream = fopen("miarubrica.txt", "w");

    while (p != NULL) { 
        // Scrive sul file
        fprintf(stream, "%s ", p->nome);
        fprintf(stream, "%s ", p->cognome);
        fprintf(stream, "%s ", p->mail);
        fprintf(stream, "%s \n", p->telefono);

        p = p->pun;
    } 

    fflush(stream);
    fclose(stream);

    return;
} 
```

这写给我（例子）

```
pippo disney 02345432 pippodisney@pippodisney.com 
```

在 miarubrica.txt 但是当我使用读取列表的方法读取它时（它有效），我看到了

```
pippo disney 02345432 pippodisney@pippodisney.com
pippo disney 02345432 pippodisney@pippodisney.com 
```

在壳中两次。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:13:19.433

对于您是前置（将新条目放在by 指向的条目*之前*）还是附加（将新条目放在by指向的条目*之后*`caricalista`） ，似乎存在一些混淆。*`p`*`p`**

 **例如，如果`p`is not `NULL`，它会`punt->pun = p;`，保持`p`不变，但在下一次迭代中它会做同样的事情。

此外，如果文件为空，它将返回`punt`未初始化的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:19:43.577

这是一个快速修复。您已经将这些内容与“->pun”指针混合在一起。我已经删除了 salva() 方法，因为您不使用它。

```
#include <stdio.h>
#include <malloc.h>

#define MAX (256)
struct elemento {
    char nome[MAX], cognome[MAX], telefono[MAX], mail[MAX];
    struct elemento* pun;
};

// LOAD THE LIST FROM THE FILE
struct elemento *caricalista(struct elemento *p) {
    struct elemento *punt = p;
    FILE * utenti = fopen ("miarubrica.txt","r");

    if(!utenti) { printf("non ho caricato gli utenti"); return p; }

    while(!feof(utenti)) {    
        punt= (struct elemento *)malloc(sizeof(struct elemento));

        fscanf(utenti,"%s%s%s%s", 
                punt->nome, punt->cognome, punt->telefono, punt->mail);

        printf("%s %s %s %s\n",   /* print new element */
            punt->nome, punt->cognome, punt->telefono, punt->mail);

        punt->pun = p; /* old list at the end */
        p = punt;   
    }

    fclose(utenti);
    return(punt);
}

int main() { caricalista(NULL); return 0; } 
```**

# java - Grails - 保存域对象时 - 我收到“拒绝值 [null] 错误”

> ID：11474653
> 
> 赞同：2
> 
> 时间：2012-07-13T16:36:22.050
> 
> 标签：java, grails, orm, grails-orm

我将三个域对象定义为：

```
class Member {
    String name

    static constraints = {}
    static belongsTo=[community:Community]
}

class Community {
    String leaderName
    String code

    static constraints = {}
    static hasMany=[members: Member]
    static belongsTo=[bank:Bank]
}

class Bank {

    String bankName
    static hasMany=[communities: Community]
    static constraints = {}
} 
```

当我尝试使用`BootStrap.groovy`配置类中的一些测试数据初始化这些域对象时：

```
 def init = { servletContext ->

            def m1 = new Member(name:"M1_Name")
            def m2 = new Member(name:"M2_Name")
            def m3 = new Member(name:"M3_Name")

            m1.save(failOnError:true)
            m2.save(failOnError:true)
            m3.save(failOnError:true)

            def comA = new Community(leaderName:"LeaderA", code:"AA")
            def comB = new Community(leaderName:"LeaderB", code:"BB")

            comA.addToMembers(m1)
            comA.addToMembers(m2)
            comB.addToMembers(m3)

            comA.save(failOnError:true)
            comB.save(failOnError:true)

            def bankA = new Bank(bankName:"BankA")
            def bankB = new Bank(bankName:"BankB")

            bankA.addToCommunities(comA)
            bankB.addToCommunities(comB)

            bankA.save(failOnError:true)
            bankB.save(failOnError:true)
        } 
```

我收到以下错误：

```
| Loading Grails 2.0.4
| Configuring classpath.
| Environment set to development.....
| Packaging Grails application.....
| Compiling 3 source files.....
| Running Grails application
| Error 2012-07-13 22:14:44,798 [pool-5-thread-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: Validation Error(s) occurred during save():
- Field error in object 'mygrailtests.Member' on field 'community': rejected value [null]; codes [mygrailtests.Member.community.nullable.error.mygrailtests.Member.community,mygrailtests.Member.community.nullable.error.community,mygrailtests.Member.community.nullable.error.mygrailtests.Community,mygrailtests.Member.community.nullable.error,member.community.nullable.error.mygrailtests.Member.community,member.community.nullable.error.community,member.community.nullable.error.mygrailtests.Community,member.community.nullable.error,mygrailtests.Member.community.nullable.mygrailtests.Member.community,mygrailtests.Member.community.nullable.community,mygrailtests.Member.community.nullable.mygrailtests.Community,mygrailtests.Member.community.nullable,member.community.nullable.mygrailtests.Member.community,member.community.nullable.community,member.community.nullable.mygrailtests.Community,member.community.nullable,nullable.mygrailtests.Member.community,nullable.community,nullable.mygrailtests.Community,nullable]; arguments [community,class mygrailtests.Member]; default message [Property [{0}] of class [{1}] cannot be null]

Message: Validation Error(s) occurred during save():
- Field error in object 'mygrailtests.Member' on field 'community': rejected value [null]; codes [mygrailtests.Member.community.nullable.error.mygrailtests.Member.community,mygrailtests.Member.community.nullable.error.community,mygrailtests.Member.community.nullable.error.mygrailtests.Community,mygrailtests.Member.community.nullable.error,member.community.nullable.error.mygrailtests.Member.community,member.community.nullable.error.community,member.community.nullable.error.mygrailtests.Community,member.community.nullable.error,mygrailtests.Member.community.nullable.mygrailtests.Member.community,mygrailtests.Member.community.nullable.community,mygrailtests.Member.community.nullable.mygrailtests.Community,mygrailtests.Member.community.nullable,member.community.nullable.mygrailtests.Member.community,member.community.nullable.community,member.community.nullable.mygrailtests.Community,member.community.nullable,nullable.mygrailtests.Member.community,nullable.community,nullable.mygrailtests.Community,nullable]; arguments [community,class mygrailtests.Member]; default message [Property [{0}] of class [{1}] cannot be null]

   Line | Method
->>  13 | doCall                           in BootStrap$_closure1
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   301 | evaluateEnvironmentSpecificBlock in grails.util.Environment
|   294 | executeForEnvironment . . . . .  in     ''
|   270 | executeForCurrentEnvironment     in     ''
|   303 | innerRun . . . . . . . . . . . . in java.util.concurrent.FutureTask$Sync
|   138 | run                              in java.util.concurrent.FutureTask
|   886 | runTask . . . . . . . . . . . .  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run                              in     ''
^   662 | run . . . . . . . . . . . . . .  in java.lang.Thread 
```

在这里，第 13 行是

```
m1.save(failOnError:true) 
```

你能告诉我发生了什么问题吗？或者我错过了什么。

**更新：** 当我删除和对象中`belongsTo`的关系时，它可以正常工作。`Member``Community`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:53:55.940

当您添加该`belongsTo: Community`部分时，`Member`您会说这`Member`将属于一个`Community`.

构造`Member`对象时，您没有提供`Community`与`Member`. 犯下`Member`这样的事情会爆炸，因为你还没有`Community`说它属于。

无论如何，您不需要那些`save`调用，因为`belongsTo`标记`Community`将负责保存。取出 3 m[x].save() 行，读取`belongsTo`代码并查看它是否按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:57:31.240

它的对象创建顺序。belongsTo 将创建一个外键关系（至少在默认情况下），因此您必须以与示例中显示的相反顺序创建对象（例如银行、社区、成员）。

您还可以更深入地了解约束和映射，以更改一些默认机制。Grails 指南相当长，有时我发现它假定了一些以前的 Hibernate 知识，但它应该包含大部分内容（您可能必须深入到“其他”和“高级”主题）。

# ruby - 为新 gem 加载 rake 任务的路径是什么

> ID：11474658
> 
> 赞同：4
> 
> 时间：2012-07-13T16:36:41.330
> 
> 标签：ruby, rubygems, rake, bundler

我尝试使用捆绑程序创建一个新的 ruby​​gem，并打算从 ruby​​gem 文件夹 ~/work/bezier/lib/task/ 加载 rake 任务。但是 pwd 似乎在 /Users/wizztjh/work/bezier_server 中，为新 gem 加载 rake 任务的路径是什么？

我的 ruby​​gem 文件夹

```
bezier/lib
  /railtie.rb
  /task/get_transitions.rake 
```

撬

```
From: /Users/wizztjh/work/bezier/lib/bezier/railtie.rb @ line 4 :

    1: module Bezier
    2:   class Railtie < Rails::Railtie
    3:     rake_tasks do
 => 4:       binding.pry
    5:       load "lib/task/get_transitions.rake"
    6:     end
    7:   end
    8: end

[1] pry(#<Bezier::Railtie>)> Dir.pwd
=> "/Users/wizztjh/work/bezier_server"
[2] pry(#<Bezier::Railtie>)> 
```

因为根据 ruby​​gem 文档

```
rake_tasks do
    load "path/to/my_railtie.tasks"
end 
```

但是什么是路径/到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T06:35:52.653

我尝试使用 github 的高级代码搜索来搜索`Rails::Railtie rake_tasks do load` [广播](https://github.com/futuresimple/broadcast/blob/3c469af6b212ea395939646410886c3b23631a6e/lib/broadcast/railtie.rb)，我找到了解决方案。

贝塞尔/任务/get_transitions.rake

```
#bezier/lib/railtie.rb
module Bezier
  class Railtie < Rails::Railtie
    railtie_name :bezier
    rake_tasks do 
       load "bezier/tasks/get_transitions.rake"
    end
  end
end 
```

所以，ruby gem railtie `load`pwd 是 Gem.path 的根

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-23T01:00:59.630

gem 的`lib`目录是 Railtie`rake_tasks`加载路径的根目录。因此，如果您的任务在`lib/tasks/stuff.rake`，请使用`load 'tasks/stuff.rake'`.

一个这样的例子是[sitemap_generator gem](https://github.com/kjvarga/sitemap_generator/tree/master/lib)。

# symfony - 树枝模板引擎功能或过滤器以限制数字

> ID：11474670
> 
> 赞同：0
> 
> 时间：2012-07-13T16:37:34.380
> 
> 标签：symfony, twig

是否有 twig 模板引擎的等效函数或 PHP 的[ceil](http://php.net/manual/en/function.ceil.php)函数的过滤器。我查看了文档，但找不到现成的过滤器或功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:41:35.243

~~也许您可以尝试使用 // 运算符，如下所示：~~

 ~~```
{{20 // 1 + 1}} 
```~~ 

~~如果这对您来说还不够短，那么~~您可能应该[编写自己的树枝扩展](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-10T05:39:37.230

Twig 最近添加了这个功能：

```
{{ (3.333)|round(0, 'ceil') }} 
```

[在此处](http://twig.sensiolabs.org/doc/filters/round.html)查看文档

# c# - 在文件中查找“空”部分

> ID：11474678
> 
> 赞同：-1
> 
> 时间：2012-07-13T16:37:53.170
> 
> 标签：c#, file

**编辑1：**

我构建了一个 torrent 应用程序；同时从不同的客户端下载。每个下载代表我的文件的一部分，不同的客户端有不同的部分。**下载完成后，我需要通过在我的文件中查找“空”部分**来了解我现在需要实现的部分。

**创建具有固定大小的文件的一种方法：**

```
File.WriteAllBytes(@"C:\upload\BigFile.rar", new byte[Big  Size]); 
```

**我的部分 Arr 将我的文件表示为部分：**

```
BitArray TorrentPartsState = new BitArray(10); 
```

**例如：**

文件大小为 100。

```
 TorrentPartsState[0] = true; // thats mean that in my file, from position 0 until 9 I **dont** need to fill in some information.
  TorrentPartsState[1] = true; // thats mean that in my file, from position 10 until 19 I **need** to fill in some information. 
```

即使计算机/应用程序关闭，我也找到了一种有效的方法来保存 BitArray 包含的内容。我坚持的一种方法是通过 xml 文件并在每次完成部分时更新它。

我认为它不是聪明有效的解决方案。对另一个有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:48:31.870

您可以使用[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)（在 System.Collections 中）。

然后，当您访问文件中的偏移量时，您可以将该偏移量处的 BitArray 设置为 true。

因此，对于您的 10,000 字节文件：

```
BitArray ba = new BitArray(10000);

// Visited offset, mark in the BitArray            
ba[4] = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:17:04.497

听起来您在开始转移时知道以下内容：

1.  最终文件的大小。
2.  您打算用于文件的（最大）流数。

创建输出文件并分配所需的空间。

使用相关文件名创建第二个“控制”文件，例如添加您自己的扩展名。在该文件中维护与网络流相对应的流状态结构数组。每个状态都由起始偏移量和传输的字节数组成。定期刷新流缓冲区，然后更新控制文件以反映取得和*提交*的进度。

主题变化：

*   控制文件可以定义要传输的段，例如 16MB 块，并由寻找不完整段和从中检索它的合适服务器的线程视为工作队列。
*   控制文件可以是结果文件中的一个单独的分支。（我在开玩笑吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:47:23.917

在您的文件中实现一个文件系统（如在磁盘上） - 只需使用一些简单的东西，应该是 FOS 领域中可用的东西

# android - adobe air android Netconnection.close()

> ID：11474680
> 
> 赞同：1
> 
> 时间：2012-07-13T16:38:11.693
> 
> 标签：android, air, netconnection

我在我的 adobe air 应用程序中注意到，我在尝试关闭我的 Netconnection 时遇到了间歇性崩溃。该应用程序停止响应，最终如果您继续尝试做某事，它会崩溃。它发生在 10 次中的 7 次左右，这很奇怪！

有没有人遇到过这个或知道发生了什么？

这是完整 ANR 跟踪的链接：http: [//pastebin.com/ut0eZRrU](http://pastebin.com/ut0eZRrU)

谢谢，任何帮助将不胜感激。这个错误阻止我发布我的应用程序！

我看过一些讨论，人们说他们遇到了类似的问题，但是，他们也说它已经在 air 3.3 中进行了排序。我没有看到任何改善......

以下是我在 logcat 中获得的内容的摘要：

```
D/dalvikvm( 2019): GC_CONCURRENT freed 1943K, 21% free 24500K/30855K, paused 2ms+21ms
D/dalvikvm( 2019): GC_EXPLICIT freed 769K, 20% free 24737K/30855K, paused 2ms+20ms
E/ActivityManager( 2019): ANR in air.com.test.mobile.rbttest.debug (air.com.test.mobile.rbttest.debug/.AppEntry)

E/ActivityManager( 2019): Reason: keyDispatchingTimedOut

E/ActivityManager( 2019): Load: 0.59 / 0.72 / 0.59
E/ActivityManager( 2019): CPU usage from 18567ms to 3234ms ago:

E/ActivityManager( 2019):   80% 9424/air.com.test.mobile.rbttest.debug: 71% user + 8.7% kernel / faults: 1406 minor

**could it be something to do with the line above?  Is this line saying that my cpu has spiked up to 80%?  Its weird if it is, because it works fine if I dont close the net connection!!**

E/ActivityManager( 2019):   2% 2019/system_server: 1.1% user + 0.8% kernel / faults: 39 minor
E/ActivityManager( 2019):   1.8% 2120/com.android.systemui: 1.5% user + 0.2% kernel / faults: 5 minor
E/ActivityManager( 2019):   1.5% 1885/mediaserver: 1.2% user + 0.3% kernel / faults: 4 minor
E/ActivityManager( 2019):   0.7% 1882/surfaceflinger: 0.3% user + 0.3% kernel
E/ActivityManager( 2019):   0.3% 9564/kworker/0:2: 0% user + 0.3% kernel
E/ActivityManager( 2019):   0.2% 2206/dhd_dpc: 0% user + 0.2% kernel
E/ActivityManager( 2019):   0.1% 1890/adbd: 0% user + 0.1% kernel
E/ActivityManager( 2019):   0.1% 8196/com.eolwral.osmonitor: 0% user + 0.1% kernel / faults: 20 minor
E/ActivityManager( 2019):   0.1% 8697/kworker/u:0: 0% user + 0.1% kernel
E/ActivityManager( 2019):   0.1% 965/irq/356-mxt224_: 0% user + 0.1% kernel
E/ActivityManager( 2019):   0.1% 7358/kworker/0:3: 0% user + 0.1% kernel

E/ActivityManager( 2019):   0% 3/ksoftirqd/0: 0% user + 0% kernel

E/ActivityManager( 2019):   0% 1055/mmcqd/0: 0% user + 0% kernel

E/ActivityManager( 2019):   0% 1830/jbd2/mmcblk0p10: 0% user + 0% kernel

E/ActivityManager( 2019):   0% 1881/rild: 0% user + 0% kernel

E/ActivityManager( 2019):   0% 2202/dhd_watchdog: 0% user + 0% kernel

E/ActivityManager( 2019):   0% 2781/kworker/u:23: 0% user + 0% kernel

E/ActivityManager( 2019):   0% 8708/kworker/u:1: 0% user + 0% kernel

E/ActivityManager( 2019):   0% 8756/com.android.settings: 0% user + 0% kernel / faults: 31 minor

E/ActivityManager( 2019):   0% 8860/com.google.android.gallery3d: 0% user + 0% kernel / faults: 8 minor

E/ActivityManager( 2019):   0% 27078/com.antivirus: 0% user + 0% kernel

E/ActivityManager( 2019): 49% TOTAL: 43% user + 6.4% kernel + 0.2% iowait + 0% softirq

E/ActivityManager( 2019): CPU usage from 707ms to 1226ms later:

E/ActivityManager( 2019):   10% 2019/system_server: 1.8% user + 9% kernel / faults: 3 minor

E/ActivityManager( 2019):     9% 2077/InputDispatcher: 0% user + 9% kernel

E/ActivityManager( 2019):   4.9% 2120/com.android.systemui: 3.9% user + 0.9% kernel / faults: 1 minor

E/ActivityManager( 2019):     3.9% 2120/ndroid.systemui: 3.9% user + 0% kernel

E/ActivityManager( 2019):   6.8% 9424/air.com.test.mobile.rbttest.debug: 0% user + 6.8% kernel

E/ActivityManager( 2019):     6.8% 9464/e.rbttest.debug: 1.7% user + 5.1% kernel

E/ActivityManager( 2019):   1.2% 7358/kworker/0:3: 0% user + 1.2% kernel

E/ActivityManager( 2019): 7.7% TOTAL: 1.9% user + 5.8% kernel
W/ActivityManager( 2019):   Force finishing activity air.com.test.mobile.rbttest.debug/.AppEntry
I/ActivityManager( 2019): Killing ProcessRecord{416f3410 9424:air.com.test.mobile.rbttest.debug/10075}: user's request
I/ActivityManager( 2019): Process air.com.test.mobile.rbttest.debug (pid 9424) has died.
I/WindowManager( 2019): WIN DEATH: Window{420baca0 SurfaceView paused=false}
I/WindowManager( 2019): WIN DEATH: Window{41f93898 air.com.test.mobile.rbttest.debug/air.com.test.mobile.rbttest.debug.A ppEntry paused=true} 
```

更新：我发现如果 NetConnection 通过 fms 服务器或通过发布者关闭，则会导致 android 应用程序崩溃！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:42:01.673

adobe air 3.4 beta 的发布似乎解决了这个问题。

# c# - 插入表格，如何插入自动递增的 ID

> ID：11474683
> 
> 赞同：0
> 
> 时间：2012-07-13T16:38:18.967
> 
> 标签：c#, sql-server, tsql, exception-handling, ado.net

我正在尝试将数据插入到 SQL 表中，但得到一个错误，即我没有所需的列数，例如，当它在 SQL 表中也有 ID 时，我只给它 teamname 和 teamtag。ID 自动递增，所以我不知道如何使这项工作，任何帮助表示赞赏。

```
private void btnAdd_Click(object sender, EventArgs e)
{
    da.InsertCommand = new SqlCommand("INSERT INTO tblTeams VALUES(@TEAMNAME, @TEAMTAG)", cs);
    da.InsertCommand.Parameters.Add("@TEAMNAME", SqlDbType.VarChar).Value = txtTeamName.Text;
    da.InsertCommand.Parameters.Add("@TEAMTAG", SqlDbType.VarChar).Value = txtTeamTag.Text;

    cs.Open();
    da.InsertCommand.ExecuteNonQuery();
    cs.Close();
} 
```

错误：

> 列名或提供的值的数量与表定义不匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:39:52.643

指定要填充的列。

```
INSERT INTO tblTeams (TeamName, TeamTag) VALUES(@TEAMNAME, @TEAMTAG) 
```

# php - 是否可以将 php 变量插入到您的 js 代码中？

> ID：11474684
> 
> 赞同：7
> 
> 时间：2012-07-13T16:38:19.503
> 
> 标签：php, javascript, jquery, ajax

> **可能重复：**
> [将变量从 php 传递到 javascript](https://stackoverflow.com/questions/7141860/passing-variables-from-php-to-javascript)

我正在动态生成一个列表。我想让每一行悬停在鼠标悬停上并且可以点击链接。我希望链接传递行内容的 id。

基本上：

```
foreach ($courses as $cid=>cinfo){ 
  $univ = $cinfo['univ'];
  $desc = $cinfo['desc'];
  $size = $cinfo['size'];
  $start = $cinfo['start'];
  print "<div class='rc_desc' id='rc_desc$cid'>"."$desc<br/>"."<b>$univ</b><br/>".
        "<span>Number of students</span>: $size<br/>".
        "<span>Started at</span>: ".date('F d, Y',strtotime($start))."<br/>".
}

<script>
    $(function ()
    {
      $('#rc_desc$cid').hover(function ()
      {
        $(this).toggleClass('.tr');
      });
      $('#rc_desc$cid').click(function ()
      {
        $(location).attr('href','student.php?$cid');
      });
    });
  </script> 
```

问题出在 js/jquery 中。我希望能够在单击时获取 $cid 并将其传递给 student.php 页面。上面的 php 代码可以工作，但 js 当然不会。我知道客户端与服务器端语言的基础。这个问题不需要讲课。我知道我不能完全做到这一点，但这是我最终想要发生的事情。关于如何简单地实现这一目标的任何想法？提前感谢我的朋友们！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T16:40:28.200

是的，如果您`<script>`在 PHP 代码中包含该部分，您可以执行类似于以下的操作：

```
<script>
    var foo = <?php echo $foo; ?>;
</script> 
```

在您的情况下，您将查看以下代码结构：

```
<script>
    $(function () {
        $('#rc_desc<?php echo $cid ?>').hover(function () {
            $(this).toggleClass('.tr');
        });
        $('#rc_desc<?php echo $cid ?>').click(function () {
            $(location).attr('href', 'student.php?<?php echo $cid ?>');
        });
    });
</script> 
```

之所以能做到这一点，是因为尽管 Javascript 是在客户端运行的，但它在呈现在页面上之前首先在服务器端进行了处理。因此，它将`$cid`用您包含的实例替换所有必要的实例。

享受和好运！

**编辑**：

```
<script>
    $(function () {
        $('.rc_desc').hover(function () {
            $(this).toggleClass('.tr ');
        });
        $('.rc_desc').click(function () {
            $(location).attr('href', 'student.php?' + $(this).attr('id').split('rc_desc')[1]);
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T16:40:21.130

你可以这样做：

```
 $(location).attr('href','<?php echo $cid ?>'); 
```

javascript 代码不知道它来自 php，它显示为它的常量（文字）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T16:40:21.807

是的，有可能。你所要做的就是把你`<?PHP echo $cid; ?>`的放在你需要的地方

```
<script>
$(function ()
{
  $('#rc_desc<?PHP echo $cid; ?>').hover(function ()
  {
    $(this).toggleClass('.tr');
  });
  $('#rc_desc$cid').click(function ()
  {
    $(location).attr('href','student.php?<?PHP echo $cid; ?>');
  });
}); 
```

这是可能的，因为当脚本被放入页面时，cid 已经被服务器上的字符串替换。由于 PHP 是服务器驱动的，所以在它返回 html/script 之前，它就像你自己放入它一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T16:42:40.553

几乎没有办法实际交流 PHP 和 JavaScript。但是，最好和最简单的方法是在属性中设置 ID。新的 HTML5 数据属性将是完美的。

例如，有一个锚标签

```
<span data-id="22">some event</a> 
```

进而：

```
$(this).attr('href','student.php?'+$(this).attr('data-id')); 
```

或者只是使用

```
<?php echo $id; ?> 
```

如果不是外部JS文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T16:44:27.673

我认为你阻止应该是：

```
<script>
    $(function ()
    {
    <?php foreach($courses as $cid=>cinfo) : ?>

      $('#rc_desc<?php echo $cid; ?>').hover(function ()
      {
        $(this).toggleClass('.tr');
      });
      $('#rc_desc<?php echo $cid; ?>').click(function ()
      {
        $(location).attr('href','student.php?<?php echo $cid; ?>');
      }); 
      ";?>
      <?php endforeach; ?>
    });
  </script> 
```

*更新*

但你真的不需要这样做，你有

```
"<div class='rc_desc' data-id='$cid' id='rc_desc$cid'>"."$desc<br/>"."<b>$univ</b><br/>".
"<span>Number of students</span>: $size<br/>".
"<span>Started at</span>: ".date('F d, Y',strtotime($start))."<br/>". 
```

你可以试试这个

```
$(function (){
      $('.rc_desc').hover(function ()
      {
        $(this).toggleClass('.tr');
      });
      $('.rc_desc').click(function ()
      {
        attrId = $(this).attr("data-id");
        $(location).attr('href','student.php?'+id);
      });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-13T16:50:52.010

试试这个代码

```
foreach ($courses as $cid=>cinfo){ 
  $univ = $cinfo['univ'];
  $desc = $cinfo['desc'];
  $size = $cinfo['size'];
  $start = $cinfo['start'];
  print "<div class='rc_desc' data-id='$cid' id='rc_desc$cid'>"."$desc<br/>"."<b>$univ</b><br/>".
        "<span>Number of students</span>: $size<br/>".
        "<span>Started at</span>: ".date('F d, Y',strtotime($start))."<br/>".
}

<script>
    $(function ()
    {
      $('#rc_desc$cid').hover(function ()
      {
        $(this).toggleClass('.tr');
      });
      $('.rc_desc').click(function ()
      {
        $(location).attr('href','student.php?' + $(this).attr("data-id"));

       // if you want to redirect the page do this
       // window.location.href = 'student.php?' + $(this).attr("data-id");
      });
    });
  </script> 
```

# umbraco - JCarousel 添加 blogpost 而不是 html

> ID：11474688
> 
> 赞同：0
> 
> 时间：2012-07-13T16:38:24.720
> 
> 标签：umbraco, umbraco-blog

是否可以将我的博文添加到 JCarousel 而不是 html 代码？它应该如下所示：

=>[示例](http://www.fdp-bw.de/jcarousel/fdpcar2.php)

在这个网站上的内容只是 html，但我希望我的博文能够炫耀。

假设我写了 5 篇博文，那么滑块必须向我显示 5 篇博文。

希望有人可以帮助我！

问候

尼科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:16:19.483

您需要创建一个宏（xslt 或 razor）来显示您的博客文章节点，然后使用 jquery 定位它们以加载 jcarousel。以下是使用您引用的[示例](http://www.fdp-bw.de/jcarousel/fdpcar2.php)中的代码执行此操作的剃刀脚本示例：

```
@using umbraco.MacroEngines
@inherits DynamicNodeContext
@try
{
    <script type="text/javascript" src="http://www.fdp-bw.de/jcarousel/lib/jquery-1.2.3.pack.js"></script>
    <script type="text/javascript" src="http://www.fdp-bw.de/jcarousel/lib/jquery.jcarousel.pack.js"></script>

    <link rel="stylesheet" type="text/css" href="http://www.fdp-bw.de/jcarousel/lib/jquery.jcarousel.css" />
    <link rel="stylesheet" type="text/css" href="http://www.fdp-bw.de/jcarousel/skins/tango/skin.css" />

    <style type="text/css">

    /**
     * Additional styles for the controls.
     */
    .jcarousel-control {
        margin-bottom: 10px;
        text-align: center;
    }

    .jcarousel-control a {
        font-size: 75%;
        text-decoration: none;
        padding: 0 5px;
        margin: 0 0 5px 0;
        border: 1px solid #fff;
        color: #eee;
        background-color: #4088b8;
        font-weight: bold;
    }

    .jcarousel-control a:focus,
    .jcarousel-control a:active {
        outline: none;
    }

    .jcarousel-scroll {
        margin-top: 10px;
        text-align: center;
    }

    .jcarousel-scroll form {
        margin: 0;
        padding: 0;
    }

    .jcarousel-scroll select {
        font-size: 75%;
    }

    #mycarousel-next,
    #mycarousel-prev {
        cursor: pointer;
        margin-bottom: -10px;
        text-decoration: underline;
        font-size: 11px;
    }

    </style>

    <script type="text/javascript">
        /**
        * We use the initCallback callback
        * to assign functionality to the controls
        */
        function mycarousel_initCallback(carousel) {
            jQuery('.jcarousel-control a').bind('click', function () {
                carousel.scroll(jQuery.jcarousel.intval(jQuery(this).text()));
                return false;
            });

            jQuery('.jcarousel-scroll select').bind('change', function () {
                carousel.options.scroll = jQuery.jcarousel.intval(this.options[this.selectedIndex].value);
                return false;
            });

            jQuery('#mycarousel-next').bind('click', function () {
                carousel.next();
                return false;
            });

            jQuery('#mycarousel-prev').bind('click', function () {
                carousel.prev();
                return false;
            });
        };

        // Ride the carousel...
        jQuery(document).ready(function () {
            jQuery("#mycarousel").jcarousel({
                scroll: 1,
                visible: 1,
                auto: 10,
                wrap: "last",
                initCallback: mycarousel_initCallback,
                // This tells jCarousel NOT to autobuild prev/next buttons
                buttonNextHTML: null,
                buttonPrevHTML: null
            });
        });

    </script>

    <div id="mycarousel" class="jcarousel-skin-tango">
        <ul>
        @foreach (var post in Model.AncestorOrSelf().Descendants("umbBlogPost"))
        {
            <li>
                <h2>@post.Name</h2>
                <div>@post.bodyText</div>
            </li>
        }
        </ul>
        <div class="jcarousel-control">
        @for (int i = 0; i < Model.AncestorOrSelf().Descendants("umbBlogPost").Count(); i++)
        {
             <a href="#">@(i + 1)</a>
        }
        </div>
    </div>

}
catch (Exception e)
{
    <!-- @e.ToString() -->
} 
```

这会给你所有的帖子。您可能想要进行一些排序和过滤，然后获得前五名或其他：

```
var posts = Model.AncestorOrSelf().Descendants("umbBlogPost").OrderBy("PostDate desc").Take(5); 
```

# perl - List::MoreUtils 网格或 'zip' 函数

> ID：11474697
> 
> 赞同：12
> 
> 时间：2012-07-13T16:38:55.157
> 
> 标签：perl, perl-module

所以这个问题纯粹是出于学习目的和好奇心，但是任何人都可以解释下面的函数是如何工作的吗？

```
sub mesh (\@\@;\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@) {
    my $max = -1;
    $max < $#$_ && ( $max = $#$_ ) foreach @_;
    map {
        my $ix = $_;
        map $_->[$ix], @_;
    } 0 .. $max;
} 
```

它来自[List::MoreUtils](https://metacpan.org/module/List::MoreUtils)模块。我在我的一个应用程序中使用它，我碰巧看到了源代码，这让我觉得我根本不知道 perl！谁能解释这种疯狂？：） 谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T16:55:23.640

我不会涵盖原型部分（暴民说他会）。

这是一个更易读的版本 - 理想情况下，它应该是不言自明的

```
sub mesh (\@\@;\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@) {

    # Calculate the maximum number of elements in each of the array refs 
    # we were passed:

    my $maxLength = 0;
    foreach my $array_ref (@_) { # @_ is all arrey refs passed in
        if ($maxLength < @$array_ref) { 
            # we found an array longer than all previous ones 
            $maxLength = @$array_ref;
        }
    }

    # If you represent the arrays as a matrix:
    #   ARR1 = [ a1e1, a1e2, .... a1eN],
    #   ARR2 = [ a2e1, a2e2, .... a2eN],
    #    ...
    #   ARR2 = [ aMe1, aMe2, .... aMeN];
    # Then, we are simply walking through the matrix;
    # each column top to bottom then move on to next column left to right
    # (a1e1, a2e1, ... aMe1, a1e2, a2e2, ... aMeN)

    my @results;
    for (my $index = 0; $index < $maxLength; $index++) { # Iterate over columns
         foreach my $array_ref (@_) { # Iterate over per-row cells in each column
             push @results, $array_ref->[$index];
         }
    } ;
} 
```

这是一个评论的原始版本

```
sub mesh (\@\@;\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@) {

    # Calculate the largest index in each of the array refs
    # @_ is an array of all the input arrayrefs
    # $_ will be one of the array refs in a foreach loop
    # $#{$X} is the largest index in arrayref X; thus
    # $#$_ is the largest index in arrayref $_
    my $max = -1;
    $max < $#$_ && ( $max = $#$_ ) foreach @_;

    # Return a list, obtained by looping 
    # over every index from 0 to the maximal index of any of the arrays
    # Then, for each value of the index ($ix), push into the resulting list
    # an element with that index from each of the arrays.
    map {
        my $ix = $_;
        map $_->[$ix], @_;
    } 0 .. $max;
} 
```

* * *

* * *

这种方法中不寻常的事情之一是[`function signature (prototype)`](http://perldoc.perl.org/perlsub.html#Prototypes).

```
sub mesh (\@\@;\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@\@) { 
```

正如@mob 和@ikegami 在评论中明智地指出的那样，

> ...它指示 Perl 期望有 2 到 32 个命名数组，并将它们作为数组引用传递给函数（在 @_ 中）。因此，如果您调用`mesh @a,@b,@c`，则`@_`在网格中设置为`(\@a,\@b,\@c)`而不是一个包含`@a, @b, and @c`( *mob* )的所有单个元素的“平面”列表
> ......从技术上讲，它们不需要命名，只需取消引用。例如`@$ref`和`@{[qw( foo bar )]}`工作一样好`@a`。换句话说，它必须从`@`（而不是切片）开始。（*池上*）

换句话说，以下 2 个调用的行为相同

```
my @a1 = (1);
my @a2 = (2);
sub mesh_prototype(\@\@) { print "$_->[0]\n" }
sub mesh_pass_arrayref() { print "$_->[0]\n" }
mesh_prototype(@a1, @a2);
mesh_pass_arrayref(\@a1, \@a2); 
```

这样做是为了您可以将单个数组（而不是 arrayrefs）作为参数传递给函数，这些函数的行为类似于内置函数（例如`map`/ `sort`）

要回答 Zaid 关于如果将 1 或 33 个数组列为要调用的参数会发生什么的查询`mesh()`，它将生成编译时错误：

```
Not enough arguments for main::mesh at mesh.pl line 16, near "@a1)"
Execution of mesh.pl aborted due to compilation errors.

Too many arguments for main::mesh at mesh.pl line 16, near "@a2)"
Execution of mesh.pl aborted due to compilation errors. 
```

# jquery - jQuery .show() 和 .toggleClass("foo") 同时在一个对象上？

> ID：11474699
> 
> 赞同：3
> 
> 时间：2012-07-13T16:39:00.803
> 
> 标签：jquery, if-statement, jquery-isotope

下面的沙箱代码（使用[jQuery Isotope](http://isotope.metafizzy.co/)布局和排序插件）。会发生什么：

1.  如果一个 .item 被点击，它会增长以显示更多的内容（.maximise）
2.  如果再次单击*相同*的 .item，它将缩小以隐藏其大部分内容（.minimise）
3.  如果单击*任何其他*.item，则应执行1。*所有其他*应执行2。

    ```
    $items = $('.item'); // solution

    $('.item').click(function () {

    var $this = $(this);
    var $previousSelected = $('.selected');

    if ($(this).hasClass('selected')) {

        $items.not(this).find('.slideshow').removeClass('transparent'); // solution

        $(this).removeClass('selected');
        $(this).children('.maximise').hide();
        $(this).children('.minimise').show();

    } else {

        $items.not(this).find('.slideshow').addClass('transparent'); // solution

        $previousSelected.removeClass('selected');
        $previousSelected.children('.minimise').show();
        $previousSelected.children('.maximise').hide();

        $(this).addClass('selected');
        $(this).children('.minimise').hide();
        $(this).children('.maximise').show();
    }

    // $container.isotope('shuffle'); uncomment to always randomise layout
    // $container.isotope('reLayout'); uncomment if no sorting logic is used
    $container
    .isotope('updateSortData', $this)
    .isotope('updateSortData', $previousSelected)
    .isotope();
    }); 
    ```

提前非常感谢！

**编辑**找到.find()。然后是 .not() 方法，然后实现将所有同位素元素存储在 $items = $('.item');

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:47:06.327

提示：如果您已经将选择器查询存储在对象（变量）中，则无需在选择器中再次使用它，只需使用该对象即可。

```
var $previousSelected = $('.selected');

...
//$($previousSelected).removeClass('selected');
$previousSelected.removeClass('selected'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:42:12.550

您可以使用 jQuery 的`addClass`方法来做到这一点。jQuery 将在添加元素之前检查 .transparent 类是否已经设置在元素上。

```
$($previousSelected).children('.minimise').addClass('transparent').show(); 
```

您可能还想在隐藏透明类时删除它，在这种情况下，我会在以下情况下删除该类`.hide()`：

```
$($previousSelected).children('.maximise').hide().removeClass('transparent'); 
```

# c - 如何在基于 arm 的平台上调试随机数据中止问题

> ID：11474700
> 
> 赞同：3
> 
> 时间：2012-07-13T16:39:09.563
> 
> 标签：c, embedded, arm

在基于 ARM 的项目上开发时，我们会随机中止数据，也就是说，当我们使用它时，我们会得到一个数据中止中断。但是，当我们使用 r14 或 r13 检查寄存器映射时，即使检查函数回调，数据中止也不总是在同一点上。无论如何，我可以准确地获得有关数据中止的根本原因的信息吗？我已经尝试了 ref [2](http://www.keil.com/support/docs/3080.htm)，但是当我捕获有关中断的数据时无法得到相同的点。

相关 [ARM Data Abort 错误异常调试](https://stackoverflow.com/questions/1359919/arm-data-abort-error-exception-debugging) [ARM: HOW TO ANALYZE A DATA ABORT EXCEPTION](http://www.keil.com/support/docs/3080.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:33:58.023

如上面的 Keil 链接中所述，检查链接寄存器 (r14) 将显示触发数据中止的指令。从那里你必须弄清楚它*为什么*会触发数据中止以及它是如何发生的，这是困难的部分。

根据我的经验，最有可能发生的是您访问了一个无效的指针。由于许多原因，它可能无效。以下是一些候选人：

1.  您在初始化之前使用了指针
2.  您使用了它之后的指针，或者包含的内存，已被释放（随后在另一个函数分配它时被修改）
3.  指针因堆栈溢出而损坏
4.  指针被其他不相关的、行为不端的代码破坏了，这些代码正在践踏内存
5.  指针作为局部变量在堆栈上分配，然后在分配函数退出后使用
6.  指针的类型对齐不正确（例如，尝试将 0x4001 作为 uint32_t 访问）

如您所见，很多事情都可能是 ARM 数据中止的根本原因。找到根本原因是 ARM 软件/固件开发如此有趣的部分原因！祝你好运解决你的难题。

# php - FFMpeg + Beanstalk：如何在不使用 Beanstalk 的情况下将进程传递给它或达到相同的结果

> ID：11474705
> 
> 赞同：0
> 
> 时间：2012-07-13T16:39:22.497
> 
> 标签：php, ffmpeg, task-queue, beanstalkd

我的问题是 FFMpeg 和 Mencoder 资源丰富，即使运行其中一个进程也会使 HTTPd 变慢，但（FFMPEG /Mencoder）的多个进程只是完全挂起它（HTTPd）。例如，我希望使用 Beanstalk 处理我的转换。

我的具体问题是：*如何将我目前的工作转移到 Beanstalk？*

我有一个触发转换的简单*PHP*代码：

```
RunInBackground('convert.php', array($upload, $video_id), $log_path); 
```

现在 Beanstalk 正确的代码会是什么样子，这样如果上传了多个视频，这些进程就不会同时启动？

如果您认为我的需要最好使用除 Beanstalk 之外的其他东西，并且您知道如何实现它，我仍然很高兴看到它！

提前致谢，
伊利亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:48:47.670

两种可能性：
- 尝试使用 xuggler 进行转换 - 内联运行，而不必生成作业
- 使用数据库或文件创建“文件处理队列”。让您的转换过程只查询“要处理的未完成文件”，但只有一次运行其中一个。它将独立于您的主要任务运行，但可以将其状态发布在您的主要工作可以读取的位置。例如“忙碌”或“队列中有 3 个文件”或“可用”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T07:52:18.827

基于 ethrbunny 提供的好主意，我决定不使用 Beanstalk 或 Resque 来实现我的目标！毕竟我很高兴！我敢打赌，对于所有试图将 FFMpeg / MPlayer / MEncoder 进程限制为服务器上唯一一个活动进程以保持其他进程正常运行的人来说，这将是有用的，例如 httpd。

一步步！

1.  创建一个数据库，我称之为“encoding_queue”：

    ```
     CREATE TABLE IF NOT EXISTS `encoding_queue` (
    `queue_timestamp` int(11) NOT NULL DEFAULT '0',
    `uploaded_video_id` int(11) NOT NULL DEFAULT '0',
    `uploaded_file_name` varchar(255) NOT NULL DEFAULT '',
    `log_file_path` varchar(255) NOT NULL DEFAULT '',
    PRIMARY KEY (`queue_timestamp`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
    ```

2.  在您的主上传文件中，就在您触发转换过程的位置：

    ```
    // Let's check if ffmpeg, mplayer, mencoder or mediainfo processes are running //   
    exec("ps ax | grep -v grep | grep ffmpeg", $ffmpeg);
    exec("ps ax | grep -v grep | grep mplayer", $mplayer);
    exec("ps ax | grep -v grep | grep mencoder", $mencoder);
    exec("ps ax | grep -v grep | grep mediainfo", $mediainfo);

    if(empty($ffmpeg) && empty($mplayer) && empty($mencoder) && empty($mediainfo)) {
    // As non of them are running we start conversion process //

       RunInBackground('convert.php', array($uploaded_file_name , $uploaded_video_id ), $log_file_path);

    } else {

    // As the ffmpeg or mplayer or mencoder or mediainfo is running we add the process to the queue into the database//

       //Connecting to database using ADOdb //             

       $sql = "INSERT INTO encoding_queue SET queue_timestamp = '" .time(). "', 
       uploaded_video_id = '" .mysql_real_escape_string($uploaded_video_id ). "',
       uploaded_file_name = '" .mysql_real_escape_string($uploaded_file_name ). "',
       log_file_path = '" .mysql_real_escape_string($log_file_path). "'";
       $conn->execute($sql);
    } 
    ```

3.  在我们向数据库添加值之后，我们需要检查之前的转换是否完成，我们准备开始新的转换！创建 convert_queue.php 文件并将其添加到您的 CRON 作业中，假设每 5 分钟一次！

    ```
    <?php
    require('path/to/your/config.php');
    require('path/to/your/function.php');

    exec("ps ax | grep -v grep | grep ffmpeg", $ffmpeg);
    exec("ps ax | grep -v grep | grep mplayer", $mplayer);
    exec("ps ax | grep -v grep | grep mencoder", $mencoder);
    exec("ps ax | grep -v grep | grep mediainfo", $mediainfo);

    $sql = "SELECT * FROM encoding_queue ORDER BY queue_timestamp ASC LIMIT 1";
    $rs = $conn->execute($sql);
    $queue = $rs->getrows();
    if ( $conn->Affected_Rows() == 0 ) {
    die ("Error! There is no records in the database. Nothing to convert. Stopping...");
    }
    if (file_exists($config['VDO_DIR'] . '/' .$queue[0]['uploaded_file_name'])) {
      if(empty($ffmpeg) && empty($mplayer) && empty($mencoder) && empty($mediainfo)) {
         RunInBackground('convert.php', array($queue[0]['uploaded_file_name'], $queue[0]['uploaded_video_id']), $queue[0]['log_file_path']);
    } else {
         die ("Another conversion process is still in progress. Stopping...");
     }
      } else { 
         die ("Error! There is no video file ".$queue[0]['uploaded_file_name']." found. Nothing to convert. Stopping..."); }
     ?> 
    ```

4.  最后，当我们处理队列中的第一个条目时，我们需要将其从数据库中删除，以便 convert_queue.php 可以开始处理另一个条目。在您清理的某个地方运行它或将其添加到 convert_queue.php，但如果该过程失败，您将无法再次重新启动它：

    ```
    $sql = "DELETE FROM encoding_queue WHERE uploaded_video_id = '" .mysql_real_escape_string($uploaded_video_id ). "' LIMIT 1";
    $conn->execute($sql); 
    ```

那么我们得到了什么？如果上传的文件是目前唯一的文件，并且服务器上目前没有更多的转换发生，那么我们开始转换过程！如果有一个视频文件已经被转换，那么我们将有关上传文件的信息放入数据库中，然后我们等待其他文件的转换结束时立即开始转换它。

队列是真正的队列 - 文件正在根据上传时间进行处理！

这是一个 FFMpeg / MPlayer / MEncoder 队列解决方案！

一切顺利，伊利亚

# python - 在 python 中使用 dict 键作为不同 dict 中的值

> ID：11474706
> 
> 赞同：3
> 
> 时间：2012-07-13T16:39:22.680
> 
> 标签：python, dictionary

我想创建一个“翻译器”类型的字典，它将作为嵌套的不同字典中的键的值分配给我创建的字典中的键。我遇到的问题是我无法创建一个表示嵌套字典键的值，而不必将其转换为字符串或其他数据类型，并且当我尝试使用字符串作为嵌套字典的索引时，我得到一个索引错误。理想情况下，我的 dict 看起来像这样：

```
new_dict{
    "new_key_1" : ['subdict1']['subdict2']['old_key_1'],
    "new_key_2" : ['subdict1']['subdict2']['old_key_2'],
    "new_key_3" : ['subdict1']['subdict3']['old_key_3']
    } 
```

然后，对于每个嵌套的 dict，我可以使用一个简单的 for 循环生成一个新的 dict 对象：

```
for key, value in new_dict.items() :
    user_dict_1[key] = OldDict[value] 
```

嵌套的字典非常大，我只需要每个字段中的几个字段，否则我可以使用 .copy() 函数来处理旧的字典。

PS-在重写此问题以使其更具可读性方面的任何帮助也值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:02:53.757

你需要`reduce()`这个...

```
attrmap = {
  "new_key_1": ('subdict1', 'subdict2', 'old_key_1'),
   ...
}

print reduce(lambda x, y: x[y], attrmap[somekey], old_object) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:07:03.597

你在说这样的事情吗？

```
from pprint import pprint as pp
subdict1 = {'subdict1_item1':1, 'subdict1_item2':2}
subdict2 = {'subdict2_item1':3, 'subdict2_item2':4}
subdict3 = {'subdict3_item1': 5, 'subdict3_item1':6}
olddict = {
    'old_key_1': [subdict1, subdict2],
    'old_key_2': [subdict1, subdict2],
    'old_key_3': [subdict1, subdict3],
    }

newdict = {
    'new_key_1': olddict['old_key_1'].append('old_key_1'),
    'new_key_2': olddict['old_key_2'].append('old_key_2'),
    'new_key_3': olddict['old_key_3'].append('old_key_3'),
    } 
```

或这个

```
newdict = {
    'new_key_1': 'old_key_1',
    'new_key_2': 'old_key_2',
    'new_key_3': 'old_key_3',
    }
def getnew(newkey, newdict, olddict):
    if newkey in newdict:
        oldkey = newdict[newkey]
        if oldkey in olddict:
            preitem = olddict[ oldkey ] # returns a list with two items
            item = []
            item.append([preitem[0]]) # makes subdict1 wrapped in a list
            item.append([preitem[1]]) # makes subdict2/3 wrapped in a list
            item.append([oldkey])
            return item
        else:
            raise KeyError('newdict has no matching olddict key') 
```

结果：

```
pp( getnew('new_key_1', newdict, olddict) )
print 
pp( getnew('new_key_2', newdict, olddict) )
print
pp( getnew('new_key_3', newdict, olddict) )
[[{'subdict1_item1': 1, 'subdict1_item2': 2}],
 [{'subdict2_item1': 3, 'subdict2_item2': 4}],
 ['old_key_1']]

[[{'subdict1_item1': 1, 'subdict1_item2': 2}],
 [{'subdict2_item1': 3, 'subdict2_item2': 4}],
 ['old_key_2']]

[[{'subdict1_item1': 1, 'subdict1_item2': 2}],
 [{'subdict3_item1': 6}],
 ['old_key_3']] 
```

# java - — 特殊字符解码

> ID：11474708
> 
> 赞同：0
> 
> 时间：2012-07-13T16:39:24.583
> 
> 标签：java, jquery, json, rest, jersey

在我们的 Jersey REST 服务中，我们将`&#8212;`作为 JSON 对象中的一个元素发送回浏览器客户端。但是正在使用我的服务的浏览器 JQuery 客户端，而不是将其解码为文字，而是将其`-`显示为`&#8212;`编码值本身。

想知道我是否必须在 Jersey 或 JSON 解析器中进行任何设置更改，以便客户端浏览器将其理解为文字`-`。我正在以 UTF-16 格式从 Jersey 发送输出 JSON。感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:40:15.707

`&#8212;`可能在 HTML 或 XML 中有效。但在 JSON 中是`\u2014`（2014 是十进制数 8212 的十六进制表示）：

```
{
    "trip": "New York \u2014 Chicago"
} 
```

您可以使用[JSONLint](http://jsonlint.com/)检查它。

顺便说一句：您究竟是如何生成 JSON 输出的？您不需要关心字符编码的细节。泽西岛应该为你做这件事。

**更新：** 显然，您的初始数据是 HTML 或 XML 编码的（无论出于何种原因）。因此解决方案是在将其作为 JSON 发送之前撤消编码。泽西岛将负责其余的工作。

如果您的数据只是针对某些字符进行了 HTML/XML 编码，而不是一般情况下，那么您有一个问题需要在更接近源的位置进行修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:44:26.903

你是发送`&#8212`还是`&#8212;`？请记住，实体必须有一个终止分号。

# security - 使用 powershell 运行未经验证的发布者批处理文件

> ID：11474713
> 
> 赞同：0
> 
> 时间：2012-07-13T16:39:49.930
> 
> 标签：security, powershell, batch-file

在我的 powershell 脚本中，我调用了一些批处理文件。对于每个批处理文件，我都会收到“无法验证发布者警告”，我必须单击运行才能使其工作。这给自动化这个脚本带来了一些问题

在不更改机器本身的设置的情况下，我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T21:03:18.603

当您在资源管理器中右键单击这些脚本文件时，您是否会在常规选项卡中看到：

安全性：此文件来自...

![在此处输入图像描述](../Images/ca1396a8282f74a5abc66d66496ca572.png)

您可以使用以下方法将其删除：

```
echo "">file.ps1:Zone.Identifier 
```

你会[在这里](http://www.silogix.fr/Blog-Silogix/gerer-les-alternate-data-streams-avec-cmd-powershell-2-et-powershell-3.aspx)找到更多解释：

# jquery - CJuiDatePicker 在 Yii 中禁用自动完成的正确语法？

> ID：11474724
> 
> 赞同：0
> 
> 时间：2012-07-13T16:40:23.860
> 
> 标签：jquery, autocomplete, yii, datepicker

任何想法禁用自动完成语句的正确语法是什么？

```
$this->widget('zii.widgets.jui.CJuiDatePicker', array(
    'model'=>$model,
    'attribute'=>'dlivraison',
    'language'=>'fr',
    'options'=>array(
        'dateFormat'=>'dd/mm/yy',
        'showOn'=>'button',
        'buttonText'=>'CAL',
    'htmlOptions'=>array(
        'autoComplete'=>'off',
        'size'=>8,
    ),
    ),
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:27:32.307

所以最后我把完整的代码给更多的读者会更清楚......

```
$this->widget('zii.widgets.jui.CJuiDatePicker', array(
    'model'=>$model,
    'attribute'=>'dlivraison',
    'language'=>'fr',
    'options'=>array(
        'dateFormat'=>'dd/mm/yy',
        'showOn'=>'button',
        'buttonText'=>'CAL',
    ),
    'htmlOptions'=>array(
        'autocomplete'=>'off',
        'size'=>8,
    ),
  )); 
```

# java - 如何使用 Gradle 构建源 JAR？

> ID：11474729
> 
> 赞同：175
> 
> 时间：2012-07-13T16:40:40.460
> 
> 标签：java, jar, gradle

我正在使用一个使用 Gradle 构建的开源项目。我想生成一个*（项目）-sources.jar*文件，我可以将其加载到我的 IDE（IntelliJ IDEA）中并通过项目进行调试。如果可以生成文件，我知道如何加载文件。

我查看了该项目的可用 Gradle 任务，但没有一个可以生成源 jar 文件。

为该项目生成源 jar 文件的最简单方法是什么？

将源代码添加到包含已编译类文件的 jar 文件中也可以。

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2012-07-13T17:05:53.217

```
task sourcesJar(type: Jar, dependsOn: classes) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

artifacts {
    archives sourcesJar
    archives javadocJar
} 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2015-03-10T16:45:08.113

如果您使用的是安卓：

```
task sourcesJar(type: Jar) {
    from android.sourceSets.main.java.srcDirs
    classifier = 'sources'
}

task javadoc(type: Javadoc) {
    source = android.sourceSets.main.java.srcDirs
    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

artifacts {
    archives javadocJar
    archives sourcesJar
} 
```

从[这里](https://www.virag.si/2015/01/publishing-gradle-android-library-to-jcenter/)

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2019-11-13T21:04:24.813

## Gradle 6.0 的解决方案

假设您在 Gradle 6.0 或更高版本中使用`java`/`java-library`插件，您可以`sourcesJar`使用以下配置获取任务：

```
java {
    withSourcesJar()
    // and/or analogously use “withJavadocJar()” to get a “javadocJar” task
} 
```

如果您另外使用`maven-publish`/`ivy-publish`插件（现在推荐），那么这也会`*-sources.jar`与您的主要 Java 出版物一起发布一个工件。

另请参阅[Gradle 文档](https://docs.gradle.org/6.0/userguide/java_plugin.html#sec:java-extension)。

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2014-10-08T16:35:21.320

如果您希望*将源代码添加到已编译的类 JAR 文件*中，您也说过这是可以接受的，那么您可以很容易地做到这一点。只需将以下内容添加到您的构建文件中。您可以看到，理论上，它非常类似于将源代码放入单独的 JAR 中的解决方案：

```
 jar {
     from sourceSets.main.allSource
 } 
```

不同之处在于您通过说“jar”代替sourceJar 将其添加到主JAR 文件中。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-07-09T11:21:14.943

这应该工作

```
assemble.dependsOn 'propertyJar'

task propertyJar(type: Jar) {
 archiveName = "myJarName.jar"
 from('src/main/resources') {
    include '**'
 }} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-01-27T21:05:46.720

使用时：

*   等级：5+
*   `java`和`maven-publish`插件

```
task sourceJar(type: Jar) {
    from sourceSets.main.allJava
    archiveClassifier = "sources"
}

publishing {
    publications {
        maven(MavenPublication) {
            from components.java
            artifact sourceJar
        }
    }
} 
```

[https://docs.gradle.org/current/dsl/org.gradle.api.publish.maven.MavenPublication.html](https://docs.gradle.org/current/dsl/org.gradle.api.publish.maven.MavenPublication.html)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-01-03T03:12:19.880

Kotlin DSL 等价物是：

```
tasks {

    val sourcesJar by creating(Jar::class) {
        dependsOn(JavaPlugin.CLASSES_TASK_NAME)
        classifier = "sources"
        from(java.sourceSets["main"].allSource)
    }

    val javadocJar by creating(Jar::class) {
        dependsOn(JavaPlugin.JAVADOC_TASK_NAME)
        classifier = "javadoc"
        from(java.docsDir)
    }

    artifacts {
        add("archives", sourcesJar)
        add("archives", javadocJar)
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-26T06:55:50.227

这就是我使用 Kotlin DSL (build.gradle.kts) 为我的 Android Kotlin 库包含[Dokka](https://github.com/Kotlin/dokka)（[在线](https://javadoc.io/doc/ir.mahozad.android/pie-chart/latest/index.html)查看）和源 JAR 的方式：

```
plugins {
    // ...
    id("org.jetbrains.dokka") version "1.4.32"
    id("maven-publish")
}

lateinit var sourcesArtifact: PublishArtifact
lateinit var javadocArtifact: PublishArtifact

tasks {
    val sourcesJar by creating(Jar::class) {
        archiveClassifier.set("sources")
        from(android.sourceSets["main"].java.srcDirs)
    }
    val dokkaHtml by getting(org.jetbrains.dokka.gradle.DokkaTask::class)
    val javadocJar by creating(Jar::class) {
        dependsOn(dokkaHtml)
        archiveClassifier.set("javadoc")
        from(dokkaHtml.outputDirectory)
    }
    artifacts {
        sourcesArtifact = archives(sourcesJar)
        javadocArtifact = archives(javadocJar)
    }
}

publishing {
    // ...
    publications {
        create<MavenPublication>("MyPublication") {
            from(components["release"])
            artifact(sourcesArtifact)
            artifact(javadocArtifact)
            // ...
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-09T10:03:05.983

安卓：

```
 task androidSourcesJar(type: Jar) {
        getArchiveClassifier().set('sources')
        from android.sourceSets.main.java.srcDirs//full sources
  } 
```

爪哇：

```
 task sourcesJar(type: Jar, dependsOn: classes) {
        getArchiveClassifier().set('sources')
        from sourceSets.main.allSource
    } 
```

# php - 从单独的 .php 表初始化 dataTable

> ID：11474730
> 
> 赞同：3
> 
> 时间：2012-07-13T16:40:56.670
> 
> 标签：php, jquery, datatables, html-table

我正在尝试从构建表的单独 .php 文件初始化数据表。它可以构建表格，但 dataTable 属性似乎没有生效。

这是我的代码：

索引.php

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <script type="text/javascript" language="javascript" src="jquery.js"></script>
        <script type="text/javascript" language="javascript" src="jquery.dataTables.js"></script>
        <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                $('#live_table').load("table.php");
                var refreshId = setInterval(function() {
                    $('#live_table').load("table.php");
                }, 2000);
                $.ajaxSetup({ cache: false });
                $('#data').dataTable();
            });
        </script>
        <title></title>
    </head>
    <body>
        <div id="live_table">
        </div>
    </body>
</html> 
```

表.php

```
<table id="data">
    <thead>
        <tr>
            <th>Foo</th>
            <th>Bar</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>2</td>
        </tr>
        <tr>
            <td>3</td>
            <td>4</td>
        </tr>
    </tbody>
</table> 
```

index.php 旨在每 2000 毫秒刷新一次表，而 table.php 在我的实际情况下实际上更复杂，并且需要条件单元格背景和链接，这就是为什么我没有选择使用服务器端处理 (JSON) 来处理表数据.

知道为什么该`$('#data').dataTable();`命令不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:50:33.547

看起来问题是在`.dataTable()`实际加载表之前发生调用，因为`.load`调用是异步发生的，其余代码继续运行。您需要`.dataTable()`在请求完成后使用第三个参数调用[`.load`](http://api.jquery.com/load/)：

```
$('#live_table').load(
    "table.php",
    {},
    function() { $('#data').dataTable(); }
); 
```

演示：http: [//jsfiddle.net/sAnUL/1/](http://jsfiddle.net/sAnUL/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:50:44.037

我认为它没有加载，因为您使用的选择器还不存在。

尝试：

```
$(document).ready(function() {
            $('#live_table').load("table.php");
            var refreshId = setInterval(function() {
                $('#live_table').load("table.php");
            }, 2000);
            $.ajaxSetup({ cache: false });
            $('#data').dataTable(); //This line should be in table.php 
```

从技术上讲，DOM 中没有元素#data。您应该将表初始化放在 table.php 文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T16:52:49.243

您可以使用`load()`方法的回调函数：

```
$('#live_table').load("table.php", function(){
    $('#data').dataTable();
}); 
```

或使用`ajaxSuccess()`：

> 附加一个在 Ajax 请求成功完成时执行的函数。这是一个 Ajax 事件。

```
$('#data').ajaxSuccess(function(){
    $(this).dataTable()
}) 
```

# asp.net-mvc-3 - 使用数据库表项填充下拉列表

> ID：11474732
> 
> 赞同：0
> 
> 时间：2012-07-13T16:41:08.923
> 
> 标签：asp.net-mvc-3, entity-framework, razor, drop-down-menu

我有一张大约有 3 件物品的桌子。我希望`Dropdown List`使用该表填充。但我有一个条件，我只想在下拉列表中显示 2 个项目。怎么做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:44:41.133

您可以使用视图模型：

```
public class MyViewModel
{
    public string SelectedItemId { get; set; }
    public IEnumerable<SelectListItem> Items { get; set; }
} 
```

然后取前 2 项（显然，如果您的要求是根据某些条件取其他 2 项，您可以使用`.Where()`扩展方法链接，以便在调用之前先进行过滤`.Take()`）：

```
public ActionResult Index()
{
    var model = new MyViewModel();
    model.Items = db.Items.Take(2).ToList().Select(x => new SelectListItem
    {
        Value = x.Id,
        Text = x.SomeText
    });
    return View(model);
} 
```

视图是标准的东西，只需调用 DropDownListFor 助手：

```
@model MyViewModel
@Html.DropDownListFor(x => x.SelectedItemId, Model.Items) 
```

# java - 在虚拟化环境中提高 JVM 性能

> ID：11474734
> 
> 赞同：4
> 
> 时间：2012-07-13T16:41:39.793
> 
> 标签：java, jvm, vmware, xen

在虚拟化环境（Vmware/XenServer）中提高 JVM 性能需要考虑哪些要点？

*   在虚拟化环境中改进 JVM 的设置有哪些？
*   有没有专门为虚拟化环境制作的JVM？
*   或者是否有 Java 客户端使用的 JVM 并将字节码发送到服务器并从那里执行？

# java - Matlab2011a 和 64 位 Win7 中的 Java GUI

> ID：11474737
> 
> 赞同：1
> 
> 时间：2012-07-13T16:42:02.810
> 
> 标签：java, matlab, user-interface, data-acquisition

今年早些时候，我编写了 Java GUI 代码，以便在 Matlab 环境中工作以获取图像。我能够在 matlab 中调用 Java_Gui.jar，以及使用 .jar 文件中的一些类。该图形用户界面在 WinXP 32 位、Matlab2006b 和 Matlab 2008a 上进行了测试。调用Java类的matlab代码：

```
clc,clear all,close all

javaaddpath('C:\Users\...\JavaGUI.jar');

JavaGUI.main([]);
pause(1)
JavaGUI.main2(); 
```

但是，当在 64 位和 Matlab2011a 上使用 Win7 尝试相同的程序时，出现了熟悉的问题：

```
??? Java exception occurred:
java.lang.UnsatisfiedLinkError: no sserial in java.library.path 
```

知道为什么会这样吗？也许我应该在 64 位版本上编译我的 jar 文件？该代码仍在 32bit Win 上运行，刚刚检查过。

解答： 可在 64 位 Windows 7 上使用 32 位版本的 Matlab！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:58:19.437

可能您的 JAR 使用 JNI。

JNI 将无法加载到与包含本机部分的 DLL 不同位数的进程中。在这种情况下，您需要一个 64 位版本的库（Java 代码没有什么不同，本机 DLL 是）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:58:20.297

问题是您在 java 中使用了一个库来调用本地库，您需要 64 位版本才能在 64 位 JRE 中运行它。您需要切换到 32 位版本的 Matlab，或者跟踪对 sserial 进行本机调用的库并更新到 64 位系统的 64 位版本。

# python - 传递模型实例，而不是 Django 中的 __unicode__ 方法

> ID：11474742
> 
> 赞同：0
> 
> 时间：2012-07-13T16:42:12.723
> 
> 标签：python, django, django-models, django-forms

我有一个包含通过外键连接的 django 表单。这是一个非常大的表的外键。在表单上，​​为了防止加载大量可能导致浏览器崩溃的选择，我有一个 jQuery 自动完成功能，它会在每次击键时发送输入的文本。然后在表格中搜索此文本并返回合适的结果以进行显示。The id is then passed to a hidden CharField when one is selected. 这个隐藏的 CharField 是 ForeignKey 关系的小部件。当我尝试保存表单时，我收到一个错误，我需要为相关模型传递模型实例，这很公平。但是，我不知道该怎么做。`model.objects.get(pk=id_from_form)`我可以拿那个 id 做一个`__unicode__`模型的方法。我确定我缺少某些东西，但我看不到它是什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:07:18.417

不要使用 a`CharField`来存储 id，而是尝试使用 a`ModelChoiceField`并将小部件设置为 a `HiddenInput`。表单中的字段定义如下所示：

```
mymodel = forms.ModelChoiceField(widget=forms.HiddenInput, queryset=MyModel.objects.all()) 
```

# java - 变量在 catch 块后立即被垃圾收集

> ID：11474743
> 
> 赞同：7
> 
> 时间：2012-07-13T16:42:18.557
> 
> 标签：java, garbage-collection

我可以从垃圾收集器中看到这种奇怪的行为

```
public class A {
    public static void main(String[] args) {

        String foo;
        try {
            foo = "bar";

            int yoo = 5; //1
        } catch (Exception e) {
        }

        int foobar = 3;//2 
    }
} 
```

如果我去调试并在 //1 foo 不为 null 并且其值为“bar”但在断点 //2 foo 为 null 上放置断点，则在调试时这可能很难理解。我的问题是，是否有任何规范表明这是垃圾收集器的合法行为

有了这个小变化，它就不会收集垃圾：

```
public class A {
    public static void main(String[] args) {

        String foo;
        try {
            foo = "bar";
        } catch (Exception e) {
            throw new RuntimeException(e);
        }

        int foobar = 3;
    }
} 
```

为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T16:45:47.353

在这种情况下，您在设置后不使用 foo 变量，因此 JVM 完全忽略该变量甚至是合法的，因为它从未使用过并且不会改变程序的结果。

但是，这在调试模式下不太可能发生。

在您的情况下，只要 foo 在范围内或者您持有对它的引用（包括 try/catch 块之后的部分），它就不应该被 GC 处理。

**编辑**

实际上，我得到的行为与您在 Netbeans 7.1.1 和 Java 7.0_03 中描述的行为相同......

一个问题可能是因为您没有将默认值设置为`foo`，所以您不能在 try/catch 块之后使用它（它不会编译）。

**字节码**

*   使用您使用的代码

```
public static void main(java.lang.String[]);
Code:
   0: ldc           #2                  // String bar
   2: astore_1      
   3: iconst_5      
   4: istore_2      
   5: goto          9
   8: astore_2      
   9: iconst_3      
  10: istore_2      
  11: return 
```

*   `String foo = null;`用作第一条语句，在这种情况下，调试器会看到 try/catch 块之后的值：

```
public static void main(java.lang.String[]);
Code:
   0: aconst_null   
   1: astore_1      
   2: ldc           #2                  // String bar
   4: astore_1      
   5: iconst_5      
   6: istore_2      
   7: goto          11
  10: astore_2      
  11: iconst_3      
  12: istore_2      
  13: return 
```

我不是字节码专家，但他们看起来和我很相似......

**结论**

我个人的结论是，要让调试器显示 的值`foo`，它必须运行`foo.toString()`某种类型的 a，这在 catch 块之后不是有效的语句，因为`foo`可能尚未初始化。在该部分添加 a`System.out.println(foo)`是不合法的（不编译）。调试器对于值是什么和显示有点迷失`null`。

要说服自己这与 GC 无关，可以尝试以下示例：

```
public static void main(String[] args){
    String foo;
    char[] c = null;
    try {
        foo = "bar";
        c = foo.toCharArray();

        int yoo = 5; //1
    } catch (Exception e) {
    }

    int foobar = 3;//2 
} 
```

在线上`foobar`，您可以看到它`c`成立`bar`，但 foo 显示为`null`. 所以字符串仍然存在，但调试器无法显示它。

更有趣的例子：

```
public static void main(String[] args){
    String foo;
    List<String> list = new ArrayList<String>();

    try {
        foo = "bar";
        list.add(foo);
        int yoo = 5; //1
    } catch (Exception e) {
    }

    int foobar = 3;//2 

} 
```

就`foobar`行了，`foo`显示为`null`，但`list`包含`"bar"`...很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T16:48:02.513

`foo`从来没有默认值，当您转到第 2 行时，您正在超出设置它的范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T16:56:33.057

生成的字节码如下：

```
 public static void main(java.lang.String[]);
    Code:
       0: ldc           #2                  // String bar
       2: astore_1
       3: iconst_5
       4: istore_2
       5: goto          9
       8: astore_2
       9: iconst_3
      10: istore_2
      11: return
    Exception table:
       from    to  target type
           0     5     8   Class java/lang/Exception 
```

我的第一个猜测是，我们会为 foo 和 foobar 重用局部变量位置，在这种情况下，调试时该值将不再可用。但是可以看出 local 1 没有被覆盖（虽然 yoo 和 foobar 共享相同的空间）。

由于这种情况不会发生，而且我们可以非常确定 JIT 在这里没有做任何事情，这确实是一种奇怪的行为。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-13T16:51:43.100

这不是合法行为，因为 main 方法的上下文仍然存在。除非您在 try 块中声明了 String foo ，否则理想情况下它不应该被 GC （在这种情况下，它在 2 处将无法访问）。

我尝试了这段代码，它对我来说工作正常。

# c# - SslStream 客户端无法完成与 stunnel 服务器的握手

> ID：11474747
> 
> 赞同：6
> 
> 时间：2012-07-13T16:42:27.547
> 
> 标签：c#, .net, openssl, sslstream, stunnel

我有一个完全可操作的系统，其中基于 openssl 的客户端与 openssl 服务器交互。每个客户端都有自己的证书，由服务器验证。已使用 openssl (X509, pem) 生成证书。它们是自签名的。

我现在想写一个基于 SslStream 的测试客户端。我使用了 SslStream 类[文档](http://msdn.microsoft.com/en-us/library/d50tfa1c)中的客户端示例。

我的 SslStream 客户端无法完成握手。stunnel 抱怨客户端没有发送其证书。这在 Wireshark 中得到确认（证书长度：握手消息中的 0）。

我的客户显示以下异常：

> 内部异常：收到的消息出乎意料或格式错误

这就是我加载证书的方式：

```
X509Certificate cert = new X509Certificate2(filename, password);
X509CertificateCollection certColl = new X509CertificateCollection();
certColl.Add(cert); 
```

我尝试检索证书的各种属性（例如：GetSerialNumberString()）。有用。验证方法返回 false。这是我接下来要调查的事情。

我如何设置我的 SslStream 似乎并不重要（结果相同）：

```
sslStream.AuthenticateAsClient(serverName);

SslStream sslStream = new SslStream(
  client.GetStream(),
  false,
  new RemoteCertificateValidationCallback(ValidateServerCertificate), 
  new LocalCertificateSelectionCallback(SelectLocalCertificate)); 
```

与身份验证相同：

```
sslStream.AuthenticateAsClient(serverName);

sslStream.AuthenticateAsClient(serverName,
  certColl,
  SslProtocols.Tls,
  true); 
```

`SelectLocalCertificate`被调用（两次）并返回我的证书。`ValidateServerCertificate`目前从未被调用（令我惊讶）。

我该如何调试呢？如果你能解决我的问题就更好了。

**更新**

我添加了一个函数来根据文档中的[X509Chain 示例执行链验证。](http://msdn.microsoft.com/en-us/library/System.Security.Cryptography.X509Certificates.X509Chain.aspx)它显示证书上的各种信息，包括两条有趣的消息：

```
Element certificate is valid: False
Element error status length: 1 
```

最后，我真的没有比我打电话验证时更多的细节了。

的输出`openssl verify cert.pem`没有报告任何异常。

```
error 18 at 0 depth lookup:self signed certificate
OK 
```

**更新**

我从 pem 中提取了私钥和证书，并生成了一个 cert.pfx (pkcs12)。在我的个人密钥库中导入 cert.pfx 没有问题。在我的证书详细信息中，我可以看到一个小图标，指示附加的私钥。

我修改了我的客户以从我的个人商店中检索证书。但我遇到了同样的失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:36:44.470

解决方案是在我的 Windows 机器上导入我的 CA 根证书。我的客户现在可以完成握手了！

通过搜索更完整的 SslStream 示例找到了解决方案。感谢[http://geekswithblogs.net/luskan/archive/2007/10/01/115758.aspx](http://geekswithblogs.net/luskan/archive/2007/10/01/115758.aspx)。

# ssl - 带有 SSL 的连接器/C++？

> ID：11474748
> 
> 赞同：1
> 
> 时间：2012-07-13T16:42:39.307
> 
> 标签：ssl, mysql-connector, visual-c++-2008

如何通过 SSL 使用 Connector/c++ 连接到 MySql？

我读到了 mysql_ssl_set(): 似乎只适用于 Connector/c。

我已启用 openSSL 并在 MySql 上为需要 SSL 用户工作。而且我可以使用 Connector/c++ 远程连接到 MySql，但看不到如何修改 sql::Connection 的参数以引用 SSL 证书。

来自 MySql DevZone 的 Giri Mandalika 的优秀教程和关于 Connector/c++ 的文档没有提到 SSL，这让我感到惊讶，因为 SSL 为 Connector/c 提供了很好的文档......或者我错过了一些明显的东西？

我意识到 sql::Driver::Connect() 被重载了，很少讨论的方法采用一个参数 sql::ConnectOptionsMap &options。沿着这条线索，我只找到了一个关于这一点的讨论：Ulf Wendel/Thomas Pollak question-and-solution here (http://forums.mysql.com/read.php?167,367519,369534#msg-369534)。

对我不起作用：当我合并它并尝试构建（VC2008，WIN7）时，构建有警告并失败。

我追踪了确切的原因： sql::ConnectPropertyVal 生成本地定义的符号警告；和 std::map 导致致命错误 LNK1120: 1 unresolved externals。

由于有如此多的 Connector/c++ 用户，我希望社区中的其他人也可能对如何将 SSL 与 Connector/c++ 一起使用感兴趣。感谢任何想法或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:31:55.490

与 Giri Mandalika（在最初的开发团队中）交谈，他提到 SSL 支持最初是计划的，但尚未针对 Connector/c++ 完成。

万一其他想要 SSL 的人发现这个问题，我只能使用 Connector/c 来解决这个问题，Connector/C++ 是设计用来包装的底层 C api。

由于六个月以来没有任何社区成员提出将 SSL 与 Connector/c++ 一起使用的特定解决方案（除了我的问题中提到的重载解决方案），我想我必须得出结论，这是不可能的，并将我自己的问题标记为我的“已回答”。

# groovy - 用 groovy expando 元类覆盖 JList toString 方法以显示 groovy 类的实例

> ID：11474753
> 
> 赞同：1
> 
> 时间：2012-07-13T16:43:10.257
> 
> 标签：groovy, jlist, expandometaclass

在一个 groovy swing 应用程序中，我有一个代表教师的类，如下所示：

Docente.groovy

```
public class Docente {
    String codigo
    String nombre
    String apellidoPaterno
    String apellidoMaterno
    String direccion
    String tipoDocumento    
    String sexo
    String telefono
    String correo

    String toString() {
        nombre
    }
} 
```

我使用 toString 方法在 JTable 中显示教师姓名（带名词）以及某些其他值。想法是将其中一些显示在表格上，将其余部分显示在 JDialog 窗口上，以便执行子 CRUD 操作。

假设 sw 是 groovy 的 SwingBuilder 对象的一个​​实例，而 grdDocentes 是 JTable 的 id，我使用以下代码来填充该表：

DocentesUI.groovy

```
...
def tm = sw.grdDocentes.model
tm.rowCount = 0
def doc = DocenteDespachador.obtenerDocentes()
doc.each {
    tm.addRow([it.codigo, it, it.apellidoPaterno, it.apellidoMaterno] as Object[])
}   

... 
```

ObtenerDocentes() 是用于从数据库中获取所有教师的方法。第二列 (it) 是 Docente 实例本身，并且正如预期的那样，它显示调用 toString() 方法的 nombre 属性。我这样做是因为我发现在获取对象的其他属性时获取该表的第二列很方便。

现在，在另一个用户界面上，我想在 JList 中显示这些教师，但格式不同。这是 metaClass 的用武之地。在这个其他接口中，我想覆盖我的 Docente 类上的 toString()。因此，为此，我使用以下内容：

AsignarDocenteUI.groovy

```
...
        def model = sw.lstDocentesDisponibles.model
        Docente.metaClass.toString = {
            return "No entiendo"
        }           
        def docentes = DocenteDespachador.obtenerDocentes()
        docentes.each {
            println it.toString()
            println it
            model.addElement it
        }

... 
```

这里，lstDocentesDisponibles 是 JList 的 id。当代码到达 println it.toString() 行时，它使用覆盖的 toString() 并向默认输出流显示“no entiendo”。但是，当我查看 JList 时，会显示原始的 toString()。我在这里想念什么？

任何提示表示赞赏。

谢谢，

爱德华多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:39:20.550

我敢打赌：JList 不会通过 metaClass。装饰你的模型怎么样？

```
class DocenteForJList { 
  Docente docente
  String toString() { docente.with { "$nombre ($codigo)" } }
}

def docentes = DocenteDespachador.obtenerDocentes()
docentes.each {
  model.addElement new DocenteForJList(docente:it)
} 
```

# haskell - 有类型约束的类型叫什么？

> ID：11474754
> 
> 赞同：8
> 
> 时间：2012-07-13T16:43:10.977
> 
> 标签：haskell, ghc

例如，`Num a => a`。

我以为它们只是被称为“受限类型”，但谷歌搜索并没有出现该术语的很多用法，所以我很想知道它们是否有其他名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T12:51:51.253

具有这种特定约束的类型称为*“限定类型”*，而特性本身有时称为“限定多态性”。我相信该术语最初是由[Mark Jones 的 ESOP '92 论文](http://web.cecs.pdx.edu/~mpj/pubs/esop92.html)引入的。

限定类型不应与更主流的“有界多态性”概念相混淆，Java 等语言中的泛型基于该概念。有界多态性本质上是参数多态性与子类型的（相当复杂的）组合，而合格的类型在没有子类型的情况下也能相处。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T20:26:53.683

该`Num a =>`部分确实称为约束；您可以将其解读为“如果`Num a`是真的，那么……”

通常，约束和量词一起讨论。任何受约束的类型都可以转换为等效类型，其中约束仅出现在内部`forall`或`exists`量词中。因此，您不会像听到“受约束的参数多态性”（`forall a. C => T`）、“受约束的存在类型”（`exists a. C => T`）或“受约束的多态性”（这两种量词）那样经常听到“受约束的类型”。

一个相关的术语是“有界多态性”。有界多态性通常意味着受约束的多态性，其中约束是子类型或超类型约束。但是，并没有严格遵循这种区别。在 Java 或 Scala 等具有子类型的语言中，您经常会听到称为“绑定”的任何类型的约束。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-14T11:29:22.940

“合格的类型”。见马克·琼斯。*合格类型：理论与实践*。剑桥大学出版社，剑桥，1994 年。

谷歌上有很多相关的[比赛](http://www.google.nl/search?q=qualified%20types)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-13T17:50:13.770

我不是类型理论专家，但通过一些研究，这就是我发现的（这可能有帮助，也可能没有帮助，但我不能在评论中加入这个）。

[Haskell 简介：类](http://www.haskell.org/tutorial/classes.html)调用`Num a`类型上下文的部分：

> 类型 a 必须是类 Eq 的实例的约束写成 Eq a。因此，Eq a 不是类型表达式，而是表示对类型的约束，称为*上下文*。

所以我想你可以说“一个有上下文的类型”，或者你提到的“受约束的类型”。

另一个值得关注的地方是（我相信）为 Haskell 首次描述类型类的地方：[How to make ad-hoc polymorphism less ad-hoc](http://homepages.inf.ed.ac.uk/wadler/papers/class/class.ps.gz) [postscript]。

> 类型类似乎与面向对象编程、类型的有界量化和抽象数据类型中出现的问题密切相关 [CW85, MP85, Rey85]。下面概述了一些联系，但需要做更多的工作才能充分理解这些关系。

这篇论文写于 1988 年，所以我不确定这些关系现在是否已被完全理解，但[有界量化](http://en.wikipedia.org/wiki/Bounded_quantification)的维基百科页面没有提到 Haskell，所以我不确定它是否完全一样。（再一次，不是类型理论家——只是一个喜欢 Haskell 的人）

此外，关于`square :: Num a => a -> a`它所说的类型：

> 这被读作“对于属于类的每个这样的类型（即，这样，，和否定定义在 上），`square`具有类型。”`a -> a``a``a``Num``(+)``(*)``a`

你可以说类型“属于一个类”。

这就是我所拥有的一切。就个人而言，我认为“受限类型”或“受限于类的类型”工作正常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T17:22:01.050

您可以将其称为*有界多态类型*（参见[wikipedia](http://en.wikipedia.org/wiki/Bounded_quantification)）。

# css - div高度问题

> ID：11474755
> 
> 赞同：2
> 
> 时间：2012-07-13T16:43:14.577
> 
> 标签：css, html

`div`我的代码中元素的高度存在问题。

看看这个例子： http: [//jsfiddle.net/qUfr8/](http://jsfiddle.net/qUfr8/)
...现在这个：http: [//jsfiddle.net/DdUbr/](http://jsfiddle.net/DdUbr/)

注意红色边框。在第一个例子中很好，但在第二个例子中不行。
这些示例之间的唯一区别是我`div`在第二个代码中添加了两个元素，现在 的高度`content`等于 0，但`content`仍然显示 。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:45:39.947

如果您的浮动元素在 div 中，则需要使用明确的修复

[http://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

jsFiddle 示例：http: [//jsfiddle.net/DdUbr/2/](http://jsfiddle.net/DdUbr/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:53:56.440

解决它的另一种方法是将“display：inline-block”添加到您的#content：

[http://jsfiddle.net/DdUbr/6/](http://jsfiddle.net/DdUbr/6/)

# oracle - 使用 Mybatis 3 更新 Oracle CLOB 有什么技巧吗？

> ID：11474756
> 
> 赞同：0
> 
> 时间：2012-07-13T16:43:18.713
> 
> 标签：oracle, jdbc, mybatis, clob

我正在更新我的 Oracle 数据库中的 CLOB 列。参数化的 SQL 看起来像是正确执行而没有错误，但是当我运行 select 来查看更改时，它还没有更新。注意：MyBatis 3 是使用 JDBC 参数化查询构建的，所以这些规则也适用。

MyBatis 映射：

```
<update id="updateRSA103RequestData" parameterType="com.company.domain.RSA103XMLData" flushCache="true">
        update
        RSA_SUBMIT_DATA
        set TXLIFE_REQUEST = #{request}
        where RSA_SUBMIT_QUEUE_ID = #{id}
</update> 
```

运行时日志：

> 2012-07-13 12:35:26,728 调试连接：线程主：-ooo
> 连接已打开 2012-07-13 12:35:26,837 调试
> PreparedStatement：线程主：- ==> 执行：更新
> RSA_SUBMIT_DATA 设置 TXLIFE_REQUEST = ？哪里 RSA_SUBMIT_QUEUE_ID = ？
> 2012-07-13 12:35:26,837 DEBUG PreparedStatement:Thread main: - ==>
> 参数：testasdfasdf(String), 51(Integer) 2012-07-13 12:35:27,024
> DEBUG Connection:Thread main: - xxx Connection关闭

更改后选择查询：

```
select *
from RSA_SUBMIT_DATA
where RSA_SUBMIT_QUEUE_ID = 51

RSA_SUBMIT_QUEUE_ID | TXLIFE_REQUEST  | TXLIFE_RESPONSE
51             | originalString   | resultString 
```

映射器调用：

```
SqlSession sqlSession = sqlSessionFactory.openSession();
try {
    log.debug("autoCommit: " + sqlSessionFactory.getConfiguration().getEnvironment().getDataSource().getConnection().getAutoCommit());
    PolicyTransactionMapper policyTransactionDAO = sqlSession
                .getMapper(PolicyTransactionMapper.class);
    RSA103XMLData xmlData = new RSA103XMLData();
    xmlData.setId(rsaSubmitQueueID);
    xmlData.setRequest(request);
    policyTransactionDAO.updateRSA103RequestData(xmlData); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:55:49.657

我不认为您的 SqlSession 是通过自动提交打开的。

根据[MyBatis 用户指南](http://code.google.com/p/mybatis/downloads/detail?name=MyBatis-3-User-Guide.pdf)，要使用自动提交，请尝试。

> SqlSession sqlSession = sqlSessionFactory.openSession(true);

此外，您的日志语句实际上正在打开一个新连接。请参阅[DataSourceUtils.getConnection 与 DataSource.getConnection](https://stackoverflow.com/questions/9642643/datasourceutils-getconnection-vs-datasource-getconnection)

这可能会返回与您的映射器使用的连接不同的连接。

# asp.net-mvc-3 - 将数据表与 MVC 3 和 WebGrid 一起使用

> ID：11474758
> 
> 赞同：2
> 
> 时间：2012-07-13T16:43:23.443
> 
> 标签：asp.net-mvc-3

我正在使用 MVC 3 编写我的第一个 Internet 应用程序，但是在将数据绑定到 Webgrid 时遇到了问题。我正在使用存储过程提取数据并将其存储在模型的数据表中。我不能直接使用数据表绑定，所以我将它转换为 EnumerableRowCollection，但我似乎无法让它工作。

我已经看到了他们列出模型中每个字段的示例，我认为这是一种非常荒谬的方式。此外，根据他们选择查看的内容和查看的顺序，为此报告返回的字段或动态字段。

在我的模型中：

```
namespace ShipStatReportsModels.Models
{
    public class ShipStatData
    {
        public EnumerableRowCollection GetReportData()
        {
            SqlDataAdapter da = new SqlDataAdapter();
            DataTable dt = new DataTable();
            try
            {
                using (SqlConnection _SqlConnection = new SqlConnection(ConfigurationManager.AppSettings["ADONETHorizoninetuser"]))
                {
                    using (SqlCommand cmd = new SqlCommand("UP_ShipStatReports_DataPresentation", _SqlConnection))
                    {
                        cmd.CommandTimeout = 120;
                        cmd.CommandType = System.Data.CommandType.StoredProcedure;

                        cmd.Parameters.AddWithValue("@Contact_id", 43135);
                        cmd.Parameters.AddWithValue("@Contact_Server_ID", 17);
                        cmd.Parameters.AddWithValue("@Report_Id", 1);

                        da.SelectCommand = cmd;
                        da.Fill(dt);
                    }
                }

            }
            catch (Exception ex)
            {
                throw ex;
            }          

            return dt.AsEnumerable();
        }

    }
} 
```

在我的收藏中：

```
public ActionResult Reports()
{
    ShipStatData modelObject = new ShipStatData();
    EnumerableRowCollection resultSet = modelObject.GetReportData();

    return View(resultSet);
} 
```

在我看来：

```
@{

    ViewBag.Title = "Reports";
}
@model ShipStatReportsModels.Models.ShipStatData

@{
    var Grid = new WebGrid(@Model);
}

<h2>Reports</h2>

<div>
@Grid.GetHtml(
    tableStyle: "grid",
    headerStyle: "head",
    alternatingRowStyle: "alt"
    )
)
</div> 
```

但我收到以下错误：

编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS1502：最佳重载方法匹配 'System.Web.Helpers.WebGrid.WebGrid(System.Collections.Generic.IEnumerable, System.Collections.Generic.IEnumerable, string, int, bool, bool, string, string , string, string, string, string, string)' 有一些无效参数

任何想法，将不胜感激。谢谢！

# android - 我可以在运行 libgdx 之前运行 Activity 吗？

> ID：11474766
> 
> 赞同：1
> 
> 时间：2012-07-13T16:43:53.940
> 
> 标签：android, bluetooth, libgdx

由于我 `mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();` 在 libgdx 的 render() 中运行异常，因此我有一个想法，即首先在 Android 活动中运行蓝牙设置，然后关闭活动并初始化 libgdx。

以下代码崩溃：

```
public class MyActivity extends AndroidApplication {
    public void onCreate (android.os.Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        Intent myIntent = new Intent(MyActivity.this, StartActivity.class);
        startActivity(myIntent);

        initialize(new MyGame(), false); //run libgdx
    }
} 
```

StartActivity如下（后面是游戏标题和蓝牙设置）：

```
public class StartActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TextView text = new TextView(this);
        text.setText("Hello World, Android");
        setContentView(text);

        try {
            Thread.sleep(7000);
        }
        catch (InterruptedException e) {};
        finish();
        return;
    }
} 
```

没有崩溃消息，但如果我添加以下内容，应用程序会保持黑屏（甚至没有“你好”消息）：

```
Intent i = new Intent(this, MyActivity.class);
startActivity(i); 
```

logcat 中有“E/AndroidRuntime(612): ERROR: thread attach failed”。但正如我所说，没有崩溃消息。

这里出了点问题......我不知道如何正确编写这样的代码。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:50:10.020

是的，您可以在运行 libgdx 之前启动活动。不要先启动 libgdx 的东西。启动蓝牙设置，然后`Intent`在准备好时调用以开始实际游戏。

像这样：

```
public class BluetoothActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.bluetoothsettings);
        Button startGame = (Button)findViewById(R.id.btnStartGame);

        // handle set start click
        startGame.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(BluetoothActivity.this, GameActivity.class);
                BluetoothActivity.this.startActivity(intent);
            }
        });
    }
} 
```

然后你的游戏活动就可以`AndroidApplication`像你上面那样扩展的正常活动。

当然，请确保您`AndroidManifest.xml`首先开始`BluetoothActivity`，而不是 libgdx。

```
<activity android:name=".BluetoothActivity">
  <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
  </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:36:56.213

无论如何这都行不通，但我会说它可能会由于未在 Manifest 中声明 StartActivity 而崩溃。

# jquery-ui - 切换 Web 浏览器的选项卡时激活 jQuery UI 状态焦点

> ID：11474767
> 
> 赞同：0
> 
> 时间：2012-07-13T16:43:59.807
> 
> 标签：jquery-ui

我正在使用 jQuery UI 垂直滑块，当我单击 Web 浏览器（Firefox、Chrome 和 IE）的新选项卡时，状态焦点被激活，滑块没有明显的原因。

当我单击状态焦点消失的滑块时，当我单击窗口时没有状态焦点（这是它应该做的。），只有切换选项卡。

我知道这是一个错误，但我找不到修复它的代码。帮助？

我正在使用 jQuery UI 1.8.21。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:18:49.753

这已通过在 jquery ui slider-vertical 的默认 css 中将 ui-state-focus 与 ui-state-active 分开来解决。

所以这个错误不会影响滑块的呈现。

以下是用户遇到的类似问题：

[jQuery UI 按钮没有“取消点击”](https://stackoverflow.com/questions/3800641/jquery-ui-button-not-unclicking) [http://forum.jquery.com/topic/button-and-dialog-ui-state-focus-on-button-being-kept](http://forum.jquery.com/topic/button-and-dialog-ui-state-focus-on-button-being-kept)

# java - 试图理解为什么一个线程会在 Eclipse 中被阻塞？

> ID：11474769
> 
> 赞同：1
> 
> 时间：2012-07-13T16:44:20.617
> 
> 标签：java, eclipse, multithreading

我试图深入了解 Web 应用程序中的线程问题。我正在使用 Eclipse。问题是当一个线程处于一段非常冗长的代码中的某个阶段时，另一个线程即使它应该走得更远也不能走得更远。它具有阻塞线程的外观。Eclipse 已将其标记为“步进”。由于代码附近没有监视器、信号量、同步块，它为什么停止是没有意义的。

我可以在 eclipse 中使用任何东西来理解线程看起来被阻塞的任何原因吗？

我可以点击暂停按钮，暂停线程。当我单击恢复按钮时，它会返回“步进”，但无法完成这行简单的代码：

```
long beginTime = System.currentTimeMillis(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:53:03.007

在 Eclipse 中，将线程标记为“Stepping”意味着您正在单步执行代码，无论是单步执行还是（更有可能）单步执行，并且线程以某种方式被阻塞，或者执行一些 IO，等待同步锁，调用`wait()`等。Eclipse 没有控制线程，而是等待线程移过块，然后才能继续“步进”。一旦 Eclipse 在下一行控制了线程，您的线程将更改为“暂停”。

例如，在调试以下测试代码时：

```
// i put a break point here
System.out.println("Foo");
Object lock = new Object();
synchronized (lock) {
    // when I step over this line, my thread is labeled as "Stepping"
    lock.wait();
}
System.out.println("Boo"); 
```

一旦我跨过一个阻塞线程的方法，该线程就会被标记为“Stepping”。

![在此处输入图像描述](../Images/98da9b96215636f7181add31a1ee5802.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:46:48.510

“单步执行”听起来像是 Eclipse 认为您正在“单步执行代码”并且当前处于该行——也就是说，您正在以调试模式运行。是否在您错过的某处设置了断点？

# yii - Yii：renderPartial 会缓存视图文件的内容吗？

> ID：11474773
> 
> 赞同：0
> 
> 时间：2012-07-13T16:44:27.747
> 
> 标签：yii

我需要在同一页面上呈现和显示不同模型（评论、投票等）的实例。这些实例按日期排序，因此可能会有几个评论然后轮询，然后是另一个评论，然后再轮询等等。

所以我在循环中调用renderPartial。恐怕这会很慢，因为每个 renderPartial 都需要从硬盘读取文件。

所以我的问题是：renderPartial 是否在一个 http 请求期间将文件的内容缓存在内存中的某处？所以多次调用renderpartial不会每次都触及hdd。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:40:47.560

Yii 不会缓存任何东西，直到你指示它这样做。你可以缓存整个页面，或者只是页面的一部分，这完全取决于你，你应该按照[Yii 的缓存教程](http://www.yiiframework.com/doc/guide/1.1/en/caching.overview)来了解如何实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:45:26.037

我不是管理员什么的，但我很确定操作系统会缓存文件，所以你不必担心。

这是一种选择：您可以准备一组所有数据（例如数组，或某些自定义类型的结构/对象）。然后更改视图中的代码以检查此数组并循环遍历它。这样，您可以在单个`renderPartial`调用中发送输出。

# emacs - 在命令行上评估 emacs lisp 表达式

> ID：11474774
> 
> 赞同：12
> 
> 时间：2012-07-13T16:44:28.420
> 
> 标签：emacs, elisp, emacsclient

我是emacs的新手。我在 redhat linux 上使用 emacs-24.1，并试图评估一个 elisp 表达式。我希望 emacs 做的是在不启动 emacs 本身的情况下评估 elisp 表达式。我在尝试不同的东西

```
emacs --eval '(+ 2 3)' 
```

我不知道 emacs 是否正在评估表达式，但结果未显示在控制台上，并且 emacs 窗口出现。接下来我尝试了这个

```
emacsclient --eval '(+ 2 3)' 
```

Emacs 客户端需要一个服务器。它找不到服务器，因此引发错误（找不到套接字。启动服务器等）。所以我启动了一个服务器（服务器名称是 SERVER）并再次运行 emacsclient

```
emacsclient --server-file=SERVER -e '(+ 2 3)' 
```

这一次，emacs 评估表达式并在控制台上打印结果。那是因为 emacs 正在使用现有的服务器来评估表达式。现在，当服务器未运行时，我遇到了问题。

```
emacsclient --server-file=ANOTHER_SERVER -e '(+ 2 3)' -a emacs 
```

这一次，我在控制台上没有收到任何错误。Emacs 正在启动一个新窗口，因为 -a（我的 .emacs 中有 (server-start) 命令，并且 server-name 设置为 ANOTHER_SERVER）。但是 emacs 正在尝试编辑文件 (+ 2 3)。它显示在模式行上。我很困惑。emacsclient --help 向我展示了这个

```
-e, --eval              Evaluate the FILE arguments as ELisp expressions 
```

和emacs手册说这个。

```
'-e'
'--eval'
Tell Emacs to evaluate some Emacs Lisp code, instead of visiting some files.
When this option is given, the arguments to emacsclient are interpreted as a
list of expressions to evaluate, not as a list of files to visit. 
```

我不知道该怎么做。正如我所说，我的目标是在不启动 emacs 的情况下评估 elisp 表达式。是否可以？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T17:02:10.113

经过一些测试，您似乎可以使用`--batch`emacs 将任何消息转储到 stderr。然后，您可以调用`message`将内容打印到 stderr，您可以在其中看到它们。您的示例将变为`emacs --batch --eval '(message (number-to-string (+ 2 3)))'`，结果将打印到 stderr。

如果您尝试将输出重定向到文件，则需要使用重定向 stderr 而不是 stdout，`2>`而不是 just `>`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T17:16:12.840

尝试

```
emacs --batch --eval '(print (+ 2 3))' 
```

# solr - Solr - 最近匹配 - 此功能是否存在？

> ID：11474778
> 
> 赞同：0
> 
> 时间：2012-07-13T16:44:32.793
> 
> 标签：solr, full-text-search, fingerprinting, audio-fingerprinting

在比较存储在 Solr 数据存储中的“指纹”类型数据时，Solr 能否为您提供最接近的匹配。例如，

```
 eJyFk0uyJSEIBbcEyEeWAwj7X8JzfDvKnuTAJIojWACwGB4QeM  
   HWCw0vLHlB8IWeF6hf4PNC2QunX3inWvDCO9WsF7heGHrhvYV3qvPEu-  
   87s9ELLi_8J9VzknReEH1h-BOKRULBwyZiEulgQZZr5a6OS8tqCo00cd  
   p86ymhoxZrbtQdgUxQvX5sIlF_2gUGQUDbM_ZoC28DDkpKNCHVkKCgpd  
   OHf-wweX9adQycnWtUoDjABumQwbJOXSZNur08Ew4ra8lxnMNuveIem6  
   LVLQKsIRLAe4gbj5Uxl96RpdOQ_Noz7f5pObz3_WqvEytYVsa6P707Jz  
   j4Oa7BVgpbKX5tS_qntcB9G--1tc7ZDU1HamuDI6q07vNpQTFx22avyR 
```

如果给它呈现极其相似的东西，它能找到这个记录吗？它可以提供信心分数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:49:53.013

一种直接的方法可能是使用[模糊搜索](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html#Fuzzy%20Searches)，并选择第一个命中（按分数），然后您需要检查命中是否匹配，也许通过测试您可以找到一些好的经验法则。

但不确定性能是否会成为这么长的令牌的问题。使用 Lucene4.0，模糊性能得到很大改善。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:13:26.753

您可以尝试使用[Ngram 过滤器工厂。](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.EdgeNGramFilterFactory) 您可以选择与匹配/相似指纹一致的最小/最大克大小。

如果您的 minGramSize 和 maxGramSize 范围很窄，则可以匹配具有相似指纹的文档，而无需遍历误报。

# php - 如何使用亚马逊的产品广告 API 获取所有尺寸变体

> ID：11474779
> 
> 赞同：1
> 
> 时间：2012-07-13T16:44:35.230
> 
> 标签：php, xml, amazon-web-services

现在，我从 API 获得的 XML 响应仅包含与其 ASIN 对应的服装尺寸。对于 ASIN`B0069NZPHA`来说，`Size`就是`Small`. 但是，如果您要访问其[详细信息页面 url](https://rads.stackoverflow.com/amzn/click/com/B0069NZPHA)，您会看到有 2 种尺寸，小号和中号。

是否可以获得与特定 ASIN 相关的所有尺寸？

**XML 响应**

```
SimpleXMLElement Object
(
    [ASIN] => B0069NZPHA
    [ParentASIN] => B0069O8WN8
    [DetailPageURL] => http://www.amazon.com/2b-Haley-Beaded-Top-TANGERINE/dp/B0069NZPHA%3FSubscriptionId%3DAKIAJG3VKWBENQUGEYZA%26tag%3Dyoozu-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB0069NZPHA

    ...

    [ItemAttributes] => SimpleXMLElement Object
    (
        [Binding] => Apparel
        [Brand] => 2b by bebe
        [CatalogNumberList] => SimpleXMLElement Object
            (
                [CatalogNumberListElement] => 192612
            )

        [Color] => Tangerine
        [Department] => womens
        [Feature] => Array
            (
                [0] => SKU 192612
                [1] => Style 60HZK201N240
            )

        [Label] => bebe
        [Manufacturer] => bebe
        [PackageDimensions] => SimpleXMLElement Object
            (
                [Height] => 230
                [Length] => 1120
                [Weight] => 35
                [Width] => 670
            )

        [ProductGroup] => Apparel
        [ProductTypeName] => SHIRT
        [Publisher] => bebe
        [Size] => Small
        [Studio] => bebe
        [Title] => 2b Haley Beaded Top - TANGERINE (S)
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:12:31.483

I would check [ItemLookup](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/ItemLookup.html) and especially the **ResponseGroup** = [Variations](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/RG_Variations.html) / [VariationsSummary](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/RG_VariationSummary.html). (Or try any other ResponseGroup, maybe some group will show all the sizes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T07:56:28.970

我使用带有 ParentASIN 的 Variations 响应组 (ItemLookup) 来获取所有尺寸和颜色

# css - :hover:before text-decoration none 没有效果？

> ID：11474780
> 
> 赞同：34
> 
> 时间：2012-07-13T16:44:39.650
> 
> 标签：css, css-selectors, pseudo-element

作为标题，我正在使用`.icon-*`. 向超链接添加图标时：

```
<a href="#" class="icon-email icon-large">Email me!</a> 
```

属性插入的内容`content`在悬停时显示下划线文本装饰。我想禁用`text-decoration`之前唯一的内容：

```
[class^="icon-"]:before, [class*=" icon-"]:before {
    font-family: 'IcoMoon';
    font-style: normal;
    speak: none;
}
.icon-mail:before {
    content: "\37";
}
[class^="icon-large-"]:before, [class*=" icon-large"]:before {
    font-size: 48px;
    line-height: 48px;
}
a[class^="icon-"]:before, a[class*=" icon-"]:before {
    margin-right: 5px;
    vertical-align: middle;
} 
```

我已经尝试过了，但它不起作用（装饰仍然可见）：

```
a[class^="icon-"]:hover:before, a[class*=" icon-"]:hover:before {
    text-decoration: none;
    color: white;
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-05-14T08:02:06.717

插入显示：inline-block；在你的 CSS 中。类似于以下内容：

```
.icon-mail:before {
    content: "\37";
    display:inline-block;
    text-decoration:none;
} 
```

这是 JS 小提琴：

[http://jsfiddle.net/73p2k/18/](http://jsfiddle.net/73p2k/18/)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-14T04:41:23.580

由于[伪元素被渲染为其生成元素的后代框](http://www.w3.org/TR/CSS21/generate.html#before-after-content)[（`:before`](http://www.w3.org/TR/CSS21/generate.html#before-after-content)更具体地说，就在第一个子内容框之前），它遵循[与正常后代框有关的相同规则`text-decoration`](http://www.w3.org/TR/CSS21/text.html#lining-striking-props)：

> 后代元素上的 'text-decoration' 属性不能对祖先元素的装饰产生任何影响。

有关更多详细信息，请参阅这些答案：

*   [CSS text-decoration 属性不能被子元素覆盖](https://stackoverflow.com/questions/4481318/css-text-decoration-property-cannot-be-overridden-by-child-element/4481356#4481356)
*   [如何让这个 CSS 文本装饰覆盖工作？](https://stackoverflow.com/questions/1823341/how-do-i-get-this-css-text-decoration-override-to-work/1823388#1823388)

没有任何好的方法可以解决这个问题......唯一可以立即想到的选择是：

*   将文本包装在自己的`span`元素中，然后应用`text-decoration`到 that `span`，[如 skip405 所示](https://stackoverflow.com/questions/11474780/hoverbefore-text-decoration-none-has-no-effects/11477421#11477421)。缺点当然是额外的标记。

*   在您的伪元素中使用内联块背景图像而不是图标字体中的内联文本`:before`（我还更正了与您的类选择器的不一致）：

    ```
    [class^="icon-"]:before, [class*=" icon-"]:before {
        display: inline-block;
        width: 1em;
        height: 1em;
        background-size: contain;
        content: "";
    }
    .icon-email:before {
        background-image: url(icon-mail.svg);
        background-repeat: no-repeat;
    }
    .icon-large:before {
        width: 48px;
        height: 48px;
    }
    a[class^="icon-"]:before, a[class*=" icon-"]:before {
        margin-right: 5px;
        vertical-align: middle;
    } 
    ```

    与 skip405 的解决方案相比，它的优点是您不必修改 HTML，但鉴于它使用[SVG 矢量背景图像](http://caniuse.com/svg-css)，[`background-size`](http://caniuse.com/background-img-opts)它在 IE8 中不起作用。

    如果您确实需要 IE8 支持，那么您必须回退到位图图像：

    ```
    .icon-email:before {
        background-image: url(icon-mail.png);
    }
    .icon-email.icon-large:before {
        background-image: url(icon-mail-large.png);
    } 
    ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T10:08:51.140

您可以为 :before 元素设置高度和溢出：隐藏，并且文本装饰将不可见:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-13T16:49:18.667

伪元素选择器必须是选择链中的最后一项。

您可以将样式应用于`element:hover:before`但不能应用于`element:before:hover`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-13T19:52:14.703

`a`仅使用标签作为标记尝试了一些事情，但是唉。您可能的解决方法可能是将链接内部包装在另一个元素中，`span`例如 a 。因此，您可以在此元素（而不是伪元素）上添加下划线 - 这完全由 css 控制。

一个活生生的例子在这里：http: [//jsfiddle.net/skip405/fQHUH/](http://jsfiddle.net/skip405/fQHUH/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-03T15:56:33.560

这个解决方案对我有用。它排除了伪元素。但是为此，您需要将`<a>`标签的内容包装到一个额外的元素中。

```
a:hover { text-decoration: none; }
a:hover > * { text-decoration: underline; }

<a href="#"><span>content</span></a> 
```

# javascript - JS/Ajax：无需刷新或单击按钮即可获取输入字段值

> ID：11474784
> 
> 赞同：3
> 
> 时间：2012-07-13T16:44:48.087
> 
> 标签：javascript, jquery, ajax

我目前正在使用js函数提交数据而无需页面刷新或按钮单击。输入字段位于标签 #2 内，一旦用户停止输入，它就会执行 js。问题是 js 正在刷新页面，从而将我带回 tab#1。如何防止页面刷新？我以为我在 JS 函数中包含了必要的代码来阻止这种情况。[例子](http://webprolearner2346.zxq.net/TabsNextPrev/index.php)

```
<script>
$(document).ready(function() {
    var timer;
        $('#video-input1').on('keyup', function() {
            var value = this.value;

            clearTimeout(timer);

            timer = setTimeout(function() {

                //do your submit here
                $("#ytVideo").submit()

                //alert('submitted:' + value);
            }, 2000);
        });

    //submit definition once submit is executed
    $('#ytVideo').submit(function(e){
        e.preventDefault(); //prevent page refresh
        var form = $('#ytVideo').serialize();

        //submit.php is the page where you submit your form
        $.post('index.php#tab-2', form, function(data){ 
            var x = $(data);
            $("body").html(x);
        });
        return false;
    });
    return false;                                                         

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:53:56.480

尝试更改此行

```
//do your submit here
$("#ytVideo").submit() 
```

至

```
$("#ytVideo").trigger("submit"); 
```

我认为问题在于您定义了提交表单后应该执行的操作，这会导致页面重新加载。
*编辑*
尝试此更改

```
$('#ytVideo').submit(function(event){
        event.preventDefault(); //prevent page refresh
        event.stopPropagation(); //+
        var form = $('#ytVideo').serialize();

        //submit.php is the page where you submit your form
        $.post('index.php#tab-2', form, function(data){ 
            var x = $(data);
            $("body").html(x);
        });
        //- return false;
    });
    //- return false; 
```

做了一些改变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:59:38.487

而不是`.submit()`你应该使用`.triggerHandler('submit')`. [文档](http://api.jquery.com/triggerHandler/)和[相关问题](https://stackoverflow.com/questions/3772537/triggerhandler-vs-trigger-in-jquery)。

# c# - 在 .net 中跨多个域共享会话状态（不是 SUB 域）

> ID：11474789
> 
> 赞同：0
> 
> 时间：2012-07-13T16:44:57.827
> 
> 标签：c#, asp.net, .net, session, cookies

我正在使用带有 C# 的 ASP.net 3.5，使用 SQL Server，会话状态存储在 SQL Server DB 中。

我有一个跨多个域丢失会话状态的问题，但使用相同的浏览器实例和相同的代码库。

例如，我们将客户引导至**www.MyStore.com**以浏览我们的商店，我们希望将客户发送至**www.MyStore.ShopPlatform.com**以通过安全 SSL 验证进行结帐。**重定向到www.MyStore.ShopPlatform.com**时正在重新创建会话。

通配符 SSL 安装在 www.ShopPlatform.com。

所以，问题是......如何使用 .net 将 1 个会话状态 cookie 关联到同一服务器上的多个域（ **www.MyStore.com** 和**www.MyStore.ShopPlatform.com ）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:52:11.493

如果您使用 cookie 进行会话，则不会。浏览器不会将 cookie 发送到不匹配的域，并且您不能为所有域设置 cookie。即使可以，会话 cookie 也只是服务器端会话的一个密钥，如果没有访问会话存储，该密钥就没有任何意义。第三方不会有这个。

如果 www.mystore.com 和 www.mystore.shopplatform.com 碰巧都由您拥有的机器支持，并且两台机器都可以访问同一个会话存储，那么您可以使用无 Cookie 的 ASP.NET 会话配置来让它起作用。

一般来说，您不能以这种方式使用会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T18:19:10.370

由于两个域不同，因此总是会创建新会话。

我建议使用共享数据库方法。

在用户表中创建一个可以存储随机散列的列。`uniqueidentifier`应该做的数据类型 。

重定向用户时，生成一个新的 GUID 并将其存储给当前用户，然后将其附加到被重定向的 url。在接收域，设置一个端点页面，该页面将接受 URL 编码路径和查询字符串作为`ReturnUrl`参数和`tokenId`guid 的参数。

这是一个虚拟代码，它将用户重定向到一个公共端点以及一个虚拟查询字符串参数。代码托管在 domain1.local

```
Using ctx As New DataContexts.SBWebs
    Dim u As DataEntities.User = (From usr In ctx.Users Where usr.User.Equals(Page.User.Identity.Name) Select usr).FirstOrDefault
    If u Is Nothing Then Exit Sub

    Dim id As Guid = Guid.NewGuid

    u.Token = id
    ctx.SubmitChanges()

    Dim newPath As String = "/protected/?tick=" & Now.Ticks
    Response.Redirect(String.Format("http://www.domain2.local/EndPoint.aspx?tokenid={0}&ReturnUrl={1}", id.ToString, HttpUtility.UrlEncode(newPath)))
End Using 
```

并且`EndPoint.aspx`包含以下代码..

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Request.QueryString.HasKeys AndAlso Not String.IsNullOrEmpty(Request.QueryString("tokenid")) Then
        Using ctx As New DataContexts.SBWebs
            Dim usr As DataEntities.User = (From u In ctx.Users Where u.Token.Equals(Request.QueryString("tokenid"))).FirstOrDefault
            If usr Is Nothing Then Exit Sub

            usr.Token = Nothing
            ctx.SubmitChanges()

            FormsAuthentication.RedirectFromLoginPage(usr.User, False)
        End Using
    End If
End Sub 
```

关于安全注意事项：创建 cookie 后，从表中删除 GUID 以防止重放攻击。

编辑：请注意。不要将用户发送到受 ASP.Net 保护的页面（其中 Deny="?" 或类似的内容）。将用户重定向到可以处理 tokenid 的公共端点，并在设置 cookie 后重定向到预期页面。

# lua - 使用luabind调用继承自基类的C++成员函数

> ID：11474794
> 
> 赞同：0
> 
> 时间：2012-07-13T16:45:36.047
> 
> 标签：lua, luabind

# **这里是 C++ 代码，一个控制台项目**

```
class CControl  //: public CGameObject
{
public:
    CControl(){}
    ~CControl(){}

public:
    void AddAnimation(){ cout << "CControl::AddAnimation" << endl;}
};

int  _tmain()
{
    lua_State* L = lua_open();      
    luaL_openlibs(L);               
    open(L);                        

    module(L)
    [
        class_<CControl>("CControl")
            .def(constructor<>())
            .def("AddAnimation",&CControl::AddAnimation)
    ];

    int result = luaL_dofile(L,"scripts/test.lua");
    cout << result << endl;
    return 0;
} 
```

# ***lua 代码在这里使用 luabind***

```
class 'Button' (Control)
function Button:__init()
    Control:__init()
end

function Button:Create()
    self:AddAnimation()    --call, fail 
end

d = Button()
d:Create() 
```

# **问：**

当我在 Button:Create 中调用继承的函数 self:AddAnimation() 时。哇哇！“CControl::AddAnimation”没有打印出来！这是怎么回事？我已经检查了 2 个小时。令人沮丧！任何帮助将不胜感激

![在此处输入图像描述](../Images/afb30385d806850eaa3e0a79926f0288.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:26:50.027

我得到它！！如果你想成功调用 Control 构造器，你必须写这样的代码“ `Control.(self)`”。顺便说一下，当你想调用 memeber 函数时，你应该写“ `self:AddAnimation`”

# html - UI 和 Local Storage 绑定在一起

> ID：11474796
> 
> 赞同：1
> 
> 时间：2012-07-13T16:45:39.483
> 
> 标签：html, mvvm, knockout.js, local-storage

有人能告诉我我们是否可以使用 Knockout.js 或其他一些 javascript 框架将 localStorage 对象绑定到 ui 吗？

我想要的是 - 当用户加载页面时，他从本地存储*（使用某些框架）*获取最新版本的数据，然后我继续轮询我的服务以查看数据是否有任何变化。如果有变化，我将使用新数据更新本地存储并自动更新 ui *（使用某些框架）*。

这个完整的流程需要用最少的代码来完成。

这可能还为时过早，因为我没有对自己进行太多研究以了解如何去做。在架构方面的任何帮助或重新设计都将受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:01:13.920

我建议编写一些代码来检查您的 ajax 服务是否有新数据。如果是这样，请抓住它，将其存储在您的视图模型中已经绑定到您的 UI 的模型中。此外，将该模型保存到 localStorage。

如果数据不是新数据，请从 localStorage 中获取它，将其放入您的模型中（即在您的视图模型中），然后就完成了。

# php - 视频文件未上传

> ID：11474809
> 
> 赞同：0
> 
> 时间：2012-07-13T16:46:40.673
> 
> 标签：php, file-upload

我有这段代码，但这段代码不允许我上传任何类型的视频文件。这总是显示“请选择要上传的文件”。

上传文件代码如下：

```
$fileElementName = 'ufile';
if (!empty($_FILES[$fileElementName]['error'])) {
    switch ($_FILES[$fileElementName]['error']) {
            case '1':
                $error = 'You Are Not Allowed To Upload File Of This Size';
                break;
            case '2':
                $error = 'You Can Not Not Upload File Of This Size';
                break;
            case '3':
                $error = 'The uploaded file was only partially uploaded';
                break;
            case '4':
                $error = 'Not Able To Upload';
                break;

            case '6':
                $error = 'Server Error Please Try Again Later';
                break;
            case '7':
                $error = 'Failed to write file to disk';
                break;
            case '8':
                $error = 'File upload stopped by extension';
                break;
            case '999':
            default:
                $error = 'Error Found But Did Not Found What Was Problem';
        }
} elseif (empty($_FILES['ufile']['tmp_name']) || $_FILES['ufile']['tmp_name'] == 'none') {
    $error = 'Please Select File To Upload';
    $success = FALSE;
} else {
    $file = $_FILES['ufile']['name'];
    move_uploaded_file($_FILES["ufile"]["tmp_name"], $path);
}

echo json_encode($arr); 
```

在上面的代码中 $path 是 upload/ 是正确的——它适用于除视频之外的所有文件。

此代码始终显示“请选择要上传的文件”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:21:36.877

您的错误处理已损坏。在上传时，成功上传的错误代码为 0（`UPLOAD_ERR_OK`常量）。你正在做的

```
if (!empty(...)) 
```

对于零值，empty() 评估为布尔值 TRUE，因此您基本上是在说“如果没有错误，就表现得像有错误一样”。

你的代码真的应该是：

```
if ($_FILES['ufile']['error'] !== UPLOAD_ERR_OK) {
    ... error handling switch() here ...
    die();
} 
```

您随后对 的 empty() 检查`tmp_name`也毫无意义。如果没有上传文件，那么`UPLOAD_ERR_NO_FILE`无论如何您都会收到错误代码 4 ( )。

然后对于 move_uploaded_file() 东西，您将上传的文件名提取到`$file`中，然后将文件移动到`$path`，这在您的代码中的任何位置都没有设置。作为警告，永远不要在文件系统操作中直接使用用户提供的文件名。在该字段中嵌入路径信息是微不足道的，如果您不采取适当的清理/安全预防措施，您将允许恶意用户在您服务器上的任何文件上乱涂乱画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:48:15.877

检查权限，如果 $path 存在等，并将 move_uploaded_file 更改为复制，某些服务器对文件夹具有限制权限

**编辑**：也许同样的问题[https://stackoverflow.com/a/3587158/1519436](https://stackoverflow.com/a/3587158/1519436)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:50:37.280

您是否定义了表单的编码类型？

在表单标签中插入 enctype 如下： enctype="multipart/form-data"

# html - IE：当 :hover 使另一个元素可见时元素不移动

> ID：11474811
> 
> 赞同：0
> 
> 时间：2012-07-13T16:46:50.867
> 
> 标签：html, css, internet-explorer, position, fieldset

我在 IE 8/7 中遇到了一个奇怪的问题，我经历了地狱（又回来）来达到一个最小的测试用例来证明这个问题......

考虑以下 HTML：

```
<form id="hover-test">
  <fieldset>
    <div id="hover">
       <p>always visible</p>
       <p class="hidden">Visble only on hover</p>
    </div>  
  </fieldset>

  <fieldset>
    <a href="#" id="link">Please jump</a>
  </fieldset>
</form> 
```

这一点CSS：

```
form                 { background-color:#f5f5f5; }
.hidden              { display:none; }
#hover:hover .hidden { display:block; }
#link                { position:relative; } 
```

**它应该做什么：**在悬停时，一个额外的段落变得可见，将下一个字段集及其所有内容向下推。（在 FF/Chrome/Safari/Opera 中运行良好）

**它在 IE 7/8 中**的作用：段落变为可见，向下推以下字段集。然而，由于我无法理解的原因，该链接保持固定不变。

在对重现问题的最小标记的令人沮丧的追逐中（当我从原始代码中删除单行 CSS 时效果消失了，但我的测试用例可以拥有它们并且仍然很好...... O_o）我确定了至少三个在这里一起工作的玩家：

1.  字段集：如果我将所有内容放在 div 或没有字段集的表单中，一切都很好
2.  位置：相对：取消注释该行和瞧 - 链接跳转。
3.  背景颜色：这对我来说毫无意义，但没有它它可以工作。

所以，这是一个问题（除了隐含的“WTF？”）：

有没有人知道是什么导致了这种行为？以及如何解决？或者至少提示我可以研究哪些已知的 IE 问题来进一步测试？

也许我可以想出一种方法来弯曲结构并且......比如说......在一些额外的包装div或其他东西上使用背景颜色，但这似乎......有点傻，无论如何，我觉得好像不是现在理解这一点会使事情变得非常复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:12:31.157

是您对`position: relative`帮助我解决问题的评论。这让我思考**`hasLayout`**！如果您确保两者都设置`form`并且`fieldset`还设置了布局（只需将其提供给`#link`创建的问题），则该问题似乎已解决。一种（多种）方式：

```
form, fieldset {zoom: 1} 
```

[**见工作小提琴**](http://jsfiddle.net/5yfNd/3/)。

顺便说一句：你的代码中不应该有两个`#hover`id。那应该设置为一个类（也许这只是你的例子中的一个错误，但我想注意它）。

# javascript - IE9 报告缺少存在的分号

> ID：11474812
> 
> 赞同：2
> 
> 时间：2012-07-13T16:46:54.260
> 
> 标签：javascript, internet-explorer-9

我通过创建脚本标记并将 javascript 写入它的 .innerHTML 来动态加载一些 .js。

我收到此错误：

```
SCRIPT1004: Expected ';' 
develop, line 1487 character 24 
```

这没有任何意义......所以我猜它是正确或错误地一起报告行号（我至少很高兴它做到了这一点而没有失败......1487接近我的结尾代码 ）。

Firefox 通常会报告正确的行，但总是偏离 1 行。我以为IE9也会...

我该如何排除故障。我已经验证了代码通过了 jshint.com，这使得它期待一个`;`. 如果它是真的，Jshint 会抓住它。

几乎在 IE9 上盲目飞行。

这是代码：上面有 10 行，下面有 10 行。第 1487 行是这样注释的。

```
 /**
     *Publik
     */

    var publik = {};
    publik.initMenu = function( )
    {
        top_element = document.getElementById( 'top_new' ); 
        bottom_element = document.getElementById( 'wrap_drop_down_new' );
        top_element.addEventListener( "mouseout", mouse_out, false ); 
        top_element.addEventListener( "mouseover", top_mouse_over, false ); // Line 1487
        bottom_element.addEventListener( "mouseout", mouse_out, false ); 
        bottom_element.addEventListener( "mouseover", bottom_mouse_over, false ); 
    };
    return publik;

}());
/*  Use this to create Event on completion of .js and remove cStart().

    var event_load_js = document.createEvent("HTMLEvents");
    event_load_js.initEvent( "blur", true, false ); 
```

每个 Beat 请求包含的代码 top_mouse_over

```
/**
 *MMenu
 */

var MMenu = ( function () 
{
    /**
     *Private
     */

    var top_element,
        bottom_element,
        time_out_id = 0,
        TIME_DELAY = 1000;

    function showBottom()
    {
        top_element.style.border = '1px solid #cfcaca';
        top_element.style.borderBottom = '3px solid #cfcaca';
        bottom_element.style.visibility = 'visible';
    }
    function hideBottom()
    {
        top_element.style.border = '1px solid #faf7f7';
        bottom_element.style.visibility = 'hidden';
    }
    function top_mouse_over()
    {
        window.clearTimeout( time_out_id );
        showBottom();
    }
    function bottom_mouse_over()
    {
        window.clearTimeout( time_out_id );
    }
    function mouse_out()
    {
        time_out_id = window.setTimeout( hideBottom, TIME_DELAY );
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:14:40.797

从浏览器中复制动态生成的代码并将其粘贴到 Notepad++ 中并搜索“？” 看看你是否有任何 unicode 字符。我很确定控制台没有说实话。我以前也遇到过这种情况。

请参阅：[https ://stackoverflow.com/a/9246128/1220302](https://stackoverflow.com/a/9246128/1220302)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T02:56:18.330

可能与 unicode 无关。可能是属性 onclick 或其他内联脚本中缺少引号。我刚碰到这个。例子：

```
<button onclick="alert('hi') title="hello">Click me</button> 
```

此错误仅在解析 js 时发生，并在第 1 行给出错误。我发现这仅在 IE 中引发脚本解析错误，而不在 Chrome 中。错误是：

```
SCRIPT1004: Expected ';' 
mypage.html, line 1 character 54 
```

因为我使用 jquery.html() 将此 HTML 注入到 DIV 中，所以它没有在页面加载时解析它，并且仅在某些条件下 - 但实际上这是一个脚本解析错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-24T05:14:41.483

Recently I also faced the same issue with IE 11, so I did the below things to fix the issue.

1.  Open console window in IE browser by pressing ‘F12’</li>
2.  Please change the **IE version to 11** instead of the old version ( < IE11) from Emulation tab's document mode or right side top, there will be one drop-down having different IE versions.
3.  Browser will be reloaded automatically when we change the IE version

# sql - 如何在 SQL Server 中获取事务执行时间？

> ID：11474815
> 
> 赞同：0
> 
> 时间：2012-07-13T16:47:11.940
> 
> 标签：sql, sql-server, sql-server-2008

我想在 SQL Server 2008 R2 中获取事务执行时间，我想以编程方式获取该时间并将其保存在表中。怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T17:00:51.737

保存查询前后的时间并计算差异，如下所示：

```
DECLARE @start_time DATETIME, @end_time DATETIME
SET @start_time = CURRENT_TIMESTAMP

 -- query goes here

SET @end_time = CURRENT_TIMESTAMP
SELECT DATEDIFF(ms, @start_time, @end_time) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T16:51:44.437

尝试执行“SET STATISTICS TIME ON;” 在执行您的交易之前在您的连接上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T17:01:12.090

JohnC 是对的，这可能就是您想要的。

但根据您的确切需求，还有其他选择。一方面，SSMS 告诉您执行查询时在右下角传递的时间量（至少到秒）。

当然，您也可以使用[getdate](http://msdn.microsoft.com/en-us/library/ms188383.aspx) () 从 SQL Server 获取执行前和执行后的时间并找出差异。

对于大量查询的重复测试，您还可以使用其他语言（如 python）和[timeit](http://docs.python.org/library/timeit.html)等库构建测试工具。

# android - Android-sdk 文件夹没有出现在程序文件中

> ID：11474816
> 
> 赞同：0
> 
> 时间：2012-07-13T16:47:16.327
> 
> 标签：android, eclipse

我已经安装了 Android 工具和平台，但 Android 没有出现在程序文件中。而且我的 Eclipse 无法识别 Android。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:48:47.387

> 我已经安装了 Android 工具和平台，但 Android 没有出现在程序文件中。

这是不应该的。

> 而且我的 Eclipse 无法识别 Android。

请为 Eclipse 安装 ADT 插件：http: [//developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

# api - Omniture 数据仓库 API 不允许 Date_Granularity 的“小时”值

> ID：11474817
> 
> 赞同：1
> 
> 时间：2012-07-13T16:47:18.120
> 
> 标签：api, rest, data-warehouse, adobe-analytics

使用 Omniture 数据仓库 API Explorer ( [https://developer.omniture.com/en_US/get-started/api-explorer#DataWarehouse.Request](https://developer.omniture.com/en_US/get-started/api-explorer#DataWarehouse.Request) ) 时，以下请求提供“Date_Granularity is invalid response”。这个事情谁有经验？API 文档 ( [https://developer.omniture.com/en_US/documentation/data-warehouse/pdf](https://developer.omniture.com/en_US/documentation/data-warehouse/pdf) ) 声明以下值是可接受的：“无、小时、日、周、月、季度、年”。

```
{
"Breakdown_List":[
    "evar14",
    "ip",
    "evar64",
    "evar65",
    "prop63",
    "evar6",
    "evar16"
],
"Contact_Name":"[hidden]",
"Contact_Phone":"[hidden]",
"Date_From":"12/01/11",
"Date_To":"12/14/11",
"Date_Type":"range",
"Email_Subject":"[hidden]",
"Email_To":"[hidden]",
"FTP_Dir":"/",
"FTP_Host":"[hidden]",
"FTP_Password":"[hidden]",
"FTP_Port":"21",
"FTP_UserName":"[hidden]",
"File_Name":"test-report",
"Metric_List":[ ],
"Report_Name":"test-report",
"rsid":"[hidden]",

"Date_Granularity":"hour",
} 
```

回复：

```
{  
"errors":[
    "Date_Granularity is invalid."
]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T17:15:28.313

老问题，现在才注意到。直到 2013 年 1 月，数据仓库才正确支持小时粒度（您看到的错误就是这种情况的症状）。然后针对小于 14 天的日期范围进行了更正。在 2013 年 7 月的 v15 维护版本中，应该取消 14 天的限制。但我自己并没有证实这一点。

与往常一样，您请求的数据越多，DW 处理所需的时间就越长。所以我建议将范围保持在最多一个月，未压缩文件大小保持在 1GB 以下，尽管我听说现在应该支持 2GB。

如果您仍有问题，请告诉我们。

谢谢 C。

# php - if 和 isset 使用哪一个

> ID：11474821
> 
> 赞同：-1
> 
> 时间：2012-07-13T16:47:30.100
> 
> 标签：php, php-5.3

> **可能重复：**
> [为什么我需要 php 中的 isset() 函数？](https://stackoverflow.com/questions/2460290/why-do-i-need-the-isset-function-in-php)

如果我说有什么区别

```
if($value){} 
```

对比

```
if (isset($value)){} 
```

我被要求将 if($value) 更改为 isset($value)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:50:52.493

当您使用访问未定义的变量时，PHP 会生成警告（未定义的变量）`if ($value)`

用于`if (isset($value))`测试是否已声明变量。

如果`if ($value)`您知道变量已被声明，并且您想将内容评估为布尔值，请使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:51:25.387

```
$value = "";
$value = 0;
var $value; 
```

在上述情况下，`$value`将返回`false`，因为这些值被视为 null。但是，它们被认为是由 PHP 设置的，因此在这些情况下`isset($value)`会返回。`true`

享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:52:29.013

```
 if( $value ) {} 
```

如果变量包含假值，例如 0 或假，则返回假

```
 if( isset( $value ) ) {} 
```

如果变量已使用任何值（包括 0 或 false）初始化，则返回 true

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T16:53:35.550

好吧，首先，`if($value){}`如果未设置变量，将引发 E_NOTICE 警告。

除此之外，`if($value){}`

将评估 $value 是 trutty 还是 falsy（IE，它评估为 false 或 true）。

尽管`if(isset($value)){}`

将查看变量是否在某处定义，而不关心其内容

# java - Android Parcelable 占用更多内存

> ID：11474823
> 
> 赞同：2
> 
> 时间：2012-07-13T16:47:42.570
> 
> 标签：java, android, memory, parcelable, parcel

问题很简单，如果我使一个对象可打包，并将其放入一个包中并使用该包创建一个片段。对象是被克隆还是被引用。

上下文。

我在 ArrayList 中存储/引用了一个对象。取决于 ArrayList 中对象的类型（使用多态性）。我创建了一个适合处理它的片段。

我还需要将此对象传递给片段。该片段在自定义视图寻呼机中使用。我不希望有重复的对象，而且在我看来是可打包的克隆对象。

另一种方法是在 ArrayList 中传递对象的索引。然后使用 getActivity().myList.get（传递给的整数）从片段中获取对数组列表的引用。但这对我来说似乎不是很安全（ArrayList 的内容可能会改变，尽管我只是删除了所有内容并重新开始）。我还读过，您应该避免将参数传递给片段构造函数，因为它可能会使用默认的无参数构造函数重新创建。

（尽管我目前正在销毁任何重新创建的片段，因为重新附加到正确的视图存在一些奇怪的问题，另一篇文章）。

新的子问题：有没有办法通过引用片段来传递值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T16:53:58.303

> 问题很简单，如果我使一个对象可打包，并将其放入一个包中并使用该包创建一个片段。对象是被克隆还是被引用。

它可能会在其他时间点（例如，当片段的参数`Bundle`包含在实例状态中时）被克隆，即使不是立即克隆。

> 我还读过，您应该避免将参数传递给片段构造函数，因为它可能会使用默认的无参数构造函数重新创建。

正确的。

> 另一种方法是在 ArrayList 中传递对象的索引。然后使用 getActivity().myList.get（传递给的整数）从片段中获取对数组列表的引用。但这对我来说似乎不太安全（ArrayList 的内容可能会改变，尽管我只是删除了所有内容并重新开始）。

不要使用`ArrayList`. 将 a`HashMap`与耐用的钥匙一起使用。将密钥传递给片段。让片段通过密钥获取数据。确保任何人删除此对象（从而将其从 中删除`HashMap`）仅在此片段不存在时才这样做，或通知此片段以便它知道如何处理这种情况。

# ruby-on-rails - 带有设计的 Rails 3：没有路线匹配 /d/users/sign_out

> ID：11474835
> 
> 赞同：6
> 
> 时间：2012-07-13T16:48:48.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

当我尝试退出设计错误时，我收到以下错误：

> 没有路线匹配 [GET] "/d/users/sign_out"

我的标签是正确的，如下：

```
<%= link_to "Sign Out", destroy_session_path, :method=>:delete %> 
```

我的设计路线是：

```
devise_for :users, :path_prefix=>"d", :controllers=>{:sessions=>"sessions"} 
```

其他路线有：

```
resources :users#For CRUD defined after devise_for like in Devise Wiki 
```

使用用于 ajax 登录的自定义控制器会话，例如 Devise wiki 页面：

```
class SessionsController < Devise::SessionsController

 def create
  respond_to do |format|
    format.html{ super }
    format.json do
     resource = warden.authenticate!(:scope => resource_name, :recall => "#{controller_path}#failure")
     #resource = warden.authenticate!(:scope => resource_name, :recall => :failure)
     return sign_in_and_redirect(resource_name, resource)
    end
   end
  end

def sign_in_and_redirect(resource_or_scope, resource=nil)
  scope = Devise::Mapping.find_scope!(resource_or_scope)
  resource ||= resource_or_scope
  sign_in(scope, resource) unless warden.user(scope) == resource
  return render :json => {:success => true, :redirect => stored_location_for(scope) || after_sign_in_path_for(resource)}
end

def failure
  return render:json => {:success => false, :errors => ["Login failed."]}
end

end 
```

设计初始化程序具有：

```
config.sign_out_via = :delete 
```

关于可能导致问题的任何想法？我已经搜索了谷歌，但仍然很难过。

### 更新：

这是设计用户的 rails 路线文件的屏幕截图。对不起，它很小，但是您可以右键单击然后自行查看以更大的屏幕。

![在此处输入图像描述](../Images/1d888277e0bce25c2daa90de3afd76bf.png)

### 更新#2：

包含 jquery_ujs 文件。

### 更新#3：

控制台中显示确实正在传递删除，但它从 session_controller 跳转到 / 然后跳转到 d/users/sign_out ...不知道如何解决这个问题。

### 更新#4：

重定向时，它应该首先作为 DELETE 转到 d/users/sign_out。然后它重定向到`root_url`然后给出错误`ERROR Errno::ECONNABORTED: An established connection was aborted by the software in your host machine.` 它然后尝试重定向到 d/users/sign_out 作为 GET 失败的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:52:44.360

这似乎是 Devise 和 Ruby 1.9.2-p290 之间的问题。更新到 Ruby 1.9.3 并运行`bundle update` 以确保使用最新版本的 Devise；似乎工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:12:18.490

听起来您可能已从`//= require jquery_ujs`application.js 文件中删除。我认为这会处理链接详细信息以发出“删除”请求。无论哪种方式，就像现在一样，您正在制作一个显然不会影响您的`destroy_user_session`方法的“GET”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T19:35:08.267

改变：

```
config.sign_out_via = :delete 
```

到：

```
config.sign_out_via = :get 
```

看到这个相关：

[没有路线匹配“/users/sign_out”设计rails 3](https://stackoverflow.com/questions/6557311/no-route-matches-users-sign-out-devise-rails-3)

# c# - 如何发布到 GitHub API v3

> ID：11474839
> 
> 赞同：4
> 
> 时间：2012-07-13T16:49:06.810
> 
> 标签：c#, rest, oauth, github, github-api

我正在使用带有 C# 的 GitHub API v3。我能够获取访问令牌并使用它来获取用户信息和回购信息。

**但是当我尝试创建一个新的仓库时，我收到了未经授权的错误。**

我正在使用 HttpWebRequest 发布数据，如下所示。请建议我一些 C# 示例或示例代码。

```
(..)string[] paramName, string[] paramVal, string json, string accessToken)
{
    HttpWebRequest req = WebRequest.Create(new Uri(url)) as HttpWebRequest;
    req.Method = "POST";
    req.ContentType = "application/json";

    StreamWriter writer = new StreamWriter(req.GetRequestStream());
    writer.Write(json);
    writer.Close();

    string result = null;
    using (HttpWebResponse resp = req.GetResponse() as HttpWebResponse)
    {
        StreamReader reader =
            new StreamReader(resp.GetResponseStream());
        result = reader.ReadToEnd();
    }(..) 
```

注意：我不确定我需要在哪里添加访问令牌。我已经在标题和 url 中尝试过，但它们都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:57:50.580

你在使用[C# Github API 示例代码](https://github.com/sgrassie/csharp-github-api)吗？我会查看该代码，看看它是否满足您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T09:14:22.117

您只需将身份验证添加到请求标头即可轻松使用基本身份验证：

```
request.Headers.Add("Authorization","Basic " + Convert.ToBase64String(new ASCIIEncoding().GetBytes(username +":"+password))); 
```

抱歉还没有使用访问令牌的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-10T10:09:33.470

您需要在此处添加此令牌：

```
req.UserAgent = "My App";
req.Headers.Add("Authorization", string.Format("Token {0}", "..token.."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T16:39:38.563

尝试

```
rec.Credentials = CredentialCache.DefaultCredentials; 
```

或使用非默认凭据。

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.credentials.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.credentials.aspx)

# vb.net - “HttpWebRequest”在命名空间“System.Net”中不明确。

> ID：11474845
> 
> 赞同：0
> 
> 时间：2012-07-13T16:49:42.320
> 
> 标签：vb.net, ambiguous

> **可能重复：**
> [已保存的程序，现在无法编译](https://stackoverflow.com/questions/11473990/saved-program-and-now-it-does-not-compile)

我有一大堆这些错误，还有设计师错误等等。我检查了对象浏览器，它并不模棱两可，只有 system.net 中的一个 HttpWebResponse 实例

我已经黔驴技穷了。昨天编译的。我保存它并今天打开它，它不再编译。也有一堆设计师错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:56:54.730

尝试从 Visual Studio 中清理您的解决方案。然后重建。如果这不起作用，请尝试手动删除解决方案中的`bin`和`obj`文件夹。

# javascript - 为什么克隆只克隆一次？

> ID：11474850
> 
> 赞同：2
> 
> 时间：2012-07-13T16:50:20.497
> 
> 标签：javascript, jquery

我是 jquery 的新手，我 100% 确定我犯了一个逻辑错误，但我看不到它。基本上，当用户在字段中键入项目时，我想克隆字段，以便他们可以继续添加更多信息。在我正在处理的示例中，我正在尝试创建兄弟姐妹及其年龄的列表。

这是我的代码：

```
$(document).ready(function () {
    $("input[name='age']").on('keydown', function() {
    //is it the last input?
    if (this == $("input[name='age']:last", this.form)[0]) {
        //insert an empty clone of the current input
        //$(this).after($(this).clone(true).val(''));
        $('.family').clone().insertAfter(".family");
    } 
```

这是html：

```
<form>
<div class="family">
    <input name="age" value=0>  <input name="sibling" value="name?">
    <hr />
</div>
</form> 
```

如果我使用`$(this).after($(this).clone(true).val(''));`，那么它可以工作，但它只克隆一个字段（年龄一）所以我尝试将其替换`$('.family').clone().insertAfter(".family");`为克隆 div 类，但它只克隆一次字段。如果我开始输入我的第一个兄弟姐妹信息，则会出现第二个表单，但如果我开始在第二个表单上输入，则之后不会出现任何新内容。

这只是一个猜测，但我认为 if 语句不匹配，因此没有创建克隆（我是新手，所以这个想法可能是错误的）。如果是这种情况，那么我很困惑，因为我正在克隆输入字段的相同名称，所以`input[name='age']:last`应该匹配最后一个年龄字段..不确定。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:54:45.277

您将不得不让您的`keydown`事件处理程序也记录未来的元素（即`<div>`您正在克隆和插入的新元素）。

改变

```
$("input[name='age']").on('keydown', function() { 
```

到

```
$('form').on('keydown', 'input[name="age"]', function () { 
```

### 即（也有一些更正/优化）

```
$('form').on('keydown', 'input[name="age"]:last-child', function() {

    var _p = $(this).parent('.family');

    // insert an empty clone of the current input's containing div
    // ADDED : ... after the current input's containing div
    _p.clone().insertAfter(_p);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T16:58:13.873

试试这个：

```
$("form").on('keydown',"input[name='age']:last", function() {
    $('.family:last').clone().insertAfter(".family:last");
}) 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/bhamU/)**

问题是您正在尝试绑定到尚不存在的元素。要使用 .on() 做到这一点，您只需绑定到 dom 中存在的元素：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。

然后，您要确保只检查和克隆最后一个 div 并且它是输入。请注意，当您克隆输入字段时，您需要更改名称，这样您就不会得到一堆使用相同名称的字段，或者使用 PHP 之类的语言，您可以`[]`在名称后面附加PHP 会将其解析为一个数组。

# networking - 计算拓扑中的理论网络带宽

> ID：11474853
> 
> 赞同：2
> 
> 时间：2012-07-13T16:50:26.237
> 
> 标签：networking, simulation, topology, traffic-simulation

我正在构建一个离散事件模拟器，并且需要能够计算给定网络拓扑中两个系统之间可用的理论带宽，以便我可以“计时”传输需要多长时间和在预期的完成时间创建一个事件。

目前，为简单起见，我不考虑交换机的背板或网络内发生冲突/拥塞的可能性。我只是对所有通信系统之间的最大传输速率感兴趣。

例如，考虑以下示例网络拓扑： ![示例拓扑](../Images/d1bc50611cd1183ae8dfa0abf437f7f0.png)

我们假设以下连接：

```
Source 1, Source 2 -> (sending to) Dest 1
Source 3, Source 4 -> (sending to) Dest 2 
```

给定这些连接，所有源的最大有效传输速率是多少？

如果我们将其可视化为图表，我可以通过从源开始并在每个交换机级别评估传入网络流量的最大量与交换机的上行链路来手动计算这一点。

例如，此场景中的 Source #1 到 Dest 1 的有效带宽为 50 Mbps

```
1 Gbps * S1(1/2) * S2(1) * S3(1/10) = 50 Mbps 
```

但是，我很好奇可以使用哪些其他方法来计算它，或者是否有更有效的方法可以用来“预测”网络流量。

任何反馈表示赞赏 - 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:35:16.003

这本质上是一个最大最小公平问题。

[https://en.wikipedia.org/wiki/Max-min_fairness](https://en.wikipedia.org/wiki/Max-min_fairness)

渐进式填充算法（在 Wiki 文章中描述）是解决此问题的简单方法：

> 如果在网络节点中预先分配资源，则可以通过渐进式填充算法获得最大最小公平性。您从所有速率等于 0 开始，并以相同的速度一起提高所有速率，直到达到一个或多个链路容量限制。使用这些链接的来源的费率不再增加，您继续提高其他来源的费率。所有被停止的源都有一个瓶颈链接。这是因为它们使用了饱和链接，并且所有其他使用饱和链接的源同时停止，或者之前停止，因此具有较小或相等的速率。该算法一直持续到不可能增加为止。最后，当算法终止时，所有源都在某个时间停止，因此存在瓶颈链接。

# python - 使用 Unicode 将字符串转换为 Python 中的字典

> ID：11474864
> 
> 赞同：0
> 
> 时间：2012-07-13T16:50:52.633
> 
> 标签：python, string, unicode, dictionary

我想转换一个这样的字符串：

```
{u'confirm_token': u'98c21e111f25550943e29e34e65ae1dd71968ff652cb933c2f998e4f',
 u'confirmed_account': False, u'confidential': {}, u'contacts': [],
 u'_id': ObjectId('4e0a761d7c93dd25bc000021'), u'settings': {u'email': u''},
 u'here': [], u'creation_date': datetime.datetime(2011, 6, 29, 2, 47, 25),
 u'profil': {u'gender': u'Male', u'first_name': u'Test', u'last_name': u'Test',
 u'email_address': u'email@address.com', u'photo': u'picture.png'},
 u'attending': [], u'requests': [],
 u'password': u'b04b55d5f4555e5d7252e7f74aaf4dc538639fa6864f3d8004c61635'} 
```

到 Python 中的字典。我实际上尝试使用该功能`json.load()`，但由于每个键和值之前的 Unicode，它不起作用。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:55:59.393

将其转换为 Python 对象的唯一简单方法是使用`eval()`（提供`ObjectId`一些有效的 Python 类）。仅当字符串来自受信任的来源时，这将是一个选项。更安全的函数`ast.literal_eval()`不适用于这种情况——它无法评估`ObjectId()`调用。

您真的应该尝试修复您从中获得此字符串的任何内容，以使用合理的序列化格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:58:49.003

`ast.literal_eval()`（或者更确切地说，它的实现）将使您*大部分*时间到达那里。其余的将走 AST 以`ObjectId()`适当地替换呼叫。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-14T14:30:41.600

为什么不[拆分](http://docs.python.org/2/library/stdtypes.html#str.split)这个字符串然后存储在字典中。我遇到了同样的问题， eval 或 literal_eval 都不适合我

# ruby - 等待 select_list 正则表达式变量 NoValueFoundException

> ID：11474873
> 
> 赞同：0
> 
> 时间：2012-07-13T16:51:25.560
> 
> 标签：ruby, regex, variables, selectlist

Ruby 新手，需要一些帮助。将变量传递给 select_list，我想找到与变量匹配的第一个选项。

列表选项是：

*   波特兰
*   缅因州波特兰
*   波特兰，或

...我将城市分配给变量

```
var="Portland" 
```

使用： `f.select_list(:id => /location/).select(/var/)`

给`NoValueFoundException`

但是当我使用...

```
`f.select_list(:id => /location/).select(/Portland/) #no exception, gives 1st entry` 
```

如何使用正则表达式和变量访问第一个选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:16:58.423

您需要从变量 var 的字符串值构造正则表达式，而不是使用文字正则表达式 /var/。

例子：

```
:001 > /hello/.match('hello world')
 => #<MatchData "hello"> 
:002 > exp = 'hello'
 => "hello" 
:003 > /exp/.match('hello world')
 => nil 
:004 > Regexp.new(exp).match('hello world')
 => #<MatchData "hello"> 
```

# c - GTK 无法识别密钥释放事件

> ID：11474874
> 
> 赞同：0
> 
> 时间：2012-07-13T16:51:28.913
> 
> 标签：c, user-interface, keyboard, gtk, gtk3

我正在编写一个 C 程序来控制 ARDrone，并且希望无人机只要按下一个键就可以移动，并且当不再按下该键时我希望它停止移动。我将 key_press_event 和 key_release_event 都附加到我创建的窗口中，这是回调函数：

```
gint key_press_cb(GtkWidget *widget, 
                GdkEventKey *kevent, 
                gpointer data)
{ 
unsigned int key;
int res;

/* While a key is pressed the drone moves,
 * when the key is released it is put back into hover mode */
if(kevent->type == GDK_KEY_RELEASE) {
    // Hover mode
    printf("--- Hover Mode ---\n");
    ardrone_at_set_progress_cmd(0, 0, 0, 0, 0);
    //res = keyboard_update(BACKSPACE);
} else if(kevent->type == GDK_KEY_PRESS) {

    key = kevent->keyval;
    g_message("Key pressed: %c [%d]", key, key);

    res = keyboard_update(key); 
}

return TRUE;
} 
```

如果我按住键短时间，我会得到一个键释放事件，但是当按住它超过 2 秒时，我不会看到键释放事件。我在想这可能是因为我在按住一个键的同时不断收到 key_press_events；有什么办法可以禁用该重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:19:21.403

您可以尝试以下方法

```
void gtk_widget_add_events(GtkWidget* widget, gint event_mask); 
```

`event_mask`应该在哪里`GDK_KEY_RELEASE_MASK | GDK_KEY_PRESS_MASK` 并且您还应该触发事件处理程序`key-release-event`

要获得更详细的答案，需要更多代码和输出信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T22:28:26.327

如果有人想知道，我发现了问题。在我的函数中，当用户按下相应的键时，`keyboard_update()`我调用的是按下按钮。`g_signal_emit_by_name(G_OBJECT(/*button*/), "activate", NULL)`一旦我删除了这个功能，密钥释放事件就会再次被识别。不知道为什么会发生这种情况，但我现在可以不用这个功能。

# java - GSON fromJson 反序列化动态生成的类

> ID：11474878
> 
> 赞同：-2
> 
> 时间：2012-07-13T16:51:46.113
> 
> 标签：java, classloader, gson

我有

```
SearchResponse response = gson.fromJson(reader,SearchResponse.class); List<Result> results = response.results; 
```

但是，我需要提供一个使用 classLoader 创建的类

```
File path = new File (classFilesPath + File.separator + getFileNameName() );
ClassLoader LOADER = ClassLoader.getSystemClassLoader();
URLClassLoader loader = new URLClassLoader(new URL[] { path.toURI().toURL() }, LOADER);
Class loadedClass = loader.loadClass(fullyQualifiedClassName); 
```

如何在 gson.fromJson 中使用 loadedClass ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:37:33.947

> 如何在 gson.fromJson 中使用 loadedClass ？

```
Object thing = new Gson().fromJson(jsonInput, loadedClass); 
```

# android - 操作栏列表导航+标签导航 - 微调器的位置不在最左边

> ID：11474881
> 
> 赞同：11
> 
> 时间：2012-07-13T16:52:11.503
> 
> 标签：android, android-actionbar, actionbarsherlock

根据 Jake 在 [带有操作栏和选项卡的 Android 布局中](https://stackoverflow.com/questions/11034063/android-layout-with-action-bar-and-tabs)，我们决定遵循他的第二个建议。

**在操作栏中使用选项卡导航并使用 Spinner 设置自定义视图**

与来自 ActionBarSherlock 本身的[IcsSpinner](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/src/com/actionbarsherlock/internal/widget/IcsSpinner.java)一起，我们设法使其在 Gingerbread 和 ICS 中都能正常工作。

但是，在横向模式下，我们仍然遇到以下问题。

![在此处输入图像描述](../Images/d39b4b86d3b9c581da5c7770e31875bb.png)

请注意，微调器（“投资组合 1”）位于投资组合选项卡和搜索图标之间。我们想要的是，微调器位于 WATCHLIST 选项卡的左侧。

有什么我们可以尝试的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:10:58.043

您可以为您的操作栏设置自定义视图，用户 RelativeLayout 将您的微调器放在“WATCH LiST”的左侧

在 java 代码中：actionBar.setCustomView(R.layout.custom_actionbar_layout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T06:51:32.640

一个很晚的答案，但这是可能的。您只需要（以编程方式）将指向的视图替换`android.R.id.action_bar_title`为`Spinner`. 我写了一篇关于它的博客。这是[链接](http://www.hasnath.net/blog/actionbar-tab-spinnerlist-navigation-at-the-same-time)

# jsf - 如何配置启动托管bean？

> ID：11474882
> 
> 赞同：12
> 
> 时间：2012-07-13T16:52:21.067
> 
> 标签：jsf, startup, managed-bean

我希望托管 bean 在应用程序加载时在我的 JSF Web 应用程序中启动时在内部运行。如何在 Glassfish 中编写此类并进行配置？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-13T18:52:38.257

在带有 CDI 的 JSF 中，观察[应用](https://javaee.github.io/javaee-spec/javadocs/javax/enterprise/event/Observes.html)[程序范围](https://javaee.github.io/javaee-spec/javadocs/javax/enterprise/context/ApplicationScoped.html)的[初始化](https://javaee.github.io/javaee-spec/javadocs/javax/enterprise/context/Initialized.html)。

```
@Named
@ApplicationScoped
public class App {

    public void startup(@Observes @Initialized(ApplicationScoped.class) Object context) {
        // ...
    }

    public void shutdown(@Observes @Destroyed(ApplicationScoped.class) Object context) {
        // ...
    }

} 
```

当手头有[OmniFaces](http://omnifaces.org)时，可以使用[`@Eager`](http://showcase.omnifaces.org/cdi/Eager).

```
@Named
@Eager
@ApplicationScoped
public class App {

    @PostConstruct
    public void startup() {
        // ...
    }

    @PreDestroy
    public void shutdown() {
        // ...
    }
} 
```

在 JSF 2.2 中，使用[现在已弃用](https://stackoverflow.com/questions/4347374/backing-beans-managedbean-or-cdi-beans-named) `javax.faces.bean`的注释，使用一个[应用程序范围的](https://javaee.github.io/javaee-spec/javadocs/javax/faces/bean/ApplicationScoped.html) [托管 bean](https://javaee.github.io/javaee-spec/javadocs/javax/faces/bean/ManagedBean.html)，该 bean 被[急切地](https://javaee.github.io/javaee-spec/javadocs/javax/faces/bean/ManagedBean.html#eager--)初始化。

```
@ManagedBean(eager=true)
@ApplicationScoped
public class App {

    @PostConstruct
    public void startup() {
        // ...
    }

    @PreDestroy
    public void shutdown() {
        // ...
    }
} 
```

# memory - Windows 到嵌入式端口：数据和代码内存大小

> ID：11474883
> 
> 赞同：1
> 
> 时间：2012-07-13T16:52:24.093
> 
> 标签：memory, embedded, size, porting

我正在将 Windows 7 库移植到嵌入式平台。为了做到这一点，我的雇主问我移植系统后需要多少内存（和 CPU，但现在让我们专注于内存）——这样他就可以根据我的需要调整电路板的大小。

我在互联网上看了一下，似乎没有太多关于这个问题的信息，因此我的问题是：

1.  为了粗略了解闪存中代码的内存占用量（仅代码没有内存用于数据），我在互联网上读到我应该对我使用的所有 dll 的大小求和。似乎所有编译器和平台都为代码足迹提供了不同的大小，但总体而言，代码（不含数据）的大小通常非常接近。你确认吗？

2.  为了处理仅数据所需的内存（堆+堆栈但没有代码），我查看了任务管理器（和进程资源管理器）。我使用的数据总量似乎在“峰值工作集”中指定。不过我有几个问题：

2.a. “工作集”是否包括堆+堆栈内存还是仅对应于堆？

2.b。“工作集”是否也包括代码的大小？（因为我在 Windows 7 上，代码也存储在 RAM 中，而不是像嵌入式系统那样存储在闪存中），还是只对应于数据？

2.c。似乎“峰值工作集”反映了从程序启动时实际在 RAM 中的最大物理内存量，但它没有反映程序之后可能占用的大小（如果我碰巧在运行时分配内存 -这会很糟糕；） - 峰值会继续增加）。你确认吗？

2.d。因此，您是否还确认如果我不在运行时分配内存，“峰值工作集”应该大致是我的嵌入式系统需要的最大 RAM 大小？由于系统技术的差异，最大的尺寸差异......

谢谢，

安托万。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:54:57.460

除非您打算在 Windows Embedded 上运行您的应用程序，否则查看 Windows 中的代码和数据使用情况并不能作为任何有用的指标！

1) DLL 是库 - 并非其中的所有代码都会被您的代码使用。大多数嵌入式系统都是静态链接的，链接器只会链接代码中实际引用的模块。因此，获取 DLL 依赖项的总和可能会导致对内存需求的总体高估。

2) Windows 内存管理在内存使用方面非常浪费 - 因为它可以并且这样做通常会提高典型桌面系统的性能。例如，Windows 中的线程堆栈通常为 2Mb 量级 - 您可能很少使用这么多，但 Windows 在任何情况下都会将其提供给您，因为它可以并且这样做会在安全方面犯错。嵌入式系统中的线程堆栈通常从几十字节到几十千字节不等——这取决于您的应用程序。

Windows 任务管理器显示 Windows 分配给您的进程的内容，这可能与您的进程需要的内容无关。此外，您的应用程序正在使用 Windows 服务 - 用于内核和设备服务的所有内存都不会显示为您的进程的一部分，但您的嵌入式系统可能仍然需要这些。

如果您确实使用 Windows 原型代码来评估嵌入式系统要求，那么最好的起点是让链接器生成一个映射文件，该文件将根据静态分配的数据和代码大小详细描述内存使用情况.

代码大小不仅取决于编译器的性能，还取决于指令集的效率。一些架构实现了比其他架构更高的代码密度。Windows 应用程序代码大小从来都不是嵌入式代码大小的一个很好的指标，因为它的执行环境可能会有很大的不同。例如，一个 32 位 ARM 上的抢先式多任务 RTOS 内核可以用不到 10Kb 的代码实现，一个文件系统可能需要另外 10 个，网络堆栈从 10 到 30K，USB 另一个 10。如您所见，这是一个与桌面代码不同的世界。

可能更容易确定数据内存使用情况；但是你通过分析你的应用程序而不是观察 Windows 做了什么来做到这一点。有您的应用程序直接实例化的数据，然后有您可能调用的库和设备驱动程序实例化的数据 - 在 Windows 中，后者可能相对较大并且不受您的控制。用于网络堆栈、USB、文件系统等的典型嵌入式系统库变得更小，并且在性能和大小方面更具确定性。

最好的办法是根据其一般用途、性能要求、实时约束和硬件要求（显示、网络、I/O、大容量存储等）来描述您的应用程序，然后查看可比较的解决方案或实施解决方案所需的库；大多数嵌入式系统都是“裸板”并且没有您在 Windows 中找到的服务，除非您编写它们或使用第三方解决方案 - Windows 很少是嵌入式系统的可比解决方案。

* * *

如果它只是一个库而不是应用程序，那么使用 Windows 托管的 GCC 交叉编译器为 likley 目标构建它，看看它最终有多大。你不需要硬件，甚至不需要花钱。

# c# - 从 URL 保存 GIF

> ID：11474895
> 
> 赞同：1
> 
> 时间：2012-07-13T16:53:18.103
> 
> 标签：c#, image, image-processing, bitmap, format

我想保存一个从 Internet 地址驱动的 GIF。当我从浏览器请求文件时，我收到以下字符：

```
GIF87a½€ÿÿÿ,½þ„©Ëí£œ´Ú‹³Þ¼û†âH–æ‰Ádk
ÇòòµuÏú>æùôãEX¯–Š¨²µ‚‰"<}O)Ò¨¬:kÜ'Õª]þ¢`ìc
­Ú”ìvöhe;Ï]¸;oßÂyþ|Þ‡µe§'hÄÔdhW÷§H#&gö¨ð…G™Gy(‰ x÷j†øyÙˆI8uJZZiª
™ªÚº¹i  {ç‰Zj™ˆwšµ7
©;é›9Æy¤VÄ$ú;œË›ÙÛI¬,œ=}|,l¼ÛË§¸ìæ%]h~n»8»ÌíIv—Fe6¿‹¸®0YÉ
J7k8”•pÕá C¬4Èráâ;zü2¤È‘$Kš 
```

我可以用这些字符检索 GIF 格式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T16:55:24.327

GIF 是二进制文件。您不应该将其作为字符串阅读。将 GIF 读入 a `byte[]`，然后将这些字节保存到文件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T17:01:30.187

只需这样做：

```
string url = "http://address.com/getFile?s=1234";
string filePath = @"c:\MyFolder\file.gif";

using (WebClient client = new WebClient())
{
     client.DownloadFile(url, filePath);
} 
```

并且不要忘记在开头添加：

```
using System.Net; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T06:53:02.443

谢谢你的回答。我尝试了一种方法，我发现了问题

```
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
request.Accept = "text/html, text/plain";
request.AllowAutoRedirect = true;
WebResponse response = request.GetResponse();
Stream stream = response.GetResponseStream();
StreamReader reader = new StreamReader(stream, Encoding.UTF8);
Bitmap bmp = new Bitmap(Image.FromStream(stream, true, false));
bmp.Save("image.gif"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T16:56:48.680

从我对文件格式和网络的了解来看，这些字符是 ASCII 或其他二进制编码的表示形式。您仍然可以使用[BinaryWriter.Write() 方法](http://msdn.microsoft.com/en-us/library/yzxa6408.aspx)保存它。

# c# - 如何在进程中获取使用 cmd.exe 发出的命令的响应？

> ID：11474908
> 
> 赞同：0
> 
> 时间：2012-07-13T16:54:11.960
> 
> 标签：c#, cmd

> **可能重复：**
> [命令提示符输出被读取为空字符串](https://stackoverflow.com/questions/11060019/command-prompt-output-being-read-as-empty-string)

我有一个命令行程序，它必须至少执行一次，然后我的代码才能做到这一点。所以我用`Process`它来运行它。这似乎有效。

我的问题在于我希望能够看到程序在完成时所说的内容。在某些情况下，它可能会返回错误，这需要用户干预才能继续。在纸面上，这似乎微不足道。可悲的是，我的代码（如下）似乎不起作用：

```
Process p = new Process();
ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
startInfo.CreateNoWindow = true;
startInfo.FileName = "cmd.exe";
startInfo.Arguments = String.Format("/C adb forward tcp:{0} tcp:5574",port.ToString());
startInfo.RedirectStandardOutput = true;
startInfo.UseShellExecute = false;
p.StartInfo = startInfo;
p.Start();
string adbResponse = p.StandardOutput.ReadToEnd();
p.WaitForExit();
if (adbResponse.Contains("error"))
{
    // Device not connected - complain loudly
} 
```

当我尝试在自己创建的 CMD 窗口上执行此操作时，我能够可靠地诱导包含单词错误的响应。（特别是通过拔掉某些东西。）然而，在相同的条件下，`adbResponse`字符串仍然是空的。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:58:47.997

附加控制台的进程有两个不同的输出流。你在诱捕`StandardOutput`，但你可能想被捕捉`StandardError`。请参阅此问题以获得完整的解释（以及安全捕获两者而不会死锁的代码）：

[命令提示符输出被读取为空字符串](https://stackoverflow.com/questions/11060019/command-prompt-output-being-read-as-empty-string/11060051#11060051)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:00:52.190

尝试这样的事情：

```
p.StartInfo.RedirectStandardOutput = true;
//p.WaitForExit();
StringBuilder value = new StringBuilder();
while ( ! p.HasExited ) {
    value.Append(p.StandardOutput.ReadToEnd());
}
string result = value.ToString(); 
```

# java - 无法覆盖 Java 中的隐藏文件。当我尝试使用我的代码时，我得到 java.io.FileNotFoundException（访问被拒绝）

> ID：11474912
> 
> 赞同：0
> 
> 时间：2012-07-13T16:54:30.167
> 
> 标签：java, file, java-io

```
 private static boolean replaceUserPassword(String lineToBeReplaced, String replacementLine) {     
   try
    {
    File file = new File(defaultPath);
    Runtime.getRuntime().exec("attrib -H " + file.getCanonicalPath());
    System.out.println(file.isHidden());

    BufferedReader reader = new BufferedReader(new FileReader(file));
    String line = "", oldtext = "";
    while((line = reader.readLine()) != null)
        {
        oldtext += line + "\r\n";
        }
    reader.close();

    //To replaces line in defaultPath file
    String newtext = oldtext.replaceAll(lineToBeReplaced, replacementLine);

    file.setWritable(true);
    if(file.canWrite()){
        System.out.println("writing");
        FileWriter writer = new FileWriter(defaultPath, false);
        writer.write(newtext);
        writer.close();
    }

    Runtime.getRuntime().exec("attrib +H " + file.getCanonicalPath());

  }
catch (IOException ioe)
  {
    ioe.printStackTrace();
    return false;
  }
    return true; 
```

}

我没有在任何其他窗口中打开该文件，当我取消隐藏原始文件夹中的文件时，该过程有效。感谢您对未来的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:26:01.157

除非设置为取消隐藏，否则您无法获得隐藏文件的规范路径。因此是抛出的错误。

改变 ：

```
File file = new File(defaultPath);
Runtime.getRuntime().exec("attrib -H " + file.getCanonicalPath());
System.out.println(file.isHidden()); 
```

至 ：

```
Runtime.getRuntime().exec( "attrib -H " + defaultCanonicalPath );
// OR
// Runtime.getRuntime().exec( "attrib -H " + defaultPath );
File file = new File( defaultPath );
System.out.println( file.isHidden() ); 
```

而且，它应该可以工作。

# java - 一个线程不停止其他线程。即使有 volatile 变量

> ID：11474913
> 
> 赞同：0
> 
> 时间：2012-07-13T16:54:31.243
> 
> 标签：java, multithreading, volatile

我正在测试一个场景以使用 volatile 变量来停止一个正在运行的线程。我想知道为什么它不起作用。哪里有问题？我的代码是：

```
public class StoppableTask extends Thread {
    private  volatile boolean pleaseStop;

    public void run() {
       System.out.println("Running..");
       while (!pleaseStop) {
           System.out.println("Working...");
       }
    }
    public void tellMeToStop() {
        pleaseStop = true;
    }
}

public class Stopper extends Thread {
    StoppableTask t ; 

    public Stopper(StoppableTask t){
        this.t=t;
    }
    public void run(){
        System.out.println("Ok..running too..");
        try {
            System.out.println("Waiting..");
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        t.tellMeToStop();
        System.out.println("Done Waiting..");
    }

    public class QuickTest{

        public static void main(String[] args) {
        StoppableTask t = new StoppableTask();
        Stopper s = new Stopper(t);
        t.start();
        s.start();

    }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:05:11.670

我怀疑您的程序正在向终端打印太多输出，以至于它阻塞等待输出显示。看起来它不会停止，但实际上它会。你只需要等待......很*长一段*时间......

您应该将旋转循环的`Thread.sleep(100);`内部放入以减慢该输出。另一种方法是删除并增加一个计数器或其他东西。`while()``StoppableTask.run()``System.out`

我刚刚尝试过，您的程序按预期在 5 秒内完成：

```
public void run() {
    System.out.println("Running..");
    while (!pleaseStop) {
        // System.out.println("Working...");
    }
    System.out.println("Stopped task Done");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:35:40.890

你的程序是正确的。使用线程时，我建议您使用 log4j 而不是 system.out.println。配置 log4j 以将输出发送到文件。

您可以在文件中搜索您的字符串模式。它易于分析。

# java - 单例早期初始化、静态字段初始化和类加载

> ID：11474914
> 
> 赞同：4
> 
> 时间：2012-07-13T16:54:33.617
> 
> 标签：java

考虑这段代码：

```
class MyClass {
    private static MyClass myobj = new MyClass();

    private MyClass() {
    }

    public  static MyClass getMyobj() {
        return myobj;
    }
} 
```

1）IN上面的代码什么时候`myobj`初始化——什么时候`Myclass`被加载或者什么时候`getMyobj()`第一次被调用`MyClass.getMyobj();`？

2）假设我们调用两次：

```
MyClass.getMyobj();
MyClass.getMyobj(); 
```

`MyClass()`它会在第二次调用时创建新对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:56:32.817

1.  何时加载您的课程

2.  不，它不会创建另一个对象，它会使用已经存在的对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:06:56.307

正如已经指出的，该对象将在类初始化时创建，并且由于该方法只是返回它，因此在示例代码中不会创建其他此类实例。

但是，如果您想做这样的事情，您也可以`enum`使用单个实例创建一个：

```
public enum MyClass {
   myobj;
} 
```

然后需要使用的代码`myobj`可以简单地访问该`MyClass.myobj`字段，而代码本身保留单例行为。当然，类似的效果可以用场来实现`public static final`。

枚举的好处是编译器知道您不想意外创建任意对象。它的缺点是，如果您想要延迟初始化，则需要为延迟加载的部分引入一个额外的委托。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:56:38.517

> 1）在上面的代码中，myobj什么时候会被初始化

首次加载类时。

> 2）假设我们调用两次：...它会在第二次调用时创建新的 MyClass() 对象吗？

不，主要是因为`myobj`它是静态的，所以`getMyobj()`总是会返回相同的实例，即在加载时创建的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T16:56:58.250

1.  当 MyClass 被加载时。

2.  即使你调用它十次，MyClass 也只存在一个实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T12:32:35.930

说一个类在加载后就被初始化是不正确的。只有在运行程序创建该类的实例（通过使用 new 关键字调用其构造函数）或使用属于该类的任何静态方法或字段时，才会初始化一个类。

有关初始化的 JVM 规则，请参阅[Java 语言规范第 12.4.1 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1)

我应该指出，我之所以知道这一点，要归功于 Joshua Bloch 的优秀著作“Effective Java, Second Edition”。Item 71 提供了关于惰性初始化和“惰性初始化持有者类习语”的建议。

因此，在回答您的问题时，`MyClass.myobj`只会在正在运行的程序（例如您的`main()`方法）实际调用`MyClass.getMyobj()`而不是在那之前的时刻进行初始化。

并且因为静态字段每个类只初始化一次，所以下一次`MyClass.getMyobj()`调用时，它将简单地返回现有的值`MyClass.myobj`，因此您将获得对完全相同的 MyClass 对象的两个引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T16:58:34.190

一旦 MyClass 被加载，它就会被初始化。但它只会初始化一次。

# wxwidgets - 在不干扰滚动位置的情况下更新 wxTextCtrl

> ID：11474917
> 
> 赞同：0
> 
> 时间：2012-07-13T16:54:57.290
> 
> 标签：wxwidgets

我有一个静态多行 wxTextCtrl。内容的行数超过了窗口可以显示的行数，因此它会滚动。当我的程序更新特定行的内容时，滚动会移动，因此更新可见。这对于可能一直在检查另一条线路的用户来说是令人不安的。

```
// k is line to update
// update is new line contents

        myTxtCtrl->Replace(
            myTxtCtrl->XYToPosition(0,k),
            myTxtCtrl->XYToPosition(0,k+1),
            update + L"\n");

// the control has now scrolled to ensure line k is visible 
```

如何禁用此行为，或强制控件在更新到显示的先前可见部分后返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:10:12.353

或许做不到？似乎它只能通过相当大的麻烦来完成。更改为使用 wxListCtrl 可能更容易，它的项目可以轻松更改而不会干扰滚动位置。

这就是我所做的

```
 myListCtrl->SetItem(k,0,update); 
```

# java - Android BroadcastReceiver 再执行两次

> ID：11474919
> 
> 赞同：0
> 
> 时间：2012-07-13T16:55:06.093
> 
> 标签：java, android, bluetooth, broadcastreceiver

所以我有 2 个相同类别的蓝牙 GATT 服务器对象。它们每个都有一个 IntentFilter 和 BroadcastReceiver。当对象从蓝牙服务器接收数据时，它会在 BroadcastReceiver 中执行特定的功能。

不幸的是，如果我发送两个请求（每个对象一个），响应会执行四次。据我了解，由于第一个请求的响应在两个对象的 BroadcastReceiver 中执行，然后来自第二个对象请求的响应再次在两个对象中执行。

如何指定 BroadcastReceiver 仅在请求来自的对象中执行代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:07:34.513

如果对`sendBroadcast()`和的调用`BroadcastReceiver`都在同一个对象内，我不得不怀疑使用广播是否真的是一种好方法（但没有代码，这是一个假设）。

但是，要直接回答您的问题，您必须使用 an 的可过滤参数之一`Intent`来区分两者。例如，如果它们具有相同的操作，`Uri`请在数据字段中设置不同的，或者为每个对象设置不同的 MIME 类型参数。然后，当您注册接收器时，您`IntentFilter`将这些特定参数从对象应用到过滤器。

# ivy - ivysettings.xml：我可以在不修改 jar 或完全替换它们的情况下“修改”默认设置吗？

> ID：11474926
> 
> 赞同：7
> 
> 时间：2012-07-13T16:55:35.353
> 
> 标签：ivy

我一直在浏览 Ivy 文档，并且`ivysettings.xml`对 ivy.jar 中的默认设置有疑问。

我要做的就是将公共存储库更改为我们拥有的本地 Maven 存储库。就是这样。我可以将所有`ivysettings*.xml`文件复制到我的项目中，并使用`<ivy:settings>`来指向它，但这会重复很多东西。我也可以修改`ivy.jar`，但这增加了维护的麻烦。开发者必须使用我的`ivy.jar`，如果我们去一个新版本，我必须再次修改它。

那么，如何保留所有标准的 Ivy 设置并简单地切换存储库以使用？我只是想将我的更改*覆盖*到 Ivy 已经拥有的内容上。

* * *

还有两个问题：

*   `ivyconf*.xml`文件和文件有什么区别`ivysettings*.xml`？为什么常春藤中有重复的配置？
*   什么是关于常春藤的好书？我现在正在使用 Manning 的*Ant in Action*，它以某种概括的方式涵盖了 Ivy，并且有点过时了。常春藤网站本身的*资源很糟糕。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T20:12:12.310

那是我的 ivysettings.xml 文件

```
<ivysettings>
    <include url="${ivy.default.settings.dir}/ivysettings.xml"/>
    <resolvers>
        <chain name="download-chain" changingPattern=".*" checkmodified="true" >
            <ibiblio name="maven" m2compatible="true" />
        </chain>
    </resolvers>
</ivysettings> 
```

请注意，我在这里编写了额外的解析器，但使用了标准解析器中的所有其他解析器，这在 url 中指示。这将从 ivy.jar 文件中的 ivysettings.xml 加载设置。

至于 ivyconf*.xml。我认为它现在已被弃用。Ivysettings 是这样做的新方法。

资源实在是太惨了。我完全同意这一点。但是，stackoverflow.com 中的许多答案都足够冗长，并且实际上试图预测问题

Mark O'Connor 的回答特别冗长，直截了当。你必须接受这样一个事实，即你正在学习新东西，只要给它时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:17:52.997

终于想通了。

我从 jar 中复制了 ivysettings.xml 文件并稍作修改。请注意，第一个*包含*指向常春藤中的 XML 文件，`${ivy.lib.dir}`而不是指向`${ivy.default.settings.dir}`：

```
<ivysettings>
<settings defaultResolver="default"/>
    <include file="${ivy.lib.dir}/ivysettings-public.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-shared.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-local.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-main-chain.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-default-chain.xml"/>
</ivysettings> 
```

我有我自己的`ivysettings-public.xml`，它与默认值相同，但现在定义了一个`root`到我的存储库。（是的，它现在是 localhost，但是一旦我解决了所有问题，我会将其设置为实际服务器）：

```
<ivysettings>
    <resolvers>
        <ibiblio name="public" m2compatible="true" 
              root="http://localhost:8081/artifactory/repo" />
    </resolvers>
</ivysettings> 
```

现在，在我的 中`build.xml`，我有以下内容：

```
<property name="ivy.lib.dir"        value="${basedir}/ivy.lib"/>

<taskdef uri="ivylib:org.apache.ivy.ant"
    resource="org/apache/ivy/ant/antlib.xml">
    <classpath>
        <fileset dir="${ivy.lib.dir}">
            <include name="ivy.jar"/>
            <include name="ivy-*.jar"/>
        </fileset>
    </classpath>
</taskdef>

<ivy:configure file="${ivy.lib.dir}/ivysettings.xml" override="true"/> 
```

这似乎可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T03:09:02.070

在您的 build.xml 中包括以下内容：

```
<property name="ivy.settings.dir" value="PATH OF SETTINGS" />
<property file="${ivy.settings.dir}/ivysettings.properties" />
<ivy:settings file="${ivy.settings.dir}/ivysettings.xml" /> 
```

# php - MySQL 选择没有关联条目的条目（在另一个表中）

> ID：11474927
> 
> 赞同：1
> 
> 时间：2012-07-13T16:55:53.007
> 
> 标签：php, mysql, sql, search

我正在为一家公司制作一个定制的在线管理应用程序，用户可以在其中管理客户、产品、组件、提供商等。现在我正在制作一个搜索表单，用户可以在其中使用关键字和各种选项搜索客户。现在，对于关键字搜索，我知道如何使用 MySQL FullText，问题更多与额外的搜索选项有关。

所以基本上，每个客户都可以分配到一个或多个类别。客户也可能不会被分配到任何类别。为此，我使用了三个表：

*   “clients”表，保存着客户的基本信息，如姓名、联系方式等。每个客户都有一个唯一的ID
*   "categories" 表，它只包含 ID、标题和描述字段
*   “categories_assign”表，它只有两个字段，“clientId”和“categoryId”。它允许我为客户分配多个类别。

现在，在搜索表单中，用户可以选择要搜索的类别；可以一次选择多个类别，以及“无”值，它应该搜索没有类别的客户。没有任何类别的客户在“categories_assign”表中基本上没有任何条目。

那是我的问题：我在搜索分配给特定类别的客户时没有问题，但我找不到在没有类别的情况下搜索客户的方法..

这是根据所选类别选择客户端的查询的简化版本（出于可读性目的）：

```
SELECT * FROM clients c, categories_assign a WHERE c.id = a.clientId AND a.categoryId IN(1,7,43,52) 
```

如您所料，此选择的客户端分配给类别 ID 1、7、43 或 52。这确实工作正常。但是，正如我之前所说，我无法找到一种方法来选择没有类别的客户，即。在“categories_assign”表中没有任何条目的客户端。我也希望能够同时选择特定的类别。（例如，搜索类别 ID 1、7、43、52 和没有类别的客户）。我尝试使用连接，但没有运气。

我能想到的唯一解决方法是在“categories_assign”表中创建一个条目，其中“categoryId”设置为0，意思是“无类别”，所以我只需要搜索“categoryId”0。我想避免这样做的需要，如果可能的话。

有人有任何线索吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:20:07.750

```
SELECT DISTINCT c.*
FROM clients c
LEFT JOIN categories_assign a ON c.id = a.clientId
WHERE a.id IS NULL
OR a.categoryId IN (1, 7, 43, 52) 
```

`a.id IS NULL`得到那些没有类别分配的人。`a.categoryId IN (...)`获取分配给这些类别的那些。

如果您编写查询只是为了获取未分类的记录，则不需要该`DISTINCT`子句。这只是为了消除由于客户可能被分配到您正在寻找的多个类别而产生的重复记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:18:26.280

```
SELECT * FROM clients c 
WHERE c.id NOT IN (SELECT DISTINCT a.clientID FROM categories_assign a) 
```

这将返回未出现在 categories_assign 表中的所有客户。如果您还想同时搜索具有类别的客户，只需`UNION`此查询和您的查询。

# ruby-on-rails - 如何创建多个 mongoDB 数据库并在 heroku 上共享？

> ID：11474929
> 
> 赞同：0
> 
> 时间：2012-07-13T16:55:57.200
> 
> 标签：ruby-on-rails, mongodb, heroku, database-connection, mongohq

我已经进入控制台并运行了“heroku addons:add mongohq:free”，它添加了一个环境变量：ENV['MONGOHQ_URL']。这是一个如下所示的网址：

> mongodb://heroku:xxxxxxxxxxxxxxxxxxxxxxxxxxx@staff.mongohq.com:10059/appxxxxxx

我希望能够使用（和共享）两个 mongodb 实例。在同一个应用程序上运行 addons:add mongohq:free 失败，表明该插件已经存在。

我是否必须创建一个单独的空白应用程序并只使用其中的 ENV 变量？

最后，是否可以在应用程序之间共享这些 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:22:05.073

要拥有多个 Mongo 实例，您可以： * 在 MongoHQ 或其他提供商上创建另一个帐户 * 创建您自己的服务器并在其上安装 mongo 并使用身份验证和多个数据库

然后，您需要为尽可能多的 mongo DB 添加环境变量。

然后，您的应用程序需要知道要连接到哪个 MongoDB，无论在哪种情况下都适用于您的应用程序。

注意：您可以用上面的 Postgres 或 MySQL 替换 Mongo，其过程完全相同。

是的，您可以在应用程序之间共享这些 - 只需将环境变量设置为匹配，您就可以开始了。

# asp.net-mvc - 如何在 MVC4 中将字节 [] 显示为图片

> ID：11474931
> 
> 赞同：4
> 
> 时间：2012-07-13T16:56:10.163
> 
> 标签：asp.net-mvc, image

我有一个包含 Byte[] 类型属性的模型。我想在 html 标签的 MVC 视图中显示这个属性。我可以用什么方法来显示这个图像？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T07:41:05.730

这是我在项目中需要做的：对于我的对象集合的每个实例，我在 Razor View 中的标签下方

```
<img src="@Url.Action("GetPhoto", new { photoId = Model.PhotoId })" /> 
```

然后在控制器中我添加了一个动作：

```
public ActionResult GetPhoto(int photoId)
{
    byte[] photo = GetPhotoFromDb(photoId);
    return File(photo, "image/jpeg"); } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T17:01:14.250

在您的控制器上创建一个操作以返回文件响应：

```
public class MyController : Controller
{
    public ActionResult ViewFile()
    {
        byte[] bytes;
        string mime;

        return File(bytes, mime);
    }
} 
```

然后，您可以像这样显示图像：

```
<img src="/mycontroller/viewfile" /> 
```

编辑：一个详细的例子：

```
public class Photo
{
    public int ID {get;set;}
    public string Title {get;set;}
}

public class PhotoController : Controller
{
    public ActionResult Index()
    {
        return View(new List<Photo> { new Photo { ID = 1, Title = "first" }, new Photo { ID = 2, Title = "second" }});
    }
    public ActionResult Photo(int ID)
    {
        return File(GetPhotoBytes(ID), "image/jpg");
    }
} 
```

看法：

```
@model IEnumerable<Photo>
@foreach (var photo in Model)
{   
    <img src="@Url.Action("photo", "photo", new { ID = photo.ID })" title="@photo.Title" /> 
} 
```

# dependency-injection - 如何配置一个新的 IDataBus 实现，它具有需要注入 NServiceBus 的依赖项？

> ID：11474939
> 
> 赞同：2
> 
> 时间：2012-07-13T16:56:43.533
> 
> 标签：dependency-injection, nservicebus

我想将默认`IDataBus`实现（写入文件系统）替换为写入数据库的实现（以便它可以在 AWS 上运行）。为此，我有一个配置扩展：

```
public static class ConfigureSqlServerDataBus
{
    public static Configure SqlServerDataBus(this Configure config)
    {
        var dataBus = new SqlServerDataBus();
        config.Configurer.RegisterSingleton<IDataBus>(dataBus);
        return config;
    }
} 
```

允许我配置总线。但显然我`SqlServerDataBus`依赖于告诉它在哪里写的东西（`IRepository`在这种情况下是一个实现）。

通常我会通过构造函数请求依赖关系，但是由于服务总线的配置是通过`IWantCustomInitialization`将用于`Activator`创建实例的我完成的，所以我不能。我的理解是 NServiceBus 将使用属性注入来满足依赖关系，但它似乎没有这样做。配置完成后，我有几个这样的电话：

```
Configure
.With()
.DefineEndpointName("SomeName")
.DefaultBuilder()
.DBSubcriptionStorage()
.XmlSerializer()
.SqlServerDataBus()
.MsmqTransport()
    .IsTransactional(true)
.UnicastBus()
.LoadMessageHandlers()
.CreateBus()
.Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install());

Configure.Instance.Configurer.ConfigureComponent<RepositoryImplementation>(ComponentCallModelEnum.None);
Configure.Instance.Configurer.ConfigureComponent<SqlServerDataBus>(ComponentCallModelEnum.None); 
```

但是我的 setter`SqlServerDataBus`永远不会被调用，尽管 Put 方法是。

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T19:32:38.540

总线启动后，您无法更改配置。要将配置调用移动到流畅的初始化代码中，请使用 RunCustomAction 方法。

或者，您可以编写一个实现 INeedInitialization 的新类并在其中进行配置调用。这个类将在正确的时间被调用。

# c#-2.0 - 约束不能是特殊类“System.Object”

> ID：11474948
> 
> 赞同：7
> 
> 时间：2012-07-13T16:57:23.363
> 
> 标签：c#-2.0

我的函数要求您将一个字符串和一个类型作为 T 传递给它。基于 T 我想将字符串 val 解析为该类型，但我从这个问题的标题中得到了错误。任何有任何见解或其他方法来完成此功能的人，我将不胜感激。

```
T Parse<T>(string val) where T : System.Object
    {
        TypeCode code = Type.GetTypeCode(typeof(T));
        switch (code)
        {
            case TypeCode.Boolean:
                return System.Boolean.Parse(val);
                break;
            case TypeCode.Int32:
                return Int32.Parse(val);
                break;
            case TypeCode.Double:
                return Double.Parse(val);
                break;
            case TypeCode.String:
                return (string)val;
                break;
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-13T17:00:32.987

只需删除`where T : System.Object`.

通过说明：

```
where T : System.Object 
```

您是说`T`方法中可用的类型`Parse`必须从对象继承。
但是，由于 C# 中的每个对象都继承自`System.Object`您不需要该约束（这可能是编译器不允许这样做的原因之一）。

此外，由于您正在返回`null`，您应该将类​​型限制`T`为引用类型，因此：

```
where T: class 
```

但是通过这种方式，您不能返回布尔值、整数或任何值类型。

但是，您的代码基本上模仿了 的功能`Convert.ChangeType`，唯一的区别是您使用泛型返回正确的类型而不是对象，但基本上等于：

```
T Parse<T>(string val)
{
    return (T)Convert.ChangeType(val,typeof(T));
} 
```

# asp.net - 谷歌地图/iframe 动态 src 元素

> ID：11474952
> 
> 赞同：0
> 
> 时间：2012-07-13T16:57:31.460
> 
> 标签：asp.net, vb.net, iframe, src, google-maps-api-2

好的，所以我的问题是我有一个用于显示 googlemaps 的 iframe

iframe 的 src 将设置为使用从数据库中读取的地址作为位置插入到 googlemaps

目前框架只是纯白色，甚至没有出现图片，但是如果将 src 路径放入浏览器 URL 中它工作正常，我拥有的测试 url 是“http://maps.google.com/maps/api /staticmap?markers=27+Landseer+Street,+Belfast&size=500x300&sensor=false"

这是有效的，因为您将看到如果您输入地址栏。

我的目标是让三个框架都单独命名，然后在它们上设置 src。到目前为止，这是我的代码

VB.NET公共类关于继承System.Web.UI.Page

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Session("recentAddressmap1") = ""
    Session("recentAddressmap2") = ""
    Session("recentAddressmap3") = ""
    Session("src1") = ""
    Session("src2") = ""
    Session("src3") = ""
    Dim recentCount As Integer
    recentCount = 0
    Dim addresstest As String = "27 Landseer Street"
    Dim words As String() = addresstest.Split(New Char() {" "c})

    ' Use For Each loop over words and display them
    Dim word As String
    Dim newaddress As String = ""
    Dim loopcounter As Integer = 0
    For Each word In words
        If loopcounter = 0 Then
            newaddress = word
            loopcounter = loopcounter + 1
        Else
            newaddress = newaddress & "+" & word
        End If
    Next
    '''''''''''''''''''''''''''''''''''''''''' DO ENTRY RECENT 1 '''''''''''''''''''''''''''''''''''''''''''''''''''
    Session("recentAddressmap1") = newaddress & ",Belfast"
    Session("src1") = "http://maps.google.com/maps/api/staticmap?markers=" & Session("recentAddressmap1") & "&size=500x300&sensor=false"
    'MsgBox(Session("src1"))
    visualAddress1.Attributes.Add("src", Session("src1"))
End Sub 
```

结束类

ASPX

```
<%@ Page Title="About Us" Language="vb" MasterPageFile="~/Site.Master" AutoEventWireup="false"
CodeBehind="About.aspx.vb" Inherits="email_tester.About" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
               <iframe width="425" height="350" scrolling="no" marginheight="0" marginwidth="0" id="visualAddress1" runat="server"></iframe>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:11:03.423

给 iframe 一个 ID + runat=server 然后从 VB 设置 src 怎么样？

# c# - 在 C# 中从 Windows 在 Ubuntu 上创建用户

> ID：11474957
> 
> 赞同：-2
> 
> 时间：2012-07-13T16:57:43.800
> 
> 标签：c#, networking, ubuntu

我已经被问过[这个问题](https://stackoverflow.com/questions/11363871/how-to-create-a-user-on-ubuntu-machine-from-a-c-sharp-program)，但是我被告知，我需要在不使用 ssh 客户端的情况下创建一个程序。我怎么说我只需要使用不同的 .dll 编写纯 C# 程序。而且我不知道我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:23:03.297

如果你想实现一个合适的解决方案，你想使用[OpenLDAP](http://www.ibm.com/developerworks/linux/library/l-openldap/)。

然后，您可以使用 C# 查询 LDAP 数据库并使用它来远程创建帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:03:13.927

我不认为它可以做到，因为您想获得对 linux 系统的远程访问权限，您需要使用 ssh 来获得对命令行的访问权限以使您的用户。查看 ssh 有一些很好的 windows 客户端允许您进行此访问，我相信我不久前找到了一些关于如何制作 ssh 程序的教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T17:18:16.347

因此，既然您不能使用 ssh，那么是时候发挥创意了！我假设你有管理员权限。如果你不知道，请告诉我。

在 Ubuntu 机器上设置一个数据库（MySQL），并使用要创建的新用户创建一个 db/table。您可以将 C# 中的一行插入到该表中。

设置一个 cron 作业，或其他一些应用程序（在 python、c++、w/e 中），它们会定期检查该表中的新行。如果找到，则提取数据，根据该数据创建用户，然后删除该行。这必须以root身份运行，所以要小心！

我以前做过这样的事情，它很混乱而且令人费解，但我想它确实有效。

# iphone - iPhone：如何“取消”我的 xmlparser 解析目标 c？

> ID：11474959
> 
> 赞同：0
> 
> 时间：2012-07-13T16:57:49.287
> 
> 标签：iphone, ipad, ios5, xml-parsing, nsxmlparser

在我的

```
- (void)parser:(NSXMLParser *)parser
        didStartElement:(NSString *)elementName
           namespaceURI:(NSString *)namespaceURI
          qualifiedName:(NSString *)qualifiedName
             attributes:(NSDictionary *)attributeDict {
          // ...
} 
```

我检查我的 XML 属性之一是否等于我存储在 plist 中的值。如果不是，那么我希望它正常执行并获取最新信息。如果它是相同的值，但我不想浪费再次获取所有数据的处理时间。因此，如果我有如下代码，如果值相同，我该如何终止解析过程？

```
if (lastUpdated == [attributeDict valueForKey:@"last_updated"]) {
     // Terminate the xml parsing because data is up to date
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:05:04.450

您可以使用`[parser abortParsing]`，但请注意，这适用于 XML 错误，而不是“我不想要此数据”的情况，并且`parser:parseErrorOcurred:`根据我的经验，可能会导致您的方法被调用几次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:06:47.553

调用 [parser abortParsing] 从当前点取消解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:48:01.747

请注意，iOS 6.0 中有一个错误，abortParsing 将取消解析器，但不会调用 parser:parseErrorOccurred 并且不会设置“parserError”。

# java - 将 CSV 转换为设置 在爪哇

> ID：11474960
> 
> 赞同：4
> 
> 时间：2012-07-13T16:58:00.187
> 
> 标签：java, tokenize

我在 Java 中有一个逗号分隔值字符串：

```
String s = "a,b,c,d"; 
```

我需要对其进行标记（以逗号作为分隔符）并将其转换为`Set<String>`. 是`StringTokenizer`我最好的选择还是有更有效的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T17:06:48.207

如果您尝试解决一般的 CSV 解析设置，请注意要处理引号和逗号转义。这就是存在像[OpenCSV](http://opencsv.sourceforge.net/)这样的库的原因。否则，您只需要按照 hvgotcodes 所述进行操作即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T17:01:01.827

试试 String.split()，这可能是最简单的。

```
 String[] a = "a,b,c,d".split( "," );
    Set<String> s = new HashSet( Arrays.asList( a ) ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T17:03:13.540

虽然`StringTokenizer`拆分输入字符串是一个不错的选择，但我个人更喜欢使用`String.split()`.

```
String[] tokens = myString.split(",");
Set<String> set = new HashSet<String>(Arrays.asList(tokens)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T17:01:29.190

我会用`split`. `split`给你一个数组，所以

`String[] toks = s.split(",")`

进而

`Set<String> mySet = new HashSet<String>(Arrays.asList(toks));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T17:12:44.440

[Spring 框架](http://www.springsource.org/spring-framework/)提供的[`StringUtils.commaDelimitedListToSet`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/util/StringUtils.html#commaDelimitedListToSet%28java.lang.String%29)正是您所追求的。仅仅为此而引入 Spring 可能有点过头了，但是如果您在一个已经包含它的框架中工作，那么这是一个需要注意的选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T17:21:11.443

如果您只需要一个没有所有 CSV 规则的简单解决方案，我会推荐[`StringUtils.split`](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringUtils.html#split%28java.lang.String,%20char%29)（而不是`String.split`由于正则表达式开销）：

```
HashSet<String> set = new HashSet<String>(Arrays.asList(StringUtils.split(text, ','))); 
```

如果您需要遵守 CSV 规则的解决方案，您应该考虑使用[Commons CSV](http://commons.apache.org/csv/)

# visual-studio - 在 Visual Studio 中删除可执行文件？

> ID：11474962
> 
> 赞同：1
> 
> 时间：2012-07-13T16:58:06.463
> 
> 标签：visual-studio

在将 Visual Studio 解决方案压缩并邮寄给合作者之前，我会删除可执行文件和 .dll 文件以防止邮件被退回。我目前手动执行此操作，但这不是很有效，因为我的解决方案可能包含许多项目。此外，我有时会删除错误的文件，包括一些 .cs 文件。

有没有办法从 Visual Studio 环境中删除所有 .dll 和 .exe 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:00:04.320

只需做一个干净的构建：

```
Build -> Clean Solution 
```

# ruby-on-rails - 如何在 Rails 3 中创建网站表单域？

> ID：11474964
> 
> 赞同：0
> 
> 时间：2012-07-13T16:58:13.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我有一个表单，我希望能够在表单字段中输入一个网址，例如“google.com”，并能够在提交表单的显示视图中单击此链接。

我怎样才能做到这一点？

**显示.html.erb**

```
<p>
  <strong>Website:</strong>
  <%= link_to @video.website, @video.website %>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:00:22.720

脚手架将为您处理这个问题。我建议阅读 Rails 指南，尤其是这个： http: [//guides.rubyonrails.org/generators.html](http://guides.rubyonrails.org/generators.html)

更具体地说，您可以生成一个具有如下属性的模型`url`：

```
rails generate scaffold Thing url:string 
```

然后运行你的迁移：

```
rake db:migrate 
```

您最终应该`app/views/thing/`在`app/controllers/thing_controller.rb`. 那应该让你上路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:02:43.063

脚手架会像 Jason Swett 所说的那样处理它。如果您希望将其放在 show 中的链接中，请执行以下操作：

```
 <%=link_to @link.name, "http://"+@link.url%> 
```

如果这不起作用，你总是可以这样做：

```
 <a href="http://<%= @link.url%>"><%=@link.name%></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:02:08.173

如果您有一个具有类似属性的模型`web_address`，您可以执行以下操作：

```
= text_field_tag, "web_address", "" 
```

（对 form_tag 使用 HAML 语法和标签）

然后在你的节目中你可以这样做：

```
= link_to model.web_address, model.web_address 
```

这将建立一个链接，如：[http ://www.google.ca](http://www.google.ca)

# django - 多种获取方法 Python google app engine

> ID：11474966
> 
> 赞同：1
> 
> 时间：2012-07-13T16:58:18.307
> 
> 标签：django, google-app-engine, rest, get

python中的一个类中是否可以有多个GET？

我试过这个：

```
import webapp2

class MainPage(webapp2.RequestHandler ):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write("test")

    def get(self, name, surname):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write('N: %s S: %s' % (name , surname))   

app = webapp2.WSGIApplication([('/.*', MainPage)],
                              debug=True) 
```

但不起作用。

我该怎么做？处理两个不同路径的两个不同文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T17:02:45.393

*在任何*Python 类中，不能有两个方法命名相同。

相反，您应该定义两个不同的类，然后使用不同的 URL 模式匹配来选择使用哪个，而不是将所有内容 ( `/.*`) 发送到单个类。

这是一个（非常）基本的例子：

```
class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write("test")

class NamePage(webapp2.RequestHandler):
    def get(self, name, surname):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write('N: %s S: %s' % (name , surname))   

app = webapp2.WSGIApplication([
        ('/(.+)/(.+)', NamePage), # Matches /foo/bar
        ('/.*', MainPage), # Matches everything else
    ], debug=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-08T13:06:30.927

您在这里尝试尝试的是超载。一个更微妙的方法而不是创建类可以如下：

```
import webapp2

class MainPage(webapp2.RequestHandler ):

    def get(self, name="default_name", surname="default_surname"):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write('N: %s S: %s' % (name , surname))   

app = webapp2.WSGIApplication([('/.*', MainPage)],debug=True) 
```

这里 name 和 surname 是可选的关键字参数（它们是您问题中的位置参数）。我希望它有帮助

# java - 将 userInput 添加到 EmployeeStore

> ID：11474969
> 
> 赞同：0
> 
> 时间：2012-07-13T16:58:28.417
> 
> 标签：java, hashmap, add

我创建了一个 EmployeeStore 来存储员工的详细信息，例如姓名、ID 和电子邮件。我设置了一个菜单，现在每当用户想要添加员工时，我都会陷入困境。这是我的代码：

```
MenuMethods:
//Imports
import java.util.Scanner;
//********************************************************************

public class MenuMethods 
{
    private static Scanner keyboard = new Scanner(System.in);

    //Methods for the Company Application menu.
    //Method for validating the choice.
         public static int getMenuChoice(String menuString, int limit, String prompt, String errorMessage) 
         {
                System.out.println(menuString);
                int choice = inputAndValidateInt(1, limit, prompt, errorMessage);
                return choice;
         }
    //********************************************************************
    //This method is used in the getMenuChoice method.
            public static int inputAndValidateInt(int min, int max, String prompt, String errorMessage) 
            {
                int number;
                boolean valid;
                do {
                    System.out.print(prompt);
                    number = keyboard.nextInt();
                    valid = number <= max && number >= min;
                    if (!valid) {
                        System.out.println(errorMessage);
                    }
                } while (!valid);
                return number;
            }
    //********************************************************************
    public void userInput()
    {

    }
    //********************************************************************

} 
```

添加方法：

```
//Add to the Hashmap : Employee.
    public void add(Employee employee)
    {

        map.put(employee.getEmployeeName(), employee);
    }
//******************************************************************** 
```

主应用程序：

```
//Imports.
import java.util.Scanner;
//********************************************************************  
public class MainApp
{
    //The Scanner is declared here for use throughout the whole MainApp.
    private static Scanner keyboard = new Scanner(System.in);

    public static void main(String[] args)
    {
        new MainApp().start();

    }
    public void start()
    {
//Create a Store named Store and add Employee's to the Store.
        EmployeeStore Store = new EmployeeStore();
        Store.add(new Employee ("James O' Carroll", 18,"hotmail.com"));

        Store.add(new Employee ("Andy Carroll", 1171,"yahoo.com"));

        Store.add(new Employee ("Luis Suarez", 7,"gmail.com"));
//********************************************************************      

/*Test Code.
        Store.searchByName("James O' Carroll");
        Store.print();
        Store.searchByEmail("gmail.com");
        Employee andy = Store.searchByEmail("hotmail.com");
        System.out.println(andy);
        Employee employee = Store.searchByName("James O' Carroll");
        if (employee != null)
        {
            employee.setEmployeeName("Joe");
            employee.setEmployeeId(1);
            employee.setEmployeeEmail("webmail.com");
           Store.edit(employee);
           Store.print();
        }*/
//********************************************************************      

        int choice ;
        System.out.println("Welcome to the Company Database.");
        do
        {
         choice = MenuMethods.getMenuChoice(
                "1.\tView All" +
                "\n2.\tAdd" +
                "\n3.\tDelete" +
                "\n4.\tDelete All " +
                "\n5.\tEdit" +
                "\n6.\tSearch" +
                "\n7.\tPrint"+
                "\n8.\tExit", 8, "Please enter your choice:", "Error [1,8] Only");
         //String temp = keyboard.nextLine();  This prevented entering the choice.
        switch (choice) 
        {
            case 1:
                 System.out.println("View All");
                Store.print();

                break;

        case 2:
             System.out.println("Add");
                //Store.add();

                break;

        case 3:
             System.out.println("Delete");
                //Store.delete();

                break;

        case 4:
                System.out.println("Delete All");
                Store.clear();

                break;
        case 5:
           System.out.println("Edit");

            break;
        case 6:
             System.out.println("Search");
            Store.clear();

            break;
        case 7:
             System.out.println("Print");
            Store.print();

            break;
        case 8:
             System.out.println("Exit");

            break;
        }

        } while (choice != 8);

     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:00:18.763

我认为您在添加员工之前缺少后续步骤。向用户询问员工姓名和电子邮件，然后才将其添加到您的商店。

# c++ - 寻找复数作为输入的优化

> ID：11474970
> 
> 赞同：6
> 
> 时间：2012-07-13T16:58:28.557
> 
> 标签：c++, c, matlab, mathematical-optimization, numerical-methods

我想知道是否有 C/C++ 库或 Matlab 代码技术来使用最小化求解器确定实数和复数。这是一个代码片段，显示了我想做的事情。例如，假设我知道`Utilde`，但不知道`x`和`U`变量。我想使用 optimization( `fminsearch`) 来确定`x`and `U`，给定`Utilde`. 请注意，这`Utilde`是一个复数。

```
x = 1.5;
U = 50 + 1i*25;
x0 = [1 20];  % starting values
Utilde = U * (1 / exp(2 * x)) * exp( 1i * 2 * x);
xout = fminsearch(@(v)optim(v, Utilde), x0);

function diff = optim(v, Utilde)
x = v(1);
U = v(2);
diff =  abs( -(Utilde/U) + (1 / exp(2 * x)) * exp( 1i * 2 * x  ) ); 
```

上面的代码没有收敛到正确的值，并且`xout = 1.7318 88.8760`. 但是，如果 `U = 50`不是复数，则`xout = 1.5000 50.0000`是正确的值。

Matlab 或 C/C++ 中是否有办法以`Utilde`复数形式确保正确收敛？也许我必须更改上面的代码？

*   如果没有办法在 Matlab 中本地执行此操作，那么问题的一个要点可能是：是否有能够处理真实和复杂输入的多元（即 Nelder-Mead 或类似算法）优化库和输出？

*   还有一个问题是函数是否收敛。不知道是算法还是函数。我可能需要更改`Utilde = U * (1 / exp(2 * x)) * exp( 1i * 2 * x)`表达式中的某些内容以使其收敛吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:32:12.083

这里的主要问题是这个优化或参数拟合问题没有唯一的解决方案。例如，查看上面的预期结果和实际结果，对于两个 ( , ) 对`Utilde`来说是等价的（忽略舍入差异），即`x``U`

```
Utilde(x = 1.5, U = 50 + 25i) = Utilde(x = 1.7318, U = 88.8760) 
```

尽管我没有深入研究它，但我什至怀疑对于 的任何值`x`，您都可以找到`U`计算为 的`Utilde(x, U) = Utilde(x = 1.5, U = 50 + 25i)`。

因此，这里的解决方案是进一步约束参数拟合问题，以便求解器产生可以被认为可接受的*任何解决方案。*或者，重新制定`Utilde`任何 ( `x`, `U`) 对的唯一值。

**更新，8 月 1 日**

给定合理的起始值，实际上似乎限制`x`为实值就足够了。使用上面公式化的函数执行无约束非线性优化`diff`，我得到以下结果：

```
x = 1.50462926953244
U = 50.6977768845879 + 24.7676554234729i
diff = 3.18731710515855E-06 
```

但是，将初始猜测更改为与期望值更远的值确实会产生不同的解决方案，因此限制`x`为实值并不能单独为问题提供唯一的解决方案。

我已经在 C# 中使用[BOBYQA](https://github.com/cureos/csbobyqa)优化器实现了这一点，但数字应该与上面相同。[如果您想在 Matlab 之外尝试，使用std::complex](http://www.cplusplus.com/reference/std/complex/)类和您自己选择的（无约束）非线性 C++ 优化器将下面的 C# 代码转换为 C++ 代码也应该相对简单。[您可以在这里](http://plato.asu.edu/sub/nlounres.html#function)找到一些不需要梯度计算的 C++ 兼容代码，并且在 Numerical Recipes 中也有各种可用的实现。例如，您可以在[此处](http://apps.nrbook.com/c/index.html)在线访问 C 版本的 NR 。

作为参考，以下是我的 C# 代码的相关部分：

```
class Program
{
    private static readonly Complex Coeff = new Complex(-2.0, 2.0);
    private static readonly Complex UTilde0 = GetUTilde(1.5, new Complex(50.0, 25.0));

    static void Main(string[] args)
    {
        double[] vars = new[] {1.0, 25.0, 0.0}; // xstart = 1.0, Ustart = 25.0
        BobyqaExitStatus status = Bobyqa.FindMinimum(GetObjfnValue, vars.Length, vars);
    }

    public static Complex GetUTilde(double x, Complex U)
    {
        return U * Complex.Exp(Coeff * x);
    }

    public static double GetObjfnValue(int n, double[] vars)
    {
        double x = vars[0]; 
        Complex U = new Complex(vars[1], vars[2]);
        return Complex.Abs(-UTilde0 / U + Complex.Exp(Coeff * x));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:22:54.520

的文档说明了如何在[限制](http://www.mathworks.com/help/techdoc/ref/fminsearch.html)部分`fminsearch`处理复数：

> `fminsearch`only 对实数进行最小化，即`x`必须只包含实数并且`f(x)`必须只返回实数。当`x`有复变量时，它们必须分成实部和虚部。

您可以使用函数[`real`](http://www.mathworks.com/help/techdoc/ref/real.html)和[`imag`](http://www.mathworks.com/help/techdoc/ref/imag.html)分别提取实部和虚部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T18:41:09.407

似乎没有简单的方法可以做到这一点，即使两者`x`都是`U`实数。方程对于`Utilde`优化问题不是适定的，因此必须对其进行修改。

我尝试编写自己的 Nelder-Mead 优化算法版本，并尝试了 Powell 的方法。即使我尝试修改这些方法，似乎也不能很好地解决这个问题。

# maven - Maven能否发布：准备批量更新快照版本到发布版本

> ID：11474976
> 
> 赞同：11
> 
> 时间：2012-07-13T16:58:42.807
> 
> 标签：maven, version, release, prepare

mvn 发布：准备

它不断要求我解决快照依赖项。有没有办法在批处理模式下执行此操作，以便 Maven 自动使用关联的版本。即，如果依赖项是 1.0.0-SNAPSHOT，它会自动将此依赖项更新到 1.0.0 版本吗？

```
[INFO] Checking dependencies and plugins for snapshots ...
There are still some remaining snapshot dependencies.: Do you want to resolve them now?     (yes/no) no: : yes
Dependency type to resolve,: specify the selection number ( 0:All 1:Project Dependencies 2:Plugins 3:Reports 4:Extensions ): (0/1/2/3) 1: : 1
Resolve Project Dependency Snapshots.: 'com.my.project' set to release? (yes/no) yes: : yes
What is the next development version? (0.0.2-SNAPSHOT) 0.0.2-SNAPSHOT: : 0.0.2-SNAPSHOT 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T02:13:52.933

请注意，根据 maven-release-plugin 文档，您可以使用[allowTimestampedSnapshots配置 Maven 忽略 SNAPSHOT 依赖项检查：](http://maven.apache.org/plugins/maven-release-plugin/prepare-mojo.html#allowTimestampedSnapshots)

> **允许时间戳快照：**
> 
> 是否允许带时间戳的 SNAPSHOT 依赖项。默认是在查找任何 SNAPSHOT 时失败。
> 
> *   类型：布尔值
> *   自：2.0-beta-7
> *   要求：否
> *   表达式：${ignoreSnapshots}
> *   默认值：假

或者只需运行以下命令：

> mvn release:prepare -DignoreSnapshots=true

但是，仍然建议在最终发布之前解决所有 SNAPSHOT 依赖项，因为这是大多数人使用的约定。您应该始终考虑在开发阶段手动执行，而不是在发布阶段自动批处理，因为更改/升级项目的依赖项（您自己或第三方 jar）有时可能会引入错误或不兼容并破坏您的项目，这通常需要开发人员的注意并在最终发布之前修复它们。

换句话说，依赖解析不是一个应该在发布阶段完成的任务，而且它不是一个应该在没有开发人员注意的情况下自动完成的任务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T17:53:25.913

您可以在发布前通过[versions-maven-plugin](http://mojohaus.org/versions-maven-plugin/use-releases-mojo.html)更新 SNAPSHOT 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T22:04:03.520

如果您的依赖项是您自己的程序，并且它的生命周期与您尝试发布的程序密切相关，您可以考虑使用多模块项目：[http ://maven.apache.org/guides/mini/guide-multiple-模块.html](http://maven.apache.org/guides/mini/guide-multiple-modules.html)。Maven 发布插件会更新所有依赖模块的版本。

如果没有，你可能正在做一些你不应该做的事情。仅将 1.0.0-SNAPSHOT 更改为 1.0.0 并不能确保您的应用程序将继续工作。所以不认为Maven应该！

***进一步的考虑***

Maven 发布插件检查您是否使用快照依赖项，因为根据定义，快照是不稳定的版本。它可能会随着时间而改变。这意味着今天起作用的东西明天可能不起作用。

发布意味着您的版本是稳定的，并且构建可以随时复制而无需任何更改。使用快照版本，此断言变为错误。

所以，

# android - 如何检查应用程序的第二个实例？

> ID：11474983
> 
> 赞同：0
> 
> 时间：2012-07-13T16:59:01.470
> 
> 标签：android, instance

我正在尝试检查是否有另一个我的应用程序正在运行。启动第二个实例时，我总是发现我的应用程序没有运行。检查的代码是：

```
public String NameActivity() {
  ActivityManager am = (ActivityManager)
    context.getSystemService(context.ACTIVITY_SERVICE);
  List l = am.getRunningAppProcesses();
  Iterator i = l.iterator();
  PackageManager pm = this.context.getPackageManager();
  while (i.hasNext()) {
    ActivityManager.RunningAppProcessInfo info =
    (ActivityManager.RunningAppProcessInfo) (i.next());
  try {
    CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(
      info.processName, PackageManager.GET_META_DATA));
    Log.w("LABEL", c.toString());
  } catch (Exception e) {
    //Name Not FOund Exception
  }
}
return null;
}

public static boolean isThisProcessRunning(Context context, String processName) {
    if (processName == null) {
        return false;
    }
    ActivityManager manager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    List<RunningAppProcessInfo> processes = manager.getRunningAppProcesses();
    for (RunningAppProcessInfo process : processes) {
        if (processName.equals(process.processName)) {
            return true;
        }
    }
    return false;
}
} 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:53:55.117

您**始终**只有一个`Application`正在运行的实例。可能有多个活动或服务，但只有一个应用程序。因此，如果您的任何代码正在运行 - 这意味着您的应用程序正在运行，它只是它的一个实例。

# coldfusion - ColdFusion 在自定义标签中使用自定义标签

> ID：11474987
> 
> 赞同：1
> 
> 时间：2012-07-13T16:59:23.357
> 
> 标签：coldfusion, custom-tags

我对 ColdFusion 有点陌生（来自 Java/OOP 世界）

我有一个自定义标签，它在 cfscript 中运行一些东西并输出一个值。我想让这个自定义标签（我们称之为 A）调用另一个自定义标签（我们称之为 B，一个更通用的自定义标签，具有某种“静态”功能）具有特定参数。

我如何从 A 中调用 B？如何在 A 中使用 B 的返回值？

A的代码

```
<cfscript>
     //Call to other custom tag here?:
     //foo = [CUSTOMTAG param="stuff"];
     value = foo;
</cfscript>
<cfoutput>#value#</cfoutput> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T17:17:12.567

你在维护一些旧代码吗？否则，编写用户定义的函数比使用老式自定义标签更容易使用和/或测试。

虽然自定义标签擅长生成标记之类的事情，但它不擅长返回变量。

您应该考虑编写用户定义函数 (UDF)，就像您在 Java 中所做的那样。

并不是说自定义标签不能返回值，它只是不像函数那样自然。

要从自定义标签返回值，您需要使用`Caller`范围（映射到`variables`调用者的范围）。就像是...

```
<!--- customTag.cfm --->
<cfset caller[attributes.returnVar] = "some value"> 
```

并像这样调用customTag：

```
<cf_customTag returnVar="foo">

<cfdump var="#variables.foo#"> 
```

只需跟踪谁是调用者，并在调用者范围内设置值，您就可以在自定义标签内、自定义标签内、自定义标签内调用自定义标签......

如果您需要将自定义标签的输出捕获到 var 中，请将自定义标签调用包装在`<cfsavecontent>` `</cfsavecontent>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:05:02.967

这就是我最终做的事情。在我的“A”文件中（回想一下，A 调用 B）：

```
<cfscript>
b = createObject("component","bName");
returnVal = b.method("paramInfo");
</cfscript> 
```

在我的“B”文件中

```
<cfcomponent displayname="bName">
<cffunction name="method" returntype="string" output="false">
<cfargument name="paramName" required="yes" type="string">
<cfscript>
 returnVal = paramName;
</cfscript>
<cfreturn returnVal>
</cffunction>
</cfcomponent> 
```

# c++ - 值和指针之间赋值的区别？

> ID：11474989
> 
> 赞同：-2
> 
> 时间：2012-07-13T16:59:27.143
> 
> 标签：c++

当我执行以下操作时，我在紧密循环中看到了巨大的性能差异：

```
MyObject foo = bar.GetObject(); 
```

对比

```
MyObject* foo = bar.GetObjectPtr(); 
```

类函数的细节是：

```
class MyClass
{
  MyObject someobject;
  MyObject& GetObject() { return someobject; }
  MyObject* GetObjectPtr() { return &someobject; }
} bar; 
```

第一行的分配比第二行慢得多。有人可以解释发生了什么吗？这与默认复制分配有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T17:02:39.360

具体来说，

1.  指针和引用在生成的机器代码中是*相同*的，除了由于较少的别名乐趣，编译器在某些情况下可以对引用进行更好的优化。
2.  您几乎可以肯定没有任何分析数据表明这条线是一个问题。事实上，该变量可能甚至不*存在*于生成的机器代码中，而是直接访问的。这意味着试图确定其性能对于所有相关人员来说都是浪费时间。
3.  您的微基准代码在执行方面存在严重缺陷。即使是非优化编译器也会为这两行产生相同的结果。如果您发布了基准代码，我可能会更具体。

发布的代码中的*真正*问题是出现的大量封装违规。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T17:06:23.527

如果您发布的确实是您测试的代码，那么您的测试方法一定有问题，因为几乎任何现代编译器都会为两种变体生成相同的代码（当然不会导致任何类型的性能差异）。

如果您正在测试其他内容，则必须提供有关测试的更多详细信息。

# jquery - 我在对话框中添加页脚，如何修复高度？

> ID：11474990
> 
> 赞同：0
> 
> 时间：2012-07-13T16:59:33.803
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我在 jquery ui 对话框中附加了一个页脚，页脚样式就像页眉一样，即它固定在底部，所以如果有滚动，内容不会移动底部的页脚。

问题是，对话框自动计算的高度是错误的，因为我将页脚 html 附加到对话框中，我猜这是在计算高度之后，因此页脚位于文本内容的前面。

所以我在做：

```
var footer = "<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix" ... ";

$("#popup").dialog({
   modal: true,
   autoOpen: false,
   auto: true
}).parent().append(footer);

// if condition here
$("#popup").dialog("open"); 
```

所以我复制了页眉的页脚样式。

在 chrome/firefox 中，我将此选项添加到对话框中，该对话框将高度调整了 20px，从而解决了我的问题：

```
$("#popup").dialog({
 modal: true,
 autoOpen: false,
 auto: true,
 open = function() {
   $("#popup").css('height', $("#popup").height() + 20);
  }

}); 
```

理想情况下，我想在计算高度之前将页脚内容添加到对话框中，或者以某种方式告诉它重新计算高度。

问题是，调用 .dialog 将所有 html/css/样式添加到元素#popup，并且在调用（计算高度）之后，我链接了 append 调用，但到那时为时已晚。

我能以某种方式解决这个问题吗？同样，**它必须在 IE 中工作**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:08:32.207

使用`create`方法而不是`open`. 当我这样做时，这在 Chrome 和 IE 7-9 中对我来说很好。

**示例**- [http://jsfiddle.net/tj_vantoll/PUttC/](http://jsfiddle.net/tj_vantoll/PUttC/)。

# .net - 为什么仅安装 .NET 4 时为 .NET 3.5 编译的应用程序不起作用？

> ID：11474991
> 
> 赞同：2
> 
> 时间：2012-07-13T16:59:38.197
> 
> 标签：.net, .net-4.0, .net-3.5, .net-framework-version

从[MSDN 页面](http://msdn.microsoft.com/en-us/library/bb822049.aspx)，关于 .NET Framework 版本，我们知道每个版本都包含以前版本的所有功能。

与先前版本的 .NET Framework 不同，如果未安装先前版本，.NET Framework 4 不允许使用先前版本的 .NET Framework 构建的应用程序向前迁移并在其上运行

这是为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T17:07:51.630

正如其他答案中已经解释的那样，它们是不同的运行时，因此默认情况下不支持该应用程序，因为未安装 .NET 3.5 使用的 2.0 运行时。

但是，您可以将以下内容添加到应用程序配置中以强制应用程序使用 .NET 4.0 运行时：

```
<startup>
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup> 
```

然而，由于不同运行时之间的变化，这可能会导致应用程序崩溃，因此最安全的是使用应用程序所针对的运行时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T17:11:21.620

> 与先前版本的 .NET Framework 不同，如果未安装先前版本，.NET Framework 4 不允许使用先前版本的 .NET Framework 构建的应用程序向前迁移并在其上运行

它们可以，但您必须明确允许它使用 .NET 4 运行时运行。由于该框架有一个新的运行时，如果您的应用程序针对的是旧版本，您必须选择允许这样做。

您可以通过让您的应用配置指定正确的[supportedRuntime](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)变量来做到这一点，即：

```
<configuration>
   <startup>
      <supportedRuntime version="v4.0"/>
      <supportedRuntime version="v2.0.50727"/>
   </startup>
</configuration> 
```

没有这个，运行时会：

> 如果应用程序配置文件中不存在该元素，则使用用于构建应用程序的运行时版本。

因为您使用 CLR 2 构建，所以只允许 2.0 运行时，因此如果用户没有 .NET 3.5sp1，它会失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T17:03:47.363

默认情况下，它们需要不同的运行时。

3.5 应用程序的运行时是 2.0 运行时，它与 4.0 运行时不兼容。

您可以按照 João Angelo 在[他的回答](https://stackoverflow.com/a/11475123/1583)中解释的那样重新定位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T17:06:41.800

*   .NET 2.0
*   .NET 3.x 基于 .NET 2.0，因此两者都需要安装 .NET 2.0
*   .NET 4.0 使用自己的 .NET 运行时版本，因此您可以独立安装它
*   .NET 4.5[更新](https://stackoverflow.com/questions/8810391/will-net-4-5-introduce-a-new-version-of-the-clr)4.0 的运行时

# url - Magento 自定义 URL 重写不起作用

> ID：11474992
> 
> 赞同：2
> 
> 时间：2012-07-13T16:59:46.863
> 
> 标签：url, pdf, url-rewriting, url-routing, magento-1.5

在我的网站上，有一系列用于手册、小册子、MSDS 等的 pdf 文件。下载这些文件的链接分散在“下载”区域、信息页面和产品页面中。我们会定期更新小册子，因此为了不必更新链接文件的每个页面，我需要知道如何在旧 URL 的位置创建重定向：

[http://easypropondproducts.com/media/pdfs/EcoPondKitsBroch-MPF-109.pdf](http://easypropondproducts.com/media/pdfs/EcoPondKitsBroch-MPF-109.pdf)

将永久重定向到新 URL

[http://easypropondproducts.com/media/pdfs/EcoPondKitsBroch-MPF-512.pdf](http://easypropondproducts.com/media/pdfs/EcoPondKitsBroch-MPF-512.pdf)

我尝试了自定义 URL 重写，但它似乎无法正常工作： 类型：自定义 ID 路径：/media/pdfs/EcoPondKitsBroch-MPF-109.pdf 请求路径：/media/pdfs/EcoPondKitsBroch-MPF- 109.pdf 目标路径： [http](http://easypropondproducts.com/media/pdfs/EcoPondKitsBroch-MPF-512.pdf) ://easypropondproducts.com/media/pdfs/EcoPondKitsBroch-MPF-512.pdf 重定向：永久（301）

我究竟做错了什么？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:04:20.890

您不能`media`使用 Magento 内部 URL 重写管理来重写文件夹中的文件。

这是因为指向 Magentos `media`（或`skin`或`js`）文件夹的 URL 甚至没有到达中心入口点`index.php`，而是直接提供*给*.

看一下 Magento 根`.htaccess`文件：

```
RewriteCond %{REQUEST_URI} !^/(media|skin|js)/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule .* index.php [L] 
```

对于您的 URL，第一个`RewriteCond`是不匹配的。此条件表示“如果 URL 不以`/media/`or`/skin/`或`/js/`”开头。

但是您的网址*确实*以`/media/`. 因此它*不会*被重写`index.php`，也无法到达 Magento 内部的 URL 重写管理。

要实现您想要的，您可以在第一行之前插入以下行`RewriteCond`：

```
Redirect 301 /media/pdfs/EcoPondKitsBroch-MPF-109.pdf /media/pdfs/EcoPondKitsBroch-MPF-512.pdf 
```

# php - JSON从android接收数据

> ID：11474995
> 
> 赞同：0
> 
> 时间：2012-07-13T16:59:55.943
> 
> 标签：php, android, json, http, post

我是 php 新手。我将数据从 android 发布到 php 服务器 as--

```
JSONObject jsonObject = new JSONObject();
try
{
    jsonObject.put("name", "john");
    String url = "http://10.0.2.2/WebService/submitname.php";
    HttpClient client = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(url);
    httpPost.setHeader("json", jsonObject.toString());
    StringEntity se = null;
    se = new StringEntity(jsonObject.toString());
    se.setContentEncoding(new BasicHeader(
    HTTP.CONTENT_TYPE, "application/json"));
    httpPost.setEntity(se);
    HttpResponse response = client.execute(httpPost);
    int i = response.getStatusLine().getStatusCode();
    Log.v("status", "" + i);
} catch (Exception e)
{
    e.printStackTrace();
} 
```

并在 php 中接收数据为

```
<?php
 mysql_connect("localhost","root","");
 mysql_select_db("my db");
 $var = json_decode($_POST['HTTP_JSON']);
 $service = $var->{'name'};
 mysql_query("INSERT INTO name_table(`_id`, `retrived_name`, `cat`, `is_valid_name`) VALUES (1547, '$service','$var',true);");
 echo  $var;
?> 
```

在服务器端一无所获。但是 php 查询执行正确，因为得到 200 响应和数据库中的新行，但字段为 `retrived_name`空`cat`。

我该如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-07T09:37:58.683

您应该在查询中提供值：

```
<?php
    mysql_connect("localhost","root","");
    mysql_select_db("my db");
    $var = json_decode($_POST['HTTP_JSON']);
    $service = $var->{'name'};
    $name = $_POST['name'];
    mysql_query("INSERT INTO name_table(`_id`, `retrived_name`, `cat`, `is_valid_name`) VALUES (1547, '$service','$name',true);");
    echo  $var;
?> 
```

# android - 定义布局

> ID：11474998
> 
> 赞同：0
> 
> 时间：2012-07-13T17:00:08.750
> 
> 标签：android, layout, text

下面是我用于创建带有标题“在此处输入电话号码”的文本框的 xml 代码。我有一个编辑框，它可以获取电话号码和一个按钮。问题是文本框和编辑框相互重叠。如何解决这个问题呢。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView android:id="@+id/textLabel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="Enter number to dial"
        />
    <EditText android:id="@+id/phoneNumber"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        />
     <Button android:id="@+id/callButton"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:text="Show Dialer"
     />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:31:27.170

当您有想要的项目相互交叉时，最好使用 TableLayout。我相信其他人有最喜欢的方式，但这是我的。

```
<?xml version="1.0" encoding="utf-8"?>
     <TableLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="match_parent" 
        android:layout_width="match_parent"
        android:background="#000044">
        <TableRow> 
            <TextView 
                android:text="Name:"
                android:width ="120px"
                />
            <EditText 
                android:id="@+id/someUserName" 
                android:width="200px" />
        </TableRow> 
        <TableRow>
            <TextView 
                android:text="Phone:"
                />
            <EditText 
                android:id="@+id/somePhone"  
                />
        </TableRow>
       <TableRow>
            <TextView 
                android:text="Address:"
                />
            <EditText 
                android:id="@+id/someAddress"  
                />
        </TableRow>
        <TableRow>
            <Button 
                android:id="@+id/buttonToClick" 
                android:text="Go Do Something Cool" />
        </TableRow>
    </TableLayout> 
```

如果您希望将所有三个项目放在一行中，请执行此操作

```
<?xml version="1.0" encoding="utf-8"?>
 <TableLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="match_parent" 
    android:layout_width="match_parent"
    android:background="#000044">

   <TableRow>
        <TextView 
            android:text="Call Number"
            android:paddingRight="50px"
            />
        <EditText 
            android:id="@+id/someNumber" 
            android:width ="120px"
            android:paddingLeft="10px"
            />

        <Button
            android:id="@+id/buttonToClick"
            android:text="Call" />

    </TableRow>
</TableLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:17:27.043

如果您使用 Eclispe 进行开发，只需切换到图形布局选项，您可以在其中拖动项目并定位它们[这会将上述答案中的代码添加到您的 XML]。查看[此](http://www.youtube.com/watch?v=Oq05KqjXTvs&t=26m0s)视频以`RelativeLayout`了解它以及如何使用它。[视频来源：谷歌 I/O 2012]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:36:08.317

在 EditText 中使用 android:layout_below="@+id/textLabel" 属性，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textLabel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="Enter number to dial" />

    <EditText
        android:id="@+id/phoneNumber"
        android:layout_below="@+id/textLabel"  //  <--- MUST  Add  This
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="Now phoneNumber Will Appear"  //  <---  See  This
        android:layout_alignParentRight="true" />

    <Button
        android:id="@+id/callButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Show Dialer" />

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:02:37.507

您应该了解有关[RelativeLayout 的各种 LayoutParams 的](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)更多信息。下面的代码使用了其中的一些，这也避免了重叠问题。

```
<TextView android:id="@+id/textLabel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:text="Enter number to dial"
    />
<EditText android:id="@+id/phoneNumber"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/textLabel"
    android:layout_alignParentRight="true"
    android:layout_marginLeft="8dp"
    />
<Button android:id="@+id/callButton"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_below="@id/textLabel"
     android:layout_marginTop="8dp"
     android:text="Show Dialer"
     /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T17:04:14.123

使用 LinearLayout 而不是具有水平或垂直方向的 RelativeLayout。LinearLayout 自动以线性方式排列内容。

# textmate - 捆绑 Ruby 1.9 哈希语法，还是修改现有匹配的方法？

> ID：11474999
> 
> 赞同：3
> 
> 时间：2012-07-13T17:00:12.423
> 
> 标签：textmate, sublimetext2, textmatebundles

我正在使用 Rails 并在 SublimeText 中使用 Ruby 1.9，但它使用 Ruby 1.9 的新哈希语法进行了一些古怪的突出显示。

例如，使用以下散列，这对于 Rails 来说很常见：

`<%= link_to some_page_here_path, class: "btn btn-primary" %>`

当`class`关键字实际上不是真正的关键字而只是一个简单的哈希键时，它会突出显示。如果它被设置为符号（在 Ruby 1.9 中）而不是保留字，我更喜欢它。这也适用于其他保留字，“for”、“while”、“do”等。

有没有办法在现有的 Ruby.tmLanguage 或已经完成的 tmLanguage 文件中完成这项工作？感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T19:51:26.683

我遇到了同样的问题，所以我继续编辑 Ruby.tmLanguage 文件来修复它。

您可以通过搜索文件找到保留关键字的定义`keyword.control.ruby`；相应的正则表达式看起来像

```
(?&lt;!\.)\b(BEGIN|begin|case|class|...|when|while)\b(?![?!]) 
```

最后的负前瞻`(?![?!])`阻止它匹配方法名称`class?`，`class!`因此在列表中添加冒号`(?![?!:])`也将阻止它匹配哈希键，如`class:`.