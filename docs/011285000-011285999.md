# StackOverflow 问答 11285000-11285999

# opencv - 如何在opencv中检测建筑和雕塑？

> ID：11285000
> 
> 赞同：5
> 
> 时间：2012-07-01T19:30:41.787
> 
> 标签：opencv, computer-vision

有人能告诉我如何检测建筑或雕塑的图片吗？我认为 `hough-transforming`是一个很好的方法。但我是 CV 的新手，也许有更好的方法来检测模式。我听说了haarcascade。我也可以把它用于建筑吗？例如我想检测这些图片：

[![图片由 ImageShack.us 托管](../Images/6e7d6a9545c5278d1b472a0c6ff9e432.png)](https://i.stack.imgur.com/HyFnB.jpg) [图片由 ImageShack.us 托管 http://img842.imageshack.us/img842/4748/resizeimg0931.jpg](http://img842.imageshack.us/img842/4748/resizeimg0931.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T19:44:05.280

如果您想要一种算法来检测它们，那么从图像中检测对象需要对该对象的描述，该描述可以被机器或计算机理解。对于雕塑或建筑，你怎么能有这样一个统一的定义，因为它们在各个方面都有很大的不同？例如，您的两个输入图像变化很大。我们如何区分房屋和建筑？你的问题会出现很多问题。即使使用霍夫变换，您应该如何区分大房子和大建筑？

查看此 SOF：[图像处理：“可口可乐罐”识别的算法改进](https://stackoverflow.com/questions/10168686/algorithm-improvement-for-coca-cola-can-shape-recognition)

他想检测可口可乐罐，而不是可口可乐瓶。但是如果你看清楚了，你就会明白罐头和瓶子几乎是一样的，很难区分它们。您可以在后续的答案中找到它的很多困难。主要问题是，在某些情况下，人类也很难区分它们。

在您的第二张图像中，即使您为第二张图像训练了一些级联，如果它们存在于您的图像中，它也会检测到活狮子，因为对于机器来说，雕塑狮子和原始狮子看起来几乎相同。

**Haar 级联**可能不是很有效，因为您必须针对大量此类图像进行训练。

如果您有一些示例图像并想检查图像中是否存在这些东西，可能您可以使用**SURF 功能**等。但是您可能需要先比较一些示例图像。有关 SURF 的演示，请查看此 SOF：[OpenCV 2.4.1 - 在 Python 中计算 SURF 描述符](https://stackoverflow.com/questions/10984313/opencv-2-4-1-computing-surf-descriptors-in-python/10987035#10987035)

![在此处输入图像描述](../Images/26a66258456080c8a99297516819b489.png)

另一种选择是**模板匹配**。但它很慢，而且它不是尺度和方向不变的。你需要一些模板图像

我想我看过一些与这个主题相关的论文（但我现在不记得了）。可能是谷歌搜索会得到你他们。如果我得到它，我会更新答案。

# java - 使用 .net、java 和 php 在 web 应用程序中注入代码

> ID：11285001
> 
> 赞同：1
> 
> 时间：2012-07-01T19:30:46.557
> 
> 标签：java, php, .net, xss, code-injection

我需要做一个关于 web 应用程序上的代码注入以及如何防止它的演示。我对.net不太熟悉，我主要知道SQL或php上的代码注入。

阅读和搜索网络，似乎在 java、.net 和 php 之间的代码注入在 php 中是最简单的，然后是在 java 中（动态加载脚本），但在 .net 中，我发现没有那么多或那么好的文档。

是否有可能在.net中有一个（简单的）代码注入示例，以及如何防止它。此外，任何指向 java 或 php 中代码注入的链接也很棒，你永远看不够。

例如我有java：

Java（使用 javax.script.*）

```
<% String pageToInclude = getDataFromUntrustedSource(); %> 
<jsp:include page=" <%=pageToInclude %>" /> 
```

除了在这个框架中专门工作的输入验证之外，是否还有其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:42:00.517

@ .net 默认情况下，框架会保护您的页面。您需要在提交页面时验证所有文本框它不包含任何特殊章程

# c# - 具有共享业务对象的 WCF 每次调用服务

> ID：11285009
> 
> 赞同：2
> 
> 时间：2012-07-01T19:32:42.867
> 
> 标签：c#, wcf

我需要一些帮助来为我指明正确的方向。

我们希望通过 WebHTTP 端点向用户公开服务功能（包括读取 + 更新 SQL Server 数据库）作为每次调用服务。如果可以避免，我们不想使用 SOAP，因为我们很难在其他平台上实现互操作。这必须可扩展到 1000 多个用户，在这种情况下，这些用户不太可能提交许多并发请求。估计在任何给定时间最多应该有 25 个并发请求。

（这就是为什么每会话服务被排除的原因，因为这意味着保持 1000 多个会话打开，而只执行 25 个操作。）

然而，根据测试服务的经验，我们发现通过 HTTP 使用纯 Per-Call WCF 服务的性能很差，最大的时间间隔是 SQL 服务器连接的初始化。

这与 Web 服务器通常会遇到的情况类似。因此，使用与 Web 服务器类似的方法似乎是明智的——出于性能原因，它们保持 HTTP 引擎池处于活动状态，并且传入请求被分配到池中的引擎之一。

因此，我们希望保持 25-30 个“业务逻辑对象”（即具有与单纯的服务接口分离的实际服务逻辑的类）的池打开，它应该在服务主机启动时被实例化。

似乎 WCF 没有内置的场景来支持这个开箱即用。我该怎么办？

当我是自托管时，我可以从 ServiceHost 派生一个自定义类并添加一个带有业务对象的字典。我猜这会导致线程问题，我必须通过手动同步来处理，对吗？

如果我们决定在 IIS 中托管，那么我将如何做呢，因为 IIS 会自动负责创建 ServiceHost 类的实例，因此我没有太多机会在​​两者之间放置我自己的自定义主机，是吗？ ?

或者这完全是一个不好的方法。任何其他想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T19:47:20.990

无状态、无会话的方法实际上是否存在瓶颈？

“业务逻辑对象”池对我来说不是一个好主意。您将面临难以调试的并发问题。

您是否实际测试过以下模式？

*   每个请求一个业务逻辑对象，尽可能短的生命周期
*   每个业务逻辑对象一个 SQL 连接
*   无状态服务

> 然而，根据测试服务的经验，我们发现通过 HTTP 使用纯 Per-Call WCF 服务的性能很差，最大的时间间隔是 SQL 服务器连接的初始化。

实际上，由于 SQL Server 连接池，SQL Server 连接不应该成为瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:39:22.147

我认为它们与实例化业务逻辑对象相关的成本不会很高。您可以在 ken 指出的 sql 连接对象上启用池。最好去缓存业务对象而不是池化业务逻辑对象。

# php - 如何检查我的 foreach 循环是否有错误？

> ID：11285011
> 
> 赞同：1
> 
> 时间：2012-07-01T19:33:10.363
> 
> 标签：php, content-management-system

我只是快速为一个文章网站编写了一个脚本，我从数据库中检索文章。

这是我的 index.php 脚本

```
 <?php
    // include header
    require("include/header.php");
    require("include/helperfunctions.inc.php");
    ?>

    <!-- page content -->
    <!-- left section -->
    <section id="contentleft">
<?php require("include/functions.php"); 
displayArticles();
foreach ($articles as $article) : ;
?>
<h2>Recent Articles</h2>
    <ul>
        <li><?php echo htmlout($articles['id']) ; ?></li>
        <li><?php echo htmlout($articles['title']) ; ?></li>
        <li><?php echo htmlout($articles['summary']) ; ?></li>
    </ul>
<?php endforeach; ?>
    </section>

    <!-- right content -->
    <section id="contentright">

    </section>

    <?php
    // include footer
    require("include/footer.php");
    ?> 
```

这是函数库的开始

```
 function displayArticles($order="publicationdate DESC"){
        // connect to the database
        include("include/db.inc.php");
    $query = "SELECT id, title, summary FROM maths order by ". $order . " limit 10";

// query the database
$result = mysqli_query($link, $query);
    // error checking
    if(mysqli_connect_errno()){
    // $error = "error fetching articles";
    echo " could not connect: " . mysqli_connect_errno() . " ";
    exit();     
}
// loop through storing values into array
while($row = mysqli_fetch_array($result)){
    $articles[] = array('id'=>$row['id'] , 'title'=>$row['title'],'summary'=>$row['summary']);        
}

    }

    ?> 
```

我收到此错误：

> 警告：mysqli_fetch_array() 期望参数 1 为 mysqli_result，布尔值在第 17 行的 C:\Apache24\htdocs\include\functions.php 中给出 最近的文章注意：未定义的变量：C:\Apache24\htdocs\home.php 中的文章第 14 行警告：为第 14 行 C:\Apache24\htdocs\home.php 中的 foreach() 提供的参数无效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T19:39:45.957

它看起来像是 $articles 对象的范围问题。您在 displayArticles() 函数中创建 $articles .. 但在函数之外，您的其他代码不知道它。尝试在 displayArticles() 中返回 $articles，并替换您的 displayArticles(); 在第一页的顶部调用：

```
$articles = displayArticles(); 
```

此外，正如评论中指出的那样，您在 foreach 块中引用了错误的对象。删除每个 $articles[blah] 末尾的“s”，使其读取为 $article[blah]。

# macos - 如何将 iswitch 缓冲区名称限制为 minibuffer 中的 1 行（在 osx 上升级 emacs 24.1 后行为发生变化）？

> ID：11285013
> 
> 赞同：3
> 
> 时间：2012-07-01T19:33:27.073
> 
> 标签：macos, emacs, emacs24, iswitchb-mode

当我在 OSX 上升级到（vanilla）emacs 24.1 时，使用 iswitch 切换缓冲区的行为似乎有所不同。

当我按 ctrl-x b 切换缓冲区时，它不是将缓冲区列表限制为 1 行，而是通过将迷你缓冲区扩展为几行长来显示每个缓冲区，然后在我输入缓冲区名称时逐步删除缓冲区我正在切换到。

我发现每当我切换缓冲区以分散视觉注意力时，状态栏和迷你缓冲区就会上下颠簸，所以我想恢复以前的行为，这会切断 1 行之后的缓冲区名称。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T22:23:11.300

如果您想将 minibuffer 使用的行数全局限制为一行，这应该有效：

```
(setq max-mini-window-height 1) 
```

[来自文档](http://www.gnu.org/software/emacs/manual/html_node/emacs/Minibuffer-Edit.html)的附加信息：

> 变量 max-mini-window-height 控制调整 minibuffer 窗口大小的最大高度。浮点数指定框架高度的一部分；一个整数指定最大行数；nil 表示不自动调整 minibuffer 窗口的大小。默认值为 0.25。

但是，如果您只想限制 iswitchb 使用的 minibuffer 行数，iswitchb-minibuffer-setup-hook 的[文档](http://cvs.savannah.gnu.org/viewvc/*checkout*/emacs/emacs/lisp/iswitchb.el)建议：

> 特定于 Iswitchb 的 minibuffer 设置定制。
> 
> 如果 `iswitchb' 处于活动状态，则此挂钩在 minibuffer 设置期间运行。例如：

```
(add-hook 'iswitchb-minibuffer-setup-hook
    (lambda ()
        (set (make-local-variable 'max-mini-window-height) 3))) 
```

> 当 iswitchb 运行时，将 minibuffer 的最大高度限制为 3 行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T14:49:45.527

我认为这种行为在 Emacs 23 和 Emacs 24 之间没有改变，所以我不确定为什么你现在才看到这个。也许您进行了一些自定义来获得这种行为，但它现在无法在 Emacs 24 中工作？如果是这样，请报告它，以便我们修复它。

另请注意，在 Emacs 24 中，默认（非*iswitchb*）缓冲区切换的行为非常接近*iswitchb*的行为。最明显的区别是显示可能的完成，您也可以使用`M-x icomplete-mode`，这不影响实际行为，仅影响显示，但也会影响其他完成。还`icomplete-mode`尝试将其显示的完成列表限制为大约一行（除了实际的 minibuffer 的内容，所以你仍然会得到一些换行，但更少）。

# azure - IIS x64 位上 Azure 中的 RoleEnvironment 初始化引发错误

> ID：11285016
> 
> 赞同：0
> 
> 时间：2012-07-01T19:33:42.160
> 
> 标签：azure

我创建了在 IIS 下运行的 web 服务，它是 x64 位的。我在 Azure 机器（ws2008 r2）上使用自定义安装脚本部署了它。我创建了自定义应用程序池（64 位，托管管道模式：经典，.net v2，使用 NetworkService 帐户作为服务用户）。一切似乎都配置正确，但是当我尝试运行我的应用程序时，出现以下错误：

System.TypeInitializationException：“Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment”的类型初始化程序引发了异常。---> System.TypeInitializationException: '' 的类型初始化程序引发了异常。---> .ModuleLoadException: C++ 模块在尝试初始化默认应用程序域时加载失败。

我可以运行独立的 win 表单应用程序，并且此方法可以正常工作。更重要的是，当我将应用程序池切换到 32 位并运行我的应用程序然后它失败（因为它具有 x64 位组件），但是稍后当切换回 x64 时它可以正常工作，RoleEnvironment 返回正确的数据。

你有什么想法在配置方面我可以做错什么，所以这个模块不能在 x64 位版本中加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:36:21.070

我相信您需要通过启动任务在您的 Azure VM 中安装 VC++ x64 运行时，因为您使用的一些参考需要 VC++ 运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T01:19:19.720

这可能会有所帮助。您可以将启动任务添加到 Windows Azure 项目的 .csdef 文件以配置 IIS 以允许 64 位应用程序中的 32 位模块。

在您的 Windows Azure 项目 .csdef 文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition>
  <WebRole ...>
... 
    <Startup>
      <Task commandLine="ConfigureIIS.cmd" executionContext="elevated" taskType="simple" />
    </Startup>
  </WebRole>
</ServiceDefinition> 
```

配置IIS.cmd（全部一行）：

%windir%\system32\inetsrv\appcmd 设置配置 -section:applicationPools -applicationPoolDefaults.enable32BitAppOnWin64:true

# java - 仅在使用键侦听器时才能在线程中运行流畅的动画

> ID：11285018
> 
> 赞同：0
> 
> 时间：2012-07-01T19:33:52.313
> 
> 标签：java, animation, sprite, keylistener

第一次使用论坛进行编码帮助，如果我把这一切都发错了，很抱歉。我有不止几个课程，我认为 screenManger 或 core 没有问题，但我将它们包括在内只是以防万一。我通过一组教程获得了大部分代码。但从某一点开始，我开始尝试自己做更多事情。

我只想在移动精灵时播放动画。

在我的 KeyTest 课程中，我正在使用线程来运行它曾经工作的动画（效果不佳），但现在一点也没有，它真的把我的电脑搞砸了。我认为这是因为线程。我是线程新手，所以我不确定我是否应该在这种情况下使用线程，或者它对我的计算机是否危险。

当我在屏幕上永远有精灵布斯时，动画效果很好。动画循环播放不停。

我认为主要问题在animationThread、Sprite 和keyTest 类之间，但它可能更深入。

如果有人可以为我指出正确的方向，以便在我按下键时使动画顺利运行并在我松开时停止运行，那将是非常重要的。

我已经看过这个 [Java 一个移动动画（精灵）](https://stackoverflow.com/questions/8762305/java-a-moving-animation-sprite)，显然我们在做同样的教程。但我觉得我的问题略有不同。

ps 对错别字感到抱歉。

```
import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.ImageIcon;

public class KeyTest extends Core implements KeyListener {

public static void main(String[] args){
    new KeyTest().run();
}

Sprite player1;
Image hobo;
Image background;
animation hoboRun;
animationThread t1;

//init also calls init form superclass
public void init(){
    super.init();
    loadImages();
    Window w = s.getFullScreenWindow();
    w.setFocusTraversalKeysEnabled(false);
    w.addKeyListener(this);
}

//load method will go here.
//load all pics need for animation and sprite
public void loadImages(){
    background = new ImageIcon("\\\\STUART-PC\\Users\\Stuart\\workspace\\Gaming\\yellow square.jpg").getImage();
    Image face1 = new ImageIcon("\\\\STUART-PC\\Users\\Stuart\\workspace\\Gaming\\circle.png").getImage();
    Image face2 = new ImageIcon("\\\\STUART-PC\\Users\\Stuart\\workspace\\Gaming\\one eye.png").getImage();
    hoboRun = new animation();
    hoboRun.addScene(face1, 250);
    hoboRun.addScene(face2, 250);
    player1 = new Sprite(hoboRun);
    t1 = new animationThread();
    t1.setAnimation(player1);
}

//key pressed
public void keyPressed(KeyEvent e){
    int keyCode = e.getKeyCode();
    if(keyCode == KeyEvent.VK_ESCAPE){
        stop();
    }
    if(keyCode == KeyEvent.VK_RIGHT){
        player1.setVelocityX(0.3f);
        try{
            t1.setRunning(true);
            Thread th1 = new Thread(t1);
            th1.start();
        }catch(Exception ex){System.out.println("noooo");}
    }
    if(keyCode == KeyEvent.VK_LEFT){
        player1.setVelocityX(-0.3f);
        try{
            t1.setRunning(true);
            Thread th1 = new Thread(t1);
            th1.start();
        }catch(Exception ex){System.out.println("noooo");}
    }
    if(keyCode == KeyEvent.VK_DOWN){
        player1.setVelocityY(0.3f);
        try{
            t1.setRunning(true);
            Thread th1 = new Thread(t1);
            th1.start();
        }catch(Exception ex){System.out.println("noooo");}
    }
    if(keyCode == KeyEvent.VK_UP){
        player1.setVelocityY(-0.3f);
        try{
            t1.setRunning(true);
            Thread th1 = new Thread(t1);;
            th1.start();
        }catch(Exception ex){System.out.println("noooo");}
    }else{
        e.consume();
    }
}

//keyReleased
@SuppressWarnings("static-access")
public void keyReleased(KeyEvent e){
    int keyCode = e.getKeyCode();
    if(keyCode == KeyEvent.VK_RIGHT || keyCode == KeyEvent.VK_LEFT){
        player1.setVelocityX(0);
        try{
            this.t1.setRunning(false);
        }catch(Exception ex){}
    }
    if(keyCode == KeyEvent.VK_UP || keyCode == KeyEvent.VK_DOWN){
        player1.setVelocityY(0);
        try{
            this.t1.setRunning(false);
        }catch(Exception ex){}
    }else{
        e.consume();
    }
}

//last method from interface
public void keyTyped(KeyEvent e){
    e.consume();
}

//draw
public void draw(Graphics2D g){
    Window w = s.getFullScreenWindow();
    g.setColor(w.getBackground());
    g.fillRect(0, 0, s.getWidth(), s.getHieght());
    g.setColor(w.getForeground());
    g.drawImage(player1.getImage(), Math.round(player1.getX()), Math.round(player1.getY()), null);
}

public void update(long timePassed){
    player1.update(timePassed);
}
}

abstract class Core {

    private static DisplayMode modes[] = {
        new DisplayMode(1600, 900, 64, 0),
        new DisplayMode(800, 600, 32, 0),
        new DisplayMode(800, 600, 24, 0),
        new DisplayMode(800, 600, 16, 0),
        new DisplayMode(800, 480, 32, 0),
        new DisplayMode(800, 480, 24, 0),
        new DisplayMode(800, 480, 16, 0),};
    private boolean running;
    protected ScreenManager s;

    //stop method
    public void stop() {
        running = false;
    }

    public void run() {
        try {
            init();
            gameLoop();
        } finally {
            s.restoreScreen();
        }
    }

    //set to full screen
    //set current background here
    public void init() {
        s = new ScreenManager();
        DisplayMode dm = s.findFirstCompatibleMode(modes);
        s.setFullScreen(dm);

        Window w = s.getFullScreenWindow();
        w.setFont(new Font("Arial", Font.PLAIN, 20));
        w.setBackground(Color.GREEN);
        w.setForeground(Color.WHITE);
        running = true;
    }

    //main gameLoop
    public void gameLoop() {
        long startTime = System.currentTimeMillis();
        long cumTime = startTime;

        while (running) {
            long timePassed = System.currentTimeMillis() - cumTime;
            cumTime += timePassed;

            update(timePassed);

            Graphics2D g = s.getGraphics();
            draw(g);
            g.dispose();
            s.update();

            try {
                Thread.sleep(20);
            } catch (Exception ex) {
            }
        }
    }

    //update animation
    public void update(long timePassed) {
    }

    //draws to screen
    abstract void draw(Graphics2D g);
}

public class animationThread implements Runnable{

String name;
volatile boolean playing;
Sprite a;

//constructor takes input from keyboard
public animationThread(){
}

//The run method for animation
public void run() {
    long startTime = System.currentTimeMillis();
    long cumTime = startTime; 

    while(getRunning()){
        long timePassed = System.currentTimeMillis() - cumTime;
        cumTime += timePassed;
        a.startAnimation(timePassed);
    }
}

public String getName(){
    return name;
}

public void setAnimation(Sprite a){
    this.a=a;
}

public void setName(String name){
    this.name=name;
}

public synchronized void setRunning(boolean running){
    this.playing = running;
}

public synchronized boolean getRunning(){
    return playing;
}
}

class animation {

    private ArrayList scenes;
    private int sceneIndex;
    private long movieTime;
    private long totalTime;

    //constructor
    public animation() {
        scenes = new ArrayList();
        totalTime = 0;
        start();
    }

    //add scene to ArrayLisy and set time for each scene
    public synchronized void addScene(Image i, long t) {
        totalTime += t;
        scenes.add(new OneScene(i, totalTime));
    }

    public synchronized void start() {
        movieTime = 0;
        sceneIndex = 0;
    }

    //change scenes
    public synchronized void update(long timePassed) {
        if (scenes.size() > 1) {
            movieTime += timePassed;
            if (movieTime >= totalTime) {
                movieTime = 0;
                sceneIndex = 0;
            }
            while (movieTime > getScene(sceneIndex).endTime) {
                sceneIndex++;
            }
        }
    }

    //get animations current scene(aka image)
    public synchronized Image getImage() {
        if (scenes.size() == 0) {
            return null;
        } else {
            return getScene(sceneIndex).pic;
        }
    }

    //get scene
    private OneScene getScene(int x) {
        return (OneScene) scenes.get(x);
    }

    //Private Inner CLASS//////////////
    private class OneScene {

        Image pic;
        long endTime;

        public OneScene(Image pic, long endTime) {
            this.pic = pic;
            this.endTime = endTime;
        }
    }
}

class Sprite {

    private animation a;
    private float x;
    private float y;
    private float vx;
    private float vy;

    //Constructor
    public Sprite(animation a) {
        this.a = a;
    }

    //change position
    public void update(long timePassed) {
        x += vx * timePassed;
        y += vy * timePassed;
    }

    public void startAnimation(long timePassed) {
        a.update(timePassed);
    }

    //get x position
    public float getX() {
        return x;
    }

    //get y position
    public float getY() {
        return y;
    }

    //set x
    public void setX(float x) {
        this.x = x;
    }

    //set y
    public void setY(float y) {
        this.y = y;
    }

    //get sprite width
    public int getWidth() {
        return a.getImage().getWidth(null);
    }

    //get sprite height
    public int getHeight() {
        return a.getImage().getHeight(null);
    }

    //get horizontal velocity
    public float getVelocityX() {
        return vx;
    }

    //get vertical velocity
    public float getVelocityY() {
        return vx;
    }

    //set horizontal velocity
    public void setVelocityX(float vx) {
        this.vx = vx;
    }

    //set vertical velocity
    public void setVelocityY(float vy) {
        this.vy = vy;
    }

    //get sprite / image
    public Image getImage() {
        return a.getImage();
    }
}

class ScreenManager {

    private GraphicsDevice vc;

    public ScreenManager() {
        GraphicsEnvironment e = GraphicsEnvironment.getLocalGraphicsEnvironment();
        vc = e.getDefaultScreenDevice();
    }

    //get all compatible DM
    public DisplayMode[] getCompatibleDisplayModes() {
        return vc.getDisplayModes();
    }

    //compares DM passed into vc DM and see if they match
    public DisplayMode findFirstCompatibleMode(DisplayMode modes[]) {
        DisplayMode goodModes[] = vc.getDisplayModes();
        for (int x = 0; x < modes.length; x++) {
            for (int y = 0; y < goodModes.length; y++) {
                if (displayModesMatch(modes[x], goodModes[y])) {
                    return modes[x];
                }
            }
        }
        return null;
    }

    //get current DM
    public DisplayMode getCurrentDisplayMode() {
        return vc.getDisplayMode();
    }

    //checks if two modes match each other
    public boolean displayModesMatch(DisplayMode m1, DisplayMode m2) {
        if (m1.getWidth() != m2.getWidth() || m1.getHeight() != m2.getHeight()) {
            return false;
        }
        if (m1.getBitDepth() != DisplayMode.BIT_DEPTH_MULTI && m2.getBitDepth() != DisplayMode.BIT_DEPTH_MULTI && m1.getBitDepth() != m2.getBitDepth()) {
            return false;
        }
        if (m1.getRefreshRate() != DisplayMode.REFRESH_RATE_UNKNOWN && m2.getRefreshRate() != DisplayMode.REFRESH_RATE_UNKNOWN && m1.getRefreshRate() != m2.getRefreshRate()) {
            return false;
        }
        return true;
    }

    //make frame full screen
    public void setFullScreen(DisplayMode dm) {
        JFrame f = new JFrame();
        f.setUndecorated(true);
        f.setIgnoreRepaint(true);
        f.setResizable(false);
        vc.setFullScreenWindow(f);

        if (dm != null && vc.isDisplayChangeSupported()) {
            try {
                vc.setDisplayMode(dm);
            } catch (Exception ex) {
            }
        }
        f.createBufferStrategy(2);
    }

    //sets graphics object = this return
    public Graphics2D getGraphics() {
        Window w = vc.getFullScreenWindow();
        if (w != null) {
            BufferStrategy s = w.getBufferStrategy();
            return (Graphics2D) s.getDrawGraphics();
        } else {
            return null;
        }
    }

    //updates display
    public void update() {
        Window w = vc.getFullScreenWindow();
        if (w != null) {
            BufferStrategy s = w.getBufferStrategy();
            if (!s.contentsLost()) {
                s.show();
            }
        }
    }

    //returns full screen window
    public Window getFullScreenWindow() {
        return vc.getFullScreenWindow();
    }

    //get width of window
    public int getWidth() {
        Window w = vc.getFullScreenWindow();
        if (w != null) {
            return w.getWidth();
        } else {
            return 0;
        }
    }

    //get height of window
    public int getHieght() {
        Window w = vc.getFullScreenWindow();
        if (w != null) {
            return w.getHeight();
        } else {
            return 0;
        }
    }

    //get out of full screen
    public void restoreScreen() {
        Window w = vc.getFullScreenWindow();
        if (w != null) {
            w.dispose();
        }
        vc.setFullScreenWindow(null);
    }

    //create image compatible with monitor
    public BufferedImage createCopatibleImage(int w, int h, int t) {
        Window win = vc.getFullScreenWindow();
        if (win != null) {
            GraphicsConfiguration gc = win.getGraphicsConfiguration();
            return gc.createCompatibleImage(w, h, t);
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:12:59.993

In your animationThread class you are accessing the field "playing". This should be done using synchronized blocks. ~~As one option put the "synchronized" keyword before "playing".~~ As one option put the "volatile" keyword before "playing".

Without "synchronized" one thread may not see a change of "playing" done in another thread. So the threads may run forever. (short answer only, because I am on one of those fancy mobile devices now)

EDIT:

With the "volatile" keyword the "playing" field, the field is accessed each time its value is read or written. Without it, a Thread may use a copy of it and doesn't see when the original field has changed.

You can make blocks "synchronized":

```
boolean setRunning(boolean running) {
    synchronized (this) {
        this.playing = running;
    }
} 
```

You can make methods "synchronized":

```
synchronized boolean setRunning(boolean running) {
    this.playing = running;
} 
```

"synchronized" ensures, that no two threads execute this code at the same time and it makes sure that a thread sees an "up to date" object. For instance if one thread changes the "playing" field and when another thread enters a synchronized block, then that other thread will see the changed value of the field.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:29:55.457

我刚刚发现了一些可能需要注意的新内容：当按住右键移动精灵并更新动画时，代码正在重新执行，我通过这样做发现了

```
public void keyPressed(KeyEvent e){
    int keyCode = e.getKeyCode();
    if(keyCode == KeyEvent.VK_ESCAPE){
        stop();
    }
    if(keyCode == KeyEvent.VK_RIGHT){
        player1.setVelocityX(0.3f);
        try{
            t1.setRunning(true);
            Thread th1 = new Thread(t1);
            th1.start();
        }catch(Exception ex){System.out.println("noooo");}
        player1.setVelocityX(0);
    } 
```

起初，尽管速度在最后设置为零，但如果我按住按钮足够长的时间，精灵不会移动，精灵会跳过屏幕。

这一定是问题，但不知道如何解决它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T06:12:37.137

嘿感谢所有帮助我刚刚解决了它。

```
public void keyPressed(KeyEvent e){
    if(godDamn){
        godDamn=false;
        int keyCode = e.getKeyCode();
        if(keyCode == KeyEvent.VK_ESCAPE){
            stop();
        }
        if(keyCode == KeyEvent.VK_RIGHT){
            player1.setVelocityX(0.3f);
            try{
                t1.setRunning(true);
                Thread th1 = new Thread(t1);
                th1.start();
            }catch(Exception ex){System.out.println("noooo");}
        }
        if(keyCode == KeyEvent.VK_LEFT){
            player1.setVelocityX(-0.3f);
            try{
                t1.setRunning(true);
                Thread th1 = new Thread(t1);
                th1.start();
            }catch(Exception ex){System.out.println("noooo");}
        }
        if(keyCode == KeyEvent.VK_DOWN){
            player1.setVelocityY(0.3f);
            try{
                t1.setRunning(true);
                Thread th1 = new Thread(t1);
                th1.start();
            }catch(Exception ex){System.out.println("noooo");}
        }
        if(keyCode == KeyEvent.VK_UP){
            player1.setVelocityY(-0.3f);
            try{
                t1.setRunning(true);
                Thread th1 = new Thread(t1);;
                th1.start();
            }catch(Exception ex){System.out.println("noooo");}
        }else{
            e.consume();
        }

    }
}

//keyReleased
@SuppressWarnings("static-access")
public void keyReleased(KeyEvent e){
    int keyCode = e.getKeyCode();
    if(keyCode == KeyEvent.VK_RIGHT || keyCode == KeyEvent.VK_LEFT){
        player1.setVelocityX(0);
        try{
            this.t1.setRunning(false);
        }catch(Exception ex){}
        godDamn=true;
    }
    if(keyCode == KeyEvent.VK_UP || keyCode == KeyEvent.VK_DOWN){
        player1.setVelocityY(0);
        try{
            this.t1.setRunning(false);
        }catch(Exception ex){}
    }else{
        e.consume();
    }
} 
```

新的布尔值停止执行多个键事件。我必须微调它，但其他方面我很好。

# jquery - 如何引用 jQuery 匹配元素的值？

> ID：11285019
> 
> 赞同：2
> 
> 时间：2012-07-01T19:33:59.910
> 
> 标签：jquery, jquery-selectors

给定以下代码：

```
$(".force-selection").blur(function() {
        var value = $('matched-item').val();
        //check if the input's value matches the selected item
        if(value != $('#matched-item').data('selected-item')) {
            //they don't, the user must have typed something else
            $('#matched-item')
                .val('') //clear the input's text
                .data('selected-item', ''); //clear the selected item
        }
}); 
```

如何引用 $(".force-selection") jQuery 选择器匹配的元素？我对匿名 JS 函数不是很清楚，而且我对人们如何知道有时像这样声明它们感到困惑：

```
function() 
```

有时像这样：

```
function(event) 
```

有时像这样：

```
function(element, update, options) 
```

以及所有其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T19:36:20.097

您可以使用`.currentTarget`jQuery 事件对象作为第一个参数传递：

```
$(".force-selection").blur(function(e) { //<-- define e as parameter for this function. it's short for "event"
        e.currentTarget; //The element a blur was triggered on
        var value = $('#matched-item').val(); //<-- add "#"

        //check if the input's value matches the selected item
        if(value != $('#matched-item').data('selected-item')) {
            //they don't, the user must have typed something else
            $('#matched-item')
                .val('') //clear the input's text
                .data('selected-item', ''); //clear the selected item
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T19:36:44.693

使用 this 关键字，它指的是当前的闭包。将它包装在一个 jQuery 调用中，它会变成引用的元素。

```
$(".force-selection").blur(function() {
    var value = $('matched-item').val();
    //check if the input's value matches the selected item
    if(value != $('#matched-item').data('selected-item')) {
        //they don't, the user must have typed something else
        $('#matched-item')
            .val('') //clear the input's text
            .data('selected-item', ''); //clear the selected item
    }
    //-----
    $(this) == current .force-selection
    //-----
}); 
```

# iphone - 从 UIViewController 文件移动到单独的类文件时，UIActionSheet 代码崩溃

> ID：11285020
> 
> 赞同：2
> 
> 时间：2012-07-01T19:34:01.983
> 
> 标签：iphone, ios

我已经搜索并搜索了董事会，但无法弄清楚这一点。它必须是一些简单的东西，就在我面前。

我正在尝试清理我的代码并使其更可重用。我正在使用一些从 UIViewController 工作的 UIActionSheet 代码并制作自己的目标文件。工作正常，直到我添加 UIActionSheetDelegate 方法。

当按下按钮时，它不会触发 actionSheetCancel 方法，而是崩溃且没有堆栈跟踪。每次。

我的代码如下。任何帮助，将不胜感激。我的猜测是因为我没有使用 xcode 故事板工具将事物连接在一起，但我认为这是合法的。

egcTestSheet.h：

```
#import <UIKit/UIKit.h>

@interface egcTestSheet : NSObject <UIActionSheetDelegate> {

}

- (void) showSheet:(UITabBar *) tabBar
    displayTitle:(NSString *) name;

@end 
```

egcTestSheet.m

```
#import "egcTestSheet.h"

@implementation egcTestSheet

-(void) showSheet:(UITabBar *)tabBar displayTitle:(NSString *)name{

    UIActionSheet *menu = [[UIActionSheet alloc] initWithTitle:name
                                                      delegate:self
                                             cancelButtonTitle:@"Done"
                 destructiveButtonTitle:@"Cancel"otherButtonTitles:nil];

   [menu showFromTabBar:tabBar];
   [menu setBounds:CGRectMake(0,0,320, 700)];

}

// actionsheet delegate protocol item
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex: (NSInteger)buttonIndex{

    NSLog(@"button index = %d", buttonIndex);
}

- (void)actionSheetCancel:(UIActionSheet *)actionSheet{

    NSLog(@"in action canceled method");
}

@end 
```

从 UIViewController 对象调用代码：

```
egcTestSheet *sheet = [[egcTestSheet alloc] init];

[sheet showSheet:self.tabBarController.tabBar displayTitle:@"new test"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T19:50:11.393

您的操作表可能在被解雇时被释放（您在使用 ARC 吗？）。这意味着当它试图调用它的委托来通知该委托它的解雇/选择时，它正在尝试调用 self. 此时 Self 是一个悬空指针，因为它已被释放。

在呈现/调用此操作表的视图控制器中，设置一个属性以保留对操作表的引用。在关闭操作表时将属性设置为 nil。

# html - 居中对齐我的大照片，没有负边距

> ID：11285021
> 
> 赞同：0
> 
> 时间：2012-07-01T19:34:35.430
> 
> 标签：html, css, tumblr

我创建了一个 tumblr 主题，其中所有内容都居中且宽度为 660 像素。

但是，我还发布了 940 像素宽的大图像，并且通过给它一个负边距 -140 像素（940-660/2）来居中，但这并不理想，因为我必须将所有图像都发布为这个尺寸，或者它们只是向左对齐。

滚动到我的网站底部以查看未正确对齐的图像：http: [//seans.ws](http://seans.ws)

的CSS：

```
 section {display: block; clear: both; margin: 0 auto;width: 660px;}

        article img {clear: both; max-width: 940px; margin-left: -140px;} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T19:41:23.097

您可以在以下两种解决方案之间进行选择：

标记：

```
<div id="content">
  <div class="a"><div class="b">
    <img src="http://placekitten.com/100/100">
  </div></div>
  <div class="a"><div class="b">
    <img src="http://placekitten.com/2000/100">
  </div></div> 
```

常见的CSS：

```
#content {
    width: 300px;
    margin: 0 auto;
    border: 1px solid blue;
}
.a {
    /* extend image area */
    margin-left :-9999px;
    margin-right:-9999px;
    /* but without scrollbars */
    position: relative;
    left: -9999px;
}
.a .b {
    /* undo scrollbar-removing positioning */
    position: relative;
    left: 9999px;
} 
```

`display: table`方式：

[http://jsfiddle.net/ZhEku/3/](http://jsfiddle.net/ZhEku/3/)

```
.a .b {
    display: table;  /* shrink-wrap to content (= the image) */
    width:   300px;  /* content width, acts as min-width when display:table */
    margin:  0 auto; /* center inside the (2*9999+300)px area */
} 
```

`display: inline-block`方式：

[http://jsfiddle.net/ZhEku/4/](http://jsfiddle.net/ZhEku/4/)

```
.a {
    /* center content (= the image wrapped into .b) */
    text-align: center;
}
.a .b {
    display:    inline-block; /* shrink-wrap to content (= the image) */
    min-width:  300px;        /* content width */
    text-align: left;         /* if image is smaller than the content */
} 
```

享受:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:47:08.083

这是无限滚动js：[http ://static.tumblr.com/q0etgkr/ytzm5f1ke/infinitescrolling.js](http://static.tumblr.com/q0etgkr/ytzm5f1ke/infinitescrolling.js)

这是我的margin-left脚本，用于大于容器默认宽度的图像：

```
 <!--Dynamicaly center big images-->
    <script>
    $(window).load(function() {
        $(function() {
            $('img').css('marginLeft', function(index, value){
                if($(this).width() > 660) {
                    return -($(this).width() - 660)/2;
                }
                return value;
            });
        });
    });
    </script> 
```

我唯一需要弄清楚的是如何在动态加载的图像上执行相同的功能，因为我有无限滚动（就像底部图像直到你向下页面才会加载。

# scala - 未给出变量时如何确定变量的类型？

> ID：11285024
> 
> 赞同：6
> 
> 时间：2012-07-01T19:34:49.200
> 
> 标签：scala, types

假设，我们有类似的东西：

```
val x = "foo".charAt(0) 
```

让我们进一步假设，我们不知道方法的返回类型`charAt(0)`（当然，这是在 Scala API 中描述的）。有没有办法，我们可以找出该变量`x`在定义后具有哪种类型以及何时未显式声明？

**更新 1：** 我最初的问题不够精确：我想知道（出于调试原因）变量的类型。也许有一些编译器选项可以查看 Scala 的类型推断将变量声明为什么类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T20:12:21.283

假设您在名为 的源文件中有以下内容`Something.scala`：

```
object Something {
  val x = "foo".charAt(0)
} 
```

您可以使用`-Xprint:typer`编译器标志在编译器`typer`阶段之后查看程序：

```
$ scalac -Xprint:typer Something.scala
[[syntax trees at end of typer]]// Scala source: Something.scala
package <empty> {
  final object Something extends java.lang.Object with ScalaObject {
    def this(): object Something = {
      Something.super.this();
      ()
    };
    private[this] val x: Char = "foo".charAt(0);
    <stable> <accessor> def x: Char = Something.this.x
  }
} 
```

你也可以`:type`在 REPL 中使用：

```
scala> :type "foo".charAt(0)
Char

scala> :type "foo".charAt _
Int => Char 
```

正如 Luigi Plinge 在上面的评论中指出的那样，您的 IDE 还可能提供更好的方式来获取此信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T19:46:03.447

使用此方法解决问题：

```
x.getClass 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-01T21:29:25.690

这是 Travis 第一个替代方案的更简单版本：

```
dcs@dcs-132-CK-NF79:~/tmp$ scala -Xprint:typer -e '"foo".charAt(0)'
[[syntax trees at end of                     typer]] // scalacmd8174377981814677527.scala
package <empty> {
  object Main extends scala.AnyRef {
    def <init>(): Main.type = {
      Main.super.<init>();
      ()
    };
    def main(argv: Array[String]): Unit = {
      val args: Array[String] = argv;
      {
        final class $anon extends scala.AnyRef {
          def <init>(): anonymous class $anon = {
            $anon.super.<init>();
            ()
          };
          "foo".charAt(0)
        };
        {
          new $anon();
          ()
        }
      }
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-05T20:44:15.973

如果您使用[IntelliJIDEA](https://confluence.jetbrains.com/display/IntelliJIDEA/Working+with+Scala+Show+Type+Info+Action)，要在编辑器中显示类型信息操作，请导航到该值并按`Alt`+ `=`（对于 Windows）和`Ctrl`+ `Shift`+ `P`（对于 Mac）：

[![在此处输入图像描述](../Images/a7230ba9487108bbae7f5c240ef6b2bc.png)](https://i.stack.imgur.com/aN0hk.png)

在编写代码时，我发现它非常方便。

# data-mining - 生成输出 zip 文件后如何从 KEEL 读取结果？

> ID：11285026
> 
> 赞同：1
> 
> 时间：2012-07-01T19:34:58.773
> 
> 标签：data-mining

KEEL（基于进化学习的知识提取）
生成输出 zip 文件后如何从 KEEL 读取结果？我下载 KEEL 并导入我的数据，然后添加算法。此应用程序的执行生成 zip 文件。生成输出 zip 文件后如何从 KEEL 读取结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-10T22:42:08.007

在 Scripts 文件夹上运行 RunKeel.jar 后，在 .zip 中查找“结果文件夹”，使用文本编辑器编辑文件并找到所需的值。在实现实验设计时，最好使用 Vis-Clas-General（算法，用于显示多个结果）。

# c++ - 模板特化还是条件表达式？

> ID：11285032
> 
> 赞同：3
> 
> 时间：2012-07-01T19:35:23.017
> 
> 标签：c++, templates, specialization, open-closed-principle

我深入研究了一个新项目，我用一堆模板和它们的专业化来解决这个问题。现在，在一天没有编程之后，我发现自己在问是否真的值得额外的代码行。

问题是：专业化有什么好处？

这是：

```
template <int i> class A {};
template <> class A <1> { void foo() {/* something */}  };
template <> class A <2> { void foo() {/* something else*/}  };
template <> class A <3> { void foo() {/* even different*/}  }; 
```

在任何方面都比更好（更快的执行）

```
template <int i> class A { 
   void foo() {
      if (i==1) {/* something */}
      else if (i==2) {/* something else*/}
      else if (i==3) {/* even different*/}
   }
}; 
```

?

编辑：

该代码是供其他人使用的库的一部分。我使用的是 gcc 4.6.3，但最终代码将与不同的编译器一起使用。

编辑：

这两段代码使用 gcc 4.6.3 生成相同的二进制文件。我无法测试完整的案例，因为我的实际代码远不能使用。这似乎真的是一个原则问题，多功能性，可重用性，可维护性等......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T20:00:35.517

速度不是这里的主要问题，但可扩展性才是。

专业化的好处是您可以让您的代码的客户更轻松地添加新的`foo()`. 假设您稍后决定为 : 添加新行为`i=4`：在第一种方法中，您只需添加一个新的特化；在第二个版本中，您需要修改功能`foo()`。如果您以二进制形式发布您的库，客户将不高兴。

专业化方法对第二种方法的偏好是**开放/封闭原则**的体现：代码应该对扩展开放，对修改关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T20:11:53.497

您在问“为什么模板专业化更好”，但让我说为什么它更糟。我想至少有一些 , 和 的代码`i=1`是`i=2`常见`i=3`的（否则，为什么它有相同的名称？）。如果是这样，当你进行专业化时，你可能不得不复制一些代码，这使得代码难以维护。

代码重复最好留给编译器，它可以很好地使用这些 if-elseif-else 结构。你甚至可以拥有`if (i<3)`，这将是非常尴尬的专业化实现。

当然，如果您的功能几乎完全不同，那么在使用模板专业化时您不会遇到这个缺点（并且您会获得优势）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T19:43:17.723

这取决于使用的编译器。我自己写了很多这样的代码，我的编译器为我做了正确的事情。但是，由于 C++ 标准中没有任何内容要求编译器在这方面很聪明，因此您可能会遇到麻烦。因此，请确保您的编译器做正确的事情。作为一般经验法则 - 如果您正在编写一个旨在供其他人使用的可重用库，如果您打算将此代码移植到不同的编译器和/或异国环境等，请不要依赖此功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-01T20:51:59.187

有时不可能将代码编写为一个函数，因为有效的代码`i=1`可能对 无效`i=2`，即使它从未执行过，编译器也会窒息！

例如：

```
template <int i> class A { 
   void foo() {
      if (i==1)
      {
          cout << "Easy";
      }
      else if (i==2)
      {
          int stuff[100 * i - 110] = {42}; // error: negative array size for i=1
          cout << stuff[0];
      }
      else if (i==3)
      {
          /* even different*/
      }
   }
}; 
```

# url - 简单的脚本问题

> ID：11285036
> 
> 赞同：0
> 
> 时间：2012-07-01T19:35:42.780
> 
> 标签：url, variables

我是 shell 脚本的新手，有一些简单的问题，希望有人可以在这里回答。我有一个脚本由某人提供，其中 java 函数具有以下格式：

```
#!/bin/sh
myCall() {
  file=$1

  cd /xyz/pqr/lmn/gqa/

  java -DServletURL=https://bps.hg2.com/bps/bpServlet XMLuser $file > $xlfile
} 
```

在上面的 url 部分必须根据用户选择在需要时替换为不同的 url。

myCall 函数在脚本中至少被调用两次，并且值必须改变。ecah 调用部分 XMLuser$ $file > $xfile 保持不变，仅需要替换 https 添加 ahs。一旦脚本工作，它将根据需要用作 cron 来针对 diff url 运行。

我使用简单的变量并将其放在 myCall 之前以确定 url，然后根据用户选择来确定脚本，但它不起作用。java -DServletURL=https://bps.hg2.com/bps/bpServlet XMLuser $file > $xlfile 不结合 (java -DServletURL= urla XMLuser $file> $xlfile) 成为用于服务器登录的单个单元.

```
$url=""
echo "Please select server - A, B or C"
read server
if $server = A; then
$url = "http://www.urla.com"
else $server = B; then
$url = http://www.urlb.com"
else $server = C; then
$url = "http://www.urlc.com"
fi 
```

请告诉我可以在这里改变什么。太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:23:55.337

*   [条件](http://tldp.org/LDP/abs/html/tests.html)应针对测试程序编写（测试或 [ ] ）
*   变量应该在没有 $ 赋值的情况下写入，并在引用时使用 $ 标记
*   在赋值时，变量名、= 和值之间不应有空格。

> ```
>  url=""
>  echo "Please select server - A, B or C"
>  read server
>  if [ $server = "A" ]; then
>     url="http://www.urla.com"
>  fi
>  if [ $server = "B" ]; then
>     url="http://www.urlb.com"
>  fi
>  if [ $server = "C" ]; then
>     url="http://www.urlc.com"
>  fi
>  # myCall $url
>  echo $url 
> ```

请注意，如果您想要一个真正的 if -else if - else 构造，那么您可以使用 elif

```
 if [ condition ]; then
      ...
 elif [ condition ]; then
      ...
 else
      ...
 fi 
```

# sql-server-2008 - 实体框架：使用多个模式或两个不同的数据库？

> ID：11285037
> 
> 赞同：0
> 
> 时间：2012-07-01T19:36:03.037
> 
> 标签：sql-server-2008, entity-framework, entity-framework-4, schema, database-schema

我有一个现有的数据库，需要添加其他表等。我无法控制数据库，所以我想我会在同一个数据库中创建我的表，但在不同的模式下。据我了解，这将允许我创建我的表，而不必担心名称冲突等。

但是我如何通过 EF 同时访问这两个模式？我本质上会有两个不同的连接吗？或者我会有两种不同的背景？

我的另一个选择是创建另一个数据库，但我不知道这有什么优缺点。当然，我需要在我的表和其他表之间创建 INNER JOINS。是否可以在 EF 中在 2 个不同的模式或数据库之间使用内部连接？

我使用的数据库是 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:02:35.460

如果您想在来自两个模式的表之间使用连接，则这两个表必须在相同的上下文中定义（这也意味着将使用单个连接）。

一旦您使用两种不同的上下文类型分别映射每个架构，或者一旦您使用两个数据库，您将无法在 Linq-to-entities / ESQL 查询中使用来自其他架构的实体，并且您将无法使用导航属性到表从其他架构。这种情况下的解决方法很复杂，因为您必须使用别名或数据库视图将表从第二个数据库获取到第一个数据库。

EF 只能使用映射到当前上下文的数据库对象，并且只能打开与单个数据库的连接（它也不能使用数据库前缀来访问同一服务器上不同数据库中的表）。

# objective-c - 运行时状态栏应用程序图像正在拉伸。怎么修？

> ID：11285038
> 
> 赞同：3
> 
> 时间：2012-07-01T19:36:08.647
> 
> 标签：objective-c, xcode, macos, image, cocoa

在我的 IB 中，我有这个：
![在此处输入图像描述](../Images/c0e3f4fe6bcdd5e3400965df5fac455b.png)

它看起来正确，没有问题。但是当我运行应用程序时，我看到的是： ![在此处输入图像描述](../Images/ea16410ac0d51a19b5a03ca440aaeb3c.png)

它在拉伸，看起来不正确。
有什么问题？谢谢。

我不知道这是否重要，但我在资源中也有这张图片的@2x。
跑在狮子身上。

编辑：我更改了图像的名称，现在可以正常工作了。也许这是Xcode的一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:31:34.383

尝试不使用@2 并检查您的 plist 以查看您是否更改了任何内容。

# php - mkdir('../media/magazines/'.$id, 0755) 显示警告：没有这样的文件或目录

> ID：11285040
> 
> 赞同：0
> 
> 时间：2012-07-01T19:36:12.040
> 
> 标签：php, wamp, mkdir

我不知道这个功能有什么问题。我正在尝试`$date/$recid`在“媒体/杂志”目录中创建一个目录。此函数有时会创建它，但有时会显示警告

```
Warning: mkdir() [function.mkdir]: No such file or directory in C:\wamp\www\locallink\cpl_locallink\magazine.php on line 77
Call Stack 
```

我在 Windows 7 上使用 wamp 作为我的服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T19:40:12.047

试试这个：

```
mkdir('../media/magazines/'.$id, 0755, True) 
```

这里的重点是新参数：第三个参数`True`，表示`mkdir`它必须递归地创建目录。当递归关闭时，所有父目录必须已经存在（`../media/`在我们的例子中）；但是当递归打开时，它们会自动创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:40:49.357

当路径包含正斜杠时， “ [mkdir](http://php.net/manual/en/function.mkdir.php) ”函数在 Windows 上无法正常运行。没有创建带有正斜杠的路径部分。

```
mkdir('c:/a/b/c/d', 0775, true); 
```

您收到错误消息：警告：mkdir() [function.mkdir]：没有这样的文件或目录

请在 Windows 下使用反斜杠或使用常量 DIRECTORY_SEPARATOR。

```
mkdir('c:\a\b\c\d', 0775, true);
mkdir('c:'.DIRECTORY_SEPARATOR.'a'.
DIRECTORY_SEPARATOR.'b'.
DIRECTORY_SEPARATOR.'c'.
DIRECTORY_SEPARATOR.'d', 0775, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T19:41:39.637

您必须一一创建目录。$date/$recid 是 2。

```
mkdir($date);
mkdir($date."/".$recid); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T19:41:41.617

您不能在同一命令中创建两个目录，您必须分两步执行此操作：

```
if (!file_exists($date)) {

    mkdir($date);
}

if (!file_exists($date . '/' . $recid)) {

    mkdir($date . '/' . $recid);
} 
```

**编辑：**

您可以使用递归参数：

```
mkdir($date . '/' . $recid, 0755, true); 
```

# c# - 将两个具有不同对象的列表相交

> ID：11285045
> 
> 赞同：25
> 
> 时间：2012-07-01T19:36:26.363
> 
> 标签：c#, linq

我有一个 ObjA 和 ObjB 列表，如下所示：

```
List<ObjA> List1;
List<ObjB> List2; 
```

ObjA 和 ObjB 都有一个公共字段，即用户，我想根据 User.Id 将它们相交。

```
class ObjA
{ 
  User user;
  .... other properties
}

class ObjB
{ 
  User user;
  .... other properties
}

class User
{
    int Id;
     .... other props
} 
```

如何将 User.Id 上的这两个列表与 linq 相交？

**结果，我只想要用户列表。**

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-01T19:39:18.897

总体思路是

```
var commonUsers = list1.Select(a => a.User).Intersect(list2.Select(b => b.User)); 
```

但是，这本身就假设`User`implements `IEquatable<User>`，这似乎不是这里的情况。因此，您要么需要添加此实现，要么使用`Intersect`接受自定义的重载[`IEqualityComparer<User>`](http://msdn.microsoft.com/en-us/library/ms132151)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-02T01:18:02.487

1.看这个简单的代码

```
 var result = (from objA in objAList
                join objB in objBList on objA.user.Id equals objB.user.Id
                select objA/*or objB*/).ToList(); 
```

2.完整的代码

```
 class QueryJoin
{
    static void Main(string[] args)
    {
        //create users
        User user1 = new User { Id = 1, Name = "anuo1" };
        User user2 = new User { Id = 2, Name = "anuo2" };
        User user3 = new User { Id = 3, Name = "anuo3" };
        User user4 = new User { Id = 4, Name = "anuo4" };
        User user5 = new User { Id = 5, Name = "anuo5" };
        //create objAList
        List<ObjA> objAList = new List<ObjA>();
        objAList.Add(new ObjA { user = user1 });
        objAList.Add(new ObjA { user = user2 });
        objAList.Add(new ObjA { user = user3 });
        //create objBList
        List<ObjB> objBList = new List<ObjB>();
        objBList.Add(new ObjB { user = user3 });
        objBList.Add(new ObjB { user = user4 });
        objBList.Add(new ObjB { user = user5 });

        //intersect
        var result = (from objA in objAList
                      join objB in objBList on objA.user.Id equals objB.user.Id
                      select objA/*or objB*/).ToList();

    }

}

class ObjA
{
    public User user { get; set; }
}

class ObjB
{
    public User user { get; set; }
}

class User
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-01T19:46:54.773

不需要 IEqualityComparer 或 IEquatable （反正会更好）

```
var commonUsers = list1
                  .Select(l1 => l1.User)
                  .Where(u => list1
                       .Select(l => l.User.Id)
                       .Intersect(list2
                          .Select(l2 => l2.Id))
                       .Contains(u.Id)); 
```

或者

```
var commonUsers = list1.Select(l1 => l1.User)
                      .Where(u=> list2.Select(l2 => l2.User.Id)
                                        .Contains(u.Id)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-01T19:41:31.853

标准方法是利用`IEqualityComparer`对象。默认使用标准相等比较。创建一个实现`IEqualityComparer`接口并执行所需比较的类。然后你可以调用一个`IEnumerable.Intersect`接受自定义比较类实例的重载

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-21T08:17:08.757

您可以使用扩展方法 Linq

`var result = List1.Join(List2, e1 => e1.ID, e2 => e2.ID, (e1, e2)=> e1);`

欲了解更多信息，您可以访问[https://www.tutorialsteacher.com/linq/linq-joining-operator-join](https://www.tutorialsteacher.com/linq/linq-joining-operator-join)

# css - 使用 css 自定义选择框在不同浏览器中的行为不同？

> ID：11285046
> 
> 赞同：0
> 
> 时间：2012-07-01T19:36:30.743
> 
> 标签：css, select

我已经自定义了 HTML 选择框，看起来像这样

![在此处输入图像描述](../Images/edb18c7058ec6173d0896ae744b55270.png)

但它在不同的浏览器中显示不同。在 Mozilla 中它运行良好。但在 IE 和 Chrome 中，它并没有像在 Mozilla 中那样显示。

甚至选项边框也无法正确显示。

请帮我。

这是 [jsfiddle](http://jsfiddle.net/hKH6L/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:29:48.080

许多东西在不同的浏览器中呈现不同。尽管情况正在好转，但跨浏览器测试仍然占据了任何 Web 开发人员角色的很大一部分。

表单元素特别难以有效地设置样式，因为它们的视觉外观由底层操作系统和浏览器控制。

要在浏览器中一致地设置选择框的样式，您需要使用[Uniform](http://uniformjs.com/)之类的东西（需要 jQuery）

# html - 让浮动 div 在另一个 div 中创建滚动条？

> ID：11285047
> 
> 赞同：0
> 
> 时间：2012-07-01T19:36:36.700
> 
> 标签：html, scroll

我有多个 div 在另一个 div 中向左浮动。现在，当这些 div 比它们所在的 div 更宽时，它们会转到下一行，而不是像我想要的那样制作水平滚动条！我的 div 的 CSS：

外部div：

```
display:block;
border-width:1px;
border-style:solid;
border-color:black;
margin-left:auto;
margin-right:auto;
height:20px;
width:200px;
overflow:auto; 
```

内部div：

```
min-width:16px; //contains text, so it gets wider usually
float:left;
padding-left:2px;
padding-right:2px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:20:00.443

添加overflow-x: 滚动到outerdiv。仅供参考：overflow-x 属性在 IE8 及更早版本中无法正常工作。因此，如果您需要它在 IE8 或更早版本中工作，您可能需要一个 javascript 解决方案。

# python - 将唯一的无序集添加到列表中

> ID：11285049
> 
> 赞同：0
> 
> 时间：2012-07-01T19:36:48.820
> 
> 标签：python, algorithm

我必须从数字列表中创建唯一的、无序的 2 个元素集。然后将每个集合插入到一个列表中。

例如：

1.  集合列表 = [(2,1)]
2.  唯一编号 = [1,2,3]
3.  独特的集合 - (1,2),(2,3),(1,3)
4.  `setslist`如果它不存在，则插入每个集合。（集合是无序的。所以 (1,2) 与 (2,1) 相同）
5.  最后`setslist = [(2,1),(2,3),(1,3)]`

python中最优化的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T19:43:27.490

```
>>> from itertools import combinations
>>> lis=[1,2,3,4,5]
>>> [x for x in combinations(lis,2)]
[(1, 2), (1, 3), (1, 4), (1, 5), (2, 3), (2, 4), (2, 5), (3, 4), (3, 5), (4, 5)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T19:42:13.440

```
import itertools
existing_sets = set(frozenset(x) for x in setslist)
new_sets = set(frozenset(x) for x in itertools.combinations(uniquenumbers, 2))
setslist = list(existing_sets | new_sets) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T21:12:52.100

To expand on Ignacio's advice about `frozenset`:

```
In [1]: from itertools import combinations

In [2]: sets = set([frozenset([1, 2])])

In [3]: uniquenumbers = [1,2,3]

In [4]: sets.update(map(frozenset, combinations(uniquenumbers, 2)))

In [5]: sets
Out[5]: set([frozenset([1, 3]), frozenset([1, 2]), frozenset([2, 3])]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T19:39:40.500

使用`frozenset`s 代替，并将它们添加到`set`.

# asp.net - HTTP 响应正在破坏返回字符串

> ID：11285055
> 
> 赞同：0
> 
> 时间：2012-07-01T19:37:55.127
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-4, asp.net-web-api

我在 web api 中有一个控制器操作，它返回字符串令牌，如下所示。但是，问题是每当服务器端响应字符串中出现“/”时，在客户端我总是得到“/”而不是“\”被添加到原始字符串。我怎样才能摆脱它？

![在此处输入图像描述](../Images/caeddacd9170beee72168c93ffa112d7.png)

```
public string GetTrackProfile()
 {
    string token="0Q2l7m4dAekjCt/yIxk0txzyZAxjZMYZq6+OAXHPNorrel7hez2vnkLe61Mf2ZLL";
    return token;
 } 
```

**客户端响应**

0Q2l7m4dAekjCt/yIxk0txzyZAxjZMYZq6+OAXHPNorrel7hez2vnkLe61Mf2ZLL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T19:47:53.610

如果此字符串是 HTTP 标头的一部分，那么您应该知道，根据[RFC 2616 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2) `/`，它被视为分隔符并且必须正确转义（这就是 Web API 通过在它前面添加 来为您所做的`\`）：

> 许多 HTTP/1.1 标头字段值由由 LWS 或特殊字符分隔的单词组成。这些特殊字符必须在要在参数值中使用的带引号的字符串中（如第 3.6 节中所定义）。
> 
> ```
>  token          = 1*<any CHAR except CTLs or separators>
>    separators     = "(" | ")" | "<" | ">" | "@"
>                   | "," | ";" | ":" | "\" | <">
>                   | "/" | "[" | "]" | "?" | "="
>                   | "{" | "}" | SP | HT 
> ```

* * *

更新：

根据评论，这个字符串是 JSON 序列化响应的一部分。它被正确编码。让我们看下面的例子：

```
var json = {"d":"a\/b"};
alert(json.d);​ 
```

当您[执行此代码](http://jsfiddle.net/ztFze/1/)时，将显示正确的字符串 - `a/b`。所以这是一个完全正常的行为。

# virtual-memory - 虚拟内存大小和分配

> ID：11285057
> 
> 赞同：0
> 
> 时间：2012-07-01T19:38:02.907
> 
> 标签：virtual-memory, virtual-address-space, address-space

> 在 32 位 x86 系统上，总虚拟地址空间的理论最大值为 4 GB。默认情况下，Windows 将此地址空间的一半（4 GB 虚拟地址空间的下半部分，从 x00000000 到 x7FFFFFFF）分配给进程作为它们唯一的私有存储，并将另一半（上半部分，地址 x80000000 到 xFFFFFFFF）用于它自己受保护的操作系统内存利用率。
> 
> 64 位 Windows 为进程提供了更大的地址空间：IA-64 系统上为 7152 GB，x64 系统上为 8192 GB。

我对上述报价有几个问题：

1.  为什么为进程分配低地址空间？
2.  “...使用另一半（上半部分，地址 x80000000 到 xFFFFFFFF）用于其自身受保护的操作系统内存利用率。” - 为什么操作系统不使用物理地址作为系统地址空间，而是使用虚拟地址？
3.  为什么在 x64 系统上 8192GB 用于进程和系统？与 32 位操作系统相反，不是所有的地址空间都被使用？

谢谢

# .net - Azure - 表存储建模

> ID：11285059
> 
> 赞同：0
> 
> 时间：2012-07-01T19:38:23.340
> 
> 标签：.net, azure, nosql, azure-storage

是否有关于如何正确设计`Table Storage`数据的参考？什么放在分区里，什么放在表里？是否有任何要遵循的原则（如 SQL 中的 ER 模型）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T19:56:19.743

一般来说，您需要确保您的内容搜索是有效的。数据基于分区键存储并在行键上建立索引。例如，如果您将应用 ID 作为分区键，将客户 ID 作为行键，那么您可以非常快速地搜索客户。但是：想象一下必须按客户的姓氏（另一个属性）进行搜索。现在您需要在应用程序的分区内进行表扫描。您可能需要第二个表来将客户的姓氏（作为行键）映射到客户 ID（属性）。

要查看一些实际指导，请查看[这篇 msdn 文章](http://msdn.microsoft.com/en-us/library/windowsazure/hh508997.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:33:46.770

另一种观点是将分区 + 行键设想为类似于 SQL Server 数据库的主键（以聚集索引形式存储）。

将主键确定为一个或多个子键的复合键（取决于您的查询需要），然后根据应用程序的可伸缩性要求将主键适当地拆分为分区段和行段。

# plugins - Javascript水平滑块不起作用

> ID：11285062
> 
> 赞同：0
> 
> 时间：2012-07-01T18:54:38.440
> 
> 标签：plugins, jquery, javascript

我正在使用旧版本的 Slidedeck 插件 (v.1.4.5)，并且我正在使用的其中一种皮肤存在 javascript 问题。更准确地说，水平幻灯片被缝合在一起，我不知道如何解决这个问题。我希望每张幻灯片都是独立的，不会在活动幻灯片上看到下一张或上一张幻灯片的任何内容。

您可以在下面的屏幕截图中看到，中间幻灯片具有上一张和下一张幻灯片的可见内容，显然我不想看到这些内容。

![在此处输入图像描述](../Images/20fe6580bfa37aad4843f79e90af3c4f.png)

我应该提一下，我对 javascript / jQuery 的了解非常有限，我怀疑这是一个 js 问题，因为所有皮肤的 CSS 都是相同的——唯一的变量是每个皮肤使用的脚本。

[您可以在此网站](http://kiduniya.com/)上查看滑块行为，以下是用于滑块皮肤的完整脚本。我将不胜感激这方面的任何帮助。要更改幻灯片，请单击左侧或右侧的每个幻灯片箭头，或者您可以使用键盘上的方向键。

```
(function($){
SlideDeckSkin['fullwidth-sexy'] = function(slidedeck){
    var ns = 'fullwidth-sexy';
    var elems = {};
        elems.slidedeck = $(slidedeck);
        elems.frame = elems.slidedeck.closest('.skin-' + ns);

    // Disable spines as this skin is not meant to function with spines on
    elems.slidedeck.slidedeck().setOption('hideSpines', true);

    elems.frame.append('<a href="#prev" class="sd-' + ns + '-nav prev">Previous</a><a href="#next" class="sd-' + ns + '-nav next">Next</a>');
    elems.slidedeck.append('<div class="' + ns + '-mask left"></div><div class="' + ns + '-mask right"></div>');

    elems.frame.find('.sd-' + ns + '-nav').bind('click', function(event){
        event.preventDefault();
        var $this = $(this);
        elems.slidedeck.slidedeck().options.pauseAutoPlay = true;
        if($this.hasClass('prev')){
            elems.slidedeck.slidedeck().prev();
        } else {
            elems.slidedeck.slidedeck().next();
        }
    });
};

$(document).ready(function(){
    $('.skin-fullwidth-sexy .slidedeck').each(function(){
        if(typeof($.data(this, 'skin-fullwidth-sexy')) == 'undefined' || $.data(this, 'skin-fullwidth-sexy') == null){
            $.data(this, 'skin-fullwidth-sexy', new SlideDeckSkin['fullwidth-sexy'](this));
        }
    });
});
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T19:50:19.997

以下可能有效，但如果没有您正在尝试做的示例，很难进行测试。

我所做的是向`ns`变量添加一个唯一编号（对于我假设的命名空间）。这个编号被传递给每个函数的回调。（[文档](http://api.jquery.com/jQuery.each/ "文档")）

```
(function($){
SlideDeckSkin['fullwidth-sexy'] = function(slidedeck,uniqueName){
    var ns = 'fullwidth-sexy'+uniqueName;
    var elems = {};
        elems.slidedeck = $(slidedeck);
        elems.frame = elems.slidedeck.closest('.skin-' + ns);

    // Disable spines as this skin is not meant to function with spines on
    elems.slidedeck.slidedeck().setOption('hideSpines', true);

    elems.frame.append('<a href="#prev" class="sd-' + ns + '-nav prev">Previous</a><a href="#next" class="sd-' + ns + '-nav next">Next</a>');
    elems.slidedeck.append('<div class="' + ns + '-mask left"></div><div class="' + ns + '-mask right"></div>');

    elems.frame.find('.sd-' + ns + '-nav').bind('click', function(event){
        event.preventDefault();
        var $this = $(this);
        elems.slidedeck.slidedeck().options.pauseAutoPlay = true;
        if($this.hasClass('prev')){
            elems.slidedeck.slidedeck().prev();
        } else {
            elems.slidedeck.slidedeck().next();
        }
    });
};

$(document).ready(function(){
    $('.skin-fullwidth-sexy .slidedeck').each(function(n){
        if(typeof($.data(this, 'skin-fullwidth-sexy')) == 'undefined' || $.data(this, 'skin-fullwidth-sexy') == null){
            $.data(this, 'skin-fullwidth-sexy', new SlideDeckSkin['fullwidth-sexy'+n](this,n));
        }
    });
});
})(jQuery); 
```

# javascript - 在 Three.js 中限制帧速率以提高性能，requestAnimationFrame？

> ID：11285065
> 
> 赞同：36
> 
> 时间：2012-07-01T19:39:20.963
> 
> 标签：javascript, html, canvas, three.js, requestanimationframe

我在想，对于一些我做的项目，60fps 并不是完全需要的。我想我可以拥有更多以 30fps 运行的对象和事物，如果我能让它以该帧速率平稳运行的话。我想如果我在 three.js 中编辑 requestAnimationFrame 垫片，我可以将它限制为 30。但我想知道是否有更好的方法来使用所提供的three.js 本身。此外，这会给我带来我所想的那种性能提升吗？我能以 30 fps 渲染两倍于 60 fps 的对象吗？我知道以 30 和 60 运行的东西之间的区别，但我能否让它以平稳的恒定 30fps 运行？

我通常使用 WebGLRenderer，如果需要，我会回退到 Canvas，除非项目专门针对它，通常是 webgl 着色器项目。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-02T14:15:17.650

像这样的东西怎么样：

```
function animate() {

    setTimeout( function() {

        requestAnimationFrame( animate );

    }, 1000 / 30 );

    renderer.render();

} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-08-21T06:42:43.267

这种方法也可以工作，使用 THREE.Clock 来测量增量。

```
let clock = new THREE.Clock();
let delta = 0;
// 30 fps
let interval = 1 / 30;

function update() {
  requestAnimationFrame(update);
  delta += clock.getDelta();

   if (delta  > interval) {
       // The draw or time dependent code are here
       render();

       delta = delta % interval;
   }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-02T08:52:40.410

CPU 和 GPU 需要做的工作量取决于工作负载，它们设置了平滑帧速率的上限。

*   GPU 主要以线性方式工作，并且总是可以将相同数量的多边形推送到屏幕上。

*   但是，如果您将对象数量增加了一倍，CPU 必须更加努力地为所有对象设置动画（矩阵变换等）。这取决于您的世界模型和其他工作 Javascript 会提供多少额外开销。此外，*可见*物体的数量等条件也很重要。

对于所有多边形始终在屏幕上的简单模型，它应该几乎遵循“一半帧速率，双倍对象”的规则。对于类似 3D 射击游戏的场景，这绝对不是这种情况。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-11T21:06:09.047

我遇到了这篇文章，它提供了两种解决自定义帧速率问题的方法。

[http://codetheory.in/controlling-the-frame-rate-with-requestanimationframe/](http://codetheory.in/controlling-the-frame-rate-with-requestanimationframe/)

我认为这种方式更健壮，因为即使在不能以 60 fps 始终如一地渲染画布的计算机上，它也将具有稳定的动画速度。下面是一个例子

```
var now,delta,then = Date.now();
var interval = 1000/30;

function animate() {
    requestAnimationFrame (animate);
    now = Date.now();
    delta = now - then;
    //update time dependent animations here at 30 fps
    if (delta > interval) {
        sphereMesh.quaternion.multiplyQuaternions(autoRotationQuaternion, sphereMesh.quaternion);
        then = now - (delta % interval);
    }
    render();
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-08-25T02:55:50.593

与不限制 fps 相比，接受的答案有问题，并且在慢速计算机上最多放弃 -10fps，例如不限制 36pfs，接受的解决方案为 26fps（对于 60fps，1000/60 setTimeout）。

相反，您可以这样做：

```
var dt=1000/60;
var timeTarget=0;
function render(){
  if(Date.now()>=timeTarget){

    gameLogic();
    renderer.render();

    timeTarget+=dt;
    if(Date.now()>=timeTarget){
      timeTarget=Date.now();
    }
  }
  requestAnimationFrame(render);
} 
```

如果它已经落后，这种方式不会等待。

# ruby-on-rails - 如何以正确的方式防止对协会的大规模分配？

> ID：11285074
> 
> 赞同：2
> 
> 时间：2012-07-01T19:40:45.843
> 
> 标签：ruby-on-rails, mass-assignment

假设我有一个模型`Warehouse`、一个模型`Car`和一个模型`Dealer`。

模型`Car`就像：

```
attr_accessible :make, :year
belongs_to :warehouse
belongs_to :dealer 
```

控制器`Cars`就像：

```
def create
  car = current_dealer.find(params[:car][:warehouse_id]).cars.new(params[:car])
  car.save!
end 
```

的观点`Cars#new`是这样的：

```
<%= semantic_form_for @car do |f| %>
  <%= f.inputs do %>
    <%= f.input :warehouse, :include_blank => false %>
    <%= f.input :make %>
    <%= f.input :year %>
  <% end %>
<% end %> 
```

经销商加车时可以选择仓库，上面的代码是防止批量分配的*（也就是经销商将汽车添加到他们不拥有的仓库）*，但是它引发了一个异常说`:warehouse_id`不能批量分配，那是因为它带有参数太像了`params[:car][:warehouse_id]`。

如何在不手动分配属性的情况下摆脱该错误？无论如何，这是一个好方法吗？

PS我试过`params[:car].delete(:warehouse_id)`，但这看起来不是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T19:47:38.523

由于 :warehouse_id 不是 car 的大量可分配属性，因此您不能从表单将其作为 car 的属性发布。如果您以这种方式命名参数，即使您在控制器中对它们不做任何操作，Rails 也会引发质量分配错误。

而不是做（非格式特定）：

```
<%= f.hidden_field :warehouse_id %> 
```

做：

```
<%= hidden_field_tag :warehouse_id, @car.warehouse_id %> 
```

我对formtastic不太熟悉，但我认为上面的行应该有效。

在控制器中：

```
def create
  @car = current_dealer.find(params[:warehouse_id]).cars.new(params[:car])
  @warehouse = Warehouse.find(params[:warehouse_id])
  @car.warehouse = @warehouse
  @car.save!
end 
```

这有点乏味，我知道。不幸的是，保护您的代码需要更多的努力。

**结论**： `params[:car][:warehouse_id]`=批量分配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:37:45.330

**停止使用 attr_accessible，使用[strong_parameters](https://github.com/rails/strong_parameters/)**

消除`attr_accessible :make, :year`

添加`gem 'strong_parameters'`到您的 Gemfile。

添加`include ActiveModel::ForbiddenAttributesProtection`到您的每个模型中。

然后，替换：

```
car = current_dealer.find(params[:car][:warehouse_id]).cars.new(params[:car]) 
```

和：

```
car = current_dealer.find(params[:car][:warehouse_id]).cars.new(params.require(:car).permit([:make, :year])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:50:54.470

批量分配仅确定是否可以通过表单（或 API）设置字段，它不控制可以设置的内容。问题是您正在尝试使用质量分配来控制数据的验证或限制。在您的情况下，您希望能够`warehouse_id`通过用户选择的选择列表保存 a，因此它必须可用于批量分配以使用标准参数方法来创建汽车。

建议的解决方案是首先使用 Formtastic`select`输入来限制经销商可能选择的值。虽然我不知道您目前如何限制仓库，但一般版本是：

```
f.input :warehouse, :as => :select, :collection => "Whatever your selection rule is" 
```

这应该确保只有经销商可用的仓库列表实际显示在表格中。

这并不能解决具有足够技术知识的人可以更改 URL 中的warehouse_id 并仍然发布到他们不拥有的仓库的问题。因此，您还应该在 Car 模型上添加一个验证，以确保只有属于经销商的仓库才是有效的选择。

这应该可以解决您的问题，为您需要的仓库 ID 保留批量分配，同时仍确保经销商只能选择属于他们的仓库。

# django - 使用自定义用户模型和表在 django 中进行用户身份验证

> ID：11285076
> 
> 赞同：1
> 
> 时间：2012-07-01T19:41:09.357
> 
> 标签：django, authentication, django-models, python-2.7

我对 Django 很陌生，想询问有关用户身份验证和登录的问题。我阅读了文档，但无法找到有关我要完成的工作的正确答案/方向。基本上，我必须集成到遗留系统中，所以我不能使用默认`auth_user`表或类似的东西。我在我的应用程序中定义了一个模型，如下所示：

```
class User(models.Model):
    class Meta:
    db_table = 'user'
    def __unicode__(self):
    return self.first_name + ' ' + self.last_name

    first_name = models.CharField(max_length=64)
    last_name = models.CharField(max_length=64)
    email = models.CharField(max_length=64)
    password = models.CharField(max_length=32)
    active = models.CharField(max_length=1)
    last_modified = models.DateTimeField("last modified")
    timestamp = models.DateTimeField("timestamp") 
```

我的问题是，我如何利用上述模型（或者我应该对其进行哪些更改）来使用身份验证应用程序？现在，根据文档，我有以下用于身份验证的后端：

```
class CustomAuth(ModelBackend):
    def authenticate(**credentials):
        return super(CustomAuth, self).authenticate(**credentials)

    def authenticate(self, username=None, password=None):    
        # Check the username/password and return a User.
        if username != None and password != None:
            # Get the user
            try:
                user = User.objects.get(email=username)
                if user.check_password(password):
                    logger.info('User is authenticated, logging user in')
                    return user
            except User.DoesNotExist:
                pass
        return None

    def get_user(self, user_id):
        try:
            return User.objects.get(id=user_id)
        except User.DoesNotExist:
           return None 
```

我尝试按以下方式进行测试：

```
user = authenticate(username='test@gmail.com', password='testUser') 
```

我不断收到各种错误，例如`'module' object is not callable`. 我还在`settings.py`文件中包含了我的自定义身份验证。有什么我正在尝试做的例子吗？任何帮助表示赞赏，谢谢！

**编辑** 我将模型更改为以下内容：

```
from django.db import models
from django.contrib.auth.models import User as AuthUser, UserManager

# Extend the base User model
class User(AuthUser):
    class Meta:
        db_table = 'user'

    active = models.CharField(max_length=1)
    last_modified = models.DateTimeField("last modified")

    objects = UserManager() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T19:52:26.703

看起来一个问题是您的自定义后端有两种`authenticate`方法。您可能想删除最上面的那个。

这是[一个](http://www.micahcarrick.com/django-email-authentication.html)如何编写自定义后端来处理基于电子邮件地址的登录的示例。

# facebook - facebook应用程序添加时间线

> ID：11285079
> 
> 赞同：0
> 
> 时间：2012-07-01T19:41:32.353
> 
> 标签：facebook, facebook-timeline

我制作了一个 facebook 应用程序，虽然它可以工作（我认为）但它看起来不像普通的 facebook 应用程序！

在我的情况下，第一个应用程序页面没有出现！

本页： http: [//pollsdb.com/app1.png](http://pollsdb.com/app1.png)

除了当我打开应用程序时，它不会在我的时间轴中显示我访问或打开此应用程序

如何做到欢迎页面并在用户时间轴中显示？这是我的应用程序 [http://apps.facebook.com/asmgxtestone/?fb_source=search&ref=ts&qtnid=12](http://apps.facebook.com/asmgxtestone/?fb_source=search&ref=ts&qtnid=12)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:51:22.807

> 在我的情况下，第一个应用程序页面没有出现！

这不是应用程序的“第一页”，而是**OAuth 对话框**。

您可以在您的应用程序设置中启用经过*身份验证的推荐*，然后当用户在 facebook 中单击指向您的应用程序的某些链接时，将提示他们连接到您的应用程序（fe 提要故事）。

要对来自不同地方的用户进行身份验证/连接，您必须自己进行 OAuth - 请参阅文档，[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

> 除了当我打开应用程序时，它不会在我的时间轴中显示我访问或打开此应用程序

由于您尚未实现 OAuth，因此没有什么可显示的，因为您实际上无法连接到您的应用程序。

一旦你启用了它（加上在你的应用程序设置中将*社交发现*设置为启用），提要故事将不会立即出现——它需要一定的分布和用户群才能开始出现这些故事。

> 这是我的应用

链接不起作用，只是给出一个错误，说应用程序开发人员搞砸了。

# c# - 如何以正确的方式将字符串与文本进行比较？

> ID：11285080
> 
> 赞同：0
> 
> 时间：2012-07-01T19:41:34.237
> 
> 标签：c#

> **可能重复：**
> [C# 中字符串比较方法的差异](https://stackoverflow.com/questions/44288/differences-in-string-compare-methods-in-c-sharp)

我知道在 C# 中字符串是对象，我刚刚了解了比较两个字符串时的 CompareTo 方法。但是如果我需要将字符串与特定的文本值进行比较怎么办？

现在我正在这样做：

```
private string choice;

[...some code...]

if (choice == "1")
        {
            Console.WriteLine("You choose 1");
            Console.ReadLine();
        }
        else if (choice == "2")
        {
            Console.WriteLine("You choose 2");
            Console.ReadLine();
        }
etc... 
```

它就像我想要的那样工作。但它是好的编码吗？找不到有关此特定主题的任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T19:50:43.880

使用内置的比较机制比较字符串通常会更好，因为它们可以清楚地说明您在做什么。

例如：

```
public void Compare()
{
    string s1 = "2";
    string s2 = "" + 2;
    string.Equals(s1, s2, StringComparison.InvariantCultureIgnoreCase);
} 
```

每个人都可以在这里看到，您将忽略此案例，并且文化与此比较无关。

在您的特殊情况下，我会考虑使用 TryParse，因为您将在这里有一个整数：

```
int result;

if (Int32.TryParse(s1, out result))
{
    // choice is valid
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:44:09.720

您可以安全地将字符串引用与字符串文字进行比较。

在某些极端情况下，编译时间很重要

```
string a = "this is a";
string b = a;
string c = "this is " + x; //x has the value of 'a'
string d = "this is a";
object oa = a;
object ob = b;
object oc = c;
object od = d;

console.WriteLine(a == b); //will print true
console.WriteLine(a == c); //will print true
console.WriteLine(c == b); //will print true

console.WriteLine(oa == ob); //will print true
console.WriteLine(oa == oc); //will print false
console.WriteLine(oa == od); //will print true 
```

最前三行是一个值比较，只要字符串对象的值相同，结果就会为真。

最后三行是参考比较，因为变量的编译时类型是对象。

a 和 b 将是同一个对象，因此第一个比较将返回 true。但是 oa 和 oc 不会是同一个对象。编译器无法确定它们实际上是相同的字符串值。最后一行也将返回 true。这是因为编译器会在编译时意识到 a 和 d 具有相同的字符串值，因此只会创建一个字符串对象。它可以安全地做到这一点，因为字符串在 C# 中是不可变的

# javascript - Javascript 将 0.1 添加到 0.2 导致 0.30000000000000004

> ID：11285084
> 
> 赞同：0
> 
> 时间：2012-07-01T19:41:44.230
> 
> 标签：javascript, settimeout

> **可能重复：**
> [Javascript 数学错误：不精确的浮点数](https://stackoverflow.com/questions/3556789/javascript-math-error-inexact-floats)

我有以下代码来制作动画（doIt 制作动画但不相关）。

```
function recur(max, i){
    console.log("i: " + i);
    if ( i <= 1){
        setTimeout(function(){
            // doIt(max,i);
            recur(max, i + 0.1);                
        },100);
    } else {
        // OK
    }
}
recur(16,0); 
```

但是，i 值并不一致。对于以下代码，输出为（Google Chrome 20）：

```
i: 0 
i: 0.1 
i: 0.2 
i: 0.30000000000000004
i: 0.4 
i: 0.5 
i: 0.6 
i: 0.7 
i: 0.7999999999999999 
i: 0.8999999999999999 
i: 0.9999999999999999 
i: 1.0999999999999999 
```

为什么会这样？我想要 0.3 不是一个如此接近的数字。不幸的是，这发生在每次迭代中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T19:44:54.913

要输出`0.3`，您可以使用`toFixed`浮点数，正如@Oleksi 指出的那样，浮点数有轻微的计算错误。

```
console.log((0.1 + 0.2).toFixed(1)); // 0.3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:42:32.060

这是意料之中的。由于计算机内部存储的方式，计算机上的[浮点](http://en.wikipedia.org/wiki/Floating_point)运算具有像这样的[小精度误差。](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)有关更多信息，我建议您阅读[每个计算机科学家都应该了解的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

> 将无限多个实数压缩为有限位数需要近似表示。尽管整数有无限多，但在大多数程序中，整数计算的结果可以存储在 32 位中。相反，给定任何固定位数，大多数实数计算将产生无法使用那么多位精确表示的量。因此，浮点计算的结果必须经常四舍五入以适应其有限表示。这种舍入误差是浮点计算的特征。

类似的问题被问了很多。看到[这个](https://stackoverflow.com/questions/3556789/javascript-math-error-inexact-floats)。

# jdo - @Column 注释的 jdbcType 和 sqlType 有什么区别？

> ID：11285085
> 
> 赞同：0
> 
> 时间：2012-07-01T19:41:44.987
> 
> 标签：jdo

有人可以解释注释的`sqlType`和之间`jdbcType`的区别吗？`@Column`

[http://www.datanucleus.org/products/datanucleus/jdo/annotations.html#Column](http://www.datanucleus.org/products/datanucleus/jdo/annotations.html#Column)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T19:52:36.240

从您引用的文件中：

[http://www.datanucleus.org/products/datanucleus/jdo/annotations.html#Column](http://www.datanucleus.org/products/datanucleus/jdo/annotations.html#Column)

*   jdbcType String ORM : 用于持久化到该列的 JDBC 类型

*   sqlType String ORM : 用于持久化到该列的 SQL 类型

通常，JDBC 应该提供到底层 SQL 类型的映射，并且您应该将 JDO 实现编码为公开的 JDBC 类型。

此参考提供了一个示例，说明差异可能很重要：

*   [http://osdir.com/ml/apache.db.jdo.devel/2005-07/msg00139.html](http://osdir.com/ml/apache.db.jdo.devel/2005-07/msg00139.html)

这里还有一些可能会有所帮助的文档：

*   [http://java.sun.com/developer/technicalArticles/J2SE/jdo/](http://java.sun.com/developer/technicalArticles/J2SE/jdo/)

> 问：所以 JDBC 类型就像标准数据类型，而 SQL 类型是每个数据存储区特有的类型？

要回答您的问题，以下是 JDO 3.0 规范所说的，第 18.4 节，元素列：

> [http://download.oracle.com/otn-pub/jcp/jdo-3.0-mrel3-eval-oth-JSpec/jdo-3_0-mrel3-spec.pdf](http://download.oracle.com/otn-pub/jcp/jdo-3.0-mrel3-eval-oth-JSpec/jdo-3_0-mrel3-spec.pdf)
> 
> sql-type 属性声明数据库中列的类型。此类型是特定于数据库的，仅应在用户需要更明确地控制映射的情况下使用。通常，jdbc-type 的组合。长度和比例足以让 JDO 实现计算 sql 类型。

# java - 如何用 GlazedList 中的字符串替换 JTextField 作为过滤器？

> ID：11285090
> 
> 赞同：2
> 
> 时间：2012-07-01T19:42:35.160
> 
> 标签：java, swing, filter, jtable, glazedlists

我有一组单选按钮，我想将其用作表格的过滤器。这个单选按钮在我的模型类中设置了一个变量。在我的模型中使用吸气剂，我检索了这个值，我想在我的 GlazedList 表中使用这个值作为过滤器。

**有没有人知道怎么做？**

下面是我使用 JTextField 作为过滤器的表格：

```
TextFilterator<Barcode> barcodeFilterator = new TextFilterator<Barcode>() { ... };
    WebTextField searchField = new WebTextField(barcodeModel.getSelectedFilter());
    MatcherEditor<Barcode> textMatcherEditor = new TextComponentMatcherEditor<Barcode>(searchField, barcodeFilterator);
    FilterList<Barcode> filterList = new FilterList<Barcode>(BarcodeUtil.retrieveBarcodeEventList(files), textMatcherEditor);
    TableFormat<Barcode> tableFormat = new TableFormat<Barcode>() { .... };
    EventTableModel<Barcode> tableModel = new EventTableModel<Barcode>(filterList, tableFormat);
    barcodeTable.setModel(tableModel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:43:20.107

我会向您指出[自定义 MatcherEditor 截屏视频](http://publicobject.com/glazedlistsdeveloper/screencasts/custommatchereditor/)`Matcher`，作为实现您自己的 s 以应对从一组选项中进行过滤的一个很好的参考。

关键部分是创建 a `MatcherEditor`，在本例中，它按国籍过滤人员表。

```
private static class NationalityMatcherEditor extends AbstractMatcherEditor implements ActionListener {
    private JComboBox nationalityChooser;

    public NationalityMatcherEditor() {
        this.nationalityChooser = new JComboBox(new Object[] {"British", "American"});
        this.nationalityChooser.getModel().setSelectedItem("Filter by Nationality...");
        this.nationalityChooser.addActionListener(this);
    }

    public Component getComponent() {
        return this.nationalityChooser;
    }

    public void actionPerformed(ActionEvent e) {
        final String nationality = (String) this.nationalityChooser.getSelectedItem();
        if (nationality == null)
            this.fireMatchAll();
        else
            this.fireChanged(new NationalityMatcher(nationality));
    }

    private static class NationalityMatcher implements Matcher {
        private final String nationality;

        public NationalityMatcher(String nationality) {
            this.nationality = nationality;
        }

        public boolean matches(Object item) {
            final AmericanIdol idol = (AmericanIdol) item;
            return this.nationality.equals(idol.getNationality());
        }
    }
} 
```

它`MatcherEditor`的使用方式应该不会太陌生，因为它类似于`TextMatcherEditor`s：

```
EventList idols = new BasicEventList();
NationalityMatcherEditor nationalityMatcherEditor = new NationalityMatcherEditor();
FilterList filteredIdols = new FilterList(idols, nationalityMatcherEditor); 
```

在上面的示例中，它本身`JComboBox`是声明和启动的`MatcherEditor`。尽管您需要对正在跟踪的对象的引用，但您无需完全遵循该样式。对我来说，如果我正在观看 Swing 控件，我倾向于声明并启动表单的其余部分，然后传入一个引用，例如

```
....
private JComboBox nationalityChooser;
public NationalityMatcherEditor(JComboBox alreadyConfiguredComboBox) {
    this.nationalityChooser = alreadyConfiguredComboBox;
}
.... 
```

# php - 保持双重价值

> ID：11285091
> 
> 赞同：0
> 
> 时间：2012-07-01T19:42:38.197
> 
> 标签：php, arrays

我有以下脚本可以根据标签从数据库中获取内容

```
 <?php
    header("Content-type: text/html; charset=UTF-8");

    include 'config.php';
    include 'lib.php';

    error_reporting(E_ALL); // or E_STRICT
    ini_set("display_errors",1);

    $query = $_GET['query'];
    $db = dbConnect();
    $tags = explode(";", $query);
    $entries = Array();

    foreach($tags as $tag) {
        $tag = trim($tag);
        echo "<br/>".$tag;

        $query = "SELECT * FROM nv_entries entries JOIN nv_tags tags on (entries.id = tags.entrie_id) join nv_images images on (tags.entrie_id = images.entrie_id) WHERE tags.tag = '$tag'";
        $entrie = execSelect($query);

        array_push($entries, $entrie);

    }

    echo "<pre>";
    print_r($entries);
    echo "</pre>";

    // keep the ones that are there as many times as there are diferent tags
    // ...

    dbClose($db);
    ?> 
```

例如，如果我使用标签树和绿色，那么我会得到这个：

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [id] => 1
                    [band] => Green
                    [album] => 
                    [label] => ATCO
                    [year] => 1966
                    [text] => text about green.
                    [entrie_id] => 1
                    [tag] => tree
                    [source] => img01_4u8y5.png
                )

            [1] => Array
                (
                    [id] => 2
                    [band] => Kids for Cash
                    [album] => No More Walls E.P.
                    [label] => 
                    [year] => 1986
                    [text] => Text about album kids for cash.
                    [entrie_id] => 2
                    [tag] => tree
                    [source] => img02_9lch1.png
                )

        )

    [1] => Array
        (
            [0] => Array
                (
                    [id] => 1
                    [band] => Green
                    [album] => 
                    [label] => ATCO
                    [year] => 1966
                    [text] => text about green.
                    [entrie_id] => 1
                    [tag] => green
                    [source] => img01_4u8y5.png
                )

        )

) 
```

id = 1 的那个出现了两次。这等于标签的总数，所以我想保留那个。id = 2 的那个只出现一次，所以 1 个标签为此失败，因此我不需要它。

我怎样才能摆脱它？在那之后，我怎样才能清理双数组将消失的数组？

* * *

编辑：

这应该接近我正在寻找的，我只得到一个错误：

查询失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“GROUP BY nv_entries JOIN ON nv_entries.id = nv_tags.entrie_id AND nv_tags.tag IN”附近使用正确的语法

在下面的脚本中生成的查询如下所示：

`home GROUP BY nv_entries JOIN ON nv_entries.id = nv_tags.entrie_id AND nv_tags.tag IN ('tree','green') HAVING COUNT(DISTINCT nv_tags.tag) = 2`

这是脚本（部分）：

```
for ($i = 0; $i < count($tags); $i++) {
    $tags[$i] = trim($tags[$i]);
}

$query = "GROUP BY nv_entries JOIN ON nv_entries.id = nv_tags.entrie_id AND nv_tags.tag IN (";
// add with following comma
for ($i = 0; $i < count($tags)-1; $i++) {
    $query .= "'".$tags[$i]."',";
}
// add last without a comma
$query .= "'".$tags[count($tags)-1]."'";

$query .= ") HAVING COUNT(DISTINCT nv_tags.tag) = ".count($tags);

echo $query;

$entries = execSelect($query);

echo "<pre>";
print_r($entries);
echo "</pre>"; 
```

# java - Java 集合和 MapKey

> ID：11285092
> 
> 赞同：1
> 
> 时间：2012-07-01T19:42:43.100
> 
> 标签：java

我是java新手。我有一个具有以下复合键的数据库表：

```
Code
Reference_Number_1 (decimal)
Reference_Number_2 (decimal)
Time 
```

上面的键使每一行成为唯一的行 - 没有重复。我需要创建一个类来将此表加载到 java 集合并创建一个静态方法，该方法将上述四个参数作为键并从 java 集合返回实体。

我正在考虑将表加载到 HashMap 中，但我不确定如何定义 MapKey。我是否应该将 Reference_Number_1、Reference_Number_2 和 Time 转换为字符串，然后将这四个字段连接起来？或者还有另一种方式/集合来加载这个表。谢谢，皮特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T19:51:04.320

创建另一个类，该类将这 4 个字段作为属性并实现/自动生成`equals()`并`hashCode()` [根据合同](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)（重要！否则它不能用作正确的`Map`键），最后将其用作`Map`.

以下是 Eclipse 为我自动生成的内容（`equals()`有待改进，有点冗长）：

```
public class CompositeKey {

    private String code;
    private BigDecimal referenceNumber1;
    private BigDecimal referenceNumber2;
    private Date time;

    public CompositeKey(String code, BigDecimal referenceNumber1, BigDecimal referenceNumber2, Date time) {
        this.code = code;
        this.referenceNumber1 = referenceNumber1;
        this.referenceNumber2 = referenceNumber2;
        this.time = time;
    }

    public String getCode() {
        return code;
    }

    public BigDecimal getReferenceNumber1() {
        return referenceNumber1;
    }

    public BigDecimal getReferenceNumber2() {
        return referenceNumber2;
    }

    public Date getTime() {
        return time;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        CompositeKey other = (CompositeKey) obj;
        if (code == null) {
            if (other.code != null)
                return false;
        }
        else if (!code.equals(other.code))
            return false;
        if (referenceNumber1 == null) {
            if (other.referenceNumber1 != null)
                return false;
        }
        else if (!referenceNumber1.equals(other.referenceNumber1))
            return false;
        if (referenceNumber2 == null) {
            if (other.referenceNumber2 != null)
                return false;
        }
        else if (!referenceNumber2.equals(other.referenceNumber2))
            return false;
        if (time == null) {
            if (other.time != null)
                return false;
        }
        else if (!time.equals(other.time))
            return false;
        return true;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((code == null) ? 0 : code.hashCode());
        result = prime * result + ((referenceNumber1 == null) ? 0 : referenceNumber1.hashCode());
        result = prime * result + ((referenceNumber2 == null) ? 0 : referenceNumber2.hashCode());
        result = prime * result + ((time == null) ? 0 : time.hashCode());
        return result;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T19:51:40.457

将这四个字段封装在一个对象中：

```
public class Key {
    String code;
    float reference1;
    float reference2;
    Date time;

    public Key(String code, float ref1, float ref2, Date time) {
        ...
    }

    // implement equals() and hashCode()
} 
```

然后定义 a`Map`如下（不确定“实体”是什么类型，所以我们假设有一个名为 的类`Entity`：

`Map<Key, Entity> lookup = new HashMap<Key, Entity>();`

# php - 为什么我不能从扩展 AppController 的类中访问 CakeRequest 对象？

> ID：11285093
> 
> 赞同：0
> 
> 时间：2012-07-01T19:42:44.103
> 
> 标签：php, cakephp

为什么 cakePHP 抱怨 $request 未定义？我正在关注他们在他们的网站上发布的如何制作博客的教程（框架的你好工作），并且我一直在修复我在教程代码中遇到的各种错误（我认为教程有点过时日期）但这是我无法理解的一个。查看 api 文档，它说 Controller 有一个 $request 属性。我的 PostsController 扩展了扩展 Controller 的 AppController，因此它具有 $requests 属性是有道理的，但它没有，甚至根据 print_r 也没有。

这是我的代码（直接来自教程）：

```
class PostsController extends AppController {
    public $helpers = array('Html', 'Form', 'Session');
    public $components = array('Session');
    ...

    public function add() {
        if ($this->request->is('post')) {
            ...
        }
    }
} 
```

这是错误页面：

```
Notice (8): Undefined property: PostsController::$request [APP/controllers/posts_controller.php, line 16]
Code

public function add() {
if ($this->request->is('post')) {

PostsController::add() - APP/controllers/posts_controller.php, line 16
Object::dispatchMethod() - CORE/cake/libs/object.php, line 116
Dispatcher::_invoke() - CORE/cake/dispatcher.php, line 227
Dispatcher::dispatch() - CORE/cake/dispatcher.php, line 194
[main] - APP/webroot/index.php, line 88
Fatal error: Call to a member function is() on a non-object in shared/THS/test/www/MyCake/app/controllers/posts_controller.php on line 16 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:38:46.263

根据您在错误中看到的文件路径，您尚未安装 Cake 2.x，但可能是 Cake 1.3。

如果您正在关注的教程提到了 CakeRequest 类，那么您正在关注 Cake 2.x 教程......

# regex - 正则表达式删除节点开始处的模式

> ID：11285096
> 
> 赞同：3
> 
> 时间：2012-07-01T19:43:21.903
> 
> 标签：regex, xslt, xslt-2.0

我一直在努力寻找摆脱某些特定标签的最佳解决方案。目前我使用一些正则表达式重复查找/替换，但肯定有更好的方法。只是不清楚如何直接在 xslt 中进行操作。

举个例子：

```
<local xml:lang="en">[Some Indicator]<div class="tab"/>some more content here</local> 
```

我有很多这些，并且都遵循相同的结构，其中 [Some Indicator] 是一种列表标识符，可以是以下任何一种：

*   一个或多个数字，有时后跟一个点
*   一个字符，有时后跟一个连字符和另一个字符
*   给定代码点范围内的一个字符（在本例中为 57600 到 58607）
*   和其他一些是上面的变化

我想摆脱所有这些，而不必手动查找/替换几百次。我一直在尝试 xsl:analyze-string 但随后它会替换所有内容而不会影响位置。

一些例子 ：

```
<some_nodes_above>
<local xml:lang="en">1<div class="tab"/>some more content here</local>
<local xml:lang="en">2.<div class="tab"/>some more content here</local>
<local xml:lang="fr">2-A<div class="tab"/>some more content here</local>
<local xml:lang="de">&#57600;<div class="tab"/>some more content here</local>
</some_nodes_above> 
```

应该变成：

```
<some_nodes_above>
<local xml:lang="en">some more content here</local>
<local xml:lang="en">some more content here</local>
<local xml:lang="fr">some more content here</local>
<local xml:lang="de">some more content here</local>
</some_nodes_above> 
```

所以我正在寻找一个 xslt(2) 脚本，它会说“每当你看到一个本地节点后跟一个给定的指示器和一个选项卡 div，剥离指示器和选项卡 div”。不是为这个例子寻找一个完整的解决方案，只是为了让我朝着正确的方向前进。如果我知道它如何适用于一种模式，我可能会自己找出其余的

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T19:46:27.213

用空字符串替换`(?<=<local xml:lang="\w+">).+<div class="tab"/>`包括正则表达式选项多行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T20:47:26.500

**这种转变**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "local/node()[1]
               [self::text()
          and
            following-sibling::node()[1]
               [self::div and @class eq 'tab']
              and
               (
                matches(., '^(\d\.?)|(.\-.)$')
               or
                 string-length(.) eq 1
                and
                 string-to-codepoints(.) ge 57600
                and
                 string-to-codepoints(.) le 58607
                )
               ]"/>

 <xsl:template match=
  "div[@class eq 'tab'
     and
       preceding-sibling::node()[1]
               [self::text()
              and
               (
                matches(., '^(\d\.?)|(.\-.)$')
               or
                 string-length(.) eq 1
                and
                 string-to-codepoints(.) ge 57600
                and
                 string-to-codepoints(.) le 58607
                )
               ]
      ]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<some_nodes_above>
    <local xml:lang="en"
     >1<div class="tab"/>some more content here</local>
    <local xml:lang="en"
     >2.<div class="tab"/>some more content here</local>
    <local xml:lang="fr"
     >2-A<div class="tab"/>some more content here</local>
    <local xml:lang="de"
     >&#57600;<div class="tab"/>some more content here</local>
</some_nodes_above> 
```

**产生想要的正确结果：**

```
<some_nodes_above>
   <local xml:lang="en">some more content here</local>
   <local xml:lang="en">some more content here</local>
   <local xml:lang="fr">some more content here</local>
   <local xml:lang="de">some more content here</local>
</some_nodes_above> 
```

# xcode - 在 tableview 上添加按钮 - 无法访问发件人

> ID：11285099
> 
> 赞同：0
> 
> 时间：2012-07-01T19:44:04.833
> 
> 标签：xcode, uitableview, uibutton, sender

我使用以下代码向我的 tableviewcell 添加按钮，当按下按钮时，我需要知道它是哪一行。所以我已经标记了按钮（playButton viewWithTag:indexPath.row）问题是，如果我定义目标操作方法（播放）来接收发送者，它会因“无法识别的选择器”而崩溃，任何想法如何知道在哪一行按钮被按下或为什么它像这样崩溃谢谢

```
-(void)configureCell: (UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
UIButton *playButton = [UIButton buttonWithType:UIButtonTypeCustom] ;
[playButton setFrame:CGRectMake(150,5,40,40)];
[playButton viewWithTag:indexPath.row] ; //Tagging the button
[playButton setImage:[UIImage imageNamed:@"play.png"] forState:UIControlStateNormal];
[playButton addTarget:self action:@selector(play) forControlEvents: UIControlEventTouchUpInside];
[cell addSubview:playButton]; 
```

}

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
UITableViewCell *beatCell = nil;
beatCell = [tableView dequeueReusableCellWithIdentifier:@"beatCell"];
if (beatCell == nil){
    beatCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"beatCell"];
}
 [self configureCell:beatCell atIndexPath:indexPath];
return beatCell; 
```

}

```
-(void) play:(id) sender{
UIButton *play = sender;
NSLog(@"Play %i" , play.tag); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T19:52:31.853

改变这一行的一个字符：

```
[playButton addTarget:self action:@selector(play) forControlEvents: UIControlEventTouchUpInside]; 
```

到

```
[playButton addTarget:self action:@selector(play:) forControlEvents: UIControlEventTouchUpInside]; 
```

当您在选择器上包含参数时，冒号实际上对于 Objective C 运行时能够在您的目标对象上查找该选择器很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:55:57.330

代替

```
[playButton viewWithTag:indexPath.row] ; 
```

如果您尝试接收 UIButton 的子视图（我不知道为什么），您应该使用 setter 方法设置标签：

```
[playButton setTag:indexPath.row]; 
```

您还必须将您的发件人转换为 UIButton 类型

```
-(void) play:(id) sender{
UIButton *play = (UIButton *)sender;
NSLog(@"Play %i" , play.tag);
} 
```

# android - 试图让我的 listView 开始一项活动。得到一个奇怪的错误

> ID：11285109
> 
> 赞同：0
> 
> 时间：2012-07-01T19:45:09.253
> 
> 标签：android, listview, android-intent, android-listview, android-fragments

我在片段中有一个 listView，我正在尝试使用 switch 语句将每个人引导到正确的活动。只是无法让它工作。我已经搞砸了大约一个小时的代码，但是在创建意图时我仍然遇到同样的错误。

```
public class MenuFragment extends ListFragment {
    String[] menu = { "Setting", "About" };

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        setListAdapter(new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, menu));

        getListView().setCacheColorHint(0);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        switch (position) {
        case 0:
            Intent newActivity = new Intent(this, Settings.class);
            startActivity(newActivity);
            break;
        case 1:
            Intent newActivity1 = new Intent(this, About.class);
            startActivity(newActivity1);
            break;

        }
    }

} 
```

这是我的错误：

![在此处输入图像描述](../Images/d20457ae16a68b6dc61f0f04ae9f1cef.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T19:50:37.407

你给 Intent 的构造函数一个 Fragment 实例作为第一个参数，当前 Activity 应该去哪里。

试试这个：

```
Intent newActivity1 = new Intent(getActivity(), About.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T19:53:30.993

尝试：

```
switch (position) {
        case 0:
            Intent newActivity = new Intent(getApplicationContext(), Settings.class);
            startActivity(newActivity);
            break;
        case 1:
            Intent newActivity1 = new Intent(getApplicationContext(), About.class);
            startActivity(newActivity1);
            break;

        } 
```

# javascript - 如何使“this”不引用事件被调用的元素？

> ID：11285112
> 
> 赞同：0
> 
> 时间：2012-07-01T19:45:35.200
> 
> 标签：javascript, events, this

*我知道 Javascript 中没有类，为了方便起见，我将构造函数称为类。*

我正在制作一个`InputHandler`用 Javascript 调用的类。它有一个名为 的方法`onMouseDown`，并将其注册为一个事件处理程序，如下所示：

```
Irenic.InputHandler.prototype.attach = function()
{
    var inputHandler = this; //Get the instance of InputHandler

    document.addEventListener("keydown", inputHandler.onKeyDown, false); //Concentrate on this, but the question applies to all of these.
    document.addEventListener("keyup", inputHandler.onKeyUp, false);
    document.addEventListener("mousemove", inputHandler.onMouseMove, false);
    document.addEventListener("mouseup", inputHandler.onMouseUp, false);
    document.addEventListener("mousedown", inputHandler.onMouseDown, false);
} 
```

（`Irenic`是我正在构建的引擎的名称，它也是一个包含所有这些类的全局对象。）

该`inputHandler.onMouseDown`方法如下所示：

Irenic.InputHandler.prototype.onMouseDown = function(event) { var inputHandler = this; //这可悲的是指的是文档，而不是 InputHandler 的实例

```
console.log(inputHandler); //Logs #document

if (event.button == 0)
{
    inputHandler.mouse.lmb = true;
}

if (event.button == 1)
{
    inputHandler.mouse.wheel = true;
}

if (event.button == 2)
{
    inputHandler.mouse.rmb = true;
} 
```

}

正如我在评论中所说，`this`关键字是指事件触发的元素。我显然不希望这样：**那么我如何让它引用一个实例`InputLoader`？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T19:48:20.403

用于[`Function.prototype.bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)锁定函数的上下文：

```
inputHandler.onKeyDown.bind(inputHandler) 
```

PS。使用[`switch`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/switch), 或至少`else if`代替多个`if`构造。其中只有一个可能是真的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T19:49:43.273

在您的构造函数中，将实例的方法绑定到该实例：

```
function InputHandler() {
    this.onKeyDown = this.onKeyDown.bind(this);
    this.onKeyUp = this.onKeyUp.bind(this);
    this.onMouseMove = this.onMouseMove.bind(this);
    this.onMouseUp = this.onMouseUp.bind(this);
    this.onMouseDown = this.onMouseDown.bind(this);
} 
```

这样，实例一经构建就准备就绪。

看[`Function#bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T19:55:43.243

我相信 bind 不适用于 IE <= 8，所以如果需要，这应该可以工作：

```
document.addEventListener("keydown", function (ev) { return inputHandler.onKeyDown(ev); }, false) 
```

# .htaccess - 通过 apache htaccess RewriteRule 搜索和替换 URL 部分

> ID：11285114
> 
> 赞同：1
> 
> 时间：2012-07-01T19:46:10.243
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite, url-rewrite-module

我想重写 URL，如：

`http://www.mydomain.tld/en/component/mycomponent/singlearticle/16-core/219-checked.html`

到

`http://www.mydomain.tld/en/articles/bycategory/16-core/219-checked.html`

意味着“component/mycomponent/singlearticle”部分应该成为“articles/bycategory”，但是我在为我的 .htaccess 构建重写规则时遇到了问题，该规则涵盖了这一点。

*注意：mod_rewrite 开启（RewriteEngine 开启）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T19:56:42.137

当您只想重写这个 url 时，您需要这个。

```
RewriteRule ^en/component/mycomponent/singlearticle/16-core/219-checked.html$ http://www.mydomain.tld/en/articles/bycategory/16-core/219-checked.html [R=301,L] 
```

**编辑：**

然后试试这个：

```
RewriteEngine On
RewriteBase /
RewriteRule ^en/component/mycomponent/singlearticle/(.*)$ http://www.mydomain.tld/en/articles/bycategory/$1 [R=301,L] 
```

然后单篇文章后面的所有内容都将被重定向到另一个页面。也许你可以试试。我不能在这里即时测试它。

# html - 如何在 CSS 中将侧边栏向右移动？

> ID：11285115
> 
> 赞同：0
> 
> 时间：2012-07-01T19:46:17.920
> 
> 标签：html, css

这是一个非常简单的问题。我有一些示例代码，并试图了解 CSS 的工作原理。

这是我的 html 文件：

```
 <!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Widget Corp</title>
        <link href="stylesheets/public.css" media="all" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div id ="header">
            <h1>Widget Corp</h1>
        </div>
        <div id ="main">
            <table id="structure">
                <tr>
                    <td id="navigation">
                        &nbsp;
                    </td>
                    <td id="page">
                        <h2>Staff Menu</h2>
                        <p>Welcome to the staff area.</p>
                        <ul>
                            <li><a href="content.php">Manage Website Content</a></li>
                            <li><a href="new_user.php">Add Staff User</a></li>
                            <li><a href="logout.php">Logout</a></li>
                        </ul>
                    </td>
                </tr>
            </table>
        </div>
        <div id="footer">Copyright 2012, FlameDra</div>
     </body>
</html> 
```

这是我的 CSS 文件：

```
html { height : 100%; width : 100%;}
body { height : 100%; width : 100%; margin : 0px; padding : 0px; border : 0px; 
      font-family: Verdana, Arial, Helvetica, sans-seriff; background: #D4E6F4;
      font-size : 13px; line-height: 15px; }
img { border: none;}
table, tr, td { border-collapse : collapse; vertical-align : top; font-size : 13px;
                line-height: 15px; }
a { color: #8D0D19;}

#header { height: 70px; margin: 0px; padding: 0px; text-align: left;
          background: #1A446C; color: #D4E6F4; }
#header h1 { padding: 1em; margin: 0px;}
#main {margin: 0px; padding: 0px; height: 600px; width: 100%; background: #EEE4B9; }
#structure {height: 600px; width: 100%;}
#footer {height: 2em; margin: 0px; padding: 1em; text-align: center; background: #1A446C; color: #D4E6F4; }

/* Navigation */
#navigation { width: 150px; padding: 1em 2em; color: #D4E6F4; background: #8D0D19;}
#navigation a {color: #D4E6F4; text-decoration: none;}
ul.subjects {padding-left: 0; list-style: none;}
ul.pages {padding-left: 2em; list-style: square;}
.selected {font-weight: bold;}

/* Page Content */
#page {padding-left: 2em; vertical-align: top; background: #EEE4B9;}
#page h2 {color: #8D0D19; margin-top: 1em;}
#page h3 {color: #8D0D19;} 
```

这就是输出的样子：http: [//i.imgur.com/x9Sn3.jpg](http://i.imgur.com/x9Sn3.jpg)

现在我无法理解侧边栏是如何出现在左侧而不是右侧的，因为通过查看代码我无法真正确定它的定义位置。

有人可以使用这个例子来使“CSS 的工作原理”更清晰吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T19:49:49.100

简单，只需更换：

```
<td id="navigation">
    &nbsp;
</td>
<td id="page">
    <h2>Staff Menu</h2>
    <p>Welcome to the staff area.</p>
    <ul>
        <li><a href="content.php">Manage Website Content</a></li>
        <li><a href="new_user.php">Add Staff User</a></li>
        <li><a href="logout.php">Logout</a></li>
    </ul>
</td> 
```

和

```
<td id="page">
    <h2>Staff Menu</h2>
    <p>Welcome to the staff area.</p>
    <ul>
        <li><a href="content.php">Manage Website Content</a></li>
        <li><a href="new_user.php">Add Staff User</a></li>
        <li><a href="logout.php">Logout</a></li>
    </ul>
</td>
<td id="navigation">
    &nbsp;
</td> 
```

# sql-server-2008 - 将数据从 Ms Access 导入 Ms SQL Server

> ID：11285136
> 
> 赞同：1
> 
> 时间：2012-07-01T19:50:00.170
> 
> 标签：sql-server-2008, ms-access, import

将 Ms Access 中的数据导入 Ms SQL Server 时，Ms Access 中的数据库架构是否需要与 SQL Server 中的新数据库架构相同？最后，将数据从 Ms Access 导入 Ms SQL Server 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-30T21:41:32.527

MS Access 中有一些数据类型不直接转换为 SQL Server，SQL Server 中也有一些数据类型在 MS Access 中不存在 - 虽然大多数字段会正确“升级”，但有些可能不会。例如，SQL Server 没有“是/否”数据类型。最接近的是 Bit - 但我建议改用 tinyint，因为如果您尝试查看空位字段，访问会崩溃并出现问题，但它很容易识别空 tinyint。此外，在升级时，请记住 Access 中的 True = -1，但 -1 不适用于 tinyint，因此如果要将其保持在 -1，则可能必须使用 int，否则将不得不更新时将值从 -1 更改为 1（在 SQL 中为 true）。

此外，SQL Server 具有新的数据类型，例如 Access 中不存在的较大日期时间 - 因此您的大多数日期/时间值将转换为 smalldatetime（精确到分钟）或 datetime（精确到百分之一秒），具体取决于你需要什么。

在某些情况下使用“升迁向导”可能会起作用，但我多次发现由于“备忘录”类型（或 2013 年及更新版本中的“大文本”）损坏，该向导无法正确完成。

希望这能回答您问题的第一部分。

至于将数据从 MS Access 导入 SQL 服务器，我发现在 MS Access 中创建链接表并编写附加查询似乎可以很好地解决问题，如果您没有同时使用这两个系统。如果在将数据复制到 SQL Server 后继续在 Access 中更改数据，则可以对新记录使用追加，对旧记录进行更新，或者只是删除表中的所有数据，然后重新追加。

希望这能回答您问题的两个部分。

# php - 选择有效，插入mysql不插入php

> ID：11285148
> 
> 赞同：0
> 
> 时间：2012-07-01T19:51:27.377
> 
> 标签：php, mysql, curl, phpmyadmin

我有一张如下表

```
CREATE TABLE IF NOT EXISTS `pictures` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(200) NOT NULL,
  `description` varchar(200) NOT NULL,
  `url` varchar(1000) NOT NULL,
  `users_id` bigint(20) NOT NULL,
  `totalvoteup` int(11) NOT NULL,
  `totalvotedown` int(11) NOT NULL,
  `totalvoteneutral` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `users_id` (`users_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 
```

我可以使用 sql 语句在 phpmyadmin 中插入以下值

```
INSERT INTO pictures(name, description, url, users_id) VALUES ('try','try','try', 12345) 
```

所以数据库没有问题

但是，如果我使用以下 php 脚本来选择和插入与我的数据库的交互，它不会向数据库插入任何内容

```
<?php

// Helper method to get a string description for an HTTP status code
// From http://www.gen-x-design.com/archives/create-a-rest-api-with-php/ 
function getStatusCodeMessage($status)
{
    // these could be stored in a .ini file and loaded
    // via parse_ini_file()... however, this will suffice
    // for an example
    $codes = Array(
        100 => 'Continue',
        101 => 'Switching Protocols',
        200 => 'OK',
        201 => 'Created',
        202 => 'Accepted',
        203 => 'Non-Authoritative Information',
        204 => 'No Content',
        205 => 'Reset Content',
        206 => 'Partial Content',
        300 => 'Multiple Choices',
        301 => 'Moved Permanently',
        302 => 'Found',
        303 => 'See Other',
        304 => 'Not Modified',
        305 => 'Use Proxy',
        306 => '(Unused)',
        307 => 'Temporary Redirect',
        400 => 'Bad Request',
        401 => 'Unauthorized',
        402 => 'Payment Required',
        403 => 'Forbidden',
        404 => 'Not Found',
        405 => 'Method Not Allowed',
        406 => 'Not Acceptable',
        407 => 'Proxy Authentication Required',
        408 => 'Request Timeout',
        409 => 'Conflict',
        410 => 'Gone',
        411 => 'Length Required',
        412 => 'Precondition Failed',
        413 => 'Request Entity Too Large',
        414 => 'Request-URI Too Long',
        415 => 'Unsupported Media Type',
        416 => 'Requested Range Not Satisfiable',
        417 => 'Expectation Failed',
        500 => 'Internal Server Error',
        501 => 'Not Implemented',
        502 => 'Bad Gateway',
        503 => 'Service Unavailable',
        504 => 'Gateway Timeout',
        505 => 'HTTP Version Not Supported'
    );

    return (isset($codes[$status])) ? $codes[$status] : '';
}

// Helper method to send a HTTP response code/message
function sendResponse($status = 200, $body = '', $content_type = 'text/html')
{
    $status_header = 'HTTP/1.1 ' . $status . ' ' . getStatusCodeMessage($status);
    header($status_header);
    header('Content-type: ' . $content_type);
    echo $body;
}

class RedeemAPI {

    private $db;

    // Constructor - open DB connection
    function __construct() {
        $this->db = new mysqli('localhost', 'root', 'password', 'testBasParmak');
        $this->db->autocommit(FALSE);
    }

    // Destructor - close DB connection
    function __destruct() {
        $this->db->close();
    }

    // Main method to redeem a code
    function redeem() {

        // Check for required parameters
        if (isset($_POST["users_id"]) && isset($_POST["name"]) && isset($_POST["url"])&& isset($_POST["description"])) {

            // Put parameters into local variables
            $users_id = $_POST["users_id"];
            $name = $_POST["name"];
            $url = $_POST["url"];
            $description=$_POST["description"];

            // insert  i also tried with 'Insert .....' rather then "Insert...."
            $stmt = $this->db->prepare("INSERT INTO pictures(name, description, url, users_id) VALUES (?, ?, ?, ?)");
            $stmt->bind_param("sssi", $name, $description, $url, $users_id);
            $stmt->execute();
            $stmt->close();

            //select
            $stmt = $this->db->prepare('SELECT name, description, url, users_id FROM pictures');
            $stmt->execute();
            $stmt->bind_result($name, $description, $url, $users_id);
            while ($stmt->fetch()) {
                echo "Name of picture is $name url of picture is $url";
            }
            $stmt->close();

            return true;
        }
        sendResponse(400, 'Invalid request');
        return false;

    }

}

// This is the first thing that gets called when this page is loaded
// Creates a new instance of the RedeemAPI class and calls the redeem method
$api = new RedeemAPI;
$api->redeem();

?> 
```

当我将以下参数写入终端窗口时

```
curl -F "name=deneme" -F "description=deneme" -F "url=deneme" -F "users_id=705735067" http://website.local/index.php 
```

结果，我看到从图片中选择有效，但是当我转到数据库并检查新行是否存在时，我看不到该行。

php脚本有什么问题？为什么选择有效而插入无效

- - - 编辑 - - - - - - - - - - - -

我已安排插入以获取错误消息

```
// insert 
            $stmt = $this->db->prepare("INSERT INTO pictures(name, description, url, users_id) VALUES (?, ?, ?, ?)");
            $stmt->bind_param("ssss", $name, $description, $url, $users_id);

            $stmt->execute();

             printf("name: %s\n", $name);
             printf("description: %s\n", $description);
             printf("url: %s\n",  $url);
             printf("usersid: %d\n", $users_id);

             printf("Errormessage: %s\n", $stmt->error);
             $stmt->close(); 
```

输出是

```
name: deneme
description: deneme
url: deneme
usersid: 705735067
Errormessage: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:53:47.070

这里的**计数**有问题吗？中有 4 个`?`s并且您在?`prepare`中给出了 5 个参数`bind_param()`

```
$stmt = $this->db->prepare("INSERT INTO pictures(name, description, url, users_id) VALUES (?, ?, ?, ?)");
$stmt->bind_param("is", $name, $description, $url, $users_id); 
```

## 解决方案

你应该改变`"is"`to`"ssss"`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T19:57:24.053

尝试检查错误：[`$mysqli->error()`](http://www.php.net/manual/en/mysqli.error.php)

# javascript - CSS 样式为空

> ID：11285152
> 
> 赞同：0
> 
> 时间：2012-07-01T19:51:52.733
> 
> 标签：javascript, jquery, html, css

当用户单击页面上的图像或链接时，我有一个页面应该弹出模式（覆盖）。当页面第一次加载时，模态框是空白的并且被这个 html 隐藏：

```
<!--// MODAL: ITEM PROFILE //-->
<div id="profile" class="modal" style="visibility: hidden">
</div>
<!--// OVERLAY //-->
<div id="overlay" style="visibility: hidden"></div> 
```

当用户单击图像或链接时，应该使用此功能触发模态：

```
function itemModal(id){
var modal = $("#profile");
if (modal == null){
    alert("Modal not found!");
}

if($(" #profile").style.visibility == "hidden"){
    $.ajax
      (
        { //Ajax call to get item data
          type: "POST",
          url: "/organizer/getItem",
          data: { item_id: id },
          dataType: "html",
          success: function( responseText, textStatus, XHR )
          {
            // select the element with the ID profile and insert the HTML
            $("#profile" ).html( responseText );
            $("#profile").style.visibility = "visible";
            $("#overlay").style.visibility = "visible"
          }
        }
      );
  }
  else{ //Modal is being displayed, hide it and remove contents
    $("#profile").html('');
    $("#profile").style.visibility = "hidden"; 
    $("#overlay").style.visibility = "hidden";
  }
} 
```

但是，当我单击触发模式时，我收到错误消息`Uncaught TypeError: Cannot read property 'visibility' of undefined`。我发出警报试图捕捉到这一点，发现虽然 profile 元素存在，但它的样式显然不存在，即使它定义了内联 css 以及另一个文件中的大约 250 行。为什么样式属性会显示为空？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T19:57:32.963

jQuery 对象没有样式属性，因为它们是 DOM 对象数组（它们确实具有样式属性）。

你要么想要：

```
SET: $('#overlay').css('visibility', 'hidden')
GET: $('#overlay').css('visibility') 
```

或者

```
SET: $('#overlay')[0].style.visibility = 'hidden'
GET: $('#overlay')[0].style.visibility 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:58:03.917

您在返回的 jQuery 对象上使用 Javascript 原始元素属性，但它不起作用，您应该改用`css()`方法：

```
if($("#profile").css('visibility') == "hidden") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T19:59:08.323

您正在将 jQuery 与本机 JavaScript 混合使用。

原生 HTML 元素上有一个`style`对象，jQuery 包装的元素没有。如果要使用 jQuery，请使用

```
if ($(" #profile").css('visibility') == "hidden") 
```

此外，以下行将无法按您的意愿工作。

```
if (modal == null){ 
```

...因为分配给的值`modal`又是一个 jQuery 包装的元素。一个 jQuery 对象，即使它无法匹配元素，在评估时总是具有一个“真实”值——换句话说，它永远不会评估为 null、false 或任何其他虚假值。而是使用：

```
if (modal.length){ 
```

...或者换句话说，“如果 jQuery 选择器找到任何元素...”

最后，作为更次要的一点，您不是在处理真正意义上的模态窗口。这是 DHTML；模态窗口是一种较低级别的浏览器功能形式，涉及用户在被允许返回父应用程序之前必须与其交互（例如警报）。

# javascript - 为什么我不能使用 this.arguments，而参数有效？

> ID：11285153
> 
> 赞同：2
> 
> 时间：2012-07-01T19:51:55.427
> 
> 标签：javascript

```
function MyArray() {
    var self = this.arguments; //<---
    this.toString = function() {
        return self;
    };

}

var c = new MyArray(2, 3, 1, '232');
console.log(c.toString()); 
```

> > 不明确的

```
function MyArray() {
    var self = arguments; //<---
    this.toString = function() {
        return self;
    };

}

var c = new MyArray(2, 3, 1, '232');
console.log(c.toString()); 
```

> > [2,3,1,'232']

那么，为什么会这样呢？**this.arguments**和**arguments**有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:27:38.380

在 JS 中，`this`表示“调用上下文”，可以有多种不同的设置方式。它实际上与变量范围无关。它们是完全不同的概念。这就是为什么`arguments`可以作为变量使用，而不是`this`.

的值`this`因调用函数的方式而异。

* * *

***作为方法调用***

例如，如果我这样做...

```
my_obj.myMethod(); 
```

...then`this`将引用，`my_obj`因为该函数`myMethod`是从`my_obj`.

* * *

***作为函数独立调用***

但如果我这样做...

```
var m = my_obj.myMethod;
m(); 
```

尽管`my_obj`和`myMethod`与第一个示例的代码相同，但 this 的值通常会更改为`global`对象。

* * *

***`.call`使用或调用`.apply`***

`this`也可以设置其他几种方式。

```
m.call(my_other_obj, "more", "args");

m.apply(my_other_obj, ["more", "args"]); 
```

使用`.call`or `.apply`，传递的第一个参数变成 的值`this`。两者之间的区别在于其余参数的传递方式。

* * *

***创建使用`.bind`***

还有`.bind()`一个以与 相同的方式接受参数`.call()`，但创建并返回一个新函数，其`this`值和任何其他参数永久设置。

* * *

***`new`使用运算符调用***

最后一种方法是当您将函数作为构造函数调用时。为此，您使用`new`运算符。

```
var new_obj = new m;

var new_obj = new obj.m; 
```

在这两种情况下， 的值都`this`将是一个正在构造的新对象。`new`除非已将调用的函数设置为用作构造函数，否则您不应使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:56:17.857

没有`this.arguments`。然而`arguments`，它是一个类数组对象，它[始终存在于函数内部](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)，并引用调用中给出的参数。

# jquery - jquery动态改变类

> ID：11285156
> 
> 赞同：-1
> 
> 时间：2012-07-01T19:52:15.323
> 
> 标签：jquery

当我执行控制台日志时，以下是打印的 html 结构：

```
<div class="ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" data-id="21">
          <div class="ui-widget-header ui-corner-all">
             <span class="ui-icon ui-icon-minusthick"></span>
             <h6>First Person</h6>
          </div>
          <p class="style-content"></p>
          <p class="style-content">Estimated Missing: 10</p>
          <p class="style-content">
            <span class="sub_task">6</span> 
            People Found
          </p>
        </div> 
```

`delta`如果给`<span class="sub_task">6</span>`定变量，我想添加其他类`alpha = "12"`

截至目前，我的 js 文件如下所示：

```
console.log(elem)
elem = $(this).children()[3];
if (alpha=="12"){
elem.addClass("delta");
} 
```

但这给出了一个错误：

```
Uncaught TypeError: Object #<HTMLParagraphElement> has no method 'addClass' 
```

我有两个问题：

一个更好的选择器来获取元素。

如何添加课程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T19:53:37.920

使用`$`or `jQuery` **since`addClass`是 jQuery 的一个函数**：

```
$(elem).addClass("delta"); 
```

或者

```
jQuery(elem).addClass("delta"); 
```

也改变：

```
elem = $(this).children()[3]; 
```

至：

```
elem = $(this).children().eq(2).find('span'); // note index starts at 0 in eq 
```

或者你可以像这样直接添加类（假设你有相同的html结构）

```
if (alpha == "12") {
   $('.style-content').find('span').addClass("delta");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:54:45.567

两个答案都在一个片段中：

```
$(this).children().eq(3).addClass('delta'); 
```

# javascript - 表单输入的javascript条件

> ID：11285157
> 
> 赞同：0
> 
> 时间：2012-07-01T19:52:23.810
> 
> 标签：javascript

所以这是我的代码：

```
<html>

<body>

<p>13-7: <input id="answer" type="text"" /><button onclick="check(6, bla)">Tjek!</button></p>
<p id="bla"></p>
<p>20-7: <input id="answer" type="text"" /><button onclick="check(13, bla2)">Tjek!</button></p>
<p id="bla2"></p>

<script type="text/javascript">

function check(svar, ud)
{
var answer,vurdering;
answer=document.getElementById("answer").value;
vurdering=(answer==svar)?"Correct":"Wrong";
document.getElementById('ud').innerHTML=vurdering;
}

</script>

</body>

</html> 
```

当我单击按钮时，我认为它应该显示输入是否等于答案（svar）。但是当在 getElementById() 中插入“ud”而不是段落 id 时，它不会显示输入是正确还是错误。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:57:06.767

这是一个工作小提琴：

[http://jsfiddle.net/hErPP/](http://jsfiddle.net/hErPP/)

id 字段在 HTML 中必须是唯一的。这是解决此问题的示例。
也`bla`需要`bla2`是字符串。（您的代码可能有其他问题）

```
<html>
<body>

<p>13-7: <input id="answer1" type="text" /><button onclick="check('answer1', 6, 'bla');">Tjek!</button></p>
<p id="bla"></p>
<p>20-7: <input id="answer2" type="text" /><button onclick="check('answer2', 13, 'bla2');">Tjek!</button></p>
<p id="bla2"></p>​

<script type="text/javascript">

function check(id, svar, ud)
{
  var answer,vurdering;
  answer=document.getElementById(id).value;
  vurdering=(answer==svar)?"Correct":"Wrong";
  document.getElementById(ud).innerHTML=vurdering;
}

</script>

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T19:59:16.483

首先，您必须更改为 this`check(6, 'bla')`并且在函数中您需要删除的两个引号`document.getElementById('ud').innerHTML=vurdering`并更改为 this`document.getElementById(ud).innerHTML=vurdering`

# github - Mac 上的 Github 坚持合并到 master

> ID：11285159
> 
> 赞同：0
> 
> 时间：2012-07-01T19:52:26.850
> 
> 标签：github, github-for-mac

对于这个问题，我找不到任何类似的问题。

我正在尝试使用来自 Github 的 Mac GUI 应用程序将我的分支合并到 master 并且已经 30 分钟它仍然在旋转并且没有响应 github 上没有更新。

这是正常的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:58:51.203

如果您的分支被合并，您需要推送您的更改以使它们出现在 github 上。

# apache - 配置。Ubuntu Apache Thin Rails：代理不工作

> ID：11285160
> 
> 赞同：1
> 
> 时间：2012-07-01T19:52:27.863
> 
> 标签：apache, thin

请帮忙，我正在尝试在 Ubuntu 12.04 上设置一个 rails 应用程序，ruby、gems、rails、apache、thin 都已安装。如果我启动一个精简集群，我可以访问网站并显示欢迎页面

```
domain.com:5000
domain.com:5001
domain.com:5002 
```

一切正常，所以我知道瘦正在做它的事情，我可以在没有代理的情况下让 apache 加载 index.htm（尽管资产没有按预期正常工作）。

但是，我似乎无法让 apache 真正将请求传递给瘦服务器！我收到一个软 404（找不到页面）错误或 It works 页面，我不知道为什么。

这是站点可用的文件

```
<VirtualHost *:80>

    ServerName myapp.mydomain.com
    DocumentRoot /home/sim/public_html/railsapp

    <Proxy balancer://thinservers>
        BalancerMember http://127.0.0.1:3000
        BalancerMember http://127.0.0.1:3001
        BalancerMember http://127.0.0.1:3002
    </Proxy>

    ProxyPreserveHost On
    ProxyPass /assets !
    ProxyPass / balancer://thinservers/
    ProxyPassReverse / balancer://thinservers/

    <Proxy *>
     Order deny,allow
     Allow from all
    </Proxy>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:24:58.833

也许将它指向公共文件夹？

```
 DocumentRoot /home/sim/public_html/railsapp/public 
```

# url - 自动浏览 url 列表，然后将它们保存为 html 网页

> ID：11285172
> 
> 赞同：0
> 
> 时间：2012-07-01T19:53:58.843
> 
> 标签：url, browser

我想知道是否有任何在线或桌面应用程序或工具可以自动浏览所有 url 的列表并将每个页面保存为目录中的 html 文档。如果有人知道，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:09:53.463

有用于 Java的[HTMLUnit 。](http://htmlunit.sourceforge.net/)

它是一个无头浏览器，可以很好地处理带有 Javascript 和 Ajax 的页面。它还支持HTTPS。

# javascript - 从模板创建表单“遇到错误：未知宏 showForm

> ID：11285178
> 
> 赞同：0
> 
> 时间：2012-07-01T19:55:08.120
> 
> 标签：javascript, google-apps-script

我一直在阅读“Google Script”，这本书介绍了 Google Apps 脚本的多种用途，并指导您构建了一个应用程序。

我已经阅读了有关从模板动态创建表单的部分，但遇到了一个我无法解决的问题。访问发布的 URL 时，它返回“遇到错误：未知宏 showForm”让我感到困惑的是，我尝试在 mozilla 中使用 firebug 并在脚本编辑器中进行调试，但没有发现任何错误。任何能够帮助指出我应该寻找的方向或帮助解决问题的方向的人吗？

这是代码。它断成三块。Code.gs、GS Objecgts.js 和 Documents API.js

**代码.GS**

```
 var templateFolderId = '<<Enter Folder ID>>';

function doGet(e){
  var app = UiApp.createApplication().setTitle('Template Creator');

  //What this app is about
  var grid = app.createGrid(6, 2).setId('grid').setCellPadding(5);
  app.add(grid);

  grid.setWidget(0,0, app.createLabel("This App will allow you to create a form from"+
                                 " a template in Google Docs."));

  //create UI here
  // File Chooser  
  var fileChooser = app.createListBox().setName('fileChooser').setId('fileChooser')
                   .addChangeHandler(app.createServerChangeHandler('showForm')  
                   .addCallbackElement(grid)); 
  grid.setWidget(2, 0, fileChooser);

  //set the file Names in the listBox by calling on the DocsList service
  fileChooser.addItem('Choose Template');
  var files = DocsList.getFolderById(templateFolderId).getFiles();
  for (var i = 0; i < files.length; i++) {
    fileChooser.addItem(files[i].getName());
  }

  // Submit the form button  
  var button = app.createButton('Submit').setId('button')
              .addClickHandler(app.createServerClickHandler('createDoc')
                              .addCallbackElement(grid))
              .setVisible(false);

  grid.setWidget(4, 0, button);

  /*
  *  @returns body text from doc
  */
function getTemplateText(fileName){
  var files = DocsList.getFolderById(templateFolderId).getFiles();
for (var i = 0; i < files.length; i++) {
  if (fileName == files[i].getName()){  
     var text =  DOCS_LIST_API.GdocToFormat(files[i].getId(), 'txt');
    return text.getContentText();
      }  
    }       
}

  // function returns an array of unique form keys
function createKeys(templateFile){
  var templateTxt = getTemplateText(templateFile); 
  var templateVars = templateTxt.match(/\{\%[^\%]+\%\}/g);
  var templateKeys = [];
  var oneEach = "";
  for (var i in templateVars) {
    var keyObject = {};
    keyObject.text = templateVars[i].replace(/\{\%|\%\}/g, '');
    keyObject.id = camelString(templateVars[i]);
    if (oneEach.match(keyObject.text) == null){                 
      templateKeys.push(keyObject);  
    }
    oneEach += " " + keyObject.text;
  }   
  return templateKeys;
}

  function showForm(e){
  var app = UiApp.getActiveApplication();
  var flexTable = app.createFlexTable();
  var keys = createKeys(e.parameter.fileChooser);

    for (var i in keys) {
    var text = (keys[i].text);

    if(/^instruction/i.test(text)){       
  flexTable.setWidget(parseInt(i),0,app
                      .createLabel(text.substring(text.indexOf(':')+1)));      
    }else{
      var questionPanel = app.createHorizontalPanel();
      flexTable.setWidget(parseInt(i),0,questionPanel);    
      questionPanel.add(app.createLabel(text).setWidth('100px'));
      questionPanel.add(app.createTextBox().setName(keys[i].id));  
    }
  }

    flexTable.setWidget(keys.length+1,0,app.createLabel('________'));
  flexTable.setWidget(keys.length+2,0, app.createHorizontalPanel()
                                  .add(app.createLabel('Output file name: ').setWidth('100px'))
                                  .add(app.createTextBox()
                                        .setName('outputFile').setWidth('200px')
                                        .setValue('Copy of '+ e.parameter.fileChooser)));
  flexTable.setWidget(keys.length+3,0, app.createHorizontalPanel()
                                  .add(app.createLabel('Google Email: ').setWidth('100px'))
                                  .add(app.createTextBox()
                                        .setName('email').setWidth('200px')));

    app.getElementById('button').setVisible(true);        
  app.getElementById('grid').setWidget(3,0, flexTable);
  return app;  
}

  function createDoc(e){
  var app = UiApp.getActiveApplication();
  var keys = createKeys(e.parameter.fileChooser);
  var files = DocsList.getFolderById(templateFolderId).getFiles();

for (var i in files) {
  if (e.parameter.fileChooser == files[i].getName()){   
    var copyId = files[i].makeCopy(e.parameter.outputFile).getId();
    var doc = DocumentApp.openById(copyId)
    var copy = doc.getActiveSection();
    for (var i in keys) {
      var text = keys[i].text;    
      if(/^instruction/i.test(text)){ 
        if (copy.findText(keys[i].text) != null)
          copy.findText(keys[i].text).getElement().removeFromParent();
      }else{
        copy.replaceText('{%'+keys[i].text+'%}', e.parameter[keys[i].id]);
      }        
    }
    doc.saveAndClose();   
    doc.addEditor(e.parameter.email); 
     }
   }

app.getElementById('grid').setWidget(3,0, app.createAnchor('Open your Document', 
doc.getUrl())
                                  .setStyleAttribute('font-size', '18px'));
  app.getElementById('button').setVisible(false); 
  app.getElementById('fileChooser').setItemSelected(0, true);

  return app;  
}

  return app;  
} 
```

**GS 对象.gs**

```
/*
   ObjService

   Copyright (c) 2011 James Ferreira

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*/

/**
 * ObjService
 * @author James Ferriera
 * @documentation http://goo.gl/JdEHW
 *
 * Changes an object like e.parameter into a 2D array useful in 
 * writting to a spreadsheet with using the .setValues method
 *
 * @param   {Array}   headers    [header, header, ...] 
 * @param   {Array}   objValues  [{key:value, ...}, ...]
 * @returns {Array}              [[value, value, ...], ...]
 */
function objectToArray(headers, objValues){
  var values = [];  
  var headers = camelArray(headers);  
  for (var j=0; j < objValues.length; j++){
var rowValues = [];
for (var i=0; i < headers.length; i++){
  rowValues.push(objValues[j][headers[i]]);
}  
values.push(rowValues);
  } 
  return values;
}

/**
 * Changes a range array often returned from .getValues() into an 
 * array of objects with key value pairs.
 * The first element in the array is used as the keys (headers)
 *
 * @param   {Array}   range   [[key, key, ...],[value, value, ...]] 
 * @returns {Array}           [{key:value, ...}, ...] 
 */
function rangeToObjects(range){
  var headers = range[0];
   var values = range;
  var rowObjects = [];
  for (var i = 1; i < values.length; ++i) {
    var row = new Object();
    row.rowNum = i;
    for (var j in headers){
      row[camelString(headers[j])] = values[i][j];
    }
   rowObjects.push(row); 
  }   
  return rowObjects;
}

/**
     * Changes a range array into an array of objects with key value pairs
 *
 * @params  {array}    headers  [key, key, ...]
 * @params  {array}    values    [[value, value, ...], ...]
 * @returns {array}    [{key:value, ...}, ...]  
 */
function splitRangesToObjects(headers, values){
  var rowObjects = [];
  for (var i = 1; i < values.length; ++i) {
    var row = new Object();
    row.rowNum = i;
    for (var j in headers){
      row[camelString(headers[j])] = values[i][j];
    }
   rowObjects.push(row); 
  }   
  return rowObjects;
}

/**
 * Removes special characters from strings in an array
     * Commonly know as a camelCase, 
 * Examples:
 *   "First Name" -> "firstName"
 *   "Market Cap (millions) -> "marketCapMillions
 *   "1 number at the beginning is ignored" -> "numberAtTheBeginningIsIgnored"
 * @params  {array} headers   [string, string, ...]
 * @returns {array}           camelCase 
 */
function camelArray(headers) {
  var keys = [];
  for (var i = 0; i < headers.length; ++i) {
    var key = camelString(headers[i]);
    if (key.length > 0) {
      keys.push(key);
    }
  }
  return keys;
}    

/**
 * Removes special characters from a string
 * Commonly know as a camelCase, 
 * Examples:
 *   "First Name" -> "firstName"
     *   "Market Cap (millions) -> "marketCapMillions
 *   "1 number at the beginning is ignored" -> "numberAtTheBeginningIsIgnored"
 * @params  {string}  header   string
 * @returns {string}           camelCase 
 */
function camelString(header) {
  var key = "";
  var upperCase = false;
  for (var i = 0; i < header.length; ++i) {
    var letter = header[i];
    if (letter == " " && key.length > 0) {
      upperCase = true;
  continue;
   }
if (!isAlnum_(letter)) {
  continue;
    }
    if (key.length == 0 && isDigit_(letter)) {
      continue; // first character must be a letter
    }
    if (upperCase) {
      upperCase = false;
      key += letter.toUpperCase();
    } else {
      key += letter.toLowerCase();
    }
  }
  return key;
}

function isCellEmpty_(cellData) {
  return typeof(cellData) == "string" && cellData == "";
}
function isAlnum_(char) {
  return char >= 'A' && char <= 'Z' ||
    char >= 'a' && char <= 'z' ||
    isDigit_(char);
}
function isDigit_(char) {
  return char >= '0' && char <= '9';
} 
```

**文档 API.gs**

```
 /*
*  Private for OAuth
*  @ returns OAuth headers 
*/
var DOCS_LIST_API = {};

DOCS_LIST_API.googleOAuth = function() {
  var oAuthConfig = UrlFetchApp.addOAuthService('google');
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/"+
         "OAuthGetRequestToken?scope=https://docs.google.com/feeds/");
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey('anonymous');
  oAuthConfig.setConsumerSecret('anonymous');
  return {oAuthServiceName:'google', oAuthUseToken:"always"};
}

/*
*  @ args     docID  String   the id for a Google Document
*  @ args     format String   can be, "txt", "odt", "pdf", "html", "rtf", "doc", "png", 
"zip"
*  @ returns  blob 
*
*/
DOCS_LIST_API.GdocToFormat = function(docID, format){
  var fetchArgs = DOCS_LIST_API.googleOAuth();   
  fetchArgs.headers = { "GData-Version": "3.0" };
  fetchArgs.method = 'get';
  var url = 'https://docs.google.com/feeds/download/documents/export/Export?id='+
                       docID+'&exportFormat='+format+'&format='+format; 
  return UrlFetchApp.fetch(url, fetchArgs); 
}

  // Run it twice  
function doOAuth(){
  try{
    DOCS_LIST_API.GdocToFormat();
  }catch(e){
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:59:34.657

似乎code.gs中有错误

“逻辑”版本应该是这样的：（复制并粘贴到您的脚本编辑器中）

```
 var templateFolderId = '<<Enter Folder ID>>';

function doGet(e){
  var app = UiApp.createApplication().setTitle('Template Creator');

  //What this app is about
  var grid = app.createGrid(6, 2).setId('grid').setCellPadding(5);
  app.add(grid);

  grid.setWidget(0,0, app.createLabel("This App will allow you to create a form from"+
                                 " a template in Google Docs."));

  //create UI here
  // File Chooser  
  var fileChooser = app.createListBox().setName('fileChooser').setId('fileChooser')
                   .addChangeHandler(app.createServerChangeHandler('showForm')  
                   .addCallbackElement(grid)); 
  grid.setWidget(2, 0, fileChooser);

  //set the file Names in the listBox by calling on the DocsList service
  fileChooser.addItem('Choose Template');
  var files = DocsList.getFolderById(templateFolderId).getFiles();
  for (var i = 0; i < files.length; i++) {
    fileChooser.addItem(files[i].getName());
  }

  // Submit the form button  
  var button = app.createButton('Submit').setId('button')
              .addClickHandler(app.createServerClickHandler('createDoc')
                              .addCallbackElement(grid))
              .setVisible(false);

  grid.setWidget(4, 0, button);

return app
  }
  /*
  *  @returns body text from doc
  */
function getTemplateText(fileName){
  var files = DocsList.getFolderById(templateFolderId).getFiles();
for (var i = 0; i < files.length; i++) {
  if (fileName == files[i].getName()){  
     var text =  DOCS_LIST_API.GdocToFormat(files[i].getId(), 'txt');
    return text.getContentText();
      }  
    }       
}

  // function returns an array of unique form keys
function createKeys(templateFile){
  var templateTxt = getTemplateText(templateFile); 
  var templateVars = templateTxt.match(/\{\%[^\%]+\%\}/g);
  var templateKeys = [];
  var oneEach = "";
  for (var i in templateVars) {
    var keyObject = {};
    keyObject.text = templateVars[i].replace(/\{\%|\%\}/g, '');
    keyObject.id = camelString(templateVars[i]);
    if (oneEach.match(keyObject.text) == null){                 
      templateKeys.push(keyObject);  
    }
    oneEach += " " + keyObject.text;
  }   
  return templateKeys;
}

  function showForm(e){
  var app = UiApp.getActiveApplication();
  var flexTable = app.createFlexTable();
  var keys = createKeys(e.parameter.fileChooser);

    for (var i in keys) {
    var text = (keys[i].text);

    if(/^instruction/i.test(text)){       
  flexTable.setWidget(parseInt(i),0,app
                      .createLabel(text.substring(text.indexOf(':')+1)));      
    }else{
      var questionPanel = app.createHorizontalPanel();
      flexTable.setWidget(parseInt(i),0,questionPanel);    
      questionPanel.add(app.createLabel(text).setWidth('100px'));
      questionPanel.add(app.createTextBox().setName(keys[i].id));  
    }
  }

    flexTable.setWidget(keys.length+1,0,app.createLabel('________'));
  flexTable.setWidget(keys.length+2,0, app.createHorizontalPanel()
                                  .add(app.createLabel('Output file name: ').setWidth('100px'))
                                  .add(app.createTextBox()
                                        .setName('outputFile').setWidth('200px')
                                        .setValue('Copy of '+ e.parameter.fileChooser)));
  flexTable.setWidget(keys.length+3,0, app.createHorizontalPanel()
                                  .add(app.createLabel('Google Email: ').setWidth('100px'))
                                  .add(app.createTextBox()
                                        .setName('email').setWidth('200px')));

    app.getElementById('button').setVisible(true);        
  app.getElementById('grid').setWidget(3,0, flexTable);
  return app;  
}

  function createDoc(e){
  var app = UiApp.getActiveApplication();
  var keys = createKeys(e.parameter.fileChooser);
  var files = DocsList.getFolderById(templateFolderId).getFiles();

for (var i in files) {
  if (e.parameter.fileChooser == files[i].getName()){   
    var copyId = files[i].makeCopy(e.parameter.outputFile).getId();
    var doc = DocumentApp.openById(copyId)
    var copy = doc.getActiveSection();
    for (var i in keys) {
      var text = keys[i].text;    
      if(/^instruction/i.test(text)){ 
        if (copy.findText(keys[i].text) != null)
          copy.findText(keys[i].text).getElement().removeFromParent();
      }else{
        copy.replaceText('{%'+keys[i].text+'%}', e.parameter[keys[i].id]);
      }        
    }
    doc.saveAndClose();   
    doc.addEditor(e.parameter.email); 
     }
   }

app.getElementById('grid').setWidget(3,0, app.createAnchor('Open your Document', 
doc.getUrl())
                                  .setStyleAttribute('font-size', '18px'));
  app.getElementById('button').setVisible(false); 
  app.getElementById('fileChooser').setItemSelected(0, true);

  return app;  
} 
```

编辑：保存后，使用此功能进行测试：![在此处输入图像描述](../Images/f17ff8c7f50c0f3689959f8903023ca1.png)

# c - 理解c中的fork

> ID：11285180
> 
> 赞同：0
> 
> 时间：2012-07-01T19:55:25.770
> 
> 标签：c, fork

> **可能重复：**
> [“fork()”之后的 printf 异常](https://stackoverflow.com/questions/2530663/printf-anomaly-after-fork)
> [使用带有 c](https://stackoverflow.com/questions/6399145/using-fork-with-c)
> [fork() 分支的 fork 超出预期？](https://stackoverflow.com/questions/11132868/fork-branches-more-than-expected)

我有这个代码示例，但我不明白为什么这个代码打印 00000000 而不是 000000。

```
When i=0 , print 00
When i=1 , there is 4 process and it will print 0000. 
```

这是程序：

```
 main(){
    int i;
    for(i=0; i<2 ;i++){
        fork();
        printf("0");
    }
  } 
```

# c++ - OpenCV 模板匹配错误

> ID：11285181
> 
> 赞同：4
> 
> 时间：2012-07-01T19:55:29.423
> 
> 标签：c++, opencv, qt4

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <iostream>
#include <stdio.h>

using namespace std;
using namespace cv;

/// Global Variables
Mat img; Mat templ; Mat result;
char* image_window = "Source Image";
char* result_window = "Result window";

int match_method;
int max_Trackbar = 5;

/// Function Headers
void MatchingMethod( int, void* );

/** @function main */
int main( int argc, char** argv )
{
  /// Load image and template
  img = imread( "test.png", 1 );
  templ = imread( "template.png", 1 );

  /// Create windows
  namedWindow( image_window, CV_WINDOW_AUTOSIZE );
  namedWindow( result_window, CV_WINDOW_AUTOSIZE );

  /// Create Trackbar
  char* trackbar_label = "Method: \n 0: SQDIFF \n 1: SQDIFF NORMED \n 2: TM CCORR \n 3: TM CCORR NORMED \n 4: TM COEFF \n 5: TM COEFF NORMED";
  createTrackbar( trackbar_label, image_window, &match_method, max_Trackbar, MatchingMethod );

  MatchingMethod( 0, 0 );

  waitKey(0);
  return 0;
}

/**
 * @function MatchingMethod
 * @brief Trackbar callback
 */
void MatchingMethod( int, void* )
{
  /// Source image to display
  Mat img_display;
  img.copyTo( img_display );

  /// Create the result matrix
  int result_cols =  img.cols - templ.cols + 1;
  int result_rows = img.rows - templ.rows + 1;

  result.create( result_cols, result_rows, CV_32FC1 );

  /// Do the Matching and Normalize
  matchTemplate( img, templ, result, match_method );
  normalize( result, result, 0, 1, NORM_MINMAX, -1, Mat() );

  /// Localizing the best match with minMaxLoc
  double minVal; double maxVal; Point minLoc; Point maxLoc;
  Point matchLoc;

  minMaxLoc( result, &minVal, &maxVal, &minLoc, &maxLoc, Mat() );

  /// For SQDIFF and SQDIFF_NORMED, the best matches are lower values. For all the other methods, the higher the better
  if( match_method  == CV_TM_SQDIFF || match_method == CV_TM_SQDIFF_NORMED )
    { matchLoc = minLoc; }
  else
    { matchLoc = maxLoc; }

  /// Show me what you got
  rectangle( img_display, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );
  rectangle( result, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );

  imshow( image_window, img_display );
  imshow( result_window, result );

  return;
} 
```

在使用来自 opencv 的示例代码时，我遇到了以下错误。我对 QT C++ 很陌生，我不知道如何调试它。通常在Java中我会使用stacktrace并告诉我我在哪里搞砸了，但这似乎直接指向库。

> OpenCV 错误：在 crossCorr，文件 c:/OpenCV/opencv /modules/imgproc 中断言失败 (corrsize.height <= img.rows + templ.rows - 1 && corrsize.width <= img.cols + templ.cols - 1) /src/templmatch.cpp，第 70 行终止在抛出 'cv::Exception'what() 实例后调用：c:/OpenCV/opencv/modules/imgproc/src/templmatch.cpp:70: 错误：(-215 ) corrsize.height <= img.rows + templ.rows - 1 && corrsize.width <= img.cols + te mpl.cols - 1 在函数 crossCorr

**更新**：构建的 .exe 文件运行但不是从 QtCreator 启动时。我能够启动构建的 .exe 文件。我从 QtSDK/Simulator/mingw/bin 复制了文件，令我惊讶的是应用程序运行成功。当我单击 Qt Creator 中的 Run 按钮时，它会抛出与上面相同的错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T06:09:13.223

当我给出不正确的文件名作为图像/模板时，我得到了同样的错误。如果您提供不正确的文件名，它不会给出错误，但创建的 Mat 的大小为 (0,0)。因此断言错误。

当我给出正确的图像时，程序运行良好。

我的输出（使用正确的图像文件名） ![在此处输入图像描述](../Images/7bfbedf1b13d111b11fe3bfd1b1436f7.png)

PS我正在使用OpenCV 2.4.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T21:39:11.887

问题来自结果 Mat 大小，当您使用 Mat 的 create 方法时，第一个参数是**行数**，第二个参数是**col 数**，因此您应该更改`result.create( result_cols, result_rows, CV_32FC1 );`为`result.create( result_rows, result_cols, CV_32FC1 );`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T18:40:04.820

我遇到了同样的问题 - 我只能在强制更改两种类型后才能让它工作，如下所示：

```
cvtColor(src,src,CV_8UC1);  //channels need to match template
cvtColor(template,template,CV_8UC1);  //channels need to match template 
```

# java - HttpURLConnection 中的 SNI？

> ID：11285183
> 
> 赞同：2
> 
> 时间：2012-07-01T19:55:30.920
> 
> 标签：java, android, ssl, sni

所以我有一个带有自定义 HTTP 类的应用程序，基于`HttpUrlConnection`它向第三方服务器发出 HTTPS POST 请求。

在 2.3 上一切正常，但我最近买了一部 ICS 手机，发现应用程序的某些部分无法正常工作。经过一番挖掘，我发现 ICS 中的第三方服务器对相同的 HTTPS POST 请求的响应方式不同。

所以我在模拟器中测试了一些 HTTPS POST 请求，一个是 2.1 版本，另一个是 4.1，使用[http://www.posttestserver.com/](http://www.posttestserver.com/)的转储服务器，POST 请求是相同的，在这两种情况下，所有 POST 参数都正确传递除了 4.1 版本还有一个额外的标题：

```
SSL_TLS_SNI = posttestserver.com 
```

我读了一些关于它的信息，似乎在 Honeycomb 中添加了 SN​​I 支持，我猜这是问题的原因，也许第三方服务器没有正确处理 SNI。

如何禁用此 SNI 标头？或者一般来说我该如何处理这种情况？

# ios - 在 iOS 上从 RIFF 容器读取 AAC 音频

> ID：11285201
> 
> 赞同：0
> 
> 时间：2012-07-01T19:57:40.090
> 
> 标签：ios, audio, format, aac, riff

我有一个文件，它是一个包含 3 个块的 RIFF 容器；RIFF 块具有“WAVE”标识符。第一个块是'fmt'，第二个是'data'，最后一个是'eink'（我自己的块）。因此该文件是由使用 directshow 的 c# 代码生成的。音频以 AAC 编码。所以我不想在 iOS 5.* 上播放存储在“数据”块中的音频。
我试图读取整个“数据”块并`[initWithData:error:][1]`在`AVAudioPlayer`. 但它的工作方式似乎有所不同。
比我想象的要多，我可以尝试用这些字节制作自己的`m4a`文件并播放它，但是还有其他正确的方法吗？请建议我一些方法来调查它？在哪里读？或者其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:33:39.037

`Few concepts regarding WAV, AAC and MP4`

`WAV`是容器格式，可以存储任何其他音频数据，无论是压缩的还是未压缩的。更多详细信息，[请访问 http://www.sonicspot.com/guide/wavefiles.html](http://www.sonicspot.com/guide/wavefiles.html)

AAC 可以以多种方式封装。最常见的是 ADTS 和 MP4。AAC 容器格式的详细信息位于[http://en.wikipedia.org/wiki/Advanced_Audio_Coding#Container_formats](http://en.wikipedia.org/wiki/Advanced_Audio_Coding#Container_formats)

ADTS 是一种相对简单的格式，其中每个 AAC 帧前面都有一个标头。有关 ADTS 标头的更多详细信息，[请参见 http://wiki.multimedia.cx/index.php?title=ADTS](http://wiki.multimedia.cx/index.php?title=ADTS)

MP4 是相对复杂的格式，支持存储各种音频格式和视频格式。在 MP4 的情况下，头信息在文件中的 MP4 结构中存储一次，其余的 AAC 帧不需要任何头信息。

`How to support playing WAV file with AAC payload in iOS?`

*   确定有效载荷的类型，是 ADTS 还是 MP4 还是 ADIF
*   如果文件可以离线转换，请使用 FFMPEG 等第三方库将带有 AAC 的 WAV 转换为 iOS 支持的 M4A 文件。
*   如果需要在设备上转换文件，最好的方法是从有效负载中提取 AAC 帧数据，将它们转换为 iOS 期望的方式并对其进行解码。确定这一点的最佳方法是将文件离线转换为 M4A，然后查看数据如何馈送到 iOS 音频播放器。

# c# - 用于 WPF RadControls 自动化的优秀测试自动化框架

> ID：11285206
> 
> 赞同：1
> 
> 时间：2012-07-01T19:58:13.160
> 
> 标签：c#, automation, telerik, ui-automation

我正在寻找一个具有简单而强大的 C# 语言 API 的测试自动化框架。有一个使用 WPF 和 RadControls (Telerik) 开发的应用程序。不幸的是，Coded UI 不支持 RadControls，因为它们中的大多数没有实现 AutomationPeer。有谁知道支持通用 WPF 和 RadControls 控件的适当框架？

这是 RadControl 的列表：

1.  辐射日期选择器；
2.  RadMaskedTextBox;
3.  辐射网格视图；
4.  辐射树视图；
5.  辐射树列表视图；
6.  辐射展望栏；
7.  辐射时间选择器；
8.  辐射组合框；
9.  RadBusyIndi​​cator；
10.  辐射瓦片视图；
11.  辐射图；
12.  辐射日历；
13.  辐射颜色选择器；
14.  RadProgressBar。

我正在考虑几种解决方法（继承的 RadControls 中的 AutomationPeer 实现、表单上的 IronPython 注入等），但我确实想找到合适的工具而不是专注于它们。

先感谢您。

问候，斯塔斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:01:09.733

如果它是一个纯粹的 Web 应用程序，Telerik 自己的测试套件可能会满足您的需求。[http://www.telerik.com/automated-testing-tools/](http://www.telerik.com/automated-testing-tools/)

# ios - 不能乘除大或小的浮点数？

> ID：11285207
> 
> 赞同：0
> 
> 时间：2012-07-01T19:58:13.897
> 
> 标签：ios, xcode, nsnumber

很抱歉没有发布任何代码。这个问题与在 xcode ios 中工作时浮点数的除法和乘法有关。

我有变量，我需要除以 2.055926336e+09。不过可惜编译器不分吗？

我如何在代码中使用它

```
float variable1=((variable2)/(2.055926336e+09)); 
```

这对于用较小的值进行除法是正确的（例如：- (1/(2.055926336e+09) ）这是什么原因？有什么有效的方法来完成这项工作吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T20:18:40.260

我怀疑问题不在您的计算中。它在你的印刷品中。您可能正在尝试使用类似的格式打印答案`%f`。默认情况下，`%f`在小数点右侧打印 6 位数字。

10/2.055926336e+09 的值是 0.000000004863987500377056... 如您所见，它在小数点后有 6 个以上的零。如果您尝试使用 格式化它`%f`，您只会得到零。

如果您使用`%e`(或`%g`) 对其进行格式化，格式化程序将使用科学计数法，并将结果打印为`4.863988e-10`，表明结果不为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:06:38.900

当您说“它不除”时，您的意思是它返回的结果是`0`？

如果是这样，您的问题是浮点精度。 `10 / 2055926336`是一个非常小的数字。浮点数只有 6 位小数精度，并且无法准确存储。

您的问题不是数字太大，而是结果太小。尝试改用`double`数据类型，但请记住，如果您的数字变得比这更小，它将不起作用（双精度数为 15 位）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:26:53.243

@rob mayoff 的回答非常有效，但您可能对向用户展示科学结果不感兴趣。我的看法是将大数分成两个字符串并将它们连接起来，如下所示

```
-(NSString*) stringWithLargeNumber:(double)large
{
    int fraction1 = large/10000;
    float fraction2 = large-fraction1;
    return [NSString stringWithFormat:@"%d%.2f", fraction1, fraction2];
} 
```

希望这可以帮助

# facebook-graph-api - 应用页面选项卡不会添加到业务页面

> ID：11285209
> 
> 赞同：3
> 
> 时间：2012-07-01T19:58:46.203
> 
> 标签：facebook-graph-api, facebook-social-plugins, facebook-page

我正在尝试将应用程序添加到我的页面。

我试过：http://www.facebook.com/dialog/pagetab?app_id =####&next=http: [//www.facebook.com/evendark](http://www.facebook.com/dialog/pagetab?app_id=####&next=http://www.facebook.com/evendark) http://www.facebook.com/dialog/pagetab？ app_id=####&next=www.facebook.com/evendark

我明白了

API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序 错误消息：redirect_uri 不属于应用程序。

我究竟做错了什么？这以前总是有效的，这就是所有搜索网站所做的。我想要的只是一个显示为选项卡的 iframe。就这样。没有什么花哨。我知道我使用的 ID 是 Ivee 之前做过的正确的 ID。啊！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:21:39.123

在`Site URL`Facebook 设置中设置后，您可以在参数
中添加此 url 。`redirect_uri`

**类似问题：**
[Facebook API 错误 191](https://stackoverflow.com/questions/4691782/facebook-api-error-191)
[API 错误代码：191](https://stackoverflow.com/questions/7409532/api-error-code-191)
[Invalid redirect_uri: Given URL is not allowed by the Application configuration](https://stackoverflow.com/questions/8453683/invalid-redirect-uri-given-url-is-not-allowed-by-the-application-configuration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:13:18.127

要将应用程序页面选项卡添加到页面，请尝试使用带有以下内容的 js sdk。注意：您需要转到该页面并从应用程序下的管理设置中手动添加。

**参考：** [https ://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

* * *

```
 <div id="fb-root"></div>
<button onclick="addToPage();">Add Tab to Page</button>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>   
<script> 
      function addToPage() {
        // calling the API ...
        var obj = {
          method: 'pagetab',
          redirect_uri: 'http://anotherfeed.com/',
        };

        FB.ui(obj);
      }

    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T15:06:28.970

该`redirect_uri`参数必须是托管 iFrame 的 url。就我而言，将变量设置为 facebook 应用程序 url 会返回错误。

我不得不删除选项卡，然后再次将其设置为 iframe 页面，即 www.domain.com/iframe.php。

一个细节，我最初将 iframe 页面创建为静态页面，即 iframe.htm，这导致选项卡显示错误消息“功能不正确”，因为这些页面必须由动态页面服务器提供服务，例如 ASP 或 PHP .

# c# - 为什么pictureBox中的图像显示为镜像？而且也不合适？

> ID：11285216
> 
> 赞同：0
> 
> 时间：2012-07-01T19:59:28.703
> 
> 标签：c#

这是我将帧/图像保存到硬盘的代码。

我将图像旋转两次，一次 180 度，然后再一次 90 度。

但是视频显示女人从左到右走，但在旋转后，我在图片框中看到它，使用 trackBar 滚动从右到左像镜子一样移动。

这是旋转后的样子：

![在此处输入图像描述](../Images/db681801ad378fc383b3a02b2a583bd9.png)

她开始从右到左走，她的脸朝左看，而原来的应该是从左到右。

这就是我将它旋转到 180 度时的样子，这也是它在原始视频文件中的样子：

![在此处输入图像描述](../Images/3d2db85d48f1e1768e3200c41b6e6f07.png)

我想要的是看到她在第一张图片中的样子，但从左到右走是应该的。就像在第二张图片中她的脸点对了！

这是我正在使用的代码：

```
int ISampleGrabberCB.BufferCB(double sampleTime, IntPtr pBuffer, int bufferLen)
        {
            using (var bitmap = new Bitmap(_width, _height, _width * 3, PixelFormat.Format24bppRgb, pBuffer))
            {
                bitmap.RotateFlip(RotateFlipType.Rotate180FlipX);
               // bitmap.RotateFlip(RotateFlipType.Rotate90FlipX);
                if (SaveToDisc)
                {
                    String tempFile = _outFolder+ _frameId.ToString("D6") + ".bmp";
                    if (File.Exists(tempFile))
                    {
                        if (lbl1.InvokeRequired)
                        {
                            lbl1.Invoke(new MethodInvoker(delegate { lbl1.Text = _frameId.ToString(); }));
                        }
                    }
                    else
                    {
                        bitmap.Save(Path.Combine(_outFolder, _frameId.ToString("D6") + ".bmp"));
                        if (lbl1.InvokeRequired)
                        {
                            lbl1.Invoke(new MethodInvoker(delegate { lbl1.Text = _frameId.ToString(); }));
                        }
                    }
                    _frameId++;
                }
                else
                {
                    if (Images == null)
                        Images = new List<Bitmap>();
                    Images.Add((Bitmap)bitmap.Clone());
                }
            }
            return 0;
        } 
```

现在我将它旋转一次 180 度，我尝试将其再旋转 90 度，然后再旋转 180 度，但它没有用。

我想将第二张图像向右旋转 90 度，所以我尝试了一下：

```
bitmap.RotateFlip(RotateFlipType.Rotate90FlipX); 
```

但它没有做到。

我该怎么做 ？

我现在尝试使用此功能进行旋转：

```
public static Image RotateImage(Image img, float rotationAngle)
        {
            //create an empty Bitmap image
            Bitmap bmp = new Bitmap(img.Width, img.Height);

            //turn the Bitmap into a Graphics object
            Graphics gfx = Graphics.FromImage(bmp);

            //now we set the rotation point to the center of our image
            gfx.TranslateTransform((float)bmp.Width / 2, (float)bmp.Height / 2);

            //now rotate the image
            gfx.RotateTransform(rotationAngle);

            gfx.TranslateTransform(-(float)bmp.Width / 2, -(float)bmp.Height / 2);

            //set the InterpolationMode to HighQualityBicubic so to ensure a high
            //quality image once it is transformed to the specified size
            gfx.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;

            //now draw our new image onto the graphics object
            gfx.DrawImage(img, new Point(0, 0));

            //dispose of our Graphics object
            gfx.Dispose();

            //return the image
            return bmp;
        } 
```

然后我像这样使用它：

```
Bitmap t = new Bitmap(RotateImage(bitmap, 180));
t.Save(Path.Combine(_outFolder, _frameId.ToString("D6") + ".bmp")); 
```

但它不会向右旋转 180 或 90 度！它使它成为镜像。如果她的脸指向右侧的第二张图像，我想将图像向右旋转 90 度，这样她的脸就会向右站立！但相反，我一直认为她的脸像镜子一样向左。

为什么 ？

这是从视频文件中提取帧并将其保存到硬盘的类：

```
using System;
using System.Diagnostics;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Runtime.InteropServices;
using DirectShowLib;
using System.Windows.Forms;
using System.Collections.Generic;
using System.Drawing;

namespace Polkan.DataSource
{
    internal class WmvAdapter : ISampleGrabberCB, IDisposable
    {
        #region Fields
        //public Image img;
        private IFilterGraph2 _filterGraph;
        private IMediaControl _mediaCtrl;
        private IMediaEvent _mediaEvent;
        private int _width;
        private int _height;
        private readonly string _outFolder;
        private int _frameId;
        private Label lbl1;
        public bool done;

        #endregion

        #region Constructors and Destructors

        public WmvAdapter(string file, string outFolder , Label lbl)
        {
            _outFolder = outFolder;
            lbl1 = lbl;
            try
            {
                SetupGraph(file);
            }
            catch
            {
                Dispose();
                MessageBox.Show("A codec is required to load this video file. Please use http://www.headbands.com/gspot/ or search the web for the correct codec");
                throw;
            }
        }

        ~WmvAdapter()
        {
            CloseInterfaces();
        }

        #endregion

        public void Dispose()
        {
            CloseInterfaces();
        }

        public void Start()
        {
            int hr = _mediaCtrl.Run();
            WaitUntilDone();
            DsError.ThrowExceptionForHR(hr);
        }

        public void WaitUntilDone()
        {
            int hr;
            const int eAbort = unchecked((int)0x80004004);

            do
            {

                System.Windows.Forms.Application.DoEvents();
                EventCode evCode;
                hr = _mediaEvent.WaitForCompletion(100, out evCode);
            } while 
                (hr == eAbort);

            DsError.ThrowExceptionForHR(hr);

                lbl1.ForeColor = Color.Red;
                lbl1.Invoke(new MethodInvoker(delegate { lbl1.Text = _frameId.ToString(); }));
                done = true;
        }

        /// <summary> build the capture graph for grabber. </summary>
        private void SetupGraph(string file)
        {
            ISampleGrabber sampGrabber = null;
            IBaseFilter capFilter = null;
            IBaseFilter nullrenderer = null;

            _filterGraph = (IFilterGraph2)new FilterGraph();
            _mediaCtrl = (IMediaControl)_filterGraph;
            _mediaEvent = (IMediaEvent)_filterGraph;

            var mediaFilt = (IMediaFilter)_filterGraph;

            try
            {
                // Add the video source
                int hr = _filterGraph.AddSourceFilter(file, "Ds.NET FileFilter", out capFilter);
                DsError.ThrowExceptionForHR(hr);

                // Get the SampleGrabber interface
                sampGrabber = new SampleGrabber() as ISampleGrabber;
                var baseGrabFlt = sampGrabber as IBaseFilter;

                ConfigureSampleGrabber(sampGrabber);

                // Add the frame grabber to the graph
                hr = _filterGraph.AddFilter(baseGrabFlt, "Ds.NET Grabber");
                DsError.ThrowExceptionForHR(hr);

                // ---------------------------------
                // Connect the file filter to the sample grabber

                // Hopefully this will be the video pin, we could check by reading it's mediatype
                IPin iPinOut = DsFindPin.ByDirection(capFilter, PinDirection.Output, 0);

                // Get the input pin from the sample grabber
                IPin iPinIn = DsFindPin.ByDirection(baseGrabFlt, PinDirection.Input, 0);

                hr = _filterGraph.Connect(iPinOut, iPinIn);
                DsError.ThrowExceptionForHR(hr);

                // Add the null renderer to the graph
                nullrenderer = new NullRenderer() as IBaseFilter;
                hr = _filterGraph.AddFilter(nullrenderer, "Null renderer");
                DsError.ThrowExceptionForHR(hr);

                // ---------------------------------
                // Connect the sample grabber to the null renderer

                iPinOut = DsFindPin.ByDirection(baseGrabFlt, PinDirection.Output, 0);
                iPinIn = DsFindPin.ByDirection(nullrenderer, PinDirection.Input, 0);

                hr = _filterGraph.Connect(iPinOut, iPinIn);
                DsError.ThrowExceptionForHR(hr);

                // Turn off the clock. This causes the frames to be sent
                // thru the graph as fast as possible
                hr = mediaFilt.SetSyncSource(null);
                DsError.ThrowExceptionForHR(hr);

                // Read and cache the image sizes
                SaveSizeInfo(sampGrabber);
            }
            finally
            {
                if (capFilter != null)
                {
                    Marshal.ReleaseComObject(capFilter);
                }
                if (sampGrabber != null)
                {
                    Marshal.ReleaseComObject(sampGrabber);
                }
                if (nullrenderer != null)
                {
                    Marshal.ReleaseComObject(nullrenderer);
                }
                GC.Collect();
            }
        }

        private void SaveSizeInfo(ISampleGrabber sampGrabber)
        {
            // Get the media type from the SampleGrabber
            var media = new AMMediaType();
            int hr = sampGrabber.GetConnectedMediaType(media);
            DsError.ThrowExceptionForHR(hr);

            if ((media.formatType != FormatType.VideoInfo) || (media.formatPtr == IntPtr.Zero))
            {
                throw new NotSupportedException("Unknown Grabber Media Format");
            }

            // Grab the size info
            var videoInfoHeader = (VideoInfoHeader)Marshal.PtrToStructure(media.formatPtr, typeof(VideoInfoHeader));
            _width = videoInfoHeader.BmiHeader.Width;
            _height = videoInfoHeader.BmiHeader.Height;

            DsUtils.FreeAMMediaType(media);
            GC.Collect();
        }

        private void ConfigureSampleGrabber(ISampleGrabber sampGrabber)
        {
            var media = new AMMediaType
            {
                majorType = MediaType.Video,
                subType = MediaSubType.RGB24,
                formatType = FormatType.VideoInfo
            };
            int hr = sampGrabber.SetMediaType(media);
            DsError.ThrowExceptionForHR(hr);

            DsUtils.FreeAMMediaType(media);
            GC.Collect();
            hr = sampGrabber.SetCallback(this, 1);
            DsError.ThrowExceptionForHR(hr);
        }

        private void CloseInterfaces()
        {
            try
            {
                if (_mediaCtrl != null)
                {
                    _mediaCtrl.Stop();
                    _mediaCtrl = null;
                }
            }
            catch (Exception ex)
            {
                Debug.WriteLine(ex);
            }

            if (_filterGraph != null)
            {
                Marshal.ReleaseComObject(_filterGraph);
                _filterGraph = null;
            }
            GC.Collect();
        }

        int ISampleGrabberCB.SampleCB(double sampleTime, IMediaSample pSample)
        {
            Marshal.ReleaseComObject(pSample);
            return 0;
        }

        //add a boolean property to indicate the save-mode
        public bool SaveToDisc { get; set; }
        //the list for the bitmaps
        public List<Bitmap> Images { get; set; }

        int ISampleGrabberCB.BufferCB(double sampleTime, IntPtr pBuffer, int bufferLen)
        {
            using (var bitmap = new Bitmap(_width, _height, _width * 3, PixelFormat.Format24bppRgb, pBuffer))
            {
                //bitmap.RotateFlip(RotateFlipType.RotateNoneFlipXY);
               // bitmap.RotateFlip(RotateFlipType.Rotate90FlipX);
               // Bitmap t = new Bitmap(RotateImage(bitmap, 180));
                if (SaveToDisc)
                {
                    String tempFile = _outFolder+ _frameId.ToString("D6") + ".bmp";
                    if (File.Exists(tempFile))
                    {
                        if (lbl1.InvokeRequired)
                        {
                            lbl1.Invoke(new MethodInvoker(delegate { lbl1.Text = _frameId.ToString(); }));
                        }

                    }
                    else
                    {
                        bitmap.Save(Path.Combine(_outFolder, _frameId.ToString("D6") + ".bmp"));
                        if (lbl1.InvokeRequired)
                        {
                            lbl1.Invoke(new MethodInvoker(delegate { lbl1.Text = _frameId.ToString(); }));
                        }
                    }
                    _frameId++;
                }
                else
                {
                    if (Images == null)
                        Images = new List<Bitmap>();
                    Images.Add((Bitmap)bitmap.Clone());
                }
            }
            return 0;
        }

        public static Image RotateImage(Image img, float rotationAngle)
        {
            //create an empty Bitmap image
            Bitmap bmp = new Bitmap(img.Width, img.Height);

            //turn the Bitmap into a Graphics object
            Graphics gfx = Graphics.FromImage(bmp);

            //now we set the rotation point to the center of our image
            gfx.TranslateTransform((float)bmp.Width / 2, (float)bmp.Height / 2);

            //now rotate the image
            gfx.RotateTransform(rotationAngle);

            gfx.TranslateTransform(-(float)bmp.Width / 2, -(float)bmp.Height / 2);

            //set the InterpolationMode to HighQualityBicubic so to ensure a high
            //quality image once it is transformed to the specified size
            gfx.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;

            //now draw our new image onto the graphics object
            gfx.DrawImage(img, new Point(0, 0));

            //dispose of our Graphics object
            gfx.Dispose();

            //return the image
            return bmp;
        }

        /*int ISampleGrabberCB.BufferCB(double sampleTime, IntPtr pBuffer, int bufferLen)
        {
            using (var bitmap = new Bitmap(_width, _height, _width * 3, PixelFormat.Format24bppRgb, pBuffer))
            {
                bitmap.RotateFlip(RotateFlipType.Rotate180FlipX);
                MemoryStream myStream = new MemoryStream(1000000);
                bitmap.Save(myStream, ImageFormat.Bmp);
                //bitmap.Save(Path.Combine(_outFolder, _frameId + ".bmp")); 
                img = new Bitmap(myStream);

            }
            return 0;
        }*/
    }
} 
```

在 Form1 中，我使用这样的类：

```
private void button5_Click(object sender, EventArgs e)
        {
            button5.Enabled = false;
            button1.Enabled = false;
            wmv = new Polkan.DataSource.WmvAdapter(@"d:\VIDEO0040.3gp", sf,label2);
            wmv.SaveToDisc = true;
            wmv.Start();
            if (wmv.done == true)
            {
                button1.Enabled = true;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:31:06.867

我试过了

```
bitmap1.RotateFlip(RotateFlipType.RotateNoneFlipX); 
```

并且似乎按要求工作。

实际上，`RotateFlipType.Rotate180FlipX`将图像旋转 180 度，然后在 X 轴上翻转，将所有内容返回到初始位置。

如果我错了，请纠正我，我不是图形专家。

# ios - 找到 UIImagePickerControllers UIToolBar 颜色和大小

> ID：11285217
> 
> 赞同：1
> 
> 时间：2012-07-01T19:59:37.953
> 
> 标签：ios, uitoolbar

我正在实现 UIImagePickerController 并且在 (1) 拍摄图像 (2) 使用或重新拍摄之后我有最后一个自定义步骤。我的最后一步是让用户缩放、裁剪和旋转图像。

由于 UIImagePickerController 有一个`toolbar`属性，我假设底部栏带有 |取消相机按钮| 和|重新使用| 是一个工具栏。我想让我的最终 viewController 有一个工具栏，看起来与 UIImagePicker 的工具栏完全相同。

我摆弄了一下，可以看到它似乎有 55 像素高，但我不知道如何绘制渐变。有没有人做过类似的事情并且知道如何将这样的渐变应用到工具栏？

![UIIMagePickerController 工具栏](../Images/8aefe6ec2b9642525f66a03a889ad944.png)

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:34:39.173

您可以只创建背景图像并将其用作按钮和栏的背景，也可以使用 Core Graphics 框架创建渐变。您可以通过执行类似[此答案](https://stackoverflow.com/questions/844710/make-background-of-uiview-a-gradient-without-sub-classing)的操作来创建渐变。

# ruby - 仅从 Ruby 中的数组中选择随机元素

> ID：11285218
> 
> 赞同：2
> 
> 时间：2012-07-01T19:59:41.693
> 
> 标签：ruby, arrays, random, sample, shuffle

我知道我可以使用 sample 方法从数组中选择一个随机元素，但这会留下一个元素被多次选择的可能性。我可以先打乱数组，然后按顺序从第一个元素到最后一个元素，但我知道这是内存密集型的，如果可能的话，我正在寻找一种不那么密集的方法！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T20:46:20.680

`sample`接受一个论点：

```
[*(1..10)].sample(5) #=>[3, 4, 1, 8, 9] 
```

没有元素会被选择两次。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-01T20:38:08.373

洗牌数组不是内存密集型的。Ruby 有一个默认的 shuffle 实现，它被称为[`Array.shuffle!`](http://www.ruby-doc.org/core-1.8.7/Array.html#method-i-shuffle-21). 查看源代码，您可以看到（它是 C）：

```
rb_ary_shuffle_bang(ary)
    VALUE ary;
{
    long i = RARRAY(ary)->len;

    rb_ary_modify(ary);
    while (i) {
        long j = rb_genrand_real()*i;
        VALUE tmp = RARRAY(ary)->ptr[--i];
        RARRAY(ary)->ptr[i] = RARRAY(ary)->ptr[j];
        RARRAY(ary)->ptr[j] = tmp;
    }
    return ary;
} 
```

此实现遵循经典的[Fisher-Yates 算法](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)。

所以：

1.  使用`shuffle!`. 时间复杂度是`O(n)`，不需要额外的内存。
2.  遍历数组。时间复杂度是`O(n)`，不需要额外的内存（只需要一个整数来保存当前索引）。

总体而言，您拥有所需的一切，无需额外的内存和时间复杂度`O(n)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T20:17:12.727

如果数组元素非常大，您可以尝试简单地打乱索引列表并对其进行迭代：

```
a = %w{a b c d e f g h}

[*0...a.size].shuffle.each do |index|
  puts a[index]
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T20:04:42.557

您必须跟踪您已经选择的那些元素；你打算怎么做，把它们放在自己的数组中？

洗牌和迭代。这不会比跟踪那些已经选择的元素占用更多的内存。

# android - Android 问题在发布后上升

> ID：11285219
> 
> 赞同：-1
> 
> 时间：2012-07-01T19:59:53.943
> 
> 标签：android, android-applicationinfo

我已经将我的第一个 android 应用程序上传到市场，它包含一些声音、一些图像和一些画廊项目。这使得项目大小接近 9.5MB。我分别对声音和图像使用了 mp3 和 png 格式。我通过右键单击项目-> Android 工具-> 导出签名的应用程序来导出项目.. 并且该过程继续进行。现在，当用户下载应用程序时，安装后会扩展，大小超过 24MB。它也有一些错误，可以在下图中看到：

![在此处输入图像描述](../Images/3f4676f7fd724828a9c8333bebec21bc.png)

有什么问题？？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:13:48.497

Your application can't be moved to the SD-card, because you have to explicitly enable that first. To do so, use the [`android:installLocation`-attribute](http://developer.android.com/guide/topics/manifest/manifest-element.html#install) in the `<manifest>`-tag of your Android Manifest. Also see: [How to enable app being moved to sdcard (and support android < 2.2 still)?](https://stackoverflow.com/questions/4023068/how-to-enable-app-being-moved-to-sdcard-and-support-android-2-2-still)

* * *

For the "expanding after installation"-part: Have you checked the size if your (uncompressed) application on your dev-machine? You can extract the build `.apk`-file with 7zip (for example) to see what size it becomes.

To make Android optimize certain pieces of binary assets (for example your PNG-files), put them in the `/res/XXX`-subfolders rather then the older `/assets`-folder (because Android will optimize those):

> Bitmap files may be automatically optimized with lossless image compression by the aapt tool during the build process. [...]

[Source](http://developer.android.com/guide/topics/resources/drawable-resource.html#Bitmap)

* * *

As the last point, your applications "Clear Data"-button is not activated, because you don't seem to have any application-data.

The "application data" does not include any binary resources your application brings with it. It does simply remove any data which is stored on the [Internal Storage](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal) for your application.

# c++ - C++ switch 语句返回奇怪的值

> ID：11285220
> 
> 赞同：-2
> 
> 时间：2012-07-01T19:59:56.717
> 
> 标签：c++, switch-statement

我的问题是这个函数返回guess 作为97 和y 的总和，而不仅仅是字母，正如switch 语句所指示的那样。奇怪的是，当我拥有它时，它只是返回 y，它的工作方式完全符合我的预期。例如，当 y=4，并且我让它返回 y 时，显示 4。当 y=4 并返回 'guess' 时，显示 101。免责声明：这不是完整的代码。它真的很长，而且我认为是多余的，因为我唯一的问题是当这个特定函数返回“猜测”时，即使它返回 y 也不行。如果所有代码都有用，我很乐意把它放上来。

```
int letterguess(int z){
char guess;
int y;

y=letters[0][z];

switch (y){
            case 0:
                guess='a';
                break;
            case 1:
                guess='b';
                break;
            case 2:
                guess='c';
                break;
            case 3:
                guess='d';
                break;
            case 4:
                guess='e';
                break;
            case 5:
                guess='f';
                break;
            case 6:
                guess='g';
                break;
            case 7:
                guess='h';
                break;
            case 8:
                guess='i';
                break;
            case 9:
                guess='j';
                break;
            case 10:
                guess='k';
                break;
            case 11:
                guess='l';
                break;
            case 12:
                guess='m';
                break;
            case 13:
                guess='n';
                break;
            case 14:
                guess='o';
                break;
            case 15:
                guess='p';
                break;
            case 16:
                guess='q';
                break;
            case 17:
                guess='r';
                break;
            case 18:
                guess='s';
                break;
            case 19:
                guess='t';
                break;
            case 20:
                guess='u';
                break;
            case 21:
                guess='v';
                break;
            case 22:
                guess='w';
                break;
            case 23:
                guess='y';
                break;
            case 24:
                guess='y';
                break;
            case 25:
                guess='z';
                break;

        }

        return guess;

} 
```

我真的看不出这怎么可能会这样搞砸。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T20:01:45.467

这正是你告诉它要做的事情。在标准[ASCII 字符集中](http://www.asciitable.com/)，`a`有值`97`等。

不过，尚不清楚您要做*什么*。您已将函数的返回类型指定为`int`，但您将返回值设置为字符文字。如果您想返回一个可以显示的字符，我建议将返回类型更改为`char`，并执行以下操作：

```
char c = letterguess(blah);
std::cout << c << "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:03:32.200

这很有意义。由于您已声明`y`为整数，因此当您输出 时`y`，您会得到一个整数。由于 a`char` [可以映射](http://www.asciitable.com/index/asciifull.gif)到整数，因此`char`输出的整数值就是 。在这种情况下，“e”的值是十进制的 101。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T20:03:27.920

改变这个：

```
int letterguess(int z) 
```

对此：

```
char letterguess(int z) 
```

然后，当您输出返回值时，您将得到字母而不是其数值。

# android - Android 将图像上传到 WCF 服务“参数无效。”

> ID：11285226
> 
> 赞同：2
> 
> 时间：2012-07-01T20:01:05.170
> 
> 标签：android, wcf

从图库中选择图像，我可以上传流，但收到错误“参数无效”。尝试在 WCF 中转换为图像时。

Android 代码创建到 REST 服务的连接并将图像上传为 Byte[]：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);

  if (resultCode == RESULT_OK){
    Uri targetUri = data.getData();

    Bitmap bitmap;
    try {
      bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(targetUri));
      ByteArrayOutputStream out = new ByteArrayOutputStream();

      bitmap.compress(Bitmap.CompressFormat.JPEG, 6, out);

      DefaultHttpClient httpClient = new DefaultHttpClient();

      byte[] sendData = out.toByteArray();

      HttpPost postRequest = new HttpPost("http://www.thehost.dk/MobileService/Service.svc/uploadpicture/");
      ByteArrayBody bab = new ByteArrayBody(sendData, "picture.jpg");
      MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
      reqEntity.addPart("image", bab);
      postRequest.setEntity(reqEntity);
      httpClient.execute(postRequest); 
```

WCF C# 代码接收流并尝试转换为图像，但收到错误：

```
 public void UploadPicture(Stream imageData)
    {
        try
        {
            byte[] image = StreamToBytes(imageData);

            ImageConverter imageConverter = new ImageConverter();
            Image img = imageConverter.ConvertFrom(image) as Image; <-- Exception happens here

            SaveImage(img);
        }
        catch (Exception ex)
        {
            Log(ex.ToString());
        }
    }

    private byte[] StreamToBytes(Stream stream)
    {
        byte[] output = new byte[0];
        byte[] stream_array = new byte[0];
        byte[] buffer = new byte[1024];
        int read;

        while ((read = stream.Read(buffer, 0, buffer.Length)) > 0)
        {
            stream_array = new byte[output.Length + read];
            output.CopyTo(stream_array, 0);
            Array.Copy(buffer, 0, stream_array, output.Length, read);
            output = stream_array;
        }

        return output;
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T08:08:15.240

我想先解释一下为什么会先出现这个问题，然后再给你解决方案：在你的代码上尝试这个实验。代替您使用的以下代码，将其替换为以下代码：

```
 public void UploadPicture(Stream imageData)
       {
           try
           {
               byte[] image = StreamToBytes(imageData);
               ImageConverter imageConverter = new ImageConverter();
               Image img = imageConverter.ConvertFrom(image) as Image;
               SaveImage(img);
           }
           catch (Exception ex)
           {
               Log(ex.ToString());
           }
       } 
```

用。。。来代替，

```
 public void UploadPicture (Stream imageData)
    {
        try
        {
            byte[] buffer = new byte[10000];
            imagedata.Read(buffer, 0, 10000);
            FileStream f = new FileStream("D:\\FileUpload\\SubjectFront.JPG", FileMode.OpenOrCreate);
            f.Write(buffer, 0, buffer.Length);
            f.Close();
            imagedata.Close();
        }
        catch (Exception ex)
        {
        } 
    } 
```

这段代码毫无例外地执行（我相信），您会在“已保存”路径中找到图像文件。请注意在 D:\FileUpload 中创建的文件。文件的大小比你的android代码发送的文件的大小要大得多（即如果你没有压缩它）。尝试使用任何图像编辑器打开此文件，它将作为损坏的文件打开（您将无法看到图像）。

现在用记事本打开文件。可以看到，除了乱码的二进制数据外，还有一些可用的文本。例子： - **内容处置：表单数据；……等等等等*。此文本是您的“参数无效”异常的罪魁祸首。在 java 中使用 Multipart 时，它会添加此文本并将其与转换为字节流的图像数据一起发送。我不确定它为什么会这样。现在，删除任何人类可读的文本并保存文件。在任何图像编辑器和中提琴中打开文件，就有你的图像。*

 *现在，解决方案在于编写代码以从 WCF 方法接收的流中删除此文本。我发现了一个非常漂亮的解析器（感谢 Anthony），它可以有效地完成这项工作。你可以在这里找到它（[http://multipartparser.codeplex.com/](http://multipartparser.codeplex.com/)）。只需将此 .cs 文件添加到您的项目中，然后执行以下操作。

```
 public string UploadPicture (Stream imagedata)
    {
        MultipartParser parser = new MultipartParser(imagedata);

        if (parser.Success)
        {
            string fileName = parser.Filename;
            string contentType = parser.ContentType;
            byte[] fileContent = parser.FileContents;
            System.Drawing.Image image = byteArrayToImage(fileContent);
            image.Save("D:\\FileUpload\\" + fileName);
            return "Success !!!";
         }
         else
         {
            return "Exception!!!";
         }
   } 
```

byteArrayToImage 的实现如下：

```
public System.Drawing.Image byteArrayToImage(byte[] byteArrayIn)
{
    MemoryStream ms = new MemoryStream(byteArrayIn);
    System.Drawing.Image returnImage = System.Drawing.Image.FromStream(ms);
    return returnImage;
} 
```

希望对您有所帮助……</p>*

# c++ - Android 传感器数据位移

> ID：11285227
> 
> 赞同：1
> 
> 时间：2012-07-01T20:01:14.957
> 
> 标签：c++, accelerometer, android-sensors

我有从 Android 手机计算的传感器数据。我使用 xyz 坐标上的矩阵进行转换。然后我用手机得到的加速度来计算速度和位移。这是我查找位移和速度的代码。它始终是对应的先前值：

```
 velocity[e]   = (accel[e-3]) * (time[i]-time[i-1])+velocity[e-3];

 velocity[e+1] = (accel[e-2]) * (time[i]-time[i-1]) +velocity[e-2];

 velocity[e+2] = (accel[e-1]) * (time[i]-time[i-1])+ velocity[e-1];

      displacement[e] = (velocity[e-3])*(time[i]-time[i-1])+.5*(accel[e-3])*pow((time[i]-time[i-1]),2) + displacement[e-3];
      displacement[e+1] = (velocity[e-2])*(time[i]-time[i-1])+.5*(accel[e-2])*pow((time[i]-time[i-1]),2) + displacement[e-2];
      displacement[e+2] = (velocity[e-1])*(time[i]-time[i-1])+.5*(accel[e-1])*pow((time[i]-time[i-1]),2) + displacement[e-1]; 
```

但是，我得到了像 -3436.0 19206.2 11373.5 这样的数字，因为位移应该不会那么高。我什至制作了一个测试文件来测试我的公式，就我得到的数字而言，一切都是正确的。但是，它不适用于真实数据。另外，我读了一些关于从加速度、速度和位移中去除平均值的内容，但不太明白，所以有人可以解释一个解决方案来获得正确的数字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:27:23.483

[它不起作用](https://stackoverflow.com/a/7835988/341970)，这些传感器不够精确，无法计算位置。

令人惊讶的是这个问题出现了多少次。

# ruby-on-rails - Rails 从包含对象名称的字符串访问对象

> ID：11285230
> 
> 赞同：0
> 
> 时间：2012-07-01T20:01:32.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试基于包含对象名称的字符串访问对象。该对象是有范围的（我使用 cancan 来确保用户只能访问他们被允许访问的记录）。我在下面包含了一些代码，其中包含我必须要去的地方：

```
operation_type:string, one of %w(add sub mult div)
left_operand_object:string
left_operand:string
right_operand_object:string
right_operand:string

def result
    r = [access object using left_operand_object]
    k = [access object using right_operand_object]

    if operation_type == 'add'
        r.instance_variable_get('@'+left_operand) + k.instance_variable_get('@'+left_operand)
    elsif operation_type == 'sub'
        r.instance_variable_get('@'+left_operand) - k.instance_variable_get('@'+left_operand)
    ...
end 
```

所以，两个问题：

*   如何完成该`r = [access object using left_operand_object]`行，以允许我根据字符串中的名称访问作用域对象`left_operand_object`？
*   `instance_variable_get`如果`left_operand`是类似的东西会起作用`customers.count`还是只有在没有计数方法的情况下才会起作用？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:31:47.257

我理解正确吗，`left_operand_object`会是这样的`"Customer"`吗？

如果是这样，您可以使用`left_operand_object.constantize`来获取您的`Customer`课程。
可能更安全地运行`left_operand_object.classify.constantize`，所以`"row_entry"`会变得`RowEntry`。

我不太清楚你的第二个问题是关于什么的。如果你想调用该`count`方法，你可以这样做`r.send(left_operand.to_sym)`（假设`left_operand = "count"）。

如果`left_operand`是“sales.count”之类的东西，这是行不通的。我不知道是否有一种惯用的方式来做到这一点，但是`left_operand.split(".").inject(r) { |a, b| a.send b }`对于这种特殊情况来说是诀窍。

* * *

# scala - 在 Squeryl ORM 的 WHERE 子查询中使用 gt、gte 等

> ID：11285232
> 
> 赞同：1
> 
> 时间：2012-07-01T20:01:41.727
> 
> 标签：scala, orm, subquery, squeryl

我最近开始评估[Squeryl ORM](http://squeryl.org)，它看起来很棒，但最后我遇到了一个 SQL 查询，它似乎很难用 Squeryl“构建”。

我想获得数量高于所有产品平均数量的所有产品。在 SQL 中，这看起来像

```
SELECT * FROM product p WHERE p.quantity > (SELECT AVG(quantity) FROM product) 
```

我已经发现 Squeryl 支持`in()`,`exists()`和`notExists()`-clause`where`子查询。但由于 Squeryl 也支持`avg`聚合，我希望这样的事情是可能的：

```
val avgQuantity = from(products)(p => compute(avg(p.quantity)))
val oftenOccuringProducts = from(products)(p => where(p.quantity gt avgQuantity) select(p)) 
```

可悲的是，这引发了：

```
type mismatch; found : org.squeryl.Query[org.squeryl.dsl.Measures[Option[org.squeryl.PrimitiveTypeMode.FloatType]]] 
required: org.squeryl.dsl.NumericalExpression[?] 
```

当然，我可以在 2 个查询中做到这一点（首先，获取平均数量，然后在第二个查询中使用它）但我想知道是否可以**使用一个包含 subquery 的查询**来做到这一点。

这对 Squeryl 是不可能的，还是我只是错过了什么？

如果这是可能的，我会很感激任何帮助，如果，如何。

谢谢，

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:01:05.133

根据邮件列表的相同讨论，已将[修复推](https://github.com/max-l/Squeryl/commit/557292558863d18033c73f716435bd371e4fc1c3)送到 Squeryl 主分支，并将包含在下一个版本中。

# android - 如何关闭 AlertDialog.Builder？

> ID：11285235
> 
> 赞同：35
> 
> 时间：2012-07-01T20:01:58.183
> 
> 标签：android, memory, dialog, alert, dismiss

在下面的代码中，如何关闭警报框？我不想造成内存泄漏。我在 alertDialog 上尝试了 .dismiss()，但是没有用...谢谢

```
// User pressed the stop button
public void StopMsg_button_action(View view){
    final EditText password_input = new EditText(this); // create an text input field
    password_input.setHint("Enter Password"); // put a hint in it
    password_input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD); // change it to password type

    AlertDialog.Builder alertDialog = new Builder(this); // create an alert box
    alertDialog.setTitle("Enter Password"); // set the title
    alertDialog.setView(password_input);  // insert the password text field in the alert box
    alertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() { // define the 'OK' button
        public void onClick(DialogInterface dialog, int which) {
             String entered_password = password_input.getText().toString();
             if (entered_password.equals(my_password)) {
                locManager.removeUpdates(locListener); // stop listening for GPS coordinates
                startActivity(new Intent(Emergency_1Activity.this,Main_MenuActivity.class)); // go to main menu
             } else {
                 alert("Incorrect Password");
             }
        } 
    });
    alertDialog.setNeutralButton("Cancel", new DialogInterface.OnClickListener() { // define the 'Cancel' button
        public void onClick(DialogInterface dialog, int which) {

        } 
    });
    alertDialog.show(); // show the alert box
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-01T20:10:53.047

什么对dismiss()不起作用？

您应该可以使用[Dialog.dismiss()](http://developer.android.com/reference/android/app/Dialog.html#dismiss%28%29)或[Dialog.cancel()](http://developer.android.com/reference/android/app/Dialog.html#cancel%28%29)

```
alertDialog.setNeutralButton("Cancel", new DialogInterface.OnClickListener() { // define the 'Cancel' button
    public void onClick(DialogInterface dialog, int which) {
        //Either of the following two lines should work.
        dialog.cancel();
        //dialog.dismiss();
    } 
}); 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2015-02-27T16:17:58.470

使用以下代码，您可以显示一个 ListBox AlertDialog，当您按下某个项目时，您会关闭该对话框。代码的顺序很重要。

```
AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

String names[] ={"A","B","C","D"};
ArrayAdapter<String> adapter = new ArrayAdapter<String>(mContext,android.R.layout.simple_list_item_1,names);

LayoutInflater inflater = getLayoutInflater();
View convertView = (View)inflater.inflate(R.layout.list_layout, null);
ListView lv = (ListView) convertView.findViewById(R.id.listView1);
lv.setAdapter(adapter);
alertDialog.setView(convertView);
alertDialog.setTitle("List");
final AlertDialog ad = alertDialog.show();

lv.setOnItemClickListener(new AdapterView.OnItemClickListener()
{
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id)
    {
        //Toast.makeText(mContext, position, Toast.LENGTH_LONG).show();
        ad.dismiss();
    }
}); 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-10-13T15:48:21.130

代码非常简单：

```
final AlertDialog show = alertDialog.show(); 
```

最后以按钮的动作为例：

```
show.dismiss(); 
```

例如使用自定义警报对话框：

[![在此处输入图像描述](../Images/e5a1f0f720d1dcb31982cc38fd847025.png)](https://i.stack.imgur.com/5mawO.png)

java上的代码，你可以创建一个Object AlertDialog：

```
public class ViewAlertRating {

    Context context;
    public ViewAlertRating(Context context) {
        this.context = context;
    }

    public void showAlert(){

        AlertDialog.Builder alertDialog = new AlertDialog.Builder(context);
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        View alertView = inflater.inflate(R.layout.layout_test, null);
        alertDialog.setView(alertView);

        final AlertDialog show = alertDialog.show();

        Button alertButton = (Button) alertView.findViewById(R.id.btn_test);
        alertButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                show.dismiss();
            }
        });
    }
} 
```

代码 XML layout_test.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Valoración"
        android:id="@+id/text_test1"
        android:textSize="20sp"
        android:textColor="#ffffffff"
        android:layout_centerHorizontal="true"
        android:gravity="center_horizontal"
        android:textStyle="bold"
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        android:background="#ff37dabb"
        android:paddingLeft="20dp"
        android:paddingRight="20dp" />

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="20dp"
        android:paddingRight="20dp"
        android:layout_marginTop="15dp">

        <EditText
            android:layout_width="match_parent"
            android:layout_height="120dp"
            android:id="@+id/edit_test"
            android:hint="Descripción"
            android:textColor="#aa000000"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:textColorHint="#aa72777a"
            android:gravity="top" />
    </LinearLayout>

    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center_horizontal"
        android:paddingTop="10dp"
        android:paddingLeft="15dp"
        android:paddingRight="15dp"
        android:paddingBottom="15dp" >

        <LinearLayout
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:orientation="horizontal"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:weightSum="1.00"
                android:gravity="right" >

                <Button
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Enviar"
                    android:id="@+id/btn_test"
                    android:gravity="center_vertical|center_horizontal"
                    android:textColor="#ffffffff"
                    android:background="@drawable/btn_flat_blue_selector" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

最后，调用 Activity：

```
ViewAlertRating alertRating = new ViewAlertRating(this);
alertRating.showAlert(); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-09-30T06:55:09.810

如果您不想放置任何按钮并且有自定义布局，您必须在其中说 textview 并且希望在单击该 textview 时关闭警报对话框，则必须使用这种方式：

```
AlertDialog alertDialog = builder.show(); 
```

然后检查

```
if(alertDialog != null && alertDialog.isShowing()){
      alertDialog.dismiss();
} 
```

如果您想在检查某些条件后在活动中的其他地方将其关闭，这也是正确的。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-05-21T18:32:49.610

此方法演示了所需的代码..来自 Namrata 的早期答案

```
@SuppressLint("InflateParams")
private static void showDialog(Activity activity, int layoutId)
{
    LayoutInflater inflater = activity.getLayoutInflater();
    View dialoglayout = inflater.inflate(layoutId, null);

    AlertDialog.Builder builder = new AlertDialog.Builder(activity);
    builder.setView(dialoglayout);

    CustomDialog.doCustomLogic(activity, layoutId, dialoglayout);

    final AlertDialog alertDialog = builder.show();

    // caller assumes there will be a btn_close element present
    Button closeNowBtn = (Button) dialoglayout.findViewById(R.id.btn_close);
    closeNowBtn.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            alertDialog.dismiss();
        }
    });
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-30T23:35:41.527

解雇或取消`AlertDialog.Builder`

```
dialog.setNegativeButton("إلغاء", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialogInterface, int i) {
        dialogInterface.dismiss()
    }
}); 
```

您必须`dismiss()`在对话界面上调用。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-05-30T12:46:38.147

只需覆盖 create 方法并保存对话框实例。然后你可以调用dismiss

```
@Override
public AlertDialog create() {
    this.dialog = super.create();
    return this.dialog;
} 
```

在代码的某处：

```
dialog.dismiss(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-02T07:55:26.720

我试过这个并且成功了！

```
.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialogInterface, int i) {
               alertDialog.setCancelable(true);
            }
        }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-11T06:47:48.280

一个完整的例子：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
    View view = getLayoutInflater().inflate(R.layout.dialog_layout,null);
    TextView tvcancel = (TextView)view.findViewById(R.id.tvcancel);
    TextView tvdisconnect = (TextView)view.findViewById(R.id.tvdisconnect);
    builder.setView(view);
    final AlertDialog ad = builder.show();

    tvdisconnect.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            ad.dismiss();
            stopVpn();
        }
    });

    tvcancel.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            ad.dismiss();
        }
    }); 
```

# wpf - WPF画布标尺滚动条问题

> ID：11285237
> 
> 赞同：1
> 
> 时间：2012-07-01T20:02:21.870
> 
> 标签：wpf, scrollbar, rulers

即使滚动条可见，我也希望尺子始终可见。见下图

![在此处输入图像描述](../Images/425159708f491034303200384e4e391f.png)

如果我向下滚动或向右滚动，当我将整个面板滚动到底部/右侧时，两个画布标尺都将消失。两个统治者都是 Dock.Left 和 Dock.To。

![在此处输入图像描述](../Images/de487ff043078fa0ea13de3261dddcb2.png)

如何将两个标尺设置为始终可见，即使我一直滚动到底部。我不能将滚动条放在侧面板之外，因为左标尺需要根据垂直滚动上下移动，而水平标尺需要根据水平滚动左右移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:07:17.120

我能想到的最好的方法是制作一个自定义控件来封装如下行为：

```
public class RulerScrollViewer : ScrollViewer
{
    static RulerScrollViewer()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(RulerScrollViewer), new FrameworkPropertyMetadata(typeof(RulerScrollViewer)));
    }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        this.ScrollChanged -= RulerScrollViewer_ScrollChanged;
        this.ScrollChanged += RulerScrollViewer_ScrollChanged;
    }

    void RulerScrollViewer_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        var h = this.Template.FindName("PART_HorizontalRulerScrollViewer", this) as ScrollViewer;

        if (h != null)
            h.ScrollToHorizontalOffset(this.HorizontalOffset);

        var v = this.Template.FindName("PART_VerticalRulerScrollViewer", this) as ScrollViewer;
        if (v != null)
            v.ScrollToVerticalOffset(this.VerticalOffset);
    }
}

public class HorizontalRuler : Control
{
    protected override void OnRender(DrawingContext drawingContext)
    {
        for (int i = 0; i < this.ActualWidth / 100; i++)
        {
            var ft = new FormattedText(i.ToString(), CultureInfo.CurrentUICulture, FlowDirection.LeftToRight, new Typeface("Tahoma"), 8, Brushes.Black);
            drawingContext.DrawText(ft, new Point(i * 100, 0));
        }
    }
}

public class VerticallRuler : Control
{
    protected override void OnRender(DrawingContext drawingContext)
    {
        for (int i = 0; i < this.ActualHeight / 100; i++)
        {
            var ft = new FormattedText(i.ToString(), CultureInfo.CurrentUICulture, FlowDirection.LeftToRight, new Typeface("Tahoma"), 8, Brushes.Black);
            drawingContext.DrawText(ft, new Point(0, i*100));
        }
    }
} 
```

在 generic.xaml 中使用类似以下内容：

```
<ControlTemplate x:Key="RulerScrollViewer_Template" TargetType="local:RulerScrollViewer">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ScrollViewer x:Name="PART_HorizontalRulerScrollViewer" Grid.Row="0" Grid.Column="1" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden">
            <local:HorizontalRuler Width="{Binding ElementName=content,Path=ExtentWidth}" Height="20" />
        </ScrollViewer>

        <ScrollViewer x:Name="PART_VerticalRulerScrollViewer" Grid.Row="1" Grid.Column="0" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden">
            <local:VerticallRuler Height="{Binding ElementName=content,Path=ExtentHeight}" Width="20" />
        </ScrollViewer>

        <ScrollContentPresenter Name="content" Grid.Row="1" Grid.Column="1" />

        <ScrollBar x:Name="PART_VerticalScrollBar"
                   Grid.Row="1" Grid.Column="2"
                   Value="{TemplateBinding VerticalOffset}"
                   Maximum="{TemplateBinding ScrollableHeight}"
                   ViewportSize="{TemplateBinding ViewportHeight}"
                   Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>

        <ScrollBar x:Name="PART_HorizontalScrollBar"
                   Orientation="Horizontal"
                   Grid.Row="2" Grid.Column="1"
                   Value="{TemplateBinding HorizontalOffset}"
                   Maximum="{TemplateBinding ScrollableWidth}"
                   ViewportSize="{TemplateBinding ViewportWidth}"
                   Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>

    </Grid>
</ControlTemplate>

<Style TargetType="{x:Type local:RulerScrollViewer}">
    <Setter Property="Template" Value="{StaticResource RulerScrollViewer_Template}" />
</Style> 
```

* * *

编辑：

我之所以将其设为自定义控件，是因为我想证明水平标尺的宽度和垂直标尺的高度与可见内容的大小相同。因此，由于可见内容区域比 ScrollViewer 内的滚动条略小，因此我没有得到标尺以与内容略有不同的速率移动的奇怪行为。

# database - 可以通过 DBGrids 更新复杂的查询吗？

> ID：11285240
> 
> 赞同：4
> 
> 时间：2012-07-01T20:02:35.263
> 
> 标签：database, delphi, ms-access

我同时在自学 Delphi 的数据库架构和 [MS-Access] SQL。我了解如何将 Tables 和 DBGrids 连接在一起，享受网格中的更改如何自动编辑、插入、附加、更新、发布等到基础表。

我还了解如何打开或执行 [ADO] 查询并在网格中查看结果数据。

我对通过编辑显示查询结果的 DBGrid 来更改表感到更加困惑。在我的在线搜索中，我发现的所有编辑查询结果的示例似乎都涉及不比“SELECT ... FROM oneTable”更复杂的查询。似乎 DBGrids 仅用于处理单个表或显示查询结果。

就我自己而言，当我尝试处理涉及两个或多个表的查询结果时，我总是会遇到某种错误（键列信息不足、缺少参数或其他消息）。我觉得我缺少一些基本的东西，或者 DBGrids 很少用于编辑除单个表之外的任何内容。你有什么建议可以让我了解我所缺少的吗？最常见的建议链接（例如 delphi.about.com 上的 db 课程）并不能解决问题。

编辑：Remou 的回答帮助我解释了我一直遇到的问题。因此，我将通过仅推广 MS-Access 数据库来稍微编辑我的问题。可以通过其他流行数据库中的 DBGrids 更新复杂的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:30:37.403

我无法回答 Delphi，但在 MS Access 中，如果您希望它们是可更新的，则需要正确构建查询并包括键列。这对于大多数数据库来说很常见，我怀疑问题的原因比与 Dephi 本身有关。

更多信息：

*   [何时可以更新查询中的数据？](http://msdn.microsoft.com/en-us/library/aa198446%28office.10%29.aspx)
*   [为什么我的查询是只读的？](http://allenbrowne.com/ser-61.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:06:19.010

如果您使用`(ADO)DataSet > Provider > ClientDataSet`布局，那么您所要做的就是实现[`Provider.OnGetTabelName`](http://docwiki.embarcadero.com/VCL/2010/en/Provider.TDataSetProvider.OnGetTableName)事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T01:52:34.947

通常我在更新 sql 中使用这个语句： update where field = ;

是的，在我的数据库设计中，每个表都必须有一个主键，这样我才能准确地更新一行。这种组合（带有主键的表 + 更新 sql）多年来对我来说就像一个魅力。实际上直到现在。

最好的尊重伊朗

# javascript - Twitter 引导模式

> ID：11285243
> 
> 赞同：0
> 
> 时间：2012-07-01T20:02:59.697
> 
> 标签：javascript, twitter-bootstrap

模态 javascript 插件工作正常。我有一个关于图书馆本身的问题。

如果您在此链接中注意到

```
http://twitter.github.com/bootstrap/javascript.html#modals
// click on LAUNCH DEMO MODAL 
```

模态从屏幕顶部下降到屏幕的垂直中心。插件中提供了此功能还是我必须自己编写的javascript？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:06:32.267

将`fade`类添加到模态以获得此转换。

你的 html 应该看起来像

```
<div id="myModal" class="modal hide fade">
  <div class="modal-header"></div>
  <div class="modal-body"></div>
  <div class="modal-footer"></div>
</div>

<a data-toggle="modal" href="#myModal" class="btn btn-primary">Launch Modal</a> 
```

[在此处](http://jsfiddle.net/A5y8V/)查看 JsFiddle 的实际操作

从[文档](http://twitter.github.com/bootstrap/javascript.html#modals)中：

> 小心！如果您希望您的模态动画进出，只需将 .fade 类添加到 .modal 元素（请参阅演示以查看此操作）并包含 bootstrap-transition.js。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:08:25.607

根据文档，插件中提供了该功能：

> 如果您希望您的模态动画进出，只需将 .fade 类添加到 .modal 元素（请参阅演示以查看此操作）并包含 bootstrap-transition.js。

# android - 如何使 ViewPager 中的 TextView 垂直滚动

> ID：11285244
> 
> 赞同：1
> 
> 时间：2012-07-01T20:03:14.983
> 
> 标签：android, scroll, android-viewpager

我里面有一个 ViewPager 和一个 TextView。当 TextView 的内容大到在屏幕上可见时，应该有可能垂直滚动它。但它不会自动执行此操作:(

这是**TextView的 xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/txText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#338877"
        android:padding="15dp"
        android:scrollHorizontally="false"
        android:scrollbarAlwaysDrawVerticalTrack="true"
        android:scrollbars="vertical"
        android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

这是**ViewPager的 xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/vpPonkSwiper"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/lbPonkFooter" />

    <TextView
        android:id="@+id/lbPonkFooter"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="Footer" />

</RelativeLayout> 
```

这是一个适配器：

```
public class PonkPageAdapter extends PagerAdapter
{
    private int             pagesCount  = -1;
    private List<Ponk>      data;
    private App             app;
    private MockPersistence db;
    private Activity        activity;
    private TextView        currentView;
    private LayoutInflater  inflater;

    public PonkPageAdapter(Activity activity, byte section) {
        this.activity = activity;
        this.app = ((App) activity.getApplication());
        this.db = app.getPersistence();
        this.section = section;
        this.data = db.findPonksBySection(section); // new LinkedList<Ponk>();
        this.inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //
        this.pagesCount = db.countPonksInSection(section);
    }

    @Override
    public int getCount()
    {
        return pagesCount;
    }

    @Override
    public Object instantiateItem(View collection, int position)
    {
        TextView tv = getNewView();
        Ponk j = data.get(position);
        tv.setText(j.text);
        tv.setTag(j.id);
        setFontSizeInSP(tv, app.getFontSize());
        tv.setTag(position);
        ((ViewPager) collection).addView(tv, 0);

        return tv;
    }

    private TextView getNewView()
    {
        LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
         TextView tv = (TextView)inflater.inflate(R.layout.Ponk, null);
        return tv;
    }

    @Override
    public void setPrimaryItem(ViewGroup container, int position, Object object)
    {
        currentView = (TextView) object;
    }

    @Override
    public void destroyItem(View collection, int position, Object view)
    {
        ((ViewPager) collection).removeView((TextView) view);
    }

    @Override
    public boolean isViewFromObject(View view, Object object)
    {
        return view == (TextView) object;
    }

    @Override
    public Parcelable saveState()
    {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:31:42.490

试着把你`TextView`的`ScrollView`喜欢包裹起来

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android">
    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
... 
```

# c++ - 从不同的功能编辑相同的 QList

> ID：11285248
> 
> 赞同：0
> 
> 时间：2012-07-01T20:03:44.610
> 
> 标签：c++, qt4

我有一个单独的 QList，它存储在一个类中，该类拥有指向另一个类的实例的指针，该类的实例具有一些编辑 QList 的功能。我想要做的是有一个可从 C++ 中的多个类编辑的单个 QList。当我从列表中删除一个元素时，我也希望将它从 classA 中的 myvariable 变量中删除。代码如下

```
class classA {
    ...

private:
    ClassB *myclass;
    QList<mytype> myvariable;
}

class classB {
    classB::classB(QList<mytype> &variable) {
        this->myvariable = variable;
    }

    ...

private:
    QList<mytype> myvariable;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:06:35.350

您非常接近，只需进行一些调整。做`myvariable`一个引用，并在classB的构造函数中初始化它，像这样：

```
class classB 
{
  classB(QList<mytype> &variable) 
   : myvariable(variable)
  {
  }

private:
   QList<mytype>& myvariable;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:19:55.740

您可以引入一个包含静态 qlist 的类 c。然后使它成为类 a 和 b 的公共子类。

编辑：

```
class classC {
protected:
    static QList<mytype> mystatic;
}    

class classA : public classC {
private:
}

class classB : public classC {
    classB::classB(QList<mytype> &variable) {
        mystatic = variable;
    }
} 
```

# vb.net - 在 VB.NET 中以 2 种不同的形式显示相同的列表视图元素

> ID：11285252
> 
> 赞同：-1
> 
> 时间：2012-07-01T20:04:21.613
> 
> 标签：vb.net, listview

我在 Form1 的 VB.Net 应用程序中有 2 个表单 我有一个 Listview 元素 我想在 Form2 中显示相同的 Listview 但大小不同 最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:27:54.060

不，没有将一个控件的内容复制到另一个控件的内置方法`ListView`。相反，您应该重组代码，以便业务逻辑与 UI 分离。从 API 获取数据的逻辑和`ListView`用该数据填充控件的逻辑都应该在一个单独的公共类中，任何形式都可以使用。为此，您需要将数据以某种数据结构存储在内存中，以便在表单、类和方法之间轻松传递。例如，如果列表中的每个项目都可以表示为一个`Atom`类，我建议使用一个`List(Of Atom)`对象来保存数据。例如，您的公共类可能是这样的：

```
Public Class ShoppingBusiness
    Public Function GetData() As List(Of Atom)
        ' Get data from API and return it as a List(Of Atom) object
    End Function        

    Public Sub LoadList(atoms As List(Of Atom), list As ListView)
        ' Load the ListView control with the data
    End Sub
End Class 
```

一旦业务逻辑被分解成它自己的类，您就可以轻松地从任何形式访问所有逻辑，而无需复制所有代码。但是，在本例中，调用不是两种形式，`ShoppingBusiness.GetData`因为这可能是一个缓慢的方法，您只需要执行一次，然后使用相同的数据来填充两个`ListView`控件。例如，如果`Form1`显示`Form2`，它可以这样做：

```
Public Class Form1
    Private _data As List(Of Atom)
    Private _business As ShoppingBusiness = New ShoppingBusiness()

    Private Sub refreshList()
        _data = _business.GetData()
        _business.LoadList(_data, ListView1)
    End Sub

    Private Sub showForm2()
        Dim form2 As Form2 = New Form2()
        form2.Data = _data
        form2.Show()
    End Sub
End Class

Public Class Form2
    Private _data As List(Of Atom)
    Private _business As ShoppingBusiness = New ShoppingBusiness()

    Public Property Data() As List(Of Atom)
        Get
            Return _data
        End Get
        Set(ByVal value As List(Of Atom))
            _data = value
        End Set
    End Property

    Private Sub refreshList()
        _business.LoadList(_data, ListView2)
    End Sub
End Class 
```

As you can see in this example, Form1 will keep a copy of the data in memory after it gets it. It keeps the data in it's private `_data` field. When it creates a new `Form2` object, before it shows it, it gives it a reference to the data that it already has in memory. Then, `Form2` can use the same `LoadList` method to load the data into the list, but it doesn't have to get the data from the API again because the data was given to it by `Form1`.

# iphone - 在可变数组中插入自动生成的 UIView 对象

> ID：11285255
> 
> 赞同：0
> 
> 时间：2012-07-01T20:04:40.567
> 
> 标签：iphone, uiview, nsmutablearray

一世

我编写了一个自动生成 6 个 UIView 对象的函数（通过迭代），然后我尝试将每个对象插入到 NSMutableArray 中，但是当我运行它时，它会因警告而停止（没有对错误的引用）。

我不知道我的逻辑步骤中有什么不符合的。

这是我的代码。

```
-(void)initierScrollView
{
    int i;
    for (i=0; i<6; i++) {

        UIImage *image = [UIImage imageNamed:@"back.png"];
        UIImageView *bouton = [[UIImageView alloc] initWithImage:image];
        [bouton setTag:i];
        classementBoutons = [[NSMutableArray alloc] initWithCapacity:40];
        [bouton setFrame:CGRectMake(10+62*i,10,62,55)];
        [classementBoutons insertObject:bouton atIndex:i];
        bouton.userInteractionEnabled = YES;

        UIPanGestureRecognizer *recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];
        recognizer.delegate = self; 
        [bouton addGestureRecognizer:recognizer];

       // NSLog(@"%@", classementBoutons.description);

        [self addSubview:bouton];
}
} 
```

谢谢您的反馈

胜利者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:25:42.387

您在每次循环迭代时创建新的 NSMutableArray。尝试在循环之前只创建一次。

# android - CountDownTimer 的 onTick 中的 getView() 有时返回 null

> ID：11285257
> 
> 赞同：0
> 
> 时间：2012-07-01T20:04:48.010
> 
> 标签：android, android-fragments, android-view

我最近收到了一份崩溃报告，其中我可以看到在 CountDownTimer 的 onTick 方法中，getView() 调用返回 null。我使用 onTick 方法在 textView 中显示剩余时间。textView 位于片段内。

由于 CountDownTimer 在 UI 线程中运行，我不知道为什么会发生这种情况。

可能是什么原因导致此问题以及此问题的可能解决方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:48:46.827

我就是这样做的。在我自己的计数器类中扩展了 CountDownTimer，其中包含 TextView。

```
public class myCounter extends CountDownTimer
{
    TextView counter;

    public myCounter(final long millisInFuture, final long countDownInterval,
                    final TextView newCounter)
    {
        super(millisInFuture, countDownInterval);
        counter = newCounter;
        counter.setText("Left: " + millisInFuture);
    }

    @Override
    public void onFinish()
    {
        counter.setText("GO!");
    }

    @Override
    public void onTick(final long millisUntilFinished)
    {
        counter.setText("Left: " + millisUntilFinished / 1000);
    }
} 
```

然后在我的活动中：

```
public class CountdownViewActivity extends Activity
{

    @Override
    public void onCreate(final Bundle savedInstanceState)
    {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.countdownview);

            final Button startBtn = (Button) findViewById(R.id.startButton);

            //Send total time in milliseconds, the interval to display at, and the TextView from your xml it should display in
            final myCounter countdown = new myCounter(timeInSeconds * 1000, 1000, (TextView) findViewById(R.id.textView4));
            startBtn.setOnClickListener(startClick(countdown));
//MoreStuff
    }

    private OnClickListener startClick(final myCounter countdown)
    {
        return new OnClickListener()
        {
            @Override
            public void onClick(final View v)
            {
                countdown.start();
            }
        };
    }
} 
```

# asp.net - 如何使用 ASP.NET 为单个浏览器维护单个会话？

> ID：11285258
> 
> 赞同：0
> 
> 时间：2012-07-01T20:04:50.163
> 
> 标签：asp.net, visual-studio-2010, session, session-state

我才刚刚开始在 ASP.NET 中制作 Web 应用程序，而且我正在玩弄全局应用程序 CLass，我注意到的是，其中的 Session_Start 方法为每个独特的浏览器窗口调用。也就是说，当我在两个不同的 Internet Explorer 窗口中打开网页时，它会执行两次。

这不理想吧？我的意思是，如果我要开发一个实时应用程序，我不希望这种情况发生，对吧？就像，当我对 Gmail.com 做同样的事情时 - 如果我登录到一个 Internet Explorer 窗口，然后在另一个窗口上打开 Gmail，我会保持登录状态。这是因为会话，对吗？

无论哪种情况，有什么方法可以使用会话来实现我刚才所说的吗？

# android - 重新启动android应用程序时获取对象状态

> ID：11285259
> 
> 赞同：1
> 
> 时间：2012-07-01T20:04:53.743
> 
> 标签：android, multithreading, service, android-asynctask

我正在编写一个 android 应用程序，它实例化一个工作线程以每秒更新 UI。

当我按下“主页”按钮时，线程仍在运行，当我从家里重新启动应用程序时，一切正常：用户界面仍在每秒更新。

但是，当我按下“返回”按钮，然后从家里重新启动应用程序时，应用程序没有获得从工作线程发送的 UI 更新。

我该怎么做才能再次获得此线程参考？

我需要做一个像计时器一样工作的应用程序。如果用户没有停止就离开应用程序，则工作必须继续。线程是一个不错的选择吗？我可以使用 AsyncTask 或 Service 解决这个问题吗？

注意：按下“返回”按钮，执行 onDestroy() 方法。当我按下“主页”按钮时，不会执行 onDestroy()。

（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:19:44.940

您应该需要一个布尔变量来处理来自后台线程的 UI 更新。通过此变量，您可以在应用程序出现故障并通过按返回和 Home 键暂停时控制线程。将您的代码更改为：

```
boolean threadstatus=false;
@Override
         public void run(){
          try
          {

           while(threadstatus)
           {
             ///your code...
           }
         }
protected void onResume() {
        super.onResume();
        threadstatus=true;
    }
    @Override
    protected void onPause() {
        super.onPause();
       threadstatus=false;
    }
    @Override
    protected void onStop() {
        super.onStop();
        threadstatus=false;
    }
    @Override
    protected void onDestroy() {
        super.onDestroy();
        threadstatus=false;
    } 
```

# javascript - 如何在标记之间获取代码

> ID：11285266
> 
> 赞同：0
> 
> 时间：2012-07-01T20:06:42.737
> 
> 标签：javascript, jquery, html, css

我从文件加载模板。我的模板结构：

```
[[style]].someclass{padding:10px 15px}[[/style]]
[[code]]<tr><td class="someclass">{{text}}</td></tr>[[/code]] 
```

我在“模板”变量中通过 .get() 加载模板：

```
$.get('template.html', function(template) {
 if (template) {
   //cut css styles from [[style]]..[[/style]] etc.
 }
}); 
```

我如何在这些标记之间获取内容？

我只需要将块的内容 ([[style]]..[[/style]], [[code]]..[/code]]) 分配相关变量，如 var style = ..., var代码 = ... :)

PS我想我理解表达......我为我的英语道歉:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:28:22.337

`[[code]]`并且`[[style]]`不是标准的标记语言标签。它们不会被解释为 DOM 元素，因此您不能简单地使用简单的 jQuery 方法来解析它们。

以下是使用正则表达式的方法，将每个代码和样式块的内容存储在一个数组中：

```
$.get('template.html', function (template) {
    var codeReg = /\[\[code]]([\s\S]*?)\[\[\/code]]/g,
        styleReg = /\[\[style]]([\s\S]*?)\[\[\/style]]/g,
        codes = [],
        styles = [],
        item;
    while (item = codeReg.exec(template))
        codes.push(item[1]);
    while (item = styleReg.exec(template))
        styles.push(item[1]);
    console.log(codes);
    console.log(styles);
}); 
```

[**实时示例**](http://jsfiddle.net/ult_combo/wVTcm/5/)（我使用`$.post`示例作为 JSFiddle 不支持`$.get`它们的`/echo/html/`实用程序。）

*有趣的话题：*

[正则表达式参考](http://regular-expressions.info/)

[将 JS 正则表达式捕获组存储在数组中的最佳方法？](https://stackoverflow.com/q/10876338/1331430)

**编辑：**我用匹配所有空格（包括新行）和非空格字符（即所有字符）`.`的`(.*?)`字符类交换了 match-almost-any-character 元字符。[参考](https://stackoverflow.com/a/6567738/1331430)`[\s\S]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:28:29.873

**HTML**

要更改和获取内部 html，您可以轻松使用 jQuery：

[jQuery HTML 函数](http://api.jquery.com/html/)

为了成功，您需要使用 jQuery 选择器：

[jQuery 选择器](http://api.jquery.com/category/selectors/)

具体选择器（仅举几例）：

[类选择器](http://api.jquery.com/class-selector/)

[元素选择器](http://api.jquery.com/element-selector/)

**CSS**

对于更改 CSS（将在您的`<style>`标签之间），您还可以使用 jQuery。使用上面提到的选择器，以下内容会派上用场：

[各种 jQuery CSS 函数](http://api.jquery.com/category/css/)

[jQuery CSS 函数](http://api.jquery.com/css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T20:37:07.213

更改代码标签的 html 值：

```
$("code").html("*whatever you want*"); 
```

更改元素的 css 属性，可以通过 id 选择（通过在选择字符串前加上“#”），或者可以通过类选择（通过在选择字符串前加上“.”），或者可以通过元素的类型（您的字符串将是标签名称，即“body”、“code”、“div”）。您应该这样做，而不是尝试更改样式标签的 html 值：

```
$("*anelement*").css({*cssproperty*: *cssvalue*, *cssproperty*: *cssvalue*});
$(".*classofanelement*").css({*cssproperty*: *cssvalue*, *cssproperty*: *cssvalue*});
$("#*idofanelement*").css({*cssproperty*: *cssvalue*, *cssproperty*: *cssvalue*}); 
```

.. 星号 (*) 包含的任何内容都可以更改

如果您在评论中有任何问题，请随时提出问题

# javascript - Javascript 二进制文件到服务器

> ID：11285267
> 
> 赞同：1
> 
> 时间：2012-07-01T20:06:53.977
> 
> 标签：javascript, ajax, node.js

我试图弄清楚什么是高度可扩展的解决方案（服务于 10000+ 的多个用户）。

目标：我想要实现的是将鼠标坐标流写入二进制文件到服务器，即一旦流关闭，服务器直接从用户交互保存到服务器。坐标应每 20 毫秒（约 50 fps）推送一次，以创建鼠标移动的紧密表示。

a) 我知道 nodeJS 可用于写入流，但我不确定这样的结构是否可以处理如此高的更新频率 - 如果这是由多个用户完成的，这种方法可能会失败。

b）另一种可能性是将文件本地写入二进制文件，然后将其上传到服务器。

任何人都可以评论这些方法的功能以及是否可以使用另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:44:47.647

根据您关于服务器不需要实时数据的评论，您绝对不应该每 20 毫秒向服务器发送一次数据。将其保存在客户端并以块的形式发送，例如每 30 或 60 秒一次。这可以在数组的内存中完成。保存鼠标坐标不是很密集。

一旦你准备好发送它，我认为你会发现`XMLHttpRequest`速度足够快，足以满足你的需要。

这个演示展示了如何捕捉到坐标并显示 50fps 是可行的（我在 OS X 上的 Chrome 中达到了 60fps）。

演示：http: [//jsfiddle.net/ThinkingStiff/2Ls3A/](http://jsfiddle.net/ThinkingStiff/2Ls3A/)

```
var coordinates = [],
    count = 0,
    SECONDS = 1000,
    INTERVAL = 5; 

window.onmousemove = function ( event ) {

    //move cursor over page for at least 10 secs for an accurate reading
    coordinates.push( [event.pageX, event.pageY] );

};

window.setInterval( function () {

    console.log( ( coordinates.length - count ) / INTERVAL + 'fps' );
    count = coordinates.length;

}, INTERVAL * SECONDS ); 
```

如果您真的认为在发送数据方面需要更高的效率，那么通过 Internet 连接客户端和服务器计算机的最低延迟方法是持久 TCP 套接字。这在 HTML 中通过`WebSocket API`.

`ws:`例如，几乎每种服务器端语言都有一些库使用URL 模式（`wss:`为了安全）来处理端点`socket.io`。

### 客户：

```
var socket = new WebSocket('ws://example.com/endpoint' );

socket.onopen = function () {

    socket.send( 'send some text' );

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:42:22.617

我认为更好的解决方案是将点存储到一个数组中，然后转身将其发送到服务器。

此时您需要启动一个新对象并让它获得新的更新，当您进入发送到服务器的函数时，这样，在您准备和发送数据并获得响应期间，你仍然可以收集数据。

但是，您可能不会获得 50fps，但您可以在不同的浏览器上进行测试，看看预期的帧速率是合理的。

# ruby-on-rails - 为什么同时拥有用户模型和配置文件模型？

> ID：11285268
> 
> 赞同：1
> 
> 时间：2012-07-01T20:07:01.487
> 
> 标签：ruby-on-rails, model

我在 SO 和网络上看到了很多参考资料，人们在其中使用用户和配置文件模型的应用程序（特别是，但并非总是如此，当他们使用设计 gem 时）。我见过的所有例子都是 has_one 关系。为什么不把所有的 Profile 信息都放在 User 模型中呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:30:45.997

用户表用于每个操作。但很多时候，个人资料信息不是。

因此，如果您计划添加几乎将在每个请求中使用的信息（例如 first_name、last_name），请将它们放在 users 表中。

但是没有理由说，年龄，国家，州等。它们会在以后引起性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:18:49.530

这在很大程度上取决于您的目标是什么。如果您只想拥有一个个人资料页面 - 与用户个人资料关联的单个视图 - 我通常会做的是`Users#show`个人资料页面。这可能是最常见的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T22:38:11.093

我认为主要是因为每个人都使用设计 gem 来制作/处理用户，而且制作新的 Profile 模型比配置设计更容易。

# ruby-on-rails - 需要一种策略来“关闭”论坛的主题功能

> ID：11285274
> 
> 赞同：0
> 
> 时间：2012-07-01T20:08:40.637
> 
> 标签：ruby-on-rails

我正在创建一个论坛软件。我想实现*关闭*主题功能。关闭主题将阻止任何人为已关闭的主题创建帖子。

**我目前的实现**

*   TOPIC有很多帖子
*   创建 TOPIC 时，默认情况下，还会为该 TOPIC 创建一个 POST。基本上 TOPIC 有一个`title`并从 POST 中派生出内容主体`content`。

```
class AddClosedToTopic < ActiveRecord::Migration
  def change
    add_column :topics, :closed, :boolean, default: false
  end
end 
```

*   TOPIC 有一个名为 的列`closed`。如果`closed`为真，则主题关闭。默认情况下，它设置为 false。
*   每当用户尝试创建帖子时，我都会使用下面的验证来检查主题是否已关闭。

```
class Post < ActiveRecord::Base
  . . .
  validate :cannot_create_replies_to_closed_topic

  # custom validation methods
  def cannot_create_replies_to_closed_topic
    topic = Topic.find_by_id(topic_id)
    if topic.closed?
      errors.add(:content, "can't be created for a topic that is closed")
    end
  end
end 
```

**问题**

这种方式对于在创建后一段时间内关闭的 TOPIC 非常有效。但是，当我创建一个新 TOPIC 时，它就会出现问题。

因为在 POST 验证中，我这样做`topic = Topic.find_by_id(topic_id)`了，当前正在创建的新主题不会在数据库中。所以它抛出 NoMethodError。

```
NoMethodError in TopicsController#create
undefined method `closed?' for nil:NilClass

app/models/post.rb:16:in `cannot_create_replies_to_closed_topic'
app/controllers/topics_controller.rb:21:in `create' 
```

**可能的解决方案？**

我想我有一些方法可以引用在 POST 验证中以某种方式创建的当前主题，我认为这个问题可以解决。

我怎样才能做到这一点？或者你们有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:29:59.113

您可以`after_create`在主题模型中尝试类似回调的方法，以便仅在创建主题后创建帖子，并在该方法中设置 topic_id。

像这样的东西：

```
 after_create :create_initial_post

 def create_initial_post
   post = Post.new(:topic_id => self.id)
   post.save
 end 
```

这应该可以解决您的问题。您可能必须修改一些代码以确保它首先创建主题，然后它应该在此之后创建初始帖子。您可能还想修改您的`cannot_create_replies_to_closed_topic`方法以确保可以创建初始帖子。

希望这会为您指明正确的方向！

# arrays - Perl - 比较停机时间

> ID：11285277
> 
> 赞同：1
> 
> 时间：2012-07-01T20:09:08.513
> 
> 标签：arrays, perl

想知道是否有人处理过此类问题并可以提供任何建议：

我正在解析一个日志文件以查看主机是否/何时出现故障以及它们的总停机时间是多少。我的问题是我不确定如何确定主机是否在另一台倒下的主机的时间范围内（我不想计算两次）

例子：

主机A在14:15-14:18下降

主机B在14:16-14:21下降

主机C在14:17-14:20下降

这将导致

Host A 造成 3 分钟宕机

主持人B 3分钟

主机 C 为 0（其他主机当时已经关闭）

现在，我正在推动一个数组 upTime:downTime - 我认为一个数组将是最容易遍历和比较的。虽然不确定解决这个问题的最佳方法是什么..

```
 push(@arr, "$tempdown:$upTime"); 
        }
    }
}   
}

#temp vars x and y rep downtime and uptime
#count from x..y and see if any other service has fallen within x-y
for my $index (@arr) {
my $tempx;
my $tempy;
if ($index=~/(.*):/ && /($index=~(.*:(.*)/) {
    $tempx = $1;
    $tempy = $2;
}
for ($tempx..$tempy) {
.
.
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:36:20.113

在我看来，您希望将数据组织为：

*   T [s——]一段停机时间的开始时间。
*   T [e] — 一段停机时间的结束时间。
*   H [t] — 主机“负责”一段停机时间。

您将能够按 T [s]的顺序对停机时间段进行排序。您将需要一种机制来解决两台（或更多）机器同时启动一段停机时间的关系（根据记录时间的分辨率）。再往下，我建议二级键是 latest T [e]，然后三级键是主机名的字母。

[然后，您可以按 T s]逐步浏览停机时间段的有序列表。

对于每个停机时间段：

*   H [t]在它停机的整个过程中都受到了责备。
*   [对于在 T e]之前开始的每个停机时间段：
    *   从另一台主机的停机时间中减去周期 T [s] .. T [e 。]
*   为下一次迭代重新排序数据。

给定您的样本数据，我们得到：

*   T [s] = 14:15，T [e] = 14:18，H [t] = A
*   T [s] = 14:16，T [e] = 14:21，H [t] = B
*   T [s] = 14:17，T [e] = 14:20，H [t] = C

这是正确的排序顺序。我们将假设同时停机的主机按字母顺序排序。

算法选择 A：

*   主持人 A 被指责为 14:15-14:18（3 分钟）。

调整其他主机的时段：

*   T [s] = 14:18，T [e] = 14:21，H [t] = B
*   T [s] = 14:18，T [e] = 14:20，H [t] = C

该算法现在选择 B

*   主持人 B 被指责为 14:18-14:21（3 分钟）。

其他主机的周期被调整，主机C的记录被擦除，因为它剩下的时间完全被主机B的停机时间覆盖了。

您可以看到决胜局排序非常重要；在第二次迭代中，系统 B 和 C 都停机了，一旦 A 恢复，必须有一种方法来确定哪个是停机时间。您很可能会决定其中一个标准是“最初哪个主机首先宕机”，因此您保留 T [d]的记录，即服务器首次宕机的时间。这在算法期间不会改变，但 T [s]会随着算法的进行而调整。您可能还决定订购的一部分是“最新的 T [e]' 这样在任何给定时间停机时间最长的机器都会在停机时为停机负责，而之前停机的系统仍然没有停机。这意味着如果 A 也从 14:19-14:30 下降，它不会因 14:18-14:21 而受到指责，但会因 14:21-14:30 而受到指责。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:02:31.253

当只有小时：分钟而不是像 YYYY-MM-DD HH:MM 这样的时间时，代码很棘手。这在当时可以被毫不含糊地解析。如果您可以更改记录器输出以提供完全限定的日期，那么您的工作会变得更加简单。下面的代码可以做到这一点。（**免责声明：**开始时间必须按时间顺序排列**，否则**有必要先对它们进行排序）。

（注意：对于此数据，我将时间分隔符从“-”更改为“\t”）

```
#!/usr/bin/perl
use strict;
use warnings;
use DateTime::Format::Strptime;

my $re = '(\S{10}\s\S{5})\t(\S{10}\s\S{5})$';
my $max;
my $parser = DateTime::Format::Strptime->new(pattern => '%F %H:%M');

while (<DATA>) {
    chomp;
    my ($start, $stop) = /$re/ or die $!;

    $_ = $parser->parse_datetime($_) for $start, $stop;

    # one time initialization of $max for first record
    $max //= $start;

    # when there are breaks in the continuity
    $max = $start if $max < $start;

    my $minutes = $stop <= $max ? 0 : $max->delta_ms($stop)->in_units('minutes');

    printf "$_ %2d minutes\n", $minutes;
    $max = $stop if $max < $stop; # stop is the new max if stop > max
}

__DATA__
Host A fails at 2012-07-03 14:15    2012-07-03 14:18
Host B fails at 2012-07-03 14:16    2012-07-03 14:21
Host C fails at 2012-07-03 14:17    2012-07-03 14:20
Host D fails at 2012-07-03 23:57    2012-07-04 00:05
Host E fails at 2012-07-03 23:58    2012-07-04 00:07
Host F fails at 2012-07-04 00:00    2012-07-04 00:08
Host G fails at 2012-07-04 00:01    2012-07-04 00:09
Host H fails at 2012-07-04 00:02    2012-07-04 00:08
Host I fails at 2012-07-04 14:17    2012-07-04 14:20
Host J fails at 2012-07-04 23:57    2012-07-04 23:59
Host K fails at 2012-07-05 00:00    2012-07-05 00:10
Host L fails at 2012-07-05 00:02    2012-07-05 00:09
Host M fails at 2012-07-05 00:02    2012-07-05 00:11
Host N fails at 2012-07-05 00:02    2012-07-05 00:10 
```

它产生了以下输出：

```
Host A fails at 2012-07-03 14:15        2012-07-03 14:18  3 minutes
Host B fails at 2012-07-03 14:16        2012-07-03 14:21  3 minutes
Host C fails at 2012-07-03 14:17        2012-07-03 14:20  0 minutes
Host D fails at 2012-07-03 23:57        2012-07-04 00:05  8 minutes
Host E fails at 2012-07-03 23:58        2012-07-04 00:07  2 minutes
Host F fails at 2012-07-04 00:00        2012-07-04 00:08  1 minutes
Host G fails at 2012-07-04 00:01        2012-07-04 00:09  1 minutes
Host H fails at 2012-07-04 00:02        2012-07-04 00:08  0 minutes
Host I fails at 2012-07-04 14:17        2012-07-04 14:20  3 minutes
Host J fails at 2012-07-04 23:57        2012-07-04 23:59  2 minutes
Host K fails at 2012-07-05 00:00        2012-07-05 00:10 10 minutes
Host L fails at 2012-07-05 00:02        2012-07-05 00:09  0 minutes
Host M fails at 2012-07-05 00:02        2012-07-05 00:11  1 minutes
Host N fails at 2012-07-05 00:02        2012-07-05 00:10  0 minutes 
```

希望这有帮助，

克里斯

# apache - Htaccess 根据语言重写 Joomla 中的顶级域

> ID：11285279
> 
> 赞同：0
> 
> 时间：2012-07-01T20:09:34.320
> 
> 标签：apache, .htaccess, joomla, cross-domain, joomfish

我有一个带有 joomla 的 mysite.it，该站点位于 /home 子目录中，在根目录 / 中有一个 htaccess，`RewriteRule ^(.*)$ /home/$1 [L] RewriteRule ^(/)?$ home/index.php [L]`因此 /home 被隐藏了。我还为辅助（英语）语言安装了 joomfish，modrewrite on 并且没有友好的 url。我还购买了第二个 mysite.us，它现在只是重定向到英语 joomsifh 管理的语言。SO ;) 我想做的事情，如果可能的话，有点像：如果检测到的语言是英语，用 mysite.us 重写 mysite.it （请不要触摸 joomlish ulr ;)）

明白了吗？来自任何 htaccess 大师的任何想法？:-)

ps 我在我自己的 linux vps 服务器和 joomla 1.5.26

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:19:20.400

尝试这个 ：

`

```
# If prefered language contains english ...
RewriteCond %{HTTP:Accept-Language} en
# and if accessing .it domain
RewriteCond %{SERVER_NAME} .*it$
RewriteRule /(.*) http://mysite.us/$1 [R,L] 
```

`

# css - GWT如何在图像资源上添加css样式

> ID：11285283
> 
> 赞同：1
> 
> 时间：2012-07-01T20:10:21.703
> 
> 标签：css, image, gwt, styles, clientresource

我正在使用 GWT。我有一个图像资源对象。例如，

```
 ImageResource image = ClientResources.of().images().icon(); 
```

如何在此图像上添加一些 CSS 样式。因为这是 ImageResource，而不是 Image 对象，所以我不能使用 image.addStyleName()。我没有使用 ui-binder。那么我怎么能做到这一点呢？

因为我是 GWT 的新手，如果您回答可以提供一些代码，那将更加清晰和真正感激。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:10:20.610

你是如何显示图像的？您不能`ImageResource`直接对 a 执行 CSS 操作，但也不能直接显示它。您必须将其粘贴在`Image`、`ImageResourceCell`或其他对象中，所有这些对象*都*可以设置样式。所以你想要设置渲染器的样式，而不是它`ImageResource`本身。

例如：

```
ImageResource imageResource = ClientResources.of().images().icon();
Image image = new Image(imageResource);
image.addStyleName("someCoolStyle"); 
```

# blackberry - 黑莓应用程序中的这个滚动选项卡控件是什么？

> ID：11285285
> 
> 赞同：2
> 
> 时间：2012-07-01T20:10:53.680
> 
> 标签：blackberry, tabs, scroll, scrollbar

我想在我的 Blackberry 应用程序中创建可滚动的选项卡。
我发现了一个用于黑莓主屏幕和许多其他 BB 应用程序的控件

![在此处输入图像描述](../Images/39e0c3cf2cb1d3da420e4d5084d6df84.png)

它有许多选项卡（所有、收藏夹等）；在选项卡之间滚动很容易，并且下一个和上一个选项卡对用户来说足够清晰。我还发现一些应用程序像这样使用它：

![在此处输入图像描述](../Images/bcd28c76dc2a6ad9f4425a95b4ff14fc.png)
这个控制器/管理器是什么，它包含：Skydrive、本地、...等？
哪个类从 SDK 中使用，哪个 SDK 版本用于实现它？
**你有什么主意吗 ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:45:35.647

[PaneView](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/component/pane/PaneView.html)是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:54:20.280

您可以使用最新的 Java SDK for BB 7 来构建您正在寻找的东西。如果你下载最新的SDK，你会在下面找到很多示例代码：

> plugins\net.rim.ejde.componentpack7.0.0_7.0.0.28\components\samples\com\rim\samples

# recursion - F#中的递归函数与递归变量

> ID：11285286
> 
> 赞同：4
> 
> 时间：2012-07-01T20:11:03.013
> 
> 标签：recursion, f#

第一种方法是可以的。第二个不断重复相同的数字对。

这对我来说很模糊为什么......你能指出好的方向吗？

```
module Normal = 
   let rnd = new MersenneTwister()
   let sampleNormal = 
      fun () -> let rec randomNormal() = let u1, u2 = rnd.NextDouble(),rnd.NextDouble()
                                         let r, theta= sqrt (-2\. * (log u1)), 2\. * System.Math.PI * u2  
                                         seq { yield r * sin theta; yield r * cos theta ; printfn "next";yield! randomNormal() }
                randomNormal()

   let sampleNormalBAD = 
      fun () -> let rec randomNormal = let u1, u2 = rnd.NextDouble(),rnd.NextDouble()
                                       let r, theta= sqrt (-2\. * (log u1)), 2\. * System.Math.PI * u2  
                                       seq { yield r * sin theta; yield r * cos theta ; printfn "next";yield! randomNormal }
                randomNormal

Normal.sampleNormal() |> Seq.take(10) |>Seq.toArray
Normal.sampleNormalBAD() |> Seq.take(10) |>Seq.toArray 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T20:32:16.290

在第一个示例`randomNormal()`中是一个函数，它接受`()`并返回一个值，每次都会对其进行评估。在第二个`randomNormal`是一个值，所以它不会被评估两次，一旦有界它将保持相同的值。

如果您翻转`randomNormal()`签名是：

```
unit->seq<float> 
```

而 for`randomNormal`只是：

```
seq<float> 
```

更新：它继续打印，因为它`printfn`在序列内，这是有界值。如果您尝试在最后一行之前的正文中打印，您会看到不同之处。这是一个简化的示例代码：

```
let sampleNormal = 
    fun () -> 
        let rec randomNormal() = 
            let u1, u2 = 1,2
            printfn "Evaluating"
            seq { yield u1; yield u2 ; printfn "next";yield! randomNormal() }
        randomNormal()

let sampleNormalBAD = 
    fun () -> 
        let rec randomNormal = 
            let u1, u2 = 1,2 
            printfn "Evaluating"
            seq { yield u1; yield u2 ; printfn "next";yield! randomNormal }
        randomNormal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:08:36.190

完成 Gustavo 的答案，`randomNormal`是一个值，在被解释器计算后，绑定到一个序列。

进一步调用`randomNormal`将产生这个序列，并且在序列之前使用的绑定没有理由被评估。t、theta 等.. 将始终具有相同的值。序列***内***的内容将被评估，因此打印。

在 `randomNormal()`同样的情况下，但会评估绑定，因为函数可能依赖于副作用。

# android - Android MediaStore 获得不同的音乐文件文件夹

> ID：11285288
> 
> 赞同：5
> 
> 时间：2012-07-01T20:11:25.603
> 
> 标签：android, sql, sqlite

寻找仅从 Android MediaStore 获取音乐文件的文件夹路径以获取输入目录路径的方法。所以实际上的问题是关于如何对 MediaStore 进行正确的查询。

这是一个例子。我当前的代码：

```
String dirPath="/mnt/sdcard/Music/";
    String selection =MediaStore.Audio.Media.DATA +" like ?";
    String[] projection = {MediaStore.Audio.Media.DATA};    
    String[] selectionArgs={dirPath+"%"};
    Cursor cursor = this.managedQuery(
        MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
        projection,
        selection,
        selectionArgs,
        null);
    List<String> songs = new ArrayList<String>();
    while(cursor.moveToNext())
        songs.add(cursor.getString(0)); 
```

结果，我们将在`songs`List smth 中拥有：

```
/mnt/sdcard/Music/song1.mp3
/mnt/sdcard/Music/song2.mp3
/mnt/sdcard/Music/FolderWithSongs/song3.mp3
/mnt/sdcard/Music/AnotherFolderWithSongs/song4.mp3
/mnt/sdcard/Music/AndOneMoreFolder/song5.mp3
/mnt/sdcard/Music/AndOneMoreFolder/song6.mp3
/mnt/sdcard/Music/AndOneMoreFolder/song7.mp3
/mnt/sdcard/Music/AndOneMoreFolder/SomeFolder/song8.mp3
/mnt/sdcard/Music/AndOneMoreFolder/SomeFolder/song9.mp3 
```

我实际上在寻找什么 - 从这样的 DISTINCT 一级嵌套路径列表中获取`dirPath`：

```
/mnt/sdcard/Music/FolderWithSongs/ 
/mnt/sdcard/Music/AnotherFolderWithSongs/ 
/mnt/sdcard/Music/AndOneMoreFolder/ 
```

如果这里是当前文件夹文件 -`/mnt/sdcard/Music/song1.mp3`并且 `/mnt/sdcard/Music/song2.mp3`- 这也是可以接受的。

有任何想法吗？

**编辑** 我找到了两种可能的解决方案： [Android 按文件夹列出音乐并播放它们](https://stackoverflow.com/questions/10894576/android-list-music-by-folders-and-play-them) 并[从字符串路径列表构造树结构](https://stackoverflow.com/questions/1005551/construct-a-tree-structure-from-list-of-string-paths) ，但我认为解决这个问题的更好方法是可能的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-12T09:27:59.367

您将不得不同时使用这两种技术。MediaStore 和文件资源管理器。

```
public class MainActivity extends ActionBarActivity {
private File file;
private List<String> myList;
private ListView listView;
private TextView pathTextView;
private String mediapath = new String(Environment.getExternalStorageDirectory().getAbsolutePath());

private final static String[] acceptedExtensions= {"mp3", "mp2",    "wav", "flac", "ogg", "au" , "snd", "mid", "midi", "kar"
    , "mga", "aif", "aiff", "aifc", "m3u", "oga", "spx"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    listView=(ListView) findViewById(R.id.pathlist);
    pathTextView=(TextView) findViewById(R.id.path);

    myList = new ArrayList<String>();   

    String root_sd = Environment.getExternalStorageDirectory().toString();
    Log.e("Root",root_sd);

    String state = Environment.getExternalStorageState();
    File list[] = null ;
    /* if ( Environment.MEDIA_MOUNTED.equals(state) || Environment.MEDIA_MOUNTED_READ_ONLY.equals(state) ) {  // we can read the External Storage...
        list=getAllFilesOfDir(Environment.getExternalStorageDirectory());
    }*/

    pathTextView.setText(root_sd);

    file = new File( root_sd ) ;       
    list = file.listFiles(new AudioFilter());
    Log.e("Size of list ","" +list.length);
    //LoadDirectory(root_sd);

    for( int i=0; i< list.length; i++)
    {

        String name=list[i].getName();
    int count =     getAudioFileCount(list[i].getAbsolutePath());
   Log.e("Count : "+count, list[i].getAbsolutePath());
   if(count!=0)
   myList.add(name);
        /*int count=getAllFilesOfDir(list[i]);
        Log.e("Songs count ",""+count);

        */  

    }

    listView.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, myList ));

    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
            File temp_file = new File( file, myList.get( position ) );  

            if( !temp_file.isFile())        
            {
                //LoadDirectory(myList.get( position ));

                file = new File( file, myList.get( position ));
                File list[] = file.listFiles(new AudioFilter());

                myList.clear();

                for( int i=0; i< list.length; i++)
                {
                    String name=list[i].getName();

                    int count =     getAudioFileCount(list[i].getAbsolutePath());
                       Log.e("Count : "+count, list[i].getAbsolutePath());
                       if(count!=0)
                      myList.add(name);
                    /*int count=getAllFilesOfDir(list[i]);
                    Log.e("Songs count ",""+count);
                    if(count!=0)
                        myList.add(name);*/
                }

                pathTextView.setText( file.toString());
                //Toast.makeText(getApplicationContext(), file.toString(), Toast.LENGTH_LONG).show(); 
                listView.setAdapter(new ArrayAdapter<String>(MainActivity.this, android.R.layout.simple_list_item_1, myList ));

            }

        }
    });

}

private int getAudioFileCount(String dirPath) {

        String selection =MediaStore.Audio.Media.DATA +" like ?";
        String[] projection = {MediaStore.Audio.Media.DATA};    
        String[] selectionArgs={dirPath+"%"};
        Cursor cursor = this.managedQuery(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            projection,
            selection,
            selectionArgs,
            null);
        return cursor.getCount();
  }

@Override
public void onBackPressed() {
    try {
        String parent = file.getParent().toString();
        file = new File( parent ) ;         
        File list[] = file.listFiles(new AudioFilter());

        myList.clear();

        for( int i=0; i< list.length; i++)
        {
            String name=list[i].getName();
            int count =     getAudioFileCount(list[i].getAbsolutePath());
               Log.e("Count : "+count, list[i].getAbsolutePath());
               if(count!=0)
              myList.add(name);
            /*int count=getAllFilesOfDir(list[i]);
            Log.e("Songs count ",""+count);
            if(count!=0)*/

        }
        pathTextView.setText(parent);
    //  Toast.makeText(getApplicationContext(), parent,          Toast.LENGTH_LONG).show(); 
        listView.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, myList ));
    } catch (Exception e) {
        finish();
    }

}

// class to limit the choices shown when browsing to SD card to media files
public class AudioFilter implements FileFilter {

    // only want to see the following audio file types
    private String[] extension = {".aac", ".mp3", ".wav", ".ogg", ".midi", ".3gp", ".mp4", ".m4a", ".amr", ".flac"};

    @Override
    public boolean accept(File pathname) {

        // if we are looking at a directory/file that's not hidden we want to see it so return TRUE
        if ((pathname.isDirectory() || pathname.isFile()) && !pathname.isHidden()){
            return true;
        }

        // loops through and determines the extension of all files in the directory
        // returns TRUE to only show the audio files defined in the String[] extension array
        for (String ext : extension) {
            if (pathname.getName().toLowerCase().endsWith(ext)) {
                return true;
            }
        }

        return false;
    }      
}

} 
```

.xml 文件：

```
<LinearLayout   xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:textSize="21sp"
    android:typeface="monospace"
    android:id="@+id/path"
    android:layout_width="fill_parent"
    android:layout_height="100dp"
    android:layout_margin="10dp"
    android:gravity="bottom"
    android:text="PATH : " />

<View
    android:layout_width="fill_parent"
    android:layout_height="2dp"
    android:background="#111111" />

<ListView android:id="@+id/pathlist"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</ListView>

 </LinearLayout> 
```

清单文件中的权限：

```
 <uses-permission  android:name="android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-11T16:06:59.277

这是我的解决方案。

1.  扫描所有音频文件前）`Cursor mCursor = getContentResolver().query( MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, ...`
2.  声明新数组
3.  环形
4.  文件夹名称 =`MediaStore.Audio.Media.DATA - MediaStore.Audio.Media.DISPLAY_NAME`
5.  将新的放入数组变量
6.  array 是一个不同的文件夹列表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-05T04:01:39.103

```
public ArrayList<String> Get_Folder_Paths() {

         String[] columns = {
            MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.TITLE,
            MediaStore.Audio.Media.ARTIST,
            MediaStore.Audio.Media.DURATION,
            MediaStore.Audio.Media.DATA,
            MediaStore.Audio.Media.ALBUM,
            MediaStore.Audio.Media.ALBUM_ID,
            MediaStore.Audio.Media.TRACK,
            MediaStore.Audio.Media.ARTIST_ID,
            MediaStore.Audio.Media.DISPLAY_NAME,

    };

        ArrayList<String> FoldersList = new ArrayList<>();

        ArrayList<String> DATAList = new ArrayList<>();
        ArrayList<String> DISPLAY_NAMEList = new ArrayList<>();

        Cursor cursor = this.getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                columns(),
                MediaStore.Audio.Media.IS_MUSIC + " = 1", null, null);
        if (cursor.moveToFirst()) {
            do {
                DATAList.add(cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.DATA)));
                DISPLAY_NAMEList.add(cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME)));
            } while (cursor.moveToNext());
        }

        for (int i = 0; i < DATAList.size(); i++) {
            FoldersList.add(DATAList.get(i).replace(DISPLAY_NAMEList.get(i), ""));

        }

        HashSet hs = new HashSet();

        hs.addAll(FoldersList); // demoArrayList= name of arrayList from which u want to remove duplicates

        FoldersList.clear();
        FoldersList.addAll(hs);

        if (cursor != null) {
            cursor.close();
        }
        return FoldersList;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T09:22:56.390

这可能有效： - 使用 walkDir 方法搜索存储位置中的所有音乐文件，然后您可以从 getPath() 方法获取每个文件的路径 - 对所有路径文件使用 subsString() 方法来获取 1 级文件夹名称 -将所有文件夹名称存储在 ArrayList 中，使用 Hashset 删除重复的文件夹名称（有条件）

# c++ - re2 根本不改变字符串

> ID：11285290
> 
> 赞同：2
> 
> 时间：2012-07-01T20:12:13.233
> 
> 标签：c++, regex, re2

我在第一次尝试使用 re2 时就在此处编写了此代码：

```
string s;
RE2::PartialMatch(".+\\.com","http://example.com/", &s); 
```

它不起作用；`s`不会改变并保持空白。我可以将第一行更改`string s = "foo";`为第二行运行后，`s`将保持为`"foo"`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:23:25.047

您对 的使用有两点错误`PartialMatch`：

1.  正如 Jesse Good 已经提到的，正则表达式应该是第二个参数而不是第一个参数。
2.  PartialMatch 的指针参数用于存储与正则表达式的捕获组匹配的子字符串。您的正则表达式不包含任何捕获组，因此不会向指针写入任何内容。

这应该有效：

```
RE2::PartialMatch("http://example.com/", "(.+\\.com)", &s); 
```

或者，如果您不希望 s 包含“.com”部分：

```
RE2::PartialMatch("http://example.com/", "(.+)\\.com", &s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:45:59.007

尝试翻转它们`RE2::PartialMatch("http://example.com/","example", &s);`它应该在字符串中为您提供“示例”。第一个参数是您要搜索的字符串，第二个参数是模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T20:22:16.143

`.\\.com`它捕获的正则表达式是错误的`anySymbol\.com`，您需要相同的`/.+\.com`

# twitter-bootstrap - 在 WinLess 上编译 twitterbootstrap buttons.less 时出错

> ID：11285295
> 
> 赞同：3
> 
> 时间：2012-07-01T20:14:24.400
> 
> 标签：twitter-bootstrap, less

我在buttons.less上的WinLess上得到一个'eval'为空或不是对象。

任何人 ？

附言。我已经使用了最新版本的一切并导入变量/mixins

我使用的版本是：WinLess 1.5.3 Less 1.3 Bootstrap 2.04

**编辑：**

这已在 Bootstrap 2.1.1 中修复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T20:37:22.993

Twitter bootstrap 团队[表示](https://github.com/twitter/bootstrap/issues/3894)，他们不保证会编译 button.less 等单个文件。他们鼓励编译具有所有需要的依赖项的 bootstrap.less。否则，您必须确保拥有 button.less 所需的所有依赖项（通常是 mixins.less 和 variables.less）。

实际上这个问题似乎与 WinLess 中的一些解析问题有关，所以在修复它之前，您可以使用一个 hack 来欺骗 WinLess 解析器。在 mixins.less 中，更改：

```
// IE7 inline-block
// ----------------
.ie7-inline-block() {
  *display: inline; /* IE7 inline-block hack */
  *zoom: 1;
} 
```

和 ：

```
// IE7 inline-block
// ----------------
.ie7-inline-block() {
  *display: inline; /* IE7 inline-block hack */
  *zoom: 1;
  // comment to make it work with WinLESS
} 
```

正如您所看到的，它包括添加一个新行**`// comment to make it work with WinLESS`**来欺骗 WinLess 解析器并使其工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:16:14.197

还有另一种解决方法。

删除 button.less 中的注释

```
 .btn {
  display: inline-block;
  .ie7-inline-block();
  padding: 4px 10px 4px;
  margin-bottom: 0; // For input.btn
  font-size: @baseFontSize;
  line-height: @baseLineHeight;
  *line-height: 20px;
  color: @grayDark;
  text-align: center;
  text-shadow: 0 1px 1px rgba(255,255,255,.75);
  vertical-align: middle;
  cursor: pointer;
  .buttonBackground(@btnBackground, @btnBackgroundHighlight);
  border: 1px solid @btnBorder;
  *border: 0; **// Remove the border to prevent IE7's black border on input:focus  [remove this]**
  border-bottom-color: darken(@btnBorder, 10%);
  .border-radius(4px);
  .ie7-restore-left-whitespace(); **// Give IE7 some love [remove this]**
  .box-shadow(~"inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05)");
} 
```

# sql - 给定机器的最后销售

> ID：11285296
> 
> 赞同：2
> 
> 时间：2012-07-01T20:15:04.587
> 
> 标签：sql, tsql

我正在尝试查找给定设备的最后一次销售。

我有 2 张桌子

1.  机器
2.  销售量。

他们通过`Machines.MahineID = Sales.MachineID`

这是我到目前为止所拥有的：

```
Select Machines.Name, Sales.DateOfSale from Machines 
Left Outer join Sales on Sales.MachineId = Machines.MachineId 
```

这为我提供了给定机器的所有销售额，但我只想要给定机器的最新销售额。我还想知道一台机器是否从未销售过。因此，左外连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:26:52.680

如果您只需要姓名和最后一次销售：

```
select Machines.Name, max(Sales.DateOfSale)
from Machines 
left join Sales on Sales.MachineId = Machines.MachineId
group by Machines.Name 
```

如果您需要最后一条记录中的其他列：

```
select Machines.Name, Sales.*
from Machines 
left join (
  select MachineId, max(DateOfSale) max_DateOfSale
  from Sales
  group by MachineId
) max_Sales
  on max_Sales.MachineId = Machines.MachineId
left join Sales
  on Sales.MachineId = Machines.MachineId
  and Sales.DateOfSale = max_Sales.max_DateOfSale 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:18:22.663

你可以试试这个：

```
Select Machines.Name, Sales.DateOfSale
from Machines 
Left Outer join Sales s on Sales.MachineId = Machines.MachineId
where not exists (
    select *
    from Sales os                      -- Other sale...
    where s.MachineId = os.MachineId   -- Same machine
      AND os.DateOfSale > s.DateOfSale -- later date
) 
```

有一个相关`exists`查询可以检查同一台机器上是否有其他销售在以后发生。

# mapping - 将唯一数字映射到索引

> ID：11285298
> 
> 赞同：0
> 
> 时间：2012-07-01T20:15:35.147
> 
> 标签：mapping, indices, unique-index

假设我有一个唯一数字列表（例如 105、342、432、34 等），我想将它们映射到索引（0、1、2、3 等）。有没有通用的方法来做到这一点？如果没有，假设您事先知道列表中的所有数字，并且可以硬编码它们的值。如果这没有帮助，另一个限制因素可能是这些数字“几乎是连续的”。这意味着它们大部分是连续的，但可能存在间隙（您提前知道）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:23:45.997

您想要做的基本上是实现哈希映射（或字典）。有许多用于实现这种结构的语言的库。
幕后发生的事情，以一种非常简化的方式，比如说，一个数组和一个散列函数，它将你的数字映射到数组的一个索引，以实现对基于元素的 O(1) 摊销访问在他们的钥匙上。
第二个重要方面是如何处理碰撞。例如，您的数字的散列函数是`f(x) = x mod 10`. *13*和*33*都将被散列为*3*. 这是一个冲突，必须处理。例如，您可以创建元素的有序列表并将它们分配给数组的槽。搜索元素时，您将散列其键并在指定数组的位置搜索列表以查找精确的键匹配。
这只是一切的开始，您可以在 [Hash function](http://en.wikipedia.org/wiki/Hashing_function)和[Hash map](http://en.wikipedia.org/wiki/Hash_map) on wikipedia 中找到有关这一切的更多信息。
值得一提的是，在您的情况下，您只想自己存储密钥。通常我们需要存储更复杂的对象并通过它们的键来搜索它们，它们通常是数字或字符串，但也可以是任何类型的更复杂的对象。

**编辑**
我刚刚意识到，您的问题更多是关于为您的特定场景找到最佳哈希函数，而不是针对与您类似的问题的更通用的解决方案。
如果我理解正确，您是说您事先*知道数字？*如果确实是这种情况，您可以*将*数字分配给数组中的每个索引，以非常硬编码的形式（如您自己建议的那样），例如：

```
if (num == 105)
    idx = 0;
else if (num == 342)
    idx = 1;
... 
```

如果你不知道你的数字，但你知道它们中最小的和最大的，你可以将它们散列到索引中：

```
f(x) = (x - smallest_num) mod (greatest_num - smallest_num + 1) 
```

在这种情况下，`f(x)`是一个完美的散列函数，这意味着不会有任何冲突。鉴于您的数字并不总是连续的，您的数组仍然会有一些空位。

*注意*：我仍然不确定您打算对此做什么，因此我不确定我是否正确回答了您的问题。特别是您可能事先知道您的号码，或者您可能对它们了解很多，这让我感到困惑。也许如果您的目的得到澄清，我们可以为您提供以不同方式实现目标的方法。

# java - 如何正确调整此代码中的数字？

> ID：11285299
> 
> 赞同：0
> 
> 时间：2012-07-01T20:15:41.057
> 
> 标签：java

如何正确调整代码中的数字？我是否应该插入 System.out.printf() 以及如何使用它？另外我怎样才能使数字左调整？

```
public class JTROLL
{
    public static void main(String[] Theory)
    {
        int k,i,j;

        System.out.print("The numbers are:"                                                );
        for (k = 0; k < 50; k++)
        {
            for ( i = k; i < 50; i++)
            {
                for ( j = i; j < 50; j++)
                {
                    if ( (k+1)*(k+1) + (i+1)*(i+1) == (j+1)*(j+1)                          )
                    {
                        System.out.println( "\n\t\t  " + (k+1) + ", "
                                                       + (i+1) + ", "
                                                       + (j+1)           );
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:43:26.640

以下应该可以如您所愿。

```
import java.util.Formatter;

final public class Main
{    
    public static void main(String[] args)
    {
        Formatter fmt = new Formatter();
        fmt.format("|%10.2f|", 123.123);
        System.out.println(fmt);

        fmt = new Formatter();
        fmt.format("|%10.2f|", 1.13);
        System.out.println(fmt);

        fmt = new Formatter();
        fmt.format("|%10.2f|", 152123.16777);
        System.out.println(fmt);

        fmt = new Formatter();
        fmt.format("|%10.2f|", 99.777);
        System.out.println(fmt);
    }
} 
```

您可能需要对其进行修改以适合您的格式。

* * *

它在控制台上产生以下输出。

```
|    123.12|
|      1.13|
| 152123.17|
|     99.78| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:35:59.387

1.  将您的数字和“，”分隔符附加到 StringBuilder。
2.  找到你的 StringBuilder 的长度。
3.  计算您需要将数字移到多远。
4.  将适当数量的空格放入字符串中。
5.  `println(spacerString + myStringBuilder.toString());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T20:36:04.280

[在http://docs.oracle.com/javase/tutorial/java/data/numberformat.html](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)上有很多关于格式化的例子和解释。要正确调整整数，请使用以下内容：

```
System.out.println("The numbers are:");
for (k = 0; k < 50; k++) {
    for (i = k; i < 50; i++) {
        for (j = i; j < 50; j++) {
            if ((k + 1) * (k + 1) + (i + 1) * (i + 1) == (j + 1) * (j + 1)) {
                System.out.format("\t\t%3d,%3d,%3d%n", (k + 1), (i + 1), (j + 1));
            }
        }
    }
} 
```

# ruby-on-rails - 使用 Rails 3.0.5 的 Rspec 中的未初始化常量错误

> ID：11285301
> 
> 赞同：0
> 
> 时间：2012-07-01T20:15:54.507
> 
> 标签：ruby-on-rails, rspec, rspec-rails

我正在尝试为 Rails 上的页面的简单控制器设置 Rspec 测试，但出现以下错误：

```
 /var/lib/gems/1.9.1/gems/rspec-core-2.0.1/lib/rspec/core/backward_compatibility.rb:20:in `const_missing': uninitialized constant Object::PagesController (NameError)
from /var/lib/gems/1.9.1/gems/rspec-expectations-2.0.1/lib/rspec/expectations/backward_compatibility.rb:6:in `const_missing'
from /media/sf_ruby/tapa-g/spec/controllers/pages_controller_spec.rb:3:in `<top (required)>'
from /var/lib/gems/1.9.1/gems/rspec-core-2.0.1/lib/rspec/core/configuration.rb:306:in `load'
from /var/lib/gems/1.9.1/gems/rspec-core-2.0.1/lib/rspec/core/configuration.rb:306:in `block in load_spec_files'
from /var/lib/gems/1.9.1/gems/rspec-core-2.0.1/lib/rspec/core/configuration.rb:306:in `map'
from /var/lib/gems/1.9.1/gems/rspec-core-2.0.1/lib/rspec/core/configuration.rb:306:in `load_spec_files'
from /var/lib/gems/1.9.1/gems/rspec-core-2.0.1/lib/rspec/core/command_line.rb:18:in `run'
from /var/lib/gems/1.9.1/gems/rspec-core-2.0.1/lib/rspec/core/runner.rb:55:in `run_in_process'
from /var/lib/gems/1.9.1/gems/rspec-core-2.0.1/lib/rspec/core/runner.rb:46:in `run'
from /var/lib/gems/1.9.1/gems/rspec-core-2.0.1/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

无论我键入什么命令行，我都会收到此错误，即：

```
bundle exec rspec spec/controllers/pages_controller_spec.rb 
rake spec
rspec spec/ 
```

我在 spec/controllers/pages_controller_sprec.rb 文件中有以下测试：

```
require 'spec_helper'

describe PagesController do
    render_views

  describe "GET 'home'" do
      it "should be successful" do
         get 'home'
         response.should be_success
      end
  end
end 
```

我在 app/controllers/pages_controller.rb 文件中的控制器看起来像：

```
class PagesController < ApplicationController
skip_authorization_check 

  def home
    @title = "Home"
  end 

end 
```

与其他操作，但在这里不相关。

以下是我的 Gemfile 中的宝石：

```
source 'http://rubygems.org'

gem 'rails', '3.0.5'
gem 'will_paginate', '3.0.pre2'
gem 'jquery-rails', '>= 1.0.12'
gem "paperclip", "2.4.5"
gem "rake", "0.8.7"
gem "devise"
gem "cancan"
gem 'aws-s3'
gem 'acts_as_tree'

group :development do
  gem 'rspec-rails', "2.0.1"
  gem 'annotate'
  gem 'faker', '0.3.1', :require => false
  gem 'populator', '1.0.0'
  gem 'ruby-debug19'
end

group :test do
  gem 'webrat', '0.7.1'
  gem "capybara"
  gem 'rspec', '2.0.1'
  gem 'factory_girl_rails', '1.0'
end 
```

我在 Rails 3.0.5 和 ruby​​ 1.9.2 下。

我这里没有线索可以看。我已经卸载了`rspec`和`rspec-rails`gems 并重新安装了它们，但没有成功。我既没有`autotest`也没有`Spork`安装来运行测试。

有人有想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:55:11.267

好吧，根据对类似案例的各种评论，我只是安装 rspec`apt-get uninstall rspec`并重新`rspec-rails`安装`gem install rspec-rails`. 现在测试正在工作。

# asp.net-mvc-3 - 添加属性以选择列表选项

> ID：11285303
> 
> 赞同：17
> 
> 时间：2012-07-01T20:16:00.433
> 
> 标签：asp.net-mvc-3, razor, html.dropdownlistfor

我在 Razor 视图的下拉列表中有一个项目列表。在数据库中，每个项目都有 3 个与之关联的值 - 数据库 ID、短名称（用于显示）和长名称（用于传递给服务）。下拉列表必须显示短名称，因此我使用数据库 id 作为值和短名称作为文本填充下拉列表。

然而，当用户选择一个项目时，我需要将长名称作为查询参数传递给使用 jQuery 的搜索服务，例如当 Cortina 被选中时，需要将“Ford Cortina 1979 Blue”传递给该服务。我的第一个想法是将长名称存储为数据破折号属性，但我想知道是否有更好的方法。所以

*   如何将所有 3 个值存储在下拉列表中？
*   如果我确实使用数据破折号属性，我如何将所有 LONG_NAME 值合并到 Html.DropDownListFor 或以某种方式将它们添加到下拉列表中？

D B：

```
CARID SHORT_NAME LONG_NAME
1     Viper     Dodge Viper 1982
2     Boxster   Porsche Boxster 2009 Black
3     Cortina   Ford Cortina 1979 Blue 
```

控制器助手创建下拉菜单：

```
public static IEnumerable<SelectListItem> GetSelectList(this IEFRepository repository, string typeName)
{
    var vehicle = repository.TypeTypes.FirstOrDefault(t => t.Name.ToUpper() == typeName);
    if (vehicle != null)
    {
        var carList = vehicle.SubTypes.ToList().OrderBy(s => s.Name);
        var selectList = new SelectList(subTypeList, "SubTypeID", "Name");

        return selectList;
    }
} 
```

这是我用来创建下拉菜单的代码：

```
<div class="editor-field">
    @Html.DropDownListFor(model => model.CarID,
        new SelectList(ViewBag.Cars, "Value", "Text", "1"))
    @Html.ValidationMessageFor(model => model.CarShortName)
</div> 
```

这是输出：

```
<select id="CarID" name="CarID" data-val="true" data-val-number="The field CarID must be a number." data-val-required="The CarID field is required.">
    <option value="2">Boxster</option>
    <option value="3">Cortina</option>
    <option selected="selected" value="1">Viper</option>
</select> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-28T19:33:07.773

每个人都忘记了解决这些问题的“经典”方法：使用`foreach`循环并实际编写输入 html。唯一的缺点是您必须添加自动属性的东西（如验证等），这取决于您的目的可能没什么大不了的。

就像是：

```
<select> // add other attributes as expected
@foreach(var type in Model.MyFancyTypes) {
<option value="@type.SubTypeID" data-description="@type.Description" 
    @if(ViewBag.TypeSelected == type.SubTypeID) {
        selected="selected"
    }>@type.Name</option>
}
</select> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-01T21:54:39.707

我有类似的情况，我需要将第三个值传递给每个列表项，以确定在 jQuery 函数中采取的操作。这是我的解决方案（这将允许您为下拉列表中的每个项目添加任意数量的属性）：

首先，我创建了一个 SelectListItemWithAttributes 类，如下所示：

```
 public class SelectListItemWithAttributes : SelectListItem {
        public IDictionary<string, string> HtmlAttributes { get; set; }
    } 
```

这允许我为选择列表创建带有附加属性的项目。

其次，我创建了一个名为 DropDownListWithItemAttributesFor 的 HTML 辅助方法，如下所示：

```
public static MvcHtmlString DropDownListWithItemAttributesFor<TModel, TValue>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TValue>> expression, IEnumerable<SelectListItemWithAttributes> selectList) {
    string name = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(ExpressionHelper.GetExpressionText(expression)); 

    var selectDoc = XDocument.Parse(htmlHelper.DropDownList(name, (IEnumerable<SelectListItem>)selectList).ToString());

    var options = from XElement el in selectDoc.Element("select").Descendants()
                          select el;

    for (int i = 0; i < options.Count(); i++){
        var option = options.ElementAt(i);
        var attributes = selectList.ElementAt(i);

        foreach (var attribute in attributes.HtmlAttributes){
                    option.SetAttributeValue(attribute.Key, attribute.Value);
        }
    }

    selectDoc.Root.ReplaceNodes(options.ToArray());
    return MvcHtmlString.Create(selectDoc.ToString());
} 
```

这允许我使用新的 SelectListWithAttributes 类作为属性创建一个下拉列表。基本上，它为下拉列表创建 HTML，将其解析为 XML 文档，然后将 HtmlAttributes 数组中的任何项目作为附加属性添加到下拉列表中的每个项目。

第三，在我的 ViewModel 代码中，我有以下内容：

```
private List<SelectListItemWithAttributes> pDropDownDatas = null;
public List<SelectListItemWithAttributes> DropDownDatas {
    get {
        var DropDownDataItems = (
            from c in db.GetDropDownDataList(1, 1000)
            where c.AccountTypeID == this.AccountTypeID
            select new SelectListItemWithAttributes() { Text = c.Title, Value = c.ID.ToString(), HtmlAttributes = new Dictionary<string, string> { { "data-callback", c.RequiresCallback.ToString().ToLower() } } } ).ToList()
            ;

        DropDownDataItems.Insert(0, new SelectListItemWithAttributes() { Text = "-- Select --", Value = "", HtmlAttributes = new Dictionary<string, string> { { "data-callback", "false" } } });

        return DropDownDataItems;
    }
} 
```

这将构建最终填充下拉列表的 SelectListItemsWithAttributes 列表。这可能在控制器而不是视图模型中，我只是选择将其作为我的视图模型的属性。

最后，在视图中它看起来像这样：

```
@Html.DropDownListWithItemAttributesFor(m => m.DropDownDataID, Model.DropDownDatas) 
```

这将使用包含 SelectListItemsWithAttributes 列表的视图模型中的属性在页面上显示下拉列表。

我根据在互联网上找到的各种解决方案构建了这个解决方案，所以它并不是我的全部原创，但我将它们组合成对我有用的东西。

希望这能帮助您解决您的问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-01T20:24:31.800

在应该接收表单提交的控制器操作中，您可以使用所选值的 id 来查询您的数据库，以获取长显示名称并执行您打算使用它执行的任何操作。

`DropDownListFor`帮助程序不支持向选项添加 HTML5属性，`data-*`但即使这样做，它们也不会作为标准表单提交的一部分发送。您必须使用 javascript 使用另一种技术（隐藏字段、AJAX、查询字符串参数...）将它们发送到服务器。

但是，如果出于某种原因，您需要在选项标签上添加其他属性，您总是可以编写自定义帮助程序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-03T14:56:57.243

@nikeaa 感谢您的代码。I found a few issues with it (eg when the option list is empty, the select is not rendered correctly; you don't need to replace the options, just modify them, otherwise some attributes of the select are removed) and I added some附加参数以充分利用 DropDownListFor 的强大功能。这是我的方法版本：

```
public static MvcHtmlString DropDownListWithItemAttributesFor<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItemWithAttributes> selectList,
    string optionLabel, IDictionary<string, object> htmlAttributes)
{
    if (selectList == null || !selectList.Any())
        return htmlHelper.DropDownListFor(expression, selectList, optionLabel, htmlAttributes);

    var selectDoc = XDocument.Parse(htmlHelper.DropDownListFor(expression, selectList, optionLabel, htmlAttributes).ToString());

    var options = selectDoc.Element("select").Descendants().ToArray();

    for (int i = 0; i < options.Length; i++)
    {
        var option = options[i];
        var attributes = selectList.ElementAt(i);

        foreach (var attribute in attributes.Attributes)
            option.SetAttributeValue(attribute.Key, attribute.Value);
    }

    return MvcHtmlString.Create(selectDoc.ToString());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T13:35:30.060

现在才回到这个话题。虽然@nikeaa 的答案肯定是一个可行的解决方案，但我认为它有点重量级，尤其是使用 XDocument。提醒一下，我正在处理的是 TypeType（汽车）和 SubType（汽车类型列表 - Viper、Granada、Hunter、Zodiac、Wolsley 1660 等）。TypeType 也可以是 Trucks、Bicycles 等。这就是我解决它的方法：

我在 Controller 上添加了一个 JsonResult 方法来返回一个具有我想要的 3 个属性的匿名对象：

```
public class VehicleController : Controller
{
    // etc.
    public JsonResult GetSubTypesForTypeType(string typeTypeName)
    {
        var cars = pronova2Repository.GetTypeWithSubTypes(typeTypeName);

        return cars == null
        ? Json(new object[0], JsonRequestBehavior.AllowGet)
        : Json(cars.SubTypes.OrderBy(s => s.Name).Select(
            s => new { s.SubTypeID, s.Name, s.Description }).ToArray(),
            JsonRequestBehavior.AllowGet);
    }
    // etc.
} 
```

然后在js中：

填充下拉列表：

```
// populate the cars drop down when the select list is available
if ($('select#SubTypeID').length) {
    var carsSelect = $('select#SubTypeID');
    var carsList = populateCarsList("CARS");
    var carsListHtml = createCarsSelectList(carsList);
    carsSelect.html('');
    carsSelect.append(carsListHtml);

    $('#SubTypeID').change(function (e) {
        clearFormData();
    });
} 
```

通过 ajax 调用调用函数以获取子类型（汽车）：

```
function populateCarsList(typeTypeName) {
    var carsList;

    $.ajax({
        url: '/Vehicle/GetSubTypesForTypeType',
        data: { typeTypeName: typeTypeName },
        async: false
    }).done(function (data) {
        carsList = data;
    }).error(function (msg, url, line) {
        alert("Error retrieving cars from Vehicle/GetSubTypesForTypeType. Error message: " + line);
    });

    return carsList;
} 
```

使用添加的描述作为“data-*”属性创建选择列表的函数：

```
function createCarsSelectList(selectData) {
    var html = '',
        len = selectData.length,
        selected,
        description;

    for (var i = 0; i < len; i++) {

        // "Viper" should be selected by default
        if (selectData[i].Name.toLocaleUpperCase() === "VIPER") {
            selected = ' selected="selected" ';
        } else {
            selected = '';
        }

        // Add the description (as a "data-" attribute), some descritions are null
        if (selectData[i].Description != null) {
            description = selectData[i].Description;
        } else {
            description = '';
        }

        html += '<option value="' + selectData[i].SubTypeID + '" data-description="' + description + '"' + selected + '>' + selectData[i].Name + '</option>';
    }

    return html;
} 
```

# applescript - Applescript 不会自动退出

> ID：11285304
> 
> 赞同：0
> 
> 时间：2012-07-01T20:16:01.423
> 
> 标签：applescript

有什么办法可以让我的脚本自动关闭？注意：如果你强行退出，屏保会留在桌面上，所以不是因为它是在应用程序中运行的。

```
tell application "System Events"
    tell screen saver preferences
        if running then
            do shell script "killall ScreenSaverEngine"
        else
            do shell script "//System/Library/Frameworks/ScreenSaver.framework/Resources/ScreenSaverEngine.app/Contents/MacOS/ScreenSaverEngine -background"
        end if
    end tell
end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:28:59.610

添加`&> /dev/null &`到 shell 脚本：

```
tell application "System Events"
    tell screen saver preferences
        if running then
            do shell script "killall ScreenSaverEngine"
        else
            do shell script "//System/Library/Frameworks/ScreenSaver.framework/Resources/ScreenSaverEngine.app/Contents/MacOS/ScreenSaverEngine -background  &> /dev/null &"
        end if
    end tell
end tell 
```

# android - 如何在 SQLite 数据库中创建嵌套表？（安卓）

> ID：11285305
> 
> 赞同：7
> 
> 时间：2012-07-01T20:16:05.117
> 
> 标签：android, database, sqlite, nested

我想在 android 中创建一个嵌套的 sqlite 数据库。IE。我希望表中的特定字段以不同表的形式具有其全新的一组值。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-01T20:24:59.823

你所描述的是不可能的；无法在另一个表的一行中包含一个表。标准做法是通过将父表的主键作为列包含在子表中来创建“父/子”表；例如：

```
PARENT TABLE

id | name
---------
1  | Fred
2  | Bob 
```

* * *

```
CHILD TABLE
id | parent_id | name
---------------------
1  | 1         | John
2  | 1         | Jim
3  | 2         | Joe
4  | 2         | Jane 
```

这对表将“John”和“Jim”作为“Fred”的孩子，“Joe”和“Jane”作为“Bob”的孩子。您可以通过以下查询获得“Bob”（父 ID=2）的所有子代的集合：

```
SELECT * FROM child_table WHERE parent_id = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T00:25:40.527

这就是我要做的，但您将无法创建当前表的另一个子表。

我会建议你从中创建两个不同的表，例如。如果您有表员工并且需要创建另外两个子表营销员工和工程员工表，只需创建我描述的两个表。例如

```
CREATE TABLE emp_engineer 
```

和

```
CREATE TABLE emp_marketing 
```

# html - 具有固定宽度的绝对表头中的奇怪 IE 7 行为

> ID：11285307
> 
> 赞同：1
> 
> 时间：2012-07-01T20:16:17.330
> 
> 标签：html, css, internet-explorer, scroll, fixed-header-tables

再一次，我在这个问题上对 IE7 不知所措。

我正在制作一个几乎完全基于 CSS 的固定标题可滚动正文表（水平滚动仍然需要 javascript 才能工作）。它是基于[此](http://www.cssbakery.com/2010/12/css-scrolling-tables-with-fixed.html)的修改版本。在我检查过的浏览器中看起来不错：Chrome、Firefox 和 IE8+。但是，在 IE7（可能更低）中，标题行为不端，就像顽皮的害群之马一样，我不知道为什么。

感谢和鼓励任何修复/改进/建议/更改。:
)（我想要一个窗户式的外观）

这是一个[现场 jsFiddle](http://jsfiddle.net/6T3h4/)

这是Firefox和IE7之间的比较图片 ![在此处输入图像描述](../Images/e2d97f9a5c66dfd12951f14003208ef7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:31:27.160

我会建议 IE7 的另一种外观:)

首先 - 我看到你在第三列中除了 IE 之外的任何地方都隐藏了*操作这个词 - 这就是问题的开始。*IE 不会`height: inherit`在`div`. 将它设置为 22px 就可以了——至少它不会破坏布局。见这里 - [http://fiddle.jshell.net/6T3h4/6/](http://fiddle.jshell.net/6T3h4/6/)

但是问题仍然存在于边框...我的建议是仅使用 ie7 删除边框，`*border: 0;`其他人都会忽略该边框。

结果 - 与当前的相比，至少你会有更好的视觉呈现）））见这里： http: [//fiddle.jshell.net/6T3h4/7/](http://fiddle.jshell.net/6T3h4/7/)（*在这个例子中，我只是删除了要保存的边框时间 - 所以它在**所有**浏览器中都消失了。`*border: 0;`如果你愿意，可以*使用）

它是**部分**解决方案，我建议仅在您无法找出 IE 将元素放在`thead`. 可以这么说，作为最后的手段，但不是一直这样做;）如果我有更多时间，我会研究这个问题，但我不确定我是否需要）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:22:50.740

只需添加以下代码：

```
table.list thead tr {*position: relative;} /* For IE 7 */ 
```

找到一种方法来工作`tfoot`但不工作。

# ruby-on-rails - 基于关联约束搜索实体

> ID：11285308
> 
> 赞同：1
> 
> 时间：2012-07-01T20:16:31.667
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, squeel

我有一个模型（比如用户），它有**很多**登录名。

```
class User < ActiveRecord::Base
    has_many :logins
end

class Login < ActiveRecord::Base
    belongs_to :user
end 
```

是否有可能找到具有特定登录名的用户（例如提供者 == facebook。）

我知道可以使用：

```
User.joins{logins}.where{logins.provider == "facebook"} 
```

但是生成的**用户实体对象是只读的......我知道我可以通过在 where{} 的结果上调用****readonly(true)**使其可写，但不知何故感觉不对。

没有显式**登录**就没有办法做到这一点吗？

（在那里使用 squeel 语法）

# python - 索引 sorteddict 的 ValuesView

> ID：11285312
> 
> 赞同：2
> 
> 时间：2012-07-01T20:17:28.207
> 
> 标签：python, sorteddictionary

鉴于[文档](http://stutzbachenterprises.com/blist/sorteddict.html)，以下代码有什么问题：

```
import blist
d = blist.sorteddict({3: "first", 7: "second"})
print(d.keys()[1])
print(d.values()[1])
print(d.items()[1]) 
```

哪个打印

```
Traceback (most recent call last):
  File "test.py", line 4, in <module>
    print(d.values()[1])
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/_sorteddict.py", line 53, in __getitem__
    key = self._mapping.sortedkeys[index]
AttributeError: 'sorteddict' object has no attribute 'sortedkeys' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T20:22:37.080

这似乎是一个错误。代码没问题。

# python - 尝试 ... 除了 ... 作为 Python 2.5 中的错误 - Python 3.x

> ID：11285313
> 
> 赞同：29
> 
> 时间：2012-07-01T20:17:56.247
> 
> 标签：python, exception, try-catch

我想在 Python 2.5、2.7 和 3.2 中保留并使用异常的错误值。

在 Python 2.5 和 2.7（但不是 3.x）中，这有效：

```
try:
    print(10 * (1/0))
except ZeroDivisionError,  error:       # old skool
    print("Yep, error caught:", error) 
```

在 Python 2.7 和 3.2（但不是 2.5）中，这有效：

```
try:
    print(10 * (1/0))
except (ZeroDivisionError) as error:    # 'as' is needed by Python 3
    print("Yep, error caught:", error) 
```

是否有任何适用于 2.5、2.7 和 3.2 的代码？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-01T20:54:03.973

您可以在 Python 2.5 到 3.2 上使用一个代码库，但这并不容易。您可以查看[coverage.py](http://bitbucket.org/ned/coveragepy)，它在 2.3 到 3.3 上运行，只有一个代码库。

捕获异常并获取对所有异常都有效的引用的方法是：

```
except ValueError:
    _, err, _ = sys.exc_info()
    #.. use err... 
```

这相当于：

```
except ValueError as err:
    #.. use err... 
```

# java - 向 Play Framework 应用程序添加 OpenID 支持时如何调用 absoluteURL()？

> ID：11285316
> 
> 赞同：1
> 
> 时间：2012-07-01T20:18:19.530
> 
> 标签：java, openid, playframework-2.0

我正在尝试使用[文档页面](http://www.playframework.org/documentation/2.0.2/JavaOpenID)上的示例代码将 OpenID 登录支持添加到 Play Framework 应用程序：

```
Map<String, String> attributes = new HashMap<String, String>();
attributes.put("email", "http://schema.openid.net/contact/email");
OpenID.redirectURL(
  openid, 
  routes.Application.openIDCallback.absoluteURL(), 
  attributes
); 
```

问题是当我使用这段代码时，我得到以下编译错误：

```
找不到符号 [符号：方法 absoluteURL()] [位置：类 play.api.mvc.Call]

```

确实，该类没有无参数`absoluteURL()`的方法。[`Call`](http://www.playframework.org/documentation/api/2.0.2/java/play/mvc/Call.html)Call#absoluteURL() 方法是：

```
absoluteURL(Http.Request 请求)

```

和：

```
absoluteURL（Http.Request 请求，布尔安全） 

```

我需要使用什么`Http.Request`实例？参数的意义是什么`secure`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:27:17.367

尝试当前的请求：

```
Map<String, String> attributes = new HashMap<String, String>();
attributes.put("email", "http://schema.openid.net/contact/email");
OpenID.redirectURL(
  openid, 
  routes.Application.openIDCallback.absoluteURL(request()), 
  attributes
); 
```

# javascript - 在第一次 jQuery ajax 调用 jQuery 样式更改后重置

> ID：11285319
> 
> 赞同：0
> 
> 时间：2012-07-01T20:18:39.343
> 
> 标签：javascript, css, jquery

似乎还有其他人有类似的问题，但仍然没有找到答案。这是场景。

用户单击一个按钮，该按钮显示一个隐藏的 div，其中包含一个文本区域，他们可以在其中发表评论：

```
//show the div containing the textarea
$('#postTypeContainer').css({ 'display': 'block' }); 
```

接下来，用户输入评论并单击按钮提交，div 被隐藏，一些数据被发送到服务器：

```
$("#loading").ajaxStart(function () {
        $(this).show(); //shows a spinner
    }).ajaxComplete(function () {
        $(this).hide(); //hides the spinner

        //hide the div that was opened earlier
        $('#postTypeContainer').fadeOut('fast');
    });

    //send data
    $.ajax({
        type: "POST",
        url: rootUri + "main.aspx/StartNewThread",
        data: jsonText,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (markUp) {
           //stuff
        }
    }); 
```

这一切都正常工作。

现在用户通过单击再次打开 div，效果很好

```
//show the div containing the textarea
$('#postTypeContainer').css({ 'display': 'block' }); 
```

接下来，用户键入一些数据，在本例中为 @abc，因为他们想标记另一个用户，并且在“keyup”上使用 jQuery 会发生以下情况：

```
//ajax call to find users matching the @abc
$.ajax({
        type: "POST",
        url: rootUri + "main.aspx/GetMatch",
        data: jsonText,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {

            //stuff

        }
    }); 
```

一旦这个 ajax 调用返回，打开的 div 就会关闭，就好像 DOM 被重置为 ajax 调用之前的状态一样。因此，在尝试与 textarea 交互的过程中，div 关闭了用户，这非常令人沮丧。解决此问题的唯一方法是刷新页面，这显然是我想通过使用 ajax 来避免的。希望有人知道出了什么问题。我尝试失败的一件事是，当在 keyup 上输入使 ajax 调用进行标记的函数时，我检查了 div 的状态，然后尝试在 ajax 调用结束时将其设置为保持打开状态，但事实并非如此在职的。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:36:08.280

[.ajaxComplete()](http://api.jquery.com/ajaxComplete/)是一个全局 ajax 事件，每次 jQuery ajax 事件完成时触发。因此，当您的第二个 ajax 调用完成时，它也会隐藏`postTypeContainer`div。我认为您想将该隐藏绑定到第一个 ajax 调用的本地完成事件。

```
$("#loading").ajaxStart(function () {
    $(this).show(); //shows a spinner
}).ajaxComplete(function () {
    $(this).hide(); //hides the spinner
});

//send data
$.ajax({
    type: "POST",
    url: rootUri + "main.aspx/StartNewThread",
    data: jsonText,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (markUp) {
       //stuff
    },
    complete: function() { // DO IT HERE

        //hide the div that was opened earlier
        $('#postTypeContainer').fadeOut('fast');

    }
}); 
```

# java - 如何使按钮打开一个新窗口并关闭旧窗口

> ID：11285323
> 
> 赞同：2
> 
> 时间：2012-07-01T20:18:50.950
> 
> 标签：java, swing, jframe, jbutton, actionlistener

我希望它在按下按钮时关闭活动窗口并打开新窗口。

我在它打开一个新窗口的地方得到它，但旧窗口仍然存在。我试图实现 frame.dispose(); 但我不认为我做对了。

这是我所拥有的

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

public class MyPanel3 extends JPanel {

    private JTextField jcomp1;
    private JLabel jcomp2;
    private JLabel jcomp3;
    private JButton jcomp4;
    private JLabel clock;
    static final String ADD = "add";

    public MyPanel3() {
        //construct components
        jcomp1 = new JTextField(5);
        jcomp2 = new JLabel("How long were you parked?");
        jcomp3 = new JLabel("Minutes");
        jcomp4 = new JButton("Calculate Total");
        clock = new JLabel("newLabel");

        ImageIcon clockpic = new ImageIcon(
                "/Users/bnproductions/ALL/123FinalProject/bin/clock2.gif");
        JLabel clock = new JLabel(clockpic);
        jcomp4.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                final ImageIcon icon4 = new ImageIcon(
                        "/Users/bnproductions/ALL/123FinalProject/bin/money2.gif");
                JOptionPane.showMessageDialog(null, " Your total is $0.00",
                        "Parking Total", +JOptionPane.INFORMATION_MESSAGE, icon4);
            }
        });
        //adjust size and set layout
        setPreferredSize(new Dimension(335, 92));
        setLayout(null);

        //add components
        add(jcomp1);
        add(jcomp2);
        add(jcomp3);
        add(jcomp4);
        add(clock);

        //set component bounds (only needed by Absolute Positioning)
        jcomp1.setBounds(280, 30, 50, 20);
        jcomp2.setBounds(100, 25, 175, 30);
        jcomp3.setBounds(280, 15, 55, 20);
        jcomp4.setBounds(110, 55, 150, 25);
        clock.setBounds(5, 5, 90, 80);
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("MyPanel");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.getContentPane().add(new MyPanel3());
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T20:56:17.363

这是为什么有[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)的教科书示例，并同意[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)最`JComponents`适合显示[ImageIcon / Icon](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CardLayoutTest {

    private static final long serialVersionUID = 1L;
    private JPanel cardPanel;
    private CardLayout cardLayout;
    private JFrame frame;

    public CardLayoutTest() {
        JPanel cp = new JPanel(new BorderLayout());
        cp.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        cardLayout = new CardLayout(5, 5);
        cardPanel = new JPanel(cardLayout);
        cp.add(cardPanel);
        for (int i = 0; i < 5; i++) {// Create random panels for testing.
            String name = "ImagePanel" + (i + 1);
            String image = (i & 1) == 0 ? "foo.gif" : "bar.gif";
            Color clr = (i & 1) == 0 ? Color.red : Color.blue;
            ImagePanel imgPanel = new ImagePanel(name, image, clr);
            cardPanel.add(imgPanel, name);
            cardLayout.addLayoutComponent(imgPanel, name);
        }
        JPanel buttonPanel = new JPanel(new GridLayout(1, 2, 5, 5));
        JButton prevButton = new JButton("< Previous");
        prevButton.setActionCommand("Previous");
        prevButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                cardLayout.previous(cardPanel);
            }
        });
        buttonPanel.add(prevButton);
        JButton nextButton = new JButton("Next >");
        nextButton.setActionCommand("Next");
        nextButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                cardLayout.next(cardPanel);
            }
        });
        buttonPanel.add(nextButton);
        JPanel temp = new JPanel(new BorderLayout());
        temp.add(buttonPanel, BorderLayout.LINE_END);
        cp.add(temp, BorderLayout.SOUTH);
        frame = new JFrame("Test");
        frame.add(cp);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new CardLayoutTest();
            }
        });
    }
}

class ImagePanel extends JPanel {

    private static final long serialVersionUID = 1L;
    private String imgString;
    private JLabel imgLabel;

    public ImagePanel(String name, String imgString, Color backGround) {
        setName(name);
        this.imgString = imgString;
        setLayout(new BorderLayout());
        setBackground((backGround));
        // Ensure size is correct even before any image is loaded.
        setPreferredSize(new Dimension(400, 300));
    }

    @Override
    public void setVisible(boolean visible) {
        if (visible) {
            System.err.println(getName() + ": Loading and adding image");
            ImageIcon icon = new ImageIcon(imgString);
            imgLabel = new JLabel(icon);
            add(imgLabel);
        }
        super.setVisible(visible);
        if (!visible) { // Do after super.setVisible() so image doesn't "disappear".
            System.err.println(getName() + ": Removing image");
            if (imgLabel != null) { // Before display, this will be null
                remove(imgLabel);
                imgLabel = null; // Hint to GC that component/image can be collected.
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T20:55:29.720

嗯，我写了一个简短的例子来做你所要求的，希望你能根据你的需要调整它：

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;

public class JFramesTest extends JFrame {

    private JButton button = new JButton("Close This and Open another");

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFramesTest jFramesTest = new JFramesTest("Frame1");//create a new instance
            }
        });
    }

    public JFramesTest(String string) {
        super(string);
        createAndShowUI();
    }

    private void createAndShowUI() {
        setSize(300, 300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                dispose();//close the old frame of this instance
                EventQueue.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        JFramesTest jFramesTest = new JFramesTest("Frame2");//create a new instance
                    }
                });
            }
        });

        getContentPane().add(button, BorderLayout.CENTER);
        setVisible(true);
    }
} 
```

# linker - 将 LDFLAGS 添加到 newlib Makefiles

> ID：11285324
> 
> 赞同：0
> 
> 时间：2012-07-01T20:18:57.143
> 
> 标签：linker, makefile, ld, newlib, ldflags

我正在尝试在 syscalls.c 文件中实现 _sbrk() 函数。为此，我需要将 newlib 与我的项目目标文件链接起来。在 newlibs 根文件夹中，我做了一个简单的

```
./configure --target=arm-elf 
```

这为我创造了一堆 Makefile。但现在我不知道我编辑了哪个 Makefile 来更改 LDFLAGS。如果不这样做，我会收到“未定义的引用”错误，因为链接器找不到相关对象。在此先感谢您的阅读（并希望能帮助我:) 克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:34:05.297

如果您想`LDFLAGS`为您的构建进行全局更改，那么您可以`configure`像这样调用：

```
./configure LDFLAGS="<yourflags>" --target=arm-elf 
```

结果`Makefile`将使用提供的标志作为其`LDFLAGS`.

# asp.net - 一个人浏览网站的未处理异常是否会给另一个同时使用的用户带来麻烦？

> ID：11285325
> 
> 赞同：0
> 
> 时间：2012-07-01T20:18:59.607
> 
> 标签：asp.net, asp.net-4.0

我在我的 ASP.Net 站点上使用 ViewState。如果一个用户的浏览导致应用程序中出现未处理的异常会发生什么——这会影响另一个同时的用户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:20:28.557

异常将终止该请求。

不应执行所有其他请求。

当然，这假定了正常类型的异常 - 不喜欢`OutOfMemory`或会使 IIS 崩溃的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:28:22.617

不。

异常将终止当前请求，但不会影响应用程序的其余部分。

# iphone - 故事板 - initWithCoder 被调用两次

> ID：11285333
> 
> 赞同：2
> 
> 时间：2012-07-01T20:20:07.870
> 
> 标签：iphone, ios, uistoryboard

我想知道的重要一点是我正在使用故事板。我在**didFinishLaunchingWithOptions**中执行以下操作：

```
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];

FirstView *mvc = [sb instantiateViewControllerWithIdentifier:@"FirstView"];
SecondView *tvc = [sb instantiateViewControllerWithIdentifier:@"SecondView"];

NSArray* controllers = [NSArray arrayWithObjects:[self addNavigationToViewController:mvc], [self addNavigationToViewController:tvc], nil];

// add controllers to a table view
UITabBarController *tb = [[UITabBarController alloc] init];
[tb setViewControllers:controllers];

[self.window setRootViewController:tb]; 
```

**addNavigationToViewController**是我用来在 UINavigationController 中嵌入视图控制器的方法

当我运行这个应用程序`initWithCoder`时，**FirstView**中的调用被调用了两次。我找到了原因，但我不知道如何以正确的方式做到这一点。

基本上 FirstView 被初始化一次，因为它是*初始场景*（属性检查器中有一个复选标记设置视图“是初始视图控制器”），第二次：

```
FirstView *mvc = [sb instantiateViewControllerWithIdentifier:@"FirstView"]; 
```

如果我取消选中*初始场景*，它会抱怨“可能未设置指定的入口点”。

我做错了什么，但我不知道它是什么。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T19:01:55.257

在使用故事板的应用程序中，在应用程序启动时，UIKit 在 info plist 中查找[UIMainStoryboardFile 键](http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW9)。如果设置了 UIKit 引用该故事板并使用 -[UIStoryboard instantiateInitialViewController] 创建一个默认的根视图控制器以附加到窗口。

UIKit 正在这样做，然后在 -didFinishLaunchingWithOptions: 中，您还创建了视图控制器的新实例。这就是它被实例化两次的原因。

如果您想完全自定义此过程，并且看起来确实如此，那么您可能不希望 UIKit 代表您执行这些默认操作。您可以简单地从 info.plist 中删除 UIMainStoryboardFile 键，并在覆盖 -didFinishLaunchingWithOptions: 时，您可以：

1.  创建一个窗口
2.  抓住故事板
3.  Instantiate view controller(s) from the storyboard.
4.  Set the root view controller for the window.
5.  Make the window key and visible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:40:36.263

除非有超出您提到的某些原因，否则您可能根本不需要打电话`instantiateViewControllerWithIdentifier`。如果您使用情节提要，在大多数情况下，您可以（应该）`UITabBarController`在情节提要中定义您的视图控制器，并让您`MainTabBarController`成为您的“初始视图控制器”。您还可以将视图控制器嵌入故事板的导航控制器中。

# android - 旋转力关闭

> ID：11285337
> 
> 赞同：0
> 
> 时间：2012-07-01T20:20:55.403
> 
> 标签：android, arrays, spinner, switch-statement, adapter

我试图用吐司来测试我的微调器的功能。我遇到了麻烦，因为它不是烘烤 ShowTime，而是强制关闭。我的 logcat 发布在代码下方。如果有人可以帮助我阅读我的 logcat 代码并找出问题所在。提前致谢！

```
 public class Spinner extends Activity {
        Spinner bus;
        String GetTime;
        int ShowTime;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            final String[] Log_Array = new String[9];
            {
                Log_Array[0] = "5 min";
                Log_Array[1] = "10 min";
                Log_Array[2] = "30 min";
                Log_Array[3] = "50 min";
                Log_Array[4] = "100 min";
                Log_Array[5] = "300 min";
                Log_Array[6] = "400 min";
                Log_Array[7] = "500 min";
                Log_Array[8] = "600 min";

                bus= (Spinner) findViewById(R.id.timer);

                ArrayAdapter NoCoreAdapter = new ArrayAdapter(this,
                        android.R.layout.simple_spinner_item, Log_Array);
                bus.setAdapter(NoCoreAdapter);

                bus.setSelection(1);
            }

            bus.setOnItemSelectedListener(new OnItemSelectedListener() {

                public void onItemSelected(AdapterView<?> parent, View view,
                        int pos, long id) {

                    GetTime = parent.getItemAtPosition(pos).toString();

                    if (pos == 0) {
                        GetTime.equals(Log_Array[0]);
                        ShowTime = 5;
                    }
                    if (pos == 1) {
                        GetTime.equals(Log_Array[1]);
                        ShowTime = 5;
                    }
                    if (pos == 2) {
                        GetTime.equals(Log_Array[2]);
                        ShowTime = 5;
                    }
                    if (pos == 3) {
                        GetTime.equals(Log_Array[3]);
                        ShowTime = 5;
                    }
                    if (pos == 4) {
                        GetTime.equals(Log_Array[4]);
                        ShowTime = 5;
                    }
                    if (pos == 5) {
                        GetTime.equals(Log_Array[5]);
                        ShowTime = 5;
                    }
                    if (pos == 6) {
                        GetTime.equals(Log_Array[6]);
                        ShowTime = 5;
                    }
                    if (pos == 7) {
                        GetTime.equals(Log_Array[7]);
                        ShowTime = 5;
                    }

                    if (pos == 8) {
                        GetTime.equals(Log_Array[8]);
                        ShowTime = 6;
                    }
                    Toast.makeText(getApplicationContext(), ShowTime,
                            Toast.LENGTH_LONG).show();
                }

                public void onNothingSelected(AdapterView parent) {
                    // Do nothing.
                }
            });
        } 
```

我的日志猫

```
07-01 16:12:14.348: E/AndroidRuntime(21733): FATAL EXCEPTION: main
07-01 16:12:14.348: E/AndroidRuntime(21733): android.content.res.Resources$NotFoundException: String resource ID #0x5
07-01 16:12:14.348: E/AndroidRuntime(21733):    at android.content.res.Resources.getText(Resources.java:210)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at android.widget.Toast.makeText(Toast.java:258)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at com.settings.Settings$1.onItemSelected(Settings.java:88)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at android.widget.AdapterView.fireOnSelected(AdapterView.java:871)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at android.widget.AdapterView.access$200(AdapterView.java:42)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:837)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at android.os.Handler.handleCallback(Handler.java:587)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at android.os.Looper.loop(Looper.java:143)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at android.app.ActivityThread.main(ActivityThread.java:4196)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at java.lang.reflect.Method.invokeNative(Native Method)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at java.lang.reflect.Method.invoke(Method.java:507)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-01 16:12:14.348: E/AndroidRuntime(21733):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:25:42.247

Toast 有一个方便的方法，允许您向它传递一个资源 ID（整数），它是一个指向字符串资源的指针。

所以这行代码：

```
Toast.makeText(getApplicationContext(), ShowTime,Toast.LENGTH_LONG).show(); 
```

`ShowTime`告诉程序制作一个 Toast 并用 Integer为其 ID的 String 资源填充它。在您的项目中，该字符串资源不存在，因此您收到此异常。

要解决此问题，您需要使用将 String 作为第二个参数而不是 int 的 makeText() 方法。像这样：

```
Toast.makeText(Spinner.this, String.ValueOf(ShowTime),Toast.LENGTH_LONG).show(); 
```

另请注意，您的 Activity*是一个*上下文，因此您应该使用`this`（您的活动）而不是`getApplicationContext()`方法。并且因为您在 Listener 对象声明中，所以您需要将 Activity 的名称放在`this`

**编辑：**我还建议您不要将您的活动命名为“Spinner”。由于有一个称为 Spinner 的 UI 组件对象，这增加了一定程度的混乱。如果我是你，我会重构它并将 Activity 的名称更改为 SpinnerActivity。

# asp.net - 无法从 asp.net 表单发送电子邮件

> ID：11285338
> 
> 赞同：1
> 
> 时间：2012-07-01T20:21:32.320
> 
> 标签：asp.net, .net, vb.net

我创建了一个表单来向电子邮件帐户发送电子邮件并使用以下代码。

```
 Dim client As New SmtpClient()
        Dim emailmessage As New MailMessage()

        Dim emailfrom As New MailAddress(txtEmail.Text)

        emailmessage.Subject = "Web Submission"
        emailmessage.Body = "Web submission received from " & txtName.Text & ". Phone no: "     & txtPhone.Text & "."
        client.Host = "localhost"
        client.Port = 25
        emailmessage.From = emailfrom
        emailmessage.To.Add("info@test.com")

        client.Send(emailmessage)
        lblMessage.Text = "Thank you, we will contact you soon" 
```

我正在使用 IIS express 来运行我的项目。如果我是正确的，我知道 IIS express 不支持 smtp。但如果代码正确，它应该可以正常运行。无论如何，我通过 .net 发布工具将我的网站发布到我的 godaddy 帐户。当我尝试从表单发送电子邮件时，我收到以下错误消息。

信箱不可用。服务器响应为：5.7.1 无法中继“info@test.com”

```
Dim msg As New MailMessage()
        msg.To = "test@gmail.com"
        msg.From = "test@gmail.com"
        msg.Subject = "test"
        'msg.BodyFormat = MailFormat.Html
        msg.BodyFormat = MailFormat.Text
        msg.Body = "hi"

        SmtpMail.SmtpServer = "localhost"

        SmtpMail.Send(msg)
        lblMessage.Text = "An Email has been send to " & "test@gmail.com" 
```

我尝试了上面的代码，但仍然无法正常工作。我只是想不通我在这里做错了什么。我记得我曾经在某个时候得到过这个工作。但我不记得怎么了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:39:22.593

您缺少的 SmtpServer 凭据

```
 client.Credentials = New Net.NetworkCredential("username@gmail.com", "password") 
```

如果不是这样，请配置您的 smtp 虚拟服务器，如示例[http://codebetter.com/petervanooijen/2006/04/05/using-localhost-as-mailserver-5-7-1-unable-to-relay-为-xxx/](http://codebetter.com/petervanooijen/2006/04/05/using-localhost-as-mailserver-5-7-1-unable-to-relay-for-xxx/)

# objective-c - 使用导航控制器和 ECSlidingViewController

> ID：11285341
> 
> 赞同：2
> 
> 时间：2012-07-01T20:22:00.020
> 
> 标签：objective-c, xcode, ios5, segue

如果有人熟悉`ECSLidingViewController`，我真的很感激一些帮助。目前，我已将静态设置`UITableViewController`为我的`underleftviewcontroller`. 在其中，我有一个单元格，我想将它推到另一个单元格`UITableViewController`并使其成为新的`underleftviewcontroller`.

无论使用该`ECSlidingViewController`库，当我连接一个静态单元以推送到另一个视图时，它都不起作用。知道为什么吗？

我尝试将其嵌入`underleftviewcontroller`到 a`UINavigationController`中，然后使用 segue 将单元格与下一个 UIView 连接，但是每当我单击它时，它永远不会推动。

我找到了一个创建新的解决方案`underleftviewcontroller`，但它没有动画。

```
//This is what creates my new underLeftViewController.
self.slidingViewController.underLeftViewController  = [self.storyboard instantiateViewControllerWithIdentifier:@"eventsMenu"]; 
```

它连接到`didSelectRowAtIndexPath`方法中的单元格

如何制作工作`UINavigationController`或添加动画到此单元格到新视图的过渡（最好是向左滑动和向右滑动过渡）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:57:12.153

解决方案是让我的 underLeftViewController 成为导航控制器而不是菜单。

这样它会加载导航控制器，然后是菜单。

也很有帮助。如果您在导航控制器中有一个 UITableView 并且您不希望导航栏在主表上可见，请在您不希望工具栏的视图中实现此操作：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.navigationController setNavigationBarHidden:YES animated:YES];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [self.navigationController setNavigationBarHidden:NO animated:YES];
} 
```

# c++ - 使用异构数组存储不同的子类？

> ID：11285345
> 
> 赞同：0
> 
> 时间：2012-07-01T20:22:39.903
> 
> 标签：c++

我有一个文件，其中包含名称、颜色和一些关于它们的统计信息的列表。例如：

```
John black 10 15 
Adam black 19 18 
Jake brown 13 51 56 62 
Rich brown 13 09 98 84 
```

我希望能够根据颜色将这些名称、颜色和数字存储在它们各自的对象中。所以 John 和 Adam 将被存储在 Black 类中，Jake 和 Rich 将被存储在 Brown 类中。

由于他们是不同的类型，我如何将每个人存储在他们各自的对象中？

```
class Color{
  public:
    Color(string FIRST, string COLOR);
  protected:
    string FirstName;
    string ColorType;

};

class Black : public Color{
  public:
    Black(string FIRST, string COLOR, int A, int B); 
  private:
    string FirstName;
    string ColorType;
    int number1, number2;
};

class Brown : public Color{
  public:
    Brown(string FIRST, string COLOR, int A, int B, int C, int D); 
  private:
    string FirstName;
    string ColorType;
    int number1, number2, number3, number4;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T20:30:26.940

制作基类指针的容器：

```
std::vector<std::unique_ptr<Color>> colors; 
```

并插入分配的派生类：

```
colors.emplace_back(new Black("John", "Black", 10, 15)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:28:09.283

通常，您将拥有一个指向基类型的指针列表，并创建派生类型的实例。请参阅 Dave 的回答以了解如何使用 C++11 进行操作。对于旧版本的 C++，您通常会将 Color 析构函数设为虚拟并创建一个包装器来管理内存，或者可能使用 boost。

# iphone - 作为后台服务运行的标准 iPhone 应用程序，无论是否越狱

> ID：11285351
> 
> 赞同：-3
> 
> 时间：2012-07-01T20:23:41.237
> 
> 标签：iphone, ios

是否可以实现作为后台服务运行的 iphone 应用程序？还是需要越狱？从 iPhone UI 看来，当您按下主页按钮时，大多数应用程序都停止运行，除了音乐应用程序和潘多拉等。即使用户关闭应用程序 UI，它们仍然运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:24:49.590

是的，这是不可能的，正如您所说，您必须拥有越狱的 iPhone 才能做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:57:00.943

要每小时执行一项任务，您可以伪装成 voip 应用程序。为此，将“voip”属性添加到 Info.plist 的 UIBackgrounding 键。启动后，调用 [UIApplication setKeepAliveTimeout:3600 handler:^{ ... your code ... }]; 您的处理程序将每小时执行一次。

请参阅：http: [//developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html%23//apple_ref/doc/uid/TP40007072-CH7-SW12](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html%23//apple_ref/doc/uid/TP40007072-CH7-SW12)

# android - 将 layout_height 设置为 fill_parent 时，Android 视图消失

> ID：11285359
> 
> 赞同：0
> 
> 时间：2012-07-01T20:24:56.563
> 
> 标签：android, android-layout

我有列表项，我想在视图左侧添加一个作为项目全高的矩形，这是列表项 xml（对于奇怪的格式感到抱歉）：

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/list_item"
android:background="@drawable/rowselector"
android:layout_height="wrap_content"
android:layout_width="fill_parent"
android:paddingTop="5sp"
android:paddingBottom="5sp"
android:paddingLeft="10sp"
android:paddingRight="10sp">

<View
android:id="@+id/stop_color_shape"
android:background="@drawable/stop_color_shape"
android:layout_height="fill_parent"
android:layout_width="20dp"
android:layout_alignParentTop="true"
android:layout_alignParentLeft="true"
/>

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:text="Name"
    android:textStyle="bold"
    android:id="@+id/text"
    android:textColor="@color/text"
    android:textSize="18sp"
    android:layout_toLeftOf="@+id/star"
    android:layout_centerVertical="true"/>

<CheckBox
    android:focusable="false"
    android:layout_width="wrap_content"
    android:layout_alignParentRight="true"
    android:button="@drawable/btn_star"
    android:id="@+id/star"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"/> 
```

当视图的 (stop_color_shape)layout_height 设置为 20dp 时，它会显示，当它设置为 fill_parent 时，它不会

可绘制（stop_color_shape）是：

```
<shape
xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">

<solid
android:color="#FFFFFF"/>
<stroke
android:width="3dp"
android:color="#FFFFFF"/>
</shape> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:27:22.513

这是因为您`RelativeLayout`的高度设置为`wrap_content`。将其更改为`fill_parent`，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:32:01.307

要么使用 fillparent 要么 wrapcontent 以防万一，以避免混淆。并跟踪ui设计

# java - 存储和检索图像

> ID：11285363
> 
> 赞同：0
> 
> 时间：2012-07-01T20:25:35.697
> 
> 标签：java, mysql, image

> **可能重复：**
> [在数据库中存储图像 - 是还是不是？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

我正在为一个使用 JSF、MYSQL 的机构做一些项目。

有很多地方需要存储图像。70% 的应用程序是基于图像的。我在 SO 上阅读了将图像存储在 mysql 中的内容，但是我发现在 mysql 中存储图像是个坏主意，并且有一些替代方法。

我有三个选择

**选项1**：将图像存储在mysql中

**选项 2**：将图像存储在本地文件系统中

**选项 3**：将图像存储在任何托管网站（如 amazon s3）。

我不能使用选项 3，因为研究所不想通过互联网存储图像。他们想制作本地系统。

我正在考虑使用选项 2，但是我很好奇如果明天我的服务器崩溃了怎么办？任何人都可以删除服务器中的文件。（**安全问题**）

所以我留下的选项是选项1，将图像存储在mysql中。

只是好奇，在 MySQL 中存储图像有什么缺点吗？

我应该继续使用选项 1 来存储图像吗？我真的很担心。

* * *

每个人都应该阅读下面的精彩帖子。

## [数据库而不是文件系统中的巨大文件存储](http://akashkava.com/blog/127/huge-file-storage-in-database-instead-of-file-system/)

# x86-64 - 为什么 setjmp(3) 不保存 AMD64 上的所有寄存器？

> ID：11285365
> 
> 赞同：7
> 
> 时间：2012-07-01T20:25:42.340
> 
> 标签：x86-64, setjmp

我浏览了各种实现的源代码，`setjmp`并`longjmp`注意到并非所有 CPU 寄存器都保存在`jmp_buf`结构中。查看 AMD64 ABI 后，我注意到只保存了被调用者保存的寄存器。

我不明白仅保存一些寄存器时如何完全恢复功能状态。当然，在我稍后打电话之前，未保存的寄存器肯定已经被多次破坏了`longjmp`？

然而，一切都很完美，所以肯定有一些我不明白的地方。我希望有人可以对此有所了解。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T20:38:35.373

该`setjmp`函数与任何其他函数一样，因此可以假定它破坏了任何调用者保存的寄存器。因此，它不需要保存/恢复这些寄存器。

# javascript - 如何结合表单数据构建 JSON 数据

> ID：11285367
> 
> 赞同：0
> 
> 时间：2012-07-01T20:25:47.237
> 
> 标签：javascript, jquery, ajax, json

您好我需要在 JSON 对象中构建数据并通过 ajax 帖子作为字符串发送。

我需要按以下格式发送一些东西：

```
{
 "myRequest": {
     "myRequestType": "updateStatus",
     "fields": [
         {
             "item1": "data1",
             "item2": "data2",
             "item3": "data3",
             "formUpdateField": "data4"
         }
     ]
 }
} 
```

我有一个表单表，它有一个复选框来选择要发送更新的记录。基本上发送是更新记录的状态。

基于上述，我可以访问 item1、item2 和 item3 数据——这是非表单数据。我需要将此添加到 JSON 对象。我想我可以做到这一点。但我的问题是，我还需要将表单中的数据添加到这个 JSON 对象中。

我能够从表单中获取数据，但是如何将其添加到我正在构建的 JSON 对象中？

另一个问题是，您可以从表单表中选择多条记录

任何想法如何使用 JSON/jQuery 等来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:46:23.217

您可以尝试使用[此问题](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)`serializeObject`中的函数将表单数据作为对象检索。然后，您可以将非表单数据添加到该对象。

也许类似于以下内容：

```
var data = $('form').serializeObject();
data.item1 = 'data1';
data.item2 = 'data2';
data.item3 = 'data3';
myJson.myRequest.fields = [data]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:03:17.627

将您的对象构建为对象，然后将其字符串化。自己对 JSON 字符串进行字符串处理比稍后进行字符串化要困难得多。

如果您乐于只支持现代浏览器，您可以利用`JSON.stringify()`ECMA5 中的本机方法。如果没有，有很多第三方脚本可以做同样的事情。

试试这个：

**HTML**（简单形式）

```
<form id='myForm'>
    <input type='text' name='foo' />
    <input type='text' name='bar' />
    <input type='checkbox' name='foobar' />
    <input type='submit' value='go'>
</form> 
```

**JS**

```
$(function() {

    //initialise object
    $('#myForm').on('submit', function() {
        var data = {
            myRequest: {
                myRequestType: 'updateStatus',
                fields: [{
                    item1: 'data1',
                    item2: 'data2',
                    item3: 'data3',
                    formUpdatedField: 'date4'
                }]
            }
        };

            //iterate over form fields and add each one in to our data
        $(this).find('input:not([type=submit]), select, textarea').each(function() {
            data.myRequest.fields[0][$(this).attr('name')] = $(this).val();
        });

            //do the request
        $.ajax({url: 'some/url.php', method: 'post', data: JSON.stringify(data)}).done(function() {
            //on success...
        });
        return false;
    });
}); 
```

这将迭代地将字段及其值附加到您的对象，然后在将其作为 AJAX 请求的一部分发送时对其进行字符串化。

最后，你的`fields`定义不能只是一个对象，而不是一个纯粹为了容纳内部对象而存在的数组吗？似乎没有必要，但您的数据结构可能比您展示的更多。

# ruby - 奇怪的数组#each Ruby 行为

> ID：11285368
> 
> 赞同：0
> 
> 时间：2012-07-01T20:25:55.683
> 
> 标签：ruby

这个问题有点含糊，但我不确定为什么会发生这种情况：

我有以下代码：

```
p user.room.users.length
user.room.users.each {|usr| puts "b" }
user.room.users.each {|usr| puts "a"; usr.enter(Room[Config::entrance]) } 
```

输出：

```
5
b
b
b
b
b
a
a
a 
```

我还让 User#enter 计算它被调用的次数并返回`3`！我对这种行为完全感到困惑。我怀疑 User#enter 中的代码是原因，但如果有人认为它可能相关，我可以提供它（我不想不必要地混淆问题）。

* * *

### 编辑

如果它是相关的，我正在使用`ruby-1.9.3-p125`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T21:11:37.200

当您在迭代集合时更改集合时，通常会发生这种行为。因此，如果`usr.enter`修改`user.room.user`将解释您所看到的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T21:58:24.730

正如@sepp2k 所说，大概`usr.enter`是在修改`user.room.users`. 虽然我从未看过源代码，但`Array#each`似乎可以通过维护当前元素的内部索引并在每次迭代后递增该索引来工作（事实上，这是它唯一可行的合理方式*）*。

所以说你从 开始`[1,2,3]`，在第一次迭代中`#each`，你删除了第一个元素。对于第二次迭代，它将产生数组的第二个元素，但现在数组是`[2,3]`，所以第二个元素是`3`。所以你会错过一个元素。

# html - css容器内的段落格式

> ID：11285370
> 
> 赞同：1
> 
> 时间：2012-07-01T20:26:14.820
> 
> 标签：html, css

如果我有一个用于引用的 CSS 容器，但引用跨越多个段落，我如何定位格式以显示容器内的多个段落？例子：

```
#quotebox {
width: 80%;
border-top: 1px solid #242729;
padding-left: 10%;
padding-bottom: 2%;
} 
```

是我在 CSS 中用于引号的容器吗？然后我有一个多段的报价。现在我有这样的：

```
<p id="quotebox">“Lorem ipsum dolor sit amet ... ”&lt;/p> 
```

其中引用是几段。如果我做：

```
<p id="quotebox">

<p>paragraph 1</p>
<p>paragraph 2</p>

</p> 
```

格式被破坏了。有没有办法在这种 CSS 容器下显示多个段落？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:33:50.857

`<p>`中不允许使用标签`<p>`，因此浏览器只是将标记拆分为 4`<p>`个`#quotebox`div 代替

# css - 将html页面分成两行50%高度

> ID：11285371
> 
> 赞同：5
> 
> 时间：2012-07-01T20:26:18.030
> 
> 标签：css, html, height, row

我希望将 html 页面分成两行，每行 50%。为此，我制作了两个以 row1 和 row2 为特色的 div，并在 css 中设置了它们的 height:50%。第 1 行有 3 个 div，第 2 行有 2 个 div。我希望如果这些内部 div 足够大以容纳 50 个高度，那么滚动条应该出现在它们各自的行 div 中，但 row1 和 row2 应该只占据屏幕的 50%。

我的 HTML 内容是：

```
<div class="row" id="row1">
    <div class="dragbox" id="item1" >
        <h2 class="dragbox-h2">Handle 1</h2>
        <div class="dragbox-content" >
        Phasellus porttitor adipiscing lacus ac tempus. Vivamus gravida augue metus, eu cursus nisl. 
  </div>
    </div>
    <div class="dragbox" id="item2" >
        <h2 class="dragbox-h2">Handle 2</h2>
        <div class="dragbox-content" >
            Phasellus porttitor adipiscing lacus ac tempus. Vivamus gravida augue metus, eu cursus nisl. 
        </div>
    </div>
    <div class="dragbox" id="item3" >
        <h2 class="dragbox-h2">Handle 3</h2>
        <div class="dragbox-content" >
            Proin porttitor euismod condimentum. Integer suscipit nibh nec augue facilisis ut commodo nisi ornare. 
        </div>
    </div>
</div>
<div class="row" id="row2" >
    <div class="dragbox" id="item4" >
        <h2 class="dragbox-h2">Handle 4</h2>
        <div class="dragbox-content" >
            Nullam metus magna, tristique vel ultrices a, molestie quis dolor. Curabitur porta porta ullamcorper. 
        </div>
    </div>
    <div class="dragbox" id="item5" >
        <h2 class="dragbox-h2">Handle 5</h2>
        <div class="dragbox-content" >
            Nam rhoncus sodales libero, et facilisis nisi volutpat et. Nullam tellus eros, consequat eget tristique ultricies, rhoncus vitae magna. 
        </div>
    </div>
</div> 
```

CSS的片段：

```
.row{
height:50%;
background:#fff;
overflow-y:auto;
}

.row .dragbox{
margin:5px 2px  20px;
background:#fff;
border:1px solid #ddd;
} 
```

我如何确保如果内部标签的内容增加，那么 row-div 也会保持其 50% 的指定高度。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T20:49:05.993

您需要确保 row-div 上方的父节点自己占用 100%：

```
html, body{
    height: 100%;
} 
```

（百分比高度从其父级继承其基本高度。）

# xcode - Xcode“在范围内编辑所有内容”停止工作

> ID：11285372
> 
> 赞同：3
> 
> 时间：2012-07-01T20:26:27.457
> 
> 标签：xcode, editor

有什么地方可以打开和关闭这个功能吗？我用了很长时间，但现在它不再弹出了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-19T18:51:00.240

不幸的是，在 XCode 8.3 中，禁用烦人的突出显示也会禁用 Ctrl-Cmd-E 键盘快捷键（以及相应的编辑器菜单项）。这与 8.2 及更早版本不同，我花了很长时间才找到答案，所以我在这里发布答案，以防其他人来寻找解决方案。（您只需要在“首选项”->“文本编辑”窗格中选中“突出显示选定符号的实例”选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T21:21:46.293

在 XCode 4 或 XCode 5 上，尝试 Control+Cmd+E。小箭头不再出现在我面前，但快捷方式仍然有效。:)

# asp.net - 使用 DateTime 模板添加搜索表单

> ID：11285375
> 
> 赞同：0
> 
> 时间：2012-07-01T20:27:15.340
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

在我的 EditorTemplates 中，我有 DateTime.cshtml - 它可以在创建/编辑/更新视图中找到：

```
@model Nullable<System.DateTime> 

@if ( Model.HasValue ) { 
   @Html.TextBox( "" , String.Format( "{0:dd/MM/yyyy}" , Model.Value ) , new  { @class = "datepicker span2" } ) 
} 
else { 
   @Html.TextBox( "" , String.Format( "{0:dd/MM/yyyy}" , DateTime.Now ) , new { @class = "datepicker span2" } ) 
} 
```

创建搜索视图时，我还想使用日期时间选择器 - 当视图未链接到模型而只是纯 HTML 时，我将如何使用上面的代码对视图进行编码？

如果我只是在 Razor 标记中输入以下内容：

```
@using (Html.BeginForm())
{
    <p>
        Availability between: @Html.TextBox( "From" , String.Format( "{0:dd/MM/yyyy}") , new  { @class = "datepicker span2" } ) 
                         and: @Html.TextBox( "To" , String.Format( "{0:dd/MM/yyyy}") , new  { @class = "datepicker span2" } )
        <input type="submit" value="Search" /></p>
} 
```

我只是得到错误：

```
{"Index (zero based) must be greater than or equal to zero and less than the size of the argument list."} 
```

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:06:05.010

你没有`DateTime`在`String.Format`- 这就是你得到那个错误的原因，它需要一个参数，但你没有提供任何参数。尝试使用`DateTime.Now`

例如

```
@Html.TextBox( "From" , String.Format( "{0:dd/MM/yyyy}", DateTime.Now ), 
new  { @class = "datepicker span2" } ) 
```

或者，只需将两个`DateTime`属性添加到您的 ViewModel，并`EditorFor`在它们上使用帮助程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:05:13.827

不要`TextBox`在主视图中使用。如果您希望您的自定义编辑器模板呈现您应该使用`EditorFor`帮助器：

```
@using (Html.BeginForm())
{
    <p>
        Availability between: 
        @Html.EditorFor(x => x.From)
        and: 
        @Html.EditorFor(x => x.To)

        <input type="submit" value="Search" />
    </p>
} 
```

如果`From`和`To`属性的类型为`DateTime`，则 ASP.NET MVC 将自动呈现您的自定义编辑器模板 ( `~/Views/Shared/EditorTemplates/DateTime.cshtml`)。

# web-services - 我的测试自动化策略听起来很可笑吗？

> ID：11285380
> 
> 赞同：0
> 
> 时间：2012-07-01T20:27:27.150
> 
> 标签：web-services, testing, soap, automated-tests

我正在开发一个用于测试 Web 服务的自动化测试框架。Web 服务是 SOAP 并用 Java 实现（通过 Apache Axis2），但是，我们的测试是用 Python 实现的，并使用 suds 库向服务器发出请求。这些测试是测试场景的高级测试，例如备份用户的数据。

现在这个 Web 服务很复杂，因为某些方法需要传递许多不同类型的对象，并且经常需要调用其他方法来获取某些对象。例如，我们有一个备份用户的调用，该用户的 pre-reqs 如下所示：

1.  调用 getUser() 方法检索对象 User
2.  调用 getDataset() 方法检索对象 Dataset
3.  调用方法 getXService() 来检索对象 XService
4.  调用方法 doBackup(User, Dataset, XService) 开始备份

这只是我们的一个调用的一个简单示例，它在进行主要调用之前还有许多其他先决条件调用。由于这些场景需要在测试中经常执行，我想抽象一组调用以便执行上述备份，我只需要调用一个为我调用其他方法的方法。

我的问题是，我是否应该以面向对象的方式执行此操作，并且几乎创建映射到 Java 版本对象的 Python 类的一对一映射？所以我的测试框架将只包含类，所以我可以这样做：

```
# User, XService, and Dataset are classes that correspond with 
# types implemented in the SOAP web service
from lib import XService, Dataset 

class User():
  def __init__(self, **kwargs):
    self.id = kwargs.get('id', None)

  def create(self):
    soap_client.call('createClient', self.id)

  def backup(self):
    dataset = Dataset.get(1234)
    service = XService.getInstance() 
    soap_client.call('doBackup', self, dataset, service) 
```

所以我所要做的就是调用 backup() 而不是每次都发出 3 种不同的方法。

这样做的缺点是我必须为服务器上的每个类型创建一个对象。此外，测试端的对象可能会变得陈旧，因为它们不与服务器上的数据同步。

我的另一个想法是不要走面向对象的路线，而只使用诸如 backupUser() 或 restoreBackupToUser() 之类的方法创建一个模块，然后将它们提供给从服务器返回的实际数据对象。这种方法将解决陈旧数据问题，但也会创建难以维护的大量模块。

遇到此问题的任何人都可以对我的方法提供一些提示或批评。也许我想太多了，有更好的方法来测试 Web 服务方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:40:15.313

不久前，我不得不创建一个自动化测试套件来测试 Web 服务。我写了整个面向对象的东西，因为每个测试都有很多共同使用的方法。这在负面测试等方面也节省了很多时间。如果您有时间编写测试，这种方式将更容易维护，一旦您编写了所有要调用的初始方法，您将节省很多当您进行测试时，大部分时间将只是几个函数调用，几乎没有逻辑。这是我们所做的一个例子：

```
import suds, unittest, pexpect, re, os,time, sys, random
from random import randrange
from setauth import Authentication

####################################################################
#
#                 Add/Get Profile Function Tests
#
####################################################################

class TestAddGetProfile(unittest.TestCase):

    def setUp(self):
        project = testvars[0]
        media_address = testvars[5]
        mgmt_address = testvars[4]
        self.profile = testvars[7]

        # connects to WSDL file and stores location in variable 'client'
        self.client = testvars[15]
        self.client.options.location = media_address
        self.mgmtclient = testvars[14]
        self.mgmtclient.options.location = mgmt_address

        self.getProfileToken = self.client.factory.create('ns4:ReferenceToken')
        self.getProfileToken.value = self.profile

        self.createProfileToken = self.client.factory.create('ns4:ReferenceToken')
        self.createProfileToken.value = self.profile

        self.createProfileName = self.client.factory.create('ns4:Name')
        self.createProfileName.value = self.profile

        self.deleteProfileToken = self.client.factory.create('ns4:ReferenceToken')
        self.deleteProfileToken.value = self.profile

        self.auth = Authentication()
        self.auth.setAuth('Administrator', self.client, self.mgmtclient)
        self.auth.makeUsers(self.mgmtclient)

    def sudsCreateProfile(self):

        create_result = self.client.service.CreateProfile(self.createProfileName, self.createProfileToken)

    def tearDown(self):
        self.auth.deleteAllUsers(self.mgmtclient)
        self.client = None

class AdminCreateProfile(TestAddGetProfile):

    def runTest(self):
        self.auth.setAuth('Administrator', self.client, self.mgmtclient)
        try:
            self.sudsGetProfile()
            self.sudsDeleteProfile()
        except:
            pass
        try:
            self.sudsCreateProfile()
            self.assertTrue(True)
        except:
            self.assertFalse(True) 
```

我们这里有几个其他脚本用于身份验证和一个测试包装器来运行所有测试。但是你应该在这里得到大致的想法。

希望这有助于你的决定。

# sql - SQL 性能 MAX()

> ID：11285388
> 
> 赞同：18
> 
> 时间：2012-07-01T20:28:55.007
> 
> 标签：sql, sql-server, performance, tsql

刚收到一个小问题。尝试获取表的单个最大值时。哪一个更好？

```
SELECT MAX(id) FROM myTable WHERE (whatever) 
```

或者

```
SELECT TOP 1 id FROM myTable WHERE (whatever) ORDER BY id DESC 
```

我正在使用 Microsoft SQL Server 2012

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-01T20:35:03.643

没有区别，因为您可以通过检查执行计划来测试自己。如果`id`是聚集索引，您应该看到有序聚集索引扫描；如果它没有被索引，您仍然会看到表扫描或聚集索引扫描，但在任何一种情况下都不会对其进行排序。

如果您想从行中提取其他值，该`TOP 1`方法可能很有用，这比在子查询中提取最大值然后加入要容易。如果您想要该行中的其他值，您需要指定如何处理这两种情况下的关系。

话虽如此，但在某些情况下，计划可能会有所不同，因此根据列是否被索引以及是否单调增加来进行测试很重要。我创建了一个简单的表并插入了 50000 行：

```
CREATE TABLE dbo.x
(
  a INT, b INT, c INT, d INT, 
  e DATETIME, f DATETIME, g DATETIME, h DATETIME
);
CREATE UNIQUE CLUSTERED INDEX a ON dbo.x(a);
CREATE INDEX b ON dbo.x(b)
CREATE INDEX e ON dbo.x(e);
CREATE INDEX f ON dbo.x(f);

INSERT dbo.x(a, b, c, d, e, f, g, h)
SELECT 
  n.rn, -- ints monotonically increasing
  n.a,  -- ints in random order
  n.rn, 
  n.a, 
  DATEADD(DAY, n.rn/100, '20100101'), -- dates monotonically increasing
  DATEADD(DAY, -n.a % 1000, '20120101'),     -- dates in random order
  DATEADD(DAY, n.rn/100, '20100101'),
  DATEADD(DAY, -n.a % 1000, '20120101')
FROM
(
  SELECT TOP (50000) 
     (ABS(s1.[object_id]) % 10000) + 1, 
     rn = ROW_NUMBER() OVER (ORDER BY s2.[object_id])
  FROM sys.all_objects AS s1 
  CROSS JOIN sys.all_objects AS s2
) AS n(a,rn);
GO 
```

在我的系统上，这在 a/c 中创建了从 1 到 50000 的值，b/d 在 3 到 9994 之间，e/g 从 2010-01-01 到 2011-05-16，f/h 从 2009-04-28 到2012-01-01。

首先，让我们比较索引单调递增的整数列 a 和 c。a 有一个聚集索引， c 没有：

```
SELECT MAX(a) FROM dbo.x;
SELECT TOP (1) a FROM dbo.x ORDER BY a DESC;

SELECT MAX(c) FROM dbo.x;
SELECT TOP (1) c FROM dbo.x ORDER BY c DESC; 
```

结果：

![在此处输入图像描述](../Images/0d20401fde8eb71f45399e84430ae8b2.png)

第 4 个查询的最大问题是，与 不同`MAX`，它需要排序。这是 3 与 4 的对比：

![在此处输入图像描述](../Images/4f277c1c105c2c3b5061e6e6be23b493.png)

![在此处输入图像描述](../Images/86f15c333319e4a37351419257ac3188.png)

这将是所有这些查询变体中的一个常见问题：`MAX`针对未索引列将能够捎带聚集索引扫描并执行流聚合，同时`TOP 1`需要执行更昂贵的排序。

我进行了测试，并在测试 b+d、e+g 和 f+h 中看到了完全相同的结果。

因此，在我看来，除了生成更多符合标准的代码之外，使用依赖于基础表和索引（在您将代码投入生产后可能会改变），还有潜在的性能`MAX`优势`TOP 1`。所以我想说，如果没有进一步的信息，那`MAX`是更可取的。

（正如我之前所说`TOP 1`，如果您要拉额外的列，可能真的是您所追求的行为。如果那是您所追求的，您也需要测试`MAX`+`JOIN`方法。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T20:30:39.667

第一个的意图当然更清楚。

对于这个特定的查询不应该有显着的性能差异（它们实际上应该几乎相同，即使如果没有行，结果是不同的`myTable`）。除非您有充分的理由来调整查询（例如已证实的性能问题），否则请始终选择能显示代码意图的查询。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-01T20:31:24.880

所有称职的查询优化器都应该为两个查询生成具有相同性能的查询计划：如果正在优化的列上有索引，则两个查询都应该使用它；如果没有索引，两者都会产生全表扫描。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T14:44:34.310

> 虽然我怀疑 TOP 1 排序运算符在计划中的成本过高。我尝试了 TOP 1、TOP 100 和 > 和 TOP 101，尽管最后一个 > 需要对所有行进行排序，但它们都给了我相同的估计子树成本。——马丁·史密斯 7 月 2 日 6:53

无论您需要 1 行还是 100 行，优化器都必须在此示例中执行相同数量的工作，即从表中读取所有行（聚集索引扫描）。然后对所有这些行进行排序（排序操作），因为C列..最后只显示需要哪一个。

```
SELECT TOP (1) b FROM dbo.x ORDER BY b DESC
option(recompile); 
SELECT TOP (100) b FROM dbo.x ORDER BY b DESC
option(recompile); 
```

试试上面的代码，这里前 1 和前 100 显示差异成本，因为 b 列上有一个索引。因此，在这种情况下，您不需要读取所有行并对它们进行排序，但工作是转到最后一页指针。对于一行，读取索引最后一页上的最后一行。TFor 100 行找到最后一页的最后一行，然后开始向后扫描，直到获得 100 行。

# iphone - 在 Cocos2D 中放大像素艺术会导致模糊 - iPhone

> ID：11285390
> 
> 赞同：1
> 
> 时间：2012-07-01T20:29:12.213
> 
> 标签：iphone, cocos2d-iphone, scale, blur, ccsprite

当我使用 16x16 图像的 CCSprite 放大时，会出现很多模糊。

该图像是像素艺术，因此意味着像素化，但不会模糊。

我已经尝试`setAntiAliasTexParameters`在精灵的纹理上运行该方法，但它并没有改变任何东西。

这是代码：（mainSprite 是 CCSprite，slide1 是 CCTexture2D）

```
slide1 = [[CCTexture2D alloc] initWithImage:[UIImage imageNamed:@"slide1.png"]];
[slide1 setAntiAliasTexParameters];

[mainSprite setTexture:slide1]; 
```

谢谢，任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:45:49.457

一般来说，最好使用更高分辨率的图像和 SCALE DOWN。例如，如果您要使用一个图像，当它与它一样大时，它将是 32x32。然后使用 32x32 图像，当您需要 16x16 分辨率时，将其缩小到该分辨率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T20:37:32.690

您的图像太小而无法放大……就这么简单。如果您不想模糊，请制作更大的图像并使用它。

建议您在做某事时使用 1:1 比例的图像（除非它是可缩放的图像，如单色..或 2 种颜色，或一条线，或类似的东西）。如果您有一个图标并且想要放大它..忘记它..只需制作一个更大的图标并在必要时缩小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T02:30:28.680

你应该改用这个：

```
[slide1 setAliasTexParameters]; 
```

这将告诉您的精灵不要抗锯齿，保留像素化外观

（使用 cocos2d v2.0 -- 不确定这是否适用于以前的版本）

# facebook - 无法获取粉丝页面以检查用户是否喜欢此页面或未使用 fql

> ID：11285392
> 
> 赞同：0
> 
> 时间：2012-07-01T20:29:44.883
> 
> 标签：facebook, facebook-like, facebook-fql, facebook-apps, facebook-page

我只想知道用户是否喜欢页面，以下是我的代码：

```
 function checkPageLike($fbuid,$token){
    $fqlquery = "SELECT uid FROM page_fan WHERE page_id = ".$this->config->item('pageId')." and uid=".$fbuid;
    $res = "0";
    try{

        $ret_obj = $this->facebook->api(array('method' => 'fql.query',
                'query' => $fqlquery,
        ),'get',array('access_token' => $token));
        if(checkArray($ret_obj ) && $ret_obj [0]['uid']){
            $res = "1";
        }
    }catch(Exception $e){
        print_r($e);
    }
    return $res;

} 
```

因此，通过使用此代码，我可以检查我们的页面是否被该用户喜欢。它正在工作。但是其中一位 QA 做了一些不同的事情，可能是他第一次没有授予权限，然后他授予了权限，安装了应用程序。如果用户喜欢该页面，我们上面的代码无法获得。该用户删除了该应用。然后再次安装但同样的问题。他从不同的机器登录，但我们上面的代码仍然无法获取该用户是否喜欢页面。所以我想知道为什么会发生这样的问题？是应用权限的问题吗？用户设置？或者我们使用错误的方式来检查用户是否喜欢该页面？为什么 fql 无法判断该用户是否喜欢该页面？我们的页面是否在该用户的粉丝页面中？它对其他用户工作正常。

提前谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:59:32.103

这是我的笔记：

1.  您应该使用 Graph API 用户[`likes`](https://developers.facebook.com/docs/reference/api/user/#likes)连接而不是 fql：`/PROFILE_ID/likes/PAGE_ID`
2.  确保您有`user_likes`权限
3.  检查以上[答案](http://facebook.stackoverflow.com/questions/4970439/whats-method-for-checking-user-fan-of-a-page-in-graph-api/4971560#4971560)
4.  如果您正在尝试建立一个扇门，那么您甚至不需要用户授权，因为 Facebook 会在您登陆您的页面选项卡时向您发送用户的“粉丝”状态。[看这里](http://facebook.stackoverflow.com/questions/5329818/seamless-way-to-check-if-user-likes-page/5331541#5331541)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:52:44.977

确保您的`$fbuid`和`$token`正在获得有效值。此外，我们需要知道是否`$this->config->item('pageId')`包含要检查的正确 pageId。您可能想要编辑您的问题以包括其中的值以及如何获取它们。

您可以在此处遵循类似的示例。

[https://stackoverflow.com/a/10863558/1105497](https://stackoverflow.com/a/10863558/1105497)

# mongodb - 在mongodb中计算pagerank

> ID：11285393
> 
> 赞同：0
> 
> 时间：2012-07-01T20:29:47.703
> 
> 标签：mongodb, mapreduce, pagerank

我正在尝试在 mongodb 中使用 mapreduce 运行 pagerank。

我的文件是这种格式：

```
{
        "_id" : "u: 10000",
        "value" : [
                [
                        "u: 10000",
                        "s: 985272",
                        1
                ],
                [
                        "s: 985272",
                        "u: 10000",
                        1
                ],
                [
                        "u: 10000",
                        "s: 303770",
                        1
                ],
                [
                        "s: 303770",
                        "u: 10000",
                        1
                ]
        ]
} 
```

现在我认为第一步是按键收集链接。但是，我每个文档有几个出站链接。（这些都是双向的）。

这是我的 map 和 reduce 函数：

```
m = function () {
    for (var i = 0; i < this.value.length; i++){
        var out = {};
        out.out = this.value[i][1];
        out.weight = this.value[i][2];
        emit(this.value[i][0], [out]);
    }
}

r = function(key, values){
    var result = {
      value: [] 
    };
    values.forEach(function(val) {
    result.value.push({out: val.out, weight: val.weight});
    });
    return result;
} 
```

问题是我不确定 emit 是否会为每个文档产生多个排放。当我得到如下结果时：

```
{
        "_id" : "s: 1000082",
        "value" : [
                {
                        "out" : "u: 37317",
                        "weight" : 1
                }
        ]
} 
```

当我期望每个文档有多个项目时。

有人有想法么？帮助将不胜感激！

编辑：

我并不完全满意，例如这样的[事情是如何工作的](http://kylebanker.com/blog/2009/12/mongodb-map-reduce-basics)？reduce 结果看起来一点也不像 emit 输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T23:00:51.307

问题是您没有映射数组，但您的 reduce 试图推送到数组。

如果你想让每个键映射到一个“out”和“weight”对的数组，那么你需要发出一个包含它的数组，并且在你的reduce中你需要将数组连接在一起。

请记住，[reduce 函数返回的对象的结构必须与 map 函数发出的值的结构相同。](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-ReduceFunction)

这意味着当您的地图发出 (key, value) 时，“值”的结构必须与您的 reduce 函数返回的结构相同。

如果您将 map 函数更改为此，则该值是一个带有字段“value”的文档，它是一个文档数组，每个文档都有字段“out”和字段“weight”：

```
function () {
    for (var i = 0; i < this.value.length; i++) {
        key = this.value[i][0];
        value = {value:[{out:this.value[i][1], weight:this.value[i][2]}]};
        emit(key, value);
    }
} 
```

和你的reduce函数，它构造结果与你在上面发出的值具有相同的结构（因为它只是连接它为每个键传入的内容）：

```
function (key, values) {
    result = {value:[]};
    for (var i in values) {
        result.value = values[i].value.concat(result.value);
    }
    return result;
} 
```

然后你会得到你所期望的。

```
{
    "_id" : "s: 303770",
    "value" : {
        "value" : [
            {
                "out" : "u: 10000",
                "weight" : 1
            }
        ]
    }
}
{
    "_id" : "s: 985272",
    "value" : {
        "value" : [
            {
                "out" : "u: 10000",
                "weight" : 1
            }
        ]
    }
}
{
    "_id" : "u: 10000",
    "value" : {
        "value" : [
            {
                "out" : "s: 303770",
                "weight" : 1
            },
            {
                "out" : "s: 985272",
                "weight" : 1
            }
        ]
    }
} 
```

# colors - 有没有办法获得 ImageMagick 的 -fuzz 选项中使用的颜色范围？

> ID：11285397
> 
> 赞同：1
> 
> 时间：2012-07-01T20:30:13.757
> 
> 标签：colors, imagemagick

我正在尝试使用类似于 ImageMagick`-fuzz`选项中所做的颜色“距离”（或“容差”或“方差”）的图像搜索：[http ://www.imagemagick.org/Usage/color_basics/ #fuzz_distance](http://www.imagemagick.org/Usage/color_basics/#fuzz_distance)。

我希望得到的是来自单个初始像素**的一些 RGB 值的范围或数组，我可以用它来匹配数据库中的比较点。**

显然，正在发生的`-fuzz`是一些描述 RGB 立方体中的球体的欧几里得距离公式，但我不确定在哪里可以找到数学或如何使用 ImageMagick（或其他一些库）来实现这一点。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T12:28:47.467

如[MageMagick 论坛](http://www.imagemagick.org/discourse-server/viewtopic.php?p=66336#p66336)中所述，如果欧几里得距离低于 R ，则颜色在颜色`B`的模糊范围内：`R``A`

```
sqrt((B.r - A.r)^2 + (B.g - A.g)^2 + (B.b - A.b)^2) < R 
```

`r`,`g`并`b`代表颜色各自的红色、蓝色和绿色值。

如果你没有透明度，就是这样。如果确实需要考虑透明度，则必须先将颜色乘以它们各自的 Alpha 通道值，然后才能在公式中使用它们。

在 3 维 RGB 颜色空间中，某种颜色的模糊范围内的颜色确实形成了一个（半径为`R`）的球体。

要再次检查数据库中的点，您只需使用公式检查它们是否在球体内。

关于颜色范围：由于一个维度的“模糊”（=在模糊范围内:-)）颜色的范围取决于其他二维中的位置，因此您唯一可以生成的是围绕模糊球体的封闭立方体。这不会为您提供正确的颜色，但您可以使用它来拒绝位于立方体之外的所有颜色。这个立方体的范围是：

```
(A.r - R) <= B.r <= (A.r + R)
(A.g - R) <= B.g <= (A.g + R)
(A.b - R) <= B.b <= (A.b + R) 
```

**更新：**

[这是计算的代码参考](http://trac.imagemagick.org/browser/ImageMagick/trunk/magick/color.c?rev=3272#L1743)。它看起来有点复杂，但那是因为它还必须处理 CMYK 颜色。对于 RGB，它减少到上述情况。

# visual-studio-2008 - 在 Visual Studio 2008 上安装 Ado.net 实体框架

> ID：11285400
> 
> 赞同：0
> 
> 时间：2012-07-01T20:30:35.757
> 
> 标签：visual-studio-2008, ado.net

我有 Visual Studio 2008 专业版，但它没有 ado.net 实体数据模型的模板。

我尝试下载一个单独的文件，`Ado.net entity framework 3.5`但它无法完成安装，因为它是测试版。

有人可以建议如何查找/安装丢失的模板吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:43:48.403

Visual Studio [SP1](http://www.microsoft.com/en-us/download/details.aspx?id=10986)应安装此模板。你安装了[SP1](http://www.microsoft.com/en-us/download/details.aspx?id=10986)吗？

还要确保您的项目面向 .NET 3.5

# twitter-bootstrap - 多列下拉菜单

> ID：11285408
> 
> 赞同：27
> 
> 时间：2012-07-01T20:32:07.830
> 
> 标签：twitter-bootstrap

我有一个包含 30 多个项目的菜单，是否已经有一种方法可以让 Bootstrap 使用 3 列而不是一个非常高的列来显示菜单，或者这是否需要一些定制？

# javascript - 单击“提交按钮”后文本迅速消失

> ID：11285412
> 
> 赞同：7
> 
> 时间：2012-07-01T20:33:01.093
> 
> 标签：javascript

有问题。这是我的代码：

```
<html>

<body>
<form>
<p>13-7: <input id="in1" type="text"" /><input type="submit" onclick="check(6, 'in1', 'out1')" value="Tjek!"/></p>
<p id="out1"></p>
<p>20-7: <input id="in2" type="text"" /><input type="submit" onclick="check(13, 'in2', 'out2')" value="Tjek!" /></p>
<p id="out2"></p>

<script type="text/javascript">

function check(facit, input, output) {
    var answer, evaluation;
    answer = document.getElementById(input).value;
    evaluation = (answer == facit) ? "Correct" : "Wrong";
    document.getElementById(output).innerHTML = evaluation;
    return false;
}

</script>
</form>
</body>

</html> 
```

当我单击提交按钮时，“正确/错误”仅显示片刻。我希望它留在网站上，有什么建议吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-01T20:35:09.450

提交按钮正在提交您的表单（因此重新加载您的页面）。

将按钮更改为`type="button"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T20:34:47.777

您的按钮是提交按钮 ( `<input type="submit">`)，因此它们将提交表单并在每次单击时刷新页面。将您的按钮`<input type="button">`改为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T20:34:59.450

将 onclick 函数从：

```
onclick="check(13, 'in2', 'out2')" 
```

到：

```
onclick="return check(13, 'in2', 'out2')" 
```

或者，如果您不想提交表单，因为您有两个提交按钮，最好使用：

```
<input type="button" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T20:47:59.993

只需从此更改 onclick

```
onclick="check(6, 'in1', 'out1')" 
```

到

```
onclick="check(6, 'in1', 'out1'); return false;" 
```

对另一个也做同样的事情。

去掉`return false;`就`check`功能。

参考**[现场演示](http://jsfiddle.net/SivaCharan/QUdLP/1/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T20:35:00.667

表单正在提交并与原始页面一起返回。

你想让我做什么？

```
I dont want it returned with the original page .. I want it to say 'correct' og 'wrong' below the input 
```

如果您不想提交数据，请按照 minitech 的建议进行操作，将类型从提交更改为按钮。

如果要保存数据，则需要编写服务器端代码，然后创建填充了这些值的 html（在服务器端。）

# android - 从代码中调用 ActionBar 的向上按钮按下

> ID：11285417
> 
> 赞同：2
> 
> 时间：2012-07-01T20:34:04.330
> 
> 标签：android, android-actionbar, actionbarsherlock, android-testing

我正在编写一个启用了 ActionBar 的 Android 应用程序。就我而言，我使用 ActionBarSherlock 来提供兼容性，但我认为在这种情况下并不重要。

我的 Activity 中的 ActionBar 左侧显示了一个向上按钮。它在调用后出现`setHomeAsUpEnabled(true);`并导致 HomeActivity。

我想编写一个测试用例来检查按下向上按钮是否会导致 HomeActivity。我正在使用 Robotium 在 UI 端编写测试，因此我可以通过以下断言检查当前 Activity 的类`solo.assertCurrentActivity(HomeActivity.class);` 但我还没有找到一种方法来调用按下向上按钮的方法。

我已经尝试过`solo.clickOnView(solo.getView(android.R.id.home))`，`getInstrumentation().invokeMenuActionSync(solo.getCurrentActivity(), android.R.id.home, 0);`但它们都不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:57:23.627

我自己找到了一个解决方法，所以把它贴在这里以防万一有人需要它。这段代码对我有用：

```
public static void clickOnUpActionBarButton(Activity activity) {
        ActionMenuItem logoNavItem = new ActionMenuItem(activity, 0, android.R.id.home, 0, 0, "");
        ActionBarSherlockCompat absc = (ActionBarSherlockCompat) UiTestUtils.invokePrivateMethodWithoutParameters(
                SherlockFragmentActivity.class, "getSherlock", activity);
        absc.onMenuItemSelected(Window.FEATURE_OPTIONS_PANEL, logoNavItem);
    } 
```

`getSherlock()`首先需要通过调用SherlockFragmentActivity来获取 ActionBarSherlockCompat 对象。这个方法是受保护的，所以我使用反射 API 来调用它：

```
public static Object invokePrivateMethodWithoutParameters(Class<?> clazz, String methodName, Object receiver) {
        Method method = null;
        try {
            method = clazz.getDeclaredMethod(methodName, (Class<?>[]) null);
        } catch (NoSuchMethodException e) {
            Log.e(TAG, e.getClass().getName() + ": " + methodName);
        }

        if (method != null) {
            method.setAccessible(true);

            try {
                return method.invoke(receiver, (Object[]) null);
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                e.printStackTrace();
            }
        }

        return null;
    } 
```

您需要传递`solo.getCurrentActivity()`给我的`clickOnUpActionBarButton(Activity activity)`方法，然后将按下向上按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T12:35:35.007

您的方法对我来说非常有效，但不幸的是不适用于**最新的 sdk**版本！我收到一个错误，因为无法将 ActionBarSherlockNative 强制转换为 ActionBarSherlockCompat。

所以我做了以下简单的解决方法，应该适用于任何设备：

```
public static void clickOnUpActionBarButton(Solo solo) {
    if (Build.VERSION.SDK_INT < 15) {
        Activity activity = solo.getCurrentActivity();

        ActionMenuItem logoNavItem = new ActionMenuItem(activity, 0, android.R.id.home, 0, 0, "");
        ActionBarSherlockCompat absc = (ActionBarSherlockCompat) UiTestUtils.invokePrivateMethodWithoutParameters(
                SherlockFragmentActivity.class, "getSherlock", activity);
        absc.onMenuItemSelected(Window.FEATURE_OPTIONS_PANEL, logoNavItem);
    } else { // Working on latest sdk versions (above 4.0)
        solo.clickOnActionBarHomeButton();
    }
} 
```

在装有 Android 4.2.1 (API 17) 的 Galaxy Nexus 上对其进行了测试

# haskell - Yesod 持续类型错误

> ID：11285419
> 
> 赞同：4
> 
> 时间：2012-07-01T20:34:14.443
> 
> 标签：haskell, yesod

我正在尝试在 Yesod 应用程序中持久化。我的模型文件包含

```
Job
 issuer MemberId
 addDate UTCTime
 lastDate UTCTime
 title Text
 description Text
 deriving Show Read 
```

还有我的处理程序：

```
getProfileR :: Handler RepHtml
getProfileR = do
 jobs <- runDB $ selectList [] [Desc JobAddDate]
 defaultLayout $ do
  setTitle "title"
  $(widgetFile "profile") 
```

在 profile.hamlet 中，我循环遍历对象

```
$forall Job issuer addDate lastDate title description <- jobs
 <p>#{issuer} 
```

但是，我收到以下错误

```
Handler/Profile.hs:36:18:
    Couldn't match type `Entity' with `JobGeneric'
    In the return type of a call of `selectList'
    In the second argument of `($)', namely
      `selectList [] [Desc JobAddDate]'
    In a stmt of a 'do' block:
      jobs <- runDB $ selectList [] [Desc JobAddDate]

Handler/Profile.hs:36:18:
    Kind incompatibility when matching types:
      t0 :: (* -> *) -> * -> *
      JobGeneric Database.Persist.GenericSql.Raw.SqlPersist :: *
    In the return type of a call of `selectList'
    In the second argument of `($)', namely
      `selectList [] [Desc JobAddDate]'
    In a stmt of a 'do' block:
      jobs <- runDB $ selectList [] [Desc JobAddDate]
Build failure, pausing... 
```

其中第 36 行是 runDB 行。

作为 Haskell 的新手，我不知道出了什么问题。我正在关注Yesod Book。不幸的是，他们避开了 Scaffolded Site，所以我无法完全模仿他们的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T13:43:25.753

`selectList`不返回`[Job]`，它实际上`[Entity Job]`包含 the`Job`和它的`Key`*

有很多方法可以重构它来处理它，一种是：

```
$forall Entity jobId job <- jobs
    <p>#{jobIssuer job} 
```

在您的模板中。

或者，如果您愿意使用它，您可以`map entityVal`在任何时候使用转向。`[Entity Job] -> [Job]`

* `Entity`and`Key`类型实际上更复杂一些，但我发现以这种方式考虑它们更容易。如果您有兴趣，请阅读文档。

# google-maps - Google Places API 表现得很奇怪

> ID：11285420
> 
> 赞同：1
> 
> 时间：2012-07-01T20:34:17.933
> 
> 标签：google-maps, google-places-api

我即将在我的应用程序中加入一个 google 地方 API 搜索。在 API 仪表板中启用地点服务时，一切正常。我单击问号，然后立即尝试，并打开一个新选项卡，其中包含来自随机位置和我的 API 密钥的测试使用情况的 json 结果（位置对象的长数组）。

它使用的 URL：

`https://maps.googleapis.com/maps/api/place/search/json?location=-33.88471,151.218227&radius=100&sensor=true&key=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX`

奇怪的是，当我刷新这个页面时，我得到一个 REQUEST_DENIED 错误。不知道为什么。当我构建自己的请求 url 时，我也无法获得有效的请求响应。这里发生了什么？

![链接到“试试看！”](../Images/ee6ce5bf94077d0f064cccecbb03e1b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:47:39.720

好的，我发现了问题所在...您**需要**设置位置标头以匹配您在注册 API 密钥时提供的模式，否则请求将被拒绝。

# c# - Nhibernate 不更新对象 ID

> ID：11285421
> 
> 赞同：0
> 
> 时间：2012-07-01T20:34:30.683
> 
> 标签：c#, nhibernate, fluent-nhibernate

我对 NHibernate 有问题，有时它不会更新 ID 属性

用户地图类

```
public class SfGuardUserMap : ClassMap<User> {

    public SfGuardUserMap() {
        Table("sf_guard_user");
        LazyLoad();
        Id(x => x.Id).GeneratedBy.Identity().Column("id");
        Map(x => x.FirstName).Column("first_name");
        Map(x => x.LastName).Column("last_name");
        Map(x => x.EmailAddress).Column("email_address").Not.Nullable();
        Map(x => x.Sex).Column("sex").Not.Nullable();
        Map(x => x.Lang).Column("lang");
        Map(x => x.City).Column("city"); 
```

可执行代码

```
var user = new User
                       {
                           FirstName = usr.FirstName,
                           EmailAddress = usr.Email,
                           LastName = usr.LastName,
                           Sex = usr.Sex,
                           Birthdate = usr.Birthday,
                           IsActive = User.IS_ACTIVE_ACTIVE
                       };
        var t = (int)session.Save(user);
        session.Flush(); 
```

我遇到了问题，user.Id 始终为 0。但是当我重新启动 iis 时，我的问题就消失了。

我对其他班级也有同样的问题。这是我打电话时向数据库插入的任何属性`Save`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T21:40:39.863

根据您的描述，我不是 100% 确定问题是什么，但我相信我可以根据您发布的代码给出一些指示：

1.  您正在使用身份 ID 生成器；这意味着您允许您的数据库在您插入实体时生成它们的 ID。[不推荐](http://ayende.com/blog/3915/nhibernate-avoid-identity-generator-when-possible)这种方法。我建议使用 HiLo 作为您的 id 生成器。但是，如果您坚持使用身份，则应确保您的数据库已进行相应配置。

2.  建议[始终使用事务](https://stackoverflow.com/a/43567/537913)而不是显式调用`Flush`.

如果这些建议对您没有帮助，我建议您详细说明您的问题 - 您看到了什么（对象是否保存在数据库中？返回的 id 是否始终为 0？）

# php - imap - 获取附件

> ID：11285430
> 
> 赞同：12
> 
> 时间：2012-07-01T20:35:15.053
> 
> 标签：php, imap, apple-mail

如何从这封电子邮件中获取附件？

这封电子邮件是从苹果电脑发送的，电子邮件结构与其他任何东西都不一样（惊喜）..这里的性格部分比其他地方更深一维..

该脚本适用于所有其他电子邮件，其中包含文件的部分位于第一维中，但不适用于这个

`$part->dparameters[0]->value`返回文件名，但`strlen($data)`返回`0`

# imap 流

```
$structure = imap_fetchstructure($this->stream, $this->msgno);

if(isset($structure->parts)){
    print_r($structure->parts);
    $this->parse_parts($structure->parts);
}

function parse_parts($parts){
    foreach($parts as $section => $part){
        if(isset($part->parts)){

            // some mails have one extra dimension
            $this->parse_parts($part->parts);

        }
        elseif(isset($part->disposition)){
            if(in_array(strtolower($part->disposition), array('attachment','inline'))){
                $data = imap_fetchbody($this->stream, $this->msgno, $section+1);
                echo $part->dparameters[0]->value.' '.strlen($data)."\n";
            }
        }
    }
} 
```

# 打印_r

```
Array
(
    [0] => stdClass Object
        (
            [type] => 0
            [encoding] => 0
            [ifsubtype] => 1
            [subtype] => PLAIN
            [ifdescription] => 0
            [ifid] => 0
            [lines] => 15
            [bytes] => 173
            [ifdisposition] => 0
            [ifdparameters] => 0
            [ifparameters] => 1
            [parameters] => Array
                (
                    [0] => stdClass Object
                        (
                            [attribute] => CHARSET
                            [value] => us-ascii
                        )

                )

        )

    [1] => stdClass Object
        (
            [type] => 1
            [encoding] => 0
            [ifsubtype] => 1
            [subtype] => MIXED
            [ifdescription] => 0
            [ifid] => 0
            [bytes] => 23420
            [ifdisposition] => 0
            [ifdparameters] => 0
            [ifparameters] => 1
            [parameters] => Array
                (
                    [0] => stdClass Object
                        (
                            [attribute] => BOUNDARY
                            [value] => Apple-Mail=_800896E0-A9C9-456E-B063-79CED9DD4FD7
                        )

                )

            [parts] => Array
                (
                    [0] => stdClass Object
                        (
                            [type] => 0
                            [encoding] => 0
                            [ifsubtype] => 1
                            [subtype] => HTML
                            [ifdescription] => 0
                            [ifid] => 0
                            [bytes] => 136
                            [ifdisposition] => 0
                            [ifdparameters] => 0
                            [ifparameters] => 1
                            [parameters] => Array
                                (
                                    [0] => stdClass Object
                                        (
                                            [attribute] => CHARSET
                                            [value] => us-ascii
                                        )

                                )

                        )

                    [1] => stdClass Object
                        (
                            [type] => 3
                            [encoding] => 3
                            [ifsubtype] => 1
                            [subtype] => PDF
                            [ifdescription] => 0
                            [ifid] => 0
                            [bytes] => 17780
                            [ifdisposition] => 1
                            [disposition] => INLINE
                            [ifdparameters] => 1
                            [dparameters] => Array
                                (
                                    [0] => stdClass Object
                                        (
                                            [attribute] => FILENAME
                                            [value] => 057 - LPJ - Stik og labels.pdf
                                        )

                                )

                            [ifparameters] => 1
                            [parameters] => Array
                                (
                                    [0] => stdClass Object
                                        (
                                            [attribute] => NAME
                                            [value] => 057 - LPJ - Stik og labels.pdf
                                        )

                                )

                        )

                    [2] => stdClass Object
                        (
                            [type] => 0
                            [encoding] => 4
                            [ifsubtype] => 1
                            [subtype] => HTML
                            [ifdescription] => 0
                            [ifid] => 0
                            [lines] => 75
                            [bytes] => 4931
                            [ifdisposition] => 0
                            [ifdparameters] => 0
                            [ifparameters] => 1
                            [parameters] => Array
                                (
                                    [0] => stdClass Object
                                        (
                                            [attribute] => CHARSET
                                            [value] => us-ascii
                                        )

                                )

                        )

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T01:51:32.593

您没有为嵌套附件提供正确的部分编号。您需要在递归步骤中传入节号。

```
function parse_parts($parts, $parentsection = ""){
    foreach($parts as $subsection => $part){
        $section = $parentsection . ($subsection + 1);
        if(isset($part->parts)){

            // some mails have one extra dimension
            $this->parse_parts($part->parts, $section . "." );

        }
        elseif(isset($part->disposition)){
            if(in_array(strtolower($part->disposition), array('attachment','inline'))){
                $data = imap_fetchbody($this->stream, $this->msgno, $section );
                echo 'Getting section ' . $section;
                echo $part->dparameters[0]->value.' '.strlen($data)."\n";
            }
        }
    }
} 
```

（未经测试，但应该做正确的事情......）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-16T21:35:13.267

下一个代码显示收件箱中的目录和电子邮件

```
 $mailbox = imap_open ("{correo.servidor.com:993/imap/ssl/novalidate-cert}INBOX", "correo@usuario.com", "PASSWORD");

    if (!$mailbox){
        die('murio');
    }

    echo "<h1>Buzones</h1>\n";
    $carpetas = imap_listmailbox($mailbox, "{correo.patronato.unam.mx:993}", "*");

    if ($carpetas == false) {
        echo "Llamada fallida<br />\n";
    } else {
        foreach ($carpetas as $val) {
            echo $val . "<br />\n";
        }
    }

    echo "<h1>Cabeceras en INBOX</h1>\n";
    $cabeceras = imap_headers($mailbox);

    if ($cabeceras == false) {
        echo "Llamada fallida<br />\n";
    } else {
        foreach ($cabeceras as $val) {
            echo $val . "<br />\n";
        }
    }

    $numMessages = imap_num_msg($mailbox);
    for ($i = $numMessages; $i > 0; $i--) {
        $header = imap_header($mailbox, $i);

        $fromInfo = $header->from[0];
        $replyInfo = $header->reply_to[0];

        // print_r($header);

        $details = array(
            "fromAddr" => (isset($fromInfo->mailbox) && isset($fromInfo->host))
                ? $fromInfo->mailbox . "@" . $fromInfo->host : "",
            "fromName" => (isset($fromInfo->personal))
                ? $fromInfo->personal : "",
            "replyAddr" => (isset($replyInfo->mailbox) && isset($replyInfo->host))
                ? $replyInfo->mailbox . "@" . $replyInfo->host : "",
            "replyName" => (isset($replyTo->personal))
                ? $replyto->personal : "",
            "subject" => (isset($header->subject))
                ? $header->subject : "",
            "udate" => (isset($header->udate))
                ? $header->udate : "",
            "Unseen" => (isset($header->Unseen))
                ? $header->Unseen  : "-"
        );
        $uid = imap_uid($mailbox, $i);

        echo "<ul>";
        echo "<li><strong>From:</strong>" . $details["fromName"];
        echo " " . $details["fromAddr"] . "</li>";
        echo "<li><strong>Subject:</strong> " . $details["subject"] . "</li>";
        echo "<li><strong>Estatus:</strong> " . $details["Unseen"] . "</li>";
        echo '<li><a href="test_imap_attachment.php?folder=' . $folder . '&uid=' . $i . '">Read</a></li>';
        echo "</ul>";
    }

    imap_close($mailbox); 
```

显示附件文件的 test_imap_attachment.php 代码

```
function getAttachments($imap, $mailNum, $part, $partNum) {
    $attachments = array();

    if (isset($part->parts)) {
        foreach ($part->parts as $key => $subpart) {
            if($partNum != "") {
                $newPartNum = $partNum . "." . ($key + 1);
            }
            else {
                $newPartNum = ($key+1);
            }
            $result = getAttachments($imap, $mailNum, $subpart,
                $newPartNum);
            if (count($result) != 0) {
                 array_push($attachments, $result);
             }
        }
    }
    else if (isset($part->disposition)) {
        // print_r($part);
        if (strtoupper($part->disposition) == "ATTACHMENT") {
            $partStruct = imap_bodystruct($imap, $mailNum, $partNum);
            $attachmentDetails = array(
                "name"    => $part->dparameters[0]->value,
                "subtype" => $partStruct->subtype,
                "partNum" => $partNum,
                "enc"     => $partStruct->encoding
            );
            return $attachmentDetails;
        }
    }

    return $attachments;
}

$mailbox = imap_open ("{correo.servidor.com:993/imap/ssl/novalidate-cert}INBOX", "correo@usuario.com", "PASSWORD");

$uid = $_GET['uid'];

$mailStruct = imap_fetchstructure($mailbox, $uid);

$attachments = getAttachments($mailbox, $uid, $mailStruct, "");

echo "Attachments: ";
echo "<ul>";
foreach ($attachments as $attachment) {  
    echo '<li><a href="test_imap_download.php?func=' . $func . '&folder=' . $folder . '&uid=' . $uid .
        '&part=' . $attachment["partNum"] . '&enc=' . $attachment["enc"] . '">' .
        $attachment["name"] . "</a></li>";
}
echo "</ul>"; 
```

下一个代码将文件保存在同一服务器上：test_imap_download.php

```
function downloadAttachment($imap, $uid) {
    $structure = imap_fetchstructure($imap, $uid);
    $attachments = '';
    if(isset($structure->parts) && count($structure->parts)) {
        for($i=0; $i<count($structure->parts); $i++) {
            if(strtoupper($structure->parts[$i]->disposition) == 'ATTACHMENT') {

                $attachments[$i] = array(
                    'is_attachment' => false,
                    'filename' => '',
                    'name' => '',
                    'attachment' => '');

                if($structure->parts[$i]->ifdparameters) {
                    foreach($structure->parts[$i]->dparameters as $object) {
                        if(strtolower($object->attribute) == 'filename') {
                            $attachments[$i]['is_attachment'] = true;
                            $attachments[$i]['filename'] = $object->value;
                        }
                    }
                }

                if($structure->parts[$i]->ifparameters) {
                    foreach($structure->parts[$i]->parameters as $object) {
                        if(strtolower($object->attribute) == 'name') {
                            $attachments[$i]['is_attachment'] = true;
                            $attachments[$i]['name'] = $object->value;
                        }
                    }
                }

                if($attachments[$i]['is_attachment']) {
                    $attachments[$i]['attachment'] = imap_fetchbody($imap, $uid, $i+1);
                    if($structure->parts[$i]->encoding == 3) { // 3 = BASE64
                        $attachments[$i]['attachment'] = base64_decode($attachments[$i]['attachment']);
                    }elseif($structure->parts[$i]->encoding == 4) { // 4 = QUOTED-PRINTABLE
                        $attachments[$i]['attachment'] = quoted_printable_decode($attachments[$i]['attachment']);
                    }
                }

                file_put_contents('directorio/'.$attachments[$i]['filename'], $attachments[$i]['attachment']);

            }
        } 
    }
}   

$mailbox = imap_open ("{correo.servidor.com:993/imap/ssl/novalidate-cert}INBOX", "correo@usuario.com", "PASSWORD");

$uid        = $_GET["uid"];
$partNum    = $_GET["partNum"];

downloadAttachment($mailbox, $uid); 
```

我使用了此页面中的代码：

[http://www.sitepoint.com/exploring-phps-imap-library-2/](http://www.sitepoint.com/exploring-phps-imap-library-2/)

[在 PHP 中使用 IMAP 将附件下载到目录，随机工作](https://stackoverflow.com/questions/2649579/downloading-attachments-to-directory-with-imap-in-php-randomly-works)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T14:14:01.623

我不具体了解 Mac 电子邮件，但这里有一些代码，我通过每个部分查看它是否是“附件”并将文件保存在某处以便我以后可以调用它。

```
$body = imap_fetchstructure($box, $i);
$attachments = '';
$att = count($body->parts);
if($att >=2) {
for($a=0;$a<$att;$a++) {
if($body->parts[$a]->disposition == 'ATTACHMENT') {
$file = imap_base64(imap_fetchbody($box, $i, $a+1));
$string = genRandomString();
    if(!file_exists('/var/www/email_store/'.$_SESSION['site_user_id'])) {
        mkdir('/var/www/email_store/'.$_SESSION['site_user_id'].'/');   
    }
    $attachments .= $body->parts[$a]->dparameters[0]->value.'[#]'.$string.',';
    file_put_contents('/var/www/email_store/'.$_SESSION['site_user_id'].'/'.$string,$file);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-22T21:30:28.277

我从这里的其他用户那里获取了代码，并为自己制作了这个函数，它可以让我完美地了解电子邮件的结构。此函数的结果如下所示：

```
array (
    0 =>
        array (
            'section_num' => '1.1',
            'type' => 0,
            'subtype' => 'PLAIN',
            'size_bytes' => 128,
        ),
    1 =>
        array (
            'section_num' => '1.2.1',
            'type' => 0,
            'subtype' => 'HTML',
            'size_bytes' => 527,
        ),
    2 =>
        array (
            'section_num' => '1.2.2',
            'type' => 5,
            'subtype' => 'GIF',
            'disposition' => 'inline',
            'size_bytes' => 3304,
            'file_name' => 'logo_email.gif',
        ),
    3 =>
        array (
            'section_num' => '2',
            'type' => 3,
            'subtype' => 'VND.OPENXMLFORMATS-OFFICEDOCUMENT.SPREADSHEETML.SHEET',
            'disposition' => 'attachment',
            'size_bytes' => 14742,
            'file_name' => 'my_excel_table.xlsx',
        ),
) 
```

现在很容易遍历它并获取电子邮件的任何部分。例如，如果我想要那个 excel 文件，我在这里获取节号“2”：

```
$excelData = imap_fetchbody($imapConnection, $msgNumber, '2') 
```

最后是我的函数，它为我提供了很好的概述以及如何使用它的示例：

```
$imapConnection = imap_open(..........);
$msgs = imap_search($imapConnection, ........);
$msgStructure = imap_fetchstructure($imapConnection, $msgNumber);

$resultOverview = []; // here the result will be stored
analyzeParts($msgStructure->parts, $resultOverview);

function analyzeParts($parts, &$structOverview, $parent = ''){
    foreach ($parts as $sectionNum => $part) {
        $sectionName = $parent . ($sectionNum+1);
        if (isset($part->parts)){
            analyzeParts($part->parts, $structOverview, $sectionName.'.');
        } else {
            $partInfo = [
                'section_num' => $sectionName,
                'type' => $part->type,
                'subtype' => $part->subtype,
            ];
            if (isset($part->bytes)) $partInfo['size_bytes'] = $part->bytes;
            if (isset($part->disposition)) {
                $partInfo['disposition'] = $part->disposition;
                if (in_array($part->disposition, ['attachment', 'inline'])){
                    foreach ($part->parameters as $parameter) {
                        if ($parameter->attribute === 'name')
                            $partInfo['file_name'] = $parameter->value;
                    }
                }
            }
            $structOverview[] = $partInfo;
        }
    }
} 
```

# mysql - 删除一个表中的记录，该表存储另一个表的属性

> ID：11285436
> 
> 赞同：4
> 
> 时间：2012-07-01T20:36:06.893
> 
> 标签：mysql, database-design

我有一个数据库设计问题，我已经研究了一段时间，但无法得到正确的答案。假设我们有两个表，`house_schema`如下`house`所示：

```
house_schema {
      id big int,
      house_height int,
      house_width int,
      house_decoration vchar(1024),
      build_date  timestamp,
      primary key id,
}

house {
      id big int,
      owner vchar(255),
      price big int,
      house_schema_id big int,
      primary key id,
      foreign key fk_house_house_schema_id (`house_schema_id`) reference `house_schema`.`id`
} 
```

该`house_schema`表存储了 的一些物理属性`house`。在软件 UI 上，用户选择一个模式，然后单击“构建”按钮。房子建成并存放在`house`. 还有一些其他表格`house_schema`可以描述房屋应该如何建造。

在简单的设计中，外键似乎效果很好。但是，当构建器决定删除他们认为已过时的模式时，就会出现问题。已经有一些从模式构建的房屋，外键阻止它被删除。如果我们将外键更改为`DELETE ON CASCADE`，那么这些房屋就会丢失建造它的信息。

处理这个问题的最佳设计模式是什么？我能想象的是有一个重复的表`house_schema`，一旦房子建成，将行复制`house_schema`到重复的表中。

但是，这会导致数据库中有很多重复的表，因为我有多个类似的表`house_schema`。它似乎违反了数据库规范化规则。

有人有好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T20:45:48.450

如果您想保留用于建造房屋的模式的历史记录，典型的解决方案是在您的表上实施**软删除。**`house_schema`

而不是实际删除中的行，`house_schema`您将不得不

*   向表中添加一`Active`列
*   将此列设置`false`为架构过时时
*   调整您的应用程序以不显示非活动模式的

请注意，有很多关于软删除的材料，包括反对和支持。

*   [软删除是个好主意吗](https://stackoverflow.com/questions/2549839/are-soft-deletes-a-good-idea)
*   [软删除的问题](http://richarddingwall.name/2009/11/20/the-trouble-with-soft-delete/)
*   [软删除不好？](http://weblogs.asp.net/fbouma/archive/2009/02/19/soft-deletes-are-bad-m-kay.aspx)

*根据个人经验，我们在主应用程序中对可选项目（下拉列表）*使用软删除，到目前为止没有任何可提及的问题。

当一个项目过时时，它的价值需要在任何使用它的地方保留，但对于新文档，它不应该再出现在下拉列表中。除了软删除之外*，*我还必须找到更好的解决方案才能处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:47:08.573

有一些可能性：

*   您可以在 house_schema 中有一个“已删除”字段，您可以标记该字段以指示模式不再存在。这将意味着更改许多查询。

*   你可以有一个“不可删除”的默认模式，当一个被删除时，它的房屋将退回到该模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T20:53:02.947

作为一个简单的解决方案，您可以向 house_schema 添加一个“已删除”标志。这样你就可以保留历史条目。当向用户显示可用的 house_schema 条目时，过滤为未删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T21:29:44.170

可能添加了“deprecated_schema”，您只需将要删除的 house_schema 行复制到已弃用的持有部分。您需要一个字段来存储原始 house_schema ID 字段，以便您仍然可以访问 house 表中的正确条目。

然后，您可以从 house_schema 表中删除，并且仍然保留基于该模式对房屋的访问权。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T01:52:46.103

再补充一个观点，你有没有考虑过存储在 *house_schema* 中的细节实际上是*房子*的属性，应该这样存储？
这可以看作是过度标准化的情况。

# python - 删除包含特定字符串的行

> ID：11285438
> 
> 赞同：2
> 
> 时间：2012-07-01T20:36:33.567
> 
> 标签：python

我有一个脚本，我想用它从文件中删除包含特定 IP 地址的行。这是：

```
for line in fileinput.input(hostsFileLoc,inplace =1):
    line = line.strip()
    if not hostIP in line:
        print line 
```

这类作品，然而，有两件事我正在努力解决。

1.  此脚本将删除任何匹配项，因此在前面的示例中

    127.0.0.1
    127.0.0.11
    127.0.0.111
    192.168.0.1

    如果我使用“127.0.0.11”的输入运行它，它将同时删除“127.0.0.11”和“127.0.0.111”，这不是我想要的。

2.  该脚本也不处理 csv 文件。根据上面的列表，我需要从每行只是每行 IP 地址的文件中删除它，还需要一个 csv 文件，其中第一个字段是有问题的 IP 地址。我曾尝试`[\s\,]+`在 strip 函数中使用正则表达式，但这不能正常工作，并且在将剩余行重新打印回文件时会添加一个空行。

我知道这可能有很多问题要问，但我仍在努力寻找绕过 Python 奇迹的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T20:40:19.150

您只需要在测试中更加具体。对于第一个示例测试，整行（在一条带之后）等于 ip 地址（比它包含的更严格 - 从而解决您的第一个问题）。对于第二个，用逗号分隔每一行，并测试第一个元素是否等于您的 IP 地址字符串。

所以对于第一个文件类型：

```
for line in fileinput.input(hostsFileLoc,inplace =1):
    line = line.strip()
    if line != hostIP:
        sys.stdout.write(line) 
```

对于 csv 文件类型：

```
for line in fileinput.input(hostsFileLoc,inplace =1):
    elements = line.split(",")
    first = elements[0].strip()
    if first != hostIP:
        sys.stdout.write(line) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T20:42:17.993

如果你剥离字符串，你可以测试它们是否相等，而不是它是否包含输入。

```
for line in fileinput.input(hostsFileLoc,inplace =1):
    line = line.strip()
    # Only print if they are not the same
    if hostIP != line:
        print line 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T11:27:25.750

```
for line in fileinput.input(hostsFileLoc,inplace =1):
    line = line.strip()
    if hostIP!=line:
        print line 
```

对于 csv 文件：

```
for line in fileinput.input(hostsFileLoc,inplace =1):
    line = line.strip()
    if not line.startswith(hostIP+','):
        print line 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T20:52:57.623

我会使用正则表达式从行中提取 IP 地址，并根据您要查找的 IP 进行检查。

ValidIpAddressRegex = "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5 ]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0 -5])$"

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

对于这样一个简单的任务来说，这可能太多了，但否则，您将不得不单独处理每个边缘情况，这可能会产生肮脏和复杂的代码。特别是如果您将来必须添加其他过滤器（例如热名称）。

至于 CSV 文件，您为什么不简单地解析文件并删除您想要的任何条目？

[http://docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-01T20:57:57.320

那么我们不想要哪些行？那些包含 IP 地址的行！

这个的正则表达式是`r'127\.0\.0\.1'`. 我们必须对点 ( `\.`) 进行转义以使其成为文字点，因为点在正则表达式中具有特殊含义。

但我们仅指地址位于开头 ( `^`) 或在非数字 ( `\D`) 之后的行，以及地址位于行尾( ) 或非数字之后的那些行`$`。

这使得：`r'(^|\D)127\.0\.0\.1(\D|$)'`

```
import re
regexp = re.compile( r'(^|\D)' + re.escape( '127.0.0.1' ) + r'(\D|$)' )

for line in fileinput.input(hostsFileLoc,inplace =1):
    line = line.strip()
    if not regexp.search( line ):
        print line 
```

# objective-c - 循环遍历数组并附加到objective-C中的字符串

> ID：11285442
> 
> 赞同：3
> 
> 时间：2012-07-01T20:37:03.677
> 
> 标签：objective-c, arrays, loops, nsstring, append

我真的需要遍历一个数组，然后 if array[iterator] != 0 {

我需要将 array[iterator] 值，一个 Long 附加到一个 nsstring

我知道

```
 int G = 23456;

 NSString *B = [NSString stringWithFormat:@"lolol %d", G]; 
```

但我不知道如何*附加*到字符串。

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T20:46:12.287

正如 NSGod 所指出的，有几个方法`NSString`可以连接和返回字符串。但是，如果您计划多次追加，您可能想要使用[NSMutableString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableString_Class/Reference/Reference.html)，它针对这种情况进行了优化。

例如（基于您要解决的问题）：

```
NSMutableString *str = [NSMutableString string];

for (int iterator = 0; iterator < count; iterator++) {
    if (array[iterator] != 0) {
        [str appendFormat:@" %li", array[iterator]];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T20:42:33.420

以下是一种可能性：

```
NSString *existingString = @"existingString";

long G = 23456;

existingString = [existingString
       stringByAppendingFormat:@"lolol %d", G]; 
```

# chef-infra - 我的 Chef Server 服务器应该显示为一个节点吗？

> ID：11285454
> 
> 赞同：4
> 
> 时间：2012-07-01T20:38:50.103
> 
> 标签：chef-infra

在我自己的服务器上创建和设置我的 Chef 基础架构的过程中，我注意到我的服务器显示为一个节点。我的第一个问题：这是正常和正确的吗？

例如，server-001 是我的 Chef 服务器。其余的旨在成为受管节点：

```
$刀节点列表
  server-001.example.com
  server-002.example.com
  server-003.example.com
  server-004.example.com
  server-005.example.com

```

这对我来说似乎很奇怪并且可能不正确。我的第二个问题，如果这是正常的，为什么厨师服务器要保留对自身的引用作为节点？

问题#3：如果这是不正确的，关于我做了什么来实现这一点的任何想法？（一些背景知识：我遵循了 Chef Server 设置说明，然后引导了其他节点。我没有明确创建任何节点。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T22:43:51.700

你觉得这不正确怎么办？您将（可能）希望与 Chef 一起管理您的 Chef 服务器所在的节点，对吧？
它将自身作为节点保持引用，因为在运行服务器的机器上运行 chef-client 与从任何其他节点运行它没有什么不同。

# c# - 验证和执行公式？

> ID：11285460
> 
> 赞同：0
> 
> 时间：2012-07-01T20:40:06.713
> 
> 标签：c#, winforms, math, .net-4.0, formula

给定的给定字段是价格、货币和公式，我需要在其中阅读公式并替换价格和货币将进入的位置，例如：

```
(((Price+12,9)+((Price+12,9)*0,05)+(((Price+12,9)+((Price+12,9)*0,05))*0,029)+0,45)*Currency)+(2*Currency) 
```

因此，为了完成上述工作，我正在做：

```
string formula = iFormula.Text.Replace("Price", price.ToString("n2")).Replace("Currency", currency.ToString("n2")); 
```

由于我想确保价格和货币格式正确，因此在替换之前将它们解析为小数。

**现在这是我遇到问题的地方，我如何确认公式有效并得到它的结果？**

是否有评估和计算公式的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:44:15.980

开源库**Vici Core**（[Vici Project](http://viciproject.com)的一部分）包含一个表达式解析器，允许您在运行时解析和评估表达式。它是开源的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:43:54.520

`eval`.NET BCL中没有类似 Javascript 的功能。

但是，您可以在 C# 中创建一个包含所需函数的文件（这很简单），编译它（查看 Microsoft 的操作[指南](http://support.microsoft.com/kb/304655/en)以获取说明），运行获得的可执行文件并获得结果。编译错误意味着公式错误，您将从编译步骤中得到错误消息和位置。

# html - CSS HTML：水平标签

> ID：11285462
> 
> 赞同：1
> 
> 时间：2012-07-01T20:40:14.360
> 
> 标签：html, css, tabs

我有一些 HTML 和 CSS，它们主要是在做我想要实现的目标。小提琴在这里：http: [//jsfiddle.net/8YX7M/](http://jsfiddle.net/8YX7M/)。

我真正想要的是在选项卡上附加一个页面边框，以便选定的选项卡只是页面的扩展，而未选定的选项卡下面都有一条黑线，表明它们不是当前页面的扩展。另外，我想知道如何在一组选项卡下显示内容。您是使用框架之类的东西来加载选项卡选择的新内容，还是为每个可能的选项卡创建一个新页面并加载整个内容。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:20:00.133

[jsFiddle 演示](http://jsfiddle.net/roXon/8YX7M/1/)

添加：

```
.tablist li a{
    boder-bottom:1px solid #000;
}

.tablist li a.active{
    border-bottom:1px solid #fff;
    background:#fff;    
} 
```

`active`以及`a`HTML 元素的类：

```
<li><a href="#Dashboard" class="active" ><strong>Tutorialsphere</strong></a></li> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T20:46:42.687

尝试使用[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)并重新设置它的外观，以连接您免费获得的课程。

# php - 如何使 PHP 的“数组”cookie 看起来像 ASP.Net 的？

> ID：11285463
> 
> 赞同：0
> 
> 时间：2012-07-01T20:40:18.853
> 
> 标签：php, asp.net, cookies

你好，我正在用 PHP 编写一个脚本，我需要与 ASP.Net 兼容。

当您在 ASP.Net 中将 cookie 用作数组/字典时，它将生成如下所示的 cookie：

```
Set-Cookie: examplecookie=name=test&secret=blahh&expire=1341130948; path=/; HttpOnly 
```

然而，PHP 的内置 cookie/字典功能似乎为每个键/值保存单独的 cookie。

在我编写脚本将数组序列化为这样的东西之前......有没有内置的方法来做这样的事情？

# ios - 如何将 nsmutablearray 字符串卸载到文本框中

> ID：11285466
> 
> 赞同：1
> 
> 时间：2012-07-01T20:40:40.240
> 
> 标签：ios, textbox, nsmutablearray

我有一个包含购买摘要的字符串数组，每当加载该视图时，我都需要将该数组显示到文本框中。完成此操作的代码是什么样的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:41:45.573

你会用`componentsJoinedByString`

```
//arr is your curent array
NSString *str = [arr componentsJoinedByString:@" "];
textField.text = str; 
```

# android - 初学者 Android 开发：findViewById 问题

> ID：11285467
> 
> 赞同：6
> 
> 时间：2012-07-01T20:40:46.700
> 
> 标签：android, android-layout

运行我的基本应用程序时收到以下错误消息。该应用程序由一个名为 button1 的按钮和一个名为 topLeft 的 textView 组成。

```
07-01 15:33:02.754: D/AndroidRuntime(2334): Shutting down VM 07-01 15:33:02.754: W/dalvikvm(2334): threadid=1: thread exiting with
uncaught exception (group=0x40a13300) 07-01 15:33:02.984:
E/AndroidRuntime(2334): FATAL EXCEPTION: main 07-01 15:33:02.984:
E/AndroidRuntime(2334): java.lang.RuntimeException: Unable to instantiate activity
ComponentInfo{com.example.myfirstapp/com.example.myfirstapp.MainActivity}:
java.lang.NullPointerException 07-01 15:33:02.984:
E/AndroidRuntime(2334): at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
07-01 15:33:02.984: E/AndroidRuntime(2334): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-01 15:33:02.984: E/AndroidRuntime(2334): at android.app.ActivityThread.access$600(ActivityThread.java:130) 07-01
15:33:02.984: E/AndroidRuntime(2334): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-01 15:33:02.984: E/AndroidRuntime(2334): at android.os.Handler.dispatchMessage(Handler.java:99) 07-01
15:33:02.984: E/AndroidRuntime(2334): at android.os.Looper.loop(Looper.java:137) 07-01 15:33:02.984:
E/AndroidRuntime(2334): at android.app.ActivityThread.main(ActivityThread.java:4745) 07-01
15:33:02.984: E/AndroidRuntime(2334): at java.lang.reflect.Method.invokeNative(Native Method) 07-01
15:33:02.984: E/AndroidRuntime(2334): at java.lang.reflect.Method.invoke(Method.java:511) 07-01 15:33:02.984:
E/AndroidRuntime(2334): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-01 15:33:02.984: E/AndroidRuntime(2334): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 07-01
15:33:02.984: E/AndroidRuntime(2334): at dalvik.system.NativeStart.main(Native Method) 07-01 15:33:02.984:
E/AndroidRuntime(2334): Caused by: java.lang.NullPointerException
07-01 15:33:02.984: E/AndroidRuntime(2334): at android.app.Activity.findViewById(Activity.java:1825) 07-01
15:33:02.984: E/AndroidRuntime(2334): at com.example.myfirstapp.MainActivity.<init>(MainActivity.java:28) 07-01
15:33:02.984: E/AndroidRuntime(2334): at java.lang.Class.newInstanceImpl(Native Method) 07-01 15:33:02.984:
E/AndroidRuntime(2334): at java.lang.Class.newInstance(Class.java:1319) 07-01 15:33:02.984:
E/AndroidRuntime(2334): at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
07-01 15:33:02.984: E/AndroidRuntime(2334): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
07-01 15:33:02.984: E/AndroidRuntime(2334):     ... 11 more 
```

尝试使用**findViewById**时，出现此错误，参考第 28 行。

该程序如下所示：

```
package com.example.myfirstapp;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener{

    int a = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
      getMenuInflater().inflate(R.menu.activity_main, menu);
      return true;
    }

    Button button1 = (Button) findViewById(R.id.button1);
    TextView topLeft = (TextView) findViewById(R.id.textView2);
//  button1.setOnClickListener( this );

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }    

} 
```

这是什么意思？为什么我的代码在引用 R.java 文件时遇到问题？

```
R.java does have
    public static final class id {
        public static final int button1=0x7f080001;
        public static final int menu_settings=0x7f080003;
        public static final int textView1=0x7f080000;
        public static final int textView2=0x7f080002; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-01T20:49:31.670

您正在调用`findViewById`作为字段定义的一部分，此时布局不会膨胀（当您调用 时会发生这种情况`setContentView`）。`findViewById`没有找到视图，所以参考被设置为`null`.

**将您的`findViewById`电话移到`onCreate`, 调用后`setContentView`应该可以解决它。**

# java - 使用 Spring MVC 的嵌入式 Jetty

> ID：11285468
> 
> 赞同：2
> 
> 时间：2012-07-01T20:40:59.477
> 
> 标签：java, spring, maven, spring-mvc, jetty

我的 spring MVC 和 hibernate 应用程序有一个多 maven 模块。

我的布局如下：

```
/myapp-web
/myapp-web/src/main/java
/myapp-web/src/main/webapp
/myapp-web/src/main/webapp/web-inf
/myapp-web/src/main/webapp/web-inf/web.xml
/myapp-web/src/main/webapp/web-inf/web-context.xml (spring wiring code etc)
/myapp-web/src/main/webapp/web-inf/config/hibernate.cfg.xml
/myapp-web/src/main/webapp/assets/... (folder for css, javascript, images)
/myapp-web/src/main/webapp/views (folders with freemarker .ftl files) 
```

我的 pom.xml：

```
 ..
    <packaging>war</packaging>
    ..
    <dependency>
        <artifactId>jetty-server</artifactId>
        <groupId>org.eclipse.jetty</groupId>
        <version>${jetty-version}</version>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-servlet</artifactId>
        <version>${jetty-version}</version>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-webapp</artifactId>
        <version>${jetty-version}</version>
    </dependency> 
```

我有另一个嵌入式码头实例，我成功设置并且可以运行。我什至设置了一个启动/停止脚本，所以它可以在 Ubuntu 上运行。这不是一个 spring mvc 应用程序，所以它更容易，因为它没有 web.xml 文件等。 **我创建了一个 /assembly/assembly.xml 文件，我是否也需要为 spring mvc 应用程序这样做？**

然后我将此添加到我的 pom.xml 插件部分：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>${maven-assembly-plugin}</version>
            <configuration>
                <descriptors>
                    <descriptor>src/main/assembly/assembly.xml</descriptor>
                </descriptors>
            </configuration>
        </plugin>
        <!-- jar plugin -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>${maven-jar-plugin}</version>
            <configuration>
                <archive>

                </archive>
            </configuration>
        </plugin>
        <!-- jetty plugin -->
        <plugin>
            <!-- This plugin is needed for the servlet example -->
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>${jetty-version}</version>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>java</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <mainClass>com.myapp.HttpServer</mainClass>
            </configuration>
        </plugin> 
```

我需要为我的 spring mvc 应用程序做同样的事情吗？

我在 stackoverflow 上发现了一些[线程](https://stackoverflow.com/questions/2458440/executable-war-file-that-starts-jetty-without-maven)，但我无法理解 ant 部分，因为我没有使用 ant。我也不确定如何将其移植到 Maven 中：

令我惊讶的是，除了单个 servlet 示例之外，没有关于如何执行此操作的单一好的参考。

我需要为此创建一个 /assembly/assembly.xml 文件，还是为 Web 应用程序创建一个不同的文件？

有人可以逐步向我解释这个，以便我可以让它工作吗？请询问，我会发布我的项目所需的任何内容，但我认为我涵盖了我当前环境的所有内容，即：

*   使用多 Maven 设置
*   春天mvc
*   休眠
*   模板的freemarker
*   上面给出了文件夹结构

目标是能够部署这个war文件，创建启动/停止脚本，这样我就可以将它部署到我的服务器并启动/停止码头实例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T12:05:49.570

您不需要 assembly.xml 文件。

Jetty 是用来启动 webapp 的，springified 与否。因此，您必须在主类中创建一个 Jetty 服务器，添加您的 webapp 上下文并启动服务器。您可以通过 2 种方式解决您的问题： - 使用“通用”Java EE 服务器创建一个 web.xml，并将此描述符添加到您的 Jetty 服务器。- 使用 servlet 上下文编程在主类中加载您的 Spring 上下文： [https ://github.com/s4nchez/jetty-spring-mvc-jar](https://github.com/s4nchez/jetty-spring-mvc-jar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:30:30.387

assembly.xml 文件主要用于创建 zip 文件。对于简单的 web 存档，war 文件 maven 的正常结构应该足够了。

您要求提供多模块示例。我建议寻找[应用程序保险丝示例](http://appfuse.org/display/APF/AppFuse+QuickStart)。即使您不使用 app fuse 框架，它也具有良好的 maven 文件结构。我用它的快速启动创建了多模块休眠 spring mvc 应用程序。

这是项目的目录结构。

```
D:.
    core
        src
            main
                java
                resources
                    META-INF
    src
        site
    web
        src
            main
                java
                    com
                    mycompany
                        webapp
                            controller
                            filter
                            jsp
                            listener
                            search
                            spring
                            taglib
                            util
            resources
                META-INF
            webapp
                common
                decorators
                images
                scripts
                    calendar
                WEB-INF 
```

这是 web 项目 pom.xml 的相关部分。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>

<parent>
    <groupId>com.mycompany</groupId>
    <artifactId>myproject</artifactId>
    <version>1.0-SNAPSHOT</version>
    <relativePath>../pom.xml</relativePath>
</parent>

<artifactId>web</artifactId>
<packaging>war</packaging>

<build>
    <plugins>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.26</version>
            <configuration>
                <contextPath>/</contextPath>
                <scanIntervalSeconds>3</scanIntervalSeconds>
                <scanTargetPatterns>
                    <scanTargetPattern>
                        <directory>src/main/webapp/WEB-INF</directory>
                        <excludes>
                            <exclude>**/*.jsp</exclude>
                        </excludes>
                        <includes>
                            <include>**/*.properties</include>
                            <include>**/*.xml</include>
                        </includes>
                    </scanTargetPattern>
                </scanTargetPatterns>
            </configuration>
        </plugin>
    </plugins>
...
<dependencies>
    <dependency>
        <groupId>${project.parent.groupId}</groupId>
        <artifactId>core</artifactId>
        <version>${project.parent.version}</version>
    </dependency>
 ...
</dependencies>
</project> 
```

它依赖于核心项目。每当您编译多模块项目时，它都有所有必要的部分。但是，如果您只需要从 Web 项目目录中工作。您需要在 core 目录中执行 mvn install ，这样它就安装在您的本地存储库中并且您的 Web 项目可以使用它。如果您对核心项目进行了任何更改，您需要从主目录编译。否则，您可以照常使用 web 项目目录中的 maven。

如您所见，不需要 assembly.xml 文件。您应该将 assembly.xml 文件用于比 war 文件更复杂的结构，例如将包含的自定义安装程序结构；war 文件、帮助文件、Web 服务器可执行文件、将所有这些文件放在一起的安装程序文件。

我可以在主目录中使用 mvn package 命令来创建 war 文件。我也可以在 web 项目目录中使用 jetty:run 命令来运行 jetty 和测试 web 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:23:02.940

我有一个非常相似的设置，我认为您可以通过最小的更改来使用它。我正在运行一个带有 maven、spring、hibernate 和 freemarker 等的 webapp。我不需要任何 assembly.xml 或 ant 任务。

我的方法是将应用程序打包为 jar。然后这个 jar 有一个主类，它启动 jetty 并将自身部署为战争。有关更多详细信息，请参见此处：

[http://draconianoverlord.com/2009/01/10/war-less-dev-with-jetty.html](http://draconianoverlord.com/2009/01/10/war-less-dev-with-jetty.html)

这个类可以很容易地定制为使用端口号等参数。

要运行应用程序，我认为有两个不错的选择：

只需使用 Java 执行该类。这里的问题是正确设置类路径。为此，我使用 maven dependency:build-classpath 目标。这将输出可在您的 java 执行命令中使用的完整类路径。这样做的缺点是您需要在运行它的机器上配置 maven 和 maven repo。就我而言，这是可以接受的，而且这种方法效果很好。

或者您可以创建一个带有依赖项的可执行 jar。为此，我推荐 maven shade 插件。请参阅[http://maven.apache.org/plugins/maven-shade-plugin/examples/executable-jar.html](http://maven.apache.org/plugins/maven-shade-plugin/examples/executable-jar.html)这种方法的缺点是您最终会得到一个巨大的文件，因此类路径错误和依赖问题可能很难解决。此外，如果库依赖于 Meta-Inf 文件，它们有时会相互覆盖。Maven 阴影插件提供了解决此问题的方法，但仍然很难诊断问题。

这两种方法都应该允许您保留当前的文件夹结构和 web.xml 等，但如果您确实有任何问题 - 请在评论中告诉我，我可以扩展答案。

# javascript - 拖放到 droppable 时缩放/动画 jQuery Draggable

> ID：11285469
> 
> 赞同：1
> 
> 时间：2012-07-01T20:41:05.793
> 
> 标签：javascript, jquery, jquery-ui, draggable, droppable

我有一系列可拖动的图像和一些可放置的文件夹。我环顾网络，找不到任何插件/代码来创建一种效果，当可拖动对象被拖放到可放置对象上时，它会向下缩放到可放置区域并淡出。

基本上，类似于将图标拖到 OSX 中的文件夹中。我正在尝试向用户提供图像已添加到文件夹的视觉反馈。

我应该补充一点，我不想从屏幕上删除/移动可拖动的。我正在使用“克隆”来提供正在进行拖动的视觉反馈。

有什么建议/代码/想法吗？

更新

在查看 jquery 中的 clone() 时工作​​得更多。我想出了以下内容，但是克隆的位置似乎很随机。理想情况下，我希望在执行动画时将克隆放置在可放置对象上。

```
$('#photoscontainer').append($(r.photos[i].thumbnailhtml).draggable({
                                helper:"clone",
                                stop: function(event,ui){

                                    clone = ui.helper.clone();
                                    $(this).append(clone.addClass('inside-drop-zone').draggable({
                                            containment: '.drop-zone'
                                    }));
                                    clone.animate({
                                        opacity: 0,
                                        width: "0",
                                        height: "0"
                                    });
                                }

                            })
                        ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T20:52:00.857

您可以使用 jQuery 编写动画：

```
function dropped(elementId) {
    var jId = "#" + elementId;
    $(jId).animate({
        width:'-=50',
        height:'-=50'
    },5000);
    $(jId).fadeOut();
} 
```

我希望这样的东西是你正在寻找的。

# c# - 如何对两个文件执行某种 EXCEPT 操作？

> ID：11285477
> 
> 赞同：1
> 
> 时间：2012-07-01T20:42:02.300
> 
> 标签：c#, .net, multithreading, task-parallel-library

我有 2 个文本文件，其中包含用换行符分隔的单词。每个都**按**升序排序，每个大约 60MB。我需要获取第二个文件中不存在的所有单词（某种`except`操作）。2 个文件中的字数不一定相等。

我想依靠对 2 个文件进行排序这一事实来做一些事情，但并没有真正成功。我使用 TPL 来并行工作。我从某事开始，但不知道如何完成，如何并行工作。

我会很感激任何帮助。

```
static StreamReader _streamReader1 = new StreamReader("file1.txt");
static StreamReader _streamReader2 = new StreamReader("file2.txt");
static IEnumerable<string> GetWordsFromFile1()
{
    while (!_streamReader1.EndOfStream)
    {
        yield return _streamReader1.ReadLine();
    }
}
static List<string> exceptedWords = new List<string>();
static void ExceptWords(string word)
{
     //Here I believe I should read a word from 2nd file and somehow to compare to <word>
     //   and continue reading until word < word2?
}
static void Main(string[] args)
{
    var words = GetWordsFromFile1();
    Parallel.ForEach(words, ExceptWords);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:16:52.117

恕我直言，KISS 赢了这样的事情：

```
var wordsFromFile1 = File.ReadAllLines("file1.txt");
var wordsFromFile2 = File.ReadAllLines("file2.txt");
var file1ExceptFile2 = wordsFromFile1.Except(wordsFromFile2); 
```

如果您想要不区分大小写的比较：

```
var wordsFromFile1 = File.ReadAllLines("file1.txt");
var wordsFromFile2 = File.ReadAllLines("file2.txt");
var file1ExceptFile2 = wordsFromFile1.Except(wordsFromFile2, StringComparer.OrdinalIgnoreCase); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T21:22:33.963

也许这不能直接回答您的问题，但我看不到使用文件的简单方法`TPL`或依赖文件已排序的事实。我相信`LINQ`' 的`Except`方法来完成繁重的工作。由于文件不是天文数字，将文件加载到内存中应该不是问题。

```
static IEnumerable<string> GetWordsFromFile(StreamReader _streamReader)
{
    while (!_streamReader.EndOfStream)
    {
        yield return _streamReader.ReadLine();
    }
}

static void Main(string[] args)
{
    using (var _streamReader1 = new StreamReader("file1.txt"))
    {
        using (var _streamReader2 = new StreamReader("file2.txt"))
        {
            var words = GetWordsFromFile(_streamReader1)
                .Except(GetWordsFromFile(_streamReader2));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T22:27:58.463

虽然在测量简单案例并确定它“不够快”之前我不会使用这样的东西，但这是一种利用排序性质的脑死（而不是并行）方法。还有其他/更好的编写方式，但想法是您可以启动两个“流”，然后将它们向前移动并进行比较。

忽略边缘情况和开始/结束，您比较两个单词流中的每一个中的当前单词，并且“输入”一个更少（保留它），它们匹配（跳过它），或者稍后（移动'除了'向前流）。

你可以让当地人在身边，比如每个“流”中的当前单词等等，但恕我直言，你最好忽略这种方法，或者做 linq except 或 SortedSet.ExceptWith，至少在你有实际的个人资料测量之前表明你需要更复杂的东西。:)

```
void Main()
{
    var input = new[] { "abc", "bcd", "xyz", "zzz", };
    var except = new[] { "abc", "xyz", };

    ExceptSortedInputs(input, except).Dump();
}

// Define other methods and classes here
public static IEnumerable<string> ExceptSortedInputs(IEnumerable<string> inputSequence, IEnumerable<string> exceptSequence)
{
    Contract.Requires<ArgumentNullException>(inputSequence != null);
    Contract.Requires<ArgumentNullException>(exceptSequence != null);

    var exceptEnumerator = exceptSequence.GetEnumerator();
    Contract.Assert(exceptEnumerator.MoveNext(), "except sequence was empty, silly");

    var inputEnumerator = inputSequence.GetEnumerator();
    while (inputEnumerator.MoveNext())
    {
        // need to move the except sequence forward to ensure it's at or later than the current input word
        while (String.Compare(inputEnumerator.Current, exceptEnumerator.Current) == 1)
        {
            if (exceptEnumerator.MoveNext() == false)
            {
                // stupid optimization - since there are no more except matches, we can just return the rest of the input
                do
                {
                    yield return inputEnumerator.Current;
                }
                while (inputEnumerator.MoveNext());
                yield break;
            }
        }

        // when we get here, we know the current 'except' word is equal to or later than the input one, so we can just check equality
        if (inputEnumerator.Current != exceptEnumerator.Current)
        {
            yield return inputEnumerator.Current;
        }
    }
} 
```

一个使它看起来更像典型合并连接的交错性质的版本（并添加可能有助于清晰的局部变量）

```
void Main()
{
    var input = new[] { "abc", "bcd", "xyz", "zzz", };
    var except = new[] { "abc", "xyz", };

    ExceptSortedInputs(input, except).Dump();
}

// Define other methods and classes here
public static IEnumerable<string> ExceptSortedInputs(IEnumerable<string> inputSequence, IEnumerable<string> exceptSequence)
{
    var exceptEnumerator = exceptSequence.GetEnumerator();
    var exceptStillHasElements = exceptEnumerator.MoveNext();

    var inputEnumerator = inputSequence.GetEnumerator();
    var inputStillHasElements = inputEnumerator.MoveNext();

    while (inputStillHasElements)
    {
        if (exceptStillHasElements == false)
        {
            // since we exhausted the except sequence, we know we can safely return any input elements
            yield return inputEnumerator.Current;
            inputStillHasElements = inputEnumerator.MoveNext();
            continue;
        }

        // need to compare to see which operation to perform
        switch (String.Compare(inputEnumerator.Current, exceptEnumerator.Current))
        {
            case -1:
                // except sequence is already later, so we can safely return this
                yield return inputEnumerator.Current;
                inputStillHasElements = inputEnumerator.MoveNext();
                break;

            case 0:
                // except sequence has a match, so we can safely skip this
                inputStillHasElements = inputEnumerator.MoveNext();
                break;

            case 1:
                // except sequence is behind - we need to move it forward
                exceptStillHasElements = exceptEnumerator.MoveNext();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T20:44:12.197

您正在寻找的是所谓的**合并联接**。您可以以稍微不同的形式使用此算法来计算以下任何一项：

*   内部联接
*   外连接
*   除了
*   相交
*   联盟
*   联合所有

当然还有其他人。我想您在搜索该特定名称时会发现很多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T07:47:00.067

我看到发布的答案，并想“我想知道不同的方法如何比较？”

反正我下载了2个字典文件，写了时序代码，把贴出来的代码粘贴到vs2010中。

输出给出：

```
> ManningsBaseCase1:   ElapsedTime: 0.1973, numOfIterations: 64
> ManningsBaseCase2:   ElapsedTime: 0.2036, numOfIterations: 64
> KevinsLINQ1:         ElapsedTime: 0.1803, numOfIterations: 64
> KevinsLINQ2:         ElapsedTime: 0.1773, numOfIterations: 64
> ManningsOldMerge:    ElapsedTime: 0.0797, numOfIterations: 128
> ManningsCleanMerge:  ElapsedTime: 0.0800, numOfIterations: 256 
```

每个人的代码都运行了足够多的迭代以占用 10 秒以上，然后取每次迭代的平均值。

结果可能略有偏差——但我不想将空 For 循环的长度计时 128 次迭代以减去循环开销（留给读者作为练习）。

该代码还验证了每种方法都给出了相同的解决方案。

这是代码：

```
class Program
{
    private static readonly string filename1 = "DictoFile1.txt";
    private static readonly string filename2 = "DictoFile2.txt";
    private static readonly int numOfTests = 6;
    private static readonly int MinTimingVal = 1000;

    private static string[] testNames = new string[] {            
        "ManningsBaseCase1:   ",
        "ManningsBaseCase2:   ",
        "KevinsLINQ1:         ",
        "KevinsLINQ2:         ",
        "ManningsOldMerge:    ",
        "ManningsCleanMerge:  "
        };

    private static string[] prev;
    private static string[] next;

    public static void Main(string[] args)
    {
        Console.WriteLine("Starting tests...");
        Debug.WriteLine("Starting tests...");

        Console.WriteLine("");
        Debug.WriteLine("");

        Action[] actionArray = new Action[numOfTests];

        actionArray[0] = ManningsBaseCase1;
        actionArray[1] = ManningsBaseCase2;
        actionArray[2] = KevinsLINQ1;
        actionArray[3] = KevinsLINQ2;
        actionArray[4] = ManningsOldInterleaved;
        actionArray[5] = ManningsCleanInterleaved;

        for( int i = 0; i < actionArray.Length; i++ )
        {
            Console.Write(testNames[i]);
            Debug.Write(testNames[i]);

            Action a = actionArray[i];
            DoTiming(a, i);

            if (i > 0)
            {
                if (!ValidateLists())
                {
                    Console.WriteLine(" --- Validation had an error.");
                    Debug.WriteLine(" --- Validation had an error.");
                }
            }

            prev = next;
        }

        Console.WriteLine("");
        Debug.WriteLine("");

        Console.WriteLine("Tests complete.");
        Debug.WriteLine("Tests complete.");

        Console.WriteLine("Press Enter to Close Console...");
        Debug.WriteLine("Press Enter to Close Console...");

        Console.ReadLine();
    }

    private static bool ValidateLists()
    {
        if (prev == null) return false;
        if (next == null) return false;
        if (prev.Length != next.Length) return false;

        for (int i = 0; i < prev.Length; i++)
        {
            if (prev[i] != next[i]) return false;
        }

        return true;
    }

    private static void DoTiming( Action a, int num )
    {
        a.Invoke();

        Stopwatch watch = new Stopwatch();
        Stopwatch loopWatch = new Stopwatch();

        bool shouldRetry = false;

        int numOfIterations = 2;

        do
        {
            watch.Start();

            for (int i = 0; i < numOfIterations; i++)
            {
                a.Invoke();
            }

            watch.Stop();

            shouldRetry = false;

            if (watch.ElapsedMilliseconds < MinTimingVal) //if the time was less than the minimum, increase load and re-time.
            {
                shouldRetry = true;
                numOfIterations *= 2;
                watch.Reset();
            }

        } while ( shouldRetry );

        long totalTime = watch.ElapsedMilliseconds;

        double avgTime = ((double)totalTime) / (double)numOfIterations;

        Console.WriteLine("ElapsedTime: {0:N4}, numOfIterations: " + numOfIterations, avgTime/1000.00);
        Debug.WriteLine("ElapsedTime: {0:N4}, numOfIterations: " + numOfIterations, avgTime / 1000.00);
    }

    private static void ManningsBaseCase1()
    {
        string[] wordsFromFile1 = File.ReadAllLines( filename1 );
        string[] wordsFromFile2 = File.ReadAllLines( filename2 );
        IEnumerable<string> file1ExceptFile2 = wordsFromFile1.Except(wordsFromFile2);
        string[] asArray = file1ExceptFile2.ToArray();
        next = asArray;
    }

    private static void ManningsBaseCase2()
    {
        string[] wordsFromFile1 = File.ReadAllLines( filename1 );
        string[] wordsFromFile2 = File.ReadAllLines( filename2 );
        IEnumerable<string> file1ExceptFile2 = wordsFromFile1.Except(wordsFromFile2, StringComparer.OrdinalIgnoreCase);
        string[] asArray = file1ExceptFile2.ToArray();
        next = asArray;
    }

    private static IEnumerable<string> GetWordsFromFile(StreamReader _streamReader)
    {
        while (!_streamReader.EndOfStream)
        {
            yield return _streamReader.ReadLine();
        }
    }

    private static void KevinsLINQ1()
    {
        using (StreamReader _streamReader1 = new StreamReader(filename1))
        {
            using (StreamReader _streamReader2 = new StreamReader(filename2))
            {
               IEnumerable<string> words = GetWordsFromFile(_streamReader1)
                    .Except(GetWordsFromFile(_streamReader2));
               string[] asArray = words.ToArray();
               next = asArray;
            }
        }
    }

    private static void KevinsLINQ2()
    {
        using (StreamReader _streamReader1 = new StreamReader(filename1))
        {
            using (StreamReader _streamReader2 = new StreamReader(filename2))
            {
                IEnumerable<string> words = GetWordsFromFile(_streamReader1)
                    .Except(GetWordsFromFile(_streamReader2).AsParallel());
                string[] asArray = words.ToArray();
                next = asArray;
            }
        }
    }

    // Define other methods and classes here
    public static IEnumerable<string> ExceptSortedInputsOld(IEnumerable<string> inputSequence, IEnumerable<string> exceptSequence)
    {
        IEnumerator<string> exceptEnumerator = exceptSequence.GetEnumerator();

        IEnumerator<string> inputEnumerator = inputSequence.GetEnumerator();
        while (inputEnumerator.MoveNext())
        {
            // need to move the except sequence forward to ensure it's at or later than the current input word
            while (String.Compare(inputEnumerator.Current, exceptEnumerator.Current) == 1)
            {
                if (exceptEnumerator.MoveNext() == false)
                {
                    // stupid optimization - since there are no more except matches, we can just return the rest of the input
                    do
                    {
                        yield return inputEnumerator.Current;
                    }
                    while (inputEnumerator.MoveNext());
                    yield break;
                }
            }

            // when we get here, we know the current 'except' word is equal to or later than the input one, so we can just check equality
            if (inputEnumerator.Current != exceptEnumerator.Current)
            {
                yield return inputEnumerator.Current;
            }
        }
    }

    private static void ManningsOldInterleaved()
    {
        IEnumerable<string> wordsFromFile1 = File.ReadLines(filename1);
        IEnumerable<string> wordsFromFile2 = File.ReadLines(filename2);
        IEnumerable<string> file1ExceptFile2 = ExceptSortedInputsOld(wordsFromFile1, wordsFromFile2);

        string[] asArray = file1ExceptFile2.ToArray();
        next = asArray;
    }

    private static IEnumerable<string> ExceptSortedInputsClean(IEnumerable<string> inputSequence, IEnumerable<string> exceptSequence)
    {
        IEnumerator<string> exceptEnumerator = exceptSequence.GetEnumerator();
        bool exceptStillHasElements = exceptEnumerator.MoveNext();

        IEnumerator<string> inputEnumerator = inputSequence.GetEnumerator();
        bool inputStillHasElements = inputEnumerator.MoveNext();

        while (inputStillHasElements)
        {
            if (exceptStillHasElements == false)
            {
                // since we exhausted the except sequence, we know we can safely return any input elements
                yield return inputEnumerator.Current;
                inputStillHasElements = inputEnumerator.MoveNext();
                continue;
            }

            // need to compare to see which operation to perform
            switch (String.Compare(inputEnumerator.Current, exceptEnumerator.Current))
            {
                case -1:
                    // except sequence is already later, so we can safely return this
                    yield return inputEnumerator.Current;
                    inputStillHasElements = inputEnumerator.MoveNext();
                    break;

                case 0:
                    // except sequence has a match, so we can safely skip this
                    inputEnumerator.MoveNext();
                    break;

                case 1:
                    // except sequence is behind - we need to move it forward
                    exceptStillHasElements = exceptEnumerator.MoveNext();
                    break;
            }
        }
    }

    private static void ManningsCleanInterleaved()
    {
        IEnumerable<string> wordsFromFile1 = File.ReadLines(filename1);
        IEnumerable<string> wordsFromFile2 = File.ReadLines(filename2);
        IEnumerable<string> file1ExceptFile2 = ExceptSortedInputsClean(wordsFromFile1, wordsFromFile2);

        string[] asArray = file1ExceptFile2.ToArray();
        next = asArray;
    }

} 
```

只需复制并粘贴到 VS2010 .Net 4.0 中，添加 txt 文件和使用，它应该可以工作。

注意：我将 MinTimingVal 改回了 1 秒，而不是 10 秒。

因此，无论如何，Manning 的 Merge 方法比其他方法高出 2 倍。

干得好曼宁。

话虽如此，我仍然认为可以通过使用 FileStream 类来并行化文件输入。在同一个文件上创建两个不同的 FileStream，让 1 从开头开始，让另一个 Seek() 或将其 .Position 设置为文件中间并从那里读取。

如果我能解决这个问题，我可能会尝试一下，看看并行化 I/O 操作是否真的能提高速度。

# jquery - 部分表单的rails 3远程表单ajax

> ID：11285481
> 
> 赞同：1
> 
> 时间：2012-07-01T20:42:34.847
> 
> 标签：jquery, ajax, ruby-on-rails-3, forms

我的 rails 3 应用程序中有一个搜索表单。此表单有一些下拉菜单，用于设置不同的搜索条件。然后，表单会根据选择的内容搜索名为“item”的模型。这会导致创建和分页的项目列表。这是我使用的原始表单标签：

```
<%= form_tag("", :method => "post") do %> 
```

然后我想将一个“ajax”侦听器附加到一个下拉菜单（以影响另一个下拉菜单），我仍然想使用没有 ajax 的 POST 提交表单的其余部分（用于“正常”搜索）。ajax 部分仅用于显示不同的搜索条件。我试过这个表单标签：

```
<%= form_for(:itemsbylocation, :remote => true) do |f| %> 
```

不幸的是，这破坏了表单中的某些内容......我无法再使用 POST 提交它。虽然它触发了一个简单的 javascript（来自 js 模板），但它只会发出警报。

所以.. 该表单最初是一个使用 POST 的简单表单，没有 ajax，而且效果很好。然后我想要 ajax 用于表单的一小部分，只是一个或两个下拉列表，所以我尝试使用“远程”的另一种类型的表单。我仍然想主要搜索（项目）以使用 POST（无 Ajax）....在这种情况下有人有任何提示吗？提前致谢！

**编辑**

我决定绕过rails ajax“远程”方式为我的下拉表单，即我不使用“远程”，我什至不使用表单。这样做可能会有一些缺点......比如安全问题？但它对我有用。我刚刚将这个 javascript（监听器）代码（见下文）添加到通用 javascript 中。我添加了一个新的控制器操作（categories/category_changed）、一个路由和一个 js 模板。在 javascript 视图中，我可以根据需要操作下拉菜单。...

```
 $("#type").change(function(){
    var catValue = $(this).val();       
    var formaction = "/categories/category_changed/"+catValue;

    args = "id="+catValue;
    $.ajax({
    type: "GET",
    url: formaction,
    data: args,
    dataType: "script"
    }) 
}); 
```

...

**编辑结束**

一些代码...

部分：

```
 <%= form_for(:itemsbylocation, :remote => true) do |f| %>
    <label class="left search" for="search-inp">
                <%= f.text_field :searchstr %>
            </label>
      <select class="custom" id="type" name="cat">
          <option value=''>Choose category</option>
      <% @super_categories.each do |supercat| %>
              <option class="optgroup"><%= supercat.name %></option> 
          <% supercat.category.each do |cat| %>
                 <option <%= highlight_if_selected params[:cat], cat.id %> value='<%= cat.id %>'><%= cat.name %></option>
              <% end %>
       <% end %>            
    </select>

    <select name="loc" class="custom">
      <option value=''>Choose location</option>         
            <% @locations.each do |location| %>
                            <option <%= highlight_if_selected @selected_location, location.id %>
                            value='<%= location.id
                            %>'><%= location.name %></option>              
                           <% end %>
    </select>
            <div class="clr h-small"></div>
            <div id="buttonset">
                <input type="checkbox"
                <% if get_mode(params,
                @modes['sell']) %>
                checked="checked" <% end %>
                value="<%= @modes['sell'] %>" name="mode_id_<%= @modes['sell'] %>" id="search-1" class="checkbox" />
                <label class="checkbox" for="search-1">Selling</label>
                <input type="checkbox" <% if get_mode(params,
                @modes['buy']) %>
                checked="checked" <% end %>
                value="<%= @modes['buy'] %>" name="mode_id_<%= @modes['buy'] %>" id="search-2" class="checkbox" />
                <label class="checkbox" for="search-2">Buying</label>
                <input type="checkbox" <% if get_mode(params,
                @modes['to_rent']) %>
                checked="checked" <% end %>
                value="<%= @modes['to_rent'] %>" name="mode_id_<%= @modes['to_rent'] %>" id="search-3" class="checkbox" />
                                    <label class="checkbox"
                                    for="search-3">Renting</label>

                <input type="checkbox" <% if get_mode(params,
                @modes['wish_to_rent']) %>
                checked="checked" <% end %>
                value="<%= @modes['wish_to_rent'] %>" name="mode_id_<%= @modes['wish_to_rent'] %>" id="search-4" class="checkbox" />
                                    <label class="checkbox"
                                    for="search-4">Wish to rent</label>
            </div>              

            <!-- input type="submit" class="btn
            search-btn" value="Search" / -->
            <%= f.submit %>

    </div>

   <% end %> <!-- form --> 
```

控制器（js模板只包含一个警报）：

```
# GET /items/1
# GET /items/1.json
def list
  @selected_location = (params[:loc]) ? params[:loc] : params[:id]
  @items = Item.search_items(@selected_location, params[:page])
  @modes = Mode.modes_for_search
  @super_categories = Supercategory.find(:all)
  @locations = Location.locations    
  @subcategories = Subcategory.where(:category_id => params[:cat]).order("name")

  @has_price_info = true # look up based on category id
  @show_images=true # look up in params or in user session

  respond_to do |format|
    format.html # list.html.erb
    format.json { render json: @items }
    format.js
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:12:46.833

我找到了解决问题的方法，请参阅“编辑”部分。

# jquery - 可拖动的 jQuery UI 不适用于动态创建的 div

> ID：11285484
> 
> 赞同：3
> 
> 时间：2012-07-01T20:43:12.530
> 
> 标签：jquery, jquery-ui, draggable

我首先包含 jquery-1.7.2.min，然后包含 jquery-ui-1.8.21.custom.min

然后我用类名动态创建了 div，我在它们上调用了可拖动和可选择的，但它不起作用。在dom准备好了

```
 $.each(a, function (l, i) {
       $('.browser').append("<div class='folder' id=" + i + "></div>");
   });
   $('.folder').selectable().draggable(); 
```

这是小提琴链接 [http://jsfiddle.net/2Nh5m/](http://jsfiddle.net/2Nh5m/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:56:17.430

只需颠倒调用顺序，`draggable()`它`selectable()`就会起作用：

```
$('.folder').draggable().selectable() 
```

[http://jsfiddle.net/2Nh5m/1/](http://jsfiddle.net/2Nh5m/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T15:31:24.327

问题在于可拖动功能的应用。

通常，可拖动功能在文档准备好后立即应用于元素，如下面的代码。

$('.draggable').draggable();

这仅将可拖动功能应用于那些已经存在的元素，因此它不适用于之后创建的任何元素。

解决方案是将函数也应用于新创建的元素。一旦创建了元素，就使用与上面相同的代码应用于任何新创建的元素。

# postgresql - 存储 32 字节哈希值的有效数据类型是什么？

> ID：11285489
> 
> 赞同：4
> 
> 时间：2012-07-01T20:43:42.360
> 
> 标签：postgresql

我知道我可以使用 varchar(64) 来保存 32 个字节的十六进制表示，但我想 a`bytea`将是大小的一半，加上开销。是否有任何陷阱`bytea`或更有效的方式来存储 32 个字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:30:38.893

bytea 最大的问题是，在大多数框架中，在客户端对其进行解码会占用额外的内存。这可能不是什么大问题。不过，它具有更有效的磁盘表示。

正如克雷格在评论中指出的那样，最好的类型在很大程度上取决于你用它做什么。我倾向于使用 varchar，因为它最容易使用。但是 bytea 也可以工作，并且会节省一些磁盘空间。

# c# - 事务范围中的异常处理

> ID：11285492
> 
> 赞同：0
> 
> 时间：2012-07-01T20:44:04.190
> 
> 标签：c#, exception-handling, transactions, soa, transactionscope

这个方法是在我的业务服务中从一个 asp.net mvc 控制器调用的。如果发生异常，我需要返回一个 Result 对象。

结果类是实验性的，也许有更好的东西。

如果我不希望出现特殊异常，您将如何处理异常。

我只想向用户显示来自我的 javascript 文件中的异常的错误消息

如果成功返回 false，则带有消息框。

```
 public Result CreateTestplan(Testplan testplan)
 {
    using (var con = new SqlConnection(_connectionString))
    using (var trans = new TransactionScope())
    {
       con.Open();

       _testplanDataProvider.AddTestplan(testplan);
       _testplanDataProvider.CreateTeststepsForTestplan(testplan.Id, testplan.TemplateId);
       trans.Complete();
   }
  }

class Result
{
   public bool Success {get;set;}
   public string Error {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:55:50.197

将整个事务包装在 Try/Catch 块中并捕获异常。在 catch 块中，将 Result 上的 Error 文本设置为异常文本。下面是它在代码中的样子：

```
 public Result CreateTestplan(Testplan testplan)
 {
    Result res = new Result();
    try
    {
    using (var con = new SqlConnection(_connectionString))
    using (var trans = new TransactionScope())
    {
       con.Open();

       _testplanDataProvider.AddTestplan(testplan);
       _testplanDataProvider.CreateTeststepsForTestplan(testplan.Id, testplan.TemplateId);
       trans.Complete();
       res.Success = true;
       res.Error = string.Empty;
   }
   }
   catch (Exception e)
   {
       res.Success = false;
       res.Error = e.Message;
   }
   return result;
  }

class Result
{
   public bool Success {get;set;}
   public string Error {get;set;}
} 
```

当然，您的服务最终会吞下任何异常，因此您需要确保事务失败不会使您的程序处于不一致的状态。

# xmlspy - XMLSpy XSD 到 XSD 的多对一映射

> ID：11285494
> 
> 赞同：0
> 
> 时间：2012-07-01T20:44:14.637
> 
> 标签：xmlspy

我正在使用 XMLspy 在 XSLT 中进行 XSD 到 XSD 的映射，这只不过是源模式到目标模式我需要一些 XMLspy 工具专家在以下方面提供帮助 1）我想将源模式的一个或多个不同元素映射到目标的相同元素架构当我使用 xmlspy 进行正常映射时，我收到重复元素映射或取消的消息，那么我如何将一个或多个源元素映射到相同的目标元素

2）我想使用 XSLT 中的模式进行 xml 文件验证。例如 xsd 中的元素是枚举值，。如果我在 xml 中获得除模式枚举值之外的任何其他值，我需要抛出异常

3）在 xmlspy 中，我如何使用 xml:when 在编辑器中。我只看到条件而不是何时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:10:02.260

关于你关于多对一的第一个问题。在您的目标架构中，您可以右键单击一个节点，并且可以选择为其创建重复条目，因此它看起来像：

```
富
富(2)

```

然后，您可以将其他源映射到它。

# r - R CMD检查警告：在文档对象中使用的函数/方法......但不在代码中

> ID：11285496
> 
> 赞同：21
> 
> 时间：2012-07-01T20:44:33.803
> 
> 标签：r, package, roxygen2

我正在写一个包，但一个持续的`R CMD check`警告阻止我完成包并将其发布到 CRAN。我`roxygen2`用于内联文档，尽管这可能不是错误的根本原因。

如果您知道如何删除此警告，我很可能会想出一种使用`roxygen2`.

**如何** `Functions/methods with usage in documentation object ... but not in code` **从包裹检查中删除警告？**

* * *

`R CMD check`警告：

```
* checking for code/documentation mismatches ... WARNING
Functions/methods with usage in documentation object 'names<-' but not in code:
  names<- 
```

功能和`roxygen`文档：

```
#' Updates names and variable.labels attribute of surveydata.
#' 
#' @name names<-
#' @rdname names
#' @aliases names<- names<-.surveydata
#' @param x surveydata object
#' @param value New names
#' @method names<- surveydata
#' @usage names(x) <- value
"names<-.surveydata" <- function(x, value){
    invisible(NULL)
} 
```

生成的`.rd`文档文件：

```
\name{names<-}
\alias{names<-}
\alias{names<-.surveydata}
\title{Updates names and variable.labels attribute of surveydata.}
\usage{
  names(x) <- value
}
\arguments{
  \item{x}{surveydata object}

  \item{value}{New names}
}
\description{
  Updates names and variable.labels attribute of
  surveydata.
} 
```

* * *

我已经将我的文档与基础 R 中的文档进行了交叉检查`names<-`，看起来是相同的：

```
\title{  The Names of an Object}
\name{names}
\alias{names}
\alias{names.default}
\alias{names<-}
\alias{names<-.default}
\keyword{attribute}
\description{Functions to get or set the names of an object.} 
```

* * *

相关问题（但我已经实施了这个建议，但仍然没有运气）：

*   [如何使用 Roxygen 正确记录来自不同包的泛型的 S3 方法？](https://stackoverflow.com/q/6517222/602276)

* * *

**我哪里错了？如何从包裹检查中删除此警告？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-01T21:45:22.853

Rd 文件中的`\usage`部分需要包括以下内容：

```
\method{names}{surveydata}(x) <- value 
```

如果这不是由该`@method`行自动插入（我认为只会添加`\method{names}{surveydata}(x)`？），那么您需要一个`@usage`包含上述内容的显式部分。就像是

```
#' @usage \\method{names}{surveydata}(x) <- value 
```

我还将更改`@name`and`@alias`部分以明确引用该方法而不是泛型，因为这将与 R::base 中的 Rd 文件发生冲突。

本质上，警告来自您的包*不*包含函数`"names<-"`但您在`\usage{}`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-23T15:42:52.713

万一它对任何人都有帮助，这个错误也可能来自一个废弃的 Rd 文件，它的函数或数据对象不再存在。

# google-calendar-api - 获取 Google Apps Scripts CalendarApp 类中的所有日历

> ID：11285497
> 
> 赞同：0
> 
> 时间：2012-07-01T20:44:40.380
> 
> 标签：google-calendar-api, google-apps-script

因此，Google Apps 脚本允许您使用和`getCalendarByID`，当您需要定位特定日历时，这非常有用。但是，我想知道是否有办法让我获得与该帐户关联的**所有日历？**`getCalendarsByName``getDefaultCalendar`

 **我试过`getCalendarsByName()`,`getCalendarsByName('')`和`getCalendarsByName('*')`, 都不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T20:49:17.643

你试过`getAllCalendars()`吗？ [获取该用户订阅的所有日历](https://developers.google.com/apps-script/class_calendarapp#getAllCalendars)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-31T19:26:02.043

这对我有用：

```
function get_calendars() {
var calendars = CalendarApp.getAllCalendars();
for (var i = 0; i < calendars.length; i++) {
var calendar = calendars[i];
Logger.log(calendar.getName());
}
} 
```**

# objective-c - NSCFType 不断发生，有什么东西没有被释放？

> ID：11285498
> 
> 赞同：1
> 
> 时间：2012-07-01T20:44:43.403
> 
> 标签：objective-c, cocoa-touch, memory-management, runtime-error, nsfilemanager

我正在尝试使用 tableview/array 组合从文档目录中删除文件。出于某种原因，我`NSString`指向 Documents 目录路径正在被转换为`NSCFType`（经过一些研究，我理解这是因为没有释放变量而发生的）。因此，应用程序在该行崩溃

```
NSString *lastPath = [documentsDirectory stringByAppendingPathComponent:temp]; 
```

声称`NSCFType`无法识别该方法`stringByAppendingPathComponent`。

如果有人可以帮助我，我将不胜感激（我希望我已经解释得足够清楚了）。

```
- (void) tableView: (UITableView *) tableView
commitEditingStyle: (UITableViewCellEditingStyle) editingStyle
 forRowAtIndexPath: (NSIndexPath *) indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {

        NSString *temp = [directoryContent objectAtIndex:indexPath.row];

        NSLog(temp);

        NSString *lastPath = [documentsDirectory stringByAppendingPathComponent:temp];

        [[NSFileManager defaultManager] removeItemAtPath:lastPath error:nil]; 
```

* * *

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
   {

       paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

       documentsDirectory = [paths objectAtIndex:0];
       directoryContent = [[[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:nil] retain];

//tableview handling below

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:49:42.043

似乎`documentsDirectory`被设置为一个自动释放的对象来解决这个问题，

你要么保留它

```
documentsDirectory = [[paths objectAtIndex:0] retain]; 
```

或者你在每次像这样使用它之前初始化它

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);       
documentsDirectory = [paths objectAtIndex:0];
NSString *lastPath = [documentsDirectory stringByAppendingPathComponent:temp];
[[NSFileManager defaultManager] removeItemAtPath:lastPath error:nil]; 
```

我的建议，不要将所有这些变量添加为实例变量，你不需要，最好在需要时创建它们

# java - 为什么我的代码中出现 ArrayIndexOutOfBoundsException？

> ID：11285500
> 
> 赞同：-4
> 
> 时间：2012-07-01T20:45:07.930
> 
> 标签：java

为什么我在 CopyFile.main 得到 java.lang.ArrayIndexOutOfBoundsException :0

```
//Copy one file Data to another File
import java.io.*;

class CopyFile{

        public static void main(String[] args)throws IOException{
            FileInputStream fis=new FileInputStream(args[0]);//reading File 
            FileOutputStream fos=new FileOutputStream(args[1]);//reading File
            int data;

            while((data=fis.read())!=-1){
                fos.write(data);
/*here  using while loop to copy data from one file and storing it in another file*/
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T20:53:46.120

看来您正在运行文件

```
java CopyFile 
```

如果你这样做，那就错了。您应该传递参数来运行您的代码，因为您正在寻找两个参数。

以这种方式运行代码：-

```
java CopyFile arg1 arg2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T20:47:30.863

启动应用程序时，您可能不会在命令行中传递两个参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T20:47:14.630

您不检查 args 是否大于 2：

```
if (args.length < 2)
{
    // args[1] doesn't exist
    System.out.println("You didn't provide two files.");
    return;
} 
```

# ios - UITextField 中的静态字符前缀

> ID：11285502
> 
> 赞同：11
> 
> 时间：2012-07-01T20:45:17.873
> 
> 标签：ios, cocoa-touch, user-interface, uitextfield

有没有一种内置的方法可以将字符前缀添加到`UITextField`下面的屏幕截图中？

![在此处输入图像描述](../Images/5b8a9a88dff381d188288502d6c83bf4.png)

如果不是，那么最好、最直接的方法是什么？我认为该`background`物业可能能够做到这一点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-01T20:56:22.053

只需`UILabel`在顶部添加灰色即可`UITextField`：

![001](../Images/aeefa35fce3de5ab3634ba264657d632.png) ![002](../Images/37343ee5b916b221a088712bb6ef7308.png)

请注意，它的`UILabel`行为类似于背景图像，输入的文本保持在顶部：

![003](../Images/37d16fda5ff43773f68452c832625922.png)

**更新**

此外，您可以`UITextField`使用以下代码添加一些填充：

```
UIView *thePadding = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 20)];
theTextField.leftView = thePadding;
theTextField.leftViewMode = UITextFieldViewModeAlways; 
```

这样文本就不能覆盖前缀字符。
调整矩形以使其在您的情况下正常工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-17T11:07:54.513

继[安妮的](https://stackoverflow.com/users/388037/anne)代码之后，您也可以直接在代码中执行此操作，而无需 IB 中的 UILabel 和代码中的 UIView：

```
UILabel *poundLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 5, 20)];
poundLabel.text = @"£";
[self.paymentAmount setLeftView:poundLabel];
[self.paymentAmount setLeftViewMode:UITextFieldViewModeAlways]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-25T03:14:11.103

使用[Ditiet 的解决方案](https://stackoverflow.com/a/12932971/242933)（在视网膜上使用 15 号系统字体），文本字段将其文本定位为 0.5 点，距离美元符号太近了。使用`-sizeWithAttributes:`，我`width`将美元符号标签的值设置为大约 8.5，但文本字段将其文本定位在`x`8 处（左视图宽度的下限）。

我找到了两种解决方案来完善美元符号（左视图）和文本之间的相对定位。

## 解决方案 1：右对齐美元符号

将美元符号标签的宽度设置为美元符号宽度的上限（或硬编码）。然后，右对齐美元符号标签的文本。

```
UIFont *font = [UIFont systemFontOfSize:15];
UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(100, 200, 120, 44)];
textField.font = font;
NSString *dollarSignText = @"$";
CGSize size = [dollarSignText sizeWithAttributes:@{NSFontAttributeName: font}];
UILabel *dollarSignLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, ceilf(size.width), 44)];
dollarSignLabel.font = font;
dollarSignLabel.text = dollarSignText;
dollarSignLabel.textAlignment = NSTextAlignmentRight;
textField.leftView = dollarSignLabel;
textField.leftViewMode = UITextFieldViewModeAlways;
[self.view addSubview:textField]; 
```

尽管此解决方案完善了美元符号标签（左视图）和文本之间的相对定位，但它可能会稍微增加美元符号标签的宽度（不超过 1 pt），从而导致文本字段的宽度和将所有文本向右移动相同的量。

如果文本字段的高度会发生变化，例如由于自动布局（或自动调整大小），我不推荐此解决方案。

## 解决方案 2：继承 UITextField 并覆盖其定位

此解决方案支持您使用自动布局（或自动调整大小）来调整文本字段的高度。

```
// VVMAmountTextField.h

@import UIKit;

@interface VVMAmountTextField : UITextField

@end

// VVMAmountTextField.m

#import "VVMAmountTextField.h"

@implementation VVMAmountTextField

#pragma mark - UIView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        UIFont *font = [UIFont systemFontOfSize:15];
        self.font = font;
        self.keyboardType = UIKeyboardTypeDecimalPad;
        self.placeholder = @"0.00";

        // Set leftView to dollarSignLabel ($).
        UILabel *dollarSignLabel = [[UILabel alloc] initWithFrame:CGRectZero];
        dollarSignLabel.backgroundColor = [UIColor whiteColor];
        dollarSignLabel.font = font;
        dollarSignLabel.text = @"$";
        self.leftView = dollarSignLabel;
        self.leftViewMode = UITextFieldViewModeAlways;
    }
    return self;
}

#pragma mark - UITextField

// Override positioning to make things pixel perfect.

#define DOLLAR_SIGN_WIDTH() [((UILabel *)self.leftView).text sizeWithAttributes:@{NSFontAttributeName: self.font}].width

- (CGRect)textRectForBounds:(CGRect)bounds
{
    bounds = [super textRectForBounds:bounds];
    bounds.origin.x = DOLLAR_SIGN_WIDTH();
    return bounds;
}

- (CGRect)editingRectForBounds:(CGRect)bounds
{
    bounds = [super editingRectForBounds:bounds];
    bounds.origin.x = DOLLAR_SIGN_WIDTH();
    return bounds;
}

- (CGRect)leftViewRectForBounds:(CGRect)bounds
{
    bounds.size.width = DOLLAR_SIGN_WIDTH();
    return bounds;
}

@end 
```

# 结论

这两种解决方案似乎都运作良好。解决方案 1 可能会导致偏移，但代码更少，而且看起来仍然完美无缺。我只是在解决方案 2 之后才想到它。解决方案 2 很优雅，支持您使用自动布局（或自动调整大小）来调整文本字段的高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T20:55:59.993

不要认为你可以作为`UITextField`单独的一部分来做到这一点。

我可以做到的一种方法是让你的`UITextField`无边界并`UILabel`在`UITextField`. 最后，如果您想要边框，而不是将这两个元素（UITextField 和 UILabel）放在 UIView 中并为该视图提供边框。此设置应与您放置的图像完全相同。

让我知道这是否可行。

**更新**：您可以按照@Anne 的观点进行操作，但存在文本在 UILabel 之上运行的风险。我觉得我建议的更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T20:59:20.720

添加到安妮的答案。您也可以将其设为 UIImageView 并使用您想要的任何图像。使用 UIImageView，您可以将背景设置为白色，以便将文本隐藏在其下方。

# php - 静态类与实例化时的类成员访问

> ID：11285512
> 
> 赞同：2
> 
> 时间：2012-07-01T20:46:23.933
> 
> 标签：php, object, global, static-methods, instantiation

在 5.4 之前的 PHP 版本中，我使用静态类来实例化一个对象并立即调用所需的函数，例如：

```
$result = Foo::init()->bar(); 
```

在上面的示例中，静态函数`init()`只是实例化了包含它的类并将其作为对象返回。`bar()`这提供了方法链接功能，并允许我在一行代码中立即调用。静态函数`init()`看起来像这样：

```
static public function init() {
   $object = new self();
   return $object;
} 
```

现在 PHP 5.4 增加了对实例化类成员访问的支持，而不是使用静态类，我现在可以执行以下操作：

```
$result = (new Foo)->bar(); 
```

**我的问题：**我使用静态类的旧方法是否不好，如果是，为什么？既然 PHP 在实例化时支持类成员访问，那么这是在对象实例化后立即访问类成员的更正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T20:48:56.633

是的，新方法更正确，所以如果可以的话，请使用它。不过，您以前拥有它的方式并不“糟糕”。这是一个干净、简单的解决方案，可以解决令人沮丧的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T21:24:36.790

如果这就是你`->init()`所做的一切，你可以逃脱`(new Foo)->bar();`，但是当你走依赖注入路线时，你很可能想要创建某种工厂来在实例化时“注入那些依赖”。工厂可能是一个完整的实例化对象，或者只是初学者的静态方法，但事实是：如果您现在或将来需要将外部访问注入到您的类（数据库处理程序、设置）中，而您*不需要不想*滥用全局变量或单例（这是一种全局变量......），您将非常感谢您有 1 个方法/类，您的对象在其中被实例化，而不是散布在代码库中。

# objective-c - 防止在 MKPointAnnotation 上进行选择

> ID：11285515
> 
> 赞同：2
> 
> 时间：2012-07-01T20:46:53.980
> 
> 标签：objective-c, ios, mkmapview

有没有办法防止启用 MKMapView 实例中的注释。换句话说，当用户点击地图上的红色大头针时，有没有办法阻止它突出显示大头针。现在，当触摸时，引脚会变暗......

**编辑：**我正在使用以下代码返回 MKPinAnnotationView

```
// To future MKMapView users - Don't forget to set _mapView's delegate
_mapView.delegate = self;

_annotation = [[MKPointAnnotation alloc] init];

_annotation.coordinate = myLocation;

[_mapView addAnnotation:_annotation];

-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{

MKPinAnnotationView *pin = [[MKPinAnnotationView alloc] initWithAnnotation:_annotation reuseIdentifier:@"id"];
pin.enabled = NO;

return pin;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T20:57:32.827

设置`enabled`为`NO`你的`MKPinAnnotationView`，你从你的`-mapView:viewForAnnotation:`委托方法返回（如果你还没有实现它，做它）。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation 
{
    static NSString *annotationIdentifier = @"Annotation";
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];

    if (!annotationView) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:annotationIdentifier];
    }
    else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = NO;

    return annotationView;
} 
```

# java - 无法使用 jsoup 解析 HTML 页面的某种链接

> ID：11285518
> 
> 赞同：0
> 
> 时间：2012-07-01T20:47:08.900
> 
> 标签：java, html-parsing, jsoup

鉴于此链接：

[http://www.argenteam.net/movie/40749/American.Reunion.%282012%29](http://www.argenteam.net/movie/40749/American.Reunion.%282012%29)

我正在尝试使用 jsoup 在该页面上获取所有这样的链接：

```
<a href="ed2k://|file|American.Reunion.UNRATED.DVDRip.XviD.CD1-COCAIN.avi|734205866|C92C5188830C4F740C69521F67337A45|h=Z5F72XEXRGGXBCMSOR6NS3IBCTFIHQLL|/">CD1</a> 
```

问题是我无法获得这种链接。做了一些极端的事情，我尝试了以下代码来获取页面上的所有链接，但同样，这个“a [href]”不在列表中。

```
doc = Jsoup.connect("http://www.******.net/movie/40749/American.Reunion.%282012%29").get();

Elements ed2k = doc.select("a[href]");
    for (Element emule:ed2k){
            String mula = emule.attr("href");
           } 
```

如何获取以值“ed2k”开头的所有链接？它们在 CSS“div.pmovie div.releases div.release-info div.section div.links div a”上，但我不知道问题出在哪里，它们对我的实现来说是“不可见的”。如果您查看源 HTML 代码，它似乎并不奇怪，并且所有浏览器都可以很好地管理这种链接。那么，为什么我没有使用 jsoup 和 css 选择器解析它们呢？我需要使用节点和兄弟姐妹吗？

提前致谢。

**最终编辑解决方案：**

该网站正在请求一个 cookie 来显示我需要的链接，因为该 cookie 仅使用真正的浏览器生成，Jsoup 无法检索所有信息，它正在连接到真实页面的简化版本。在 Jsoup 连接中发送特定的 cookie 解决了这个问题。例子：

```
doc = Jsoup.connect(your url here).cookie(cookie name, cookie value).get(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T20:55:15.200

我在您指定的网址的来源中看不到任何此类链接。

通常，您可以使用以下属性值选择语法执行您所要求的操作：

```
[attr^=valPrefix] 
elements with an attribute named "attr", and value starting with "valPrefix"    
Example: a[href^=http:] 
```

（来自[http://jsoup.org/apidocs/org/jsoup/select/Selector.html](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)）

# java - 如何限制谷歌地图的缩放级别和可视区域？

> ID：11285520
> 
> 赞同：1
> 
> 时间：2012-07-01T20:47:18.920
> 
> 标签：java, android, google-maps

是否有可能做到这一点？我只希望应用程序的用户看到谷歌地图的某个部分。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-01T20:51:00.930

google maps API 中定义了一些事件

[https://developers.google.com/maps/documentation/javascript/events](https://developers.google.com/maps/documentation/javascript/events)

# uml - 如何将两个字段建模为一个

> ID：11285524
> 
> 赞同：1
> 
> 时间：2012-07-01T20:47:36.413
> 
> 标签：uml

我有一个项目，其中一个要求是用户名与电子邮件具有相同的价值。我应该如何在我的 UML 图上对此建模？User 类应该有两个字段：用户名、电子邮件。或者也许我可以创建一个字段电子邮件并进行某种标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:38:09.590

您可以创建这两个字段并编写一个 OCL 约束，说明两者必须具有相同的值。约束可以像上下文用户 inv 一样简单：self.username=self.email

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:53:15.283

那这个呢？

```
-email : string 
```

* * *

```
+getUserName()
+setUserName(string)
+getEmail()
+setEmail(string) 
```

# math - 求解高斯随机变量的标准差

> ID：11285529
> 
> 赞同：0
> 
> 时间：2012-07-01T20:48:30.483
> 
> 标签：math, random, statistics, gaussian, standard-deviation

因此，假设我有一个高斯随机数生成器，它采用 2 个参数标准偏差和均值 X(d,m)。我想要做的是指定数字生成器的标准偏差，以便我在 95% 的时间内获得给定范围内的随机数，例如 -n< X(d,0)< n。知道如何解决标准偏差？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:52:00.077

95% 置信区间对应于正态分布均值两侧的 1.96 个标准差。这意味着正态曲线下总面积的 95% 包含在区间内

```
 [mean -1.96*S.D, mean + 1.96*S.D] 
```

例如，如果您的平均值为零，并且您希望数字落在 [-3.92,3.92] 范围内，您将为高斯随机数生成器选择标准差 2。

# ios - 使用 UIImagePicker 选择图片后崩溃日志 SIGABRT

> ID：11285533
> 
> 赞同：0
> 
> 时间：2012-07-01T20:48:58.923
> 
> 标签：ios

有人可以帮助我并解释以下崩溃日志吗？

我正在构建我的第一个（iOS）应用程序，并且在从我的 PhotoLibrary 中选择（并缩放）图片后偶然发生了这个崩溃。

不过，查看日志，它似乎稍后崩溃了。

我是崩溃日志的新手，有人可以指出崩溃的确切原因/位置让我学习如何阅读它吗？分析需要代码片段吗？

提前致谢！

```
Incident Identifier: 806191F3-8C7A-4B77-B395-192E7C63AD12
CrashReporter Key:   ec9cb673f6ebb95077c5b905e3b9417a68d15d19
Hardware Model:      iPhone4,1
Process:         Mijn Kinderen [23756]
Path:            /var/mobile/Applications/0ED97506-C765-4D19-B3B1-6A04AFCABBB8/Mijn Kinderen.app/Mijn Kinderen
Identifier:      Mijn Kinderen
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-06-26 15:44:20.011 +0200
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x358b588f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x37c5c259 objc_exception_throw + 33
2   CoreFoundation                  0x358b5789 +[NSException raise:format:] + 1
3   Foundation                      0x3539d3a3 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 91
4   UIKit                           0x33556807 -[UIDatePickerView _updateBitsForDate:forced:andReload:animateIfNeeded:] + 147
5   UIKit                           0x334756c5 -[UIDatePickerView _setDate:animated:forced:] + 349
6   UIKit                           0x33475563 -[UIDatePickerView setDate:animated:] + 31
7   UIKit                           0x33556385 -[UIDatePicker setDate:] + 37
8   Mijn Kinderen                   0x000e2611 -[MKWijzigGebeurtenisViewController viewDidLoad] (MKWijzigGebeurtenisViewController.m:68)
9   UIKit                           0x33322c8b -[UIViewController view] + 167
10  UIKit                           0x33347481 -[UIViewController nextResponder] + 21
11  UIKit                           0x3330bbd5 -[UIResponder _containsResponder:] + 37
12  UIKit                           0x333ce359 -[UINavigationController defaultFirstResponder] + 57
13  UIKit                           0x333143b5 -[UIResponder(Internal) _deepestDefaultFirstResponder] + 25
14  UIKit                           0x33314263 -[UIResponder(Internal) _promoteDeepestDefaultFirstResponder] + 31
15  UIKit                           0x333ce31f -[UIWindowController transitionViewDidStart:] + 83
16  UIKit                           0x333836cb -[UITransitionView _didStartTransition] + 71
17  UIKit                           0x3338300f -[UITransitionView transition:fromView:toView:] + 999
18  UIKit                           0x333ccc05 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 4937
19  UIKit                           0x33426d71 -[UIViewController _dismissViewControllerWithTransition:from:completion:] + 1733
20  UIKit                           0x33388d85 -[UIViewController dismissViewControllerWithTransition:completion:] + 757
21  UIKit                           0x33388d85 -[UIViewController dismissViewControllerWithTransition:completion:] + 757
22  Mijn Kinderen                   0x000e303f -[MKWijzigGebeurtenisViewController imagePickerController:didFinishPickingMediaWithInfo:] (MKWijzigGebeurtenisViewController.m:180)
23  UIKit                           0x33554c5b -[UIImagePickerController _imagePickerDidCompleteWithInfo:] + 111
24  PhotoLibrary                    0x31593079 PLNotifyImagePickerOfImageAvailability + 45
25  PhotoLibrary                    0x315a4797 -[PLUICameraViewController cameraView:photoSaved:] + 131
26  PhotoLibrary                    0x315d28db -[PLCameraView cropOverlay:didFinishSaving:] + 227
27  CoreFoundation                  0x358141fb -[NSObject performSelector:withObject:] + 43
28  Foundation                      0x353d8747 __NSThreadPerformPerform + 351
29  CoreFoundation                  0x35889ad3 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
30  CoreFoundation                  0x3588929f __CFRunLoopDoSources0 + 215
31  CoreFoundation                  0x35888045 __CFRunLoopRun + 653
32  CoreFoundation                  0x3580b4a5 CFRunLoopRunSpecific + 301
33  CoreFoundation                  0x3580b36d CFRunLoopRunInMode + 105
34  GraphicsServices                0x374a7439 GSEventRunModal + 137
35  UIKit                           0x33317cd5 UIApplicationMain + 1081
36  Mijn Kinderen                   0x000da36b main (main.m:16)
37  Mijn Kinderen                   0x000da310 start + 40

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3616b32c __pthread_kill + 8
1   libsystem_c.dylib               0x32cb7208 pthread_kill + 48
2   libsystem_c.dylib               0x32cb0298 abort + 88
3   libc++abi.dylib                 0x35c6df64 abort_message + 40
4   libc++abi.dylib                 0x35c6b346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x37c5c350 _objc_terminate + 140
6   libc++abi.dylib                 0x35c6b3be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x35c6b44a std::terminate() + 14
8   libc++abi.dylib                 0x35c6c81e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x37c5c2a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x3580b506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x3580b366 CFRunLoopRunInMode + 98
12  GraphicsServices                0x374a7432 GSEventRunModal + 130
13  UIKit                           0x33317cce UIApplicationMain + 1074
14  Mijn Kinderen                   0x000da364 main (main.m:16)
15  Mijn Kinderen                   0x000da308 start + 32

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x3615b3a8 kevent + 24
1   libdispatch.dylib               0x34745f04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x34745c22 _dispatch_mgr_thread + 30

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x3616b0d8 __psynch_mutexwait + 24
1   libsystem_c.dylib               0x32c6c674 pthread_mutex_lock + 376
2   WebCore                         0x316674e8 _ZL17_WebTryThreadLockb + 208
3   WebCore                         0x316677ec _ZL14WebRunLoopLockP19__CFRunLoopObservermPv + 24
4   CoreFoundation                  0x35889b14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
5   CoreFoundation                  0x35887d50 __CFRunLoopDoObservers + 252
6   CoreFoundation                  0x3588816a __CFRunLoopRun + 946
7   CoreFoundation                  0x3580b49e CFRunLoopRunSpecific + 294
8   CoreFoundation                  0x3580b366 CFRunLoopRunInMode + 98
9   WebCore                         0x3170ac9c _ZL12RunWebThreadPv + 396
10  libsystem_c.dylib               0x32c7872e _pthread_start + 314
11  libsystem_c.dylib               0x32c785e8 thread_start + 0

Thread 3 name:  com.apple.coremedia.player.async
Thread 3:
0   libsystem_kernel.dylib          0x3616b068 __psynch_cvwait + 24
1   libsystem_c.dylib               0x32c78a46 _pthread_cond_wait + 634
2   libsystem_c.dylib               0x32c787c2 pthread_cond_wait + 34
3   CoreMedia                       0x309ec868 FigSemaphoreWaitRelative + 268
4   MediaToolbox                    0x3670f3e6 fpa_AsyncMovieControlThread + 22
5   CoreMedia                       0x30a0b8b4 figThreadMain + 168
6   libsystem_c.dylib               0x32c7872e _pthread_start + 314
7   libsystem_c.dylib               0x32c785e8 thread_start + 0

Thread 4 name:  Dispatch queue: com.apple.camera.avcapturesession
Thread 4:
0   libsystem_kernel.dylib          0x3615b004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3615b1fa mach_msg + 50
2   CoreFoundation                  0x358893ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x35888124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3580b49e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x3580b366 CFRunLoopRunInMode + 98
6   AVFoundation                    0x357514d0 -[AVRunLoopCondition _waitInMode:untilDate:] + 348
7   AVFoundation                    0x3575136c -[AVRunLoopCondition waitUntilDate:inMode:] + 20
8   AVFoundation                    0x3573e13a -[AVCaptureSession _stopPreviewing] + 438
9   AVFoundation                    0x3573e2d6 -[AVCaptureSession _setRunning:] + 166
10  AVFoundation                    0x3573de42 -[AVCaptureSession stopRunning] + 274
11  PhotoLibrary                    0x31584590 __33-[PLCameraController stopPreview]_block_invoke_0 + 96
12  libdispatch.dylib               0x34742c52 _dispatch_call_block_and_release + 6
13  libdispatch.dylib               0x34744d08 _dispatch_queue_drain + 268
14  libdispatch.dylib               0x34744b6e _dispatch_queue_invoke$VARIANT$mp + 34
15  libdispatch.dylib               0x347457e0 _dispatch_worker_thread2 + 204
16  libsystem_c.dylib               0x32c72df4 _pthread_wqthread + 288
17  libsystem_c.dylib               0x32c72cc8 start_wqthread + 0

Thread 5:
0   libsystem_kernel.dylib          0x3616bcd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32c72f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32c72cc8 start_wqthread + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3eec2d98      r6: 0x00000002      r7: 0x2fed7a48
    r8: 0x002ee2f0    r9: 0x00000000     r10: 0x3f85b9b4     r11: 0x00000000
    ip: 0x00000148    sp: 0x2fed7a3c      lr: 0x32cb720f      pc: 0x3616b32c
  cpsr: 0x000f0010

Binary Images:
   0xd9000 -    0xe6fff +Mijn Kinderen armv7  <f6dfc4f1cc023981af9c8c1f978561c8> /var/mobile/Applications/0ED97506-C765-4D19-B3B1-6A04AFCABBB8/Mijn Kinderen.app/Mijn Kinderen
0x2fed8000 - 0x2fef9fff  dyld armv7  <77eddfd654df393ba9c95ff01715fd08> /usr/lib/dyld
0x30537000 - 0x305eafff  iTunesStore armv7  <b3c0cce5f8e632e18f841c32b68f57a1> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x305fd000 - 0x30603fff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x306d7000 - 0x307fcfff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x30829000 - 0x30835fff  Accounts armv7  <79f22009b1173e1e81f70fc5c0410119> /System/Library/Frameworks/Accounts.framework/Accounts
0x30836000 - 0x3083cfff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x308bf000 - 0x308d4fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x309e6000 - 0x309e9fff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x309ea000 - 0x30a32fff  CoreMedia armv7  <e274e1b894753b2eb05cf7b22a36d0c1> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x30a6e000 - 0x30fb2fff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x3153d000 - 0x31660fff  PhotoLibrary armv7  <cff5092ea3343d8ebb2159c93c00ac68> /System/Library/PrivateFrameworks/PhotoLibrary.framework/PhotoLibrary
0x31661000 - 0x31e20fff  WebCore armv7  <2690c38c9c5f3c09975d619dd1dfbed7> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x31e33000 - 0x31f0bfff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x31f0c000 - 0x320f0fff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x320f1000 - 0x3213bfff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x32163000 - 0x32179fff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x32185000 - 0x32342fff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x324bb000 - 0x324ccfff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x324d4000 - 0x324edfff  Twitter armv7  <8fe6d77b99b43d2287e9c51bc4b22456> /System/Library/Frameworks/Twitter.framework/Twitter
0x326df000 - 0x327d0fff  QuartzCore armv7  <35d64a9da5523ae08c9e41511fd3061b> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x327e3000 - 0x327e6fff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x32850000 - 0x32856fff  XPCObjects armv7  <dc568831fa5b3b22b673c62bc9d21d16> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x32857000 - 0x32893fff  IMFoundation armv7  <253125b9103c3d13b66923ac6893c25b> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x328c0000 - 0x328e0fff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x3293d000 - 0x32949fff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x3294a000 - 0x3296dfff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x3299b000 - 0x32a1efff  MapKit armv7  <e39706ac199134a497954e1f1d6d7245> /System/Library/Frameworks/MapKit.framework/MapKit
0x32a1f000 - 0x32a69fff  ManagedConfiguration armv7  <f1fbb825def23043830a095b953a9c94> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x32a84000 - 0x32a8afff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x32a8d000 - 0x32a91fff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x32a92000 - 0x32a93fff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x32a94000 - 0x32a95fff  libsystem_sandbox.dylib armv7  <6a8f2f33c7543808a0f4599101c3b61a> /usr/lib/system/libsystem_sandbox.dylib
0x32aa4000 - 0x32aa6fff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x32adc000 - 0x32c13fff  MusicLibrary armv7  <32bc794969e534df97a14dc4be228408> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x32c14000 - 0x32c40fff  libtidy.A.dylib armv7  <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x32c41000 - 0x32c65fff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x32c6a000 - 0x32cf6fff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x32d6d000 - 0x32d7efff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x32dd9000 - 0x32de0fff  MailServices armv7  <ab2388ce733e38b7a261273a401bbbf1> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x32dfc000 - 0x32dfdfff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x32dfe000 - 0x32e01fff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x32e02000 - 0x32ea8fff  AddressBookUI armv7  <da424fecc66e3628ab03378ae80b38fc> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x32ee9000 - 0x32f24fff  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x332e6000 - 0x33788fff  UIKit armv7  <cd513a2f22f53d698c3e10f6fe48a63e> /System/Library/Frameworks/UIKit.framework/UIKit
0x33789000 - 0x337b5fff  ACTFramework armv7  <0bc67086eb7b31d090bb4c9c7a54bfb2> /System/Library/PrivateFrameworks/ACTFramework.framework/ACTFramework
0x338de000 - 0x33923fff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x33962000 - 0x33967fff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x33989000 - 0x3399cfff  DataDetectorsCore armv7  <3f4596cbe1b13fdcb427d87de21df3f6> /System/Library/PrivateFrameworks/DataDetectorsCore.framework/DataDetectorsCore
0x339a9000 - 0x33a06fff  StoreServices armv7  <6ce256d3cf433e4aa1af8d696bf1f75d> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x33a0c000 - 0x33b7ffff  MediaPlayer armv7  <63cdf8f9c66d36e7a4e69e2f6cae854f> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x33ba1000 - 0x33beafff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x33d2d000 - 0x33d33fff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x33e19000 - 0x33e23fff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x341d9000 - 0x341e8fff  SpringBoardServices armv7  <a2363f8ed49932dba415d2d4cd32fb74> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x341e9000 - 0x341eefff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x341f5000 - 0x341fffff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x34290000 - 0x34294fff  Marco armv7  <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x342d9000 - 0x342fefff  OpenCL armv7  <f4b08361179a3f6bb033415b0d7c6251> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x34333000 - 0x34339fff  MediaStream armv7  <d3473621f67036dda5ecabeb14c62b4e> /System/Library/PrivateFrameworks/MediaStream.framework/MediaStream
0x3433a000 - 0x34350fff  EAP8021X armv7  <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x343a7000 - 0x343e5fff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x34487000 - 0x344b0fff  AppleAccount armv7  <2ba44023410231fcb3f72f762ea3ce6e> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x344f0000 - 0x34546fff  GMM armv7  <6b2f7e1aa6be3d69b4c4cf54ed960602> /System/Library/PrivateFrameworks/GMM.framework/GMM
0x34556000 - 0x3469ffff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x346a0000 - 0x346a0fff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x346a1000 - 0x346acfff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x346c8000 - 0x346fffff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x3473d000 - 0x34741fff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x34742000 - 0x34758fff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x34780000 - 0x347d1fff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x347d2000 - 0x347d9fff  AssetsLibraryServices armv7  <38132ecfd74b325fb1a4142bab663c19> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x347f9000 - 0x3480afff  AirTraffic armv7  <c9eb888c1bd1322cbda5b01d41be0c7d> /System/Library/PrivateFrameworks/AirTraffic.framework/AirTraffic
0x348a4000 - 0x348a5fff  CoreSurface armv7  <97f871f09f503c98a6371c2b657430d8> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x348c7000 - 0x348d3fff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x348ec000 - 0x34904fff  ChunkingLibrary armv7  <c73a4b4b38ae3702bc1feae489d31634> /System/Library/PrivateFrameworks/ChunkingLibrary.framework/ChunkingLibrary
0x34905000 - 0x3490dfff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x3490e000 - 0x34912fff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x34a9d000 - 0x34ab1fff  PersistentConnection armv7  <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x34e82000 - 0x34ec6fff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x34ef8000 - 0x34f05fff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x350a8000 - 0x3517ffff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x35180000 - 0x351fffff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x352de000 - 0x352e2fff  FTClientServices armv7  <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x35334000 - 0x354b2fff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x354d5000 - 0x354dbfff  IAP armv7  <17eddbf5590d3cb88d4acbda27447f5b> /System/Library/PrivateFrameworks/IAP.framework/IAP
0x354ef000 - 0x35581fff  HomeSharing armv7  <11ca6ed6f8c0377aba1d3e03484c380f> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x3558e000 - 0x3565efff  WebKit armv7  <3c5dd2ec46fe3e189c25bba78ad88fa1> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x356de000 - 0x35794fff  AVFoundation armv7  <35cb7a0eb1dc3554a777c1cc11cb0415> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x35795000 - 0x3579bfff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x3579f000 - 0x357e8fff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x357e9000 - 0x357ecfff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x357fc000 - 0x35913fff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x35a9e000 - 0x35af6fff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x35af9000 - 0x35af9fff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x35b02000 - 0x35b11fff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x35b12000 - 0x35b12fff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x35b15000 - 0x35b24fff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x35c67000 - 0x35c6efff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x35c95000 - 0x35ce1fff  CoreTelephony armv7  <b8f80d5d594c31d2b5d8fba9fdedb7e1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x35d64000 - 0x35e0efff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x35e30000 - 0x35e33fff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib 
```

- - - - - - - - - - 剪这里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:59:20.697

请求的代码片段：
**MKWijzigGebeurtenisViewController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    self.title = @"Wijzig gebeurtenis";

    // view controller toevoegen als delegate van UItextview
    _wijzigOpmerkingen.delegate = self;

    // minimum datum voor picker samenstellen
    _wijzigDatum.minimumDate = self.minimumDatumVoorPicker;
    _wijzigDatum.maximumDate = vandaag();

    // Set an image as the background of a UITableView called 'tableView'
    NSString *bestandsnaamAchtergrond = nil;
    if ([_gebeurtenis.bijKind.geslacht isEqualToString:@"J"]) {
        bestandsnaamAchtergrond = @"LightBlueBathTowel.jpg";
    }
    else if ([_gebeurtenis.bijKind.geslacht isEqualToString:@"M"]) {
        bestandsnaamAchtergrond = @"PinkBathTowel.jpg";
    }

    UIImageView *bg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:bestandsnaamAchtergrond]];
    bg.alpha = 0.4;
    [self.tableView setBackgroundView:bg];

    self.wijzigOmschrijving.text = _gebeurtenis.omschrijving;
    self.wijzigOpmerkingen.text = _gebeurtenis.opmerking;
    self.wijzigDatum.date = _gebeurtenis.datum;
    self.wijzigFoto.image = _gebeurtenis.foto.foto;
} 
```

和

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self dismissModalViewControllerAnimated:YES];
    UIImage *originalImage=[info objectForKey:UIImagePickerControllerOriginalImage];
    UIImage *gewijzigdeImage = [info objectForKey:UIImagePickerControllerEditedImage];
    UIImage *gekozenImage;

    if (gewijzigdeImage == nil) {
        gekozenImage = originalImage;
    }
    else {
        gekozenImage = gewijzigdeImage;
    }

    self.wijzigFoto.image = gekozenImage;
} 
```

希望这可以帮助。我似乎没有使用 PLCameraView cropOverlay:didFinishSaving:] 这可能是由 UIImagePickerView 等其他类调用的吗？

很抱歉荷兰人的评论，再次感谢您的反馈！

# javascript - 使用 JS API 的预定 Facebook 帖子

> ID：11285536
> 
> 赞同：1
> 
> 时间：2012-07-01T20:49:08.817
> 
> 标签：javascript, jquery, api, facebook-javascript-sdk, facebook-access-token

我正在尝试编写一个客户端 JS 函数，以在特定时间使用[FB.ui](http://developers.facebook.com/docs/reference/javascript/)将帖子发送到 Facebook Fanpage 。以前可以使用旧的 JS SDK。那改变了吗？
将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:04:33.310

帖子需要 access_token 并且访问令牌有大约 2 小时的过期时间。

参考：[https ://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

参考：[https ://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

参考：[https ://developers.facebook.com/docs/authentication/access-token-expiration/](https://developers.facebook.com/docs/authentication/access-token-expiration/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T02:58:27.860

您不能将 FB.ui() 与预定发布一起使用，因为发布时需要实际用户登录。您可以为此使用 FB.api() 并在参数中传递用户/页面访问令牌。对于计划发布的实际代码，我自己还没有完成，但是对于发布，你去吧。

```
try {
  var pageId = 'xxxxxxxxxxxxxxx';

  var obj = {
    name: name,
    description: description,
    link: link,
    picture: picture,
    caption: caption,
    access_token: pageAccessToken
  };

  FB.api('/' + pageId + '/feed', 'POST', obj, function(response) {
    if (!response || response.error) {
      // do something
      return;
    } else {
      // do something
    }
  });
} catch (e) {}
```

# c# - 在 ItemTemplate 上持久化 IsExpanded

> ID：11285542
> 
> 赞同：0
> 
> 时间：2012-07-01T20:50:37.847
> 
> 标签：c#, wpf, data-binding

我目前正在使用 WPF 和数据绑定来显示/更新数据。我有一个 TreeView 和一个 ItemTemplate。

```
<TreeView ItemsSource="{StaticResource Labels}">
    <TreeView.ItemTemplate>
        <DataTemplate>
            <Grid>
                <TreeViewItem Header="{Binding Key}">
                    <TextBlock Text="{Binding Value}" />
                </TreeViewItem>
            </Grid>
        </DataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

“Labels”是我在“InitializeComponent”之前分配的字典。问题是每次我更改数据并在 TreeView 上调用“刷新”时，所有树视图项都会返回到折叠状态，即使它们已展开。

如何使展开的项目保持展开状态？

编辑：对于其他尝试这样做的人，我只是要放置对我有用的 XAML（因为我在网上查找时很难找到它）。我创建了一个帮助类，将 IsExpanded 作为数据源的一部分。

```
<TreeView ItemsSource="{StaticResource Labels}">
    <TreeView.ItemTemplate>
        <DataTemplate>
            <Grid>
                <TreeViewItem Header="{Binding Key}"
                              IsExpanded="{Binding Path=Value.IsExpanded, Mode=TwoWay}">
                    <TextBlock Text="{Binding Value.RealValue}" />
                </TreeViewItem>
            </Grid>
        </DataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:50:18.560

您可以创建名为“Expandable”的包装类，它包装您的值并公开一个属性 IsExpanded。然后将 TreeViewItems 的 IsExpanded 值以两种方式绑定到 Expandable 的 IsExpanded 属性以存储状态。这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:08:35.253

You can achieve that by creating style for the TreeViewItem and set the binding mode to two way.

# sql - 如何从每个类别中获得前 10 项

> ID：11285545
> 
> 赞同：1
> 
> 时间：2012-07-01T20:51:23.573
> 
> 标签：sql, sql-server, sql-server-2008

使用 SQL Server 2005 / 2008 我有一个表`BB_MEDIAOBJECT (Id, ...)`，其中包括其他几个数据字段`mediaobjects`，`BB_COLLECTION (Id, Name, Description)`其中定义了大约 30 个集合的表，以及一个表`BB_MEDIAOBJECT_COLLECTION (MediaObjectId, CollectionId)`，其中列出了每个集合中的所有项目。

请帮助我定义一个 SQL 查询，`mediaobjects`为每个集合提供前 10 个查询。

根据 Marc 提供的答案，我得到了以下最终结果，其中查询现在正确显示了 10 个最近修改的项目：

```
;WITH PartitionedComponents AS  
(  
    SELECT  
        CollectionID = c.ID,  
        c.Name,  
        c.Description, 
        MediaObjectId = m.ID, 
        ROW_NUMBER() OVER(PARTITION BY c.ID ORDER BY m.modifiedby DESC) AS 'RowNum' 
    FROM  
        dbo.BEELDBANK_COLLECTION c 
    INNER JOIN 
        dbo.BEELDBANK_MEDIAOBJECT_COLLECTION mc ON mc.CollectionId = c.ID 
    INNER JOIN 
        dbo.BEELDBANK_MEDIAOBJECT m ON mc.MediaObjectId = m.Id 
) 
SELECT  
    CollectionID,  
    Name,  
    Description, 
    MediaObjectId 
FROM  
    PartitionedComponents 
WHERE 
    RowNum <= 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:58:23.003

一种方法是使用 CTE（通用表表达式）。您可以按某些标准对数据进行分区 - 即您`Id`的集合 - 并让 SQL Server 为每个分区从 1 开始为所有行编号，按其他标准排序 - 即可能`Id`针对您的媒体对象（您没有指定确切地说-您想要前*10 个*对象-但您没有说明这些对象的排序方式；*前十个*始终意味着必须有*某种顺序*-根据您的情况更改我的 CTE 查询！）

所以尝试这样的事情：

```
;WITH PartitionedComponents AS
(
   SELECT 
       CollectionID = c.ID, 
       c.Name, 
       c.Description,
       MediaObjectId = m.ID,
       ROW_NUMBER() OVER(PARTITION BY c.ID ORDER BY m.ID DESC) AS 'RowNum'
   FROM 
       dbo.BB_Collection c
   INNER JOIN
       dbo.BB_MEDIAOBJECT_COLLECTION mc ON mc.CollectionId = c.ID
   INNER JOIN
       dbo.BB_MEDIAOBJECT m ON mc.MediaObjectId = m.Id
   WHERE
       ......
)
SELECT 
   CollectionID, 
   Name, 
   Description,
   MediaObjectId
FROM 
   PartitionedComponents
WHERE
   RowNum <= 10 
```

在这里，我为每个“分区”（即每个`Id`）选择前十个条目 - 按`Id`（MediaObjects）以降序方式排序。

这是否接近你正在寻找的东西？

# android - 带有矩阵的 ImageView，在初始化时

> ID：11285546
> 
> 赞同：1
> 
> 时间：2012-07-01T20:51:46.427
> 
> 标签：android

我在 imageview 上对一个图像的比例有疑问。imageview 有 scaletype 矩阵。而且我有一个自定义的 Touchlistener，它可以让我进行缩放和拖放等操作。但是当我在 imageview 上设置图像时，它会出现缩放。

我尝试解决它，在此网络和其他网络上搜索许多解决方案。但最后是：

```
ImageView iv = (ImageView) findViewById(R.id.imageView);
iv.setImageResource(R.drawable.test_image);

Matrix mMatrix = iv.getImageMatrix(); mMatrix.setRectToRect(new
  RectF(0, 0, iv.getMeasuredWidth(), iv.getMeasuredHeight()),new
  RectF(0, 0, iv.getMeasuredWidth(), iv.getMeasuredHeight()),
        Matrix.ScaleToFit.CENTER); 
```

xml是：

```
<RelativeLayout...>
.....
    <FrameLayout
        android:id="@+id/root"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/buttonlayer">

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:adjustViewBounds="true"
            android:scaleType="matrix"
            android:contentDescription="@string/desc"
            />
    </FrameLayout>

</RelativeLayout> 
```

但我无法解决它！，imageview 继续显示错误！

提前致谢！

# facebook - 不要为那些已经喜欢它的人显示 facebook like 按钮

> ID：11285552
> 
> 赞同：4
> 
> 时间：2012-07-01T20:52:50.683
> 
> 标签：facebook, facebook-graph-api, facebook-like

我只想为不喜欢该页面的人显示一个页面的 Facebook 喜欢按钮。因此，当用户已经是该页面的粉丝时，不会显示“赞”按钮。

我做了很多研究，我发现我需要实现 Facebook 连接，并获取`user_likes`权限并检查连接的用户是否在他的列表中有页面。这是一个工作示例[http://www.fbrell.com/fb.api/does-like](http://www.fbrell.com/fb.api/does-like)

基本上，我需要执行此操作的代码：

当用户点击连接时，内容将被更改，如果连接的用户过去不喜欢它，则会显示 Facebook 喜欢按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T22:26:32.017

### 实现[JavaScript SDK](https://developers.facebook.com/docs/reference/javascript/)

JS SDK初始化的时候一定要设置`xfbml`为false，这样插件就不会自动渲染了。您必须[请求`user_likes`许可](https://developers.facebook.com/docs/authentication/permissions/)，这意味着您必须将您的网站与 Facebook 应用程序相关联。这样一来，Facebook 就可以跟踪谁在请求什么数据。您可以使用该[`Fb.login()`](https://developers.facebook.com/docs/reference/javascript/FB.login/)方法请求权限并验证您的用户。

拥有 JavaSctipt SDK 后，您只需通过以下方式调用 API

*   图形
    `FB.api('me/likes/PAGE_ID')`

*   FQL
    `FB.api("fql?q='SELECT+uid+FROM+page_fan+WHERE+uid=me()+AND+page_id=PAGE_ID")`

如果那些返回数据你知道不显示类似的插件。但是，如果用户还没有喜欢该页面，则这些调用将返回空结果，然后您可以调用该[`FB.XFBML.parse()`](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)方法来呈现类似的插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T21:08:02.520

You need to make some calls to the Graph API,
After you get the Page ID with `FB.api('http://your-url.com');`
you can check if current user like's your page with an FQL query:

```
'SELECT uid FROM page_fan WHERE uid=me() AND page_id=YOUR-PAGE-ID' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T21:59:13.310

如果您的喜欢按钮位于画布页面或页面选项卡上，您可以通过阅读[signed_request](https://developers.facebook.com/docs/authentication/signed_request/)来实现扇门。对于不同的服务器端语言，stackoverflow 上也有大量的教程和提示。例如这里的答案：[https](https://stackoverflow.com/a/7671496/601466)
://stackoverflow.com/a/7671496/601466 只需搜索“fan gate”和“signed request”。

# wcf - 如何将此 wcf 基本绑定转换为自定义绑定？

> ID：11285555
> 
> 赞同：1
> 
> 时间：2012-07-01T20:53:03.480
> 
> 标签：wcf

如何将此 wcf 基本绑定转换为自定义绑定？

```
 <basicHttpBinding>
    <binding name="BasicHttpBinding_IAutenticacion" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="Certificate" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding> 
```

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:38:32.767

查看在线 wcf 绑定转换器[http://webservices20.blogspot.co.il/2009/08/bindingbox-convert-wcf-bindings.html](http://webservices20.blogspot.co.il/2009/08/bindingbox-convert-wcf-bindings.html)

编辑：当您使用[此服务](http://webservices20.cloudapp.net/default.aspx)时，请记住在之前有一个标签（如默认示例中所示）。那么结果将是：

```
<!-- generated via Yaron Naveh's http://webservices20.blogspot.com/ -->

<customBinding>
  <binding name="NewBinding0">
    <security authenticationMode="CertificateOverTransport" messageSecurityVersion="WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10" requireDerivedKeys="false" securityHeaderLayout="Lax" />
    <textMessageEncoding MessageVersion="Soap11" />
    <httpsTransport />
  </binding>
</customBinding>

<!-- generated via Yaron Naveh's http://webservices20.blogspot.com/ --> 
```

编辑：这是您从代码创建此绑定的方式：

```
 var b = new CustomBinding();
        var s = SecurityBindingElement.CreateCertificateOverTransportBindingElement(
            MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10);
        s.SetKeyDerivation(false);
        s.SecurityHeaderLayout = SecurityHeaderLayout.Lax;

        b.Elements.Add(s);
        b.Elements.Add(new TextMessageEncodingBindingElement() {  MessageVersion = MessageVersion.Soap11});
        b.Elements.Add(new HttpsTransportBindingElement()); 
```

当你创建你的客户端时，你可以像这样设置证书：

```
c.ClientCredentials.ClientCertificate.Certificate 
```

# c++ - 系列的第 n 项

> ID：11285558
> 
> 赞同：6
> 
> 时间：2012-07-01T20:53:24.550
> 
> 标签：c++, algorithm, series

我们必须找到这个系列的第 n 个词[http://oeis.org/A028859](http://oeis.org/A028859)

n<=1000000000

答案应该是模 1000000007

我已经编写了代码，但是当 na 是一个巨大的数字时，时间限制超过了。

```
#include<iostream>
using namespace std

int main()
{
    long long int n;
    cin>>n;

    long long int a,b,c;
    a=1;
    b=3;

    int i;
    for(i=3;i<=n;i++)
    {
        c=(2ll*(a+b))%1000000007;
        a=b;
        b=c; 
    }

    cout<<c;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T21:19:28.680

解决此类问题的标准技术是将其重写为矩阵乘法，然后[通过平方使用取幂](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)来有效地计算矩阵的幂。

在这种情况下：

```
a(n+2) = 2 a(n+1) + 2 a(n)
a(n+1) = a(n+1)

(a(n+2)) = (2  2) * ( a(n+1) )
(a(n+1))   (1  0)   ( a(n)   ) 
```

所以如果我们定义矩阵 A=[2,2 ; 1,0]，那么您可以通过以下方式计算第 n 项

```
[1,0] * A^(n-2) * [3;1] 
```

所有这些操作都可以以 1000000007 为模完成，因此不需要大数库。

它需要 O(log(n)) 2*2 矩阵乘法来计算 A^N，所以总的来说这个方法是 O(log(n))，而你原来的方法是 O(n)。

编辑

[这](http://wilanw.blogspot.co.uk/2009/12/matrix-exponentiation.html)是一个很好的解释和这个方法的 C++ 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:56:58.007

当`long long`还不够时，您可能想要使用 bignum 库。例如[GNU MP](http://gmplib.org/)。

# map - 在 Clojure 上，deftype 和 defrecord 有什么区别，为什么它们在地图之外是必需的？

> ID：11285563
> 
> 赞同：1
> 
> 时间：2012-07-01T20:54:43.023
> 
> 标签：map, clojure, hashmap, deftype

> **可能重复：**
> [为什么 Clojure 有 5 种方法来定义一个类而不是只有一种？](https://stackoverflow.com/questions/7142495/why-clojure-has-5-ways-to-define-a-class-instead-of-just-one)

它们有什么区别，为什么在已经有地图的情况下它们是必要的？

# python - 通过python访问谷歌帐户

> ID：11285564
> 
> 赞同：3
> 
> 时间：2012-07-01T20:55:08.680
> 
> 标签：python, authentication, urllib

我正在开发电子邮件应用程序的原型。我需要在我的应用程序的 python 代码中访问我的个人 gmail 帐户才能执行此操作。我知道我可能可以使用 google API 完成此操作，但我认为尝试通过标准用户界面直接访问对我来说是一个好习惯。我已经概述了我认为在这个过程中涉及的步骤，我希望输入我在步骤中提出的结构以及如何在 python 中实际实现。

第 1 步：**打开登录 gmail 的 url**

1.  即：[https ://accounts.google.com/ServiceLogin](https://accounts.google.com/ServiceLogin)
2.  这一步相当简单：

    `page=urllib2.urlopen("https://accounts.google.com/ServiceLogin")`

第 2 步：**向验证登录的任何页面提交发布请求**

1.  从 html 看起来身份验证页面位于[https://accounts.google.com/ServiceLoginAuth](https://accounts.google.com/ServiceLoginAuth)
2.  我还能够验证登录是由一个表单（名为 gaia_loginform）处理的
3.  此步骤中的几个关键问题：
4.  我如何通过 urllib 实际提交 post 请求？我假设 urlopen 只处理获取请求？
5.  如何从登录页面保存身份验证所需的 cookie、隐藏的表单输入等，并将它们包含在我的获取请求中？

当我对此进行更多思考时，我想知道我是否以正确的方式接近它。原则上，我希望计算机做的就是进入登录页面，输入登录数据并单击提交按钮。在 excel 中，您可以通过录制宏来完成此操作。您可以设想服务器进入 Web 浏览器，输入页面地址，填写信息并单击提交。如果这里有一个等效的解决方案，它似乎比通过 urllib 命令重新创建整个过程要容易得多。希望以上推理是有道理的。欣赏你的想法。

埃文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T21:57:23.257

Selenium 是一个 python 模块，您可以使用它来模拟您想要做的事情。它具有出色的仿真能力，并且 webdriver 实例（一个 selenium 脚本将启动）可以完成普通浏览器所做的一切。

只是为了展示使用硒是多么容易：-

```
 elem = driver.find_element_by_id('username').send_keys("USERNAME") 
```

类似地，诸如 click、submit、find_element_by_class 等命令使 selenium 的使用变得非常容易。

**注意：** Selenium 在屏幕上打开一个 webdriver 实例 (GUI)，因此并不完全在幕后。如果需要，您可能需要查看其他库，例如 mechanize。

一切顺利！

# java - 如何在 Java 中创建一个类数组？

> ID：11285573
> 
> 赞同：-5
> 
> 时间：2012-07-01T20:56:07.827
> 
> 标签：java, arrays, class

我有各种类，想知道如何创建一个类数组以便我可以同时运行它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:59:38.387

就像是：

```
Class[] classes = new Class[] {Class1.class, Class2.class}; 
```

虽然我不太确定你的问题是什么......

# c - 使用变量作为结构标识符

> ID：11285582
> 
> 赞同：0
> 
> 时间：2012-07-01T20:57:08.807
> 
> 标签：c, struct, declaration

我有一个关于动态结构定义的小问题。在 ANSI-C 下声明结构定义时，是否可以使用“字符串”变量作为结构标识符，如下所示？

```
*(a_string_var) = "username";
struct user *(a_string_var); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:00:01.563

不，C 中的所有声明都必须使用静态的内联标识符。

# asp-classic - 经典的 asp 和 XML 解析错误

> ID：11285585
> 
> 赞同：-1
> 
> 时间：2012-07-01T20:58:06.470
> 
> 标签：asp-classic, xmldom

我正在尝试将 xml 发布到银行。它返回我的 xml 响应。

我正在使用此代码：

```
Function HTTPPost(sUrl, sRequest)
  set oHTTP = CreateObject("Microsoft.XMLHTTP")
  oHTTP.open "POST", sUrl,false
  oHTTP.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
  oHTTP.setRequestHeader "Content-Length", Len(sRequest)
  oHTTP.send sRequest
  HTTPPost = oHTTP.responseText  
End Function

sonuc = HTTPPost(serviceUrl, requestXML)
Dim objXMLDoc
Set objXMLDoc = CreateObject("Microsoft.XMLDOM")
objXMLDoc.async = False
objXMLDoc.load(sonuc)           
Dim Node
Set Node = objXMLDoc.documentElement.selectSingleNode("//RRN")
Response.write Node.text 
```

我正在尝试检索

`<RRN>218323000090</RRN>`

需要对象的此错误：'documentElement'

这是银行回复：

```
 <?xml version="1.0" encoding="utf-16"?>
    <PosResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <Host>
        <AuthCode />
        <RRN>218323000090</RRN>
        <Date>0701</Date>
        <Time>230834</Time>
        <RC>58</RC>
      </Host>
      <Result>
        <Code>58</Code>
        <Text />
        <ErrorMessage />
      </Result>
      <TrnxID>842c0d26-3abd-4597-ba10-d92674e16303</TrnxID>
      <TrnxType>Sale</TrnxType>
      <CustomData>
        <Item Name="KazanilanPuan" Value="0" />
        <Item Name="KalanPuan" Value="0" />
        <Item Name="HarcananPuan" Value="0" />
        <Item Name="HarcananPara" Value="0" />
      </CustomData>
    </PosResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:08:31.993

您应该使用`loadXML`来`load`加载字符串的 xml。
另外检查这些还：

[我应该使用哪个版本的 MSXML？](https://stackoverflow.com/questions/951804/which-version-of-msxml-should-i-use)

[asp经典中server.createObject和createobject的区别](https://stackoverflow.com/questions/1493669/difference-between-server-createobject-and-createobject-in-asp-classic)

# jsp - Eclipse RCP 插件 + 嵌入式 Jetty + JSF

> ID：11285588
> 
> 赞同：45
> 
> 时间：2012-07-01T20:59:01.380
> 
> 标签：jsp, jsf, jetty, eclipse-rcp, embedded-jetty

我制作了一个带有嵌入式 Jetty 的 RCP 插件，如下所示：

1) 在 plugin.xml -> Dependencies 中，我添加了以下内容：

```
org.eclipse.equinox.http.jetty
org.eclipse.equinox.http.registry
org.mortbay.jetty.server
javax.servlet 
```

2) 在 plugin.xml -> Extensions 中，我添加了一个 Servlet 扩展点 ( **org.eclipse.equinox.http.registry.servlet** )

```
class: TemperatureServlet
alias:/temperature 
```

**TemperatureServlet**如下所示：

```
import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class TemperatureServlet extends HttpServlet {

    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {

        System.out.println("doGet Called");

        resp.sendRedirect("Convertor.jsp");
    }
} 
```

文件**Convertor.jsp**如下所示：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<f:view>
<h:form>
        <h:panelGrid columns="2">
            <h:outputLabel value="Celsius"></h:outputLabel>
            <h:inputText  value="#{temperatureConvertor.celsius}"></h:inputText>
        </h:panelGrid>
        <h:commandButton action="#{temperatureConvertor.celsiusToFahrenheit}" value="Calculate"></h:commandButton>
        <h:commandButton action="#{temperatureConvertor.reset}" value="Reset"></h:commandButton>
        <h:messages layout="table"></h:messages>
    </h:form>

    <h:panelGroup rendered="#{temperatureConvertor.initial!=true}">
    <h3> Result </h3>
    <h:outputLabel value="Fahrenheit "></h:outputLabel>
    <h:outputLabel value="#{temperatureConvertor.fahrenheit}"></h:outputLabel>
    </h:panelGroup>
</f:view>
</body>
</html> 
```

文件 faces-config.xml 包含：

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
 xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">  
    <managed-bean>
        <managed-bean-name>temperatureConvertor</managed-bean-name>
        <managed-bean-class>hellojsf.TemperatureConvertor</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

</faces-config> 
```

我的插件具有以下层次结构：

```
plugin-name
---src
------class package
---------Activator.java
---------Application.java
---------ApplicationActionBarAdvisor.java
---------ApplicationWorkbenchWindowAdvisor.java
---------Perspective.java
---------TemperatureConvertor.java
---------TemperatureServlet.java
---META-INF
------MANIFEST.MF
---resources
-------WebContent
----------WEB-INF
-------------faces-config.xml
-------------web.xml
----------Convertor.jsp
---plugin.xml 
```

在**Activator**类的方法**start** () 中，我已经像这样启动了 Web 服务器：

```
public void start(BundleContext context) throws Exception {
        super.start(context);
        plugin = this;

        Bundle bundle = Platform.getBundle("org.eclipse.equinox.http.registry");
        if (bundle.getState() == Bundle.RESOLVED) {
            bundle.start(Bundle.START_TRANSIENT);
        }

        Dictionary settings = new Hashtable();
        settings.put("http.enabled", Boolean.TRUE);
        settings.put("http.port", 8080);
        settings.put("http.host", "0.0.0.0");
        settings.put("https.enabled", Boolean.FALSE);
        settings.put("context.path", "/");
        settings.put("context.sessioninactiveinterval", 1800);

        try {
            JettyConfigurator.startServer(PLUGIN_ID + ".jetty", settings);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

在这个插件中，我还添加了以下库：

*   JSTL：javax.servlet.jsp.jstl-1.2.1-javadoc.jar；javax.servlet.jsp.jstl-api-1.2.1-javadoc.jar
*   JSF 2.0（Apache MyFaces JSF Core-2.0 API 2.0.2）

启动应用程序后，如果我在浏览器中输入 localhost:8080/temperature

它不知道在哪里可以找到 Convertor.jsp。我的问题是：如何配置此插件以了解资源位置 WebContent 以及最重要的，如何配置插件以了解如何处理 JSF 并了解 faces-config.xml 和 web.xml。

例如，当我定义扩展 org.eclipse.equinox.http.registry.servlets 时，我可以做这样的事情吗？类：javax.faces.webapp.FacesServlet 别名：/*.jsp

（由 FacesServlet 处理的所有文件 *.jsp）？

非常感谢，如果问题很愚蠢，我很抱歉，但我是 RCP 插件、Jetty 和 JSF 领域的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T16:33:07.127

看看[在 jetty 中设置上下文](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty#Setting_Contexts)。您可以在启动服务器之前定义它。

```
public class OneWebApp
{
    public static void main(String[] args) throws Exception
    {
        String jetty_home = System.getProperty("jetty.home","..");

        Server server = new Server(8080);

        WebAppContext webapp = new WebAppContext();
        webapp.setContextPath("/");
        webapp.setWar(jetty_home+"/webapps/test.war");
        server.setHandler(webapp);

        server.start();
        server.join();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T14:24:22.453

org.eclipse.equinox.jsp.jasper.registry 中的[JSP 扩展工厂](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fhttpservice.htm)类提供了与 servlets 扩展点结合使用的 JSP 支持。

JSPFactory 可以与 org.eclipse.equinox.http.registry 和 Servlets 扩展点一起使用，以允许通过扩展注册表以声明方式使用 JSP。

JSPFactory 将接受与捆绑包中的基本路径相对应的“路径”参数来查找 JSP 资源。可以使用“:”分隔符方法或通过 xml 参数设置此参数。

例如 class="org.eclipse.equinox.jsp.jasper.registry.JSPFactory:/A/PATH" 或

# delphi - VirtualTreeView 使用线程添加根

> ID：11285593
> 
> 赞同：2
> 
> 时间：2012-07-01T20:59:44.130
> 
> 标签：delphi, delphi-7, indy, virtualtreeview, indy-9

我想用这样的线程将根添加到 VirtualTreeView [http://www.delphi-gems.com/index.php/controls/virtual-treeview ：](http://www.delphi-gems.com/index.php/controls/virtual-treeview)

```
function AddRoot ( p : TForm1 ) : Integer; stdcall;
begin
 p.VirtualStringTree1.AddChild(NIL);
end;    

var
 Dummy : DWORD;
 i     : Integer;
begin
 for i := 0 to 2000 do begin
  CloseHandle(CreateThread(NIL,0, @ADDROOT, Self,0, Dummy));
 end;
end; 
```

这样做的原因是我想将我的 INDY 服务器的所有连接添加到 TreeView。Indy 的 onexecute/onconnect get 被称为线程。因此，如果同时有 3 个以上的连接进入，则应用程序会因 TreeView 而崩溃。如果客户端断开连接并且我想删除节点也是如此。

我正在使用 Delphi7 和 Indy9

任何想法如何解决？

编辑：

```
procedure TForm1.IdTCPServer1Disconnect(AThread: TIdPeerThread);
begin 
 VirtualStringTree1.DeleteNode(PVirtualNode(Athread.Data)); // For Disconnection(s)
end;

procedure TForm1.IdTCPServer1Connect(AThread: TIdPeerThread);
begin
 Athread.Data := TObject(VirtualStringTree1.AddChild(NIL)); // For Connection(s);
end; 
```

它适用于 ListView（至少更好）。

编辑：这是我的完整代码：

服务器：

```
unit Unit1;

interface

uses
 Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
 Dialogs, ComCtrls, IDSync, IdBaseComponent, IdComponent, IdTCPServer,
 VirtualTrees;

type
 TForm1 = class(TForm)
 IdTCPServer1: TIdTCPServer;
 VirtualStringTree1: TVirtualStringTree;
 procedure FormShow(Sender: TObject);
 procedure IdTCPServer1Connect(AThread: TIdPeerThread);
 procedure IdTCPServer1Disconnect(AThread: TIdPeerThread);
private
 { Private declarations }
public
 { Public declarations }
end;

type
 TAddRemoveNodeSync = class(TIdSync)
protected
 procedure DoSynchronize; override;
public
 Node   : PVirtualNode;
 Adding : Boolean;
end;

var
 Form1: TForm1;

implementation

{$R *.dfm}

procedure TAddRemoveNodeSync.DoSynchronize;
begin
 if Adding then
  Node := Form1.VirtualStringTree1.AddChild(nil)
 else
  Form1.VirtualStringTree1.DeleteNode(Node);
end;

procedure TForm1.FormShow(Sender: TObject);
begin
 IDTCPServer1.DefaultPort := 8080;
 IDTCPServer1.Active      := TRUE;
end;

procedure TForm1.IdTCPServer1Connect(AThread: TIdPeerThread);
begin
 with TAddRemoveNodeSync.Create do
  try
   Adding := True;
   Synchronize;
   AThread.Data := TObject(Node);
  finally
   Free;
 end;
end;

procedure TForm1.IdTCPServer1Disconnect(AThread: TIdPeerThread);
begin
 with TAddRemoveNodeSync.Create do
  try
   Adding := False;
   Node := PVirtualNode(AThread.Data);
   Synchronize;
  finally
   Free;
   AThread.Data := nil;
  end;
end;

end. 
```

客户（压力者）：

```
program Project1;

{$APPTYPE CONSOLE}

uses
 SysUtils,
 Windows,
 Winsock;

Const
 // Connection Vars
 Port         = 8080;
 Host         = '127.0.0.1';
 StressDelay  = 1; // Miliseconds!

var 
 WSA          : TWSADATA;
 MainSocket   : TSocket;
 Addr         : TSockAddrIn;

begin
 if WSAStartup($0202, WSA) <> 0 then exit;
 Addr.sin_family      := AF_INET;
 Addr.sin_port        := htons(Port);
 Addr.sin_addr.S_addr := INET_ADDR(Host);
 while true do begin
  MainSocket           := Socket(AF_INET, SOCK_STREAM, 0);
  Connect(MainSocket, Addr, SizeOf(Addr));
  CloseSocket(MainSocket); // Disconnect!
  sleep (StressDelay); 
 end;
end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:13:33.537

由于 GUI 在主线程上运行，因此您可以（不应该）直接从您自己的线程访问它。您应该编写自己的 TThread 类，然后使用 Sycnhronize 处理 UI 调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T22:35:08.887

正如您评论的那样，`TIdTCPServer`是一个多线程组件。您必须与主线程同步才能从`TIdTCPServer`事件中安全地访问 UI。您可以为此目的使用 Indy 自己的`TIdSync`（同步）或`TIdNotify`（异步）类，例如：

```
type
  TAddRemoveNodeSync = class(TIdSync)
  protected
    procedure DoSynchronize; override;
  public
    Node: PVirtualNode; 
    Adding: Boolean;
  end;

procedure TAddRemoveNodeSync.DoSynchronize;
begin
  if Adding then
    Node := Form1.VirtualStringTree1.AddChild(nil)
  else
    Form1.VirtualStringTree1.DeleteNode(Node);
end;

procedure TForm1.IdTCPServer1Connect(AThread: TIdPeerThread); 
begin 
  with TAddRemoveNodeSync.Create do
  try
    Adding := True;
    Synchronize;
    AThread.Data := TObject(Node);
  finally
    Free;
  end;
end; 

procedure TForm1.IdTCPServer1Disconnect(AThread: TIdPeerThread); 
begin 
  with TAddRemoveNodeSync.Create do
  try
    Adding := False;
    Node := PVirtualNode(AThread.Data);
    Synchronize;
  finally
    Free;
    AThread.Data := nil;
  end;
end; 
```

**更新：**根据新信息，我会做更多这样的事情：

```
type
  TAddRemoveClientNotify = class(TIdNotify)
  protected
    fAdding: Boolean;
    fIP, fPeerIP: string;
    fPort, fPeerPort: Integer;
    ...
  public
    constructor Create(AThread: TIdPeerThread; AAdding: Boolean); reintroduce;
    procedure DoNotify; override;
  end;

constructor TAddRemoveClientNotify.Create(AThread: TIdPeerThread; AAdding: Boolean);
begin
  inherited Create;
  fAdding := AAdding;
  with AThread.Connection.Socket.Binding do
  begin
    Self.fIP := IP;
    Self.fPeerIP := PeerIP;
    Self.fPort := Port;
    Self.fPeerPort := PeerPort;
  end;
end;

procedure TAddRemoveClientNotify.DoNotify;
var
  Node: PVirtualNode;
begin
  if fAdding then
  begin
    Node := Form1.VirtualStringTree1.AddChild(nil);
    // associate fIP, fPeerIP, fPort, fPeerPort with Node as needed...
  end else
  begin
    // find the Node that is associated with fIP, fPeerIP, fPort, fPeerPort as needed...
    Node := ...;
    if Node <> nil then
      Form1.VirtualStringTree1.DeleteNode(Node);
  end;
end;

procedure TForm1.IdTCPServer1Connect(AThread: TIdPeerThread); 
begin 
  TAddRemoveClientNotify.Create(AThread, True).Notify;
end; 

procedure TForm1.IdTCPServer1Disconnect(AThread: TIdPeerThread); 
begin 
  TAddRemoveClientNotify.Create(AThread, False).Notify;
end; 
```

# python - python 可以告诉我当前块中定义了类的哪些属性吗？

> ID：11285599
> 
> 赞同：1
> 
> 时间：2012-07-01T21:00:52.207
> 
> 标签：python

例如，类声明：

```
class Something(Superclass):
    an_attribute = 1
    another_attribute = 'hello' 
```

python有什么办法可以告诉我`an_attribute`并`another_attribute`在这个类声明中定义？

我猜想，提出这个问题的另一种方法是“我可以`dir`按声明它们的类过滤结果吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T21:03:45.173

类的属性保存在它的特殊`__dict__`字段中。仅包含为当前类定义的`__dict__`属性（以及特殊属性）。正如其他人提到的，它可以直接访问，也可以通过内置`vars()`函数访问。

我强烈建议阅读[这篇](http://www.cafepy.com/article/python_attributes_and_methods/python_attributes_and_methods.html#the-dynamic-dict)文章，它解释了 Python 如何深入处理属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T21:10:09.650

**蟒蛇 2.7**：

```
class A:
    var1 = 2
    va2 = 2
class B(A):
    var3 = 3
    var4 = 4

print(A.__dict__.keys()) #prints ['va2', '__module__', 'var1', '__doc__']
print(B.__dict__.keys()) #prints ['var4', '__module__', '__doc__', 'var3'] 
```

**蟒蛇 3：**

```
print(list(A.__dict__)) #prints ['__module__', 'var1', '__dict__', 'va2', '__weakref__', '__doc__']
print(list(B.__dict__)) #prints ['var4', '__module__', '__doc__', 'var3'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T21:11:04.890

类的属性字典`SomeThing`可以通过`vars(SomeThing)`. 另请参阅 的[文档`vars()`](http://docs.python.org/library/functions.html#vars)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T21:15:21.663

```
>>> class Something(list):
...     an_attribute = 1
...     another_attribute = 'hello'
... 
>>> print vars(Something) == Something.__dict__
True
>>> 
>>> print vars(Something)
{'__module__': '__main__', '__doc__': None, 'an_attribute': 1, '__dict__': <attribute '__dict__' of 'Something' objects>, '__weakref__': <attribute '__weakref__' of 'Something' objects>, 'another_attribute': 'hello'}
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T23:21:29.670

另一种方法是使用[自省](http://docs.python.org/library/inspect.html)，使用@AshwiniChaudhary 的示例：

```
import inspect

class A:
    var1 = 2
    var2 = 2

class B(A):
    var3 = 3
    var4 = 4

[member for member in inspect.getmembers(B) if member not in inspect.getmembers(A)]
#prints [('var3', 3), ('var4', 4)] 
```

使用这种方法，您可以决定要从继承层次结构中的哪个类中“减去”成员，例如：

```
class One:
    #members

class Two:
    #members

...

class N:
    #members

[member for member in inspect.getmembers(N) if member not in inspect.getmembers(NMinusK)] 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-01T21:13:41.883

有内置的*hasattr*功能

```
hasattr(object, name) 
```

如果字符串是对象属性之一的名称，则结果为 True，否则为 False。（这是通过调用*getattr(object, name)*并查看它是否引发异常来实现的。）

# ruby-on-rails - 注册后立即显示模式？

> ID：11285600
> 
> 赞同：1
> 
> 时间：2012-07-01T21:00:52.783
> 
> 标签：ruby-on-rails, twitter-bootstrap, modal-dialog

当用户在我的页面上注册时，我希望他们被重定向到 root_path（我已经知道如何在用户控制器中执行此操作）。但是然后我希望在此页面前面显示一个模式（并且这应该只在用户第一次看到这个根/主页时发生（就像一个 Flash 消息）。

这是我在用户控制器中的创建方法：

```
def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      redirect_to root_path
    else
      render 'new'
    end
  end 
```

modal 放在 app/views/layouts/_modal.html.erb 中。有谁知道如何做到这一点？

（杰普，我是新手：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T21:13:27.437

您提到了 flash，我认为利用 Rails 的预建 flash 使用来显示您的模式是一个好主意。

```
def create
  @user = User.new(params[:user])
  if @user.save
    sign_in @user
    session[:modal] = true
    redirect_to root_path
  else
    render 'new'
  end
end 
```

**在您看来**：

```
<% if session[:modal] == true %>
  <%= render :partial => 'layouts/modal'%>
<% end %> 
```

# javascript - 如何在通过无限滚动加载图像时将我的脚本应用于图像？

> ID：11285601
> 
> 赞同：0
> 
> 时间：2012-07-01T21:01:07.573
> 
> 标签：javascript, jquery, html, css, tumblr

对于我的博客[http://seans.ws](http://seans.ws)，我编写了一个查看图像大小的脚本，如果它比默认容器大小更宽，它会计算出它需要多少负边距才能将其与其余部分居中的内容。

这很好用，但是我通过无限滚动加载了图像，并且它们不受我的脚本的操纵。

我的无限滚动js：[http ://static.tumblr.com/q0etgkr/ytzm5f1ke/infinitescrolling.js](http://static.tumblr.com/q0etgkr/ytzm5f1ke/infinitescrolling.js)

```
$(window).load(function() {
    var centerBigImages = $(function() {
        $('img').css('marginLeft', function(index, value){
        if($(this).width() > 660) {
            return -($(this).width() - 660)/2;            
        }
        return value;
    });
});

centerBigImages(); 
```

我在 IE 中查看了这个[DOMNodeInserted 等效项？](https://stackoverflow.com/questions/2143929/domnodeinserted-equivalent-in-ie)，但这有点超出我的 js newb 头:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:13:42.303

在您正在使用的无限滚动的缩小脚本上运行[JS-](http://jsbeautifier.org/) beautifier 后，我能够找到[这个](http://jsgt.org/lib/ajax/ref.htm)日文文档。运行谷歌翻译，据我所知，您应该能够在调用该`SendRequest()`方法时将回调函数作为第一个参数传递，我相信您调用的是无限滚动。

在这种情况下，您应该能够`centerBigImages()`作为第一个参数传递：

```
SendRequest(centerBigImages, ...your other parameters); 
```

**更新：**

再四处寻找，我发现[了这个未缩小](http://jsgt.org/lib/ajax/051/jslb_ajax0516.js.txt)的脚本版本。不幸的是，代码注释是日文的，但我想你也可以在这些注释上运行谷歌翻译以获得一些额外的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:01:39.020

我最近一直在玩弄这个想法，因为我刚刚开始为我的 tumblr 博客（使用无限滚动）定制一些代码。它有点绕圈子，我不确定现在或将来对 DOMSubtreeModified 的支持情况如何，但我想我会出于普遍的兴趣而发帖。

```
var triggerChange = function(event) {
    //do stuff
    monitorChanges();
};

var monitorChanges = function() {
    //Notice the use of 'one' so modifications I make in doStuff does not also cause infinite loop
    jQuery('#outer').one('DOMSubtreeModified', triggerChange);
}

monitorChanges(); 
```

在这里的小提琴中得到了最好的展示：http: [//jsfiddle.net/zf7rG/5/](http://jsfiddle.net/zf7rG/5/)

# c# - 为什么在手指树与链接列表等中使用元组

> ID：11285603
> 
> 赞同：4
> 
> 时间：2012-07-01T21:01:28.037
> 
> 标签：c#, data-structures, tree, functional-programming

关于手指树，如本文所见并在Eric Lippert的[这篇](http://blogs.msdn.com/b/ericlippert/archive/2008/02/12/immutability-in-c-part-eleven-a-working-double-ended-queue.aspx)[文章](http://www.soi.city.ac.uk/~ross/papers/FingerTree.pdf)中提到。

我不明白为什么要使用显式的元组排列，而不是每个手指的某种链表结构。也就是说，为什么我们要定义`One(x), Two(x, y), Three(x, y, z), Four(x, y, z, a)`而不是仅仅拥有一个不太理想的双端队列对象`LessOptimalDeque.AddLeft(x)`呢？

是不是有点慢？我的意思是，即使您可以使用某些数据结构来重新使用某些节点/节点组的内存？

在论文中，它甚至提到：

> 练习 1\. 在上面的演示中，为简单起见，我们将数字表示为列表。更准确和更有效的实现将使用该类型

```
data Digit a = One a  
| Two a a
| Three a a a
| Four a a a a 
```

> 修改上述定义以使用此数字定义。

我不知道为什么它更有效。它是否仅与作者使用的功能语言相关，否则也可以使用我上面提出的数据结构来完成？

**编辑**
![在此处输入图像描述](../Images/8c48c146e834a068d7c7dd49527e0972.png)

像这样实现手指怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:05:55.727

要了解为什么这在 H​​askell 中更有效：

```
data Digit a
           = One a  
           | Two a a
           | Three a a a
           | Four a a a a 
```

比这（向量的明显编码）：

```
data List a = One a
            | Many a (List a) -- a linked list of at least one element. 
```

我们可以观察分配 a`Digit`和 a所需的堆结构`List`。

```
Four 'x' 'y' 'z' 'd' 
```

对比

```
Many 'x' (Many 'y' (Many 'z' (One 'd'))) 
```

在前一种情况下，我们保存了 3 个构造函数。在后者中，我们被迫为结构的（可能是无限的）尾部分配额外的堆对象。通常，`Digit`表示将分配*O(n-1)*更少的堆单元，因为结构的大小在最外层的构造函数中编码。作为结果，我们还可以确定*O(1)*中的大小。

# php - IF 语句不改变变量的结果

> ID：11285604
> 
> 赞同：0
> 
> 时间：2012-07-01T21:01:32.987
> 
> 标签：php, javascript, jquery, html

我目前有这个

```
$(document).ready(function(){

like = "like";
current_likes = parseInt(50);
    $("#add-love").click(function(){
        if(like = "like"){
            $("#my_like").removeClass('hidden-profile');
            current_likes++;
            $("#like_count").html(current_likes);
            like = "unlike";
            console.log(like);
        }else{
            $("#my_like").addClass('hidden-profile');
            current_likes--;
            $("#like_count").html(current_likes);
            like = "like";
        }
    });
}); 
```

但是当我点击like按钮时，它会更新like计数器和变量（我已经通过记录它来检查它）但是当它第二次被点击时它不会落入if语句的第二部分，而是它只是起作用好像还是喜欢=“喜欢”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T21:02:32.750

你是在分配`=`，而不是比较`==`。

```
if(like = "like"){
// Should be
if(like == "like"){
//------^^^ 
```

请注意，您已将变量声明`like`为`window`范围，因为您没有使用`var`关键字。如果它应该仅限于`ready()`函数，请在函数`var like = 'like';`内部使用`ready()`。如果您确实打算在`window`范围内使用，建议`var`在函数之外使用关键字`ready()`。

```
// Declare at higher scope
var like;  
$(document).ready(function(){
  // And access in the function...
  like = "like";
  current_likes = parseInt(50);
  //etc...
  //etc...
}); 
```

# iphone - 在 iPhone 的 TextView 中显示来自 XML 的随机元素

> ID：11285609
> 
> 赞同：0
> 
> 时间：2012-07-01T21:02:59.317
> 
> 标签：iphone, xml, xcode, sdk, xml-parsing

我正在做一些事情来做圣经中的每日经文，我希望它是随机的。我有一个 xml 的诗句，看起来像这样：

```
<bible translation="KJV">
<testament name="Old">

    <book name="Genesis">
        <chapter number="1">
            <verse number="1">In the beginning God created the heaven and the earth.</verse>
            <verse number="2">And the earth was without form, and void; and darkness was upon the face of the deep. And the Spirit of God moved upon the face of the waters.    </verse>

<!-- THE REST OF THE XML HERE -->

                     </chapter>
             </book>
   </testament> 
```

我想使用解析器从其中一节经文中创建一个 NSString 文本，但由于它们都被列出，因为每个元素都可能有几个，并且都以不同的方式命名。关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:06:00.620

You could use a plist instead of the XML implementation. I find plists easy to implement and manage.

You could load your plist into a dictionary and then randomly select from there.

# c# - 如何使用 autocad .net api C# 更改表格单元格中的文本宽度？

> ID：11285612
> 
> 赞同：0
> 
> 时间：2012-07-01T21:03:13.620
> 
> 标签：c#, api, autocad, .net

我使用 Autocad .net api C# 创建表。

```
 var table = new Table(); 
```

在单个文本（DBText 类）中，更改属性的文本宽度 - WidthFactor。

如何使用 autocad .net api C# 更改表格单元格中的文本宽度？ [[图像 - 单元格表中不同的文本宽度]](http://s1.ipicture.ru/uploads/20120702/p726B8IO.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-01T08:17:38.727

AutoCAD 表格中的文本可以使用与 MText 相同的技术进行格式化。RTF

`{\W0.5;Text Width = 0.5}`

有关[RTF的完整参考](https://en.wikipedia.org/wiki/Rich_Text_Format)

# python - 在 Pandas 数据框中选择多列

> ID：11285613
> 
> 赞同：1526
> 
> 时间：2012-07-01T21:03:16.987
> 
> 标签：python, pandas, dataframe, select

我在不同的列中有数据，但我不知道如何提取它以将其保存在另一个变量中。

```
index  a   b   c
1      2   3   4
2      3   4   5 
```

如何选择并将其保存到 df1 `'a'`？`'b'`

我试过了

```
df1 = df['a':'b']
df1 = df.ix[:, 'a':'b'] 
```

似乎没有一个工作。

* * *

## 回答 #1

> 赞同：2368
> 
> 时间：2012-07-02T02:43:02.740

无法以您尝试的方式对列名（字符串）进行切片。

在这里，您有几个选择。[`__getitem__`如果您从上下文中知道要切出哪些变量，则可以通过将列表传递给语法](https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#basics)（[]）来仅返回这些列的视图。

```
df1 = df[['a', 'b']] 
```

或者，如果对它们进行数字索引而不是它们的名称很重要（例如，您的代码应该在不知道前两列的名称的情况下自动执行此操作），那么您可以这样做：

```
df1 = df.iloc[:, 0:2] # Remember that Python does not slice inclusive of the ending index. 
```

此外，您应该熟悉 Pandas 对象的视图与该对象的副本的概念。上述方法中的第一个将在内存中返回所需子对象（所需切片）的新副本。

然而，有时 Pandas 中的索引约定不这样做，而是为您提供一个新变量，该变量仅引用与原始对象中的子对象或切片相同的内存块。第二种索引方式会发生这种情况，因此您可以使用该`.copy()`方法对其进行修改以获取常规副本。发生这种情况时，更改您认为的切片对象有时会更改原始对象。随时注意这一点总是好的。

```
df1 = df.iloc[0, 0:2].copy() # To avoid the case where changing df1 also changes df 
```

要使用`iloc`，您需要知道列位置（或索引）。由于列位置可能会改变，而不是硬编码索引，您可以与数据框对象的方法`iloc`一起使用来获取列索引。`get_loc``columns`

```
{df.columns.get_loc(c): c for idx, c in enumerate(df.columns)} 
```

现在您可以使用此字典通过名称访问列并使用`iloc`.

* * *

## 回答 #2

> 赞同：213
> 
> 时间：2016-04-30T12:39:08.817

从 0.11.0 版开始，可以按照您尝试使用索引器的方式对列*进行*[`.loc`](http://pandas-docs.github.io/pandas-docs-travis/whatsnew/v0.11.0.html#selection-choices)切片：

```
df.loc[:, 'C':'E'] 
```

相当于

```
df[['C', 'D', 'E']]  # or df.loc[:, ['C', 'D', 'E']] 
```

`C`并通过.返回列`E`。

* * *

随机生成的 DataFrame 的演示：

```
import pandas as pd
import numpy as np
np.random.seed(5)
df = pd.DataFrame(np.random.randint(100, size=(100, 6)),
                  columns=list('ABCDEF'),
                  index=['R{}'.format(i) for i in range(100)])
df.head()

Out:
     A   B   C   D   E   F
R0  99  78  61  16  73   8
R1  62  27  30  80   7  76
R2  15  53  80  27  44  77
R3  75  65  47  30  84  86
R4  18   9  41  62   1  82 
```

要获取从 C 到 E 的列（请注意，与整数切片不同，列中包含“E”）：

```
df.loc[:, 'C':'E']

Out:
      C   D   E
R0   61  16  73
R1   30  80   7
R2   80  27  44
R3   47  30  84
R4   41  62   1
R5    5  58   0
... 
```

基于标签选择行也是如此。从这些列中获取行 'R6' 到 'R10'：

```
df.loc['R6':'R10', 'C':'E']

Out:
      C   D   E
R6   51  27  31
R7   83  19  18
R8   11  67  65
R9   78  27  29
R10   7  16  94 
```

`.loc`还接受布尔数组，因此您可以选择数组中对应条目为 的列`True`。例如，如果列名在列表中，则`df.columns.isin(list('BCD'))`返回- True ；假的，否则。`array([False, True, True, True, False, False], dtype=bool)``['B', 'C', 'D']`

```
df.loc[:, df.columns.isin(list('BCD'))]

Out:
      B   C   D
R0   78  61  16
R1   27  30  80
R2   53  80  27
R3   65  47  30
R4    9  41  62
R5   78   5  58
... 
```

* * *

## 回答 #3

> 赞同：132
> 
> 时间：2012-10-31T18:57:33.980

假设您的列名 ( `df.columns`) 是`['index','a','b','c']`，那么您想要的数据位于第三列和第四列。如果您在脚本运行时不知道他们的名字，您可以这样做

```
newdf = df[df.columns[2:4]] # Remember, Python is zero-offset! The "third" entry is at slot two. 
```

[正如 EMS 在他的回答](https://stackoverflow.com/questions/11285613/selecting-multiple-columns-in-a-pandas-dataframe/11287278#11287278)中指出的那样，`df.ix`切片列更简洁一些，但是`.columns`切片界面可能更自然，因为它使用了普通的一维 Python 列表索引/切片语法。

***警告***:`'index'`的名称不好`DataFrame`。相同的标签也用于真实`df.index`属性，即`Index`数组。因此，您的列由返回，`df['index']`真正的 DataFrame 索引由`df.index`. An`Index`是一种特殊的`Series`优化类型，用于查找其元素的值。对于 df.index，它用于按标签查找行。该`df.columns`属性也是一个`pd.Index`数组，用于通过标签查找列。

* * *

## 回答 #4

> 赞同：85
> 
> 时间：2016-02-04T14:05:35.083

在最新版本的 Pandas 中，有一种简单的方法可以做到这一点。列名（它们是字符串）**可以**以您喜欢的任何方式进行切片。

```
columns = ['b', 'c']
df1 = pd.DataFrame(df, columns=columns) 
```

* * *

## 回答 #5

> 赞同：73
> 
> 时间：2012-07-08T17:55:12.493

```
In [39]: df
Out[39]: 
   index  a  b  c
0      1  2  3  4
1      2  3  4  5

In [40]: df1 = df[['b', 'c']]

In [41]: df1
Out[41]: 
   b  c
0  3  4
1  4  5 
```

* * *

## 回答 #6

> 赞同：49
> 
> 时间：2018-11-21T15:32:56.237

与熊猫，

机智的列名

```
dataframe[['column1','column2']] 
```

通过 iloc 和具有索引号的特定列进行选择：

```
dataframe.iloc[:,[1,2]] 
```

带有 loc 列名可以像这样使用

```
dataframe.loc[:,['column1','column2']] 
```

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2014-09-03T11:30:59.433

您可以提供要删除的列列表并返回 DataFrame，其中仅包含使用`drop()`Pandas DataFrame 上的函数所需的列。

只是说

```
colsToDrop = ['a']
df.drop(colsToDrop, axis=1) 
```

将返回一个只有列`b`和的 DataFrame `c`。

该`drop`方法记录[在这里](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.drop.html)。

* * *

## 回答 #8

> 赞同：25
> 
> 时间：2017-05-02T09:41:52.950

我发现这个方法非常有用：

```
# iloc[row slicing, column slicing]
surveys_df.iloc [0:3, 1:4] 
```

更多细节可以在[这里](http://www.datacarpentry.org/python-ecology-lesson/02-index-slice-subset/)找到。

* * *

## 回答 #9

> 赞同：25
> 
> 时间：2018-08-15T18:13:41.823

从 0.21.0 开始，不推荐使用`.loc`或`[]`与一个或多个缺少标签的列表一起使用，取而代之的是`.reindex`. 所以，你的问题的答案是：

```
df1 = df.reindex(columns=['b','c']) 
```

`.loc[list-of-labels]`在以前的版本中，只要找到至少一个键， using就可以工作（否则它会引发 a `KeyError`）。此行为已弃用，现在显示警告消息。推荐的替代方法是使用`.reindex()`.

[在索引和选择数据](https://pandas.pydata.org/pandas-docs/stable/indexing.html#reindexing)中阅读更多信息。

* * *

## 回答 #10

> 赞同：24
> 
> 时间：2020-04-21T03:03:00.807

您可以使用该`pandas.DataFrame.filter`方法过滤或重新排序列，如下所示：

```
df1 = df.filter(['a', 'b']) 
```

这在链接方法时也非常有用。

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2019-02-20T01:01:58.837

你可以使用熊猫。

我创建数据框：

```
import pandas as pd
df = pd.DataFrame([[1, 2,5], [5,4, 5], [7,7, 8], [7,6,9]],
                  index=['Jane', 'Peter','Alex','Ann'],
                  columns=['Test_1', 'Test_2', 'Test_3']) 
```

数据框：

```
 Test_1  Test_2  Test_3
Jane        1       2       5
Peter       5       4       5
Alex        7       7       8
Ann         7       6       9 
```

按名称选择一列或多列：

```
df[['Test_1', 'Test_3']]

       Test_1  Test_3
Jane        1       5
Peter       5       5
Alex        7       8
Ann         7       9 
```

您还可以使用：

```
df.Test_2 
```

你得到专栏`Test_2`：

```
Jane     2
Peter    4
Alex     7
Ann      6 
```

您还可以使用 . 从这些行中选择列和行**`.loc()`**。这称为**“切片”**。请注意，我从列`Test_1`到`Test_3`：

```
df.loc[:, 'Test_1':'Test_3'] 
```

“切片”是：

```
 Test_1  Test_2  Test_3
Jane        1       2       5
Peter       5       4       5
Alex        7       7       8
Ann         7       6       9 
```

如果你只是想从列`Peter`和：`Ann``Test_1``Test_3`

```
df.loc[['Peter', 'Ann'], ['Test_1', 'Test_3']] 
```

你得到：

```
 Test_1  Test_3
Peter       5       5
Ann         7       9 
```

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2018-01-03T07:56:07.023

如果你想通过行索引和列名获取一个元素，你可以像`df['b'][0]`. 它和你想象的一样简单。

或者您可以使用`df.ix[0,'b']`- 索引和标签的混合使用。

**注意：**自 v0.20 起，`ix`已弃用`loc`/ `iloc`。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2020-08-02T19:10:36.830

尝试使用`pandas.DataFrame.get`（参见[文档](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.get.html)）：

```
import pandas as pd
import numpy as np

dates = pd.date_range('20200102', periods=6)
df = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
df.get(['A', 'C']) 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2020-05-19T08:18:08.920

```
df[['a', 'b']]  # Select all rows of 'a' and 'b'column 
df.loc[0:10, ['a', 'b']]  # Index 0 to 10 select column 'a' and 'b'
df.loc[0:10, 'a':'b']  # Index 0 to 10 select column 'a' to 'b'
df.iloc[0:10, 3:5]  # Index 0 to 10 and column 3 to 5
df.iloc[3, 3:5]  # Index 3 of column 3 to 5 
```

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2018-10-15T11:43:43.840

一种不同且简单的方法：迭代行

### 使用 itrows

```
 df1 = pd.DataFrame() # Creating an empty dataframe
 for index,i in df.iterrows():
    df1.loc[index, 'A'] = df.loc[index, 'A']
    df1.loc[index, 'B'] = df.loc[index, 'B']
    df1.head() 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2018-07-21T21:28:41.507

前面的答案中讨论的不同方法是基于这样的假设，即用户知道要删除或子集的列索引，或者用户希望使用一系列列（例如在 'C' : 'E' ）。

**pandas.DataFrame.drop()**当然是根据用户定义的列列表对数据进行子集化的一个选项（尽管您必须小心，始终使用数据帧的副本，并且不应将*就地参数设置为**True* !!）

另一种选择是使用**pandas.columns.difference()**，它对列名进行设置差异，并返回包含所需列的数组索引类型。以下是解决方案：

```
df = pd.DataFrame([[2,3,4], [3,4,5]], columns=['a','b','c'], index=[1,2])
columns_for_differencing = ['a']
df1 = df.copy()[df.columns.difference(columns_for_differencing)]
print(df1) 
```

输出将是：

```
 b   c
1   3   4
2   4   5 
```

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2019-01-29T05:37:50.140

您还可以使用[df.pop()](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.pop.html)：

```
>>> df = pd.DataFrame([('falcon', 'bird',    389.0),
...                    ('parrot', 'bird',     24.0),
...                    ('lion',   'mammal',   80.5),
...                    ('monkey', 'mammal', np.nan)],
...                   columns=('name', 'class', 'max_speed'))
>>> df
     name   class  max_speed
0  falcon    bird      389.0
1  parrot    bird       24.0
2    lion  mammal       80.5
3  monkey  mammal

>>> df.pop('class')
0      bird
1      bird
2    mammal
3    mammal
Name: class, dtype: object

>>> df
     name  max_speed
0  falcon      389.0
1  parrot       24.0
2    lion       80.5
3  monkey        NaN 
```

请使用`df.pop(c)`.

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2019-05-26T19:21:50.553

我已经看到了几个答案，但我仍然不清楚。您将如何选择那些感兴趣的列？

答案是，如果您将它们收集在一个列表中，您可以使用该列表引用这些列。

### 例子

```
print(extracted_features.shape)
print(extracted_features)

(63,)
['f000004' 'f000005' 'f000006' 'f000014' 'f000039' 'f000040' 'f000043'
 'f000047' 'f000048' 'f000049' 'f000050' 'f000051' 'f000052' 'f000053'
 'f000054' 'f000055' 'f000056' 'f000057' 'f000058' 'f000059' 'f000060'
 'f000061' 'f000062' 'f000063' 'f000064' 'f000065' 'f000066' 'f000067'
 'f000068' 'f000069' 'f000070' 'f000071' 'f000072' 'f000073' 'f000074'
 'f000075' 'f000076' 'f000077' 'f000078' 'f000079' 'f000080' 'f000081'
 'f000082' 'f000083' 'f000084' 'f000085' 'f000086' 'f000087' 'f000088'
 'f000089' 'f000090' 'f000091' 'f000092' 'f000093' 'f000094' 'f000095'
 'f000096' 'f000097' 'f000098' 'f000099' 'f000100' 'f000101' 'f000103'] 
```

我有以下列表/NumPy 数组`extracted_features`，指定 63 列。原始数据集有 103 列，我想准确提取那些，然后我会使用

```
dataset[extracted_features] 
```

你最终会得到这个

[![在此处输入图像描述](../Images/d897cde470eb5c79e243b6105effa255.png)](https://i.stack.imgur.com/3jLjo.png)

[这是您在机器学习](https://en.wikipedia.org/wiki/Machine_learning)中经常使用的东西（更具体地说，在特征选择中）。我也想讨论其他方式，但我认为其他 Stack Overflower 用户已经涵盖了这一点。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2020-10-11T10:40:52.347

要选择多个列，请在之后提取并查看它们：`df`之前命名为数据框，然后创建新数据框`df1`，然后选择要提取和查看的列 A 到 D。

```
df1 = pd.DataFrame(data_frame, columns=['Column A', 'Column B', 'Column C', 'Column D'])
df1 
```

所有必需的列都会显示出来！

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2021-05-04T08:19:45.257

要排除某些列，您可以[将](https://pandas.pydata.org/docs/reference/api/pandas.Index.drop.html)它们放在列索引中。例如：

```
 A   B    C     D
0  1  10  100  1000
1  2  20  200  2000 
```

选择除两个之外的所有：

```
df[df.columns.drop(['B', 'D'])] 
```

输出：

```
 A    C
0  1  100
1  2  200 
```

您还可以使用[truncate](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.truncate.html)方法来选择中间列：

```
df.truncate(before='B', after='C', axis=1) 
```

输出：

```
 B    C
0  10  100
1  20  200 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-05-02T21:20:23.143

```
def get_slize(dataframe, start_row, end_row, start_col, end_col):
    assert len(dataframe) > end_row and start_row >= 0
    assert len(dataframe.columns) > end_col and start_col >= 0
    list_of_indexes = list(dataframe.columns)[start_col:end_col]
    ans = dataframe.iloc[start_row:end_row][list_of_indexes]
    return ans 
```

只需使用此功能

# jquery - jquery背景图片淡入淡出

> ID：11285615
> 
> 赞同：0
> 
> 时间：2012-07-01T21:03:20.060
> 
> 标签：jquery, background-image, fadein

我正在使用 jQuery 加载填充页面宽度/高度的背景图像。我在头部有以下内容：

```
$(document).ready(function() {
    $('body').css({
    'background-image' : 'url({HTML_BASE}images/backgrounds/randoms/{BACK_IMG})',
        'background-repeat' : 'no-repeat',
        'background-position' : 'center top',
        'background-attachment': 'fixed',
        'background-size': '100% 100%',
    });
    $('#home-promo').innerfade({ 
        speed: 'slow', 
        timeout: 5000, 
        type: 'sequence', 
        containerheight: 'auto'
    });

    $('.model-search').innerfade({ 
        speed: 'slow', 
        timeout: 5000, 
        type: 'sequence', 
        containerheight: '393'
    });

}); 
```

这工作正常，可以在[http://projects.snowshtechnologies.com/golden_dragon/home/看到](http://projects.snowshtechnologies.com/golden_dragon/home/)

我希望 BG 图像从黑色背景颜色淡入。我查看了 Stack 上的其他一些线程，这些线程表明它不可能作为 css 中定义的主体元素，但在这种情况下，BG 图像正在由 jQuery 加载。我将如何在此代码中添加淡入以使图像带有漂亮的淡入淡出效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:17:20.883

您可以将 body 设置`background-color`为`black`然后制作一个像 div 一样的元素，将其定位为`fixed`然后`fade`将其放置在应该填充浏览器视口的整个宽度和高度的元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:15:37.967

I would just create a container on top of the body at 100% width and height to fill the space available and if necessary specify a `z-index` to position it below other elements. Then set the background image of the container in CSS and set `opacity: 0`. Finally use jQuery's `fadeTo()` to transition to 100% opacity.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-01T21:10:18.890

With CSS3 transitions you could add a fade in to the background image. Therefore if you add the following property:

```
transition: background 0.5s; 
```

To your body div, you could get a fade in for browsers that support it. However, this wouldn't be supported on browsers that do not support CSS3 transitions.

# objective-c - Xcode构建错误clang失败

> ID：11285619
> 
> 赞同：2
> 
> 时间：2012-07-01T21:04:24.610
> 
> 标签：objective-c, xcode4.3, clang, mapbox

我的 iPhone 应用程序中缺少某些内容。

我没有成功修复这个错误，这对我来说似乎是一个火星错误......我根本不明白，即使经过多次搜索......

```
ProcessPCH /Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Intermediates/PrecompiledHeaders/IntraMuros-Prefix-etlohrlrqzwcjicedfazzdvoaqbq/IntraMuros-Prefix.pch.pth IntraMuros/IntraMuros-Prefix.pch normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd "/Users/xyz/iOS - Applications/intramuros-ios/Application"
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch i386 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.6 -g -Wno-conversion -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -iquote /Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Intermediates/IntraMuros.build/Debug-iphonesimulator/IntraMuros.build/IntraMuros-generated-files.hmap -I/Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Intermediates/IntraMuros.build/Debug-iphonesimulator/IntraMuros.build/IntraMuros-own-target-headers.hmap -I/Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Intermediates/IntraMuros.build/Debug-iphonesimulator/IntraMuros.build/IntraMuros-all-target-headers.hmap -iquote /Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Intermediates/IntraMuros.build/Debug-iphonesimulator/IntraMuros.build/IntraMuros-project-headers.hmap -I/Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Products/Debug-iphonesimulator/include -I/Users/xyz/iOS -I- -IApplications/intramuros-ios/Application/IntraMuros/Vendors/mapbox-ios-sdk -I/Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Intermediates/IntraMuros.build/Debug-iphonesimulator/IntraMuros.build/DerivedSources/i386 -I/Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Intermediates/IntraMuros.build/Debug-iphonesimulator/IntraMuros.build/DerivedSources -F/Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Products/Debug-iphonesimulator --serialize-diagnostics /Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Intermediates/PrecompiledHeaders/IntraMuros-Prefix-etlohrlrqzwcjicedfazzdvoaqbq/IntraMuros-Prefix.pch.dia -c "/Users/xyz/iOS - Applications/intramuros-ios/Application/IntraMuros/IntraMuros-Prefix.pch" -o /Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Intermediates/PrecompiledHeaders/IntraMuros-Prefix-etlohrlrqzwcjicedfazzdvoaqbq/IntraMuros-Prefix.pch.pth -MMD -MT dependencies -MF /Users/xyz/Library/Developer/Xcode/DerivedData/IntraMuros-cqmesmesegqjxofftymiymllpzow/Build/Intermediates/PrecompiledHeaders/IntraMuros-Prefix-etlohrlrqzwcjicedfazzdvoaqbq/IntraMuros-Prefix.pch.d

clang: error: '-I-' not supported, please use -iquote instead
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我为这个应用程序使用了mapbox项目，也许它是相关的，但我不考虑它？！

真正奇怪的是，该项目的其他 iOS 开发人员可以使用相同的代码毫无问题地构建和运行......我们由 Github 进行版本控制。

有没有人已经见过这种类型的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T11:19:16.667

看起来您在 xCode 项目`-`的某个设置中有一个迷路。`Header Search Paths`

不幸的是，除了使用项目查看器查看文档外，没有特别简单的方法可以找到它（您可以使用文本编辑器对其进行编辑，但这可能会使问题恶化）。

基本上，在 Project Navigator（左窗格）中选择项目文档，然后查看项目的 Build Settings，然后依次查看每个目标的 Build Settings，查找`Header Search Paths`设置以及它显示为粗体的任何位置，您将想要双击并确保没有单个`-`（或 a`-`后跟空格或逗号，可以将其解析为单个参数）。

如果您没有以这种方式找到它，您可能有一个解析为 的构建设置`-`，因此请查看构建设置的底部并确保没有设置为`-`（或`-`或`-,`）的用户定义变量.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:08:28.673

Either in the prefix or the linker flags, you've told clang to process a flag named -I-, which is not a valid flag. Remove it and build again.

# c - 使用 dup2 和 strtok 将一个文件重定向到另一个文件

> ID：11285621
> 
> 赞同：1
> 
> 时间：2012-07-01T21:04:58.600
> 
> 标签：c

我必须编写一个程序，在其中我需要使用 strtok 和 dup2 将一个文件重定向到另一个文件，但我还需要让用户实际输入命令 cat < file1 > file2，但不是来自 shell，而是通过使用我的程序。这就是为什么我需要strtok。而我的程序无法运行的原因可能就是因为这个，因为我并不真正了解 strtok 是如何工作的。我在互联网上找到了一个类似的程序，但他们只是使用 ls 命令并将其重定向到文件。而已。我的程序要复杂得多。我的意思是，在 shell cat < file1 > file2 中说会更容易，但出于某种原因，他们希望我们这样做。所以，无论如何，这就是我到目前为止所拥有的（这里我只是将我在互联网上找到的内容与我之前已经拥有的内容结合起来。我们必须做类似的事情，但用户只需要使用 ls 或 ls -l。很简单的东西。至少对我来说，这要困难得多。）

```
 #include <fcntl.h>
 #include <unistd.h>
 #include <stdio.h>
 #include <errno.h>
 #include <sys/wait.h>
 #include <string.h>

 int main() {
     pid_t pid;
     char line[256];
     char *args[129];
     int i;
     int fd;
     int status;
     char *temp;

     while (1) {
            printf(">");
            if (fgets(line, 256, stdin) == 0) {
                 exit(0);
        }
            else {
            pid = fork();
            if (pid == 0) {
                i = 0;
                temp = strtok("<",line);
                while (temp != NULL) {
                   args[i++] = temp;
                   temp = strtok(">",line);
                   args[i] = '\0';
                 }
                fd = open("hello", O_RDONLY);
                dup2(fd, STDIN_FILENO);
                fd = open("world", O_WRONLY|O_CREAT|O_TRUNC, S_IRWXU);
                dup2(fd, STDOUT_FILENO );
                close(fd);
                execvp(args[0], args); 
               } 

              else {
                  close(fd);
                  wait(&status);
              }
            }
       } 
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:27:39.043

除了倒退的`strtok`论点，还有其他问题。

*   父进程关闭`fd`它从未打开过（它是一个未初始化的变量，所以你正在关闭一个可能不存在的随机 fd）
*   子进程进行两次打开和两次 dup2，但只有一次关闭。您正在泄漏 fd。
*   硬编码的文件名
*   您寻找单个“<”，但有一个用于检测多个“>”的循环
*   缺乏`<stdlib.h>`为`exit()`
*   谁真的认为`S_IRWXU`比 更具可读性`0700`？

如果您的目标是近似真实 shell 的行为，您至少应该忽略重定向运算符周围的空格。

# iphone - UIBarButtonItem stops working after I change enabled property

> ID：11285625
> 
> 赞同：0
> 
> 时间：2012-07-01T21:06:07.233
> 
> 标签：iphone, objective-c, ios5

I have a UIBarButton that is connected, through the interface builder, to the following method:

```
- (void)btnJumpToStart_Touch:(id)sender {
     index = 0;
     [self setCurrentPage];
     [self showCard];
} 
```

`index` is defined early in the implementation. `setCurrentPage` is this:

```
- (void)setCurrentPage {

    // I need to set the bottom page control first,
    // this allows me to display that the user is viewing the 
    // first half of the deck or the second
    if(index < 11) {
        [self.bottomPageControl setCurrentPage:0];
    }
    else {
        [self.bottomPageControl setCurrentPage:1];
    }

    // now we set the top page control.  I use the index that is being displayed,
    // then divided by whether or not the bottom page control is showing the 
    // first half, or the second
    [self.topPageControl setCurrentPage:(index - ((deck.count / 2) * self.bottomPageControl.currentPage))];

    // next I set the 'jump to end/jump to start' button's enabled properties

    // the jump to end will only be anabled when the 
    // index is less than the deck's count - 1
    if(index < ([deck count] - 1)) {
        [self.btnJumpToEnd setEnabled:YES];
    }
    else {
        [self.btnJumpToEnd setEnabled:NO];
    }

    // the jump to start will only be enabled when the
    // index is greater than 0
    if(index > 0) {
        [[self btnJumpToStart] setEnabled:YES];
    }
    else {
        [[self btnJumpToStart] setEnabled:NO];
    }

} 
```

Finally, `showCard` is this:

```
- (void)showCard {
    Card *card = [deck cardAtIndex:index];
    [cardImage setImage:[UIImage imageNamed:card.imageFile]];
} 
```

Now, as you can see, the `btnJumpToStart` will be disabled, or enabled, in the `setCurrentPage` method. it will start out as disabled (I set it as such in the IB). When the criteria is met to 'enable' the button, it doesn't work properly. The `index` will be set to 0, but it won't set the current page properly, and the card is not shown. The weird thing is that after a few presses of the button, it might work.

Very intermittent...

Thanks for any help you can provide

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:54:27.433

尝试将其设置`-(void)btnJumpToStart_Touch:(id)sender`为`-(IBAction)btnJumpToStart_Touch:(id)sender`@Popeye 提到的。如果这不起作用，请尝试`UIBarButton`在控制器的`viewDidLoad`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T23:01:57.267

好的，所以我注释掉了启用/禁用控件的代码。然后我做到了，以便在 IB 中启用按钮。

我在模拟器中玩过这个产品。完成此操作后，我取消了该代码的注释，然后将按钮重新设置为在开始时禁用。现在它工作...

# gnuplot - 如何在 pm3d 图中自定义 z 标签

> ID：11285627
> 
> 赞同：1
> 
> 时间：2012-07-01T21:06:41.387
> 
> 标签：gnuplot

我有使用 pm3d 的图

```
set pm3d at b 
```

在这些图中，彩色条显示颜色到数字的映射。我使用 z 轴的转换将函数值映射到适当的 z 值范围

```
trafo(x,y)=...
splot trafo(func(x,y)) 
```

显然，颜色映射现在将显示颜色到 trafo(func(x,y)) 的映射，但我希望它显示颜色到 func(x,y) 的映射，类似于不显示的对数图对数，而是轴上抽动处的对数参数。我知道

```
set format cb "%.01t*10^{%T}" 
```

但这并不是我想要的。直线前进

```
unset ztics
set ztics add ("Pi" trafo(pi)) 
```

似乎也不起作用......

那么，如何自定义颜色图呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:07:50.773

“直截了当

```
unset ztics
set ztics add ("Pi" trafo(pi)) 
```

似乎也不起作用……”

那是因为颜色条上的抽动是由 控制的`cbtics`，而不是`ztics`。

尝试：

```
unset cbtics
set cbtics add ("Pi" trafo(pi)) 
```

它应该可以正常工作。

请注意，如果您在 3-d 空间中查看此图，`set ztics add (...)`则应显示在 z 轴上。但是，如果您已经完成`set view map`或`set pm3d map`类似的事情，它就不会出现，因为这会带走 z 轴。

# python - Python/Django 根据该字符串是否存在连接一个字符串

> ID：11285630
> 
> 赞同：5
> 
> 时间：2012-07-01T21:07:51.210
> 
> 标签：python, django, string-concatenation

我正在一个名为“地址”的 Django 模型上创建一个属性。我希望地址由我的模型上的多个字段的串联组成。问题在于，并非此模型的所有实例都具有所有这些字段的值。所以，我只想连接那些有值的字段。

最好/最 Pythonic 的方法是什么？

以下是模型中的相关字段：

```
house = models.IntegerField('House Number', null=True, blank=True)
suf = models.CharField('House Number Suffix', max_length=1, null=True, blank=True)
unit = models.CharField('Address Unit', max_length=7, null=True, blank=True)
stex = models.IntegerField('Address Extention', null=True, blank=True)
stdir = models.CharField('Street Direction', max_length=254, null=True, blank=True)
stnam = models.CharField('Street Name', max_length=30, null=True, blank=True)
stdes = models.CharField('Street Designation', max_length=3, null=True, blank=True)
stdessuf = models.CharField('Street Designation Suffix',max_length=1, null=True, blank=True) 
```

我可以做这样的事情：

```
def _get_address(self):
    return "%s %s %s %s %s %s %s %s" % (self.house, self.suf, self.unit, self.stex, self.stdir, self.stname, self.stdes, self.stdessuf) 
```

但结果中会有额外的空格。

我可以做一系列 if 语句并在每个语句中连接，但这看起来很难看。

处理这种情况的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T21:14:16.873

```
parts = (1, 'a', 'b', 2, 'c', 'd', None, 'f')
# parts = (self.house, self.suf, self.unit, 
#           self.stex, self.stdir, self.stname, 
#           self.stdes, self.stdessuf)
' '.join(str(part) for part in parts if part is not None)
# '1 a b 2 c d e f' 
```

您只需做一个列表比较，并检查是否有任何值不是无，并将它们转换为字符串，以便它们正确连接而不管类型如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T21:12:11.393

我会使用生成器来获取非 Falsy 值，然后加入它们。例如：

```
parts = (self.house, self.suf, self.unit, self.stex, self.stdir, self.stname, self.stdes, self.stdessuf)
return " ".join(str(s) for s in parts if s is not None) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T21:17:56.387

```
" ".join(filter(None, 
               [self.house, self.suf, self.unit, 
                self.stex, self.stdir, self.stname, 
                self.stdes, self.stdessuf])) 
```

# android - Android ListView 项目可见性

> ID：11285631
> 
> 赞同：0
> 
> 时间：2012-07-01T21:07:51.670
> 
> 标签：android, android-layout

我正在尝试创建一个显示多个项目的屏幕。为此，我创建了一个列表视图，但我不确定如何处理如何从中添加/删除项目。由于我使用的是自定义列表视图项目，因此我创建了自己的列表适配器，但现在我需要一种在单击按钮时添加项目的方法。

有没有办法创建可以获取无限数量的项目的列表视图（而不是将其传递到固定长度的视图对象数组中）？另外从列表视图中删除项目的最佳方法是什么？设置可见性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:00:26.197

当您添加项目并从列表中删除项目时，需要通知适配器所以

```
adapter.notifyDataSetChenged(); 
```

或在列表中您可以添加没有项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:09:51.870

将新项目添加到您的数据并使用：

```
adapter.notifyDataSetChenged(); 
```

您也可以通过这种方式删除项目

# model-view-controller - Should Mobile and Desktop Versions of a Site Be in Separate Zend Modules?

> ID：11285635
> 
> 赞同：0
> 
> 时间：2012-07-01T21:08:30.150
> 
> 标签：model-view-controller, zend-framework, mobile, responsive-design

I've inherited a project that is built in a PHP MVC framework (Zend in this case), and is using different modules for the mobile and desktop versions of the site. The project is in early stages (so functionality is only about 20% complete and buggy) and as you may have guessed there is alot of repeated code.

The desktop and mobile sites will have different layouts, although there are common elements. My instinct tells me separating these into different Zend modules is *not* the best approach. I'm thinking I should refactor the code into a single module, and confine the layout differences to views as much as possible. Also, leveraging responsive design as much as possible and only using separate views where necessary (as dictated by my client's requirements). Conceptually I see many advantages to this approach, but being rather new to Zend (and mobile design as well), I'm wondering if I am going to encounter any Zend-specific headaches if I do this refactor (just being a bit paranoid here)?

What is considered "best practice" in general (mobile & desktop co-design)? Any specific advice about Zend MVC?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:13:05.407

使用模块的原因是为了提供一种将模型分成具有不同关注点的区域的方法，例如用户部分/管理部分，您实际上有两个不同的模型。

使用模块来分隔移动版和桌面版绝对是错误的做法，您将到处都有重复的代码。如果您以后必须支持更多的移动格式怎么办？您最终可能会得到相同的代码重复 3 次、4 次或更多次。

您的直觉是正确的，移动设备或台式机的模型将保持不变。控制器应相应地决定向客户端提供哪个视图。

遇到这个问题将是一个很好的测试，你是否正确地分离了你的关注点。您应该最终得到一个系统，您可以轻松地将其他视图放入其中，并且根本不需要修改模型。

对于什么是大主题，这是一个相当简单的答案，但我希望它有所帮助。

# java - java mapping for oracle number type

> ID：11285639
> 
> 赞同：0
> 
> 时间：2012-07-01T21:09:10.497
> 
> 标签：java, database, oracle, bigdecimal

I have database with oracle number type. Could there any possible issues with using java `Double` when updating table with numeric column. Should i switch `BigDecimal` or `Double` is approriate type.

As I fas as I know, `BigDecimal` is used when arbitrary precision required, when deal with prices for example.

Consider simple API `updatePrice(Double d)` Should i persist double as is or `BigDecimal.valueOf(d)` is preferable ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:15:30.753

如果您想要精确使用 BigDecimal 任意小数点。

但是@Aprillion 的评论是正确的：如果您执行包含双精度的 Java 计算，那么即使持久性数据类型是 BigDecimal 格式，您也会失去精度。

因此，如果您想确保从/到该字段的正确小数精度，请使用 BigDecimal。

我希望这有帮助！

# audio-streaming - How to use files/streams as source/sink in PulseAudio

> ID：11285640
> 
> 赞同：1
> 
> 时间：2012-07-01T21:09:43.383
> 
> 标签：audio-streaming, pulseaudio

I'm a PulseAudio noob, and I'm not sure if I'm even using the correct terminology. I've seen that PulseAudio can perform echo cancellation, but it needs a source and a sink to filter from, and a new source and sink. I can provide my mic and my audio-out as the source and sink, right?

Now, here's my **situation:** I have two video streams, say, rtmp streams, or consider two flv files, say at any given moment, stream X is the input stream that's coming from another computer's webcam+mic and stream Y is the output stream that I'm sending, (and it's coming from my computer's webcam+mic).

**Question:** Back to the first paragraph - here's the thing, I don't want to use my mic and my audio-out, instead, I want to use these two "input" and "output" streams as my source and sink so to speak (of course, I'll use xuggler maybe, to extract just the audio from X and Y). It may be a strange question, and I have my reasons for doing this strange this - I need to experiment and verify the results to see.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:37:31.593

对于每个播放设备，PulseAudio 都有相应的捕获“*.monitor”设备，允许录制播放的声音。

提示：您可以使用 pavucontrol 或 kmix 实用程序为应用程序选择设备，PulseAudio 会记住应用程序的设备设置。

# c++ - 如何绘制 HICON？

> ID：11285642
> 
> 赞同：1
> 
> 时间：2012-07-01T21:09:54.500
> 
> 标签：c++, c, winapi, visual-c++, icons

我想在系统托盘中显示一个图标。

看起来应该很简单，但我不知道如何创建`HICON`和绘制它！所有“兼容的位图”、“兼容的 DC”等东西真的让我很困惑。

如何绘制图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:09:55.983

无需过多介绍，您可以使用以下 C++ 类。

它使用[Windows 模板库](http://sourceforge.net/projects/wtl/)，但将其转换为纯 C 应该非常简单。

```
using namespace WTL;
class CIconDC : public CDC
{
public:
    HBITMAP hBmpOld;

    CIconDC(int cx = GetSystemMetrics(SM_CXSMICON),  // width
            int cy = GetSystemMetrics(SM_CYSMICON),  // height
            HDC templateDC = CClientDC(NULL))  // automatically calls ReleaseDC
    {
        this->CreateCompatibleDC(templateDC);
        hBmpOld = this->SelectBitmap(CreateCompatibleBitmap(templateDC, cx, cy));
    }

    ~CIconDC() { DeleteObject(this->SelectBitmap(hBmpOld)); }

    HICON CreateIcon() const
    {
        // temporarily swap bitmaps to get handle of current bitmap
        HBITMAP hBitmap = this->GetCurrentBitmap();
        ICONINFO ii = { TRUE, 0, 0, hBitmap, hBitmap };
        return CreateIconIndirect(&ii);
    }
}; 
```

使用该类**非常**简单：

```
CIconDC dc;
dc.LineTo(10, 10);  // for example -- you can do whatever you want with the DC
CIcon hIcon = dc.CreateIcon();  // converted to an HICON! 
```

# jquery - 如何定义 ASP.NET MVC3 MIME 类型？和JPlayer

> ID：11285652
> 
> 赞同：0
> 
> 时间：2012-07-01T21:11:58.870
> 
> 标签：jquery, asp.net-mvc-3, video, mime-types, jplayer

有没有办法在调试时在 ASP.NET MVC3 中定义 MIME 类型？我读到您必须为 IIS 7 配置定义它们。但我想知道 jplayer 视频是否可以在 IE9 中调试时以某种方式定义 MIME 类型。JPlayer 视频适用于除 IE9 以外的所有浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:17:52.910

如果那是一个 .ashx 处理程序（我也建议使用它而不是直接路径，因为它允许您执行一些安全检查），您将能够在代码隐藏中将任何您想要的标头添加到 Response 对象。否则，我认为您无法控制 mime 类型或其他任何内容。[在这里](https://stackoverflow.com/questions/5924647/setting-mime-types-using-the-asp-net-development-server)讨论过。

# jquery - 如何在或/和逻辑中为电子邮件表单设计两个输入并进行验证

> ID：11285656
> 
> 赞同：0
> 
> 时间：2012-07-01T21:12:27.817
> 
> 标签：jquery, forms, validation, email

我的目的是用户只输入电子邮件或手机号码。我在 OR 逻辑中通知用户的代码部分成功

**但是......**如果用户想把这两个细节都给我电子邮件和手机号码。并错误地输入了该信息，然后他/她将通知该信息以更新数据。

```
<form action="index.php" method="post">
    <label for="email">Your E-Mail Address *</label>
       <input id="UserEmail" type="text" name="email" maxlength="80" size="30"/>
            </p><p>
             Or   
             </p><p>
    <label for="mobile">Mobile Number *</label>
     <input id="mobile" type="text" name="mobile" maxlength="50" size="30" /></p> 
```

下面是jquery代码

```
var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
var emailaddressVal = $("#UserEmail").val();

// email & mobile input cheak
if(emailaddressVal == '' && $("#mobile").val() == '') {
    $("#UserEmail").after('<p><span class="error">Please enter your email address.</span></p>')
    $("#mobile").after('<p><span class="error">Please enter your Mobile number.</span></p>')
    hasError = true;
}  
// validating currect email
else if(!emailReg.test(emailaddressVal)) {
    $("#UserEmail").after('<p><span class="error">Enter a valid email address.</span></p>') 
    hasError = true;
} 
// Mobile number
else if( $("#mobile").val()) {
    $("#mobile").after('<p><span class="error">Enter currect Mobile number.</span></p>')
    hasError = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:03:35.590

您可以使用单选按钮轻松解决您的问题：

```
<form name="form1" action="" method="post" onsubmit="return !checkForm()">
<input type="radio" name="em" value="email" /> <label>Email <input type="text" name="email" value="name@server.ext" onclick="this.form.em[0].checked=true" /></label> <p></p><br/>
<input type="radio" name="em" value="mobile" checked="checked" /> <label>Mobile <input type="text" name="mobile" value="1234567890" onclick="this.form.em[1].checked=true" /></label> <p></p><br/>
<input type="submit" name="save_form" value="Send" />
</form> 
```

然后你的 javascript 看起来像这样：

```
function checkForm(){
    var form = document.forms.form1;
    var hasError = false;
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    var mobileReg = /^[+]?[()/0-9\. -]{9,}$/;
    var emailaddressVal = form.email.value.replace(/^\s+|\s+$/g,"");
    var mobilenumberVal = form.mobile.value.replace(/^\s+|\s+$/g,"");
    var valid1 = emailReg.test(emailaddressVal); //email
    var valid2 = mobileReg.test(mobilenumberVal); //mobile
    if (form.em[0].checked && !valid1) { //invalid email
        $(form.email).parent().next("p").html('<span class="error">Enter a valid email address.</span>');
        hasError = true;
    } else {
        $(form.email).parent().next("p").html('');
    }
    if (form.em[1].checked && !valid2) { // invalid mobile
        $(form.mobile).parent().next("p").html('<span class="error">Enter currect Mobile number.</span>')
        hasError = true;
    } else {
        $(form.mobile).parent().next("p").html('');
    }
    //alert('Error='+hasError +' EmailOk='+ valid1+ ' MobileOk='+ valid2);
    return hasError;
} 
```

这是[工作代码](http://pastebin.com/RRu2swpc)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:30:51.617

**解决方案在这里**

```
 var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    var mobileReg =  /^\d\d\d\d\d\d\d\d\d\d$/m;
    var emailaddressVal = $("#UserEmail").val();
    var mobileval = $("#mobile").val();

   //state chk both blank if yes alert
   //OR logic 0-0 
    if(emailaddressVal == '' && mobileval == '') {
        $("#UserEmail").after('<p><span class="error blurry">Please enter your email address.</span></p>')
        .effect("shake", { times:3 }, 20); console.log("email");
        $("#mobile").after('<p><span class="error blurry">Please enter your Mobile number.</span></p>')
        .effect("shake", { times:3 }, 20); console.log("mobile");
        hasError = true;
    }

    //chk mobile have value but not email
    //OR logic 1-0 
    else if(!mobileReg.test(mobileval) && emailaddressVal == '') {
        $("#mobile").after('<p><span class="error blurry">Enter currect Mobile number.</span></p>')
        .effect("shake", { times:3 }, 20);console.log("currect mobile");
         hasError = true;
    }
    //chk mobile dont hv the value but email have
    //OR logic 0-1 
    if(!emailReg.test(emailaddressVal) && mobileval == '') {
        $("#UserEmail").after('<p><span class="error blurry">Enter a valid email address.</span></p>')
        .effect("shake", { times:3 }, 20); console.log("valid email");

        hasError = true;

    }
    //chk the input mobile & email have value
    //OR logic 1-1 
    else        
    if(!emailReg.test(emailaddressVal) &&!mobileReg.test(mobileval)) {
        $("#UserEmail").after('<p><span class="error blurry">Enter a valid email address.</span></p>')
        .effect("shake", { times:3 }, 20); console.log("valid email combination");

        $("#mobile").after('<p><span class="error blurry">Enter currect Mobile number.</span></p>')
        .effect("shake", { times:3 }, 20);console.log("currect mobile combination");

        hasError = true;

    } 
```

# assembly - Writing Assembly Code for a Tattoo

> ID：11285673
> 
> 赞同：6
> 
> 时间：2012-07-01T21:15:46.263
> 
> 标签：assembly, nasm

I am requesting help with writing 32-bit assembly code for a simple "program tattoo.”</p>

I would like to get a tattoo. After thinking it over, I have decided that I would like a tattoo that uses assembly code and deals with my daughter, Alisha. My idea is come up with an "illogical computation," one that defies the laws of assembly language. I want to pay homage to how illogical having a child seems to someone like me... someone who is used to 1s and 0s.

I'm thinking of using x86-based 32-bit registers like EAX, EBX, and ECX and of course some pushes and pops.

The tattoo would NOT have the comments (nothing in parentheses), but would include the start: notation.

```
start:
    mov eax, 53656C66h   (ASCII for "Self")
    mov ebx, 57696665h   (ASCII for "Wife")
    add ebx, eax

    push ebx
    push 3F81DBh         (Decimal 4162011 = daughter's birth date)

    pop ecx              (The first pop would give my daughter's birth date)
    pop ecx              (the second pop would NOT give the answer of eax added to ebx,
                          but would rather give my daughter’s nickname)
    ??? ecx 
```

My idea is to replace ??? with the instruction to read and then show that the value in ecx is now 416c69h (ASCII for "Ali," my daughter's nickname). I think this idea would be awesome, and I will post pictures of the tattoo if I get it (of course).

My idea is that the last pop would defy computer logic. In essence, having a child defies the "logic" that we know, so this was my attempt to parallel the beauty of birth.

Any other ideas?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T15:07:25.620

有点奇怪的是，这个程序真的什么都不做。为什么不编写代码，通过组合您的姓名、您妻子的姓名以及她的出生日期的某些编码等内容来生成您女儿的姓名？也许通过一系列`XOR`具有一些有意义值的指令？

# c++ - m = XMMatrixIdentity() 后崩溃 - 类中的对齐内存？

> ID：11285680
> 
> 赞同：9
> 
> 时间：2012-07-01T21:17:31.010
> 
> 标签：c++, matrix, directx, sse, xna-math-library

我正在查看 DirectX SDK 中的教程。教程 5 工作正常，但是在我将代码复制并分离到我自己的类之后，我在启动我的应用程序时遇到了奇怪的错误。

该行是：

```
g_World1 = XMMatrixIdentity(); 
```

因此，我在 xnamathmatrix.int operator= 中出现错误，如下所示：

```
XMFINLINE _XMMATRIX& _XMMATRIX::operator=
(
    CONST _XMMATRIX& M
)
{
    r[0] = M.r[0];
    r[1] = M.r[1];
    r[2] = M.r[2];
    r[3] = M.r[3];
    return *this;
} 
```

错误信息是：

```
Access violation reading location 0xffffffff 
```

我在某处读到它可能是由连接到 XMFLOAT4X4 / XMMATRIX 的东西引起的：

> 您是否考虑过使用 XMFLOAT4X4 来存储矩阵，并且只使用 XMMATRIX？

但我想我已经在使用 XMMATRIX。

MyClass.h：

```
private:
    XMMATRIX g_World1; 
```

我的类.cpp：

```
void init(){
   g_World1 = XMMatrixIdentity();
} 
```

我不认为我应该改变 XMMATRIX g_World1; 到 XMFLOAT4X4 g_World1，因为它会产生如下错误：

> 错误 C2679：二进制“=”：未找到采用“XMMATRIX”类型右侧操作数的运算符（或没有可接受的转换）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T21:27:37.250

由于 XMMATRIX 表示一个 16 字节对齐的 4x4 矩阵，因此 g_World1 的未对齐分配导致访问冲突（简单地说，g_World1 的地址不能被 16 整除）。

解决方案排序：使结构成员对齐 16 个字节（以便 MyClass 将 g_World1 “就位”）。但是您仍然必须确保 MyClass 实例位于可被 16 整除的地址。

您可以使用放置“新”运算符来分配 MyClass 对象。

关于对齐请参见此处：[如何对齐指针](https://stackoverflow.com/questions/6320264/how-to-align-pointer)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-26T07:28:04.730

XMVECTOR 和 XMMATRIX 是“注册代理”类型。您可以安全地将它们用作 Xbox 360、Xbox One 和 Windows x64 平台的类型，因为它们在堆栈上和在堆上分配的数据本身都具有 16 字节对齐。

将它们用于 Windows 32 位或 Windows RT/ARM 需要更多的努力，因为本机对齐小于 16 字节。一种方法是 DirectX Tool Kit 使用的技术……它使用 pImpl 习惯用法，并且 pImpl 内部类显式分配了 16 字节对齐，这是直接使用 XMVECTOR 和 XMMATRIX 类型的地方。另一种方法是使用所有各种“存储”类型，例如 XMFLOAT4 和 XMFLOAT4X4。

注意：[DirectXMath 程序员指南](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418725.aspx)涵盖了这一点。这不是一篇很长的文档，而且包含很多提示和建议。

PS：在 MSDN 代码库上有一个 Win32 桌面的标准 Direct3D 教程版本，不需要 DirectX SDK...它只使用 VS 2012 或 VS 2013 中包含的 Windows 8.x SDK。[在此处输入链接描述](http://blogs.msdn.com/b/chuckw/archive/2013/09/20/directx-sdk-samples-catalog.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T23:02:24.000

谢谢你。

最后我决定使用 XMLoadFloat4x4() 和 XMStoreFloat4x4() 函数。我将类的成员存储为 Float4x4，并在每个 render() 循环中将它们转换为 XMMATRIX 以供临时使用。但是......这是一个快速或愚蠢的解决方案？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-24T22:18:28.497

在“Frank D. Luna”的“Directx 11 3D 游戏编程简介”一书中，它说：

不要将 XMMATRIX 用作类或结构的成员。如果需要，请始终使用 XMFloat4x4 并加载并存储回来。

# ios - Dojo Mobile 1.7.2 TabBarButton iOS Retina 支持

> ID：11285683
> 
> 赞同：1
> 
> 时间：2012-07-01T21:18:14.487
> 
> 标签：ios, mobile, dojo, retina-display

有谁知道 Dojo 移动 TabBarButton（用于包含在 1.7.2 TabBar 中）是否支持 iOS 视网膜图标？我知道 CSS 媒体查询与 JQuery 一起使用，但我找不到有关如何将 CSS 媒体查询与 Dojo Mobile Toolkit 一起使用的信息。

所以在下面的例子中......

```
@media only screen and (-webkit-min-device-pixel-ratio: 2) { 
 .ui-icon-myapp-settings { 
      background: url("settings@2x.png") no-repeat rgba(0, 0, 0, 0.4) !important;
       background-size: 18px 18px; 
 } 
```

“ui-icon-myapp-settings”我认为是特定于 JQuery 的。我将使用什么来隔离我为 Dojo Mobile TabBarButton 定义的图标？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:05:32.447

如果 dojo 使用 css 背景图像，这可以使用“背景大小：包含”来完成。但是因为它使用标签，所以你无能为力。

# c# - 从 C# .NET 流式传输时从 HTML5 视频获取导航功能

> ID：11285688
> 
> 赞同：3
> 
> 时间：2012-07-01T21:18:39.037
> 
> 标签：c#, html, video-streaming

我正在尝试为使用 HTML5 标记显示的视频提供少量内容保护。

我试图通过使用一次性令牌从我的 C# .NET 应用程序提供视频来做到这一点。

我已经成功交付了视频（它可以播放），但我无法使用播放器的导航栏。也就是我不能点击进度条来改变玩家的当前位置。位置指示器只是弹回原始位置并恢复。此外，一旦视频播放完毕，如果不重新加载页面，就无法再次播放。

我已禁用令牌的“一次性”部分。所以问题不是一次性使用。这与我提供文件的方式有关。我尝试返回 C# File 对象和 FileStream 对象作为结果，效果相同。

任何的意见都将会有帮助。

//这里是视图

@{ 指导 aGuid;

```
string Guidstr;

aGuid = Guid.NewGuid();

Guidstr = aGuid.ToString();

Session[Guidstr] =@"Chrome_ImF.mp4" ; 
```

}

///这里是控制器代码

```
 public FileResult File(string id)
    {
        string moviename;
        moviename =  (Session[id] as string);
        moviename = @"C:\dev\asp\hercules\hercules\Content\samples\" + moviename;
        //Session.Remove(id);

        return File(moviename, "video/mp4");
    }

    public FileStreamResult Stream(string id)
    {
        string moviename;
        moviename = Session[ id ] as string;
       // Session.Remove(id);

        FileStream fs = new FileStream(moviename, FileMode.Open, FileAccess.Read);
        fs.Seek(0, SeekOrigin.Begin);
        return File(fs,"video/mp4");

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T02:32:15.867

我最终使用 Codeplex (http://mvcresumingactions.codeplex.com/) 的 MVCResumingActions 库解决了这个问题。

似乎视频播放器希望能够对视频发出特定范围的请求（为了在资源完全加载之前向前搜索）。如果您的回复没有正确表明您支持该功能，那么所有导航基本上都会被烤掉。

所以我开始走这条路，并找到了一些关于这个话题的好资源。

[http://dotnetslackers.com/articles/aspnet/Range-Specific-Requests-in-ASP-NET.aspx](http://dotnetslackers.com/articles/aspnet/Range-Specific-Requests-in-ASP-NET.aspx) http://www.devx.com/dotnet/Article/22533/1954?pf=true

但 MVCResumingActions 项目提供了最快和最简单的路径。

该项目本身没有文档，所以这就是我所做的

1) 如果您的 IDE 中没有安装 NuGet，请安装它。

2) 从包管理控制台安装包

**PM> 安装包 MVC.ResumingActionResults**

3）在您的控制器中，添加此 using 子句

```
using VikingErik.Mvc.ResumingActionResults; 
```

4）然后定义您的操作方法。

将其声明为 ResumingActionResults 提供的类型之一。我不知道如何使用提供的所有类型，但在我的情况下，我想流式传输视频，所以我选择了“ResumingFileStreamResult”

这是我的测试操作，位于我自己的“StreamController.cs”文件中。我把它命名为“维京人”以纪念埃里克

```
public ResumingFileStreamResult Viking (string file)

 {

  moviename = Server.MapPath("~/Content/samples/" + file);

  FileStream fs = new FileStream(moviename, FileMode.Open, FileAccess.Read);

  ResumingFileStreamResult fsr = new ResumingFileStreamResult(fs,"video/mp4");

  return fsr;

} 
```

以下是我放入视图文件的内容：

```
<script src="http://api.html5media.info/1.1.5/html5media.min.js"></script>
 <video controls preload>
   <source src="/Stream/Viking?file=Chrome_ImF.mp4" />
 </video> 
```

瞧，它就像一个魅力。

# sql - 数据库中此列的目的是什么？

> ID：11285689
> 
> 赞同：0
> 
> 时间：2012-07-01T21:18:42.643
> 
> 标签：sql, database, sql-server-2008

我正在查看我组织的数据库，有一个名为 dbo.Account_Alerts 的表，其中有一列名称很奇怪：

```
IsExpectedGreaterThanFieldMarginNotification(bit, null) 
```

这样一个领域的目的是什么？bit 和 Boolean 一样吗？

谢谢你，阿德尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:22:47.677

是的 bit 完全是一个布尔值。它只能是 1（真）或 0（假）。

对于这个领域，我可以假设的是：

由于字段的长度比预期的要长而导致的通知。

如果为高（1），则应启动通知，否则不启动。

（+请注意，这种理解只是我的假设！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T21:22:50.040

是的位与布尔值相同，它的值可以为 1（真）或 0（假），在您的情况下，它也采用空值。

字符串值 TRUE 和 FALSE 可以转换为位值；TRUE 转换为 1，FALSE 转换为 0。

转换为位会将任何非零值提升为 1。

# mysql - 在删除时使用默认值更新外键引用

> ID：11285690
> 
> 赞同：3
> 
> 时间：2012-07-01T21:18:54.240
> 
> 标签：mysql, phpmyadmin, foreign-keys, innodb, foreign-key-relationship

我目前正在制作一个关于主外键关系的表格......

```
 book table                    

                bookid     bookname         author
                 0         No book           no author
                 1         Engg Maths        Greiwal
                 2         Java Basics       James Gosling
                 3         Mahabharata       Ved Vyasa
                 4         Ramayana          Valmiki
                 5         Harry Potter      JK Rowling

                        usertable

               userid       name           bookid
                1          Arjun             2
                2          Charles           2
                3          Babbage           3 
```

这里 bookid 是 usertable 中的外键，也是 booktable 中的主键......现在我听说了级联、 setnull 、restrict 和无操作约束......

**0 设置为 usertable 中 bookid 列的默认值.....**

`Now i want a situation when a bookid(primary) entry is deleted from the main table i.e booktable, the entires containing bookid in the user table should be updated to the default value ( i.e here 0 ).....`

**有没有什么方法……？？？**

我只能说我正在研究 phpmyadmin mysql innodb ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:30:26.680

没有内置的方法，但是有一种解决方法。您可以使用 DELETE 触发器来完成此操作：

```
DELIMITER $$
CREATE TRIGGER `book_delete` BEFORE DELETE ON `booktable`
  FOR EACH ROW BEGIN
    UPDATE `usertable` SET `bookid` = 0 WHERE `bookid` = OLD.`bookid`;
  END $$
DELIMITER ; 
```

但是，请注意 0 不为空，因此如果您对 usertalbe 有任何参照完整性约束（也就是说，如果您将 bookid 设置为 FOREIGN KEY 列），这将引发错误。

作为最佳实践，您确实应该使用 NULL 来表示 usertable 中的行在 booktable 中没有相应的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T21:40:48.660

使用 MySQL，您可以`ON DELETE SET NULL`在外键上使用。

例如：

```
CREATE TABLE t1 (
 id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
 title VARCHAR(256)
) ENGINE=InnoDB;

CREATE TABLE t2 (
 id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
 parent_id INT UNSIGNED, 
 INDEX(parent_id),
 FOREIGN KEY (parent_id) REFERENCES t1(id) ON DELETE SET NULL
) ENGINE=InnoDB;

insert into t2 values (null, 3);
insert into t2 values (null, 2); 
```

这将导致表格`t2`如下所示：

```
+----+-----------+
| id | parent_id |
+----+-----------+
|  2 |         2 |
|  1 |         3 |
+----+-----------+ 
```

删除一行`t1`如下：

```
delete from t1 where id = 2; 
```

将导致：

```
+----+-----------+
| id | parent_id |
+----+-----------+
|  2 |      NULL |
|  1 |         3 |
+----+-----------+ 
```

有趣的是，MySQL 会解析一个`ON DELETE SET DEFAULT`子句——但创建表会失败。

所以简短的回答 - 您可以设置为`NULL`删除 - 但目前无法设置删除列的默认值并维护外键约束。

# c++ - 如何在 C++ 中显式初始化引用？

> ID：11285691
> 
> 赞同：3
> 
> 时间：2012-07-01T21:19:05.293
> 
> 标签：c++

我有以下代码：

```
class SomeClass {};

class SomeOtherClass {
    SomeClass& someObj;
public:
    SomeOtherClass() {someObj = SomeClass();}
}; 
```

而且我在构造函数上`SomeOtherClass`说`Constructor for 'SomeOtherClass' must explicitly initialize the reference member 'someObj'`.

所以我想我的问题很简单。你如何初始化一个引用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T21:22:52.170

您正在尝试存储对立即销毁的临时对象的引用，这样肯定会出错；即使使用其他答案中描述的构造函数初始化列表也是如此。

引用应该指向存储在别处的对象，就像指针一样。您确定在这种情况下甚至需要使用参考吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-01T21:20:17.073

作为[构造函数初始化列表](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.6)的一部分：

```
SomeOtherClass() : someObj(SomeClass()) {} 
```

**更新：**我真的应该警告说，这是你不应该逐字使用的东西，因为它会导致对即将死亡的临时对象实例的引用。

想法是上面的，但是你必须传入一个生命周期不短于`SomeOtherClass`你正在构造的实例的对象。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-01T21:20:36.513

您必须在构造函数的初始化列表中对其进行初始化，因为引用没有“默认”或“空”初始化：

```
class SomeOtherClass {
    SomeClass& someObj;
public:
    SomeOtherClass(SomeClass& sc) : someObj(sc) {}
}; 
```

**正如在另一个答案中所指出的那样进行**编辑，您应该注意将您的引用初始化为一个对象，该对象的生命周期与包含该引用的对象相同或更长。**在上面的示例中，假设`sc`比`SomeOtherClass`实例寿命更长。**

# postgresql - Postgresql 空间查询太慢

> ID：11285692
> 
> 赞同：5
> 
> 时间：2012-07-01T21:19:11.600
> 
> 标签：postgresql, postgis

我有两个要相交的表。第一个表格代表大约 5000 万个点，第二个表格是世界上所有国家的多边形图层。我想获得与该多边形相交的所有点。

```
SELECT d.id, d.geom 
FROM export d, world_boundaries b 
WHERE (b.cntry_name = 'UK') 
  AND d.date_inserted >= '2012-06-01' 
  AND d.geom && b.wkb_geometry 
  AND intersects(d.geom, b.wkb_geometry); 
```

此查询非常简单，但运行时间超过 4 小时。我在每个表的几何列上构建了 GIST 索引，并且对它们都进行了 VACUUM ANALYZE。仍然没有性能提升。我正在使用 Postgres 8.4 和 PostGIS 1.5 运行 CENTOS 6。任何人都可以阐明如何加快速度吗？将查询限制为 1000 到 10000 条记录时，我很快就能得到结果。当我尝试获取完整的结果集时，它会拖动。想法？

更新：我现在看到我必须改进我的查询作为这个过程的第一步。我收到这样的信封

```
select astext(st_envelope(wkb_geometry)) as e 
from world_borders 
where cntry_name = 'UK' 
```

现在，将其作为整个查询的一部分包含/执行的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:58:19.410

尝试使用 EXPLAIN（和 LIMIT）运行它，以查看是否正在使用索引。

由于真正的交叉点检查是那里最慢的操作，因此可能针对子查询的[ST_Collect](http://www.postgis.org/documentation/manual-2.0/ST_Collect.html)运行它（除了 ST_Intersects 检查之外的所有内容）会有所帮助。这样就只有一个调用，如果多几何构造足够快，最终结果可能会更好。

编辑1：好吧，事实证明它不是那么理想，因为除非您将坐标强制为 3d（也保存 id），否则需要额外查找来获取几何 id：

```
SELECT d.id, d.geom
FROM
(
    SELECT *
    FROM
    ( 
        SELECT ST_Collect(d.geom)
        FROM export d, world_boundaries b 
        WHERE (b.cntry_name = 'UK') 
        AND d.date_inserted >= '2012-06-01' 
        AND d.geom && b.wkb_geometry
    ) as c, world_boundaries b 
    WHERE (b.cntry_name = 'UK')
    AND ST_Intersection(c.geom, b.wkb_geometry);
) as e, export d
WHERE (ST_Dump(e.geom)).geom = d.geom 
```

# f# - 需要将 F# 命令式代码转换为函数式的想法

> ID：11285700
> 
> 赞同：0
> 
> 时间：2012-07-01T21:20:01.360
> 
> 标签：f#, functional-programming, imperative

我有一个以命令式风格编写的函数女巫，无法弄清楚如何将其转换为更强大的函数式方法。

该函数接受一个字符串序列并返回一个元组序列，其中每个元组由输入中的 2,7,12,.. 和 5,10,15,.. 项组成。

例子：

输入 = { “Lorem”、“ipsum”、“dolor”、“set”、“amet”、“consectetuer”、“adipiscing”、“elit”、“Aenean”、“commodo”、“ligula”、“eget” , "dolor", "Aenean", "massa" }

输出 = { ("ipsum", "amet"), ("adipiscing", "commodo"), ("eget", "massa") }

```
let convert (input : seq<string>) : seq<(string * string)> =
    let enum = input.GetEnumerator()
    let index = ref 0
    let first = ref ""
    let second = ref ""

    seq {
        while enum.MoveNext() do
            let modIndex = !index % 5
            index := !index + 1

            if (modIndex % 2 = 0 && !first = "") then first := enum.Current
            if (modIndex % 5 = 0 && !second = "") then second := enum.Current

            if modIndex = 0  then
                let result = (!first, !second)
                first := ""
                second := ""
                yield result
    } 
```

感谢您对起点的任何帮助或提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T21:27:06.363

我不完全理解您想要的行为 - 生成您想要配对的索引的算法是什么？无论如何，一个不错的功能性解决方案是分别获取要配对的元素，然后使用`Seq.zip`.

您可以使用`Seq.mapi`向值添加索引，然后使用`Seq.choose`以获取具有正确索引的值（并跳过所有其他值）。对于硬编码索引，您可以编写如下内容：

```
let indexed = input |> Seq.mapi (fun i s -> i, s)
Seq.zip 
  (indexed |> Seq.choose (fun (i, v) -> if i=1 || i=6 || i=11 then Some v else None))
  (indexed |> Seq.choose (fun (i, v) -> if i=4 || i=9 || i=14 then Some v else None)) 
```

我使用了你的数字 -1 因为索引是从 0 开始的——所以上面给出了你想要的结果。第二个系列看起来像 5 的倍数，所以也许你想`i%5 = 4`生成第二个元素：

```
let indexed = input |> Seq.mapi (fun i s -> i, s)
Seq.zip 
  (indexed |> Seq.choose (fun (i, v) -> if i=1 || i=6 || i=11 then Some v else None))
  (indexed |> Seq.choose (fun (i, v) -> if i%5 = 4 then Some v else None)) 
```

不过，我仍然看不到生成第一个元素的一般机制！

**编辑**还有一个想法-第一个序列是由生成的`i*5 + 2`，第二个是由生成的`i*5`吗？在这种情况下，你的例子是错误的，但你可以这样写：

```
let indexed = input |> Seq.mapi (fun i s -> i, s)
Seq.zip 
  (indexed |> Seq.choose (fun (i, v) -> if i%5 = 2 then Some v else None))
  (indexed |> Seq.choose (fun (i, v) -> if i%5 = 0 then Some v else None)) 
```

...或者如果你想让代码更简洁，你可以重构：

```
let filterNthElements div rem = 
  input |> Seq.mapi (fun i s -> i, s)
        |> Seq.choose (fun (i, v) -> if i%div = rem then Some v else None)

Seq.zip (filterNthElements 5 2) (filterNthElements 5 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:22:24.683

这是更惯用的方法。实际上，它是单行的。我刚刚对齐它以获得更好的可读性。

```
let Input = [ "Lorem"; "ipsum"; "dolor"; "set"; "amet"; "consectetuer";
              "adipiscing"; "elit"; "Aenean"; "commodo"; "ligula"; "eget";
              "dolor"; "Aenean"; "massa" ]

// Short solution that does not support more than two values
let Output1 =
    Input
    |> List.fold
        (fun (i, l1, l2) x ->
            if i=4 then 0, None, (l1.Value, x)::l2
            elif i=1 then i+1, Some x, l2
            else i+1, l1, l2
        )
        (0, None, [])
    |> fun (_, _, elem) -> elem
    |> List.rev 
```

### 主意

总体思路基于三个步骤：

1.  将列表拆分为一个`List`元*组*，取第二个和第五个字符串。**警告**如果原始数据长度不是 5 的倍数，则尾随元素将丢失。
2.  通过获取第三个元素从*三元组*中过滤掉临时数据，这是我们的主要目标；
3.  反转列表。

* * *

### 解释

第一行是最难的。

让我们定义我们的*state*。它将是一个*三元组*的序列号，一个`string option`包含字符串 ##2、7 等，以及一个`(string*string) list`在遇到元素 ##5、10 等时添加的“外部”。

该函数会将第 2 个、第 7 个等元素放置到“内部” `string option`，或者，如果`i`等于 5、10 等，则形成一个*元组*并将其添加到“外部” `List`（为了清楚起见，删除内部值） .

我们使用`List.fold`，因此最终列表将被颠倒。

初始状态是[MSDN](http://msdn.microsoft.com/en-us/library/ee353894)中List.fold的*三元*组。`(0, None, []). More info on`

第二行只是从*三元组*中获取第三个元素。我已经使它成为允许链绑定的功能。

`List`由于运营商的性质，第三行颠倒了`::`。

根据初始列表的长度。如果它找到了“第 2 个”元素但没有到达“第 5 个”，则*三元组*的第二个元素具有该值。您可以通过验证来检测错误情况：

```
...
|> fun (_, temp, elem) ->
    if temp.IsSome
    then failwith "Data length must be a multiplier of 5"
    else elem
... 
```

* * *

这是支持两个以上元素的更长的代码：

```
let Output2 = 
    Input
    |> List.foldBack
        (fun x (i, l1, l2) ->
            if i = 4
            then 0, [], (x::l1)::l2
            else i+1, x::l1, l2
        )
        <| (0, [], [])
    |> fun (_, _, elem) -> elem
    |> List.choose
        (function
        | [_; first; _; _; second] -> Some (first, second)
        | _-> None
        ) 
```

请注意，此变体在第一次调用期间不会删除元素，因此您可能会检索两个以上的项目。

**重要提示**：列表以相反的顺序处理，因此项目索引是从输入的末尾计算的。您可以将其更改为`List.fold`in cost 或进一步反转列表，如`Output1`.

由于. `<|`_`List.foldBack`

您可以以类似的方式检查错误：通过测试“内部”列表是否不为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T21:34:08.067

我来自 haskell 而不是 f#，所以我将给出一个可能无效的 f# 代码想法：

起初我会从我的输入中生成两个列表：

```
let zeromod5 = filter (index == 0 % 5) input
let twomod5 = filter (index == 2 % 5) input 
```

这应该导致列表

```
{ "ipsum", "adipiscing","eget"}
{ "amet", "commodo","massa" } 
```

然后压缩它们，即通过类似的东西制作一个配对列表

```
zip zeromod5 twomod5 
```

## 编辑：

哈斯克尔版本：

```
zipWeird :: [String] -> [(String, String)]
zipWeird ss = zip twoMod5s zeroMod5s
            where zeroMod5s = map fst $ filter (\(_,y) -> y `mod` 5 == 0) eSS
                  twoMod5s = map fst $ filter (\(_,y) -> y `mod` 5 == 2) eSS
                  eSS = zip ss [1..]

zipWeird2 :: [String] -> [(String, String)]
zipWeird2 ss = map fst $ filter (\(_,y) -> y `mod`5 ==1) ezSS
             where zSS = zip (tail ss) (drop 4 ss)
                   ezSS = zip zSS [1..]

input :: [String]
input = words ("Lorem ipsum dolor sit amet, consetetur sadipscing elitr, "++
              "sed diam nonumy eirmod tempor invidunt ut labore et dolore "++
              "magna aliquyam erat, sed diam voluptua. At vero eos et "++
              "accusam et justo duo dolores et ea rebum. Stet clita kasd "++
              "gubergren, no sea takimata sanctus est Lorem ipsum dolor sit "++
              "amet.")

main :: IO ()
main = do 
          print $ zipWeird input
          print $ zipWeird2 input 
```

# google-apps-script - 在自定义域上发布 google 脚本

> ID：11285703
> 
> 赞同：2
> 
> 时间：2012-07-01T21:20:19.957
> 
> 标签：google-apps-script, web-deployment

使用 Google Apps 脚本。我知道这不是编程问题，但不知道该求助于谁。

*   GoDaddy 是提供者
*   脚本部署为 Web 应用程序
*   映射已完成并适用于 HTML
    **...但不适用于 Google Script。**

HTML 页面只是为了澄清而创建的。

这应该如何解决？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:42:46.527

我认为这是不可能的，请参阅问题 546 [http://code.google.com/p/google-apps-script-issues/issues/detail?id=546](http://code.google.com/p/google-apps-script-issues/issues/detail?id=546)

可能你现在能做的最好的事情（除了盯着问题）就是为你的应用程序脚本链接创建一个别名/webhop。

# android - 小部件尺寸口粮片剂

> ID：11285707
> 
> 赞同：2
> 
> 时间：2012-07-01T21:20:53.857
> 
> 标签：android, widget, size, tablet

我正在使用这个小部件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/ankidroid_widget_small_layout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:focusable="false"
android:orientation="horizontal"
android:clickable="true"
android:background="@drawable/widget_bg_small">

<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:focusable="false"
android:orientation="horizontal"
android:padding="4dip"
android:clickable="false">
<TextView android:id="@+id/widget_due"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/widget_bg_number"
    android:textSize="16dip"
    android:singleLine="true"
    android:textColor="#ffffff"
    android:gravity="center"
    android:visibility="invisible"/>

<FrameLayout android:id="@+id/widget_progress_frame"
    android:layout_below="@+id/widget_due"
    android:layout_marginTop="2dip"
    android:layout_alignRight="@+id/widget_due"
    android:background="#ffffff"
    android:layout_height="5dip"
    android:layout_width="fill_parent"
    android:visibility="invisible"
    android:padding="1dip"> 
    <ProgressBar android:id="@+id/widget_progress"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        style="@style/Widget.ProgressBar.Horizontal"/>
    <!--<FrameLayout android:id="@+id/widget_progress"
            android:layout_width="fill_parent"
            android:layout_alignParentBottom="true"
            android:layout_height="10dp"
            android:background="#ff595a"/>-->
</FrameLayout>

<TextView android:id="@+id/widget_eta"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/widget_bg_time"
    android:textSize="16dip"
    android:singleLine="true"
    android:gravity="center"
    android:textColor="#ffffff"
    android:visibility="invisible"/>
</RelativeLayout>
<FrameLayout
    android:id="@+id/ankidroid_widget_small_finish_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:focusable="false"
    android:orientation="horizontal"
    android:background="@drawable/widget_bg_small_finish"
    android:visibility="gone"
    android:clickable="false">
   </FrameLayout>
</RelativeLayout> 
```

在普通手机（sgs 9000）上完美运行，但在我的桌子上（galaxy tab 10.1）它看起来有点畸形（比它应该的宽得多）。在较大的屏幕尺寸上，矩形宽度高度比是否可能不同？

# unit-testing - kohana unittest 的一些问题（cli 和 web 访问）

> ID：11285709
> 
> 赞同：2
> 
> 时间：2012-07-01T21:22:05.137
> 
> 标签：unit-testing, phpunit, kohana, command-line-interface, kohana-3.2

我已经按照[此处](http://blog.lysender.com/2010/08/kohana-unit-testing-finally/)所述配置了 kohana (3.2) unittest 模块。所以我有：

```
APPPATH/tests/
    phpunit.xml
    sampletest.php 
```

最后一行 index.php 文件：

```
require APPPATH.'bootstrap'.EXT;
if ( ! defined('SUPPRESS_REQUEST'))
    Request::factory()->execute()->send_headers(); 
```

所以第一个问题是在 CLI 中出现下一个错误：

```
ErrorException [ 8 ]: Undefined index: SERVER_NAME ~ SYSPATH/classes/kohana/url.php [ 79 ] 
```

这是因为启用了 E_STRICT。因此，当我关闭 E_STRICT 时，什么也没有发生。我的意思是 CLI 中没有 phpunit 的输出，只有空行。

第二个问题是 Web 访问根本不起作用（http://localhost/unittest）。发生 404 错误。也许我应该创建一些路线或任何东西？

* * *

```
Mac OS 10.7.4
Apache 1.3.41
PHPUnit 3.6.11
Kohana 3.2.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:01:36.003

Web 访问不起作用，因为在 Kohana 版本 3.* 中，unittest 模块不再存在 Web 界面。开箱即用运行测试的唯一方法是通过 CLI 进行。

这通常可以通过执行以下操作来完成。

1.  打开终端
2.  将目录更改为应用程序的测试目录
3.  运行'phpunit'

另外，教程有点过时了。建议对 Kohana 3.2 中的单元测试设置进行修订：[在使用 Kohana 3.2 运行 PHPUnit 时抑制请求](https://stackoverflow.com/questions/9857595/suppressing-the-request-when-running-phpunit-with-kohana-3-2)

由于它是从 CLI 运行的，因此无法访问 HTTP 环境变量。

[根据 PHPUnit 文档配置附录](http://www.phpunit.de/manual/current/en/appendixes.configuration.html#appendixes.configuration.testsuites)，即使它们不可用，您也可以通过在 phpunit.xml 文件中配置它们来在操作之前设置它们：

> 设置 PHP INI 设置、常量和全局变量
> 
> 该元素及其子元素可用于配置 PHP 设置、常量和全局变量。它也可用于添加 include_path。

```
<php>
    <includePath>.</includePath>
    <ini name="foo" value="bar"/>
    <const name="foo" value="bar"/>
    <var name="foo" value="bar"/>
    <env name="foo" value="bar"/>
    <post name="foo" value="bar"/>
    <get name="foo" value="bar"/>
    <cookie name="foo" value="bar"/>
    <server name="foo" value="bar"/>
    <files name="foo" value="bar"/>
    <request name="foo" value="bar"/>
</php> 
```

# css - 用 css 为 ul 设置样式 - 为什么 float 会这样工作

> ID：11285711
> 
> 赞同：0
> 
> 时间：2012-07-01T21:22:07.197
> 
> 标签：css, stylesheet

我正在看一些关于 css 的视频教程，发现真的很奇怪。首先，我们使用元素之类的链接创建无序列表：

```
<ul id="menuList">
    <li><a href="google.com">This</a></li>
    <li><a href="demo.org">That</a></li>
    <li><a href="pogoda.ru">Other</a></li>
</ul> 
```

而不是应用一些样式来创建水平菜单：

```
#menuList {
    list-style: none;
    margin: 0;
    padding: 0;
}

#menuList a {
    display: block;
    float: left;
} 
```

那就是产生平面菜单。所以我的问题是为什么这有效？在我看来，浮动应该应用于**li**元素 - 容器。**li**是块级元素还是我错了？？？

一些 CSS 规则让我抓狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:33:55.020

如果您是 CSS 新手，这里发生的事情不一定容易理解。

您的`li`元素是块元素，没有浮动。您的`a`元素是浮动的内联元素。

标签的浮动`a`意味着它不再向父母提供任何关于应该`li`多高的信号`li`。实际上，它已部分从垂直堆栈中取出。

（旁注：这就是为什么在浮动之后**清除**很重要的原因。如果您在每个之后放置一个清除元素（即`clear: both`应用到它的元素），您当前看到的效果将会丢失，因为父级`li`会使用该清除作为标记自己有多高。）

这意味着每个标签`li`实际上都具有零高度，从而产生每个`a`标签与其`a`标签表亲相邻的效果。`li`这只是标签没有高度的侥幸。

这可能会让刚接触 CSS 的人有些转折。

就个人而言，我会说在你的情况下不需要浮动`a`标签而不是`li`（我建议你这样做），并且因此认为它是一个有问题的教程。

# azure - SQL Azure 性能缓慢

> ID：11285713
> 
> 赞同：3
> 
> 时间：2012-07-01T21:22:19.953
> 
> 标签：azure, azure-sql-database

在将一些数据转换到 SQL Azure 时，我注意到了一个意外行为。我做了一个快速测试，结果如下：

我在数据库中有一个包含 1M 记录的表，数据库大小为 230MB，这没有非聚集索引。

我通过创建一个具有相同架构的新表进行了一个简单的测试，并将数据从一个表复制到另一个表，如下所示：

```
INSERT INTO [dbo].[lete_new]
           ([str_en]
           ,[str_en_fp])
SELECT [str_en] ,[str_en_fp] FROM [dbo].[lete] 
```

首先，在我的本地工作站 (SELECT [str_en] ,[str_en_fp] FROM [dbo].[lete]) 需要 8 秒，因此最重要的是执行插入所需的时间。当我在本地 WS 上运行插入时，将数据复制到新表需要 10 秒。最大的惊喜是当我在 Azure 上运行相同的查询时，只用了 30 秒。

我知道这不完全是一个编程问题，但这仍然会影响程序性能，我想知道为什么性能下降？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T23:56:52.113

这里有很多东西在起作用。使用这种类型的操作，对您影响最大的是本地驱动器上的存储系统与 SQL Azure 在其上运行的存储系统不同。请记住，所有写入都被复制，以便可以快速处理故障。有了这么多的写入，我怀疑这是可以看到大部分差异的地方。

此外，请记住，SQL Azure 实例与其他用户共享，并且位于商用硬件上。具有 4 个内核专用于单个用户（您的桌面）的系统的性能将不同于与其他用户一起运行的任何服务器（SQL Azure）。

通常，您无法将单个专用资源的性能等同于云提供商的性能。好处来自较低的成本提升和横向扩展，而不是扩大规模。

# extjs4 - 使用 draw2d outPutPort 作为 Extjs 树小部件中的 div 子级

> ID：11285714
> 
> 赞同：0
> 
> 时间：2012-07-01T21:22:26.373
> 
> 标签：extjs4

我的目标如下：我想在 ExtJs 中创建两个树小部件，并且能够在两个树小部件中的对象之间拖动和创建连接线。这个想法是在两个树小部件中直观地显示对象之间的关联。我正在考虑创建 draw2d 输出端口并将它们作为 div 对象放置在树小部件 DOM 对象中。

输出端口可以基于 DIV 对象吗？我需要更好地了解输出端口的可能性。

如果我能做到这一点，那么我可以将这些输出端口放在任何 Div 容器中并创建连接线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:08:53.557

端口可以​​添加到任何继承类“节点”的形状。节点可以是任何类型的 div。

一般来说，我认为 Draw2D 或 graphiti 不是连接树节点的正确工具。对于这个有限的用例，您可以使用普通的 raphael。

# javascript - jQuery / JavaScript 如何找到元素的左内边缘

> ID：11285720
> 
> 赞同：2
> 
> 时间：2012-07-01T21:23:10.453
> 
> 标签：javascript, jquery, html, css

现在我在脑海中摆弄一个想法，并且一直在寻找如何解决我的特定问题的答案，因为我过去也无法做到。

我想要做的是采用 2+ 个元素。一个主要包装元素和该包装内的 1 个或多个元素。我想要做的是当包装器内元素的右外边缘与包装器左内边缘相遇时，我想触发一个函数。所以我可以根据我的整体想法做几件事。然而，找到那些边缘或实际上任何边缘对我来说一直是个问题。我敢肯定它是可能的，但问题是如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:38:49.240

您的回答是用来`position().left`获取父元素中元素的正确位置。

```
var boxPosX = $('#box').position().left; 
```

## *[jsBin 演示](http://jsbin.com/ejuxuw/3/edit#javascript,html,live)*

```
function custom(){
  $('#wrapper').css({background:'yellow'}).text('TOUCHDOWN!'); 
}

$(window).resize(function(){     
  var wrapperW = $('#wrapper').outerWidth(true);
  var boxW = $('#box').width();

  var boxPosX = $('#box').position().left;

  var touched = wrapperW - (boxW+boxPosX);

  if( touched <= 0 ){
     custom() ;
  }      
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T21:27:21.163

您可以使用 jQuery 的偏移方法：[http](http://api.jquery.com/offset/) ://api.jquery.com/offset/ 。您需要计算出填充和边距以添加到其中，但我相信它会满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T21:33:03.467

根据[http://api.jquery.com/position/](http://api.jquery.com/position/)你需要 .position 方法。

“.position() 方法允许我们检索元素相对于偏移父元素的当前位置。将此与 .offset() 进行对比，后者检索相对于文档的当前位置。当将新元素定位在另一个元素附近时在同一个包含 DOM 元素中，.position() 更有用。

返回一个包含属性 top 和 left 的对象。"

希望这可以帮助。

# jquery - 用简单的形式限制复选框

> ID：11285721
> 
> 赞同：2
> 
> 时间：2012-07-01T21:23:12.567
> 
> 标签：jquery, simple-form

我使用 Simple form gem 在我的 rails 应用程序上设置表单。我有一个复选框列表（大约 20 个选项），我想限制用户只选择 3 个。我怎样才能做到这一点？

看法：

```
<%= f.association :interests, :as => :check_boxes, :label => false %> 
```

呈现的 HTML 的第一部分

```
<div class="control-group check_boxes optional">
  <div class="controls">
    <label class="checkbox">
        <input class="check_boxes optional" id="user_interest_ids_1" name="user[interest_ids][] "      
         type="checkbox" value="1" />Adventure Sports</label>
   <label class="checkbox">
       <input class="check_boxes optional" id="user_interest_ids_2" name="user[interest_ids][]"  
       type="checkbox" value="2" />Arts and Crafts</label> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:30:29.037

```
$('input[type=checkbox]').change(function(e){
   if ($('input[type=checkbox]:checked').length > 3) {
        $(this).prop('checked', false)
   }
}) 
```

[http://jsfiddle.net/Uan5M/](http://jsfiddle.net/Uan5M/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T21:30:03.520

可能会使用 jQuery 来处理这个问题：

```
$(":checkbox").click(function(){
  $length = $(":checkbox").length();
  if ( $length > 2 ) {
    $(":checkbox:checked").attr("disabled", true);
  } else {
    $(":checkbox").removeAttr("disabled");
  }
}); 
```

# java - How does the scope of using classes in Java work?

> ID：11285728
> 
> 赞同：0
> 
> 时间：2012-07-01T21:23:45.587
> 
> 标签：java, android

I am not really sure how to word this question, so I did the best I could in that aspect. So I am having a problem with creating a `DatePicker` in my Activity. This is the code that is giving me an error:

**EditEventActivity.java**

```
DateDialogFragment frag = DateDialogFragment.newInstance(this, new 
DateDialogFragmentListener() {

            @Override
            public void updateChangeDate(int year, int month, int day) {
                // TODO Auto-generated method stub

            }
        }, sYear, sMonth, sDay); 
```

* * *

The `newInstance()` method I have there is whats giving me the error. The error is this:

> ```
> The method newInstance(Context, AddEventActivity.DateDialogFragmentListener, int, int,
> int) in the type DateDialogFragment is not applicable for the arguments 
> (EditEventActivity, new EditEventActivity.DateDialogFragmentListener(){}, int, int, 
> int) 
> ```

* * *

Now the `DateDialogFragment` is located in its own file. I don't think I need to post that. It is what it is. But my interface is in `AddEventActivity.java`. Now this is what I am confused about. My static method, `newInstance()` from DateDialogFragment takes `DateDialogFragmentListener`not `AddEventActivity.DateDialogFragmentListener`. So I assume thats what the problem is. But then again, I am not sure, which is what I need help understanding. Thanks you in advance.

Actually. I also figue I might as well include the `newInstance()` method:

**DateDialogFragment.java**

```
public static DateDialogFragment newInstance(Context context, DateDialogFragmentListener 
listener, int year, int month, int day) {
    DateDialogFragment dialog = new DateDialogFragment();
    mContext = context;
    mListener = listener;
    mYear = year;
    mMonth = month;
    mDay = day;
    Bundle args = new Bundle();
    args.putString("title", "Set Date");
    dialog.setArguments(args);
    return dialog;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:29:37.343

You pass too many arguments to the `newInstance(...)` method. Only pass `sYear`, `sMonth` and `sDay` once rather than twice.

**Edit** You're having here two classes with the same simple name but they're different classes and therefore different types. Just pass an instance of the right class.

```
DateDialogFragment frag = DateDialogFragment.newInstance(
    this, 
    new AddEventActivity.DateDialogFragmentListener() {

        @Override
        public void updateChangeDate(int year, int month, int day) {
            // TODO Auto-generated method stub

        }
    }, sYear, sMonth, sDay); 
```

.. or correct the signature of your `newInstance()` method if you need to pass a `EditEventActivity.DateDialogFragmentListener`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T21:30:06.953

Assuming that `EditEventActivity.DateDialogFragmentListener` extends `AddEventActivity.DateDialogFragmentListener`, your `newInstance` method takes 3 `int`s after the listener and you are passing 6 `int`s - you probably meant:

```
DateDialogFragment frag = DateDialogFragment.newInstance(this, new DateDialogFragmentListener() {

        @Override
        public void updateChangeDate(int year, int month, int day) {
            // TODO Auto-generated method stub

        }
    }, sYear, sMonth, sDay); //removed the last 3 arguments 
```

**EDIT**
Following your edit, back to my first comment: does `EditEventActivity.DateDialogFragmentListener` extend `AddEventActivity.DateDialogFragmentListener`?

# windows-phone-7 - 更新 ListBox 会导致延迟

> ID：11285730
> 
> 赞同：0
> 
> 时间：2012-07-01T21:24:11.127
> 
> 标签：windows-phone-7, listbox, delay, itemssource

我想显示一个包含大约 10 个项目的 ListBox。每次我通过向 a 添加项目来更新它时，`List`它都会导致一点但明显的延迟，并且 UI 会冻结一段时间。我还尝试使用 a`ObservableCollection`而不是 a`List`作为`ItemsSource`，但这并没有解决问题。

我的 ListBox 必须更新得非常快，所以我真的需要你的帮助，拜托！:)

这是一些代码：

```
public partial class MainPage : PhoneApplicationPage
{
    //private List<Word> Words = new List<Word>();
    ObservableCollection<Word> Words = new ObservableCollection<Word>();

    // Konstruktor
    public MainPage()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        ListBox1.ItemsSource = Words;

        for (int j = 0; j < 10; j++)
        {
            Words.Add(new Word(j.ToString()));
        }
    }
}

public class Word
{
    public String sWord { get; set; }

    public Word(String word)
    {
        this.sWord = word;
    }
} 
```

XAML

```
<ListBox Name="ListBox1">
   <ListBox.ItemTemplate>
       <DataTemplate>
           <Button Content="{Binding sWord}" />
       </DataTemplate>
   </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:18:13.100

我找到了解决我的问题的方法。为了解决延迟，我现在使用 StackPanel 而不是 ListBox 并按以下方式添加我的按钮：

```
StackPanel1.Children.Add(new Button()
{
    Content             = "Hello World",
    BorderBrush         = new SolidColorBrush(Colors.Transparent),
    HorizontalAlignment = HorizontalAlignment.Left
}); 
```

您可以使用清除 StackPanel

```
StackPanel1.Children.Clear(); 
```

向按钮添加 Click 事件的工作方式如下

```
foreach (Button btn in StackPanel1.Children)
{
    btn.Click += new RoutedEventHandler(Button_Click);
} 
```

非常容易而且快得多！

# java - Java 二进制文件下载提前停止

> ID：11285731
> 
> 赞同：2
> 
> 时间：2012-07-01T21:24:17.990
> 
> 标签：java, swing, file, download

我正在尝试使用以下代码下载一个 exe 文件，知道为什么它只下载了大约 30% 的文件吗？至少它不会抛出任何异常。

我的主要方法如下所示： new DownloadWorker().execute();

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.net.URL;
import java.net.URLConnection;

import javax.swing.SwingWorker;

public final class DownloadWorker extends SwingWorker<Object, Object> {

    @Override
    protected Object doInBackground() throws Exception {
        BufferedInputStream in = null;
        BufferedOutputStream out = null;

        try {
            URL url = new URL("http://download.piriform.com/ccsetup320.exe");
            URLConnection conn = url.openConnection();
            conn.connect();

            int fileLength = conn.getContentLength();

            in = new BufferedInputStream(url.openStream());
            out = new BufferedOutputStream(new FileOutputStream("ccsetup320.exe"));

            byte[] buffer = new byte[4096];
            long total = 0;
            int bytesRead = 0;
            while ( (bytesRead = in.read(buffer)) != -1 ) {
                total += bytesRead;
                System.out.println((int) (total * 100 / fileLength));
                out.write(buffer, 0, bytesRead);
            }
        } catch ( Exception e ) {
            e.printStackTrace();
        } finally {
            if ( out != null ) {
                out.flush();
                out.close();
            }
            if ( in != null ) {
                in.close();
            }
        }

        return null;
    }

    @Override
    protected void done() {

    }

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:42:37.997

您是否尝试过使用安装了 Java 7 的 Java NIO：

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.net.URL;
import java.nio.channels.Channels;
import java.nio.channels.ReadableByteChannel;

public class TestApp {

    public static void main(String[] args) {
        try {
            URL url = new URL("http://download.piriform.com/ccsetup320.exe");
            ReadableByteChannel rbc = Channels.newChannel(url.openStream());
            FileOutputStream fos = new FileOutputStream("c:/ccsetup320.exe");
            fos.getChannel().transferFrom(rbc, 0, 1 << 24);
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

} 
```

上面的代码已经过测试并且工作得很好，我从一个类似的问题中得到它，[我们](https://stackoverflow.com/questions/921262/how-to-download-and-save-a-file-from-internet-using-java)可以看到 NIO 如何使编码变得如此容易:)

编辑：

我已经更新了代码以使用 swingworker，它可以毫无问题地下载文件：

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.net.URL;
import java.nio.channels.Channels;
import java.nio.channels.ReadableByteChannel;
import javax.swing.SwingWorker;

public class JavaApplication174 {

    public static void main(String[] args) {
        SwingWorker worker = new SwingWorker() {

            @Override
            protected Object doInBackground() throws Exception {

                try {
                    URL google = new URL("http://download.piriform.com/ccsetup320.exe");
                    ReadableByteChannel rbc = Channels.newChannel(google.openStream());
                    FileOutputStream fos = new FileOutputStream("c:/ccsetup320.exe");
                    fos.getChannel().transferFrom(rbc, 0, 1 << 24);
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
                return this;
            }
        };
        worker.run();
    }
} 
```

编辑2：

你调用`execute()`你的工人实例使用`run()`而不是为我工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:52:19.620

我认为你的错误在于这个循环，因为 -1 没有被写入（这是标记文件结束的最后一个字节）：

```
 while ( (bytesRead = in.read(buffer)) != -1 ) {
            total += bytesRead;
            System.out.println((int) (total * 100 / fileLength));
            out.write(buffer, 0, bytesRead);
        } 
```

将其更改为：

```
 do {
            bytesRead = in.read(buffer);
            total += bytesRead;
            System.out.println((int) (total * 100 / fileLength));
            out.write(buffer, 0, bytesRead);
        }while(bytesRead!=-1); 
```

# c++ - 模板类中定义的常量

> ID：11285732
> 
> 赞同：8
> 
> 时间：2012-07-01T21:24:20.343
> 
> 标签：c++, templates, g++, template-classes

> **可能重复：**
> [GCC 问题：使用依赖于模板参数的基类成员](https://stackoverflow.com/questions/11405/gcc-problem-using-a-member-of-a-base-class-that-depends-on-a-template-argument)

我以为我对 C++ 很熟悉，但显然还不够熟悉。
问题是当您在模板类中定义常量时，您可以在派生自该类的新类中使用该常量，但不能在派生自该类的新*模板*类中使用该常量。

例如，gcc 说

> test.h:18: 错误: 'theconstant' 未在此范围内声明

当我尝试编译这个（简化的）头文件时：

```
#pragma once

template <typename T> class base
{
  public:
    static const int theconstant = 42;
};

class derive1 : public base<size_t>
{
  public:
    derive1(int arg = theconstant) {}
};

template<typename T> class derive2 : public base<T>
{
  public:
    derive2(int arg = theconstant) {} // this is line 18
}; 
```

所以问题是一个类 ,`derive1`编译得很好，但另一个类 ,`derive2`是一个模板专业化，却没有。
现在也许 gcc 的错误还不够清楚，但我不明白为什么 in 中的构造函数的`derive2`作用域与`derive1`.
万一这很重要，这发生在头文件本身的编译期间，而不是在实例化类型的对象时`derive2<type>`。

我也知道要进行哪些更改才能进行编译，因此我并不是真的在寻找单行代码作为答案。我想了解*为什么*会这样！我尝试在网上搜索，但显然我没有使用正确的搜索参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:39:49.760

尝试

```
template<typename T> class derive2 : public base<T>
{
  public:
    derive2(int arg = base<T>::theconstant) {} // this is line 18
}; 
```

基本上，您已经为“theconstant”指定了不完整的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T22:36:03.243

我很确定这将帮助您理解：

您的代码无法编译：

```
template<typename T> class derive2 : public base<T>
{
  public:
    derive2(int arg = theconstant) {} // this is line 18
}; 
```

以及原因：

```
template <> class base<size_t>
{
  public:
    static const int ha_idonthave_theconstant = 42;
};
derive2<size_t> impossible_isnt_it; 
```

专业！！！第 18 行的编译器无法确定您不会专门化 base<> 以使该常量根本不存在。

# vbscript - QTP 无法创建 ActiveX 对象

> ID：11285735
> 
> 赞同：3
> 
> 时间：2012-07-01T21:25:22.373
> 
> 标签：vbscript, activex, qtp

在编写脚本时，我遇到了这个问题。

我无法发布整个代码，但这是一个与我自己编写的代码相同的示例；

```
Dim qtpApp
Set qtpApp = createObject("QuickTest.Application")
qtpApp.Launch 
```

我也试过这个：

```
Set qtpApp = createObject("QuickTest.application") 
```

和这个：

```
Set qtpApp = createObject("Quick Test.Application") 
```

但我不断收到“Active X 组件无法创建对象。在第 x 行：“Set qtpApp = createObject("QuickTest.Application")”

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:36:36.017

正确的 prog-id 是您首先尝试的那个`"QuickTest.Application"`。

造成这种情况的可能原因是您的计算机上未正确安装 QTP。验证是否是这种情况

1.  尝试手动启动 QTP
2.  检查注册表中是否存在以下键`HKEY_CLASSES_ROOT\QuickTest.Application\CLSID`
3.  从注册表中获取 classid 并检查它的密钥是否存在`HKEY_CLASSES_ROOT\CLSID`（或者如果它是 64 位机器`HKEY_CLASSES_ROOT\Wow6432Node\CLSID`）
4.  验证在此键下`LocalServer32`指向 QTP 的 bin 目录下的“QtpAutomationAgent.exe”

# java - 将 ListView 条目值更新为 strings.xml 中的另一个字符串数组

> ID：11285736
> 
> 赞同：0
> 
> 时间：2012-07-01T21:25:48.383
> 
> 标签：java, android, listview

我在 main.xml 中有一个 ListView，其中 android:entries="@array/list1" 并且我想通过 onclick 函数将该条目字段更新为（比如说）@array/list2。没有适配器这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:47:47.807

我几乎可以肯定，如果您想从 java 而不是 xml 执行此操作，则必须使用适配器。

这是设置适配器来执行此操作的[一个很好的示例。](http://www.mubasheralam.com/tutorials/android/listview-using-string-array-resources)

我个人从未见过不使用适配器的方法。我怀疑如果确实存在这样做的方法，它将在[android:entries 文档的“相关方法”部分中提到](http://developer.android.com/reference/android/widget/ListView.html#attr_android%3aentries)

# java - Eclipse Android - 当我选择文本图标时，它不会创建项目

> ID：11285738
> 
> 赞同：0
> 
> 时间：2012-07-01T21:26:00.367
> 
> 标签：java, android, icons, launcher

我遇到了 ADT 插件中的错误问题。我想做一个 Android 项目应用程序。当我想设置应用程序图标时，我将其切换为文本，然后写下名称 X - 例如。然后，如果我单击下一步并且完成窗口没有关闭并且一个项目我可以说是半成品（一些包）。如果我将图标保留为默认值（不是文本），则一切正常。 ![在此处输入图像描述](../Images/f59d751351a5942a9712d5673f516cd5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:40:38.443

可绘制名称不能包含大写字母，也许这就是问题所在

# ruby-on-rails - 如何在 rails 3.2.6 中为炼油厂页面控制器创建自己的规范-rails 更新后找不到路由

> ID：11285739
> 
> 赞同：3
> 
> 时间：2012-07-01T21:26:16.147
> 
> 标签：ruby-on-rails, rspec, rspec-rails, rails-routing, refinerycms

我最近将基于 RefineryCMS 的应用程序从 Rails 3.2.2 升级到了 3.2.6。

在升级之前，炼油厂页面控制器的以下规范运行良好：

```
describe Refinery::PagesController do
render_views

context "Should check the ability to see a page" do
  before(:each) do 
    @live_page = FactoryGirl.create(:live_refinery_page)
    @restricted_page = FactoryGirl.create(:restricted_refinery_page) 
    @draft_page = FactoryGirl.create(:draft_refinery_page)
    @error_page = FactoryGirl.create(:error_refinery_page)
  end

context "for a not logged in user" do
  it "should see live pages" do
    get :show, :path => @live_page.slug, :format => "html"
    response.should be_success
    response.should render_template "refinery/pages/show"
  end
  ... 
```

应该匹配的路由定义如下：

```
marketable_page GET     /*path(.:format)                             refinery/pages#show 
```

现在，问题在于我在所有测试中都遇到了这样的错误：

```
1) Refinery::PagesController Should check the ability to see a page for a not logged in user should see live pages
 Failure/Error: get :show, :path => @live_page.slug, :format => "html"
 ActionController::RoutingError:
   No route matches {:path=>"live-page-1", :format=>"html", :controller=>"refinery/pages", :action=>"show"}
 # ./config/initializers/refinery/monkey_patches.rb:13:in `around_generate'
 # ./spec/controllers/refinery/pages_controller_spec.rb:17:in `block (4 levels) in <top (required)> 
```

我怎样才能使路线在规格中被识别？也许它与路线通配有关？

有什么提示吗？

# php - Twilio 客户端 DTMF 不工作

> ID：11285740
> 
> 赞同：3
> 
> 时间：2012-07-01T21:26:16.943
> 
> 标签：php, javascript, twilio

我正在开发 Twilio 客户端应用程序，并且很难发送 DTMF 音调。这是我到目前为止的代码：

```
<script type="text/javascript">
$.each(['0','1','2','3','4','5','6','7','8','9','star','pound'], function(index, value) { 
    $('#button' + value).click(function(){ 
        if(connection) {
            if (value=='star')
                connection.sendDigits('*')
            else if (value=='pound')
                connection.sendDigits('#')
            else
                connection.sendDigits(value)
            return false;
        } 
     });
  });
</script>

<div id="dialpad">
    <table>
    <tr>
    <td><input type="button" value="1" id="button1"></td>
    <td><input type="button" value="2" id="button2"></td>
    <td><input type="button" value="3" id="button3"></td>
    </tr>
    <tr>
    <td><input type="button" value="4" id="button4"></td>
    <td><input type="button" value="5" id="button5"></td>
    <td><input type="button" value="6" id="button6"></td>
    </tr>
    <tr>
    <td><input type="button" value="7" id="button7"></td>
    <td><input type="button" value="8" id="button8"></td>
    <td><input type="button" value="9" id="button9"></td>
    </tr>
    <tr>
    <td><input type="button" value="*" id="buttonstar"></td>
    <td><input type="button" value="0" id="button0"></td>
    <td><input type="button" value="#" id="buttonpound"></td>
    </tr>
    </table>
</div> 
```

当我拨打我的测试号码并按下拨号盘上的按钮时，它不会发送值。非常感谢您对此的任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:39:23.263

在您的脚本块中，您需要有可用的连接对象。因此，在您的功能之上，您需要以下内容：

```
var connection = null;
Twilio.Device.setup('your token');
params = { "number" : "5559871234", "outbound" : "true" };
connection = Twilio.Device.connect(params); 
```

本质上，这个函数只需要“看到”连接变量。如果您的 javascript 文件位于不同的位置并且您无法合并它们，您可以至少将连接对象设为全局（不理想）以查看是否可以使其正常工作。

```
connection = null; 
```

（首先没有“var”）

# database - Heroku db：推送错误

> ID：11285745
> 
> 赞同：2
> 
> 时间：2012-07-01T21:26:53.463
> 
> 标签：database, heroku

每次我尝试`heroku db:push`，我都会收到以下错误：

```
Saving session to push_201207011424.dat..
!!! Caught Server Exception
HTTP CODE: 503
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
      <style type="text/css">
        html, body, iframe { margin: 0; padding: 0; height: 100%; }
        iframe { display: block; width: 100%; border: none; }
      </style>
    <title>Application Error</title></head>
    </head>
    <body>
      <iframe src="//s3.amazonaws.com/heroku_pages/error.html">
        <p>Application Error</p>
      </iframe>
    </body>
    </html> 
```

我完全不知道为什么会这样。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:47:48.033

尝试以下操作：

```
heroku restart

heroku db:push --confirm <app-name> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T06:26:00.197

您可以在控制台中执行以下命令：

`heroku logs | tail`

然后您的输出类似于：

```
2016-04-20T10:56:17.509354+00:00 heroku[router]: 
at=error code=H12 desc="Request timeout" method=POST [...] 
```

指示的错误代码为您提供更多见解，您可以在此处查看：[https ://devcenter.heroku.com/articles/error-codes](https://devcenter.heroku.com/articles/error-codes)

# security - 理论上是否有可能设计一个可证明不可破解的硬件/软件系统？

> ID：11285746
> 
> 赞同：2
> 
> 时间：2012-07-01T21:26:54.610
> 
> 标签：security, proof

是否对任何假设的硬件 + 操作系统架构或整体软件设计进行了任何工作，这些工作可证明是不可能破解的？换句话说，一种只允许有限代码执行的架构，这样在“利用”的某些特定数学定义中，利用根本不可行。因此，漏洞利用在此框架下可能造成的潜在损害将被证明是有限的。

一般来说，我正在寻找基于一些合理的基本假设的“可破解”与“不可破解”架构的数学动机理论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:34:53.247

已经进行了尝试，但没有任何实际有用的东西。数学形式主义中总是存在未捕获的行为的可能性（例如侧信道攻击），如果失败，人类操作员通常是一个很大的漏洞。

实际上，没有什么是 100% 安全的。最大的问题是破解某些东西所需的努力是否值得潜在的回报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T02:16:06.503

如果您将其限制为“黑客攻击”并将所有其他安全方面放在一边（例如，广播敏感信息或其他），您会在[LANGSEC](http://langsec.org)找到许多答案。（一定要看看[简短的介绍](http://langsec.org/occupy)。）

他们为黑客（*意外的输入驱动计算*）提供了定义，描述了问题背后的理论（图灵完整的文件格式和协议、临时解析、不同的语法）并解释了如何避免这种情况。您只需要在代码中实际执行此操作。

* * *

（如果您打算包括更一般的安全方面（未定义的行为、程序崩溃、访问限制）：是的，很多东西。如果您愿意，我可以写一个*冗长*的解释。）

# openerp - 申请人选项未显示在 openerp 的雷鸟插件中

> ID：11285749
> 
> 赞同：1
> 
> 时间：2012-07-01T21:27:19.167
> 
> 标签：openerp, thunderbird-addon

我正在使用 openerp 6.1.1 并尝试从 Thunderbird 插件创建一个申请人。

我创建了一个自定义模块来向 hr_applicant 模型添加一些额外的字段。

雷鸟 OpenERP 插件不显示创建申请人的选项。

当我删除自定义模块时，我可以在 Thunderibird 插件中看到该选项。

我不清楚我在自定义模块中做错了什么：

```
class hr_applicant_custom (osv.osv):
  _name = 'hr.applicant'
  _inherit = 'hr.applicant'
  _columns = {
    'year_passing': fields.integer('Passing Year', help='Year of passing'),
    'experience': fields.float('Experience', digits=(3,1)),    
  }
hr_applicant_custom() 
```

请指教。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:12:48.197

在 Thunderbird 的模块中，你可以看到继承了`mail.thread` 这个行为的模型的模型，可以使用的方法是[`message_capable_models`](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/mail/mail_thread.py#L61)，它会过滤继承模型的模型`mail.thread`

在您的情况下，如果您仔细查看模块的代码，`hr_recruitment`您会发现`hr.applicant`模型正在[继承](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/hr_recruitment/hr_recruitment.py#L95)，`mail.thread`因此您将在 TB Push Mai 列表下看到它，现在在您的模块中，您正在做的是修改`_inherit`模型的属性，`hr.applicant` 因此由于 python MRO 这将更改为新类别，现在此模型不符合创建新记录的条件。

***解决方案：***`_inherit`您应该尝试多个模型`inherit = ['mail.thread', 'hr.applicant']`

希望这会有所帮助。

# javascript - 这在我的函数 *t 中没有定义

> ID：11285752
> 
> 赞同：0
> 
> 时间：2012-07-01T21:27:30.223
> 
> 标签：javascript

第一个使用`this`（第 2 行）错误的语句：

```
this is undefined 
```

验证行号。验证了这种使用方式在另一个名为 SMessage 的函数中有效。尝试更改参数名称，使其不等于对象属性。无法弄清楚为什么它不会分配给 this.tag_array。已验证 tag_array1 已填充为值数组。

```
var VBPaneInit = function ( tag_array1 ) {
    this.tag_array = tag_array1;
    this.initializeTags();
    this.initializePages();

    VBPaneInit.prototype.initializeTags = function( ) {
        var element;
        for ( element = 0; element < this.tag_array.length; element++ ) 
        {
            document.getElementById( this.tag_array[element] ).onclick = vDomPageFlip;
        }
    };
    VBPaneInit.prototype.initializePages = function( ) {
        if ( this.tag_array.length === 0 )
        {
            return;
        }
        var index, page_element;
        for ( index = 0; index < this.tag_array.length; index++ ) 
        {  
            page_element = document.getElementById( this.tag_array[index] + '_page' );
            page_element.style.display = 'none';
        }
        vDomPageFlip( this.tag_array[0] );
    };
}; 
```

**召唤**

```
VBPaneInit( tag_array ); 
```

出于测试目的，减少到：

```
var VBPaneInit = function( tag_array ) {
    this.tag_array = tag_array;
} 
```

还是不行。

工作类似：

```
var SMessage = function ( element ) {
    this.element = element;
    SMessage.prototype.display = function( type ) {
        this.element.innerHTML = this.messages[ type ];
    };
    SMessage.prototype.messages = {
        name:         'Please enter a valid name',
        email:        'Please enter a valid email',
        pass:         'Please enter password, 6-40 characters',
        url:          'Please enter a valid url',
        title:        'Please enter a valid title',
        tweet:        'Please enter a valid tweet',
        empty:        'Please complete all fields',
        same:         'Please make emails equal',
        taken:        'Sorry, that email is taken',
        validate:     'Please contact <a class="d" href="mailto:chris@host.com">support</a> to reset your password',
        s_name:       'Please enter a valid name.',
        s_email:      'Please enter a valid email.',
        s_pass:       'Please enter password, 6-40 characters.',
        s_url:        'Please enter a valid url.',
        s_title:      'Please enter a valid title.',
        s_tweet:      'Please enter a valid tweet.',
        s_empty:      'Please complete all fields.',
        s_same:       'Please make emails equal.',
        s_taken:      'Sorry, that email is taken.',
        s_validate:   'Please contact <a class="d" href="mailto:chris@host.com">support</a> to reset your password.'
    };
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T21:38:22.923

没有`this`，因为你没有说`new VBPaneInit(tag_array)`，你需要`new`创建一个对象。

然后，您的下一个问题是您没有以两种不同的方式正确构建原型：

1.  `vBPaneInit`不一样`VBPaneInit`，JavaScript 是区分大小写的。
2.  您正在尝试在构造函数中设置原型，因此它不会在您第一次创建对象时出现，并且每次创建对象时都会这样做。

你应该做更多这样的事情：

```
var VBPaneInit = function(tag_array1) {
    this.tag_array = tag_array1;
    this.initializeTags();
    this.initializePages();
};
VBPaneInit.prototype.initializeTags = function() {
    var element;
    for (element = 0; element < this.tag_array.length; element++) {
        document.getElementById(this.tag_array[element]).onclick = vDomPageFlip;
    }
};
VBPaneInit.prototype.initializePages = function() {
    if (this.tag_array.length === 0) {
        return;
    }
    var index, page_element;
    for (index = 0; index < this.tag_array.length; index++) {
        page_element = document.getElementById(this.tag_array[index] + '_page');
        page_element.style.display = 'none';
    }
    vDomPageFlip(this.tag_array[0]);
};

new VBPaneInit(tag_array);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T21:48:37.027

其他答案突出了错误，所以我不会劫持它，但是没有人指出`new`关键字的确切作用以及它的省略和包含的含义。

所以，为了OP...

在 JavaScript 中，对于不是事件回调或通过`apply()`, `call()`or调用的函数`bind()`，或者是对象的方法，`this`它们内部的默认值是 window 或者在 ECMA5 严格模式下，`undefined`。

如果您使用`new`关键字调用函数，这会改变，这会创建函数的实例（因为 JavaScript 没有与其他语言一样的类的确切概念，尽管这是一种模拟）。在这些情况下`this`，正如人们所期望的那样，指向实例。

# eclipse - 使用 Eclipse 安装 GWT 插件

> ID：11285757
> 
> 赞同：14
> 
> 时间：2012-07-01T21:28:28.310
> 
> 标签：eclipse, gwt

我正在尝试使用 GWT，但我对它很陌生。按照文档，我尝试为 Eclipse 安装 GWT 插件，但随后出现错误消息：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Google Plugin for Eclipse 3.7 3.0.1.v201206290132-rel-r37
  (com.google.gdt.eclipse.suite.e37.feature.feature.group 3.0.1.v201206290132-rel-r37)
 Missing requirement: Google Plugin for Eclipse 3.7 3.0.1.v201206290132-rel-r37
  (com.google.gdt.eclipse.suite.e37.feature.feature.group 3.0.1.v201206290132-rel-r37)
  requires 'org.mortbay.jetty.server 0.0.0' but it could not be found" 
```

我试图找到`org.mortbay.jetty.server`可以处理的东西，但我没有找到。有人知道吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-11T05:32:18.937

这是因为您正在尝试使用最新的 Juno 版本 4.2，以及 3.7 的插件链接。

使用以下更新站点：http: [//dl.google.com/eclipse/plugin/4.2](http://dl.google.com/eclipse/plugin/4.2)

现在一切都应该正常了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T15:38:23.103

我有同样的问题，但我认为这是因为我使用的是 eclipse Juno（谷歌文档说使用 indigo）。jetty 项目最近转移到了 eclipse 的保护伞下，并且 jetty 包 (org.mortbay.jetty.server) 被重命名（参见[http://www.eclipse.org/proposals/jetty/](http://www.eclipse.org/proposals/jetty/)）。因此 3.7 版的 google 插件将无法正确解析依赖关系。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T14:24:50.193

如果您仍然想要插件的早期 (3.x) 版本，请尝试复制一些已经安装该插件版本的团队成员的插件目录。我无法想象 google 取消之前版本插件的原因！

# php - 如何使用单个字符 PHP 通配符进行字符串替换？

> ID：11285758
> 
> 赞同：0
> 
> 时间：2012-07-01T21:28:51.263
> 
> 标签：php, string, replace, wildcard

如何使用单个字符 PHP 通配符进行字符串替换？

我需要在以下代码行中进行字符串替换：

```
<img src="http://mydomain.com/image-1.jpg" alt="image 1"></a>
<img src="http://mydomain.com/image-2.jpg" alt="image 2"></a>
<img src="http://mydomain.com/image-3.jpg" alt="image 3"></a>
<img src="http://mydomain.com/image-4.jpg" alt="image 4"></a> 
```

我想在上述所有行中替换以下字符串：

```
 alt="image *"></a> 
```

其中 * 通配符代表一个数字，带有以下大于号：

```
> 
```

产生以下结果：

```
<img src="http://mydomain.com/image-1.jpg">
<img src="http://mydomain.com/image-2.jpg">
<img src="http://mydomain.com/image-3.jpg">
<img src="http://mydomain.com/image-4.jpg"> 
```

如果可能的话，我想使用**一行 PHP 代码**来完成这项工作，从而避免使用循环语句。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:40:06.907

正则表达式或[RegEx](http://www.regular-expressions.info/)应该可以很好地解决问题。

```
preg_replace('( alt="image [0-9]+"></a>)', '>', $text); 
```

*   在 RegEx 中，字符组的构造`[]`意味着组中指定的任何字符都可以作为通配符进行匹配。
*   在组内使用破折号`-`意味着字符组在我们的例子中跨越从`a`到。`z``0-9`
*   在字符组末尾使用星号`*`意味着该组可以重复 0 次或更多次，从而允许我们定义由多个数字组成的数字。
*   使用加号而不是星号意味着该组可以重复 1 次或多次（这可能更适合这里，因为您想匹配一个数字而不是空槽）。

# nginx - ELB、RDS mysql、EC2、NGINX 下一步在哪里寻找并发性能问题

> ID：11285768
> 
> 赞同：4
> 
> 时间：2012-07-01T21:30:07.267
> 
> 标签：nginx, amazon-ec2, amazon-rds, amazon-elb

设置：EC2 服务器在 ELB 后面自动扩展，连接到 RDS mysql 数据库，所有静态文件都从云端提供。

我在 EC2 服务器上运行 nginx 作为 Web 服务器，keepalive 设置为 20，工作进程 4，. Codeigniter 是后端并使用 codeigniter 会话。

我一直在运行许多基准测试来尝试测试性能、围攻、apache 基准测试、blitz.io。

我正在测试两个特定页面，第一个性能非常好，它使用 codeigniter 会话，因此会访问数据库以读取和更新 ci_sessions 数据库。第二页是我遇到问题的页面，它运行一个包含多个连接的查询，单个用户在大约 0.4 秒内完成。此查询已优化，我正在使用 InnoDB 表。在使用 c10 和 n1000 的 apache 基准测试下，100% 的请求会在 634 毫秒内返回。

当我运行并发用户 > 200 时，我开始遇到问题。添加更多 EC2 服务器无济于事，CPU 的利用率约为 50%。RDS 数据库监控还显示 CPU 和内存使用率低于 70%，平均 DB 连接数 < 35。

通过迁移到大型 RDS 实例和大型 EC2 实例提高了性能，这让我想知道 I/O 是否在这里发挥作用。

如果我在负载测试期间启动 ELB 之外的服务器并点击此页面，它会在不到一秒的时间内返回，但如果我在 ELB 内启动另一台服务器，它最多会保持 4 或 5 秒。这表明我没有超载 RDS。

我尝试用 5 分钟的爆发缓慢地增加 ELB，但这似乎没有帮助。

我想知道下一步该去哪里寻找这个问题，无论是某种 I/O 问题还是其他问题，因为 RDS 和 EC2 服务器似乎没有发挥它们的能力。任何建议或想法下一步将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:25:14.103

好的。如您所知，这是一个非常广泛的主题。但我会尽力帮助。

1.  ELB 通常不擅长突发扩展。在与亚马逊工程师讨论过这个问题后，我发现他们实际上不会在爆发时扩展 ELB，因为这是不可能的。您需要随着时间的推移保持一致的负载才能扩大 ELB。因此，我切换到了 haproxy。除了 ELB 不会在突发负载上扩展之外，它还使用 CNAME 进行 DNS 查找，这也会影响您的性能。因此，如果您计划经常进行突发负载，或者要求进行 DNS 查找，最好不要使用 ELB。

2.  RDS 是一个黑匣子。好吧，这并不完全正确，但总的来说，我会避免使用 RDS，除非我知道后端是一个易于扩展的简单设置。话虽如此，RDS 确实有助于扩展，但我会简化后端并确保您的查询快速运行。在常规 MySQL 实例上运行它，看看它是否是亚秒级的。根据我的经验，当您说查询是“优化的”时，这并不意味着如果您发现我的想法没有其他方法可以使其更加“优化”。

# c++ - C++ builder TstringGrid 从特定单元格获取字符串

> ID：11285771
> 
> 赞同：0
> 
> 时间：2012-07-01T21:30:50.057
> 
> 标签：c++, c++builder, vcl, tstringgrid

大家好，我有 C++ tStringGrid

我想从具有坐标的特定单元格中获取字符串

我试过这个但没有运气：

```
UnicodeString cell_obj = StringGrid1->Objects[3][2]->ToString(); 
```

错误：

```
Access violation at address 00407617 in module 'NGG_Client.exe'. Read of address 00000000. 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:52:57.943

我没有可以构建它的工作开发环境，但请尝试：

```
assert( StringGrid1->ColCount > 3 && StringGrid1->RowCount > 2 );
UnicodeString cell_str = StringGrid1->Cells[3][2]; 
```

它可能是一个`AnsiString`而不是一个`UnicodeString`。

# cuda - GPU 上的 L1 缓存存储

> ID：11285775
> 
> 赞同：1
> 
> 时间：2012-07-01T21:31:06.243
> 
> 标签：cuda, gpu, shared-memory, cpu-cache

具有计算能力 2.x 的 GPU 将其片上内存组织成 32 个存储体。片上存储器可用于 2 种配置：48 KB 共享和 16 KB L1，反之亦然。对于 48 KB 共享和 16 KB L1 配置，其中存储有 L1 高速缓存的存储体。据我了解共享内存存储，当写入它时，连续的 32 位字存储在连续的银行中。这让我想到，对于 48 KB 共享和 16 KB L1 配置，每个内存库将存储 384 个 32 位字用于共享内存和 128 个 32 位字用于 L1 高速缓存。这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:54:04.183

如果我理解你的正确性：你问的是，例如 bank0 是否持有相对于 0 移动 32、64 等 4 字节字（即 128 字节）的地址，因此 eg`p[0]`和`p[32]`( `int* p`) 对应于同一个银行，对吗？

我相信，编程指南（5.0）的 F.4.3（共享内存）部分暗示了这种组织，特别是“32-Strided Access”部分。

[本演示文稿](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDAQFjAA&url=http%3A%2F%2Fdeveloper.download.nvidia.com%2FGTC%2FPDF%2FGTC2012%2FPresentationPDF%2FS0514-GTC2012-GPU-Performance-Analysis.pdf&ei=vfRNUPHbDPP14QT2qoCwDg&usg=AFQjCNGNSS1nyVAUNDhhEjEs32gEWoHEVg&sig2=T00wgXQbJwcTgi2tRG-hDg&cad=rja)的第 84 页还提供了该组织的一些可视化。简而言之：对于 SMEM，您是正确的。

L1 的访问模式为 128Byte 宽，因此它在您的配置中拥有 128 128Byte 宽的行（并且第`N`行的地址之间没有关系`(N+1)`）。您可能会将单个 128Byte 行解释为为 32 个 bank 中的每一个提供 4Bytes，那么您在这部分也是正确的。

# mysql - rake db：创建错误的位置

> ID：11285776
> 
> 赞同：0
> 
> 时间：2012-07-01T21:31:09.397
> 
> 标签：mysql, ruby-on-rails, ruby, rake, archlinux

我目前正在设置我的第一个 Rails 环境。当我尝试跑步时

```
rake db:create 
```

在 database.yml 中指定的*数据库*是构建的，但不是在**db/**文件夹中，而是在**/var/lib/mysql**中。我必须做什么才能使其在适当的位置构建数据库？我正在运行 Arch Linux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:28:12.203

只有 sqlite 数据库将被放置在该`db/`文件夹中。其他数据库解决方案，如 Mysql 或 Postgresql 将根据自己的内部位置创建数据库，通常在安装期间设置。

创建数据库的位置没有任何问题，不应将其移动或放置在`db/`文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:54:53.380

您的数据库（在这种情况下看起来像 mysql）配置确定实际数据文件的存储位置。它与轨道无关。

# mysql - grails：尝试在 mysql 中保存 utf-8 失败

> ID：11285778
> 
> 赞同：0
> 
> 时间：2012-07-01T21:31:26.917
> 
> 标签：mysql, grails, datasource

我正在尝试以 utf-8 语言（希伯来语-阿拉伯语等）保存文本，但它失败了......首先它给了我（????????）所以我把它放在 dataSource.groovy dbCreate = "update" url = "jdbc:mysql://localhost/db_name?useUnicode=yes&characterEncoding=UTF-8" } 我已经转换了整个数据库，它的表也有排序规则 utf-8 和字符集..

它给了我错误说

> 错误 util.JDBCExceptionReporter - 非法混合排序规则 (latin1_swedish_ci,IMPLICIT) 和 (utf8_general_ci,COERCIBLE) 用于操作 '=' 2012-07-01 21:54:25,969 [http-8080-1] 错误 errors.GrailsExceptionResolver - 非法混合排序规则（latin1_swedish_ci，IMPLICIT）和（utf8_general_ci，COERCIBLE）操作'='java.sql.SQLException：排序规则（latin1_swedish_ci，IMPLICIT）和（utf8_general_ci，COERCIBLE）在com.mysql.jdbc操作'='的非法混合。 SQLError.createSQLException(SQLError.java:1075) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3498) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3566) 在 com.mysql.jdbc .MysqlIO.sendCommand(MysqlIO.java:1959) 在 com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2113) 在 com.mysql.jdbc。ConnectionImpl.execSQL(ConnectionImpl.java:2568) 在 com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2113) 在 com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2275) 在 com.ehs.GameNewsController $_closure4.doCall(GameNewsController.groovy:27) at com.ehs.GameNewsController$_closure4.doCall(GameNewsController.groovy) at java.lang.Thread.run(Thread.java:680)线程.run(线程.java:680)线程.run(线程.java:680)

所以我做错了什么..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:26:29.513

该错误清楚地表明存在“latin1_swedish_ci”和“utf8_general_ci”排序规则的混合。请再次尝试检查您在任何表中是否没有任何字段仍在 latin1_swedish_ci COLLATE 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T22:59:46.380

试试 useUnicode=true

```
 jdbc:mysql://localhost/db_name?useUnicode=true&characterEncoding=UTF-8 
```

并注意添加

```
dataSource {
    ...
   dialect = org.hibernate.dialect.MySQLDialect
   ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:42:43.707

在 Linux 上也有同样的问题。将表引擎更改为 InnoDB 帮助了我。

# php - 会话在一个 PHP 页面上不起作用

> ID：11285779
> 
> 赞同：0
> 
> 时间：2012-07-01T21:31:40.133
> 
> 标签：php, session

这个登录脚本有什么问题？我有一个模态样式的 iframe 登录框，`/login.php`我有一个`/index.php`.

登录后，login.php 重定向到 index.php，但我没有看到用户名。只是`Hello Guest`。当我尝试登录时，它说`you, username, are already logged in`。

登录.php：

```
<?php session_start(); require_once('connections/Main.php');

if(isset($_SESSION['username'])) {

    echo '<div class="error_message">Attention! You, '.$_SESSION['username'].' are already logged in.</div>';
    echo "<br />";
    echo "Go <a href='javascript:history.go(-1)'>back</a> to the page you were viewing before this.</li>";

    exit();
}
?> 
```

索引.php：

```
<?php session_start(); 
   require_once('connections/Main.php'); 
     ?>

<div> Hello <?php   if(isset($_SESSION['username'])) { 
          echo $_SESSION['username']; }
                    else{ echo 'Guest'; } ?></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:36:57.180

你打`session_start()`了两次电话，这是不必要的。`logged_in`登录后，设置会话变量`true`。然后使用

```
if($_SESSION['logged_in']){
 //Do what you want for the logged in user
} 
```

确实，您可以在一个 login.php 中完成所有这些工作。有这样的事情：

```
//if reached from login form
if ($_POST['email']){
  //validate the user
  // if validates, log him in by:
    $_SESSION['logged_in'] = true;
    $_SESSION['email']= $_POST['email'];
  //do other fancy database save stuff
 }
//else show him login form
else{
  <form>
   //<input />.. etc
  </form>
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-01T21:42:49.537

**以此开始您的会话。**

```
$_SESSION["im_going_in"]=true; 
$_SESSION["username"]=$username;//get data from db. 
```

**索引.php**

```
<?php
if($_SESSION["im_going_in"]) {
?>

  <?=strtoupper($_SESSION["username"])?>// welcome dear bla bla...

<?
}
?> 
```

# objective-c - 目标 C：objc_msgSend 返回类型

> ID：11285780
> 
> 赞同：3
> 
> 时间：2012-07-01T21:31:40.183
> 
> 标签：objective-c

如何找出结果的类型`objc_msgSend`？

从文档：

```
id objc_msgSend(id theReceiver, SEL theSelector, ...) 
```

也就是说，`objc_msgSend`返回的一切都是`id`类型，对吧？但有时该函数返回一个正确的 Objective C 对象（当请求 NSWindow +new 时），有时它只返回一个 bool （它是一个 C `char`）。

如何区分这些不同的结果？我如何知道它返回的是对象还是原始类型？

编辑：感谢您的回复！还有一个问题：是否至少可以判断返回的类型是原始类型还是适当的对象（然后可能通过 查询它`object_getClass`）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T21:36:48.627

的调用者`objc_msgSend`应该已经知道返回的类型，并且必须有效地`objc_msgSend`转换为返回正确值的函数指针类型。例如，`-[NSString UTF8String]`将像这样手动调用：

```
const char *cStr = ((const char *(*)(id, SEL))objc_msgSend)
    (@"foo", @selector(UTF8String)); 
```

是的，相当拗口，这就是为什么让编译器来做这件事通常是一个更好的主意。如果您在发送消息时需要更多活力，我建议您先查看[NSInvocation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html)。除此之外，初始化调用的方法签名将包括有关返回类型和所有参数的信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T21:36:38.133

您只能从方法签名中知道它。此外，在返回浮点数时，将使用`objc_msgSend_fpret`，以及在返回结构时。`objc_msgSend_stret`

如果返回值是一个 Objective-C 对象，你可以使用`object_getClass()`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-01T21:49:29.903

如果这是返回类型的运行时发现，您可以使用 ObjC 运行时 API 来查找给定对象方法的方法定义，然后返回类型。具体方法：

`Method class_getInstanceMethod(Class aClass, SEL aSelector)`

或者

`Method class_getClassMethod(Class aClass, SEL aSelector)`

将为您提供一个`Method`结构，您随后可以使用该结构进行查询

`void method_getReturnType(Method method, char *dst, size_t dst_len)`

获取返回类型的 cstring 描述。此描述不太适合人类阅读 - 例如，在您的示例中，您需要检查引用的字符串`*dst`是否等于“@”。如果是，则返回类型为 type `id`。[您可以在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html#//apple_ref/doc/uid/TP40008048-CH100)查看对不同类型编码的引用，以及我在[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)提到的 ObjC 运行时 API 方法。

正如 H2C03 所提到的，当推断出的返回类型表明它们的使用是合适的时（例如，当返回类型是结构或浮点数时，应该使用`objc_msgSend_fpret`and变体。请参阅 ObjC 运行时 API 文档上关于这两种方法的文档说明页。）`objc_msgSend_stret``method_getReturnType`

另外，因为我希望你有一个美好的一天，我觉得我应该警告你运行时代码发现通常有点脆弱，通常是一种令人讨厌的性能气味。无论如何。:)

# d3.js - d3.js中立体主义上下文中的轴比例

> ID：11285781
> 
> 赞同：1
> 
> 时间：2012-07-01T21:32:05.640
> 
> 标签：d3.js, cubism.js

我一直在玩立体主义，并想尝试在[http://bost.ocks.org/mike/cubism/intro/demo-stocks.html](http://bost.ocks.org/mike/cubism/intro/demo-stocks.html)上 的股票示例 csv 文件对于每只股票有 1280 个值，最后一个值来自2012 年 5 月 1 日，但显示的时间线显示到 2012 年 Augsut。我了解 1280 的步长并没有选择所有值，因为两者之间有假期，因此文件中的最后 1280 个值和显示的值存在差异。什么是时间线的起始值（今天，2012 年 5 月 1 日）以及 .serverDelay(new Date(2012, 4, 2) - Date.now()) 在时间线显示中的作用是什么？从[https://github.com/square/cubism/wiki/Context#wiki-scale上的 API 并不清楚](https://github.com/square/cubism/wiki/Context#wiki-scale). 演示文稿 (http://bost.ocks.org/mike/cubism/intro/) 中的情节似乎显示了从 2012 年 5 月 1 日开始的 1280 天。很可能我在这里遗漏了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:18:14.737

我不确定我是否理解您的问题，但似乎没有其他人可以提供见解，我目前也在努力解决这个问题。您是否查看了[cubism.Context 文档](https://github.com/square/cubism/wiki/Context)？它包括这些方法的定义。

我相信这个特定示例的一些问题在于它使用了 csv 文件，而不是设计用于使用的石墨/立方体数据库系统 cubism.js。因此，在这种情况下，serverDelay 可能完全无关紧要。

# c# - 读取嵌入式程序集 (.dll) 的问题

> ID：11285782
> 
> 赞同：2
> 
> 时间：2012-07-01T21:32:19.387
> 
> 标签：c#, dll, resources, .net-assembly

因此，我正在为我的一个项目制作一个定制的安装程序，而我需要将所有内容“打包”到一个文件中。（我不能使用 ILMerge 或 .NETZ，因为我必须包括的其中一件事是一个非托管（它是如何被调用的？）程序集。）无论如何，我主要从这里读了很多东西，人们说去做这个：

*   将 .dll 添加为嵌入式资源；
*   向 AssemblyResolve 方法添加一个处理程序，以便在我的应用程序找不到程序集时启动它
*   在该处理程序中，使其使用将输入流传输到 Assembly.Load() 可以使用的字节数组的函数从内存中加载 .dll。

我做了所有这些事情，并添加了对 .dll 的正常引用，因此我的代码可以正确编译。但是，当我从应用程序所在的目录中删除 .dll 文件并尝试运行它时，“无法加载文件或程序集...”对话框（或其他任何内容，你知道我在说什么) 弹出并告诉我它无法加载我的 .dll，尽管我明确告诉它从 AssemblyResolve EventHandler 中的那个字节数组加载它。
如果这是以前已经回答过的问题，我很抱歉。不过，查看推荐的类似问题，我看不到答案。
我能看到的唯一可能相关的是“C# 不允许我从字节加载，除非我处于高安全性上下文中。” 如果有人知道什么，您能否确认/否认此声明，并告诉我什么是“高安全性上下文”？我承认，我不擅长复杂的事情。:)

提前感谢您的时间和答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:43:02.340

程序集是托管 dll 的另一个名称 - 本机 dll 不会以 AssemblyResolve 位 afaik 结束。我不知道除了在启动时将嵌入式 dll 保存到磁盘之外是否还有其他选择，但我还没有找到告诉操作系统（负责加载非托管 dll）如何找到嵌入式 dll 的选项。

# serial-port - 保存 Lilypad Arduino 的输出

> ID：11285785
> 
> 赞同：1
> 
> 时间：2012-07-01T21:32:35.387
> 
> 标签：serial-port, arduino

当我们`Serial.println`在草图中调用该函数时，它会将输出打印到串行通道。

当 LilyPad 连接到 PC 并将其保存到 PC 中的磁盘时，有没有办法稍后获取输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:28:09.823

您可以添加 SD 卡并将数据保存到其中。虽然使用板载 512 字节的 EEPROM 会简单得多。

[**EEPROM写教程**](http://arduino.cc/en/Tutorial/EEPROMWrite)

```
EEPROM.write(addr, val); 
```

[**EEPROM 读取教程**](http://arduino.cc/en/Tutorial/EEPROMRead)

```
value = EEPROM.read(address); 
```

根据可用的 IO 引脚，您还可以添加一些额外的 EEPROM。

[**I2CEEPROM**](http://arduino.cc/playground/Code/I2CEEPROM)

# java - 查询两个相关表（Joins）

> ID：11285788
> 
> 赞同：10
> 
> 时间：2012-07-01T21:33:12.647
> 
> 标签：java, sql, hadoop, hive, hiveql

这是 Hive 中的第一个表 - 它包含有关我们正在购买的商品的信息。

```
CREATE EXTERNAL TABLE IF NOT EXISTS Table1   (This is the MAIN table through which comparisons need to be made)
(
ITEM_ID BIGINT,
CREATED_TIME STRING,
BUYER_ID BIGINT
) 
```

这是上面第一个表中的数据

```
**ITEM_ID**   **CREATED_TIME**    **BUYER_ID**
220003038067     2012-06-21        1015826235
300003861266     2012-06-21        1015826235
140002997245     2012-06-14        1015826235
200002448035     2012-06-08        1015826235
260003553381     2012-06-07        1015826235 
```

这是 Hive 中的第二张表 - 它还包含有关我们正在购买的物品的信息。

```
CREATE EXTERNAL TABLE IF NOT EXISTS Table2
(
USER_ID BIGINT,
PURCHASED_ITEM ARRAY<STRUCT<PRODUCT_ID: BIGINT,TIMESTAMPS:STRING>>
) 
```

这就是上表中的数据——

```
**USER_ID**    **PURCHASED_ITEM**
1015826235     [{"product_id":220003038067,"timestamps":"1340321132000"},    {"product_id":300003861266,"timestamps":"1340271857000"},    {"product_id":140002997245,"timestamps":"1339694926000"},    {"product_id":200002448035,"timestamps":"1339172659000"},    {"product_id":260003553381,"timestamps":"1339072514000"}] 
```

我已将数据减少到只有一个 BUYER_ID(USER_ID) 以使问题易于理解。

**问题陈述-**

我需要比较`Table2`with `Table1`，这意味着我需要查看`USER_ID`from`Table2`和`BUYER_ID`from `Table1`（因为它们都是相同的东西）是否匹配，然后`PURCHASED_ITEM`在 Table2 中这是一个 PRODUCT_ID（与 ITEM_ID 相同）和 TIMESTAMPS（与 CREATED_TIME 相同）的数组应该`ITEM_ID`与特定`CREATED_TIME`的USER_ID(BUYER_ID)相同`Table1`，并且有时它们（表示`PURCHASED_ITEM`和`ITEM_ID`, ）可能不同，或者在比较之后`CREATED_TIME`缺少某些 PRODUCT_ID 和 TIMESTAMPS 。`Table2``Table1`

我的意思是，对于特定的 BUYER_ID(USER_ID)，和 in 的计数`PRODUCT_ID`应该`TIMESTAMPS`与`Table2`Table1 中的计数`ITEM_ID`和计数相同，`CREATED_TIME`并且内容应该相同。如果它们不一样或缺少条目`Table2`，那么我需要打印结果，这个特定的`ITEM_ID`和`CREATED_TIME`缺少`Table2`或在比较之后`PRODUCT_ID`和`TIMESTAMPS`不一样`Table1`。

因此，例如，目前在 Table1 中，`BUYER_ID 1015826235`我有`5 ITEM_ID`和`5 CREATED_TIME`，所以在 Table2 中，我应该在一行中`5 PRODUCT_ID`与`5 TIMESTAMPS`Table1 完全相同。`USER_ID(BUYER_ID)`如果它不一样或条目丢失，那么我需要打印结果，显示这个丢失或者这个数据是错误的。

所以只是为了更清楚-

`PURCHASED_ITEM`是一个结构数组，`Table2`它包含两个东西`PRODUCT_ID`和`TIMESTAMPS`。

如果`USER_ID`and`BUYER_ID`得到匹配，则`PRODUCT_ID`in`Table2`应与`ITEM_ID`in匹配`Table1`，`TIMESTAMPS`in`Table2`应与`CREATED_TIME`in匹配`Table1`。

**更新**

**HiveQL SQL 查询问题：-**

```
Q 1) Find all USER_ID from Table2 whose PRODUCT_ID or TIMESTAMP are not same with
ITEM_ID or CREATED_TIME after comparing with Table1 on BUYER_ID. 
```

**我为第一个问题写的查询。查询对吗？**

```
A 1) select Table2.user_id from Table2 where Table1.user_id = Table2.buyer_id
and (Table1.item_id <> Table2.product_id or UNIX_TIMESTAMP(Table1.created_time) <>
Table2.timestamps)

Q 2) Find the `BUYER_ID(USER_ID)` and as well as those `ITEM_ID` and `CREATED_TIME`
which are missing from `Table2` after comparing from `Table1` on `BUYER_ID`.

A 2) Not sure. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:39:58.367

我对 Hive 不熟悉，但我建议您创建一个与 Table1 具有相同架构的临时表，并用 Table2 数据填充它（使用时间戳转换）。如果支持，这最终可能是一种观点。

然后可以使用以下查询来比较两个表的内容：

```
SELECT * FROM Table1 WHERE (ITEM_ID,CREATED_TIME,BUYER_ID) NOT IN (SELECT * FROM Table2bis)

SELECT * FROM Table2bis WHERE (ITEM_ID,CREATED_TIME,BUYER_ID) NOT IN (SELECT * FROM Table1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T07:11:57.387

我建议您不要为您的 CREATED_TIME 和时间戳使用“字符串”数据类型，因为它会使比较更加困难。而不是使用日期或时间戳。

对于您的问题：我认为这里的大问题是单独使用字符串！

我是 oracle 用户，但 Hive 中应该有这样的东西：

```
To_date({string},{Format}) 
```

正如你所使用的

```
UNIX_TIMESTAMP({string}) 
```

另一件事：当你有结构时，你应该像这样处理字段：Table2.PURCHASED_ITEM[{address}].product_id 而不是未知的 Table2.product_id。

还有一个建议：

```
Trunc({Date},{Format ex: 'SS' for sseconds}) 
```

当您的 CREATED_TIME 和您的 time_stamp 不完全相同时（可能是 0.001 秒的差异，因为如果您为它们中的每一个插入 Now 或 Sysdate，则插入时间不同）您最好将日期截断为秒或毫秒或任何您认为更好。

还有一件事：在这里也使用 NVL() 或转换空值，因为如果你有这样的问题，你的表中也可能有空值，这会导致你的查询出现问题，NVL() 函数会将空值转换为你的喜欢。

希望这可以帮助。

# jquery - 寻找元素

> ID：11285789
> 
> 赞同：3
> 
> 时间：2012-07-01T21:33:14.767
> 
> 标签：jquery, html

任何人都可以帮忙。我试图在表单上选择一些元素，但是随着元素的动态添加，这开始导致问题。

我需要选择的元素是每个子 div 中的第二个输入元素。我一直在尝试这样的事情（没有太多运气）：

```
$("#parentdiv :input:first-child").addClass("bad") 
```

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T21:36:56.050

```
$('#parentdiv :input:nth-child(2)').addClass("bad") 
```

# android - 具有两个值的 Android 自定义 SeekBar

> ID：11285790
> 
> 赞同：0
> 
> 时间：2012-07-01T21:33:23.280
> 
> 标签：android, user-interface, custom-component, seekbar

我需要创建一个自定义的 SeekBar，它可以显示两个不同的值。我的想法是，拖动拇指将改变整个搜索栏的背景颜色（第一个值），并且还会有一条白色水平线，它将显示第二个值。

![自定义搜索栏](../Images/ffe4460f2baf75fe2d32fdc7ca5a0969.png)

你能帮我实现这个吗？

我的一个想法是使用

```
mySeekBar.setProgressDrawable(dynamicalyCreatedDrawable); 
```

但我希望应该有更好的解决方案。如果没有，您至少可以指出我，如何动态绘制图像/可绘制对象以像这样使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:15:26.760

您可以使用：

```
mySeekBar.setProgress(value1); // for the thumb
mySeekBar.setSecondaryProgress(value2); // for the white line 
```

其中`value1`和`value2`介于 0 和最大值之间。

# ruby-on-rails-3 - 这是什么意思#(?-mix:facebook|twitter)？

> ID：11285794
> 
> 赞同：5
> 
> 时间：2012-07-01T21:34:00.747
> 
> 标签：ruby-on-rails-3, routes

rake routes 的以下输出中的表达式 #(?-mix:facebook|twitter) 是什么意思？

```
user_omniauth_callback        /users/auth/:action/callback  users/omniauth_callbacks#(?-mix:facebook|twitter) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T01:45:03.980

这是一个正则表达式片段，它有效地匹配`facebook`or`twitter`在那个位置，并且区分大小写（因此不会匹配`fAcebOOK`or `TWITTER`）。

如果您想了解更多关于正则表达式的信息，请[从这里开始](http://www.ruby-doc.org/core-1.9.3/Regexp.html):)

# javascript - 内容加载流畅，怎么办？

> ID：11285799
> 
> 赞同：3
> 
> 时间：2012-07-01T21:34:45.727
> 
> 标签：javascript, jquery, ajax, user-experience

我不确定如何引用它（所以我不能自己搜索它），但是当您单击 github 中的代码页链接时，如何实现平滑的页面加载（类似于内容预取）或当您单击 Google plus 侧边栏的另一个元素时？

我的意思是：我认为这是 javascript 和 ajax 的东西，但我想不通，页面加载顺利，没有“刷新”的感觉，而且肯定不是 flash。

如果我不清楚，我很抱歉，如果这不起作用，我会尝试更好地解释它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:38:19.507

Ajax + Jquery 是我的赌注。
加载页面的基础。然后执行 Ajax 调用以检索数据并使用转换（？）进行 Jquery 以使 GUI 更新不那么笨重。

如果你在他们的堆栈中，微软有一些新鲜的东西，他们称之为[单页应用程序。](http://www.asp.net/single-page-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:25:26.750

其实很简单。
发出 AJAX 请求并显示加载程序。
将响应放在隐藏元素中并使用 JQuery 淡入淡出。

```
$("#id").fadeIn(); 
```

一定会觉得顺滑！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T21:48:25.607

如果您不能完成使用 Ajax 获取页面内容和使用 html5 在单击某些内容时更改 URL 的任务，您可以让页面快速淡出然后转到 URL（而不是使用链接使用 JavaScript功能淡出一切，然后改变window.location）

加载页面后，您可以再次快速淡入。它会给你的过渡类似于谷歌的感觉，你会避免“白色闪光”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T21:49:09.070

有多种方法可以实现此效果，但一种相当简单的方法是使用 jQuery ( [http://jquery.com/](http://jquery.com/) ) 和 jQuery UI 选项卡插件 ( [http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/) )。查看该页面上文档的 ajax 模式部分。

如果您使用的是 ASP.NET Web 窗体，您还可以选择使用 UpdatePanel（[UpdatePanel 控件简介](http://msdn.microsoft.com/en-us/library/bb399001.aspx)）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T21:59:54.323

我相信像 Facebook 这样的网站，我猜这就是您所指的那种网站，使用 iFrame 加载内容，然后获取内容并将其传输到另一个元素。这意味着他们不会不断地重新加载左侧菜单、页眉或页脚，并且您的任何聊天记录都会保持显示。

我个人刚刚开发了一个表格，当您向下滚动时会加载额外的行（类似于 Facebook 的新闻提要，尽管我怀疑他们使用表格）。我只是将新行加载到一个隐藏表中，一次 30 行，然后将这些行传输到原始表中。其原理与上述类似。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-06T05:25:30.560

正如 Anirudh Rayabharam 所说，使用 jquery 可以轻松定位要加载的动画元素。您可以将一个类添加到您想要滑入页面的所有内容 onload 并使用这些元素定位这些元素 `$('.load-animation').slideDown(200);`
您可以使用以下代码确保动画开始 onload： `document.onload = function() { $('.load-animation').slideDown(200); }`

# android - 使用带有自定义字体的 TextSwitcher

> ID：11285800
> 
> 赞同：1
> 
> 时间：2012-07-01T21:34:51.630
> 
> 标签：android, fonts, textview, typeface

由于可用的动画，我想使用 a`TextSwitcher`而不是 a `TextView`，但是有人知道如何`Typeface`为文本使用自定义吗？我不想使用默认字体。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T21:44:18.043

只需`android:fontFamily`为每个孩子使用属性`TextView`。

```
<TextSwitcher . . .>
    <TextView
        android:fontFamily="..."
        . . . />

    <TextView
        android:fontFamily="..."
        . . . />

</TextSwitcher> 
```

将使用您指定的字体系列（字体）`TextSwitcher`在两个孩子之间交替。`TextView`

# php - 在 Internet Explorer 上的 Ajax 请求后未创建会话

> ID：11285806
> 
> 赞同：0
> 
> 时间：2012-07-01T21:36:38.820
> 
> 标签：php, ajax, internet-explorer, zend-framework, session

我正在开发一个网站，最近开始调试 Internet Explorer。身份验证是通过对 PHP Zend 操作的 Ajax POST 请求进行的，该操作检查登录/通过数据库并在触发“记住我”时写入 cookie。JSON 与状态码一起发送回 Ajax。（很好，警告，错误等......）然后是这样的：

```
if( result.code == 0 ){ 
   window.location.reload();
   return false;
} 
```

首先，IE 尝试在登录提交后下载一些包含 JSON 响应的文件，因此我对标头进行了一些更改以绕过该行为。

但是现在，IE 什么都不做。我的意思是，Ajax 的成功函数接收到表示一切正常的良好代码（0），它重新加载页面，但仍未登录。

在我们的日志中，Zend 说一切都很好。

注意：我注意到只有当我选中“记住我”复选框时才能登录。

你认为这是从哪里来的？它在其他浏览器上运行良好，我快疯了。

编辑 1：添加 P3P 标头后没有更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:03:25.380

这是一个很长的镜头，但是页面可能被浏览器缓存了吗？换句话说，这些方法是否有帮助： [window.location.reload with clear cache](https://stackoverflow.com/questions/5721704/window-location-reload-with-clear-cache)

或者，[此答案](https://stackoverflow.com/questions/2463248/session-in-iframe-working-in-firefox-but-not-in-internet-explorer?rq=1)中的链接突出显示了要检查的其他一些事项（包括影响 IE 但不影响 FF 的时差）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:02:04.167

我们终于明白了。谢谢克里斯蒂安，[这个链接](http://genotrance.wordpress.com/2006/11/23/session-cookies-rejected-by-internet-explorer/)绝对有帮助。出于安全原因，我们在登录检查后使用 Zend_Session::regenerateId() 重新生成会话 ID。在其他浏览器只重新生成会话 ID 的情况下，IE 会销毁并生成一个新的。所以它失去了连接。（我想）

# javascript - javascript中的全局导入

> ID：11285807
> 
> 赞同：2
> 
> 时间：2012-07-01T21:36:42.163
> 
> 标签：javascript, design-patterns, closures, globals

有人可以向我解释这在 javascript 中的作用吗？

```
 (function (x,y){}(x,y)); 
```

或这个

```
 // global import
  (function ($, YAHOO) {
         // now have access to globals jQuery (as $) and YAHOO in this code
  }(jQuery, YAHOO)); 
```

我从未在 java 或 c++ 等其他语言中看到过类似的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:39:08.197

`function(x, y) { }`是一个匿名函数。

`(x, y)`调用该函数，传递`x`和`y`作为参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T21:40:58.123

第二个代码块的目的是`jQuery`提供 as `$`（无需`$`全局定义）并在本地范围内导入`YAHOO`以使变量查找更快一些。

除此之外，它创建了一个新的范围，因此使用`var`inside 定义的任何变量都不是全局的。

第一个代码块通常以这种方式用于创建新变量，例如，当您处于循环中并且需要创建具有当前`i`值的变量以进行回调时：

```
for(var i = 0; i < 10; i++) {
    (function(i) {
        setTimeout(function() {
            alert("number " + i);
        }, 1000 * i);
    })(i);
} 
```

如果没有那个新的范围，您每次都会有*相同的范围，因此会警告“数字 10”10 次。* `i`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T21:42:00.953

第一个调用一个匿名函数，它接受 2 个参数并且不做任何事情，使用`x`和`y`作为参数。

第二个做同样的事情。它使用 $ 作为第一个参数名称，并将 jQuery 作为参数值传递。因此，可以在此函数内部使用`$`来引用`jQuery`对象。这是一种在函数内将变量别名为另一个名称的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:12:11.727

C# 有一个类似的概念，称为 Lambda 表达式。

```
public static Func<int> Foo()
{
    int a = 1,
        b = 2;

    return () => a + b;
} 
```

它是一个匿名声明的通用的一流函数（通过一流函数，它意味着返回函数本身，而不是其结果）。

在这种情况下，我还将向您展示所谓的闭包 - 返回的方法包含“本地”变量 a 和 b，允许它们在 Foo 超出范围时持续存在。在许多语言中，匿名方法实现闭包。

匿名方法也很酷——你可以执行行为注入，就像在这个基准方法中一样：

```
public static TimeSpan BenchmarkMe(Action timeThis)
{
    Stopwatch sw = Stopwatch.StartNew()
    timeThis();
    sw.Stop;

    return sw.Elapsed;
} 
```

您可以将返回 TimeSpan 的匿名函数传递给此方法，该方法将对单次传递执行基准测试。漂亮，嗯？

# mysql - MySQL 查询或 Jasper 外推根据当前和下一列值计算的列值

> ID：11285810
> 
> 赞同：1
> 
> 时间：2012-07-01T21:36:56.313
> 
> 标签：mysql, jasper-reports

我有一个返回这些值的 MySQL 查询：

```
+------------+-------+
| transcount | users |
+------------+-------+
|        118 |     2 |
|        240 |     4 |
|        480 |     8 |
+------------+-------+ 
```

这是每个用户级别的事务计数。用户字段按升序排列。

我需要生成一份报告，显示随着线性扩展系统中用户数量的增加，我们应该得到的 transcount 的步进增加。例如，在 2 个用户的情况下，我们得到 118 个事务，在一个线性扩展系统中，在 4 个用户的情况下，我们应该得到 236 个事务，（4 / 2 x 118 个事务。）然后在 8 个用户的情况下，我们应该得到 480 个事务（8 / 4 x 240转帐）。

第一行始终是相同的值。最终报告应如下所示：

```
+------------+-------+-------------------------|
| transcount | users | Count_at_linear_scaling |
+------------+-------+-------------------------|
|        118 |     2 |                     118 |
|        240 |     4 |                     236 |
|        480 |     8 |                     480 |
+------------+-------+-------------------------| 
```

我可以在 SQL 或 Jasper 图表中执行此操作。你推荐哪个？我如何在 MySQL 和 Jasper 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:28:59.013

Jasper Support 的 Jim 提供：

嗨，试试这个链接中的方法，它和你需要的非常相似。 [http://jasperforge.org/plugins/mwiki/index.php/Jasperserver/Creating_A_Percent_Of_Field](http://jasperforge.org/plugins/mwiki/index.php/Jasperserver/Creating_A_Percent_Of_Field) 让我知道进展如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:26:22.767

我找到了更好的解决方案。我需要为每一行结果数据实现一个降压旅模式。使用两个变量 - 命名为 in 和 out - 我可以将前一行的值存储在变量 out 中，并将新行的值存储在变量 in 中。诀窍是告诉 Jasper 对 in 和“Now”使用“自动”评估时间” 评估时间到了。例如：

```
<variable name="in" class="java.lang.Long" resetType="None" calculation="System">
    <variableExpression><![CDATA[$V{out}]]></variableExpression>
    <initialValueExpression><![CDATA[0]]></initialValueExpression>
</variable>
<variable name="out" class="java.lang.Long" resetType="None">
    <variableExpression><![CDATA[$F{Y_VALUE}]]></variableExpression>
    <initialValueExpression><![CDATA[$F{Y_VALUE}]]></initialValueExpression>
</variable> 
```

和

```
<detail>
    <band height="35">
        <textField>
            <reportElement x="3" y="0" width="46" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$F{controllers_users}]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement x="67" y="0" width="58" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$F{Y_VALUE}]]></textFieldExpression>
        </textField>
        <textField evaluationTime="Auto">
            <reportElement x="148" y="0" width="44" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$V{in}]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement x="203" y="0" width="44" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$V{out}]]></textFieldExpression>
        </textField>
    </band>
</detail> 
```

-坦率

# c# - 在 VM 中的本地主机上运行时 WCF 超时

> ID：11285822
> 
> 赞同：0
> 
> 时间：2012-07-01T21:38:59.787
> 
> 标签：c#, wcf, virtualbox, performance

我在本地运行 WCF 服务时遇到问题。当我在本地运行服务时，从客户端上打开通道到看到调用 WCF 服务上的方法大约需要 60 多秒。如果我连接到在我们的暂存环境中运行的服务，它工作正常并且没有减速。

*   我在 VirtualBox 托管的 VM 内运行 windows server 2008 的新机器上运行客户端和服务。
*   已在 VM 上禁用 IPV6
*   我的主机文件中有一个指向 localhost 的引用
*   客户端和主机上的详细日志记录，仅显示客户端超时生成的异常。从请求开始到结束很长时间，登录服务都没有显示错误。
*   我关闭了windows防火墙没有任何效果。
*   客户端和服务的所有配置文件都与登台机器匹配。

我工作的其他开发人员都没有这个问题。我在运行 windows7 的单独机器上也没有这个问题（不在 VM 中）。我们的登台服务器也是所有虚拟机（Server 2008），尽管它们运行在不同的虚拟机平台上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:07:58.347

如果您发送非常小的请求并等待每个响应，这看起来就像是[Nagle 的算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)击中了您。通过暂时[禁用它](http://www.windowsreference.com/windows-vista/how-to-disable-nagle-algorithm-in-windows-vista/)进行测试。

如果您不是在第一次调用服务时才开始看到这种情况，而是在前 10 次左右之后才开始看到这种情况，则可能是会话泄漏。这意味着，一个人正在为每个调用创建一个新的服务客户端，然后忘记关闭它。在`ServiceThrottlingBehavior.MaxConcurrentSessions`服务器上用尽之后，每个后续会话都必须等到前一个超时，然后它很快就会成功。通过从默认的 60 秒减少来进行测试`CloseTimeout`，看看这是否是控制您所看到内容的超时。然后，当然，找到会话泄漏并关闭它以进行真正的修复。

如果您的情况都不是，您可以配置[服务跟踪](http://msdn.microsoft.com/en-us/library/ms732023.aspx)并使用其输出来更详细地增强问题。

# browser - 设置ie浏览器缩放级别

> ID：11285825
> 
> 赞同：0
> 
> 时间：2012-07-01T21:39:15.413
> 
> 标签：browser

在 ie8 中，当我的网页加载时，我需要将浏览器缩放级别强制为特定值。我需要做的不仅仅是缩放内容，还要像用户手动更改一样更改浏览器缩放级别。

有办法吗？

提前致谢

# ruby-on-rails - 基于控制器动作轨道动态加载部分

> ID：11285828
> 
> 赞同：1
> 
> 时间：2012-07-01T21:40:00.847
> 
> 标签：ruby-on-rails

我有一系列不同的 HTML 块，我想根据控制器和操作将它们加载到我的部分“_right_column”中。根据当前控制器和操作有条件地加载部分的最佳方法是什么，应该在哪里进行检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T22:36:36.990

您可以检查`controller.controller_name`并`controller.action_name`在您的视图中。

根据特定 switch 语句的大小，您可能希望将其放在 application_helper 的辅助方法中，而不是放在部分 _right_column 中。

# html - HTML BASE 在 Ubuntu 12.04 上的 FF 13 和 Chromium 18 中无法正常工作

> ID：11285830
> 
> 赞同：0
> 
> 时间：2012-07-01T21:40:14.390
> 
> 标签：html, firefox, ubuntu, base, chromium

我得到了一些简单有效的 HTML：

```
<!DOCTYPE html>
<html>
<head>
  <base href="http://localhost/cow/" />
  <title></title>
</head>
<body>
    <a href="/foo.html">bar</a>
</body>
</html> 
```

但链接只指向`http://localhost/foo.html`而不是完整的 URI（带有子目录）。此外，类似的东西`<base href='http://127.0.0.1/something/' />`不起作用，但按照此处所述完成：http: [//www.w3schools.com/html5/tag_base.asp](http://www.w3schools.com/html5/tag_base.asp)

那不应该，或者？如何解决？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:49:26.217

您应该在之前删除“/”`foo.html`

```
<a href="foo.html">bar</a> 
```

当然还有这个网页中所有相对路径之前的所有斜线

# c# - WPF 效果在哪里定义？

> ID：11285831
> 
> 赞同：2
> 
> 时间：2012-07-01T21:40:20.540
> 
> 标签：c#, .net, wpf, effects, pixel-shader

我想知道 WPF 效果如在哪里`Blur`定义？它们是像素着色器，对吧？有没有办法窥探他们的实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:00:12.277

查看 PresentationCore.dll 程序集，其中[`System.Windows.Media.Effects.Effect`](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.effect.aspx)定义了它的派生类。如果您使用 Reflector 将其拆开，您应该能够找到签名，并且希望能够找到任何实现细节。

看起来像素着色器被有效地使用了，嗯，[`ShaderEffect`](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.shadereffect.aspx)......

# iphone - iOS 应用 i18n，使用 Rails 之类的键样式？

> ID：11285832
> 
> 赞同：0
> 
> 时间：2012-07-01T21:40:27.350
> 
> 标签：iphone, ruby-on-rails, ios, internationalization

我一直在寻找新的策略来管理我未来应用程序的本地化，因为我过去使用 Objective-c 进行本地化的经验很糟糕：/

最近，我一直在做很多 Rails 开发，他们使用的策略有点不同。而不是像在 iOS 中那样直接在代码中使用默认语言，即：

```
NSLocalizedString(@"Hello World!", @"Welcome sentence on load screen"); 
```

Rails 使用在代码中使用“键”的策略，默认语言也有包含所有翻译的文件，即：

在代码中：

```
<%= t "hello_world" %> 
```

在翻译文件中：

```
hello_word = "Hello World!" 
```

我想知道你们中是否有人使用了类似的策略，但用于 iOS 开发？在我看来，使用像 rails 这样的策略更有意义，因为密钥是通用的，不会像默认语言那样更新......

但如果我这样做，我将无法使用类似的东西进行笔尖翻译，我想......

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:02:07.910

好的……所以现在你进入了宗教领域。很多人对这两种方式都有意见，但 Apple 推荐的解决方案是将默认语言放入 Key 字段。然后它在一定程度上是自我评论的，并且相当容易内联阅读。它似乎也可以很好地与 Apple 用于提取语言文件进行翻译的命令行工具配合使用。

我两者都用过，发现两者混合最适合我。当它是经常使用或很短的按钮文本时，实际的文本效果很好。当它是更晦涩或很长的东西（例如将显示在 UIAlert 或其他东西中的 Message）时，我通常使用更简单的键来告诉我它是什么。

# javascript - 从 Javascript 中的回调函数返回

> ID：11285834
> 
> 赞同：0
> 
> 时间：2012-07-01T21:40:38.810
> 
> 标签：javascript, google-maps-api-3

我是 Javascript 编码的新手，已经在很多地方寻找过这些信息，但还没有找到一个可行的解决方案，因此我在这里发布了这个问题。

在 for 循环中，我尝试使用 -

```
service.search(request, callback); 
```

其中 request 包括查询的 POI 的位置和类型等参数。我已经实现了如下回调函数 -

```
function callback(myResults, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        alert('myResults: ' + myResults.length);
        // entire remaining code here, where I do some processing on the POIs.
    }   
} 
```

此代码正在运行，并且在路线的每一段我都可以看到 POI，并且使用警报显示 POI 的数量。

我的问题是我不想在这里为每条腿处理“myResult”，而是收集整个路线（由许多条腿组成）的所有结果，然后立即进行处理。

1.  我首先想到创建一个全局变量（“myPOI”）并在每条腿上附加“myResults”，一旦解析了整个路线，然后处理这个 myPOI，但我不能（或者我不知道如何）附加这个myResults 到全局变量 myPOI。

2.  我正在考虑的另一个选项是从回调函数中获取返回（myResults），然后收集（附加）所有结果。

1 和 2 之间的唯一区别是，在 1 中，它是一个全局变量，我将在 if 条件中附加 myResults，在 2 中，如果 if 条件为真，则将 myResults 返回到 service.search 然后收集结果在那里。

我尝试使用 myPOIs.push(myResults) 和其他一些选项，但是当我检查 myPOIs.length 时，它始终为空。我真的不知道如何从回调函数中获取 myResults。

任何建议/通过/帮助对我来说都非常有用。

我只想使用 javascript 而不是别的。

非常感谢，斧头

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:56:03.497

假设您正在调用类似这样的搜索：

```
for (var i = 0; i < legs.length; i++) {
    service.search(legs[i], callback);
} 
```

然后您可以通过跟踪所有结果以及您被回叫的次数来做到这一点：

```
var callbacksOutstanding = legs.length;
var allPlaces = [];
var callback = function(legPlaces, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        allPlaces.push.apply(allPlaces, legPlaces);
    } 
    if (--callbacksOustanding === 0) {
        processPlaces(allPlaces);
    }
};
for (var i = 0; i < legs.length; i++) {
    service.search(legs[i], callback);
} 
```

`processPlaces`您编写的用于处理完整对象数组的函数在哪里`PlaceResult`。

现在，如果这三个语句都包含在一个函数中（应该如此），则这三个`var`语句*没有全局变量，因为在 Javascript 中您可以并且应该在其他函数中定义函数。*如果这样做，内部函数将可以访问外部函数中的变量。所以对我来说，这可能看起来像这样：

```
function findAndProcessPlaces(legs) {
    var callbacksOutstanding = legs.length;
    var allPlaces = [];
    var callback = function(legPlaces, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
            allPlaces.push.apply(allPlaces, legPlaces);
        } 
        if (--callbacksOustanding === 0) {
            processPlaces(allPlaces);
        }
    };
    for (var i = 0; i < legs.length; i++) {
        service.search(legs[i], callback);
    }
} 
```

注意：该`allPlaces.push.apply`行执行一个数组到另一个数组的就地连接。你也可以写：

```
allPlaces = allPlaces.concat(legPlaces) 
```

在此刻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:43:48.267

创建一个全局变量：

```
var POIResults = []; 
```

在您的函数回调中

```
POIResults.push(myResults); 
```

稍后在您方便的时候，调用一个迭代数组的函数

```
function checkResults(){
 for(var i = 0; i < POIResults.length; i++){
  //TODO: check POIResults[i]
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T21:48:02.487

在回调之外并在正确范围内定义的数组应该可以解决问题。您可以使用全局数组方法发布代码吗？

# c - 是否可以使用 setitimer 配置超过 3 个计时器？

> ID：11285840
> 
> 赞同：2
> 
> 时间：2012-07-01T21:41:31.247
> 
> 标签：c, linux, timer

如何使用 setitimer 配置 3 个以上的计时器？linux手册页说“系统为每个进程提供了三个间隔计时器，每个计时器在不同的时域中递减。当任何计时器到期时，都会向进程发送信号，并且计时器（可能）重新启动”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:45:52.713

使用计时器机制，您仅限于三个。请参阅`timerfd_create()`没有此限制的更现代的替代品（尽管仅限 linux）。它也适用于文件描述符而不是信号，因此可以更容易地与使用 select/poll 实现的事件循环集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T21:48:18.320

Linux 提供`timer_create`（从 2.6 开始）制作新的间隔计时器：[http](http://www.kernel.org/doc/man-pages/online/pages/man2/timer_create.2.html) ://www.kernel.org/doc/man-pages/online/pages/man2/timer_create.2.html 。

如果您发现自己使用的系统只有基本计时器，您可以随时在用户编写的库中创建自己的。

还有`timerfd_create`（也是Linux特定的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T21:48:39.123

`mod`对单个计时器使用检查以将其抽象为多个计时器。这就是谷歌在 javascript 中处理多个计时器的方式，我认为它也可以在这里工作。原因是它比连续运行多个计时器**快几个数量级。**

换句话说，如果你有一个每 5 毫秒运行一次的计时器，并且你计算了它运行了多少次，那么你可以`mod`计算，其中每 10 次也是一个 50 毫秒的计时器。

# ios - Xcode 4.3.3 安装程序的备份

> ID：11285843
> 
> 赞同：3
> 
> 时间：2012-07-01T21:42:18.663
> 
> 标签：ios, installation, xcode4.3

为避免将来出现任何支持意外情况，我更喜欢备份 Xcode 4.3.3 (build 4E3002)**安装程序**的副本。否则，未来报告的问题可能在测试环境中不一致。与其将一台装有 Xcode 4.3.3 的机器放在壁橱里，或者从磁盘映像备份中恢复，我更愿意能够简单地重新安装 4.3.3。

使用 Xcode 4.2，您可以下载安装程序。使用 Xcode 4.3.3 我只能去 App Store 下载 Xcode 4.3.3。由于安装了 Xcode 4.3.3，我无法在我的机器上找到（或识别它是否存在）安装程序。

我很惊讶地发现没有人提出这个问题（无论如何我都能找到）。

我希望得到三个答案之一（优先级递减）：

A) Xcode 4.3.3 安装程序的路径/名称（如果它在安装后仍然存在）。
B) 下载 Xcode 4.3.3 安装程序的链接。
C) 告诉我使用 App Store 安装 Xcode 4.3.3 后写入了哪些文件和路径以及安装脚本，以便我可以捆绑所需的文件以手动安装 Xcode 4.3.3。

最坏的情况是我强迫我们的用户在 iOS 更新发布时更新应用程序。但是，我更不想将自己锁定在这个模型中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:50:50.930

实际上，下载单独安装程序的旧方法是一种笨拙的方法。随着 App Store 的出现，这是一个临时解决方案，现在已被当前行为所取代，该行为是通过 App Store 安装的所有应用程序的标准。

从理论上讲，每个版本的 Xcode 都比上一个版本好 :) mwahahaha .. 最近他们不是认真的。

所以......您的用户应该只获得更新。

# qr-code - 减少二维码的字符数以提高鲁棒性

> ID：11285846
> 
> 赞同：0
> 
> 时间：2012-07-01T21:42:39.643
> 
> 标签：qr-code

我想研究生成比当前标准 25 字符 QR 码更容易阅读的 QR 码的可能性。它的目的是从较低分辨率的视频提要中提取 QR 码。我意识到我将不得不牺牲代码的大小（更大的像素 = 更易于阅读），或者减少代码的位数（每位像素更多）。或者两者兼而有之。

在我深入研究[http://pyqrcode.sourceforge.net/](http://pyqrcode.sourceforge.net/)并学习它进行实验之前，我想知道是否已经有 8~10 个字符的 QR 码生成器的示例。或者，如果 QR 码的设计将鲁棒性降低到当前最小值（25 个字符）以下，那么我将以牺牲位密度为代价获得最小的鲁棒性。

[编辑] 我误解了字符限制。忽略我提到 25 个字符限制的部分。相反，将 Ver1 称为当前复杂性的下限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:38:42.393

如果你真的想让二维码尽可能简单，我会提供以下建议。

首先，奇怪的是，它实际上是版本 2，以我的经验最容易解码。版本 1 缺少对齐模式，因此无法轻松纠正透视失真。因此，目标是保持在版本 2 内。

您可以修改 EC 级别。使用仍然可以让您的数据适应版本 2 的最高级别。最低级的L就好了，真的。

最后，请注意，QR 码对于某些类型的数据具有更紧凑的编码模式。所有数字都编码得很好。它有一个字母数字节点，其中包括*大写*字母、数字和一些符号。如果您正在编写一个 URL 并且可以将其所有字母大写并且它仍然有效，那么这样做将能够使用这种更紧凑的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:24:59.317

您可以在 QR 码中输入任何您想要的文字。

这只是您可以生成的最小的 - 包含单个字符“0”

![在此处输入图像描述](../Images/06bedfd49517a4b23c5b0024470e1275.png)

如果你想要一个网址，你需要使用一个 URL 更短 - 或者已经有一个非常小的 URL。

这是（不存在的）网址缩短器 a.xx

![在此处输入图像描述](../Images/c89576472ad3784f03b1628c352f8ce4.png)

它只包含 16 个字符

```
http://a.xx/1234 
```

所以，使用像 bit.ly 这样的 URL 缩短服务，你应该保持在你的字符限制之下。

# xpath - 使用 XPath 查找特定祖父母的第一个孩子？

> ID：11285848
> 
> 赞同：2
> 
> 时间：2012-07-01T21:42:46.490
> 
> 标签：xpath

我正在处理一些粗糙的 HTML。这是给定元素的祖先的程式化示例：

`/html/body/foo/bar/baz/quux/b`

`body`我在我的代码中有一个引用，`b`它是我的 XPath 查询的上下文元素。在上面的例子中我如何找到`foo`？更具描述性，我如何找到给定祖先中的第一个元素，它是另一个给定元素的子元素？`body`和之间的元素`b`是未知的，并且在运行时在类型和深度上有所不同。我可以在 XPath 之外通过迭代祖先来做到这一点，`b`直到我到达，`body`但我想知道是否有一些 XPath 祖先魔法来找到这个相对引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:49:47.700

如果不对其进行测试，我猜`ancestor::body/*[1]`可能会这样做。

解释：`ancestor::body`是`body`沿`ancestor`“轴”的第一个元素，选择该元素的`/*`所有子元素，并`[1]`选择该子元素列表的第一个元素，在本例中为`foo`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T22:23:37.910

**使用**：

```
ancestor::body[1]/foo 
```

this 选择作为上下文节点`body`的第一个祖先的第一个元素子元素的元素。`body`

**即使您知道没有嵌套`body`元素，上面的代码也比**：

```
ancestor::body/foo 
```

因为评估最后一个表达式，*所有*祖先都将被测试为`body`.

**更新**：

在评论中，OP澄清了：

> 好吧，我试图找到这两组的交集（上下文节点的祖先，身体的孩子）

**在 XPath 1.0 中，这是 q 直接代入著名的节点集交集 Kayessian 公式**：

```
$ns1[count(.|$ns2) = count($ns2)] 
```

**在这种情况下，我们`$ns1`用`ancestor::*`和 $ns2 替换`/*/body/*`**：

```
ancestor::*[count(. | /*/body/*) = count(/*/body/*)] 
```

**在 XPath 2.0 中，这更容易，使用`intersect`操作符**：

```
ancestor::* intersect /*/body/* 
```

# php - php会话变量不回显

> ID：11285852
> 
> 赞同：1
> 
> 时间：2012-07-01T21:43:00.733
> 
> 标签：php, session, session-variables

当我运行此脚本时，我试图通过标头将会话重定向到 location:index.php 来回显会话变量（$email），但它只是回显会话值（数字 1）而不是电子邮件地址，我可以不知道为什么。有任何想法吗？谢谢。

```
<?php
session_start();
if (isset($_POST['email'], $_POST['password'])) {
    $email = $_POST['email'];
    $password = $_POST['password'];
    if ($email && $password) {
        $connect = mysql_connect("localhost", "root", "") or die("Could not connect");
        mysql_select_db("test") or die("could not find database");
        $query = mysql_query("SELECT * FROM users WHERE email='$email'&& 
            password= md5('$password')");
        $numrows = mysql_num_rows($query);
        if ($numrows != 0) {
            $_SESSION["email"] = $email;
            session_write_close();
            header("location:index.php");
            Die();
        }
        else
            echo ("not a user");
    }
    else
        echo("enter both fields");
}
?>
<html>
    <form action='edit1.php' method='POST'>
        <table align='right' bgcolor='blue'>
            <tr>
                <td>Email
                </td>
                <td>Password
                </td>
            </tr>
            <tr>
                <td><input name='email' type='text'>
                </td>
                <td><input name='password' type='password'><td>
                    <input type='submit' value='login'>
                </td>
            </tr>
        </table>
    </form>
</html>

//index.php file

<?php
session_start(); {

    echo $_SESSION['email'] or die('fail'); {

    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:54:16.903

正如我在评论中所说，这`or die`将不起作用。去掉它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:53:56.587

删除 or die('fail') 它将正常工作。

函数 echo 返回 void 渲染 'or die()' 无用

# jquery-mobile - Mobiscroll Datepicker 上的 onSelect 回调

> ID：11285859
> 
> 赞同：1
> 
> 时间：2012-07-01T21:44:25.600
> 
> 标签：jquery-mobile, mobiscroll

在我的一个项目中，我使用 Jquery mobile 和 Mobiscroll 2.0（作为日期时间选择器）我在所有 Scrollers 上使用通用回调来在设置值时获取调用。

```
$('.input-datetime').scroller({preset: 'datetime',
     mode: 'scroller',
     onSelect: __datetimeOnSelectDelegate}); 
```

现在在下面的函数中，我想检查一下正在设置哪个“输入”元素的值？

```
function __datetimeOnSelectDelegate(textDate, inst) { 
         if ($(inst).attr("id") == "StartDate") {
           //Do something
         }
} 
```

上面的说法不成立！

你能告诉我如何访问 Scroller 所连接的输入元素的 Id 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:55:21.333

“inst”是 mobiscroll 对象。HTML 对象是“this”。采用

```
if (this.id == "StartDate") {
 //do something
} 
```

# physics - unity3d：碰撞后物体不会向后飞行

> ID：11285861
> 
> 赞同：0
> 
> 时间：2012-07-01T21:44:39.810
> 
> 标签：physics, unity3d, collision

我有一辆刚体撞到模型的汽车，Lerpz（没有动画），也有刚体。我希望汽车撞到 Lerpz 并让 Lerpz 向后飞行 3 秒，然后使用汽车上的以下代码消失。两者都有对撞机（一个用于 Lerpz 的胶囊，一个用于汽车的顶部和底部）。Force 值是任意选择的：

```
function OnCollisionEnter(collidedObject : Collision) { 
    Debug.Log("hit");
    if (collidedObject.gameObject.tag == "Lerpz") {
            Debug.Log("lerpz"); 
            collidedObject.rigidbody.AddForce(-Vector3.forward);
            Destroy(collidedObject.gameObject, 3.0f); 
    }
} 
```

我得到的错误是：

```
NullReferenceException
UnityEngine.Rigidbody.AddForce (Vector3 force) (at     
C:/BuildAgent/work/300357e52574df36/Runtime/ExportGenerated/Editor/NewDynamics.cs:492)
CarZombieBehavior.OnCollisionEnter (UnityEngine.Collision collidedObject) (at    
Assets/CarZombieBehavior.js:17) 
```

“hit”和“lerpz”都被打印出来了，但是汽车撞到了不可移动的 Lerpz（质量为 10，汽车的质量为 1500）并在撞到 Lerpz 时停在了轨道上。

# html - 如何将div之外的文本强制到下一行？

> ID：11285862
> 
> 赞同：0
> 
> 时间：2012-07-01T21:45:06.840
> 
> 标签：html, css, phpbb, bbcode

在开发跟踪器自定义 PHPBB BBCode 上工作，但我遇到了显示在模块旁边而不是在模块下的文本问题。

例如：第二篇文章中的[http://www.survivaloperations.net/viewtopic.php?f=2&t=4&p=5#p5](http://www.survivaloperations.net/viewtopic.php?f=2&t=4&p=5#p5) 。

我想让它右边的文本默认在它下面。我试过了 `display: block clear: both; adding a div surrounding the entire module with a width of 100%`

但似乎没有一个工作。

这是CSS：

```
.tracker_contain {
    margin: 0;
    padding: 0;
    min-width: 100%;
        clear: both;
}

#tracker_wrap {
    margin: 10px auto 0 auto;
    width: 515px;
    font-family:"Tahoma", Arial;
    font-size: 11px;
}
.tracker_top {
    padding: 8px 0 0 60px;
    background: url('http://www.survivaloperations.net/dev/images/tracker_top.png') no-repeat top;
    width: 455px;
    height: 22px;
    color: #525252;
    font-weight: bold;
    float: left;
}
.tracker_top a {
    font-weight: bold;
    text-decoration: none;
    color: #cb00cb;
}
.tracker_top a:hover {
    text-decoration: underline;
}
.tracker_body {
    padding: 10px 11px 10px 11px;
    background: url('http://www.survivaloperations.net/dev/images/tracker_bg.jpg') no-repeat top;
    width: 493px;
    color: #cb00cb;
    float: left;
}
.tracker_bottom {
    margin: 0;
    padding: 6px 11px 0 0;
    background: url('http://www.survivaloperations.net/dev/images/tracker_bottom.png') no-repeat bottom;
    width: 504px;
    height: 24px;
    text-align: right;
    color: #575757;
    float: left;
}
.tracker_bottom a {
    font-weight: bold;
    text-decoration: none;
        color: #575757;
}
.tracker_bottom a:hover {
    font-weight: bold;
    text-decoration: none;
    color: #000000;
} 
```

这是HTML：

```
<div class="tracker_contain">
<div id="tracker_wrap">
<div class="tracker_top">Originally Posted By <a href="{URL}" alt="{URL}">{TEXT}</a></div>
<div class="tracker_body">
{TEXT}
</div>
<div class="tracker_bottom"><a href={URL}" alt="Read Post" target="_Blank">Original Post</a></div>
</div>
</div> 
```

欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:00:07.303

您的 CSS 包含

```
float: left 
```

顶部，身体和底部。你必须摆脱它们。

# python - UnicodeEncodeError：“ascii”编解码器无法编码字符 [...]

> ID：11285866
> 
> 赞同：15
> 
> 时间：2012-07-01T21:45:31.777
> 
> 标签：python, unicode

我已经阅读了官方文档中[关于 Unicode 的 HOWTO以及一篇完整、非常详细的](http://docs.python.org/howto/unicode.html)[文章](http://boodebr.org/main/python/all-about-python-and-unicode)。我仍然不明白为什么它会抛出这个错误。

这是我尝试的：我打开一个 XML 文件，其中包含超出 ASCII 范围的字符（但在允许的 XML 范围内）。我这样做`cfg = codecs.open(filename, encoding='utf-8, mode='r')`运行良好。查看字符串`repr()`也显示了一个 unicode 字符串。

现在我继续阅读`parseString(cfg.read().encode('utf-8')`。当然，我的 XML 文件以此开头：`<?xml version="1.0" encoding="utf-8"?>`. 虽然我认为它不相关，但我也为我的 python 脚本定义了 utf-8，但由于我没有直接在其中编写 unicode 字符，所以这里不应该适用。以下行也是如此：`from __future__ import unicode_literals`这也是在开头。

接下来，我将生成的 Object 传递给我自己的类，在那里我将标签读入如下变量：`xmldata.getElementsByTagName(tagName)[0].firstChild.data`并将其分配给我的类中的一个变量。

现在完美工作的是这些命令（obj 是该类的一个实例）：

```
for element in obj:
    print element 
```

这个命令也可以工作：

```
print obj.__repr__() 
```

我定义为在使用典型的 printf 东西`__iter__()`时只产生每个变量：`__repr__()``"%s" % self.varname`

这两个命令都可以完美打印并且可以输出 unicode 字符。什么不起作用是这样的：

```
print obj 
```

现在我被困住了，因为这引发了可怕的

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xfc' in position 47: 
```

那么我错过了什么？我究竟做错了什么？我正在寻找一个通用的解决方案，我总是想将字符串作为 unicode 处理，只是为了避免任何可能的错误并编写兼容的程序。

编辑：我也定义了这个：

```
def __str__(self):
    return self.__repr__()
def __unicode__(self):
    return self.__repr__() 
```

从文档中我得到了这个

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:16:19.207

我终于解决了。问题是（我不知道为什么）如果你调用其中一个`__str__()`或`__repr__()`直接调用它会很好处理它，但是直接打印它（如：）`print obj`不起作用（尽管它应该只调用`__str__()`它自己）。

最后的帮助来自这篇[文章](http://wiki.python.de/Von%20Umlauten,%20Unicode%20und%20Encodings)。当我使用 utf-8 编码时，我已经到了将其打印到控制台（但字母错误）的步骤。最后通过定义它来解决它是完全正确的：

```
def __str__(self):
    return self.__repr__().encode(stdout.encoding) 
```

现在剩下的唯一悬而未决的问题是：为什么这样做`print obj.__str__()`和`print obj`不同？这对我来说毫无意义。是的，再次强调：调用前者或`__repr__()`DID 工作。并且仍然使用显式编码。

# android - 完成游标尚未停用

> ID：11285870
> 
> 赞同：0
> 
> 时间：2012-07-01T21:45:52.120
> 
> 标签：android, sqliteopenhelper

我在一个应用程序中创建了一个函数，用于检查数据库中的用户名和密码，但我得到了那个错误

```
07-02 00:31:09.619: E/Cursor(345): Finalizing a Cursor that has not been deactivated or closed. database = /data/data/sbn.project.gp/databases/users, table = null, query = SELECT name,password FROM users WHERE name='khaled'and password='1234' 
```

这是我的代码

```
public Boolean check(String nameS, String passwordS) {
        // TODO Auto-generated method stub

        Cursor c = null;
        Boolean check = true;

        c = ourDatabase.rawQuery("SELECT name,password FROM users WHERE name='"
                + nameS + "'" + "and password='" + passwordS + "'", null);

        if (c.getCount() > 0) {
            check = false;
            return check;
        }
        c.close();

        return check;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:16:02.510

这是因为如果检查为假，您没有关闭光标，请改为执行以下操作：

```
public Boolean check(String nameS, String passwordS) {
        Cursor c = null;
        Boolean check = true;

        c = ourDatabase.rawQuery("SELECT name,password FROM users WHERE name='"
                + nameS + "'" + "and password='" + passwordS + "'", null);

        if (c.getCount() > 0) {
            check = false;
        }
        c.close();
        return check;
    } 
```

# android - Android拖放错误

> ID：11285872
> 
> 赞同：0
> 
> 时间：2012-07-01T21:45:57.390
> 
> 标签：android, android-layout

我正在按照分步指南来掌握拖放操作，但对第 1 步给我一个错误感到沮丧。我收到 NoClassDefFoundError。谁能看到我做错了什么。

我完全复制了这些家伙的代码并且它不起作用，这真的很烦人。

我在它正在崩溃的线上放了一颗星。定义剪辑数据的那个。

> 07-01 14:37:47.544：E/AndroidRuntime(17055)：致命异常：主要 07-01 14:37:47.544：E/AndroidRuntime(17055)：java.lang.NoClassDefFoundError：android.content.ClipData 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 com.codelikely.tester.TestApplicationActivity.onTouch(TestApplicationActivity.java:29) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 android.view .View.dispatchTouchEvent(View.java:4020) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869) 07-01 14:37:47.544 : E/AndroidRuntime(17055): 在 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 android.view.ViewGroup.dispatchTouchEvent(ViewGroup. java:869) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 android.view.ViewGroup。dispatchTouchEvent(ViewGroup.java:869) 07-01 14:37:47.544: E/AndroidRuntime(17055): at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1746) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1152) 07-01 14:37:47.544: E/AndroidRuntime(17055):在 android.app.Activity.dispatchTouchEvent(Activity.java:2102) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow. java:1730) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2268) 07-01 14:37:47.544: E/AndroidRuntime(17055) : 在 android.view.ViewRoot.handleMessage(ViewRoot.java:1921) 07-01 14:37:47.544:E/AndroidRuntime(17055): 在 android.os.Handler.dispatchMessage(Handler.java:99) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 android.os.Looper.loop(Looper.java :130) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 android.app.ActivityThread.main(ActivityThread.java:3691) 07-01 14:37:47.544: E/AndroidRuntime(17055):在 java.lang.reflect.Method.invokeNative(Native Method) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 java.lang.reflect.Method.invoke(Method.java:507) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907) 07-01 14:37:47.544: E/AndroidRuntime(17055):在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665) 07-01 14:37:47.544: E/AndroidRuntime(17055): 在 dalvik.system.NativeStart.main(Native Method)主要（本机方法）

```
@Override
    public boolean onTouch(View view, MotionEvent motionEvent) {
        if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
            *ClipData clipData = ClipData.newPlainText("", "");*
            View.DragShadowBuilder dsb = new View.DragShadowBuilder(view);
            view.startDrag(clipData, dsb, view, 0);
            view.setVisibility(View.INVISIBLE);
            return true;
        } else {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:59:27.463

您的应用找不到[ClipData](http://developer.android.com/reference/android/content/ClipData.html)类。ClipDate 仅适用于 API 级别 11 及更高级别。您在 2.3 上运行，即 API 级别 9。当您针对更高的 API 构建时，您不会在编译时收到错误消息。为确保您不使用稍后添加的任何其他类，请尝试将您的项目设置为使用 2.3 构建，或者任何操作系统是您的最低目标。

# java - Jython 作为 Java 游戏的游戏内控制台

> ID：11285874
> 
> 赞同：3
> 
> 时间：2012-07-01T21:46:53.283
> 
> 标签：java, python, jython, interpreter

我喜欢 python 和 java，我希望在我的游戏中使用由 python (jython) 驱动的控制台。处理来自 PythonInterpreter 的输入输出非常简单。

但是现在，我需要从 jython 访问我的 java 应用程序的实例。谁能指点我一些文章？

我需要访问由 java 创建的现有实例，而不仅仅是我发现的文章中描述的类（并在 jython 中创建实例）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:31:57.680

来自 Jython 文档：

```
http://www.jython.org/archive/21/docs/usejava.html 
```

如果您已经安装了 Jython，那么访问 Java 实例应该像文档中所示的那样简单，因为它们在 Jython 环境中被视为 Python 对象。

这是将 Python 和 Java 嵌入到单个 jar 中的用例：

```
http://fiji.sc/wiki/index.php/Jython_Scripting#Distributing_jython_scripts_in_a_.jar_file 
```

最后，来自 Python 的教程：

```
http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html 
```

还要确保您了解“已经存在的实例”与类的含义。您正在与之交互的任何课程都已经存在。如果您的意思是从 Jython 中创建新的 Java 对象，那应该不是问题，因为从 Python 的角度来看几乎不需要接口代码（尽管从 Java 的角度来看，创建 Python 对象需要更多的代码）。

祝您的游戏机好运，希望这些链接能填补您在使用 Jython 方面的空白。

# backbone.js - 两个模型之间的关系模型：空值

> ID：11285876
> 
> 赞同：3
> 
> 时间：2012-07-01T21:47:16.933
> 
> 标签：backbone.js, backbone-relational

我想在两个模型之间建立关系`User`并`Task`使用[骨干关系](https://github.com/PaulUithol/Backbone-relational/)。
我希望每个`Task`人都能得到`User`模型。
两种模型之间的关系如下：

```
taskModel.creator_id = userModel.id 
```

这是我的代码 (1) (2)

问题如下（3）：
当我尝试获取`attributes.user`空值的任务模型时。

* * *

(1)

```
// TaskModel
var Task = Backbone.RelationalModel.extend({

    relations: [
        {
            type: 'HasOne',
            key: 'user',
            relatedModel: User
        }
    ],

    urlRoot: 'url_get_tasks'
}); 
```

* * *

(2)

```
// UserModel
var User = Backbone.RelationalModel.extend({

    urlRoot: "url_get_users"

}); 
```

* * *

(3)

```
user = new User();
user.fetch();
console.log(user.attributes); // {id: 1, .....}

task = new Task();
task.fetch();
console.log(task.attributes); // {id: 12, creator_id: 1, user: null} ??? 
```

* * *

为什么`task.attributes.user`有价值`null`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:31:48.497

您与 Task 的关系应类似于：

```
 {
       type: 'HasOne',
       key: 'user',
       keySource: 'creator_id',
       relatedModel: User
   } 
```

（您希望它`creator_id`用于关联，但从未告诉它。）

# shell - 执行 shell 脚本后退出 applescript 应用程序

> ID：11285877
> 
> 赞同：4
> 
> 时间：2012-07-01T21:47:31.597
> 
> 标签：shell, applescript, quit, nonlinear-functions

我想知道 applescript 应用程序是否可以运行 shell 脚本，然后在 shell 脚本执行完成之前退出。在给定时间运行服务器时，这将很有用。不需要applescript在后台不断运行，有没有办法独立运行一个函数？

```
set server_name to text returned of (display dialog "Choose server." default answer "")
set success to do shell script "if [ -f \"/Users/jessefrohlich/Documents/Minecraft/" & server_name & "/minecraft_server.jar\" ]; then
    echo 1;
else
    echo 0;
fi"
if success is equal to "1" then
    do shell script "cd /Users/jessefrohlich/Documents/Minecraft/" & server_name & "
    java -Xmx1024M -Xms1024M -jar minecraft_server.jar"
else
    display dialog "Sorry, the file you chose is invalid."
end if 
```

当上述作为应用程序运行时，它将正确启动服务器。但是，应用程序`runScript.app`将继续运行。即使 applescript 被强制退出，服务器也会继续运行。有没有办法让它在服务器启动后自动退出？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T22:19:49.897

试试这个。祝你好运。

```
-- "> /dev/null" redirects standout out to nowhere land
--      - you can use some other file path if you want to capture its output
-- "2>&1" redirects standard error to the same place as standard out
--      - 2 stands for standard error
--      - 1 stands for standard out
--      - > is the redirect symbol
--      - & changes redirect's output from a file to a file descriptor (in this case standard out)
-- & the trailing & sends the process to the background

do shell script "cd /Users/jessefrohlich/Documents/Minecraft/" & server_name & " java -Xmx1024M -Xms1024M -jar minecraft_server.jar > /dev/null 2>&1 &" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:02:56.640

您可以向您的 Applescript 添加一个条件以使其“忽略应用程序响应”，然后它将继续处理您的 AppleScript 中的任何其他内容，包括退出它。

苹果网站有详细信息：[https ://developer.apple.com/library/mac/#documentation/applescript/conceptual/applescriptlangguide/reference/ASLR_control_statements.html](https://developer.apple.com/library/mac/#documentation/applescript/conceptual/applescriptlangguide/reference/ASLR_control_statements.html)

# python - 如何转换 wx.GetMousePosition 坐标以适应 DC

> ID：11285878
> 
> 赞同：2
> 
> 时间：2012-07-01T21:47:32.803
> 
> 标签：python, image, user-interface, wxpython

我正在创建一个照片查看器，用户可以使用它来标记 facebook 中的图像。单击要标记的图像后，我使用 wx.GetMousePosition 查找鼠标在图像上单击的位置。然后创建用户标记的图像的 wx.MemoryDC 以便我可以绘制标签使用 dc.DrawRectangle 在图像上。

下面是在图像上绘制的代码：顺便说一下，我正在使用 wxPython

```
 W=495 #Position of mouse (y)
        H=205 #Position of mouse (x)
        dc = wx.MemoryDC()
        dc.SelectObject(bitImg)#name of bitmap image
        dc.SetPen(wx.Pen('#FF0000'))

        #dc.SetBrush(wx.Brush('#aaffff'))
        dc.SetBrush(wx.TRANSPARENT_BRUSH)
        dc.DrawRectangle(W, H, 20, 20)# Drawing the rectangle using the W and H 
                                      # for the position
        dc.SelectObject(wx.NullBitmap) 
```

前两行是我从 wx.GetMousePosition 收到的 X 和 Y 坐标。这是标签在其中一张图像上的位置。但是，当我绘制矩形时，这些点 W 和 H 不会显示在图像上，因为它们太大并且不会显示在屏幕上。如果我将 W 和 H 都设置为 90，它将在图像上绘制一个小方块。

那么如何转换这些 wx.GetMousePosition 坐标以使其适合“dc”？或有关获取鼠标坐标的任何其他建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T22:17:55.140

`wx.GetMousePosition`将返回屏幕上鼠标的坐标，该坐标要么位于图像中的错误位置，要么可能超出您所看到的图像边缘。

转换这些坐标的一种方法是将它们传递到图像所在的面板，`panel.ScreenToClient(wx.GetMousePosition())`这会将它们转换为相对于面板左上角的坐标。

# phpunit - PHPUnit 报告的百分比：这是什么意思？

> ID：11285883
> 
> 赞同：15
> 
> 时间：2012-07-01T21:48:33.377
> 
> 标签：phpunit

我正在开发我的第一个项目，在该项目中我使用 PHPUnit 进行单元测试。事情进展顺利；但是，我已经开始通过最近的测试获得以下输出：

```
................................................................. 65 / 76 ( 85%)
...........

Time: 1 second, Memory: 30.50Mb

OK (76 tests, 404 assertions) 
```

我找不到有关“65 / 76 (85%)”含义的任何信息。

有谁知道如何解释这个？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-01T21:49:33.363

它表示到目前为止已经运行的测试数量（实际上是测试方法，或者更准确地说：测试方法调用，因为每个测试方法可以被调用多次）。

```
65 / 76 ( 85%) 
```

76 个测试中的 65 个测试已经运行（总体为 85%）

只要你看到他们每个人的点 - 他们都通过了

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-09T02:48:20.620

直到我继续编写更多测试时我才理解它，这是随着测试数量的增加您所看到的示例：

```
...............................................................  63 / 152 ( 41%)
...............................................................  126 / 152 ( 82%)
.......................... 
```

...它只是已运行测试数量的进度指标。但正如你所见，它仍然到了尽头。

# sql - 此 ActiveRecord 查询返回意外结果，如何解决

> ID：11285901
> 
> 赞同：1
> 
> 时间：2012-07-01T21:52:44.860
> 
> 标签：sql, ruby-on-rails, activerecord

我有这个查询：

```
@listings = Listing.where('city != ?', 'SommerVille') 
```

我想知道是否有人对可能导致这种情况的其他原因有任何建议？

我只想从城市！=SommerVille 的数据库中获取那些列表。

谢谢

* * *

编辑上述问题是由于城市名称中的前导或尾随空格。所以我想知道查询数据库的最佳方法是什么，它忽略大小写，也忽略前导/尾随空格。

以下方法有效，但有更好的方法吗？

```
@unwanted_cities = Listing.where(['city != ?', "SommerVille"]).where(['city != ?', " SommerVille"]).where(['city != ?', "SommerVille "]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:59:25.207

我认为大多数 dbs 都支持 trim

```
@listings = Listing.where('TRIM(city) != ?', 'SommerVille') 
```

从长远来看，在进入数据库的过程中去除空格会更好

忽略大小写的一种方法，使用大写

```
@listings = Listing.where('UPPER(TRIM(city)) != UPPER(?)', 'SommerVille') 
```

或者

```
@listings = Listing.where('UPPER(TRIM(city)) != ?', 'SommerVille'.upcase) 
```

# regex - Python 3，正则表达式重复和 str.format() - 什么是正确的方法？

> ID：11285904
> 
> 赞同：1
> 
> 时间：2012-07-01T21:52:58.200
> 
> 标签：regex, string, python-3.x, format, repeat

我想根据变量的值进行正则表达式搜索。

在 Py2.x 中，这非常有效：

```
pattern = re.compile(r"\b[a-zA-Z]{%(min_length)d,}\b" % locals()) 
```

当我尝试将其移植到新的 str.format() 表示法时，我得到如下信息：

```
pattern = re.compile(r"\b[a-zA-Z]{{0},}\b".format(min_length)) 
```

这给了我一个错误，因为重复的大括号与 str.format() 的大括号混淆：

```
ValueError: Single '}' encountered in format string 
```

我相信您可以想到更多这样的例子，其中 format() 与重复发生冲突。

通过 str.format() 为正则表达式的重复提供外部值的正确方法是什么？% 运算符在 Py3 中不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T22:00:43.323

只需使用旧版本`%`——Python 3.x 仍支持字符串格式，并且不会消失。如果您坚持使用新语法，请将不表示字段的大括号加倍：

```
pattern = re.compile(r"\b[a-zA-Z]{{{0},}}\b".format(min_length)) 
```

# google-chrome - 访问客户端证书并替换 chrome 扩展中的证书选择对话框

> ID：11285905
> 
> 赞同：6
> 
> 时间：2012-07-01T21:53:01.970
> 
> 标签：google-chrome, google-chrome-extension

是否有允许访问客户端证书的扩展 API？我想根据证书的详细信息提供修改后的证书选择器。

此外，据我了解，谷歌浏览器不提供自己的客户端管理器，而是使用本地解决方案进行客户端证书管理。因此，完全的证书管理可能无法通过设计实现。但是由于 Chrome 允许生成和导入由 html5 标签生成的证书，我想知道扩展是否可以导入客户端证书。

# c# - 使用 webkit.net 从 c# 调用 javascript 方法

> ID：11285907
> 
> 赞同：0
> 
> 时间：2012-07-01T21:53:53.013
> 
> 标签：c#, javascript, webkit.net

从这个问题[Using WebKit.NET to call a C# function from JavaScript](https://stackoverflow.com/questions/4146687/using-webkit-net-to-call-a-c-sharp-function-from-javascript)。

我一直在使用 webkit.net 版本，并且在调用 callWebScriptMethod 时我所拥有的版本没有做任何事情（为了测试我已经使用了与 Forms.Webbrowser 相同的代码并且有效）。所以首先我有 callwebscriptmethod 的版本不起作用。

在上面的同一个链接中，我使用了以下链接[https://github.com/scampy/webkitdotnet](https://github.com/scampy/webkitdotnet)。其中有一个 webkit.net 版本，ObjectForScripting 正在工作，所以我可以使用 javacript 调用 c#，但不能从 javascript 调用 c#，因为 callwebscriptmethod 没有实现。

有谁知道一个 webkit 版本和一个链接，我可以得到一个实现了这两个选项的版本。

问候保罗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:45:35.077

调用函数可以使用 .GetScriptManager.CallFunction("name", new Object[] { arg1, arg2, ... }); 如果你正在使用 .NET 4。如果你想使用 .NET 2，你可以使用 .StringByEvaluatingJavaScriptFromString("name(arguments)")

# javascript - 使用 Javascript 在页面刷新时调用函数

> ID：11285908
> 
> 赞同：3
> 
> 时间：2012-07-01T21:53:56.403
> 
> 标签：javascript, onbeforeunload

```
function warnuser()
{
    return "Don't refresh the page.";
}

window.onbeforeunload = warnuser; 
```

如果用户刷新页面并且用户在确认框中单击“离开此页面”，我想调用一个 javascript 函数，否则不会！我对如何做到这一点感到困惑。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:58:16.117

只有在这种情况下，您才需要拦截`F5`按键并设置`onbeforeunload`处理程序：

```
document.addEventListener('keydown', function(e) {
    if(e.which == 116) {
        window.onbeforeunload = function() {
            window.onbeforeunload = null;
            return "Do you really want to refresh the page?";
        }
    }
}, false); 
```

演示：http: [//jsfiddle.net/ejDrq/](http://jsfiddle.net/ejDrq/)

*请注意，如果用户单击*“刷新”按钮，这将不起作用。这是不可能拦截的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:07:01.837

如果您可以控制托管页面的服务器端，那么您可以使用`semaphore`( [wiki:semaphore](http://en.wikipedia.org/wiki/Semaphore_(programming)) ) 逻辑地处理此问题。基本上它是一个旋转锁，将在他们的服务器端会话中实现。如果他们已经进入并且没有以安全的方式退出，则重置页面状态。自然，与所有旋转锁一样，必须有一个安全状态才能清除锁定。

# javascript - 播放嵌入 youtube 视频 JS

> ID：11285910
> 
> 赞同：2
> 
> 时间：2012-07-01T21:54:14.327
> 
> 标签：javascript, video, youtube, playback

我正在使用 iframe 标记嵌入 youtube 视频，但无法成功访问对象的播放功能。这是我加载对象的方式：

```
<iframe id="player" type="text/html" width="640" height="390"
  src="http://www.youtube.com/embed/u1zgFlCw8Aw?enablejsapi=1&origin=http://example.com"
  frameborder="0"> 
```

我已经引用了 API，但我并不真正了解如何访问播放/暂停功能。我尝试如下使用 jquery，但捕获的对象没有所需的属性：

```
vid = $('#player')
vid.playVideo() // doesn't work 
```

我也尝试过使用 swfsobject，如下所示：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
<script type="text/javascript">

    var params = { allowScriptAccess: "always" };
    var atts = { id: "myytplayer" };
    swfobject.embedSWF("http://www.youtube.com/embed/ngf03kCRw3s",
                       "ytapiplayer", "425", "356", "8", null, null, params, atts);

  </script> 
```

但是，页面上没有显示任何内容（并且控制台中没有错误）。感谢帮助，谢谢，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-05-10T03:19:51.340

使用 jQuery（和 JS）播放嵌入式 YouTube 视频的一种简单方法是将参数“autoplay=1”附加到 iframe 的 src 属性。在您的情况下，代码将是这样的：

```
$("#player")[0].src += "&autoplay=1"; 
```

[Martin Wolf](https://codepen.io/martinwolf/pen/dyLAC)的另一个例子：

```
$(document).ready(function() {
  $('#play-video').on('click', function(ev) {

    $("#video")[0].src += "&autoplay=1";
    ev.preventDefault();

  });
});
```

```
body {
  padding: 30px;
}

a {
  display: inline-block;
  margin-bottom: 20px;
  color: #000;
  font-family: Arial, sans-serif;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<a id="play-video" href="#">Play Video</a><br />

<iframe id="video" width="420" height="315" src="//www.youtube.com/embed/9B7te184ZpQ?rel=0" frameborder="0" allowfullscreen></iframe>
```

就是这样。视频将开始播放。如果有人需要 Vanilla JS 中的解决方案，请发表评论，当我有更多时间时，我会回来更新答案。

# php - cakephp外键下拉菜单在脚手架中不起作用

> ID：11285915
> 
> 赞同：0
> 
> 时间：2012-07-01T21:54:35.793
> 
> 标签：php, sql, cakephp

我的模式很简单——每个用户都有一个 id 和 name。有属于用户的工作。实际架构-

```
CREATE TABLE `users` (
   id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,  
  `name` varchar(20) 
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `jobs` (
   id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  `user_id` INT UNSIGNED ,
  `type` int,  
  FOREIGN KEY (user_id) references  users(id) 
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

我的 JobsController 看起来像这样-

```
<?php
class JobsController extends AppController {
    public $scaffold;
    public $name = 'Job';

    public $belongsTo = array(
        'User' => array(
            'className'    => 'User',
            'foreignKey'   => 'user_id'
        )
    );

} 
```

和 UsersController 作为-

```
<?php
class UsersController extends AppController {
    public $scaffold;
    public $name = 'User';

    public $hasMany = array(
        'Job' => array(
            'className'     => 'Job',
            'foreignKey'    => 'user_id'
        )
    );
} 
```

**问题：**

当我访问时，`http://hostname/Jobs/add`我可以看到用户的下拉列表，但它是空的。我创建了一些可以从中看到的用户`http://hostname/Users/`

为什么下拉菜单是空的？我可以添加作业，但是当我查看它们时，用户字段显示为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T22:30:54.463

关联属于**模型**，而不是控制器。

在*app/Model/User.php*中：

```
class User extends AppModel {
    public $name = 'User';
    public $hasMany = array('Job');
} 
```

在*app/Model/Job.php 中*

```
class Job extends AppModel {
    public $name = 'Job';
    public $belongsTo = array('User');
} 
```

# c# - 鼠标滚轮可以总是影响面板吗？

> ID：11285919
> 
> 赞同：0
> 
> 时间：2012-07-01T21:55:05.493
> 
> 标签：c#, winforms

不确定我是否可以正确地说出来，但我们开始吧。

我的应用程序有几个文本框和一个带有滚动条的面板。我希望鼠标滚轮始终影响面板。有没有办法做到这一点？目前，当我将焦点从面板更改为文本框时，滚轮停止为面板工作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:00:52.760

您可以使用 PreFilterMessage 执行此操作。首先，更改您的表单以实现 IMessageFilter，如下所示：

```
public partial class Form1 : Form, IMessageFilter 
```

然后在构造函数中添加消息过滤器：

```
public Form1()
{
  InitializeComponent();
  Application.AddMessageFilter(this);
} 
```

然后实现IMessageFilter接口：

```
public bool PreFilterMessage(ref Message m)
{
  if (m.Msg == WM_MOUSEWHEEL)
  {
    SendMessage(panel1.Handle, m.Msg, m.WParam, m.LParam);
    return true;
  }
  return false;
} 
```

您还需要以下内容：

```
private const int WM_MOUSEWHEEL = 0x020A;
[DllImport("user32.dll")]
private static extern IntPtr WindowFromPoint(Point pt);
[DllImport("user32.dll")]
private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp); 
```

# ios - 带有 RubyMotion 的顶栏 iOS 应用程序？

> ID：11285922
> 
> 赞同：0
> 
> 时间：2012-07-01T21:55:21.627
> 
> 标签：ios, ruby, rubymotion

我对 RubyMotion 和 iOS 开发非常陌生，我想在我的应用程序中放置一个顶部栏，例如[来自 groupme 的这个，](http://g.virbcdn.com/_f/cdn_images/resize_640x640/8b/PageImage-489404-3066350-IMG_5477.PNG)并在其中间放置一个图标。

我怎么做？什么是图书馆？如何将其附加到视图？

我的代码中有代码`app_delegate.rb`，目前：

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    @window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds)

    tabbar = UITabBarController.alloc.init
    tabbar.viewControllers = [
        ProductMapController.alloc.init,
        SearchController.alloc.init,
        NewProductController.alloc.init,
        FeedController.alloc.init,
        UserDetailsController.alloc.init
    ]
    tabbar.selectedIndex = 0
    @window.rootViewController = UINavigationController.alloc.initWithRootViewController(tabbar)
    @window.rootViewController.wantsFullScreenLayout = true
    @window.makeKeyAndVisible

    true
  end
end 
```

谢谢你，我很感激你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:59:14.333

我找到了解决方案：

在我的`app_delegate.rb`我有：

```
items_controller = ProductsController.alloc.initWithNibName(nil, bundle: nil)
@window.rootViewController = UINavigationController.alloc.initWithRootViewController(items_controller) 
```

然后在我的`items_controller.rb`我有：

```
self.navigationItem.titleView = UIImageView.alloc.initWithImage(UIImage.imageNamed('logo.png')) 
```

我认为这完全没问题，因为我不再污染我的`app_delegate.rb`了:)

如果您有更好的解决方案，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:50:28.940

这是您想要的想法：

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    @window = UIWindow.alloc.initWithFrame UIScreen.mainScreen.bounds
    @window.makeKeyAndVisible

    #creates a bar with a width of 320, a height of 100, and colors it blue
    bar = UIView.alloc.initWithFrame [[0, 0], [320, 100]]  
    bar.backgroundColor = UIColor.blueColor 

    #creates an imageView with the icon, change the coordinates to center your icon
    icon= UIImageView.alloc.initWithFrame([[100,0], [100,100]]) 
    icon.image = UIImage.imageNamed('youricon.jpeg')

    #adds the bar and icon to the window
    @window.addSubview bar
    @window.addSubview icon

    true
  end
end 
```

您不希望在您的应用程序委托中使用这种代码，但我在此处添加它是为了给您一个简单的示例。

# sql-server - Tablix：在每个页面上重复标题行不起作用 - Report Builder 3.0

> ID：11285923
> 
> 赞同：178
> 
> 时间：2012-07-01T21:55:27.710
> 
> 标签：sql-server, reporting-services, ssrs-tablix, reportbuilder3.0

我有一个 tablix，其中有很多行跨越多个页面。我已经在每一页上设置了 Tablix 属性重复标题行，但这不起作用。我在某处读到这是 Report Builder 3.0 中的一个已知错误。这是真的？如果没有，是否还有其他需要做的事情？

* * *

## 回答 #1

> 赞同：459
> 
> 时间：2012-07-02T17:31:41.103

这取决于您使用的 tablix 结构。例如，在表中，您没有列组，因此 Reporting Services 无法识别哪些文本框是列标题，并且将 RepeatColumnHeaders 属性设置为 True 不起作用。

相反，您需要：

1.  在“分组”窗格中打开高级模式。（单击列组右侧的箭头并选择高级模式。）
    *   ![截屏](../Images/ea601c75f2ca16a1df0f829d9c97bd2f.png)
2.  在行组区域（不是列组）中，单击一个静态组，该组将突出显示 tablix 中的相应文本框。单击每个静态组，直到它突出显示最左侧的列标题。这通常是列出的第一个静态组。
3.  在“属性”窗口中，将`RepeatOnNewPage`属性设置为 True。
    *   ![截屏](../Images/46a48dd98e430171d7fd4cb6ddd6b98e.png)
4.  确保该`KeepWithGroup`属性设置为`After`。

该`KeepWithGroup`属性指定静态成员需要粘贴到哪个组。如果设置为，`After`则静态成员将与组保持在其之后或下方，充当组头。如果设置为`Before`，则静态成员会在组之前或上方粘在组中，充当组页脚。如果设置为`None`，Reporting Services 将决定将静态成员放置在何处。

现在，当您查看报告时，列标题会在 tablix 的每一页上重复。

[该](http://youtube.com/watch?v=WAO819-gkKw)视频显示了如何完全按照所描述的答案进行设置。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-05T17:31:14.147

我有 2.0 并发现上述内容有所帮助；但是，由于某种原因，静态元素的选择并没有突出显示单元格。我按照以下步骤操作：

1.  在列组下选择高级，静态将显示
2.  单击显示在行组中的静态
3.  将 KeepWithGroup 设置为 After 并将 RepeatOnNewPage 设置为 true

现在您的列标题应该在每一页上重复。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-07T20:49:24.330

我如何解决这个问题是我手动更改了后面的代码（从菜单查看/代码）。下面的部分应该有`<TablixMember> </TablixMember>`与 tablix 中的行数一样多的对数。就我而言，我`<TablixMember> </TablixMember>`的配对比 tablix 中的行数多。此外，如果您进入“高级模式”（“列组”右侧），“行组”后面的静态行数应该等于 tablix 中的行数。使其相等的方法是更改​​代码。

```
<TablixRowHierarchy>
      <TablixMembers>
        <TablixMember>
          <KeepWithGroup>After</KeepWithGroup>
          <RepeatOnNewPage>true</RepeatOnNewPage>
        </TablixMember>
        <TablixMember>
          <Group Name="Detail" />
        </TablixMember>
      </TablixMembers>
    </TablixRowHierarchy> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-10-06T22:01:51.147

在“分组”窗格中打开`Advanced Mode`。（单击列组右侧的箭头并选择高级模式。）

在行组区域（不是列组）中，单击一个静态组，该组将突出显示 tablix 中的相应文本框。

单击每个静态组，直到它突出显示最左侧的列标题。这通常是列出的第一个静态组。

在属性网格中：

*   设置`KeepWithGroup`为`After`
*   设置`RepeatOnNewPage`为`True`重复标题
*   设置`FixedData`为`True`保持标题可见

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-02T15:31:38.060

如果您仍然遇到该问题，另一种方法是执行以下操作：

*   清除所有表格标题文本将其留空。
*   在报告“标题”部分中，在矩形内添加文本框，每个文本框将代表表格的列标题。
*   由于此矩形位于报告标题部分，它将显示在所有报告页面上。

谢谢，苏菲安。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-10T18:33:42.033

对我有用的是从头开始创建一个新报告。

完成后新报告工作，我将比较 Visual Studio 中的 2 个 .rdl 文件。这些是 XML 格式，我希望快速的 WindDiff 或其他东西可以揭示问题所在。

最初的外观显示两个文件之间有 700 行代码或更多差异，两个文件中较大的一个是错误文件。粗略地看一下 TablixHeader 标签并没有发现任何明显的东西。

但在我的情况下，它是一个损坏的 .rdl 文件。这最初是从工作报告中复制的，因此在删除未重复使用的内容的过程中，这可能会损坏它。但是，在执行相同过程的其他报告中，当在“属性”中进行正确设置时，标题可能会重复。

希望这可以帮助。如果您有一份复杂的报告，这不是快速解决方案，但它确实有效。

也许将已知的良好 XML 文件与您的错误文件进行比较会成为一个很好的论坛帖子。我会在我的最后尝试。

# ios - 将字符串的 NSMutableArray 添加到 UILabel 时程序崩溃

> ID：11285927
> 
> 赞同：-1
> 
> 时间：2012-07-01T21:57:17.210
> 
> 标签：ios, string, nsmutablearray, uilabel

当我将此字符串数组添加到 summaryText UILabel 时，它会崩溃。请让我知道如何解决这个问题。

```
NSMutableArray *arr = [[NSMutableArray alloc]init];

arr = [Singleton getArray];

NSString *str = [arr componentsJoinedByString:@"\n"];
summaryText.text = str; 
```

这是我命令单击摘要文本时出现的内容

```
@implementation TotalViewController
@synthesize tax,taxLabel,total,totalLabel,final,finalLabel,fiveLabel,threeLabel,twoLabel,five,three,two, points, pointsLabel,summaryText; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T22:00:25.210

我曾建议`initWithArray`，但不清楚为什么不将上面的整个代码段替换为：

```
summaryText.text = [[Singleton getArray] componentsJoinedByString:@"\n"]; 
```

但正如其他人指出的那样，您的崩溃不在这里，这只是简化了您的代码。问题必须在其他地方解决，可能与 summaryText 的定义/创建有关。很难说没有看到崩溃日志或更多代码。

**更新：**

你说你在 Interface Builder 中创建了这个控件。您可能需要仔细检查该控件的“连接检查器”，并确保您的插座设置正确。这听起来很像在 Interface Builder 中没有正确设置的控件。或者您可以在 Xcode 中查看您的 .h 文件，它会告诉您它是否已成功链接到 Interface Builder 中的控件。您会在源代码左侧看到一个小“圆圈”，圆圈中的实心点表示您的插座已正确连接，而空圆圈表示未正确连接（例如，在下面的示例中`contactName`，所有链接都正确，但不是）：`contactAddress``contactPhone``myLabel`

![一些示例 IBOutlets](../Images/255e8c53eaf8c8c0ade564ff4124eecf.png)

# c# - 检测另一个进程的模态对话框

> ID：11285928
> 
> 赞同：6
> 
> 时间：2012-07-01T21:57:34.997
> 
> 标签：c#, winapi

我想检测另一个进程是否说 process.exe 当前正在显示一个对话框？有没有办法在 C# 中做到这一点？

看看我能不能得到对话框的句柄。我尝试过 Spy++ 的查找窗口工具，当我尝试将查找器拖动到对话框顶部时，它不会突出显示对话框，而是填充详细信息并提及 AppCustomDialogBox 并提及句柄编号

请告知我如何以编程方式检测到..

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T07:55:44.683

当应用程序显示一个对话框时，Windows 操作系统的（对我来说非常烦人的）行为是将新创建的窗口显示在所有其他窗口之上。因此，如果我假设您知道要监视哪个进程，那么检测新窗口的一种方法是设置一个 windows 挂钩：

```
 delegate void WinEventDelegate(IntPtr hWinEventHook, uint eventType,
    IntPtr hwnd, int idObject, int idChild, uint dwEventThread, uint dwmsEventTime);

    [DllImport("user32.dll")]
    public static extern IntPtr SetWinEventHook(uint eventMin, uint eventMax, IntPtr
       hmodWinEventProc, WinEventDelegate lpfnWinEventProc, uint idProcess,
       uint idThread, uint dwFlags);

    [DllImport("user32.dll")]
    public static extern bool UnhookWinEvent(IntPtr hWinEventHook);

    // Constants from winuser.h
    public const uint EVENT_SYSTEM_FOREGROUND = 3;
    public const uint WINEVENT_OUTOFCONTEXT = 0;

    //The GetForegroundWindow function returns a handle to the foreground window.
    [DllImport("user32.dll")]
    public static extern IntPtr GetForegroundWindow();
    // For example, in Main() function
    // Listen for foreground window changes across all processes/threads on current desktop
    IntPtr hhook = SetWinEventHook(EVENT_SYSTEM_FOREGROUND, EVENT_SYSTEM_FOREGROUND, IntPtr.Zero,
            new WinEventDelegate(WinEventProc), 0, 0, WINEVENT_OUTOFCONTEXT);

    void WinEventProc(IntPtr hWinEventHook, uint eventType,
    IntPtr hwnd, int idObject, int idChild, uint dwEventThread, uint dwmsEventTime)
    {     
          IntPtr foregroundWinHandle = GetForegroundWindow();
          //Do something (f.e check if that is the needed window)
    }

    //When you Close Your application, remove the hook:
    UnhookWinEvent(hhook); 
```

我没有为对话框明确尝试该代码，但对于单独的进程，它运行良好。请记住，该代码不能在 Windows 服务或控制台应用程序中运行，因为它需要[消息泵](https://stackoverflow.com/questions/2222365/what-is-a-message-pump)（Windows 应用程序有）。你必须创建一个自己的。

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T10:26:57.680

由于模式对话框通常会禁用父窗口，因此您可以枚举进程的所有顶级窗口并查看它们是否已使用该`IsWindowEnabled()`功能启用。

# c - gdb 按行号反汇编

> ID：11285932
> 
> 赞同：4
> 
> 时间：2012-07-01T21:58:13.137
> 
> 标签：c, gdb

假设我想反汇编文件 x 的第 mn 行，其中文件 x 不在当前上下文中。这种操作是否可行，如果可以，如何操作？注意：我正在使用 x86 Linux。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-09T12:21:14.493

您可以使用带有`/m`键的 disassemble 命令在其汇编对应项的前面显示原始 C 行：

```
disassemble /m 'my_file.c'::my_function 
```

这不需要任何初步步骤，尽管它似乎不接受您所要求的源代码行范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-10T16:36:04.420

作为一个相当晚且可能多余的答案，但希望对像我这样的人有用，我想对这个和[你关于获取行号地址的其他问题进行](https://stackoverflow.com/questions/11287188/gdb-find-memory-address-of-line-number/11287482)完整的回答。

该`disassemble`命令[可以反汇编地址范围](http://visualgdb.com/gdbreference/commands/disassemble)：`disassemble [Start],[End]`. 但是你想反汇编行范围。

要获取源代码行的地址，您可以[使用`info line`命令](http://visualgdb.com/gdbreference/commands/info_line)：`info line [File]:[Line]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T23:09:59.880

这是一个笨拙的方法：在你感兴趣的行上设置一个断点，断点确认会给你一个地址。然后清除断点并在该地址上运行`disas`或。`x/20i`

# php - 使用 PHP 复制 XML 页面

> ID：11285938
> 
> 赞同：0
> 
> 时间：2012-07-01T21:58:30.207
> 
> 标签：php, javascript, xml

我正在尝试使用 Javascript 从[http://www.bart.gov/dev/eta/bart_eta.xml](http://www.bart.gov/dev/eta/bart_eta.xml)访问数据，但是，我发现除非我的服务器上有该页面的副本，否则我不能这样做. 如何在我的服务器上创建一个与[http://www.bart.gov/dev/eta/bart_eta.xml](http://www.bart.gov/dev/eta/bart_eta.xml)完全相同的代理页面？我已经尝试过 simplexml_load_file 和 file_get_contents，但是这两个函数都没有给我 XML 格式，它们给了我类似的东西`object(SimpleXMLElement)#1 (2) { ["channel"]=> object(SimpleXMLElement)#2 (6) { ["title"]=> string(23) "BART Real Time ETA Feed" ["link"]=> string(50) "http://www.bart.gov/schedules/developers/etas.aspx" ["description"]=> string(127) "Real time estimated arrivals for Bay Area Rapid Transit. Use subject to terms at http://www.bart.gov/dev/schedules/license.htm" ["copyright"]=> string(86) "Copyright (C) 2012 San Francisco Bay Area Rapid Transit District. All rights reserved." ["date"]=> string(10) "07/01/2012" ["time"]=> string(15) "02:52:39 PM PDT" } ["station"]=> array(44) { [0]=> object(SimpleXMLElement)#3 (5) { ["name"]=> string(12) ...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:05:51.237

您需要先发送内容类型。

例如，将以下文件放在您的服务器`bart_eta_proxy.php`上，然后尝试访问它。

```
header("Content-type: text/xml; charset=utf-8");
echo file_get_contents('http://www.bart.gov/dev/eta/bart_eta.xml'); 
```

在这里，它正在工作： ![在此处输入图像描述](../Images/b66e39f1e892a2f527a4c18f39cc73af.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T22:07:24.803

您实际上可以通过 Javascript 从远程域访问信息：只需使用 AJAX 向该站点发出请求。

一个非常简单的例子，使用 jquery：

```
function handlePage(xml)
{ /* Do something with that XML-page. */ }

$.ajax('http://www.bart.gov/dev/eta/bart_eta.xml').success(handlePage); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-01T22:04:16.960

将所有数据存储在变量中后，为什么不直接遍历所有数据并将其存储在文件中呢？之后，您可以根据需要进行操作。

# tabcontrol - 任何更改菜单和支持关闭“AllActive”选项卡式应用程序的示例？

> ID：11285940
> 
> 赞同：1
> 
> 时间：2012-07-01T21:59:04.370
> 
> 标签：tabcontrol, caliburn.micro

我是一名 CM 新手，并试图了解 CM。我正在构建一个应用程序，其中每个选项卡允许用户访问服务器的不同功能，其中所有选项卡中的活动工作（如果有的话是活动的）可以彼此异步运行，因此外壳是“Conductor.Collection.AllActive”我希望是正确的选择。我正在寻找两个方面的建议或样本 -

1.  我想让主外壳拥有应用程序菜单和选项卡控件，并根据所选选项卡更改应用程序菜单项，然后将菜单项单击路由到选项卡的相应 VM。

2.  由于所有选项卡都可能同时进行活动工作，因此我希望提供一个示例，说明每个选项卡上的虚拟机如何参与帮助决定（通过与用户的对话）如果关闭菜单项或应用程序是否可以关闭应用程序单击 X 图标。或者是否应该根据用户响应取消关闭（例如，由于有未保存的文件，他们说“不”）。

非常感谢任何示例和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:44:45.437

我创建了一个可能的方法来做到这一点的[样本](https://bitbucket.org/dbeattie/cmwpftabmenu/src)。使用`SharedViewModel`包含`MenuItems`. 被`SharedViewModel`注入`ShellViewModel`和 each`TabViewModel`中。Menu 控件绑定到`MenuItems`.

When a tab's `OnActivate`fires the Menu items can be updated by the `TabViewModel`.

```
<HierarchicalDataTemplate DataType="{x:Type viewModels:MenuItemViewModel}"
                                  ItemsSource="{Binding Path=MenuItems}">
            <ContentControl cal:View.Model="{Binding}" />
        </HierarchicalDataTemplate>

  <Menu IsMainMenu="True"
              ItemsSource="{Binding SharedViewModel.MenuItems}" /> 
```

共享视图模型：

```
 public class SharedViewModel : PropertyChangedBase
    {
        private List<MenuItemViewModel> _menuItems;

        public List<MenuItemViewModel> MenuItems
        {
            get { return _menuItems; }
            set
            {
                _menuItems = value;
                NotifyOfPropertyChange(() => MenuItems);
            }
        }
    } 
```

更新菜单的 TabViewModel 示例：

```
 protected override void OnActivate()
        {
            base.OnActivate();

            SharedViewModel.MenuItems = new List<MenuItemViewModel>
                                            {
                                                new MenuItemViewModel
                                                    {
                                                        Header = "MainMenuItem1",
                                                        MenuItems =
                                                            new List<MenuItemViewModel>
                                                                {
                                                                    new MenuItemViewModel {Header = "SubMenuItem1"},
                                                                    new MenuItemViewModel {Header = "SubMenuItem2"},
                                                                }
                                                    },
                                                    new MenuItemViewModel
                                                    {
                                                        Header = "MainMenuItem2",
                                                        MenuItems =
                                                            new List<MenuItemViewModel>
                                                                {
                                                                    new MenuItemViewModel {Header = "SubMenuItem1"},
                                                                    new MenuItemViewModel {Header = "SubMenuItem2"},
                                                                }
                                                    }
                                            };
        } 
```

# javascript - Rails指定javascript文件的加载顺序？

> ID：11285941
> 
> 赞同：23
> 
> 时间：2012-07-01T21:59:08.283
> 
> 标签：javascript, ruby-on-rails, ruby, asset-pipeline

在我的 application.js 文件中，我有：

```
//= require jquery
//= require jquery_ujs
//= require underscore
//= require backbone
//= require_tree .
//
//= require .//community_app
//
//= require_tree ../templates/
//= require_tree .//models
//= require_tree .//collections
//= require_tree .//views
//= require_tree .//routers 
```

但生成的 html 不遵守此顺序：

```
<head>
  <title>CommunityApp</title>
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/communities.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/home.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/underscore.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone.js?body=1" type="text/javascript"></script>
<script src="/assets/collections/communities.js?body=1" type="text/javascript"></script>
<script src="/assets/community_app.js?body=1" type="text/javascript"></script>
<script src="/assets/home.js?body=1" type="text/javascript"></script>
<script src="/assets/models/community.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="ktrLMDYSJaU/mmgmzfpxDfMin7OCXga4K5gVIJZHJUI=" name="csrf-token" />
</head>
<body> 
```

集合是在模型之前加载的，这在前端给我带来了错误。我怎样才能使它以特定方式加载js文件？谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-01T22:06:03.070

你还有一个

```
//= require_tree . 
```

更高的地方，它正在加载所有内容，显然是按字母顺序排列的。删除它（显然确保其他地方都需要所有东西），你应该没问题。您可能可以将其作为 application.js 的最后一行，但是当两个语句最终需要相同的文件时，我不记得指定的行为

# mysql - 慢复合mysql更新查询

> ID：11285945
> 
> 赞同：1
> 
> 时间：2012-07-01T21:59:29.753
> 
> 标签：mysql

我们正在两个数据库表之间进行更新查询，而且速度非常慢。如：执行查询需要 30*天。*

一个表lab.list 包含大约940,000 条记录，另一个表mind.list 大约3,700,000（370 万）条当满足两个BETWEEN 条件时更新设置一个字段。这是查询：

```
UPDATE lab.list L , mind.list M SET L.locId = M.locId  WHERE L.longip BETWEEN M.startIpNum AND M.endIpNum AND L.date BETWEEN "20100301" AND "20100401" AND L.locId = 0 
```

就像现在一样，查询执行时大约每 8 秒更新 1 次。

我们还在同一个数据库中使用 mind.list 表进行了尝试，但这对于查询时间无关紧要。

```
UPDATE lab.list L, lab.mind M  SET L.locId = M.locId  WHERE  longip BETWEEN M.startIpNum AND M.endIpNum AND date BETWEEN "20100301" AND "20100401" AND L.locId = 0; 
```

有没有办法加快这个查询？基本上恕我直言，它应该创建两个数据库子集：mind.list.longip BETWEEN M.startIpNum AND M.endIpNum lab.list.date BETWEEN "20100301" AND "20100401"

然后更新这些子集的值。在某个地方，我认为我犯了一个错误，但在哪里？也许有更快的查询可能？

我们尝试了 log_slow_queries，但这表明它确实检查了数百万行，可能一直上升到 3331 gigarows。

技术资料：

*   服务器版本：5.5.22-0ubuntu1-log (Ubuntu)
*   lab.list 在 locId、longip、date 上有索引
*   lab.mind 在 locId、startIpNum 和 M.endIpNum 上有索引
*   硬件：2x xeon 3.4 GHz、4GB RAM、128 GB SSD（所以这应该不是问题！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:28:08.013

我首先会尝试按 startIpNum、endIpNum、locId 的顺序对头脑进行索引。locId 不用于 SELECTing from mind，即使它用于更新。

出于同样的原因，我会在 locId、date 和 longip（第一次分块中未使用它，它应该在 date 上运行）这个顺序上为 lab 建立索引。

那么 startIpNum 和 endIpNum 分配了什么样的数据类型呢？对于 IPv4，最好转换为 INTEGER 并使用 INET_ATON 和 INET_NTOA 进行用户 I/O。我假设你已经这样做了。

要运行更新，您可以尝试使用临时表对 M 数据库进行分段。那是：

```
* select all records of lab in the given range of dates with locId = 0 into a temporary table TABLE1.
* run an analysis on TABLE1 grouping IP addresses by their first N bits (using AND with a suitable mask: 0x80000000, 0xC0000000, ... 0xF8000000... and so on, until you find  that you have divided into a "suitable" number of IP "families". These will, by and large, match with startIpNum (but that's not strictly necessary).
* say that you have divided in 1000 families of IP.
* For each family:
*    select those IPs from TABLE1 to TABLE3.
*    select the IPs matching that family from mind to TABLE2.
*    run the update of the matching records between TABLE3 and TABLE2\. This should take place in about one hundred thousandth of the time of the big query.
*    copy-update TABLE3 into lab, discard TABLE3 and TABLE2.
* Repeat with next "family". 
```

这不是很理想，但如果稍微改进的索引没有帮助，我真的看不到那么多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:29:52.950

最后，查询太大或太麻烦，mysql无法填写。即使在索引之后。在高端 Sybase 服务器上用相同的数据测试相同的查询也需要 3 个小时。

所以我们放弃了*在数据库服务器上做这一切的*想法，回到脚本语言。

我们在python中做了以下事情：

1.  加载 370 万条记录中的 100000 条记录，并循环遍历行
2.  对于每一行，设置 locId 并填写其余列

所有这些更新加起来大约需要 5 分钟，这是一个巨大的改进！

结论：

> 跳出数据库框框思考！

# c++ - 如何设置文本计时器？

> ID：11285956
> 
> 赞同：0
> 
> 时间：2012-07-01T22:00:51.340
> 
> 标签：c++, text, timer

我正在制作一个命令行 C++ 应用程序，我希望文本在某种计时器上，因为有很多文本。我已经知道如何制作了，所以他们必须按 Enter，但我希望它是自动的。什么是最简单的方法来做到这一点。

示例输出：

> 欢迎来到计算器游戏！（1 秒后）你想玩吗（是或否）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:12:48.730

最简单的事情就是使用`sleep(milliseconds)'。大多数操作系统也有各种各样的定时器。

如果您使用的是 C++11，那就更好了，请使用以下内容：

```
#include <iostream>
#include <chrono>
#include <thread>

int main()
{
    std::cout << "Hello waiter" << std::endl;
    std::chrono::milliseconds dura( 2000 );
    std::this_thread::sleep_for( dura );
    std::cout << "Waited 2000 ms\n";
} 
```

如果您不使用 C++11，请尝试以下操作：

```
#include <time.h>

void sleep(unsigned int mseconds)
{
    clock_t goal = mseconds + clock();
    while (goal > clock());
} 
```

此处的文档：http: [//en.cppreference.com/w/cpp/thread/sleep_for](http://en.cppreference.com/w/cpp/thread/sleep_for)

# c# - 一次更改多个控件属性

> ID：11285957
> 
> 赞同：1
> 
> 时间：2012-07-01T22:00:53.327
> 
> 标签：c#

我需要在大量控件中更改一堆属性。我很难让它工作。我在正确的轨道上吗？

```
foreach(var c in this.Controls.OfType<Label>())
            {
                c.Text = "test";
            } 
```

发生的事情是 var c 只是创建一个新对象而不是编辑现有对象。我怎样才能访问真正的控制权？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T22:03:51.890

你可以试试这个

```
 List<Control> controls = Controls.OfType<Label>().Cast<Control>().ToList();
  foreach (Control m in controls)
  {
      m.Text = "test";

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T22:02:36.287

尝试以下操作：

```
foreach(var c in this.Controls)
{
    var label = c as Label;
    if(label != null) label.Text = "test";
} 
```

# android - 如何在 Android 上使背景透明 20%

> ID：11285961
> 
> 赞同：695
> 
> 时间：2012-07-01T22:01:29.190
> 
> 标签：android, transparency, textview

如何使`Textview`大约 20% 的背景透明（不是完全透明），其中背景中有颜色（即白色）？

* * *

## 回答 #1

> 赞同：1657
> 
> 时间：2013-06-03T06:17:05.440

使用下面的黑色代码：

```
<color name="black">#000000</color> 
```

现在，如果我想使用不透明度，那么您可以使用以下代码：

```
 <color name="black">#99000000</color> <!-- 99 is for alpha and others pairs zero's are for R G B --> 
```

以下是不透明度代码：以及[**此处的所有不透明度级别**](https://gist.github.com/lopspower/03fb1cc0ac9f32ef38f4)

### 十六进制不透明度值

```
100% — FF
95% — F2
90% — E6
85% — D9
80% — CC
75% — BF
70% — B3
65% — A6
60% — 99
55% — 8C
50% — 80
45% — 73
40% — 66
35% — 59
30% — 4D
25% — 40
20% — 33
15% — 26
10% — 1A
5% — 0D
0% — 00 
```

如果您总是忘记透明代码，那么您必须查看下面的链接，而不必担心记住有关透明代码的任何内容：-

[https://github.com/duggu-hcd/TransparentColorCode](https://github.com/duggu-hcd/TransparentColorCode)

```
textviewHeader.setTextColor(Color.parseColor(ColorTransparentUtils.transparentColor(R.color.border_color,10))); 
```

* * *

## 回答 #2

> 赞同：1106
> 
> 时间：2012-07-01T22:09:26.437

使颜色在 Alpha 通道中有 80%。例如，对于红色使用`#CCFF0000`：

```
<TextView
   ...
   android:background="#CCFF0000" /> 
```

在示例中，`CC`是 的十六进制数`255 * 0.8 = 204`。请注意，前两个十六进制数字用于 alpha 通道。格式为`#AARRGGBB`，其中`AA`为 alpha 通道，`RR`为红色通道，`GG`为绿色通道，`BB`为蓝色通道。

我假设 20% 透明意味着 80% 不透明。如果你的意思是另一种方式，而不是`CC`使用`33`which 是十六进制的`255 * 0.2 = 51`.

为了计算 Alpha 透明度值的正确值，您可以按照以下步骤操作：

1.  给定一个透明度百分比，例如 20%，您知道不透明百分比值为 80%（这是`100-20=80`）
2.  Alpha 通道的范围是 8 位 ( `2^8=256`)，这意味着范围从 0 到 255。
3.  将不透明百分比投影到 alpha 范围内，即将范围 (255) 乘以百分比。在这个例子`255 * 0.8 = 204`中。如果需要，四舍五入到最接近的整数。
4.  将 3\. 中得到的以 10 为底的值转换为十六进制（以 16 为底）。你可以使用谷歌来计算这个或任何计算器。使用谷歌，输入“204 to hexa”，它会给你十六进制值。在这种情况下，它是`0xCC`。
5.  将 4\. 中获得的值添加到所需的颜色。例如，对于红色，即`FF0000`，您将拥有`CCFF0000`。

您可以查看[有关颜色的 Android 文档](http://developer.android.com/guide/topics/resources/more-resources.html#Color)。

* * *

## 回答 #3

> 赞同：176
> 
> 时间：2016-08-24T16:13:26.797

您可以管理颜色不透明度，更改颜色定义中的前 2 个字符：

# **99** 000000

```
100% — FF
99% — FC
98% — FA
97% — F7
96% — F5
95% — F2
94% — F0
93% — ED
92% — EB
91% — E8

90% — E6
89% — E3
88% — E0
87% — DE
86% — DB
85% — D9
84% — D6
83% — D4
82% — D1
81% — CF

80% — CC
79% — C9
78% — C7
77% — C4
76% — C2
75% — BF
74% — BD
73% — BA
72% — B8
71% — B5

70% — B3
69% — B0
68% — AD
67% — AB
66% — A8
65% — A6
64% — A3
63% — A1
62% — 9E
61% — 9C

60% — 99
59% — 96
58% — 94
57% — 91
56% — 8F
55% — 8C
54% — 8A
53% — 87
52% — 85
51% — 82

50% — 80
49% — 7D
48% — 7A
47% — 78
46% — 75
45% — 73
44% — 70
43% — 6E
42% — 6B
41% — 69

40% — 66
39% — 63
38% — 61
37% — 5E
36% — 5C
35% — 59
34% — 57
33% — 54
32% — 52
31% — 4F

30% — 4D
29% — 4A
28% — 47
27% — 45
26% — 42
25% — 40
24% — 3D
23% — 3B
22% — 38
21% — 36

20% — 33
19% — 30
18% — 2E
17% — 2B
16% — 29
15% — 26
14% — 24
13% — 21
12% — 1F
11% — 1C

10% — 1A
9% — 17
8% — 14
7% — 12
6% — 0F
5% — 0D
4% — 0A
3% — 08
2% — 05
1% — 03
0% — 00 
```

* * *

## 回答 #4

> 赞同：117
> 
> 时间：2012-07-01T22:07:05.150

使用具有 alpha 值的颜色`#33------`，并使用 XML 属性将其设置为您的 editText 的背景`android:background=" "`。

1.  0%（透明）-> #00（十六进制）
2.  20% -> #33
3.  50% -> #80
4.  75% -> #C0
5.  100%（不透明）-> #FF

**255 * 0.2 = 51 → 十六进制 33**

* * *

## 回答 #5

> 赞同：106
> 
> 时间：2012-07-01T22:17:27.347

您可以尝试执行以下操作：

```
textView.getBackground().setAlpha(51); 
```

在这里，您可以将不透明度设置在 0（完全透明）到 255（完全不透明）之间。51 正是你想要的 20%。

* * *

## 回答 #6

> 赞同：94
> 
> 时间：2017-01-26T03:32:44.930

**在 Android Studio 中有一个内置工具可以调整颜色和 alpha/opacity 值**：

[![Android 调整颜色不透明度](../Images/69b60d8f955847c728fdb3476647c593.png)](https://i.stack.imgur.com/3Oszw.png)

**举例说明：**
[https ://devdeeds.com/how-to-add-custom-color-to-views-in-xml-android-studio-ide/](https://devdeeds.com/how-to-add-custom-color-to-views-in-xml-android-studio-ide/)

* * *

## 回答 #7

> 赞同：78
> 
> 时间：2018-09-11T07:55:00.077

> 我们也可以以 dis 的方式使透明。

白色代码 - FFFFFF

**20% 白色**- # **33** FFFFFF

**20% — 33**

**70% 白色**- # **B3** FFFFFF

**70% — B3**

所有十六进制值从**100% 到 0%**

```
**100% —** **FF**,
99% — FC,
98% — FA,
97% — F7,
96% — F5,
95% — F2,
94% — F0,
93% — ED,
92% — EB,
91% — E8,
**90% —** **E6**,
89% — E3,
88% — E0,
87% — DE,
86% — DB,
85% — D9,
**84% —** **D6**,
83% — D4,
82% — D1,
81% — CF,
**80% —** **CC**,
79% — C9,
78% — C7,
77% — C4,
76% — C2,
75% — BF,
74% — BD,
73% — BA,
72% — B8,
71% — B5,
**70% — B3**,
69% — B0,
68% — **AD**,
67% — AB,
66% — A8,
65% — A6,
64% — A3,
63% — A1,
62% — 9E,
61% — 9C,
**60% —** **99**,
59% — 96,
58% — 94,
57% — 91,
56% — 8F,
55% — 8C,
54% — 8A,
53% — 87,
52% — 85,
51% — 82,
**50% —** **80**,
49% — 7D,
48% — 7A,
47% — 78,
46% — 75,
45% — 73,
44% — 70,
43% — 6E,
42% — 6B,
41% — 69,
**40% —** **66**,
39% — 63,
38% — 61,
37% — 5E,
36% — 5C,
35% — 59,
34% — 57,
33% — 54,
32% — 52,
31% — 4F,
**30% —** **4D**,
29% — 4A,
28% — 47,
27% — 45,
26% — 42,
25% — 40,
24% — 3D,
23% — 3B,
22% — 38,
21% — 36,
**20% — 33**,
19% — 30,
18% — **2E**,
17% — 2B,
16% — 29,
15% — 26,
14% — 24,
13% — 21,
12% — 1F,
11% — 1C,
**10% —** **1A**,
9% — 17,
8% — 14,
7% — 12,
6% — 0F,
5% — 0D,
4% — 0A,
3% — 08,
2% — 05,
1% — 03,
**0% —** **00** 
```

* * *

## 回答 #8

> 赞同：37
> 
> 时间：2015-05-29T10:13:24.900

![看截图](../Images/8546e7fd97c86d309e2f31bd631cf7e4.png)

我采取了三种观点。在第一个视图中，我设置了完整（无 alpha）颜色，在第二个视图中，我设置了一半（0.5 alpha）颜色，在第三个视图中，我设置了浅色（0.2 alpha）。

您可以使用以下代码设置任何颜色并使用 alpha 获取颜色：

### 文件*activity_main.xml*

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools = "http://schemas.android.com/tools"
    android:layout_width = "match_parent"
    android:layout_height = "match_parent"
    android:gravity = "center"
    android:orientation = "vertical"
    tools:context = "com.example.temp.MainActivity" >

    <View
        android:id = "@+id/fullColorView"
        android:layout_width = "100dip"
        android:layout_height = "100dip" />

    <View
        android:id = "@+id/halfalphaColorView"
        android:layout_width = "100dip"
        android:layout_height = "100dip"
        android:layout_marginTop = "20dip" />

    <View
        android:id = "@+id/alphaColorView"
        android:layout_width = "100dip"
        android:layout_height = "100dip"
        android:layout_marginTop = "20dip" />

</LinearLayout> 
```

### 文件*MainActivity.java*

```
public class MainActivity extends Activity {

    private View fullColorView, halfalphaColorView, alphaColorView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        fullColorView = (View)findViewById(R.id.fullColorView);
        halfalphaColorView = (View)findViewById(R.id.halfalphaColorView);
        alphaColorView = (View)findViewById(R.id.alphaColorView);

        fullColorView.setBackgroundColor(Color.BLUE);
        halfalphaColorView.setBackgroundColor(getColorWithAlpha(Color.BLUE, 0.5f));
        alphaColorView.setBackgroundColor(getColorWithAlpha(Color.BLUE, 0.2f));
    }

    private int getColorWithAlpha(int color, float ratio) {
        int newColor = 0;
        int alpha = Math.round(Color.alpha(color) * ratio);
        int r = Color.red(color);
        int g = Color.green(color);
        int b = Color.blue(color);
        newColor = Color.argb(alpha, r, g, b);
        return newColor;
    }
} 
```

**科特林版本：**

```
private fun getColorWithAlpha(color: Int, ratio: Float): Int {
  return Color.argb(Math.round(Color.alpha(color) * ratio), Color.red(color), Color.green(color), Color.blue(color))
} 
```

**完毕**

* * *

## 回答 #9

> 赞同：28
> 
> 时间：2018-05-14T09:57:55.393

所有十六进制值从 100% 到 0% alpha，您可以使用下面提到的 alpha 值设置任何颜色。例如#FAFFFFFF(AARRGGBB)

```
100% — FF
99% — FC
98% — FA
97% — F7
96% — F5
95% — F2
94% — F0
93% — ED
92% — EB
91% — E8
90% — E6
89% — E3
88% — E0
87% — DE
86% — DB
85% — D9
84% — D6
83% — D4
82% — D1
81% — CF
80% — CC
79% — C9
78% — C7
77% — C4
76% — C2
75% — BF
74% — BD
73% — BA
72% — B8
71% — B5
70% — B3
69% — B0
68% — AD
67% — AB
66% — A8
65% — A6
64% — A3
63% — A1
62% — 9E
61% — 9C
60% — 99
59% — 96
58% — 94
57% — 91
56% — 8F
55% — 8C
54% — 8A
53% — 87
52% — 85
51% — 82
50% — 80
49% — 7D
48% — 7A
47% — 78
46% — 75
45% — 73
44% — 70
43% — 6E
42% — 6B
41% — 69
40% — 66
39% — 63
38% — 61
37% — 5E
36% — 5C
35% — 59
34% — 57
33% — 54
32% — 52
31% — 4F
30% — 4D
29% — 4A
28% — 47
27% — 45
26% — 42
25% — 40
24% — 3D
23% — 3B
22% — 38
21% — 36
20% — 33
19% — 30
18% — 2E
17% — 2B
16% — 29
15% — 26
14% — 24
13% — 21
12% — 1F
11% — 1C
10% — 1A
9% — 17
8% — 14
7% — 12
6% — 0F
5% — 0D
4% — 0A
3% — 08
2% — 05
1% — 03
0% — 00 
```

* * *

## 回答 #10

> 赞同：21
> 
> 时间：2019-03-23T07:10:18.313

现在**Android Studio 3.3**及更高版本提供了一个内置功能来更改颜色的**Alpha**值，

只需在 Android Studio 编辑器中单击一种颜色并**在`percentage`**.

有关更多信息，请参见下图

[![在此处输入图像描述](../Images/48ff518d46ba6a6ddca332a367747817.png)](https://i.stack.imgur.com/NcxoE.png)

* * *

## 回答 #11

> 赞同：18
> 
> 时间：2015-10-27T16:26:40.270

有一个 XML 值`alpha`采用双精度值。

由于`API 11+`范围是从`0f`到`1f`（包括），`0f`透明和`1f`不透明：

*   `android:alpha="0.0"`那是看不见的

*   `android:alpha="0.5"`透视

*   `android:alpha="1.0"`完全可见

这就是它的工作原理。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2016-04-19T10:01:26.357

```
<TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:alpha="0.9"
        /> 
```

Android API 11+ 中的 Alpha 范围在 0（透明）和 1（不透明）之间

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2020-03-31T10:50:42.027

如果你想在 kotlin 中使颜色 50% 透明，

```
val percentage = 50f/100 //50%
ColorUtils.setAlphaComponent(resources.getColor(R.color.whatEverColor), (percentage * 255).toInt()) 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2017-08-25T06:51:54.253

使用此查看 textView 下面的流行度

```
 android:alpha="0.38" 
```

[![在此处输入图像描述](../Images/bfc8cce8493a426b1db4775bab811bea.png)](https://i.stack.imgur.com/boSVL.png)

**XML**

```
android:color="#3983BE00"    // Partially transparent sky blue 
```

**动态地**

**btn.getBackground().setAlpha(128); // 50% 透明**

**tv_name.getBackground().setAlpha(128); // 50% 透明**

```
Where the INT ranges from 0 (fully transparent) to 255 (fully opaque).

  <TextView
            style="@style/TextAppearance.AppCompat.Caption"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:alpha="0.38"
            android:gravity="start"
            android:textStyle="bold"
            tools:text="1994|EN" /> 
```

**安卓：阿尔法=“0.38”**

```
Text View alpha property set 0.38 to your textView visibility is faid 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-07-08T12:13:25.057

在 Kotlin 中，您可以像这样使用 alpha，

```
 //Click on On.//
    view.rel_on.setOnClickListener{
        view.rel_off.alpha= 0.2F
        view.rel_on.alpha= 1F

    }

    //Click on Off.//
    view.rel_off.setOnClickListener {
        view.rel_on.alpha= 0.2F
        view.rel_off.alpha= 1F
    } 
```

结果就像在这个屏幕截图中一样。[![20% 透明](../Images/077c8e38d3f4a3e7343a7a62b1a0e42b.png)](https://i.stack.imgur.com/ViXUo.jpg)

希望这会帮助你。谢谢

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-02-01T06:54:09.703

我知道，这是一个非常古老的问题。

如果你想使用颜色值，你也可以使用它的简短版本 with `#ARGB`。`A`Alpha 通道的值在哪里。

如果是白色，则有以下透明度值：

```
#FFFF  -     0%
#EFFF  -   6,7%
#DFFF  -  13,3%
#CFFF  -  20,0%
#BFFF  -  26,7%
#AFFF  -  33,3%
#9FFF  -  40,0%
#FFF8  -  46,7%
#7FFF  -  53,3%
#6FFF  -  60,0%
#5FFF  -  66,7%
#4FFF  -  73,3%
#3FFF  -  80,0%
#2FFF  -  86,7%
#1FFF  -  93,3%
#0FFF  - 100,0% 
```

因此，您可以`TextView`添加以下行以获得 20% 的透明度：

```
<TextView
    android:background="#CFFF"
    ... /> 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-10-05T11:40:10.123

我会推荐使用`alpha`属性。

```
<TextView
   android:alpha="0.8" /> 
```

或者现在您可以使用`selector`. `background_color_25.xml`在`colors`包中创建。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:alpha="0.8" android:color="@color/background_color" />
</selector> 
```

这是用法：

```
<TextView
   android:background="@color/background_color_25" /> 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-04-11T05:16:52.157

**试试这个代码:)**

它是一个完全透明的十六进制代码**- “#00000000”**

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-08-03T12:32:28.110

[这是来自@Aromero](https://stackoverflow.com/a/11286013/4370279)的答案的编程解决方案，用于计算 alpha 通道的十六进制值。:)

```
 public static void main(String[] args) throws Exception {
    final Scanner scanner = new Scanner(System.in);
    int transPerc;
    float fPerc;
    System.out.println("Enter the transparency percentage without % symbol:");
    while((transPerc=scanner.nextInt())>=0 && transPerc <=100){
        fPerc = (float) transPerc / 100;
        transPerc = Math.round(255 * fPerc);
        System.out.println("= " + Integer.toHexString(transPerc));
        System.out.print("another one please : ");
    }
    scanner.close();
} 
```

# asp.net-mvc-3 - 无法在 MVC 应用程序中完成 Azure ACS 身份验证

> ID：11285964
> 
> 赞同：0
> 
> 时间：2012-07-01T22:01:40.217
> 
> 标签：asp.net-mvc-3, azure, azure-acs

我有一个 MVC 3 应用程序，我正在尝试与 Azure 托管的 ACS 身份提供程序集成。我一直在关注教程，但在使用 ASP.NET MVC 时它们似乎对我不起作用。

本质上，当我点击我用用户标记的**View**`[Authorize]`时，会重定向到 Azure 托管的登录页面，其中包含**Identity Providers**列表。我选择了一个提供商（在本例中为*Live*）并登录。此时，这一切都按我的预期工作。在我成功进行身份验证后（*视觉上*）我**没有被**重定向回我的应用程序，而是返回到身份提供者页面。在 Fiddler 中观看此内容时，它似乎实际上返回，但随后又重新开始循环（*HTTP 状态代码 302*）。

有人可以解释可能导致这种情况的原因吗？

在 Azure 门户中，我为我的依赖方应用程序配置了以下 URL

*   **领域**：http://localhost:7777/
*   **返回网址**：http://localhost:7777/（*我也试过http://localhost:7777/Home/About*）
*   在所有其他情况下，我都有默认设置

url 匹配 Web.config 中的内容（*包括尾部斜杠*）

只有一个控制器具有以下功能：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [Authorize]
    public ActionResult About()
    {
        Response.Write("Claims Received from ACS:");
        ClaimsIdentity ci = Thread.CurrentPrincipal.Identity as ClaimsIdentity; foreach (Claim c in ci.Claims)
        {
            Response.Write("Type: " + c.ClaimType + "- Value: " + c.Value + "");
        }

        return View();
    }
} 
```

***注意：**这是一个全新的项目，旨在通过此集成工作。所有的包和相关的 SDK 都是最新的。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:36:46.533

我想知道您的意思是否是当您登录并返回您的网络应用程序时，它认为您没有登录，并再次将您重定向到身份提供者的登录页面。

请检查您是否正确配置了授权逻辑。例如，如果您使用基于角色的授权，则需要配置 ACS 以创建返回角色的规则。您还可以使用自定义授权而不是 Authorization 属性。在您的自定义授权代码中，您可以检查是否存在所需的声明。声明可以是角色或其他任何内容（用户名、年龄等）。自定义授权通常比 Authorization 属性更灵活。

此致，

明旭。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T09:22:52.440

请确保您没有修改示例代码。由于它是官方的 ACS SDK 示例，因此很多人都尝试过，并且可以正常工作。

同样在您的原始帖子中，您提到您已经配置了 ASP.NET 授权：

```
<authorization>
     <deny users="?" />
   </authorization> 
```

如果您不想使用 ASP.NET 授权（您想使用 WIF），请删除它（如文档中所示）。

此致，

明旭。

# java - 使用 GWT 更改 RichtextToolbar.java

> ID：11285972
> 
> 赞同：0
> 
> 时间：2012-07-01T22:02:58.737
> 
> 标签：java, gwt, toolbar

我正在开发一个已经使用 GWT 开发的项目。我只想对样式进行细微的更改以显示更好的工具栏。所以我在以下链接找到了一个代码：[http ://blog.elitecoderz.net/gwt-toolbar-for-richtextarea-a-richtexttoolbar-with-html-editor/2010/02/](http://blog.elitecoderz.net/gwt-toolbar-for-richtextarea-a-richtexttoolbar-with-html-editor/2010/02/)

然后我明白，为了能够实现这个新代码，我必须下载 GWT。这就是我所做的。但我对java或GWT一无所知。我的 php 和 HTML 文件在 MAMP 上运行，它们存储在 mysite 目录中。在这些文件中，我有一个带有 RichTextToolbar.java 文件的 java 目录，我想对其进行一些更改。我应该如何处理这个文件？

据我所知，我必须使用 Eclipse 创建一个 GWT 项目，获取唯一的 RichTextToolbar.java 文件，运行并编译它，然后我应该有一些新的编译文件，我必须将它们导入到我的 mysite 目录中？我对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T06:24:34.527

您必须重新编译完整的 GWT 项目，如果想看到更改，因为 GWT 将 Java 编译为 JavaScript 并且不使用 *.java 资源文件。

# javascript - javascript 图像数据对象到图像对象（尝试用图像数据填充（））

> ID：11285974
> 
> 赞同：1
> 
> 时间：2012-07-01T22:03:13.650
> 
> 标签：javascript, html, getimagedata, putimagedata

我要做的是 context.createImageData(xxx,xxx) 然后获取该图像数据并对其进行操作，然后使用图像数据 context.createPattern(imagedata, 'repeat') 用图像数据填充我绘制的对象我程序化了。我遇到的问题是 createPattern 接受图像对象而不是图像数据对象。所以我需要找到一种将图像数据对象转换为图像对象的方法，或者找到一种更好的方法来使用程序生成的图像填充（）。

感谢您的帮助！！

# javascript - Javascript函数中var和this的区别？

> ID：11285975
> 
> 赞同：17
> 
> 时间：2012-07-01T22:03:21.580
> 
> 标签：javascript, syntax

```
var tools = {};

tools.triangle = function() {
    var originX = 0;
    var originY = 0;
} 
```

```
var tools = {};

tools.triangle = function() {
    this.originX = 0;
    this.originY = 0;
} 
```

这两个代码块之间有什么区别吗？抱歉，如果之前有人问过这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-01T22:05:00.170

`var`在`tools.triangle`. 变量`originX`和`originY`不能与外部交互`tools.triangle`。`this`是指向您正在处理的当前对象的指针。第二个示例可用于通过执行为对象赋予属性`new tools.triangle();`。如果您不使用`new`而只使用`tools.triangle();`，`this`将指向作为对象的全局`window`对象。`this`您可以使用函数方法将对象更改为指向的对象[`call();`](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFUQFjAA&url=https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call&ei=F-TwT77tLuS26wHZr62UBg&usg=AFQjCNFv3KJ_elOprlTCrEkrXUnsT4CMpQ)，[`apply();`](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFMQFjAA&url=https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply&ei=LuTwT82OL4TH6wGW9diQBg&usg=AFQjCNFgkF2xdtJvcGkuRqEINJyJimDgQw)如下所示：

```
var myObj = {};

tools.triangle.call( myObj );

// "this" in tools.triangle now points to myObj
// myObj now has the properties originX and originY 
```

重要的是要知道它`this`可以引用任何对象，也可以是未定义的或`null`在 ES5 严格模式下。

[您可以在此处](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T22:13:30.380

在第一个示例中，X 和 Y 都作为保存在变量中的闭包的局部变量存在`triangle`。

在第二个示例中，X 和 Y 作为对象的变量存在，`tools.triangle`因为使用`this`.

# google-app-engine - 尝试使用 Google AppEngine 数据存储区管理员时出错

> ID：11285976
> 
> 赞同：1
> 
> 时间：2012-07-01T22:03:25.427
> 
> 标签：google-app-engine, google-cloud-datastore

在 AppEngine 控制台中，我启用了数据存储管理。我还启用了远程 API。但是，当我尝试访问它时，我看到以下消息：

```
Error: Forbidden
Your client does not have permission to get URL 
```

许多人似乎有 400（未找到）或 500（错误），但这些问题的修复似乎都无法解决此权限问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:03:25.960

权限问题是由于我的 webapp 登录限制在一个域中，而我正在从另一个域访问 AppEngine 管理。

例如，AppEngine 管理是从 执行的`support@my_developer_domain.com`，而应用程序本身的所有登录都在表单中`xyz@client_company_domain.com`。

解决方案是让客户在他们自己的域 ( `andy@client_company_domain.com`) 中为我分配一个电子邮件地址，然后邀请该帐户成为 Web 应用程序的开发人员。接受邀请并使用此帐户登录后，数据存储管理页面可见。

# python - 使用 GObject 发送通知

> ID：11285979
> 
> 赞同：6
> 
> 时间：2012-07-01T22:03:37.503
> 
> 标签：python, notifications, gnome, pygobject, gnome-3

目前似乎明显缺乏用于 python 的 GObjects 模块的文档，所以也许有人可以帮助我。

我正在制作一个应用程序，它有时必须通知用户发生了事件。我`from gi.repository import Notify`从使用Skype通知和C文档的简短片段中找到了有关使用和相关类的信息，但是当我调用Notify.uninit时它似乎没有关闭。程序关闭，但小通知窗口仍然存在，必须通过右键单击它并选择“删除”来关闭。所以，我想知道是否有另一种方式，比如在 Mac OS 中，应用程序图标在发生某些事情时会抖动/弹跳，或者在 Windows 中，应用程序图标会发出不同的颜色吗？

我喜欢带有消息堆栈等的 Gnome 3 通知系统，但是由于当我的应用程序退出时我似乎无法让它消失，所以我真的不想使用它（除非有人知道如何正确地做到这一点.. .可能是我忘了设置超时，但这仍然没有意义，为什么我不能让通知点消失）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T11:33:15.200

调用`Notify.uninit`不应该使通知消失，它只会告诉 libnotify 您的应用程序不再需要它。要使通知消失，您必须像以下示例中那样显式关闭它们：

```
import time
from gi.repository import Notify

Notify.init('myapp')

# optionally set an icon as the last argument
n = Notify.Notification.new('summary text', 'body text', "dialog-information")
n.show()

# do whatever your application is doing
time.sleep(10)

n.close()
Notify.uninit() 
```

# javascript - 通过 JavaScript 检测应用程序是否在 phonegap 中运行的最有效和最可靠的方法

> ID：11285981
> 
> 赞同：5
> 
> 时间：2012-07-01T22:04:02.993
> 
> 标签：javascript, cordova

检测应用程序是在 phonegap 中运行，还是仅在使用 JavaScript 的移动/桌面浏览器中运行的最有效和最可靠的方法是什么？我正在尝试消除阻止我在任何浏览器（桌面或移动）中测试/调试我的 phonegap 应用程序的任何问题，并为我的应用程序创建一个真正通用的代码库。

我打算用 phonegap 特定的调用来构建我的函数，如下所示：

```
if (phonegapisrunning) {
    // phonegap specific javascript calls here
}
else {
    // standard javascript calls here
} 
```

在寻找解决方案时，我遇到了这个线程： [PhoneGap: Detect if running on desktop browser](https://stackoverflow.com/questions/8068052/phonegap-detect-if-running-on-desktop-browser)。

虽然这个线程讨论了这个问题，但我没有看到关于哪种方法最有效/最可靠的明确答案。我应该绑定到 onDeviceReady() 事件吗？我应该检查 window.device 吗？是否有更有效或更可靠的方法来检查应用程序是否通过 JavsScript 在 phonegap 中运行？

这个线程提到了 Ripple Chrome 插件： [Phonegap web app in regular desktop browsers](https://stackoverflow.com/questions/6159712/phonegap-web-app-in-regular-desktop-browsers?rq=1)

Ripple 工具看起来可能是一个有价值的测试工具。但我试图让我的 phonegap 应用程序在没有插件的桌面浏览器中运行。

如果确定该应用程序未在 phonegap 中运行，我将使用用户代理嗅探来确定浏览器是桌面还是移动，并在需要时进一步分离任何代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-25T05:26:22.463

我已经看到了很多关于检查用户代理的答案。尽管这些对于比较*加载页面的*平台很有用，但它们仍然无法区分是在*Cordova 应用程序的浏览器*中运行还是在*常规 Web 浏览器*中运行。在对 android cordova javascript 文件进行了大量挖掘之后，我发现在 cordova 应用程序中运行时设置了以下变量：

```
window._cordovaNative 
```

浏览 ios cordova javascript，我发现：

```
window._nativeReady 
```

在您加载任何cordova javascript或检查任何用户代理等之前，在您的页面中抛出这些警报，并比较从Web浏览器加载和从获取动态内容的cordova应用程序加载之间的结果：

```
alert("Android: " + window._cordovaNative);
alert("iOS: " + window._nativeReady); 
```

我猜其他设备的 phonegap 文件有不同的全局变量，但是现在，这对我来说会很好用——我希望它对你有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T23:47:37.937

我的建议是在 onDeviceReady Phonegap 调用之外创建/调用您的 javascript 函数。

或者也许检查正在运行的 Cordova / Phonegap 的版本，例如：

```
var string = device.cordova; // or device.phonegap

if (string == null) {
  //do non phonegappy stuff here
} else {
  //do phonegappy stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-24T22:19:29.600

虽然它可能不是最干净的解决方案，但一种简单可靠的方法是在 deviceready 上创建/设置一个全局变量：

```
var isCordovaReady = true; 
```

然后：

```
if (isCordovaReady) {
    // do cordova/phonegap stuff
}
else {
    // do non cordova/phonegap stuff here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T23:52:27.607

我发布了最佳答案：[PhoneGap：检测是否在桌面浏览器上运行](https://stackoverflow.com/questions/8068052/phonegap-detect-if-running-on-desktop-browser)

虽然这没有大量记录并且有些争议，但我已经能够在我的所有项目中使用这段代码：

```
if (navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)) {
    document.addEventListener("deviceready", onDeviceReady, false); //phone
} else {
    onDeviceReady(); //this is the browser
} 
```

您可以对其进行一些修改以适用于您的项目，如下所示：

```
var phonegapisrunning = false;
if (navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)) {
    document.addEventListener("deviceready", onDeviceReady, false); //phone
    //change to true
    phonegapisrunning = true;

} else {
    onDeviceReady(); //this is the browser
} 
```

希望这可以帮助 ！

# c# - C# Platform-invoke，具有引用和值类型的 c 样式联合

> ID：11285984
> 
> 赞同：1
> 
> 时间：2012-07-01T22:04:47.300
> 
> 标签：c#, .net, c, pinvoke, marshalling

我正在尝试编组以下结构

```
struct OpalMessage {
  OpalMessageType m_type;   ///< Type of message
  union {
    const char *             m_commandError;       ///< Used by OpalIndCommandError
    OpalParamGeneral         m_general;            ///< Used by OpalCmdSetGeneralParameters
    OpalParamProtocol        m_protocol;           ///< Used by OpalCmdSetProtocolParameters
    OpalParamRegistration    m_registrationInfo;   ///< Used by OpalCmdRegistration
    OpalStatusRegistration   m_registrationStatus; ///< Used by OpalIndRegistration
    OpalParamSetUpCall       m_callSetUp;          ///< Used by OpalCmdSetUpCall/OpalIndProceeding/OpalIndAlerting/OpalIndEstablished
    const char *             m_callToken;          ///< Used by OpalCmdHoldcall/OpalCmdRetrieveCall/OpalCmdStopRecording
    OpalStatusIncomingCall   m_incomingCall;       ///< Used by OpalIndIncomingCall
    OpalParamAnswerCall      m_answerCall;         ///< Used by OpalCmdAnswerCall/OpalCmdAlerting
    OpalStatusUserInput      m_userInput;          ///< Used by OpalIndUserInput/OpalCmdUserInput
    OpalStatusMessageWaiting m_messageWaiting;     ///< Used by OpalIndMessageWaiting
    OpalStatusLineAppearance m_lineAppearance;     ///< Used by OpalIndLineAppearance
    OpalStatusCallCleared    m_callCleared;        ///< Used by OpalIndCallCleared
    OpalParamCallCleared     m_clearCall;          ///< Used by OpalCmdClearCall
    OpalStatusMediaStream    m_mediaStream;        ///< Used by OpalIndMediaStream/OpalCmdMediaStream
    OpalParamSetUserData     m_setUserData;        ///< Used by OpalCmdSetUserData
    OpalParamRecording       m_recording;          ///< Used by OpalCmdStartRecording
    OpalStatusTransferCall   m_transferStatus;     ///< Used by OpalIndTransferCall
    OpalStatusIVR            m_ivrStatus;          ///< Used by OpalIndCompletedIVR
  } m_param;
}; 
```

转到 C#。明显的问题是这两个字符串不可避免地是引用类型。

所以，我尝试了这个：

```
 [StructLayout(LayoutKind.Explicit)]
    public struct OpalMessageStrUnion
    {
      [FieldOffset(0)]
      [MarshalAs(UnmanagedType.LPStr)]
      public string m_commandError;       ///< Used by OpalIndCommandError

      [FieldOffset(0)]
      [MarshalAs(UnmanagedType.LPStr)]
      public string m_callToken;          ///< Used by OpalCmdHoldcall/OpalCmdRetrieveCall/OpalCmdStopRecording
    }

    [StructLayout(LayoutKind.Explicit)]
    public struct OpalMessageUnion
    {
      [FieldOffset(0)]      
      public OpalParamGeneral m_general;            ///< Used by OpalCmdSetGeneralParameters

      [FieldOffset(0)]
      public OpalParamProtocol m_protocol;           ///< Used by OpalCmdSetProtocolParameters

      [FieldOffset(0)]
      public OpalParamRegistration m_registrationInfo;   ///< Used by OpalCmdRegistration

      [FieldOffset(0)]
      public OpalStatusRegistration m_registrationStatus; ///< Used by OpalIndRegistration

      [FieldOffset(0)]
      public OpalParamSetUpCall m_callSetUp;          ///< Used by OpalCmdSetUpCall/OpalIndProceeding/OpalIndAlerting/OpalIndEstablished     

      [FieldOffset(0)]
      public OpalStatusIncomingCall m_incomingCall;       ///< Used by OpalIndIncomingCall

      [FieldOffset(0)]
      public OpalParamAnswerCall m_answerCall;         ///< Used by OpalCmdAnswerCall/OpalCmdAlerting

      [FieldOffset(0)]
      public OpalStatusUserInput m_userInput;          ///< Used by OpalIndUserInput/OpalCmdUserInput

      [FieldOffset(0)]
      public OpalStatusMessageWaiting m_messageWaiting;     ///< Used by OpalIndMessageWaiting

      [FieldOffset(0)]
      public OpalStatusLineAppearance m_lineAppearance;     ///< Used by OpalIndLineAppearance

      [FieldOffset(0)]
      public OpalStatusCallCleared m_callCleared;        ///< Used by OpalIndCallCleared

      [FieldOffset(0)]
      public OpalParamCallCleared m_clearCall;          ///< Used by OpalCmdClearCall

      [FieldOffset(0)]
      public OpalStatusMediaStream m_mediaStream;        ///< Used by OpalIndMediaStream/OpalCmdMediaStream

      [FieldOffset(0)]
      public OpalParamSetUserData m_setUserData;        ///< Used by OpalCmdSetUserData

      [FieldOffset(0)]
      public OpalParamRecording m_recording;          ///< Used by OpalCmdStartRecording

      [FieldOffset(0)]
      public OpalStatusTransferCall m_transferStatus;     ///< Used by OpalIndTransferCall

      [FieldOffset(0)]
      public OpalStatusIVR m_ivrStatus;          ///< Used by OpalIndCompletedIVR

    }

    /// <summary>
    /// Message to/from OPAL system.
    /// This is passed via the OpalGetMessage() or OpalSendMessage() functions.
    /// </summary> 
    [StructLayout(LayoutKind.Explicit)]
    public struct OpalMessage
    {
      //this guy is an enumeration b.t.w.
      /// <summary>
      /// type of message
      /// </summary> 
      [FieldOffset(0)]
      public OpalMessageType m_type;

      [FieldOffset(4)]
      public OpalMessageUnion m_param;

      [FieldOffset(4)]
      public OpalMessageStrUnion m_strParam;
    } 
```

但是，我仍然收到封送处理错误，告诉我这不起作用，因为我将对象与非对象类型混合在同一内存位置。我现在假设结构本身（即 OpalParamGeneral 等）也不能混合引用和值类型，即使它们是按顺序排列的？

顺便说一下，对每个结构进行单独的函数调用不是一种选择。我宁愿写一个 COM 包装器也不愿那样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:35:56.130

[StructLayout(LayoutKind.Explicit)] 属性是不寻常的，它不仅会在编组时影响结构的布局，还会影响结构的托管版本的布局。这非常方便，即使语言本身不支持它，它也允许在托管语言中实现联合。

然而，它们会造成麻烦，垃圾收集器对它们有问题。它需要能够找到对引用类型的引用，并且不能在联合中可靠地做到这一点。因为它无法准确判断引用的是什么类型。这也是一个可靠性问题，您可以将引用类型与例如 IntPtr 重叠并以这种方式发现对象的地址。

CLR 类加载器检查这种情况，如果发生重叠，则抛出 TypeLoadException。

解决方法很明确，您需要确保只使用 blittable 类型。您的所有 OpalXxx 类型都必须是本身仅包含 blittable 类型的结构。字符串的解决方法是将它们声明为 IntPtr 并使用 Marshal 类来转换值。[此MSDN 库文章](http://msdn.microsoft.com/en-us/library/75dwhxf7.aspx)中有关 blittable 类型的更多信息。

# iphone - 无法将出口从情节提要拖到 XCode 中的助理编辑器

> ID：11285993
> 
> 赞同：26
> 
> 时间：2012-07-01T22:06:52.057
> 
> 标签：iphone, xcode, storyboard, xcode4.3

我以前可以在 XCode 中执行此操作，但现在我突然无法在我打开的一个朋友发送的新项目中执行此操作。

我必须更改特定设置才能重新开始吗？

即有一个文本框我想通过代码链接，现在我不能。:(

需要帮助的家伙！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-01T22:12:59.620

您很可能打开了一个错误的类的助手编辑器窗口，您需要检查您当前选择的视图控制器并确保它与在助手编辑器中打开的相同

或者在助手编辑器中，选择自动（查看截图）

![在此处输入图像描述](../Images/bb09d9f3244c3e91c802d3e91ad39230.png)

![在此处输入图像描述](../Images/45a8b4d9d96959132af1adcab05a8e90.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-12-18T17:05:47.513

我的解决方案只是在拖动时按 Ctrl ......

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-04-12T03:39:52.867

我遇到了同样的问题，看了一遍，找不到解决问题的好方法。当我的控制器第一次生成时发生了什么，它们具有通用名称 FirstController。当我切换名称时，我没有切换自定义类区域中的值。修理：

1.  选择查看.xib
2.  在占位符下选择文件的所有者。这应该在屏幕的左侧，旁边有一个黄色立方体。
3.  选择实用程序菜单上的第三个选项（身份）
4.  将自定义类类更改为正确的控制器名称。

我知道这不是具体问题的问题，但我点击了这个问题几次，所以我想如果有人遇到同样的问题，它可能会有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-04T00:30:37.120

当我打开 Storyboard 和 .h 文件时，使用最新版本的 Xcode，我删除了`@end`（新的）.h 文件底部标签下方的最后一个空格。出于某种原因，我这样做后不会让我放置插座，谢谢Apple！

因此，要解决我的问题，我必须`@end`在 .h 文件中的标签下方留出额外的空间。

这就是解决我的问题的原因，我知道它不能回答这个特定的问题，但希望它对某人有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-29T20:38:03.193

我遇到了同样的问题，在我的情况下，身份检查器中的类名与源代码中的类名不匹配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-02T18:26:06.413

也有这个问题。XCode 9：确保在 Storyboard -> Identity Inspector ->`"Inherit from Module from Target"`中选中（或手动填写模块名称）

编辑：结果检查该框没有帮助 - 如果您删除 UIViewController 的类，然后手动输入它并按 Enter，在 XCode 9 中如果出现问题，复选框`"Inherit Module from Target"`将*不会*自动检查自身。经过反复试验，结果在课堂上（Swift 4），有一个`#if IDENTIFIER .... #endif`完全有效的方法，但是以某种方式搞砸了 Storyboard 连接。删除它后，在情节提要中键入类名自动选中该框，现在连接工作。是的另一个 XCode 9 错误。

# mysql - 如何选择得分最高的前 5 个用户名

> ID：11285995
> 
> 赞同：0
> 
> 时间：2012-07-01T22:06:57.843
> 
> 标签：mysql, sql

我有两张桌子，`username`和`score`。两者都使用`user_id`.

我想选择得分最高的前 5 个用户名。我正在尝试以下查询，但它不起作用：

```
SELECT `user_name`  
  FROM `username` 
 WHERE `user_id` = ( SELECT `u_id` 
                       FROM `score` 
                       ORDER BY `high_score` DESC 
                       LIMIT 5 ) 
```

运行上述查询时出现此错误：`#1242 - Subquery returns more than 1 row`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T22:08:54.007

在您的`WHERE`条款中，您试图断言一个值（左侧）与值列表（右侧）的一致性或相等性。

使用`IN`运算符来实现这一点，因为它将左值与任何右值进行比较。

以下是您更正的代码。

```
SELECT    `user_name`
    FROM  `username`
    WHERE `user_id` IN(
              SELECT        `u_id`
                  FROM      `score`
                  ORDER BY  `high_score` DESC
                  LIMIT 5
              ); 
```

作为一种风格，使用连接更清晰、更优雅，尤其是对于像这样的简单查询。

```
SELECT        `u`.`user_name`
    FROM      `username` AS `u`
    INNER JOIN `score` AS `s`
        ON     `u`.`user_id` = `s`.`u_id`
    ORDER BY  `s`.`high_score` DESC
    LIMIT      5; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T22:12:55.420

尝试这个：

```
SELECT `user_name`  
FROM `username`,`score` 
WHERE `user_id` = `u_id` 
ORDER BY `high_score` DESC 
LIMIT 5 
```

# mvvm-light - ViewModelBase.IsInDesignModeStatic 属性

> ID：11285996
> 
> 赞同：0
> 
> 时间：2012-07-01T22:07:01.463
> 
> 标签：mvvm-light

我确定这是一个 MVVM Light 新手错误，但我需要问一下。我正在使用 MVVM Light 框架和 Ninject for DI 创建一个 WPF4 应用程序。在 ViewModelLocator 构造函数中，我传入 ViewModelBase.IsInDesignModeStatic 值，因此我知道使用 DesignTime 数据或 RunTime 数据创建 DI。我认为当您在设计器（ VS2010 或 Blend ）中打开 MainWindow.xml 时，该属性将为 True 并且如果我设置了断点，构造函数将执行并在调试中中断。该应用程序运行良好并在正确运行时进行调试，但我从未获得设计时数据，因为该属性始终为假。在设计器中打开时，构造函数似乎也没有执行。我多次观看 Laurent 的视频，我知道这确实有效。有人可以告诉我他们认为我一定做错了什么。

奥格布拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:59:18.180

我迟到了，但在解决这类问题时试试这个。

您需要一个简单的属性来测试：在 ViewModel 中创建一个“Foo”属性（字符串）并将其绑定到 XAML（例如使用 TextBlock）。

在视图模型中

1.  在“Get”中，返回一个硬编码字符串（例如：“Step 1”。这将验证“绑定”是否有效。
2.  去掉“Get”硬代码，在构造函数的第一行放一个this.Foo =“Step 2”，这样会验证构造函数是否被调用
3.  在调用被“回调”的地方放置第三组，这将检查 GetData 是否正在返回
4.  在 if (error != null) 的 "else" 中，放第四组，以此类推...

示例：这是我的 MainViewModel 构造函数。

```
 public MainViewModel(IDataService dataService)
    {
        this.Foo = "Step 2";

        _dataService = dataService;
        _dataService.GetData(
            (item, error) =>
            {
                this.Foo = "Step 3";

                if (error != null)
                {
                    // Report error here
                    return;
                }
                else
                {
                    this.Foo = "Step 4";

                }

            });
    } 
```

我的最后一个错误是我已经将从 GetData 返回的数据分配到“if (error != null){...}”中！所以它从来没有被调用过。

从那时起，我像这样重写构造函数：

```
 public MainViewModel(IDataService dataService)
    {

        _dataService = dataService;
        _dataService.GetData(
            (item, error) =>
            {
                if (error == null)
                {
                    // Normal code here
                    return;
                }
                else
                {
                    // Report error here
                    return;
                }                    
            });
    } 
```

# css - 在单行中添加元素并在需要时沿 x 滚动

> ID：11285998
> 
> 赞同：0
> 
> 时间：2012-07-01T22:07:03.680
> 
> 标签：css

我正在尝试在 div 的单行中添加多个元素。但是，如果空间不足，则会溢出到第二行。我怎样才能强制它们排成一行？如有必要，我希望出现沿 x 轴的滚动条，但它们不应溢出到第二行。

目的是将其与 iPad 之类的触摸屏设备相结合，因此我获得了元素的水平滚动效果。

这是一个小提琴：http: [//jsfiddle.net/PW5Q5/8/](http://jsfiddle.net/PW5Q5/8/)

**的HTML**

```
<div id="wrapper">
    <div id="element"></div>
    <div id="element"></div>
    <div id="element"></div>
    <div id="element"></div>
</div> 
```

**CSS**

```
div#wrapper {
    height: 150px;
    width: 500px;
    border: 1px red solid;
    overflow-x: auto;
}
div#element {
    height: 100px;
    margin-top: 25px;
    width: 200px;
    border: 1px blue solid;
    display: inline-block;
    margin-left: 30px;
}
​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T22:16:11.687

使用`white-space: nowrap`- [http://jsfiddle.net/PW5Q5/14/](http://jsfiddle.net/PW5Q5/14/)

```
div#wrapper {
    height: 150px;
    width: auto;
    border: 1px red solid;
    overflow-x: auto;
    white-space:nowrap;
} 
```