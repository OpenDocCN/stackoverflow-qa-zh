# StackOverflow 问答 11855000-11855999

# objective-c - 如何优雅地转换幻灯片中的图像？

> ID：11855000
> 
> 赞同：0
> 
> 时间：2012-08-07T22:25:10.323
> 
> 标签：objective-c, ios, image, uiview

经过对这里的一些研究，我找到了在 iphone 应用程序中创建图像幻灯片的解决方案。一切正常，目前图像一个接一个地显示。

我的问题是，我可以让图像交叉溶解/淡化而不是仅仅出现，如果可以，我可以得到一些建议。

我的代码

.m

```
 }
 int topIndex = 0, prevTopIndex = 1; 
 - (void)viewDidLoad
 {

imagebottom = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,160,240)];
[self.view addSubview:imagebottom];

imagetop = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,160,240)];
[self.view addSubview:imagetop];

imageArray = [NSArray arrayWithObjects:
              [UIImage imageNamed:@"image1.png"],
              [UIImage imageNamed:@"image2.png"],
              [UIImage imageNamed:@"image3.png"],
              [UIImage imageNamed:@"ip2.png"],
              nil];

NSTimer *timer = [NSTimer timerWithTimeInterval:5.0
                                         target:self
                                       selector:@selector(onTimer)
                                       userInfo:nil
                                        repeats:YES];

[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];
[timer fire];

[super viewDidLoad];
}

-(void)onTimer{
if(topIndex %2 == 0){
    [UIView animateWithDuration:5.0 animations:^
     {
         imagebottom.alpha = 0.0;
     }];
    imagetop.image = [imageArray objectAtIndex:prevTopIndex];
    imagetop.image = [imageArray objectAtIndex:topIndex];
}else{
    [UIView animateWithDuration:5.0 animations:^
     {
         imagetop.alpha = 1.0;
     }];
    imagetop.image = [imageArray objectAtIndex:topIndex];
    imagebottom.image = [imageArray objectAtIndex:prevTopIndex];
}
prevTopIndex = topIndex;
if(topIndex == [imageArray count]-1){
    topIndex = 0;
}else{
    topIndex++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:24:27.920

你有很多选择。如果你有一个“容器”视图，你可以使一个新的 UIImageView 透明（alpha = 0），然后使用 UIView 动画块淡入和淡出另一个图像（或者在两者上保留 alpha = 1 并从你想要的任何一面。

例如，您有自己的主视图 self.view。您有一个 UIImageView *oldView，现在位于 rect (0,0,320,100) 并且您想在滑入 newView imageView 时将其向右滑动。首先将 newView 框架设置为 (-320,0,320,100) 然后 [self .view addSubview newView]。要为更改设置动画：

```
[UIView animateWithDuration:2 animations:^
  {
     oldView.frame = CGRectMake(320, 0, 320, 100);
     newView.frame = CGRectMake(0,0,320, 100);
  }
completion:^(BOOL finished)
  {
    [oldView removeFromSuperView];
  } ]; 
```

您还可以选择使用 UiView 的

```
+ (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^)(BOOL finished))completion 
```

这为您提供了更多/不同的选择（而且它的工作量也更少！）。例如，在第一个示例中使用相同的基本对象，但 newView 与 oldView 具有相同的框架：

```
transitionFromView:oldView toView:newView duration:2 options: UIViewAnimationOptionTransitionCrossDissolve completion:^(BOOL finished)) { /*whatever*/}]; 
```

# data-structures - 用于存储整数和整数范围的数据结构？

> ID：11855002
> 
> 赞同：3
> 
> 时间：2012-08-07T22:25:16.353
> 
> 标签：data-structures

是否有一个数据结构的正式名称，它是一个孤立整数和整数范围的列表？除了明显的“设置”。该类型的一个实例是，例如：“1,3,5,8-10,15,20-30,71,73”，其中“-”表示“介于两者之间的所有值”。我应该补充一点，出于性能原因，我不想将孤立点存储为我已经拥有的 Range 类的实例。我可能会有一个孤立点列表和一个单独的范围列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:27:24.390

请注意，可以将孤立的整数视为仅包含一个元素的范围；例如，5 是范围 [5, 5]。鉴于此，您所描述的内容听起来可以用[区间树](http://en.wikipedia.org/wiki/Interval_tree)建模，这是一种用于存储值范围并有效查询它们的数据结构。

希望这可以帮助！

# linux - 在 solaris 中获取昨天的日期

> ID：11855008
> 
> 赞同：6
> 
> 时间：2012-08-07T22:26:04.640
> 
> 标签：linux, shell, unix, date, sunos

我正在运行 SunOS。

```
bash-3.00$ uname -a
SunOS lvsaishdc3in0001 5.10 Generic_142901-02 i86pc i386 i86pc 
```

我需要找到`Yesterday's date in linux`从命令提示符传递的正确格式。当我在我的 shell 提示符下这样尝试时——

```
bash-3.00$ date --date='yesterday' '+%Y%m%d'
date: illegal option -- date=yesterday
usage:  date [-u] mmddHHMM[[cc]yy][.SS]
        date [-u] [+format]
        date -a [-]sss[.fff] 
```

我总是约会`illegal option`，为什么会这样？我做错了什么吗？

**更新：-**

```
bash-3.00$ date --version
date: illegal option -- version
usage:  date [-u] mmddHHMM[[cc]yy][.SS]
        date [-u] [+format]
        date -a [-]sss[.fff] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T22:52:44.960

试试下面这个。它应该工作

```
YESTERDAY=`TZ=GMT+24 date +%Y%m%d`; echo $YESTERDAY 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T22:55:01.957

试试这个：

```
DATE_STAMP=`TZ=GMT+24 date +%Y%m%d` 
```

其中 GMT 是时区，您可能需要根据与 GMT 的小时差来更改 24。或者您可以将 GMT 更改为对您来说更舒适的时区，例如 CST

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T22:57:34.450

正如 larsks 所建议的，您可以使用 perl：

```
perl -e 'use POSIX qw(strftime); print strftime "%a %b %e %H:%M:%S %Y",localtime(time()- 3600*24);' 
```

稍微修改自

[http://blog.rootshell.be/2006/05/04/solaris-yesterday-date/](http://blog.rootshell.be/2006/05/04/solaris-yesterday-date/)

要获取 YYYYMMDD 格式，请使用此

```
perl -e 'use POSIX qw(strftime); print strftime "%Y%m%d",localtime(time()- 3600*24);' 
```

此链接说明如何使用 strftime 格式化日期和时间

[http://perltraining.com.au/tips/2009-02-26.html](http://perltraining.com.au/tips/2009-02-26.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T12:36:03.163

一个纯粹的 bash 解决方案

```
#!/bin/bash                                                                                                                                                              

# get and split date                                                                                                                                                     
today=`date +%Y%m%d`
year=${today:0:4}
month=${today:4:2}
day=${today:6:2}

# avoid octal mismatch                                                                                                                                                   
if (( ${day:0:1} == 0 )); then day=${day:1:1}; fi
if (( ${month:0:1} == 0 )); then month=${month:1:1}; fi

# calc                                                                                                                                                                   
day=$((day-1))
if ((day==0)); then
    month=$((month-1))
    if ((month==0)); then
        year=$((year-1))
        month=12
    fi
    last_day_of_month=$((((62648012>>month*2&3)+28)+(month==2 && y%4==0)))
    day=$last_day_of_month
fi

# format result                                                                                                                                                          
if ((day<10)); then day="0"$day; fi
if ((month<10)); then month="0"$month; fi
yesterday="$year$month$day"
echo $yesterday 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-16T20:44:50.100

`TZ=$TZ+24 date +'%Y/%m/%d'`在 SunOS 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-26T11:24:34.143

在非 GMT 环境下玩 Solaris10，我得到了这个：

```
# date 
Fri Jul 26 13:09:38 CEST 2013 (OK)

# (TZ=CEST+24 date)
Thu Jul 25 11:09:38 CEST 2013 (ERR)

# (TZ=GMT+24 date)
Thu Jul 25 11:09:38 GMT 2013  (OK)

# (TZ=CEST+$((24-$((`date "+%H"`-`date -u "+%H"`)))) date)
Thu Jul 25 13:09:38 CEST 2013  (OK) 
```

如您所见，我有并且想要获得 CEST ，但是 TZ=CEST+24 给了我错误的 CEST 数据；GMT+24 给了我正确的数据，但无法使用。

为了得到正确的结果，我必须使用 GMT+22（错误的命令，正确的结果）或 CEST+22（错误的值，但最终正确的 TZ 的结果）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-20T05:45:00.913

*与任何其他解决方案相比， @olivecoder*提供的纯 bash 解决方案非常可靠，但有一个错误需要纠正。当这一天落在该月的 1 日时，脚本失败，日期显示为“ `last_day_of_month`”日值。*@olivecoder*错过了**$** in `day=last_day_of_month`，应该是

```
day=$last_day_of_month; 
```

修正后效果非常好。

使用**Timezone -24**在使用时会遇到一些基于时间的问题。在某些情况下，它会持续到前天。所以我认为它不可靠。

# opengl - OpenTK/OpenGL 局部轴旋转

> ID：11855009
> 
> 赞同：1
> 
> 时间：2012-08-07T22:26:13.920
> 
> 标签：opengl, rotation, opentk

这是一个场景：

对象描述为：

*   位置
*   规模
*   回转

首先，我从 OpenGL 应用模型视图（相机），然后使用以下矩阵进行平移和旋转：

```
 private Matrix4d AnglesToMatrix(Vector3d angles)
    {
        Vector3d left = Vector3d.UnitX;
        Vector3d up = Vector3d.UnitY;
        Vector3d forward = Vector3d.UnitZ;

        AnglesToAxes(angles, ref left, ref up, ref forward);

        return new Matrix4d(
            new Vector4d(left.X, up.X, forward.X, 0),
            new Vector4d(left.Y, up.Y, forward.Y, 0),
            new Vector4d(left.Z, up.Z, forward.Z, 0),
            new Vector4d(0, 0, 0, 1));
    }

    private void AnglesToAxes(Vector3d angles, ref Vector3d left, ref Vector3d up, ref Vector3d forward)
    {
        const double DEG2RAD = 0.0174532925;
        double sx, sy, sz, cx, cy, cz, theta;

        // rotation angle about X-axis (pitch)
        theta = angles.X * DEG2RAD;
        sx = Math.Sin(theta);
        cx = Math.Cos(theta);

        // rotation angle about Y-axis (yaw)
        theta = angles.Y * DEG2RAD;
        sy = Math.Sin(theta);
        cy = Math.Cos(theta);

        // rotation angle about Z-axis (roll)
        theta = angles.Z * DEG2RAD;
        sz = Math.Sin(theta);
        cz = Math.Cos(theta);

        // determine left axis
        left.X = cy * cz;
        left.Y = sx * sy * cz + cx * sz;
        left.Z = -cx * sy * cz + sx * sz;

        // determine up axis
        up.X = -cy * sz;
        up.Y = -sx * sy * sz + cx * cz;
        up.Z = cx * sy * sz + sx * cz;

        // determine forward axis
        forward.X = sy;
        forward.Y = -sx * cy;
        forward.Z = cx * cy;
    } 
```

在，最后我应用规模。除了基于全局轴的旋转之外，一切看起来都很棒。

如何使用局部轴旋转对象？

使问题准确。当我在 Y 轴上将对象旋转 45 度时，X 和 Z 轴随之旋转，然后应用另一个旋转使用新轴。

为了避免以减号的形式受到惩罚......我阅读了所有与 3D 空间中的旋转相关的主题，但没有一个给我解决方案。上面的代码是应用各种尝试的结果，但它产生的结果与以下相同：

```
 GL.Rotate(Rotation.X, Vector3d.UnitX);
        GL.Rotate(Rotation.Y, Vector3d.UnitY);
        GL.Rotate(Rotation.Z, Vector3d.UnitZ); 
```

**编辑：** 事实证明，我们的设计师对 3D 对象的旋转抱有不好的期望，但问题仍然存在。至于所使用的语言，我们用 C# 编写，但如果你用 C 或 C++ 向我指出一个解决方案，我会处理它：D

我们目前使用（订单可配置）：

```
GL.Rotate(Rotation.X, Vector3d.UnitX);
GL.Rotate(Rotation.Y, Vector3d.UnitY);
GL.Rotate(Rotation.Z, Vector3d.UnitZ); 
```

但这会围绕世界轴旋转对象。我们想要的是使用像这样的局部对象轴，假设我们有 XYZ 轴旋转：

```
GL.Rotate(Rotation.X, Vector3d.UnitX);
GL.Rotate(Rotation.Y, newYaxis);
GL.Rotate(Rotation.Z, newZaxis); 
```

或者假设我们有 YXZ 轴旋转

```
GL.Rotate(Rotation.Y, Vector3d.UnitY);
GL.Rotate(Rotation.X, newXaxis);
GL.Rotate(Rotation.Z, newZaxis); 
```

最有效的方法是预先计算旋转矩阵，但我仍然想知道如何在旋转后确定新轴。（看来我必须重新阅读三角学书）。如果有人有可以非常快速地计算旋转矩阵的解决方案，我将不胜感激。现在我将尝试在每次传递中使用三角函数计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:46:01.577

我对opentk不是很好，但是对于C风格的opengl，这是预乘和后乘之间的区别。预乘发生在世界坐标空间中，后乘发生在局部坐标空间中。请参阅[http://www.opengl.org/archives/resources/faq/technical/transformations.htm](http://www.opengl.org/archives/resources/faq/technical/transformations.htm)第 9.070 节。

如果您可以获得实际矩阵的句柄来执行矩阵乘法，那么这应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:47:25.457

你能准确地说出你在这里设想的是什么样的情况吗？

我不相信你的要求有任何意义。对于任何旋转，您可以在另一个操作（全局轴）之前应用它，或者在另一个操作（局部轴）之后应用它。因此，如果要应用三个旋转，则必须先旋转一个轴，然后再旋转另一个轴，然后再旋转另一个轴。

你说你想应用三个旋转，但你希望每个旋转发生在其他两个之前。他们不可能都是第一。

如果您对您尝试实现的旋转类型进行更多描述（首选图像），也许我们可以消除这种误解，但是您目前所问的对我来说在物理现实中没有意义。

# matlab - plot3 基于值的线条颜色

> ID：11855011
> 
> 赞同：8
> 
> 时间：2012-08-07T22:26:20.727
> 
> 标签：matlab, colors, plot

我有一组包含 3d 笛卡尔点（x、y、z）和时间戳的数据。

我想将此数据绘制为 3d 空间中的连接线，线条颜色会根据时间戳值而变化。

实际上，我想在颜色栏中显示时差。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T23:13:53.410

考虑以下 3D 点随时间沿螺旋形路径移动的示例：

```
%# data
t = linspace(0,8*pi,200);
x = 20*t; y = cos(t); z = sin(t);

%# plot 3D line
plot3(x,y,z)
axis tight, grid on, view(35,40) 
```

现在，如果你想画一条多色的线，天真的解决方案是编写一个 for 循环，将每个小段绘制为一条单独的线，每条线都有不同的颜色。这是因为单个线条对象只能有一种颜色。

更好的方法是使用表面图形对象：

```
c = 1:numel(t);      %# colors
h = surface([x(:), x(:)], [y(:), y(:)], [z(:), z(:)], ...
    [c(:), c(:)], 'EdgeColor','flat', 'FaceColor','none');
colormap( jet(numel(t)) ) 
```

结果：

![截屏](../Images/fa414d331450efe097ea9eab6027da13.png)

# c# - 将 7 天添加到 SPField.DateTime 列表字段

> ID：11855012
> 
> 赞同：0
> 
> 时间：2012-08-07T22:26:53.173
> 
> 标签：c#, sharepoint, datetime, moss, spfield

我有一个名为 ArchiveDate 的 SharePoint 列表字段。

在 C# 函数中，我正在遍历列表并找到有问题的项目。

```
foreach (SPListItem fListItem in fList.Items)     
{      
   foreach (SPField field in fList.Fields)      
    { 
```

如果`fListItem[field.Id]`该列项目中包含日期。如何使用 C# 将 7 天添加到该日期？

我知道我可以将字段的值设置为今天，如下所示：

```
 DateTime dt = DateTime.Now; 
         tListItem["Archive Date"] = dt;
         tListItem.Update(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:20:01.587

```
DateTime dt = DateTime.Now.AddDays(7); 
```

或者

```
fListItem[field.Id] = ((DateTime)fListItem[field.Id]).AddDays(7); 
```

# php - 如何在 PHP 中检测和去除 UTF-8 字符

> ID：11855013
> 
> 赞同：0
> 
> 时间：2012-08-07T22:26:52.930
> 
> 标签：php, utf-8

我正在生成 CSV 文件。有时，数据源会传递带有重音符号等的字符……我想去掉这些字符。是否有一种相当直接的方法来检测和去除 UTF-8 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:31:48.567

如果您确定将 UTF-8 作为输入，请使用 iconv 将值转换为您在输出中使用的编码 - 检测 UTF-8 字符不是故障安全的（因为这些值是有效的 iso-8859 -1 个字符（或所有 8 位编码，真的）。

如果您只想使用常规的 ascii 值集（字节值 0 - 127），可以让 iconv 转换为 'ascii' 编码并音译：

```
iconv("utf-8", "ascii//TRANSLIT", "Hei og hå") 
```

将导致

```
hei og ha 
```

被退回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:31:18.317

```
utf8_decode($string) 
```

然而，这可能会混淆一些在 utf-8 中可用但在 iso88591 中不可用的字符

# java - SAXBuilder jdom 给出异常

> ID：11855014
> 
> 赞同：0
> 
> 时间：2012-08-07T22:26:56.320
> 
> 标签：java, xml, sax, jdom

这是代码：

```
Representation representation = representItem(exp.getItem(),MediaType.TEXT_XML);

            Document doc = new SAXBuilder().build(representation.getStream());
            XPath xpath = XPath.newInstance("/xnat:MRSession/xnat:scan/xnat:file"); 
```

当实例化 SAXBuilder 时，这会给我一个 InvocationTargetException 错误。

有人以前有这个吗？似乎这应该工作。

```
2012-08-07 17:17:58,441 [http-8080-1] ERROR org.restlet.XNATVirtualHost.XNATApplication - Unhandled exception or error intercepted
java.lang.NoClassDefFoundError: org/jdom/input/SAXBuilder
    at org.nrg.xnat.restlet.actions.SessionCopy.<init>(SessionCopy.java:98)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:55:54.753

我要在这里冒个险，说虽然[SAXBuilder](http://jdom.org)可能在您的构建路径中，但它不在您的运行路径中。

# image - Windows Phone，在异步回调上设置图像源不起作用？

> ID：11855015
> 
> 赞同：1
> 
> 时间：2012-08-07T22:27:10.677
> 
> 标签：image, asynchronous, windows-phone

我正在从 Bing 获取图像以显示在我的应用程序中。我按照 Bing 的指示成功检索了图像的 URL，但由于某种原因，模拟器不会显示它们！这就是我所拥有的

```
var bingContainer = new Bing.BingSearchContainer(new Uri("https://api.datamarket.azure.com/Bing/Search/"));

            var accountKey = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx";
            bingContainer.Credentials = new NetworkCredential(accountKey, accountKey);

            var imageQuery = bingContainer.Image("porsche", null, null, null, null, null, "Size:Medium");

            imageQuery.BeginExecute(new AsyncCallback(this.ImageResultLoadedCallback), imageQuery); 
```

然后，我得到我的图像并尝试在此处设置它们：

```
var imageQuery = (DataServiceQuery<Bing.ImageResult>)ar.AsyncState;

        var enumerableImages = imageQuery.EndExecute(ar);
        var imagesList = enumerableImages.ToList();

        List<String> imList = new List<String>();

        while (imList.Count != 3)
        {
            Bing.ImageResult tr = imagesList.First<Bing.ImageResult>();
            if (tr.ContentType == "image/jpeg")
            {
                imList.Add(tr.MediaUrl);
            }
            imagesList.RemoveAt(0);
        }

        image1.Source = new BitmapImage(new Uri(@imList[0]));
        image2.Source = new BitmapImage(new Uri(@imList[1]));
        image3.Source = new BitmapImage(new Uri(@imList[2])); 
```

当我调试时，该过程似乎只是在我设置源的最后三行停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:55:57.543

好吧，经过两天的挫折，我发现您无法从异步回调中访问 UI 线程。VS 没有给出任何错误，但图像没有显示。异步回调与主 UI 线程一起运行，因此它无法访问或更改 UI 中的元素。简单的解决方法只涉及包装访问 UI 的代码行，如下所示：

```
Dispatcher.BeginInvoke(() =>
        {
            image1.Source = new BitmapImage(new Uri(@imList[0]));
            image2.Source = new BitmapImage(new Uri(@imList[1]));
            image3.Source = new BitmapImage(new Uri(@imList[2])); 
        }); 
```

现在可以了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:29:32.183

您确定 MediaUrl 正在将正确的网址返回到图像吗？如果您对 imList 列表中的图像使用一些硬编码的 url，图像会在 image1、image2 和 image3 中正确加载吗？我要说的是，数据的质量可能不正确。也就是说，尽管您的查询执行良好，但 MediaURL 不包含格式正确的 URL。

另外，调试器停止时会出现什么异常？

# c++ - C++ 继承向下转型

> ID：11855018
> 
> 赞同：21
> 
> 时间：2012-08-07T22:27:26.197
> 
> 标签：c++, inheritance, casting, downcast

我的基类如下：

```
class point    //concrete class
{
 ...    //implementation
}

class subpoint : public point  //concrete class
{
...     //implementation
} 
```

如何从点对象转换为子点对象？我已经尝试了以下所有三种方法：

```
point a;
subpoint* b = dynamic_cast<subpoint*>(&a);
subpoint* b = (subpoint*)a;
subpoint b = (subpoint)a; 
```

这些演员阵容有什么问题？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-07T22:51:00.907

> 如何从点对象转换为子点对象？

你不能；除非要么`point`有一个转换运算符，要么`subpoint`有一个转换构造函数，在这种情况下，对象类型可以在不需要强制转换的情况下进行转换。

如果引用的对象实际上是 type ，则可以从`point` *引用*（或指针）转换为`subpoint` *引用*`subpoint`（或指针） ：

```
subpoint s;

point & a = s;
subpoint & b1 = static_cast<subpoint&>(a);
subpoint & b2 = dynamic_cast<subpoint&>(a); 
```

第一个 ( `static_cast`) 更危险；没有检查转换是否有效，因此如果`a`不引用 a `subpoint`，则 using`b1`将具有未定义的行为。

第二个 ( `dynamic_cast`) 更安全，但只有在`point`多态时才有效（即，如果它具有虚函数）。如果`a`引用了不兼容类型的对象，则会抛出异常。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T03:15:11.350

动态转换的目的是“在运行时检查对象是否属于层次结构中的某种类型”。所以现在让我们看看你有什么：

1.  你有一个点对象。不是子点。
2.  如果对象是子点，您正在询问动态转换。它不是。
3.  因为它不是子点，所以 dynamic_cast 失败 - 它告诉您该对象不是您尝试将其转换为的类型。

相比之下，这会奏效：

```
subpoint c;
point *a = &c;
subpoint* b = dynamic_cast<subpoint*>(&a);
subpoint* b = (subpoint*)a; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T22:36:51.730

总的来说，这是行不通的，因为`point`不是`subpoint`; 只有反过来才是正确的。但是，还有其他问题。

为了：

* * *

```
subpoint* b = dynamic_cast<subpoint*>(&a); 
```

`dynamic_cast`仅适用于多态类型，即声明至少一个虚函数的类型。我的猜测是它`point`没有虚函数，这意味着它不能与`dynamic_cast`.

* * *

```
subpoint* b = (subpoint*)a; 
```

要使此强制转换起作用，`point`需要将转换运算符声明为`subpoint *`，例如`point::operator subpoint *()`。

* * *

```
subpoint b = (subpoint)a; 
```

要使此强制转换起作用，point 需要声明一个转换运算符 to`subpoint` **或** `subpoint`需要一个构造函数，该构造函数接受可从 转换的参数`point`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-07T22:38:39.467

对于第一个示例，`dynamic_cast`仅当基类中至少有一个虚拟方法时才有效。如果对象实际上不是您要转换的类型，它将导致 NULL。

对于第二个示例，您需要`&a`代替`a`，但是一旦您修复了该问题，您将获得未定义的行为，因为对象类型错误。

第三个示例需要一个`operator subpoint()`方法 in`point`在创建副本时进行转换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T22:28:53.663

`a`不能做成一个`subpoint`。该实施不存在。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T22:28:58.603

> 这些演员阵容有什么问题？

您尝试执行它们的事实。A`point`不是 a `subpoint`，如果它有效，我会感到惊讶。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-14T01:44:18.807

我知道这是一个老问题（近十年前），但我最近遇到了同样的问题。

我不确定原始发帖人的意图是什么，但在某些情况下，您可能希望拥有一个从中派生子类的基类，而这些子类仅提供行为不同的方法，并使用相同的基类数据，而不添加任何自己的数据元素。

如果您需要这样做（出于某种原因），并且希望能够将基/父对象向下转换为最初被实例化为父对象的子对象，那么您**不想**使用虚拟方法，因为它们会起作用你，你将永远被迫使用被实例化的类的虚方法，并且没有多少转换会调用子方法。

So, this can certainly be done. It's just not considered to be "safe". Also, you cannot use `dynamic_cast` here, it must be a `static_cast`.

# vba - 在 VBA 自动筛选数组错误中编辑宏

> ID：11855020
> 
> 赞同：0
> 
> 时间：2012-08-07T22:27:28.110
> 
> 标签：vba, excel, excel-2010

我正在编辑一个包含 2500 个条目的文档，需要应用自动筛选，这是我第一次尝试编辑宏代码，请耐心等待。

我使用记录来创建宏，当我去编辑它的一部分时，我在我编辑的代码部分之外得到了“编译错误：预期：表达式”。'...' 是更多条目。

```
ActiveSheet.Range("$A$1:$C$2500").AutoFilter Field := 2, Criteria1 := Array( _
    "#N/A","3K Technologies, LLC","ABN","Accenture","AIMCo",...,"ITAT Partners" _
    ,"IT-Beratung Gunnar Hofmann","John Hancock","John Hancock Financial Network", _  
End Sub 
```

并非所有条目都显示出来，除了“End Sub”之外的所有代码都是红色的。

似乎由于我记录了宏，而不是编写宏，所有名称值都被存储并导致了问题。如何将自动过滤器应用于 VBA 中的大量单元格？现有的公司名称是否会导致溢出？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:44:13.913

如果您只想应用自动过滤器，您可以使用：

```
ActiveSheet.Range("$A$1:$C$2500").AutoFilter 
```

您的所有其余代码都是您记录的所有设置，例如每列的每个复选框。

如果您在应用过滤器后尝试编辑该内容中的默认选择设置，那么您在哪个部分特别有问题？

需要注意的一件事是，Excel 的 VBA 只能将同一行代码继续向下大约 24 次，`_`最后带有符号。如果太多，Excel 将无法记录过滤器的复选框选择，因此如果实际上这是您遇到的特定问题，则必须手动编写它们，然后遵循以下设置：

```
With ActiveSheet.Range("$A$1:$C$2500")
    '- Use only one line break with a long list off to the right of what you want selected
    '- it may look ugly in code, but with Excel's limit of 24 lines it's necissary in this case.
    .AutoFilter Field:=2, _
        Criteria1:=Array("#N/A", "3K Technologies, LLC", "ABN", "Accenture", "AIMCo", "ITAT Partners", "IT-Beratung Gunnar Hofmann", "John Hancock", "John Hancock Financial Network")
    '- Here you can add settings for additional columns like this:
    '.AutoFilter Field:=1, _
    '    Criteria1:=Array("#N/A", "3K Technologies, LLC", "ABN", "Accenture", "AIMCo", "ITAT Partners", "IT-Beratung Gunnar Hofmann", "John Hancock", "John Hancock Financial Network")
End With 
```

# database - mySQL 系统对从数据库中读取的分数和选择两个主题进行评分

> ID：11855021
> 
> 赞同：0
> 
> 时间：2012-08-07T22:27:29.663
> 
> 标签：database

试图开发一个系统来为学生分配成绩。系统从我的数据库中读取分数，并在获得平均分数后分配一个等级。使用 case 语句，不断抛出错误。所以我尝试了 if 语句，但它给了我问题。有人知道更好的方法吗？

```
delimiter //

create function assign_grade(v_idnumber int)
returns varchar(50) deterministic
begin

  declare v_marks1 varchar(50);
  declare v_marks2 varchar(20);
  declare phyz varchar(50);
  declare Chem varchar(50);
  declare grade varchar(50);

  set phyz = (select Physics from marks where Sid=v_idnumber);
  set Chem=(select Chemistry from marks where Sid=v_idnumber);

  if(phyz>Chem)
  begin
   set v_marks1=(select(English+Kisw+Math+Physics+Bio+Business+Geog+Cre)/8 from marks where Sid=v_idnumber);

   if (v_marks1>= 80 && v_marks1<=100) then
            set grade ='A'; 
                else if (v_marks1>=60&& v_marks1<=79) 
                    set grade='B';
                else if (v_marks1>=40&& v_marks1<=59)
                    set grade ='C';
                else if (v_marks1>=30&& v_marks1<=49)
                    set grade ='D';
                else if (v_marks1>=0&& v_marks1<=29)
                   set grade ='E';  
                else
                    set grade = 'Failed Miserably';

             end if
             end if
             end if
             end if
             end if

             return grade;

    end;

     if(Chem>phyz)
           begin
            set v_marks2=(select(English+Kisw+Math+Chemistry+Bio+Business+Geog+Cre)/8 from marks where Sid=v_idnumber);
       if (v_marks2>= 80 && v_marks2<=100) then
            set grade ='A'; 
                else if (v_marks2>=60&& v_marks2<=79) 
                    set grade='B';
                else if (v_marks2=40&& v_marks2<=59)
                    set grade ='C';
                else if (v_marks2>=30&& v_marks2<=49)
                    set grade ='D';
                else if (v_marks2>=0&& v_marks2<=29)
                   set grade ='E';  
                else
                    set grade = 'Failed Miserably';

             end if
             end if
             end if
             end if
             end if

             end;

             return grade;

  // 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:49:18.170

首先，您只想优化您的功能

（我不是您的语言专家（我认为是 Vb 对吗？））：

```
set phyz = (select Physics from marks where Sid=v_idnumber);
set Chem = (select Chemistry from marks where Sid=v_idnumber);

if(phyz>Chem)
    set v_marks=(select(English+Kisw+Math+Physics+Bio+Business+Geog+Cre)/8 from marks where Sid=v_idnumber);
else /*if (Chem > phyz) I comment the "if" for treatment where chem > phyz and Chem == phyz */
    set v_marks=(select(English+Kisw+Math+Chemistry+Bio+Business+Geog+Cre)/8 from marks where Sid=v_idnumber);
end if

/* You have just one same treatment for all types (phyz > chem ; chem >phyz, etc...) 
   When you optimize you code, verify your code isn't duplicate :-) 
*/ 

if (v_marks>= 80 && v_marks<=100)
    set grade = 'A'; 
else if (v_marks>=60 && v_marks<=79) 
    set grade = 'B';
else if (v_marks>=40 && v_marks<=59)
    set grade = 'C';
else if (v_marks>=30 && v_marks<=49)
    set grade = 'D';
else if (v_marks>=0 && v_marks<=29)
    set grade = 'E';  
else
    set grade = 'Failed Miserably';
end if

return grade; 
```

# javascript - 整数 + 2x 单选按钮设置输入 --> 输出

> ID：11855026
> 
> 赞同：0
> 
> 时间：2012-08-07T22:27:55.103
> 
> 标签：javascript, input, radio-button

我有一个包含三个变量部分的表单：第一部分是一个文本字段，要求用户输入一个数字让我们调用这个 user_number；接下来是一组单选按钮。其中三个，确定输出的“类型”变量。我们称之为banner_type。最后，还有另一组单选按钮，这次是 16 个。这些决定了输出的'style'变量，我们可以将它命名为banner_style。
为了让脚本运行，有一个名为 Generate 的按钮。它不是提交按钮。最后，输出区域是一个 div，它将显示正确的结果。

现在，这个表单的目的是允许用户选择某种类型的图像，一种可以改变类型和风格的图像，并为不同的用户输出不同的信息，因此是三个变量。

如果有帮助，这应该是为了简化 Folding@Home 签名横幅的选择。编码如下：

```
<form>
User Number: <input type="text" id="user_number" /><br /><br />
Team & User Info: <input type="radio" name="banner_type" value="type0" /><br /><br />
Team Info Only: <input type="radio" name="banner_type" value="type1" /><br /><br />
User Info Only: <input type="radio" name="banner_type" value="type2" /><br /><br />
1: <input type="radio" name="banner_style" value="1" /><br /><br />
2: <input type="radio" name="banner_style" value="2" /><br /><br />
3: <input type="radio" name="banner_style" value="3" /><br /><br />
4: <input type="radio" name="banner_style" value="4" /><br /><br />
5: <input type="radio" name="banner_style" value="5" /><br /><br />
6: <input type="radio" name="banner_style" value="6" /><br /><br />
7: <input type="radio" name="banner_style" value="7" /><br /><br />
8: <input type="radio" name="banner_style" value="8" /><br /><br />
9: <input type="radio" name="banner_style" value="9" /><br /><br />
10: <input type="radio" name="banner_style" value="10" /><br /><br />
11: <input type="radio" name="banner_style" value="11" /><br /><br />
12: <input type="radio" name="banner_style" value="12" /><br /><br />
13: <input type="radio" name="banner_style" value="13" /><br /><br />
14: <input type="radio" name="banner_style" value="14" /><br /><br />
15: <input type="radio" name="banner_style" value="15" /><br /><br />
16: <input type="radio" name="banner_style" value="16" /><br /><br />
<input type="button" id="Generate" value="Generate" />
</form>

Image URL: <div id="URL" style=display:inline;></div>

<script type="text/javascript">
document.getElementById('Generate').addEventListener('click',function() {
*SOMETHING NEEDS TO GO HERE*
document.getElementById('URL').innerHTML = 'http://folding.extremeoverclocking.com/sigs/sigimage.php?u=' + user_number + banner_style + banner_type;
});
</script> 
```

所以我的最终目标是拥有基本图像地址，如脚本末尾所示，然后是用户编号，它应该是用户在文本字段中输入的任何内容的精确副本，然后是横幅样式，看起来像这样的东西：

```
&c1=000000&c2=000000&c3=000000&c4=000000&c5=000000 
```

对于每个不同的banner_style，这将是不同的。每个值代表图像本身上不同元素的十六进制颜色代码。最后是横幅类型，看起来像这样：

```
&bg=0 
```

这将是 0、1 或 2。

在这一点上，我应该明确一点，我几乎从不使用 javascript，所以我需要向我解释清楚的一切，所以我也可以从中学习。此外，如果可能的话，像这样的 id 是纯 JS ......没有 jQuery 的东西，或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:50:47.610

天哪，没有 jQuery？

让我先给你 jQuery 版本，因为它更容易。

```
// load when page is done loading
$(function(){

  // jQuery is just like CSS in that you use selectors to target a node element
  $("#Generate").on("click", function(){

    // get form values for each style we need
    var user = $('#user_number').val();
    var style = $('form input[name=banner_type]:checked').val();
    var type = $('form input[name=banner_style]:checked').val();

    // set image variable by concatenating the values together
    var image = "http://folding.extremeoverclocking.com/sigs/sigimage.php?u=" + user + style + type;

    // insert image path using the image variable set above into element with id of "URL"
    $("#URL").html( image );
  });

}); // close jquery on page load 
```

现在在纯 JavaScript 中......这里有。

```
// have to iterate each group to obtain the value
// function has borrowed from http://www.somacon.com/p143.php/
function getCheckedValue(radioObj) {
if(!radioObj)
    return "";
var radioLength = radioObj.length;
if(radioLength == undefined)
    if(radioObj.checked)
        return radioObj.value;
    else
        return "";
for(var i = 0; i < radioLength; i++) {
    if(radioObj[i].checked) {
        return radioObj[i].value;
    }
}
return "";
}

var user = document.getElementById('user_number').value;
var style = getCheckedValue('banner_style');
var type = getCheckedValue('banner_type');

// set image variable
var image = "http://folding.extremeoverclocking.com/sigs/sigimage.php?u=" + user + style + type;

// insert image into element node with ID of "URL"
document.getElementById("URL").innerHTML = image; 
```

# perl - 为什么要在 Learning Perl 第 6 版中的 &max 子例程示例中移动数组。4

> ID：11855034
> 
> 赞同：2
> 
> 时间：2012-08-07T22:28:24.080
> 
> 标签：perl

为什么数组在子程序的开头移位？

```
sub max {
    my($max_so_far) = shift @_;
    foreach (@_) {
        if ($_ > $max_so_far) {
           $max_so_far = $_;
        }
    }
    $max_so_far;
} 
```

只是给 $max_so_far 一个初始值吗？该程序运行完全相同

```
 my($max_so_far) = undef; 
```

是否有特定的理由将数组转移到开头？（我问是因为我花了大约 10 分钟试图弄清楚为什么这种转变对子程序至关重要。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T22:35:19.350

如果您初始化`$max_so_far`为`undef`. 如果所有输入值都是负数怎么办？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T23:52:44.387

它是初始化函数的返回值和函数的其余部分可以比较的东西。

考虑一些场景并跟踪代码。例如，假设它是这样调用的：

```
my $max = max(1,2,3); 
```

在 max 中，第一行将 $max_so_far 设置为 1，@_ 变为 (2,3)。现在，当我们运行 foreach 循环时，我们有了一个初始值并避免了 undef 错误。它首先将 $max_so_far 与 2 进行比较，然后将其更新为 2，依此类推。

另一个例子是如果 max 像这样调用：

```
my $max = max(1); 
```

在 max 内部，第一行将 $max_so_far 设置为 1，@_ 变为 ()。当我们到达 foreach 循环时，它没有任何东西可以迭代，只返回初始值 $max_so_far。

另一个例子是如果 max 像这样调用：

```
my $max = max(); 
```

在 max 内部，第一行将 $max_so_far 设置为 undef，因为 @_ 为空。在 foreach 循环中没有可迭代的内容，因此该函数只返回 undef。

# c++ - 重载 operator[] 以从 1 开始和性能开销

> ID：11855036
> 
> 赞同：6
> 
> 时间：2012-08-07T22:28:32.500
> 
> 标签：c++, performance

我正在做一些 C++ 计算力学（别担心，这里不需要物理知识），有些事情真的让我很困扰。

假设我想表示一个 3D 数学向量（与 std::vector 无关）：

```
class Vector {
    public:
        Vector(double x=0., double y=0., double z=0.) { 
            coordinates[0] = x;
            coordinates[1] = y;
            coordinates[2] = z;
        }
    private:
        double coordinates[3];
}; 
```

到目前为止，一切都很好。现在我可以重载 operator[] 来提取坐标：

```
double& Vector::operator[](int i) {
     return coordinates[i] ;
} 
```

所以我可以输入：

```
Vector V; 

… //complex computation with V

double x1 = V[0];
V[1] = coord2; 
```

问题是，从 0 开始索引在这里并不自然。我的意思是，在对数组进行排序时，我不介意，但事实是，每篇论文、书籍或任何东西中的常规符号总是以 1 开头的坐标。这似乎是一个小问题，但事实是在公式中，它总是需要仔细考虑才能理解我们正在做什么。当然，这对于矩阵来说是最糟糕的。

一个明显的解决方案是稍微不同的重载：

```
double& Vector::operator[](int i) {
     return coordinates[i-1] ;
} 
```

所以我可以输入

```
double x1 = V[1];
V[2] = coord2; 
```

除了一件事之外，它似乎很完美：这个 i-1 减法似乎是一个小开销的好候选。你会说很小，但我正在做计算力学，所以这通常是我们负担不起的。

所以现在（最后）我的问题：你认为编译器可以优化这个，还是有办法让它优化？（模板、宏、指针或参考组合...）

逻辑上，在

```
double xi = V[i]; 
```

括号之间的整数大部分时间都是文字（除了在 3 次迭代 for 循环中），内联 operator[] 应该使它成为可能，对吧？

（对不起这个冗长的问题）

编辑：

感谢您的所有评论和回答

我有点不同意人们告诉我我们习惯于 0-indexed 向量。从面向对象的角度来看，我认为没有理由将数学向量设为 0 索引，因为它是使用 0 索引数组实现的。我们不应该关心底层实现。现在，假设我不关心性能并使用映射来实现 Vector 类。然后我会发现将'1'与'1st'坐标映射是很自然的。

也就是说，我尝试了 1-indexed 向量和矩阵，并且在编写了一些代码之后，我发现每次使用数组时它都不能很好地交互。我认为 Vector 和容器 (std::array,std::vector...) 不会经常交互（意思是在彼此之间传输数据），但似乎我错了。

现在我有一个我认为争议较小的解决方案（请给我你的意见）：每次我在某些物理环境中使用 Vector 时，我都会考虑使用 enum ：

```
enum Coord {
    x = 0,
    y = 1,
    z = 2
};
Vector V;
V[x] = 1; 
```

我看到的唯一缺点是这些 x、y 和 z 可以在没有警告的情况下重新定义......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T22:45:42.327

这个应该通过查看反汇编来测量或验证，但我的猜测是：getter 函数很小，它的参数是恒定的。编译器很有可能会内联函数并对减法进行常量折叠。在这种情况下，运行时成本将为零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T22:39:54.510

为什么不试试这个：

```
class Vector {
    public:
        Vector(double x=0., double y=0., double z=0.) { 
            coordinates[1] = x;
            coordinates[2] = y;
            coordinates[3] = z;
        }
    private:
        double coordinates[4];
}; 
```

如果您没有以数百万的数量实例化您的对象，那么内存腰围可能是负担得起的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T22:55:32.900

您是否真的对其进行了分析或检查了生成的代码？这就是这个问题的答案。

如果 operator[] 实现是可见的，那么这很可能被优化为具有零开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T00:02:08.297

如果没有基准测试，您就无法对性能发表任何客观的评价。在 x86 上，可以使用相对寻址来编译这种减法，这非常便宜。如果`operator[]`是内联的，那么开销为零——您可以使用`inline`或使用特定于编译器的指令（例如 GCC 的`__attribute__((always_inline))`.

如果您必须保证它，并且偏移量是编译时常量，那么使用模板就是要走的路：

```
template<size_t I>
double& Vector::get() {
    return coordinates[i - 1];
}

double x = v.get<1>(); 
```

出于所有实际目的，由于恒定折叠，这保证了零开销。您还可以使用命名访问器：

```
double Vector::x() const { return coordinates[0]; }
double Vector::y() const { return coordinates[1]; }
double Vector::z() const { return coordinates[2]; }

double& Vector::x() { return coordinates[0]; }
double& Vector::y() { return coordinates[1]; }
double& Vector::z() { return coordinates[2]; } 
```

对于循环，迭代器：

```
const double* Vector::begin() const { return coordinates; }
const double* Vector::end() const { return coordinates + 3; }

double* Vector::begin() { return coordinates; }
double* Vector::end() { return coordinates + 3; }

// (x, y, z) -> (x + 1, y + 1, z + 1)
for (auto& i : v) ++i; 
```

然而，像这里的许多其他人一样，我不同意你问题的前提。你真的应该简单地使用基于 0 的索引，因为它在 C++ 领域更自然。该语言已经非常复杂，对于将来维护您的代码的人来说，您不需要进一步复杂化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T23:09:33.870

我建议您在类的标题 (.h) 中定义它。如果您在 .cpp 中定义它，那么编译器将无法优化。此外，您的索引不应该是可以有负值的“int”......使其成为 size_t：

```
class Vector {

    // ...

public:
    double& operator[](const size_t i) {
        return coordinates[i-1] ;
    }

}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T23:00:28.967

认真地，对这三种方式进行基准测试（即，将减法和 double[4] 方法与仅在调用者中使用从零开始的索引进行比较）。

在某些缓存架构上强制 16 字节对齐完全有可能您会获得巨大的胜利，同样有可能在某些编译器/指令集/代码路径组合上，减法实际上是免费的。

*唯一*的判断方法是对实际代码进行基准测试。

# android - 从 sharedpref 获取应用程序设置后在哪里保存应用程序设置

> ID：11855037
> 
> 赞同：1
> 
> 时间：2012-08-07T22:28:35.703
> 
> 标签：android

在 ym android 应用程序中，我有设置菜单，在其中使用设置他们的应用程序模式、声音、音乐......等我从/在共享首选项中检索/存储它。

我的问题是，一旦我检索到此信息，存储它以供我的整个应用程序访问的最佳位置在哪里？

到目前为止，我所做的是我从我的 mian activityu 中读取它并将其作为额外的活动发送，但有些东西告诉我它不是有效/正确的方式。我是否应该将信息存储在 Application 类中，以便任何活动都可以在应用程序运行时访问它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:34:19.850

为什么不每次想要价值时就从 SharedPreferences 中获取它？这使您免于在应用程序中拥有两个可能不同步的相同数据副本。

我假设您不需要每秒轮询这些值数千次，这样它就会对性能产生任何有意义的影响。

进一步阅读：

[不要重复自己 - 维基百科](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:34:35.037

**您应该创建一个名为configuration.java**的静态类，您可以在其中放置所有配置/设置。

# c# - Deployment.Current.Dispatcher.BeginInvoke 不会做任何事情

> ID：11855039
> 
> 赞同：-1
> 
> 时间：2012-08-07T22:28:50.013
> 
> 标签：c#, silverlight, windows-phone-7, dispatcher, ui-thread

我无法在网络浏览器上显示 html。我正在使用“Deployment.Current.Dispatcher.BeginInvoke”方法，但它不会显示任何内容。我想要做的是从服务器获取 html 作为字符串并显示在我的网络浏览器中。我可以显示消息框，但我无法将包含 html 的字符串发送到我的网络浏览器。这是给我带来麻烦的代码片段：
`Deployment.Current.Dispatcher.BeginInvoke( () => { WebBrowser webBrowser1 = new WebBrowser(); //MessageBox.Show(responseString); webBrowser1.NavigateToString(responseString); });`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:19:13.977

我认为这个错误的原因是因为你`WebBrowser`在你的回调代码中创建了 -instance - 无论如何你都不应该这样做（因为你将如何在屏幕上显示它？如果你试图从你的应用程序进入主 WebBrowser-app (IE)，你应该使用它`WebBrowserTask`。

所以要么：

1.  您正在尝试`WebBrowser`在应用程序视图中显示一个内部（混合样式）。如果是这样，您应该调用您正在显示`.NavigateToString(string html)`的`WebBrowser`而不是创建另一个实例。
2.  您正尝试在手机 (Internet Explorer) 的主浏览器应用程序中显示下载的 HTML。这不能通过直接移交 HTML 来完成，您必须将 URI 对象发送给浏览器自己可以找到的地方。

或者当然，问题出在代码中的其他地方。这是我可以用您提供的信息和代码回答的最好的。

# .net - 需要在具有基于 OpenNETCF v1.4 构建的程序集的应用程序中使用 OpenNETCF v2.x Imaging

> ID：11855043
> 
> 赞同：1
> 
> 时间：2012-08-07T22:28:58.120
> 
> 标签：.net, compact-framework, imaging, opennetcf

我有一个现有的 WM 应用程序，我需要用它来捕捉照片，看起来 OpenNETCF v2.x 中的 Imaging 类是最好的选择，因为我在尝试打开文件时遇到了“内存不足”异常。该应用程序建立在供应商的移动平台上，并且他们的程序集似乎利用了 OpenNETCF v1.4（我无权使用更新版本的 OpenNETCF 重新编译它们）。当我简单地添加对新版本 OpenNETCF 的引用时，移动解决方案无法运行。有没有办法引用多个版本的 OpenNETCF 库，还是我陷入了困境？或者有没有办法为它的成像部分创建一个类库，而不需要在基础应用程序中引用新的 OpenNETCF 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:56:56.027

你有几个选择。

1.  将较新的 SDF 文件与您的应用程序放在同一文件夹中。加载程序应该首先查看那里并解析您的引用。如果它首先在 \Windows 中查找并提取 1.4 位，则您始终可以通过`Assembly.LoadFrom`尽早调用并使其加载本地 2.3 版本来强制解决问题。
2.  将 2.3 代码库中的 Imaging 片段直接编译到您的程序集中。

# node.js - Windows 命令行打开与命令同名的文件

> ID：11855045
> 
> 赞同：2
> 
> 时间：2012-08-07T22:29:06.143
> 
> 标签：node.js, windows-7, command-prompt

我安装了 ender js 并从命令行运行它。它会生成一个名为 ender.js 的文件。每当我运行命令“ender info”或其中包含 ender 的任何内容时，它都会在记事本中打开 ender.js 文件。

如何阻止文件打开并让命令运行？它在我删除文件时运行，但我需要该文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:24:34.183

Windows 在命令行中运行它自己的 JS 执行器。这是在 PATHEXT 系统变量中。如果当前目录中存在匹配的文件，则此系统变量存储要执行的文件扩展名的顺序。当我从该列表中删除 JS 时，我尝试调用的命令有效。这确实意味着我现在无法在浏览器中执行 JS 文件，但到目前为止我从未需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:36:28.120

所以你正试图从命令行运行一个javascript？如果我不正确，这就是我在这里推断的。这是通过`C:> cscript jslint.js`命令行中的命令完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T16:30:49.553

您通常可以通过键入 ender.cmd 或 ender.bat 来解决这个问题（取决于它的安装方式）。

# php - Autoloader 似乎无所不知 | 不需要嵌套包含

> ID：11855047
> 
> 赞同：0
> 
> 时间：2012-08-07T22:29:17.717
> 
> 标签：php, autoloader

我使用这个简单的自动加载器代码：

```
function __autoload( $class_name ) { include 'class.' . $class_name . '.php'; } 
```

我打这个电话`new SDB();`

`SDB`实际上继承了`SDBOne`我从未包含过的...但是自动加载器会加载它。

这意味着它知道加载嵌套/包含在其他模块中的模块。

因此，从外观上看，如果我使用自动加载器，我永远不需要要求或包含任何东西。

但是，如果我使用没有自动加载器的独立模块，则需要包含它继承的类。

我应该使用

```
require,

require_once,

include,

include_once. 
```

我猜是`require_once`因为我想要一个错误而不是一个警告......另外，当我将代码与自动加载器一起使用时，我不希望它加载两次。

基本上我对 SDB 有两种用途：一种带有自动加载器，一种没有。

**参考**

[http://php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:41:02.687

您是对的，`require_once`将是在一个文件中包含父类或依赖类的正确方法。这样，如果它被包含多次，就`require_once`可以防止重新声明一个类而产生的错误。

自动加载器会自动加载`SDBOne`，因为它需要先定义该类，然后才能`SDB`从它扩展。按需自动加载父类的情况与尝试加载继承的类时发生的情况相同。

此外，您应该考虑切换到，[`spl_autoload_register`](http://php.net/spl_autoload_register)以便您的代码与其他可能使用自动加载器的代码一起工作。SPL 自动加载器支持多个自动加载器并按照它们注册的顺序创建一个堆栈。这样，如果第一个自动加载器不满足要求，它会继续尝试随后注册的自动加载器，直到类被加载或找不到。

关于防止错误的另一个注意事项，您可能需要更改自动加载功能，如下所示：

```
function __autoload( $class_name ) { 
    $file = 'class.' . $class_name . '.php';
    if (file_exists($file)) {
        include $file;
    }
} 
```

因为如果被自动加载的类不存在，您将收到有关包含不存在文件的错误。这在使用`spl_autoload_register`;时尤其重要。如果另一个自动加载器最终负责加载相关类，您不希望您的自动加载器发出有关丢失文件的不必要警告。

希望有帮助。

# ruby-on-rails - 什么被认为是好的规格？面向初学者的 Rspec 示例

> ID：11855049
> 
> 赞同：20
> 
> 时间：2012-08-07T22:29:20.767
> 
> 标签：ruby-on-rails, ruby, rspec

**什么被认为是可靠的规格？**

这是我发现关于测试的非常抽象的内容。我会对模型、控制器和其他任何可以测试的东西的答案感兴趣。有一个规范的规范会很酷，你知道我的意思吗？

模型规范应该（按照优先级和相关性的顺序）：

1.  测试所有方法？
2.  测试错误数组？
3.  测试 CRUD（以及如何）？
4.  还有什么？

控制器/视图规范应该（按优先级/相关性的顺序）：

1.  填空...
2.  ?

扩展这个规范应该和不应该包含的内容的列表会很棒。

我还想编制一份技巧和建议清单。例如：

关键字“应该”有点多余。

例子：

这个：

```
it "should be invalid without a firstname" 
```

会更好：

```
it "is invalid without a firstname" 
```

还有一个技巧，使用 expect 代替 lambda 以提高可读性：

```
lambda { ... }.should be_valid 
```

更具可读性：

```
expect { ... }.should be_valid 
```

我正在编制一份关于入门的有用文章列表，并将在这篇文章中分享这些文章。到目前为止，我发现这里有一些特别有用的东西。（随意张贴你的，如果它看起来有帮助，我会附上它）。

[http://everydayrails.com/2012/03/19/testing-series-rspec-models-factory-girl.html](http://everydayrails.com/2012/03/19/testing-series-rspec-models-factory-girl.html) [http://nelvindriz.tumblr.com/post/835494714/rspec-best-practices](http://nelvindriz.tumblr.com/post/835494714/rspec-best-practices)

拥有一个测试实施良好的项目列表会很棒。由于 rspec 的可读性很强（至少每个人都是这么说的），所以最好能得到一个项目链接列表，这些项目有很好的规范可供阅读。

“有关良好规范的示例，请参阅[Mongoid规范。”](https://github.com/mongoid/mongoid/tree/v3.0.3/spec) -@yfeldblum（见下面的答案）

在网上你会发现很多文章描述了关于如何测试基本东西的不切实际的场景，但除此之外，你只能靠自己了。如果我要写一篇关于这个主题的文章，我只会链接到我的测试（例如在 github 上），然后彻底注释其中一个或几个规范......这似乎是写一篇关于 rspec 的文章的最佳方式，在我看来。我会自己做，但我还没有完全做到。

如果您投票关闭此帖子，那很好，只需尝试就您认为此帖子的所属位置发表评论或建议。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T09:37:31.787

这实际上是一个很好的问题，因为当我开始使用测试用例时，我不确定什么是好的测试用例。以下是您可以遵循的一些事项。这份清单不是我的；但从一些来源加上我的一些补充编译而成。

**描述方法**

在描述方法时，实际描述您的方法是一种很好的做法：描述“#admin？” ETC。 ”。” 是类方法的前缀，“#”是实例方法的前缀。

**每个测试用例一个断言**

确保每个测试用例只有一个断言。这可以确保您的测试用例干净且易于理解；这是测试用例的重点，不是吗？:)

**避免将数据保存到数据库**

您可以动态构建对象并避免将数据保存到 db。尽管您可以在每个测试用例之前清理数据库，但“不保存”将大大加快测试用例的速度。

@user.build(:something) 而不是 @user.create(:something)

**边缘和无效案例**

这不是 Rspec 特有的，但确保在测试中涵盖边缘情况很重要。当您的项目增长并且易于维护时，这将有很大帮助。

**语境**

我个人非常喜欢 Rspec 中的这一点，实际上我有点过度使用上下文。使用带有条件的上下文有助于划分测试用例。这是一个例子：

```
# Avoid
it "should have 200 status code if user is logged in" do
  response.should respond_with 200
end
it "should have 401 status code if user is not logged in" do
  response.should respond_with 401
end

# Use
context "when user is logged in" do
  it { should respond_with 200 }
end
context "when user is logged out" do
  it { should respond_with 401 }
end 
```

**使用主题**

当您有很多与同一事物相关的测试用例时，您可以使用 subject() 来确保您不会重复自己。

```
# Avoid
it { assigns(:user).should be_valid }
it { assigns(:user).should_not be_dumb }
it { assigns(:user).should be_awesome }

# Use
subject { assigns("user") }
it { should be_valid }
it { should_not be_dumb }
it { should be_awesome } 
```

以下是我在编写测试用例时尝试遵循的一些事项。我确信还有很多东西可以改进 Rspec 测试用例。但这应该足以开始编写很棒的测试用例了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T00:01:44.130

有关良好规范的示例，请参阅[Mongoid规范。](https://github.com/mongoid/mongoid/tree/v3.0.3/spec)

*   每个例子只有一个断言。不要在同一个例子中断言两件事。一个示例是传递给`it`、`its`或的块`specify`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T00:21:16.843

我正在按照教程学习 Ruby on Rails，并将 Rspec 作为测试驱动开发的一部分进行教学。这里的流程是写一个失败的测试，写代码通过测试，然后通过测试。基本原理似乎是，通过这样做——从一个失败的测试开始——你可以非常确定你的代码符合你的期望。所以我认为一个好的规范是确保你的代码做它应该做的。不过，到目前为止，我还没有像其他海报所写的那样从教程中收集到任何经验法则。

这是链接：[http ://ruby.railstutorial.org/](http://ruby.railstutorial.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-01T13:46:58.030

当您编写控制器测试时，您希望通过测试覆盖控制器中的所有操作。

示例控制器操作的测试应如下所示：

```
describe "Stories" do
  describe "GET stories#index" do
    context "when the user is an admin" do
      it "should list titles of all stories"
    end

    context "when the user is not an admin" do
      it "should list titles of users own stories" do
    end
  end

  describe "GET stories#show" do
    it "should render stories#show template" do
    end
  end

  describe "GET stories#new" do
    it "should render stories#new template" do
    end
  end

  describe "POST stories#create" do
    context "with valid attributes" do
      it "should save the new story in the database"
      it "should redirect to the stories#index page"
    end

    context "with invalid attributes" do
      it "should not save the new story in the database"
      it "should render stories#new template"
    end
  end

  describe "DELETE stories#delete" do
    it "should delete the story from the database"
    it "should redirect to the stories#index page"
  end
end 
```

您可以在此处找到有关[控制器测试](https://kolosek.com/rspec-controller-test/)的更多信息。

# c# - C#，如何防止用户更改文件夹权限？

> ID：11855053
> 
> 赞同：2
> 
> 时间：2012-08-07T22:29:35.377
> 
> 标签：c#, permissions, folder-security

我有一个要保护其内容的文件夹，我拒绝通过以下代码对其进行完全控制：

```
void changeFolderPermission(string folder, FileSystemRights rights, AccessControlType type)
{
  DirectoryInfo myDirInfo = new DirectoryInfo(folder);
  DirectorySecurity myDirSecurity = myDirInfo.GetAccessControl();
  string user = System.Environment.UserName;
  myDirSecurity.ResetAccessRule(new FileSystemAccessRule(user, rights, type));
  myDirInfo.SetAccessControl(myDirSecurity);
} 
```

我这样使用它：

```
changeFolderPermission(FolderName, FileSystemRights.FullControl, AccessControlType.Deny); 
```

它工作正常，我的意思是，当我尝试打开文件夹时，它不会让我打开。问题是，我可以通过右键单击文件夹，进入安全性，查找该特殊权限并删除它来轻松删除该权限..

有没有办法阻止某人这样做？我希望文件夹得到完全保护。

现在我知道有这样的事情：

```
hangeFolderPermission(FolderName, FileSystemRights.ChangePermissions, AccessControlType.Deny); 
```

但我仍然可以更改权限。

任何帮助将不胜感激..thanx提前很多.. :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:35:40.200

您不能阻止具有管理员权限的用户访问文件夹或文件。

如果用户没有管理员权限，则设置权限（通过管理员帐户）以拒绝用户访问。正确配置的权限将阻止非管理员用户访问文件夹/文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T23:54:23.377

您在原始帖子中从未说过将文件夹发送给其他人。大概这种发送机制涉及到另一台计算机的电子邮件、ftp 等。假设 #2 是您的 C# 程序将读取所述文件夹的内容。

在这种情况下，它很简单，为您的目录创建一个受密码保护的 zip 文件并将其发送。然后将密码嵌入到您的 C# 代码中并打开 zip 文件并读取其内容。

有几个非常好的 zip 操作库，例如 dotnetzip 和[#ziplib](http://www.icsharpcode.net/opensource/sharpziplib/)

# jsf - JSF - 创建请求参数字符串的函数？

> ID：11855054
> 
> 赞同：0
> 
> 时间：2012-08-07T22:29:35.853
> 
> 标签：jsf, http-request-parameters

`#{params}`是否有使用当前请求参数或内部创建请求参数字符串的函数`FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap()`？

例子：

使用以下网址打开网站：`index.xhtml?lang=en&q=test`

站点上的动态链接可以访问`params`地图中的特定键，但应使用所有“未知”键，例如：

链接jsf：`index.xhtml?#{mapToString(param)}`

输出：`index.xhtml?lang=en&q=test`

功能：

[http://java.dzone.com/articles/two-ways-convert-java-map](http://java.dzone.com/articles/two-ways-convert-java-map)

或者这是omnifaces BalusC的候选者吗？

# javascript - Backbone.js：为每个模型添加验证

> ID：11855055
> 
> 赞同：0
> 
> 时间：2012-08-07T22:29:40.073
> 
> 标签：javascript, validation, backbone.js

我很难解决这个问题，并且希望得到一些指导。

我有一个管理员 crud 应用程序，我想以类似的方式验证所有模型。当我在验证函数中使用它时，我用于验证的代码可以正常工作：

```
var ModelName = Backbone.Model.extend({
    // ...
    validate: function (attrs) {
        // stuff happens
        return errors;
    }
}); 
```

但是，我想在每个模型上使用验证，并且不想在每个模型中使用相同的代码重复自己。

如何扩展主干模型以在每个模型上包含此验证功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:57:30.937

您可以通过“子类化”轻松做到这一点，例如，

```
var Validatable = Backbone.Model.extend({
    validate: function (attrs) {
        // stuff happens
        return errors;
    }
});

var ModelOne = Validatable.extend({
   ...
});

var ModelTwo = Validatable.extend({
   ...
}); 
```

或者，您仍然基于`Backbone.Model`并`_.extend`直接使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:19:52.403

尽管@ggozad 提供了很好的解决方案，但您始终可以将*验证逻辑*移至共享函数，例如：

```
var Utils = {}
Utils.validateSomething = function( attributes ){
  // stuff happens
  return errors;
}

var ModelName = Backbone.Model.extend({
  validate: Utils.validateSomething
}); 
```

你仍然需要`validate`在每个班级中复制这条线，但我认为它已经足够干了。

# prolog - Prolog中唯一集合的否定和测试

> ID：11855062
> 
> 赞同：1
> 
> 时间：2012-08-07T22:30:41.757
> 
> 标签：prolog, set, negation

我刚刚开始尝试使用 Prolog，我正在尝试编写一个规则来确定列表是否仅包含唯一元素。我让它在第二个变体中工作（通过否定阳性测试），但我完全不明白为什么第一个变体不起作用。

鉴于此文件：

```
uniqueElements([X|Y]) :-
     notmember(X, Y),
     uniqueElements(Y).

notmember(X, Y) :-
     \+ member(X, Y).

hasRepeatedElements([X|Y]) :-
     (
         member(X, Y) ->
         true
     ;   hasRepeatedElements(Y)
     ).

uniqueElements_2(X) :-
     \+ hasRepeatedElements(X). 
```

GNU Prolog 解释器给出以下响应：

```
| ?- uniqueElements([1,2,3]).

no
| ?- uniqueElements([1,2,3,2,3]).

no

| ?- uniqueElements_2([1,2,3]).

yes
| ?- uniqueElements_2([1,2,3,2,3]).

no 
```

为什么第一反应是“不”？（我本来希望 member 返回 false，被否定为 true，因此 notmemeber 在 uniqueElements 的每次迭代中都返回 true）。我想我期待 '\+' 表现得像 '!' 在 C if 子句或 Python 中的 'not' 关键字中执行。这是误会吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:23:37.563

在`uniqueElements`中，您没有提供递归的基本情况：

```
uniqueElements([]). 
```

如果没有该子句，当特定调用链到达空列表案例时，它不会找到任何适用的子句，这意味着`fail`在 Prolog 中。意思是*“无法证明”*。因此，您的调用`uniqueElements([1,2,3])`产生了等效的`true && true && true && false`.

现在它应该可以工作了。

`hasRepeatedElements`也没有为基本情况定义子句，但是它未能找到空列表中是否存在重复元素`[]`与其语义一致 - 它应该在第一个中发现空列表中没有重复元素地方。

在 Prolog 中，“not”的意思是“不能证明……”。

# php - Zend Framework - 500 内部服务器错误

> ID：11855067
> 
> 赞同：7
> 
> 时间：2012-08-07T22:31:22.700
> 
> 标签：php, .htaccess, zend-framework

今天我使用 Zend Framework 创建了我的第一个项目，但是当我尝试连接到我的项目时，我只看到“500 Internal Server Error”。我在 httpd.conf 文件中添加了一些新行：

```
NameVirtualHost *:80
<VirtualHost *:80>
DocumentRoot C:\AppServ\www\data1\public
ServerName my_ip
</VirtualHost>

NameVirtualHost *:80
<VirtualHost *:80>
DocumentRoot C:\AppServ\www\data1\public
ServerName http://my_ip
</VirtualHost> 
```

那是我的 htaccess 文件：

```
RewriteEngine On
#RewriteBase data1/public/
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]
RewriteRule !\.(js|ico|gif|jpg|png|css|swf|html|pps)$ index.php [NC,L]

order allow,deny
allow from all 
```

我阅读了有关此问题的更多主题，但目前问题尚未解决。

那是我的 error.log 文件（来自服务器）：

```
[Wed Aug 08 01:46:02 2012] [warn] NameVirtualHost *:80 has no VirtualHosts
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:/AppServ\\php5        \\ext\\php_exif.dll' - \xd3\xea\xe0\xe7\xe0\xed\xe0\xf2\xe0 \xef\xf0\xee\xf6\xe5\xe4 \xf3\xf0\xe0 \xed\xe5 \xe5 \xed\xe0\xec\xe5\xf0\xe5\xed\xe0.\r\n in Unknown on line 0
[Wed Aug 08 01:46:02 2012] [notice] Apache/2.2.8 (Win32) PHP/5.2.6 configured -- resuming normal operations
[Wed Aug 08 01:46:02 2012] [notice] Server built: Jan 18 2008 00:37:19
[Wed Aug 08 01:46:02 2012] [notice] Parent: Created child process 2392
[Wed Aug 08 01:46:02 2012] [warn] NameVirtualHost *:80 has no VirtualHosts
[Wed Aug 08 01:46:02 2012] [warn] NameVirtualHost *:80 has no VirtualHosts
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:/AppServ\\php5\\ext\\php_exif.dll' - \xd3\xea\xe0\xe7\xe0\xed\xe0\xf2\xe0 \xef\xf0\xee\xf6\xe5\xe4\xf3\xf0\xe0 \xed\xe5 \xe5 \xed\xe0\xec\xe5\xf0\xe5\xed\xe0.\r\n in Unknown on line 0
[Wed Aug 08 01:46:02 2012] [notice] Child 2392: Child process is running
[Wed Aug 08 01:46:02 2012] [notice] Child 2392: Acquired the start mutex.
[Wed Aug 08 01:46:02 2012] [notice] Child 2392: Starting 64 worker threads.
[Wed Aug 08 01:46:02 2012] [notice] Child 2392: Starting thread to listen on port 80.
[Wed Aug 08 01:46:15 2012] [alert] [client 46.40.124.225] C:/AppServ/www/data1/public/.htaccess: Invalid command 'RewriteEngine', perhaps misspelled or defined by a module not included in the server configuration 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T22:59:11.197

感谢您发布错误日志。

从它的外观来看，你没有`mod_rewrite`加载。

找到您的`httpd.conf`文件并找到该行：

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

删除行首的`#`符号。

接下来，添加一个新部分`httpd.conf`，如下所示：

```
<Directory "C:/AppServ/www/data1/public">
    Options FollowSymLinks
    AllowOverride All
</Directory> 
```

该`AllowOverride`指令很重要。默认情况下，`.htaccess`除非允许，否则不会处理文件。此行允许`.htaccess`该命名目录中的文件。

进行这些更改后，重新启动 Apache，然后再次尝试加载您的 ZF 页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T22:52:22.963

首先，更好的调试。添加

```
 ErrorLog "PATH_TO/zfapp-error_log"
    CustomLog "PATH_TP/zfapp-access_log" combined 
```

到您的虚拟主机。重新启动 apache 并重新加载您的页面。文件将在指定路径中创建。将有一个确切的错误消息，它将帮助您进一步调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T07:44:11.533

我刚刚遇到了完全相同的问题，而draw010的解决方案确实解决了它！

但是，Apache 配置结构似乎发生了变化，因此启用缺失模块的方法略有不同：

```
$ cd /etc/apache2/mods-enabled
$ sudo ln -s ../mods-available/rewrite.load ./rewrite.load 
```

这确认你有正确的东西：

```
$ cd /etc/apache2/mods-enabled
$ cat ./rewrite.load
LoadModule rewrite_module /usr/lib/apache2/modules/mod_rewrite.so 
```

干杯!

# r - 使用 Rscript，有没有一种不错的方法来抑制非脚本输出？

> ID：11855072
> 
> 赞同：11
> 
> 时间：2012-08-07T22:31:37.857
> 
> 标签：r, rscript

> **可能重复：**
> [R 从依赖项中抑制启动消息](https://stackoverflow.com/questions/6279808/r-suppress-startupmessages-from-dependency)

我已经阅读了有关使用`sink("NUL")`/`sink("/dev/null")`的信息，但它们都没有解决我遇到的问题。即使我将`library()`命令包装在`sink("NUL")`and中`sink()`，我对 Rscript 的调用也会输出我不想看到的各种信息：

```
Loading required package: Matrix
Loading required package: methods
Loading required package: lattice
Loaded glmnet 1.8

Loading required package: MASS
Loading required package: lme4

Attaching package: 'lme4'

The following object(s) are masked from 'package:stats':

    AIC, BIC

Loading required package: R2WinBUGS
Loading required package: coda

Attaching package: 'coda'

The following object(s) are masked from 'package:lme4':

    HPDinterval

Loading required package: abind
Loading required package: foreign

arm (Version 1.5-05, built: 2012-6-6)

Working directory is C:/Users/andrews/bootstraps/user/_branches/ER-PoC/Bootstraps/R

Attaching package: 'arm'

The following object(s) are masked from 'package:coda':

    traceplot

[1] "client=51"         "date='01-01-2011'"
[1] "01-01-2011"
[1] 51 
```

最后的东西是我真正想要的唯一输出，也是我似乎能够用`sink()`命令抑制的唯一输出。似乎真的应该有一个参数来抑制这个输出（如果我的脚本在控制台中`Rscript`，它甚至不会出现）......任何输入？`source`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T05:24:16.803

安德鲁，我遇到了同样的事情，`suppressMessages()`并没有删除所有额外的输出，而是以环绕作品`sink()`的形式使用。`capture.output()``suppressMessages()`

```
$ rscript --vanilla -e 'library(Rmpfr)'
Loading required package: methods
Loading required package: gmp
---->8----
Loading C code of R package 'Rmpfr': GMP using 32 bits per limb
---->8----

$ rscript --vanilla -e 'suppressMessages( library(Rmpfr) )'
Loading C code of R package 'Rmpfr': GMP using 32 bits per limb

$ rscript --vanilla -e 'msg.out <- capture.output( suppressMessages( library(Rmpfr) ) )' 
```

加载 Rmpfr 包时发生的情况是使用连接编写的几条表现良好的启动消息以及使用`message`连接的不太好的消息`output`。当然，您可以`sink()`自己创建和操作 a，但这`capture.output()`是已经设置好的。

也许设置一个详细的 arg 以获得更多控制会有所帮助::

```
$ cat sample.R
#!/c/opt/R/R-2.15.0/bin/rscript --vanilla

cmd_args <- commandArgs( TRUE );

if( length( cmd_args ) > 0 ) {
  eval( parse( text = cmd_args[1] ) )
}

if( exists( "verbose" ) ) {
  library( Rmpfr )
} else {
  msg.trap <- capture.output( suppressMessages( library( Rmpfr ) ) )
}

print("Hello") 
```

产生::

```
$ ./sample.R
[1] "Hello"

$ ./sample.R "verbose=TRUE"
Loading required package: methods
Loading required package: gmp

Attaching package: 'gmp'
---->8----
[1] "Hello" 
```

你可以在那里玩很多东西，但至少你可以看到如何完全抑制 msg 输出。

希望能帮助到你。玩得开心！

# php - 将现有的 php 数组传递给 jquery

> ID：11855077
> 
> 赞同：0
> 
> 时间：2012-08-07T22:32:02.423
> 
> 标签：php, jquery, arrays

我有一个 PHP 数组，我想传递给我的 jquery（用我的 php 数组替换测试数组）。

```
Array
(
    [12] => Some Text
    [6] => Another text
    [11] => one more text
) 
```

查询：

```
$('#SearchUser').typeahead({
                source: [
                    { ID: 1, Name: 'Toronto' },
                    { ID: 2, Name: 'Montreal' },
                    { ID: 3, Name: 'New York' },
                    { ID: 4, Name: 'Buffalo' },
                    { ID: 5, Name: 'Boston' },
                    { ID: 6, Name: 'Columbus' },
                    { ID: 7, Name: 'Dallas' },
                    { ID: 8, Name: 'Vancouver' },
                    { ID: 9, Name: 'Seattle' },
                    { ID: 10, Name: 'Los Angeles' }
                ],
                display: 'Name',
                val: 'ID',
                itemSelected: updateID
            }); 
```

那么如何将“源”的 var 设置为我的 php 数组？

建议？

一如既往，你真棒！

-汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:36:57.670

您可以使用 php 的 json_encode 函数将 php 数组转换为 json。然后你可以使用 json 作为 javascript 数组。

[http://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

我不知道你如何从 php 代码获取数据到 javascript 代码，但如果你将数据打印为 json，你可以通过 ajax 调用来获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:40:05.667

我在我的一个项目中是如何做到的，

```
$.get("<?= $baseUrl ?>search/data", function (data) {
    var dataObject = JSON.parse(data);
    $('#q').typeahead({
        'source': dataObject,
        // 'items': 5
    });
}); 
```

我的搜索控制器的数据方法是：

```
echo (json_encode($arr)); // $arr is ["a","b","c"] etc. but you can have an associated array too. 
```

基本上，显示我的代码的目的是说使用`json`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:37:23.943

使用 PHP 的`json_encode()`函数创建一个有效的 JSON 字符串，然后使用 jQuery 的`$.getJSON()`.

像这样的东西：

**get_array.php**

```
$someArray = /* whatever */;
echo json_encode($someArray); 
```

**read_array.js**

```
$.getJSON('get_array.php', function(data) {
    // data now contains your array
}); 
```

或者，您可以执行以下操作：

```
<script type="text/javascript">
    var someArray = <?php echo json_encode($someArray); ?>
</script> 
```

如果您不想要单独的文件并且不介意为其使用全局变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-07T22:42:56.100

您可以执行以下操作：

```
<script type="text/javascript">
    var jsArray = <?php echo json_encode($phpArray); ?>
</script> 
```

但是将语言 X 与语言 Y 混合使用是一种不好的做法。

好吧，看看我对这篇文章的回答，您可以在其中以更好的方式执行以下操作：

[基于服务器端逻辑的有条件地回显 Javascript 代码是否被认为是有害的？](https://stackoverflow.com/questions/11658596/is-echoing-javascript-code-condtionally-based-on-server-side-logic-considered-ha/11658716#11658716)

希望这可以帮助 ：-）

# php - 如何从下载文件中删除url

> ID：11855078
> 
> 赞同：0
> 
> 时间：2012-08-07T22:32:08.683
> 
> 标签：php, jquery, url

我发现这个脚本就像一个魅力，但我下载的文件现在名称中有 url。我怎样才能删除它？

```
The html:
<a class="download_link" href="catalogue/CP-Greengo-Filtertips-30027.jpg"><img src="CP-Greengo-Filtertips-30027.jpg" width=100 alt=image></a>

The jQuery:
$('a.download_link').on('click', function (event) {
event.preventDefault(); //prevent the normal click action from occuring
window.location = 'php/filedownload.php?file=' + encodeURIComponent(this.href);});

The php:
$file = $_GET['file'];
header('Content-Description: File Transfer');
header("Content-type: application/octet-stream");//notice this content-type, it will force a download since browsers think that's what they should do with .exe files
header("Content-disposition: attachment; filename= ".$file."");
readfile($file); 
```

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:35:37.043

在 php 中，执行以下操作：

```
$pathParts = explode('/',$file);
$fileName  = $pathParts[count($pathParts)-1];
header("Content-disposition: attachment; filename=".$fileName); 
```

这将从文件路径中删除 URI 的其余部分，并为您留下文件名。

# ios - 如何判断 NSURLConnection 是否缓存了某个图片？

> ID：11855080
> 
> 赞同：0
> 
> 时间：2012-08-07T22:32:12.373
> 
> 标签：ios, cocoa-touch, ipad, nsurlconnection, nsurlcache

我将如何确定 UIImage 是否已经被 NSURLConnection 缓存？

例子：

```
if([NSURLCache containsObject:[UIImage imageNamed@"testPic.png"]]){
NSLog(@"item already cached!");
} 
```

显然上面的代码不起作用，但你明白了......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:14:27.040

您必须保存请求的副本，然后再询问 sharedCache：

```
- (NSCachedURLResponse *)cachedResponseForRequest:(NSURLRequest *)request 
```

返回的对象中有一堆东西，包括数据对象。

# asp.net - 如何将我的自定义 URl 重定向到 ASP.Net IIS 7.5 中的特定端口

> ID：11855083
> 
> 赞同：0
> 
> 时间：2012-08-07T22:32:28.337
> 
> 标签：asp.net, .net, url-rewriting, iis-7.5

我创建了两个站点，一个在默认站点的 80 端口上，另一个在 786 端口上，现在我希望如果用户打开 url [http://myurl.com/Application](http://myurl.com/Application)，它应该打开[http://myurl。 com:786/应用程序](http://myurl.com:786/Application)。我已经安装了 IIS 7.5 重写模块。我尝试了不同方式的代码，例如

```
<rule name="Red" stopProcessing="true">
        <match url=".*" />
    <conditions logicalGrouping="MatchAll">
                          <add input="{HTTP_HOST}" pattern="www.myurl.com/Application" />

             </conditions>

        <action type="Rewrite" url="http://{HTTP_HOST}:786/{R:0}" />
    </rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:25:25.050

我认为它喜欢 301 永久重定向。您可以使用 HttpModule 来执行此操作。

```
public class CustomHttpModule : IHttpModule
{

    private HttpApplication app;

    public void Init(HttpApplication context)
    {
        app = context;
        app.AuthorizeRequest += App_AuthorizeRequest;
    }

    public void App_AuthorizeRequest(object sender, EventArgs e)
    {
        HttpRequest req = app.Request;
        string path = req.Path;

        // if starts with http://{HTTP_HOST}
        if (path.StartsWith("http://{HTTP_HOST}", true, CultureInfo.CurrentCulture))
        {
            string redirectUrl = path.Replace("http://{HTTP_HOST}", "http://{HTTP_HOST}:786");
            app.Response.StatusCode = 301;
            app.Response.AddHeader("Location", redirectUrl);
            app.Response.End();
        }
    }

    public void Dispose()
    {

    }
} 
```

此外，您需要在 system.webserver 节点和 system.web 节点中配置此 HttpModule。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T21:10:55.007

```
<add input="{REQUEST_URI}" matchType="Pattern" pattern="^/Application$" ignoreCase="true" negate="false" /> 
```

this can only resolve the issue.

# php - PHP - 当行不一致时如何从文本文件中插入行

> ID：11855085
> 
> 赞同：3
> 
> 时间：2012-08-07T22:33:04.573
> 
> 标签：php, mysql, arrays, explode

我有一个代理应用程序在文本文件中生成日志文件，该文件从一行到下一行不一致。根据行报告的内容，某些数据将存在或丢失。这是一个例子：

```
2012-08-05 10:48:59 Login.Failure   [ip address]    12312191391921
2012-08-05 10:49:05 Login.Success   [ip address]    19919292912912  IQi8CaVGiXoPXGy
2012-08-05 12:50:57 Logout      19919292912912  IQi8CaVGiXoPXGy Expired 
```

有七个可能的值，但如您所见，它们并非一直都存在。

我想在数据库中输入这些值，以便创建统计信息。到目前为止，我猜我需要查看位置 2 (0,1,2) 的数组，如果它匹配某个字符串，只期望*这些*项目在那里，如果它匹配另一个字符串，只期望*这些*项目， ETC。

到目前为止，我的想法已经到了中断数组并根据它找到的值添加新条件的地步。我知道，这行不通，但就我的想法而言，这是：

```
$output = explode("\n", $output);
foreach($output as $var) {
$tmp = explode(" ", $var);
$dateentered = $tmp[0];
$timeentered = $tmp[1];
$event = $tmp[3];

if  $tmp[3]="Login.Failure" then

$IP = $tmp[4];
$username = $tmp[5];

$connection = mysql_connect("localhost", "user", "pass") or die('unable to connect');

mysql_select_db('dbname') or die('unable to select database');

$sql = "INSERT INTO table SET dateentered='$dateentered', timeentered='$timeentered', event='$event', IP ='$IP ', username='$username'";

$result=mysql_query($sql,$connection) or die('Error in query: $query. ' .mysql_error());

else if $tmp[3]="Login.Success" then

$IP = $tmp[4];
$username = $tmp[5];
$session = $tmp[6]; 
```

...等等...

我希望能够提取所有成功并总结它们，然后对失败做同样的事情，依此类推。

你会如何处理这个问题？如果有人甚至对合理的工作流程有一个想法，我可以从那里构建。我显然只是一个初学者，尽管我确实有好几页。

感谢您的所有回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:53:24.227

为什么你的数据库结构不是这样的：

```
2012-08-05 10:48:59 Login.Failure   [ip address]    12312191391921  NULL            NULL
2012-08-05 10:49:05 Login.Success   [ip address]    19919292912912  IQi8CaVGiXoPXGy NULL
2012-08-05 12:50:57 Logout          NULL            19919292912912  IQi8CaVGiXoPXGy Expired 
```

或者像这样：

```
2012-08-05 10:48:59 Login.Failure   [ip address]    12312191391921  ""              ""
2012-08-05 10:49:05 Login.Success   [ip address]    19919292912912  IQi8CaVGiXoPXGy ""
2012-08-05 12:50:57 Logout          ""              19919292912912  IQi8CaVGiXoPXGy Expired 
```

应该优先考虑在正确的列中维护正确的数据，或者更确切地说，在同一列中维护关联数据。

为了解决你的代码，我相信这个解决方案会起作用：

```
$output;                            // data gotten from file
$connection = mysql_connect("localhost", "user", "pass") 
  or die('unable to connect');      // connect to DB
mysql_select_db('dbname')           // select DB
  or die('unable to select database');
$output = explode("\n", $output);   // tokenize input by lines
for($i=0; $i<count($output); $i++) {// for each line
  $tmp = explode(" ", $output[i]);  // tokenize lines by spaces
  $dateentered = $tmp[0];           // set required data
  $timeentered = $tmp[1];           // set required data
  $event    = $tmp[3];              //i think this should be [2]
  $IP       = "";                   // set default value of possible data
  $username = "";                   // set default value of possible data
  $session  = "";                   // set default value of possible data
  $expired  = "";                   // set default value of possible data

       if ($event=="Login.Failure") { 
    $IP       = $tmp[4];            //i think this should be [3]
    $username = $tmp[5];            //i think this should be [4]
  } 
  else if ($event=="Login.Success") {
    $IP       = $tmp[4];            //i think this should be [3]
    $username = $tmp[5];            //i think this should be [4]
    $session  = $tmp[6];            //i think this should be [5]
  }
  else if ($event=="Logout") {
    $username = $tmp[5];            //i think this should be [4]
    $session  = $tmp[6];            //i think this should be [5]
    $expired  = $tmp[7];            //i think this should be [6]
  }
/*
 * Update DB:
 */
  $sql = "INSERT INTO table SET "
        ."dateentered='$dateentered', "
        ."timeentered='$timeentered', "
        ."event='$event', "
        ."IP ='$IP', " 
        ."username='$username', "
        ."session='$session', "
        ."expired='$expired'";
  $result=mysql_query($sql,$connection) 
    or die('Error in query: $query. ' .mysql_error() 
          .'\n\nWhile Processing line $i');
}                                   // closing brace of for loop
mysql_close($connection);           // close connection to DB 
```

关于您的代码的问题：

*   在哪里/是什么`$tmp[2]`；我认为您的索引可能会偏离 1

还请务必查看我的代码，以确保它的行为符合您的要求，以便将其插入您的数据库。我想我正确地解释了你的问题并提出了一个可行的解决方案，但只有你可以确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:39:08.673

您确实需要验证插入到数据库中的每一行。我可能会使用一个简单的函数来执行此操作，它返回一个适当的分隔字符串或一个可以附加到插入语句的数组。

从您的示例文本的外观来看，文本是制表符分隔的，所以这是一个开始。在该功能中，您至少可以对其进行爆炸以获取单个项目。随之而来的是，它们似乎一个接一个地不同，这也很好，这意味着您的逻辑应该很容易理解哪些丢失了。

这个非常简单的代码应该让你开始......

```
function findMyFields($inputString)
{
    $tArray=explode('\t', $string);
    if(str_len($tArray[0])==19) 
    // the dateTime looks to be 19 characters and will stay fixed length
    {
        $returnString=$tArray[0].',';
    }
    else
    {
        $returnString=null.',';
    }
    // and so on for each field.

    return $returnString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:48:45.453

您可以创建一个关联数组，其中键是日志条目类型（`Login.Success`、`Login.Failure`等），值是条目数组。

然后按第一个键循环遍历数组。因为您知道每种日志类型需要哪些字段；它是创建模板 SQL 查询的简单案例（当然有适当的转义）。

# html - 为什么我的 Twitter Bootstrap 表单字段使用流体容器会溢出它们的井？

> ID：11855086
> 
> 赞同：41
> 
> 时间：2012-08-07T22:33:10.120
> 
> 标签：html, css, twitter-bootstrap

更新：这里的问题演示：http: [//jsfiddle.net/fdB5Q/embedded/result/](http://jsfiddle.net/fdB5Q/embedded/result/)

从大约 767px 到 998px，表单域比包含井宽。

小于 767px 并且整个表单区域移动到新行。当浏览器窗口大约 200 像素宽时呈现的页面显示完美。如您所料，表单字段会缩小。

对于视觉，看看这个非常相似的问题： [Twitter Bootstrap CSS static-fluid form Positioning](https://stackoverflow.com/questions/11706019/twitter-bootstrap-css-static-fluid-form-positioning)

这是 Head 中的所有内容：

```
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" />
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script> 
```

这是 Body 中的所有内容：

```
<div class="container-fluid">

<div class="row-fluid">

<div class="span8">
<p>Some Content.</p>
</div>

<div class="span4">
  <div class="well">    
    <div class="control-group">
      <label class="control-label" for="name">Your Name</label>
      <div class="controls">
      <input type="text" class="input-xlarge" name="name" id="name" maxlength="100" />
      </div>
    </div>
  </div>
</div>

</div>

</div> 
```

**我想我误解了框架的某些部分。我不应该使用液体容器吗？我究竟做错了什么？**我可以拼凑一些东西来解决这个问题，但我认为问题可能是我做错了大局。

我尝试将跨度更改为 7 和 5，但仍然出现相同的错误。我尝试了 6 和 6，但此时页面开始看起来很荒谬。其余的答案对我来说没有意义。

我将输入类更改为大而不是 xlarge。它仍然有一个溢出的宽度范围，如果显示器上有空间，我真的想要更宽的表单域。

我想避免水平滚动条，并且我希望页面文本在我的智能手机上的横向或纵向模式下具有相同的大小。

更新：图片

**我的问题页面：**

![问题页面](../Images/e0785a09d23e5a6f2cf5dcdcd570eabe.png)

**简化版：**

![简单版](../Images/bf516540e038893777abe4924db63298.png)

**浏览器宽度为 200 像素的简化版本：**

![宽度为 200 像素的简单版本](../Images/8eb722562bafca98fb7093f3c59ba6c2.png)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-07T23:19:52.083

输入的 html 标签及其对应的`.input-*`样式只设置 css `width`。这是设计使然。

但是添加 css`max-width:100%`将确保控制过大的输入。
*例如，将其添加到您的头部：*

```
<style>
    input {
        max-width: 100%;
    } 
</style> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T23:23:29.747

通常我更喜欢使用另一个元素`class="row-fluid"`和`class="span12"`元素`class="spanX"`来获得某些元素的 100% 宽度。这不会导致不同分辨率的错误。所以，我`row-fluid`在你的元素中添加了另一个类`span4`，并在新`row-fluid`添加的 div 中添加了`span12`. 您必须在某些情况下覆盖默认的 Bootstrap 设置才能获得所需的内容，因此我还在元素`.my-input`内部添加了类`<input />`以获得 100% 宽度并删除左右填充（填充会导致右侧出现错误）。这是代码：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span8">
            <p>Some Content.</p>
        </div>
        <div class="span4 well">
            <div class="row-fluid">
                <div class="span12">
                    <label class="control-label" for="name">Your Name</label>
                    <input type="text" class="my-input" name="name" id="name" maxlength="100" />
                </div>
             </div>
        </div>
  </div>
</div> 
```

和用于覆盖的 CSS 类

```
​.my-input
{
    width: 100%;
    padding: 4px 0 4px 0 !important;
}​ 
```

你可以看到和[Jsfiddle 演示](http://jsfiddle.net/fdB5Q/1/)，尝试调整屏幕大小。

​</p>

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T09:01:41.940

我刚刚遇到了这个问题，并且在检查引导文档以获取表单输入时，它指出“使用相对大小调整类，如 .input-large 或使用 .span* 类将您的输入与网格列大小匹配。”

我的引导行设置为 span9 的内容和 span3 的侧边栏。设置`<input class='span3'/>`为我解决了这个问题，随着屏幕尺寸的减小，输入框仍保留在侧边栏中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-10T02:59:30.783

在玩完这些 FOREVER 之后，只需一点输入（似乎）。我使用一个简单的宽度属性并将其设置为 85% 到 95%，具体取决于容器、填充和其他 css 因素，以防止输入字段实际拉伸到容器边缘。

```
.input-example {
   width: 90%; 
} 
```

我不是这方面的专家！我只是提供我所学到的知识，请不要将其视为经验丰富的开发人员的建议。试图回馈一个在无数场合挽救了我生命的社区。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-17T02:20:57.560

不幸的是，问题比这一切都更隐蔽。使用 max-widths 对我没有任何帮助。而且我讨厌看起来很糟糕的东西，所以我深入研究了一下......

它归结为表单控件的 css 声明中的这三行：

```
width: 100%;
padding: 6px 12px;
border: 1px solid #cccccc; 
```

当设置文本类型输入元素的宽度时，水平填充和边框将添加到 100%，而不是从中获取。因此，如果 100% 的宽度 w 是 500px，那么文本输入表单控件的宽度变为 w+12+12+1+1, 526px。额外的 26px 是一个常数，这意味着除非动态计算宽度百分比为 100%*(w/(w+26px)) 或 100%-26px，否则事情永远不会出现。

*我个人认为这是 html/css 接口的定义或实现中的错误（我不知道是哪个，我真的不想尝试在标准的流沙中找到参考。）如果你假设输入字段将是 100% 宽度，则需要应用校正以使边距内的宽度为 100%，而不是 100%，而不包括水平填充和边框宽度。*

而且，顺便说一下，百分比值或固定大小无关紧要；它们也偏离了 26 像素。您需要从宽度中过滤掉这些 26px。

但是，引导文本输入并不会丢失所有内容，至少如果您使用的是允许客户端计算的 CSS 编译器。例如，在更少的情况下

```
input.form-control[type=text] {
  width: calc(~'100%-26px');
} 
```

会让一切变得更好。请注意，电子邮件和密码类型（至少）也有同样的问题。

当然，26px 有点脆弱，但是常量被硬编码到表单控件声明中，所以你的手有点束缚。一个测试会很好，检查渲染控件的大小以捕获引导升级时的 CSS 声明更改，但不是今晚，谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-28T03:05:20.453

正如 Pavlo 在此答案中指出的那样：[Twitter Bootstrap：停止输入字段超出范围](https://stackoverflow.com/questions/12195931/twitter-bootstrap-stop-input-field-extending-beyond-well)

使用类`input-block-level`代替 input-xlarge（或其他大小）也可以解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-02T15:42:42.973

我在表单输入和面板正文中遇到了这个问题。我在以下项目中回答了它： [Twitter Bootstrap：停止输入字段超出范围](https://stackoverflow.com/questions/12195931/twitter-bootstrap-stop-input-field-extending-beyond-well?nah=1#28813614)

我的问题是表格溢出了。这允许输入效仿。通过修复表单的最大宽度（最大宽度：100%），我能够修复输入以及可能放置在表单内的任何其他内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-06T21:27:26.803

任何人都可以找到

html:

```
<input class="form-control" placeholder="Threshold Type"> 
```

CSS：

```
.form-control { box-sizing: border-box; } 
```

# html - 使用 CSS 灵活的盒子模型，你可以在居中的同时将一个项目“浮动”到左边吗？

> ID：11855091
> 
> 赞同：2
> 
> 时间：2012-08-07T22:33:24.673
> 
> 标签：html, css, mobile-safari

我们想使用 CSS 灵活的盒子模型，但需要将一个项目“浮动”到左边，同时居中第二个项目。

这是我们想要实现的目标：http: [//jsfiddle.net/Lx7GQ/](http://jsfiddle.net/Lx7GQ/)

我们想使用灵活的盒子模型，这样我们就可以轻松地将项目垂直居中，同时实现这种水平布局。

当然，我们可以使用相对定位来手动放置所有东西，但我们想知道是否有一种自然的方法可以使用灵活的盒子模型来实现这种外观。

我们只需要支持 Mobile Safari。

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:41:44.793

水平居中最好通过使用`margin-left: auto; margin-right: auto;`和 set来实现`width`。看到这个更新的小提琴：http: [//jsfiddle.net/Lx7GQ/1/](http://jsfiddle.net/Lx7GQ/1/)

垂直中心更难，并且已多次[解决](https://www.google.com/search?q=vertical%20align%20css%20site%3astackoverflow.com)。

[html5please](http://html5please.com)建议[避免](http://html5please.com/#flexbox)使用灵活的盒子模型，它在移动设备上不受支持**。**

# c# - 在特殊时间运行方法的更好方法是什么？

> ID：11855092
> 
> 赞同：0
> 
> 时间：2012-08-07T22:33:36.790
> 
> 标签：c#, winforms, intervals

我有一个 Windows 窗体应用程序，它在一段时间后重复调用一个方法。所以我担心CPU使用率。我知道有两种方法可以做到这一点：

1) 使用 Timer 组件2)循环
调用`Thread.Sleep(time)`

那么，哪一个更好呢？哪个使用 CPU 较少或不使用 CPU ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:41:23.807

如果您想每隔一定时间定期执行某些代码块，请使用专为此设计的计时器。一点点 CPU 架构知识向您展示，有一些通用计时器不消耗任何处理器或操作系统资源来生成准确的时间延迟。

另一方面，将线程保持在挂起状态并将其切换到执行并将其排入就绪队列将消耗 CPU 和操作系统资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:41:26.760

没关系，因为即使您将循环设置为 1 毫秒，您也无法真正测量 CPU 使用率。会那么低。

出于可靠性、可维护性和可读性的原因，您应该使用`System.Windows.Forms.Timer`.

# iphone - 我最近发布的应用更新在 info.plist 文件中没有最新/正确的值

> ID：11855094
> 
> 赞同：0
> 
> 时间：2012-08-07T22:33:43.640
> 
> 标签：iphone, ios, ipad, info.plist

我的 info.plist 文件中有一部分存储了一个关键指标，应用程序使用该指标来了解它可以预期加载多少个 db。这是一个简单的数字，我会根据需要进行更改。出于某种原因，当应用程序从 App Store 更新新值时，就好像更新后的 plist 值不存在。该应用程序基于旧值工作。

但是，如果我完全删除该应用程序，然后从 App Store 重新安装，它就可以工作！我在这里想念什么？为什么 plist 文件不能通过更新正确更新？我应该对 Documents 目录进行某种手动复制/更新过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:25:08.613

你能写出你如何从 info.plist 访问数据的代码吗？

另外，请记住，当您在文档目录中存储任何数据时，它不会更新，直到您强制执行。

一旦您更新构建，info.plist 总是会更新。

希望能帮助到你....

# wcf - 使用 Bootstrapper for Unity 和 Automapper 进行 WCF 初始化

> ID：11855096
> 
> 赞同：6
> 
> 时间：2012-08-07T22:33:47.413
> 
> 标签：wcf, bootstrapper

我正在使用 Unity Container 和 Automapper，我正在寻找一个地方来在我的 WCF 服务中调用我的初始化和引导代码。我的互联网搜索推荐了此处讨论的四种方法之一 [http://blogs.msdn.com/b/wenlong/archive/2006/01/11/511514.aspx](http://blogs.msdn.com/b/wenlong/archive/2006/01/11/511514.aspx)

```
(e.g. 
1\. Global.asax, 
2\. App_Code\AppInitialize, 
3\. custom ServiceHost, and 
4\. ServiceHostBase.InitializeRuntime) 
```

但是，我也想知道是否有人使用 带有 Unity 和 Automapper 扩展的“Bootstrapper”项目[http://bootstrapper.codeplex.com/ 。](http://bootstrapper.codeplex.com/)

那么在 WCF 服务中调用“Bootstrapper.Run()”代码的最佳位置是哪里/如何？示例代码将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T23:27:48.443

You can use web activator and call initialize method on your bootstrapper class. see details on [https://www.nuget.org/packages/WebActivatorEx/](https://www.nuget.org/packages/WebActivatorEx/)

# php - KO3：使用 ORM 过滤器自动生成唯一的别名/slug？

> ID：11855100
> 
> 赞同：2
> 
> 时间：2012-08-07T22:34:17.847
> 
> 标签：php, orm, filter, kohana, unique

我有多个我希望通过人类可读的 URL 访问的对象，因此我正在为所有数据库记录生成别名（例如 blog.com/this-is-an-alias/）。

**自动生成这些的最佳实践是什么？**

我目前正在挂钩模型的 'values()' 方法并在其中生成一个新别名（基于所需的 'name' 字段），但我不禁觉得这可以更优雅地使用，比如 Kohana 构建- 过滤器。

这是精简模型：

```
class Model_Category extends ORM {
    // relevant rules:
    public function rules(){
            return array(
            'alias' => array(
                array('max_length', array(':value', 63)),
                array(array($this, 'unique'), array(':field', ':value')),
            ),
            'name' => array(
                array('max_length', array(':value', 63)),
            ),
            // (...)
        );
    }

    // overrides default method:
    public function values(array $values, array $expected = NULL){
        if(!$this->_loaded){
            if($values['name'] && !$values['alias'])
                $values['alias'] = Helper_Form::to_alias($values['name']);
        }

        return parent::values($values, $expected);
    }
} 
```

仅供参考， to_alias 函数看起来像这样：

```
return strtolower(substr(trim(preg_replace('/[^0-9a-zA-Z]+/','-',$str),'-'),0,63)); 
```

所以，我的问题：

*   **是否可以和/或建议从过滤器回调中访问模型的属性（被过滤的属性除外）？** （到目前为止，我的测试似乎表明没有，或者充其量是不可靠的）
*   更重要的是，**如何构建唯一性测试？**即，在自动生成别名后，如何确定 slug 尚未在使用中而不抛出模型的 rules() 异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T19:03:18.300

我会使用您提到的过滤器进行自动生成。以下是我这样做的想法。对于过滤器功能，您可以传递一些特定的参数，例如`:model`, `:value`，`:field`在这种情况下，我将使用`:model`它来访问当前模型的属性。

```
class Model_Category extends ORM {

    public function filters()
    {
        return array(
            'slug' => array(
                array(array($this, 'create_slug'), array(':model')),
            ),
        );
    }

    public function create_slug($model)
    {
        $model = ($model instanceof ORM) ? $model : $this;

        $number = 1;

        $slug = UTF8::transliterate_to_ascii($model->name);
        $slug = preg_replace("/[^a-zA-Z0-9\/_|+ -]/", '', $slug);
        $slug = UTF8::strtolower(trim($slug, '-'));
        $slug = preg_replace("/[\/_|+ -]+/", '-', $slug);

        while ( ! $this->unique_slug($slug))
        {
            if ( ! preg_match('/\d+$/', $slug))
            {
                $slug .= '-'.$number;
            }
            $slug = preg_replace('/\d+$/', $number++, $slug);
        }

        return $slug;
    }

    public function unique_slug($slug)
    {
        return (bool) DB::select(array('COUNT("*")', 'total_count'))
            ->from($this->_table_name)
            ->where('slug', '=', $slug)
            ->where($this->_primary_key, '!=', $this->pk())
            ->execute($this->_db)
            ->get('total_count');
    }

} 
```

上面的例子可能功能不全，但我希望你能明白。

# javascript - 带有节点（和 Django）的服务器端 javascript

> ID：11855107
> 
> 赞同：2
> 
> 时间：2012-08-07T22:34:37.550
> 
> 标签：javascript, python, django, node.js

我的服务器上安装了节点。我想执行一个 JavaScript 文件，它基本上从 Django 模型中获取一些信息。如何从 Django 内部将 JSON 和大型 textarea 变量传递到我的节点脚本中？

```
class Page(models.Model):                
    html    = models.TextField(blank = True, null = True)                
    less    = models.TextField(blank = True, null = True)
    context = models.TextField(blank = True, null = True)

    def render(self):
        # pass context (converted to JSON), less and html to node script and compile.
        # How to do this? 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:14:55.660

这是我能够做到这一点的方法：

```
import subprocess
...
command_list = ['node', 'static/js/node_script.js']

try:
  output = subprocess.check_output(command_list)
except subprocess.CalledProcessError:
  output = "Error in command_list." 
```

# android - 将 Android sqlite 数据库从一台设备恢复到另一台设备

> ID：11855108
> 
> 赞同：0
> 
> 时间：2012-08-07T22:34:44.020
> 
> 标签：android, sqlite

我正在尝试将驻留在 SD 卡根目录上的 sqlite 数据库文件从一台设备复制到另一台运行我的应用程序的设备。

我需要这样做，因为我需要从我们客户的一台设备上使用数据库调试应用程序，女巫出现了一个错误。

我们的客户向我们发送了数据库文件（通过 USB 连接复制）。

该文件使用桌面客户​​端打开时没有问题，但是当我尝试在我的设备中运行该应用程序时，出现以下异常：

> 08-07 19:15:17.707：E/br.com.logann.rotasmovel.application.RotasApplication(1799)：原因：android.database.sqlite.SQLiteDatabaseCorruptException：数据库磁盘映像格式错误

有谁知道如何做到这一点？如何在不损坏数据库的情况下将文件从一台设备复制到另一台设备？

# javascript - D3 的力导向布局基础

> ID：11855109
> 
> 赞同：6
> 
> 时间：2012-08-07T22:34:47.993
> 
> 标签：javascript, d3.js, force-layout, physics-engine

我正在使用 d3.js 进入令人兴奋的力导向布局世界。我已经掌握了 d3 的基础知识，但我无法弄清楚设置力导向布局的基本系统。

现在，我正在尝试创建一个简单的布局，其中包含一些浮动到中心的未连接气泡。很简单吧！？创建了正确的圆圈，但没有任何反应。

**编辑：问题似乎是 force.nodes() 返回初始数据数组。在工作脚本上， force.nodes() 返回一个对象数组。**

这是我的代码：

```
<script>
  $(function(){

    var width = 600,
        height = 400;

    var data = [2,5,7,3,4,6,3,6];

    //create chart
    var chart = d3.select('body').append('svg')
        .attr('class','chart')
        .attr('width', width)
        .attr('height', height);

    //create force layout
    var force = d3.layout.force()
        .gravity(30)
        .alpha(.2)
        .size([width, height])
        .nodes(data)
        .links([])
        .charge(30)
        .start();

    //create visuals
    var circles = chart.selectAll('.circle')
        .data(force.nodes()) //what should I put here???
        .enter()
        .append('circle')
        .attr('class','circles')
        .attr('r', function(d) { return d; });

    //update locations
    force.on("tick", function(e) {
      circles.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
    });

  });

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T21:41:30.223

这就是问题所在。您输入的数组`force.nodes(array)`需要是一个对象数组。

所以：

`var data = [{number:1, value:20}, {number:2, value:30}...];`

作品。甚至只是

`var data=[{value:1},{value:2}];`

使脚本工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:39:59.177

您需要更新`cx`并`cy`在`force.on`处理程序中。

```
//update locations
force.on("tick", function(e) {

  circles.attr("cx", function(d) { return d.x - deltaX(d, e) ; })
    .attr("cy", function(d) { return d.y - deltaY(d, e); });
}); 
```

`deltaX`并且功能`deltaY`取决于您的力量模型。

# jquery - 使用 dropmenu.js 突出显示 JQuery 导航

> ID：11855111
> 
> 赞同：0
> 
> 时间：2012-08-07T22:35:08.447
> 
> 标签：jquery, navigation, highlight

我是 JQuery 的新手，但我发现它真的很有用。我试图突出显示用户正在使用 JQuery 的当前页面的导航项。我已经尝试了几种我发现的类似技术，但我无法让任何东西正常工作，我想知道这是否是因为我正在使用 dropmenu.js，这可能会导致一些问题。

我创建了一个名为 .selected 的 CSS 类，当手动将其应用于导航项时，它可以满足我的需要。然后我得到了以下 JQuery 代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$('#nav-one li a').click(function() {
$(this).closest("li").addClass('selected').siblings().removeClass('selected');
return(false);  
});
</script> 
```

我的菜单如下所示：

```
<ul id="nav-one" class="dropmenu css-only">
<li><a href="index.html">Home</a></li>
<li><a href="our_cupcakes.html">Our Cupcakes</a>
<ul>
<li><a href="birthday_cupcakes.html">Birthday Cupcakes</a></li>
<li><a href="new_baby_cupcakes.html">New Baby Cupcakes</a></li>
<li><a href="anniversary_cupcakes.html">Anniversary Cupcakes</a></li>
<li><a href="just_because_cupcakes.html">Just Because Cupcakes</a></li>
<li><a href="seasonal_cupcakes.html">Seasonal Cupcakes</a></li>
<li><a href="special_order_cupcakes.html">Special Order Cupcakes</a></li>
</ul>
</li>
<li><a href="flavours_and_colours.html">Flavours &amp; Colours</a></li>
<li><a href="faqs.html">FAQs</a>
<ul>
<li><a href="faqs.html">General questions</a></li>
<li><a href="faqs.html#ingredients">Ingredients</a></li>
<li><a href="faqs.html#delivery">Delivery &amp; Pick-up</a></li>
<li><a href="faqs.html#about">About us</a></li>
</ul>
</li>
</li>
<li><a href="order_cupcakes.php">Order Cupcakes</a> </li>
</ul> 
```

Dropmenu.js 完成我的下拉菜单工作，并且有一个单独的 CSS，但我看不出这会阻止我使用 JQuery 将 .selected 类应用于导航项，但我可能是错的。

有人能给我一些关于我可能出错的地方的提示吗？最终代码将出现在我妻子的家庭烘焙网站[http://cupcakes.ladybirdbakery.co.uk](http://cupcakes.ladybirdbakery.co.uk)

非常感谢。

蚂蚁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:44:38.287

**编辑 2**：我没有意识到您试图突出显示用户所在页面的菜单选项。那是完全不同的事情，你现在做的是接近 i 的错误方式，原因如下：当用户点击一个链接时，该类`selected`被添加到`<li>`. 但是随后会加载一个*全新的页面。****JavaScript（和 jQuery）对网页所做的更改不会在以后的页面中持续存在。***所以这意味着当新页面加载时，没有一个`<li>`s 有`selected`类，直到有人点击一个（但随后另一个页面将立即加载，所以他们不会看到`li`突出显示）。
至于如何实现这一点，我建议只需手动将类添加`selected`到正确的`li`在每个 HTML 文件中。但如果你真的想使用 JavaScript，下面是代码：

```
$(function(){ // this is a shortcut for $(document).ready(function(){
  var filename = location.pathname.substring(location.pathname.lastIndexOf('/')+1)
  $('a[href="' + (filename ? filename : 'index.html') + '"]').parent('li').addClass('selected')
}) 
```

所以首先我们创建一个变量`filename`并将其设置为当前页面的文件名。然后我们找到所有属性等于文件名`<a>`的s ，获取它们的父元素，并添加类。我希望这有帮助。如果您有更多问题或疑问，请告诉我。谢谢！`href``<li>``selected`

# php - 文件上传在灯箱内无法正常工作

> ID：11855114
> 
> 赞同：0
> 
> 时间：2012-08-07T22:35:23.640
> 
> 标签：php, jquery, file-upload, lightbox

我正在使用 Lightbox Evolution：

[http://codecanyon.net/item/jquery-lightbox-evolution/115655](http://codecanyon.net/item/jquery-lightbox-evolution/115655)

单击图像时打开灯箱。灯箱包含一个`<input type="file" />`标签。该标签本身可以完美运行，但在灯箱内时，.php 文件不会接收`$_FILES`参数。

**索引.html**

```
<script>
$('#uploadFiles').live('change', function(event){
    $("#preview").html('');
    $("#preview").html('<img src="images/spinner.gif" title="Uploading..."/>');
    $("#imageform").ajaxForm({
        target: '#preview'
    }).submit();
});
</script> 
```

```
<div id='left-picture'>
    <a href="lightbox[width]=524&lightbox[height]=178#form-id" class="lightbox">
        <div id="preview">
            <img src="images/default_profile_image.jpg" width="192" height="225" />;
        </div>
    </a>
    <div id="form-id" style="display:none;">
        <form id="imageform" method="post" enctype="multipart/form-data" action="up.php">
            <input type="file" name="uploadFiles[]" id="uploadFiles" />
        </form>
        <script type='text/javascript'>
        </script>
    </div>
</div> 
```

**上传.php**

```
<?php
if(isset($_FILES["uploadFiles"]))
{
    echo '<img src="'.$theImage.'" class="preview">';
}
?> 
```

# ide - 在 Aptana Studio 3.0 中拥有我的站点的本地和远程版本，就像 Dreamweaver 那样

> ID：11855119
> 
> 赞同：1
> 
> 时间：2012-08-07T22:35:42.463
> 
> 标签：ide, ftp, aptana, dreamweaver

在 Dreamweaver 中，我可以设置一个项目，使我拥有远程端，即我的实时站点所在的位置，以及本地端，这些完全相同的文件以相同的结构驻留在我的硬盘驱动器上。如何在 Aptana Studio 3.0 中执行此操作？我只知道如何远程访问一个站点，所以我可以很好地编辑文件，但我不知道如何在我的硬盘驱动器上为这些文件提供一个永久的家，所以我可以（例如）上传新文件到我的服务器，而无需打开单独的 FTP 程序。

在他们的网站上，Aptana 将以下内容吹捧为[Aptana Studio 2.0 的新功能之一](http://www.aptana.com/products/studio2/releasenotes)：

> 从根本上改进了远程本地文件传输功能。有一个全新的 UI 和基础架构，用于指定连接、将它们与项目连接以及在各个方向复制文件。

这听起来像是我想做的，但无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:48:01.203

有一些关于在本地项目和 FTP 站点之间创建连接的 wiki 页面：

[https://wiki.appcelerator.org/display/tis/FTP%2C+SFTP%2C+and+FTPS+Deployment](https://wiki.appcelerator.org/display/tis/FTP,+SFTP,+and+FTPS+Deployment)

[https://wiki.appcelerator.org/display/tis/Create+a+FTP+Connection](https://wiki.appcelerator.org/display/tis/Create+a+FTP+Connection)

[https://wiki.appcelerator.org/display/tis/Managing+FTP+Connections](https://wiki.appcelerator.org/display/tis/Managing+FTP+Connections)

希望这些帮助。

# axapta - 无法在 AX 2009 中获得外部联接或注释存在加入工作

> ID：11855120
> 
> 赞同：1
> 
> 时间：2012-08-07T22:35:43.007
> 
> 标签：axapta, dynamics-ax-2009, x++

我有一个完全空白的自定义表（DatabaseLogFixLog），只有一个名为“refRecId”的字段/列。我将它加入到 SysDatabaseLog（日志）。计划是批量更新SysDatabaseLog，当我更新SysDatabaseLog时，我会插入我更新的行的recId。我的 SysDatabaseLog 中有 370 万条记录。我已经尝试过如下所示的notexists join 和outer join。我的代码有什么问题？两者都只是完全锁定了我的系统，调试器不会进入循环。

**外联：**

```
updateCounter = 10;
while select forupdate log
    order by CreatedDateTime, RecId
    outer join databaseLogFixLog
    where databaseLogFixLog.RefRecId != log.RecId
{
    counter++;

    if (counter > updateCount)
        break;

    info(strfmt("%1", counter));
}

info(strfmt("Done updating %1", counter)); 
```

**Notexists 加入：**

```
updateCounter = 10;
while select forupdate log
    order by CreatedDateTime, RecId
    notexists join databaseLogFixLog
    where databaseLogFixLog.RefRecId == log.RecId
{
    counter++;

    if (counter > updateCount)
        break;

    info(strfmt("%1", counter));
}

info(strfmt("Done updating %1", counter)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:39:42.457

我认为我不会使用“forupdate”关键字循环遍历如此庞大的数据集，而是使用一个表缓冲区进行循环（日志）和另一个表缓冲区进行更新（logUpdate）。

我可以想象系统在循环 3.7 条磨机记录时挂起，并且在运行查询时，您必须等到它最终进入 while-select。

此外，请确保 RefRecId 在表上有索引，这样数据库引擎就不会运行全表扫描来尝试在 databaseLogFixLog 中查找行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:39:02.210

你的两个连接是不等价的，你的外连接是完全错误的。

你存在加入会起作用，但它必须对你的日志记录（370 万）进行排序，这需要一些时间。它还必须检查您的`logFixLog`记录是否存在（对于 370 万中的每一个），您需要在该`RefRecId`字段上建立一个索引以加快速度。

如果您想要速度，请删除该`order by`子句。

您也可以尝试添加`firstfast`关键字，它有时会给出更快的初始结果（但很少与 结合使用`order by`）。

最后，选择要更新的字段，尤其要避免容器字段，因为该字段不与其他字段一起存储。

# android - Eclipse 代码正在“消失”

> ID：11855123
> 
> 赞同：4
> 
> 时间：2012-08-07T22:36:03.977
> 
> 标签：android, eclipse

每当我只是在 Eclipse 中键入一些代码，然后单击灰色功能区区域上的错误灯泡时，我的代码就会离我而去，我必须关闭文件并重新打开它才能再次查看我的代码。有人可以帮我弄清楚如何阻止这个吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:32:25.897

我可能已经解决了这个问题。

转到 Eclipse 设置，然后

Java > 编辑器

取消选中“仅显示选定的 Java 元素”框。

这似乎可以解决问题。 ![在此处输入图像描述](../Images/112b6ece674cae0abe061c51d3d84c17.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:59:36.333

请按照以下步骤（我在 MAC 上运行 eclipse）修复 XML 问题。您后来评论说它是一个 java 文件，但实际上 java 文件对我来说没问题。

1.  打开日食
2.  打开菜单 eclipse->preference 或 file->preference （我猜是 Windows 版本）
3.  在左窗格中展开以下节点 XML->XML Files->Editor
4.  请看一下@下面的图片，确保你的设置相同，然后点击应用。
5.  问题消失了，但您不能再在 XML 文件中添加空行。

![下图显示了解决此问题的最佳配置](../Images/2cb94211df702e4260134ef65aaaff52.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:48:11.060

您可能会意外调用[代码折叠](http://en.wikipedia.org/wiki/Code_folding)。

你的编辑会向你展示这样的东西吗？

![代码折叠](../Images/983b93314ea04064e7ec49a2fecdd01a.png)

红色箭头（为强调而添加）指向圆圈中的减号。当您将鼠标悬停在减号下方的区域上时，会从减号到代码块底部绘制一条竖线，其中减号位于顶行旁边。

如果您（可能不小心）单击减号或双击竖线，则整个代码块将折叠，仅显示第一行。减号变为加号。单击加号将再次展开您的代码。

# mysql - 如何使用 MySql 中的单个查询按小时进行细分？

> ID：11855129
> 
> 赞同：4
> 
> 时间：2012-08-07T22:36:44.010
> 
> 标签：mysql

假设我的表如下所示：

```
Sessions
start_dts (datetime)
end_dts (datetime) 
```

数据如下所示：

```
start_dts             end_dts
12/25/2011 01:55:00   12/25/2011 03:30:00 
```

我需要查询结果如下所示：

```
Date          Hour    MinutesOnline
12/25/2011    0       0
12/25/2011    1       5
12/25/2011    2       60
12/25/2011    3       30
... (every hour of the date range being queried) 
```

这甚至可以通过单个查询来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:58:36.470

这是一个很好的开始。这适用于任何日期/时间范围。但是，它有一个主要的先决条件：您需要创建一个包含您正在扫描的所有间隔 `intervals`的字段的表。`dt_hr datetime`

```
Ex: '2011-12-25 00:00:00',
    '2011-12-25 01:00:00',
    '2011-12-25 02:00:00',
    '2011-12-25 03:00:00',
          . . .
    '2011-12-25 23:00:00' 
```

-

```
SELECT DATE_FORMAT(intervals.dt_hr,'%m/%d/%Y') AS Date,
       EXTRACT(HOUR FROM intervals.dt_hr) AS Hour,
       CASE 
          WHEN intervals.dt_hr > TIMESTAMPADD(HOUR,HOUR(s2.start_dts), DATE(s2.start_dts)) 
               AND intervals.dt_hr < TIMESTAMPADD(HOUR,HOUR(s2.end_dts), DATE(s2.end_dts))
            THEN 60
          WHEN intervals.dt_hr = TIMESTAMPADD(HOUR,HOUR(s2.start_dts), DATE(s2.start_dts)) 
               AND intervals.dt_hr < TIMESTAMPADD(HOUR,HOUR(s2.end_dts), DATE(s2.end_dts))
            THEN 60 - EXTRACT(MINUTE FROM s2.start_dts)
          WHEN intervals.dt_hr = TIMESTAMPADD(HOUR,HOUR(s2.end_dts), DATE(s2.end_dts))
               AND intervals.dt_hr > TIMESTAMPADD(HOUR,HOUR(s2.start_dts), DATE(s2.start_dts)) 
            THEN EXTRACT(MINUTE FROM s2.end_dts)
          WHEN intervals.dt_hr = TIMESTAMPADD(HOUR,HOUR(s2.start_dts), DATE(s2.start_dts)) 
               AND intervals.dt_hr = TIMESTAMPADD(HOUR,HOUR(s2.end_dts), DATE(s2.end_dts))
            THEN EXTRACT(MINUTE FROM s2.end_dts) - EXTRACT(MINUTE FROM s2.start_dts)
          ELSE 0
       END AS MinutesOnLine
FROM intervals
LEFT JOIN sessions s2 
  ON intervals.dt_hr >= TIMESTAMPADD(HOUR,HOUR(s2.start_dts), DATE(s2.start_dts)) 
    AND intervals.dt_hr <= TIMESTAMPADD(HOUR,HOUR(s2.end_dts), DATE(s2.end_dts)) 
```

要生成`intervals`表，您可以创建一个存储过程，该过程创建一个具有 date_hour 序列的临时表。有关执行此操作的方法， 请参阅[获取两个日期之间的日期列表。](https://stackoverflow.com/questions/510012/get-a-list-of-dates-between-two-dates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:46:54.180

更多的是一个重要的评论而不是答案。

MySQL 不够好，但 CTE 可以在 start_dts 和 end_dts 之间提出一组日期时间，所以你得到

```
startTime           endTime     
12/25/2011 01:00:00 12/25/2011 02:00:00
12/25/2011 02:00:00 12/25/2011 03:00:00
12/25/2011 03:00:00 12/25/2011 04:00:00 
```

在 CT.EndTime < DateAdd(sessions.end_dts, INTERVAL 1 HOUR) 上加入回会话

然后是 Hour(CTS.StartTime) - Hour(sessions.start_dts) 和 cte.endtime 和 start_dts 之间的时间差模数

也许...

# javascript - 创建所有原型函数都可以访问的局部变量

> ID：11855138
> 
> 赞同：3
> 
> 时间：2012-08-07T22:38:12.097
> 
> 标签：javascript, prototype

我正在尝试使用原型向对象添加函数，我以为我理解了整个概念，所以这就是我所做的：

```
function ImgContainer() {
    var current_image = 1;
}

ImgContainer.prototype = {
    init: function() {
        //initialize
    },
    scrollLeft: function(){
        //scroll left
    }
}

var imgContainer = new ImgContainer(); 
```

我假设我可以在 init 和 scrollLeft 中访问 c​​urrent_image，但是我得到了 Uncaught ReferenceError: current_image is not defined。

我应该怎么做才能有一个在 init 和 scrollLeft 函数中都可以访问的变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T22:40:46.463

您可以将其添加为实例化对象的属性：

```
function ImgContainer() {
    this.current_image = 1;
} 
```

然后访问函数中的属性：

```
ImgContainer.prototype = {
    init: function() {
        alert(this.current_image);
    },
    scrollLeft: function(){
        //scroll left
    }
} 
```

您仍然可以在方法中使用短期变量来临时存储内容以完成该方法的工作。但是您将对象的状态存储在其属性中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:42:48.360

您无法通过对象外部的原型方法访问对象的私有成员，因为它们超出了范围。你应该这样做：

```
function ImgContainer() {
    var current_image = 1;
    this.init = function() {
        current_image = 'something_blahblah';
    }
}

var imgContainer = new ImgContainer(); 
```

# c# - NHibernate 反转 Restrictions.Like 参数

> ID：11855140
> 
> 赞同：0
> 
> 时间：2012-08-07T22:38:20.857
> 
> 标签：c#, nhibernate, criteria-api

在 NHibernate 中，当使用 Criteria API 执行 Like 语句时，我有这样的事情：

```
query.Add(Restrictions.InsensitiveLike(Projections.Property<Order>(a => a.OrderId1), OrderId2, MatchMode.Anywhere)); 
```

其中 Order2 只是一个本地字符串参数。（您可以将 Order2 替换为“AB10002”）

这会创建一个这样的查询：

```
...WHERE Order.OrderId1 LIKE '%OrderId2%' 
```

但我也想检查是否：

... OR OrderId2 LIKE '%Order.OrderID1%'

这甚至可能吗？

*Like 限制不允许将投影属性作为第二个参数，这就是我不知道如何“反转”like 的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:26:24.040

您可以使用 chain `Add`，也可以使用`Restrictions.Or`两个`InsensitiveLike`：

```
query.Add(Restrictions.InsensitiveLike(Projections.Property<Order>(a => a.OrderId1), OrderId2, MatchMode.Anywhere))
.Add(Restrictions.InsensitiveLike(Projections.Property<Order>(a => a.OrderId2), OrderId1, MatchMode.Anywhere));

// ... or ...

query.Add(
    Restrictions.Or(
        Restrictions.InsensitiveLike(Projections.Property<Order>(a => a.OrderId1), OrderId2, MatchMode.Anywhere,
        Restrictions.InsensitiveLike(Projections.Property<Order>(a => a.OrderId2), OrderId1, MatchMode.Anywhere
    )
); 
```

我目前无法对此进行测试，但从记忆中我就是这样做的。

编辑：响应您的评论，您可以远离类型安全 API 并使用一些字符串。Expression.Like 方法有一个字符串值属性名称的重载。也许是这样的？：

```
query.Add(Restrictions.InsensitiveLike(Projections.Property<Order>(a => a.OrderId1), OrderId2, MatchMode.Anywhere))
     .Add(Expression.Like(OrderId2.ToString(), string.Concat("%", Projections.Property<Order>(a => a.OrderId1), "%"))); 
```

您可能还需要在其中添加一个 And（尽管我不需要）。

# model-view-controller - 体系结构和 Microsoft.AspNet.Providers

> ID：11855143
> 
> 赞同：1
> 
> 时间：2012-08-07T22:38:43.423
> 
> 标签：model-view-controller, architecture, dependency-injection, inversion-of-control, membership-provider

我已经在谷歌上搜索了几个小时，但找不到与我需要的完全相关的文章。

**我有一个包含以下层的 MVC4 站点：**

*   表示层 (MVC4)
*   业务层
*   数据层

我想使用以下提供程序：（使用 NuGet 安装） **安装包 Microsoft.AspNet.Providers**

我的问题更多的是建筑问题。

在我看来，我应该在我的数据层中安装它（Microsoft.AspNet.Providers），因为它是与会员数据库对话的代码。

然而，我能找到的所有帖子，即使是 Hanselman 也只是将它安装在表示层/MVC4 中。

我非常重视关注点分离，并在整个应用程序中使用依赖注入。

显然，我需要 web.config 中提供程序的配置，但需要数据层中的所有成员资格代码。

有什么想法吗？

谢谢RuSs

PS。很想知道使用 nuget 在数据/存储库层中安装它的过程。对于 Nuget 正在安装的 DLL 有点困惑。如果我安装在我的数据层中，nuget 不会更新 MVC web.config。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:51:52.540

答案实际上很简单：您应该将提供者隐藏在您在业务层中定义的*抽象后面。*这样，您可以编写一个实现此抽象的*适配器并包装提供程序，您可以使用**依赖**注入*将此适配器注入您的业务层。这样，您只需从 MVC4 项目中引用 Microsoft.AspNet.Providers，并防止任何代码直接引用 AspNet.Providers，这样您以后可以更轻松地切换。

 *例子：

```
// Define in business layer
public interface IAuthorizationService
{
    bool bool IsCurrentUserInRole(string role);
}

public class SomeBusinessLayerCommand
{
    private IAuthorizationService authorizer;

     public SomeBusinessLayerCommand(
         IAuthorizationService authorizer)
     {
         this.authorizer = authorizer;
     }

     public void SomeOperation()
     {
         if (this.authorizer.UserIsInRole("Admins"))
         {
             // some secret admin stuf
         }
         else
         {
             // some normal user stuf
         }
     }
} 
```

在您的表示层中，您可以定义一个适配器：

```
public class MembershipAdapter : IAuthorizationService
{
    public bool IsCurrentUserInRole(string role)
    {
        return Roles.IsUserInRole(role);
    }
} 
```

您可以映射`IAuthorizationService`到`MembershipAdapter`使用您最喜欢的 DI 容器。*

# iphone - xcode为每一行更改文本表格视图的颜色

> ID：11855145
> 
> 赞同：-1
> 
> 时间：2012-08-07T22:39:14.000
> 
> 标签：iphone, objective-c, xcode

我可以更改 1 个单元格中每一行的文本颜色吗，我知道我可以使用自定义单元格来制作它，但我想知道是否可以在不制作自定义单元格的情况下做到这一点

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"CustomCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.textLabel.text = [array objectAtIndex:indexPath.row];
cell.textLabel.font = [UIFont systemFontOfSize:18];
cell.textLabel.numberOfLines = 3;

return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:42:52.127

您可以对 indexPath 进行模 2 并检查它是否为 0。如果是，则使用一种颜色，如果不使用另一种颜色作为背景。这样，如果这是您的意图，您可以为每个第二个单元格着色

# php - php下拉打印所选项目

> ID：11855146
> 
> 赞同：-2
> 
> 时间：2012-08-07T22:39:40.313
> 
> 标签：php, mysql, html

我正在尝试打印选定的 dropdwon 项目。我已经编写了下拉代码以从数据库中获取列。

现在我应该打印所选下拉项目的唯一 ID。我不知道怎么做。请帮助我，这是我的代码

```
<? 
$query_name="SELECT id_cat,name FROM `fs01_metier_cat` ORDER BY `fs01_metier_cat`.`name` ASC";
$result = mysql_query ($query_name);

echo "<select name=category value=''></option>";
while($nt=mysql_fetch_array($result))
{
    echo "<option value=$nt[name]>$nt[name]</option>";
}
echo "</select>";

$query_id="SELECT id_cat FROM `fs01_metier_cat`";
$result1 = mysql_query ($query_id);
while($row = mysql_fetch_assoc($result1))
{
   echo $row['id_cat'];
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:45:23.943

尝试这个：

```
while($nt=mysql_fetch_array($result)){
    echo "<option value='{$nt['id_cat']}'>{$nt['name']}</option>";
} 
```

使用 {} php 还可以将数组值插入到字符串中，您应该在属性“value”的值周围设置 ''（这里有很多值.. ^^），html 符合 w3c（我不知道是否没有它们，浏览器会认为它是正确的..)

没有 { } 它看起来像这样：

```
while($nt=mysql_fetch_array($result)) {
    echo "<option value='".$nt['id_cat']."'>".$nt['name']."</option>";
} 
```

取决于您的编辑器代码突出显示在第二种情况下可能会更好;）

以及关于所选项目：

我建议您使用 jQuery 来获取所选项目的内容

```
var selectedId = $('#yourselectid option:selected').attr('value'); 
```

然后您可以将其写入文档或 div：

```
document.write(selectedId); 
```

或者

```
$('#yourDivIdWhereYouWantToPutTheSelectedId').html(selectedId); 
```

**重要：**请注意，我将值的索引更改为**id_cat**因为这样您就可以使用它们的 id 处理选项

由于每次更改下拉选择时所选选项都会更改，因此您无法通过 php.ini 处理此问题。有很多方法可以在没有像 jQuery 这样的庞大库的情况下做到这一点（因为它们也只是简单的 Javascript），但它们简化了很多事情；）

# android - Android 处理程序 - 无法正常工作

> ID：11855151
> 
> 赞同：0
> 
> 时间：2012-08-07T22:40:10.533
> 
> 标签：android

我想创建一个带有文本字段和按钮的 dialogBu​​ilder。这个想法是让程序等待任何进一步的操作，直到输入字段中的文本并单击 OK 按钮。下面是代码：

```
private static final Object wait = new int[0];
private static String result = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Handler h = new Handler();
    final Context context = MainActivity.this;
    h.post(new Runnable() {

        public void run() {
            final Builder dialogBuilder = new AlertDialog.Builder(context);
            dialogBuilder.setTitle(R.string.app_name);
            final LinearLayout panel = new LinearLayout(context);
            panel.setOrientation(LinearLayout.VERTICAL);
            final TextView label = new TextView(context);
            label.setId(1);
            label.setText(R.string.app_name);
            panel.addView(label);

            final EditText input = new EditText(context);
            input.setId(2);
            input.setSingleLine();
            input.setInputType(InputType.TYPE_CLASS_TEXT
                    | InputType.TYPE_TEXT_VARIATION_URI
                    | InputType.TYPE_TEXT_VARIATION_PHONETIC);
            final ScrollView view = new ScrollView(context);
            panel.addView(input);
            view.addView(panel);

            dialogBuilder
                    .setCancelable(true)
                    .setPositiveButton(R.string.app_name,
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    result = input.getText().toString();

                                    synchronized (wait) {
                                        wait.notifyAll();
                                    }

                                    dialog.dismiss();
                                }
                            }).setView(view);

            dialogBuilder.setOnCancelListener(new OnCancelListener() {
                public void onCancel(DialogInterface arg0) {
                    result = null;
                    synchronized (wait) {
                        wait.notifyAll();
                    }
                }
            });
            dialogBuilder.create().show();
        }

    });

    String localResult = null;
    try {
        synchronized (wait) {
            Log.d("Waiting", "Waiting " + localResult);
            wait.wait();
        }
        localResult = result;
        result = null;
        if (localResult == null) {
            // user is requesting cancel
            throw new RuntimeException("Cancelled by user");
        }
        Log.d("RESULT ", "RESULT " + localResult);
    } catch (InterruptedException e) {
        localResult = result;
        result = null;

        if (localResult == null) {
            // user is requesting cancel
            Log.d("CANCELED ", "CANCELED " + localResult);
            throw new RuntimeException("Cancelled by user");
        }
    }
    Log.d("RESULT AFTER THE DIALOG", "RESULT AFTER THE DIALOG " + result);
} 
```

该程序将进入 Log.d("Waiting", "Waiting" + localResult); 在那之后只是等待。活动窗口上未显示任何对话框生成器。使用debug模式，看到程序流程没有进入run()方法，但是Handler.post()的值是true。由于这个原因，对话框没有显示，程序正在等待。

我试图删除等待的时刻（删除 Handler.post()），只是为了看看对话框是否会显示，它显示并且一切都很好，但结果不是我需要的 - 我希望程序等待对话框的输入......我真的没有想法。

请你给我一些建议，因为我真的没有想法。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:07:27.737

`Handlers`不要在单独的线程中运行。所以当你打电话时`wait()`：

```
 synchronized (wait) {
        Log.d("Waiting", "Waiting " + localResult);
        wait.wait();
    } 
```

它无限期地等待，因为处理程序**与当前线程在同一线程上**运行。您`Runnable`只能在`onCreate()`方法完成后执行，但这永远不会发生，因为您刚刚调用了`wait()`.

您应该重新考虑您的想法并找到解决方法（例如，只要用户没有输入有效文本，就以通常的方式显示对话框并禁用“确定”按钮）。但是在 UI 线程上调用`wait()`不能顺利进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:46:49.810

您应该在 UI 线程中运行对话框的显示，而不是单独的线程。

一个例子是这样的：

## 在 onCreate()

```
 runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            // Display progress dialog when loading contacts
                            dialog = new ProgressDialog(this);
                            // continue with config of Dialog
                        }
                    });

                        // Execute the Asynchronus Task
                        new AsyncTask<Void, Void, Void>() {
                            @Override
                            protected Void doInBackground(Void... params) {
                                // code to execute in background
                                return null;
                            }
                            @Override
                            protected void onPostExecute(Void result) {
                                // Dismiss the dialog after inBackground is done
                                if (dialog != null)
                                    dialog.dismiss();

                                super.onPostExecute(result);
                            }

                        }.execute((Void[]) null); 
```

具体来说，这里发生的是 Dialog 显示在 UI 线程上，然后 AsyncTask 在 Dialog 运行时在后台执行。然后在执行结束时我们关闭对话框。

# javascript - JS：简单的hitArea代码？

> ID：11855154
> 
> 赞同：-1
> 
> 时间：2012-08-07T22:40:38.890
> 
> 标签：javascript, jquery

我记得在 Actionscript 中，当两个元素接触时很容易检测到，例如对游戏非常有用，只是一个名为的方法`hitArea`

因为我很着急，我不能从头开始编写代码我想知道是否有任何易于使用的插件，一个可能在 JS 中工作的插件，并且可以告诉我 elemA 和 elemB 何时在屏幕上的同一个位置

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:37:47.957

实际上JQuery Collision就是答案

# objective-c - 在ios中使用AVfoundation从流媒体服务器中提取视频？

> ID：11855156
> 
> 赞同：-1
> 
> 时间：2012-08-07T22:40:48.280
> 
> 标签：objective-c, ios, avfoundation

我能够使用 NSURL 从网页显示视频到 UIView，但我需要能够找到一种方法，使用 avfoundation 将视频从 Web 服务器流式传输到我的 iphone。我有点困惑我必须做什么才能做到这一点。任何指针都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:55:32.747

如果您只需要简单的电影播放，请查看[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)。对于更高级的需求，从[AVPlayer开始](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009530)

# php - 如何将 xml 对象转换为关联数组？

> ID：11855158
> 
> 赞同：0
> 
> 时间：2012-08-07T22:40:54.037
> 
> 标签：php, xml

我正在使用 google api 进行一些地理编码，并且想知道如何转换返回的 simplexml 对象？我尝试了以下方法，但它没有转换子对象..即..我想要一个多维数组。

```
$url = "http://maps.googleapis.com/maps/api/geocode/xml?address=".$adr."
&sensor=false";

$result = simplexml_load_file($url);

$result = (array) $result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:50:03.310

您可以发出 JSON 请求而不是 XML；推荐；除非您的应用程序需要它。然后使用：

```
json_decode( $result, true ); 
```

[http://us2.php.net/manual/en/function.json-decode.php](http://us2.php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T15:57:06.817

我发现这个函数对于递归地将 Object 转换为 Array 非常有用：

[http://forrst.com/posts/PHP_Recursive_Object_to_Array_good_for_handling-0ka](http://forrst.com/posts/PHP_Recursive_Object_to_Array_good_for_handling-0ka)

改编自上面的网站，在类之外使用它：

```
function object_to_array($obj) {
        $arrObj = is_object($obj) ? get_object_vars($obj) : $obj;
        foreach ($arrObj as $key => $val) {
                $val = (is_array($val) || is_object($val)) ? object_to_array($val) : $val;
                $arr[$key] = $val;
        }
        return $arr;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T22:49:53.893

将`SimpleXMLElement`对象转为 json 并将 json 字符串再次解码为关联数组：

```
$array = json_decode(json_encode($result), 1); 
```

简单的转换为数组并没有更深入，这就是使用`json_encode`and技巧的原因`json_decode`。

# c - 奇怪的malloc问题

> ID：11855159
> 
> 赞同：2
> 
> 时间：2012-08-07T22:40:59.663
> 
> 标签：c, malloc

我正在尝试 malloc 一个将被访问的浮点 **，`arrayToFill[channel][frame] = 0.f;`但如果我执行以下代码片段，我只能访问它，否则我会收到错误的访问错误。

```
arrayToFill = (float **) malloc((frameCount * 2) * sizeof(float *));

for(int i = 0; i < channelCount; i++)
{
    arrayToFill[i] = (float *) malloc(frameCount * sizeof(float));
} 
```

这似乎完全不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:46:42.820

这似乎应该是这样的：

```
float **arrayToFill = (float**) malloc(channelCount * sizeof(float*));

for(int i = 0; i < channelCount; ++i)
{
    arrayToFill[i] = (float*) malloc(frameCount * sizeof(float));
} 
```

或者，如果通道数是已知的并且是固定的：

```
#define CHANNEL_COUNT 2

float *arrayToFill[CHANNEL_COUNT];

for(int i = 0; i < CHANNEL_COUNT; ++i)
{
    arrayToFill[i] = (float*) malloc(frameCount * sizeof(float));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:45:55.497

那么如果你只需要一个矩形数组，你可以写

```
float* arrayToFill = malloc( channelCount * frameCount * sizeof(float) ); 
```

只需一点数学即可访问不同的部分

```
arrayToFill[ x + y * channelCount ]; 
```

如果你绝对必须有双下标，或者其中一个维度是可变的，那么你就没有办法摆脱你已经拥有的东西。

# python - py.test 日志控制

> ID：11855170
> 
> 赞同：31
> 
> 时间：2012-08-07T22:41:56.990
> 
> 标签：python, pytest

我们最近切换到 py.test 进行 python 测试（顺便说一句，这太棒了）。但是，我试图弄清楚如何控制日志输出（即内置的python 日志模块）。我们安装了 pytest-capturelog，它按预期工作，当我们想查看日志时，我们可以通过 --nologcapture 选项。

但是，您如何控制日志记录级别（例如信息、调试等）以及过滤日志记录（如果您只对特定模块感兴趣）。py.test 是否有现有的插件来实现这一点，还是我们需要自己推出？

谢谢，乔尼

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T06:34:48.833

Installing and using the [pytest-capturelog plugin](http://pypi.python.org/pypi/pytest-capturelog/) could satisfy most of your pytest/logging needs. If something is missing you should be able to implement it relatively easily.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-20T19:25:30.180

正如 Holger 所说，您可以使用[pytest-capturelog](https://pypi.python.org/pypi/pytest-capturelog)：

```
def test_foo(caplog):
    caplog.setLevel(logging.INFO)
    pass 
```

如果您不想使用 pytest-capturelog，您可以在日志配置中使用 stdout [StreamHandler](https://docs.python.org/2/library/logging.handlers.html#streamhandler)，以便 pytest 捕获日志输出。这是一个示例[basicConfig](https://docs.python.org/2/library/logging.html#logging.basicConfig)

```
logging.basicConfig(level=logging.DEBUG, stream=sys.stdout) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-08T16:08:27.920

有点晚的贡献，但我可以推荐[pytest-logging](https://github.com/saltstack/pytest-logging)作为一个简单的插入式日志捕获解决方案。在`pip install pytest-logging`您可以控制日志的详细程度（显示在屏幕上）之后

```
$ py.test -s -v tests/your_test.py
$ py.test -s -vv tests/your_test.py
$ py.test -s -vvvv tests/your_test.py 
```

等等... 注意 -`-s`标志很重要，没有它`py.test`会过滤掉所有`sys.stderr`信息。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-01-20T21:50:34.737

Pytest 现在原生支持通过`caplog`夹具进行日志记录控制；不需要插件。

您可以为特定记录器或默认情况下为根记录器指定日志记录级别：

```
import pytest

def test_bar(caplog):
    caplog.set_level(logging.CRITICAL, logger='root.baz') 
```

Pytest 还捕获日志输出，`caplog.records`以便您可以断言记录的级别和消息。有关详细信息，请参阅[此处](https://docs.pytest.org/en/latest/logging.html#caplog-fixture)和[此处](https://docs.pytest.org/en/latest/reference.html#_pytest.logging.LogCaptureFixture)的官方文档。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-04T22:46:55.340

更晚一点的贡献：您可以尝试[pytest-logger](https://pypi.python.org/pypi/pytest-logger)。该插件的新颖之处在于记录到文件系统：pytest 为每个测试项目提供 nodeid，可用于组织测试会话日志目录（借助 pytest tmpdir 工具及其测试用例开始/结束挂钩）。

您可以分别为终端和文件系统配置多个处理程序（带有级别），并提供自己的 cmdline 选项来过滤记录器/级别，以使其适用于您的特定测试环境 - 例如，默认情况下，您可以将全部记录到文件系统，将一小部分记录到终端，这`--log`如果需要，可以使用选项在每个会话的基础上进行更改。如果用户没有定义任何钩子，插件默认什么都不做。

# java - Java - JTree UpdateUI 在可运行 Jar 中不起作用

> ID：11855174
> 
> 赞同：2
> 
> 时间：2012-08-07T22:42:33.157
> 
> 标签：java, macos, swing, jtree, executable-jar

当我动态地将节点添加到 JTree 并在 Mac OSX 上调用 tree.updateUI() 时，它可以工作，但是当我将 jar 移动到 Windows 时，它不会更新树。这仅在可运行 jar 模式下。如果我只是在 Eclipse 中运行它，它就可以正常工作。

在 Windows 中，我想它通过显示根节点下有一个子节点来更新它，但不显示子节点。它也应该显示子节点。

我应该如何解决这个问题？

这是我构建可运行jar的方式吗？我使用了 Eclipse 导出的东西。如果是这样，有没有更好的方法来制作它？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:52:27.387

该`updateUI()`方法不适用于此用途。相反，将树模型告诉受影响的节点，如此[处](https://stackoverflow.com/a/11639595/230513)[`reload()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeModel.html#reload%28javax.swing.tree.TreeNode%29)所示。

# fortran - Fortran 中的 DATA 声明

> ID：11855178
> 
> 赞同：0
> 
> 时间：2012-08-07T22:42:48.140
> 
> 标签：fortran

有谁知道来自旧 Fortran 代码的以下行中 4HEND 的含义？

数据 XHEND / 4HEND /

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T23:11:14.593

*4HEND*是代表字符串“END”的Hollerith码。在非常古老的 FORTRAN 中，变量*XHEND*甚至可能是一个 4 字节整数或用于保存字符数据的实数。如果隐式类型在这个程序中有效，XHEND 将是一个真实的。Hollerith 代码的另一个最新问题：[在数组中同时写入字符和数字](https://stackoverflow.com/questions/11695859/writing-both-characters-and-digits-in-an-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:04:03.170

它取代了赋值

```
XHEND='END ' 
```

# android - 使用 xfer 剪辑图像视图

> ID：11855182
> 
> 赞同：2
> 
> 时间：2012-08-07T22:43:07.400
> 
> 标签：android, android-canvas

我正在尝试剪切图像视图，现在我已经创建了一个自定义组件。这是代码：

```
package it.patrick91.eventually;

import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.PorterDuff;
import android.graphics.PorterDuffXfermode;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.ImageView;

public class CutImageView extends ImageView {
    private Path clipPath;
    private int type = 0;

    public int getType() {
        return type;
    }

    public void setType(int type) {
        Log.d("cut", new Integer(type).toString());
        this.type = type;
    }

    public CutImageView(Context context) {
        super(context);
    }

    public CutImageView(Context context, AttributeSet attrs) {
        super(context, attrs);

        TypedArray a = getContext().obtainStyledAttributes(attrs,
                R.styleable.CutImageView);

        setType(a.getInt(R.styleable.CutImageView_type, 0));
    }

    public CutImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        TypedArray a = getContext().obtainStyledAttributes(attrs,
                R.styleable.CutImageView);

        setType(a.getInt(R.styleable.CutImageView_type, 0));
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        Log.d("cut", "size changed " + w + " " + h);
        clipPath = new Path();
        if (type == 0) {
            clipPath.moveTo(0, 0);
            clipPath.lineTo(0, h);
            clipPath.lineTo(w, 0);
            clipPath.lineTo(0, 0);
        } else {
            clipPath.moveTo(w, 0);
            clipPath.lineTo(w, h);
            clipPath.lineTo(0, h);
        }
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        //canvas.clipPath(clipPath);
        super.onDraw(canvas);

        Bitmap rounder = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(rounder);    

        Paint xferPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        xferPaint.setColor(Color.BLACK);

            c.drawPath(clipPath, xferPaint);

            xferPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
        canvas.drawBitmap(rounder, 0, 0, xferPaint);
    }

} 
```

所以我基本上使用 xfer 方法，如[this answer](https://stackoverflow.com/questions/1705239/how-should-i-give-images-rounded-corners-in-android/1718738#1718738)所示。

问题是被**擦除**的部分是黑色的。正如我从该答案的评论中看到的那样，我必须确保我处于 ARGB 绘图上下文中，但我不确定我是否可以在 ImageView 的子类中做到这一点。你能帮助我吗？

这就是我得到的：

![在此处输入图像描述](../Images/b22da26fc66cc33d89220e5c756e3dbc.png)

# objective-c - 在 IOS 类中使用 @selector

> ID：11855198
> 
> 赞同：-1
> 
> 时间：2012-08-07T22:45:40.870
> 
> 标签：objective-c, ios, xcode, class, selector

我正在创建一个创建计时器的类，然后使用@selector 或（SEL）调用 void。应用程序在 [mytimer timer…] 时崩溃；被调用是因为“调用了未知的选择器”。错误是它没有找到我给它的空隙，但我知道空隙工作正常。我的问题是如何正确编写 myselector 部分？

```
+ (void) timer:(NSTimer*)timer interval:(int)interval selector:(SEL)myselector   
{
timer = [NSTimer scheduledTimerWithTimeInterval:interval
                                         target:self
                                       selector:myselector
                                       userInfo:nil
                                        repeats:YES];
} 
```

这是正在实现的方法：

```
[mytimer timer:NameOfTimerTheWorks interval:0.1 selector:@selector(myVoid)];

... 

- (void)myVoid
{
Do stuff
} 
```

我也知道这个类看起来完全没用，但我没有包含更多内容。我的问题围绕着选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:55:42.130

您使用@selector() 没有任何问题，您的问题在于Objective C 类，以及`self`在不同范围内的含义。

问题是您在类`+`方法中创建计时器`self`，此时不是您想要的实例，它实际上是`Class`它本身。我不会在类方法中这样做，但如果你必须这样做，只需传入对目标的引用，它就会发送你期望的消息。

将您的实现更改为以下内容，以便传入目标并返回计时器

```
+ (NSTimer *)timerWithTarget:(id)target 
     interval:(int)interval 
     selector:(SEL)myselector   
{
  return [NSTimer scheduledTimerWithTimeInterval:interval
                                           target:target
                                         selector:myselector
                                         userInfo:nil
                                          repeats:YES];
}

NameOfTimerTheWorks = [mytimer timetWithTarget:self interval:0.1 selector:@selector(myVoid)];

- (void)myVoid
{
  //Do stuff
} 
```

此外，在 Objective C 中，命名类的标准方法是使用大写字母，并在适当的情况下使用驼峰式命名。您的课程应该是`MyTimer`而不是`mytimer`，并且 iVars 是小写的，例如`nameOfTimerTheWorks`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:09:32.190

我认为问题在于您正在尝试使用类级别方法访问实例级别方法。

我将 + 更改为 - 以便它是实例级方法。

如果您希望您的方法是类级别的，则需要您将要调用的方法也设置为类级别。

```
- /* <-- + */(void) timer:(NSTimer*)timer interval:(int)interval selector:(SEL)selector   
{

    timer = [NSTimer scheduledTimerWithTimeInterval:interval
                                         target:self
                                       selector:selector
                                       userInfo:nil
                                        repeats:YES];

} 
```

# php - 在 jquery/javascript 中创建一个数组数组

> ID：11855218
> 
> 赞同：1
> 
> 时间：2012-08-07T22:47:51.640
> 
> 标签：php, javascript, jquery, multidimensional-array

有人可以告诉我如何创建一个数组 $custom_interval 键值对天和小时：

```
custom_interval[[Mon][0 1 2 3 4 5 6 7]]
custom_interval[[Tue][0 1 2 3 4 5 6 7]] 
```

所以在PHP中，我应该可以说

```
$hours = $custom_interval[$day]; 
```

我写的代码给了我

```
[object Object] 
```

这是代码：

```
//create a 2 dimentional array of days and time intervals and assign it to hidden input form element.
        for(var i=0; i<uniquedayArray.length; i++) {
                innerArray.push(uniquedayArray[i]);
                for(j=0;j<timeArray.length; j++){
                  outerArray[innerArray] = timeArray[j];
                }
        }
        alert(outerArray); 
```

有人可以告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:04:58.420

您是否尝试过查看[Javascript 对象](http://www.w3schools.com/js/js_objects.asp)？

您可以执行以下操作：

```
var data = {
"monday" : [1,2,3,4,5,6,7],
"tuesday" : [1,2,3,4,5,6,7]
} 
```

你可以通过说来访问信息`data.monday[4]`。该链接介绍了一种动态创建这些对象的方法。

# html - 宽度 100%，位置固定

> ID：11855219
> 
> 赞同：1
> 
> 时间：2012-08-07T22:47:54.463
> 
> 标签：html, css

我有带有侧边栏的页面。这里有张桌子。无论表格有多大，我都想在屏幕底部显示一行。这条线应该与表格具有相同的宽度。

这是我尝试过的，但没有成功：

```
<div style="width: 100%; position: relative;">
    <table>
           ...
    </table>

    <!-- this div will be width as whole page, not as table -->
    <div style="width: inherit; position: fixed; bottom: 0;">Wuah!</div>
</div> 
```

请告诉我一些建议如何使它工作:)
这是一个活生生的例子，包括侧边栏：http: [//other.dttrading.sk/orders.htm](http://other.dttrading.sk/orders.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:49:41.700

您应该使用`<div>`包含表格的表格来格式化它们，而不是单独的表格来尝试将其格式化为表格。

```
<div style="width: 100% position: relative;">
   <!-- this next div is what you should use to format the table and line -->
   <div style ="width: how big you want your table AND line">
    <table>
           ...
    </table>
   </div>
    <!-- this div will be width as whole page, not as table -->
    <div style="width: inherit; position: fixed; bottom: 0;">Wuah!</div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:27:06.157

问题是`fixed`元素相对于视口是固定的，而不是它们的父元素，它们也会从视口继承宽度。您可以通过检查 DOM 来检查固定页脚的宽度是否与`<body>`.

一种可能的解决方法：

*   让它`left: 0`左对齐页脚
*   设置一些`z-index`值，使页脚位于侧边栏后面
*   在页脚内添加另一个容器，将其向右偏移，并将其中的内容居中。

（未测试）

# wcf - 如果 WCF 代理的方法不可见，它如何实现 ICommunicationObject？

> ID：11855225
> 
> 赞同：6
> 
> 时间：2012-08-07T22:48:40.010
> 
> 标签：wcf, interface, channelfactory, implements

WCF 通道（通过 ChannelFactory 创建）如何实现 ICommunicationObject，但不公开 Close() 方法，例如，除非您将代理转换为 ICommunicationObject？那有意义吗？

我今天在回家的路上一直在想这件事，但我想不通。也许我问错了问题？也许我在问一个愚蠢的问题？:)

这是某种忍者技巧吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T22:50:02.363

这是通过[Explicit Interface Implementation](http://msdn.microsoft.com/en-us/library/ms173157.aspx)完成的。

假设您有一个接口，如下所示：

```
public interface IFoo
{
     void Foo();
} 
```

您可以正常执行此操作：

```
public class Bar : IFoo
{
     public void Foo() {} // Implicit interface implementation
} 
```

*或者，您可以显式*实现接口成员，这需要强制转换：

```
public class Baz : IFoo
{
     void IFoo.Foo() {} // This will require casting the object to IFoo to call
} 
```

这有时非常有用。例如，通常`IDisposable`在首选 API 调用的类中实现`.Close()`。通过`IDisposable`显式实现，您“隐藏”了该`Dispose()`方法，但仍允许通过 using 语句使用类实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T22:57:05.347

该类显式地`Channel`实现了`ICommunicationObject`接口。这是一个演示显式接口实现和隐式接口实现之间区别的示例：

```
internal interface IExample
{
    void DoSomething();
}

class ImplicitExample : IExample
{
    public void DoSomething()
    {
        // ...
    }
}

class ExplicitExample : IExample
{
    void IExample.DoSomething()
    {
        // ...
    }
}

class Consumer
{
    void Demo()
    {
        var explicitExample = new ExplicitExample();
        // explicitExample.DoSomething(); <-- won't compile
        ((IExample)explicitExample).DoSomething(); // <-- compiles

        var implicitExample = new ImplicitExample();
        implicitExample.DoSomething(); // <-- compiles
    }
} 
```

这是关于此主题的 MSDN 文章的链接：http: [//msdn.microsoft.com/en-us/library/ms173157.aspx](http://msdn.microsoft.com/en-us/library/ms173157.aspx)

# java - 将按钮的图像设置为应用程序图标

> ID：11855233
> 
> 赞同：0
> 
> 时间：2012-08-07T22:49:28.580
> 
> 标签：java, android

我的应用程序中有一个按钮可以启动另一个应用程序（用户可以像这样通过 longClick 选择哪个应用程序）

```
btnNavigation.setOnLongClickListener(new View.OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
         // Pick an application
            Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
            mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

            Intent pickIntent = new Intent(Intent.ACTION_PICK_ACTIVITY);
            pickIntent.putExtra(Intent.EXTRA_INTENT, mainIntent);
            startActivityForResult(pickIntent, 1);

            return false;
        }
    }); 
```

通过 onActivityResult 我得到了一个意图

现在我想将 btnNavigation 的图像设置为用户选择的应用程序的图标

如何从用户选择的包中获取图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:38:59.233

您可以像这样获取应用程序图标的可绘制对象：

```
PackageManager pk = context.getPackageManager();
Drawable d = pk.getApplicationIcon(applicationPackageName); 
```

# unix - 在日志文件中使用 Sed

> ID：11855237
> 
> 赞同：2
> 
> 时间：2012-08-07T22:49:53.253
> 
> 标签：unix, sed, awk, command, match

原始日志文件示例：

"GET /dynamic_preroll_playlist.fmil?domain=13nwuc&width=480&height=360&imu=medrect&pubchannel=filmannex&ad_unit=category_2&sdk_ver=2.4.1.3&embeddedIn=http%3A%2F%2Fwww.filmannex.com%2Fmovie%2Fend-of-the-tunnel%2F20872&sdk_url= http%3A%2F%2Fstatic2.filmannex.com%2Fflash%2F& **viewport=10,261,971,0,971,0,10,261** HTTP/1.1", 200, 201, 1516, 16363, " [http://static2.filmannex.com/flash/ yume_ad_library.swf](http://static2.filmannex.com/flash/yume_ad_library.swf)", pl.networks.com, "Mozilla/4.0（兼容；MSIE 7.0；Windows NT 6.0；FunWebProducts；GTB7.3；SLCC1；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30618 ; FunWebProducts的; .NET4.0C） “ ”24_100_150_188_jZKFKQQjdRNM6e“， ”0rO0ABXd8AAAACgAAASQAAAaLAAAGiwAAASgAAAaLAAAGiwAAAVoAAAaLAAAGiwAAAVkAAAaKAAAGiwAAAdwAAAaKAAAGiwAAAhIAAAaKAAAGiwAAAhUAAAaKAAAGiwAAAhYAAAaKAAAGiwAAAhsAAAaKAAAGiwAAAiwAAAaKAAAGiw **“， ” - “， ” - “， ”@ YD_1; 233_2739“， - ， ” - “， ”24.100.150.188“，” 199.127。 205.6"

所需的输出是第三和第四视口：

```
971 0 
```

我使用了命令：

```
sed -n 's/.*viewport=\([^&]*\)/\1 /p' filename 
```

得到错误的输出：`10,261,971,0,971,0,10,261** HTTP/1.1", 200, 201, 1516, 16363, .....`后面有太多冗余信息。

谁能帮我解决这个问题？使用 sed 命令获取视口的第 3 和第 4 个参数？

提前非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:55:00.503

您剥离了正确的字段，现在将输出提供给另一个工具：

```
sed ...... | awk -F, '{print $3, $4}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T22:59:47.173

或者，如果您想使用 grep 和 cut（嘿，并非所有内容都有 sed 和 awk）：

```
grep -o "&viewport=[0-9,]*" filename | grep -o "[0-9,]*" | cut -d "," -f 3,4 
```

或者您可以使用之前的命令并将其传递给同一个剪辑。

```
sed -n 's/.*viewport=\([^&]*\) /\1/p' sedtest | cut -d "," -f 3,4 
```

此外，它捕获其余文本的原因是因为您只用数字替换了开头的所有内容，而将所有内容留在了结尾。*如果您*只想捕获视口参数，则需要替换整个字符串，而不仅仅是开头。还要在否定字符集中添加一个空格以在其后停止。

```
sed -n 's/.*viewport=\([^& ]*\).*/\1/p' sedtest 
```

用它你可以做我之前说的（虽然你不需要这个最新的添加）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:40:08.033

使用`grep`、`perl`regex 和`awk`在管道中的一种方法：

```
< file.txt grep -oP "viewport=[^ ]+" | awk -F "[=,]" '{ print $3, $4 }' 
```

一种使用方式`awk`：

```
awk -v RS="viewport=[^ ]+" 'RT != "" { split (RT,array,"[=,]"); print array[1 + 3], array[1 + 4] }' file.txt 
```

**编辑：**

在`awk`唯一的解决方案中，我可以更轻松地选择感兴趣的视口字段。如果您想要第 5 和第 6 个字段，只需将 更改`array[1 + 3], array[1 + 4]`为`array[1 + 5], array[1 + 6]`。此外，这些解决方案还有一个额外的优势，即每行查找多次出现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T00:03:46.280

另一个`awk`唯一的解决方案：

```
awk '{split($0,a,"viewport=");split(a[2],b,",");print b[3],b[4]}' filename 
```

产量

```
971 0 
```

这将使用字符串的输入行拆分`"viewport="`为一个名为 的数组`a`，并获取`a`包含*其后* `"viewport="`数据的数组元素并将其拆分为数组`b`，然后打印出我们感兴趣的元素。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-07T22:56:16.117

只需使用 awk

```
gawk 'match($0, /&viewport=[0-9]+,[0-9]+,([0-9]+),([0-9]+)/, m){print m[1], m[2]}' 
```

注意：第三个参数 to`match`仅在 中可用`gawk`，所以这个脚本是 gawk 特定的。说明：我们为`match`函数提供正则表达式，它捕获`viewport`. `match`如果提供的正则表达式可以与整个记录的某个子字符串成功匹配，则返回非零值。然后它只打印捕获的组。

# tfs - 备用 TFS Web 界面

> ID：11855240
> 
> 赞同：1
> 
> 时间：2012-08-07T22:50:19.390
> 
> 标签：tfs, web, wsdl

我知道 TFS 有一个随它一起安装的 Web 服务器，这很棒。我知道它与 Sharepoint 集成得非常紧密，而且非常好，这也很棒。

不过，我想知道的是，由于 TFS 的 WSDL 是公开的，本质上也使用于发送和接收数据的 API 也是公开的；是否有任何替代的、非 Microsoft 的 TFS 接口提供大部分或全部功能，以及消费者驱动的增强功能，例如图表或报告解决方案，这些解决方案不是开箱即用的？

我搜索了全能的谷歌和必应，事实证明它们很难找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:33:29.627

您可以使用 SharePoint 企业版以及 Excel Services 报告和 SQL Server Reporting Services 报告的组合创建自己的解决方案；SharePoint 解决方案是您能找到的最接近的解决方案。

您可以使用[TFS SDK](http://archive.msdn.microsoft.com/TfsSdk/)和对象模型来创建自己的应用程序，但大多数人不会深入，因为 Microsoft 的 Web Access 工具对于大多数团队来说是一个功能强大的客户端工具。新的 TFS 2012 也刚刚发布了重大改进。事实上，Web Access 最初是作为第 3 方工具的，您可以通过一些方式对其进行扩展。

我知道有一个应用程序有一个非常简单的 TFS 网络界面；它可以在[http://techdayskanban.codeplex.com找到](http://techdayskanban.codeplex.com)

[在http://tfstimesheet.codeplex.com](http://tfstimesheet.codeplex.com)上还有一个扩展 TFS Web 访问的示例

Codeplex 是一个检查的好地方，因为它是开源的。

可以在[http://urbanturtle.com](http://urbanturtle.com)上找到扩展 Web Access 的产品的商业示例，但您似乎正在寻找更独立的东西。

# javascript - HTML DOM，ID 与无 ID？

> ID：11855242
> 
> 赞同：5
> 
> 时间：2012-08-07T22:50:36.843
> 
> 标签：javascript, html, css

假设您有一个容器 div，其中包含数百个非常简单的子元素，例如：

```
<div id="stuffContainer" class="item-container">
    <div class="single-item"></div>
    <div class="single-item"></div>
    <div class="single-item"></div>
    <div class="single-item"></div>
    <div class="single-item"></div>
    <div class="single-item"></div>
    [...]
</div> 
```

是否会以任何（有意义的）方式为每个单个元素损害（客户端）性能包括一个唯一的 ID，无论是渲染、javascript 还是内存方面？

为什么我要问：我可能需要不时引用特定项目，我试图弄清楚我是否应该提前预先计算我需要选择哪些项目，给它们 id 并将其余的排除在外，或者只是为所有这些分配ID，这将使过程更加直接，但我想知道这是否可能是一种矫枉过正。

如果有人可以谈论现代浏览器如何处理这一点以及为什么它会/不会在浏览器如何呈现和管理 DOM 方面产生影响，那么奖励积分（如果我真的可以给他们的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:56:56.410

最多，我猜测浏览器会做的几件事就是在构建 DOM 结构时将 ID 作为属性分配给每个元素，并将 ID 存储在哈希表中以方便`#id`选择器之类的事情，`document.getElementById()`和 idref 稍后查找。我认为这不会对观察到的性能或内存使用造成轻微影响，因为哈希表和 DOM 设计得非常好。

也就是说，如果您的元素根本不需要 ID *，*那么为它们分配 ID 毫无意义；相反，您最终会出现大量标记膨胀。正如 Dan Davies Brackett 所提到的，这显然*会*导致速度变慢，因为它取决于客户端连接。

如果您有能力使用 CSS 选择器引用这些元素，则始终可以使用它`:nth-child()`来查找特定的子元素。如果您需要支持较旧的浏览器，总有一个 CSS2 解决方案。请参阅以下问题：

*   [如何使用 CSS 获得第二个孩子？](https://stackoverflow.com/questions/5664773/css-get-second-child)
*   [如何使用 CSS2 选择器获取元素的第 n 个子元素？](https://stackoverflow.com/questions/9682521/how-do-i-get-the-nth-child-of-an-element-using-css2-selectors)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T23:01:13.527

正如 BoltClock 所暗示的，大多数性能问题的答案是“测量它！”。也就是说，您错过了一个潜在的衡量轴：下载大小。将 ID 属性添加到比必要更多的元素会增加您的字节权重，尤其是因为元素必须是唯一的（这意味着它们不会像非唯一属性那样压缩）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T20:11:37.740

最初的 Q 对内容/目的不是很具体，应该有变化，这取决于 IMO。在某一点上，我绝对不同意当前接受的答案。循环并附加新的 ID 到大量已经渲染的 HTML 可能会导致大量的回流计算，这可能会变得丑陋，具体取决于“stuffContainer”代表什么。

**如果必须，首先从服务器使用 ID 构建或在客户端作为单个块注入**

作为一般规则，如果可以避免，请避免重复更改 DOM。就加载页面的浏览器 IMO 而言，预先在服务器上构建的 ID 可以忽略不计。当然，它是一个更大的，因此更慢的哈希表，但如果我们谈论的是数百而不是数万，我严重怀疑你会注意到。

对于从数据构建的选择列表之类的情况，一种更有效的客户端方法是首先构建为字符串，带有 ID 和所有内容，然后分配给容器的 innerHTML，或者像我的一些 js 聊天同事一样，您在每个可能的用例中都有一个关于 innerHTML 的奇怪挂断，即使它现在在规范中，至少首先构建并附加到文档片段。然后将其附加到您的容器中。

**ID 上的数据属性或类**

IMO，气味因素与性能无关，而是 HTML 膨胀和创建不需要的 ID 依赖项，从而阻止其他可能在您的单个项目 div 上找到自定义 ID 有用的东西。ID 绝对是缩小 JavaScript 中元素查找范围的理想方式，但在容器包含内容的情况下，您将从 ID 容器中获得比 ID 为每个子项 ID 更大的灵活性。单步与两步的性能增益不值得将通用 ID 应用于元素的灵活性成本。

作为替代方案，您可以使用具有唯一值或数据属性的类，例如'data-itemId="0"'。对于较小的 HTML 集，例如自定义选择列表，其中 ID 连接到某些服务器端索引系统以便于更新数据，我倾向于使用这种高度可见的方法，因为它更容易理解架构，但它增加了很多在可能涉及数百到数千个项目的情况下跟踪不必要的属性。

**或者理想情况下（在大多数情况下），事件委托**

最理想的是，IMO，如果您只关心您单击的子单项元素而不是它的“ID”**或**这些单项容器将保持静态的顺序，您可以安全地避免使用其他属性假设职位是有效的 ID。或者，这可能适用于非静态单项集的另一种情况是，如果您在一组对象中获得单项数据，这些对象会被打乱，然后用于在用户启动的排序上构建和替换 HTML，这些排序总是将 HTML 的顺序与其他数据跟踪依赖项联系起来。

非 Jquery 方法（未经测试）：

```
var myContainer = document.getElementById('stuffContainer');
//ignore following indent goof

    myContainer.addEventListener('click', function(e){
        var
            singleItem,
            elementOriginallyClicked = singleItem = e.target,
            stuffContainer = this;

        //anything clicked inside myContainer will trigger a click event on myContainer
        //the original element clicked is e.target
        //google 'event bubbling javascript' or 'event delegation javascript' for more info

        //climb parentNodes until we get to a single-item node
        //unless it's already single-item that was originally clicked
        while( !singleItem.className.match(/[=\s'"]single-item[\s'"]/g) ){
            singleItem = singleItem.parentNode;
        }

        //You now have a reference to the element you care about

        //If you want the index:

        //Get the singleItem's parent's childNodes collection and convert to array
        //then use indexOf (MDN has normalizer for IE<=8) to get the index of the single-item

        var childArray = Array.prototype.slice.apply(stuffContainer.childNodes,[0]),
        thisIndex = childArray.indexOf(singleItem);

        doSomethingWithIndex(thisIndex);
        //or 
        //doSomethingWithDOMObject(singleItem);

    } ); 
```

或简单的 JQuery 委托样式（也未经测试）：

```
$('#someContainer').on('click','.single-item', function(){
    var $_singleItem = $(this), //jq handles the bubble to the interesting node for you
    thisIndex = $_singleItem.index(); //also getting index relative to parent

    doSomethingWithIndex(thisIndex);
    //or
    //doSomethingWithJQObject($_thisItem);
} ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T23:00:44.287

`id`即使使用了数百次，使用属性也不会显着降低性能。虽然手动挑选需要唯一标识的元素会稍微快一些，但在我看来，性能改进并不能证明这样做所需的额外时间是合理的。

话虽如此，我不确定`id`在这种情况下是否需要属性。如果您要使用 jQuery，您可以选择第四个元素，例如，使用以下代码：

```
$('.single-item').eq(3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T23:03:52.173

在这种情况下，在所有东西上使用 id 都会有点过分。我知道您来自哪里，但是如果您使用像 jQuery 这样的语言，考虑到结构，选择子项会很容易。这是一个示例，说明您如何知道单击了哪个 div：

```
$('.single-item').click(function()
{
    var yourClickedDiv = $(this);
    // execute the rest of your code here
}); 
```

这只是一个小例子，但正如您所看到的，您可以访问每个 div 以执行您需要做的任何事情。这将使 html 文件不会因为过多的 id 标签而变得杂乱无章，同时保持文件大小更小一些（更不用说避免生成每个唯一 id 的麻烦了）。

# ruby - 模型没有使用 Selenium 保存，而是使用 Rack::Test 保存

> ID：11855244
> 
> 赞同：0
> 
> 时间：2012-08-07T22:50:52.667
> 
> 标签：ruby, selenium, rspec, capybara, activeadmin

我有以下测试适用于 Rack::Test 但不使用 Selenium。即，如果我添加`, js: true`到描述块，我会在 Firefox 中收到一条错误消息，说明它`couldn't find the License with id=`（的 id `@l`）

```
describe "should hide allocation rule # for pdf & clickthrough licenses" do

  it "reads current state and shows/hides fields appropriately" do                                     
    @l = FactoryGirl.create(:license:,
                          way: License::CLICK_WAY)                                                                                      
    visit edit_admin_license_path(@l)                                                                                           
  end
end 
```

**为什么？**我一定是错过*了什么*。我可以使用 Sequel Pro 验证使用`js: true`.

我需要这个规范在 Selenium 中运行，因为我有 javascript 来测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:42:55.863

简单的解决方案是关闭事务性装置。

[为什么我的 Cucumber 测试在使用 Selenium 运行时会失败？](https://stackoverflow.com/questions/5524500/why-does-my-cucumber-test-fail-when-run-with-selenium)

在 spec/spec_helper.rb 中：

```
RSpec.configure do |config|
  config.use_transactional_fixtures = false

  config.before :each do
    if Capybara.current_driver == :rack_test
      DatabaseCleaner.strategy = :transaction
    else
      DatabaseCleaner.strategy = :truncation
    end
    DatabaseCleaner.start
  end

  config.after do
    DatabaseCleaner.clean
  end
end 
```

在 Gemfile 中，测试部分

```
gem 'database_cleaner' 
```

# c# - 无法并行读取相同的文件

> ID：11855245
> 
> 赞同：1
> 
> 时间：2012-08-07T22:50:57.230
> 
> 标签：c#, c++, windows, winapi, createfile

我正在尝试同时在两个不同的应用程序中读取日志文件。但是使用共享模式#FILE_SHARE_READ 的**CreateFile** ( [http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx) ) 在第二次调用时总是失败并出现错误-代码 32: **ERROR_SHARING_VIOLATION: - 进程无法访问该文件，因为它正被另一个进程使用。**

当日志文件以 FILE_SHARE_WRITE 或 FILE_SHARE_READ 模式写入时 | FILE_SHARE_WRITE 只有当 FILE_SHARE_READ 用于 writer-application 时，两个应用程序中的任何一个都无法读取文件，然后它仅在 reader-applications 使用 FILE_SHARE_WRITE 或 FILE_SHARE_READ | 时才有效。#FILE_SHARE_WRITE，而不是在使用 #FILE_SHARE_READ 时。奇怪....有什么建议吗？

非常感谢你。

修正案：

```
Writer-Application: CreateFile(file,GENERIC_WRITE,FILE_SHARE_READ,0,CREATE_ALWAYS,FILE_ATTRIBUTE_NORMAL,0)
Reader-Applications: CreateFile(file,GENERIC_READ,FILE_SHARE_READ | FILE_SHARE_WRITE,0,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,0) 
```

修正 2：

当使用来自第一修正案的调用时，第一个阅读器应用程序可以成功获取文件句柄，但第二个阅读器应用程序将失败并出现 ERROR_SHARING_VIOLATION。

**修正 3：有人指出我的解决方案！**

**问题是我使用逻辑或而不是按位或共享模式：FILE_SHARE_READ 或 FILE_SHARE_WRITE = 1 或 2 = 1，但它应该是 FILE_SHARE_READ | FILE_SHARE_WRITE = 1 | 2 = 3。因此无法作为 Writer-Application 所需的 FILE_SHARE_WRITE 工作。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T00:05:13.427

这并不奇怪，但它确实永远让程序员感到逻辑被颠倒。当一个程序创建一个日志文件时，它只需要指定 FILE_SHARE_READ 来允许另一个进程读取该文件。然而，它在这样做时获得了另一种能力，它要求 GENERIC_WRITE 以便它可以写入文件。操作系统不反对，它将永远保留该功能，直到它关闭文件。

然后出错的是另一个进程试图打开文件但*拒绝*写入文件的权利。换句话说，只指定 FILE_SHARE_READ 而*不是*FILE_SHARE_WRITE。那是行不通的，第一个进程已经获得了写入权，您不能猛拉地板垫并说它不应该写入文件。那将是令人讨厌的拒绝服务攻击。所以操作系统说不，并且 CreateFile() 调用失败。

其他进程*必须*指定 FILE_SHARE_WRITE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:15:26.160

您不能为两个不同的操作访问同一个文件，例如`WRITE_TO`或`READ_FROM`。相反，您可以为两个不同的操作克隆它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:22:07.157

您不能同时进行多项操作，即读/写操作。如果文件不是太大，您可能必须在内存中复制它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-20T18:41:42.547

是的，我在内存映射文件中遇到了同样的问题 - 我想创建一个 mmap 文件以供多个进程读取/写入......在 Linux/MacOS 上作为一个魅力。

看来您只能在 Unix 操作系统中执行此操作，我根本无法在 Windows 中重新创建此行为。

# mamp - Mamp Pro 恢复root用户/卸载

> ID：11855247
> 
> 赞同：5
> 
> 时间：2012-08-07T22:51:04.677
> 
> 标签：mamp

嗨，在 Mamp Pro 中，我不小心删除了 root 帐户，所以我现在无法使用 mysql 创建新数据库和所有其他操作。

这是我通过 mamp pro 启动 mysql 时遇到的错误：

检查 MySQL 数据库失败错误消息：/Applications/MAMP/Library/bin/mysqlcheck：得到错误：1044：选择数据库时用户'root'@'localhost'对数据库'mysql'的访问被拒绝

我曾尝试重置为出厂设置，但没有帮助。

基本上在 Phpmyadmin 的用户概览中，我只看到一个黄色框，上面写着“无特权”。

我也尝试卸载 Mamp Pro，但是当我勾选卸载程序的复选框并点击卸载时，我收到以下错误：

错误 特权操作失败。

非常感谢您的帮助，因为我不能做任何这样的工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T15:58:18.743

MAMP 显然会创建一些无法通过卸载程序擦除的配置文件。我能够`The privileged action failed`使用以下步骤绕过错误并完全卸载 MAMP Pro：

1.  删除`appsolute`目录`/Library/Application Support`，其中包含安装 MAMP Pro 时创建的配置文件
2.  删除里面的文件`hosts.mamp.bak`，`/etc`就是MAMP hosts的备份文件
3.  删除 MAMP 目录`/Applications/MAMP`
4.  打开MAMP Pro Uninstaller，勾选所有五个选项，点击卸载

这应该会彻底清除现有的 MAMP/MAMP Pro 安装并启用全新安装。您可能需要重新启动计算机才能在重新安装后运行 Apache。

# wcf - 找不到在 ServiceHost 指令中作为服务属性值提供的类型

> ID：11855248
> 
> 赞同：0
> 
> 时间：2012-08-07T22:51:12.760
> 
> 标签：wcf, visual-studio-2008

我收到错误“找不到类型'XXXNAMESPACEXXX.YYYCLASSYY'，作为ServiceHost指令中的服务属性值提供”。

我的 .svc 文件：

```
<% @ServiceHost Language="C#" Debug="true" Service="XXXNAMESPACEXXX.YYYCLASSYY" %> 
```

我的 .cs 文件：

```
namespace XXXNAMESPACEXXX
{
    public class YYYCLASSYY : ABC, XYZ
    {
.
.
. 
```

我在 IIS 中创建了一个虚拟目录，当我通过 IIS 浏览服务时，它工作正常。但是，当我在 Visual Studio 2008 中右键单击相同的 svc 文件并单击“在浏览器中查看”时，它会引发上述错误。我正在使用 IIS 7.5，Windows 7。请帮忙。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T10:36:16.457

我刚才也遇到了这个错误并修改了服务属性如下

```
<%@ ServiceHost Language="C#" Debug="true" Service="EvalServiceLibrary.DoEmployee" CodeBehind="EvalServiceLibrary.IDoEmployee" %> 
```

# php - 无法使用 html 和 php 更新 mysql 中的值

> ID：11855249
> 
> 赞同：0
> 
> 时间：2012-08-07T22:51:17.480
> 
> 标签：php, mysql, html, database, forms

我正在尝试使用 html 和 php 制作一个表单来更新 mysql 数据库。数据库更新（自动增量）键，但它不会将任何字符串添加到值中。我搜索过有类似问题的人，但因为他们的代码与我的不同，我无法理解（我是 php 和 mysql 的菜鸟）我认为我的问题在于我使用 html 获取值的方式，但我可能是错误的

```
<form action=submitform.php method=GET> 
     Name:<input type="text" name="cuName" size=20 maxlength=20><br>    
     Password:<input type="password" name="password" size=20 maxlength=45><br>
     Account:<input type="text" name="account" size=20 maxlength=45><br>
     Phone:<input type="tel" name="phone" size=10 maxlength=10><br>
     Email:<input type="text" name="email" size=20 maxlength=45><br>
<input type=submit>
</form> 
```

我的 php 是

```
<?php
        mysql_connect(localhost,  myUsername, "myPassword");
        mysql_select_db(myDatabaseName);
        mysql_query("INSERT INTO Customer (cuName, password, 
                        account, phone, email)
                    Values('$cuName', '$password', '$account',
                            '$phone', '$email')");
        echo $cuName ." thank you for reserving!";
        print ($cuName);
    ?> 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:02:05.447

您的代码依赖于`REGISTER_GLOBALS`被打开；出于安全原因，它通常被关闭。

您应该替换`$cuName`为`$_GET['cuName']`以获取从表单发送的值。

此外，您应该转义任何进入数据库的值，否则您可能会将自己暴露在 SQL 注入漏洞中。

清理这两种情况的代码，结果如下：

```
<?php
        if (!mysql_connect(localhost,  myUsername, "myPassword")) {
              print 'There was an error connecting to the database'.mysql_error();
              exit(); 
        }
        if (!mysql_select_db(myDatabaseName)) { 
              print 'Could not select db. The error was: '.mysql_error();
              exit();
        }
        $query = "INSERT INTO Customer (`cuName`, `password`, `account`,`phone`,`email`)";
        $query .= "VALUES (";
        $query .= "'".mysql_real_escape_string($_GET['cuName'])."','";
        $query .= mysql_real_escape_string($_GET['password'])."','";
        $query .= mysql_real_escape_string($_GET['phone'])."','";
        $query .= mysql_real_escape_string($_GET['email'])."'";

        if (!mysql_query($query)) {
            print 'There was an error inserting '.$query.'. Error was '.mysql_error();
        } else {
            echo $_GET['cuName']." thank you for reserving!";
        }
        print $_GET['cuName'];
    ?> 
```

我还添加了一些错误检查。您应该始终检查依赖外部系统（例如数据库）的函数的结果，因为您永远不知道数据库的状态是什么（它可能已关闭、不工作等）因此您应该始终检查并打印任何错误消息.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:56:28.133

您不会在任何地方定义任何 GET 值。$cuName 等未定义。

每个值都需要与 $_GET 相关联。IE，

`$cuName = $_GET['cuName']`

但是你还需要确保你没有插入没有被清理的数据以防止 SQL 注入。这方面的一个例子是：

`$cuName = mysql_real_escape_string($_GET['cuName']);`

所以，试试这个：

```
<?php
        mysql_connect(localhost,  myUsername, "myPassword");
        mysql_select_db(myDatabaseName);

        //Define Variables
        $cuName = mysql_real_escape_string($_GET['cuName']);
        $password = mysql_real_escape_string($_GET['password']);
        $account = mysql_real_escape_string($_GET['account']);
        $phone = mysql_real_escape_string($_GET['phone']);
        $email = mysql_real_escape_string($_GET['email']);

        mysql_query("INSERT INTO Customer (cuName, password, 
                        account, phone, email)
                    Values('$cuName', '$password', '$account',
                            '$phone', '$email')") or die (mysql_error());
        echo $cuName ." thank you for reserving!";
        print ($cuName);
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:14:03.623

更好地使用：

```
$cuname = $_GET['cuname']; 
```

像这样......因为你的表单方法是在“GET”上，我的建议是发布数据而不是 GET。

# php - 如果为 NULL，则使用默认值填充 PHP 数组。数组相交技巧？

> ID：11855250
> 
> 赞同：0
> 
> 时间：2012-08-07T22:51:19.150
> 
> 标签：php, arrays

我的应用程序需要一组值。如果未提供这些值，我想用默认值填充它们。例如，如果我的应用需要三个值

```
$default_vals = array('foo','bar','baz');
$given_vals = array('faz',NULL); 
```

我需要结果：

```
$combined = array('faz','bar','baz') 
```

基本上用默认值填充缺少的数组索引。

现在快 5:00 和大脑油炸。我认为这可以通过 array_function() 像 array_intersect() 或 merge() 轻松完成。

谢谢。

编辑：顺便说一句.. $given_vals 可能包含与 $default 相同的值，因此即使是这种情况，解决方案也应该有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:54:20.320

您需要`NULL`先从输入中过滤 s，然后您可以执行所谓的数组联合（数组联合运算符是`+`，请参阅[数组运算符^(*文档*)](http://de.php.net/manual/language.operators.array.php)）：

```
$result = array_filter($given_vals) + $default_vals; 
```

请注意，[`array_filter`^(*Docs*)](http://de.php.net/array_filter)也会删除诸如`FALSE`或空字符串之类的值。所以我不能 100% 确定这是否适合您的需求。如果没有，请使其更具体：

```
$result = array_filter($given_vals, function($v) {return !is_null($v);}) 
          + $default_vals;
ksort($result); 
```

# sql - 存储过程的 XML 输入

> ID：11855253
> 
> 赞同：0
> 
> 时间：2012-08-07T22:52:00.397
> 
> 标签：sql, sql-server-2008

我想在存储过程中从 xml 中获取数据，但它为每条记录返回 null 请帮助！

下面是我在存储过程中用于获取记录的脚本：

```
declare @deviceData xml
set @deviceData = 
'<result>
   <resultTotalRows>24</resultTotalRows>
   <requestedStartRow>0</requestedStartRow>
   <resultSize>24</resultSize>
   <requestedSize>1000</requestedSize>
   <remainingSize>0</remainingSize>
   <DiaChannelDataHistoryFull>
      <id>
         <devConnectwareId>00000000-00000000-00409DFF-FF521221</devConnectwareId>
         <ddInstanceName>bpcuff1</ddInstanceName>
         <dcChannelName>diastolic</dcChannelName>
         <dcdhId>549747901</dcdhId>
      </id>
      <cstId>6423</cstId>
      <xpExtAddr>00:13:A2:00:40:6B:95:43</xpExtAddr>
      <dcDataType>0</dcDataType>
      <dcdUpdateTime>2012-07-31T20:53:44.000Z</dcdUpdateTime>
      <dcdStringValue>82</dcdStringValue>
      <dcdIntegerValue>82</dcdIntegerValue>
   </DiaChannelDataHistoryFull>
</result>'

declare @xmltable table (PatientID int, GatewayId nvarchar(255), DeviceName nvarchar(255), TimeStamp datetime, Systolic int, Diastolic int, Pulse int, Status nvarchar(255))
insert into @xmltable (PatientID, GatewayId, DeviceName, TimeStamp, Systolic, Diastolic, Pulse, Status)
select
1 as PatientID,
tbl.clms.value('@devConnectwareId','nvarchar(255)') as GatewayId,
tbl.clms.value('@ddInstanceName','nvarchar(255)') as DeviceName,
tbl.clms.value('@dcdUpdateTime','datetime') as TimeStamp,
case tbl.clms.value('@dcChannelName','nvarchar(255)') when 'Systolic' then tbl.clms.value('@dcdStringValue','nvarchar(255)') else null end as Systolic,
case tbl.clms.value('@dcChannelName','nvarchar(255)') when 'Diastolic' then tbl.clms.value('@dcdStringValue','nvarchar(255)') else null end as Diastolic,
case tbl.clms.value('@dcChannelName','nvarchar(255)') when 'Pulse' then tbl.clms.value('@dcdStringValue','nvarchar(255)') else null end as Pulse,
case tbl.clms.value('@dcChannelName','nvarchar(255)') when 'Sample_Status' then tbl.clms.value('@dcdStringValue','nvarchar(255)') else null end as Status
from @deviceData.nodes('/result/DiaChannelDataHistoryFull') tbl(clms)

select * from @xmltable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:15:52.963

使用`@`的是属性而不是节点值，您必须为`id`节点中的值提供节点的路径。

```
select
1 as PatientID,        
tbl.clms.value('(id/devConnectwareId)[1]','nvarchar(255)') as GatewayId,
tbl.clms.value('(id/ddInstanceName)[1]','nvarchar(255)') as DeviceName,
tbl.clms.value('dcdUpdateTime[1]','datetime') as TimeStamp,
case tbl.clms.value('(id/dcChannelName)[1]','nvarchar(255)') when 'Systolic' then tbl.clms.value('dcdStringValue[1]','nvarchar(255)') else null end as Systolic,
case tbl.clms.value('(id/dcChannelName)[1]','nvarchar(255)') when 'Diastolic' then tbl.clms.value('dcdStringValue[1]','nvarchar(255)') else null end as Diastolic,
case tbl.clms.value('(id/dcChannelName)[1]','nvarchar(255)') when 'Pulse' then tbl.clms.value('dcdStringValue[1]','nvarchar(255)') else null end as Pulse,
case tbl.clms.value('(id/dcChannelName)[1]','nvarchar(255)') when 'Sample_Status' then tbl.clms.value('dcdStringValue[1]','nvarchar(255)') else null end as Status
from @deviceData.nodes('/result/DiaChannelDataHistoryFull') tbl(clms) 
```

# android - 可以使用 Google Play 进行选择性许可吗？

> ID：11855256
> 
> 赞同：0
> 
> 时间：2012-08-07T22:52:33.977
> 
> 标签：android

我有一个计划分几个阶段发布的应用程序：

1.  测试阶段使用电子邮件分发给小测试人群（进行中）。

2.  给一小部分用户。这在地理上将是一个多元化的群体，重要的是不要将应用程序提供/传播给更广泛的受众。

3.  广泛分发给可能想要它的人，免费或付费（逻辑上是谷歌游戏）。

鉴于此，Google play 许可方案能否用于促进第一阶段的发展？我在以下链接中读到谷歌不想要任何形式的选择性分发（除了测试）。我没有看到任何有选择地启用应用程序的参考资料（第二个链接）。

[我如何提供许可的 Android 应用程序](https://stackoverflow.com/questions/8978571/how-i-can-offer-a-licensing-android-application)

[http://developer.android.com/guide/google/play/licensing/adding-licensing.html](http://developer.android.com/guide/google/play/licensing/adding-licensing.html)

第 1 阶段的替代方案是使用分布式密钥与服务器一起开发身份验证机制。在激活应用程序之前，密钥将与服务器上的 uuid 或 google id 匹配。向新用户分发将涉及提供新密钥。评论赞赏两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:16:29.717

Google 许可方案 (LVL) 仅适用于付费应用程序。它所做的基本上是检查当前应用程序是否在与特定 Google 帐户关联的购买历史记录中。如果是，您有合法的付费用户；如果不是，那么，出了点问题，或者有人试图盗版您的应用程序。它取得了喜忧参半的成功。它不允许您控制谁可以以任何其他方式使用您的应用程序。

因此，如果您想分发私人测试版，您可以：

1.  通过电子邮件等直接分发（第一阶段）
2.  在 Google Play 上托管并开发您自己的激活方案（产品代码等）。然后只有收到代码的人才能真正使用该应用程序。（第二阶段）
3.  (1+2) 通过您的网站分发给任何人，但需要激活。（第二阶段）

对于 2.，您一定会从不阅读描述/说明的人那里获得一些 1 星（“不起作用”、“需要激活、嘘”等），所以最好使用与最后一个单独的包（com.myapp.beta 等）。

# java - 无法理解带有 else if 语句的 java 数学类（代码如下）

> ID：11855259
> 
> 赞同：1
> 
> 时间：2012-08-07T22:52:44.367
> 
> 标签：java, class, math, if-statement

```
public class S1P3 {
    public static void main (String[] args) throws Exception{
        int num1 = (int)(Math.round(Math.random()*10));
        int num2 = (int)(Math.round(Math.random()*10));
        int sign = (int)(Math.round(Math.random()*3));
        int answer;
        System.out.println("\n\n*****");
        if(sign==0)
        {
            System.out.println(num1+" * "+num2);
            answer = num1*num2;
        }
        else if(sign==1)
        {
            System.out.println(num1+" / "+num2);
            answer = num1/num2;
        }
        else if(sign==1)
        {
            System.out.println(num1+" - "+num2);
            answer = num1-num2;
        }
        else
        {
            System.out.println(num1+" % "+num2);
            answer = num1%num2;
        }
        System.out.println("*****\n");
        System.out.println("3 ...");
        Thread.sleep(1000);
        System.out.println("2 ...");
        Thread.sleep(1000);
        System.out.println("1 ...");
        Thread.sleep(1000);

        System.out.println("ANSWER: "+answer);
    }
} 
```

我不明白两个“else if”的符号如何等于 2。程序如何知道选择哪一个？因为 2 个选项等于 1，所以这是否意味着其中一个没有被使用？我用的书有错字吗？我可以使用一些澄清，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T22:54:58.653

那绝对是一个**错字，****永远不会**达到第三个条件（第二个`sign==1`） 。应该是。**`if (sign == 2)`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:59:56.220

小提示：打印出`sign`变量。这样你就可以看到它是如何变化的。**

# c# - 在 C# 中传递数组

> ID：11855260
> 
> 赞同：1
> 
> 时间：2012-08-07T22:53:13.313
> 
> 标签：c#, asp.net

嗨，我正在研究成绩计算。我的问题是，如果字符串数组的长度比 int 数组长，它可以跳过最后 2 个等级。前任：

```
int[] unit = new int[] {1,-3,3,4};
string[] letter_grade = new string[] {"A", "B","B","W","D","F"}; 
```

但是如果 int 数组的长度比字符串数组的长度长，则它的抛出错误 Index 超出了数组的范围。

```
int[] unit = new int[] {1,-3,3,4,5,6,7};
string[] letter_grade = new string[] {"A", "B","B"}; 
```

所以我的问题是如何让它对两者都有效？

```
int length = unit.Length;
int no_units = length;
double totalGrade_Points = 0.0;
int totalno_units = 0;
totalGPA = 0;

for (int i = 0; i < unit.Length; i++)
{
  entrygot = findGpaListentry(letter_grade[i]); //Index was outside the bounds of the array.
  if (entrygot != null)
  {
     //some code calculation
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:56:26.327

你不能只检查数组项是否为空，因为你会超出数组的范围，并且在空检查发生之前你会得到一个异常。

我会在每次迭代时检查数组的长度......

```
for (int i = 0; i < unit.Length; i++)
{
    if (currentArray.Length < i - 1) { break; }
    // other code...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:06:29.253

对于数组索引，您必须很好地定义开始和停止条件。要访问两个数组，要么它们必须相等，要么在某些有效条件下进行比较。看看这个：

```
for(int i=0;i<unit.length;i++){
entrygot = findGpaListentry(letter_grade[i]);// only if letter_grade is valid under all values of i i.e unit.length
}

// either you have to check as if;
    if(lenght_of_letter_grade < i-1)
    //then access 
    entrygot = findGpaListentry(letter_grade[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:19:07.540

我认为在您的情况下，元素的数量永远不会很大，因此性能不会成为问题。所以我认为你应该使用 List 而不是数组。对于数组，每次更改某些逻辑或添加其他功能时，您都必须进行插入检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:23:54.633

`foreach`循环最适合您的场景。

```
 foreach (string s in letter_grade)
    {
      entrygot = findGpaListentry(s); 
      if (entrygot != null)
      {
         //some code calculation
      }
} 
```

# asp.net - 如何在网站中将视频显示为图标？

> ID：11855266
> 
> 赞同：0
> 
> 时间：2012-08-07T22:53:46.653
> 
> 标签：asp.net, html, video

有没有办法在网站页面中显示视频作为排列视频或缩略图的图标，所以每当我点击一个视频时，它应该打开一个新窗口来播放该视频？不要在同一页面播放。

作为这段代码，但 target="_blank" 没有把我带到另一个页面？

```
<a href="video1.aspx" target="_blank">
        <object type="video/x-ms-wmv" data="Videos/clock.avi" width="320" height="255" >
            <param name="src" value="Videos/clock.avi">
            <param name="autoStart" value="0">
            alt : <a href="Videos/clock.avi">clock.avi</a>
        </object>
    </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:23:35.817

当您看到 Youtube 或其他流媒体网站时，不是 VideoObject 是打开一个带有视频的网站，而只是指向具有相同视频的一个页面的链接......

您有很多方法可以创建这种“效果”，为了进行优化，您只需加载视频的一个图像（用于创建缩略图）即可创建链接

```
<a href="pageofyourvideo.aspx" target="_blank">
    <img src="yourVideoImage.jpg" title="myVideotitle" />
</a> 
```

因为，如果只是为了在其他页面中的链接，则无需加载您的视频...

在您的视频页面中，您可以直接播放您的视频...

```
<div id="myVideoBox">
    <object type="video/x-ms-wmv" data="Videos/clock.avi" width="320" height="255" >
        <param name="src" value="Videos/clock.avi">
        <param name="autoStart" value="0">
    </object>
</div> 
```

如果您的语言能力不足（aspx、html？），您想为所有视频创建一个相同的页面，并在所有缩略图中的链接中包含一个参数...

例如，您可以创建两个具有相同链接的缩略图，只需更改参数：

带有 php 链接的示例：

```
<!-- first Thumbnails link to video1.avi -->
<a href="pageofyourvideo.php?myvideo=video1.avi" target="_blank">
    <img src="yourVideoImage.jpg" title="myVideotitle" />
</a>

<!-- second thumbnails link to video2.avi -->
<a href="pageofyourvideo.php?myvideo=video2.avi" target="_blank">
    <img src="yourVideoImage2.jpg" title="myVideotitle2" />
</a> 
```

并且您在视频页面中收到了参数：（始终使用 php ...）

```
<!-- If parameter "myvideo" was "video2.avi" video2.avi was played... --> 
<div id="myVideoBox">
    <object type="video/x-ms-wmv" data="Videos/clock.avi" width="320" height="255" >
        <param name="src" value="<?php echo $_GET["myvideo"]; ?>">
        <param name="autoStart" value="0">
    </object>
</div> 
```

我使用 .php 作为示例，因为我不熟悉 .aspx，但您可以在 .aspx 中制作此示例 :-)

# jquery - 具有两位有效数字的 jQuery Countdown 紧凑型

> ID：11855269
> 
> 赞同：0
> 
> 时间：2012-08-07T22:54:00.917
> 
> 标签：jquery, countdown, significant-digits

当我显示带有两位有效数字的紧凑倒计时时，它会显示如下内容：

“2d 12:00:00”和分钟/秒永远保持在“00”。我怎样才能让它显示类似：“2d 12h”的东西？

奇怪的是，如果我使用非紧凑输出，一切都按预期工作，即它只显示“2 天 12 小时”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:50:54.887

显然，紧凑选项具有固定的布局。为了实现我想要的，需要创建一个自定义布局，如下所示

`layout: '{d<}{dn}{dl}{d>} {h<}{hn}h{h>} {m<}{mn}m{m>} {s<}{sn}s{s>}'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:20:30.477

使用布局很重要，'mnn' 代表分钟，'snn' 代表秒等。请看下面的代码：

```
$('#compactLayout').countdown({
    until: liftoffTime, 
    compact: true, 
    layout: 'just <b>{dn} {dl} {hnn}{sep}{mnn}{sep}{snn}</b> {desc}', 
    description: 'to wait'
}); 
```

仅使用 'sn' 而不是 'snn'

# extjs - EXTJS 4.1 - Ext.Panel 标题字段显示不正确

> ID：11855270
> 
> 赞同：0
> 
> 时间：2012-08-07T22:54:10.640
> 
> 标签：extjs, panel, title

我在使用 ExtJS 面板时遇到问题。问题是每个面板的标题都在整个区域的左上角相互重叠放置。

即 HEADER1、HEADER2 和 MAIN HEADER 都相互重叠，甚至不在各自面板的范围内（它们都在最左上角）

有什么想法吗？我的代码在下面列出。

```
Ext.onReady(function(){
    Ext.QuickTips.init();

    var widget1 = new Ext.Panel({
    id:'widget1', 
    height: 50,
    autoScroll:false,
    title: '<div class="widget-header">HEADER1 <span class="header1-count">(45 ITEMS)</span></div>',
    defaults: {
        border:true,
        collapsible:true, 
        animCollapse:true
    }
    });

    var widget2 = new Ext.Panel({
    id:'widget2', 
    height: 200,
    autoScroll:false,
    title: '<div class="widget-header">HEADER2</div>',
    defaults: {
        border:true,
        collapsible:true, 
        animCollapse:true
    }
    });

    var widgetPanel = new Ext.Panel({
    id:'widgets',  
    height: 800,
    width: 300,
    autoScroll:false,
    items: [
        widget1,
        widget2
    ]
    });         

    var mainPanel = new Ext.Panel({ 
    id:'main-panel', 
    bodyBorder:false,
    autoHeight:true,
    autoWidth:true,
    layout:'hbox', 
    renderTo: LOCATION.div,
    items: [
        widgetPanel,
        { 
            xtype:'panel', 
            id:'content',
            tbar: [
                {
                    xtype:'tbtext', 
                    id:'title', 
                    html:'<h1>MAIN HEADER</h1>', 
                    style:'margin:1px 15px 0 0;'
                },
            ],
            layout:'hbox',
            padding: '5px 0 0 0',
            items: [{
                    xtype:'panel',
                    id:'container-panel',           
                    scroll: 'vertical', 
                    height: '100%',
                    items: [//todo
                    ]
                }
            ]
        }
      ]
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:23:05.900

`widgetPanel`缺少一个布局（并且有两个子面板，所以 ExtJS 不会知道如何呈现这些）；根据[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-cfg-layout)，您必须有一个布局。

还要确保在您的 hbox 和 vbox 布局中包含 flex（或宽度或高度）。

# ruby-on-rails - 如何更新嵌套的 has_one 资源？

> ID：11855272
> 
> 赞同：1
> 
> 时间：2012-08-07T22:54:20.213
> 
> 标签：ruby-on-rails, ruby, routing, partials

我似乎有两个问题

1）在尝试更新我的单一嵌套资源时

餐厅 has_one 小时

和

Hour belongs_to 餐厅

```
resources :restaurants do
  resource :hour
end 
```

在我的餐厅展示页面上有一个编辑链接，名为：

```
<%= link_to 'Set Hour', edit_restaurant_hour_path([@restaurant, @restaurant.hour]) %> 
```

并且编辑页面有一个部分渲染，如下所示：

```
<%= render :partial => 'restaurants/hours', :locals => { :hour => 'hour' } %> 
```

它加载了一个名为 _hours.html.erb 的部分：

```
<%= form_for hour do |f| %>
<div class="row-fluid">
<div class="span1 hours_input">
  <h3>Monday</h1>
  From
  <%= f.text_field :from_monday, :class => 'span20 hour_field'  %>
  To
  <%= f.text_field :to_monday, :class => 'span20 hour_field'  %>
</div>
<div class="span1 hours_input">
  <h3>Tuesday</h3>
  From
  <%= f.text_field :from_tuesday, :class => 'span20 hour_field' %>
  To
  <%= f.text_field :to_tuesday, :class => 'span20 hour_field'  %>
</div>
<div class="span1">
  <%= f.submit 'Set Hours' %>
</div>
</div> 
```

但是一旦我按下提交按钮，它就会给我错误：

```
No route matches [POST] "/restaurants/34/hour/edit" 
```

我尝试将其设置为：

```
<%= form_for hour, :method => put, :html => { :action => 'update' } do |f| %> 
```

但没有运气。任何帮助将不胜感激！我正在使用导轨 3.2.3

2）我的第二个问题相当神秘。

一旦我按下按钮

```
<%= link_to 'Set Hour', edit_restaurant_hour_path([@restaurant, @restaurant.hour]) %> 
```

在餐厅展示页面上，它会给出网址：

```
http://localhost:3000/restaurants/34//hour/edit 
```

在//小时之前使用双斜杠。我怀疑这会中断生产，但似乎不会影响我的开发。

再次感谢您的阅读，祝您阅读愉快！

编辑：这是耙子路线-

```
 restaurant_hour POST   /restaurants/:restaurant_id/hour(.:format)      hours#create

 new_restaurant_hour GET    /restaurants/:restaurant_id/hour/new(.:format)       hours#new

  edit_restaurant_hour GET    /restaurants/:restaurant_id/hour/edit(.:format)  hours#edit

  GET    /restaurants/:restaurant_id/hour(.:format)               hours#show

  PUT    /restaurants/:restaurant_id/hour(.:format)               hours#update

  DELETE /restaurants/:restaurant_id/hour(.:format)               hours#destroy

  restaurants GET    /restaurants(.:format)                       restaurants#index

  POST   /restaurants(.:format)                                   restaurants#create

  new_restaurant GET    /restaurants/new(.:format)                restaurants#new

  edit_restaurant GET    /restaurants/:id/edit(.:format)          restaurants#edit

  restaurant GET    /restaurants/:id(.:format)                    restaurants#show

  PUT    /restaurants/:id(.:format)                               restaurants#update

  DELETE /restaurants/:id(.:format)                               restaurants#destroy

  hour GET    /:restaurant/hour(.:format)                         hours#show

  POST   /:restaurant/hour(.:format)                              hours#create

  hour_add GET    /:restaurant/hour/add(.:format)                 hours#new

  hour_edit GET    /:restaurant/hour/edit(.:format)                         hours#edit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:04:17.440

我想通了，但这显然不是 RESTful 方式。

我只需要补充：

```
<%= form_for hour, :url => { :action => "update" }, :html => { :method => 'put' } do |f| %> 
```

并指定更新工作的操作/方法。

另一篇文章建议只使用：

```
<%= form_for @hour do |f| %> 
```

也会起作用，但由于某种原因，我对此没有任何运气。

# php - 为什么以下 mySQL 查询失败？

> ID：11855286
> 
> 赞同：0
> 
> 时间：2012-08-07T22:56:18.663
> 
> 标签：php, mysql

我不知道为什么以下 mySQL 查询不断给我以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL     server version for the right syntax to use near 'http://some.url' at line 2 
```

SQL 查询本身是这样的：

```
DB_ExecuteQuery("UPDATE driver 
                 SET windowsPhoneID = $uri
                 WHERE userID = $userID"); 
```

$userID 只是表的主键，只是一个 VARCHAR。我不知道为什么 $uri 部分无效。WindowsPhoneID 应该存储为 TEXT，因此没有任何不匹配的类型或类似的东西。

任何指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T22:59:25.993

您应该在参数周围添加引号：

```
DB_ExecuteQuery("UPDATE driver 
                 SET windowsPhoneID = '$uri'
                 WHERE userID = '$userID'"); 
```

**备注：**
就像 Mike 温和建议的那样，请使用 PDO 或 MySQLi 来防止 sql-injection。

# mysql - 如何按一对多关联日期排序并获得不错的性能？

> ID：11855290
> 
> 赞同：0
> 
> 时间：2012-08-07T22:56:39.583
> 
> 标签：mysql, sql

我的 MySQL 数据库中有上述模型：

```
Blogs (id: integer, name: varchar)
Posts (id: integer, name: varchar, blog_id: integer, created_at: date) 
```

我想检索所有博客的列表，按具有最新帖子的博客排序。

我通过以下查询达到了这一点：

```
SELECT b.*, (SELECT p.created_at FROM posts p WHERE p.blog_id = b.id ORDER BY p.created_at DESC LIMIT 1) AS last_post_created_at FROM blogs b ORDER BY last_post_created_at DESC; 
```

但是这个查询太慢了，我无法在我的应用程序中使用它。

你们有什么好的解决办法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:07:09.213

重写查询：

```
SELECT b.*, 
       p.last_post_created_at 
FROM blogs b 
  LEFT JOIN
    ( SELECT blog_id,
             MAX(created_at) AS last_post_created_at
      FROM posts  
      GROUP BY blog_id 
    ) AS p
    ON  p.blog_id = b.id  
ORDER BY last_post_created_at DESC; 
```

上的索引`(blog_id, created_at)`将有助于此版本和您的版本。

如果你想限制返回的博客数量，你应该`ORDER BY`在子查询中添加并放在`LIMIT`那里：

```
SELECT b.*, 
       p.last_post_created_at 
FROM blogs b 
  LEFT JOIN
    ( SELECT blog_id,
             MAX(created_at) AS last_post_created_at
      FROM posts  
      GROUP BY blog_id 
      ORDER BY last_post_created_at DESC
        LIMIT 100
    ) AS p
    ON  p.blog_id = b.id  
ORDER BY last_post_created_at DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:12:43.563

使用[视图](http://dev.mysql.com/doc/refman/5.1/en/create-view.html)。知道和使用的好东西！

# html - 更改阿拉伯文字的@font-face

> ID：11855297
> 
> 赞同：0
> 
> 时间：2012-08-07T22:57:19.240
> 
> 标签：html, css, fonts, font-face, arabic

我正在使用`@font-face`以下 CSS 更改阿拉伯文本的字体样式：

```
@font-face{
font-family:"HelveticaNeue";src:url(fonts/HelveticaNeueW23-Reg.eot);src:url(fonts/HelveticaNeueW23-Reg.woff)
format("woff"),url(fonts/HelveticaNeueW23-Reg.ttf)
format("truetype"),url(fonts/HelveticaNeueW23-Reg.svg#HelveticaNeueLTArabic55Roman)
format("svg");font-weight:normal;font-style:normal
}

@font-face{
font-family:"HelveticaNeue";src:url(fonts/HelveticaNeueW23-Bd.eot);src:url(fonts/HelveticaNeueW23-Bd.woff)
format("woff"),url(fonts/HelveticaNeueW23-Bd.ttf)
format("truetype"),url(fonts/HelveticaNeueW23-Bd.svg#HelveticaNeueLTArabic55Roman)
format("svg");font-weight:bold
} 
```

但它们没有效果！问题是什么？我需要使用 CSS3 还是一些字符集？

# google-app-engine - GAE全文搜索未在生产中找到导入

> ID：11855298
> 
> 赞同：0
> 
> 时间：2012-08-07T22:57:29.200
> 
> 标签：google-app-engine

我在让全文搜索在 GAE 生产环境中工作时遇到问题。它在我的开发机器上运行良好，但是当我将它部署到生产环境时，我收到了这个错误：

```
com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'search' or call 'IndexDocument()' was not found. 
```

这看起来是一个运行时问题，它找不到正确的类，但我在 WEB-INF/lib 中包含了 appengine-api-1.0-sdk-1.7.0.jar，所以我假设在部署到 prod 时，它将使用该版本的 GAE。我是否遗漏了有关 GAE 如何将库部署到产品的信息？GAE SDK 1.7 现在应该可以在生产中使用了吧？

这些是我的进口：

```
 import com.google.appengine.api.datastore.Entity;
import com.google.appengine.api.datastore.Key;
import com.google.appengine.api.search.Document;
import com.google.appengine.api.search.Field;
import com.google.appengine.api.search.GeoPoint;
import com.google.appengine.api.search.Index;
import com.google.appengine.api.search.IndexSpec;
import com.google.appengine.api.search.SearchServiceFactory;

//my instantiation
private static final Index INDEX = SearchServiceFactory.getSearchService()
              .getIndex(IndexSpec.newBuilder().setName("shared_index")); 
```

它似乎使用的是 1.7.0 版。这是我正在使用的版本的日志记录以及紧随其后的错误堆栈跟踪：

```
E 2012-08-07 19:30:37.352

version: Google App Engine/1.7.0

W 2012-08-07 19:30:37.702

com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'search' or call 'IndexDocument()' was not found.
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher$1.runInContext(RpcStub.java:782)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.rpcFinished(RpcStub.java:824)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.success(RpcStub.java:809)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.runCallbacks(RpcClientInternalContext.java:893)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.finishRpcAndNotifyApp(RpcClientInternalContext.java:798)
    at com.google.net.rpc3.impl.client.RpcNetChannel.afterFinishingActiveRpc(RpcNetChannel.java:1059)
    at com.google.net.rpc3.impl.client.RpcNetChannel.finishRpc(RpcNetChannel.java:907)
    at com.google.net.rpc3.impl.client.RpcNetChannel.handleResponse(RpcNetChannel.java:2255)
    at com.google.net.rpc3.impl.client.RpcNetChannel.messageReceived(RpcNetChannel.java:2062)
    at com.google.net.rpc3.impl.client.RpcNetChannel.access$2000(RpcNetChannel.java:143)
    at com.google.net.rpc3.impl.client.RpcNetChannel$TransportCallback.receivedMessage(RpcNetChannel.java:3117)
    at com.google.net.rpc3.impl.client.RpcChannelTransportData$TransportCallback.receivedMessage(RpcChannelTransportData.java:599)
    at com.google.net.rpc3.impl.wire.RpcBaseTransport.receivedMessage(RpcBaseTransport.java:417)
    at com.google.net.eventmanager.AbstractFutureTask$Sync.innerRun(AbstractFutureTask.java:260)
    at com.google.net.eventmanager.AbstractFutureTask.run(AbstractFutureTask.java:121)
    at com.google.net.eventmanager.EventManagerImpl.runTask(EventManagerImpl.java:578)
    at com.google.net.eventmanager.EventManagerImpl.internalRunWorkerLoop(EventManagerImpl.java:1002)
    at com.google.net.eventmanager.EventManagerImpl.runWorkerLoop(EventManagerImpl.java:884)
    at com.google.net.eventmanager.WorkerThreadInfo.runWorkerLoop(WorkerThreadInfo.java:136)
    at com.google.net.eventmanager.EventManagerImpl$WorkerThread.run(EventManagerImpl.java:1855) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:26:52.167

我不确定在 WEB-INF/lib 中包含 appengine-api-1.0-sdk-1.7.0.jar 是否会将其部署为该版本。

如果你使用过eclipse，你是否从*preferences-->google-->appengine中选择了1.7 sdk*

另外，你是如何部署的？如果您使用命令行，请确保使用 /1.7sdk/bin/appcfg 文件进行上传。如果您使用的是 eclipse，请按上述方式设置首选项。

上面的就不用说了...

我认为你需要建立你的 IndexSpec

```
private static final Index INDEX = SearchServiceFactory.getSearchService()
              .getIndex(IndexSpec.newBuilder().setName("shared_index").build()); 
```

# javascript - 在数字索引循环中获取数组项的键

> ID：11855305
> 
> 赞同：0
> 
> 时间：2012-08-07T22:57:57.443
> 
> 标签：javascript, for-loop, associative-array

> **可能重复：**
> [JavaScript 中的 For..In 循环 - 键值对](https://stackoverflow.com/questions/7241878/for-in-loops-in-javascript-key-value-pairs)

我需要按顺序遍历一个数组，就像在[这个问题](https://stackoverflow.com/q/7276040/925897)中一样。但是，我还需要访问该`key`名称。在数字索引循环中如何做到这一点？

```
for(i=0; i<arr.length; i++){
    alert(arr[i].key); // clearly won't work
} 
```

但

```
for(key in arr){
    alert(arr[key]); // works, but it doesn't loop through in the right order
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:01:14.650

您不能列出 JavaScript 对象的属性并期望它们以特定顺序返回。

阅读这篇[博](http://ejohn.org/blog/javascript-in-chrome/)文并查看关于*for loop order*的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:28:06.047

如果你想“排序”一个对象，那么你可以将键名放在一个数组中，对其进行排序，然后按照它们在数组中的顺序访问对象属性，例如：

```
var obj = { '3':3, '0':0, '2':2, '1':1};
var props = [];

for (var p in obj) {

  if (obj.hasOwnProperty(p)) {
    props.push(p);
  }
}

props.sort();

for (var i=0, iLen=props.length; i<iLen; i++0 {
  alert(obj[props[i]]); // 0, 1, 2, 3
} 
```

关于对象属性的顺序，ES5 说：

> 未指定枚举属性的机制和顺序（第一个算法中的步骤 6.a，第二个算法中的步骤 7.a）。
> 
> [http://es5.github.com/#x12.6.4](http://es5.github.com/#x12.6.4)

您可能会在一个流行库的评论中发现“首先枚举自己的属性”的说法，这与至少一个广泛使用的浏览器的行为相矛盾，因此应该忽略。

# c++ - 删除指针是否也会删除它指向的内存？

> ID：11855306
> 
> 赞同：9
> 
> 时间：2012-08-07T22:57:58.197
> 
> 标签：c++, pointers, memory-management

如果我有这样的指针：

```
int *test = new int; 
```

我创建了另一个指向这样的指针`test`：

```
int *test2 = test; 
```

然后我删除`test2`：

```
delete test2; 
```

这是否意味着它也会删除内存`test`，还是我也必须调用`delete test`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T22:58:56.023

是的，记忆将是~~已删除~~当两个指针指向同一个内存时被释放。

此外，`test`现在 will 是一个**悬空指针**（就像 will 一样`test2`）并且取消引用它会导致**未定义的行为**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T23:07:31.170

你永远不会删除记忆`test`，也不会删除记忆`test2`。唯一被删除的是*object* `*test`，它与 object 相同`*test2`（因为指针相同），因此您只能删除它一次。

这是一个非常常见且非常不幸的误称，它会传播和破坏 C++ 新手的思想：当您真正的意思是“释放我有指针”或“删除我有指针的对象”。确实，相关构造（即`std::free`和`delete`）将指向相关实体的指针作为参数，但这并不意味着指针本身被操作——它只是传达感兴趣对象的*位置*。

# iphone - 在 Photoshop 中导出为 326 ppi 的网页

> ID：11855313
> 
> 赞同：0
> 
> 时间：2012-08-07T22:59:25.260
> 
> 标签：iphone, photoshop, flash-cs5, retina-display

我正在 Photoshop CS5 中为 iPhone 4s 设计一个具有视网膜分辨率 (326 ppi) 的 UI。

当我尝试将切片导出为 PNG 或 JPG 文件（保存为 Web 和设备）时，Photoshop 始终将它们保存为 72 ppi（在 Mac OS X 上）。导出时找不到此设置。

如何以及在哪里可以在“保存为 Web 和设备”中更改此分辨率设置？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:30:13.633

只需按您想要的像素尺寸调整图像大小，然后保存为所需的格式，如果您愿意，可以使用 Save for Web。如果您以在元数据中记录 PPI 并且对您的应用程序很重要的格式保存，请转到图像 > 图像大小，取消选中“重新采样图像”，然后在“分辨率”框中设置所需的值。无论如何，这就是您在 Photoshop CS (1) 中更改 PPI 的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:48:27.517

Save For Web 的默认值为 72 或 96，分别用于 Mac 和 Windows。没有办法改变这一点，它毕竟是一个网络标准。

话虽如此，您可以拥有自定义 PPI。在图像 > 大小中，在分辨率框中选择所需的 PPI。选择是否要重新采样图像（可能不是）并点击确定。然后只需使用“另存为”而不是“另存为 Web”，并选择 JPG 作为格式。生成的文件将具有您刚刚设置的任何 PPI。

它可能是一个大一点的文件，但它有更多的像素，所以这是可以预料的。

# javascript - Javascript 错误：catChildNotes[y].setAttribute 不是函数

> ID：11855317
> 
> 赞同：0
> 
> 时间：2012-08-07T22:59:43.983
> 
> 标签：javascript, firefox, greasemonkey

所以，我有一些 JavaScript 代码，我在本地使用 Greasemonkey 进行了测试。但是我在 Firefox 错误控制台中得到了这个持续错误：

> catChildNotes[y].setAttribute 不是函数

代码：

```
var i = prompt("How many videos have you got?", "");
function remove_mp4()
{
   titleElems=document.getElementsByName("title");
   for(i=0; i<titleElems.length; i++)
   {
      titleInner=titleElems[i].innerHTML;
      titleElems[i].innerHTML=titleInner.replace(titleInner.match(".mp4"), "");
   }
}
for (var x = 0; x < i; i++)
{
    document.getElementsByName("description")[x].value = "Visit me on my web-site :\
    \
                                                          http://www.sample.com/";
    document.getElementsByName("keywords")[x].value = prompt("Enter keywords : ","");
    catChildNodes=document.getElementsByName("category")[x].childNodes;
    catChildNodes[x + 1].removeAttribute("selected");
    for(y=0; y<catChildNodes.length; y++)
{
       if(catChildNodes[y].value="27") 
   {
          catChildNodes[y].setAttribute("selected",""); 
   }
}
}
remove_mp4(); 
```

此脚本应在 Youtube 上传页面上运行并执行以下操作：

*   从标题中删除“.mp4”
*   添加默认描述
*   添加关键字（等于提示值）
*   将类别更改为“教育”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:38:23.167

通常，当您获得一个元素的子节点时，您将获得其他[元素节点](https://developer.mozilla.org/en-US/docs/DOM/element)和[文本节点](https://developer.mozilla.org/en-US/docs/DOM/text)。前者有`setAttribute`方法，后者没有（只是因为文本节点没有任何属性）。如果您只需要子元素而不需要文本节点，那么您应该使用[`children`property](https://developer.mozilla.org/en-US/docs/DOM/Element.children)而不是`childNodes`.

您的代码中至少还有一个错误，这不是比较：

```
if (catChildNodes[y].value = "27") 
```

这会将值 27*分配*`catChildNodes[y].value`给. 如果你真的想比较，那么你应该使用比较运算符：

```
if (catChildNodes[y].value == "27") 
```

# sql-server - Access 2007 中的查询性能 - 使用 SQL Server Express 后端

> ID：11855322
> 
> 赞同：2
> 
> 时间：2012-08-07T23:00:16.407
> 
> 标签：sql-server, ms-access

一段时间以来，我一直在努力解决这个问题，并决定我应该寻求帮助。我有一个表格，其中包含温度/湿度图表记录器数据（目前超过 775,000 条记录），我试图从中对其进行统计查询。问题是这通常需要两分钟，有时根本不会回来 - 导致我强制关闭程序（Control-Alt-Delete）。起初，我并没有那么大的问题——只是在我达到神奇的 500k 记录标记之后，我才开始严重减速，随着更多数据被编译并导入表中，变得越来越糟糕。

这是查询（传递）：

```
SELECT dbo.tblRecorderLogs.strAreaAssigned, Min(dbo.tblRecorderLogs.datDateRecorded) AS FirstRecorderDate, Max(dbo.tblRecorderLogs.datDateRecorded) AS LastRecordedDate,
Round(Avg(dbo.tblRecorderLogs.intTempCelsius),2) AS AverageTempC,
Round(Avg(dbo.tblRecorderLogs.intRHRecorded),2) AS AverageRH,
Count(dbo.tblRecorderLogs.strAreaAssigned) AS Records
FROM dbo.tblRecorderLogs
GROUP BY dbo.tblRecorderLogs.strAreaAssigned
ORDER BY dbo.tblRecorderLogs.strAreaAssigned; 
```

这是存储图表数据的表结构：

```
idRecorderDataID     Number     Primary Key
datDateEntered       Date/Time  (indexed, duplicates OK)
datTimeEntered       Date/Time
intTempCelcius       Number
intDewPointCelcius   Number
intWetBulbCelcius    Number
intMixingGPP         Number
intRHRecorded        Number
strAssetRecorder     Text       (indexed, duplicates OK)
strAreaAssigned      Text       (indexed, duplicates OK) 
```

我正在尝试编写一个程序，该程序将允许人们根据分配的区域以及开始和结束日期从该表中提取数据。以我目前拥有的数据集大小，这种报告对于它来说实在是太多了（看起来）并且机器永远不会返回答案。在处理此表的任何查询中，我不得不将 ODBC 超时时间延长到几乎 180 秒，这仅仅是因为它的大小。如果人们有一些帮助，我可以使用一些认真的帮助。先感谢您！

-- 编辑于 2012 年 8 月 13 日 @ 1050 小时 --

由于 IT 部门已经控制了有问题的机器，并且有人使用远程管理控制台全职登录，因此我无法在 SQL Server 上测试查询。我已经尝试了一个临时步骤来减轻性能问题的影响，但我仍在寻找这个问题的永久解决方案。

临时步骤：

我创建了一个镜像 dbo.tblRecorderLogs SQL Server 表结构的本地表，我使用以前的 SELECT 语句作为子查询对其执行 INSERT INTO。然后从这个“临时”本地表中提取任何后续统计分析。该过程完成后，本地表被截断。

-- 编辑于 2012 年 8 月 13 日 @ 1217 小时 --

在 SQL Server 管理控制台上运行显示的查询，根据控制台提供的查询计时器需要 1 分 38 秒才能完成。

-- 编辑 08/15/2012 @ 1531 小时 --

尝试将查询作为 VBA DoCmd.RunSQL 语句运行以使用以下代码填充临时表：

```
INSERT INTO tblTempRecorderDataStatsByArea ( strAreaAssigned, datFirstRecord, 
datLastRecord, intAveTempC, intAveRH, intRecordCount )
SELECT dbo_tblRecorderLogs.strAreaAssigned, Min(dbo_tblRecorderLogs.datDateRecorded) 
AS MinOfdatDateRecorded, Max(dbo_tblRecorderLogs.datDateRecorded) AS MaxOfdatDateRecorded, 
Round(Avg(dbo_tblRecorderLogs.intTempCelsius),2) AS AveTempC, 
Round(Avg(dbo_tblRecorderLogs.intRHRecorded),2) AS AveRHRecorded, 
Count(dbo_tblRecorderLogs.strAreaAssigned) AS CountOfstrAreaAssigned FROM 
dbo_tblRecorderLogs GROUP BY dbo_tblRecorderLogs.strAreaAssigned ORDER BY 
dbo_tblRecorderLogs.strAreaAssigned 
```

执行代码时会出现问题，查询需要很长时间 - 它在完成之前遇到超时。仍然希望有一个“灵丹妙药”来解决这个问题......

-- 编辑于 2012 年 8 月 20 日 @ 1241 小时 --

我发现的唯一“准”解决方案是重复运行失败的查询（有点像启动泵），这样当我的程序再次调用查询时 - 它有相对的机会在 ODBC 之前实际完成SQL Server 驱动程序超时。基本上，一个肮脏肮脏的黑客 - 但我没有更好的来解决这个问题。

1.  我试过创建一个视图，它可以在服务器端工作——但不会加快速度。
2.  正在聚合的正确字段已正确编入索引，因此我无法在此处进行任何更改。
3.  我只是从数据库中提取对用户立即有用的信息——这里没有“SELECT * madness”。

我认为，正式地，我没有东西可以尝试——除了将原始计算能力投入到问题上，这不是目前的解决方案，因为该项目还没有上线，而且我没有预算来采购更好的硬件。我会将其发布为“答案”并将其保留到 9 月 3 日 - 如果我没有更好的答案，我将接受我自己的答案并接受失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T02:35:54.723

当我不得不对同一个表中的多个字段运行最小/最大函数时，我经常发现在主/外部查询的 from 行中将每一列作为子查询单独执行会更快。

所以你的查询会是这样的：

```
SELECT rLogs1.strAreaAssigned, rLogs1.FirstRecorderDate, rLogs2.LastRecorderDate, rLog3.AverageTempC, rLogs4.AverageRH, rLogs5.Records
FROM (((
    (SELECT strAreaAssigned, min(datDateRecorded) as FirstRecorderDate FROM dbo.tblRecorderLogs GROUP BY strAreaAssigned) rLogs1
    inner join
    (SELECT strAreaAssigned, Max(datDateRecorded) as LastRecordedDate, FROM dbo.tblRecorderLogs GROUP BY strAreaAssigned) rLogs2
    on rLogs1.strAreaAssigned = rLogs2.strAreaAssigned)
    inner join
    (SELECT strAreaAssigned, Round(Avg(intTempCelsius),2) AS AverageTempC, FROM dbo.tblRecorderLogs GROUP BY strAreaAssigned) rLogs3
    on rLogs1.strAreaAssigned = rLogs3.strAreaAssigned)
    inner join
    (SELECT strAreaAssigned, Round(Avg(intRHRecorded),2) AS AverageRH, FROM dbo.tblRecorderLogs GROUP BY strAreaAssigned) rLogs4
    on rLogs1.strAreaAssigned = rLogs4.strAreaAssigned)
    inner join
    (SELECT strAreaAssigned, Count(strAreaAssigned) AS Records, FROM dbo.tblRecorderLogs GROUP BY strAreaAssigned) rLogs5
    on rLogs1.strAreaAssigned = rLogs5.strAreaAssigned
ORDER BY rLogs1.strAreaAssigned; 
```

如果您使用查询和上面的查询，请将它们复制到 SQL Server 中的同一查询窗口中并运行估计的执行计划，您应该能够比较它们并查看哪一个效果更好。

# javascript - 视觉变形 | SVG vs Canvas vs 其他

> ID：11855323
> 
> 赞同：2
> 
> 时间：2012-08-07T23:00:21.047
> 
> 标签：javascript, html, css

这是一个有点奇怪的问题，但我想我会看看以前是否做过。

我想将一个 div 元素（以及所有它的内部元素）变形为另一个 - 视觉上。我想这很复杂，我在谷歌上找不到演示。

我不是在谈论过渡或只是改变 CSS 属性。例如不是[这个](http://davidwalsh.name/demo/mootools-morph.php)moo 工具演示或[这个](http://www.tutorialspoint.com/cgi-bin/practice.cgi?file=scriptaculous_7)scriptaculous 演示。

我什至无法想象这是怎么做到的。有任何想法吗。例如假设每个 div 元素只是一张图片，那么这将等同于从一张图片变形到另一张图片。

似乎有很多库可以进行变形......但这些只是改变 CSS 属性。

**有关的**

[http://caniuse.com/#search=svg](http://caniuse.com/#search=svg)

[http://caniuse.com/#search=canvas](http://caniuse.com/#search=canvas)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:09:37.487

好吧，也许是这样：

使两个元素 e1 和 e2 相互交叉变形。

要获得替换效果，e1 的初始不透明度可能为 0（目标 1），e2 的初始不透明度为 1（目标 0）。在某些时候，如果遵循相同的缓动/插值函数（但来自不同方面：e1->e2.orig 和 e2->e1.orig），那么这些值应该“交叉路径”..

更好的变形会递归地（同时）为 e1 中映射到 e2 中的元素的每个元素执行此操作（例如，想象正方形中的圆变成圆中的正方形），但这要复杂得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T23:26:30.437

有许多方法可以在视觉上将一个元素从一个元素变形为另一个元素。询问如何在视觉上变形“div”元素可能是错误的观点。有许多 JavaScript 工具包可以完成一种或另一种“视觉变形”。

一些例子是...

*   一个有趣的例子是[WebKit 时钟](http://onotakehiko.com/webkitclock/#bangalore "WebKit 时钟")，它不使用图像，只使用 CSS、JavaScript、SVG 和其他一些元素。当然，由于它使用 SVG，它在 IE8 及以下版本中并没有什么用处。
*   一个以跨浏览器方式工作的 JavaScript 库是[Raphael.js](http://raphaeljs.com/) 这个[页面](http://raphaeljs.com/animation.html)是“视觉变形”的一个很好的例子。它确实适用于 IE8 及更低版本，因为它将 SVG 代码转换为 VML，尽管 VML 性能非常糟糕，甚至 Microsoft 也反对它，转而支持 IE9 的 SVG。
*   ~~[甚至像Prefuse](http://prefuse.org/gallery/)~~这样的老库也有一些有趣的视觉技巧。抱歉 Prefuse 是 Java，我在想[Protovis](http://mbostock.github.com/protovis/)

简而言之，您不必等待 10 年才能完成一些非常巧妙的视觉技巧，但您可能必须采取不同的方法。

# ruby - Ruby机械化https错误

> ID：11855324
> 
> 赞同：14
> 
> 时间：2012-08-07T23:00:24.940
> 
> 标签：ruby, ssl, https, mechanize

我正在尝试执行以下操作：

```
page = Mechanize.new.get "https://sis-app.sph.harvard.edu:9030/prod/bwckschd.p_disp_dyn_sched" 
```

但我只得到这个例外：

```
OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: sslv3 alert illegal parameter
    from /Users/amosng/.rvm/gems/ruby-1.9.3-p194/gems/net-http-persistent-2.7/lib/net/http/persistent/ssl_reuse.rb:70:in `connect'
    from /Users/amosng/.rvm/gems/ruby-1.9.3-p194/gems/net-http-persistent-2.7/lib/net/http/persistent/ssl_reuse.rb:70:in `block in connect'
    from /Users/amosng/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
    from /Users/amosng/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
    from /Users/amosng/.rvm/gems/ruby-1.9.3-p194/gems/net-http-persistent-2.7/lib/net/http/persistent/ssl_reuse.rb:70:in `connect'
    from /Users/amosng/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
    from /Users/amosng/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:750:in `start'
    from /Users/amosng/.rvm/gems/ruby-1.9.3-p194/gems/net-http-persistent-2.7/lib/net/http/persistent.rb:511:in `connection_for'
    from /Users/amosng/.rvm/gems/ruby-1.9.3-p194/gems/net-http-persistent-2.7/lib/net/http/persistent.rb:806:in `request'
    from /Users/amosng/.rvm/gems/ruby-1.9.3-p194/gems/mechanize-2.5.1/lib/mechanize/http/agent.rb:258:in `fetch'
    from /Users/amosng/.rvm/gems/ruby-1.9.3-p194/gems/mechanize-2.5.1/lib/mechanize.rb:407:in `get'
    from (irb):549
    from /Users/amosng/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

如何让网页在机械化中加载？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-08T03:55:45.040

有时你需要告诉 mechanize 使用 sslv3：

```
page = Mechanize.new{|a| a.ssl_version, a.verify_mode = 'SSLv3', OpenSSL::SSL::VERIFY_NONE}.get "https://sis-app.sph.harvard.edu:9030/prod/bwckschd.p_disp_dyn_sched" 
```

请注意，我使用 OpenSSL::SSL::VERIFY_NONE。这意味着理论上你很容易受到中间人攻击，但这并不是我在抓取网站时通常担心的事情。

# html - CSS Direct 死者李

> ID：11855327
> 
> 赞同：1
> 
> 时间：2012-08-07T23:00:39.800
> 
> 标签：html, css

在 css 中，如何在悬停时更改测试 1 的颜色，而不是列表 1、2、3 的颜色？

```
<ul>
    <li> 
        test 1 
        <ul>
            <li> List 1</li>
            <li> List 2</li>
            <li> List 3</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T23:05:56.100

一种方法是指定“默认”颜色：

```
li:hover {
    color:#f00;
}
li, li:hover li {
    color:#000;
}​ 
```

[http://jsfiddle.net/D8dwt/1/](http://jsfiddle.net/D8dwt/1/)

另一个（作弊？）是使用更多标记来包装您想要在悬停时设置样式的内容：

```
li:hover span {
    color:#f00;
}​ 
```

```
<ul>
    <li> 
        <span>test 1</span>
        <ul>
            <li> List 1</li>
            <li> List 2</li>
            <li> List 3</li>
        </ul>
    </li>
</ul>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:06:23.433

这是一种方法：

```
ul > li {
    color: red;
}

ul > li:hover {
    color: blue;
}

ul > li:hover > ul > li {
    color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:06:34.323

添加`test1`到`div`元素中，使其位于单独的叶子中。

CSS：

```
div:hover {
   color:  blue;
} 
```

虽然可能有一种方法可以在不修改 html 的情况下做到这一点..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T23:11:34.413

给它自己的类并在你的 CSS 文件中定义它。

```
<li class="yourclass"> 
```

或者把它放在标签中并在你的 CSS 中定义链接

```
li.yourclass a:hover {
    text-decoration: underline ;
} 
```

# oop - 实现多个接口是否违反单一职责原则？

> ID：11855335
> 
> 赞同：13
> 
> 时间：2012-08-07T23:02:04.683
> 
> 标签：oop, language-agnostic, multiple-inheritance, solid-principles, single-responsibility-principle

来自[维基百科](http://en.wikipedia.org/wiki/Single_responsibility_principle)：

> 单一职责原则指出每个类都应该有单一职责，并且该职责应该完全由类封装。

这是否意味着实现多个接口违反了这个原则？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T23:04:57.567

我会说不是自己。一个类可以有一个职责，但在这个过程中做多件事情，并为履行其职责需要做的每一件事情实现一个接口。

此外，Java 中的接口可用于说明类具有哪些属性（例如`Comparable`和`Serializable`），但不能真正说明类的责任。

但是，如果一个类实现了多个接口，每个接口对应一个职责，*那么*这将违反该原则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-20T19:29:34.157

也许，但不一定。

接口不是责任。[有一种非常强大的架构模式，](http://www.infoq.com/presentations/Making-Roles-Explicit-Udi-Dahan)它将接口视为定义对象在应用程序中可能扮演的**角色。**

想想这意味着什么。您可以拥有一个`Person`具有各种接口的类（让我们使用 .net 命名约定）

```
class Person : IAmAStudent, IDrawSocialSecurity, IAmACitizen {
   public SocialSecurityNumber getSocialSecurityNumber() {
      return this.ssn;
   }
   private SocialSecurityNumber ssn;
   public Person(SocialSecurityNumber ssn) { this.ssn = ssn; }
} 
```

现在显然这不能违反 SRP。它显然*只有一个改变的理由*——如果人和社会安全号码之间的关系发生变化。然而，该对象实现了许多接口并在应用程序中扮演了多个角色。

现在，如果您正在实现多个公开*不同*功能的接口，您可能会违反 SRP，但这也可能是一个判断调用。单一职责原则是实现松散耦合的一个很好的经验法则，但这并不是唯一的理想。还有*高内聚性*，表明*相关代码应该一起存在*。两者从根本上是不一致的（尽管通常有办法实现良好的平衡）。因此，您可能会合理地选择一个方向而不是另一个方向，并有意识地决定违反 SRP。

归根结底，SRP 和所有 SOLID 规则更多是为了确保您按照某些思路思考，而不是每次都盲目地遵循它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T03:44:15.433

“单一职责”取决于抽象级别。例如，一个复杂的系统，在系统级别上考虑它，可能有一个责任。例如，电视系统的职责是显示视频画面。在下一个较低级别，该系统由子系统、监视器、电源单元等组成。在这个级别，这些单元中的每一个都有自己的职责。

同样，一个类在一个级别上可以被认为具有单一的职责。但是，在较低级别，它可能具有执行其部分工作的其他组成模块（类、接口等）。例如，Student 类的职责是表示一个学生抽象。然而，它可能有另一个代表学生地址的单元（一个班级）。

这样，使用多个接口本身并不违反面向对象的原则。

# python - 带有propput的Python win32com.client函数

> ID：11855338
> 
> 赞同：0
> 
> 时间：2012-08-07T23:02:53.850
> 
> 标签：python, win32com

我正在使用 win32com.client 编写一个小插件，但是我在设置属性时遇到了问题。属性或函数的定义如下：

```
[id(0x00000021), propget, helpstring("property SystemChannel")]
long SystemChannel(
                long lVEN, 
                long lDEV, 
                long lSVID, 
                long lSID);

[id(0x00000021), propput, helpstring("property SystemChannel")]
void SystemChannel(
                long lVEN, 
                long lDEV, 
                long lSVID, 
                long lSID, 
                [in] long rhs); 
```

我没有获得价值的问题，下一个代码工作得很好：

```
app = Dispatch("CmAVConfig.AudioConfig")   
self.speakerNumber = app.SystemChannel(self.glVid, self.glDid, self.glSvid, self.glsid) 
```

但我无法设置相同属性的值，我尝试使用以下说明，但出现以下错误：

```
app = Dispatch("CmAVConfig.AudioConfig")       
app.SystemChannel(self.glVid, self.glDid, self.glSvid, self.glsid, self.speakerNumber)
ERROR: SystemChannel() takes at most 5 arguments (6 given)

//this one is from a working example using javascript
app.SystemChannel(self.glVid, self.glDid, self.glSvid, self.glsid) = self.speakerNumber
ERROR: SyntaxError: ("can't assign to function call", ('ooo.py', 56, None, 'app.SystemChannel(self.glVid, self.glDid, self.glSvid, self.glsid) = self.speakerNumber\n')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:59:39.357

如果您为库运行 makepy（或使用 win32com.client.gencache.EnsureDispatch），它应该创建一个带有额外参数的 SetSystemChannel 方法。

# r - R - 大数据 - 向量超出向量长度限制

> ID：11855340
> 
> 赞同：3
> 
> 时间：2012-08-07T23:03:27.677
> 
> 标签：r, bigdata

我有以下 R 代码：

```
data <- read.csv('testfile.data', header = T)
mat = as.matrix(data) 
```

我的 testfile.data 的更多统计信息：

```
> ncol(data)
[1] 75713
> nrow(data)
[1] 44771 
```

由于这是一个大型数据集，所以我使用的是具有 64GB 内存空间的 Amazon EC2。所以希望内存不是问题。我能够加载数据（第一行有效）。但是 as.matrix 转换（第 2 行错误）会引发以下错误：

```
resulting vector exceeds vector length limit in 'AnswerType' 
```

任何线索可能是什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T00:24:40.147

如前所述，R 的开发版本支持大于 2^31-1 的向量。例如，这或多或少是透明的

```
> m = matrix(0L, .Machine$integer.max / 4, 5)
> length(m)
[1] 2684354555 
```

这是与

```
> R.version.string
[1] "R Under development (unstable) (2012-08-07 r60193)" 
```

大型对象会消耗大量内存（例如，我的 16G 内存的 62.5%），并且做任何有用的事情都需要几倍的内存。此外，即使是对大数据的简单操作也可能需要相当长的时间。并且还不支持对长向量的许多操作

```
> sum(m)
Error: long vectors not supported yet:
    /home/mtmorgan/src/R-devel/src/include/Rinlinedfuns.h:100 
```

因此，通过迭代更大的文件来处理更小块的数据通常是有意义的。这提供了对 R 例程的完全访问权限，并允许并行评估（通过并行包）。另一种策略是对数据进行下采样，这对统计受众来说应该不会太吓人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T23:22:52.483

您的矩阵包含的元素多于最大向量长度 2^31-1。这是一个问题，因为矩阵只是一个带有`dim`属性的向量。 `read.csv`之所以有效，是因为它返回一个 data.frame，它是一个向量列表。

```
R> 75713*44771 > 2^31-1
[1] TRUE 
```

有关`?"Memory-limits"`更多详细信息，请参阅。

# ios - 如何在 iOS 上为新文档类型设置图标？

> ID：11855341
> 
> 赞同：1
> 
> 时间：2012-08-07T23:03:42.863
> 
> 标签：ios, ios5

我正在构建一个读取其自己的专有文件类型的应用程序。我一直在尝试为新文档类型设置图标，以便当这些文档出现在应用程序之外，特别是在 Dropbox 应用程序上时，它们会有一个专用图标。我导出了一个新的 UTI，还定义了我的应用程序通过 Xcode 处理的文档类型。我确保指定适当大小的图标，如 [http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html中所述](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

谢谢你的帮助！

# servicestack - 在我的 ServiceStack 降价页面中，我将在哪里获得基本 URI？

> ID：11855344
> 
> 赞同：2
> 
> 时间：2012-08-07T23:03:50.213
> 
> 标签：servicestack

我希望从我的根路径 test.com/some.png 提供图像，但此降价页面可能会显示在 [Post]test.com/Item 或 [Put]test.com/Item/123 所以我正在寻找一种获取基本 URI 以形成图像链接的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:02:28.710

`~/`您可以使用Markdown 页面内的文字文本转换为虚拟路径。

此文字在启动时从`EndpointHostConfig.MarkdownReplaceTokens`分配了[appHost.Config.WebHostUrl 属性](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.EndPoints/Formats/MarkdownFormat.cs#L81)的全局属性注册：

```
this.MarkdownReplaceTokens["~/"] = appHost.Config.WebHostUrl.WithTrailingSlash(); 
```

由于 ASP.NET 框架很难确定其托管的 url（即没有请求），因此您需要指定要在配置中使用的首选 url。[这是来自servicestack.net/docs/](http://www.servicestack.net/docs/)的示例- ServiceStack 的 markdown Docs 项目：

```
SetConfig(new EndpointHostConfig {
    WebHostUrl = baseUrl,                          //replaces ~/ with Url
    MarkdownBaseType = typeof(CustomMarkdownPage), 
}); 
```

否则，在您的服务内部，您可以使用`base.Request`或`base.RequestContext.Get<IHttpRequest>()`获取有关传入请求的信息以及`(HttpRequest)base.Request.OriginalRequest`获取底层 ASP.NET 请求对象。

# xml - RegEx 搜索 & 替换 & casefold，但仅限于某些行

> ID：11855346
> 
> 赞同：1
> 
> 时间：2012-08-07T23:03:58.080
> 
> 标签：xml, regex, sed

我有一个带有如下行的 XML 文件：

```
<key>a_acute</key>
<string>a_acute.glif</string> 
```

我需要把它变成这样的东西：

```
<key>Aacute</key>
<string>a_acute.glif</string> 
```

即用大写字母替换后跟下划线的字母（省略下划线），但仅在以 . 开头的行上`<key>`。这是我到目前为止所拥有的：

```
sed '/^<key/s/\(.\)_/\1/' 
```

这将删除`<key>`行上的下划线。但我不能让它折叠起来。我认为`\U`在 the 之前放置 a`\1`可以解决问题，但事实并非如此。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:10:44.860

1.  作为一般规则：不要使用正则表达式来解析 XML 等非常规语言。

2.  `\U`是 GNU sed 的一项功能，在 Mac OS X 上默认不可用。您可以从[homebrew](https://brew.sh/) as`gnu-sed`或[macports](https://www.macports.org/) as安装它`gsed`。

3.  如果您不想依赖外部工具，您可以像这样使用 perl 来完成（`-i`文件已​​就地更改）：

    perl -i -pe 's/(?<=)(.)_/\U$1/' file.plist

# javascript - 使用 YUI 3 跟踪 jQuery.extend

> ID：11855350
> 
> 赞同：1
> 
> 时间：2012-08-07T23:04:40.360
> 
> 标签：javascript, jquery, internet-explorer, yui

我正在尝试使用 YUI 3 在我们的应用程序中跟踪 jQuery 的性能。IE8 抱怨运行缓慢的脚本，在调试时它似乎是 jQuery 内部的（扩展函数）。

我已经设法让 YUI 跟踪 jQuery 的调用，但不是使用以下代码扩展函数本身：

```
//create new instance and load profiler
YUI().use("profiler", function(Y){

  Y.Profiler.registerConstructor("jQuery", window);

  window.YProfiler = Y.Profiler;
}); 
```

这会跟踪对 jQuery 的特定调用，但不会跟踪对 jQuery.extend 的调用——根据 IE，这是导致问题的原因。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T03:06:26.080

`registerFunction`之后添加`registerConstructor`：

```
Y.Profiler.registerConstructor("jQuery", window);
Y.Profiler.registerFunction("jQuery.extend"); 
```

**参考**

*   [YUI Profiler: registerFunction](https://yui.github.io/yui2/docs/yui_2.9.0_full/profiler/)

# php - php Wordpress 插件分类类别和帖子排序

> ID：11855351
> 
> 赞同：-1
> 
> 时间：2012-08-07T23:04:43.933
> 
> 标签：php, wordpress, taxonomy

我正在使用在管理面板中具有内置投资组合选项卡的主题。这个主题使用投资组合项目和投资组合类别而不是原始帖子项目和类别。

我已经构建了一个插件，可以从投资组合的分类中列出列表 - “类别”

```
<?php $portfolio_cats = get_terms( 'Categories', $args); ?>
    <?php foreach ($portfolio_cats as $cat) { echo "<option value = '".$cat->name."'>".$cat->name."</option>"; } ?> </select> <input style = "height: 35px; 
```

并希望通过类别 ID 过滤与所选类别无关的所有帖子。

```
<input style = "height: 35px;
padding: 10px 45px;" type = "submit" value = "הצג" /> </form>
   <table class="widefat" style = "margin: 0 auto;width: 908px;">
        <thead>
            <tr>
                <th>Category</th>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>
        <?php
            $category_id = get_cat_ID(''.$_POST['filter'].'');
            $q = 'cat=' . $category_id;
            query_posts($q);
            if (have_posts()) : while (have_posts()) : the_post(); ?>
           <tr> <td> <?php echo $_POST['filter']; ?> </td> <td> <a href="<?php the_permalink();?>"><?php the_title(); ?></a> </td> </tr>

           <?php endwhile; endif; ?>
        </tbody>
    </table> 
```

但无论如何，它总是向我展示相同的原始帖子，而不是投资组合的帖子。

任何帮助将不胜感激。

**更新：** 它现在显示每个投资组合项目，但是它仅在启动时显示，当我选择类别并运行搜索过滤器时，它什么也不显示

```
<input style = "height: 35px;
padding: 10px 45px;" type = "submit" value = "הצג" /> </form>
   <table class="widefat" style = "margin: 0 auto;width: 908px;">
        <thead>
            <tr>
                <th>Category</th>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>
        <?php
            $category_id = $_REQUEST['filter'];
            /* $q = 'cat=' . $category_id; */
            query_posts( array ( 'cat' => $category_id, 'posts_per_page' => -1, 'post_type' => 'portfolio' ) );
            if (have_posts()) : while (have_posts()) : the_post(); ?>
           <tr> <td> <?php echo $_POST['filter']; ?> </td> <td> <a href="<?php the_permalink();?>"><?php the_title(); ?></a> </td> </tr>

           <?php endwhile; endif; ?>
        </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-26T08:12:33.187

我发送了一个错误的密钥，而不是“猫”，它应该是 ->**类别**

```
query_posts( array ( 'categories' => $category_id, 'posts_per_page' => -1, 'post_type' => 'portfolio', 'post_status' => publish, 'orderby' => 'title', 'order' => 'ASC' ) ); 
```

# java - 常量“运行 Android Lint”失败，Eclipse 中弹出空指针异常（但似乎不是我的代码）

> ID：11855352
> 
> 赞同：29
> 
> 时间：2012-08-07T23:04:44.870
> 
> 标签：java, android, eclipse, android-lint

我不记得我更新了什么（可能是一些 android ADK 项目），但突然间我*经常*在 Eclipse 中收到“出现问题”文本框。它说：

“运行 Android Lint”遇到了问题。失败的

并且有一个确定和一个详细信息按钮。当我单击详细信息时，我得到：

失败的 java.lang.NullPointerException

从文本框中，我不知道是什么失败了……听起来 Lint 本身的运行失败了，并且从 NPE 失败。任何地方都没有与我的任何代码相关联的行号，所以我不认为它来自我的代码。

我已经尝试禁用运行 Lint 以及其他所有内容......但是单击“运行 Android Lint”复选框只会导致 Lint 运行，从而给出消息框警告。它似乎确实在运行，因为底部出现了几个 Lint 警告。但它似乎仍然在告诉我 Lint 本身有一个 NPE……我知道在哪里解决这个问题。

我在 Windows Home Premium 64bit 中使用 JDK 6 运行 Eclipse SDK 3.7.2（最近卸载了 JDK 7 并改为安装 6。）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-08-13T03:51:56.357

这是由 ADT 23.0.2 中的错误引起的，请注意此处的问题：[https ://code.google.com/p/android/issues/detail?id=73002](https://code.google.com/p/android/issues/detail?id=73002)

升级到 23.0.3 为我修复了它。

1.  启动 Eclipse
2.  转到帮助->安装新软件
3.  从下拉列表中选择“Android Developer Tools Update Site - [https://dl.google.com/android/eclipse/](https://dl.google.com/android/eclipse/) ”（如果没有，可以通过单击添加并粘贴名称和 URL 来添加）
4.  检查包列表中的Developer Tools包（展开并确保所有子包都被选中）
5.  为避免安装时出现错误，请取消选中“安装期间联系所有更新站点以查找所需软件”
6.  单击下一步，接受许可证，单击下一步
7.  安装完成后，重新启动 Eclipse。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-13T05:48:06.580

在**Window > Preferences > Android > Lint 错误检查中；**取消选中“保存文件时检查错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-04T09:00:29.420

我不得不将我在 Android 下的项目设置更改为我在`android:targetSdkVersion`. 现在问题消失了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T18:42:41.327

我自己刚遇到这个问题。它被隔离到一个库中，因为我可以清理和重建每个包，只有一个报告了这个错误。我终于从一个源文件中推出了一些编辑，并且 Lint 异常消失了。它只是一个枚举类型，作为方法中的形式参数，这看起来很无害，但是你去吧。它似乎确实是一个 Lint 错误，但却是一个奇怪的错误。希望有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-11T07:52:19.573

在我的清单中从 Android 19 升级到 20 后，我遇到了这个问题。我这样做是因为 Eclipse 哭着说我没有使用最新的 Android 版本，应该考虑更新它。

```
 <uses-sdk
    android:minSdkVersion="17
    android:targetSdkVersion="20" /> 
```

错误可能是因为我没有安装最新的 SDK (20)。

将其改回：

```
 <uses-sdk
    android:minSdkVersion="17"
    android:targetSdkVersion="19" /> 
```

为我解决了这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-06T15:46:19.970

我遇到了这个问题，结果发现 java 编译器已经恢复到 1.5。将其设置为 1.6 可以解决这些问题。属性 > Java 编译器？编译器合规级别：1.6。我偶尔会看到这种情况，但我不确定为什么编译器会恢复到 1.5。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-15T18:41:58.617

我不是专家，英语不是我的母语。但是我解决了这个问题。

`appocompat_v7`我在数据被破坏时遇到了问题。`apk`所以我在我正在使用的工作区中删除了它。然后我`apk`在 appcom 的工作区中生成了一个新的...是自动生成的，现在它可以工作了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-14T23:44:05.970

以下步骤帮助我解决了同样的问题。

在我的项目 -> 上下文菜单 -> Android 工具 -> 修复项目属性更改为 AndroidManifest.xml 中的最新版本

# magento - Magento：使用 PaypalUK 模块的 Payflow Pro？

> ID：11855353
> 
> 赞同：2
> 
> 时间：2012-08-07T23:04:51.170
> 
> 标签：magento, paypal, payflowpro

我正在为客户的 Magento 商店实施 PayPal Payflow Pro（技术上是“Website Payments Pro Payflow Edition”），我注意到它是通过 PaypalUk 模块而不是 Paypal 模块运行的。从名字上看，PaypalUk 模块好像是针对英国的 Paypal 的。这是不正确的吗？有人知道模块名称的基础是什么吗？

Paypal 模块 system.xml 明确指向 PaypalUk 模块：

```
<wpp_pe translate="label comment">
    <label>Website Payments Pro Payflow Edition (includes Express Checkout)</label>
    ...
    <config_path>payment/paypaluk_direct/active</config_path>
    ...
</wpp_pe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:36:32.537

Website Payments Pro Payflow Edition*是*仅适用于英国的产品。此外，您的“合作伙伴”价值也可能是“PayPalUK”。
所以是的，这是正确的。

# linux - 将日期从 shell 脚本传递给查询

> ID：11855356
> 
> 赞同：1
> 
> 时间：2012-08-07T23:05:12.360
> 
> 标签：linux, shell, unix, solaris, hive

下面是我运行 Hive 查询的 shell 脚本。在此我正在计算昨天的日期，并且我在 where 子句中传递了昨天的日期。但是那个查询对我不起作用。

```
#!/bin/bash
DATE_YEST=`TZ=GMT+48 date +%Y%m%d`
echo $DATE_YEST
hive -S -e 'SELECT * FROM PDS_ATTRIBUTE_DATA_REALTIME WHERE dt=$DATE_YEST' 
```

我正在像这样运行上面的脚本-

```
sh -x test.sh 
```

我`DATE_YEST date`在 where 子句中传递它的方式有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:18:39.110

尝试这个：

```
#!/bin/bash
DATE_YEST=`TZ=GMT+48 date +%Y%m%d`
echo $DATE_YEST
echo "SELECT * FROM PDS_ATTRIBUTE_DATA_REALTIME WHERE dt=$DATE_YEST" 
```

输出将是：

```
20120806
SELECT * FROM PDS_ATTRIBUTE_DATA_REALTIME WHERE dt=20120806 
```

如果您需要选择周围的引号，请使用：

```
#!/bin/bash
DATE_YEST=`TZ=GMT+48 date +%Y%m%d`
echo $DATE_YEST
echo "\"SELECT * FROM PDS_ATTRIBUTE_DATA_REALTIME WHERE dt=$DATE_YEST\"" 
```

输出将是：

```
20120806
"SELECT * FROM PDS_ATTRIBUTE_DATA_REALTIME WHERE dt=20120806" 
```

假设您想要引号，您的脚本将如下所示：

```
#!/bin/bash
DATE_YEST=`TZ=GMT+48 date +%Y%m%d`
echo $DATE_YEST
hive -S -e "\"SELECT * FROM PDS_ATTRIBUTE_DATA_REALTIME WHERE dt=$DATE_YEST\"" 
```

# c# - WebAPI 和 MVC 在不同的机器上

> ID：11855357
> 
> 赞同：1
> 
> 时间：2012-08-07T23:05:17.563
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, asp.net-web-api

我既有一个设计问题，也有一个关于 WebAPI 工作方式的总体问题。

我们有一个包含许多应用程序的内部网站（每个应用程序都有一个单独的 MVC 区域）。然后，我们将 DAL 逻辑划分为由 Web 服务调用前端的库。模型/存储库将调用多个数据库（一些内部数据库，一些第三方数据库）内的 CRUD 事物。所以看起来像这样

UI -> 模型 -> 存储库 -> WebServices -> 数据库。

最初这样做是因为我们需要能够访问多个数据访问点并将它们汇集回内部网站以供各种应用程序使用，这似乎是一种抽象所有逻辑的好方法，以便 Web 应用程序只关注视图结尾。事实证明，这种模式有利于分离关注点，但现在我们正在考虑让这种模式不仅仅适用于 .NET 应用程序/客户端，这让我开始关注 WebAPI。

以下是我的问题：

1.  我的主要问题是，知道 Web 服务都是在 WCF（基于合同）中完成的，将其转换为使用 WebAPI 有多难，记住我们希望确保 WebAPI Web 服务位于与用户界面。
2.  有什么方法可以设置 WebAPI 以拥有合同并仍然使用 HTTP 动词？
    *   如果我通过另一台服务器上的 MVC 应用程序和另一个解决方案远程访问 WebAPI Web 服务，有没有办法仍然获得使用 WCF 合同时获得的强类型对象？
3.  人们对这种设计模式有什么看法？

# mysql - nodejs，mysql-db：处理使用连接的查询结果

> ID：11855360
> 
> 赞同：1
> 
> 时间：2012-08-07T23:05:51.207
> 
> 标签：mysql, database, node.js

我已经在这里发布了问题[https://github.com/mariano/node-db-mysql/issues/81](https://github.com/mariano/node-db-mysql/issues/81)

当我得到连接结果时，属性名称冲突处理不当。

一些帮助？一些有助于修改 c++ 代码并使其正常工作的帮助。

我正在为一个项目使用 db-mysql，我不想改变它来解决这个问题。我想避免用按顺序执行的几个查询来代替 join。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:46:05.700

这不是错误。MySQL 自动重命名冲突的列名。如果您的结果有冲突的列名（例如 person），它将被映射到“person”和“person1”。您可以手动映射冲突的列以避免默认名称更改。例如：

```
SELECT A.id, A.name, B.name AS bname, B.year FROM A INNER JOIN B ON A.id = B.a_id WHERE B.year > 2000 
```

# python - 如何消除matplotlib轴的相对偏移

> ID：11855363
> 
> 赞同：25
> 
> 时间：2012-08-07T23:06:00.720
> 
> 标签：python, matplotlib, axis

当我尝试针对具有足够大数字的范围进行绘图时，我得到一个轴，所有刻度都具有相对偏移。例如：

```
plot([1000, 1001, 1002], [1, 2, 3]) 
```

我在横坐标轴上得到这些刻度：

```
0.0     0.5     1.0     1.5     2.0
                               +1e3 
```

问题是如何删除`+1e3`并获得公正：

```
1000.0  1000.5  1001.0  1001.5  1002.0 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-08T05:18:19.907

```
plot([1000, 1001, 1002], [1, 2, 3])
gca().get_xaxis().get_major_formatter().set_useOffset(False)
draw() 
```

这将获取 current `axes`，获取 x 轴`axis`对象，然后获取主要格式化程序对象并将 useOffset 设置为 false ( [doc](http://matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.ScalarFormatter) )。

在 matplotlib 的较新版本（1.4+）中，可以通过`axes.formatter.useoffset`rcparam 更改默认行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-15T16:00:17.547

要在任何地方禁用相对移位，请设置 rc 参数：

```
import matplotlib
matplotlib.rc('axes.formatter', useoffset=False) 
```

# php - 如何简化sql查询

> ID：11855364
> 
> 赞同：0
> 
> 时间：2012-08-07T23:06:07.110
> 
> 标签：php, mysql, sql

我需要简化此查询，因为保存 mysql 的服务器无法在设置的时间限制内执行此操作。

```
SELECT `B`.*,
       `C`.`name`,
       DATE_ADD(`B`.`SAILING-DATE`, INTERVAL `B`.`NIGHTS` DAY) AS dataEnd 

FROM `table1` AS B 
INNER JOIN `table2` AS A 
INNER JOIN `table3` AS C

WHERE `B`.`ID`=`A`.`ID` 
AND `B`.`CAT`=`A`.`CAT` 
AND `C`.`code`=`A`.`code`
AND (`B`.`NIGHTS`>=$aNumber AND `B`.`NIGHTS`<=$anotherNumber) 
// where are other AND like this on `table1` 
```

在哪里`table1`并且`table2`有大约 25.000 行。

我想 suddivide 执行第一个查询的查询`table1`，而不是循环所有结果并对每个结果进行一次查询，但我认为效率太低。

有人能帮我吗？谢谢！！！

编辑：

这是解释：

![在此处输入图像描述](../Images/6f56b9d7561154cad212699161df66f7.png)

编辑2：

我不能添加索引导致字段`ID`，`CAT`并且`code`在每个表中都不是唯一的.. 在每个表中都有更多具有相同`ID` `CAT`和`code`

编辑3：

我认为最好将所有内容划分为更简单的子查询..有人可以给我一个想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:12:00.390

您可以尝试的一件事是：

```
SELECT `B`.*, 
       `C`.`name`, 
       DATE_ADD(`B`.`SAILING-DATE`, INTERVAL `B`.`NIGHTS` DAY) AS dataEnd  

FROM (SELECT * 
         FROM `table1` 
         WHERE table1.NIGHTS >=$aNumber AND table1.NIGHTS <=$anotherNumber) AS B  
INNER JOIN `table2` AS A  ON `B`.`ID`=`A`.`ID` AND `B`.`CAT`=`A`.`CAT`
INNER JOIN `table3` AS C  ON `A`.`code` = `C`.`code` 
```

这将有效地预过滤 table1 中的行，仅选择那些`Nights`满足您所需条件的行，从而减少其他表上连接所涉及的数量。

另请注意，您的 JOIN 条件应该在使用 ON 的 INNER JOIN 之后 - 在这种情况下，您实际上不需要 WHERE 子句。

您应该调查的另一件事是查询计划 - 有关详细信息，请参阅[EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)命令。

在这种情况下，您可能会从 ID、CAT 和 CODE 列上的索引中受益，但是，不要只是为所有内容添加索引，而是首先检查 EXPLAIN 的输出以查看最佳节省的位置 - 添加索引将有*插入*数据时的成本。

**编辑：**

好的，所以子查询执行得很好，但是您担心无法预过滤 table1 的情况。首先，让我们修改您的原始查询，然后尝试：

```
SELECT B.*, 
       C.name, 
       DATE_ADD(B.SAILING-DATE, INTERVAL B.NIGHTS DAY) AS dataEnd  

FROM table1 AS B  
INNER JOIN table2 AS A  ON (B.ID=A.ID AND B.CAT=A.CAT)
INNER JOIN table3 AS C  ON (A.code = C.code) 
```

我想知道您的原始查询的奇怪格式（连接条件应该真正遵循您要加入的表）是否在某种程度上使 MySql 感到困惑。我还删除了不需要的反引号，并且在我看来，这使查询更难阅读（和输入）。

如果性能不符合您的预期，请在 table1 和 table2 上发布[SHOW INDEX的结果。](http://dev.mysql.com/doc/refman/5.0/en/show-index.html)可能是在 table1 中的 ID 和 CAT 以及 table2 中的 ID 和 CAT 组合上添加索引（[复合索引](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)）可能会提高您的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:14:34.433

首先将连接条件放在连接中，以帮助数据库对查询做出正确解释。这可能不会产生性能差异，但至少查询会更容易为人类解释。

您不需要在查询中的别名周围加上反引号。你现在没有到处都有它们，所以要保持一致并在任何地方添加它们，或者删除它们。

```
SELECT B.*,
       C.`name`,
       DATE_ADD(B.`SAILING-DATE`, INTERVAL B.`NIGHTS` DAY) AS dataEnd 

FROM `table1` AS B 
INNER JOIN `table2` AS A ON B.`ID`=A.`ID` AND B.`CAT`=A.`CAT`
INNER JOIN `table3` AS C ON C.`code`=A.`code`
WHERE (B.`NIGHTS`>=$aNumber AND B.`NIGHTS`<=$anotherNumber) 
```

然后确保您有查询可以使用的索引，例如 on `table2.NIGHTS`。您可以使用该[`explain`命令](http://dev.mysql.com/doc/refman/5.0/en/explain.html)来确定查询使用了哪些索引。

# c++ - Visual Studio 在为 32 位编译时尝试使用 64 位 C 运行时库

> ID：11855371
> 
> 赞同：0
> 
> 时间：2012-08-07T23:06:45.980
> 
> 标签：c++, visual-studio-2010, linker

当我尝试编译我的程序时，出现以下错误：

```
Error   226 error LNK1112: module machine type 'x64' conflicts with target machine type 'X86'   C:\dev\VAVTC\AMI-Intel\AVTC\2012_06_DemoCode\ElansMatting\msvcprt.lib(MSVCP100.dll) 
```

我在 Linker>Advanced 下的目标机器设置为 MachineX86，所以我很迷茫。

任何想法将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:45:30.733

所以我想通了。:P

出于某种原因，在 Project Properties>VC++ 目录库目录已设置为 Amd64 库而不是 32 位库

# javascript - 无法让 jQuery 链式 ajax 选择工作

> ID：11855372
> 
> 赞同：2
> 
> 时间：2012-08-07T23:06:48.427
> 
> 标签：javascript, jquery, ajax, forms

我正在尝试从这个 jQuery 插件中实现链式 ajax 选择：http: [//www.appelsiini.net/projects/chained](http://www.appelsiini.net/projects/chained)

我正在使用远程方法。

我有一个问题，我的选择框在选择中最后显示“默认”（空白）值，如下所示：

![](../Images/b25fcde2ccb15cdc7af25423613d4f64.png)

这是一个问题，因为我有 5 个链，所以默认情况下未选择空白值时，它会执行 5 次顺序查找。它也不像演示页面上显示的那样工作，默认情况下选择默认值而不是实际值。

来自我的服务器的 JSON 请求返回：

```
{"":"","1":"Test #1","2":"Test #2"} 
```

如您所见，这不是我的 JSON 返回的顺序。

这是我的 HTML：

```
<label class="control-label" for="branch">Branch</label>
<select id="branch" name="branch">
    <option value=""></option>
    <option value="1">Foo</option>
    <option value="2">Bar</option>
</select>
<label class="control-label" for="facility">Facility</label>
<select id="facility" name="facility">
    <option value=""></option>
</select>

<script src="/js/chained.js"></script>
<script>
    $(document).ready(function() {
        $("#facility").remoteChained("#branch", "/src/record.json.php");
    } );
</script> 
```

所以现在我迷路了，因为我不能很好地读/写 JavaScript，我希望有人能看到这个问题并帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:55:31.067

它发生是因为，

[Chrome 和可能的 Opera 会自动对对象属性进行排序](https://stackoverflow.com/questions/4886314/chrome-and-probably-opera-sort-object-properties-automatically)

所以你的 JSON 也是`for`循环排序的。

```
var json = {"":"","1":"Test #1","2":"Test #2"};
for(var i in json)
   console.log(i);

/* Result : 1 2 (null) */ 
```

[演示](http://jsfiddle.net/ocanal/XtDHU/)

## 解决方案1：

如果您将索引更改为不会排序的字符串。

```
var json = {"":"","t1":"Test #1","t2":"Test #2"};
for(var i in json)
   console.log(i);

/* Result : (null) t1 t2 */ 
```

[演示](http://jsfiddle.net/ocanal/XtDHU/1/)

## 解决方案2：

更换插件

这是与数组一起使用的已编辑插件代码，

```
 /*
 * Remote Chained - jQuery AJAX(J) chained selects plugin
 *
 * Copyright (c) 2010-2011 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 */

(function($) {

    $.fn.remoteChained = function(parent_selector, url, options) { 

        return this.each(function() {

            /* Save this to self because this changes when scope changes. */            
            var self   = this;
            var backup = $(self).clone();

            /* Handles maximum two parents now. */
            $(parent_selector).each(function() {
                $(this).bind("change", function() {

                    /* Build data array from parents values. */
                    var data = {};
                    $(parent_selector).each(function() {
                        var id = $(this).attr("id");
                        var value = $(":selected", this).val();
                        data[id] = value;
                    });

                    $.getJSON(url, data, function(json) {
                        var selectedVal;
                        /* Clear the select. */
                        $("option", self).remove();

                        /* Add new options from json. */
                        for (var key in json.options) {
                            var k = json.options[key];
                            /* This sets the default selected. */
                            if ("selected" == k.name) {
                                selectedVal = k.value;
                                continue;
                            }
                            var option = $("<option />").val(k.value).append(k.name);
                            $(self).append(option);    
                        }

                        /* Loop option again to set selected. IE needed this... */ 
                        $(self).children().each(function() {
                            if ($(this).val() == selectedVal) {
                                $(this).attr("selected", "selected");
                            }
                        });

                        /* If we have only the default value disable select. */
                        if (1 == $("option", self).size() && $(self).val() === "") {
                            $(self).attr("disabled", "disabled");
                        } else {
                            $(self).removeAttr("disabled");
                        }

                        /* Force updating the children. */
                        $(self).trigger("change");

                    });
                });

                /* Force updating the children. */
                $(this).trigger("change");             

            });
        });
    };

    /* Alias for those who like to use more English like syntax. */
    $.fn.remoteChainedTo = $.fn.remoteChained;

})(jQuery); 
```

要使用这个更新的插件，你应该使用这个 JSON 格式，

```
{
    "options" : [
      { "value" : "", "name" : ""},
      { "value" : "1", "name" : "Test #1"},
      { "value" : "2", "name" : "Test #2"},
    ]
} 
```

如果你想设置一个默认的选中项（例如“Test #1”被选中），那么你可以这样做，

```
{
    "options" : [
      { "value" : "", "name" : ""},
      { "value" : "1", "name" : "Test #1"},
      { "value" : "2", "name" : "Test #2"},
      { "value" : "1", "name" : "selected"}
    ]
} 
```

* * *

**我怎样才能使用这个编辑过的插件？**

只需清除所有代码，`/js/chained.js`然后粘贴新代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:28:15.600

看起来从服务器返回的 JSON 是错误的。

它应该包含这样的`selected`字段：

```
{"":"--","3-doors":"3 doors","5-doors":"5 doors","coupe":"Coupe","cabrio":"Cabrio","selected":"coupe"} 
```

这取自此处的示例：

[http://www.appelsiini.net/projects/chained](http://www.appelsiini.net/projects/chained)

在您的情况下，服务器应返回：

```
{"":"","1":"Test #1","2":"Test #2","selected":""} 
```

# c# - 鼠标事件处理程序

> ID：11855375
> 
> 赞同：2
> 
> 时间：2012-08-07T23:07:15.453
> 
> 标签：c#, mouseevent, mouseleave

该程序的目的是允许用户通过在屏幕上选择它们来点亮面板上的多个 LED。我有一组按钮，目前用户必须单独单击所有按钮。该阵列拥有 1536 个 LED，点击次数非常多。我希望用户能够按住鼠标按钮并点亮他们穿过的任何 LED。我想说的是：

```
buttonArray[row, column].MouseLeave += new System.Windows.Forms.MouseEventHandler(ClickButton); 
```

然后有一个例程，例如：

```
private void ClickButton(Object sender, System.Windows.Forms.MouseEventArgs e)
{
   if (e.Button==MouseButtons.Left) 
   {
      //blah blah
   }
} 
```

这将在用户鼠标移过按钮时触发，然后我将检查他们是否按住按钮。现在我收到此错误：

> 错误 1 ​​无法将类型“System.Windows.Forms.MouseEventHandler”隐式转换为“System.EventHandler”。

似乎我没有正确匹配委托和处理程序，或者我不理解命名空间的东西......对 C# 来说有点新。我在 MSDN 上偶然发现了一段时间，发现很多例子看起来和我的工作一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:16:53.760

那里的问题是一种类型。Click 事件传入`System.EventArgs`. 要使用`System.MouseEventArgs`，您需要绑定到 MouseClick 事件。

在这种情况下，我要做的是创建一个 MouseDown 处理程序，该处理程序设置一个私有布尔标志来表示鼠标已按下`True`，并创建一个 MouseUp 处理程序将其设置回`False`。然后，您将使用 MouseEnter 处理程序并检查标志是否已设置，如果已设置，则切换或设置表单上 LED 表示的状态。然后您可以将所有这些绑定到这三个处理程序，它应该允许您在进入控制空间时判断您的鼠标是否按下。

编辑：要编辑这个，因为我放在一起的例子不像我想象的那样工作。去搞清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-17T22:39:33.700

这里只是一个注释：

如果您无法让您的签名与您尝试装配的 ui 事件相匹配，您可以使用 Visual Studio 设计器确定其外观。

为此，请创建一个按钮，然后按 alt+enter 键查看属性。然后您可以通过单击小闪电图标来查看事件，然后双击一个事件（例如 MouseLeave）以让 Visual Studio 为您填写事件接线。

[![鼠标离开接线](../Images/f47285bca35a68670792228d5036ebd7.png)](https://i.stack.imgur.com/m9uRq.png)

然后，您可以将此代码用作您想要使用的事件类型的参考。

# objective-c - 如何在 Xcode 4.2 上启用 Objective-C 异常？

> ID：11855382
> 
> 赞同：8
> 
> 时间：2012-08-07T23:08:32.637
> 
> 标签：objective-c, ios, exception-handling, xcode4.2, try-catch

也许我很愚蠢或其他什么，但我已经在我的代码中添加了一个@try @catch 块并且我得到一个“不能使用@try with object-c exceptions disabled”错误，阻止编译......

如何打开它？我四处搜索，添加了异常断点，但没有结果......我该怎么做？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-07T23:17:29.357

检查您是否在项目和/或目标构建设置上启用了异常。项目导航器 -> 选择项目或目标 -> 构建设置 -> 启用 Objective-C 异常 ![例外设置](../Images/189dcde36ae3b21e35fd2a82e51fa513.png)

# wso2 - 部署汽车文件时，端点超时设置被剥离

> ID：11855384
> 
> 赞同：0
> 
> 时间：2012-08-07T23:08:51.253
> 
> 标签：wso2, wso2esb, wso2carbon

我在 MAC OSX 10.7.4 上使用 WSO2 ESB 4.0.2。

我在 Eclipse 3.7.2 中使用 Carbon Eclipse 插件 1.0.14。

通常，当我开发时，我会使用代理服务和数据服务。代理服务在将请求转发到数据服务之前进行输入验证/转换。

我将数据服务的端点作为动态端点并将其存储在注册表中。

当我将`car`文件部署到服务器时，端点超时配置被剥离。

这是一个错误还是我做错了什么？这是注册表中的信息和 ESB（管理 UI）中的实际动态端点配置

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoint xmlns="http://ws.apache.org/ns/synapse" name="ds_endpoint">
    <address statistics="enable" trace="disable"
    uri="http://localhost:8280/services/ITLM_DS/ITLM_OP">
        <suspendOnFailure>
            <progressionFactor>1.0</progressionFactor>
        </suspendOnFailure>
        <markForSuspension>
            <errorCodes>101503,101504,101505</errorCodes>
            <retriesBeforeSuspension>1</retriesBeforeSuspension>
            <retryDelay>3</retryDelay>
        </markForSuspension>
        <timeout>
            <duration>180000</duration>
            <action>fault</action>
        </timeout>
    </address> 
```

动态edpoint定义如下

```
 <endpoint xmlns="http://ws.apache.org/ns/synapse">
   <address uri="http://localhost:8280/services/ITLM_DS/ITLM_OP" >
      <suspendOnFailure>
         <progressionFactor>1.0</progressionFactor>
      </suspendOnFailure>
      <markForSuspension>
         <errorCodes>101503,101504,101505</errorCodes>
         <retriesBeforeSuspension>3</retriesBeforeSuspension>
         <retryDelay>1</retryDelay>
      </markForSuspension>
   </address>
</endpoint> 
```

请帮忙。谢谢阿比吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:50:35.300

我可以在 ESB 4.0.3 中重现此问题。当我将您的确切端点部署为动态端点时，它的超时将被删除。在 ESB 中对我来说似乎是一个错误。将为您提供更多信息的更新。

# makefile - 在makefile中使用g++和-MMD自动生成依赖

> ID：11855386
> 
> 赞同：18
> 
> 时间：2012-08-07T23:09:11.157
> 
> 标签：makefile, dependencies, g++

我知道以下 makefile 将使预处理器自动生成依赖项（在 .d 文件中）并将它们包含在 makefile 中（因为我的课程笔记是这样说的），因此不必自动维护它们。旗帜是对此`-MMD`负责的。我不明白的是： .d 文件是在什么时候生成的？甚至没有`${CXXFLAGS}`使用任何命令。大概，像这样的命令`${CXX} ${CXXFLAGS} -c x.C -o x.o`将由 make 为每个目标文件自动推断，但如果这些是生成 .d 文件的命令，我们不是已经过了知道 xo、yo 和 zo 的依赖关系可能相关的地步吗？ ，如果我们只通过执行生成这些 .o 文件的命令来了解它们？（假设有 .h 文件，如果让其自行推断规则或其他东西，makefile 将忽略这些文件。）

```
CXX = g++                     # compiler
CXXFLAGS = -g -Wall -MMD      # compiler flags
OBJECTS = x.o y.o z.o         # object files forming executable
DEPENDS = ${OBJECTS:.o=.d}    # substitutes ".o" with ".d"
EXEC = a.out                  # executable name

${EXEC} : ${OBJECTS}          # link step
    ${CXX} ${OBJECTS} -o ${EXEC}

-include ${DEPENDS}           # copies files x.d, y.d, z.d (if they exist) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T05:27:05.757

> 大概，`${CXX} ${CXXFLAGS} -c x.C -o x.o`make 会为每个目标文件自动推导出类似的命令，但如果这些是生成 .d 文件的命令，我们不是已经过了知道 xo、yo 和 zo 的依赖关系的地步吗？如果我们只通过执行生成这些 .o 文件的命令来了解它们，那么它们是否相关？

你在这里是对的。第一次运行 Makefile 时不存在依赖项。

但这无关紧要 - 仅当 .o 文件已经存在并且您更改了 .h 文件时才需要依赖信息。第一次运行 Make 时，无论如何都需要构建所有 .o 文件，同时生成 .d 文件。

之后，.d 文件将给出依赖信息。如果一个头被改变，依赖信息会告诉 Make 哪些 .o 文件需要重建。如果源文件发生变化，总是需要重新构建 .o，同时会生成更新的依赖信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-05T01:16:39.243

如果您想知道背后的 makefile 正在做什么，请使用 -p 标志，并将输出重定向到一个文件，因为它有很多东西。

`make -p foo > bar`将转储 a 的所有变量值和规则`make foo`，然后查看`bar`将显示为隐式规则运行的命令。在您的情况下，它会向您显示`.cpp.o`or `%.o: %.cpp`（奇怪的是它们都在那里）规则将调用`$(COMPILE.cpp)`which resolves to `$(COMPILE.cc)`which resolves to `$(CXX) $(CXXFLAGS) $(CPPFLAGS) $(TARGET_ARCH) -c`。它有一个有趣的属性，您可以将内容添加到 CXXFLAGS 或 CPPFLAGS 以将它们添加到您的 .cpp.o 编译中，但不能添加仅由`.c.o`规则使用的 CFLAGS，这有点意义，因为您可能想要您的 C 文件和 C++ 文件的处理方式不同（CC 和 CXX 通常也设置为不同的编译器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-25T08:17:10.170

是的，你是对的，如果你删除了依赖文件，但保留了目标文件，那么 make 将使用不完整的依赖信息运行，并且可能无法重新构建标头已更改的目标文件。

Make 也可能拒绝构建 - 当依赖文件引用您已删除的标头时会发生这种情况（并且显然不再从任何其他来源引用）。由于 Make 在编译之前不知道如何重建依赖文件，它所能做的就是报告缺少的依赖项（然后显而易见的操作是删除依赖项文件，导致上面的第一个条件）。

唯一的答案是纪律：删除依赖文件时，始终删除目标文件。您可以使用`clean`目标来帮助解决此问题。

```
clean::
        $(RM) *.o *.d 
```

~~另外~~，告诉 Make 如何创建依赖文件：

```
%.dep: %.cc
        $(CXX) -MM $(CPPFLAGS) $< | sed -e 's,\($*\)\.o[ :]*,\1.o $@: ,g' > $@ 
```

（该`sed`命令确保依赖项本身依赖于与目标文件相同的源）。

# lua - 棒棒的 wm Unagi 透明度

> ID：11855392
> 
> 赞同：3
> 
> 时间：2012-08-07T23:09:45.567
> 
> 标签：lua, awesome-wm

[Awesome](http://awesome.naquadah.org/)是一个窗口管理器，可让您通过编程语言（Lua）设置环境。我安装了[Unagi](http://unagi.mini-dweeb.org/)（合成窗口管理器），我可以使 firefox 透明。例如`awful.rules`：

```
{rule = {class = "Firefox"}, 
 properties = {opacity = 0.8} } 
```

您将如何`awful.wibox`通过设置规则使透明化？还是有不同的方法使`awful.wibox`透明？

```
wmbar = awful.wibox({ position = "right", screen = 1 })
wmbar.widgets = { 
    widget1,
    widget2,
    layout = awful.widget.layout.vertical.flex } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:08:02.887

awesome 的窗口匹配规则（用于设置不透明度）依赖于窗口属性，您可以使用`xprop`. wibox，包括提示框、布局框、标签列表和任务列表在面板窗口上呈现。例如，您可以使用`transset-df`( `pacman -S transset-df`for arch) 独立于窗口管理器设置 x-server 上任何窗口（包括真棒面板）的不透明度。但是你不能只改变外部窗口片段的不透明度，而且 awesome 本身不支持透明度——它完全依赖于底层的复合管理器。

# c# - ANPR 字符识别

> ID：11855393
> 
> 赞同：4
> 
> 时间：2012-08-07T23:10:11.893
> 
> 标签：c#, image-processing, tesseract, aforge, anpr

我正在实施一个 ANPR 系统。我设法从静止的车辆图像中获得了清晰的车牌区域。当我将某些字符输入 OCR 引擎时，我遇到了问题。

我正在使用 Tesseract，问题是像“W”和“M”这样的字符被识别为“N”，有时“U”被识别为“D”，甚至“O”被识别为“U”或“D”，反之亦然.

我想知道它是否与 OCR 引擎本身有关，或者我是否可以做一些事情来改善车牌图像。以下是车牌图片：

我正在使用带有 C# 和 Tesseract 的 Aforge.Net 框架作为 OCR 引擎。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:46:03.147

大家好，我在进行 OCR 之前通过更好的预处理来解决这个问题，因为我的角色似乎太扭曲了。抱歉，我还没有结束这个问题:(谢谢你们的努力，你们真的很感激

# .htaccess - 从旧的 mod-write 重定向到新的

> ID：11855396
> 
> 赞同：0
> 
> 时间：2012-08-07T23:10:49.770
> 
> 标签：.htaccess, mod-rewrite

因此，我为将网站托管在与 GoDaddy 的共享服务器上的客户重新编写了所有设置。经过将近一年的工作，他们联系了我，GoDaddy 更改了一些内容，导致重写无法正常工作。它有时会起作用，但并非总是如此。无论如何，它喜欢漂亮的 URL，例如与我正在阅读的内容`http://siteurl.com/employee/19/`相反，`http://siteurl.com/employee-19`它与它有关，它不是以斜线结尾，但无论如何，第一个现在有效。

但是，有没有办法创建从旧 modrewrite 规则到新规则的重定向。我试过这个，但之前从未真正重写过 htaccess 文件，所以我可能设置错了。

`redirect /employee-19 http://siteurl.com/employee/19/`

但这会吐出一个错误 301，关于如何解决这个问题的任何想法，或者这只是一个失败的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:34:01.980

> 但这会吐出一个错误 301，关于如何解决这个问题的任何想法，或者这只是一个失败的原因？

301就是你想要的。它告诉浏览器和搜索引擎索引机器人`http://siteurl.com/employee-19`相当于`http://siteurl.com/employee/19/`但从现在开始使用后者。内容*已从第一个 URL 永久移动到第二个 URL*。

如果您想要更通用的形式，可以使用`RedirectMatch`：

```
RedirectMatch 301 ^/employee-([0-9]+) http://siteurl.com/employee/$1/ 
```

# emacs - 如何恢复 emacs 缓冲区列表中的缓冲区？

> ID：11855397
> 
> 赞同：3
> 
> 时间：2012-08-07T23:11:11.787
> 
> 标签：emacs, elisp

我正在尝试创建一个从 emacs`*Buffer List*`缓冲区恢复缓冲区的函数。据我从文档中可以看出，没有办法快速做到这一点（以内置的保存/标记/访问功能的方式`buff-menu.el`）。所以我正在写一些省略号。这是我目前的尝试：

```
(defun frobnitz ()
  "Call in buffer list to revert buffer at point to file."
  (interactive)
  (let ((buf (buffer-menu-buffer t)))
    (if (y-or-n-p (concat "Revert " (buffer-name (buf)) " ?"))
    (with-current-buffer buf
      (let (())
        (revert-buffer t t t)
        (message
          (concat "Reverted " (buffer-name (buf)) "to last saved state."))
        ))))) 
```

不幸的是，上面的 defun 似乎不起作用，我很难弄清楚原因。如果我评估上述内容，切换到`*Buffer List*`缓冲区并调用`M-: (frobnitz)`，那么它会出现以下错误。

```
Debugger entered--Lisp error: (void-function buffer-menu-buffer)
  (buffer-menu-buffer t)
  (let ((buf (buffer-menu-buffer t))) (if (y-or-n-p (concat "Revert " (buffer-name (buf)) " ?")) (with-current-buffer buf (let (nil) (revert-buffer t t t) (message (concat "Reverted " (buffer-name (buf)) "to last saved state."))))))
  frobnitz()
  eval((frobnitz) nil)
  eval-expression((frobnitz) nil)
  call-interactively(eval-expression nil nil) 
```

似乎这告诉我没有功能`buffer-menu-buffer`- 但这似乎也不太可能，因为`buffer-menu-buffer`是让缓冲区菜单工作的一个非常重要的功能！出于类似的原因，我非常警惕`buffer-menu-buffer`自己搞砸了——我不想破坏缓冲菜单。

请记住，答案可能是“调用您忽略的这个函数”，我怎样才能让这个 defun 完成其直接从缓冲区菜单恢复缓冲区的既定目的？

* * *

**更新：**正如回答者 Sean 指出的那样，我遇到困难的函数的正确名称是`Buffer-menu-buffer`首字母大写 B。解决了这个问题后，我遇到了另一个问题：

```
 (let (nil) (revert-buffer t t t) (message (concat "Reverted " buf-name "to last saved state.")))
  (save-current-buffer (set-buffer buf) (let (nil) (revert-buffer t t t) (message (concat "Reverted " buf-name "to last saved state."))))
  (with-current-buffer buf (let (nil) (revert-buffer t t t) (message (concat "Reverted " buf-name "to last saved state."))))
  (if (y-or-n-p (concat "Revert " buf-name " ?")) (with-current-buffer buf (let (nil) (revert-buffer t t t) (message (concat "Reverted " buf-name "to last saved state.")))))
  (let ((buf (Buffer-menu-buffer t)) (buf-name (concat "" (buffer-name (Buffer-menu-buffer t))))) (if (y-or-n-p (concat "Revert " buf-name " ?")) (with-current-buffer buf (let (nil) (revert-buffer t t t) (message (concat "Reverted " buf-name "to last saved state."))))))
  frobnitz()
  eval((frobnitz) nil)
  eval-expression((frobnitz) nil)
  call-interactively(eval-expression nil nil) 
```

我的猜测是，它`with-current-buffer`试图保存当前的缓冲区，这在`*Buffer List*`. 所以现在我正在寻找一个替代方案——也许只是切换、恢复和调用`(buffer-list)`以切换回来。

* * *

**更新 2：**

对于未来的读者：工作函数和一个单键绑定来调用它`buffer-menu-mode`：

```
;; Enhance the buffer menu's capabilities.
(defun revert-buffer-from-buffer-list ()
  "Call in buffer list to revert buffer at point to file.

Bind this to a key in `buffer-menu-mode' to use it there - not productive in
other modes because it depends on the `Buffer-menu-buffer' function. Undefined
behavior if you invoke it on a buffer not associated with a file: that's why it
has a confirmation gate. Buffers not associated with files get to play by their
own rules when it comes to `revert-buffer' (which see)."
  (interactive)
  (let (
        (buf (Buffer-menu-buffer t))
        (buf-name (concat "" (buffer-name(Buffer-menu-buffer t))))
        )
    (if (y-or-n-p (concat "Revert " buf-name " ?"))
        (with-current-buffer buf
          (let ()
            (revert-buffer t t t)
            (message (concat "Reverted " buf-name " to last saved state."))
            )))))
(add-hook 'Buffer-menu-mode-hook
          (lambda ()
            (define-key Buffer-menu-mode-map (kbd "R") revert-buffer-from-buffer-list)
            )) 
```

还提醒您注意：`add-hook`不是幂等的，因此，如果您将`foo-mode-hook`不打算添加或不起作用的东西添加到其中，则可能会损坏`foo-mode`，直到您`foo-mode-hook`将损坏的元素从中删除或删除为止。问我怎么知道的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T23:14:36.153

我的 Emacs 有一个函数`Buffer-menu-buffer`，但是没有`buffer-menu-buffer`。我想这就是让你绊倒的原因。

编辑：

我发现您的代码还有两个问题，之后我可以使用它从缓冲区菜单中恢复缓冲区。

*   我不得不换`(buf)`到`buf`两个地方。 `buf`是一个变量，而不是要调用的函数。
*   该`(let (()) ...)`构造导致错误。要么消除它，要么将其更改为`(let () ...)`（尽管我不知道您为什么要这样做）。

# c - 通过 C 程序管道日志输出，以便于日志轮换

> ID：11855402
> 
> 赞同：1
> 
> 时间：2012-08-07T23:11:41.103
> 
> 标签：c, bash, logrotate

我正试图让我的一些通过 bash 重定向记录的应用程序变得非常容易登录。基本上，我有一个将 STDIN 读入缓冲区的 C 程序。它读取此缓冲区，并且每当遇到换行符时，它将收集到的输出写入文件。

该程序的不同之处在于它不会使文件保持打开状态。*每次遇到新行时*，它都会打开它以进行追加。这与 logrotate 实用程序配合得*很好*，但我想知道是否存在某种可怕的不可预见的问题，我没有考虑到稍后会遇到的问题。

仅在此实用程序中实现信号处理并让 logrotate 向其发送 SIGHUP 会更好吗？我正在做的事情有可怕的性能损失吗？

所以通常你会在哪里做：

```
./app >> output.log 
```

使用记录器实用程序，您可以：

```
./app | ./mylogger output.log 
```

虽然我的 C 语言太差了，但我并不十分精通它的最佳实践。任何指导将不胜感激。

这是来源：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <errno.h>

#define BUFSIZE 1024
#define MAX_WRITE_FAILS 3

/**
 * outputs the given content to the specified file.
 */
int file_output(char *filename, char *content, size_t content_length)
{
    FILE *fp;
    fp  =   fopen(filename, "a");
    content[content_length + 1] =   '\0';
    if(fp == NULL) return errno;
    fwrite(content, sizeof(char), content_length, fp);
    fclose(fp);
    return 0;
}

/**
 * Loops over STDIN and whenever it finds a newline, sends the current content
 * buffer to the file specified on the command line.
 */
int main(int argc, char *argv[])
{
    int i;
    char buffer[BUFSIZE];
    char *content           =   malloc(sizeof(char) * BUFSIZE);
    size_t content_size     =   0;
    int content_buf_size    =   BUFSIZE;
    int write_failures      =   0;
    char *file;

    if(argc < 2)
    {
        fprintf(stderr, "Usage: logger <file>");
        exit(1);
    }
    file    =   argv[1];

    // loop over STDIN
    while(fgets(buffer, BUFSIZE, stdin))
    {
        int output_err;
        int buflength   =   strlen(buffer);

        // loop over character for character, searching for newlines and
        // appending our buffer to the output content as we go along
        for(i = 0; i < buflength; i++)
        {
            char *old   =   content;

            // check if we have a newline or end of string
            if(buffer[i] == '\n' || buffer[i] == '\0' || (i != (buflength - 1) && buffer[i] == '\r' && buffer[i+1] == '\n'))
            {
                content[content_size]   =   '\n';
                output_err  =   file_output(file, content, content_size + 1);
                if(output_err == 0)
                {
                    // success! reset the content size (ie more or less resets
                    // the output content string)
                    content_size    =   0;
                    write_failures  =   0;
                }
                else
                {
                    // write failed, try to keep going. this will preserve our
                    // newline so that the next newline we encounter will write
                    // both lines (this AND and the next).
                    content_size++;
                    write_failures++;
                }
            }

            if(write_failures >= MAX_WRITE_FAILS)
            {
                fprintf(stderr, "Failed to write output to file %d times (errno: %d). Quitting.\n", write_failures, output_err);
                exit(3);
            }

            if(buffer[i] != '\n' && buffer[i] != '\r' && buffer[i] != '\0')
            {
                // copy buffer into content (if it's not a newline/null)
                content[content_size]   =   buffer[i];
                content_size++;
            }

            // check if we're pushing the limits of our content buffer
            if(content_size >= content_buf_size - 1)
            {
                // we need to up the size of our output buffer
                content_buf_size    +=  BUFSIZE;
                content =   (char *)realloc(content, sizeof(char) * content_buf_size);
                if(content == NULL)
                {
                    fprintf(stderr, "Failed to reallocate buffer memory.\n");
                    free(old);
                    exit(2);
                }
            }
        }
    }
    return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:19:48.647

由于我在评论中的建议结果证明是您所需要的，因此我将其添加为答案，并提供更多解释。

当您的日志应用程序无法被告知关闭其日志文件（通常通过 SIGHUP）时，您可以在 logrotate.conf 中使用“copytruncate”选项。

以下是手册页中的描述：

> ```
>  Truncate  the  original log file in place after creating a copy,
>   instead of moving the old log file and optionally creating a new
>   one,  It  can be used when some program can not be told to close
>   its logfile and thus might continue writing (appending)  to  the
>   previous log file forever.  Note that there is a very small time
>   slice between copying the file and truncating it, so  some  log-
>   ging  data  might be lost.  When this option is used, the create
>   option will have no effect, as the old log file stays in  place. 
> ```

来源： http: [//linuxcommand.org/man_pages/logrotate8.html](http://linuxcommand.org/man_pages/logrotate8.html)

# c++ - 编译发布

> ID：11855403
> 
> 赞同：0
> 
> 时间：2012-08-07T23:11:43.107
> 
> 标签：c++, dll, compilation, release, sdl

我正在编写一个简单的 pong 应用程序，虽然它还没有完成，但我会撒谎以弄清楚如何编译它以供发布。我没有收到任何错误，并且我链接了 SDL、SDLmain、SDL_image、SDL_ttf，但是当其他计算机上的人尝试运行它（调试和发布）时，它会像丢失文件一样关闭。我把 SDL.dll、SDL_image.dll、SDL-ttf.dll 连同我在程序中使用的图像一起放在那里，它在我的电脑上运行良好，所以说我缺少一个文件......但是那会是什么？

编辑：

最后 30 分钟后我想通了：当包含 SDL_image.dll 时，你还必须包含 SDL_image.dll 的依赖项：zlib1.dll,libjjpeg-x.dll,libpng..etc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:57:46.997

解决此类问题（如果与 DLL 相关）的一个好方法是使用[Dependency Walker](http://www.dependencywalker.com/)。这将向您显示可执行文件的所有依赖项，以及依赖项的依赖项。

如果您在目标平台上运行它，它将突出显示需要但不可用的 DLL，从而更容易了解您的可执行文件无法运行的原因。

# bash - 为什么从我的脚本中删除所有 NUL？

> ID：11855406
> 
> 赞同：11
> 
> 时间：2012-08-07T23:12:04.880
> 
> 标签：bash, sh

似乎 bash 和 dash 从我的脚本中过滤掉任何 ASCII NUL。

```
$ printf 'test="\000a" ; echo ${#test}' | sh
1
$ printf 'test="\001a" ; echo ${#test}' | sh
2
$ printf 'ec\000ho test' | sh
test
$ # (Same for bash) 
```

虽然我同意使用 NUL 是一个坏主意（例如，传递给程序的参数适用于 NUL 终止的字符串），但我看不出[POSIX 标准](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html)在哪里认可这种行为。

当这种行为决定文件的语法正确性时，情况会变得更糟。

```
$ printf 'echo "\\\000"' | sh
sh: Syntax error: Unterminated quoted string
$ printf 'echo "\\\000"' | bash
bash: line 1: unexpected EOF while looking for matching `"'
bash: line 2: syntax error: unexpected end of file
$ printf 'echo "\\\134"' | sh
\ 
```

我错过了哪些重要部分，或者 NUL 删除只是关于如何应对未指定行为的决定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:09:20.993

[sh](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/sh.html)标准中的 INPUT FILES 部分指出：

**输入文件应为文本文件，但行长不受限制。如果输入文件为空或仅由空行或注释组成，或两者兼而有之，则 sh 将以零退出状态退出。**

术语“文本文件”在[此处](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_395)的第 3.395 节中定义为：

**包含组织成零行或多行的字符的文件。这些行不包含 NUL 字符，长度不能超过 {LINE_MAX} 个字节，包括 <newline> 字符。尽管 POSIX.1-2008 不区分文本文件和二进制文件（参见 ISO C 标准），但许多实用程序仅在对文本文件进行操作时产生可预测或有意义的输出。具有此类限制的标准实用程序始终在其 STDIN 或 INPUT FILES 部分中指定“文本文件”**

如果输入不是文本文件（如果它包含零字节则不是），则该行为既没有意义也无法预测。

# c++ - 在调试模式下销毁协议缓冲区消息几乎比在发布模式下慢 500 倍

> ID：11855409
> 
> 赞同：2
> 
> 时间：2012-08-07T23:12:49.507
> 
> 标签：c++, performance, destructor, protocol-buffers, debug-mode

在调用中使用以下代码和您自己的计时代码来删除 main() 中的 msg。在调试模式下运行时，平均花费的时间是不调试时的 473 倍。**有谁知道为什么会这样？如果是这样，有没有办法让这个代码在调试模式下运行得更快？**

注意：我在 Windows 7 机器上使用 Visual Studio 2008 SP 1。

```
// This file is generated by using the Google Protocol Buffers compiler
// to compile a PropMsg.proto file (contents of that file are listed below)
#include "PropMsg.pb.h"

void RawSerializer::serialize(int i_val, PropMsg * o_msg)
{
        o_msg->set_v_int32(i_val);
}
void serialize(std::vector<int> const & i_val, PropMsg * o_msg)
{
    for (std::vector<int>::const_iterator it = i_val.begin(); it != i_val.end(); ++it) {
        PropMsg * objMsg = o_msg->add_v_var_repeated();
        serialize( * it, objMsg);
    }
}

int main()
{
    std::vector<int> testVec(100000);
    PropMsg * msg = new PropMsg;
    serialize(testVec, msg);
    delete msg; // Time this guy
} 
```

PropMsg 是使用以下 .proto 文件定义创建的：

```
option optimize_for = SPEED;
message PropMsg
{
  optional int32 v_int32 = 7;
  repeated PropMsg v_var_repeated = 101;
} 
```

这是我得到的一些示例测试输出：

```
datatype: class std::vector<int,class std::allocator<int> >
                               num runs:                   10
                              num items:               100000
        deserializing from PropMsg time:               0.0046
            serializing to PropMsg time:               0.0426
                 reading from disk time:               0.7195
                   writing to disk time:               0.0298
              deallocating PropMsg time:                 8.99 
```

请注意这不是 IO 绑定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:33:19.417

VS Debug 中的 STL 容器是出了名的慢。游戏程序员论坛上充斥着对此的抱怨。人们经常选择替代实现。但是，根据我的阅读，您可以通过禁用迭代器调试/检查来预先提高性能：

```
#define _HAS_ITERATOR_DEBUGGING 0
#define _SECURE_SCL 0 
```

其他可能影响调试性能的事情是对 new 和 delete 的过多调用。内存池可以帮助解决这个问题。您尚未提供`PropMsg::add_v_var_repeated()`or的详细信息`PropMsg::~PropMsg()`，因此我无法发表评论。但我假设该类中有一个向量或其他 STL 容器？

# php - MYSQL/PHP 不会更新

> ID：11855410
> 
> 赞同：-1
> 
> 时间：2012-08-07T23:12:53.407
> 
> 标签：php, mysql

我有这段代码由于某种原因不起作用

```
 $con = mysql_connect("$server", "$user", "$pass");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }
    mysql_select_db('$db', $con); 

 // BLOCK 1   
    $supplier=$_POST["supplier"];
    $supplierNowBalance =$_POST["supplierNowBalance"];
    $supplierBalance=$supplierNowBalance - $supplier; 

    mysql_query("UPDATE inv SET balance='".$supplierBalance."' WHERE username='supplier' AND name='bingo'");

    echo $supplierBalance;

// END OF BLOCK 1 
```

UPDATE 语句之前和之后的所有内容都有效。我将更新语句复制到 PHPMyAdmin，它更新得很好！我不明白。由于某种原因 php 没有运行 mysql_query

一些提示：我在程序中几乎没有这个代码块，所以它会遍历所有的帖子和计算，以及更新我已经尝试了 mysql 查询的所有可能组合（有和没有 's ）

###############ANSWER_ ***_* __ *_* __ *_* __**

感谢您的回答，但我想通了。显然 PHP 迫切希望在连接字符串周围有双引号 ""。在第 6 行，当我描述数据库变量时

```
mysql_select_db('$db', $con); 
```

我有单 qoute，我将其更改为双 qoute 和 bam，它有效，谢谢

```
 mysql_select_db("$db", $con); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:17:11.973

`balance`是`numeric`吗？你不应该用单引号括起来。

```
mysql_query("UPDATE inv SET balance= " . $supplierBalance . " WHERE username='supplier' AND name='bingo'"); 
```

使用**[PDO](http://php.net/manual/en/book.pdo.php)**使其无懈可击`SQL INJECTION`

```
<?php

// other codes

$stmt = $dbh->prepare("UPDATE inv SET balance = ? WHERE username = ? AND name = ?");
$stmt->bindParam(1, $supplierBalance);
$stmt->bindParam(2, 'supplier');
$stmt->bindParam(3, 'bingo');

$stmt->execute();

// other codes
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:29:40.867

感谢您的回答，但我想通了。显然 PHP 迫切希望在连接字符串周围有双引号 ""。在第 6 行，当我描述数据库变量时

```
mysql_select_db('$db', $con); 
```

我有单 qoute，我将其更改为双 qoute 和 bam，它有效，谢谢

```
 mysql_select_db("$db", $con); 
```

# .net - 强命名嵌入式资源

> ID：11855412
> 
> 赞同：0
> 
> 时间：2012-08-07T23:13:08.727
> 
> 标签：.net, visual-studio-2010, msbuild, compilation, embedded-resource

我希望能够`Build Action`通过强名称引用在 Visual Studio 2010 中文件的属性中指定为“嵌入式资源”的文件，而不必使用`string`s 来引用它们。

我使用`Assembly.GetManifestResourceStream()`which 可以采用 a`string`或 a`Type`和 a`string`作为参数，但我经常发现这些名称在重构时会发生变化，我希望能够在构建时捕捉到这一点。

显然我可以编写单元测试，以便在测试期间涵盖这一点，但我想在构建时抓住它。其他人做什么？

TIA

# java - 如何让计时器在后台运行

> ID：11855415
> 
> 赞同：1
> 
> 时间：2012-08-07T23:13:16.597
> 
> 标签：java, android, timer

当应用程序停止时，我将如何有效地让计时器在后台运行？现在仪式我没有做任何事情，当应用程序停止时计时器将继续运行，但有时它会在没有我给它命令的情况下停止运行。这就是我目前运行计时器的方式：

```
 if(t == null){
   t = new Timer();
    t.schedule(new TimerTask() {

        @Override
        public void run() {
            runOnUiThread(new Runnable() {

                public void run() {
                    if(DHPDPS==0){
                        money = (DPPS+Reserve);
                        Reserve = (money);
                        String end = String.format("%1f", money);
                        t1.setText("$" + end);
                    }else if(counter > DHPDPS && DOTPPS != 0 && DHPDPS != 0){
                        money = (DOTPPS+Reserve);
                        Reserve = (money);
                        String end = String.format("%1f", money);
                        t1.setText("$" + end);
                    } else{

                        money = (DPPS+Reserve);
                        Reserve = (money);
                        String end = String.format("%1f", money);
                        t1.setText("$" + end);
                    }
                    counter++;
                    //if(counter == 3000)
                    //   t.cancel();

                    // Display pay per second
                    if(counter <= DHPDPS || DHPDPS == 0){
                    t2.setText("Your pay per second is: $"+result);
                    }else{
                        t2.setText("Your pay per second is: $"+result2);
                    }
                }
            }); 
        }
    }, 20, 20); 
```

它在 onCreate() 中声明，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:17:17.953

对于在后台运行的任务，您应该使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。即使您的活动被操作系统暂停或删除，它也会继续运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:20:18.333

如果您的手机内存开始填满，它将关闭所有未主动使用的活动。

对于像计时器这样的东西，最好将开始时间保存到 SQLite 中，并在重新加载活动时将其作为计算持续时间的起点。

否则，如果您的意图是计时器不断滴答作响，则将其转换为意图服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-03T06:12:11.483

```
 private fun startTimer() 
       var lastdata = PrefUtils.getpunchtime(this)
       var mEndTimediff = System.currentTimeMillis() - lastdata!!
       var mTimeLeftInMillis = viewModel.START_TIME_IN_MILLIS.toLong() - mEndTimediff

       viewModel.mCountDownTimer = object : CountDownTimer(mTimeLeftInMillis, 1000) {
           override fun onTick(millisUntilFinished: Long) {
               mTimeLeftInMillis = millisUntilFinished
               updateCountDownText(mTimeLeftInMillis)
           }

           override fun onFinish() {
               viewModel.mTimerRunning = false
           }
       }.start()

   }

   private fun updateCountDownText(mTimeLeftInMillis: Long) {

       val millis: Long = mTimeLeftInMillis
       val hms = String.format(
           "%02d : %02d: %02d", TimeUnit.MILLISECONDS.toHours(millis),
           TimeUnit.MILLISECONDS.toMinutes(millis) - TimeUnit.HOURS.toMinutes(
               TimeUnit.MILLISECONDS.toHours(
                   millis
               )
           ),
           TimeUnit.MILLISECONDS.toSeconds(millis) - TimeUnit.MINUTES.toSeconds(
               TimeUnit.MILLISECONDS.toMinutes(
                   millis
               )
           )
       )

       binding.tvTimertime.setText(hms)
   }

SharePreference in store Last_time

       fun storepunchtime(context: Context, storepunchtime: Long) {
           val editor = getSharedPreferences(context).edit()
           editor.putLong(PUNCH_TIME, storepunchtime)
           editor.apply()
           editor.commit()
       }
       fun getpunchtime(context: Context): Long? {
           return getSharedPreferences(context).getLong(PUNCH_TIME, 0L)
       } 
```

# javascript - 通过 JavaScript 解析 t.co url

> ID：11855417
> 
> 赞同：0
> 
> 时间：2012-08-07T23:13:37.307
> 
> 标签：javascript, jquery, twitter, short-url

我正在通过 Twitter Anywhere API 检索推文。我想以不同的方式处理纯文本推文和包含图片的推文。
我可以通过过滤`pic.twitter.com`网址来做到这一点。不幸的是，API 提供了短网址 ala `t.co`。

有没有办法通过 Javascript (jQuery) 解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:27:43.587

[由于Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，您将无法使用 AJAX 解析 t.co URL 。基本上，您只允许向托管您的页面的服务器发出请求。

然而，Twitter 有一个非常丰富的 API，并且包含关于每条推文中元素的非常详细的元数据。您应该阅读[推文实体](https://dev.twitter.com/docs/tweet-entities)文档。这些字段出现在[REST API](https://dev.twitter.com/docs/api)的 JSON 文档中。

# python - 在运行时将参数传递给装饰器

> ID：11855418
> 
> 赞同：10
> 
> 时间：2012-08-07T23:13:47.313
> 
> 标签：python

如果我像这样创建一个 python 装饰器函数

```
def retry_until_true(tries, delay=60):
    """
    Decorator to rety a function or method until it returns True.
    """
    def deco_retry(f):
        def f_retry(*args, **kwargs):
            mtries  = tries
            rv = f(*args, **kwargs)
            while mtries > 0:
                if rv is True:
                    return True
                mtries -= 1
                time.sleep(delay)
                rv = f(*args, **kwargs)
            return False
        return f_retry
    return deco_retry 
```

我可以这样使用

```
 @retry_until_true(20, delay=30)
    def check_something_function(x, y):
        ...
        return True 
```

但是有没有办法在运行时将“尝试”和“延迟”的不同值传递给装饰器，以便 20 和 30 是变量？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T23:36:23.617

你可以使用一个类作为装饰器，实例变量为`tries`and `delay`：

```
class RetryUntilTrue(object):
    def __init__(self, f=None, tries=10, delay=30):
        self.f = f
        self.tries = tries
        self.delay = delay

    def __call__(self, *args, **kwargs):
        if self.f is None:
            self.f = args[0]
        else:
            tries = self.tries
            while tries:
                if self.f(*args, **kwargs):
                    return True

                tries -= 1
                time.sleep(self.delay) 
```

用法：

```
@RetryUntilTrue
def foo(x):
    pass

foo.tries = 20
foo.delay = 1

@RetryUntilTrue(tries=100, delay=9999)
def bar(x):
    pass

bar.tries -= 1
bar.delay = foo.delay 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-07T23:42:29.737

当然可以，只需将函数定义嵌套在另一个函数中，例如：

```
def explicit_setup_func(tries, delay=60):
    @retry_until_true(tries, delay)
    def check_something_function(x, y):
        # Code 
```

但是，类装饰器解决方案更实用。

# javascript - 如何在生产环境中动态加载多个优化的 requirejs 模块？

> ID：11855422
> 
> 赞同：7
> 
> 时间：2012-08-07T23:14:04.033
> 
> 标签：javascript, requirejs, js-amd

我已经开始在一个虚拟项目上使用 require js。我现在想使用 r.js 脚本来构建我的生产项目。

上下文是这样的：

*   名为 start.js 的主文件是：

    ```
    require([/* some stuff */], function (){ /* app logic */ }); 
    ```

    其中有一个 if 决定我应该根据某些条件需要什么。

*   所需文件是 ModuleA 或 ModuleB

*   ModuleA 和 ModuleB 都有依赖关系。

    ```
    define([/*some deps*/], function(dep1, dep2...) { 
        /* app logic */ 
        return { /* interface */
    } 
    ```

*   在优化和模块连接之前，在开发模式下一切正常。

*   使用 r.js 构建时，我将以下内容指定为模块目标：模块：[{name：“start”}，{name：“ModuleA”}，{name：“ModuleB”}]

问题是我的 ModuleA 变成：

```
 define(dep1 ..);
 define(dep2 ..);
 define(ModuleA ..); 
```

但是没有从 ModuleA 加载。开发中来自ModeulA的代码加载并执行，构建后的代码加载但不运行。

我该如何解决这个问题？

**更新**

[http://pastebin.com/p1xUcY0A](http://pastebin.com/p1xUcY0A) --> start.js

[http://pastebin.com/dXa6PtpX](http://pastebin.com/dXa6PtpX) --> ModuleA js-animation.js

[http://pastebin.com/xcCvhLrT](http://pastebin.com/xcCvhLrT) --> ModuleB css-animation.js 无依赖。

[http://pastebin.com/j51V5kMt](http://pastebin.com/j51V5kMt) --> 运行优化器时使用的 r.js 配置文件。

[http://pastebin.com/UVkWjwe9](http://pastebin.com/UVkWjwe9) --> 运行 r.js 后 js-animation.js 的外观。这是有问题的文件。我没有从这个文件中得到 js-animation 模块。require 不会返回我的 js-animation 对象。

编辑：

删除模块定义末尾的 .js 和 from start js 后，优化后的 start.js 为[http://pastebin.com/LfaLkJaT](http://pastebin.com/LfaLkJaT)，js-animations 模块为[http://pastebin.com/qwnpkCC6](http://pastebin.com/qwnpkCC6)。在 chrome 中，我在控制台中收到此错误[http://pastebin.com/Hq7HGcmm](http://pastebin.com/Hq7HGcmm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:59:50.513

我相信您的设置问题在于您将模块依赖项名称以`.js`. 根据文档：

> 默认情况下，RequireJS 还假定所有依赖项都是脚本，因此它不希望在模块 ID 上看到尾随的“.js”后缀。RequireJS 在将模块 ID 转换为路径时会自动添加它。

如果 RequireJS 看到一个以它结尾的模块名称，`.js`它假定模块名称是相对于文档的路径。通过在其中结束您的模块依赖项名称，`.js`它在开发模式下可以正常工作，因为 RequireJS 将去加载指定为依赖项的文件。在您的情况下，它将加载文件`js/js-animation.js`，查看匿名`define`并正确加载模块。

在生产中，您的`start.js`模块仍然需要`"js/js-animation.js"`. RequireJS 将在路径中加载您的优化模块，`js/js-animation.js`但现在优化器已将您的匿名模块转换为命名模块（在本例中`"js/js-animation"`）。结果是文件将被加载，但文件中没有`define`'d 模块具有匹配的名称，`"js/js-animation.js"`因此在某种意义上您的动画模块丢失了。

**解决方案 / TL;DR：**从所有模块依赖项名称（以及 r.js 配置中的模块定义）中删除尾随`.js`，你应该没问题。所以你`start.js`应该变成（第4行的变化）：

```
require([], function () {
  var $html = $("html"),
    animationModule = localStorage['cssanimations'] == 'true' ? 
    'js/css-animation' : 'js/js-animation',
    $doc = $html.find("body");

  console.debug("loading ", animationModule);
  require([animationModule], function( animationModule ) {
    animationModule.run({
      target : $("div.flex")
    });
  } );
} ); 
```

另请注意，您可能希望在 RequireJS 配置中使用`baseUrl`and`paths`来清理模块名称（例如，您可以删除`js/`前缀）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:57:52.970

这似乎与当前的 require.js 实现有问题。绕过它的方法是创建一个全局中介或中介模块，并让所有动态加载的模块调用中介并通过事件宣布自己。这对我有用。

# c# - Python 到 C# 端口后的错误计算

> ID：11855423
> 
> 赞同：2
> 
> 时间：2012-08-07T23:14:14.177
> 
> 标签：c#, python, math, time, port

我正在研究基于 Reddit 模型的帖子系统的时间衰减算法：http: [//amix.dk/blog/post/19588](http://amix.dk/blog/post/19588)

我的工作端口在这里：

```
public class Calculation
{
    protected DateTime Epoch = new DateTime(1970, 1, 1);

    protected long EpochSeconds(DateTime dt)
    {
        var ts = dt.Subtract(Convert.ToDateTime("1/1/1970 8:00:00 AM"));

        return ((((((ts.Days * 24) + ts.Hours) * 60) + ts.Minutes) * 60) + ts.Seconds);
    }

    protected int Score(int upVotes, int downVotes)
    {
        return upVotes - downVotes;
    }

    public double HotScore(int upVotes, int downVotes, DateTime date)
    {
        var s = Score(upVotes, downVotes);
        var order = Math.Log(Math.Max(Math.Abs(s), 1), 10);
        var sign = Math.Sign(s);
        var seconds = EpochSeconds(date) - 1134028003;
        return Math.Round(order + sign * ((double)seconds / 45000), 7);
    }
} 
```

根据提供的链接的模型输出，我应该会在 0-13 小时看到逐渐衰减，然后急剧衰减。

我看到的是非常均匀的衰减，并且得分远高于原始代码的输出（原始代码：3480-3471）。

这是我的测试方式：

```
 Calculation c = new Calculation();
        double now = c.HotScore(100, 2, DateTime.Now);
        double fivehoursago = c.HotScore(100, 2, DateTime.Now.AddHours(-5));
        double tenhoursago = c.HotScore(100, 2, DateTime.Now.AddHours(-10));
        double elevenhoursago = c.HotScore(100, 2, DateTime.Now.AddHours(-11));
        double twelvehoursago = c.HotScore(100, 2, DateTime.Now.AddHours(-12));
        double thirteenhoursago = c.HotScore(100, 2, DateTime.Now.AddHours(-13));
        double fiftyhoursago = c.HotScore(100, 2, DateTime.Now.AddHours(-50));
        double onehundredhoursago = c.HotScore(100, 2, DateTime.Now.AddHours(-100));
        Console.WriteLine(now.ToString());
        Console.WriteLine(fivehoursago.ToString());
        Console.WriteLine(tenhoursago.ToString());
        Console.WriteLine(elevenhoursago.ToString());
        Console.WriteLine(twelvehoursago.ToString());
        Console.WriteLine(thirteenhoursago.ToString());
        Console.WriteLine(fiftyhoursago.ToString());
        Console.WriteLine(onehundredhoursago.ToString());
        Console.ReadLine(); 
```

输出值：

```
now:               4675.2993816
five hours:        4674.8993816
ten hours:         4674.4993816
eleven hours:      4674.4193816
twelve hours:      4674.3393816
thirteen hours:    4674.2593816
fifty hours:       4671.2993816
one-hundred hours: 4667.2993816 
```

显然，它的工作正常，但有些不对劲。这可能与缺乏真正的 *nix Epoch 支持或缺乏类似的微秒计算有关，但有些地方不太对劲。

可能的参考资源：http: [//blogs.msdn.com/b/brada/archive/2004/03/20/93332.aspx](http://blogs.msdn.com/b/brada/archive/2004/03/20/93332.aspx) http://codeclimber.net.nz/archive/2007/07/10/convert-a -unix-timestamp-to-a-.net-datetime.aspx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:29:56.790

您的主要问题是热算法是时间相关的。您计算的热门分数是`DateTime.Now`，而文章写于 2010 年 11 月 23 日（请看文章底部）。

经过反复试验，数据似乎是在大约 2010-11-23 07:35 计算的。尝试使用该值而不是`DateTime.Now`，您应该得到与图中所示数据大致相同的结果。

请注意，您可以对代码进行以下改进：

```
public class Calculation
{
    private static readonly DateTime Epoch = new DateTime(1970, 1, 1);

    private double EpochSeconds(DateTime dt)
    {
        return (dt - Epoch).TotalSeconds;
    }

    private int Score(int upVotes, int downVotes)
    {
        return upVotes - downVotes;
    }

    public double HotScore(int upVotes, int downVotes, DateTime date)
    {
        int s = Score(upVotes, downVotes);
        double order = Math.Log(Math.Max(Math.Abs(s), 1), 10);
        int sign = Math.Sign(s);
        double seconds = EpochSeconds(date) - 1134028003;
        return Math.Round(order + sign * seconds / 45000, 7);
    }
} 
```

我的结果：

```
3479.0956039
3478.6956039
3478.2956039
3478.2156039
3478.1356039
3478.0556039
3475.0956039
3471.0956039 
```

变化：

*   使用声明的 Epoch 而不是 1970-01-01 08:00:00 的转换（我认为 08:00 是一个错误）。
*   `a - b`您可以使用;减去两个日期 这与原始 Python 代码相同`a.Subtract(b)`但更简洁。
*   时间跨度*确实*为您提供微秒精度（刻度是最小单位，等于 100 纳秒）。
*   此外，TotalSeconds 为您提供时间跨度内的总秒数；无需重新计算。小数部分甚至可以为您提供微秒精度。
*   通过从 EpochSeconds 返回 double，您可以保持此精度。
*   使数据类型显式而不是`var`清楚地指示什么变量是什么（它们与方法签名匹配，因此没有隐式向上转换）。
*   将不需要`protected`的`private`更改`Epoch`为常量。

# nosql - memcached 在哪里花费时间？

> ID：11855425
> 
> 赞同：0
> 
> 时间：2012-08-07T23:14:26.603
> 
> 标签：nosql, memcached, libmemcached

我正在 Linux (x86-64) 上使用 memcached 进行一些实验。我正在使用 memslap 实用程序生成对 memcached 服务器的查询。我注意到 memcached 大部分时间都花在了系统（即操作系统功能）上。我想知道是否有人对 memcached 大量使用操作系统的哪些功能有一些见解，因此大部分时间都花在它上面。

谢谢

阿尔卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:43:14.137

Memcached 只有在守护进程之外的主要操作系统功能与[libevent](http://libevent.org/)相关。我相信 memcached & libmemcached 是用 OS 的共享 libevent 库编译的，那个*时候*会泛化为一个 OS 函数。

# nuget - lib 文件夹外的 NuGet 程序集

> ID：11855428
> 
> 赞同：57
> 
> 时间：2012-08-07T23:14:37.803
> 
> 标签：nuget, nuget-package

我将在这里提出几个问题......首先，使用 NuGet 是否可以从几个 DLL 创建一个包？没有 Visual Studio 项目，只有命令行和几个预编译的 DLL 文件。

其次，假设这是可能的，为什么我不断收到“在 lib 文件夹之外的程序集”警告？我已经尝试了所有我能想到的方法来获取关联的程序集，以将它们自己添加为 NuGet 包中的引用。

我的文件结构看起来像这样

```
 Root
   - File1.dll
   - lib
     - File2.dll
     - File3.dll 
```

当我告诉 NuGet 使用这样的 .nuspec 打包它时

```
<?xml version="1.0"?>
<package >
  <metadata>
    <id>File1.dll</id>
    <version>1.0.0</version>
    <authors>thisguy</authors>
    <owners>thisguysmom</owners>
    <requireLicenseAcceptance>false</requireLicenseAcceptance>
    <description>This is some library</description>
    <releaseNotes>Porting to NuGet</releaseNotes>
    <copyright>Copyright 2012</copyright>
    <references>
      <reference file="File2.dll" />      
      <reference file="File3.dll" />
    </references>
  </metadata>
</package> 
```

我收到了那个警告。从我正在阅读的内容来看，我什至不必在我的任何项目中定义引用节点，因为 lib 文件夹项应该自动添加为引用？

有没有人了解这个 NuGet 混乱？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-01-14T18:51:44.540

我刚刚遇到了这个问题。Nuget 期望的结构如下所示：

```
root
  - lib
    - net40
      - File1.dll
      - File2.dll
      - File3.dll 
```

net40 或 net20 或 net45 适合您的 .net 版本。

跑

```
nuget pack yourlibrary.nuspec 
```

把它打包。

这将打包目录批发并将其放入 nupkg。错误消息将在此时消失。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-07T23:52:11.490

您要引用的任何 dll 都应位于 lib 文件夹下。该警告是因为 file1.dll 在 lib 之外，并且在安装包期间将被忽略。（其他特殊文件夹是“内容”和“工具”）

我用过这个结构：

```
Root
  - lib
    - File1.dll
    - File2.dll
    - File3.dll 
```

有关其他详细信息，请参阅：[http](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Package_Conventions) ://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Package_Conventions 。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-05-19T19:38:24.267

使用截至本文时最新的 NuGet 版本（我假设也有更高版本），您可以使用 .csproj 文件与 .nuspec 文件一起创建包。我们所做的是制作一个 .nuspec 文件（使用 nuget 规范然后对其进行自定义）并将其包含在项目中。

使用自定义的 .nuspec 文件，我们使用以下命令：

```
nuget pack sample.csproj -IncludeReferencedProjects 
```

那时它构建了 .nupkg 并且没有发出问题。.nu​​pkg 文件显示在正常的输出文件夹中（在我的默认情况下，bin\debug）。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-11-05T05:54:01.540

您可以通过在 nuspec 文件中添加下面的内部标记来添加对另一个 dll 的引用

```
<package>
   <metadata>
      ...
</metadata>
<files>
 <file src="..\ReferencedFolder\*.*" target="lib\net40\" />
</files>
</package> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-14T19:11:37.473

Alexandre 指的是创建 NuGet 包时创建的“lib”文件夹。您可以像打开任何 zip 文件一样打开 .nupkg。在那里，您将看到一个 lib\netXX 文件夹，其中 XX 是您所针对的 .NET 框架的版本。因此，当您打包 NuGet 文件时，请确保 File1.dll 位于 lib 文件夹中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-16T14:40:48.353

我使用了 Von Lemongargle 教授的解决方案，对我来说这是一个很好的解决方案。重要的：

1.  在项目中包含规范文件（右键单击-> 包含在项目中）
2.  给你的项目的规范文件相同的文件名（myproject.csproj，myproject.nuspec）

这在 Visual Studio 2012 中完美运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-02T16:16:26.640

它们通过包含在 .NET 中的 bin\debug 或 bin\release 文件夹中而进入“lib”文件夹。因此，您需要编译项目以在外部 DLL 上复制本地文件，以便在编译时将它们包含在 bin 文件夹中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-21T13:59:34.490

如果依赖项或库已更改，旧文件会影响打包操作。

1.  从项目中删除`obj`和文件夹。`bin`
2.  跑`dotnet restore`
3.  运行`nuget pack yournuspecfile.nuspec -properties Configuration=Release -IncludeReferencedProjects`或您的命令。

# jquery - 在jquery中将身体的一部分移动到iframe中

> ID：11855430
> 
> 赞同：0
> 
> 时间：2012-08-07T23:14:49.500
> 
> 标签：jquery

更新：我的目的似乎不需要 iframe。似乎[jQuery/JavaScript：访问 iframe 的内容也](https://stackoverflow.com/questions/364952/jquery-javascript-accessing-contents-of-an-iframe)回答了我的问题。

我已经对此尝试了几种变体，但它拒绝做任何事情。有时我得到一个空的 iframe，有时我什么也得不到。

我有一个 id 为“contents”的元素，它是 body 的直接子元素。我希望在正文中创建一个新的 iframe，并将“内容”及其所有子项移动到 iframe 中，同时在上下文中保留 dom 层次结构。

我目前的尝试是：

```
frame = $("<iframe frameborder=\"1\" height=\"100%\">");
        frame.appendTo("body");
        $("#contents").detach().prependTo($("body", frame)); 
```

但这只是将“内容”抹去。在没有“分离”的情况下进行操作会使“内容”保持不变。从 prependTo 中删除“正文”选择器会再次删除“内容”，而不会出现在 iframe 中。

编辑：似乎有些东西根本上是错误的，如下所示的更简单的代码也失败了：

```
frame = $("<iframe frameborder=\"1\" height=\"100%\">");
        frame.appendTo("body");
$("<b>text</b>").appendTo(frame); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:36:53.967

您需要访问 iframe 的内容而不是 iframe 本身。所以类似于以下内容：

```
frame.contents().find('html body').html("<b>text</b>") 
```

这会将 HTML 注入 iframe 的主体。

[http://api.jquery.com/contents/](http://api.jquery.com/contents/)

# python - Django：即使在调用 .is_valid 后也无法访问 clean_data

> ID：11855431
> 
> 赞同：0
> 
> 时间：2012-08-07T23:14:56.603
> 
> 标签：python, django

我开始尝试清理我的一些代码，并且在测试时，我一直遇到这个错误：`'log_in' object has no attribute 'cleaned_data'`作为背景知识，代码检查两个表单中的哪一个被提交（`log_in_is_new_form()`），然后通过一些验证，例如检查它是某个主机的电子邮件地址。它返回 html 对象，这些对象向调用页面的 javascript 指示要做什么（例如显示其他表单或显示错误）。这是一个没有 JSON 的非常简单的 ajax，因为该站点非常小且流量非常低（每天最多 100 个用户。这不太可能）

```
def log_in_pass_match(form):
    cleaned = form.cleaned_data
    if cleaned['password'] == cleaned['password2']:
        return true
    else:
        return false

def log_in_is_bbn(form):
    email_bbn = form.cleaned_data['username'].split("@")
    if 'bbns.org' in email_bbn:
        return True
    else:
        return False

def log_in_is_new_form( post):
    if "TN" in post:
        return True
    else:
        return False

def log_in_already_user(form):
    form.is_valid
    user_object = User.objects.filter(email = form.cleaned_data['username'])
    if user_object.exists():
        return True
    else:
        return False

def log_in_send_act(form):
    cleaned = form.cleaned_data['username']
    msg = "sfsd"
    send_mail('Activate', msg, 'michaelrgoldfine@gmail.com', [cleaned['username']], fail_silently=False)
    new_user_object = User.objects.create_user(
        username=cleaned_info_new['username'],
        password=cleaned_info_new['password'],
        email=cleaned_info_new['username']
    )

def user_log_in(request):
    error = []
    form = log_in(request.POST)
    if not log_in_already_user(form):
        form = new_user(request.POST)
        if log_in_is_new_form():
            form_is_valid = True
            other_is_valid = True
            if form.is_valid():
                if log_in_is_bbn(form = form) and log_in_pass_match(form = form):
                    other_is_valid = True
                else:
                    other_is_valid = False
            else:
                form_is_valid = False

            if form_is_valid and other_is_valid:
                msg = "In order to activate your account at Knights of the Round Table, please click on this link:"
                try:
                    user_object = User.objects.create_user(
                        username=cleaned_info_new['username'],
                        password=cleaned_info_new['password'],
                        email=cleaned_info_new['username']
                    )
                    log_in_send_act(form = form)
                    new_user_profile = user_object.get_profile()
                    new_user_profile.pen_name = form.cleaned_data['pen_name']
                    new_user_profile.activated = False;
                    new_user_profile.save()
                    return HttpResponse("not_act")
                except:
                    error.append("Error Sending Email")
            else:
                if not other_is_valid and log_in_is_new_form(request.POST):
                    if log_in_is_bbn(form = form):
                        error.append('BBN email addresses only: [first initial][last name]@bbns.org.')
                    if log_in_pass_match(form = form):
                        error.append('Passwords do not match')
                for n in form._errors:
                    for e in form._errors[n]:
                        error.append(e)
        else:
            return HttpResponse("n_usr")
    else:
        if form.is_valid():
            if log_in_already_user():
                logged_in_user = auth.authenticate(username=form.cleaned_data['username'], password=form.cleaned_data['password'])
                if loged_in_user is not None:
                    if user_object[0].get_profile().activated:
                        auth.login(request, logged_in_user)
                        return HttpResponseRedirect("")
                    else:
                        return HttpResponse("not_act")
                else:
                    error.append('Password Incorrect')
    errors_template = Template("{% for e in errors %}<li>{{ e }}</li> {% endfor %}")
    errors_html = errors_template.render(Context({'errors':error}))
    return HttpResponse(errors_html) 
```

完整错误：

```
AttributeError at /ajax/login
'log_in' object has no attribute 'cleaned_data'

Request Method: POST
Request URL: http://127.0.0.1:8000/ajax/login
Django Version: 1.4
Python Executable: /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python
Python Version: 2.7.3
Python Path: ['/Users/Mike/Desktop/Main/Django-Development/BBN', '/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages', '/Library/Python/2.7/site-packages']
Server time: Tue, 7 Aug 2012 19:11:39 -0400
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'Knights',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/Mike/Desktop/Main/Django-Development/BBN/Knights/views.py" in user_log_in
  68\.     if not log_in_already_user(form):
File "/Users/Mike/Desktop/Main/Django-Development/BBN/Knights/views.py" in log_in_already_user
  48\.     user_object = User.objects.filter(email = form.cleaned_data['username'])

Exception Type: AttributeError at /ajax/login
Exception Value: 'log_in' object has no attribute 'cleaned_data'
Request information:
GET: No GET data

POST:
username = u''
password = u'Password'

FILES: No FILES data

COOKIES:
csrftoken = 'Df1jB3708JUgretV8PSmRQ6NFQGI3wzL'
sessionid = 'c5eab78e2c73ff493056044d4e4362ba'

META:
RUN_MAIN = 'true'
HTTP_REFERER = 'http://127.0.0.1:8000/login/'
SERVER_PROTOCOL = 'HTTP/1.1'
SERVER_SOFTWARE = 'WSGIServer/0.1 Python/2.7.3'
TERM_PROGRAM_VERSION = '309'
REQUEST_METHOD = 'POST'
LOGNAME = 'Mike'
USER = 'Mike'
HTTP_ORIGIN = 'http://127.0.0.1:8000'
PATH = '/Library/Frameworks/Python.framework/Versions/3.2/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin'
QUERY_STRING = ''
HOME = '/Users/Mike'
wsgi.errors = <open file '<stderr>', mode 'w' at 0x100284270>
TERM_PROGRAM = 'Apple_Terminal'
LANG = 'en_US.UTF-8'
HTTP_ACCEPT_CHARSET = 'ISO-8859-1,utf-8;q=0.7,*;q=0.3'
TERM = 'xterm-256color'
SHELL = '/bin/bash'
TZ = 'America/New_York'
HTTP_COOKIE = 'csrftoken=Df1jB3708JUgretV8PSmRQ6NFQGI3wzL; sessionid=c5eab78e2c73ff493056044d4e4362ba'
SERVER_NAME = '1.0.0.127.in-addr.arpa'
REMOTE_ADDR = '127.0.0.1'
SHLVL = '1'
wsgi.url_scheme = 'http'
_ = '/Library/Frameworks/Python.framework/Versions/2.7/bin/python'
SERVER_PORT = '8000'
PATH_INFO = u'/ajax/login'
CONTENT_LENGTH = '27'
TERM_SESSION_ID = '37C63610-0B15-480A-A5C3-1619ECABE279'
HTTP_X_REQUESTED_WITH = 'XMLHttpRequest'
SSH_AUTH_SOCK = '/tmp/launch-elZmdg/Listeners'
wsgi.input = <socket._fileobject object at 0x101bd6550>
Apple_PubSub_Socket_Render = '/tmp/launch-nMejuv/Render'
HTTP_HOST = '127.0.0.1:8000'
SCRIPT_NAME = u''
wsgi.multithread = True
HTTP_CONNECTION = 'keep-alive'
TMPDIR = '/var/folders/98/m4rlvgtx0d19gbmh824m8jt80000gn/T/'
HTTP_ACCEPT = '*/*'
wsgi.version = 
HTTP_USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_0) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.57 Safari/537.1'
GATEWAY_INTERFACE = 'CGI/1.1'
wsgi.run_once = False
OLDPWD = '/Users/Mike'
wsgi.multiprocess = False
HTTP_ACCEPT_LANGUAGE = 'en-US,en;q=0.8'
__CF_USER_TEXT_ENCODING = '0x1F5:0:0'
Apple_Ubiquity_Message = '/tmp/launch-8Ck6J2/Apple_Ubiquity_Message'
PWD = '/Users/Mike/Desktop/Main/Django-Development/BBN'
DJANGO_SETTINGS_MODULE = 'BBN.settings'
CONTENT_TYPE = 'application/x-www-form-urlencoded; charset=UTF-8'
wsgi.file_wrapper = ''
REMOTE_HOST = ''
HTTP_ACCEPT_ENCODING = 'gzip,deflate,sdch'
COMMAND_MODE = 'unix2003'

Settings:
Using settings module BBN.settings
USE_L10N = True
USE_THOUSAND_SEPARATOR = False
CSRF_COOKIE_SECURE = False
LANGUAGE_CODE = 'en-us'
ROOT_URLCONF = 'BBN.urls'
MANAGERS = 
DEFAULT_CHARSET = 'utf-8'
STATIC_ROOT = ''
MESSAGE_STORAGE = 'django.contrib.messages.storage.fallback.FallbackStorage'
EMAIL_SUBJECT_PREFIX = '[Django] '
FILE_UPLOAD_PERMISSIONS = None
URL_VALIDATOR_USER_AGENT = 'Django/1.4 (https://www.djangoproject.com)'
STATICFILES_FINDERS = 
SESSION_COOKIE_DOMAIN = None
SESSION_COOKIE_NAME = 'sessionid'
ADMIN_FOR = 
TIME_INPUT_FORMATS = 
DATABASES = {'default': {'ENGINE': 'django.db.backends.sqlite3', 'TEST_MIRROR': None, 'NAME': 'database', 'TEST_CHARSET': None, 'TIME_ZONE': 'UTC', 'TEST_COLLATION': None, 'PORT': '', 'HOST': '', 'USER': '', 'TEST_NAME': None, 'PASSWORD': u'********************', 'OPTIONS': {}}}
SERVER_EMAIL = 'root@localhost'
FILE_UPLOAD_HANDLERS = 
DEFAULT_CONTENT_TYPE = 'text/html'
APPEND_SLASH = True
FIRST_DAY_OF_WEEK = 0
DATABASE_ROUTERS = []
YEAR_MONTH_FORMAT = 'F Y'
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'
CACHES = {'default': {'LOCATION': '', 'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}}
SESSION_COOKIE_PATH = '/'
USE_X_FORWARDED_HOST = False
MIDDLEWARE_CLASSES = 
USE_I18N = True
THOUSAND_SEPARATOR = ','
SECRET_KEY = u'********************'
LANGUAGE_COOKIE_NAME = 'django_language'
DEFAULT_INDEX_TABLESPACE = ''
TRANSACTIONS_MANAGED = False
LOGGING_CONFIG = 'django.utils.log.dictConfig'
SEND_BROKEN_LINK_EMAILS = False
TEMPLATE_LOADERS = 
WSGI_APPLICATION = 'BBN.wsgi.application'
TEMPLATE_DEBUG = True
X_FRAME_OPTIONS = 'SAMEORIGIN'
AUTHENTICATION_BACKENDS = 'django.contrib.auth.backends.ModelBackend'
FORCE_SCRIPT_NAME = None
CACHE_BACKEND = 'locmem://'
SIGNING_BACKEND = 'django.core.signing.TimestampSigner'
SESSION_COOKIE_SECURE = False
CSRF_COOKIE_DOMAIN = None
FILE_CHARSET = 'utf-8'
DEBUG = True
SESSION_FILE_PATH = None
DEFAULT_FILE_STORAGE = 'django.core.files.storage.FileSystemStorage'
INSTALLED_APPS = 
LANGUAGES = 
COMMENTS_ALLOW_PROFANITIES = False
STATICFILES_DIRS = 
PREPEND_WWW = False
SECURE_PROXY_SSL_HEADER = None
AUTH_PROFILE_MODULE = 'Knights.UserInfo'
SESSION_COOKIE_HTTPONLY = True
DEBUG_PROPAGATE_EXCEPTIONS = False
MONTH_DAY_FORMAT = 'F j'
LOGIN_URL = '/accounts/login/'
SESSION_EXPIRE_AT_BROWSER_CLOSE = False
TIME_FORMAT = 'P'
DATE_INPUT_FORMATS = 
CSRF_COOKIE_NAME = 'csrftoken'
EMAIL_HOST_PASSWORD = u'********************'
PASSWORD_RESET_TIMEOUT_DAYS = u'********************'
CACHE_MIDDLEWARE_ALIAS = 'default'
SESSION_SAVE_EVERY_REQUEST = False
NUMBER_GROUPING = 0
SESSION_ENGINE = 'django.contrib.sessions.backends.db'
CSRF_FAILURE_VIEW = 'django.views.csrf.csrf_failure'
CSRF_COOKIE_PATH = '/'
LOGIN_REDIRECT_URL = '/accounts/profile/'
LOGGING = {'loggers': {'django.request': {'handlers': ['mail_admins'], 'propagate': True, 'level': 'ERROR'}}, 'version': 1, 'disable_existing_loggers': False, 'filters': {'require_debug_false': {'()': 'django.utils.log.RequireDebugFalse'}}, 'handlers': {'mail_admins': {'class': 'django.utils.log.AdminEmailHandler', 'filters': ['require_debug_false'], 'level': 'ERROR'}}}
IGNORABLE_404_URLS = 
LOCALE_PATHS = 
TEMPLATE_STRING_IF_INVALID = ''
LOGOUT_URL = '/accounts/logout/'
EMAIL_USE_TLS = True
FIXTURE_DIRS = 
EMAIL_HOST = 'smtp.gmail.com'
DATE_FORMAT = 'N j, Y'
MEDIA_ROOT = ''
DEFAULT_EXCEPTION_REPORTER_FILTER = 'django.views.debug.SafeExceptionReporterFilter'
ADMINS = 
FORMAT_MODULE_PATH = None
DEFAULT_FROM_EMAIL = 'webmaster@localhost'
MEDIA_URL = ''
DATETIME_FORMAT = 'N j, Y, P'
TEMPLATE_DIRS = '/Users/Mike/Desktop/Main/Django-Development/BBN/Knights/templates'
SITE_ID = 1
DISALLOWED_USER_AGENTS = 
ALLOWED_INCLUDE_ROOTS = 
DECIMAL_SEPARATOR = '.'
SHORT_DATE_FORMAT = 'm/d/Y'
TEST_RUNNER = 'django.test.simple.DjangoTestSuiteRunner'
CACHE_MIDDLEWARE_KEY_PREFIX = u'********************'
TIME_ZONE = 'America/New_York'
FILE_UPLOAD_MAX_MEMORY_SIZE = 2621440
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
DEFAULT_TABLESPACE = ''
TEMPLATE_CONTEXT_PROCESSORS = 
SESSION_COOKIE_AGE = 1209600
SETTINGS_MODULE = 'BBN.settings'
USE_ETAGS = False
LANGUAGES_BIDI = 
FILE_UPLOAD_TEMP_DIR = None
INTERNAL_IPS = 
STATIC_URL = '/static/'
EMAIL_PORT = 587
USE_TZ = True
SHORT_DATETIME_FORMAT = 'm/d/Y P'
PASSWORD_HASHERS = u'********************'
ABSOLUTE_URL_OVERRIDES = {}
CACHE_MIDDLEWARE_SECONDS = 600
DATETIME_INPUT_FORMATS = 
EMAIL_HOST_USER = '*****@gmail.com'
PROFANITIES_LIST = u'********************'

You're seeing this error because you have DEBUG = True in your
Django settings file. Change that to False, and Django will
display a standard 500 page. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:13:33.433

你实际上并没有`is_valid`在这里打电话：

```
form.is_valid # missing the call () 
```

# php - 我应该使用 elseif 还是多个 if 子句

> ID：11855437
> 
> 赞同：1
> 
> 时间：2012-08-07T23:16:23.183
> 
> 标签：php

我有这个简单的 if 代码：

哪个更好，用 esleif 做还是做两个单独的 if？

```
if(is_home() && $currentpage == ''){ 
    $catname = 'cars';
} elseif(is_home() && $currentpage != '' && is_page_template('models.php')){ 
    $catname = 'newcars';
} 
```

两个单独的 if 子句：

```
if(is_home() && $currentpage == ''){ 
    $catname = 'cars';
} 
if(is_home() && $currentpage != '' && is_page_template('models.php')){ 
    $catname = 'newcars';
} 
```

if 的顺序重要吗？如果在第一个之前，我可以放置第二个吗？问题应该是 php 如何处理从更具体到更一般的条件？您是否应该始终从更具体的开始，然后逐步发展到一般？或者php可以对它们进行排序？

第二个版本对我来说会更容易，因为我已经分配了 if :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T23:19:20.003

这取决于你想要什么行为：

如果使用`elseif`，则**只会**执行第一个匹配的块。

```
$foo = $bar = true;
if($foo) { /* executed */ }
elseif($bar) { /* not executed */ } 
```

当使用单独的`if`子句时，所有匹配的块都将执行：

```
$foo = $bar = true;
if($foo) { /* executed */ }
if($bar) { /* also executed */ } 
```

如果条件不同，即只有一个是真的，那并不重要。但是，通过使用`elseif`您可以避免无用的检查，因为一旦一个条件评估为真，就不需要检查其他条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T23:19:57.867

为了脚本优化，我会推荐 elseifs 以避免运行额外的不必要的条件。

如果可能，我建议使用 switch/case 语句（您可以在其中检查单个变量的值）。从减少杂乱的角度来看，它们更干净，更容易维护。

多个 if 语句（而不是 elseif 语句）的一个问题是它使调试问题变得更加复杂。你怎么知道第二个语句没有覆盖第一个语句，或者你的条件逻辑对每个语句都是正确的？使用多个 if 会增加一个条件覆盖另一个条件的可能性。开始在这些 if 语句中添加多个变量，它会开始伤害你的大脑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:19:29.767

```
if (is_home()) { 

    if ($currentpage == '') {

        $catname = 'cars';
    }
    else if (is_page_template('models.php')) {

        $catname = 'newcars';
    }       
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T23:26:16.707

我会去，

```
if(is_home()) {
    if($currentpage == '') {
        $catname = 'cars';
    }
    elseif(is_page_template('models.php')) { 
        $catname = 'newcars';
    }
} 
```

# wordpress - 如何添加虚构的类别 wordpress

> ID：11855439
> 
> 赞同：0
> 
> 时间：2012-08-07T23:16:36.920
> 
> 标签：wordpress, wordpress-theming

我正在尝试在 wordpress 上做一些事情，我不确定这是否可行。所以基本上，我将魔术场用于两件事。我创建了一个名为“Member”的面板，另一个名为“Member actuality”。我创建了两个类别，成员和成员实际情况，我已经绑定了太神奇的字段发布。

当我进入类别（site.com/category/member）成员时，我有我所有成员的列表。当我单击我的一个成员 (site.com/memberName) 时，我会看到该成员的描述。所以目前一切正常。

现在我想做的是找到一种方法来显示一个成员的实际情况。也许是这样的：（site.com/actuality/member）但我不知道如何做到这一点。所以如果有人可以帮助我。

我不确定我的解释是否正确，所以如果你不明白，请让我重新制定。

感谢您未来的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:11:35.580

我找到了一种方法来解决这个问题。

添加帖子时，我首先创建了一个新标签，这使我可以使用以前没有使用过的标签目录！

！

# android - adb 设备列表空 ubuntu 12.04 s5830

> ID：11855441
> 
> 赞同：1
> 
> 时间：2012-08-07T23:16:48.920
> 
> 标签：android, adb, ubuntu-12.04

我的问题是 adb devices 没有使用 Ubuntu 12.04 检测到我的 Galaxy ace (s5830)，我尝试了所有方法但仍然无法正常工作。可以帮我哪里错。我已经安装了 oracle sdk 1.7，最后一个 android sdk，我创建了具有权限 a+r 的规则 51-android.rules

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:56:40.587

我有同样的问题。尽管有规则文件，但我的设备没有被检测到。我做了以下事情：

1.  重新启动了我的设备
2.  连接为“仅充电”（HTC 设备）。

检测到该设备，我能够安装该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:56:18.850

做以下事情

1.  为三星智能手机下载[Kies](http://www.softpedia.com/get/Internet/Telephony-SMS-GSM/Kies.shtml)
2.  重启日食
3.  在 DDMS 部分，转到 windows->Show View->Devices，然后单击小向下箭头（查看菜单）并单击重置 ADB。然后它应该可以正常工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T00:38:30.140

Android 使用 Java 1.6，因此无需升级到 1.7。

你真的使用三星供应商 id 04e8 作为你的 udev 规则吗？您是否在实际设备上设置了“开启”调试？您的设备上是否有任何网络共享应用程序（使用 adb）？有些人会。

您还需要重新启动终端窗口（或重新启动 Eclipse）才能首次加载 udev 规则，但我假设您已经这样做了。

同样，为了更好地衡量，您也应该重新启动设备。

如果你真的很想让这个工作，你总是可以root你的手机并使用像adbwireless这样的免费应用程序（它只适用于root设备和没有打开wifi隔离的本地wifi）。这就是我对三星 Tab 10.1 所做的事情（直到我将其送回维修）。

Adb 也没有从我的 Ubuntu 12.04 笔记本电脑上找到我的 Tab，也没有从我的开发者朋友的 Mac 和 Windows PC 上找到它，但是当我尝试连接属于我朋友的 Samsung Tab 10.1 时，adb看到它就好了，所以这就是我的问题所在。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-07T23:57:57.347

尝试重启 adb

```
adb kill-server
adb devices 
```

让自己成为这方面的捷径。

# sql - SQL Server - 如果存在于其他表中，则更改列？

> ID：11855442
> 
> 赞同：0
> 
> 时间：2012-08-07T23:16:50.363
> 
> 标签：sql, sql-server-2008

玩弄 SQL Server 2008，我有一个`People`包含列的表：

```
Name  | City |  Born | ... 
```

和另一个`Change`带有列的表：

```
OldName  |  NewName 
```

现在我想`Name`在表中进行如下更改`People`：如果`OldName`表`Change`中与`Name`in相同，则将in`People`更改为`Name`in 。`People``NewName``Change`

有什么简单的方法吗？

哦，还有一个问题：如果`Name`in`People`是主键（或者说是复合键） `Name`，`City`更改名称会更难吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:21:46.547

答案1)

```
UPDATE people,change
SET people.name = change.newname
WHERE people.name = change.oldName 
```

**使用内部加入语法**编辑：****

 **```
UPDATE people
SET people.name = change.newName
FROM people
INNER JOIN change ON people.name = change.oldName 
```

我没有 SQL Server 来测试它，但根据在线示例，它应该可以工作。

**/编辑**

Answer2）只要您仍然保持密钥的唯一性，就不会很难改变。一旦你引起碰撞，你就会得到一个错误。出于这个原因，最好在您的 PK 中拥有一个自动递增的 ID 字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:24:44.493

您最好向表中添加一`PeopleId`列，并将表中的列`People`替换为与表具有外键关系的列：`OldName``Change``PeopleId``People`

人们：

```
PeopleId | Name   | City     | Born
-------------------------------------------
1        | Fred   | New York | 1/1/1980
2        | Wilma  | Boston   | 1/1/1980 
```

改变：

```
PeopleId | NewName
----------------------
1        | Barney 
```**

# php - 我在我的 Facebook 页面上发布了一张照片，但它没有显示

> ID：11855446
> 
> 赞同：0
> 
> 时间：2012-08-07T23:17:18.633
> 
> 标签：php, facebook

我正在尝试将照片从我的服务器上传到我页面上的相册。我有以下代码来发送照片：

```
$argsFeed = array(  'source' => '@' .$FILE_PATH,
                    'published' => true,
                    'message' =>    $caption);
try {
        $imageId2 = $facebook->api('/'.$ALBUM_ID.'/photos', 'post', $argsFeed);
    } catch(FacebookApiException $e) {
        $result['status'] = "error";
        $result ['message'] = $result ['message'] .  ' ||| error posting photo to page 164264490295119\. facebook says: <BR/>' . json_encode($e->getResult());
    } 
```

我有以下权限：publish_stream、user_photos、manage_pages

我总是通过带有照片 ID 的 api-call 获得成功，但照片不会去任何地方。完全相同的照片也发布到我（用户）的墙上，所以照片不会是问题。我的猜测是它确实发布在某个地方，因为没有例外，只是我不知道它发布在哪里。有人有线索吗？

我得到像这样的照片 ID：10151091881973938,633203937_10151091735008938 但我不知道如何处理它们 - 我如何在图表中查找它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:22:12.743

> 我得到像这样的照片 ID：10151091881973938,633203937_10151091735008938 但我不知道如何处理它们 - 我如何在图表中查找它们？

逗号前的第一部分绝对是您的照片在图表中的 id。

那是您在图表上的照片对象： [https ://developers.facebook.com/tools/explorer?method=GET&path=10151091881973938](https://developers.facebook.com/tools/explorer?method=GET&path=10151091881973938)

这是 Facebook CDN 上的实际图片 URL 之一： [https ://fbcdn-photos-a.akamaihd.net/hphotos-ak-snc6/283597_10151091881973938_1730322674_a.jpg](https://fbcdn-photos-a.akamaihd.net/hphotos-ak-snc6/283597_10151091881973938_1730322674_a.jpg)

这就是您在 facebook.com 上的照片的显示 URL，将其显示为您相册中的一张照片： [https ://www.facebook.com/photo.php?fbid=10151091881973938&set=p.10151091881973938&type=1](https://www.facebook.com/photo.php?fbid=10151091881973938&set=p.10151091881973938&type=1)

第二部分，`633203937_10151091735008938`显然是您的用户 ID 与您的照片 ID 相结合。当您发布它们时，您是否将它们全部作为一个字符串，`photo_id comma userid underscore photo_id`或者您只是将它们发布为这个？

通常，我希望通过 API 从成功的照片帖子中返回照片 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:31:26.390

如果没有更多的上下文，很难诊断这一点。$facebook->api 是在执行 POST 吗？

但是，您在没有图像扩展名的情况下检索照片 ID 的事实让我相信您的问题可能是图像扩展名没有进入 Facebook POST；因此，您无法显示没有 .jpg 或 .png 扩展名的图像。这可以解释为什么它接受文件，因为它是 type=image

# javascript - 这与 $(document).ready() 有何不同？

> ID：11855450
> 
> 赞同：0
> 
> 时间：2012-08-07T23:17:59.003
> 
> 标签：javascript, jquery, jquery-ui

> **可能重复：**
> [$().ready() 和 $(document).ready() 之间有区别吗](https://stackoverflow.com/questions/2384204/is-there-a-difference-between-ready-and-document-ready)

我正在尝试为页面设置 jquery ui 选项卡，我使用了

```
$(document).ready(function(){
    $('#tabs').tabs();
}); 
```

这没有用。所以我检查了他们的例子，发现现在可以使用的不同语法

```
$(function(){
    $('#tabs').tabs();
}); 
```

这两种语法有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:22:16.943

它们是等价的。[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

> .ready() 方法通常与匿名函数一起使用：

```
$(document).ready(function() {
  // Handler for .ready() called. 
}); 
```

> 这相当于调用：

```
$(function() {  
  // Handler for .ready() called. 
}); 
```

> 如果在 DOM 初始化后调用 .ready() ，传入的新处理程序将立即执行。

# javascript - 地理定位不适用于支持苹果移动网络应用程序？

> ID：11855453
> 
> 赞同：4
> 
> 时间：2012-08-07T23:18:14.827
> 
> 标签：javascript, jquery, geolocation, mobile-safari, iphone-standalone-web-app

我有以下 JS 来显示当前用户的邮政编码`#zip`：

```
(function ($, geolocation) {
    if (geolocation) {
        geolocation.getCurrentPosition(function (position) {
            $.getJSON(
                "http://ws.geonames.org/findNearestAddressJSON?callback=?",
                {
                    lat : position.coords.latitude,
                    lng : position.coords.longitude
                },
                function (data) {
                    $(function () {
                        $('#zip').text(data.address.postalcode);
                    });
                }
            );
        });
    }
}(jQuery, navigator.geolocation)); 
```

我还有一个 JS 函数来重新加载页面：

```
$('.reload').click(function(){
    window.location.reload(true);
}); 
```

在 Mobile Safari 中，这两个功能可以很好地协同工作。如果用户打开网页，它将加载用户当前的邮政编码。然后，如果用户更改位置，用户可以通过点击按钮重新加载页面。**这工作正常，除非`<meta name="apple-mobile-web-app-capable" content="yes">`存在。**

当它存在时，会发生以下情况：

1.  用户点击主屏幕上的图标
2.  网页打开，地址栏隐藏，`<meta name="apple-mobile-web-app-capable" content="yes">`这样
3.  邮政编码按应有的方式加载
4.  用户移动位置，点击重新加载按钮
5.  **页面无法显示邮政编码，没有错误记录到控制台**

我真的很想解决这个问题，但如果这有帮助，这里有一个工作示例：

[http://www.codekraken.com/testing/zipper/zip.html](http://www.codekraken.com/testing/zipper/zip.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:04:38.487

全屏网络应用程序没有重新加载（使用 apple-mobile-web-app-capable）。但是，当用户更改位置，然后再次运行应用程序时，它总是会加载页面。它不会触发 reload 事件，但会触发 onload 事件——每次运行时。

如果用户让应用程序运行并更改位置，您将需要一个简单的“再次找到我”功能，该功能只需重新运行您的代码以查找当前位置和邮政编码。

现在 - 这里有一个问题！我发现在 iOS 上，位置经常被缓存，即使你告诉它只使用一个新的位置，所以有时，你会得到旧的位置。我为此创建了一个名为 getAccurateCurrentLocation() 的解决方法，它使用非常相似的接口。[您可以在https://github.com/gwilson/getAccurateCurrentPosition](https://github.com/gwilson/getAccurateCurrentPosition)找到代码- 作为 getCurrentPosition() 的替代品非常简单。

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:26:39.237

万一其他人有困惑（就像我一样），这里涉及的方法是地理定位对象的本机“watchPosition”方法。

[WatchPosition MDN 规范](https://developer.mozilla.org/en-US/docs/Using_geolocation#Watching_the_current_position "MDN 规格")

当用户移动位置时将调用 watchPosition 方法，您可以指定您的 lat/long 到 zip 生成器作为回调。

从规格：

```
 var watchID = navigator.geolocation.watchPosition(function(position) {
        do_something(position.coords.latitude, position.coords.longitude);
    }); 
```

所以看起来你可以这样做：

```
 var watchID = navigator.geolocation.watchPosition(function(position) {
        $.getJSON(
            "http://ws.geonames.org/findNearestAddressJSON?callback=?",
            {
                lat : position.coords.latitude,
                lng : position.coords.longitude
            },
            function (data) {
                $(function () {
                    $('#zip').text(data.address.postalcode);
                });
            }
        );
    }); 
```

这将实现更加简单 - 用户不必点击位置按钮，它应该已经在他们移动时更新。

需要明确的是，Greg 的函数使用了这种 watchPosition 方法，但是如果你想了解什么在工作，或者使用更精简的原生代码并自己自定义，watchPosition 是你的工具。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-08T00:34:03.660

全屏模式在 WebSheet 中启动浏览器，该 WebSheet 可能具有一组单独的地理位置权限。也许以前您拒绝在 WebSheet 中共享地理位置信息，但允许在 Safari 浏览器中共享。

如果我没记错的话，众所周知，WebSheets 会不时重置其权限并再次提示用户允许每隔几个小时读取一次地理位置。

# jquery - 窗口和文档作为 jQuery 选择器

> ID：11855457
> 
> 赞同：0
> 
> 时间：2012-08-07T23:19:02.677
> 
> 标签：jquery

为什么在 jQuery 中，我们可以`$(document)`用作选择器，但必须`$('body')`在名称周围使用引号或双引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:22:05.047

`document`是页面范围内的全局js对象，而是页面`<body>`上的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:22:28.220

因为`body`是一个元素，[`document`](https://developer.mozilla.org/en-US/docs/DOM/document)也是一个对象。

> 浏览器中加载的每个网页都有自己的文档对象。此对象用作网页内容（DOM 树，包括 和 等元素）的入口点，`<body>`并`<table>`为文档提供全局功能（例如获取页面的 URL 和在文档中创建新元素）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:22:52.840

Document 是 window 对象上定义的对象，而 body 的定义方式与 document 不同。但是，您可以自己定义它：

```
var body;
$(document).ready(function () {
     body = document.find('body');
}); 
```

就窗口对象而言，文档作为预定义存在，因为这是您的窗口文档的根，或 HTML 标记。然后，DOM 允许您找到包含正文的文档的所有子项。`window['document']`等同于`window.document`或`document`，它是您页面的根目录，但是正文可能不明确，因为它不必是文档的第一个/第二个/第三个孩子，更不用说它也是可选的，这将呈现总是将身体对象定义为有时`undefined`：[http ://www.w3.org/TR/html401/struct/global.html#h-7.5](http://www.w3.org/TR/html401/struct/global.html#h-7.5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T23:39:59.547

改用就好`$(document.body)`了。

# iphone - 适用于 iPhone 的 Xcode facebook 连接

> ID：11855458
> 
> 赞同：0
> 
> 时间：2012-08-07T23:19:03.150
> 
> 标签：iphone, ios, facebook

希望你能帮助我解决这个错误。

1.  我已经从 GIT 存储库下载了 SDK。
2.  我在我的 Xcode 4.2 项目中复制了 /SRC/。
3.  我在 AppDelegate.h 上有这段代码

    > ```
    > #import <UIKit/UIKit.h>
    > #import "FBConnect.h"
    > 
    > @class ViewController;
    > 
    > @interface AppDelegate : UIResponder <UIApplicationDelegate,FBSessionDelegate> {
    >     Facebook *facebook;
    > }
    > 
    > @property (strong, nonatomic) UIWindow *window;
    > @property (strong, nonatomic) ViewController *viewController;
    > @property (nonatomic, retain) Facebook *facebook;
    > 
    > @end 
    > ```

4.  我在 AppDelegate.m 上有这段代码

    > ```
    > #import "AppDelegate.h"
    > #import "ViewController.h"
    > 
    > @implementation AppDelegate
    > 
    > @synthesize window = _window;
    > @synthesize viewController = _viewController;
    > @synthesize facebook;
    > 
    > - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    > {
    > 
    >     self.window.rootViewController = self.viewController;
    >     [self.window makeKeyAndVisible];
    > 
    >     facebook = [[Facebook alloc] initWithAppId:@"HERE_APP_ID" andDelegate:self];
    > 
    >     NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    > 
    >     if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
    >         facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    >         facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    >     }
    > 
    >     if (![facebook isSessionValid]) {
    >         [facebook authorize:nil];
    >     }
    > 
    >     return YES;
    > }
    > 
    > - (BOOL) application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    >     return [facebook handleOpenURL:url];
    > }
    > 
    > -(void) fbDidLogin {
    >     NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    >     [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    >     [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    >     [defaults synchronize];
    > 
    > } 
    > ```

5.  我的 .plist 文件配置了我的 fb"HERE_MY_APP_ID"

6.  我的项目结构是

> *   我的项目
>     *   源代码
>     *   AppDelegate.h
>     *   AppDelegate.m
>     *   MainStoryboard.storyboard
>     *   视图控制器.h
>     *   视图控制器.m
>     *   支持文件
> *   构架
> *   产品

问题是我没有任何错误，但是当我运行时，我得到了很多错误。快 81 岁了，还有一个警告。希望您能够帮助我。谢谢。

![在此处输入图像描述](../Images/e32a4d2d7950a05314ceaf9531b1f6e4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:08:32.893

从我可以看到您的项目正在使用 ARC 而 facebook SDK 不是。它告诉您该方法`-release`不可用，因此您需要考虑为 Facebook SDK 禁用 ARC。

# heroku - Datamapper，使用yaml进行配置

> ID：11855463
> 
> 赞同：0
> 
> 时间：2012-08-07T23:19:35.997
> 
> 标签：heroku, sinatra, datamapper

我有一个使用 DataMapper 作为 ORM 的 Sinatra 应用程序，它已部署到 Heroku，但我想更改数据库详细信息。

现在在我的模型之前，我正在像这样连接到我的数据库，但我想使用一个`yml`文件来管理连接详细信息。

```
DataMapper.setup(:default, ENV['DATABASE_URL'] || "sqlite3::memory:") 
```

如果我有一个文件`config/database.yml`，我该如何更改`DataMapper.setup`以使用正确的 ENV？这样我就可以消除对 Postgres 的需求，`sqlite3`因为我也将在本地运行 Postgres。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:19:54.253

据我所知，DataMapper 不解析`.yml`. 您可以查看[https://github.com/merb/merb_datamapper/blob/master/lib/merb_datamapper/connection.rb](https://github.com/merb/merb_datamapper/blob/master/lib/merb_datamapper/connection.rb)以了解`.yml`配置在 Merb 框架中的使用方式。

# zend-framework - 如何使用 ZF 设计具有持久连接的高效星级模块？

> ID：11855464
> 
> 赞同：1
> 
> 时间：2012-08-07T23:19:40.410
> 
> 标签：zend-framework, zend-db

我的 CMS 基于 Zend 框架。我对新闻、文章、博客文章等使用星级评分。星级评分是一个模块，因此我通过内部 API 将其包含在不同的内容类型中，该 API 是以下内容的包装器：

```
$view->action($action, $controller, $module, $params); 
```

当我将它包含在详细描述新闻、文章的页面中时……一切都很简单，因为我只调用了一次 API 方法，所以我只调用了一次数据库（MySql）。

但我需要在页面的项目列表中包含星级。页面上有 20 条新闻。在其他情况下可以超过 100 项。如果我使用我拥有的结构，我将对 MySql 进行 100 多次调用。这不好，对吧？如何以正确的方式设计星级模块？

这就像 facebook 的like-buttons 加入到页面上不同的内容类型。

# google-maps-api-3 - Google Maps API - 指向地图标记和打开信息窗口的外部链接

> ID：11855473
> 
> 赞同：1
> 
> 时间：2012-08-07T23:20:30.327
> 
> 标签：google-maps-api-3, google-maps-markers

我有一张地图，其中填充了从存储在数据库中的 xml 文件中获取的标记。在地图下方，我从每个标记中提取相同的信息并将它们显示为列表。我正在尝试创建一个`<a href="">`类型链接，该链接将在每个列表旁边打开相应的标记和信息窗口。这是我的页面，它可能更好地解释我的意思： http: [//poultry.ie/plugin/page/breeders](http://poultry.ie/plugin/page/breeders)

这是我的代码：

```
 <script type="text/javascript">
    //<![CDATA[

var redpin = new google.maps.MarkerImage('http://labs.google.com/ridefinder/images/mm_20_red.png',
    new google.maps.Size(20,32),
    new google.maps.Point(0,0),
    new google.maps.Point(0,32)
);
var redpinshadow = new google.maps.MarkerImage('http://labs.google.com/ridefinder/images/mm_20_shadow.png',
    new google.maps.Size(37,32),
    new google.maps.Point(0,0),
    new google.maps.Point(0, 32)
);

   function load() {
       var gmarkers = [];
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(53.5076512854544, -7.701416015625),
        zoom: 7,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
       downloadUrl("http://poultry.ie/plugins/CustomPages/pages/phpsqlajax_genxml3.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var phone = markers[i].getAttribute("phone");
          var breeds = markers[i].getAttribute("breeds");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b><br />" + address + "<br/>" + phone + "<br/>" + breeds;
      var marker = new google.maps.Marker({
        map: map,
        shadow: redpinshadow,
        icon: redpin,
        position: point
      });

          bindInfoWindow(marker, map, infoWindow, html);
        }
      });
    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>

    </script> 
```

以及动态显示列表的 php（对于这个县）：

```
//Armagh
 $data = mysql_query("SELECT * FROM markers WHERE address='Armagh'")
 or die(mysql_error());
 while($info = mysql_fetch_array( $data )) 
 { 
 Print '<div class="county all armagh">'; 
 Print "<h4>".$info['name'] . "</h4> "; 
 Print "<em>".$info['address'] . "</em><br /> "; 
 Print "".$info['phone'] . "<br /> "; 
 Print '<a href="javascript:myclick(' . $info['id'] . ')">See on Map</a><br />';
 Print "<em>Breeds:</em> ".$info['breeds'] . "<hr/></div>";

 } 
```

这`<a href="javascript:myclick(`是来自之前创建它的尝试，它目前实际上没有功能。

我尝试将许多示例应用于我的代码但没有成功，因为我对 javascript 的了解至少可以说是相当有限的。我上面的代码也可能不是最干净的，因为它是我从很多示例中组合而成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:37:51.360

这是[一个示例](http://www.geocodezip.com/v3_MW_example_map3.html)（来自 Mike Williams 的 v2 教程），它从 xml 文件加载标记并具有可点击的侧边栏

# javascript - Javascript出生日期难题

> ID：11855474
> 
> 赞同：0
> 
> 时间：2012-08-07T23:20:42.030
> 
> 标签：javascript, html

我需要以以下格式验证原始出生日期字段输入：

'mmyyy'

其中字符串的前 3 个字符必须是可接受的 3 个字母的年份月份缩写。 **它可以是小写字母，也可以是大写字母，或者任意混合，只要它拼出 jan 或 feb 或 mar 等等等。** 我知道没有内置方法具有这种特定格式的现成数组一个月才能与用户输入进行比较。我在想我可以`localeCompare()`在 for 循环中使用该方法来测试输出是否不是 0，然后相应地附加一条错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:42:43.007

```
function dateTester() {
   var d = new Date(),
      i,
      mo = [],
      moIsValid;
   for (i = 0; i < 12; i += 1) {
      d.setMonth(i);
      mo.push(d.toLocaleString().split(' ')[1].substr(0, 3));
   }
   return new RegExp('^(' + mo.join('|') + ')', 'i');
}

var moIsValid = dateTester();
alert(moIsValid.test('fEb1992')); 
```

如果您不希望用户当前的区域设置名称在这些天有效，则只需切换`toLocaleString()`到`toString()`. 但是，你为什么不这样做呢：

```
var moIsValid = /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i;
alert(moIsValid.test('fEb1992')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:34:34.410

除非你真的，*真的*想用“动态”测试检查一个月，你可以这样做：

```
var months = 'jan,feb,mar,apr,may,jun,jul,aug,sep,oct,nov,dec';

months.indexOf('JaN1975'.toLowerCase().substring(0,3) 
```

检查：

```
console.log(months.indexOf('JaN1975'.toLowerCase().substring(0,3)) != -1);
console.log(months.indexOf('oct1975'.toLowerCase().substring(0,3)) != -1);
console.log(months.indexOf('FEB1975'.toLowerCase().substring(0,3)) != -1);
console.log(months.indexOf('Ja1975'.toLowerCase().substring(0,3)) != -1);
console.log(months.indexOf('091975'.toLowerCase().substring(0,3)) != -1); 
```

[http://jsfiddle.net/ELMFu/](http://jsfiddle.net/ELMFu/)

给出：

```
true
true
true
false
false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:38:28.957

```
new Date(str.replace(/(\D+)(\d+)/, "1 $1 $2")) 
```

编辑：用于`isNaN`测试日期是否解析失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T23:51:01.920

我喜欢这个简洁的函数来验证你的输入：

```
var months = "janfebmaraprmayjunjulaugsepoctnovdec";
function validate(dateString) {
    return dateString.length == 7 &&
           !(months.indexOf(dateString.substr(0,3).toLowerCase()) % 3) &&
           isFinite(dateString.substr(3));
} 
```

[http://jsfiddle.net/gilly3/NR3aG/](http://jsfiddle.net/gilly3/NR3aG/)

# c - 将位类型打印为整数？转换如何？

> ID：11855477
> 
> 赞同：7
> 
> 时间：2012-08-07T23:21:17.990
> 
> 标签：c, bit

程序是：

```
typedef struct xp {
        int a:2;
        int b:2;
        int c:1;
} xp;

int main(void)
{
        xp x;
        memset(&x, 0, sizeof(xp));

        x.a = 1;
        x.b = 3;
        x.c = 1;

        printf("%d\n",x.a);
        printf("%d\n",x.b);
        printf("%d\n",x.c);

        return 0;
} 
```

我得到 1 -1 -1，为什么？a、b 和 c 如何存储在 x 中？printf("%d\n",xa); 时发生了什么 被执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T23:25:50.213

您正在为位域使用有符号类型，这意味着您已经创建了两个有符号整数和一个有符号整数。

两位有符号整数（二进制补码）的可能值为：-2、-1、0 和 1：

一位有符号整数（二进制补码）的可能值为 -1 和 0。

通过存储“不适合”的值，就像您在这些行中所做的那样：

```
x.b = 3;
x.c = 1; 
```

你会得到奇怪的行为，因为你存储的位模式在读取时会被不同地解释。您可以通过执行以下操作获得类似的体验：

```
char x = 58147; 
```

在具有 8 位`char`类型的机器上，该值不适合，因此您在访问`x`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T23:31:40.870

type 的位域`int`要么是 type`signed int`要么是 type `unsigned int`。选择是实现定义的。这是出于历史原因。这是唯一可以不同`int`的上下文。`signed int`

这在 C 标准（[C99 草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)，[C11 草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)）的第 6.7.2 节中指定，遵循类型说明符列表：

> 每个逗号分隔的多重集都指定相同的类型，除了对于位字段，说明符`int`指定与 相同的类型`signed int`还是与 相同的类型是实现定义的`unsigned int`。

解决方案是避免`int`对位字段使用plain；总是将它们声明为`signed int`或 as `unsigned int`。（后者几乎总是更有意义。）

# java - 将 JAR 添加到文件夹下的构建路径

> ID：11855486
> 
> 赞同：0
> 
> 时间：2012-08-07T23:22:31.560
> 
> 标签：java, eclipse, build, jar

Eclipse 新手，我试图弄清楚如何将 JAR 添加到库或类路径下的构建路径（看起来像什么）？这是我现在拥有的：

![http://drivetesting.weebly.com/uploads/1/0/6/3/10633272/8651641_orig.png](../Images/8eb0c1115f643830d84fb04b21957399.png)

这就是我想要的：

![http://drivetesting.weebly.com/uploads/1/0/6/3/10633272/6219278_orig.jpg](../Images/2aad51dde5f3bf0403a32811770df3a2.png)

您看到在第二张图片中，JAR“core.jar”、“ext.jar”和“frameworks.jar”如何出现在“2231 Libs”下？我无法做到这一点，我已经尝试了我能想到的一切。我真的很感激这方面的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:31:15.560

Java->构建路径->用户库首选项页面。在那里，定义一个库并将所有的 jars 添加到其中。然后将库添加到您在屏幕截图中显示的构建对话框中的类路径中。

[Eclipse Java 帮助内容：用户库](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/reference/help_preferences_content.htm)

# exchangewebservices - Exchange EWS MailItem 显示附件，但不允许我检索文件附件

> ID：11855488
> 
> 赞同：0
> 
> 时间：2012-08-07T23:22:47.640
> 
> 标签：exchangewebservices

我正在尝试从交换电子邮件中加载文件附件（其图像文件）。

` foreach（findResults.Items 中的 EmailMessage 项）{ if (item.HasAttachments) { var something = item.Attachments[0];

```
 foreach (Attachment attachment in item.Attachments)
                {
                    if (attachment is FileAttachment)
                    {
                        FileAttachment fattach = (FileAttachment)attachment;` 
```

出于某种原因，即使该项目有附件（我可以通过登录 Web 界面来确认这一点），它也不允许我检索文件附件。

它显示为空。为什么一个项目在集合中有一个附件但不能检索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-09T08:23:46.523

绑定到 Item 时，需要指定 Attachments 属性。以下代码示例应该会有所帮助：

```
PropertySet propertySet = new PropertySet(ItemSchema.Subject, ItemSchema.Attachments);    
Item item = Item.Bind(service, itemId, propertySet); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:49:19.950

我有一个类似的问题，并非所有属性都已设置，因此您需要从 Exchange 服务本身调用 LoadPropertiesForItems 方法来加载附件等额外数据。
例如，如果您要加载项目 x 的所有附件并且交换服务实例为 s，则：

```
List<Item> xlist = new List<Item>();
            xlist.Add(x);
            s.LoadPropertiesForItems(xlist,PropertySet.FirstClassProperties); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-31T19:28:11.967

你错过了加载附件。请参阅下面的示例以获取想法

```
EmailMessage msgInfo = null;
foreach (Item msgItemInfo in msgItemWithNotification)
{
   msgInfo = EmailMessage.Bind(exchange, msgItemInfo.Id);
   foreach (Attachment attachment in msgInfo.Attachments)
       {
           if( attachment is FileAttachment)
              {
                  FileAttachment fattach = attachment as MSEWS.FileAttachment;
                  fattach.Load();
                  Stream excelFileStream = new System.IO.MemoryStream(fattach.Content);
              }
       }
} 
```

# jquery - 如何定位元素

> ID：11855491
> 
> 赞同：0
> 
> 时间：2012-08-07T23:22:52.973
> 
> 标签：jquery, ios

这个问题是关于带有子菜单的列表菜单中的**触摸事件。**目的是通过一键操作（在移动设备上）-> 扩展，第二次触摸缩回。触摸另一个项目-> 它扩展和先前的缩回。

这就是问题所在：iPad 4.3.3 运行良好。iPhone 5.1 和 Android 4 - 第二次触摸缩回和延伸。不是想要的效果。在您的移动设备上查看[示例](https://flydata.mobi/bella/)。感谢您的关注。

这是 jQuery 或移动操作系统中的错误吗？

```
$(document).ready(function () {   
    if((navigator.userAgent.match(/iPhone|iPod|iPad|Android/i))) {
        $('#nav li').click(function(){
            // attach a click event listener to provoke iPhone/iPod/iPad's hover event
            // Amended the next 3 lines 
            var $this_li = $(this);  
            $('#nav li ul').slideUp(function() {
                $('ul', $this_li).slideDown();
            });
        });
    } else {
        // This part works in non-mobile browser
        $('#nav li').hover(
            function () {
                //show its submenu
                $('ul', this).slideDown(200);
            }, 
            function () {
                //hide its submenu
                $('ul', this).slideUp(200);         
            }
        ); 
    }  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:13:34.010

经过几个小时的反复试验，以下更改终于产生了反映触摸设备上悬停事件的预期效果。也就是说，对于具有子菜单的菜单项（使用 id 且没有类属性）：

1.  如果子菜单已打开（隐藏），则向下滑动。
2.  如果子菜单向下（可见），则向上滑动。
3.  如果一个子菜单被按下并选择了另一个子菜单，则隐藏向下并向下滑动所选。

    ```
    $('#nav li').click(function() {
        var $selected_li = $(this); 
        if ($('ul', $selected_li).is(':visible')) {
            $('#nav li ul').slideUp();
        }
        else {
            $('#nav li ul').slideUp(function() {
                $('ul', $selected_li).slideDown();
            });
        }
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:15:23.163

```
 var $this_li = $(this);  
 $('#nav li ul').slideUp(function() {
     $('ul', $this_li).slideDown();
 }); 
```

这段代码正在做它应该做的事情，你告诉 $(this) 向下滑动，但你也在向上滑动中捕获相同的项目，所以它向上然后向下滑动。

试试这个，而不是循环遍历导航项目的集合，将所有项目向上滑动，但单击的项目除外，然后仅向下滑动单击的项目。

```
//...in the click event
var $this_li = $(this);  
$('#nav li').each(function(index) {
    if ( this != $this_li ) {
        $('ul', this).slideUp();
    }
    else {
        $('ul', $this_li).slideDown();
    }   
}); 
```

我不是 jquery 专家，但这应该非常接近。

# ruby-on-rails - 如何使虚拟属性成为布尔字段

> ID：11855492
> 
> 赞同：5
> 
> 时间：2012-08-07T23:22:52.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我试图让我的虚拟属性是一个可以工作的布尔值。在这个例子中，让我们调用虚拟布尔字段`children`：

**模型/parent.rb**

```
Parent
 attr_accessible :children
 attr_accessor :children
 validates_inclusion_of :children, :in => [true, false]

 def self.children=(boolean)
 end

end 
```

**父母/new.html.erb**

```
<%= form_for @parent do |f| %>
  <%= f.check_box :children %>
  <%= f.submit "Create" %>
<% end %> 
```

现在，当我尝试使用它时，（创建父级）它给了我错误

```
Children is not included in the list 
```

当验证出现时。

我怎么写这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-12-21T14:35:46.043

Rails 5 现在添加了这个`attribute`方法。

```
class Parent
  attribute :children, :boolean
end 
```

它的正式名称为“属性 API”，您可以在此处找到文档：[https ://api.rubyonrails.org/classes/ActiveRecord/Attributes/ClassMethods.html](https://api.rubyonrails.org/classes/ActiveRecord/Attributes/ClassMethods.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T08:23:53.730

您从浏览器获得的参数是一个字符串（基于您对另一个答案的评论：«Instead of true and false 尽管它使用 0 和 1."parent"=>{"children"=>"1"}»） . 您的验证检查它是否为布尔值。

我建议以下解决方案：

首先，删除您的`def self.children=()`方法，它在您当前的实现中什么都不做（它是一个类方法，从未调用过）。

然后，实现一个自定义访问器，将 String 参数转换为布尔值：

```
class Parent
  attr_reader :children

  def children=(string_value)
    @children = (string_value == '1')
  end

  validates_inclusion_of :children, :in => [true, false]
end 
```

这样，您的原始验证应该可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T00:14:53.930

无需手动定义子“setter”方法，因为这正是 attr_accessor 自动执行的操作。尝试删除您的 def self.children=(boolean) 方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T23:48:48.310

params[:children] 是否有可能是一个字符串？它期望一个布尔值。

# php - 对返回 0 的 xml 结果的操作

> ID：11855494
> 
> 赞同：0
> 
> 时间：2012-08-07T23:23:03.940
> 
> 标签：php

我的主页出现问题，所以我制作了一个测试页面来查找问题。我正在通过 XML 和任何玩超过 0.1 但不到 1 小时的游戏来获取玩游戏的时间，我试图乘以 60。

它捕获了数字，但它为它们返回了 0。任何大于 1 的东西都不会像预期的那样通过 if。

为什么不能正确执行操作？我怎样才能解决这个问题？

```
$games = $gamespage->games;
$hoursplayed = 0;

    foreach($games->game as $game)
    {
    $hoursplayed = $game->hoursOnRecord;
    if ($hoursplayed < 1 && $hoursplayed >= .1) {
    $hoursplayed = $hoursplayed * 60; }
    echo $game->name, "<br />";
    echo $hoursplayed, "<br /><br />";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:28:14.170

您可能需要先转换[值](http://de.php.net/manual/language.types.type-juggling.php)，否则这些是对象，您不能在 PHP 中乘以对象：

```
$hoursplayed = 0;

foreach ($gamespage->games->game as $game)
{
    $hoursplayed = (float) $game->hoursOnRecord;
    if ($hoursplayed < 1 && $hoursplayed >= .1) 
    {
         $hoursplayed = $hoursplayed * 60; 
    }
    echo $game->name, "<br />", $hoursplayed, "<br /><br />";
} 
```

# javascript - d3 - 如何确定元素何时离开屏幕？

> ID：11855496
> 
> 赞同：0
> 
> 时间：2012-08-07T23:23:05.523
> 
> 标签：javascript, map, svg, d3.js, offset

我正在构建一个美国地图，上面有 4000 个数据点，如果可能的话，我想在 d3 中进行。我注意到一次渲染这么多点会使 Chrome 速度变慢，并使 Firefox 停止运行。我想要的是一个 redraw() 函数，它执行以下操作：

```
topRightCorner = [x1,y1]
bottomLeftCorner = [x2,y2]
data = data.filter(function(d) {
    projectedCoordinates = proj(lat,lon)
    return(projectedCoordinates[0] < x1 
      && projectedCoordintes[0] > x2
      && projectedCoordinates[1] < y1
      && projectedCoordinates[1] > y2} 
```

即只保留投影后的点（在我的情况下为albersUsa）落在可见区域中。但是，我似乎找不到投影的可见尺寸。此功能可用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:27:24.040

自从我发布以来，我想出了一些可行的方法，并采用了不同的方法。

我在 AlbersUsa() 投影中做所有事情，这对于布局非常有用，因为我需要阿拉斯加和夏威夷，但对于编码来说不太好，因为它没有 invert() 函数。我使用了正常的 Albers().invert() 并且总是在 AK 和 HI 上画点，因为无论如何相对较少。

首先我定义了角落：

```
 projAlbers.scale(defaultScale * d3.event.scale);
    topLeft = projAlbers.invert([0,0]);
    bottomRight = projAlbers.invert([purewidth,pureheight]); 
```

然后我没有在每次重绘时投影所有坐标，而是将盒子的倒置坐标与真正的纬度/经度进行了比较：

```
 allCircles.remove();
        visibleDots = data.filter(function(d) {
            return (
                (d.latitude >=49) ||
                (d.longitude < -130) ||
                (d.latitude < topLeft[1] && d.latitude > bottomRight[1] &&
                d.longitude > topLeft[0] && d.longitude < bottomRight[0])); 
        }); 
```

这行得通 - 唯一的事情是，当您到达地图弯曲的新英格兰或太平洋西北部时，它不会绘制所有点，因为圆锥投影与我的视窗矩形 1:1 不对应。还在想那个。

（>= 49 和 < -130 总是自然地绘制夏威夷和阿拉斯加）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:36:16.150

一种方法：

首先，您需要定义地图中心的纬度/经度 (centerLatLng)。假设它是 lat=40.0 和 lng=97.0，大致位于美国毗连的中部。

您还想知道可见区域的尺寸（以像素为单位），例如 600x400。

然后你的边界可以计算如下：

```
var projectedCenter = proj(40, 97);
x1 = projectedCenter[0] - 300;// 300px is half the width of the visible area
x2 = projectedCenter[0] + 300;
y1 = projectedCenter[1] - 200;// 200px is half the height of the visible area
y2 = projectedCenter[1] + 200; 
```

请注意，在此示例中，与您的代码片段不同，`[x1, y1]`is`topLeftCorner`和`[x2, y2]`is `bottomRightCorner`。而且，过滤条件应该更像：

```
return
  projectedCoordinates[0] >= x1 &&
  projectedCoordintes[0] < x2 &&
  projectedCoordinates[1] >= y1 &&
  projectedCoordinates[1] < y2; 
```

# javascript - Javascript 匹配字符串中的符号

> ID：11855498
> 
> 赞同：0
> 
> 时间：2012-08-07T23:23:27.770
> 
> 标签：javascript, regex

我正在使用密码验证器脚本，并且在长度、字母、大写字母、数字和空格方面做得很好。但我不确定如何检测特殊字符。

这是我的 jquery 脚本：

```
<script language="javascript" type="text/javascript">
$(document).ready(function(){

$('#password1').keyup(function() {
var pswd = $(this).val();

//validate the length
if(pswd.length < 6 ){ $('#length').removeClass('valid').addClass('invalid'); }
//validate letter
if(pswd.match(/[A-z]/)){ $('#letter').removeClass('invalid').addClass('valid'); }
//validate capital letter
if(pswd.match(/[A-Z]/)){ $('#capital').removeClass('invalid').addClass('valid'); }
//validate number
if(pswd.match(/\d/)){ $('#number').removeClass('invalid').addClass('valid'); }
//validate no spaces
if(pswd.match(/\s/)){ $('#spaces').removeClass('valid').addClass('invalid'); }

//validate symbols
if(pswd.match(/\D/)){ $('#symbol').removeClass('invalid').addClass('valid'); }

});

}); 
</script> 
```

我承认我是从某个我不记得的地方离线的。当我测试脚本时，我注意到每当输入一个字母时，符号总是被验证。

if( pswd.match **(/\D/)){**错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:27:37.730

`\D`只是意味着“不是数字”，所以任何字母都可以。如果你想要“不是字母数字”，你想要`[^a-zA-Z0-9]`. 旁注，你`[A-z]`应该是`[A-Za-z]`或整个事情应该是`/[a-z]/i`

# javascript - jQuery SlideToggle() 在 FireFox 中不工作，在 Chrome 中工作

> ID：11855502
> 
> 赞同：5
> 
> 时间：2012-08-07T23:23:50.717
> 
> 标签：javascript, jquery, firefox, google-chrome

我的代码是这样的：

```
jQuery('.cart-module .cart-heading').bind('click', function() {
    if (jQuery(this).hasClass('active')) {
        jQuery(this).removeClass('active');
    } else {
        jQuery(this).addClass('active');
    }

    jQuery(this).parent().find('.cart-content').slideToggle('slow');
});
//--></script> 
```

您可以通过快速将产品添加到您的购物车中来进行测试，例如[https://muddydogcoffee.com/teas/176-organic-crimson-berry-fruit-tisane?device=iphone](https://muddydogcoffee.com/teas/176-organic-crimson-berry-fruit-tisane?device=iphone)并在此处前往购物车[https： //muddydogcoffee.com/shopping-cart](https://muddydogcoffee.com/shopping-cart)。

当您单击“估计运费和税金”时，它应该在其下方显示 DIV。但是，它仅适用于 Chrome，不适用于 Firefox。我能做些什么来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T00:13:12.980

我之前遇到过同样的问题，我还没有真正理解为什么会这样，但我找到了解决方法。

我不确定它是否也适用于您，但我所做的是我删除了样式表中的 display:none 并在 html 中内联添加了它。

如果有人可以解释这种奇怪的行为，那将真的很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-08T18:01:35.457

**添加`event.preventDefault();`并`event.stopPropagation();`使其适用于所有浏览器，包括 Firefox。请参阅下面的片段：**

```
jQuery('.cart-module .cart-heading').bind('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    if (jQuery(this).hasClass('active')) {
        jQuery(this).removeClass('active');
    } else {
        jQuery(this).addClass('active');
    }
 jQuery(this).parent().find('.cart-content').slideToggle('slow');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:53:46.630

*你有没有试过*：

```
$(document).ready(function() {
   // put all your jQuery goodness in here.
 }); 
```

# mysql - 将带有子查询的 MySQL 转换为 DQL 1.2

> ID：11855503
> 
> 赞同：2
> 
> 时间：2012-08-07T23:24:04.240
> 
> 标签：mysql, subquery, dql

[嗨，我有来自上一个问题](https://stackoverflow.com/questions/11839326/mysql-query-or-doctrine-1-2-query-get-most-recent-item-from-joined-table-and)的以下查询，需要将其转换为 Doctrine 1.2 的 DQL。然而事实证明，DQL 不支持连接中的子查询。

```
SELECT * FROM contact c
  LEFT JOIN
    (SELECT a1.contact_id, a1.date, a1.activity_type_id FROM activity a1
      JOIN (SELECT contact_id, MAX(DATE) DATE FROM activity GROUP BY contact_id) a2
        ON a1.contact_id = a2.contact_id AND a1.date = a2.date
     ) a
  ON c.id = a.contact_id  

WHERE a.activity_type_id = 2; 
```

我试图弄清楚如何在不诉诸多个查询的情况下以另一种方式做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T06:57:01.333

使用原则，您不应该使用原始 sql 将子查询嵌套到 where 条件中。在更复杂的场景中你会遇到麻烦。而是使用`createSubquery`显式告知子查询的教义，让教义将其编译为 DQL，然后将其嵌套到您的 where 条件中。所以你的查询应该是这样的：

```
$q->from('Contact c') 
  ->leftJoin('c.Activity a')
;

$subquery = $q->createSubquery()
    ->select("a1.contact_id, MAX(a1.date) a1.date")
    ->from("Activity a1")
    ->groupby("a1.contact_id")
;

$q->where('ROW (c.id, date) IN ('.$subquery->getDql().')')
  ->andWhere('a.activity_type_id = ?', $filterActivityTypeId)
; 
```

另一个例子可以在这里找到：

[https://www.philipphoffmann.de/2012/08/29/a-bulletproof-pattern-for-creating-doctrine-subqueries-of-any-complexity/](https://www.philipphoffmann.de/2012/08/29/a-bulletproof-pattern-for-creating-doctrine-subqueries-of-any-complexity/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:34:24.810

最终查询：

```
SELECT * FROM contact c
    LEFT JOIN activity ON c.id = contact_id
    WHERE ROW (c.id,DATE) IN (SELECT contact_id, MAX(date) date FROM activity  GROUP BY contact_id)
    AND activity_type_id = 2 
```

最终 DQL：

```
$q->from('Contact c') 
->leftJoin('c.Activity a')      
->where('ROW (c.id, date) IN (SELECT a1.contact_id, MAX(a1.date) a1.date FROM Activity a1 GROUP BY a1.contact_id)')
->andWhere('a.activity_type_id = ?', $filterActivityTypeId); 
```

# jquery - 同时使用 call(this) 并传递事件对象来停止传播

> ID：11855513
> 
> 赞同：0
> 
> 时间：2012-08-07T23:25:54.127
> 
> 标签：jquery

我有一小块像这样的jQuery：

```
$('.remove-header').on('click',function(){
  arc.event_handler.remove_header_click.call(this);
}); 
```

.remove-header 嵌套在一个类似的对象中，所以我需要调用 event.stopPropogation 但通常我会传递这样的引用：

```
$('.remove-header').on('click',function(event){
  arc.event_handler.remove_header_click(event);
}); 
```

我如何将这两者结合成一个电话？我尝试过的几件事似乎没有奏效。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:27:04.540

传递`event`对象可以简单地通过将其作为附加参数传递给`.call`：

```
$('.remove-header').on('click',function(event){
  arc.event_handler.remove_header_click.call(this, event);
}); 
```

查看. [_`.call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

但是您也可以像[jfriend00 显示](https://stackoverflow.com/a/11855525/218196)的那样直接停止事件处理程序内部的传播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:27:23.260

我不是 100% 确定我知道你在问什么，但你不能这样做：

```
$('.remove-header').on('click',function(event){
     event.preventDefault();
     arc.event_handler.remove_header_click.call(this, event);
}); 
```

# git - 带空格的 git rm 文件名

> ID：11855517
> 
> 赞同：30
> 
> 时间：2012-08-07T23:26:25.047
> 
> 标签：git

我尝试在 Xcode 中与命令行合并一个项目，我认为需要删除一个文件。它是存在于我要合并的分支中的文件，但不存在于我要合并的分支中。问题是名称中有空格：

```
TestService/TestService copy-Info.plist 
```

如何删除该文件？谢谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-07T23:29:32.397

与删除此类文件相同的方式`rm`：引用名称：

```
git rm "TestService/TestService copy-Info.plist" 
```

或者

```
git rm 'TestService/TestService copy-Info.plist' 
```

或者

```
git rm TestService/TestService\ copy-Info.plist 
```

根据您的 shell 和其他文件的名称，制表符补全可能对此有所帮助。打字

`$ git rm Te``Tab`

可能会完成目录名称：

`$ git rm TestingService/`

然后输入部分文件名和另一个选项卡：

`$ git rm TestService/Te``Tab`

将完成文件名，包括一个插入`\`以转义空格字符：

`$ git rm TestService/TestService\ copy-Info.plist`

但制表符补全通常仅根据所有可用文件扩展一个唯一前缀，因此这可能有效，也可能无效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T23:29:37.967

您可以引用文件名：

```
git rm "TestService/TestService copy-Info.plist" 
```

或者逃离空间：

```
git rm TestService/TestService\ copy-Info.plist 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T09:05:32.010

如果您使用 Ubuntu，有时您需要使用`git rm --cached -r "TestService/TestService copy-Info.plist"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T23:29:23.787

您是否尝试在文件名中添加引号？`"TestService/TestService copy-Info.plist"`我不是 100% 确定它是如何与 Git 一起工作的。

# sql-server-2008 - SQL Server 查询以检索给定 ID 集的最新记录

> ID：11855520
> 
> 赞同：0
> 
> 时间：2012-08-07T23:26:46.520
> 
> 标签：sql-server-2008

我有一张这样的桌子：

```
ModuleID   TimeStamp           Value   TotalPerDay
1          8/5/2012 9:00 PM    0.25     0.25
2          8/5/2012 9:00 PM    0.15     0.15
3          8/5/2012 9:00 PM    0        0
4          8/5/2012 9:00 PM    1.25     1.25
1          8/5/2012 10:00 PM   0.05     0.30
3          8/5/2012 10:00 PM   0.89     0.89
4          8/5/2012 10:00 PM   0.14     1.39
4          8/5/2012 11:00 PM   0.70     2.09
4          8/5/2012 12:00 PM   0.43     2.52
... 
```

我有 15000 个模块每小时更新这个表。此外，在午夜，这些`TotalPerDay`值会被重置。

我正在努力处理一个应该`TotalPerDay`为给定的集合提取最新值的查询`ModuleID`。

我尝试`GROUP BY`在`ModuleID`. 但是如何在`TotalPerDay`不使用聚合函数的情况下检索最新值？

顺便说一句，我使用的是 SQL Server 2008。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:44:43.323

如果我正确理解了您的问题，那么这应该会按模块为您提供每天的最新总数（如果时间戳是唯一的）：

```
; with MyCte (moduleId, TimeStamp)
AS(
    select moduleId, max(TimeStamp)
    from modules
    group by moduleId
)
select * from modules a
join MyCte b
on a.moduleId = b.moduleId
    and a.TimeStamp = b.TimeStamp 
```

根据您对 Gordon 的评论，您正在寻找每个模块每天的 SUM？如果是，那么你去：

```
select ModuleId, 
       convert(varchar,cast(TimeStamp as datetime),101),
       sum(totalPerDay) as GrandTotal
from modules
group by ModuleId, convert(varchar,cast(TimeStamp as datetime),101) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:31:45.387

所以你想要的查询是：

```
select moduleid, sum(value) as UpdatedTotalPerDay
from t
where moduleid in ( . . . )
group by moduleid 
```

这个查询有什么问题？如果您有关于 moduleid 的索引，则性能应该很好。

如果这有历史，那么您可能还想要条件

```
where cast(timestamp as date) = cast(getdate() as date) 
```

# c# - 有没有办法检测 Winform TextBox 的 Leave 事件是否由 Tab 或 Shift-Tab 或其他事件触发？

> ID：11855524
> 
> 赞同：0
> 
> 时间：2012-08-07T23:27:08.617
> 
> 标签：c#, winforms, .net-4.0, customization

我现在将跳过我的代码；应该更容易用文字来描述。

到目前为止，我有以下逻辑工作：

1.  我有一个输入文本框，当用户输入错误的文本时，我会显示一条错误消息并将焦点返回到文本框。
2.  当用户不输入任何内容或删除那里的内容并离开文本框时，它会进行一些处理，但其他方面的行为与它一样 - 按 Tab 顺序跳转到下一个控件。
3.  如果我关闭 Tab，如果我按下 Shift-Tab 或专注于我用鼠标单击的任何内容，则跳转到上一个控件。
4.  如果我为某些可以自动完成的文本输入唯一前缀，例如可以自动完成为“朝鲜蓟”的“articho”，则代码会自动填充旁边的另一个只读文本框并跳过到只读文本框的下一个邻居。**注意：如果我 Shift-Tab 使用相同的输入，那么它的作用相同，但在这种情况下我想执行不同的逻辑。**
5.  就像 4\. 但是如果我通过单击鼠标离开，那么代码会自动填充文本框 - 很好，但它也会选择我想要的控件。

现在坏掉的是**4的光头部分**。如果我尝试使用 Shift-Tab 向后循环所有交互式（而不是标签或禁用的）控件，我不能 - 我的自定义逻辑每 4\. 启动并将焦点向前发送。只有当我在手头的文本框中填写了一些东西时，这才是一个问题，但我仍然想修复这个边缘情况。

有什么想法吗？问题？

PS我不知道如何回答“你试过什么？” 除了说我使用 WinForms 几个月而且我不知道如何在这里继续之外的其他类型的问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:44:20.330

这就是我的做法。

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace LeaveTest {
    public partial class Form1 : Form {
        public Form1() {
            InitializeComponent();
        }

        protected override void OnLoad(EventArgs e) {
            base.OnLoad(e);
            textBox2.LostFocus += new EventHandler(textBox2_LostFocus);
        }

        void textBox2_LostFocus(object sender, EventArgs e) {
            Control newControl = GetCurrentControl();
            Control prevControl = GetPrevControl(textBox2);
            Control nextControl = GetNextControl(textBox2);

            if (newControl.Handle == prevControl.Handle) {
                MessageBox.Show("Case 4");
            }
        }

        [DllImport("user32.dll")]
        static extern IntPtr GetFocus();

        [DllImport("user32.dll")]
        static extern IntPtr GetNextDlgTabItem(IntPtr hDlg, IntPtr hCtl,
           bool bPrevious);

        [DllImport("user32.dll", SetLastError = true)]
        static extern IntPtr GetWindow(IntPtr hWnd, GetWindow_Cmd uCmd);

        enum GetWindow_Cmd : uint {
            GW_HWNDFIRST = 0,
            GW_HWNDLAST = 1,
            GW_HWNDNEXT = 2,
            GW_HWNDPREV = 3,
            GW_OWNER = 4,
            GW_CHILD = 5,
            GW_ENABLEDPOPUP = 6
        }

        private Control GetCurrentControl() {
            IntPtr hWnd = GetFocus();
            Control control = Control.FromHandle(hWnd);
            return control;
        }

        private Control GetNextControl(Control ctrl) {
            // I know the last parameter looks wierd, but it works
            IntPtr hWnd = GetNextDlgTabItem(ctrl.Parent.Handle, ctrl.Handle, true);

            Control control = Control.FromHandle(hWnd);
            return control;
        }

        private Control GetPrevControl(Control ctrl) {
            // I know the last parameter looks wierd, but it works
            IntPtr hWnd = GetNextDlgTabItem(ctrl.Parent.Handle, ctrl.Handle, false);
            Control control = Control.FromHandle(hWnd);
            return control;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:48:37.650

可能您可能想尝试文本框的 PreviewKeyDown 事件，您可以在其中识别被按下的组合键并执行不同的逻辑，如果它是 Shift + Tab 按键。

# oracle11g - 如何使用 Oracle express 11g 的“创建数据库”语句？

> ID：11855526
> 
> 赞同：2
> 
> 时间：2012-08-07T23:27:35.940
> 
> 标签：oracle11g, oracle-sqldeveloper

根据我的一篇文章（如下），Oracle 中似乎没有数据库之类的东西。我们在 MySQL 和 MS-SQL 中称为数据库的东西在 Oracle 中称为模式。如果是这样，那么为什么 oracle 文档会提到 create database 语句？作为记录，我使用的是 Oracle 11g 和 oracle SQL Developer GUI 工具。

Post- [如何使用Oracle 11g和SQL Developer创建一个小而简单的数据库？](https://stackoverflow.com/questions/11854403/how-to-create-a-small-and-simple-database-using-oracle-11-g-and-sql-developer)

下面给出了 oracle 文档中的 create database 语句。如果没有数据库的概念，那么这个命令是怎么出现的呢？

```
CREATE DATABASE
CREATE DATABASE [ database ]
{ USER SYS IDENTIFIED BY password
| USER SYSTEM IDENTIFIED BY password
| CONTROLFILE REUSE
| MAXDATAFILES integer
| MAXINSTANCES integer
| CHARACTER SET charset
| NATIONAL CHARACTER SET charset
| SET DEFAULT
{ BIGFILE | SMALLFILE } TABLESPACE
| database_logging_clauses
| tablespace_clauses
| set_time_zone_clause
}... ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T00:02:47.920

Oracle中有“数据库”的概念。术语“数据库”在 Oracle 术语中的含义与该术语在 MySQL 或 SQL Server 中的含义不同。

由于您使用的是 express 版本，Oracle`CREATE DATABASE`会在安装过程中自动运行该语句。一台机器上只能有 1 个速成版数据库。如果您要安装不同的版本，您可以选择是让安装程序创建数据库作为安装过程的一部分，还是`CREATE DATABASE`稍后通过语句手动执行。如果您刚刚学习 Oracle，最好让 Oracle 在安装时为您创建数据库——您只能通过命令行工具（而不是 SQL Developer）创建数据库，而且很少有人刚开始需要以安装程序没有提示您的方式调整数据库设置。

In Oracle, a "database" is a set of data files that includes the data files for the `SYS` and `SYSTEM` schemas which contain all the Oracle data dictionary tables, the data files for the `TEMP` tablespace where sorts and other temporary operations occur, and the data files for whatever schemas you want to create. In SQL Server and other RDBMSs, these would be separate "databases". In SQL Server, you have a `master` database, a `tempdb` database, additional database for different products (i.e. `msdb` for the SQL Server Agent), and then additional user-defined databases. In Oracle, these would all be separate schemas in a larger container that Oracle refers to as a "database".

Occasionally, a DBA will want to run multiple Oracle databases on the same server-- most commonly when there are different packaged applications that have different requirements about database versions or parameters. If you want to run application A that requires an 11.2 database and application B that doesn't support 11.2 yet, you would need to have two different databases on the server. The DBA could create a separate database and a separate instance but that doubles the memory requirements, doubles the number of background processes required to run the database, and generally makes things less scalable. It's necessary if you really want to run different versions of the database simultaneously but it's not ideal.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T23:47:32.757

回答您原始问题的人是正确的。上面的 DDL（数据定义语言）为模式准备了空间，类似于 MySQL 的“数据库”。上面的语句定义了模式的特征，例如时区、表的 MB 空间、编码字符集、root 帐户等。然后，您将发出 DDL 语句，例如您其他帖子中的那些来创建模式，这些语句定义了每个用户可以看。

# html - Html 显示而不是 IPHONE 和 IPAD 上的按钮

> ID：11855530
> 
> 赞同：0
> 
> 时间：2012-08-07T23:27:52.113
> 
> 标签：html, facebook, facebook-like, iweb

我正在使用 iWeb 设计一个网站，当我在 iphone 和/或 ipad 上访问我的网站时，我会显示 html 以及 Like 按钮。有人有任何线索吗？

网站：ncdoggydaycare.com

代码发布在这里：ncdoggydaycare.com/Blank.html

确保在 Blank.html 中使用大写字母“B”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:12:46.190

您需要在 HTML 页面之前将 /Site 添加到该链接。

它显示 HTML 的原因是因为您在完成 iframe 之前就关闭了它。干得好：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fncdoggydaycare&amp;send=false&amp;layout=box_count&amp;width=250&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height="90" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:250px; height:90px;" allowTransparency="true"></iframe> 
```

# api - 在 RESTful 应用程序中，我们如何区分“动作”和 HTTP 动词（GET、POST、PUT、DELETE）？

> ID：11855531
> 
> 赞同：4
> 
> 时间：2012-08-07T23:27:56.003
> 
> 标签：api, model-view-controller, http, url, rest

在 RESTful 应用程序中，我们如何区分“动作”和 HTTP 动词（`GET`、、、、`POST`）？`PUT``DELETE`

例如，据我了解，`GET`对资源的请求`/products`应返回所有产品的列表。应创建新产品的`POST`请求。`/products`那么，用户如何请求用于创建产品的原始表单？我最初的响应是`GET`对同一个 URI 的请求，但如上所述，它应该返回所有产品的列表 - 而不是用于创建产品的空白表单。

在我研究过的大多数框架中，这个问题是通过将“动作”作为 URI 的一部分来解决的。例如，`POST`请求`/products/create`将创建新产品，而`GET`请求`/products/create`将提供用于创建产品的空白表单。要获得所有产品的列表，将根据所讨论的框架对或、等`GET`提出请求。这种方法解决了上面的歧义，但它与我读过的关于传统 REST 设计的内容相冲突。`/products``/products/get``/products/read`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:40:18.093

恕我直言，最好的选择是将请求方法作为控制器操作的一部分。

假设您正在访问`http://who.cares/product/42`或`http://who.cares/product/42/specification`. 这个对网络服务器的查询将转换为`Product`控制器。动作名称应该通过结合请求方法和命令来创建：

```
DELETE "http://who.cares/product/42"

    controller: "Product", 
    action:     "deleteProduct()" 

GET "http://who.cares/product/42/details"

    controller: "Product", 
    action:     "getDetails()"

POST "http://who.cares/product/42/review"

    controller: "Product", 
    action:     "postReview()"

GET "http://who.cares/products/ 

    controller: "Products", 
    action:     "getProducts()"

POST "http://who.cares/products/ 

    controller: "Products", 
    action:     "postProducts()" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:35:06.640

这是 Rails 的例子

```
REST request path    |  action name | Description
---------------------|-------------------|-------------
GET    /profile/new  | new               | Render a form for creating the profile
POST   /profile      | create            | Create a the profile from the received data
GET    /profile      | show              | Render a the profile
GET    /profile/edit | edit              | Render a form for editing the profile
PUT    /profile      | update            | Update the profile based on the received data
DELETE /profile      | destroy           | Destroy the profile 
```

我没有看到任何冲突，想法是 url 是人类可读的，您可以引入新的 URI 来显示同一资源的不同表示。（如 profile/1/edit 和 profile/1）/profile/new - 为空的配置文件的地址（如 show 方法中的 profile/1、profile/2 .. 等）但如果你愿意，你可以建议 profile/1 /edit 是某种不同的 - profile/1/ 资源的嵌套资源，但我喜欢它只是 profile/1/ 资源的其他表示 =)

当您使用许多资源或使用一个资源时，使用复数和单数 URI 也是一个好主意，例如

```
/profile/1.html - gives you 1 resource
/profiles.html - gives you list of profiles 
```

# php - 使用php隐藏一个div

> ID：11855535
> 
> 赞同：6
> 
> 时间：2012-08-07T23:28:13.237
> 
> 标签：php, css, caching, html, hide

我目前正在隐藏一个基于 if 语句的 div。我使用的方法是，使用`echo`一种`css`风格`display: none`

这是我正在做的具体事情：

```
<style>
  #content{
    <?php
      if(condition){
          echo 'display:none';
      }
    ?>
  }
</style>
<body>
    <div id="content">
       Foo bar
    </div>
</body> 
```

我的问题是，这是隐藏 div 的好方法吗？浏览器是否有可能缓存样式并因此忽略`echo`-ed out`css`样式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T23:33:29.987

在你的 CSS（层叠样式表）中使用 Php 是不“正确的”，

此外，您可以在 HTML 中使用 Php：

```
<body>
    <?php if (condition){ ?>
        <div id="content">
           Foo bar
        </div>
    <?php } ?>
</body> 
```

使用此代码，不会出现 div 块，（并且您不会将它与 JavaScript 一起使用），您可以使用它来隐藏您的 div ：

```
 <body>
    <div id="content" <?php if (condition){ echo 'style="display:none;"'; } ?>>
       Foo bar
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T23:33:18.743

为什么不创建一个类：

```
<style>
    .hidden {
        display: none;
    }
</style> 
```

而不是用 PHP 应用它：

```
<div id="content" <?php print ( condition ? 'class="hidden"' : '' ); ?> > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:33:21.017

这不是隐藏 div 的最佳方式。由于 PHP 是在服务器端解析的，因此您不妨让 if 语句包含或排除 div，而不是回显 CSS 类。唯一对 CSS 类有用的情况是，如果您打算稍后使用 JavaScript 在页面上显示 div，而用户在页面本身上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T23:33:31.697

你可以：

```
<div runat="server" id="theDiv"> 

Code behind is
{
theDiv.Visible = False;
} 
```

或者

大多数人会使用javascript

这是以前的帖子，可以帮助您：

[Javascript if else 语句隐藏和显示 div](https://stackoverflow.com/questions/5484560/javascript-if-else-statement-to-hide-and-show-div)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T23:34:19.560

是的，这是隐藏 div 的标准方式。关于浏览器缓存，它不应该缓存它，因为它不在外部样式表中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T23:38:37.307

我通常尽量避免在 CSS 中使用 PHP 条件；尤其是内联 CSS（在同一页面上的 CSS）。

我会将你的 CSS 保存在它自己的 CSS 文件中，并使用 PHP 条件来向 DIV 添加一个“隐藏”类 - 或者 - 根本不回显 DIV。

```
<link rel="stylesheet" type="text/css" href="style.css" />
<body>
    <div id="content" <?php if(conditional) : ?>class="hide"<?php endif;?>>
       Foo bar
    </div>
</body> 
```

或者

```
<?php $class = (conditional) ? "hide" : ""; ?>

<link rel="stylesheet" type="text/css" href="style.css" />
<body>

    <div id="content" class="<?=$class?>">
       Foo bar
    </div>
</body> 
```

或者

```
<link rel="stylesheet" type="text/css" href="style.css" />
<body>

    <?php if (conditional) : ?>
    <div id="content">
       Foo bar
    </div>
    <?php endif; ?>
</body> 
```

很多时候需要输出 div 以便可以使用 JavaScript 重新显示（例如轮播、滑块等）

# ruby-on-rails - 即使 save_and_open_page 正确，Rspec 测试也因水豚而失败

> ID：11855538
> 
> 赞同：0
> 
> 时间：2012-08-07T23:28:15.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capybara, rspec2

这是相关的测试：

```
#spec/requests/posts_spec.rb
require 'spec_helper'
describe "Posts pages" do
  subject { page }
  describe "edit" do
    let (:post) { Post.order('release_date desc').first }
    before do 
        visit posts_path
        within(:css, "div#post_#{post.id}") { click_link "Edit" }
        save_and_open_page # has correct title
    end

    it { should have_selector('title', "Editing #{post.title}" ) } # fails
  end
end 
```

失败消息：

```
1) Posts pages edit 
 Failure/Error: it { should have_selector('title', "Editing #{post.title}" ) }
   expected css "Editing unde inventore illo accusamus" to return something 
```

但是，当页面通过 浏览器在我的浏览器中打开时`save_and_open_page`，标题是正确的，并且打开了正确的`edit`页面。我仔细检查了模板与测试中的任何拼写错误，结果匹配。

那么我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:01:51.067

你的语法`have_selector`是错误的。尝试这个：

```
it { should have_selector('title', :text => "Editing #{post.title}" ) } 
```

# html - GAE jinja2：如何在浏览器中自动弹出一个新窗口？

> ID：11855539
> 
> 赞同：1
> 
> 时间：2012-08-07T23:28:19.367
> 
> 标签：html, jinja2

有没有办法在 gae python jinja2 的浏览器中自动弹出一个新窗口？也就是说，一种执行 JavaScript 命令 window.open() 的方法？当用户单击按钮以查询数据存储时，应该打开新的弹出窗口。这样他就可以在新窗口中查询，选择一个查询结果，关闭弹出的窗口后回到上一个窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:35:40.860

据我所知，您需要在 JavaScript 中执行此操作。启动弹出窗口的页面需要使用在弹出窗口中选择的值进行更新（使用 JavaScript 执行此操作相对简单）。您仍然可以在弹出窗口中使用 jinja 模板，方法是对服务器进行回调以获取要在弹出窗口中显示的页面。

祝你好运，罗伯

# python - 删除一个蒙面数组 - python

> ID：11855540
> 
> 赞同：1
> 
> 时间：2012-08-07T23:28:25.833
> 
> 标签：python, arrays, numpy, ctypes, memmove

我有一个不包含数据值的 numpy 数组。我屏蔽了那些没有数据的值，这样它们就不会影响我的计算：

```
 array = numpy.ma.masked_values(array, options['ndv'], copy=False) 
```

然后我使用 memmove 将 numpy 数组放入共享的 ctypes 数组中：

```
def ndarray_to_shmem(array):
    """ Converts a numpy.ndarray to a multiprocessing.Array object.

    The memory is copied, and the array is flattened.
    """
    arr = array.reshape((-1, ))
    data = RawArray(_numpy_to_ctypes[array.dtype.type], 
                                    arr.size)
    ctypes.memmove(data, array.data[:], len(array.data))
    return data 
```

它返回以下堆栈跟踪：

```
ctypes.memmove(data, array.data[:], len(array.data))
ctypes.ArgumentError: argument 2: <type 'exceptions.TypeError'>: wrong type 
```

是否可以使用 memmove 将屏蔽数组移动到共享的 ctypes 数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:27:51.097

**首先**，您需要更改此行：

```
ctypes.memmove(data, array.data[:], len(array.data)) 
```

看起来像这样：

```
ctypes.memmove(data, array.data[:].ctypes.data, len(array.data)) 
```

**其次**，ctypes.memmove 不了解掩码数组。相反，只需将蒙版区域设置为 nan 进行复制：

```
masked = array.copy()
masked[array == options['ndv']] = np.nan

...

ctypes.memmove(data, masked.ctypes.data, len(masked)) 
```

# android - Android为要启用的按钮选择图像

> ID：11855541
> 
> 赞同：0
> 
> 时间：2012-08-07T23:28:27.550
> 
> 标签：android, button, bitmap

我有一个按钮，我希望它仅在用户选择了我制作此代码的图像时才启用，但它不起作用:(

```
Code updated 
```

请帮忙 ..

用户可以通过从图库中选择一张或捕获一张来获取图像..如果相关

更新：：

这些是我的相机和画廊代码

```
 btnGallery.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            Intent i = new Intent(
                    Intent.ACTION_PICK,
            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            startActivityForResult(i, RESULT_LOAD_IMAGE);
            btnNext.setEnabled(true);
        }
    });

    btnCamera.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
            startActivityForResult(intent, RESULT_LOAD_IMAGE);
            btnNext.setEnabled(true);
        }
    }); 
```

这是下一个按钮代码

```
 btnNext.setEnabled(false);
    btnNext.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {      
            MpClick.start();
            if (btnNext.isEnabled() == false)
            { 
                   Toast.makeText(StartActivity.this,
                            "Please get an image first.", Toast.LENGTH_LONG)
                            .show();
            }
            else
            {
                Intent next = new Intent(StartActivity.this, Option.class);
                startActivity(next);
            }
        }
        });
} 
```

有时它会将您带到选项活动，有时则不会，并且消息永远不会显示..我希望当您单击下一个按钮并且您没有选择图像时显示消息

但如果你选择一张图片，它会带你到选项活动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:34:01.617

这里有几个问题：

1.  您正在`if`以 ... 结束您的陈述，`;`不要这样做。
2.  您正在检查`setEnabled`而不是`isEnabled`.
3.  你没有围绕你的条件`()`。
4.  您不需要检查`else if`，因为您只检查与第一个条件相反的情况。`else`在这里会做得很好。

您应该改为使用：

```
 btnNext.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {               
        if (btnNext.isEnabled() == false)
        { 
               Toast.makeText(StartActivity.this,
                        "Please get an image first.", Toast.LENGTH_LONG)
                        .show();
        }
        else
        {
            Intent next = new Intent(Main.this, Editing.class);
            startActivity(next);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:32:50.980

```
 btnNext.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {               
            if (!btnNext.isEnabled())
            { 
                   Toast.makeText(StartActivity.this,
                            "Please get an image first.", Toast.LENGTH_LONG)
                            .show();
            }
            else
            {
                Intent next = new Intent(Main.this, Editing.class);
                startActivity(next);
            }
        }
      }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:36:00.117

使用**if(btnNext.setEnabled(false))**而不是 if **btnNext.setEnabled(false);**

并使用**else if(btnNext.setEnabled(true))**而不是**else if btnNext.setEnabled(true);**

# python - SWIG/Python 检测到 wxPasswordEntryDialog 内存泄漏

> ID：11855546
> 
> 赞同：0
> 
> 时间：2012-08-07T23:29:15.847
> 
> 标签：python, memory, wxpython, swig, memory-leaks

我正在使用 wx.PasswordEntryDialog 从用户那里获取密码，但是每次创建 PasswordEntryDialog 时都会收到此错误：

```
swig/python detected a memory leak of type 'wxPasswordEntryDialog *', no destructor found. 
```

这是导致它的地方之一：

```
def getpass():
    dialog = wx.PasswordEntryDialog(None, 'Enter your password')
    if dialog.ShowModal() == wx.ID_OK:
        value = dialog.GetValue()
    else:
        value = None
    del dialog
    return value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:33:19.063

我发现您可以通过替换该行来摆脱该消息

```
del dialog 
```

和

```
dialog.Destroy() 
```

（如果相关的话，我正在使用 wxWidgets/wxPython 2.9.3。）

# android - 授权错误

> ID：11855550
> 
> 赞同：0
> 
> 时间：2012-08-07T23:29:34.250
> 
> 标签：android, api, http, authentication, post

我正在尝试连接到我的公司数据库，但不断收到身份验证错误。这是尝试访问 api 所在网站的代码。这些 api 与数据库连接。

```
DefaultHttpClient httpClient = new DefaultHttpClient();
        URL url1 = new URL ("http://www.xxxxxxx.com/");
        String encoding = new   String(org.apache.commons.codec.binary.Base64.encodeBase64
                (org.apache.commons.codec.binary.StringUtils.getBytesUtf8("xx:xxxxxx"))
                );
        HttpPost httpPost = new HttpPost(url);
        httpPost.setHeader("Authorization", "Basic" + encoding);           
        httpPost.setEntity(new UrlEncodedFormEntity(params)); 
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:39:53.517

可能是您的授权标头中缺少空格吗？

```
httpPost.setHeader("Authorization", "Basic " + encoding); 
```

# c - C下标值既不是数组也不是指针也不是向量

> ID：11855552
> 
> 赞同：2
> 
> 时间：2012-08-07T23:29:53.693
> 
> 标签：c, arrays, pointers

```
int * matrixsum(int *a,int *b,int n,int m)
{
    int *p=NULL,i,j;
    p=malloc(sizeof(int)*n*m);
    if(p==NULL)
    {
        printf("Error!\n");
        exit(1);
    }
    for(i=0;i<n;i++)
    {
        for(j=0;j<m;j++)
        {
            *(p+i*n+j)=*(a+i*n+j)+*(b+i*n+j);
        }
    }
    return p;
} 
```

我的问题是关于这条线`*(p+i*n+j)=*(a+i*n+j)+*(b+i*n+j);`：如果我用它替换它，`p[i][j]=a[i][j]+b[i][j];`我会收到以下错误 3 次：

> 错误：下标值既不是数组也不是指针也不是向量

为什么？据我所知，它们是一回事。

我的编译器是 gcc 版本 4.6.3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T23:37:25.707

它们根本不是一回事——这就是编译器抱怨的原因！你可以写：

```
p[i*n+j] = a[i*n+j] + b[i*n+j]; 
```

的类型`p`是`int *`; 因此 的 类型`p[i]`是`int`，并且您不能为`int`. 您必须传递 的 2D 数组`int`或指向 的指针数组，`int`才能使用该`p[i][j]`符号。例如，在 C99 中（使用可变长度数组——并注意参数的重新排序）：

```
int *matrixsum(int n, int m, int a[m][n], int b[m][n])
{
    ...
    p[i][j] = a[i][j] + b[i][j];
    ...
} 
```

或者，在设置中相当小心，您可以使用：

```
int *matrixsum(int **a, int **b, int m, int n)
{
    ...
    p[i][j] = a[i][j] + b[i][j];
    ...
} 
```

请注意，对于后一个示例，您不能简单地编写：

```
int a[4][4] = { ... };
int b[4][4] = { ... };
int r = matrixsum(a, b, 4, 4); 
```

`int **`二维数组的内存分配与符号所需的完全不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:32:13.427

编译器只是告诉您不能取消引用整数。`p`只是一个`int`指针 - 类似`a`, `b`, 和`c`. 您可以通过在缓冲区中执行棘手的指针算术来进行*模拟* `p[i][j]`，但您不能取消引用`int`.

这些变量必须`int **`在您可以将它们用作二维数组之前，使用数组下标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:34:26.167

> 据我所知，它们是同一回事

是的，您已经正确地从线性索引转换为下标，但是所有 3 个变量的类型都错误，无法应用这些下标。它们必须是类型`int **`才能使您能够进行二维数组索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T23:44:18.047

在第二种形式中，编译器如何猜测 n 是您的选项卡（不是他的）的第一个维度的长度？计算 &t[i][j] == *(t + i * n + j)

# objective-c - 关于视图和 UISegmented Control

> ID：11855555
> 
> 赞同：0
> 
> 时间：2012-08-07T23:30:17.390
> 
> 标签：objective-c

我对这些观点有疑问。现在我创建了一个视图控制器（根视图），其中包含表视图。单击单元格将进入详细视图，其中我有 UISegmented 控件和四个选项。单击任何分段控制按钮，根据选择加载数据（我有 switch 语句，它根据它加载表视图数据）。所有这些都工作正常。

问题是：例如，考虑我有四个 UISegmented 按钮 - A、B、C、D。单击 A 将加载带有一些数据的表格视图 - 单击 A 视图中的特定单元格应该带我到具有不同视图的不同视图里面的内容。同样，单击 B 将加载包含一些数据的表格视图 - 单击 B 视图中的特定单元格应加载不同的视图。

由于这是一个 UIsegmented 控件，我不能使用每个按钮将其连接到不同的视图。我想知道我是否可以以编程方式编写代码。

谁能回答我是否可以以编程方式完成？

我感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:55:03.477

当然，当按下特定段时，您可以做任何您想做的事情。`UISegmentedControl`首先，当您的一部分被按下时，您注册以接收通知，如下所示：

```
[segmentedControl addTarget:self
                     action:@selector(segmentPressed:)
           forControlEvents:UIControlEventValueChanged]; 
```

如果您愿意，也可以在 Interface Builder 中执行等效操作。然后在您的操作中，您将执行以下操作：

```
- (IBAction)segmentPressed:(id)sender
{
    UISegmentControl *segmentControl = sender;

    if (segmentControl.selectedSegmentIndex == 1) {
        // Do whatever you want when the first segment is selected
    } else if (segmentControl.selectedSegmentIndex == 2) {
        // Second segment selected
    }
    // ....
} 
```

# c# - 带有标头的 Web 服务

> ID：11855556
> 
> 赞同：0
> 
> 时间：2012-08-07T23:30:21.520
> 
> 标签：c#

我正在挑选我的同事制作的原型。不幸的是，我完全是 C# 和 Web 服务的菜鸟。服务中的一种方法如下：

```
 [WebGet(UriTemplate = "GetTestData/{file}")]
    public Stream GetTestData(string file)
    {
        string fileName =
           "\\filePath" + file;
        if (File.Exists(fileName))
        {
            FileStream stream = File.OpenRead(fileName);
            if (WebOperationContext.Current != null)
            {
                WebOperationContext.Current.OutgoingResponse.ContentType = "text/.txt";
            }
            return stream;
        }
        return null;
    } 
```

当我从我的设备输入 URL 时

```
http://filepath/myFile1.txt 
```

然后我得到 myFile1.txt。她说是休息服务。有没有一种简单的方法可以向其中添加标头，以便我可以一次向设备发送所有数据？

就像在我可以要求的设备上一样

```
http://filePath/myFiles 
```

并获取 myFile1-myFile5.txt？现在，粗略的实现是我必须单独询问每个文件。让服务器负责发送数据包似乎更好吗？还是这破坏了她的休息服务？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:32:50.590

> 有没有一种简单的方法可以向其中添加标头，以便我可以一次向设备发送所有数据？

我不太清楚你在这里的意思，我认为更多的上下文会有所帮助。如果客户端（设备）能够接受包含多个文件的响应并且这是一个常见的用例，那么可以肯定的是，其余资源可以返回多个文件。例如，您可以实现一个额外的资源：`http://filePath/myFiles`像这样：

```
[WebGet(UriTemplate = "myFiles")]
public Stream GetAllTestData()
{
   // get all files, merge into stream and return.
} 
```

此外，在您提供的示例中，为了更加 RESTful，Content-Type 应该是“text/plain”而不是“text/.txt”，而不是在未找到文件时返回 null 应该是带有 404 状态代码的 WebException提高。

# javascript - 如何使用 javascript 在正则表达式替换中表示花括号

> ID：11855557
> 
> 赞同：1
> 
> 时间：2012-08-07T23:30:32.603
> 
> 标签：javascript, regex, replace, escaping, curly-braces

我希望能够进行以下字符串替换：

```
Input: 3^4
Output: 3^{4} 
```

我编写了以下正则表达式来解决它：

```
outputString=outputString.replace(/\^(-?[1-9][0-9]*)/g,"\^"+"{"+"$1"+unescape('}')); 
```

输出将大括号转义为：`3^/{4/}`

有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:34:32.227

试试这个正则表达式：

```
'3^4'.replace(/\^(\d+)/, '^{$1}');  // -> 3^{4} 
```

# c++ - 在 Windows server 2008 r2 中禁用网络适配器的 C++ 示例

> ID：11855567
> 
> 赞同：0
> 
> 时间：2012-08-07T23:31:56.157
> 
> 标签：c++, winapi, network-programming, windows-server-2008-r2

在 Windows Server 2008 R2 上，我们有多个网络适配器。我们有一个必须与特定网络适配器绑定的遗留程序。它并不总是选择正确的。我需要禁用不正确的网络适配器，然后启动程序，然后再次启用网络适配器。我无法禁用适配器。有人可以提供一个 C++ 示例吗？编译器是 Embarcadero C++ XE2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:41:34.313

我认为没有必要使用c++。批处理文件可以做到。

该文件如下：

要禁用接口运行：

```
netsh interface set interface “Local Area Connection” DISABLED 
```

要启用接口运行：

```
netsh interface set interface “Local Area Connection” ENABLED 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-24T09:55:23.567

感谢 Pablo，这是 c++ 命令：

```
HINSTANCE retVal = ShellExecute(NULL, "open", "cmd", "/c netsh interface set interface \"Local Area Connection\" ENABLED", NULL, SW_NORMAL); 
```

# asp.net-mvc-3 - ASP.NET MVC CheckboxListFor 值未回发

> ID：11855568
> 
> 赞同：0
> 
> 时间：2012-08-07T23:31:59.453
> 
> 标签：asp.net-mvc-3, razor

绝望中，我创建了一个 CheckboxListFor 方法，如下所示（我从某个地方撕掉了这个，可能在这里）。

```
public static MvcHtmlString CheckBoxListFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, IEnumerable<TProperty>>> expression, MultiSelectList multiSelectList, object htmlAttributes = null)
        {
            //Derive property name for checkbox name
            var body = expression.Body as MemberExpression;
            string propertyName = body.Member.Name;

            //Get currently select values from the ViewData model
            IEnumerable<TProperty> list = expression.Compile().Invoke(htmlHelper.ViewData.Model);

            //Convert selected value list to a List<string> for easy manipulation
            var selectedValues = new List<string>();

            if (list != null)
            {
                selectedValues = new List<TProperty>(list).ConvertAll(i => i.ToString());
            }

            //Create div
            var divTag = new TagBuilder("div");
            divTag.MergeAttributes(new RouteValueDictionary(htmlAttributes), true);

            //Add checkboxes
            foreach (SelectListItem item in multiSelectList)
            {
                divTag.InnerHtml += String.Format("<div><input type=\"checkbox\" name=\"{0}\" id=\"{0}_{1}\" " +
                                                    "value=\"{1}\" {2} /><label for=\"{0}_{1}\">{3}</label></div>",
                                                    propertyName,
                                                    item.Value,
                                                    selectedValues.Contains(item.Value) ? "checked=\"checked\"" : "",
                                                    item.Text);
            }

            return MvcHtmlString.Create(divTag.ToString());
        } 
```

我这样称呼它：

```
 <h2>Rights</h2>
    <div>
        @Html.CheckBoxListFor(m=>m.SelectedRights, Model.Rights)
    </div> 
```

它可以正确渲染。但是，所选值不会回发。我该如何解决这个问题？任何人都可以提出一个好的起点吗？

**更新：** 我认为添加更多细节可能会更好，因为这件事可能有多个问题。

复选框的 ID 像“SelectedRights_6”一样出来。这是我目前正在使用的 ViewModel。

```
 public class RoleSingleViewModel : BaseEntitySingleViewModel
    {
    public override int ListViewColSpan
    {
        get { return 6; }
    }

    public string Name {get;set;}
    public string Description {get;set;}

    public IEnumerable<SelectListItem> Sites {get;set;}
    public int SiteId{get;set;}
    public string SiteText{get;set;}
    public override string TypeName
    {
        get { return "Role"; }
    }

    public MultiSelectList Rights { get{return new MultiSelectList(AllRights, "Key", "Value", SelectedRights);}}
    public List<KeyValuePair<int, string>> AllRights { get; set; }
    public List<KeyValuePair<int, string>> SelectedRights { get; set; }
} 
```

另外，控制器上的更新方法也是如此。我在抛出异常的行上设置了一个断点并检查了 updateItem。未填写 Rights、AllRights 和 SelectedRights 的值（我猜这是预期的行为）。我在想我的问题可能与我的 ViewModel 的结构有关。我应该如何改变它？

```
[HttpPost]
public ActionResult Edit(RoleSingleViewModel updateItem)
    {
      throw new NotImplementedException();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:58:31.343

我发现我需要初始化一个集合才能绑定结果，即必须在绑定之前初始化 For 属性。模型绑定器不会创建集合，但如果您已经定义了集合，它将添加项目：

在你的模型上

```
private IEnumerable<int> checkedItems = new List<int>();

public IEnumerable<int> CheckedItems
{ 
    get { 
        return this.checkedItems ;
    }

    set {
        this.checkedItems  = value;
    }
} 
```

在剃刀视野中

```
@Html.CheckBoxListFor(CheckedItems, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:09:48.260

从复选框中删除**ID 属性。**当它将**选定的值（仅）**发布到服务器时，它将是整数或字符串数​​组（我从未用字符串测试过）。所以你的模型/参数应该有相同的属性名称（**它应该是一个数组**）。

# android - 在android中重置动画效果

> ID：11855570
> 
> 赞同：2
> 
> 时间：2012-08-07T23:32:20.713
> 
> 标签：android, animation

我正在对按钮执行淡入淡出效果。

```
AnimationSet set = new AnimationSet(true);
Animation animation2 = new AlphaAnimation((float) 0, 1);
animation2.setDuration(1500);
animation2.setRepeatMode(0);
set.addAnimation(animation2);
set.setFillAfter(true); // leaves the animation in its final status
btn.startAnimation(set); 
```

我正在使用使`setFillAfter(true)`按钮可见的选项。这很好用。现在我想再次执行动画，**但不能再将我的按钮设置为在屏幕上不可见**，除非我重新启动应用程序。（也试过 invalidate() 没有成功......）

任何想法都会“如此”受欢迎。

提前致谢！保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:35:34.260

谢谢你的帮助。实际上我在developpers doc上找到了答案。“查看动画”（我尝试过）和“属性动画”之间存在很大差异。基本上，视图动画会重绘您正在处理的视图的图像，但不会影响原始视图。因此，如果您从示例中转换视图，则在屏幕上视图会移动，但以编程方式保持在其初始状态，并将在其原始位置捕获事件。

这是解释：

> 属性动画与视图动画有何不同 视图动画系统提供了仅对视图对象进行动画处理的功能，因此如果您想要为非视图对象设置动画，您必须实现自己的代码来执行此操作。视图动画系统也受到限制，因为它只公开了视图对象的几个方面以进行动画处理，例如视图的缩放和旋转，而不是背景颜色。
> 
> 视图动画系统的另一个缺点是它只修改了视图的绘制位置，而不是实际的视图本身。例如，如果您为按钮设置动画以在屏幕上移动，则该按钮可以正确绘制，但您可以单击该按钮的实际位置不会改变，因此您必须实现自己的逻辑来处理此问题。
> 
> 使用属性动画系统，这些约束被完全移除，您可以对任何对象（视图和非视图）的任何属性进行动画处理，并且对象本身实际上是被修改的。属性动画系统在执行动画的方式上也更加健壮。在较高级别上，您可以将动画师分配给您想要制作动画的属性，例如颜色、位置或大小，并且可以定义动画的各个方面，例如多个动画师的插值和同步。
> 
> 然而，视图动画系统需要更少的时间来设置并且需要更少的代码来编写。如果视图动画完成了您需要做的所有事情，或者如果您现有的代码已经按照您想要的方式运行，则无需使用属性动画系统。如果出现用例，将两种动画系统用于不同的情况也可能有意义。

[http://developer.android.com/guide/topics/graphics/prop-animation.html](http://developer.android.com/guide/topics/graphics/prop-animation.html)

就我而言，我使用了 Property 动画，它符合我所有的动画需求。谢谢您的支持！:)

保罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:47:31.860

取出`set.setFillAfter(true);`并使用 animationListener 将 Button 设置为在动画结束时可见，它将为用户提供相同的效果，您将能够再次使其不可见`View.setVisibility(View.INVISIBLE);`

```
AnimationListener animListener;

animListener = new Animation.AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animation animation) {
            btn.setVisibility(View.VISIBLE);
        }
};
animation2.setAnimationListener(animListener); 
```

# android - 如何在选项卡 Activity 的片段中使用 onCreateOptionsMenu？（夏洛克动作条）

> ID：11855581
> 
> 赞同：32
> 
> 时间：2012-08-07T23:33:26.950
> 
> 标签：android, android-fragments, actionbarsherlock, android-optionsmenu

我在我的选项卡 Activity 中覆盖了以下方法，它可以正常工作，但我想要每个片段的特定选项菜单。当我把它放在我的片段中并按下菜单按钮时，什么也没有发生。

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.activity_calc, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-08T00:02:48.570

您需要先调用`setHasOptionsMenu(true)`您的片段，然后它才能参与操作栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:13:58.463

我建议您查看[http://code.google.com/p/sherlock-demo/](http://code.google.com/p/sherlock-demo/)。正如 BackpackOnHead 所描述的，它使用 ViewPager + ActionBar Tabs 让您在 Activity 中的 Fragment 之间导航两种不同的方式。在本例中，它是 API Demos 示例应用程序的 FragmentTabs 部分，移植到 ActionBarSherlock。LoaderThrottle Fragment 尤其有其自己的 OptionsMenu 项。

# tomcat - 如何通过 WSO2 将 JAVA_HOME 传递给 Tomcat

> ID：11855585
> 
> 赞同：0
> 
> 时间：2012-08-07T23:33:37.973
> 
> 标签：tomcat, wso2, java-home

我有 WSO2 Apps Server 在 Windows 7 上作为服务运行
。JAVA_HOME 设置为 `C:\Program Files\Java\jdk1.7.0_05`
我可以访问管理屏幕，`https://localhost:9443`这一切都很好

我已取消注释 wrapper.conf 中的行并重新安装服务并重新启动它

```
#Java Classpath (include wrapper.jar)  Add class path elements as
#needed starting from 1
wrapper.java.classpath.1=lib/wrapper-3.2.3.jar
wrapper.java.classpath.2=bin/*.jar
wrapper.java.classpath.3=repository/conf
wrapper.java.classpath.9=%JAVA_HOME%/lib/tools.jar 
```

当我尝试使用 /example Web 应用程序 JSP 脚本时

```
/example/jsp/jsp2/el/basic-comparisons.jsp 
```

我从 Tomcat 收到一个错误

```
Unable to find a javac compiler;
com.sun.tools.javac.Main is not on the classpath.
Perhaps JAVA_HOME does not point to the JDK.
It is currently set to "C:\Program Files\Java\jdk1.7.0_05\jre" 
```

我可以将 tools.jar 复制到 jre\lib\ext 并让它工作，但这感觉就像一个障碍。在哪里/为什么将 jre 位添加到 JAVA_HOME 并且包装器不应该将 tools.jar 的正确路径传递给 Tomcat？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-05T05:00:19.210

在运行 WSO2AS 的某些脚本中设置 JAVA_HOME 存在问题。如果您正确地将 JAVA_HOME 设置为 jdk，那么它可能是在启动您的服务的脚本中重写的。您需要检查 WSO2AS 的文件夹“bin”以找到设置 JAVA_HOME 的脚本。

# sql - SQL 语法错误

> ID：11855589
> 
> 赞同：-5
> 
> 时间：2012-08-07T23:34:09.783
> 
> 标签：sql, eclipse, derby

```
CREATE TABLE USER (
  ID BIGINT NOT NULL,
  PHONENUMBER VARCHAR(255), 
  ZIPCODE VARCHAR(255),  
  STATE VARCHAR(255), 
  USERNAME VARCHAR(255) NOT NULL, 
  STREETNAME VARCHAR(2000), 
  PASSWORD VARCHAR(255), 
  CITY VARCHAR(255), 
  PRIMARY KEY (ID)
) 
```

我在 Eclipse 中运行一个动态 Web 项目，并尝试使用 JPA 将我的项目连接到数据库 DERBY。但是，它说此语句存在一些语法问题。怎么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:38:22.503

`USER`是保留字。如果您坚持使用它，请将其用方括号括起来。理想情况下，您应该只重命名您的表。

```
CREATE TABLE [USER] (
    ID BIGINT NOT NULL,
    PHONENUMBER VARCHAR(255),
    ZIPCODE VARCHAR(255),
    STATE VARCHAR(255),
    USERNAME VARCHAR(255) NOT NULL,
    STREETNAME VARCHAR(2000),
    PASSWORD VARCHAR(255),
    CITY VARCHAR(255),
    PRIMARY KEY (ID)) 
```

# jquery - 使用 JQuery 识别动态局部视图中的特定行

> ID：11855600
> 
> 赞同：0
> 
> 时间：2012-08-07T23:35:09.387
> 
> 标签：jquery, html, asp.net-mvc

我有一个不是强类型的部分视图。它是动态的：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<dynamic>" %>

<%@ Import Namespace="Student.Models" %>

<div>
<table id="TA">
        <tr>
            <th>Teaching Assistant</th>
            <th>Course ID</th>
            <th>Day</th>
            <th>Delete Row</th>
        </tr>
</table>
</div>

<div>
<table id="StudentAction">
    <tr>
       <td><select name="TeachingAssistant"></select> </td>
       <td><select name="CourseID"></select></td>
       <td><select name="Day"></select></td>
       <td><input name="delete" type="image" src="/delete.png"  onclick="javascript:delete('this')"/></td>
   </tr>

</table>
</div> 
```

现在，每次从“TeachingAssistant”选择列表中选择一个新值时，我都会使用 JQuery 添加一个新行。

此外，还有一个删除图像，单击时应删除该特定行。如何根据单击的删除图像识别特定行？例如，如果单击第三行的删除图像，那么我如何识别第三行并将其发送到 JQuery？例如，我想识别单击删除图像的行并将其发送到下面 JQuery 中的删除函数，使用“this”不起作用，还有其他方法吗？这又不是一个强类型视图，它是动态的。

```
function delete(val) {

    $(this).parent().remove();

} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:54:45.433

添加一些类来触发事件。

```
<td><input name="delete" type="image" src="/delete.png" class="delete"/></td> 
```

然后使用`closest`获取它的行。

```
$('#StudentAction').on('click', '.delete', function() {
    $(this).closest('tr').remove();
}); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/VRYWT/)

或旧版本：

```
$('#StudentAction .delete').live('click', function() {
    $(this).closest('tr').remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:27:53.570

如果 deleteThis 函数与您的表在同一个 html 页面中定义。然后以下应该工作。

```
/* This will send the table row to deleteThis function */
<td>
    <input type =".." onclick="javascript:deleteRow($(this).parent().parent())"/>
</td> 
```

`$(this)`指`input`代元素，此输入元素的父级为您提供`td`，而 td 的父级为您提供`tr`.

```
function deleteRow(val) {
    $(val).remove();

} 
```

如果您的 deleteThis 函数是在外部 .js 文件中定义的，请[在此处](https://stackoverflow.com/questions/5108139/javascript-linking-onclick-to-a-js-to-a-file)检查。

由于您想将 tr 元素传递给函数，因此我提出了此解决方案。不过，`$(this).parent().parent()`长得挺难看的。我建议使用 Ricardo Lohmann 的解决方案。

# java - 解析循环静态引用

> ID：11855601
> 
> 赞同：3
> 
> 时间：2012-08-07T23:35:25.223
> 
> 标签：java, static, circular-reference, initializer

我有 2 个静态初始化程序试图互相调用：

*   配置类中的一个，从属性文件中读取配置参数；
*   LoggerFactory 类中的一个，它设置默认的日志记录参数。

问题是它们相互引用：

*   配置类需要记录器在读取属性文件时记录潜在的 I/O 问题。
*   LoggerFactory 需要配置文件来设置日志文件名、日志模式和默认日志级别。

这显然是不对的，我在这里和那里得到了一些 NPE。

有处理这种情况的标准方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:18:18.063

使用不需要配置的默认记录器，并在加载可配置记录器时被替换。这样您就可以以简单的方式轻松解决循环依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:41:34.257

您可以分离记录器的配置，并在配置类之前对其进行初始化。尽管这并不理想，但我已经在几个项目中看到了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:55:42.030

您应该创建一个记录器，该记录器在程序启动时加载，但稍后在创建可配置的记录器时将其覆盖。

# google-maps - 放大谷歌地图上的标记图像

> ID：11855603
> 
> 赞同：0
> 
> 时间：2012-08-07T23:35:58.053
> 
> 标签：google-maps, google-maps-markers

如何放大标记的图标？我有更多图标的图像，并通过在 *.png 图像中选择位置来浏览它们。

```
sIcons[c] = new google.maps.MarkerImage(
            pgePath + 'img/icons.png',
            new google.maps.Size(40, 45),
            new google.maps.Point(c * 40, 90),
            new google.maps.Point(22, 31)
        ); 
```

40x45 是大图像 (icons.png) 中一个图标的大小。但我需要将其显示得更大。

我试图用“new google.maps.Size(80, 90)”填充第 5 个参数，但它没有用。

```
sIcons[c] = new google.maps.MarkerImage(
            pgePath + 'img/icons.png',
            new google.maps.Size(40, 45),
            new google.maps.Point(c * 40, 90),
            new google.maps.Point(22, 31),
            new google.maps.Size(80, 90)
        ); 
```

我不想上传更大的图片——我需要使用这个我已经在其他地方使用过的原始大小的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:34:55.933

这是[一个](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/councilsites_co_uk_carparks_scale_kml.xml) 显示使用图标进行缩放的示例（但不是精灵，我没有精灵的示例）

# html - 在 Windows Phone 7.5 上的 Internet Explorer 中强制使用数字键盘

> ID：11855609
> 
> 赞同：1
> 
> 时间：2012-08-07T23:36:52.540
> 
> 标签：html, windows-phone-7, jquery-mobile

嗨，我正在为**Windows Phone 7.5**开发一个 Jquery Mobile 网站，有一个输入字段，如下所示：

```
<input type="number" /> 
```

不幸的是，它显示了一个字母键盘。

有没有办法强制使用数字键盘？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-17T08:36:02.633

我发现使用：

```
<input type="tel"> 
```

最适合我。对于 windows phone（在 8.1 上测试），模式技巧不起作用（即使它适用于 iOS 和可能的 android）。我不想使用 type="number" 因为在 html 上会显示箭头以在大多数浏览器中选择数字，而我正在为邮政编码这样做，所以这没有意义。我没有看到在 html 端使用 'tel' 类型有任何不利之处。

我知道这是一个老问题，但由于那里没有很多 WP 答案，它可能会对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:53:15.073

尝试将输入类型设置为：

*   类型="电子邮件"
*   类型="网址"
*   类型="电话"

或者（参考：[iOS 的文本、Web 和编辑编程指南](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)）

```
<input type="text" pattern="\d*"></input> 
```

有关的：

*   [jQuery Mobile 有数字小键盘吗？](https://stackoverflow.com/questions/8619459/is-there-a-numeric-keypad-for-jquery-mobile)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T23:36:30.613

要强制使用数字键盘，请使用以下命令：

```
<input type="text" pattern="[0-9]" /> 
```

来源：[http ://www.w3schools.com/html5/att_input_pattern.asp](http://www.w3schools.com/html5/att_input_pattern.asp)

# javascript - Jquery/javascript：加载页面时不需要的重复功能

> ID：11855611
> 
> 赞同：0
> 
> 时间：2012-08-07T23:36:58.020
> 
> 标签：javascript, jquery, procedural-programming

我有一个基于用户通过单击功能创建某些 div 的 Web 应用程序。当用户添加 div 时，我还赋予他们删除所述功能的能力。每次用户添加一个 div 时，它都会被推送到一个数组中。然后用户可以保存数组并在他们回来时加载它。

删除 div 的函数嵌套在要添加的函数中，因为这是我发现使函数工作的唯一方法。

我遇到的问题是，在单击添加按钮之前，我还必须在加载函数中调用删除函数以使删除按钮起作用。我尝试在任一函数之外调用函数，但因为没有 div 开始。因此，当页面加载并单击删除按钮时，它会执行两次并破坏应用程序。

我是编程新手，我现在所做的主要是程序性的，所以任何输入工作都会受到赞赏。我觉得我犯了一个菜鸟错误，伪代码如下。

```
$(button).cick(function(){
    store div in array;
    add div to container;
    call remove function;
});
function loadPage() {
    retrieve stored array;
    add stored divs to container;
    call remove function;
}
loadPage(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:49:16.317

我认为如果您有单独的按钮来进行添加和删除，它会更容易。这样，您可以绑定一个按钮以将 div 添加到容器中，而另一个按钮则用于删除最后推送的 div。

这样的事情可能会有所帮助

```
 var listOfAddedDivs = [];

  $('.addDivButton').click(addNewDiv);

  $('.removeDivButton').click(removeCurrentDiv);

  function addNewDiv() {
     listOfAddedDivs.push('<div> something </div>');
     updateContainer(listOfAddedDivs);
  }

  function removeCurrentDiv() {
    if(listOfAddedDivs.length >0) {
          listOfAddedDivs.pop();
      }
      updateContainer(listOfAddedDivs);
  }

  function updateContainer(arrayContainingDivs) {

   $('.container').html(arrayContainingDivs.join(' '));
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:09:03.073

您可以将删除操作委托给容器，如下所示：

```
$('#container').on('click', '.delete', function() {
    $(this).closest('div.className').remove();
    //here delete stored clone from array.
}); 
```

*调整选择器以适合您的 HTML*

这样，任何带有 的按钮`class="delete"`在单击时都会导致其（内部）包含的 div 被删除（删除）。

*   该操作将应用于容器中的所有删除按钮，无论它们是在附加此单击处理程序时就位，还是稍后插入。
*   如果（外部）容器本身没有被移除（删除），则此委托操作将保持不变。

# sql - SQL Server 2008 SSRS 报告允许从数据集中多选值，但数据集太大而无法滚动。可以像excel一样过滤吗？

> ID：11855613
> 
> 赞同：0
> 
> 时间：2012-08-07T23:37:33.040
> 
> 标签：sql, ssrs-2008, reporting-services, srs

这里是 SSRS 的新手。我正在编写一份报告，以显示所有销售行，其中包含特定项目列表的行。

该参数`@Items`从非常简单的数据集中获取其数据。问题是，我们有 100,000 个项目。用户通常一次只搜索几个项目。

目前，这为他们提供了包含所有 100k 项的下拉列表。他们必须向上/向下滚动并选中每个项目的框。

```
select ITEMID,
    ItemId + ' - ' + ITEMNAME as 'ItemId_ItemName'
    from INVENTTABLE
    order by ITEMID asc 
```

在 Excel 中，如果您按字段筛选，您可以开始键入项目，然后选中该框，清除筛选器，键入不同的项目等，然后您有一个 100k 列表，其中选中了三个左右的项目。

知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:57:39.443

简短的回答是否定的，您无法执行您在 Reporting Services 中描述的操作。

如果您有一些其他值（例如类别）可用于根据 praveen 的评论过滤项目，那么您可以使用“级联参数”，以便用户选择一个类别，然后过滤可用项目列表。

或者，如果您的用户知道项目名称或代码，那么您可以让他们输入项目名称或代码作为参数，而不是提供下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T16:14:55.147

我同意前面的答案，建议您使用级联参数。如果用户需要从多个类别中选择项目，则将 parent 参数设置为显示类别的多选。然后，您可以过滤子参数中的可用值以仅包含任何选定类别中的项目。

# android - 像启动器一样切换（滑动）图像（用手指）的最佳方式是什么？

> ID：11855615
> 
> 赞同：0
> 
> 时间：2012-08-07T23:38:09.563
> 
> 标签：android, android-layout, android-viewpager, android-image, android-sliding

我有一些图像，我想通过它们滑动（就像在启动器或画廊中（用手指））。更重要的是，我需要缩放这些图像。我已经阅读过这方面的内容，许多人推荐使用 ViewPager。在我的情况下这是个好主意吗？ViewPager 的实现非常困难，因为我需要为它制作一个适配器。图片数量视情况而定，不固定。这是个问题吗？也许使用带有动画和手势阅读器的 ViewFlipper 会更好？你怎么看？感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:03:16.260

使用 ViewPager。这是实现这一目标的最佳方式。

[http://code.google.com/p/android-mt-tutorials/source/browse/trunk/SimpleViewPager/?r=10](http://code.google.com/p/android-mt-tutorials/source/browse/trunk/SimpleViewPager/?r=10)

将提供一个很好的解释。

您也可以将它与[http://viewpagerindicator.com/一起使用](http://viewpagerindicator.com/)

您可以在那里查看实际效果并下载示例应用程序。

# django - 使用 nginx/fcgi 运行时的 django-pdb？

> ID：11855616
> 
> 赞同：1
> 
> 时间：2012-08-07T23:38:10.217
> 
> 标签：django, nginx, webserver, pdb, fastcgi

当我刚刚执行时，它似乎有点工作：

`python manage.py runserver <hostname>:<port> --pdb`.

发生的情况是它会收到`GET`请求，但实际上并不会让我单步执行代码，输出类似于以下内容：

```
[07/Aug/2012 18:27:12] code 400, message Bad request syntax ('\x01\x01\x00\x01\x00\x08\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x01\x04\x00\x01\x02^\x02\x00\t\x11PATH_INFO/app/0/test/\x0e\x03REQUEST_METHODGET\x0c\x00CONTENT_TYPE\x0
e\x00CONTENT_LENGTH\x0c\x00QUERY_STRING\t\rHTTP_HOSTxx.xxx.xxx.xx\x0f')
HTTP_HOSTxx.xxx.xxx.xx" 400 -^       PATH_INFO/app/0/test/REQUEST_METHODGETCONTENT_TYPECONTENT_LENGTHQUERY_STRING
[07/Aug/2012 18:27:12] code 400, message Bad request syntax ('\x01\x01\x00\x01\x00\x08\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x01\x04\x00\x01\x02\x00\x00\x00\t\x0cPATH_INFO/favicon.ico\x0e\x03REQUEST_METHODGET\x0c\x00CONTENT_TYPE\x0e\
x00CONTENT_LENGTH\x0c\x00QUERY_STRING\t\rHTTP_HOSTxx.xxx.xxx.xx\x0f')
HTTP_HOSTxx.xxx.xxx.xx" 400 - 
```

我敢肯定，您可以想象，在调试时并没有说太多（至少，对于具有我知识水平的人来说）。

不过，由于我在开发服务器（不是本地主机）上运行 nginx，我希望能够以某种方式做到：

```
python manage.py runfcgi host=<hostname> port=<port> --settings=myproject.settings --pdb #<--this flag fails 
```

即，*带有*调用标志的命令`--pdb`，一旦我向要通过浏览器调试的页面发送获取请求，该命令就会进入 shell。

那么，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:29:38.787

尝试[基于 pdb 的远程调试器](https://github.com/tamentis/rpdb/)rpdb 。

# python - Python 字典类，'KeyError'

> ID：11855618
> 
> 赞同：4
> 
> 时间：2012-08-07T23:38:21.463
> 
> 标签：python, dictionary

我有以下类，用于存储要访问的其他对象的设置：

```
#!/usr/bin/env python                                                           

class Settings:                                                                    
    """Singleton settings class"""                                              

    settings = {                                                                   
                   'SectionA': {'a': 1, 'b': 2, 'c': 3},                           
                   'SectionB': {'d': 4, 'e': 5, 'f': 6}                            
               }                                                                   

    def __getitem__(self, key): return self.settings[key]                          
    def __setitem__(self, key, item): self.settings[key] = item                    
    def keys(self): return self.settings.keys()                                    

s = Settings()                                                                     
print s.keys()                                                                     
print s['SectionA']                                                                
print s['SectionB']                                                                

for key in s: print s[key] 
```

我不明白为什么它会产生以下输出或如何解决它，非常感谢任何帮助：

```
foo@bar:~$ python Settings.py
['SectionB', 'SectionA']
{'a': 1, 'c': 3, 'b': 2}
{'e': 5, 'd': 4, 'f': 6}
Traceback (most recent call last):
  File "Settings.py", line 20, in <module>
    for key in s: print s
  File "Settings.py", line 11, in __getitem__
    def __getitem__(self, key): return self.settings[key]
KeyError: 0
foo@bar:~$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T23:45:00.997

那是因为当您迭代 Settings 类时，它显然会尝试按索引对其进行迭代，就像一个列表一样。第一个索引是`0`，它给出一个 KeyError ，因为它不在您的字典中。您必须定义特殊方法来覆盖`for key in s`语法以遍历您的键。

```
def __iter__(self): return iter(self.settings) 
```

编辑：另一件事是您正在使用已弃用的旧样式类。你应该把它改成`Settings(object)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T23:50:03.867

这有效：

```
class Settings(dict):                                                                    
    """Singleton settings class"""                                              

    settings = {                                                                   
                   'SectionA': {'a': 1, 'b': 2, 'c': 3},                           
                   'SectionB': {'d': 4, 'e': 5, 'f': 6}                            
               }                                                                   

    def __getitem__(self, key): return self.settings[key]                          
    def __setitem__(self, key, item): self.settings[key] = item                    
    def keys(self): return self.settings.keys()                                    

s = Settings()                                                                     

for key in s.keys(): 
    print key 
    print s[key] 
```

印刷：

```
SectionB
{'e': 5, 'd': 4, 'f': 6}
SectionA
{'a': 1, 'c': 3, 'b': 2} 
```

**编辑**

看，不`{}.keys()`：

```
class Settings(dict):                                                                    
    """Singleton settings class"""                                              

    settings = {                                                                   
                   'SectionA': {'a': 1, 'b': 2, 'c': 3},                           
                   'SectionB': {'d': 4, 'e': 5, 'f': 6}                            
               }                                                                   

    def __getitem__(self, key): return self.settings[key]                          
    def __setitem__(self, key, item): self.settings[key] = item  
    def __iter__(self): return iter(self.settings.keys())               
    def keys(self): return self.settings.keys()      

s = Settings()                                                                                                                                   

for key in s: 
    print key 
    print s[key] 
```

打印相同的输出...

# deadlock - Teradata：您如何调试“由于死锁导致事务中止”错误？

> ID：11855624
> 
> 赞同：1
> 
> 时间：2012-08-07T23:38:43.450
> 
> 标签：deadlock, teradata

`Transaction ABORTed due to Deadlock`最近，当我们去更新我们的一个表中的记录时，我们遇到了错误。有东西在这张桌子上加了一把锁，它没有被释放，但我花了几天的时间试图追踪它，但它仍然让我难以捉摸。

虽然错误是随机的，但我确实知道我需要重复哪些重复循环才能最终触发它。但是，我查询了 dbc.DBQLogTbl 并查看了在错误发生前后 2 分钟执行的所有 SQL，并且在没有访问锁的情况下似乎没有从任何表中进行选择。此外，在错误发生后，我将按 F5 将 Web 表单重新发布回服务器以重复完全相同的更新集，它会起作用。

我的预感是我们的 ASP.NET 应用程序之外的某个进程正在锁定表，因为我已经检查了我们的应用程序正在执行的所有 SQL。我认为必须有一种方法来找出执行了哪些特定的 SQL 并在表上放置了锁。

**2012 年 8 月 9 日附加信息：** 根据我在查询`dbc.DBQLogTbl`和订购时看到的内容，在同一事务中按此顺序发生以下所有情况`firststeptime`：

*   更新员工表
*   锁定访问行 select * from employeesecurity where empid = X （执行此操作以获取当前员工记录以查看是否有任何更改）
*   如果有变化，更新上述员工安全记录
*   更新employeeconfig表（这里总是出现死锁错误）

我之前没有提到这一点，但是死锁错误发生在我根本没有从中选择的表上。当页面加载时，我确实从一个employeeconfig 视图中读取，但`locking row for access`在视图中指定。

回答 Rob 的 4 个问题：

*   这只是一笔交易。
*   正如我在最新更新中所述，被锁定的表甚至不是从中选择的表。
*   所有查询使用`locking row for access`
*   我们从视图中选择`employeeconfig`。此视图使用 . 从`employeeconfig`表中进行选择`locking row for access`。`locking row for access`我们在查询视图本身时不使用。

至于处理死锁，我宁愿没有代码只是尝试重新提交它，因为这似乎是一个需要修复的问题。正如你所说，Rob，我的访问权限可能`dbc.DBQLogTbl`是有限的，所以我可能无法看到正在发生的一切。我一直在联系 DBA，今天将再次跟进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:44:42.957

**识别中止的事务**

死锁条件应该导致导致死锁的两个事务都被中止。我通常会看到 Informatica 的下推优化尝试并行创建临时视图并在创建视图所需的 DBC 表上出现死锁。与您的情况一样，我们的 Informatica 情况完全是随机的。由于僵局，我们可以持续数周或数月而不会中止。

您可以通过在 DBQL 日志表中查询带有`ErrorCode = 2631`（*编辑：已修复错误代码*）和`ORDER BY StartTime DESC`. 这将为您提供由于死锁而中止的每个事务。如果没有通过排序配对，导致死锁的事务对应该相当接近。

如果您的 DBA 以任何方式限制了针对历史 DBQL 数据的视图，则可能会妨碍您找到根本原因的能力。如果是这种情况，您将需要与您的 DBA 团队一起查明问题。由于给定查询的 SQLText 中包含的信息，查询信息仅限于开发人员的情况并不少见。这只是要考虑询问您的查询是否没有产生任何结果。

**确定可能发生中止事务的原因**

*注意：这不是一个详尽的列表。*

像这样的死锁条件更糟糕的是它们通常是随机发生的。墨菲定律规定，这些随机事件将发生在您睡觉、度假或其他您不希望被打扰的活动中。根据您的具体情况，您可以简单地重新提交已死锁的事务。

这将要求您首先了解您是如何达到死锁条件的。

*   如果是两个事务试图操纵相同的记录，您的数据模型是否支持缓慢变化的维度，以便您记录每次发生的变化？
*   如果是读取事务和更新事务访问同一条记录，您是否可以调整锁定粒度和持续时间以最小化机会？
*   你是使用`ACCESS`还是`READ`锁定？
*   您的`SELECT`语句是否通过使用`ROWHASH` `ACCESS`锁定的 1:1 视图访问表，从而允许优化器将锁定从最精细的级别升级到相关事务所需的级别？（例如`LOCKING ROW FOR ACCESS SELECT * FROM DBC.DBCInfo;`）
*   *删除了关于更新语句的行锁定的建议。*

**处理中止的事务**

根据您的死锁情况，您可以选择让您的进程尝试重新提交失败的事务预先确定的次数。您可能会遇到这样一种情况，即一个进程可能会重新提交，而另一个进程可能必须保持失败状态，以便其他人在继续之前进行验证。前者可能是你的 Web 应用，后者可能是复杂的 ETL 流，不能盲目重启。

您应该在某处记录发生这种情况，或者使用其他一些报告机制来跟踪这些事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T18:22:27.083

在关系数据库中，被中止的事务本身不是错误，而仅仅是请求客户端从头开始重试事务，因为不同的并发事务可能已经改变了发出现在中止事务的客户端已经观察到的条件. 通过偶尔允许事务中止（并由客户端重试），底层关系数据库可以进行显着的性能优化，例如允许许多事务同时运行，即使这会导致死锁的可能性很小。

在这些情况下，为什么数据库服务器不重试事务本身？因为客户端可能正在使用从事务中的一个查询返回的数据来影响在同一事务中的后续更新中要执行哪些类型的更新。因此，在交易被中止的罕见（但完全正常和预期）的情况下，重试交易的责任在于客户端。

所以答案是：中止的事务是完全正常的，你只是应该从客户端重试它们。但正如 Rob 所指出的，这可能容易或困难，具体取决于您正在执行的事务类型（例如，如果您正在执行 2 小时的 ETL 流程，您可能想弄清楚如何减少死锁的可能性） .

# java - 如何在java中从MySQL检索查询的结果集

> ID：11855627
> 
> 赞同：4
> 
> 时间：2012-08-07T23:39:06.100
> 
> 标签：java, mysql, eclipse, arraylist

我已经连接到我的数据库：

```
Connection con = DriverManager.getConnection(
    "jdbc:mysql://instance23389.db.xeround.com:15296/Inventory","user","password");
PreparedStatement Statement = con.prepareStatement("Select * from inventory");
ResultSet result = Statement.executeQuery();
while(result.next()) {
    //What to put here?
} 
```

这是我想存储在该数据库中的数组列表：

```
static ArrayList<Product> Chart=new ArrayList<Product>(); 
```

并且这些对象存储在 arraylist 中：

```
double Total;
String name;
double quantity;
String unit;
double ProductPrice; 
```

我需要使用什么通用代码来将 arraylist 存储在 MySQL 数据库中？我需要使用什么通用代码将数组列表从 MySQL 数据库中取出？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T23:48:04.083

这是用于检索和填充 Arraylist 的模板`productList`

```
while (result.next()) {

    Product product = new Product();

    product.setTotal(result.getDouble("Total"));
    product.setName(result.getString("Name"));
    // etc.

    productList.add(product);
} 
```

同时，我邀请您看看：

[http://www.jdbc-tutorial.com/](http://www.jdbc-tutorial.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T23:48:42.917

你的问题不是很清楚，但我猜你想要这样的东西：

```
List<Product> products = new ArrayList<Product>();

String host = "instance23389.db.xeround.com";
int port = 15296;
String dbName = "Inventory";
String url = "jdbc:mysql://" + host + ":" + port + "/" + dbName;

Connection con = null;
PreparedStatement stmt = null;

try {

  con = DriverManager.getConnection(url, "user","password");
  stmt = con.prepareStatement("select * from inventory");
  ResultSet result = stmt.executeQuery();
  while(result.next()) {
    Product prod = new Product();
    prod.setTotal(result.getDouble("total"));
    prod.setName(result.getString("name"));
    prod.setQuantity(result.getDouble("quantity"));
    prod.setUnit(result.getString("unit"));
    prod.setProductPrice(result.getDouble("product_price"));
    products.add(prod);
  }
} finally {
  if (stmt != null) {
    try { 
      stmt.close();
    } catch (SQLException ex) {
    }
  }
  if (con != null) {
    try { 
      con.close();
    } catch (SQLException ex) {
    }
  }
}
return products; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:46:23.773

如果要插入，则选择不是方法。你需要的是类似

```
Statement statement = conn.createStatement();
statement.executeUpdate("INSERT INTO Customers " + "VALUES (1001, 'Simpson', 'Mr.', 'Springfield', 2001)"); 
```

# .net - Cassandra .Net 驱动程序和 CQL 驱动程序（2012 年 8 月）

> ID：11855629
> 
> 赞同：3
> 
> 时间：2012-08-07T23:39:23.783
> 
> 标签：.net, cassandra, cql, fluentcassandra, aquiles

有人问过关于这个的问题，但它们已经有一年多了，所以我重新发布。

我不是在问哪个是“最好的”司机，因为这是主观的。我正在寻找有关稳定性、对最新 Cassandra 功能的合规性、文档和易用性以及速度的数据。

似乎 Hector 几乎没有活动（2 年前根据 Github）。所以它介于 Cassandra-sharp、Fluentcassandra、Aquiles 和 Cassandraemo 之间。

我注意到有些人提到，有些人没有提到 Thrift API。从 .Net 的角度来看有什么意义？

有 CQL 解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T02:50:31.137

[FluentCassandra](http://nuget.org/packages/fluentcassandra)对 LINQ-to-CQL 有很好的支持，它的类型系统是首屈一指的，目前被[DataStax](http://datastax.com)推荐使用。它支持以下类型，并使用 Java 的大端字节格式对它们进行正确编码，以便可以从其他库中读取它们。

*   ASCII
*   布尔值
*   字节
*   合成的
*   柜台
*   日期
*   十进制
*   双倍的
*   动态复合
*   漂浮
*   整数32
*   整数（也称为大整数 - 超过 64 位的任何内容）
*   词法 UUID
*   长
*   时间 UUID
*   UTF8
*   UUID

大多数 .NET 库仅支持在 Cassandra 早期发布的最初 5 个。

在我看来，我是 FluentCassandra 的开发人员，提到 Thrift 的使用就像提到 .NET 使用 Win32 API。我们围绕这些东西构建了库，因为作为开发接口，它们很臭，而对于最终用户开发人员来说，它们真的无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T21:06:19.137

我正在使用支持 Linq2CQL3 的“DataStax C# 客户端驱动程序”。

您可以使用 GitHub 下载它： [https ://github.com/datastax/csharp-driver](https://github.com/datastax/csharp-driver)

该驱动程序包含以下模块：

*   Cassandra：核心层。*   Cassandra.Data.Linq：Linq2CQL 驱动程序*   TestRunner：基本的单元测试环境*   Cassandra.Test：核心驱动的单元测试*   Cassandra.Data.Linq.Test：Linq2CQL 驱动程序的单元测试*   Playground：简单的应用程序，展示了 Linq2CQL 驱动程序的基本用法

    参考： [http ://planetcassandra.org/DownLoad/ViewDownLoadType/datastax-c-client-driver-109](http://planetcassandra.org/DownLoad/ViewDownLoadType/datastax-c-client-driver-109)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T23:42:04.047

我认为[Thrift API](http://wiki.apache.org/cassandra/ThriftInterface)是 Cassandra 的最低级别接口，几乎任何客户端库都必须使用它。

[Cassandraemon](http://cassandraemon.codeplex.com)是一个 LINQ 提供程序，也支持 CQL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T13:03:36.647

Datastax 现在提供自己的 Cassandra .net 驱动程序实现。我有这方面的经验，但通常 DataStax 在支持 Cassandra 方面做得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-17T17:34:36.707

据我所知，Datastax c# 驱动程序在 linq 中根本不做 timeuuid 列。所以如果你想使用 linq 对时间序列行进行范围查询，你就搞砸了

# jquery - jQuery在隐藏代码后重新显示一个div

> ID：11855630
> 
> 赞同：1
> 
> 时间：2012-08-07T23:39:27.690
> 
> 标签：jquery, css

这是对已修复的预览代码问题的更新。我现在正在做的是添加第二个可链接`li`以隐藏**mykadd** div 并重新显示 mykink。

这是我正在尝试做的一个示例...... [http://jsfiddle.net/eWtaz/1/](http://jsfiddle.net/eWtaz/1/)它有点工作，但它的错误

```
<li id="myklnk2">Show Main System</li>
<li id="myklnk1">Un/Select system</li>

<script type="text/javascript">
$(document).ready(function(){
    $(".mykadd").hide();    
    $("#myklnk2").on("click", function(){
        $(".mykink, .mykadd").slideToggle();

    $("#myklnk1").on("click", function(){
        $(".mykadd, .mykink").slideToggle();
    });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:43:22.247

只需固定您的关闭位置 `});`

## *[jsFiddle](http://jsfiddle.net/eWtaz/2/)*

```
$("#myklnk2").on("click", function(){
    $(".mykink, .mykadd").slideToggle();
});   // put it here

$("#myklnk1").on("click", function(){
    $(".mykadd, .mykink").slideToggle();   
});
// not here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:45:38.983

你就不能这样做吗？

```
<li id="myklnk2">Show Main System</li>
<li id="myklnk1">Un/Select system</li>

<script type="text/javascript">
$(document).ready(function(){
    $(".mykadd").hide();    
    $("#myklnk2").on("click", function(){
        $(".mykink").slideUp();
        $(".mykadd").slideDown();
    });
    $("#myklnk1").on("click", function(){
        $(".mykadd").slideUp();
        $(".mykink").slideDown();
    });
});
</script> 
```

同样按照您现在的方式，$("#myklnk1") 单击事件嵌套在 $("#myklnk2") 单击事件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:46:10.467

`})`是在错误的位置。
您可以做的其他事情是选择两者`li`来绑定事件并`display: none`改为使用。

**html**

```
$(document).ready(function(){   
    $("#myklnk2, #myklnk1").on("click", function(){
        $(".mykink, .mykadd").slideToggle();
    });
});​ 
```

**css**

```
.mykadd {
    display: none;
} 
```

[**演示**](http://jsfiddle.net/eWtaz/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T23:45:59.553

不要在第一次点击处理程序中附加第二次点击事件，因为这发生在事件传播之前，这会触发您的第二次点击。

# asp.net - 带有自动生成列的固定标题

> ID：11855637
> 
> 赞同：0
> 
> 时间：2012-08-07T23:39:55.177
> 
> 标签：asp.net, sql-server-2005, visual-studio-2008, gridview

有没有办法让带有自动生成列的固定标题？我反对手动创建标题，因为我们将使用相同的网格视图来获取不同的信息。

另外，有没有办法将标题/行与其他行不同地对齐？可以说我总是希望所有行和标题都对齐中心，除了行“名称”。是否可以为此做一个if语句？或者也许有更简单的方法？

我也总是对使用不同图表的任何想法持开放态度。因此，如果有人有任何建议，那将是很好的建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:18:24.527

```
public virtual bool AutoGenerateColumns { get; set; }

<asp:GridView AutoGenerateColumns="True|False" /> 
```

例子：

```
<asp:sqldatasource id="CustomersSource"
  selectcommand="SELECT CustomerID, CompanyName, FirstName, LastName FROM SalesLT.Customer"
  connectionstring="<%$ ConnectionStrings:AWLTConnectionString %>" 
  runat="server"/>

<asp:gridview id="CustomersGridView" 
  datasourceid="CustomersSource" 
  autogeneratecolumns="False"
  emptydatatext="No data available." 
  allowpaging="True" 
  runat="server" DataKeyNames="CustomerID">
    <Columns>
        <asp:BoundField DataField="CustomerID" HeaderText="CustomerID" 
            InsertVisible="False" ReadOnly="True" SortExpression="CustomerID" />
        <asp:BoundField DataField="CompanyName" HeaderText="CompanyName" 
            SortExpression="CompanyName" />
        <asp:BoundField DataField="FirstName" HeaderText="FirstName" 
            SortExpression="FirstName" />
        <asp:BoundField DataField="LastName" HeaderText="LastName" 
            SortExpression="LastName" />
    </Columns>
</asp:gridview> 
```

下面是关于对齐的链接：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.horizo​​ntalalign.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.horizontalalign.aspx)

以下是有关不同列标题大小/样式的链接：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.columnheadersdefaultcellstyle.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.columnheadersdefaultcellstyle.aspx)

# android - 使用字符串选择数组

> ID：11855639
> 
> 赞同：0
> 
> 时间：2012-08-07T23:39:57.910
> 
> 标签：android, arrays, android-listview, android-activity

尝试获取数组位置（toString）并将其传递给新活动，然后使用该字符串选择要在新活动中打开的数组。

```
Intent launchingIntent = getIntent();
String content = launchingIntent.getData().toString();
setListAdapter(ArrayAdapter.createFromResource(getApplicationContext(), R.array.????, R.layout.main)); ` 
```

R.array.???? 需要是传递的字符串（字符串内容），因为这是我要跟进的数组的名称。

我找不到将字符串变量传递给要使用的数组名称的方法。

编辑：我试图让一个 listView 在同一活动中打开另一个 Listview，关闭前一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:39:00.513

> R.array.???? 需要是传递的字符串（字符串内容），因为这是我要跟进的数组的名称。

使用[`getIdentifier()`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法：

```
Intent launchingIntent = getIntent();
String content = launchingIntent.getData().toString(); // this returns the Uri, are you sure you didn't want to get the text from an extra field set in the Intent
int id = getResources().getIdentifier(content, "array", getPackageName());
setListAdapter(ArrayAdapter.createFromResource(getApplicationContext(), id, R.layout.main)); 
```

> 我试图让一个 listView 在同一个活动中打开另一个 Listview，关闭前一个。

我建议不要这样做，因为您失去了后退按钮功能（这可能会使用户感到困惑）。而是使用不同的活动来传递相关数据`Intents`或使用片段（尤其是`ListFragments`）。

# javascript - Sonar Javascript 插件错误：“装饰失败”和“源文件夹中不包含任何文件”

> ID：11855643
> 
> 赞同：1
> 
> 时间：2012-08-07T23:40:15.680
> 
> 标签：javascript, sonarqube

搜索了几个小时后，我不知道如何解决此问题：

我正在将 Sonar 3.2 与 Jenkins 一起使用，并且刚刚安装了 Sonar Javascript 插件而没有进行任何配置。Jenkins 作业与 Java 分析一起正常工作，但是当我设置 language=js 时，它会触发下面的错误。

我阅读了有关 Sonar Runner 和 Maven 示例的一些文档，但我不知道这将如何转化为在 Jenkins 上配置 Javascript 项目以获得 Sonar 支持。我必须修改我的 pom.xml 吗？我需要有 JsTestDriver 才能使用这个插件吗？

詹金斯的错误日志：

嵌入式错误：无法装饰 'org.sonar.api.resources.Project@39d2b175[id=103,key=PROJECT.KEY:javascript,qualifier=TRK]' 项目“SAMPLE PROJECT”在其源文件夹中不包含任何文件：/var/lib/jenkins/jobs/{JENKINS 工作名称}/workspace/src/main/java

堆栈跟踪：

```
Caused by: org.sonar.api.utils.SonarException: Fail to decorate 'org.sonar.api.resources.Project@39d2b175[id=103,key=project.key:javascript,qualifier=TRK]'
at org.sonar.batch.phases.DecoratorsExecutor.executeDecorator(DecoratorsExecutor.java:84)
at org.sonar.batch.phases.DecoratorsExecutor.decorateResource(DecoratorsExecutor.java:70)
at org.sonar.batch.phases.DecoratorsExecutor.execute(DecoratorsExecutor.java:55)
at org.sonar.batch.phases.Phases.execute(Phases.java:94)
at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:139)
at org.sonar.batch.bootstrap.Module.start(Module.java:83)
at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:131)
at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:121)
at org.sonar.batch.bootstrap.Module.start(Module.java:83)
at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.java:121)
at org.sonar.batch.bootstrap.Module.start(Module.java:83)
at org.sonar.batch.bootstrapper.Batch.startBatch(Batch.java:73)
at org.sonar.batch.bootstrapper.Batch.execute(Batch.java:60)
at org.sonar.maven.SonarMojo.execute(SonarMojo.java:150)
at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:98)
... 21 more
Caused by: org.sonar.api.utils.SonarException: Project "SONAR PROJECT NAME" does not contain any file in its source folders:
- /var/lib/jenkins/jobs/{JENKINS JOB NAME}/workspace/src/main/java
Please check your project configuration.
at org.sonar.plugins.core.sensors.FilesDecorator.checkRootProjectHasFiles(FilesDecorator.java:75)
at org.sonar.plugins.core.sensors.FilesDecorator.decorate(FilesDecorator.java:64)
at org.sonar.batch.phases.DecoratorsExecutor.executeDecorator(DecoratorsExecutor.java:79)
... 36 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T11:49:17.853

您可以删除/排除在执行期间创建装饰错误的文件。在 sonar-project.properties 文件中编辑添加 --> sonar.exclusions=

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:01:16.607

好吧，我认为错误消息很清楚：Sonar 在“/var/lib/jenkins/jobs/{JENKINS JOB NAME}/workspace/ **src/main/java** ”文件夹中查找 Javascript 源。

=> 你必须设置“sources”属性的值来匹配你的 JS 脚本的基本文件夹（或者你的 Web 应用程序的基本文件夹，如果你有几个地方存放 JS 文件）。

# ios - 是否有一个手势识别器可以同时处理捏合和平移？

> ID：11855645
> 
> 赞同：4
> 
> 时间：2012-08-07T23:40:24.047
> 
> 标签：ios, uipinchgesturerecognizer

所以我正在使用 iOS 4.2 为我的应用程序添加缩放和平移。我已经实现了 UIPinchGestureRecognizer 和 UIPanGestureRecognizer 的一个实例。在我看来，其中只有一个是一次识别手势。特别是，后者仅在一根手指向下时做出反应，而前者在第二根手指存在时做出反应。没关系，但它有一些副作用，我认为会导致用户体验质量下降。

当您放下两根手指然后移动其中一根时，图像会按应有的方式展开（放大），但手指下方的像素不再位于手指下方。图像从图像的中心缩放，而不是两个手指之间的中点。而那个中心点本身也在移动。我希望该中心点的移动来决定整个图像的平移。

几乎所有 iOS 应用程序都具有相同的行为，即图像围绕图像中心放大或缩小，而不是手指下方的像素跟踪手指？

在我看来，创建自定义手势识别器是解决此问题的正确设计方法，但在我看来，有人会创建这样的识别器以供商业免费下载和使用。有这样的 UIGestureRecognizer 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T02:46:23.953

抱歉，很匆忙，但这是我用于我的一个演示应用程序的代码，它可以在不使用滚动视图的情况下同时缩放和平移。

不要忘记遵守 UIGestureRecognizerDelegate 协议

如果您不能同时进行捏合和平移，可能是因为您缺少此方法：

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

这是完整的源代码：

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    isEditing = false;

    photoView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    [photoView setImage:[UIImage imageNamed:@"photo.png"]];
    photoView.hidden = YES;

    maskView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    [maskView setImage:[UIImage imageNamed:@"maskguide.png"]];
    maskView.hidden = YES;

    displayImage = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];

    UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(handlePinch:)];

    [panGesture setDelegate:self];
    [pinchGesture setDelegate:self];

    [photoView addGestureRecognizer:panGesture];
    [photoView addGestureRecognizer:pinchGesture];
    [photoView setUserInteractionEnabled:YES];

    [panGesture release];
    [pinchGesture release];

    btnEdit = [[UIButton alloc] initWithFrame:CGRectMake(60, 400, 200, 50)];
    [btnEdit setBackgroundColor:[UIColor blackColor]];
    [btnEdit setTitle:@"Start Editing" forState:UIControlStateNormal];
    [btnEdit addTarget:self action:@selector(toggleEditing) forControlEvents:UIControlEventTouchUpInside];

    [[self view] addSubview:displayImage];
    [[self view] addSubview:photoView];
    [[self view] addSubview:maskView];
    [[self view] addSubview:btnEdit];

    [self updateMaskedImage];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

-(void)dealloc
{
    [btnEdit release];

    [super dealloc];
}

#pragma mark -
#pragma mark Update Masked Image Method
#pragma mark -

-(void)updateMaskedImage
{
    maskView.hidden = YES;

    UIImage *finalImage = 
    [self maskImage:[self captureView:self.view]
           withMask:[UIImage imageNamed:@"mask.png"]];

    maskView.hidden = NO;

    //UIImage *finalImage = [self maskImage:photoView.image withMask:[UIImage imageNamed:@"mask.png"]];

    [displayImage setImage:finalImage];
}

- (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage {

    CGImageRef maskRef = maskImage.CGImage; 

    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                        CGImageGetHeight(maskRef),
                                        CGImageGetBitsPerComponent(maskRef),
                                        CGImageGetBitsPerPixel(maskRef),
                                        CGImageGetBytesPerRow(maskRef),
                                        CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);
    return [UIImage imageWithCGImage:masked];

}

#pragma mark -
#pragma mark Touches Began
#pragma mark -

// adjusts the editing flag to make dragging and drop work
-(void)toggleEditing
{
    if(!isEditing)
    {
        isEditing = true;

        NSLog(@"editing...");

        [btnEdit setTitle:@"Stop Editing" forState:UIControlStateNormal];

        displayImage.hidden = YES;
        photoView.hidden = NO;
        maskView.hidden = NO;
    }
    else
    {
        isEditing = false;

        [self updateMaskedImage];

        NSLog(@"stopped editting");

        [btnEdit setTitle:@"Start Editing" forState:UIControlStateNormal];

        displayImage.hidden = NO;
        photoView.hidden = YES;
        maskView.hidden = YES;
    }
}

/*
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{   
    if(isEditing)
    {
        UITouch *finger = [touches anyObject];
        CGPoint currentPosition = [finger locationInView:self.view];

        //[maskView setCenter:currentPosition];
        //[photoView setCenter:currentPosition];
        if([touches count] == 1)
        {
            [photoView setCenter:currentPosition];
        }
        else if([touches count] == 2)
        {

        }
    }
}
*/

-(void)handlePan:(UIPanGestureRecognizer *)recognizer
{    
    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
}

-(void)handlePinch:(UIPinchGestureRecognizer *)recognizer
{    
    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);
    recognizer.scale = 1;
}

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
}

#pragma mark -
#pragma mark Capture Screen Function
#pragma mark -

- (UIImage*)captureView:(UIView *)yourView 
{
    UIGraphicsBeginImageContextWithOptions(yourView.bounds.size, yourView.opaque, 0.0);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [yourView.layer renderInContext:context];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
}

#pragma mark -

@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T04:41:03.137

所以我创建了自定义手势识别器，因为没有人给我一个更好的解决方案来达到预期的结果。下面是关键代码片段，允许自定义识别器指示视图应该重新定位的位置以及它的新比例应该是什么，以质心作为平移和缩放效果的中心，以便手指下方的像素完全保持在手指下方时间，除非手指出现旋转，这是不受支持的，我无法阻止他们做出这样的手势。这个手势识别器用两根手指同时平移和缩放。我需要稍后添加一个手指平移的支持，即使两个手指中的一个被抬起。

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    // We can only process if we have two fingers down...
    if ( FirstFinger == nil || SecondFinger == nil )
        return;

    // We do not attempt to determine if the first finger, second finger, or
    // both fingers are the reason for this method call. For this reason, we
    // do not know if either is stale or updated, and thus we cannot rely
    // upon the UITouch's previousLocationInView method. Therefore, we need to
    // cache the latest UITouch's locationInView information each pass.

    // Break down the previous finger coordinates...
    float A0x = PreviousFirstFinger.x;
    float A0y = PreviousFirstFinger.y;
    float A1x = PreviousSecondFinger.x;
    float A1y = PreviousSecondFinger.y;
    // Update our cache with the current fingers for next pass through here...
    PreviousFirstFinger = [FirstFinger locationInView:nil];
    PreviousSecondFinger = [SecondFinger locationInView:nil];
    // Break down the current finger coordinates...
    float B0x = PreviousFirstFinger.x;
    float B0y = PreviousFirstFinger.y;
    float B1x = PreviousSecondFinger.x;
    float B1y = PreviousSecondFinger.y;

    // Calculate the zoom resulting from the two fingers moving toward or away from each other...
    float OldScale = Scale;
    Scale *= sqrt((B0x-B1x)*(B0x-B1x) + (B0y-B1y)*(B0y-B1y))/sqrt((A0x-A1x)*(A0x-A1x) + (A0y-A1y)*(A0y-A1y));

    // Calculate the old and new centroids so that we can compare the centroid's movement...
    CGPoint OldCentroid = { (A0x + A1x)/2, (A0y + A1y)/2 };
    CGPoint NewCentroid = { (B0x + B1x)/2, (B0y + B1y)/2 };    

    // Calculate the pan values to apply to the view so that the combination of zoom and pan
    // appear to apply to the centroid rather than the center of the view...
    Center.x = NewCentroid.x + (Scale/OldScale)*(self.view.center.x - OldCentroid.x);
    Center.y = NewCentroid.y + (Scale/OldScale)*(self.view.center.y - OldCentroid.y);
} 
```

视图控制器通过为相关视图分配新的比例和中心来处理事件。我注意到其他手势识别器倾向于允许控制器进行一些数学运算，但我尝试在识别器中完成所有数学运算。

```
-(void)handlePixelTrack:(PixelTrackGestureRecognizer*)sender
{
    sender.view.center= sender.Center;
    sender.view.transform = CGAffineTransformMakeScale(sender.Scale, sender.Scale);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:51:25.787

更简单的解决方案是将您的视图放在滚动视图中。然后你可以免费捏和平移。否则，您可以将平移和捏合手势代表都设置为 self 并为 shouldRecognizeSimultaneously 返回 YES。至于放大到用户手指的中心，我从来没有正确解决过这个问题，但它涉及`anchorPoint`在更改其比例之前操纵视图图层（我认为）。

# mustache - 小胡子 - 模板组织

> ID：11855648
> 
> 赞同：0
> 
> 时间：2012-08-07T23:40:42.447
> 
> 标签：mustache

我最近发现了 Mustache，在阅读了所有在线文档后，我仍然无法理解如何使用它。我不确定如何将我的 HTML 与我的模板文件分开，因为我知道您将标签包含在 javascript 文件的变量中。

我正在创建一个网站，我想要一个页眉/页脚功能。我转向小胡子来做到这一点。

这是我当前的模板：

```
template = "
{{#head}}
<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <script src = "extras/icomoon/lte-ie7.js"></script><![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<!--[if IE]>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.5.3/modernizr.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.1.0/respond.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/flexie/1.0.0/flexie.min.js"></script>
    <script src="js/vendor/move.js"</script>
<![endif]-->
<head>
    <meta charset="utf-8">

    <!-- Use the .htaccess and remove these lines to avoid edge case issues.
         More info: h5bp.com/i/378 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

     <title>{title}</title>
    <meta name="description" content="{meta-description}">

    <!-- Mobile viewport optimized: h5bp.com/viewport -->
    <meta name="viewport" content="width=device-width">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->
    <link href='http://fonts.googleapis.com/css?family=Erica+One|Ubuntu+Condensed|Open+Sans|Maven+Pro|Sans+Pro:300,400' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/base.css">
    <!-- <link rel="stylesheet/less" href="less/style.less"> -->
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/typography.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/no-flexbox.css">

    <link rel="stylesheet" href="css/bootstrap.css" type="text/css">
   <!-- <link type="text/css" rel="stylesheet" href="css/1140.css"> -->
    <link type="text/css" rel="stylesheet" href="css/media-queries.css">
    <!-- todo: add font-awesome and icomoon-->
    <link rel="stylesheet" href="extras/icomoon/style.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.5.3/modernizr.min.js"></script>
    <script src="js/tests/tests.js"></script>
    <link rel="stylesheet" type="text/css" href="css/chosen.css">

    <!-- More ideas for your <head> here: h5bp.com/d/head-Tips -->

    <!-- All JavaScript at the bottom, except this Modernizr build.
         Modernizr enables HTML5 elements & feature detects for optimal performance.
         Create your own custom Modernizr build: www.modernizr.com/download/ -->

</head>
{{/head}}
<body>
    <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you support IE 6.
         chromium.org/developers/how-tos/chrome-frame-getting-started -->
    <!--[if lt IE 7]><p class="chromeframe">Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

    <!-- Add your site or application content here -->
    <header id="main" class="main-menu loading">
        {{#logo}}<a href = "/index.html"><img src="img/logo.png" class="flash-hover"></img></a>{{/logo}}
        {{#nav}}<nav id="nav-main" class="top-menu">
            <ul class = "top-nav">
                <li><a href="index.html">Home</a></li>
                <li><a href="docs/about.html">About</a></li>
                <li><a href="docs/features.html">Features</a></li>
                <li><a href="docs/installation.html">Installation</a></li>
                <li><a href="help-support/contact.html">Contact</a></li>
            </ul>
        </nav>{{/nav}}
    </header>
    <div id="ajaxloader1"></div>
    <div id="main-content" role = "main" class = "loading">
    {{#top_a}}
    <div id="top-a">
    {{content}}
    </div>{{/top_a}}
    {{#article}}
    <article>
    <hgroup>
        <h1 class="article-header">{{header}}</h1>
        <h2 class="subtitle">{{subtitle}}</h2>
        </hgroup>
        {{content}}
    </article>
    {{/article}}

    {{#footer}}
    <!-- JavaScript at the bottom for fast page loading: http://developer.yahoo.com/performance/rules.html#js_bottom -->

    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.7.2.min.js"><\/script>')</script>

    <!-- scripts concatenated and minified via build script -->
    <!-- <script src="js/plugins.js"></script> -->
    <script src="js/loading.js"></script>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/hashgrid/6/hashgrid.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/store.js/1.1.1/store.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/kerning.js/0.2/kerning.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/masonry/2.1.04/jquery.masonry.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.4/bootstrap.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.1.3/jquery.transit.min.js"></script>
    <script src="extras/chosen/chosen.jquery.min.js"></script>
    <!-- <script src="js/vendor/can.jquery.min.js"></script> -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.5.0-dev/mustache.min.js"></script>
    <!-- <script src="js/vendor/can.fixture.js"></script> -->
    <script src = "js/main.js"></script>
    <!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.8.19/jquery-ui.min.js" media = "@screen"></script> -->
    <!-- end scripts -->

    <!-- Asynchronous Google Analytics snippet. Change UA-XXXXX-X to be your site's ID.
         mathiasbynens.be/notes/async-analytics-snippet -->
    <!-- <script>
        var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
    </script> -->
</body>
</html>
{{/footer}}

"; 
```

我得到的问题显然是我需要转义所有引号。所以我的问题是，将所有这些标记从模板中分离出来的最佳方法是什么，这样我仍然可以像在 PHP 中使用标准页眉/页脚函数一样使用内联 html 来突出显示我的语法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:51:12.653

JS 中没有多行字符串，所以如果这是应该的，你不能把所有这些都放在一个 JS 字符串中。通常我建议也许把它放在这样的`<script>`元素中：

```
<script type="text/x-mustache-template">

{{#head}}
<!DOCTYPE html>

...

</script> 
```

但是由于您`<script>`的模板中有标签，所以这并不是那么简单。您最好的选择可能是将模板放在它自己的文件中，然后使用 PHP 将其拉入您的页面，例如：

```
<?php

$templates = array();

$template[ 'whatever' ] = file_get_contents( "template.mustache" );

?>

<script>

var templates = <?php echo json_encode( $templates ); ?>;

</script> 
```

# ios - Xcode 4.4 错误

> ID：11855649
> 
> 赞同：0
> 
> 时间：2012-08-07T23:40:43.840
> 
> 标签：ios, xcode, xcode4.4

由于我将 Xcode 更新到 4.4 版，我的项目开始崩溃并出现以下错误：

```
target specifies product type 'com.apple.product-type.framework.static', but there's no such product type for the 'iphonesimulator' platform 
```

我的项目与图书馆有联系，我认为这是错误的。

知道如何解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:45:43.063

尝试将所有源代码和类复制到某处，然后创建一个新项目，然后将所有代码粘贴回去。

可能有点烦人，但它会起作用。

至少，重新安装 xCode。

希望我对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:03:02.007

我的坏...这个错误与苹果的新版本 Xcode 4.4 没有任何直接关系...

我正在使用的这个应用程序是一个企业应用程序，因此人们可以同时工作。它需要在 Xcode 上安装这个框架：[https](https://github.com/kstenerud/iOS-Universal-Framework.git) ://github.com/kstenerud/iOS-Universal-Framework.git 。

所以每次我更新Xcode我都需要重新安装它..

# c# - 多连接字符串

> ID：11855651
> 
> 赞同：2
> 
> 时间：2012-08-07T23:41:01.280
> 
> 标签：c#, sql, sql-server, ado.net, sqlconnection

我不确定这在 ADO.NET 中是否可行，但我仍然希望由各位大师来运行。

我有以下 sql 查询：

```
select a.name, b.id 
from datasource1_table a, datasource2_table b
where a.id=b.id 
```

1) datasource1_table - SQL Server“SQLServer1”连接

2) datasource2_table - SQL Server“SQLServer2”连接

所以我有两个服务器都登录的连接字符串。我想一次性执行上面的sql。

可能吗？

如果您需要更多信息或澄清，请告诉我。

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T23:46:06.490

不完全是。您只能将一个 SqlConnection 与一个 SqlCommand 相关联。您可以做的是在 SQLServer1 上创建一个指向 SQLServer2的[链接服务器。](http://msdn.microsoft.com/en-us/library/ms188279.aspx)然后你可以像这样引用它：

```
select a.name, b.id 
from datasource1_table a, myLinkedServer.myDb.dbo.datasource2_table b
where a.id=b.id 
```

在旁注中，我会更改您当前的语法以使用实际连接。

如果链接服务器不是一个选项，您可能必须执行两个查询并处理结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:01:51.447

鉴于您不能使用链接服务器，您可能希望调查[DataRelation](http://msdn.microsoft.com/en-us/library/system.data.datarelation.aspx)类

在您的示例中，执行两个 SELECT：

```
DataSet domain = new DataSet();

DataTable dataFromA = null;
DataTable dataFromB = null;

using(SqlConnection conn1 = new SqlConnection("FirstConnectionString"))
{
  DataTable dataFromA = //result from SELECT id, name FROM TableA
}

using(SqlConnection conn2 = new SqlConnection("SecondConnectionString"))
{
  DataTable dataFromB = //result from SELECT id, name FROM TableB
}

domain.Tables.Add(dataFromA);
domain.Tables.Add(dataFromB); 
```

我在这里解释了这个过程。

在内存中拥有两个数据表后，您可以在它们之间创建一个 DataRelation：

```
DataRelation idRelationship = new DataRelation("ABLink", dataFromA.Columns["Id"], dataFromB.Columns["Id"]); 
```

然后，您可以随心所欲地绘制这种[关系](http://msdn.microsoft.com/en-us/library/system.data.dataset.relations.aspx)：

```
foreach(DataRow aRow in dataFromA.Rows)
{
  //matching B Rows:
  DataRow[] bRows = aRow.GetChildRows(idRelationship);
} 
```

它实际上是两个表之间的内存索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:53:06.833

您可以使用 sp_linkedserver 将一台服务器作为链接服务器添加到另一台服务器。然后，使用普通的 ado.net 连接和查询：

```
SELECT * FROM OPENQUERY (LinkedServerName,'SELECT * FROM myDatabase.Customer') 
```

不是吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T01:48:35.830

我和你现在的情况一样。DBA 不允许我使用链接服务器。

因此，作为解决方案，我实现了 WCF 服务，该服务连接到两个不同的数据库服务器并将记录集放入内存。在来自两个数据库的数据进入内存后，我们就可以使用它了。

请注意，当我们将所有数据都抓取到内存中时，您必须考虑我们正在处理的数据量。为了最小化数据，我们只能检索所需的数据（即避免使用 select * from table）

# regex - 克莱恩之星：为什么 $_ = "a"; s/a*/e/g 产品：ee

> ID：11855652
> 
> 赞同：31
> 
> 时间：2012-08-07T23:41:06.317
> 
> 标签：regex, perl

`a*`表示零个或多个实例：一个权利？

那么为什么会`$_ = "a"; s/a*/e/g`产生：`ee`

可能的答案：它将字符串：“a”替换为：“e”，并将空字符串：“”替换为：“e”。或者它正在用一个字母：e 替换仅仅没有字母：a 或者它正在用一个：e 替换：a 的“零次出现”

好吧，但是：

`$_ = "b"; s/a*/e/g`产生：`ebe`

它似乎正在替换左侧的空字符串：`b`以及右侧*的*空字符串：`b`

好的。但是为什么它不这样做： " `a`" ？为什么它不替换左侧的空字符串：`a`以及右侧*的*空字符串：a 以及*字母*：a 本身来获取：`eee`？

出现的次数为零：左侧的出现次数与右侧的出现次数一样多！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-07T23:46:44.890

您对结果为何如此`"ee"`且`"ebe"`完全准确的分析。

“/g”修饰符使正则表达式匹配一次，然后从上次匹配停止的位置再次尝试匹配。

差异的原因（它不会替换 左侧的空字符串`"a"`）是因为它`"*"`是**贪婪**的 - 它匹配大多数可能的字符。来自[`perldoc perlre`](http://perldoc.perl.org/perlre.html#Regular-Expressions)：

> 默认情况下，量化的子模式是“贪婪的”，也就是说，它会尽可能多地匹配（给定一个特定的起始位置），同时仍然允许模式的其余部分匹配。

所以它匹配零个“a”，看看它是否可以匹配更多。由于字符串中有更多的“a”，它会再匹配一个。尝试匹配更多。没有任何？完毕。所以我们匹配第一个“a”。

然后，“/g”使我们再次尝试匹配（*从上次匹配完成后停止的位置开始*），现在匹配空（零“a”）字符串。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-08T00:06:33.157

使用 Damian Conway 的优秀[Regexp::Debugger](https://metacpan.org/module/Regexp%3a%3aDebugger)，我尝试了这个：

```
perl -MRegexp::Debugger -E '$_ = "a"; s/a*/e/g; say' 
```

并得到这个输出，以防它让事情变得更清楚，以事件记录模式显示。通过替换运行的第一遍匹配产生以下事件集：

```
a               | a*              |   Starting regex match
a               | a*              |     Trying a literal character zero-or-more times (as many as possible)
                | a*              |     Matched
                |                 |   Regex matched in 3 steps 
```

这表明“a”第一次匹配，它被“e”替换。

第一次完成匹配后，调试器让我从同一个程序运行第二个匹配：

```
 | <~~             |   Back-tracking in regex
                | a*              |   Back-tracked and restarting regex match
                | a*              |     Trying a literal character zero-or-more times (as many as possible)
                | a*              |     Matched
                |                 |   Regex matched in 3 steps 
```

这表明原始“a”（现在的“e”）之后的“”第二次匹配并替换为“e”。

不幸的是，要么我不知道如何读取输出，要么 Regexp::Debugger 在这一点上感到困惑或其他什么，但它再次重复，但没有进行替换。

```
 | <~~             |   Back-tracking in regex
                | a*              |   Back-tracked and restarting regex match
                | a*              |     Trying a literal character zero-or-more times (as many as possible)
                | a*              |     Matched
                |                 |   Regex matched in 3 steps 
```

无论如何，Perl 已经匹配了第三次并且出于某种原因决定这次不进行替换，或者 Regexp::Debugger 或者我只是感到困惑。

**编辑：**我通过查看[perldoc perlre](https://metacpan.org/module/perlre#Repeated-Patterns-Matching-a-Zero-length-Substring)解决了我的困惑：

> “更高级别的循环在迭代之间保留了一个额外的状态：最后一个匹配是否为零长度。为了打破循环，零长度匹配之后的下一个匹配被禁止长度为零。这个禁止与回溯交互（参见“回溯”），因此如果最佳匹配的长度为零，则选择次佳匹配。”

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-08T00:17:47.023

首先，正如人们所说，`a*`是贪婪；如果它可以匹配“a”，它将不匹配空字符串。其次，`/g`匹配将尽可能多地匹配，但不会*在同一位置*连续两次进行零长度匹配，因为这意味着模式没有进展。如果可以，则强制该模式进行一些其他非零长度匹配，否则将失败。

在“a”上运行`s/a*/e/g`时，首先`a*`在位置 0 匹配“a”（并前进到位置 1），因此“a”被替换为“e”。然后`a*`匹配位置 1 的空字符串（并且不前进），因此将“”替换为“e”。现在我们仍然在位置 1，并且`a*`被禁止再次匹配空字符串，并且不能再匹配任何内容，因此模式失败并且 perl 尝试前进到字符串中的下一个字符。但是我们已经到了字符串的结尾，所以输出是“ee”。

`s/a*/e/g`在 "b" 上运行时，首先`a*`匹配位置 0 处的空字符串（并且不前进），将 "" 替换为 "e"。然后，位置 0 的另一个匹配被禁止，因此模式前进到位置 1（越过未被替换的“b”）。然后`a*`匹配位置 1 的空字符串，并将其替换为“e”；同样，禁止在同一位置匹配两次，perl 不能超出字符串的末尾，所以结果是“ebe”。

最后，想象一下`s/a*/e/g`在“ab”上运行。`a*`在位置 0 匹配 "aa"，用 "e" 替换，然后前进到位置 2；`a*`匹配位置 2 的空字符串，替换为“e”并且不前进；`a*`无法进行非空匹配并失败；“b”被扫描；`a*`匹配位置 3 的空字符串，替换为 "e" 并且不前进；字符串的结尾。所以结果是“eebe”，perl 将确认。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T04:44:09.120

您认为它是不一致的，因为您认为它实际上替换了“位置 0 处的 'a 的序列”时替换了“位置 0 处的空字符串”。当输入`a`与`b`.

`$_ = "a"; s/a*/e/g`：

1.  在 pos 0 处尝试：在 pos 0 处匹配 1 个字符。Pos = 1。
2.  在 pos 1 尝试：在 pos 1 匹配 0 个字符。Pos = 1。
3.  在 pos 1 尝试：在 pos 1~~匹配 0 char。~~糟糕，已经这样做了，所以在那个位置失败。位置 = 2。

`$_ = "b"; s/a*/e/g`：

1.  在 pos 0 处尝试：在 pos 0 处匹配 0 个字符。Pos = 0。
2.  Try at pos 0: ~~Match 0 char at pos 0.~~哎呀，已经这样做了，所以在那个位置失败了。位置 = 1。
3.  在 pos 1 尝试：在 pos 1 匹配 0 个字符。Pos = 1。
4.  在 pos 1 尝试：在 pos 1~~匹配 0 char。~~糟糕，已经这样做了，所以在那个位置失败。位置 = 2。

如果你想在 pos 0 匹配一个空字符串，你必须要求它这样做。

```
>perl -E"say 'a' =~ s/^|a*/e/gr;"
eee

>perl -E"say 'b' =~ s/^|a*/e/gr;"
ebe 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T23:49:18.160

非常好奇。在 RHEL 5 上使用 Perl 5.12.1，输出确实如图所示：

```
$ perl -e '$_ = "a"; s/a*/e/g; print "$_\n";'
ee
$ 
```

我能想到的最好的猜测（原因）是第`a*`一个匹配`a`, 产生第一个`e`，然后匹配 , 之后的空字符串`a`作为第二个`e`。让我们尝试一些变体：

```
$ perl -e '$_ = "a"; s/^a*/e/g; print "$_\n";'
e
$ perl -e '$_ = "a"; s/a*$/e/g; print "$_\n";'
ee
$ perl -e '$_ = "a"; s/a+/e/g; print "$_\n";' 
e
$ 
```

这些变体中的第一个和第三个产生了我所期望的答案。第二个确实让我感到困惑，仍然。

```
$ perl -e '$_ = "a\n"; s/a*/e/g; print "$_\n";'
ee
e
$ 
```

嗯……

# javascript - 突出显示选定的文本并同时获取事件

> ID：11855657
> 
> 赞同：1
> 
> 时间：2012-08-07T23:42:09.453
> 
> 标签：javascript

我是 JavaScript 新手，正在尝试编写一个简单的荧光笔工具。每个功能都可以自己正常工作，但是在组合时，出现次数不再正常工作。这是我的代码[http://jsfiddle.net/mrBXu/](http://jsfiddle.net/mrBXu/)，问题是当您第一次选择任何“The”时，情况正常，但是如果您重新选择它，它就不再正确了。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:29:05.437

不幸的是，你想要做的并不是那么容易。它在第二次尝试时不起作用的原因是因为您插入了一个跨度来做一个突出显示。第一次选择文本时，您的 startContainer 是一个位于“p”标签内的 textNode。第二次选择时，您的 startContainer 是一个 textNode，它从您插入的 span 的末尾开始。您需要做的将需要更多代码。不仅要检查startContainer，还要找到它与“p”标签的关系，并检查“p”标签内startContainer之前的所有节点。

这是一个工作示例：http: [//jsfiddle.net/mrBXu/4/](http://jsfiddle.net/mrBXu/4/)

# java - 奇怪的pocketsphinx精度降级

> ID：11855659
> 
> 赞同：1
> 
> 时间：2012-08-07T23:42:28.617
> 
> 标签：java, android, android-ndk, speech, cmusphinx

一点上下文-我正在使用jsgf语法为android创建一个pocketsphinx应用程序（尽管fsg语法也存在问题）。我的代码基于[android 的 pocketsphinx 演示](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)。

Pocketsphinx 产生了一个奇怪的问题，在对引擎进行几次查询后，准确性似乎正在下降。第一个查询具有近乎完美的准确性——它可以毫无困难地识别相对复杂和令人费解的短语。然而，第二次和第三次识别几乎无法识别出一个双音节词，并且通过对引擎的第四次查询，它根本无法生成假设。

我不太确定是什么导致了问题，原始演示似乎工作正常，除了添加语法之外，我几乎没有更改语音引擎的配置。无论如何，有没有其他人经历过这样的事情，或者甚至有关于我可以尝试解决这个问题的建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:34:50.173

问题解决了，原来我需要 -dither 选项来解释“零能量区域”感谢 Nikolay Shmyrev 的解决方案[https://sourceforge.net/projects/cmusphinx/forums/forum/5471/topic/5507338](https://sourceforge.net/projects/cmusphinx/forums/forum/5471/topic/5507338)

# liquid - 液体模板 - 使用替换过滤器打印出来

> ID：11855663
> 
> 赞同：0
> 
> 时间：2012-08-07T23:42:44.990
> 
> 标签：liquid

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T11:33:44.753

尝试这个：

```
{{ page.excerpt | array_to_sentence_string | prepend:'<em>' | append:'</em>' | replace: ',' ,'</em> <em>' }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:04:44.503

我认为这是因为您的主题标签是一个数组，而不是一个字符串。

替换永远不会发生，而是在每个哈希项之前。

使用这个进行故障排除：

```
{{ page.excerpt | replace: ',','foobar' }} 
```

看看 foobar 是否打印出来。你确定你在 page.excerpt 中的 hashitems 吗？

输出过滤器从左到右，所以在你的例子中：前置、附加、替换。或者在这个例子中

```
{{ output | filterA | filterB | filterC }} 
```

顺序是

1.  过滤器A
2.  过滤器B
3.  过滤器C

# api - API 中的 Github star/unstar

> ID：11855664
> 
> 赞同：1
> 
> 时间：2012-08-07T23:42:51.607
> 
> 标签：api, github

你知道 github 是否已经在 API 中实现了他们新的 star/unstar 存储库功能吗？[我在那边的文档](http://developer.github.com)中找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-11T08:39:15.960

[https://developer.github.com/v3/activity/starring/#star-a-repository](https://developer.github.com/v3/activity/starring/#star-a-repository)：

> ### 为存储库加注星标
> 
> ```
> PUT /user/starred/:owner/:repo 
> ```
> 
> ### 取消星号存储库
> 
> ```
> DELETE /user/starred/:owner/:repo 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:45:28.407

请阅读该文档，变更日志指出：

> **破坏性测试版更改**
> 
> 2012 年 8 月 7 日
> 澄清观看/观星

变更集在这里：

*   [https://github.com/github/developer.github.com/commit/14c25df8c1a5e4e9a593d477d9e7d42b632ceb3c](https://github.com/github/developer.github.com/commit/14c25df8c1a5e4e9a593d477d9e7d42b632ceb3c)

如果您在查找信息时仍有问题，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:13:52.093

它已被添加： http: [//developer.github.com/v3/repos/starring/](http://developer.github.com/v3/repos/starring/)（[历史](https://github.com/github/developer.github.com/commits/master/content/v3/repos/starring.md)）。如果您一直在使用它们，还有一些[过渡性的东西可以弃用正在观看的 API 。](http://developer.github.com/changes/2012-9-5-watcher-api/)

# asp.net - 来自 ASP.NET JQuery Ajax 的外部 WebService 调用

> ID：11855666
> 
> 赞同：0
> 
> 时间：2012-08-07T23:43:09.470
> 
> 标签：asp.net, web-services, jquery

我正在调用托管在服务器中的 Web 服务。JQuery Ajax 调用如下

```
$.ajax({
            url: 'http://www.webservicex.net/country.asmx/GetCountries',
            type: "GET",
            async: false,
            dataType: "jsonp",
            jsonp: 'jsonp',
            contentType: 'application/json',
            success: function (res) {                    
                $("#success").append(JSON.parse(res));
            },
            error: function (error) {
                $("#success").append(error);
            }
        }); 
```

应该返回所有国家。但我从 Chrome Cansole 收到错误消息。这么说

> 资源解释为脚本，但使用 MIME 类型 text/xml 传输：“http://www.webservicex.net/country.asmx/GetCountries?jsonp=jQuery172030371484998613596_1344382564214&_=1344382675101”。jquery.min.js:4
> 
> 未捕获的 SyntaxError：意外的令牌 <

任何帮助都将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:02:31.490

`content-type:text/plain`服务器正在返回带有HTTP 标头的 Javascript 。重新配置它以返回`content-type:application/x-javascript`以修复它。

# jquery - Ember.js 在之后插入而不是附加/到

> ID：11855667
> 
> 赞同：0
> 
> 时间：2012-08-07T23:43:11.527
> 
> 标签：jquery, ember.js

我正在尝试在 Ember.js 中的元素*之后*添加模板，但似乎附加是目前唯一的选择。我正在使用 jQuery 遍历单击的元素的父级，然后想将模板添加到`after`父级。

像这样导航：`$(this).closest("li").after()`

但是 Ember.js 的 appendTo 不起作用，因为我只能在父 li 中添加模板。

我遇到了这个拉取请求：[https://github.com/emberjs/ember.js/pull/627](https://github.com/emberjs/ember.js/pull/627)它将实现一个`insertAfter()`方法，但由于这不在主分支中，我想知道是否还有其他方法可以做到这一点？

谢谢，

G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:24:17.863

我找到了解决方案。不确定这是最好的方法，但它有效。我基本上在任意位置添加模板（在这种情况下，在单击链接之后），然后在插入元素后，我使用 $() 使用 jQuery 移动它：

```
$(".commentReplyLink").live("click", function(){

    var new_reply_template = Ember.View.create({
      templateName: 'new_reply_template',
      didInsertElement: function() {
        this.$().closest("li").after(this.$());
      }
    });

    new_reply_template.appendTo($(this).after());

}); 
```

这是一个工作示例：http: [//jsfiddle.net/givp/tnQJf/28/](http://jsfiddle.net/givp/tnQJf/28/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-08T00:33:40.097

看来您正在寻找的是 place() 函数。

[http://uxebu.github.com/embedjs/docs/#place](http://uxebu.github.com/embedjs/docs/#place)

```
// place(node, refNode, position)
embed.place("someNode", "anotherNode", "after"); 
```

# ruby-on-rails - 如何通过 ruby on rails 为每个租户使用一个数据库

> ID：11855669
> 
> 赞同：2
> 
> 时间：2012-08-07T23:43:49.657
> 
> 标签：ruby-on-rails, multi-tenant, multiple-databases, db-charmer

我遇到了一个不常见的问题，我的客户有 3 家商店，并且想要一个 Web 应用程序来分别管理每个商店。这将是一种常见的多租户方法，但还有一个额外的要求：客户端不想依赖互联网连接。因此我可以想到2个解决方案，每个商店都必须有一个服务器，1个数据库实例和1个应用程序实例运行，如果互联网连接失败，客户端可以使用应用程序本地实例。

*   异步数据库复制——每个存储本地数据库都是在线服务器数据库的副本。

*   根据所选存储，使 rails 连接到不同的数据库。在这种情况下，应用程序在线实例将仅连接到 3 个本地数据库（每个数据库位于一个商店）。我看到了[Guy 的演讲](http://aac2009.confreaks.com/06-feb-2009-14-30-writing-multi-tenant-applications-in-rails-guy-naor.html)，并阅读了有关 magic_multi_connections (magicmodels.rubyforge.org/magic_multi_connections) 的内容，但它似乎已经过时了。[DbCharmer](http://kovyrin.github.com/db-charmer/index.html)似乎是一个可能的解决方案，但我不确定它是否会这样做。

    其他相关帖子：

    *   railsforum.com/viewtopic.php?id=48435
    *   stackoverflow.com/questions/1825844/multiple-databases-in-rails

我想知道这种情况下最好的架构。你会怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:38:26.113

DbCharmer 开发人员 Oleksiy Kovyrin 的回答是：[“](https://groups.google.com/forum/?fromgroups#!topic/db-charmer/mMmYbwjel_U%5b1-25%5d)

..如果您在多进程（单线程）环境中使用 AR，那么每个客户端都有单独连接的情况绝对是可能的..”

# nuget - 我还不知道的 TFS NuGet 技巧？

> ID：11855672
> 
> 赞同：5
> 
> 时间：2012-08-07T23:44:10.540
> 
> 标签：nuget, tfsbuild

所以，我在我的解决方案上启用了包还原 - Install-Package NuGetEnablePackageRestore

我已经在 TFS 构建服务器上安装并更新了 NuGet

我在 TFS 构建服务器上创建了环境变量 - [http://www.centrolutions.com/blog/post/2012/07/05/NuGet-and-TFS-2010-Automated-Build.aspx](http://www.centrolutions.com/blog/post/2012/07/05/NuGet-and-TFS-2010-Automated-Build.aspx)

我已经删除了所有 packages.config 文件，并在每个项目上重新开始。

我已将 .nuget 文件夹路径添加到构建作业，以及定义的构建代理文件夹

我几乎完成了我的绞索，并计划在黎明时上吊……我错过了什么吗？

忘记放 TFS 构建错误

C:\Builds\10.......nuget\nuget.targets (76)：包还原默认禁用。要给予同意，请打开 Visual Studio 选项对话框，单击包管理器节点并选中“允许 NuGet 在构建期间下载丢失的包”。您还可以通过将环境变量“EnableNuGetPackageRestore”设置为“true”来表示同意。

和

C:\Builds\10.......nuget\nuget.targets (76)：命令“C:\Builds\10......nuget\nuget.exe”安装“C:\ Builds\10......\packages.config" -source "" -o "C:\Builds\10......\packages"" 以代码 -1 退出。

删除了安全的完整路径。

**发现：**

我的 TFS 管理员将环境变量设置为 USER 变量！我只是想我会要求她告诉我她是如何配置它的，一旦她这样做，我就意识到这是错误的。

我不再收到包还原错误...哇！但是，我收到“无法找到版本”错误，这让我认为 TFS 框不知道正确的包源。我已经验证可以从 TFS 构建框访问包源，并且我已经在该框上配置了 NuGet 以引用包共享。

没有包服务器可以做到这一点吗？我一直在为我的所有本地构建使用文件共享，但我想知道当它到达 TFS 框时规则是否会改变。我需要在 Nuget.config 文件中定义我的包源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:07:06.853

从 NuGet 2.0 开始，您需要同意 NuGet 在构建期间下载包（隐私问题）。更多信息在这里：http: [//blog.nuget.org/20120518/package-restore-and-consent.html](http://blog.nuget.org/20120518/package-restore-and-consent.html)

NuGet 包管理器 1.8 中添加了在 UI 中给予同意的选项。它是工具->选项->包管理器->常规下的第三项：“包还原：允许 NuGet 在构建期间下载丢失的包”。

或者，您可以通过将 EnableNuGetPackageRestore 环境变量设置为 true 来表示同意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:48:00.173

问题最终是 TFS 管理员为 EnableNuGetPackageRestore 环境变量使用了“用户变量”。我永远不会马上猜到这一点:(。

我又去看了她的配置，发现不对……让她改正了，现在可以正常使用了。

感谢所有的建议！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T06:16:47.880

如果启用了包还原，则可以使用$(SolutionDir).nuget 文件夹中的 NuGet.targets 文件中的**<PackageSources>元素配置包源。**

您能否验证这些指向正确的位置，以及该路径是否可以从构建服务器访问？

# math - 在飞镖中使用 parseInt 时服务器崩溃？

> ID：11855674
> 
> 赞同：1
> 
> 时间：2012-08-07T23:44:16.473
> 
> 标签：math, numbers, dart

不知道我在这里做错了什么。我有一个小程序设置来解析我的本地主机上的请求。我的客户有这个：

```
var local_num = null; // init to null
// my server is running on localhost at the moment
// using XMLHttpRequest I send it the value (it woud still be null)
request.open('GET', 'http://127.0.0.1:8080?player=${local_num}', false); 
```

我的服务器代码应该能够处理这个：

```
action = params['action'];
var player_num = params['player'];
print ("got player num ${player_num}");
print(player_num is num); // false in both cases (see log below)
print(player_num is int);

if (player_num == null) { // never reaches inside of this if clause
print("received num is null, skipping parsing");
} else {
  try {
    var actual_number = Math.parseInt(received_num);
    print("parsed"); // never gets here
  } catch(var e) {
print(e); // should throw...
  }
} 
```

服务器记录此：

```
// it gets the request, player is null...
Instance of '_HttpRequest@14117cc4'
{player: null}
got player num null
false
false 
```

但随后繁荣！-> 在 dart:bootstrap_impl ... 第 1255 行附近

```
int pow(int exponent) {
  throw "Bigint.pow not implemented";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:36:42.257

我目前看到的主要问题是：

```
if (player_num == null) { 
```

在这种情况下，您正在检查 player_num 是否为空值。但是，您不会检查该值是否为字符串“null”，在这种情况下它似乎是。

从这一点开始，当你将它传递给 parseInt 时它应该抛出一个 FormatException （注意：不应该使用 Math.static 类，因为它是 dart:math 中的顶级函数。静态类 Math. 仍然来自 dart：核）。

That being said, my try/catch with a parseInt('null'); does indeed catch the error. What I'm confused by, is that your error is indicating that the error that's being displayed, is for the 'pow()' function and not related to parseInt() at all.

# svg - 如何在SVG中绘制不是三角形的标记？

> ID：11855678
> 
> 赞同：1
> 
> 时间：2012-08-07T23:44:41.590
> 
> 标签：svg

例如，像这个矩形标记

![在此处输入图像描述](../Images/846dba53b29678b8e8f09e617e56b80a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:13:02.077

使用 a 中的`<marker>`元素`<def>`。`marker-start="url(#id)"`然后，您可以通过使用（或使用 marker-mid 或 marker-end）引用其 id 在开头和结尾添加标记。您可以在标记标签中定义您喜欢的任何形状。下面的示例只是您的示例中的一条垂直线。

```
<defs>
    <marker id="marker-bar"
            refX="0" refY="5"
            markerHeight="20"
            markerWidth="20"
            viewBox="0 0 10 10"
            orient="auto"
            markerUnits="strokeWidth">
        <path stroke="#111" d="M0 0 v10"/>
    </marker>
</defs>

<path stroke="#111" fill="none"
      d="M152,172 C62,174 190,28 192,122"
      marker-end="url(#marker-bar)"/> 
```

# python - Python - 根据内容从输入文件中删除某些行

> ID：11855681
> 
> 赞同：2
> 
> 时间：2012-08-07T23:44:43.243
> 
> 标签：python, text

我是 python 的初学者，我正在尝试通过谷歌和一些书籍学习......我正在从事一个特定的项目并且到目前为止做得很好......

我的程序的第一部分接受一个输入文本文件，并扫描它以查找行内的某些数据，然后如果它不满足搜索条件，它将该行写回一个新文件......

我所做的丑得要命，但它也很慢......当我在树莓派上运行它时，这部分仅需要 4 秒（输入文件刚刚超过 1700 行文本）

这是我的努力：

```
 with open('mirror2.txt', mode='r') as fo:
        lines = fo.readlines()
        with open('temp/data.txt', mode='w') as of:
            for line in lines:
                date = 0
                page = 0
                dash = 0
                empty = 0
                if "Date" in line: date += 1
                if "Page" in line: page += 1
                if "----" in line: dash += 1
                if line == "\n":   empty += 1
                sum = date + page + dash + empty
                if sum == 0:
                    of.write(line)
                else:() 
```

我很尴尬在公共场合展示这一点，但我很想看到一种“pythonic”的方式来更优雅（更快！）

有人帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:00:39.530

要回答您的问题，这是一种 pythonic 方式：

```
import re

expr = re.compile(r'(?:Date|Page|----|^$)')
with open('mirror2.txt', mode='r') as infile:
    with open('data.txt', mode='w') as outfile:
        for line in infile:
            if not expr.search(line.strip()):
                outfile.write(line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:52:09.710

逐行读取文件的 Pythonic 方式将适用于您的情况：

```
with open('mirror2.txt', mode='r') as fo:
    for line in fo:
        # Rest 
```

如果这显着加快了您的程序，则意味着 Python 解释器在管理 ARM 处理器上的内存方面做得不是很好。

其余的已经在评论中提到了。

# class - CDI - 在运行时动态注入对象

> ID：11855687
> 
> 赞同：2
> 
> 时间：2012-08-07T23:45:27.690
> 
> 标签：class, dynamic, cdi, inject

如何在运行时注入对象？例如，如果我想在运行时将 DerivedOne、DerivedTwo 对象注入以下示例中的 Test 类，我该怎么做？我在 Spring 中找到了一些示例，但我没有使用 Spring。这是一个使用 Java EE 6 的带有 CDI 的动态 Web 项目。

```
public abstract class Base 
{
    public Base(String initiator)
    {
        this.initiator = initiator;
    }

    public abstract void process();

    public void baseProcess()
    {
        System.out.println("base process");
        process();
    }

    public String getInitiator()
    {
        return initiator;
    }

    private String initiator;
}

public class BaseUtil 
{
    public long start()
    {
        return System.currentTimeMillis();
    }

    public long stop()
    {
        return System.currentTimeMillis();
    }
}

public class DerivedOne extends Base 
{
    public DerivedOne(String initiator) 
    {
        super(initiator);
    }

    @Override
    public void process() 
    {
        long start = baseUtil.start();
        System.out.println(getInitiator() + " process");
        long stop = baseUtil.stop();
        System.out.println(stop - start);
    }

    @javax.inject.Inject
    private BaseUtil baseUtil;
}

public class DerivedTwo extends Base 
{
    public DerivedTwo(String initiator) 
    {
        super(initiator);
    }

    @Override
    public void process() 
    {
        long start = baseUtil.start();
        System.out.println(getInitiator() + " process");
        long stop = baseUtil.stop();
        System.out.println(stop - start);
    }

    @javax.inject.Inject
    private BaseUtil baseUtil;

}

@Startup
@Singleton
public class Test 
{
    @PostConstruct
    public void init()
    {
        String initiator = "two";
        Base base = null;

        if("one".equals(initiator))
        {
            base = new DerivedOne("DerivedOne");
        }
        else if("two".equals(initiator))
        {
            base = new DerivedTwo("DerivedTwo");
        }

        base.baseProcess();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:12:12.790

如果要根据运行时条件选择一种实现，可以使用带有[qualifiers的](http://docs.oracle.com/javaee/6/tutorial/doc/gjbck.html)[生产者方法](http://docs.oracle.com/javaee/6/tutorial/doc/gkgkv.html)。

对于测试 CDI 应用程序，我强烈推荐 Arquillian。 [http://arquillian.org/](http://arquillian.org/)

# android - 单击通知时更改 int 值

> ID：11855698
> 
> 赞同：0
> 
> 时间：2012-08-07T23:46:28.437
> 
> 标签：android, notifications

我一直在搜索有关单击通知时如何更改变量值的信息，但我没有找到任何东西。

我不想发起新的活动。我只想更改变量的值。

我能实现它吗？

预先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:51:44.010

启动一个活动，您可以在其中更改变量。如果您不希望看到该活动，请不要调用`setContentView()`.

# php - 试图让第一个 Ajax 程序工作，没有动态发生

> ID：11855699
> 
> 赞同：0
> 
> 时间：2012-08-07T23:46:34.093
> 
> 标签：php, ajax, wamp

我基本上是[从 w3c 学校复制这个示例](http://www.w3schools.com/ajax/ajax_aspphp.asp)，当您开始输入名称时，会添加一些建议。没有为我添加任何建议。

**nameguess.html**

```
<!DOCTYPE html>
<html lang="en-ca">
<head>
    <meta charset="utf-8" />
    <title>Ajaxing</title>
        <script type="text/javascript">
        <!--
            function showHint(str)
            {
            var xmlhttp;
            if (str.length == 0)
            {
              document.getElementById("txtHint").innerHTML="";
              return;
            }
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
              xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET","gethint.php?q="+str,true);
            xmlhttp.send();
            }
        //-->
        </script>
</head>
<body>
Hello.<br />
<form method="GET" action="">
    Name: <input type="text" id="txt1" /><br />
    Suggestions: <span id="txtHint"></span>
</body>
</html> 
```

**gethint.php**

```
<?php
// Fill up array with names
$a[]="Anna";
//removed code to save space
$a[]="Vicky";

//get the q parameter from URL
$q=$_GET["q"];

//lookup all hints from array if length of q>0
if (strlen($q) > 0)
  {
  $hint="";
  for($i=0; $i<count($a); $i++)
    {
    if (strtolower($q)==strtolower(substr($a[$i],0,strlen($q))))
      {
      if ($hint=="")
        {
        $hint=$a[$i];
        }
      else
        {
        $hint=$hint." , ".$a[$i];
        }
      }
    }
  }

// Set output to "no suggestion" if no hint were found
// or to the correct values
if ($hint == "")
  {
  $response="no suggestion";
  }
else
  {
  $response=$hint;
  }

//output the response
echo $response;
?> 
```

我将这两个文件都位于 WAMP 的 www 文件夹中，并且正在运行虚拟服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:01:39.907

我可以看到其他人已经回答了你正在尝试做的事情，但我建议不要像那个例子那样发出你的 ajax 请求。

而是尝试使用 jQuery 库来发出您的 ajax 请求。我能够将上面的代码缩短为这个。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        $.get(
        'gethint.php', //Code behind 

        {q : $("#txt1").val()}, //json string of variables to post

        function(data){$("#txtHint").html(data);}, // What to do with return data

        'json'); //Specify json 
    </script> 
```

从长远来看，这将使生活变得更加轻松，因为必须经历整个混乱并且不得不担心跨浏览器的兼容性是很臭的。

你可以在这里找到更多信息[JQuery](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:56:20.630

您错过了按键事件绑定：

```
<input type="text" id="txt1" onkeyup="showHint(this.value)"> 
```

此外，您的 PHP 可以简化为

```
<?php

if(!isset($_GET['q']) exit;

// Fill up array with names
$names = array("Anna", "Vicky");

//get the q parameter from URL
$q=$_GET["q"];

$hints = array();
foreach($names as $name) {
   if (stripos($name, $q) !== -1) $hints[] = $name;
}

if(count($hints) == 0) die("no suggestion");

echo implode(', ', $hints);

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:53:19.283

改变这个

```
<input type="text" id="txt1" /> 
```

至

```
<input type="text" id="txt1" onkeypress="showHint(this.value)"/> 
```

看看这是否有帮助

# twitter - 用于轻松创建 Twitter 位置地理坐标的地图工具？

> ID：11855705
> 
> 赞同：0
> 
> 时间：2012-08-07T23:47:00.397
> 
> 标签：twitter, geolocation

有谁知道用于在[Twitter 流媒体位置](https://dev.twitter.com/docs/streaming-apis/parameters#locations)创建四个点的点击工具，即。`stream.filter(locations=[60, 25, 73, 35])`

我想要一个工具，只需单击/拖动地图上的一个框，并获取复制/粘贴准备好的坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:15:23.553

打开谷歌地图，在左下角，有一个地图实验室的链接。

从那里，您可以为 Google 地图启用其他工具。

其中一个工具是纬度和经度标记，您可以随时将其放到地图上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:41:43.543

这是一个开始：[http ://code.google.com/apis/ajax/playground/#polylines_complex_v3](http://code.google.com/apis/ajax/playground/#polylines_complex_v3)

这实际上是我一直在寻找的：[http ://universimmedia.pagesperso-orange.fr/geo/loc.htm](http://universimmedia.pagesperso-orange.fr/geo/loc.htm)

# python - 制作 IM 程序 - 我是新手 - 如何连接到个人计算机，而不是 LAN - 使用 Python 3.2？

> ID：11855706
> 
> 赞同：0
> 
> 时间：2012-08-07T23:47:06.963
> 
> 标签：python, sockets, ip, chat

我想知道你是否可以帮助我进行一些编程。我正在尝试编写一个聊天程序，但我被卡住了。我可以很容易地使用 LAN，但我不能通过 WAN/Internet 进行操作，因为外部 IP 地址仅指 LAN/路由器。特别是如何连接到一台计算机？

我正在尝试用 Python 编写，但遇到了问题。我正在使用一个非常基本的客户端-服务器系统，两者都使用套接字模块（到目前为止）。

我遇到的问题是，虽然通过 LAN 连接很容易，但我需要通过 Internet 连接到一台计算机。这是因为外部 IP 仅指路由器。我知道我可能会使用端口转发，但我想知道是否有一种方法可以在用户不操纵路由器设置的情况下访问个人计算机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:59:55.477

有一种叫做[NAT Traversal](http://en.wikipedia.org/wiki/NAT_traversal)的东西。但这根本不是标准的，可能有办法做到这一点，这取决于路由器供应商和其他事情。因此，以通用方式实现是一件非常复杂的事情。

# php - 如何打印多维数组中的单个字段？

> ID：11855708
> 
> 赞同：0
> 
> 时间：2012-08-07T23:47:22.920
> 
> 标签：php, arrays

所以我为我的对象打印： print_r ($objMailer);

我得到以下信息：

```
mymailer Object
(
[_strRecipient:mymailer:private] => 
[_strBcc:mymailer:private] => 
[_strSubject:mymailer:private] => 
[_strEmail:mymailer:private] => 
[_arrData:mymailer:private] => Array
(
    [full_name] => brian
    [invitee_name] => test
    [email] => test@testing.com
    [captcha] => kqd2q9
)

[_arrAttachments:mymailer:private] => 
[_blnCaptcha:mymailer:private] => 1
[_arrErrors:mymailer:private] => Array
(
)

) 
```

我需要回显/打印出“全名”字段吗？我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:50:19.310

你不能小题大做。如`print_r`输出所示，这是在私有成员中。

您可以从 (?)`mymailer`对象中提供它：

```
return $this->_arrData['full_name']; 
```

或通过使用*反射*使其从外部访问：

```
$refObj  = new ReflectionObject($objMailer);
$refProp = $refObj->getProperty('_arrData');
$array   = $refProp->getValue($objMailer);

echo $array['full_name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:49:21.097

如果你想在`mymailer`类的方法中回显值，你可以使用：

```
echo $this->_arrData['full_name']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:50:07.927

由于它是私有的，因此您需要使用[吸气剂](http://en.wikipedia.org/wiki/Mutator_method#PHP_example)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T23:54:35.453

您引用的对象有一个 _arrData 成员变量，它具有私有范围解析，这意味着您不能从类外部访问它。有可能有一个公共访问器可以让您获得所需的信息，但除非您自省对象本身，否则无法判断。

我建议做类似的事情：

```
foreach (get_class_methods($mymailer) as $method) { echo 'M: ' . $method . '<br>'; } exit; 
```

然后您可以看到可用的方法，可能有一个 getData() 方法，您可以使用它执行以下操作：

```
$mailerData = $mymailer->getData();

var_dump($mailerData['full_name']); 
```

甚至可能有一种获取全名的方法，如下所示：

```
var_dump($mymailer->getFullname()); 
```

# algorithm - 如何确定排序数组在哪个索引处旋转？

> ID：11855709
> 
> 赞同：2
> 
> 时间：2012-08-07T23:47:29.780
> 
> 标签：algorithm, binary-search

给定一个数组，例如`[7,8,9,0,1,2,3,4,5,6]`，是否可以比 O(n) 更快地确定旋转发生的索引？

使用 O(n)，只需遍历所有元素并将第一个递减元素标记为索引。

一个可能更好的解决方案是从两端向中间迭代，但这仍然是 O(n) 的最坏情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:52:42.273

（编辑：下面假设元素是不同的。如果它们不不同，我认为没有什么比扫描数组更好的了。）

你可以对它进行二分搜索。我不会发布任何代码，但这是一般的想法：（我将假设`a >= b`其余部分。如果`a < b`，那么我们知道它仍然处于排序顺序）

取第一个元素，调用它`a`，最后一个元素`b`，和中间元素，调用它`c`。

如果`a < c`，那么您知道枢轴在`c`和之间`b`，并且您可以递归（将`c`和`b`作为您的新端点）。如果`a > c`，那么您知道枢轴位于两者之间的某个位置，并在这一半（以`a`和`c`作为结束）中递归。

附录：为了扩展到具有重复的情况，如果我们有，那么我们以and作为我们的结束`a = c > b`进行递归，而如果，我们从to扫描以查看是否存在某些元素使其不同。如果它不存在，那么 and 之间的所有数字都是相等的，因此我们以and作为我们的目的进行递归。如果是这样，有两种情况：`c``b``a = c = b``a``c``d``a``c``c``b`

`a > d < b`: 这里，`d`是我们从左边扫描以来最小的元素，我们就完成了。: 在这里，我们知道答案在和
`a < d > b`之间，因此我们以它们为目的进行递归。`d``b`

在最好的情况下，我们永远不必使用相等的情况，给我们`O(log n)`. 最坏的情况是，这些扫描几乎涵盖了所有阵列，给了我们`O(n)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:39:53.633

对于 N 大小的数组，如果该数组已旋转至少 1 次且少于 N 次，我认为它会正常工作：

```
int low=0, high = n-1;
int mid = (low +high)/2;
while( mid != low && mid != high)
 {
  if(a[low] < a[mid])
  low = mid;
  else
  high = mid;
  mid = (low + high)/2;
 }
return high; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:51:29.277

您可以使用二进制搜索。如果您选择 1 作为中心值，则您知道休息时间在上半场，因为 7 > 1 < 6。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T23:54:43.230

一种观察是移位等于最小元素的索引。因此，您所要做的就是使用二进制搜索来找到最小元素。唯一的问题是，如果数组具有相等的元素，则任务会变得有点棘手：您无法获得比`O(N)`时间更好的大 O 效率，因为您可以在输入`[0, 0, 0, 0, ..., 100, 0, 0, 0, ..., 0]`中找到比线性更快的唯一非零元素当然。但是下面的算法仍然实现了`O(Mins + Log(N))`where`Mins`是最小元素的数量，如果它`array[0]`是最小值之一（否则`Mins = 0`不给予惩罚）。

```
l = 0;
r = len(array) - 1;
while( l < r && array[l] == array[r] ) {
    l = l + 1;
}

while( l < r ) {
    m = (l + r) / 2;
    if( array[m] > array[r] ) {
        l = m + 1;
    } else {
        r = m;
    }
}

// Here l is the answer: shifting the array l elements left will make it sorted 
```

这适用于`O(log N)`唯一元素数组和`O(N)`非唯一元素数组（但仍然比大多数输入的简单解决方案更快）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-02T18:17:15.333

前提

*   数组按升序排序
*   数组左旋转

方法

*   首先我们需要找到最小元素所在的索引。
*   数组旋转的次数将等于数组长度与最小元素所在索引的差值。

所以任务是找到最小元素的索引。我们可以通过两种方式找到最低元素的索引

方法1 -

*   只需遍历数组，当当前元素小于下一个元素时，当前索引就是最小元素的索引。在最坏的情况下，这将需要 O(n)

方法二

*   使用 (lowIndex+highIndex)/2 找到中间元素
*   然后我们需要找到中间元素的哪一侧可以找到最小的元素，因为它可以在中间元素的左侧或右侧找到
*   我们将第一个元素与中间元素进行比较，如果第一个元素大于中间元素，则表示最小元素位于中间元素的左侧，并且
*   如果第一个元素小于中间元素，则可以在中间元素的右侧找到最低元素

所以这可以像二进制搜索一样应用，并且在 O(log(n)) 中我们可以找到最小元素的索引

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-11T22:31:15.340

使用递归方法：

static void Main(string[] args) { var arr = new int[]{7,8,9,0,1,2,3,4,5,6}; Console.WriteLine(FindRotation(arr)); }

```
 private static int FindRotation(int[] arr)
    {
        var mid = arr.Length / 2;
        return CheckRotation(arr, 0, mid, arr.Length-1);
    }

    private static int CheckRotation(int[] arr, int start, int mid, int end)
    {
        var returnVal = 0;
        if (start < end && end - start > 1)
        {
            if (arr[start] > arr[mid])
            {
                returnVal = CheckRotation(arr, start, start + ((mid - start) / 2), mid);
            }
            else if (arr[end] < arr[mid])
            {
                returnVal = CheckRotation(arr, mid, mid + ((end - mid) / 2), end);
            }
        }
        else
        {
            returnVal = end;
        }

        return returnVal;
    } 
```

# javascript - 如何判断 JS Windows8 Metro 应用程序是否可见

> ID：11855715
> 
> 赞同：1
> 
> 时间：2012-08-07T23:48:07.130
> 
> 标签：javascript, windows-8, microsoft-metro

我正在尝试创建一个应用程序，该应用程序在它变得可见时会做一些工作，而在它消失时会做其他工作。这通常通过页面可见性 api (http://css.dzone.com/articles/using-html5s-pagevisibility) 完成，但 Windows 8 目前不支持：http: [//msdn.microsoft.com/en-我们/图书馆/ie/hh673553(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh673553(v=vs.85).aspx)

有 onactivate 和 oncheckpoint 回调，但它们是针对流程生命周期的，不一定与应用程序可见性相关。具体来说，一个应用程序可以在暂停之前进入后台相当长的一段时间。

任何帮助，将不胜感激。

——亨利

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T02:17:41.297

我认为您想要[visibilitychange](http://msdn.microsoft.com/en-us/library/windows/apps/hh441213.aspx)事件。请参阅[此处](http://www.w3.org/TR/page-visibility/#sec-page-visibility)`Document`的文档。更多关于应用程序生命周期事件[的信息](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx#app_visibility)。

> **应用可见性**
> 
> 当用户从您的应用切换到另一个应用时，您的应用不再可见，但仍处于运行状态，直到 Windows 可以将其挂起（大约 10 秒）。如果用户离开您的应用但在 Windows 可以挂起它之前激活或切换回它，则该应用仍处于运行状态。
> 
> 当应用可见性更改时，您的应用不会收到激活事件，因为该应用仍在运行。Windows 只需根据需要在应用程序之间切换。如果您的应用需要在用户切换时执行某些操作，它可以处理[VisibilityChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.visibilitychangedeventargs.aspx) | [msvisibilitychange](http://msdn.microsoft.com/en-us/library/windows/apps/hh441213.aspx)事件。
> 
> 可见性事件不与恢复或激活事件一起序列化。不要假设这些事件以特定的顺序出现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T13:22:38.833

如果您想跟踪应用程序焦点开关，您可以使用`window.onblur`和`window.onfocus`。尤其是在 multimon 环境中，这很有帮助。

# php - 使用 PHP exec() 函数时 R 包无法正常工作

> ID：11855722
> 
> 赞同：1
> 
> 时间：2012-08-07T23:48:54.047
> 
> 标签：php, r, exec, rscript

**更新：已解决** 我发现了这个问题。

使用 .libPaths() 函数，我能够确定在通过 PHP 运行 Rscript 时，安装 HH 包的默认目录**不**包含在库路径中，即使当 R 通过命令提示符。

我已经通过单独调用 .libPaths('new/file/path'); 解决了这个问题。在我动态创建的语法中。当我这样做时，测试 <-require('HH'); 测试; 返回真；

感谢所有帮助过的人。

我正在创建一个 PHP 脚本，它将在 R 中运行一些分析。此分析需要 hov.bf() 函数，它是[HH](http://cran.r-project.org/web/packages/HH/index.html)包的一部分，但所有 R 输出（以及可能与 R 相关的进程) 从调用 hov.bf() 函数的行停止。如果我尝试通过 library('HH'); 加载 HH 库，则会出现相同的症状。令我困惑的是，通过（Ubuntu）命令提示符运行时，完全相同的 R 语法代码执行并输出所有打印语句（基本和 HH 函数）而没有错误。

**代码概览：**

**PHP 创建 R 语法并写入文件 Rsyntax.txt。以下一些行位于 R 语法文件中：**

```
dir = '/var/www/someDirectory/';
setwd(dir);
sink('record.lis', append=FALSE, split=TRUE);

print('hello-1');
test <- hov.bf(Values,Grouping);
print('hello-2');

q(); 
```

****生成语法文件后，PHP 然后运行：****

 **```
exec("/usr/bin/Rscript /var/www/someDirectory/Rsyntax.txt --no-save", $output); 
```

当通过 PHP 运行时，输出文件将包含在调用 hov.bf() 之前创建的所有输出*，*但在此调用之后似乎没有运行任何内容。也就是说，“hello-1”存在于输出文件中，但“hello-2”和 hov.bf() 调用下的所有其他输出不会写入文件。但是，当我将 PHP 的 exec() 中的确切命令复制并粘贴到 Ubuntu 的命令提示符时，它会毫无问题地运行*所有R 语法。*我还尝试将 .Rprofile 设置为在加载 R 时默认加载 HH 包，但这并没有通过 PHP 解决问题。

如果有人有任何想法，我将不胜感激。我已经没有什么想法了。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:09:24.183

我发现了这个问题。

使用该`.libPaths()`函数，我能够确定安装 HH 包的默认目录在通过 PHP 运行 Rscript 时**不**包含在库路径中，即使它在 R 通过命令提示符执行相同的代码时出现。

我已经通过`.libPaths('new/file/path');`在我的动态创建的语法中包含一个单独的调用来解决这个问题。当我这样做时，

```
test <-require('HH'); 
test; 
returns TRUE; 
```

感谢所有帮助过的人。**

# php - 二进制 in_array 搜索

> ID：11855729
> 
> 赞同：2
> 
> 时间：2012-08-07T23:49:26.897
> 
> 标签：php, arrays

我使用了很多`in_array`功能，这似乎拖慢了我的加载时间。[`in_array`我在php 文档](http://php.net/manual/en/function.in-array.php)中找到了以下代码。作者说“这个函数比 in_array() 快五倍。它使用二进制搜索，应该可以直接替代。”

```
function fast_in_array($elem, $array) 
{
   $top = sizeof($array) -1;
   $bot = 0;
   while($top >= $bot) 
   {
      $p = floor(($top + $bot) / 2);
      if ($array[$p] < $elem) $bot = $p + 1;
      elseif ($array[$p] > $elem) $top = $p - 1;
      else return TRUE;
   }
   return FALSE;
} 
```

但是该函数有效，但只有一半的时间，有时它不会输出它应该输出的所有内容，例如，如果我有一个包含苹果、橙子和柠檬的数组，并且对苹果和橙子进行匹配，它只会打印橙子或奇怪的东西。有人可以向我解释一下这个脚本究竟做了什么，以及为什么它不能代替`in_array`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T23:52:25.610

它执行二进制搜索，假设数组是按总排序的。如果数组没有排序，它将失败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T23:53:34.787

该函数进行二分查找。它仅在数组已排序时才有效。

PS声称它“快五倍”的说法很有趣。

# php - 显示 mysql 查询的部分结果

> ID：11855731
> 
> 赞同：1
> 
> 时间：2012-08-07T23:49:54.940
> 
> 标签：php, mysql, arrays

我有一个 sql 查询，它从我现在想要在数组中显示的 3 个不同的表中提取所有类型的数据。我可以让它输出来自 sql 查询的所有数据，但我只想根据表中列的值是否相同来一次显示部分数组。下面将尝试演示。

我的 sql 结果如下所示：

```
Client  |  Order  |  Exc1  |  Exc2  |  Rest  |  Reps  |
-------------------------------------------------------
Steve   |  1A     | this   |  That  |  This  |  that  |
-------------------------------------------------------
Mike    |  1A     | this   |  That  |  This  |  that  |
-------------------------------------------------------
Jax     |  1A     | this   |  That  |  This  |  that  |
-------------------------------------------------------
Steve   |  1B     | this   |  That  |  This  |  that  |
-------------------------------------------------------
Mike    |  1B     | this   |  That  |  This  |  that  |
-------------------------------------------------------
Jax     |  1B     | this   |  That  |  This  |  that  | 
```

我希望我的数组在 page1 上输出这个

```
Steve   |  1A     | this   |  That  |  This  |  that  |
-------------------------------------------------------
Mike    |  1A     | this   |  That  |  This  |  that  |
-------------------------------------------------------
Jax     |  1A     | this   |  That  |  This  |  that  | 
```

这在第 2 页等等。每个页面将包含所有客户的列表，并且每页只有一个订单值。每个用户的订单列值会有所不同，因为他们可以在订单字段中输入自己的文本。这是可能的，如果是这样，最好的方法是什么？

@Gordon Linoff 这是我当前的查询。我真的不明白你写了什么或更多它与我的查询有何关系。下面是我当前的查询。我没有完成输出到数组中。我只是在测试时拥有这个，直到得到我想要的结果。

```
function get_workout_class(){
$workout_class = array();

$workout_query = mysql_query("
SELECT *
FROM `movements`
LEFT JOIN  `classes` 
ON `movements`.`class_id` = `classes`.`class_id`
LEFT JOIN `clients`
ON `movements`.`class_id` = `clients`.`class_id`
WHERE `classes`.`class_id` = '$class_id' AND `user_id` = ".$_session['user_id']."
ORDER BY `movements`.`order`, `clients`.`first_name`

"); 
```

}

这是我的查询结果的屏幕截图，因此您可以看到我希望它们如何分组。要按不同“顺序”值拆分的页面。客户的数量因班级而异。

[http://custommovement.com/help/query.png](http://custommovement.com/help/query.png)

这是我的新查询。第一部分工作得很好，但子查询给我带来了问题。它没有拉任何结果。@戈登林诺夫

```
function get_workout_class($class_id){
$class_id = (int)$class_id;

$workout_class = array();

$workout_query = mysql_query("
WITH `workouts` as (
SELECT  
 `movements`.`movement_id`,
 `movements`.`order`,  
 `movements`.`mv_00`,  
 `movements`.`mv_01`,  
 `movements`.`mv_02`,  
 `movements`.`mv_03`,  
 `movements`.`mv_04`,
 `movements`.`rep_set_sec`,
 `movements`.`rest`, 
 `classes`.`class_name`,
 `clients`.`client_id`,
 `clients`.`first_name`, 
 `clients`.`last_name`, 
 `clients`.`nickname` 
 FROM  `movements` 
 LEFT JOIN  `classes` ON  `movements`.`class_id` =  `classes`.`class_id` 
 LEFT JOIN  `clients` ON  `movements`.`class_id` =  `clients`.`class_id` 
 WHERE  `classes`.`class_id` = '$class_id'
)

SELECT `wo`.* 
(SELECT COUNT(DISTINCT `order`) FROM `workouts` `wo2` WHERE `wo2`.`order` <= `wo`.`order`) as `pagenum`
FROM `workouts` `wo`
ORDER BY `pagenum`

");

echo mysql_num_rows($workout_query); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:53:53.177

试试这个。它使用子查询来获取订单的最大值。

```
SELECT  a.*
FROM    myTable a INNER JOIN
            (
                SELECT  Client, 
                        Max(`Order`) as MaxOrder
                FROM    myTable
                GROUP BY Client
            ) c
                ON a.Client = c.Client AND
                   a.`Order` = c.MaxOrder 
```

或者如果我没记错的话最简单的

```
SELECT *
FROM   myTable
WHERE  `Order` = '1B' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:01:50.743

我认为您可以通过在查询中添加页码来解决您的问题。不幸的是，这在 mysql 中相当痛苦，因为您必须使用自联接或相关子查询。

以下是如何使用相关子查询执行此操作的示例：

```
select t.*,
       (select count(distinct order) from t t2 where t2.order <= t.order) as pagenum
from t
order by pagenum 
```

根据您的原始查询（但不将其放入字符串）：

```
with workouts as (
     SELECT *
     FROM `movements` LEFT JOIN
          `classes`
           ON `movements`.`class_id` = `classes`.`class_id` LEFT JOIN
           `clients`
          ON `movements`.`class_id` = `clients`.`class_id`
      WHERE `classes`.`class_id` = '$class_id' AND `user_id` = ".$_session['user_id']." 
    )
select wo.*,
       (select count(distinct order) from workouts wo2 where wo2.order <= wo.order) as pagenum
from workouts wo
order by pagenum 
```

这几乎可以工作。. . 只有一个警告。您可以将“SELECT *”放入 with 子句，因为您有多个具有相同名称的列。放入您需要的列。

我忘记了mysql不支持“with”语句。我为糟糕的语法道歉。一种解决方法是使用视图或临时表。否则，查询会稍微复杂一些，因为逻辑必须重复两次：

```
select wo.*,
       (select count(distinct order)
        from (SELECT *
              FROM `movements` LEFT JOIN
                   `classes`
                   ON `movements`.`class_id` = `classes`.`class_id` LEFT JOIN
                   `clients`
                   ON `movements`.`class_id` = `clients`.`class_id`
              WHERE `classes`.`class_id` = '$class_id' AND `user_id` = ".$_session['user_id']." 
             ) wo2
        where wo2.order <= wo.order
       ) as pagenum
from (SELECT *
      FROM `movements` LEFT JOIN
           `classes`
            ON `movements`.`class_id` = `classes`.`class_id` LEFT JOIN
            `clients`
           ON `movements`.`class_id` = `clients`.`class_id`
       WHERE `classes`.`class_id` = '$class_id' AND `user_id` = ".$_session['user_id']." 
      ) wo
order by pagenum 
```

# android - getRunningAppProcesses() 返回被销毁的进程

> ID：11855735
> 
> 赞同：5
> 
> 时间：2012-08-07T23:50:11.033
> 
> 标签：android, android-activity, activity-lifecycle

我正在使用以下代码段来检查我`finish()`编辑的应用程序是否确实不再运行：

```
ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
List<ActivityManager.RunningAppProcessInfo> procList = am.getRunningAppProcesses();
for (ActivityManager.RunningAppProcessInfo proc : procList)
    Log.d(TAG, proc.processName);
} 
```

令我沮丧的是，我`finish()`编辑的一些应用程序（在他们的 Activity.onCreate() 中，甚至在他们有机会启动任何东西之前）仍然列在那里。

为什么？

LogCat 显示这些应用程序`onDestroy()` **肯定**被调用了。

从该列表中真正删除应用程序需要什么？

是`killProcess()`我唯一的办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:07:00.470

对于许多人来说，这是一个令人困惑的领域，正如可以在[另一个线程](https://stackoverflow.com/questions/6108830/android-does-ondestroy-or-finish-actually-kill-the-activity)中看到的那样。

事实上，即使是来自 O'Reilly 等受人尊敬的来源的[这本书](http://ofps.oreilly.com/titles/9781449390501/Main_Building_Blocks.html)也可以通过暗示*Destroyed*状态可能意味着“被杀死”并且可以从其中一个`onDestroy()`或*进程被杀死*来达到这一点，从而混淆问题：

![在此处输入图像描述](../Images/7544d0139fec731e8ca5a2c1eabd6ea2.png)

恕我直言，那个 O'Reilly 状态图有缺陷，并没有像“官方”图那样反映系统的全部行为：

![在此处输入图像描述](../Images/94be347b5517bd396b0e480cba8d9f3f.png)

分析此图，可以得出结论， `onDestroy()`永远不会自动导致*App 进程被杀死*。我相信这回答了你的第一个问题。

至于你的第二个问题，答案是**肯定**的：如果你真的想完全杀死你的应用程序的进程（你为什么要这样做？），那么你唯一的办法就是[killProcess()](http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29)。

# matrix - 如何将四元数转换为matrix4形式的实数，原理是什么？

> ID：11855736
> 
> 赞同：2
> 
> 时间：2012-08-07T23:50:10.827
> 
> 标签：matrix, quaternions

假设`Quaternion q=a+bi+cj+dk`， q 的矩阵 4 是：

```
| a -b  d -c|
| b  a -c -d|
|-d  c  a -b|
| c  d  b  a| 
```

这个矩阵是从哪里来的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:28:21.867

您的问题可以再澄清一点。然而，这个矩阵似乎在表达[四元数乘法的规则](http://en.wikipedia.org/wiki/Quaternion#Multiplication_of_basis_elements)。考虑两个复数**c [1] = a [1] + b [1] i**和**c [2] = a [2] + b [2] i**。如果将它们相乘，则得到**c [3] = c [1] c [2] = (a [1] a [2] -b [1] b [2] ) + (a [2] b [1] +a [1] b [2] )i**，因为您需要交叉乘以实部和虚部。您可以将其编码为矩阵/向量形式：

```
| a1 -b1 | * |a2| = |a1a2-b1b2|
| b1  a1 |   |b2|   |a2b1+a1b2| 
```

四元数规则是复数的扩展。同样的想法也成立。

# javascript - 即使在服务器将 Access-Control-Allow-Origin 设置为 '*' 后也会出现 javascript 错误

> ID：11855739
> 
> 赞同：1
> 
> 时间：2012-08-07T23:50:26.970
> 
> 标签：javascript, jquery, spring-mvc, cross-domain, cors

服务器已被修改以发送正确的请求标头。

**服务器 - 响应标头：**

```
Access-Control-Max-Age: 86400
Access-Control-Allow-Methods: GET, OPTIONS, POST
Access-Control-Allow-Origin: * 
Access-Control-Allow-Headers: Content-Type, X-Requested-With 
```

我正在为服务器（a.foo.com）使用 Spring web mvc，并使用 mvc 拦截器来设置 HttpResponseHeaders。

我还尝试将来源设置为请求的域，而不是“*”。

**客户端 - jQuery 代码**

我正在使用 jQuery/AJAX - jquery 1.7.1 这是 POST 请求的摘要。

```
var settings = {};
settings.url = "http://a.foo.com/api";
settings.type = 'POST';
settings.data = JSON.stringify(request);
settings.dataType = 'json';
settings.contentType = 'application/json; charset=utf-8';
settings.crossDomain = true; // adding or removing this, didn't make a difference
.... (setup callbacks etc)
jQuery.ajax(settings); 
```

该网站 - html/js 托管在 a.bar.com

**客户端出错 - javascript 控制台（在 chrome 上测试）**

XMLHttpRequest 无法加载[http://a.foo.com/api](http://a.foo.com/api)。Access-Control-Allow-Origin 不允许来源[http://a.bar.com 。](http://a.bar.com)

**问题**

还有什么我想念的吗？我想避免使用 JSONP，主要是因为我需要 POST 支持。

感谢您的任何指示，以及您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:33:06.223

I didn't have the response headers set for the OPTIONS request. I was setting it for the GET/POST requests.

Following this blog helped: [http://zhentao-li.blogspot.com/2012/06/enable-cors-support-in-rest-services.html](http://zhentao-li.blogspot.com/2012/06/enable-cors-support-in-rest-services.html)

Now when I hit the endpoint (a.foo.com/api/*) with the request method OPTIONS/GET/POST, I get the following headers:

```
Date: Wed, 08 Aug 2012 02:58:05 GMT  
Connection: keep-alive  
Content-Length: 0   
Allow: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS   
Server: Apache-Coyote/1.1   
Access-Control-Max-Age: 1800  
Access-Control-Allow-Methods: GET, POST, PUT, DELETE  
Content-Type: text/plain; charset=UTF-8   
Access-Control-Allow-Origin: *  
Access-Control-Allow-Headers: Content-Type 
```

I tested this out on Chrome. I wonder if there will be issues with IE! :) I'd like for this to work with IE9 as well, but from what I read, I shouldn't get my hopes up.

Thanks @Strelok for your suggestions. And @sth and @xdazz.

# ruby - ruby 中的这个字符是什么？

> ID：11855740
> 
> 赞同：0
> 
> 时间：2012-08-07T23:50:37.087
> 
> 标签：ruby, regex

从网络抓取中提取信息，我得到了这个名字：

```
>> temp
"Rob Bolden"
>>temp.split " " #space bar
["Rob Bolden"]
>>temp.split /\s/
["Rob Bolden"]
>>temp.split /\s+/
["Rob Bolden"]
>>temp.split /\W/
["Rob", "Bolden"] #what I expected 
```

什么不是空格字符 ( `/\s/`) 而是非单词字符 ( `/\W/`)？

**编辑**

```
$ruby -v 
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.2.0] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T23:56:15.600

使用 Ruby 1.9.2，您可以使用[`ord`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-ord)如下：

```
"Rob Bolden"[3].ord 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T23:57:54.040

它可能是 U+00A0 （不间断空格）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T00:07:52.173

```
temp = "Rob" << 160.chr << "Bolden" 
```

这是：

```
ASCII  ASCII          HTML    HTML   
Dec    Hex    Symbol  Number  Name    Description 
--------------------------------------------------------
160    A0             &#160;  &nbsp;  non-breaking space 
```

# sql - 这些别名是多余的吗？

> ID：11855745
> 
> 赞同：1
> 
> 时间：2012-08-07T23:51:21.437
> 
> 标签：sql, refactoring, alias

我正在查看一些看起来像这样的遗留 SQL（表和模式的名称已更改以保护任何内容）：

```
. . .FROM ABC.ENMITY ENMITY, ABC.ABCROLL ABCROLL, ABC.ABCSLACKER ABCSLACKER. . . 
```

这些是价值的别名吗？如果没有它们，以下工作不会：

```
. . .WHERE ENMITY.STRIFE = :strife AND ABCROLL = :bun AND ABCSLACKER = :punk. . . 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:54:57.717

它们完全没用。

它们根本没有任何作用，因为它们本质上是表名​​本身的别名。删除它们不会有任何效果。

它们可能是由一些代码生成工具放在那里的。

# javascript - Is advanced visual programming possible in pure HTML5?

> ID：11855761
> 
> 赞同：-1
> 
> 时间：2012-08-07T23:52:30.740
> 
> 标签：javascript, html

I saw just two examples:

[one](http://mrdoob.com/projects/harmony/#longfur) and [two](http://www.yvoschaap.com/chainrxn/)

I've been told that those effects are demos for **pure** HTML5 but is it really so?! Is there a way to code such cool stuff using **only** HTML5? Or do we still need to rely on JavaScript?

Furthermore, someone told me that one can build a solution using HTML5 and then compile it into Android and IOS at the same time. Is that correct?

I seem to have hard time finding info on the advanced part of HTML5\. I only see Canvas tag in, Frameset tag out etc... What do i miss?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:13:09.283

Everything gets labeled as HTML5 nowadays, even those things that have nothing to do with HTML5\. So watch out for the hype. There are some amazing things I've seen done with CSS alone but that's not HTML5\. Neither is Javascript. Don't be fooled. Read the source.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:58:17.680

No. HTML5 doesn't do much on its own.

From [http://mashable.com/2011/03/17/javascript-html5/](http://mashable.com/2011/03/17/javascript-html5/):

```
Although HTML5 is its own standard, the power of HTML5 is really 
only best realized with the use of CSS 3 and JavaScript. 
```

Though as others have mentioned, it's very common (in fact, I'd say more often than not) that the term "HTML5" connotes its use with all the other technologies, and not the standard in isolation.

# java - wsdl 没有服务元素

> ID：11855765
> 
> 赞同：4
> 
> 时间：2012-08-07T23:53:12.577
> 
> 标签：java, web-services

我必须使用 WCF Web 服务并获得 WSDL（外部，因此无法控制 WSDL）。在 WSDL 定义中，我没有找到具有服务、端口和地址元素的服务元素。WSDL 中不存在这种正常情况吗？这对于 WCF WSDL 来说很常见吗？我正在尝试使用轴为此生成存根并且遇到问题。

```
<wsdl:definitions>
....
...
..

**<wsdl:service>
      <wsdl:port>
       <wsdl1:address/>
      </wsdl:port>
    </wsdl:service>**

</wsdl:definitions> 
```

星号之间的部分是 WSDL 中缺少的部分。

有人遇到过这样的问题吗？请告诉我。

生成存根时，出现此错误：线程“主”org.apache.axis2.wsdl.codegen.CodeGenerationException 中的异常：在 org.apache.axis2.wsdl.codegen.CodeGenerationEngine.(CodeGenerationEngine.java:175 解析 WSDL 时出错) ) at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:35) at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24) 原因：org.apache.axis2.AxisFault：在 org.apache.axis2.description.WSDL11ToAllAxisServicesBuilder.populateAllServices(WSDL11ToAllAxisServicesBuilder.java:115) 的 org.apache.axis2.description.WSDL11ToAllAxisServicesBuilder.populateAllServices(WSDL11ToAllAxisServicesBuilder.java:115)的文件：/c:/work/xxx.wsdl 的 WSDL 中没有找到服务，目标命名空间为[http://tempuri.org/](http://tempuri.org/) 。 apache.axis2.wsdl.codegen.CodeGenerationEngine.(CodeGenerationEngine.java:169) ... 还有 2 个

我查看了代码 WSDL11ToAllAxisServicesBuilder.java，如果轴没有找到服务元素，就会出现这个错误。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:10:29.193

我发现为什么这个 WSDL 缺少服务标签，提供的原始 WSDL 有一个包含服务元素的导入。我不知道这是否是正确的方法，但是给我消费的端点没有它，我不得不深入研究其他导入的 WSDL 以查看其中一个具有服务元素。

希望这可以帮助某人。

我无法在 WSDL 上使用 wsdl2java，因为没有端点，但不知道如何告诉轴查看服务元素的导入 WSDL。

# c++ - C++ : 复制地图计算？

> ID：11855770
> 
> 赞同：0
> 
> 时间：2012-08-07T23:53:44.027
> 
> 标签：c++, map

`copy`有没有办法从 a到 cout做复杂的事情`map<A,B>`，使用 C++ 的复制功能？

看起来很复杂，因为 map 有不止一项，而且迭代器本身并不指向读取数据。

我的意思是我们对向量所做的事情：

`copy (vector.begin(), vector.end(), ostream<int>(cout," "));`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:04:34.390

地图的 value_type 是`std::pair<key_type, assoc_type>`. 要进行复制，您需要提供一个`operator<<`采用该类型的。例如，对于 a `map<string, int>`，它将是：

```
std::ostream *operator<<(std::ostream &os, std::pair<std::string, int> const &v) {
    return std::cout << v.first << ":\t" << v.second;
} 
```

你通常必须把它放在里面`namespace std`让编译器找到它。

# java - BigDecimal 欧拉数计算模拟 Math.exp(double a)

> ID：11855775
> 
> 赞同：7
> 
> 时间：2012-08-07T23:54:25.907
> 
> 标签：java

有没有一种普遍接受的方法来获得 BigDecimal 中的欧拉数？

我基本上想做 Math.exp(double a) 并且我基本上想要相同的函数，但使用 BigDecimal 计算以防止其他计算的精度损失。

我只想做，

```
BigDecimal.valueOf(Math.E).pow(BigDecimal.SOMEOTHERNUMBER) 
```

但不确定这是否是解决问题的正确方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T23:59:03.383

问题是欧拉数是无理数；在 BigDecimal 中，您必须拥有无限的内存才能保存它。没有先前存储的值的原因是，无论您需要多少小数位，您都不会获得当前应用程序的正确数字。

您将必须确定需要多少个小数，然后使用 String 构造函数 (new BigDecimal("2.71828...")) 构造 BigDecimal 表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:01:15.317

嗯，`Math.E`是双标。如果您想要更高精度的欧拉数表示，您可以使用任意精度的小数位来创建它，或者使用具有真正高精度版本 E 的 BigDecimal 数学库。

你可以自己用这样的东西来近似：[Better approximation of e with Java](https://stackoverflow.com/questions/1481780/better-approximation-of-e-with-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T00:02:50.140

虽然双 Math.E 对于大多数计算来说应该足够准确，但有一种方法可以更准确地计算*e*。

如果你想得到比双精度更高的*e*，你可以通过将 1/0!、1/1!、1/2!、1/3! 之和相加来计算它。

在哪里 ！表示阶乘。只需从零开始将所有阶乘的倒数相加即可。你加起来的术语越多，你得到的就越精确。当然，由于*e*是非理性的，因此您永远无法获得真正的价值，但您可以非常接近。

# git - 如何使用 MSBuild 发出 git 分支的 SHA1

> ID：11855776
> 
> 赞同：4
> 
> 时间：2012-08-07T23:54:26.970
> 
> 标签：git, syntax, msbuild, escaping

以下 git 命令...

```
git show -s --pretty=format:%T master 
```

...将发出当前 master 负责人的 SHA1。

但是，以下 MSBuild 任务仅生成文字“T”

```
<Exec Command="git show -s --pretty=format:%T master" /> 
```

**我需要改变什么，才能发出真正的 SHA1？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:01:59.543

所以显然诀窍是双重逃避 % 符号。

IE

```
<Exec Command="git show -s --pretty=format:%25%25T master" /> 
```

不过，我不太确定为什么会这样，所以我很感谢您对为什么会这样的评论。

# c# - 在运行时更改按钮名称和事件处理

> ID：11855779
> 
> 赞同：3
> 
> 时间：2012-08-07T23:54:37.433
> 
> 标签：c#, .net, vb.net, winforms

在我的winform中，在我的表单的designer.cs部分

```
this.Button1.Text = "&Click";
this.Button1.Click += new System.EventHandler(this.Button1_Click); 
```

在 form.cs 中

```
 private void Button1_Click(object sender, System.EventArgs e)
 {
     //Code goes here.
 } 
```

在表单的一部分中，我有一个树视图，当树视图内容展开时，我需要重命名上面的按钮并连接一个不同的事件

```
 Button1.Name = "ButtonTest";
  ButtonTest.Click += new System.EventHandler(this.ButtonTest_Click); 
```

但是，这失败了，说找不到 ButtonTest，我如何动态更改按钮的名称并调用不同的单击事件方法？

```
 private void ButtonTest_Click(object sender, System.EventArgs e)
 {
     //Code goes here.
 } 
```

一旦这被称为 ButtonTest_Click，我需要将其重命名为 Button1，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T23:59:26.677

`Button1`指一个变量名。变量指向`Button`具有`Name`属性的类型的实例。如果您更改`Name`属性的值，它不会更改变量的名称。您仍然需要将按钮称为`button1`. 事实上，它并没有真正改变按钮`Name`属性的值。该`Name`属性实际上只是为了帮助 Windows 窗体设计器而存在。

如果要将事件处理程序从一种方法更改为另一种方法，则必须先取消订阅原始处理程序，然后再订阅新处理程序。只需将您的代码更改为：

```
Button1.Name = "ButtonTest";
Button1.Click -= this.Button1_Click;
Button1.Click += this.ButtonTest_Click; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T15:56:15.550

这可以通过几种方式完成：

1.  从菜单：编辑 -> 重构 -> 重命名

2.  通过方法名称上的上下文菜单：Refactor -> Rename

3.  将光标放在方法名称上并键入 Alt + Shift + F10 然后选择重命名

4.  将光标放在方法名称上，然后按 F2

# ruby-on-rails - 测试实例方法调用类方法

> ID：11855780
> 
> 赞同：0
> 
> 时间：2012-08-07T23:54:38.277
> 
> 标签：ruby-on-rails, rspec

简单地说，我有一个带有调用类方法的实例方法的类，我想使用 RSpec 测试当我运行实例方法时正在调用类方法。所以，例如

```
class Test
  def self.class_method
    #do something
  end

  def instance_method
    #do stuff
    self.class.class_method
  end
end 
```

在 RSpec 中，我尝试过 Test.should_receive(:class_method)，但这似乎做了一些奇怪的事情，导致我的测试返回奇怪的行为。如果那是我应该使用的，也许 RSpec 已经过时了？我正在使用 RSpec 2.7.0。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:11:27.497

如果您并不真正关心*类*方法在做什么，而只关心它被调用，您可以执行以下操作：

```
describe Test do
  context '#instance_method' do
    it 'should call the class method' do
      Test.should_receive(:class_method)
      Test.new.instance_method
    end
  end
end 
```

# javascript - jquery从表单中获取数据

> ID：11855781
> 
> 赞同：5
> 
> 时间：2012-08-07T23:54:40.227
> 
> 标签：javascript, jquery

我有一个表单，我正在尝试使用 jquery 从表单中获取数据并对其进行验证。使用 jquery 将数据从表单获取到变量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T00:24:07.937

这是您可以使用的代码段 -

```
$('#myForm').submit(function() {
    // get all the inputs into an array.
    var $inputs = $('#myForm :input');

    // not sure if you wanted this, but I thought I'd add it.
    // get an associative array of just the values.
    var values = {};
    $inputs.each(function() {
        values[this.name] = $(this).val();
    });

}); 
```

[从stackoverflow-link](https://stackoverflow.com/questions/169506/obtain-form-input-fields-using-jquery)得到它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T00:09:38.107

好吧，我们走了

*这是**jQuery**脚本：*

```
function getData () {

$(document).ready(function() {
   var myTextFieldValue = $('#myTextField').value;
   alert('The value is: '+myTextFieldValue);
 });

} 
```

*这是**HTML***

```
<form action='#' method='whatever'>
 <input type='text' id='myTextField' />
 <input type='submit' onClick='getData()' />
</form> 
```

***注意：*** 为了使您的脚本正常工作**，您必须导入 jQuery 库**

像这样：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script> 
```

我没有尝试脚本，所以可能会有一些错误。希望我对你有帮助再见。

（有什么帮助可以pm我）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T00:18:05.360

没有办法在一行代码中从表单中获取所有数据。您必须按值检索它。如果你有一个`<input id='some-id' >` 公正的用途`var someId = $('#some-id').val();`。现在 someId 保存输入的值

val() 函数只返回第一个匹配元素的值（如果你不知道我的意思看看 jquery 选择器（http://api.jquery.com/category/selectors/）看看[http://api.jquery.com/val/](http://api.jquery.com/val/)`<textarea>`查看 val 函数，标签有一些奇怪的东西

记住要始终验证服务器端，即使您已经在客户端验证过，js 安全性也很容易绕过

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T00:22:26.703

使用 JQuery 验证插件。看看[这里](http://docs.jquery.com/Plugins/Validation#Using_remote_validation_to_help_with_captchas)

# javascript - 将动态内容添加到动态内容。可能吗？

> ID：11855783
> 
> 赞同：2
> 
> 时间：2012-08-07T23:54:43.287
> 
> 标签：javascript, jquery, jsp, web-applications

我正在为课程创建一个测验网站，但在格式化用户创建问题的页面时遇到了问题。当用户单击单选按钮时，我希望弹出与特定问题类型有关的其他信息。然后，如果用户单击在初始附加信息中创建的按钮，我希望弹出更多附加信息。

所以它开始看起来像这样

![初始显示](../Images/dd31dbcc8d43b551f5b0abef385ac8ce.png)

然后它看起来像这样

![添加附加信息后显示](../Images/37dbd08f79249b333458bc468c5e2d56.png)

然后一旦用户点击添加选项按钮几次，它看起来像这样

![添加更多信息后显示](../Images/cb49bdb85d9daa60ed6efc7d59879c33.png)

为此，我尝试使用 jquery 添加新内容。但是，我似乎无法显示该内容。这是当前代码

**在jsp中**

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript"
        src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="QuestionsCreate.js"></script>
    <meta charset="UTF-8">
    <title>Quiz Creation</title>
</head>
<body>
    <h1>Create Your Quiz</h1>

    <form action="QuestionsCreateServlet" method="post">
        <h2>Question Type</h2>

        <input type="radio" name="type" class="type" id="multipleChoice"
            value="multipleChoice" />
        <label for="multipleChoice">Multiple Choice</label><br/>

        <input type="radio" name="type" class="type" id="fillBlank"
            value="fillBlank" />
        <label for="fillBlank">Fill-in-the-Blank</label><br/>

        <input type="radio" name="type" class="type" id="pictureResponse"
            value="pictureResponse" />
        <label for="pictureRsponse">Picture Response</label><br/>

        <input type="radio" name="type" class="type" id="textResponse"
            value="textResponse" />
        <label for="textResponse">Text Response</label><hr/>

        <div class="jspf"></div>

        <input type="submit" name="button" id="button" value="Finish" />
    </form>
</body>
</html> 
```

**在 JavaScript 中**

```
$(document).ready(function() {
    $(".type").click(function(){
    $(".jspf").html("<jsp:include page='WEB-INF/" +
            $(".type").attr("value") + ".jspf' />");
    $("#button").attr("value", "Add");
    });

    var nOptions = 1;
    $("#add-option").click(function(){
    ++nOptions;
    $(".options").append("<input type='checkbox' name='option" +
            nOptions + "' value='" + nOptions + "' /> " +
            "<input name='name" + nOptions + "' /><br />");
    });

    var nBlanks = 1;
    $("#add-answer").click(function() {
    ++nBlanks;
    $(".fill-blank-answer").append("<input name='answer" + nBlanks +
            "' /><br/>");
    });
}); 
```

**示例jspf**

```
<h3>Question</h3>
<input name="prompt" />
<h3>Options</h3>
Check the options that denote the correct answer<br/>
<div class="options">
<input type='checkbox' name='option1' value='1' />
<input name='name1' /><br />
</div>
<input type="button" value="Add Option" id="add-option" /><hr/> 
```

我也尝试将 jspf 代码移动到 javascript 中，但这也不起作用。

有没有一种方法可以根据动态添加的内容向我的网页动态添加内容？先谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:16:14.127

您遇到的问题是您试图将服务器端 JSP 标记注入客户端的浏览器。以这一行为例：

```
$(".jspf").html("<jsp:include page='WEB-INF/" +
        $(".type").attr("value") + ".jspf' />"); 
```

一旦执行了那行 javascript，客户端的浏览器现在就有了标记：

```
<div class="jspf"><jsp:include page="wEB-INF/pictureResponse.jspf" /></div> 
```

浏览者不知道如何处理 <jsp:include> 标签，所以他们只是默默地忽略它们。

您需要做的是将您尝试包含的 jspf 映射到 url 并使用以下内容：

```
$(".jspf").load("/fragments/pictureResponse.jspf"); 
```

[$.load](http://api.jquery.com/load/)将 AJAX 请求从客户端浏览器发送回服务器，从服务器检索一些 HTML，然后将其插入到与 CSS 选择器“.jspf”匹配的元素中。

您的初始点击处理程序也存在问题。

```
$(".type").attr("value") 
```

[$.attr](http://api.jquery.com/attr/)总是返回第一个匹配元素的属性值，所以无论用户点击什么，该行都会评估为“multipleChoice”。您可能想要做的是：

```
$(this).attr("value") 
```

在单击处理程序的上下文中，“this”是指用户刚刚单击的内容。

**更新**

这是加载辅助内容后添加“添加选项”单击处理程序的方法：

```
$('jspf').load('/fragments/pictureResponse.jspf', function() {
    $('#add-option').click(function() {
        nOptions++;
        $('.options').append('<input type="checkbox" name="option' + nOptions +
        '" value="' + nOptions + '" />  <input name="name' + nOptions + '" /><br />");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-17T02:43:01.747

$.get("${ctx}/store/terminalApply/applyTemplate?terminalType=${terminalType}&index="+num, function(data){ $("#contentDiv").append(data); });

数据是页面内容

# javascript - 在循环中使用条件

> ID：11855788
> 
> 赞同：0
> 
> 时间：2012-08-07T23:55:29.380
> 
> 标签：javascript

我正在尝试使用`if...else`仅将 100 到 150 之间的奇数平方的语句进行检查，否则只会打印该数字。

我该如何修改我的`if`陈述以实现这一目标？有根据的猜测是使用了一个运算符或运算符的组合。

```
 for (i=100; i<=150; i++)
    {
        if (i === 0)
        {
            console.log(i * i);
        }
        else
        {
            console.log(i);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:59:55.397

两个字：模数除法

[不错的参考](http://www.w3schools.com/js/js_operators.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:01:08.843

您正在寻找的运营商是`%`：

```
for(i = 100; i <= 150; i++) {
    if(i % 2 === 1) { // It's odd
        console.log(i * i);
    } else {
        console.log(i);
    }
} 
```

`a % b`基本上`a`是除以时得到的余数`b`。它被称为[模数运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#.C2.A0.25_%28Modulus%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T00:02:49.887

```
if ( i % 2 === 0) {
  console.log(i)
} else {
  console.log(i * i)
} 
```

奇数平方。

# django - Redis 获取大字符串很慢

> ID：11855798
> 
> 赞同：10
> 
> 时间：2012-08-07T23:56:33.060
> 
> 标签：django, performance, caching, redis

我是 Redis 的新手，所以如果这是一个愚蠢的问题，我深表歉意。

我使用 Django 和 Redis 作为缓存。

我正在挑选大约 200 个对象的集合并将其存储在 Redis 中。

当我从 Redis 请求集合时，Django Debug Toolbar 通知我对 Redis 的请求需要 ~3 **seconds**。我一定是做错了什么。

*   服务器有 3.5GB 的内存，看起来 Redis 目前只使用了 ~50mb，所以我很确定它没有内存不足。

*   当我`get`使用 redis-cli 的密钥时，它需要的时间与我从 Django 执行的时间一样长

*   在 redis-cli 的密钥上运行`strlen`我被告知长度约为 2000 万（这是否太大？）

如何让 Redis 更快地返回数据？如果这看起来不寻常，那么可能有哪些常见的陷阱？我已经看过[这个](http://redis.io/topics/latency)关于延迟问题的页面，但我还没有真正跳出来。

我不确定将大量数据存储在一个密钥中是否是一个非常糟糕的主意，或者我的配置是否有问题。任何帮助或建议或阅读的东西将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-08T09:31:26.740

Redis 不是为存储非常大的对象而设计的。您不应该将整个集合存储在 Redis 中的单个字符串中，而是使用 Redis 列表或设置作为对象的容器。

此外，泡菜格式未针对空间进行优化……您需要更紧凑的格式。Protocol Buffers、MessagePack，甚至是普通的 JSON，可能更适合这个。您应该考虑在存储数据之前应用轻量级压缩算法（如 Snappy、LZO、Quicklz、LZF 等）。

最后，性能可能是网络绑定的。在我的机器上，从 Redis 检索一个 20 MB 的对象需要 85 毫秒（不是 3 秒）。现在，如果我使用远程服务器运行相同的测试，则需要 1.781 秒，这在这个 100 Mbit/s 网络上是预期的。持续时间完全取决于网络带宽。

最后一点：一定要使用最近的 Redis 版本——已经做了一些优化来处理大对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:03:29.917

它很可能只是字符串的大小。我会看看你的对象是否被有效地序列化。

# java - 了解神秘的 Oracle JDBC 错误 - ORA-00911：无效字符

> ID：11855799
> 
> 赞同：23
> 
> 时间：2012-08-07T23:56:35.527
> 
> 标签：java, jdbc, oracle11g

我正在制作 Java 1.6-JDBC-Oracle 11 代码。我创建了一个名为employee 的表，其中包含id、name 和age。我收到错误 - ORA-00911：无效字符。我怎样才能解决这个问题 ？

这是我的代码-

```
import java.sql.*;
import java.util.Properties;
import java.io.IOException;
import java.io.FileInputStream;

public class HelloOracle {

    static String query =
        "SELECT emp_id, emp_name, emp_age " +
        "FROM employee;";

    public static void main(String[] args) {
        String username = "";
        String password = "";
        Properties prop = new Properties();
        try {
            FileInputStream fis = new FileInputStream("Login.properties");
            prop.load(fis);
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        username = prop.getProperty("username").trim();
        password = prop.getProperty("password").trim();

        try {
            Connection con = DriverManager.getConnection("jdbc:oracle:thin:@//localhost:1521/xe", username, password);

            Statement stmt = con.createStatement();

            ResultSet rs = stmt.executeQuery(query);

            while (rs.next()) {
                System.out.print(rs.getString("emp_id"));
                System.out.print("  ,  ");
                System.out.print(rs.getString("emp_name"));
                System.out.print("  ,  ");
                System.out.print(rs.getString("emp_age"));
                System.out.println();
            }
        } catch (SQLException e) {
            System.out.println("Exception: " + e);
        }

    }

} 
```

不幸的是，oracle 错误消息不如 mysql 或 mssql 信息丰富，我无法轻松解决它们。我也看不到哪行代码导致了异常。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-07T23:58:30.100

尝试从 SQL 语句的末尾删除分号。

IE

```
static String query = "SELECT emp_id, emp_name, emp_age " +
    "FROM employee"; // no trailing ";" in the SQL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:00:00.090

波西米亚风格完全正确。我不明白为什么这这么难。如果你将消息弹出到谷歌，你会得到这个：

[http://www.dba-oracle.com/sf_ora_00911_invalid_character.htm](http://www.dba-oracle.com/sf_ora_00911_invalid_character.htm)

分号是第一个注意到的问题。

另一个建议：不要这样做。

```
catch(SQLException e){System.out.println("Exception: " + e);} 
```

改为这样做：

```
catch(SQLException e){
    e.printStackTrace(); // better yet, log it.
} 
```

它会给你更多的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T23:32:38.420

去除 ; 从查询内部

# python - 确定图像是否是序列的一部分的最佳方法是什么

> ID：11855801
> 
> 赞同：0
> 
> 时间：2012-08-07T23:56:58.880
> 
> 标签：python, regex, sequential

我有一个图像文件，我想检查它是否是使用 python 的图像序列的一部分。

例如我从这个文件开始：

```
/projects/image_0001.jpg 
```

我想检查文件是否是序列的一部分，即

```
/projects/image_0001.jpg
/projects/image_0002.jpg
/projects/image_0003.jpg
... 
```

如果我可以确定文件名是否可以是序列的艺术，即是否存在文件名的数字序列，则检查是否存在图像序列似乎很简单

我的第一个问题是要求用户将`####`数字添加到文件路径中，并输入开始和结束帧号来替换散列，但这显然不是很用户友好。有没有办法用正则表达式或类似的东西检查字符串中的数字序列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:34:28.417

我假设问题更多是因为能够区分磁盘上的排序文件，而不是知道有关文件名本身的任何特定信息。

如果是这样的话，并且您正在寻找的是足够聪明的东西，可以列出如下列表：

*   /path/to/file_1.png
*   /path/to/file_2.png
*   /path/to/file_3.png
*   ...
*   /path/to/file_10.png
*   /path/to/image_1.png
*   /path/to/image_2.png
*   ...
*   /path/to/image_10.png

并返回一个结果说 - 我有 2 个文件序列： /path/to/file_#.png 和 /path/to/image_#.png 你将需要 2 次通过 - 第一次通过来确定文件的有效表达式，第二遍找出所有其他文件满足该要求。

您还需要知道是否要支持间隙（是否需要连续）

*   /path/to/file_1.png
*   /path/to/file_2.png
*   /path/to/file_3.png
*   /path/to/file_5.png
*   /path/to/file_6.png
*   /path/to/file_7.png

这是 1 个序列 (/path/to/file_#.png) 还是 2 个序列 (/path/to/file_1-3.png, /path/to/file_5-7.png)

另外 - 你想如何处理序列中的数字文件？

*   /path/to/file2_1.png
*   /path/to/file2_2.png
*   /path/to/file2_3.png

等等

考虑到这一点，这就是我将如何完成它：

```
 import os.path
    import projex.sorting
    import re

    def find_sequences( filenames ):
        """
        Parse a list of filenames into a dictionary of sequences.  Filenames not
        part of a sequence are returned in the None key

        :param      filenames | [<str>, ..]

        :return     {<str> sequence: [<str> filename, ..], ..}
        """
        local_filenames   = filenames[:]
        sequence_patterns = {}
        sequences         = {None: []}

        # sort the files (by natural order) so we always generate a pattern
        # based on the first potential file in a sequence
        local_filenames.sort(projex.sorting.natural)

        # create the expression to determine if a sequence is possible
        # we are going to assume that its always going to be the 
        # last set of digits that makes a sequence, i.e.
        #
        #    test2_1.png
        #    test2_2.png
        #
        # test2 will be treated as part of the name
        # 
        #    test1.png
        #    test2.png
        #
        # whereas here the 1 and 2 are part of the sequence
        #
        # more advanced expressions would be needed to support
        # 
        #    test_01_2.png
        #    test_02_2.png
        #    test_03_2.png

        pattern_expr = re.compile('^(.*)(\d+)([^\d]*)$')

        # process the inputed files for sequences
        for filename in filenames:
            # first, check to see if this filename matches a sequence
            found = False
            for key, pattern in sequence_patterns.items():
                match = pattern.match(filename)
                if ( not match ):
                    continue

                sequences[key].append(filename)
                found = True
                break

            # if we've already been matched, then continue on
            if ( found ):
                continue

            # next, see if this filename should start a new sequence
            basename      = os.path.basename(filename)
            pattern_match = pattern_expr.match(basename)
            if ( pattern_match ):
                opts = (pattern_match.group(1), pattern_match.group(3))
                key  = '%s#%s' % opts

                # create a new pattern based on the filename
                sequence_pattern = re.compile('^%s\d+%s$' % opts)

                sequence_patterns[key] = sequence_pattern
                sequences[key] = [filename]
                continue

            # otherwise, add it to the list of non-sequences
            sequences[None].append(filename)

        # now that we have grouped everything, we'll merge back filenames
        # that were potential sequences, but only contain a single file to the
        # non-sequential list
        for key, filenames in sequences.items():
            if ( key is None or len(filenames) > 1 ):
                continue

            sequences.pop(key)
            sequences[None] += filenames

        return sequences 
```

以及一个示例用法：

```
>>> test =   ['test1.png','test2.png','test3.png','test4.png','test2_1.png','test2_2.png','test2_3.png','test2_4.png']
>>> results = find_sequences(test)
>>> results.keys()
[None, 'test#.png', 'test2_#.png'] 
```

那里有一种方法是指*自然排序*，这是一个单独的主题。我刚刚使用了我的 projex 库中的自然排序方法。它是开源的，所以如果您想使用或查看它，请访问：http: [//dev.projexsoftware.com/projects/projex](http://dev.projexsoftware.com/projects/projex)

但是该主题已在论坛的其他地方有所涉及，因此仅使用了图书馆中的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T00:39:37.217

使用 python 的`re`模块来查看字符串是否包含数字序列相对容易。你可以这样做：

```
mo = re.findall('\d+', filename) 
```

这将返回所有数字序列的列表`filename`。如果：

*   有一个结果（即文件名仅包含一个数字序列），并且
*   随后的文件名具有相同长度的单个数字序列，并且
*   第二个数字序列比前一个大 1

...那么也许它们是序列的一部分。

# asp.net - 如何让实体框架在不保存对象的情况下创建/更新数据库表

> ID：11855802
> 
> 赞同：1
> 
> 时间：2012-08-07T23:56:59.060
> 
> 标签：asp.net, entity-framework-4.1

我正在为我的班级添加新字段，但我注意到在我保存该班级的对象之前不会创建表格。这有点烦人，有没有办法强制它在 App start 上创建该表或其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T04:24:11.050

您可以通过以下方式强制初始化`Application_Start`器

```
protected void Application_Start()
{
    Database.SetInitializer(new DropCreateDatabaseIfModelChanges<MyContext>());
    (new MyContext()).Database.Initialize(true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:48:18.083

我认为您可以使用存储库和工作单元模式。

[在 Entity Framework 4.0 中使用存储库和工作单元模式](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)

其中 Save 方法是在 IUnitOfWork 接口中定义的。

```
public interface IUnitOfWork
{
    void Save();
} 
```

# php - 如何在 Codeigniter 中制作自定义标记语言/解析器？

> ID：11855810
> 
> 赞同：1
> 
> 时间：2012-08-07T23:58:33.447
> 
> 标签：php, parsing, codeigniter

我正在 Codeigniter 中开发自定义 CMS，并且我正在尝试允许用户使用自定义标签，而不必将 HTML 放入帖子中。

例如，如果一个人在发布有关游戏的内容并希望包含一个风格化的按钮作为号召性用语，他们只需键入`[button=http://example.com]Play this game[/button]`而不是 HTML`<div class="action-button"><a href="http://example.com">Play this game</a></div>`

显然，这是一个简单的例子。我想做一些更复杂的事情，比如`[gallery=120]`包括一个 ID 为 120 的图片库。

我一直在寻找，我没有太多的运气。我觉得我正在尝试做的事情还有另一个词，但它只是没有来找我，也许这会产生更好的搜索结果。

任何让我前进的提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:07:13.210

简短的回答是 STRING 和 REGEX 替换语句。

如果您熟悉与 CodeIgniter 关联的 CMS，即 ExpressionEngine，它会使用 str_replace() 和 preg_replace() 解析模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:21:13.223

您要查找的术语是**BBCode**（公告板代码）。

至于解析，您可以查看一些论坛应用程序，也许还有 CI 的模板解析器以获取灵感。就像 Jarrett 已经提到的那样，它们主要使用`str_replace()`和`preg_replace()`功能。不过，类似的东西`[gallery=120]`会更先进。

# .net - 表单发布 mvc3 .net 后跳转到错误

> ID：11855814
> 
> 赞同：3
> 
> 时间：2012-08-07T23:59:21.120
> 
> 标签：.net, html, asp.net-mvc-3, forms, controller

我有一个打印到屏幕上的数据列表。在屏幕底部（滚动），我有一个带有文本字段的表单，用户可以在其中输入数据。当他们单击提交并且表单无效时，错误会正确显示，但用户现在正在查看在页面的最顶部。因此，他们看不到页面底部有错误。我希望它跳到页面底部的表单，以便用户可以看到发生了错误。

我考虑过使用锚点，但问题是；因为当我意识到表单无效时我已经在控制器中，所以我需要重定向回将主题标签附加到 url 的同一控制器。对我来说，这看起来不像是好的做法，而且有点浪费。

有谁知道更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:01:39.390

一种方法是始终发布到锚点并在视图中确定放置锚点的位置。如果有模型错误，则将命名锚放在页面底部，如果没有错误，则将锚放在页面顶部。使这一点复杂化的一件事是没有 Html.BeginForm 重载需要一个锚点。你可以像这样简单地实现它

```
<form action="@Url.Action("actionName", "controllerName")#anchor_name" method="post">

    ..... form contents .....

</form> 
```

或者您可以编写自定义 HTML 帮助程序

```
public static class FormExtensions
{
    public static MvcForm CustomBeginForm(this HtmlHelper htmlHelper, string actionName, string controllerName, string fragment)
    {
        var formAction = UrlHelper.GenerateUrl(null, actionName, controllerName, htmlHelper.ViewContext.HttpContext.Request.Url.Scheme, null, fragment, null, htmlHelper.RouteCollection, htmlHelper.ViewContext.RequestContext, true);
        var builder = new TagBuilder("form");
        builder.MergeAttribute("action", formAction);
        builder.MergeAttribute("method", "post", true);
        htmlHelper.ViewContext.Writer.Write(builder.ToString(TagRenderMode.StartTag));
        return new MvcForm(htmlHelper.ViewContext);
    }
} 
```

然后你可以使用`@Html.CustomBeginForm('action', 'controller', 'anchor_name')`

[这个问题](https://stackoverflow.com/questions/4397203/asp-net-mvc-post-form-to-html-bookmark)很有用，并告知了我的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:32:38.493

```
 public static MvcForm BeginFormAnchor(this HtmlHelper htmlHelper, string actionName, string controllerName, object routeValues, FormMethod method, object htmlAttributes, string hashTag)
    {
        var formAction = UrlHelper.GenerateUrl(null, actionName, controllerName, htmlHelper.ViewContext.HttpContext.Request.Url.Scheme, null, hashTag, ConvertToRouteValueDictionary(routeValues), htmlHelper.RouteCollection, htmlHelper.ViewContext.RequestContext, true);
        var builder = new TagBuilder("form");
        builder.MergeAttribute("action", formAction);
        builder.MergeAttribute("method", method.ToString(), true);
        foreach (KeyValuePair<string, string> attribute in ConvertToDictionaryStringString(htmlAttributes))
        {
            builder.MergeAttribute(attribute.Key, attribute.Value);
        }
        htmlHelper.ViewContext.Writer.Write(builder.ToString(TagRenderMode.StartTag));
        return new MvcForm(htmlHelper.ViewContext);
    }

    private static Dictionary<string, string> ConvertToDictionaryStringString(object obj)
    {
        return obj.GetType().GetProperties().ToDictionary(o => o.Name, o => o.GetValue(obj, null).ToString());
    }

    private static RouteValueDictionary ConvertToRouteValueDictionary(object obj)
    {
        RouteValueDictionary rvd = new RouteValueDictionary();
        PropertyDescriptorCollection props = TypeDescriptor.GetProperties(obj);
        foreach (PropertyDescriptor prop in props)
        {
            rvd.Add(prop.Name, prop.GetValue(obj));
        }
        return rvd;
    } 
```

我这样称呼它：

```
@using (Html.BeginFormAnchor("Action", "Controller", new { id = Model.ID }, FormMethod.Post, new { @id = "formID" }, "anchorName")) 
```

# android - 在旋转画布中绘制静态文本

> ID：11855817
> 
> 赞同：0
> 
> 时间：2012-08-07T23:59:50.623
> 
> 标签：android, canvas

所以我有这个 onDraw 功能

```
protected void onDraw(Canvas canvas) {
                    Paint paint = mPaint;

                    canvas.drawColor(Color.WHITE);

                    paint.setAntiAlias(true);
                    paint.setColor(Color.BLACK);
                    paint.setStyle(Paint.Style.FILL);

                    int w = canvas.getWidth();
                    int h = canvas.getHeight();
                    int cx = w / 2;
                    int cy = h / 2;

                    canvas.translate(cx, cy);
                    if (mValues != null) {            
                        canvas.rotate(-mValues[0]);
                    }
                    canvas.drawPath(mPath, mPaint);

                    Paint paint1 = new Paint(); 

                    paint1.setColor(Color.BLACK); 
                    paint1.setTextSize(25); 
                    canvas.drawText("Some Text", 10, 25, paint1); 

                } 
```

它的作用是绘制一个正在旋转的箭头，并且文本也在箭头附近旋转我想要的是箭头下方某处的静态文本......或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:04:30.573

使用`canvas.save();`和`canvas.restore();`类似的东西：

```
protected void onDraw(Canvas canvas) {
    Paint paint = mPaint;

    canvas.drawColor(Color.WHITE);

    paint.setAntiAlias(true);
    paint.setColor(Color.BLACK);
    paint.setStyle(Paint.Style.FILL);

    int w = canvas.getWidth();
    int h = canvas.getHeight();
    int cx = w / 2;
    int cy = h / 2;

    canvas.save();
    canvas.translate(cx, cy);
    if (mValues != null) {            
           canvas.rotate(-mValues[0]);
    }
    canvas.drawPath(mPath, mPaint);
    canvans.restore();

    Paint paint1 = new Paint(); 

    paint1.setColor(Color.BLACK); 
    paint1.setTextSize(25); 
    canvas.drawText("Some Text", 10, 25, paint1); 

} 
```

希望有帮助。

# mysql - 当一些项目组合在一起时如何对项目进行分类需要指导

> ID：11855822
> 
> 赞同：2
> 
> 时间：2012-08-07T23:59:59.177
> 
> 标签：mysql

我有一张桌子，里面有物品：

```
id      name         groups 
1       a1          
2       a2           b1
3       a3
4       c1           
5       c2
6       c3           b1 
```

我想找出一种有效的方法来对这些项目进行排序，`name`如果`groups`不存在（阅读：没有条目 - null），或者如果`groups`存在，使用`groups`.

因此，如果我对下表进行排序，结果将是：

```
a1
a3
a2
c3
c1
c2 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:03:42.217

如果“空白”表示`null`或`''`，请使用：

```
select id, name, groups
from mytable
order by if(groups is null or groups = '', name, groups) 
```

如果“空白”意味着 just `null`，那么这个更简单的版本将起作用：

```
select id, name, groups
from mytable
order by ifnull(groups, name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:02:30.593

```
ORDER BY CASE WHEN groups = '' OR groups IS NULL THEN name ELSE groups END 
```

# xcode - 如何让网络进度微调器显示在 iOS 中？

> ID：11855823
> 
> 赞同：4
> 
> 时间：2012-08-08T00:00:12.633
> 
> 标签：xcode, ios5

我有一个应用程序，每次加载时都会从 Internet 下载多个资源（例如 rss 提要和图像）。但是，即使下载所有数据需要几秒钟的时间，Wifi/3G 符号旁边的进度微调器也不会出现。我认为这应该在任何时候发出网络请求时显示，并且许多第 3 方应用程序都会显示此显示（例如 Facebook）。我在非 UI 线程上使用 GCD 提出请求，但我仍然希望微调器能够显示。

他们对如何让微调器出现有任何建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T00:11:55.560

您有责任根据需要打开和关闭网络活动指示器。例如：

```
[UIApplication sharedApplication].networkActivityIndicatorVisible = YES; 
```

# msbuild - TFS 2010 CI 构建中的自动化单元测试上的“测试运行时代理进程已停止”

> ID：11855825
> 
> 赞同：1
> 
> 时间：2012-08-08T00:00:21.307
> 
> 标签：msbuild, mstest, tfsbuild

我尝试将一些单元测试与我们的 TFS 2010 CI 构建过程集成/自动化，并在测试失败时收到这个奇怪的错误消息。

在花了一些时间试图找出根本原因之后，我将代码简化为几行：

如果我做类似的事情

```
Book b = new Book { ID = 1, Name = "test book" };
Category c = new Category { ID = 1, Name = "test category" };

Assert.AreEqual(1,1); 
```

那么一切都很好。但如果我这样做：

```
Book b = new Book { ID = 1, Name = "test book" };
Category c = new Category { ID = 1, Name = "test category" };

b.Category = c;

Assert.AreEqual(1,1); 
```

单元测试将失败，并显示“测试运行时代理进程已停止”消息。

如果我在本地机器上单独运行测试，这两个版本都可以正常工作。

我查看构建服务器上的事件查看器并看到以下内容：

```
Faulting application name: QTAgent32.exe, version: 10.0.30319.1, time stamp: 0x4ba20efb
Faulting module name: System.Data.Entity.ni.dll, version: 4.0.30319.1, time stamp: 0x4ba1e2fd
Exception code: 0xc00000fd
Fault offset: 0x0029ffae
Faulting process id: 0x484
Faulting application start time: 0x01cd74e84f30a93b
Faulting application path: c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\QTAgent32.exe
Faulting module path: C:\Windows\assembly\NativeImages_v4.0.30319_32\System.Data.Entity\7aa839fb16503243d6ae454ab334bcf4\System.Data.Entity.ni.dll
Report Id: 8d4222b0-e0db-11e1-8dbe-005056a3481b 
```

这里有人见过这种奇怪的行为吗？

编辑：我使用的是 EF 4.0，数据库优先模型，因此所有实体类都是使用 ADO.NET 实体数据模型模板创建的。

# objective-c - 使用 iOS、Tiled、Box2D 和 XCode。导入我自己的 .tmx 文件时出现问题

> ID：11855827
> 
> 赞同：0
> 
> 时间：2012-08-08T00:00:41.390
> 
> 标签：objective-c, ios

[因此，使用本教程的代码](http://www.uchidacoonga.com/2011/01/side-scrolling-the-background-in-box2d/)和我自己创建的任何 TMX 平铺地图编辑器文件时，我都会收到错误“TMX：不支持的压缩方法” 。

我只是想弄清楚如何使用平铺来制作有趣的地图，因为我正在创建一个横向滚动游戏，因此我将其用作参考。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:53:05.307

Tiled has multiple compression modes for saving - under File -> Preferences -> Store tile layer data as: for iOS and Box2D, this should be set to Base64 (gzip compressed).

# solr - 如何在 Solr 中进行 NOT IN 查询？

> ID：11855830
> 
> 赞同：20
> 
> 时间：2012-08-08T00:01:01.320
> 
> 标签：solr

如何从 Solr 结果集中排除一组文档 ID？基本上像

`/select?q=tag_id:367 AND NOT id:(306670,302209)`

我试过了，它不排除具有这些 id 的文档。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-08T02:42:20.167

试试这个：

```
/select?q=*:*&fq=tag_id:367 AND id:[* TO *] -id:(306670 302209) 
```

这应该允许您构建添加任意数量的 id，而不必在`-id:302209`每次想要消除 ID 时添加。反过来也是如此，您可以将`-`a 与 a交换`+`并强制一个值数组也存在。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T00:23:30.990

找到了一个解决方案：

```
/select?q=tag_id:367&fq=-id:306670 AND -id:302209 
```

不确定这是否是最好的方法！

# php - HTML：仅用一个标签关闭多个标签

> ID：11855832
> 
> 赞同：0
> 
> 时间：2012-08-08T00:01:06.873
> 
> 标签：php, html

我有一个具有 ANSI 颜色的日志文件。我使用 PHP 将这些 str_replace 替换为`<span color="">`HTML 标记。

如果我使用 PHP str_replace，并将颜色重置解析为`</span>`，我将如何结束多个跨度声明？

例子：`<span color="red"><span color="blue"></span>`

我怎样才能使它`</span>`结束前面的两个陈述？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:02:41.340

你不会，你需要使用两个`</span></span>`标签来关闭这两个`<span>`标签。

对于你的情况，这将是

```
<span color="red"><span color="blue"></span></span> 
```

**注意：** *正如@calvinf 在下面的评论中指出的那样，您应该使用该属性，`style="color:blue;"`因为该`color`属性已被弃用很长时间。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:04:52.057

当浏览器解释该`<span>`标签时，它期望该 Exact Same 标签有一个结束标签。因此，无论您打开了多少个，都不能使用一个`</span>`，因为浏览器会拼命搜索其他的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T00:08:35.330

我认为没有办法。我认为你必须这样做，首先手动添加缺少的“ `</span>`”，这有点难看或者你可以找出你为什么缺少一个

# java - 选项卡的组件未显示

> ID：11855835
> 
> 赞同：1
> 
> 时间：2012-08-08T00:01:25.830
> 
> 标签：java, swing, tabs, layout-manager, jtabbedpane

我编写了以下代码，但未显示选项卡的组件....事实上，当我在文本框中输入内容时，我想动态创建选项卡...创建的选项卡应包含一个新的文本字段和按钮. 此代码是一个示例，完成后我还有另一个问题。

请让我知道我在哪里犯了错误。

```
package test;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.JTextField;
import javax.swing.border.BevelBorder;

public class TestingTab extends JFrame {

private JTextField jTextField1;
private JButton jButton1;
static ArrayList<JPanel> ary = new ArrayList<JPanel>();
private int tabIndex=0;
static int index=0;
private JTabbedPane tabbedPane;

/**
 * @param args
 */
public TestingTab(){

    super("Testing Tab Frame");
    setLayout(null);

    Handler but1 = new Handler();

    jTextField1 = new JTextField();
    jTextField1.setVisible(true);
    jTextField1.setBounds(12, 12, 85 , 30);
    add(jTextField1);

    jButton1 = new JButton("Button1");
    jButton1.setVisible(true);
    jButton1.setBounds(130, 12, 85, 30);
    add(jButton1);
    jButton1.addActionListener(but1);

    tabbedPane = new JTabbedPane();
    tabbedPane.setBounds(12, 54, 200, 220);
    tabbedPane.setVisible(false);
    add(tabbedPane);
    pack();
    setSize(250,110);

}
private class Handler implements ActionListener{
    public void actionPerformed(ActionEvent evt){
        String input = jTextField1.getText();
        setSize(250,330);
        JPanel inst = createPanel(input);
        inst.setVisible(true);
        tabbedPane.addTab(Integer.toString(tabIndex), inst);
        tabbedPane.setVisible(true);

    }

} 

protected JPanel createPanel(String input){
    JPanel inst = new JPanel();
    inst.setVisible(true);
    inst.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(BevelBorder.LOWERED),input));
    JTextField textField = new JTextField();
    textField.setVisible(true);
    JButton button = new JButton();
    button.setVisible(true);
    inst.setLayout(null);
    inst.add(button);
    inst.add(textField);
    ary.add(inst);
    tabIndex=index;
    index++;
    return inst;
}

public static void main(String[] args) {
    // TODO Auto-generated method stub
TestingTab inst = new TestingTab();
inst.setVisible(true);
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T00:22:30.150

创建面板时您使用的是空布局。这就是不显示组件的原因。当布局属性为空时，容器不使用布局管理器。这称为*绝对定位*。在绝对定位的情况下，您必须指定组件的大小和位置。绝对定位方法有许多缺点，应谨慎考虑。在大多数情况下应该/可以避免空布局。

删除`inst.setLayout(null);`，您将看到按钮和文本字段。

查看布局管理器[的可视化指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)和[使用布局管理](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)器以获取有关布局管理器的更多详细信息。

# windows-phone-7 - WP7 使用 MVVMLight 处理数据库

> ID：11855837
> 
> 赞同：0
> 
> 时间：2012-08-08T00:01:38.327
> 
> 标签：windows-phone-7, c#-4.0, mvvm, mvvm-light

我第一次在 Windows Phone 7 中使用 MVVMLight。我想我终于把我的大脑包裹在其中的一些东西上了。但是，我正在努力解决的一个问题是在哪里创建我的数据库实例，以便我只有一个连接。我的项目中有两个模型，我希望每个模型都有自己的 DataService。有没有办法将数据库连接传递给 DataService 的构造函数？或者我会在应用程序启动时做一些事情，比如创建一个数据库连接对象的单例？还是我完全走错了路，有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:46:59.680

好消息是 MVVM Light 中的 DI 容器默认将其所有注册视为单例，因此如果多个视图模型将您的 DataService 注入其中，它们将使用相同的对象实例，而无需您执行任何操作。

您如何处理创建数据库连接实际上取决于您使用的数据库（SQL-CE、SQLLite 等）。

# php - 在PHP中从数组中选择值

> ID：11855840
> 
> 赞同：1
> 
> 时间：2012-08-08T00:01:48.863
> 
> 标签：php, arrays, json

好的，所以我在 JSON 数组中有这个（*retrieveData()*的输出）

```
{
    "device": {
        "01AA02AB141208VV": {
            "$version": -148598935,
            "$timestamp": 1344382016000,
            "serial_number": "01AA02AB141208VV"
        }
    }
} 
```

但是，我似乎无法选择序列号。我已经尝试过通常有效的方法，但我无法选择它。这是假设我们还不知道“01AA02AB141208VV”。

```
$retrieved_data = retrieveData($array['userid'], $array['urls']['transport_url'], $array['access_token']);
$retrieved_data_array = json_decode($retrieved_data, true);
$serial_number = $retrieved_data_array['device'][0]['serial_number']; 
```

难道我做错了什么？我敢打赌这真的很简单，但我就是想不通！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T00:08:08.693

不幸的是，这并不简单。当您不知道 Main St. 所在的城市时，您正试图找到 42 Main St.。找到它的唯一方法`serial_number`是循环`$retrieved_data_array`，`foreach`直到找到您想要的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T00:31:03.363

您可以使用 key() 函数访问关联数组的键（在本例中为 '$retrived_data_array['device']' 数组：

```
<?php

$data = '{"device": {"01AA02AB141208VV": {"$version": -148598935,"$timestamp": 1344382016000,"serial_number": "01AA02AB141208VV"}}}';

$retrieved_data_array = json_decode($data, true);
$serial_number = key($retrieved_data_array['device']);
reset($retrieved_data_array['device']);

print_r($serial_number);
print_r($retrieved_data_array['device'][$serial_number]);

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T00:22:36.217

假设您在设备数组中有多个项目，这将获取序列号：

```
$keys = array();

foreach( $retrieved_data_array['device'] as $key => $val ){
  $keys[] = $key;
}

$serial = $keys[0]; 
```

**如果您知道数组中只有一项，则可以减少这种情况...**

# xml - 如何保存表单 POST 的 XML 输出？

> ID：11855848
> 
> 赞同：0
> 
> 时间：2012-08-08T00:02:28.747
> 
> 标签：xml, forms, file, api, post

下面是我在 www.MyExampleDomain.com 域上的文件示例。

当提交表单按钮时，浏览器刷新并且浏览器窗口 URL 显示 www.XMLExampleDomain.com 并且浏览器内容具有 XML 格式的名称列表。

如何将该 XML 结果保存到 www.MyExampleDomain.com 上的 .xml 文件？

我的文件.htm

```
<HTML>
 <FORM METHOD="POST" ACTION="http://www.XMLExampleDomain.com">;
  <INPUT TYPE="HIDDEN" NAME="req" VALUE="api">
  <INPUT TYPE="HIDDEN" NAME="mode" VALUE="name_list">
  <INPUT TYPE="RADIO" NAME="api_key" VALUE="a234985929042a">DVD Comedy <br>
  <INPUT TYPE="RADIO" NAME="api_key" VALUE="s863950385433a">DVD Action <br>
  <INPUT TYPE="SUBMIT" VALUE="Click Here to List Names">
 </FORM>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:00:26.840

由于您不控制表单发布到的目标服务器..

*   将表单发布到您的服务器
*   然后将表单发布到 www.XMLExampleDomain.com（从您的服务器）
*   获取结果xml
*   将 xml 数据保存在您的服务器上
*   并将响应转发给浏览器。

# c - 来自 execvp 的段错误

> ID：11855861
> 
> 赞同：1
> 
> 时间：2012-08-08T00:03:19.137
> 
> 标签：c, unix, execvp

我正在尝试执行从套接字获得的输入。我将消息缓冲区放入 a`char *[]`中，它是空终止的，它适用于它，`ls`但它不适用于`ls -la`.

```
char *CMD[msg.c+1];
CMD[msg.c] = NULL; 
```

这是我解析和使用`execvp`.

```
//parse
char *tmp = NULL;
tmp = strtok(msg.v,space);
for(i = 0; i < msg.c; i++){
    CMD[i] = tmp;
    tmp = strtok(NULL,space);
    printf("%s\n",CMD[i]);
}

int fd[2];
pipe(fd);
pid_t pid = fork();
if (pid == 0) {
        close(fd[0]);
        dup2(fd[1], 1);
        msg.c = execvp(CMD[0],CMD);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:10:20.467

这可能是迟到的答案，没有人关心......总而言之，您的程序中存在一些问题，但我真的不知道您为什么会遇到分段错误，或者您是否已经修复了该问题。

在代码中：

*   使用 of`strsep(3)`代替[过时的](http://www.openbsd.org/cgi-bin/man.cgi?query=strtok&apropos=0&sektion=0&manpath=OpenBSD%20Current&arch=i386&format=html%20obsolete) `strtok(3)`
*   `strdup(3)`确保没有其他代码修改`msg`，如果没有，那么您可以删除 strdup 并释放
*   添加了一些错误处理，`err(3)`以便及早（更早）发现错误。
*   你不能这样做`msg.c = execvp(CMD[0], CMD)`，程序正在执行 CMD 并且永远不会返回；为了能够检索退出代码，使用`wait(2)`或`waitpid(2)`
*   C99 中允许使用可变长度的数组 ( `char *CMD[msg.c+1]`)，但我不使用它，您可以根据需要使用它。:)

这是冗长的代码，可能有很多错误，但请告诉我，我会尽力修复：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <err.h>
#include <sys/types.h>
#include <sys/wait.h>

#define MAX_ARGS 10

int 
main(int argc, char *argv[])
{   
        char *cmd[MAX_ARGS];
        char *s;
        char buf[256];
        char msg[] = "ls -la /";
        int n;
        int fd[2];
        pid_t pid;
        int stat;

        if ((s = strdup(msg)) == NULL)
                err(1, "strdup");
        for (n = 0; n < MAX_ARGS && (cmd[n] = strsep(&s, " ")) != NULL; n++)
                ;

        if (pipe(fd) == -1)
                err(1, "pipe");
        switch ((pid = fork())) {
        case -1:
                close(fd[0]);
                close(fd[1]);
                err(1, "fork");
        case 0: /* child */
                close(fd[0]);
                dup2(fd[1], STDOUT_FILENO);
                close(fd[1]);
                execvp(cmd[0], cmd);
                err(1, "execvp");
        default: /* parent */
                free(s);
                close(fd[1]);
                while ((n = read(fd[0], buf, sizeof(buf))) > 0)
                        write(STDOUT_FILENO, buf, n);
                waitpid(pid, &stat, 0);
                fprintf(stderr, "child(%d) exited with %d\n",
                        pid, WEXITSTATUS(stat));
        }
        return (0);
} 
```

# c# - 在if语句c#中将对象与变量进行比较

> ID：11855866
> 
> 赞同：0
> 
> 时间：2012-08-08T00:04:08.093
> 
> 标签：c#, sql-server

我有一个查询将在这种情况下返回一个值和库存类别。如果用户输入某个框号，则如果表单将启用其他任何内容，则表单应禁用。问题是我使用 ExecuteScalar 并且需要将该值与字符串“AP”进行比较。我对 C# 很陌生，无法弄清楚如何做到这一点。到目前为止，这是我的代码：

```
private void hide_apple_controls()
{
        SqlCommand cmd = new SqlCommand();
        Object invCat;
        cmd.CommandText = "SELECT itm.inv_cat FROM " +
                          "t_item_master itm " +
                          "LEFT OUTER JOIN  t_box box (NOLOCK) ON box.product_code LIKE itm.item_number " +
                          "where box.box_id = @box_id ";

        cmd.Parameters.Add("@box_id", SqlDbType.VarChar).Value = boxBox.Text;

        cmd.CommandType = CommandType.Text;
        cmd.Connection = this.sqlConnection1;
        this.sqlConnection1.Open();
        SqlDataAdapter adpt = new SqlDataAdapter(cmd);
        DataSet ds = new DataSet();
        adpt.Fill(ds);
        invCat = cmd.ExecuteScalar();          
        this.sqlConnection1.Close();

        string ap = "AP";

        if (invCat == ap ) 
        {
            disable_qc_form();
        }

        enable_qc_form();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T00:07:23.373

在 if 条件中，您需要 else 子句。

```
if (invCat == ap ) 
   disable_qc_form();
else
   enable_qc_form(); 
```

没有`else`，你的最后一行无论如何都会执行。`else`只有当`invCat == ap`不评估为真时，它才会执行。

# database - 需要帮助选择如何构建我的数据库

> ID：11855875
> 
> 赞同：0
> 
> 时间：2012-08-08T00:04:51.007
> 
> 标签：database

我正在建立一个数据库，其中包含每个客户的购买产品名称产品制造商商店日期买方名称买方公司一些数据，例如产品名称，制造商，商店，买方名称和买方公司当时回溯到他们自己。将它们构建在单独的表和主表中以保留它们的索引会更好吗？一方面它节省了服务器上的空间另一方面它使服务器过载并需要更多的工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:17:56.830

我会将买家信息和产品信息保存在单独的表格中。没有理由多次存储此信息。

此外，您可以使用带有买家 ID、产品 ID 序列化数组和购买日期的（类似关系）表。

```
buyer_id | {"prod1_id","prod2_id",...} | date 
```

这样你就可以得到一张桌子，里面有你可以随时购买的所有商品。这将增加对数据库的调用，但会节省存储空间。

希望它对你有意义。

# c++ - C++ 2011：在构造函数中初始化数组的好语法？

> ID：11855882
> 
> 赞同：4
> 
> 时间：2012-08-08T00:05:32.600
> 
> 标签：c++, arrays, constructor, initialization

这里我有一个示例类：

```
template<typename T, unsigned int SIZE> class MyClass
{
    public:
        MyClass();
        ~MyClass();

    protected:
        T _data[SIZE];
};

template<typename T, unsigned int SIZE> MyClass<T, SIZE>::MyClass() : // _data() OR _data({}) OR _data{} OR...
{
    ;
} 
```

在默认构造函数中将整个数组初始化为 0 的正确 C++ 2011 语法是什么？

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T00:15:57.483

统一初始化语法效果很好：

```
MyClass() : _data{} {} 
```

# coldfusion - Coldfusion web-inf\web.xml 用途

> ID：11855886
> 
> 赞同：1
> 
> 时间：2012-08-08T00:06:17.930
> 
> 标签：coldfusion, web.xml

我正在考虑使用 New Relic 来监控我们的冷融合站点。但是，它使用 web.xml 中定义的 Web 应用程序显示名称在其管理员中定义应用程序。

据我所知，coldfusion 只有一个 web.xml 文件： ...\ColdFusion9\wwwroot\WEB-INF\web.xml

这个文件的目的是什么？并且可以逐个站点覆盖它的元素吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:23:19.713

看起来 New Relic 是一个用于监控 Java（和其他）应用程序的工具。ColdFusion 是一个Java 应用程序。而且您安装它的方式（标准）是带有单个 web.xml 的单个应用程序。无论您在其上运行多少个 ColdFusion 站点（应用程序），它仍然是一个单独的 Web 应用程序。

如果您有 CF Enterprise，您可以设置多服务器安装，您可以在其中将每个站点部署为单独的 Java 应用程序，但是按照您现在设置的方式，您可能只能将 CF 监控为整体与每个单独的站点。

# java - GridLayout 类 setHgap() 和 setVgap() 在哪些组件中创建了间隙

> ID：11855889
> 
> 赞同：2
> 
> 时间：2012-08-08T00:07:08.243
> 
> 标签：java, swing, layout

我正在使用网格布局在 JPanel 上设置一组大约 256 个复选框。在网格布局文档中，我可以看到有两种方法，即 setHgap() 和 setVgap()。我不确定这些方法在哪些组件之间造成了差距。是相邻的复选框还是 JPanel 中的其他组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:10:41.377

setHgap() 和 setVgap() 分别设置容器本身的组件之间的水平和垂直间隙，而不是沿着“边缘”。

# database - Oracle SQL 日志

> ID：11855893
> 
> 赞同：0
> 
> 时间：2012-08-08T00:07:24.473
> 
> 标签：database, oracle11g, postgresql-9.1

我使用支持 PostgreSQL 和 Oracle11g 的休眠配置了我的应用程序。我找到了为在 PostgreSQL 上执行的所有 sql 启用日志记录的方法（在服务器端进行日志记录）。但是，我找不到如何为 Oracle11g 服务器启用相同的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:40:55.350

你有两种方法可以做到这一点。添加以下内容之一

```
sql_trace=true 
```

或者

```
event="10046 trace name context forever, level 12" 
```

在数据库的**init.ora**文件中并重新启动实例。您还可以使用 alter system 命令启用该设置。这将在跟踪目录中创建跟踪文件。如果您不使用共享服务器，这将为每个数据库会话创建一个跟踪文件。然后可以使用文本编辑器读取这些文件或使用**tkprof**分析这些文件。

# delphi - 主表单delphi上的未声明标识符

> ID：11855894
> 
> 赞同：1
> 
> 时间：2012-08-08T00:07:27.357
> 
> 标签：delphi, delphi-2010

我在我创建的名为提交的过程中得到了“未声明的标识符”。

```
procedure submit;
begin
if ebMain.Text='exit' then
fmMain.Close;
end; 
```

真的很简单。编译器告诉我 ebMain 未声明。我可以通过输入“fmMain”来解决这个问题。在它前面，但我从来没有在delphi 7中这样做。编辑框（ebMain）在主窗体（fmMain）上。过程标题位于“使用”下方。怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T00:12:31.400

`submit()`不是你`TfrmMain`班级的成员，所以它不知道是什么`ebMain`。您需要：

1) 成为`submit()`表单类的成员（无论如何你都应该这样做，因为它所做的只是访问 的成员`TfrmMain`）：

```
procedure TfrmMain.submit; 
begin 
  if ebMain.Text='exit' then 
    Close; 
end; 

procedure submit; 
begin 
  frmMain.submit;
end; 
```

`ebMain`2）以表单的全局变量为前缀`frmMain`（就像你已经在做的那样`Close()`）：

```
procedure submit; 
begin 
  if frmMain.ebMain.Text='exit' then 
    fmMain.Close; 
end; 
```

是的，您必须在每个版本的 Delphi 中都这样做，包括 D7。

# excel - 计算一年中剩余的发薪日

> ID：11855896
> 
> 赞同：5
> 
> 时间：2012-08-08T00:07:42.733
> 
> 标签：excel, excel-formula, worksheet-function

我想计算天数

1.  从现在到年底（即 12 月 31 日）之间发生，并且
2.  秋季在当月的第 15 日或最后一天（4 月、6 月、9 月、11 月为 30 日；1 月、3 月、5 月、7 月、8 月、10 月、12 月为 31 日；2 月 28 日）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T00:43:29.973

这似乎可以工作（尽管我认为它可能会被整理，我相信有更好的方法......）

```
=(12-MONTH(TODAY()))*2 
+ IF(DAY(TODAY())<15,2,
        IF(DAY(TODAY())<DAY(DATE(YEAR(TODAY()),MONTH(TODAY())+1,1)-1),1,0)) 
```

(12-MONTH(TODAY()))*2 : 剩余的每个完整月两天

如果在 15 日之前加 2 天

或者

如果是 15 日或之后而不是当月的最后一天，则加 1 天

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T00:45:10.747

避免使用数组公式的变体。

**`1\. For your question as asked`**

`=SUMPRODUCT(--(DAY(DATE(YEAR(NOW()),MONTH(NOW()),DAY(NOW()))+ROW(INDIRECT("1:"&DATE(YEAR(NOW()),12,31)-TODAY()+1)))={15}))+(13-MONTH(TODAY()))`
= 10

**`2\. For my initial interpretation which was to count any days corresponding to a certain day of the month`**

`=SUMPRODUCT(--(DAY(DATE(YEAR(NOW()),MONTH(NOW()),DAY(NOW()))+ROW(INDIRECT("1:"&DATE(YEAR(NOW()),12,31)-TODAY()+1)))={15,30}))`
=10

然而

`=SUMPRODUCT(--(DAY(DATE(YEAR(NOW()),MONTH(NOW()),DAY(NOW()))+ROW(INDIRECT("1:"&DATE(YEAR(NOW()),12,31)-TODAY()+1)))={15,31}))`
=8

和

`=SUMPRODUCT(--(DAY(DATE(YEAR(NOW()),MONTH(NOW()),DAY(NOW()))+ROW(INDIRECT("1:"&DATE(YEAR(NOW()),12,31)-TODAY()+1)))={15,30,31}))`
=13

要更改所需的天数，只需更改`{15,30}`组件即 ={1,2,12,15,31} 以计算所有落在 1 日、2 日、12 日、15 日和 31 日等的天数

*这个公式将处理闰年*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T01:06:08.697

这应该在任何版本的 Excel 中的任何一年的任何一天工作，直到 2078 年（在 Excel 2007 或更高版本中更长）。

```
=SUM(IF(DAY(ROW(OFFSET($A$1,TODAY(),0,DATE(YEAR(TODAY()),12,31)-TODAY()+1)))={1,16},1,0)) 
```

请注意，我在 1 天的偏移量上检查 day = 1 或 16（这个想法是为了解决不同的月末`DAY()`值）。

{数组公式...按`Ctrl+Shift+Enter`提交}

[附录]

如果您不想包含当天（例如，今天是 8 月 15 日），请改用：

```
=SUM(IF(DAY(ROW(OFFSET($A$1,TODAY()+1,0,DATE(YEAR(TODAY()),12,31)-TODAY()+1)))={1,16},1,0)) 
```

Ps 我从今天到 2016 年闰日及以后的所有日期都进行了测试，它很有效。所有这些都是测试被函数视为日期序列的行号，`DAY()`以查看它们是 1 还是 16，但序列被 +1 偏移，因此它实际上是在检查是否`DAY()`是 [任何月份的最后一天] 或 15。如果结果为真，则加 1，否则加 0。

* * *

[更多附录]

以下是其他工作方式相同的*非数组*版本：

包括当天：

```
=SUMPRODUCT(N(DAY(ROW(OFFSET($A$1,TODAY(),0,DATE(YEAR(TODAY()),12,31)-TODAY()+1)))={1,16})) 
```

不包括当天

```
=SUMPRODUCT(N(DAY(ROW(OFFSET($A$1,TODAY(),0,DATE(YEAR(TODAY()),12,31)-TODAY()+1)))={1,16})) 
```

# java - 我应该对永远不会改变的字段值使用访问器吗？

> ID：11855898
> 
> 赞同：5
> 
> 时间：2012-08-08T00:07:58.293
> 
> 标签：java, oop, encapsulation

我们以这个类为例：

```
public class Student{
    private String name;
    private String id;

    public Student(String name, String id){
        this.name = name;
        this.id = id;
    }

    ... getters and setters for both fields 
```

并将其与此进行比较：

```
public class Student{
    public final String name;
    public final String id;

    public Student(String name, String id){
        this.name = name;
        this.id = id;
    }
 } 
```

在我看来，不需要访问器。
**这会被认为是糟糕的 OO 设计吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T00:14:59.773

这是一个加载的问题。

不幸的是，好的（或坏的）设计 100% 取决于它的使用方式。

根据经验，保持成员变量私有是一个好主意，这样对象模型才能控制它们的访问。这意味着第一种方法更好。

但

如果价值观永远不会改变，那有什么意义呢？如果*永远不会*使用 setter，为什么还要编写 setter？

那么，哪一个更好呢？正如我上面提到的，这取决于你这样做的目的。如果是课堂作业，我会选择第一个。你的老师会更喜欢它，因为它更像是“教科书”。

因此，如果这是一个个人项目或您可以利用未来版本的工作，我会选择两者之间的交叉：

```
public class Student{
    private final String name;
    private final String id;

    public Student(String name, String id){
        this.name = name;
        this.id = id;
    }

  ... getters ONLY for both fields 
```

这种方法是安全的，因为成员字段是私有的，并且没有未使用方法的“代码气味”。这也是相当可扩展的，因为如果您的需求发生变化并且您需要修改字段，您可以很容易地添加设置器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T00:19:05.330

您应该始终致力于将可变性和范围限制在严格的最小值。在您的情况下：将字段设为私有的、最终的、带有 getter 的、没有 setter 的字段。

奖励：你的类然后变得[不可变](https://stackoverflow.com/questions/3769607/why-do-we-need-immutable-class)并且线程安全。

另见[这篇文章](https://stackoverflow.com/questions/3511120/why-shouldnt-i-use-immutable-pojos-instead-of-javabeans)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T02:30:21.200

Getter 和 Setter 使 API 更加稳定。例如，考虑一个由其他类访问的类中的公共字段。现在稍后，您想在获取和设置变量时添加任何额外的逻辑。这将影响使用 API 的现有客户端。因此，对该公共字段的任何更改都需要更改引用它的每个类。相反，使用访问器方法，可以很容易地添加一些逻辑，比如缓存一些数据，稍后再懒惰地初始化它。此外，如果新值与以前的值不同，则可以触发属性更改事件。所有这些对于使用访问器方法获取值的类来说都是无缝的。

ThePragmaticProgrammer 也建议始终使用 getter 和 setter，因为它是更通用的接口。查看这篇文章[http://c2.com/cgi/wiki?AccessorsAreEvil](http://c2.com/cgi/wiki?AccessorsAreEvil)它非常好，并且对我们为什么应该使用它们提供了深刻的理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T00:11:38.150

当然，如果您知道它们永远不会改变，那么您就不需要访问器。

但如果你告诉我你确定他们永远不会改变，我不会相信你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T00:13:16.960

如果字段是`final`，那么你真的不需要使用 getter/setter。二传手也毫无意义，因为他们永远不会改变。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T02:48:18.490

一致性规则。如果您有一些类/属性可以公开访问变量，而其他类/属性具有“getter”，那么这将不是一个好地方。

假设您`Student`上课并添加一个`java.util.Date`字段。

```
public final Date dateOfBirth; 
```

啊，现在你`Student`以不受控制的方式变化。我们需要。

```
private final Date dateOfBirth;
...
public Date dateOfBirth() {
     return new Date(dateOfBirth.getTime()); // Awful API.
} 
```

通常，只需将每个（实例）字段设为私有（数据传输对象除外）。如果您有二传手，那么您可能已经放弃了对封装的所有希望。Getter 适用于不可变的值对象。（“get”前缀是 Java 的一个约定（主要是），但它主要是噪音，特别是在支持不可变值对象和告诉-不要-询问接口的代码中。如果删除“get”，客户端代码只有额外的“（）”作为直接字段访问的冗长。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T04:29:32.357

那里有一些很好的答案，我同意将字段设为私有并添加适当的构造函数/getter/setter 以在需要时限制可变性。

我将指出使用基于字段的分配的另一个缺点。任何基于代理的 AOP 在向字段分配添加切入点时都会遇到麻烦，因此通过基于代理的 AOP 构造进行日志记录（和其他操作）会变得很困难，因为它们仅限于方法拦截。您很可能被迫实际进行编织，这变得更加复杂。来自 Spring 自己的文档：

> Spring AOP 当前仅支持方法执行连接点（建议在 Spring bean 上执行方法）。没有实现字段拦截，尽管可以在不破坏核心 Spring AOP API 的情况下添加对字段拦截的支持。如果您需要建议字段访问和更新连接点，请考虑使用 AspectJ 等语言。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-08T00:18:14.640

我不认为这是一个坏主意。

如果它们不会更改，请确保使用适当的关键字标记字段，例如`Final`.

使不变的值以不同的方式显示也是一个好主意。例如，Java 中的常量通常全部大写。

# templates - Google Apps“未知宏 doGet”

> ID：11855902
> 
> 赞同：0
> 
> 时间：2012-08-08T00:08:15.697
> 
> 标签：templates, google-apps-script

每次从[https://developers.google.com/apps-script/html_service](https://developers.google.com/apps-script/html_service)部署“将数据提取到模板”中的练习时，我都会收到消息“未知宏 doGet”

本练习中没有函数（宏）doGet。之前的练习中有“将数据拉入模板”

本练习的功能是：

function getData() { return SpreadsheetApp.openById('fileID').getRangeByName('dataRange').getValues(); }

但是每次我部署它时都会显示“未知宏 doGet”

为什么这个脚本仍然在另一个脚本中回顾之前的 doGet？我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:30:58.330

这不是一个完整的示例脚本。这只是对之前脚本的一个点缀。您仍然需要在每个 HtmlService 应用程序中使用 doGet，并且上一个示例中的那个应该是您在此处使用的脚本的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:44:39.877

谢谢 Cory G。所以您还必须有一个包含此代码的 .gs。

```
function doGet() {
    return HtmlService.createTemplateFromFile('myTemplate').evaluate();
} 
```

# python - 具有网格布局的 Tkinter 升降方法

> ID：11855906
> 
> 赞同：4
> 
> 时间：2012-08-08T00:08:56.800
> 
> 标签：python, tkinter

毫无疑问，这是一个新手问题。我在 Python 2.7 中使用 Tkinter 中的网格布局管理器。我想要一个按钮来隐藏单击时的列表框。到目前为止，这是我的代码：

```
from Tkinter import *
root = Tk()
frame = Frame(root)
pyList = ["Eric", "Terry", "Graham", "Terry", "John", "Carol?", "Michael"]
arbList = ['ham', 'spam', 'eggs', 'potatos', 'tots', 'home fries']
pythons = Listbox(frame, width=10, height=5, selectmode=EXTENDED, exportselection=0)
food = Listbox(frame, width=10, height=5, selectmode=EXTENDED, exportselection=0)
def hider():
    if pythons.selection_includes(4):
        food.lower()
    elif pythons.selection_includes(0):
        food.lift()
b2 = Button(frame, text="Hide!", command=hider)
b2.grid(row=2, column=1)
food.grid(row=0, column=1)
pythons.grid(row=1, column=1, pady=10)
frame.grid()

for python in pyList:
        pythons.insert('end', python)

for thing in arbList:
        food.insert('end', thing)

root.mainloop() 
```

不幸的是，玩弄这个似乎会抛出一个错误，说我不能在我的框架上方或下方提升/降低我的列表框。我已经让它与 pack() 管理器一起工作，但不是 grid()。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:10:04.057

您不能将小部件降低到其父级下方。根据[官方 tk 文档](http://tcl.tk/man/tcl8.5/TkCmd/raise.htm)：

> 如果省略了 aboveThis 参数，则命令会引发 window 以便它在堆叠顺序中位于其所有兄弟姐妹之上（它不会被任何兄弟姐妹遮挡，并且会遮挡与其重叠的任何兄弟姐妹）。如果指定了 aboveThis，那么它必须是一个窗口的路径名，它要么是窗口的兄弟，要么是窗口的兄弟的后代。在这种情况下， raise 命令会将 window 插入到 aboveThis 上方的堆叠顺序中（或作为 window 兄弟的 aboveThis 的祖先）；这最终可能会提高或降低窗口。

（注意， tk`raise`命令`lift()`实际上是在最低级别调用）

要获得您想要的效果，请将框架和列表框设为兄弟，然后使用`in_`参数将列表框打包到框架内：

```
food.grid(row=0, column=1, in_=frame)
pythons.grid(row=1, column=1, pady=10, in_=frame) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T23:15:15.437

很抱歉，这两个版本的代码都没有为我做任何事情。但是，以下修改确实有效。诀窍是让列表框的父级是`root`而不是`frame`和拥有`lift`和`lower`相对于`frame`. 我想知道这是否是由于不同版本的 Tkinter 造成的？

```
from Tkinter import *
root = Tk()
frame = Frame(root)
pyList = ["Eric", "Terry", "Graham", "Terry", "John", "Carol?", "Michael"]
arbList = ['ham', 'spam', 'eggs', 'potatos', 'tots', 'home fries']
pythons = Listbox(root, width=10, height=5, selectmode=EXTENDED, exportselection=0)
food = Listbox(root, width=10, height=5, selectmode=EXTENDED, exportselection=0)
def hider():
    if pythons.selection_includes(4):
        food.lower(frame)
    elif pythons.selection_includes(0):
        food.lift(frame)
b2 = Button(frame, text="Hide!", command=hider)
b2.grid(row=2, column=1)

food.grid(row=0, column=1, in_=frame)
pythons.grid(row=1, column=1, pady=10, in_=frame)
frame.grid()

for python in pyList:
        pythons.insert('end', python)

for thing in arbList:
        food.insert('end', thing)

root.mainloop() 
```

# jquery - ajax页面中的谷歌可视化冲突

> ID：11855909
> 
> 赞同：1
> 
> 时间：2012-08-08T00:09:28.070
> 
> 标签：jquery, google-visualization

此代码在独立页面中运行良好。我通过 jquery ajax 将这段代码拉到另一个页面，它不显示图表。我已经搜索和搜索并没有找到答案。

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Task', 'Hours per Day'],
      ['Data Entry', 2],
      ['Filing', 1],
      ['Social Media', 2],
      ['Email Responses', 1],
      ['Customer Care', 2]
    ]);

    var options = {
      chartArea:{left:20,top:0,width:"80%",height:"70%"},
      legend: {position: 'left', textStyle: {fontSize: 14}},
      is3D: 'true'
    };

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script>

    <div id="chart_div" style="position: relative; z-index: 100; width: 580px; height: 400px; margin: 0px 0px 0px 50px; border: overflow: hidden;">
    </div> 
```

感谢任何人可以提供的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:18:11.770

这还不是答案，所以请不要投反对票。

有几个问题可以帮助我们有希望地回答您；

*   你使用的是什么浏览器？
*   引入此脚本的代码是什么？
*   您使用什么版本的 JQuery？
*   在您的浏览器中，您的 Javascript 控制台是否显示任何错误？
*   您在不同的浏览器中是否遇到相同的错误？

编辑：您可能会尝试帮助我们的另一件事是在[http://jsfiddle.net/](http://jsfiddle.net/)创建一个小提琴并给我们链接；这将让我们直接尝试您正在使用的代码。

# javascript - Javascript 草坪椅

> ID：11855912
> 
> 赞同：0
> 
> 时间：2012-08-08T00:10:25.720
> 
> 标签：javascript, cordova, lawnchair

我在 phonegap 应用程序中使用草坪椅进行存储。我用它将设置保存为字符串。我能够保存一个字符串并检索它，因为我将它打印到控制台。但是，一旦我关闭应用程序并完全重新启动它，该值就不再存储并且消失了。下面是存储和保存代码。感谢您提前提供任何帮助。

```
 // save
var lazyboy = Lawnchair({name:'settings'},function(e) {
    console.log("Storage Open!");
})

lazyboy.save({key:'1', value:obj});

    // Load
lazyboy.exists("1", function(exists) {
    if (exists) {
        lazyboy.get("1", function(obj) {
            choice = obj.value.setting;
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:46:56.307

添加 dom.js 文件解决了我的问题。

# ios - 如何让 CALayers 在进行 3D 转换时使用屏幕中心作为消失点？

> ID：11855914
> 
> 赞同：4
> 
> 时间：2012-08-08T00:10:29.837
> 
> 标签：ios, 3d, core-animation

我在屏幕上有一个 2D 视图网格（我将它们称为图块）。每个图块都有一个子视图，我在动画块中围绕 Y 轴旋转。我已经在每个图块上正确设置了 sublayerTransform。我正在旋转的所有子视图都显示 3D 透视图。问题是每一个的消失点是图块的中心而不是屏幕的中心，从而破坏了 3D 的错觉。当我在所有瓦片的父级上设置 sublayerTransform 时，旋转视图不会显示任何透视图。我相信这是因为 sublayerTransform 仅适用于层的孩子而不是孙辈。如何让所有旋转视图使用相同的消失点？我已经包含了一个画得不好的图像来帮助说明这一点。![在此处输入图像描述](../Images/64b22cd9cee930431b6d636968fae8f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:44:19.140

这是解决方案：您必须将平移变换添加到超级层，然后通过调整子层的位置来弥补它。我已经成功使用了以下一段代码，只需创建一个空的“Single View Application”XCode 项目并在 iPad 模拟器上运行：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    for (int i = 0; i < 6; i++)
    {
        CALayer *parent = [CALayer layer];
        parent.frame = CGRectMake(0, 0, 100, 100);
        parent.position = CGPointMake(70 + 120*i, 70);
        parent.backgroundColor = [[UIColor greenColor] CGColor];
        [self.view.layer addSublayer:parent];

        float width = self.view.frame.size.width/2.0;
        float offset = (width - parent.position.x);

        CALayer *layer = [CALayer layer];
        layer.frame = CGRectMake(0, 0, 40, 40);
        layer.position = CGPointMake(-offset + 50, 60);
        layer.backgroundColor = [[UIColor redColor] CGColor];
        layer.transform = CATransform3DMakeRotation(M_PI_2, 0, 1, 0);

        CATransform3D tr = CATransform3DMakeTranslation(offset, 0, 0);
        CATransform3D t = CATransform3DIdentity ;
        t.m34 = -4.0f/2000.0f ;
        parent.sublayerTransform = CATransform3DConcat(t, tr);

        [parent addSublayer:layer];    
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:34:55.047

尝试旋转瓷砖本身而不是它们的子视图。在您的平铺视图的超级视图中，设置您的透视变换：

```
CATransform3D t = kCATransform3DIdentity ;
t.m34 = -1.0f/2000.0f ;
parentLayer.sublayerTransform = t ; 
```

那行得通吗？尽管我假设您明确不想自己旋转瓷砖？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:42:13.650

这是一个相当复杂的问题要解决。我建议你看看其他人是如何解决的。看看[Nick Lockwood 的 iCarousel](https://github.com/nicklockwood/iCarousel)。这是一个轮播实现，可能会给您一些见解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T06:27:06.250

您是否尝试过设置`sublayerTransform`瓷砖的父级，但使用 [`CATransformLayer`](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CATransformLayer_class/Reference/Reference.html)瓷砖？这应该在您的层次结构中传播得`sublayerTransform`更远。请注意，`CATransformLayer`仅渲染其子图层，而不是其自身的任何内容/背景颜色，因此您在图块本身中所做的任何事情都可能需要移动到单独的子图层中。

# javascript - AS3在两个函数之间连接来自xml的rtmp连接字符串

> ID：11855918
> 
> 赞同：0
> 
> 时间：2012-08-08T00:11:16.890
> 
> 标签：javascript, actionscript-3, flash-media-server, fms3

我不断为闪存媒体服务器下的应用程序实例获取“空”。我似乎无法将值从一个函数传递到另一个函数

XML 示例

```
<bsettings>
<obj title="instance">19046</owner>
<obj title="id">uniqueid</owner>
<obj title="name">somename</owner>
<obj title="date">08/01/2012</owner>
<obj title="gender">female</owner>
</bsettings> 
```

AS3 代码

```
<mx:Application 
    xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute"
    applicationComplete="initConnection(event)">

private var xinstance:String;
private var xmlstring:String = "http://www.blah.com/blahblah.xml";

protected function getXML():void{
XML.ignoreWhitespace = true;
var myXML:XML;
var myLoader:URLLoader=new URLLoader();
myLoader.load(new URLRequest(xmlstring));
myLoader.addEventListener(Event.COMPLETE, processXML);

function processXML(e:Event):void {
myXML = new XML(e.target.data);
for (var i:int = 0; i<myXML.*.length(); i++){
xinstance = myXML.obj[0];
xblah = myXML.obj[1];
xblah1 = myXML.obj[2];
xblah2 = myXML.obj[3];
xblah3 = myXML.obj[4];
}
}
}

private function initConnection(event:FlexEvent):void{
getXML();

//problem here, the xinstance isn't saved in the fmsstring
var fmsstring:String = "rtmp://blah.com/appname/" + xinstance;

nc = new NetConnection();
nc.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);
nc.connect(fmsstring);
nc.client = this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:05:44.920

您的问题是您在使用 xinstance 字符串之前没有等待 XML 加载。在 initConnection 函数上调用 getXML() - 它开始加载 xml，在执行 initConnection 函数中的其余代码之前，您需要等到 xml 加载完毕。这是一个建议的更改：（我添加了在处理 xml 之后调用的 go() 函数）

```
private var xinstance:String;

protected function getXML():void {
    var xmlstring:String = "http://www.blah.com/blahblah.xml";
    XML.ignoreWhitespace = true;
    var myLoader:URLLoader=new URLLoader();
    myLoader.load(new URLRequest(xmlstring));
    myLoader.addEventListener(Event.COMPLETE, processXML);
}

protected function processXML(e:Event):void {
    var myXML:XML = XML(e.target.data)

    //THIS IS NOT A GOOD WAY TO DO THIS, use e4x
    //for (var i:int = 0; i<myXML.*.length(); i++){
    //xinstance = myXML.obj[0];
    //xblah = myXML.obj[1];
    //xblah1 = myXML.obj[2];
    //xblah2 = myXML.obj[3];
    //xblah3 = myXML.obj[4];
    //}

    //MUCH cleaner/easier/more efficient
    xinstance = myXML.bsettings.obj.(@title == "instance");

    go();
}

private function initConnection(event:FlexEvent):void{
    getXML();
}

private function go():void {
    var fmsstring:String = "rtmp://blah.com/appname/" + xinstance;

    nc = new NetConnection();
    nc.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);
    nc.connect(fmsstring);
    nc.client = this;
} 
```

# php - php数组 - 没有得到预期的输出

> ID：11855930
> 
> 赞同：0
> 
> 时间：2012-08-08T00:12:49.523
> 
> 标签：php, arrays

我有一段代码应该抓取类别，按字母顺序对它们进行排序（它们有多种语言版本），并为它们中的每一个返回一个计数。问题是，由于某种原因，根本没有返回计数。我觉得问题出在这条线上：

```
(($categoryCounter) ? '<span class="cnt">(' . $categoryCounter . ')</span>' : '') . 
```

我尝试将其更改为 $categoryCounter[$key] 或其他东西，但没有奏效。不幸的是，我的 PHP 技能不足以找出我做错了什么。如果有人能看到我显然做错了什么，我将非常感谢一些帮助:)

这是完整的代码；

```
while ($cat_details = $db->fetch_array($sql_select_categories)) 
{
    $categoryCounter = (COUNT_CATS == 1 && !empty($src_details['keywords_search'])) ? $cat_counter[$cat_details['category_id']] : $cat_details['items_counter'];
    if ($categoryCounter > 0 || COUNT_CATS == 0) {
        $cat_array[$cat_details['category_id']]["name"]=$category_lang[$cat_details['category_id']];
    }
}

if (is_array($cat_array)) {

    asort($cat_array);

    foreach($cat_array as $key => $value){

        $output .= '<tr> '.
        '   <td class="contentfont"><a href="' . $subcat_link . '">' . $category_lang[$key] . '</a> '.
        (($categoryCounter) ? '<span class="cnt">(' . $categoryCounter . ')</span>' : '') .
    ' </td> '.
    '</tr> ';

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:55:17.217

This can't be the entire code as a few things aren't defined. Why does COUNT_CATS not start with a $? What is the layout of the $cat_array object? Are there multiple columns or is "name" the only column?

First up, try adding the $ to the front of these:

```
$COUNT_CATS == 1
$COUNT_CATS == 0 
```

From what I can tell from what you provided, $categoryCounter will be the highest value from your loop starting with:

```
while ($cat_details = $db->fetch_array($sql_select_categories)) 
```

But currently you may not ever set the $cat_array as $categoryCounter may never be anything other than 0, and COUNT_CATS may or may not be valid.

Also, the $cat_array object could be assigned without the ["name"] part, i.e.

```
$cat_array[$cat_details['category_id']]=$category_lang[$cat_details['category_id']]; 
```

This would then have $cat_array[id]=$category_lang[id], which would then be sorted fine via the asort function. $cat_array[id]["name"]=$category_lang[id] would be sorted differently as it is now a multi-dimensional array.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:33:09.287

如果`$categoryCounter`是`"0"`，则条件`($categoryCounter)`为假，因此您使用发布的代码，将输出一个空字符串，而不是`<span`您期望的标签。

# wordpress - 样式表在服务器上出现损坏

> ID：11855931
> 
> 赞同：0
> 
> 时间：2012-08-08T00:13:05.020
> 
> 标签：wordpress, apache, file-upload

我有一个似乎突然停止工作的 Wordpress 网站。当在浏览器上查看时，样式表已经变得混乱，如下所示：

> ‹������Œ“ËNÜ0†_Åê¦&Qf `6aEHH´bÁ8ñ™øÇŽlg:4Ê»ã”Ü/nÿüçöû!ä;.—äÊ¢ƒG°©ÁÂ¡V×­æÕ: ½b‘CÂÌL,“uáAfC&âvÞöAŸ‰DÂz½ÐÖýb§A¹r,û!uÉI){-ÕyÊI´Î—÷Å­|_:¡Í½âÌÁüã0 U–°ô½ozÔÚù%Ã‚eðÒt.e%�3áâÝ·ºs`|âbG[Hö£'¨ ŸòÜæ÷q²$žA•hçtûâ\Ïï¯ Æ¹ß9pºˆwÑŠão'U3#èö¾‰†Í-0“Š&ñ¤ôcTÕ4ŠFë¢ò÷ Wúæ(õïX ç êYæOÚä“UöãUF¦nJw}"uú~—J¿Eìï}b'ÌXƒáôÄCq¾ë„6˜ÃaíìãÉgi&åQM<ît‹wºž®OÈÓ æé6ôt‹zÙºëÄžþÇU0B'^xÙ®»ó1tî‚”öÙ^6þ§Å3ÔkÆº ÛW ~luÔÊÿ@¼{.A{ib´°ütt›º²ýø–¯ìˆ¸ ØRºe6³O���ÿÿ�O¶ÅãY��

我网站的其余部分看起来不错，但看起来没有风格。

我已经尝试再次上传样式表，但是当我尝试通过浏览器直接查看它们时会发生同样的事情。

如果我通过 Filezilla 从服务器上下载它们，它们看起来完全没问题。

有人知道发生了什么吗？

**HTTP 响应标头：**

> 名称 值 定界符 状态：HTTP/1.1 200 OK 日期：星期三，2012 年 8 月 8 日 00:30:11 GMT 服务器：Apache 上次修改时间：星期二，2012 年 8 月 7 日 03:46:49 GMT 变化：Accept-Encoding,User-Agent内容编码：gzip
> 缓存控制：公共过期：A604800 内容长度：4544
> 连接：关闭内容类型：文本/css 内容语言：en-US

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:17:37.103

Filezilla Trac 中有一个与您的问题相同的错误：

[http://trac.filezilla-project.org/ticket/6505](http://trac.filezilla-project.org/ticket/6505)

[http://trac.filezilla-project.org/attachment/ticket/6505/FileUploadIssue.png](http://trac.filezilla-project.org/attachment/ticket/6505/FileUploadIssue.png)

该错误未解决，但报告提供了此解决方法：

> 我下载了另一个免费的 FTP 客户端（Core FTP Lite），再次上传了相同的文件和目录，结果成功

如果您想深入了解这一点，我建议您首先在样式表上尝试不同的字符编码（并检查其他文本文件是否像这样下载）。

作为一种替代解决方法（也是一种测试它是服务器问题还是 Filezilla 的方法），制作一个与样式表内容相呼应的 php 文件。我认为如果 Wordpress 正常工作，奇怪的编码问题可能是 Apache 的文件处理配置的问题。这可以通过使用 PHP 而不是 Apache 来处理文件读取和输出来解决这个问题：

```
<?php
echo file_get_contents('style.css'); 
```

* * *

**编辑：**

如果此 PHP 变通办法有效，您可以尝试[在 .htaccess 文件中将 .css 文件的类型处理程序设置为 PHP](https://stackoverflow.com/questions/5413107/headercontent-type-text-css-is-working-in-ff-cr-but-in-ie9-it-shows-up-as#5703588)。不过，这是一个非常肮脏的把戏；在诉诸此方法之前，您可能应该与您的主机讨论该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T04:08:10.737

不确定是什么原因造成的，但保存了我所有的设置和图像/信息，删除了我的 Wordpress 并重新安装它，它又可以正常工作了。

不知道为什么会发生这种情况，我唯一能想到的就是我在前一天晚上安装了一些插件。

# flash - 为什么我上传的文件是空的？

> ID：11855937
> 
> 赞同：0
> 
> 时间：2012-08-08T00:13:39.403
> 
> 标签：flash, internet-explorer, tomcat, ssl, windows-7

我正在使用[SWFUpload](http://code.google.com/p/swfupload/)将文件上传到运行 Tomcat 的 Web 服务器。上传完成后，用户开始收到来自服务器的错误。日志表明文件在服务器上没有内容，并且在调试模式下运行的 SWFUpload 似乎不认为发送文件有问题。

*仅当满足以下所有*条件时，此问题*才会*出现：

 **   客户端使用 SSL
*   客户端在 Windows 7 上
*   客户端使用 Flash 上传器。HTML 上传工作得很好。
*   客户端使用 IE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:13:39.403

起初，我怀疑这与 IE 的问题有关，并设置了`Pragma`和`Cache-Control`标头以防止客户端缓存我的 SWF 文件，这[在此处有详细记录](http://www.blog.lessrain.com/flash-nasty-xml-load-bug-in-internet-explorer/)。不过我很困惑，因为我只在上传时才观察到这个问题。下载不受影响。

最后，该问题似乎起源于2012 年 1 月发布[的 Internet Explorer 安全更新](http://blogs.technet.com/b/srd/archive/2011/09/26/is-ssl-broken-more-about-security-advisory-2588513.aspx)，旨在解决可能允许某人解密 SSL 3.0/TLS 1.0 加密流量的漏洞。

Microsoft 的解决方法是确保服务器支持 TLS 1.1，[并在 IE 中启用对 TLS 1.1 的支持](http://support.microsoft.com/kb/2643584#)。禁用 TLS 1.0 会导致 IE 回退到 SSL 3.0，并且似乎也可以解决问题，但并不理想。

自 JRE 1.7 起，Java 仅支持 TLS 1.1。Tomcat 将 JSSE 库用于 SSL。除非您使用可能已经支持 TLS 1.1 的本机 Tomcat 库，否则请确保升级到 JRE 1.7 和 Tomcat 7 以获得 TLS 1.1。

最后一点，对于那些使用 Apache 和 OpenSSL 的人来说：OpenSSL 0.9.x 似乎只支持 TLS 1.0。[我听说你可以用 GnuTLS](http://www.gnu.org/software/gnutls/)构建 Apache ，这应该会给你 TLS 1.1+。

附加参考：[http ://www.thehijax.com/?p=72](http://www.thehijax.com/?p=72)*

# matlab - 删除整行并合并矩阵中的下一行

> ID：11855940
> 
> 赞同：0
> 
> 时间：2012-08-08T00:13:47.303
> 
> 标签：matlab, matrix, delete-row, cell-array

我有一个矩阵 A =

```
'30'  'X' '@NA'
'15'  'Y' [231.001] 
'00'  'Y' [21.110]
'20'  'W' '@NA'
'55'  'X' [9.001]
'10'  'X' [11.211]

>>whos A
  Name        Size              Bytes  Class    Attributes

  aaa         6x3               226    cell 
```

如果第 1 列中除 '10'、'15'、'20'...'55' 或任何 '@NA'第 3 列，然后 MERGE 下一个符合条件的行。

以A为例，第1行和第4行应该删除，因为第3列有'@NA'。第3行也应该删除，因为第1列有'00'。

矩阵 B 应该喜欢，

```
>>B

B = 
    '15'  'Y' [231.001] 
    '55'  'X' [9.001]
    '10'  'X' [11.211] 
```

B 是一个 3*3 的单元矩阵。

欢迎任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:45:39.380

[@paddy](https://stackoverflow.com/a/11856037/97160)的回答略有不同：

```
idx = ismember(A(:,1), num2str((10:5:55)')) & ~strcmp(A(:,3),'@NA');
B = A(idx,:); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:30:55.993

在您的示例中，您并没有说出“合并下一个合格行”的意思。您所做的只是选择在一个或另一个条件上失败的行，然后删除它们。如果这实际上是您想要做的所有事情，那么这样的事情就可以了：

```
validnums = arrayfun( @num2str, 10:5:55, 'uni', 0 );
column1valid = ismember( A(:,1), validnums );
column3valid = cellfun( @isnumeric, A(:,3) )
B = A( column1valid & column3valid, : ); 
```

# security - 如何在 Jenkins 中创建用户并将其添加到组中以进行身份 验证？

> ID：11855944
> 
> 赞同：65
> 
> 时间：2012-08-08T00:14:49.630
> 
> 标签：security, ldap, hudson, openid, jenkins

我选择使用“Jenkins 自己的用户数据库”安全领域进行用户登录，因为我无法在公司中使用 LDAP。当您决定将主机名或端口号更改为其他名称时，Google 的 OpenID 会出现问题。

我使用“基于项目的矩阵授权策略”模式来保证我的安全性。

但我似乎无法创建自己的组，并将用户添加到组以管理权限。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-05T22:06:37.877

[根据 Jenkins 的主要开发人员 Kohsuke Kawaguchi 在 2009 年的帖子，](http://jenkins.361315.n4.nabble.com/Users-Groups-td383878.html)没有对内置 Jenkins 用户数据库的组支持。组支持仅在将 Jenkins 与 LDAP 或 Active Directory 集成时可用。这似乎与 2012 年相同。

[但是，正如 Vadim 在他的回答中所写，由于角色策略插件](https://wiki.jenkins-ci.org/display/JENKINS/Role+Strategy+Plugin)，您不需要对内置 Jenkins 用户数据库的组支持。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-21T11:30:36.123

您可以为此目的使用[角色策略插件。](https://wiki.jenkins-ci.org/display/JENKINS/Role+Strategy+Plugin)它就像一个魅力，只需设置一些角色并分配它们。即使在项目特定的级别。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-19T18:29:11.060

我在 Jenkins-3.5 下安装了角色插件，但它没有在“管理 Jenkins”下显示“管理角色”选项，当一个人从 wiki 访问安全安装页面时，所有用户都会立即被锁定。我不得不手动关闭服务器上的 Jenkins，恢复正确的配置设置（/me 很乐意做正确的备份）并重新启动 Jenkins。

我没有寄予厚望，因为该插件最后一次更新是在 2011 年

# python - 在python中读取两个文件

> ID：11855946
> 
> 赞同：0
> 
> 时间：2012-08-08T00:14:52.790
> 
> 标签：python, file-io, for-loop, iteration

我正在尝试读取两个文件，并在 Python (2.7.3) 上比较它们
它们的大小/顺序不同，因为我正在使用 ID/名称，它们不会“匹配”。

而且我不想同时阅读它们，而是“file2”彻底并与“file1”的每一行进行比较，然后再读取“file1”的另一行，依此类推

从我所做的来看，它工作得不好，有一些问题。

例如，看这段代码：

```
if split_cronus[0] == split_data[0]: 
```

程序执行'if'中的所有内容，然后退出。
如果我再次调用该函数，之后：

```
print final_line + "\n" 
```

它将工作 62 次，然后显示此错误：

```
 Traceback (most recent call last):
   File "C:\Users\Matheus\Desktop\DBWolfmizator\DBWolfmizator\DBWolfmizator.py", line 40,     in <module>
   File "C:\Users\Matheus\Desktop\DBWolfmizator\DBWolfmizator\DBWolfmizator.py", line 28,     in translate_itemdb
translate_itemdb() 
```

每次程序循环时都会显示“第 28 行”错误。

进而：

```
 File "C:\Users\Matheus\Desktop\DBWolfmizator\DBWolfmizator\DBWolfmizator.py", line 15, in translate_itemdb
for line2 in data:
   ValueError: I/O operation on closed file 
```

这意味着，有了“if”，我只能得到一个匹配项，就像文件只有一行一样；但是通过递归，我可以让它在第二个文件结束之前再工作几次。

如果你不明白：
我必须阅读两个文件。
"file1" 和 "file2"
理论上，它的读法是这样的：

```
file1_line1 -> file2_line1
file1_line1 -> file2_line2
file1_line1 -> file2_line3
...
file1_line2 -> file2_line1
file1_line2 -> file2_line1
... 
```

但是当我得到匹配时，程序退出循环。
我怎么做？
在 PHP 中它工作得很好，我试图制作类似“端口”的东西。

Python代码：

```
cronus = open("item_db.txt", "r+")
data = open("idnum2itemdisplaynametable.txt", 'r')
new_item = open("item_db_new.txt", 'w')
def translate_itemdb():
    try:
        try:
            for line in cronus:
                if line.startswith("//") or len(line) < 3:
                    new_item.write(line)
                    continue

                split_cronus = str.split(line, ",")
                del split_cronus[len(split_cronus) - 1]

                for line2 in data:
                    if line2.startswith("//") or len(line2) < 3:
                        continue

                    split_data = str.split(line2, "#")
                    del split_data[len(split_data) - 1]

                    if split_cronus[0] == split_data[0]:
                        split_cronus[1] = str.replace(split_data[1], " ", "_")
                        split_cronus[2] = str.replace(split_data[1], "_", " ")
                        final_line = ','.join(split_cronus)
                        new_item.write(final_line + "\n")
                        print final_line + "\n"

        finally:
            cronus.close()
            data.close()
            new_item.close()

    except IOError:
        raise

    return

translate_itemdb() 
```

PHP代码：

```
<?php
set_time_limit(0);

$Cronus = file('item_db.txt');
$Data = file('idnum2itemdisplaynametable.txt');

for( $i = 0; $Cronus[$i]; $i++ ) {
    if( $Cronus[$i][0] == '/' || strlen($Cronus[$i]) < 3 ) {
        echo $Cronus[$i]."<br />";
        continue;
    }

    $ExplodeCronus = explode( ',', $Cronus[$i] );

    for( $j = 0; @$Data[$j]; $j++ ) {
        if( $Data[$j][0] == '/' || strlen($Data[$j]) < 3 )
            continue;

        $ExplodeData = explode( '#', $Data[$j] );

        if( $ExplodeData[0] == $ExplodeCronus[0] ) {
            $ExplodeCronus[1] = str_replace( " ", "_", $ExplodeData[1] );
            $ExplodeCronus[2] = str_replace( "_", " ", $ExplodeData[1] );
            $Linha = implode( ',', $ExplodeCronus );
                echo $Linha."<br />";
        }
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:33:21.617

一种解决方法是移动这条线：

```
 data = open("idnum2itemdisplaynametable.txt", 'r') 
```

在此行之前：

```
 for line2 in data: 
```

这样您就可以根据需要重新打开数据文件。（根据需要调整异常处理以关闭数据文件。考虑使用`with`。）

其次，为了更接近您发布的 PHP 代码，您可以使用`readlines`. 毕竟，您正在多次阅读该文件。只需一次阅读它们即可开始，然后进行处理。

因此，将数据打开代码留在原处，您可以：

```
 data_f = open("idnum2itemdisplaynametable.txt", 'r')
   data = data_f.readlines() 
```

然后你的`for line2 in data`循环只是重新访问一系列行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:51:47.277

好吧，我会做这样的事情来比较两个文件：

```
def compare_two_files(filename1, filename2):

    input1 = open(filename1)
    input2 = open(filename2)

    lines1 = input1.readlines()
    lines2 = input2.readlines()

    # Iterate over the two files
    for l1 in lines1:
        cur_l1 = l1.split(',')
        for l2 in lines2:
            cur_l2 = l2.split(',')
            # Compare file's lines
            if cur_l1[0] == cur_l2[0]:
                print('something') 
```

我没有测试它，但它应该可以工作。

# php - 使用虚拟字段对 cakephp 中的值求和

> ID：11855948
> 
> 赞同：1
> 
> 时间：2012-08-08T00:14:58.233
> 
> 标签：php, mysql, cakephp

我正在尝试获得给定用户的总票数。

说这是帖子表

```
id | body  | user_id | vote_total | type
1    test     1          4          new
2    test2    1          3          new
3    test3    2          2          new 
```

我正在尝试获得以下输出

```
user_id  | vote_total
 1          7
 2          2 
```

这是我在 PostsController 中的功能

```
 public function topvotes(){ 
    $virtualFields = array('total' => 'SUM(Post.vote_total)');
    $total = $this->Post->find('all', array(
                            array('fields' => array('total'), 
                            'recursive' => 1,
                            'group' => array('Post.user_id'),
                            'conditions'=>array('Post.type' => 'new' ))));

    $post = $this->Post->find('all', $total);
    $this->set('posts', $post);
} 
```

此查询有效（我尝试使用 phpmyadmin），但我不知道如何访问结果数组

**编辑我使用以下查询让它工作**

```
$query = $this->Post->query("select posts.user_id, SUM(Posts.vote_total) from posts where posts.type = 'new' group by posts.user_id");
    $this->set('posts', $query); 
```

当我输入 print_r 这是数组

```
Array ( [posts] => Array ( [user_id] => 7 ) [0] => Array ( [total] => 6 ) ) 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T00:30:13.780

我认为你的阵列搞砸了。另外，您在哪里设置模型的虚拟字段？最后但并非最不重要的一点：为什么要在查询中进行查询？

```
public function topvotes() { 
    $this->Post->virtualFields = array('total' => 'SUM(Post.vote_total)');
    $posts = $this->Post->find('all', array(
                            'fields' => array('total'),
                            'recursive' => 1,
                            'group' => array('Post.user_id'),
                            'conditions'=>array('Post.type' => 'new')
    ));
    $this->set('posts', $posts);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T03:44:14.100

您可以通过以下方式执行相同操作：

```
$this->Post->virtualFields['TotalVotes'] = 0;
$query = $this->Post->query("select posts.user_id, SUM(Posts.vote_total) as TotalVotes from posts where posts.type = 'new' group by posts.user_id");
$this->set('posts', $query); 
```

[此文档页面](http://book.cakephp.org/2.0/en/models/virtual-fields.html#virtual-fields-in-sql-queries)肯定会帮助您实现所需的相同目标。请询问它是否不适合您。

# vb.net - 在 Outlook 中为多个客户端扩展对象的服务器端

> ID：11855951
> 
> 赞同：2
> 
> 时间：2012-08-08T00:15:04.457
> 
> 标签：vb.net, outlook, vsto, outlook-addin

如果我想创建自己的 Outlook 对象来扩展已经存在的类，我需要在服务器端做任何事情吗？我想添加一个插件，您可以在其中发送和接收一种任务类型，它是 Outlook 标准任务的扩展。使用此插件的人很可能会使用 Exchange 服务器。为了使用这个新的任务对象，是否需要在服务器端做任何事情，或者是否可以在客户端做这一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:28:36.920

您可以通过在客户端执行所有操作来管理您的自定义**任务。**所需要的只是创建一个[`MessageClass`](http://msdn.microsoft.com/en-us/library/office/ff867813.aspx)从[现有消息类](http://msdn.microsoft.com/en-us/library/office/bb176446%28v=office.12%29.aspx)扩展的新的`IPM.Task`

```
 mailItem.MessageClass = "IPM.Task.MyCompany.TaskType";
 mailItem.Save(); // persist change 
```

`MessageClass` [有关命名准则和应用自定义表单区域，](http://msdn.microsoft.com/en-us/library/bb157886.aspx)请参阅 MSDN 。

在将自定义表单发布到*表单库*方面，使用 VSTO 安装项目，它将安装到用户的**个人表单库**。请参阅[有关发布展望表格的参考资料](http://www.outlookcode.com/article.aspx?id=34)。传统的 Outlook 表单（*使用 Outlook 设计*）可以发布到**组织表单库**（*企业范围*），但 VSTO 表单仅发布到**个人表单库**。

# php - 我有缺陷的算法：返回 ($desired_result - 1) 或 ($desired_result + 1)

> ID：11855953
> 
> 赞同：0
> 
> 时间：2012-08-08T00:15:44.817
> 
> 标签：php

我正在创建一个脚本来将食谱添加到数据库中。对于我的 add_recipe 表单，我想为用户提供一个选项，让他们可以根据需要添加任意数量的成分。

以下代码只是我出于测试目的而提出的，因为我以前从未尝试过：

```
<?php
$ingredient = '(another ingredient)';
$num_ingredients = $_REQUEST['select'];
?>
<html>
<form name="form1" method="post" action="onchange.php">
<select name="select" onchange="javascript: document.form1.submit();">
  <option value=1>Add 1 Ingredient</option>
  <option value=2>Add 2 Ingredients</option>
  <option value=3>Add 3 Ingredients</option>
</select>
</form>
</body>
</html>
<?php
while ($num_ingredients <= 3) {
  $num_ingredients++;
  echo $ingredient;
  echo '<br />';
}
?> 
```

问题是......我的代码，大声笑。例如...

选项值=1 返回：

```
(another ingredient)
(another ingredient) 
```

选项值=3 返回：

```
(another ingredient) 
```

有人可以引导我朝着正确的方向前进吗？非常感谢任何帮助 8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:18:02.180

你需要一个计数器变量。

```
$count = 0;
if ($num_ingredients > 3) 
   $num_ingredients = 3;
while ($count < $num_ingredients ) {
  $count++;
  echo $ingredient;
  echo '<br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:24:38.023

这里的部分需要更改。$num_ingredients 来自选择为 1、2 和 3 ...您的循环基本上是在说 $num_ingredients 小于或等于 3。选择 1 会给你三个循环，2 会给你 2 个循环，3 会给你1个循环。你需要有一个柜台，即

```
<?php
for ($count = 0; $count < $num_ingredients; $count++) 
{
    echo $ingredient;
    echo '<br />';
}
?> 
```

# python - 如何在 GAE Jinja2 中将查询结果呈现为复选框？

> ID：11855957
> 
> 赞同：2
> 
> 时间：2012-08-08T00:16:34.507
> 
> 标签：python, google-app-engine, checkbox, jinja2, html-rendering

我想在我的应用程序上放置一个按钮，允许用户查询数据存储区中的特定名称。当用户单击提交查询时，查询结果显示为复选框（或单选按钮）列表，允许用户选择结果之一。在 Jinja2 GAE Python 中执行此操作的最佳方法是什么？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:55:45.110

我得到了我的要求：

```
<!DOCTYPE html>

<html>
  <head>
    <title>Search results</title>
    <style type="text/css">
      .label {text-align: right}
      .error {color: red}
    </style>

  </head>

  <body>
    <h2>Search results</h2>
    <form method="post">

{% for p in persons %}

<input type="radio" name="person" value="{{p}}"/> {{p}}

<br>

{% endfor %}

      <input type="submit" value="Choose">
    </form>
  </body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:34:49.833

Jinja2 没有内置 Web 表单支持，但您可以使用[WTForm](http://wtforms.simplecodes.com/)或[Django](https://docs.djangoproject.com/en/dev/topics/forms/)生成表单。

# sql-server-2008 - 通过 Glassfish 3.1 连接池的 SQL Server 2008 的连接关闭错误

> ID：11855959
> 
> 赞同：1
> 
> 时间：2012-08-08T00:16:42.430
> 
> 标签：sql-server-2008, jpa, glassfish, connection-pooling

在我使用适用于 SQL Server 2008 的 GlassFish 3.1 连接池的新“hello world”EJB/JPA 应用程序中，我总是在第一次查询时遇到“连接关闭”错误，并且在部署项目时经常（尽管并非总是）。我必须有一些配置不正确，我希望有人可以给我关于在哪里看的建议。

*   Windows 7 64 位
*   Eclipse 4.2 (Juno) 64 位
*   Java 1.6.0_33 64 位
*   JPA 通用 2.0
*   EclipseLink 2.4.0 - 朱诺
*   内部 GlassFish 3.1.2.2
*   适用于 SQL Server 的 Microsoft JDBC 驱动程序 4.0 (sqljdbc4.jar)
*   微软 SQL Server 2008 R2 (SQLEXPRESS)

我正在使用一个连接池（通过 JTA），它是使用 GlassFish 管理页面和默认设置创建的。“Ping”成功。这是 domain.xml 中的池定义（我将密码设为空白）：

```
<jdbc-connection-pool driver-classname="" datasource-classname="com.microsoft.sqlserver.jdbc.SQLServerConnectionPoolDataSource" res-type="javax.sql.ConnectionPoolDataSource" description="" name="DemoDatabase">
    <property name="User" value="demo"></property>
    <property name="DatabaseName" value="demo"></property>
    <property name="ApplicationName" value="Microsoft JDBC Driver for SQL Server"></property>
    <property name="LockTimeout" value="-1"></property>
    <property name="Password" value="******"></property>
    <property name="SendTimeAsDatetime" value="true"></property>
    <property name="PacketSize" value="8000"></property>
    <property name="SendStringParametersAsUnicode" value="true"></property>
    <property name="XopenStates" value="false"></property>
    <property name="TrustServerCertificate" value="false"></property>
    <property name="URL" value="jdbc:sqlserver://"></property>
    <property name="PortNumber" value="1433"></property>
    <property name="LoginTimeout" value="15"></property>
    <property name="ResponseBuffering" value="adaptive"></property>
    <property name="MultiSubnetFailover" value="false"></property>
    <property name="SelectMethod" value="direct"></property>
    <property name="LastUpdateCount" value="true"></property>
    <property name="WorkstationID" value="drizzle"></property>
    <property name="Encrypt" value="false"></property>
    <property name="ApplicationIntent" value="readwrite"></property>
</jdbc-connection-pool>
<jdbc-resource pool-name="DemoDatabase" description="" jndi-name="jdbc/DemoDatabase"></jdbc-resource> 
```

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="DemoEJB">
    <jta-data-source>jdbc/DemoDatabase</jta-data-source>
</persistence-unit>
</persistence> 
```

我还为 MySQL 设置了一个类似的 GlassFish 连接池。当我使用那个时，我没有收到“连接关闭”错误。我由此推测问题出在我的 SQL Server 池配置中。

这是 GlassFish 日志中的错误：

```
INFO: WEB0671: Loading application [DemoEAR#Demo.war] at [Demo]
INFO: DemoEAR was successfully deployed in 1,066 milliseconds.
INFO: RAR7114: Unable to get ClientInfo for connection 
INFO: RAR7115: Unable to set ClientInfo for connection
INFO: Communication failure detected when attempting to perform read query outside of a transaction. Attempting to retry query. Error was: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.microsoft.sqlserver.jdbc.SQLServerException: The connection is closed.
Error Code: 0
Call: SELECT ID, VAL FROM entity1 ORDER BY ID ASC
Query: ReadAllQuery(referenceClass=Entity1 sql="SELECT ID, VAL FROM entity1 ORDER BY ID ASC").
INFO: RAR7114: Unable to get ClientInfo for connection 
INFO: RAR7115: Unable to set ClientInfo for connection
INFO: Communication failure detected when attempting to perform read query outside of a transaction. Attempting to retry query. Error was: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.microsoft.sqlserver.jdbc.SQLServerException: The connection is closed.
Error Code: 0
Call: SELECT ID, VAL FROM entity1 ORDER BY ID ASC
Query: ReadAllQuery(referenceClass=Entity1 sql="SELECT ID, VAL FROM entity1 ORDER BY ID ASC").
INFO: RAR7114: Unable to get ClientInfo for connection 
INFO: RAR7115: Unable to set ClientInfo for connection
INFO: Communication failure detected when attempting to perform read query outside of a transaction. Attempting to retry query. Error was: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.microsoft.sqlserver.jdbc.SQLServerException: The connection is closed.
Error Code: 0
Call: SELECT ID, VAL FROM entity1 ORDER BY ID ASC
Query: ReadAllQuery(referenceClass=Entity1 sql="SELECT ID, VAL FROM entity1 ORDER BY ID ASC").
INFO: RAR7114: Unable to get ClientInfo for connection 
INFO: RAR7115: Unable to set ClientInfo for connection
INFO: Communication failure detected when attempting to perform read query outside of a transaction. Attempting to retry query. Error was: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.microsoft.sqlserver.jdbc.SQLServerException: The connection is closed.
Error Code: 0
Call: SELECT ID, VAL FROM entity1 ORDER BY ID ASC
Query: ReadAllQuery(referenceClass=Entity1 sql="SELECT ID, VAL FROM entity1 ORDER BY ID ASC").
INFO: RAR7114: Unable to get ClientInfo for connection 
INFO: RAR7115: Unable to set ClientInfo for connection
INFO: Communication failure detected when attempting to perform read query outside of a transaction. Attempting to retry query. Error was: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.microsoft.sqlserver.jdbc.SQLServerException: The connection is closed.
Error Code: 0
Call: SELECT ID, VAL FROM entity1 ORDER BY ID ASC
Query: ReadAllQuery(referenceClass=Entity1 sql="SELECT ID, VAL FROM entity1 ORDER BY ID ASC").
WARNING: Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.microsoft.sqlserver.jdbc.SQLServerException: The connection is closed.
Error Code: 0
Call: SELECT ID, VAL FROM entity1 ORDER BY ID ASC
Query: ReadAllQuery(referenceClass=Entity1 sql="SELECT ID, VAL FROM entity1 ORDER BY ID ASC")
at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.processExceptionForCommError(DatabaseAccessor.java:1494)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:636)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)
at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1717)
at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:566)
at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeSelectCall(DatasourceCallQueryMechanism.java:264)
at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectAllRows(DatasourceCallQueryMechanism.java:646)
at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRowsFromTable(ExpressionQueryMechanism.java:2611)
at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRows(ExpressionQueryMechanism.java:2570)
at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:420)
at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1081)
at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1040)
at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:392)
at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1128)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
at org.eclipse.persistence.internal.sessions.AbstractSession.retryQuery(AbstractSession.java:1586)
at org.eclipse.persistence.sessions.server.ClientSession.retryQuery(ClientSession.java:593)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.retryQuery(UnitOfWorkImpl.java:5464)
at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1552)
at org.eclipse.persistence.internal.sessions.AbstractSession.retryQuery(AbstractSession.java:1586)
at org.eclipse.persistence.sessions.server.ClientSession.retryQuery(ClientSession.java:593)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.retryQuery(UnitOfWorkImpl.java:5464)
at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1552)
at org.eclipse.persistence.internal.sessions.AbstractSession.retryQuery(AbstractSession.java:1586)
at org.eclipse.persistence.sessions.server.ClientSession.retryQuery(ClientSession.java:593)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.retryQuery(UnitOfWorkImpl.java:5464)
at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1552)
at org.eclipse.persistence.internal.sessions.AbstractSession.retryQuery(AbstractSession.java:1586)
at org.eclipse.persistence.sessions.server.ClientSession.retryQuery(ClientSession.java:593)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.retryQuery(UnitOfWorkImpl.java:5464)
at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1552)
at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1463)
at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:485)
at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getResultList(EJBQueryImpl.java:742)
at com.centricsoftware.demo.module1.Module1.addEntity1(Module1.java:23)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
at $Proxy216.addEntity1(Unknown Source)
at com.centricsoftware.demo.module1.__EJB31_Generated__Module1__Intf____Bean__.addEntity1(Unknown Source)
at com.centricsoftware.demo.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:31)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662)
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The connection is closed.
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
at com.microsoft.sqlserver.jdbc.SQLServerConnectionPoolProxy.checkClosed(SQLServerConnectionPoolProxy.java:55)
at com.microsoft.sqlserver.jdbc.SQLServerConnectionPoolProxy.prepareStatement(SQLServerConnectionPoolProxy.java:207)
at com.sun.gjc.spi.base.ConnectionHolder.prepareStatement(ConnectionHolder.java:562)
at com.sun.gjc.spi.jdbc40.ConnectionWrapper40.prepareCachedStatement(ConnectionWrapper40.java:255)
at com.sun.gjc.spi.jdbc40.ConnectionWrapper40.prepareCachedStatement(ConnectionWrapper40.java:52)
at com.sun.gjc.spi.ManagedConnection.prepareCachedStatement(ManagedConnection.java:993)
at com.sun.gjc.spi.jdbc40.ConnectionWrapper40.prepareStatement(ConnectionWrapper40.java:173)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.prepareStatement(DatabaseAccessor.java:1474)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.prepareStatement(DatabaseAccessor.java:1423)
at org.eclipse.persistence.internal.databaseaccess.DatabaseCall.prepareStatement(DatabaseCall.java:697)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:585)
... 98 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T10:37:14.207

You must add the .jar jdbc sqlserver driver in your glassfish server as folow: {installationPth}\glassfish4\glassfish\domains\domain1\lib\ext

enjoy Kahoo:

(_/) (='.'=) (")_(")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:31:10.517

您的数据库服务器是否正在运行？

也许它与您的 LoginTimeout 属性有关，您的登录可能需要更长的时间。尝试从连接池配置中删除除必需属性之外的所有属性。

也可能是防火墙、网络或数据库问题使您的连接超时。

您还可以在连接池中启用连接测试，以在返回连接之前验证连接。

您也可以始终使用 EclipseLink 连接池，或者尝试使用它来查看是否遇到相同的问题。

另外，包括您的 persistence.xml。

# google-apps-script - 触发函数和 IMPORTRANGE

> ID：11855960
> 
> 赞同：4
> 
> 时间：2012-08-08T00:17:08.523
> 
> 标签：google-apps-script, google-sheets, triggers, importrange

我有一个 Google Apps 脚本，它将 Google 表单中提交的信息与使用 IMPORTRANGE 函数带入 Google 电子表格的信息进行比较。如果我手动运行该脚本，但如果它从表单提交触发器运行，它会报告它没有从使用 IMPORTRANGE 的单元格中获取正确的信息。

有没有办法解决这个问题，比如我可以添加一个快速功能来强制更新导入范围吗？

我已经尝试添加长达 10 分钟的等待时间，但并没有改变结果。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T02:54:07.107

问题在于函数是如何`importRange`工作的。实际上，它们需要与使用它们登录的用户帐户相同的访问/权限，以避免安全漏洞（想象您拥有的电子表格的编辑器访问您未与他们共享的其他电子表格）。

正因为如此（好吧，至少我是这么认为的），这些公式只有在您打开电子表格时才会被评估。当您关闭它并让脚本在触发器上运行时，它不会在预期的单元格上找到任何结果。

一个简单的解决方法是使用脚本本身获取数据并使用`importRange`. 这很容易做到，例如

```
var values = SpreadsheetApp.openById('external-spreadsheet-key').
  getSheetByName('Sheet1').getRange('A1:D100').getValues();
SpreadsheetApp.getActive().getSheetByName('DestSheet').
  getRange(1,1,values.length,values[0].length).setValues(values); 
```

显然，电子表格键、工作表的名称和范围只是这里的一个示例。

# objective-c - 带有 copyWithZone 的不可变对象：

> ID：11855963
> 
> 赞同：0
> 
> 时间：2012-08-08T00:17:44.480
> 
> 标签：objective-c, copy

`fracB`我想知道为什么当它引用一个不可变`Fraction`对象时我仍然被允许更改`NSCopyWithZone:`？

```
#import <Foundation/Foundation.h>

@interface Fraction : NSObject <NSCopying>
@property int numerator, denominator;

-(void) set: (int) n over: (int) d;
-(Fraction *) initWithValues: (int) n over: (int) d;

@end

@implementation Fraction
@synthesize numerator, denominator;

-(Fraction *) initWithValues:(int)n over:(int)d {
    self = [super init];

    if (self) 
        [self set:n over:d];

    return self;
}

-(void) set: (int) n over:(int)d {
    numerator = n;
    denominator = d;
}

-(Fraction *) copyWithZone:(NSZone *)zone {
    Fraction *copied = [[Fraction allocWithZone: zone] init];

    [copied set:numerator over:denominator];

    return copied;
}

@end 
```

* * *

```
#import "Fraction.h"
#import <Foundation/Foundation.h>

int main (int argc, char *argv[])  
{  
    @autoreleasepool {  
        Fraction *fracA = [[Fraction alloc] initWithValues:5 over:5];
        Fraction *fracB = [[Fraction alloc] init];

        fracB = [fracA copy];
        [fracB set:2 over:2];

        NSLog(@"%@", fracB);
    }
    return 0;  
} 
```

* * *

```
2012-08-07 20:01:04.248 prog[1972:707] 2/2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:23:31.503

可变性是由类定义的，而不是由用于创建实例的方法、框架和语言定义的。只有您自己的代码才能使您的类不可变。

更简单地说，如果该类为某些属性提供了一个 setter 方法，那么无论您使用`copy`or ，您都可以设置该属性`mutableCopy`。

正如[`NSMutableCopying`文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSMutableCopying_Protocol/Reference/Reference.html)（方法从何而来`mutableCopy`）所说，

> 只有定义“不可变与可变”区别的类才应采用此协议。

如果您希望自己的类有这种区别，最好的方法是在/或/的模具中创建*两个*类，其中可变版本是另一个的子类。所以你可能有和。`NSArray``NSMutableArray``NSString``NSMutableString``Fraction``MutableFraction`

只会`MutableFraction`有方法`set:over:`；`Fraction`实例将要求在创建对象时设置这些值。然后，您将实现`mutableCopy`in`Fraction`以返回一个实例`MutableFraction`（您的实现`copy`可以保持原样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:24:14.813

因为你的类是可变的。Objective-C 不知道你的意思是它是不可变的——该语言甚至不知道不可变的含义。如果你的类有变异器（导致其状态或值改变的方法），`NSCopying`不会让它们消失。

如果您希望您的类真正不可变，请删除您的 mutator ( `-set:over:`.) 如果您想区分可变对象和不可变对象，请创建一个子类并仅在该子类中`MutableFraction`公开。`-set:over:`

# jquery - jQuery 通过单击 body 关闭/切换 div

> ID：11855972
> 
> 赞同：0
> 
> 时间：2012-08-08T00:19:09.793
> 
> 标签：jquery, loops, click

在这个小的 jsFiddle [http://jsfiddle.net/PcWjA/22/](http://jsfiddle.net/PcWjA/22/)中，我试图在点击正文（或*不在*列表项上的任何地方）时进行 ul go display:none 并且第一次有点击身体。但在那之后，脚本似乎循环并显示/隐藏 ul 以闪烁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:33:12.730

我有另一个答案 [http://jsfiddle.net/FfBzT/](http://jsfiddle.net/PcWjA/22/)

```
jQuery(document).ready(function() {
    jQuery('.hour_dropdown').hide()
    $(window).click(function (event) {
        if ($(event.target).hasClass("hour_dropdown") ||
            $(event.target).parents(".hour_dropdown").size() > 0 ||  
            $(event.target).hasClass("more")){
                 // do nothing....
            } else {
                    $('.hour_dropdown').fadeOut(200);
            }
    });
    jQuery('.more').click(function() {
        //if ($('.hour_dropdown').css("display")=="none") {
            $('.hour_dropdown').fadeToggle(200);
        //}
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:26:09.387

问题是您重复注册 body.click 处理程序，并且从不删除它。jQuery 维护一个事件侦听器列表，因此当您多次添加相同的单击处理程序时，每次单击都会执行多次。

我将在 document.ready 事件中设置一次正文单击处理程序，并让它仅在当前可见时隐藏小时下拉列表，例如：

```
jQuery('.more').click(function() {
    if ($('.hour_dropdown').is(':hidden')) {
        $('.hour_dropdown').fadeToggle(200);
    }
});

jQuery('body').click(function() {
    if ($('.hour_dropdown').is(':visible')) {
        $('.hour_dropdown').fadeOut(200);
    }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T00:26:43.793

只需取消绑定身体点击事件，这将解决您的问题。

```
jQuery(document).ready(function() {
    jQuery('.hour_dropdown').hide()

    jQuery('.more').click(function() {
        if ($('.hour_dropdown').is(':hidden')) {
            $('.hour_dropdown').fadeToggle(200);
            $("body").unbind();

        } else {
            $('body').click(function() {
                $('.hour_dropdown').fadeOut(200);
            });
        }
    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T00:33:01.797

怎么样（希望这是正确的行为）：

```
jQuery(document).ready(function() {

    var element = $('.hour_dropdown');
    element.hide();

    $('body').click(function(event) {        
       if ( ('more' ==  $(event.target).attr('class') ) || (0 <  $(event.target).parents('.more').length ) ) {
          element.fadeIn(200);        
       } else {
          element.fadeOut(200);
       }
    });
});​ 
```

它检查单击的元素是否正是具有类的元素，`more`或者父元素是否具有此类。它还将具有类的元素存储`.hour_dropdown`在一个变量中并减少请求，并且它只有一个事件处理程序。 [小提琴](http://jsfiddle.net/N6rXe/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T00:38:15.203

我通常不会将这些类型的事件绑定到主体，因为事件冒泡会变得很困难。我建议制作一个出现并处理关闭事件的固定覆盖：

[http://jsfiddle.net/PcWjA/33/](http://jsfiddle.net/PcWjA/33/)

```
jQuery(document).ready(function() {
    jQuery('.hour_dropdown').hide()

    $('.more').on('click', function() {
        $('.hour_dropdown').fadeToggle(200);
        $('#overlay').show();
    });

    $('#overlay').on('click', function() {
        $('.closeable').fadeOut();
        $(this).hide();
    });
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T00:54:02.610

像这样为跨度提供一个 id：`<span id="more" class="more">` 并像这样修改您的 JS 代码：

```
jQuery(document).ready(function() {
    jQuery('.hour_dropdown').hide()

    jQuery('.more').click(function() {
        if ($('.hour_dropdown').is(':hidden')) {
            $('.hour_dropdown').fadeToggle(200);
        } else {
            $('body').click(function(event) {
              if(event.target.id!="more")

                $('.hour_dropdown').fadeOut(200);
            });
        }
    });
}); 
```

您更新的小提琴现在看起来像这样：[Demo](http://jsfiddle.net/PcWjA/34/)

# google-places-api - 访问 google 地方评级图片 url

> ID：11855973
> 
> 赞同：3
> 
> 时间：2012-08-08T00:19:33.460
> 
> 标签：google-places-api

Yelp API 不仅可以返回数字评分，还可以返回图像，因此您可以显示带有 yelp 品牌的评论图像（rating_img_url 显示部分星等）

谷歌也可以这样做吗？API 文档引用了旧的 0-5 排名： [https ://developers.google.com/places/documentation/#PlaceDetailsResults](https://developers.google.com/places/documentation/#PlaceDetailsResults)

当前的 Google 地方结果显示“得分：总体”，然后是 0-30，请参阅： [https ://plus.google.com/local/San%20Francisco,%20CA/s/starbucks%20market?gl=us&hl=en](https://plus.google.com/local/San%20Francisco,%20CA/s/starbucks%20market?gl=us&hl=en)

目前是否有推荐/批准的方法来访问评级并显示适当的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:36:18.653

Google Places API 目前不支持这些功能。请提交[Places API - 功能请求](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)以告知我们，以便我们为您提供。

目前没有推荐/批准的方式来显示 Google Places API 的评分图像。您可以自由使用您认为适用于您的应用程序的任何方法。

# ios - UIPickerView 不显示 iOS4 中组件的自定义视图（它在 iOS5 中显示）

> ID：11855977
> 
> 赞同：0
> 
> 时间：2012-08-08T00:19:51.397
> 
> 标签：ios, cocoa-touch, uipickerview

我有一个 UIPickerView 具有以下委托方法实现：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return 2;
}

- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {

    if(!view)
    {
        view = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 0, 37)] autorelease];
        UILabel *label = (UILabel*)view;
        label.autoresizingMask = UIViewAutoresizingFlexibleWidth;
        label.textAlignment = UITextAlignmentCenter;
        label.font = [UIFont boldSystemFontOfSize:24];
        label.backgroundColor = [UIColor whiteColor];
        view.userInteractionEnabled = NO;
    }

    ((UILabel*)view).text = @"X";
    return view; 
```

这段代码在 iOS 5 中运行良好。也就是说，我得到了一个 UIPickerView，它有 2 行，上面有一个 X。然而，在 iOS4 下，即使调用了 3 个方法，当我显示 UIPickerView 时，内部也是空白的，就好像没有行存在一样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:31:54.847

嗯，两个想法。首先，您创建的视图没有宽度 - 它设置为 0。我想您需要给它一些宽度，不是吗？

其次，该委托方法的描述表明传入的视图被隐藏和缓存。这会让我相信你可能想要“view.hidden = NO;”。

我敢打赌其中一个或两个都是问题，但是 YMMI :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:25:44.613

谢谢，我有同样的问题。只是改变我已经解决的框架大小。

# unix - 匹配数据中的 gawk 命令

> ID：11855979
> 
> 赞同：-2
> 
> 时间：2012-08-08T00:20:28.773
> 
> 标签：unix, sed, command, gawk

原始日志文件示例：

> "GET /dynamic_preroll_playlist.fmil?domain=13nwuc&width=480&height=360&imu=medrect&pubchannel=filmannex&ad_unit=category_2&sdk_ver=2.4.1.3&embeddedIn=http%3A%2F%2Fwww.filmannex.com%2Fmovie%2Fend-of-the-tunnel%2F20872&sdk_url= http%3A%2F%2Fstatic2.filmannex.com%2Fflash%2F&**视口=10,261,971,0,981,10,10,261** HTTP/1.1”、200、201、1516、16363、“http://static2.filmannex.com/flash/yume_ad_library.swf”、pl.networks.com、“Mozilla/4.0（兼容；MSIE 7.0；Windows NT 6.0 ; FunWebProducts的; GTB7.3; SLCC1; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30618; FunWebProducts的; .NET4.0C） “ ”24_100_150_188_jZKFKQQjdRNM6e“， ”0rO0ABXd8AAAACgAAASQAAAaLAAAGiwAAASgAAAaLAAAGiwAAAVoAAAaLAAAGiwAAAVkAAAaKAAAGiwAAAdwAAAaKAAAGiwAAAhIAAAaKAAAGiwAAAhUAAAaKAAAGiwAAAhYAAAaKAAAGiwAAAhsAAAaKAAAGiwAAAiwAAAaKAAAGiw **“，” -”、“-”、“@YD_1;233_2739”、-、“-”、“24.100.150.188”、“199.127.205.6”

所需的输出是第 5 和第 6 个视口：

981 10

我得到了下面的 gawk 代码，它产生了第三个和第四个字段：

910 0

```
gawk 'match($0, /&viewport=[0-9]+,[0-9]+,([0-9]+),([0-9]+)/, m){print m[1], m[2]}' filename 
```

谁能帮我解决这个问题？对gawk命令稍作改动就可以获取视口的第5个和第6个参数？

有任何想法吗？提前非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:33:38.343

此命令将执行您想要的操作：

```
awk '{split($0,a,"viewport=");split(a[2],b,",");print b[5],b[6]}' filename 
```

给出：

```
981 10 
```

***如果*** *您确实想要修改后的`gawk`命令*：

```
gawk 'match($0, /&viewport=[0-9]+,[0-9]+,([0-9]+),([0-9]+),([0-9]+),([0-9]+),([0-9]+)/, m){print m[3], m[4]}' filename 
```

也将工作。

我认为第一个解决方案更清晰/更清晰，也更容易修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:24:40.770

这可能对您有用（GNU sed）：

```
sed 's/.*&viewport=\(\([^,]*\),\([^,]*\),\)\{3\}.*/\2 \3/' file 
```

# c# - C# 检查 SharePoint 列表条目是否已存在.. CAML？

> ID：11855987
> 
> 赞同：1
> 
> 时间：2012-08-08T00:22:19.403
> 
> 标签：c#, sharepoint, duplicates, caml, sharepoint-list

我有两个相同的 SharePoint 列表。我正在使用 C# 循环一个并使用 SP 对象模型添加到另一个。

问题是我不想添加到另一个，如果已经有一个包含 3 个特定字段的列表条目与来自列表匹配。

在 C# 中如何做到这一点？使用 CAML？

假设我的列表被称为 from 和 to，并且字段被称为 a、b 和 c。

在这里，我不想在“to”中添加一个条目，如果已​​经有一个条目与 a、b 和 c 匹配我当前的 from 条目。

```
SPList fList = web.GetList("/sites/xxxx/Lists/from"); 
SPList tList = web.GetList("/sites/xxxx/Lab/Lists/to"); 

foreach (SPListItem fListItem in fList.Items)     
{   
   // my caml code here i suspect?
   //SPquery.query = "CAML";
   //SPList<yourlist>.GetItems(SPQuery object) 

   SPListItem tListItem = tList.Items.Add();       
   foreach (SPField field in fList.Fields)      
    {                   
 try 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:05:10.913

我将从使用 SPMetal 开始（如果可能，LINQ To SharePoint）。

```
 MyContext context = new MyContext(SPContext.Current.Web.Url);

var fItems = from f in context.FromList
        select f;

foreach(FItem fitem in fItems)
{
    var toFoundItems = from t in context.ToList
                where t.Field1 == fitem.Field1 && t.Field2 == fitem.Field2 && t.Field3 == fitem.Field3
                select t;

    if(t.Count > 0)
        continue;
    else
        //Code to add items can use context to do this here also
    } 
```

另一种方式就像你提到的并使用SPQuery。

```
 SPQuery query = new SPQuery();
query.Query = string.format("
<Where> 
    <AND>  

        <Eq>
            <FieldRef Name='Field1' />
            <Value Type='Text'>{0}</Value>
        </Eq>
        <And>
            <Eq>
                <FieldRef Name='Field2' />
                <Value Type='Text'>{1}</Value>
            </Eq>
            <Eq>
                <FieldRef Name='Field3' />
                <Value Type='Text'>{2}</Value>
            </Eq>
        </And>
    </And>
</Where>");

    SPListItemCollection items = tList.GetItems(query);

if(items.Count > 0)
    continue;
else
    //Code to add item 
```

我不在我的普通电脑上，所以我无法测试这些代码中的任何一个，但应该让您了解如何开始，不幸的是，SharePoint 不允许复合唯一键。

如果您想从不同的角度解决问题，则可以使用该列表上的事件接收器来强制执行复合唯一键。

# mysql - 排序左连接查询

> ID：11855991
> 
> 赞同：0
> 
> 时间：2012-08-08T00:22:51.770
> 
> 标签：mysql, join

我有 3 张桌子：`domains`, `status`, `domain_status`.

```
mysql> desc domains;
+---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| domain_id     | int(11)      | NO   | PRI | NULL    | auto_increment |
| domain_url    | varchar(255) | YES  |     | NULL    |                |
| domain_active | int(1)       | YES  |     | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+

mysql> desc status;
+---------------+-------------+------+-----+---------+----------------+
| Field         | Type        | Null | Key | Default | Extra          |
+---------------+-------------+------+-----+---------+----------------+
| status_id     | int(11)     | NO   | PRI | NULL    | auto_increment |
| response_time | varchar(11) | YES  |     | NULL    |                |
| time_pinged   | int(11)     | YES  |     | NULL    |                |
+---------------+-------------+------+-----+---------+----------------+

mysql> desc domain_status;
+------------------+---------+------+-----+---------+----------------+
| Field            | Type    | Null | Key | Default | Extra          |
+------------------+---------+------+-----+---------+----------------+
| domain_status_id | int(11) | NO   | PRI | NULL    | auto_increment |
| domain_id        | int(11) | YES  |     | NULL    |                |
| status_id        | int(11) | YES  |     | NULL    |                |
+------------------+---------+------+-----+---------+----------------+ 
```

数据

```
mysql> SELECT * FROM domains;
    +-----------+----------------+---------------+
    | domain_id | domain_url     | domain_active |
    +-----------+----------------+---------------+
    |         1 | yahoo.com      |             1 |
    |         2 | google.com     |             1 |
    +-----------+----------------+---------------+
    2 rows in set

    mysql> SELECT * FROM status;
    +-----------+---------------+-------------+
    | status_id | response_time | time_pinged |
    +-----------+---------------+-------------+
    |         1 | 143           |  1344373818 |
    |         2 | 0             |  1344373945 |
    |         3 | 40            |  1344374045 |
    |         4 | 504           |  1344375047 |
    +-----------+---------------+-------------+
    4 rows in set

    mysql> SELECT * FROM domain_status;
    +------------------+-----------+-----------+
    | domain_status_id | domain_id | status_id |
    +------------------+-----------+-----------+
    |                1 |         1 |         1 |
    |                2 |         1 |         2 |
    |                3 |         2 |         3 |
    |                4 |         2 |         4 |
    +------------------+-----------+-----------+ 
```

我正在尝试列出域并显示表中最高`time_pinged`行的状态记录`status`。我尝试了使用 group by 的 MAX 函数，但只有在没有其他列数据要显示的情况下才有效，这里不是这种情况。

查询现在显示 4 行，我已经尝试了几个小时让它显示 2 行，同时显示最高`time_pinged`

询问：

```
SELECT
    domains.domain_id,
    domain_url,
    response_time,
    time_pinged,
    domain_active
FROM
    (domains)
LEFT JOIN domain_status ON domain_status.domain_id = domains.domain_id
LEFT JOIN status ON status.status_id = domain_status.status_id
WHERE
    (
        domains.domain_id LIKE '%%'
        OR domain_url LIKE '%%'
        OR response_time LIKE '%%'
        OR time_pinged LIKE '%%'
        OR domain_active LIKE '%%'
    )
ORDER BY
    domain_id ASC
LIMIT 25 
```

查询结果：

```
+-----------+----------------+---------------+-------------+---------------+
| domain_id | domain_url     | response_time | time_pinged | domain_active |
+-----------+----------------+---------------+-------------+---------------+
|         1 | dhhcontrol.com | 143           |  1344373818 |             1 |
|         1 | dhhcontrol.com | 0             |  1344373945 |             1 |
|         2 | google.com     | 504           |  1344375047 |             1 |
|         2 | google.com     | 40            |  1344374045 |             1 |
+-----------+----------------+---------------+-------------+---------------+
4 rows in set 
```

抱歉，如果它有点啰嗦，我已经尝试在连接等中选择。我无法弄清楚。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:34:24.920

我认为你需要有一个额外的东西`subquery`来获得它们的最大值，然后将它们与你的表连接起来。试试这个：（`INNER JOIN`会这样做，因为只会检索所有具有最高 ping 的域）

```
SELECT  y.domain_id, 
        y.domain_url,
        w.response_time,
        w.time_pinged,
        y.domain_active
FROM    domains y INNER JOIN
            (
                SELECT  a.domain_id, MAX(c.time_pinged) MaxPing
                FROM    domains a 
                            INNER JOIN domain_status b
                                on a.domain_id = b.domain_id
                            INNER JOIN `status` c
                                on b.status_id = c.status_ID
                GROUP BY a.domain_id
            ) z ON  y.domain_id = z.domain_id
            INNER JOIN domain_status x
                ON  y.domain_id = x.domain_id
            INNER JOIN `status` w
                ON  x.status_id = w.status_ID AND
                    z.MaxPing = w.time_pinged
-- WHERE ... your condition
ORDER BY domain_id ASC
LIMIT 25 
```

# trigger.io - parse.push.subscribe 后获取 objectId

> ID：11855996
> 
> 赞同：1
> 
> 时间：2012-08-08T00:23:40.110
> 
> 标签：trigger.io, parse-platform

我正在构建一个 Trigger.io 应用程序并使用 Parse 进行推送通知。一切都很好；但是，我需要获取我的安装的 objectId。我知道，如果我直接使用解析 API，则响应正文是一个 JSON 对象，其中包含 objectId 和新创建安装的 createdAt 时间戳。如果我使用 forge.partners.parse.push.subscribe 有没有办法得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:14:19.140

安装 ID 现在可通过新 API 获得 -[`forge.partners.parse.installationInfo`](http://docs.trigger.io/en/v1.4/partners/parse.html#installationinfo)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-13T17:13:54.353

您可以通过简单地使用 Parse REST API 来获取安装的详细信息： [https ://www.parse.com/docs/rest](https://www.parse.com/docs/rest)

# emacs - Emacs lisp，简洁的键盘映射

> ID：11855997
> 
> 赞同：3
> 
> 时间：2012-08-08T00:23:47.073
> 
> 标签：emacs, elisp

在 emacs 中的 evil-mode 之上，我编写了一个扩展模式，它允许我在单个按键中插入数学和希腊语 unicode 字符。但是代码看起来像这样（数百行）：

```
(define-key evil-unicode-state-map "a" "α")
(define-key evil-unicode-state-map "b" "β")
(define-key evil-unicode-state-map "g" "γ") 
```

我想知道是否有删除所有样板的首选方法？理想情况下，我将能够编写如下内容：

```
(setq evil-unicode-state-map
  {"a" "α"
   "b" "β"
   "g" "γ"}) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T00:57:11.340

One way to do it will be:

```
(setq my-evil-unicode-state-map
  '(("a" . "α")
    ("b" . "β")
    ("g" . "γ")))

(dolist (key-def my-evil-unicode-state-map)
  (let ((key (car key-def)) (def (cdr key-def)))
    (define-key evil-unicode-state-map key def))) 
```

EDIT: (reflecting [Ivan Andrus](https://stackoverflow.com/users/152879/)'s comment)

If `my-evil-unicode-state-map` is not used elsewhere,

```
(dolist (key-def
         '(("a" . "α")
           ("b" . "β")
           ("g" . "γ"))))
  (define-key evil-unicode-state-map (car key-def) (cdr key-def))) 
```