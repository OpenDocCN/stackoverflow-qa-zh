# StackOverflow 问答 11064000-11064999

# javascript - Javascript显示警报而不刷新页面

> ID：11064004
> 
> 赞同：0
> 
> 时间：2012-06-16T13:51:17.967
> 
> 标签：javascript

当我单击提交按钮时，它会显示正确的验证，但是在该警报消息之后页面正在刷新并且我丢失了字段中的所有其他数据：S，我怎样才能使它仍然保持其他字段的填充状态。

我尝试在调用提交事件后删除 window.location.reload() 但仍然无法正常工作：S。任何人有什么建议吗？

这是代码：

```
function formValidation() {
  var uid = document.registration.userid;
  var passid = document.registration.passid;
  var uname = document.registration.username;
  var uadd = document.registration.address;
  var ucountry = document.registration.country;
  var uzip = document.registration.zip;
  var uemail = document.registration.email;
  var umsex = document.registration.msex;
  var ufsex = document.registration.fsex;
  if (userid_validation(uid, 5, 12)) {
    if (passid_validation(passid, 7, 12)) {
      if (allLetter(uname)) {
        if (alphanumeric(uadd)) {
          if (countryselect(ucountry)) {
            if (allnumeric(uzip)) {
              if (ValidateEmail(uemail)) {
                if (validsex(umsex, ufsex)) {}
              }
            }
          }
        }
      }
    }
  }
  return false;

}
function userid_validation(uid, mx, my) {
  var uid_len = uid.value.length;
  if (uid_len == 0 || uid_len >= my || uid_len < mx) {
    alert("User Id should not be empty / length be between " + mx + " to " + my);
    uid.focus();
    return false;
  }
  return true;
}

function passid_validation(passid, mx, my) {
  var passid_len = passid.value.length;
  if (passid_len == 0 || passid_len >= my || passid_len < mx) {
    alert("Password should not be empty / length be between " + mx + " to " + my);
    passid.focus();
    return false;
  }
  return true;
}

function allLetter(uname) {
  var letters = /^[A-Za-z]+$/;
  if (uname.value.match(letters)) {
    return true;
  } else {
    alert('Username must have alphabet characters only');
    uname.focus();
    return false;
  }
}

function alphanumeric(uadd) {
  var letters = /^[0-9a-zA-Z]+$/;
  if (uadd.value.match(letters)) {
    return true;
  } else {
    alert('User address must have alphanumeric characters only');
    uadd.focus();
    return false;
  }
}

function countryselect(ucountry) {
  if (ucountry.value == "Default") {
    alert('Select your country from the list');
    ucountry.focus();
    return false;
  } else {
    return true;
  }
}

function allnumeric(uzip) {
  var numbers = /^[0-9]+$/;
  if (uzip.value.match(numbers)) {
    return true;
  } else {
    alert('ZIP code must have numeric characters only');
    uzip.focus();
    return false;
  }
}

function ValidateEmail(uemail) {
  var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
  if (uemail.value.match(mailformat)) {
    return true;
  } else {
    alert("You have entered an invalid email address!");
    uemail.focus();
    return false;
  }
}
function validsex(umsex, ufsex) {
  x = 0;

  if (umsex.checked) {
    x++;
  }
  if (ufsex.checked) {
    x++;
  }
  if (x == 0) {
    alert('Select Male/Female');
    umsex.focus();
    return false;
  } else {
    alert('Form Succesfully Submitted');
    window.location.reload()
    return true;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:14:21.493

两个问题...

1.  缺少退货

    onSubmit="return formValidation();"

2.  缺少返回真；

    if (validsex(umsex, ufsex)) { 返回真；}

# .htaccess - 使用 Apache2 在 Ubuntu 12.04 上启用 htaccess 错误

> ID：11064005
> 
> 赞同：6
> 
> 时间：2012-06-16T13:51:22.517
> 
> 标签：.htaccess, apache2

我试图启用 htaccess。我变了：

```
<Directory /var/www/abc.biz/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory> 
```

到：

```
<Directory /var/www/abc.biz/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
</Directory> 
```

但我收到 500（内部服务器）错误。为什么？

这是我的`/etc/apache2/sites-available/default`文件：

```
<VirtualHost *:80>
ServerAdmin admin@abc.biz

DocumentRoot /var/www/abc.biz
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /var/www/abc.biz/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog ${APACHE_LOG_DIR}/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog ${APACHE_LOG_DIR}/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T18:18:08.800

我认为您需要更改 /etc/apache2/sites-available/default 的这一部分

```
DocumentRoot /var/www/abc.biz
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /var/www/abc.biz/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory> 
```

到

```
DocumentRoot /var/www/abc.biz
<Directory />
    Options FollowSymLinks
    AllowOverride All
</Directory>
<Directory /var/www/abc.biz/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
</Directory> 
```

因为起初`<Directory /> AllowOverride All`您允许使用 .htaccess 文件覆盖整个 apache 的设置，但您还需要`<Directory /var/www/abc.biz/> AllowOverride All`针对您的网站所在的特定主机目录更改它。此外，您应该检查放置在 /var/www/abc.biz 目录中的 .htaccess 文件是否正确写入，因为当您启用 .htaccess 文件以覆盖全局 apache 设置时，错误的 .htaccess 文件会导致此类错误。

# php - 区分导致 mkdir 错误的原因

> ID：11064008
> 
> 赞同：1
> 
> 时间：2012-06-16T13:51:37.540
> 
> 标签：php, permissions, mkdir

PHP 的失败`mkdir`返回`false`。失败可能是：

*   文件夹已存在
*   其他一些错误，也许是权限错误？

有没有办法区分失败是由于一个原因而不是另一个原因？只要文件夹已经存在，我希望我的脚本能够在`mkdir`返回时继续操作`false`，但如果是其他错误则处理它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T13:53:04.573

[`is_dir()`](http://php.net/is_dir)当然，只需使用一次`mkdir()`失败检查目录是否存在。

这将告诉您目录是否存在，但它可能不是决定性的，因为权限也可能会阻止您检查它（我相信父目录需要`+x`权限才能遍历子目录）。

# ruby-on-rails - 我应该为此使用什么 WebSockets 系统？

> ID：11064010
> 
> 赞同：2
> 
> 时间：2012-06-16T13:52:04.953
> 
> 标签：ruby-on-rails, node.js, websocket, socket.io

我正在构建一个需要实时评论系统的 Rails 应用程序。我将使用 WebSockets，但我对它们很陌生，我有点迷路了。我试过`em-websockets`and `websocket-rails`，但都不能很好地完成我必须做的事情。我也有一个 Node.JS 和 Socket.io 应用程序，但我不知道如何开始。

我想要做的是在`create`我的 CommentsController 的操作上对帖子发表新评论时发送 WebSocket 消息。我将发送一条包含评论内容和创建者以及帖子 ID 的消息。

提前致谢！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:02:17.527

对不起，但我不这么认为。小心使用 WebSocket。它是一个基本概念，提供了一个非常强大的机制。

Websockets 非常适合在线游戏等超级、绝对实时的应用程序。对于不需要它们的评论系统（甚至是实时的），AJAX 就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T00:54:08.593

仅仅使用 websockets 作为唯一可用的传输方式并不是一个好主意，因为[websockets 还没有在每个浏览器中都得到支持](http://caniuse.com/websockets)。幸运的是，例如[Faye](http://faye.jcoglan.com/)确实支持多种传输，因此它可以在每个浏览器中工作。过去我还发现了这个有趣的视频，它解释了如何将[Faye 与 RailsCast 的 RoR 结合使用](http://railscasts.com/episodes/260-messaging-with-faye?view=comments)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T13:38:18.670

如果您不想处理自己的实时基础架构、旧浏览器的回退、扩展复杂性等，您可以使用[实时托管服务。](http://www.leggetter.co.uk/real-time-web-technologies-guide#hosted-services)

我最近在 Smashing Mag 上写了一篇关于[构建实时评论系统](http://www.leggetter.co.uk/real-time-web-technologies-guide#hosted-services)的文章。它使用 PHP 和[Pusher](http://pusher.com)（我为之工作），但客户端和服务器之间的分离应该意味着您可以使用任何后端技术/服务。它还演示了如何逐步增强您的应用程序。

正如@Alfred 所建议的，用于实时通信的最常用的自托管 ruby​​ 技术似乎是[Faye 。](http://faye.jcoglan.com/)

# c# - Verifying XMLSignature signed with ECDSA (with SHA256) in C# using BouncyCastle throws InvalidCastException

> ID：11064013
> 
> 赞同：2
> 
> 时间：2012-06-16T13:52:30.633
> 
> 标签：c#, digital-signature, bouncycastle, xml-signature

I have to verify an XmlSignature that was signed using the [http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256](http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256) algorithm. As this algorithm is not supported using the native .NET SignedXml class I've implemented the check using BouncyCastle.

My implementation works as follows:

```
// read certificate
var bytes = Convert.FromBase64String("...");
var cert = new X509CertificateParser().ReadCertificate(bytes);
var ecPublicKeyParameters = (ECPublicKeyParameters)cert.GetPublicKey();

// load signed XmlDocument
var xDoc = new XmlDocument();
xDoc.Load("Response_Success.xml");

// get signature value
var nav = xDoc.CreateNavigator();
nav.MoveToFollowing("SignatureValue", "http://www.w3.org/2000/09/xmldsig#");
var signatureAsString = Regex.Replace(nav.InnerXml.Trim(), @"\s", "");
var signatureValue = Convert.FromBase64String(signatureAsString);

// get and canonicalize signed info
var signedInfo = xDoc.GetElementsByTagName("SignedInfo", "http://www.w3.org/2000/09/xmldsig#")[0];
// move used NS from the document root element to the SignedInfo element
var ns = RetrieveNameSpaces((XmlElement)signedInfo);
InsertNamespacesIntoElement(ns, (XmlElement)signedInfo);

// apply an XmlDsigC14NTransformation
var signedInfoStream = canonicalizeNode(signedInfo);

// hash signed info
var hashAlgorithm = SHA256.Create();
var hashedSignedInfo = hashAlgorithm.ComputeHash(signedInfoStream);

// check signature
var signer = SignerUtilities.GetSigner("ECDSA");
signer.Init(false, ecPublicKeyParameters);
signer.BlockUpdate(hashedSignedInfo, 0, hashedSignedInfo.Length);
var isSignatureValid = signer.VerifySignature(signatureValue); 
```

The error occurs in the very last statment and reads

```
System.InvalidCastException: Unable to cast object of type 'Org.BouncyCastle.Asn1.DerApplicationSpecific' to type 'Org.BouncyCastle.Asn1.Asn1Sequence'. 
```

As the XmlSignature is most probably valid (created by an officially recognized association using a Java application) I'm pretty sure the mistake is in the preceding code block. Can anyone give me a hint how to proceed?

Thanks, Philipp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:22:51.090

你编码对了吗？您可能想查看以下内容： [使用 BouncyCastle 进行数字签名验证 - 带有 SHA 256、C# 的 ECDSA](https://stackoverflow.com/questions/12263641/digital-signature-verification-using-bouncycastle-ecdsa-with-sha-256-c-sharp)

# java - 如何在 Android webview 中禁用水平滚动

> ID：11064014
> 
> 赞同：16
> 
> 时间：2012-06-16T13:52:44.000
> 
> 标签：java, android, webview

我只想在我的 web 视图中进行垂直滚动，并且不想要任何水平滚动。

`webSettings.setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);`

这帮助我解决了滚动问题。

但是使用它使我的 webview 看起来很奇怪。所有编辑文本的高度都被挤压（垂直）并且看起来很糟糕。

*   有没有其他方法可以从客户端禁用水平滚动？

*   使用 SINGLE_COLUMN 我们如何避免 webview 高度变化的问题？我希望垂直外观与没有 SINGLE_COLUMN 的情况相同

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-18T21:07:55.533

这是我仅为 web 视图禁用水平滚动的方法。

```
webView.setHorizontalScrollBarEnabled(false);
webView.setOnTouchListener(new View.OnTouchListener() {
    float m_downX;
    public boolean onTouch(View v, MotionEvent event) {

        if (event.getPointerCount() > 1) {
            //Multi touch detected
            return true;
        }

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN: {
                // save the x
                m_downX = event.getX();
                break;
            }
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_CANCEL:
            case MotionEvent.ACTION_UP: {
                // set x so that it doesn't move
                event.setLocation(m_downX, event.getY());
                break;
            }

        }
        return false;
    }
}); 
```

基本上拦截触摸事件并且不允许x值改变。这允许 webview 垂直滚动而不是水平滚动。如果您想要相反，请为 y 做。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-16T14:06:04.827

这是一个 hack，但过去曾成功地为我工作过。在垂直方向的 ScrollView 中环绕您的 WebView：

```
<ScrollView
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:scrollbars="vertical"    >
  <WebView
    android:id="@+id/mywebview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
</ScrollView> 
```

然后禁用 WebView 中的所有滚动。

要禁用 WebView 的滚动，您可以使用以下代码：

```
 // disable scroll on touch
webview.setOnTouchListener(new View.OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
      return (event.getAction() == MotionEvent.ACTION_MOVE);
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-14T10:05:49.503

我刚试过这个，它就像一个魅力，我不知道它这么简单，只有一行：

```
mWebView.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN); 
```

来源：[http ://sharecoding.wordpress.com/2012/02/16/programmatically-disable-scroll-function-on-android-webview/](http://sharecoding.wordpress.com/2012/02/16/programmatically-disable-scroll-function-on-android-webview/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-31T16:22:12.967

基于@vee answer的解决方案，但更方便：

```
public class WebViewTouchListener implements View.OnTouchListener {
    private float downX;

    @Override
    public boolean onTouch(final View v, final MotionEvent event) {
        if (event.getPointerCount() > 1) {
            //multi touch
            return true;
        }

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                downX = event.getX();
                break;
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_CANCEL:
            case MotionEvent.ACTION_UP:
                // set x so that it doesn't move
                event.setLocation(downX, event.getY());
                break;
        }
        return false;
    }
} 
```

只需将它与 WebView 一起使用：

```
 webView.setHorizontalScrollBarEnabled(false);
 webView.setOnTouchListener(new WebViewTouchListener()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-31T10:41:33.320

[按照vee](https://stackoverflow.com/users/514028/vee)的回答，这是一个仅垂直的 WebView 类。您可以将其用作 xml 中的视图元素，以保持代码更简洁。

```
package com.yourpackage.views;

import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.webkit.WebView;

/**
 * custom {@link WebView} which only scrolls vertically but not horizontally
 */
public class VerticalScrollWebview extends WebView implements View.OnTouchListener {

    // the initial touch points x coordinate
    private float touchDownX;

    public VerticalScrollWebview(Context context) {
        super(context);

        // make vertically scrollable only
        makeVerticalScrollOnly();
    }

    public VerticalScrollWebview(Context context, AttributeSet attrs) {
        super(context, attrs);

        // make vertically scrollable only
        makeVerticalScrollOnly();
    }

    public VerticalScrollWebview(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);

        // make vertically scrollable only
        makeVerticalScrollOnly();
    }

    /**
     * make this {@link WebView} vertically scroll only
     */
    private void makeVerticalScrollOnly() {
        // set onTouchListener for vertical scroll only
        setOnTouchListener(this);

        // hide horizontal scroll bar
        setHorizontalScrollBarEnabled(false);
    }

    @Override
    public boolean onTouch(View view, MotionEvent motionEvent) {

        // multitouch is ignored
        if (motionEvent.getPointerCount() > 1) {
            return true;
        }

        // handle x coordinate on single touch events
        switch (motionEvent.getAction()) {
            // save the x coordinate on touch down
            case MotionEvent.ACTION_DOWN:
                touchDownX = motionEvent.getX();
                break;

            // reset the x coordinate on each other touch action, so it doesn't move
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_CANCEL:
            case MotionEvent.ACTION_UP:
                motionEvent.setLocation(touchDownX, motionEvent.getY());
                break;

        }

        // let the super view handle the update
        return false;

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-06T04:08:46.297

我知道它很晚，但我希望它会帮助某人，请使用下面提到的类来禁用水平滚动。

```
public class CustomWebView extends WebView implements View.OnTouchListener {

    // the initial touch points x coordinate
    private float touchDownX;
    private OnScrollChangedCallback mOnScrollChangedCallback;

    public CustomWebView(final Context context) {
        super(context);

        // make vertically scrollable only
        makeVerticalScrollOnly();
    }

    public CustomWebView(final Context context, final AttributeSet attrs) {
        super(context, attrs);

        // make vertically scrollable only
        makeVerticalScrollOnly();
    }

    public CustomWebView(final Context context, final AttributeSet attrs, final int defStyle) {
        super(context, attrs, defStyle);

        // make vertically scrollable only
        makeVerticalScrollOnly();
    }

    @Override
    protected void onScrollChanged(final int l, final int t, final int oldl, final int oldt) {
        super.onScrollChanged(l, t, oldl, oldt);
        if (mOnScrollChangedCallback != null) mOnScrollChangedCallback.onScroll(l, t);
    }

    public OnScrollChangedCallback getOnScrollChangedCallback() {
        return mOnScrollChangedCallback;
    }

    public void setOnScrollChangedCallback(final OnScrollChangedCallback onScrollChangedCallback) {
        mOnScrollChangedCallback = onScrollChangedCallback;
    }

    /**
     * Impliment in the activity/fragment/view that you want to listen to the webview
     */
    public static interface OnScrollChangedCallback {
        public void onScroll(int l, int t);
    }

    /**
     * make this {@link WebView} vertically scroll only
     */
    private void makeVerticalScrollOnly() {
        // set onTouchListener for vertical scroll only
        setOnTouchListener(this);

        // hide horizontal scroll bar
        setHorizontalScrollBarEnabled(false);
    }

    @Override
    public boolean onTouch(View view, MotionEvent motionEvent) {

        // multitouch is ignored
        if (motionEvent.getPointerCount() > 1) {
            return true;
        }

        // handle x coordinate on single touch events
        switch (motionEvent.getAction()) {
            // save the x coordinate on touch down
            case MotionEvent.ACTION_DOWN:
                touchDownX = motionEvent.getX();
                break;

            // reset the x coordinate on each other touch action, so it doesn't move
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_CANCEL:
            case MotionEvent.ACTION_UP:
                motionEvent.setLocation(touchDownX, motionEvent.getY());
                break;

        }

        // let the super view handle the update
        return false;

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-17T14:43:56.683

```
 webView.setHorizontalScrollBarEnabled(false); 
```

定义是否应绘制水平滚动条。默认情况下不绘制滚动条。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-11-29T12:12:20.403

```
 webSettings.setLayoutAlgorithm(WebSettings.LayoutAlgorithm.TEXT_AUTOSIZING); 
```

[![展示柜](../Images/10f70637ebce81a16dcdcda3efd3f1f0.png)](https://i.stack.imgur.com/uXOYI.png)在安卓 7.1 中

# c++ - 这个名称在 VC++ 2010 非标准的依赖基类中查找吗？

> ID：11064016
> 
> 赞同：0
> 
> 时间：2012-06-16T13:53:01.753
> 
> 标签：c++, templates, base-class, class-members, name-lookup

下面的代码不能在 Ideone 或 Codepad 上编译，产生如下错误：

> 'X' 未在此范围内声明

但在 VC++ 2010 上确实如此：

```
 #include <iostream>
    #include <typeinfo>

    template<typename T>
    struct Base
    {
            typedef T X;
    };

    template<typename T>
    struct Derived
    :
            Base<T>
    {
            static void print()
            {
                    std::cout << typeid(X).name() << "\n";
            }
     };

    int main()
    {
            Derived<int>::print();
            Derived<char>::print();
            Derived<float>::print();
            return 0;
    } 
```

它在哪里打印`int`和。我应该将代码更改为：`char``float`

```
 template<typename T>
    struct Derived
    {
            typedef Base<T> B;
            static void print()
            {
                    std::cout << typeid(typename B::X).name() << "\n";
            }
     }; 
```

为了符合标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:04:45.573

如果您的意思是等效的（请注意，您已在示例中删除了继承）：

```
template<typename T>
struct Derived : Base<T>  {
  static void print() {
    std::cout << typeid(typename Base<T>::X).name() << "\n"; 
  }
}; 
```

那么是的，这是符合标准的代码。但请注意，结果`typeid(some type).name()`取决于实现。在 GCC 上，您的主要产品`i`,`c`和`f`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T14:03:27.513

$ g++ -Wall test.cpp
test.cpp：在静态成员函数'static void Derived::print()'中：
test.cpp:15:37：错误：'X'未在此范围内声明

$ g++ --version
g++ (SUSE Linux) 4.6.2

# objective-c - View with a lot of UIButtons are slowing switch animation between views

> ID：11064018
> 
> 赞同：0
> 
> 时间：2012-06-16T13:53:10.430
> 
> 标签：objective-c, ios

I have UIViewController with many UIButtons (>30). But my animation between previous and next views is slow and with spurts. If I commented all of buttons - animation is going to work correctly. How can I fix this problem? My project use ARC mode (in this I think couldn't be memory leaks)

# java - Problems with casting and short parameters in Java

> ID：11064020
> 
> 赞同：6
> 
> 时间：2012-06-16T13:53:23.657
> 
> 标签：java

I am trying to understand the following code:

```
public class A {
   private void doTask()  {    
      doInt(99);
   }   

   public short doInt(short s)  { 
      return 100;
   }   
} 
```

The code gives a compiler error on line "doInt(99)".

```
The method doInt(short) in the type A is not applicable for the arguments (int) 
```

Can someone explain why it's giving me the error.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T13:57:53.610

In java, the default type of an integer number is an `int`. Java will automatically upcast (eg from `short` to `int`), but will issue a warning with downcasting (eg from `int` to `short`) because of possible loss of data.

The fix for your code is this:

```
doInt((short)99); 
```

This explicit downcast changes the `99` (which is an `int`) to a `short`, so there's no (further) possible loss of data.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T13:57:35.303

Try

```
public class A {
   private void doTask()  {    
      doInt((short)99);
   }   

   public short doInt(short s)  { 
      return (short)100;
   }   
} 
```

Java thinks that all literals (such as 99 or 100) in your program is int.

If you pass big number, 12345678 for example, it will be cutted to fit to `short` value. Java cannot cut number without you, so you must do it yourself. That way you see that you casting int to short

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T13:58:10.883

You need to cast 99 to a short. Please try the following

```
public class A {
   private void doTask()  {    
      doInt((short) 99);
   }   

   public short doInt(short s)  { 
      return 100;
   }   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T14:00:24.330

> int data type is generally the default choice unless there is a reason.

And hence `99` is treated as an `int`.

Read more details on [Primitive Data Types](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

You need explicit casting when required.
Change `doInt( 99 )` to `doInt( ( short ) 99 )` and it should be working.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T14:00:51.053

The main cause of error is

**You cannot implicitly convert nonliteral numeric types of larger storage size to short**

So change your code to following.

```
public class A {
   private void doTask()  {    
      doInt((short)99);
   }   

   public short doInt(short s)  { 
      return (short)100;
   }   
} 
```

# javascript - 如何在使用 JavaScript 输入后强制执行函数

> ID：11064023
> 
> 赞同：1
> 
> 时间：2012-06-16T13:54:39.633
> 
> 标签：javascript, jquery

我正在制作一个小型计算器（仅用于 JavaScript 学习），并且我有两个用于分数计算的输入字段：

1.  领域：分子
2.  字段：分母

`myFraction(numerator,denominator)`还有一个“计算分数”按钮，当用户点击它时它会执行该功能。

没有按钮可以做同样的事情吗？我的意思是 JavaScript 应该识别出有人正在输入，然后自动计算分数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T14:03:55.483

您可以挂钩 onkeyup 或 onkeydown 事件处理程序并调用您的函数：

```
<input type="text" id="numerator" onkeyup="myFraction()" />
<input type="text" id="denominator" onkeyup="myFraction()" /> 
```

您需要在 myFraction() 函数中获取文本框的值，并在将分数值输出到屏幕之前检查它们是否为空白。

```
function myFraction() {
    if(document.getElementById("numerator").value != "" &&
       document.getElementById("denominator").value != "") {
        ...do calculations
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:58:12.650

当然，我认为您需要`onChange()`（当正在编辑文本时）或`onBlur()`（当文本框失去焦点时）。看看[这里的区别](https://stackoverflow.com/questions/785099/what-is-the-difference-between-onblur-and-onchange-atrribute-in-html)。

由于您正在学习，[jQuery](http://jquery.com/)可以帮助您解决一些细微差别 - 包括这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:58:13.420

Javascript 是事件驱动的，所以是的，您可以在他们使用 keyup 键入或用户离开文本框控件时捕获事件。

您可以在他们离开后检查文本框的长度，验证他们输入的内容，然后运行计算。

我通常在用户离开文本框后使用模糊来捕捉。我通常使用 Onchange 进行选择。

# powershell - rdesktop shell escaping issue

> ID：11064033
> 
> 赞同：1
> 
> 时间：2012-06-16T13:56:25.647
> 
> 标签：powershell, escaping, remote-desktop

I'm trying to send this:

```
Get-WmiObject Win32_PNPEntity |Where{$_.DeviceID.StartsWith("PCI\VEN_10DE") -or $_.DeviceID.StartsWith("PCI\VEN_1002")} 
```

over rdesktop like:

```
rdesktop -a8 209.** -u ** -p ** -s "cmd.exe /K powershell.exe Get-WmiObject Win32_PNPEntity |Where{\$_.DeviceID.StartsWith("PCI\VEN_10DE") -or $_.DeviceID.StartsWith("PCI\VEN_1002")}" 
```

But windows' shell says:

```
'Where{$_.DeviceID.StartsWith' is not recognized as an internal or externa.... 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:43:11.803

嗨，我需要做一次这样的事情，所以我编写了一些代码，可以将任何 ps 代码发送到远程计算并在你的 pc 上的 ps 窗口中显示结果。

只要记住在两台电脑上启用 powershell 远程处理。

```
function remote-pscode ($ServerName,$UserName,$password,$PSCode)
{

$global:RemoteCode = $args[0]

Write-Host $RemoteCode
$conprops = (Get-Host).UI.RawUI
$buffsize = $conprops.BufferSize
$buffsize.Height = 800
$conprops.BufferSize= $buffsize

# Set the user name you would like to use for the connection
$global:RemoteUserName = $UserName
$global:RemoteServerName = $ServerName

# Set the password you would like to use for the connection
# Check to see if you have a file on you drive c:\cred.txt with a password to use in it,if you don't it will create one
# for you and ask you for the password you would like to use 

$global:RemotePassword = convertto-securestring $password -AsPlainText -Force
$global:credentials = new-object -typename System.Management.Automation.PSCredential -argumentlist $RemoteUserName,$RemotePassword

#Create a connection to the remote computer , put a list of IPAddresses or Computer Names.
$global:session = new-PSSession -ComputerName $RemoteServerName -Credential $credentials

$ScriptBlock = $executioncontext.invokecommand.NewScriptBlock($RemoteCode)

invoke-command -Session $session -ScriptBlock $ScriptBlock

#Close the sessions that where created     
$global:closesession = Get-PSSession
Remove-PSSession -Session $closesession

}

remote-pscode -ServerName "NameOfRemotePC" -UserName "UserName" -password "password"  -PSCode "any powershell code you want to send to the remote pc" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:36:39.410

为什么不使用 powershell wmi 远程处理？

```
$cred = get-credential
Get-WmiObject Win32_PNPEntity -computerName MyRemoteComputerName - credential $cred |Where{$_.DeviceID.StartsWith("PCI\VEN_10DE") -or $_.DeviceID.StartsWith("PCI\VEN_1002")} 
```

`-credential`仅当运行 powershell 的实际用户不是远程计算机的管理员时才需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T14:10:35.147

这里有几件事：将您的 PS 命令放在[脚本块](http://www.bjd145.org/2008/02/one-of-interesting-features-that-is-i.html)（或脚本）中。另外，你为什么不简单地使用[wmic.exe](http://ss64.com/nt/wmic.html)？

# c# - 如何在预构建操作的解决方案中运行所有 mstest

> ID：11064050
> 
> 赞同：1
> 
> 时间：2012-06-16T13:58:32.643
> 
> 标签：c#, mstest

我有解决方案，我有一些测试。我想在预构建操作上运行所有测试，如果任何测试失败，构建将显示错误并且不会启动项目。

我正在使用 VS2010 和 MS TEST。

知道怎么做吗？谢谢

你能发布命令的例子吗？谢谢

*我的测试在名为 uploadTests.vsmdi 的测试列表中*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:20:21.737

您可以[在此处](http://msdn.microsoft.com/en-us/library/ms182489%28v=vs.80%29.aspx)查看命令行语句以运行 mstest。我想它应该是一个 Postbuild 事件而不是一个 prebuild，因为您的测试可能需要编译的当前项目才能运行。实际上，如果是这种情况，我也不知道您是否可以通过后期构建来做到这一点。

你为什么要这个？听起来有这个约束会有点烦人。

如果您希望在修改代码时连续运行测试，我建议您尝试[ncrun 。](http://www.ncrunch.net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:35:05.843

> 我的测试在名为 uploadTests.vsmdi 的测试列表中

这不是你的测试清单。它是元数据文件，您可以在其中创建测试列表。如果您还没有创建列表，请双击此文件将其打开，[创建](http://msdn.microsoft.com/en-us/library/ms182462.aspx)测试列表并将您想要的测试添加到此列表中。然后运行以下命令：

```
[MStestPath]\MStest /testmetadata:[SolutionPath]\uploadTests.vsmdi /testlist:TestList 
```

*   [定义测试列表以对测试进行分组](http://msdn.microsoft.com/en-us/library/dd286584)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T11:48:49.890

我已经将我的 tfs 服务器设置为运行持续集成，这给了我我需要的东西

# php - mod_rewrite 麻烦

> ID：11064053
> 
> 赞同：0
> 
> 时间：2012-06-16T13:58:58.287
> 
> 标签：php, html, mod-rewrite, url-rewriting

所以我使用了一个简单的重写规则，比如：

```
RewriteEngine On
RewriteRule    ^foo/?$    foo.php    [NC,L] 
```

它完美地重定向到 foo.php，但似乎 foo.php 中的所有链接和图像都是从服务器上不存在的文件夹 foo 中获取的。例如，1.png 现在是 foo/1.png 或 index.html 现在是 foo/index.html。所以我的问题是：有没有办法在不改变 foo.php 中文件的路径的情况下让事情变得正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:42:56.047

您的访问者的浏览器将当前页面视为位于`/foo/`，因此所有相关 URL 都将在 下解析`/foo/`。您将需要设置[基本 URL](http://www.w3.org/TR/html-markup/base.html)，或更新所有相对 URL 以指向您的站点根目录（例如，不要使用`relative/path/url.jpg`but `/relative/path/url.jpg`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:26:54.253

在您的代码中，您应该为您的资源（图像、css 等）提供重写规则，或者为真实文件/文件夹添加条件，例如...

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f 
```

两行 RewriteCond 测试请求的 URL 是否指向实际的真实目录（!-d 部分），第二行测试它是否是真实文件 (!-f)

将来，您可以通过将这两行添加到 .htaccess 文件中来轻松调试您的 mod_rewrite 内容：

```
RewriteLogLevel 3
RewriteLog "/path/to/a/file.log" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T23:00:07.663

2个简单的方法

1.  按照 Ianzz 的建议绝对化引用
2.  删除仍在使用 htaccess 的引用对象的 foo 路径

    重写规则 ^foo(/.*.(jpg|html|gif|css))$ $1 [L]

我更喜欢第二种解决方案，因为 htaccess 搞砸了，而 htaccess 解决了这种情况，并且不需要更改您的代码。

# perforce - 需要 labelsync 帮助

> ID：11064055
> 
> 赞同：0
> 
> 时间：2012-06-16T13:59:07.787
> 
> 标签：perforce, sync, flush

labelsync 是否真的从仓库同步文件？还是只需要一个文件名？如果它确实同步，那么是否有任何替代命令，如 flush ， wud 的工作类似于 labelsync 但更快（即不同步文件）？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:34:27.627

Labelsync 修改与标签关联的文件集，它不会从软件仓库同步文件。它与同步完全不同。有一个刷新命令：[http](http://www.perforce.com/perforce/doc.current/manuals/cmdref/flush.html#1040665) : //www.perforce.com/perforce/doc.current/manuals/cmdref/flush.html#1040665 刷新类似于同步，但它实际上并不传输文件。

我不知道您要运行哪种命令，因为 flush 和 labelsync 用于两个非常不同的目的，并且都运行得非常快。

也许您正在寻找：[http ://www.perforce.com/perforce/doc.current/manuals/intro/01_intro.html#1067317](http://www.perforce.com/perforce/doc.current/manuals/intro/01_intro.html#1067317)

# qt - How to communicate multi-form in Qt

> ID：11064060
> 
> 赞同：0
> 
> 时间：2012-06-16T13:59:23.960
> 
> 标签：qt, serial-port

I have a project on serial communications using Qt. This is very easy because I use `QSerialDevice`. The problem is making multiple forms to be accessed by `QSerialDevice`.

For example I have 2 forms, `form1` and `form2`. I try to send data over the last hyperterminal to be displayed in `form1` (done), but it cannot be displayed in `form2`. Not only that, but I want to be able to do `port->write` through `form2`.

My question is: can we use `QSerialDevice2.0` with multiple .cpp files and multiple forms?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:59:35.863

而不是 QSerialDevice 使用更好的 QtSerialPort [http://qt-project.org/wiki/QtSerialPort](http://qt-project.org/wiki/QtSerialPort)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:40:07.263

据我所知，您想要做的是有 2 种不同的 UI 表单，可用于将数据发送到串行端口。我目前正在为一个项目解决一个几乎相同的问题，而我为我工作的是使用[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)风格的架构来解决这个问题。

有一个控制器，它知道显示哪种形式并可以访问 QSerialDevice。然后表单可以发出一个`void write(QByteArray)`信号，该信号将连接到控制器上负责写入端口的插槽。

```
class Form1 : QWidget {
public:
  Form1();
  ~Form1();
  //some form1 stuff.
signals:
  void writeToPort(QByteArray);
}
class Form2 : QWidget {
public:
  Form2();
  ~Form2();
  //Do some form2 stuff
signals:
  void writeToPort(QByteArray);
}

class Controller : QObject {
 public:
   Controller();
   ~Controller();
 public slots:
   void writeRequested(QByteArray data);
 private:
   Form1* view;
   Form2* otherView;
   QSerialDevice* port;
 }

 Controller::Controller()
 {
    view = new Form1();
    connect(view, SIGNAL(writeToPort(QByteArray)),this,SLOT(writeRequested(QByteArray data)));
    otherView = new Form2();
    connect(otherView, SIGNAL(writeToPort(QByteArray)),this,SLOT(writeRequested(QByteArray data)));
    port = new QSerialDevice();
    port->open();
 }

Controller::writeRequested(QByteArray data)
{
   if (port && port->isOpen())
   {
      port->write(data);
   }
} 
```

可以有其他方法来处理控制器中表单之间的连接和切换。通过使用信号和插槽，类之间的耦合将减少，您不必担心串行端口代码会堵塞您的 UI。

# objective-c - how to omit \r\n after encoding string in base64encoding format?

> ID：11064062
> 
> 赞同：4
> 
> 时间：2012-06-16T14:00:11.977
> 
> 标签：objective-c, ios5, base64, nsstringencoding

I have a issue in omitting \r\n after encoding the string, below is the encoded string which I have got,

```
QzAxODBCMDQtNDdDMi00QzhDLTg1MTAtNUE1MzU1RDIzRDA4Ojk4Mzg5MzRkYzky\r\nNTRkYWE4ODljY2Q0ZGYxNjljYTU 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T18:06:53.823

您可以像这样轻松地`\r\n`从字符串中删除 ：

```
NSString *outString = [inString stringByReplacingOccurrencesOfString:@"\r\n" withString:@""]; 
```

如果您想在没有`\r\n`首先创建字符串的情况下创建字符串，那么这取决于您如何创建它们。例如，如果您使用[Cocoa with Love](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)`BIO_write`中的 Base64 类别，则需要在调用in之前添加此行`base64EncodedString`：

```
BIO_set_flags(context, BIO_FLAGS_BASE64_NO_NL); 
```

他在文章中解释了这一点。

# ruby-on-rails - 实例方法中的访问 id 活动记录

> ID：11064063
> 
> 赞同：0
> 
> 时间：2012-06-16T14:00:12.187
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我在访问 ActiveRecord 模型的 ID 属性时遇到了一些问题。我想写一个类似的方法：

```
class Category < ActiveRecord::Base
  def has_articles?
    return true if !Article.find_by_category_id(id).empty?

    return false
  end
end 
```

但我无法访问实例的 ID。当我添加`attr_accessor :id`到课程中时，我有很多测试失败，说他们无法访问`category.id`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T14:18:26.263

你应该这样写：

```
class Category < ActiveRecord::Base
  has_many :articles

  def has_articles?
    articles.present? # or !articles.empty? or articles.count > 0 or articles.any?
  end
end 
```

# c# - 无法从 android 使用 WCF 方法

> ID：11064066
> 
> 赞同：1
> 
> 时间：2012-06-16T14:00:30.430
> 
> 标签：c#, android, wcf

这是我第一次使用 WCF 和 Android。所以，抱歉这个问题可能很简单：）
这是来自 wcf 服务库：

```
[ServiceBehavior]
    public class CheckInService : ICheckInService
    {
        public string Hello()
        {
            return "Message from WCF!";
        }
    }
    [ServiceContract]
    public interface ICheckInService
    {
        [OperationContract]
        [WebInvoke(
            Method = "POST",
            UriTemplate = "Hello",
            BodyStyle = WebMessageBodyStyle.WrappedRequest,
            ResponseFormat = WebMessageFormat.Json,
            RequestFormat = WebMessageFormat.Json)]
        string Hello();
    } 
```

这是来自 wcf 服务网站 Service.svc

```
<%@ ServiceHost Language="C#" Debug="true" Service="TYT.Service.CheckInService"  %> 
```

这是来自 wcf 服务库项目的 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="TYT.Service.CheckInService">
        <endpoint address="publicService" binding="basicHttpBinding" contract="TYT.Service.ICheckInService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/TYT.Service/Service1/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

这是来自 wcf 服务网站的网络配置：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="false" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="TYT.Service.CheckInService">
        <endpoint address="basic" binding="basicHttpBinding" bindingConfiguration=""
          contract="TYT.Service.ICheckInService" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

安卓代码

```
private final static String SERVICE_URI = "http://10.0.2.2/tytservice/Service.svc";    
try {

            // Send GET request to <service>/GetPlates
            HttpGet request = new HttpGet(SERVICE_URI + "/Hello");
            request.setHeader("Accept", "application/json");
            request.setHeader("Content-type", "application/json");

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpResponse response = httpClient.execute(request);

            HttpEntity responseEntity = response.getEntity();

            // Read response data into buffer
            char[] buffer = new char[(int)responseEntity.getContentLength()];
            InputStream stream = responseEntity.getContent();
            InputStreamReader reader = new InputStreamReader(stream);
            reader.read(buffer);
            stream.close();

            String data = new String(buffer); 
```

但在数据字符串中，我得到的只是带有以下错误的整个 HTML 文档：

```
<span><H1>Server Error in '/tytservice' Application.<hr width=100% size=1 color=silver></H1>

            <h2> <i>The resource cannot be found.</i> </h2></span>

            <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

            <b> Description: </b>HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable. &nbsp;Please review the following URL and make sure that it is spelled correctly.
            <br><br>

            <b> Requested URL: </b>/tytservice/Service.svc/Hello<br><br>
...
</html>
<!-- 
[EndpointNotFoundException]: There was no channel actively listening at &#39;http://vlada-nb/tytservice/Service.svc/Hello&#39;. This is often caused by an incorrect address URI. Ensure that the address to which the message is sent matches an address on which a service is listening.
   at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
[HttpException]: There was no channel actively listening at &#39;http://vlada-nb/tytservice/Service.svc/Hello&#39;. This is often caused by an incorrect address URI. Ensure that the address to which the message is sent matches an address on which a service is listening.
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result)
   at System.Web.HttpApplication.AsyncEventExecutionStep.OnAsyncEventCompletion(IAsyncResult ar)
--> 
```

当我在浏览器中导航到`http://localhost/tytservice/Service.svc`我得到服务描述但如果我添加`http://localhost/tytservice/Service.svc/Hello`我再次得到 404。
它接缝这个方法没有公开但我不知道我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:06:16.350

问题在这里：

```
WebInvoke(
    Method = "POST", 
```

您使用 HTTP GET 调用该方法，而不是 POST：

```
HttpGet request = new HttpGet(SERVICE_URI + "/Hello");
request.setHeader("Accept", "application/json");
// ... 
```

您可以通过将方法更改为`Method = "GET"`或使用 an[`HttpPost`](http://developer.android.com/reference/org/apache/http/client/methods/HttpPost.html)来调用它来解决此问题。

另请查看此相关问题：

*   [WebInvoke Method=“POST” or "GET" for a REST Service on WCF](https://stackoverflow.com/questions/4197956/webinvoke-method-post-or-get-for-a-rest-service-on-wcf)

# asp.net-mvc-3 - Interface as controller method parameter in ASP.NET MVC

> ID：11064067
> 
> 赞同：0
> 
> 时间：2012-06-16T14:00:30.893
> 
> 标签：asp.net-mvc-3

I have a controller method that accepts a couple of input parameters (string, int, etc.). Because I don't want to declare each parameter in this method I created a class with properties that map to this parameters and now the only parameter to this method is an instance of this class. When the method is called, the object's properties are populated with the values of arguments according to their names.

Now I want to unit test this method; so I want to send a mock of this class to the method. At first I created a mock of the class and send it to the method; it worked fine except that I had to mark all properties that I want to set inside mock with the virtual keyword so mock framework can access it.
Because of that I thought that I could create an interface that this class implements, but it is not possible to send the interface as an argument to the controller method.

Is it somehow possible to manually bind input parameters to the properties of the object? For example, to inject interface via controller's constructor and then trigger some manual bind of the input values to the properties?

I am using ASP.NET MVC 3.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:53:01.457

如果我理解它，您正在尝试测试控制器并需要使用模型类的模拟。

我的第一个想法是，为什么不能只使用模型类的实际实例？

大概您的模型类具有要隔离的依赖项或副作用...

在这种情况下，也许模型类做得太多了？

# c - Looking for a free and light HTML parsing

> ID：11064072
> 
> 赞同：-1
> 
> 时间：2012-06-16T14:01:36.810
> 
> 标签：c, html-parsing

I need to get some values of HTML web page. I want only the value of `value` of `input` tag filtered by name or id or class(if supports XPath is welcome too). It's very simple thing, for this reason I'm looking for a "non-complex" parser, because I want no tons of code in my program(I'd used one like this) it must be free, light and fast.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:11:53.023

您可以使用 libxml2。尽管它的名字它包含一个 HTML 解析器[HTML Parser 模块 - libxml2](http://xmlsoft.org/html/libxml-HTMLparser.html)。
我使用了 python 绑定，它很快并且支持 XPath。

# python - assigning two variables to one list slice

> ID：11064075
> 
> 赞同：7
> 
> 时间：2012-06-16T14:02:01.890
> 
> 标签：python, list, pattern-matching, slice

Is it possible to assign to a list slice in one go, that would achieve the following as:

```
mylist = [1,2,3,4,5,6,7]

xs = mylist[:-1]
x  = mylist[-1]

xs == [1,2,3,4,5,6]
x  == 7 
```

I know I can write it like this:

```
xs,x = mylist[:-1], mylist[-1] 
```

but I was wondering if it is possible to this any other way. Or have been spoilt by Haskell's pattern matching.

something like `x,xs = mylist[:funky:slice:method:]`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T14:05:47.777

你可以在 Python 3 中：

```
>>> *xs, x = [1, 2, 3, 4, 5, 6, 7]
>>> xs
[1, 2, 3, 4, 5, 6]
>>> x
7 
```

# javascript - Why am I getting errors on incorrect lines in Eclipse? What can I do about it?

> ID：11064079
> 
> 赞同：3
> 
> 时间：2012-06-16T14:02:40.283
> 
> 标签：javascript, eclipse

My script ~~works~~ seemed to be working perfectly well, but Eclipse 3.7.2 was telling me I had multiple errors on a random set of empty lines:

![Screenshot of Eclipse's spurious error markers](../Images/72deef0c31cd8caae2af7a8a13c34a65.png)

When I deleted the lines, all the errors bunched up into one lump, like this:

![All the errors bunched into one line](../Images/b3241a050586c4043a8e2a0369de6702.png)

Here's the list it was giving me:

![enter image description here](../Images/df26b822d5edad18c8d940b0b869339c.png)

* * *

## EDIT

It turns out I did have an error in my code - I was using `=` to check for equality in an if statement. When I corrected this, ALL of the errors disappeared.

Why did that mistake cause the effects above?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:06:32.870

这似乎是日食不同步。我会做一个清洁和/或刷新。在 Eclipse 中，有时事情会被缓存。有时我必须使用 -clean 选项重新启动 eclipse，然后一切都会清除。

由于脚本正在运行，这就是我首先要尝试的。

同样，我知道 Eclipse 中有一些设置可以更改为错误，但我不相信任何设置更改都会在空白行显示或隐藏错误。至少我知道。

我假设您在编写脚本时最初没有错误，但是在该过程中的某个时间点或当您完成并保存它时，错误出现了，对吗？您是否尝试过完全重启？

看起来 eclipse 正在缓存文件的旧版本。要找出答案并停止猜测，请使用带有 firebug 的 Firefox。

脚步：

1.  转到 net 选项卡并确保脚本已加载，
2.  然后查看脚本选项卡中的代码（一定要选择你的），以确保它是你在 Eclipse 中看到的。如果加载的代码与您的代码相同，那么您仍然有问题并转到 3。否则，您知道问题是它没有正确加载脚本。
3.  向我们展示脚本代码。
4.  查看控制台，如果脚本中有 javascript 错误，它会显示在那里。

我不止一次遇到过这种情况，以为脚本是在它的旧版本并且没有加载最新版本时加载的。我也有 eclipse 缓存旧版本的服务器端代码，而不是刷新更改。

以下是调试期间firebug选项卡的一些屏幕截图：

[Firebug Net 选项卡加载脚本示例](http://i45.tinypic.com/344fn9x.jpg)

[带有简单错误示例的 Firebug 控制台选项卡](http://i48.tinypic.com/14d10r8.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:37:55.747

在 Eclipse 中，导致错误的是验证。如果你去 Project->Properties->Javascript

除了 ECMAScript 合规性检查之外，它还会警告您其他事情。您可以在子菜单 Validation 下看到一个名为 Errors/Warnings 的选项，该选项具有一些默认设置。要查看它们，请选中启用项目特定设置并切换潜在的编程问题。

# javascript - Javascript, Change google map marker color

> ID：11064081
> 
> 赞同：75
> 
> 时间：2012-06-16T14:02:58.317
> 
> 标签：javascript, google-maps, google-maps-markers

May I know a way to change the Google Map marker color via Javascript.. I am new at this and any help would be much appreciated, Thank you.

I used the following code to create a marker

```
 marker = new google.maps.Marker({
     position: new google.maps.LatLng(locations[i][1], 
     locations[i][2]),
     animation: google.maps.Animation.DROP,
     map: map
 }); 
```

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-06-16T14:06:05.537

在 Google Maps API v3 中，您可以尝试更改标记图标。例如对于绿色图标使用：

```
marker.setIcon('http://maps.google.com/mapfiles/ms/icons/green-dot.png') 
```

或作为标记初始化的一部分：

```
marker = new google.maps.Marker({
    icon: 'http://...'
}); 
```

其他颜色：

*   [http://maps.google.com/mapfiles/ms/icons/blue-dot.png](http://maps.google.com/mapfiles/ms/icons/blue-dot.png)
*   [http://maps.google.com/mapfiles/ms/icons/red-dot.png](http://maps.google.com/mapfiles/ms/icons/red-dot.png)

等等。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-23T17:14:26.953

您可以使用该`strokeColor`属性：

```
var marker = new google.maps.Marker({
    id: "some-id",
    icon: {
        path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
        strokeColor: "red",
        scale: 3
    },
    map: map,
    title: "some-title",
    position: myLatlng
}); 
```

有关其他可能性，请参阅[此页面](https://developers.google.com/maps/documentation/javascript/overlays#Symbols)。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-11-19T09:54:19.453

您可以使用此代码，它工作正常。

```
 var pinImage = new google.maps.MarkerImage("http://www.googlemapsmarkers.com/v1/009900/");

 var marker = new google.maps.Marker({
            position: yourlatlong,
            icon: pinImage,
            map: map
        }); 
```

[看这里的例子](http://www.googlemapsmarkers.com/)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-02-10T04:47:06.753

您可以使用 google chart api 并使用 rgb 代码即时生成任何颜色：

示例：带有#ddd 颜色的标记：

```
http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|ddd 
```

包括如上所述

```
 var marker = new google.maps.Marker({
    position: marker,
    title: 'Hello World',
    icon: 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|ddd'
}); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-04-01T20:42:42.490

我真的很喜欢 Bahadır Yağan 给出的答案，除了我不喜欢依靠谷歌提供的一组有限的图标或外部 API 来生成我的标记图标。这是最初的解决方案：

> ```
> var marker = new google.maps.Marker({
>     id: "some-id",
>     icon: {
>         path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
>         strokeColor: "red",
>         scale: 3
>     },
>     map: map,
>     title: "some-title",
>     position: myLatlng
> }); 
> ```

这是我改进的解决方案：

```
var marker = new google.maps.Marker({
            position: myLatlng,
            icon:{
                path: 'm 12,2.4000002 c -2.7802903,0 -5.9650002,1.5099999 -5.9650002,5.8299998 0,1.74375 1.1549213,3.264465 2.3551945,4.025812 1.2002732,0.761348 2.4458987,0.763328 2.6273057,2.474813 L 12,24 12.9825,14.68 c 0.179732,-1.704939 1.425357,-1.665423 2.626049,-2.424188 C 16.809241,11.497047 17.965,9.94 17.965,8.23 17.965,3.9100001 14.78029,2.4000002 12,2.4000002 Z',
                fillColor: '#00FF00',
                fillOpacity: 1.0,
                strokeColor: '#000000',
                strokeWeight: 1,
                scale: 2,
                anchor: new google.maps.Point(12, 24),
            },
        }); 
```

我想要一个特定的图钉图标，所以我用inkscape制作了一个，然后打开SVG文件并将svg路径复制到代码中的路径中，但这适用于您放入“路径”属性中的任何SVG路径图标对象。

结果如下：

[![在此处输入图像描述](../Images/d0921a03a2cece740a8559cbe7fbe34f.png)](https://i.stack.imgur.com/8JOZg.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-15T20:37:09.523

我在一张地图上设置了 4 艘船，所以我使用了 Google Developers 示例，然后对其进行了扭曲

[https://developers.google.com/maps/documentation/javascript/examples/icon-complex](https://developers.google.com/maps/documentation/javascript/examples/icon-complex)

在下面的函数中，我设置了另外 3 个颜色选项：

```
function setMarkers(map, locations) {
...
var image = {
    url: 'img/bullet_amarelo.png',
    // This marker is 20 pixels wide by 32 pixels tall.
    size: new google.maps.Size(40, 40),
    // The origin for this image is 0,0.
    origin: new google.maps.Point(0,0),
    // The anchor for this image is the base of the flagpole at 0,32.
    anchor: new google.maps.Point(0, 40)
  };
  var image1 = {
            url: 'img/bullet_azul.png',
            // This marker is 20 pixels wide by 32 pixels tall.
            size: new google.maps.Size(40, 40),
            // The origin for this image is 0,0.
            origin: new google.maps.Point(0,0),
            // The anchor for this image is the base of the flagpole at 0,32.
            anchor: new google.maps.Point(0, 40)
          };
  var image2 = {
          url: 'img/bullet_vermelho.png',
          // This marker is 20 pixels wide by 32 pixels tall.
          size: new google.maps.Size(40, 40),
          // The origin for this image is 0,0.
          origin: new google.maps.Point(0,0),
          // The anchor for this image is the base of the flagpole at 0,32.
          anchor: new google.maps.Point(0, 40)
        };
  var image3 = {
          url: 'img/bullet_verde.png',
          // This marker is 20 pixels wide by 32 pixels tall.
          size: new google.maps.Size(40, 40),
          // The origin for this image is 0,0.
          origin: new google.maps.Point(0,0),
          // The anchor for this image is the base of the flagpole at 0,32.
          anchor: new google.maps.Point(0, 40)
        };
...
} 
```

在 FOR bellow 中，我为每艘船设置了一种颜色：

```
for (var i = 0; i < locations.length; i++) {
...
    if (i==0) var imageV=image;
    if (i==1) var imageV=image1;
    if (i==2) var imageV=image2;
    if (i==3) var imageV=image3;
...
# remember to change icon: image to icon: imageV
} 
```

最终结果：

[http://www.mercosul-line.com.br/site/teste.html](http://www.mercosul-line.com.br/site/teste.html)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-10T17:11:19.217

我建议使用[Google Charts API](https://developers.google.com/chart/)，因为您可以指定文本、文本颜色、填充颜色和轮廓颜色，所有这些都使用十六进制颜色代码，例如 #FF0000 表示红色。你可以这样称呼它：

```
function getIcon(text, fillColor, textColor, outlineColor) {
  if (!text) text = '•'; //generic map dot
  var iconUrl = "http://chart.googleapis.com/chart?cht=d&chdp=mapsapi&chl=pin%27i\\%27[" + text + "%27-2%27f\\hv%27a\\]h\\]o\\" + fillColor + "%27fC\\" + textColor + "%27tC\\" + outlineColor + "%27eC\\Lauto%27f\\&ext=.png";
  return iconUrl;
} 
```

然后，当您创建标记时，您只需设置图标属性，其中 myColor 变量是十六进制值（减去井号）：

```
var marker = new google.maps.Marker({
  position: new google.maps.LatLng(locations[i][1], locations[i][2]),
  animation: google.maps.Animation.DROP,
  map: map,
  icon: getIcon(null, myColor, myColor2, myColor3)
}); 
```

如果您只需要设置文本和填充颜色，您可以使用`http://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=•|FF0000`更容易破译的 ，作为备用 URL。

khurram 的回答是指重定向到 Google Charts API 的第 3 方网站。这意味着如果那个人关闭了他们的服务器，你就会被淹没。我更喜欢 Google API 提供的灵活性以及直接访问 Google 的可靠性。只需确保为每种颜色指定一个值，否则它将不起作用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-31T21:17:39.313

要扩展已接受的答案，您可以`MarkerImages`使用 API 创建任何颜色的自定义`http://chart.googleapis.com`

除了更改颜色之外，这还会更改标记形状，这可能是不需要的。

```
const marker = new window.google.maps.Marker(
        position: markerPosition,
        title: markerTitle,
        map: map)
marker.addListener('click', () => marker.setIcon(changeIcon('00ff00'));)

const changeIcon = (newIconColor) => {
    const newIcon = new window.google.maps.MarkerImage(
        `http://chart.googleapis.com/chart?                                      
        chst=d_map_spin&chld=1.0|0|${newIconColor}|60|_|%E2%80%A2`,
        new window.google.maps.Size(21, 34),
        new window.google.maps.Point(0, 0),
        new window.google.maps.Point(10, 34),
        new window.google.maps.Size(21,34)
    );
    return newIcon
} 
```

资料来源：[google maps apis 上的免费 udacity 课程](https://eu.udacity.com/course/google-maps-apis--ud864)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-11-01T08:41:06.200

var map_marker = $(".map-marker").children("img").attr("src") var pinImage = new google.maps.MarkerImage(map_marker);

```
 var marker = new google.maps.Marker({
      position: uluru,
      map: map,
      icon: pinImage
    });
  } 
```

# c - Optimal endianness conversions and signed integers

> ID：11064082
> 
> 赞同：0
> 
> 时间：2012-06-16T14:03:05.000
> 
> 标签：c, type-conversion, endianness

I am looking for the fastest way to read numerical values stored in binary files.

I have done some functions that seem to work, but I'd like to get a feedback on whether or not my implementation is good.

Here is how I get a signed integer from a 4-bytes little endian block:

```
signed long int from4li(char const * const buffer)
{
    signed long int value = 0;

    value += (unsigned char) buffer[3];
    value <<= 8;
    value += (unsigned char) buffer[2];
    value <<= 8;
    value += (unsigned char) buffer[1];
    value <<= 8;
    value += (unsigned char) buffer[0];

    return value;
} 
```

This would also work for unsigned integers, but I've originally made a different implementation for unsigned integers (that fails with signed integers, I don't know exactly why):

```
unsigned long int fromu4li(char const * const buffer)
{
    unsigned long int value = 0;

    value += (unsigned char) buffer[0] << 8 * 0;
    value += (unsigned char) buffer[1] << 8 * 1;
    value += (unsigned char) buffer[2] << 8 * 2;
    value += (unsigned char) buffer[3] << 8 * 3;

    return value;
} 
```

I am more sure about the conversion from an integer to a little endian string buffer, which I think probably couldn't be optimized further:

```
void to4li(long int const value, char * const buffer)
{
    buffer[0] = value >> 8 * 0;
    buffer[1] = value >> 8 * 1;
    buffer[2] = value >> 8 * 2;
    buffer[3] = value >> 8 * 3;
} 
```

I also think that it could be even faster usign memcpy, but to use memcpy I have to know the endianness of the host system.

I don't really want to rely on the endianness of the host system, as I think that my code should be independent of the internal data representation of the host system.

So, is this a proper way of doing those conversions, or can I improve my functions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:04:10.547

使用按位 OR 似乎是个好主意，但有一些奇怪的地方：

经过测试，似乎`c0`, `c1`, `c2`,`c3`需要是无符号字符才能使此解决方案起作用。同样，我不知道为什么：

以 0x8080 为例，它是 -3264（有符号）或 32896（无符号）。

使用

```
char c0 = 0x80;
char c1 = 0x80; 
```

我得到：

```
uint16_t res = (c0 << 0) | (c1 << 8);
// res = 65408 ??? 
```

但

```
uint16_t res = ((unsigned char) c0 << 0) | ((unsigned char) c1 << 8);
// res = 32896 ok 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:10:19.127

一种更简单的方法，一种避免由于对有符号整数变量进行位移而导致的未定义行为的方法，就是按位复制数据：

```
int32_t get(char const * const buf)
{
    int32_t result;
    char * const p = reinterpret_cast<char *>(&result);
    std::copy(buf, buf + sizeof result, p);
    return result;
} 
```

此代码假定数据与机器具有*相同*的字节顺序。或者，您可以使用`std::copy_backward`来*反转*字节顺序。

这种方法既依赖于流数据又依赖于主机字节序，因此它不如*只*依赖于流数据的无符号整数的代数解决方案那么优雅。但是，由于有符号整数无论如何都依赖于平台，因此这应该是一个可以接受的折衷方案。

（只是为了比较，对于无符号整数，我更喜欢这个与机器无关的代码：

```
template <typename UInt>
typename std::enable_if<std::is_unsigned<UInt>::value, UInt>::type
get_from_le(unsigned char * const buf)
{
    UInt result;
    for (std::size_t i = 0; i != sizeof(UInt); ++i)
        result += (buf[i] << (8 * i));
    return result;
} 
```

用法：`auto ui = get_from_le<uint64_t>(buf);`。

对于 big-endian 版本，替换`[i]`为`[sizeof(UInt) - i - 1]`.)

# android - Debug my sqlite/content provier from mysql workbench?

> ID：11064089
> 
> 赞同：0
> 
> 时间：2012-06-16T14:04:04.717
> 
> 标签：android, sqlite

I'm working with sqlite ehich contains more than 2000 rows. i want to make sure that every insert/delete/update command was successfull. is there a way to view the sqlite db in a run time? like watching databases with phpMyAdmin / MySQL WorkBench ?

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:25:41.643

这 3 种方法有一种方法可以知道：如果发生错误，则 Insert 返回 -1 Delete & update 返回受影响的行数，如果没有行受到影响，则返回 0。您可以使用 DDMS 视图从模拟器中提取数据库，并使用 SDK 文件夹中的 sqlite3.exe 文件查看它

# javascript - JavaScript or jQuery, how to find element

> ID：11064090
> 
> 赞同：1
> 
> 时间：2012-06-16T14:04:18.010
> 
> 标签：javascript, jquery

I have the following HTML:

```
<div data-name="countrySelectorRoot">
    <select>
        <option value="C1">Country 1</option>
        <option value="C2">Country 2</option>
        <option value="C3">Country 3</option>
        <option value="C4">Country 4</option>
        <option value="C5">Country 5</option>
    </select>

    <script type="text/javascript">
        // Some script which finds parent div...
    </script>
</div> 
```

Inside script, I need code which needs to find my "countrySelectorRoot" div `(var MyRoot = // Code that finds element with data-name="countrySelectorRoot").`

However, I can have multiple divs with same data-name attribute and same contents, but I need to find the the specific one which is the parent of the script.

How to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:09:30.530

尝试这个

```
 $('div[data-name="countrySelectorRoot"][/Script]') 
```

它应选择作为脚本父级的特定脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:08:01.097

尝试`eq()`方法：

```
$('div[data-name="countrySelectorRoot"]:eq(0)') // this selects first div 
```

或`:has`：

```
$('div[data-name="countrySelectorRoot"]:has(script)') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T14:14:53.057

这应该给你一个想法：

```
$('div script').parent() 
```

## *[jsBin 演示](http://jsbin.com/udiyaw/2/edit)*

但老实说，我认为您以错误的方式使用 javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T14:15:26.660

要专门针对其中包含脚本标记的那个，请使用`:has`过滤器

```
$('[data-name="countrySelectorRoot"]:has(script)'); 
```

# c++ - boost::locale to_utf function for string encoding, likes to throw

> ID：11064091
> 
> 赞同：4
> 
> 时间：2012-06-16T14:04:18.737
> 
> 标签：c++, string, locale, boost-locale

I'm having trouble using boost to convert between different string encoding. [After reading this](http://www.boost.org/doc/libs/1_49_0/libs/locale/doc/html/charset_handling.html), I tried doing this:

```
boost::locale::generator gen;
std::locale loc = gen.generate("");// encoding local to the computer.
//std::locale loc = gen.generate("en_US.UTF-8"); // tried this too
//std::locale loc = gen.generate("en_US.UTF-8"); //doesn't work either
std::string someString = "test me";
std::string output = boost::locale::conv::to_utf<char>(someString, loc); 
```

But it always fails with a std::bad_cast when it tries use_facet() inside to_utf.

This would suggest that the boost locale::info [facet isn't available](http://www.cplusplus.com/reference/std/locale/use_facet/) for the locale being generated. But I tried a few different generations with no luck, and I expect the system default to always work, so I must be doing something wrong else where.

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:46:06.980

```
std::locale loc("");
std::locale conv_loc = boost::locale::util::create_info(loc, loc.name());
std::string output = boost::locale::conv::to_utf<char>(someString, conv_loc); 
```

# c++ - How to send GMP or MPFR types with MPI

> ID：11064092
> 
> 赞同：5
> 
> 时间：2012-06-16T14:04:23.487
> 
> 标签：c++, c, mpi, gmp, mpfr

I trying to send variables of type `mpfr_t` using `MPI_Scatter`. For example:

```
mpfr_t *v1 = new mpfr_t[10];  
mpfr_t *v2 = new mpfr_t[10];   
MPI_Scatter(v1, 5, MPI_BYTE, v2, 5, MPI_BYTE, 0, MPI_COMM_WORLD ); 
for (int i = 0; i < 5; i++) 
    mpfr_printf("value rank %d -  %RNf \n", ProcRank, v2[i]); 
```

It prints:

```
value rank 0 - nan
value rank 0 - nan
value rank 0 - nan
.....
value rank 1 - nan
value rank 0 - nan 
```

But it's work of MPI_Bcast. What I do wrong. Code C/C++, MPI lib is OpenMPI-1.6.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:06:43.137

您将 sendcount 指定为 5，将数据类型指定为 MPI_BYTE。这似乎很奇怪。如果要使用 MPI_BYTE 并且要发送 5 个 mpfr_t 值，则指定发送计数为 5*sizeof(mpfr_t)。另一种选择是创建您自己的 MPI 派生数据类型（如果您想摆脱 sizeof()）。

# c - Matlab mex memory handling - same input different result

> ID：11064094
> 
> 赞同：2
> 
> 时间：2012-06-16T14:04:45.483
> 
> 标签：c, matlab, memory, mex

I ve converted a computationally expensive part of my Matlab code into a C mex file, which greatly speeded up the calculation. The problem is that in some runs the C mex code gives exactly the same result as the Matlab code (within the machine accuracy), whereas in some others there is a significant discrepancy between the two (reaching even 1e-3). Furthermore, there are times that the C mex code disagrees with itself by giving in consecutive runs different results with exactly the same inputs. I guess that the problem is probably caused by some incorrect memory handling due to my programming. This is highly likely as thats my first attempt to create a C mex file.

I attach my mexFunction which calls another C function (in the same file) to perform the calculations. I would be grateful if you could give me some insight on my problem. Please let me know if you need any other part of the code.

Thanks in advance,

Panos

```
void BladeElementGC(const mwIndex InterestBE, const mwIndex BladeElement,
        const double *WakeXYZ, const double *RQuarter, const double *BE_RControl, const double *BE_Gamma,
        const mwSize NoOfBlades, const mwSize NoOfFilaments, const mwSize NoOfSegments, const mwSize NoOfWakeItems,
        const mwSize NoOfElements,
        const double conf_CompressibleBiot, const double conf_M, const double conf_CompressibleWakeMachMax,
        const double conf_VortexCoreOffset,
        const double conf_VortexDelta,
        const double conf_kin_visc,
        const double conf_VatistasN,
        const double conf_BoundVorticity,
        double *GCBladeElement)
{

    mwIndex Filament;
    double Temp1[3], Temp2[3], Temp3[3];

    GCBladeElement[0] = 0.;
    GCBladeElement[1] = 0.;
    GCBladeElement[2] = 0.;

    Filament = BladeElement;

    TrailingFilamentGC(InterestBE, Filament,
        WakeXYZ, BE_RControl, BE_Gamma,
        NoOfBlades, NoOfFilaments, NoOfSegments, NoOfWakeItems,
        NoOfElements,
        conf_CompressibleBiot, conf_M, conf_CompressibleWakeMachMax,
        conf_VortexCoreOffset,
        conf_VortexDelta,
        conf_kin_visc,
        conf_VatistasN,
        Temp1);

    TrailingFilamentGC(InterestBE, Filament+1,
        WakeXYZ, BE_RControl, BE_Gamma,
        NoOfBlades, NoOfFilaments, NoOfSegments, NoOfWakeItems,
        NoOfElements,
        conf_CompressibleBiot, conf_M, conf_CompressibleWakeMachMax,
        conf_VortexCoreOffset,
        conf_VortexDelta,
        conf_kin_visc,
        conf_VatistasN,
        Temp2);

    if (conf_BoundVorticity>0)
    {

        BoundElementGC(InterestBE, BladeElement,
        WakeXYZ, RQuarter, BE_RControl, BE_Gamma,
        NoOfBlades, NoOfFilaments, NoOfSegments, NoOfWakeItems,
        NoOfElements,
        conf_CompressibleBiot, conf_M, conf_CompressibleWakeMachMax,
        conf_VortexCoreOffset,
        conf_VortexDelta,
        conf_kin_visc,
        conf_VatistasN,
        Temp3);

    }
    else
    {
        Temp3[0] = 0.;
        Temp3[1] = 0.;
        Temp3[2] = 0.;
    }

    GCBladeElement[0] = Temp2[0] - Temp1[0] + Temp3[0];
    GCBladeElement[1] = Temp2[1] - Temp1[1] + Temp3[1];
    GCBladeElement[2] = Temp2[2] - Temp1[2] + Temp3[2];

}

/* The gateway function */
void mexFunction( int nlhs, mxArray *plhs[],
                  int nrhs, const mxArray *prhs[])
{

    mwIndex InterestBE;
    mwIndex BladeElement;
    double *WakeXYZ;
    double *RQuarter;
    double *BE_RControl;
    double *BE_Gamma;
    double *GCBladeElement;

    const mwSize *dimsWakeXYZ;
    const mwSize *dimsBE_RControl;

    mwSize NoOfBlades, NoOfFilaments, NoOfSegments, NoOfWakeItems;
    mwSize NoOfElements, NoOfDimensions;

    double p_CompressibleBiot;
    double *p_M;
    double *p_CompressibleWakeMachMax;
    mwSize p_WakePointsNo;
    double p_BoundVorticity;

    double *p_VortexCoreOffset;
    double *p_VortexDelta;
    double *p_kin_visc;
    double *p_VatistasN;

    //----------------------------------------------------------
    // First retrieve inputs
    //----------------------------------------------------------

    /* Get the value of the scalar input InterestBE  */
    InterestBE = (mwIndex)mxGetScalar(prhs[0]);

    /* Get the value of the scalar input Filament  */
    BladeElement = (mwIndex)mxGetScalar(prhs[1]);

    /* create a pointer to the real data in the WakeXYZ matrix  */
    WakeXYZ = mxGetPr(prhs[2]);

    /* create a pointer to the real data in the RQuarter matrix  */
    RQuarter = mxGetPr(prhs[3]);

    /* create a pointer to the real data in the BE_RControl matrix  */
    BE_RControl = mxGetPr(prhs[4]);

    /* create a pointer to the real data in the BE_RControl matrix  */
    BE_Gamma = mxGetPr(prhs[5]);

    /* create pointers to the fields of the conf structure  */

    p_CompressibleBiot = mxGetScalar(mxGetField(prhs[6], 0, "CompressibleBiot"));
    p_M = mxGetPr(mxGetField(prhs[6], 0, "M"));
    p_CompressibleWakeMachMax = mxGetPr(mxGetField(prhs[6], 0, "CompressibleWakeMachMax"));
    p_VortexCoreOffset = mxGetPr(mxGetField(prhs[6], 0, "VortexCoreOffset"));
    p_VortexDelta = mxGetPr(mxGetField(prhs[6], 0, "VortexDelta"));
    p_kin_visc = mxGetPr(mxGetField(prhs[6], 0, "kin_visc"));
    p_VatistasN = mxGetPr(mxGetField(prhs[6], 0, "VatistasN"));
    p_WakePointsNo = (mwSize)mxGetScalar(mxGetField(prhs[6],0,"WakePoints"));
    p_BoundVorticity = mxGetScalar(mxGetField(prhs[6],0,"BoundVorticity"));

    // Get the dimensions of the WakeXYZ array
    dimsWakeXYZ = mxGetDimensions(prhs[2]);

    // Get the dimensions of the BE_RControl array
    dimsBE_RControl = mxGetDimensions(prhs[4]);

    NoOfBlades = dimsWakeXYZ[0];
    NoOfFilaments = dimsWakeXYZ[1];
    NoOfSegments = dimsWakeXYZ[2];
    NoOfWakeItems = dimsWakeXYZ[3];
    NoOfElements = dimsBE_RControl[1];

    //----------------------------------------------------------
    // Call the calculation subroutine
    //----------------------------------------------------------

    /* create the output matrix */
    plhs[0] = mxCreateDoubleMatrix(1,3,mxREAL);
    GCBladeElement = mxGetPr(plhs[0]);

    BladeElementGC(InterestBE, BladeElement,
            WakeXYZ, RQuarter, BE_RControl, BE_Gamma,
            NoOfBlades, NoOfFilaments, NoOfSegments, NoOfWakeItems,
            NoOfElements,
            p_CompressibleBiot, *p_M, *p_CompressibleWakeMachMax,
            *p_VortexCoreOffset,
            *p_VortexDelta,
            *p_kin_visc,
            *p_VatistasN,
            p_BoundVorticity,
            GCBladeElement);

 } 
```

# javascript - XMLHttpRequest launches multiple times without initiating the onreadystatechange function

> ID：11064095
> 
> 赞同：0
> 
> 时间：2012-06-16T14:05:05.290
> 
> 标签：javascript, xmlhttprequest, userscripts

The userscript in question: [http://userscripts.org/scripts/show/130532](http://userscripts.org/scripts/show/130532)

After the site it's been made for has been updated to HTML5, I had to update the script. However, it's got a really big problem now. When I launch the script's main function that contains the XMLHttpRequest, it simply spams the console with these requests until the browser simply crashes.

Now, I looked around in both StackOverflow and in Google for anything that could help me, but there's nothing.

If you proceed to try the script, be careful, because it crashes the browser. Or at least, it does for me in FF 11.00

Code:

```
// ==UserScript==
// @name           Where my thread at
// @include        *//boards.4chan.org/*/res/*
// ==/UserScript==

(function () {
    "use strict";
    var board = document.location.href.match(/https?:\/\/boards\.4chan\.org\/[\w]+/i), threadNo = location.pathname.match(/\/res\/([\d]+)/i), main = document.getElementsByName("delform")[0], is404 = 0, ttt = null, b, c, num, timer, html, i, l, no, found, xhr1, xhr2, cstatus, ui, pg;

    function lookup(resp) {
        html = resp.match(/<div class="postContainer opContainer".*?<\/div>[^<]*?<\/div>/gi);
        if (html) {
            l = html.length;
            for (i = 0; i < l; i += i) {
                no = html[i].match(/<a href="res\/([\d]+)"/i)[1];
                if (threadNo[1] === no) {
                    document.getElementById('page').innerHTML = pg;
                    cstatus.innerHTML = "Status:&nbsp;Done";
                    found = 1;
                    break;
                }
            }
        }
    }

    function doIndex(pg) {
        b = document.getElementById('shouldi');
        if (!is404 && b.checked === true) {
            cstatus.innerHTML = "Status:&nbsp;Searching";
            c = document.getElementById('timerbox');
            num = parseInt(c.value, 10);
            if (num > 600) { timer = 600; }
            if (num < 30) { timer = 30; }
            if (isNaN(num)) {
                timer = 60;
                alert("Value entered is not a valid number! Defaulting to 60");
                c.value = "60";
            }
            if (!timer) { timer = num; }
            xhr1 = new XMLHttpRequest();
            xhr1.open("GET", board[0] + (0 === pg ? "" : "/" + pg), true);
            xhr1.setRequestHeader("Cache-Control", "no-cache");
            xhr1.onreadystatechange = function () {
                if (xhr1.readyState === 4) {
                    if (xhr1.status === 200) {
                        lookup(xhr1.responseText);
                    }
                }
                if (found) {
                    ttt = setTimeout(function () {
                        doIndex(0);
                    }, timer * 1000);
                } else {
                    if (pg < 15) {
                        doIndex(pg + 1);
                    } else {
                        cstatus.innerHTML = "Status:&nbsp;Really 404?";
                        xhr2 = new XMLHttpRequest();
                        xhr2.open("GET", board[0] + threadNo[0], true);
                        xhr2.setRequestHeader("Cache-Control", "no-cache");
                        xhr2.onreadystatechange = function () {
                            if (xhr2.readyState === 4) {
                                if (xhr2.status === 404) {
                                    cstatus.parentNode.removeChild(cstatus);
                                    document.getElementById('page').innerHTML = "404'd";
                                    is404 = 1;
                                } else {
                                    cstatus.innerHTML = "Status:&nbsp;Still alive";
                                    setTimeout(function () {
                                        doIndex(0);
                                    }, 1000);
                                }
                            }
                        };
                        xhr2.send(null);
                    }
                }
            };
            xhr1.send(null);
        }
    }

    ui = document.createElement('center');
    ui.innerHTML = '<table border="0" style="width: 100%"><tbody><tr><td style="width: 33%;text-align: right;">Timer(600-30s):&nbsp;<input type="text" value="30" maxlength="3" size="3" id="timerbox">&nbsp;&nbsp;</td><td style="width: 33%">&nbsp;<center><font size="20" color="red" id="page">&nbsp;</font></center>&nbsp;</td><td style="width: 33%;text-align:left;">&nbsp;&nbsp;<span id="checkcheck"><label for="shouldi">Checking</label><input type="checkbox" id="shouldi" /></span>&nbsp;&nbsp;<span id="checkstatus">Status:&nbsp;</span></td></tr></tbody></table>';
    main.parentNode.insertBefore(ui, main);
    cstatus = document.getElementById('checkstatus');
    cstatus.innerHTML = "Status:&nbsp;Ready";
    document.getElementById('checkcheck').addEventListener("click", function () {
        if (ttt !== null) {
            clearTimeout(ttt);
            ttt = null;
        }
        setTimeout(function () {
            doIndex(0);
        }, 500);
    }, false);
}()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T09:29:50.427

您正在使用多个变量而没有**在本地****声明**这些变量：

 **```
var ..., found, xhr1, xhr2, cstatus, ui, pg;
...
function doIndex(pg) {
    ...
        xhr1 = new XMLHttpRequest();
     // ^^^^ No var !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        ...
        xhr1.onreadystatechange = function() {
            if (xhr1.readyState === 4) { ... }
            if (found) {
                ...
            } else {
                if (pg < 15) {
                    doIndex(pg + 1); // <-- !!!!!!!!!!!!!!!!!!
                } else { ...
                    xhr2 = new XMLHttpRequest();
                    ...
                    xhr2.onreadystatechange = function() { ... };
                    xhr2.send(null);
                }
            }
        };
        xhr1.send(null);
    }
}  ...
doIndex(0); // Initiate the doom 
```

首先，您将一个新的 XHR 实例分配给一个非局部`xhr1`变量。
然后，添加一个`readystatechange`事件处理程序，其中会发生以下情况：

1.  最初，`readyState`不是四，所以`found`是假的。由于`pg`从 0 开始，`doIndex(pg + 1)`因此被调用。现在，**`xhr1`被一个新的 XHR 实例覆盖**。
2.  这继续，直到`pg`达到 15。然后，`pg < 15`是错误的，恐怖开始了：
    *   `xhr1.onreadystatechange`在请求期间多次触发。`pg < 15`是假的，所以`else`块被评估，你在其中启动了几个新的 XHR ( `xhr2`) 请求......
    *   **所有之前的 readystatechange 事件仍然被触发，因为请求还没有完成。在每个事件处理程序中，您都在比较 的值`xhr1.readyState`，它指的是*最后*创建的`xhr1`请求**的状态。
        因此，您`doIndex(pg+1)`一遍又一遍地调用，一旦`pg`达到 15，就会创建新的 XHR ( `xhr2`) 实例。

要解决此问题，请在函数中声明变量，并将整个`onreadystatechange`块包装在`if (xhr1.readyState == 4)`（或使用[`onload`](http://www.w3.org/TR/XMLHttpRequest2/#event-xhr-load)代替`onreadystatechange`）中。

```
function dIndex(pg) {
    var xhr1, xhr2;
    ...
    xhr1.onreadystatechange = function() {
        if (xhr1.readyState === 4) {
           /* ... */
        }
    };
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-05T04:36:58.723

这有助于基于答案：

```
 let signupRequest = new XMLHttpRequest();
                    let url = "signup/" + inputMobile.value;
                    signupRequest.open("GET", url, true);
                    signupRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                    signupRequest.send();

                    signupRequest.onreadystatechange = function () {
                        if (signupRequest.readyState === 4) {
                            hideLoading();
                            if (signupRequest.status === 200) {
                                console.log("OK: " + status + " --- " + signupRequest.response);
                            } else {
                                console.log("NOK: " + status + " --- " + signupRequest.response);
                            }
                        }
                    }; 
```**

# sql-server - 生成假期/休假日期列表

> ID：11064101
> 
> 赞同：0
> 
> 时间：2012-06-16T14:05:31.420
> 
> 标签：sql-server

我有一个问题要解决。这是怎么回事...

员工休假或休假，并且此条目记录在带有`LEAVE_START_DATE`和的表中`NO_OF_DAYS`（这是工作日数）。

主表包含`DATE`、`IS_WEEK_DAY`(Y/N)、`IS_HOLIDAY`(Y/N) 和`DAY_OF_WEEK`。

需要生成员工休假的工作日期列表。

* * *

**桌子`leaves`**

```
LEAVE_START_DATE, NO_OF_DAYS    
2012-05-17, 3 
```

* * *

**桌子`days`**

```
DATE, IS_WEEK_DAY, IS_HOLIDAY, DAY_OF_WEEK
2012-05-17, Y, N, 5 
2012-05-18, Y, N, 6 
2012-05-19, N, N, 7 
2012-05-20, N, N, 1
2012-05-21, Y, Y, 2 
2012-05-22, Y, N, 3 
```

* * *

**预期成绩**

```
DATE
2012-05-17
2012-05-18
2012-05-22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:44:58.820

我必须过于简单化-您是否要求选择与`table days`开始日期和工作日参数匹配的 3 天（已填充）？如果是这样，以下将起作用。此外，您`SQL SERVER`没有`parameterized TOP`显示`ROWCOUNT`.

```
DECLARE @LeaveStartDate date, @noBusDays int
SET @LeaveStartDate = '2012-05-17'
SET @noBusDays = 3

SELECT TOP (@noBusDays) [DATE] 
FROM [DAYS]
WHERE IS_WEEK_DAY = 'Y' 
AND IS_HOLIDAY = 'N'
AND [DATE] > = @LeaveStartDate
ORDER BY [DATE] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:50:07.057

下面的查询将从 SQL Server 2008 开始工作，否则如果您使用 2005 或以下任何版本，您需要使用 where 子句更改最后一个顶部查询以限制行数

```
 Declare @leaves table
 (Leave_Start_date datetime,No_Of_days int)

 insert into @leaves 
 values ('2012-05-17',3)

 Declare @days table
 ([Date] datetime,
 IS_WEEK_DAY char(1),
 IS_HOLIDAY char(1),
 Day_OF_THE_WEEK int)

 Insert into @days
 values 
 ('2012-05-17','Y','N',5),
 ('2012-05-18','Y','N',6),
 ('2012-05-19','N','N',7),
 ('2012-05-20','N','N',1),
 ('2012-05-21','Y','N',2)

 ;with cte as
 (
  Select [date] from @days where [Date]>=(select Leave_Start_date from @leaves Limit1)
  and is_WEEK_DAY='Y' and IS_HOLIDAY='N'
 )  
 Select top (select no_of_days from @leaves) [date] from cte 
```

# ruby-on-rails - 如何在rails中解析json响应

> ID：11064111
> 
> 赞同：0
> 
> 时间：2012-06-16T14:06:46.013
> 
> 标签：ruby-on-rails, json

第一次在 Rails 中使用 JSON 并试图找出一些看起来应该很基本的东西。我正在使用 Stripe Rails 库并尝试解析并将其中一个 JSON 元素设置为变量。

这是我的实际尝试：

```
 coupon = Stripe::Coupon.retrieve(self.discount_code)
    parsed_json = ActiveSupport::JSON.decode(coupon)
    discount_amount = parsed_json["percent_off"] 
```

这条线有效：

```
coupon = Stripe::Coupon.retrieve("save50percent") 
```

在控制台中运行“puts coupon”会显示 JSON 字符串

JSON: {"id":"test50","duration":"once","duration_in_months":null,"livemode":false,"max_redemptions":null,"object":"coupon","percent_off":50 ,"redeem_by":null,"times_redeemed":0}

但试图运行：

```
parsed_json = ActiveSupport::JSON.decode(coupon) 
```

导致以下错误：

```
TypeError: can't convert Stripe::Coupon into String 
```

我什至还没有尝试从 JSON 中解析出值——我确信我的方法不正确。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T14:16:17.877

您的错误消息说明了一切：`coupon`是 a `Stripe::Coupon`，而不是`String`. 尝试使用可用的[`to_json`方法](http://rubydoc.info/github/stripe/stripe-ruby/master/Stripe/StripeObject#to_json-instance_method)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T14:15:32.050

我会假设优惠券不是一个看起来像 JSON 的字符串，但在打印时看起来像一个字符串。尝试解码它的字符串表示。我不确定此代码（我不是 RoR 程序员），但我见过许多与您所处的情况类似的情况......

# c# - 调整 WPF ListBox 选择框的大小

> ID：11064114
> 
> 赞同：1
> 
> 时间：2012-06-16T14:07:05.327
> 
> 标签：c#, wpf, listbox, styles, datatemplate

对于一个项目，我实现了一个类似于 IntelliSense 的小型控件，它只不过是一个`ListBox`. 它`DataTemplate`由`StackPanel`控股 one`Image`和 one组成`TextBlock`。没有其他的。正如您在我的控件的第一个屏幕截图中看到的那样，ListBox 的选择框选择了整个项目（这通常正是人们所期望的）：

![自定义列表框](../Images/96d5b948d33a82c9236da94a1044442d.png)

但是我的 VS11 中的“被盗”图标质量很差，所以我想像 Visual Studio 那样调整选择：

![Visual Studio 智能感知](../Images/045e0b6db819db49d65636bff119a7be.png)

您可以看到仅选择了文本（视觉表示确实忽略了图像/图标），我也想知道如何实现此行为。

*编辑：*图标只是具有透明背景的 GIF 文件。我会用更好的替换它们，但是我对如何获得所需的行为很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:57:33.550

这是通过替换 ListBoxItem 控件模板的解决方案。在我的测试中，我只显示两个文本字符串，第二个突出显示。

```
<Page.Resources>
    <Style x:Key="ItemStyle" TargetType="ListBoxItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <ContentPresenter/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="Selected" TargetType="{x:Type TextBlock}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=IsSelected, 
                         RelativeSource={RelativeSource Mode=FindAncestor, 
                         AncestorType={x:Type ListBoxItem}}}" Value="True">
                <Setter Property="Background" 
                        Value="{x:Static SystemColors.HighlightBrush}"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <DataTemplate x:Key="ItemTemplate" DataType="{x:Type ViewModel:DataItem}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" SharedSizeGroup="c1"/>
                <ColumnDefinition Width="auto" SharedSizeGroup="c2"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Image Source="../Images/Collapse.png"/>
            <TextBlock Grid.Column="1" Text="{Binding Name}" Margin="0,0,5,0"/>
            <TextBlock Style="{StaticResource Selected}" 
                       Grid.Column="2" Text="{Binding Description}"/>
        </Grid>
    </DataTemplate>
</Page.Resources>

<Page.DataContext>
    <Samples:Page3ViewModel/>
</Page.DataContext>

<Grid>
    <ListBox 
        Grid.IsSharedSizeScope="True"
        SelectedIndex="2"
        HorizontalContentAlignment="Stretch"
        ItemsSource="{Binding Items}" 
        ItemContainerStyle="{StaticResource ItemStyle}"
        ItemTemplate="{StaticResource ItemTemplate}"/>
</Grid> 
```

视图模型包含一组简单的数据项

```
public class Page3ViewModel
{
    public Page3ViewModel()
    {
        Items = new List<DataItem>
            {
                new DataItem{Name = "One", Description = "First"},
                new DataItem{Name = "Two", Description = "Second"},
                new DataItem{Name = "Three", Description = "Third"},
                new DataItem{Name = "Four", Description = "Fourth"},
            };
    }
    public IEnumerable<DataItem> Items { get; private set; }
} 
```

给予

![在此处输入图像描述](../Images/aa21292d94f3ded4a34fd765e47b955c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:58:26.167

您的问题是由于 WPF 呈现*ListBox*中的每个项目的方式。它使用*ItemContainerStyle*将每个项目包装在*ListBoxItem*中。正是这个*ListBoxItem*包含要显示的内容（在您的情况下是包含图像和文本块的 StackPanel）。

默认情况下，*ListBoxItem在它显示的***所有**内容周围显示蓝色矩形。

我想出了一个解决方案，但它是一个 hack。*只需将图像放大并让背景像素颜色与列表框*的背景颜色匹配（在我的情况下为白色）并使用以下 XAML。

```
<ListBox Margin="5"
         ItemsSource="{Binding Items}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal"
                        Margin="-2,0,0,0">
                <Image Source="Save-icon.png" />
                <TextBlock Margin="5,8,0,0"
                           Text="{Binding}" />
            </StackPanel>
        </DataTemplate>
     </ListBox.ItemTemplate>
</ListBox> 
```

这是结果：

![在此处输入图像描述](../Images/e1970be4a3dafdace41073151b97d81b.png)

**更新**

我想出了一个修改，这使得它少了一点黑客攻击。在我的*ItemTemplate*中，我用一个*Border*包围了图像，它使用绑定从它的父*ListBox*获取其背景颜色。（图像周围不再有边框）。

将 XAML 更新为此：

```
<ListBox Margin="5"
         ItemsSource="{Binding Items}"
         Background="LightSteelBlue">

    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal"
                        Margin="-2,0,0,0">
                <Border Background="{Binding Path=Background, RelativeSource={RelativeSource AncestorType=ListBox}}"
                        Padding="10">
                    <Image Source="Save-icon.png"/>
                 </Border>
                 <TextBlock Margin="5,8,0,0"
                            Text="{Binding}" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>

</ListBox> 
```

这是新的结果：

![在此处输入图像描述](../Images/19401ee3d7a755f04bf2e40e868ed1a7.png)

现在您需要做的就是更新*ListBox*的背景颜色，一切都会自动调整。例如

```
<ListBox Margin="20"
         ItemsSource="{Binding Items}"
         Background="PeachPuff"> 
```

![在此处输入图像描述](../Images/f2ea265ff6b08a3cc2adfa87ee2401f5.png)

# android - 使 ListView 中的项目可选

> ID：11064115
> 
> 赞同：6
> 
> 时间：2012-06-16T14:07:19.337
> 
> 标签：android, android-listview, textview, android-actionbar

我正在开发一个 android 应用程序，并且正在尝试遵循 Ice Cream Sandwich UI 的指南。

我有一个包含 ListView 的 ListActivity，并且在 ListView 中我对 ArrayAdapter 中的每个项目都有一个 TextView。当我想要做的时候，一旦用户长按 ListView 中的一个项目，就会显示上下文活动栏，并且长按的项目现在处于选中状态。然后，用户可以从那里单击 ListView 中的多个项目，使它们全部被选中，然后用户可以按下 ActionBar 中的按钮来对 ListView 中的所有选定项目执行操作。

我已经触发它在长时间单击该项目时显示上下文活动栏，但我不知道如何使该项目显示为已选中并允许用户选择/取消选择 ListView 中的项目。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-16T14:13:10.443

按照这里的描述做。

[如何突出显示 ListView 中的选定项目？](https://stackoverflow.com/questions/8565999/how-to-highlight-selected-item-in-listview)

基本上你需要设置多选监听器，然后选择类型。从动作模式回调中做你需要的事情

# java - 在java和android中处理异常

> ID：11064119
> 
> 赞同：-1
> 
> 时间：2012-06-16T14:07:57.207
> 
> 标签：java, android, exception-handling

我已经学习了java的基础知识。我想了解异常处理。

1) 可以使用吗

```
try{............
}catch(Exception ex){
........
} 
```

而不是更具体的东西

```
try{............
}catch(FileNotFoundException ex){
........
} 
```

这样我不知道会抛出什么类型的异常。

2）如何决定代码的哪一部分在`try`块内。如果我将整个代码放在“try”中并转过脸，会不会很糟糕。

3）如果我必须具体说明 catch 块，那么我怎么知道可以抛出什么类型的异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:12:30.733

这是一个糟糕的变体。一个例子：

```
socket.send(data); // sending data via socket. This may cause IOException 
```

但也可以有另一个`Exception`，例如`NullPointerException`。如果您将捕获所有异常，则将更难发现错误：

```
Socket socket = null;
socket.send(data); // sending data via socket. This will cause NullPointerException 
```

在此示例中，您会看到您将拥有一个`NullPointerException`，但您会认为这是一个`IOException`

最好的变体是：

```
try {
    Socket socket = null;
    socket.send(data);
} catch(IOException ex) {
    ex.printStackTrace();
} catch(NullPointerException ex) {
    ex.printStackTrace();
}
// or in java 7 you can write catch(IOException | NullPointerException ex) 
```

如果你想捕获一些异常，或者如果没有，就不要写第二个`catch`块`null`，你会发现你所有的错误，这是不必要的。

对不起我的英语不好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:12:48.827

1.  如果可以的话，而不是更具体的东西是更好的选择
2.  如果您将整个代码放在“尝试”中，则您不能针对异常，甚至您的处理（应该如何处理异常）也会受到限制

正如我所说，如果可以的话，而不是更具体的东西是更好的选择，但如果你不确定，那么可以使用这种方式

```
try{............
}catch(FileNotFoundException ex){
........
}catch(Exception ex){
........
} 
```

意味着一般要求应该排在最后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T14:13:14.733

**Java有两种异常**

1**已检查异常**

2**未经检查的异常**

所以你的问题是`How to decide what part of code be inside try block.`

**Java 强制您在 try 块中编写代码块，这可能会导致第一种异常。**

您可以写信`e.printStackTrace();`以了解有关导致异常的原因的详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T14:15:43.397

答案是......*这取决于*。

如果您希望您的应用程序针对不同的异常类型表现出不同的行为，那么您的`try`块应该很短，并且您应该分别捕获异常。

但是，如果您决定应以通用方式处理代码故障，则可以在一个`catch`块中捕获所有异常，例如，执行以下操作：

```
try {

    // large block of code, throwing lots of exceptions

} catch (Throwable t) {

    // This way you, and your admin will know what really happened.
    logger.log(Level.SEVERE, "Error in my awesome block of code", t);

    // This way you're hiding error details from your users
    someGUI.showErrorMessage("Unexpected error during processing. Contact your local IT");
} 
```

在现实生活中，这通常比这更复杂，您应该决定单独处理哪些错误，以及以单一、通用的方式处理哪些错误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-16T14:20:08.120

1) 使用 try{..}catch(Exception e) {..} 使您的代码更加紧凑，并且能够在一个地方管理异常。您还可以连接 catch 块以管理多种类型的异常：

```
try {
    ..
} catch(FileNotFoundException fe) {
    //manage here this kind of exception
} catch(NullPointerException ne) {
    //you missed a check on nulls! But the file has been found...
} catch(Exception e) {
    //file has been found and no nulls are left...
} 
```

请注意，块的顺序是相关的：在示例中，如果同时存在 FileNotFoundException 和 NullPointerException，您将在 FileNotFoundException catch 块中被重定向。

2）try-catch 块显然会对代码的性能产生影响，所以我认为您只需要放置以下代码： - 不受您控制（例如第三方库等） - 使用不可靠的媒体（例如套接字连接、文件 IO 等） - 利用异常处理来指示特定行为（例如 GoogleAppEngine 超时异常等）

# python - python - 机械化（将输入设置为表单）

> ID：11064122
> 
> 赞同：2
> 
> 时间：2012-06-16T14:08:18.663
> 
> 标签：python, forms, mechanize, mechanize-python

我发现了如何使用教程从谷歌搜索中检索主题的 html 页面。教程中给出了这一点。

```
import mechanize
br = mechanize.Browser()
br.open('http://www.google.co.in')
br.select_form(nr = 0) 
```

直到这一点我才明白它会检索表单。然后它被赋予了

```
br.form['q'] = 'search topic'
br.submit()
br.response.read() 
```

这会输出与搜索主题相关的页面的 html。但我的疑问是 br.form[parameter] 中的这个参数应该是什么？因为我在谷歌新闻上试过，结果很成功。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T14:26:25.577

它是页面源中给出的表单字段的 id。

您可以像这样获取可用的 id 值：

```
import mechanize

br = mechanize.Browser()
br.open("http://www.google.com/")

for f in br.forms():
    print f 
```

这给了我：

```
<f GET http://www.google.ca/search application/x-www-form-urlencoded
  <HiddenControl(ie=ISO-8859-1) (readonly)>
  <HiddenControl(hl=en) (readonly)>
  <HiddenControl(source=hp) (readonly)>
  <TextControl(q=)>
  <SubmitControl(btnG=Google Search) (readonly)>
  <SubmitControl(btnI=I'm Feeling Lucky) (readonly)>
  <HiddenControl(gbv=1) (readonly)>> 
```

它说：

1.  页面上只有一个表格

2.  隐藏字段 id 是 ie（页面编码）、hl（语言代码）、hp（？不知道）和 gbv（也不知道）。

3.  唯一没有隐藏的字段id是q，它是一个文本输入，也就是搜索文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:24:32.720

该参数应该是您使用字符串填充的表单元素的名称。您可以使用诸如 firebug 之类的东西来检查网页（即对于 firefox，使用您的浏览器可用的任何内容）以最简单的方式找到该名称。您也可以尝试查看页面的来源，但是当页面复杂时，这很乏味。

例如，表单的名称 - 我正在输入的框的元素是“post-text”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T14:28:10.893

查看 [http://www.google.co.in](http://www.google.co.in)资源，它有以下代码：

```
<input class="lst lst-tbb" value="" title="Google 搜索" size="41" type="text" 
                       autocomplete="off" id="lst-ib" name="q" maxlength="2048"/> 
```

**name="q"** 表示`parameter`在 br.form[ `parameter`]

# ruby-on-rails - 回形针。如何不保存空文件？

> ID：11064126
> 
> 赞同：4
> 
> 时间：2012-06-16T14:08:47.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我希望用户能够保存最多 5 个文件（任何少于这个都可以），所以这是我的新操作（place_photos 是回形针附件，Place :has_many PlacePhoto）：

```
def new
  @place = Place.new
  5.times { @place.place_photos.build }
  ...
end 
```

我的表格如下（稍微简化了一点）：

```
<%= f.simple_fields_for :place_photos do |photo| %>
  <%= photo.input :photo %>
  <%= photo.input :description %>
<% end %> 
```

结果生成了 5 个文件字段。提交表单后，如果未提供文件，则会创建空的 PlacePhoto 记录。如何防止保存空记录而不出错？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T14:52:38.817

在`place`模型中，您可以验证`place_photos`如下：

```
Class Place < ActiveRecord::Base

 accepts_nested_attributes_for :place_photos , :reject_if => proc { |attributes| attributes['photo'].blank? }, :allow_destroy => true

end 
```

# android - 等待将值设置为 true

> ID：11064131
> 
> 赞同：0
> 
> 时间：2012-06-16T14:09:47.707
> 
> 标签：android, gps, location, wait, android-location

我希望我的代码等待 mGPS.GotLocaton 为真（在触发 onLocationChanged 事件时设置）

```
public class GPSManager  {
    Context MyContext;
    boolean GotLocation = false;
    Location CurrentLocation;
    LocationManager locationManager;

    LocationListener locationlistener = new LocationListener() {
        public void onLocationChanged(Location location) {
            // Called when a new location is found by the network location provider.
            GotLocation = true;
            locationManager.removeUpdates(locationlistener);
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {}

        public void onProviderEnabled(String provider) {}

        public void onProviderDisabled(String provider) {}
    };

    public GPSManager(Context context){
        this.MyContext = context;
        locationManager = (LocationManager) MyContext.getSystemService(Context.LOCATION_SERVICE);
    }

    public void GetCurrentLocation(){
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationlistener);
        GotLocation = false;
    }
} 
```

被调用：

```
 myGPS.GetCurrentLocation();
    do{
    }while (!myGPS.GotLocation); 
```

但它不会等待/循环 - 我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:31:06.227

可能是因为您在添加`LocationListener`.

不过那里有一些奇怪的代码。考虑改用回调。

有关位置信息的更多信息，请参阅此 android 开发人员博客条目：

[http://android-developers.blogspot.co.uk/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.co.uk/2011/06/deep-dive-into-location.html)

或者更好的是，使用这个为您解决所有问题的库：

[http://code.google.com/p/little-fluffy-location-library/](http://code.google.com/p/little-fluffy-location-library/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:41:56.690

您在哪个线程中调用获取位置的循环？

如果它在主线程中，这是非常错误的，因为 locationlistener 只会让事件在这个线程上运行，但是由于这个线程在循环中，它永远不会到达那里，所以你处于无限循环中，这也会导致 ANR大约5秒左右。

locationlistener 的工作方式是使用观察者设计模式——当它有东西可以给你时，它就会给你。你不能简单地一次又一次地问它。您可以使用的唯一类似的事情是使用[getLastKnownLocation](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)获取它拥有的最后一个位置。

# node.js - 使用 express.js 框架在 mongodb 服务器中插入 json 值

> ID：11064133
> 
> 赞同：0
> 
> 时间：2012-06-16T14:10:04.320
> 
> 标签：node.js, mongodb

我想在有人登录时将生成的数字插入数据库（即测试）以下是代码文件

文件：app.js

```
var express = require('express');
var routes = require('./routes');
var mongoose = require('mongoose');
var db = mongoose.connect('mongodb://localhost/test');
var schema = mongoose.Schema;
var app = module.exports = express.createServer();

// Configuration
app.configure(function() {
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser());
    app.use(express.session({
        secret: 'your secret here'
    }));

    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
});

app.configure('development', function() {,
    app.use(express.errorHandler({
        dumpExceptions: true, 
        showStack: true 
    }));
});

app.configure('production', function() {
    app.use(express.errorHandler());
});

app.post('/authenticate', routes.authenticate);
app.get('/login', routes.login);

// Routes
app.get('/', routes.home);
app.post('/', routes.home_post_handler);
app.post('/putdata', routes.putdata);

app.listen(3001, function() {
    console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env);
}); 
```

文件：index.js

```
exports.home = function(req, res) {
    res.redirect('/login');
};

exports.home_post_handler = function(req, res) {
    // message will be displayed on console
    console.log(req.body.message);

    // send back the json of the message received via the textbox
    res.json(req.body.message);
    // or
    //res.send(200);// send 200 for server processing complete
};

exports.login = function(req, res) {
    res.render('login', {
      title: 'login to your system'
    });
};

exports.authenticate = function(req, res) {
    if (req.body.txtlogin == req.body.txtpassword) {

      var _guid = guidgenerator();

      res.json(_guid);
      db.posts.insert(_guid);// this is the main porblem 

    }
};

function guidgenerator() {
    var s4 = function() {
       return (((1 + math.random()) * 0x1000) | 0).tostring(16).substring(1);
    };

    return (s4() + s4() + s4());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:24:44.450

您正在尝试将原始类型插入数据库。由于 MongoDB 将 JS 对象存储为文档/记录，因此您需要传递一个对象作为 insert() 的第一个参数。尝试以下操作：

```
if (req.body.txtlogin == req.body.txtpassword) {
    var guid = guidgenerator();

    // Insert an object with a key named "guid" that has the value of var guid
    db.posts.insert({ "guid": guid });
    res.json(guid);
} 
```

另外，请按照 StackOverflow 的代码格式语法缩进您的代码。如果没有格式化，大多数回答者在浏览问题后会被关闭，从而使您的问题得不到回答。

# java - 如何使用eatj托管在Apache中配置子域？

> ID：11064139
> 
> 赞同：0
> 
> 时间：2012-06-16T14:11:20.810
> 
> 标签：java, apache, tomcat, dns

我有一个域 ( www.0signals.com ) 并想创建一个子域，比如 uploads.0signals.com 我如何配置`httpd.conf`和其他文件？我应该在哪里创建文件夹`uploads`？我是否需要创建任何其他文件夹来支持子域？

我正在使用eatj 和java 作为核心语言的高级计划。我的目录结构如下所示：

*   垃圾桶
*   配置
*   库
*   网络应用程序/ROOT
*   上传/ROOT

我不确定我做错了什么。我更新了 DNS 中的区域，子域/域都指向同一个 IP。我想我在配置文件上做错了，或者在错误的位置创建了文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:15:25.440

如果您使用的是代理服务器（Apache httpd），那么 Tomcat 并不关心您的配置是什么样的：如果您愿意，您可以在相同的主机名（或多个主机名）上提供所有 Web 应用程序。在这种情况下，为多个虚拟主机配置 httpd，然后将您想要的任何 URL 空间映射到 Tomcat。

但是，如果您想分离您的 webapps 以便（比如说）一个可用，`www.0signals.com`另一个可用（但不能同时使用），那么您将不得不在 Tomcat`uploads.0signals.com`中创建多个，如下所示：`<Host>``server.xml`

```
<Host name="localhost" appbase="webapps">
  ...
</Host>
<Host name="uploads.0signals.com" appbase="uploads">
  ...
</Host> 
```

我将默认的“localhost”留`<Host>`在了那里，但没有特别标识它，`www.0signals.com`因为它应该是默认的`<Host>`，并且得到任何与定义的任何其他主机都不匹配的东西。

这些`appbase`值是相对于 Tomcat 的`CATALINA_BASE`，它本质上是您现有目录所在位置的父目录`webapps`。如果您想完全限定`appbase`，欢迎您这样做。

一旦你分别在和目录中拥有你的`ROOT`目录（或`ROOT.war`文件），你应该很高兴。除非您要配置 SSL，否则为两个主机名使用相同的 IP 地址应该不是问题，在这种情况下，您可能很难使用仅匹配单个域的 SSL 证书。有一些方法可以解决这个问题，但它们与您的问题无关。`webapps``uploads`

***更新***哦，还有一件事：在这种情况下没有特别的理由使用 Apache httpd。您是否需要`eatj`在前面使用 httpd？上面的配置在没有 httpd 的情况下可以正常工作。如果您打算将所有流量代理到 Tomcat，那么根本没有理由安装 Apache httpd。

***2012-06-29 更新***有几件事：

1.  您的 DNS 不是您的问题（至少现在不是）：

    $ host www.0signals.com www.0signals.com 有地址 69.46.75.150 $ host uploads.0signals.com uploads.0signals.com 有地址 69.46.75.150

2.  当联系每一个`www.0signals.com`和`uploads.0signals.com`时，我从两个不同的服务器得到响应：`www.0signals.com`响应（即 Tomcat）的`Server`标头，而另一个响应（即 Apache httpd）。如果您使用 Apache httpd 来处理*所有*请求，那么您在for . 请记住，mod_jk 和 mod_proxy_* 都不会将您的指令从一个虚拟主机复制到另一个虚拟主机：您​​必须手动完成。`Apache -Coyote/1.1``Apache/2.0.63`*`JkMount``ProxyPass``ProxyPassReverse``VirtualHost``uploads.0signals.com`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:29:15.793

```
<Host appBase="uploads" autoDeploy="true" name="uploads.0signals.com" unpackWARs="true" xmlNamespaceAware="false" xmlValidation="false">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"  
               prefix="localhost_access_log." suffix=".txt" pattern="common" resolveHosts="false"/>
        -->

      </Host> 
```*

# ruby-on-rails - 我似乎打破了 validates_confirmation_of

> ID：11064143
> 
> 赞同：2
> 
> 时间：2012-06-16T14:12:04.000
> 
> 标签：ruby-on-rails

`validates_confirmation_of`我的 Rails 应用程序 似乎坏了。

我的模型如下所示：

```
class Blark
  include ActiveModel::Validations
  attr_accessor :text
  validates_confirmation_of :text
end 
```

这是我使用它时发生的情况：

```
0 HAL work/nrb-brewery-management % rails c
Loading development environment (Rails 3.2.5)

1.9.3p0 :001 > b = Blark.new
 => #<Blark:0xae2e2d0> 

1.9.3p0 :002 > b.text = 'llama'
 => "llama" 

1.9.3p0 :003 > b.text_confirmation
 => nil 

1.9.3p0 :004 > b.valid?
 => true 
```

为什么`b`在这里有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T14:28:06.167

[Rails 文档](http://ar.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#M000081)指出：

“注意：仅当 password_confirmation 不为零时才执行此检查，并且默认情况下仅在保存时执行。要要求确认，请确保为确认属性添加存在检查：”

因此，为您的班级添加存在检查，例如

```
class Blark
  include ActiveModel::Validations
  attr_accessor :text
  validates_confirmation_of :text
  validates_presence_of :text, :text_confirmation
end 
```

# php - 获取 ? 之后的值 URL 中的运算符

> ID：11064144
> 
> 赞同：0
> 
> 时间：2012-06-16T14:12:14.543
> 
> 标签：php

我想获得“？”之后的值。运算符，例如：

```
www.blabla.com/any.php?h r u 
```

我想得到这个值“hr u”，并在我的数据库中搜索这个键。我已经尝试过这个：

```
$_SERVER["QUERY_STRING"] 
```

这个函数工作正常，但是当我搜索这些值时，它在我的数据库中从这个查询中打印出这样的“h%20r%20u”：

```
$query="SELECT * FROM databasename WHERE colum LIKE'%$link%'"; 
```

它将打印链接这个“h%20r%20u no record found”，我的数据库找不到这个值。我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T14:13:57.407

查看[urldecode](http://php.net/urldecode)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:33:12.947

正如所指出的，您应该使用`urldecode($string)`. 对于 SQL 注入，只需转义查询中的值：

```
$link = mysql_real_escape_string(urldecode($_SERVER["QUERY_STRING"]));
$query="SELECT * FROM databasename WHERE colum LIKE'%$link%'"; 
```

如果您使用**mysql**或**mysqli**进行查询。如果您使用`PDO::quote`PDO，请改为转义。

# haskell - 将 Parsec 与 Yesod 一起使用：cabal 依赖项错误

> ID：11064151
> 
> 赞同：0
> 
> 时间：2012-06-16T14:13:09.980
> 
> 标签：haskell, cabal, yesod

我想在 Yesod 项目中使用 Parsec，但得到一个 cabal 错误。

这是我添加到代码中的内容：

```
import Text.ParserCombinators.Parsec 
```

得到这个错误：

```
Could not find module `Text.ParserCombinators.Parsec' 
```

所以我在我的 .cabal 文件中添加了“parsec”，最后得到了这个错误：

```
cabal: Could not resolve dependencies:
trying: Blackbox-0.0.0 (user goal)
trying: parsec-3.1.3/installed-6a5... (dependency of Blackbox-0.0.0)
trying: warp-1.2.1.1/installed-638... (dependency of Blackbox-0.0.0)
next goal: network (dependency of warp-1.2.1.1/installed-638...)
rejecting: network-2.3.0.11/installed-b9c... (conflict:
parsec==3.1.3/installed-6a5..., network => parsec==3.1.2/installed-a67...)
rejecting: network-2.3.0.10/installed-e97... (package is broken)
rejecting: network-2.3.0.14, 2.3.0.13, 2.3.0.12, 2.3.0.11, 2.3.0.10, 2.3.0.9,
2.3.0.8, 2.3.0.7, 2.3.0.6, 2.3.0.5, 2.3.0.4, 2.3.0.3, 2.3.0.2, 2.3.0.1, 2.3,
2.2.1.10, 2.2.1.9, 2.2.1.8, 2.2.1.7, 2.2.1.6, 2.2.1.5, 2.2.1.4, 2.2.1.3,
2.2.1.2, 2.2.1.1, 2.2.1, 2.2.0.1, 2.2.0.0, 2.1.0.0, 2.0, 2.2.3.1, 2.2.3
(conflict: warp => network==2.3.0.11/installed-b9c...) 
```

任何想法这里出了什么问题？

编辑：这是一个全新的 Yesod 安装（包括 cabal 更新），它在添加任何与 parsec 相关的内容之前工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:02:35.357

```
rm -Rf ~/.cabal && rm -Rf ~/.ghc 
```

并重新安装一切解决了问题。

我真的希望我了解安装 haskell 包的情况...

# java - 是否可以从远程服务器连续获取文件内容

> ID：11064155
> 
> 赞同：1
> 
> 时间：2012-06-16T14:13:45.633
> 
> 标签：java, remote-access

我知道在本地可以逐行获取文件内容。就像

```
Scanner s = new Scanner(new File("D:\\Users\\qding\\Desktop\\spy.log"));
    while (s.hasNextLine()) {
        String line = s.nextLine();
        System.out.println("[Method Server] " + line);
} 
```

是否可以从远程（Windows/Linux）获取文件内容？

此外，在远程，该文件是一个日志文件，并且总是更新。所以第二个问题是是否可以连续归档内容（使用多线程？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:46:21.453

**A1**。是的，可以从远程系统获取文件内容，只要它可以通过任何协议访问。

**A2**。在 unix 系统上，要读取不断变化的文件的内容，我们有`tail -f ...`命令。请参阅[*文件监控*](http://en.wikipedia.org/wiki/Tail_%28Unix%29#File_monitoring)。要通过网络读取此类文件，您肯定需要 Threads 的帮助来等待和读取更新。Apache commons 有自定义[*`tail`*](http://commons.apache.org/io/api-release/org/apache/commons/io/input/Tailer.html)的实现可以帮助你。

您可以参考SO 上[***的类似帖子***](https://stackoverflow.com/questions/557844/java-io-implementation-of-unix-linux-tail-f)，以获得详细的建议和讨论。

**更新**：
**A2**：对于 Windows，Win32 有一个第三方 GUI 工具[*Tail*](http://tailforwin32.sourceforge.net/)，但我从未研究过它。
您还可以参考[*Windows 上的更多建议……相当于“tail -f”？*](https://superuser.com/questions/68703/windows-xp-equivalent-of-tail-f).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:43:04.567

好吧，让我试着回答这个问题，

1.  我假设您已经使用 Socket 与服务器通信。

2.  使用`socket.shutdownOutput()`("socket" in socket.shutdownOutput() 标识服务器地址和端口号) `on the client side`，因为您不需要写东西但需要继续从服务器读取。

3.  如果您还要处理服务器部分，请确保对服务器的每个请求都在其自己的线程上运行。

4.  现在在客户端使用下面的链接从服务器上的“文件”中读取

    [http://www.java-samples.com/showtutorial.php?tutorialid=215](http://www.java-samples.com/showtutorial.php?tutorialid=215)

# java - 图像与纹理大小 LWJGL

> ID：11064156
> 
> 赞同：1
> 
> 时间：2012-06-16T14:13:48.017
> 
> 标签：java, opengl, lwjgl, slick2d

## 第一场景

1.  加载了一个纹理`Stick-util.jar`，其中图像大小 = *50x50* & 纹理大小 = *64x64*。
2.  绑定纹理并绘制一个大小为*64x64*的 Quad 。并给出一个大小为*50x50*的图像。

大小为*50x50的网格*

![大小为 50x50 的网格](../Images/73323fafeea9fd223a91bfa20a7d2149.png)

## 第二景

1.  加载图像大小 = 180x50 的另一个纹理，但纹理大小 = 256x64

## 问题

很明显，`slick-util`将纹理大小转换为 2 的幂。绑定时，绘制其原始大小。（默认）

但是**为什么&如何**？第二个纹理的宽高比不等于图像大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T18:02:31.290

**为什么**只是因为一些较旧的 GPU 仅支持二次幂纹理。

**很难**回答，因为它是特定于实现的。它要么使用 texcoords 仅显示来自初始图像的纹理部分，要么使用 alpha=0 的纹素填充额外的纹理空间，这些纹素在绘制时会被拒绝。不过我只是猜测。

# jquery - 如何修改 iContact 注册表单，使其不会重定向到其他页面？

> ID：11064158
> 
> 赞同：1
> 
> 时间：2012-06-16T14:14:11.177
> 
> 标签：jquery, html, ajax, forms

我正在尝试修改标准 iContact 注册表单，有人会在网站上填写该注册表单以加入邮件列表。默认情况下，代码会在用户尝试注册后将其重定向到成功或错误页面。

我想要做的不是重定向用户并且不重新加载页面：如果用户成功提交表单，表单字段应该消失并且“感谢加入！” 消息类型应该出现在表单以前的位置（无需重新加载页面）。

我是编程新手，但我很确定我可以使用 jQuery 和 AJAX 完成此任务。我试过弄乱它，但我以前从未使用过 AJAX，所以我还没有成功。任何帮助将不胜感激。

这是 HTML 页面上的表单代码（我替换了我的帐户信息）：

```
<form method="post" action="https://app.icontact.com/icp/signup.php" name="icpsignup" id="icpsignupZZZZ" accept-charset="UTF-8" onsubmit="return verifyRequiredZZZZ();" >
<input type="hidden" name="redirect" value="http://www.yoursite.com/newsletter/accepted.html" />
<input type="hidden" name="errorredirect" value="http://www.yoursite.com/newsletter/error.html" />

<div id="SignUp">
<table width="212" class="signupframe" border="0" cellspacing="0" cellpadding="5">
<tr>
  <td width="114" align="right" valign="top">
    <font size="1" face="Arial,Helvetica, sans-serif">*</font> <font size="2">First Name:</font>
  </td>
  <td width="78" align="left">
    <input name="fields_fname" type="text" size="13" maxlength="100" />
  </td>
</tr>
<tr>
  <td valign="top" align="right">
    <font size="1" face="Arial,Helvetica, sans-serif">*</font> <font size="2">E-mail:</font>
  </td>
  <td align="left">
    <input name="fields_email" type="text" size="13" maxlength="100" />
  </td>
</tr>
<tr>
  <td colspan="2"> <font size="1">*</font><font size="2"> = Required Field</font></td>
  </tr>
<tr>
  <td colspan="2"> <input type="image" name="Submit" value="Submit"  src="../images/join-hdr.jpg" alt="Join our E-mail List" /></td>
  </tr>
</table>
<input type="hidden" name="listid" value="XXXXX" />
<input type="hidden" name="specialid:XXXXX" value="ZSMM" />
<input type="hidden" name="clientid" value="YYYYYY" />
<input type="hidden" name="formid" value="ZZZZ" />
<input type="hidden" name="reallistid" value="1" />
<input type="hidden" name="doubleopt" value="0" />
</div>
</form>
<script src="../Scripts/icontact.js" type="text/javascript"></script> 
```

这是表单引用的脚本的代码：

```
var icpFormZZZZ = document.getElementById('icpsignupZZZZ');

if (document.location.protocol === "https:")

    icpFormZZZZ.action = "https://app.icontact.com/icp/signup.php";
function verifyRequired2745() {
  if (icpFormZZZZ["fields_fname"].value == "") {
    icpFormZZZZ["fields_fname"].focus();
    alert("The First Name field is required.");
return false;
  }
  if (icpFormZZZZ["fields_email"].value == "") {
    icpFormZZZZ["fields_email"].focus();
    alert("The E-mail field is required.");
    return false;
  }

return true;
} 
```

如果您需要任何其他信息，请告诉我。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:23:03.223

我不知道如何做我上面问的。不过，我确实想出了一个解决方案：

从页面的最初可见部分中删除了表单。然后，我创建了一个当用户单击“加入我们的电子邮件列表”类型的图形时生成的 fancyBox（其中包含一个 iframe）。然后，在用户提交了fancyBox 中的表单后，他们会被重定向到一个成功页面，但该页面是在fancyBox 中生成的。然后用户可以关闭 fancyBox 并返回到他们所在的页面。这对我很有用，因为用户没有被重定向。

希望这对其他人也有帮助！

# database - 为什么需要单独的索引表

> ID：11064166
> 
> 赞同：1
> 
> 时间：2012-06-16T14:15:29.163
> 
> 标签：database, indexing

我正在阅读有关数据库中的索引的信息。

首先，我有我原来的桌子。然后我添加另一个表（索引表），每次我在第一个表中添加一行时，我都会努力知道将其插入索引表的位置（按字母顺序）。然后，当我搜索一些记录时，我使用索引表，它将我的搜索问题转换为 O(log) 而不是 O(n)。

我的问题如下：为什么不在原始表中做这件事？至少如果该表只有一个索引。如果它有更多，那么应用索引表的想法。至少我读过的文献中从未提到过这个想法，我想也许有一个很好的理由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:27:12.550

这篇文章有一些非常有用的链接：[sql server 中的索引、索引的内部工作和结构](https://stackoverflow.com/questions/5402112/indexes-in-sql-server-internal-working-and-structure-of-indexes)

简短的回答：表上的聚集索引不应该创建单独的映射，因为它会对原始表本身进行排序。其他索引将创建到集群索引的行 ID 的映射。根据您正在阅读的数据库，这可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:20:50.553

这不是通常在数据库上完成索引的方式——通常一个表有它的索引，当查询允许时，数据库服务器会自动尝试使用最好的索引——例如，如果你有一个`Name`列索引，并且你做一个选择如果名称是完全匹配（`= 'foo'`），它将使用您的索引；如果您进行了以特定字符串 ( `LIKE 'foo%'`) 开头的查询，它可能会选择使用您的索引；而如果您在索引列包含子字符串 ( `LIKE '%foo%'`) 的情况下进行查询，则它不能使用该索引，并且必须扫描整个表。

# jquery - 具有可变输入字段长度的 Jquery 字符限制

> ID：11064169
> 
> 赞同：-1
> 
> 时间：2012-06-16T14:15:54.007
> 
> 标签：jquery, character

我正在用另一个输入字段镜像一个输入字段。

如果你看看这个 [http://jsfiddle.net/bloodygeese/tQm8G/7/](http://jsfiddle.net/bloodygeese/tQm8G/7/)

我需要让用户输入与显示区域一样多的字符

例如：

现在显示的显示字段将允许说 50 个字符，因为它是 200px 宽，但用户可能会单击一个按钮，使其只有 100px 宽，那么它只能容纳 25 个字符？

因此，输入区域的长度始终相同，但显示区域的大小会改变，并且必须允许填充字符。

希望这一切都有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:54:50.497

概念很有趣，所以我创建了一个插件函数来确定最大字母。该插件在屏幕外插入一个测试跨度，然后不断添加字母“O”，直到跨度宽度超过输入宽度。您可以在选项中传递 css 对象映射以帮助提高测试宽度。插件需要扩展一点以添加您想要的功能，这在原始帖子中并不清楚

由于尚不清楚您希望它最终如何工作，因此目前仅在达到最大值时发出警报

演示：http: [//jsfiddle.net/tQm8G/10/](http://jsfiddle.net/tQm8G/10/)

```
$.fn.maxLetters = function(options) {
    defaults = {
        testLetter: 'O',//
        widthBuffer: 30,// allows for some padding left/right
        css: null,
        events : 'keyup' // space seperated as in on() API
    }
    var $test_el = $('<div style="position:absolute; left:-999em"><span id="max_letter_test"></span></div>');
    var opts = $.extend({}, defaults, options);
    return this.each(function() {
        var $input = $(this);

        $('body').prepend($test_el);
        if( opts.css){
            $test_el.css( opts.css);
        }

        var maxW = $input.width() - opts.widthBuffer;
        currW = 0, test_text = '', $test = $('#max_letter_test'), maxLetters = 0;

        while (currW < maxW) {
            test_text += opts.testLetter;
            $test.text(test_text);
            currW = $test.width();
            maxLetters++;
        }
        $test_el.remove();
        $input.data('max_letters', maxLetters).on(opts.events, function() {
            var max = $(this).data('max_letters')
            if ($(this).val().length >= max) {
                alert('Max letters(' + max + ') reached')
            }
        });

    });
} 
```

示例用法：

```
$('#inputarea').maxLetters({css:{fontSize: '20px'}});
$('#inputarea2').maxLetters({css:{fontSize: '20px'}, widthBuffer:0}); 
```

# java - 获取 json 对象的 NullPointerException

> ID：11064173
> 
> 赞同：1
> 
> 时间：2012-06-16T14:16:42.180
> 
> 标签：java, android

我在`JSONObject json = userFunctions.uploadFileData(guid, photoName);`下面的代码中不断收到 NullPointerException 错误。我不知道为什么会出现此错误。请帮助我如何解决这个问题。

这是我的代码

这是发生此错误的方法

```
public boolean fileData(String guid, String photoName) {
    Toast.makeText(getApplicationContext(), photoName, Toast.LENGTH_LONG).show();

    JSONObject json = userFunctions.uploadFileData(guid, photoName);

    try {
        if(Integer.parseInt(json.getString("success")) != 1) {
            Toast.makeText(getApplicationContext(), json.getInt("error_msg"), Toast.LENGTH_LONG).show();
            //register_error.setText(json.getString("error_msg"));
            return false;
        }
    } catch (NumberFormatException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return true;
} 
```

这是我的上传文件数据方法

```
public JSONObject uploadFileData(String uid, String photoName) {
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", file_tag));
    params.add(new BasicNameValuePair("uid", uid));
    params.add(new BasicNameValuePair("photoName", photoName));
    JSONObject json = jsonParser.getJSONFromUrl(url, params);
    Log.e("Some",json.toString());
    return json;
} 
```

这是我的 JSONParser 类

```
public class JSONParser {
static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();
        String line = null;

        while((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }

        is.close();
        json = sb.toString();
        //Log.e("JSON", json);
    } catch (Exception e) {
        //e.printStackTrace();
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    return jObj;
}
} 
```

这是我的日志猫

```
06-16 17:03:47.890: E/AndroidRuntime(12364): FATAL EXCEPTION: main
06-16 17:03:47.890: E/AndroidRuntime(12364): java.lang.NullPointerException
06-16 17:03:47.890: E/AndroidRuntime(12364):    at com.zafar.login.Camera.fileData(Camera.java:216)
06-16 17:03:47.890: E/AndroidRuntime(12364):    at com.zafar.login.Camera$2.run(Camera.java:186)
06-16 17:03:47.890: E/AndroidRuntime(12364):    at android.os.Handler.handleCallback(Handler.java:587)
06-16 17:03:47.890: E/AndroidRuntime(12364):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-16 17:03:47.890: E/AndroidRuntime(12364):    at android.os.Looper.loop(Looper.java:130)
06-16 17:03:47.890: E/AndroidRuntime(12364):    at android.app.ActivityThread.main(ActivityThread.java:3691)
06-16 17:03:47.890: E/AndroidRuntime(12364):    at java.lang.reflect.Method.invokeNative(Native Method)
06-16 17:03:47.890: E/AndroidRuntime(12364):    at java.lang.reflect.Method.invoke(Method.java:507)
06-16 17:03:47.890: E/AndroidRuntime(12364):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
06-16 17:03:47.890: E/AndroidRuntime(12364):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
06-16 17:03:47.890: E/AndroidRuntime(12364):    at dalvik.system.NativeStart.main(Native Method)
06-16 17:03:55.115: I/Process(12364): Sending signal. PID: 12364 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:22:36.093

如在异常堆栈跟踪中 userFunctions 是最后一个函数（在您的应用程序中），因此根据代码 userFunctions 可能为空，因为 json 不能成为原因，因为您在 uploadFileData 中使用 json.toString() 但跟踪直到那里...... .

# sql - 在 Linq 中使用 IsNull 或选择 COALESCE ..？

> ID：11064177
> 
> 赞同：-3
> 
> 时间：2012-06-16T14:17:25.703
> 
> 标签：sql, sql-server, linq, tsql, linq-to-sql

> **可能重复：**
> [LINQ 中的 SQL ISNULL 等价物？](https://stackoverflow.com/questions/413084/equivalent-of-sql-isnull-in-linq)

我有 3 个这样的表：

评论表：

```
commentId pid    sid       text      vid
1          1     null    comment 1    1
2         null    1     comment 2    1
3          2     null    comment 3    1 
```

学生桌

```
sid     firstname   lastname
1         john       adam
2         joan       adam 
```

教授桌：

```
pid    firstname   lastname
1       mark        abram
2       sean        hoak 
```

我想进行查询，以便返回这样的结果：

```
firstname    lastname
mark          abram
john          adam
sean          hoak 
```

米

```
if (select query ==null) then (selec query 1) else select (query 2) 
```

我尝试了以下方法：

```
if((select pid from comment==null)
then select student.firstname , student.lastname from student where sid in (select sid from comment where vid=1)

else
(select professor.firstname ,professor.lastname from professor where pid in (select pid from comment where vid=1) 
```

但没有用

然后其他人提供了这个解决方案查询

IsNull 查询

```
SELECT ISNULL(P.firstname, s.firstname) AS Expr1,ISNULL(P.lastname, s.lastname) AS Expr2
FROM comment AS C 
    LEFT OUTER JOIN professor AS P ON P.ID = C.PID 
    LEFT OUTER JOIN student AS s ON s.ID = C.SID
WHERE (C.VID = 2) 
```

合并：

```
 SELECT COALESCE(p.firstname, s.firstname), COALESCE(p.lastname, s.lastname)
  FROM comment c
  LEFT JOIN Professor p
  ON c.pid = p.id
 LEFT JOIN Student s
  ON c.sid = s.id
   WHERE c.vid = 2 
```

两者都可以在 SQL Management 中正常工作，但在 Linq 中具有：

```
ObjectQuery<string> results1 = context.CreateQuery<string>(query1, parameters) 
```

我试图将它自己转换为：

```
var qry = from c in ctx.comment
  join p in ctx.professor
  on c.PID equals p.ID into tree
  join s in ctx.student
  on c.SID equals s.ID into tree1
  where c.VID == vID
  from tmp in tree.DefaultIfEmpty()
  from tmp1 in tree.DefaultIfEmpty()
  select new
  {
      Firstnmae = tmp.firstname ?? tmp1.firstname,
      LastName = tmp.lastname ?? tmp1.lastname
  }; 
```

但它返回 null

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T14:25:33.000

看来你附近有错字`tmp1`，你应该这样做`tree1.DefaultIfEmpty()`

```
 var qry = from c in ctx.comment
      join p in ctx.professor
      on c.PID equals p.ID into tree
      join s in ctx.student
      on c.SID equals s.ID into tree1
      where c.VID == vID
      from tmp in tree.DefaultIfEmpty()
      from tmp1 in tree1.DefaultIfEmpty()
      select new
      {
          Firstnmae = tmp.firstname ?? tmp1.firstname,
          LastName = tmp.lastname ?? tmp1.lastname
      }; 
```

# php - PHP PDO Fetch_Assoc 未正确返回

> ID：11064182
> 
> 赞同：3
> 
> 时间：2012-06-16T14:18:30.147
> 
> 标签：php, pdo

我已经搜索过了，也许我正在寻找错误的东西，但我需要以下代码的帮助。我肯定错过了什么...

数据库类：

```
 class Database {
    private static $link = null;

    private static function dbLink() {
        if(self::$link) {
            return self::$link;
        }

        $dsn = null;

        switch(DB_DRVR) {
            case 'mysql':
                $dsn = DB_DRVR . ":host=" . DB_HOST . ";dbname=" . DB_NAME;
                break;
        }

        self::$link = new PDO($dsn, DB_USER, DB_PASS);

        return self::$link;
    }

    public static function fetchAssoc($sql) {
        $stmt = self::query($sql);
        $result = array();

        $result = $stmt->fetch(PDO::FETCH_ASSOC);

        return $result;
    }

    public static function __callStatic($name, $arguments) {
        $callback = array(self::dbLink(), $name);
        return call_user_func_array($callback, $arguments);
    }
} 
```

返回错误的部分代码：

```
 $sql = "SELECT group FROM users WHERE username='ryan';";
        $dbSQL = Database::fetchAssoc($sql);

        echo $dbSQL['group']; 
```

数据库设置：

> *   id（自动增量，主要）
> *   名称（小文本）
> *   用户名（小文本）
> *   密码（小文本）
> *   盐（小文本）
> *   电子邮件（小文本）
> *   组（小文本）
> *   特权（小文本）

我收到以下错误：

```
Fatal error: Call to a member function fetch() on a non-object
in C:\public_html\kernel\database.php on line 38 
```

但是奇怪的是，如果我将 SQL 更改为：

```
$sql = "SELECT * FROM users WHERE username='ryan';"; 
```

我没有收到错误，它显示正确，如果我将 SQL 语句更改为：

```
$sql = "SELECT username FROM users WHERE username='ryan';"; 
```

并调用 $dbSQL['username'] 使用上面的函数可以正常工作。

我的问题：当我尝试使用 $dbSQL 数组中的“组”列时，为什么会收到错误消息，但是当我尝试使用“用户名”列时，一切运行正常。我错过了什么？

谢谢，瑞安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T14:21:03.020

```
SELECT `group` FROM users WHERE username='ryan' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:21:47.603

`GROUP`是 SQL 中的保留关键字，如果使用它，您的查询会产生错误。引用它：

```
SELECT `group` ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T14:30:08.723

在我看来，您的查询好像失败了，因为您的 RDBMS 保留了这个词`group`。

为避免将来出现此类问题：

实施一些错误检查，您会从数据库服务器中看到关于哪个查询失败的线索。有几种方法可以做到这一点：

*   [`self::errorInfo()`](http://php.net/manual/en/pdo.errorinfo.php) 确保在运行每个查询（打印或记录输出）后检查您的代码。
*   将您的错误模式切换为`PDO::ERRMODE_EXCEPTION`. 请参阅有关[错误和错误处理的手册页](http://uk.php.net/manual/en/pdo.error-handling.php)

# python - 在python中的一行中动态打印字符串

> ID：11064185
> 
> 赞同：2
> 
> 时间：2012-06-16T14:19:11.753
> 
> 标签：python, command-line, printing, line

我正在尝试在一行中打印字符串。

我找到了解决方案，但它们不能正确使用 Windows。

我有包含名称的文本文件，我想像这样打印它们

`name=john`然后将 john 更改为下一个名称并保留`name=`，我已经制作了这段代码，但在 windows 上无法正常工作：

```
op = open('names.txt','r')
print 'name=',
for i in op.readlines():
    print '\r'+i.strip('\n') 
```

感谢您的时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T14:25:43.500

在这种情况下，简单地使用`\r`是行不通的，因为这会让你回到行首，所以你必须重新打印整行。此外，在某些系统（包括 Windows，我认为）中，Python 的`print`语句（3+ 中的函数）解释`\r`为换行符。我相信这段代码*应该*是系统独立的。

```
import sys, time

with open('names.txt', 'r') as names:
    prev_len = 0
    for name in names:
        sys.stdout.write('\r' + ' ' * prev_len)
        sys.stdout.flush()
        output_string = '\rname={}'.format(name.strip())
        prev_len = len(output_string)
        sys.stdout.write(output_string)
        sys.stdout.flush()
        time.sleep(0.3)
print 
```

您也可以使用`\b`，它通常将光标向后移动一个空格。

正如您所指出的，有必要用空格覆盖先前打印的行，这意味着有必要记住前一行的长度。我认为将这种状态封装在一个对象中是有意义的。这是一个比上面使用该策略的更清洁的解决方案：

```
import sys, time

class LineUpdater(object):
    def __init__(self, outfile=None):
        self.prev_len = 0
        self.outfile = sys.stdout if outfile is None else outfile

    def write(self, line):
        line = line.strip()
        output = '\r{:<{width}}'.format(line, width=self.prev_len)
        self.prev_len = len(line)
        self.outfile.write(output)
        self.outfile.flush()

with open('names.txt', 'r') as names:
    out = LineUpdater()
    for name in names:
        out.write('name={}'.format(name))
        time.sleep(0.3)
    print 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:03:32.793

按照 senderle 的建议使用 '\b'

```
import sys
import time

sys.stdout.write('name=')
last_lenght = 0
with open('names.txt') as names:
    for name in names:
        sys.stdout.write('\b' * last_lenght)    # go back
        sys.stdout.write(' ' * last_lenght)     # clear last name
        sys.stdout.write('\b' * last_lenght)    # reposition
        sys.stdout.write(name.strip())
        sys.stdout.flush()
        last_lenght = len(name.strip())
        time.sleep(0.5) 
```

# c# - 浮动面板（与对齐重叠）

> ID：11064187
> 
> 赞同：2
> 
> 时间：2012-06-16T14:19:59.277
> 
> 标签：c#, wpf

是否有可能在 wpf 的面板中浮动（与对齐重叠）子项。我有 4 个相互重叠的按钮。它们需要左右对齐，上下对齐，并与父容器一起增长。请查看图像以获取更多信息。

![在此处输入图像描述](../Images/f8a83c8f45ae9629784e320a620d91cb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T17:16:41.487

这个怎么样？

```
<Grid>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="2*"/>
            <RowDefinition Height="1*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <Button Grid.Row="1" Grid.Column="0" Content="Left"/>
        <Button Grid.Row="1" Grid.Column="1" Content="Right"/>
    </Grid>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>

        <Button Grid.Row="0" Grid.Column="1" Content="Top"/>
        <Button Grid.Row="1" Grid.Column="1" Content="Bottom"/>
    </Grid>
</Grid> 
```

这导致

![在此处输入图像描述](../Images/516162ba783d8ce2bbe0056724f6f082.png)

# javascript - 用 .push 对对象进行分组，然后输出到字符串

> ID：11064191
> 
> 赞同：1
> 
> 时间：2012-06-16T14:20:32.067
> 
> 标签：javascript, jquery

这里是一个非常菜鸟的问题，但我无法用我的愚蠢的大脑来解决这个问题。

我有 2 个数组：

```
var catUri = [
  { catUri : "//test.com//test1" },
  { catUri : "//test.com//test2" }
];

var catKey = [
  { catKey : "test1" },
  { catKey : "test2" }
]; 
```

我正在尝试加入数组，然后从每个对象中获取字符串以像这样创建 html...

```
<h2>Test</h2>
<ul>
  <li><a href="//test.com//test1" title="test1">test1</a></li>
  <li><a href="//test.com//test2" title="test2">test2</a></li>
</ul> 
```

我尝试了这样的合并：

```
var merge = [];
merge.push(catUri, catKey); 
```

返回：

```
[[Object { catKey="Test1"}, Object { catKey="Test2"}], [Object { catUri="//test.com//test1"}, Object { catUri="//test.com//test2"}]] 
```

这就是我开始迷路的地方（如果我还没有迷路的话）......当我尝试从推送对象中获取字符串时，我不断得到一个未定义的对象。

```
$.each(merge, function(){
  var str = '<li><a href="' + this.catUri + '" title="' + this.catKey + '">' + this.catKey + '<\/a><\/li>';
  console.log(str);
}); 
```

返回：

```
<li><a href="undefined" title="undefined">undefined</a></li>
<li><a href="undefined" title="undefined">undefined</a></li> 
```

循环遍历一个普通对象会返回我的预期结果。

```
$.each(catKey, function(){
  var str = '<li>' + this.catKey + '</li>';
  console.log(str);
});

<li>test1</li>
<li>test2</li> 
```

我可能没有正确合并这些对象。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:23:04.623

```
var merge = [],
i = 0;
$.each(catUri,function(){
    merge.push({
        catUri: catUri[i].catUri,
        catKey: catKey[i].catKey
    });
    i++;
}); 
```

输出：

```
[
    {
        catUri: "//test.com//test1",
        catKey: "test1"
    },
    {
        catUri: "//test.com//test2",
        catKey: "test2"
    }
] 
```

**JSFiddle 示例**：http: [//jsfiddle.net/7RXjw/](http://jsfiddle.net/7RXjw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:26:01.660

因此，从您的示例中，我推断出`catUri`并`catKey`通过索引关联，并且您希望将每个位置的元素从一个位置合并到另一个位置。

```
var merge = $.map(catUri, function(value, index) {
   return $.extend(value, catKey[index]);
}); 
```

那会给你

```
[{catUri: '//test.com/test1', catKey: 'test1' }, {catUri: '//test.com/test2', catKey: 'test2'}] 
```

[http://jsfiddle.net/HakedByChinese/vm69c/](http://jsfiddle.net/HackedByChinese/vm69c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T14:26:33.967

为什么需要合并这些数组？简单的单独迭代怎么样？

```
for (var i = 0; i < catUri.length; i++) {
    var uri = catUri[i].catUri;
    var key = catKey[i].catKey;
    $("<li />").append($("<a />").attr({
        title : key,
        href : uri
    }).text(key)).appendTo("ul");
} 
```

**演示：http:** [//jsfiddle.net/Yya2m/](http://jsfiddle.net/Yya2m/)

# iphone - 使用 NSOperationQueue 作为视图控制器实例变量

> ID：11064194
> 
> 赞同：0
> 
> 时间：2012-06-16T14:20:43.537
> 
> 标签：iphone, ios, cocoa-touch, nsoperation, nsoperationqueue

如果我有一个具有`NSOperationQueue`作为实例变量的视图控制器，那么如果视图控制器被卸载，队列中正在执行的任何操作会发生什么情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:49:36.973

我原来的答案中的愚蠢错误。我以前读错了这个确切的文档。真正的答案是**它没有定义会发生什么，**或者至少**没有记录**。

正如我在[这个答案](https://stackoverflow.com/a/9208543/608157)中提到的，有一些事情表明将保留操作队列（例如在执行块时保留 GCD 队列的事实）。

[这个关于自动释放 NSOperationQueue 的问题](https://stackoverflow.com/q/2500933/608157)也说了同样的话：

> 文档中没有说明释放 NSOperationQueue 时会发生什么。

*您当然可以解释“指定的操作保留在队列中，直到它完成执行”，因为队列在入队操作完成执行之前不会消失，但我仍然不会指望它。*

但是，如果您想确保它们不会执行，则可以取消操作，方法是告诉操作队列`cancelAllOperations`何时卸载视图控制器（如果您想防止这种情况）。请注意，这些操作不会由它们自己停止。他们需要检查`if ([self isCancelled]) { ... }`并停在那里。

* * *

### 原答案：

~~所有操作都将完成执行，因为它们保留了队列。从[文档`addOperation:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/addOperation:)~~

> ~~**讨论**~~
> 
> ~~添加后，指定的操作将保留在队列中，直到完成执行。~~

# c++ - 是在 Mac 上使用 libc++ 或 libstdc++ 构建的库

> ID：11064202
> 
> 赞同：13
> 
> 时间：2012-06-16T14:21:41.443
> 
> 标签：c++, macos, clang

如何判断一个库是在 mac 上使用 libc++ 还是 libstdc++ 构建的？

我一直在使用otool -L，但这似乎没有显示出来（mac没有ldd）

如果我有库 X，我想知道在从 GCC 迁移到 clang 时是否必须重建它。我已经用 GCC 构建了许多库，mac 库通常是用 clang AFAIK 构建的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-19T01:53:57.757

**静态库**：`nm -a helloworld.a | grep __1`

如果您看到包含 的行`__1`，例如`__121__basic_string`，则该库是使用 libc++ 编译的。但是，如果没有一个函数签名使用 C++ 标准库类型，那么这可能不起作用。

**动态库**：`otool -L helloworld`

寻找对 libc++ 或 libstdc++ dylib 的依赖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T15:12:38.267

对于动态库，`otool -L`将显示`libstdc++`它是否是针对该库构建的（即，如果它是 C++）。

对于静态库，这个问题没有意义。静态库不是针对其他库构建的。

而且你不应该仅仅因为你正在改变编译器而重建任何东西。只有一个系统范围的 C++ 库，它有一个稳定的 ABI。

# apache - 如何在apache中重定向？

> ID：11064205
> 
> 赞同：0
> 
> 时间：2012-06-16T14:21:51.630
> 
> 标签：apache, redirect

这应该是一个简单的问题，但我无法弄清楚。我有一个在机器上运行的网页，可以从本地网络访问。我想将在 cgi 下运行的脚本的结果重定向回我的`/var/www/index.html/`文件。我试图在我的 /etc/apache2/apache2.conf 中放置一个重定向行，但它不起作用，所以我尝试了一个更简单的任务：

```
redirect permanent /var/www/index.html http://www.google.com 
```

甚至这都行不通。

我究竟做错了什么？

我在 Ubuntu 机器上运行它。

编辑：

当我重新启动服务器时，这将添加到我的错误日志中：

```
[Sat Jun 16 17:26:36 2012] [notice] caught SIGTERM, shutting down         | * Restarting web server apache2
[Sat Jun 16 17:26:36 2012] [notice] Apache/2.2.22 (Ubuntu) configured -- \|apache2: Could not reliably determine the server's fully qualified domain \
resuming normal operations 
```

编辑：解决了一个新问题

我已经设法将网页重定向到谷歌，现在我想做实际的重定向。我已将此添加到我的`apache2.conf`文件中

```
Redirect permanent /cgi-bin/file.cgi /index.html 
```

并删除了以前的文件。该文件现在被重定向到谷歌而不是回到我的主文件......

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:31:40.613

据我所知，重定向不是基于“文件”而是基于 URL。

因此，在您的情况下，您应该尝试：

```
Redirect permanent /index.html http://www.google.com 
```

有关更多信息，请参阅 apache 文档：[http ://httpd.apache.org/docs/2.0/mod/mod_alias.html#Redirect](http://httpd.apache.org/docs/2.0/mod/mod_alias.html#Redirect)

您也可以尝试 mod_rewrite，但请记住，它适用于传入的请求/URL，而不适用于文件系统上的文件。

附言。确保在更改后重新加载配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:25:45.513

使用[.htaccess](http://httpd.apache.org/docs/2.0/howto/htaccess.html)：

```
RewriteCond %{REQUEST_URI} ^/?index\.html$
RewriteRule .* http://www.google.com [R=301,L] 
```

# jquery - jQuery UI 没有链接到我的页面（透明背景）

> ID：11064206
> 
> 赞同：0
> 
> 时间：2012-06-16T14:22:11.927
> 
> 标签：jquery, jquery-ui, codeigniter, background, datepicker

我第一次使用 jQuery，因为我想使用 datepicker。我的日期选择器工作正常，但它的背景是透明的。我已经下载了*ui-lightness*主题，并试图将它包含在 php 页面中。这是代码：

```
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
</head> 
```

我的目录结构如下所示：
¦-css
¦--ui-lightness
¦---jquery-ui-1.8.21.custom.css
¦-myPhpPage.php

**我的问题是，为什么我的 css 文件没有链接到我的 php 页面？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:41:54.510

我现在可以工作了。
我将其移至文件夹`css`上方的一个目录`application`。来源仍然是：`<link type="text/css" href="<?php echo base_url(); ?>css/ui-lightness/jquery-ui-1.8.21.custom.css" rel="stylesheet" />`

@undefined：感谢您的所有帮助！我很感激。

# c++ - 调用方法不会改变值，除非从方法本身

> ID：11064207
> 
> 赞同：1
> 
> 时间：2012-06-16T14:22:13.080
> 
> 标签：c++, pointers, reference

我试图找出我的错误。

我正在`Account`用 C++ 编写课程，其中有一些方法，如`credit()`,`debit()`等。
我写了一个`transfer()`方法，但我得到的问题是它把“钱”从账户中扣除`a1`，但没有记入`a2`. 但是，如果我在 account.cpp 中的方法本身中打印它，它确实会显示正确的结果，而主要余额保持不变。

你能看出我的错误吗？与参考、指针等有关吗？
这是主要的：

```
a1.println(); 
a2.println();
cout<< "Valid parameter " << endl;
cout<< a1.transfer(a2, 13) << endl;
a1.println();
a2.println(); 
```

这是它打印的内容：

```
(Account(65,140))
(Account(130,100))
Valid parameter 
1
(Account(65,127))
(Account(130,100)) 
```

下面是方法的定义：

```
 // withdraw money from account
    bool Account::debit(int amount){
    if (amount>=0 && balance>=amount) {
        balance=balance-amount; // new balance
        return true;
    } else {
        return false;
    }
}

// deposit money
bool Account::credit(int amount){
    if (amount>=0) {
        balance=balance+amount; // new balance
        return true;
    } else {
        return false;
    }
}

bool Account::transfer(Account other, int amount){
    if (amount>=0 && balance>=amount) {
        debit(amount);
        other.credit(amount);
        //other.println();// prints corect amount
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T14:24:08.683

这是因为您正在`Account`按值传递另一个。余额更改正常，但在帐户的不同*实例*上，这意味着副本被修改，而原始文件保持不变。

将您的代码更改为通过`Account`引用传递以使其工作。

```
bool Account::transfer(Account& other, int amount)
//                            ^
//                           HERE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:24:36.653

您没有通过引用传递“其他”

```
 bool Account::transfer(Account& other, int amount){ 
```

# ios - 在 Objective-C 中对对象进行分组

> ID：11064208
> 
> 赞同：1
> 
> 时间：2012-06-16T14:22:25.077
> 
> 标签：ios, cocoa-touch, grouping

这可能是一个愚蠢的问题，但我对 iPhone 开发并不是很有经验。

假设我有 5 个标签，l1、l2 等。我希望能够独立更改 l1 的字体大小或 l2 的颜色，这很容易。但我也希望能够将它们视为一个组，可以说一次隐藏所有它们，而不必经过 [l1 setHidden:true]、[l2 setHidden:true] 等。

有没有办法将这些项目“分组”在一起，可能是在 for 循环或数组中，或者是我不知道的东西？

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T14:28:16.963

正如丹尼尔所说，您可以使用 NSArray 来执行此操作。

示例（未经测试，只是从我的想法 - 应该工作）：

```
// Somewhere in your init method - assuming you have three labels
NSArray *labelArray = [[NSArray alloc] initWithObjects: l1, l2, l3, nil];

// Somewhere in your code
- (void) hideAllLabels
{
  for (UILabel *label in labelArray)
  { 
    [label setHidden:TRUE];
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T01:32:30.030

最简洁的方法是使用 IBOutletCollection。这是一个类似于插座的新链接，只有当您将视图添加到插座集合时，系统才会设置这些对象的数组，并且当您将项目添加到集合时，它们会自动添加到数组中。这很酷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T16:59:13.283

还有另一种方式，它们已经被分组。如果您为其中的项目调用超级视图，它会返回这些项目的数组。如果您需要确定该列表中的特定项目，您可以调用该类，或者您可以分配一个标签并在您的迭代中检测它。

```
NSArray *itemArray = [myView subviews];
for (UIView *thing in itemArray) {
  if (thing.tag == 100) {
    [thing setBackgroundColor: [UIColor clearColor]];
  }
} 
```

# css - html5.js 不适用于我的 ie 7 和 8

> ID：11064209
> 
> 赞同：-3
> 
> 时间：2012-06-16T14:22:35.407
> 
> 标签：css, html, internet-explorer

您可以在此处查看我的网站 - [http://patiss-themes.com/planetary/](http://patiss-themes.com/planetary/)并且您可以在 chrome 和其他浏览器以及 IE 9 上看到，它具有透明背景（用于内容）和圆角，但在 IE7 和IE8 包含 html5.js 之后（您可以在页面源代码中查看），它没有改变任何东西，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:36:38.347

[`html5.js`](http://remysharp.com/html5-enabling-script)只会启用新元素的样式，例如`<article>`, `<section>`, ...

它*不会*启用那些浏览器中未实现的 CSS3 效果。

# game-engine - 制作点击游戏的资源（无 Flash）

> ID：11064215
> 
> 赞同：3
> 
> 时间：2012-06-16T14:23:43.593
> 
> 标签：game-engine

我玩过许多点击式冒险游戏（断剑、山姆和麦克斯、多特、印第安纳琼斯等）。

我想了解如何制作这样的游戏。除了不太喜欢的Flash游戏之外，没有太多资源。它可以只是理论或专门面向平台的教程。我的偏好是面向 Android 等移动平台的教程，但 PC 也可以。

你们中有人有关于如何制作这样的游戏的资源吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T14:33:25.977

首先，我认为您应该阅读（或至少熟悉）“ [Amit 的游戏编程信息](http://www-cs-students.stanford.edu/~amitp/gameprog.html)”。这是一个关于游戏编程各个方面和游戏方法的巨大常见问题解答。这真的是非常有用的阅读。

那么，我相信“[如何制作冒险游戏](http://www.godpatterns.com/2010/08/how-to-make-adventure-game.html)”一文对你来说会很有趣。

此外，还有一个非常好的文档（PDF）“[冒险游戏开发的文档方法](http://www.e-ucm.es/drafts/e-UCM_draft_8.pdf)”。绝对值得一读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:28:01.747

以下是一些参考资料：

[http://www.adventuregamestudio.co.uk/](http://www.adventuregamestudio.co.uk/)

[http://opensludge.sourceforge.net/](http://opensludge.sourceforge.net/) （疯子！）

一般来说，你有一个引擎，它为你提供 IDE，然后你上传你的图形和游戏逻辑来创建你的游戏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:39:14.820

[http://www.visionaire-studio.net/](http://www.visionaire-studio.net/)是你需要的东西。一个冒险游戏引擎，易于理解。

# javascript - 现场 Magento 网站上的原型 JS 问题

> ID：11064216
> 
> 赞同：0
> 
> 时间：2012-06-16T14:23:50.087
> 
> 标签：javascript, magento, prototypejs, element

在 Magento 上关于prototype.js 的一些绝望帮助之后。

请在实时 Magento 网站上查看以下产品页面...

[http://www.showermania.co.uk/cotswold-corniche-8mm-glass-walk-in-alcove-shower-enclosure](http://www.showermania.co.uk/cotswold-corniche-8mm-glass-walk-in-alcove-shower-enclosure)

昨天工作正常，这个 Magento 网站目前似乎有自己的想法，事实证明真的很令人沮丧——我目前没有我们的开发人员可以帮助解决客户网站上的这个问题。

产品选项不起作用 快速缩放不起作用 添加到购物车不起作用

Prototype.js 错误

在页面加载

```
element.style is undefined
var value = element.style[style]; 
```

选择产品选项

```
element.tagName is undefined
var method = element.tagName.toLowerCase(); 
```

不完全确定这些 js 错误是否是这些元素无法正常工作的原因，因为我想我记得看到它们出现在 Firebug 中，即使它们运行正常。

我认为这可能是由于原型/jquery 冲突，但我什至在网站上找不到 jquery 库或被引用 - 所以不确定 noconflict var 是否是解决方案。可能与第 3 方扩展发生冲突？

任何人都可以请看一下，看看您是否可以轻松识别问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:50:10.353

设法解决 - 正如一半的怀疑，确实是 jquery 和原型之间的冲突。

通过下载 jquery 库修复 - 存储在 js/jquery 并在 page.xml 中添加以下内容

```
<action method="addJs"><script>jquery/jquery-1.7.2.min.js</script></action> 
```

确保在原型/prototype.js 之前调用它

立即修复了问题。呸！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:39:24.447

Silktide cookie 脚本什么时候开始的？我只是试图查看该站点，它花了很长时间，然后加载时没有任何样式表。Cookie js 运行，我将其关闭，刷新并加载了网站。我会先摆脱它，然后看看之后的情况如何，它正在从 googleapis url 加载最新的 jquery - 调用在 plugin.min.js 中

# ios - 如何使一个控制器的按钮动作转到另一个视图？

> ID：11064219
> 
> 赞同：0
> 
> 时间：2012-06-16T14:24:09.287
> 
> 标签：ios

我刚刚完成了 ios 教程，虽然我现在可以操作单个屏幕，但我不确定如何实现“按钮侦听器”并告诉该按钮转到我告诉它转到的另一个视图。

到目前为止，这是我的代码：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIButton *homeToLearn;

- (IBAction)homeToPlanBusiness:(id)sender;
- (IBAction)homeToLearn:(id)sender;
- (IBAction)homeToMyPlans:(id)sender;
- (IBAction)homeToSettings:(id)sender;

@end 
```

如何使这些按钮之一转到我制作的 LeanController？我想我需要制作一个 LearnView，但即使我制作了它，我该如何将它们联系在一起？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:38:54.180

我不确定您阅读了哪个 iOS 教程，但大多数教程都会向您介绍这些概念。将按钮链接到动作和在视图控制器之间转换的过程非常丰富，足以证明它自己的整个教程是合理的（并且它们就在那里，例如[Ray Wenderlich](http://www.raywenderlich.com/tutorials) ; [Stanford](http://itunes.apple.com/us/itunes-u/iphone-application-development/id384233225) ; [Lynda](http://www.lynda.com/iOS-tutorials/iOS-SDK-Essential-Training/92179-2.html) ; 只需谷歌它，你应该得到大量的点击)，我们中的任何人都无法通过简单回答您的问题来做到公正。这更加复杂，因为答案在很大程度上取决于许多不同的问题（您使用 ARC 吗？您使用故事板吗？等等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:30:34.640

在 Objective-C 中，IBActions，甚至是普通的旧实例方法，都不是“监听”的，它们被连接（字面意思是在 Interface Builder 中）到一个按钮，当它被触摸时广播一个事件。要转到另一个视图，请查看 UINavigationController 的[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)。

无论 iOS、Xcode 或 SDK 版本如何，使用 IBAction 返回值（无论如何都是 a）声明的任何方法`typedef`，`void`都会提醒界面构建器该方法现在可以连接到界面元素。在您的情况下，您将一个按钮拖到您的 XIB 的画布上。此时，在您的班级的连接选项卡下，您将其操作拖到事件发送者（在本例中为按钮）和中提琴，当笔尖未归档时，这一切都为您神奇地设置了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T14:33:02.810

您是否尝试在代码、情节提要或 IB 中执行此操作？您要针对哪个版本的 iOS？

一般来说，有两种主要方法可以完成您想做的事情。如果您希望它“基于导航”，您可以在创建导航控制器来处理不同的视图控制器后执行以下操作： `[self.navController pushViewController:newLeanController animated:YES]`

如果您只是交换视图，则可以执行以下操作： `[self.view addSubview:newLeanView]`

# ios - Phonegap 和 iPhone 应用程序

> ID：11064223
> 
> 赞同：1
> 
> 时间：2012-06-16T14:24:58.663
> 
> 标签：ios, cordova

我想构建一个 iPhone 应用程序，但我只知道 PHP、JavaScript、CSS 和 HTML。我听说我可以使用 Phonegap 在 javascript 中构建应用程序，并将 JavaScript 转换为 Objective-C。真的吗？电话间隙文档很难理解。我还有什么其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:30:31.673

是和不是。

Phonegap（现在称为[Apache Cordova](http://incubator.apache.org/cordova/)）使您能够将网页/应用程序捆绑为本地电话应用程序。它还为您提供了一些与本机电话 API 的 JavaScript 绑定，否则您将无法访问（=使用普通网页）。这些绑定包括（仅举几例）[Accelerometer](http://docs.phonegap.com/en/1.8.1/cordova_accelerometer_accelerometer.md.html#Accelerometer)、[Camera](http://docs.phonegap.com/en/1.8.1/cordova_camera_camera.md.html#Camera)和[Compass](http://docs.phonegap.com/en/1.8.1/cordova_compass_compass.md.html#Compass)。这几乎就是它所做的一切——你仍然需要弄清楚如何使用 JavaScript、HTML 和 CSS 编写你的应用程序。

通过查看[“iOS 入门”](http://docs.phonegap.com/en/1.8.1/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)来尝试它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:37:06.903

我建议使用 Phonegap，但您不能直接将 PHP 与 Phonegap 应用程序一起使用……不过，这方面有一些技巧。

虽然 Phonegap 应该是“一个代码库，到处分发”，但如果你想要一个非常漂亮的应用程序，你将不得不花一些时间来调整每个平台或设备的用户体验。我真正喜欢 Phonegap 的一点是，您可以在浏览器上本地打开一个 HTML 页面并在 firebug 中移动内容，从而加快处理速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T09:13:50.357

如果您了解您提到的所有这些语言，那么对于开发 iOS 应用程序（以及您可以在 Android 中开发相同的应用程序）来说已经足够了。

我建议您使用[PhoneGap(Cordova)](http://phonegap.com/)框架来开发这些应用程序。使用此框架，您必须使用 HTML/HTML5、JavaScript、CSS、PHP 并让 iOS 应用程序在您的设备上运行。在这里[StartWith](http://docs.phonegap.com/en/1.8.1/guide_getting-started_index.md.html)，然后查看[APIDocs](http://docs.phonegap.com/en/1.8.1/index.html)。你总是会得到很多关于谷歌本身的教程。

您还可以参考[此问题](https://stackoverflow.com/questions/5077566/platform-independent-mobile-applications)以收集有关市场上其他可用框架的一些知识。

希望能帮助到你。

# hadoop - Hadoop webhdfs curl 创建文件

> ID：11064229
> 
> 赞同：1
> 
> 时间：2012-06-16T14:25:35.060
> 
> 标签：hadoop

我使用 ubuntu 12、Hadoop 1.0.3，我使用 webhdfs curl 创建文件。

```
curl -i -X PUT "http://localhost:50070/webhdfs/v1/test.txt?op=CREATE 
```

或使用

```
curl -i -X PUT -T /home/hadoop/TestFile/test.txt "http://localhost:50070/webhdfs/v1/test?op=CREATE" 
```

两次表扬的结果是

> HTTP/1.1 307 TEMPORARY_REDIRECT

hdfs-site.xml 缺少什么？还是没有设置其他权限？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:32:57.610

根据 Web HDFS 的文档，这是预期的：

*   [http://hadoop.apache.org/common/docs/stable/webhdfs.html#CREATE](http://hadoop.apache.org/common/docs/stable/webhdfs.html#CREATE)

当您进行第一次放置时，您将获得数据节点的临时重定向 URL，然后您可以发出另一个 PUT 命令将文件实际上传到 HDFS。

该文档还解释了这种两步创建方法背后的原因：

> 请注意，有两步创建/追加的原因是为了防止客户端在重定向之前发送数据。HTTP/1.1 中的“Expect: 100-continue”标头解决了这个问题；请参阅 RFC 2616，第 8.2.3 节。不幸的是，存在软件库错误（例如 Jetty 6 HTTP 服务器和 Java 6 HTTP 客户端），它们没有正确实现“Expect: 100-continue”。两步创建/附加是软件库错误的临时解决方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-15T14:31:50.670

我知道我回复得很晚，但在这里寻找答案的任何其他人都可以看到它。嗨@Krishna Pandey，这是 WebHDFS 的新链接 [https://hadoop.apache.org/docs/r1.0.4/webhdfs.html#CREATE](https://hadoop.apache.org/docs/r1.0.4/webhdfs.html#CREATE)

您可以参考此博客的步骤和命令[https://wordpress.com/post/had00ping.wordpress.com/194](https://wordpress.com/post/had00ping.wordpress.com/194)

# ruby-on-rails - 更改 Omniauth 授权 URL

> ID：11064235
> 
> 赞同：7
> 
> 时间：2012-06-16T14:26:08.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth

我正在使用 Omniauth 和 Devise 使用该`google_oauth2`策略。它运作良好，但现在我想用我选择的东西来改变授权路径。

实际上，`http://localhost:3000/users/auth/google_oauth2`我想要一个更简单`http://localhost:3000/login`的，因为它很容易记住。

它不会引发任何错误，因为我已经禁用了可验证的设计数据库（登录的唯一方法是通过谷歌帐户）。

我能怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:43:11.450

您可以在此处查看如何更改 url 前缀[如何将omniauth 的路由从 /auth/:provider 更改为 /myapp/auth/:provider](https://stackoverflow.com/questions/10033413/how-to-change-route-of-omniauth-from-auth-provider-to-myapp-auth-provider) 所以这几乎是您所需要的。

# c# - 如何使用线程启动带参数的方法

> ID：11064236
> 
> 赞同：1
> 
> 时间：2012-06-16T14:26:12.627
> 
> 标签：c#, asp.net, multithreading, methods, arguments

对于在 C# 中创建和启动新线程，我们的行为如下：

```
using System.Threading;

Thread thread = new Thread(new ThreadStart(WorkThreadFunction));
thread.Start();

public void WorkThreadFunction()
{
  //Stuff Here
} 
```

但是带有参数的方法呢？
对于这些方法，下面的代码有错误。

```
using System.Threading;

int a = 5;
int b = 6;
Thread thread = new Thread(new ThreadStart(WorkThreadFunction(a, b)));
thread.Start();

public void WorkThreadFunction(int a, int b)
{
  //Stuff Here
} 
```

**错误 ：**

> 预期方法名称

我需要将这些参数传递给该方法！
解决办法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T14:37:00.177

使用 lambda 表达式来封装带有参数的方法调用：

```
Thread thread = new Thread(new ThreadStart(() => WorkThreadFunction(a, b))); 
```

# iphone - 防止iPhone缩放表格？

> ID：11064237
> 
> 赞同：57
> 
> 时间：2012-06-16T14:26:22.440
> 
> 标签：iphone, html, css, ios, html-select

编码：

```
<select>
    <option value="1">Home</option>
    <option value="2">About</option>
    <option value="3">Services</option>
    <option value="4">Contact</option>
</select> 
```

当我触摸`select`时，iPhone 会放大该元素（取消选择后不会缩小）。

我怎样才能防止这种情况？还是缩小回来？我不能使用`user-scalable=no`，因为我实际上需要那个功能。它适用于 iPhone，选择菜单。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-11-27T18:12:39.980

这可以通过将 font-size:16px 设置为所有输入字段来防止。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-06-16T14:30:28.067

**更新**：此方法不再适用于 iOS 10。

* * *

它取决于视口，您可以通过以下方式禁用它：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> 
```

add`user-scalable=0`它也应该适用于您的输入。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-05-29T06:53:21.700

对于 iOS，您可以通过简单地为输入元素分配操作系统认为足够的字体大小（>=16px）来避免缩放输入元素，从而避免缩放，例如：

```
input, select, textarea {
    font-size: 16px;
} 
```

它也是各种框架使用的解决方案，允许您避免使用元标记。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-16T14:33:39.850

这可能有助于查看：

[禁用自动放大输入“文本”标签 - iPhone 上的 Safari](https://stackoverflow.com/questions/2989263/disable-auto-zoom-in-input-text-tag-safari-on-iphone)

您基本上需要捕获点击表单元素的事件，然后不运行默认的 iOS 放大操作，但仍允许它缩放页面的其余部分。

编辑：

链接提到，

> 2) 您可以使用 javascript 动态更改 META 视口标记（请参阅 Enable/disable zoom on iPhone safari with Javascript?）

详细说明：

1.  视口元标记设置为允许缩放
2.  用户点击表单元素，更改元标记以禁用缩放
3.  按下完成后，视口将更改为允许缩放

如果单击表单元素时无法更改标签，请放置一个模仿表单元素的 div，当您按下它时，它会更改标签，然后调用输入。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-17T21:23:48.603

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> 
```

在 iOS10.0.1 上不再工作

`font-size:16px`作品

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-02-23T17:39:46.060

设置字体大小的投票最多的答案对我不起作用。使用[javascript 来识别客户端](https://stackoverflow.com/a/2568915/681538)以及此处答案中的元标记，我们可以防止 iPhone 在输入焦点上的缩放行为，同时保持缩放功能完好无损。

```
$(document).ready(function ()
{
    if (/iPhone/.test(navigator.userAgent) && !window.MSStream)
    {
        $(document).on("focus", "input, textarea, select", function()
        {
            $('meta[name=viewport]').remove();
            $('head').append('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">');
        });

        $(document).on("blur", "input, textarea, select", function()
        {
            $('meta[name=viewport]').remove();
            $('head').append('<meta name="viewport" content="width=device-width, initial-scale=1">');
        });
    }
}); 
```

似乎我们必须用模糊事件上的新值替换元标记，只是为了删除它似乎不会触发更新的行为。

请注意，UI 仍在初始化缩放，但它会很快再次缩小。我相信这是可以接受的，iPhone 用户一定已经习惯了浏览器在适用场景中无论如何都会进行一些动态缩放。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-04T17:56:07.233

设置字体大小非常适合输入元素，但不适用于我的选择元素。对于选择标签，我需要在用户开始与选择元素交互时主动禁用视口缩放，然后在完成时重新启用它。

```
//the mousedown event seems to be the one that does the trick, versus 'focus', because focus fires after the zoom already happens.
$('select').mousedown(function(){
  $('meta[name=viewport]').remove();
  $('head').append('<meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=0">');
})

$('select').focusout(function(){
  $('meta[name=viewport]').remove();
  $('head').append('<meta name="viewport" content="width=device-width, initial-scale=yes">' );
}) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-04T19:16:55.053

所以这是对我来说很好的最终修复。

```
    @media 屏幕和 (-webkit-min-device-pixel-ratio:0) {
      选择，
      文本区域，
      输入 {
        字体大小：16px！重要；
      }
    }

```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-17T11:08:17.483

这是 jQuery 解决方案对我来说效果很好。

```
device_type = (ua.match(/iPad/i) || ua.match(/iPhone/)) ? "touchstart" : "click";
if(device_type === "touchstart" ){
$('head').append('<style type="text/css">input,  select, textarea {font-size: 16px;}</style>');
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-07T13:21:34.877

如果您使用的是 Bootstrap，只需找到一个简单的修复方法：

如 w3s 中所述：您可以通过将**.form-group-lg**添加到元素来快速调整水平表单中的标签和表单控件的大小。

```
<form class="form-horizontal">
  <div class="form-group form-group-lg">
    <label class="control-label">Large Label</label>
    <div>
      <input class="form-control" type="text">
    </div>
  </div> 
```

请参阅此页面上的第二个示例：http: [//www.w3schools.com/bootstrap/bootstrap_forms_sizing.asp](http://www.w3schools.com/bootstrap/bootstrap_forms_sizing.asp)

在 iPhone SE 上的 Safari 和 Chrome 中对其进行了测试，效果非常棒！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-28T14:14:10.977

使用`maximum-scale=1`代替`user-scalable=no`来防止表单缩放问题，而不会破坏用户捏缩放的能力。

`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-28T21:29:07.310

我们在工作中遇到了这个问题，并找到了与[@alex](https://stackoverflow.com/users/681538/alex)类似的答案。如果它是 iOS 设备，我们可以操作 viewport 标签：

```
document.addEventListener('DOMContentLoaded', event => {
  if (/iPhone/.test(navigator.userAgent) && !window.MSStream) {
    const metaViewportTag = document.head.querySelector('meta[name="viewport"]')
    metaViewportTag.content = 'width=device-width, initial-scale=1, maximum-scale=1'
  }
}) 
```

这可以防止在 iOS 中将表单控件缩放到焦点上，并且仍然允许 Android 正常工作。

# javascript - 钛 - uisegmentedcontrol

> ID：11064239
> 
> 赞同：0
> 
> 时间：2012-06-16T14:26:27.277
> 
> 标签：javascript, ios, titanium, uisegmentedcontrol

我正在尝试用钛做一些类似于 iphone uisegmentedcontrol

我目前正在使用数组中的按钮，但如果需要进行位置移动，这不是一种有效的方法。因为位置移动需要我去每个按钮来移动它们。

所以对齐有很大的问题。

有没有办法在钛中实现uisegmentcontrol？谷歌没有给我任何与钛有关的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:40:01.643

您可以将`TabbedBar`用于此目的。

```
var segment = Titanium.UI.iOS.createTabbedBar({
    labels:['One', 'Two', 'Three'],
    backgroundColor:'#336699',
    top:50,
    style:Titanium.UI.iPhone.SystemButtonStyle.BAR,
    height:25,
    width:200
});
myWindow.add(segment); 
```

请检查这些链接以获取更多选项：

1.  [标签栏](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.iOS.TabbedBar)
2.  [按钮栏](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.ButtonBar)

# c# - 从 C# .NET 3.5 程序集访问 .NET 4.0 方法（面向 4.0 框架 (CLR) 的应用程序）

> ID：11064240
> 
> 赞同：0
> 
> 时间：2012-06-16T14:26:29.757
> 
> 标签：c#, .net, reflection

我有一个实用程序程序集“Reg.dll”，它是使用 .NET 3.5 目标框架构建的。

Reg.dll 被一些具有目标 3.5 目标框架的应用程序和其他以 4.0 为目标的较新应用程序使用（升级 3.5 应用程序目前不是一个选项，由于发布限制，但最终会发生。）我假设这意味着Reg.dll 中的代码将在运行时在 4.0 或 3.5 CLR 上下文中运行，具体取决于应用目标框架。

我现在有一种情况，我想让 Reg.dll 检测它是在 4.0 还是 3.5 CLR 中运行（如果不是 4.0，我可以假设），并执行一个仅限 4.0 的方法（Microsoft.Win32.RegistryKey .FromHandle) 如果它在 4.0 CLR 中运行。

一位同事建议构建两个程序集，一个针对 3.5，另一个针对 4.0，并在运行时动态加载相应的程序集。这听起来像是可行的，但是我怀疑这也可以使用诸如 System.Reflection 功能来检测此特定方法的存在，然后以某种方式动态调用它来完成。

这是可能的，还是我最好选择多条装配路线？我将用作模型的代码片段/引用也会很有帮助，因为我之前没有在 .NET 的这方面工作过太多。

# c++ - 更改 setPosition 时 cocos2d-x 中的粒子闪烁

> ID：11064242
> 
> 赞同：2
> 
> 时间：2012-06-16T14:26:39.273
> 
> 标签：c++, cocos2d-iphone, cocos2d-x, particles

我正在使用粒子，稍微修改 CCParticleFlower 与 positionVar 以垂直线的形式，从上到下。在 CCNode 更新中，我不断地在整个屏幕上从左到右改变粒子的位置，当它到达右侧时，我将 x 设置为 0 并开始向右滚动。

问题是当我将 X 值重置为 0 时，所有粒子都会闪烁，它们会消失大约一帧并出现在下一帧中，这会导致令人讨厌的闪烁效果。

当我将 X 值增加小数字时不会发生这种情况，但是当粒子位置重置为其起始位置时，它会在 win32、android 和 ios 上闪烁。我正在使用最新的 1.1 版本（主分支）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:51:07.207

我最近遇到了一个类似的问题，当它们的父级改变方向时，粒子会四处跳动。我不确定这是否是完全相同的问题，但这是我发现有助于解决我的问题的线程：

[http://www.cocos2d-iphone.org/forum/topic/17167](http://www.cocos2d-iphone.org/forum/topic/17167)

相关帖子：

> 我刚刚遇到了同样的问题，我花了一段时间才找到它的底部，>这是低点：不要使用
> 
> [自我计划：@selector(NextFrame:)];
> 
> 相反，使用
> 
> [自我时间表更新]；
> 
> 并重命名 NextFrame: 以更新：
> 
> 使用自定义选择器将您的更新安排在 CCScheduler 队列的最后，换句话说，它将导致您的 NextFrame: 方法在粒子系统的 update: 方法之后被调用，因为粒子系统会优先安排自己的更新方法1\. 这不好，因为粒子的四边形位置是使用发射器的当前位置更新的，然后发射器在您的 NextFrame: 方法中移动，这会导致所有粒子再次移动，因为位置发射器的位置实际上是绘制粒子的 CCNode 的位置。通过使用 scheduleUpdate，您实际上安排了 update: 方法的优先级为 0，这意味着它将在粒子系统的 update: 方法之前调用，一切都会很好。

所以基本上，在你的类中添加一个更新方法并调用 scheduleUpdate 而不是手动调度它。

# android - JSON 解析适用于 Android 4.0，但不适用于 Android < 4.0

> ID：11064244
> 
> 赞同：5
> 
> 时间：2012-06-16T14:26:58.507
> 
> 标签：android, json, parsing

> **可能重复：**
> [JSON 解析问题](https://stackoverflow.com/questions/7254962/json-parsing-problem)

我正在解析一个 JSON 文件（这是有效的）。它适用于 Android 4.0 - 4.0.4，但不适用于较旧的 Android 版本。这是我的清单的一部分：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="14" /> 
```

这是我的解析代码：

```
public JSONObject getJSONFromUrl(String url) {
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    return jObj;

} 
```

在旧设备上，我收到以下错误消息（但正如我所说，不是在新的 Android 设备上）：

> org.json.JSONException：java.lang.String 类型的值无法转换为 JSONObject

我完全不知道为什么它可以在 Android 4 上运行，但不能在旧设备上运行。

[从这里](http://pastebin.com/Jp6Z2wmX)找到 Json

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:27:54.863

解析器可能`JSONObject`在较新的 Android 版本中变得更加宽松。您收到的错误消息似乎是由于可疑的合法 JSON 造成的，尤其是在接收方：

*   [初始化 JSONObject 的问题](https://stackoverflow.com/questions/6062007/issue-initializing-a-jsonobject)
*   [JSON解析问题](https://stackoverflow.com/questions/7254962/json-parsing-problem)

我建议您将下载的 JSON 写入文件并将其与原始文件进行比较，以查看下载逻辑是否存在问题。

* * *

**更新**

我无法重现您的问题。在 Android 4.0.3.、2.3.3、2.2 和 2.1 上，使用以下活动从外部存储中加载 JSON 工作得非常好（注意：我在外部存储的路径中很懒且硬连线）：

```
package com.commonsware.jsontest;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import org.json.JSONException;
import org.json.JSONObject;

public class JSONTestActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    try {
      BufferedReader in=
          new BufferedReader(new FileReader("/mnt/sdcard/test.json"));
      String str;
      StringBuilder buf=new StringBuilder();

      while ((str=in.readLine()) != null) {
        buf.append(str);
        buf.append("\n");
      }

      in.close();
      JSONObject json=new JSONObject(buf.toString());

      ((TextView)findViewById(R.id.stuff)).setText(json.toString());
    }
    catch (IOException e) {
      Log.e(getClass().getSimpleName(), "Exception loading file", e);
    }
    catch (JSONException e) {
      Log.e(getClass().getSimpleName(), "Exception parsing file", e);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T04:10:53.337

这里的解决方案将解决您的问题，这是因为从服务器返回的 utf-8 编码。

[JSON解析问题](https://stackoverflow.com/questions/7254962/json-parsing-problem)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T17:13:48.793

您好，我使用了以下代码，在 2.2 中没有出现任何错误，2.3.3 代码非常简单。

```
import java.io.IOException;

import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class NannuExpActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        try {
            JSONObject jo = getJSONObjectFromUrl("http://pastebin.com/raw.php?i=Jp6Z2wmX");
            for(int i=0;i<jo.getJSONArray("map_locations").length();i++)
            Log.d("Data",jo.getJSONArray("map_locations").getJSONObject(i).getString("title"));
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public JSONObject getJSONObjectFromUrl(String url) throws ClientProtocolException, IOException, JSONException{
        JSONObject jobj = null;
        HttpClient hc = new DefaultHttpClient();
        HttpGet hGet = new HttpGet(url);
        ResponseHandler<String> rHand = new BasicResponseHandler();
        String resp = "";
        resp = hc.execute(hGet,rHand);
        jobj = new JSONObject(resp);    
        return jobj;
    }
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T17:57:47.307

通常这些是通过android中的Http连接创建json对象的以下步骤。

1.  打开连接并获得响应。
2.  获取内容并创建一个字符串生成器。
3.  将字符串生成器变成 json 数组对象（这一步你还没有做）
4.  从 json 数组对象中获取 json 对象。

我认为您错过了将 String Buffer(sb) 转换为 json 数组对象。而不是直接从字符串缓冲区创建 json 对象。我不知道它在 android 4.0 中是如何工作的。修改后的代码是

```
public JSONObject getJSONFromUrl(String url) {
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    try {
       JSONArray jObj = new JSONArray(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    return jObj;

} 
```

您可以通过传递索引值来获取 json 对象，例如，

`jObj.getJSONObject(i); /*i is a integer, index value*/`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T12:36:00.313

我为 json 使用了以下代码，对我来说它支持所有 android 版本。

```
List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
postParameters.add(new BasicNameValuePair("data", qry));
UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);

HttpPost request = new HttpPost(your url);
request.setEntity(formEntity);

HttpResponse rp = hc.execute(request);
Log.d("UkootLog", "Http status code " + rp.getStatusLine().getStatusCode());

if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK
    || rp.getStatusLine().getStatusCode() >= 600) {
  Log.d("JsonLog", "Success !!");
  String result = EntityUtils.toString(rp.getEntity());
} else {
  Log.d("UkootLog", "Failed while request json !!");
} 
```

我希望这能帮到您。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T15:45:53.263

你试过 JSONParser 吗？

这是我使用的一个例子：

```
 JSONObject json = new JSONObject();
   JSONParser jsonParser = new JSONParser(); 

    try {

        if(jsonString != null)
            json =  (JSONObject) jsonParser.parse(jsonString);

    } catch (ParseException e) {        
        e.printStackTrace();
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-19T15:41:09.790

你试过杰克逊吗？我在每个版本的 android 上都使用过它，而且效果很好。

[http://jackson.codehaus.org/](http://jackson.codehaus.org/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-25T09:23:11.087

该行中调用的变量的类型是什么`json`：`json = sb.toString();`

它是一个字符串吗？如果它是 a `JSONObject`，将其类型更改为`String`，您的代码将完美运行。

* * *

另一个注意事项是异常处理：似乎如果在构建 String 时在第一个块中引发异常，`JSONObject`则将尝试使用一些错误数据进行初始化。

* * *

无论如何试试这个（我怀疑你的下载方法有问题）：

```
public JSONObject getJSONFromUrl(String url) {
    try {
        HttpPost postMethod = new HttpPost(SERVER_URL);
        ResponseHandler<String> res = new BasicResponseHandler();
        ResponseHandler<String> res = new ResponseHandler<String>() {
            public String handleResponse(final HttpResponse response) throws HttpResponseException, IOException {
                StatusLine statusLine = response.getStatusLine();
                if (statusLine.getStatusCode() >= 300) {
                    throw new HttpResponseException(
                    statusLine.getStatusCode(),
                    statusLine.getReasonPhrase());
                }
                HttpEntity entity = response.getEntity();
                return entity == null ? null : EntityUtils.toString(entity, "UTF-8");
            }
        };

        String response = (new DefaultHttpClient()).execute(postMethod, res);
        return new JSONObject(json);
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-22T02:41:54.940

杰克逊或 GSON。

可能是那里的德语额外字符和国际化（i18n）或utf-8问题。

我会重新启动 Eclipse，做一个干净的构建，然后再试一次。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-19T21:48:25.340

我复制了您的代码并使用[http://pastebin.com/raw.php?i=Jp6Z2wmX](http://pastebin.com/raw.php?i=Jp6Z2wmX)作为您`getJSONFromUrl(String url)`方法的输入。有趣的是，我无法重现您的问题（使用 AVD 和/或 15、10 或 7 的目标 API 的几种组合）。

我确实注意到了一些事情：

*   `InputStream is`, `String json`,`JSONObject jObj`是在您的方法外部声明的`getJSONFromUrl()`，并且当在一个 API 上运行时，与另一个 API 相比，它们可能会受到代码其他部分的不同影响。

*   查看您得到的异常，很可能是由于构造函数的输入是空字符串（“”）而引发`String`的`JSONObject`。您的服务器是否有可能以某种方式为您的旧 Android 提供了不同的数据？

以下是我的建议：

*   将以下行添加到`getJSONFromUrl()`方法的顶部：

    ```
    InputStream is = null;
    String json = null;
    JSONObject jObj = null; 
    ```

*   添加一行调试代码以在最后 2 个 try-catch 块之间打印出下载的字符串，如下所示：

    ```
    // ----- cut ----
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    Log.d("getJSONFromUrl", "json=(" + json + ")");

    try {
        jObj = new JSONObject(json);
    // ----- cut ---- 
    ```

我认为在您进行上述一项或两项更改后，我们会更多地了解您的问题 :)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-19T08:03:43.887

我不太确定您为什么会收到此错误。但我也遇到过类似的问题，通过更改 charSet 解决了。尝试使用`iso-8859-1`而不是`UTF-8`.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-06-22T12:08:52.370

这肯定会奏效。在 4.0 android 版本中，我们必须创建 asynctask 以避免异常，即`NetworkOnMainThreadException`会得到。它对我来说工作正常。

```
public class Http_Get_JsonActivity extends Activity implements OnClickListener {

String d = new Date().toString();

private static final String TAG = "MyPost";

private boolean post_is_running = false;

private doSomethingDelayed doSth;

private String url = "http://192.168.1.1";
private InputStream is;
private String json;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button pushButton = (Button) findViewById(R.id.button1);
    pushButton.setOnClickListener(this);

}

@Override
protected void onPause() {
    super.onPause();
    if (post_is_running) { // stop async task if it's running if app gets
                            // paused
        Log.v(TAG, "Stopping Async Task onPause");
        doSth.cancel(true);
    }
}

@Override
protected void onResume() {
    super.onResume();
    if (post_is_running) {
        // start async task if it was running previously and was stopped by
        // onPause()
        Log.v(TAG, "Starting Async Task onResume");
        doSth = (doSomethingDelayed) new doSomethingDelayed().execute();
        // ((Button) findViewById(R.id.push_button)).setText("Resuming..");
    }
}

public void onClick(View v) {

    if (post_is_running == false) {
        post_is_running = true;
        Log.v(TAG, "Starting Async Task onClick");
        doSth = (doSomethingDelayed) new doSomethingDelayed().execute();

        // ((Button) findViewById(R.id.push_button)).setText("Starting..");
    } else {
        Log.v(TAG, "Stopping Async Task onClick");
        post_is_running = false;
        doSth.cancel(true);
        // ((Button) findViewById(R.id.push_button)).setText("Stopping..");
    }
}

private class doSomethingDelayed extends AsyncTask<Void, Integer, Void> {

    private int num_runs = 0;

    @Override
    protected Void doInBackground(Void... gurk) {

        // while (!this.isCancelled()) {
        Log.v(TAG, "going into postData");

        long ms_before = SystemClock.uptimeMillis();
        Log.v(TAG, "Time Now is " + ms_before);

        postData();

        Log.v(TAG, "coming out of postData");

        publishProgress(num_runs);

        return null;
    }

    @Override
    protected void onCancelled() {
        Context context = getApplicationContext();
        CharSequence text = "Cancelled BG-Thread";
        int duration = Toast.LENGTH_LONG;

        Toast.makeText(context, text, duration).show();

    }

    @Override
    protected void onProgressUpdate(Integer... num_runs) {
        Context context = getApplicationContext();
    }
}

/**
 * Method to send data to the server
 */

public void postData() {
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpPost = new HttpGet(url);
        System.out.println("--httppost----" + httpPost);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        System.out.println("--httpResponse----" + httpResponse);
        HttpEntity httpEntity = httpResponse.getEntity();
        System.out.println("--httpEntity----" + httpEntity);
        is = httpEntity.getContent();
        System.out.println("--is----" + is);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    try {
        JSONArray jObj = new JSONArray(json);
        System.out.println("--jObjt--" + jObj);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

}

} 
```

请享用..

# macos - 带菜单栏的后台应用程序

> ID：11064247
> 
> 赞同：2
> 
> 时间：2012-06-16T14:27:27.323
> 
> 标签：macos, cocoa

我有一个应用程序，我想从 Dock 中隐藏。因此`Application is agent (UIElement)`对`YES`.

不过，我想向用户显示一个窗口，因此我想显示一个菜单栏并在任务切换器（CMD+Tab）中显示该窗口。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:58:20.193

不是这样的，不。这就是 UIElement 含义的一部分。它可以显示窗口，但在 Dock 或应用程序切换器（由 Dock 运行）中没有菜单栏或图标。

`-[NSApplication setActivationPolicy:]`您可以使用但不能再次将 UIElement 转换为普通应用程序。

您的 UIElement 可以启动一个帮助应用程序来呈现 GUI，然后它会在完成后退出。这可能会达到您正在寻找的效果，但当然会更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:03:53.630

我不会这样做的。这不是苹果的方式，只会让人感到困惑。我猜 NSMenuItem 将是解决这个问题的好方法。

# xml - 无法使用 XML 架构和 Perl (XML::LibXML) 验证 XML

> ID：11064258
> 
> 赞同：3
> 
> 时间：2012-06-16T14:29:00.627
> 
> 标签：xml, perl, xsd, xml-libxml

xml:

```
<?xml version="1.0"?>
<workers xmlns="http://www.zoo.com" 
         xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" 
     xs:schemaLocation="http://www.zoo.com worker.xsd">
<impiegato>
    <username>mario</username>
    <password>de2f15d014d40b93578d255e6221fd60</password>
    <nome>Mario</nome>
    <sesso>F</sesso>
    <eta>23</eta>
</impiegato>
<impiegato>
    <username>maria</username>
    <password>maria</password>
    <nome>Mariaaa</nome>
    <sesso>F</sesso>
    <eta>443</eta>
</impiegato>
<impiegato>
    <username>mirco</username>
    <password>mirco</password>
    <nome>Mirco</nome>
    <sesso>F</sesso>
    <eta>27</eta>
</impiegato>
<impiegato>
    <username>martina</username>
    <password>martina</password>
    <nome>Martina</nome>
    <sesso>M</sesso>
    <eta>26</eta>
</impiegato>
<manager>
    <username>marco</username>
    <password>marco</password>
    <nome>Marco</nome>
    <sesso>M</sesso>
    <eta>25</eta>
</manager>
<manager>
    <username>giovanna</username>
    <password>zxVcGz0BPdHkY</password>
    <nome>Giovanna</nome>
    <sesso>F</sesso>
    <eta>24</eta>
</manager>
<manager>
<username>lucanervi</username>
    <password>zxePlNSDQjsxg</password>
    <nome>Luca Nervi</nome>
    <sesso>M</sesso>
    <eta>23</eta>
</manager>
</workers> 
```

XML 架构：

```
<?xml version="1.0"?>
<xs:schema
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:zoo="http://www.zoo.com"
 targetNamespace="http://www.zoo.com"
 elementFormDefault="qualified">

<xs:element name="workers" type="zoo:Tworkers"/>

<xs:complexType name="Tworkers">
<xs:sequence  maxOccurs="unbounded">
    <xs:element name="impiegato" type ="zoo:Timpiegato" minOccurs="0" />
    <xs:element name="manager" type ="zoo:Tmanager" minOccurs="0"/>
</xs:sequence>
</xs:complexType>

<xs:complexType name="Timpiegato">
<xs:sequence>
    <xs:element name="username" type ="xs:string"/>
    <xs:element name="password" type ="xs:string"/>
    <xs:element name="nome" type ="xs:string"/>
    <xs:element name="sesso" type ="xs:string"/>
    <xs:element name="eta" type ="xs:integer"/>
</xs:sequence>
</xs:complexType>

<xs:complexType name="Tmanager">
  <xs:sequence>
    <xs:element name="username" type ="xs:string"/>
    <xs:element name="password" type ="xs:string"/>
    <xs:element name="nome" type ="xs:string"/>
    <xs:element name="sesso" type ="xs:string"/>
    <xs:element name="eta" type ="xs:integer"/>
  </xs:sequence>
</xs:complexType>

</xs:schema> 
```

当我使用 XML::LibXML::Schema 验证 xml 时，我得到：

> ../xml/workers.xml:0：架构有效性错误：元素“impiegato”：不需要此元素。预期是（{http://www.zoo.com}impiegato、{http://www.zoo.com}manager）之一。

Perl代码：

```
my $parser = XML::LibXML->new;
my $doc = $parser->parse_file("../xml/workers.xml");
my $xmlschema = XML::LibXML::Schema->new( location => "../xml/worker.xsd" );
$xmlschema->validate($doc); 
```

我认为这是名称空间的问题，但不知道该怎么办。

附录：

我试图从 XML 模式中删除 elementFormDefault="qualified" 属性。现在我有相反的错误：

```
../xml/workers.xml:0: Schemas validity error : Element '{http://www.zoo.com}impiegato':
This element is not expected. Expected is one of ( impiegato, manager ). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:35:48.207

用撒克逊人验证这一点，它对我有用。我认为您运行验证的方式一定有一些错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T17:07:52.877

解决了。问题出在 perl 代码中。出于某种原因，当您使用 XML:LibXML 将节点添加到 $doc 时，内存中的该节点不会获得默认命名空间。解决了创建另一个 $doc2、解析 $doc->toString() 和验证 $doc2 的问题。

我应该在我的问题中写下我正在添加一个节点，这是我的错。

代码：

```
my $doc2 = $parser->parse_string($root->toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-18T14:13:00.023

```
use strict;
use warnings;

use XML::LibXML;

my $xml_file = 'test.xml';
my $xsd_file = 'test.xsd';
my $schema   = XML::LibXML::Schema->new(location => 
$xsd_file);
my $parser   = XML::LibXML->new;

my $tree = $parser->parse_file($xml_file);

# Valdate the XML file.
eval { $schema->validate($tree) }; 
if ( $@ ) { 
warn "xmlfile failed validation\n$@" if $@;
} 
else { 
 print "Valide XML\n"; 
 } 
```

# sql - 根据查询请求生成 Oracle SQL 文件

> ID：11064259
> 
> 赞同：2
> 
> 时间：2012-06-16T14:29:01.520
> 
> 标签：sql, oracle, export

我正在使用 shell 脚本调用 Oracle sqlplus，并且我想将查询结果导出到 sql 文件。

这个请求给了我很多价值：

```
SELECT * FROM CUST_TABLE WHERE  CUST_CITY = 'San Fran'; 
```

我希望我的脚本生成一个这样的 sql 文件：

```
evariste@Unix-Server$cat first_query_result.sql

INSERT INTO CUST_TABLE (COLUMN_1, COLUMN_2, ....)
VALUES (CUST1_COLUMN_1, CUST1_COLUMN_2, ...);
INSERT INTO CUST_TABLE (COLUMN_1, COLUMN_2, ....)
VALUES (CUST2_COLUMN_1, CUST2_COLUMN_2, ...);
INSERT INTO CUST_TABLE (COLUMN_1, COLUMN_2, ....)
VALUES (CUST3_COLUMN_1, CUST3_COLUMN_2, ...); 
```

关于如何在我的脚本中执行它的任何想法（我对 Oracle 和 SQL 有一点背景）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T16:42:39.510

沿着这些思路，也许：

```
sqlplus -silent uid/pw@db <<+EOF
set heading off
set feedback off
set pagesize 0
set linesize 32000
set trimspool on
set termout off
set echo off
set verify off
set sqlblanklines off
spool somefile.sql
WITH cust_table AS 
(SELECT 1 id, 'San Francisco' city, 'C1V1' col1, 'C2V1' col2 FROM dual
 UNION ALL SELECT 2, 'Los Angeles', 'C1V2', 'C2V2' FROM dual
 UNION ALL SELECT 3, 'San Jose', 'C1V3', 'C2V3' FROM dual
 UNION ALL SELECT 4, 'San Francisco', 'C1V4', 'C2V4' FROM dual)
SELECT 'INSERT INTO cust_table (id, city, col1, col2)'||CHR(10)||'VALUES ('||
       id||','''||city||''','''||col1||''','''||col2||''');'
  FROM cust_table
 WHERE city = 'San Francisco';
quit;
+EOF 
```

这会产生一个文件 somefile.sql ，其内容如下：

```
INSERT INTO cust_table (id, city, col1, col2)
VALUES (1,'San Francisco','C1V1','C2V1');
INSERT INTO cust_table (id, city, col1, col2)
VALUES (4,'San Francisco','C1V4','C2V4'); 
```

# python - Flask - 自定义装饰器破坏路由

> ID：11064263
> 
> 赞同：10
> 
> 时间：2012-06-16T14:29:21.173
> 
> 标签：python, json, decorator, flask

我有以下 Flask 路由和自定义助手：

```
from spots import app, db
from flask import Response
import simplejson as json

def json_response(action_func):
    def create_json_response(*args, **kwargs):
        ret = action_func(*args, **kwargs)
        code = 200
        if len(ret) == 2:
            code = ret[0]
            resp = ret[1]
        else:
            resp = ret[0]
        return Response(
            response=json.dumps(resp, indent=4),
            status=code,
            content_type='application/json'
        )

    return create_json_response

@app.route('/test')
@json_response
def test():
    return 400, dict(result="Test success")

@app.route('/')
@json_response
def home():
    return 200, dict(result="Home success") 
```

我希望 /test 的 GET 请求返回类似`{"result":"Test success"}`的东西，但事实并非如此。相反，任何请求似乎都匹配最后一条路线，即`home`. 为什么？

我想知道这是否是由于不同调用之间缺乏绝缘造成的`json_response`？

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T10:50:08.143

正如 Видул Петров 所说，解决方案是使用[functools.wraps](http://docs.python.org/library/functools.html#functools.wraps)：

```
import functools
def json_response(action_func):
    @functools.wraps(action_func)
    def create_json_response(*args, **kwargs):
        ...
return create_json_response 
```

原因是 Flask 的路由系统将 URL 映射到“端点”，然后将端点映射到视图函数。端点默认为`__name__`视图函数的属性。在这种情况下，装饰函数被传递给，`app.route`因此端点`create_json_response`适用于两个规则，并且在两种情况下都使用为该端点定义的最后一个视图。

functools.wraps`__name__`从原始函数中获取（和其他属性）并修复它。在装饰包装中使用它总是一个好主意。

# javascript - 在 HTML 文件中加载 json 文件

> ID：11064265
> 
> 赞同：0
> 
> 时间：2012-06-16T14:29:43.123
> 
> 标签：javascript, html, json

我有一个包含 HTML 内容的 JSON 文件。当用户单击按钮时，我想将它加载到我的主 HTML 文件中。

`ABC.json`包含：

```
<li><img src="images/picture6.jpg" /></li>
<li><img src="images/picture5.jpg" /></li>
<li><img src="images/picture4.jpg" /></li>
<li><img src="images/picture3.jpg" /></li>
<li><img src="images/picture2.jpg" /></li>
<li><img src="images/picture1.jpg" /></li> 
```

我正在使用的 Javascript 代码是：

```
$("button").click(function(){
    $.getJSON("javascript/lib/domain.json", function(data){
        console.log(data);
    });
}); 
```

不幸的是，它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T14:38:45.553

该文件`ABC.json`不包含任何有效的 JSON。

我认为值得访问[http://www.json.org/](http://www.json.org/)你会更好地了解 json 以及如何使用它。

具体来说，您会找到在不同语言的 json 中传递 html 的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T16:39:06.880

请编辑您的代码：

**abc.json**

```
"img": [
        {"src": "images/picture6.jpg"},
        {"src": "images/picture5.jpg"},
        {"src": "images/picture4.jpg"},
        {"src": "images/picture3.jpg"},
        {"src": "images/picture2.jpg"},
        {"src": "images/picture1.jpg"},
       ] 
```

**Javascript**

```
$("button").click(function(){
    $.getJSON("javascript/lib/abc.json", function(data){
        console.log(data);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T15:03:35.980

您的 .json 文件包含纯 html 而不是 JSON。为什么不使用`.html`或`.txt`代替？

或者你可以试试这个：

```
var my_html = $.parseJSON(data);
console.log(my_html); 
```

# asp.net - MVC3 Linq 选择每个类别的前 5 名

> ID：11064266
> 
> 赞同：1
> 
> 时间：2012-06-16T14:30:03.467
> 
> 标签：asp.net, asp.net-mvc-3, linq

我正在尝试在部分视图中选择并显示每个新闻类别的最近 5 次提交。新闻表具有类别 ID 作为外键。我在下面有这段代码，但它在测试中没有显示任何内容。任何人都可以提供帮助。

新闻控制器中的代码

```
public ActionResult _HomeCatNews()
{
    var info = db.News
        .GroupBy(r => r.CatId)
        .SelectMany(g => g.OrderBy(r => r.RevDate)
        .Take(5))
        .ToList();
    return PartialView();
} 
```

局部视图代码如下

```
@model IEnumerable<KPortal.Models.HomeNewzCat>
@using KPortal.Helpers

@foreach (var item in Model) {        
    <ul>
        <li>
            <div class="image">
                <a href="#">@Html.DisplayFor(modelItem => item.NewsPic)</a>
            </div>
            <div class="details">
                <h5><a href="#">@Html.Raw(Html.Truncate(item.NewsContent, 55, ""))</a></h5>
                <span class="date">
                    @Html.DisplayFor(modelItem => item.RevisionDate)
                    @Html.DisplayFor(modelItem => item.NewSource)
                </span>
            </div> 
            @Html.DisplayFor(modelItem => item.NewsTitle)
        </li>                           
    </ul>
} 
```

家NewzCat模型

```
namespace KPortal.Models
{
    public class HomeNewzCat
    {
        [Display(Name = "Category ID")]
        public int CategoryID { get; set; }

        [Display(Name = "Category")]
        public string Category { get; set; }

        [Display(Name = "Revision Date")]
        public DateTime RevisionDate { get; set; }

        [Display(Name = "News Title")]
        public string NewsTitle { get; set; }

        [Display(Name = "Story Picture")]
        public string NewsPic { get; set; }

        [AllowHtml]
        [Display(Name = "News Content")]
        public string NewsContent { get; set; }

        [Display(Name = "Source")]
        public string NewSource { get; set; }

        public DateTime Date { get; set; }
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:51:11.603

首先，将您的`<ul>`标签移出`foreach`循环，并检查是否没有返回记录

```
@if(Model != null) {
    <ul>
        @foreach(var item in Model) {
           <li>
               <div class="image">
                   <a href="#">@Html.DisplayFor(modelItem => item.NewsPic)</a>
               </div>
               <div class="details">
                   <h5><a href="#">@Html.Raw(Html.Truncate(item.NewsContent, 55, ""))</a></h5>
                   <span class="date">
                       @Html.DisplayFor(modelItem => item.RevisionDate)
                       @Html.DisplayFor(modelItem => item.NewSource)
                   </span>
               </div> 
               @Html.DisplayFor(modelItem => item.NewsTitle)
           </li>   
        }
    </ul>
} 
```

接下来我们需要建立一个`HomeNewzCat`发送到局部视图的列表

```
public ActionResult _HomeCatNews()
{
    var info = db.News
        .GroupBy(r => r.CatId)
        .SelectMany(g => g.OrderBy(r => r.RevDate)
        .Take(5))
        .ToList();

    var model = new List<HomeNewzCat>();
    HomeNewzCat record = null;

    // first make sure we have some records
    if(info.Count() > 0) {
        foreach(var item in info) {
            // you will need to modify these item.Field to match your database names
            record = new HomeNewzCat 
                         {
                             CategoryID = item.CatID,
                             Category = item.Category,
                             RevisionDate = item.RevDate,
                             NewsTitle = item.NewsTitle,
                             NewsPic = item.NewsPic,
                             NewsContent = item.NewsContent,
                             NewsSource = item.NewsSource,
                             Date = item.Date
                         };
            model.Add(record);
        }
    }
    return PartialView("_HomeCatNewz", model);
} 
```

# javascript - Dojo Widget：如何将 url 设置为小部件内的文件？

> ID：11064269
> 
> 赞同：0
> 
> 时间：2012-06-16T14:30:19.300
> 
> 标签：javascript, module, dojo, requirejs

我想在我的小部件中显示默认图像。指向位于小部件文件夹结构内的图像的最佳解决方案是什么？

require.toUrl("widgets.notes", "images/defaultAvatar.png"),

输出是：

htpp://www.example.com/widgets/main.notes 404（未找到）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:59:30.787

您的调用`require.toUrl`是虚假的，没有采用第二个参数。

鉴于您设置了“小部件”的模块路径，请改为执行以下操作：

```
 require.toUrl("widgets/notes/images/defaultAvatar.png") 
```

如果您只发送包命名空间（例如“小部件”），它将尝试使用[CommonJS 包规范](http://wiki.commonjs.org/wiki/Packages/1.1)。您会在其中一项信息中注意到标准的最低要求是：

*   main - 调用 require(name) 时必须加载的模块。定义必须相对于包描述文件。

这就是`require.toUrl("widgets")`解释。

然而，人们可以选择应该在哪里寻找包“根”。所以，如果你有：

```
/
  dojo/
  dijit/
  dojox/
  widgets/ 
```

然后你从一开始就没有交互，'widgets' 是一个全局命名空间 pr 定义。如果它不是“就地”，这就是`dojo.registerModulePath`（作为 pr 1.7 已弃用）派上用场的地方，请参阅[参考指南](http://dojotoolkit.org/reference-guide/1.7/dojo/registerModulePath.html)

如果您将其设置为另一个路径（xdomain 变得非常复杂，但是接受绝对路径），那么您将在此处执行以下两个选项之一：

首先是包的示例布局：

```
/ (webroot)
/dojo/
   dojo-release-x.y/
     dojo/
     dijit/
     dojox/
/widgets/ 
```

选项一是 dojoConfig，`window.dojoConfig`在加载 dojo.js 脚本标签之前设置

```
var dojoConfig = {
  packages: [
    {
      name: "widgets",
      location: "/widgets"  // note, 'http://mydomain.tld/widget' would work
    }
  ]
}; 
```

选项二是作为附加的第一个参数`require`，如下所示：

```
require({
  packages: [
    {
      name: "widgets",
      location: "/widgets"
    }
  ]
}, ["widgets/notes"], function(Notes) {
 ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-07T11:37:32.303

看看这个对我有用

头像：require.toUrl("widgets/MyFirstWidget/widget/images/edwin.jpg")

在括号中以单词 widgets 开头，然后是正斜杠，然后是资源的完整 url。以上面的示例为例，MyFirstWidget 是小部件的名称，而 images 是我在小部件中创建的用于存储图像文件的文件夹

# perl - Perlbrew 错误：找不到 Pod/Usage.pm

> ID：11064270
> 
> 赞同：3
> 
> 时间：2012-06-16T14:30:25.667
> 
> 标签：perl, perlbrew

我在安装 Perlbrew 时遇到问题。我收到错误消息：

> “在@INC 中找不到Pod/Usage.pm（@INC 包含：CODE(0xa031ea8) /usr/lib/perl5/5.8.8/msys /usr/lib/perl5/5.8.8 /usr/lib/perl5 /site_perl/5.8.8/msys /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl .) 在 /loader/0xa031ea8/App/perlbrew.pm 第 232 行。”

我一直在寻找答案，我看到他（她）的问题是该文件被称为 pod 而不是 Pod。(S)他刚刚重命名了文件。我怎么做？或者还有其他方法可以解决这个问题吗？我还看到其他一些人提到 Perl 是一个过时的版本。我需要更新我的 Perl 吗？如果是这样，怎么做？我对 Perl 或 Perlbrew 一无所知。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:49:55.993

在我看来，您正在使用 fatpacked perlbrew 可执行文件，它没有打包`Pod::Usage`在那里，因为它有望成为自 5.6.0 以来更新的任何 perl 发行版的一部分。我猜你的 perl 发行版只是从安装中排除了 Pod::Usage 虽然我不知道为什么。您应该能够通过手动安装来解决此问题`Pod::Usage`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:38:52.720

从 Perl 5.6.0 开始，Pod::Usage 就与 Perl 捆绑在一起。您的 Perl 安装损坏（即部分），因为它缺少该模块。

由于您的系统应该已经拥有它，因此 Pod::Usage 不像它使用的其他模块那样捆绑在 perlbrew 安装程序中。

要么先安装 Pod::Usage，要么对 perlbrew 使用正确的命令行参数（因为它会在需要显示帮助消息时加载 Pod::Usage，据我所知）。

# mysql - 从多对多关系中获取数据

> ID：11064275
> 
> 赞同：3
> 
> 时间：2012-06-16T14:30:39.253
> 
> 标签：mysql, database, many-to-many

我想从书表中获取标题，从主题表中获取某个作者的所有书籍的主题名称

这是表格关系

![在此处输入图像描述](../Images/71f04e04c86f928e914dff6bd4f801ee.png)

![在此处输入图像描述](../Images/15230165758741cea5cca4ede6fae279.png)

我试图从表格中选择标题和主题，但我无法让它与多对多关系一起使用

```
SELECT book_title,subject_name FROM book,subject WHERE $subject_ID = subject_ID INNER JOIN book_author ON author_ID = '$author_ID' 
```

我想过做两个单独的查询，如果有人可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T14:36:29.710

试试这个：

```
SELECT book_title, subject_name
FROM Book
INNER JOIN Book_Author ON Book.book_ISBN = Book_Author.book_ISBN
INNER JOIN Author ON Book_Author.author_ID = Author.author_ID
INNER JOIN Subject ON Subject.subject_ID = Book.subject_ID
WHERE author_lastname = [whatever]; 
```

并且很好地发布模型:)

编辑以匹配确切需要：

```
SELECT book_title, subject_name
FROM Book
INNER JOIN Book_Author ON Book.book_ISBN = Book_Author.book_ISBN
INNER JOIN Subject ON Subject.subject_ID = Book.subject_ID
WHERE author_ID = '11'; 
```

顺便说一句，您有一个，`"Column 'author_ID' in where clause is ambiguous"`因为此列同时出现在 Book_Author 和 Author 中。这就是为什么你必须在它前面加上表名:)

# facebook - 翻译 Facebook 应用程序

> ID：11064278
> 
> 赞同：0
> 
> 时间：2012-06-16T14:31:08.710
> 
> 标签：facebook, translation

这篇文章有一个很棒的教程，用于使用 Facebook 的内联翻译功能将您的 Facebook 应用程序翻译成多种语言：

[http://www.insidefacebook.com/2008/07/27/using-the-facebook-translation-engine/](http://www.insidefacebook.com/2008/07/27/using-the-facebook-translation-engine/)

然而，它已经过时了，帖子中的技术依赖于使用现在已弃用的 FBML 标签。

既然 FBML 已被弃用，那么使用 facebook 翻译功能的正确方法是什么？

# sqlite - 我需要将 hh:mm:ss 转换为秒

> ID：11064279
> 
> 赞同：1
> 
> 时间：2012-06-16T14:31:28.973
> 
> 标签：sqlite

我有一列包含经过的时间值，它们的格式为 hh:mm:ss 或 mm:ss。当数据被导入时，我无法控制这一点。

我需要做的是找到一种方法来进行全局更新以将值更改为秒，或者找到一种方法以当前格式在列上使用 sum 函数。

一个问题是数据是 mm:ss 和 hh:mm:ss 的混合。小时字段未填充零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T17:00:09.943

该声明

```
SELECT
  SUBSTR(SUBSTR("0000000"||time,LENGTH(time),8),1,2)*3600 + 
  SUBSTR(SUBSTR("0000000"||time,LENGTH(time),8),4,2)*60 + 
  SUBSTR(SUBSTR("0000000"||time,LENGTH(time),8),7,2)
FROM
  table
WHERE
  ... 
```

应该使用*hh:mm:ss*、*h:mm:ss*、*mm:ss*、*m:ss*、*ss*和*s*格式的混合，并且时间分隔符应该是任何字符。

# arduino - Arduino旋转伺服

> ID：11064282
> 
> 赞同：0
> 
> 时间：2012-06-16T14:32:04.217
> 
> 标签：arduino

我正在尝试使用 Arduino 微控制器转动连续旋转伺服。

当通过串行连接按下右箭头键时，我想将伺服器向右转动 1 度。这是我的代码：

```
 const int servoPin = 6;
    int incomingByte; 
    Servo servo;
    int pos;

    void setup() {
        Serial.begin(9600);
        pos = 0;
        servo.attach(servoPin);
        servo.write(pos);
    }

    void loop() {
        incomingByte = Serial.read();

        if (incommingByte == 67) {
            pos++;
            servo.write(pos);
        }
    } 
```

我该怎么做才能让他转身？因为现在，它不动了……

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:23:03.967

您的代码有几处问题。您有几个语法错误正在发生。

首先，您需要执行 a`#include <Servo.h>`并声明`incomingByte`为 int。您在 if-condition 行中也有错字。

此外，如果键盘未连接到 Arduino 板，则无法从键盘读取，除非您在中间有东西可以将键盘数据中继到板。这是您可以开始使用的代码：

```
#include <Servo.h>

int incomingByte; 
Servo servo;
int pos;
int dir;

void setup() {
    Serial.begin(9600);
    Serial.print("Test\n");

    pos = 90;
    dir = 1;

    servo.attach(9);
    servo.write(pos);
}

void loop() {
    if (pos >= 180 || pos <= 0) { dir = -dir; }
    pos += dir;
    Serial.print(pos);
    Serial.println();
    servo.write(pos);
    delay(50);
} 
```

# css - CSS - 带有图像填充列剩余部分的标题标签

> ID：11064283
> 
> 赞同：0
> 
> 时间：2012-06-16T14:32:05.543
> 
> 标签：css

希望 Stackoverflow 的好心人今天能帮助我——我昨晚看足球时基本上喝了太多啤酒，我的大脑已经停止工作。

我正在做一个响应式主题，3 列布局，每个顶部都有 H2 标签。我需要一个背景图像来填充列中的剩余空间。我在下面模拟了一张图片来展示我在做什么；

![在此处输入图像描述](../Images/7a46ca8347e4b44bc466d188bd6d0790.png)

如果背景是块颜色，我可能会显示 H2 内联并将背景颜色也应用于它，在包含的 div 上阻止它后面的图像。

正如你所看到的，斑驳的背景意味着技术不能很好地发挥作用，请注意文本上方的明显线条；

![在此处输入图像描述](../Images/6b7c18e2bf62ed339f45b43cb7add8a0.png)

我一直在尝试各种方法 - 一定有一些聪明的方法可以做到这一点，我希望你能帮助我！

谢谢阅读！

罗比。

*编辑*好的，最后我使用了下面两个答案的组合，但接受了将标题标签分成两个 div 并浮动第一个左边的答案（因为我不会想到这一点）。它本身不起作用，但是通过为左侧浮动 div 提供与双线相同高度的背景并将其平铺在 x 轴上（而不是为整个元素提供背景），我能够掩盖文本下方的线条与背景不冲突。

图片：

![在此处输入图像描述](../Images/8fcabb5a414bc06efc4617accb9f6df2.png)

HTML：

```
<h2>
<div class="h2-text">Aha!!</div>
<div class="h2-lines">&nbsp;</div>
</h2> 
```

和CSS；

```
.h2-text {
   padding-right: 5px;
   background: url(../images/footer-lines-overlay.png) repeat-x 0 20px;
   float: left;
}

.h2-lines{
   background: url(../images/footer-h2-lines.png) repeat-x 0 20px;
} 
```

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:36:57.427

我明白了，越过了鲍尔默峰。

无论如何，一种可能的解决方案是使用浮动元素：

```
<h2>
    <div style="float: left;">My Header Tag</div>
    <div style="background: whatever;">&nbsp;</div>
</h2> 
```

![鲍尔默峰](../Images/2f45c08fdbf1e6b82ad5224fe4999b28.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:35:44.350

使用以下结构可以完成一个简单的解决方案：

```
<h1><div><span>The text</span></div></h1> 
```

添加此样式

```
h1 {
   background: url('the-noise-background'); 
}

h1 div {
   background-image: url('the-double-lined-background');
}

h1 div span {
   padding-right: 20px;
   display: inline-block;
   background: url('the-noise-background') -20px -10px /* Fine tune those pixels so it matches the original position */;
   /* use required line-height and other stuff to full cover the lines */
} 
```

# javascript - 谷歌地图气球失去了风格

> ID：11064284
> 
> 赞同：1
> 
> 时间：2012-06-16T14:32:31.520
> 
> 标签：javascript, css, google-maps, map

我想知道我做错了什么。我正在使用 bMap ( [http://www.blocsoft.com/bmap/](http://www.blocsoft.com/bmap/) ) 来获取 Google 地图，在演示中，一切看起来都是正确的。
我的版本看起来不太好。我失去了所有的圆角。我的猜测是这是一个常见的错误，但我不知道，因为地图气球样式应该是内联的。除此之外 - 我已经尝试禁用我的 CSS 完整，并且角落仍然是方形的。不仅如此，盒子看起来有点乱。

有什么想法我应该从哪里开始调试？

来自 Inspector 的 HTML：

```
<div style="z-index: 106; position: absolute; left: 0px; top: 0px;"><div style="display: none;"><div style="width: 107px; height: 137px; overflow: hidden; position: absolute; left: 21px; top: 26px;"><img style="position: absolute; left: -784px; top: -102px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px; width: 1029px; height: 255px;" src="http://maps.gstatic.com/mapfiles/cb/mod_cb_scout/cb_scout_sprite_api_003.png"><div style="position: absolute; left: 7px; top: 5px; width: 94px; height: 75px; background-color: rgb(211, 211, 211); z-index: 1;"></div><div style="width: 95px; bottom: 38px; z-index: 1; left: 7px; font-family: Arial,sans-serif; font-size: 9px; color: gray; background-color: white; position: absolute;">Loading...</div><img style="position: absolute; left: 7px; top: 5px; width: 94px; height: 75px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px; opacity: 0.25;" src="http://maps.gstatic.com/mapfiles/transparent.png"></div><div style="width: 21px; height: 26px; overflow: hidden; position: absolute; left: 63px; top: 127px;"><img style="position: absolute; left: -441px; top: -102px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px; width: 1029px; height: 255px;" src="http://maps.gstatic.com/mapfiles/cb/mod_cb_scout/cb_scout_sprite_api_003.png"></div></div><div style="position: absolute; left: 257px; top: 84px; cursor: default; z-index: 307;"><div style="width: 48px; height: 8px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 162px; top: 123px;"><img style="position: absolute; left: -49px; top: -715px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="width: 44px; height: 8px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 157px; top: 130px;"><img style="position: absolute; left: -44px; top: -722px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="width: 40px; height: 8px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 152px; top: 137px;"><img style="position: absolute; left: -39px; top: -729px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="width: 36px; height: 8px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 147px; top: 144px;"><img style="position: absolute; left: -34px; top: -736px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="width: 31px; height: 8px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 142px; top: 151px;"><img style="position: absolute; left: -29px; top: -743px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="width: 27px; height: 8px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 137px; top: 158px;"><img style="position: absolute; left: -24px; top: -750px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="width: 23px; height: 8px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 132px; top: 165px;"><img style="position: absolute; left: -19px; top: -757px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="width: 18px; height: 8px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 127px; top: 172px;"><img style="position: absolute; left: -14px; top: -764px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="width: 14px; height: 8px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 122px; top: 179px;"><img style="position: absolute; left: -9px; top: -771px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="width: 10px; height: 8px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 117px; top: 186px;"><img style="position: absolute; left: -4px; top: -778px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="width: 97px; height: 25px; overflow: hidden; position: absolute; z-index: 1; -moz-user-select: none; left: 113px; top: 99px;"><img style="position: absolute; left: 0px; top: -691px; width: 690px; height: 786px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/iw3.png"></div><div style="position: absolute; left: 0px; top: 0px; width: 321px; height: 122px; overflow: hidden; -moz-user-select: none; background-color: white; border: 1px solid rgb(171, 171, 171);"></div><div style="width: 321px; height: 122px;"><div style="width: 10px; height: 10px; overflow: hidden; position: absolute; opacity: 0.7; right: 12px; top: 12px; z-index: 10000; cursor: pointer;"><img style="position: absolute; left: -18px; top: -44px; width: 68px; height: 67px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="http://maps.gstatic.com/mapfiles/mv/imgs8.png"></div><div style="cursor: default; position: absolute; left: 18px; top: 18px; z-index: 2; overflow: auto; width: 287px; height: 88px;"><div style="overflow: auto;"><h2>Frederikshåb Hundeskov</h2><a href="/?p=424"> More Information</a></div></div></div></div></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:40:00.343

我怀疑您正在使用 Google Maps 的 V3 并将结果与​​ bMap 站点中的 V2 演示进行比较。气球 (InfoWindows) 在 V2 中具有圆角，在 V3 中具有方角。我没有看到 bMap 站点中提到的 CSS。

有一个用于带圆角的气球的实用程序库，称为[**InfoBubble**](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/) [（此处为示例）](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html)，但我不确定与 bMap 合并有多容易。

关于看起来乱七八糟的盒子，是不是[像这个问题一样](https://stackoverflow.com/q/11042656/1325290)？有一个 CSS 修复适用于您的地图 div：

```
#map_canvas label { width: auto; display:inline; }
#map_canvas img { max-width: none; max-height: none; } 
```

# perl - 如何在 Mac OS X 上将我的 Perl 环境和模块恢复到已知状态？

> ID：11064291
> 
> 赞同：2
> 
> 时间：2012-06-16T14:33:40.237
> 
> 标签：perl, osx-lion

我是一个老 Perl 黑客，但我基本上已经放弃了我的 Mac，因为我通常无法使用[cpan](http://search.cpan.org/dist/CPAN/scripts/cpan)安装任何东西。

依赖项列表中的某些内容通常会因（对我而言）毫无意义的错误而失败。我的 Mac 是新的，但在 10 多年的时间里从以前的 Mac 升级过程中复制了很长的历史。

多年来，我一直在尝试使用`fink`，`MacPorts`并且`homebrew`我怀疑此时我有很多不兼容的地方。

在我发布我的最新问题之前，我真正想做的是从 Perl 开始清理，就好像我安装了一个干净的 OSX-lion 一样。有什么方法可以做到这一点，而无需擦除我的磁盘并从头开始安装 OSX？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T16:03:47.963

您提到的项目都没有安装到系统目录中。因此，从您当前的用户环境中删除它们应该与将它们从您的路径中删除并从您的启动文件中删除对它们的引用一样简单（例如`.bashrc`，或者如果您将它们添加到您的“登录项”等）。

在那之后，你会得到操作系统给你的东西。别管那个。安装[perlbrew](http://search.cpan.org/perldoc/App:perlbrew)（这样您就可以安装多个`perl`s 并在它们之间切换而不会干扰系统的其余部分）和[cpanm](http://search.cpan.org/perldoc/App::cpanminus)（因为它更有趣 ;-) 并从那里获取它。

请务必阅读您使用的所有内容的文档，以便了解他们的工作以及他们如何做到这一点。

PS：如果您出于某种原因确实*强制*任何[fink](https://www.finkproject.org/)、[ports](https://www.macports.org/)或[homebrew](https://brew.sh/)践踏系统目录，那么您做错了。如果我是你，在这种情况下我会选择从头开始安装（但请确保先备份你的文档）。我个人认为即使`/usr/local`像 homebrew 开发者倡导的那样也不是一个好主意，但如果你这样做了，至少他们会给你一个[卸载脚本](https://gist.github.com/mxcl/1173223)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T01:59:11.673

OS X 和 Perl = 有点痛苦，当需要很多模块时。

问题：

*   **macports** - 默认 5.12 可选 5.14。不幸的是，**许多**macports 有错误的依赖关系，准确地询问 5.12，当您遇到 5.14 时遇到问题您的默认 perl 将是 5.14，并且某些软件包将安装和使用 5.12 :(。

*   **perlbrew** - 非常好和容易，但这里有一个缺点。当你想用 macports 安装一些包并且依赖于 macport 的 perl 时 - 它被安装了。因此，您将获得一个 macport 的 perl（适用于已安装的软件包和 perlbrew perl）。更糟糕的是，您的例如 5.14 perlbrew 无法与 macports（默认 5.12）一起正常播放。例如 p5-GD、ImageMagick 和许多其他的。

*   **自制**- IMO，太可怕了。**到达推荐rm -rf /usr/local**的部分时停止阅读文档。（当然，所有数据，例如mysql）。也许现在更好了。

*   fink，和macports一样的问题。

我的解决方案：

简单地使用 macports 版本进行真正的开发和 perlbrew 仅用于测试（但不使用依赖的二进制文件，如 GD 等）。当想要“perlbrew”采购它的 shell-start-files 时，否则不使用 macports。

另一个痛苦的来源是 - 尝试首先安装 macports 版本的 perl 模块（因为一致性和依赖性）并且只有当 macports 版本不存在或需要最新的 cpan 版本时 - 使用`cpanm`. CPAN 版本 Extutils::Makemaker 不喜欢 macports 版本 - 并且在使用`cpanm`.

真正的痛苦。Macports 迫切需要一个新的 perl - maintenaier，他将清理错误的依赖项并制作 macports 版本，`cpanm`它将正确安装 cpan 版本的模块作为 macport 包。几年前 FreeBSD 就有了一些东西 - cpan 模块进入 BSDPAN 捆绑包中，可以使用 pkg_* 命令进行管理。

所以结果：我目前不知道任何简单的 OS X perl 用法。当你想立即使用一些依赖于 perl 的软件时，你必须自己编译它们（有时它们不会编译 - 所以你需要 OSX 的补丁版本，所以开始使用 macports 或 homebrew 和......痛苦.. ;(

正如 Sinan 已经说过的那样 - 这些安装中的任何一个都不会干扰您的系统 perl，但您可能首先开始使用 cpan 和系统 perl 并将一些模块安装到 /Library..

IMO，你可以忍受它。只需安装 macports 并开始使用它。但是，如果您想要一些 perl-repair-installation - 可能更好的地方是：[https](https://apple.stackexchange.com/) ://apple.stackexchange.com/ 。

# c - 在c中声明没有任何数据类型的变量

> ID：11064292
> 
> 赞同：30
> 
> 时间：2012-06-16T14:33:57.883
> 
> 标签：c, variables

在这个`c`节目 中

```
a=8;
main()
{
    printf("%d", a);
} 
```

变量 a 已被声明为没有任何数据类型，但该程序仍然成功编译并提供所需的输出。
输出 ：：

```
8 
```

在[ideone](http://ideone.com/NioWM)上看到。
但是，当我在 main 中声明相同的变量时，它会给出编译错误。

```
main()
{
     a=8;
    printf("%d", a);
} 
```

输出 ：：

```
prog.c:2: warning: return type defaults to ‘int’
prog.c: In function ‘main’:
prog.c:3: error: ‘a’ undeclared (first use in this function)
prog.c:3: error: (Each undeclared identifier is reported only once
prog.c:3: error: for each function it appears in.)
prog.c:4: warning: implicit declaration of function ‘printf’
prog.c:4: warning: incompatible implicit declaration of built-in function ‘printf’ 
```

看[这里](http://ideone.com/2hILX)。

**第一个程序如何工作，但第二个？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-16T14:38:25.900

您在这里看到的是**[“隐式 Int 规则”](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=467)**在起作用。简单地说，规则说：

> “没有显式类型名称***声明的变量***被假定为类型`int`。”

请注意，此规则在 c99 标准^([Ref 1])中被撤销。但是，根据您的编译器及其设置，第一个示例可能会在编译时出现警告，或者无法编译（*使用严格的编译设置*）

如果您使用遵循 c99 标准的严格设置编译您的第一个示例，编译器会告诉您根本原因。

**[在这里](http://ideone.com/AMMQm)**检查。

> cc1：警告被视为错误
> prog.c:1：错误：数据定义没有类型或存储类
> prog.c:1：错误：在 'a'<br> prog.c 的声明中，类型默认为 'int'： 3：错误：返回类型默认为'int'<br> prog.c：在函数'main'中：
> prog.c:4：错误：函数'printf'的隐式声明<br> prog.c:4：错误：内置函数'printf'的不兼容隐式声明

编辑：

> **为什么第一个示例有效，而第二个示例无效？**

请注意规则中对“声明的变量”一词的强调。

在第一个示例中，由于语句位于全局范围内，因此将其视为***隐式声明***，并且将*隐式 Int 规则*应用于它。

在第二个示例中，该语句充当***Assignment 而不是 Declaration***。由于没有声明，因此此处不适用*隐式 int 规则。*在没有任何类型的情况下，编译器无法确定是什么类型`a`并因此报告错误。

* * *

^([参考 1])

**C99 标准：前言**
**第 5 段：**

> 本版本取代了以前的版本，经、和`ISO/IEC 9899:1990`修改和更正。 与上一版相比的主要变化包括： ..... ..... — 删除隐式 int ..... ..... `ISO/IEC 9899/COR1:1994``ISO/IEC 9899/COR2:1995``ISO/IEC 9899/AMD1:1995`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-16T14:46:22.580

`a=8;`函数外部看起来像一个**声明语句**，其中`a`是声明说明符，`= 8`是初始化器。C 曾经允许在声明说明符中省略类型，`int`在这种情况下默认为。（自 C99 起，不再允许这样做。）

但是，在函数中，`a=8;`看起来像是一个**表达式语句**（一个赋值表达式）并且符号`a`没有被解析。（请注意，您没有函数之外的表达式语句。）

例如，如果您尝试这样做，`static a = 8;`那么它将再次看起来像一个声明，并且应该编译，因为类型将默认为 int。

无论如何，不​​要依赖它 :-) 清楚地写出你的类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T14:41:19.770

这是因为在 C 中，任何变量/函数都是隐式的`int`。

这与您可以使用`register`代替`register int`，或`unsigned`代替`unsigned int`，`auto`代替`auto int`，和`static`代替的原因相同`static int`。我个人总是用 明确限定我的变量`int`，但是否这样做是你的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T14:41:57.440

即使您没有编写数据类型，您的变量也确实具有数据类型 (int)。

利用该功能是不好的做法。

显然，您的编译器不允许在函数内部发生这种情况。这是有道理的，因为如果它确实允许 "a=8;" 在函数中很难捕捉到某些错别字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T14:45:04.217

在 C++11 中，有一个`auto` 关键字。不幸的是，C 和 C++ 是强类型语言，它们需要为每个声明的变量定义一个严格的类型。一些编译器假定 int 为默认值，但这是他们的好主意，不应该使用它，因为它被认为是一种错误的编程习惯。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-15T15:01:03.180

甚至函数参数也可以写成隐式 int。例子：

```
fun(n){printf("%d",n);} 
```

上面的代码可以正常工作，但是一旦参数中包含固定的数据类型，例如

```
fun(n,char c){ printf("%d",n);} 
```

它显示错误：错误：在'char'之前预期'）'|

# iphone - withObject:self 和 withObject:nil 的使用区别

> ID：11064294
> 
> 赞同：1
> 
> 时间：2012-06-16T14:34:24.297
> 
> 标签：iphone, objective-c, ios, performselector

我一直想知道以下代码行

```
[self performSelector:@selector(myMethod) withObject:self afterDelay:1.0];
[self performSelector:@selector(myMethod) withObject:nil afterDelay:1.0]; 
```

1.  以上两行代码有什么区别。
2.  我们什么时候应该将object设置为`nil`，什么时候应该将object设置为`self`？

在大多数情况下，我注意到要设置为的对象`nil`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T14:41:48.500

在您列出的示例中，您不会遇到任何不同的行为，因为您的方法`myMethod`没有参数。这很有用，是当你有一个带参数的方法时。

假设我们声明了一个方法，`squareRootMethod:`它接受一个 NSNumber 并返回平方根。然后你会打电话`[self performSelector:@selector(squareRootMethod:) withObject:numberToRoot afterDelay:1.0]`

还有一些方法，如`performSelector:withObject:withObject:`用于选择器的方法，它接受多个参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T15:21:38.270

注意这两者之间的区别：

```
@selector(myMethod)
@selector(myMethod:) 
```

第一个是不带任何参数的方法，第二个是带一个参数的方法。您正在使用的方法`withObject:`部分`performSelector:`允许您在调用该方法时将对象传递给该方法。但是，在该方法不带任何参数的情况下，它并不重要，因为它不会被使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T14:38:34.700

在第一个示例中，您将 self 作为参数传递给调用该方法的方法。但是你的方法没有参数，所以它是不必要的。

在第二个示例中，您传递了`nil`，因此该方法被传递`nil`给它不存在的参数，然后终止。从某种意义上说，这更“有效”，因为您的方法不接受任何参数，并且 `nil. 对象是否等效于 NULL，那么您传递的绒毛较少，无论如何都会被忽略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T14:51:53.740

区别在于您是否将对象传递给选择器。选择器所做的只是描述一个方法。

```
[self performSelector:@selector(myMethod) withObject:nil afterDelay:1.0]; 
```

不同于：

```
[self performSelector:@selector(myMethod:usingThis:) withObject:nil afterDelay:1.0]; 
```

现在，如果您希望选择器（即方法）对您传入的某个对象起作用，例如数组、字典或类。您使用 withObject。如：

```
[self performSelector:@selector(myMethod:) withObject:myDictionary afterDelay:1.0];

-(void)myMethod:(NSDictionary*)dictionary
{
// Do something with object
} 
```

您可以传入任何内容，包括对当前类的引用（例如 self），就像您在示例中所做的那样。

# ios - iOS 如果我没有开发者帐户，如何在 Xcode 4.2 中启用权利

> ID：11064296
> 
> 赞同：-1
> 
> 时间：2012-06-16T14:34:39.407
> 
> 标签：ios, xcode4.2, jailbreak, entitlements, code-signing-entitlements

我想先学习 iOS 开发，然后购买开发者帐户。所以我使用 Jailbreak+AppSync+iOS 5.0.1 设备进行开发。

然后，我想在 Entitlements.plist 下面添加一些行，但我找不到这个文件，当然我自己也做不到。

```
<dict> 
    <key>com.apple.springboard.launchapplications</key> 
    <true/> 
</dict> 
```

从官方文档中，我发现我可以在 shell 中看到 Entitlements.plist，我看到了。

```
codesign -d --entitlements -xxxx/Build/Products/Debug-iphoneos/MyApp.app 
```

然后我认为这个应用程序的 Entitlements.plist 文件必须在某个地方。我只是想在其中添加一些行。

我还发现了一些启用 Entitlements.plist 的问题，您应该在 Organizer/Provisioning Profiles 中执行此操作。但这个问题是关于 iCloud 的。我不需要 iCloud。所以我想问一下，在没有开发者帐户的情况下，有没有办法给 Entitlements.plist 写信？

[添加]

如果 Xcode 4.2 或 iOS 5 不再需要 Entitlements.plist。如何将此权利 (com.apple.springboard.launchapplications) 添加到我的应用程序中。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:39:17.973

在 Xcode 4.2 中，点击你的项目，然后点击 TARGETS->project name->Summary，在本页最后，勾选“Enable Entitlements”，然后你可以看到一个文件出现在你的项目中。不再需要它，但是如果你想在其中指定属性，你可以这样做。:-)

# twitter - 检查推文是否包含指向外部站点的链接

> ID：11064298
> 
> 赞同：0
> 
> 时间：2012-06-16T14:34:55.543
> 
> 标签：twitter

要检查推文是否包含指向外部站点的链接，我只是检查推文是否包含 'http:' ？这足够了吗？

我正在使用 twitter rest API 访问推文，因此我解析了包含推文的 json 响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:48:06.407

你如何访问推文？通过抓取 Twitter 网站，还是通过一些 API？如果您使用 API，是哪一个等。在我看来，`js-tweet-text`源代码部分总是被格式化为提供带有 http:// 的链接，但可能无法保证。你为什么不直接寻找`href`呢？

例子：

```
 <p class="js-tweet-text">
      Blabla tweet text... <a data-expanded-url="http://bit.ly/somelink" 
          class="twitter-timeline-link" href="http://t.co/stuff"
          rel="nofollow" class="twitter-timeline-link">bit.ly/somelink
          </a>
    </p> 
```

`data-expanded-url`在这里，两者`twitter-timeline-link`似乎都给出了实际链接，同时`href`通过一些 twitter 过滤器重定向你。但无论如何，您可以确定的一件事是链接包含一个`href`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:48:19.793

您可以使用[Twitter Entity](https://dev.twitter.com/docs/tweet-entities)获取推文的所有 URL 。进行 REST 调用时，请确保包括

```
&include_entities=true 
```

这将为您提供 JSON 或 XML 中称为实体的部分。将有一个名为 urls 的子节点。

这是将返回的示例。

```
"text": "Twitter for Mac is now easier and faster, and you can open multiple windows at once http://t.co/0JG5Mcq",

    "entities": {

      "media": [

      ],

      "urls": [

        {

          "url": "http://t.co/0JG5Mcq",

          "display_url": "blog.twitter.com/2011/05/twitte…",

          "expanded_url": "http://blog.twitter.com/2011/05/twitter-for-mac-update.html",

          "indices": [

            84,

            103

          ]

        }

      ],

      "user_mentions": [

      ],

      "hashtags": [

      ]

    } 
```

因此，查找实体 -> urls 以查看推文是否包含指向外部站点的链接。

# iphone - 调试崩溃日志

> ID：11064299
> 
> 赞同：0
> 
> 时间：2012-06-16T14:35:03.873
> 
> 标签：iphone, objective-c, ios, ipad

我有以下崩溃日志：

![在此处输入图像描述](../Images/8bc969ebd9e9d8aab26b99a103ce3f83.png)

我不确定自己，为什么会这样。任何指针？我认为这与块有关

# c# - WCF 如何使用数据库 phpmyadmin 中的数据？

> ID：11064300
> 
> 赞同：1
> 
> 时间：2012-06-16T14:35:11.450
> 
> 标签：c#, .net, wcf

荣幸和你们见面。我是新来的。

只是想问一下，我的 WCF 如何使用数据库 phpmyadmin 中的数据？我刚刚尝试了我的 WCF 使用数据库 sqlserver 中的数据，它在我的 wpf 应用程序中工作。

但是如果我的数据库在线，我找不到我的 WCF 如何访问数据的方法。有什么线索吗？

我尝试将数据源更改为我的数据库中的 IP，它不起作用。这是我的SqlConnection，

```
SqlConnection conn = new SqlConnection("Data Source=Alfred-PC;Initial Catalog=alfred;Integrated Security=True"); 
```

这是 WCF

```
public class Jobs : IJobs
{
    SqlConnection conn = new SqlConnection("Data Source=Alfred-PC;Initial Catalog=alfred;Integrated Security=True");
    SqlDataAdapter da;
    DataSet ds;
    Data data = new Data();
    List<Data> listdata = new List<Data>();

    public DataSet Details()
    {
        conn.Open();
        ds = new DataSet();
        da = new SqlDataAdapter("Select * from data", conn);
        da.Fill(ds);
        conn.Close();
        return ds;
    }

    public Data GetDetails(int jobid)
    {
        conn.Open();
        ds = new DataSet();
        da = new SqlDataAdapter("Select * from data where id = " + jobid, conn);
        da.Fill(ds);
        if (ds.Tables[0].Rows.Count > 0)
        {
            data.userid = Convert.ToInt32(ds.Tables[0].Rows[0][0]);
            data.firstname = ds.Tables[0].Rows[0][1].ToString();
            data.lastname = ds.Tables[0].Rows[0][2].ToString();
            data.location = ds.Tables[0].Rows[0][3].ToString();
            ds.Dispose();
        }
        conn.Close();
        return data;
    }

    public List<Data> GetAllDetails()
    {
        conn.Open();
        ds = new DataSet();
        da = new SqlDataAdapter("Select * from data", conn);
        da.Fill(ds);
        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            listdata.Add(
                new Data
                {
                    userid = Convert.ToInt32(dr[0]),
                    firstname = dr[1].ToString(),
                    lastname = dr[2].ToString(),
                    location = dr[3].ToString()
                }
            );
        }
        conn.Close();
        return listdata;
    }
} 
```

这是 WPF 文件

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        if (textbox1.Text.Trim().Length != 0)
        {
            ServiceReference1.JobsClient jc = new ServiceReference1.JobsClient();
            var x = jc.GetDetails(Convert.ToInt32(textbox1.Text));
            if (x.userid != 0)
            {
                textbox2.Text = x.userid.ToString();
                textbox3.Text = x.firstname;
                textbox4.Text = x.lastname;
                textbox5.Text = x.location;
            }
            else
                MessageBox.Show("RecordNotFound ... !", "Message", MessageBoxButton.OK, MessageBoxImage.Information);
        }
        else
            MessageBox.Show("EnterID", "Message", MessageBoxButton.OK, MessageBoxImage.Warning);
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        ServiceReference1.JobsClient jc = new ServiceReference1.JobsClient();
        dataGrid1.ItemsSource = jc.Details().Tables[0].DefaultView;
    }

    private void button3_Click(object sender, RoutedEventArgs e)
    {
        ServiceReference1.JobsClient jc = new ServiceReference1.JobsClient();
        dataGrid1.ItemsSource = jc.GetAllDetails() ;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:27:24.953

您正在使用集成安全性。对于 WPF 应用程序，用于验证对数据库的访问权限的帐户是您登录的帐户。但在 WCF 服务中，该帐户由托管它的 (IIS) 服务器的设置控制。你有一些选择：

1.  更改为使用用户名和密码连接到数据库
2.  Change the DB to accept the account that the WCF service is trying to connect as (the DB should tell you in an error message or log)
3.  Change the server settings to use a Windows account that has privileges

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:03:22.893

If I understand correctly you need an example for the connection string. So for the connection string format please look here: [http://www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)

An example could be `Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;` if you are using the standard port and did not change it. In this case you won't use integrated security though (you will specify the username and password in the connection string) so check if that is possible for you.

Then you may use the MySQL Connector (Namespace `MySql.Data.MySqlClient` downloadable here [http://dev.mysql.com/downloads/dotnet.html](http://dev.mysql.com/downloads/dotnet.html)) and connect to the MySQL database programatically as explained in detail here [http://www.functionx.com/mysqlnet/csharp/Lesson02.htm](http://www.functionx.com/mysqlnet/csharp/Lesson02.htm)

# java - 调试时堆栈帧中的美元符号是什么意思？

> ID：11064301
> 
> 赞同：16
> 
> 时间：2012-06-16T14:35:24.103
> 
> 标签：java, eclipse

在使用 Eclipse 的堆栈中，有时我看到

Manager$2.run() 行：278

2 美元在这里是什么意思？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-16T14:39:03.593

它是匿名类。

> 匿名*类*是没有名称的本地类。*使用new*运算符在单个简洁表达式中定义和实例化匿名类 。

从方法名称来看，它可能是一个[Runnable.run()](http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html#run%28%29)方法。

```
public class Manager {

    public static void main(String[] args) {
        new Manager();
    }

    public Manager() {
        //                         this is anonymous class
        //                              |
        //                              V
        Thread thread = new Thread(new Runnable() {

            @Override
            public void run() {
                System.out.println("hi");
            }
        });
        thread.start();
    }
} 
```

看

*   [匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)

# c# - 整个表单的最高透明度

> ID：11064302
> 
> 赞同：0
> 
> 时间：2012-06-16T14:35:29.770
> 
> 标签：c#, winforms, hittest, wndproc

是否可以在不调整表单可见性的情况下使表单的整个边界最透明？

我正在使用 user32 api 调用来`WindowFromPoint`找到鼠标下的控件。在某些情况下，我想忽略浮动在主表单（或另一个子表单）前面的子表单的存在，但保持此表单忽略可见。

将表单的 Opacity 设置为忽略 0 将成功地导致 hittest 直接通过它，但表单显然是不可见的，我希望它保持可见。

由于这个子窗体上可以有任意数量的控件，有没有办法让这个窗体拦截所有`WM_NCHITTEST`发送到窗体上子控件的消息，以便我可以为每个控件返回最合适的透明度？表单中包含的控件是任意的，因此我无法在内部对其进行修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:05:18.100

您正在寻找 WS_EX_TRANSPARENT Windows 样式。

[这个答案](https://stackoverflow.com/questions/1524035/topmost-form-clicking-through-possible/1524047#1524047)给出了一个足够好的解释。

# matlab - matlab linprog 不等式约束是一个矩阵 - 如何转换为向量

> ID：11064303
> 
> 赞同：0
> 
> 时间：2012-06-16T14:35:30.657
> 
> 标签：matlab, concatenation, linear-programming

我有以下代码：

```
test = horzcat(-PV_test, -WT_output);
f = [((CRF * CC_PV) / PVenergy) + OM_PV; ((CRF * CC_WT) / WTenergy) + OM_WT];
A = test;
b = -Demand;
lb = zeros(2,1);
ub = [max_PV_area max_WT_area];
x = linprog(f, A, b, [], [], lb, ub) 
```

在哪里：

```
b = 365 x 24
PV_test = 365x24
WT_output  = 365 x 24
test = 365 x 48 (from matrix concatenation) 
```

`Demand`当它应该是一个向量时，它似乎是一个矩阵。如何将其转换为向量并将相同的元素保留在相同的“位置”？

另外，矩阵连接是最好的方法吗？我正在尝试为整个数据集找到最佳`x1`值`x2`。

# mysql - 棘手的查询：预测日期

> ID：11064304
> 
> 赞同：5
> 
> 时间：2012-06-16T14:35:37.227
> 
> 标签：mysql

再会。

我在我的 SQL 查询中被这个问题阻止了：

给定下表：

```
创建表`Forecasted_Sales_tcl`（
`DEALER_id` varchar(15) NOT NULL,
`SALES_period` 日期不为空，
`TYPE` int(2) NOT NULL,
`UNIT_SALES` int(6) 默认为空，
`HEAD_OFFICE_CODE` varchar(15) 默认 NULL
主键（`DEALER_CODE`、`SALES_MONTH`、`TYPE`）
) 引擎=InnoDB 默认字符集=latin1；

```

[http://sqlfiddle.com/#!2/b780c](http://sqlfiddle.com/#!2/b780c)

我需要在接下来的几个月中产生可能的销售费用。例如，我在商店中绘制了一个月 (SALES_period)“2012 年 6 月”的出境销售 (unit_sales)。我预计 2012 年 8 月会收取 A 类服务费，2012 年 10 月会收取 B 类服务费，2012 年 12 月会收取 C 类服务费。我还在不同商店的不同月份有一些出境销售。

我正在尝试生成这样的报告：

```
  期间 |费用 A | 收费 B |收费 C | store_id
2012-1月 | X | 是 | Z | （ID）
2012-2月 | : | : | : :
2012-3月 | : | : | : :
2012-4月 | : | : | : :
2012-5月 | : | : | : :
2012-6月 | : | : | : :
2012-7月 | : | : | : :
2012 年 8 月 | : | : | : :
2012-9月 | : | : | : :
2012-10月 | : | : | : :
2012-11月 | : | : | : :
2012 年 12 月 | : | : | : :

```

X 是商店 (id) 的 unit_sales (2 个月前) 的总数 Y 是商店 (id) 的 unit_sales (4 个月前) 的总数 Z 是商店 (id) 的 unit_sales (6 个月前) 的总数

* * *

鉴于 sql fiddle 上的上述数据和一些参数：生成报告：从：2012-06 到：2013-07

```
  期间 | 经销商 ID | 充电 X | 费用 B | 费用 C |
 2012-06 | 0001 | 0 | 0 | 0 |
 2012-07 | 0001 | 0 | 0 | 0 |
 2012-08 | 0001 | 100 | 0 | 0 |
 2012-09 | 0001 | 0 | 0 | 0 |
 2012-10 | 0001 | 0 | 100 | 0 |
 2012-11 | 0001 | 0 | 0 | 0 |
 2012-12 | 0001 | 0 | 0 | 100 |
 2013-01 | 0001 | 0 | 0 | 0 |
 2013-02 | 0001 | 0 | 0 | 0 |
 2013-03 | 0001 | 0 | 0 | 0 |
 2013-04 | 0001 | 0 | 0 | 0 |
 2013-05 | 0001 | 0 | 0 | 0 |
 2013-06 | 0001 | 0 | 0 | 0 |
 2013-07 | 0001 | 0 | 0 | 0 |

  期间 | 经销商 ID | 收费 | 费用 B | 费用 C |
 2012-06 | 0002 | 0 | 10 | 2 |
 2012-07 | 0002 | 0 | 0 | 0 |
 2012-08 | 0002 | 10 | 0 | 0 |
 2012-09 | 0002 | 18 | 0 | 0 |
 2012-10 | 0002 | 5 | 10 | 0 |
 2012-11 | 0002 | 0 | 18 | 0 |
 2012-12 | 0002 | 0 | 5 | 10 |
 2013-01 | 0002 | 0 | 0 | 18 |
 2013-02 | 0002 | 0 | 0 | 5 |
 2013-03 | 0002 | 0 | 0 | 0 |
 2013-04 | 0002 | 0 | 0 | 0 |
 2013-05 | 0002 | 0 | 0 | 0 |
 2013-06 | 0002 | 0 | 0 | 0 |
 2013-07 | 0002 | 0 | 0 | 0 |

```

> > On This 10 用于销售 (2012-04) 而 2 用于销售 (2012-02)
> > 
> > ```
> >   期间 | 经销商 ID | 收费 | 费用 B | 费用 C |
> >  2012-06 | 0003 | 0 | 0 | 0 |
> >  2012-07 | 0003 | 0 | 0 | 0 |
> >  2012-08 | 0003 | 1 | 0 | 0 |
> >  2012-09 | 0003 | 0 | 0 | 0 |
> >  2012-10 | 0003 | 0 | 1 | 0 |
> >  2012-11 | 0003 | 0 | 0 | 0 |
> >  2012-12 | 0003 | 0 | 0 | 1 |
> >  2013-01 | 0003 | 0 | 0 | 0 |
> >  2013-02 | 0003 | 0 | 0 | 0 |
> >  2013-03 | 0003 | 0 | 0 | 0 |
> >  2013-04 | 0003 | 0 | 0 | 0 |
> >  2013-05 | 0003 | 0 | 0 | 0 |
> >  2013-06 | 0003 | 0 | 0 | 0 |
> >  2013-07 | 0003 | 0 | 0 | 0 |
> > 
> > ```
> > 
> > 主报告

```
           | 2012-06 | 2012-07 | 2012-08 | 2012-09 | 2012-10 | 2012-11 |
经销商编号 | 收费 | 费用 B | 费用 C | 收费 | 费用 B | 费用 C | 收费 | 费用 B | 费用 C | 收费 | 费用 B | 费用 C | 收费 | 费用 B | 费用 C | 收费 | 费用 B | 费用 C |
001 | 0 | 0 | 0 | 0 | 0 | 0 | 100 | 0 | 0 | 18 | 0 | 0 | 0 | 100 | 0 | 0 | 18 | 0 |
002 | 0 | 10 | 2 | 0 | 0 | 0 | 10 | 0 | 0 | 0 | 0 | 0 | 0 | 10 | 0 | 0 | 0 | 0 |
003 | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 0 |

```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:43:33.080

非常感谢 SQLFiddle！这是您试图在这里实现的**非常讨厌的报告：D**

我能达到的最接近（使用体面的 SQL 时）是这样的：

```
SELECT
  DEALER_ID,
  DATE,
  -- Next 3 rows feature the trick to transpose lines to columns.
  SUM(IF(CHARGE = 'A', UNIT_SALES, 0)) as CHARGE_A,
  SUM(IF(CHARGE = 'B', UNIT_SALES, 0)) as CHARGE_B,
  SUM(IF(CHARGE = 'C', UNIT_SALES, 0)) as CHARGE_C
FROM (

SELECT -- Create a row for each charge A.
  DEALER_id,
  'A' as CHARGE,
  DATE_FORMAT(DATE_ADD(SALES_PERIOD, INTERVAL 2 MONTH), "%Y-%m") as DATE,
  UNIT_SALES
FROM forecasted_sales_tcl

UNION

SELECT -- Create a row for each charge B.
  DEALER_id,
  'B' as CHARGE,
  DATE_FORMAT(DATE_ADD(SALES_PERIOD, INTERVAL 4 MONTH), "%Y-%m") as DATE,
  UNIT_SALES
FROM forecasted_sales_tcl

UNION

SELECT -- Create a row for each charge C.
  DEALER_id,
  'C' as CHARGE,
  DATE_FORMAT(DATE_ADD(SALES_PERIOD, INTERVAL 6 MONTH), "%Y-%m") as DATE,
  UNIT_SALES
FROM forecasted_sales_tcl

) T
WHERE DATE >= "2012-06" AND DATE <= "2013-07"
GROUP BY DEALER_ID, DATE
ORDER BY DEALER_ID, DATE; 
```

这给了你你想要的东西（顺便指出你的假输出中的一些错误：p），除了它不会生成空行，这就是我为了体面而停下来的地方。

**我并不是说这是不可能的，但是生成它**真的很难看。如果你真的想进入它，第一个（也是最困难的）工作是编写一个生成单列输出的 SQL 查询：

```
DATE
2012-06
2012-07
2012-08
(...)
2013-06
2013-07 
```

这可能是一个很好的问题：p

出于好奇，你可以看看这个其他技巧：

```
SELECT @row := @row + 1 as row, t.* FROM some_table t, (SELECT @row := 0) r 
```

无论如何，如果你真的想得到空行的输出，最简单的方法是让另一个表填充句点。Next [LEFT JOIN](http://dev.mysql.com/doc/refman/5.6/en/join.html)完成了这项工作。

对于主报告，它是完全相同的模式（如果需要，我很乐意为您提供帮助）**，但**我强烈建议您不要在 SQL 中执行此操作，因为这并不是它的工作。换位将非常难看，并且完全不可参数化（拼写？）。

我不知道您使用什么来输出报告，但您应该查看适合该业务的 BI 工具。凭记忆，贾斯珀报告，BIRT...

好吧，享受 SQL :p

# php - 如何在 Symfony2 中测试响应头？

> ID：11064305
> 
> 赞同：2
> 
> 时间：2012-06-16T14:35:38.070
> 
> 标签：php, unit-testing, symfony, phpunit

我写了一个响应监听器来绕过一些特定的内容类型，我想知道对它进行单元测试的最佳方法是什么。

你对我怎么能做到这一点有任何线索吗？

我需要创建控制器夹具来测试吗？

单元测试套件中是否允许进行功能测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:37:08.693

为听众编写单元测试相当简单。您只需要模拟您的侦听器所依赖的对象。在 Symfony 源代码中查找示例测试。

另一种方法可能是编写[功能测试](http://symfony.com/doc/current/book/testing.html#functional-tests)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-02T03:49:09.543

你可以使用这个。

```
 $logger = $this->client->getContainer()->get('logger');
            $logger->info("data->" . $response->headers->get("Location")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-28T03:50:27.103

从文档中，这是一个单元测试：

```
// src/Acme/DemoBundle/Tests/Utility/CalculatorTest.php
namespace Acme\DemoBundle\Tests\Utility;

use Acme\DemoBundle\Utility\Calculator;

    class CalculatorTest extends \PHPUnit_Framework_TestCase
    {
        public function testAdd()
        {
            $calc = new Calculator();
            $result = $calc->add(30, 12);

            // assert that your calculator added the numbers correctly!
            $this->assertEquals(42, $result);
        }
    } 
```

这是一个功能测试：

```
// src/Acme/DemoBundle/Tests/Controller/DemoControllerTest.php
namespace Acme\DemoBundle\Tests\Controller;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class DemoControllerTest extends WebTestCase
{
    public function testIndex()
    {
        $client = static::createClient();

        $crawler = $client->request('GET', '/demo/hello/Fabien');

        $this->assertGreaterThan(
            0,
            $crawler->filter('html:contains("Hello Fabien")')->count()
        );
    }
} 
```

请记住，功能测试无法测试 Ajax 等，因此最好使用功能浏览器测试框架来测试重型 Ajax 站点。

祝你好运

# c# - 如何更改字典的值

> ID：11064310
> 
> 赞同：0
> 
> 时间：2012-06-16T14:35:50.410
> 
> 标签：c#, .net, windows

我有一本字典

```
public static IDictionary<string, IList<string>> checksCollection = 
           new Dictionary<string, IList<string>>(); 
```

我在字典中添加如下：

```
public static void addCheck(string checkName, string hostName, 
          string port, string pollInterval, string alertEmail, 
          string alertSMS, string alertURI)
{
    checksCollection.Add(checkName, new[] { checkName, hostName, port, 
               pollInterval, alertEmail, alertSMS, alertURI });
} 
```

如何更改`alertURI`列表值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:41:47.870

最快的方法是`IList<string>`从字典中获取并访问它的第七个元素：

```
checksCollection[checkName][6] = "new value"; 
```

但如果我是你，我会将字符串数组中的所有这些值设为自己的类，这样你就不必对索引值进行硬编码，以防万一将来添加或删除其他属性。像这样创建一个类定义：

```
public class YourClass
{
    public string CheckName { get; set; }
    public string HostName { get; set; }
    public string Port { get; set; }
    public string PollInterval { get; set; }
    public string AlertEmail { get; set; }
    public string AlertSMS { get; set; }
    public string AlertURI { get; set; }
} 
```

并更改您的字典定义：

```
public static IDictionary<string, YourClass> checksCollection = 
    new Dictionary<string, YourClass>(); 
```

然后添加到它（虽然最好你会创建一个`YourClass`带参数的构造函数）：

```
public static void addCheck(string checkName, string hostName, string port, string pollInterval, string alertEmail, string alertSMS, string alertURI)
{
    checksCollection.Add(checkName, new YourClass() { 
        CheckName = checkName,
        HostName = hostName,
        Port = port,
        PollInterval = pollInterval,
        AlertEmail = alertEmail,
        AlertSMS = alertSMS,
        AlertURI = alertURI
    });
} 
```

然后修改变得简单，无需猜测数组索引：

```
checksCollection[checkName].AlertURI = "new value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:41:37.960

一种方法是做

```
checksCollection["somekey"][6] = "new value for alertURI" 
```

我建议创建一个代表这 7 个值的小对象，例如

```
class Foo {
    public string HostName { get; set; }
    public string Port { get; set; }
    public string PollInterval { get; set; }
    public string AlertEmail { get; set; }
    public string AlertSMS { get; set; } 
    public string AlertURI { get; set; }
} 
```

然后你可以改变它

```
checksCollection["key"].AlertURI = "something else"; 
```

# c - RegLoadAppKey 参数不正确

> ID：11064314
> 
> 赞同：0
> 
> 时间：2012-06-16T14:36:24.093
> 
> 标签：c, winapi, registry

我正在尝试打开 Windows 默认用户的注册表配置单元。我收到错误“参数无效”。我的代码如下：

```
PHKEY loadDefaultHiveAppKey(){

    PHKEY temporaryHKEY = 0;

    wchar_t * errorText = 0;
    //wchar_t * defaultProfileHiveFile = getDefaultUserProfileHive();
    /* For debugging purpouses use a hardcoded path */
    wchar_t * defaultProfileHiveFile = L"C:\\Users\\Default\\NTUSER.dat";

    long returnCode = 0;

    returnCode = RegLoadAppKey(
        defaultProfileHiveFile,
        temporaryHKEY,
        KEY_ALL_ACCESS,
        REG_PROCESS_APPKEY,
        0
    );

    //free(defaultProfileHiveFile);

    if(returnCode != ERROR_SUCCESS){

        // http://stackoverflow.com/questions/455434/how-should-i-use-formatmessage-properly-in-c
        FormatMessage(
           FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_IGNORE_INSERTS,  
           NULL,
           returnCode,
           MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
           (LPTSTR)&errorText,
           0, 
           NULL
        );

        printf("Failed to open registry hive!\n");

        if(errorText != 0){
                    /* This prints "The Parameter is Incorrect" */
            printf("%ls\n", errorText);

            LocalFree(errorText);
            errorText = NULL;

        } else {

            printf("Unknown reason!\n");

        }

        return 0;

    }

    return temporaryHKEY;

} 
```

我的 main 基本上只是对前面方法的调用。这是 msdn 的文章[`RegLoadAppKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724886%28v=vs.85%29.aspx)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:43:25.100

你`phkResult`错了。如果您将其读取为指向 HKEY 的指针，则会更清楚。你需要的是这样的：

```
HKEY temporaryHKEY;

returnCode = RegLoadAppKey(
    defaultProfileHiveFile,
    &temporaryHKEY,
    KEY_ALL_ACCESS,
    REG_PROCESS_APPKEY,
    0
); 
```

# asp.net-mvc - MVC 中的 ViewModel 是什么？

> ID：11064316
> 
> 赞同：468
> 
> 时间：2012-06-16T14:36:25.083
> 
> 标签：asp.net-mvc, viewmodel

我是 ASP.NET MVC 的新手。我无法理解 ViewModel 的用途。

什么是 ViewModel，为什么我们需要一个用于 ASP.NET MVC 应用程序的 ViewModel？

如果我能得到一个关于它的工作和解释的好例子，那就更好了。

* * *

## 回答 #1

> 赞同：661
> 
> 时间：2012-06-17T20:21:52.190

A`view model`表示您希望在视图/页面上显示的数据，无论是用于静态文本还是用于可以添加到数据库（或编辑）的输入值（如文本框和下拉列表）。它与您的`domain model`. 它是视图的模型。

假设您有一个`Employee`代表您的员工域模型的类，它包含以下属性（唯一标识符、名字、姓氏和创建日期）：

```
public class Employee : IEntity
{
     public int Id { get; set; }

     public string FirstName { get; set; }

     public string LastName { get; set; }

     public DateTime DateCreated { get; set; }
} 
```

视图模型与域模型的不同之处在于，视图模型仅包含您要在视图上使用的数据（由属性表示）。例如，假设您要添加新的员工记录，您的视图模型可能如下所示：

```
public class CreateEmployeeViewModel
{
     public string FirstName { get; set; }

     public string LastName { get; set; }
} 
```

如您所见，它仅包含两个属性。这两个属性也在员工域模型中。为什么会这样？ `Id`可能不是从视图中设置的，它可能是由 Employee 表自动生成的。并且`DateCreated`也可能设置在存储过程或应用程序的服务层中。因此`Id`，`DateCreated`视图模型中不需要。当您将员工的详细信息（已被捕获的员工）作为静态文本查看时，您可能希望显示这两个属性。

加载视图/页面时，员工控制器中的 create 操作方法将创建此视图模型的实例，如果需要填充任何字段，然后将此视图模型传递给视图/页面：

```
public class EmployeeController : Controller
{
     private readonly IEmployeeService employeeService;

     public EmployeeController(IEmployeeService employeeService)
     {
          this.employeeService = employeeService;
     }

     public ActionResult Create()
     {
          CreateEmployeeViewModel model = new CreateEmployeeViewModel();

          return View(model);
     }

     public ActionResult Create(CreateEmployeeViewModel model)
     {
          // Do what ever needs to be done before adding the employee to the database
     }
} 
```

您的视图/页面可能如下所示（假设您正在使用`ASP.NET MVC`视图`Razor`引擎）：

```
@model MyProject.Web.ViewModels.CreateEmployeeViewModel

<table>
     <tr>
          <td><b>First Name:</b></td>
          <td>@Html.TextBoxFor(m => m.FirstName, new { maxlength = "50", size = "50" })
              @Html.ValidationMessageFor(m => m.FirstName)
          </td>
     </tr>
     <tr>
          <td><b>Last Name:</b></td>
          <td>@Html.TextBoxFor(m => m.LastName, new { maxlength = "50", size = "50" })
              @Html.ValidationMessageFor(m => m.LastName)
          </td>
     </tr>
</table> 
```

因此，验证将仅在`FirstName`和上进行`LastName`。使用[FluentValidation](https://fluentvalidation.net/)，您可能会进行如下验证：

```
public class CreateEmployeeViewModelValidator : AbstractValidator<CreateEmployeeViewModel>
{
     public CreateEmployeeViewModelValidator()
     {
          RuleFor(m => m.FirstName)
               .NotEmpty()
               .WithMessage("First name required")
               .Length(1, 50)
               .WithMessage("First name must not be greater than 50 characters");

          RuleFor(m => m.LastName)
               .NotEmpty()
               .WithMessage("Last name required")
               .Length(1, 50)
               .WithMessage("Last name must not be greater than 50 characters");
     }
} 
```

使用数据注释，它可能看起来像这样：

```
public class CreateEmployeeViewModel : ViewModelBase
{
    [Display(Name = "First Name")]
    [Required(ErrorMessage = "First name required")]
    public string FirstName { get; set; }

    [Display(Name = "Last Name")]
    [Required(ErrorMessage = "Last name required")]
    public string LastName { get; set; }
} 
```

**要记住的关键是，视图模型只代表您要使用的数据**，没有别的。如果您有一个具有 30 个属性的域模型并且您只想更新一个值，您可以想象所有不必要的代码和验证。鉴于这种情况，您将在视图模型中只有一个值/属性，而不是域对象中的所有属性。

一个视图模型可能不仅有来自一个数据库表的数据。它可以组合来自另一个表的数据。以我上面关于添加新员工记录的示例为例。除了只添加名字和姓氏之外，您可能还想添加员工的部门。此部门列表将来自您的`Departments`表格。因此，现在您在一个视图模型中拥有来自`Employees`和表的数据。`Departments`然后，您需要将以下两个属性添加到您的视图模型并用数据填充它：

```
public int DepartmentId { get; set; }

public IEnumerable<Department> Departments { get; set; } 
```

在编辑员工数据（已经添加到数据库中的员工）时，它与我上面的示例没有太大区别。创建一个视图模型，例如调用它`EditEmployeeViewModel`。在此视图模型中仅包含您要编辑的数据，例如名字和姓氏。编辑数据并单击提交按钮。我不会太担心该`Id`字段，因为该`Id`值可能在 URL 中，例如：

```
http://www.yourwebsite.com/Employee/Edit/3 
```

把`Id`它和你的名字和姓氏值一起传递到你的存储库层。

删除记录时，我通常遵循与编辑视图模型相同的路径。我也会有一个 URL，例如：

```
http://www.yourwebsite.com/Employee/Delete/3 
```

当视图第一次加载时，我会使用`Id`3 从数据库中获取员工的数据。然后我会在我的视图/页面上显示静态文本，以便用户可以看到正在删除的员工。当用户单击“删除”按钮时，我将使用`Id`3 的值并将其传递给我的存储库层。您只需`Id`要从表中删除一条记录。

另一点，您并不真的需要每个动作的视图模型。如果它是简单的数据，那么只使用`EmployeeViewModel`. 如果它是复杂的视图/页面并且它们彼此不同，那么我建议您为每个视图使用单独的视图模型。

我希望这可以消除您对视图模型和域模型的任何困惑。

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2012-06-16T14:41:50.793

**视图模型**是表示特定视图中使用的数据模型的类。我们可以使用这个类作为登录页面的模型：

```
public class LoginPageVM
{
    [Required(ErrorMessage = "Are you really trying to login without entering username?")]
    [DisplayName("Username/e-mail")]
    public string UserName { get; set; }
    [Required(ErrorMessage = "Please enter password:)")]
    [DisplayName("Password")]
    public string Password { get; set; }
    [DisplayName("Stay logged in when browser is closed")]
    public bool RememberMe { get; set; }
} 
```

使用此视图模型，您可以定义视图（Razor 视图引擎）：

```
@model CamelTrap.Models.ViewModels.LoginPageVM

@using (Html.BeginForm()) {
    @Html.EditorFor(m => m);
    <input type="submit" value="Save" class="submit" />
} 
```

和行动：

```
[HttpGet]
public ActionResult LoginPage()
{
    return View();
}

[HttpPost]
public ActionResult LoginPage(LoginPageVM model)
{
    ...code to login user to application...
    return View(model);
} 
```

这会产生这个结果（屏幕是在提交表单后拍摄的，带有验证消息）：

![](../Images/f02a22752d278434d8127554fc31683c.png)

如您所见，视图模型有许多角色：

*   视图模型通过仅包含在视图中表示的字段来记录视图。
*   视图模型可能包含使用数据注释或 IDataErrorInfo 的特定验证规则。
*   视图模型定义了视图的外观（对于`LabelFor`, `EditorFor`,`DisplayFor`助手）。
*   视图模型可以组合来自不同数据库实体的值。
*   您可以轻松地为视图模型指定显示模板，并使用 DisplayFor 或 EditorFor 帮助器在许多地方重用它们。

另一个视图模型及其检索示例：我们要显示基本用户数据、他的权限和用户名。我们创建了一个特殊的视图模型，它只包含必填字段。我们从数据库中检索不同实体的数据，但视图只知道视图模型类：

```
public class UserVM {
    public int ID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public bool IsAdministrator { get; set; }
    public string MothersName { get; set; }
} 
```

恢复：

```
var user = db.userRepository.GetUser(id);

var model = new UserVM() {
   ID = user.ID,
   FirstName = user.FirstName,
   LastName = user.LastName,
   IsAdministrator = user.Proviledges.IsAdministrator,
   MothersName = user.Mother.FirstName + " " + user.Mother.LastName
} 
```

* * *

## 回答 #3

> 赞同：92
> 
> 时间：2015-03-19T01:30:59.010

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-06-16T14:44:39.910

如果您具有特定于视图的属性，并且与 DB/服务/数据存储无关，那么使用 ViewModel 是一个很好的做法。比如说，您想根据一个（或两个）数据库字段选中一个复选框，但数据库字段本身不是布尔值。虽然可以在模型本身中创建这些属性并将其隐藏在与数据的绑定中，但您可能不希望根据此类字段和事务的数量使模型混乱。

如果视图特定的数据和/或转换太少，您可以使用模型本身

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-09-09T20:53:25.650

我没有阅读所有帖子，但每个答案似乎都缺少一个真正帮助我“明白”的概念......

如果 Model 类似于数据库***Table***，那么 ViewModel 类似于数据库***View*** - 视图通常要么从一个表返回少量数据，要么从多个表（连接）返回复杂的数据集。

我发现自己使用 ViewModels 将信息传递到视图/表单中，然后在表单回发到控制器时将该数据传输到有效模型中——这对于存储列表（IEnumerable）也非常方便。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-09-19T06:30:43.457

视图模型 a 是一个简单的类，它可以包含多个类属性。我们使用它来继承所有必需的属性，例如我有两个类 Student 和 Subject

```
Public class Student
{
public int Id {get; set;}
public string Name {get; set;}
}  
Public class Subject
{
public int SubjectID {get; set;}
public string SubjectName {get; set;}
} 
```

现在我们想在视图中显示记录学生的姓名和学科的姓名（在 MVC 中），但是不能添加多个类，例如：

```
 @model ProjectName.Model.Student  
 @model ProjectName.Model.Subject 
```

上面的代码会报错...

现在我们创建一个类，可以给它起任何名字，但是这种格式“XyzViewModel”会更容易理解。是继承的概念。现在我们创建一个具有以下名称的第三个类：

```
public class StudentViewModel:Subject
{
public int ID {get; set;}
public string Name {get; set;}
} 
```

现在我们在 View 中使用这个 ViewModel

> @model ProjectName.Model.StudentViewModel

现在我们可以在 View 中访问 StudentViewModel 和继承类的所有属性。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-12-03T16:04:21.153

MVC 没有视图模型：它有模型、视图和控制器。视图模型是 MVVM（模型-视图-视图模型）的一部分。MVVM 源自 Presentation Model，在 WPF 中得到普及。MVVM 中也应该有一个模型，但大多数人完全忽略了该模式的要点，他们只会有一个视图和一个视图模型。MVC 中的模型类似于 MVVM 中的模型。

在 MVC 中，该过程分为 3 个不同的职责：

*   View 负责将数据呈现给用户
*   控制器负责页面流
*   模型负责业务逻辑

MVC 不太适合 Web 应用程序。它是 Smalltalk 引入的一种用于创建桌面应用程序的模式。Web 环境的行为完全不同。从桌面开发中复制一个 40 年前的概念并将其粘贴到 Web 环境中没有多大意义。然而很多人认为这没问题，因为他们的应用程序编译并返回正确的值。也就是说，在我看来，不足以宣布某个设计选择是可以的。

Web 应用程序中的模型示例可能是：

```
public class LoginModel
{
    private readonly AuthenticationService authentication;

    public LoginModel(AuthenticationService authentication)
    {
        this.authentication = authentication;
    }

    public bool Login()
    {
        return authentication.Login(Username, Password);
    }

    public string Username { get; set; }
    public string Password { get; set; }
} 
```

控制器可以像这样使用它：

```
public class LoginController
{
    [HttpPost]
    public ActionResult Login(LoginModel model)
    {
        bool success = model.Login();

        if (success)
        {
            return new RedirectResult("/dashboard");
        }
        else
        {
            TempData["message"] = "Invalid username and/or password";
            return new RedirectResult("/login");
        }
    }
} 
```

您的控制器方法和模型将很小，易于测试且切中要害。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2016-01-29T07:46:26.617

很多大的例子，让我清晰明了地解释。

ViewModel = 为视图服务而创建的模型。

*ASP.NET MVC 视图不能有多个模型，因此如果我们需要将多个模型的属性显示到视图中，这是不可能的。ViewModel 服务于这个目的。*

View Model 是一个模型类，它只能包含视图所需的那些属性。它还可以包含来自数据库的多个实体（表）的属性。顾名思义，这个模型是根据视图要求创建的。

下面是几个视图模型的示例

*   要在视图页面中列出来自多个实体的数据——我们可以创建一个视图模型并拥有我们想要列出数据的所有实体的属性。加入这些数据库实体并设置视图模型属性并返回视图以一种表格形式显示不同实体的数据
*   视图模型可能只定义视图所需的单个实体的特定字段。

ViewModel 也可用于将记录插入、更新到多个实体中，但 ViewModel 的主要用途是将来自多个实体（模型）的列显示到单个视图中。

创建 ViewModel 的方法与创建 Model 相同，为 Viewmodel 创建视图的方法与为 Model 创建视图的方法相同。

[这是一个使用 ViewModel 的 List 数据](http://techfunda.com/howto/262/list-data-using-viewmodel)的小例子。

希望这会有用。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2017-10-03T09:03:51.657

ViewModel 是修补 MVC 框架概念上的笨拙的解决方法。它代表 3 层 Model-View-Controller 架构中的第 4 层。当 Model（领域模型）不合适，对于 View 来说太大（大于 2-3 个字段）时，我们创建较小的 ViewModel 将其传递给 View。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-01-19T07:30:28.687

View Model 是我们可以用来在 View 上呈现数据的类。假设您有两个实体 Place 和 PlaceCategory，并且您想使用单个模型访问这两个实体的数据，那么我们使用 ViewModel。

```
 public class Place
    {
       public int PlaceId { get; set; }
        public string PlaceName { get; set; }
        public string Latitude { get; set; }
        public string Longitude { get; set; }
        public string BestTime { get; set; }
    }
    public class Category
    {
        public int ID { get; set; }
        public int? PlaceId { get; set; }
        public string PlaceCategoryName { get; set; }
        public string PlaceCategoryType { get; set; }
    }
    public class PlaceCategoryviewModel
    {
        public string PlaceName { get; set; }
        public string BestTime { get; set; }
        public string PlaceCategoryName { get; set; }
        public string PlaceCategoryType { get; set; }
    } 
```

所以在上面的示例中 Place 和 Category 是两个不同的实体，并且 PlaceCategory 视图模型是我们可以在视图上使用的视图模型。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-09-21T09:16:41.793

视图模型是数据的概念模型。例如，它的用途是获取子集或组合来自不同表的数据。

您可能只需要特定的属性，因此这允许您只加载那些而不是额外的不必要的属性

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-11-10T07:44:01.640

*   ViewModel 包含在视图中表示的字段（对于 LabelFor、EditorFor、DisplayFor 助手）
*   ViewModel 可以使用数据注释或 IDataErrorInfo 具有特定的验证规则。
*   ViewModel 可以有来自不同数据模型或数据源的多个实体或对象。

**设计视图模型**

```
public class UserLoginViewModel 
{ 
[Required(ErrorMessage = "Please enter your username")] 
[Display(Name = "User Name")]
[MaxLength(50)]
public string UserName { get; set; }
 [Required(ErrorMessage = "Please enter your password")]
 [Display(Name = "Password")]
 [MaxLength(50)]
 public string Password { get; set; } 
} 
```

**在视图中呈现视图模型**

```
@model MyModels.UserLoginViewModel 
@{
 ViewBag.Title = "User Login";
 Layout = "~/Views/Shared/_Layout.cshtml";
}
@using (Html.BeginForm())
{
<div class="editor-label">
 @Html.LabelFor(m => m.UserName)
</div>
<div class="editor-field">
 @Html.TextBoxFor(m => m.UserName)
 @Html.ValidationMessageFor(m => m.UserName)
</div>
<div class="editor-label">
 @Html.LabelFor(m => m.Password)
</div>
<div class="editor-field">
 @Html.PasswordFor(m => m.Password)
 @Html.ValidationMessageFor(m => m.Password)
</div>
<p>
 <input type="submit" value="Log In" />
</p>
</div>
} 
```

**与行动一起工作**

```
public ActionResult Login()
{ 
return View();
}
[HttpPost]
public ActionResult Login(UserLoginViewModel user)
{
// To acces data using LINQ
DataClassesDataContext mobjentity = new DataClassesDataContext();
 if (ModelState.IsValid) 
{ 
try
 {
 var q = mobjentity.tblUsers.Where(m => m.UserName == user.UserName && m.Password == user.Password).ToList(); 
 if (q.Count > 0) 
 { 
 return RedirectToAction("MyAccount");
 }
 else
 {
 ModelState.AddModelError("", "The user name or password provided is incorrect.");
 }
 }
 catch (Exception ex)
 {
 } 
 } 
 return View(user);
} 
```

1.  在 ViewModel 中只放置您想要在视图/页面上显示的那些字段/数据。
2.  由于视图代表了 ViewModel 的属性，因此易于渲染和维护。
3.  当 ViewModel 变得更复杂时使用映射器。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-10-09T09:53:06.513

如果您想学习如何使用 ViewModels 设置“基线”Web 应用程序的代码，我可以建议在 GitHub 上下载此代码：[https](https://github.com/ajsaulsberry/BlipAjax) ://github.com/ajsaulsberry/BlipAjax 。我开发了大型企业应用程序。当你这样做时，设置一个处理所有这些“ViewModel”功能的良好架构是有问题的。我认为使用 BlipAjax，您将拥有一个非常好的“基线”。它只是一个简单的网站，但非常简单。我喜欢他们使用英语来指出应用程序中真正需要什么的方式。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-07-19T19:45:36.123

ViewModel 是包含要在 mvc View 中使用的字段的模型。将 ViewModel 用于视图有以下好处：

*   由于数据库模型（实体类）包含单个表的数据。如果需要来自多个表的数据，单个 Viewmodel 可以有多个表的字段。
*   用户不能直接与数据库模型交互，因此数据库层或模型是安全的。
*   它用于通过存储库从数据库模型中获取数据并传递给视图。同样，它利用将数据发布到数据库模型来更新数据库记录。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-24T06:36:20.600

视图模型与您的数据模型相同，但您可以在其中添加 2 个或更多数据模型类。据此，您必须更改控制器以一次采用 2 个模型

# javascript - 正则表达式不匹配

> ID：11064317
> 
> 赞同：1
> 
> 时间：2012-06-16T14:36:25.353
> 
> 标签：javascript, html, regex

这是我的字符串：

```
<link href="/post?page=4&amp;tags=example" rel="last" title="Last Page"> 
```

从那里我试图使用这个正则表达式获取该参数的`4`输出：`page`

```
link href="/post?page=(.*?)&amp;tags=(.*?)" rel="last" 
```

然后我将收集第一组中的 4 个，tags 参数有一个通配符，因为内容可以改变。但是，我似乎没有与此匹配，有人可以帮忙吗？

而且我知道我不应该使用正则表达式来解析 HTML，但这只是一件小事，为此导入一个巨大的模块是一种浪费。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T14:44:50.480

假设您使用的是`/regex literal/`，则需要`/`将该路径中的 转义为`\/`。

或者，这取决于您如何获取此字符串。它真的是这样输入的，还是你要再次读出的 innerHTML 的一部分？如果是这种情况，那么 innerHTML 将不是您期望的那样，因为浏览器会将其“规范化”。

如果它是一个innerHTML，那么获取标签会容易得多，然后获取标签的`href`属性，然后对其进行正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:43:27.383

我认为将您的捕获组更改为稍微不同的东西可能会更好，但会将所有内容都赶上*终止*角色：

`link href="/post?page=([^&]+)&amp;tags=([^\"]+)" rel="last"`

在字符组中首先使用否定字符告诉正则表达式引擎“捕获除此处列出的字符之外的所有字符”。这使得捕获所有内容变得非常容易，直到它遇到终止字符，例如＆符号和双引号。假设您使用的是 PHP 或 Java，这也应该会稍微提高正则表达式的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T14:43:29.890

`link href="/post\?page=(.*?)&amp;tags=(.*?)" rel="last"`
你之前忘记了斜线`?`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T14:42:55.490

如果`page`参数总是先出现，请尝试[PCRE](http://www.pcre.org/) `/\?page=(\d+)/`。匹配组 1 将包含页码。

# android - Android java.lang.NoSuchFieldError

> ID：11064319
> 
> 赞同：4
> 
> 时间：2012-06-16T14:36:30.437
> 
> 标签：android

在某些情况下，当从匿名类访问活动字段时，我在运行时收到 NoSuchFieldError：*java.lang.NoSuchFieldError: MyActivity.myField*

**编辑：**我现在确定这是一个 Android 问题，因为一切都正确编译但在运行时解析不正确。当更改为*MyActivity.this.myField*而不是普通的*myField*时，一切正常。

顺便说一句，我重新检查并在其他任何地方都没有任何其他 myField，此外，在 Eclipse 中打开声明时，它会转到预期的字段（*myField*）。

唯一的问题是我无法在示例项目中重现这一点。我只能声明这是我项目中的一个特定问题，但我不愿意这样做，我不能发布这个项目。

我会保持这个开放，以防有人偶然发现类似的东西。

**这是我可以发布的代码，它使我的项目崩溃，但不是示例代码：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    new Runnable() {
        @Override
        public void run() {
            Toast.makeText(MyActivity.this, myField.getName(), Toast.LENGTH_SHORT).show();
        }
    }.run();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:36:31.640

似乎使用类前缀访问字段可以解决它：*MyActivity.this.myField*

奇怪的。我想这与 Android 在运行时的字段解析有关。

# php - 在正则表达式中不允许的标签处截断字符串

> ID：11064322
> 
> 赞同：2
> 
> 时间：2012-06-16T14:36:38.863
> 
> 标签：php, regex

我得到了这个工作正常的正则表达式，可与 php 的 preg_match_all 一起使用，以匹配包含句子/字符串中特定单词之前 0 到 x 行和 0 到 y 行的字符串：

```
'(?:[^\.?!<]*[\.?!]+){0,x}(?:[^\.?!]*)'.$word.'(?:[^\.?!]*)(?:[\.?!]+[^\.?!]*){0,y}'.'(?:[\.?!]+)' 
```

现在，我希望在出现特定标签时切断字符串。所以我正在考虑在上面的这个字符串中实现这部分：

```
(?:(<\/?(?!'.$allowed_tags.'))) 
```

其中 $allowed_tags 是一个 php 变量，可能如下所示：`'(frame|head|span|script)'`

尽管试图让它与前瞻、后瞻和其他条件一起工作，但我无法让它正常工作，不幸的是我不得不承认这超出了我的编程技能。

希望有人可以帮助我吗？我相信你们天才中的某个人可以:)

提前非常感谢！

输入输出示例：

例如，我想抓住这部分：

```
<p>Tradition, Expansion, Exile.<br/>Individual paths in Chinese contemporary art </p><p>The contemporary <i>art world</i> craves for novelty: the best reason for Chinese art to be so trendy is also the <strong>worst one</strong>.</p> 
```

从这个完整的字符串：

```
<div readability="120"><p>Tradition, Expansion, Exile.<br/>Individual paths in Chinese contemporary art </p><p>The contemporary <i>art world</i> craves for novelty: the best reason for Chinese art to be so trendy is also the <strong>worst one</strong>.</p><div> 
```

这意味着在这个例子`<p></p><i></i><strong></strong> <br/>`中是允许的标签和`<div >`不是`</div>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:00:13.187

假设您[根据您的评论](https://stackoverflow.com/questions/11064322/cut-off-string-at-not-allowed-tags-in-regex#comment14490912_11064322)`div`定义并`span`标记为“非法” ，则以下正则表达式将匹配句子 conatining之前和之后的句子，只要这些句子不包含“非法”标签：`x``y``$word`

```
'(?:(?<=[.!?]|^)(?:(?<!<div|<\/div|<span|<\/span)>|[^>.!?])+[.!?]+){0,x}[^.!?]*'.$word.'[^.!?]*[.!?]+(?:(?:<(?!\/?div|\/?span)|[^<.!?])*[.!?]+){0,y}' 
```

拆分并解释（引号和字符串连接运算符已删除，添加注释和换行符以便更好地阅读）：

```
 // 0 TO X LEADING SENTENCES
(?: ---------------------------------// do not create a capture group
  (?<=[.!?]|^) ----------------------// match only after sentence end or start of string
  (?: -------------------------------// do not create a capture group
    (?<!<div|<\/div|<span|<\/span)> -// match “&gt;” only if not preceded by span or div tags
    |[^>.!?] ------------------------// or any any other, non punctuation character
  )+ --------------------------------// one or more times
  [.!?]+ ----------------------------// followed by one or more punctuation characters
){0,x} ------------------------------// the whole sentence repeated 0 to x times
                                     // MIDDLE SENTENCE WITH KEYWORD
[^.!?]* -----------------------------// match 0 or more non-punctuation characters
$word -------------------------------// match string value of $word
[^.!?]* -----------------------------// match 0 or more non-punctuation characters
[.!?]+ ------------------------------// followed by one or more punctuation characters
                                     // 0 TO Y TRAILING SENTENCES
(?: ---------------------------------// do not create a capture group
  <(?!<\/?div|\/?span) --------------// match “&lt;” not followed by a “div” or “span” tag
  |[^<.!?] --------------------------// or any non-punctuation character that is not “&lt;”
  )* --------------------------------// zero or more times
  [.!?]+ ----------------------------// followed by one or more punctuation characters
){0,y} ------------------------------// the whole sentence repeated 0 to y times 
```

请注意，用于匹配之前句子的后向断言`$word`只会匹配没有属性的开始和结束标签，并且必须从字面上匹配开始和结束标签变体，[因为后向断言不能是可变长度的](http://www.php.net/manual/de/regexp.reference.assertions.php)。还有其他限制和陷阱：

*   值得注意的是，如果正则表达式*位于*包含`$word`
*   而“inside”一个句子的字面意思是“在前一个句子的结束标点之后”，虽然形式上是正确的，但可能不是预期的。

**所有这些都凸显了基于正则表达式的方法解决问题的局限性。**鉴于此，您可能会认为切换到更程序化的方法（例如将所有句子解析为一个数组而不考虑标签，然后扫描“非法”标签并相应地修剪或拒绝数组，这将允许更灵活的标签匹配regex) 会工作得更好，而且你是对的，如果不是因为将自然语言结构（如句子）与正则表达式匹配具有任何程度的准确性的潜在困难。我会让你思考这个问题和答案中使用的“句子拆分”正则表达式会对以下内容产生什么影响：

> “TJ Hooker 由 Starship Enterprise 的 W. Shatner 设计（原文如此。）成名”</p>

这不漂亮。结果也不是。

# amazon-ec2 - 在实例启动时自动启动 apache - aws 自动缩放

> ID：11064323
> 
> 赞同：2
> 
> 时间：2012-06-16T14:36:41.373
> 
> 标签：amazon-ec2, amazon-web-services, ec2-ami, autoscaling

我有一个 ec2 实例为 apache 提供网页服务。我在启动配置中使用此实例的 AMI 创建了一个自动缩放组。一旦 CPU 超过 80% 并且自动缩放策略运行，就会创建一个新实例。但是我的原始实例的 CPU 继续上升，而我的新实例的 CPU 保持在 0%。

新实例未提供网页。我猜这是因为 apache 并没有随着图像的启动而启动。我尝试通过 ssh 进入新实例以运行“service httpd start”，但出现以下错误：

```
ssh: Could not resolve hostname http://ec2-xxx-xx-xxx-xxx.compute-1.amazonaws.com:
nodename nor servname provided, or not known 
```

为什么我不能 ssh 进入？如何配置自动缩放以在启动时自动启动 apache？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:43:08.443

您似乎正在尝试通过 ssh 连接到主机名中带有 http:// 的主机。删除它，ssh 应该可以工作。

假设您创建了要在 AutoScaling 中使用的 AMI，您需要确保`chkconfig httpd on`在为 AutoScaling 创建新的 AMI 之前位于源实例中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-19T16:57:22.343

为了让您连接到 EC2 实例，您需要两件事：

*   与您的实例关联的安全组具有允许 SSH 通信的入站规则。
*   确保您拥有为实例生成的私钥。注意：仅当您首先选择使用密钥时才需要这样做。

如果这两件事是正确的，那么您可以像这样连接到您的实例：

`ssh -i "PATH_TO_YOUR_KEY.pem" ec2-user@ec2-xxx-xx-xxx-xxx.compute-1.amazonaws.com`

对于另一点，即确保您可以在启动时启动 apache，您可以做两件事：

*   正如@atbell 在之前的回答中提到的，您可以确保`chkconfig YOUR_SERVICE on`AMI 在用于启动您的实例的 AMI 上。
*   您可以将命令作为用户数据添加到您的 LaunchConfiguration，以便在实例启动后立即运行它：

[![启动配置向导](../Images/77f00c1bc50cef1a4d818aa310168345.png)](https://i.stack.imgur.com/AijKb.png)

这将`start YOUR_SERVICE start`在实例可以响应命令后立即运行。因此，每当您的 AutoScaling 组创建另一个实例时，您的服务肯定会启动。请注意，默认情况下，添加到 LaunchConfiguration 的用户数据字段的命令将作为 sudo 执行。

# sql-server-2008 - 在 Management Studio 中查找实例名称

> ID：11064326
> 
> 赞同：1
> 
> 时间：2012-06-16T14:37:22.830
> 
> 标签：sql-server-2008, instance, ssms

如何在 SQL Server 2008 的 SSMS 中查找和定位活动实例的当前名称？

我的主机名是 SAKURA-PC。
在我的客户端中，我有两个名为 MSSQLSERVER2008 和 MSSQLSERVER 的实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T14:43:45.583

`select @@ServerName` 在查询分析器中为您提供服务器\实例。

# jquery - jplayer大小参数显示右边的尺寸播放器上方的黑框

> ID：11064327
> 
> 赞同：1
> 
> 时间：2012-06-16T14:37:30.350
> 
> 标签：jquery, parameters, size, jplayer

我正在使用播放列表插件测试 jpayler 插件，并在编辑演示源文件时遇到问题。我尝试像这样设置**大小**参数：

```
size: {
       width: "600px",
       height: "300px"
      } 
```

但是，它会导致：

[http://tinypic.com/r/29d8g87/6](http://tinypic.com/r/29d8g87/6)

此参数似乎调整了显示视频/海报的容器的大小，但播放列表和播放器界面保持相同的尺寸。由于演示文件的第二个播放器仅显示没有海报的音频媒体，我理解黑匣子。是否有设置整个播放器维度（包括播放列表）的参数或者我应该编辑皮肤的 css？

[我使用的演示文件是来自http://jplayer.org/latest/jQuery.jPlayer.2.1.0.demos.zip](http://jplayer.org/latest/jQuery.jPlayer.2.1.0.demos.zip)的“demo-02-multi-bm.htm”

# android - startActivity + .class 结构

> ID：11064328
> 
> 赞同：0
> 
> 时间：2012-06-16T14:37:39.610
> 
> 标签：android

是否可以将 TargetActivity.class 传递给另一个活动并执行以下操作：

```
// first activity 
intent.putExtra("target", TargetActivity.class);
startActivity(intent);

//second activity
startActivity(this, getIntent().getExtra(/*target*/); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:40:29.267

您可以在 intnet 中作为字符串传递，并且可以使用 Class.ForName............

```
 Class t = Class.forName("java.lang.Thread") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:47:20.417

试试这个

**// 第一个活动**

```
intent.putExtra("target", "YOUR_PACKAGE_NAME.TargetActivity");
startActivity(intent); 
```

**//第二个活动**

```
 String className=getIntent().getStringExtra("target");
    Intent intent = new Intent();
    try {
        intent.setClass(CurrentActivity.this, Class.forName(className));
        startActivity(intent);
    } catch (ClassNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    } 
```

**编辑：**

# asp-classic - Microsoft VBScript 运行时错误“800a0009”

> ID：11064329
> 
> 赞同：3
> 
> 时间：2012-06-16T14:37:45.003
> 
> 标签：asp-classic, runtime-error

我最近继承了一个ASP的网站，我不熟悉。昨天，其中一个页面开始报错：

```
Microsoft VBScript runtime error '800a0009'

Subscript out of range: 'i'

default.asp, line 19 
```

这是第 13-27 行的代码：

```
<%
set rs = Server.CreateObject("ADODB.Recordset")
rs.open "SELECT * FROM VENDORS_LIST_TBL WHERE inStr('"& dVendorStr &"','|'&ID&'|')", Cn

DIM dTitle(100), dDescription(100), dLink(100)
i = 0 : Do while NOT rs.EOF : i = i + 1
dTitle(i) = rs.fields.item("dTitle").value
dDescription(i) = rs.fields.item("dDescription").value
dLink(i) = rs.fields.item("dLink").value : if dLink(i) <> "" then dTitle(i) = "<a href=""" & dLink(i) & """>" & dTitle(i) & "</a>"
if NOT rs.EOF then rs.movenext
Loop
x = i

rs.Close : Set rs = Nothing
%> 
```

关于这里发生了什么以及如何解决它的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:25:09.560

The "solution" you chose is not very good. What if within 2 years there will be more than 500? You will forget all about this and waste hours yet again.

Instead of fixed size arrays you can just use dynamic arrays:

```
DIM dTitle(), dDescription(), dLink()
ReDim dTitle(0)
ReDim dDescription(0)
ReDim dLink(0)
i = 0
Do while NOT rs.EOF
    i = i + 1
    ReDim Preserve dTitle(i)
    ReDim Preserve dDescription(i)
    ReDim Preserve dLink(i)    
    dTitle(i) = rs.fields.item("dTitle").value
    dDescription(i) = rs.fields.item("dDescription").value
    dLink(i) = rs.fields.item("dLink").value
    If (Not(IsNull(dLink(i)))) And (dLink(i) <> "") Then
        dTitle(i) = "<a href=""" & dLink(i) & """>" & dTitle(i) & "</a>"
    End If
    rs.movenext
Loop 
```

This will start with one (empty) item in each array - for some reason the code seems to need this - then on each iteration one more item will be added, preserving the others.

Note that I've also fixed small issue that might have caused trouble - in case of NULL value in "dLink" field, you would get blank anchors in your HTML because NULL is not empty string in VBScript.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T15:31:27.940

您已将 dTitle、dDescription 和 dLink 声明为大小为 100 的数组。当您遍历记录集时，您正在为这些数组分配元素。您的记录集中似乎有 100 多条记录，因此逻辑尝试执行以下操作：

```
dTitle(101) = rs.fields.item("dTitle").value 
```

这将引发错误，因为您的数组不足以容纳所有数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:49:22.063

这如何`GetRows`可以用来实现相同的目标。

```
<% 

Function VendorSearch(sVendor)

    Dim cn:  Set cn = SomeLibraryFunctionThatOpensAConnection()
    Dim cmd: Set cmd = Server.CreateObject("ADODB.Command")
    cmd.CommandType = adCmdText
    cmd.CommandText = "SELECT dTitle, dDescription, dLink FROM VENDORS_LIST_TBL WHERE inStr(?,'|'&ID&'|')"
    cmd.Parameters.Append cmd.CreateParameter("Vendor", adVarChar, adParamInput, Len(sVendor), sVendor)
    Set cmd.ActiveConnection = cn
    Dim rs : Set rs = cmd.Execute()

    VendorSearch = rs.GetRows()

    rs.Close()
    cn.Close()
End Function

Dim arrVendor : arrVendor =  VendorSearch(dVendorStr)

Const cTitle = 0, cDesc = 1, cLink = 2

Dim i
For i = 0 To UBound(arrVendor, 2)
    If IsNull(arrVendor(cLink, i) Or arrVendor(cLink, i) = "" Then
        arrVendor(cTitle, i) = "<a href=""" & arrVendor(cLink, i) & """>" & arr(cTitle, i) & "</a>"
    End If 
Next

%> 
```

笔记：

*   Select 语句仅包含结果中需要的那些字段，应避免使用 *
*   参数化命令用于避免来自 SQL 联系的 SQL 注入威胁。
*   用于生成二维数组的字段索引的常量。
*   虽然此代码复制了标题值的原始修改，但这仅作为示例。实际上，HTML 的构建应该尽可能晚，并且所有诸如标题和描述的字符串的输出都应该`Server.HTMLEncode`在发送到响应之前传递。

# java - jboss中每个应用程序的类路径上的外部配置

> ID：11064330
> 
> 赞同：0
> 
> 时间：2012-06-16T14:37:55.627
> 
> 标签：java, configuration, jboss, classpath

我完全不熟悉 jboss 管理。我想在 jboss 上有一些应用程序（战争）。他们每个人都应该有外部配置 - 文件或更好的目录，在类路径上可用。当然，一个应用程序不能看到其他应用程序的配置。他们必须有完全不同的类路径。可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:35:06.707

您可以配置服务器配置文件以从多个外部文件夹（[https://community.jboss.org/wiki/HowToDeployMyApplicationInAnExternalDirectoryInJBoss-5?_sscc=t](https://community.jboss.org/wiki/HowToDeployMyApplicationInAnExternalDirectoryInJBoss-5?_sscc=t)）中获取应用程序，然后为每个文件夹设置权限

# apache-flex - Flex datagrid：为每一行/列添加一个菜单控件

> ID：11064333
> 
> 赞同：0
> 
> 时间：2012-06-16T14:38:43.833
> 
> 标签：apache-flex, datagrid, menu

我试图弄清楚这一点，但我无法做到。我有一个 AdvancedDataGrid，每一行都有列。每个列元素可以包含文本/图像或任何自定义 UiComponent。

我想要的是用户能够点击一个列，然后我显示一个这样的自定义菜单！（http://livedocs.adobe.com/flex/3/html/images/menu.png）

因此，当用户单击第 1 行第 1 列（例如员工姓名）时，菜单中的选项可能是： - 删除员工 - 显示员工报告

当用户单击第 1 行第 2 列（员工状态）时，选项可能是： - 删除员工 - 将员工设置为退休

我的问题是，当我单击 UiComponent 或数据网格中的文本时，不会触发单击事件。即使我设置了背景填充和 alpha。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T06:09:59.827

请在下面找到示例，您可以从中获得一些想法： - 我在这里发布示例，您可以通过它实现您正在寻找的东西。您可以使用以下逻辑使其更具自定义性。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <fx:XML format="e4x" id="myMenuDataEmpName">
            <root>
                <menuitem label="Delete employee"  data="ShowAlertPopup"/>
                <menuitem label="Show employee reports"  data="ShowAlertPopup"/>
            </root>
        </fx:XML>

        <fx:XML format="e4x" id="myMenuDataEmpStatus">
            <root>
                <menuitem label="Delete employee" data="ShowAlertPopup"/>
                <menuitem label="Set employee to retired"  data="ShowAlertPopup"/>
            </root>
        </fx:XML>
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            import mx.controls.Menu;
            import mx.events.FlexEvent;
            import mx.events.MenuEvent;

            [Bindable]
            private var dpHierarchy:ArrayCollection= new ArrayCollection([
                {name:"A", region: "Arizona"},
                {name:"B", region: "Arizona"},
                {name:"C", region: "California"},
                {name:"D", region: "California"}
            ]); 

            private function init():void
            {
                myADG.addEventListener(AGDRowCloumnMenuEvent.MENU_EVENT, menuHandler);
            }

            private function menuHandler(event:AGDRowCloumnMenuEvent):void
            {
                if(event.eventInfo == 'name')
                {
                    createAndShowEMP("Name")
                }
                else{
                    createAndShowEMP("Status")
                }
            } 

            private function createAndShowEMP(displayMenu:String):void {
                var myMenu:Menu;  
                    if(displayMenu == "Name")
                        myMenu = Menu.createMenu(null, myMenuDataEmpName, false);
                    else
                        myMenu = Menu.createMenu(null, myMenuDataEmpStatus, false);

                myMenu.labelField="@label";
                myMenu.addEventListener(MenuEvent.ITEM_CLICK, executeItemClickMenuHandler);
                myMenu.show(10, 10);
            }

            private function executeItemClickMenuHandler(menuEvent:MenuEvent):void {
                callLater(this[menuEvent.item.@data]);
            }

            private function ShowAlertPopup():void
            {
                Alert.show("Menu Item Clicked")
            }
        ]]>
    </fx:Script>

    <mx:AdvancedDataGrid id="myADG" x="50" y="50"
                         width="400" height="300" creationComplete="init()"
                         variableRowHeight="true" dataProvider="{dpHierarchy}">
        <mx:columns>
            <mx:AdvancedDataGridColumn dataField="name" headerText="Emp Name" itemRenderer="ADGRowColumnMenu"/>
            <mx:AdvancedDataGridColumn dataField="region" headerText="Emp Status" itemRenderer="ADGRowColumnMenu"/>
        </mx:columns>   

    </mx:AdvancedDataGrid>
</s:Application> 
```

项目渲染器名称：- ADGRowColumnMenu

```
 <?xml version="1.0" encoding="utf-8"?>
<s:MXAdvancedDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark" 
                                  xmlns:mx="library://ns.adobe.com/flex/mx" 
                                  focusEnabled="true">
    <fx:Script>
        <![CDATA[

            override public function set data(value:Object):void
            {
                super.data = value;
                lblData.addEventListener(MouseEvent.CLICK, clickHandler);   
            }

            private function clickHandler(event:MouseEvent):void
            {
                var eventData:AGDRowCloumnMenuEvent = new AGDRowCloumnMenuEvent(AGDRowCloumnMenuEvent.MENU_EVENT,true);
                eventData.eventInfo = listData['dataField'];
                dispatchEvent(eventData);
            }

        ]]>
    </fx:Script>
    <s:Label id="lblData" top="0" left="0" right="0" bottom="0" text="{listData.label}" />
</s:MXAdvancedDataGridItemRenderer> 
```

自定义事件，您可以通过它发送自定义数据名称：-AGDRowCloumnMenuEvent

```
package
{
    import flash.events.Event;

    public class AGDRowCloumnMenuEvent extends Event
    {
        public static const MENU_EVENT:String = "menuEvent";

        public var eventInfo:Object = null;

        public function AGDRowCloumnMenuEvent(type:String, bubbles:Boolean=false, cancelable:Boolean=false)
        {
            super(type, bubbles, cancelable);
        }
    }
} 
```

希望上面的代码可以帮助你。

# css - 展开时带有圆角和插入边框的 Div

> ID：11064334
> 
> 赞同：0
> 
> 时间：2012-06-16T14:38:45.013
> 
> 标签：css, safari, webkit

这在 Firefox 中似乎不是问题。但在 Safari 中很明显

我有一个带有圆角、插入边框和指定宽度的 div。你可以在[http://jsfiddle.net/jsoningram/fek5n/看到它](http://jsfiddle.net/jsoningram/fek5n/)

您会注意到 div 在左侧中途中断。好吧，实际上它并没有破裂，但似乎破裂了。如果我将 .beveled 类中的边框颜色更改为黑色，则它是可见的。我还可以删除边框样式并返回“缺少的链接”。

的HTML：

```
<div id="sub_nav" class="rounded_10 beveled">
    <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul> 
```

​</p>

的CSS：

```
#sub_nav {
    position: relative;
    background: #e6e6e6;
    width: 164px;
    min-height: 300px;
    float: left;
    padding: 0px 0px 27px 0px;
    z-index: 5;
    margin: 10px 0 0 10px;
}

#sub_nav li {
    position: relative;
    height: 50px;
    width: 160px;
    background: #ccc;
    margin: 0px 0px 1px 1px;
}

#sub_nav li:first-child {
    margin-top: 27px;
}

    .rounded_10 {
    -webkit-broder-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    behavior:url(_/inc/PIE.htc);
}

    .beveled {
    border: 1px solid #fbfbfb;
    border-style: inset;
} 
```

在此先感谢...​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:06:03.670

这与border-style:inset 的工作方式以及边框和背景颜色非常接近这一事实有关。

Inset 是一种 3-d 样式效果，但带有 1px 边框，很难弄清楚如何绘制效果。如果你改变

```
.beveled {border: 30px solid red; border-style:inset;} 
```

你会看到它试图完成什么。它采用基色，然后使其变暗/变亮以产生效果。你的浅灰色正在变亮为白色的一部分。

所以，去掉border-style:inset，然后改变边框颜色，你就应该做生意了。

```
.beveled {border: 1px solid #ccc;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:10:43.403

我做了一些实验，发现当您通过像这样设置每一边手动创建插入边框时会出现同样的问题。

```
.beveled {
    border-top: 2px solid #aaa;
    border-left: 2px solid #aaa;
    border-right: 2px solid #efefef;
}' 
```

我用最少的 css 创建了一个 jsFiddle 来显示这个问题。 [http://jsfiddle.net/MdE7q/](http://jsfiddle.net/MdE7q/)

它与宽高比有关。无法解释，但将我的示例中的宽度更改为 400px 并且间隙消失了。事实上，当宽度大于高度时，间隙根本不会出现，只有当高度大于宽度时才会出现。

此外，这在 IE9+ 中看起来很完美，这让我相信这是 webkit 和 firefox 中的渲染问题。

也许modernizr会在这里有所帮助。[http://modernizr.com/](http://modernizr.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T15:25:33.650

哇。这很奇怪。如果您使#sub_nav 180px 宽，那么它似乎可以解决它。 [http://jsfiddle.net/fek5n/11/](http://jsfiddle.net/fek5n/11/)

# php - 多个和/或子句难倒我

> ID：11064336
> 
> 赞同：-4
> 
> 时间：2012-06-16T14:38:47.150
> 
> 标签：php, mysql

这是我到目前为止所拥有的：

```
$checkbonus = mysql_query("Select theurl from `vaultpromo` where (accid=0 or accid=$acctype) and (shownum=$clickstoday or (showtype=1 and ($clickstoday%shownum=0))) AND 
(startdate<$today AND enddate>$daytime) OR (startdate=$today AND starttime<=$currenttime AND enddate>$daytime) limit 1");

if (mysql_num_rows($checkbonus) > 0) {
    DO SOMETHING
} 
```

但我收到此错误：

```
Warning: mysql_num_rows() expects parameter 1 to be resource,
boolean given in... 
```

任何帮助将不胜感激！

在这部分之前一切正常：

```
(startdate<$today AND enddate>$daytime) OR (startdate=$today AND starttime<=$currenttime AND enddate>$daytime) limit 1"); 
```

我已经检查过，它正在检查表中的正确行，并且我在查询之前定义了 $today、$daytime 和 $currenttime：

```
$today=date("Y-m-d");

$currenttime=date("H:i:s");

$daytime=date("Y-m-d H:i:s"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:44:56.043

原因是您的查询无效。所以它返回`False`一个布尔值，而不是一个结果集。

`mysql_num_rows()`不期望布尔值而是结果集，因此它发出警告。

检查是否所有 PHP 变量都被赋值或其中某个变量为空。

**编辑：**例如，如果`$acctype`为空，则查询变为

```
Select theurl from `vaultpromo` where (accid=0 or accid=) and (...
                                                    ^^^^^^ 
```

请确保每个变量都有一个值，检查以避免奇怪的情况...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:53:37.337

你应该这样做：

 `````
$checkbonus = mysql_query("Select theurl from `vaultpromo` where (accid=0 or 
accid=$acctype) and (shownum=$clickstoday or (showtype=1 and                 
($clickstoday%shownum=0))) AND 
(startdate<$today AND enddate>$daytime) OR (startdate=$today AND 
starttime<=$currenttime AND enddate>$daytime) limit 1");

//Check resultset variable if it contain data or not.
if($checkBonus)
{
    if (mysql_num_rows($checkbonus) > 0) {
       //DO SOMETHING
    }
}
else
{
    die('Invalid query: ' . mysql_error());
} 
````  `您收到此错误“警告：mysql_num_rows() 期望参数 1 是资源，布尔值在...中给出”，因为变量`$checkbonus` 不包含数据库资源并且返回 False，因为您的查询确实运行成功。

您的查询很可能包含错误，因为多个变量之一为空或未转义，因此导致查询错误。

顺便说一句，我强烈建议您考虑使用[PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)库。``

# vim - vim 中的 `:bar` 不能按预期工作

> ID：11064341
> 
> 赞同：1
> 
> 时间：2012-06-16T14:39:11.953
> 
> 标签：vim

在阅读有关以下内容的 vim 文档后[`*:bar* *:\bar*`](http://vimdoc.sourceforge.net/htmldoc/cmdline.html#cmdline-lines)：

> `'|'`可用于分隔命令，因此您可以在一行中给出多个命令。

* * *

我试图通过以下命令清除历史记录：

```
:set history=0 | set history=20 
```

我希望，这两个命令应该被一个一个执行，并且历史应该被清除。
但它没有。历史仍然存在，并添加了新的历史。

* * *

然后我尝试了：

```
:set history=0
:set history=20 
```

有用。

* * *

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T20:33:23.137

当您执行命令行时会发生以下情况：

1.  历史被初始化（截断发生在这里）（[`init_hist()`](http://code.google.com/p/vim/source/browse/src/ex_getln.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#5292)函数调用[`getcmdline()`](http://code.google.com/p/vim/source/browse/src/ex_getln.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#332)）。
2.  获得要执行的字符串（in [`getcmdline()`](http://code.google.com/p/vim/source/browse/src/ex_getln.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#344)）。
3.  它被添加到历史记录（[`add_to_history()`](http://code.google.com/p/vim/source/browse/src/ex_getln.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#5464)调用[`getcmdline()`](http://code.google.com/p/vim/source/browse/src/ex_getln.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#1905)）。
4.  它被执行（[`do_one_cmd()`](http://code.google.com/p/vim/source/browse/src/ex_docmd.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#1687)在[`do_cmdline()`](http://code.google.com/p/vim/source/browse/src/ex_docmd.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#1122)，发生在[`getcmdline()`](http://code.google.com/p/vim/source/browse/src/ex_docmd.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#1122)调用之后（[`getexline()`](http://code.google.com/p/vim/source/browse/src/ex_getln.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#2155)通过作为[`fgetline`](http://code.google.com/p/vim/source/browse/src/normal.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#5404)参数传递给[`do_cmdline()`](http://code.google.com/p/vim/source/browse/src/ex_docmd.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#751)））。

设置选项本身什么都不做，它只会[改变](http://code.google.com/p/vim/source/browse/src/option.c?r=ca39f14c1ec3dd00130348e6bedb788920fdd68b#4533) `p_hi`变量。历史的实际修改在步骤 1 完成。

现在让我们看看在这两种情况下会发生什么（假设您输入了第二个或第三个附加命令）：

1.  历史在具有旧值时首先被初始化`p_hi`，然后它被更改**两次**，然后当你执行下一个命令时它已经设置为`20`。
2.  历史在`p_hi`有旧值时首先初始化，然后更改一次并**第二次初始化，**在这一步被有效截断，然后值再次更改。当您开始输入第三个命令时，它已经被清除了。

因此，您的假设（命令被一一执行）是正确的，但是您错误地发生了历史修改。我宁愿建议`histdel()`按照@Michael 的建议使用，因为首先它会自行清除历史记录，其次，它没有硬编码的“历史记录”值。我不能说只有 20 行长的历史（我已将其设置为 65535 并且始终确保我不会丢失任何小但有用的东西），但硬编码此值会使历史大小更改为其他内容更痛苦。

# c# - Visual Studio 2012 不构建依赖项目

> ID：11064345
> 
> 赞同：33
> 
> 时间：2012-06-16T14:39:50.613
> 
> 标签：c#, ide, visual-studio-2012

我刚刚将一个 VS2010 项目升级到 VS2012，现在遇到了一个问题，即依赖项目不是按需构建的。例如，假设我的解决方案中有以下项目：

*   图书馆 A
*   控制台应用程序 1

ConsoleApp 1 引用库 A 的地方。如果我更改库 A 中的类中方法的签名并运行 ConsoleApp 1，则会出现编译器错误，因为 ConsoleApp 1 没有看到我的更改，因为运行 ConsoleApp 1 不会导致库 A建造。

如果我手动构建库 A，然后手动构建 ConsoleApp 1，它工作正常。但是，我希望运行 ConsoleApp 1 会导致在启动之前重新构建任何依赖项目。

我可以有一些配置不正确吗？或者这是VS2012中的一个错误？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-16T15:37:24.713

[你的症状听起来和我不久前经历的](https://stackoverflow.com/questions/4026463/build-builds-my-project-build-solution-doesnt)很相似。确保将项目设置为使用您当前的`active`解决方案`configuration`和活动解决方案平台在`Build->Configuration Manager`.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-16T15:14:51.823

尝试删除项目`references`并再次添加它们（遵循的路径：（`References ->`右键单击）`Add reference -> Solution -> Project`）。在再试一次之前`Save All`。这就是我解决它的方法。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-26T18:51:37.533

当解决方案的 .suo 文件被锁定并且 Visual Studio 不再能够对其进行写入时，就会发生这种情况。此问题的另一个症状是，当您打开解决方案时，您会看到在解决方案旁边创建了临时 suo 文件。尝试关闭 Visual Studio 并删除工作区中的所有 *.suo 文件。然后重新打开 Visual Studio 并重建所有内容。无需手动重建您的解决方案。这将解决由锁定的 .suo 引起的问题，就像我今天的一位同事发生的那样。

就他而言，原因似乎是他在 Visual Studio 仍处于打开状态时关闭了笔记本电脑。也许 Windows 的关闭没有完全完成？我们只能推测 .suo 最初是如何被锁定的。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-05-06T22:47:14.583

我尝试了上述所有解决方案，但并没有解决我的问题。我发现这是因为`Active configuration`在`ConfigurationManager`被设置为只构建主（启动）项目。

前往`Build`>`ConfigurationManager`

确保检查您要构建的所有项目，如下面的屏幕截图所示。这是 Asp.Net 论坛上的类似问题[，这是](http://forums.asp.net/t/996113.aspx/1)[MSDN](http://msdn.microsoft.com/en-us/library/kwybya3w.aspx)上的详细信息 。虽然很奇怪，但因为我从未更改过这些设置，上周它工作正常 ![在此处输入图像描述](../Images/aba739bcefa4ef05b7fbc278f31e206f.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-09-30T12:00:10.820

我遇到了类似的问题，解决方案（或问题）是选中“仅构建启动项目和运行依赖项”`Build and Run`下的设置。`Tools > Options... > Projects and Solutions > Build and Run`屏幕截图显示了我当前的工作解决方案。

![Visual Studio 2012 选项](../Images/d205d6d1a29b4bf7be1b4e2c1d6ec890.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-21T23:50:24.860

对我来说，我通过右键单击项目来解决问题；构建依赖项 > 项目依赖项。然后手动设置每个项目的顺序。如果你有很多项目会很痛苦。

[![在此处输入图像描述](../Images/899a493ff8f28093092884bbe139230f.png)](https://i.stack.imgur.com/Xzghw.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-22T15:54:47.157

确保引用项目具有与被引用项目相同或更高的 .Net 框架版本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-30T19:13:57.520

在解决方案资源管理器中右键单击解决方案，然后单击“清理解决方案”。

# jquery - jQuery：在选定复选框旁边显示提交按钮

> ID：11064348
> 
> 赞同：1
> 
> 时间：2012-06-16T14:40:31.563
> 
> 标签：jquery

我需要关于 jQuery 的帮助！

这是标记[http://jsfiddle.net/MxrqS/16/](http://jsfiddle.net/MxrqS/16/)

我想要做的是，默认情况下不会显示“继续步骤 2”按钮。但是，当仅选择其中一个时间段时，按钮会出现在所选时间旁边

任何人都可以帮助我实现这一目标？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T14:47:04.753

如果您需要这些元素是单选按钮，那么解决方案可能如下。

*HTML*：

```
<ul>
    <li id="time1">08:00am - 09:00am <input type="radio" name="time"></li>
    <li id="time2">09:00am - 10:00am <input type="radio" name="time"></li>
    <li id="time3">10:00am - 11:00am <input type="radio" name="time"></li>
</ul>
<input type="submit" value="Continue to Step 2" style="display: none;"> 
```

*​JavaScript* :

```
$(":radio").on("change", function() {
    $(this).after($(":submit").show());
});​ 
```

**演示：http:** [//jsfiddle.net/MxrqS/24/](http://jsfiddle.net/MxrqS/24/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:53:35.463

在您的情况下首选使用单选按钮，但是如果您想继续使用复选框，以下将起作用：

[http://jsfiddle.net/lucuma/MxrqS/29/](http://jsfiddle.net/lucuma/MxrqS/29/)

```
<ul>
    <li id="time1">08:00am - 09:00am <input type="checkbox"> <input type="submit" value="Continue to Step 2" style="display:none" /></li>
<li id="time2">09:00am - 10:00am <input type="checkbox" name="ch1"></li>
<li id="time3">10:00am - 11:00am <input type="checkbox" name="ch2" ></li>
</ul>​ 
```

JS：

```
$('input[type=checkbox]').change(function() {
    if ($(this).is(':checked')) {
       $('input[type=checkbox]').not(this).removeAttr('checked');
       $('input[type=submit]').appendTo($(this).parent()).show();
    } else {
         $('input[type=submit]').hide();
    }        
});​ 
```

# android - AudioRecord 读取返回奇怪的值

> ID：11064349
> 
> 赞同：0
> 
> 时间：2012-06-16T14:40:38.697
> 
> 标签：android, audio, android-sensors, android-audiorecord

我正在尝试为 Android 平台构建某种声音计。（我正在使用 HTC 野火）我使用`AudioRecord`该类来实现该目标，但似乎从其“读取”返回的值是不合理的。

这就是我创建 AudioRecord 对象的方式：

```
int minBufferSize = 
         AudioRecord.getMinBufferSize(sampleRateInHz,
                                      android.media.AudioFormat.CHANNEL_IN_MONO,
                                      android.media.AudioFormat.ENCODING_PCM_16BIT);

audioRecored = new AudioRecord( MediaRecorder.AudioSource.MIC,          
                                44100, 
                                android.media.AudioFormat.CHANNEL_IN_MONO,
                                android.media.AudioFormat.ENCODING_PCM_16BIT,
                                minBufferSize ); 
```

这就是我尝试从中读取数据的方式：

```
 short[] audioData = new short[bufferSize];
    int offset =0;
    int shortRead = 0;
    int sampleToReadPerGet = 1000;//some value in order to avoid momentaraly nosies.

    //start tapping into the microphone
    audioRecored.startRecording();

   //start reading from the microphone to an internal buffer - chuck by chunk
   while (offset < sampleToReadPerGet)
   {
            shortRead = audioRecored.read(audioData, offset ,sampleToReadPerGet - offset);
            offset += shortRead;
   }

   //stop tapping into the microphone
   audioRecored.stop();

    //average the buffer
    int averageSoundLevel = 0;
    for (int i = 0 ; i < sampleToReadPerGet ; i++)
    {
        averageSoundLevel += audioData[i];          
    }
    averageSoundLevel /= sampleToReadPerGet; 
```

这些价值观是什么？它们是分贝吗？

编辑：值从 -200 到 3000。shortRead 的值是 sampleToReadPerGet (1000)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:27:10.323

不确定您指的是什么“那些值”，原始输出或平均值，但原始输出是瞬时幅度水平。重要的是要意识到这些值并没有特别引用任何东西。也就是说，仅仅因为你正在阅读 20，并不能告诉你 20 是什么。

取这些值的平均值没有任何意义，因为这些值在零上下波动。做足够长的时间，你就会得到零。

取平方的平均值，然后找到平均值的平方根可能是有意义的。这称为 RMS。但是，如果没有固定的缓冲区大小来平均，这充其量是危险的。

要测量 dB，您必须使用公式 dB = 20 log_10 (|A|/A_r)，其中 A 是幅度，A_r 是参考幅度——显然，您必须决定要参考什么（您可以校准 HTC ，或针对最高水平或类似的东西进行测量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:41:29.787

你不应该得到负值。这些值跨越 16 位或 8 位，因此您的最大值约为 32000 或其他值。这些值没有单位。

此外，我建议使用均方根而不是平均值来确定交易量。它更稳定。

你应该尝试什么：

*   将缓冲区大小增加 3：您的应用程序读取它的速度可能不够快，因此您需要一些空间。否则，您可能会遇到一些缓冲区溢出错误（您没有在代码中检查）

*   试试[gast-lib](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/audio/record/AudioClipRecorder.java)中的代码：它可以帮助您定期录制音频并为您提供 AsyncTask。

*   均方根：

> ```
> public static double rootMeanSquared(short[] nums)
> {
>     double ms = 0;
>     for (int i = 0; i < nums.length; i++)
>     {
>         ms += nums[i] * nums[i];
>     }
>     ms /= nums.length;
>     return Math.sqrt(ms);
> } 
> ```

# cakephp - CakePHP：save() 失败但没有验证错误

> ID：11064354
> 
> 赞同：1
> 
> 时间：2012-06-16T14:41:29.820
> 
> 标签：cakephp, model, save

我正在尝试通过我的模型保存项目，但保存失败。

当我输出validationErrors - 我得到空数组，所以似乎没有可用的验证问题。我的失败可能是什么`save()`？

```
function resave($wid, $kTime){
    $this->contain();
    $word = $this->getById($wid);
    // Successfully tretrieved here
    $word['ModelName']['column'] = $kTime;
    if($this->save($word)){
        return 'success';
    }else{
        // this returns empty array
        return $this->validationErrors;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:15:51.143

为了在将来节省一些时间，如果 save() 不起作用，首先要查看 SQL 日志和错误。

您应该尝试为 CakePHP (https://github.com/cakephp/debug_kit) 安装调试工具包工具栏。它使查看您的 SQL 日志以及许多其他有用的东西变得容易。或者，或者，您可以将其放在布局文件中以查看 SQL 历史记录/错误：

```
<?php echo $this->element('sql_dump'); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:40:27.693

这是一个问题`float`和`array`类型。我用`gettype()`它进行了调查并弄清楚了。

# scala - Scala：蛋糕模式的延迟烘焙和运行时编译

> ID：11064364
> 
> 赞同：1
> 
> 时间：2012-06-16T14:41:57.557
> 
> 标签：scala, dynamic, compiler-construction, cake-pattern

蛋糕图案的一大局限是它的静态性。我希望能够完全独立地混合可能由不同编码人员编写的特征。然而特征**不会**需要经常混入。在运行主应用程序之前，用户将有一个初始化屏幕，他们将在其中选择特征/程序集。所以我想到为什么不在用户选择选择模块中混合和编译选择的特征。如果编译失败，用户只会收到一些消息——不兼容的程序集或其他任何问题。如果编译成功，那么顶层 UI 模块将加载新编译的类以及程序集的预编译部分并运行主应用程序。请注意，在运行时初始化期间可能只需要编译一两个类。所有其余的代码都可以正常编译。

我对 Scala 很陌生。**这是公认的模式吗？有什么支持吗？**对于相对简单的依赖情况，不得不使用 Guice 似乎很疯狂。**我可以在应用程序中轻松运行 Scala 编译器吗？我可以在内存中运行它并从内存中使用它的输出而无需创建不必要的文件吗？**

注意：虽然看起来是动态的，但这种方法将保持**100% 静态。**

编辑它发生在 Microsoft 的 Roslyn 项目的驱动力之一是为 C# 和 Visual Basic 启用这种东西。但这似乎是一个相当大的项目，即使对于一个强大的微软团队来说也是如此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T15:10:37.613

直接从 Scala 中调用编译器是可行的，但不适合胆小的人。幸运的是，Twitter 的优秀人员已经为你自动化了这个过程。（140 个字符的名人微博，以及一些很酷的 Scala 实用程序！感谢 Twitter。）您可以使用 com.twitter.utils.Eval 类来编译和评估 Scala 字符串。在你的例子中，你会做类似的事情

```
val eval = new Eval()
val myObj = eval[BaseClass]("new BaseClass extends " + traitNameList.mkString(" with ")) 
```

这将为您创建一个具有您希望内置的所有特征的新对象。然后出现的问题是这是否是一个好主意。缺点：

*   调用 Scala 编译器并不快
*   如果你做的足够多，你会超载 PermGen 空间，因为你创建的类永远不会被垃圾回收
*   这实际上更像是您想要一种动态语言而不是 Scala 的那种东西。你很可能会找到各种工作的地方，但与你的架构的其他部分发生冲突（是的，这很模糊）。

# javascript - 在 RaphaelJS 中自定义饼图

> ID：11064366
> 
> 赞同：2
> 
> 时间：2012-06-16T14:42:18.733
> 
> 标签：javascript, jquery, svg, raphael, pie-chart

我期待定制**Raphael JS 饼图**...

这是代码， [http://jsfiddle.net/kcQbe/](http://jsfiddle.net/kcQbe/)

我在其中设置了4个类别...

首先，我想更改在 JavaScript 中单独定义的每个类别的颜色填充或路径颜色，例如，类别循环到数组中，`data = [90, 90, 90, 90]`这里称为 90 是我们定义类别角度的度数，就像我想要的那样颜色也应该单独定义并与此类似...可能是这样`fill = ["#000","#ccc","#ddd","#eee"]` 我不确定的想法可能是错误的...

同样在单击它时颜色会发生变化，我希望颜色应保持与单击它之前的颜色相同...

有人可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:14:30.187

通过查看 Jeff 和 A​​lex 的其他答案，创建了一个工作示例 - [Demo](http://jsfiddle.net/nsjithin/UXaQL/)

我认为这是您想要的输出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T07:38:27.950

只需更新杰夫的答案：

颜色：

将颜色参考传递给函数：`r.customAttributes.segment = function (x, y, r, a1, a2, color) {...`

在数据后添加颜色数组 var：`var data = [90, 90, 90, 90], color = ['#ff0000', '#00ff00', '#0000ff', '#ff0000'], ...`

在最后一个循环中：

```
 start = 0;
            for (i = 0; i < ii; i++) {
                var val = 360 / total * data[i];
                var col = color[i]; //Add color from array
                (function (i, val) {
                    //Here we pass the color (col)
                    paths.push(r.path().attr({segment: [200, 200, 1, start, start + val, col], stroke: "#fff"}).click(function () {
            ... 
```

编辑：

然后（感谢[Matt Ball](https://stackoverflow.com/questions/10256328/how-do-i-change-this-raphael-drawn-pie-chart-so-that-the-colors-dont-change)的`var props {`部分）

更改 r.customAttributes.segment = function (x, y, r, a1, a2, color) {... 用这个：

```
 var flag = (a2 - a1) > 180;
                a1 = (a1 % 360) * Math.PI / 180;
                a2 = (a2 % 360) * Math.PI / 180;
                var props = {
                    path: [["M", x, y], ["l", r * Math.cos(a1), r * Math.sin(a1)], ["A", r, r, 0, +flag, 1, x + r * Math.cos(a2), y + r * Math.sin(a2)], ["z"]]
                };

                if (color) {
                    props.fill = color;
                }
                return props; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T18:06:18.217

如果您对 JavaScript 不太了解，您可能不应该使用 Raphael JS。

要更改填充颜色，您必须修改此行：

```
fill: "hsb(" + clr + ", .75, .8)" 
```

把它变成一个函数，告诉它你想要什么颜色。目前， clr 是一个简单的函数

```
 clr = (a2 - a1) / 360;
    a1 = (a1 % 360) * Math.PI / 180;
    a2 = (a2 % 360) * Math.PI / 180; 
```

要摆脱动画，请删除“animate();”行 （低于数据[i] *= 2）

# pdf - 有没有办法将可提交/可填充的 PDF（包含 JS）转换为 HTML？

> ID：11064368
> 
> 赞同：2
> 
> 时间：2012-06-16T14:42:30.140
> 
> 标签：pdf, converter

我有大量使用表单和 JavaScript 提交的 PDF 文件。我想知道是否有办法将此类 PDF 转换为 HTML（或*除 Flash 之外*的任何其他格式，允许在 Web 浏览器中打开页面并提交）。

在对该主题进行研究之后，我找到了几款可以将 PDF 转换为 HTML 的软件，但即使转换后还有任何字段，显然也没有 JS，并且所有按钮都丢失了。

编辑：要转换的文档数量大约为 500 ......所以“手动”方法已被淘汰，除非它有点“手动”然后是批量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:57:31.480

我不确定这个[PDF 转换器](http://www.aolor.com/pdf-converter/)是否有帮助。它可以将 PDF 转换为 html，但是，我不确定它是否会保留您的按钮和 js。也许你可以试一试。希望这可以帮助。

# php - 文件名的PHP空白和特殊字符错误

> ID：11064369
> 
> 赞同：1
> 
> 时间：2012-06-16T14:42:32.473
> 
> 标签：php, image, utf-8, special-characters, filenames

```
<div id="gallery">

<?php  

$directory = 'people';

$allowed_types=array('jpg','jpeg','gif','png');
$file_parts=array();
$ext='';
$title='';
$i=0;

foreach (glob($directory.'/*.{jpg,jpeg,png,gif}', GLOB_BRACE) as $file){
    if($file=='.' || $file == '..') continue;
    $file_parts = explode('.',$file);
    $ext = strtolower(array_pop($file_parts));
    $title = basename($file);
    $title = htmlspecialchars($title);
    echo '
    <div class="pic '.$nomargin.'" style="background:url(thumbs/'.$file.') no-repeat 50% 50%;">
    <a href="'.$file.'" title="whatever you want : '.$title.'" rel="pan1" target="_blank">'.$title.'</a>
    </div>';
    $i++;
}

?>
<div class="clear"></div>
</div> 
```

这是我的动态图片库代码示例。我会自动显示目录中的所有图像以及来自另一个文件夹的缩略图。这是我的问题：如果我在文件名中使用空白字符或特殊字符，那么它根本不会显示文件。我想使用空格和特殊字符，例如 (ç, ö, ş)，因为我想使用图像标题作为图像的描述，而无需编写任何额外的文本。知道怎么做吗？谢谢。

示例：[http ://www.kursatkarabulut.com/galeriler/kopya.php](http://www.kursatkarabulut.com/galeriler/kopya.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:27:13.987

我承认我不知道在不同操作系统和文件系统上的文件名中有效和无效的所有字符，但我知道有些可能有问题，并且取决于平台。我个人的建议是避免整个问题。

将文件元数据（在您的情况下为标题）存储在数据库中，然后将每个标题与某个序列号[文件](http://www.php.net/urlencode)（`159.jpg`如

例如，将`ç.jpg`urlencoded 存储为`%C3%A7.jpg`，然后只存储 urlDecode() 用于显示...

谨防达到最大文件名，以及可能的文件路径长度。它们也因平台而异。这是使用数据库的另一点，因为它避免了长文件名。

# java - JSR-308 何时会成为 JDK 的一部分？

> ID：11064373
> 
> 赞同：-1
> 
> 时间：2012-06-16T14:43:07.277
> 
> 标签：java, assert, assertions, design-by-contract, assertion

请参阅[我的博客文章](http://alexsmail.blogspot.com/2012/06/java-assert-design-by-contract-elvis.html)摘录自 Java Posse #386 - 2012 年 5 月 31 日的新闻广播，该主题扩展了该主题。

[JSR 308](http://types.cs.washington.edu/jsr308/)是否将按 合同设计推广到 Java？[它比断言](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)更进一步？什么时候会成为 JDK 的一部分？

何时计划作为 JDK 的一部分发布？

另请参阅[您是否使用断言？](https://stackoverflow.com/questions/1208404/do-you-use-assertions)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T14:50:00.657

JSR 308 与合同无关。相反，它扩展了 Java 类型系统，以便您可以根据其使用上下文修改基本类型。[Checker 框架](https://checkerframework.org/)提供了几个很好的例子来说明类型注解可以做什么。我相信您可以以某种方式将其颠覆以将其转换为合同，但您仍然必须添加一个自定义处理器，将注释编译成代码，而不是仅仅通过类型检查器传递它们。

目前的计划是包含在 Java 8 中。但这仍然可以改变。

# sql - 如何在一个结果集中返回最小和最大记录 (Microsoft Access)

> ID：11064374
> 
> 赞同：2
> 
> 时间：2012-06-16T14:43:11.807
> 
> 标签：sql, ms-access, max, min

我想展示一张桌子上最便宜和最贵的电影。但是下面的 sql 不能在 Microsoft Access 中运行。如何修复它以便在 1 个结果表中返回最小值和最大值？

```
SELECT  Cost,Movie_Title
FROM    INVENTORY
WHERE   Cost IN 
(
   SELECT max(Cost) as Maximum_Cost, min(Cost) as Minimum_Cost
   FROM INVENTORY
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:53:38.630

```
SELECT Movie_Title, Cost
FROM INVENTORY
WHERE
       Cost=DMin("Cost","INVENTORY")
    OR Cost=DMax("Cost","INVENTORY"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:46:51.290

如果您希望答案为两行，请使用 Union 将最小和最大查询的结果附加在一起。

# asp.net - 如何判断正在查看的网站的位置？

> ID：11064377
> 
> 赞同：4
> 
> 时间：2012-06-16T14:43:28.927
> 
> 标签：asp.net, vb.net, visual-studio-2008, geolocation

如何访问我正在制作的网站的某些地理编码？

我想提取正在查看/使用网站的位置信息。当用户这样做时，这将允许签入过程更加顺利。

对 Visual Studio 2008 中的 VB.NET 有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:44:38.393

我建议只使用[Google Analytics](http://www.google.com/analytics)。它是免费的并且非常强大。

他们对您网站的所有请求进行地理编码，因此您可以在地图上看到它以及其他什么。

![在此处输入图像描述](../Images/906dfc83d97878a6182ec09268d71e30.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T17:52:57.897

免费地理 IP 是一项免费的网络服务，可为您提供所需的所有信息。

[http://freegeoip.net/static/index.html](http://freegeoip.net/static/index.html)

您拨打服务电话

```
http://freegeoip.net/{format}/{ip_or_hostname} 
```

服务以 JSON 格式返回：

```
show({"city": "Mountain View", "region_code": "CA", "region_name": "California", "metrocode": "807", "zipcode": "94043", "longitude": "-122.057", "country_name": "United States", "country_code": "US", "ip": "209.85.145.147", "latitude": "37.4192"}); 
```

由于它是免费的，因此您每小时只能处理 1000 个请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T17:41:16.840

如果您想在自己的控制下执行此操作，则该过程通常称为 geo-ip。有几种方法可以获得这些数据，我没有足够的个人经验来推荐特定的供应商。

[https://www.google.com/search?q=geo-ip](https://www.google.com/search?q=geo-ip)

如果您想获得非常低的级别，您可以查看客户端 ip whois 记录并查看谁拥有该 ip 及其联系地址。无论如何，这似乎是谷歌搜索中提到的大多数人正在做的事情。

我使用了一些来自 asp.net 的免费查找数据库，但我通常在 sql sprocs 中完成所有繁重的工作，然后将结果转储到前端，因为当时我的 sql 功能比 webserver 更多。

# asp.net - 如何处理非表格数据？

> ID：11064379
> 
> 赞同：1
> 
> 时间：2012-06-16T14:43:33.047
> 
> 标签：asp.net, sql-server-2005

我的网站上有网站条款、关于和联系模块。我希望能够通过 CMS 更改这些项目，而不是每隔一段时间更改 .ASPX 页面。我的问题是如何存储这些数据？我曾经在 SqlServer 中存储这种数据，但我一直认为这是一种矫枉过正的做法，因为数据是具有不同列的单行，尤其是在某些情况下我只需要一列时。

你如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:50:26.120

过去，我通过读取 xml 文件来处理这种类型的事情，但[Umbraco](http://umbraco.com/)是您可能想要查看的优秀 CMS。

# iphone - 调试核心文本崩溃

> ID：11064381
> 
> 赞同：0
> 
> 时间：2012-06-16T14:44:18.833
> 
> 标签：iphone, objective-c, ios, ipad

我有以下堆栈跟踪，似乎无法弄清楚 coretext 崩溃的原因：

![在此处输入图像描述](../Images/2ed1101f11e6bbdd20aafccd44fe42d6.png)

```
-(CGSize)sizeConstrainedToSize:(CGSize)maxSize fitRange:(NSRange*)fitRange {
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString
                                                ((CFAttributedStringRef)self);
    CFRange fitCFRange = CFRangeMake(0,0);
    CGSize sz = CTFramesetterSuggestFrameSizeWithConstraints
                      (framesetter,CFRangeMake(0,0),NULL,maxSize,&fitCFRange);
    if (framesetter) CFRelease(framesetter);
    if (fitRange) *fitRange = NSMakeRange(fitCFRange.location, fitCFRange.length);
    // take 1pt of margin for security
    return CGSizeMake( floorf(sz.width+1) , floorf(sz.height+1) ); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:53:50.467

的值`kCTFontAttributeName`必须是 a `CTFontRef`，而不是`UIFont`指针。没有将 a 转换为 的公共函数`UIFont`，`CTFontRef`因此您需要使用 来创建它[`CTFontCreateWithName`](http://developer.apple.com/library/ios/DOCUMENTATION/Carbon/Reference/CTFontRef/Reference/reference.html#//apple_ref/c/func/CTFontCreateWithName)，可能像这样：

```
UIFont *uiFont = ...;
CTFontRef ctFont = CTFontCreateWithName((__bridge CFStringRef)uiFont.fontName, uiFont.pointSize, NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T08:22:05.360

根据您的堆栈跟踪，您似乎因从辅助线程调用 CTFramesetterCreateWithAttributedString() 而崩溃。请参阅[CoreText 在多线程中运行时崩溃，以及](https://stackoverflow.com/questions/5642721/coretext-crashes-when-run-in-multiple-threads)[此处](http://developer.apple.com/library/ios/#documentation/Carbon/Reference/CoreText_Framework_Ref/_index.html)的 Apple 文档，其中指出与排版器相关的 API 不是线程安全的。

# modx - MODX Revo - 无法在管理器的文件部分上传或查看文件

> ID：11064386
> 
> 赞同：0
> 
> 时间：2012-06-16T14:44:42.133
> 
> 标签：modx, modx-revolution, modx-resources

我在上传甚至查看 MODX Revolution 2.2.3-pl 文件部分的文件时遇到问题。当我尝试上传文件时，我得到的只是“上传错误”。Filesystem 区域中没有显示任何内容，只有一个名为 Media 的文件夹，它不允许我做任何事情。对可能发生的事情有任何想法吗？

就文件系统权限而言，所有文件夹都设置为 755，所有文件都设置为 644。我看到此行为以 admin/sudo 身份登录。我刚刚将我的 MODX 安装从我认为它工作正常的本地机器移到了共享托管环境，这就是我看到这个问题的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:12:17.000

在报告文件管理器[出现问题](http://tracker.modx.com/issues/8110)后，最近[对 2.2.4-pl 进行了更新。](http://modx.com/download/distribution/revolution-2.2.4-pl-standard)

我建议更新到 2.2.4-pl 并检查问题是否仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T03:25:26.807

也可能是您的 MOD 系统设置已`Use Multibyte Extension`启用，但 PHP 尚未使用 --enable-mbstring 选项编译。

隐藏在 MODx 媒体浏览器中的是对 JSON 请求的失败响应和显示的错误消息……</p>

> 致命错误：在第 168 行调用未定义函数 mb_strtolower()

如果您无法重新编译 PHP 或只需要让您的媒体浏览器再次工作，请转到`System Settings`并设置`Multibyte Extension`为`No`.

所有功劳归功于 [Max Mitchell 的帖子]。[1](http://www.maxy.com/modx-media-browser-not-showing-any-files/)

# android - Android：TranslateAnimation 后有什么方法可以获取 View 的最新位置吗？

> ID：11064388
> 
> 赞同：5
> 
> 时间：2012-06-16T14:44:52.477
> 
> 标签：android, location, translate-animation

我知道获取视图位置值的多种方法。

```
getLocationOnScreen()
getLocationInWindow()
getLeft() 
```

但是，它们实际上都没有返回我通过 startAnimation() 方法移动的 View 的当前位置，而只是返回原始位置。

因此，现在让我们创建一个在每次单击时向右移动 10 个像素的视图（我省略了布局，因为您可以将任何视图放在主 XML 中并在单击侦听器上提供它）。

```
public class AndroidTestActivity extends Activity implements OnClickListener {  
LinearLayout testView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    testView = (LinearLayout) this.findViewById(R.id.test);
    testView.setOnClickListener(this);
}

public void onClick(View v) {
    int[] pLoS = new int[2];
    testView.getLocationOnScreen(pLoS);
    TranslateAnimation move = new TranslateAnimation(pLoS[0], pLoS[0] + 10, 0f, 0f);
    move.setFillAfter(true);
    move.setFillEnabled(true);
    testView.startAnimation(move);
}

} 
```

如您所见，这并没有按我的预期工作，因为 getLocationOnScreen() 总是返回相同的值（在我的情况下为 0），并且不反映我在 TranslateAnimation 中使用的值...

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:33:43.343

假设您使用的是 Android < 3.0，那么您的问题可能与我[在这里](https://stackoverflow.com/questions/5886624/animation-setfillafter-before-do-they-work-what-are-they-for)提出的问题相似。基本上，动画与视图本身是分开的，即 Android 会为您的视图副本设置动画。这就是为什么`getLocationOnScreen()`总是返回 0。移动（动画）的不是视图，而是移动（动画）的副本。如果您看到我的问题的答案，此问题已在更高版本的 Android 中得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:13:45.337

好吧，如果您想查看视图在动画期间/之后移动了多少像素，那么您可以打开动画上的 Transformation 对象。

这是一个使用 AnimationListener 的示例：

```
animation.setAnimationListener(new Animation.AnimationListener() {
        @Override
        public void onAnimationStart(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            Transformation trans = new Transformation();
            // startTime + duration = end of animation
            int endTime = animation.getStartTime()+animation.getDuration();
            animation.getTransformation(endTime, trans);

            Matrix transformationMatrix = trans.getMatrix();
            float[] matrixVals = new float[9];
            transformationMatrix.getValues(matrixVals);
            float xTraveled = matrixVals[2];
            float yTraveled = matrixVals[5];
            // do something with them here...
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }
    }); 
```

我在这些数组索引中可能并不完全正确，一定要使用 Matrix.toString() 并自己查看这些值。xTraveled 和 yTraveled 将为您提供 TranslateAnimation 在指定时间（在本例中为动画结束时）行进的距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T16:06:15.613

android姜饼及以下的动画并没有真正改变视图，只是改变了它的显示方式。

获得新位置的唯一方法是计算它。

# objective-c - Objective C 中的多个随机数生成器

> ID：11064392
> 
> 赞同：3
> 
> 时间：2012-06-16T14:45:26.673
> 
> 标签：objective-c, random, prng

在我当前的项目中，我需要多个随机数生成器，因为我需要能够相互独立地重复它们的序列。到目前为止，我还没有找到任何方法来使用标准的 Objective-C 随机数生成器来实现这一点，因为它们只有一个全局状态。

我认为拥有一个随机数生成器类可以解决我的问题。我可以创建几个可以单独重置的实例。

这样的东西已经可用了吗？我无法在目标 c 中找到任何随机数生成器实现。我想避免自己实现它，因为我没有随机数的经验，而且我认为这很难做到正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T14:54:03.450

我有一个随机类，基于[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister)算法，你可以从我的 dropbox[获得](https://dl.dropbox.com/u/25258177/personal/MTRandom.zip)。

它相当旧，并且不是为 ARC 编译的，但这并没有使它变得不那么好:)

示例代码：

```
MTRandom *randWithSeed = [[MTRandom alloc] initWithSeed:12345];
double d = [rand nextDouble];
int i = [rand nextInt];

MTRandom *timeBasedRand = [MTRandom new]; // seeds with current time
double d2 = [timeBasedRand nextDouble];
int i2 = [timeBasedRand nextInt]; 
```

编辑：如果你想变得很酷，你可以使用这个：

![在此处输入图像描述](../Images/ab3505063274eab85540f4cc5c9409fd.png) ^([资源](http://xkcd.com/221/))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:01:01.330

你有没有尝试过

```
srandom(seed); 
```

然后打电话

```
random(); 
```

? 如果种子相同，那么您应该得到相同的随机数序列。

# java - 在 JApplet 上运行的 JPanel

> ID：11064395
> 
> 赞同：2
> 
> 时间：2012-06-16T14:46:03.873
> 
> 标签：java, swing, japplet

我正在设计一个 JApplet，基本上这个小程序将允许用户绘制一个二次方程图，并插入 x 轴和 y 轴的范围。但要达到这一点还有很多工作要做。

我还在设计界面的阶段。

这是我的代码：

```
import java.awt.Dimension;

import javax.swing.BoxLayout;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class Applet extends JApplet {
    JPanel p1;
    JPanel p2;
    JPanel p3;

    JScrollPane s1;

    public Applet() {

    p1 = new JPanel();
    p2 = new JPanel();
    p3 = new JPanel();

    s1 = new JScrollPane(p3,s1.VERTICAL_SCROLLBAR_ALWAYS,s1.HORIZONTAL_SCROLLBAR_ALWAYS);
    }

    @Override
    public void init() {
    super.init();

    for(int i=0;i<100;i++)
    {
        p3.add(new JButton("Hello"));
        p3.add(new JLabel("blah"));
        p3.add(new JButton("Sup"));
    }

    p1.setPreferredSize(new Dimension(this.getWidth(), this.getHeight()));
    p2.setPreferredSize(new Dimension(this.getWidth(),(int) (this.getHeight()*0.6667)));

    p3.setLayout(new BoxLayout(p3,BoxLayout.PAGE_AXIS));
    s1.setPreferredSize(new Dimension(this.getWidth(),(int)(this.getHeight()*0.33333)));

    p1.add(p2);
    p1.add(s1);

    this.add(p1);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T15:07:24.620

建议：

*   至于将一个组件放在另一个组件之上，请使用可以促进这一点的布局管理器，例如垂直 BoxLayout。
*   [为了让您的显示器响应数字数据的变化，我建议您通过使用模型-视图-控制器](http://www.leepoint.net/notes-java/GUI/structure/40mvc.html)类型的应用程序设计，以一种易于实现的方式设计您的程序。按下“绘图”或“优化”按钮将触发控制器更新模型数据。视图或 GUI 将监听模型更改，并在它们发生时根据模型的最新数据重新绘制图形。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T14:58:21.803

1.  要将 x 轴和 y 轴控件放在一起，您应该有两个面板，一个包含 x 轴的标签和文本字段，另一个包含 y 轴的标签和文本字段。然后，您可以将它们添加到垂直对齐的面板中。（`Box.createVerticalBox()`例如）

2.  您可以`graph.java`使用`ActionListener`“绘图”和“优化”按钮。在`actionPerformed`graph.java 的方法中，您可以启动重绘，从“ControlsB”实例中收集范围。

编辑：回复您的评论...

*'如何添加另一个面板以便我将 x 轴放在 y 轴上方'*

这可以像（在 ControlsB.java 中）一样简单：

```
b = Box.createHorizontalBox();
b.add(new JLabel("Please enter range:  "));

Box b0 = Box.createVerticalBox();//create a vertical box to stack the controls

Box b1 = Box.createHorizontalBox(); // create a horizontal box for the x-axis

b1.add(new JLabel(" x-axis "));
b1.add(new JLabel("from"));
JTextField f1 = new JTextField("-5");
f1.setMaximumSize(new Dimension(100,30));
b1.add(f1);
b1.add(new JLabel(" to "));
JTextField f2 = new JTextField("5");
f2.setMaximumSize(new Dimension(100,30));
b1.add(f2);
b1.add(new JLabel(".   "));

Box b2 = Box.createHorizontalBox(); // create a second horizontal box for the y-axis
b2.add(new JLabel("y-axis "));
b2.add(new JLabel("from"));
JTextField f3 = new JTextField("5");
f3.setMaximumSize(new Dimension(100,30));
b2.add(f3);
b2.add(new JLabel("to"));
JTextField f4 = new JTextField("-5");
f4.setMaximumSize(new Dimension(100,30));
b2.add(f4);

b0.add(b1); // add the x-axis to the vertical box
b0.add(b2); // add the y-axis to the vertical box
b.add(b0);  // add the vertical box to the parent

b.add(new JButton("Plot"));
b.add(new JButton("Refine"));
add(b); //is this necessary?
} 
```

*'以及如何从 ControlsB 实例中收集范围......'*

您应该查看[本教程](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)`ActionListener`中的 s以了解如何使按钮单击事件在单独的类中触发动作。

另外，两个批评：

1.  在您的主类中`GraphApplet`，您正在创建 a `Box`，然后将其传递给每个`ControlsA`and`ControlsB`的构造函数。然后，在构造函数中，您重新分配您传入的 Box。我认为您不需要这样做。在 中创建正确对齐的框`GraphApplet`，将其传入并且不重新分配，或者根本不传入任何内容。

2.  你`ControlsA`和`ControlsB`类都扩展了`JPanel`. 尽管`Box`在它们的构造函数末尾将容器添加到每个容器中都会遇到麻烦，但您永远不会将这些 Controls+ 对象添加到任何父容器中。在您当前的实施中，我建议`JPanel`不需要扩展。

# mod-rewrite - RewriteRule 没有按我的预期工作

> ID：11064396
> 
> 赞同：0
> 
> 时间：2012-06-16T14:46:09.927
> 
> 标签：mod-rewrite

我想要以下网址：

`http://www.mydomain.com/search/string`

要去

`http://www.mydomain.com/dir/search.php?param=string`

这是我的重写规则：

`RewriteRule ^search/(string)$ /dir/search.php?param=$1 [NC,L]`

让我抓狂的是它确实有效。结果页面中的所有链接在`a`元素中都有“目录”。例如，我将鼠标悬停在显示

`http://www.mydomain.com/search/myawesomescript.php`

在状态栏中。正确的网址是

`http://www.mydomain.com/myawesomescript.php`

.htaccess 文件位于根目录。为什么“搜索”会将自己插入到重写中？我不明白的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:49:34.690

您的 RewriteRule 告诉 apache，如果请求进入搜索/（字符串），它们应该由 /dir/search.php 处理，但它不会做任何事情来更改显示的 URL。

您正在谈论的内容将通过以下方式完成：

```
RewriteRule .* /dir/search.php?param=$1 [NC,L] 
```

请记住，这会将**所有内容**重定向到 search.php，因此您需要修改正则表达式或使用一些`RewriteCond`规则来限制范围。

# php - 一起使用 MongoDB Limit() 和 Skip()

> ID：11064399
> 
> 赞同：1
> 
> 时间：2012-06-16T14:46:24.520
> 
> 标签：php, mongodb, indexing

这是查询：

```
$collection->find(array("x"=>new MongoId("..."))->skip(5)->limit(10); 
```

使用 explain 给出以下结果：

```
[n]=>10
[nscanned]=>15
[nscannedObjects]=>15 
```

上有索引`"x"`。那么，如果我跳过前 5 个文档，为什么扫描对象的数量是 15 而不是 10？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T16:08:56.313

跳过五个然后将结果限制为十个意味着需要考虑十五个项目，前五个将被跳过，接下来的十个将被返回。

所以 nscanned 应该是 15。

nscannedObjects 可能应该是 10，但是，由于这个[错误/限制](https://jira.mongodb.org/browse/SERVER-2845)，它也显示为 15。

# php - MYSQL/PHP/Postgis：检查一个坐标是否在另一个坐标的半径内（小扭曲）

> ID：11064402
> 
> 赞同：0
> 
> 时间：2012-06-16T14:46:53.363
> 
> 标签：php, mysql, sql, postgresql, postgis

是的，我想知道如何检查某个坐标是否在另一个坐标半径内。不过，这可能是一个小差异，因为 lat,long,radius 存储在数据库中，我们要检查的只是给定的坐标。

例子

数据库表

```
name    |   lat         |    long        |   radius(m) |
loc1    |   15.3333     |    120.312     |    100      |
loc2    |   120.321     |    -15.5436    |    123      | 
```

我有一个坐标`16 lat, 120 long` 如何检查这个坐标是否会落在 loc1 的 100m 半径内，假设该表中有一堆数据，具有不同的坐标和/或不同的半径。我想专门使用 PostgreSQL 来了解这一点，但对于 MYSQL 来说可能是一个好的开始

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:04:41.353

使用 PostGIS，您可以在地理类型上使用该[`ST_DWithin`功能](http://www.postgis.org/docs/ST_DWithin.html)，使用平面公制缓冲区（或“半径”）距离和地理长/纬度数据。不需要小插曲，因为这种类型的查询在 PostGIS 中很常见。

例如，创建表（使用 PostGIS 2.0 typmod 语法，对于 PostGIS 1.5，您需要使用其他函数来创建地理列）：

```
CREATE TABLE db_table
(
  gid serial primary key,
  name character varying(100),
  geog geography(Point,4326),
  radius_m numeric
);

CREATE INDEX db_table_idx ON db_table USING gist (geog);

INSERT INTO db_table(name, geog, radius_m)
VALUES
 ('loc1', ST_MakePoint( 20.312, 15.333), 100),
 ('loc2', ST_MakePoint(-15.543, 20.312), 123); 
```

对于您`db_table`在“16 lat，120 long”处查找点 100 内的所有行的问题：

```
SELECT *
FROM db_table
WHERE ST_DWithin(geog, ST_MakePoint(120, 16), radius_m + 100); 
```

另一个例子，如果你有`someother_table`一个地理列，你可以对两者进行地理空间查询：

```
SELECT a.name, b.other_attr, ST_Distance(a.geog, b.geog) AS distance_m
FROM db_table a
JOIN someother_table b ON ST_DWithin(a.geog, b.geog, a.raidus_m + 100)
ORDER BY ST_Distance(a.geog, b.geog); 
```

* * *

最后，我很确定你不能用 MySQL 做任何这些，因为它无法将坐标从 Lat/Long 转换为以米为单位的距离。

# jquery - 为什么 jquery 不能调用它或访问它（ $.fancybox.resize() ）

> ID：11064405
> 
> 赞同：0
> 
> 时间：2012-06-16T14:47:10.310
> 
> 标签：jquery, ajax, fancybox

我的问题是我不知道为什么我会在这些陈述中出现错误，这就是[示例页面](http://fancybox.net/blog) **提示 5**

在 FF：Tijdstempel：16-06-12 17:05:38 Fout：$.fancybox.showActivity 不是函数 Bronbestand：[http](http://woonbel.nl/js/js.js) ://woonbel.nl/js/js.js Regel：28

```
$.fancybox.resize();
$.fancybox.showActivity(); 
```

以及返回的ajax数据如何处理

```
$.fancybox(data) // (what does it do, or is the object itself used for storage?) 
```

你想像这样访问它吗

```
returndata = $.fancybox.data.testdata; 
```

[这是我的测试站点](http://www.woonbel.nl)点击左上角！

**编辑** 我发现文档不遵循插件代码显然 showactivity() 已成为 showLoading();

现在我只需要看看 $.fancybox(data) 应该如何与当前的插件代码一起工作。建议会很棒！

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:10:10.300

您收到这些错误是因为您正在使用带有*fancybox v1.3.x*选项的fancybox *v2.x*。您所指的示例页面[http://fancybox.net/blog](http://fancybox.net/blog)适用于版本 1.3.4

 *Fancybox v2.x 选项是新的，与以前的版本不兼容。

在你的情况下，而不是使用

```
$.fancybox.showActivity(); //v1.3.x 
```

你应该使用

```
$.fancybox.showLoading(); //v2.x 
```

.... 而不是

```
$.fancybox.resize(); //v1.3.x 
```

你应该使用

```
$.fancybox.update(); //v2.x 
```

检查[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)以获得您正在使用的版本的正确选项集。*

# python - 将一个值列表而不是多个参数传递给函数？

> ID：11064406
> 
> 赞同：5
> 
> 时间：2012-06-16T14:47:16.510
> 
> 标签：python, list, function, arguments

假设有一个函数`func()`需要两个参数，`a`并且`b`. Python中是否有某种技术可以将`mylist`具有两个值的单个列表传递给函数？

```
def myfunc(a, b):
    return a+b

myfunc([1, 2]) 
```

如果一个人完全确定他总是调用同一个函数并且知道它需要多少个参数，那么可以做这样的事情：

```
mylist = [1, 2]
a, b = mylist

myfunc(a, b) 
```

但是，如果您有需要提供给某些函数的列表，并且每个列表都有不同数量的参数怎么办？可以为他的每个函数编写单独的代码行，将列表解压缩为变量并将它们传递给相应的函数，但是如果 Python 有内置的东西来传递单个列表而不是单个参数值（如果事先确定list 具有相应数量的值），那么看起来会好很多，最重要的是需要更少的代码行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T14:48:49.097

您可以使用`*`将[列表解压缩为参数](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)：

```
myfunc(*mylist) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T14:49:19.480

```
def myfunc(a, b):
    return a+b

mylist = [1, 2]
myfunc(*mylist) 
```

这里`mylist`可以是长度为 2 的`list`,`tuple`等`string`。

# matlab - 检查 MATLAB 数据集的一致性

> ID：11064408
> 
> 赞同：-1
> 
> 时间：2012-06-16T14:47:32.530
> 
> 标签：matlab, validation, numbers, dataset

在矩阵的情况下，每次我想确保它的内容是实数，但总是比零和有限时，以下命令对我来说很好。但是，它不适用于数据集。

```
ispositive =    ( ~isnumeric(batch_data) ...
                | ~all(isfinite(batch_data(:))) ...
                | ~isreal(batch_data) ...
                | ~(any(batch_data(:) <= 0)) );

if (ispositive)

end 
```

关于如何修改它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:12:54.807

```
ispositive =    ( ~isnumeric(batch_data) ...
            | ~all(isfinite(batch_data(:))) ...
            | ~isreal(batch_data) ...
            | ~(any(batch_data(:) <= 0)) ); 
```

这不符合你所说的。

根据这个陈述，以下是积极的：batch_data = Inf batch_data = -Inf batch_data = 'ralph' batch_data = 1j; 批处理数据=-1j；

* * *

与您所写的内容相关，这有效：

```
positive =  all(isnumeric(batch_data(:)) ...
              && all(isfinite(batch_data(:))) ...
              && isreal(batch_data) ... % isreal breaks convention of is* functions
              && all(batch_data(:) > 0)) ; 
```

# java - 为什么要使用多态？

> ID：11064409
> 
> 赞同：37
> 
> 时间：2012-06-16T14:47:38.787
> 
> 标签：java, polymorphism

我有以下代码，其中我有一个父类及其子类。我试图确定代码如何从使用多态中受益。

```
class FlyingMachines {
    public void fly() {
        System.out.println("No implementation");
    }
}

class Jet extends FlyingMachines {
    public void fly() {
        System.out.println("Start, Taxi, Fly");
    }

    public void bombardment() {
        System.out.println("Throw Missile");
    }
}

public class PolymorphicTest {
    public static void main(String[] args) {
        FlyingMachines flm = new Jet();
        flm.fly();

        Jet j = new Jet();
        j.bombardment();
        j.fly();
    }
} 
```

当两者都给我相同的答案时，多态性的优势是`flm.fly()`什么`j.fly()`？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-16T14:49:24.457

在您的示例中，使用多态性并不是非常有用，因为您只有一个`FlyingMachine`. 如果您有多种`FlyingMachine`. 然后你可以有一个接受任何类型`FlyingMachine`并使用它的方法的`fly()`方法。一个例子可能是`testMaxAltitude(FlyingMachine)`。

另一个仅适用于多态性的特性是能够拥有 a`List<FlyingMachine>`并使用它来存储`Jet`、`Kite`或`VerySmallPebbles`。

使用多态性的最佳案例之一是能够引用接口而不是实现。

例如，最好有一个返回 as`List<FlyingMachine>`而不是`ArrayList<FlyingMachine>`. 这样，我可以将方法中的实现更改为 a`LinkedList`或 a`Stack`而不会破坏任何使用我的方法的代码。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-10-02T14:06:44.590

> 当两者都给我相同的答案时，多态性的优势是`flm.fly()`什么`j.fly()` ？

优点是

```
FlyingMachines flm = new Jet();
flm.fly(); 
```

返回

```
"Start, Taxi, Fly" 
```

代替

```
"No implementation" 
```

这就是多态性。您调用`fly()`一个类型的对象，`FlyingMachine`它仍然知道它实际上是 a`Jet`并调用适当的`fly()`方法而不是输出的错误方法`"No implementation"`。

这意味着您可以编写与类型对象一起使用的方法，`FlyingMachine`并为其提供各种子类型，例如`Jet`or`Helicopter`并且这些方法总是会做正确的事情，即调用`fly()`适当类型的方法而不是总是做同样的事情，即输出`"No implementation".`

### 多态性

多态性在您的示例中没有用。

*   a) 当您拥有不同类型的对象并且可以编写可以处理所有这些不同类型的类时，它会变得很有用，因为它们都遵循相同的 API。

*   `FlyingMachine`b) 当您可以在不更改任何现有逻辑的情况下向应用程序添加新的 s 时，它也会变得有用。

a) 和 b) 是同一枚硬币的两个面。

让我展示一下。

### 代码示例

```
import java.util.ArrayList;
import java.util.List;

import static java.lang.System.out;

public class PolymorphismDemo {

    public static void main(String[] args) {
        List<FlyingMachine> machines = new ArrayList<FlyingMachine>();
        machines.add(new FlyingMachine());
        machines.add(new Jet());
        machines.add(new Helicopter());
        machines.add(new Jet());

        new MakeThingsFly().letTheMachinesFly(machines);
    }
}

class MakeThingsFly {
    public void letTheMachinesFly(List<FlyingMachine> flyingMachines) {
        for (FlyingMachine flyingMachine : flyingMachines) {
            flyingMachine.fly();
        }
    }
}

class FlyingMachine {
    public void fly() {
        out.println("No implementation");
    }
}

class Jet extends FlyingMachine {
    @Override
    public void fly() {
        out.println("Start, taxi, fly");
    }

    public void bombardment() {
        out.println("Fire missile");
    }
}

class Helicopter extends FlyingMachine {
    @Override
    public void fly() {
        out.println("Start vertically, hover, fly");
    }
} 
```

### 解释

a)`MakeThingsFly`该类可以处理所有类型为`FlyingMachine`.

b）`letTheMachinesFly`当您添加新类时，该方法也可以在没有任何更改（！）的情况下工作，例如`PropellerPlane`：

```
public void letTheMachinesFly(List<FlyingMachine> flyingMachines) {
        for (FlyingMachine flyingMachine : flyingMachines) {
            flyingMachine.fly();
        }
    }
} 
```

这就是多态性的力量。你可以用它实现[开闭原则](https://en.wikipedia.org/wiki/Open/closed_principle#Polymorphic_open.2Fclosed_principle)。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-16T15:04:01.703

使用多态性的原因是当您构建通用框架时，该框架采用了一大堆**具有相同接口**的不同对象。当你创建一个新的对象类型时，你不需要改变框架来适应新的对象类型，只要它遵循对象的“规则”。

因此，在您的情况下，一个更有用的示例是创建一个接受不同类型的 FlyingMachines 的对象类型“Airport”。机场将定义一个“AllowPlaneToLand”函数，类似于：

```
//pseudocode
void AllowPlaneToLand(FlyingMachine fm)
{
    fm.LandPlane();
} 
```

只要每种类型的 FlyingMachine 都定义了合适的 LandPlane 方法，它就可以正常着陆。机场不需要知道任何关于 FlyingMachine 的信息，除了要让飞机降落，它需要在 FlyingMachine 上调用 LandPlane。所以机场不再需要改变，并且可以继续接受新型飞行器，无论是滑翔机、不明飞行物、降落伞等。

因此，多态性对于围绕这些对象构建的框架很有用，它们可以通用地访问这些方法而无需更改。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-16T15:30:08.127

我们先来看OO设计，继承代表一种IS-A关系，一般我们可以说“让我们`FlyingMachines`飞”。每个特定`FlyingMachines`的（子类）IS-A `FlyingMachines`（父类）都`Jet`适合这个“让我们`FlyingMachines`飞”，而我们希望这个飞行实际上是特定的（子类）的飞行功能，那就是多态性接管。

所以我们以抽象的方式做事，面向接口和基类，实际上并不依赖于细节实现，多态会做正确的事！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-06-06T18:37:13.280

[多态性](http://prinavtech.blogspot.com/2017/06/why-is-polymorphism-needed-in-java.html)（运行时和编译时）在 Java 中是必要的，原因有很多。

方法覆盖是*运行时多态性*，重载是*编译时多态性。*

其中很少有（其中一些已经讨论过）：

1.  **集合**：假设您有多种类型的飞行器，并且您希望将它们全部放在一个集合中。您可以定义一个类型列表`FlyingMachines`并将它们全部添加。

    ```
    List<FlyingMachine> fmList = new ArrayList<>();
    fmList.add(new new JetPlaneExtendingFlyingMachine());
    fmList.add(new PassengerPlanePlaneExtendingFlyingMachine()); 
    ```

    以上只能通过多态来完成。否则，您将不得不维护两个单独的列表。

2.  **将一种类型转换为另一种类型**：声明对象，如：

    ```
    FlyingMachine fm1 = new JetPlaneExtendingFlyingMachine();
    FlyingMachine fm2 = new PassengerPlanePlaneExtendingFlyingMachine();
    fm1 = fm2; //can be done 
    ```

3.  **重载**：与您提供的代码无关，但重载也是另一种类型的多态性，称为**编译时多态性**。

4.  可以有一个接受类型`FlyingMachine`处理所有类型的方法，即 FlyingMachine 的子类。只能用 来实现`Polymorphism`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-16T14:52:28.617

如果您只拥有 Jets，它不会增加太多，当您拥有不同的 FlyingMachines（例如飞机）时，优势就会出现

现在您已经修改为包含更多类，多态性的优点是从您收到的实例的特定类型（和业务概念）中抽象出来，您只需要关心它可以飞行

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-16T14:51:36.010

两者都给你相同的答案`flm.fly()`，`j.fly()`因为实例的类型实际上是相同的，即`Jet`，所以它们的行为相同。

当您执行以下操作时，您会看到不同之处：

```
FlyingMachines flm = new FlyingMachines();
flm.fly();

Jet j = new Jet();
j.bombarment();
j.fly(); 
```

多态性被定义为具有不同行为的相同方法签名。如您所见，两者`FlyingMachines`都`Jet`定义`fly()`了方法，但是方法的实现方式不同，这认为行为不同。

见

*   [多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-03-29T09:00:06.390

让我们在其中再添加一个类，它可以帮助您理解多态性的使用..

```
class FlyingMachines {
    public void fly() {
        System.out.println("No implementation");
    }
}

class Jet extends FlyingMachines {
    public void fly() {
        System.out.println("Start, Jet, Fly");
    }
}

class FighterPlan extends FlyingMachines {
    public void fly() {
        System.out.println("Start, Fighter, Fight");
    }
}

public class PolymorphicTest {
    public static void main(String[] args) {
        FlyingMachines flm = new Jet();
        flm.fly();

        FlyingMachines flm2 = new FighterPlan();
        flm2.fly();
    }
} 
```

输出：

```
Start, Jet, Fly
Start, Fighter, Fight 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-12-03T13:39:30.377

多态性还可以帮助我们的代码删除旨在生成生产级代码的“if”条件，因为删除条件会增加代码的可读性并帮助我们编写更好的单元测试用例，我们知道“n”如果有 n 个案例!(n 阶乘) 可能性。

让我们看看如何

如果您有类 FlyingMachine 并且在定义 FlyMachine 类型的构造函数中接受一个字符串，如下所示

```
class FlyingMachine{

    private type;

    public FlyingMachine(String type){
             this.type = type;
    }

    public int getFlyingSpeedInMph {
         if(type.equals("Jet"))
              return 600;
         if(type.equals("AirPlane"))
              return 300;
    }

 } 
```

我们可以创建两个 FlyingMachine 实例

```
 FlyingMachine jet = new FlyingMachine("Jet");
 FlyingMachine airPlane = new FlyingMachine("AirPlane"); 
```

并使用

```
 jet.fylingSpeedInMph();
 airPlane.flyingSpeedInMph(); 
```

但是，如果您使用多态性，您将通过扩展通用 FlyMachine 类并覆盖 getFlyingSpeedInMph 来删除 if 条件，如下所示

```
class interface FlyingMachine {

     public int abstract getFlyingSpeedInMph;
}

class Jet extends FlyingMachine {
    @Override
    public int getFlyingSpeedInMph(){
          return 600;
    }
}

class Airplane extends FlyingMachine {
    @Override
    public int getFlyingSpeedInMph(){
          return 600;
    }
} 
```

现在你可以得到如下的飞行速度

```
 FlyingMachine jet = new Jet();
 jet.flyingSpeed();

 FlyingMachine airPlane = new AirPlane();
 airPlane.flyingSpeed(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-10-02T14:20:40.763

仅当您需要多态性时，多态性才能为您带来好处。当您的概念项目的实体可以被视为另一个实体的专业化时使用它。主要思想是“专业化”。一个很好的例子是所谓的分类学，例如应用于生物。狗和人都是哺乳动物。这意味着，哺乳动物类将具有某些共同属性和行为的所有实体组合在一起。

此外，ElectricCar 和 DieselCar 是 Car 的专业化。所以两者都有一个 isThereFuel() 因为当你开车时，你希望知道是否有足够的燃料来驾驶它。另一个伟大的概念是“期望”。

在开始之前绘制软件领域的 ER（实体关系）图总是一个好主意。那是因为您被迫描绘将要创建哪种实体，并且如果您有足够的能力，您可以节省大量代码来查找实体之间的共同行为。但是保存代码并不是一个好的项目的唯一好处。

您可能有兴趣找出所谓的“软件工程”，它是允许您编写“干净代码”的技术和概念的集合（还有一本名为“干净代码”的好书，程序广泛推荐） .

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-13T05:49:55.403

java为什么需要多态性的一个很好的原因是这个概念被广泛用于实现继承。它在允许具有不同内部结构的对象共享相同的外部接口方面发挥着重要作用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-09T07:11:34.463

**多态性本身就很清楚，它映射了许多。**

java是一种oops语言，因此它通过抽象、重载和覆盖来实现

请记住，java 没有运行时多态性的规范。

它也有一些最好的例子。

```
public abstract class Human {

    public abstract String getGender();

}

class Male extends Human
{
    @Override
    public String getGender() {
        return "male";
    }
}

class Female extends Human
{
    @Override
    public String getGender() {
        return "female";
    }
} 
```

**覆盖**

重新定义基类的行为。例如，我想在我的基础汽车中添加移动现有功能的速度计数。

**重载**

可以具有具有不同签名的相同名称的行为。例如，某位总统说得很清楚，但另一位总统却只说得很大声。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-17T14:21:28.117

在这里，对于这个特定的代码，不需要多态性。

让我们了解为什么以及何时需要多态性。

假设有不同种类的机器（如汽车、踏板车、洗衣机、电动机等），我们知道每台机器都会启动和停止。但是每台机器启动和停止机器的逻辑是不同的。在这里，每台机器都会有不同的实现来启动和停止。因此，为了提供不同的实现，我们需要多态性。

在这里，我们可以有一个基类机器，`start()`它`stop()`的方法是和，每个机器类型都可以扩展这个功能和`@Override`这些方法。

# jsf - 在 EL 表达式中使用多个布尔条件

> ID：11064412
> 
> 赞同：2
> 
> 时间：2012-06-16T14:47:49.993
> 
> 标签：jsf, el, or-operator, and-operator

我想知道如何在 EL 中组合多个布尔条件。我有以下示例，但它不起作用。

```
<x:someComponent rendered="#{bean.condition1} or #{bean.condition2}"> 
```

如何在 EL 中使用“OR”和“AND”逻辑运算符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T15:20:45.957

运算符必须进入 EL 表达式内部，而不是外部。您应该将其`#{...}`视为一个大范围，其中各种变量/条件相互作用。

```
<x:someComponent rendered="#{bean.condition1 or bean.condition2}"> 
```

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)
*   [有条件地显示 JSF 组件](https://stackoverflow.com/questions/4870462/conditionally-displaying-jsf-components)
*   [如何有条件地渲染纯 HTML 元素，如 <div>s？](https://stackoverflow.com/questions/8816212/how-to-conditionally-render-plain-html-elements-like-divs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:25:49.277

表达式 EL 中的运算符 OR 是 ||。

尝试这个：

```
<ice:panelCollapsible  rendered ="#{mySessionBean.buttonVisibilities['myButton1'] || mySessionBean.buttonVisibilities['myButton2']}"> 
```

请参阅本教程[http://docs.oracle.com/javaee/1.4/tutorial/doc/JSIntro7.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)

问候

# php - 为什么我的 php 创建的图像不显示？

> ID：11064416
> 
> 赞同：-1
> 
> 时间：2012-06-16T14:48:19.170
> 
> 标签：php

我有一个问题，我有一个软件可以获取 pc 技术规格并将它们发布到网上，我们为每个规格提供了一个签名图像，这是由 php 创建的，但不再工作了；演示链接：[http](http://checkmyspecs.co.uk/button.php?id=646725) ://checkmyspecs.co.uk/button.php?id=646725或转到任何规格页面，例如：[http](http://www.checkmyspecs.co.uk/display2.php?id=646725) ://www.checkmyspecs.co.uk/display2.php?id=646725及以下页面上是抓取按钮代码。

图片必须由 button.php 创建，代码如下：

```
<?php

include "db.php"; 

function getdata($viewerid) { 
$query = "SELECT * FROM data where viewerid = '$viewerid'"; 

$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_array($result) or die(mysql_error());
$data = array(); 
array_push($data,$row['bootmethod'],$row['ComputerCaption'],$row['Infrared'],$row['DayLight'],$row['ManufacturerBox'],$row['Model'],$row['cores'],$row['memory'],$row['monitor'],$row['resolution'],$row['pixels'],$row['cpuvoltage'],$row['clockspeed'],$row['AddressWidth'],$row['SocketDesignation'],$row['cpuname'],$row['loadpercent'],$row['applications'],$row['videocardname'],$row['refreshrate'],$row['videodriver'],$row['installed'],$row['hddata'],$row['directx']); 
return $data; 
} 

function LoadPNG($imgname,$cur)
{

$getvalues = getdata($cur);

/* Attempt to open */
$im = @imagecreatefrompng($imgname);
// Removes white background (made from the original transparency)
$white = imagecolorallocate($im, 255, 255, 255);
// Make the background transparent

//Generate the text to write onto the image (the php Version).
//Don't know much about this

// Add some shadow to the text

$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
$blue = imagecolorallocate($im, 0, 173, 238);
$darkblue = imagecolorallocate($im, 54, 154, 191);

$font = '/fonts/arialbd.ttf';

$ramo = $getvalues[7];
$cpuo = $getvalues[15];
$gpuo = $getvalues[18];
$screeno = $getvalues[9];

$ram = "$ramo MB"; 
$cpu = "$cpuo"; 
$gpu = "$gpuo "; 
$screen = "$screeno"; 

imagettftext($im, 11, 0, 40, 23, $black, $font, $cpu);
imagettftext($im, 11, 0, 40, 53, $black, $font, $gpu);
imagettftext($im, 11, 0, 40, 83, $black, $font, $screen);
imagettftext($im, 11, 0, 40, 113, $black, $font, $ram);

// write text
$textcolor = imagecolorallocate($im, 0, 3, 0);
return $im;
}
header('Content-Type: image/png');
$button = '/images/button.png'; 
$img = LoadPNG($button,$_GET['id']);
imagepng($img); 

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:50:52.133

你的图像不是图像。这是真正输出的内容：

> **警告**：imagecolorallocate()：提供的参数不是第**24**行**/home/checkmys/public_html/button.php中的有效图像资源****警告**：imagecolorallocate()：提供的参数不是**/home/checkmys/public_html/中的有效图像资源第****33**行的**button.php****警告**：imagecolorallocate()：提供的参数不是**/home/checkmys/public_html/button.php中的有效图像资源，第****34**行**警告**：imagecolorallocate()：提供的参数不是**/中的有效图像资源第****35**行的**home/checkmys/public_html/button.php****警告** **********************: imagecolorallocate(): 提供的参数不是第**36**行**/home/checkmys/public_html/button.php中的有效图像资源****警告**: imagecolorallocate(): 提供的参数不是**/home/checkmys/public_html/button中的有效图像资源第****37**行的**.php****致命错误：在第****53**行的**/home/checkmys/public_html/button.php**中调用未定义函数 imagettftext()**********************

 ******您可以使用诸如[Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具来查看这一点，即使您的内容类型设置为图像也是如此。如果您删除该`@`符号，我们可能会看到描述您的图像无法创建的原因的错误。

此外，您目前对 SQL 注入持开放态度。您应该[对 PDO 使用准备好的查询](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)来避免这个问题。******

# java - 将所有环境（dev uat prod）的 jar 和配置打包在一个 zip 中是一种好习惯吗？

> ID：11064417
> 
> 赞同：1
> 
> 时间：2012-06-16T14:48:21.900
> 
> 标签：java, deployment, environment

我正在编写一些运营团队部署在 Unix 服务器上的软件。该软件由操作部署到不同的环境。即 dev、uat 和 prod。

可执行文件将在每个环境中进行不同的配置，因此 env 特定的配置文件。

我需要过程尽可能简单，并限制人为错误的可能性（简单性肯定对后者有很大影响）。

标题中描述并反映在下面的方法的一个主要优点是部署运行手册与环境无关。因此，运行手册非常简单：

登录到目标部署机器 卷曲 zip 文件 解压缩 运行所需配置的可执行文件（dev、uat 或 prod）

我当前的 zip 示例：

```
Executable jar file
App-dev.properties
App-uat.properties
App-prod.properties 
```

我正在检查我的选项并寻找有关最佳实践的建议，以使部署尽可能简单，同时最大限度地减少人为错误的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:09:01.780

我不认为好的做法/坏的做法进入它。如果它对你有用，那就去做吧。

我想你问的真正原因是找出是否有任何可能的缺点。我能想到的只有：

*   如果配置包含密码或密钥，那么在非生产机器中拥有一个综合 ZIP 文件可能会暴露更多的生产密钥/密码。

*   这将导致存在更多 ZIP 的“版本”，这可能会导致跟踪它们的更多问题。（可能不是……因为应该有办法解决这个问题。）

*   （来自 thkala 的评论）如果您在其他平台上使用的 ZIP 文件中包含生产配置，则存在有人可能会意外在非生产平台上部署“生产”系统的风险。这可能会造成灾难性的后果；例如损坏的生产数据库或安全问题。

# py2app - 我如何知道使用 py2app 打包时要包含哪些模块？

> ID：11064428
> 
> 赞同：0
> 
> 时间：2012-06-16T14:49:51.720
> 
> 标签：py2app

我正在尝试打包我没有编写的开源应用程序的 Mac 版本（我不是一个编码员）。我正在使用 py2app 0.6.4。该应用程序在我的系统上正确构建，但我不确定在*setup.py*文件中列出什么*内容。*

 *依赖项包括 qt4、PyQt、matplotlib、cherrypy 和 sip。

当我查看[这篇关于处理 PyQt 应用程序](http://www.rkblog.rk.edu.pl/w/p/building-mac-os-x-applications-py2app/)的文章时，我注意到依赖项并没有简单地列为*PyQt*，而是 *PyQt4._qt* 等。如何确定在应用程序代码的*包含*语句中插入什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:18:41.473

当 py2app 运行时，它将查看您的每个脚本，自动抓取您的脚本导入的任何模块或包。在许多情况下，这就足够了，您不需要在*包含*变量中列出任何内容。一些包有额外的文件，例如`import`语句不使用的数据文件，但必须存在才能使包正确运行。然后你需要明确地包含它，这样 py2app 也会抓住它。尝试使用您的应用程序；如果您收到一个错误，即找不到某些模块或文件，请担心将其放入*包含*变量中。*

# android - 如何在显示progressDialog的asynctask中动态构建表？

> ID：11064429
> 
> 赞同：0
> 
> 时间：2012-06-16T14:49:52.493
> 
> 标签：android, dialog, android-asynctask, block

我使用文件 CSV 的动态表创建简单的 Activity。我想在读取文件和构建 UI 之前简单地显示进度条。我坚持 AsyncTask ..

如果我执行 mytask.get() 则 UI 构建被阻止并且我想要的 progressDialog 将不会显示。但是，如果我调用 mytask.get() 则应用程序崩溃，因为我所有的 UI 都依赖于该 CSV。我找到了这个：

[调用 AsyncTask.get() 时未显示 ProgressDialog](https://stackoverflow.com/questions/9019249/progressdialog-not-shown-when-asynctask-get-called)

与相关：

[Android中AsyncTask的通用类？](https://stackoverflow.com/questions/3291490/common-class-for-asynctask-in-android)

但我什至无法想象如何在我的案例中使用这个概念..

```
public void onCreate(Bundle savedInstanceState) {
            ...
        Log.i(TAG, "before csv:");
        ReadFromCSV mytask = new ReadFromCSV(this);
        mytask.execute(char_name);
//      try {
//          mytask.get();
//      } catch (InterruptedException e1) {
//          // TODO Auto-generated catch block
//          Log.i(TAG, "1 exception");
//          e1.printStackTrace();
//      } catch (ExecutionException e1) {
//          Log.i(TAG, "2 exception");
//          e1.printStackTrace();
//      }
        Log.i(TAG, "after csv");

        // create table from var headers
        set_title_with_charname(flipper.get_moves_group(0)); //set activity title
        Log.i(TAG, "headers values:" + headers);
        heading.create_header(this, headers, 0);
        lay.addView(heading);
        lay.addView(flipper);
        lay.setOrientation(1);

        setContentView(lay);
    } 
```

这是我的任务：

```
private class ReadFromCSV extends AsyncTask<String, Void, String> {

    public Activity activity;
    private ProgressDialog Dialog = new ProgressDialog(MovesList.this);

    public ReadFromCSV(Activity a) {
        activity = a;
    }

    protected void onPreExecute() {
        Log.i(TAG, "start onPreExecute");
        Dialog.setMessage("Please wait...");
        Dialog.show();

        Log.i(TAG, "END onPreExecute");
    }

    protected String doInBackground(String... urls) {
        Log.i(TAG, "doInBackground");
        // return loadImageFromNetwork(urls[0]);
        String new_val = urls[0] + "doInBack";
        Log.i(TAG, "new_val: " + new_val);

        try {
            readfromcsv(flipper, char_name);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Log.i(TAG, "END doInBackground");

        return new_val;
    }

    protected void onPostExecute(String result) {
        Log.i(TAG, "onpostexecute");
        Log.i(TAG, "result: " + result);

        try {
            if(Dialog.isShowing()) {
                Dialog.dismiss();
            }
                    // do your Display and data setting operation here
        }
        catch(Exception e) {
            Log.i(TAG, "exception: ");
        }

        Log.i(TAG, "END onPostExecute");
    }
} 
```

这是 readfromcsv 的代码：

```
public void readfromcsv(MyFlipper flipper, String char_name)
        throws IOException {

    String filename = char_name + ".csv";
    InputStream is = getAssets().open(filename);
    BufferedReader in = new BufferedReader(new InputStreamReader(is,
            "UTF-8"));

    String reader = "";
    int line_nb = 0;
    MyTable table = null;
    while ((reader = in.readLine()) != null) {
        line_nb += 1;
        Log.d(TAG, "file line: " + reader);
        String[] row_data = reader.split("ą");
        Log.d(TAG, "splitted: " + row_data[0] + ',' + row_data[1] + "..");
        if (line_nb == 1) {
            Log.i(TAG, "first row - memorized headers..");
            headers = row_data;
            Log.i(TAG, "headers memorized: " + row_data[0] + ","
                    + row_data[1] + "..");
            continue;
        }

        if (row_data[0].equals("")) {
            // new table
            // Log.i(TAG, "new moves_group..");
            if (table != null) {

                add_table(table);
            }
            Log.d(TAG, "creating new table");
            table = new MyTable(this, true, row_data[1]);
            Log.d(TAG, "new table created");
            continue;
        }
        Log.d(TAG, "regular row..");
        table.row_from_template(this, row_data, line_nb % 2);
        if (line_nb == 60) {
            break;
        }
        ;
    }
    add_table(table);
    in.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:08:22.857

我不确定你为什么使用 get as get

```
Waits if necessary for the computation to complete, and then retrieves its result. 
```

你可以简单地使用 onPostExecute 异步地让你的 UI 工作。

并避免在 doInBackground 中与 UI 相关的 wokr 和从 doInBackground 调用的函数...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:08:54.823

很可能您的 add_table 您从 doInBackground 调用的某些代码正在执行某些 UI 功能。由于 doInBackground 不会发生在 UI 线程上，因此您无法在该函数中触摸 UI。相反，您可以使用需要显示的任何数据调用 publishProgress。您可以通过泛型类型声明更改 publishProgress 使用的类型。中间一个是 publishProgress 使用的。

# file - 如何将变量值发送到电子邮件/外部文件

> ID：11064432
> 
> 赞同：1
> 
> 时间：2012-06-16T14:50:09.027
> 
> 标签：file, variables, actionscript, external

我不是 Flash 专家...所以，我想做一个注册页面，并获取变量值。我想将变量发送到外部文件或我的电子邮件。

我有 2 个具有此实例名称的输入文本组件：

姓名密码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:06:00.820

如果您的应用程序在 Flash 播放器中运行，您将需要一个服务器端脚本来通过电子邮件发送数据或将其保存到服务器上的文件中。有很多教程可以帮助你解决这个问题，但这里有一些我发现它们看起来很有用：

1.  [使用 ActionScript 3.0 和 PHP 的联系表单](http://www.webdesignmo.com/blog/2008/08/14/flash-contact-form-in-actionscript-3/)
2.  [使用 ActionScript 3.0 和 PHP 将数据保存到文本文件](http://www.seinia.com/tutorials/SavingAS3DataToATextFile/)

# php - 使用 javascript 监视新文件的目录

> ID：11064435
> 
> 赞同：0
> 
> 时间：2012-06-16T14:50:12.553
> 
> 标签：php, javascript, filesystems

我有一个名为*loadDATA*的函数，它从服务器加载文件*data.json*到 js 文件所在的同一目录中。我现在需要在该目录中查看每 5 分钟出现一次的新 .json 文件，获取名称并替换传递给新 .json 文件名的初始 data.json URL，遗憾的是我不知道。

我一直在寻找 js 来做到这一点，但不断看到 php 响应。js是否有可能，只是在ars中很痛苦。我不反对使用 php，它只是有一段时间，如果我记得更直观一点。我确实看到了一个名为 node.js 的东西，但我不清楚它是否也与 IE 兼容。我愿意接受有关解决此问题的所有建议。感谢您的帮助。

```
 jsonURL = "data.json";

    function loadDATA() {
      $.getJSON(jsonURL, function(json) {
//Do some stuff

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:52:59.027

好吧，我想假设您可以询问目录的索引，如果它不存在，那么服务器应该返回其中的文件列表，甚至可能包含它们的修改时间。所以这将使它成为可能。

另一方面，PHP 会使它变得容易得多。

# python - 1049, “未知数据库'数据库'” django mysql 无法连接

> ID：11064438
> 
> 赞同：4
> 
> 时间：2012-06-16T14:50:42.460
> 
> 标签：python, mysql, django, amazon-ec2, database-connection

```
Exception Type: OperationalError at /
Exception Value: (1049, "Unknown database 'database'") 
```

目前我尝试了这个：

```
DATABASES = {
   'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'database',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': '****',                  # Not used with sqlite3.
        'HOST': '/var/lib/mysql/database/',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '80',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

如果我不指定主机，我会收到此错误：

```
OperationalError at /

(2002, "Can't connect to local MySQL server through socket '/var/lib/mysql/database' (13)") 
```

它可以是具有权限的东西吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-20T21:37:13.343

首先，在mysql上创建数据库。其次，像这样编辑您的默认连接。

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'MY_DATABASE_NAME',
        'USER': 'root',
        'PASSWORD': 'MY_PASSWORD',
    }
} 
```

最后运行你的syncdb。

> ./manage.py 同步数据库

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-16T15:16:16.710

`PORT`不是Web服务器端口，而是数据库端口，`3306`用于MySQL，`HOST`是数据库服务器的IP或名称。你可能想要`127.0.0.1`.

`create database mydatabase charset utf8;`您应该在 mysql 提示符下预先创建数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T15:09:12.420

我不认为您可以通过名称数据库创建数据库。所以请先检查以下...

1) 是否已安装 mysql-server 并创建了具有适当授予所有权限的数据库？如果您已这样做，请检查后续步骤

2）我不了解亚马逊，但这个错误在 Redhat 和 Fedora 的旧版 Linux 发行版中很常见。一个选项是通过将 /etc/sysconfig/selinux 中的 SELINUX 行设置为 Disabled 来执行此操作：

SELINUX=禁用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-06T06:40:59.490

在终端上登录 mysql 并创建数据库

```
mysql -u root -p

CREATE DATABASE dbname;

USE dbname; 
```

然后在setting.py文件上

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'dbname',
        'USER': 'root', #Mysql username
        'PASSWORD': 'password', #mysql password
        'HOST': 'localhost',   # Or an IP Address that your DB is hosted on
        'PORT': '3306',
    }
} 
```

# javascript - 多行 Svg 工具提示

> ID：11064440
> 
> 赞同：0
> 
> 时间：2012-06-16T14:50:51.877
> 
> 标签：javascript, svg, tooltip

我已经创建了许多 SVG 格式的多边形形状。并将它们组合在一起。当用户将鼠标悬停在组上时，会出现一个工具提示框。我用过ecmascript。我要做的是使工具提示框成为多行框。任何想法如何做到这一点？

```
<script type="text/ecmascript">
    <![CDATA[

    function init(evt)
    {
        if ( window.svgDocument == null )
        {
        svgDocument = evt.target.ownerDocument;
        }

        tooltip = svgDocument.getElementById('tooltip');
        tooltip_bg = svgDocument.getElementById('tooltip_bg');

    }

    function ShowTooltip(evt, mouseovertext)
    {
        tooltip.setAttributeNS(null,"x",evt.clientX+17);
        tooltip.setAttributeNS(null,"y",evt.clientY+14);
        tooltip.firstChild.data = mouseovertext;
        tooltip.setAttributeNS(null,"visibility","visible");

        length = tooltip.getComputedTextLength();
        tooltip_bg.setAttributeNS(null,"width",length+8);
        tooltip_bg.setAttributeNS(null,"x",evt.clientX+14);
        tooltip_bg.setAttributeNS(null,"y",evt.clientY+1);
        tooltip_bg.setAttributeNS(null,"visibility","visibile");
    }

    function HideTooltip(evt)
    {
        tooltip.setAttributeNS(null,"visibility","hidden");
        tooltip_bg.setAttributeNS(null,"visibility","hidden");
    }

    ]]>
  </script>
<SVG>
<g onmousemove="ShowTooltip(evt, 'GHANA 2000')" onmouseout="HideTooltip(evt)">
    <path fill="#EEEEEE" d="M250,0c47,0,85.183,10.506,125,33.494L250,250V0z"/>
    <path id="score" d="M250,57c36.284,0,65.761,8.11,96.5,25.857L250,250V57z"/>
    <path fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" d="M250,0c47,0,85.183,10.506,125,33.494L250,250V0z"/>
    <text transform="matrix(1 0 0 1 283.9883 92.0024)" fill="#FFFFFF" font-family="'WalkwayBlack'" font-size="16">62</text>
</g>

<rect class="tooltip_bg" id="tooltip_bg" x="0" y="0" width="55" height="17" visibility="hidden"/>
<text class="tooltip" id="tooltip" x="0" y="0" visibility="hidden">Tooltip</text>
<SVG> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:13:52.123

您可以在现有文本元素中创建更多`<text>`元素或`<tspan>`元素，将后续文本行放入附加元素中，然后通过赋予它们相同的 x 属性值并将每个文本/tspan 放置在前面的文本/tspan 之下，并将 y 属性增加高度上一行的边界框。

或者更简单，只需将元素创建`<title>`为多边形形状元素的子元素，并将多行文本直接放在其中，大多数 UA 会将工具提示显示为多行工具提示，它当然适用于 Firefox 和 Opera。这是一个[html 示例](http://hsivonen.iki.fi/test/moz/title-attribute.html)，但它应该与 SVG 一样工作，只是 SVG 有一个标题元素而不是一个标题属性。

# java - 返回字符串中的href

> ID：11064442
> 
> 赞同：1
> 
> 时间：2012-06-16T14:51:01.297
> 
> 标签：java, java-me

如何在字符串中返回 href，我可以访问开始位置但不确定如何获取最后位置：

这是我到目前为止所拥有的：

```
 String str = "sadf ad fas dfa http://www.google.com sdfa sadf as dfas";

    int index = str.indexOf("http");
    String href = str.substring(index , ???); 
```

结束索引应该是什么？

请注意，这是针对 j2me 的，我需要尽量减少下载占用，因此我不能使用正则表达式或第三方正则表达式库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:55:06.877

如果没有找到空格，您最好的选择可能是切割最接近索引的空间或直到字符串的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:06:44.480

可靠地做到这一点的唯一方法是使用正则表达式。在 Java SE 中，您可以执行以下操作：

```
Pattern p = Pattern.compile("a*b"); // This is the Regular Expression to match
Matcher m = MY_PATTERN.matcher("aaaaaaab"); // This is the String to search through
while (m.find()) { // While there are matches found
    String s = m.group(1);  // Set String s equal to matches of the entire regex
    // s now contains "aaaaaaab"
} 
```

组基本上是正则表达式的一部分。如果你用括号括起来它的一部分，它会创建一个“组”，你可以有选择地访问字符串中只匹配正则表达式的“部分”或“组”的部分。

在 J2ME 中，您需要导入一个像这样的正则表达式库：

[http://code.google.com/p/regexp-me/](http://code.google.com/p/regexp-me/)

这是相同的整体概念，语法略有不同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T02:47:51.657

如果这是您在应用程序中唯一需要它的地方，那么使用正则表达式库可能会非常低效。

对于您当前的用例，在实践中查找下一个空格字符的索引可能已经足够了，但这并不是一个完整的面向未来的解决方案。

您可以做的是编写一个方法，根据 URI 的标准定义从字符串中提取所有 URI：[http ://www.ietf.org/rfc/rfc2396.txt](http://www.ietf.org/rfc/rfc2396.txt)

（实际上，这意味着寻找构成 URI 特定区域的特殊字符以及不允许出现在 URI 中的字符）

这也是您可能意识到您实际上应该寻找“http://”的索引，而不仅仅是“http”

# c# - Windows 窗体应用程序无法正常关闭

> ID：11064445
> 
> 赞同：0
> 
> 时间：2012-06-16T14:51:14.090
> 
> 标签：c#, exit

关闭 Windows 窗体应用程序时出现问题。我需要知道`private void Form1_FormClosing(object sender, FormClosingEventArgs e)`如果我按下表单上的**X**按钮并且我只是单击以关闭计算机，它是否总是被调用？

任何人都不会像往常一样关闭这个时间形式。我现在总是有屏幕可以按**End**

当表单关闭时，我已经连接到数据库，并将一些记录复制到另一个数据库。这可能是问题吗？表单快到快了，sql命令无法完成？

我试过了`Enviroment.Exit(0)`，`Application.Exit()`。似乎没有什么工作正常。

如何让它完成所有的sql然后退出？

```
 private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            //close database connection
            if (Con.State == ConnectionState.Open)
                Con.Close();
            info.Dispose();

            //last check for local database
            try
            {
               // database queries and so on....

            }
            catch (Exception ex)
            {
                writeToLogFile(ex.Message);
            }
            // exit
            Environment.Exit(0);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:33:18.010

更新（基于您的最后评论）：

```
private const int WM_QUERYENDSESSION = 0x11;
private const int WM_CANCELMODE = 0x1f;
private bool shutdownRequested = false;

...

protected override void WndProc(ref Message ex)
{
    if (ex.Msg == WM_QUERYENDSESSION)
    {
        Message MyMsg = new Message();
        MyMsg.Msg = WM_CANCELMODE;
        base.WndProc(ref MyMsg);
        this.shutdownRequested = true;
    }
    else
    {
        base.WndProc(ex);
    }
}

...

private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    this.Visible = false; // optional
    this.ShowInTaskbar = false; // optional
    Task db = Task.Factory.StartNew(() => DBUpdate();
    Task.WaitAll(db); // you can have more tasks like the one above
    if (this.shutdownRequested)
        Process.Start("shutdown.exe","-s");
}

private void DBUpdate()
{
    // write your db code here
} 
```

我相信这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:38:37.903

> 任何人都不会像往常一样关闭这个时间形式。我现在总是有屏幕可以按 End

您是说您希望应用程序在计算机重新启动或关闭时自动关闭吗？

如果是这样，只需将事件连接到*Microsoft.Win32.SystemEvents.SessionEnding*事件。

```
Microsoft.Win32.SystemEvents.SessionEnding += new Microsoft.Win32.SessionEndingEventHandler(SystemEvents_SessionEnding);

void SystemEvents_SessionEnding(object sender, Microsoft.Win32.SessionEndingEventArgs e)
    {
        // Run your application shut down code here...
    } 
```

# html - 在 Joomla 中编辑 HTML

> ID：11064447
> 
> 赞同：0
> 
> 时间：2012-06-16T14:51:41.797
> 
> 标签：html, css, joomla, footer

我希望有一个人可以帮助我。我正在 Joomla 中创建一个新站点，但我的页脚出现了一些问题。我需要它是连续的，宽度设置为屏幕的 100%。我知道如何在 HTML 中使用`clear: both`和`position: absolute`属性，然后将页脚 div 放在包装器之外。但是，我似乎无法找到 HTML 文件以便我可以编辑它们。

我正在使用 Yootheme 模板；纳米。

[你可以在这里](http://webkjaer.dk/)访问我的主页

有人能帮我吗？或者有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:57:17.290

改变 Yoothemes 并没有太多乐趣，但这里有两个建议：

1.  您感兴趣的 CSS 位于`templates/yoo_nano/warp/css/layout.css`
2.  安装 Firebug 以帮助您调整#footer 的 CSS 以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:25:12.493

您必须在此处编辑 index.ph ：

> /templates/yoo_nano/index.php

并在所需位置添加您的 HTML 代码。

# unix - 分割图案后分成不同的文件

> ID：11064452
> 
> 赞同：0
> 
> 时间：2012-06-16T14:52:03.793
> 
> 标签：unix

我有以下模式

```
k0
lj33
lp90
ko00
j9
mn12
sh30
lp33
ji90
e3
nd32
jk90
hi43
df45
cv89
er43 
```

我需要不同的文件包含

```
File1   File2   File3
k0        j9    e3
lj33    mn12    nd32
lp90    sh30    jk90
ko00    lp33    hi43
        ji90    df45
                cv89
                er43 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:03:32.813

你的意思是：每个文件都以两个字符的字符串开头？

试试这个命令：

```
csplit input /^..$/ {*} 
```

请忽略第一个空文件`xx00`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:08:27.067

假设您需要在到达两个字符串时拆分数据：

```
awk '{if(length($0)==2){filename=$0}; print >filename}' your_file 
```

# deployment - 每次将代码推送到 Github 时更新多个 Windows 服务器

> ID：11064453
> 
> 赞同：0
> 
> 时间：2012-06-16T14:52:03.957
> 
> 标签：deployment, github, windows-server-2008

我们目前在负载均衡器后面运行 8 个 EC2 实例（曾经运行 2 个 - 但我们的应用程序起飞了，我们现在有更多流量）

我们的代码部署在 Github 上。

当我们有 2 台服务器时，我们很容易将远程桌面编辑到它们中并执行 git pull。但是现在考虑到我们有 8 台服务器并且将来可能会有更多服务器，这似乎很疯狂。

这适用于在 Windows 2008 服务器上的 IIS 上部署的 Asp.Net Web 服务（基于 MVC3 构建）。

我想知道处理这个问题的最佳做法是什么？如果我可以推送到一个分支/或一个全新的仅生产仓库（如果需要）并且所有服务器都会收到通知并拉取更改，那么我会非常喜欢它。

最坏的情况是，我正在考虑编写一个通知服务，在每台服务器上执行此操作 - 但在我深入研究并花时间在它上面之前，我想知道是否有现成可用的东西可以帮助我到达那里。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:32:00.413

您是否尝试过使用[http://octopusdeploy.com/](http://octopusdeploy.com/)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:28:23.560

检查 webhook [https://help.github.com/articles/post-receive-hooks](https://help.github.com/articles/post-receive-hooks)。您可以编写一个简单的 http 处理程序让 github 向您推送通知。然后你可以做任何你想做的事。

# python - Adobe Photoshop 风格的分色和 OpenCV

> ID：11064454
> 
> 赞同：15
> 
> 时间：2012-06-16T14:52:06.493
> 
> 标签：python, opencv, numpy

Adobe Photoshop 似乎通过根据指定的级别数分别量化每个颜色通道来进行后处理。因此，例如，如果您指定 2 个级别，那么它将采用 R 值，如果您的 R 值小于 128，则将其设置为 0；如果您的值 >= 128，则将其设置为 255。它对 G 和 B 执行相同的操作.

除了遍历每个像素并进行比较并分别设置值之外，是否有一种有效的方法可以在 Python 中使用 OpenCV 执行此操作？由于 OpenCV 2.4 中的图像是 NumPy ndarray，是否有一种有效的方法可以严格通过 NumPy 进行此计算？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-17T15:49:18.387

您的问题似乎特别是在询问 2 级。但是超过 2 级呢？所以我在下面添加了一个代码，它可以对任何颜色级别进行分色。

```
import numpy as np
import cv2

im = cv2.imread('messi5.jpg')

n = 2    # Number of levels of quantization

indices = np.arange(0,256)   # List of all colors 

divider = np.linspace(0,255,n+1)[1] # we get a divider

quantiz = np.int0(np.linspace(0,255,n)) # we get quantization colors

color_levels = np.clip(np.int0(indices/divider),0,n-1) # color levels 0,1,2..

palette = quantiz[color_levels] # Creating the palette

im2 = palette[im]  # Applying palette on image

im2 = cv2.convertScaleAbs(im2) # Converting image back to uint8

cv2.imshow('im2',im2)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

**这段代码在 Numpy**中使用了一种称为调色板方法的方法，它比遍历像素非常快。您可以在此处找到更多详细信息如何使用它来加速代码：[**Numpy 中的快速数组操作**](http://opencvpython.blogspot.com/2012/06/fast-array-manipulation-in-numpy.html)

以下是我在不同级别获得的结果：

**原始图像：**

![在此处输入图像描述](../Images/f7deb43116b33355265860ba39ab1c9a.png)

**2级：**

![在此处输入图像描述](../Images/6d3471401cc0c66875ea1d2dac483391.png)

**4级：**

![在此处输入图像描述](../Images/2b28e2216ea3298652c5a47ee9b06fea.png)

**8级：**

![在此处输入图像描述](../Images/5ed468f75a595920e937cad06d231e5b.png)

等等...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-16T16:25:45.097

我们可以使用 numpy 非常巧妙地做到这一点，而无需担心通道！

```
import cv2
im = cv2.imread('1_tree_small.jpg')
im[im >= 128]= 255
im[im < 128] = 0
cv2.imwrite('out.jpg', im) 
```

输出：

![在此处输入图像描述](../Images/921f5c1ca486ff65a468977de093953f.png)

输入：

![在此处输入图像描述](../Images/79f3ff9ac65a89891b8b6e91152c687b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-19T20:00:16.733

我见过的最酷的“海报化”使用 [Mean Shift Segmentation](https://courses.csail.mit.edu/6.869/handouts/PAMIMeanshift.pdf)。我使用[作者的 GitHub](https://github.com/bbbbyang/Mean-Shift-Segmentation)存储库中的代码创建了以下图像（您需要取消注释[Maincpp.cpp 的第 27 行](https://github.com/bbbbyang/Mean-Shift-Segmentation/blob/master/Maincpp.cpp)才能执行分割步骤）。

[![在此处输入图像描述](../Images/ed80c2c05daf372a775f48b666edc49b.png)](https://i.stack.imgur.com/CDXrH.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-07T15:24:30.253

[来自fraxel](https://stackoverflow.com/users/1175101/fraxel)的 n 级答案的泛化

```
import cv2 as cv
import matplotlib.pyplot as plt

im = cv.imread("Lenna.png") 

n = 5

for i in range(n):
    im[(im >= i*255/n) & (im < (i+1)*255/n)] = i*255/(n-1)

plt.imshow(cv.cvtColor(im, cv.COLOR_BGRA2RGB))
plt.show() 
```

n = 2

[![在此处输入图像描述](../Images/788e33380d4b15955d76ec8473a9e8f2.png)](https://i.stack.imgur.com/FGkfX.png)

n = 5

[![输出 n=5](../Images/46f6a02d23be6a6a36000f7446091b1a.png)](https://i.stack.imgur.com/liwEX.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-03T07:43:04.667

使用[cv::LUT()](https://docs.opencv.org/4.x/d2/de8/group__core__array.html#gab55b8d062b7f5587720ede032d34156f)。这是最简单和最快的方法。

```
cv::Mat posterize(const cv::Mat &bgrmat, uint8_t lvls)
{
    cv::Mat lookUpTable(1, 256, CV_8U);
    uchar* p = lookUpTable.ptr();
    float step = 255.0f / lvls;
    for(int i = 0; i < 256; ++i)
        p[i] = static_cast<uchar>(step * std::floor(i / step));
    cv::Mat omat;
    cv::LUT(bgrmat,lookUpTable,omat);
    return omat;
} 
```

# c++ - VS 2010 中的内存限制与 c++ 或只是另一个错误？

> ID：11064456
> 
> 赞同：0
> 
> 时间：2012-06-16T14:52:29.603
> 
> 标签：c++, visual-studio, memory

我有一个程序使用大量内存进行计算。不会太多，我猜。当然，所有 bif 数组都存储在堆中。MS VS 10 是我的 IDE。Windows 中的任务管理器说它需要 1548 Kb。我还在写它，在某个时候我添加了

```
bool* mask= new bool [numberOfUnknowns]; 
```

并且`numberOfUnknowns`是关于`1600`。它在其中一个类的公共方法中（不确定是否重要）。我得到

> ProgrammName.exe 中 0x777615de 处的未处理异常：0xC0000005：访问冲突写入位置 0x006a2000。

在这条线上。它适用于硬编码

```
new bool [10]; 
```

并失败了

```
new bool [1600]; 
```

那么，我是否达到了可能的内存大小？还是我应该检查其他东西？我不相信我不能得到更多的记忆，因为把

```
double* a = new double [100000]; 
```

主要用于检查使内存大小更大，但运行时错误位于同一位置。
提前致谢。

**加法1：**

我将包含此行的方法调用放在所有其他调用之前，并且它起作用了。所以，我想这是内存问题，因为在我班的其他方法工作期间分配/释放了一些内存。那么，怎么可能呢？我应该发布更多代码还是有针对这种情况的通用解决方案/描述？

**加法2：**而对于`std::vector`——现在需要找出问题所在，不想不了解就离开这个问题。感谢帖子的风格更正！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:57:37.460

使用`std::vector`. 您的错误基本上是访问您不再拥有的内存-因为您已经释放它或超过了结尾或类似的东西。您需要使用基于类的解决方案来防止此问题。

# jquery - 如果图像具有 ALT 属性，则显示 div

> ID：11064464
> 
> 赞同：3
> 
> 时间：2012-06-16T14:53:35.547
> 
> 标签：jquery, if-statement

我有这个很棒的字幕功能。如果我填写 alt 属性，它会创建一个标题，并将 data 属性作为标题的链接。效果很好。

问题是如果我在 alt 或 data 属性中没有任何内容，则仍然会出现 div。这是一个问题，因为正如您在我的 CSS 中看到的那样，链接的背景是带填充的，因此没有数据或 alt 属性，一个空白 div 会出现黑色背景。

我希望能够更改我的功能，说如果图像有 alt，显示与数据信息一起创建标题，否则，将整个 .caption 显示为无。

我不知道让 jQuery 检查是否有 alt。我希望 ALT 属性控制是否显示 alt 和数据信息。

这是我目前拥有的：

查询：

```
function imageCaption() {
    var $image =$('img');

    $image.wrap('<div class="box"></div>');

    $image.each(function() {
        var caption = this.alt;
        var link = $(this).attr('data');
        $(this).after('<div class="caption"><a href="'+ link +'" target="blank">'+ caption +'</a></div>');
    });
} 
```

HTML：

```
<img src="IMAGE URL" alt="This is my first image" data="http://www.google.com">
<img src="IMAGE URL"> 
```

^^ 第二张图片渲染了标题框，并带有一个带填充的空白链接。

CSS：

```
 #photoWrapper .caption {
    position: absolute;
    bottom: 10px;
    right: 5px;
    text-transform: uppercase;
    font-size: 10px;
}

#photoWrapper .caption a {
    text-decoration: none;
    color: #F1F1F1;
    padding: 5px 10px 5px 10px;
    background: rgba(0,0,0,0.7);
}

#photoWrapper .caption a:hover {
    background: rgba(0,0,0,0.9);
    color: #ff6666;
} 
```

所以总结一下，只是想用一个 IF 语句来改变我的函数，看看图像是否有 alt 属性，如果有，显示带有链接和文本的标题，如果没有，隐藏标题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T14:59:00.737

```
$image.each(function() {
   if($(this).attr("alt")) {
       // The image has an attribute do your thing
        var caption = this.alt;
        var link = $(this).attr('data');
        $(this).after('<div class="caption"><a href="'+ link +'" target="blank">'+ caption +'</a></div>');

    }     
}); 
```

这里有一个类似的问题：[jQuery hasAttr checks to see if there is an attribute on an element](https://stackoverflow.com/questions/1318076/jquery-hasattr-checking-to-see-if-there-is-an-attribute-on-an-element)

这表明了另一种进行检查的方法，但是我不确定是否需要更长的代码。

```
var attr = $(this).attr('name');

// For some browsers, `attr` is undefined; for others,
// `attr` is false.  Check for both.
if (typeof attr !== 'undefined' && attr !== false) {
    // ...
} 
```

# wordpress - 我只想为选定的 IP 地址提供 wordpress 登录小部件，这可能吗？

> ID：11064468
> 
> 赞同：1
> 
> 时间：2012-06-16T14:53:46.467
> 
> 标签：wordpress

我在 wordpress 网站上有一个 ajax 登录小部件，只有我和其他管理员需要查看它，所以我想知道是否有办法只将此小部件提供给我的 IP 地址和其他管理员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:15:01.477

您可以使用 .htaccess 这样做，只允许某些 IP 地址访问您的 wp-login.php

```
<Files wp-login.php>
  Order Deny,Allow
  Deny from all
  Allow from xx.xx.xx.xx
</Files> 
```

更新：如果你想控制谁查看小部件，你可以使用条件语句使用 PHP 的 $_SERVER['REMOTE_ADDR'] 来获取访问者的 IP 地址。如果它与某个地址匹配，则显示小部件。

# silverlight - 在浏览器外运行时调试服务器项目？

> ID：11064469
> 
> 赞同：1
> 
> 时间：2012-06-16T14:53:48.770
> 
> 标签：silverlight, debugging, out-of-browser

当我在 VS 2010 中通过调试启动 Silverlight 4 和 5 应用程序时，我可以在客户端项目以及为应用程序提供服务的服务器项目中设置断点。

然而，在浏览器外运行应用程序（即配置应用程序浏览器外并将其设置为启动项目）时，调试器将不再连接到服务器，尽管服务器项目仍将正确启动.

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:04:05.030

您可以在要中断的位置设置 Launch 或 Break 语句。

```
// Will launch a debugger once and will break once
System.Diagnostics.Debugger.Launch();

//Will launch a debugger and break any time the code is hit
System.Diagnostics.Debugger.Break(); 
```

# jquery - 检索在 jsp 中使用 .load() (jquery: ajax) 传递的数据

> ID：11064470
> 
> 赞同：0
> 
> 时间：2012-06-16T14:53:55.287
> 
> 标签：jquery, ajax, jsp

我想检索使用 ajax 调用的请求的 JSP 上的参数值。我将数据传递为：

```
$(document).ready(function(){
    $(".button-links").click(function(){
        var id=this.id;
        $("#result").load("validate.jsp?sem=id");
    });
}); 
```

现在我想检索存储在`sem`请求的 JSP 文件中的变量中的数据`validate.jsp`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:41:10.153

我仍然不确定你到底想用 `sem`.
取一个场景。您想捕获单击按钮的值`sem`并希望将其显示`input`在`validate.jsp`.

```
$(document).ready(function(){
    var id = null;
    $(".button-links").click(function(){
        id=this.id;
        $("#result").load("validate.jsp?sem=id");
        // Assumng we have a hidden input with class="buttoName"
        $("#result .buttonName").val(id);
    });

    // Use on as validate.jsp is dynamically loaded via Ajax
    $(".submitInValidate").on('click',function(){
       var requierdVal =  $("#result .buttonName").val();  
       // Now you can do further processing with this value. 
    });

}); 
```

通过这种方式，您可以获得`id`或`sem`in 的值`validate.jsp`。
如果您要查找其他内容，只需将 的值设置`sem`为隐藏输入并稍后在`validate.jsp`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:24:54.363

请尝试以下代码：

**javascript:**

```
$(document).ready(function(){
    $(".button-links").click(function(){
        var id=this.id;

        $.ajax({
            url:"validate.jsp?sem="+id,
            type: 'POST',
            success: function(response) {
                alert(response);
            }
        });
    });
}); 
```

**验证.jsp**

```
<%
    String sem = request.getParameter( "sem" );
    System.out.println( "Printed:" + sem );
%> 
```

# sql - 选择记录的第一个实例

> ID：11064473
> 
> 赞同：11
> 
> 时间：2012-06-16T14:54:01.200
> 
> 标签：sql, sql-server-2008

我有一个表，`myTable`里面有两个字段`ID`，`patientID`. 同一个患者 ID 可以在表中多次使用不同的 ID。如何确保我只获得`ONE`每个 . 的实例`patientID`？

编辑：我知道这不是完美的设计，但我需要今天从数据库中获取一些信息，然后再修复它。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-16T14:58:41.750

您可以使用`CTE`with[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数：

```
WITH CTE AS(
    SELECT myTable.*
    , RN = ROW_NUMBER()OVER(PARTITION BY patientID ORDER BY ID)
    FROM myTable 
)
SELECT * FROM CTE
WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T14:56:48.303

听起来您正在寻找`DISTINCT`：

```
SELECT DISTINCT patientID FROM myTable 
```

您可以通过以下方式获得相同的“效果” `GROUP BY`：

```
SELECT patientID FROM myTable GROUP BY patientID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T14:55:46.820

简单的方法是添加`LIMIT 1`到查询的末尾。这将确保结果集中只返回一行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-02-15T14:17:04.017

```
WITH CTE AS
(
   SELECT tableName.*,ROW_NUMBER() OVER(PARTITION BY patientID ORDER BY patientID) As 'Position' FROM  tableName
)

SELECT * FROM CTE
WHERE
Position = 1 
```

# javascript - Facebook家庭关系Json数据

> ID：11064475
> 
> 赞同：-1
> 
> 时间：2012-06-16T14:54:08.637
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

需要帮忙，

```
function getFamily()
{
FB.api('/me/family', function(response) {                   
alert(JSON.stringify(response));                        
});
} 
```

使用上述功能，我无法获取家庭关系列表。如果有其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:16:41.763

您是否首先获得了“user_relationships”权限……？

# javascript - facebook 发送日期的格式的名称是什么，在 javascript 中对该格式进行排序的最简单方法是什么？

> ID：11064478
> 
> 赞同：0
> 
> 时间：2012-06-16T14:54:35.470
> 
> 标签：javascript, iso

我通过将它们都推入一个新对象来合并两个 facebook 请求。这就是为什么我需要使用格式如下的数据：

```
2011-06-20T19:47:12+0000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:08:26.710

这很可能是[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)。

# 也可以看看

*   [Javascript/EcmaScript3 是否支持 ISO8601 日期解析？](https://stackoverflow.com/questions/2479714/)
*   [帮助在 Javascript 中解析 ISO 8601 日期](https://stackoverflow.com/questions/4829569)

# java - 如何通过文件上传将数据发送到服务器

> ID：11064479
> 
> 赞同：1
> 
> 时间：2012-06-16T14:54:39.960
> 
> 标签：java, android

我目前正在android中上传文件。现在我想通过该文件上传发送一些数据和 ID。所以我会在服务器端处理这个ID。这是我上传文件的方式。这段代码工作得很好。

这是代码

```
public int uploadFile(String sourceFileUri, final String imageName) {
    //Toast.makeText(getApplicationContext(), imageName, Toast.LENGTH_LONG).show();
    String upLoadServerUri = "http://www.example.com/android/fileupload.php";
    String fileName = sourceFileUri;
    //Toast.makeText(getApplicationContext(), sourceFileUri, Toast.LENGTH_LONG).show();
    HttpURLConnection conn = null;
    DataOutputStream dos = null;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1 * 1024 * 1024;

    File sourceFile = new File(sourceFileUri);
    if (!sourceFile.isFile()) {
        Log.e("uploadFile", "Source File Does not exist");
        return 0;
    }

    try { 
        // open a URL connection to the Servlet
        FileInputStream fileInputStream = new FileInputStream(sourceFile);
        URL url = new URL(upLoadServerUri);
        conn = (HttpURLConnection) url.openConnection(); // Open a HTTP  connection to  the URL
        conn.setDoInput(true); // Allow Inputs
        conn.setDoOutput(true); // Allow Outputs
        conn.setUseCaches(false); // Don't use a Cached Copy
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "Keep-Alive");
        conn.setRequestProperty("ENCTYPE", "multipart/form-data");
        conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
        conn.setRequestProperty("uploaded_file", fileName);
        dos = new DataOutputStream(conn.getOutputStream());

        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
        dos.writeBytes(lineEnd);

        bytesAvailable = fileInputStream.available(); // create a buffer of  maximum size

        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

         // read file and write it into form...
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);  

        while (bytesRead > 0) {
             dos.write(buffer, 0, bufferSize);
             bytesAvailable = fileInputStream.available();
             bufferSize = Math.min(bytesAvailable, maxBufferSize);
             bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }

        // send multipart form data necesssary after file data...
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        // Responses from the server (code and message)
        serverResponseCode = conn.getResponseCode();
        String serverResponseMessage = conn.getResponseMessage();

        Log.i("uploadFile", "HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);
        if(serverResponseCode == 200){
            runOnUiThread(new Runnable() {
                 public void run() {
                     //tv.setText("File Upload Completed.");
                     if(fileData(globalUID, imageName)) {
                         Toast.makeText(Camera.this, "File Upload Complete.", Toast.LENGTH_SHORT).show();
                     }
                 }
            });
        }
        //close the streams //
        fileInputStream.close();
        dos.flush();
        dos.close();

    } catch (MalformedURLException ex) {
        dialog.dismiss();
        ex.printStackTrace();
        Toast.makeText(Camera.this, "MalformedURLException", Toast.LENGTH_SHORT).show();
        Log.e("Upload file to server", "error: " + ex.getMessage(), ex);
    } catch (Exception e) {
        dialog.dismiss();
        e.printStackTrace();
        Toast.makeText(Camera.this, "Exception : " + e.getMessage(), Toast.LENGTH_SHORT).show();
        Log.e("Upload file to server Exception", "Exception : " + e.getMessage(), e);
    }

    dialog.dismiss();
    return serverResponseCode;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:40:28.767

您可以将查询字符串写入输出流。

```
OutputStream os = conn.getOutputStream();
os.write( yourQueryString.getBytes( withSpecificCharset ) ); 
```

在服务器`php`脚本中，您可以照常读取查询参数。

```
$param1 = $_POST[ "param1" ]; 
```

您可以参考[BalusC](https://stackoverflow.com/posts/2793150/revisions)的[社区 wiki 回答](https://stackoverflow.com/a/2793153/767881)，了解[如何使用 java.net.URLConnection 触发和处理 HTTP 请求？](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests). 它讨论了带有文件上传和查询参数的 HTTP Post 示例。

# java-me - 关于 javaMe RSA 和 AES

> ID：11064480
> 
> 赞同：0
> 
> 时间：2012-06-16T14:54:56.173
> 
> 标签：java-me

有没有人知道任何好的库以便在 javaME 中执行 RSA 和 AES 加密操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:14:37.597

看看[充气城堡](http://www.bouncycastle.org/)。它包括一个用于 Java 的轻量级密码学 API。

# c++ - 过滤模板函数的特定迭代器

> ID：11064481
> 
> 赞同：1
> 
> 时间：2012-06-16T14:55:03.690
> 
> 标签：c++, templates, iterator

我正在开发一组函数，这些函数利用具有打包和顺序内存存储（用于内存副本）的容器。它们具有大多数 STD 函数样式的函数签名，输入/输出迭代器指向元素并表示范围。例如，一个函数可能如下所示：

```
template< typename InputIterator, typename OutputIterator >
OutputIterator fooBar( InputIterator& first, InputIterator& last, 
                       OutputIterator& result ); 
```

我希望验证传递的迭代器是否合法，即打包且顺序。对于 STD 容器，这仅限于 std::vector 和 std::array。不幸的是，我不能依赖迭代器“类别”特征，因为随机访问特征并不意味着顺序存储。这方面的一个例子是 microsofts concurrent_vector 类，记录在这里[并行容器](http://msdn.microsoft.com/en-us/library/dd504906%28v=vs.110%29.aspx)

此外，我也不能接受来自向量和数组类的所有迭代器，例如我需要拒绝反向迭代器，并且 std::vector `<bool`> 迭代器不适合，因为它使用了代理类。

我试图创建自己的特征类来区分和过滤具有我上面描述的约束的迭代器，但我遇到了模板语法问题。我正在寻找其他人关于他们如何解决这个问题的反馈。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:00:42.500

我不认为你能做到这一点。迭代器是一种抽象，其全部目的是使迭代过程独立于底层架构。标准迭代器中没有任何信息表示底层内存结构甚至任何类似的东西。

在您的类似标准算法的函数上，通常建议按值传递迭代器，因为它们应该是便宜/小对象。应该特别注意的是，您的函数永远不能被称为 as `fooBar(c.begin(), c.end(), some_out_it);`，因为它通过引用非常量来获取输入迭代器。

最后一点，您可以通过测试迭代器类型是否是 的特化来过滤掉反向迭代器`std::reverse_iterator<Iter>`，因为至少`Container::(const_)reverse_iterator`标准容器的类型必须是一个。

# wcf - 在 WCF 中尝试 n 次后实施 ActiveDirectory 帐户锁定

> ID：11064484
> 
> 赞同：0
> 
> 时间：2012-06-16T14:55:26.110
> 
> 标签：wcf, authentication, active-directory, user-accounts

我正在开发一个 WCF 服务，移动应用程序可以使用它来针对企业外联网 ActiveDirectory 对用户进行身份验证。我正在使用Microsoft的[此实现的自定义版本。](http://msdn.microsoft.com/en-us/library/ms180890%28v=vs.80%29.aspx)我需要实现帐户锁定逻辑，以便在 n 次重试后 ActiveDirectory 中的帐户应该被锁定。

我尝试使用状态完整的 WCF 服务来跟踪失败的登录。但是客户端可以重新开始下一个会话并继续攻击。

我知道可以设置 ActiveDirectory 策略来强制执行此操作，但仅查询 AD（就像 Microsoft 解决方案对用户进行身份验证一样）不会锁定用户。

因此，我期待找到一种解决方案，该解决方案的工作原理类似于使用不正确的密码登录 Windows 达 n 次后，该帐户将根据 AD 中设置的策略被锁定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:52:45.050

我还没有看到你的代码。所以我猜你在这个例子中实现了类似的解决方案，看看[这个链接](http://msdn.microsoft.com/en-us/library/ms180890%28v=vs.80%29.aspx)

在上面的例子中，请看线

```
DirectoryEntry entry = new DirectoryEntry(_path, domainAndUsername, pwd); 
```

当您在活动目录上进行搜索调用时，此条目对象将用于身份验证。

如果您使用的是要进行身份验证的用户/密码，那么您不必担心被代码锁定。活动目录策略就足够了。

但是在阅读了您的评论后，我猜您有一个特定的用户用于搜索移动应用程序用户以检查他们是否存在于您的活动目录中。如果情况确实如此，那么您永远不会针对移动用户进行身份验证，因此这些用户永远不会被自动阻止。

我很想知道你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:21:43.147

基本上有两种方法可以做到这一点：

*   您继续使用的目录搜索方法，但在自定义数据库中跟踪每个用户的登录次数，并在执行目录搜索之前检查此数据库。
*   请改用 Windows 登录，并依靠 AD 锁定用户。有关如何执行此检查的说明：[Active Directory (LDAP) - 检查帐户已锁定/密码已过期](https://stackoverflow.com/a/1766203/86611)

**编辑**

看到 marc_s 的评论后，我不确定进行目录搜索是否会锁定。如果您可以尝试无数次，这实际上将是一个严重的安全漏洞。但是您需要一个允许查询 AD 的帐户，然后才能使用它。

您链接到的代码有这一行

```
object obj = entry.NativeObject 
```

这是强制身份验证。你把这条线加进去了吗？

# database - 什么是更好的数据库结构呢？

> ID：11064486
> 
> 赞同：0
> 
> 时间：2012-06-16T14:55:44.483
> 
> 标签：database, performance, data-structures

我正在建立一个巨大的 IP 地址数据库，并附上它们的地理位置（国家、城市等）。

现在，我正在使用这个简单的数据库结构：

```
id || ip_addr || country || city || 
```

我已经开始构建它，并且已经拥有近 100 万条记录。问题是，许多地址都附加了相同的国家/地区，从数据库中获取数据变得非常慢。

我在想，如果我这样做：

**国家表**：

```
countryID || countryName || 
```

**城市表**：

```
cityID || cityName || countryID (for what country the city is in) || 
```

然后，**ipTable**：

```
id || ip_addr || countryID || cityID 
```

它会使获取更快吗？

这种方法是否更有效（它还有其他好处）吗？还是我应该坚持我已经拥有的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:03:15.867

是的，将国家和城市移到单独的表中，实际上是一种常态化，是非常好的一步。我会更进一步规范化：一个城市位于一个国家，这意味着了解一个城市你也总是了解这个国家。因此试试这个：

```
id || ip_addr || cityID 
```

**城市表：**

```
id || cityName || countryID 
```

**国家表：**

```
countryID || countryName 
```

不需要在 IP 表中额外提及国家/地区。请注意，当几个城市具有相同的名称，例如[华沙（波兰）](http://en.wikipedia.org/wiki/Warsaw)、[华沙（印第安纳州，美国）](http://en.wikipedia.org/wiki/Warsaw,_Indiana)和[其他十](http://en.wikipedia.org/wiki/Warsaw_%28disambiguation%29)几个城市时，这种设计没有问题- 数据库中有重复的名称但 id 不同 - 并且您通过 id 识别城市 -碰巧指向相同的名称（但在不同的国家/地区）。

但是我不明白为什么存在`id`唯一的时候你有一个单独的列`ip_addr`（假设一个 IP 只附加一个地址）？

```
ip_addr (ID) || cityID 
```

请记住，IP 地址可以并且应该表示为数字（某些数据库具有内置数据库），因此这样的密钥与人工密钥一样好。

最后，通常将连续范围的 IP 分配给同一地区/城市/地区。通过为位置分配一系列 IP 而不是每个 IP，您将节省大量空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:07:26.040

是的，标准化通常会提高性能。尽管规范化的主要原因通常是数据一致性。然而，在某些情况下，非规范化实际上可以提高性能。这是在数据仓库和报告中完成的，以减少过滤和组合查询结果所需的连接数量。

这里的一个重要部分是数据库变得更小，更多的数据可以放入 RAM。

性能的另一个关键点是拥有支持典型查询的索引。
如果您按城市名称搜索，您应该有一个索引`cityTable.cityName`，等等。这样数据库可以使用有效的搜索找到您的数据，只需读取几条记录，而不是扫描整个数据库。

# regular-language - 我怎样才能直接看到一种语言不规则

> ID：11064488
> 
> 赞同：0
> 
> 时间：2012-06-16T14:55:51.057
> 
> 标签：regular-language, formal-languages

给定 L={a^nb^nc^n}，我怎么能直接说这种语言不规则而不看生产规则？我可以使用抽引引理，但有些人说只是看语法，这不是常规的。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:17:12.927

你的字母表中有三个字符。它们都依赖于同一个变量：n。现在，如果你只有两个，想象一下 {a^nb^n} 你可以用这个产生式轻松完成任务：

S -> ab | 锑

但是你有三个，没有办法将它们都链接到同一个变量。您应该使用两个语法类别，但既然您这样做了，它们就会被取消链接，您可以从它们中的每一个生成不同的字符串。链接它们的唯一方法是只使用一个语法类别，这是不可能的。

你不能这样做：

S -> abc | aSbc

实际上，您的最终字符串中不能有语法类别，因此这不是字符串。它需要再次转变。从那时起你能做什么？你可以做：

美国广播公司

或者你可以这样做：

aaSbcbc

第一个是字符串，不属于您的语言。第二个还不是字符串。但是很容易看出您无法从中执行任何允许的字符串。

# php - 用逗号、引号和句号分割字符串.. 有一些例外

> ID：11064489
> 
> 赞同：1
> 
> 时间：2012-06-16T14:55:58.130
> 
> 标签：php, regex, preg-split

我有很多文字，类似于以下段落，我想将其拆分为不带标点符号的单词（`'`, `"`, `,`, `.`,`newline`等）.. 除了少数例外。

> 最初被认为是印度南部喀拉拉邦查拉库迪河系统的特有种，但现在被认为在包括 Periyar、Manimala 和 Pamba 河在内的周边排水系统中有更广泛的分布，尽管 Manimala 数据可能有问题，因为它似乎是典型产地P. denisonii。
> 
> 在 Achankovil 河流域，它与 P. denisonii 同域出现，有时同域出现。
> 
> 在过去 15 年左右的时间里，野生种群可能减少了多达 50%，尽管栖息地也因农业和国内污染以及涉及爆炸物或有机毒素的破坏性捕鱼方法而退化，但主要是为水族馆贸易负责.

文中指的`P. denisonii`是鱼的一种。是 的缩写`Genus species`。我希望这个参考是一个词。

因此，例如，这是我希望看到的那种数组：

```
Array
(
    ...
    [44] given
    [45] it
    [46] seems
    [47] to
    [48] be
    [49] the
    [50] type
    [51] locality
    [52] of
    [53] P. denisonii
    [54] In
    [55] the
    ...
) 
```

唯一能区分这些物种参考的东西，比如`P. denisonii`一个新句子，比如`end. New`：

*   **P**（对于 Puntius，如上述示例中的 P.）**只有一个字母，始终是大写字母**
*   **d**（如 .denisonii）**始终是小写字母或撇号 ( `'`)**

我可以使用什么正则表达式`preg_split`来给我这样一个数组？我尝试了一个简单的方法`explode( " ", $array )`，但它根本不起作用。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:06:14.057

改变你的方法：为什么不使用`preg_match_all`而不是`preg_split`？您将匹配所有*不*包含分隔符的字符串，而不是使用拆分分隔符拆分文本。

将其与正则表达式一起使用：`/([\S]+)|(P. denisonii)/`匹配所有非空白序列和序列“P. denisonii”

要排除逗号、引号、句号和其他字符，只需将 \S 替换为负正则表达式字符列表`[^...]`：

`/([^\s,\.\"]+)|(P. denisonii)/`匹配所有不包含空格 ( `\s`)、逗号、引号和点 ( `\.`)的序列

*编辑：*匹配通用属名（注意：我已更改您的文本以更好地测试代码，包括引号和虚假属名）

```
$text = "Initially considered \"endemic\" to the Chalakudy River system in Kerala state, southern India, but now recognised to have a wider distribution in surrounding drainages including the Periyar, Manimala, and Pamba river though the Manimala data may be questionable given it seems to be the type locality of P. denisonii.

This is a bogus genus name, A. testii.

In the Achankovil River basin it occurs sympatrically, and sometimes syntopically, with P. denisonii.

Wild stocks may have dwindled by as much as 50% in the last 15 years or so with collection for the aquarium trade largely held responsible although habitats are also being degraded by pollution from agricultural and domestic sources, plus destructive fishing methods involving explosives or organic toxins.";

preg_match_all("/([A-Z]\. [a-z]+)|([^\s,\.\"]+)/", $text, $matches, PREG_PATTERN_ORDER);

echo "<pre>";
print_r($matches); 
```

注意：您应该选择的数组是`$matches[0]`，而不是`$matches`

# php - 如何在根域中一起设置 Django 和 wordpress，Apache

> ID：11064491
> 
> 赞同：2
> 
> 时间：2012-06-16T14:56:07.937
> 
> 标签：php, django, apache, lamp

[我在这里](https://stackoverflow.com/questions/3534678/django-wsgi-and-wordpress-coexisting-in-apache-virtualhost)找到了最接近我的问题的解决方案，但仍然没有完全解决它。

我们要设置的内容

1.  example.com - wordpress
2.  example.com/about wordpress 还有大约 4 个链接

3.  example.com/shortURLS -Django

由于 URL 是如此动态，因此很难设置我们的环境。如果有人可以建议如何为 Apache 设置它，那就太好了。

# php - PHP 和会话，标头已发送

> ID：11064494
> 
> 赞同：-3
> 
> 时间：2012-06-16T14:56:29.523
> 
> 标签：php, session, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我知道我必须`session_start()`在页面的最顶部使用，因此 HTTP 标头可以在 HTTP 正文开始发送到客户端之前完成他的工作。但这对我来说效果不佳。

在这里，我想重置会话...

```
<?php 
ini_set( "display_errors", 0);  // Even without this it doesn't work, it's temporary to hide the problem
session_start();
$_SESSION = array();  // Clear the session
$_SESSION['state'] = "noConnection";
?>

<!DOCTYPE html>
<html> 
    <head>    // blah blah 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:04:14.260

正确的答案是确保在第一个开始标记之前没有任何内容，甚至没有空格*或 UTF8 BOM 字符。*`<?php`

作弊的答案是将 php.ini 的`output_buffering`指令设置为`On`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:01:53.843

`<?php`在打开标签之前确保没有空格。

# java - 如何使 Android 中的标签栏看起来像 XML 中的 iPhone 标签栏

> ID：11064495
> 
> 赞同：0
> 
> 时间：2012-06-16T14:56:31.987
> 
> 标签：java, android, xml, android-layout, tabbar

我想让Android的标签栏看起来像Android。

这是我的代码：

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@android:id/tabhost"
    android:orientation="vertical" >

    <TabWidget 
        android:layout_width="fill_parent"
    android:layout_height="40px"
        android:id="@android:id/tabs"
            android:layout_alignParentBottom="true"

        ></TabWidget>

</TabHost> 
```

**TabActivity.java**

```
package com.saa;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class TabActivity extends android.app.TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TabHost tabHost=getTabHost();
        Intent intent = new Intent();
        TabSpec tabSpec= tabHost.newTabSpec("one");
        tabSpec.setIndicator("One", getResources().getDrawable(R.drawable.ic_launcher));
        intent.setClass(this, tab1.class);
        tabSpec.setContent(intent);
        tabHost.addTab(tabSpec);

        tabSpec= tabHost.newTabSpec("two");
        tabSpec.setIndicator("Two", getResources().getDrawable(R.drawable.ic_launcher));
        intent = new Intent().setClass(this, tab2.class);
        tabSpec.setContent(intent);
        tabHost.addTab(tabSpec);

        tabSpec= tabHost.newTabSpec("three");
        tabSpec.setIndicator("Three", getResources().getDrawable(R.drawable.ic_launcher));
        intent = new Intent().setClass(this, tab3.class);
        tabSpec.setContent(intent);
        tabHost.addTab(tabSpec);

        tabSpec= tabHost.newTabSpec("four");
        tabSpec.setIndicator("Four",getResources().getDrawable(R.drawable.ic_launcher));
        intent = new Intent().setClass(this, tab4.class);
        tabSpec.setContent(intent);
        tabHost.addTab(tabSpec);

        tabHost.setCurrentTab(0); // default tab
    }

} 
```

为了让 Tabbar 下降，我需要进行哪些更改？我创建了其他类，如 tab1.java、tab2.java 等。

# objective-c - 与指针和对象混淆（Objective-C）

> ID：11064498
> 
> 赞同：0
> 
> 时间：2012-06-16T14:56:49.520
> 
> 标签：objective-c

作者写道，每当值`point`变化时，值`myRect's origin`也会变化，但我不明白`origin`变成对象是如何解决它的。创建对象和创建指针有什么区别？

固定`setOrigin`方法：

```
-(void) setOrigin:(XYpoint *)pt {
    if (! origin)
        origin = [[XYpoint alloc] init];

    origin.x = pt.x;
    origin.y = pt.y;
} 
```

* * *

```
#import <Foundation/Foundation.h>

@interface XYPoint : NSObject 
@property int x, y;

@end 
```

* * *

```
#import "XYpoint.h"

@implementation XYPoint
@synthesize x, y;

@end 
```

* * *

```
#import <Foundation/Foundation.h>

@class XYPoint;
@interface Rectangle: NSObject

-(void) setOrigin: (XYPoint *) pt; 

@end 
```

* * *

```
#import "Rectangle.h"
#import "XYpoint.h"

@implementation Rectangle {
    XYPoint *origin;
}

-(void) setOrigin:(XYPoint *)pt {
    origin = pt;
}

@end 
```

* * *

```
#import "XYpoint.h"
#import "Rectangle.h"

int main (int argc, char *argv[]) {
    @autoreleasepool {
        Rectangle *myRect = [[Rectangle alloc] init];
        XYpoint *point = [[XYpoint alloc] init];

        point.x = 3;
        point.y = 8;

        [myRect setOrigin: point];
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:04:42.123

`XYPoint *origin;`是指向包含`x`和的对象的指针`y`。特别是在这种情况下，您有两个指向同一个确切对象的引用。`myRect.origin`并`point`指向同一个`XYpoint`对象。这意味着如果您更改`x`或`y`通过任何一种方式（`myRect.origin.x = 1`或`point.x = 1`）的值，则更新`x`的值`y`将在以任何一种方式（`myRect.origin`或`point`）访问时被更新。

# c# - 获取C#中撇号之间的值

> ID：11064502
> 
> 赞同：1
> 
> 时间：2012-06-16T14:57:17.620
> 
> 标签：c#, split, apostrophe

我想提取撇号之间的值，例如从这个字符串中提取：`package: name='com.app' versionCode='4' versionName='1.3'`这是开发 android 应用程序时“aapt”返回的内容。我必须得到值`com.app`,`4`和`1.3`。我会很感激任何帮助:) 我找到[了这个](https://stackoverflow.com/questions/8883873/get-value-between-two-characts-in-string)，但是这是 VBA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:03:45.977

此正则表达式应适用于所有情况，假设该`'`字符仅作为值的封闭字符出现：

```
string input = "package: name='com.app' versionCode='4' versionName='1.3'";
string[] values = Regex.Matches(input, @"'(?<val>.*?)'")
                       .Cast<Match>()
                       .Select(match => match.Groups["val"].Value)
                       .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:11:33.557

```
string strRegex = @"(?<==\')(.*?)(?=\')";
RegexOptions myRegexOptions = RegexOptions.None;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"package: name='com.app' versionCode='4' versionName='1.3'";

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
  if (myMatch.Success)
  {
    // Add your code here
  }
} 
```

[RegEx Hero 示例在这里。](http://regexhero.net/tester/?id=60d63481-e5dc-41b8-8c63-0631b4f9522f)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T15:16:29.683

如果您有兴趣，这里是您链接到的 VBA 的翻译：

```
public static void Test1()
{
    string sText = "this {is}  a {test}";
    Regex oRegExp = new Regex(@"{([^\}]+)", RegexOptions.IgnoreCase | RegexOptions.CultureInvariant);
    MatchCollection oMatches = oRegExp.Matches(sText);
    foreach (Match Text in oMatches)
    {
        Console.WriteLine(Text.Value.Substring(1));
    }
} 
```

同样在 VB.NET 中：

```
Sub Test1()
    Dim sText = "this {is}  a {test}"
    Dim oRegExp = New Regex("{([^\}]+)", RegexOptions.IgnoreCase Or RegexOptions.CultureInvariant)
    Dim oMatches = oRegExp.Matches(sText)
    For Each Text As Match In oMatches
        Console.WriteLine(Mid(Text.Value, 2, Len(Text.Value)))
    Next
End Sub 
```

# jquery - 对多个元素执行相同的操作

> ID：11064504
> 
> 赞同：1
> 
> 时间：2012-06-16T14:57:19.290
> 
> 标签：jquery

我有这条线：

```
$("#clients-edit-wrapper").height($(window).height()-150); 
```

我想将该高度函数应用于不仅仅是一行 jQuery 中的特定 ID。有没有办法将元素链接在一起并为多个元素应用一次高度函数？基本上，我想将该高度函数应用于 3 或 4 个其他 DIV，但我宁愿没有 3 或 4 行 jQuery 来完成此操作。

这可能吗？

* * *

**下面来自 VisioN 的回答（显示我是一个 jQuery 新手！）：**

您可以使用多个选择器：

```
$("#clients-edit-wrapper, #div2, #div3").height($(window).height() - 150); 
```

或类选择器（当然更好！）：

```
<!-- HTML -->
<div id="clients-edit-wrapper" class="myClass"></div>
<div id="div2" class="myClass"></div>
<div id="div3" class="myClass"></div>

// JavaScript
$(".myClass").height($(window).height() - 150); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T14:58:42.423

您可以使用[多个选择器](http://api.jquery.com/multiple-selector/)：

```
$("#clients-edit-wrapper, #div2, #div3").height($(window).height() - 150); 
```

或[类选择器](http://api.jquery.com/class-selector/)（*当然更好！*）：

```
<!-- HTML -->
<div id="clients-edit-wrapper" class="myClass"></div>
<div id="div2" class="myClass"></div>
<div id="div3" class="myClass"></div>

// JavaScript
$(".myClass").height($(window).height() - 150); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T14:58:20.880

您可以使用逗号`,`分隔选择器。

```
$('#div1, #div2, div3').height($(window).height()-150); 
```

如果是我的话，我会为他们设置一个班级。

# ruby-on-rails - Rails 3 命名空间模型和控制器路由问题

> ID：11064509
> 
> 赞同：0
> 
> 时间：2012-06-16T14:58:06.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的管理部分中有命名空间模型`Equipment::Feature`和命名空间控制器`Admin::Equipment::FeaturesController`。模型是通用的，用于`:admin` 命名空间内和公共网站。`:admin`我已经为和`:equipment`命名空间设置了路由

```
namespace :admin do
  namespace :equipment do
    resources :features
  end
end 
```

这给了我以下路线：

```
 admin_equipment_features     GET /admin/equipment/features(.:format)          admin/equipment/features#index
                              POST /admin/equipment/features(.:format)         admin/equipment/features#create
 new_admin_equipment_feature  GET /admin/equipment/features/new(.:format)      admin/equipment/features#new
 edit_admin_equipment_feature GET /admin/equipment/features/:id/edit(.:format) admin/equipment/features#edit
 admin_equipment_feature      GET /admin/equipment/features/:id(.:format)      admin/equipment/features#show
                              PUT /admin/equipment/features/:id(.:format)      admin/equipment/features#update
                              DELETE /admin/equipment/features/:id(.:format)   admin/equipment/features#destroy 
```

很标准的东西。但是当我解决`/admin/equipment/features`它时会抛出`uninitialized constant Admin::Equipment::FeaturesController::Equipment`异常

`#index`我的动作`Admin::Equipment::FeaturesController`看起来像

```
def index
  @features = Equipment::Feature.all
end 
```

在我声明命名空间之前，它似乎确实有效`Admin::Equipment`。之前就像`Admin::EquipmentFeaturesController`

我想这是某种命名空间冲突，但我不明白 - 它来自哪里？

提前致谢！

**更新** `Feature`模型（使用 STI 模式）

```
class Equipment::Feature < ActiveRecord::Base

  attr_accessible :category_id, :name_en, :name_ru, :type

  belongs_to :category, :class_name => 'Equipment::Category'

  has_many :item_features, :class_name => 'Equipment::ItemFeature'
  has_many :items, :through => :item_features

  translates :name
end

class FeatureBoolean < Equipment::Feature

end

class FeatureNumeric < Equipment::Feature

end

class FeatureString < Equipment::Feature

end

class FeatureRange < Equipment::Feature

end 
```

**UPDATE2**根据以下答案 修复`#index`操作解决了该问题。新代码：

```
def index
  @features = ::Equipment::Feature.all
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:39:16.350

我认为它现在正在寻找`Feature`in `Admin::Equipment`，而不是 in`::Equipment`

尝试指定没有命名空间，即

```
def index
  @features = ::Equipment::Feature.all
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:51:30.930

请创建这样的文件夹 app/controllers/admin/equipment/features.rb

然后将您的控制器名称编辑为 Admin::Equipment::FeaturesController

```
class Admin::Equipment::FeaturesController < ActiveRecord::Base

end 
```

# algorithm - 如何快速找到一系列边中的所有路径？

> ID：11064510
> 
> 赞同：0
> 
> 时间：2012-06-16T14:58:07.403
> 
> 标签：algorithm, graph, graph-algorithm, minimum-spanning-tree

令 E 为给定的有向边集。假设已知 E 中的边可以形成一个有向树 T，所有节点（根节点除外）只有 1 个入度。问题是如何有效地遍历边集 E，以便找到 T 中的所有路径？

例如，给定一个有向边集 E={(1,2),(1,5),(5,6),(1,4),(2,3)}。我们知道这样的集合 E 可以生成只有 1 个入度的有向树 T（根节点除外）。有没有快速遍历边集E的方法，以便找到所有路径如下：

```
Path1 = {(1,2),(2,3)}
Path2 = {(1,4)}
Path3 = {(1,5),(5,6)} 
```

顺便说一句，假设 E 中的边数是 |E|，是否存在找到所有路径的复杂性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T05:02:00.507

我之前没有处理过这类问题。所以只是尝试了一个简单的解决方案。看一下这个。

```
public class PathFinder
{
    private static Dictionary<string, Path> pathsDictionary = new Dictionary<string, Path>();
    private static List<Path> newPaths = new List<Path>();
    public static Dictionary<string, Path> GetBestPaths(List<Edge> edgesInTree)
    {
        foreach (var e in edgesInTree)
        {
            SetNewPathsToAdd(e);
            UpdatePaths();
        }
        return pathsDictionary;
    }        
    private static void SetNewPathsToAdd(Edge currentEdge) 
    {
        newPaths.Clear();
        newPaths.Add(new Path(new List<Edge> { currentEdge })); 
        if (!pathsDictionary.ContainsKey(currentEdge.PathKey()))
        {
            var pathKeys = pathsDictionary.Keys.Where(c => c.Split(",".ToCharArray())[1] == currentEdge.StartPoint.ToString()).ToList();
            pathKeys.ForEach(key => { var newPath = new Path(pathsDictionary[key].ConnectedEdges); newPath.ConnectedEdges.Add(currentEdge); newPaths.Add(newPath); });             
            pathKeys =  pathsDictionary.Keys.Where(c => c.Split(",".ToCharArray())[0] == currentEdge.EndPoint.ToString()).ToList();
            pathKeys.ForEach(key => { var newPath = new Path(pathsDictionary[key].ConnectedEdges); newPath.ConnectedEdges.Insert(0, currentEdge); newPaths.Add(newPath); });
        }            
    }
    private static void UpdatePaths()
    {
        Path oldPath = null;
        foreach (Path newPath in newPaths)
        {
            if (!pathsDictionary.ContainsKey(newPath.PathKey()))
                pathsDictionary.Add(newPath.PathKey(), newPath);
            else
            {
                oldPath = pathsDictionary[newPath.PathKey()];
                if (newPath.PathWeights < oldPath.PathWeights)
                    pathsDictionary[newPath.PathKey()] = newPath;
            }
        }
    }        
}

public static class Extensions
{
    public static bool IsNullOrEmpty(this IEnumerable<object> collection) { return collection == null || collection.Count() > 0; }
    public static string PathKey(this ILine line) { return string.Format("{0},{1}", line.StartPoint, line.EndPoint); }
}
public interface ILine 
{
    int StartPoint { get; }
    int EndPoint { get; }
}
public class Edge :ILine 
{
    public int StartPoint { get; set; }
    public int EndPoint { get; set; }

    public Edge(int startPoint, int endPoint)
    {
        this.EndPoint = endPoint;
        this.StartPoint = startPoint;
    }
}
public class Path :ILine
{
    private List<Edge> connectedEdges = new List<Edge>();
    public Path(List<Edge> edges) { this.connectedEdges = edges; }
    public int StartPoint { get { return this.IsValid ? this.connectedEdges.First().StartPoint : 0; } }
    public int EndPoint { get { return this.IsValid ? this.connectedEdges.Last().EndPoint : 0; } }
    public bool IsValid { get { return this.EdgeCount > 0; } }
    public int EdgeCount { get { return this.connectedEdges.Count; } }
    // For now as no weights logics are defined
    public int PathWeights { get { return this.EdgeCount; } }
    public List<Edge> ConnectedEdges { get { return this.connectedEdges; } }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:20:12.140

我认为 DFS（深度优先搜索）应该适合您的要求。看看这里 -[深度优先搜索 - 维基百科](http://en.wikipedia.org/wiki/Depth-first_search)。您可以对其进行定制，以您需要的格式打印路径。至于复杂性，由于树中的每个节点都有一个度数，因此树的边数限制为 - |E| = O(|V|)。由于 DFS 以 O(|V|+|E|) 的复杂度运行，因此您的整体复杂度为 O(|V|)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T20:21:22.080

我把这个问题作为我作业的一部分。上面的先生已经正确指出使用 pathID。您必须至少访问每条边一次，因此复杂度界限为 O(V+E)，但对于树 E=O(V)，复杂度为 O(v)。由于涉及细节，我将给您一瞥-

您将用唯一的 ID 标记每条路径，并且在增量值中为路径分配 ID，例如 0、1、2...。路径的路径 ID 是路径上边的权重之和。所以使用 DFS 为路径分配权重。您可以从边使用 0 开始，直到遇到第一条路径，然后继续添加 1，依此类推。您还必须争论正确性并正确分配权重。DFS 可以解决问题。

# javascript - 为高级模板在屏幕外渲染 HTML（和 CSS）

> ID：11064516
> 
> 赞同：3
> 
> 时间：2012-06-16T14:58:24.170
> 
> 标签：javascript, dom, template-engine, client-side-templating, documentfragment

我正在为内部应用程序构建一个基于 Javascript 的客户端模板引擎。它从服务器加载基于 HTML/CSS 的模板，并将它们与基于 HTML 的内容（P、EM 等）相结合

模板基本上具有固定大小的区域（通过 CSS 定义），内容应该适合这些区域 - 如果内容不适合这些区域/框，则其余部分将转到另一个这样的内容框，依此类推。

这张图片有望让我更容易理解我的意思： ![模板样机](../Images/b84c534fc64cb36b554331beaa8f775b.png) 。

想象一下整个事情是 1 个模板，其中的内容应该适合蓝色框 - 它显然不适合第一个蓝色框，因此 3 绿色块将附加到第二个框，等等。

请记住，蓝色框的大小、位置（和数量）可能因模板而异。内容也是如此（它可以是小文本或大文本 - 它可以是纯文本或 H1、P、EM 等格式。所以一切都是变量。文本大小也由模板通过CSS（所以不是固定值）。

所以无论如何，经过一些实验，我让它工作了，但现在我试图优化整个事情以更快。我在应用程序启动时预处理了数十个模板，因此初始化需要一段时间。

现在我们来回答我的问题——要渲染基于 HTML/CSS 的模板（并知道内容框、字体等的大小）以将它们与内容结合起来，模板必须具有布局并插入到 DOM 中。这当然非常昂贵 - 所以我想知道是否有任何方法可以在屏幕外执行此操作？没有将它们呈现给浏览器？

正在查看 documentFragments，虽然他们确实在屏幕外组装 DOM - 他们没有布局。我的意思是，如果你创建一个 documentFragment，在其中插入一个 DIV，并通过 CSS 说 div 应该是 150px 宽 - 它会记住它应该是 150px 宽，但在你插入之前它不会是 150px 宽分片成 DOM。

# android - 如何在android中设置自定义闹钟铃声

> ID：11064519
> 
> 赞同：3
> 
> 时间：2012-06-16T14:58:37.043
> 
> 标签：android, alarm, ringtone

我需要在我的应用程序中设置自定义警报音。谁能告诉我如何将自定义铃声或 Mp3 设置为闹钟？任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:40:12.987

这里也是这个问题的解决方案

[将音频文件设置为铃声](https://stackoverflow.com/questions/4603941/problem-in-setting-audio-file-as-ringtone)

最好的，沙赫扎德·马吉德

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T19:14:29.047

您可以使用音频播放器播放您的 mp3。但这里有一个更好的警报应用程序，可以满足您的要求。

[http://code.google.com/p/kraigsandroid/source/browse/#git%2Fandroid%2Falarmclock%2Fsrc%2Fcom%2Fangrydoughnuts%2Fandroid%2Falarmclock](http://code.google.com/p/kraigsandroid/source/browse/#git%2Fandroid%2Falarmclock%2Fsrc%2Fcom%2Fangrydoughnuts%2Fandroid%2Falarmclock)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T16:01:28.817

在 Android 文档中查看[状态栏通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)页面。特别是参见**添加声音**部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-02T11:00:14.403

试试这个

在该文件的原始文件夹地名中添加任何 .mp3 文件

```
 public void setAlarm() {
        File file = new File(Environment.getExternalStorageDirectory(),
                "/Your Directory Name");
        if (!file.exists()) {
            file.mkdirs();
        }

        String path = Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "/Your Directory Name";

        File f = new File(path + "/", filename + ".mp3");

        Uri mUri = Uri.parse("android.resource://" + getContext().getPackageName() + "/raw/" + filename);
        ContentResolver mCr = getContext().getContentResolver();
        AssetFileDescriptor soundFile;
        try {
            soundFile = mCr.openAssetFileDescriptor(mUri, "r");
        } catch (FileNotFoundException e) {
            soundFile = null;
        }

        try {
            byte[] readData = new byte[1024];
            FileInputStream fis = soundFile.createInputStream();
            FileOutputStream fos = new FileOutputStream(f);
            int i = fis.read(readData);

            while (i != -1) {
                fos.write(readData, 0, i);
                i = fis.read(readData);
            }

            fos.close();
        } catch (IOException io) {
        }

        ContentValues values = new ContentValues();
        values.put(MediaStore.MediaColumns.DATA, f.getAbsolutePath());
        values.put(MediaStore.MediaColumns.TITLE, filename);
        values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
        values.put(MediaStore.MediaColumns.SIZE, f.length());
        values.put(MediaStore.Audio.Media.ARTIST, R.string.app_name);
        values.put(MediaStore.Audio.Media.IS_ALARM, true);

        Uri uri = MediaStore.Audio.Media.getContentUriForPath(f.getAbsolutePath());
        getContext().getContentResolver().delete(uri, MediaStore.MediaColumns.DATA + "=\"" + f.getAbsolutePath() + "\"", null);
        Uri newUri = mCr.insert(uri, values);

        try {
            RingtoneManager.setActualDefaultRingtoneUri(getContext(),
                    RingtoneManager.TYPE_ALARM, newUri);
            Settings.System.putString(mCr, Settings.System.ALARM_ALERT,
                    newUri.toString());
            Toast.makeText(getContext(), "Done", Toast.LENGTH_SHORT).show();

        } catch (Throwable t) {

        }
    } 
```

# python - 使用 Python 3.2 运行 Tornado

> ID：11064522
> 
> 赞同：0
> 
> 时间：2012-06-16T14:58:48.863
> 
> 标签：python, tornado

我刚开始使用 Python，想尝试一下 tornado。

从 tornado 网站运行示例

```
import sys
sys.path.append(r'C:\Python32\tornado-2.3')

import tornado.ioloop
import tornado.web

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.write("Hello, world")

application = tornado.web.Application([
    (r"/", MainHandler),
])

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

我收到以下错误：

```
File "C:\Python32\tornado-2.3\tornado\ioloop.py", line 302
except Exception, e:
                ^
SyntaxError: invalid syntax 
```

我在 Windows 7 机器上安装了 Python 3.2。

有谁知道异常的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:06:13.467

在 Python 3 中，[您必须使用`as`关键字。](http://www.python.org/dev/peps/pep-3110/)， IE

```
except Exception as e: 
```

跑

```
python3 setup.py build 
```

在`C:\Python32\tornado-2.3`目录中生成 Python3 构建（带有 2to3）`tornado/build/lib`。

# c - K-means 算法中的错误

> ID：11064525
> 
> 赞同：4
> 
> 时间：2012-06-16T14:59:06.013
> 
> 标签：c, opencv, k-means

我使用以下对 openCV 函数的调用来执行 K-means 算法：

```
cvKMeans2(points, count, &clusters, cvTermCriteria( CV_TERMCRIT_EPS+CV_TERMCRIT_ITER, 10, 1.0 ), 1, CV_KMEANS_USE_INITIAL_LABELS, centers); 
```

在哪里

```
image2 = cvLoadImage( "lab.jpg", 0);
points = cvCreateMat( image2->height, image2->width, CV_32FC1 );    
cvConvert(image2, points);
//count= number of clusters.
CvMat* centers; // To store the center of each cluster. (output). 
```

lab.jpg 是 CIE L*a*b* 格式的图像。

但是上面的行在编译时显示以下错误：

```
`CV_KMEANS_USE_INITIAL_LABELS' undeclared (first use in this function) 

too many arguments to function `cvKMeans2' 
```

如果有人能指出哪里错了，特别是第一个错误，它说 KMEANS_USE_INITIAL_LABELS 未声明，那将非常有帮助。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:26:47.637

来自[opencv](http://opencv.willowgarage.com/documentation/clustering_and_search_in_multi-dimensional_spaces.html)`cvKMeans2`文档：

> flags – 可以是 0 或 CV_KMEANS_USE_INITIAL_LABELS。

您遗漏了**CV_**。

编辑：还请注意， and之间应该有**两个**参数，因此您要跳过or 。尝试`termcrit``flags``attempts``rng`

```
cvKMeans2(points, count, &clusters, cvTermCriteria( CV_TERMCRIT_EPS+CV_TERMCRIT_ITER, 10, 1.0 ), 1, 0, CV_KMEANS_USE_INITIAL_LABELS, centers); 
```

# python - 如何在多处理程序中退出整个应用程序

> ID：11064526
> 
> 赞同：1
> 
> 时间：2012-06-16T14:59:06.450
> 
> 标签：python, multiprocessing, exit

这是示例代码，就像所描述的代码一样，我想在一个正在运行的处理中退出整个应用程序。但是当我调用**exit(0)**函数时，其他一些处理仍在运行。那么如何同时杀死所有正在运行的进程呢？任何帮助表示赞赏！

```
from multiprocessing import Process
def submit_process():
    sig = False

    #Here is some codes trying to change the value of the variable sig

    print "submit_process"

    if(sig == True):
        #Here i want to exit the entire program instead of the single thread only.
        #exit(0)
        pass

process_list = []
print "OK"
for i in range(10):
    process = Process(target = submit_process)
    process.start()
    process_list.append(process)

for i in range( len(process_list) ):
    process_list[i].join() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:59:56.417

您可以调用`.terminate()`进程列表中的所有内容。尽管您的流程的子流程将成为孤立的，但这通常是一个坏主意。

从[`multiprocessing`](http://docs.python.org/dev/library/multiprocessing.html)

> terminate() 终止进程。在 Unix 上，这是使用 SIGTERM 信号完成的；在 Windows 上使用 TerminateProcess()。请注意，退出处理程序和 finally 子句等将不会被执行。
> 
> 请注意，该进程的后代进程不会被终止——它们只会成为孤立的。

在您的情况下，它看起来像：

```
from multiprocessing import Process
def submit_process():
    sig = False

    #Here is some codes trying to change the value of the variable sig

    print "submit_process"

    if(sig == True):
        # Terminate all spawned processes
        for process in process_list:
          process.terminate()
        exit(0)

process_list = []
print "OK"
for i in range(10):
    process = Process(target = submit_process)
    process.start()
    process_list.append(process)

for i in range( len(process_list) ):
    process_list[i].join() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T17:17:33.767

如果您的流程函数（例如`submit_process`）有一个循环，您可以在其中测试条件，您可以为此使用 mp.Event：

```
import multiprocessing as mp
import time
import logging

logger = mp.log_to_stderr(logging.DEBUG)
logger.setLevel(logging.INFO)

def submit_process(i, sig):
    logger.info("submit_process")
    while True:
        #Here is some codes trying to change the value of the variable sig
        if i == 0:
            time.sleep(2)
            sig.set()
            logger.info('SETTING sig')
        time.sleep(1)
        if sig.is_set():
            #Here i want to exit the entire program instead of the single thread only.
            #exit(0)
            logger.info('sig is set!')
            break
        else:
            logger.info('sig is NOT set!')            

process_list = []
logger.info("OK")
sig = mp.Event()
for i in range(3):
    process = mp.Process(target = submit_process, args = (i, sig, ))
    process.start()
    process_list.append(process)

for i in range( len(process_list) ):
    process_list[i].join() 
```

产量

```
[INFO/MainProcess] OK
[INFO/Process-2] child process calling self.run()
[INFO/Process-2] submit_process
[INFO/Process-3] child process calling self.run()
[INFO/Process-1] child process calling self.run()
[INFO/Process-3] submit_process
[INFO/Process-1] submit_process
[INFO/Process-2] sig is NOT set!
[INFO/Process-3] sig is NOT set!
[INFO/Process-2] sig is NOT set! 
```

这里 process-1 设置 mp.Event：

```
[INFO/Process-1] SETTING sig 
```

在这里，进程识别出 sig 已设置并跳出 while 循环：

```
[INFO/Process-3] sig is set!
[INFO/Process-3] process shutting down
[INFO/Process-3] process exiting with exitcode 0
[INFO/Process-2] sig is set!
[INFO/Process-2] process shutting down
[INFO/Process-2] process exiting with exitcode 0
[INFO/Process-1] sig is set!
[INFO/Process-1] process shutting down
[INFO/Process-1] process exiting with exitcode 0
[INFO/MainProcess] process shutting down 
```

# iphone - 如果数据源具有相同的数据，则不绘制图表的问题

> ID：11064528
> 
> 赞同：0
> 
> 时间：2012-06-16T14:59:31.733
> 
> 标签：iphone, ios, core-plot

我在使用 CorePlot 框架绘制数据时遇到问题。我已经[集成了它](http://www.raywenderlich.com/13269/how-to-draw-graphs-with-core-plot-part-1)，下面是我正在处理的项目中的代码示例：实时散点图。

如果我的数据源具有相同的值，则图表不会绘制。

这是绘制点的代码：

```
#pragma mark - CPTPlotDataSource methods
-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
    return [appDelegate.arrayLiveValues count];
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum 
                                       recordIndex:(NSUInteger)index 
{
    NSInteger valueCount = [appDelegate.arrayLiveValues count];
    switch (fieldEnum) {
        case CPTScatterPlotFieldX:
            if (index < valueCount) {
                return [NSNumber numberWithUnsignedInteger:index];
            }
            break;

        case CPTScatterPlotFieldY:
            return [appDelegate.arrayLiveValues  objectAtIndex:index];
            break;
    }
    return [NSDecimalNumber zero];
} 
```

如果`appDelegate.arrayLiveValues`数组包含重复值，则它不会绘图。如果它有不同的值，它会根据 中的值绘制图形`datasource`，即`appDelegate.arrayLiveValues`图形缩放级别正在设置。我想知道内部功能是什么

```
-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index method; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:25:53.687

是的，我们必须根据我们的值设置最小最大界限。

```
 CGFloat xMin = 0.0f;
    CGFloat xMax = 40.0f;  //i need 40 plots 
    CGFloat yMin = 0.0f;
    CGFloat yMax = 300.0f;  // should determine dynamically based on max price
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(xMin) length:CPTDecimalFromFloat(xMax)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(yMin) length:CPTDecimalFromFloat(yMax)]; 
```

# php - PHP反序列化一个JS序列化的变量字符串

> ID：11064529
> 
> 赞同：18
> 
> 时间：2012-06-16T15:00:27.507
> 
> 标签：php, javascript, jquery, serialization

当用户单击“生成”元素时，我有以下代码，表单“serializeData”中的数据在js中被序列化。该字符串被传递给 loadTemplate 函数，该函数又将该字符串与其他变量一起发布到 php 脚本进行处理。

我正在寻找的是一种在 PHP 中反序列化 js 字符串的方法或获取数据的最佳实践，这是在 PHP 中作为字符串看到的序列化数据的示例输出：-

***input1=会议&input2=select+date&input3=enter+text&input4=NUMBER+MISSING***

序列化的表单数据在 userData 变量中的 loadTemplate 函数中传递给 PHP。

**职能： -**

```
$("#generate").click(function () {
    if (eCheck == true) {

        var templateData = $("#serializeData").serialize();
        var templateID = $("#serializeData").attr("name");  

            loadTemplate(this, templateID, 3, templateData)         
    }
    return false;
});

function loadTemplate(obj, cat, call, userData) {
userData = typeof userData !== "undefined" ? userData : null; // Set userData to null if undefined.
var onSuccess = "#right";

if (call == 1) {
    onSuccess = "#left";
        switchButton(obj);
            $("#content").hide();
            $("#right-content").text("");
} 

 $("#loading").show();

$.ajax({
    type: "POST",
    url: "./scripts/load.php",
    data: { id : cat, call: call, userData: userData },
    cache: false,
      success: function(html){
        $(onSuccess + "-content").html(html);

        if (onSuccess == "#left") {
          $("#content").fadeIn(500);
        } 
            $("#loading").fadeOut(500);
            resizeAll();
    }
});

} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-16T15:06:39.410

您可以使用[parse_str](http://php.net/parse_str)：

```
$values = array();
parse_str($_POST['userData'], $values);
echo $values['input1']; //Outputs 'meeting' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T15:05:22.187

我认为`parse_str`是你需要的。

# vb.net - 如何将 VB.net 程序连接到 access 数据库并在 2 台不同的 PC 上运行它。

> ID：11064530
> 
> 赞同：1
> 
> 时间：2012-06-16T15:00:27.947
> 
> 标签：vb.net, ms-access

我有一个用 VB.net 编写的 Windows 应用程序。完成后，我将在多台电脑上设置程序。我想使用 Microsoft Access 将所有 PC 中的程序连接到另一台 PC 中的一个数据库，并且我还想限制用户对我程序中数据库的访问级别。

我该怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T17:16:27.103

Access 完全能够处理连接到同一数据库的 2 个用户。然而，这并不是 Ms-Access 的主要优势。因此，如果您计划扩大用户群，最好从 SqlServer Express（或 MySql）开始。

如果用户在同一个本地网络上，则不需要在这种情况下使用 asp-net。您只需要准备一个有效的连接字符串来标识您安装数据库的网络位置。当然，托管数据库的 PC 应该共享网络位置，并为所有需要访问数据库的用户授予读/写权限。（这可能是最复杂的部分，具体取决于您共享数据库的位置）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T02:01:56.273

Access 能够处理多个用户，但是一旦您获得超过 3 或 4 个并发用户，您就会开始注意到 MS Access 不能很好地扩展。Access 专为专业人士而非企业而设计。

Microsoft SQL Server（Express 版是免费的 - 最多 4GB 空间）专为大量并发用户而设计。

**我还想限制用户对我程序中数据库的访问级别。**

如果您希望限制对文件的访问，可以使用文件夹权限。就我个人而言，在使用 MS Access 的旧 VB6 应用程序中，我将文件称为 db.resources 而不是 db.mdb。这是因为如果在线托管 a.resources 文件（参考 DotNetNuke），则无法下载它，因此人们不知道在哪个程序中打开该文件。

如果您需要基于角色的安全性，您需要一个企业级数据库，例如 SQL Server。

**我想使用 Microsoft Access 将所有 PC 中的程序连接到另一台 PC 中的一个数据库。**

这是让两台计算机共享同一个数据库的方法。

一个。选择将托管数据库的主 PC

湾。将数据库托管在与其他用户共享的文件夹中

C。物理上转到未托管数据库的 PC，在桌面上创建一个文本文件。

d。将文件扩展名从`.txt`to重命名`.udl`并按 enter

e. 双击 udl 文件并输入这些设置并导航到托管共享数据库的共享文件夹：

![UDL 文件连接搅拌](../Images/f3bfac38a88f641ac2736b5fb7bd2606.png)

F。测试连接成功后，关闭“数据链接属性”窗口。

G。右键单击桌面上的UDL文件并选择打开方式并使用记事本打开

H。您将看到您的连接字符串：

> [oledb] ; 此行之后的所有内容都是 OLE DB initstring
> Provider=Microsoft.ACE.OLEDB.12.0;Data Source=\\PCName\c$\temp\Database1.accdb;Persist Security Info=False

一世。将第二台电脑设置为使用网络连接字符串。

# python - 通过 urlopen 打开一个远程文件并将其添加到 FileField

> ID：11064531
> 
> 赞同：1
> 
> 时间：2012-06-16T15:00:45.387
> 
> 标签：python, django

我有一个类似的问题： [how to manual assign imagefield in Django](https://stackoverflow.com/questions/811167/how-to-manually-assign-imagefield-in-django)

除了我的文件来自远程主机并且我只得到一个 url，所以类似于：

```
class Book(models.Model):
    name = models.CharField()
    url = models.URLField()
    file = models.FileField(null=True, blank=True, editable=False)

class BookForm(forms.ModelForm):
    class Meta:
        model = Book

def view(request):
    if request.POST:
        form = BookForm()
        if form.is_valid():
            request = form.instance.source_url
            try:
                f = urlopen(request)
                # ...create open file obj...
                form.instance.local_file.save(form.instance.ref, f.read(), True)

            except Exception:
                print 3 
```

在这种情况下我应该如何`f`变成一个打开的文件对象，以便我可以保存它的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:10:44.637

使用[`requests`](http://docs.python-requests.org/en/latest/user/quickstart/#binary-response-content)它是微不足道的。

```
import requests
from StringIO import StringIO

r = requests.get(file_url)
f = StringIO(r.content)

# f.read() 
```

最后，正如所写的那样，您的代码在重新分配时会导致问题`request`，这是传入的。您应该将此行更改`request = form.instance.source_url`为其他内容，例如`file_url = from.instance.source_url`.

# java - Hashed wheel timer #1 的守护线程是什么？

> ID：11064536
> 
> 赞同：2
> 
> 时间：2012-06-16T15:01:43.077
> 
> 标签：java, eclipse

在调试时，我注意到有一个名为 Hashed wheel timer #1 的线程，这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:14:28.390

显然[HashedWheelTimer](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/util/HashedWheelTimer.html)是一个 Netty 类，它实现了一种计时器。该线程由该类创建。

# c - main() 的非标准签名编译成功

> ID：11064538
> 
> 赞同：3
> 
> 时间：2012-06-16T15:02:07.460
> 
> 标签：c, main

在这段代码中：

```
int main(int a, int b)
{
    printf(" main(int, int) works \n\n");
    return 0;
} 
```

`main`is的签名，`main(int, int)`编译[成功](http://ideone.com/wefAC)。为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-16T15:06:42.153

因为 C 标准不禁止非标准签名`main`（参见例如 C99 标准的第 5.1.2 节）。

但是，您会发现，如果您在 GCC 下使用`-Wall`flag, ¹进行编译，它会报错：

```
test.c:4: warning: second argument of 'main' should be 'char **' 
```

它假定您要与标准环境交互（即处理命令行参数并返回退出状态），在这种情况下您必须使用`int main(int, char **)`or `int main(void)`。如果你使用其他任何东西，参数的内容将是未定义的。

* * *

[1\. 我真的希望 ideone.com 允许您指定编译器标志！]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T15:12:06.443

C 标准明确禁止实现为`main`(C99, §5.1.2.2.1/1: "The function called at program startup is named `main`. The implementation declarations no prototype for this function.") 提供原型，并且不匹配来自原型是（通常）阻止代码编译的东西。

如果没有原型，您将回到过去糟糕的编程状态，那时您需要确保传递给函数的参数与预期相符。值得庆幸的是，在 的情况下`main`，签名是如此众所周知，但它很少成为问题。

编辑：请注意，如果您非常想要，实际上甚至可以使用带有两个`int`参数的版本（尽管该技术在 C++ 中被禁止）。`main`可以递归调用自身，在这种情况下可以/可以传递两个`int`参数：

```
int main(int a, int b) { 
     if (a == 2)
         main(2, 10);

     printf("%d, %d", a, b);
     return 0;
} 
```

就目前而言，这毫无用处，但给出了总体思路-您应该在没有命令行参数的情况下运行程序，在这种情况下`a`（它将接收您通常调用的内容`argc`）通常是`1`（即，唯一的参数它试图传递的是 argv[0] 中的程序名称）。在这种情况下，它用一些其他值调用自己。发生这种情况时，它会打印出这些值。

公平地说，我应该补充一点，这非常接近纯理论，当然不推荐。它适用于大多数典型的实现，但标准不保证这一点。这是一种愚蠢的、迂回的方式来完成它的工作——但至少对于大多数典型的编译器来说，无论如何它（几乎）是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T15:08:02.170

没有指定main签名的头文件，所以不会报错。对于 main 的情况，编译器通常只检查返回值（main 签名的警告取决于编译器）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T15:08:32.327

```
int main(int a, int b) 
```

这是没有意义的，因为传递给主函数的参数总是

```
int main(int argc,char *argv[]) 
```

main 是一个不寻常的函数。它由操作系统调用，因为 C++ 可以在许多系统上运行，而 C++ 标准不能规定操作系统编写者将哪些数据传递给在该操作系统上运行的程序 - 你可以编写任何你喜欢的参数主要功能和编译器将接受它。

# javascript - Javascript：隐藏画布对象的笔划

> ID：11064539
> 
> 赞同：1
> 
> 时间：2012-06-16T15:02:36.633
> 
> 标签：javascript, canvas

这是一个愚蠢的问题，但我怎样才能使某些画布对象的笔触不可见？将宽度设置为 0 无济于事（薄但可见），而且我不知道应该将描边更改为哪种颜色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T15:04:19.207

将不透明度设置为零将实现该效果 - 即：

```
ctx.strokeStyle = "rgba(1, 1, 1, 0)"; 
```

演示在[http://jsfiddle.net/alnitak/jYjmn/](http://jsfiddle.net/alnitak/jYjmn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:57:55.123

正如 alnitak 建议的那样，将笔画设置为完全透明是一种方法，但稍微更合适（并且性能更高）的方法是根本不调用 stroke()！

如果您不调用 stroke 路径（和所有子路径）将仍然存在，并且您仍然可以随意填充或添加到路径中。

# gcc - 使用 gcc 4.6 在内核 3.0 上编译 LLVM 2.9 的 gcc 4.2

> ID：11064540
> 
> 赞同：1
> 
> 时间：2012-06-16T15:02:48.070
> 
> 标签：gcc, compiler-errors, linux-kernel, llvm, llvm-gcc

我试图让[llvm-gcc 4.2.2.9](http://llvm.org/releases/download.html#2.9)在这个运行 3.0.0-21-generic 内核的 x86_64 系统上编译。llvm 2.9 本身构建良好。我怀疑 llvm-gcc 的可下载版本引起了其他一些问题，所以我决定自己构建 llvm-gcc。

就像`README.LLVM`我配置的建议一样

```
../llvm-gcc-4.2-2.9.source/configure \
  --prefix=/opt/llvm-gcc4.2-2.9/../llvm-gcc4.2-2.9-install \
  --disable-multilib \
  --program-prefix=llvm- \
  --enable-llvm=/opt/llvm-2.9 \
  --host=x86_64-generic-linux-gnu
  --enable-languages=c,c++ 
```

我从`/opt/llvm-gcc4.2-2.9`目录中运行它，而源代码位于其中，`/opt/llvm-gcc-4.2-2.9.source`而我的 llvm 2.9 位于`/opt/llvm-2.9`. 请注意，我设置的是`--host`而不是`--target`因为这隐含地将 设置`--target`为相同的架构。

`make`最终在此错误处停止时确实会构建很多东西（产生大量警告）：

```
make[3]: Entering directory `/opt/llvm-gcc4.2-2.9/gcc'
/opt/llvm-gcc4.2-2.9/./gcc/xgcc -B/opt/llvm-gcc4.2-2.9/./gcc/ -B/opt/llvm-gcc4.2-2.9/../llvm-gcc4.2-2.9-install/x86_64-generic-linux-gnu/bin/ -B/opt/llvm-gcc4.2-2.9/../llvm-gcc4.2-2.9-install/x86_64-generic-linux-gnu/lib/ -isystem /opt/llvm-gcc4.2-2.9/../llvm-gcc4.2-2.9-install/x86_64-generic-linux-gnu/include -isystem /opt/llvm-gcc4.2-2.9/../llvm-gcc4.2-2.9-install/x86_64-generic-linux-gnu/sys-include  -O2 -O2 -g -O2  -DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include  -I. -I. -I../../llvm-gcc-4.2-2.9.source/gcc -I../../llvm-gcc-4.2-2.9.source/gcc/. -I../../llvm-gcc-4.2-2.9.source/gcc/../include -I../../llvm-gcc-4.2-2.9.source/gcc/../libcpp/include  -I../../llvm-gcc-4.2-2.9.source/gcc/../libdecnumber -I../libdecnumber -I/opt/llvm-2.9/include  -g0 -finhibit-size-directive -fno-inline-functions -fno-exceptions -fno-zero-initialized-in-bss -fno-toplevel-reorder  -fno-omit-frame-pointer -fno-asynchronous-unwind-tables \
      -c ../../llvm-gcc-4.2-2.9.source/gcc/crtstuff.c -DCRT_BEGIN \
      -o crtbegin.o
In file included from /usr/include/stdio.h:28,
                 from ../../llvm-gcc-4.2-2.9.source/gcc/tsystem.h:90,
                 from ../../llvm-gcc-4.2-2.9.source/gcc/crtstuff.c:68:
/usr/include/features.h:323:26: error: bits/predefs.h: No such file or directory
/usr/include/features.h:356:25: error: sys/cdefs.h: No such file or directory
/usr/include/features.h:388:23: error: gnu/stubs.h: No such file or directory 
```

我觉得包含路径从我的系统`stdio.h`返回到`llvm-gcc`标题然后再次尝试包含系统标题有点奇怪。但也许这很正常？

在该错误之后，数百行带有更多错误的行*来自同一个编译单元*。

可能是我系统的 gcc 4.6.1 或系统的标头与过时的 llvm-gcc 4.2 标头不兼容吗？再说一次，我知道在不同的系统上（运行 2.6 内核）gcc 4.5.2 与 llvm 2.7 的 gcc 4.2 配合得很好。

我在这里不知所措，因为我确实需要最近的 llvm 2.*，而其他两个可接受的 llvm 版本（2.7、2.8）没有显示任何更有帮助的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:41:02.020

您系统上的 /usr/include 似乎提供了 32 位标头，因此编译失败，因为您没有安装所有 multilib 标头。您可能需要像您的发行版修补 gcc 一样修补 llvm-gcc 才能找到标头位置。

或者，您可以尝试安装 32 位标头并尝试 llvm-gcc 的 multilib 构建。

但最好的方法是切换到 LLVM 3.1 和 clang :)

# android - 如何保护我的 MySQL 数据库/PDO PHP 脚本免受滥用（在 Android 应用程序内）？

> ID：11064552
> 
> 赞同：0
> 
> 时间：2012-06-16T15:04:04.623
> 
> 标签：android, mysql, security, pdo

我使用带有 PDO PHP 脚本的 MySQL 来维护用户数据库和高分数据库。当用户在 Android 应用中获得新的高分时，我将其发送到服务器：

```
https://domain.com/phpscript.php?user=username&newhighscore=highscore 
```

在这里，用户名和高分是变量。每个网络浏览器都可以访问此 URL。如果有人反编译我的应用程序，他们将知道我的数据库在哪里，他们可以伪造他们的高分。对 url 进行混淆和加密可能不是一种选择，因为它们总是可以逆转的。

有什么方法可以保护这些 URL，因此只有我的 Android 应用程序可以访问这些页面，而不仅仅是任何浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:21:10.080

如果您只需要调用一个`https://domain.com/phpscript.php?user=username&newhighscore=highscore`来更新用户的高分，那么您就陷入了困境。

您需要某种身份验证 - 这可能是“只有我的 Android 应用程序可以访问这些页面”的意思，这里有一些想法：

*   在你的应用程序第一次启动时调用另一个脚本来促进一些令牌的交换。将此令牌存储在您的应用程序和服务器端数据库中，并将其用作验证令牌，例如`https://domain.com/phpscript.php?user=username&newhighscore=highscore&salt=abc&auth=xyz`abc 是随机盐，xyz 类似于`hash(encrypt("user=username&newhighscore=highscore",key=token,iv=salt)+salt)`

*   使用电话 ID 作为身份验证方案的一部分

# javascript - 为什么 JavaScript 的 getElementsByClassName 提供的对象不是数组？

> ID：11064562
> 
> 赞同：6
> 
> 时间：2012-06-16T15:05:09.083
> 
> 标签：javascript, arrays, chromium, nodelist

我试图在 JavaScript（不使用 jQuery）中获取页面上具有特定类名的所有元素的列表。因此，我使用 getElementsByClassName() 函数如下：

```
var expand_buttons = document.getElementsByClassName('expand');
console.log(expand_buttons, expand_buttons.length, expand_buttons[0]); 
```

请注意，我的页面上有三个锚元素，其类为“expand”。这个 console.log() 输出

```
[] 0 undefined 
```

接下来，为了好玩，我将 expand_buttons 放入它自己的数组中，如下所示：

```
var newArray = new Array(expand_buttons);
console.log(newArray, newArray.length); 
```

这突然输出

```
[NodeList[3]] 1 
```

我可以点击节点列表并查看页面上三个“展开”锚元素的属性。还值得注意的是，我能够让我的代码在[w3schools 测试页面](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_doc_getelementsbyname)中运行。

还可能值得注意的是，我对 document.getElementsByName 的使用实际上确实输出（到控制台）一个元素数组，但是当我询问它的长度时，它告诉我 0。同样，如果我尝试使用访问数组元素`array_name[0]`像往常一样，它输出“未定义”，尽管当我将对象打印到控制台时，数组中显然有一个元素。

有人知道为什么会这样吗？我只想循环遍历 DOM 元素，目前我正在避免使用 jQuery，因为我正在尝试使用 vanilla JavaScript 进行编码。

谢谢，

典范RG

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T15:08:40.203

它不是一个 JavaScript 的东西，而是一个 Web 浏览器的东西。该 API 由本机对象（`document`对象）提供，并且根据 DOM 规范，它返回一个 NodeList 对象。您可以将 NodeList 视为一个数组，它很相似，但明显不同（正如您所注意到的）。

您始终可以将 NodeList 复制到新数组：

```
var nodeArr = Array.prototype.slice.call(theNodeList, 0); 
```

或者在现代 ES2015 环境中：

```
var nodeArr = Array.from(theNodeList); 
```

JavaScript 总是存在于某些运行时上下文中，并且该上下文可以包括为 JavaScript 代码提供便利的各种 API。Web 浏览器就是其中之一。DOM 以一种并非特别偏向于 JavaScript 的方式指定；这是一个语言中立的接口定义。

我想这个答案的简短版本是，“因为它就是这样。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T15:11:27.740

它不返回数组，因为它[返回的对象是 "live"](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)，特别是它是一个 live [NodeList](https://developer.mozilla.org/en/DOM/NodeList)：

> 在大多数情况下，NodeList 是一个实时集合。这意味着 DOM 树上的更改将反映在集合上。

# asp.net - ASP.NET - 连接字符串内存泄漏

> ID：11064563
> 
> 赞同：0
> 
> 时间：2012-06-16T15:05:12.233
> 
> 标签：asp.net, vb.net

我支持一个使用大量字符串连接的应用程序，我相信这是内存泄漏的原因，最终导致 OutOfMemory 异常。请看下面的代码：

```
Public Sub ConcatenateString() As String Dim Test1 As String

Test1 = "Hello" 
Test1=Test1 & "my" 
Test1=Test1 & "name" 
Test1=Test1 & "is" 
Test1=Test1 & "joe" 
Test1=Test1 & "blogs" 
Test1=Test1 & "what" 
Test1=Test1 & "is" 
Test1=Test1 & "yours?" 'line 10

return Test1

End Sub 
```

我相信在第 10 行内存中有九个字符串，因为 String 是一个不可变对象，但只有一个对 String Test1 的引用，其中包含：“你好，我的名字是 Joe Blogs，你的名字是什么？”。我的问题是；当它们超出范围时，垃圾收集器是否会拾取所有这些字符串？即当子例程完成运行时。我似乎有内存泄漏，我认为我真的应该使用 StringBuilder 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:29:50.843

在您所说的这种情况下......您需要使用[stringbuilder 类](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)并且不要进行连接。

垃圾收集不一定会在方法块结束后发生，而是在稍后的某个时间发生。

有关 和 之间的更好比较和解释，请参阅此`String concatenation`链接`StringBuilder`。

[提高 .NET Framework 应用程序中的字符串处理性能](http://msdn.microsoft.com/en-us/library/aa302329.aspx)

[字符串连接与内存分配](http://www.cumps.be/nl/blog/commented/string-concatenation-vs-memory-allocation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T15:34:03.873

即使字符串非常大，字符串的连接也不太可能导致内存不足异常。在虚拟内存的这些日子里，内存不足异常很少表明 RAM 实际耗尽。相反，内存不足异常的常见嫌疑是您用完了系统句柄（例如 GDI 对象、文件句柄）。您可以通过在任务管理器中显示这些列来查看正在使用的句柄总数。每个进程可以创建的最大句柄取决于您拥有的 Windows 版本及其设置方式，但通常最大值为 10,000。

一旦创建的字符串不再被引用，它们就被认为是死的，垃圾收集器将销毁它们并释放内存。所以，是的，只要方法存在，所有这些字符串最终都会被收集，但不能保证它什么时候会这样做。如果你真的需要强制垃圾收集器立即收集死对象，你可以通过调用`GC.Collect()`.

但是，像这样连接字符串是不好的做法。这是非常低效的，尤其是对于大字符串。在这种情况下，您应该使用 StringBuilder：

```
Public Sub ConcatenateString() As String Dim Test1 As String
    Dim builder As New StringBuilder()
    builder.Append("Hello")
    builder.Append("my")
    builder.Append("name") 
    builder.Append("is")
    builder.Append("joe") 
    builder.Append("blogs") 
    builder.Append("what")
    builder.Append("is")
    builder.Append("yours?")
    Return builder.ToString()
End Sub 
```

# c# - linq to sql select 在 dateTime 上不起作用

> ID：11064565
> 
> 赞同：-5
> 
> 时间：2012-06-16T15:05:56.257
> 
> 标签：c#, sql-server-2008, linq-to-sql, datetime, asp.net-mvc-4

大家好，我的 linq to sql 选择不适用于 dateTime 字段

```
 for (DateTime i = FromDate; i < DateTime.Now; i = i.AddDays(1))
            {
                var Count = (from d in db.Users
                             where d.RegistrationDate.Value == i
                             select d.ID).Count();
            } 
```

我试过 i.date 但它也不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:34:15.437

看起来您正在尝试计算在某一天注册的所有用户。如果是这样，我认为您最好使用[group 关键字](http://msdn.microsoft.com/en-us/library/bb384063.aspx)按注册日期将所有用户分组在一起。然后，您可以创建一个新的匿名类型以包含日期和计数，如下所示：

```
var Counts = (from d in db.Users
             // filter down to only users registered between FromDate and Now
             where (d.RegistrationDate.Value >= FromDate 
                 && d.RegistrationDate < DateTime.Now)
             // Group all users together by Date of registration (assuming 
             // RegistrationDate is a DateTime? field)
             group d by d.RegistrationDate.Value.Date into date
             // Get a new anonymous type that contains the date and the number
             // of users registered on that date
             select new { Date = date.Key, Count = date.Count() } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:20:12.560

您需要做的是在这些日期之间进行选择。

像这样的东西：

```
var date = new DateTime(i.Year, i.Month, i.Day, 0, 0, 0); // Set the datetime to start of the day
var Count = (from d in db.Users 
                             where d.RegistrationDate.Value >= date && d.RegistrationDate.Value < date.AddDay(1)
                             select d.ID).Count(); 
```

# java - Android 2.3.3，在视图中创建一行

> ID：11064569
> 
> 赞同：0
> 
> 时间：2012-06-16T15:06:13.933
> 
> 标签：java, android, line, android-sdk-2.3

试图在我的视图中创建一条黑线来分隔文本块，但它没有显示出来。文本按原样显示，但我没有看到这条线。

编辑：是否已经测试过按照建议动态添加以及修改我的代码但仍然没有行？我错过了什么吗？

这也是在片段内部，类扩展片段{}

xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/travelContainer"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>

</ScrollView> 
```

Java代码：

```
 public class Travel extends Fragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    return inflater.inflate(R.layout.travel_fragment, container, false);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onViewCreated(view, savedInstanceState);

LinearLayout layout = (LinearLayout)view.findViewById(R.id.travelContainer);

        TextView text = new TextView(getActivity()); 
        int padding = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,4, getActivity().getResources().getDisplayMetrics()); 
        text.setPadding(padding, padding, padding, padding);
        text.setTextSize(TypedValue.COMPLEX_UNIT_SP, 12);
        text.setTypeface(null, Typeface.BOLD);
        text.setText("TITLE");
        text.setId(123456789);
        layout.addView(text); 

        /* 
    View v = new View(getActivity());
    LinearLayout.LayoutParams viewLp = new LayoutParams(LayoutParams.FILL_PARENT,1);
    viewLp.setMargins(0, 5, 0, 5);
    v.setLayoutParams(viewLp);
    v.setBackgroundColor(0x000);
            */

    View v = getActivity().getLayoutInflater().inflate(R.layout.line, (ViewGroup)getActivity().getCurrentFocus(), false);
    layout.addView(v);

        text = new TextView(getActivity()); 
        padding = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,4, getActivity().getResources().getDisplayMetrics()); 
        text.setPadding(padding, padding, padding, padding);
        text.setTextSize(TypedValue.COMPLEX_UNIT_SP, 10);       
        text.setText("Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.");
        layout.addView(text); 
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:21:54.037

您需要以编程方式创建视图吗？

一种简单的方法是创建具有以下属性的视图

```
<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#000" /> 
```

如果您创建一个名为 line.xml 的新 XML 文件，您可以使用[LayoutInflater](http://developer.android.com/reference/android/view/LayoutInflater.html)动态获取视图：

```
View line = MyActivity.this.getLayoutInflater().inflate(R.layout.line, (ViewGroup) getCurrentFocus(), false); 
```

这个版本将产生更简洁的代码，因为系统会为您完成所有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:27:32.130

在您的布局参数中，您必须将高度设置为 1，并将宽度设置为填充父级。您也只设置了 1 个高度/宽度参数。尝试以下

```
LinearLayout.LayoutParams viewLp = new LayoutParams(LayoutParams.FILL_PARENT,1);
viewLp.setMargins(0, 5, 0, 5); 
```

此外，您将 LayoutParams 用于 RelativeLayout，但您使用的是 LinearLayout。LinearLayouts 不支持以下内容：

```
viewLp.addRule(RelativeLayout.BELOW, 123456789);
viewLp.addRule(RelativeLayout.CENTER_HORIZONTAL); 
```

使用 LinearLayout.LayoutParams。LinearLayout 将按照添加的顺序水平或垂直堆叠视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T15:40:42.233

我做了类似的事情，我认为一个简单的方法是覆盖组件的类，尤其是你想要行分隔符的 onDraw() 方法。

我认为您的目标是在每个文本视图的末尾添加一条黑线，因此您可以执行以下操作：

1）创建一个png黑线

2) 声明一个扩展 TextView 的类并覆盖 onDraw 方法并执行以下操作 ==>

```
private Bitmap line; 
```

然后在构造函数中：

```
 line = BitmapFactory.decodeResource(context.getResources(), R.drawable.line_thin);
    line = Bitmap.createBitmap(line, 0, 0, this.getWidth(), 1); 
```

然后在 onDraw() 方法上：

```
 canvas.drawBitmap(line, 0, this.getHeight(), null); 
```

3) 最后，您不要忘记使用您在 XML 中创建的类来更改组件的类型。

我不知道这个解决方案是否适合您，但我认为这是一个不错的解决方案，然后每次创建此 Textview 时都会动态创建该行。

希望能帮助到你。

# javascript - Javascript：如何在 localhost 上测试 JSONP

> ID：11064572
> 
> 赞同：2
> 
> 时间：2012-06-16T15:06:35.680
> 
> 标签：javascript, jsonp

这是我测试 JSONP 的方式：我运行 XAMPP，并在文件夹 htdocs 中创建一个 javascript 文件夹。我创建`json1.json`的文件包含一些要处理的数据。

之后，我在本地运行这个 html 文件，它会调用“其他机器”中的一个函数（在这种情况下是`localhost`）

这是我在这个问题中的代码：

```
<head>
    <script>
            function updateSales(sales) {
                alert('test jsonp');
                // real code here
                }

    </script>

    </head>
    <body>
        <h1>JSONP Example</h1>
        <script src="http://localhost:85/javascript/json1.json?callback=updateSales"></script>
    </body> 
```

但是当我跑步时，什么也没有发生。但是如果换成网上其他真实的json，就可以了。这意味着换行：

```
<script src="http://localhost:85/javascript/json1.json?callback=updateSales"></script> 
```

到线：

```
<script src="http://gumball.wickedlysmart.com/?callback=updateSales"></script> 
```

它会顺利工作。

所以，我不知道如何`JSONP`使用 localhost 进行测试，请帮助我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:13:02.873

JSONP 在服务器端生成。服务器获取您的数据，将其编码为 JSON，然后围绕它包装一个函数调用。

因此，在您的情况下，您可以通过`.json`以下方式修改文件：

```
updateSales( { /* your data */ } ); 
```

但是，这将有一个硬编码的回调方法，因此它不会对您在检索它时所做的更改做出反应。

另一种方法是编写一个小的 PHP 包装器（或使用任何你喜欢的东西）并在 JSON 周围添加函数，然后将其发送回客户端。

```
<?php

  $json = file( "path/to/your/json" );

  echo $_GET['callback'], '(', implode( '', $json ), ');';

?> 
```

（后面的代码绝不用于任何生产用途，而仅用于本地测试！）

# asp.net - ModalPopup 不工作

> ID：11064577
> 
> 赞同：0
> 
> 时间：2012-06-16T15:07:16.463
> 
> 标签：asp.net, modalpopupextender

由于我将我的网站从 .NET 4.0 更改为 3.5 ModalPopup 无法正常工作。问题是没有显示错误消息。所以我不知道如何解决它。以前有人遇到过同样的问题吗？

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>
        <asp:Button ID="btnpopup" runat="server" Text="Button" /> 

        <asp:ModalPopupExtender ID="mpe" runat="server" TargetControlID="btnpopup" PopupControlID="pnlpopup" 
            CancelControlID="btnCancelpopup" EnableViewState="true" DropShadow="true" />

            <asp:Panel ID="pnlpopup" runat="server" Width="400px">
                test
            <asp:Button ID="btnCancelpopup" runat="server" Text="Button" />
        </asp:Panel>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T18:23:25.057

简而言之，我认为解决您问题的最快方法是创建一个基于 .NET 3.5 的新解决方案，然后将您的文件移过来。

我构建了两个解决方案，一个在 3.5 中，一个在 4.0 中，通过用于 vs2010 的 Nuget 包管理器安装了 ajaxcontroltoolkit（[这里](http://ajaxcontroltoolkit.codeplex.com/)还包括用于 vs2008 的指令）并且都正确运行了您的代码。

当我将 4.0 解决方案回滚到 3.5 时，收到的错误是：

> “无法加载文件或程序集 'AjaxControlToolkit' 或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。”

依赖项似乎与 System.Web.Extensions 相关，如以下错误所示：

> 错误 2 程序集 'AjaxControlToolkit, Version=4.1.60501.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e' 使用 'System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'，其版本高于引用的程序集'System.Web.Extensions，版本 = 3.5.0.0，文化 = 中性，PublicKeyToken = 31bf3856ad364e35'。

您也许可以摆弄适当的依赖关系，但我个人不会打扰。

# objective-c - NSRegularExpression 提取 2 个字符串之间的 url

> ID：11064581
> 
> 赞同：0
> 
> 时间：2012-06-16T15:07:33.420
> 
> 标签：objective-c, regex, foundation, nsregularexpression

我正在使用`NSRegularExpression`2 个字符串之间提取 URL，这是整个字符串：

```
 <a href="/url?q=http://www.myurl.com/videos/how-to/&amp;sa= 
```

我需要提取 和 之间的`/url?q=`部分`&amp;sa=`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:07:32.503

您可以使用以下方法`NSString`：`- (NSArray *)componentsSeparatedByString:(NSString *)separator`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:23:13.520

它可以使用正则表达式找到并挖掘出来，具有积极的后视和前瞻，如下所示：

```
NSString *orgStr = @"<a href=\"/url?q=http://www.myurl.com/videos/how-to/&amp;sa=";

NSString *URLRegExPattern = @"(?<=url\\?q=).*(?=&amp;sa=)";

NSError *regExErr;
NSRegularExpression *URLRegEx = [NSRegularExpression regularExpressionWithPattern:URLRegExPattern 
                                                                          options:0
                                                                            error:&regExErr];

NSString *URLString = nil;

NSRange range = [URLRegEx rangeOfFirstMatchInString:orgStr 
                                            options:0 
                                              range:NSMakeRange(0, orgStr.length)];

if (!NSEqualRanges(range, NSMakeRange(NSNotFound, 0))) {
    URLString = [orgStr substringWithRange:rangeOfFirstMatch];
}

NSLog(@"URL: %@", URLString); 
```

# jquery - 如何调整jquery mobile listview项目和分隔符的大小

> ID：11064582
> 
> 赞同：1
> 
> 时间：2012-06-16T15:07:37.727
> 
> 标签：jquery, listview, mobile, resize

我想调整我的 jquery mobile listview 的列表项的大小，并将 listview 分隔符调整为不同的高度。例如，假设列表项的高度应为 50 像素，分隔线应为 30 像素。

我正在尝试覆盖 jquery 移动 css 样式，因此我尝试更改 .ui-li、.ui-content 和其他样式，但它对我不起作用，也找不到任何有关此的文档。我对 jQM 很陌生，所以我会很感激任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:05:11.507

我解决了项目的问题（或多或少），使用此代码我可以修改顶部和底部填充：

```
.ui-li .ui-btn-inner a.ui-link-inherit, .ui-li-static.ui-li {
    padding-top:5px;
    padding-bottom:5px;
} 
```

不完美，但就是东西。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T12:17:00.377

我只是遇到了同样的问题（尽管我的列表视图没有分隔线）。这是我想出的解决方案：

```
#your-listview-id li {
   height: 50px;
} 
```

# graphviz - 在 DOT 中绘制两个没有连接的子图，一个在另一个之下？

> ID：11064590
> 
> 赞同：2
> 
> 时间：2012-06-16T15:08:29.393
> 
> 标签：graphviz, dot

例如：

```
digraph G {
rankdir = TB；
subgraph A {
a -> {a0, a1};
};

subgraph B {
b -> {b0, b1, b2};
};
}; 
```

我想把B放在A的底部，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:25:01.700

您必须告诉 graphviz 子图不相等。一种方法是简单地在图形之间添加不可见的边：

```
digraph G {
  rankdir = TB；

  subgraph A {
    a -> {a0, a1};
  };

  subgraph B {
    b -> {b0, b1, b2};
  };

  a0 -> b [style=invis];
  a1 -> b [style=invis];
}; 
```

通过添加两条不可见的边，子图可以整齐地对齐。

# c++ - QT moc.exe生成空文件，涉及type_traits的错误

> ID：11064593
> 
> 赞同：2
> 
> 时间：2012-06-16T15:08:39.863
> 
> 标签：c++, qt, qt4, moc

我试图在 QT Creator 中构建一个 QT 项目，但出现链接错误：

```
minecraftlauncher.obj : error LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __cdecl Launcher::MinecraftLauncher::metaObject(void)const " (?metaObject@MinecraftLauncher@Launcher@@UEBAPEBUQMetaObject@@XZ)
minecraftlauncher.obj : error LNK2001: unresolved external symbol "public: virtual void * __cdecl Launcher::MinecraftLauncher::qt_metacast(char const *)" (?qt_metacast@MinecraftLauncher@Launcher@@UEAAPEAXPEBD@Z)
minecraftlauncher.obj : error LNK2001: unresolved external symbol "public: virtual int __cdecl Launcher::MinecraftLauncher::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@MinecraftLauncher@Launcher@@UEAAHW4Call@QMetaObject@@HPEAPEAX@Z)
debug\Launcher.exe : fatal error LNK1120: 3 unresolved externals 
```

由于某种原因，`moc.exe`元对象编译器正在创建空 moc_*.cpp 文件，并显示错误消息

```
:/Program Files (x86)/Microsoft Visual Studio 11.0/VC/include/type_trait(0): Note: No relevant classes found. No output generated. 
```

我尝试`moc`使用在 QT Creator 中运行的标志在命令行上运行：

```
C:\QtSDK\x64\bin\moc.exe -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_GUI_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -I"c:\QtSDK\x64\include\QtCore" -I"c:\QtSDK\x64\include\QtGui" -I"c:\QtSDK\x64\include" -I"c:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include" -I"c:\QtSDK\x64\include\ActiveQt" -I"debug" -I"..\Launcher" -I"." -I"c:\QtSDK\x64\mkspecs\win32-msvc2005" -D_MSC_VER=1400 -DWIN32 ..\Launcher\minecraftlauncher.hpp -o debug\moc_minecraftlauncher.cpp 
```

它返回了同样的错误。我尝试一一删除几个标志，并将其缩小到`-I"c:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include"`. 出于某种原因，当该目录位于包含路径上时，会显示“未找到相关类”错误并生成一个空的 .cpp 文件。但是，当该目录*不在*包含路径上时， moc.exe 可以正常工作。

由于错误消息包括`:/Program Files (x86)/Microsoft Visual Studio 11.0/VC/include/type_trait(0)`，我尝试`type_traits`在该位置重命名文件，以便无法识别它。当我这样做时， moc.exe 再次正常工作（但实际上失败了，因为 type_traits 包含在我包含的标准库文件中的某处）。所以错误是在 type_traits 的某个地方引起的

据我所知`type_traits`，我相信它与获取有关对象的编译类型信息有关。但我不知道为什么它会导致元对象编译器出错。为什么要这样做？moc 对 type_traits 做了什么，为什么会这样，什么是失败的？

我将非常感谢任何人可以提供的任何见解，因为这对我来说非常令人费解。

`minecraftlauncher.hpp`文件：

```
#ifndef MINECRAFTLAUNCHER_HPP
#define MINECRAFTLAUNCHER_HPP

#include <QMainWindow>
namespace Launcher {
    class MinecraftLauncher : public QMainWindow
    {
        Q_OBJECT

    public:
        explicit MinecraftLauncher(QWidget *parent = 0);
        ~MinecraftLauncher();

    private:

    };
}

#endif // MINECRAFTLAUNCHER_HPP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:44:19.057

这很可能是 C++11 标头暴露的 moc 错误。我敢打赌，您没有从源代码重新编译 Qt，因为这同样会失败。

[Qt 不支持](http://doc-snapshot.qt-project.org/4.8/supported-platforms.html)Visual Studio 11 。它甚至不在 tier2 支持中。解决方法是在错误修复之前使用 MSVC 2010，或者让您修复 moc 并提交补丁 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-29T21:00:23.500

我遇到了类似的错误，但使用 Visual Studio 12 并且 Qt 直接来自 Qt。所以 Kuba Ober 的回答没有用。

```
:/Program Files (x86)/Microsoft Visual Studio
12.0/VC/include/type_trait(0): Note: No relevant classes found. No output generated. 
```

起作用的是用（不是）Q_MOC_RUN 包围对 Qt 标头的引用，如下所示。使用 Daniel Mulcahy 代码的顶部...

```
#ifndef MINECRAFTLAUNCHER_HPP
#define MINECRAFTLAUNCHER_HPP

#ifndef Q_MOC_RUN
#  include <QMainWindow>
#endif //Q_MOC_RUN

namespace Launcher {
class MinecraftLauncher : public QMainWindow
{
    Q_OBJECT
... 
```

# random - 平截头体内均匀分布的随机点

> ID：11064595
> 
> 赞同：0
> 
> 时间：2012-06-16T15:08:44.650
> 
> 标签：random, 3d, polygon

我有一个 3D 场景，我想在视锥体内随机放置 X 个对象来“乱扔”它。

我尝试使用 3 个随机数：**X** + **Y**（视口 0..1），然后是与相机的**Z**距离，然后使用相机距离进行投影。但是，这不会产生均匀分布，并且靠近相机的物体太多而远离相机的物体太少。

可以选择在立方体内生成一个随机点并过滤视锥体之外的那些点，但我正在生成这些点，我担心性能。

如何以均匀分布的方式在截锥体内生成随机点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-01T19:41:30.607

这只是[Amir Abiri](https://stackoverflow.com/users/800334/amir-abiri)答案中链接中最终解决方案的格式良好的代码，因为链接中的代码具有糟糕的格式质量。

在 java 中，因为这就是我在使用它，并且更改了一些变量名（此外，测试通过了；它工作得很好）

请注意，这可以根据应用程序以多种方式变得更好（例如，正如[Amir Abiri](https://stackoverflow.com/users/800334/amir-abiri)的回答中的链接站点中提到的那样，只要使用相同的截锥体，一些变量可以计算一次并多次使用)

```
public static final double ONE_THIRD = 1d / 3, EPSILON = 0.0000001;

public static double getUniformRandZInFrustum(Random random, double nearW, double nearH, double farW, double farH, double depth)
{
    double a = (farW - nearW) * (farH - nearH) / (depth * depth);
    double b = (nearH * (farW - nearW) + nearW * (farH - nearH)) / depth;

    if (Math.abs(a) < EPSILON)
    {
        if (Math.abs(b) < EPSILON)
        {
            //Rectangular prism
            return (random.nextDouble(depth));
        }

        //Trapezoidal prism
        double c = nearW * nearH;
        double area = depth * (c + depth * 0.5 * b);
        double r = random.nextDouble(area);
        return (-c + Math.sqrt(c * c + 2 * b * r)) / b;
    }

    //General case
    double c = nearW * nearH;
    double area = depth * (c + depth * (0.5 * b + depth * ONE_THIRD * a));
    double r = random.nextDouble(area);
    double det = b * b - 4 * a * c;
    double part1 = b * (b * b - 6 * a * c) - 12 * a * a * r;
    double part2 = Math.sqrt(part1 * part1 - det * det * det);
    if (part1 < 0.0) part2 = -part2;
    double part3 = part1 + part2;
    if (part3 < 0.0) part3 = -Math.pow(-part3, ONE_THIRD);
    else part3 = Math.pow(part3, ONE_THIRD);
    return -(b + det / part3 + part3) / (2 * a);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:11:28.063

在 NDC 空间中分布点，并通过反截锥体变换将它们反向投影，然后将它们划分到视图空间中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T01:25:12.247

我在一个旧论坛帖子中找到了 gamedev.net 上的解决方案：

[http://www.gamedev.net/topic/254550-geometryrandomnessuniform-filling/page_p_2539021_hl_+random%20+frustum#entry2539021 *_* _ *_* _](http://www.gamedev.net/topic/254550-geometryrandomnessuniform-filling/page__p__2539021__hl__+random%20+frustum#entry2539021)

# android - Android - 将远程文件复制到原始文件夹

> ID：11064600
> 
> 赞同：0
> 
> 时间：2012-06-16T15:09:20.623
> 
> 标签：android, xml

如何将远程 xml 文件复制到我的原始文件夹以便离线处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:10:45.493

一旦构建 apk，您就无法在原始文件夹中进行更改............

你有其他选择

```
1- Internal storage (private are for you app)
2- External Storage (like SD card)
3- Database 
```

# c# - 用于分组报表查询的设计模式

> ID：11064604
> 
> 赞同：1
> 
> 时间：2012-06-16T15:09:48.207
> 
> 标签：c#, php, design-patterns, doctrine-orm

当查询实体时，我有存储库，但在报告的情况下，结果来自 SQL，结果只是和数组。我想知道用于将这些查询分组在一起的类之王或设计模式。最初，我将这些查询添加到最相关的实体的存储库中，但我认为不行（存储库应该只返回模型的业务实体以我的理解）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:48:23.883

我不确定我是否完全理解你的问题，但据我所知，我会选择观察者模式。您可以使用实体（来自 repos）作为主题，并将相应的 SQL 报告添加为观察者。但是请注意，观察者模式通常用于通知观察者主题的变化。

# c# - CustomValidator 不能正常工作

> ID：11064613
> 
> 赞同：9
> 
> 时间：2012-06-16T15:10:47.487
> 
> 标签：c#, asp.net, customvalidator, custom-validators

我有以下一段asp：

```
<asp:ValidationSummary ID="RegisterUserValidationSummary" runat="server" CssClass="failureNotification" 
        ValidationGroup="RegisterUserValidationGroup"/> 
```

...

```
<asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserNameTB">Username:</asp:Label>
<asp:TextBox ID="UserNameTB" runat="server" CssClass="textEntry"></asp:TextBox>
<asp:RegularExpressionValidator ID="RegularExpressionValidator1" ControlToValidate="UserNameTB" 
      ValidationExpression="[a-zA-Z]{3,8}" ErrorMessage="Username must be between 3 to 8 chars" runat="server"
      CssClass="failureNotification" ToolTip="Username must be between 3 to 8 chars" ValidationGroup="RegisterUserValidationGroup">
    *</asp:RegularExpressionValidator>
<asp:CustomValidator ID="NoUserValidator" ControlToValidate="UsernameTB" runat="server" ErrorMessage="User Taken!" CssClass="failureNotification" 
      ValidationGroup="RegisterUserValidationGroup"  OnServerValidate="UserValidate">*</asp:CustomValidator> 
```

然后是函数：

```
protected void UserValidate(object source, ServerValidateEventArgs args)
    {
        SqlDataSource1.SelectCommand = "SELECT ClientID FROM [Clients] WHERE Username= '" + UserNameTB.Text + "'";
        DataView dv = (DataView)SqlDataSource1.Select(DataSourceSelectArguments.Empty);
        if (dv.Table.Rows.Count != 0)
            args.IsValid = false;
        else
            args.IsValid = true;
    } 
```

按钮：

```
<asp:Button ID="CreateUserButton" runat="server" CommandName="MoveNext" Text="Create User" 
       ValidationGroup="RegisterUserValidationGroup" 
       onclick="CreateUserButton_Click"/> 
```

问题是即使调用了自定义验证器函数并将其设置`.IsValid`为 false，按钮逻辑仍然运行！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T15:34:46.390

在按钮的 onclick 函数中，添加一个检查以查看页面是否有效

```
protected void CreateUserButton_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
    { 
        // Create the user
    }
} 
```

那应该这样做。这是因为您的自定义验证器设置为在回发期间在服务器上进行验证。发生的情况是代码首先运行验证器代码`UserValidate`，您在其中设置了`IsValid`标志。回发堆栈中的下一个是按钮的 onclick 函数。无论验证器函数中的结果如何，此函数都会运行，因此您需要在此处检查`IsValid`标志的值。这是您在服务器端验证自定义验证控件时的行为。

另一种方法是在客户端进行验证。如果您查看浏览器生成的页面源代码，您会看到为`RegularExpressionValidator`. 它的行为是已知的，并在客户端处理，因此不需要回发来评估表达式和验证页面（这一切都由 javascript 处理）。自定义验证器功能未知，因此需要回发，除非您自己定义客户端验证脚本。

[这是MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator%28v=vs.80%29.aspx)上更多信息的链接。

# javascript - 推特引导模式的黄瓜功能

> ID：11064615
> 
> 赞同：2
> 
> 时间：2012-06-16T15:10:55.383
> 
> 标签：javascript, ruby-on-rails, testing, cucumber, twitter-bootstrap

如果我想删除一个类别，我正在编写一个黄瓜功能，但在我删除它之前，我会显示一个模态屏幕来询问用户他的构象。

我正在使用 twitter 引导程序并使用他们提供的 javscript 模式。

但是我被困住了，所以任何人都可以直接帮助我如何测试它。到目前为止，这是我的功能：

```
 Scenario: Delete category with articles
   Given I am logged in as an admin
   And I have category titled Paints
   When I go to the list of categories
   And I push delete button for the Paints category
   Then I should get a popup to confirm 
```

我已经实现了该功能的必要步骤，当然接受最后一个。但我不知道如何开始：

我读了一些关于 page.driver.browser.switch_to.alert 的内容，但如果可以的话，现在就不要了。

有人有什么建议吗？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T15:21:02.377

[正如您在问题中建议的那样，您可以使用Selenium Driver](http://code.google.com/p/selenium/wiki/RubyBindings)访问对话框。我假设您使用的是 Capybara，因此您可以通过以下方式定义您的步骤定义以接受/取消弹出窗口：

```
Then /^I accept the popup to confirm$/
  page.driver.browser.switch_to.alert.accept 
end

Then /^I cancel the popup to confirm$/
 page.driver.browser.switch_to.alert.dismiss
end 
```

**编辑**：看起来模态实际上不是一个窗口......让我们试试这样：

创建一个辅助函数来检测模态元素是否在附近：

```
def find_modal_element
  wait_until { page.find(modal_element_id).visible? }
end 
```

然后让我们更改步骤定义：

```
Then /^I should see a popup window$/
 find_modal_element
 page.find(modal_element_id).text.must_match "Whatever you want it to match"
end 
```

# php - Php Zend 的 Lucene 荧光笔和 unicode

> ID：11064626
> 
> 赞同：2
> 
> 时间：2012-06-16T15:12:20.767
> 
> 标签：php, zend-framework, lucene

这个快把我逼疯了。我正在尝试从 Lucene 中获取搜索结果，但它不会运行。这是我正在做的事情：

```
$userQuery = Zend_Search_Lucene_Search_QueryParser::parse($_GET['query'], 'utf-8');
$search->results = $this->index->find($userQuery); 
```

然后我检索命中并在每次命中时尝试突出显示匹配项。

```
$html = $query->highlightMatches($hit->body, 'utf-8'); 
```

我正在搜索“attività”：它会找到正确的命中，但不会突出显示任何内容，并且会输出完整的文本以及正确的重音（所以我看到“attività”这个词没有突出显示）。

如果我在 highlightMatches 中省略了 'utf-8' 参数，它会突出显示 attività 单词，但输出中的“à”字符会被截断，因此会显示“attivit”。在这种情况下，输出字符串是 ASCII 编码的。

怎么了？？！我的页面是 utf-8 编码的。我使用以下逻辑添加文档：

```
// Following two lines are at the initialization so they hold for all code
Zend_Search_Lucene_Search_QueryParser::setDefaultEncoding('UTF-8');
Zend_Search_Lucene_Analysis_Analyzer::setDefault(
  new Zend_Search_Lucene_Analysis_Analyzer_Common_Utf8_CaseInsensitive ()
);
...
$doc->addField(Zend_Search_Lucene_Field::Text($fieldName, $fieldValue, "UTF-8"));
... 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-07T09:35:49.250

我在使用 Zend Lucene Highlighter 时遇到了同样的问题。看来，Zend 想在返回到您的视图或进一步处理之前使用 iconv 将要突出显示的字符串转换为 UTF-8。

就我而言，iconv 无法检测到我的字符串已经是 UTF-8，因此转换失败。reset() 函数中 Zend_Search_Lucene_Anaylsis_Analyzer_Common_Utf8 的以下代码行导致了问题：

```
$this->_input = iconv($this->_encoding, 'UTF-8', $this->_input); 
```

我只是对其进行了评论，然后它就起作用了。由于不再进行转换，因此没有什么会导致转换失败。

我希望它有所帮助。

# android - 仅在首次创建数据库时将记录插入 sqlite 数据库

> ID：11064628
> 
> 赞同：1
> 
> 时间：2012-06-16T15:12:32.997
> 
> 标签：android, sqlite, sqliteopenhelper

我只想在创建数据库时（即仅当我的应用程序第一次在设备上安装时）才将记录插入我的 sqlite 数据库。我搜索了帮助，有人建议在 的 `onCreate()`方法中插入数据`SQLiteOpenHelper`，但使用该方法无法插入记录。

这是我的代码

```
public class EventsData extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "events.db";
    private static final int DATABASE_VERSION = 1;

    // Table name
    public static final String TABLE = "events";

    // Columns
    public static final String NAME = "first";
    public static final String TITLE = "second";

    public EventsData(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL("CREATE TABLE "+TABLE+"(" + _ID + "INTEGER PRMARY KEY AUTOINCREMENT, " + NAME +"TEXT, " + TITLE + "TEXT NOT NULL);");
        db.execSQL("INSERT INTO " + TABLE +" VALUES (1,'david','packard')");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                    db.execSQL("DROP TABLE IF EXISTS " + TABLE);
                    onCreate(db);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T19:10:44.557

使用 sqlite 数据库浏览器制作数据库，这将有很大帮助尝试这个链接[Inserting data to record in sqlite](https://stackoverflow.com/questions/17108268/inserting-data-to-record-in-sqlite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:15:49.530

看起来你的 CREATE TABLE 查询空间在文本之间丢失了......

```
NAME +"TEXT, " + TITLE + "TEXT NOT NULL);" 
```

只需在 SOP 中打印查询并尝试在桌面上的 SQLITe 工具中执行它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T15:18:28.753

`CREATE`当你得到正确的陈述时，它会很好地工作。它缺少空格和正确的拼写。 `_ID + "INTEGER`... 必须是 _ID + " INTEGER `and`PRMARY `must be`PRIMARY`。可能还有其他错误。在您的程序中有一个调试选项以将您正在执行的所有 SQL 发送到日志是一个好主意。

# css - 将 div 定位在混合高度的浮动 div 下方时，如何与较短 div 的底部对齐？

> ID：11064635
> 
> 赞同：0
> 
> 时间：2012-06-16T15:13:30.140
> 
> 标签：css, html, positioning

我的元素结构大致如下：http: [//jsfiddle.net/zyySd/](http://jsfiddle.net/zyySd/)

有什么办法可以做到这一点：http: [//jsfiddle.net/zyySd/1/](http://jsfiddle.net/zyySd/1/)

不诉诸将元素从文档流中取出并硬编码绝对定位值？如果我不知道 div 的尺寸是多少，我将无法像在第二个 JSFiddle 中那样使用绝对位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:19:52.883

CSS[真的做不到](https://stackoverflow.com/questions/6003171/css-two-columns-with-known-children-width/6003261#6003261)。你需要 JavaScript。

jQuery Masonry 不错： http: [//masonry.desandro.com/](http://masonry.desandro.com/)

还有一个无框架版本，Vanilla Masonry：http: [//vanilla-masonry.desandro.com/](http://vanilla-masonry.desandro.com/)

# sql-server-2008 - 如何从没有主键的表中选择不同的行

> ID：11064638
> 
> 赞同：0
> 
> 时间：2012-06-16T15:13:38.097
> 
> 标签：sql-server-2008

如果有任何未读消息，我需要在用户登录时显示通知。因此，如果多个用户在用户离线时发送（每个用户 5 条消息），则这些消息应在登录时显示。意味着必须显示来自每个用户的最后一条消息。

我使用加入来查找记录。

在这种情况下，来自用户的消息不是主键。

这是我的查询

```
SELECT 
   UserMessageConversations.MessageFrom,  UserMessageConversations.MessageFromUserName,
   UserMessages.MessageTo, UserMessageConversations.IsGroupChat, 
   UserMessageConversations.IsLocationChat, 
   UserMessageConversations.Message, UserMessages.UserGroupID,UserMessages.LocationID 
FROM    
   UserMessageConversations 
LEFT OUTER JOIN
   UserMessages ON UserMessageConversations.UserMessageID = UserMessages.UserMessageID 
WHERE
   UserMessageConversations.MessageTo = 743  
   AND UserMessageConversations.ReadFlag = 0 
```

这是从上述查询获得的输出。

![在此处输入图像描述](../Images/91aee938e0a1b3be4d831fac117e78ed.png)

MessageFrom -582 出现两次。我只需要该用户的一条记录。

这怎么可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:31:10.907

我不完全确定我完全理解您的问题 - 但一种方法是使用 CTE（通用表表达式）。

使用此 CTE，您可以按某些标准（即您的）对数据进行分区，`MessageFrom`并让 SQL Server 为每个分区从 1 开始为您的所有行编号，并按其他标准排序 - 这是您的问题完全不清楚的一点，您是否甚至关心每个`MessageFrom`数字的行是按什么排序的（您是否有某种 a`MessageDate`或可以订购的东西？）...

所以尝试这样的事情：

```
;WITH PartitionedMessages AS
(
   SELECT 
      umc.MessageFrom,  umc.MessageFromUserName,
      um.MessageTo, umc.IsGroupChat, 
      umc.IsLocationChat, 
      umc.Message, um.UserGroupID, um.LocationID ,
      ROW_NUMBER() OVER(PARTITION BY umc.MessageFrom
                        ORDER BY MessageDate DESC) AS 'RowNum' <=== totally unclear yet
   FROM    
      dbo.UserMessageConversations umc
   LEFT OUTER JOIN
      dbo.UserMessages um ON umc.UserMessageID = um.UserMessageID 
   WHERE
       umc.MessageTo = 743  
       AND umc.ReadFlag = 0
)
SELECT 
    MessageFrom,  MessageFromUserName, MessageTo, 
    IsGroupChat, IsLocationChat, 
    Message, UserGroupID, LocationID 
FROM 
   PartitionedMessages
WHERE
   RowNum = 1 
```

在这里，我只为每个“分区”（即每个`MessageFrom`）选择“第一个”条目 - 按“想象”`MessageDate`列排序，以便选择最新的（最新的）消息。

这是否接近你正在寻找的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:37:00.830

如果您将它们视为相同的行，我假设您不关心消息字段。在这种情况下，您可以使用以下`DISTINCT`子句：

```
SELECT DISTINCT
   UserMessageConversations.MessageFrom,  UserMessageConversations.MessageFromUserName,
   UserMessages.MessageTo, UserMessageConversations.IsGroupChat, 
   UserMessageConversations.IsLocationChat, 
   UserMessages.UserGroupID,UserMessages.LocationID 
FROM    
   UserMessageConversations 
LEFT OUTER JOIN
   UserMessages ON UserMessageConversations.UserMessageID = UserMessages.UserMessageID 
WHERE
   UserMessageConversations.MessageTo = 743  
   AND UserMessageConversations.ReadFlag = 0 
```

通常，对于 distinct 子句，每个不同的行属性组都有一行。如果您的要求是为所有消息显示一个字段（例如：每条消息折叠在一条消息中，它们之间有一个分隔符），您可以使用聚合函数，但在 SQL Server 中似乎[并不那么容易。](http://msdn.microsoft.com/en-us/library/ms190678.aspx)

# android - 设计最佳实践——处理用户选择的最佳方式

> ID：11064640
> 
> 赞同：3
> 
> 时间：2012-06-16T15:14:06.833
> 
> 标签：android

我是一名经验丰富的开发人员 (WPF)，正在转向 Android 开发。我的问题：我正在开发的一个应用程序允许用户浏览他们的本地存储（例如 SDCARD）并选择一个文件。现在，我是否应该简单地创建一个新活动（在用户做出选择之后）来处理我想让应用程序对所选文件执行的操作，或者 - 是传递所选文件的路径/名称的更好方法回到主 Activity 并让 IT 启动下一个 Activity？

换句话说，让主要活动启动其他（支持）活动是更好的做法，还是将一个活动链连接到另一个活动链并不断循环是完全可以和正常的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:23:13.293

简短而甜蜜：使用单独的活动，因为这就是 Android 设计用于处理不同 UI 操作的方式。

来自 Android 开发文档：

> 系统中的活动作为活动堆栈进行管理。当一个新的 Activity 启动时，它被放置在栈顶并成为正在运行的 Activity——之前的 Activity 始终保持在它的下方，直到新的 Activity 退出后才会再次来到前台。

一个活动基本上有四种状态：

*   如果某个活动在屏幕的前台（在堆栈的顶部），则它处于活动状态或正在运行。

*   如果一个活动失去焦点但仍然可见（也就是说，一个新的非全尺寸或透明活动的焦点位于您的活动之上），它会被暂停。暂停的活动是完全活动的（它维护所有状态和成员信息并保持连接到窗口管理器），但可以在内存极低的情况下被系统杀死。

*   如果一个活动被另一个活动完全遮挡，它就会停止。它仍然保留所有状态和成员信息，但是，它不再对用户可见，因此它的窗口是隐藏的，并且当其他地方需要内存时，它通常会被系统杀死。

*   如果一个活动被暂停或停止，系统可以通过要求它完成或简单地终止其进程来从内存中删除该活动。当它再次显示给用户时，它必须完全重新启动并恢复到之前的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:20:32.267

是的，有一个活动链是完全可以的。主要是因为导航：如果用​​户选择文件，使用它然后按下“返回”按钮，那么他会看到**之前**打开的活动（然后，也许，他会选择另一个文件）。在其他方面，这对用户来说将是一种不可预测的行为。

# c++ - STL 容器的数据结构等价物

> ID：11064645
> 
> 赞同：7
> 
> 时间：2012-06-16T15:14:52.467
> 
> 标签：c++, data-structures, stl, equivalent

我研究数据结构，我想问一下 STL 容器的等价物是什么。

例如

*   向量 = 动态数组
*   队列 = 队列
*   堆栈 = 堆栈
*   priority_queue = 堆
*   列表 = 链表
*   集=树
*   slist = 单链表
*   bit_vector = 矢量布尔
*   地图=对
*   双端队列 = ?
*   多组 = ?
*   多图 = ?
*   哈希集 = ?
*   哈希映射 = ?
*   hash_multiset = ?
*   hash_multimap = ?
*   哈希 = ?
*   bit_set = ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T17:18:11.563

关于 C++ 标准库容器，标准本身尽量不对实现说太多。然而，对插入、删除、查找、范围插入等复杂性的非常具体的限制意味着大多数实现对容器使用相同类型的数据结构。关于你的一些例子：

*   std::list ：*双向*链表
*   std::set、std::multiset、std::map、std::multimap：自平衡二叉树，通常是红黑树。
*   hash_*：C++11 提供 unordered_set、unordered_map 和多兄弟。这些是哈希表。
*   bitset：固定大小的数组

我相信 STL 遵循这些实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T15:27:48.113

我不认为将 std::map<> 限定为“对”是正确的。实际上，有一个名为 std::pair<> 的*实用程序*实际上只是一对。std::map<> 存储唯一键和非唯一值的方式使得可以使用类似于数组的语法，索引可以是数字类型，也可以不是数字类型。

编辑：感谢**juanchopanza**将“容器”更正为“实用程序” 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T15:24:07.490

集合和多集合-二叉搜索树

map 和 multimap - 二叉搜索树

双端队列

`hash*`容器是哈希关联容器，实现为哈希表。例如。`hash_map`包含`pair<key,value>`使用哈希表查找的内容。

在位集中

`the individual elements are accessed as special references which mimic bool elements`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T09:21:22.053

```
vector = dynamic array  

queue = queue

stack = stack

priority_queue = priority queue based on binary heap 
                 priority_queue can be implemented using 
                 1\. sorted array
                 2\. sorted list ( unrolled list, skip list etc)
                 3\. any other heap like Fibonacci heap, binomial heap

list = doubly linked list 

set = set based on AVL Tree ( usually ) 
      can implemented using any other binary balancing tree like 
      1\. Binary Search Tree
      2\. Red black Tree
      3\. Splay Tree

slist = single linked list

map = map based on Red Black Tree ( usually ) 
      where every node is 'pair' structure
      can implemented using any other binary balancing tree like 
      1\. Binary Search Tree
      2\. AVL Tree
      3\. Splay Tree

deque = deque

hash_set = set implemented using hash

hash_map = hash table

hash = 'Not Available', used as functor 
```

# python - ImportError：没有名为 pyqt_ui.qt_translator 的模块

> ID：11064649
> 
> 赞同：0
> 
> 时间：2012-06-16T15:15:11.437
> 
> 标签：python, packaging, py2app

我正在尝试使用 py2app 打包 python 应用程序（[Mnemosyne](http://mnemosyne-proj.org)）（我没有编写软件；我只是在尝试打包它）。

我已经用 py2app 构建了应用程序： `sudo python setup.py py2app`

并将 qt_menu.nib 目录复制到 Resources 目录中。

然后当我尝试启动应用程序时： `./dist/Mnemosyne.app/Contents/MacOS/Mnemosyne`

我收到此错误：

> ImportError：没有名为 pyqt_ui.qt_translator 的模块

我无法弄清楚要添加到“包含”中以确保包含 qt_translator。

我阅读了[PyQT 模块列表，](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/modules.html)但找不到获取 qt_translator 需要包含的模块。我了解到`QTranslator`QtCore 模块中有一个类，但包括`PyQt4.QtCore`没有帮助，`PyQt4*`.

代码中似乎导致这种情况的行是：

```
mnemosyne.components.insert(0,
                            ("mnemosyne.pyqt_ui.qt_translator",
                             "QtTranslator")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:49:02.513

您缺少的类是您下载 Mnemosyne[压缩包](http://sourceforge.net/projects/mnemosyne-proj/files/mnemosyne/mnemosyne-2.0/Mnemosyne-2.0.tar.gz/download)时下载的包的一部分，它位于文件夹 mnemosyne/pyqt_ui 文件名 qt_translator.py 您需要在终端中提取整个压缩包并 cd 进入它，然后使用 py2app。

# jquery - QuickFlip JQuery 插件

> ID：11064650
> 
> 赞同：0
> 
> 时间：2012-06-16T15:15:13.540
> 
> 标签：jquery

我正在使用 quicklfip ( [http://jonraasch.com/blog/quickflip-2-jquery-plugin](http://jonraasch.com/blog/quickflip-2-jquery-plugin) ) 作为汉字抽认卡。前面板将具有字符，后面板将具有定义。我遇到的问题是我想显示例句，但只有在后面板可见时才显示。似乎没有任何回调函数。任何 JQuery 专家对我如何做到这一点有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:36:07.923

每个页面都有一个带有回调的更新插件。您可以使用 onBefore 和/或仅通过内容进行操作：

[http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)

```
$("#flipbox").flip({
    direction:'tb',
    onBefore: function(){
            console.log('before starting the animation');
    },
    onAnimation: function(){
            console.log('in the middle of the animation');
    },
    onEnd: function(){
            console.log('when the animation has already ended');
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T04:04:45.980

经过一番头疼后，我终于想出了答案..它比我想象的要简单。我需要做的就是创建 2 个函数，如下所示：

```
function showExamples() {
            $('#examples').show();
        }
        function hideExamples() {
            $('#examples').hide();
        } 
```

然后`<a>`在卡片的每一面放置一个标签，不仅可以翻转卡片，还可以调用上述函数！像这样：

```
<a class="quickFlipCta" href="#" onclick="javascript:showExamples()">Click to flip</a> 
```

和

```
<a class="quickFlipCta" href="#" onclick="javascript:hideExamples()">Click to flip</a> 
```

任务完成！

# python - Django > 表单 > is_unique()

> ID：11064651
> 
> 赞同：1
> 
> 时间：2012-06-16T15:15:24.163
> 
> 标签：python, django

我的一张表格上有以下内容：

```
def is_unique(self,item):
    ln = self.cleaned_data['letter_name']
    # checking for duplicate letter names
    if (Letter.objects.filter(item=item,letter_name=ln)):
        return False
    else:
        return True 
```

有没有什么办法可以让我有一个函数`make_unique()`来检查它现在正在做的名字，但是如果存在一个例子`letter_name`，`_n`它会在.`_n``_01``_02``_03``letter_name`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:05:14.213

如果您从 is_unique 函数调用此函数，它应该可以工作。当它被调用时，我们已经知道至少有一个 letter_name。然后我们检查有多少以标记名开头的标记以及`_`通过使用startswith过滤创建的letter_name（我猜这只有`_`在未更改的letter_heads中才有效）。

```
def make_unique(self, item, ln):
    ln_count = Letter.objects.filter(item=item, letter__startswith=ln+'_').count() + 1
    unique_ln = "{ln}_{count}".format(ln = ln, count = ln_count)
    return unique_ln 
```

startswith 区分大小写，如果要使用不区分大小写，请使用 isstartswith。

# javascript - 选项，选择不同类型的css？

> ID：11064653
> 
> 赞同：-3
> 
> 时间：2012-06-16T15:15:41.573
> 
> 标签：javascript, html, css

所以基本上有一个选项可以选择用于网站的 CSS 样式表。它通常位于首页的一侧，可以最小化和最大化。它具有透明背景和一些彩色图表，还带有新设计的网站链接。是否有任何插件可以自动为我完成，还是我需要自己编写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:27:49.593

我不确定是否有某种插件，但这是一个想法。您可以包含所有样式表，并且只启用一个。

这是一种启用/禁用适用于所有浏览器的样式表的方法（取自[此答案](https://stackoverflow.com/a/965018/512507)）：

```
var styleSheets = document.styleSheets;
var href = 'http://yoursite.com/foo/bar/baz.css';
for (var i = 0; i < styleSheets.length; i++) {
    if (styleSheets[i].href == href) {
        styleSheets[i].disabled = true;
        break;
    }
} 
```

# ruby-on-rails - 运行 rails s 或 rails -v 时获取不安全的世界可写目录

> ID：11064656
> 
> 赞同：1
> 
> 时间：2012-06-16T15:15:47.357
> 
> 标签：ruby-on-rails, permissions, ruby-on-rails-3.2, zsh

我一直在关注[Ruby On Rails 教程](http://ruby.railstutorial.org/)`bundle exec..`，并尝试通过关注[本](http://www.youtube.com/watch?v=FZ-b9oZpCZY&feature=plcp)教程视频来摆脱对 Ruby 的需求。

但是，现在当我尝试运行类似`rails s`or的命令时`rails server`。我收到这个错误。

```
/Users/Keva161/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:211: warning: Insecure world writable dir /Users/Keva161/Documents/Web Design in PATH, mode 040777
/Users/Keva161/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:211: warning: Insecure world writable dir /Users/Keva161/Documents/Web Design in PATH, mode 040777 
```

有谁知道这个错误是什么以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:51:43.807

`/Users/Keva161/Documents/Web Design`确实是世界可写的，并且在您的 PATH 中；这意味着任何有权访问您的系统的人都可以在其中放置不受信任的程序/脚本，并且您冒着意外运行它们的风险。从截屏的第一部分（当他开始谈论 Guard 时我停止观看），我看不出有什么会导致这种情况的；最接近的是`chmod`命令，但我看不出即使是合理的错误输入也会修改您的`Web Design`目录。

无论如何，解决方法是更改​​该目录的权限，使其不是全局可写的，并且可以选择将其从您的`PATH`. 一个简单`chmod o-w "/Users/Keva161/Documents/Web Design"`的对于前者就足够了，但是您可能想在`-R`之后添加`chmod`它以将其应用于该目录下的所有目录。为了把它从你的. 文件中取出`PATH`，我假设你知道如何在你的 zsh 配置文件中执行它（我不使用 zsh，所以我不会给你一个 bash 答案，假设它仍然适用）。

# python - py2applet：找不到命令

> ID：11064657
> 
> 赞同：2
> 
> 时间：2012-06-16T15:15:48.703
> 
> 标签：python, py2app

我正在尝试使用 Py2App 创建一个 GUI Python 应用程序，但在运行设置脚本 py2applet 时遇到问题。

我已经通过 pip 安装了 py2app

```
$ sudo pip install py2app #this works ok 
```

然后，我尝试构建安装脚本：

```
$ py2applet --make-setup gui.py #this fails w/ no command found 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T15:38:38.300

尝试刷新 shell 的内存或尝试使用完整路径调用应用程序，看看是否有效。例如 /usr/bin/py2applet

您可以使用

```
sudo find / -name "py2applet" -type f 
```

不知道的可以找位置。

例如 bash 会使用 hash -r 命令来刷新自身。[http://ss64.com/bash/hash.html](http://ss64.com/bash/hash.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T10:55:01.380

找到可执行文件：

```
sudo find / -name "py2applet" -type f 
```

然后将其父目录添加到您的 PATH 环境变量中：

```
export PATH=$PATH:YOUR_PATH_HERE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-07T18:12:02.157

我在以下位置找到了命令：

蟒蛇 2.7

```
/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/bin/py2applet 
```

蟒蛇 3.7

```
/Users/development/Library/Python/3.7/bin/py2applet 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-22T23:56:08.553

顺便说一句，在正常操作中它应该在`/usr/local/bin/`

```
-rwxr-xr-x  1 admin  admin  296 21 Apr  2015 /usr/local/bin/py2applet 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-11T20:17:56.297

这在 Mac OS X 上对我有用：

```
$ sudo pip install py2app 
```

使用 pip 安装 py2app 后：

```
$ python /Users/user/site-packages/py2app/script_py2applet.py --make-setup MyApplication.py 
```

这与使用 py2applet 命令一样有效。如果 py2app 文件夹安装在其他位置，请确保包含完整目录。

# xamarin.android - Mono for Android：应用程序范围的主题

> ID：11064662
> 
> 赞同：1
> 
> 时间：2012-06-16T15:16:21.093
> 
> 标签：xamarin.android, android-theme

我是 Mono for Android（使用 MonoDevelop）和一般 Android 开发的新手。我想创建一个应用程序范围的主题。此主题只需将所有 EditText 字段的背景颜色设置为灰色（只是为了测试功能）。

在 Resources/values 文件夹中，我创建了 2 个文件：

样式.xml

```
<resources>
<style name="tstEditText" parent="android:style/Widget.EditText">
    <item name="android:background">#cccccc</item>
</style>
</resources> 
```

主题.xml

```
<resources>
<style name="MyApplicationTheme" parent="android:Theme">    
    <item name="android:editTextStyle">@style/txtEditText</item>
</style>
</resources> 
```

之后我修改了 ApplicationManifest.xml

```
<application android:label="MyApplication" android:theme="MyApplicationTheme"></application> 
```

当我尝试构建代码时，我收到以下错误消息：“**错误：不允许字符串类型（在 'theme' 处，值为 'MyApplicationTheme'）。** ” AndroidManifest.xml 中的第一个活动节点上引发错误MonoDevelop 在构建时生成。

显然我错过了一些东西，但我不知道......提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:37:52.830

在清单 XML 中，您需要像这样指定主题：

```
android:theme="@style/MyApplicationTheme" 
```

# c++ - ostream中的困难

> ID：11064663
> 
> 赞同：1
> 
> 时间：2012-06-16T15:16:21.310
> 
> 标签：c++, ostream

```
ostream& operator<<(ostream& os, const PT& p)
{
   os << "(" << p.x << "," << p.y << ")";
} 
```

`PT`是一个结构，`x`,`y`是它的成员。
有人可以解释一下上面的行到底是做什么的。无法使用 打印所需的文本`cout`？

我从[这个网站](http://stanford.edu/~liszt90/acm/notebook.html#file8)发现了这段代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T15:19:33.947

这[是](http://www.parashift.com/c++-faq-lite/operator-overloading.html)`operator<<`. _

这意味着你可以这样做：

```
PT p = ...;
std::cout << p << "\n"; 
```

或这个：

```
PT p = ...;
std::stringstream ss;
ss << p << "\n";
std::cout << ss; 
```

或许多其他有用的东西。

但是，应该注意，您引用的代码将无法正常工作。它需要返回`os`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:19:32.650

这提供了一种输出 PT 的方法。现在，您可以使用它：

```
PT p;
std::cout << p; 
```

这被翻译成调用

```
operator<< (std::cout, p); 
```

这与您的重载相匹配，因此它可以工作，在括号中打印 x 和 y 值，而用户的工作量更少。事实上，它不必是`cout`。它可以是任何“是” a `std::ostream`。有很多东西继承自它，这意味着它们也是`std::ostream`s ，所以这也适用于它们。`std::ofstream`，对于文件 I/O，就是一个例子。

您找到的样本没有做但应该做的一件事是`return os;`. 不这样做，你不能说`std::cout << p << '\n';`，因为打印的结果`p`不会返回`cout`给你用来打印换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T15:20:22.570

它允许 << 运算符将 PT 对象附加到流中。似乎该对象具有添加了逗号分隔符的元素 x 和 y。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T15:23:24.853

此运算符**<<**重载用于输出 PT 类的对象。

这里：

```
ostream& operator<<(ostream& os, const PT& p) 
```

第一个参数用于将附加**p的输出流。**它返回对**os的***引用*以进行如下链接：

 **```
cout << pt << " it was pt" << endl; 
```**

# objective-c - iPhone 应用程序保存状态 - nsmutableindexset 和 nsuintegers？

> ID：11064666
> 
> 赞同：0
> 
> 时间：2012-06-16T15:16:34.850
> 
> 标签：objective-c, ios, cocoa-touch, savestate

我是 Xcode 开发的新手，正在尝试保存我的应用程序的状态，该应用程序跟踪多个索引集、整数和字符串。我尝试了很多不同的代码，但无法将其保存到 .plist 中。`NSMutableIndexSets`保存以下数据类型的最佳方法是什么 `NSUIntegers`？任何方向都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:09:16.417

使用以下代码

```
//Saving
NSMutableIndexSet *set = [[NSMutableIndexSet alloc] init];

[set addIndex:1];
[set addIndex:2];

NSMutableArray *arrToSave = [[NSMutableArray alloc] init];

NSUInteger currentIndex = [set firstIndex];
while (currentIndex != NSNotFound)
{
    [arrToSave addObject:[NSNumber numberWithInt:currentIndex]];
    currentIndex = [set indexGreaterThanIndex:currentIndex];
}

NSMutableDictionary *dic = [[NSMutableDictionary alloc] init];
NSUInteger integer = 100;
NSString *savePath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/savePath.txt"];

[dic setValue:arrToSave forKey:@"set"];
[dic setValue:[NSNumber numberWithUnsignedInt:integer] forKey:@"int"];
[dic writeToFile:savePath atomically:YES];

//Loading
NSString *savePath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/savePath.txt"];
NSMutableDictionary *dic = [[NSMutableDictionary alloc] initWithContentsOfFile:savePath];

NSArray *arr = [dic valueForKey:@"set"];
NSMutableIndexSet *set = [[NSMutableIndexSet alloc] init];
[set addIndex:[[arr objectAtIndex:0] unsignedIntValue]];
[set addIndex:[[arr objectAtIndex:1] unsignedIntValue]];
NSUInteger integer = [[dic valueForKey:@"int"] unsignedIntValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:49:50.767

据我所知，您可以将一组项目列表归档到 plist 文件中。从记忆中（这意味着你应该在文档中查找）它是 NSString、NSArray、NSDictionary、NSData、NSNumber 和......我不记得的其他几个。关键是您的索引集可能不是其中之一，因此您需要将其转换为其他内容，将其存档并在唤醒时取消存档并重新转换回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T01:26:28.783

对您的问题的简短回答是您不能将索引集保存到 plist 或用户默认值。有一个非常简短的对象类型列表，您可以将它们写入 plist。在 Xcode 中查找 NSDictionary 类的文档，并搜索字符串“property list object”，这就是他们告诉您哪些对象可以写入正确列表的地方。对象类型是 NSString、NSData、NSDate、NSNumber、NSArray 或 NSDictionary 对象。

Omar Abdelhafith 发布了一个非常长且复杂的代码块，用于将索引集转换为数组，这应该可以工作。

然而，有一个更简单的方法。NSIndexSet 符合 NSCoding 协议，这意味着您可以通过一次调用将其转换为 NSData：

```
NSData *setData = [NSKeyedArchiver archivedDataWithRootObject: mySet]; 
```

并将其转回索引集：

```
NSIndexSet *setFromData= [NSKeyedUnarchiver unarchiveObjectWithData: setData];
NSMutableIndexSet *mutableSet = [setFromData mutableCopy]; 
```

请注意，对于所有这些方法，如果您从一个可变对象（集合、数组、字典等）开始，那么当您读回它时，您返回的对象将是一个不可变版本。您必须手动将其转换为可变版本。大多数具有可变变体的对象都支持 mutableCopy 方法。

# c++ - C++特征值/向量分解，只需要快速的前n个向量

> ID：11064670
> 
> 赞同：20
> 
> 时间：2012-06-16T15:17:02.503
> 
> 标签：c++, eigenvector

我有一个 ~3000x3000 类似协方差的矩阵，我在其上计算特征值 - 特征向量分解（它是一个 OpenCV 矩阵，我用来`cv::eigen()`完成工作）。

但是，我实际上只需要前 30 个特征值/向量，其余的我不关心。从理论上讲，这应该可以显着加快计算速度，对吧？我的意思是，这意味着它需要计算的特征向量少了 2970 个。

哪个 C++ 库允许我这样做？请注意，OpenCV 的`eigen()`方法确实有参数，但是文档说它们被忽略了，我自己测试过，它们确实被忽略了：D

***更新：*** 我设法用 ARPACK 做到了。我设法为 Windows 编译它，甚至使用它。结果看起来很有希望，可以在这个玩具示例中看到一个插图：

```
#include "ardsmat.h"
#include "ardssym.h"
int     n = 3;           // Dimension of the problem.
    double* EigVal = NULL;  // Eigenvalues.
    double* EigVec = NULL; // Eigenvectors stored sequentially.

    int lowerHalfElementCount = (n*n+n) / 2;
    //whole matrix:
    /*
    2  3  8
    3  9  -7
    8  -7 19
    */
    double* lower = new double[lowerHalfElementCount]; //lower half of the matrix
    //to be filled with COLUMN major (i.e. one column after the other, always starting from the diagonal element)
    lower[0] = 2; lower[1] = 3; lower[2] = 8; lower[3] = 9; lower[4] = -7; lower[5] = 19;
    //params: dimensions (i.e. width/height), array with values of the lower or upper half (sequentially, row major), 'L' or 'U' for upper or lower
    ARdsSymMatrix<double> mat(n, lower, 'L');

    // Defining the eigenvalue problem.
    int noOfEigVecValues = 2;
    //int maxIterations = 50000000;
    //ARluSymStdEig<double> dprob(noOfEigVecValues, mat, "LM", 0, 0.5, maxIterations);
    ARluSymStdEig<double> dprob(noOfEigVecValues, mat);

    // Finding eigenvalues and eigenvectors.

    int converged = dprob.EigenValVectors(EigVec, EigVal);
    for (int eigValIdx = 0; eigValIdx < noOfEigVecValues; eigValIdx++) {
        std::cout << "Eigenvalue: " << EigVal[eigValIdx] << "\nEigenvector: ";

        for (int i = 0; i < n; i++) {
            int idx = n*eigValIdx+i;
            std::cout << EigVec[idx] << " ";
        }
        std::cout << std::endl;
    } 
```

结果是：

```
9.4298, 24.24059 
```

对于特征值，和

```
-0.523207, -0.83446237, -0.17299346
0.273269, -0.356554, 0.893416 
```

分别为 2 个特征向量（每行一个特征向量） 代码无法找到 3 个特征向量（在这种情况下它只能找到 1-2，assert() 可以确保这一点，但是，这不是问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:05:18.060

在[本文](http://sifter.org/~simon/journal/20061211.html)中，Simon Funk 展示了一种简单有效的方法来估计一个非常大的矩阵的奇异值分解 (SVD)。在他的例子中，矩阵是稀疏的，尺寸为：17,000 x 500,000。

现在，看[这里](http://en.wikipedia.org/wiki/Singular_value_decomposition#Relation_to_eigenvalue_decomposition)，描述了特征值分解如何与 SVD 密切相关。因此，您可能会受益于 Simon Funk 方法的修改版本，尤其是在您的矩阵稀疏的情况下。此外，您的矩阵不仅是方形的，而且是对称的（如果这就是您所说的协方差的意思），这可能会导致额外的简化。

...只是一个想法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-11T09:25:54.543

看来[Spectra](https://spectralib.org/)会以良好的表现完成这项工作。

这是他们文档中的一个示例，用于计算密集对称矩阵 M 的 3 个第一个特征值（同样是您的协方差矩阵）：

```
#include <Eigen/Core>
#include <Spectra/SymEigsSolver.h>
// <Spectra/MatOp/DenseSymMatProd.h> is implicitly included
#include <iostream>
using namespace Spectra;
int main()
{
    // We are going to calculate the eigenvalues of M
    Eigen::MatrixXd A = Eigen::MatrixXd::Random(10, 10);
    Eigen::MatrixXd M = A + A.transpose();
    // Construct matrix operation object using the wrapper class DenseSymMatProd
    DenseSymMatProd<double> op(M);
    // Construct eigen solver object, requesting the largest three eigenvalues
    SymEigsSolver< double, LARGEST_ALGE, DenseSymMatProd<double> > eigs(&op, 3, 6);
    // Initialize and compute
    eigs.init();
    int nconv = eigs.compute();
    // Retrieve results
    Eigen::VectorXd evalues;
    if(eigs.info() == SUCCESSFUL)
        evalues = eigs.eigenvalues();
    std::cout << "Eigenvalues found:\n" << evalues << std::endl;
    return 0;
} 
```

# android - Android：使用 CSS 输入创建可绘制对象

> ID：11064673
> 
> 赞同：0
> 
> 时间：2012-06-16T15:17:05.670
> 
> 标签：android, css, drawable

我是 Android 新手，但不是 Java 新手。是否已经有一个小框架允许我使用 CSS 表以编程方式创建布局、自定义视图和可绘制对象，用于填充、边框等；就像 iOS 的 Nimbus/Three20 一样？

我们正在开发一个“App-Studio”，因此所有视图、列表等都是相当动态的，基于用户通过视觉样式模板编辑器创建的 CSS。

如果没有，您是否建议即时创建此类 Android 布局 xml 文件，然后从文件中加载它们，还是手动创建可绘制对象更好？我们不能只将这些文件烘焙到构建中，因为用户需要能够在设备上实时更改样式。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T18:46:37.743

部分回答：

```
And if not, would you recommend to create such Android layout xml files on the flyand then
load them from file, or is it better to create the drawables by hand ? 
```

我不认为您可以即时创建布局 xml 文件并将它们加载到正在运行的应用程序中。它们必须在编译应用程序之前创建。

Android 使用[Styles 和 Themes](http://developer.android.com/guide/topics/ui/themes.html)。阅读这些将帮助您生成一些可以在您的上下文中使用的常见模式。一旦你有了一些模式，你就可以在编译之前使用一些自动化工具来创建这些 xml（并避免手工编写它们......:)，有趣的计算机改变了手工的定义）。

# android - 在android中播放音频剪辑

> ID：11064676
> 
> 赞同：-2
> 
> 时间：2012-06-16T15:17:31.687
> 
> 标签：android

我正在开发一个教育软件。将有一个可用的字母网格视图。我希望它播放一个音频剪辑，当有人点击它时会显示字母表。你能告诉我怎么做吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:24:45.517

将您的声音文件放在资产文件夹中。使用 AssetManager 类检索声音文件。当您听到播放计数的点击时，创建 MediaPlayer 的实例并播放文件。

其中每一个都需要深入研究如何使用每个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:27:01.997

sound = MediaPlayer.create(Splash.this, R.raw.splashsound); 声音.start();

# android - 这是一个错误吗？点击一个元素可能会导致不同的元素接收键盘焦点

> ID：11064680
> 
> 赞同：2
> 
> 时间：2012-06-16T15:18:32.170
> 
> 标签：android, iphone, mobile-safari, touch-event, fennec

我试图弄清楚在 Mobile Safari、Android 浏览器和 Firefox for Android（“Fennec”）中看到的效果是错误还是预期行为。基本上，问题在于`<input>`元素可以在某些情况下接收键盘焦点，即使该`<input>`元素最初没有被用户点击。

这是一个可重现的测试用例：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width, user-scalable=no">
<style>
#screenCover {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: rgba(0, 0, 0, 0.3);
    z-index: 1;
}

#newItemInput {
    position: absolute;
    width: 200px;
    height: 20px;
}
</style>
</head>
<body>

<div id="screenCover"></div>
<input id="newItemInput" type="text">

<script type="text/javascript" language="JavaScript">
var screenCoverEl = document.getElementById("screenCover"),
    newItemInputEl = document.getElementById("newItemInput");

newItemInputEl.value = String(navigator.userAgent);

screenCoverEl.addEventListener("touchend", function (event) {
    // Move the <input> element in the way.
    newItemInputEl.style.top = (event.changedTouches[0].clientY - 10) + "px";
    newItemInputEl.style.left = (event.changedTouches[0].clientX - 10) + "px";

    // Hide the screen cover. Note that the screen cover was the original target of the tap.
    screenCoverEl.style.display = "none";
}, false);

newItemInputEl.addEventListener("click", function (event) {
    this.setSelectionRange(0, this.value.length);
}, false);
</script>
</body>
</html> 
```

[http://jsfiddle.net/f7TKc/2/](http://jsfiddle.net/f7TKc/2/)

或直接在移动浏览器中：

[http://fiddle.jshell.net/f7TKc/2/show/](http://fiddle.jshell.net/f7TKc/2/show/)

在此示例中，屏幕封面位于文档顶部，但在 上`touchend`，屏幕封面被隐藏，并且`<input>`元素被移动到用户点击屏幕封面的位置。在 Mobile Safari、Android 浏览器和 Fennec 13.0b1 中，该`<input>`元素莫名其妙地获得了键盘焦点。

我无法在较新版本的 Fennec 中对此进行测试，因为它在模拟器中崩溃。

这是错误还是预期行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:23:51.497

是的，我认为这是一个错误，这可能在同一行： [http](http://code.google.com/p/android/issues/detail?id=6721) ://code.google.com/p/android/issues/detail?id=6721如果是这样，那么该链接有一些解决方法其他人都试过了，你可以试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:09:10.640

触摸事件按以下顺序调用：touchstart、touchend、click。您需要知道您的触摸事件的 touchstart 是否发生在您的输入上。您可以隐式声明一个对象变量（这在 javascript 中是允许的）并将其初始化为 false。在 touchstart 事件中将其设置为 true。然后检查它在 touchend 和/或点击事件中的值。以下代码完全按预期工作。

```
 <script type="text/javascript" language="JavaScript">
    var screenCoverEl = document.getElementById("screenCover"),
    newItemInputEl = document.getElementById("newItemInput");

newItemInputEl.value = String(navigator.userAgent);

screenCoverEl.addEventListener("touchstart", function (event) {
    // Move the <input> element in the way.

    screenCoverEl.style.display = "none";

    newItemInputEl.style.top = (event.touches[0].clientY - 10) + "px";
    newItemInputEl.style.left = (event.touches[0].clientX - 10) + "px";

    // Hide the screen cover. Note that the screen cover was the original target of the tap.

}, false);

newItemInputEl.touchStartedHere = false; // remember if a touch event started on this input
newItemInputEl.addEventListener("touchstart", function (event) {

    this.touchStartedHere = true; //set true if did..

}, false);
newItemInputEl.addEventListener("click", function (event) {

    if(this.touchStartedHere){ // do what you want if touch started here
        this.setSelectionRange(0, this.value.length);  
    }else{  // prevent from receiving focus if touch didn't start here.
        this.blur();
    }
    this.touchStartedHere = false;  // reset to false to prepare for next touch event.

}, false);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T09:35:51.607

我想这是预期的行为。

移动网络浏览器的开发人员需要为小显示器上设计不佳的网页做出特殊调整。

如果网页无法正确缩放，则 UI 元素很容易被另一层覆盖。

允许点击事件通过层向下传播将防止 UI 元素不可用。

我没有任何文件来支持这个理论。

- - - 编辑 - - - -

在玩弄了您的代码之后，我意识到屏幕覆盖已被删除，并且输入被移动到“touchstart”处的触摸位置。然后输入在“touchend”处获得焦点。

您可以通过在输入移动之前设置延迟来验证这一点。如果您的手指在输入之前已经移开，它将不会获得焦点。如果移动输入时您仍在触摸屏幕，它将获得焦点。

```
screenCoverEl.addEventListener("touchstart", function (event) {

screenCoverEl.style.display = "none";
setTimeout(function() {
        newItemInputEl.style.top = (event.touches[0].clientY - 10) + "px";
        newItemInputEl.style.left = (event.touches[0].clientX - 10) + "px";
    },250);

}, false); 
```

# sql - 在非连续范围内查找开始日期和结束日期

> ID：11064681
> 
> 赞同：2
> 
> 时间：2012-06-16T15:18:41.073
> 
> 标签：sql, tsql, sql-server-2005

我需要找到定义为范围的开始和结束日期：开始日期是第一个日期，结束日期是第一个日期，后续日期是结束日期后两个月或更长时间。可以有多个可能的范围

我有一个表结构，如：

```
ID        int  identity(1,1),
fk_ID     char(9),
dateField datetime 
```

数据如下：

```
1     a     2012-01-01
2     a     2012-01-05
3     a     2012-01-12
4     b     2012-02-01
5     a     2012-04-01
6     b     2012-05-01
7     a     2012-05-30 
```

预期的输出如下所示：

```
fk_id    startdate    enddate
a        2012-01-01   2012-01-12
a        2012-04-01   2012-05-30
b        2012-02-01   2012-02-01
b        2012-05-01   null 
```

编辑：通过执行以下操作：

```
CREATE TABLE #temp
(
    autonum     int     identity(1,1),
    id          char(9),
    sd          datetime
)

insert into #temp (id, sd) values ('a', '2012-01-01')
insert into #temp (id, sd) values ('a', '2012-01-05')
insert into #temp (id, sd) values ('a', '2012-01-12')
insert into #temp (id, sd) values ('a', '2012-03-01')
insert into #temp (id, sd) values ('a', '2012-04-03')
insert into #temp (id, sd) values ('a', '2012-06-06')
insert into #temp (id, sd) values ('b', '2012-02-12')
insert into #temp (id, sd) values ('b', '2012-02-15')
insert into #temp (id, sd) values ('b', '2012-03-01')
insert into #temp (id, sd) values ('b', '2012-04-03')
insert into #temp (id, sd) values ('b', '2012-06-01')

select t1.id, null as previousend, min(t1.sd) as nextstart
from #temp t1
group by t1.id
union
select t1.id, t1.sd as enddate, (select min(t2.sd) from #temp t2 where t1.id=t2.id and    t2.sd>t1.sd) as nextstart
from #temp t1
where (select min(t2.sd) from #temp t2 where t1.id=t2.id and t2.sd>t1.sd) >= dateadd(month, 2, t1.sd)
union
select t1.id, max(t1.sd), null
from #temp t1
group by t1.id

drop table #temp 
```

我可以得到这样的输出：

```
id        previousend             nextstart
--------- ----------------------- -----------------------
a         NULL                    2012-01-01 00:00:00.000
a         2012-04-03 00:00:00.000 2012-06-06 00:00:00.000
a         2012-06-06 00:00:00.000 NULL
b         NULL                    2012-02-12 00:00:00.000
b         2012-06-01 00:00:00.000 NULL 
```

这非常接近，但理想情况下，该范围的开始日期和结束日期将在行上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:45:21.773

考虑到问题的所有变化，这是我最好的猜测。我仍然觉得这个问题非常混乱、分裂，而且这两种情况的预期结果似乎不匹配。使用此查询：

```
;WITH x AS 
(
  SELECT a.id, sd = a.sd, ed = b.sd, rn1 = ROW_NUMBER() OVER 
    (PARTITION BY a.id, a.sd ORDER BY a.sd)
  FROM #temp AS a
  LEFT OUTER JOIN #temp AS b
  ON a.id = b.id
  AND b.sd >= a.sd
  AND b.sd <= DATEADD(MONTH, 2, a.sd)
),
y AS 
(SELECT id, sd, 
  ed = (SELECT MAX(ed) FROM x AS x2 
    WHERE x.id = x2.id AND x2.sd <= DATEADD(MONTH, 2, x.sd)
  )
FROM x
WHERE rn1 = 1
),
z AS 
(
  SELECT id, sd = MIN(sd), ed
  FROM y GROUP BY id, ed
)
SELECT id, sd, ed /* = CASE 
  WHEN ed > sd OR (sd = ed AND NOT EXISTS 
  (SELECT 1 FROM z AS z2 WHERE z2.id = z.id AND z.sd > z2.sd)) THEN ed END 
*/
FROM z
ORDER BY id, sd; 
```

第一组数据的结果：

```
INSERT #temp (id, sd) VALUES
('a','2012-01-01'),
('a','2012-01-05'),
('a','2012-01-12'),
('b','2012-02-01'),
('a','2012-04-01'),
('b','2012-05-01'),
('a','2012-05-30'); 
```

如下：

```
id  sd          ed
a   2012-01-01  2012-01-12
a   2012-04-01  2012-05-30
b   2012-02-01  2012-02-01
b   2012-05-01  2012-05-01 
```

对于第二组：

```
insert into #temp (id, sd) values ('a', '2012-01-01')
insert into #temp (id, sd) values ('a', '2012-01-05')
insert into #temp (id, sd) values ('a', '2012-01-12')
insert into #temp (id, sd) values ('a', '2012-03-01')
insert into #temp (id, sd) values ('a', '2012-04-03')
insert into #temp (id, sd) values ('a', '2012-06-06')
insert into #temp (id, sd) values ('b', '2012-02-12')
insert into #temp (id, sd) values ('b', '2012-02-15')
insert into #temp (id, sd) values ('b', '2012-03-01')
insert into #temp (id, sd) values ('b', '2012-04-03')
insert into #temp (id, sd) values ('b', '2012-06-01') 
```

如下：

```
id  sd          ed
a   2012-01-01  2012-04-03
a   2012-06-06  2012-06-06
b   2012-02-12  2012-06-01 
```

如果取消注释 CASE 块，您将在开始日期和结束日期相同的结束日期获得 NULL。正如我多次建议的那样，你的问题是分裂的，你想要的结果似乎不匹配，所以我不确定正确的答案是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:32:22.330

[在Fiddle](http://sqlfiddle.com/#!3/ec93c/1)上的第二次尝试远非优雅，但似乎除了最终记录在结束日期不为 NULL 之外还有效：

```
CREATE TABLE temp
(
    id          char(9),
    d          datetime
);

insert into temp (id, d) values ('a', '2012-01-01');
insert into temp (id, d) values ('a', '2012-01-05');
insert into temp (id, d) values ('a', '2012-01-12');
insert into temp (id, d) values ('a', '2012-04-01');
insert into temp (id, d) values ('a', '2012-05-30');
insert into temp (id, d) values ('b', '2012-02-01');
insert into temp (id, d) values ('b', '2012-05-01');

SELECT 
   x.id ,
   min(x.sd) sd ,
   x.ed
FROM
  (SELECT 
      a.id ,
      a.sd ,
      max(a.ed) ed
   FROM
      ( 
      SELECT 
          j.id ,
          j.d sd ,
          q.D ed
       FROM temp j
          JOIN temp q 
             ON 
             j.id = q.id
             AND j.d <= q.d
       GROUP BY j.id ,
           j.d ,
           q.d 
      ) a
   WHERE datediff(m,a.sd,a.ed)<=2
   GROUP BY a.id ,
        a.sd
         )x
GROUP BY x.id ,
         x.ed
ORDER BY x.id ,
         min(x.sd) ,
         x.ed 
```

# tridion - 如何在 tridion 站点中创建搜索控件？

> ID：11064684
> 
> 赞同：-3
> 
> 时间：2012-06-16T15:18:59.933
> 
> 标签：tridion

我已经创建了一个 tridion 网站，现在我想添加一些搜索控件，例如 Google 自定义搜索，是否有 tridion 提供的相同选项？

我的选择：我必须创建一个用户控件并在其中实现 Google 自定义搜索，然后在我的页面上呈现它。或任何其他方法会更好。

搜索控件（包含文本框和一个搜索按钮）应该能够搜索文本。
搜索结果应该像搜索引擎一样格式化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:39:00.700

当您说 Google 时，您指的是 Google Search Appliance (GSA) 吗？

假设是这种情况：您似乎已经使用 XSLT 做了很多工作，所以在我看来，最简单的方法是让您的用户控件使用相关查询调用 GSA 的 XML API，并简单地转换响应使用 XSLT。这样可以避免在需要更改布局时重新编译控件，并且可以从 Tridion 发布 XSLT。

我使用以下 XSLT 在此页面[http://medicine.yale.edu/search.aspx?q=test&x=0&y=0&site=YSM_School_of_Medicine上生成搜索结果](http://medicine.yale.edu/search.aspx?q=test&x=0&y=0&site=YSM_School_of_Medicine)

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="html" omit-xml-declaration="yes"/>
    <xsl:param name="SITE_CATALOG"/>
    <xsl:param name="SITE_NAME"/>   
    <xsl:param name="MAX_PAGES_IN_NAVIGATION">10</xsl:param>
    <xsl:param name="TOTALNUMBER" select="/GSP/RES/M"/>
    <xsl:param name="QUERY" select="/GSP/PARAM[@name='q']/@value"/>
    <xsl:param name="SEARCHED_SITE_CATALOG" select="/GSP/PARAM[@name='site']/@value"/>
    <xsl:template match="/">
        <xsl:variable name="STARTNUMBER" select="/GSP/RES/@SN"/>
        <xsl:variable name="ENDNUMBER" select="/GSP/RES/@EN"/>
        <xsl:variable name="TIMER" select="/GSP/TM"/>
        <!--begin search results -->
        <div class="google-search-form bordered-box shaded-f5 padded-20">
            <xsl:call-template name="WriteSearchForm"/>
        </div>
        <xsl:if test="/GSP/Spelling">
            <p>Did you mean <a href="?q={/GSP/Spelling/Suggestion/@q}&amp;site={/GSP/PARAM[@name='site']/@value}">
                    <xsl:value-of select="/GSP/Spelling/Suggestion/@q"/>
                </a>?</p>
        </xsl:if>
        <div id="search-results-pagination">

            <xsl:for-each select="/GSP/RES/R">
                <xsl:choose>
                    <xsl:when test="@L='2'">
                        <div class="grouped-search-result">
                            <h4>
                                <a href="{U}">
                                    <xsl:value-of select="T" disable-output-escaping="yes"/>
                                </a>
                            </h4>
                            <p class="search-result-body">
                                <xsl:value-of select="S" disable-output-escaping="yes"/>
                            </p>
                            <p class="gray95">
                                <span class="green">
                                    <xsl:choose>
                                        <xsl:when test="string-length(U) &gt; 88">
                                            <xsl:value-of select="substring(U, 0, 88)"/>...
                                        </xsl:when>
                                        <xsl:otherwise>
                                            <xsl:value-of select="U"/>
                                        </xsl:otherwise>

                                    </xsl:choose>
                                </span>
                            </p>

                            <p>
                                <a href="?as_sitesearch={HN/@U}&amp;q={$QUERY}&amp;site={$SITE_CATALOG}" class="more-results-link">
                                    [ <span>
                                        More results from <xsl:value-of select="HN/@U"/>
                                    </span> ]
                                </a>
                            </p>
                        </div>
                    </xsl:when>
                    <xsl:otherwise>
                        <div class="pagination-element search-result">
                            <h4><a href="{U}">

                                    <xsl:call-template name="WriteMimeTypeIndicator">
                                        <xsl:with-param name="RESULT" select="."/>
                                    </xsl:call-template>
                                    <xsl:value-of select="T" disable-output-escaping="yes"/>

                            </a></h4>
                            <p class="search-result-body">
                                <xsl:value-of select="S" disable-output-escaping="yes"/>
                            </p>
                            <p>
                                <span class="green">
                                    <xsl:choose>
                                        <xsl:when test="string-length(U) &gt; 92">
                                            <xsl:value-of select="substring(U, 0, 92)"/>...
                                        </xsl:when>
                                        <xsl:otherwise>
                                            <xsl:value-of select="U"/>
                                        </xsl:otherwise>

                                    </xsl:choose>

                                </span> - <xsl:value-of select="HAS/C/@SZ"/>
                            </p>
                        </div>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:for-each>
        </div>
        <hr class="dashed" />

<xsl:call-template name="WritePageNavigation"/>
        <!--<div id="pagination-controls" class="pagination-controls float-rt"></div>-->

        <!-- end pagination-controls -->

        <div class="results-footer-notes">

            <p class="small-gray95">Note: This search service may return results that are not approved by Yale University, or results that may not reflect the official views of Yale University.</p>

        </div>

        <div class="clear"></div>

        <div class="google-search-form bordered-box shaded-f5 padded-20 big-margin-top">
            <xsl:call-template name="WriteSearchForm"/>
        </div>
        <!-- end search results -->
    </xsl:template>
    <xsl:template name="WritePageNavigation">
        <xsl:variable name="RESULTS_ON_THIS_PAGE" select="count(/GSP/RES/R)"/>
        <xsl:variable name="TOTAL_RESULT_COUNT" select="/GSP/RES/M"/>
        <xsl:variable name="TOTAL_PAGES" select="ceiling($TOTAL_RESULT_COUNT div $RESULTS_ON_THIS_PAGE)"/>
        <xsl:variable name="CURRENT_PAGE" select="floor((/GSP/RES/@SN) div $RESULTS_ON_THIS_PAGE) + 1"/>
        <xsl:variable name="START_RESULT" select="/GSP/RES/@SN"/>
        <!--

    Results On This Page: <xsl:value-of select="$RESULTS_ON_THIS_PAGE"/>
        <br/>
    Total Results: <xsl:value-of select="$TOTAL_RESULT_COUNT"/>
        <br/>
    Total Pages: <xsl:value-of select="$TOTAL_PAGES"/>
        <br/>
    Current Page: <xsl:value-of select="$CURRENT_PAGE"/>
        <br/>
    Start Result: <xsl:value-of select="$START_RESULT"/>
        <br/>
    Start Navigation Page: <xsl:value-of select="$CURRENT_PAGE - ($MAX_PAGES_IN_NAVIGATION div 2)"/>
-->
        <xsl:if test="$TOTAL_PAGES &gt; 1">
            <ul class="google-search-pagination">

                <xsl:if test="$CURRENT_PAGE &gt; 1">
                    <li class="pagination-previous">
                        <a href="?q={/GSP/PARAM[@name='q']/@value}&amp;start={($CURRENT_PAGE - 2)*$RESULTS_ON_THIS_PAGE}&amp;site={/GSP/PARAM[@name='site']/@value}">Previous</a>
                    </li>
                </xsl:if>

                <xsl:call-template name="WritePaging">
                    <xsl:with-param name="CURRENT_PAGE" select="$CURRENT_PAGE"/>
                    <xsl:with-param name="NEXT_PAGE_START" select="$RESULTS_ON_THIS_PAGE + 1"/>
                    <xsl:with-param name="TOTAL_RESULTS" select="$TOTAL_RESULT_COUNT"/>
                    <xsl:with-param name="RESULTS_ON_PAGE" select="$RESULTS_ON_THIS_PAGE"/>
                    <xsl:with-param name="START_PAGE">
                        <xsl:choose>
                            <xsl:when test="($CURRENT_PAGE - ($MAX_PAGES_IN_NAVIGATION div 2)) &gt; 0">
                                <xsl:value-of select="$CURRENT_PAGE - ($MAX_PAGES_IN_NAVIGATION div 2)"/>
                            </xsl:when>
                            <xsl:otherwise>1</xsl:otherwise>
                        </xsl:choose>
                    </xsl:with-param>
                    <xsl:with-param name="END_PAGE">
                        <xsl:choose>
                            <xsl:when test="($CURRENT_PAGE - ($MAX_PAGES_IN_NAVIGATION div 2)) &gt; 0">
                                <xsl:value-of select="$MAX_PAGES_IN_NAVIGATION + $CURRENT_PAGE - floor($MAX_PAGES_IN_NAVIGATION div 2) - 1"/>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="$MAX_PAGES_IN_NAVIGATION"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:with-param>
                </xsl:call-template>

                <li class="pagination-next">
                    <a href="?q={/GSP/PARAM[@name='q']/@value}&amp;start={($CURRENT_PAGE)*$RESULTS_ON_THIS_PAGE}&amp;site={/GSP/PARAM[@name='site']/@value}">Next</a>
                </li>

            </ul>
        </xsl:if>
    </xsl:template>
    <xsl:template name="WritePaging">
        <xsl:param name="NEXT_PAGE_START"/>
        <xsl:param name="RESULTS_ON_PAGE"/>
        <xsl:param name="TOTAL_RESULTS"/>
        <xsl:param name="CURRENT_PAGE"/>
        <xsl:param name="START_PAGE"/>
        <xsl:param name="END_PAGE"/>
<!--
        NEXT_PAGE_START: <xsl:value-of select="$NEXT_PAGE_START"/><br/>
        RESULTS_ON_PAGE: <xsl:value-of select="$RESULTS_ON_PAGE"/><br/>
        TOTAL_RESULTS: <xsl:value-of select="$TOTAL_RESULTS"/><br/>
        CURRENT_PAGE: <xsl:value-of select="$CURRENT_PAGE"/><br/>
        START_PAGE: <xsl:value-of select="$START_PAGE"/><br/>
        END_PAGE: <xsl:value-of select="$END_PAGE"/><br/>
-->

        <li>
            <xsl:if test="$CURRENT_PAGE = $START_PAGE">
                <xsl:attribute name="class">selected</xsl:attribute>
                <a href="#">
                    <xsl:value-of select="$START_PAGE"/>
                </a>
            </xsl:if>
            <xsl:if test="$CURRENT_PAGE != $START_PAGE">
                <a href="?q={/GSP/PARAM[@name='q']/@value}&amp;start={($START_PAGE - 1)*$RESULTS_ON_PAGE}&amp;site={/GSP/PARAM[@name='site']/@value}">
                    <xsl:value-of select="$START_PAGE"/>
                </a>
            </xsl:if>
        </li>

        <xsl:if test="$START_PAGE &lt; $END_PAGE">
            <xsl:if test="$NEXT_PAGE_START &lt; $TOTAL_RESULTS">
                <xsl:call-template name="WritePaging">
                    <xsl:with-param name="NEXT_PAGE_START" select="$NEXT_PAGE_START + $RESULTS_ON_PAGE"/>
                    <xsl:with-param name="TOTAL_RESULTS" select="$TOTAL_RESULTS"/>
                    <xsl:with-param name="RESULTS_ON_PAGE" select="$RESULTS_ON_PAGE"/>
                    <xsl:with-param name="START_PAGE" select="$START_PAGE + 1"/>
                    <xsl:with-param name="CURRENT_PAGE" select="$CURRENT_PAGE"/>
                    <xsl:with-param name="END_PAGE" select="$END_PAGE"/>
                </xsl:call-template>
            </xsl:if>
        </xsl:if>
    </xsl:template>
    <xsl:template name="WriteSearchForm">
        <form name="gs" method="GET" action="#">
            <p class="wrapper">
                <input type="text" name="q" maxlength="256" value="{$QUERY}" class="google-search-keywords"/>
                <select name="site" class="google-search-site">
                    <option value="{$SITE_CATALOG}">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = $SITE_CATALOG">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        <xsl:value-of select="$SITE_NAME" disable-output-escaping="yes"/>
                    </option>
                    <option value="Yale_University">---------------</option>
                    <option value="YSM_School_of_Medicine">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = 'YSM_School_of_Medicine'">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        School of Medicine
                    </option>
                    <option value="Yale_Medical_Group">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = 'Yale_Medical_Group'">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        Yale Medical Group
                    </option>
                    <option value="Yale_New_Haven_Hospital">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = 'Yale_New_Haven_Hospital'">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        Yale-New Haven Hospital
                    </option>
                    <option value="Medical_Center">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = 'Medical_Center'">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        Medical Center (all)
                    </option>
                    <option value="Medical_Library">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = 'Medical_Library'">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        Medical Library
                    </option>
                    <option value="Yale_University">---------------</option>
                    <option value="Yale_Libraries">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = 'Yale_Libraries'">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        Yale Libraries
                    </option>
                    <option value="Finance_and_Administration">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = 'Finance_and_Administration'">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        Finance &amp; Admin
                    </option>
                    <option value="Human_Resources">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = 'Human_Resources'">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        Human Resources
                    </option>
                    <option value="ITS">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = 'ITS'">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        Information Technology
                    </option>
                    <option value="Yale_University">
                        <xsl:if test="$SEARCHED_SITE_CATALOG = 'Yale_University'">
                            <xsl:attribute name="selected">true</xsl:attribute>
                        </xsl:if>
                        Yale University
                    </option>
                </select>
                <button type="submit" value="submit" class="google-search-button theme-background">
                    <img src="/files/images/button_search_icon_translucent_sm.png" />Google Search
                </button>
            </p>
            <p class="no-space-bottom float-rt" style="margin-right:50px;">
                <a href="http://www.yale.edu/its/web/search/tips.html" class="search-tips">
                    <img src="/files/images/icon_question.gif" alt="" style="vertical-align:middle" />&#160;Search Tips
                </a>
            </p>

            <p class="no-space-bottom gray95">
                Results <span class="green">
                    <xsl:value-of select="/GSP/RES/@SN"/>
                </span> - <span class="green">
                    <xsl:value-of select="/GSP/RES/@EN"/>
                </span> of about <span class="green"><xsl:value-of select="$TOTALNUMBER"/></span> for <strong><xsl:value-of select="$QUERY"/></strong>
            </p>

        </form>
    </xsl:template>
    <xsl:template name="WriteMimeTypeIndicator">
        <xsl:param name="RESULT"/>
        <xsl:choose>
            <xsl:when test="not($RESULT/@MIME)"></xsl:when>
            <xsl:when test="$RESULT/@MIME = 'application/msword'">[DOC] </xsl:when>
            <xsl:when test="$RESULT/@MIME = 'application/octet-stream'">TEST OPTIONS</xsl:when>
            <xsl:when test="$RESULT/@MIME = 'application/pdf'">[PDF] </xsl:when>
            <xsl:otherwise>TODO:<xsl:value-of select="$RESULT/@MIME"/></xsl:otherwise>
        </xsl:choose>

    </xsl:template>
</xsl:stylesheet> 
```

# css - Meteor margin-bottom with bootstrap

> ID：11064690
> 
> 赞同：1
> 
> 时间：2012-06-16T15:19:55.580
> 
> 标签：css, twitter-bootstrap, meteor

我正在使用带有引导程序包的流星。（这是我的问题所在的一大段代码）

```
<div class="input-prepend"> 
    <span class="add-on">@</span>
    <input class="span2" id="prependedInput" size="16" type="text">
</div> 
```

这就是它最终的样子

![在此处输入图像描述](../Images/6992b9507fee6f7b9515be869b90a72e.png)

经过检查，我发现`margin-bottom : 9px`导致问题的文本字段上有一个

为什么会发生这种情况，9px 边距来自引导 css。Meteor`<!DOCTYPE html>`无论如何都会添加标签，所以它不应该是这样的。我可以通过强制覆盖样式来解决此问题，但我不明白为什么将 margin-bottom 添加到 css 文件本身中。它有功能吗？

*编辑*它在较新的引导程序中修复。我从 2.0.2 手动更新了引导程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T23:38:00.957

如果有人遇到这个问题，

问题不在于流星，它使用引导程序（2.0.2）通过使用新的引导程序文件更改 /usr/local/meteor/packages 中的文件来手动更新它（确保只更新已经存在的文件） .

我相信这将在更新版本的流星中修复，因为它会更新到最新的引导程序

# java - Spring webmvc链接viewresolvers给出了BeanNotOfRequiredTypeException

> ID：11064691
> 
> 赞同：0
> 
> 时间：2012-06-16T15:20:01.593
> 
> 标签：java, spring

我有一个简单的（示例）Web 应用程序，如果我尝试链接多个视图解析器，我会遇到问题。当我的应用程序按照下面描述的方式配置时，尝试访问`http://localhost:8080/Library/spring/initApplication`会抛出下面描述的错误。

似乎 InitApplication 被错误的视图解析器错误地拾取。如果我更改视图解析器的顺序一切正常，但我仍然想知道为什么会发生此错误，因为我无法确定它发生的原因。我猜是配置问题？

```
26027 ["http-bio-8080"-exec-6] DEBUG org.springframework.web.servlet.DispatcherServlet  - Could not complete request
org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'initApplication' must be of type [org.springframework.web.servlet.View], but was actually of type [library.controller.InitApplication]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:349)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:266)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079)
    at org.springframework.web.servlet.view.ResourceBundleViewResolver.loadView(ResourceBundleViewResolver.java:196)
    at org.springframework.web.servlet.view.AbstractCachingViewResolver.createView(AbstractCachingViewResolver.java:158)
    at org.springframework.web.servlet.view.AbstractCachingViewResolver.resolveViewName(AbstractCachingViewResolver.java:77)
    at org.springframework.web.servlet.DispatcherServlet.resolveViewName(DispatcherServlet.java:1078) 
```

重要文件的详细信息：InitApplication.java

```
@Controller
public class InitApplication {

    @RequestMapping(value = "/initApplication", method = RequestMethod.GET)
etc....... 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>testwebproj</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>springmvc</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>springmvc</servlet-name>
        <url-pattern>/spring/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

springmvc-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"

    xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <bean id="jspViewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="order" value="2" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost/library" />
        <property name="username" value="root" />
        <!-- <property name="password" value="" /> -->
    </bean>

    <bean id="myEmf"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="jpaDialect" ref="jpaDialect" />
    </bean>

    <bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="myEmf" />
    </bean>

<bean id="pdfViewResolver"
        class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
        <property name="order" value="1" />
        <property name="basename" value="views" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />
<context:component-scan base-package="library"></context:component-scan>
</beans> 
```

视图.属性

```
pdfPrinter.(class)=library.controller.DummyController 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T18:37:37.050

这肯定是因为您正在将您的视图与控制器同学映射！

```
pdfPrinter.(class)= you should indicate a View class here! 
```

例如，要将控制器映射到 jsp 视图，您需要像这样进行：

```
login.(class)=org.springframework.web.servlet.view.JstlView
login.url=/vues/en/login.jsp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:09:19.030

你试过重命名你的bean吗？您可能正在破坏 spring 使用的内部 bean

# ruby-on-rails - 运行rails服务器的问题

> ID：11064693
> 
> 赞同：1
> 
> 时间：2012-06-16T15:20:07.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem

我尝试安装 gem draper，它要求我将我的 activerecord 更新到版本 3.2.6。完成它我已经成功安装了 draper，但是现在当我使用 rails 服务器运行我的 web 应用程序时，它给了我这个错误：

/var/lib/gems/1.9.1/gems/bundler-1.0.21/lib/bundler/runtime.rb:31:in `block in setup':**你已经激活了 multi_json 1.3.6 ，但是你的 Gemfile 需要 multi_json 1.3.5。使用 bundle exec 可以解决这个问题。**

我使用 aptana studio 3

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:20:53.263

首先，确保您`bundle update`在更改 Gemfile 后已经运行。

然后，您需要按照错误消息中的说明操作并使用`bundle exec`，它使用 Gemfile.lock 中的 gem，而不是安装在服务器上的 gem。

所以运行这个：

```
bundle exec rails s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:29:42.557

请尝试运行：

```
bundle install 
```

# php - 为什么 preg_match 不起作用？

> ID：11064698
> 
> 赞同：4
> 
> 时间：2012-06-16T15:20:26.240
> 
> 标签：php, regex, preg-match

自从“ereg”贬值后，我开始使用“preg_match”。不幸的是，在我的代码中，它不接受我的有效电子邮件地址。我确定我正在使用的这个正则表达式正在工作，但我正在寻找的是执行此功能的替代方法或指出我做错了什么。

这是我的功能：

```
function validate($email){
  $regex = "^((([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|/|=|\?|\^|_|`|\{|\||\}|~)+(\.([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|/|=|\?|\^|_|`|\{|\||\}|~)+)*)@((((([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.))*([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.(af|ax|al|dz|as|ad|ao|ai|aq|ag|ar|am|aw|au|at|az|bs|bh|bd|bb|by|be|bz|bj|bm|bt|bo|ba|bw|bv|br|io|bn|bg|bf|bi|kh|cm|ca|cv|ky|cf|td|cl|cn|cx|cc|co|km|cg|cd|ck|cr|ci|hr|cu|cy|cz|dk|dj|dm|do|ec|eg|sv|gq|er|ee|et|fk|fo|fj|fi|fr|gf|pf|tf|ga|gm|ge|de|gh|gi|gr|gl|gd|gp|gu|gt| gg|gn|gw|gy|ht|hm|va|hn|hk|hu|is|in|id|ir|iq|ie|im|il|it|jm|jp|je|jo|kz|ke|ki|kp|kr|kw|kg|la|lv|lb|ls|lr|ly|li|lt|lu|mo|mk|mg|mw|my|mv|ml|mt|mh|mq|mr|mu|yt|mx|fm|md|mc|mn|ms|ma|mz|mm|na|nr|np|nl|an|nc|nz|ni|ne|ng|nu|nf|mp|no|om|pk|pw|ps|pa|pg|py|pe|ph|pn|pl|pt|pr|qa|re|ro|ru|rw|sh|kn|lc|pm|vc|ws|sm|st|sa|sn|cs|sc|sl|sg|sk|si|sb|so|za|gs|es|lk|sd|sr|sj|sz|se|ch|sy|tw|tj|tz|th|tl|tg|tk|to|tt|tn|tr|tm|tc|tv|ug|ua|ae|gb|us|um|uy|uz|vu|ve|vn|vg|vi|wf|eh|ye|zm|zw|com|edu|gov|int|mil|net|org|biz|info|name|pro|aero|coop|museum|arpa))|(((([0-9]){1,3}\.){3}([0-9]){1,3}))|(\[((([0-9]){1,3}\.){3}([0-9]){1,3})\])))$";
  if (preg_match($regex, $email)) { 
      return true;
  } else {
      return false;
  }
} 
```

这是我对函数做出反应的代码。

```
if (validate($email) == false){
  $_SESSION['error'] = "You have an invalid email!<br /><br />";
  header("Location: contact.php");
  die;
} 
```

当我运行此代码时，它会显示以下错误消息：

```
Warning: preg_match() [function.preg-match]: No ending delimiter '^' found in C:\xampp\htdocs\2012\Next\inc\functions.php on line 11 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T15:23:48.193

您的正则表达式模式需要分隔符：

```
function validate($email){
  $regex = "/...your pattern.../";
  if (preg_match($regex, $email)) { 
      return true;
  } else {
      return false;
  }
} 
```

编辑：然后您需要转义正则表达式中的分隔符（如果存在）。

使用 / 作为分隔符，您的模式中有两个：

```
$regex = "/^((([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+(\.([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+)*)@((((([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.))*([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.(af|ax|al|dz|as|ad|ao|ai|aq|ag|ar|am|aw|au|at|az|bs|bh|bd|bb|by|be|bz|bj|bm|bt|bo|ba|bw|bv|br|io|bn|bg|bf|bi|kh|cm|ca|cv|ky|cf|td|cl|cn|cx|cc|co|km|cg|cd|ck|cr|ci|hr|cu|cy|cz|dk|dj|dm|do|ec|eg|sv|gq|er|ee|et|fk|fo|fj|fi|fr|gf|pf|tf|ga|gm|ge|de|gh|gi|gr|gl|gd|gp|gu|gt| gg|gn|gw|gy|ht|hm|va|hn|hk|hu|is|in|id|ir|iq|ie|im|il|it|jm|jp|je|jo|kz|ke|ki|kp|kr|kw|kg|la|lv|lb|ls|lr|ly|li|lt|lu|mo|mk|mg|mw|my|mv|ml|mt|mh|mq|mr|mu|yt|mx|fm|md|mc|mn|ms|ma|mz|mm|na|nr|np|nl|an|nc|nz|ni|ne|ng|nu|nf|mp|no|om|pk|pw|ps|pa|pg|py|pe|ph|pn|pl|pt|pr|qa|re|ro|ru|rw|sh|kn|lc|pm|vc|ws|sm|st|sa|sn|cs|sc|sl|sg|sk|si|sb|so|za|gs|es|lk|sd|sr|sj|sz|se|ch|sy|tw|tj|tz|th|tl|tg|tk|to|tt|tn|tr|tm|tc|tv|ug|ua|ae|gb|us|um|uy|uz|vu|ve|vn|vg|vi|wf|eh|ye|zm|zw|com|edu|gov|int|mil|net|org|biz|info|name|pro|aero|coop|museum|arpa))|(((([0-9]){1,3}\.){3}([0-9]){1,3}))|(\[((([0-9]){1,3}\.){3}([0-9]){1,3})\])))$/"; 
```

编辑2：

关于你得到的错误

```
Warning: preg_match() [function.preg-match]: No ending delimiter '^' found ... 
```

它发现该`^`字符是您模式中的第一个字符，将其作为分隔符，并抱怨它没有找到`^`结束该模式的匹配分隔符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T15:36:09.363

你`preg_xx`完全可以做到这一点：

```
function validate($email)
{
    return filter_var($email, FILTER_VALIDATE_EMAIL);
}

if (false === validate($email)) {
    // invalid email given
} 
```

它[`filter_var()`](http://www.php.net/manual/en/function.filter-var.php)与[`FILTER_VALIDATE_EMAIL`](http://php.net/manual/en/filter.filters.validate.php)

# clojure - Clojure 长字符串

> ID：11064699
> 
> 赞同：28
> 
> 时间：2012-06-16T15:20:27.423
> 
> 标签：clojure

## 我想要的是

一些编程语言具有创建多行文字字符串的功能，例如：

```
some stuff ... <<EOF
  this is all part of the string
  as is this
  \ is a literal slash
  \n is a literal \ followed by a literal n
  the string ends on the next line
EOF 
```

问题：Clojure 有类似的东西吗？我意识到可以`"`很好地处理多行，但我希望它也可以`\`作为文字正确处理。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-03-27T13:07:35.080

你可能对这个小功能感兴趣。

```
(defn long-str [& strings] (clojure.string/join "\n" strings)) 
```

你会这样使用

```
(long-str "This is the first line. Implicitly I want a new line"
          "When I put a new line in the function call to create a new line") 
```

这确实需要额外的双引号，但会更接近您想要的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-16T15:23:21.747

如果您需要`\`字符串中的字符，只需将其转义即可。您无需执行任何其他操作即可支持多行字符串，例如：

```
"hello \\
there \\
world "

=> "hello \\\nthere \\\nworld" 
```

**编辑 ：**

既然您已经澄清您不想转义`\`字符，恐怕Clojure 没有提供转义字符的特殊语法，这个问题之前已经问[过了](https://stackoverflow.com/questions/11043318/does-clojure-have-raw-string)。本质上，Clojure 处理与 Java 相同的字符串语法，没有可用的特殊语法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-16T19:51:56.413

如果你真的想这样做，把你的文字字符串放在一个 txt 文件中，然后用 clojure 把它弄好。

```
(def my-string (slurp "super_long_string.txt")) 
```

如果您想让它可热插拔，请将其放入函数中。

```
(defn my-string [] (slurp "something.sql")) 
```

这样，每次您更改原始字符串时，您都会通过调用在程序中自动获取其当前值`(my-string)`。

# objective-c - 运行ModalForWindow时的EXC_BAD_ACCESS（代码=1，地址=0x0）

> ID：11064712
> 
> 赞同：2
> 
> 时间：2012-06-16T15:22:20.220
> 
> 标签：objective-c, macos, exc-bad-access

我有一个窗口和一个在用户单击按钮时打开的窗口控制器。有时我会得到 EXC_BAD_ACCESS(code=1, address=0x0)。

```
0x7fff6f2a59e0:  movq   (%rax), %rdi 
```

这是代码：

```
 ChooseProceduresWindowController *chooseProceduresWindowController = [[ChooseProceduresWindowController alloc] initWithWindowNibName:@"ChooseProceduresWindow"];
    [NSApp runModalForWindow:[chooseProceduresWindowController window]]; 
```

出现错误，然后调用 runModalForWindow:。我不是每次都收到这个错误，但我找不到模式。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-13T14:18:23.760

调试错误的最佳方法`EXC_BAD_ACCESS`是使用`NSZombies`.

查看此视频以获取说明：

[http://youtu.be/LQtPr8bkB3g](http://youtu.be/LQtPr8bkB3g)

`NSZombie`当您尝试释放已释放的对象时，将所有对象保留在内存中，这样您就更接近于找到您的错误。正如@Mark H 所说，这是一个内存管理问题。

您也可以`NSLog`在您的 dealloc 方法中添加一个，以便更好地了解在运行时释放的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:34:04.850

当对象在内存中不存在时，将引发该错误。我会开始寻找内存管理问题。首先是确保在使用后释放 ChooseProceduresWindowController。

# javascript - 网络书阅读器分页算法

> ID：11064717
> 
> 赞同：2
> 
> 时间：2012-06-16T15:23:01.860
> 
> 标签：javascript, web-applications

问题：网络应用在线电子书阅读器（如亚马逊kindle云阅读器）。如何根据当前视口大小（以及其他参数，如形成选项：字体样式、大小等）计算（估计）页面数？

有没有人研究过这样的算法来在浏览器中执行这个操作？

任何想法亚马逊/谷歌或其他电子书阅读器如何做到这一点？

提前感谢您的任何好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:59:20.573

你可以看看 Readium，这是一个 Chrome 插件，它可以做所有这些事情。

# hibernate - 对象引用了一个未保存的瞬态实例——尽管 Cascade

> ID：11064721
> 
> 赞同：1
> 
> 时间：2012-06-16T15:23:07.350
> 
> 标签：hibernate, jpa, orm, cascade

我得到一个 TransientObjectException

```
 org.hibernate.TransientObjectException: object references an unsaved transient instance 
- save the transient instance before flushing: EntityB.entityA -> EntityA
    at org.hibernate.engine.CascadingAction$9.noCascade(CascadingAction.java:376)
        at org.hibernate.engine.Cascade.cascade(Cascade.java:162)
        at org.hibernate.event.def.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:454)
        at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:288)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:130)
        at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
        at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:154)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:110)
        at org.hibernate.impl.SessionImpl.firePersistOnFlush(SessionImpl.java:671)
        at org.hibernate.impl.SessionImpl.persistOnFlush(SessionImpl.java:663)
        at org.hibernate.engine.CascadingAction$9.cascade(CascadingAction.java:346)
        at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:291)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:239)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:192)
        at org.hibernate.engine.Cascade.cascade(Cascade.java:153) 
```

这两个实体具有 OneToOne 关系：在 EntityA

```
@OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JoinColumn(name = "ENTITY_B_ID")
    public EntityB getEntityB() {
        return this.entityB;
    } 
```

在实体 B 中：

```
@OneToOne(fetch = FetchType.LAZY, mappedBy = "entityB")
    public EntityA getEntityA() {
        return this.entityA;
    } 
```

所以从EntityA到EntityB有一个CascadeType.ALL。我已经检查过我没有直接持久化 EntityB，我打印出日志，这些日志显示只有我正在查看的两个实体被持久化，并且 entityA 实例指向 entityB 实例，该实例指向正确的 entityA 实例（并且我可以从堆栈跟踪中看到持久性来自级联）。所以 entityB 由于来自 entityA 的级联而被持久化，现在 entityB 抱怨 entityA 是瞬态的？？？

有什么想法可以在这里出错吗？

# perl - Perl - LWP UserAgent 错误 URL 错误消息

> ID：11064734
> 
> 赞同：2
> 
> 时间：2012-06-16T15:24:17.497
> 
> 标签：perl, cgi

如果 $URL 不存在或没有响应，如何将 $PageData 设置为错误消息，例如“$PageData=Page not found”？我似乎无法让它工作。

```
use LWP::UserAgent;
use HTTP::Request;

my $URL = "http://www.MyDomain.com/;

my $Request = HTTP::Request->new("GET", $URL);   
my $UserAgent = LWP::UserAgent->new(timeout => 5); 
my $Result = $UserAgent->request($Request);        

return unless $Result->is_success;    
$PageData = $Result->content;

print $PageData; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:27:50.937

尝试使用库[HTTP::Status](http://search.cpan.org/~gaas/HTTP-Message-6.03/lib/HTTP/Status.pm)和以下代码：

```
use ...
use HTTP::Status qw(:constants :is status_message);

my $url = ...
my $request = HTTP::Request->new(GET => $url);
my $ua = LWP::UserAgent->new;
my $response = $ua->request($request);
if ($response->is_error) {
  print STDERR $response->status_line, "\n";
  print STDERR status_message($response->status_line), "\n";
  print STDERR $response->error_as_HTML, "\n";
}
else {
  print $response->decoded_content;
} 
```

# php - getElementByAttribute PHP DOM

> ID：11064741
> 
> 赞同：1
> 
> 时间：2012-06-16T15:26:04.540
> 
> 标签：php, dom

> **可能重复：**
> [在 php 中按属性选择 xml 节点](https://stackoverflow.com/questions/9252928/select-xml-node-by-attribute-in-php)

有没有类似`getElementByAttribute`PHP 的函数？如果不是，我该如何创建解决方法？

例如

```
<div class="foo">FOO!</div> 
```

我如何匹配该元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:30:20.367

您可以使用 XPath：

```
$xpath = new DOMXPath($document);
$results = $xpath->query("//*[@class='foo']"); 
```

[这是一个演示。](http://codepad.org/8AL91w0y)

# visual-studio-lightswitch - 如何在 Lightswitch 应用程序中执行基于时间的操作

> ID：11064742
> 
> 赞同：0
> 
> 时间：2012-06-16T15:26:13.160
> 
> 标签：visual-studio-lightswitch

我有一个 Visual Studio Lightswitch 应用程序，我需要定期执行操作（根据当前时间查询数据库中的条目，为返回的每一行发送一封电子邮件，如果有的话，然后在数据库中标记该项目）

我可以在屏幕上手动完成所有操作，如何实现自动化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:50:13.447

您可以使用 Timer 类，它设置为每 x 时间段执行“某事”，但这样做的缺点是它仅在 LS 应用程序实际运行时才有效。

我做了一些非常相似的事情，但是我创建了一个 Windows 服务应用程序，它完全存在于任何 LS 应用程序之外。

这些链接可能会给您一些帮助。

在 Visual Studio 2010 中创建 Windows 服务：http: [//myhosting.com/blog/2010/09/creating-windows-service-visual-studio-2010/](http://myhosting.com/blog/2010/09/creating-windows-service-visual-studio-2010/)

在 Visual Studio [C#] 中创建 Windows 服务：[http ://www.csharp-examples.net/create-windows-service/](http://www.csharp-examples.net/create-windows-service/)

如何在 LightSwitch 中实现“开始”“停止”计时器：http: [//social.msdn.microsoft.com/Forums/da/lightswitch/thread/f14c4420-d43b-4806-bf5d-502b68f1dd89](http://social.msdn.microsoft.com/Forums/da/lightswitch/thread/f14c4420-d43b-4806-bf5d-502b68f1dd89)

如何：创建计时器： http: [//msdn.microsoft.com/en-us/library/cc189084 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc189084(v=vs.95).aspx)

# php - 表单在 div 内提交，操作为空

> ID：11064758
> 
> 赞同：4
> 
> 时间：2012-06-16T15:28:48.283
> 
> 标签：php, javascript, jquery, forms, html

简单来说，我的问题是我想在 div 中提交一个带有空操作的表单作为同一页面中的 php 脚本，一个简单的例子来说明我的页面太长

```
<html>
<head>
<script>
$(document).ready(function() {
 $("#myDiv").delegate("form", "submit", function(event) {
       $.ajax({ 
            data: $(this).serialize(), 
            type: $(this).attr('method'), 
            url: $(this).attr('action'), 
            success: function(response) { 
                $("#myDiv").slideUp(500, function() {
                    $("#myDiv").html(response);
                    $("#myDiv").slideDown(500);
                });
            }
        });
        return false;    
    });
 });
</script>
<head>
<form method="post" action="">
<p> enter your name</p> <input type="text" name="name" />
<input type="submit" name="save" />
</form>
<?php
if (isset($_POST['save'])) {
echo $_POST['name'];
}
?>
</html> 
```

表单操作为空的问题，所以当我点击提交按钮时没有任何反应，所以有人知道如何解决这个问题吗？PS：提取 extrnak 文件中的 php 脚本太难了，我正在寻找替代解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:10:43.390

像这样试过？

```
<?php
if (isset($_POST)) {
    echo $_POST['name'];
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:08:55.547

为了`.delegate`工作，您必须环绕`#myDiv`您希望定位的选择器，因为定位等效于：

```
$('#myDiv').find('form').on('submit', ... 
```

换句话说，你的`form`必须被包裹在里面`#myDiv`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T15:30:58.560

```
<form action="<?php echo $_SERVER['PHP_SELF']?>" method="post"> 
```

这会将当前脚本地址放在操作字段中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T15:36:04.850

尝试使用井号。`action="#"`

# c# - Devexpress 过滤器控件清除过滤器 C#

> ID：11064759
> 
> 赞同：1
> 
> 时间：2012-06-16T15:28:59.953
> 
> 标签：c#, filter, controls, devexpress

![样例截图](../Images/8d8c0f4f7c17cfc3b6ad381c670eb9a0.png)

单击 X 按钮时是否有事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:49:17.240

没有这样的事件，但可以处理相关事件。DevExpress 知识库中描述了解决方案：[单击过滤器面板中的 [x] 按钮时会触发哪个事件？](http://www.devexpress.com/Support/Center/kb/p/A1243.aspx)

# macos - 如何阻止 NSTextField 中的某些键盘布局？

> ID：11064760
> 
> 赞同：1
> 
> 时间：2012-06-16T15:29:07.847
> 
> 标签：macos, cocoa

有没有办法阻止 NSTextField 中的某些键盘布局（输入源）。

我需要阻止所有非罗马语言，例如俄语、白俄罗斯语、乌克兰语等，或者禁用所有语言并仅启用英语/德语。

如果它不会那么难 - 请举一些例子。

升级版：

我想我需要使用[这个](https://developer.apple.com/library/mac/#documentation/TextFonts/Reference/TextInputSourcesReference/Reference/reference.html "文本输入源")

但如何？=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T17:57:13.183

只检查连接的键盘可能有点古怪。例如，使用 Option 键，您可以从任何键盘输入大量非罗马字符。更不用说复制和粘贴了。

更好的方法是创建一个子类`NSFormatter`并实现`isPartialStringValid:proposedSelectedRange:originalString:originalSelectedRange:errorDescription:`

一个简单的实现可能是这样的：

```
- (BOOL)isPartialStringValid:(NSString **)partialStringPtr proposedSelectedRange:(NSRangePointer)proposedSelRangePtr originalString:(NSString *)origString originalSelectedRange:(NSRange)origSelRange errorDescription:(NSString **)error
{
    NSString *partialString = *partialStringPtr;

    NSCharacterSet *acceptedCharacters = [NSCharacterSet characterSetWithCharactersInString: @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"];

    NSCharacterSet *notAcceptedCharacters = [acceptedCharacters invertedSet];

    BOOL needsCheck = YES;
    BOOL didChange = NO;

    do {
        NSRange rng = [partialString rangeOfCharacterFromSet:notAcceptedCharacters];

        if ( !NSEqualRanges(rng, NSMakeRange(NSNotFound, 0)) ) {

            partialString = [partialString stringByReplacingCharactersInRange:rng withString:@""];

            didChange = YES;
        }
        else {
            needsCheck = NO;
        }

    } while (needsCheck);

    if ( didChange ) {

        *partialStringPtr = partialString;
        NSRange newRange = origSelRange;
        newRange.length = 0;
        *proposedSelRangePtr =newRange;

        return NO;
    }

    return YES;
} 
```

子类化时`NSFormatter`，您还需要实现`stringForObjectValue:`and `getObjectValue:forString:errorDescription:`，但由于您输入的是字符串，因此它们可以直接传递输入字符串。

# regex - 如何在 grunt concat 中匹配每个文件，但一个文件除外？

> ID：11064773
> 
> 赞同：21
> 
> 时间：2012-06-16T15:30:58.243
> 
> 标签：regex, node.js, regex-negation, gruntjs

我正在使用 grunt 来连接和最小化我的 js 文件，我使用以下配置`concat`：

```
concat: {
  dist: {
    src: ['<banner:meta.banner>', 'js/*.js'],
    dest: 'js/script.js'
  }
} 
```

它匹配我`js`文件夹中的每个文件，但我需要忽略`modernizr.js`，有没有办法做到这一点？我想我需要一些模式匹配巫毒来做到这一点，但我不知道怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-16T18:54:20.767

根据[文档](https://github.com/isaacs/minimatch)，我会尝试：

```
js/!(modernizr).js
(js/)!(modernizr).js
{js/}!(modernizr).js
js/!({modernizr}).js
(js/)!({modernizr}).js
{js/}!({modernizr}).js
js/!{modernizr}.js
(js/)!{modernizr}.js
{js/}!{modernizr}.js 
```

如果它们都不起作用，那么您可能不走运......

# php - 如何使用 NOW() 更新 SQL 日期

> ID：11064775
> 
> 赞同：8
> 
> 时间：2012-06-16T15:31:06.007
> 
> 标签：php, sql

基本上我有一个简单的登录表单。在数据库中，我有一个“last_logged”列，并且希望每次有人登录时都用当前日期和时间更新它。

我目前有这个查询：

```
 UPDATE users SET last_logged = "NOW()" WHERE id = 1 
```

但它不会将该列更新为当前日期。任何想法为什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-16T15:31:56.187

从 中删除引号`NOW()`。作为函数调用，它应该不加引号。

```
UPDATE users SET last_logged = NOW() WHERE id = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T15:49:45.320

MS SQL 使用`GETDATE()`而不是`NOW()`

（仅供参考）我
现在`SQL-Server`使用`SYSDATETIME()`：

```
DECLARE @now DATETIME = DATEADD(dd,DATEDIFF(dd,'19000101',SYSDATETIME()),'19000101'); 
```

# zend-framework - Zend Route - 从 URL 中删除参数名称

> ID：11064779
> 
> 赞同：0
> 
> 时间：2012-06-16T15:31:35.713
> 
> 标签：zend-framework, zend-route

我开始使用 Zend Framework 进行开发，但我对路由有疑问。有没有办法代替这样的 URL：

www.mysite.com/newsletter/groups/edit/id/1

拥有这个：

www.mysite.com/newsletter/groups/edit/1

（没有参数名称**id**）

我已经将此代码用于在我的 BootStrap 文件中声明自定义路由：

```
protected function _initRoutes()
{
    $router = Zend_Controller_Front::getInstance()->getRouter();    

    /* Edit Groups */
    $route = new Zend_Controller_Router_Route('groups/edit/:group_id',array('controller' => 'groups','action' => 'edit')); 
    $router->addRoute('group_edit', $route);

    return $router;
} 
```

然后在我的视图文件中，我使用它来回显 URL：

```
<a href="<?=$this->url(array('group_id' => $group->getId()), 'group_edit');?>" class=""><?=$group->getName()?></a> 
```

网址以我想要的方式呼应：

```
<a href="/fuhrmann/newsletter/groups/edit/1" class="">Group 1</a> 
```

这是我的 application.ini：

```
 [production]

appnamespace = "Application"

; Debug output
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
resources.frontController.params.displayExceptions = 0

;PHP Setings
phpsettings.date.timezone = "America/Sao_Paulo"

; Include path
includePaths.models = APPLICATION_PATH "/models"
includePaths.application = APPLICATION_PATH
includePaths.library = APPLICATION_PATH "/../library"

; Bootstrap
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"

; Front Controller
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.env = APPLICATION_ENV
resources.frontController.actionHelperPaths.Action_Helper = APPLICATION_PATH "/views/helpers"
resources.frontController.moduleControllerDirectoryName = "actions"
;resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.frontController.defaultControllerName = "index"
resources.frontController.defaultAction = "index"
resources.frontController.defaultModule = "default"
;resources.frontController.baseUrl = "/newsletter"
;resources.frontController.returnresponse = 1

; Layout
resources.layout.layout = "layout"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"

; Views
resources.view.helperPath = APPLICATION_PATH "/views/helpers"
resources.view.encoding = "UTF-8"
resources.view.basePath = APPLICATION_PATH "/views"
resources.view.scriptPath.Default  = APPLICATION_PATH "/views/scripts"
resources.view.doctype = "HTML5"
resources.view.contentType = "text/html;charset=utf-8"
resources.view.helperPathPrefix = "Views_Helpers_"
resources.view.filterPathPrefix = "Views_Filters_"

resources.db.adapter = "PDO_SQLITE"

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1
resources.frontController.throwExceptions = true

resources.db.adapter = "PDO_MYSQL"
resources.db.params.host = "localhost"
resources.db.params.dbname = "newsletter"
resources.db.params.username = "root"
resources.db.params.password = ""
resources.db.isDefaultTableAdapter = true
resources.db.params.charset = utf8 
```

我完整的 Boostrap 文件：

```
<?php

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initDoctype()
    {
        $this->bootstrap('view');
        $view = $this->getResource('view');
        $view->doctype('XHTML1_STRICT');
    }

    /**
     * Init Autoloader
     */
    protected function _initAutoload()
    {
        $loader = Zend_Loader_Autoloader::getInstance();
        $loader->setFallbackAutoloader(true);
    }

    /**
     * Adiciona alguns routers
     */
    protected function _initRoutes()
    {

        $router = Zend_Controller_Front::getInstance()->getRouter();

        /* Edit Groups*/
        $route = new Zend_Controller_Router_Route('/groups/edit/:groupId',array('controller' => 'group','action' => 'edit')); 
        $router->addRoute('group_edit', $route);

        return $router;
    }

} 
```

我的 index.php（内部公共）文件：

```
<?php
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()
            ->run(); 
```

问题是，当我单击打开此页面（编辑组页面）时，我收到此错误：

```
Fatal error: Uncaught exception 'Zend_Controller_Router_Exception' with message 'group_id is not specified' in C:\xampp\htdocs\fuhrmann\newsletter\library\Zend\Controller\Router\Route.php:354 Stack trace: #0 C:\xampp\htdocs\fuhrmann\newsletter\library\Zend\Controller\Router\Rewrite.php(470): Zend_Controller_Router_Route->assemble(Array, true, true) #1 C:\xampp\htdocs\fuhrmann\newsletter\library\Zend\View\Helper\Url.php(49): Zend_Controller_Router_Rewrite->assemble(Array, NULL, true, true) #2 [internal function]: Zend_View_Helper_Url->url(Array, NULL, true) #3 C:\xampp\htdocs\fuhrmann\newsletter\library\Zend\View\Abstract.php(350): call_user_func_array(Array, Array) #4 C:\xampp\htdocs\fuhrmann\newsletter\application\layouts\scripts\layout.phtml(22): Zend_View_Abstract->__call('url', Array) #5 C:\xampp\htdocs\fuhrmann\newsletter\application\layouts\scripts\layout.phtml(22): Zend_View->url(Array, NULL, true) #6 C:\xampp\htdocs\fuhrmann\newsletter\library\Zend\View.php(108): include('C:\xampp\htdocs...') #7 C:\xampp\htdocs\fu in C:\xampp\htdocs\fuhrmann\newsletter\library\Zend\Controller\Plugin\Broker.php on line 336 
```

在我的 EDIT 操作中，我可以在所有请求参数中执行 var_dump 以查看是否设置了 groupId，是的，是的！

```
array(3) { ["groupId"]=> string(3) "555" ["controller"]=> string(6) "groups" ["action"]=> string(6) "edit" } 
```

I already have searched for a lot of answers here and by the way, [I found a question](https://stackoverflow.com/questions/5298386/need-help-in-zend-framework-url-rewrite) with an answer but no solution for me.

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:06:30.563

Ok, **solved**!

What I did was to add a default value (NULL) to the group_id, so in my Bootstrap file I have this now:

```
$route = new Zend_Controller_Router_Route('/groups/edit/:group_id',array('controller' => 'groups','action' => 'edit', 'group_id' => NULL)); 
```

Thanks @philien!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:02:59.123

You can try by removing the underscore :

```
protected function _initRoutes()
{
    $router = Zend_Controller_Front::getInstance()->getRouter();    

    /* Edit Groups */
    $route = new Zend_Controller_Router_Route('groups/edit/:groupId',array('controller' => 'groups','action' => 'edit')); 
    $router->addRoute('group_edit', $route);

    return $router;
} 
```

And after :

```
<a href="<?=$this->url(array('groupId' => $group->getId()), 'group_edit');?>" class=""><?=$group->getName()?></a> 
```

Underscore are bad to use in this case, I choose to put names in CamelCased.

# computer-science - C# LinkedList vs List 用于运行长度编码？

> ID：11064780
> 
> 赞同：-1
> 
> 时间：2012-06-16T15:31:38.493
> 
> 标签：computer-science, run-length-encoding

其中哪一个更适合字节上的 RLE？我需要能够相当快地在列表中插入数据，但我还需要能够快速找出未压缩字节 3987 的位置（这可能更重要，我认为最好的方法是通过所有直到我得到 3987 以下最接近的一个？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:56:14.100

您是否希望插入的内容多于搜索的内容？因为每种方法都比另一种更好。

我假设您的 LinkedList 节点看起来像这样：

```
class RleNode { Byte Value; Int32 Length; RleNode Prev; RleNode Next; } 
```

如果您需要快速插入，那么无论如何您都需要使用链表结构。

为了通过计算位置加快查找速度，我将链表结构封装在一个新类中，该类将它与地图索引相结合。每次插入时都必须重建索引。

编辑：

我想知道一棵树是否会更快。您将使用 DFS 遍历树来重建线性 RLE 流。对于树，每个父节点都可以存储其子节点的总 RLE 长度，因此无需重新计算整个结构的 RLE 长度即可完成插入，并且检索速度也一样快。

我建议您将这个问题重新标记为计算机科学而不是 C#。

# python - 使用 PIL 获取像素的 RGB

> ID：11064786
> 
> 赞同：111
> 
> 时间：2012-06-16T15:32:25.113
> 
> 标签：python, image, python-imaging-library, rgb, pixel

是否可以使用 PIL 获得像素的 RGB 颜色？我正在使用这段代码：

```
im = Image.open("image.gif")
pix = im.load()
print(pix[1,1]) 
```

但是，它只输出一个数字（例如`0`or `1`）而不是三个数字（例如`60,60,60`R、G、B）。我想我不了解该功能。我想要一些解释。

非常感谢。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-06-16T15:52:09.373

是的，这样：

```
im = Image.open('image.gif')
rgb_im = im.convert('RGB')
r, g, b = rgb_im.getpixel((1, 1))

print(r, g, b)
(65, 100, 137) 
```

您之前获得单个值的原因`pix[1, 1]`是因为 GIF 像素引用了 GIF 调色板中的 256 个值之一。

另请参阅此 SO 帖子：[Python 和 PIL 像素值对于 GIF 和 JPEG 不同](https://stackoverflow.com/questions/5800009/python-and-pil-pixel-values-different-for-gif-and-jpeg)，此[PIL 参考页面](http://effbot.org/imagingbook/image.htm) 包含有关该`convert()`函数的更多信息。

顺便说一句，您的代码可以很好地处理`.jpg`图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T15:52:49.763

GIF 将颜色存储为调色板中 x 种可能的颜色之一。阅读有关[gif 有限调色板](http://www.prepressure.com/library/file-formats/gif)的信息。所以 PIL 给你的是调色板索引，而不是调色板颜色的颜色信息。

***编辑：***删除了一个有错字的博客文章解决方案的链接。其他答案在没有错字的情况下做同样的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-07T20:11:31.753

转换图像的另一种方法是从调色板创建一个 RGB 索引。

```
from PIL import Image

def chunk(seq, size, groupByList=True):
    """Returns list of lists/tuples broken up by size input"""
    func = tuple
    if groupByList:
        func = list
    return [func(seq[i:i + size]) for i in range(0, len(seq), size)]

def getPaletteInRgb(img):
    """
    Returns list of RGB tuples found in the image palette
    :type img: Image.Image
    :rtype: list[tuple]
    """
    assert img.mode == 'P', "image should be palette mode"
    pal = img.getpalette()
    colors = chunk(pal, 3, False)
    return colors

# Usage
im = Image.open("image.gif")
pal = getPalletteInRgb(im) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-24T09:02:55.227

不是 PIL，但[`imageio.imread`](https://imageio.readthedocs.io/en/latest/scipy.html?highlight=imread)可能仍然很有趣：

```
import imageio
im = scipy.misc.imread('um_000000.png', flatten=False, mode='RGB')
im = imageio.imread('Figure_1.png', pilmode='RGB')
print(im.shape) 
```

给

```
(480, 640, 3) 
```

所以它是（高度，宽度，通道）。所以位置的像素`(x, y)`是

```
color = tuple(im[y][x])
r, g, b = color 
```

## 过时的

[`scipy.misc.imread`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.misc.imread.html)[在 SciPy 1.0.0 中已弃用](https://github.com/scipy/scipy/issues/6242)（感谢提醒，[fbahr](https://stackoverflow.com/users/429303/fbahr)！）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-27T17:27:36.340

使用 numpy ：

```
im = Image.open('image.gif')
im_matrix = np.array(im)
print(im_matrix[0][0]) 
```

给出位置 (0,0) 像素的 RGB 向量

# javascript - 即使选择了子元素也突出显示父元素（opencart）

> ID：11064787
> 
> 赞同：0
> 
> 时间：2012-06-16T15:32:41.507
> 
> 标签：javascript, parent-child, drop-down-menu, opencart

上周我用 opencart 创建了一个电子商店。现在我正在尝试自定义默认的顶部菜单。我想要做的是即使选择了子元素也保持父元素突出显示

我用这个 js 突出显示当前页面：

```
 <script type="text/javascript" >
function extractPageName(hrefString)
{
    var arr = hrefString.split('/');
    return  (arr.length < 2) ? hrefString : arr[arr.length-2].toLowerCase() + arr[arr.length-1].toLowerCase();
}

function setActiveMenu(arr, crtPage)
{
    for (var i=0; i < arr.length; i++)
    {
        if(extractPageName(arr[i].href) == crtPage)
        {
            if (arr[i].parentNode.tagName != "DIV")
            {
                arr[i].className = "current";
                arr[i].parentNode.className = "current";
            }
        }
    }
}

function setPage()
{
    hrefString = document.location.href ? document.location.href :document.location ;

    if (document.getElementById("menu") !=null)
    setActiveMenu(document.getElementById("menu").getElementsByTagName("a"),extractPageName(hrefString));
}

window.onload=function()
{
    setPage();
}

</script> 
```

任何帮助将不胜感激。

ps对不起我的英语，如果你不明白我想要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:28:57.710

我想到了。Tooraj 给了我这个想法。这是我的代码：

```
<script type="text/javascript" >
function extractPageName(hrefString)
{
    var arr = hrefString.split('/');
    return  (arr.length < 2) ? hrefString : arr[arr.length-2].toLowerCase() + arr[arr.length-1].toLowerCase();
}

function setActiveMenu(arr, crtPage)
{
    for (var i=0; i < arr.length; i++)
    {
        if(extractPageName(arr[i].href) == crtPage)
        {
            if (arr[i].parentNode.parentNode.parentNode.parentNode.tagName != "DIV",
            arr[i].parentNode.tagName != "DIV")
            {
                arr[i].className = "current";               

                arr[i].parentNode.parentNode.parentNode.parentNode.className = "current";
                                arr[i].parentNode= "current";
            }
        }
    }
}

function setPage()
{
    hrefString = document.location.href ? document.location.href :document.location ;

    if (document.getElementById("menu") !=null)
    setActiveMenu(document.getElementById("menu").getElementsByTagName("a"),extractPageName(hrefString));

}

window.onload=function()
{
    setPage();
}

</script> 
```

# c# - 如何控制继电器命令执行？

> ID：11064788
> 
> 赞同：-1
> 
> 时间：2012-06-16T15:32:42.293
> 
> 标签：c#, mvvm, relaycommand

我有一个这样的按钮：

```
<Button x:Name="buttonGetData" Width="70" Content="GetData" Command="{Binding SaveCommand}"  /> 
```

我希望当保存命令执行到未完成时，用户无法单击我的按钮，或者如果单击我的按钮，我的命令不会执行！我对这个问题的解决方案是

```
 bool execute;
private void MyCommandExecute(CommandParam parm)
{
  if(execute)return;
  execute=true;
  ///Some actions
  execute=false;

} 
```

这个问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:36:28.307

该`ICommand`接口还定义了一个`CanExecute`方法。您可以在执行开始时使该命令返回`false`，并在执行完成时将其设置回`true`。这也为您提供了在命令执行期间禁用按钮的好处。

我不使用`RelayCommand`，所以我不确定它是否与 ' 方法等效，`DelegateCommand`但是`RaiseCanExecuteChanged`使用`DelegateCommand`（本质上与`RelayCommand`安全的）：

```
SaveCommand = new DelegateCommand<CommandParam>(MyCommandExecute, MyCommandCanExecute);

private bool  canExecute;
private bool MyCommandCanExecute()
{
    return canExecute;
}

private void MyCommandExecute(CommandParam parm)
{
    // Change the "can execute" status and inform the UI.
    canExecute = false;
    SaveCommand.RaiseCanExecuteChanged();

    DoStuff();

    // Change the "can execute" status and inform the UI.
    canExecute = true;
    SaveCommand.RaiseCanExecuteChanged();
} 
```

# javascript - 使用 facebox 提交表单

> ID：11064789
> 
> 赞同：0
> 
> 时间：2012-06-16T15:32:54.593
> 
> 标签：javascript, jquery, forms, facebox

我正在使用 facebox 将页面加载到 DIV 中。假设其中一个页面有一个需要提交的表单，我如何将 action="" 设置为页面并将其加载到 facebox 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:12:02.200

或许，您想要实现以下目标：提交表单不会重新加载整个页面，而只会重新加载 facebox 的内容。考虑在你的 facebox 中使用[iframe而不是 div。](http://www.w3schools.com/tags/tag_iframe.asp)

# android - 9Windows 7 x64 上的补丁图像

> ID：11064791
> 
> 赞同：0
> 
> 时间：2012-06-16T15:33:26.437
> 
> 标签：android, nine-patch

9patch 图像是否适用于 Windows 7 x64？我在win7-x64 PC上双击“draw9patch.bat”，但它没有出现。之后，我在 windows7-x86 PC 上运行 draw9patch.bat 并制作了 Ninepatch 图像，然后将其复制到 windows7-x64 PC 上使用。在xml编辑器的预览中，9patch背景兼容linearlayout，里面有一些按钮。但是当我将应用程序构建到设备（galaxy s2）时，我只看到背景图像，没有任何按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T17:09:46.597

关于 draw9patch.bat ，请确保您安装了 java jre（我认为 jre 64bit 应该没问题）并且在路径中可用。

如果这也不起作用，您可以自己编辑此类图像。只需按照编辑器的工作方式即可。

关于预览，它只是一个预览，以便您了解视图的用途（就像 gridview 和 listview 在其中显示一些假货一样）。你应该自己添加它们。

# php - 使用 cURL 自动填写并提交表单

> ID：11064793
> 
> 赞同：2
> 
> 时间：2012-06-16T15:33:46.210
> 
> 标签：php, forms, curl, webforms

我正在尝试使用 cURL 自动填写和提交表单，代码在这里，但它什么也没做，

```
<?php
$post_data['countryID'] = '162';
$post_data['autocomplete'] = 'Assam, Karimganj';
$post_data['state'] = '3007';
$post_data['city'] = '60695';
$post_data['countryStateCityCase'] = '2';
$post_data['usesAutoComplete'] = '1';
$post_data['categoryParent'] = '185';
$post_data['categoryChild'] = '219';
$post_data['listing_type'] = '2';
$post_data['title'] = 'Title goes here';
$post_data['currency_typeC'] = '13';
$post_data['priceC'] = '2500';
$post_data['description']= 'Descriptio goes hereDescriptio goes hereDescriptio goes hereDescriptio goes here';
$post_data['email']= 'olx@test.com';
$post_data['ad_language_id']= '1';
$post_data['identity']= '1';
$post_data['imageQty']= '0';
$post_data['phone']= '03311234567';
$post_data['bddisclaimer']= '0';
$post_data['security_code']= 'undefined';
$post_data['captchaKey']= 'undefined';
foreach ( $post_data as $key => $value) {
    $post_items[] = $key . '=' . $value;
}
$post_string = implode ('&', $post_items);
echo $post_string;
$curl_connection =
  curl_init('http://www.olx.in/posting.php?src=8');

curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl_connection, CURLOPT_USERAGENT,
  "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);

curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);

$result = curl_exec($curl_connection);
echo $result;
print_r(curl_getinfo($curl_connection));
echo curl_errno($curl_connection) . '-' .
                curl_error($curl_connection);

curl_close($curl_connection);
?> 
```

所有字段均已正确填写，但没有输出任何内容，我根本没有收到确认电子邮件，但手动工作正常，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T16:50:09.120

让我印象深刻的第一个原因是您在构建 HTTP POST 请求的内容时没有进行[百分比编码。](http://en.wikipedia.org/wiki/Percent-encoding)您可以使用[urlencode(..)](http://php.net/manual/en/function.urlencode.php)函数对键值对的值进行编码。

代替

```
$post_items[] = $key . '=' . $value; 
```

和：

```
$post_items[] = $key . '=' . urlencode($value); 
```

# php - 当用户在多复选框中选中一个复选框时如何禁用一个复选框

> ID：11064798
> 
> 赞同：0
> 
> 时间：2012-06-16T15:34:11.190
> 
> 标签：php, jquery

我有两个这样生成的复选框：

```
 <table>
    <?php foreach ($invited_members as $mem) : ?>
        <?php if ($mem['mc_role'] != 'c') : ?>
                            <tr>
                                <td style="width:40px;text-align:center"> attend  </td>
                             <td style="width:40px;text-align:center"><input name="p_members[]" id="p_members" type="checkbox"  value="<?php echo $mem['member_id']; ?>" <?php if ($mem['mm_present'] == 1) echo 'checked="checked"'; ?> <?php if (!$this->isSupervisor or $meeting_info['meeting_status'] != 2) echo 'disabled="disabled"';?> onclick="change(this,'#on_p_members');"/></td>
                              <td style="width:40px;text-align:center"> E-attend  </td>
                                <td style="width:40px;text-align:center"><input name="on_p_members[]" id="on_p_members" type="checkbox" value="<?php echo $mem['member_id']; ?>" <?php if ($mem['mm_present'] == 2) echo 'checked="checked"'; ?> <?php if (!$this->isSupervisor or $meeting_info['meeting_status'] != 2) echo 'disabled="disabled"'; ?>onclick="change(this,'#p_members');"/></td>
                                <td style="width:50px;text-align:center"><img src="<?php echo base_url() . 'avaters/' . $mem['mem_image']; ?>" height="38" width="38" /></td>
                                <td><?php echo stripslashes($mem['mem_real_name']); ?></td>
                            </tr>
        <?php endif; ?>
    <?php endforeach; ?>
                </table> 
```

我想当用户检查其中一个时禁用另一个，所以我厌倦了使用 jquery

```
function change(p_members,x)
{

 if ($(p_members).attr('checked'))
     { 

         $(x).attr('checked',false);
         $(x).attr('disabled',true);

     }
     else 
         {               
              $(x).removeAttr('disabled');

         }
  } 
```

但它不能正常工作。当第二行中的用户选中一个复选框时，该行上的复选框之一被禁用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:22:16.053

你可以试试这个...

```
 $("input:checkbox").click(function () {
    $("input:checkbox").not($(this)).attr('disabled', 'disabled');
}); 
```

这是一般形式。您可以添加元素或 id 的父级以获取所需的复选框列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:02:05.203

这应该在任何版本的 jQuery 上执行：

HTML

```
<input type="checkbox" id="p_members" />
<input type="checkbox" id="on_p_members" /> 
```

JavaScript

```
$('#p_members').change(function() {
    if($(this).is(":checked")) {
        $('#on_p_members').attr('disabled', 'disabled');
    } else {
        $('#on_p_members').removeAttr('disabled');
    }
}); 
```

看看这个 jsFiddle 看看它的实际效果：http: [//jsfiddle.net/s3pRy/](http://jsfiddle.net/s3pRy/)

# java - Java中的K最近邻实现

> ID：11064801
> 
> 赞同：5
> 
> 时间：2012-06-16T15:34:27.700
> 
> 标签：java, knn

我正在寻找一个不错的 Java 中 KNN 算法的实现，因为在我的论文中，我必须使用不同的数据结构对其进行修改。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T15:37:37.680

[这是](http://blog.afewguyscoding.com/2010/05/nearest-neighbors-java/)完整的实现和描述。

# database - 用户的头像应该是表中的字段还是通过文件系统搜索？

> ID：11064802
> 
> 赞同：1
> 
> 时间：2012-06-16T15:34:29.303
> 
> 标签：database, registration, avatar

有一种情况，我们可以为用户的头像设置一个 VARCHAR 字段，并将他们的图像名称存储在该字段中，就像大多数应用程序一样。
我感兴趣的另一种方法是删除该字段并将用户的头像存储在一个文件夹`avatars`中，例如头像的文件名是用户 ID 的 MD5。然后我们需要做的就是在头像的文件夹中查找是否有任何 MD5(userid)，如果没有，则显示默认图片。
问题是对于一个巨大的社交网站，在头像的文件夹或用户表中的头像字段中环顾四周，哪种方法更有效？
我还应该注意，我们有基于日期的文件夹，例如我们有一个名称为 的文件夹`1000`，然后是另一个名称为`2000`.`/avatar/1000`包含一千张图片，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:46:02.890

与从数据库中提取用户详细信息并单独调用文件系统检查文件是否存在相比，对数据库进行一次调用会更有效。

# javascript - 使用javascript在表格数据的基础上排列表格行

> ID：11064803
> 
> 赞同：1
> 
> 时间：2012-06-16T15:34:37.440
> 
> 标签：javascript, jquery, html

假设我有这样的代码：

```
<table>
    <tr>
        <th>name</td>
        <th>price</td>
    </tr>
    <tr>
        <td>a</td>
        <td class="sort">5</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">3</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">8</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">2</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">6</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">20</td>
    </tr>
</table> 
```

但应该这样安排：

```
<table>
    <tr>
        <th>name</td>
        <th>price</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">2</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">3</td>
    </tr>
    <tr>
        <td>a</td>
        <td class="sort">5</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">6</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">8</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">20</td>
    </tr>
</table> 
```

在表格数据的基础上排列表格数据。注意：类将被定义`class="sort"`

提前致谢

更新：

我希望在不点击用户的情况下安排表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:40:55.653

通过使用将行转换为数组，`$.makeArray`您可以在数组上使用 natve javascript `sort()`。我对数字进行了排序，因为它似乎适用

演示：http: [//jsfiddle.net/3MBPF/](http://jsfiddle.net/3MBPF/)

```
function sortNum(a, b) {
   return 1 * $(a).find('.sort').text() < 1 * $(b).find('.sort').text() ? 0 : 1;
}

$(function() {
    var elems = $.makeArray($('tr:has(.sort)').remove())
    elems.sort(sortNum)
    $('table').append($(elems));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:39:26.103

好吧，由于缺少代码，您似乎没有尝试过任何事情，并且您还没有告诉我们您是如何生成页面/表格的（这个问题似乎要求我们为您完成工作而不是帮助）但是采取看看这个：[http](http://datatables.net/) ://datatables.net/它可能会给你你想要的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T15:40:54.103

您可以使用[http://tinysort.sjeiti.com/](http://tinysort.sjeiti.com/)上提供的 jQuery Tinysort 插件。这应该可以满足您的大部分排序需求。

# objective-c - 需要在 UIViewController 中投射 self.view 吗？

> ID：11064808
> 
> 赞同：3
> 
> 时间：2012-06-16T15:35:18.227
> 
> 标签：objective-c, ios, model-view-controller, uiview, uiviewcontroller

我创建了一个`UIViewController`包含一个我已经构建的自定义类的视图。我已将视图连接到 File's Owner 视图插座。它渲染正确，我没有任何实际问题。但是，我想从我的视图控制器实例中调用我的视图中的一个方法，比如说它被称为`drawSomething`. 因此，在我的控制器中的一个方法中，我使用：

```
[self.view drawSomething]; 
```

有用。但是我收到了预编译器警告，因为它似乎不知道我的自定义视图定义中的方法。我的方法在这里错了吗？我可以创建一个局部变量并将其转换为使警告明显消失。我已经导入了视图的头文件，所以这不是问题。

我觉得我错过了一些微不足道的东西。

我的自定义视图的 .h 包含：

```
-(void) drawSomething; 
```

我的自定义视图的 .m 包含：

```
-(void) drawSomething { <code> }; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-16T15:42:47.990

`self.view`基本上是一个指向`UIView`用作视图控制器主视图的指针。由于您的视图是具有自定义方法的自定义类，因此您需要对自定义类进行强制转换以调用您的自定义方法：

```
[((MyCustomClass *)self.view) drawSomething]; 
```

否则，您正在调用`drawSomething`一个`UIView`不存在的标准。

# asp.net - 如何在 SQL Server CE 中创建 AspNet Membership 数据库

> ID：11064811
> 
> 赞同：1
> 
> 时间：2012-06-16T15:35:28.227
> 
> 标签：asp.net, asp.net-membership, sql-server-ce

我在一个小型网站上工作，我想包含 Asp.Net Membership 来管理应用程序中的用户和角色。

我过去曾这样做过，但总是使用 SQL Server 或 SQL Server Express 作为数据库引擎。现在，由于我的托管服务提供商，我想将它与 SQL Server CE 一起使用，而我正面临着有史以来最荒谬的问题。我不知道如何创建数据库本身。

使用“exportonly”选项生成的脚本`aspnet_regsql`不起作用，并且使用 -C 选项指定连接字符串对我也不起作用。

我读到了如何使用新[的 Microsoft ASP.NET Universal Providers for SQL Compact Edition 1.0](http://nuget.org/packages/Microsoft.AspNet.Providers.SqlCE)或来自 ErikEJ[的 SQL Compact ASP.NET Membership、Role and Profile 提供程序](http://sqlcemembership.codeplex.com/)，但如果没有数据库，我什至无法尝试这些提供程序。

有谁知道该怎么做？

也许我的期望完全错误，所以我也接受建议。我唯一的要求是它必须与 SQL Server CE 4.0 一起使用。

即使除了 asp.net 成员资格之外还有另一种简单的方法来管理用户和角色，我也全神贯注！

谢谢，J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:47:11.043

我只是

*   创建了一个全新的 ASP.NET MVC 3 Web 项目
*   使用 NuGet 安装了 Microsoft SQL Server CE 4.0 Membership & Role 提供程序（来自您的链接）
*   启动了那个应用程序
*   在我的 MVC 网站上注册并提供用户名和密码

在那之后：

*   我发现`aspnet.sdf`SQL Server CE 4.0 数据库位于我的`App_Data`文件夹中

所以基本上：***只需安装和使用它！***将根据需要创建数据库文件。

现在您有了一个`aspnet.sdf`数据库文件（只有一个用户），如果您愿意，您可以备份它并在未来的项目中使用它作为起点。

# android - Android 2d 绘图应用程序的最佳方法

> ID：11064817
> 
> 赞同：0
> 
> 时间：2012-06-16T15:36:16.140
> 
> 标签：android, 2d

我有一个关于为 Android 制作绘图应用程序的问题。最好的方法是什么？我想制作一个应用程序，让所有对象都可供用户使用。

我必须为此使用opengl吗？我想使用画布绘图方法，因为它更容易使用，但也许这对于我想要的来说是不可能的。

以及如何保持所有对象对用户可用？我需要使用大型数组列表吗？

谢谢指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:40:32.870

Android 开发者指南非常明确。如果您需要每秒绘制 3d 和/或多帧，那么 OpenGL 可能是最好的。对于“绘画”风格的绘图应用程序，`Canvas`应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:53:09.413

您可以使用 opengl 进行复杂的 3d 绘画，使用 canvas 进行 2d 绘画。

您还可以使用更易于使用的第三方库，例如[libgdx](http://code.google.com/p/libgdx/)和[andengine](http://www.andengine.org/)。

另一种选择是使用[renderscript](http://android-developers.blogspot.co.il/2011/02/introducing-renderscript.html)。

# java - 对数组中的元素执行算术运算 - android/java

> ID：11064818
> 
> 赞同：1
> 
> 时间：2012-06-16T15:36:39.457
> 
> 标签：java, android, arrays, logic

好吧，我的应用程序中的计算是这样的..

有一个编辑文本框，其中来自用户的 input(number) 被解析为 int 作为**nos**。

根据输入，出现另外两组编辑文本框。

如果 nos 为 3，则出现来自 arrayOfEditText 的 3 个 edittext 和来自 arrayOfEditText1 的 3 个 edittext.. 并且在这些 edittext 集中输入的值用于计算。

不完整的java代码如下..

```
 calculate.setOnClickListener(new View.OnClickListener() {
                            @Override public void onClick(View v) {
                    // TODO Auto-generated method stub
                    chk();          
}       
});     
}   
public void chk()   {   
            EditText[] arrayOfEditText = new EditText[11];
            arrayOfEditText[1] = ((EditText)findViewById(R.id.EditText01));
            arrayOfEditText[2] = ((EditText)findViewById(R.id.EditText02));
            arrayOfEditText[3] = ((EditText)findViewById(R.id.EditText03));
            arrayOfEditText[4] = ((EditText)findViewById(R.id.EditText04));
            arrayOfEditText[5] = ((EditText)findViewById(R.id.EditText05));
            arrayOfEditText[6] = ((EditText)findViewById(R.id.EditText06));
            arrayOfEditText[7] = ((EditText)findViewById(R.id.EditText07));
            arrayOfEditText[8] = ((EditText)findViewById(R.id.EditText08));
            arrayOfEditText[9] = ((EditText)findViewById(R.id.EditText09));
            arrayOfEditText[10] = ((EditText)findViewById(R.id.EditText10));

            EditText[] arrayOfEditText1 = new EditText[11];
            arrayOfEditText1[1] = ((EditText)findViewById(R.id.EditText11));
            arrayOfEditText1[2] = ((EditText)findViewById(R.id.EditText12));
            arrayOfEditText1[3] = ((EditText)findViewById(R.id.EditText13));
            arrayOfEditText1[4] = ((EditText)findViewById(R.id.EditText14));
            arrayOfEditText1[5] = ((EditText)findViewById(R.id.EditText15));
            arrayOfEditText1[6] = ((EditText)findViewById(R.id.EditText16));
            arrayOfEditText1[7] = ((EditText)findViewById(R.id.EditText17));
            arrayOfEditText1[8] = ((EditText)findViewById(R.id.EditText18));
            arrayOfEditText1[9] = ((EditText)findViewById(R.id.EditText19));
            arrayOfEditText1[10] = ((EditText)findViewById(R.id.EditText20));

            for(int i=1;i<=nos;i++)
            {
                if(arrayOfEditText[i].getText().toString().equals("")||arrayOfEditText1[i].getText().toString().equals(""))
                {
                    Toast.makeText(getApplicationContext(), "Dont leave points empty", 0).show();
                }
                else
                {
                    calcul();
                }
            }   }   public void calcul()    {       EditText[] arrayOfEditText = new EditText[11];
            arrayOfEditText[1] = ((EditText)findViewById(R.id.EditText01));
            arrayOfEditText[2] = ((EditText)findViewById(R.id.EditText02));
            arrayOfEditText[3] = ((EditText)findViewById(R.id.EditText03));
            arrayOfEditText[4] = ((EditText)findViewById(R.id.EditText04));
            arrayOfEditText[5] = ((EditText)findViewById(R.id.EditText05));
            arrayOfEditText[6] = ((EditText)findViewById(R.id.EditText06));
            arrayOfEditText[7] = ((EditText)findViewById(R.id.EditText07));
            arrayOfEditText[8] = ((EditText)findViewById(R.id.EditText08));
            arrayOfEditText[9] = ((EditText)findViewById(R.id.EditText09));
            arrayOfEditText[10] = ((EditText)findViewById(R.id.EditText10));

            EditText[] arrayOfEditText1 = new EditText[11];
            arrayOfEditText1[1] = ((EditText)findViewById(R.id.EditText11));
            arrayOfEditText1[2] = ((EditText)findViewById(R.id.EditText12));
            arrayOfEditText1[3] = ((EditText)findViewById(R.id.EditText13));
            arrayOfEditText1[4] = ((EditText)findViewById(R.id.EditText14));
            arrayOfEditText1[5] = ((EditText)findViewById(R.id.EditText15));
            arrayOfEditText1[6] = ((EditText)findViewById(R.id.EditText16));
            arrayOfEditText1[7] = ((EditText)findViewById(R.id.EditText17));
            arrayOfEditText1[8] = ((EditText)findViewById(R.id.EditText18));
            arrayOfEditText1[9] = ((EditText)findViewById(R.id.EditText19));
            arrayOfEditText1[10] = ((EditText)findViewById(R.id.EditText20));
                for(i=1;i<=nos;i++)
                {
                  //perform calculation
                }   } 
```

现在要在**//perform 计算**区域执行的逻辑是..

arrayofedittext[1]*arrayofedittext1[1] + arrayofedittext[2]*arrayofedittext1[2] + arrayofedittext[3]*arrayofedittext1[3] + *etc 基于**nos*** / arrayofedittext[1] + arrayofedittext[2] + arrayofedittext[3] +*等基于**nos***

那么有人可以帮我完成这个编码吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:03:37.090

**创建全局变量**

```
int[] intEditText new int[nos+1];
int[] intEditText1 new int[nos+1];
....
public void chk()   {   
int test=0;
try {

 for(int i=1;i<=nos+nos;i++) {
  if (i==1 && ((EditText)findViewById(R.id.EditText01))=="") {test=1;}
  if (i==2 && ((EditText)findViewById(R.id.EditText02))=="") {test=1;}
   .....etc.
  if (i==11 && ((EditText)findViewById(R.id.EditText11))=="") {test=1;}
  if (test==1) {
    Toast.makeText(getApplicationContext(), "Dont leave points empty", 0).show();
    break;
  } else {
    if (i==1) {intEditText[i]:=Integer.parseInt(((EditText)findViewById(R.id.EditText1));}
    if (i==2) {intEditText[i]:=Integer.parseInt(((EditText)findViewById(R.id.EditText2));}
    .... etc.
    if (i==11) {intEditText1[i-nos]:=Integer.parseInt(((EditText)findViewById(R.id.EditText11));}
    ....etc.

     calcul();
  {
 }

 } catch(NumberFormatException nbre) {
   System.out.println("Could not parse " + nbre);
 } 
}

public void calcul()    {
int myCalc;

  myCalc = intEditText[1]*intEditText[2]..... / (intEditText[1]*intEditText[2].....)
   //perform calculation
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T17:14:42.673

您执行相同操作的次数越少，您的应用程序运行速度就越快。所以 make`EditText[] arrayOfEditText`和`EditText[] arrayOfEditText1`类范围的变量，在 onCreate() 中定义一次，之后你就不必使用 findViewById() 了`R.id.EditText**`。

这是一个检查计算中的任何行是否为空的函数，如果不是，那么您`total`将拥有您想要的。

```
public void calculateTotal() {
    String first;
    String second;

    double firstNum;
    double numerator = 0;
    double denominator = 0;

    // This loops counts from nos down to 1\. It checks for empty strings and 
    //   sums up the numerator and denominator along the way.
    for(int index = nos; index > 0; index--) {
        first = arrayOfEditText[index].getText().toString();
        second = arrayOfEditText1[index].getText().toString();

        if(first.isEmpty() || second.isEmpty()) {
            Toast.makeText(getApplicationContext(), "Dont leave any points empty (" + (index + 1) + ")", Toast.LENGTH_LONG).show();
            return; // Invalid input, warn user and bail out of function!
        }

        firstNum = Double.parseDouble(first);
        numerator += firstNum * Double.parseDouble(second);
        denominator += firstNum;
    }

    // Do something with total
    double total = numerator / denominator;
} 
```

**更精细的点**

定义`arrayOfEditText`并`arrayOfEditText1`在整个类中可见，如下所示：

```
public class Example extends Activity {
    EditText[] arrayOfEditText = new EditText[11];
    EditText[] arrayOfEditText1 = new EditText[11];
    ...

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            ...  
            arrayOfEditText[1] = (EditText) findViewById(R.id.EditText01);
            etc, etc... 
```

你应该知道数组是一个零索引列表。`arrayOfEditText`因此，您的数组 (和`arrayOfEditText1`) 中的第一个条目是*null*，如果您尝试引用`arrayOfEditText[0]`期望 EditText ，您的应用程序将会崩溃。

最后，此代码假定每个 EditText 都是有效的 Double，如果您不限制非数字条目，则添加检查非常简单。

# node.js - 使用 Node.js 在 Heroku 上使用 Socket.io 和 Redis

> ID：11064826
> 
> 赞同：4
> 
> 时间：2012-06-16T15:38:31.483
> 
> 标签：node.js, heroku, redis, socket.io

我正在尝试使用带有 Redis 的 Node.js 和 Socket.io 将应用程序部署到 Heroku。我已经将 Socket.io 设置为使用[Heroku 指定的](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku)XHR 长轮询，如果我只有一个测功机，它可以完美地工作，但是当我将它缩放以使用多个测功机时它就不起作用了。

最初我在 Socket.io 中使用 MemoryStore，当我使用“heroku ps:scale web=2”对其进行扩展时，它开始间歇性地工作，并在客户端出现此错误：

> 未捕获的类型错误：对象#<Transport> 的属性“打开”不是函数

我在[Socket.io 文档](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)中发现*“如果你想扩展到多个进程和/或多个服务器，你可以使用我们的 RedisStore，它使用 Redis NoSQL 数据库作为中间人”*

所以，我创建了一个 RedisStore：

```
var newRedisStore = new RedisStore({
  redisPub : pub,
  redisSub : sub,
  redisClient : client
}); 
```

并配置了 Socket.io 来使用它：

```
//set up Web Socket Server
io.configure(function () { 
  io.set("transports", ["xhr-polling"]);
  io.set("polling duration", 10);
  io.set('store', newRedisStore);
}); 
```

这一切都可以在本地完美运行，并且在 Heroku 中使用一个 web dyno。但是，一旦我将它扩展到多个进程，它就会间歇性地开始不再工作，尽管现在我不再收到错误了。所以，我不知道从这里去哪里。

这些是我从 Heroku 获得的具有 2 个进程的日志：

> 2012-06-16T15:36:12+00:00 app[web.2]：调试：设置轮询超时
> 2012-06-16T15:36:12+00:00 app[web.2]：调试：清除轮询超时
> 2012-06-16T15:36:12+00:00 app[web.2]：调试：xhr-polling 写入
> 7:::1+0 2012-06-16T15:36:12+00:00 app[web. 2]：警告：客户端未
> 握手客户端应重新连接 2012-06-16T15:36:12+00:00
> app[web.2]：调试：为客户端设置关闭超时 15718037491002932534
> 2012-06-16T15:36:12+00 ：00 应用程序 [web.2]：调试：清除
> 客户端 15718037491002932534 的关闭超时 2012-06-16T15:36:12+00:00 应用程序 [web.2]：
> 信息：传输端（错误）2012-06-16T15： 36:12+00:00 app[web.2]：
> 调试：丢弃传输

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:05:26.433

您是否尝试过使用 Node 中的 Cluster 模块？ [http://nodejs.org/api/cluster.html](http://nodejs.org/api/cluster.html)

喜欢：

```
var cluster = require('cluster');
var http = require('http');
var numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  // Fork workers.
  for (var i = 0; i < numCPUs; i++) {
    cluster.fork();
  }

  cluster.on('death', function(worker) {
    console.log('worker ' + worker.pid + ' died');
  });
} else {
  // Worker processes have a http server.
  http.Server(function(req, res) {
    res.writeHead(200);
    res.end("hello world\n");
  }).listen(8000);
} 
```

或者：

```
var cluster = require('cluster');
var http = require('http');
var numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  // Fork workers.
  for (var i = 0; i < numCPUs; i++) {
    cluster.fork();
  }
} else {
  var sio = require('socket.io')
  , RedisStore = sio.RedisStore
  , io = sio.listen(8080, options);

  // Somehow pass this information to the workers
  io.set('store', new RedisStore);

  // Do the work here
  io.sockets.on('connection', function (socket) {
    socket.on('chat', function (data) {
      socket.broadcast.emit('chat', data);
    })
  });
} 
```

就像你[在这里](https://stackoverflow.com/questions/8563401/node-js-multi-threading-and-socket-io)看到的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:22:32.263

heroku 的缩放是使用 heroku ps:scale {number} 完成的，你不能在那里产生进程。我现在有同样的问题。

[https://github.com/LearnBoost/socket.io/issues/939](https://github.com/LearnBoost/socket.io/issues/939)

# visual-studio-2010 - 无法对使用 Visual Studio 生成的 .NET 应用程序进行数字签名

> ID：11064828
> 
> 赞同：-1
> 
> 时间：2012-06-16T15:39:00.740
> 
> 标签：visual-studio-2010

我正在尝试了解 .NET 应用程序的签名过程。我正在使用 Visual Studio 2008 和 2010，在项目的属性页面上，我们有一个名为`Signing`. 我相信这个页面允许我签署我的 ClickOnce 清单和/或我的程序集。在客户端计算机上安装我的应用程序后，我希望 exe 文件已签名，但似乎并非如此（右键单击客户端计算机上已安装的 .exe 文件并选择属性，我们没有任何数字签名选项卡）。

经过一番搜索，我读到：*Visual Studio 项目的“属性”页面下的“签名”选项卡允许您对 ClickOnce 清单进行签名，以及对程序集执行强名称签名。但是，它与签署应用程序的可执行文件无关。*

有人能解释一下为什么通过 Visual Studio 签名没有在我的 .exe 文件上给出数字签名吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:17:30.703

ClickOnce 应用程序清单的 Authenticode 签名用于验证应用程序发布者的真实性，并确保 ClickOnce 应用程序自签名以来未被篡改。

在 ClickOnce 中，签名的是应用程序和部署清单，而不是可执行文件。这是因为这些组件将用于安装和启动应用程序。可执行文件仅在应用程序安装和启动后运行。如果任何可执行文件（或清单）在签名后发生更改，应用程序将不会运行。

如果您希望使用构建后步骤来签署应用程序的可执行文件，也可以这样做，但这不是提供 ClickOnce 使用的 Authenticode 完整性检查所必需的。

**编辑**：为了回答您的评论，我将使用程序集强名称来提供您的管理员执行其政策所需的证据。它简单有效。

# android - onPageScrolled() 没有被调用

> ID：11064831
> 
> 赞同：24
> 
> 时间：2012-06-16T15:39:17.100
> 
> 标签：android, android-viewpager

我正在尝试熟悉 ViewPager。我的代码如下。问题是没有调用 onPageChangeListener 方法。可能是什么问题？

```
public class TabsViewPagerFragmentActivity extends SherlockFragmentActivity implements ViewPager.OnPageChangeListener {

private ViewPager mViewPager;
private PagerAdapter mPagerAdapter;
private PageIndicator mIndicator;

private static final String[] CONTENT = new String[] { "Home", "Popular", "Chat", "Profile"};

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar bar = getSupportActionBar();

    View customview = LayoutInflater.from(this).inflate(R.layout.actionbar_custom_layout, null);

    ImageView im = (ImageView)customview.findViewById(R.id.add);

    /*im.getLayoutParams().height = h;
    im.getLayoutParams().width = h;*/

    bar.setCustomView(customview);
    bar.setDisplayShowCustomEnabled(true);
    bar.setDisplayShowTitleEnabled(false);
    bar.setDisplayShowHomeEnabled(false);
    // Inflate the layout
    setContentView(R.layout.tabs_viewpager_layout);

    // Intialise ViewPager
    this.intialiseViewPager();

    mIndicator = (TitlePageIndicator)findViewById(R.id.titles);
    mIndicator.setViewPager(mViewPager);

    TitlePageIndicator indicator = (TitlePageIndicator)findViewById(R.id.titles);

    indicator.setTextColor(0xAAfb891e);
    indicator.setSelectedColor(0xFFfb891e);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add("Search")
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    return true;
}

public int getCount() {
    return CONTENT.length;
}

protected void onSaveInstanceState(Bundle outState) {

    super.onSaveInstanceState(outState);
}
private void intialiseViewPager() {

    this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(),
                                            fragments);

    this.mViewPager = (ViewPager)super.findViewById(R.id.viewpager);
    this.mViewPager.setAdapter(this.mPagerAdapter);
    this.mViewPager.setOnPageChangeListener(this);

}

public void onPageScrolled(int position, float positionOffset,
        int positionOffsetPixels) {
    // TODO Auto-generated method stub

    System.out.println(positionOffsetPixels);

}

public void onPageSelected(int position) {
    // TODO Auto-generated method stub

    System.out.println(position);
}

public void onPageScrollStateChanged(int state) {
    // TODO Auto-generated method stub

    System.out.println(state);

}
} 
```

我的意思是我在滚动页面时没有在 Logcat 中打印任何内容。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-06-17T09:21:29.290

好吧，经过一些试验错误，我自己解决了这个问题。

由于我引入了 TitlePagerIndicator 'mIndicator'，我不得不调用**mIndicator.setOnPageChangeListener(this);** 而不是 mViewPager.setOnPageChangeListener(this);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T16:06:03.680

该`System.out`流不会打印到 Logcat。使用`Log`类代替`Log.d("MyApp","message")`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T16:05:10.167

你编写代码的方式我猜你正在实现`ViewPager.OnPageChangeListener`

改变

`this.mViewPager.setOnPageChangeListener(mIndicator);`

到

`this.mViewPager.setOnPageChangeListener(this);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T20:26:36.407

我遵循[了 ProgrAmmar](https://stackoverflow.com/a/11070229/3885362)的提示，但它对我不起作用。就我而言，我用

```
mIndicator.setCurrentItem(position); 
```

它工作得很好。

# css - CSS表格白色边框

> ID：11064837
> 
> 赞同：-1
> 
> 时间：2012-06-16T15:39:43.297
> 
> 标签：css, css-tables

我有 CSS 的问题。

该表正在创建白色边框，我不知道是什么问题。我已经检查了 CSS，但我不知道如何删除白色边框。

退房： [电子烟评论.com](http://www.electroniccigarettereviewss.com/)

您可以看到 Rank 和 Name 标题之间的白色边框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:43:55.397

您应该从规则中删除`width`and`float`属性。`.table_bg`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:51:16.533

您`td`s 中的宽度不等于`table`.
表格行总是希望与表格本身一样宽，因此如果您`table`的宽度为 600 像素，并且`td`s 的总和较少，则浏览器会在每个 s 上添加一点以`td`使其适合。

在这种情况下，`td`根据规格（即您的来源）宽度为 83 的最左边最终在屏幕上为 117px 宽。

解决方案：手动计算`td`宽度应该是多少，或者将宽度排除在 之外`table`，或者使用百分比而不是像素。

# c++ - C++类中的动态数组

> ID：11064840
> 
> 赞同：0
> 
> 时间：2012-06-16T15:40:17.867
> 
> 标签：c++, dynamic, array-initialization

我有一个动态数组，我用我的类中的一个函数为它分配内存：

```
double *val;
int n; // dimension

void alloc (int nn) { // memory allocation for vector
    n = nn;
    val = new double[n];
} 
```

但是当我尝试将数据放入 main 中时，我遇到了以下问题：

当我输入：

```
a.val[3] = {1.0 , 1.0 , 1.0}; 
```

我收到以下非常模棱两可的错误：

```
syntax error : missing ';' before '{'
syntax error : '{' 
```

但是当我输入：

```
a.val[1]=1.0;
a.val[2]=1.0;
a.val[3]=1.0; 
```

它工作得很好。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:44:30.420

您只能以这种方式初始化数组：

```
double a[3] = {1.0, 1.0, 1.0}; 
```

您的替代方案是：

```
void alloc (int nn) { // memory allocation for vector
    n = nn;
    val = new double[n];

    // one option is:
    for (int i = 0; i < n; i++)
    {
        val[i] = 1.0;
    }    

    // or you can also do: (thanks to Benjamin)
    std::fill_n(val, n, 1.0);

    // or:
    std::fill(val, val + n, 1.0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:44:33.010

`a.val[3] = {1.0 , 1.0 , 1.0};`

这仅适用于初始化。

在您的情况下，您首先动态分配了初始化发生的空间。

这将起作用

```
float val[3]={1.0,1.0,1.0}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T16:46:05.080

您只能使用 {data} 进行初始化，但如果您仍想使用它来设置多个值，请尝试以下操作：

```
double values[3] = {1.0, 2.0, 3.0};
memcpy(&(a.val), &values, sizeof(values)); 
```

# php - 如果域不是本地主机，Opencart 仅缓存

> ID：11064843
> 
> 赞同：0
> 
> 时间：2012-06-16T15:40:31.830
> 
> 标签：php, opencart

如果域不是本地主机，我将如何在 opencart 中只写入/获取缓存？

负责缓存的类是；

```
class Cache { 
    private $expire = 3600; 

    public function __construct() {
        $files = glob(DIR_CACHE . 'cache.*');

        if ($files) {
            foreach ($files as $file) {
                $time = substr(strrchr($file, '.'), 1);

                if ($time < time()) {
                    if (file_exists($file)) {
                        unlink($file);
                    }
                }
            }
        }
    }

    public function get($key) {
        $files = glob(DIR_CACHE . 'cache.' . preg_replace('/[^A-Z0-9\._-]/i', '', $key) . '.*');

        if ($files) {
            $cache = file_get_contents($files[0]);

            return unserialize($cache);
        }
    }

    public function set($key, $value) {
        $this->delete($key);

        $file = DIR_CACHE . 'cache.' . preg_replace('/[^A-Z0-9\._-]/i', '', $key) . '.' . (time() + $this->expire);

        $handle = fopen($file, 'w');

        fwrite($handle, serialize($value));

        fclose($handle);
    }

    public function delete($key) {
        $files = glob(DIR_CACHE . 'cache.' . preg_replace('/[^A-Z0-9\._-]/i', '', $key) . '.*');

        if ($files) {
            foreach ($files as $file) {
                if (file_exists($file)) {
                    unlink($file);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:45:22.730

只是一个快速补丁...

**在你的 get 函数中**

```
public function get($key) {
   if ($_SERVER['REMOTE_ADDR'] == '127.0.0.1') {return;} 
```

**在你的 set 函数中**

```
public function set($key, $value) {
   if ($_SERVER['REMOTE_ADDR'] == '127.0.0.1') {return; } 
```

但是请记住，当您即将修补 opencart 的核心时，您可以使用[VQmod](http://code.google.com/p/vqmod/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:46:17.457

改变`get`方法：

```
 if ($files && $_SERVER['HTTP_HOST'] !== 'localhost') { 
```

您也可以使用相同的逻辑`set`来保存磁盘写入。

# c# - 为什么 String == "" 在 Java 中返回 false 而在 C# 中却没有？

> ID：11064849
> 
> 赞同：1
> 
> 时间：2012-06-16T15:40:58.240
> 
> 标签：c#, java, string

我有一个用 Java 和 C# 编写的简单递归方法

**爪哇**

```
public static String reverse(String letter) {
    if (letter == "")
        return "";
    else
        return letter.substring(letter.length() - 1)
                + reverse(letter.substring(0, letter.length() - 1));
} 
```

**C＃**

```
public static string reverse(string letter)
{
    if (letter == "")
        return "";
    else
        return letter[letter.Length - 1]
                + reverse(letter.Substring(0, letter.Length - 1));
} 
```

但是 Java 版本在 时失败`letter == ""`，即使字母为空，它也会返回 false。为什么 C# 版本可以工作，而 Java 版本失败？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T15:53:42.727

在 C# 和 Java 中，运算符*默认*`==`检查引用相等性。

 *但是，在 .NET 中，`==`运算符被重载`string`以检查值是否相等：

```
public static bool operator ==(string a, string b)
{
    return string.Equals(a, b);
} 
```

使用这两种语言时需要考虑的另一个因素是字符串暂留，它甚至可以导致可能出现不同的字符串的引用相等成功。来自[MSDN](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)（对于 C#）：

> 公共语言运行时通过维护一个称为实习池的表来保存字符串存储，该表包含对程序中以编程方式声明或创建的每个唯一文字字符串的单个引用。因此，具有特定值的文字字符串的实例在系统中只存在一次。
> 
> 例如，如果您将相同的文字字符串分配给多个变量，则运行时会从实习池中检索对文字字符串的相同引用并将其分配给每个变量。

字符串实习适用于 Java 和 C#，通常会提供一致的结果。例如，两种语言都在编译时评估字符串连接，这意味着`"a" + "b"`存储为`"ab"`：

```
"ab" == "a" + "b"                                      // Java: Gives true
object.ReferenceEquals("ab", "a" + "b")                // C#:   Gives true 
```

但是，当获取长度为零的子字符串时，只有 C# 返回内部空字符串：

```
"" == "abc".substring(0, 0)                            // Java: Gives false
object.ReferenceEquals("", "abc".Substring(0, 0))      // C#:   Gives true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T15:42:52.930

因为对于对象，运算符 `==`测试引用的相等性。您必须始终使用`equals`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-16T15:44:21.527

字符串是一个对象。

当您使用 时`==`，您正在进行身份比较。这意味着这`a == b`是在询问`a`和是否`b`是同一个对象。

变量`letter`和常量对象`""`不是同一个对象，所以你得到错误。

相反，您应该使用：

`letter.equal("")`

这是询问`letter`对象是否具有等于 的值`""`，这就是您要问的意思。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-16T15:42:05.037

有几种方法可以做到这一点：

1.  为了比较 Java 中的字符串，我们必须使用`.equals()`or`.equalsIgnoreCase()`方法。`... if (letter.equals("")) { ...`
2.  检查长度可以判断此字符串长度是否为 0。`... if (letter.length() == 0) { ...`
3.  `(letter.length() == 0)`在 Java 中有等价的 for 。那就是`.isEmpty()`方法。

**顺便说一句：**
别忘了`if (letter == null)`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-16T15:50:12.290

在java`==`中比较两个变量是否包含相同的*对象*。常量`""`可能始终是 String 的不同实例，即使两个实例可能包含相同的字符串值。

如果你想比较对象的*内容*，那么对于字符串，你可以这样做：

字母.等于（“”）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-16T16:03:59.093

在 Java 中，

运算符`==`比较变量中的值。

因此，在原始类型变量的情况下，它将起作用，因为变量中的值是原始类型的实际值。

例如

```
 int a = 1;
 int b = 2;

 if(a == b) { 
```

在上面它正在做你认为它正在做的事情。

* * *

但是，在引用类型变量的情况下，变量中的值是对它们所指向的对象的引用。

因此，如果您想进行身份检查（即您想查看两个不同的变量是否指向同一个对象），那么您必须使用`==`. 如果变量引用了两个不同的对象（对象的内容相同不相关），这将返回 false。

但是，如果您要尝试的是对象的内容，那么您必须使用`equals`方法（但您必须确保该`equals`方法已正确实现）。

例如

```
String a = "a";
String b = new String("a");

if(a == b) { //... identity check (returns false)

//...

if(a.equals(b)) { //... comparing the contents (returns true) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-16T15:46:14.350

因为你在比较引用，使用[String.equals](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)或[String.equalsIgnoreCase](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-16T15:48:09.343

您应该使用`equals`类似的方法，`letter.equals("")`因为相等运算符 ( `==`) 最终比较对象的引用而不是值。

此外，更好的做法是`C#`使用`string.Empty``""`

```
if (letter == string.Empty) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-06-16T15:42:53.837

== 适用于字符串对象（（在 google 中查找字符串池 java），但您应该（并且必须）真正使用 .equals()。*

# ember.js - 查看 emberjs 自动生成的 id

> ID：11064862
> 
> 赞同：1
> 
> 时间：2012-06-16T15:42:57.287
> 
> 标签：ember.js, auto-generate

嗨，我是 Embers 和 stackoverflow 的新手。我已经在这个问题上工作了一周。我正在尝试用余烬制作一个可编辑的表格，但主要问题是为我的隐藏文本字段自动生成一个 ID。在我的车把模板中，我正在生成这种文本字段：

```
{{view Ember.TextField id="first_input_" class="hidden"}} 
```

但我想打电话给 HandlebarsHelper，他会给我该行的编号，如下所示：

```
{{view Ember.TextField id="first_input_"{{{getId}}}  class="hidden"}} 
```

作为我的车把助手是这样的：

```
Handlebars.registerHelper('getId', function() {
    id = id + 1;
    return new Handlebars.SafeString(id);
}); 
```

我希望有人能帮我解决这个问题，我想不使用 Ember.TextField 而只是一个正常的输入，但为了绑定而使用 ember 可能更容易。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:54:14.277

我注意到的第一件事是您错误地将引号放在该行中：

```
{{view Ember.TextField id="first_input_"{{{getId}}}  class="hidden"}} 
```

我不确定这是在 StackOverflow 中编写时的拼写错误，但如果您在 chrome 中进行测试，我认为 chrome 会在输出 HTML 之前剥离数据。

另外我认为车把（ ember 后面的模板）会引发解析错误。

您可以在此处 ( [tryhandlebarjs](http://tryhandlebarsjs.com/) ) 尝试基本的车把模板游乐场。

另外，我认为 id = id + 1 在没有任何实例化的方式上有问题。解析器有可能在那里触发错误。但我必须做一些检查。

# ruby - 处理“解密失败或坏记录 mac”类型的 OpenSSL 错误的正确方法是什么？

> ID：11064866
> 
> 赞同：1
> 
> 时间：2012-06-16T15:43:36.303
> 
> 标签：ruby, openssl, ssl

我正在用 Ruby 编写一个 SMTP 服务器，我试图找出处理 SSL/TLS 错误“解密失败或坏记录 mac”的正确方法是什么

重试操作会从#read_nonblock 中吐出随机垃圾，除了粗鲁和关闭连接之外，我不知道该怎么办

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:13:13.770

您自己是这里的服务器，该消息将表明 OpenSSL 无法正确解密客户端发送的 TLS 记录，或者 MAC 计算失败，即客户端的标签与您计算的标签不匹配。

除了错误或网络错误（如 EJP 所述）外，如果有人主动更改了发送的内容、发送了错误的消息或仅发送了部分消息等，也会发生这种情况。

无论如何，作为服务器，您*不想*尝试挽救这样的连接。毕竟，这可能是一次攻击。处理此事件的正确方法是调用`SSLSocket#close`which 将尝试执行 a [`SSL_shutdown`](http://www.openssl.org/docs/ssl/SSL_shutdown.html)which 将再次尝试向客户端发送“关闭通知”警报，这是告诉对等方您即将关闭它的优雅 TLS 方式联系。

为了恢复与发生这种情况的客户端的通信，您将协商一个从头开始的新连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T19:06:12.803

你不能处理它。这是您的 SSL 库或对等方的错误，或者是极不可能的网络错误。只需关闭连接。

# php - 你在 Doctrine2 和 Symfony2 中使用存储库吗？

> ID：11064867
> 
> 赞同：0
> 
> 时间：2012-06-16T15:43:42.217
> 
> 标签：php, oop, design-patterns, symfony, soa

我正在尝试找到设计我的应用程序以及精确地设计我的域模型的最佳方法。

我看了大部分 FOS*Bundle ，他们抽象出这样的东西：

```
Model/
- AbstractUser.php
- AbstractUserManager.php
Entity/
- User.php
- UserManager.php 
```

他们根本不使用 Repository，所有工作都在 Manager 类中完成。

我曾经做过类似的事情，但以不同的方式。

我没有用抽象和接口抽象域模型（看起来这绝对是要走的路），但我只有实体（FOS 的主要目标是与存储无关并允许使用 ODM 或 ORM） .

所以我有这样的结构：

```
Model/
- Entity/
-- User.php
- Repository/
-- UserRepository.php
Service/
- UserService.php 
```

你敢打赌，它与FOS`UserService`中的类似，但它主要是.`UserManager``UserRepository`

你怎么看？

你如何组织你的领域模型，你有什么反馈吗？

FOS 时尚潮流吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:30:54.907

对于我的捆绑包，我通常使用这种方法：

实体/

*   用户.php

存储库/

*   用户存储库.php

服务/

*   用户服务.php

# jquery - 使用 jQuery 处理独立于浏览器的键码

> ID：11064870
> 
> 赞同：2
> 
> 时间：2012-06-16T15:44:04.713
> 
> 标签：jquery, cross-browser, jquery-events

jQuery 是否支持为独立编程翻译依赖于浏览器的键码？我有一些这样的代码

```
$("#container").delegate("input", "keyup", function(event){
    if(event.which == 107){
        event.preventDefault();
        addSomething();         
    }
}); 
```

这应该在我按下`$(document)`时添加一些新元素。`+`显然，这在 Chrome 中不起作用，因为 Chrome 的键码恰好是 187。我想，这应该是一个常见的问题，并假设，有一种方法可以使用与已经独立于浏览器`+`的信息不同的信息？`event`我发现，-key 有一种方法[。](https://stackoverflow.com/questions/7962025/combining-keycode-events-in-jquery)`shift`但这是否适用于所有键，这是否被证明适用于每个浏览器？我想到了类似的东西

```
...
if(event.+){ //or maybe if(event.plus){
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:41:46.027

有[https://github.com/jeresig/jquery.hotkeys/blob/master/jquery.hotkeys.js](https://github.com/jeresig/jquery.hotkeys/blob/master/jquery.hotkeys.js)，作者是 Tzury Bar Yochay 和 John Resig。这几乎可以处理任何按键[向下/向上/按下]的情况。

# oracle - 带有oracle的嵌套表的构造函数

> ID：11064871
> 
> 赞同：1
> 
> 时间：2012-06-16T15:44:04.650
> 
> 标签：oracle, constructor, plsql, user-defined-types, nested-table

我想为以下两种类型创建一个构造函数。这是代码：

```
create or replace type toys_t as table of varchar2(40);

create or replace type kid_t as object (
      name varchar2(10), 
      toys toys_t,
      constructor function kid_t (name varchar2) return self as result);

create table kid of kid_t nested table toys store as table_toys; 
```

有没有办法为嵌套表类型创建用户定义的构造函数，`toys_t`还是只支持使用`as object`语法创建的类型？

谢谢

鲍勃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:50:33.710

自动有一个用于集合的构造函数，例如`toys_t`. 只需使用集合的名称

```
SQL> insert into kid values( 'Bobby', toys_t( 'Bike', 'Ball', 'Legos' ));

1 row created. 
```

构造`toys_t`函数可以采用 0、1 或多个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T16:47:19.853

不，我们不能为像您的`toys_t`表这样的类型声明用户定义的构造函数。集合类型（嵌套表或可变数组）只有默认构造函数。我们所能做的就是指定一个默认值，当我们实例化一个不带任何参数的集合时应用该默认值。 [了解更多。](http://docs.oracle.com/cd/B19306_01/appdev.102/b14260/adobjcol.htm#CHDDFHFB)

# objective-c - drawAtPoint，需要澄清

> ID：11064872
> 
> 赞同：0
> 
> 时间：2012-06-16T15:44:11.840
> 
> 标签：objective-c, ios

我想在屏幕上的某个位置绘制“文本”而不​​使用`UILabel`，所以我

```
[@"text" drawAtPoint:CGPointMake(100, 200) 
     withFont:[UIFont fontWithName:@"Arial" size:10.0]]; 
```

然而，什么都没有出现，尽管描述`drawAtPoint`如下：

> 使用指定字体在当前图形上下文中的指定点处以单行方式绘制字符串。

我怀疑，我的错误是我在我的`UIViewController's` `viewDidLoad`方法中调用它，而不是放在视图上？**（但是怎么做？）**

**同样，使用这种方式并避免使用 UILabel，如何将文本放置在自定义位置的屏幕上？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:52:34.007

如果要将字符串绘制到视图中，则需要将视图子类化并实现 drawRect 方法

```
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    [[UIColor whiteColor] set];
    [@"Your string" drawInRect:CGRectMake(0, 0, 100, 100) withFont:[UIFont systemFontOfSize:16]];
} 
```

> 没有放在视图上？（但是怎么做？）

这是因为字符串将在您在 drawRect 中调用它时有效的当前上下文中绘制，如果您从 viewDidLoad 调用 [@"Your string" drawInRec... 它将不起作用，因为您没有有效的上下文

> 同样，使用这种方式并避免使用 UILabel，如何将文本放置在自定义位置的屏幕上？

使用`NSString`来回绘图而不是`UILabel`，您可以使用`drawInRect:withFont`

# php - 如何按名称或名称前缀删除 cakephp 缓存文件？

> ID：11064873
> 
> 赞同：0
> 
> 时间：2012-06-16T15:44:19.220
> 
> 标签：php, cakephp, caching, cakephp-2.0

在 cakephp 2.0 中，我将从文件中的某些服务调用中为个人用户缓存一些信息。使用单个 user_id 作为缓存文件名的前缀，我将文件缓存在自定义缓存配置下，该配置保存在**缓存**文件夹下的文件夹中。

就像，如果服务名称是**get_user_info**并且自定义缓存文件夹名称是**user_info**，那么对于用户说 user_id:111 ，将在**cache/user_info****中**缓存一个名称为 111_get_user_info 的文件。

 **如果我需要删除此用户的缓存信息：111，我做不到。因为**Cache::clear(false, 'user_info')**删除了**cache/user_info**下的所有缓存文件，因此其他用户缓存的信息也被删除了。

谁能建议我如何使用前缀匹配清除缓存文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:57:00.163

有什么理由`delete`不成立？

```
Cache::delete($key); 
```

?

参考：[http ://book.cakephp.org/2.0/en/core-libraries/caching.html#CacheEngine::delete](http://book.cakephp.org/2.0/en/core-libraries/caching.html#CacheEngine::delete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:57:44.350

您可以使用`clearCache($file)`$file 需要类似的功能：

```
$file = "myprefix_the_complete_name_with_extension.php"; 
```

您需要创建整个路径来传递蛋糕。

如果此解决方案适合您，请随时通知我。

此致。**

# c# - 在 Windows Azure 上测试 WCF 服务

> ID：11064875
> 
> 赞同：0
> 
> 时间：2012-06-16T15:44:30.623
> 
> 标签：c#, wcf, deployment, azure

我在 Windows Azure 项目中创建了一个 WCF 服务（具有 1 个 WCF 服务 Web 角色）。

如何在本地机器上测试它？如果我想编写一个向该服务发出请求的应用程序，我应该在应用程序中添加什么引用？

当我在这个项目中按 F5 时，它会在浏览器中显示一个网页，上面写着“HTTP error 403.14 - Forbidden”。

对不起这么愚蠢的问题=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:49:05.553

使用 Azure 上公开的服务的 uri 添加对测试项目的服务引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T17:18:40.503

将 Azure 项目设置为启动项目。这将启动 azure 模拟器，它将在 localhost 上托管您的 wcf 服务。我相信它会自动打开一个浏览器并加载您的网站。如果没有，您可以随时在系统托盘中检查模拟器本身以获取端口（非常类似于您使用开发服务器的方式）。当然，您也必须走在通往服务的正确道路上。

# iphone - 首选项（NSUserDefaults）崩溃？

> ID：11064881
> 
> 赞同：1
> 
> 时间：2012-06-16T15:44:46.207
> 
> 标签：iphone, crash, nsuserdefaults

我不时遇到这个崩溃，在我知道的一个不是我启动的线程中，提到了 CFXPreferencesPropertyListSourceSynchronizer 和 CFXPreferencesPropertyListSource。我确实有一个单独的线程来访问 NSUserDefaults。（NSUserDefaults 应该是线程安全的。）有人知道这里出了什么问题吗？

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x444e4128
Crashed Thread:  5

Thread 5 name:  Dispatch queue: CFPreferences Background Sync Queue
Thread 5 Crashed:
0   libobjc.A.dylib                 0x34ec4f78 objc_msgSend + 16
1   CoreFoundation                  0x3710de90 CFRetain + 76
2   CoreFoundation                  0x3718aa96 __CFDictionaryStandardRetainValue + 62
3   CoreFoundation                  0x37114fe0 CFBasicHashCreateCopy + 832
4   CoreFoundation                  0x37124f50 CFDictionaryCreateMutableCopy + 388
5   CoreFoundation                  0x3712d340 -[CFXPreferencesPropertyListSourceSynchronizer initWithPropertyListSource:forLockedSynchronize:] + 232
6   CoreFoundation                  0x371b4800 __79-[CFXPreferencesPropertyListSource synchronizeInBackgroundWithCompletionBlock:]_block_invoke_0 + 56
7   libdispatch.dylib               0x302e5c52 _dispatch_call_block_and_release + 6
8   libdispatch.dylib               0x302f0ca4 _dispatch_queue_drain + 268
9   libdispatch.dylib               0x302f0b12 _dispatch_queue_invoke$VARIANT$up + 30
10  libdispatch.dylib               0x302f1784 _dispatch_worker_thread2 + 208
11  libsystem_c.dylib               0x33a34df4 _pthread_wqthread + 288
12  libsystem_c.dylib               0x33a34cc8 start_wqthread + 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:45:00.177

它崩溃了，`CFRetain`所以我最好的猜测是你过度释放了一些键或值，或者你使用了非对象作为键或值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:04:08.340

确实是我的错，我未能在属性设置器中正确保留 self.string 对象。

它所关注的对象并不容易找到。调试器和僵尸对象有助于判断确实存在引用的已释放对象，但我无法通过调试器找出十六进制地址引用的对象是什么。不使用 gdb，也不使用 lldb。“po”告诉我“0x ...似乎没有指向有效对象”。

最后，我通过以十六进制打印出它的地址来找出它所关注的对象：

```
NSLog( @"self.text=%@ self.text=(%p)", self.text,self.text); 
```

并在日志和错误消息中看到该地址。

# c# - C# WMI hyper-v 创建后将 VHD 添加到“IDE Con troller 0”

> ID：11064882
> 
> 赞同：2
> 
> 时间：2012-06-16T15:45:11.950
> 
> 标签：c#, wmi, hyper-v

我可以在 Hyper-V 中创建一个名为“LON-DEV-01”的 VM，但现在我想添加 VHD“D:\Program Files\Microsoft Learning\10175\Drives\LON-DEV-01.vhd”以 IDE Con​​troller 0 作为主驱动器。

我已经设法将机器内存设置为 8192 并将处理器设置为 4，但在这里我被难住了。

一直在寻找几个小时，但一无所获。

# mysql - 如果表不为空，则将表值更新为 1

> ID：11064883
> 
> 赞同：1
> 
> 时间：2012-06-16T15:45:19.483
> 
> 标签：mysql, null

我有一个包含很多字段的表格，我想总结数据的“完整性”。为此，我计划将更新写入汇总表。

我的问题如下：

```
Table1 (the data table)
DataID
Data1
Data2

Table2 (the summary table)
DataID
Data1 (NULL YES or NO - 0 or 1)
Data2 (NULL YES or NO - 0 or 1) 
```

基本上，我想对 Table2 运行更新查询，它与 DATAID 匹配，然后如果 NOT NULL 则将标志更新为 1，如果 NULL 则更新为 0

我知道这是相当基本的，但我仍在学习 SQL，所以请善待 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:06:36.953

尝试这个：

```
UPDATE  
 table2 t2, table1 t1  
SET  
 t2.Data1 = IF( t1.Data1 is null, 0, 1 ),  
 t2.Data2 = IF( t1.Data2 is null, 0, 1 )  
WHERE  
 t2.DataID=? and t1.DataID=t2.DataID; 
```

将`?`查询参数设置为所需的`DataID`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T17:22:35.297

```
UPDATE
    table2 a
INNER JOIN
    table1 b ON a.dataID = b.dataID
SET
    a.data1 = b.data1 IS NOT NULL,
    a.data2 = b.data2 IS NOT NULL
WHERE
    a.dataID = ? 
```

# android - 如何使用在我的应用程序之后安装的应用程序中定义的 Android 权限

> ID：11064885
> 
> 赞同：0
> 
> 时间：2012-06-16T15:45:55.587
> 
> 标签：android, android-manifest

当我尝试在我的应用程序中使用权限时，我遇到了安全异常，该权限实际上是在另一个应用程序中使用“权限”标签定义的，该应用程序将在我的应用程序之后安装。

请告诉我如何避免这种情况？

Q.1) 有没有办法确保我的应用程序仅在其他应用程序之后安装，以便按预期授予权限？

Q.2) 有没有其他方法可以解决这个问题。

我想到的一种解决方法是在我的应用程序中定义该权限。这样，我的清单文件中的相同权限字符串将同时具有“权限”和“使用权限”标签。这样做可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:30:09.343

@CommonsWare：感谢您的回复。

但我想获得一个我不想卸载并重新安装以前的应用程序的解决方案。

无论如何，我尝试安装 2 个声明具有相同权限的应用程序，并且这两个应用程序都安装得很好，没有遇到任何权限名称冲突。

因此，现在在 2 个不同的应用程序中定义相同的权限似乎对我来说是可行的解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:00:52.120

> Is there a way to make sure my app will get installed only after other app so that permission will be granted as expected?

Unfortunately, no.

> Is there any other way to fix this issue.

Let's say that App A is the one defining the permission and App B is the one using the permission. If the user installs App B before App A, you will need to ask the user to uninstall App B and reinstall it after installing App A.

> One work around I thought of is to define that permission in my app as well. In that way I'll have both "permission" and "use-permission" tag for the same permission string in my manifest file. Is this ok to do like this?

I suspect that the second app to try to declare the permission will fail to install due to the permission name collision, but I have not tried this and therefore cannot be certain.

# data-binding - MVVM - 如果选中复选框，则绑定到复选框

> ID：11064888
> 
> 赞同：7
> 
> 时间：2012-06-16T15:46:15.447
> 
> 标签：data-binding, mvvm

我想将字符串值绑定到文本框，但前提是选中了复选框。因此，如果选中该复选框，我希望文本框显示消息 1，如果没有，则显示消息 2。

做这个的最好方式是什么？在我的对象中使用 List 属性是否更好，然后取决于复选框是否被选中取决于显示 List<> 中的哪个项目

或者

在选中复选框然后重新绑定后，只更新对象的属性（这次是字符串类型）会更好吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-16T16:58:56.687

这是一种 MVVM 类型的方法，假设您了解 INotifyPropertyChanged（您需要！）。玩它，随时询问您遇到的任何问题。

# 虚拟机（视图模型代码）

```
public class MyViewModel : INotifyPropertyChanged {

    const string Msg1 = "blah 1";
    const string Msg2 = "blah 2";

    private bool _isSelected;
    public bool IsSelected{
        get { return _isSelected; }
        set {
            if(_isSelected == value) return;

            _isSelected = value;
            MyBoundMessage = _isSelected ? Msg1 : Msg2;

            NotifyPropertyChanged(()=> IsSelected);
            NotifyPropertyChanged(()=> MyBoundMessage);
        }
    }

    public string MyBoundMessage {get;set;}
} 
```

五（查看 XAML）

```
<CheckBox IsChecked="{Binding IsSelected}" />
<TextBox Text="{Binding MyBoundMessage}" /> 
```

# java - Google Guice 嵌套辅助注入

> ID：11064895
> 
> 赞同：0
> 
> 时间：2012-06-16T15:46:59.830
> 
> 标签：java, dependency-injection, guice

我有一个看起来像这样的工厂：

```
public class Factory {

    public Client createClient(String url) {
        UrlBuilder urlBuilder = new UrlBuilder(url);

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpProcessor processor = new CompressionHttpProcessor();
        httpClient.addRequestInterceptor(processor);
        httpClient.addResponseInterceptor(processor);

        return new Client(httpClient, urlBuilder);
    }
} 
```

像这样的一个类：

```
public class Facade {

    private Factory factory;
    private String url;

    public Facade(Factory factory) {
        this.factory = factory;
    }

    public void doStuff() {
        Client client = factory.createClient(url);
        // do stuff with client
    }

    public void setUrl(String url) {
        this.url = url;
    }
} 
```

我如何正确使用 Google Guice 来做同样的事情？我尝试了辅助注射，但我不确定如何创建“UrlBuilder”。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:59:37.373

> Guice 减少了 Java 代码中对工厂的需求和 new 的使用。

您的`factory`代码似乎违反了该原则。

您可能需要重新设计*外观*，以便它`client`通过注入（使用 setClient）方法接收对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:16:50.590

我创建了一个包含 URL 的 Setting 类并执行了以下操作：

```
public MyModule extends AbstractModule {
    private final Settings settings;
    public MyModule(Settings settings) {
        this.settings = settings;
    }

    // configure

    @Provides
    private UrlBuilder createUrlBuilder(Settings settings) {
        return new UrlBuilder(settings.getUrl());
    }
} 
```

它有点工作，但我不确定我是否喜欢它。

# iphone - UITextView 防止字符在负号和数字之间换行

> ID：11064896
> 
> 赞同：0
> 
> 时间：2012-06-16T15:47:02.123
> 
> 标签：iphone, objective-c, cocoa-touch, uitextview, word-wrap

我有一个 UITextView，我在其中显示计算结果。不幸的是，如果数字前面有一个负号，并且该数字靠近边缘，UITextView 会通过将其拆分为负号来包装数字，如下所示：

当前行为：

答案 = -
123456789

相反，我希望它显示：

答案 =
-123456789

在当前行为中，存在用户看不到减号并曲解答案的风险。

为了解决这个问题，我可以在答案前面强制换行，但有时整个字符串会放在一行上，在这种情况下，如果答案足够短，我宁愿把它全部放在一行上。有没有一种简单的方法可以防止 UITextView 在减号之间换行，还是我需要辞职以强制换行？

有时答案的第一部分有几个词，并且本身也可能需要换行，所以换句话说，如果我只是强制换行，它可能看起来像这样：

计算结果
为
-2

但在那种情况下，我宁愿在“is”一词旁边保留“-2”，这样它就会如下所示：

计算结果
为-2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:51:14.227

使用两个标签怎么样？仅当其宽度高于某个值时，您才能放置带有“向下一行”数字的那个...

编辑：你肯定需要两个标签。在确定每个文本之后，在两者上应用“sizeToFit”并流畅地布置它们，就像 HTML 内联元素一样：如果两者并排放置在一行中，很好；否则一个低于另一个。

UILabel 中不包含您想要的换行逻辑。你必须自己实现它。

（也许 UITextView 的行为略有不同？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:23:40.293

我想您可以解析前面带有负号的数字，然后`\n`在该数字前面插入换行符 ( )。UITextView 将接受换行符；我用过它们。

如果您想在数字足够小的情况下将数字保持在同一行，您将需要提出一种更优雅的方法来以编程方式确定数字是否有足够的字符留在一行，或者它是否已移动到两个.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T16:32:07.043

为了呈现数字结果，最好的方法是使用 NSNumberFormatter 并且数字旁边总是有 - 符号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T20:40:23.413

谢谢大家的回答！这给了我一些想法，并且能够解决问题。我希望这可以帮助其他有类似问题的人。首先，再次澄清问题陈述，结果如下形式：

```
NSString * result = [NSString stringWithFormat:@"%@ = %@", answerString, answerNumber]; 
```

通过计算 UITextView 内容视图中的行数（[How do I size a UITextView to its content?](https://stackoverflow.com/questions/50467/how-do-i-size-a-uitextview-to-its-content)），我能够通过以下方法解决问题：

首先，比较有答案和没有答案的 UITextView 中的行数。如果行数不同，那么这意味着 UITextView 已经决定将结果换行，在这种情况下，我应该重新格式化结果以在数字前手动添加换行符，以确保负号（数字的一部分）是新行的第一个字符：

```
- (int) numberOfLines: (NSString *) result {

    UITextView *myTextView = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, 255, 0)];

    myTextView.text = result;

    CGRect frame = myTextView.frame;
    frame.size.height = myTextView.contentSize.height;
    myTextView.frame = frame;

    int numLines = myTextView.contentSize.height / myTextView.font.lineHeight;

    return numLines;
}

- (NSString *) formatResult: (NSString *) answerString answerNumber: (NSString *) answerNumber {

    NSString * resultWithoutAnswer = [NSString stringWithFormat:@"%@ = ", answerString];
    NSString * resultWithAnswer = [NSString stringWithFormat:@"%@ = %@", answerString, answerNumber];
    NSString * result = resultWithAnswer;

    if ([self numberOfLines:resultWithoutAnswer] != [self numberOfLines:resultWithAnswer]) {
        // If these are different, then UITextView has added a line break before the answer. To prevent UITextView from potentially splitting the number across the negative sign, manually add a line break to ensure that the negative sign shows on the same line as the number.
        result = [NSString stringWithFormat:@"%@ = \n%@", answerString, answerNumber];
    }
    return result;
} 
```

# javascript - var 名称和 window.name

> ID：11064897
> 
> 赞同：9
> 
> 时间：2012-06-16T15:47:04.023
> 
> 标签：javascript

如果我定义一个名为 的 JavaScript 全局变量`name`，是否会隐藏 window.name 属性？

我在 Facebook JavaScript 身份验证 API 的上下文中问这个问题，因为我注意到拥有该名称的全局名称会破坏它，而且我看到`window.name`他们的代码中使用了它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T15:51:06.473

如果`name`是一个全局变量，那么`name`和`window.name`是等价的。

全局变量和函数是全局对象的成员。在浏览器中，全局对象包含一个窗口成员，其值为全局对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T15:49:06.800

如果您在全局范围内使用 声明一个变量`var`，它将在全局对象上创建一个属性或写入一个现有的（如`name`）：

```
var name = 5;
console.log(window.name === '5');  // true
console.log(name === '5');  // true
console.log(Object.getOwnPropertyDescriptor(window, 'name'));
    // object with get and set

var foo = 6;
console.log(Object.getOwnPropertyDescriptor(window, 'foo'));
    // object with value

Object.defineProperty(window, 'bar', {
    writable: false,
});

var bar = 7;  // throws in strict mode

var baz;
console.log('baz' in window);  // true 
```

如果你用`let`or声明它`const`，它不会：

```
const name = 5;
console.log(window.name);  // likely an empty string
console.log(name === 5);  // true
console.log(Object.getOwnPropertyDescriptor(window, 'name'));
    // same as var

const foo = 6;
console.log(window.foo);  // undefined
console.log(Object.getOwnPropertyDescriptor(window, 'foo'));
    // undefined

Object.defineProperty(window, 'bar', {
    writable: false,
});

const bar = 7;  // succeeds

let baz;
console.log('baz' in window);  // false 
```

# django - 如何更改 os.environ dict 在应用程序范围内可用

> ID：11064900
> 
> 赞同：1
> 
> 时间：2012-06-16T15:47:17.220
> 
> 标签：django, google-app-engine, python-2.7

在我的应用程序引擎/django 应用程序`main.app`中，控件实际上是由 django WSGI 处理程序处理的，我设置`DJANGO_SETTINGS_MODULE`如下：

```
from django.conf import settings
settings._target = None

os.environ['DJANGO_SETTINGS_MODULE'] = 'settings' 
```

但是当我尝试在其他视图中获取它时：

```
y=os.environ['DJANGO_SETTINGS_MODULE'] 
```

它给了我关键错误。如何设置价值应用范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T20:49:12.440

当使用 Python 2.7 运行时，os.environ 实际上是一个线程本地字典，它会影响 WSGI 环境。您可以尝试一件事：在 appengine_config.py 中设置它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T14:13:43.967

您可以在 app.yaml 文件中定义为每个请求设置的环境变量。请参阅： [https ://developers.google.com/appengine/docs/python/config/appconfig#env_variables](https://developers.google.com/appengine/docs/python/config/appconfig#env_variables)

# fancybox - fancybox 中没有导航箭头，一切都在 rel 中分组。有什么问题？

> ID：11064901
> 
> 赞同：0
> 
> 时间：2012-06-16T15:48:03.243
> 
> 标签：fancybox

一切正常，无需在视频和图片之间导航箭头，我在我的网站的 java 中有这个：

```
<script type="text/javascript">
$(document).ready(function(){
    $(".fancyYoutube").click(function() {
    $.fancybox({
    'padding'       : 0,
    'autoScale'     : false,
    'overlayShow'   :   false,
    'transitionIn'      : 'elastic',
    'transitionOut'     : 'elastic',
    'showNavArrows'     : true,
    'title'     : this.title,
    'width'     : 680,
    'height'        : 495,
    'href'      : this.href.replace(new RegExp("watch\\?v=","i"), 'v/'),
    'type'      : 'swf',
    'swf' : {
    'wmode' : 'transparent',
    'allowfullscreen' : 'true'
    }
    });
    return false;
    });
}); 
```

这是我的 html 代码（混合视频/图片部分）：

```
<a class="fancyYoutube" title="KravMAGA" href="../img/auto.jpg" rel="grupa"><img src="http://i4.ytimg.com/vi/ci-pBX9lQKQ/default.jpg"></a>
        <a class="fancyYoutube" title="KRAVMAGA" href="http://www.youtube.com/watch?v=zcUUVHhlAjE&feature=plcp&autoplay=1" rel="grupa"><img src="http://i3.ytimg.com/vi/zcUUVHhlAjE/default.jpg"></a>
        <a class="fancyYoutube" title="KravMAGA" href="http://www.youtube.com/watch?v=zcUUVHhlAjE&feature=plcp&autoplay=1" rel="grupa"><img src="http://i3.ytimg.com/vi/bJCp9PW_KaA/default.jpg"></a>
        <a class="fancyYoutube" title="KRAVMAGA" href="http://www.youtube.com/watch?v=ci-pBX9lQKQ&autoplay=1" rel="grupa"><img src="http://i4.ytimg.com/vi/ci-pBX9lQKQ/default.jpg"></a>
        <a class="fancyYoutube" title="KravMAGA" href="../img/auto.jpg"><img src="http://i3.ytimg.com/vi/bJCp9PW_KaA/default.jpg"rel="grupa"></a> 
```

而且我没有任何导航箭头，为什么？在css中一切都很好，每个图像（精灵）都与fancybox.css在同一个文件夹中我做错了什么？

```
#fancybox-left {
    left: -50px;
}

#fancybox-right {
right: -50px;
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:50:26.417

问题是您正在使用`.click()`带有 fancybox v1.3.4 的手动方法。除非您在脚本中设置它，否则没有办法拥有这样的画廊

```
$(".fancyYoutube").click(function(){
 $.fancybox([
  {"href": "TARGET HERE"},
  {"href": "TARGET HERE"} // more as you need them
 ],{
  // fancybox options here
 });
}); 
```

此外，您正在尝试使用相同的脚本设置不同类型的对象（图像和视频）的画廊，这也是不可能的。

[Fancybox v2.x](http://fancyapps.com/fancybox/)已经克服了这些问题，您可以使用助手轻松设置图库`fancybox-media`，但想知道是否正在考虑升级。

就像保留当前的 ​​html 并加载*fancybox.js*和*fancybox-media.js*文件一样简单。

那么脚本就很简单了

```
$(".fancyYoutube").fancybox({
 helpers : { 
  media : {} 
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T07:43:24.790

对于像这样的版本 2 - [http://jsfiddle.net/nn4Tg/](http://jsfiddle.net/nn4Tg/)

您可能想要使用媒体助手来使直接链接起作用。

# symfony - Symfony2 带注释的路由

> ID：11064902
> 
> 赞同：5
> 
> 时间：2012-06-16T15:48:05.210
> 
> 标签：symfony, annotations

我正在尝试使用 symfony2 中的注释来定义我的路线。我的 Bundle 名称是 PatentBundle。但我收到一个错误

```
No route found for "GET /portfolio/ 
```

我的 app/config/routing.yml

```
MunichInnovationGroupPatentBundle:
resource: "@MunichInnovationGroupPatentBundle/Controller/"
type:     annotation
prefix:   /
defaults:  { _controller: "MunichInnovationGroupPatentBundle:Default:index" } 
```

我的投资组合控制器看起来像

```
<?php
 namespace MunichInnovationGroup\PatentBundle\Controller;

 use MunichInnovationGroup\PatentBundle\Entity\Log;

 use MunichInnovationGroup\PatentBundle\Entity\UserPatent;
 use Symfony\Component\HttpFoundation\Response;
 use Symfony\Component\HttpFoundation\Request;
 use JMS\SecurityExtraBundle\Annotation\Secure;
 use Symfony\Component\Security\Core\Exception\AccessDeniedException;
 use Symfony\Bundle\FrameworkBundle\Controller\Controller;
 use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
 use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
 use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
 use MunichInnovationGroup\PatentBundle\Entity\SvPatents;
 use MunichInnovationGroup\PatentBundle\Entity\PmPortfolios;
 use MunichInnovationGroup\PatentBundle\Entity\UmUsers;
 use MunichInnovationGroup\PatentBundle\Form\PatentType;
 use MunichInnovationGroup\PatentBundle\Entity\PmPatentgroups;
 use Symfony\Component\Security\Core\SecurityContext;
 use MunichInnovationGroup\PatentBundle\Util\SecurityHelper;
 use Exception;

/**
 * Portfolio controller.
 * @Route("/portfolio")
*/
class PortfolioController extends Controller {

/**
 * Index action.
 *
 * @Route("/", name="portfolio")
 * @Method({"GET", "POST"})
 * @Template("MunichInnovationGroupBundle:Portfolio:show.html.twig")
 */
public function indexAction(Request $request) {
      // method code goes here
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T16:27:49.870

```
# app/config/routing.yml

MunichInnovationGroupPatentBundle:

    resource: "@MunichInnovationGroupPatentBundle/Controller/DefaultController.php"
    type:     annotation
    prefix:   / 
```

控制器应具有：

```
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T16:39:22.520

如果您在开发环境中，请检查您在 routing_dev.yml 中导入 routing.yml：

```
# app/config/routing_dev.yml

_main:
    resource: routing.yml 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-09-19T05:06:21.733

在您的捆绑包中添加以下代码`MunichInnovationGroup/PatentBundle/Resources/config/routing.yml`

```
_admin_emailTemplate:
    pattern: admin/emailTemplate
    defaults: {_controller: DashboardEmailTemplateBundle:Default:index }
requirements: { _method: GET | POST } 
```

以上只是捆绑的一个例子。您只需发布粗体文本“要求”。

# python - 尽管声明了 dtype=int64，但仍会出现 Numpy 溢出

> ID：11064908
> 
> 赞同：3
> 
> 时间：2012-06-16T15:49:07.313
> 
> 标签：python, numpy

我正在从雅虎下载标准普尔 500 指数的股票价格，该指数的交易量对于 32 位整数来说太大了。

```
def yahoo_prices(ticker, start_date=None, end_date=None, data='d'):

    csv = yahoo_historical_data(ticker, start_date, end_date, data)

    d = [('date',      np.datetime64),
         ('open',      np.float64),
         ('high',      np.float64),
         ('low',       np.float64),
         ('close',     np.float64),
         ('volume',    np.int64),
         ('adj_close', np.float64)]

    return np.recfromcsv(csv, dtype=d) 
```

这是错误：

```
>>> sp500 = yahoo_prices('^GSPC')
Traceback (most recent call last):
  File "<stdin>", line 108, in <module>
  File "<stdin>", line 74, in yahoo_prices
  File "/usr/local/lib/python2.6/dist-packages/numpy/lib/npyio.py", line 1812, in recfromcsv
    output = genfromtxt(fname, **kwargs)
  File "/usr/local/lib/python2.6/dist-packages/numpy/lib/npyio.py", line 1646, in genfromtxt
    output = np.array(data, dtype=ddtype)
OverflowError: long int too large to convert to int 
```

如果我将 dtype 声明为使用 int64，为什么我仍然会收到此错误？这是否表明 io 函数并没有真正使用我的 dtype 序列`d`？

===编辑...添加示例 csv===

```
Date,Open,High,Low,Close,Volume,Adj Close
2012-06-15,1329.19,1343.32,1329.19,1342.84,4401570000,1342.84
2012-06-14,1314.88,1333.68,1314.14,1329.10,3687720000,1329.10
2012-06-13,1324.02,1327.28,1310.51,1314.88,3506510000,1314.88 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T17:28:37.857

我不确定，但我认为你在 numpy.xml 中发现了一个错误。我[在这里](https://github.com/numpy/numpy/issues/311)归档。

正如我在那里所说，如果您打开 npyio.py 并在其中编辑此行`recfromcsv`：

`kwargs.update(dtype=kwargs.get('update', None),`

对此：

`kwargs.update(dtype=kwargs.get('dtype', None),`

然后它对我有用，对于长整数没有问题（我没有像乔在他的回答中写的那样检查日期时间的正确性）。您可能会注意到您的日期也没有被转换。这是有效的特定代码。“test.csv”的内容是从您的示例 csv 数据中复制粘贴的。

```
import numpy as np
d = [('date',      np.datetime64),
    ('open',      np.float64),
    ('high',      np.float64),
    ('low',       np.float64),
    ('close',     np.float64),
    ('volume',    np.int64),
    ('adj_close', np.float64)]
a = np.recfromcsv("test.csv", dtype=d)
print(a)

[ (datetime.datetime(1969, 12, 31, 23, 59, 59, 999999), 1329.19, 1343.32, 1329.19, 1342.84, 4401570000, 1342.84)
 (datetime.datetime(1969, 12, 31, 23, 59, 59, 999999), 1314.88, 1333.68, 1314.14, 1329.1, 3687720000, 1329.1)
 (datetime.datetime(1969, 12, 31, 23, 59, 59, 999999), 1324.02, 1327.28, 1310.51, 1314.88, 3506510000, 1314.88)] 
```

# 更新：如果你不想修改 numpy，只需使用相关的 numpy 代码进行 recfromcsv

我还通过在 datetime 字段中使用本机 python 对象“修复”了 datetime 问题。我不知道这是否对你有用。

```
import datetime
import numpy as np

d = [('date',     datetime.datetime),
    ('open',      np.float64),
    ('high',      np.float64),
    ('low',       np.float64),
    ('close',     np.float64),
    ('volume',    np.int64),
    ('adj_close', np.float64)]

#a = np.recfromcsv("test.csv", dtype=d)
kwargs = {"dtype": d}
case_sensitive = kwargs.get('case_sensitive', "lower") or "lower"
names = kwargs.get('names', True)
kwargs.update(
    delimiter=kwargs.get('delimiter', ",") or ",",
    names=names,
    case_sensitive=case_sensitive)
output = np.genfromtxt("test.csv", **kwargs)
output = output.view(np.recarray)

print(output) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T17:23:29.383

您需要将日期字符串转换为实际日期。您的 dtype 中的格式将被忽略，因为第一列无法直接转换为日期时间。

`numpy`期望您相当明确并且拒绝猜测日期格式。

（编辑：以前是这样，但现在不是了。）

它需要日期时间对象。看看`dateutil.parser`你是否想从字符串中猜测日期/时间格式。

无论如何，您将需要以下内容：

```
from cStringIO import StringIO
import datetime as dt
import numpy as np

dat = """Date,Open,High,Low,Close,Volume,Adj Close
2012-06-15,1329.19,1343.32,1329.19,1342.84,4401570000,1342.84
2012-06-14,1314.88,1333.68,1314.14,1329.10,3687720000,1329.10
2012-06-13,1324.02,1327.28,1310.51,1314.88,3506510000,1314.88"""
infile = StringIO(dat)

d = [('date',      np.datetime64),
     ('open',      np.float64),
     ('high',      np.float64),
     ('low',       np.float64),
     ('close',     np.float64),
     ('volume',    np.int64),
     ('adj_close', np.float64)]

def parse_date(item):
    return dt.datetime.strptime(item, '%Y-%M-%d')

data = np.recfromcsv(infile, converters={0:parse_date}, dtype=d) 
```

然而，像这样的事情是`pandas`闪耀的地方。考虑使用类似下面的东西：

```
from cStringIO import StringIO
import pandas

dat = """Date,Open,High,Low,Close,Volume,Adj Close
2012-06-15,1329.19,1343.32,1329.19,1342.84,4401570000,1342.84
2012-06-14,1314.88,1333.68,1314.14,1329.10,3687720000,1329.10
2012-06-13,1324.02,1327.28,1310.51,1314.88,3506510000,1314.88"""

infile = StringIO(dat)
data =  pandas.read_csv(infile, index_col=0, parse_dates=True) 
```

# android - 动态创建 ExpandableListView

> ID：11064909
> 
> 赞同：0
> 
> 时间：2012-06-16T15:49:08.297
> 
> 标签：android, dynamic, expandablelistview

我正在尝试在我的应用程序中动态创建 ExpandableListView。父行显示接下来 7 天的日期，我从 Web 服务中检索子项。但是，获取和展示孩子不是我的问题。我在动态显示父行时遇到了麻烦。我需要在父行中显示接下来 7 天的日期。

我在全局范围内声明了这个空的字符串数组。

```
private String[] parent = new String[7]; 
```

然后，在 onCreate() 中，我使用此代码创建父数组内容。

```
Calendar cal = Calendar.getInstance();
    String strdate = null;
    SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");

    int i;
    for(i=0;i<7;i++)
    {

        if (cal != null) {
            strdate = sdf.format(cal.getTime());
            }
            parent[i] = strdate;
           cal.add(Calendar.HOUR_OF_DAY, 24);
    } 
```

但是，该活动在 MyExpandableListAdapter.getGroupView() 处给出了 NullPointerException。

（也许是因为父数组最初没有初始化？）

因为当我最初将父数组声明为时代码有效

```
private String[] parent = new String[] {"","","".....}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:02:35.810

我的解决方案：**静态块**是它的答案。我将用于创建父数组内容的代码放在静态块中，而不是`onCreate()`现在它就像一个魅力。

# c# - C# 函数在屏幕上给出形状的位置

> ID：11064911
> 
> 赞同：0
> 
> 时间：2012-06-16T15:49:19.450
> 
> 标签：c#, image, location, screen, shape

我正在尝试构建一个播放[HaxBall](http://www.haxball.com/)的机器人，所以我需要在屏幕上获取球的位置，一个白色的圆圈。我希望我能找到像

```
Point BallLocation()
{
//....
} 
```

无论是屏幕上的位置还是游戏屏幕上的位置，任何帮助都将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:15:01.180

假设这是来自图像 - 否则你肯定会有它的位置来绘制它？？？

如果它来自图像（可能是这样），那么有很多方法 - 最简单的假设是单一颜色背景，并简单地扫描每一行（或每 x 行，其中 x 是球直径减 1）寻找颜色的变化（这很容易使用计算机生成的图像，因为颜色应该是纯色的 - 不像照片会有数百万种色调）。

边缘检测对于游戏来说可能太昂贵了（例如[Canny-Edge-Detection-in-C#](http://www.codeproject.com/Articles/93642/Canny-Edge-Detection-in-C)）

# php - 以有效和简单的方式实现层次结构、亲子关系

> ID：11064913
> 
> 赞同：15
> 
> 时间：2012-06-16T15:50:09.340
> 
> 标签：php, mysql, sql, algorithm, hierarchical-data

我有一张像

```
create table site
(
site_Id int(5),
parent_Id int(5),
site_desc varchar2(100)
); 
```

字段的意义：

*   site_Id ：网站的 ID
*   parent_Id ：网站的父 ID
*   site_desc ：虽然与问题无关，但它有网站的描述

要求是，如果我有一个 site_id 作为输入，并且我需要在站点下方标记的所有 id。例如：

```
 A
                   / \
                  B   C
                / | \ /\
               D  E F G H
              /\
             I  J 
```

所有节点都是 site_Id。

该表包含如下数据：

```
Site_id  | Parent_ID  |  site_desc
_________|____________|___________
 A       |   -1       |   
 B       |    A       |
 C       |    A       |
 D       |    B       |
 E       |    B       |
 F       |    B       |
 I       |    D       |
 J       |    D       | 
```

……

A 是 B 和 C 的父级，依此类推。

如果 B 是给定的输入，则查询需要获取 D、E、I、F、J

它目前是通过循环中的多个查询来实现的，但我想用最少的查询来实现这一点。

我目前正在做的是::

否决票

算法是这样的：

```
Initially create a data set object which you will populate, by fetching data from the data base. 
Create a method which takes the parent id as parameter and returns its child nodes if present, and returns -1, if it doesnt have a child. 
Step1: Fetch all the rows, which doesn't have a parent(root) node. 
Step2: Iterate through this result. For example if prod1 and prod2 are the initial returned nodes, in the resultset. 
Iterating this RS we get prod1, and we insert a row in our DataSET obj. 
Then we send the id of prod1 to getCHILD method, to get its child, and then again we iterate the returned resultset, and again call the getCHILD method, till we dont get the lowest node. 
```

我需要在我的数据模型约束中使用最佳优化技术。如果您有任何建议，请随时回答。
请提出任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T23:48:33.407

不幸的是，如果您无法更改数据模型，并且您使用的是 MySQL，那么您就会陷入需要递归查询并且使用不支持递归查询的 DBMS 的情况。

Quassnoi 写了一系列有趣的博客文章，展示了查询分层数据的技术。他的解决方案非常聪明，但也非常复杂。 [http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)

PostgreSQL 是另一个开源 RDBMS，它确实[支持递归查询](http://www.postgresql.org/docs/9.2/static/queries-with.html)，因此您可以获取以您显示的方式存储的整个树。但是如果你不能改变数据模型，我会假设你不能切换到不同的 RDBMS。

有几种替代数据模型可以更轻松地获取任意深度的树：

*   [封闭表](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree/192462#192462)
*   嵌套集又名修改的预序树遍历
*   路径枚举又名物化路径

我在我的演讲[Models for Hierarchical Data with SQL and PHP](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)和我的书[SQL Antipatterns: Avoiding the Pitfalls of Database Programming](http://pragprog.com/book/bksqla/sql-antipatterns)中介绍了这些内容。

最后，我在[Slashdot](http://slashdot.org/)的代码中看到了另一种解决方案，用于他们的注释层次结构：他们像在邻接列表中一样存储“parent_id”，但他们也存储“root_id”列。给定树的每个成员都具有相同的 root_id 值，它是其树中最高的祖先节点。然后很容易在一个查询中获取一整棵树：

```
SELECT * FROM site WHERE root_id = 123; 
```

然后您的应用程序将所有节点从数据库中取回到一个数组中，您必须编写代码来循环遍历该数组，将节点插入内存中的树数据结构中。如果您有许多单独的树，并且每棵树的条目相对较少，这是一个很好的解决方案。这对 Slashdot 的情况有好处。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-17T06:53:29.737

昨天，我已经[回答](https://stackoverflow.com/a/11497724/1446794)了这个与您描述的问题完全相关的问题：[在](https://stackoverflow.com/q/11497202/1446794)*给定的邻接列表中，您想要获取特定父节点的所有子节点*- 并且可能在一维数组中，您可以轻松地迭代。

您可以只使用一次对数据库的调用来做到这一点，但有一个问题：您必须返回表中的***所有***行。MySQL 不支持递归查询，因此，您实际上必须`SELECT`在应用程序代码中执行 ing。

我只是要重申我在上面链接到的答案，但基本上如果您以`PDOStatement->fetchAll(PDO::FETCH_ASSOC)`如下格​​式返回结果集（可能来自或其他方法）：

```
Array
(
    [0] => Array
    (
        [site_id] => A
        [parent_id] => -1
        [site_desc] => testtext
    )
    [1] => Array
    (
        [site_id] => B
        [parent_id] => A
        [site_desc] => testtext
    )
    [2] => Array
    (
        [site_id] => C
        [parent_id] => A
        [site_desc] => testtext
    )
    [3] => Array
    (
        [site_id] => D
        [parent_id] => B
        [site_desc] => testtext
    )
    [4] => Array
    (
        [site_id] => E
        [parent_id] => B
        [site_desc] => testtext
    )
    [5] => Array
    (
        [site_id] => F
        [parent_id] => B
        [site_desc] => testtext
    )
    [6] => Array
    (
        [site_id] => I
        [parent_id] => D
        [site_desc] => testtext
    )
    [7] => Array
    (
        [site_id] => J
        [parent_id] => D
        [site_desc] => testtext
    )
) 
```

`site_id`您可以使用此递归函数检索任何（假设您知道 id）的所有子/孙/曾孙/等等：

```
function fetch_recursive($src_arr, $id, $parentfound = false, $cats = array())
{
    foreach($src_arr as $row)
    {
        if((!$parentfound && $row['site_id'] == $id) || $row['parent_id'] == $id)
        {
            $rowdata = array();
            foreach($row as $k => $v)
                $rowdata[$k] = $v;
            $cats[] = $rowdata;
            if($row['parent_id'] == $id)
                $cats = array_merge($cats, fetch_recursive($src_arr, $row['site_id'], true));
        }
    }
    return $cats;
} 
```

例如，假设您想检索 的所有子项`site_id` `D`，您将使用如下函数：

```
$nodelist = fetch_recursive($pdostmt->fetchAll(PDO::FETCH_ASSOC), 'D');
print_r($nodelist); 
```

会输出：

```
[0] => Array
(
    [site_id] => D
    [parent_id] => B
    [site_desc] => testtext
)
[1] => Array
(
    [site_id] => I
    [parent_id] => D
    [site_desc] => testtext
)
[2] => Array
(
    [site_id] => J
    [parent_id] => D
    [site_desc] => testtext
) 
```

请注意，我们保留了父级的信息，以及它的子级、孙子级等（无论嵌套有多深）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-16T16:07:47.127

如果您希望能够在单个查询中执行此操作，请查看嵌套集模型：http: [//mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

另一种选择是将所有关系包含在链接表中。因此，每个站点都会有一个指向其父级、祖父级等的链接。每个关系都是明确的。然后您只需查询该链接表以获取所有后代。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T19:12:08.547

你可能想看看**闭包表**模式。我发现这个[网站内容](http://www.mysqlperformanceblog.com/2011/02/14/moving-subtrees-in-closure-table/)丰富。据我所知，还有几个关于这个概念的 StackOverflow 问题，例如，[here](https://stackoverflow.com/questions/12046260/mysql-closure-table-wont-support-duplicate-sub-category-for-different-parents)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-14T18:39:37.783

首先，我会推荐一种不同的存储树的方法：*Closure Table*。如果你想了解更多，你会发现[SQL Antipatterns](http://pragprog.com/book/bksqla/sql-antipatterns)这本书很有趣。

那就是说。在我看来，生成这种结构的最简单方法是：http: [//jsbin.com/omexix/3/edit#javascript](http://jsbin.com/omexix/3/edit#javascript)

我希望你在阅读 JavaScript 代码时没有问题。我之所以使用它，是因为在 JavaScript 中创建未分类的对象看起来并不那么骇人听闻。通过使用多维数组可以在不中继对象（或引用）的情况下实现相同的功能，但它看起来有点混乱。

这是算法的作用：

*   我们遍历节点列表，**一次**
*   如果节点的父节点不存在，则在数组中创建占位符
*   如果节点没有父节点，则将其放在根节点列表中
*   如果节点在数组中没有占位符，则创建占位符
*   来自节点的值分配给占位符
*   节点注册到父节点，如果它有父节点

这是关于它的。基本上你会生成两个列表：所有节点，只有根节点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-01T21:42:44.843

根据您在此处的评论，我假设您不愿意更改现有的数据模型，因为数百个应用程序正在使用它（如果用其他东西替换它会中断）。

问题的根源在于，对于任何站点，我们只知道它是直接父站点，因此我们需要递归查找该父站点的父站点，直到找到根站点。

如果您可以摆脱对站点可以嵌套的深度/级别的限制，那么您可以编写一个出色的查询来为您完成所有工作，并且启动速度可能不会那么慢。触发查询的大部分开销来自设置连接、网络带宽等。MySQL 可以非常快。

触发多个查询会使所有开销成倍增加，所以我们不希望这样。执行 SELECT * 然后在应用程序逻辑中计算意味着您每次都会获取所有数据，从而最大化网络开销，所以我们不希望这样。

如果可以接受树的深度限制，您可以将多个查询组合成一个巨大的查询，该查询完成所有工作并返回您需要的确切结果集。作为示例，我使用了您的数据，但将 A、B、C 等替换为 1、2、3（因为您的列是 int）。

要获取根节点的所有直接子节点（site_id = 1），请执行以下操作：

```
select site_id from site where parent_id = 1 
```

要获取根节点的孙子节点，请执行以下操作：

```
select grandchild.site_id 
from site grandchild, site child 
where grandchild.parent_id = child.site_id 
and child.parent_id = 1 
```

要获取根节点的曾孙，请执行以下操作：

```
select greatgrandchild.site_id 
from site greatgrandchild, site grandchild, site child 
where greatgrandchild.parent_id = grandchild.site_id 
and grandchild.parent_id = child.site_id 
and child.parent_id = 1 
```

要获取根节点的所有后代，只需将上述查询组合成一个巨大的查询，如下所示：

```
select site_id
from site
where site_id in (
    select site_id 
    from site 
    where parent_id = 1
)
or site_id in (
    select grandchild.site_id 
    from site grandchild, site child 
    where grandchild.parent_id = child.site_id 
    and child.parent_id = 1
)
or site_id in (
    select greatgrandchild.site_id 
    from site greatgrandchild, site grandchild, site child 
    where greatgrandchild.parent_id = grandchild.site_id 
    and grandchild.parent_id = child.site_id 
    and child.parent_id = 1
) 
```

我想你明白这是如何工作的。对于每个额外的级别，创建一个查询来查找与您正在搜索后代的站点相距那么多级别的节点，并将该查询添加到带有额外的“或 site_id in ()”的超级查询中......

现在如您所见，仅针对三个级别，这已经成为一个大查询。如果您需要支持 10 个级别，则此查询将变得巨大，并且其中的所有 OR 和 IN 都会减慢它的速度……但是，它仍然可能比获取所有内容或使用多个查询更快。如果您需要支持任意数量的可能级别，则此查询无法为您提供帮助。它必须变得无限大。在那种情况下，剩下的就是使用更好的方法......

也就是说，在您复制粘贴并开始编码之前，有一种方法可以避免如此庞大的查询，支持任意深度并且不会破坏向后兼容性。它确实需要对数据模型进行更改，但它是一个小改动，不会损害使用此数据模型的其他程序。简而言之...

**更好的方法**

添加一个额外的列 parent_paths，使用他的回答中提到的 ravnur 之类的东西来编码从每个节点一直到根的完整路径

使用插入、更新和删除[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)动态填充该列。您现在正在维护冗余数据。它不会损害其他程序，但可以为您的程序带来显着的性能优势。确保您的触发器是防弹的（这可能是最难的部分），因为额外列中的数据应始终与表中的常规数据同步

使用一个简短而甜蜜的查询，就像一个 ravnur 显示的那样，它在 parent_paths 列中的任何位置查找 site_id 的出现，以直接获取具有该 site_id 的站点的*所有*后代，而无需任何递归。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-31T08:28:25.693

您可以为此创建一个存储过程。

这是我在mysql中的实现

```
DROP PROCEDURE IF EXISTS SearchTree;
DELIMITER go

CREATE PROCEDURE SearchTree( IN root CHAR(1) )
BEGIN
  DECLARE rows SMALLINT DEFAULT 0;
  DROP TABLE IF EXISTS reached;
  CREATE TABLE reached (
    site_Id CHAR(1) PRIMARY KEY
  ) ENGINE=HEAP;
  INSERT INTO reached VALUES (root);
  SET rows = ROW_COUNT();
  WHILE rows > 0 DO
    INSERT IGNORE INTO reached 
      SELECT DISTINCT s.site_Id 
      FROM site AS s 
      INNER JOIN reached AS r ON s.parent_Id = r.site_Id;
    SET rows = ROW_COUNT();
    DELETE FROM reached 
      WHERE site_Id = root;
  END WHILE;
  SELECT * FROM reached;
  DROP TABLE reached;
END;
go
DELIMITER ;
CALL SearchTree('B'); 
```

它返回预期的结果。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-13T14:05:29.993

如果您不`site`经常更新表，则可以使用以下策略：

```
create table site
(
site_Id int(5),
parent_Id int(5),
site_desc varchar2(100),
parents_path varchar(X)
); 
```

`parents_path`等于从根到选定节点的路径。例如，对于叶子`J`，它应该是`|A|B|D|`。

优点： - 您将需要单个查询来获得结果；

缺点： - 更新期间的更多查询（但您可以明智地进行更新）；

希望能帮助到你

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-07-16T21:43:05.680

其他人已经提出了如何通过对表结构进行轻微修改来做到这一点。

如果您不想修改结构（即使这是最好的），那么您可以这样做：

*   SELECT * FROM site ORDER BY Parent_ID, Site_id;

通常可以安全地假设，一旦分配，ID 就不会改变；如果 ID 没有被打乱，即节点 C 没有移动到节点 B 下，那么子节点的 ID 总是高于其父节点，并且上面的排序将保证所有父节点在其子节点之前被获取.

所以这些是假设：

```
- we prefer not to change the table layout
- we never change the IDs once assigned
- we never reorder the tree, moving IDs around 
```

因此，可以在内存中创建树（甚至减少查询本身，添加 WHERE Site_ID >= B）。

第一个通过的节点将是 B，并将被放入树中。

所有后续节点都可能存储在它们的 Parent_ID-th 节点中，该节点之前肯定已经加载过。

这在 Python 中会很顺利（您直接修改父节点）。

请求“获取 B 的所有后代”可以在 PHP 中这样回答：

```
$nodes  = array( $parent_id );

$cursor = SQLQuery("SELECT * FROM site WHERE Site_ID > ? "
        .  "ORDER BY Parent_ID, Site_Id ;", $parent_id);

while ($tuple = SQLFetchTuple($cursor))
    if (in_array($tuple['Parent_ID'], $nodes))
        $nodes[] = $tuple['Site_Id'];
SQLFree($cursor);

// The first node is the global parent, and may be array_shift'ed away
    // if desired. 
```

**另一种方式**
*相当蛮力*

另一种可能性是将“descendant_of”关系递归地存储在另一个表中：

```
 TRUNCATE descendants;
    INSERT INTO descendants ( node, of ) VALUES ( -1, NULL );

    INSERT INTO descendants SELECT SiteId, ParentId FROM site JOIN
           descendants ON ( site.ParentId = descendants.of ); 
```

并重复插入，直到插入的行数等于零（或后代中的总行数停止增加；在大多数数据库中查询表大小非常快）。

此时，您将存储所有一级关系。现在：

```
INSERT IGNORE INTO descendants SELECT s1.node, s2.of FROM
           descendants AS s1 JOIN descendants AS s2 ON (s1.of = s2.node); 
```

...再次直到后代停止增加（它将需要插入数量等于最大级别数）。JOIN 的总数将是级别数的两倍。

现在如果要获取节点 16 的所有后代，只需查询

```
SELECT node FROM descendants WHERE of = 16; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-11-20T17:09:25.880

我还问自己如何递归查询关系，我的大脑产生了这个解决方案（：

```
SELECT * FROM
(
    SELECT t2.* FROM table t1, table t2 where t2.parent = t1.id OR t2.parent 0 GROUP BY t2.id, t2.parent
) as all_relations
WHERE all_relations.parent >= '_the_id_'

# if you dont want a subtree use only the inner select 
```

我不是 100% 确定，但我认为只要 id 是自动递增的并且孩子永远不会有一个较小的 id 作为他的父母（这应该是正常情况），那么这可能是一个解决方案吗？

# python - 在 Python 中生成一个数字序列

> ID：11064917
> 
> 赞同：45
> 
> 时间：2012-06-16T15:50:26.583
> 
> 标签：python, sequence

如何在 Python 中生成数字序列“1,2,5,6,9,10......”等直到 100？我什至需要包含逗号（'，'），但这不是主要问题。

序列：从 1..100 开始的每个数字，可被 4 整除，余数为 1 或 2。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-16T15:53:04.320

1,2,5,6,9,10... 中的每个数字都可以被 4 整除，余数为 1 或 2。

```
>>> ','.join(str(i) for i in xrange(100) if i % 4 in (1,2))
'1,2,5,6,9,10,13,14,...' 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-16T15:56:29.490

```
>>> ','.join('{},{}'.format(i, i + 1) for i in range(1, 100, 4))
'1,2,5,6,9,10,13,14,17,18,21,22,25,26,29,30,33,34,37,38,41,42,45,46,49,50,53,54,57,58,61,62,65,66,69,70,73,74,77,78,81,82,85,86,89,90,93,94,97,98' 
```

That was a quick and quite dirty solution.

Now, for a solution that is suitable for different kinds of progression problems:

```
def deltas():
    while True:
        yield 1
        yield 3
def numbers(start, deltas, max):
    i = start
    while i <= max:
        yield i
        i += next(deltas)
print(','.join(str(i) for i in numbers(1, deltas(), 100))) 
```

And here are similar ideas implemented using [itertools](https://docs.python.org/3/library/itertools.html#itertools.accumulate):

```
from itertools import cycle, takewhile, accumulate, chain

def numbers(start, deltas, max):
    deltas = cycle(deltas)
    numbers = accumulate(chain([start], deltas))
    return takewhile(lambda x: x <= max, numbers)

print(','.join(str(x) for x in numbers(1, [1, 3], 100))) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-16T15:56:25.627

Includes some guessing on the exact sequence you are expecting:

```
>>> l = list(range(1, 100, 4)) + list(range(2, 100, 4))
>>> l.sort()
>>> ','.join(map(str, l))
'1,2,5,6,9,10,13,14,17,18,21,22,25,26,29,30,33,34,37,38,41,42,45,46,49,50,53,54,57,58,61,62,65,66,69,70,73,74,77,78,81,82,85,86,89,90,93,94,97,98' 
```

As one-liner:

```
>>> ','.join(map(str, sorted(list(range(1, 100, 4))) + list(range(2, 100, 4)))) 
```

*(btw. this is Python 3 compatible)*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-03T14:42:43.020

这通过利用列表的 % 属性而不是增量来工作。

```
for num in range(1,100):
    if num % 4 == 1 or num % 4 ==2:
        n.append(num)
        continue
    pass 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-27T01:05:22.783

使用 numpy 和列表​​理解，你可以做到

```
import numpy as np
[num for num in np.arange(1,101) if (num%4 == 1 or num%4 == 2)] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T16:05:27.470

假设您的序列在 1 和 3 之间交替递增

```
numbers = [1]
while numbers[-1] < 100:
    numbers.append(numbers[-1] + 1)
    numbers.append(numbers[-1] + 3)

print ', '.join(map(str, numbers)) 
```

如果您的序列不同，这可能更容易修改，但我认为 poke 或 BlaXpirit 比我的答案更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-16T15:57:55.190

Assuming I've guessed the pattern correctly (alternating increments of 1 and 3), this should produce the desired result:

```
def sequence():
    res = []
    diff = 1
    x = 1
    while x <= 100:
        res.append(x)
        x += diff
        diff = 3 if diff == 1 else 1
    return ', '.join(res) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-28T13:37:50.840

编写一个函数，将数字作为参数并打印斐波那契数列直到该数字

```
def Series(n):  
    a = 0  
    b = 1  
    print(a)  
    print(b)  
    S = 0  
    for i in range(0,n):  
        if S <= n-1:  
            S = a + b  
            print(S)  
            a = b  
            b = S 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-06-16T16:08:30.387

在 python 3.1 中，您可以通过某种方式生成列表

```
 lst=list(range(100))
     for i in range(100)
        print (lst[i],',',end='') 
```

在 python 2.7 中，你可以这样做

```
 lst=range(100)
     for i in range(100)
        print lst[i]+',' 
```

# jquery - Wordpress 打破 jQuery 背景动画脚本

> ID：11064919
> 
> 赞同：0
> 
> 时间：2012-06-16T15:50:58.063
> 
> 标签：jquery, wordpress

当包含在 Wordpress 主题的标题中时，我在一个小的背景动画脚本上收到如下所示的错误 (73TypeError)，这会破坏脚本。当脚本包含在非 Wordpress 页面上时，我没有看到任何错误：

![在此处输入图像描述](../Images/aad94f4e9bbd6e50a5f99986adab7eb4.png)

这是脚本：

```
$(function() {
   $(".bottom").hover( function () {
      $(this).animate( {
         backgroundPosition : '0px 35px'}
      , 300); }
   , function () {
      $(this).animate( {
         backgroundPosition : '0px 0px'}
      , 600); }
   ); 
   }
); 
```

有人可以建议导致此错误的原因吗？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:10:07.903

在 wordpress 中拳头，jQuery 应该加载无冲突。因此，在这种情况下，您的文件应该是；

```
var $j = jQuery.noConflict();

$j(function() {
   $j(".bottom").hover( function () {
      $j(this).animate( {
         backgroundPosition : '0px 35px'}
      , 300); }
   , function () {
      $j(this).animate( {
         backgroundPosition : '0px 0px'}
      , 600); }
   ); 
   }
); 
```

其次，就像提到的未定义一样，您需要使用`wp-enqueue-script();`

为此，为了获得最佳实践，请将您的 jQuery 放在一个单独的文件中。例如调用它 bganimation.js

现在要在 wordpress 中加载该 js 文件，请使用 wp-enqueue-script(); 像这样。

```
function this_is_jquery_example(){
wp_enqueue_script( 'jquery' );;
wp_enqueue_script('myscript', plugin_dir_url(__FILE__) .' bganimation.js');

}
add_action('wp_enqueue_scripts','this_is_jquery_example'); 
```

希望这可以帮助。

# windows - Direct3D 窗口

> ID：11064930
> 
> 赞同：0
> 
> 时间：2012-06-16T15:51:41.183
> 
> 标签：windows, graphics, directx, sdl, direct3d

我想开始学习 Direct3D，但我无法完全专注于它，教程中 99% 的代码仅针对创建和维护一个窗口，我什至不关心。

我想知道是否有一种方法可以直接跳到 Direct3D 本身而不用担心窗口（想想 OpenGL 的 SDL 级别简单性）。

我读过那些据说使用过 SDL 和 D3D 的人的文章，但是在这个阶段，对 D3D 一无所知，这些文章对我来说都是中文的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:46:15.160

使用 Win32 API 创建窗口可能会花费一些时间，您必须填写一个结构来创建一个窗口类，然后调用一个带有大量参数的 CreateWindowEx 函数。但是，一旦您将该代码粘贴到辅助函数中，您下次需要 d3d 窗口时所要做的就是：

```
 D3DWindow window = createD3DWindow(800,600,32);

   while(window.running)
   {
     window.handleInput();
     window.render();
   } 
```

您可以从任何 SDK 示例中获取创建代码并将其放入您的库/源代码中，然后直接跳转到在屏幕上放置三角形。

[http://msdn.microsoft.com/en-us/library/ff729718.aspx](http://msdn.microsoft.com/en-us/library/ff729718.aspx)应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:43:07.753

获取以下书籍之一：[http ://www.amazon.co.uk/s/ref=ntt_athr_dp_sr_1?_encoding=UTF8&field-author=Frank%20D.%20Luna&search-alias=books-uk](http://www.amazon.co.uk/s/ref=ntt_athr_dp_sr_1?_encoding=UTF8&field-author=Frank%20D.%20Luna&search-alias=books-uk)

包含源代码，根据 Baris 的建议使用代码创建窗口等，然后去 D3D agogo！

这些书也很适合初学者！:)

# javascript - 用于检查时间格式的 JavaScript 正则表达式

> ID：11064933
> 
> 赞同：1
> 
> 时间：2012-06-16T15:51:51.103
> 
> 标签：javascript, regex, time, onchange

我想要一个在输入不正确时清除 HTML 字段的正则表达式。*我创建了这个，但不是在不正确时清除该字段，而是仅在输入正确*时才清除它。

```
onchange="this.value=this.value.replace(/^([01]?[0-9]|2[0-3]):[0-5][0-9]/,'')" 
```

我试图“反转”代码，但到目前为止还没有成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T15:57:37.110

```
onchange="if (!this.value.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]/)) this.value = '';" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T15:57:09.077

```
if(!/^([01]?[0-9]|2[0-3]):[0-5][0-9]/.test(this.value)) this.value=""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T15:55:32.633

```
onchange="this.value=
/^([01]?[0-9]|2[0-3]):[0-5][0-9]/.test(this.value) ? this.value : ''" 
```

# smalltalk - 如何在 Pharo 的 CompiledMethods 集合上打开浏览器

> ID：11064934
> 
> 赞同：4
> 
> 时间：2012-06-16T15:52:00.653
> 
> 标签：smalltalk, pharo

我在一个数组中收集了一些 CompiledMethods，现在想在浏览器中手动查看它们。不知何故，我在 Pharo by Example 的反射章节中找不到解决方案。

在 Pharo (1.4) 中的 CompiledMethods 集合上打开浏览器的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T17:54:51.683

```
SystemNavigation default browseAllSelect: [ :e | methodCollection includes: e ]. 
```

# java - 覆盖教科书的构造函数部分没有意义

> ID：11064937
> 
> 赞同：5
> 
> 时间：2012-06-16T15:52:12.977
> 
> 标签：java

我正在阅读的书中的文字总结

> “从技术上讲，构造函数不能被覆盖，因为它们与当前类具有相同的名称。新的构造函数被创建而不是被继承。这个系统工作正常；......”

我不明白的部分是当他们这样说时：

> “当您的类的构造方法被调用时，所有超类的具有相同签名的构造方法也被调用。因此，您继承的类的所有部分都可能发生初始化”

我不明白的是相同的签名部分......它让我觉得好像所有的构造函数都必须具有相同的签名，然后当你初始化一个子类对象时，它的所有超类都将被自动调用而不是必须为每个子类调用 super(arg1,arg2) ......这是他们所说的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T15:57:28.090

这不太对。只有当它是默认构造函数（即无参数构造函数）时，才会自动调用超类的构造函数。

如果你的超类没有默认构造函数，那么你必须显式调用你选择的构造函数`super(args..)`。

例如，尽管`BearManPig`' 构造函数的签名与 ' 不同，但这完全没问题`Animal`：

```
public class Animal {
  public Animal() {
  }
}

public class BearManPig extends Animal {
  public BearManPig(String string) {
  }
} 
```

那是因为有一个 Java 找到了默认的无参数构造函数。

现在，当没有默认构造函数时，您必须明确要调用哪个构造函数。例如，这*不起作用*：

```
// DOESN'T COMPILE
public class Animal {
  public Animal(String string) {
  }

  public Animal(String string0, String string1) {
  }
}

public class BearManPig extends Animal {
   // There is no default constructor, stupid Java can't figure out what to do
  public BearManPig(String string) {
  }
} 
```

但这确实：

```
// does compile
public class Animal {
  public Animal(String string) {
  }

  public Animal(String string0, String string1) {
  }
}

public class BearManPig extends Animal {
  public BearManPig(String string) {
    super(string); // I've told Java what to do
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T15:57:52.760

所有超类不需要具有相同的构造函数签名。
当您创建新对象时，如果没有定义构造函数，Java 将不调用超类的参数构造函数。如果您不定义任何其他构造函数，Java 不会提供参数构造函数。
如果您定义任何其他构造函数，则必须在子类构造函数中调用它（在第一行）。
[这](http://www.javatutorialhub.com/java-constructors.html)可能会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T16:09:55.340

> 当你的类的构造方法被调用时，所有超类的具有相同签名的构造方法也被调用。因此，您继承的类的所有部分都可能发生初始化

这是不正确的。首先，关于术语的说明：构造函数不是方法，因此术语“构造函数方法”没有任何意义。

虽然确实调用了超类构造函数，但它不需要具有相同的签名。如果子类构造函数以超类构造函数调用表达式开头，例如

```
class Student extends Person {
    public Student(String name) {
        super(name, Occupation.STUDENT);
    }
} 
```

与调用的参数计数和类型匹配的超类构造函数。您完全可以自由地将哪些参数传递给该构造函数。

如果子类构造函数不以超构造函数调用表达式开头，编译器将为您插入对超类的可访问零参数构造函数的调用 - 如果没有这样的构造函数，则引发编译错误。

> Sams 现在在 21 天内自学 Java 2

您知道 Java 2 已经过时十年了吗？任何一本这么老的书都会教你一些过时的东西，你最好快点忘记。为什么不使用更现代的书？

# android - 如何确定我的 android 应用程序是否存在内存泄漏？

> ID：11064940
> 
> 赞同：23
> 
> 时间：2012-06-16T15:52:32.557
> 
> 标签：android, memory-management

我浏览了整个 internet\goolge\stackoverflow 并找不到完整而简单的指南，可以向我解释如何找到我的 android 应用程序是否存在内存泄漏。任何人都可以向我解释如何做到这一点，或者更好地给我一个很好的指导吗？

我的应用程序收集有关电池的数据并将其保存到手机上的数据库中。每次电池发生变化时（ACTION_BATTERY_CHANGED），我都会检查电池百分比是否发生变化，在这种情况下，我会保存一些数据。

这个应用程序占用（25-30）MB RAM 我认为这对于这样简单的应用程序来说太多了。我怀疑它有内存泄漏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-16T16:12:22.940

您可以使用 MAT

这是一个非常好的工具，可以提供非常详细的项目报告，其中包含与内存泄漏相关的基本信息

Android中的MAT

[http://android-developers.blogspot.in/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.in/2011/03/memory-analysis-for-android.html)

如何使用垫子

[http://kohlerm.blogspot.in/2009/07/eclipse-memory-analyzer-10-useful.html](http://kohlerm.blogspot.in/2009/07/eclipse-memory-analyzer-10-useful.html)

[http://android-developers.blogspot.in/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.in/2011/03/memory-analysis-for-android.html)

[http://ttlnews.blogspot.in/2010/01/attacking-memory-problems-on-android.html](http://ttlnews.blogspot.in/2010/01/attacking-memory-problems-on-android.html)

MAT 的 Eclipse 集成

[http://www.eclipse.org/mat/downloads.php](http://www.eclipse.org/mat/downloads.php)

[http://www.eclipse.org/forums/index.php/m/878338/](http://www.eclipse.org/forums/index.php/m/878338/)

更新站点：http: [//download.eclipse.org/mat/1.1/update-site/](http://download.eclipse.org/mat/1.1/update-site/)

BERT的Eclipse集成（依赖this）

[http://wiki.eclipse.org/BIRT_Update_Site_URL](http://wiki.eclipse.org/BIRT_Update_Site_URL)

[http://download.eclipse.org/birt/update-site/3.7-interim](http://download.eclipse.org/birt/update-site/3.7-interim)

[Android中的内存分析器工具？](https://stackoverflow.com/questions/6080906/memory-analyzer-tool-in-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-25T11:59:25.290

当我遇到与您相同的问题时，我找到**了 LeakCanary**。它有助于在调试版本的运行时检测内存泄漏，并为堆栈跟踪历史提供舒适的 UI。在这里，您可以阅读有关此工具用于检测内存泄漏的更多信息以及其他一些对 Android 开发有用的提示：http: [//cases.azoft.com/4-must-know-tools-for-effective-android-development/](http://cases.azoft.com/4-must-know-tools-for-effective-android-development/) . 希望它适用于您和其他移动开发人员！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T19:53:21.857

通常，如果您使用应用程序并且它正在积累内存

12 MB ... 13.5 MB...15 MB ... 想想积聚湿气的云 ... 等等

如果您看到这种模式，则表明您的应用程序存在内存泄漏。

另一种可能性是您没有泄漏，但您只是使用了太多对象或太大的对象，或者您没有足够好地节省对象。考虑到位图非常昂贵，因此在内存和资源有限的环境中处理位图可能不是那么简单。

# language-agnostic - 跳出“try-catch”？

> ID：11064942
> 
> 赞同：2
> 
> 时间：2012-06-16T15:52:42.367
> 
> 标签：language-agnostic, try-catch

有没有一种带有关键字的语言可以跳出`try-catch`块？

例如，在 Ruby 中有一个 walkaround：

```
lambda {
    begin
        p 0
        break
        p 1
    rescue
        p 2
    end
}.call
p 3 
```

（我相信）在 Javascript 中也是可能的。
但我想要一种没有匿名函数的方法（以避免缩进）——比如 if `break`or `continue`were possible。

我知道，C/C++/C# 语言允许[使用`goto`](https://stackoverflow.com/a/8572138/322020).

是否存在采用另一种方法的语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:04:29.293

使用[continuations](http://en.wikipedia.org/wiki/Continuation)，您可以跳出代码中的任何部分。例如，`call-with-current-continuation`在方案中。这个来自[维基百科](http://en.wikipedia.org/wiki/Call-with-current-continuation#Examples)的例子说明了基本概念：

```
(define (f return)
  (return 2)
  3)

(display (f (lambda (x) x))) ; displays 3

(display (call-with-current-continuation f)) ; displays 2 
```

通常，无论嵌套有多深，延续都可用于从过程执行中的*任何*点逃脱（它们*不限*于块）-在这方面，它是比 an或 a更通用的构造，因为这两个结构都可以在延续方面实现。`try/catch``Exception``goto`

起初，延续不是一个易于掌握的概念，但通过实践，它们可能非常有用，请参阅这篇[论文](http://www.cs.unm.edu/~williams/cs491/appcont.pdf)，详细介绍延续的许多可能应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T16:01:48.353

You could always just throw a known exception which you catch but do nothing with. In c#

```
try {
    if(true)
        throw new GetOutException();
}
catch(GetOutException e) {
}
catch(Exception e) {
    // Do something here    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:26:59.760

所以基本上听起来你在要求一个`goto`等价物来跳过你的代码的特定部分的执行。就像是：

```
foo();
if (!bar) {
    goto end;
}
baz();

end:
print "ended"; 
```

我不会讨论 s 的优缺点`goto`，但由于各种原因，它们无法以多种语言提供。不过，您几乎总是可以像下面这样制定代码以获得相同的效果：

```
foo();
if (bar) {
    baz();
}

print "ended"; 
```

当您实际使用异常时，这显然也有效：

```
try {
    foo();
    if (bar) {
        baz();
    }
} catch (Exception e) {
    help();
}

print "ended"; 
```

它与在某些情况下跳过特定代码分支的执行具有相同的效果，并且是执行此操作的标准方法。我真的无法想象突破`try..catch`或使用等价物`goto`会提供任何优势的情况。

# facebook - Facebook 登录：拥有多个用于开发、测试和生产的站点 URL

> ID：11064944
> 
> 赞同：1
> 
> 时间：2012-06-16T15:52:54.397
> 
> 标签：facebook, facebook-graph-api, facebook-login

我在 localhost 上有一个开发服务器，在专用服务器上有一个测试服务器，并且（很快）在另一台专用服务器上有一个 prod 服务器。我正在开发的应用程序使用 Facebook Open Graph API。

在> >`developers.facebook.com/apps/myAppId/summary`部分，然后我需要添加几个 URL（我的每个服务器一个）。我应该如何处理？`Select how your app integrates with Facebook``Website with Facebook Login``Site URL`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:01:06.247

目前，单个应用程序的生产环境、QA 环境和测试环境之间的 API 没有区别。

您需要为每个环境使用不同的 App ID

# regex - 正则表达式字符串标记化

> ID：11064946
> 
> 赞同：0
> 
> 时间：2012-06-16T15:53:13.727
> 
> 标签：regex, drupal

我正在尝试在 Drupal 中设置正则表达式搜索标记器，需要一些正则表达式帮助。我应该如何设置一个空白字符（单词分隔符正则表达式），以便它标记混合字符串，所以这两个字符串：`ABC-1`并且`ABC1`将被分成`ABC`一个`1`子字符串。目前正则表达式是：`[^\p{L}\p{N}^']`但似乎不合适。如何将连字符混合到这个否定类中，使其成为分隔符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:20:21.057

使用**正则表达式** `/([^\sa-z\-]+|[^\s0-9\-]+)/ig`

[*测试：http: [//ideone.com/44Wxy](http://ideone.com/44Wxy)* ]

# vb.net - 可视化二维数组visual basic

> ID：11064949
> 
> 赞同：0
> 
> 时间：2012-06-16T15:53:43.570
> 
> 标签：vb.net, visual-studio-2010, multidimensional-array, listbox

我开始制作一个非常简单的应用程序，其中名称列表显示在选中的列表框中。现在我想添加一个日期作为第二列值。这意味着我有两个使用二维数组。哪些容器适合在表单上可视化 2 dim-array？

我在想作为替代方案，我可以保持一维并使用分隔符。那么是否有一种方法可以在列表框的最右侧设置该日期的格式？我想我必须提取日期部分，但我不知道如何将它放置在列表框中。

我正在使用 VS2010 并使用 Windows 窗体项目。我没有 VB 经验（但有一些 C++ 经验），也没有 GUI 经验。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:07:15.157

详细信息/报告模式下的 ListView 或 DataGrid 都很好。就我个人而言，如果可能的话，我更喜欢 ListView。

# javascript - Javascript：Mathfloor 仍然生成 0

> ID：11064950
> 
> 赞同：0
> 
> 时间：2012-06-16T15:53:46.627
> 
> 标签：javascript

在我生成扑克牌的脚本中，它生成了一个 0，即使我的随机生成器添加了一个 1，所以它永远不应该是 0。我做错了什么？！如果你刷新，你最终会得到一个“红桃/俱乐部/钻石/黑桃0”：

```
var theSuit;
var theFace;
var theValue;
var theCard;

// deal a card
function generateCard() {
    var randomCard = Math.floor(Math.random()*52+1)+1;  
    return randomCard;
};

function calculateSuit(card) {
    if (card <= 13) {
        theSuit = "Hearts";
    } else if ((card > 13) && (card <= 26)) {
        theSuit = "Clubs";      
    } else if ((card > 26) && (card <= 39)) {
        theSuit = "Diamonds";
    } else {
        theSuit = "Spades";
    };  

    return theSuit;
};

function calculateFaceAndValue(card) {
    if (card%13 === 1) {
        theFace = "Ace";
        theValue = 11;
    } else if (card%13 === 13) {
        theFace = "King";
        theValue = 10;          
    } else if (card%13 === 12) {
        theFace = "Queen";
        theValue = 10;
    } else if (card%13 === 11) {
        theFace = "Jack";
        theValue = 10;
    } else {
        theFace = card%13;
        theValue = card%13;
    };

    return theFace;     
    return theValue
};

function getCard() {
    var randomCard = generateCard();        
    var theCard = calculateFaceAndValue(randomCard);
    var theSuit = calculateSuit(randomCard);            
    return theCard + " of " + theSuit + " (this card's value is " + theValue + ")";
};

// begin play
var myCard = getCard();
document.write(myCard);` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T15:58:59.130

This line is problematic:

```
} else if (card%13 === 13) { 
```

Think about it: how a remainder of division to 13 might be equal to 13? ) It may be equal to zero (and that's what happens when you get '0 of... '), but will never be greater than 12 - by the very defition of remainder operation. )

Btw, +1 in `generateCard()` is not necessary: the 0..51 still give you the same range of cards as 1..52, I suppose.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T16:00:03.457

```
card%13 === 13 
```

This will evaluate to `0` if `card` is `13`. `a % n` will never be `n`. I think you meant:

```
card % 13 === 0 
```

* * *

```
return theFace;     
return theValue 
```

`return` exits the function; you'll never get to the second statement.

# twitter-bootstrap - BootstrapWP - 设置固定宽度

> ID：11064954
> 
> 赞同：0
> 
> 时间：2012-06-16T15:15:29.863
> 
> 标签：twitter-bootstrap

一般来说，wordpress 和网页设计的新手。我正在尝试使用 bootstrap wordpress ( [boostrapwp](http://bootstrapwp.rachelbaker.me) ) 主题为我父亲的企业建立一个网站。将主题宽度设置为固定宽度而不是默认的流体宽度时遇到一些麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:15:14.270

您需要使用以下内容。

```
<body>
  <div class="container">
    ...
  </div>
</body> 
```

默认情况下，这使用 940px 宽度。如果您需要更改它以使其或多或少更宽

# c - 将结构数据保存到 void* 变量

> ID：11064964
> 
> 赞同：0
> 
> 时间：2012-06-16T15:56:09.280
> 
> 标签：c, embedded, embedded-linux

我正在努力在 DSP 处理器上实现 BFSK 算法，并且需要使用预定义的 DSP 基础文件在 LINUX 上模拟实现。以浮点数组的形式传入的输入数据。从输入中逐一提取各个位。调制输出在 typdef 结构的 fprm 中生成，该结构由两个浮点变量组成（实部和虚部，因为调制数据是复数基带信号）。但是 DSP 模拟需要将输出保存到一个空指针数组中。这不能更改，因为 DSP API 需要以 void 指针的形式。结构的定义如下：

```
typedef struct {
float re;
float im;
}complex_float; 
```

我可以使用 memcpy 将数据复制到 void 指针中：

```
sigbuf=(float *)malloc(bitsPerBlk*sigLen*sizeof(complex_float));

memcpy(sigbuf, comSig, (bitsPerBlk*sigLen*sizeof(complex_float))); 
```

sigbuf 是保存输出的空指针数组，comSig 是保存调制输出的 complex_float 数组。问题是我无法访问 sigbuf 数组的各个值。我也试过这个

```
sigbuf=(complex_float *)malloc(bitsPerBlk*sigLen*sizeof(complex_float)); 
```

但它仍然不起作用。

如果有人可以帮助我，那将对我非常有帮助。

谢谢，安舒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:58:00.637

我在这里猜测一下。为什么不将 comSig 复制到 sigBuf 然后将其传递给您的 API？

```
complex_float *sigBuf = malloc(TOTAL_SIZE_OF_COMSIG);
memcpy(sigBuf, comSig, TOTAL_SIZE_OF_COMSIG); 
```

我不知道你的函数的文档，但听起来你的 API 需要一个指向某些数据缓冲区的 void 指针，可能还有它的长度或元素数量。

```
dsp_api(sigBuf, sigBufSize); 
```

我认为您误解了 void 指针是什么以及您的函数想要什么。void 指针只是指向某些数据的通用指针。这是获取任何数据的函数方式，然后可能将其转换为您的 complex_float 结构以对数据进行操作。

作为未来的参考，为什么您无法取消引用 void 指针是因为它没有大小。您必须将其转换为类型，然后才能取消引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:06:53.970

如果 sigbuf 的类型是 (void *) 那么你的行

```
sigbuf=(complex_float *)malloc(bitsPerBlk*sigLen*sizeof(complex_float)); 
```

应该可以改成

```
sigbuf=(void *)malloc(bitsPerBlk*sigLen*sizeof(complex_float)); 
```

作为左边的 malloc 简直就是一个演员表！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T17:52:45.227

对此感到抱歉，我无法清楚地解释我的观点，这很糟糕。声明如下

```
void *sigbuf;
complex_float *comSig; 
```

> complex_float

是一个由两个浮点元素组成的结构。

> sigbuf

将存储调制后的数据，然后将其进一步传递给传输系统。

> comSig

是一个 complex_float 数组（基本上是一个正弦和余弦函数输出的数组）。

DSP基础设施需要调制输出

> sigbuf

已计算并保存在

> comSig

. somSig 和 sigbuf 都是在 DSP 基础架构中预定义的。

我的问题是我能够将整个 comSig aaray 复制到 sigbuf 数组，但无法访问 sigbuf 数组的各个元素。

我能够通过全局指针变量传递 comSig 数组本身的地址来规避问题的任何方法。DSP 基础架构提供了这样做的自由。所以，现在这个问题似乎已经解决了。再次感谢安舒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T00:53:35.647

确保目标地址 sigbuf 正确对齐。例如，DSP 可能要求 4 字节浮点值必须在 4 字节边界上对齐。memcpy() 可能不会检查对齐情况，并且会毫无怨言地复制各个字节。但是如果 sigbuf 没有正确对齐，那么您将无法以浮点数的形式访问内容（即，当数据从内存读取到寄存器时，数据将被破坏）。

# salesforce - 通过 SalesForce 创建登录屏幕

> ID：11064969
> 
> 赞同：1
> 
> 时间：2012-06-16T15:56:56.363
> 
> 标签：salesforce, salesforce-service-cloud

我是 Salesforce 新手。我需要创建一个登录屏幕，用户将首先在系统中注册，然后使用这些凭据登录系统。

所有这些信息都应该保存到数据库中。我需要知道我该怎么做？教程/视频教程或步骤将帮助我从这个开始。帮助 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:03:16.320

如果您是在为普通用户谈论，那么不，这是不可能的。如果您在谈论客户，那么我相信您正在寻找（从提供的少量详细信息中）是[customer portal](http://www.salesforce.com/crm/customer-service-support/customer-self-service-portal/)。

但是请注意，这涉及到许可费用，并且编写自己的用户身份验证系统违反了服务条款。

# google-plus - 在 Google+ 上显示照片

> ID：11064971
> 
> 赞同：-1
> 
> 时间：2012-06-16T15:57:09.077
> 
> 标签：google-plus, photo-gallery

我目前正在为我的照片制作画廊。除了一些错误，我已经完成了画廊，但我想在首页添加一个新的和新鲜的主题。我非常喜欢[Google+ 显示照片的方式](https://plus.google.com/photos/108346685434991182200/albums/5712493045931432833)，我现在想问你，如何为我自己画廊中的照片列表添加这种效果？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:18:19.973

看来他们使用`div`s 表示行，使用 sub`div`表示列。您可以动态或静态地确定该行将使用哪些格式：

```
//1
[    ][  ]
[    ][  ]
[    ]====
[    ][  ]
//2
[   ][   ]
[   ][   ] 
```

从那里将行和列设置为`{ float: left }`并制作图像`{ width: 100% }`。这是关于无限滚动图片库的教程：http: [//net.tutsplus.com/tutorials/javascript-ajax/how-to-create-an-infinite-scroll-web-gallery/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-an-infinite-scroll-web-gallery/)你可以只`fade in`显示图片他们。

# ruby-on-rails - 如何将数据从 Matlab 发送到 Rails

> ID：11064979
> 
> 赞同：3
> 
> 时间：2012-06-16T15:58:05.500
> 
> 标签：ruby-on-rails, json, web-services, matlab

我对 Rails 和 Web 开发非常陌生。

我在 Matlab 中生成了一堆对象，我想将这些对象发送到我的 Rails 应用程序中的数据库。谁能建议我如何做到这一点？

到目前为止，在 Rails 端，我已经为我的数据生成了基本的脚手架。我可以使用“/myobjects/new”中的表单将对象添加到我的数据库中。

在 Matlab 端，我一直在尝试使用 HTTP POST 请求添加对象，如下所示：

```
s = urlread('http://localhost:3000/myobjects.json','POST',{'myobject','{name1:''value1''}'}) 
```

这将失败并在 Rails 控制台打印以下内容：

```
Started POST "/myobjects.json" for 127.0.0.1 at 2012-06-16 11:48:28 -0400
Processing by MyobjectsController#create as JSON
  Parameters: {"myobject"=>"{name1:'value1'}"}
WARNING: Can't verify CSRF token authenticity
Completed 500 Internal Server Error in 1ms

NoMethodError (undefined method `stringify_keys' for "{name1:'value1'}":String):
  app/controllers/myobjects_controller.rb:43:in `new'
  app/controllers/myobjects_controller.rb:43:in `create' 
```

这种方法可能有点离谱，但希望上面的代码能明确我的目标。谁能告诉我如何修复我的代码，或者建议一个更好的策略来将我的数据放入 Rails 中？

编辑

目前我的 new 和 create 方法看起来像这样（但我可以根据需要更改它们）

```
# GET /irs/new
  # GET /irs/new.json
  def new
    @ir = Ir.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @ir }
    end
  end

  # POST /irs
  # POST /irs.json
  def create
    @ir = Ir.new(params[:ir])

    respond_to do |format|
      if @ir.save
       format.html { redirect_to @ir, notice: 'Ir was successfully created.' }
       format.json { render json: @ir, status: :created, location: @ir }
      else
        format.html { render action: "new" }
        format.json { render json: @ir.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:03:55.193

最后我放弃了尝试使用matlab的内置函数来做到这一点。相反，我导入了一个 Java 库（[Apache HttpComponents](http://hc.apache.org/)）。这是我想出的脚本。这完成了工作。

```
javaaddpath(['utils/httpcomponents-client-4.2/lib/httpcore-4.2.jar']);
javaaddpath(['utils/httpcomponents-client-4.2/lib/httpclient-4.2.jar']);

import org.apache.http.impl.client.DefaultHttpClient
import org.apache.http.client.methods.HttpPost
import org.apache.http.entity.StringEntity

httpclient = DefaultHttpClient();

httppost = HttpPost('http://127.0.0.1:3000/myobjects.json');
httppost.addHeader('Content-Type','application/json');
httppost.addHeader('Accept','application/json');

params = StringEntity('{"field1":"value1"}');
httppost.setEntity(params);

response = httpclient.execute(httppost); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T16:06:00.223

您可以通过设置来避免该特定问题

```
class MyobjectsController < ApplicationController
  protect_from_forgery :except => :create
  ...
end 
```

在您的控制器内。它禁用 CSRF 令牌有效性检查。

# php - PHP cURL 与 file_get_contents

> ID：11064980
> 
> 赞同：117
> 
> 时间：2012-06-16T15:58:12.473
> 
> 标签：php, curl, file-get-contents

访问 REST API 时，这两段代码有何不同？

```
$result = file_get_contents('http://api.bitly.com/v3/shorten?login=user&apiKey=key&longUrl=url'); 
```

和

```
$ch = curl_init('http://api.bitly.com/v3/shorten?login=user&apiKey=key&longUrl=url');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch); 
```

它们都产生相同的结果，由

```
print_r(json_decode($result)) 
```

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-06-16T16:00:40.797

`file_get_contents()`是一把简单的螺丝刀。非常适合标头、HTTP 请求方法、超时、cookiejar、重定向和其他重要事项无关紧要的简单 GET 请求。

`fopen()`带有[流上下文](http://us2.php.net/manual/en/function.stream-context-create.php)或带有[setopt](http://us2.php.net/manual/en/function.curl-setopt.php)的 cURL 是具有您能想到的每一位和选项的 powerdrills。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-07T01:51:31.347

除此之外，由于最近的一些网站黑客攻击，我们不得不更加保护我们的网站。在这样做的过程中，我们发现*file_get_contents*无法工作，而*curl*仍然可以工作。

不是 100%，但我相信这个 php.ini 设置可能已经阻止了*file_get_contents*请求。

```
; Disable allow_url_fopen for security reasons
allow_url_fopen = 0 
```

无论哪种方式，我们的代码现在都可以使用*curl*。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-05-16T14:12:37.297

这是一个老话题，但在我最后一次对我的 API 进行的测试中，cURL 更快、更稳定。有时，较大请求的 file_get_contents 需要超过 5 秒，而 cURL 只需要 1.4 到 1.9 秒，速度会快一倍。

我需要对此添加一条注释，即我只是发送 GET 并接收 JSON 内容。如果你正确设置 cURL，你会得到很好的响应。只需“告诉”卷曲您需要发送的内容和需要接收的内容即可。

在你的例子中，我想做这个设置：

```
$ch =  curl_init('http://api.bitly.com/v3/shorten?login=user&apiKey=key&longUrl=url');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
    curl_setopt($ch, CURLOPT_TIMEOUT, 3);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept: application/json'));
$result = curl_exec($ch); 
```

此请求将在 0.10 秒内返回数据

# go - Why does Go have a "goto" statement?

> ID：11064981
> 
> 赞同：141
> 
> 时间：2012-06-16T15:58:41.053
> 
> 标签：go, goto

I was surprised to find that Go has a ['goto'](http://golang.org/ref/spec#Goto_statements) statement. I've always been taught that 'goto' statements are a thing of the past and evil for it occludes the actual flow of a program, and that functions or methods are always a better way of controlling flow.

I must be missing something. Why did Google include it?

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-06-16T17:24:00.327

当我们实际查看 Go 标准库的源代码时，我们可以看到`goto`s 实际应用得很好。

例如，在`math/gamma.go`文件中，使用[了以下`goto`语句](https://golang.org/src/math/gamma.go)：

```
 for x < 0 {
    if x > -1e-09 {
      goto small
    }
    z = z / x
    x = x + 1
  }
  for x < 2 {
    if x < 1e-09 {
      goto small
    }
    z = z / x
    x = x + 1
  }

  if x == 2 {
    return z
  }

  x = x - 2
  p = (((((x*_gamP[0]+_gamP[1])*x+_gamP[2])*x+_gamP[3])*x+_gamP[4])*x+_gamP[5])*x + _gamP[6]
  q = ((((((x*_gamQ[0]+_gamQ[1])*x+_gamQ[2])*x+_gamQ[3])*x+_gamQ[4])*x+_gamQ[5])*x+_gamQ[6])*x + _gamQ[7]
  return z * p / q

small:
  if x == 0 {
    return Inf(1)
  }
  return z / ((1 + Euler*x) * x)
} 
```

在`goto`这种情况下，我们无需引入另一个（布尔）变量，仅用于控制流，最后检查。*在这种情况下*，该`goto`语句实际上使代码更易于阅读且更易于遵循（与您提到的反对您的论点完全相反`goto`）。

另请注意，该`goto`语句有一个非常具体的用例。[goto 上](http://golang.org/ref/spec#Goto_statements)的语言规范声明它可能不会跳过进入范围（被声明）的变量，也可能不会跳转到其他（代码）块。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-16T17:08:10.357

当没有任何内置控制功能完全满足您的需求，并且您可以使用 goto 表达您想要的内容时，Goto 是一个好主意。（在某些语言中，当您没有 goto 时，这是一种耻辱。您最终会滥用某些控制功能，使用布尔标志或使用比 goto 更糟糕的解决方案。）

如果其他一些控制功能（以相当明显的方式使用）可以做你想做的事，你应该优先使用它而不是 goto。如果没有，请大胆使用 goto！

最后值得注意的是，Go 的 goto 有一些限制，旨在避免一些晦涩的错误。[请参阅规范](http://golang.org/ref/spec#Goto_statements)中的这些限制。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-02-16T20:26:41.867

自从60 和 70 年代的[意大利面条代码](https://en.wikipedia.org/wiki/Spaghetti_code)时代以来，Goto 语句就受到了很多质疑。那时，软件开发方法非常差，甚至没有。然而，Goto 本身并不是邪恶的，但当然可以被懒惰或不熟练的程序员误用和滥用。许多滥用 Goto 的问题都可以通过团队代码审查等开发流程来解决。

`goto`是以与和相同的技术方式`continue`跳跃。有人可能会争辩说，这些陈述以同样的方式是邪恶的，但事实并非如此。`break``return`

Go 团队之所以包含 Goto，可能是因为它是一种常见的流控制原语。此外，他们希望得出结论，Go 的范围不包括使白痴安全语言不可能被滥用。

# c# - Speeding up GDI+ when Handling Large Images in c#

> ID：11064982
> 
> 赞同：0
> 
> 时间：2012-06-16T15:58:42.260
> 
> 标签：c#, .net, image, gdi+

Im using GDI+ to render images in c#.The method works fine when Medium quality images are used.But when i use High quality images with large sizes ranging from 1.5-5mb the processing seems to be much slower.I mainly use

```
Graphics.DrawImage 
```

Is there any way to speed up this.Can i reduce the size of the images on the fly by compressing it in memory,Will this take more time.Any ideas

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T16:09:03.637

如果不缩放图像，DrawImageUnscaled 会有所帮助。考虑设置为预乘 RGBA。将图像分割成更小的块。

见这里：[http ://www.gamedev.net/topic/467752-maximizing-gdi-speed/](http://www.gamedev.net/topic/467752-maximizing-gdi-speed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:10:55.363

似乎有一个类似的问题：[How to increase performance over GDI's DrawImage(Unscaled)?](https://stackoverflow.com/questions/2587911/how-to-increase-performance-over-gdis-drawimageunscaled)

那家伙最终在 OpenTK 之上编写了自己的库，以真正加快速度。

# java - 在字符串中返回 http 文本

> ID：11064983
> 
> 赞同：-4
> 
> 时间：2012-06-16T15:58:42.680
> 
> 标签：java, regex

> **可能重复：**
> [正则表达式匹配 URL](https://stackoverflow.com/questions/1141848/regex-to-match-url)

是否有正则表达式可以从字符串中返回 http 值？

所以

`sdfads saf as fa http://www.google.com some more text`

变成

`http://www.google.com`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T16:08:37.767

一个非常简单的方法：

```
https?://\S+ 
```

如果您必须检查有效的网址，则正则表达式要复杂得多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:37:52.563

这是一个简单且有效的示例，其中包含检索搜索到的模式并使用它来替换整个输入：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Regextest {

    static String[] matchThese = new String[] {
            "sdfads saf as fa http://www.google.com some more text",
            "sdfads fa http://www.dupa.com some more text",
            "should not match http://" };

    public static void main(String[] args) {

        String regex = "(https?://|www)\\S+";
        Pattern p = Pattern.compile(regex);

        System.out.println("Those that match are replaced:");
        for (String input : matchThese) {
            if (p.matcher(input).find()) {

                Matcher matcher = p.matcher(input);
                matcher.find();

                // Retrieve matching string
                String match = matcher.group();

                String output = input.replace(input, match);
                System.out.println(output);

            }
        }

    }
} 
```

# ios - how to link a static library for iOS

> ID：11064984
> 
> 赞同：5
> 
> 时间：2012-06-16T15:58:56.667
> 
> 标签：ios, gcc, build, static-libraries, ld

I have create a bunch of `.o` files (via `gcc -c $file.c $someotherops -o $file.o`). Now I want to link them into a static library.

I'm not exactly sure wether I am supposed to use `ld` or `gcc` for this. In the `ld` manual, it is said that I'm not supposed to use it directly. However, I cannot figure out the gcc parameters to create a static library.

I tried `ld *.o -static -o libfoo.a` but it complains about a lot of missing symbols (I think all from libc). I don't understand why it complains because it is supposed to be a static library. I thought it would check for the symbols once I link that static library to some other thing.

Another thing: I use `/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ld` here (my target is iOS). It complains with the warning `ld: warning: using ld_classic`. What is this about?

Then I thought, maybe it needs to have the dynamic libraries specified. So I added `-lc` to link against libc. But it complains with `can't locate file for: -lc`. I added `-L/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/usr/lib` and there is a `libc.dylib`.

Any ideas?

* * *

About the `-lc` error: It got away after I specified `-arch armv6`. Then it complained about a wrong `libcache.dylib` (which must be linked from `libc.dylib` I guess because it didn't specified it). Adding `-L.../usr/lib/system` helped.

Now, for each single `.o` file, I get the warning `ld: warning: CPU_SUBTYPE_ARM_ALL subtype is deprecated`. What is this about?

And I still have a bunch of missing symbols, esp:

```
Undefined symbols for architecture armv6:
  "start", referenced from:
     -u command line option
     (maybe you meant: _PyThread_start_new_thread)
  "___udivsi3", referenced from:
      _get_len_of_range in bltinmodule.o
      _quorem in dtoa.o
      _array_resize in arraymodule.o
      _newarrayobject in arraymodule.o
      _array_fromfile in arraymodule.o
      _get_len_of_range in rangeobject.o
      _inplace_divrem1 in longobject.o
      ...
  "___unorddf2", referenced from:
      _builtin_round in bltinmodule.o
  ... 
```

I checked some of those symbols, e.g. `___udivsi3` in `get_len_of_range`. This function uses C arithmetic only, no external call. So this seems to be translated to use some external functions like `___udivsi3`. But what libraries is this in?

* * *

`-lgcc_s.1` fixed most of the `___udivsi3` and related missing symbols. The `start` symbol is still missing. What does `-u command line option` mean?

* * *

From [here](http://codingfreak.blogspot.de/2010/01/creating-and-using-static-libraries-in.html), I got the feeling that maybe `ld` isn't the right tool after all. There, a simple call to `ar`is used. And this seem to make more sense. I will check if that does work and transform this into an answer then.

* * *

While playing more around, `ar` throw some warnings at me when building a fat static library. It gave me the hint to use `libtool` instead. That is what I'm doing now, i.e. `libtool -static -o libfoo.a *.o`. Also I switched the compiler to `/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang`but not sure if that matters.

Now, at compiling some test application which links to this static library, I get these warnings:

```
ld: warning: PIE disabled. Absolute addressing (perhaps -mdynamic-no-pic) not allowed in code signed PIE, but used in __PyBuiltin_Init from /Users/az/Programmierung/python-embedded/libpython.a(bltinmodule.o). To fix this warning, don't compile with -mdynamic-no-pic or link with -Wl,-no_pie
ld: warning: 32-bit absolute address out of range (0x1001B70C4 max is 4GB): from _usedpools + 0x00000004 (0x001B70CC) to 0x1001B70C4
ld: warning: 32-bit absolute address out of range (0x1001B70C4 max is 4GB): from _usedpools + 0x00000000 (0x001B70CC) to 0x1001B70C4 
```

What are they about? I don't use `-mdynamic-no-pic`. I also don't really see in `_PyBuiltin_Init` how I use absolute addressing there.

Also, what are these absolute addresses out of range about? **Edit:** These were some really huge allocations. I just removed this code for now (this was `WITH_PYMALLOC`, if anyone is interested in these specific Python internals).

When I start it on my iPhone, I get the abort:

`dyld: vm_protect(0x00001000, 0x00173000, false, 0x07) failed, result=2 for segment __TEXT in /var/mobile/Applications/C15D9525-E7DC-4463-B05B-D39C9CA24319/...`

When I use `-no_pie` for linking, it doesn't even link. It fails with:

`Illegal text-relocation to ___stderrp in /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/lib/libSystem.dylib from _read_object in /Users/az/Programmierung/python-embedded/libpython.a(marshal.o) for architecture armv7`

* * *

I solved the PIE disabled, Absolute addressing error. I had a `-static` in my command line Clang. Once I removed that, the warning got away, as well as the dyld/vm_protect error. It was the first time it actually run some code.

Until I hit [another strange error about integer comparison](https://stackoverflow.com/questions/11129368/strange-c-integer-inequality-comparison-result). Whereby this looks more like a bug in their Clang build.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T00:13:16.473

现在一切正常。基本上，答案是：

*   `*.c`只需像往常一样将每个文件编译为`*.o`文件。唯一真正的区别是不同的 GCC/Clang、`-arch armv7`不同的 SDK/包含目录。

*   用于`libtool -static -o libfoo.a *.o`构建静态库。

而已。我的问题中的其他问题只是错误的尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T05:06:23.343

如果有人通过搜索`dyld: vm_protect(...)`运行时错误到达这里但您使用的是 XCode，`-static`则 OP 中提到的标志可能是问题所在。

通过在 LLVM 编译器语言设置中将“启用与共享库的链接”切换为“是”（默认）来摆脱它。`GCC_LINK_WITH_DYNAMIC_LIBRARIES = NO`（这将从项目文件中删除）。

# java - hibernate annotation- inheritance with @MappedSuperclass - values are not being set to base class fields- strange error

> ID：11064986
> 
> 赞同：0
> 
> 时间：2012-06-16T15:58:59.787
> 
> 标签：java, hibernate, inheritance, jpa, annotations

I was following [Hibernate: Use a Base Class to Map Common Fields](http://ocpsoft.org/java/hibernate-use-a-base-class-to-map-common-fields/) and [openjpa inheritance tutorial](http://openjpa.apache.org/builds/1.0.2/apache-openjpa-1.0.2/docs/manual/jpa_overview_mapping_inher.html) to put common columns like ID, lastModifiedDate etc in base table.

My annotated mappings are as follow :

**BaseTable :**

```
@MappedSuperclass
public abstract class BaseTable {
    @Id
    @GeneratedValue
    @Column(name = "id")
    private int id;

    @Column(name = "lastmodifieddate")
    private Date lastModifiedDate;
... 
```

**Person table -**

```
 @Entity
    @Table(name = "Person ")
    public class Person extends BaseTable  implements Serializable{

    @Column(name = "name")
    private String name;
... 
```

**Create statement generated :**

```
create table Person (id integer not null auto_increment,  lastmodifieddate datetime, name varchar(255), primary key (id)) ; 
```

After I save a Person object to db,

```
Person p = new Person();
p.setName("Test");
p.setLastModifiedDate(new Date());
..

getSession().save(p); 
```

I am setting the date field but, it is saving the record with generated ID and LastModifiedDate = null, and Name="Test".

**Insert Statement :**

```
insert into Person (lastmodifieddate, name) values (?, ?)
binding parameter [1] as [TIMESTAMP] - <null>
binding parameter [2] as [VARCHAR] - Test 
```

**Read by ID query :** When I do hibernate query (get By ID) as below, It reads person by given ID.

```
Criteria c = getSession().createCriteria(Person.class);
c.add(Restrictions.eq("id", id));
Person person= c.list().get(0);
//person has generated ID, LastModifiedDate is null

select query select person0_.id as id8_,  person0_.lastmodifieddate as lastmodi8_, person0_.name as name8_ from Person person0_
 - Found [1] as column [id8_]
 - Found [null] as column [lastmodi8_]
 - Found [Test] as column [name8_ ] 
```

**ReadAll query :**

```
Query query = getSession().createQuery("from " + Person.class.getName());
List<Person> allPersons=query.list(); 
```

Corresponding SQL for read all

```
select query select person0_.id as id8_,  person0_.lastmodifieddate as lastmodi8_, person0_.name as name8_ from Person person0_
- Found [1] as column [id8_]
- Found [null] as column [lastmodi8_]
- Found [Test] as column [name8_ ]
- Found [2] as column [id8_]
- Found [null] as column [lastmodi8_]
- Found [Test2] as column [name8_ ] 
```

But when I print out the list in console, its being more weird. it is selecting List of Person object with

*   ID fields = all 0 (why all 0 ?)
*   LastModifiedDate = null
*   Name fields have valid values

I don't know whats wrong here. Could you please look at it?

**FYI,**

My Hibernate-core version : 4.1.2, MySQL Connector version : 5.1.9 .

**In summary, There are two issues here**

*   Why I am getting All ID Fields =0 when using read all?
*   Why the LastModifiedDate is not being inserted?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:26:02.290

利用

```
@Temporal(TemporalType.DATE) 
```

注释`Date`

对于 ID 生成使用策略。

```
@GeneratedValue(strategy=GenerationType.AUTO) 
```

或者

```
@GeneratedValue(strategy=GenerationType.IDENTITY) 
```

或使用序列

```
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "custom_generator")
@SequenceGenerator(name = "custom_generator", sequenceName = "sequance_table") 
```

您也可以在您的子班级中进行财产访问：

```
public abstract class BaseTable {

    protected int id;

    protected Date lastModifiedDate;  
// ...  
} 
```

和

```
@Entity
@Table(name = "Person")
public class Person extends BaseTable  implements Serializable{

@Id
@GeneratedValue
@Column(name = "id")
public getId()
{
   return super.id;
}

setId(log id)
{
   super.id = id;
}

@Column(name = "lastmodifieddate")
@Temporal(TemporalType.DATE) 
public getLastModifiedDate()
{
   return super.lastModifiedDate;
}

setLastModifiedDate(Date date)
{
   super.lastModifiedDate = date;
}

public getName()
// ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:26:48.790

在 BaseTable 类中试试这个

```
@Temporal(value = TemporalType.TIMESTAMP)
@Column(name = "lastmodifieddate", nullable = false,
        columnDefinition = "Timestamp default CURRENT_TIMESTAMP")
@org.hibernate.annotations.Generated(value = GenerationTime.ALWAYS)
public Date getLastModifiedDate( )
{
  return this.lastModifiedDate;
} 
```

BaseTable 类应该有@MappedSuperclass。并且实体中必须有一个生成的日期字段。

```
@MappedSuperclass
public abstract class BaseTable {

    protected int id;

    protected Date lastModifiedDate;  

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO) // For Mysql
    // For Oracle or MSSQL @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id", unique = true, nullable = false)
    public int getId()
    {
      return this.id;
    }

    @Temporal(value = TemporalType.TIMESTAMP)
    @Column(name = "lastmodifieddate", nullable = false,
            columnDefinition = "Timestamp default CURRENT_TIMESTAMP")
    @org.hibernate.annotations.Generated(value = GenerationTime.ALWAYS)
    public Date getLastModifiedDate( )
    {
      return this.lastModifiedDate;
    }

} 
```

# asp.net-mvc-4 - POST image and other form data to webapi RC

> ID：11064987
> 
> 赞同：0
> 
> 时间：2012-06-16T15:59:04.563
> 
> 标签：asp.net-mvc-4, asp.net-web-api

I've looked at a few examples, but they were all written when the project was in beta and I'm unable to find a clear way to do this.

the file uploads to the server but I can't seem to access any other form data in my controller.

Does anyone know of an example or can offer some code that works with ASP.NET RC webapi that can shed some light?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:35:24.750

```
var formData = new FormData($('form')[0]);
formData.append('SomeId', $('#id').attr('value')); 
```

然后...在控制器中

```
HttpContent idPart = parts.FirstDispositionNameOrDefault("SomeId");

if (idPart == null)
{

    throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.BadRequest));

}
int id = int.Parse(idPart.ReadAsStringAsync().Result); 
```

# php - Execute a file using PHP exec

> ID：11064989
> 
> 赞同：0
> 
> 时间：2012-06-16T15:59:37.487
> 
> 标签：php, windows, exec, shell-exec

I am trying to execute a PHP script by calling `exec()`, but it doesn't seem to be working.

```
exec("php file.php"); 
```

I am running on a Windows VPS. How can I determine what the problem is?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:12:35.607

一些建议：

*   只需检查 php 是一个环境变量。如果不[添加它](http://www.sitepoint.com/how-to-install-php-on-windows/)
*   您尝试执行的文件是否与您的脚本在同一目录中？假设输入文件的完整路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:07:04.023

你的类路径中必须有 php.exe，否则，你会得到一个错误。如果您只想包含该文件，请执行以下操作：

```
<?php
    require_once("file.php");
?> 
```

如果你真的想使用 exec 函数，你必须给出完整的 PHP 路径和你的 file.php 文件的完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T17:19:34.417

该`exec`函数非常易于使用，但您必须指定脚本的绝对路径和一个可选变量，以填充命令的每一行输出，例如：

```
exec("php /var/www/my_script.php", $arr); 
```

因此，如果出现问题，您可以执行`print_r($arr)`并检查结果。

# android - Android Media player error (1,-4) while playing an audio from Assets folder

> ID：11064990
> 
> 赞同：6
> 
> 时间：2012-06-16T15:59:48.500
> 
> 标签：android, android-mediaplayer

I need your help. I tried to play an audio file stored in Assets folder but an error occurred.

Here are my code:

```
try{
  if (player.isPlaying()) {
    player.stop();
    player.release();
  }
}catch(Exception e){
  Toast.makeText(this, "an exception occurred", Toast.LENGTH_LONG).show();
  e.printStackTrace();
}
try{
  AssetFileDescriptor afd = BeeDailyConvo.this.getAssets().openFd("sounds/hello_kr.wma");
  player.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
  player.prepare();
  player.start();
}catch(Exception e){
  e.printStackTrace();
} 
```

And here are my logcat:

> 06-16 22:39:53.330: W/MediaPlayer(13490): info/warning (1, 26)
> 06-16 22:39:53.330: E/MediaPlayer(13490): error (1, -4)

Could you please explain what's wrong with my code?

Thank you in advance

Regards,

Priska

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T06:08:55.760

此问题已得到解决。

资产文件描述符必须在准备播放器之前关闭。这就是我解决问题的方法：

```
player = new MediaPlayer();
AssetFileDescriptor afd = BeeDailyConvo.this.getAssets()
  .openFd("sounds/"+file);
player.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
afd.close();**//just added this line**
player.prepare();
player.start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T16:17:56.983

在这里你可以看到所有错误代码[媒体播放器错误代码](https://github.com/android/platform_external_opencore/blob/master/pvmi/pvmf/include/pvmf_return_codes.h)

**-4 错误代码表示您提供了无效的参数。**

**将您的代码放在 try catch 块中。**

尝试使用

```
 try {
          AssetFileDescriptor afd = CustomListViewActivity.this.getAssets()
                    .openFd("sounds/hello_kr.wma");
            player.setDataSource(afd.getFileDescriptor());
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T16:04:20.203

不幸的是，由于某种原因，几乎没有关于 MediaPlayer 错误代码的信息。但是，我建议您尝试将声音文件放入 res/raw/ 而不是资产。

**编辑：**

从使用[MediaPlayer开始](http://developer.android.com/guide/topics/media/mediaplayer.html#mediaplayer)从开发者文档中这将向您展示如何正确设置和播放声音。

**编辑2：**

原来可以从资产做到这一点看到这个问题：[从资产目录播放音频文件](https://stackoverflow.com/questions/3289038/play-audio-file-from-the-assets-directory)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T16:53:09.907

我认为不支持 wma 文件。

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

我注意到您没有指定 audioStreamType

mediaPlayer.setAudioStreamType(AudioManager.STREAM_MISIC);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T07:27:08.373

使用这种方式它会解决你的问题:)

```
 public void playBeep() {
    try {

        if (m.isPlaying()) {
            m.stop();
            m.release();
            m = new MediaPlayer();
        }
        AssetFileDescriptor descriptor = getAssets().openFd("mp3 name.mp3");
        m.setDataSource(descriptor.getFileDescriptor(), descriptor.getStartOffset(), descriptor.getLength());
        descriptor.close();

        m.prepare();
        m.setVolume(1f, 1f);
        m.setLooping(true);
        m.start();
    } catch (Exception e) {
    }
} 
```

# python - 使用python以编程方式猜测段落的标签

> ID：11064994
> 
> 赞同：2
> 
> 时间：2012-06-16T16:00:16.117
> 
> 标签：python, nlp, nltk

我试图阅读一般的 NLP 和专门用于 python 的 nltk。我不确定是否存在正在寻找的东西，或者我是否需要开发它。

我有一个从不同文件中收集文本的程序，文本非常随机并且谈论不同的事情。每个文件最多包含一个或 3 个段落，我的程序打开文件并将它们存储到一个表中。

我的问题是，我能猜出段落的标签吗？如果有人知道现有的技术或方法，我将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:39:26.260

您的任务称为“文档分类”，[nltk 书](https://sites.google.com/site/naturallanguagetoolkit/book)有一整章。我会从那开始。

这完全取决于您分配标签的标准。您是否有兴趣将您的文档与一组预先存在的标签进行匹配，或者可能对主题提取感兴趣（选择文本中最重要的 N 个单词或短语）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:29:12.177

您应该训练一个分类器，最容易开发的分类器（并且您不需要像 NLTK 提供的那样开发它）是朴素的贝斯算法。问题是您需要手动对观察的语料库进行分类，然后让程序猜测哪个标签最适合给定段落（不用说，训练语料库越大，您的分类器就越精确，恕我直言，您可以达到80-85% 的正确性）。看看[文档](http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html)。

# xamarin.ios - Loading existing data into MonoTouch.Dialog

> ID：11064998
> 
> 赞同：1
> 
> 时间：2012-06-16T16:01:35.827
> 
> 标签：xamarin.ios, monotouch.dialog

I am new to MonoTouch from a VS/C# background and am trying to rewrite an existing c# app. I have made one simple MonoTouch app which succesfully loads data into a List<> from an XML file, and was starting to add Master/Detail code when I discovered the existence of MonoTouch.Dialog which looked like it would make my job much easier. So I started a new project using the sample code at [http://docs.xamarin.com/ios/tutorials/MonoTouch.Dialog](http://docs.xamarin.com/ios/tutorials/MonoTouch.Dialog) , changing the basic class to match what I needed.

But I am stuck with trying to prepopulate the DialogViewController with my existing List<>. I have tried using LoadMoreElement but cannot find an example of its use and don't know if it's the best way of doing this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:41:53.717

谢谢安德斯。在过渡期间，我发现了一种不同的方法：

```
 _rootElement = new RootElement ("Riders") 
        {
            new Section()
            {
                from x in riderList.Riders select (Element) new RootElement(x.Name) 
                {
                    new Section()
                    {
                        new StringElement("Rider",x.Name),
                        new StringElement("Club",x.Club),
                        ....
                        .... 
```

...我会尝试两者，看看什么最适合。但是我很难找到任何文档来描述对话框类的方法，例如 Section.AddAll() 和您提供的链接中使用的其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:33:13.567

如果要在现有对话框视图中创建列表，例如，可以创建一个空[`Section`](http://docs.go-mono.com/?link=T:MonoTouch.Dialog.Section)列表并将列表中的元素添加为[`RadioElement`](http://docs.go-mono.com/?link=T:MonoTouch.Dialog.RadioElement)：s 或[`CheckboxElement`](http://docs.go-mono.com/?link=T:MonoTouch.Dialog.CheckboxElement):s，具体取决于您希望能够添加多少元素同时选择。

为便于选择，您可能需要创建`Group`/`RadioGroup`并在您的部分中创建相应的列表元素时引用此组。

这是一个创建新`Section`元素并添加列表元素的快速示例，假设只能同时选择一个元素：

```
var list = new List<SomeClass> { ... };

var listGroup = new RadioGroup("grp", 0);
var listSection = new Section();

listSection.AddAll(list.Select(elem => 
    new RadioElement(elem.ToString(), "grp") as Element)); 
```

如果您想要更专业地处理列表中的元素或与列表操作关联的事件，您可能需要子类化`RadioElement`或`CheckboxElement`. [在这个 SO question](https://stackoverflow.com/questions/8302306/monotouch-dialog-responding-to-a-radiogroup-choice)的答案中有一个很好的例子来说明如何做到这一点。