# StackOverflow 问答 12111000-12111999

# jquery-plugins - 如何激活 Twitter Bootstrap Affix 组件的链接？

> ID：12111004
> 
> 赞同：12
> 
> 时间：2012-08-24T14:07:05.100
> 
> 标签：jquery-plugins, twitter-bootstrap

我正在使用 Twitter Bootstrap Affix JS 组件。当我向下滚动页面时，我的 UL 列表已正确粘贴。另外 - 当我单击单个列表项时（就像 Twitter 在其文档页面上所做的那样），它会向下滚动到我文档中的锚点 ID，但 LI 元素不会收到 Twitter 的“活动”类。当我滚动文档时，它也不会获得“活动”类。

当我滚动到文档中的特定部分（很像滚动间谍作品）时，我希望适当的链接处于活动状态，但我似乎无法让它工作。

我需要设置什么特别的东西，以便 Bootstrap 在适当的时候添加“活动”类吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-25T20:36:58.383

是的，您还需要使用 ScrollSpy 插件。您可以通过标记或通过 JS 激活它。假设`#scroll-pane`成为触发**滚动**事件的元素并`#navbar`成为包含 的元素`ul.nav`，以下应该让它工作：

## HTML

```
<div id="scroll-pane" data-spy="scroll" data-target="#navbar"> 
```

## JS

```
$('#scroll-pane').scrollspy({target: '#navbar'}); 
```

使用 HTML 或 JS，但不能同时使用。

* * *

### 附加信息

当 ScrollSpy 插件传递一个目标时，比如`scrollspy({target: '#navbar'})`，这用于构造表单的选择器

```
target + ' .nav li > a' 
```

在这个例子中，它会给

```
'#navbar .nav li > a' 
```

了解此选择器创建的规定很重要。

1.  原始`target`元素必须是*包含*具有 class 的元素的元素`nav`。所以`.nav`可能永远不应该成为你的目标。
2.  该`.nav`元素必须包含列表项。
3.  这些列表项必须具有 a`<a>`作为直接子项。

然后，由此选择的`<a>`元素会被那些以“#”开头的元素过滤`data-target`掉`href`。这些`href`'s 依次用于选择 ScrollSpy 插件附加到的元素中包含的元素。选择的偏移量被存储，当发生滚动时，将当前滚动偏移量与存储的值进行比较，`<a>`用 class 更新相应的元素`active`。

希望这个总结可以帮助更好地理解在尝试实现插件时可能会遇到什么问题，而无需深入研究代码。

# android - 如何将此平板电脑注册到 Ubuntu udev 列表？

> ID：12111005
> 
> 赞同：10
> 
> 时间：2012-08-24T14:07:09.360
> 
> 标签：android, android-emulator, device-driver, adb

我有一个便宜的安卓平板电脑，我需要用它来测试它上面的应用程序。我使用的是 Ubuntu，所以我首先必须将设备添加到`udev`列表中。

我连接了平板电脑，但`adb`没有看到它

```
$ adb devices
List of devices attached 

$ 
```

我尝试使用`lsusb`，但 Ubuntu 无法识别该设备（检查了 USB 调试！在平板电脑的属性中）

```
$ lsusb 
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 008 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 004 Device 002: ID 046d:0928 Logitech, Inc. QuickCam Express
Bus 005 Device 002: ID 046d:c517 Logitech, Inc. LX710 Cordless Desktop Laser
Bus 001 Device 004: ID 2207:0000 
```

如果我连接我的手机，我看到它是通过最后一个通道连接的。因此，我假设此平板电脑被标识为`ID 2207:0000`，从而使 ID Vendor 为“2207”。我编辑了udev文件`51-android.rules`看起来像这样

```
SUBSYSTEM=="usb", ATTR{idVendor}=="2207", MODE="0666", GROUP="plugdev" 
```

重新启动comp，将USB电缆重新连接到平板电脑，平板电脑**再次无法识别**。

有什么建议我该怎么做？如何使这款平板电脑可见`adb`？

**编辑**

这个供应商 ID 对您来说是不是很奇怪：2207:0000？尤其是那四个零？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-26T22:16:39.927

我和你有同样的问题，我做了什么：将供应商 ID 添加到 ~/.android/adb_usb.ini

```
echo "0x2207" >>~/.android/adb_usb.ini 
```

在 /etc/udev/rules.d/51-android.rules 中添加了以下行：

```
SUBSYSTEM=="usb", ENV{DEVTYPE}=="usb_device", 
ENV{PRODUCT}=="207/*", MODE="0666" 
SUBSYSTEM=="usb", SYSFS{idVendor}=="207", MODE="0666" 
```

进行上述更改后，重新启动`adb`服务器并再次检查设备。

```
adb kill-server  // kill the adb server if it is running
adb start-server  // Restarts the adb server
adb devices  // It will list all connected devices 
```

现在我的中文平板爱可视 c906 在 ./adb 设备上被识别为：

```
List of devices attached 
0123456789ABCDEF    device 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T08:01:38.627

对于所有拥有 ID 2207 平板电脑的用户，这两个链接使其可见。

第一个是[这个](http://clamel.netai.net/smartpad850i/enable_adb)（`http://clamel.netai.net/smartpad850i/enable_adb`）。

它将帮助您设置此类设备。如果在此设置后平板电脑显示为`???????`，则使用其他链接使其可见。

另一个链接在[这里](http://ptspts.blogspot.com/2011/10/how-to-fix-adb-no-permissions-error-on.html)( `http://ptspts.blogspot.com/2011/10/how-to-fix-adb-no-permissions-error-on.html`)。

**如果在系统重新启动后您丢失了设置**，请重复相同的步骤或简单地重新启动`udev`服务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T14:18:05.577

有时你也必须添加它 adb.ini（是的，甚至在 linux 上）——我为 kindle fire 写了这篇文章——但它也应该对你有用。

[http://sentinelweb.co.uk/connecting-kindle-fire-to-adb-on-ubuntu/](http://sentinelweb.co.uk/connecting-kindle-fire-to-adb-on-ubuntu/)

# javascript - 将数据加载为 json 或从 html 文件加载是否更快？

> ID：12111007
> 
> 赞同：0
> 
> 时间：2012-08-24T14:07:11.487
> 
> 标签：javascript, jquery, json

标题用词很糟糕，所以这里有一个更长的描述：

我有一个以 html 格式导出数据的应用程序。（500 行，20 列）有很多无用的列看起来很糟糕。

我想使用数据表之类的东西[来](http://datatables.net/download/)制作更有用的表，即分页/排序/过滤/隐藏列

我首先尝试的选项是使用 jquery 中的 .load() 函数从导出的 html 文件中插入表。然后我遍历表删除/修改列。

这似乎很慢（我怀疑我的循环和搜索）所以我正在寻找改进。

一个想法是将我导出的 html 文件预先转换为 json（使用 notepad++ 宏或类似的东西），然后从该 json 文件构建我想要的表。

关于我是否可以期待大幅提升性能或需要注意的潜在问题有什么意见吗？

非常感谢/科尔姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:12:02.667

JSON 应该更快，当它加载它准备就绪时，无需对文本文件进行所有文本解析。许多其他 jquery 插件可以让您在 JSON 中轻松使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:20:51.600

我认为这不是关于哪个加载数据更快，而是哪个解决方案更适合您的问题。数据表非常灵活，您可以从不同的来源加载。看看示例中的“数据源”和“服务器端处理”：http: [//datatables.net/examples/](http://datatables.net/examples/)

数据表主要使用 JSON 格式。要处理您的数据，需要找到最佳方法；转换您导出的 html 文件，使用 javascript 处理文件以转换数据（jquery 可以在这里帮助您）等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:53:04.483

[这个页面](http://datatables.net/forums/discussion/2326/my-large-table-ie-fix/p1)给出了一些真实世界的例子，在 json 中加载数据与在 html 表中加载数据。相当确凿，请参阅 2010 年 7 月来自 sd_zuo 的帖子，从 json 加载速度提高了四倍，然后只构建您想要显示的表。

授予该页面专门处理 IE8 中 innerHtml 函数的缓慢性，但我想我会在 json 中试一试，看看它在几个浏览器中的比较情况。

PS[这个页面](https://stackoverflow.com/questions/5361810/fast-way-to-dynamically-fill-table-with-data-from-json-in-javascript)提供了关于使用原始javascript快速创建html然后只使用jquery一次插入一整行的好建议

# git - 如何使用 zip 文件中的几个版本启动 github 存储库

> ID：12111008
> 
> 赞同：2
> 
> 时间：2012-08-24T14:07:12.977
> 
> 标签：git, repository

我是 github 的新手，正在尝试启动一个存储库。我一直在寻找如何在这里，但人们提到的东西似乎不存在，而且它们没有直接链接。

我安装了 git 并在本地执行了 git init/add/commit 操作。工作正常。我之前还在网站上创建了一个存储库，其中包含 reade 的初始提交。现在我已经在两个不同的地方进行了两次初始提交，似乎没有什么想要同步的。所以我想我会删除存储库 Dan 重新开始。

当我这样做时，我想（如果可能的话）基于我的代码的旧 zip 启动存储库（我在每个版本中都压缩它），然后为每个版本上传 zip 以便我可以拥有存储库中的一些历史记录。

我该怎么做呢？

什么会使原始存储库同步而没有这么多错误？我在推送非快进更新时遇到了错误，我在服务器上运行 git update-server-info 时遇到了错误。合并告诉我我的 URL 没有指向提交。

我查看了 git 上的文档，这似乎也引用了我找不到的东西。所有本地 git 命令似乎都可以工作，但似乎没有涉及与 git 服务器（github）进行通信。

感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:56:00.943

这涉及一些繁琐的工作，但做起来相当简单。

1.  收集所有发布的 zip 文件
2.  将第一个版本的项目内容（我们称之为“v1.0”版本）解压缩到一个名为`v1.0`.
3.  创建一个新目录，`MyProjectRepository`然后递归地将 的内容复制`v1.0`到该目录中。
4.  切换到解`MyProjectRepository`压缩项目内容的顶层目录。
5.  做`git init .`
6.  用于`git add <filenames>`添加您希望在 git 存储库中跟踪的所有内容。（请注意，您的版本中可能有一些文件（例如，编译的`.o`/`.dll`文件、`.pyc`文件等）不值得跟踪。请参阅GitHub 上[的 gitignore 文件集合，](https://github.com/github/gitignore)了解哪些文件不值得跟踪在 VCSes 中。）如果您确定所有文件都值得跟踪，那么您可以简单地`git add -f *`）从项目根目录递归添加所有文件和目录。
7.  添加所有要跟踪的文件后，执行`git commit`并添加适当的提交消息；如果您想不出一个，只需说明“提交版本”。
8.  将项目的下一个按时间顺序发布的内容（我们将其称为“v2.0”）解压缩到一个名为`v2.0`.
9.  递归地将`v2.0`direcotyr 的内容复制到`MyProjectRepository`目录中。
10.  记下v1.0 中存在的 v2.0中*删除的所有文件；*您可以[使用 UNIX/GNU Linux`diff`命令来比较目录内容](http://linuxcommando.blogspot.com/2008/05/compare-directories-using-diff-in-linux.html)（例如，`diff v1.0 v2.0`）并查找显示“仅在 v1.0 中”的行。对于这些文件中的每一个`git rm <filename>`，在您的`MyProjectRepository`目录中执行一个。
11.  在您的`MyProjectRepository`中，运行`git status`以查看发生了什么变化。请注意下一个版本中 Git 未跟踪的任何新文件。添加那些应该使用`git add <filename>`. （您也可以使用`diff`上一步的结果来识别这些文件。）
12.  一旦您满意您已经删除了 v2.0 中删除的所有文件，并添加了 v2.0 中出现的任何新文件，请继续执行`git commit -a`，并添加适当的提交消息。
13.  按时间顺序对每个后续版本重复步骤 8-12，直到您涵盖所有版​​本。这可能很乏味，因此请考虑仅对主要版本执行此操作。
14.  为所有版本完成此操作后，您就可以将项目推送到 GitHub；按照 GitHub 关于创建新项目的说明进行操作，然后按照 GitHub 提供的推送项目的说明进行操作（如果您遇到困难，请[使用此答案](https://stackoverflow.com/a/8012698/38140)中的步骤但跳过该`git init`步骤 - 您已经在步骤5)

您现在将拥有一个托管在 GitHub 上的项目存储库，其中包含您可以克隆到其他计算机的版本之间的更改历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:56:28.827

我认为您所做的是创建了两个独立的 git 存储库——一个在本地，一个在 GitHub 上。他们不会匹配，因为他们彼此不了解。

您应该做的是在 github 上创建一个存储库，然后将其克隆到本地，然后进行更改，然后将其推送到 github 上的远程。

# forms - Magento：如何在表单提交时重定向

> ID：12111011
> 
> 赞同：0
> 
> 时间：2012-08-24T14:07:15.303
> 
> 标签：forms, magento, redirect

我正在使用 Magento CE 1.7。

我创建了一个 CMS 页面来添加“使用条款”，并在页面底部添加了一个简单的“接受条款”提交表单，让客户在访问我希望他们访问的页面之前同意这些条款. 这是代码。

```
<form action="url-to-go-to.html" method="GET" onsubmit="return checkCheckBox(this)">
I accept: <input type="checkbox" value="0" name="agree">
<input type="submit" value="Continue">
<input type="button" value="Exit" onclick="document.location.href='BACKTOWHAT.html';">
</form>

<script type="text/javascript">
<!--
function checkCheckBox(f){
if (f.agree.checked == false )
{
alert("Please tick the box to continue");
return false;
} else
return true;
}
-->
</script> 
```

我唯一的问题是，我只能通过输入我希望他们重定向到的页面的 URL 来使其工作。IE

```
<form action="domainname.com/shop.html"> <!-- store section to go to --> 
/* and the same goes for */
onclick="document.location.href='domainname.com';"> <!-- back to storefront --> 
```

我想使用其他东西而不是 URL，但我不知道该怎么做。我认为使用这样的东西会起作用。

```
<form action="<?php echo $this->_redirect('shop.html'); ?>" method=.... > 
```

但事实并非如此。

我相信如果这在一个 .phtml 文件中它会起作用，但我正在使用一个简单的 CMS 页面，我知道 magento 函数可以在 CMS 页面中工作，但我不知道一个可以用于此目的的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:19:40.947

好的，我经过更多测试后发现了它。（我还在学习如何编码）

这很简单，表单动作应该是这样的。

```
<form action="{{store direct_url='shop.html'}}" method=..... > 
```

并在“退出”时重定向回店面，这是有效的。

```
onclick="document.location.href='{{store direct_url=' '}} 
```

这非常有效。希望它可以帮助别人。

# excel - Excel中的数据透视表和手动更正

> ID：12111012
> 
> 赞同：0
> 
> 时间：2012-08-24T14:07:20.733
> 
> 标签：excel, pivot, pivot-table

我有一个来自数据源的数据透视表，其中包含特定日期的错误值。

我部门的一些人提供了对汇总数字的更正。

我是否有办法*仅为*此单元格点插入手动更正，或者是按值复制等的**唯一方法......？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:54:26.263

我相信更正源数据是您最好的选择。当然，最好的办法是他们可以为您提供更正的个人数据点。

如果您无法做到这一点，那么我认为您需要在源数据中添加一个帮助列，该列将包含您根据不正确聚合与正确聚合之间的比率计算的更正数字：

![在此处输入图像描述](../Images/514154dd058925a6a493350c9454f1dc.png)

在此示例中，在右侧，我计算了不正确聚合和正确聚合之间的比率。C 列是新的辅助列。它包含一个带有检查日期的 IF 语句的公式。如果是出现问题的日期，它将每个单独的金额乘以 G2 中的校正比率。然后，您可以更改数据透视表以使用 B 列而不是 C 列。

需要注意的是，C 列现在按行包含不正确的数据。再说一遍，显而易见，最好的办法是他们给你详细的数据！

# linux - 可以克隆 ViewVC SVN 存储库吗？

> ID：12111017
> 
> 赞同：0
> 
> 时间：2012-08-24T14:07:40.977
> 
> 标签：linux, svn

是否可以克隆或查看 ViewVC 托管的这个 svn 存储库？

[http://svnweb.mageia.org/adm/puppet/](http://svnweb.mageia.org/adm/puppet/)

或者它只是http视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:19:15.190

ViewVC 只是存储库的 Web 界面，不提供签出功能。

但是，对于该特定资源，Mageia 似乎确实提供了对其 SVN 存储库的匿名访问（请参阅[此 wiki 页面](https://wiki.mageia.org/mw-en/index.php?title=Svn_for_translators&oldid=10061#Commands_for_everyone)）。我能够使用以下方法检查该存储库路径：

```
svn co svn://svn.mageia.org/svn/adm/puppet 
```

*PS 您需要使用支持“svn”网络协议的 svn 客户端。*

# c# - Linq SQL 更新错误：无法解析符号

> ID：12111022
> 
> 赞同：-1
> 
> 时间：2012-08-24T14:07:58.097
> 
> 标签：c#, linq-to-sql

我尝试在 SQL db 中进行更新并得到错误

[使用来自http://msdn.microsoft.com/en-us/library/bb399339.aspx](http://msdn.microsoft.com/en-us/library/bb399339.aspx)的官方文档

```
var query =
from ord in db.Orders
where ord.OrderID == 11000
select ord;

foreach (Order ord in query)
{
ord.ShipName = "Mariner";
ord.ShipVia = 2;
}
db.SubmitChanges(); 
```

并尝试从[使用 LINQ 到 SQL 的更新](https://stackoverflow.com/questions/909960/update-using-linq)

```
using(var ctx = new FooContext()) {
var obj = ctx.Bars.Single(x=>x.Id == 1100);
obj.SomeProp = 123;
ctx.SubmitChanges();
}} 
```

为什么是错误？

```
ord.ShipName
Cannot resolve symbol 'ShipName'

var obj = ctx.Bars.Single(x=>x.Id == id);

Cannot resolve symbol 'Id' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:13:49.060

将公共修饰符添加到您的属性 Id 和 ShipName

```
public class Bar
{
 public int Id
 {
   get;
   set;
 } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:18:09.637

我认为您在尝试使用它之前没有声明您的变量，或者您拼写错误。另一种可能性是该变量位于错误的范围内，因此无法访问。

# c# - 使用 SharpZipLib 对流进行放气在 C# 和 VB.NET 中具有不同的行为

> ID：12111023
> 
> 赞同：1
> 
> 时间：2012-08-24T14:07:58.483
> 
> 标签：c#, .net, vb.net, stream, sharpziplib

我在编写静态 Deflate 扩展方法时遇到了麻烦，我将使用 SharpZipLib 库的 BZip2 算法（运行时版本：v2.0.50727）来对字符串进行放气。

我正在使用 .NET 框架 4 进行操作。

这是我的 VB.NET 代码：

```
Public Function Deflate(ByVal text As String)
    Try
        Dim compressedData As Byte() = Convert.FromBase64String(text)

        System.Diagnostics.Debug.WriteLine(String.Concat("Compressed text data size: ", text.Length.ToString()))
        System.Diagnostics.Debug.WriteLine(String.Concat("Compressed byte data size: ", compressedData.Length.ToString()))

        Using compressedStream As MemoryStream = New MemoryStream(compressedData)
            Using decompressionStream As BZip2OutputStream = New BZip2OutputStream(compressedStream)
                Dim cleanData() As Byte

                Using decompressedStream As MemoryStream = New MemoryStream()
                    decompressionStream.CopyTo(decompressedStream) // HERE THE ERROR!

                    cleanData = decompressedStream.ToArray()
                End Using

                decompressionStream.Close()
                compressedStream.Close()

                Dim cleanText As String = Encoding.UTF8.GetString(cleanData, 0, cleanData.Length)

                System.Diagnostics.Debug.WriteLine(String.Concat("After decompression text data size: ", cleanText.Length.ToString()))
                System.Diagnostics.Debug.WriteLine(String.Concat("After decompression byte data size: ", cleanData.Length.ToString()))

                Return cleanText
            End Using
        End Using
    Catch
        Return String.Empty
    End Try
End Function 
```

奇怪的是，我写了一个相同方法的 C# 对应物，而且效果很好！！！这是代码：

```
public static string Deflate(this string text)
{
        try
        {

            byte[] compressedData = Convert.FromBase64String(text);

            System.Diagnostics.Debug.WriteLine(String.Concat("Compressed text data size: ", text.Length.ToString()));
            System.Diagnostics.Debug.WriteLine(String.Concat("Compressed byte data size: ", compressedData.Length.ToString()));

            using (MemoryStream compressedStream = new MemoryStream(compressedData))
            using (BZip2InputStream decompressionStream = new BZip2InputStream(compressedStream))
            {
                byte[] cleanData;

                using (MemoryStream decompressedStream = new MemoryStream())
                {
                    decompressionStream.CopyTo(decompressedStream);

                    cleanData = decompressedStream.ToArray();
                }

                decompressionStream.Close();
                compressedStream.Close();

                string cleanText = Encoding.UTF8.GetString(cleanData, 0, cleanData.Length);

                System.Diagnostics.Debug.WriteLine(String.Concat("After decompression text data size: ", cleanText.Length.ToString()));
                System.Diagnostics.Debug.WriteLine(String.Concat("After decompression byte data size: ", cleanData.Length.ToString()));

                return cleanText;
            }

        }
        catch(Exception e)
        {
            return String.Empty;
        }
} 
```

在 VB.NET 版本中，我收到此错误：“流不支持读取。” （查看代码以了解它的来源！）

哪里错了？！！我不明白这两种方法有什么区别......

非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:17:26.093

现场游戏的差异表明，在第一个中您使用的是，`BZip2OutputStream`而第二个是`BZip2InputStream`。

输出流用于写入似乎是合理的，因此它说它是不可读的。

对于它的价值，那里有很多很好的比较工具。它们不会处理不同的语法，但是当您使用完全不同的对象时（至少在这种情况下），匹配的工作方式会很好地显示出来。我个人使用和推荐的是[Beyond Compare](http://www.scootersoftware.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:17:32.860

你切换`BZip2OutputStream`和`BZip2InputStream`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:17:41.467

在一个版本中，您使用的是 a `BZip2InputStream`，而在另一个版本中是 a `BZip2OutputStream`。

# c# - 如何使用 ReSharper7 在 NUnit 中运行单个测试

> ID：12111026
> 
> 赞同：0
> 
> 时间：2012-08-24T14:08:08.490
> 
> 标签：c#, visual-studio-2008, nunit, resharper

我的问题是如何一次在单个 TestFixture 上运行单个测试（例如用于调试）。我在每个测试类别中有几个 TestFixture，每当我单击单个测试上的 R# 图标时，它都会显示“运行”/“调试”，但是，即使选择了确切的测试和夹具，R# 和 NUnit 也会运行所有的装置一个接一个。

```
[Category("LoginTestSuite")]
[TestFixture(SiteEditionsEnum.AsiaPacific)]
[TestFixture(SiteEditionsEnum.Australia)]
[TestFixture(SiteEditionsEnum.Canada)]
[TestFixture(SiteEditionsEnum.CanadaFrench)]
[TestFixture(SiteEditionsEnum.France)]
[TestFixture(SiteEditionsEnum.Germany)]
[TestFixture(SiteEditionsEnum.HongKong)]
[TestFixture(SiteEditionsEnum.Japan)]
[TestFixture(SiteEditionsEnum.Spain)]
[TestFixture(SiteEditionsEnum.UnitedKingdom)]
[TestFixture(SiteEditionsEnum.UnitedStates)]

public class LoginTestSuite : FrontEndTestSuitesCommon
{
[...]

    [Test]
    public void RunLoginFunctionalTest()
    {
        Logger.Log(MessageType.None, "This test case is using the email address: " + ConfigurationManager.AppSettings["DefaultLoginEmail"], LogLevel.Info);
        Actions.Login.GetToLoginPage();
        Actions.Login.SetLoginCredentials(); 
```

点击后所有 Fixtures 开始运行（即所有 siteEditions）

菜单似乎说它将仅使用 UK TestFixtures 运行或调试该测试，但事实并非如此，而是运行所有固定装置。我使用带有内置 NUnit 2.6 的 VS2008 SP1、ReSharper 7.0.97.60

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:20:45.493

首先，我认为您的测试设置存在根本缺陷，您试图让您的一个测试做得太多。单元测试的主要概念之一是“单一职责”，拥有冗长的测试并不是一件坏事，拥有大量测试也不是一件坏事。

我的建议是将您的测试分解为每个 TestFixture 的一个类，或者您可以为每个 TestFixture 项创建一个测试吗？这与 Resharper 没有错误地运行您的测试无关，而是您编写测试的方式与 resharper 的设计工作方式不匹配。

# iphone - 子视图没有被删除

> ID：12111030
> 
> 赞同：1
> 
> 时间：2012-08-24T14:08:23.113
> 
> 标签：iphone, uiview, subview

有人能告诉我为什么这段代码没有删除正在动画的子视图吗？视图堆积起来，第二次关闭视图时，它不会动画，现在有两个带有标签 99 的 subView 实例。第一次没有发布。

```
for (UIView *subview in [self.smallView subviews]) {
    NSLog(@"view:%@",subview);
    if (subview.tag == 99) {

        [UIView animateWithDuration:.5
                         animations:^{
                             subview.alpha = 0;
                         }
                         completion:^(BOOL finished){
                             subview.alpha = 0;
                             [subview removeFromSuperview];
                         }];
    }
} 
```

这是我添加子视图的方法，viewVC 是 ViewController 子类，而 smallView 是我添加地图的位置，并且是所有视图的容器。

```
@property (nonatomic, retain) CustomViewController *viewVC;

viewVC = [self.storyboard instantiateViewControllerWithIdentifier:@"VIEWVC"];
viewVC.view.frame = CGRectMake(20, 20, 280, 371);

viewVC.view.layer.cornerRadius = 15;
viewVC.view.tag = 99;
viewVC.view.alpha = 0;
[self.smallView addSubview:viewVC.view];

[UIView animateWithDuration:.5
                 animations:^{
                     viewVC.view.alpha = 1;

                 }
                 completion:^(BOOL finished){
                     viewVC.view.alpha = 1;

                 }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:21:58.023

我认为问题可能是您正在从正在迭代的数组中删除一个对象，这会导致问题。试试这个：

```
NSArray *subviews = [NSArray arrayWithArray:[self.smallView subviews]];
for (UIView *subview in subviews) {
    NSLog(@"view:%@",subview);
    if (subview.tag == 99) {

        [UIView animateWithDuration:.5
                         animations:^{
                             subview.alpha = 0;
                         }
                         completion:^(BOOL finished){
                             subview.alpha = 0;
                             [subview removeFromSuperview];
                         }];
    }
} 
```

这样，您不再需要从正在迭代的数组中删除对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:25:46.853

您能否澄清一下为什么要检查 subview.tag 的值是否为 99？if 语句中的代码是否有可能根本没有被调用？抛出一些 NSLog 调用，看看你在 if 语句中的代码是否正在执行。如果是，那么您应该检查您在 if 语句中调用的方法，并确保它们都正常。

# c++ - 一个聪明的编译器可以在 std::move 不作为语言的一部分的情况下完成所有的事情吗？

> ID：12111040
> 
> 赞同：3
> 
> 时间：2012-08-24T14:09:06.753
> 
> 标签：c++, c++11, std, move

这是一个有点理论的问题，但是虽然我对 std::move 有一些基本的了解，但我仍然不确定它是否为语言提供了一些理论上无法用超级智能编译器实现的附加功能。我知道这样的代码：

```
{
  std::string s1="STL";
  std::string s2(std::move(s1));
  std::cout << s1 <<std::endl;
} 
```

是一种新的语义行为，而不仅仅是性能糖。:D 但是我想没有人会在执行 std::move(x) 之后使用 var x。同样对于仅可移动数据（std::unique_ptr<>，std::thread），如果类型被声明为可移动，编译器不能自动执行旧变量的移动构造和清除吗？同样，这意味着将在程序员背后生成更多代码（例如，现在您可以计算 cpyctor 和 movector 调用，而使用 automagic std::moving 您无法做到这一点）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T14:11:37.307

不。

> 但是我想没有人会在做 std::move(x) 之后使用 var x

绝对不能保证。事实上，编译器*不能*`std::move(x)`自动使用的一个不错的部分原因是，它不能自动决定你是否打算这样做。这是明确定义好的行为。

 *此外，删除右值引用意味着编译器可以自动为您编写所有移动构造函数。这绝对不是真的。D 有类似的方案，但它完全失败了，因为在许多有用的情况下，编译器生成的“移动构造函数”无法正常工作，但您无法更改它。

它还会阻止完美转发，后者还有其他用途。

委员会犯了许多愚蠢的错误，但右值引用不是其中之一。

编辑：

考虑这样的事情：

```
int main() {
    std::unique_ptr<int> x = make_unique<int>();
    some_func_that_takes_ownership(x);
    int input = 0;
    std::cin >> input;
    if (input == 0)
        some_other_func(x);
} 
```

哎呀。怎么办？您不能魔术在编译时知道“输入”的值。`some_other_func`如果和的尸体`some_func_that_takes_ownership`是未知的，这将是一个双重问题。这是停止问题 - 您无法证明`x`在 之后使用或不使用`some_func_that_takes_ownership`。

D 失败。我答应了一个例子。基本上，在 D 中，“移动”是“二进制复制并且不破坏旧的”。不幸的是，考虑一个类，比如说，一个指向自身的指针——你会在大多数字符串类、大多数基于节点的容器、用于`std::function`、的设计`boost::variant`以及许多其他类似的方便值类型中找到它。指向内部缓冲区的指针将被复制，但哦，不！指向旧缓冲区，而不是新缓冲区。旧缓冲区被释放 - GG 你的程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:52:21.487

这取决于您所说的“移动的作用”是什么意思。为了满足您的好奇心，我认为您希望被告知有关[**唯一性类型系统**](http://en.wikipedia.org/wiki/Uniqueness_typing)和[**线性类型系统**](http://en.wikipedia.org/wiki/Linear_type_system)的存在。

这些类型系统在编译时（在类型系统中）强制一个值仅由一个位置引用，或者不进行新的引用。`std::unique_ptr`鉴于其相当弱的类型系统，它是 C++ 可以提​​供的最佳近似值。

假设我们有一个新的存储类说明符，称为`uniqueref`. 这类似于`const`，并指定该值具有单个唯一引用；没有其他人有价值。它将启用此功能：

```
int main()
{
    int* uniqueref x(new int); // only x has this reference

    // unique type feature: error, would no longer be unique
    auto y = x; 

    // linear type feature: okay, x not longer usable, z is now the unique owner
    auto z = uniquemove(x);

    // linear type feature: error: x is no longer usable
    *x = 5;
} 
```

（注意到可以进行的巨大优化也很有趣，知道指针值实际上只通过该指针引用。`restrict`在这方面有点像 C99。）

就您所问的而言，由于我们现在可以说一个类型是唯一引用的，因此我们可以保证移动它是安全的。也就是说，移动操作最终是用户定义的，如果需要，可以做各种奇怪的事情，所以在当前的 C++ 中隐含地这样做是一个坏主意。

上面的所有内容显然都没有经过正式的考虑和指定，但应该让您了解这样的类型系统可能是什么样子。更一般地说，您可能需要一个[**Effect Type System**](http://en.wikipedia.org/wiki/Effect_system)。

但是，是的，这些想法确实存在并且已经过正式研究。C++ 太成熟了，无法添加它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T13:40:46.273

按照您建议的方式执行此操作比必要的要复杂得多：

```
std::string s1="STL";
std::string s2(s1);
std::cout << s1 <<std::endl; 
```

在这种情况下，相当肯定是指副本。但是如果你去掉最后一行，`s1`它的生命周期基本上会在`s2`.

在引用计数的实现中，复制构造函数 for`std::string`只会增加引用计数器，而析构函数将减少并在它变为零时删除。

所以顺序是

1.  （内联`std::string::string(char const *)`）
    1.  确定字符串长度
    2.  分配内存
    3.  复制字符串
    4.  将引用计数器初始化为 1
    5.  初始化字符串对象中的指针
2.  （内联`std::string::string(std::string const &)`）
    1.  递增引用计数器
    2.  将指针复制到字符串表示

现在编译器可以将其展平，只需将引用计数器初始化为 2 并将指针存储两次。公共子表达式消除然后找出`s1`并`s2`保持相同的指针值，并将它们合并为一个。

简而言之，生成代码的唯一区别应该是引用计数器被初始化为 2。*

# ruby-on-rails - Rails 为一个控制器提供多个命名空间

> ID：12111041
> 
> 赞同：2
> 
> 时间：2012-08-24T14:09:08.237
> 
> 标签：ruby-on-rails, ruby, namespaces, routes

我需要能够将一些路由添加到一个或多个**动态**路径。

例如`paths = [ "foo/news", "bar/news" ]`. 两者都需要走相同的路线。

应该是这样的：

```
paths.each do |path|
  namespace path, module: "news" do
    root :to => "welcome#index"
    resources :articles
  end
end 
```

但这给了我一个错误：

```
rake aborted!
Invalid route name: 'foo/news' 
```

我尝试了许多不同的东西，其中大多数都无法启动服务器，有些工作但只为我提供了第一条路径的好路线。

以前有人做过这样的事情吗？

我也希望能够使用路径，所以当我在时`'bar/news'`：

`news_article_path( @artice )`会给我`bar/news/articles/1`（而不是`foo/news/articles/1`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T14:50:58.057

问题是您正在将“/新闻”部分添加到循环中。尝试这个：

```
paths = [ "foo", "bar" ]

paths.each do |path|
  namespace path, module: "news" do
    namespace 'news', module: false do
      root :to => "welcome#index"
      resources :articles
    end
  end
end 
```

# jms - 如何控制 ActiveMQ 异步处理的消息数量？

> ID：12111044
> 
> 赞同：1
> 
> 时间：2012-08-24T14:09:11.887
> 
> 标签：jms, activemq, apache-camel

我是 ActiveMQ 的新手。我将它（和 Apache Camel）用于最终与 Web 服务通信的批处理。

我的问题是 ActiveMQ 如何控制它真正的异步程度？换句话说，如果它可以同时处理 20 条消息，但瓶颈是另一端的 Web 服务，我该如何控制呢？我可以减慢 ActiveMQ 的速度吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:33:40.113

如果您使用的是 apache camel 2.4+，您可以使用带有 camel 的节流器来控制到端点的消息流 - 您可以从 camel 2.8 开始动态更改限制 - 希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T07:28:39.633

骆驼节流阀将是一个很好的解决方案。但是，它确实将消息保存在当时的 Camel 应用程序的内存中。然而，它允许精确反应。

另一种选择是您可以在 Camel ActiveMQ JMS 使用者上配置的限制飞行中路由策略。可以使用上限/下限水位线设置配置该策略。然后该策略将相应地自动暂停/恢复 AMQ 消费者。您可以扩展此逻辑并改用您的自定义指标。

您可以在此处阅读有关此政策的信息：http: [//camel.apache.org/routepolicy](http://camel.apache.org/routepolicy)

这种方法不会在内存中保留任何消息，因为它将在 AMQ 消费者端控制以暂停/恢复它以“限制”流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T18:09:02.833

您还可以设置预取限制，防止 AMQ 根据从客户端返回的 message_delivered 响应的数量将特定传输上的消息分派给其消费者。这是一个[参考](http://activemq.apache.org/what-is-the-prefetch-limit-for.html)

# c# - LINQ 中的对象引用错误

> ID：12111049
> 
> 赞同：3
> 
> 时间：2012-08-24T14:09:26.493
> 
> 标签：c#, asp.net-mvc-3, linq

我应用了以下代码：

```
var country = from cnty in this.GetAll<CompanyDefinition>().ToList()
   where cnty.IsImported = true
   select new { 
      CompanyDefinitionID = cnty.CompanyDefinitionID
      , CompanyDefinitionName = cnty.Company.CompanyName + "(" + cnty.Country.CountryCode + "," + cnty.NaicsCode.NaicsCode1 + ")"
}; 
```

我收到对象引用错误。它指向“选择新的”。正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:22:42.537

问题是`Company`，`Country`或者`NaicsCode`是`null`，您需要在尝试访问它们的属性之前检查这一点。例如，您可以将查询重写为：

```
var country = from cnty in this.GetAll<CompanyDefinition>()
              where cnty.IsImported && cnty.Company != null && cnty.Country != null && cnty.NaicsCode != null
              select new {
                  ...
              } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:21:18.730

如果您正在使用延迟加载，那么使用`ToList()`方法是不合适的。调用后`ToList()`，`IQueryable<>`对象被物化为`IEnumerable<>`；因此不会查询`Company`或`Country`引用数据库。尝试删除 `ToList()`功能。

# eclipse - 如何使用 Eclipse 将 Railo 项目部署到 AWS？

> ID：12111053
> 
> 赞同：2
> 
> 时间：2012-08-24T14:09:32.853
> 
> 标签：eclipse, deployment, amazon-web-services, railo

我正在本地 Ubuntu 机器、Eclipse Indigo、Tomcat 7、Fusebox 4 和 AWS Toolkit for Eclipse 上运行[Railo项目](http://getrailo.org)

我的项目在我的本地开发盒上运行顺利。尝试部署项目有时需要不到 10 分钟（非常罕见），有时它永远不会发生，只是显示加载栏和/或最终失败。

我曾尝试发布一个有时可以工作的新项目，但是在尝试进行增量部署时，它几乎从未发生过（它工作过一次）。事实上，在我部署项目的那一次之后，我再也无法做到这一点。

> 无法将应用程序上传到 Amazon S3：无法计算 MD5 哈希：/home/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/aws-eclipse-1365821331354619151.war（没有这样的文件或目录)
> 无法计算 MD5 哈希：/home/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/aws-eclipse-1365821331354619151.war （没有这样的文件或目录）

没错，那个位置没有这样的文件。但为什么？是权限问题吗？我给了自己 GUI 文件浏览器的 root 权限，但仍然没有乐趣（gksu nautilus）。

我是 AWS 和 Ubuntu 环境的新手，不知道我应该怎么做才能部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:03:15.937

因此，您的一个问题似乎是通过 AWS java SDK 将文件上传到 S3 时出现问题，对吗？.. 第 1011 行[https://github.com/amazonwebservices/aws-sdk-for-java/blob/master/src/主/java/com/amazonaws/services/s3/AmazonS3Client.java#L1011](https://github.com/amazonwebservices/aws-sdk-for-java/blob/master/src/main/java/com/amazonaws/services/s3/AmazonS3Client.java#L1011)

因此，我认为您在这里所做的是尝试执行 putObject S3 命令，该命令具有 Content-MD5 哈希，表明请求无法通过身份验证。我遇到了这个问题，我发现 MD5 哈希需要进行 base64 编码，并且亚马逊需要它来上传文件。

但是，查看您的错误“没有这样的文件或目录”，这可能是一个不同的问题。做一个快速的谷歌我发现了一个可能感兴趣的帖子......

[https://forums.aws.amazon.com/message.jspa?messageID=143497](https://forums.aws.amazon.com/message.jspa?messageID=143497)

希望有些帮助。

# php - PHP中的Wordpress解析数组

> ID：12111054
> 
> 赞同：0
> 
> 时间：2012-08-24T14:09:36.877
> 
> 标签：php, wordpress

如何在 PHP 中解析它：

```
a:8:{s:3:"key";s:19:"field_501743d4baa78";s:5:"label";s:8:"Category";s:4:"name";s:8:"category";s:4:"type";s:8:"checkbox";s:12:"instructions";s:0:"";s:8:"required";s:1:"1";s:7:"choices";a:17:{s:4:"Arts";s:4:"Arts";s:8:"Business";s:8:"Business";s:14:"Communications";s:14:"Communications";s:16:"Criminal Justice";s:16:"Criminal Justice";s:13:"Culinary Arts";s:13:"Culinary Arts";s:9:"Education";s:9:"Education";s:11:"Engineering";s:11:"Engineering";s:11:"Health Care";s:11:"Health Care";s:22:"Information Technology";s:22:"Information Technology";s:13:"International";s:13:"International";s:5:"Legal";s:5:"Legal";s:17:"Political Science";s:17:"Political Science";s:10:"Psychology";s:10:"Psychology";s:8:"Religion";s:8:"Religion";s:7:"Science";s:7:"Science";s:9:"Technical";s:9:"Technical";s:10:"Veterinary";s:10:"Veterinary";}s:8:"order_no";s:1:"3";} 
```

获取所有“类别”的列表，例如艺术、商业、通信等

谢谢你的帮助

**更新**

运行反序列化后，这是我得到的：

```
array(8) { ["key"]=> string(19) "field_501743d4baa78" ["label"]=> string(8) "Category" ["name"]=> string(8) "category" ["type"]=> string(8) "checkbox" ["instructions"]=> string(0) "" ["required"]=> string(1) "1" ["choices"]=> array(17) { ["Arts"]=> string(4) "Arts" ["Business"]=> string(8) "Business" ["Communications"]=> string(14) "Communications" ["Criminal Justice"]=> string(16) "Criminal Justice" ["Culinary Arts"]=> string(13) "Culinary Arts" ["Education"]=> string(9) "Education" ["Engineering"]=> string(11) "Engineering" ["Health Care"]=> string(11) "Health Care" ["Information Technology"]=> string(22) "Information Technology" ["International"]=> string(13) "International" ["Legal"]=> string(5) "Legal" ["Political Science"]=> string(17) "Political Science" ["Psychology"]=> string(10) "Psychology" ["Religion"]=> string(8) "Religion" ["Science"]=> string(7) "Science" ["Technical"]=> string(9) "Technical" ["Veterinary"]=> string(10) "Veterinary" } ["order_no"]=> string(1) "3" } 
```

但是我不确定如何循环并获取类别名称 - 抱歉 - 我是 PHP 新手 - 可能只是在做一些愚蠢的事情 - 感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:10:33.290

那只是一个序列化的数组。只需反序列化它并轻松获取值：

```
$array = unserialize(a:8:{s:3:"key";s:19:"field_501743d4baa78";s:5:"label";s:8:"Category";s:4:"name";s:8:"category";s:4:"type";s:8:"checkbox";s:12:"instructions";s:0:"";s:8:"required";s:1:"1";s:7:"choices";a:17:{s:4:"Arts";s:4:"Arts";s:8:"Business";s:8:"Business";s:14:"Communications";s:14:"Communications";s:16:"Criminal Justice";s:16:"Criminal Justice";s:13:"Culinary Arts";s:13:"Culinary Arts";s:9:"Education";s:9:"Education";s:11:"Engineering";s:11:"Engineering";s:11:"Health Care";s:11:"Health Care";s:22:"Information Technology";s:22:"Information Technology";s:13:"International";s:13:"International";s:5:"Legal";s:5:"Legal";s:17:"Political Science";s:17:"Political Science";s:10:"Psychology";s:10:"Psychology";s:8:"Religion";s:8:"Religion";s:7:"Science";s:7:"Science";s:9:"Technical";s:9:"Technical";s:10:"Veterinary";s:10:"Veterinary";}s:8:"order_no";s:1:"3";});
var_dump($array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:51:17.163

```
$sample_arr = unserialize($array); //unserialize here
$sample_arr = $sample_arr['choices']; //get the array 
```

然后您将类别列表保存到 $sample_arr。

```
foreach($sample_arr as $temp) {
  //do stuff with each element here
} 
```

示例包括将其输出为 html 列表

```
echo '<ul>';
foreach($sample_arr as $temp) {
  echo '<li>' . $temp . '</li>';
}
echo '</ul>'; 
```

# javascript - 如何使用 jQuery 创建 AJAX 请求

> ID：12111056
> 
> 赞同：-5
> 
> 时间：2012-08-24T14:09:43.300
> 
> 标签：javascript, jquery

如何在用户完成将 11 位手机号码输入表单字段后使用 jQuery 创建 AJAX 请求？'有点像用户名可用检查'

案子...

用户在表单字段中输入手机号码

发出 AJAX 请求，发送手机号码[http://domain.com?mobile=xxx](http://domain.com?mobile=xxx)

如果重新调整的结果为“真”，则将框更改为绿色，否则为红色

例子

```
 <script type="text/javascript">
                $(document).ready(function(){

                        jQuery.ajax({
                            type: 'get',
                            url: 'http://domain.com',
                            data: {
                                apiKey: ''
                            },
                            dataType: "json",
                            context: document.body,
                            success: function(r) {
                                console.log(r);
                            }
                        });

                });
            </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:16:46.283

试试这个：

```
var digits = /^\d{11}$/;

$("input").on("keyup", function() {
    if ( digits.test(this.value) ) {
        $.ajax({
            url    : "/foo/bar",
            data   : { id: 1337 },
            success: function( data ) {
                console.log(data);
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:11:49.873

使用该`on()`方法附加到输入字段的键/粘贴事件，然后调用`$.ajax()`，传递适当的参数。

```
$.ajax({
    url: '/foo/',
     data: { name: "text to validate" },
     success: function (data) {
         alert(data);
     }
 }); 
```

上：[http](http://api.jquery.com/on/)
://api.jquery.com/on/ AJAX：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# html-table - 如何在没有 CSS 的情况下仅向 a 添加水平填充

> ID：12111060
> 
> 赞同：1
> 
> 时间：2012-08-24T14:09:52.557
> 
> 标签：html-table, cellpadding

有没有办法在左右两边使用单元格填充？我正在寻找答案，但我一直在寻找的只是 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:11:46.570

`<td>`不，如果不使用 parent定位标签，就没有明确的方法。基于此：[http](http://www.w3schools.com/tags/tag_td.asp) ://www.w3schools.com/tags/tag_td.asp没有任何支持的东西会有所帮助。

我建议使用诸如 rowspan 和 colspan 之类的属性来帮助调整表格单元格 - 使用它可以帮助您以您想要的方式构建内容，而无需使用 css。

# delphi - SetLength / Move - 导致内存损坏

> ID：12111061
> 
> 赞同：5
> 
> 时间：2012-08-24T14:10:07.550
> 
> 标签：delphi, memory-management, multidimensional-array, delphi-2009

今天我偶然发现了一个导致我的阵列损坏的问题。这是一个可重现的测试用例：

```
unit Unit40;

interface

type
  TVertex = record
    X, Y: Double;
  end;

  TEdge = record
    V1, V2: TVertex;
  end;
  TEdges = array of TEdge;

type
  TBoundryInfo = array of TEdges;

procedure MemoryCorrupt;

implementation

procedure MemoryCorrupt;
var
  BoundryInfo: TBoundryInfo;
  i, PointIndex, BoundryLength: Integer;
begin
  BoundryLength := 57;
  PointIndex := 0;
  SetLength(BoundryInfo, BoundryLength);
  for i := 0 to BoundryLength - 1 do
  begin
    if i <> 17 then
    begin
      SetLength(BoundryInfo[i], 1);
      BoundryInfo[i][0].V1.X := 1;
      BoundryInfo[i][0].V2.X := 1;
      BoundryInfo[i][0].V1.Y := 1;
      BoundryInfo[i][0].V2.Y := 1;
    end else
    begin
      SetLength(BoundryInfo[i], 2);
      BoundryInfo[i][0].V1.X := 1;
      BoundryInfo[i][0].V2.X := 1;
      BoundryInfo[i][0].V1.Y := 1;
      BoundryInfo[i][0].V2.Y := 1;
      BoundryInfo[i][1].V1.X := 1;
      BoundryInfo[i][1].V2.X := 1;
      BoundryInfo[i][1].V1.Y := 1;
      BoundryInfo[i][1].V2.Y := 1;
    end;
  end;
  BoundryLength := 9;
  SetLength(BoundryInfo, BoundryLength);
  Move(BoundryInfo[PointIndex+1], BoundryInfo[PointIndex],
    ((BoundryLength - 1) - PointIndex) * SizeOf(BoundryInfo[PointIndex]));
  Dec(BoundryLength);
  Finalize(BoundryInfo[BoundryLength]);
  SetLength(BoundryInfo, BoundryLength); //After this, arrays contains garbage
  BoundryInfo[0][0].V1.X := 3;
end;

end. 
```

我猜最后的内存损坏`SetLength`只是`Move`. 有人可以向我解释我做错了什么以及`Move`在这种情况下如何正确使用吗？

在原始问题中，我在循环中从 BoundryInfo 中删除元素，这就是我打电话的原因`Finalize(BoundryInfo[BoundryLength])`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T14:50:55.463

在您的代码中，

```
Move(BoundryInfo[PointIndex+1], BoundryInfo[PointIndex], 
  ((BoundryLength - 1) - PointIndex) * SizeOf(BoundryInfo[PointIndex])); 
```

将复制`BoundryInfo[PointIndex+1]`to的指针`BoundryInfo[PointIndex]`。这个指针是另一个动态数组，你必须注意引用计数。

那是：

```
SetLength(BoundryInfo[PointIndex],0); // release memory
Move(BoundryInfo[PointIndex+1], BoundryInfo[PointIndex], 
  ((BoundryLength - 1) - PointIndex) * SizeOf(BoundryInfo[PointIndex]));
PPointerArray(BoundryInfo)^[BoundryLength-1] := nil; // avoid GPF 
```

简而言之：

*   `move()`完成在;期间将被覆盖的项目
*   将 nil 写入最新的项目，该项目由`move()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T17:52:11.207

通过使用 Move 并颠覆动态数组引用计数机制，您只是为自己设置了一个陷阱。我强烈建议您坚持标准机制，让编译器担心细节。它每次都会让他们正确。

```
for i := 0 to high(BoundaryInfo)-1 do
  BoundaryInfo[i] := BoundaryInfo[i+1];
SetLength(BoundaryInfo, Length(BoundaryInfo)-1); 
```

# java - Java 不兼容的魔法值 4022320623

> ID：12111065
> 
> 赞同：3
> 
> 时间：2012-08-24T14:10:16.300
> 
> 标签：java, amazon-s3, amazon-ec2

当我在服务器上编译我的代码并下载它并尝试在我的计算机上运行它时，我遇到了一个奇怪的错误。

我基本上是在 EC2 实例上编译一些 java 文件，然后将它们加载到存储中以备后用。

当我将文件下载到计算机上并尝试运行它们时，出现以下错误：

```
Exception in thread "main" java.lang.ClassFormatError: Incompatible magic value  
     4022320623 in class file HelloWorldPackage/HelloWorldClass
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:787)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:447)
at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:476) 
```

我正在使用以下方法编译文件：

```
public void compileProject()
{

    String command = "javac ";
    for(String s: this.getPackages())
    {
        File[] files = new File("/home/benuni/CompileFiles/" + project + "/src/" + s).listFiles(new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return name.endsWith(".java");
            }
        });

        for(File f: files)
        {
            command = command + f.getAbsolutePath() + " ";
        }
    }

    try {
        System.out.println("command: '"+ command +"'");
        Process pro = Runtime.getRuntime().exec(command);
         printLines(" stderr:", pro.getErrorStream());

        pro.waitFor();

        this.moveClassFiles();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

并使用此方法上传文件：

```
public void uploadBin()
{
    for(String s: this.getPackages())
    {
        File[] filesInPackage = new File("/home/benuni/CompileFiles/"+this.project+"/bin/"+s).listFiles();

        for(File f: filesInPackage)
        {
            String key = this.project+"/"+this.version+"/bin/"+s+"/"+f.getName();
            s3.putObject("devcloud",key,f);

        }

    }

} 
```

有谁知道我做错了什么？当我在计算机上编译类文件时它们是可运行的，但是当我将它们上传到云端并下载它们时，我得到了错误？

谢谢，

本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-08T17:27:36.970

如果您使用 Maven 构建您的项目。尝试像在 POM 文件中那样禁用**maven-war-plugin中的资源过滤：**`<filtering>false</filtering>`

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-war-plugin</artifactId>
<version>2.3</version>
<configuration>
    <webResources>
        <resource>
            <filtering>false</filtering>
            <targetPath>WEB-INF/classes</targetPath>
            <directory>${project.basedir}/target/classes</directory>
        </resource>
    </webResources>
    <filtering>false</filtering>
  </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:16:30.180

Java 告诉您它不是一个有效的类文件，因为它没有以[预期的字节序列 ( `0xCAFEBABE`)](http://en.wikipedia.org/wiki/Java_class_file#Magic_Number)开头。下载时出了点问题。尝试在编辑器中检查您的类文件，看看您是否真的有其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:38:49.057

好的，感谢@Asaph 提到下载出错了，我想通了。

基本上下载很好，这是我写文件的方式。

当我下载项目时，我正在下载源代码和二进制文件，但我正在编写这两个文件，就好像它们是一样的。

因此更改了代码以检查文件类型，然后在必要时使用适当的编写器。如果出于某种奇迹有人遇到同样的问题或正在做类似的事情，这里的代码是：

***（请注意，这只是 5 秒前写的，用于解决问题，写得非常糟糕，我要自己重构它，但我不能为你做所有事情）***

```
public void download(String project, String version, String location)
{
    for(S3ObjectSummary s: getObjectList())
    {
        String[] data = s.getKey().split("/");
        if(data[0].equals(project) && data[1].equals(version))
        {
            S3Object object = s3.getObject(s3BucketName,s.getKey());
            InputStream input = object.getObjectContent();

            BufferedReader reader = new BufferedReader(new InputStreamReader(input));

            File file = new File(location +"/"+ data[0] + "/" + data[2] + "/" + data[3] + "/" + data[4]);
            if(!file.exists())
            {
                  try {
                      file.getParentFile().mkdirs();
                        file.createNewFile();
                } catch (IOException e) {

                    e.printStackTrace();
                }
            }
            try 
            {
                if(data[4].endsWith(".java"))
                {
                Writer writer = new OutputStreamWriter(new FileOutputStream(file));
                while (true) {          
                     String line = reader.readLine();           
                     if (line == null)
                          break;            

                     writer.write(line + "\n");
                }

                writer.close();
                }
                else if(data[4].endsWith(".class"))
                {
                    System.out.println("Writing Classes");
                    byte[] buffer = new byte[8 * 1024];

                    try {
                          OutputStream output = new FileOutputStream(file.getAbsolutePath());
                          try {
                            int bytesRead;
                            while ((bytesRead = input.read(buffer)) != -1) {
                              output.write(buffer, 0, bytesRead);
                            }
                          } finally {
                            output.close();
                          }
                        } finally {
                          input.close();
                        }
                }

            } catch (FileNotFoundException e) {

                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }
} 
```

# python - 如何知道 WebView（或整个 gtk.Window）何时完全呈现？

> ID：12111075
> 
> 赞同：2
> 
> 时间：2012-08-24T14:10:39.563
> 
> 标签：python, webkit, gtk, pygtk

我找到`'web-view-ready'`了 -signal 并像这样使用它：

```
web = webkit.WebView()
web.connect("web-view-ready", finished) 
```

但它从未被抓住。使用 gtk.Window 信号可以更简单吗？

# windows - 我是否发现了 Windows 错误？

> ID：12111080
> 
> 赞同：5
> 
> 时间：2012-08-24T14:11:07.823
> 
> 标签：windows, debugging, windows-nt

使用“C:\Program Files (x86)”时，我遇到了一个奇怪的问题，即位于该路径下方某处的程序。我用测试程序重现了这种行为。

```
 int _tmain(int argc, _TCHAR* argv[])
{
    wprintf(L"%d\n", argc);
    for (int i = 0; i < argc; i++) {
        wprintf(L"%s\n", argv[i]);
    }
    return 0;
} 
```

该程序计算并返回所有命令行参数（包括用于标识程序的程序路径）。我把它命名为“HelloWorld.exe”，因为我很着急。

对于运行程序的三种可能方式，它给出了两种不同的结果，而我期望得到相同的结果。

当我从自己的目录运行 HelloWorld.exe 时，输出是

```
1
HelloWorld.exe 
```

该输出是正确且符合预期的。

当我从另一个位置运行位于“P:\Test (x86)”中的 HelloWorld.exe 并使用引用的路径时，输出为

```
1
P:\Test (x86)\HelloWorld.exe 
```

该输出也是正确和预期的。

但是，当我从另一个位置运行 HelloWorld.exe 并使用带有转义空格和括号的路径时，找到了程序（即路径正确），但输出错误：

```
2
P:\Test
(x86)\HelloWorld.exe 
```

出于某种原因，逃逸的空间

P:\Test\^ ^(x86^)\HelloWorld.exe

出于某种原因，它变成了一个空格读取操作符，Windows 在将路径作为**一个**字符串读取以找到程序之后，在创建程序然后引用的数组之前决定它实际上是两个字符串。

此行为在 Windows XP (x86) 和 Windows Server 2008 R2 (x64) 中都会出现。我假设它存在于所有 (NT) 版本的 Windows 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:23:23.660

**更新：**

哎呀。也许这是 Windows 中的一个错误（或者该术语可能是错误的）。

我刚刚制作了一个快速的小测试程序，它只是简单地调用`GetCommandLine()`并将其打印到控制台。

我用以下方式调用它：

```
测试的^雨^在^西班牙^主要是^上^上^平原^^（或^所以^他们^说^）。

```

这是输出：

```
测试西班牙的雨主要落在平原上（或者他们这么说）。

```

所以我猜运行时库根本看不到插入符号，你唯一的选择是告诉你的用户使用引号而不是转义符。

* * *

不，这不是 Windows 中的错误。这是您的 C 运行时库中的一个错误（尽管在这种情况下我可能更喜欢术语缺点或缺陷）。

Windows 正在处理转义字符并定位您的可执行文件。但这并不是将命令行分成参数的原因。Windows 不是调用你的`main`函数（或`_tmain`在这种情况下）。它只是在 PE 标头中定义的入口点开始您的进程。在这个位置是一些 C 库代码（或对其的动态调用），在其他启动任务中，它调用 kernel32 函数`GetCommandLine()`，然后将其拆分为空格，尊重引号，但显然不是插入符号转义。

这并不奇怪，真的。我认为大多数人不知道您可以在 Windows 命令行上使用脱字符号转义字符。我当然没有。

如果这对您造成了现实世界的问题，其中有人实际上使用插入符号转义来调用您的程序，您可以告诉他们停止，或者编写自己的命令行解析例程，将输出传递给它`GetCommandLine()`，和忽略你传递给你的东西`main`。

# php - PHP BBCode 解析器

> ID：12111081
> 
> 赞同：0
> 
> 时间：2012-08-24T14:11:08.260
> 
> 标签：php

我有一个运行良好的小型 bbcode 解析器，除了 pre 和 code 标记。我需要让整个解析器函数忽略 pre 和 code 标记。我将如何实现这一目标？如果有人有想法，请告诉我。

我想要做的是，当我使用`<pre>`or`<code>`标记时，它会忽略内部使用的 bbcode，但会在页面上的其他任何地方解析它。我认为它可以通过 regex 和 preg_match 或 preg_replace 来实现。

```
function parse($text) {

  $search = array(
    '/\*\*(.*?)\*\*/is',  // bold
    '/\/\/(.*?)\/\//is',  // italic
    '/__(.*?)__/is',    // underline
  ); #search

  $replace = array(
    '<b>$1</b>',
    '<i>$1</i>',
    '<u>$1</u>',
  ); #replace

  return preg_replace($search, $replace, $text);

} #parse

<pre>

  ** Bold Text **
  // Italic Text //
  __ Uderline Text __

</pre>

<code>

  ** Bold Text **
  // Italic Text //
  __ Uderline Text __

</code> 
```

任何帮助都会受到欢迎。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:19:47.247

首先，这不是 BBCode。BBCode 使用`[`和`]`作为分隔符来模仿常见的 HTML 标记标签。你所拥有的是类似于 Markdown 或 reStructuredText 的东西。

其次，您的替换算法非常简单，将来可能会给您带来很多麻烦。如果您这样做不仅仅是为了学习如何使用 PHP 编码，我建议您使用已经完成您想做的事情的现有解析器，例如[PHP Markdown](http://michelf.ca/projects/php-markdown/)、[PHP reStrucuredText](http://code.google.com/p/php-restructuredtext/)或[PHP BBCode Parser](http://www.christian-seiler.de/projekte/php/bbcode/index_en.html)。

现在，至于你的实际问题：这并不容易，但你可以从改变你的正则表达式开始，这样它们只有在它们不在`<pre>`这样的标签内时才适用：（未经测试）

```
'/(?<!<pre>).*?\*\*(.*?)\*\*.*?(?!</pre>)/is',  // bold 
```

# sql-server - 是否可以在 MVC 中向 RouteCollection 添加路由？

> ID：12111082
> 
> 赞同：0
> 
> 时间：2012-08-24T14:11:09.530
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-routing

我想不出这篇文章的合理标题。

我遇到的问题是我的 MVC 网站附加了一个 SQL 数据库。在网站内，我有一个新闻/博客系统，我曾在该系统上将数据存储在数据库中，并根据请求提取信息。

问题是路由。我目前已将其设置为提取有关每个单独页面的路由的信息，如下所示：

> var newsr = new NewsResources();
> 
> foreach (var item in newsr.GetAllNewsItems()) { item.Title = item.Title.Replace(' ', '-').ToLower();
> 
> ```
> routes.MapRoute(item.Title, "News/" + item.Title,
> new {controller = "News", action = "Post", id = item.ID});} 
> ```

然而，当我添加一个新的新闻项目时，这并没有进入路由系统，这被证明是一个正确的痛苦。我有一个谷歌搜索动态添加 url 路由，但我似乎找不到解决方案。

我想知道的是，一旦我将帖子保存到数据库中，是否可以通过页面控制器将页面添加到路由系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:32:28.420

我认为您不需要在所有 POst 项目中执行 For Each 循环并为此添加路由。你可以这样做

```
public static void RegisterRoutes(RouteCollection routes)
{
     routes.MapRoute("SingleItem", "News/{title}",
             new { controller = "Items", action = "PostFromTitle" });

     // and the generic route
     routes.MapRoute(
            "Default", 
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", 
                                  id = UrlParameter.Optional } 
        );

} 
```

`../News/SomeTitle`这会将请求路由 到您的`PostFromTitle`操作方法`NewsController`。阅读那里的标题并从那里获取帖子。

```
public ActionResult PostFromTitle(string title)
{
  var post=repo.GetPostFromTitle(title);
  return View("~/Views/News/Post.cshtml",post);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:30:56.010

将标题作为参数的操作可能会更好。

```
routes.MapRoute("NewsItem", "News/{title}", 
    new { controller = "News", action = "ShowNews"  } 
```

# csv - CSV 操作 - 文本删除

> ID：12111096
> 
> 赞同：1
> 
> 时间：2012-08-24T14:12:12.480
> 
> 标签：csv, ssis

我正在尝试操作 .csv 文件以在数据开始之前删除文件开头的文本。该文件包含一个固定文本字符串，后跟一个日期字段，该字段将在文件之间更改，然后是另一个固定文本字符串。

例如。

```
"Text1"
"------"
"date"
"Text2"

"data column1","data column2" etc 
```

如何删除此文本以便我可以使用 SSIS 将数据导入 SQL 数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:28:10.007

如果我正确理解了这个问题，您想跳过文件的第一行。当您设置平面文件连接时，属性**标题行的格式部分中有一个选项可以跳过：** . 您可以将其设置为需要跳过的行数并且文件应该导入。如果您有一个实际的标题行，您也需要跳过它，然后手动映射列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:28:28.730

在 SSIS 导入配置中，是否没有选项告诉 SSIS“第一行有标题”或大致类似的东西？至少，这就是我在通过 SSIS 导入时所使用的。

# html - Google 不显示我的网站图标

> ID：12111099
> 
> 赞同：0
> 
> 时间：2012-08-24T14:12:18.853
> 
> 标签：html, icons

我使用下面的 HTML 代码向我的[网站](http://www.dihav.com/)添加了一个图标，它出现在所有浏览器中，但谷歌没有显示它（[https://s2.googleusercontent.com/s2/favicons?alt=p&domain=www.dihav.com](https://s2.googleusercontent.com/s2/favicons?alt=p&domain=www.dihav.com)）。有什么想法吗？

```
<link rel="shortcut icon" href="dihav.ico" type="image/x-icon"></link> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:38:04.537

这个对我有用……在FF也是

```
<link rel="icon" 
      type="image/ico" 
      href="images/logoicon.ico"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:16:12.797

将其命名为“ `favicon.ico`”。

使用以下代码测试此功能：

```
<SCRIPT>
<!--
 if ((navigator.appVersion.indexOf("MSIE") > 0)
  (parseInt(navigator.appVersion) >= 4)) {
   var sText = "<U><SPAN STYLE='color:blue;cursor:hand;'";
   sText += "onclick='window.external.AddFavorite(location.href,";
   sText += "document.title);'>Add this page to your favorites</SPAN></U>";
   document.write(sText);
  }
 //-->
</SCRIPT> 
```

[资源](http://www.axialis.com/tutorials/tutorial-iw004.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:29:23.453

我的工作是这样的：

```
<link rel="shortcut icon" href="images/Icon/imp_icon.ico"> 
```

类型不是必需的。此外不要忘记您的图标可能只有 16 x 16 像素。否则它确实不会显示。

# maven - 知道为什么 maven-deploy-plugin 不提供登录/密码命令行选项吗？（还是我瞎了？）

> ID：12111107
> 
> 赞同：1
> 
> 时间：2012-08-24T14:12:51.567
> 
> 标签：maven, artifactory, maven-deploy-plugin

我正在尝试创建一个脚本来“mavenize”一组库。为了使它们直接从工件存储库中可用，我希望脚本为我的每个库运行部署命令。但我似乎找不到登录+密码命令行选项；settings.xml 文件是指定它们的唯一选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:26:11.410

您可以将用户名和密码放在 URL 中：

```
http://username:password@hostname:port/path 
```

# silverstripe - 使用 DataObjectManager 调用两次 onAfterWrite 方法

> ID：12111108
> 
> 赞同：0
> 
> 时间：2012-08-24T14:12:53.033
> 
> 标签：silverstripe

我在车主和汽车之间使用具有 many_many 关系的 dataobjectmanager（我不能为此使用 manymanydataobjectmanager）。每当创建新车时，我都会遍历所有者的所有实例并将其 ID 与新车 ID 一起添加到链接表中。

我的问题是执行此操作的代码在 onafterwrite 方法中并被调用两次。我不确定为什么。我还注意到，对于我的三个所有者来说，它奇怪地在链接表中创建了行。前两个 ID 将按顺序排列，然后将粘贴一个。所以它将是第 1 行、第 2 行和第 4 行，没有第 3 行。

这是我的 onAfterWrite 方法

```
public function onAfterWrite() {

    if(Permission::check('ADMIN')){
        $Pages = DataObject::get('Owner');              

        foreach($Pages as $owner) {

        DB::query("INSERT INTO Owner_Cars (OwnerID, CarID) VALUES ('". $owner->ID . "', '" . $this->ID . "')");
        }
    }
    else {
        echo "Failure";
        return false;
    }
    return parent::onAfterWrite();
} 
```

我很感激你能给我的任何建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:14:31.080

该`onAfterWrite()`方法可能被调用两次，因为`write()`被调用了两次。发生这种情况的最常见原因是：

*   一个 write() 恰好生成了 ID
*   然后另一个 write() 作为保存依赖于该 ID 的相关记录的一部分发生。

一般来说，我认为你不能依赖 onAfterWrite() 被调用一次： write() 应该被设计成可以被调用任何旧的次数，并且只有在发生更改时才会真正影响数据库做出来。

您需要让您的代码调用必要的 DELETE、INSERT 和/或 UPDATE 语句才能与此兼容。例如，您可能会：

*   选择所有 Owner_Cars 记录，其中 OwnerID = $owner->ID
*   删除任何不在 $Pages 列表中的内容
*   插入 $Page 列表中尚未在 Owner_Cars 中的任何内容

* * *

如果可以的话，我会提出的另一个建议是试用 SilverStripe 3。SilverStripe 3 的 GridField 开箱即用地处理这类事情，您可能会发现在此基础上构建您的应用程序更容易。

# jquery - 为什么 jquery 的 addClass 和 removeClass 函数在这种情况下不起作用？

> ID：12111110
> 
> 赞同：0
> 
> 时间：2012-08-24T14:12:56.723
> 
> 标签：jquery

在我正在处理的页面中，jquery`addClass()`只是`removeClass()`偶尔工作。

签出： [http ://retype.se/temp/scrolltest/test.html](http://retype.se/temp/scrolltest/test.html)

例如第 162-171 行：

```
if(direction === 'down'){
     console.log('downer');
 console.log(affected);
 $(affected).removeClass('attached');
 $(affected).removeClass('parked-top');
 $(affected).addClass('parked-bottom');
} 
```

它将 downer 和实际元素写入日志，但不更改类。

它不会抛出错误或任何东西，而只是忽略它。

**编辑：将其保存到 jsfiddle， http:** [//jsfiddle.net/at9dZ/2/](http://jsfiddle.net/at9dZ/2/)

如您所见，如果您取消注释这些行上方的警报，它将发出警报...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:19:42.857

检查您如何缓存选择器：

```
var affected = $(this).parent('.product').children('.price'); 
```

因此，您可以`affected`直接使用对象，而不是再次使用 jQuery 选择器。

```
if (direction === 'down'){
    console.log('downer');
    console.log(affected);
    affected.removeClass('attached');
    affected.removeClass('parked-top');
    affected.addClass('parked-bottom');
} 
```

此外，您可以通过执行以下操作来美化它（真的只是糖）：

```
affected.removeClass('attached parked-top').addClass('parked-bottom') 
```

如果代码正在使用断点但在其他时间没有，这意味着在执行代码时可能没有加载 DOM，并且 jQuery 无法“找到”元素。将您的代码包装在：

```
$(function() {
    // Code here
}); 
```

或者..

```
$(document).ready(function(){ 
// Code Here
}); 
```

以确保它正确执行。

# samsung-smart-tv - 如何按顺序播放多个视频？

> ID：12111112
> 
> 赞同：1
> 
> 时间：2012-08-24T14:13:19.360
> 
> 标签：samsung-smart-tv

我正在尝试制作一个应用程序来顺序播放多个视频，为此，我已经看到了 Katura HTML5 视频播放器，我想问你它是否与三星 SDK 兼容，或者它不是三星的 HTML5 视频播放器SDK 兼容？

提前致谢

亚历杭德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:18:15.557

一个简单的方法是创建一个包含要播放的视频的数组，并利用播放器插件中的 OnRenderingComplete 回调在当前视频结束时播放数组中的下一个视频。大致是这样的：

```
var videos = ["url1", "url2"];
function playNext() {
  if (videos.length > 0) {
    url = videos.shift();
    player.Play(url);
  } else {
    //Playlist is over
  }
}

player.OnRenderingComplete = 'playNext'; 
```

# javascript - 过滤一组对象以获取一组值

> ID：12111121
> 
> 赞同：2
> 
> 时间：2012-08-24T14:14:16.563
> 
> 标签：javascript, backbone.js, twitter-bootstrap, underscore.js

实际上，这个问题与 typeahead bootstrap 有关，因为我需要使用自动完成定义一个值数组以在输入文本中显示。

无论如何，目标只是定义一个读取对象数组并返回字符串数组的函数。这是我的代码（1）。

(1) 的目标是：1) 从对象数组中获取字符串数组。2）过滤这个数组拒绝一些元素。

它不起作用，因为我要拒绝的元素仍然存在于数组中。事实上，在自动完成中我得到了 false 值，实际上它破坏了代码，因为预先输入不期望 false 。

应该如何修复代码并改进它？

* * *

(1)

```
element.typeahead({
    source: function ( {
        var users = _.map(app.userCollection.models, function (model) {
            if (model.get('id') === app.currentUser.id) {
                return false;
            }
            return model.get('first_name') + ' ' + model.get('last_name');
        });
        console.log(users); // [false, 'some name'];
        _.reject(users, function(name) {
            return name  === false;
        });
        console.log(users); // [false, 'some name'];
                            // why does the false value persist?
        return users;
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:27:04.780

下划线方法通常不对数组本身进行操作，但它们会返回一个新数组，但我建议单独检查每个函数的下划线[文档以进行确认。](http://underscorejs.org)在这种情况下，我们可以安全地假设拒绝返回一些新数组，根据下划线[文档](http://underscorejs.org/#reject)中的这句话：

> 返回列表中的值，不包含真值测试（迭代器）通过的元素。

您目前正在做的是：

```
_.reject(users, function(name) {
  return name  === false;
}); 
```

因此，您实际上并没有将结果保存在任何地方。要保留对数组的引用而不包含不需要的元素，请执行以下操作：

```
users = _.reject(users, function(name) {
  return name  === false;
}); 
```

这会产生你想要的结果，但让我给你一个重构提示：

尽可能使用主干自己的方法，这将使代码更具可读性

```
source: function() {
  // filter the collection down to the users you want
  var users = app.userCollection.filter(function(model) {
    return model.id === app.currentUser.id;
  });
  // -> users is now an array of models

  // use map to transform each wanted user to a string giving its full name
  users = _.map(users, function(user) {
    return user.get('first_name')+' '+user.get('last_name');
  });
  // -> users is now an array of strings

  return users;
} 
```

希望这可以帮助！

# php - PHP 更改为 mysqli。mysqli_connection 不是全局的吗？

> ID：12111122
> 
> 赞同：7
> 
> 时间：2012-08-24T14:14:33.337
> 
> 标签：php, mysql, function, mysqli

我刚刚开始了一个新的 PHP 项目，我想是时候遵循 php 的建议并停止使用 mysql 并改用 mysqli 了。但这给了我一个问题。

通常我的设置是这样的

Index.php 文件，在这个文件中我有 2 个 require 语句。一个调用 db.php 文件，另一个调用 functions.php 文件。到目前为止，一切都很好。

在functions.php 文件中，有很多不同的函数在整个主页上都使用，其中许多都使用SQL。使用 php old mysql API 这没问题，但新的 mysqli api 不允许从包含的文件使用连接？？？

例如，在我的 db.php 中，我有 connect 语句。`$db = mysql_connect(*******);` 在我的function.php中，我拥有`mysql_query(******)`并且它完美无缺。

但是如果我将 db.php 更改为`$db = mysqli_connect(*****);` Then 在我的 function.php 文件中，我无法调用`mysqli_query(***)`. （我也测试过面向对象，但它给了我同样的问题）。

那么如何解决这个问题呢？php 是否希望我将 mysqli_connect 语句放在*每个*使用 sql 语句的文件的开头？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T14:50:44.663

这是一个选项 - 创建一个静态类纯粹是为了将 mysqli 对象保存为公共静态变量：

```
class DBi {
    public static $conn;
}
DBi::$conn = new mysqli(HOST, USER, PASS, DB); 
```

...在包含文件、数据库助手或其他任何内容中。

然后，无论您想拨打 mysqli 电话，您都可以

```
DBi::$conn->query(...) 
```

使其尽可能全球化。如果您觉得需要，您可以轻松地开始在其中弹出您自己的自定义函数（方法） - DBi::custom_method()

[这是对Converting mysql to mysqli - how to get superglobal connection object 中](https://stackoverflow.com/questions/487375/converting-mysql-to-mysqli-how-to-get-superglobal-connection-object)给出的答案的一种改进？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T14:18:07.917

是的，MySQLi 是面向对象的，您需要将`$db`对象传递给需要数据库连接的函数。程序替代方案还要求`$db`对象起作用。这是为了您自己好，因为隐式全局连接（实际上：任何形式的全局状态）都是不好的做法。mysql 扩展允许隐式连接一开始并不好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-24T14:32:10.847

You need to set your $mysqli variable to be global if you need it in functions.

Something like this:

```
...
function name (){  
        global $mysqli; 

... 
```

# c - 标准如何指定对常规文件的原子写入（不是管道或 fifo）？

> ID：12111127
> 
> 赞同：11
> 
> 时间：2012-08-24T14:15:22.707
> 
> 标签：c, linux, posix, systems-programming

posix 标准规定，当向管道或 FIFO 写入少于 PIPE_BUF 字节时，授予原子性，也就是说，我们的写入不会与其他进程混合。但我未能找出标准如何指定常规文件。我的意思是，当我们写入少于 PIPE_BUF 时，它也将被授予原子性。但我想知道普通文件有这样的限制吗？我的意思是，管道有容量，所以当写入管道并超出其容量时，内核将使写入器休眠，因此其他进程将有机会写入，但普通文件似乎不必有这样的限制，我说的对吗？

我正在做的是几个进程将日志生成到文件中。当然，设置了 O_APPEND。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:43:44.437

引自[http://pubs.opengroup.org/onlinepubs/9699919799/toc.htm](http://pubs.opengroup.org/onlinepubs/9699919799/toc.htm)（单一 UNIX 规范，第 4 版，2010 版）：

> 本卷 POSIX.1-2008 未指定从多个进程并发写入文件的行为。应用程序应该使用某种形式的并发控制。

规范确实解决了在多个读取器的情况下写入的语义如何发生，但正如您从上面看到的那样，规范没有定义多个并发写入器的行为。

注意上面谈到**文件**。对于管道和 FIFO，应用 PIPE_MAX 语义，保证并发写入在 PIPE_MAX 字节内是不可分割的。

> 对管道或 FIFO 的写入请求应以与常规文件相同的方式处理，但以下例外：
> 
> {PIPE_BUF} 字节或更少的写入请求不应与来自其他进程在同一管道上进行写入的数据交错。无论文件状态标志的 O_NONBLOCK 标志是否设置，大于 {PIPE_BUF} 字节的写入可能会在任意边界上与其他进程的写入交错数据。

对于真实的文件系统，情况很复杂。一些本地文件系统可以通过在写入期间锁定文件句柄来强制执行原子写入到任意大小（内存限制），有些可能不会（我试图查看 ext4 逻辑，但在[http://lxr.linux.no附近的某处丢失了轨道/linux+v3.5.3/fs/jbd2/transaction.c#L147](http://lxr.linux.no/linux+v3.5.3/fs/jbd2/transaction.c#L147)）。

对于非本地文件系统，结果或多或少是可以抓取的。只是不要尝试在没有某种形式的显式锁定的情况下在网络文件系统上进行并发写入（或者您肯定绝对确定您正在使用的网络文件系统的语义）。

顺便说一句，O_APPEND 保证不同进程的所有写入都到文件末尾。但是，正如上面的 SUS 所指出的，如果写入确实是并发的（同时发生），那么行为是未定义的。在早期的单进程和非抢占式 UNIX 上，这并不重要，因为对 write(2) 的调用在其他人有机会编写之前完成......

对于操作系统（Linux？）和文件系统（ext4？）的**特定**组合，可以肯定地回答这个问题。一个普遍的答案？正如 SUS 所说——“未定义的行为”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T04:04:33.377

我认为这对你很有用：“writev() 写入的数据被写成一个单独的块，不会与其他进程的写入输出混合”，所以你可以使用 writev

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T21:07:19.533

所有原子性问题都有终极解决方案；互斥体。将您对日志文件的写入包装在互斥锁中，所有操作都将自动完成。

一个更简单的解决方案可能是使用 Google 的 GLOG 库。一个很棒的日志系统，比我想象的任何东西都要好得多，免费的，非 GPL 和原子的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:47:57.850

文件的多个编写者可能会混淆。但是使用 O_APPEND 打开的文件会在每次写入访问时自动附加。

如果您想保留 C stdio 接口而不是较低级别的接口，请使用“a”或“a+”（映射到 O_APPEND）打开文件，设置一个足够大的缓冲区，无需在您的内部写入记录并在完成构建后使用 fsync 强制写入。我不确定它是否由 POSIX 保证（C 对此只字未提）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-17T04:46:11.890

安全地交错它们的一种方法是让所有写入者锁定文件、写入和解锁。

可用于锁定的函数是flock()、lockf() 和fcntl()。

请注意，所有写入者都必须锁定（并且他们都应该使用相同的机制来进行锁定），或者一个不费心获得锁的人仍然可以与另一个持有锁的人同时写入。

# javascript - 如何从 Sencha Touch 中的 itemTpl 的 XTemplate 访问 rootProperty 之外的字段？

> ID：12111128
> 
> 赞同：2
> 
> 时间：2012-08-24T14:15:32.413
> 
> 标签：javascript, sencha-touch, extjs

假设我们在商店中有以下内容：

```
{
    "document": {
        "success": "true",
        "totalAllocation": "40000000.00",
        "fundAllocation": [
            {
                "fundName": "Zais Opportunity Ltd Class B",
                "allocation": "10000000.00"
            },
            {
                "fundName": "Metacapital Mortgage Opportunities Ltd",
                "allocation": "10000000.00"
            },
            ...
        ]
    }
} 
```

我想做的是这样的：

```
itemTpl: Ext.create('Ext.XTemplate',
    '<div>',
        '<span>{fundName}</span>',
        '<span>{[this.getPercentage(values.allocation, parent.totalAllocation)]}%</span>',
    '</div>',
    {
        getPercentage: function (allocation, totalAllocation) {
            return Ext.Number.toFixed(allocation / totalAllocation, 2);
        }
    }
) 
```

但是，当然，这不起作用，因为此范围内的“父级”为空。

知道如何获取 XTemplate 的基金中的 totalAllocation 字段的值，以在列表项中显示分配给当前基金的百分比吗？也欢迎解决方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T16:17:07.360

从您的数据代码来看，它看起来像是`document`存储根目录，因为`success`它下面有一个属性。假设是这种情况，您可以`rawData`在创建模板之前使用 store reader 的属性来获取对该值的引用。然后您可以简单地在函数中使用引用的值`getPercentage`。

您的代码没有显示您`itemTpl`在类中创建它的位置，所以我假设您是`itemTpl`在`initComponent`实例化的视图中创建它。

我不知道你在这里尝试创建什么类型的组件，除了它有一个`itemTpl`配置属性，它可以是`Ext.view.AbstractView`.

所以我会假设你正试图在网格面板的视图中使用它，因为这是`Ext.view.AbstractView`.

这是一些代码示例。

**示例 1：**

```
Ext.define('YourApp.view.TemplateGrid', {
    extend: 'Ext.grid.Panel',

    // column configs etc...

    initComponent: function() {
        var me = this,
            templateStore = Ext.getStore('TemplateStoreId'),
            totalAllocation = templateStore.proxy.reader.rawData.totalAllocation;

        me.viewConfig.itemTpl = Ext.create('Ext.XTemplate',
            '<div>',
                '<span>{fundName}</span>',
                '<span>{[this.getPercentage(values.allocation)]}%</span>',
            '</div>',
            {
                getPercentage: function (allocation) {
                    return Ext.Number.toFixed(allocation / totalAllocation, 2);
                }
            }
        )
    }
}); 
```

如果您希望能够再次加载存储（在初始化之后），示例 1 将不起作用，它还假定您的视图存储已经加载。这是另一个示例，显示了在不重新创建的情况下处理商店的多次加载的组件设置，它还假设在您创建视图时*未加载商店：*

**示例 2**

```
Ext.define('YourApp.view.TemplateGrid', { // or whatever you are calling it
    extend: 'Ext.grid.Panel',

    // column configs etc...

    totalAllocation = 0, // add this as a view property

    initComponent: function() {
        var me = this,
            templateStore = Ext.create('YourApp.store.TemplateStore');

        templateStore.on('load', function() {
            me.totalAllocation = templateStore.proxy.reader.rawData.totalAllocation;
        }

        me.viewConfig.itemTpl = Ext.create('Ext.XTemplate',
            '<div>',
                '<span>{fundName}</span>',
                '<span>{[this.getPercentage(values.allocation)]}%</span>',
            '</div>',
            {
                getPercentage: function (allocation) {
                    return Ext.Number.toFixed(allocation / me.totalAllocation, 2);
                }
            }
        )
        templateStore.load();
        me.callParent(arguments);
    }
}); 
```

# php - PHP 是否会自动处理 Win 和 *nix 中的路径分隔符？

> ID：12111129
> 
> 赞同：-1
> 
> 时间：2012-08-24T14:15:33.603
> 
> 标签：php, windows, linux, unix

PHP 是否会**自动处理**Win 和 *nix 中的路径分隔符？

例如：将**\**转换为**/** ... 或**\**转换为**\\**？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:21:00.453

不，但你可以使用`DIRECTORY_SEPARATOR`常量。

[预定义常量](http://php.net/manual/en/dir.constants.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:44:44.623

你的问题对我来说并不完全清楚，但是......我会回答“是的，但是”。“是”，因为您的脚本可以执行，即`include "foo/bar/smth.php";`它在 windows 和 linux/unix PHP 上的工作方式相同，您无需费心（但是如果您这样做`include "foo\bar\smth.php";`，它可能在 windows 上工作（从未检查过）但在 linux 上不工作/unix，所以要小心）。所以文件系统访问层意识到这一点并且会小心。和“但是”，因为如果您还谈论即进行 http 访问（即通过 HTTP）然后“否”，因为它与 PHP 无关。另外，我记得一些 MSIE 确实将反斜杠转换为普通斜杠，所以很垃圾`htt:\\`，但这是非常错误的方法的例子。

# linq-to-entities - 内部连接使用 LINQ 到实体 c# sql 数据库与两个相关表

> ID：12111131
> 
> 赞同：0
> 
> 时间：2012-08-24T14:15:45.377
> 
> 标签：linq-to-entities

你能帮忙吗？

我有一个由两个表组成的数据库：TestData & Core Table TestData 有列：ID (int) Core (int) Name(NVARCHAR) 等... Table Core 有列：ID (int) CoreName (Nvarchar)

我已经设置了一个关系，以便 Testdata (testdata.Core) 中的列链接到 Core.CoreID，这样我就可以将所有核心类型保存在一个表中，并使用数字 (int) 在我的主 TestData 表中描述它们。

我使用 LINQ c# 并希望显示绑定到 gridview 的结果，它显示了内部连接的等效项，以便我最终得到一个 gridview 结果，显示 TestData 表中的 ID 和 Name 列以及 Core 表中的 CoreName。

到目前为止，我有这段代码，它似乎有效，但只有当我指定 2 个条件时，例如 bc.CoreID 和 b.Core 等于变量 coreVar。

现在可能我可以有更多的列和变量，所以我想从一开始就正确，所以必须有比我下面的更好的方法来做到这一点？

任何帮助将不胜感激....

```
protected void Page_Load(object sender, EventArgs e)
{
    coreLabel.Text = "2";
    dbLabel.Text = "5";
    widthLabel.Text = "54mm";

    int coreVar = Convert.ToInt32(coreLabel.Text);

    var gridQuery = from b in _entity.TestData
                    from bc in _entity.CoreData
                    where (bc.CoreID == (coreVar)) && (b.Core ==(coreVar))
                    select new {b.ID, bc.coreName};

    resultGrid.DataSource = gridQuery;
    resultGrid.DataBind();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:34:47.883

好的，看起来您正在寻找一种动态扩展查询的方法。

```
var gridQuery = from b in _entity.TestData
                from bc in _entity.CoreData
                select new {b.ID, bc.coreName};

if (coreVar.HasValue)
{
   gridQuery = gridQuery.Where(bc.CoreID == coreVar.Value) 
                           && (b.Core == coreVar.value);
}
if (b.HasValue)
{
   gridQuery = gridQuery.Where(bc.B == b.Value) 
                           && (b.B == b.Value);
}
if .... 
```

这将为`AND`每个已定义变量的查询添加条件，因此当定义更多条件时，结果将受到更多限制。

# android - 检测应用程序创建的文件夹

> ID：12111132
> 
> 赞同：0
> 
> 时间：2012-08-24T14:15:48.227
> 
> 标签：android

有什么方法可以检测文件夹是否是由 Android 应用创建的，而不是由用户创建的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:28:18.060

不，文件系统中没有存储这样的信息（通常在 android 和 Linux 中也没有）。即使它会，从文件系统的角度来看，用户也永远不会创建任何东西。它始终是应用程序（如果应用程序自己执行或由用户指导并不重要）。应用程序只是告诉操作系统“为我创建那个文件夹”，没有提供任何更详细的信息，为什么它想要这样做以及谁是真正的罪魁祸首。

编辑：我刚刚意识到有一个案例可能在 OP 的脑海中 - SD 卡。那里的内容可以“由用户”创建（这意味着当它安装卡并从桌面访问时）而不是由 android 应用程序创建。但发现这一点可能很棘手。下面的一些建议 FileObserver。我不知道。我可能会尝试监视挂载/卸载广播，然后可能扫描 sd 卡以查看卸载后是否添加了任何内容。但它也相当无效，好像它是真正的sd卡并且用户将其放入时钟错误的机器中，然后我的扫描在那里找不到太多。其他尝试是知道那里有什么（所以一旦你第一次看到它就构建一个 sdcard 的“地图”，然后与后续的安装进行比较）。尽管如此，问题仍然存在 - 为什么需要它？也许有'

# actionscript-3 - 最大化窗口上的 Flex Spark GridItemRenderer

> ID：12111140
> 
> 赞同：0
> 
> 时间：2012-08-24T14:16:30.900
> 
> 标签：actionscript-3, apache-flex, datagrid, width, flex-spark

这是我的问题。我有：GridItemRenderer（我使用它的火花DataGrid大小是：100％x 100％），这是其中的功能：

```
override public function prepare(hasBeenRecycled:Boolean):void {
    myLabel.text = width.toString();
} 
```

这是其中的“myLabel”：

```
<s:Label id="myLabel" x="0" y="0" width="100%" height="20" paddingBottom="0" paddingLeft="0" paddingRight="0" paddingTop="0"/> 
```

所以问题是：

当我拖动窗口的一侧并调整它的大小时，一切都很好！myLabel 正在更新，但有时最后一列没有。但是当我最大化窗口时，什么都没有发生，但是“宽度”变量被更新了，但 myLabel.text 没有。（所以我也尝试使用this.width，但没有生效）

# javascript - Javascript / jQuery 加载（冲突）

> ID：12111141
> 
> 赞同：1
> 
> 时间：2012-08-24T14:16:32.117
> 
> 标签：javascript, jquery, html, css, drupal-6

我正在尝试加载一些 jQuery 文件、drupal 6 幻灯片、flexslider carosel、现代化和引导模式。

我只想说我包含了来自 google cdn 的 jquery 并且没有冲突来加载 flex 滑块 - 如果我将 flexslider 负载带走幻灯片工作。奇怪的。

```
<script type="text/javascript">
 $.noConflict();
 jQuery(window).load(function() {
  jQuery('.flexslider').flexslider({
  controlNav: false, 
    animation: "slide",
    animationLoop: false,
    itemWidth: 162,
    itemMargin: 5
  });
});
</script> 
```

除了 drupal 6 幻灯片之外，一切都运行良好。它在 chrome 中返回此错误-

```
Uncaught TypeError: Property '$' of object [object Window] is not a function 
```

我知道 drupal 6 引入了 jquery 1.4 版，并且我也有 google 1.7 cdn，但我确实没有任何冲突的代码工作。

任何有关加载此滑块的帮助将不胜感激。

旁注 - 现代化者为什么要在我的整个网页上放置一个非常微妙的浅白色背景？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T14:21:46.733

大多数时候，您不需要使用`jQuery`s`noConflict`选项。当您使用 noConflict 时，`$`sign 不再是指代，`jQuery`并且大多数插件依赖于`jQuery`使用`$`来访问它。

您的幻灯片还希望通过 $ 访问 Jquery，但您使用了 noConflict 并删除了插件使用的引用。

只需删除 noConflict 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:24:23.360

在您的页眉中，下面的代码已经存在。

```
<script>
    var jq17 = jQuery.noConflict();
</script> 
```

所以在那之后，你不能再使用`$`as jQuery 了，你应该只使用`jq17`.

# sql - SQL 注入 - 复合语句？

> ID：12111143
> 
> 赞同：3
> 
> 时间：2012-08-24T14:16:34.583
> 
> 标签：sql, code-injection

是否可以 SQL 注入以这些值结尾或从变量中提取的单个`DESC`查询`ASC`？

```
SELECT * FROM [master].[dbo].[spt_values] ORDER BY low asc 
```

尝试添加分号和新语句将不起作用，因为该语句直接加载到记录集中。

我们尝试了半冒号 new 语句和 union 等。

有没有办法将数据集加入第一个而不嵌套，因为第一个没有嵌套？

编辑：分号新命令将不起作用，因为它全部作为记录集返回。它只是使用新命令引发各种错误。目前正在修复中。只是试图向高层管理人员表明这些事情不是好的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:21:21.530

是的，或者你当然可以在那里注射。像这样试试

```
SELECT * FROM [master].[dbo].[spt_values] ORDER BY low asc; DROP TABLE Users; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:19:07.410

是的，这是可能的。为什么不验证 untrusted(!) 输入字符串？

```
Assert.IsTrue(str == "asc" || str == "desc"); 
```

# bash - 使用带有空格的文件中的参数在 bash 脚本中调用函数

> ID：12111144
> 
> 赞同：5
> 
> 时间：2012-08-24T14:16:36.440
> 
> 标签：bash, shell

我想使用从文件中读取的参数执行命令。这工作正常，直到 1 个参数需要有一个空格。

我试过用引号和反斜杠对单词进行分组，但都没有奏效。

我所追求的功能正是这样`xargs`做的，除了我需要调用一个函数而不是一个命令，因为它依赖于脚本中其他地方设置的其他变量

脚本：

```
do_echo() {
    echo '$1:' $1
    echo '$2:' $2
}
line=`cat input.txt` #cat used for simplicity, can have more than 1 line
do_echo $line 
```

输入.txt：

```
"hello world" "hello back" 
```

预期结果：

```
$1: hello world
$2: hello back 
```

观察结果：

```
$1: "hello
$2: world" 
```

编辑：

我正在使用它以不同的输入多次执行相同的命令。每行最多有 15 个参数，可能超过 50 行。

表格格式将是理想的，尽管将每个参数放在一行中的当前答案将起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:43:47.207

未加引号的变量（如`do_echo $line`）在变量中的任何字符处严格分割`IFS`（默认设置为制表符、空格、换行符）。严格意味着非常严格，没有办法引用或逃避分裂。

基本的解决方法是将一个不需要的字符（例如冒号`:`）定义为拆分字符。

例如

```
$ cat input.txt
hello world:hello back
$ line=$(head -n 1 input.txt)
$ OLDIFS=$IFS IFS=:
$ do_echo $line
$1: hello world
$2: hello back
$ IFS=$OLDIFS 
```

另一种解决方法是使用`eval`但`eval`很危险。你绝对必须相信输入！

```
$ cat input.txt
"hello world" "hello back"
$ line=$(head -n 1 input.txt)
$ eval do_echo "$line"
$1: hello world
$2: hello back 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:21:09.580

不要使用引号，而是使用保证不会出现在单个参数中的字符来分隔每个参数。例如，使用分号：

```
hello world;hello back
argument 1;argument 2 
```

然后你可以读取一组参数，一次一批，使用`read`：

```
while IFS=';' read -a arguments; do
    do_echo "${arguments[@]}"
done < input.txt 
```

如果您可以在文件中输入模糊的 ASCII 控制字符，例如单位分隔符 (ASCII 0x1f)，则它们不太可能出现在参数中。

# xslt - 使用 XSLT 的 Google 自定义搜索

> ID：12111149
> 
> 赞同：3
> 
> 时间：2012-08-24T14:16:56.140
> 
> 标签：xslt, search-engine

我正在尝试将谷歌自定义搜索引擎实现到使用 xslt 运行的网站。

此代码位于头部

```
(function() {
    var cx = '..............';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
})(); 
```

而正文中的这个片段

```
<gcse:search></gcse:search> 
```

但我只收到以下错误**警告：DOMDocument::load(): Namespace prefix google on search is not defined**

一些想法为什么？我需要一个特殊的 xmlns 吗？

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T17:18:54.480

我正在尝试理解[https://developers.google.com/custom-search/docs/element#overview](https://developers.google.com/custom-search/docs/element#overview)和您发布的问题。我有点猜测，但基于[https://developers.google.com/custom-search/docs/element#html5](https://developers.google.com/custom-search/docs/element#html5)尝试`<gcse:search></gcse:search>`在您的代码中替换为`<div class="gcse-search"></div>`，这样我希望您的 XSLT 输入是格式良好的命名空间并且您的尝试将 Google 搜索包含在转换结果中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-29T05:04:25.040

只是从上面 Martin 分享的链接中带出如何***添加属性示例：***

### HTML5 有效的 div 标签

只要您遵守以下准则，您就可以使用 HTML5 有效的 div 标签：

*   类属性必须设置为***gcse-XXX***
*   任何属性都必须以***data-***为前缀。

例如：

```
<div class="gcse-searchbox" data-resultsUrl="http://www.example.com"
     data-newWindow="true" data-queryParameterName="search" >
```

# javascript - 在joomla中切换div js不起作用

> ID：12111154
> 
> 赞同：0
> 
> 时间：2012-08-24T14:17:14.277
> 
> 标签：javascript, joomla

我的切换 div js 在 joomla 中不起作用。当 js 代码在页面头部时它工作正常，当它在外部文件中时它不会。我所有的链接似乎都很好：

Joomla 模板 - Index.php：

```
<?php
$document = &JFactory::getDocument();
$document->addScript( '/js/togglediv.js' )
 ?> 
```

Joomla 模板 - templateDetails.xml：

```
<filename>js/togglediv.js</filename> 
```

切换div.js：

```
function toggle() {
var ele = document.getElementById("box");
var text = document.getElementById("displayText");
if(ele.style.display == "block") {
        ele.style.display = "none";
    text.innerHTML = "show";
}
else {
    ele.style.display = "block";
    text.innerHTML = "hide";
} 
```

}

HTML：

```
<div id="footer">
<a id="displayText" href="javascript:toggle();">show</a>    
<div id="box">hello</div>
</div> 
```

CSS：

```
#box {
width: 304px;
height: 40px;
float: left;
position: relative;
border: 1px solid green;
display: none;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:22:04.230

您需要提供 的完整地址`addScript()`。为此使用 JURI：

```
$document->addScript( JURI::Root().SERVER_PATH_TO_JS_FOLDER.'/js/togglediv.js' ) 
```

您在 HTML 中的 JS 有点偏离。尝试这个：

```
<a id="displayText" href="javascript:void(0);" onclick="toggle()">show</a> 
```

似乎也没有任何东西`id` `box`。

# cocoa - 窗口关闭后无法恢复

> ID：12111155
> 
> 赞同：9
> 
> 时间：2012-08-24T14:17:20.027
> 
> 标签：cocoa

当我从 Xcode 启动我的 OS X 应用程序时，它应该会出现。

当我关闭窗口时，它会消失（如您所料），并且该应用程序在 Dock 上仍然处于活动状态。

太好了，应该是这样的。但是当我单击停靠栏以激活窗口时，它不会显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T14:39:00.173

问题中没有太多信息，但让我假设该应用程序是单窗口应用程序（即，不`NSDocument`基于 -）。

这种情况下的一个典型情况是用户关闭了窗口，而应用程序继续使用 Dock 中的图标按预期运行。

在这种情况下，用户通常希望通过单击 Dock 中的图标激活应用程序时重新出现该窗口。

要获得它，您可以`applicationShouldHandleReopen:hasVisibleWindows:`按如下方式实现：

```
- (BOOL)applicationShouldHandleReopen:(NSApplication *)theApplication hasVisibleWindows:(BOOL)visibleWindows
{   
    if ( visibleWindows ) {
        [self.window orderFront:self];
    }
    else {
        [self.window makeKeyAndOrderFront:self];
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-01T02:07:44.370

快速：

```
func applicationShouldHandleReopen(sender: NSApplication, hasVisibleWindows flag: Bool) -> Bool {
    if let window = sender.windows.first {
        if flag {
            window.orderFront(nil)
        } else {
            window.makeKeyAndOrderFront(nil)
        }
    }

    return true
} 
```

# android - dumpsys 未在 2.3 中运行

> ID：12111160
> 
> 赞同：0
> 
> 时间：2012-08-24T14:17:43.393
> 
> 标签：android, android-ndk, media-player, dump

我在 android 2.3.3 中运行了以下指令`Process p = Runtime.getRuntime().exec("/system/bin/dumpsys media.player")//INSTRUCTION TO DUMP MEDIA PLAYER INFO;`，但我得到了权限拒绝。我的清单是这样的，我已经授予了所有权限，这在 2.2 中运行良好

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.SampleDumpsys.Activity"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.ACCESS_CHECKIN_PROPERTIES" />//ALL PERMISSIONS
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_SURFACE_FLINGER" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCOUNT_MANAGER" />
    <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS" />
    <uses-permission android:name="android.permission.BATTERY_STATS" />
    <uses-permission android:name="android.permission.BIND_APPWIDGET" />
    <uses-permission android:name="android.permission.BIND_DEVICE_ADMIN" />
    <uses-permission android:name="android.permission.BIND_INPUT_METHOD" />
    <uses-permission android:name="android.permission.BIND_REMOTEVIEWS" />
    <uses-permission android:name="android.permission.BIND_WALLPAPER" />
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.BRICK" />
    <uses-permission android:name="android.permission.BROADCAST_PACKAGE_REMOVED" />
    <uses-permission android:name="android.permission.BROADCAST_SMS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />
    <uses-permission android:name="android.permission.BROADCAST_WAP_PUSH" />
    <uses-permission android:name="android.permission.CALL_PHONE"/>
    <uses-permission android:name="android.permission.CALL_PRIVILEGED" />
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.CHANGE_COMPONENT_ENABLED_STATE" />
    <uses-permission android:name="android.permission.CHANGE_CONFIGURATION" />
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.CLEAR_APP_CACHE" />
    <uses-permission android:name="android.permission.CLEAR_APP_USER_DATA" />
    <uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES" />
    <uses-permission android:name="android.permission.DELETE_CACHE_FILES" />
    <uses-permission android:name="android.permission.DELETE_PACKAGES" />
    <uses-permission android:name="android.permission.DEVICE_POWER" />
    <uses-permission android:name="android.permission.DIAGNOSTIC" />
    <uses-permission android:name="android.permission.DISABLE_KEYGUARD" />
    <uses-permission android:name="android.permission.DUMP" />
    <uses-permission android:name="android.permission.EXPAND_STATUS_BAR" />
    <uses-permission android:name="android.permission.FACTORY_TEST" />
    <uses-permission android:name="android.permission.FLASHLIGHT" />
    <uses-permission android:name="android.permission.FORCE_BACK" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.GET_PACKAGE_SIZE" />
    <uses-permission android:name="android.permission.GET_TASKS" />
    <uses-permission android:name="android.permission.GLOBAL_SEARCH" />
    <uses-permission android:name="android.permission.HARDWARE_TEST" />
    <uses-permission android:name="android.permission.INJECT_EVENTS" />
    <uses-permission android:name="android.permission.INSTALL_LOCATION_PROVIDER" />
    <uses-permission android:name="android.permission.INSTALL_PACKAGES" />
    <uses-permission android:name="android.permission.INTERNAL_SYSTEM_WINDOW" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" />
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS" />
    <uses-permission android:name="android.permission.MANAGE_APP_TOKENS" />
    <uses-permission android:name="android.permission.MASTER_CLEAR" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
    <uses-permission android:name="android.permission.MOUNT_FORMAT_FILESYSTEMS" />
    <uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" />
    <uses-permission android:name="android.permission.NFC" />
    <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />
    <uses-permission android:name="android.permission.READ_CALENDAR" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.READ_FRAME_BUFFER" />
    <uses-permission android:name="android.permission.READ_HISTORY_BOOKMARKS" />
    <uses-permission android:name="android.permission.READ_INPUT_STATE" />
    <uses-permission android:name="android.permission.READ_LOGS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
    <uses-permission android:name="android.permission.READ_SYNC_STATS" />
    <uses-permission android:name="android.permission.REBOOT" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.RECEIVE_MMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_WAP_PUSH" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.REORDER_TASKS" />
    <uses-permission android:name="android.permission.RESTART_PACKAGES" />
    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.SET_ACTIVITY_WATCHER" />
    <uses-permission android:name="android.permission.SET_ALARM" />
    <uses-permission android:name="android.permission.SET_ALWAYS_FINISH" />
    <uses-permission android:name="android.permission.SET_ANIMATION_SCALE" />
    <uses-permission android:name="android.permission.SET_DEBUG_APP" />
    <uses-permission android:name="android.permission.SET_ORIENTATION" />
    <uses-permission android:name="android.permission.SET_POINTER_SPEED" />
    <uses-permission android:name="android.permission.SET_PROCESS_LIMIT" />
    <uses-permission android:name="android.permission.SET_TIME" />
    <uses-permission android:name="android.permission.SET_TIME_ZONE" />
    <uses-permission android:name="android.permission.SET_WALLPAPER" />
    <uses-permission android:name="android.permission.SET_WALLPAPER_HINTS" />
    <uses-permission android:name="android.permission.SIGNAL_PERSISTENT_PROCESSES" />
    <uses-permission android:name="android.permission.STATUS_BAR" />
    <uses-permission android:name="android.permission.SUBSCRIBED_FEEDS_READ" />
    <uses-permission android:name="android.permission.SUBSCRIBED_FEEDS_WRITE" />
    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
    <uses-permission android:name="android.permission.UPDATE_DEVICE_STATS" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />
    <uses-permission android:name="android.permission.USE_SIP" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.WRITE_APN_SETTINGS" />
    <uses-permission android:name="android.permission.WRITE_CALENDAR" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_GSERVICES" />
    <uses-permission android:name="android.permission.WRITE_HISTORY_BOOKMARKS" />
    <uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" />
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name">
        <activity
            android:name=".SampleDumpsysActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>` 
```

我现在该怎么办？我无法添加root权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:20:43.037

您请求的大多数权限都无法保留，除非您使用与固件签名相同的签名密钥进行签名。如果您作为固件的一部分安装，您可能可以保留一些，即使您使用不同的密钥签名。

`dumpsys`旨在由开发人员从开发机器上运行，通过`adb shell`. 它并非旨在由设备上的应用程序运行。我的理解是您需要`DUMP`许可，只有当您由固件的签名密钥签名或安装在固件的分区上时才能持有。普通的 SDK 应用程序都不是。

# php - 如何在自定义 Joomla 按钮中传递参数？

> ID：12111161
> 
> 赞同：0
> 
> 时间：2012-08-24T14:17:42.543
> 
> 标签：php, joomla, joomla2.5

我可以添加一个按钮，使用语法调用我选择的函数

```
JToolBarHelper::custom('functionIWant', ... ); 
```

但是，是否可以将参数与该函数一起传递？我试过了：

```
JToolBarHelper::custom('functionIWant(0)' ... ); 
```

这没有用。

简单地对隐藏进行硬编码`<input>`无济于事，因为我需要为三个按钮中的每一个设置不同的参数。

目前每个按钮调用一个不同的函数，这三个函数都做同样的事情。我正在尝试减少代码大小。有什么方法可以传递参数（通过调用`custom`声明中的函数，或者通过 JS 和`setVar()`操作。）否则，我是否只需要创建三个驱动程序函数并使用它们来调用一个中心函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:33:22.207

像这样创建你的按钮

```
JToolBarHelper::custom('button1', ... );
JToolBarHelper::custom('button2', ... );
JToolBarHelper::custom('button3', ... ); 
```

然后将函数附加到表单

```
<form name='myform' onsubmit='callme()'>

</form> 
```

然后创建一个字段并根据按下的按钮设置其值。

```
<script>

function callme()
{
 var taskval  = document.getElementById('task');
  var form = document.forms['myForm'];
  var el = document.createElement("input");
   el.type = "hidden";
   el.name = "myHiddenField";

 if (taskval=='button1')
   {

   el.value = "myValue1";

   }
 else if ((taskval=='button2')
  {
        el.value = "myValue2";

  }
  else
  {
     el.value = "myValue3";

   }
 form.appendChild(el);  
  document.getElementById('task').value = "functionIWanToCall";

  return true;

}

</script> 
```

# ruby - Watir WebDriver 透明截图

> ID：12111176
> 
> 赞同：0
> 
> 时间：2012-08-24T14:18:31.227
> 
> 标签：ruby, webdriver, screenshot, watir, watir-webdriver

在 ruby​​ 中使用 watir WebDriver 来提取 firefox 实例并截取屏幕截图。尝试了各种无头解决方案，但它们不会使用 typekit 网络字体呈现。现在我有了这个工作，但我真的很想要一件事，透明背景！

```
browser = Watir::Browser.new :firefox
browser.goto "#{URL}"
browser.driver.save_screenshot "screenshots/#{font}.png"
browser.close 
```

谢谢，皮特

# asp.net-mvc-3 - IIS 应用程序试图访问远程文件系统

> ID：12111193
> 
> 赞同：1
> 
> 时间：2012-08-24T14:19:19.370
> 
> 标签：asp.net-mvc-3, iis-7.5, windows-server-2008-r2

类似：[IIS AppPoolIdentity 和文件系统写访问权限](https://stackoverflow.com/questions/5437723/iis-apppoolidentity-and-file-system-write-access-permissions)

我正在使用一个 MVC3 IIS 应用程序，用户应该能够上传图像（不是到数据库，而是到本地文件系统）并显示这些图像（类似于个人资料图片的系统）。

我遇到的问题是，在用户和应用程序之间有一个所谓的负载均衡器，这意味着我们的用户可以将他们称为 [Web 1]:192.168.0.1 和 [Web 2]:192.168.0.2。

所以很明显，如果我们要在 [Web 1] 的 LFS 上托管图像，为了让这个功能有用，[Web 2] 需要访问它。

到目前为止，我已经尝试了这些路径；

*   \\192.168.0.1\c$\etc...\images
*   \\[Web 1]\图像

为了进行测试，我在 \images\ 目录中添加了具有完全控制权的“所有人”，但是当我的应用程序无法对远程系统进行读写访问时。

补充笔记：

*   [Web 1] 和 [Web 2] 不在同一个域上，它们都是独立的
*   应用程序池中的 [Web 2] 用户是 [ApplicationPoolIdentity]

如果需要更多信息，请随时告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:25:04.483

为什么不将图像存储在 Web1 和 Web2 将访问的第三个服务器中？我在这里找到了一个有用的主题：[拒绝访问路径](https://stackoverflow.com/questions/4877741/access-to-the-path-is-denied)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T16:13:57.083

我在本地工作站上开发时遇到了这个问题。

在几次不成功`iisreset`的调用之后，我通过**重新启动**我的机器来纠正这种情况。

回想起来，打开的文件句柄可能会导致问题。

# c# - 在日历中添加待办事项列表或项目 - Outlook + SharePoint

> ID：12111196
> 
> 赞同：1
> 
> 时间：2012-08-24T14:19:39.507
> 
> 标签：c#, sharepoint, outlook

我有一个 WebPart，用于向我的员工添加新任务。每当添加了新任务时，我都想向他们发送邮件。我们可以选择 SPUtility.Sendmail(...)

我想将此任务添加到他们的 Outlook 日历或待办事项列表中。是否可以？它必须在 SharePoint 网站内完成。我已配置外发电子邮件。内部@domain.com。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:53:33.263

不是开箱即用。但是，我使用 EWS Managed Api (1.2) 为众多客户编写了此内容。通过它，您可以编写将更新用户日历的事件接收器或工作流。只需确保在配置 Exchange 服务器的安全设置时小心且彻底。

如果您对此有任何疑问，请告诉我。而不是推我自己的插头，但如果你想简单地从我公司购买这个功能/代码，我相信我们可以便宜地安排。

祝你好运！

# node.js - 使用 Node.js 登录到 symfony 1.4 应用程序

> ID：12111202
> 
> 赞同：0
> 
> 时间：2012-08-24T14:20:17.717
> 
> 标签：node.js, authentication, symfony1, symfony-1.4

我有一个 Symfony 1.4 框架上的应用程序。最近我开始在 Node.js 中构建一个应用程序。

我需要在节点中执行一些操作的响应，并且我想远程设置凭据（登录用户），因为某些数据取决于用户的数据，我不能省略它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:32:35.580

I am not sure I completely understood your scenario, but from I grasp you could share the session data (if this is the "user data" the nodejs app needs) between the two platforms (maybe use a common database to store sessions, like Redis) or you could implement a web service or api (REST) to enable communication between the two platforms, if the data is more complex. Hope my answer was helpful.

# android - 服务中的文本到语音

> ID：12111209
> 
> 赞同：0
> 
> 时间：2012-08-24T14:20:48.290
> 
> 标签：android

我有一个在设备启动时运行的服务。它检查一些数据并发送通知。我遇到了以下情况。

[http://mobile.tutsplus.com/tutorials/android/android-sdk-using-the-text-to-speech-engine/](http://mobile.tutsplus.com/tutorials/android/android-sdk-using-the-text-to-speech-engine/)

我想发送语音通知。我不需要它的 UI 部分。如何将它添加到我的项目中？

1.  不同的java类（从服务调用Activity）
2.  内部类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:46:12.113

在其中创建类`App`和实例`TextToSpeech`：

```
public class App extends Application {
    private static TextToSpeech mTts;

    public static TextToSpeech getmTts() {
        return mTts;
    }

    public void onCreate() {
        super.onCreate();

        // creating TTS:
        mTts = new TextToSpeech(this, this);
        mTts.setLanguage(Locale.US);
        mTts.stop();
    }
} 
```

在您的清单中声明`App`（上图）：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:name="your.application.package.App" > 
```

`broadcast`当您需要时通过您的服务发送一个`BroadcastReceiver`例如：

```
public class TTSReceiver extends BroadcastReceiver implements OnInitListener {

    private TextToSpeech mTts;
    private String message;

    @Override
    public void onReceive(Context context, Intent intent) {
        mTts = App.getmTts();
        mTts.setLanguage(Locale.US);
        message = "your message";
        mTts.stop();
        mTts.speak(message, TextToSpeech.QUEUE_FLUSH, null);
    }

    public void onInit(int status) {
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:27:36.153

```
public class SpeakService extends Service implements OnInitListener {

     public static TextToSpeech tts;
     private String string;

     @Override
     public IBinder onBind(Intent arg0) {
         return null;
     }

     @Override
     public void onCreate() {
         tts = new TextToSpeech(this, this);
         super.onCreate();
     }

     @Override
     public void onDestroy() {
         if (tts != null) {
             tts.stop();
             tts.shutdown();
         }
         super.onDestroy();
     }

     @Override
     public void onStart(Intent intent, int startId) {
       super.onStart(intent, startId);
       string = intent.getStringExtra("string");
     }

     @Override
     public void onInit(int status) {
       if (status == TextToSpeech.SUCCESS) {
         int result = tts.setLanguage(Locale.UK);
         if (result == TextToSpeech.LANG_MISSING_DATA
                || result == TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.d("SpeakService", "Language is not available.");
         } else {
            if (!TextUtils.isEmpty(string)) {
                speak(string);
            } else {

                speak("Error");
            }
         }
       } else {
        Log.d("SpeakService", "Could not initialize TextToSpeech.");
     }
     }

     private void speak(String string) {
        tts.speak(string, TextToSpeech.QUEUE_FLUSH, null);
     } 
```

# java - Java ArrayList 搜索和删除

> ID：12111210
> 
> 赞同：4
> 
> 时间：2012-08-24T14:20:50.330
> 
> 标签：java, arraylist

我正在尝试搜索数组列表以查找一个值（可能会再次出现）并删除该值的所有实例。我还想从单独的数组列表中删除位于同一位置的值。两个 ArrayList 都是`ArrayList<String>`.

例如，我正在寻找 ArrayList2 中的数字 5：

```
ArrayList 1       ArrayList2
cat               1
pig               2
dog               5
chicken           3
wolf              5 
```

在这两个位置找到数字 5 后，我想从 ArrayList1 中删除 dog 和 wolf。我的代码没有错误，但它似乎并没有真正删除我的要求。

```
//searching for
String s="5";
//for the size of the arraylist
for(int p=0; p<ArrayList2.size(); p++){
 //if the arraylist has th value of s
 if(ArrayList2.get(p).contains(s)){
   //get the one to remove
   String removethis=ArrayList2.get(p);
   String removetoo=ArrayList1.get(p);
   //remove them
   ArrayList2.remove(removethis);
   ArrayList1.remove(removetoo);
  }
} 
```

当我打印 arrayLists 时，它们看起来基本没有变化。有人看到我做错了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T14:27:46.613

当您同时从数组中循环和删除项目时，您编写的算法是不正确的，因为它会在每次删除后跳过下一个项目（由于您递增 p 的方式）。考虑这个替代方案：

```
int s = 5;
int idx = 0;

while (idx < ArrayList2.size())
{
   if(ArrayList2.get(idx) == s)
   {
     // Remove item
     ArrayList1.remove(idx);
     ArrayList2.remove(idx);
  }
  else
  {
    ++idx;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:24:43.863

如果要遍历集合并删除同一集合的元素，则必须使用[`Iterator`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)，例如：

```
List<String> names = ....
List<Integer> numbers = ....
int index = 0;
Iterator<String> i = names.iterator();
while (i.hasNext()) {
   String s = i.next(); // must be called before you can call i.remove()
   if (s.equals("dog"){
       i.remove();
       numbers.remove(index);
   }
   index++;
} 
```

**编辑**

在您的情况下，您必须手动增加一个变量才能从另一个列表中删除项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:31:48.553

您可以使用两个迭代器：

```
Iterator<String> i1 = arrayList1.iterator();
Iterator<Integer> i2 = arrayList2.iterator();
while (i1.hasNext() && i2.hasNext()) {
  i1.next();
  if (i2.next() == s) {
    i1.remove();
    i2.remove();
  }
} 
```

尽管正如已经指出的那样，使用地图可能会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:26:40.653

我认为 contains 方法比较了两个对象。但是，对象“s”与 ArrayList 中的对象不同。您应该使用类型化数组（即 ArrayList）并确保比较每个对象的值，而不是对象本身...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T14:27:39.093

您应该如下声明您的清单 -

```
List<String> list1 = new ArrayList<String>();
//...
List<Integer> list2 = new ArrayList<Integer>();
//... 
```

而不是`contains`方法使用`equals`方法。

还可以在迭代列表时删除`Iterator`，您可以获得如下 -

```
Iterator<String> it1 = list1.iterator();
Iterator<Integer> it2 = list2.iterator();

//... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T14:30:16.160

您可能想检查 ArrayList 的[indexOf()](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#indexOf%28java.lang.Object%29)方法，但在迭代列表元素时从列表中删除时必须小心。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T14:32:28.733

这是一个直接的解决方案：

```
List<Integer> origNums = new ArrayList<Integer>(nums);
Iterator<String> animalIter = animals.iterator();
Iterator<Integer> numIter = nums.iterator();

while (animalIter.hasNext()) {
    animalIter.next();

    // Represents a duplicate?
    if (Collections.frequency(origNums, numIter.next()) > 1) {

        // Remove current element from both lists.
        animalIter.remove();
        numIter.remove();
    }
}

System.out.println(animals); // [cat, pig, chicken]
System.out.println(nums);    // [1, 2, 3] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-24T14:49:09.363

我同意 Makoto 的观点，使用 Map 可能更有益。如果您将仅使用 ArrayList2 的值进行搜索，则一个键有多个值。例如，5 指的是狗和狼。为此，您可以将值列表添加到键 - 5。

```
HashMap aMap = HashMap();

ArrayList key5 = new ArrayList();

key5.add("dog");
key5.add("wolf");

aMap.put(5, key5); 
```

因此，当您需要删除 5 的所有值时，您可以

```
aMap.remove(5); 
```

它将删除包含 dog 和 wolf 的列表。

# xml - 我可以将 xml 文件链接到未保存在同一目录中的 xsl 文件吗？

> ID：12111212
> 
> 赞同：0
> 
> 时间：2012-08-24T14:20:52.380
> 
> 标签：xml, xslt

只是一个快速的问题。

在我见过的所有关于 xml/xslt 的教程中，xsl 文件总是保存在与 xml 文件相同的目录中。我的问题是；我可以有一个链接到保存在其他地方的 xsl 文件并通过 url 链接的 xml 文件吗？

我特别想做的是在 Dropbox 文件夹中保存一个 xml 文件和一个 xsl 文件，并将 xml 文件链接到带有 url 的 xsl 文件。

它看起来像这样；

xslt 文件将是通常的；

```
<?xml version= "1.0"?>
<xsl:stylesheet version= "1.0"
xmlns:xsl= "http://www.w3.org/1999/XSL/Transform"> 
```

和xml文件；

```
<?xml version= "1.0"?>
<?xsl-stylesheet type= "text/xsl" href= "http://dl.dropbox.co...ame_of_file.xsl"?> 
```

我已经尝试过了，但它似乎不起作用，但我不确定这是否与它在 Dropbox 文件夹中有关，或者两个文档是否绝对必须保存在同一目录中的同一文件夹中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:44:07.540

如果您希望客户端 XSLT 以这种方式工作，然后检查您尝试使用该方法的浏览器的错误控制台，它可能会告诉您不允许来自一个来源的 XML 文档从另一个来源加载样式表起源。如果不是这样，那么您需要告诉我们更多关于您如何尝试运行 XSLT 转换的详细信息。

# android - MediaStore 没有给我视频文件的大小、分辨率、持续时间和日期

> ID：12111213
> 
> 赞同：0
> 
> 时间：2012-08-24T14:20:52.683
> 
> 标签：android, mediastore, android-mediascanner

我正在尝试检索有关存储在 sdcard 中的用户视频的信息，我有这个方法：

```
protected void addVideo () {
    cursor = cr.query(MediaStore.Video.Media.EXTERNAL_CONTENT_URI,
            mediaColumns, null, null, null);

    if (cursor.moveToFirst()) {

        int i = 1;

        do {

            VideoItem newVVI = new VideoItem();
            int id = cursor.getInt(cursor
                    .getColumnIndex(MediaStore.Video.Media._ID));
            newVVI.idthumb = cursor.getString(cursor
                    .getColumnIndex(MediaStore.Video.Thumbnails._ID));
            Cursor thumbCursor = cr.query(
                    MediaStore.Video.Thumbnails.EXTERNAL_CONTENT_URI,
                    thumbColumns, MediaStore.Video.Thumbnails.VIDEO_ID
                            + "=" + id, null, null);
            if (thumbCursor.moveToFirst()) {
                newVVI.thumbPath = thumbCursor.getString(thumbCursor
                        .getColumnIndex(MediaStore.Video.Thumbnails.DATA));

            }
            newVVI.filePath = cursor.getString(cursor
                    .getColumnIndexOrThrow(MediaStore.Video.Media.DATA));
            newVVI.title = cursor.getString(cursor
                    .getColumnIndexOrThrow(MediaStore.Video.Media.TITLE));
            try {
                newVVI.date = cursor.getString(cursor
                        .getColumnIndexOrThrow(MediaStore.Video.Media.DATE_TAKEN));
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                newVVI.date = "0";
            }
            try {
                newVVI.duration = cursor.getString(cursor
                        .getColumnIndexOrThrow(MediaStore.Video.Media.DURATION));
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                newVVI.duration = "0";
            }
            try {
                newVVI.size = cursor.getString(cursor
                        .getColumnIndexOrThrow(MediaStore.Video.Media.SIZE));
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                newVVI.size = "0";
            }
            try {
                newVVI.resolution = cursor.getString(cursor
                        .getColumnIndexOrThrow(MediaStore.Video.Media.RESOLUTION));
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                newVVI.resolution = "0";
            }

            newVVI.mimeType = cursor
                    .getString(cursor
                            .getColumnIndexOrThrow(MediaStore.Video.Media.MIME_TYPE));

            newVVI.id = Integer.toString(i);
            ITEMS.add(newVVI);
            ITEM_MAP.put(newVVI.id, newVVI);
            i++;

        } while (cursor.moveToNext());

        cursor.close();

    } else {
        Log.d("TEST", ": else);
    }

} 
```

问题在于，对于 MediaStore.Video.Media.DATE_TAKEN、MediaStore.Video.Media.DURATION、MediaStore.Video.Media.SIZE 和 MediaStore.Video.Media.RESOLUTION，我总是得到“0”，因为对于这些，我总是抓住非法参数异常。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:14:29.883

The values are 0 because that is the default and they were never set to be anything else. The MediaStore does not automatically calculate these values when a video is copied to sdcard.

For duration you could try using [MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html#getDuration%28%29) to load the video and then call getDuration.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T08:30:10.167

此代码从一个特殊的音频返回信息。但它确实有效。您可以根据我的主要问题 whit while 语句更改它以获取所有音频或视频。您必须在我对 Mediastore.Video 的回复中更改 MediaStore.audio。

```
String name="";
String duration="";
String path="";
Log.d("Loading file: " + filepath,"");

        // This returns us content://media/external/videos/media (or something like that)
        // I pass in "external" because that's the MediaStore's name for the external
        // storage on my device (the other possibility is "internal")
Uri audiosUri = MediaStore.Audio.Media.getContentUri("external");

Log.d("audiosUri = " + audiosUri.toString(),"");

String[] projection = {MediaStore.Audio.AudioColumns.DATA,MediaStore.Audio.AudioColumns.DISPLAY_NAME,MediaStore.Audio.AudioColumns.DURATION};

// TODO This will break if we have no matching item in the MediaStore.
Cursor cursor = managedQuery(audiosUri, projection, MediaStore.Audio.AudioColumns.DATA + " LIKE ?", new String[] { filepath }, null);
cursor.moveToFirst();

path =cursor.getString( cursor.getColumnIndex(projection[0]));
name=cursor.getString( cursor.getColumnIndex(projection[1]));
int iduration = cursor.getColumnIndex(projection[2]);
duration=CalTotalTime(Integer.valueOf(iduration));
Log.d("pathhhhhhhhhhhhhhhhhh", path);
Log.d("nameeeeeeeeeeeeeeeeeeeeeee", name);
Log.d("duration", duration);

cursor.close(); 
```

也请参阅此链接： [通过 mediastore 从文件中获取您的信息](https://stackoverflow.com/questions/20127865/i-want-to-get-a-cursor-to-one-file-only-but-howsolved)

# c# - 通过 xaml 和表达式混合的按钮样式

> ID：12111214
> 
> 赞同：0
> 
> 时间：2012-08-24T14:20:53.283
> 
> 标签：c#, wpf, xaml, styles, blend

我创建了一个自定义控件，看起来很像 VS 2012 中的选项卡按钮。在我的控件中，我可以设置一个属性来垂直或水平放置文本和侧边栏。在玩弄了控件之后，我想可能有更好的方法来解决这个问题。因此，我启动了 Expression Blend 预览，令人惊讶的是（仅第二次或第三次使用 blend）能够创建一种样式来实现类似样式的按钮。但是，现在我想控制垂直或水平的文本和侧边栏。我还想控制鼠标在颜色上。这可以通过一种风格来完成，还是我必须创造一堆不同的风格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:33:09.880

[如果我理解正确，您可以使用事件触发器](http://msdn.microsoft.com/en-us/library/system.windows.eventtrigger.aspx)实现您想要做的事情。

# sql - 优化 SQL 查询

> ID：12111221
> 
> 赞同：-1
> 
> 时间：2012-08-24T14:21:19.307
> 
> 标签：sql, sql-server-2008, query-optimization

我有一个需要很长时间才能执行的查询。我试过在每张桌子上玩索引，但仍然需要很长时间。还有其他方法可以优化此查询吗？

```
SELECT tblDLM.Phone
FROM   (SELECT Table1.Phone,
               Count(Table_1.T1ID) AS CountOfT1ID
        FROM   Table_1
               INNER JOIN Table_2
                 ON Table_1.SubscriptionID = Table_2.SubscriptionID
        WHERE  ( ( Table_1.MsgType ) = 'coupon' )
               AND (( ( Table_1.Phone ) IN (SELECT DISTINCT Table_3.Phone
                                            FROM   Table_3
                                            WHERE  Table_3.DeliveryStatus <> 0
                                                   AND Table1.Phone = Table_3.Phone)
                      AND CampaignID <> Cast(@intCampaignIDTemp AS NVARCHAR(50)) ))
        GROUP  BY Table_1.Phone,
                  Table_2.MasterServiceID
        HAVING Table_2.MasterServiceID = 121) tblDLM
WHERE  CountOfT1ID >= 3 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:43:33.730

试试这个：

**编辑：**

你真的需要`GROUP BY Table_1.Phone, Table_2.MasterServiceID`吗？

```
DECLARE @nvarcharCampaignIDTemp NVARCHAR(50);
SET @nvarcharCampaignIDTemp = Cast(@intCampaignIDTemp AS NVARCHAR(50));

SELECT 
    Table1.Phone
FROM
    Table_1
    INNER JOIN Table_2
        ON Table_1.SubscriptionID = Table_2.SubscriptionID
    INNER JOIN Table_3
        ON Table1.Phone = Table_3.Phone
WHERE  
    Table_1.MsgType = 'coupon'
    AND Table_2.MasterServiceID = 121
    AND CampaignID <> @nvarcharCampaignIDTemp
    AND Table_3.DeliveryStatus <> 0
    AND Count(DISTINCT Table_1.T1ID) >= 3 
```

# javascript - 如何解析带引号的带引号的字符串

> ID：12111223
> 
> 赞同：2
> 
> 时间：2012-08-24T14:21:29.597
> 
> 标签：javascript, regex

如何获取sql查询（FORM func的第二个参数）

`=FORM("onname", "SELECT "lname", "fname", "year" from table")`

我试过：

```
.match(/^=FORM\("(.*)", *"((?:.|\n)*)"\)$/i) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:25:26.660

```
var s = '=FORM("onname", "SELECT "lname", "fname", "year" from table")';
var sql = s.match(/^=FORM\("[^"]+", "(.+)"\)$/i)[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:28:43.077

这是一个非常具体的问题解决方案：

`.replace(/=FORM\("[^"]+", "(.*)"\)/ig, "$1")`

[查看演示](http://jsfiddle.net/qTGN2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:39:15.950

看看它[在行动](http://regexr.com?31uer)：

```
^=FORM\(".*?",\s*"(.*)"\)$ 
```

抓住要使用的**第一个捕获组**。

# java - 如何退出启动 java 应用程序的 windows 命令提示符

> ID：12111225
> 
> 赞同：0
> 
> 时间：2012-08-24T14:21:33.263
> 
> 标签：java, console, cmd

显示错误消息后如何退出简单Java程序的控制台？

目前我的代码有：

```
...
...
if (some condition){
//print error
System.exit();
...
... 
```

但这`System.exit();`会使控制台保持打开状态。我也试过`exit(0);`了`System.exit(0);`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:23:42.280

`System.exit(1);`

应该可以正常工作。请注意，如果您因错误退出，通常会设置一个*非零*退出代码。从[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#exit%28int%29)：

> 该参数用作状态码；按照惯例，非零状态码表示异常终止。

这意味着您可以使用通用约定编写脚本，生成您的程序的任何进程都可以做出相应的反应等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:49:02.767

如果您想关闭正在运行您的应用程序的命令提示符窗口，那么我不相信有办法做到这一点（至少不是很好）。

为什么要从命令提示符启动应用程序，然后关闭预先存在的命令提示符窗口？这肯定会消除您正在输出的错误消息（除非它也被记录 - 在这种情况下，为什么要将它打印到您要关闭的窗口？）。

这是特定于 Windows 的，但是会在 Windows 资源管理器中创建一个快捷方式来`java -jar MyJarFile.jar`执行`java MyCompiledClass`您想要的操作吗？可以在[此处](http://www.cs.armstrong.edu/liang/radjb5/wwwCreateShortcutforJavaApplicationsonWindows.pdf)找到有关这种方法的说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T15:15:22.573

如果我理解正确，您想在命令提示符下运行程序，如果程序失败，您希望它显示错误消息，关闭程序和逗号提示窗口？

如果是这种情况，那么我唯一能想到的就是在检查程序退出状态的批处理文件中运行程序。所以在你的代码中写下你的错误信息，然后我建议睡眠几秒钟，这样用户就可以真正看到它，然后退出状态码 1.eg

```
if(SomeCondition){
  System.err.println("ERROR MESSAGE...");
  Thread.sleep(3000);//Sleep for 3 seconds... 
  System.exit(1);
} 
```

然后从检查“ERRORLEVEL”环境变量的批处理文件运行您的程序，例如

```
java <INSERT_PROGRAM_NAME>
IF %ERRORLEVEL% == 1 exit 
```

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:28:25.653

`java.lang.System`没有`exit`没有参数的方法，所以`System.exit();`会是编译错误。（`System.exit(1);`但是，会很好。）您的代码不起作用的原因可能是您没有重新编译它，因此您仍在运行添加该行之前的一些旧版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-22T06:41:24.473

假设您正在尝试从 java 安装 firefox .bat 文件

```
public static void main(String[] args) throws InterruptedException {
    try {
        String[] command = { "cmd.exe", "/C", "Start", "C:\\firefox.bat" };
        Runtime.getRuntime().exec(command).waitFor();
    } 
    catch (Exception e) 
    {
        System.out.println("Execution error");
    }
} 
```

这将触发命令提示符并打开窗口，直到您在安装 firefox 后手动关闭它。

解决方法是在您的 .bat 文件中，在您的命令之后只需放置一个“ **exit** ”例如：

您的 firefox.bat 将包含

@Start /wait "Firefox" "C:\Firefox Setup 41.0.exe" -ms

出口

这将关闭您的命令提示符窗口。希望这可以帮助...

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-24T14:25:10.863

看看下面的链接

[http://www.cs.bris.ac.uk/jot/decisions/exercise11/exit.html](http://www.cs.bris.ac.uk/jot/decisions/exercise11/exit.html)

*程序必须返回退出代码的一般约定。退出代码应为零表示成功，非零表示失败。平台对不同的非零代码的含义有所不同，因此程序员通常只返回 1 作为失败的一般指示。*

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-24T14:27:25.720

System.exit(); 终止 JVM。int 是状态码（0 表示“正常”退出）。如果它没有退出，那是因为您的代码的那部分无法访问并且根本没有被执行。

[Java API - System.exit()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#exit%28int%29)

# jpanel - 重叠的面板

> ID：12111226
> 
> 赞同：1
> 
> 时间：2012-08-24T14:21:38.350
> 
> 标签：jpanel, mouseevent

我们正在使用swing在java中创建一个交互式图形模型。我们的模型表示为节点（形状对象）和链接（箭头线）。我们在 jpanels 上绘制形状（带有侦听器），然后在 JFrame 上渲染它们。我们意识到，当面板重叠时，它们不会响应点击事件。点击只是切换它们，但我们的处理程序不响应点击事件。

但是，当它们不重叠时，它们会响应。

# iphone - 在 xcode 4.2 中安装 phonegap

> ID：12111228
> 
> 赞同：0
> 
> 时间：2012-08-24T14:21:56.927
> 
> 标签：iphone, ios, xcode, ipad, cordova

我想为 iPhone/iPad 创建 phonegap 应用程序。我检查了他们的网站，但它说它只支持 xcode 4.3。我认为会有一种方法可以在 xcode 4.2 中安装较低版本的 phonegap，例如 1.5 或其他版本。但是我在他们的网站上找到了任何适当的文档（对于 xcode 4.2）。谁能帮我解决这个问题。

我无法更新到 xcode 4.2，因为我正在使用雪飞跃，我不想更新到 lion。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T04:36:09.303

[这个问题](https://stackoverflow.com/questions/13329871/is-it-possible-to-use-phonegap-2-2-0-with-xcode-4-2-1/17668069#17668069)的重复。

您可以修复编译错误。我在[这里](http://programming.mvergel.com/2013/07/xcode-42-and-phonegap-cordova-and.html)记录了这个过程。它适用于基本应用程序，不确定您是否添加更复杂的代码。

# ruby-on-rails - RoR 的 flash 功能不起作用

> ID：12111230
> 
> 赞同：0
> 
> 时间：2012-08-24T14:22:00.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在登录表单中，当用户单击登录按钮进行登录时，登录表单通过会话资源调用创建操作。

这是动作：

```
 def create
   user = User.find_by_email(params[:session][:email].downcase)
   if user && user.authenticate(params[:session][:password])
     #Sign the user in and redirect to user's main page
   else
    flash[:error] = "Invalid email/password combination"
    render 'new'
  end
 end 
```

虽然 flash[:error] 不起作用。

我尝试在静态页面控制器中放置一个'flash [：notice]'，以便在主页被重定向到时闪烁通知，尽管这也不起作用。

我的测试服给了我这个错误

```
Failure/Error: it { should have_selector('div.alert.alert-error', text: 'Invalid') }
   expected css "div.alert.alert-error" with text "Invalid" to return something 
```

这是我的css的问题吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:25:57.000

您可能必须使用 flash.now[:error]，因为您是在之后渲染视图。

```
flash.now[:error] = "Invalid email/password combination" 
```

[http://apidock.com/rails/ActionDispatch/Flash/FlashHash/now](http://apidock.com/rails/ActionDispatch/Flash/FlashHash/now)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:37:43.197

您是否添加了代码以在布局或视图模板中显示 Flash？

看起来您可能正在使用 Bootstrap，因此您可以在布局文件（`views/layouts/application.html.erb`或其他布局）中执行类似的操作：

```
<% flash.each do |key, message| %>
  <div id="flash-<%= key %>" class="alert alert-<%= key %> fade in">
    <button class="close" data-dismiss="alert">&times;</button>
    <%= message %>
  </div>
<% end %> 
```

# c - mpi 中的 MPI_Probe 和 MPI_Get_count 有什么区别

> ID：12111232
> 
> 赞同：0
> 
> 时间：2012-08-24T14:22:07.177
> 
> 标签：c, mpi

我发现 MPI_Probe 用于查找消息大小，而 MPI_Get_count 用于查找消息长度。消息长度和消息大小有什么区别？不是都一样吗？此外，MPI_Send 或 MPI_Recv 中的 count 参数表示什么？这是否意味着从进程 x 向进程 y 发送/接收相同消息的次数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:04:13.203

While`MPI_Probe`可用于查找您必须用来`MPI_Get_count`获取该大小的消息的大小。 `MPI_Probe`返回一个`status`数据结构，它提供有关消息的信息，包括消息来源、标签和大小。但是要获得该大小，您`MPI_Get_count`可以将状态作为参数调用。

我不确定您从哪里得到“消息大小”和“消息长度”这两个术语，或者您如何得出它们不同的想法。对我来说，消息大小只是`count`其中一种 MPI 数据类型的实例数（通常称为 ）；因此一条消息可能携带 6 个 MPI_Integer，另一条消息可能携带 1024 个 MPI_Real，依此类推。

当用作 in`MPI_Send`或`MPI_Recv`中的参数时`count`，是消息中数据类型的实例数——该数据类型在两个过程中都是 . 之后的下一个参数`count`。

# linux - 如何修改 linux 内核以在启动时挂载 vhd 文件并从中加载系统？

> ID：12111233
> 
> 赞同：1
> 
> 时间：2012-08-24T14:22:07.710
> 
> 标签：linux, kernel, boot, vhd

我想修改 linux 内核，以便它可以挂载 vhd 文件并从它开始......请给我一些想法！正如我们所知，linux内核在加载initrd.gz后会挂载硬盘分区......我希望它应该挂载一个vhd文件，而不是挂载linux分区，它应该挂载一个位于硬盘中某个位置的vhd文件，其中包含安装的ubuntu并从中启动系统. Windows 7 支持从 vhd 启动的这一功能，但 ubuntu 不支持..所以 yi 询问我们如何为此目的修改内核。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:52:41.863

这一点都不容易。

要开始加载 Linux，需要使用引导加载程序。该程序定位 vmlinux 或 vmlinuz 文件和 initrd 文件并将它们加载到 RAM 中。

我假设您的 VHD 文件存储在 NTFS 文件系统上。VHD 文件中包含 vmlinuz 和 initrd 文件。

所以首先，引导加载程序需要了解 NTFS。接下来，引导加载程序需要了解 VHD。

只有在那之后，Linux 才能开始加载。

到那时，事情就变得容易了，因为 Linux 有您可以使用的 NTFS 文件系统驱动程序。可能是 NTFS-3G 用户空间驱动程序与 FUSE 相结合。我不确定 VHD 格式，但您可以使用 VirtualBox 中的 vdfuse 来安装它。

NTFS 和 VHD 挂载程序必须进入 initrd。然后 initrd 可以从 VHD 挂载根分区并进入正常的 Linux 用户空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:49:29.900

如果您正在尝试启动 Ubuntu Linux，这就是我所做的：

1.  在windows中下载[vboot-v1 install，或者google for grub2解决方案](http://grub4dos-ireneuszp.googlecode.com/files/vboot-v1.zip)
2.  安装 Virtualbox
3.  使用 Virtualbox 安装 Ubuntu，选择 vhd 类型的磁盘
4.  在 Ubuntu 中安装 virtualbox-fuse
5.  在 ubuntu 中，将此文件添加到文件系统：

**/etc/initramfs-tools/hooks/vdfuse**

```
 #!/bin/sh
 set -e
 PREREQ=""
 prereqs()
 {
    echo "${PREREQ}"
 }
 case "${1}" in
    prereqs)
            prereqs
            exit 0
            ;;
 esac
 . /usr/share/initramfs-tools/hook-functions
 if [ -x /usr/ ]
 then
    copy_exec /usr/bin/vdfuse /bin
 fi 
```

**/etc/initramfs-tools/sc~ts/init-bottom/vhdhost**

```
 #!/bin/sh
 PREREQ=""
 # Output pre-requisites
 prereqs()
 {
    echo "$PREREQ"
 }
 case "$1" in
      prereqs)
           prereqs
           exit 0
           ;;
 esac
 mount -n -o move /vhdhost ${rootmnt}/vhdhost
 exit 0 
```

**/etc/initramfs-tools/scripts/init-top/vdfuse**

```
 #!/bin/sh
 PREREQS=""
 prereqs()
 {
    echo $PREREQS
 }

 case $1 in
 # get pre-requisites
 prereqs)
    prereqs
    exit 0
    ;;
 esac

 mkdir /vhdhost
 mount /dev/sda2 /vhdhost/ -t ntfs-3g
 mkdir /dev/vhdhost
 vdfuse -f /vhdhost/$vloop /dev/vhdhost

 exit 0 
```

跑`update-initramfs -k all -c`

现在，您只需修改引导加载程序以加载您的 vhd 文件，例如，将其添加到**grub.cfg**：

```
 menuentry "VHD Ubuntu 12.10 64-bit" {
    insmod vhd
    vhd vhd0 (hd0,2)/vhd/Ubuntu.vhd --partitions
    linux (vhd0,1)/boot/vmlinuz-3.5.0-23-generic root=/dev/vhdhost/Partition1 vloop=/vhd/Ubuntu.vhd quiet splash
    initrd (vhd0,1)/boot/initrd.img-3.5.0-23-generic
 } 
```

# paypal - paypal 间接支付 api - 客户要求服务，我们的服务器计算成本并从客户借记卡中扣除金额

> ID：12111234
> 
> 赞同：0
> 
> 时间：2012-08-24T14:22:08.247
> 
> 标签：paypal

以下是应用程序的流程顺序：
1\. 客户将发送短信到我们的服务器，其中包含有关订阅服务的信息。
2\. 我们的服务器会提取帐户详细信息，例如帐号、密码。从短信并将其转发到贝宝服务器。转发协议可以是https或paypal目前使用的任何协议。
3\. Paypal 应该发回成功/失败通知。
paypal中是否存在这样的api服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:14:18.647

产品的可用性取决于您的业务所在的位置，但是可以，PayPal 可以使用 DoDirectPayment API 通过“Website Payments Pro”执行此操作。

请注意，您需要记录卡的详细信息，这会提高您的 PCI 合规级别。

# javascript - 设置 Cufon 文本宽度

> ID：12111236
> 
> 赞同：0
> 
> 时间：2012-08-24T14:22:12.070
> 
> 标签：javascript, width, cufon

我有这个 cufon 生成的中文标题，当文本太长时不能扩展到多行。简单地说，它不能做自动换行。我试图限制父容器的宽度（一个 h2）。但这似乎并不适用。还有什么我可以尝试的吗？

安吉拉

# jquery - jQuery使用多个选择框过滤列表

> ID：12111239
> 
> 赞同：1
> 
> 时间：2012-08-24T14:22:22.920
> 
> 标签：jquery, list, filter

我需要能够使用多个选择框在客户端归档一个长列表。

我已经使用一个选择框成功地做到了这一点。

```
<select id="company">
  <option selected="true" >ALL</option>
  <option>GM</option>
  <option>Honda</option>
  <option>Ford</option>
</select>

<select id="company2">
  <option selected="true" >ALL</option>
  <option>Buick [GM]</option>
  <option>Honda</option>
  <option>Ford</option>
</select>

<ul id="names" multiple="multiple" size="8">
  <li>Chevy [GM]</li>
  <li>Buick [GM]</li>
  <li>Civic [Honda]</li>
  <li>Accord [Honda]</li>
  <li>Focus [Ford]</li>
</ul> 
```

还有剧本

```
 var names = $('#names li').clone();

$('#company').change(function() {
  var val = $(this).val();  
  $('#names').empty();
  names.filter(function(idx, el) {
    return val === 'ALL' || $(el).text().indexOf( val ) >= 0;
}).appendTo('#names');

  $('#company2').change(function() {
    var val = $(this).val();  
    $('#names').empty();
    names.filter(function(idx, el) {
    return val === 'ALL' || $(el).text().indexOf(val) >= 0;
  }).appendTo('#names');
  });
}); 
```

这几乎可行，我可以在第一个选择框中选择 GM，列表将更`<li>`改为

*   雪佛兰 [GM]
*   别克 [通用]

`Buick [GM]`如果我然后使用第二个选择框选择`<li>`将更改为仅显示

*   别克 [通用]

这就是我想要的。但是我发现如果第二个框选择本田它将显示

*   思域 [本田]
*   雅阁[本田]

我的问题是如何将两者链接在一起，以便同时使用通用和本田？

没有任何过滤器的列表是：

*   雪佛兰 [GM]
*   别克 [通用]
*   别克 [通用]
*   别克 [通用]
*   思域 [本田]
*   雅阁[本田]
*   焦点[福特]

当我们从第一个过滤器中选择 GM 时，它会显示

*   雪佛兰 [GM]
*   别克 [通用]
*   别克 [通用]
*   别克 [通用]

因此，如果我们从第二个过滤器中选择“别克 [GM]”，列表现在将显示

*   别克 [通用]
*   别克 [通用]
*   别克 [通用]

这是正确的，但第二个过滤器设置为福特列表将显示

*   焦点[福特]

所以过滤器不能协同工作​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ ​​​​​​​​​​​​​​​​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:35:42.630

`select`您应该为这两个元素组合事件处理程序：

```
var $names = $('#names'),
    $namesAll = $names.find('li'),
    $company1 = $('#company'),
    $company2 = $('#company2');

$company1.add( $company2 ).change(function() {

    var val1 = $company1.val(),
        val2 = $company2.val();

    $names.empty();

    if ( val1 == 'ALL' && val2 == 'ALL' ) {
        $names.append( $namesAll );
    }
    else {
        $namesAll.filter(function(i, el) {
            var $el = $(el);
            return ~$el.text().indexOf( val1 ) || ~$el.text().indexOf( val2 );
        }).appendTo( $names );
    }
});​ 
```

这是小提琴：http: [//jsfiddle.net/EfEYQ/](http://jsfiddle.net/EfEYQ/)

* * *

上述解决方案有效，但我建议您不要过多地弄乱 DOM。相反，您应该在 CSS 中有一个类，然后只需在要显示`hidden`的 s 上切换该类：`li`

```
var  $names = $('#names li'),
     $company1 = $('#company'),
     $company2 = $('#company2');

$company1.add( $company2 ).change(function() {

    var val1 = $company1.val(),
        val2 = $company2.val();

    if ( val1 == 'ALL' && val2 == 'ALL' ) {
        $names.removeClass('hidden');
    }
    else {
        $names.addClass('hidden').filter(function(i, el) {
            var $el = $(el);
            return ~$el.text().indexOf( val1 ) || ~$el.text().indexOf( val2 );
        }).removeClass('hidden');
    }
});​ 
```

这是小提琴：http: [//jsfiddle.net/89qbV/](http://jsfiddle.net/89qbV/)

* * *

在评论中进一步澄清后，我认为这可能是您正在寻找的：

```
var  $names = $('#names li'),
     $company1 = $('#company'),
     $company2 = $('#company2');

$company1.add( $company2 ).change(function() {

    var val1 = $company1.val(),
        val2 = $company2.val();

    if ( val1 == 'ALL' && val2 == 'ALL' ) {
        $names.removeClass('hidden');
    }
    else {
        $names.addClass('hidden').filter(function(i, el) {

            var $el = $(el),
                include = true;

            if ( val1 != 'ALL' && !~$el.text().indexOf( val1 ) ) include = false;
            if ( val2 != 'ALL' && !~$el.text().indexOf( val2 ) ) include = false;

            return include;

        }).removeClass('hidden');
    }
});​ 
```

这是小提琴：http: [//jsfiddle.net/WfNav/](http://jsfiddle.net/WfNav/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:53:57.710

我使用您以前的代码处理了这个问题，但我不确定'ALL's 的行为，所以我只有第一个选择元素优先（如果第一个是全部，则显示全部）。如果你愿意，你可以添加到 filterNames() || val2 === '全部'

另外，在您的代码中，我注意到第二个选择元素上的更改事件在第一个元素更改之前不会被挂钩。于是就有了。

希望这可以帮助！

```
var names = $('#names li').clone();

$('#company').change(function() {
    var val = $(this).val();
    var val2 = $('#company2').val();
    filterNames(val, val2);
});

$('#company2').change(function() {
    var val = $('#company').val();
    var val2 = $(this).val();
    filterNames(val, val2);
});

function filterNames(val, val2) {
    $('#names').empty();
    names.filter(function(idx, el) {
        return val === 'ALL' || $(el).text().indexOf( val ) >= 0 || $(el).text().indexOf( val2 ) >= 0;
    }).appendTo('#names');
} 
```

# amazon-ec2 - 在 AWS EC2 实例上创建 HTML 快照以进行 Google 渲染

> ID：12111243
> 
> 赞同：1
> 
> 时间：2012-08-24T14:22:34.267
> 
> 标签：amazon-ec2, amazon-web-services, rendering, google-crawlers

如何在服务器端创建 HTML 快照，以将其提供给 Google 进行渲染（爬行），我必须在无头服务器 AWS EC2 实例上执行此操作。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:14:21.283

这是它的答案：

```
 String Xport = System.getProperty("lmportal.xvfb.id", ":99");
final File firefoxPath = new File(System.getProperty("lmportal.deploy.firefox.path", "/opt/firefox/firefox"));
FirefoxBinary firefoxBinary = new FirefoxBinary(firefoxPath);
firefoxBinary.setEnvironmentProperty("DISPLAY", Xport);

FirefoxDriver driver = new FirefoxDriver(firefoxBinary,null);

driver.get(url);

Thread.sleep(1500);
res.setContentType("text/html;charset=UTF-8");
PrintWriter out = res.getWriter();
String str = driver.getPageSource();
out.println(str);

out.close();
driver.quit(); 
```

并在您的 ec2 实例上安装 xvfb 和 firefox，这很重要.....

# jquery - qtip2 - 显示时的无限跳跃效果

> ID：12111244
> 
> 赞同：0
> 
> 时间：2012-08-24T14:22:37.963
> 
> 标签：jquery, qtip2

您好，我使用 qtip2 没有任何问题，我想通过经典的跳跃效果将用户的注意力集中在一些注意事项上。

这不是关于如何通过转换显示 qtip，而是关于在显示时跳跃 qtip。

我在 API 中找到了[位置效果方法](http://craigsworks.com/projects/qtip2/docs/position/#effect)，但我不知道如何使用它来实现无限循环的跳跃效果。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:32:34.800

虽然不是无限的，我目前正在使用下面的反弹效果。

```
$('#yourID').qtip({
content: {
    text: 'Your alert information!'
},
position: {
    my: 'bottom center',
    at: 'top left'
},
show: {
    ready: true
},
hide: 'unfocus',                
events: {
    show: function (event, api) {
        $(this).show("bounce", { times: 5, distance: 50 }, 1000);                           
    }
},
style: {
    classes: 'ui-tooltip-shadow ui-tooltip-red'
}
}); 
```

# java - 返回具有特定字符数的多行字符串

> ID：12111245
> 
> 赞同：0
> 
> 时间：2012-08-24T14:22:40.477
> 
> 标签：java, web-services, soap

我有一个很长的字符串，我想以以下格式输出：

我需要输出最大数量的字符，例如每行 40 个，而我最多保持 5 行并丢弃其余的。这应该是 Web 服务 (SOAP) 的返回字符串。

这是我试图实现的一个片段。

```
String output = "A veeery long string with more than 200 characters";

StringBuilder sb = new StringBuilder(output);
int i = 0;
while ((i = sb.indexOf(" ", i + 40)) != -1)
{
    sb.replace(i, i + 1, "\n");
}
System.out.println(sb.toString());

result = sb.toString();
...

return result; 
```

现在`System.out.println(sb.toString());`工作正常，但是当我使用 webservice 测试器时，它在浏览器上返回 1 行，这不是我想要实现的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:38:44.757

您还可以将 Guava 库用于这些类型的操作。看看[拆分器](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)

另外，请尝试事先在网站上搜索，因为有很多这样的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:33:54.590

我认为你需要这样做......

```
result = result + sb.toString(); 
```

当你这样做时，你`result = sb.toString();`将 result 指向一个新的 String 对象，并且它失去了对前一个 String 对象的引用。

使用`result = result + sb.toString();`你**仍然指向一个新的字符串对象**，但是这次新的字符串对象具有以前的和当前的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T15:11:00.140

如果您在浏览器中查看页面的源代码，是否会拆分行？如果是这样，您将需要用`<br>`标签替换换行符。

# python - Python - 组合两个 json 对象

> ID：12111247
> 
> 赞同：3
> 
> 时间：2012-08-24T14:22:43.450
> 
> 标签：python, json

我正在尝试按照[此处](https://stackoverflow.com/questions/1096554/combining-two-json-objects-in-to-one)显示的问题中的答案进行操作，但是在组合我的两个 json 对象时仍然遇到了一些麻烦。

我有两个从网络调用返回的 JSON 对象，我将它们存储在名为:`likes_data`和`comments_data`. 这些中的每一个当前都是空的 JSON 对象（仅在我的测试用例中），当打印到屏幕上时显示：`{"data":[]}`.

现在我想将这两个（有时是空的）JSON 对象组合成一个对象并将其打印到屏幕上，但我遇到了一些麻烦，因为最终组合的对象中总是有转义引号。

编码：

```
data = { 'likes' : likes_data, 'comments' : comments_data }
self.response.out.write(json.dumps(data)) 
```

结果是：

```
{
  "likes": "{\"data\":[]}", 
  "comments": "{\"data\":[]}"
} 
```

由于转义引号，这显然是格式不正确的 JSON 响应。

有没有合适的方法在 Python 中组合两个 JSON 对象？对于简单的情况，我可以手动取消转义这些，但我希望能够管理更复杂的“数据”对象。

有人有建议吗？

干杯，布雷特

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T14:26:09.853

```
likes = json.loads(likes_data)
comments = json.loads(comments_data)
data = {'likes': likes['data'], 'comments': comments['data']}
self.response.out.write(json.dumps(data)) 
```

像这样？

# powershell - 读取 CSV 值数字字段

> ID：12111249
> 
> 赞同：-1
> 
> 时间：2012-08-24T14:22:59.033
> 
> 标签：powershell

只要“代码”字段中包含字符，以下代码就可以工作。任何人都可以阐明什么是错误的，以及我如何让它显示只有数字的“代码”值？

```
 $lookup = "c:\products.csv"
    $value = "036"
    $csv = Import-Csv $lookup -Header("code","description")
    $csv | Where-Object {$_.code -eq $value} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:34:54.450

这将导入 c:\products.csv 文件并为其分配两列

```
$csv = Import-Csv c:\products.csv -Header Code,Description 
```

要使用 -as 运算符仅显示代码编号值（整数）：

```
$csv | Where-Object { $_.Code -as [int] } 
```

# crystal-reports - 比较字符串字段和数字字段的水晶公式

> ID：12111251
> 
> 赞同：0
> 
> 时间：2012-08-24T14:23:11.123
> 
> 标签：crystal-reports, report, formula

我正在尝试比较两个最多包含 2 位字段的字段。一个公式字段是 {string}，另一个要比较的是 {number} 字段。但是当字符串字段显示例如“08”并且数字字段显示“8”时，我遇到了一个问题，那么它将显示 1 表示存在差异，但实际上没有区别。如果字符串字段显示 14 和数字字段显示 14 完美运行，但 1-9 之间的任何内容都会显示差异，而实际上没有差异。
这是我到目前为止所尝试的。

```
If {number.field} = 0 
Then StringVar AdjustValue:= " " 
Else StringVar AdjustValue:= totext ({number.field},0,"")
;
if {@stringfield} = StringVar AdjustValue then 0 else 1 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:30:36.943

相反，将字符串转换为数字，这样您就不必担心前导零。

```
if tonumber({@stringfield})={number.field} then 0 else 1 
```

顺便提一下：您要重新声明 AdjustValue 变量三次。在同一公式中的初始变量声明之后，无需通过“StringVar”引用它。

编辑：由于您在使用顶级公式时遇到问题，您也可以尝试将 AdjustValue 变量填充到两个空格的替代方法：

```
stringvar AdjustValue;
If {number.field} = 0 
Then AdjustValue:= " " 
Else AdjustValue:= totext ({number.field},"00") //add padding
;
if {@stringfield} = StringVar AdjustValue then 0 else 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:54:37.037

使用将返回布尔值的公式字段保持简单：

```
// {@compare}
ToNumber({@string})={number.field} 
```

参考`{@compare}`你需要的地方。

# c++ - 静态方法 C++

> ID：12111253
> 
> 赞同：0
> 
> 时间：2012-08-24T14:23:23.340
> 
> 标签：c++, arrays, class, pointers, methods

我是 C++ 新手，我有一个基本问题要问你。我认为它必须是基本的...... :)。

这是我希望工作的代码，但它没有。

```
char* deneme = Tool::getStringIntoArray("Hello"); 
```

我想通过将字符串传递给“工具”类中的静态函数来获取字符数组。

这是我的工具标题：

```
#include <string>
using namespace std;

#ifndef TOOL_H_
#define TOOL_H_

class Tool
{
public:
    static char* getStringIntoArray(string);
};

#endif 
```

我了解到，使用该函数的唯一方法是在此处提供一个“静态”关键字。

最后，该函数的 Tool.cpp：

```
#include "Tool.h"

char* getStringIntoArray(string str)
{
    int* size = new int(str.size());
    char* array;
    array = new char[*size];

    for ( int i = 0; i < *size; i++) {
        array[i] = str[i];
    }

    delete size;
    return array;
} 
```

尽管如此，它在我给出的第一个代码的源文件中工作，但是当我将此函数放入一个类中以供静态使用时，它不起作用。错误如下所示：

```
undefined reference to `Tool::getStringIntoArray(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)' 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:24:51.343

应该是`char* Tool::getStringIntoArray(string str)`。

您的版本只定义了一个自由函数，而不是类中的函数。

此外，您应该传递`string`by const 引用：

```
char* Tool::getStringIntoArray(const std::string& str) 
```

还

```
using namespace std; 
```

是不好的做法（在标题中更是如此）。请改用类型限定符 ( `std::`)。

**还**

```
int* size = new int(str.size());
char* array;
array = new char[*size]; 
```

不好。只需创建一个`int`-

```
int size = str.size(); 
array = new char[size] 
```

你不需要一个指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:25:07.100

你需要限定类名，你忘了：

```
char* Tool::getStringIntoArray(string str)
{

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:25:50.353

> 对 `Tool::getStringIntoArray(std::basic_string, std::allocator >)' 的未定义引用

它正在寻找，`Tool::getStringIntoArray`但您定义了`getStringIntoArray`.

将定义中的签名从

```
char* getStringIntoArray(string str) 
```

至

```
char* Tool::getStringIntoArray(string str) 
```

# javascript - 简单的 javascript 击键计数

> ID：12111262
> 
> 赞同：1
> 
> 时间：2012-08-24T14:23:56.513
> 
> 标签：javascript, jquery, count, keystroke, onkeydown

我正在开发一项在线研究/调查，我需要计算参与者的击键次数。我要求他们在文本字段中输入 lrlrlrlrlrlrl... 以模拟步行。事实证明，许多参与者（正如在任务上花费的时间所证明的那样）正在复制和粘贴。

我需要一些可以计算击键次数的东西，这样我就可以识别出按要求完成任务的参与者。这项研究是在 Coldfusion 中编程的，我正在考虑某种 javascript/onkeydown/隐藏文件字段组合，但我并不是真正的程序员。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:35:01.907

[http://jsfiddle.net/kBJGM/](http://jsfiddle.net/kBJGM/)

HTML：

```
<input type="text" class="nopaste"/>
<input type="text" id="countstroke"/>
<span id="count"></span>​ 
```

Javascript：

```
var strokeCount = 0;

$(function(){

    $(".nopaste").bind("copy paste", function(e){
        e.preventDefault();
    });

    $("#countstroke").keyup(function(){
        $("#count").text("Count: " + (++strokeCount));
    });
});​ 
```

如果你想更进一步，你可以强制只注册 L 和 R 键（[http://jsfiddle.net/kBJGM/5/](http://jsfiddle.net/kBJGM/5/)）：

```
$("#restrictivecount").keypress(function(e){
    var seq = rstrokeCount % 2;
    var allow = true;
    switch(e.keyCode){
        case 76:
        case 108: // L or l
            if (seq == 1) allow = false;
        break;
        case 82:
        case 114: // R or r
            if (seq == 0) allow = false;
        break;               
        default:
            allow = false;
        break;               
    }

    if (allow)
        $("#rcount").text("Count: " + (++rstrokeCount));
    else
        e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:30:27.227

```
var keyPressCount = 0;

$(document).on("keydown",function(){
   keyPressCount++;
}); 
```

看看这个[小提琴](http://jsfiddle.net/9um23/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-24T14:38:48.317

```
count=0;

$(document).bind('keydown', function(event){
    var keyCode = event.keyCode;
    switch(keyCode){
        case 39:
            alert('Right arrow was pressed');
            count++;
            break;
        case 37:
            alert('Left arrow was pressed');
            count++;
            break;
    }
}); 
```

您必须拥有 jQuery 库才能完成这项工作。

# javascript - 使用 Javascript 的 Facebook 游戏帖子

> ID：12111263
> 
> 赞同：2
> 
> 时间：2012-08-24T14:23:58.177
> 
> 标签：javascript, jquery, facebook

我知道如何使用 Javascript 从 Facebook 应用程序在用户墙上发布常规帖子，但我想知道如何使用左侧的小图像制作游戏应用程序帖子。我附上了我正在谈论的图像。

[预览 http://www.tonygroth.com/game_app_img.png](http://www.tonygroth.com/game_app_img.png)

# php - PHP将数组转换为资源

> ID：12111264
> 
> 赞同：7
> 
> 时间：2012-08-24T14:24:06.560
> 
> 标签：php, arrays, object, resources

对于视觉表示，为了简单起见，当然也为了满足我的好奇心，我想知道如何将 PHP 数组转换为有效的 PHP 资源。

请参阅以下示例：（ ![在此处输入图像描述](../Images/a3372c0341e88de850fe249c22ce990e.png) 使用 dBug 组件创建的示例图像可在[http://dbug.ospinto.com/ 获得](http://dbug.ospinto.com/)）

我做了3个例子：

1.  资源：这是 MySQL 资源的典型表示，可视化为网格
2.  对象：从数组中手工创建的对象
3.  数组：手工制作的多维数组

如您所见，资源是一种视觉美感，而对象和数组是使用多维数组构造的，使用较差的数字数组索引将它们绑定在一起:(

我正在寻找的东西可能是这样的：

```
$resource_var = (resource) $array_var; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T14:28:31.357

> 我正在寻找的东西可能是这样的：
> 
> ```
> $resource_var = (resource) $array(var) 
> ```

你永远不会找到那个。资源是 PHP 中的一种内部数据类型。如果（且仅当）您自己编写一个 PHP 扩展并加载它，您可以执行以下操作：

```
$resource = array_resource_create($array); 
```

然后，您的 PHP 扩展将`mysql`在该函数中创建该资源（例如，扩展创建其特定的资源类型）`array_resource_create`。但是，这将毫无用处，因为到目前为止还没有其他功能可以处理该资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-02T16:06:41.580

您无法创建资源。但你可以使用原生的。

以 curl 为例。

```
function makeResourceFromArray($array) {

    $resource = curl_init();

    curl_setopt($resource, CURLOPT_PRIVATE, serialize($array));

    return $resource;
}

function makeArrayFromResource($resource) {
    return unserialize(curl_getinfo($resource, CURLINFO_PRIVATE));
}

$resource = makeResourceFromArray(['name' => 'test']);

$array = makeArrayFromResource($resource); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:32:06.033

您显示的输出与它本身无关`resource`，但是您正在使用的漂亮打印函数注意到您给它的变量指向数据库结果集，并获取并显示结果。

PHP 的意思`resource`是变量实际上并不保存 PHP 中的数据，而是一个指针或引用，可由一些较低级别的代码模块使用——在这种情况下，一个数据库库可以使用该引用来检索结果执行的查询。

如果您只是希望漂亮打印看起来与具有类似 DB-resultset 结构的数组相似，那么您应该简单地修改漂亮打印函数来做到这一点 - 您不需要对数组本身做任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-23T09:15:09.983

资源是一种特殊类型。**资源特定于外部源**。因此，倒退是不可能的。

从理论上讲，具有资源实例的接口将有助于管理类型 - 但这只是胡说八道的理论讨论，在 PHP 中是不可能的。

# java - 如何创建一个可以在 onDraw() 方法上绘制的对象？

> ID：12111265
> 
> 赞同：0
> 
> 时间：2012-08-24T14:24:06.507
> 
> 标签：java, android, android-canvas, ondraw

我正在尝试创建一个可以在我想在我的类的 onDraw() 函数上绘制东西时调用的对象。这是我的代码不起作用：

```
//object class
public class DrawObject extends Canvas {

Paint paint = new Paint();

public void setColor(int color){
    paint.setColor(color);
}
    // I want to draw an arrow to instead of a line 
public void drawArrow(float startPointX, float startPointY, float endPointX, float endPointY){
    drawLine(startPointX, startPointY, endPointX, endPointY, paint);
    // draw the rest of the arrow here
}
} 
```

对于主要课程：

```
public class Screen extends ImageView{

Paint paint = new Paint();

public Screen(Context context){
    super(context);

    paint.setColor(Color.BLACK);
    paint.setStyle(Style.STROKE);
}

public void onDraw(DrawObject drawObject){
    //called DrawObject instead on Canvas

    drawObject.drawArrow(10,10,100,100);
            // I want to draw the arrow here but it is not working.
} 
```

有人可以告诉我正确的方法是什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:50:05.540

我实际上会按照以下方式做一些事情：

为可绘制对象定义一个接口（为了避免与 Android`Drawable`类混淆，我称之为`Paintable`）

```
public interface Paintable {
    public void paint(Canvas canvas) {}
} 
```

制作您需要以自定义方式绘制的任何类，例如您建议的箭头，实现`Paintable`接口，并在那里覆盖`paint(Canvas canvas)`和处理您的绘图操作。

```
public class Arrow implements Paintable {
    //all sorts of cool shit here to define your arrow

    @Override
    public void paint(Canvas canvas) {
        //draw your arrow on the canvas here
    }
} 
```

`Paintable`在您的 custom 中维护一个对象列表`ImageView`，并简单地`paint()`为列表中的每个对象调用方法。是的多态性！

```
public class Screen extends ImageView {
    List<Paintable> paintableObjects;

    public Screen(Context context) {
        super(context);
        paint.setColor(Color.BLACK);
        paint.setStyle(Style.STROKE);
        paintableObjects = new ArrayList<Paintable>();
    }

    public void addPaintable(Paintable p) {
        paintableObjects.add(p);
    }

    public void onDraw(Canvas canvas) {
        for(Paintable p : paintableObjects) {
            p.paint(canvas);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:29:58.710

扩展`Canvas`是错误的方法，因为您获得了必须使用的系统提供的画布。您不能强制 Android 使用您的`Canvas`. 相反，您可以`Canvas`在需要时将其简单地传递给您的班级。

```
public class DrawObject {

    Paint paint = new Paint();

    public void setColor(int color) {
        paint.setColor(color);
    }

    // I want to draw an arrow to instead of a line
    public void drawArrow(Canvas canvas, float startPointX, float startPointY, float endPointX, float endPointY) {
        canvas.drawLine(startPointX, startPointY, endPointX, endPointY, paint);
        // draw the rest of the arrow here
    }
} 
```

并使用喜欢

```
public void onDraw(Canvas canvas){
    drawObject.drawArrow(canvas, 10,10,100,100);
            // I want to draw the arrow here but it is not working.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:29:49.507

我真的不明白扩展`Canvas`和定义你自己的对象的原因，除非你需要对它有一些特殊的控制。

通常，您通过对象扩展`View`并执行方法中的所有绘图工作，例如：`onDraw()``Canvas`

```
public void onDraw(Canvas canvas){

   canvas.drawLine(startPointX, startPointY, endPointX, endPointY, paint);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:31:22.773

这一点是错误的

```
public void onDraw(DrawObject drawObject){ ... } 
```

onDarw 是一个框架方法，因此当您更改方法签名时，将不会调用此方法。

没有必要对画布进行子类化——这不是正确的方法。

所以在你的 Screen 类中 - 覆盖标准的 onDraw 方法：

```
public void onDraw(Canvas c){ 
   drawLine(startPointX, startPointY, endPointX, endPointY, paint);
} 
```

以编程方式触发 onDraw 方法 - 在 Screen 对象上调用 invalidate()。

# cocoa - 一次生成许多文件的可可文档

> ID：12111270
> 
> 赞同：1
> 
> 时间：2012-08-24T14:24:24.403
> 
> 标签：cocoa, simulation, nsdocument

我对 Cocoa 中基于文档的项目有疑问。我已经搜索了一段时间，但没有找到任何与我的目标相似的东西。我想要做的是一个（计算密集型）模拟程序，它生成大量数据（可能以 GB 的顺序）并将它们存储到磁盘以供将来可视化（所以我不能一次写入/读取所有文件） .

我创建了一个基于文档的项目（我不知道这是否是要走的路...），其想法是将所有数据保存在一个包中的许多二进制文件中，因此用户可以将其视为单个文件。我已经尝试过该部分，并且能够使用 NSFileWrapper 保存文档。但是模拟文件是在模拟运行时生成的。问题来了。有一种方法可以强制用户保存文档并检索路径，以便我可以将所有生成的文件放在那里？或者最好将模拟文件保存在临时位置，然后定期保存文档，以便保存所有文件以备保存？或者我能做什么？我不清楚在这种情况下如何使用 nsdocument 架构，以及它是实现我目标的好方法。

该文档还有另外几个文件，其中包含模拟参数和初始状态，因此我可以稍后恢复模拟。

# netty - 使用 Netty 进行应用程序设计

> ID：12111271
> 
> 赞同：1
> 
> 时间：2012-08-24T14:24:25.587
> 
> 标签：netty

我正在寻找一些关于使用 Netty 实现测验服务器的理论建议。服务器的三个主要要求是：

*   服务器是权威的并控制测验的进展。例如，用户注册参加测验（如房间/大厅）。准备就绪后，服务器会继续处理问题，并在经过一段时间或每个人都回答后继续进行下一个问题。

*   用户有十秒钟的时间来回答问题。他们回答问题所花费的时间和剩余的时间对测验很重要。参与测验的用户在地理上是不同的（即通过 WAN 链接）。

*   它必须是可扩展的，例如一个测验可能有十个问题和三十个用户，而下一个可能有一百个问题和一万用户。

Netty 会是一个合适的解决方案吗？有没有关于Netty的好书？我在亚马逊上看不到任何 Kindle 书籍。谁能提供关于第二点的任何建议或示例（特别是考虑延迟/传输时间的时间关键型客户端/服务器示例）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:24:22.943

不幸的是，我不知道任何有关 netty 的书籍，但是在线文档以及 JavaDocs 和示例都非常好。这里有几个例子：

*   如果您想为数千个并发用户/连接提供服务，非阻塞 I/O 是您唯一的选择。Java（和操作系统）无法有效处理阻塞 I/O 所需的数千个线程。netty 可以，而无需创建那么多线程。

*   netty 与底层协议（TCP/IP 或 UDP）一样好。您无法解决网络延迟问题。例如，从美国向欧洲发送一个数据包大约需要 150 毫秒。

*   如果时间如此重要，您可能需要以某种方式同步时钟或使用中央时间源。看看[ntp](/questions/tagged/ntp "显示标记为“ntp”的问题")

*   您必须决定您的协议将如何与服务器交互：

    *   短请求/响应连接，每次用户想要上传问题或获得新的 one-think [http](/questions/tagged/http "显示标记为“http”的问题")时建立。这将非常慢，但非常可靠（您不必担心长期连接被中断

    *   为每个用户建立一个连接，持续整个测验。这将最大限度地减少延迟，但您必须手动处理断开的连接并重新连接。

    *   混合方法 - 选择带有选项的[http](/questions/tagged/http "显示标记为“http”的问题")协议`Keep-alive`

*   在 netty 中，避免复制字节数组（`ChannelBuffer`/`ByteBuf`非常擅长）并创建太多垃圾

*   避免阻塞 netty 工作线程中的 I/O 操作。监控使用了多少工作线程，避免网络事件排队。

# python - 在 `scons -c` 上执行自定义操作

> ID：12111273
> 
> 赞同：2
> 
> 时间：2012-08-24T14:24:29.723
> 
> 标签：python, makefile, scons

我制作了一个 SCons 构建器，它将`Makefile`文件作为源并调用它来生成“事物”。

（主要是其他库写的Makefile，所以不用选择用SCons代替）。

到目前为止，它运作良好，但现在我也想做这项`scons -c`工作。

我`MakefileCallBuilder`只有一个虚拟目标作为它的目标，所以`scons -c`不会真正清理任何东西。

有没有办法告诉 SCons 我想要`make clean`或被`make distclean`要求进行清洁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T09:28:25.743

由于这个确切的问题，我一直在拔头发。我终于创建了一个有点粗糙但有效的解决方案。这是 SConstruct 文件中进行清理的部分：

```
import subprocess

...

# Call make to clean
if env.GetOption('clean'):
    subprocess.call(['make', 'clean']) 
```

基本上，由于 Scons 不提供任何调用方式`make clean`，我通过 Python 的 subprocess.call() 来完成它。

# .net - 在应用程序启动时创建或打开文档

> ID：12111275
> 
> 赞同：0
> 
> 时间：2012-08-24T14:24:32.960
> 
> 标签：.net, wpf

我正在寻找有关如何在使用 MVVM 和 DI 的 WPF 应用程序启动期间实现逻辑以创建新/空文档或打开现有文档的一些指导。

澄清一下，我所说的行为是您在启动 Word 或 Excel 等 Office 应用程序时看到的常见行为。如果您直接启动应用程序（开始菜单、任务栏、桌面快捷方式等），则会为您创建一个新的空白文档或电子表格；但是，如果您双击现有的 .docx 或 .xlsx 文件，应用程序将启动并打开现有文档/电子表格，完全绕过新文档的创建。

对于我们的应用程序，在执行创建新的空文档或打开现有文档（作为命令行参数传递）的逻辑*之前，我们需要在没有打开任何文档的情况下显示应用程序窗口。*

目前我们使用的是配置在 中的 IoC 容器`int Main(string[])`，我们将主应用 ViewModel（没有活动文档）注入到主窗口的构造函数中，然后调用`app.Run(mainWindow);`.

我最初的尝试是将处理程序连接到`mainWindow.Loaded`事件并将新的/打开的文档逻辑放在那里（执行 ViewModel 公开的`New`or`Open`命令，与我们应用程序中的 New 和 Open 按钮连接的命令相同）菜单）。但是，`Loaded`事件在窗口显示之前触发，这是一个问题，因为可能正在打开旧格式的现有文档，我们需要向用户显示提示，询​​问他们是否希望我们升级他们的文件（类似于 Visual Studio 有一个以旧格式升级解决方案的向导，带有创建备份的选项）。这些提示必须显示为模态窗口，它们是主应用程序窗口的子窗口。

有关实施此类行为的最佳实践的任何建议？

**编辑**

在这个特定的实现中，潜在的问题是如何确定性地知道主窗口何时完全呈现并显示在屏幕上，然后执行一些代码。通过阅读关于 SO 和其他地方的其他问题，听起来没有官方/内置的方法可以做到这一点？我已经阅读了有关使用 Dispatcher 调用具有低优先级的委托的信息，以便在渲染完成之前不会发生，但这似乎是一种 hack，更不用说与线程上下文切换相关的性能问题了。

话虽如此，我对如何实现所需行为（在显示窗口*后创建新文档/打开现有文档）的其他建议持开放态度。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:00:10.400

只是记录下来给未来的人..

您确定在显示窗口之前已加载加载吗？

我刚刚创建了一个简单的测试应用程序，在 Window.Loaded 中显示了一个 MessageBox，它按以下顺序发生：

可见更改激活加载

在调用 Loaded 时，窗口对用户可见

来自 OP 的更新：

原来是窗户。我们使用的是 Actipro 的 RibbonWindow，而不是 WPF 的 System.Windows.Window，启动行为不同。只需将测试应用程序从 WPF 的 Window 切换到 Actipro 就可以让它像我们的应用程序一样运行。啊

# javascript - 单击时从子函数返回父函数

> ID：12111277
> 
> 赞同：1
> 
> 时间：2012-08-24T14:24:39.517
> 
> 标签：javascript, jquery

如何在单击时从子函数返回父函数？这是一个示例代码：

```
function returnFunction() {

    var output = false;

    $('a').click(function() {

       output = true;

    });

    return output;    

}

var result = returnFunction(); 
```

结果将始终为 false，因为在运行代码时未发生单击。我怎么能做到这一点呢？

我的意图是调用弹出对话框，并且我希望将所有逻辑都包含在一个可以轻松加载的函数中 - 包括确认对话框的单击事件。

在脚本的其他地方，我会这样称呼它，例如：

```
// Menu click triggers the dialog
$('a').click(function(e) {
    // The function displays the dialog and returns the click events of the dialog
    var result = returnFunction();
    // If result was false, we'll prevent the menu access, for example
    if (!result) {
        e.preventDefault();
    }
}); 
```

我知道 jQuery UI 对话框插件。但我现在想在没有它的情况下实现这一目标。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:33:22.967

An over-simplification of it is:

Everything stops (including scrolling and clicking on hyperlinks) while executing javascript. This means you cannot "pause" the script until someone clicks on a link.

The typical way of solving this is a callback function:

```
function my_callback(some, arguments) {
    // you can do whatever in here: an ajax load, set a global variable, change some of the page, ...
    console.log(some, arguments);
    alert(some + " " + arguments);
}

function returnFunction(callback, param) {
    var output = false;
    $('a').click(function() {
       callback(param, "world");
    });
}

returnFunction(my_callback, "hello"); 
```

demo at [http://jsfiddle.net/UnBj5/](http://jsfiddle.net/UnBj5/)

EDIT:

I did mention global variables because they are an option, but they are typically bad style. Try to use other means if possible.

If you want more help with it, provide more details of what you are trying to do.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:29:14.483

尝试改用参数。将参数发送到显示警报框的函数，根据参数显示不同的弹出警报，您尝试执行的操作将不起作用，因为它基本上是一个鸡蛋问题。

# ant - 我可以根据文件上次修改时间有条件地停止 Ant 脚本吗？

> ID：12111282
> 
> 赞同：2
> 
> 时间：2012-08-24T14:25:01.223
> 
> 标签：ant, conditional, last-modified, websphere-mq-fte

我一直在寻找整个互联网，但在任何地方都找不到答案。我有一个用 ANT 脚本编码的 MQFTE 作业，如果文件没有今天的日期，我在移动文件的过程中遇到了困难。我想做的是有条件的停止，比如在执行过程中**返回真**值，这样作业就不会经过进一步的例程，如果文件被识别为要跳过，就结束。

这在ANT中可能吗？还是必须遍历`<target>`脚本中的每一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:39:10.033

Ant[`fail`](http://ant.apache.org/manual/Tasks/fail.html)任务可用于有条件地停止 Ant 脚本。下面的示例将属性初始化为`TODAY`当前日期，然后使用[`fileset`](http://ant.apache.org/manual/Types/fileset.html)带有嵌套`<date>`元素的 a 来仅选择在今天日期之前修改的文件。然后，仅当在今天日期之前修改过的文件中至少有一个文件时，该[`pathconvert`](http://ant.apache.org/manual/Tasks/pathconvert.html)任务才设置该属性。如果没有要复制的文件，则使用该任务来停止 Ant 脚本。`files-not-empty``fileset``fail`

```
<target name="copy-if-not-modified-today">
  <property name="copy-from.dir" value="${basedir}" />
  <property name="copy-to.dir" value="${basedir}/build/copied_files" />
  <mkdir dir="${copy-to.dir}" />

  <tstamp>
    <format property="TODAY" pattern="MM/dd/yyyy" />
  </tstamp>

  <fileset id="files" dir="${copy-from.dir}" includes="*">
    <date datetime="${TODAY} 12:00 AM" when="before"/>
  </fileset>
  <pathconvert property="files-not-empty" setonempty="false" refid="files" />

  <!--
    Stop the Ant script if there are no files to copy that were modified prior
    to today's date.
  -->
  <fail unless="files-not-empty" />

  <copy todir="${copy-to.dir}" preservelastmodified="true">
    <fileset refid="files" />
  </copy>
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:35:12.653

也许[Ant-Contrib Tasks](http://ant-contrib.sourceforge.net/)可以帮助你。要根据条件执行任务，“If-then-else”是一种可能的解决方案—— [“Ant if”](http://ant-contrib.sourceforge.net/tasks/tasks/if.html)

# c# - 同步 WPF 动画问题

> ID：12111287
> 
> 赞同：0
> 
> 时间：2012-08-24T14:25:12.797
> 
> 标签：c#, .net, wpf

我不能同时同步位置和大小的 WPF 动画。

请查看我的代码，如果那里有问题，请告诉我。

谢谢！

```
 void AnimatePlugin(double fromTop, double toTop, double fromLeft, double toLeft,
            double fromH, double toH, double fromW, double toW, UIElement control)
        {
            Storyboard sb = new Storyboard();

            #region Top

            DoubleAnimation daTop = new DoubleAnimation();
            daTop.From = fromTop;
            daTop.To = toTop;
            daTop.Duration = new Duration(TimeSpan.FromSeconds(1));
            sb.Children.Add(daTop);
            Storyboard.SetTargetProperty(daTop, new PropertyPath("(Canvas.Top)"));
            Storyboard.SetTarget(daTop, control);
            #endregion

            #region Left

            DoubleAnimation daLeft = new DoubleAnimation();
            daLeft.From = fromLeft;
            daLeft.To = toLeft;
            daLeft.Duration = new Duration(TimeSpan.FromSeconds(1));
            sb.Children.Add(daLeft);
            Storyboard.SetTargetProperty(daLeft, new PropertyPath("(Canvas.Left)"));
            Storyboard.SetTarget(daLeft, control);
            #endregion

            #region Heigh

            DoubleAnimation daH = new DoubleAnimation();
            daH.From = fromH;
            daH.To = toH;
            daH.Duration = new Duration(TimeSpan.FromSeconds(1));
            sb.Children.Add(daH);
            Storyboard.SetTargetProperty(daH, new PropertyPath("(Canvas.Height)"));
            Storyboard.SetTarget(daH, control);
            #endregion

            #region Width

            DoubleAnimation daW = new DoubleAnimation();
            daW.From = fromW;
            daW.To = toW;
            daW.Duration = new Duration(TimeSpan.FromSeconds(1));
            sb.Children.Add(daW);
            Storyboard.SetTargetProperty(daW, new PropertyPath("(Canvas.Width)"));
            Storyboard.SetTarget(daW, control);
            #endregion

            sb.Completed += (w, r) => { control.UpdateLayout(); };
            sb.Begin();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:37:31.227

只有`Canvas.Left`and 和`Canvas.Top`是附加属性....（并且您使用括号正确指定它们）。

但是，“Width”和“Height”不是附加属性，它们是 FrameworkElement 的基本属性......只需使用`PropertyPath("Width")`和`PropertyPath("Height")`

您可以使用采用 DependencyProperty 类型的 PropertyPath 来代替使用字符串来指定属性的路径.....所以使用`PropertyPath(Canvas.TopProperty)`, `PropertyPath(Canvas.LeftProperty)`, `PropertyPath(Canvas.WidthProperty)`, `PropertyPath(Canvas.HeightProperty)`。

这样您就不必担心使用正确的`PropertyPath`字符串语法，这取决于是否附加了属性。

# jpa - JAXB 急切地获取标记为 FetchType.LAZY 的字段，即使 EntityManager 已被清除（）、关闭（）并设置为 null

> ID：12111288
> 
> 赞同：4
> 
> 时间：2012-08-24T14:25:17.260
> 
> 标签：jpa, jaxb, lazy-loading, eclipselink, moxy

我向 apt stackoverflow 社区鞠躬并谦虚地寻求指导（我在写这篇文章时低下头）

我有以下实体类/bean，它混合了 JPA/EclipseLink/JAXB/Moxy 注释：（顺便说一句，EventBase 只是一个包含附加字段的 @MappedSuperclass）

```
@Entity
@Table(name = "EVENTS")
@XmlRootElement
public class Event extends EventBase {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @XmlAttribute(name = "id")
    private long eventCID;

    @OneToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "APPLICATIONCID")
    private CustomerApplication customerApplication;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "CUSTOMERCID")
    private Customer customer;

    ....
} 
```

这是我编组该实体的代码（为简洁起见，排除了外部类）

```
public static void main(String args[]) {
    Event event = myInstance.populateEvent();
    myInstance.buildXMLFromEvent(event);
}

public Event populateEvent() {

    EntityManagerFactory emf = Persistence.createEntityManagerFactory(this.persistenceUnit);
    EntityManager em = null;

    Event event = null;
    try {
        em = emf.createEntityManager();
        event = (Event) em.createQuery("Select object(e) from Event e where e.eventCID = 55000").getSingleResult();
        em.clear();
        em.detach(event);
        em.close();
        em = null;
        emf.close();
        emf = null;
    } catch (Exception e) { // just test code so catching general exception
        log.error("Unexpected error: " + e);
    } finally {
        if (em != null) {
            em.clear();
            em.close();
        }
    }
    return event;
}

private void buildXMLFromEvent(Event event) {

    System.out.println("Marshalling now:");
    JAXBContext jc;
    try {
        jc = JAXBContext.newInstance(Event.class);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.valueOf(true));
        JAXBElement<Event> jaxbElement = new JAXBElement<Event>(new QName("event"), Event.class, event);
        marshaller.marshal(jaxbElement, System.out);
    } catch (JAXBException e) {
    }
} 
```

生成的 xml 实际上会急切地获取我的 Event 实体 bean 的所有成员对象！即）客户、客户应用程序和我为简洁起见排除的任何其他映射。我使用 EclipseLink 作为我的 JPA 提供程序和用于 JAXB 的 Moxy。我在这里做错了什么？您可以看到，entityManager 和 entityManagerFactory 实例不仅被清除、关闭并设置为 null，而且我还继续分离了根 Event 实体。此外，fetchtype 已明确设置为 LAZY！

当 Event 对象被分离时，JAXB 是如何急切地获取的？我认为关闭 entityManager 本身会分离所有托管对象？是否有一些 JAXB 挂起的缓存会话上下文？如果是这样，为什么它甚至不遵守明确定义的获取策略？提前谢谢了！

乌斯塔德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:09:23.130

如果 eclipselink 处于独立模式，则只有 ManyToMany 和 OneToMany 关系实际上使用延迟加载，其他 fetch 属性被忽略并等于 EAGER。

这是[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Basic_Mappings/Lazy_Basics的文档](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Basic_Mappings/Lazy_Basics)

> 一对一：默认情况下，EclipseLink JPA 忽略 fetch 属性，并应用默认 javax.persistence.FetchType.EAGER。
> 
> 多对一：当 fetch 属性设置为 javax.persistence.FetchType.LAZY 时，EclipseLink JPA 执行延迟加载。
> 
> 基本：默认情况下，EclipseLink JPA 忽略 fetch 属性并应用默认 javax.persistence.FetchType.EAGER。

这就是为什么您的实体加载了关系。

希望能帮助到你。

# spring - 我不想通过控制器映射我所有的 xhtml 页面

> ID：12111291
> 
> 赞同：0
> 
> 时间：2012-08-24T14:25:26.277
> 
> 标签：spring, spring-mvc, spring-security

但我想使用 Spring 安全性。我想我必须`DispatcherServlet`在 web.xml 中使用及其配置

我正在开发一个既不是 jsp 也不是 jsf 项目的应用程序，我将通过服务器通信建立基于 javascript/ajax/jquery 的所有连接。

因此我不想将我的 xhtml 页面映射到控制器。

但是我有一个控制器，`@RequestMapping(/auth/login)`我只希望它在我请求 /auth/login 时运行，这不是问题，它运行良好。

但是当我使用

spring org.springframework.web.servlet.DispatcherServlet contextConfigLocation 类路径：META-INF/spring-servlet.xml 1

春天/嘿那里/*

并调用`http://localhost:8080/app/myhtml.xhtml`它告诉我我没有此 uri 的映射。

我不想映射，也不想控制器运行，只想看到页面。

但是 DispatcherServlet 需要映射它，我如何告诉 DispatcherServlet 不要映射普通的 xhtml 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:30:17.243

**选项1：**

在您的 spring web mvc 应用程序上下文 XML 中，您应该放置以下内容：

```
<mvc:view-controller path="/myhtml.xhtml"/> 
```

缺点是您必须每页执行此操作。

**选项 2：**

使用资源处理程序：

```
<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources -->
<mvc:resources location="/, classpath:/META-INF/web-resources/" mapping="/static/**"/> 
```

您的页面将像`http://localhost:8080/app/static/myhtml.xhtml`.

更多信息可以在[Spring 的 Doc](http://static.springsource.org/spring/docs/3.0.5.RELEASE/spring-framework-reference/html/mvc.html#mvc-static-resources)中找到。

# javascript - 如何使用 JavaScript 或 jQuery 将纯文本站点捕获到变量中？

> ID：12111295
> 
> 赞同：0
> 
> 时间：2012-08-24T14:25:34.933
> 
> 标签：javascript, jquery

我需要将网站的所有内容保存在一个变量中，以便搜索特定的字符串。

这是内容外观的示例，它实际上是一个纯文本日志。

```
======================================================================
BEGIN_TEXT

APPLEYARD IAN 23761347 BA 2 Airport Data:
Code = JFK
Name = JFK/John F Kennedy International
City = New York
State = NY
Airport Data:
Code = LCY
Name = Lcy/London City Airport            '
City = London
State = England
sysTime:XXXXXXXXX0000 year:2012 month:7 day:16 hour:7 min:10 pm,END_TEXT

======================================================================

----(1341920977.93286)
                           2012/07/10 12:03:22.582
MAP UNAVAIL-AIRPORT CHECK IN ONLY *
>

======================================================================

----(1341920977.93286)
                           2012/07/10 12:03:23.202
I

======================================================================

----(1341920977.93286)
                           2012/07/10 12:03:23.337
IGND 
>

======================================================================

----(1341920977.93286)
                           2012/07/10 12:03:23.337
9V/BA2R16AUGJFKLCY

====================================================================== 
```

这是我最初的想法：

```
var content = document.body.textContent; //But there is no body!
var pos = content.search("UNAVAIL-AIRPORT"); // Just an example to search for 
```

所以我的问题是：

1.  我如何捕获该内容？
2.  获得字符串的位置后，如何滚动并突出显示匹配项？我基本上想重新创建 CTRL + F 函数。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:12:01.343

当您在浏览器中将文本文件加载为网页时，您的浏览器会在文本周围创建一个基本的 HTML 脚手架：

```
<html>
    <head></head>
    <body>
        <pre>[your entire text document here]</pre>
    </body>
</html> 
```

如果您查看页面的源代码，这不会显示，但如果您访问页面（例如使用 Firebug 或 Chrome 开发工具），它是可见的。

操作和设置文本样式的一种简单方法是抓取块`innerHTML`的 并在其中`<pre>`添加标签：

```
function highlightText(regexStr) {
    var preTag = document.getElementsByTagName("pre")[0];
    preTag.innerHTML = preTag.innerHTML
                         .replace(new RegExp("("+regexStr+")", "g"),
                                  "<span style='background-color:orange;'>$1</span>");
}

highlighText("some regex phrase to highlight"); 
```

在 中添加您喜欢的任何样式`<span>`以实现所需的突出显示效果。

请注意，您传入的字符串`highlightText`在正则表达式中使用，因此您应该在将字符串传递给函数之前转义特殊的正则表达式字符，例如`$`and `^`（或让函数清理自己的输入）。这已在[如何将变量传递给正则表达式 JavaScript？](https://stackoverflow.com/questions/494035/how-do-you-pass-a-variable-to-a-regular-expression-javascript/494122#494122)：

```
str.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:30:38.070

```
变量内容 = '';

    $.get('ajax/test.html', function(data) {
        内容=数据；
    });

```

2-) $(content).find() 您正在搜索的内容并添加一个类以突出显示

# sql-server-2005 - SQL 减去过夜时间（仅返回分钟） 摆脱负时间？

> ID：12111296
> 
> 赞同：0
> 
> 时间：2012-08-24T14:25:36.560
> 
> 标签：sql-server-2005, time, case-statement

我有一堆开始和结束时间：

```
 Start       End         Delta
    20:47:22    22:47:02    120
    22:49:12    0:48:47    -1321
    0:50:42     2:50:22     120
    ...
    23:11:07    2:10:44    -1261 
```

我使用的代码如下（因为时间是一个varchar）

```
 CONVERT(VARCHAR(8), DATEDIFF(minute, max(max_time), min(min_time)) ,114) 
  as delta_time, 
```

但正如你所看到的，因为是一夜之间，所以结果是否定的。关于获得 119 分钟和 179 分钟的正确结果的任何想法（在上面的示例中）。

我想过使用 case 语句来检查 delta 何时为负数。如果是负数，则在结束时间上加上 24 小时，然后尝试减法。

```
 CASE WHEN DATEDIFF(minute, max(max_time), min(min_time)) < 0 THEN  
 DATEADD(minute, 1440, min(min_time)) 
 ELSE 0 END AS deltatest 
```

但是这段代码不起作用，因为 SQL Server 只是将时间更改为：1900-01-02 00:48:47.000（第二天，不是我想要的 24:48:47）。有什么想法吗？有什么方法可以将转换添加到 CASE 语句？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:36:43.760

您总是可以将 1440 添加到所有计算的增量中，然后取值 mod 1440：

```
SELECT (120 + 1440) % 1440, (-1321 + 1440) % 1440 
```

结果：

```
----------- -----------
120         119 
```

# sql - 使用 oledb 参数更新 access 数据库中的多行

> ID：12111306
> 
> 赞同：0
> 
> 时间：2012-08-24T14:25:59.907
> 
> 标签：sql, vb.net, oledb

我正在尝试使用参数更新访问数据库中的多行。我已经必须编写代码才能插入数据库，但我需要相同类型的代码来更新数据库。我的更新字符串如下所示`Update tblitem set instock='value' where itemcode='value2'` 这是我要插入的代码：

```
strSQL = "insert into tbltrans2 (transid,itemcode,itemname,qty,price,[total],btw) values ( ?,?,?,?,?,?,?)"
Using cn As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Application.StartupPath + "\\POS.mdb"), _
    cmd As New OleDbCommand(strSQL, cn)

    cmd.Parameters.Add("?", OleDbType.VarChar).Value = txtTransId.Text
    cmd.Parameters.Add("?", OleDbType.VarChar, 10)
    cmd.Parameters.Add("?", OleDbType.VarChar, 50)
    cmd.Parameters.Add("?", OleDbType.Integer)
    cmd.Parameters.Add("?", OleDbType.Decimal)
    cmd.Parameters.Add("?", OleDbType.Decimal)
    cmd.Parameters.Add("?", OleDbType.VarChar, 50)

    cn.Open()
    For Each ls As ListViewItem In ListItems.Items
        cmd.Parameters(1).Value = ls.Tag
        cmd.Parameters(2).Value = ls.SubItems(0).Text
        cmd.Parameters(3).Value = Integer.Parse(ls.SubItems(1).Text)
        cmd.Parameters(4).Value = Decimal.Parse(ls.SubItems(2).Text)
        cmd.Parameters(5).Value = Decimal.Parse(ls.SubItems(3).Text)
        cmd.Parameters(6).Value = ls.SubItems(5).Text
        cmd.ExecuteNonQuery()
    Next ls
End Using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:48:44.337

在最基本的层面上，您应该能够修改您的 sql 字符串以指示参数占位符 (?)，就像您在插入查询中所做的那样，例如

`Update tblitem set instock=? where itemcode=?`

除此之外的概念，例如创建/设置参数，基本上是相同的。希望我能正确理解您的问题。祝你好运。

# ios - Kal日历演练

> ID：12111309
> 
> 赞同：5
> 
> 时间：2012-08-24T14:26:07.893
> 
> 标签：ios, ios5, automatic-ref-counting, uistoryboard, kal

我是 obj c 的新手，我不了解如何使用 Kal 日历。有人愿意帮助新的应用程序开发人员完成整个过程吗？我已将它安装到我的应用程序中，但不知道如何使用它。我明白如果你不回应，我找不到任何关于它的教程，谷歌只提供了一点帮助。

我正在使用 ios5、storyboards 和 arc。提前致谢。

我不得不用故事板子类化日历，这是最好的方法吗？我无法以任何其他方式使用导航栏显示它。

更新-我不认为子类是要走的路，但我仍在研究解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T14:33:52.477

我创建了一个视图控制器来包含日历视图控制器（KalViewController）。该视图控制器是 KalViewControllerDelegate 和数据源。我使用 iOS 5 中引入的容器将 KalViewController 添加为子视图控制器。我将 KalViewController 的父视图控制器添加到弹出框控制器（在 iPad 应用程序上）。我从我想要的地方展示它（UIBarButtonItem）。父视图控制器的工作是为日历视图提供日期，并向表格视图提供数据。

编辑：这是你需要做的：

在

```
- (void)presentingDatesFrom:(NSDate *)fromDate to:(NSDate *)toDate delegate:(id<KalDataSourceCallbacks>)delegate 
```

您需要找到您的日期（网络、数据库等）。获取包含日期的信息后，调用 [delegate loadedDataSource:self];

```
- (NSArray *)markedDatesFrom:(NSDate *)fromDate to:(NSDate *)toDate 
```

这是为了显示日历上标记的日期（带有小点的日期以标记特定日期的事件）。在这里，您使用模型中的日期来查找将在日历上显示一个月的日期。

```
- (void)loadItemsFromDate:(NSDate *)fromDate toDate:(NSDate *)toDate 
```

当用户选择一个月中的某一天时，这将被调用。这应该用于更新 tableview 数据源上显示的对象列表。因此，如果您保留一个包含日历表日期的数组，请使用给定日期的数据更新该数组。

最后：

```
- (void)removeAllItems 
```

清除您的 tableview 数据源数组。

您还必须实现日历的 tableview 数据源和委托方法。

# sql - 无法按外部顺序引用子查询列

> ID：12111316
> 
> 赞同：0
> 
> 时间：2012-08-24T14:26:28.193
> 
> 标签：sql, sql-server, sql-order-by, subquery

以下`ORDER BY`子句导致错误。如何在`ORDER BY`子句中引用 TotalPrice 列：

```
SELECT * FROM
(

SELECT O.OrderID,
       (SELECT SUM(SubTotal) FROM DB_OrderDetails OD WHERE OD.OrderID = O.OrderID) AS TotalPrice,
       ROW_NUMBER() OVER (ORDER BY TotalPrice) AS RowNum

    FROM DB_Orders O

) Orders 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:35:03.083

你不能在同一个子查询中通过它的名字来引用它，你可以在外部查询中这样做：

```
SELECT orders.*, 
       ROW_NUMBER() OVER (ORDER BY TotalPrice) AS RowNum FROM
(
    SELECT O.OrderID,
       (SELECT SUM(SubTotal) FROM DB_OrderDetails OD 
        WHERE OD.OrderID = O.OrderID) AS TotalPrice
    FROM DB_Orders O
) Orders 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:47:39.167

这个怎么样：

```
select 
    o.orderID,
    sum(od.SubTotal) as TotalPrice,
    row_number() over (order by sum(od.SubTotal)) as RowNum
from DB_Orders o
join DB_OrderDetails od
    on o.OrderID = od.OrderID
group by o.OrderID 
```

这是示例：[SQL Fiddle](http://www.sqlfiddle.com/#!3/945a9/2)

# c - linux中“times”系统调用的返回值是多少

> ID：12111317
> 
> 赞同：0
> 
> 时间：2012-08-24T14:26:31.487
> 
> 标签：c, api, gcc, time, clock

我有一个遗留函数（如下所示）来查找滴答计数，这意味着系统运行了多少时间。

```
    长 findtick()
    {
        结构 tms buf;
        clock_t 滴答计数 = 0;
        滴答计数 = 次（&buf）；
        返回（长）tickcount；
    }

```

我无法找到`times`系统调用和`clock_t`结构类型的行为。

我的疑问是

1.  `times`linux中系统调用的行为和返回值是什么。
2.  结构定义是什么`clock_t`
3.  这个函数会在几秒钟内返回 tickcount 吗？
4.  这个函数有可能返回-1，因为它的返回类型是`signed long`

我`gcc`在 suse 10 中使用编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:03:48.273

1.  linux中times系统调用的行为和返回值是什么？

    答：[次](http://www.kernel.org/doc/man-pages/online/pages/man2/times.2.html)

2.  clock_t的结构定义是什么

    Ans :`typedef clock_t long`在 ctime.h 中定义

3.  这个函数会在几秒钟内返回 tickcount 吗？

    答：是的

4.  这个函数有任何机会返回`-1`，因为它的返回类型是有符号长的

    Ans : 在失败的情况下，`times`将返回`-1`

谢谢@cnicutar

# json - 当 JSON *需要*带有破折号“-”等字符的属性时，如何将匿名类型序列化为 JSON

> ID：12111321
> 
> 赞同：2
> 
> 时间：2012-08-24T14:26:41.987
> 
> 标签：json, asp.net-mvc-3, serialization

我正在构建一个使用 Open Flash Chart 2 的应用程序。此图表是一个 Flash 对象，它接受具有特定结构的 JSON。

```
"elements": [
{
    "type": "bar_stack",
    "colours": [
        "#F19899",
        "#A6CEE3"
    ],
    "alpha": 1,
    "on-show": {
        "type": "grow-up",
        "cascade": 1,
        "delay": 0
    },
    ... 
```

我正在使用一个简单的匿名类型来返回 JSON，如下所示：

```
return Json(new
{
    elements = new [] {
        new
        {
            type = "bar_stack",
            colours = colours.Take(variables.Count()),
            alpha = 1,
            on_show = new
            {
                type = "grow-up",
                cascade = 1,
                delay = 0
            },
            ...
        }
} 
```

问题是几个属性（如“on-show”）使用破折号，显然在 C# 代码中命名属性时我不能使用破折号。

有没有办法克服这个问题？最好不需要声明一大堆类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:54:13.050

您可以使用字典：

```
return Json(new {
    elements = new [] {
        new Dictionary<string, object> 
        { 
            { "type", "bar_stack" },
            { "colours", new [] { "#F19899", "#A6CEE3" } },
            { "alpha", 1 },
            { "on-show", new 
                         {
                             type = "grow-up",
                             cascade = 1,
                             delay = 0
                         } },
        } 
    }
}); 
```

（写在 SO 编辑器中；我可能犯了一些语法错误，但你明白了......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:05:42.517

克雷格的解决方案可能更好，但同时我实现了这个：

```
public class UnderscoreToDashAttribute : ActionFilterAttribute
{
    private readonly string[] _fixes;

    public UnderscoreToDashAttribute(params string[] fixes)
    {
        _fixes = fixes;
    }

    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        filterContext.HttpContext.Response.Filter = new ReplaceFilter(filterContext, s => _fixes.Aggregate(s, (current, fix) => current.Replace(fix, fix.Replace('_', '-'))));
    }

    public class ReplaceFilter : MemoryStream
    {
        private readonly Stream _stream;
        private readonly Func<string, string> _filter;

        public ReplaceFilter(ControllerContext filterContext, Func<string, string> filter)
        {
            _stream = filterContext.HttpContext.Response.Filter;
            _filter = filter;
        }

        public override void Write(byte[] buffer, int offset, int count)
        {
             // capture the data and convert to string 
            var data = new byte[count];
            Buffer.BlockCopy(buffer, offset, data, 0, count);

            var s = _filter(Encoding.Default.GetString(buffer));

            // write the data to stream 
            var outdata = Encoding.Default.GetBytes(s);
            _stream.Write(outdata, 0, outdata.GetLength(0));
        }
    }
} 
```

然后，如果你像这样装饰你的动作：

```
[UnderscoreToDash("on_show", "grid_colour")]
public JsonResult GetData() 
```

它进行适当的“修复”。

PS 当 Resharper 将您的代码更改为 Linq 时，那令人敬畏的时刻......

```
_fixes.Aggregate(s, (current, fix) => current.Replace(fix, fix.Replace('_', '-'))) 
```

# c++ - 类转换为类型

> ID：12111322
> 
> 赞同：1
> 
> 时间：2012-08-24T14:26:59.950
> 
> 标签：c++, types, casting

有人知道如何在 C++ 中为一个类实现强制转换规则吗？

假设我有一个具有双重类型成员的 Mark 类。我希望这个类可以加倍：

```
Mark m(9);
double d = (double)m; 
```

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:28:07.900

你可以`operator double()`在你的班级里面。例如

```
class Mark
{
     //...
public:
     operator double()
     {
         return the_member;
     }
 }; 
```

# glsl - GLSL 片段位置

> ID：12111325
> 
> 赞同：6
> 
> 时间：2012-08-24T14:27:09.987
> 
> 标签：glsl

对不起，我会重写这个问题，希望能清楚。

在我的 .cpp 代码中，我创建了一个四边形列表，其中一些有一个标志，在像素着色器中，我检查是否设置了这个标志，如果没有设置标志，例如，四边形会变成红色，如果设置了标志，我想决定每个像素的颜色，所以如果我需要将标记的四边形的一半涂成红色，另一半涂成蓝色，我可以简单地执行以下操作：

```
if coordinate in quad < something color = red
else colour = blue; 
```

通过这种方式，我可以将四边形的一半涂成蓝色，另一半涂成红色，或者我可以决定将红色放在哪里或蓝色放在哪里。

想象一下我有一个四边形 50x50 像素

[碎片]

```
if(quad.flag == 1)
  {    
    if(Pixel_coordinate.x<25 ) gl_fragColor = vec4(1.0, 0.0, 0.0, 1.0);
    else gl_fragColor = vec4(0.0, 1.0, 0.0, 1.0);
  }
else
  gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0); 
```

在这种情况下，我希望设置了标志的四边形将在每个面上获得两种颜色。我希望我现在已经更具体了。

谢谢。

只是添加一些我不能使用任何纹理的东西。

好的，我现在这样做：

每个四边形有 4 个纹理协调 (0,0), (0,1), (1,1), (1,0)；

我使用以下方法启用纹理坐标：

```
glTexCoordPointer(2, GL_SHORT, sizeof(Vertex), BUFFER_OFFSET(sizeof(float) * 7)); 
```

[垂直]

```
varying vec2 texCoord;

main()
{
    texCoord = gl_MultiTexCoord0.xy;
} 
```

[碎片]

```
varying vec2 texCoord;

main()
{
    float x1 = texCoord.s;
    float x2 = texCoord.t;

    gl_FragColor = vec4(x1, x2, 0.0, 1.0);
} 
```

我总是得到黄色，所以 x1 =1 和 x2 = 1 几乎总是和一些四边形是黄色/绿色。

我希望片段着色器中的纹理坐标发生变化，所以我应该得到一个渐变，我错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:58:58.343

If you want to know the coordinate *within* the quad, you need to calculate it yourself. In order to that, you'll need to create a new interpolant (call it something like `vec2 quadCoord`), and set it appropriately for each vertex, which means you'll likely also need to add it as an attribute and pass it through your vertex shader. eg:

```
// in the vertex shader
attribute vec2 quadCoordIn;
varying vec2 quadCoord;

main() {
    quadCoord = quadCoordIn;
              : 
```

You'll need to feed in this attribute in your drawing code when drawing your quads. For each quad, the vertexes will have likely have `quadCoordIn` values of (0,0), (0,1), (1,1) and (1,0) -- you could use some other coordinate system if you prefer, but this is the easiest.

Then, in your fragment program, you can access `quadCoord.xy` to determine where in the quad you are.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T18:11:52.957

除了*Chris Dodd*的回答之外，您还可以`?.5`通过特殊的片段着色器变量访问当前处理的片段的屏幕空间坐标（以像素为单位，尽管实际上是像素中心，因此）`gl_FragCoord`：

```
gl_FragColor = (gl_FragCoord.x<25.0) ? vec4(1.0, 0.0, 0.0, 1.0) : vec4(0.0, 1.0, 0.0, 1.0); 
```

但这为您提供了片段在屏幕空间中的位置，因此相对于视口的左下角。如果您确实需要知道单个四边形内部的位置（如果您想实际对每个四边形进行一半着色，这更有意义，因为“半切”会随着四边形的位置而变化），那么*Chris Dodd*的答案是正确的做法。

# ruby-on-rails - Rails 中的回形针迁移不会更改表格

> ID：12111326
> 
> 赞同：0
> 
> 时间：2012-08-24T14:27:10.627
> 
> 标签：ruby-on-rails, paperclip

根据文档，我运行以下行（并得到响应）为回形针创建迁移

```
[imageuploading!tme]$ rails g paperclip user avatar

create  db/migrate/20120824134503_add_attachment_avatar_to_users.rb
[imageuploading!tme]$ rake db:migrate
==  AddAttachmentAvatarToUsers: migrating =====================================
-- change_table(:users)
-> 0.0338s
==  AddAttachmentAvatarToUsers: migrated (0.0339s) ============================ 
```

迁移成功运行，但正如您所见，它在用户表中没有任何变化。

迁移代码的相关位是标准：

```
change_table :users do |t|
  t.has_attached_file :avatar
end 
```

回形针已成功安装为 gem

为什么 has_attached_file 助手（？）不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:37:12.193

为什么不更新现有的表迁移：

```
t.string  :avatar_file_name,               :limit => 100
t.string  :avatar_content_type,            :limit => 30
t.integer :avatar_file_size,               :default => 0
t.string  :avatar_fingerprint,             :limit => 50 
```

# c++ - 如何优化将此数据写入 postgres 数据库

> ID：12111327
> 
> 赞同：1
> 
> 时间：2012-08-24T14:27:14.013
> 
> 标签：c++, sql, database, postgresql, optimization

我正在解析扑克手牌历史，并将数据存储在 postgres 数据库中。这是一个快速的视图： ![在此处输入图像描述](../Images/a7590568494326cad35c49d441993adf.png)

我的性能相对较差，解析文件需要几个小时。我可以看到数据库部分占用了总程序时间的 97%。因此，只需进行一点优化就会使这更快。

我现在设置的方式如下：

1.  将下一个文件读入字符串。
2.  解析一个游戏并将其存储到对象 GameData 中。
3.  对于每个玩家，检查我们是否在 std::map 中有他的名字。如果是这样; 将 playerids 存储在一个数组中，然后转到 5。
4.  插入播放器，将其添加到 std::map，将 playerids 存储在数组中。
5.  使用 playerids 数组，插入本轮投注的移动，将 moveids 存储在数组中。
6.  使用 moveids 数组，插入一个movesequence，将movesequenceids 存储在一个数组中。
7.  如果这不是最后一轮比赛，请转到 5。
8.  使用 movesequenceids 数组插入游戏。
9.  如果这不是最后一场比赛，请转到 2。
10.  如果这不是最后一个文件，请转到 1。

因为我要为每一个动作、每一个动作序列、每场比赛发送查询，我显然做了太多的查询。我应该如何捆绑它们以获得最佳性能？我不介意重写一点代码，所以不要退缩。:)

提前致谢。

CX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T02:23:44.417

如果没有任何查询、模式或 Pg 版本，很难回答这个问题。

不过，总的来说，这些问题的答案是将工作分批成更大更粗的批次，以避免重复大量工作，最重要的是，通过在一个事务中完成所有工作。

您还没有说有关**transactions**的任何内容，所以我想知道您是否在自动提交模式下执行所有这些操作。糟糕的计划。尝试将整个过程包装在 a`BEGIN`和`COMMIT`. `COMMIT`如果它是每隔几分钟/几十场比赛/任何时间运行的非常长时间的过程，请编写一个检查点文件或数据库条目，您的程序可以使用该文件从该点恢复导入，并打开一个新事务以继续。

在向同一个表中插入多行的情况下，使用**多值插入**会有所帮助。例如：

```
INSERT INTO some_table(col1, col2, col3) VALUES
('a','b','c'),
('1','2','3'),
('bork','spam','eggs'); 
```

`synchronous_commit=off`您可以使用和 a提高提交率`commit_delay`，但如果您将工作批量处理成更大的事务，这不是很有用。

一个很好的选择是将新数据插入**`UNLOGGED`表**（PostgreSQL 9.1 或更高版本）或`TEMPORARY`表（所有版本，但在会话断开时丢失），然后在过程结束时将所有新行复制到主表中并删除具有以下命令的导入表：

```
INSERT INTO the_table
SELECT * FROM the_table_import; 
```

这样做时，[`CREATE TABLE ... LIKE`](http://www.postgresql.org/docs/current/static/sql-createtable.html)很有用。

另一种选择 - 实际上是上述更极端的版本 - 是在您阅读并转换它们时将**结果写入 CSV 平面文件****[`COPY`](http://www.postgresql.org/docs/current/static/sql-copy.html)**，然后将它们写入数据库。由于您使用 C++ 工作，我假设您正在使用`libpq`- 在这种情况下，您希望也使用[`libpqtypes`](http://pgfoundry.org/projects/libpqtypes/). [`libpq`提供对`COPY`api 的访问以进行批量加载](http://www.postgresql.org/docs/current/static/libpq-copy.html)，因此您的应用在生成 CSV 数据后无需调用`psql`来加载它。

# syntax-highlighting - C# 类型的 Visual Studio 2012 语法着色

> ID：12111328
> 
> 赞同：6
> 
> 时间：2012-08-24T14:27:25.280
> 
> 标签：syntax-highlighting, visual-studio-2012

> **可能重复：**
> [如何让用户类型 C# 语法突出显示在 VS 2012 RC 中再次工作？](https://stackoverflow.com/questions/10970305/how-can-i-get-user-type-c-sharp-syntax-highlighting-working-again-in-vs-2012-rc)

我在以前安装了 VS 2010 的系统上安装了 VS 2012。现在语法着色不会为 C# 中的类型名称（类、接口）着色。我在“工具”选项中找不到定义类型颜色的设置。

我在虚拟机上进行了另一个全新安装，它运行良好。

# jquery - 带有 Listview 项目的手风琴 Jquery Mobile

> ID：12111333
> 
> 赞同：0
> 
> 时间：2012-08-24T14:27:33.680
> 
> 标签：jquery, jquery-mobile

无论如何，在使用 jquery mobile 时，是否可以使用列表视图中的列表项来渲染手风琴？

当我向其添加列表视图时，以下代码将不会呈现“第 2 节”

```
<div data-role="collapsible-set">
        <div data-role="collapsible" data-collapsed="false">
            <h3>Section 1</h3>
            <p>I'm the collapsible content in a set so this feels like an accordion. I'm open by default because I have the <code>data-collapsed="false"</code> attribute.</p>
        </div>
        <div data-role="collapsible" data-collapsed="false">

    <ul data-role="listview" id="myAppsSectionGridTable">
    <li><a href="pa.aspx">
        <img src="images/gf.png" alt="" class="ui-li-icon">IT Change Controls<span class="ui-li-count">
            4</span> 
            </a>
            </li>
              <li><a href="pa.aspx">
        <img src="images/gf.png" alt="" class="ui-li-icon">Expense<span class="ui-li-count">
            8</span> 
            </a>
            </li>
              <li><a href="pa.aspx">
        <img src="images/gf.png" alt="" class="ui-li-icon">Seminar<span class="ui-li-count">
            6</span> 
            </a>
            </li>
              <li><a href="PendingApprovals.aspx">
        <img src="images/gf.png" alt="" class="ui-li-icon">Indirect PR<span class="ui-li-count">
            4</span> 
            </a>
            </li>
              <li><a href="pa.aspx">
        <img src="images/gf.png" alt="" class="ui-li-icon">PTO<span class="ui-li-count">
            2</span> 
            </a>
            </li>
</ul> 
```

```
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:38:17.283

认为你的意思是这样的。

[**jsFiddle 演示**](http://jsfiddle.net/jjKHW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:33:51.517

这是一个 jquery 手风琴，它非常易于使用并且可以完全运行，我已经在几个网站上使用过它。

[http://docs.jquery.com/UI/Accordion](http://docs.jquery.com/UI/Accordion)

# sqlite - MonoTouch 中是否有 Sqlite3 的托管代码替换？

> ID：12111336
> 
> 赞同：1
> 
> 时间：2012-08-24T14:27:54.363
> 
> 标签：sqlite, xamarin.ios

我不再信任 MonoTouch 中的原生 Sqlite3。我不断发生随机崩溃，尽管我无法证明这一点，但我声称这不是我的错。为了验证这一点，我想使用 Sqlite3 的托管替换。是否有与本机版本语法兼容的项目？更重要的是：有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:44:53.850

查看 Xamarin 跨平台[MWC 示例](http://blog.xamarin.com/2012/02/24/mwc_2012/)。

虽然它在 iOS 和 Android 版本上使用本**机**libsqlite，但它确实为 Windows 手机版本使用了完全托管的 SQLite 端口（SQLite 不可用且无法添加本机代码）。

但是，这不会告诉您您的应用程序出了什么问题。如果您在项目中使用其他本机库，我建议您删除它们（一个接一个）并尝试再次复制 sqlite 崩溃。

# java - Hibernate Session.flush() 效率问题

> ID：12111350
> 
> 赞同：3
> 
> 时间：2012-08-24T14:28:32.540
> 
> 标签：java, database, performance, hibernate, flush

如果有人已经回答了这个特定的问题，但我还没有找到我的问题的答案，那么请提前抱歉。

我正在开发一个应用程序（不，我不能提供代码，因为它是一份工作，所以我很抱歉那个），它使用 DAO 和 Hibernate 和 POJO 以及所有用于通信和写入数据库的东西。假设我在调用 Session.flush() 时没有大量数据要检查，这对于应用程序来说效果很好。话虽如此，有一个页面，用户可以在其中向产品添加任意数量的项目，并且有一个特殊情况，其中有 25 个项目。每个项目大约有 8 个字段，它们都存储在数据库中。当我调用刷新时，它确实将所有内容保存到数据库中，但需要 FOREVER 才能完成。我打电话的三行是：

```
merge(myObject);
Session.flush();
Session.refresh(myObject); 
```

我已经尝试了许多不同的组合来解决这个问题和许多不同的解决方案，所以回来说“不要使用flus()”并没有太大帮助，因为 saveOrUpdate() 和其他休眠会话没有t 似乎工作。我能想到的唯一解决方案是废弃整个项目（我们得到的代码是继承的，至少可以说写得不好），或者告诉用户社区接受它。

我对 Hibernate API 的理解是，如果你想将数据写入数据库，它会对每个项目进行检查，如果有差异，它会创建一个更新查询队列，然后运行查询。似乎每次都在更新此数据，因为即使其他值未更改，我的数据库中的“DATE_CREATED”列也是不同的。

我想知道是否有另一种方法可以防止提交如此大量的数据，或者是否有一种方法可以从“检查”休眠中排除该特定列，所以如果我只进行更改，我就不必提交所有 25 个项目到 1？

提前致谢。

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:00:55.880

[好吧，除非您使用StatelessSession](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)，否则您真的无法避免休眠中的脏检查。当然，您会因此失去很多功能（延迟加载等），但这取决于您做出这个决定。

另一种选择：我肯定会尝试在您的实体中使用**dynamic-update=true 。**喜欢：

```
@Entity(dynamicUpdate = true)
class MyClass 
```

使用它，Hibernate 将只更新修改后的列。在具有少量列的小表中，它不是那么有效，但在您的情况下，它可能有助于加快整个过程，因为您无法避免使用常规 Hibernate 会话进行脏检查。更新几列而不是整个对象总是更好，对吧？ [这篇文章](http://www.mkyong.com/hibernate/hibernate-dynamic-update-attribute-example/)更多地讨论了动态更新属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:47:09.893

> 我想知道是否有另一种方法可以防止提交如此大量的数据，或者是否有一种方法可以从“检查”休眠中排除该特定列，所以如果我只进行更改，我就不必提交所有 25 个项目到 1？

我会分析应用程序以确保刷新时的脏检查实际上是问题所在。如果您发现确实是这种情况，您可以使用 evict 来管理会话大小。

```
session.update(myObject);
session.flush();
session.evict(myObject); 
```

# gpu - 用于科学计算的 GPU 精度

> ID：12111352
> 
> 赞同：7
> 
> 时间：2012-08-24T14:28:46.813
> 
> 标签：gpu

一位电气工程师最近告诫我不要将 GPU 用于科学计算（例如，在精度真正重要的地方），因为没有像 CPU 那样的硬件保护措施。这是真的吗？如果是这样，典型硬件中的问题有多普遍/严重？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T14:33:10.730

Actually, modern GPUs fit extremely well for scientific computing and many HPC applications are being at least partially ported to run on GPUs, for the sake of performance and energy efficiency. Unlike older GPUs, the modern ones (take NVIDIA's Fermi or Kepler architectures, for example) provide fully standardized IEEE-754 formats, for both single and double precision, so you should be able to use these just like you do on a modern CPU.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T14:33:31.313

I found a few (older) papers on this, but it does seem the problem has been fixed in cards with compute capabilitity >= 2.0.

*   [Fay, Sazegari, Connors. A Detailed Study of the Numerical Accuracy of GPU-Implemented Math Functions.](http://www.gpgpu.org/static/sc2006/workshop/Apple_GPUintrinsics.pdf)

> Current GPUs do not support double-precision computation and their single-precision support glosses over important aspects of the IEEE-754 floating-point standard[1], such as correctly rounded results and proper closure of the number system. ... Our results show that there are serious errors with the GPUs' results at certain edge cases, in addition to the incorrect handling of denormalized numbers.

*   Karl E. Hillesland and Anselmo Lastra, "GPU Floating-Point Paranoia." In Proc. GP2, August 2004.

*   [GPUBench Test: Precision.](http://graphics.stanford.edu/projects/gpubench/test_precision.html)

*   Guillaume Da Graca and David Defour, "Implementation of float-float operators on graphics hardware." In Proc. 7th conference on Real Numbers and Computers, July 2006.

*   [Wikipedia's CUDA limitations section](https://en.wikipedia.org/wiki/Compute_Unified_Device_Architecture#Limitations)

> Double precision (CUDA compute capability 1.3 and above)[14] deviate from the IEEE 754 standard: round-to-nearest-even is the only supported rounding mode for reciprocal, division, and square root. In single precision, denormals and signalling NaNs are not supported; only two IEEE rounding modes are supported (chop and round-to-nearest even), and those are specified on a per-instruction basis rather than in a control word; and the precision of division/square root is slightly lower than single precision.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T17:40:01.860

NVIDIA 发布了一份白皮书，其中涵盖了使用浮点的一般细节，特别是在 GPU 上的细节：

[http://developer.download.nvidia.com/assets/cuda/files/NVIDIA-CUDA-Floating-Point.pdf](http://developer.download.nvidia.com/assets/cuda/files/NVIDIA-CUDA-Floating-Point.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T23:56:22.337

实际上，大多数科学计算通常不需要那么准确，因为测量误差等在很大程度上压倒了浮点舍入引入的误差（除了，也许在退化的情况下，比如按顺序对浮点数组求和，而不是按相反顺序求和，但是即使在 CPU 中你也会遇到这种问题，并且没有任何东西会警告你，因为它按设计工作）。在科学计算中，一般来说，在一定的误差范围内显示结果就足够了，并且表明该误差不会引起实际问题。

浮点被设计为快速，不一定是精确的数字，即使在 CPU 中也是如此，这就是为什么我们总是被教导将浮点与 epsilon 进行比较。

OTOH，实际上需要精确到最后一位数字的舍入规则的计算，如会计或数论，应该考虑使用定点算术（例如十进制模块），它可以让您准确地指定舍入规则。

# android - 在地图活动中缩放和平移到 lat/lng 跨度

> ID：12111353
> 
> 赞同：1
> 
> 时间：2012-08-24T14:28:54.707
> 
> 标签：android, mapactivity

**概括**

我需要能够从当前的地图视图移动到纬度/经度跨度。我希望这一举动以动画的方式发生（类似于`animateTo`工作方式）。我需要从当前视图开始，放大或缩小以达到目标纬度/经度跨度。下面是我在使用 zoomLevels 时用来执行此操作的代码。但我必须使用跨度，而不是缩放级别来实现这一点。

[编辑]

这就是我正在做的事情`animateTo`。我需要这个等价物，但是使用 Lat/Lng Span 来结束我的最终视图（我需要缩放和居中，显示提供的 lat/lng 跨度）。您会注意到，我正在使用`targetZoomLevel`并`currentZoomLevel`确定要进行多少缩放...我需要使用 lat/lng 跨度。

```
public static void smoothZoom(final MapController controller,
        final int currentZoomLevel, final int targetZoomLevel,
        int latitude, int longitude) {

    final Handler handler = new Handler();

    controller.animateTo(new GeoPoint(latitude, longitude), new Runnable() {
        public void run() {

            int currentZoom = currentZoomLevel;
            int zoomTarget = targetZoomLevel;

            // Smooth zoom handler
            // int zoomLevel = _mapView.getZoomLevel();
            // int targetZoomLevel = targetLevel;
            long delay = 0;

            if (zoomTarget > currentZoom) {
                while (currentZoom++ < zoomTarget) {
                    handler.postDelayed(new Runnable() {
                        @Override
                        public void run() {
                            controller.zoomIn();
                        }
                    }, delay);

                    delay += 150; // Change this to whatever is good on the
                                    // device
                }
            } 
        }
    });
} 
```

[编辑]

我现在真的需要这个代码用于我的应用程序，没有办法解决它。第一个帮助我获得工作代码的人获得 250 个代表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:27:07.003

这对我有用：

```
MapController.setCenter(GeoPoint); 
```

您可以从以下位置获取 MapController：

```
MapView.getController(); 
```

并从以下位置获取 GeoPoint：

```
new GeoPoint( (int) ( LAT * 1e6 ) , (int) ( LONG * 1e6 )  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:02:01.040

这是您正在寻找的解决方案吗？

```
public static void zoomSpan(final MapView mapView, int northernLat, int southernLat, int easternLon, int westernLon) {
    final int latSpan = northernLat - southernLat;
    final int lonSpan = easternLon - westernLon;
    latCenter = southernLat + latSpan / 2;
    lonCenter = westernLon + lonSpan / 2;

    final MapController controller = mapView.getController();
    final Handler handler = new Handler();

    final Runnable zoomRunnable = new Runnable() {
        public void run() {
            int viewLatSpan = mapView.getLatitudeSpan();
            int viewLonSpan = mapView.getLongitudeSpan();
            boolean actionTaken = false;
            if (mapView.getZoomLevel() > 1 && (latSpan > viewLatSpan || lonSpan > viewLonSpan)) {
                controller.zoomOut();
                actionTaken = true;
            }
            if (mapView.getZoomLevel() < mapView.getMaxZoomLevel() && latSpan * 2 <= viewLatSpan && lonSpan * 2 <= viewLonSpan) {
                controller.zoomIn();
                actionTaken = true;
            }
            if (actionTaken)
                handler.post(zoomRunnable);
        }
    };

    controller.animateTo(latCenter, lonCenter, zoomRunnable);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T19:27:23.037

在我的地图应用程序中，我需要实现位置搜索功能。如果找到位置，它会移动到该位置，添加叠加层并缩放到预定义的级别。为此，我使用了以下代码：

```
final int SEARCH_ZOOM_LEVEL = 7;

controller = mMapView.getController();
controller.setZoom(SEARCH_ZOOM_LEVEL );
pointToLocation(s);        // s is the location 
```

pointToLocation() 是这样实现的：

```
private void pointToLocation(String s) {
    Geocoder gc = new Geocoder(MapDemo.this, Locale.getDefault());
    try {
        List<Address> addresses = gc.getFromLocationName(
                s, 5);
        String add = "";
        if (addresses.size() > 0) {
            point = new GeoPoint(
                    (int) (addresses.get(0).getLatitude() * 1E6), 
                    (int) (addresses.get(0).getLongitude() * 1E6));
            controller.animateTo(point);
        }    
    } catch (IOException e) {
        Toast.makeText(MapDemo.this, "Location not found", Toast.LENGTH_LONG).show();
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T20:57:01.517

您正在查看的函数的用法是 zoomToSpan(int latSpanE6, int lonSpanE6)。

您拥有当前跨度（或者可以轻松获得）和目标跨度（正如您所说的那样），那么为什么不简单地开始在 delay 上调用 zoomToSpan ，因为您逐渐将 latSpanE6 和 longSpanE6 移向目标。它不应该那么困难。您已经拥有大部分代码，但是在检查缩放级别时不是 zoomIn，而是在检查 latSpanE6 和 longSpanE6 是否已达到目标跨度时使用 zoomToSpan。

不会打扰编码，因为你可以自己做;）

# java - Android：如何创建 N 个列表视图？

> ID：12111354
> 
> 赞同：1
> 
> 时间：2012-08-24T14:28:58.437
> 
> 标签：java, android, xml, listview

我有一个向 API 发送请求的应用程序，其中返回并显示 JSON 数据。根据用户的不同，会有多个位置的数据，每个位置都是标题并有自己的列表视图。我将如何在 Android 中执行此操作？我了解单个动态列表视图的概念，但是如何动态生成多个列表视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:36:33.043

仍然不确定多个列表视图在动态上是什么意思，首先为什么需要这个，但也许你只需要一个[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)？

> 在垂直滚动的两级列表中显示项目的视图。这与 ListView 的不同之处在于允许两个级别：可以单独展开以显示其子级的组。

# c# - 如何从网页上的 SWF 播放器中提取 PDF？

> ID：12111355
> 
> 赞同：1
> 
> 时间：2012-08-24T14:28:59.240
> 
> 标签：c#, pdf, flash

此页面上有一本书（[http://img.docin.com/players/DocinViewer.swf?productId=463932528](http://img.docin.com/players/DocinViewer.swf?productId=463932528)），它位于一个 swf 播放器中。以前有一个软件可以提取swf播放器中的所有页面并将它们存储为pdf文件。

所以应该有3个步骤：

1.  找到swf播放器里面的文件源
2.  从 swf 播放器中提取所有页面。
3.  将它们保存为一个完整的 pdf 文件。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:35:53.403

我不知道确切的答案，但也许有人可以扩展。在我看来，使用这两个引用，您可以在 SWF 中返回的流中搜索 PDF，以识别 SWF 标题和结构以及 PDF 标题和页脚，然后直接从流中重构 PDF：

*   [http://www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf_file_format_spec_v10.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf_file_format_spec_v10.pdf)
*   [PDF文件的结构？](https://stackoverflow.com/questions/88582/structure-of-a-pdf-file)

或者，也许现有的工具可以解决问题：

*   [http://download.cnet.com/SWF-Printer-Pro/3000-10743_4-10740922.html](http://download.cnet.com/SWF-Printer-Pro/3000-10743_4-10740922.html)

或者使用较新的 SWF 和 PDF 格式的参考将评论者提到的以下开源项目更新到您需要的级别：

*   [http://sourceforge.net/projects/swfdotnet/](http://sourceforge.net/projects/swfdotnet/)

# python - 没有eval的Python变量变量？

> ID：12111358
> 
> 赞同：2
> 
> 时间：2012-08-24T14:29:15.597
> 
> 标签：python, variables, eval, variable-variables

有没有办法在 python 中使用变量字符串访问变量？例如，我想要一种比使用`eval`以下更简洁的方法：

```
def toggleListButtons (self):
    buttons = ["flip", "remove", "removeAll", "delete", "deleteAll", "loadDirectory"]
    for button in buttons:
        eval("self." + button + "Button.setEnabled(!self." + button + "Button.isEnabled())") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T14:31:19.403

您正在寻找的是[getattr()](http://docs.python.org/library/functions.html#getattr)内置函数。还有[hasattr()](http://docs.python.org/library/functions.html#hasattr)和[setattr()](http://docs.python.org/library/functions.html#setattr)。

```
button = getattr(self, 'flipButton')
button.setEnabled(True) 
```

# c++ - 取消引用指向联合成员的指针

> ID：12111361
> 
> 赞同：0
> 
> 时间：2012-08-24T14:29:35.657
> 
> 标签：c++, pointers

以下代码打印 '2' 四次。为什么它从不打印'1'？有人可以准确地解释我这里发生了什么吗？

```
#include <iostream>

int main () {

    union IntegersUnion {

        int a;
        int b;
    };

    IntegersUnion q;

    q.a = 1;
    q.b = 2;

    std::cout << "(*(&q.a)) = " << (*(&q.a)) << std::endl;
    std::cout << "(*(&q.b)) = " << (*(&q.b)) << std::endl;

    std::cout << "(*(&(q.a))) = " << (*(&(q.a))) << std::endl;
    std::cout << "(*(&(q.b))) = " << (*(&(q.b))) << std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:30:32.610

A`union`在其成员之间共享内存。通过做：

```
q.a = 1;
q.b = 2; 
```

第二个赋值覆盖`a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:38:39.563

中的每个项目都`union`指向同一个位置。

最常见的用法`union`是这样的：

```
struct {
    int dataTypeID;
    union {
        char char_here;
        int number_here;            
    }
} incoming_data; 
```

在此示例中，`incoming_data`是从文件中导入的数据，其中`dataTypeID`告诉您它是什么类型的数据。（有许多以这种方式优化空间的文件格式。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:30:25.510

`union`对其所有成员使用相同的内存。

因此，当您分配 时`q.b = 2;`，`q.a`也将是`2`。

# c++ - 如何在 Eclipse CDT 中进行静态链接？

> ID：12111362
> 
> 赞同：1
> 
> 时间：2012-08-24T14:29:35.613
> 
> 标签：c++, c, eclipse, visual-studio, eclipse-cdt

我正在尝试静态链接到 C++ 中的第三方 C 库。

我设法在 Visual Studio 中通过在链接器输入选项中指定 .lib 文件来做到这一点。但是，当我在 CDT（项目属性 -> 设置 -> MinGW C++ 链接器 -> 库）中执行等效操作时，当我尝试构建时，我会收到无数的“未定义的引用...”错误。

为了在 CDT 中实现静态链接，我还需要做些什么吗？

谢谢，艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:37:11.880

如果该第三方库是为 Visual C 环境和 Microsoft Visual Studio 编译器构建的，您可能无法将其与 MinGW 编译器链接。

但是，您可以在 Windows 上配置 Eclipse CDT 以使用 Visual Studio 命令行编译器 CL.EXE 编译您的代码，然后事情应该会按您的预期工作。

这在很大程度上取决于您使用的是哪个版本的 Eclipse CDT，因为 Microsoft 编译器设置插件只是较新版本的一部分（我认为它来自 Helios）。

# sharepoint - 用于定期将 Google Docs 传输到 SharePoint 的 Google 脚本

> ID：12111363
> 
> 赞同：3
> 
> 时间：2012-08-24T14:29:38.443
> 
> 标签：sharepoint, google-apps-script

我觉得这是一个很长的镜头，但是是否有一个 Google 脚本可以将 Google 网站中的所有内容传输到 SharePoint 或将 Google 驱动器文件夹传输到 SharePoint？

我宁愿只使用 Google Drive 进行协作，因为它比 SharePoint（恕我直言）好 100 倍，但我的公司坚持使用 SharePoint。话虽如此，我们的团队希望继续使用我们的 Google 网站进行协作和文档，这就是为什么我想知道是否有某种脚本可以将文档从 Google 传输到 SharePoint？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:34:23.380

好吧，这不是我问题的确切答案。但这最终使这个过程变得容易了 99%。我在本地安装了谷歌驱动器，所以我的所有文件都放在了谷歌驱动器文件夹中。然后我打开sharepoint，并切换到资源管理器视图。然后我简单地将所有文件夹从谷歌驱动器复制/粘贴到共享点文件夹，大约 30 秒后，所有文件都同步了。编写一个脚本将文件/文件夹从 google 驱动器文件夹复制到 sharepoint 文件夹将非常简单。这是解决烦人问题的简单方法，希望对您有所帮助。

# magento - 在 Magento Grid 中编辑项目时没有删除按钮

> ID：12111365
> 
> 赞同：2
> 
> 时间：2012-08-24T14:29:41.563
> 
> 标签：magento

我已经成功创建了我的第一个管理网格。添加新项目时它工作正常。但是，当我想编辑一个项目时，奇怪的`DELETE`是，按钮不见了。更糟糕的是，当我单击`SAVE`按钮时，它会创建一个新项目而不是保存当前项目。我做错了什么？

我不确定要查看哪个文件，因此我不知道必须在此处发布哪些代码。如果我把所有文件中的所有代码都放了，那就太多了。请指教。

更新：不知道为什么，但现在`SAVE`按钮不再重新创建。所以我可以平静地编辑一个项目。但是，`DELETE`按钮仍然丢失。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-13T22:35:41.343

*在游戏后期，但希望这将有助于谷歌员工。*

您的`_objectId`属性是否正确设置为 URL 中的相应参数？

`$this->_objectId = 'id';`

其中 ID 指的是 URL 的这一部分：

/module/adminhtml_controller/edit/ **id** /1/

查看父类`Mage_Adminhtml_Block_Widget_Form_Container::__construct`：

```
...
$objId = $this->getRequest()->getParam($this->_objectId);

        if (! empty($objId)) {
            $this->_addButton('delete', array(
                'label'     => Mage::helper('adminhtml')->__('Delete'),
                'class'     => 'delete',
                'onclick'   => 'deleteConfirm(\''. Mage::helper('adminhtml')->__('Are you sure you want to do this?')
                    .'\', \'' . $this->getDeleteUrl() . '\')',
            ));
        }
... 
```

我们可以看到，如果`$objId`为空，则不会添加删除按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T17:35:45.210

在挣扎之后，罪魁祸首是因为我把 parent::__construct(); 在顶部（就在 __construct() 方法之后。相反，它应该放在 $this->_controller 行之后。Geezz...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-21T06:17:55.360

***如果您不想在网格中显示“添加新”按钮，请从 magento 管理员中删除或重命名添加新的保存继续删除按钮。添加新按钮位于网格页面的右上角。

重命名“添加新”按钮

以下是将“添加新”文本重命名为您需要的任何内容的步骤（例如，“添加报告”）：-

*   转到 YourNamespace -> YourModule -> 块 -> Adminhtml -> `enter code here`YourFile.php
*   在此文件的构造函数中添加以下代码：-

    $this-> *addButtonLabel = Mage::helper('yourmodulename')->_* ('Add Report');

**删除“添加新”按钮** 以下是删除“添加新”按钮的步骤：-

*   转到 YourNamespace -> YourModule -> 块 -> Adminhtml -> YourFile.php
*   在此文件的构造函数中添加以下代码（它应该就在对父构造函数的调用下方）：-

    父::__construct(); $this->_removeButton('add');

**在edit.php中**

```
parent::__construct();
$this->_removeButton('delete');
$this->_removeButton('save');
$this->_removeButton('back'); 
```

**在 grid.php 中**

```
parent::__construct();
$this->_removeButton('add'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:57:18.140

试试你的 Grid.php：

```
 public function getRowUrl($row){
    return $this->getUrl('*/*/form', array('id' => $row->getId()));
} 
```

# css - IE 从 CSS Boilerplate 打印空白页

> ID：12111370
> 
> 赞同：2
> 
> 时间：2012-08-24T14:29:51.323
> 
> 标签：css, printing, internet-explorer-8, internet-explorer-9, media-queries

我的公司正在使用 print.css 进行打印。此外，我们还有另一个 style.css 覆盖任何其他 .css 文件，包括 print.css。出于某种原因，当来自 html5 样板（位于覆盖文件中）的@media 打印查询打开时，IE8 和 IE9 正在打印空白页。当它被注释掉时，没有问题。这里有什么问题？我们想留下样板文件中的@media 打印。

打印.CSS

```
@media print
{
body *
{
    visibility:hidden;
}

#basicShell #main,
#basicShell #main *,
.basicShell_container .content,
.basicShell_container .content *,
#mainShell_container .center_columnContent,
#mainShell_container .center_columnContent *
{
    visibility:visible;
}

#basicShell #main,
.basicShell_container .content,
#mainShell_container .center_columnContent
{
    position:absolute;
    left:0;
    top:0;
}
} 
```

STYLE.CSS（覆盖一切）

```
@media print {
* { background: transparent !important; color: black !important; text-shadow: none    
!important; filter:none !important; -ms-filter: none !important; float: none 
!important;} /* Black prints faster: h5bp.com/s */
a, a:visited { text-decoration: underline; }
a[href]:after { content: " (" attr(href) ")"; }
abbr[title]:after { content: " (" attr(title) ")"; }
.ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }  /*  
Don't show links for images, or javascript/internal links */
pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
thead { display: table-header-group; } /* h5bp.com/t */
tr, img { page-break-inside: avoid; }
img { max-width: 100% !important; }
@page { margin: 0.5cm; }
p, h2, h3 { orphans: 3; widows: 3; }
h2, h3 { page-break-after: avoid; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T01:02:46.240

我在 HTML5 Boilerplate 中遇到了同样的问题。

就我而言，它原来是这一行：

```
tr { page-break-inside: avoid; } 
```

这导致了 IE8/9 中的空白页。该页面在标签中包含大量内容（超过一页的价值），IE 决定通过跳过页面并切断内容来处理它。呸。

为了避免弄乱 HTML5 样板，我在自己的样式表中添加了以下内容，问题就解决了：

```
tr { page-break-inside: auto; } 
```

您的问题可能是由不同的标签引起的，因此请检查设置 page-break-inside 属性的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:37:24.680

您必须考虑在您的站点中加载样式表的优先级。目前，您在`print.css`样式表上有这样的说明：

```
body * {
    visibility:hidden;
} 
```

该规则基本上隐藏了文档中的“一切”。您提到`styles.css`样式表应该覆盖所有内容，但是样式表以什么顺序加载到您的标题中？如果 print.css 工作表在 style.css 工作表之后，那么第一个规则就会生效。

您的链接参考中包含的类型也有这种情况`media`，我不知道哪个具有更好的优先级；链接媒体类型或媒体查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:33:59.240

The first rule in print.css makes all subelements of `body` invisible. The intent appears to be to turn some elements to visible, but apparently this fails, perhaps because the markup (which was not disclosed) does not use `id` and `class` attributes in the intended way.

# c - 将 for 循环中的值存储到数组中

> ID：12111372
> 
> 赞同：1
> 
> 时间：2012-08-24T14:29:54.710
> 
> 标签：c, arrays, for-loop

我想将从 for 循环读取的值存储到数组

```
char A[];
int x;
int y=5;

for( int i=0; int i =1000; i++) {
   x = x+y;
   // then store/append x as elements of the char array, A.... what is the syntax?
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T16:02:18.480

通过查看您的代码，我假设您正在尝试构建一个静态数组，因此我将演示这一点（因此您暂时不必关注诸如 malloc 之类的概念）。但是，我现在将讨论您的代码存在的几个问题。

首先关闭您的数组声明：

```
char A[]; 
```

对我来说，看起来你的 for 循环正在填充一个整数数组，所以这个数组应该声明为一个整数，而且你没有设置数组的大小，因为你的代码有 i 递增直到它是 1000 你应该声明具有 1000 个元素的整数数组：

```
int A[1000]; 
```

其次你的 for 循环：

```
for(int i = 0, int i = 1000; i++) 
```

你最好只声明`i`其余的变量，尽管你可以在 for 循环中声明它，我个人不建议这样做。你也在这个循环中声明`i`了两次。最后，您继续循环的条件 ( `i = 1000`) 将立即中止循环`i`，`1000`因为您将其设置为`0`. 请记住，for 循环仅在中间语句为真时循环。因此，考虑到这一点，您现在应该拥有：

```
int A[1000], i, x, y = 5;
for(i = 0; i < 1000; i++) 
```

现在我们可以使用`=`语句和值`i`来设置每个数组元素`A`：

```
int A[1000], i, x, y = 5;
for(i = 0; i < 1000; i++)
{
    x += y;
    A[i] = x;
} 
```

就这么简单！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:34:53.443

您的代码存在多个问题

```
char A[1000]; // Need to specify a compile time constant for the array size
int x=0;
int y=5;

for( int i=0; i < 1000; i++) { // Condition was wrong
   x = x+y;
   // then store/append x as elements of the char array, A.... what is the syntax?
   A[i] = x; // Add the value
} 
```

此外，`char`数据类型将无法保存超过一定大小的值，并且会导致溢出使值环绕。您可能想改为声明`A`为`int A[1000]`。

*   数组需要具有恒定大小，否则您需要使用`malloc`
*   循环的第二部分不能`i`再次重新声明。如果你像你一样在其中有一个赋值语句，它也会永远循环。我假设您想循环最多 1000 个
*   实际问题，分配到数组中使用`[]`运算符。
*   `x`未初始化为任何内容，使其包含垃圾值。您需要在声明变量时为其赋值。C 不会自动为您执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T14:55:17.657

如果你想在 C 中添加一个元素，你有几种方法。

**静态数组**

声明了一个静态数组，其中包含许多您无法编辑的元素。因此，如果您确切地知道您将拥有的元素数量，那就太完美了。@Dervall 确实很好地解释了这一点。

**动态数组**

使用 malloc 函数声明动态数组。并且可以更改大小。但是，它很难维护。但 ：

```
int *A = NULL;
int *tmp; // to free ex allocated arrays
int i;
int j;
int x = 0;
int y = 5;

for (i = 0 ; i < 1000 ; i++) {
    // saving temporarly the ex array
    tmp = A;
    // we allocate a new array
    if ((A = malloc(sizeof(int) * (i + 1))) == NULL) {
        return EXIT_FAILURE;
    }
    // we fill the new array allocated with ex values which are in tmp
    for (j = 0; j < i; j++) {
        A[j] = tmp[j];
    }
    // if it's not the first time, we free the ex array
    if (tmp != NULL)
        free(tmp);
    x = x + y;
    A[i] = x;
} 
```

当然最好把它分成一个函数:)

*您也可以使用该`realloc`功能！这是为此而设计的，但我发现像这样开发很有趣*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:36:28.000

您的代码段有很多问题。这是一个可编译的示例

```
char *A = malloc(sizeof(*A) * NUM_ELEMENTS); // you shouldn't declare on the stack
int x = 0; // initialize
int y=5;

for( int i = 0; i < NUM_ELEMENTS; i++) { // proper for loop syntax
    x = x+y;
    A[i]=x; // assign element of array
} 
```

还有一个更好的版本：

```
char *A = malloc(sizeof(*A) * NUM_ELEMENTS);

for (int i = 0; i < NUM_ELEMENTS; ++i)
    A[i] = 5 * i; 
```

# objective-c - 多个 FQL 查询合二为一

> ID：12111374
> 
> 赞同：1
> 
> 时间：2012-08-24T14:30:01.073
> 
> 标签：objective-c, ios, facebook-fql, fql.multiquery

在我正在使用的项目中`FacebookSDK`，我需要获取带有分页的好友列表，那么如何将好友数量和好友列表（偏移“值”，限制 10）合二为一`FQL query`？

我的查询是：

```
SELECT friend_count FROM user WHERE uid = me()
SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 10 OFFSET 0 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:41:01.030

您需要将两个查询编码为 JSON 对象，并将该对象作为查询传递给`/fql`端点：

```
{
  'num_friends':'SELECT friend_count FROM user WHERE uid = me()',
  'ten_friends':'SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 10 OFFSET 0'
} 
```

有关在 iOS SDK 中使用多查询的具体信息，请参阅[本教程的步骤 2b](https://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/)

# django - 在测试中使用请求的用户信息

> ID：12111376
> 
> 赞同：1
> 
> 时间：2012-08-24T14:30:08.250
> 
> 标签：django, django-testing

我使用 user.userprofile 中的信息来管理权限。

**我如何使用它：**

```
# List of status
STATUS_CHOICES = (
    ('teacher', 'Teacher'),
    ('student', 'Student'),
)

# More field for an user.
class UserProfile(models.Model):
    user = models.OneToOneField(User, unique=True)
    status = models.CharField(max_length=10, choices=STATUS_CHOICES, default='student') 
```

现在，在一个视图中，我有一个例子：

```
# Only the owner view this template
if request.user.userprofile.status != 'teacher':
    return redirect('Penelope.views.home') 
```

**我要如何测试：**

```
def login_function(self, username, password, status):
    # Create a new user
    user = User.objects.create_user(username=username, password=password)
    user.userprofile.status = status
    user.save()

    # Use test client to perform login
    user = self.client.login(username=username, password=password)
    response = self.client.post('/login/')

class LoggedAsTeacherCase(TestCase):
    def setUp(self):
        # I create and log with a teacher user
        login_function(self, 'teststudent', 'password', 'teacher') 

    def test_login(self):  # Verify if login has been validated by server
        response = self.client.get('/login/')
        self.assertRedirects(response, '/')   # <<< It is ok (My user is detected as connected, he is redirected)

    def test_dashboard(self): 
        response = self.client.get('/')
        self.assertEqual(response.status_code, 200)   # <<< It is ok (Confirmation, my user is not redirected to login url, perfect)

    def test_newcourse(self):
        response = self.client.get('/newcourse/')
        self.assertEqual(response.status_code, 200)   # <<<  /!\ It is false, I have a redirection (302), not a 200... 
```

因此，这意味着当视图测试用户是否是老师时（参见：我的主题的顶部），它发送了 False...

如何访问这些信息并进行测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:07:53.080

您对`status`字段的定义不正确。CharFields 需要一个正整数的“max_length”属性。

将其更改为以下内容：

```
models.CharField(max_length=..., choices=STATUS_CHOICES) 
```

另请参阅[此处](https://docs.djangoproject.com/en/dev/ref/models/fields/#choices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T19:45:30.883

我发现了问题！

```
user = User.objects.create_user(username=username, password=password)
user.userprofile.status = status
user.save() 
```

当我这样做时，我想`user = User.objects.create_user(username=username, password=password)`返回一个用户（假）。

所以，我必须提出一个要求：

```
user = User.objects.create_user(username=username, password=password)
test = UserProfile.objects.filter(user=username)
test.status = status
test.save() 
```

没关系！

# android - 绘制大量相同Bitmap但大小不同的ImageView

> ID：12111377
> 
> 赞同：0
> 
> 时间：2012-08-24T14:30:10.690
> 
> 标签：android

我正在尝试`ImageView`在单个`LinearLayout`.

所有的`ImageView`s 都需要有一个位图。ImageViews 只会在大小上有所不同。不会调整单个位图的大小。

简单的方法是为每个 ImageView 创建一个 Bitmap。但是，这很快就会耗尽内存。

```
final Bitmap placeholderBitmap = Bitmap.createBitmap(width, height, Config.ARGB_8888);
final Canvas canvas = new Canvas(placeholderBitmap);
canvas.drawBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.placeholder_image), 0, 0, null);
imageView.setImageBitmap(placeholderBitmap);
linearLayout.addView(imageView); 
```

我也尝试设置最大和最小高度和宽度，没有效果。图像保持相同大小。

```
imageView.setImageResource(R.drawable.ic_no_image);
imageView.setMaxHeight(imageViewInfo.height);
imageView.setMaxWidth(imageViewInfo.width); 
```

我相信使用`Drawable`s 是正确的“Android”方式，但我找不到一种方法来动态创建右侧的 Drawable 并将共享位图分层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:17:11.527

只需使用一个`Bitmap`-正如您所说，它们都将使用相同的`Bitmap`，因此无需重复。

如果您希望`ImageView`s 具有不同的大小并且将`Bitmap`比例尺本身设置为 s 的大小，`ImageView`则使用`setScaleType`or`android:scaleType`属性来设置s 的比例尺`ImageView`。例如`FIT_START`，保持图像的纵横比并尝试`ImageView`从左上角开始填充。

我认为没有必要创建 a `Drawable`，但如果需要，您可以`Bitmap`使用以下方法创建一个：

```
Drawable d = new BitmapDrawable(bitmap); 
```

`ImageView`实际上，当您调用`setImageBitmap(...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:36:57.440

ImageView 将始终将位图大小调整为需要的比例。

如果您想节省内存，请手动调整位图大小并将它们设置到 ImageViews 中，这应该会阻止 ImageView 在内部调整其大小 - 以确保您可以将图像视图的 layout_width 和 layout_hieght 设置为“wrap_content”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:16:45.483

我想可能正在寻找[ClipDrawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Clip)。

您将`android:drawable`剪辑 XML 的属性设置为您的位图

或者您可以使用示例中给出的 Java 代码来完成

# c - 基于模板的 C/C++ 代码生成

> ID：12111381
> 
> 赞同：21
> 
> 时间：2012-08-24T14:30:20.367
> 
> 标签：c, code-generation

对 C / C++ 的模板基本代码生成器有什么建议，专门用于生成重复代码吗？（不是基于 UML / MATLAB 模型或其他高级的东西）。对于这个领域的新手，有什么好的通用教程（不是基于工具的）吗？

我发现[GNU Autogen](http://www.gnu.org/software/autogen/)看起来不错，但看起来它需要一个陡峭的学习曲线。我更喜欢 Eclipse 之类的 IDE 插件，易于使用，最重要的是好的教程。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T14:42:15.680

代码生成的基本概念很简单——人们的需求也很多样化——所以有很多选择。

*   [Boost.Preprocessor](http://www.boost.org/doc/libs/release/libs/preprocessor/doc/index.html)是一个建立在标准 C / C++ 预处理器之上的函数库，它使使用预处理器进行代码生成变得更加容易。它不像其他选项那样灵活，并且找出预处理器错误可能很棘手，但它仅使用标准语言功能这一事实大大简化了使用它并将其集成到您的构建中。
*   如果您了解 Python，那么就有[Cog](http://nedbatchelder.com/code/cog/)。
*   Google 的一些项目使用[Pump](https://github.com/google/googletest/blob/master/googletest/docs/PumpManual.md)。
*   有许多通用的模板解决方案（Python 的[Genshi](http://genshi.edgewall.org/)、[eRuby](http://en.wikipedia.org/wiki/ERuby)等）。这些通常设计用于生成 HTML 和 XML，但也适用于代码。
*   用您选择的脚本语言将某些东西组合在一起也很容易。

在不了解您的需求以及您熟悉的工具的更多信息的情况下，我无法给出更具体的建议。

我不熟悉任何提供 Eclipse 插件的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T14:48:45.173

如果您了解 Python，那么 Cog 可以被视为轻量级解决方案：http: [//www.python.org/about/success/cog/](http://www.python.org/about/success/cog/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T03:23:31.703

查看我对使用 M2T-JET（基于 Eclipse 的轻量级模板生成器）的[Java 类的类似问题的回答。](https://stackoverflow.com/questions/11904803/generating-java-code-from-xml-in-eclipse/11904915#11904915)JET 与语言无关，您可以从示例中看到它相当容易使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-04T03:57:26.940

我很欣赏使用 Lua 来完成这项任务，例如[Templet](http://colberg.org/lua-templet/)或其他无数基于 Lua 的预处理器之一。使用 Lua 优于 Python 之类的好处是，如有必要，您可以将源代码包含到您的模板处理器和基本 Lua 安装以及您要交付的任何内容中。然后，您可以像往常一样将 Lua 和后续模板文件的编译添加到构建过程中。

我建议不要使用基于 Python 的解决方案，原因有一个：为了满足每个开发人员对完全不同但不兼容的版本的使用，同时使用各种 Python 是很烦人的。如果您选择使用无法嵌入到树中的语言，则需要确保预计算版本可用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-08T12:44:09.057

迟到了，但我会推荐[Codeworker](http://codeworker.free.fr/ "代码工作者")它是我发现的唯一工具，可以完成上述工具所做的一切，甚至更多。它具有类似于 Python Cog 的嵌入式生成功能，它具有基于模板的生成，例如 Templet 或 Pump。并且它具有相当有用的保护区功能，因此您可以根据需要自定义代码并重新生成。

我用它来生成所有样板 c++ 代码以及 SQL、config、javascript 等项目的配置。

# java - Create SQLite inmemory database from bytearray

> ID：12111386
> 
> 赞同：3
> 
> 时间：2012-08-24T14:30:32.940
> 
> 标签：java, sqlite, sqljet

I need to process data from a SQLite database using some Java code. The problem is that the database is retrieved from an external service and thus it is only available as an `InputStream`.

I would really like to avoid saving the db to the file system before starting to process the data, but I don't see a way of doing it.

I am currently using [SqlJet](http://sqljet.com/), as it provides an option to create an in-memory database. However there seems to be no way to turn an `InputStream` / byte array into a database.

There's nothing forcing me to use [SqlJet](http://sqljet.com/), it can be easily replaced by any other tool if it provides the needed functionality.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:09:57.910

It can't be done as such. Perhaps Java supports some mechanism to create some form of virtual file that is presented locally (to the current process) as some physical file.

I can think of one way to work-around the limitation, but that may not be doable or acceptable within your context. You can change the service to return a dump of the database and load that in the receiver's in-memory database:

Here is a way to generate the dump:

```
# sqlite3
SQLite version 3.7.11 2012-03-20 11:35:50
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> create table foo (i text);
sqlite> insert into foo values ('a');
sqlite> insert into foo values ('b');
sqlite> .dump
PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE foo (i text);
INSERT INTO foo VALUES('a');
INSERT INTO foo VALUES('b');
COMMIT; 
```

# c# - 如果打开自定义错误，是否不会触发 global.asax Application_Error 事件？

> ID：12111387
> 
> 赞同：13
> 
> 时间：2012-08-24T14:30:34.660
> 
> 标签：c#, .net, asp.net-mvc

如果您`RemoteOnly`在 Web 配置中设置了自定义错误 - 这是否意味着 MVC 的应用程序级错误事件`global.asax`-`Application_Error`不会因错误而触发？

我刚刚注意到，当我的应用程序中发生某个错误并且我正在远程查看该站点时，不会记录任何错误。但是，当我访问服务器上的应用程序并发生相同的错误时，会记录该错误。

这是自定义错误配置设置：

```
<customErrors defaultRedirect="/Error/Application" mode="RemoteOnly">
    <error statusCode="403" redirect="/error/forbidden"/>
    <error statusCode="404" redirect="/error/notfound"/>
    <error statusCode="500" redirect="/error/application"/>
</customErrors> 
```

**编辑**

只是出于对人们的兴趣-我最终完全关闭了自定义错误并`Application_Error`像这样处理重定向：

```
protected void Application_Error(object sender, EventArgs e)
{
    Exception exception = Server.GetLastError();

    // ... log error here

    var httpEx = exception as HttpException;    

    if (httpEx != null && httpEx.GetHttpCode() == 403)
    {
        Response.Redirect("/youraccount/error/forbidden", true);
    }
    else if (httpEx != null && httpEx.GetHttpCode() == 404)
    {
        Response.Redirect("/youraccount/error/notfound", true);
    }
    else
    {
        Response.Redirect("/youraccount/error/application", true);
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T14:53:10.683

如果您不调用 Server.ClearError 或在 Page_Error 或 Application_Error 事件处理程序中捕获错误，则会根据 Web.config 文件部分中的设置处理错误。

有关更多信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/6508415/application-error-not-firing-when-customerrors-on)

# object - and do not recalculate width when the height is strictly given in CSS I have a flash stuff on a web page, which height I want to control basing on parent's explicitly set height. Width should be recalculated to preserve 问问题 问问题 2012-08-24T14:30:48.803 114 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a flash stuff on a web page, which height I want to control basing on parent's explicitly set height. Width should be recalculated to preserve proportions - as it happens when dealing with  tag:<embed src="...">  Instead of expected behaviour I get the flash of absolutely other size: it is much smaller than it's parent in all dimensions. Actually, I don't understand why it takes this particular size - it looks too small (like zoomed out few times). To make it to behave in a proper way I have to set both width and height for explicitly. It may be done both inline and in CSS. The question is: why doesn't it calculate height (though it obviously has enough data -  can resize properly at the same conditions) based on parent's height and given percentage?. (Initially I've had many other attributes (including duplicated width and height on both and tags) which all I removed to simplify the example. While doing that, I was checking whether removement changes anything and it didn't except of width and height attributes.) May I ask what's the point? Your input file is not XML, and you don't want to make it XML by adding CDATA section. What do you gain by knowing whether "some" of the data is XML? It's not like you will be able to use XML tools on it, or that ypo will be able to deliver it as XML. So really this non-validation doesn't gain you anything. Isn't it a bit of a waste of time then? objectembeddimensions 4 0 回答 0 Related 2 javascript - dojo中饼图和图例的配置 1 php - 针对 db 检查文件系统文件的一致性 0 javascript - 我的脚本可以工作，即脚本工具，但它不能工作 sharepoint 脚本编辑器 2 video - YUV 420电影流的文件结构是什么 1 google-maps - 如何在包含地图容器的 div 中附加谷歌地图的调整大小方法？ 1 java - Android 模拟器和 Eclipse 4 mysql - 总和列值 3 arrays - Go语言中的数组比较 3 php - 如何使用 OR 子句选择两个条件 2 java - 在 Google Maps v2 中更改相机位置后无法缩放地图 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12111393
> 
> 赞同：1
> 
> 时间：
> 
> 标签：object, embed, dimensions

I have a flash stuff on a web page, which height I want to control basing on parent's explicitly set height. Width should be recalculated to preserve proportions - as it happens when dealing with `<img>` tag:

```
<div>
    <object>
      <embed src="..."> <!-- no attributes except src -->
  </object>
</div>

<style>
    div { height: 300px; }
    object, embed { height: 100%;   }
</style> 
```

Instead of expected behaviour I get the flash of absolutely other size: it is much smaller than it's parent in all dimensions. Actually, I don't understand why it takes this particular size - it looks too small (like zoomed out few times).

To make it to behave in a proper way I have to set both width and height for explicitly. It may be done both inline and in CSS.

**The question is: why doesn't it calculate height** (though it obviously has enough data - `<img>` can resize properly at the same conditions) **based on parent's height and given percentage?**.

(Initially I've had many other attributes (including duplicated width and height on both and tags) which all I removed to simplify the example. While doing that, I was checking whether removement changes anything and it didn't except of width and height attributes.)

# wamp - Wampserver2 + kohana 3.2 链接问题

> ID：12111402
> 
> 赞同：0
> 
> 时间：2012-08-24T14:31:26.207
> 
> 标签：wamp, kohana-3.2

我正在`Kohana 3.2`框架中开发我的第一页，但我遇到了一个大问题。我有大约 3 个控制器：

1.  默认扩展模板控制器，
2.  家扩展默认，
3.  列表扩展默认值。

每个控制器都有自己的动作。我使用 home/login 登录并重定向到列表控制器，该控制器打开操作索引以显示模板内容中的一些内容。打开的内容有链接来管理不同的内容（比如重印表，里面有不同的东西）。我希望链接像这个控制器/动作一样工作，但是如果按下一个链接，比如说列表/显示，然后我再次按下列表/显示（因为菜单一直在显示），它会尝试进入列表/显示/list/show 而不是仅仅重新打开列表/显示。总而言之，它只是将按下的链接添加到前一个链接，造成混乱。有人知道为什么会这样吗？Apache 的重写模块已打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:21:12.727

始终是带有斜杠的 href 并指定从 Web 根目录到控制器的路径。换句话说，链接应该是：

```
<a href="/list/show"> 
```

# javascript - Getting trouble with integer comparison using jquery

> ID：12111403
> 
> 赞同：2
> 
> 时间：2012-08-24T14:31:32.057
> 
> 标签：javascript, jquery, comparison

I've following code

```
<input type="text" id="max_marks" name="max_marks" value="100">            
<input type="text" id="marks" name="marks" value="75" >
        <script type="text/javascript">
            $(document).ready(function(){
                $('#marks,#max_marks').change(function(){
                    var mm=$('#max_marks').val();
                    var m=$('#marks').val();

                    if(parseInt(mm,10) > parseInt(m,10))
                    {
                     alert("Maximum marks greater than obtained marks");   
                    }                        
                }).change(); 
            });

        </script> 
```

The alert is firing when maximums marks are less than obtained marks.Where I'm doing the mistake ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:47:48.307

有时我们无法预测 jQuery 和 Javascript 等客户端脚本语言的流向。无论如何尝试遵循一个

```
 <input type="text" id="max_marks" name="max_marks" value="100"><span></span>
 <input type="text" id="marks" name="marks" value="50" ><span></span>
        <script type="text/javascript">
            $(document).ready(function(){

                function isNumberInt10(n) {
                         return !isNaN(parseInt(n,10)) && isFinite(n);
                        }
                function isValidMarks(m,n){

              if(parseInt(m) <= parseInt(n))
                    {   
                             return true;
                    }
                }        
                $('#max_marks').change(function(){

                 var mm=$('#max_marks').val();
                    if (!isNumberInt10(mm)) {
                        $('#max_marks').next().text('Enter valid marks');
                        $('#max_marks').attr('value','');
                        $('#max_marks').focus();
                        }
                   else
                    {
                        $('#max_marks').next().text('');
                        $('#max_marks').attr('value','');
                        $('#max_marks').focus();
                    }   
                    }).change(1000); 

           $('#marks').change(function(){        

                    var mm=$('#max_marks').val();
                    var m=$('#marks').val();

                  if (!isNumberInt10(m)) {
                        $('#marks').next().text('Enter valid marks');
                        $('#marks').attr('value','');
                        $('#marks').focus();
                        }
                   else
                    {    
                        $('#marks').next().text('');
                    }
                   if(isValidMarks(mm,m))
                    {   
                        $('#marks').next().text('Enter Valid obtained marks');
                        $('#marks').attr('value','');
                        $('#marks').focus();
                    }
                    else
                    {
                        $('#marks').next().text('');
                    }
                   }).change(1000);
            });

        </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:50:26.393

您编写的代码容易受到不正确的数字字符串的影响。我建议像这样修改它：

```
function isNumberInt10(n) {
  return !isNaN(parseInt(n,10)) && isFinite(n);
}

$(document).ready(function(){
    $('#marks,#max_marks').change(function(){
        var mm, m;

        mm=$('#max_marks').val();
        if (!isNumberInt10(mm)) {
           alert("Max marks needs to be a number");
           return;
        }
        m=$('#marks').val();
        if (!isNumberInt10(m)) {
           alert("Marks needs to be a number");
           return;
        }

        if(parseInt(mm,10) > parseInt(m,10)) {
            alert("Maximum marks greater than obtained marks");   
        }                        
    }).change(); 
}); 
```

# javascript - Start CSS3 animation using Javascript with onclick event

> ID：12111411
> 
> 赞同：5
> 
> 时间：2012-08-24T14:31:49.363
> 
> 标签：javascript, css, onclick, dom-events, css-animations

I'm working on a webapp that uses CSS3 animations for some nice effects, but I can't figure out to activate them with an `onclick` event.

this is the CSS3 Animation: (The name of the DIV this is added to is `#smspopup`)

```
#smspopup {    
-webkit-animation: move-sms 1.5s 1;
    -webkit-animation-fill-mode: forwards;
} 
```

And this is my Javascript where I just can't figure out what I need to get it going

```
function cancel_sms() 
{
    halte.style.opacity = 1;
    document.getElementById('smspopup').style.visibility = 'hidden';
    document.getElementById('up').style.visibility = 'visible';
} 
```

And another thing I want to do is delay the functions 1.5 seconds until the animation is finished. Anyone any idea?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:36:11.317

**开始动画**

首先使用类而不是 ID。将 CSS 更改为：

```
.smspopup {    
    -webkit-animation: move-sms 1.5s 1;
    -webkit-animation-fill-mode: forwards;
} 
```

并添加`class=smspopup`到`smspopup`元素中。

接下来，在处理程序 ( `cancel_sms`?) 中，只需将类添加到元素即可开始动画：

```
document.getElementById('smspopup').className = 'smspopup'; 
```

**动画结束回调**

对于第二个问题（针对动画的结尾），有两种选择：

1.  将回调附加到*transitionEnd*事件。唯一的问题是您需要监听特定于供应商的事件：

    `myDiv.addEventListener('webkitAnimationEnd', callback);`

2.  使用常规超时。这样做的问题是时机不会完美（但可能足够接近）。

    `setTimeout(callback, 1500);`

# linq - 使用 Linq 从 DataTable 单元格中修剪空格

> ID：12111415
> 
> 赞同：3
> 
> 时间：2012-08-24T14:32:07.163
> 
> 标签：linq

这段代码用于修剪每个数据行的每个数据单元中的所有空格。我怎样才能得到这个代码：

```
var dataRows = dataTable.AsEnumerable();
foreach (var row in dataRows)
{
     var cellList = row.ItemArray.ToList();
     row.ItemArray = cellList.Select(x => x.ToString().Trim()).ToArray();
} 
```

进入一行代码，所以我不必遍历每一行？像这样的东西，但它不起作用：

```
dataTable.AsEnumerable().Select(y => y.ItemArray.ToList()).Select(x => x.ToString().Trim()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:44:29.170

如果你喜欢 LINQish 类型：

```
 dataTable.AsEnumerable().ToList()
        .ForEach(row =>
        {
            var cellList = row.ItemArray.ToList();
            row.ItemArray = cellList.Select(x => x.ToString().Trim()).ToArray();
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:38:20.130

使用 linq，您最终无法更改项目值，您应该运行 for 循环（或 foreach）来更改字段值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:42:10.100

例如

```
var iq = obj from dataTable.asEnumerable() select new{
PersonName = a.Field<string>("PersonName"),
PersonID = a.Field<decimal>("PersonID"),
ParticipantString = a.Field<string>("DisplayString"),
PersonUserName = d.Field<string>("UserName")
} 
```

# java - USB 通信，Monodroid/Android 中的端点

> ID：12111417
> 
> 赞同：1
> 
> 时间：2012-08-24T14:32:19.067
> 
> 标签：java, android, usb, xamarin.android

我有一个 USB 设备，我正在尝试使用 MonoDroid API 与我的 Android 4.1 设备进行通信，但在设置正确连接时遇到了一些问题。首先，为达到我的“想法”而采取的步骤可能是一个问题：

1.  在我的 AndroidManifest 文件中使用意图过滤器按供应商和产品 ID 过滤我的设备。这很好用，因为当我插入设备时，我的应用程序默认请求启动，因此权限应该正确。
2.  从我的意图过滤器在发现所述设备后发送程序的 Activity 中获取我的 USB 设备：`UsbDevice device = (UsbDevice)this.Intent.GetParcelableExtra(UsbManager.ExtraDevice);`
3.  在检查只存在一个接口后，我通过发出以下命令来获取关联的接口：`UsbInterface intf = device.GetInterface(0);`
4.  检查端点的数量并抓取它们。有 2 个，因为这是一个输入和输出设备： `UsbEndpoint endpoint_IN = intf.GetEndpoint(0);` `UsbEndpoint endpoint_OUT = intf.GetEndpoint(1);`
5.  使用 UsbManager 获取与设备的连接：`UsbDeviceConnection connection = device_manager.OpenDevice(device);`

但是，我注意到接口索引 0 处的端点（上面的 endpoint_IN）具有 UsbAddressing 枚举类型“DirMask”，其中 endpoint_OUT 具有类型“Out”；我希望 endpoint_IN 为“In”，但事实并非如此。什么是“DirMask”？内联文档状态“尚未输入此部分的文档”，在线文档反映相同：[http ://api.xamarin.com/?link=T%3aAndroid.Hardware.Usb.UsbAddressing](http://api.xamarin.com/?link=T%3aAndroid.Hardware.Usb.UsbAddressing)

这可能是我的问题吗？我只是不太确定。我尝试执行其余的通信程序，但未能产生任何结果。例如，下面的代码应该输入一个命令来接收一个读数：

```
Byte[] sys_command = Encoding.ASCII.GetBytes("!001:SYS?\r");
Java.Nio.ByteBuffer sys_command_buffer = Java.Nio.ByteBuffer.Wrap(sys_command);

Java.Nio.ByteBuffer output_buffer = Java.Nio.ByteBuffer.Allocate(4);

UsbRequest request_out = new UsbRequest();
request_out.Initialize(connection, endpoint_OUT);

connection.ClaimInterface(intf, forceClaim);

request_out.Queue(output_buffer, 4);
connection.BulkTransfer(endpoint_IN, sys_command, sys_command.Length, TIMEOUT);

if (connection.RequestWait() == request_out)
    readings.Text = output_buffer.GetFloat(0).ToString(); 
```

有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:45:43.237

考虑到所有因素，我将接口端点向后设置。也就是说，我试图读/写错误的接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T17:58:37.467

万一其他人偶然发现了这一点，DirMask 类型意味着查看端点的 Direction 属性而不是 Type 属性。如果 Type 是 DirMask，Direction 可以是 UsbAddressing.In 或 Out。

In 的方向是输出端点，反之亦然（我猜这就是为什么你让它们向后）。

# asp.net-mvc - Continue developing live windows azure + entity framework code first side

> ID：12111421
> 
> 赞同：0
> 
> 时间：2012-08-24T14:32:36.230
> 
> 标签：asp.net-mvc, entity-framework, azure

I've worked on ASP.NET MVC site using Entity Framework code first approach. I've finished my initial website and uploaded it to Windows Azure.

Now, I wish to continue developing the site and enhance the database structure. The problem is that because it was created as code-first when I'll modify my entities - the database will re-created so my data will be lost.

My questions is - how can I get the live data from windows azure back to my local machine (registered accounts, posts etc.) and how can I continue developing my site without loosing that data. To be more specific - I wish to update the database structure in Azure to the new structure without losing the data inside it. I know about the entity framework DB strategics, but didn't saw anything that saves the data.

Thanks for your help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:57:41.727

以下是从 SQL Azure 导出到 blob 存储的说明。 [http://msdn.microsoft.com/en-us/library/windowsazure/hh335292.aspx#Export](http://msdn.microsoft.com/en-us/library/windowsazure/hh335292.aspx#Export)

正如 rjovic 所说，修改实体并不意味着丢失数据。您可以使用代码优先[迁移](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)将数据从旧实体移动到新实体。

# sql-server-2008 - SQL Server 2008 trigger to HTML5 UI when table updated

> ID：12111422
> 
> 赞同：0
> 
> 时间：2012-08-24T14:32:51.393
> 
> 标签：sql-server-2008, triggers

Anybody got some advise on how I should tell my HTML5/JScript/jQuery UI that a table has been updated after a button has triggered a large stored procedure in my SQL Server 2008 database which can take up to 1 minute to complete.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:25:25.777

我会考虑使用带有 External Activator 或 SqlNotifications 的服务代理，这将使您的应用程序能够知道底层架构何时发生更改，而无需轮询更改。

外部激活[链接](http://www.databasejournal.com/features/mssql/article.php/3927171/SQL-Server-Service-Broker---External-Activation.htm)

SqlNotification[链接](http://msdn.microsoft.com/en-us/library/t9x04ed2.aspx)

# haskell - GHCi instructions from the command line

> ID：12111423
> 
> 赞同：4
> 
> 时间：2012-08-24T14:32:56.057
> 
> 标签：haskell, command-line

In the shell you can string commands together, separated by a semicolon:

```
cd ../haskell; rm ./foo; ghc foo.hs; cd ../original_directory 
```

It would be great if you could do a similar thing for command-line arguments for ghci, e.g.

```
ghci Foo.hs; a <- getFoo; print a 
```

Is this possible?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T15:21:49.020

您可以`ghc -e`为此使用：

```
sorghum:~/programming% cat test.hs
getFoo = getLine
sorghum:~/programming% ghc test.hs -e 'do { a <- getFoo; print a }'
oenuth
"oenuth" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:40:03.550

您可以在静默模式下运行 ghci 并通过其标准输入传递指令：

> $ cat > ghciPipeTest.hs
> getFoo = return 37 :: IO Int
> $ ghci -v0 ghciPipeTest.hs <<< ' getFoo >>= print '
> 37
> $

或者

> $ ghci -v0 ghciPipeTest.hs <<< $' a <- getFoo \n print a '

（假设您使用类似 bash 的外壳。它也适用于引号内的实际换行符）

当然，它也可以在非静音模式下工作，只是输出看起来有点奇怪：

> $ ghci ghciPipeTest.hs <<< $' a<-getFoo \n print a '
> GHCi，版本 7.4.1: [http://www.haskell.org/ghc/](http://www.haskell.org/ghc/) :? 寻求帮助
> 加载包 ghc-prim ... 链接 ... 完成。
> 加载包 integer-gmp ... 链接 ... 完成。
> 正在加载包库...链接...完成。
> [1 of 1] 编译 Main（ghciPipeTest.hs，解释）
> 好的，加载的模块：Main。
> *Main> *Main> 37
> *Main> 离开 GHCi。

# excel - How to copy cells downwards without overwriting what's under it?

> ID：12111427
> 
> 赞同：0
> 
> 时间：2012-08-24T14:33:09.130
> 
> 标签：excel, vba

[https://dl.dropbox.com/u/3327208/Excel/copydown.xlsx](https://dl.dropbox.com/u/3327208/Excel/copydown.xlsx)

This is the sheet if you can't view dropbox. ![enter image description here](../Images/3cadc73dbfd4654c4fc0f6d28b2992ec.png)

This is the workbook. What I'm looking to do is where it shows 3M, copy the title of the company down to where it shows Total in Column A, and do the same with the next company.

How do I do this in Excel VBA? I know I can use the last row, but it's not exactly the best way for this I believe, because the original version will have over 300 different companies.

Here is the original code I am using for now. Without the extra bits added in.

Option Explicit

```
Sub Import()

    Dim lastrow As Long
    Dim wsIMP As Worksheet 'Import
    Dim wsTOT As Worksheet 'Total
    Dim wsSHI As Worksheet 'Shipped
    Dim wsEST As Worksheet 'Estimate
    Dim wsISS As Worksheet 'Issued
    Dim Shift As Range

    Set wsIMP = Sheets("Import")
    Set wsTOT = Sheets("Total")
    Set wsSHI = Sheets("Shipped")
    Set wsEST = Sheets("Estimate")
    Set wsISS = Sheets("Issued")

    With wsIMP

        wsIMP.Range("E6").Cut wsIMP.Range("E5")
        wsIMP.Range("B7:G7").Delete xlShiftUp

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:49:24.950

只要没有您不想覆盖的公式...

**编辑**- 更新以设置基于 B 列末尾的原始范围

```
Sub Macro1()
    Dim sht as WorkSheet

    Set sht = ActiveSheet

    With sht.Range(sht.Range("A7"), _
                   sht.Cells(Rows.Count, 2).End(xlUp).Offset(0, -1))

        .SpecialCells(xlCellTypeBlanks).FormulaR1C1 = "=R[-1]C"
        .Value = .Value

    End With    
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T15:13:34.040

马特，几个月前我有一个很棒的功能，但我忘了复制到我的图书馆。然而，我已经做了一个很好的模型来模拟我以前的东西。（出于某种原因，我使用它来填写数据透视表中的条目）。

不管怎样，就在这里。您可能需要对其进行调整以满足您的确切需求，我并不是说它目前不容易出现任何错误，但这应该是一个很好的开始。

**编辑**=我已经更新了我的代码帖子以集成到您的代码中，以使您更轻松。

```
 Sub Import()

    Dim lastrow As Long
    Dim wsIMP As Worksheet, wsTOT As Worksheet 'Total
    Dim wsSHI As Worksheet, wsEST As Worksheet 'Estimate
    Dim wsISS As Worksheet, Shift As Range

    Set wsIMP = Sheets("Import")
    Set wsTOT = Sheets("Total")
    Set wsSHI = Sheets("Shipped")
    Set wsEST = Sheets("Estimate")
    Set wsISS = Sheets("Issued")

    With wsIMP

        .Range("E6").Cut .Range("E5")
        .Range("B7:G7").Delete xlShiftUp

        Call FillDown(.Range("A1"), "B")

        '-> more code here

    End With

End Sub

Sub FillDown(begRng As Range, col As String)

Dim rowLast As Long, rngStart As Range, rngEnd As Range

rowLast = Range(col & Rows.Count).End(xlUp).Row
Set rngStart = begRng

Do

    If rngStart.End(xlDown).Row < rowLast Then
        Set rngEnd = rngStart.End(xlDown).Offset(-1)
    Else
        Set rngEnd = Cells(rowLast, rngStart.Column)
    End If

    Range(rngStart, rngEnd).FillDown
    Set rngStart = rngStart.End(xlDown)

Loop Until rngStart.Row = rowLast

End Sub

enter code here 
```

# rendering - Distributed rendering in a CAVE system

> ID：12111429
> 
> 赞同：2
> 
> 时间：2012-08-24T14:33:11.003
> 
> 标签：rendering, distributed-computing

I am currently working with CAVE systems and I'm looking into hooking up a pre-exisiting game engine in one. I know this is possible through Unity and the Unreal Engine as there is already research out there showcasing that it has been done.

Right now, I have not decided upon one game engine to use and I'm currently looking around and researching if it is possible with the likes of CryEngine and Valve's Source Engine. The one issue that I am going to face, however, is getting the image to correctly render across all four of the monitors / screens.

Thusly, as a result I have two questions: 1.Does anyone know of any good research / books on distrubuted rendering? It doesn't need to be specificly for games, just the topic in general would be very useful 2.Does anyone know if other developers have managed to get Source and the CryEngine to run in a CAVE system? Through all my research I haven't been able to find anything on this, but then my google skills aren't the greatest.

If anyone could spare the time to answer these questions, I'd be extremely greatful.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:43:21.883

答案为时已晚，但仍然，您可能想看看

*   均衡器：http: [//www.equalizergraphics.com](http://www.equalizergraphics.com)
*   [冰： http](http://icet.sandia.gov) ://icet.sandia.gov
*   Chromium（以及相关出版物、网站中引用的更多内容）

# javascript - Is it possible to create computer macros (keyboard events and such) using JavaScript?

> ID：12111431
> 
> 赞同：0
> 
> 时间：2012-08-24T14:33:14.613
> 
> 标签：javascript, macros, automation, autohotkey

I could not find useful results because of confusion with programming macros (like where Lisp shines). Can you configure computer macros such as 'send key input to a window' using JavaScript?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:46:30.570

子窗口可以从其父窗口或打开器窗口调用函数。因此，您可以通过在父窗口上创建函数来模仿这种行为，例如

```
function acceptKey(val) {
   alert(val);
} 
```

然后在子窗口上您可以调用该函数

```
window.parent.acceptKey("Test"); // If iframe
//or if new window
window.opener.acceptKey("Test2"); 
```

在彼此不相关的窗口上然后没有。

# stringstream - How to return next string without >> with stringstream?

> ID：12111434
> 
> 赞同：1
> 
> 时间：2012-08-24T14:33:24.047
> 
> 标签：stringstream

Instead of:

```
stringstream szBuffer;
szBuffer>>string;
myFunc(string); 
```

How do I do like:

```
muFunc(szBuffer.NextString()); 
```

I dont want to create a temp var just for passing it to a function.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:57:31.480

如果您想读取整个字符串：

```
// .str() returns a string with the contents of szBuffer
muFunc(szBuffer.str());
// Once you've taken the string out, clear it
szBuffer.str(""); 
```

如果要提取下一行（直到下一个 \n 字符），请使用[istream::getline](http://www.cplusplus.com/reference/istream/istream/getline/)：

```
// There are better ways to do this, but for the purposes of this
// demonstration we'll assume the lines aren't longer than 255 bytes
char buf[ 256 ];
szBuffer.getline(buf, sizeof(buf));
muFunc(buf); 
```

getline() 也可以将分隔符作为第二个参数（默认为 \n），因此您可以逐字阅读。

# ruby-on-rails - Multisite application in Rails (like shopify.com)

> ID：12111438
> 
> 赞同：1
> 
> 时间：2012-08-24T14:33:50.597
> 
> 标签：ruby-on-rails, ruby, shopify

I would like create web app like shopify.com. User can pickup subdomain(or domain), theme and have own store.

How can I do this? Create main application, deploy it automatically like new standalone version and update it via git?

I'm using Rails 3. Thanks for your advice.

* * *

Based on replies: When I choose to use only one application (without multiple instances) and give user his subdomain, it will looks like their own website. But everything will be in one database (It's good idea?). And how can I have multiple themes in Rails app?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T15:55:07.150

看看[LocomotiveCMS](https://github.com/locomotivecms/engine)，特别是[路由系统](https://github.com/locomotivecms/engine/blob/master/lib/locomotive/routing.rb)。Locomotive 实际上在单个 Rails 应用程序中托管多个站点。它通过在请求 URL 进入时检查请求 URL 并使用设置`current_site`为处理域的站点设置变量来做到这一点。那么这`current_site`实际上只是一个对象，其中包含正在服务的特定站点的所有页面、内容、设置等。

因此，要回答您的问题，我认为一个好的解决方案是让您的 Rails 应用程序能够根据域提供多个站点。这并不难，而且对我来说，它似乎不如尝试自动部署应用程序的新实例那么脆弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:16:27.660

到目前为止，我已经了解，您想让您的用户拥有自己的子域，不同的主题，但功能是一样的。用户只需要有自己的感觉。

当然，您需要有一个支持多个子域的应用程序。快速谷歌搜索给了我 [ [http://37signals.com/svn/posts/1512-how-to-do-basecamp-style-subdomains-in-rails](http://37signals.com/svn/posts/1512-how-to-do-basecamp-style-subdomains-in-rails) ]。也许你可以从这里得到一些见解。

例如，如果您的服务是`http://www.myfi.com`，一个简短的想法可以是：

1.  当客户注册时，您应该让他选择他的子域。并且新创建的帐户将通过 url 与此子域相关联。说，`http://customer1.myfi.com`。
2.  您应该注册域`*.myfi.com`，以便世界上任何人都可以使用`anysubdomain.myfi.com`，它会出现在您的应用程序中。
3.  然后从 url 部分，您应该识别`customer1`正在使用的子域 ( )，并且需要在 session.xml 中设置它。
4.  现在，当有人尝试登录时，您必须**在该子域帐户的上下文中验证该帐户**。
5.  实际上，以下所有操作都需要在子域帐户的上下文中处理。

刚刚尝试收集一下这里的实现。如果您对某些特定的事情感到困惑，也请分享。

* * *

**编辑：**

每当您考虑多个主题时，您必须有完全由 css 和 js 驱动的简单设计。这些`app/view`文件应该只包含带有类名或 ID 的内容和 HTML 节点。

一般来说，UI 设计师可以就如何制作这种主题机制提出更多有用的想法。但我能感觉到的是，根据客户选择的主题，你必须加载不同的 css 和 js。

实际上，这些策略可以无限复杂和可扩展，但从简单的事情开始总是明智的。然后想法会自动演变成更好的想法。

# android - 如果活动停止，则重新创建传递给 getIntent() 的内容

> ID：12111448
> 
> 赞同：5
> 
> 时间：2012-08-24T14:34:02.187
> 
> 标签：android, android-intent

当我通过 Intent BundleExtra 创建 Activity 时，我将布尔值传递给它。现在查看[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，如果我的活动停止（`onStop`），那么另一个应用程序需要内存，因此应用程序进程被终止，然后用户导航到活动（`onCreate`）。最后一个 onCreate 会包含我通过的原始布尔值吗？我假设如果我想保存该布尔值，我需要将它保存在 中`OnSaveInstanceState`，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-05T12:32:15.323

实际上，当您的活动重新创建时，仍会使用原始意图。 `getIntent()`将返回与首次创建时相同的意图。但是，如果您有其他数据要在重新创建活动时保留，则需要使用`saveInstanceState()`. 您可以通过简单地旋转设备并运行活动来验证这一点，因为它将以相同的意图被销毁和重新创建。有关详细信息，请参阅[此处](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:37:59.283

出于这个原因，我会使用 onPause() （来自文档）

> 请注意，将持久数据保存在 onPause() 而不是 onSaveInstanceState(Bundle) 中很重要，因为后者不是生命周期回调的一部分，因此不会在其文档中描述的所有情况下都被调用。

`onCreate()`然后从数据库或您存储它的其他资源中再次读取它。

因此，根据布尔值的重要性，您将使用所需的保存机制..用于持久状态：http: [//developer.android.com/reference/android/app/Activity.html#SavingPersistentState](http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState)

对于简单文本等 UI 状态，选择使用`onSaveInstanceState`如下所述：[Saving Android Activity state using Save Instance State](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

总结一下：**当进程终止时 boolean =** *如果没有保存*就消失:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:53:54.923

Mauno V. 是对的，在您的情况下，您必须使用 onPause()

事实是 onSaveInstanceState(Bundle bundle) 旨在保存**当前实例中的**状态。因此，当您的应用程序被杀死时，保存的包也会

您可以使用 SharedPreferences 来保存您的 boolean ：

```
SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
sharedPreferences.edit().putBoolean("hiBoolean", booleanValue).commit(); 
```

并在您的 onCreate 上检索它：

```
Boolean hiBoolean = sharedPreferences.getBoolean("hiBoolean", true); 
```

# mysql - mysql语法不等于多个值

> ID：12111451
> 
> 赞同：30
> 
> 时间：2012-08-24T14:34:20.637
> 
> 标签：mysql

我正在尝试为以下情况获取正确的语法？

```
SELECT * 
FROM wp_posts AS p 
WHERE post_type = 'post' 
AND post_status = 'publish' 
AND ID <> 5616,1095,1357,271,2784,902
ORDER BY post_title DESC 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-24T14:35:04.213

而不是`<>`，您可以使用`NOT IN (5616,1095...)`

```
SELECT * 
FROM wp_posts AS p 
WHERE post_type = 'post' 
AND post_status = 'publish'
AND ID NOT IN (5616,1095,1357,271,2784,902)
ORDER BY post_title DESC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T14:37:32.240

运算符比较`<>`单个左右参数以查看它们是否不相等。在您的情况下，您需要检查一个左手参数（我假设）以查看`ID`右侧是否没有值。因此你应该使用`ID NOT IN (5616,1095,1357,271,2784,902)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T14:36:19.737

```
SELECT * FROM wp_posts AS p WHERE post_type = 'post' 
AND post_status = 'publish' AND 
ID NOT IN (5616,1095,1357,271,2784,902) ORDER BY post_title DESC 
```

# binding - 如何绑定到相对源

> ID：12111454
> 
> 赞同：0
> 
> 时间：2012-08-24T14:34:40.137
> 
> 标签：binding, relativesource

当我尝试将 DataGrid 中的复选框绑定到 View Model 的公共属性（即用户控件的数据上下文）时，您是否看到我的代码有任何问题。

谢谢，

江当

```
 <Custom:DataGrid    ItemsSource="{Binding Customers}" 
                                AlternatingRowBackground="AliceBlue"  
                                AutoGenerateColumns="False" 
                                MaxHeight="250"                          
                                CanUserAddRows="False" 
                                CanUserDeleteRows="False" >
                <Custom:DataGrid.Columns>                       
                    <Custom:DataGridTemplateColumn>
                        <Custom:DataGridTemplateColumn.Header>
                            <WrapPanel>
                                <CheckBox IsChecked="{Binding  Path=IsCheckAll, RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}}, 
                                    UpdateSourceTrigger=PropertyChanged}"/>                                                                       
                                <TextBlock>Select<LineBreak/>UnSelect</TextBlock>
                            </WrapPanel>                               
                        </Custom:DataGridTemplateColumn.Header>
                        <Custom:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox IsChecked="{Binding Path=Selected, Mode=TwoWay}"/>
                            </DataTemplate>
                        </Custom:DataGridTemplateColumn.CellTemplate>
                    </Custom:DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:38:52.807

您尝试查找的用户控件位于逻辑树中（我假设它不在代码片段中）。绑定在模板中，这意味着它是可视化树的一部分。由于他们没有连接，您无法找到它。

# javascript - 如何操作 Google-Tasks 添加的节点？

> ID：12111455
> 
> 赞同：1
> 
> 时间：2012-08-24T14:34:44.730
> 
> 标签：javascript, google-chrome, google-chrome-extension, content-script, google-tasks

我目前正在尝试更改此 Google-tasks 小工具的样式元素：

```
https://mail.google.com/tasks/ig 
```

使用 chrome 内容脚本。

在此示例中，我将删除底部的工具栏。因为谷歌正在使用 javascript 生成 HTML，并将其放在 iframe 中。我需要使用这段代码：

```
document.getElementsByTagName('iframe')[0].contentWindow.document.getElementById(':1.ft').style.display = 'none' 
```

当您从开发人员控制台运行此代码时，它会隐藏工具栏。但它不能用作内容脚本。

我认为这是因为代码是在页面准备好之前运行的。所以我尝试使用事件监听器：

```
document.addEventListener("DOMContentLoaded", function () {
document.getElementsByTagName('iframe')[0].contentWindow.document.getElementById(':1.ft').style.display = 'none'
}, false); 
```

但这也没有用。还尝试了事件侦听器“domready”和“load”。但他们都没有工作。

我如何获得该元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T02:34:50.260

在这种情况下，您只需确保将此样式规则应用于适当的 iframe，而不必担心何时加载：

```
#:1.ft {display: none !important;} 
```

(^_^)
**但是，**对于带有`src="javascript: ...`.

* * *

在更一般的情况下。如果该节点（或其包含的 iframe）是由 AJAX 加载的，那么它无疑会在“domready”甚至“加载”之后很长时间出现。
久经考验的解决方案是轮询元素：

```
var waitForElementIntrvl = setInterval (checkForElement, 333);

function checkForElement () {
    var firstIframe     = document.querySelector ("iframe");
    if (firstIframe) {
        var targElement = firstIframe.contentWindow.document.getElementById (':1.ft');
        if (targElement) {
            targElement.style.display = 'none';
            clearInterval (waitForElementIntrvl);
        }
    }
} 
```

### 然而：

Google Chrome 内容脚本仍然不能很好地与 iframed DOM 配合使用。因此，为了使该代码能够工作，必须将其注入目标页面。最终的内容脚本代码变为：

```
function userscriptMain () {
    var waitForElementIntrvl = setInterval (checkForElement, 333);

    function checkForElement () {
        var firstIframe     = document.querySelector ("iframe");
        if (firstIframe) {
            var targElement = firstIframe.contentWindow.document.getElementById (':1.ft');
            if (targElement) {
                targElement.style.display = 'none';
                clearInterval (waitForElementIntrvl);
            }
        }
    }
}

addJS_Node (null, null, userscriptMain);

function addJS_Node (text, s_URL, funcToRun, runOnLoad) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    if (runOnLoad) {
        scriptNode.addEventListener ("load", runOnLoad, false);
    }
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode);
} 
```

# java - 使用语言解析编辑 XML 节点 - Java

> ID：12111456
> 
> 赞同：1
> 
> 时间：2012-08-24T14:34:46.617
> 
> 标签：java, xml-parsing, stax, stanford-nlp

我希望有人可以帮助我：首先，我仍然是 Java 的新手，但我想会慢慢提高。

所以，我有一个带有语言注释的 XML 文件，我想访问一个特定节点以 a) 对其执行模式匹配操作 b) 对匹配项执行进一步操作

这是文本示例，显示节点：

```
 <token id="13">
        <word>.</word>
        <lemma>.</lemma>
        <CharacterOffsetBegin>57</CharacterOffsetBegin>
        <CharacterOffsetEnd>58</CharacterOffsetEnd>
        <POS>.</POS>
        <NER>O</NER>
      </token>
    </tokens>
    <parse>(ROOT (S (NP (DT The) (NN world)) (VP (VBZ owes) (NP (DT all)) (NP (NP (NP (PRP$ its) (ADJP (RB onward) (NP (NNS impulses)) (PP (TO to))) (NNS men)) (ADJP (RB ill))) (PP (IN at) (NP (NN ease))))) (. .))) </parse>
    <basic-dependencies>
      <dep type="det">
        <governor idx="2">world</governor>
        <dependent idx="1">The</dependent>
      </dep>
      <dep type="nsubj">
        <governor idx="3">owes</governor>
        <dependent idx="2">world</dependent>
      </dep>
      <dep type="iobj">
        <governor idx="3">owes</governor>
        <dependent idx="4">all</dependent>
      </dep>
      <dep type="poss">
        <governor idx="9">men</governor>
        <dependent idx="5">its</dependent>
      </dep> 
```

（所以在这里，我有一些文本的语言注释，例如一些标记，词性（POS），命名实体识别（NER），以及句法/依赖解析。这实际上是Stanford CoreNLP工具包的输出应用于文本..没有添加整个文件，因为它很大）

我的问题是：根据我一直在阅读的内容，StaX 解析器似乎是访问文件并使用我的操作生成新文件的好方法。这是正确的吗？我的问题还包括，我可以使用 StaX 进行模式匹配操作吗？

提前一千感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-12T08:25:18.783

该表达式`(ROOT ...)`采用称为 S 表达式的格式。Java SE 中的任何内容都无法解析它，因此您必须做其他事情。

当然，您必须使用 StAX（或其他东西）来解析 xml 文件。这样，您将获得上述字符串，作为字符串。您将不得不对这些字符串运行另一个解析器以获取它们的结构。

初步的谷歌搜索给了我 [http://rosettacode.org/wiki/S-Expressions#Java](http://rosettacode.org/wiki/S-Expressions#Java)它基于 [http://jfkbits.blogspot.jp/2008/05/thoughts-on-s-expression-parser.html](http://jfkbits.blogspot.jp/2008/05/thoughts-on-s-expression-parser.html) . 但是您可以自己使用“Java 中的 S-expression parser”之类的搜索词并查看前几个结果以查看适合您的内容。

# c# - ASP.NET MVC 中的建模最佳实践

> ID：12111462
> 
> 赞同：3
> 
> 时间：2012-08-24T14:34:53.290
> 
> 标签：c#, asp.net-mvc, model-view-controller

我有两个与在 mvc 项目中管理模型的最佳方法有关的问题。

*   我可以使用构造函数来初始化我的模型（显然与它的相关逻辑）？
*   为此，最好使用“构造方法”，还是在创建新模型实例后使用控制器调用的扩展方法？

例如，我有一个联系表格的模型。用户可以是三种角色：匿名、客户或供应商，他可以在每个状态下提交表单。我唯一想要的是，如果用户已登录（如客户角色或供应商角色），我想在文本框中预加载他的数据。为此，我编写了以下代码：

```
using System;
using System.Web;
using System.Web.Security;
using DrOkR2.Bll.Managers;

namespace DrOkR2.WebFront.Models
{

    public class RequestModel
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Phone { get; set; }
        public string Email { get; set; }
        public string Prov { get; set; }
        public string Request { get; set; }
        public bool UsageConditions { get; set; }

        public RequestModel()
        {
            if (!HttpContext.Current.User.Identity.IsAuthenticated) return;
            if (HttpContext.Current.User.IsInRole("Client"))
            {
                var guid = (Guid)Membership.GetUser().ProviderUserKey;
                var manager = new ClientManager();
                var client = manager.GetClient(guid);
                client.Email = Membership.GetUser().Email;

                FirstName = client.FirstName;
                LastName = client.LastName;
                Email = client.Email;
                Phone = client.Phone;
                Prov = client.Prov;
            }
            else if (HttpContext.Current.User.IsInRole("Supplier"))
            {
                var guid = (Guid)Membership.GetUser().ProviderUserKey;
                var manager = new SupplierManager();
                var supplier = manager.GetSupplier(guid);
                supplier.Email = Membership.GetUser().Email;

                FirstName = supplier.FirstName;
                LastName = supplier.LastName;
                Email = supplier.Email;
                Phone = supplier.PrimaryPhone;
                Prov = supplier.BusinessProv;
            }
        }
    }
} 
```

它工作得很好，但我的问题是：我是否使用了最好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:41:17.200

不，您不应该依赖`HttpContext`或访问模型中的任何数据。您正在为模型绑定的各种问题敞开心扉（更不用说紧密耦合了）。

在 Controller 或 Controller 使用的存储库中设置模型属性。

```
public ActionResult Contact(string id)
{
   var client = _repository.GetClient(id);
   var model = new RequestModel(){ /* set your properties from client */ };

   return View(model);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:41:56.117

根据我的喜好，您的视图模型中有太多的业务逻辑。您还将视图模型与您的视图模型耦合，`HttpContext`这不是一个好主意。

这种初始化属于控制器，例如

```
public class RequestModel
{
    public string FirstName { get; set; }
    ....
}

public ActionResult ContactForm(...)
{
    var contactModel = new RequestModel();  
    if (User.IsInRole("Client"))
    {
        ...
    } 
    else if (User.IsInRole("Supplier"))
    {
        ...
    }

    return View(contactModel);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:12:49.323

我已经意识到了这一点。为了完成线程，我把它放在这里。有什么建议吗？模型：

```
public class RequestModel
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Phone { get; set; }
    public string Email { get; set; }
    public string Prov { get; set; }
    public string Request { get; set; }
    public bool UsageConditions { get; set; }

    public RequestModel(DrOkUser user )
    {

        if (user == null) return;
        var type = user.GetType().Name;         //Client o Supplier
        Email = user.Email;
        if (type == "Client")
        {
            FirstName = ((Client)user).FirstName;
            LastName = ((Client)user).LastName;
            Phone = ((Client)user).Phone;
            Prov = ((Client)user).Prov;
        }
        if (type == "Supplier")
        {
            FirstName = ((Supplier)user).FirstName;
            LastName = ((Supplier)user).LastName;
            Phone = ((Supplier)user).PrimaryPhone;
            Prov = ((Supplier)user).BusinessProv;
        }
    }
} 
```

控制器方法：

```
public class HomeController : BaseController
{
 public ActionResult Assistance()
    {
        var user = GetCurrentUser();
        var mdl = new RequestModel(user);
        return View(mdl);
    }
} 
```

和基本控制器：

```
public class BaseController : Controller
{
 public DrOkUser GetCurrentUser()
    {
        if (!HttpContext.User.Identity.IsAuthenticated) return null;
        DrOkUser user = null;
        var guid = (Guid)Membership.GetUser().ProviderUserKey;
        if (HttpContext.User.IsInRole("Client"))
             user = ClientManager.GetClient(guid);
        if (HttpContext.User.IsInRole("Supplier"))
            user = SupplierManager.GetSupplier(guid);

        user.Email = Membership.GetUser().Email;            
        return user;
    } 
```

}

# jaxb - 在 jaxb 解组中确保对象身份

> ID：12111469
> 
> 赞同：1
> 
> 时间：2012-08-24T14:35:03.790
> 
> 标签：jaxb, eclipselink, resteasy, moxy

设置如下。我在 JBoss 6.1.0.Final 中使用 MOXy 2.4.0 作为 jaxb 提供程序。RESTEasy 用作 JAX-RS 提供程序。当一个实体被解组时，它多次引用同一个实体（相同的 id），该实体的不同实例被初始化。为了确保两个引用都指向同一个实例，我必须自己设置字段。是否有任何方法可以确保将两个相等的实体解组到同一个对象实例？

谢谢，塞巴斯蒂安

# android - 如何确定第三方应用支持哪些 Intent？

> ID：12111476
> 
> 赞同：3
> 
> 时间：2012-08-24T14:35:14.553
> 
> 标签：android, android-intent, google-play

我想调用第三方应用程序来增强我自己的。例如，我想允许我的应用程序的用户使用像[CamScanner](https://play.google.com/store/apps/details?id=com.intsig.camscanner&hl=en)这样的程序来捕获图像作为相机的替代品。我希望能够推荐推荐的第三方应用程序，这些应用程序可以很好地作为替代方案，为我的应用程序带来更好的功能。

安装后是否有公共清单，或者更好的是在 Play 市场页面中显示`Intents`它支持的应用程序的一些指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:41:54.190

您可以从系统设置/应用程序屏幕了解活动名称。

无论如何，您都可以调用他们的主要活动，如下所示：

```
startActivity(getPackageManager().getLaunchIntentForPackage("com.theirpackage")); 
```

现在，没有明确记录的非主要活动是另一回事。即使您获得清单文本，这也可能会或可能不会帮助您找出调用协议；该活动可能依赖于清单未提及的意图额外内容。

无论如何，您永远不知道应用程序中的活动是否依赖于特定的调用顺序。除非为第三方重用明确构建了活动，否则您永远不知道它是否已准备好重用。我可以轻松地设想一个活动依赖于在另一个活动中初始化的静态变量的场景，该活动总是首先在应用程序的正常流程中启动。如果您无序调用相关活动，请为崩溃做好准备。

也就是说，获取应用程序的 XML 清单相当容易。首先，获取一个带有 Google Market 的模拟器图像（四处搜索，这些都在网络上），或者一个有根设备。从市场安装应用程序。`ADB`使用Eclipse从设备中提取 APK 。然后使用 将`apktool`APK 拆开。它将清单反编译为可读的 XML 形式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:45:19.643

有[http://openintents.org](http://openintents.org) - 如果它在那里列出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T09:34:27.513

对于 CamScanner 应用程序，它存在一个公共 API。 [https://dev.camscanner.net/](https://dev.camscanner.net/)

它需要签署协议。

# yql - 使用自定义 JavaScript YQL 开放数据表时，“count”字段始终为“1”

> ID：12111477
> 
> 赞同：0
> 
> 时间：2012-08-24T14:35:18.243
> 
> 标签：yql

YQL 返回在其 XML 输出中检索到的记录数：

```
<query xmlns:yahoo="http://www.yahooapis.com/v1/base.rng"
    yahoo:count="2" yahoo:created="2012-08-24T14:02:32Z" yahoo:lang="en-US">
    <diagnostics> 
```

但是我一直在尝试使用我自己的自定义[开放数据表](http://developer.yahoo.com/yql/guide/yql-opentables-chapter.html)，至少使用`execute`包含 JavaScript 的块来创建响应，并且无论我如何创建响应，当我使用表进行查询时，该`count`字段始终设置为`1`.

我还在文档中进行了挖掘，似乎找不到任何解决此问题的方法。

**这是设计使然吗？它是一个错误吗？我错过了什么明显的东西吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:49:33.963

这通常是由于*只返回一个 result 引起*的，这并不奇怪。根据我自己的经验，最常见的原因是忘记指定`itemPath`适合`<select>`.

拿下面的例子，看看`response.object`结构和`itemPath`组合如何给出查询结果。

### 没有`itemPath`

```
<select itemPath="" produces="XML">
    <execute>
        <![CDATA[
        response.object = <letters>
            <letter>A</letter>
            <letter>B</letter>
            <letter>C</letter>
        </letters>
        ]]>
    </execute>
</select> 
```

生成类似于以下内容的查询结果：

```
<query xmlns:yahoo="http://www.yahooapis.com/v1/base.rng"
    yahoo:count="1" yahoo:created="…" yahoo:lang="en-US">
    <results>
        <letters>
            <letter>A</letter>
            <letter>B</letter>
            <letter>C</letter>
        </letters>
    </results>
</query> 
```

### 和`itemPath="letters"`

```
<select itemPath="letters" produces="XML">
…
</select> 
```

产生与前一个结果相同的查询结果。

```
<query xmlns:yahoo="http://www.yahooapis.com/v1/base.rng"
    yahoo:count="1" yahoo:created="…" yahoo:lang="en-US">
    <results>
        <letters>
            <letter>A</letter>
            <letter>B</letter>
            <letter>C</letter>
        </letters>
    </results>
</query> 
```

### 和`itemPath="letters.letter"`

```
<select itemPath="letters.letter" produces="XML">
…
</select> 
```

请注意，现在，路径指定了`letter`项目的集合。这会产生类似于以下内容的查询结果：

```
<query xmlns:yahoo="http://www.yahooapis.com/v1/base.rng"
    yahoo:count="3" yahoo:created="…" yahoo:lang="en-US">
    <results>
        <letter>A</letter>
        <letter>B</letter>
        <letter>C</letter>
    </results>
</query> 
```

# macos - 如何在bash脚本中用冒号查找和替换正斜杠？

> ID：12111479
> 
> 赞同：1
> 
> 时间：2012-08-24T14:35:24.387
> 
> 标签：macos, bash, applescript

我现在正在尝试什么：

```
dir=$(pwd)
dir=${$dir//\//:} 
```

但这由于某种原因不起作用。

这样做的重点是将 bash 路径转换为 ​​applescript 路径，而无需在其中对路径进行硬编码。

我基本上试图做与此相反的事情： [https ://apple.stackexchange.com/questions/4938/how-to-change-applescript-path-to-a-terminal-style-path](https://apple.stackexchange.com/questions/4938/how-to-change-applescript-path-to-a-terminal-style-path)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:40:07.160

您的语法有点偏离，不要*在*构造`$`中的变量上使用：*`${}`*

 *```
dir=${dir//\//:} 
```*

# jquery - 悬停时动画（）影响底层链接

> ID：12111480
> 
> 赞同：0
> 
> 时间：2012-08-24T14:35:25.633
> 
> 标签：jquery, hover, jquery-animate

我正在创建一种效果，将鼠标悬停在图像上并且不透明度逐渐消失以显示指向网页其他部分的底层链接。

这是 jQuery 脚本：

```
$(document).ready(function(){
   $("#columnRight,#columnRight2,#columnRight3,#columnRight4").hover(function() {
       $(this).stop().animate({opacity: "0.2"}, 'slow');
   },
   function() {
      $(this).stop().animate({opacity: "1"}, 'slow');
   });
}); 
```

它针对以下 HTML：

```
<div id="columnRight">
    <a href="syllabus.html">syllabus</a>
</div> 
```

＆CSS：

```
 #columnRight {
    width: 735px;
    height: 205px;
    margin: 5px 10px 10px 5px;
    float: left; 
    background: url('images/books.jpg');    
} 
```

效果很好，除了两点：

> 1.  在任何动画发生之前，该链接通过图像可见。我希望它在悬停效果之前不可见。
>     
>     
> 2.  链接继承了动画效果，所以当我将鼠标悬停在图像上时，链接会随着背景图像消失。

我一直在研究几种可能的解决方案，但在深入了解其中任何一个之前，我想我会问：

> 1.  创建另一个包含链接的 div 并将其放置在带有背景图像的 div 下方。这样，当我 时`.hover`，它将显示下面的链接。
>     
>     
> 2.  编写另一个在图像淡出时淡入链接的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:06:32.403

您可以使用 z-index 和绝对定位来使其工作。这是一个 jsFiddle 演示：http: [//jsfiddle.net/HMxdt/10/](http://jsfiddle.net/HMxdt/10/)

```
$("#container").hover(function() {
   $(this).find(".overlay").stop().animate({opacity: "0.2", zIndex:"-1"}, 'fast');
   },
   function() {
  $(this).find(".overlay").stop().animate({opacity: "1", zIndex:"1000"}, 'fast');
}); 
```

使用 .fadeTo()：http: [//jsfiddle.net/2akwx/1/](http://jsfiddle.net/2akwx/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:42:08.767

您将它与 div 链接起来，而不是实际的锚元素。

```
$("#columnRight a,#columnRight2 a,#columnRight3 a,#columnRight4 a").hover(function() {
     // etc
}); 
```

[jsFiddle 演示](http://jsfiddle.net/CWabK/)

另附注：您希望链接事先是-不可见的？怎么会有人知道何时/如何将鼠标悬停在它上面！

# php - 如何判断 Magento 支付桥的版本以及如何更新

> ID：12111488
> 
> 赞同：0
> 
> 时间：2012-08-24T14:36:03.160
> 
> 标签：php, magento

我们正在尝试找出我们正在运行的 Magento 支付桥的版本。在这种情况下，Payment Bride 不是扩展，它是 Magneto Payment Bridge 应用程序，如果您使用 Magneto Enterprise（我们是），您可以使用它。我们需要尝试弄清楚我们当前正在运行的版本以及是否：

*   在升级到最新版本的 Magento 之前，需要升级到支付桥
*   升级到支付桥很简单，只需在当前运行支付桥的服务器上创建一个新文件夹，然后将新文件放到新文件夹中（值得怀疑，但我们不确定哪种方式）

我已经通过当前支付桥中的文件查找版本信息，并且我已经/正在阅读安装文档，但是没有提到进行升级，只提到如何使用特定的补丁文件修补现有安装.

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:10:38.837

通过“支付桥”你一些扩展？

请参阅：“系统”->“Magento Connect”->“Magento Connect Manager”以获取已安装扩展及其版本的列表。

# user-interface - Access 2010 Web 数据库项目中类似 Ajax 的出现/消失元素

> ID：12111489
> 
> 赞同：0
> 
> 时间：2012-08-24T14:36:04.043
> 
> 标签：user-interface, ms-access, ms-access-2010

我正在尝试提供一项功能，允许用户选择两种不同的成本计算方法：他们可以在数据表上输入年度成本明细（2010 年：10,000 美元，2011 年：12,000 美元等），或者他们可以输入一个固定的年度成本乘以根据他们选择的年数。

如果我正在开发另一种 Web 应用程序，我将使用单选按钮来选择两个不同的选项。一个选项将显示数据表，另一个选项将显示两个文本字段以输入值。但是，我知道您不能在 Access 2010 Web 数据库中使用单选按钮。此外，是否可以根据组合框选择使元素出现和消失？

如果没有，也许我可以有两个不同的组合框选项：“输入年度成本明细”或“输入固定年度成本”，它们会打开正确的相应表单作为弹出窗口。

那么，1）我是否可以让组合框（或理想情况下，单选按钮）触发类似 Ajax 的出现和消失元素，以及 2）如果没有，任何人都可以想到另一种聪明的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:37:40.643

当然，使用选项卡控件可以获得很好的效果。您可以在该选项卡控件上放置控件甚至子表单。

所以，你建立一个这样的屏幕：

![在此处输入图像描述](../Images/ca78d9f8023a5d4e12410e6c40b8ad99.png)

然后，简单地设置第二个选项卡的可见属性 = 否。这将隐藏选项卡（在构建页面之前不要更改它，因为它会隐藏它！（在开发过程中使用属性表隐藏/取消隐藏）。

现在，在列表框的更新后事件中添加一些代码。像这样：

![在此处输入图像描述](../Images/32f20969a0023a4acc77462d31a750d7.png)

在上面，我将选项卡命名为 PYear 和 PFlat。

结果是这样的（这是我插入的动画 gif）：

![在此处输入图像描述](../Images/1872b1ba74a1f6eab75bf426168f36e7.png)

当然，你真的可以直接转储整个“列表框”选择，并使用带有选项卡的这样的屏幕（选项卡是很好的 UI，用户倾向于快速掌握它们）：

![在此处输入图像描述](../Images/df7707350e74bb8d074bf3b5ab7d0cf9.png)

因此，您可以隐藏“一组”控件，而且它确实比编写一堆 JaveScript 的工作和麻烦要少得多。如前所述，您放入每个选项卡的“一组”控件可以是子表单，也可以是连续表单。因此，在这种情况下，作为一个集合的“隐藏”确实很有效。我确实遇到了一些格式问题，发现我必须“开始”时首先显示第二个选项卡（第一个选项卡被隐藏）。如前所述，列表框选择很不错，但可能一开始就使用选项卡。

# symfony - 使用自定义应用程序路径时覆盖 FOSUserBundle layout.html.twig

> ID：12111490
> 
> 赞同：1
> 
> 时间：2012-08-24T14:36:06.663
> 
> 标签：symfony, fosuserbundle

我遵循[了覆盖默认 layout.html.twig 的说明](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_templates.md)，但尽管我的路径似乎正确，但替换模板似乎被忽略了。

`/app/web`我认为这可能是因为 我正在使用自定义应用程序路径（

我已将备用布局放置在`app/web/Resources/FOSUserBundle/views/layout.html.twig`

来源如下：

```
{% extends 'AcmeWebBundle::base.html.twig' %}

{% block content %}
    {% block fos_user_content %}{% endblock %}
{% endblock %} 
```

有什么方法可以检查正在为备用模板检查哪些路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:39:06.507

没关系 - 我清除了开发缓存，现在它正在工作，doh。

# excel - 在保持文件结构的同时强制另存为 XLSM

> ID：12111491
> 
> 赞同：3
> 
> 时间：2012-08-24T14:36:08.573
> 
> 标签：excel, filenames, before-save, vba

所以我正在处理一个 XLTM 文件，我希望用户确保他们保存为 XLSM。当他们点击“保存”时，这工作正常，但我发现当他们点击“另存为”时，文件被保存为“*.xlsm.xlsm”。对于如何确保用户保存为 XLSM，同时将文件名保留为“filename.xlsm”而不是“filename.xlsm.xlsm”，我有点迷失了。

```
 'Action makes sure the user saves as XLSM file type.
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean) 
    Dim FileNameVal As String 
    If SaveAsUI Then 
        FileNameVal = Application.GetSaveAsFilename(, "Excel Macro-Enabled Workbook (*.xlsm), *.xlsm") 
        Cancel = True 
        If FileNameVal = "False" Then 'User pressed cancel
            Exit Sub 
        End If 

        Application.EnableEvents = False 
        ThisWorkbook.SaveAs Filename:=FileNameVal & ".xlsm", FileFormat:=ThisWorkbook.FileFormat 
        Application.EnableEvents = True 
    End If 
End Sub 
```

我认为问题可能是在以下位置写入“.xlsm”：

```
ThisWorkbook.SaveAs Filename:=FileNameVal & ".xlsm", FileFormat:=ThisWorkbook.FileFormat 
```

但是，如果没有在那里写“.xlsm”，我发现该文件反而保存为错误的文件后缀。（例如，如果我的 XLTM 文件名为 Template(File001).xltm，并且用户打开一个新的模板文件，它将保存为 Template(File001)1（相信“1)1”是文件类型）。

这可能是我的代码结构，所以我需要指导如何修改它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T14:27:49.890

问题似乎已经存在，因为模板会在最初实际保存文件之前将文件命名为“Template(1)1”。这改变了 Excel 保存文件的方式，因此在此初始保存和进一步保存（已经包含文件扩展名）之间进行对比的最简单方法是使用 if-then 语句来判断扩展名是否已经存在。

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
Dim FileNameVal As String
If SaveAsUI Then
    FileNameVal = Application.GetSaveAsFilename(, "Excel Macro-Enabled Workbook (*.xlsm), *.xlsm")
    Cancel = True
    If FileNameVal = CStr(False) Then 'User pressed cancel
        Exit Sub
    End If
    Application.EnableEvents = False
        If Right(ThisWorkbook.Name, 5) <> ".xlsm" Then
            ThisWorkbook.SaveAs Filename:=FileNameVal & ".xlsm", FileFormat:=xlOpenXMLWorkbookMacroEnabled
        Else
            ThisWorkbook.SaveAs Filename:=FileNameVal, FileFormat:=xlOpenXMLWorkbookMacroEnabled
        End If
    Application.EnableEvents = True
End If
End Sub 
```

# jquery - 使用jquery单击图像时更改类

> ID：12111493
> 
> 赞同：0
> 
> 时间：2012-08-24T14:36:13.610
> 
> 标签：jquery

单击图像时，我想更改课程内容。

```
<div class="myclass">
Content
</div>
<div class="myclass">
Content
</div>
<div class="myclass">
Content
</div>

<ul>
  <li><img src="image1.jpg" /></li>
  <li><img src="image2.jpg" /></li>
  <li><img src="image3.jpg" /></li>
  <li><img src="image4.jpg" /></li>
  <li><img src="image5.jpg" /></li>
</ul> 
```

在这里，如果我单击第一个图像并像这样增加，我想转到第一个内容。这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:38:57.620

```
$('img', 'ul').on('click', function() {
    $(".myclass").eq($(this).parent('li').index()).show()
                 .siblings('div').hide();
}); 
```

[**小提琴**](http://jsfiddle.net/9URHw/1/)

# java - Tomcat 7 Web 应用程序停止处理请求

> ID：12111495
> 
> 赞同：0
> 
> 时间：2012-08-24T14:36:25.227
> 
> 标签：java, tomcat

我们正在使用 tomcat 7.0.19，用于 jsf(richfaces)、seam、jpa Web 应用程序。

我们注意到大约 2 个月后，网络请求停止处理。

我们正在使用 HTTP/1.1 连接器。堆和 permgen 内存看起来不错。日志中没有内存不足错误。我们使用 jvisualvm 来监控堆、permgen、线程和线程转储，它们看起来都不错。

localhost_access_log 停止更新。连接器端口仍在侦听。

我们重新启动 Tomcat 后，新的请求就可以了。

您能否告知我们应该调查的其他领域（任何额外的追踪）。我们是否应该配置 Request Dumper Filter。

我们应该升级到 tomcat 7.0.29 吗？什么可能导致连接器停止处理端口上的请求？

更多信息：堆（使用了 1/6），PermGen（使用了 1/2）。GC 有效地减少了堆。本地访问日志没有被更新的事实表明请求没有向 Servlet 容器发出。我们正在使用 JPA 连接池，没有注意到任何数据库连接问题。重新启动后，一切正常。

提前致谢。乙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:16:52.153

tomcat 7 的问题：tomcatexpert.com/ask-the-experts/... Apache 错误[链接](http://issues.apache.org/bugzilla/show_bug.cgi?id=53173)#

1.  升级到tomcat 7.0.32
2.  使用 NIO 代替 BIO 连接器。

# mysql - 选择尚未为某些列值创建的记录

> ID：12111500
> 
> 赞同：0
> 
> 时间：2012-08-24T14:36:33.903
> 
> 标签：mysql, sql, many-to-many

有两个表：

```
content_term
    cid | tid
    1 | 1
    1 | 2
    1 | 3
    2 | 4
    2 | 5
    2 | 6

term_group
    tid | gid
    1 | 1
    2 | 2
    3 | 3
    4 | 1
    5 | 2
    6 | 3 
```

如何通过“tid”选择未链接到某个“gid”的“cid”？

**UPD** 我已经尝试过 Adrian 的按 cid 分组的方式：

```
SELECT cid 
FROM   content_term ct 
WHERE  NOT EXISTS (SELECT tid 
               FROM   term_group tg 
               WHERE  tg.tid = ct.tid 
                      AND tg.gid = 4) GROUP BY cid; 
```

并且还尝试了 Adrian 的按 cid 分组的方式：

```
SELECT cid FROM content_term
    LEFT JOIN term_group ON (content_term.tid = term_group.tid AND gid = 4)
    WHERE gid IS NULL GROUP BY cid; 
```

在 "gid" = 3 或任何其他值上 - 他们都返回：

```
cid
1
2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:43:23.330

```
SELECT cid 
FROM   content_term ct 
WHERE  NOT EXISTS (SELECT tid 
                   FROM   term_group tg 
                   WHERE  tg.tid = ct.tid 
                          AND tg.gid = 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:51:34.050

这个：

```
SELECT DISTINCT cid FROM content_term
    JOIN term_group ON (content_term.tid = term_group.tid AND gid = 4); 
```

将所有 cid 映射到 gid 4。我们现在需要所有*不在*此列表中`content_term`的cid。因此，我们在唯一 cid 和刚刚检索到的附加 cid 之间使用 a：*`LEFT JOIN`*

 *```
SELECT unique_cids.cid FROM ( SELECT DISTINCT cid FROM content_term ) AS unique_cids
    LEFT JOIN ( SELECT DISTINCT cid FROM content_term
       JOIN term_group ON (content_term.tid = term_group.tid AND gid = 4) )
           AS attached_cids ON (unique_cids.cid = attached_cids.cid)
    WHERE attached_cids.cid IS NULL; 
```

测试：

```
CREATE TABLE content_term ( cid integer, tid integer );
CREATE TABLE term_group ( tid integer, gid integer );
INSERT INTO content_term VALUES (1,1),(1,2),(1,3),(2,4),(2,5),(2,6);
INSERT INTO term_group VALUES (1,1),(2,2),(3,3),(4,1),(5,2),(6,3); 
```

首先尝试使用 gid 4：

```
SELECT unique_cids.cid FROM ( SELECT DISTINCT cid FROM content_term )
   AS unique_cids
LEFT JOIN ( SELECT DISTINCT cid FROM content_term        
JOIN term_group ON (content_term.tid = term_group.tid AND gid = 4)) 
          AS attached_cids ON (unique_cids.cid = attached_cids.cid)
     WHERE attached_cids.cid IS NULL;

+------+
| cid  |
+------+
|    1 |
|    2 |
+------+
2 rows in set (0.00 sec) 
```

使用 gid 3 重试：

```
SELECT unique_cids.cid FROM ( SELECT DISTINCT cid FROM content_term ) 
    AS unique_cids
     LEFT JOIN ( SELECT DISTINCT cid FROM content_term
        JOIN term_group ON (content_term.tid = term_group.tid AND gid = 3))
            AS attached_cids ON (unique_cids.cid = attached_cids.cid)
     WHERE attached_cids.cid IS NULL;

Empty set (0.00 sec) 
```*

# castle-windsor - 使用两项服务注册相同的课程 - 分两步 - 在 Castle Windsor

> ID：12111502
> 
> 赞同：1
> 
> 时间：2012-08-24T14:36:37.073
> 
> 标签：castle-windsor, windsor-3.0

我有一些执行器类实现了一个或两个接口（IHandleMessages<> 和/或 CommandExecutor<>）。

我可以将所有这些执行程序类（使用它实现的两个接口中的任何一个或多个）注册为服务吗？最终不会将类上的所有其他接口也作为服务。

我最初的尝试是这样的：

```
public class Test
{
    [Fact]
    public void SomeTest()
    {
        var container = new WindsorContainer();
        container.Register(Classes.FromThisAssembly().BasedOn(typeof(CommandExecutor<>)).WithService.Base().LifestyleTransient(),
                           Classes.FromThisAssembly().BasedOn(typeof(IHandleMessages<>)).WithService.Base().LifestyleTransient());

        container.ResolveAll<CommandExecutor<object>>().Count().ShouldBe(2);
        container.ResolveAll<IHandleMessages<object>>().Count().ShouldBe(2);
    }

    public interface IHandleMessages<T> { }
    public interface CommandExecutor<T> { }

    public class HandlesMessagesOnly : IHandleMessages<object> { }
    public class HandlesMessagesAndExecutesCommands : CommandExecutor<object>, IHandleMessages<object> { }
    public class ExecutesCommandsOnly : CommandExecutor<object> { }
} 
```

但这不起作用。有解决方案吗？

我正在使用温莎 3.1.0。

**编辑**：我想我真正要问的是：是否可以两次找到相同的类型，然后让发现者在该类型的注册中添加更多服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-05T15:37:07.943

我已经向 Windsor 提出了一个拉取请求，该请求在 3.2 中被接受，你现在可以这样做：

```
Container.Register(
   Classes.FromThisAssembly()
      .BasedOn<IFoo>()
      .OrBasedOn(typeof(IBar))
      .WithServiceBase()
  .LifestyleTransient()); 
```

[在这里阅读更多](http://docs.castleproject.org/Default.aspx?Page=Whats-New-In-Windsor-32&NS=Windsor&AspxAutoDetectCookieSupport=1#Multiple_BasedOn_in_a_single_registration_5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T04:48:00.007

这将使您的测试通过：

```
container.Register(
    Classes
        .FromThisAssembly()
        .BasedOn(typeof(CommandExecutor<>))
        .WithServiceBase()
        .WithServiceFirstInterface()     // Ensures first interface is included.
        .LifestyleTransient(),
    Classes
        .FromThisAssembly()
        .BasedOn(typeof(IHandleMessages<>))
        .WithServiceBase()
        .LifestyleTransient()
); 
```

有关更复杂的界面选择技术，请参阅[此问题](https://stackoverflow.com/q/8902919/246811)。

# php - PHP5 和 MySQL 教程？

> ID：12111503
> 
> 赞同：-1
> 
> 时间：2012-08-24T14:36:38.860
> 
> 标签：php, mysql

所以我想将我的页面转换为 php5，但我似乎找不到任何关于数据库的好的教程。（除了我们使用与 PHP4 相同的方法的网站）我从朋友那里知道，整个事情发生了很大变化，所以有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:40:54.790

只需将[PDO](http://php.net/manual/en/book.pdo.php)与[准备好的语句](http://www.php.net/manual/en/pdo.prepared-statements.php)`SELECT *`一起使用，除非需要，否则不要使用。

# installation - 编写自定义 setup.exe 套件安装程序

> ID：12111504
> 
> 赞同：1
> 
> 时间：2012-08-24T14:36:39.373
> 
> 标签：installation, windows-installer, suite

我的任务是创建一个安装程序来处理和安装多个 .msi 文件。我几乎走上了 InstallShield 路线，但您需要 Premier 版来创建套件安装，并且说您支付了近 3000 英镑甚至不能让您完全自定义 UI。

对于我们的上一个版本，我编写了一个自定义 Setup.exe 文件，该文件在存储它的同一文件夹中查找我们希望安装的 msi 文件，然后静默安装每个文件。虽然它很基础，但我们现在需要更专业的东西。

目前我有两个主要选择：

*   使用 WiX - 这是免费的，而且似乎提供了很多可定制性。我还不太确定它到底能做什么，需要一些时间来学习。

*   我可以扩展已有的内容并构建自己的安装程序，允许用户选择他们想要安装和不想要安装的功能/组件。如果我可以让安装程序从服务器下载所需的 msi 文件，安装它们，然后删除它们，我会更喜欢这个。我只是不想在主安装程序下载中包含一个单独的文件夹，里面装满了 msi 文件。如果没有太多的努力，这可能吗？另外，使用它我可以将单个程序添加到“添加/删除程序”菜单吗？

欢迎任何想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:01:26.600

它的轻松程度取决于您的设置有多复杂、相互依赖关系及其先决条件。

例如，您想安装产品 X，但它需要安装数据库服务器，需要 .net 框架升级，需要重新启动..

Wix 用于创建 msi，因此如果您想创建一个可以管理多个应用程序安装的 msi，它只会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:24:31.943

WiX 3.6 仍是一个测试项目，Burn 仍在进行中。说实话，InstallShield Suite 安装程序是相当新的，并且仍在进行中。

在您对 InstallShield 的成本感到震惊之前，您需要准确确定 setup.exe 需要能够做什么。然后，您需要在 InstallShield 和 WiX 之间进行功能差距分析，并提出自己的人工估算，在 WiX 中进行并在 InstallShield 中进行。

在某些情况下，现成的工具还不够成熟，推出自己的工具是有意义的。（想想 MS SQL Server、Office、Visual Studio）但对于大多数业务线应用程序，您可能只需要选择最接近您需要的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:06:17.513

我建议查看 WiX 3.6 中 Burn 的功能。您可以创建一个引导程序，它能够从服务器下载您的安装包。您可以完全自定义它或使用标准引导程序应用程序。您也可以使用当前的 .msis。您不必将所有 .msis 转换为 WiX 即可使用引导程序功能。

我建议阅读Rob Mensching 的[这篇博文。](http://robmensching.com/blog/posts/2012/6/25/B-is-for-Bundle-and-thats-good-enough-for-me)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T03:49:47.073

对于需要比您自己的自定义 setup.exe 更专业一点的东西，学习曲线比 WiX 和 Burn 少，并且比 InstallShield 对钱包的痛苦少 - 我建议[MSI Factory](http://www.indigorose.com/products/msi-factory/)，而不是 MSI工厂（虽然它会加速你的 WiX 学习）但对于包含在内的引导程序。

学习曲线小于 Burn，并且有 90 天的试用期，因此您可以查看它是否适合您。

InstallShield 将让您自定义安装界面，并且以高昂的价格获得支持和维护（当您从头开始升级时*非常有用）。*

使用 InstallShield 节省的前期成本，您将在使用 WiX 的时间方面进行投资 - 因此您确实需要进行成本/收益分析并计算出您的时间值多少钱。当您真正开始了解 Windows Installer 及其底层内容时，InstallShield 与 WiX 一样强大。许多商业开发人员将根据个别项目要求使用两者中的元素。

# sql - 当 max 在其他列时获取 id 值

> ID：12111511
> 
> 赞同：0
> 
> 时间：2012-08-24T14:37:04.087
> 
> 标签：sql, sql-server

这是获取最近日期的 id 值的最佳方法吗？

```
table1
id,entrydate
1,8/23/2012
2,8/24/2012
3,8/23/2012

select id from table1 where entrydate = ( select MAX(entrydate) from table1 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:39:53.237

你已经有一个好方法了。我会注意关系：

```
select top id from table1 where entrydate = ( select MAX(entrydate) from table1 ) 
```

当然，这是假设您使用的是 SQL Server。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:40:11.730

假设您使用的是 SQL-Server，您可以使用`ORDER BY`然后取一行：

```
SELECT TOP 1 id
FROM table
ORDER BY entrydate DESC 
```

在 MySql 中是`LIMIT`：

```
SELECT id
FROM table
ORDER BY entrydate DESC
LIMIT 1 
```

在甲骨文中：

```
SELECT id
FROM (SELECT id FROM table ORDER BY entrydate DESC) 
WHERE ROWNUM = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:39:23.237

```
SELECT id FROM table1 ORDER BY entrydate DESC LIMIT 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:39:31.240

你应该能够做到`SELECT id FROM table1 ORDER BY entrydate DESC LIMIT 1`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T14:41:56.093

不完全是，你想这样做：

对于 SQL Server：

```
SELECT TOP 1 id, MAX(entrydate) FROM table1 GROUP BY id 
```

对于 MySQL：

```
SELECT id, MAX(entrydate) FROM table1 GROUP BY id LIMIT 1 
```

# mobile - Geoloqi 地理围栏逻辑流程

> ID：12111512
> 
> 赞同：1
> 
> 时间：2012-08-24T14:37:08.220
> 
> 标签：mobile, appcelerator

全部，

我一直在寻找解决方案，在这一点上我很困惑。我不是在这里寻找代码。我只是在寻找适当的逻辑流程来提醒我的应用程序用户使用 Geoloqi 附近正在发生事件。

我的平台：Geoloqi：地理围栏 Appcelerator 云服务：用户、事件和消息管理语言：javascript 移动设备：iPhone 和 Android

我正在尝试做的事情：1）我希望我的应用程序的用户能够创建一个事件，然后根据该事件创建一个触发器。2) 我希望我的应用程序用户在事件附近自动收到事件正在发生的警报。

到目前为止我所拥有的：1）创建一个 Appcelerator 事件 - 工作正常 2）创建一个包含 Appcelerator EventID 的 Geoloqi 层 - 工作正常 3）为上述图层创建一个 Geoloqi 触发器 - 工作正常

我可以看到一切都进入了 Geoloqi 调试器。我只是没有看到警报消失。我看到一个帖子，匿名用户需要订阅该层才能让触发器发送给我在触发器地理围栏内的用户。我只是不明白该怎么做。我已经尝试了几种围绕 user/create_anon 方法的代码排列，其中一个密钥使用匿名用户名或用户访问令牌来订阅该层，但没有运气。我尝试使用 init 上返回的访问令牌作为参数来订阅，但没有成功。

但是，我想知道是否可以通过使用位置而不是图层来获得相同的效果，并避免订阅问题。我不知何故对此表示怀疑，因为该位置必须位于默认层中。

让我感到困惑。我已经经历了地狱并回来刚刚为Apple设置了推送证书，因此非常感谢任何和所有帮助。

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:04:00.927

Bruce，我建议您访问 geoloqi 开发人员 IRC 频道。您可以从他们网站上的开发者页面之一访问它。geoloqi 的人通常都在线，他们过去对我很有帮助。

如果你真的让它工作，我很想听听它的解决方案/流程！希望有帮助！

泰勒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:30:45.673

好的，这就是我正在做的事情。尚不确定这是否是*答案*，但我认为它会起作用。

1.  创建一个没有边界的默认层和一个每次应用程序运行时都相同的键。这将确保基于 Geoloqi 的反欺骗逻辑使用相同的层。
2.  因为我使用 Appcelerator 来处理用户管理，所以使用登录用户的电子邮件地址创建一个匿名用户。如果我理解正确，这也将确保在用户稍后再次登录时使用相同的匿名用户。匿名用户会自动订阅默认层。
3.  当用户想要创建事件时，应用在 Appcelerator 上创建事件，创建半径为 x 的层，在该层上触发，并使用触发中心点和半径向默认层中的所有用户发送广播消息将消息限制在直接区域。
4.  如果用户想要取消事件，应用程序会以与创建图层相同的方式向默认图层发送广播消息，然后删除 Appcelerator 事件和图层。

除了匿名用户之外，我已经挂上了所有代码。我可以在 Geoloqi 调试器上看到正在设置的触发器和正在创建的消息，但我并不总是得到它们。我将在下周加入匿名用户，所以我们拭目以待。

# naming-conventions - 接受网络命令并执行它们的类的好名字是什么？

> ID：12111515
> 
> 赞同：0
> 
> 时间：2012-08-24T14:37:17.723
> 
> 标签：naming-conventions

所以说我有这个类，它只负责获取 NetworkRequest 并处理它们在给定服务器上的执行......我该怎么命名它？我可以想到很多动词名称，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:56:34.967

NetworkCommandExecutor NetworkRequestDistributor CommandDistributor RequestDirector GeneralSchwarzkopf

# c++ - 损坏的堆栈

> ID：12111524
> 
> 赞同：0
> 
> 时间：2012-08-24T14:37:53.867
> 
> 标签：c++

这是我的功能，它说

> 变量 cinfo 周围的堆栈已损坏。

它说问题出在第 551 行，这是此发布代码的最后一行。

```
struct jpeg_compress_struct cinfo;
struct jpeg_error_mgr       jerr;

FILE*      pOutFile;     //Target file 
int        nSampsPerRow; //Physical row width in image buffer 
JSAMPARRAY jsmpArray;    //Pixel RGB buffer for JPEG file

cinfo.err = jpeg_std_error(&jerr); //Use default error handling (ugly!)

jpeg_create_compress(&cinfo);

if ((pOutFile = fopen(csJpeg, "wb")) == NULL)
{
    *pcsMsg = "Cannot open ";
    *pcsMsg += csJpeg;
    jpeg_destroy_compress(&cinfo);
    return FALSE;
}

jpeg_stdio_dest(&cinfo, pOutFile);

LPBITMAPINFOHEADER lpbi = (LPBITMAPINFOHEADER)hDib;

cinfo.image_width      = lpbi->biWidth;  //Image width and height, in pixels 
cinfo.image_height     = lpbi->biHeight;
cinfo.input_components = 3;              //Color components per pixel
                                         //(RGB_PIXELSIZE - see jmorecfg.h)
cinfo.in_color_space   = JCS_RGB;        //Colorspace of input image

jpeg_set_defaults(&cinfo);

jpeg_set_quality(&cinfo,
                 nQuality, //Quality: 0-100 scale
                 TRUE);    //Limit to baseline-JPEG values

jpeg_start_compress(&cinfo, TRUE);

//JSAMPLEs per row in output buffer
nSampsPerRow = cinfo.image_width * cinfo.input_components; 

//Allocate array of pixel RGB values
jsmpArray = (*cinfo.mem->alloc_sarray)
            ((j_common_ptr) &cinfo,
             JPOOL_IMAGE,
             nSampsPerRow,
             cinfo.image_height);

if (DibToSamps(hDib,
               nSampsPerRow,
               cinfo,
               jsmpArray,
               pcsMsg))
{
    //Write the array of scan lines to the JPEG file
    (void)jpeg_write_scanlines(&cinfo,
                               jsmpArray,
                               cinfo.image_height);
}

jpeg_finish_compress(&cinfo); //Always finish

fclose(pOutFile);

jpeg_destroy_compress(&cinfo); //Free resources

if (*pcsMsg != "")
    return FALSE;

else
    return TRUE;
} 
```

堆栈跟踪：> WindowBitmap.exe!CBitmapFile::JpegFromDib(void * hDib, int nQuality, ATL::CStringT > > csJpeg, ATL::CStringT > > * pcsMsg) 第 551 行 + 0x28 字节 C++

错误消息：运行时检查失败 #2 - 变量“cinfo”周围的堆栈已损坏。pcsMsg 定义：CString* pcsMsg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:41:14.453

```
jpeg_destroy_compress(&cinfo); 
```

释放自动变量的内存，当`cinfo`超出范围时第二次释放。

> jpeg_destroy_compress() 函数应解除分配和释放与压缩对象相关的所有内存。

# knockout.js - knockout.js foreach 在表中重复 td 元素，但不重复 tr 元素

> ID：12111525
> 
> 赞同：13
> 
> 时间：2012-08-24T14:37:56.077
> 
> 标签：knockout.js, html-table

我使用 MVC 4 和 knockout.js 库版本 2.1.0 显示从服务器检索到的大量文件的表中的以下摘录。

```
 <tr data-bind="foreach: files, visible: (files() && files().length > 0)">
        <td data-bind="text: UploadPath" />
        <td data-bind="text: FileName" />
    </tr> 
```

正在正确检索数据，但是 foreach 正在重复表中的 TD 元素而不是 TR。因此，如果有 100 个文件，则表中将有 200 列显示给用户。如何使 TR 元素重复 foreach 文件？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T14:42:05.473

只需将“foreach”绑定放在下一个（外部）元素中：

```
<table data-bind="foreach: files, ...">
    <tr>
        ... 
```

您还可以使用虚拟元素：

```
<!-- ko foreach: files -->
<tr>
    <td>
        ...
</tr>
<!-- /ko --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T11:04:54.540

我遇到了一件奇怪的事情：

我试图使用无容器绑定来重复多个表行。KO 抱怨它找不到结束 /ko 标记。

我在无容器绑定上方定义了一个表头。如果我将其更改为标准表格行，一切都会按预期工作（除了我的标题没有所需的样式，但我覆盖了它）。

希望这可以帮助其他人为此苦苦挣扎-这只是一种解决方法，而不是解决方法。

# optimization - 编写 Lucene.Net 索引时内存使用量不断增长

> ID：12111528
> 
> 赞同：2
> 
> 时间：2012-08-24T14:38:03.987
> 
> 标签：optimization, nlp, lucene.net, information-retrieval

自从谷歌搜索关于 Lucene.Net 的使用后，我开始了这个讨论，我没有发现任何真正有用的东西。问题很简单：我在构建和更新 Lucene.Net 索引时遇到问题。特别是，即使我将 SetRAMBufferSizeMB 固定为 256，SetMergeFactor 固定为 100，SetMaxMergeDocs 固定为 100000，它的内存使用量也会不断增长。此外，每次使用索引时，我都会仔细使用 Close() 和 Commit() 方法。

为了使 lucene.Net 适用于我的数据，我从本教程开始：[http ://www.lucenetutorial.com/lucene-in-5-minutes.html](http://www.lucenetutorial.com/lucene-in-5-minutes.html)

对于 10^5 和 10^6 的文档，似乎需要 1.8GB 的​​内存。因此，如果实际 RAM 使用量是 7 倍以上，为什么还要设置 SetRAMBufferSizeMB 参数？有人真的知道如何限制内存使用吗？

此外，我观察到要处理 10^5 或 10^6 文档，必须为 x64 平台编译 Lucene.Net。事实上，如果我为 x86 平台编译代码，索引崩溃会系统地触及 1.2GB 的 RAM。是否有人能够使用更少的 RAM 索引相同数量（甚至更多）的文档？在哪个硬件和软件设置中？我的环境配置如下： - os := win7 32/64 bits。- sw := .Net framework 4.0 - hw := 具有 6GB RAM 的 12 核 Xeon 工作站。- Lucene.Net rel.：2.9.4g（当前稳定）。- Lucene.Net 目录类型：FSDirectory（索引写入磁盘）。

* * *

好的，我使用您关于重用 Document/Fields 实例的建议测试了代码，但是代码在内存使用方面的表现完全相同。`1000000`在这里，我发布了一些我在文档索引过程中跟踪的一些参数的调试行。

```
DEBUG - BuildIndex – IndexWriter - RamSizeInBytes 424960B; index process dimension 1164328960B.  4% of the indexing process.
DEBUG - BuildIndex – IndexWriter - RamSizeInBytes 457728B; index process dimension 1282666496B.  5% of the indexing process.
DEBUG - BuildIndex – IndexWriter - RamSizeInBytes 457728B; index process dimension 1477861376B.  6% of the indexing process. 
```

索引过程维度得到如下：

即使被利用的缓冲区或多或少没有变化，也很容易观察到进程增长的速度`RAM`（`~1.5GB`在索引进程的时候）。因此，问题是：是否可以明确限制索引进程大小的使用？我不在乎在搜索阶段性能是否下降以及是否必须等待一段时间才能获得完整的索引，但我需要确保索引过程不会遇到索引大量索引的堆栈溢出错误的文件。如果无法限制内存使用量，我该怎么做？`6%``RAM``IndexWriter``RAM``OOM`

为了完整起见，我发布了用于调试的代码：

```
// get the current process
Process currentProcess = System.Diagnostics.Process.GetCurrentProcess();
// get the physical mem usage of the index writer 
long totalBytesOfIndex = writer.RamSizeInBytes();
// get the physical mem usage
long totalBytesOfMemoryUsed = currentProcess.WorkingSet64; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:44:35.307

最后，我发现了这个错误。它包含在使用 Luca Gentili 贡献 (http://snowball.tartarus.org/algorithms/italian/stemmer.html) 构建的 ItalianAnalyzer（意大利语分析器）中。实际上，在 ItalianAnalyzer 类中，包含停用词的文件被打开了几次，每次使用后都没有关闭。这就是我的OOM问题的原因。解决这个错误 Lucene.Net 在构建索引和搜索方面都非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T02:16:51.923

SetRAMBufferSizeMB 只是确定何时将 IndexWriter 刷新到磁盘的方法之一。当 XXX MB 写入内存并准备刷新到磁盘时，它将刷新段数据。

Lucene 中还有很多其他对象也会使用内存，并且与 RamBuffer 无关。

通常，在编制索引时运行 OOM 时首先要尝试的是重用 Document/Fields 实例。如果您使用多线程索引，请确保仅在同一线程上重用它们。因此，当底层 IO 飞速发展而 .NET 垃圾收集器无法跟上所有创建的小对象时，我碰巧运行了 OOM。

# android - 使 TextView 和 Button 大小相同

> ID：12111530
> 
> 赞同：0
> 
> 时间：2012-08-24T14:38:05.903
> 
> 标签：android

我的程序中有一个 TextView 和 Button，我无法让 Button 和 TextView 的大小相同。我怎样才能做到这一点？

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="67dp"
        android:background="#999999" 
        android:gravity="center" 
        >
        <Button
            android:id="@+id/button1"
            android:layout_width="130dp"
            android:layout_height="60dp"
            android:text="Button" />
        <TextView
            android:id="@+id/textView1"
            android:layout_width="130dp"
            android:layout_height="60dp"
            android:background="#ffffff" android:textColor="#000000"
            android:textSize="24dp" android:textStyle="bold"
            android:gravity="center"
            android:text="0.0" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:42:40.513

实际上，它们都具有相同的大小，但是`Button`使用图像作为背景，并且似乎有一些边距。

要对此进行测试，请使用颜色覆盖按钮的背景并查看它们的大小：

```
android:background="#0F0" 
```

因此，解决方案是为您的按钮提供自定义背景，或者调整`TextView`以匹配按钮的宽度和高度，减去按钮的边距，我个人认为这不是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T15:17:11.127

当我希望多个控件具有相同的大小时，我通常会将它们放在 TableLayout 中。

在您的情况下，我会将 TableLayout 放在线性布局中，并将按钮和 textview 放在 TableRow 中，将 TableRow 的 weightsum 设置为 2，并将各个控件的权重设置为 1。

这将使控件在屏幕上占用相同数量的空间。示例 xml 如下所示。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:weightSum="2" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/hello_world">

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Button" />
        </TableRow>

    </TableLayout>

</LinearLayout> 
```

# javascript - 具有两个变量功能的 Ajax 提交表单

> ID：12111537
> 
> 赞同：0
> 
> 时间：2012-08-24T14:38:36.223
> 
> 标签：javascript, ajax

我是 javascript 和 ajax 的新手，我想了解更多。我很难让我的简单 ajax 脚本工作。该脚本的目的是传递两个变量。一个变量称为文件的当前名称。第二个变量是文件的新名称。第二个变量用文本框输入。

单击提交按钮时，将执行脚本。我知道该功能很好，因为我可以对其进行硬编码并使其工作。我似乎遇到的问题是第二个变量没有正确传递。

```
<?php
   $q="Test";
   echo "<form name=\"Form-$q\" method=\"post\" >";
     echo "New File Name: <input type=\"text\" name=\"NewNameFor$q\" /><br />";
     echo "<input type=\"submit\" id=\"ChangeNameButton$q\" value=\"Change\" onclick='ChangeFileName(\"$q\",\"this.form.NewNameFor$q.value\");return false;'>";
   echo "</form>";
?> 
```

我的代码输出以下内容：

```
mv /data/Test /data/this.form.NewNameForTest.value 
```

很明显我的代码没有正确读取表单输入。我只是不确定我可能错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:51:06.460

问题在这里：

```
onclick='ChangeFileName(\"$q\",\"this.form.NewNameFor$q.value\"); 
```

您引用了“this.form.NewNameFor$q.value”。这意味着这个**字符串**将被传入。

删除引号：

```
onclick='ChangeFileName(\"$q\",this.form.NewNameFor$q.value); 
```

# php - 为什么 GridFS 文件名和字节为空？

> ID：12111540
> 
> 赞同：3
> 
> 时间：2012-08-24T14:38:47.050
> 
> 标签：php, mongodb, symfony, gridfs

我已使用以下方法成功地将文件添加到 GRIDFS：

```
 $asset = new Asset();
   $asset->setName('Image'.$count);
   $asset->setFile($uploadedFile->getPathname());
   $dm->persist($asset);
   $dm->flush(); 
```

然后我尝试使用以下方法打印文件：

```
$dm = $this->get('doctrine.odm.mongodb.document_manager');
         $image = $dm->createQueryBuilder('MyBundle:Asset')
                     ->field('id')->equals($imageID)
                     ->getQuery()
                     ->getSingleResult();
                 header('Content-type: image/png;');
                  echo $image->getFile()->getBytes(); 
```

但什么也没有出现。所以我这样做：

```
var_dump($image); 
```

并获得以下信息：

```
object(Main\MyBundle\Document\Asset)#429 (7) {
  ["id":protected]=>
  string(24) "50330286c7e24c7019000004"
  ["name":protected]=>
  string(6) "Image2"
  ["file":protected]=>
  object(Doctrine\MongoDB\GridFSFile)#427 (4) {
    ["mongoGridFSFile":"Doctrine\MongoDB\GridFSFile":private]=>
    object(MongoGridFSFile)#430 (3) {
      ["file"]=>
      array(7) {
        ["_id"]=>
        object(MongoId)#431 (1) {
          ["$id"]=>
          string(24) "50330286c7e24c7019000004"
        }
        ["name"]=>
        string(6) "Image2"
        ["filename"]=>
        string(14) "/tmp/phpQ1LCIC"
        ["uploadDate"]=>
        object(MongoDate)#432 (2) {
          ["sec"]=>
          int(1345520262)
          ["usec"]=>
          int(510000)
        }
        ["length"]=>
        float(194992)
        ["chunkSize"]=>
        float(262144)
        ["md5"]=>
        string(32) "5bbc9ede74f50f93a3f7d1f7babe3170"
      }
      ["gridfs":protected]=>
      object(MongoGridFS)#437 (5) {
        ["w"]=>
        int(1)
        ["wtimeout"]=>
        int(10000)
        ["chunks"]=>
        object(MongoCollection)#438 (2) {
          ["w"]=>
          int(1)
          ["wtimeout"]=>
          int(10000)
        }
        ["filesName":protected]=>
        string(12) "assets.files"
        ["chunksName":protected]=>
        string(13) "assets.chunks"
      }
      ["flags"]=>
      int(0)
    }
    ["filename":"Doctrine\MongoDB\GridFSFile":private]=>
    NULL
    ["bytes":"Doctrine\MongoDB\GridFSFile":private]=>
    NULL
    ["isDirty":"Doctrine\MongoDB\GridFSFile":private]=>
    bool(false)
  }
  ["uploadDate":protected]=>
  string(21) "0.51000000 1345520262"
  ["length":protected]=>
  string(6) "194992"
  ["chunkSize":protected]=>
  string(6) "262144"
  ["md5":protected]=>
  string(32) "5bbc9ede74f50f93a3f7d1f7babe3170"
} 
```

为什么文件名和字节为 NULL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:28:49.180

如果您查看[GridFSFile](https://github.com/doctrine/mongodb/blob/master/lib/Doctrine/MongoDB/GridFSFile.php)源代码，您会发现它`$bytes`仅在覆盖文件内容时使用。该`$filename`属性有时会在 getter 期间设置，但在更改 GridFS 中的文件名时会另外使用。

根据您`var_dump()`输出中的其他值，看起来 GridFS 中肯定有一个文件（它具有块大小、字节长度、md5 哈希等）。我建议调试该`GridFSFile::getBytes()`方法并确保它正确链接到`getBytes()`内部 MongoGridFSFile 实例上的方法。或者，您可以尝试直接调用`GridFSFile::getMongoGridFSFile()`和使用原始驱动程序类。这会将其缩小到一个教义或驱动程序问题。

顺便问一下，您使用的是什么版本的 PECL 驱动程序？GridFS 过去有一些错误，最近的版本也有一些更新（参见：[changelog](http://pecl.php.net/package-changelog.php?package=mongo)）。

# python - 是否可以与 South 保持全局（跨所有应用程序）迁移历史？

> ID：12111549
> 
> 赞同：2
> 
> 时间：2012-08-24T14:39:09.057
> 
> 标签：python, django, django-south

我遇到了与[South 在不同应用程序中遵循什么迁移顺序类似的问题？](https://stackoverflow.com/questions/7474745/what-migration-order-does-south-follow-across-different-apps)，其中来自不同应用程序（例如 app_a 和 app_b）的迁移必须交错才能工作，但默认情况下，South 首先运行来自 app_a 的所有迁移，然后运行来自 app_b 的所有迁移。

我知道有一种方法可以[手动指定依赖项以使其工作](http://south.readthedocs.org/en/latest/dependencies.html)，但这似乎没有必要，因为 South 可以记录迁移运行方式的全局顺序，因此它可以根据它们过去的实际交错方式来交错它们。

那么，有没有一种好方法可以让 South 记住您的全球迁移历史并自动设置依赖关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:52:16.623

我不认为这是必要的：记录迁移的运行顺序会引入比需要更多的依赖项（因为大多数应用程序迁移可以 - 并且应该 - 独立于其他应用程序运行）。您只需要自己指定依赖项，因为您知道哪些依赖项需要先于其他依赖项。

此外，迁移运行的顺序并不真正“存在”：只有多个数据库（本地、开发、生产）和一组应用程序，每个应用程序都有一些迁移。这些迁移只需要运行，并且您需要尽可能少的依赖项。指定所有迁移需要运行的特定顺序是不必要的限制。

如果另一个开发人员决定以不同的顺序迁移应用程序，那么这应该是可能的。唯一的限制应该是您使用[depends_on](http://south.aeracode.org/wiki/Dependencies)指定的硬依赖项。

现在可能需要更多的体力劳动，但是如果您的应用程序不是太交织在一起，那么您的应用程序之间就不应该有太多的依赖关系。如果你这样做了，那么你可能需要考虑合并这些应用程序，因为它们比你想象的更相关？

# c++ - QT中的透明小部件

> ID：12111550
> 
> 赞同：2
> 
> 时间：2012-08-24T14:39:09.890
> 
> 标签：c++, qt, widget, qwidget

我想在小部件上画一个圆圈，并且在圆圈背景屏幕内应该可见，即在小部件上应该只看到圆圈的边框/周长。小部件的其余部分应该是透明的。我试过了：1）`setStyleSheet("background:transparent;")` 2）`setAttribute( Qt::WA_TranslucentBackground, true );` 3）`Overriding paintEvent(QPaintEvent* event);`

以上所有方法均无效。并且 setAutoFillBackground() 为假。我是刚在谷歌上找到的 Qt 及以上解决方案的新手。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:10:13.493

这将完成工作：D

```
#include <QApplication>
#include <QtGui/QMainWindow>
#include <QtGui/QPushButton>
#include <QtGui/QHBoxLayout>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QMainWindow *win=new QMainWindow(0);
    win->setAttribute(Qt::WA_TranslucentBackground,true);
    win->show();
    return a.exec();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:20:15.577

如果在窗口上使用该[`QWidget::setMask`](http://qt-project.org/doc/qt-4.8/qwidget.html#setMask)功能，则会产生这种影响。另请参阅[形状时钟示例](http://qt-project.org/doc/qt-4.8/widgets-shapedclock.html)（也从`setMask`文档中引用）。

# php - 比价网站——爬虫

> ID：12111554
> 
> 赞同：-1
> 
> 时间：2012-08-24T14:39:25.070
> 
> 标签：php, javascript, web-crawler

我有一个价格比较网站。您可以点击优惠链接，我会从商店获得 1 美元。

问题是：爬虫爬取整个网站。所以他们“点击链接”。我怎样才能防止他们点击？Javascript 是一个糟糕的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:10:46.247

我一直在以错误的方式思考这个问题。

我同意@yttriuszzerbus 上面所说的一切——在文件中添加robots.txt，在链接中添加“rel=nofollow”，并阻止您知道的用户代理。

因此，如果您现在有人试图点击链接，那么它要么是活人，要么是您不想点击的行为不端的机器人。

那么如何做一些奇怪的事情来创建商店网站的链接呢？通常，您永远不会这样做，因为它会使您的网站无法被索引。但这不是问题——所有表现良好的机器人都不会索引这些链接，因为它们会遵守 robots.txt 文件。

我正在考虑类似没有`<a href=`标签的东西 - 相反，生成链接的文本，使用样式表为字体添加下划线，所以它看起来像一个普通用户的链接，然后有一个 javascript onClick 函数当用户点击它时重定向用户。机器人不会将其视为链接，用户也不会注意到任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:45:25.273

你可以：

1.  使用“rel=nofollow”指示爬虫不要跟踪您的链接。

2.  阻止某些用户代理字符串

3.  使用 robots.txt 排除您网站的传播。

不幸的是，以上都不会排除行为不端的爬虫。*真正阻止*爬虫的唯一解决方案是某种 JavaScript 链接或验证码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-10T07:12:41.093

我也有类似的项目。我的问题只能通过阻止某些用户代理字符串来解决。

另一个问题是我不知道每个“坏”用户代理的，所以当一个新的爬虫进入该站点时，我将它添加到黑名单中并追溯从统计中删除它的访问。

“rel=nofollow”和 robots.txt 对我根本不起作用。

# android - 使用手势后 EditText 不可编辑

> ID：12111555
> 
> 赞同：1
> 
> 时间：2012-08-24T14:39:28.347
> 
> 标签：android, android-edittext

我创建了一个编辑文本，它在触摸时移动，键盘在双击或长按时打开。它工作得很好，但我面临两个问题：

1.  EditText 可以从文本的最后或从文本的开头进行编辑。我无法选择光标的位置。

2.  编辑文本从左角而不是中心拖放。

触摸监听器的代码是：

```
@Override
public boolean onTouchEvent(MotionEvent event)
{

    RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) v.getLayoutParams();
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            setEnabled(true);
            setCursorVisible(true);

            break;

        case MotionEvent.ACTION_UP:
            Log.d("up", "ACTION_UP");
            params.height = LayoutParams.WRAP_CONTENT;
            params.width = LayoutParams.WRAP_CONTENT;
            params.topMargin = (int)(event.getRawY() - (v.getHeight()/2));
            params.leftMargin = (int)(event.getRawX() - (v.getWidth()/2));
            txt_metaData.Xmargin= params.topMargin;
            txt_metaData.YMargin= params.leftMargin;
            break;
        case MotionEvent.ACTION_MOVE:
            Log.d("moving", "ACTION_MOVE");

            params.topMargin = (int)(event.getRawY() - (v.getHeight()/2));
            params.leftMargin = (int)(event.getRawX() - (v.getWidth()/2));
            v.setLayoutParams(params);
            break;
    }
    return gestureScanner.onTouchEvent(event);
}

@Override
public boolean onDown(MotionEvent e)
{   
    return true;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
{
    return true;
}
@Override
public void onLongPress(MotionEvent e)
{
    Log.i("double tap called", "yes");
    ((InputMethodManager)_mContext.getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY);
    setEnabled(true);
    requestFocus();
    requestFocusFromTouch();
}
        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY)
        {
            return true;
        }

        @Override
        public void onShowPress(MotionEvent e)
        {

        }    
        @Override
        public boolean onSingleTapUp(MotionEvent e)    
        {
            return true;
        }
        @Override
        public boolean onDoubleTap(MotionEvent e) 
        {
            Log.i("double tap called", "No");
             ((InputMethodManager)_mContext.getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY);
                setEnabled(true);
                requestFocus();
                requestFocusFromTouch();
             return true;
        }
        @Override
        public boolean onDoubleTapEvent(MotionEvent e) 
        {
             return true;
        }
        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) 
        {
            bringToFront();
            return true;
        }
    } 
```

# html - Ajax html 编辑器扩展器在页面加载时将文本和表格转换为 HTML

> ID：12111558
> 
> 赞同：2
> 
> 时间：2012-08-24T14:39:36.340
> 
> 标签：html, textbox

我对文本框使用 HTML 编辑器扩展器，让用户向其中添加表格和图像。此外，我在页面上还有其他几个按钮，单击将附加的文件保存到数据库。但是一旦使用按钮加载页面，单击文本框中的整个数据就会转换为 HTML。

请让我知道如何以实际形式保留内容。

```
<asp:TextBox ID="tbDescription" runat="server" TextMode="MultiLine" Columns="75" Rows="20" ></asp:TextBox>

<ajaxToolkit:HtmlEditorExtender EnableSanitization="false" ID="HtmlEditor_tbDescription" TargetControlID="tbDescription" runat="server">
     <Toolbar>
         <ajaxToolkit:Undo />
         <ajaxToolkit:Redo />
         <ajaxToolkit:Bold />
         <ajaxToolkit:Italic />
         <ajaxToolkit:Underline />
         <ajaxToolkit:StrikeThrough />
         <ajaxToolkit:Subscript />
         <ajaxToolkit:Superscript />
         <ajaxToolkit:JustifyLeft />
         <ajaxToolkit:JustifyCenter />
         <ajaxToolkit:JustifyRight />
         <ajaxToolkit:JustifyFull />
         <ajaxToolkit:InsertOrderedList />
         <ajaxToolkit:InsertUnorderedList />
         <ajaxToolkit:CreateLink />
         <ajaxToolkit:UnLink />
         <ajaxToolkit:RemoveFormat />
         <ajaxToolkit:SelectAll />
         <ajaxToolkit:UnSelect />
         <ajaxToolkit:Delete />
         <ajaxToolkit:Cut />
         <ajaxToolkit:Copy />
         <ajaxToolkit:Paste />
         <ajaxToolkit:BackgroundColorSelector />
         <ajaxToolkit:ForeColorSelector />
         <ajaxToolkit:FontNameSelector />
         <ajaxToolkit:FontSizeSelector />
         <ajaxToolkit:Indent />
         <ajaxToolkit:Outdent />
         <ajaxToolkit:InsertHorizontalRule />
         <ajaxToolkit:HorizontalSeparator />
         <ajaxToolkit:InsertImage />
     </Toolbar>
</ajaxToolkit:HtmlEditorExtender> 
```

# sql-server - 进行自我加入以隐藏重复项 - 收到错误消息

> ID：12111560
> 
> 赞同：1
> 
> 时间：2012-08-24T14:39:51.683
> 
> 标签：sql-server, tsql, sql-server-2005

好的，我正在做一个自我查询来抑制视图的重复。我正在使用的代码是：

```
 USE BILLING

    SELECT Provider_Code,
           Provider_LName,
           Provider_Fname,
           Provider_Title,
           AGENCY_LOCATION_NAME_LINE_1,
           CostCenter_AbbrName
    FROM   dbo.ServiceProfiler prov1
           INNER JOIN
           dbo.ServiceProfiler prov2
           ON prov1.Provider_Code = prov2.Provider_Code
    WHERE  0 = (SELECT COUNT(s1.Provider_Code)
                FROM   prov1
                WHERE  prov2.Provider_Code = prov1.Provider_Code
                       AND prov2.Provider_Code < prov1.Provider_Code); 
```

在 SQL Server 2005 上执行查询时，我收到以下消息：

> *消息 208，级别 16，状态 1，第 3 行
> 无效的对象名称“prov1”。*

我一生都无法理解为什么别名无效。我想我在[这里](https://stackoverflow.com/questions/9762390/converting-a-self-subquery-to-a-self-join)找到了类似的问题。但它非常通用，并没有使用别名显示完整的“真实”查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:38:31.413

我会做更多这样的事情：

```
SELECT Provider_Code,
           Provider_LName,
           Provider_Fname,
           Provider_Title,
           AGENCY_LOCATION_NAME_LINE_1,
           CostCenter_AbbrName
FROM   dbo.ServiceProfiler prov,
     (SELECT Provider_Code,count(*) Count from dbo.ServiceProfiler group by Provider_Code HAVING count(*)=0) q
WHERE prov.Provider_Code = q.Provider_Code 
```

我想，您也可以直接进行子选择。我认为加入子查询更容易理解，但这就是我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:45:00.967

您不能使用`FROM prov1`- 没有名为 的表`prov1`。根据[文档](http://msdn.microsoft.com/en-us/library/ms177634.aspx)，FROM 与 *table_source* 一起使用，它是表或视图名称。

但是，您**可以**`prov1`从子查询的 where 子句中引用。

另请注意，子查询中的 where 子句没有意义。`prov2.ProviderCode`不能同时小于**AND**等于`prov1.ProviderCode`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:45:48.803

```
FROM   prov1 
```

这是你的问题；既然是另一个`select`，你需要指定你在`table`哪里`select from`。您可以`alias` `prov1`在 that 的 where 中使用`select`to `join`，但需要指定`table`, 以及一个新的别名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T15:09:29.610

您不能在语句中调用`prov1`表，您必须调用并更改 Where 语句，如 @RB 所说`select``where``ServiceProfiler AS Prov3`

> 另请注意，子查询中的 where 子句没有意义。prov2.ProviderCode 不能同时小于 AND 等于 prov1.ProviderCode。

让它工作

# html - CSS 颜色映射

> ID：12111562
> 
> 赞同：0
> 
> 时间：2012-08-24T14:39:54.140
> 
> 标签：html, css

是否可以将颜色映射到如下颜色名称：

> 浅蓝色 = #FF8000

此十六进制值 #FF8000 的原始颜色为浅橙色

我需要将此值 #FF8000 映射到浅蓝色

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:43:42.387

默认情况下不使用 CSS，尽管这即将到来。提议的 CSS 变量规范位于[http://www.w3.org/TR/css-variables/](http://www.w3.org/TR/css-variables/)。Chrome 有一个实现，但默认情况下它没有打开，目前还没有任何发布版本。

您可以使用像 SASS 这样的预处理器来为您执行此操作。更多信息请访问[http://sass-lang.com/#variables](http://sass-lang.com/#variables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:43:45.187

没有合理的方法可以做到这一点（因为您可能不想这样做）。

当前的颜色映射在浏览器采用的 HTML 和 CSS 规范中。既然如此，没有一些hacky方式就无法改变它们。

如果您绝对必须这样做，您可以按照建议执行并运行查找/替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:44:23.463

您可以在css中添加一个类并将颜色（或背景颜色，任何您想要的）设置为十六进制值，然后使用该类，否则我不知道您想要什么...

```
.lightblue
{
    color: #FF8000;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T14:45:11.770

简单的回答：不，这是不可能的。html-colornames 绑定到[规范](http://www.w3.org/TR/css3-color/)中定义的固定十六进制值。浏览器会自动将关键字转换`lightblue`为这个特定的十六进制值（或 RGB，但没关系）。您无法更改此行为。

尽管您可以使用自己的颜色词，例如`lightBlue`通过 javascript 解析样式表并根据您自己的定义应用颜色。

或者，如果你想要的话，你可以在 SASS/LESS 中使用变量。

顺便说一句，简单的问题：为什么？

# vim - 如何使用vim突出显示一行上的双句子

> ID：12111563
> 
> 赞同：0
> 
> 时间：2012-08-24T14:39:57.427
> 
> 标签：vim, double, highlight

我想知道是否可以使用 vim 突出显示一行上的双句子（在搜索后突出显示）。

*示例*：

这是我的第一行。这是我的第一行。
这是我的第二行这是我的第二行
“更多文本”这是我的第三行“更多文本”这是我的第三行“更多文本”这是我的第三行

* * *

*突出显示所有双语句-> 输出：（以粗体突出显示）：*

**这是我的第一行。**“更多文字”**这是我的第一行。**
**这是我的第二行这是我的第二行**
“更多文本”**这是我的第三行**“更多文本”**这是我的第三行**“更多文本”**这是我的第三行**

* * *

*突出显示除第一个双精度外的所有内容-> 输出：（以粗体突出显示）*

这是我的第一行。“更多文字”**这是我的第一行。**
这是我的第二行**这是我的第二行**
“更多文本”这是我的第三行“更多文本”**这是我的第三行**“更多文本”**这是我的第三行**

* * *

> 双句是一段文本，在相同的序列中包含 2 个或更多相似的单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:39:54.433

要突出显示您可以使用的所有双句

/这是我的第一行\|这是我的第二行\|这是我的第三行

我不知道如何突出显示除第一个双精度外的所有内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T15:34:10.843

Vim 提示[Highlight doubled word errors in text](http://vim.wikia.com/wiki/Highlight_doubled_word_errors_in_text)有一个正则表达式可以处理重复的单词；您可以扩展它以捕获整个句子。

但我怀疑你能否想出一个能满足你所​​有要求、仍然有点可维护并且不会拖累 Vim 性能的方案。*（但让这成为对您和其他人的挑战！）*

# html - 如何制作包含其他标签的表格

> ID：12111570
> 
> 赞同：-3
> 
> 时间：2012-08-24T14:40:26.880
> 
> 标签：html, html-table

我正在尝试制作一个包含 HTML 标记的表格，但是当我输入 HTML 标记时，它会被识别并且不会出现。

```
<table border="1">
    <tr>
        <td><html></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:45:09.053

任何允许放置在 HTML 页面的 body-element 中的 HTML 标记也可以放置在 TD 中，但页面中不能有多个 HTML 元素。

例如，这将是允许的：

```
<table border="1">
    <tr>
        <td>
           <table border="1">
              <tr>
                 <td>Some content</td>
              </tr>
           </table>
        </td>
    </tr>
</table> 
```

但是，如果您想在表格中显示文本 <HTML> ，则必须使用`&lt;`and`&gt;`而不是`<`and `>`，`&lt;HTML&gt;`否则浏览器会尝试将其解析为 HTML 而不是将其打印为文本。

# sql-server - 在 VB .NET 中使用 ADO .NET 将数据时间从 sql Server 转换为 DateTime

> ID：12111574
> 
> 赞同：1
> 
> 时间：2012-08-24T14:40:40.077
> 
> 标签：sql-server, vb.net, web-services, ado.net, datatable

我在 Visual Studio 2005 中使用 VB .NET 语言创建了一个 Web 服务。此 Web 服务通过 ADO .NET 与 Sql Server 上的数据库交互。使用 ADO .NET，我得到一张带有此代码的表

```
 conn = New SqlConnection(Utilities.ConnectionString)
    sqlcmd = New SqlClient.SqlCommand()
    sqlcmd.Connection = conn
    sqlcmd.CommandType = CommandType.Text
    sqlcmd.CommandText = "select * from myTable" 
    da = New SqlClient.SqlDataAdapter()
    da.SelectCommand = sqlcmd
    table = New DataTable()
    da.Fill(table) 
```

其中 Utilities 是我创建的用于管理和返回 ConnectionString 的类。表 myTable 包含多个 String 类型字段和一个名为 LastChangeDate 的 datetime 字段。我想选择在 myTable 的行中找到的所有日期，所以我使用以下代码：

```
 Dim d As DateTime 
     For Each row In table.Rows
          d = row.Item("LastChangeDate")
          '
          ' other codes for managing the retuned dates
          ' 
```

问题是在此操作之后 d 包含 NULL 值。

在 VB .NET 中，如何将 Item 方法返回的日期时间正确转换为 DateTime

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:43:00.730

```
dim isDate as Boolean
dim lastChangeDate as Date

isDate = Date.TryParse(row.Item("LastChangeDate"), lastChangeDate)
If isDate Then
  '** code that should work with the extracted date ...
End If 
```

# php - 重定向不适用于 json_encode

> ID：12111576
> 
> 赞同：-2
> 
> 时间：2012-08-24T14:40:48.447
> 
> 标签：php, json, codeigniter

大家好我开始使用codeigniter创建一个小应用程序，我想使用json提交我的表单当我在我的函数中添加json_encode时遇到问题，redirect（）不起作用我不知道为什么这是我的代码

```
public function login_validate() {
    if ($_POST) {
        $login = $this->users->access(array(
            'email' => $_POST['email'],
            'password' => md5($_POST['password'])
                ));
        if (!$login) {
            redirect('/home');
        }
        echo json_encode($this->data);
    }
} 
```

我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:19:20.707

您确实应该在 JSON 响应中返回一个标志，然后如果设置了标志，请使用 window.location 到达所需的页面。

您正在做的是将 AJAX 调用重定向到新页面，而不是您的浏览器。

# python - 打包 python 应用程序以使其可 pip 安装时出错

> ID：12111579
> 
> 赞同：0
> 
> 时间：2012-08-24T14:40:54.270
> 
> 标签：python, django, git, github, pip

我是 git 新手，并通过 github 部署了我的第一个 python-django 应用程序： [https ://github.com/staticdev/django-crud-utils](https://github.com/staticdev/django-crud-utils)

问题是，当我尝试安装它时，出现错误：

```
$ pip install -e git://github.com/staticdev/django-crud-utils.git#egg=django-crud-utils
Obtaining django-crud-utils from git+git://github.com/staticdev/django-crud-utils.git#egg=django-crud-utils
  Updating /home/static/virtualenvs/prp2/src/django-crud-utils clone
  Running setup.py egg_info for package django-crud-utils
    Traceback (most recent call last):
      File "<string>", line 14, in <module>
      File "/home/static/virtualenvs/prp2/src/django-crud-utils/setup.py", line 15, in <module>
        DESC = " ".join(__import__('crud_utils').__doc__.splitlines()).strip()
    AttributeError: 'NoneType' object has no attribute 'splitlines'
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 14, in <module>

  File "/home/static/virtualenvs/prp2/src/django-crud-utils/setup.py", line 15, in <module>

    DESC = " ".join(__import__('crud_utils').__doc__.splitlines()).strip()

AttributeError: 'NoneType' object has no attribute 'splitlines'

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /home/static/virtualenvs/prp2/src/django-crud-utils
Storing complete log in /home/static/.pip/pip.log 
```

有什么帮助吗？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:44:28.853

您的包上没有文档字符串`crud_utils`，因此安装失败。

您可以通过在`setup.py`本地运行模块来获得相同的错误：

```
python setup.py 
```

将文档字符串添加到您的[`crud_utils/__init__.py`模块](https://github.com/staticdev/django-crud-utils/blob/master/crud_utils/__init__.py)：

```
"""Some docstring here would help""" 
```

[^(PS 您还检查了`.pyc`字节编译缓存文件到 GitHub，您可能想要删除这些。)]

# colors - Visual Studio 2012 颜色主题格式

> ID：12111586
> 
> 赞同：1
> 
> 时间：2012-08-24T14:41:27.667
> 
> 标签：colors, themes, visual-studio-2012

我在 HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config\Themes 找到了 Visual Studio 2012 的颜色主题设置

我可以通过复制相关键在灯光方案中复制一个深色输出窗口，因此这绝对是颜色的来源（您必须在更改之间重新启动 IDE）。

我想知道是否有人熟悉这些键中二进制数据的格式？

或者它们似乎是从中创建的 Common7\IDE\CommonExtensions\ShellColors.pkgdef 文件？

我尝试了一些实验来改变我猜应该是颜色值，但没有取得多大成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:55:09.520

试试我写的这个主题编辑器，它可以帮助你修改暗/亮主题的内置颜色。大多数 Visual Studio 的窗口颜色都属于**环境**类别。

更多信息在这里：

[修改 Visual Studio 2012 深色（和浅色）主题](http://bchavez.bitarmory.com/archive/2012/08/27/modify-visual-studio-2012-dark-and-light-themes.aspx)

[视觉主题编辑器 2012 源代码](http://github.com/bchavez/VisualThemeEditor2012)

# php - 特殊字符和 URL 重写

> ID：12111588
> 
> 赞同：7
> 
> 时间：2012-08-24T14:41:28.487
> 
> 标签：php, regex, apache, .htaccess, url-rewriting

我目前正在开发一个从暴雪社区 API 提取 JSON 数据并使用 PHP 解析它的应用程序。一切正常，直到我遇到一个名字中有特殊字符的角色。

为了提取角色数据，我需要知道他们的角色名称和他们所在的领域。

我通过 URL 将名称和领域传递到角色页面，并从那里使用该信息提取角色数据。

此时我的网址是这样的：

```
 http://localhost/guildtree/characters.php?realm=argent-dawn&name=Ankzu 
```

此时，如果我尝试提取带有重音符号的字符的数据，我将被重定向到我的错误页面，因为它不是有效字符。

直到我开始 URL 重写，我才发现我的问题。我被重新定向到我的错误页面，因为沿线的某个地方，特殊字符正在被一些非常不稳定的字符替换。

使用我新重写的 URL，以下工作：

```
 http://localhost/guildtree/argent-dawn/ankzu 
```

但是，名称中带有特殊字符的字符会导致错误消息。

```
 http://localhost/guildtree/argent-dawn/notúk 
```

导致以下错误消息：

“未找到

在此服务器上未找到请求的 URL /guildtree/argent-dawn/notÃºk。”

如您所见，ú 被替换为Ãº，但是当我复制并粘贴 URL 时，ú 显示为 %C3%BA

据我了解，ú 显示为 Ãº 的原因是因为两个字节的 unicode ú 被压缩成两个一个字节的 ASCII 字符，导致显示 Ãº。

我确保我的所有页面的标题中都有以下内容：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

为了让我的应用程序正常工作，我需要那些特殊字符才能正确显示，所以我需要 ú 实际显示为 ú，而不是显示为 ú 但实际上是 Ãº 或 %C3%BA。

字符名称是从 URL 中提取的，如下所示：

```
$charName = $_GET['name']; 
```

是否可以对 $charName 进行编码以正确显示特殊字符？

我已经尝试了所有我能想到的并在谷歌上搜索过，但没有任何效果。

另外，因为我正在使用 URL 重写，所以重写规则允许这些特殊字符是什么？

这是我当前的重写规则：

```
 RewriteRule ^([a-zA-Z0-9_'-]+)/([a-zA-Z]+)$        characters.php?realm=$1&name=$2     [NC] 
```

我知道 ([a-zA-Z]+) 根本不允许特殊字符，我目前一直在努力让特殊字符正确显示。如果我使用 ([a-zA-Z\Ãº]+) 它将工作并显示需要显示的页面。将 \Ãº 添加到规则中似乎是一种非常糟糕的方法，并且在使用重音字符的相应字符时并不总是有效。

任何帮助将不胜感激。如果您需要更多信息，请询问。

编辑：

将我的重写规则更改为以下可以很好地提取信息，但会为我的 CSS 创建一个重定向循环。

```
 RewriteRule ^([a-zA-Z0-9_'-]+)/([^/]+)$        characters.php?realm=$1&name=$2 [NC] 
```

例如我的 CSS 被重定向到

```
http://localhost/guildtree/css/error 
```

代替

```
http://localhost/guildtree/css/style2.css 
```

更新：

通过几个简单的测试：

```
$charName = $_GET['name'];
$charNameTEST = utf8_encode($charName); 
```

将进行更改，但是当我将其应用于我的页面时，它仍然会出现：

“未找到

在此服务器上未找到请求的 URL /guildtree/argent-dawn/notÃºk。”

我认为现在的主要问题是 URL 重定向，因为当 JSON 数据具有重音字符时，它可以很好地解析。我只是不明白为什么它一直向我显示它在浏览器栏中的 guildtree/argent-dawn/notúk 上，但一直试图拉起 /guildtree/argent-dawn/notÃºk。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:54:07.443

对于 URL，ú 不是有效字符。

无论您在何处链接用户名，都应该对其进行 URL 编码。

因此，要指向的正确 URL 是：

```
http://localhost/guildtree/argent-dawn/not%C3%BAk 
```

您应该在 php 中将其打印为：

```
echo '<a href="http://localhost/guildtree/argent-dawn/'. urlencode($name) .'">Link</a>; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:50:41.063

要使其正常工作，您需要做两件事。

首先将此添加到您的 .htaccess

```
AddDefaultCharset On
AddDefaultCharset UTF-8
AddCharset UTF-8 .tpl
AddCharset UTF-8 .js
AddCharset UTF-8 .css
AddCharset UTF-8 .php 
```

其次，更改重写规则中需要允许特殊字符 (.*) 的部分，如下所示：

```
 RewriteRule ^([a-zA-Z0-9_'-]+)/(.*)$       characters.php?realm=$1&name=$2     [NC] 
```

这将导致其他页面出现一些重定向循环，但我目前正在努力解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T15:02:44.273

我想[这个问题](https://stackoverflow.com/questions/7946003/htaccess-rewrite-rule-wont-unicode-characters)可能有你的答案。我自己**没有**尝试过，但据我所知，您需要将您的 RewriteRule 重写为：

```
RewriteRule ^([a-zA-Z0-9_'-]+)/([a-zA-Z]+)$        characters.php?realm=$1&name=$2     [NC,B] 
```

**B**标志将确保特殊字符是 URL 转义的，因此 $2 中 name 看到的值将是百分比编码的。由于您没有进行重定向，因此原始 unicode 字符应该仍然是 URL 中显示的内容。

您还需要对正则表达式进行一些更改，以确保它与 unicode 字符匹配。我不确定那些会是什么。

这里还有更多关于[unicode 字符在 URL 中的工作](https://stackoverflow.com/questions/2742852/unicode-characters-in-urls)方式的描述。

# spring - Spring - 上下文扫描失败，请求工厂（gwt）

> ID：12111592
> 
> 赞同：0
> 
> 时间：2012-08-24T14:41:41.833
> 
> 标签：spring, gwt, requestfactory

在一个 gwt web 应用程序中，我使用 spring。

如果我在我的 applicationContext.xml 文件中使用

```
<context:component-scan base-package="com.test.**"/> 
```

找不到我的 bean，我需要在 applicationContext 文件中手动声明它。

我的 web.xml 文件

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
     <servlet-name>gwtRequest</servlet-name>
     <servlet-class>com.google.web.bindery.requestfactory.server.RequestFactoryServlet</servlet-class>
</servlet>

<servlet-mapping>
     <servlet-name>gwtRequest</servlet-name>
     <url-pattern>/gwtRequest</url-pattern>
</servlet-mapping>

<welcome-file-list>
     <welcome-file>welcomeGWT.html</welcome-file>
</welcome-file-list> 
```

组件扫描失败有什么原因吗？

定位器类

```
public class AccountLocator extends Locator<Account, Long> {

    @Autowired
    private AccountDAO accountDAO;
    ...
} 
```

弹簧服务定位器

```
public class SpringServiceLocator implements ServiceLocator {

    @Override
    public Object getInstance(Class<?> clazz) {
        HttpServletRequest request = RequestFactoryServlet.getThreadLocalRequest();
        ServletContext servletContext = request.getSession().getServletContext();
        ApplicationContext context =       WebApplicationContextUtils.getWebApplicationContext(servletContext);
    return context.getBean(clazz);
} 
```

}

服务器层

```
@Service
public class AccountServiceImpl implements AccountService{
    @Autowired
    private AccountDAO accountDAO;
...
} 
```

道层

```
@Repository
public class AccountDAOImpl implements AccountDAO{
...
} 
```

# java - 为 appengine 的数据存储区编写基本查询

> ID：12111593
> 
> 赞同：0
> 
> 时间：2012-08-24T14:41:48.003
> 
> 标签：java, google-app-engine, jakarta-ee, google-cloud-datastore

我一直在寻找一些简单的例子来证明：

```
submitting data to datastore
retrieving data from datastore
updating data in the datastore
deleting data from the datastore 
```

是否有一些很好的java教程可以证明这一点，或者任何人都可以在这里解释/演示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:16:53.960

官方文档几乎包含您入门所需的一切。您需要的确切页面就是[这一](https://developers.google.com/appengine/docs/java/datastore/queries)页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:52:34.767

使用对象化：

[https://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Basic_Operations:_Get,_Put,_Delete](https://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Basic_Operations:_Get,_Put,_Delete)

# java - 在服务器停止之前，GUI 不会启动

> ID：12111594
> 
> 赞同：1
> 
> 时间：2012-08-24T14:41:51.403
> 
> 标签：java, user-interface, client-server

我在启动我的 GUI 时遇到了困难。它连接到我的`ClientController`. 在我启动我的服务器之后，我也启动了`ClientController`，然后，我的 GUI 应该与它一起运行。但它直到我停止我的服务器才出现，然后它终于出现了。

```
public class ClientController {
    private HashMap<String, ArrayList<String>> drinkar = null;//Controller
    private ServerHandler serverH = new ServerHandler();
    private GUI gui = new GUI(this);

    public void searchDrinks(String jtf) {
        drinkar = serverH.drinksStartsWith(jtf);
        if(drinkar!=null) {
            gui.setDrinks(new ArrayList(drinkar.entrySet()));
            gui.setIngredients(new ArrayList());
        }
        System.out.println(drinkar);
    }

    public void drinkInformation(String drink) {
        ArrayList<String> result = drinkar.get(drink);
        if(result!=null) {
            gui.setIngredients(result);
        }
    }

    public static void main(String[] args) {
        ClientController controller = new ClientController();
    }
} 
```

这是我的 GUI 类

```
public class GUI implements ActionListener {

private JFrame frame = new JFrame("Dryck & Ingrediens"); // GUI
private JTextField jtf = new JTextField();// GUI
private JTextArea jl1 = new JTextArea();// GUI
private JList jl = new JList();// GUI
private JButton b = new JButton("Sök");
private JScrollPane js = new JScrollPane(jl);// GUI
private JLabel lab = new JLabel("Ange dryck");//GUI
private JLabel lab1 = new JLabel("Walid Shams");
private JLabel lab2 = new JLabel("Kushtrim Brahimi");
private ClientController controller;
//    private HashMap<String, ArrayList<String>> drinkar = null;//Controller
//    private ServerHandler serverH = new ServerHandler();

public GUI(ClientController controller) {
    this.controller = controller;

    frame.getContentPane().setLayout(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setBounds(50, 300, 420, 400);
    frame.setResizable(false);
    frame.setVisible(true);
    js.add(jl);
    js.add(jl1);
    jl1.setEditable(false);
    lab.setBounds(90, 20, 130, 20);
    lab1.setBounds(300, 310, 130, 20);
    lab2.setBounds(300, 330, 130,20);
    jtf.setBounds(50, 40, 150, 40);
    b.setBounds(230, 40, 100, 40);
    jl.setBounds(50, 90, 150, 200);
    jl1.setBounds(210, 90, 150, 200);
    Container con = frame.getContentPane();
    con.setBackground(Color.cyan);

    jl.addListSelectionListener(new ListSelectionListener() {

        // sorterar ingredienserna för vald drink och skriver ut i textArea
        public void valueChanged(ListSelectionEvent e) {
             if (jl.getSelectedIndex() != -1) {
                 String item = (String) jl.getSelectedValue();
                 jl1.setText("");
//                     controller.drinkInformation(item);
             }else{
                 jl1.setText("");
             }
        }
    });
    frame.add(jtf);
    frame.add(jl);
    frame.add(jl1);
    frame.add(lab);
    frame.add(lab1);
    frame.add(lab2);
    frame.add(js);
    frame.add(b);

    b.addActionListener(this);
}

public void actionPerformed(ActionEvent e) {
    if(e.getSource().equals(b)){
        if (jtf.getText().length() > 0) {
            controller.searchDrinks(jtf.getText());
        }
    }

}

public void setDrinks(ArrayList<String> drinks) {
    DefaultListModel model = new DefaultListModel();

    for(int i = 0; i < drinks.size(); i++){
        model.addElement(drinks.get(i));
    }
    jl.setModel(model);

}

public void setIngredients(ArrayList<String> ingredients) {

    for(String ingredient : ingredients){
        jl1.append(ingredient + "\n");
    }
}

} 
```

最后是我的服务器

```
public class Server {

    private ServerSocket server;
    private Socket socket;
    private ObjectOutputStream oos;
    private DataOutputStream dos;
    private DataInputStream dis;
    private HashMap<String, ArrayList<String>> drinkar = new HashMap<String, ArrayList<String>>();
    private int port;

    public Server(int port){
        this.port = port;
        Thread connectThread = new Thread( new Connect() );
        connectThread.start();
    }

    // låter en klient koppla upp sig till servern
    private class Connect implements Runnable {
        public void run() {
            try {
                server = new ServerSocket(port);
                System.out.println("Server running");
                while (true) {
                    socket = server.accept();
                    Thread clientThread = new Thread( new TalkToClient( socket ) );
            clientThread.start();
                    System.out.println("someone connected");
                }
            } catch (IOException ex) {
                Logger.getLogger(Server.class.getName()).log(Level.SEVERE, null, ex);
            }
            try {
                server.close();
            } catch( Exception e ) {}
        }
    }

    // sköter kommunikationen med klienter
    private class TalkToClient implements Runnable{
        private Socket socket;
        public TalkToClient( Socket socket ) {
            this.socket = socket;
        }
        public void run() {
            String clientMsg;
            try {
                dis = new DataInputStream(socket.getInputStream());
                while ((clientMsg = dis.readUTF()) != null) {
                    if (clientMsg.length() > 0) {
                        dos = new DataOutputStream(socket.getOutputStream());
                        dos.writeUTF("read");
                        drinkar = Mysql.getDrinks(clientMsg);
                        sendNames();
                    }
                }
            } catch (Exception e) {
                System.out.println(e);
            }

        }

    }

    // skickar med hashmapen med writeObject
    public void sendNames() {

        try {
            oos = new ObjectOutputStream(socket.getOutputStream());
            oos.writeObject(drinkar);
        } catch (IOException ex) {
            Logger.getLogger(Server.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static void main(String[] args) {
        new Server(4444);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:57:01.330

我认为必须是 ServerHandler 代码中的问题。你能发布这个类的代码吗？将 GUI 的初始化放在 ServerHandler 之前会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:06:43.940

当服务器启动时，它会写入输出流。它锁定试图与服务器建立连接的客户端。

# mysql - 如何将以下信息组合到 1 个 mysql 查询中？

> ID：12111600
> 
> 赞同：2
> 
> 时间：2012-08-24T14:42:06.940
> 
> 标签：mysql, sql, sorting

**细节**

我想找出每个测试的开始和停止时间（持续时间）之间的差异，然后根据每个测试的最高分和最低持续时间对用户进行排名。最终我将使用 PDO 在 mysql 中执行此操作。到目前为止，虽然我一直在研究 sql。我想我现在已经很接近了，但不确定`how to combine the information into one query`。

**我有什么（未经测试）。**

我有下表称为`testresults`

```
--------------------------------------------------------------------
| index | id |         start         |          stop        | score| 
--------------------------------------------------------------------
|   1   | 23 |   2012-06-06 07:30:20 | 2012-06-06 07:30:34  | 100  |
-------------------------------------------------------------------- 
```

在我的选择语句中，我想得到`id`and`score`以及计算的`duration`.

我可以通过以下查询获得今天进行的任何测试的持续时间。

```
SELECT TIMESTAMPDIFF(SECOND,stop,start) AS duration
FROM testresults WHERE `start` >= DATE(NOW()) 
```

然后我根据排名对结果进行排序。排名根据分数和持续时间确定。最高分以最短的持续时间获得最高分。我相信我可以通过以下方式做到这一点：

```
ORDER BY score DESC, duration ASC 
```

我只想要大约 100 个条目，所以，

```
LIMIT 100 
```

**问题**

如何将上述信息组合成 1 个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:46:38.257

```
SELECT `id`, `score`,
    TIMESTAMPDIFF( SECOND, start, stop ) AS `duration`
FROM `testresults`
WHERE `start` >= DATE(NOW())
ORDER BY `score` DESC, `duration` ASC
LIMIT 100; 
```

这会很好用。您还需要在声明中加上`id`& 。`score``SELECT`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:47:55.603

```
SELECT id, score, TIMESTAMPDIFF(SECOND,stop,start) AS duration FROM testresults
WHERE `start` >= DATE(NOW()) ORDER BY score DESC, duration ASC LIMIT 100 
```

这应该工作

# asp.net - 如何提取网页的标题图片

> ID：12111605
> 
> 赞同：1
> 
> 时间：2012-08-24T14:42:25.203
> 
> 标签：asp.net, html, regex, page-title, asp.net-webpages

我想在 ASP.NET 中使用 C# 提取网页的标题图像。我检查了窗口和文档对象，但它们没有标题等属性。因此，在 Chrome 的页面选项卡中寻找提取标题图像的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:50:30.650

```
using (WebClient client = new WebClient())
{
  Byte[] favico = client.DownloadData("http://msite.com/favico.ico");
} 
```

那是使用[`WebClient.DownloadData`](http://msdn.microsoft.com/en-us/library/xz398a3f). [`WebClient.DownloadFile`](http://msdn.microsoft.com/en-us/library/ez801hhe)如果您要存储它，也可以使用它。

进一步的防弹方法是下载索引页面并使用 HTML 解析器来查找`<link>`指定图标应该在哪里的标记（也可以应用于 apple-touch-icon 或其他）。

顺便说一句，我相信您要解析的标签是：

```
<!-- StackOverflow's implementation: -->
<link rel="shortcut icon" href="http://cdn.../favicon.ico">
<link rel="apple-touch-icon" href="http://cdn.../apple-touch-icon.png">

<!-- Google's implementation: -->
<meta content="/images/google_favicon_128.png" itemprop="image">

<!-- Facebook's implementation: -->
<link href="http://static.ak.fbcdn.net/.../q9U99v3_saj.ico" rel="shortcut icon"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:51:04.473

HTML 规范中没有“标题图像”之类的东西。您在选项卡中或某些浏览器中的 URL 附近看到的图标是使用`<link rel="icon"/>`构造指定的：

```
<link type="image/x-icon" href="/images/favicon.ico" rel="icon" /> 
```

IE 可能会要求您使用稍微不同的语法：

```
<link type="image/x-icon" href="/images/favicon.ico" rel="shortcut" /> 
```

解析页面 - 并检索`href`属性值 - 这是图标的路径。

另请注意，IE 8 及以下版本完全忽略此行，而是`favicon.ico`在站点的根目录中查找文件。有关 IE 的更多信息，请参阅[这篇有些旧的文章](http://mathiasbynens.be/notes/rel-shortcut-icon)。

# c - “程序中的杂散'\226'”编译器错误

> ID：12111606
> 
> 赞同：-2
> 
> 时间：2012-08-24T14:42:27.050
> 
> 标签：c

我写了以下代码。就是实现一个*双向链表*。但是出现了错误。

```
while(x==1); // This line showed errors
return 1; 
```

错误：

```
DoublyLinkedList.c: In function `main':
DoublyLinkedList.c:194: error: stray '\226' in program
DoublyLinkedList.c:194: error: stray '\128' in program
DoublyLinkedList.c:194: error: stray '\156' in program
DoublyLinkedList.c:194: error: `The' undeclared (first use in this function)
DoublyLinkedList.c:194: error: (Each undeclared identifier is reported only once
DoublyLinkedList.c:194: error: for each function it appears in.)
DoublyLinkedList.c:194: error: parse error before "list"
DoublyLinkedList.c:194: error: stray '\226' in program
DoublyLinkedList.c:194: error: stray '\128' in program
DoublyLinkedList.c:194: error: stray '\157' in program 
```

什么是杂散错误？那些随机数是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-16T00:52:41.847

我从 Microsoft Word 文档中剪切粘贴了一些代码。减号由我的文本编辑器显示，但它实际上是八进制 226 或十六进制 96 的值。减号应该是十六进制 2D。当我将代码作为二进制文件打开时，我可以看到它——八进制 226 在 ASCII 列表中显示为一个块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:53:30.087

您`DoublyLinkedList.c`似乎包含无效的 C 文本。这些数字是在 C 程序中无效的字符的八进制值。

如果您打算在源文件的开头放置描述性注释，请确保注释的每一行都以`//`.

```
while(x==1); 
```

是一个空主体（即最后的分号）的 while 循环。如果`x`为 1，您的程序将无限循环。

# jquery - div onclick 中断子单选检查行为

> ID：12111613
> 
> 赞同：2
> 
> 时间：2012-08-24T14:42:40.560
> 
> 标签：jquery, radio, checked

我折叠了一些 div，让用户展开它们并选择单选框/复选框。我有这段代码和一个简单的 jquery 脚本。问题是单选按钮检查行为被其父 div 的 onclick 处理程序破坏。任何想法我如何解决它？

```
 <div class="tree">
        <div class="parent">Item
           <div class="parent">ParentItem
              <div>
                 <input type="radio" name="_gen" value="a"></input>LeafItem a
              </div>
              <div>
                 <input type="radio" name="_gen" value="b"></input>LeafItem b
              </div>
         </div>
        </div>
     </div>
     <script type="text/javascript">
                $(function() {
                $('div.tree div:has(div)').addClass('parent'); 
                $('div.tree div').click(function() {
                    var o = $(this);
                    o.children('div').toggle();
                    o.children($(':radio')).attr('checked', true);
                    o.filter('.parent').toggleClass('expanded');
                    return false;
                    });
                });
            </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:48:09.587

不太确定您在这里尝试做什么，但停止输入的传播将解决点击在更高元素上注册的问题：

```
$(function() {
    $('div.tree div:has(div)').addClass('parent');
    $('div.tree div').click(function() {
        var o = $(this);
        o.children('div').toggle();
        o.children($(':radio')).attr('checked', true);
        o.filter('.parent').toggleClass('expanded');
        return false;
    });
    $('input[type="radio"]').on('click', function(e) {
        e.stopPropagation();
    });​
}); 
```

[**小提琴**](http://jsfiddle.net/6Ejwn/)

此外，输入标签是自关闭的，不需要关闭？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:51:44.410

这在我看来更好：

```
$('div.tree div:has(div)').addClass('parent');
$('div.tree div').click(function( e ) {
    if ( !$(e.target).hasClass("parent") ) {
        return;
    }
    var o = $(this);
    o.children('div').toggle();
    o.children($(':radio')).attr('checked', true);
    o.filter('.parent').toggleClass('expanded');
    return false;
}); 
```

这样，您只需创建一个*事件*，然后检查该事件中的**目标**，看看它是否有一个名为`.parent`.

# android - 使用 ObjectAnimator 让 touchevents 在 2.3 上工作

> ID：12111614
> 
> 赞同：0
> 
> 时间：2012-08-24T14:42:45.147
> 
> 标签：android, views, translate-animation, objectanimator

所以首先让我给你一些关于我正在尝试做的事情和我尝试过的事情的背景信息：) 我有多达十个视图，我需要不断地从右到左移动。一旦一个视图离开屏幕，另一个视图就会从右侧进入。所有的视图都需要是可触摸的。我能够通过几种方式实现这一点，但它们并不顺利（有些结结巴巴，有些在应用程序变慢时似乎跳了起来）。所有这些视图都在一个 viewGroup 中，我正在重用它们（只有 10 个视图）。

这些是我尝试过的方法：

1.  更改视图的边距（使用处理程序更新）
2.  调用 View.layout(l,t,r,b) （使用处理程序更新）
3.  获取 View.getDrawingCache() 并将其绘制在 surfaceView 上（也使用处理程序）
4.  使用 ObjectAnimator (nineoldandroids)

它们都不是很流畅（视图会停止几分之一秒并跳跃），但最好的是使用动画。我首先使用了来自 android 的常规 translateAnimation，但当然这是不可触摸的。我尝试获取动画的矩阵（我不知道是否做错了什么），但它没有返回视图的顶部/左侧：

```
Transformation outTransformation = new Transformation();
      getTransformation(System.currentTimeMillis(), outTransformation);
      Matrix transformationMatrix = outTransformation.getMatrix();
      float[] matrixValues = new float[9];
      transformationMatrix.getValues(matrixValues);
      float transX = matrixValues[2];
      float transY = matrixValues[5]; 
```

所以现在我的问题。

我得到的最好结果是使用 ObjectAnimator。

```
mAnimation[index] = ObjectAnimator.ofFloat(mViews[index], "translationX", -left);
            mAnimation[index].setDuration(time);
            mAnimation[index].setInterpolator(new LinearInterpolator());
            mAnimation[index].addListener(mAnimatorListener);
            mAnimation[index].start(); 
```

我可以使用 ObjectAnimator 进行触摸，但只能使用 android 3.0 及更高版本（不是 2.3）。

有谁知道为什么或如何让触摸在 android 2.3 上工作？还是有更好的方法来移动所有这些视图？在移动/动画这么多视图时，我应该记住或做哪些事情？

您是否知道如何提高使用上述任何其他选项的“流畅性”（口吃或停止几分之一秒并跳起来赶上）？

ViewGroup 是最好用的吗？抱歉问了这么多问题。

任何想法、想法或评论都会非常有帮助，非常感谢 :) 如果您有更多问题或不明白的地方，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T18:40:08.620

我刚找到你的问题，因为我遇到了同样的问题。我有一个充满按钮的布局，我使用 NineOldAndroids 的[ObjectAnimator](http://nineoldandroids.com/)来移动它。如果 API >= 11，那么一切正常，所有按钮都可以点击到它们的新位置。但是，如果 API < 11，那么虽然布局移动了，但按钮在其新位置不可点击，而是在其旧位置可点击。还要检查[这个](https://stackoverflow.com/questions/15132980/android-objectanimator-in-not-working?rq=1)答案。

# python - multiprocessing.Pool 的奇怪行为，为什么它抓取了错误的函数？

> ID：12111616
> 
> 赞同：3
> 
> 时间：2012-08-24T14:42:50.663
> 
> 标签：python, multiprocessing

我不明白 Python`multiprocessing.Pool`在这种情况下的行为：

```
import multiprocessing

def f(x): return x
P = multiprocessing.Pool()
def f(x): return x*x

print (P.map(f, range(10)))
print (  map(f, range(10))) 
```

这导致输出：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

在调用打印语句的地方，不是只有一个`f`吗？为什么 Pool 会抓取 的第一个实例`f`？我希望这一点`P.map`并`map`输出相同的结果！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:58:30.903

这是一个很好的问题，我希望在线程（和多处理）方面具有更多知识/经验的人能够提供更好的答案，但这是我的尝试：

在这里没有真正深入研究细节（在快速查看源代码之后），构造函数似乎`Pool`产生了多个线程来处理任务队列。这些线程似乎只是四处寻找要放入其中的东西。因此，看起来当线程收到运行 function 的请求时`__main__.f`，它确实如此，但是，由于它从未见过 的更新定义`__main__.f`，它使用旧定义。

# c# - TCP 是否必须以一对一的发送/接收方式使用？

> ID：12111617
> 
> 赞同：0
> 
> 时间：2012-08-24T14:42:52.160
> 
> 标签：c#, tcp

我正在开发一个嵌入式系统，它使用 TCP 套接字通过以太网连接到 PC。PC 是 TCP 客户端，嵌入式系统是服务器。如果我理解正确的话，经典的通信模型是客户端向服务器发送一些数据，服务器每次都会响应。服务器从不发起通信。

我想做的是从 PC 向嵌入式系统发送命令，而没有相应的响应。然后嵌入式系统将执行命令描述的任务。如果嵌入式系统有错误，或者有一些状态信息要报告回来，它会发回这些信息，而不被 PC 轮询。

除了PC端的接收之外，我已经弄清楚了一切。我正在用 C#.net 编写 PC 应用程序 我可以设置一个回调，只要在套接字上接收到数据就会触发吗？我见过的每个示例都以阻塞方式使用接收方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:47:50.813

您可以在套接字流上使用异步 I/O。这几乎正​​是您所要求的 - 您开始接收操作并在接收完成时给它一个回调以调用。

查看 BeginReceive/EndReceive 函数。

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/bbx2eya8.aspx](http://msdn.microsoft.com/en-us/library/bbx2eya8.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:49:36.610

当然，总而言之是肯定的。

您要做的是为每个连接的客户端启动一个新线程，然后在事件/命令线程上引发事件。除了（这由操作系统的 TCP/IP 堆栈处理）之外，您没有义务响应请求（这由您的操作系统的 TCP/IP 堆栈处理）在您收到数据包时发送 ACK（不要担心操作系统为您执行此操作的这一部分，它是TCP/IP 可靠的部分原因）。

只要套接字处于活动状态，您就应该能够向客户端发送回响应，所以基本上只要任何命令正在运行，您就需要保持套接字处于活动状态。

以下是 Microsoft 的示例列表，应向您展示如何执行此操作。[http://msdn.microsoft.com/en-us/library/bew39x2a.aspx#Y0](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx#Y0)

# c# - 更改 GridView 标题位置

> ID：12111619
> 
> 赞同：6
> 
> 时间：2012-08-24T14:42:56.963
> 
> 标签：c#, xaml, gridview, microsoft-metro, windows-runtime

我有一个普通的 GridView，它显示分组数据。我的目标是将标题（一个按钮）从组的顶部移动到组的左侧。

```
<GridView>
    <GridView.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </GridView.ItemsPanel>

    <GridView.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <Grid>
                        <Button Content="{Binding Title}"/>
                    </Grid>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
            <GroupStyle.Panel>
                <ItemsPanelTemplate>
                    <VariableSizedWrapGrid ItemWidth="240" ItemHeight="160" Orientation="Vertical" Margin="0,0,80,0"/>
                </ItemsPanelTemplate>
            </GroupStyle.Panel>
        </GroupStyle>
    </GridView.GroupStyle>

    <GridView.ItemTemplate>
        <!-- item template -->
    </GridView.ItemTemplate>
</GridView> 
```

对这个问题[在 Windows 8 Metro App 中分组 GridView](https://stackoverflow.com/questions/9861736/grouping-gridview-in-windows-8-metro-app)的回答- 虽然不完全相同的所需布局 - 表示如果不添加额外的“虚拟磁贴”，所需的布局是不可能的。

我想知道是否有可能实现我的目标 - 将标题从组的顶部移动到组的左侧 - 没有这样一个额外的“虚拟瓷砖”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T23:03:55.577

您需要编辑标题容器样式。在 Visual Studio 中，右键单击 GridView 并选择

```
Edit Group Style -> Edit Generated Item Container (Container Style) -> Edit a Copy 
```

您将看到 Group Header，它是一个 Content Control，以及 Group Items，它是一个 ItemsControl。两者都包含在一个网格中，默认情况下，它是简单的两行。您可以添加一列，将组标题移动到`Grid.Column=0`&`Grid.Row=1`中，您应该一切顺利。

# php - PHP 多字节替代 UTF8

> ID：12111622
> 
> 赞同：4
> 
> 时间：2012-08-24T14:42:59.073
> 
> 标签：php, utf-8, multibyte-functions

我一直在寻找字符串操作函数的 UTF8 安全替代方案。我发现了许多不同的意见和建议。我想问一下以下函数是否会导致 UTF-8 出现问题，如果会，我应该改用什么。我知道 PHP 手册中的 mb_ 前缀函数列表，但并不是我使用的所有函数。

函数有：内爆、爆炸、str_replace、preg_match、preg_replace

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T14:54:52.473

`explode`只是查找相同的字节序列并在该点分隔字符串。由于 UTF-8 与 ASCII 安全地向后兼容，因此无需担心，它会正常工作。`implode`只需将字符串组合在一起，由于 UTF-8 的特性，它也可以正常工作。`str_replace`出于同样的原因工作。`preg_`只要您使用[`/u`修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)，这些功能就可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:48:51.857

如果您需要安全地使用 UTF8 字符进行操作，您可以这样做：

```
mb_internal_encoding('UTF-8');
preg_replace( '`...`u', '...', $string ) // with the u (unicode) modifier 
```

# ruby-on-rails - 如何将默认 AASM 状态添加到现有模型

> ID：12111627
> 
> 赞同：3
> 
> 时间：2012-08-24T14:43:22.370
> 
> 标签：ruby-on-rails, aasm, acts-as-state-machine

我在 Rails 中有一个现有模型，我想向其中添加 AASM 状态。

根据我的理解，我应该首先通过迁移向我的数据库添加一个状态列，然后向我的 rails 模型添加一些状态。如何根据另一列中的值设置默认状态值？

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T15:14:11.497

你在正确的轨道上。您可以在迁移本身中设置新记录的初始状态。

使用 :default 选项，如下所示。如果每条记录都具有完全相同的起始状态，这将非常有用：

```
# Assuming your model is named Order
class AddStateToOrders < ActiveRecord::Migration
  add_column :orders, :state, :string, :default => 'new'
end 
```

或者，您可以在添加列后使用简单的 ruby​​ 设置每条记录的状态。如果记录的初始状态是有条件的，则更有用。

```
# Still assuming your model is named Order
class AddStateToOrders < ActiveRecord::Migration
  add_column :orders, :state, :string

  # Loop through all the orders, find out whether it was paid and set the state accordingly
  Order.all.each do |order|
    if order.paid_on.blank?
      order.state = 'new'
    else
      order.state = 'paid'
    end
    order.save
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T04:33:07.553

彼得的答案很好，但它有一个缺陷。如果您更改默认状态，则需要编写新的迁移。所以，

```
class AddStateToOrders < ActiveRecord::Migration
  def self.up
    add_column :orders, :state, :string
    Order.update_all(aasm_state: 'new') # it will apply just for existing records with empty state.
  end

  def self.down
    remove_column :orders, :state
  end
end 
```

# jquery - 将灯箱画廊从垂直更改为水平

> ID：12111633
> 
> 赞同：0
> 
> 时间：2012-08-24T14:43:40.973
> 
> 标签：jquery, html

[由于我的标题状态灯箱有一个像这样](http://leandrovieira.com/projects/jquery/lightbox/)的开放画廊示例。有人可以给我一个关于如何将其从水平更改为垂直的提示或想法。

由于我正要问这个问题，并且在发布之前我想出了答案，所以我想分享解决方案。

先决条件：

最新的 JQuery.js

```
1.<script src="light-box/jquery.lightbox-0.5.js" type="text/javascript"></script>
2.<link href="light-box/jquery.lightbox-0.5.css" rel="stylesheet" type="text/css" />

3.<script type="text/javascript">
            $(function () {
                $('#gallery a').lightBox();
            });
    </script>`
4\.      <style type="text/css">
/* jQuery lightBox plugin - Gallery style */
#gallery {
    background-color: #444;
    padding: 10px;
    width: 135px;
}
#gallery ul { list-style: none; }
#gallery ul li { display: inline; }
#gallery ul img {
    border: 5px solid #3e3e3e;
    border-width: 5px 5px 20px;
}
#gallery ul a:hover img {
    border: 5px solid #fff;
    border-width: 5px 5px 20px;
    color: #fff;
}
#gallery ul a:hover { color: #fff; }
</style> 
```

> 请注意“#gallery ul li { display: inline; }”是内联的，只需将其更改为“list-item”，然后您就可以进入垂直位置。

LightBox 的下载地址就[在这里](http://leandrovieira.com/download/7/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:46:53.950

```
#gallery ul li { display: list-item; } 
```

# android - Android 中没有哪些最重要的 POSIX 功能？

> ID：12111640
> 
> 赞同：12
> 
> 时间：2012-08-24T14:44:17.777
> 
> 标签：android, c++, linux, android-ndk, posix

我即将将一个大型 C++ 项目（某种库项目，它绝对不包含 GUI）移植到 Android。它实际上是一个 Visual C++ 项目，但将作为中间步骤移植到 Linux。我知道 Android 不是一个“完整的”Linux，也没有声称提供所有 POSIX 功能，但我也知道使用 NDK 在 Android 上有很多“POSIXish 功能”。

**现在我的实际问题是：**

与完整的 POSIX 集相比，哪些是 Android 上不可用的最大/最重要的功能？这样我在从 Visual C++ 移植到 Linux GCC 时可以牢记这一点。

我试图在谷歌上找到一些东西，但没有发现任何真正有用的东西，只是到处都有一些东西提到 Android 上有一些 POSIX 功能......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:46:15.443

仿生由谷歌重新编码。它很小，但针对 Android 进行了优化。

我知道它唯一缺少的就是`pthread_cancel()`功能。

我的经验是，如果你成功地将它移植到 GNU/Linux，而无需`pthread_cancel()`调用，那么你应该没问题。

顺便说一句，你想建立什么样的图书馆？它有什么用途？网络、线程...

PS：即使是 Linux 也不完全是 POSIX。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-04T13:17:59.107

**仿生维基百科页面**

[https://en.wikipedia.org/wiki/Bionic_(software)#Differences_from_POSIX](https://en.wikipedia.org/wiki/Bionic_(software)#Differences_from_POSIX)

还有一些有趣的信息：

> 尽管仿生旨在实现所有 C11 和 POSIX，但 libc 中仍然（截至 Oreo）大约 70 个 POSIX 函数缺失[8]。还有一些 POSIX 函数，例如 endpwent/getpwent/setpwent 系列不适用于 Android，因为它缺少 passwd 数据库。从 Oreo 开始，libm 已经完成。
> 
> 出于安全原因，某些函数故意不符合 POSIX 或 C 标准，例如 printf 不支持 %n 格式字符串。 [9]

**树文档中的官方仿生引用**

[https://android.googlesource.com/platform/bionic/+/37ad9597839c70a7ec79578e5072df9c189fc830/docs/status.md](https://android.googlesource.com/platform/bionic/+/37ad9597839c70a7ec79578e5072df9c189fc830/docs/status.md)

> 在 bionic/ 中运行 ./libc/tools/check-symbols-glibc.py 以获取由 glibc 但不是由 bionic 实现的 POSIX 函数的当前列表。目前（2017-10）：
> 
> ```
> aio_cancel
> aio_error
> aio_fsync
> aio_read
> aio_return
> aio_suspend
> aio_write
> lio_listio
> pthread_cancel
> pthread_mutex_consistent
> pthread_mutex_getprioceiling
> pthread_mutex_setprioceiling
> pthread_mutexattr_getprioceiling
> pthread_mutexattr_getprotocol
> pthread_mutexattr_getrobust
> pthread_mutexattr_setprioceiling
> pthread_mutexattr_setprotocol
> pthread_mutexattr_setrobust
> pthread_setcancelstate
> pthread_setcanceltype
> pthread_testcancel
> wordexp
> wordfree
> libm 
> ```
> 
> 当前的 libm 符号：[https ://android.googlesource.com/platform/bionic/+/master/libm/libm.map.txt](https://android.googlesource.com/platform/bionic/+/master/libm/libm.map.txt)
> 
> 0 剩余缺少 POSIX libm 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T13:38:59.607

最明显的特征缺失是`pthread_cancel()`.

这个博客有一些额外的细节：[http ://codingrelic.geekhold.com/2008/11/six-million-dollar-libc.html](http://codingrelic.geekhold.com/2008/11/six-million-dollar-libc.html)

仿生很好的概述：[https://android-platform.googlegroups.com/attach/0f8eba5ecb95c6f4/OVERVIEW.TXT?gda=HWJaO0UAAAB1RXoVyyH5sRXFfLYnAq48KOFqr-45JqvtfiaR6gxIj4Qe8cBqW3BaWdSUPWi_jHqO3f1cykW9hbJ1ju6H3kglGu1iLHeqhw4ZZRj3RjJ_-A&view=1&part=4](https://android-platform.googlegroups.com/attach/0f8eba5ecb95c6f4/OVERVIEW.TXT?gda=HWJaO0UAAAB1RXoVyyH5sRXFfLYnAq48KOFqr-45JqvtfiaR6gxIj4Qe8cBqW3BaWdSUPWi_jHqO3f1cykW9hbJ1ju6H3kglGu1iLHeqhw4ZZRj3RjJ_-A&view=1&part=4)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-22T21:41:50.813

共享内存也是您可能会发现在 android 中以不同方式实现的东西。尝试在 android 内核上使用 shm_open 和 shm_unlink 时受到重创。Android 实现了异步共享内存（ashmem）。

# mysql - (ActiveRecord) update_attributes 不更新数据库记录

> ID：12111641
> 
> 赞同：0
> 
> 时间：2012-08-24T14:44:20.903
> 
> 标签：mysql, ruby-on-rails, activerecord

基本上我在警报和更新之间有一对多的关系。许多更新属于一个警报。现在我的问题是我无法更新数据库中的任何记录。我可以毫无问题地创建新记录。Rails 记录器将实际记录打印到日志中。正如您从日志文件中看到的那样，@new_alert 检索更改的记录，该记录应保存到数据库中。虽然它说“警报已成功更新”，但它不会用新记录更新旧记录。当我删除警报和更新之间的关系时，它会完美运行。我想我错过了警报或更新模型中的某些内容。

alerts_controller.rb ...

```
def update
@alert = Alert.find(params[:id])
    @new_alert = params[:alert]

    Rails.logger.debug "alert_params: #{@new_alert.inspect}"
    Rails.logger.debug "alert_db: #{@alert.inspect}"

respond_to do |format|
  if @alert.update_attributes(params[:alert])
    format.html { redirect_to @alert, notice: 'Alert was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @alert.errors, status: :unprocessable_entity }
  end
end 
end... 
```

警报.rb

```
class Alert < ActiveRecord::Base
  has_many :update  
  accepts_nested_attributes_for :update
end 
```

更新.rb

```
class Update < ActiveRecord::Base
belongs_to :alert, :foreign_key => 'alert_id'  
end 
```

(MySQL) 警报表：

```
CREATE TABLE `alerts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `status_id` int(11) DEFAULT NULL,
  `date` datetime DEFAULT NULL,
  `text` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `title` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `update_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`) 
```

(MySQL) 更新表：

```
CREATE TABLE `updates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `alert_id` int(11) DEFAULT NULL,
  `text` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `date` datetime DEFAULT NULL,
  PRIMARY KEY (`id`) 
```

日志输出：

```
Started PUT "/alerts/4" for 127.0.0.1 at 2012-08-24 15:47:12 +0200
Processing by AlertsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"GHM+S34PV4o46SpZZm67+mM8Lu9eY/BiWGMjDpwju9c=", "alert"=>{"title"=>"afgaegafga56556", "text"=>"afgafgafgarg", "status_id"=>"2"}, "commit"=>"Update Alert", "id"=>"4"}
  [1m[35mAlert Load (0.5ms)[0m  SELECT `alerts`.* FROM `alerts` WHERE `alerts`.`id` = 4 LIMIT 1
alert_params: {"title"=>"afgaegafga56556", "text"=>"afgafgafgarg", "status_id"=>"2"}
alert_db: #<Alert id: 4, status_id: 2, date: "2012-08-22 20:00:19", text: "afgafgafgarg", title: "afgaegafga", update_id: 1>
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mUpdate Load (0.5ms)[0m  SELECT `updates`.* FROM `updates` WHERE `updates`.`alert_id` = 4
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/alerts/4
Completed 302 Found in 4ms (ActiveRecord: 1.5ms) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:23:24.497

`has_many :update`应该是复数：`has_many :updates`否则关系可能不起作用。

对于`accepts_nested_attributes_for`.

此外（不重要但可能很高兴知道）当它与关系名称匹配时，您不必定义外键。所以`belongs_to :alert, :foreign_key => 'alert_id'`是完全一样的`belongs_to :alert`。

# resharper - 自动添加默认鹦鹉评论

> ID：12111652
> 
> 赞同：0
> 
> 时间：2012-08-24T14:44:45.113
> 
> 标签：resharper

别介意这可能很愚蠢的事实，但我想添加默认的鹦鹉评论，例如：

```
/// <summary>
/// Constructor
/// </summary>
public AAbout()
{
    InitializeComponent();
}        

/// <summary>
/// Foo
/// </summary>
Don't want parameters defaulted
public Foo( int param)
{
} 
```

除非这对 Ctor 来说是不可能的，但这很好。我也想要这个属性而不是字段。这是我公司的编码标准，这不是我的标准，让我们不要进入:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:20:42.697

您可以为此定义自定义模板。转到 Resharper -> 模板资源管理器。添加新模板，如下所示： ![在此处输入图像描述](../Images/3758939b87f43e792cb28f505fd052a8.png) 然后您可以在代码编辑中使用它，只需键入“constr”。您可以为属性生成定义额外的模板（或编辑存在）。如果您使用的是 R# 6+，您可以将模板作为 R# 设置的一部分与您的团队共享。[在此处](http://www.jetbrains.com/resharper/features/codeTemplate.html)阅读有关 R# 模板的更多信息。

# file - 如何从客户端获取目录树

> ID：12111653
> 
> 赞同：1
> 
> 时间：2012-08-24T14:44:44.670
> 
> 标签：file, web, directory, client

我正在尝试创建一个网站，用户可以在其中从他/她的电脑中选择一个目录。然后我想从那时起获得一个完整的目录树。这样我就可以处理文件名。不需要上传任何东西。只是文件名就足够了。我见过的最接近的是[http://www.connect.garmin.com](http://www.connect.garmin.com)上的上传过程。当您插入 GPS 并单击上传时。该站点为您提供了可以从您的 gps 上传的文件的完整列表，以及您是否已经上传了它。

如何才能做到这一点？PHP、javascript 还是 python 中的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:54:34.797

看起来有几个人和你有同样的问题，这是我在 SO [HTML5 Upload Blog上的另一个问题上找到的博客链接](http://www.matlus.com/html5-file-upload-with-progress/)

这是我在 [Html 5 File upload 上找到的 SO Question](https://stackoverflow.com/questions/4162102/html-5-file-upload)

该博客上有很多非常有用的信息，我认为您会在那里找到您所要求的一切。

大多数文件浏览由客户端 Web 浏览器完成，因此您不必担心对实际弹出窗口进行编码。您只需向浏览器提供您要查找的文件类型。

# pdo - Dynamic PDO AND and OR

> ID：12111654
> 
> 赞同：0
> 
> 时间：2012-08-24T14:44:50.717
> 
> 标签：pdo, yii

I have a problem with Yii's `CDBCrtieria` builder. I am trying to make a rather complex query while using the escaping and safe functions provided by PDO.

Here is the query I am basically trying to build:

```
SELECT * FROM tbl_audit_log 
    WHERE (model_id = 1 AND model = "Title") OR 
          (model_id = 1 AND model = "Product") //etc 
```

This is being built dynamically in PHP like:

```
$model_ids = array(array($model->id, 'Title'));
foreach($model->products as $id => $product){
    $model_ids[][] = $product->id;
    $model_ids[][] = "Product";
} 
```

So I don't know the values of the `WHERE` before I build the query. I must find an easy way to build:

```
 WHERE (model_id = 1 AND model = "Title") OR 
          (model_id = 1 AND model = "Product") //etc 
```

Dynamically.

I have looked through the documentation but the closest thing I see is `addCondition` which would require complex coding to get working properly.

Does Yii provide any easy way of achieving this without having to deal with writing complex code to name my params etc?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:11:12.610

It is indeed a bit more complex, but here's a working solution:

```
$criteria = new CDbCriteria();
$param_id = 0;
// $model_ids is the one you built in your original code
foreach( $model_ids as $id_pair ) {
    $criteria->addCondition( '( model_id = :id' . $param_id . ' AND model = :model' . $param_id . ' )', 'OR' );
    $criteria->params[ ':id' . $param_id ] = $id_pair[0];
    $criteria->params[ ':model' . $param_id ] = $id_pair[1];
    $param_id++;
} 
```

This will generate custom identifiers for each of your parameters so they will all be validated. Then you can just use `$criteria` in your query.

# c - MPI的执行流程

> ID：12111657
> 
> 赞同：0
> 
> 时间：2012-08-24T14:44:57.387
> 
> 标签：c, mpi

控件如何从 if 块中的 MPI_Send() 直接跳转到 else if 中的 MPI_Recv()。就决策条件而言，它应该只执行一个代码块。

```
int main(int argc, char *argv[]) {
    int number = 54;
    MPI_Init(&argc, &argv);
    MPI_Comm_size (MPI_COMM_WORLD, &no_of_process);
    MPI_Comm_rank (MPI_COMM_WORLD, &process_rank);
    MPI_Status status;
    if (process_rank == 0) {
        MPI_Send (&number, 1, MPI_INT, 1, 0, MPI_COMM_WORLD);
    }
    else if (process_rank == 1) {
        MPI_Recv (&number, 1, MPI_INT, 0, 0, MPI_COMM_WORLD);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T15:08:49.197

MPI的执行模型要么是SPMD（单程序多数据），要么是MPMD（多程序多数据），其中SPMD更为普遍。在此执行模型中，从单个源代码生成一个二进制文件，然后从该文件启动多个实例，称为进程。每个实例都有自己的标识符，称为*等级*，并且根据等级执行代码的不同分支。因此，`MPI_Send`由一个等级执行（“等级”通常用作“具有给定等级的进程”的简短版本），而`MPI_Recv`由另一个等级执行，如果`MPI_Send`指定已执行的进程的等级`MPI_Recv`，然后在两者之间发送消息。MPI 还允许消息缓冲和非阻塞操作，因此一个等级也可以与自己对话。

因此，通常如果施加基于等级的条件，则有一些过程可以满足，也有一些过程不能满足。因此，两个分支都被执行，但在不同的进程中并且可能在不同的时间执行。

在 MPI 中编程需要一些人格分裂思维，而且通常需要一些时间来适应。

# ruby-on-rails - 可以访问索引页面中的图像而不能在下一页进行为什么？

> ID：12111663
> 
> 赞同：0
> 
> 时间：2012-08-24T14:45:13.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image

我已将图像放在资产文件夹中，但我无法访问该图像。为什么以及我应该怎么做？我尝试从视图中访问`<img src="/assets/logo.png">`

ActionController::RoutingError（没有路由匹配“/users/assets/logo.png”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:52:08.270

您应该使用 image_tag：

```
<%= image_tag "logo.png" %> 
```

[http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)

# java - 将 Java 连接到 SQL

> ID：12111664
> 
> 赞同：-3
> 
> 时间：2012-08-24T14:45:15.303
> 
> 标签：java, sql, variables

我对 SQL 了解不多，但我对 Java 很好，我只是想知道如何从我的 SQL 数据库中检索一个变量：“EasyDirectory”。像：

```
String test = con.getQuery(query1).get(username); 
```

显然这不起作用，但我想要一段代码来做到这一点。这是我所有的代码：

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JProgressBar;
import javax.swing.JTextField;

public class Directory {
  public static void main(String args[]) throws IOException, SQLException {
      Connection con = null;
      try {
          // Load the JDBC driver
          String driverName = "org.gjt.mm.mysql.Driver"; // MySQL MM JDBC driver
          Class.forName(driverName);

          // Create a connection to the database
          String serverName = "www.freesql.org";
          String mydatabase = "EasyDirectory";
          String url = "jdbc:mysql://" + serverName +  "/" + mydatabase; // a JDBC url
          String username = "*********";
          String password = "*********";
          con = DriverManager.getConnection(url, username, password);
      } catch (ClassNotFoundException e) {
          // Could not find the database driver
      } catch (SQLException e) {
          // Could not connect to the database
      }

    final JFrame frame = new JFrame("Directory");
    frame.setPreferredSize(new Dimension(300, 300));
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    final JProgressBar searchprogress = new JProgressBar();
    final JPanel panel = new JPanel();
    final JButton searchbutton = new JButton("Search");
    final JTextField searchfield = new JTextField();
    searchfield.setPreferredSize(new Dimension(200, 30));
    searchprogress.setPreferredSize(new Dimension(280, 30));
    searchbutton.setLocation(100, 100);

    /* Start Buffered Reader */
    final List<String> housetypes = new ArrayList<String>();
    String line = "";
    BufferedReader br = new BufferedReader(new FileReader("Index.txt"));
    while (line != null) {
        line = br.readLine();
        housetypes.add(line);
        String seperation = br.readLine();

    }

    /* Finish Buffered Reader */

    /* Start Content Code */
    final JButton done = new JButton("Done");
    done.setVisible(false);
    JLabel housetype_label = new JLabel();
    JLabel housenumber_label = new JLabel();
    JLabel housestreet_label = new JLabel();
    JLabel housepostal_label = new JLabel();
    JLabel houseplace_label = new JLabel();
    /* Finish Content Code */

    /* Start Button Code */
    done.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            searchfield.setEnabled(true);
            done.setVisible(false);
            searchbutton.setVisible(true);
            searchprogress.setValue(0);
        }
    });
    searchbutton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {

            searchprogress.setValue(100);
            String searchquery = searchfield.getText();
            searchprogress.setValue(100);
            searchfield.setEnabled(false);
            done.setVisible(true);
           searchbutton.setVisible(false);
            for (String housetype : housetypes) {
                if (searchquery.equals(housetype)) {
                    String housepath = housetype + "/" + housetype + ".txt";
                    System.out.println(housepath);
                    try {
                        BufferedReader housebr = new BufferedReader(new FileReader(housepath));
                        String housename_query = housebr.readLine();
                        String housenumber_query = housebr.readLine();
                        String housestreet_query = housebr.readLine();
                        String houselocality_query = housebr.readLine();
                        String housepostal_query = housebr.readLine();
                        System.out.println(housepostal_query);
                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

            }

        }
    });

    /* Finish Button Code */
    /* Test Field */

    /* End Test Field */

    panel.add(searchfield);
    panel.add(done);
    panel.add(searchbutton);
    panel.add(searchprogress);

    frame.setResizable(false);
    frame.add(panel);
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(false);

    /* Start Login Window */
    int passtimes = 3;
    final JFrame login = new JFrame("Login");
    JPanel login_panel = new JPanel();
    JLabel userlabel = new JLabel("Username: ");
    JLabel passlabel = new JLabel(" Password: ");
    JButton loginuser = new JButton("Login");
    JButton cancel = new JButton("Cancel");
    final JTextField user_field = new JTextField();
    user_field.setPreferredSize(new Dimension(100,30));
    final JPasswordField pass_field = new JPasswordField();
    pass_field.setPreferredSize(new Dimension(100,30));
    ImageIcon icon = new ImageIcon("Images/Logo.png");
    ImageIcon space = new ImageIcon("Images/Spacing.png");
    JLabel logo = new JLabel();
    JLabel spacing = new JLabel();
    logo.setIcon(icon);
    login.setPreferredSize(new Dimension(200,212));
    login_panel.add(logo);
    login_panel.add(userlabel);
    login_panel.add(user_field);
    login_panel.add(passlabel);
    login_panel.add(pass_field);
    login_panel.add(spacing);
    login_panel.add(loginuser);
    login_panel.add(cancel);
    login.add(login_panel);
    login.pack();
    login.setVisible(true);
    login.setLocationRelativeTo(null);

    loginuser.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            String user_input = user_field.getText();
            String pass_input = pass_field.getText();
            String username = "Tom";
            String password = "******";
                if(user_input.equals(username)){
                    if(pass_input.equals(password)){
                        user_field.setEnabled(false);
                        pass_field.setEnabled(false);
                        frame.setVisible(true);
                        login.setVisible(false);
                    }
                    else{//If Password AND Username is incorrect
                        JOptionPane.showMessageDialog(panel, "Password and/or Username Is Incorrect.", "Failed Login", JOptionPane.ERROR_MESSAGE);
                    }
                }
                else{ //If Username is incorrect
                    JOptionPane.showMessageDialog(panel, "Password and/or Username Is Incorrect.", "Failed Login", JOptionPane.ERROR_MESSAGE);
                }
            }
        });
    cancel.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            System.exit(0);
            }
        });
  }
} 
```

谢谢，非常感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:59:38.577

通过阅读 Connection 的 API（这里：[http](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html) ://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html ），我假设它必须是这样的：

```
 final Statement statement = con.createStatement();
 final ResultSet result = statement.executeQuery(query1);
 //do stuff with the resultset
 //result.getString(something), see http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html 
```

在旁注中。我不太喜欢您将 GUI 和数据库逻辑放在同一个类中的事实。你真的应该通过应用 MVC 模式或类似的东西来分离关注点。例如，您可以创建一个用于 GUI 的类，一个用于连接数据库的类，以及一个用于启动应用程序并将其他两个连接在一起的类。

# java - Parcelable 对象中属性的 NULL 值。为什么？

> ID：12111667
> 
> 赞同：0
> 
> 时间：2012-08-24T14:45:19.467
> 
> 标签：java, android, serialization, android-intent, parcelable

我有以下`Recipe`类，它正在实现`Parcelable`类。但是当我将对象从一个类传递到另一个类时，它的属性值为`null`. 为什么？

配方类：

```
package mobile.bh.classes;

import java.util.ArrayList;

import mobile.bh.activities.MethodStep;
import android.graphics.Bitmap;
import android.os.Parcel;
import android.os.Parcelable;

//simple class that just has one member property as an example
public class Recipe implements Parcelable {
    public int id;
    public String name;
    public ArrayList<Ingredient> ingredients;
    public ArrayList<MethodStep> method;
    public String comment;
    public String image;
    public Bitmap image2;

    public Recipe(){}
    /* everything below here is for implementing Parcelable */

    // 99.9% of the time you can just ignore this
    public int describeContents() {
        return 0;
    }

    // write your object's data to the passed-in Parcel
    public void writeToParcel(Parcel out, int flags) {
        out.writeInt(id);
        out.writeString(name);
        out.writeList(ingredients);
        out.writeList(method);
        out.writeString(comment);
        out.writeString(image);
    }

    // this is used to regenerate your object. All Parcelables must have a CREATOR that implements these two methods
    public static final Parcelable.Creator<Recipe> CREATOR = new Parcelable.Creator<Recipe>() {
        public Recipe createFromParcel(Parcel in) {
            return new Recipe(in);
        }

        public Recipe[] newArray(int size) {
            return new Recipe[size];
        }
    };

    // example constructor that takes a Parcel and gives you an object populated with it's values
    private Recipe(Parcel in) {
        in.writeInt(id);
        in.writeString(name);
        in.writeList(ingredients);
        in.writeList(method);
        in.writeString(comment);
        in.writeString(image);
        }
} 
```

虽然发送对象`intent`

```
 Intent i = new Intent(context,RecipeInfoActivity.class);
    i.putExtra("recipeObj", recipe); 
```

在另一边接收物体

```
Recipe p = (Recipe) getIntent().getParcelableExtra("recipeObj"); 
```

但`p.name`值为`null`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:49:14.833

在 Parcelable 构造函数中，您需要从包裹中回读。

```
private Recipe(Parcel in) {
        id = in.readInt();
        name =in.readString();
        ingredients = in.readList();
        method = in.readList();
        comment = in.readString();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:48:56.907

您应该在构造函数中使用 readInt 而不是 writeInt （其他字段等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:49:23.160

首先，在您的构造函数中，您似乎试图将所有属性写入包裹，但据我所知，它们尚未设置；可能你打算从那里的包裹中阅读？现在我不确定这个 Parcel 到底是什么，但我在想它是某种类似于 Properties 的类？如果是这样，Java 就不是按引用传递的。这意味着只是修改传递给您的方法的值不会修改真实 Parcel 的值，您必须返回修改后的 Parcel

# php - 错字3中的GPvars

> ID：12111670
> 
> 赞同：0
> 
> 时间：2012-08-24T14:45:50.333
> 
> 标签：php, typo3

谁能告诉我 GPvars 在typo3中代表什么以及它包含和用于什么？谢谢！

例子

```
$this->GPvars['uid'] = intval( $this->GPvars['uid'] );
$this->GPvars['chash'] = substr( $this->GPvars['chash'], 0, 8 );
$this->GPvars['uid_author'] = intval( $this->GPvars['uid_author'] ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:20:33.050

G 代表`GET`, P 代表`POST`

它从 POST 或 GET 获取“uid”（例如）（POST 优先于 GET）

我不知道你在哪里找到这段代码，但我认为这是[t3lib_div::_GP](http://typo3.org/api/typo3/classt3lib__div.html#a1645ccd6b4e63b9ac75e3020b67cd8c5)的某种包装，如果我是对的，链接中的 API 解释了一切。

# iphone - 获取 Facebook 应用程序订阅者

> ID：12111672
> 
> 赞同：2
> 
> 时间：2012-08-24T14:45:49.967
> 
> 标签：iphone, ios, facebook, facebook-graph-api

假设我有一个 ID 为：XXXXXX 的 Facebook 应用程序

有没有办法让已经在我的朋友列表中的订阅者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:08:37.177

您可以使用这样的 FQL 查询来执行此操作：

```
SELECT name, uid FROM user WHERE 
  uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
  AND is_app_user = 1 
```

您只能从当前已通过您的应用程序进行身份验证的用户那里获取此信息。

# c# - 在 NHibernate 中将子 ID 设置为父 ID

> ID：12111673
> 
> 赞同：0
> 
> 时间：2012-08-24T14:45:53.623
> 
> 标签：c#, nhibernate, relationship

在我的应用程序中，我有一个`User`只有一个类的`Settings`类。一对一的关系我有一个简单的用户 NHibernate 映射：

```
/// NHibernate declarations etc
<id name="squid" type="guid">
  <generator class="assigned" />
</id>
/// Properties
<one-to-one class="Settings" name="Settings" outer-join="true" cascade="save-update" />
/// Close tags & end file 
```

我的设置类是

```
/// NHibernate declarations
<id name="squid" type="guid">
  <generator class="assigned" />
</id>
/// Properties, close tags & end of file 
```

如您所见，我的用户被分配了一个基于其 Active Directory 帐户的 guid（或在我的单元测试中，由 生成的新 Guid `Guid.NewGuid()`）

NHibernate 是否可以神奇地将设置 GUID 分配为用户 GUID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:49:09.013

据我了解，您的示例更好地定义`Settings`为 Value 对象，因为没有`User`. 这是 Nhibernate 使用中的常见做法。[您可以在此处](http://nhforge.org/blogs/nhibernate/archive/2008/09/17/value-objects.aspx)阅读有关此内容的更多信息。

# ruby-on-rails - 使用 Rails ping 服务器

> ID：12111674
> 
> 赞同：3
> 
> 时间：2012-08-24T14:46:00.370
> 
> 标签：ruby-on-rails

我正在尝试使用 Rails ping 服务器。我找到了这个

[在 Rails 中检查 HTTP 状态码](https://stackoverflow.com/questions/7476813/check-http-status-code-in-rails)

但是在运行此代码时出现此错误，

```
require 'net/http'

http = Net::HTTP.new('www.google.com',80)
response = http.request_get('/')
p response.status 
```

错误：

```
`<main>': undefined method `status' for #<Net::HTTPFound 302 Found readbody=true> (NoMethodError) 
```

为什么？为什么谷歌会给我一个 302 代码？不应该是200吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:56:40.397

[`response.code`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPResponse.html)如果您使用的是 ruby​​ 1.9，请使用。

# javascript - 调用 SlideOut 后的 Extjs stange 效果

> ID：12111675
> 
> 赞同：0
> 
> 时间：2012-08-24T14:46:03.187
> 
> 标签：javascript, extjs, extjs4, slide

当我调用 slideOUT 时，div 高度减少到零并且所有组件都向上滚动！如何保存 Div 高度。目标是滑出一张图片，然后滑入另一张图片。但简而言之，我在 slideIn 和 slideOut 之间产生了一种奇怪的效果。因为 div 高度减少到零

```
 Ext.get("MENUNAV_nouvelle_commande").slideOut('r', {
     easing: 'easeOut',
     duration: 1000,
     remove: false,
     useDisplay: false
 });

Ext.get("MENUNAV_nouvelle_commande").slideIn('l', {
     easing: 'easeIn',
     duration: 1000
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:28:20.063

我不是 100% 确定你看到了什么效果，但我假设你的意思是当你使用 slideIn() 和 slideOut() 时，所有其他 HTML 元素都被移动/重新定位以为新元素腾出空间. 这是有道理的，一个简单的解决方法是将滑动元素的样式设置为 position:absolute。

如果要使元素保持其相对于屏幕上其他元素的位置，可以将其放置在相对定位的父元素中。

```
<div style="position:absolute;" id="MENUNAV_nouvelle_commande"></div>

<script>
Ext.core.DomHelper.applyStyles(Ext.get("#MENUNAV_nouvelle_commande"), {
    top:  (window.innerHeight / 2) + 'px',
    left: '0'
});

Ext.get('#MENUNAV_nouvelle_commande).slideIn('t', { options });
</script> 
```

希望有帮助。

# java - 使用 compareTo() 方法对字符串数组的 ArrayList 进行排序

> ID：12111679
> 
> 赞同：4
> 
> 时间：2012-08-24T14:46:37.883
> 
> 标签：java, sorting, arraylist

我是java新手。

我正在尝试使用 ArrayList 对 String 数组的 ArrayList 进行排序`String.compareTo()`。

我已经编译了代码，因此输出为：

> 因果关系是一种关系
> 
> 它，是，也，被称为，因果
> 
> 它是关于一个原因和它的影响

现在我想对该代码进行排序（按字典顺序），因此输出为：

> 因果关系，a，is，关系
> 
> 它也称为因果是
> 
> 它，一个，关于，影响，和，原因，是，它

但是我正在产生一些疯狂的输出。

我的代码如下。

任何帮助，将不胜感激。

我已经为这个可能非常简单的问题工作了几个小时，我准备毁掉我的电脑。谢谢

```
public class Wk5Q5 {

    void process1 () {

        String s1 = "Causality is a relationship";
        String s2 = "It is also called causation";
        String s3 = "It is about a cause and its affect";

        ArrayList<String[]> list = new ArrayList<String[]>();

        String[] arr1 = s1.split(" ");
        list.add(arr1);
        String[] arr2 = s2.split(" ");
        list.add(arr2);
        String[] arr3 = s3.split(" ");
        list.add(arr3);

        /**
         * previously sorted the arraylist of string arrays so that
         * each word is separated by commas
         */
        for(int i = 0; i < list.size(); i++){
            for (int j = 0; j < list.get(i).length; j++){
                String t = list.get(i)[j];

                if (j > 0){
                    t = ", " + t;   
                }
                System.out.print(t);
                //System.out.println(list.get(i)[j]);

            }
            System.out.println();
        }

        /**
         * my attempt at sorting each string in each list 
         */
        for(int z = 0; z < list.size(); z++){
            for(int i = 0; i < list.get(z).length; i++){
                String x = list.get(z)[i];
                for (int j = i+1; j < list.get(z).length; j++){
                    String y = list.get(z)[j];
                    if(y.compareTo(x) < 0) {
                        String temp = list.get(z)[i];
                        x = list.get(z)[j];
                        y = temp;
                    }
                    System.out.print(x);
                }

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:51:36.080

您实现[*选择排序*](http://en.wikipedia.org/wiki/Selection_sort)算法的问题是您没有修改正在排序的列表。当您交换`x`和`y`时，列表中相应位置的元素将保留在它们原来的位置。

如果你停止使用`x`and并用and`y`替换它们的使用，你的排序算法会产生不同的结果。更好的是，如果作业允许您使用标准库，请查看[Java 中内置的数组排序方式](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)。`list.get(z)[i]``list.get(z)[j]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:52:38.780

您可以`Collections.sort`按照其他人的建议使用或手动执行。要手动完成，有很多不同的方法。您将要使用快速排序或合并排序算法。如果您不知道这些是什么，我可以进一步解释；但是，如果这是硬件，您很可能已经看过它们

# c++ - C++ 自定义动作 DLL 的路径

> ID：12111680
> 
> 赞同：0
> 
> 时间：2012-08-24T14:46:47.720
> 
> 标签：c++, dll

我创建了一个 C++ 自定义操作 DLL。我有一个从 DLL 调用的 msi，但 DLL 不包含在 MSI 中，它与它位于同一位置。

我使用以下内容获取 MSI 的位置：

```
TCHAR* szValueBuf = NULL;
DWORD cchValueBuf = 0;
UINT uiStat =  MsiGetProperty(hInstall, TEXT("OriginalDatabase"), TEXT(""), &cchValueBuf);

if (ERROR_MORE_DATA == uiStat)
{
    ++cchValueBuf; 
    szValueBuf = new TCHAR[cchValueBuf];
    if (szValueBuf)
    {
        uiStat = MsiGetProperty(hInstall, TEXT("OriginalDatabase"), szValueBuf, &cchValueBuf);
    }
}
if (ERROR_SUCCESS != uiStat)
{
    if (szValueBuf != NULL) 
        delete[] szValueBuf;
    return ERROR_INSTALL_FAILURE;
} 
```

这很好用，让我得到了完整的路径，但是路径末尾有 MSI 的名称，我需要删除它以放入我的 DLL 的名称中，还是有其他方法？

我努力了：

```
std::string s = "NPath";

int pos = s.find_last_of("\\");
s.erase(0, pos + 1);
s.erase(s.length() - 4, 4);
s.append("product.ini"); 
```

但我收到了这个错误：

```
error C2894: templates cannot be declared to have 'C' linkage 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:59:09.100

使用 C 或 C++ 字符串函数将所有字符移回最后一个斜杠或反斜杠。然后附加您的 DLL 名称。

如果你想变得更高级，你可以使用 C++ 库 Boost::Filesystem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:16:02.987

我解决了：

```
 char * pch;
 pch = strstr (szValueBuf,"ServerSetup.msi");
 strncpy (pch,"product.ini",15);
 puts (szValueBuf); 
```

# iphone - 第三方 iOS 库中的私有方法

> ID：12111681
> 
> 赞同：0
> 
> 时间：2012-08-24T14:46:48.873
> 
> 标签：iphone, ios, uipopovercontroller, private

我想为 iPhone 使用弹出视图。我找到了一个 3rd 方库，作者说它的一些方法正在使用私有方法。（提交到应用商店时会导致问题）
但我看不出他的代码中在哪里使用了私有方法。
你能发现它们吗？

[barButtonItem performSelector:@selector(view)] 被认为是调用私有方法？

[https://github.com/sonsongithub/PopupView/blob/master/SNPopupView%2BUsingPrivateMethod.m](https://github.com/sonsongithub/PopupView/blob/master/SNPopupView%2BUsingPrivateMethod.m)

```
- (void)showFromBarButtonItem:(UIBarButtonItem*)barButtonItem inView:(UIView*)inView animated:(BOOL)animated {

        if(![barButtonItem respondsToSelector:@selector(view)]) {
            // error
            return;
        }

    UIView *targetView = (UIView *)[barButtonItem performSelector:@selector(view)];
    UIView *targetSuperview = [targetView superview];

    BOOL isOnNavigationBar = YES;

    if ([targetSuperview isKindOfClass:[UINavigationBar class]]) {
        isOnNavigationBar = YES;
    }
    else if ([targetSuperview isKindOfClass:[UIToolbar class]]) {
        isOnNavigationBar = NO;
    }
    else {
        // error
        return;
    }

    CGRect rect = [targetSuperview convertRect:targetView.frame toView:inView];

    CGPoint p;
    p.x = rect.origin.x + (int)rect.size.width/2;

    if (isOnNavigationBar)
        p.y = rect.origin.y + rect.size.height + BAR_BUTTON_ITEM_UPPER_MARGIN;
    else
        p.y = rect.origin.y - BAR_BUTTON_ITEM_BOTTOM_MARGIN;

    [self showAtPoint:p inView:inView animated:animated];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:05:46.407

view 不是 UIBarButtonItem 的公共属性。参考应用程序正在使用它。

要验证任何此类功能，最好使用点运算符或使用它的 getter 调用其属性（这是同一件事）。

检查此代码，这表明它是私有的：

```
UIView *targetView = (UIView *)[barButtonItem performSelector:@selector(view)]; 
```

它正在使用 performSelector 访问视图，而 XCode 不够聪明，无法发出任何警告，同时以这些方式使用私有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:53:27.897

根据我的经验，当您上传图像时，Apple 会对您的二进制文件进行一些自动检查。那么为什么不尝试上传，看看他们是否抱怨呢？我在一个包含的库中使用了他们自己的类上的一个方法，该方法与 Apple 类中的某些私有方法同名，因此我的应用程序没有通过大门（我刚刚重命名了该方法，因为我有来源。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:59:02.453

您不应该访问`view`a 的属性`UIBarButtonItem`。那就是私人电话的地方：

```
if(![barButtonItem respondsToSelector:@selector(view)]) {
    // error
    return;
}

UIView *targetView = (UIView *)[barButtonItem performSelector:@selector(view)]; 
```

请参阅[官方文档`UIBarButtonItem`](http://developer.apple.com/library/IOS/#documentation/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html)，它没有公共`view`财产。

不过，这并不是真正的私人调用，因为该`view`方法是完全合法的，并且不会触发一些警报（例如，如果您使用了仅由私人调用使用的方法名称），因此 Apple 不应该注意到它。但我只说不*应该*，不是*不会*。

# android - android应用程序中的应用程序生命周期持久存储

> ID：12111684
> 
> 赞同：2
> 
> 时间：2012-08-24T14:46:56.710
> 
> 标签：android, sqlite, sharedpreferences, data-storage

我希望我的应用程序在应用程序的生命周期内存储一些数据。
我知道android中有4种类型的数据存储。
1：共享偏好
2：内部存储
3：外部存储（我不想使用它，因为它包含额外的权限）
4：SQLite 数据库
5：网络连接（我不能使用它，因为我想针对不使用的用户有数据连接）。

方法 1、2、4 存储的数据不可靠，因为用户可以从应用程序管理器中清除应用程序数据。
有没有其他方法可以实现这个目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:00:32.703

> 方法 1、2、4 存储的数据不可靠，因为用户可以从应用程序管理器中清除应用程序数据。

如果您的目标是将数据放在他们无法删除的用户设备上，那么这在标准版本的 Android 的 SDK 应用程序中是不可能的。用户可以控制他们的设备，而不是您，因此他们可以随时删除您的数据（以及您的应用程序）。

# css - 当它的文本框聚焦时，停止 div 向上滑动

> ID：12111689
> 
> 赞同：1
> 
> 时间：2012-08-24T14:47:32.740
> 
> 标签：css, z-index, jquery

我正在尝试使我的应用程序的上面板具有默认`top`属性，`-80px`因此除了其中的一小部分之外它是不可见的。当用户将鼠标悬停在该部分上时，它会再次向下滑动。

问题是，这个 div 有一个`textbox`，我希望 div 在用户输入时停止向上滑动，`textbox`即使他将鼠标指针移开，但不幸的是不知道如何做到这一点，这是我的代码：

**索引.html**

```
<div id="taskInput">
    <div id="controllers">
         <input type="text" name="mainTask" id="mainTask">
         <button id="addMain">Add</button>
         <button id="resetMain">Reset</button>
    </div>       
</div> 
```

**这部分的CSS：**

```
#taskInput {
    background: red;
    width:606px;
    height:43px;    
    padding: 22px;    
    box-shadow: 0px 3px 4px -3px black;
    position: absolute;    
    z-index : 0;
    top:0px;
} 
```

**脚本.js**

```
$(function(){
    $("#taskInput").delay(400).animate({top:-80}, 500,function(){});
    $("#taskInput").mouseover(
        function(){
            $(this).stop().animate({top:0}, 200, function(){});            
        });

    $("#taskInput").mouseout(function(evt){                    
        $(this).stop().animate({top:-80}, 200, function(){});           
    })

    $("#mainTask").focus(function(){
        //i though i can put something here to stop mouseout event or something
    })
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:57:02.267

我的评论改变了我的想法，没有必要取消绑定事件或使用全局变量来跟踪它。您可以使用`document.activeElement`获取页面上当前聚焦的元素，并将其 id 与 your 的 id 进行比较`<input>`，如下所示：

```
$("#taskInput").mouseout(function(evt){
    if(document.activeElement.id !== 'mainTask') {   
        $(this).stop().animate({top:-80}, 200, function(){});
    }            
}); 
```

[**工作演示**](http://jsfiddle.net/Ct3Tz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T15:09:34.277

我想，你也可以试试这个：

```
$('#taskInput').delay(400).animate({top:-80},500);

$('#taskInput').mouseover(function()
{
    $(this).stop().animate({top:0},200);            
});

$('#taskInput').mouseout(function()
{
    if(!$('#mainTask').is(':focus'))
    {
        $(this).stop().animate({top:-80},200);           
    }
}); 
```

**[演示](http://jsfiddle.net/eS5Fy/)**

## 编辑：

您还可以将其添加到您的代码中：

```
$('#mainTask').blur(function()
{
    $('#taskInput').stop().animate({top:-80},200);
}); 
```

**[演示 2](http://jsfiddle.net/eS5Fy/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:51:26.063

在动画顶部添加一个标志并在焦点函数中更改它

我没有对此进行测试，但它应该可以工作

```
$(function(){
  writing = false;
  $("#taskInput").delay(400).animate({top:-80}, 500,function(){});
  $("#taskInput").mouseover(
    function(){
        $(this).stop().animate({top:0}, 200, function(){});            
    });

  $("#taskInput").mouseout(function(evt){   
    if(writing == false){                 
       $(this).stop().animate({top:-80}, 200, function(){});           
    }
  })

  $("#mainTask").focus(function(){
    //i though i can put something here to stop mouseout event or something
    writing = true
  })

  $("#mainTask").focusout(function(){
    //i though i can put something here to stop mouseout event or something
    writing = false
  })

}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T14:53:09.410

[**jsFiddle 演示**](http://jsfiddle.net/hu9pc/1/)

最简单的方法是将#mainTask 的`data-focus`属性设置为true，然后在执行`mouseout`#taskInput 时，确保在为slideUp 设置动画之前它为False。

```
$(function(){
    // ... code

    $("#taskInput").mouseout(function(evt){      
        console.log($('#mainTask').data('focus'));            
        if ($('#mainTask').data('focus') === false) {        
            $(this).stop().animate({top:-80}, 200, function(){});
        }            
    })

    $("#mainTask").on({
        focus: function(){
            $(this).data('focus', true);
        },  
        blur: function () {
            $(this).data('focus', false);
        }
    });
}) 
```

​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T14:53:32.903

在 $("#mainTask").focus 事件处理程序中，您可以将全局布尔变量设置为 true，在 blur 事件处理程序中将其设置为 false，并在 #taskInput mouseout 事件处理程序中检查该变量的值

```
var preventSlide = false;

$("#taskInput").mouseout(function(evt){                    
    if (!preventSlide) {
        $(this).stop().animate({top:-80}, 200, function(){});           
    }
})

$("#mainTask").focus(function(){
    preventSlide = true;
})

$("#mainTask").blur(function(){
    preventSlide = false;
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T14:57:11.137

```
$(function(){
    var flag=true;

    $("#taskInput").on('mouseenter mouseleave', function(e) {
        if (flag) $(this).stop().animate({top: e.type=='mouseenter'?0:-80}, 200);
    }).delay(400).animate({top:-80}, 500);

    $("#mainTask").on('blur focus', function(e) {
        flag=e.type=='blur';
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/XyVfn/4/)

# express - Jade_form_input 和 readonly，如何？

> ID：12111694
> 
> 赞同：1
> 
> 时间：2012-08-24T14:47:51.120
> 
> 标签：express, pug

我的工具链：Node.js / Express3 / Jade。

我试图让 Jade 模板插值与表单输入属性一起使用，特别是“只读”属性。尝试了很多方法，但没有得到任何胶水。插值与其他属性 f.ex 'value' 配合得很好，但只是这个'readonly' 很奇怪。

这是有效的：

> input#f5lng(type='text', style='width: 70px;', name='f5lng', value='#{data.lng}', 只读)

但是如何使用渲染模块插入变量？尝试渲染：

> res.render('modMrkForm', { layout:false, tid:req.params.id, data:d, ro:'readonly' } );

并在 Jade 中插入：

> input#f5lng(type='text', style='width: 70px;', name='f5lng', value='#{data.lng}', = #{ro})

不起作用。既不只是= ro。

是否有一些技巧可以让它工作。

顺便说一句，渲染模块知道是否需要这个“只读”，所以在其他情况下渲染应该是：

> res.render('modMrkForm', { layout:false, tid:req.params.id, data:d, ro:'' } );

知道这里有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T11:20:11.547

它是这样工作的：

```
input#f5lng( type='text', style='width: 70px;', name='f5lng', value='#{data.lng}', readonly=ro) 
```

和

```
res.render('modMrkForm', { layout:false, tid:req.params.id, data:d, ro:true } ); 
```

只需使用布尔值而不是字符串。我在玉文档上找到的，很不错： [https ://github.com/visionmedia/jade#a7](https://github.com/visionmedia/jade#a7)

# javascript - IE8 中的 Ember.js (1.0pre) 属性绑定错误

> ID：12111696
> 
> 赞同：0
> 
> 时间：2012-08-24T14:47:57.087
> 
> 标签：javascript, internet-explorer-8, ember.js

IE8 属性绑定在 Ember 1.0pre 中的运行方式似乎存在错误。

举个例子：http: [//jsfiddle.net/EdLk3/11/](http://jsfiddle.net/EdLk3/11/)

在 Chrome 中执行时，fooView 模板显示：

```
view.fooView: hello 
```

这正如预期的那样，因为模板输出`{{view.foo}}`，并且视图上下文`foo`从中`fooBinding`继承`App.set('baz', "hello")`；

然而，在 IE8 中，fooView 模板不会从`{{view.foo}}`. 什么可能导致此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:03:21.187

Ember 中有一个 IE8 bindAttr 错误。它已被记录在这里。

[https://github.com/emberjs/ember.js/pull/1300](https://github.com/emberjs/ember.js/pull/1300)

现在已经修好了。更新到最新版本的 Ember 解决了我遇到的问题。

# c++ - 将 xml 字符串嵌套到 xml 元素中的语法

> ID：12111698
> 
> 赞同：0
> 
> 时间：2012-08-24T14:48:04.560
> 
> 标签：c++, xml, tinyxml

我需要这样的东西：

```
<xmlData><elementA> (*) </elementA></xmlData>

(*) <xmlData2><elementB>HelloWorld</elementB></xmlData2> 
```

如何将 (*) xml 字符串插入 xmlData（格式良好的 XML）中的占位符？（用 C++ 中的 tinyXML 解析）

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:54:49.293

好吧，您可以只使用 TinyXML 来*创建*您的 XML-DOM :-)

如果您只想使用普通的旧打印，请替换以下字符：

*   "<" 与 "<"
*   "&" 与 "&"

我也喜欢用“>”替换“>” 为了一致性。

# php - 获取子类名称？

> ID：12111700
> 
> 赞同：1
> 
> 时间：2012-08-24T14:48:12.590
> 
> 标签：php

我有一个简单的枚举类，它定义了一些常量，但我想有一些静态方法提供对枚举的反射，以便程序员。

请问这个枚举有什么键？等

我已经实现了这个，它像宣传的那样工作。到目前为止很棒，但我真的很想有一个基本的 Enum 类，其中存在这些方法的实现，并且我的所有 Enum 都可以扩展它并从中受益。

不幸的是，当我这样做时，**CLASS**魔术变量会返回基类并弄乱反射。我想要的是一个返回子类的函数，但任何可行的方法对我来说都很好。

这是类定义：

```
final class LG_NutritionalValues 
{
   // ENUMERATION 
   const Calories = 1;
   const Fat = 2;
   const Carbohydrates = 3;
   const Etc = 999;

   public static function is_valid_key ( $value ) {
    $reflect = new ReflectionClass ( __CLASS__ );
    return in_array ( $value , array_keys( $reflect->getConstants() ) );
   }
   public static function list_keys() {
    $reflect = new ReflectionClass ( __CLASS__ );
    return array_keys( $reflect->getConstants() );
   }

} // END enum class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:53:32.460

从 php 5.3 开始，您可以使用[get_call_class()](http://php.net/manual/en/function.get-called-class.php)

# c# - 命名对象属性的最佳实践是什么？

> ID：12111701
> 
> 赞同：5
> 
> 时间：2012-08-24T14:48:23.200
> 
> 标签：c#, asp.net, naming-conventions

例如，这是一个好习惯吗？

```
private SalesOrder salesOrder;

public SalesOrder SalesOrder
{
    get { return salesOrder; }
    set { salesOrder = value; }
} 
```

或者我是否应该始终将对象属性附加到 Object 或 BusinessObject 以区分属性类型和属性本身：

```
public SalesOrder SalesOrderBusinessObject
{
    get { return salesOrder; }
    set { salesOrder = value; }
} 
```

属性是网页的一部分还是对象的一部分是否重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:04:29.427

后者太可怕了。它是对具有销售订单的东西进行建模，而销售订单又由对象建模——而不是对具有销售订单对象的东西进行建模。

如果您正在为开发人员编写一个工具来帮助他们处理业务对象，那么“BusinessObject”应该只是代码中某些内容的名称。

前者通常是好的。

如果可以有多个，那就不好了`SalesOrder`——即使一个是“主要”的，你也会引入混乱。然而`SalesOrders`，作为可枚举或对象集合的属性`SalesOrder`是好的（当英语复数不是单数 + 's' 形式时，使用真正的复数而不是仅仅添加 s，除非它是英语复数的情况与单数相同。

当其他一切都与销售相关时，它就不那么好了。例如，这太可怕了：

```
public class Sale
{
  public SalesOrder SalesOrder{get;set;}
  public SalesReference SalesReference{get;set;}
  public decimal SalesValue{get;set;}
  public string SalesCurrency{get;set;}
} 
```

在这种情况下，我会从每个属性名称中删除“Sales”，但不会（必然）从类名中删除。

但是，这是一个更好的情况：

```
public class Sale
{
  public SalesOrder SalesOrder{get;set;}
  public StockOrder StockOrder{get;set;}
} 
```

总之，接近它的方法是：

1.  这个类所做的最好的名称是什么，它将它与其他类所做的区别开来（因此，没有“对象”、“业务对象”、“实体”或类似的东西，除非它确实在给定的情况下特别相关案子）。
2.  该属性所反映的内容的最佳名称是什么，可以将其与其他属性区分开来。

如果他们最终在特定情况下给出相同的名称，那很好（除非它是一个嵌套类，当它模棱两可且非法时）。如果他们最终给了一个不同的名字，那也很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:55:53.457

不要将类型放在名称中。类可以在其生命周期中改变含义，您不希望代码增长但不反映已更改的内容。这是 ASP 时代的一种保留，当时您习惯用“tbl”为表名添加前缀，用“vw”为视图添加前缀。将属性命名为单数或复数，并保持一致。只是不要把类的名字放在名字中。如果您希望更准确地反映对象是什么，请查看域驱动设计，以便您的代码反映业务而不是程序员认为的业务。

# android - Android - PagerAdapter instantiateObject 未被调用

> ID：12111707
> 
> 赞同：2
> 
> 时间：2012-08-24T14:48:49.357
> 
> 标签：android, android-viewpager

为此，我已经把头发拉了一天 - 我从 PagerAdapter 继承并从我的主要活动中调用了以下内容。问题是下面的测试总是返回`null`。另外，我调试的时候发现MyPagerAdapter.java中的instantiateItem方法根本没有输入！是什么赋予了？

感谢我能得到的任何帮助。谢谢。

码头。

```
 // For the paging swipes
    MyPagerAdapter adapter = new MyPagerAdapter();
    m_ViewPager = (ViewPager) findViewById(R.id.myfivepanelpager);
    adapter.notifyDataSetChanged();
    m_ViewPager.setAdapter(adapter);
    m_ViewPager.setCurrentItem(2);

    View test = m_ViewPager.getChildAt(2);
    ListView theList = (ListView) test.findViewById(R.id.listView1); 
```

MyPagerAdapter.java

```
public class MyPagerAdapter extends PagerAdapter {

public int getCount() {
    return 5;
}

 @Override
public Object instantiateItem(ViewGroup container, int position) {
    //Log.d("Instantiate Item", null);
    LayoutInflater inflater = (LayoutInflater) container.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    //View view = null; 
    View view; 

    int resId = 0;
    switch (position) {
    case 0:
        resId = R.layout.page1;
        view = inflater.inflate(resId, null);
        TextView txtView =(TextView)view.findViewById(R.id.textView1);
        ListView lstView = (ListView)view.findViewById(R.id.listView1);
        break;
    case 1:
        resId = R.layout.page2;
        view = inflater.inflate(resId, null);
        TextView txtView2 =(TextView)view.findViewById(R.id.textView2);
        break;
    case 2:
        resId = R.layout.page3;
        view = inflater.inflate(resId, null);
        TextView txtView3 =(TextView)view.findViewById(R.id.textView3);
        break;
    case 3:
        resId = R.layout.page4;
        view = inflater.inflate(resId, null);
        TextView txtView4 =(TextView)view.findViewById(R.id.textView4);
        break;
    case 4:
        resId = R.layout.page5;
        view = inflater.inflate(resId, null);
        TextView txtView5 =(TextView)view.findViewById(R.id.textView5);
        break; 
    default:
        resId = R.layout.page1;
        view = inflater.inflate(resId, null);
        break;
    }

    ((ViewPager) container).addView(view, 0);

    return view;
}

@Override
public void destroyItem(ViewGroup arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);

}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);

}

@Override
public Parcelable saveState() {
    return null;
}

@Override
public int getItemPosition(Object object) {
    return POSITION_NONE;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:34:37.900

首先`Log.d("Instantiate Item", null);`，由于 null 消息，此行会导致异常。

我已经尝试过您的适配器，它工作正常（instantiateItem 被调用，我观察电话上的视图）。似乎您已尝试从 onCreate() 运行“测试”。您可能期望刚刚在 setContentView() 中膨胀的 ViewPager 已准备就绪，并且在膨胀后立即呈现孩子。这不是真的，因为 ViewPager 仅在绘图时才需要子项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T03:17:25.173

同样，我意识到为了填充位置 0 的 ListView，我在 PageAdapter 中执行此操作。试图做到这一点

```
 m_ViewPager.setCurrentItem(tab.getPosition());
    if (m_ViewPager != null)
    {
    LinearLayout test = (LinearLayout) m_ViewPager.getChildAt(tab.getPosition());
        if (test != null)
        {
            if (tab.getPosition()==0)
            {
                ListView theList = (ListView) test.findViewById(R.id.listView1);
                populateListView(theList, tab.getPosition());
            }
        }
    } 
```

在我的 MainActivity.java 文件中的一个函数内对我来说真的不起作用。所以基本上，我需要这样做。希望这可以帮助像我一样被困的人。

```
 @Override
public Object instantiateItem(ViewGroup container, int position) {

    LayoutInflater inflater = (LayoutInflater) container.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View view; 

    int resId = 0;
    switch (position) {
    case 0:
        resId = R.layout.page1;
        view = inflater.inflate(resId, null);
        TextView textView1 =(TextView)view.findViewById(R.id.textView1);
        ListView listView1 = (ListView)view.findViewById(R.id.listView1);
        populateListView(listView1, container.getContext());
        break;
    case 1:
        resId = R.layout.page2;
        view = inflater.inflate(resId, null);
        TextView textView2 =(TextView)view.findViewById(R.id.textView2);
        break;
    case 2:
        resId = R.layout.page3;
        view = inflater.inflate(resId, null);
        TextView textView3 =(TextView)view.findViewById(R.id.textView3);
        break;
    case 3:
        resId = R.layout.page4;
        view = inflater.inflate(resId, null);
        TextView textView4 =(TextView)view.findViewById(R.id.textView4);
        break;
    case 4:
        resId = R.layout.page5;
        view = inflater.inflate(resId, null);
        TextView textView5 =(TextView)view.findViewById(R.id.textView5);
        break; 
    default:
        resId = R.layout.page1;
        view = inflater.inflate(resId, null);

        break;
    }

    ((ViewPager) container).addView(view, 0);
    return view;
}

private void populateListView(ListView list, Context thisContext)
{
    // We need to use a different list item layout for devices older than Honeycomb
    int layout = Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ?
            android.R.layout.simple_list_item_activated_1 : android.R.layout.simple_list_item_1;

    // Create an array adapter for the list view, using the Ipsum headlines array
    list.setAdapter((new ArrayAdapter<String>(thisContext, layout, Ipsum.Headlines))); 
} 
```

# sql - SQL Server CONFIG 语句不能在用户事务中使用

> ID：12111708
> 
> 赞同：3
> 
> 时间：2012-08-24T14:48:49.073
> 
> 标签：sql, sql-server, tsql

我有

> *CONFIG 语句不能在用户事务中使用*

运行下面的程序 2 时。有什么决议吗？谢谢。

程序#1：

```
CREATE PROC [dbo].[nz_test1]
as
   EXEC sp_configure 'show advanced option', 1
   RECONFIGURE WITH OVERRIDE
   EXEC sp_configure 'xp_cmdshell', 1
   EXEC sp_configure 'ad hoc distributed queries', 1  
   RECONFIGURE WITH OVERRIDE

select 1 
```

程序#2：

```
create proc [dbo].[test_nz_tb3]
as
    create table #t (a varchar(2))

    insert into #t
           exec nz_test1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T23:04:19.777

显然（对我来说，无论如何），如果你被告知你不能做你想做的事情，你需要改变你的代码以避免做你不允许做的事情。特别是，您可能需要将配置/重新配置代码移到您在 INSERT 语句（那个`nz_test1`）中调用的过程之外，例如，移动到另一个存储过程。单独运行该代码，可能*在*插入之前（这可能取决于您通过重新配置尝试实现的目标，您没有透露）。

所以，像这样的东西，也许：

```
CREATE PROCEDURE dbo.my_config
AS
    EXEC sp_configure 'show advanced option', 1;
    RECONFIGURE WITH OVERRIDE;
    EXEC sp_configure 'xp_cmdshell', 1;
    EXEC sp_configure 'ad hoc distributed queries', 1;
    RECONFIGURE WITH OVERRIDE;
GO
CREATE PROCEDURE dbo.nz_test1
AS
    SELECT 1 AS Value;
GO
CREATE PROCEDURE dbo.test_nz_tb3
AS
    EXEC dbo.my_config;
    CREATE TABLE #t (a varchar(10));
    INSERT INTO #t
        EXEC dbo.nz_test1; 
```

Make sure you do not call `test_nz_tb3` within a transaction either. Otherwise you'll need to call `my_config` outside `test_nz_tb3`, likely before the transaction where the latter is called.

# facebook - FB.login 未在 Facebook 移动 Web 应用程序中触发

> ID：12111710
> 
> 赞同：0
> 
> 时间：2012-08-24T14:48:51.897
> 
> 标签：facebook, facebook-javascript-sdk

我无法获取权限对话框以及登录 Facebook 这是我的代码：

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.js"></script>

</head> 
<body> 

<div data-role="page">
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'APP_ID', // App ID
      channelUrl : 'http://connect.facebook.net/en_US/all.js', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
    FB.Event.subscribe('auth.statusChange', handleStatusChange);
  };

function handleStatusChange(response) {
     document.body.className = response.authResponse ? 'connected' : 'not_connected';

     if (response.authResponse) {
     //  console.log(response);
     FB.api('/me/likes/171099129606813', function(response) {
                        if ( response.data.length === 1 ) { //there should only be a single value inside "data"
                        console.log('You like it');
                        } else {
                        console.log("You don't like it");
                        }
        });

     }
     else
     {
         FB.login(function(response) {
            if (response.status == 'connected') {
                  //console.log(response); 

                    FB.api('/me/likes/171099129606813', function(response) {
                        console.log(response);
                     });

                } else {
                    alert('Not Logged In');
                  // user is not logged in
                }    

        }, {scope: 'email,user_likes'});     
     }
   }
  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
    <div data-role="header">
        <h1>My Title</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p>Hello world</p>      
    </div><!-- /content -->

</div><!-- /page -->

</body>
</html> 
```

仍然没有将我带到身份验证页面它正在更改 body 的类名但无法处理 fb 登录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T18:59:09.810

这也发生在我身上。FB.login 函数嵌套在回调中。在我的情况下，浏览器阻止了来自 facebook 的弹出页面。当我取消阻止弹出窗口时，它很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T19:32:52.067

今天我花了一段时间才明白 window.fbAsyncInit 方法不会在某些移动浏览器上触发（实际上是在我公司的所有移动设备上）。你需要做的是添加这样的东西：

```
var called = false;
window.fbAsyncInit = function () {
    if (called) return;
    called = true;

    // here the fb code
}

if (!called) window.fbAsyncInit(); 
```

# sql - 创建 SQL 脚本以将旧数据库更改为当前数据库

> ID：12111715
> 
> 赞同：3
> 
> 时间：2012-08-24T14:49:04.993
> 
> 标签：sql, sql-server, create-table

我正在为一个项目创建前端，并从公司的服务器上复制了后端数据库并将其放在我的计算机上。我需要对安全角色和其他事情进行一些更改（一些新表和现有表中的两个新列），因此我复制了复制的数据库并在新数据库上进行了更改。

我现在想把我的项目部署到公司的服务器上，但是我们需要修改原来的后端数据库。我需要生成一个 SQL 脚本来查找旧数据库和我的新数据库之间的更改，该脚本可以在旧数据库上运行以创建新的表和列。该脚本应保留旧数据库中的数据，而不是添加我在新数据库中创建的任何垃圾/测试数据。

顺便说一句，我使用的是 SQL Server 2008 R2，服务器上的旧数据库是 2005 年的。我一直在寻找要使用的实用程序并找到[了 tablediff](http://msdn.microsoft.com/en-us/library/ms162843%28SQL.90%29.aspx)。但是，它看起来会复制数据，我在信息页面上看不到一个参数来切换它。

我确定这很简单，但我不确定该怎么做。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:03:02.383

到目前为止，我最信任的处理模式比较的解决方案是 Red Gate 的 SQL 比较：

[http://www.red-gate.com/products/sql-development/sql-compare/](http://www.red-gate.com/products/sql-development/sql-compare/)

它有一个名为 Data Compare 的伴侣，专为数据而设计。您可以获取免费试用版，看看它在这种情况下是否满足您的需求。

还有其他选项，例如[SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)具有此功能，尽管我尚未对其进行任何程度的测试以比较功能集、性能等。

我还写了一篇关于为什么要使用工具并为此功能付费的博客，而不是自己以编程方式解决它。如果预算是主要障碍，该帖子还提到了多种替代方案：

[http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/](http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/)

# python - 捕获 dis.dis 结果

> ID：12111717
> 
> 赞同：17
> 
> 时间：2012-08-24T14:49:11.310
> 
> 标签：python, python-2.7

有什么方法可以在`dis.dis()`不重定向的情况下获得输出`sys.stdout`？我试过了：

```
out=str(dis.dis()) 
```

和

```
out=""""""
out+=str(dis.dis()) 
```

但是我很快发现它返回了`None`。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T14:55:30.417

不幸的是，在 3.4 之前的 Python 版本中，该`dis`模块使用打印语句到标准输出，因此它不会返回任何直接有用的东西。要么您必须重新实现`dis`,`disassemble`和`disassemble_string`函数，要么临时替换`sys.stdout`为捕获输出的替代方法：

```
import sys
from cStringIO import StringIO

out = StringIO()
stdout = sys.stdout
sys.stdout = out
try:
    dis.dis()
finally:
    sys.stdout = stdout
out = out.getvalue() 
```

这实际上最好使用上下文管理器完成：

```
import sys
from contextlib import contextmanager
from cStringIO import StringIO

@contextmanager
def captureStdOut(output):
    stdout = sys.stdout
    sys.stdout = output
    try:
        yield
    finally:
        sys.stdout = stdout

out = StringIO()
with captureStdOut(out):
    dis.dis()
print out.getvalue() 
```

这样，`stdout`即使出现问题，您也可以保证恢复`dis`。一个小示范：

```
>>> out = StringIO()
>>> with captureStdOut(out):
...     dis.dis(captureStdOut)
... 
>>> print out.getvalue()
 83           0 LOAD_GLOBAL              0 (GeneratorContextManager)
              3 LOAD_DEREF               0 (func)
              6 LOAD_FAST                0 (args)
              9 LOAD_FAST                1 (kwds)
             12 CALL_FUNCTION_VAR_KW     0
             15 CALL_FUNCTION            1
             18 RETURN_VALUE 
```

In Python 3.4 and up, the relevant functions take a `file` parameter to redirect output to:

```
from io import StringIO

with StringIO() as out:
    dis.dis(file=out)
    print(out.getvalue()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-15T16:54:00.873

If using Colab / Jupyter

In one cell you can run `dis` redirecting the output to a variable

```
%%capture dis_output
# dis : Disassembler for Python bytecode
from dis import dis
dis(function_to_check) 
```

And then you can use it from Bash. Here an example

```
! echo  "{dis_output.stdout}" | grep -i global

14           4 LOAD_GLOBAL              0 (AudioLibrary)
             36 LOAD_GLOBAL              2 (userLanguageAudio)
             50 LOAD_GLOBAL              2 (userLanguageAudio)
             62 LOAD_GLOBAL              3 (LESSON_FILES_DIR)
 27          76 LOAD_GLOBAL              4 (get_ipython)
 30          96 LOAD_GLOBAL              6 (pread)
 31         104 LOAD_GLOBAL              7 (print)
 34     >>  124 LOAD_GLOBAL              7 (print) 
```

Or from Python

```
print(dis_output.stdout) 
```

# c# - 如何让用户从本地系统硬盘的任何位置选择 JPG 文件

> ID：12111724
> 
> 赞同：0
> 
> 时间：2012-08-24T14:50:01.103
> 
> 标签：c#, .net, sql, visual-studio-2010, file-upload

我使用文件上传器控件。我希望用户：

1）搜索任何位置

2) 选择并加载任何 .JPG 文件或任何其他图像格式文件

3）将该特定文件存储在数据库（SQL）中。

解决方案：我实现了所有这些，但是我对路径进行了硬编码。

问题：我不知道如何删除这个硬编码并达到以上 3 点 :( 请帮助调整代码：

```
if (FileUpload1.HasFile)
{
   FileStream FS = new FileStream(@"C:\Users\Ramakrishnan\Desktop\New folder\001.jpg", FileMode.Open, FileAccess.Read);
   byte[] img = new byte[FS.Length];
   FS.Read(img, 0, Convert.ToInt32(FS.Length));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:23:23.497

文件上传控件具有流属性，只需将您的`FS`变量替换为`FileUpload1.FileContent`.

****更新****

根据评论中的讨论，我认为您仍然做错了。

您的代码应该是：

```
if (FileUpload1.HasFile)
{
   byte[] img = new byte[FileUpload1.FileContents.Length];
   FileUpload1.FileContents.Read(img, 0, Convert.ToInt32(FS.Length));
   // Store the image in the DB
} 
```

没有理由尝试从文件系统打开文件，您感兴趣*的文件在 Web 服务器的文件系统中不存在*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:59:06.207

文件上传1.文件名

[如何：使用 FileUpload Web 服务器控件上传文件](http://msdn.microsoft.com/en-us/library/ms227669%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:06:42.213

这些链接通过 winforms 的示例对其进行了解释：

[http://dotnetperls.com/openfiledialog](http://dotnetperls.com/openfiledialog)

[http://www.geekpedia.com/tutorial67_Using-OpenFileDialog-to-open-files.html](http://www.geekpedia.com/tutorial67_Using-OpenFileDialog-to-open-files.html)

这个用于网络表单：

[文件上传到文件流](https://stackoverflow.com/questions/3068303/fileupload-to-filestream)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T15:07:44.363

```
 string filename = Path.GetFileName(FileUpload1.FileName);
        FileStream FS = new FileStream(filename, FileMode.Open, FileAccess.Read); 
```

# php - PHP array_fill 但具有重复模式

> ID：12111725
> 
> 赞同：0
> 
> 时间：2012-08-24T14:50:04.803
> 
> 标签：php

是否有内置函数或其他优雅的方式来用重复的值模式预填充数组。

基本上我需要的是`array_fill`and的组合`str_repeat`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:58:05.310

这个怎么样：

```
function array_pattern($input_array, $repeat_count) {
    $output_array=array();
    for($count = 1; $count < $repeat_count; $count++) {
        $output_array = array_merge($output_array,$input_array));
    }
    return $output_array;
} 
```

（仅适用于键控数组，不适用于关联数组，但整个重复模式并不适合关联数组）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:53:57.653

我会说不。我从来没有遇到过这样的事情。我认为最好的办法是您自己的 for 循环，以您需要的模式将值附加到数组。

# javascript - Razor/JavaScript 和尾随分号

> ID：12111729
> 
> 赞同：60
> 
> 时间：2012-08-24T14:50:11.337
> 
> 标签：javascript, asp.net-mvc, razor

使用 Visual Studio 2012，在 Razor 视图页面的 JavaScript 部分中，我得到了我认为是 Razor 语法与 JavaScript 语法之间的战斗。特别是，脚本部分中的尾随分号由智能感知标记，并传递编译器警告（不是错误）：

> '警告 13 语法错误'。

如果我删除它，那么我会收到一个声明终止建议（在这种情况下是[ReSharper](http://en.wikipedia.org/wiki/ReSharper)，但只是一种好的做法）。

```
<script type="text/javascript">
    $().ready(function(){
        var customer = @Html.Raw(ViewBag.CustomerJSON);  // <- Razor (I think) doesn't like this semicolon
    });
</script> 
```

这是 Razor 中的错误吗？如果是这样，有没有办法我可以重写它来避免这个问题？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-25T06:53:01.180

> 这是 Razor 中的错误吗？

绝对不。运行您的应用程序，它将按预期工作。

这是您正在使用的工具（Visual Studio 2012、ReSharper、...）中的一个错误，无法识别完全有效的语法并警告您一些不应该被警告的事情。如果尚未完成，您可以尝试在 Microsoft Connect 站点上打开一个问题并发出此错误信号。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-01T17:56:52.770

由于这似乎仍在发生并且令人讨厌，我想我至少会让其他人知道我最终将其用作“黑客”。我不想忽略警告，而宁愿接受更古怪的语法（是的，有人会说这会降低性能:)）

我用作解决方法的是最后使用客户端添加。对我来说，这个错误发生在定义一个“整数”常量时，所以

```
window.foo = @(Model.Something); 
```

给了我很好的旧分号错误。我只是将其更改为：

```
window.foo = @Model.Something + 0; 
```

（在所述问题的情况下，您应该只能添加''，所以+''。

我知道客户端上发生了另一个完整的添加，它并不优雅，但它确实避免了错误。所以使用它或不使用它，但我更喜欢这个而不是看到警告/错误。

如果有人知道服务器端的语法解决方法，我会更喜欢这个，而不是客户端的，所以请添加。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-15T01:23:04.567

我发现将 Razor 语法包装在 JavaScript 标识函数中也会使 IDE 感到高兴。

```
<script type="text/javascript">
    @* I stands for Identity *@
    function I(obj) { return obj; }
    $().ready(function(){
        var customer = I(@Html.Raw(ViewBag.CustomerJSON));
    });
</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-02T14:45:55.607

这对我有用：

```
var customer = @Html.Raw(ViewBag.CustomerJSON + ";") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-08T00:28:10.170

这对我有用

```
@Html.Raw(string.Format("var customer = {0};", ViewBag.CustomerJSON)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-07T16:44:04.403

这是布尔值的解决方法：

```
var myBool = @(Model.MyBool ? "true;" : "false;") 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-08T12:36:15.203

```
<script type="text/javascript">
    $().ready(function(){
        var customerName = ('@ViewBag.CustomerName');  // <- wrap in parens
    });
</script> 
```

不是用括号括起来那么简单吗？通过控制台输入值似乎工作正常，没有副作用。

它适用于字符串，但它仍然会为未引用的值提供错误，但我仍然喜欢字符串值。对于数字，您可以使用`parseInt('@Model.TotalResultCount', 10)`.

# wcf - 确定服务器上的 WCF 客户端超时设置

> ID：12111732
> 
> 赞同：0
> 
> 时间：2012-08-24T14:50:26.567
> 
> 标签：wcf, timeout

是否可以确定服务器上的客户端超时值？不幸的是，我有一个长时间运行的 WCF 服务（大约 90 秒），我想事先知道客户端是否会超时。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:00:19.970

除非您强迫客户告诉您他的超时时间，否则您无法知道这一点。您可以询问信息，添加方法参数或标题。

您还可以尝试将您的长期通话分成更小的部分，如果您的业务允许，则迫使客户进行后续通话。

您可以使用带有回调的异步调用，单向方法/双工通道。

还有其他可能性，但我们需要更多地了解您的环境。

# php - 保留从 php 中的下拉值中选择的值

> ID：12111733
> 
> 赞同：0
> 
> 时间：2012-08-24T14:50:28.427
> 
> 标签：php

我想在提交后保留从下拉值中选择的内容。

我尝试了下面的代码，但它仍然返回到之前的代码。无法返回所选的。

```
<?php $attr = 'selected="selected"'; ?>
<?php $colname = isset($_REQUEST['colname']) ? $_REQUEST['colname'] : null; ?>
<select name="colname" style="margin-bottom:3px;"> 
<option value="value1" <?php echo $colname == 'Value1' ? $attr : ''; ?>>value1</option>
<option value="value2" <?php echo $colname == 'Value2' ? $attr : ''; ?>>value2</option>
<option value="value3" <?php echo $colname == 'Value3' ? $attr : ''; ?>>value3</option>
<option value="value4" <?php echo $colname == 'Value4' ? $attr : ''; ?>>value4</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:06:45.163

我会通过查看您输出的源来确认这一点，但我怀疑您没有将 colname 正确传递给 REQUEST（或者您在脚本的其他位置设置了 $_REQUEST['colname'] 的值）。您的代码的其余部分看起来不错。

# performance - CXF DynamicClientFactory 效率

> ID：12111737
> 
> 赞同：1
> 
> 时间：2012-08-24T14:50:49.433
> 
> 标签：performance, web-services, jax-ws, cxf, webservice-client

我需要为 Web 服务生成 Java 客户端。我有两种选择，一种是使用 Apache CXF`DynamicClientFactory`类，另一种是使用 JAX-WS Dispatch API。

从 CXF 文档中，我了解到`DynamicClientFactory`该类将在运行时生成 Web 服务 SEI、数据类（使用 wsdl2Java 工具）。如果我想调用任何 Web 服务方法，我需要加载适当的数据类名称，并且需要使用反射设置参数，如下所示。

```
JaxWsDynamicClientFactory dcf = JaxWsDynamicClientFactory.newInstance();
Client client = dcf.createClient("people.wsdl", classLoader);

Object person = Thread.currentThread().getContextClassLoader().loadClass("com.acme.Person").newInstance();

Method m = person.getClass().getMethod("setName", String.class);
m.invoke(person, "Joe Schmoe");

client.invoke("addPerson", person); 
```

在上面的代码中，`Person`类是由 CXF 在运行时生成的，反射用于设置属性值。

我的问题是：**如果我想设置 20 个参数值，那么我需要进行 20 次反射调用来做到这一点。这是一种有效的方法吗？或者有其他选择吗？还是使用 JAX-WS 的 Dispatch API 更好？**请帮我。

# javascript - javascript 哈希/数组混合性能

> ID：12111738
> 
> 赞同：0
> 
> 时间：2012-08-24T14:50:50.167
> 
> 标签：javascript, arrays, hashmap

对于我的应用程序，我需要一个可以通过键进行快速迭代和快速查找的集合。

## 示例数据

```
var data = [
   { myId: 4324, val: "foo"},
   { myId: 6280, val: "bar"},
   { myId: 7569, val: "baz"},
   ... x 100,000
]; 
```

密钥包含在我要存储的对象中。我一起破解了**Harray**（哈希数组）[https://gist.github.com/3451147](https://gist.github.com/3451147)。

这是你如何使用它

```
// initialize with the key property name
var coll = new Harray("myId");
// populate with data
data.forEach(function(item){ coll.add(item); });
// key lookup
coll.h[4324] // => { myId: 4324, val: "foo"}
// array functionality
coll[1] // => { myId: 6280, val: "bar"}
coll.map(function(item){ return item.val; }); // => ["foo", "bar", "baz"]
coll.length // => 3
// remove value
coll.remove(coll[0]); // delete => { myId: 4324, val: "foo"}
// by key
coll.removeKey(7569) // delete => { myId: 7569, val: "baz"}
// by index
coll.removeAt(0); // delete => { myId: 6280, val: "bar"} 
```

删除速度似乎是我能看到的唯一权衡。`h` `Object`存储的对象在 the和 the之间共享，`Array`所以我不存储任何东西的 2 个副本。

## 问题

1.  我应该坚持使用`for in`来遍历对象属性吗？
2.  保留对象键的数组而不是对象本身？
3.  其他选择？

**注意：**浏览器兼容性不是一个因素。这仅适用于 chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:10:42.423

为了了解特定集合是否有用，您必须：

*   首先验证是否存在性能问题。如果它足够快，请不要担心。要检查这一点，假设整个页面很慢，请使用[Chrome 分析器之类的分析器](https://developers.google.com/chrome-developer-tools/docs/cpu-profiling)来检查问题是否在您当前使用的集合中

*   然后检查您正在构建的备用集合真的更快。为此，一个常见的解决方案是使用[http://jsperf.com/](http://jsperf.com/)之类的网站（或简单地构建您自己的定时测试），使用足够大的数据集对这两个解决方案进行基准测试。

只有在那之后，您才应该努力确保您的解决方案是 API 完整的、完全没有错误的（使用测试单元）等等。

执行我首先提到的两项检查可能会防止无用的工作，因为 V8 引擎中的标准对象非常快速和智能。

# javascript - jQuery附加一个元素数组

> ID：12111740
> 
> 赞同：57
> 
> 时间：2012-08-24T14:50:55.097
> 
> 标签：javascript, jquery, arrays, performance, append

出于这个问题的目的，假设我们需要`append()`1000 个对象到该`body`元素。

你可以这样做：

```
for(x = 0; x < 1000; x++) {
    var element = $('<div>'+x+'</div>');
    $('body').append(element);
} 
```

这可行，但是对我来说似乎效率低下，因为 AFAIK 这将导致 1000 个文档重排。更好的解决方案是：

```
var elements = [];
for(x = 0; x < 1000; x++) {
    var element = $('<div>'+x+'</div>');
    elements.push(element);
}
$('body').append(elements); 
```

然而，这不是一个理想的世界，这会引发错误`Could not convert JavaScript argument arg 0 [nsIDOMDocumentFragment.appendChild]`。我知道`append()`不能处理数组。

我将如何使用`jQuery`（我知道[DocumentFragment](http://ejohn.org/blog/dom-documentfragments/)节点，但假设我需要在元素上使用其他 jQuery 函数，例如`.css()`）一次向 DOM 添加一堆对象以提高性能？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-08-24T14:53:33.390

您可以使用空的 jQuery 对象而不是数组：

```
var elements = $();
for(x = 0; x < 1000; x++) {
    elements = elements.add('<div>'+x+'</div>');
    // or 
    // var element = $('<div>'+x+'</div>');
    // elements = elements.add(element);
}
$('body').append(elements); 
```

如果您想对循环内新生成的元素进行处理，这可能很有用。但请注意，这将创建一个巨大的内部元素堆栈（在 jQuery 对象内）。

* * *

**尽管[您的代码似乎与 jQuery 1.8 完美配合](http://jsfiddle.net/7Q6wm/2/)**。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-24T14:53:16.273

你可以打电话

```
$('body').append(elements.join('')); 
```

或者您可以首先创建一个大字符串。

```
var elements = '';
for(x = 0; x < 1000; x++) {
    elements = elements + '<div>'+x+'</div>';
}
$(document.body).append(elements); 
```

就像您提到的那样，可能最“正确”的方式是使用 DocFrag。这可能看起来像

```
var elements = document.createDocumentFragment(),
    newDiv;
for(x = 0; x < 1000; x++) {
    newDiv = document.createElement('div');
    newDiv.textContent = x;
    elements.append( newDiv );
}
$(document.body).append(elements); 
```

^(`.textContent`IE<9 不支持，需要条件检查才能使用`.innerText`or`.text`代替。)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-24T15:04:15.747

升级到 jQuery 1.8，这按预期工作：

```
​$('body')​.append([
    '<b>1</b>',
    '<i>2</i>'   
])​;​ 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-10-31T01:09:38.840

由于 $.fn.append 接受可变数量的元素，我们可以使用`apply`它来将数组作为参数传递给它：

```
el.append.apply(el, myArray); 
```

如果您有一组 jQuery 对象，则此方法有效。根据规范，如果你有 DOM 元素，你可以附加一个元素数组。如果你有一个 html 字符串数组，你可以 .join('') 它们并一次性追加它们。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-24T14:57:46.870

对第二种方法稍作改动：

```
var elements = [],
newDiv;
for (x = 0; x < 1000; x++) {
    newDiv = $('<div/>').text(x);
    elements.push(newDiv);
}
$('body').append(elements); 
```

$.append() 当然可以追加一个数组：[http ://api.jquery.com/append/](http://api.jquery.com/append/)

> .append(内容) | 内容：一个或多个附加 DOM 元素、元素数组、HTML 字符串或 jQuery 对象，插入到匹配元素集中每个元素的末尾。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-24T14:59:54.740

有时，jQuery 并不是最好的解决方案。如果您有很多元素要附加到 DOM，`documentFragment`这是一个可行的解决方案：

```
var fragment = document.createDocumentFragment();
for(var i = 0; i < 1000; i++) {
    fragment.appendChild(document.createElement('div'));
}
document.getElementsByTagName('body')[0].appendChild(fragment); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T15:03:19.030

我会使用本机 Javascript，通常要快得多：

```
var el = document.getElementById('the_container_id');
var aux;
for(x = 0; x < 1000; x++) {
    aux = document.createElement('div');
    aux.innerHTML = x;
    el.appendChild(aux);
} 
```

编辑：

那里有一个[jsfiddle](http://jsfiddle.net/du2TN/1/)实现了不同的选项。@jackwander 的解决方案显然是最有效的解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-24T14:56:42.140

如果您要追求原始性能，那么我建议您使用纯 JS，尽管有些人会认为您的开发性能比您的网站/程序性能更重要。检查此[链接](http://jsperf.com/dom-insertion/2)以获取基准和不同 DOM 插入技术的展示。

编辑：

作为一种好奇心，`documentFragment`被证明是最慢的方法之一。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-26T12:26:01.460

*我知道，这个问题很老，但也许它对其他人有帮助。*

或者简单地使用 ECMA6 扩展运算符：

```
$('body').append(...elements); 
```

# php - youtube 如何编码他们的网址？

> ID：12111744
> 
> 赞同：5
> 
> 时间：2012-08-24T14:51:06.593
> 
> 标签：php, url, encryption, youtube

快速提问

youtube 如何编码他们的网址？采取以下

[http://www.youtube.com/watch?v=MhWyAL2hKlk](http://www.youtube.com/watch?v=MhWyAL2hKlk)

他们在做什么来获得价值 MhWyAL2hKlk

他们是否使用某种加密，然后在最后解密

我想要与我在下面工作的网站类似的东西看起来很可怕。

```
http://localhost:8888/example/account_player/?playlist=drum+and+bass+music 
```

我想对 url 进行编码以表现得像 youtube 一样不知道他们是如何做到的。

任何建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T15:47:43.520

嗯，从技术上讲，YouTube 使用算法生成视频 ID。老实说，我不知道。它可以是整个视频文件的哈希和 + 使用当前 UNIX 时间的盐，也可以是视频特有的 base64 编码。但我知道它很可能不是随机的，因为如果是这样，碰撞的风险就会太高。

不过，为了举例，我们假设 YouTube 确实会生成随机 ID。请记住，当使用随机生成的值来存储某些内容时，通常最好实施碰撞检查以确保新对象不会覆盖现有对象。但在实践中，我建议使用散列算法，因为它们是单向的并且在防止冲突方面非常有效。

所以，我对 PHP 不是很熟悉。我必须先用[JavaScript](https://jsfiddle.net/339Lenwz/)编写它。然后，我把它移植到 PHP 上，结果比较简单：

```
function randch($charset){
    return $charset[rand() % strlen($charset)];
}

function randstr($len, $charset = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-"){
    $out = [];

    for($i = 0; $i < $len; $i++){
        array_push($out, randch($charset));
    }
    return join("", $out);
} 
```

这样做是`len`通过给定的`charset`.

这是一些示例输出：

```
randstr(5)              -> 1EWHd
randstr(30)             -> atcUVgfhAmM5bXz-3jgyRoaVnnY2jD
randstr(30, "asdfASDF") -> aFSdSAfsfSdAsSSddFFSSsdasDDaDa 
```

虽然使用这么短的字符集不是一个好主意。

```
randstr(30, "asdf")

sdadfaafsdsdfsaffsddaaafdddfad
adaaaaaafdfaadsadsdafdsfdfsadd
dfaffafaaddfdddadasaaafsfssssf

randstr(30)

r5BbvJ45HEN6dWtNZc5ZvHGLCg4Qyq
50vKb1rh66WWf9RLZQY2QrMucoNicl
Mklh3zjuRqDOnVYeEY3B0V3Moia9Dn 
```

现在假设您已经告诉页面使用此函数为刚刚上传的视频生成随机 id，现在您希望将此键存储在带有相关数据链接的表中以显示正确的页面。如果通过`$_GET`（例如`/watch?v=02R0-1PWdEf`）请求一个 id，您可以告诉页面对照包含视频 id 的数据库检查此键，如果找到匹配项，则从该键中获取数据，否则给出 404。

如果您不希望它是随机的，也可以直接编码为 base 64 字符串。这可以通过`base64_encode()`和来完成`base64_decode()`。例如，假设您将视频的数据放在一个字符串`$str="filename=apples.avi;owner=coolpixlol124"`中，无论出于何种原因。`base64_encode($str)`会给你`ZmlsZW5hbWU9YXBwbGVzLmF2aTtvd25lcj1jb29scGl4bG9sMTI0`。

稍后要对其进行解码，请使用`base64_decode($new_str)`，这将返回原始字符串。

不过，正如我之前所说，使用像`SHA`.

我希望这会有所帮助。

编辑：我忘了提，YouTube 的视频 ID 目前是 11 个字符长，所以如果你想使用相同类型的东西，你会想用它`randstr(11)`来生成一个 11 位的随机字符串，就像我得到的这个示例 id：`6AMx8N5r6cg`

编辑2（2015.12.17）：完全重写答案。原作很烂，写的时候不知道在想什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:53:16.087

您的问题与其他 SO question 类似，其中包含一些优化的生成器功能以及您要解决的问题的清晰描述：

[php - 帮助提高这个 youtube 风格的 url 生成器的效率](https://stackoverflow.com/questions/1853471/php-help-improve-the-efficiency-of-this-youtube-style-url-generator)

它将一次性为您提供代码、更好地理解性能问题以及更好地理解问题域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:55:33.250

不知道谷歌究竟是如何生成他们的字符串的，但这个想法真的很简单。创建一个类似的表：

```
+----------+------------------------------+
| code     | url                          |
+----------+------------------------------+
| asdlkasd | playlist=drum+and+bass+music |
+----------+------------------------------+ 
```

现在，创建您的网址，如：

```
http://localhost:8888/example/account_player/asdlkasd 
```

之后，只需阅读将您自己制作的代码与数据库 url 进行比较，然后加载您的图像、视频或任何您想要的内容。

PS：这只是一个简单的例子。当然，它也可以通过许多其他方式来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-26T10:58:57.060

```
function alphaID($in, $to_num = false, $pad_up = false, $pass_key = null)
{
  $out   =   '';
   $index = 'abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
   $base  = strlen($index);

   if ($pass_key !== null) {

for ($n = 0; $n < strlen($index); $n++) {
  $i[] = substr($index, $n, 1);
}

$pass_hash = hash('sha256',$pass_key);
$pass_hash = (strlen($pass_hash) < strlen($index) ? hash('sha512', $pass_key) : $pass_hash);

for ($n = 0; $n < strlen($index); $n++) {
  $p[] =  substr($pass_hash, $n, 1);
}

array_multisort($p, SORT_DESC, $i);
$index = implode($i);
}

if ($to_num) {
// Digital number  <<--  alphabet letter code
$len = strlen($in) - 1;

for ($t = $len; $t >= 0; $t--) {
  $bcp = bcpow($base, $len - $t);
  $out = $out + strpos($index, substr($in, $t, 1)) * $bcp;
}

if (is_numeric($pad_up)) {
  $pad_up--;

  if ($pad_up > 0) {
    $out -= pow($base, $pad_up);
  }
}
} else {
// Digital number  -->>  alphabet letter code
if (is_numeric($pad_up)) {
  $pad_up--;

  if ($pad_up > 0) {
    $in += pow($base, $pad_up);
  }
}

for ($t = ($in != 0 ? floor(log($in, $base)) : 0); $t >= 0; $t--) {
  $bcp = bcpow($base, $t);
  $a   = floor($in / $bcp) % $base;
  $out = $out . substr($index, $a, 1);
  $in  = $in - ($a * $bcp);
}
}

return $out;
}
?> 
```

您可以使用此功能加密或解密。

```
<?php

$random_id=57256;
$encode=alphaID($random_id);
$decode=alphaID($encode,true); //where boolean true reverse the string back to original

echo "Encode : {$encode} <br> Decode : {$decode}";
?> 
```

只需访问以下内容以获取更多信息：

[http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/](http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T14:57:29.243

如果不想使用十进制数，可以将它们编码为 base36：

```
echo base_convert(123456789, 10, 36); // => "21i3v9" 
```

并解码回来：

```
echo base_convert("21i3v9", 36, 10); // => "123456789" 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-24T14:55:08.193

只需使用自动增量 ID 值（来自数据库）。虽然我个人喜欢长 URL。

# java - 将列表放入 String[]

> ID：12111754
> 
> 赞同：-2
> 
> 时间：2012-08-24T14:51:38.287
> 
> 标签：java

我有以下代码：

```
 contacts = new Contact[] { 
      new Contact(0, "Mercury")
  };  
} 
```

我想要做的是从联系人列表中添加值，而不是像 Mercury 这样的字符串！

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:00:00.653

只需使用[List](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)的 toArray 方法，并适当地转换它：

```
Contact[] contacts = contactsList.toArray(new Contact[0]); 
```

再看一下，你需要给它一个 Contact[] （当然是空的），让它知道要使用什么类类型。但是，您不需要强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:56:59.810

如果你有`List<Contact> contactsList`一些数据。

```
int size = contactsList.size();

Contact[] contacts  = new Contact[size];

for(int i = 0; i < size; i++ )
{
   // selection logic here--

   contacts[i] = contactsList.get(i);
} 
```

现在你有一个 Array `Contact[]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:00:52.750

最简单的方法是使用`List.toArray`方法。假设你有一个`List<Contact> lstContacts`或类似的：

```
Contact[] arrContacts = lstContacts.toArray(new Contact[0]); 
```

# c# - OpenXML 生成的代码冻结 Visual Studio

> ID：12111755
> 
> 赞同：0
> 
> 时间：2012-08-24T14:51:41.627
> 
> 标签：c#, visual-studio-2010, openxml

我正在为客户处理 DocumentML，我对 OpenXML 完全陌生。我已经阅读并收听了 Erik White 的博客，OpenXML 似乎非常强大。我遇到的问题是 OpenXML Productivity 工具生成的代码中有 21121 行。我添加了一个类并将此代码粘贴在那里，现在任何时候我的解决方案尝试进入该类它都会冻结，如果我尝试在 IDE 中打开该类，VS 会冻结。我以前从未遇到过这个问题，因为我的机器有 8 GB 内存和 4 核处理器。

以前有人遇到过这个问题吗？OpenXML 是否有设置或需要做的事情。我正在运行 VS 2010 Ultimate SP1 并进行了完整安装。任何帮助将不胜感激。

谢谢

**编辑 1**

我正在尝试访问表单中的复选框。当我查看派生的 XML 时，我看到

```
<w:sdtPr xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
 <w:rPr>
  <w:rFonts w:asciiTheme="minorHAnsi" w:hAnsiTheme="minorHAnsi" w:cstheme="minorHAnsi" />
  <w:sz w:val="20" />
  <w:szCs w:val="20" />
 </w:rPr>
 <w:id w:val="-210274200" />
 <w14:checkbox xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml">
  <w14:checked w14:val="0" />
  <w14:checkedState w14:val="2612" w14:font="MS Gothic" />
  <w14:uncheckedState w14:val="2610" w14:font="MS Gothic" />
 </w14:checkbox>
</w:sdtPr> 
```

我正在尝试检查该节点是否包含一个复选框，所以我做了这样的事情。

```
 private static XNamespace w14 = 
        "http://schemas.microsoft.com/office/word/2010/wordml>";

 if (element.Elements(w + "sdtPr")
                        .Elements(w14 + "checkbox").Count() > 0)
                { } 
```

但是代码从不属于那个条件。我在这里缺少什么吗？感谢您的帮助 **结束编辑 1**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:44:26.530

我们最初通过复制生产力工具生成的代码并将其用作文件来采用相同的方法。这导致 VS 一直崩溃，并且测试和更新非常繁琐，因为每次更改都需要完全重新生成代码。这促使我们使用模板，这为我们节省了大量时间，并且很容易加载到内存中，然后使用 Open XML SDK 进行操作：

```
byte[] byteArray = File.ReadAllBytes("C:\\temp\\test.docx");
using (MemoryStream stream = new MemoryStream())
{
    stream.Write(byteArray, 0, (int)byteArray.Length);
    using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(stream, true))
    {
       // Do work here
    }
    File.WriteAllBytes("C:\\temp\\test.docx", stream.ToArray()); 
} 
```

# mysql - 按特定项目 id 的行号 id 过滤

> ID：12111757
> 
> 赞同：3
> 
> 时间：2012-08-24T14:51:44.460
> 
> 标签：mysql, sql, oracle

从[MySQL - Get row number on select](https://stackoverflow.com/questions/2520357/mysql-get-row-number-on-select) 我知道如何使用这个 mysql 查询获取行号/排名：

```
SELECT @rn:=@rn+1 AS rank, itemID
FROM (
  SELECT itemID
  FROM orders
  ORDER BY somecriteria DESC
) t1, (SELECT @rn:=0) t2; 
```

结果返回如下内容：

```
+--------+------+
| rank | itemID |
+--------+------+
|  1   |   265  |
|  2   |   135  |
|  3   |   36   |
|  4   |   145  |
|  5   |   123  |
|  6   |   342  |
|  7   |   111  |
+--------+------+ 
```

我的问题是：如何在 1 个简单的 SINGLE QUERY 中获得结果，该查询返回排名低于 itemID 145 的项目，即：

```
+--------+------+
| rank | itemID |
+--------+------+ 
|  5   |   123  |
|  6   |   345  |
|  7   |   111  |
+--------+------+ 
```

也欢迎使用 Oracle sql 查询。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T22:16:49.447

Oracle 解决方案（不确定它是否符合您的“一个简单的单一查询”标准）：

```
WITH t AS
(SELECT item_id, row_number() OVER (ORDER BY some_criteria DESC) rn
   FROM orders)
SELECT t2.rn, t2.item_id
  FROM t t1 JOIN t t2 ON (t2.rn > t1.rn)
 WHERE t1.item_id = 145; 
```

我的假设是 item_id 没有重复值。

试图用 MySQL 术语来表达，也许这样的事情可能会奏效：

```
SELECT t2.rank, t2.itemID
  FROM (SELECT @rn:=@rn+1 AS rank, itemID
          FROM (SELECT itemID
                  FROM orders
                 ORDER BY somecriteria DESC), (SELECT @rn:=0)) t1 INNER JOIN
       (SELECT @rn:=@rn+1 AS rank, itemID
          FROM (SELECT itemID
                  FROM orders
                 ORDER BY somecriteria DESC), (SELECT @rn:=0)) t2 ON t2.rank > t1.rank
 WHERE t1.itemID = 145; 
```

免责声明：我不经常使用 MySQL，而且它未经测试。甲骨文的作品有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T15:06:02.963

```
SELECT @rn:=@rn+1 AS rank, itemID
  FROM (
    SELECT itemID
    FROM orders
    ORDER BY somecriteria DESC
  ) t1, (SELECT @rn:=0) t2
where rank >
(
select rank from
   (
   SELECT @rn:=@rn+1 AS rank, itemID
   FROM 
       (
       SELECT itemID
       FROM orders
       ORDER BY somecriteria DESC
       ) t1, (SELECT @rn:=0) t2
   ) x where itemID = 145
) y 
```

# mysql - 访问 Azure MySQL 服务

> ID：12111760
> 
> 赞同：7
> 
> 时间：2012-08-24T14:51:59.503
> 
> 标签：mysql, azure

我在尝试访问作为 Windows Azure 服务的一部分提供的 MySQL 服务器（我想用另一个表替换）时遇到问题。我已经下载了 publishsettings XML 文件，我能找到的最接近的是“Data Source=us-cdbr-azure-east-a.cloudapp.net;”。但是，无法从网络浏览器访问它，所以我不确定下一步该做什么。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T15:17:49.873

您可以从 Azure 网站的仪表板获取完整的连接字符串

![Windows Azure 网站的仪表板](../Images/bbc2b16302b88e64ad64b2f63a248cb9.png)

![在此处输入图像描述](../Images/ebf338e651d91cfc26e2ebe492d5abc3.png)

然后，您可以在 MySQL 管理程序（例如[MySQL Workbench](http://www.mysql.com/products/workbench/) ）中使用这些凭据。

# c# - 无法从字符串末尾修剪

> ID：12111767
> 
> 赞同：0
> 
> 时间：2012-08-24T14:52:37.670
> 
> 标签：c#, string, trim

执行以下操作时：

```
foreach (String fromList in columns)
{
    query += "`" + fromList + "`,";
}
query.TrimEnd(','); 
```

逗号不会从字符串中删除。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T14:53:38.917

`TrimEnd`返回新字符串。你需要：

```
query = query.TrimEnd(','); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:58:44.747

字符串是不可变的，因此您需要存储 TrimEnd 的返回值。

```
query = query.TrimEnd(','); 
```

虽然有一种更简单的方法可以做到这一点：

```
var query = String.Join(",", columns.Select(fromList => String.Format("`{0}`", fromList))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:54:30.227

TrumEnd 返回一个字符串。您是否将其分配给变量？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:54:44.783

字符串是不可变的。如果您想要应用后的结果`TrimEnd`，则必须将该结果分配给一个变量：

```
foreach (String fromList in columns)
{
    query += "`" + fromList + "`,";
}
query = query.TrimEnd(','); 
```

在这里，我已将其分配回自身。

* * *

当然，更好的是：

```
query = String.Join(",",fromList.Select(a=>"`" + a + "`")); 
```

而不是循环+编辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T14:55:02.800

使用以下示例：

```
var trimmed = query.TrimEnd(',');
Console.WriteLine(trimmed); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T14:57:05.160

它应该是

```
foreach (String fromList in columns)
{
    query += "`" + fromList + "`,";
}
query = query.TrimEnd(','); 
```

# c++ - 如何将 unsigned char * 的内容转换为 const char *？

> ID：12111771
> 
> 赞同：0
> 
> 时间：2012-08-24T14:53:08.070
> 
> 标签：c++, casting, type-conversion

我可以重新解释演员表，并且大多数时候它被提出来，发出警告，所以我想知道是否还有其他选择（或者当然是重新解释演员表的干净实现）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:57:39.523

你没有说给出了什么警告或问题是什么，但转换为`char*`with`reinterpret_cast`应该可以在没有警告的情况下工作：

```
unsigned char *a;
const char *b = reinterpret_cast<char*>(a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:38:49.083

这取决于你想要做什么。

如果您只想以 访问内容，那么在预期a 的上下文中使用`char`简单的 或使用该值就可以了。`static_cast``char`

如果您需要将缓冲区传递给期望 a 的函数`char const*`，则 a`reinterpret_cast`是唯一的解决方案。

如果你想要一个字符串，使用指向缓冲区的指针就可以了：

```
std::string
bufferToString( unsigned char const* buffer, size_t length )
{
    return std::string( buffer, buffer + length );
} 
```

或者您可以复制到现有字符串中：

```
myString.assign( buffer, buffer + length );
myString.append( buffer, buffer + length );
//  etc. 
```

`std::copy`可以使用任何需要两个迭代器的字符串函数（或算法，如）。所需要的只是取消引用迭代器会导致类型隐式转换为`char`，这是 的情况`unsigned char`。

（您不能使用带有缓冲区地址和长度的字符串函数，因为它们不是模板，并且要求缓冲区地址具有 type `char const*`。虽然`unsigned char`隐式转换为`char`，但`unsigned char*`需要 a`reinterpret_cast`将其转换为`char*`。）

# php - 正则表达式检查新行

> ID：12111776
> 
> 赞同：8
> 
> 时间：2012-08-24T14:53:19.147
> 
> 标签：php, regex

我想检查 if 语句是否在一行或下一行没有大括号，如下所示：

```
if (blah === blah)
    do something 
```

或者：

```
if (foo === foo) do something 
```

我目前拥有的正则表达式是

```
/\)(?!.*\{)/ 
```

但不起作用。有人有想法么？

详细说明此正则表达式不会提取的唯一 If 语句如下：

```
if (foo === bar)
{ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T14:58:03.407

新行可能是`\n`(UNIX)、`\r\n`(Windows)、`\r`（为了更好的衡量标准）。广泛匹配新行的表达式是：

```
/\r\n|\r|\n/ 
```

要检查表达式是否在一行，您可以这样做：

```
if( preg_match( '/\r\n|\r|\n/', $string ) ) {
    // on more than one line
    ...
} else {
   // on one line
   ...
} 
```

为了进一步发展它以适用于您的特定语句示例`if ... do`，您可以这样做：

```
if( preg_match( '/if *\([^\)]+\) *(\r\n|\r|\n) *do /', $string ) ) {
    // on more than one line
    ...
} elseif( preg_match( '/if *\([^\)]+\) *do /', $string ) ) {
   // on one line
   ...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T14:55:43.033

简单 `\r` `\n`（回车和换行）

```
/[\r\n]/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T15:06:02.117

您还需要`.`匹配换行符：

```
/\)(?!.*\{)/s
            ^
    PCRE_DOTALL Modifier 
```

这是通过[(](http://php.net/manual/reference.pcre.pattern.modifiers.php) [) 修饰符完成](http://php.net/manual/reference.pcre.pattern.modifiers.php)[的`s``PCRE_DOTALL`](http://php.net/manual/reference.pcre.pattern.modifiers.php)（如注释中所述）：

> **s (PCRE_DOTALL)**
> 
> 如果设置了此修饰符，则模式中的点元字符匹配所有字符，包括换行符。没有它，换行符被排除在外。这个修饰符等价于 Perl 的 /s 修饰符。诸如 [^a] 之类的否定类始终匹配换行符，与此修饰符的设置无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T15:01:09.757

当你想专门检查这个时`if`，使用这个：

```
(if[ ()\w=]+)\r\n 
```

如果有换行符，则返回*true ，否则返回**false*。`if`

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-23T21:40:48.823

您正在寻找不使用大括号的 if 语句，但您的模式需要大括号。

这是我的建议：（[演示](https://3v4l.org/Ac76h)）

```
$strings = [
'if (blah === blah)
    do something',
'if (foo === foo) do something',
'if (bah === bah) {
    do something
}',
'if (bar === bar) {do something}'
];

foreach ($strings as $string) {
    var_export(preg_match('~if\s*\(.*?\)\s*(\{)?~', $string, $m) ? $m : '');
    echo "\nHas curly brace: " , isset($m[1]) ? 'Yes' : 'No';
    echo "\n---\n";
} 
```

输出：

```
array (
  0 => 'if (blah === blah)
    ',
)
Has curly brace: No
---
array (
  0 => 'if (foo === foo) ',
)
Has curly brace: No
---
array (
  0 => 'if (bah === bah) {',
  1 => '{',
)
Has curly brace: Yes
---
array (
  0 => 'if (bar === bar) {',
  1 => '{',
)
Has curly brace: Yes
--- 
```

基本上，用于`\s*`表示标记中没有空格/换行符、空格/换行符、多个空格/换行符的位置。

我的模式不会捕获`if`带有多行表达式的语句。为了适应这些边缘情况，请添加`s`模式修饰符以允许`.`匹配换行符。*

# r - R：ggplot2中的密度图与密度图

> ID：12111793
> 
> 赞同：4
> 
> 时间：2012-08-24T14:54:15.987
> 
> 标签：r, ggplot2

我正在尝试在 R 中做一些密度图。我最初使用密度图，但我更改为 ggplot2 中的密度图，因为我在视觉上更喜欢 ggplot2。

所以我使用密度图函数做了一个密度图，并在 ggplot2 中做了一个密度图（见下文），但我发现这些图并不相同。看起来 ggplot2（右图）中的一些 y 值已丢失或丢失。这有什么特别的原因吗？如何使 ggplot 与命运图（左图）相同。

![在此处输入图像描述](../Images/95b6531809fce8600dea4beace77a3bd.png)

代码：

```
library(ggplot2)
library(grid)
par(mfrow=c(1,2))

# deﬁne function to create multi-plot setup (nrow, ncol)
vp.setup <- function(x,y){
 grid.newpage()
 pushViewport(viewport(layout = grid.layout(x,y)))
}

# deﬁne function to easily access layout (row, col)
vp.layout <- function(x,y){
  viewport(layout.pos.row=x, layout.pos.col=y)
}

vp.setup(1,2)

dat <- read.table(textConnection("
low high
10611.0 14195.0
10759.0 14437.0
10807.0 14574.0
10714.0 14380.0
10768.0 14448.0
10601.0 14239.0
10579.0 14218.0
10806.0 14510.0
"), header=TRUE, sep="\t")

plot(density(dat$low))

dat.low = data.frame(low2 = c(dat$low), lines = rep(c("low")))

low_plot_gg = (ggplot(dat.low, aes(x = low2, fill = lines)) +
 stat_density(aes(y = ..density..)) + 
 coord_cartesian(xlim = c(10300, 11000)) 
)
print(low_plot_gg, vp=vp.layout(1,2)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T15:09:50.610

基于一些试验和错误，它看起来像你想要的

```
 + xlim(c(10300,11000)) 
```

而不是

```
 + coord_cartesian(xlim = c(10300, 11000)) 
```

`coord_cartesian`扩展了绘图的范围，但根本不改变绘图内部的内容......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:13:14.320

这不是失去价值的问题。该函数`plot(density())`继续对极值进行平滑处理，但对于您的小数据集来说它不是很准确。对于更大的数据集，这两个图将是相同的。

# c# - 如何在 C# 中从 Windows 窗体执行异步命令行进程？

> ID：12111795
> 
> 赞同：1
> 
> 时间：2012-08-24T14:54:25.530
> 
> 标签：c#, winforms, asynchronous, console-application

我有一个 Windows 窗体应用程序，它当前在控制台应用程序中执行 NANT 以运行我们的软件构建过程。我正在寻找一个关于如何异步执行控制台进程（使用命令行）的示例。我在 CodeProject 网站上找到了一个关于异步设计模式的示例项目，但它没有提到任何关于控制台应用程序的内容，除非我不理解它们显示的概念。

我有一个类，它有一个名为 run 的方法，它通过脱壳执行控制台命令（NANT.EXE）。

```
ProcessStartInfo si = new ProcessStartInfo();
si.Arguments = CreateNAntCommandLine();
si.FileName = m_Settings.NAntExe;
si.WorkingDirectory = m_Settings.CurDir;
Process proc = new Process();
proc.StartInfo = si;
bool bProcStarted = proc.Start(); 
```

吉姆

# ruby-on-rails - RoR MongoDB Arrayfield 使用

> ID：12111802
> 
> 赞同：0
> 
> 时间：2012-08-24T14:54:58.777
> 
> 标签：ruby-on-rails, arrays, mongodb

我是 MongoDB 新手，不确定如何使用 Array-Field-Type。

所以我在我的模型中创建

```
field :admins, type: Array 
```

在这个字段中，我想存储所有作为模型“管理员”的 user_id。但是当我尝试设置此字段时，它不会将信息保存在数组中，它只是简单地创建一个带有 ID 的字符串。并且由于我的限制，只有管理员可以编辑我的过滤器功能

```
def check_if_admin
  unless Agency.find(params[:id]).admins.include?(current_agent.id)
    flash[:notice] = "Only possible as Admin."
    redirect_to root_path
  end
end 
```

得到错误

```
"can't convert Moped::BSON::ObjectId into String" 
```

因此，我尝试在 create def 中将我的字段作为具有 ID 的数组启动：

```
@agency.admins = [current_agent.id] 
```

这对数组中的一个用户有用，但是如何将 ID 添加到该字段？

当我进入我的编辑表单时：

```
<%= form_for(@agency) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :admins %><br />
    <%= f.text_field :admins %>  <br />
  </div>          
  <div class="field">
    <%= f.label :agents %><br />
    <%= f.text_field :agents %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

并手动输入另一个 User_ID，我又回到了我的错误。任何人都知道如何解决这个问题？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:53:59.693

此消息意味着您在某些时候存储了一个字符串，该字符串应该有一个 ObjectId。Ruby 正在尝试将 current_agent.id（一个 ObjectId）与 params[:id]（一个字符串）进行比较。

在将输入推送到数组之前，您似乎没有将表单中 text_field 的输入转换为 ObjectID。

从 admins 字段中获取输入并使 ObjectId 如下所示：

```
BSON::ObjectId.new(string_representing_admin_id) 
```

我猜 admins 字段是一个逗号分隔的 admin _id 数组，并且您正在使用一些易于使用的 _id 值，例如用户名而不是生成的 ObjectId，因为使用起来会非常麻烦。

在这种情况下，您可能会拆分并剥离输入，然后使用 map/select 创建一个 ObjectIds 数组。

在rails中使用显示用户名的选择字段会容易得多，对吧？

无论如何，如果您需要更多帮助，请显示集合中的一些示例文档。

# image - FDPF：图像对于页面来说太大了

> ID：12111805
> 
> 赞同：2
> 
> 时间：2012-08-24T14:55:02.173
> 
> 标签：image, fpdf

我正在使用 FPDF 创建充满图像的 PDF。其中一些图像对于一个页面来说太长了，我需要它传播到下一页。将其缩放到默认页面高度是行不通的。我要归档的是在某个位置自动插入分页符。我可以将图像分成几部分并将每个部分插入新页面，但我非常不想这样做。有没有一种方法我还没有发现 FPDF 可以为我做到这一点？

```
$pdf = new FPDF("P", "mm", "A4");
$pdf->SetAutoPageBreak(true); 
$pdf->SetDisplayMode('real');
$pdf->Image($picUrl, 12, $pdf->GetY(), 185);
$pdf->Output($project->getName().".pdf", "D"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:45:00.757

为什么您不希望将图像分成几部分并在新页面上插入每个部分？这似乎是合乎逻辑的方式（如果你有适当的库，它可以在 PHP 中自动化）。

您可以做的是一遍又一遍地插入相同的图像，具有不同的偏移量。然后你会在视觉上得到相同的结果，但我不知道 FPDF 是否足够聪明，不会多次存储图像。

# javascript - 在 el.appendChild(document.createTextNode()) 上转换的 HTML 字符

> ID：12111806
> 
> 赞同：0
> 
> 时间：2012-08-24T14:55:03.147
> 
> 标签：javascript, jquery, html, css, dom

我有一个动态 CSS 加载器，例如：

```
function(css,onlyIE){
    var el = document.createElement('style');
    el.type = 'text/css';
    el.media= 'screen';
    if((typeof onlyIE != "undefined" && onlyIE && el.styleSheet) || typeof onlyIE == "undefined" || !onlyIE){
    // Mode IE http://stackoverflow.com/questions/4758524/trying-to-append-css-to-the-head-of-a-html-page-using-javascript
        if (el.styleSheet){
            el.styleSheet.cssText= css;
        }else{ // Mode standard
            el.appendChild(document.createTextNode(css));
        }
        document.getElementsByTagName('head')[0].appendChild(el);
    }
} 
```

当我有一个包含`>`它的 CSS 被翻译成`& gt;`.

例如：

```
body > div{
   color: red;
} 
```

你有什么办法可以避免这个问题吗？

我使用的浏览器是FF 12。

# visual-studio-2010 - 要设置什么 qmake 变量，以禁用 Visual Studio 2010 的警告 LNK4075

> ID：12111809
> 
> 赞同：0
> 
> 时间：2012-08-24T14:55:14.247
> 
> 标签：visual-studio-2010, qmake

我们的 windows 构建会生成数百个这种形式的警告：

```
LINK : warning LNK4075: ignoring '/INCREMENTAL' due to '/FORCE' specification 
```

我想至少暂时禁用此警告，以便更容易发现和解决其他警告。

我看过[Visual C++: How to disable specific linker warnings?](https://stackoverflow.com/q/661606/104370) 这表明我应该能够设置`/ignore:4075`，但不确定我应该将它添加到哪个 qmake 变量？

我查看了[qmake Variable Reference](http://doc.qt.nokia.com/4.7-snapshot/qmake-variable-reference.html#qmake-lflags)中的变量，并且有很多与 LFLAGS 相关的选项，并且没有大量的试验和错误，我不确定该使用哪个。

那么，我应该用什么值调整什么 qmake 变量来关闭`LNK4075`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:48:10.540

您使用哪种 LFLAGS 取决于您正在构建的内容。

*   Windows 控制台（无 GUI）应用程序 => QMAKE_LFLAGS_CONSOLE
*   Windows 控制台（无 GUI）DLL => QMAKE_LFLAGS_CONSOLE_DLL
*   Windows GUI 应用程序 => QMAKE_LFLAGS_WINDOWS
*   Windows GUI DLL => QMAKE_LFLAGS_WINDOWS_DLL

要使用它们，只需将您需要的标志添加到适当的标志。

```
QMAKE_LFLAGS_xyzzy += /ignore:4075 
```

如果您真的有疑问，请将其添加到所有问题中。

# java - 为什么使用 ScrolledComposite SWT 时放置在 TabItem 上的小部件不可见？

> ID：12111812
> 
> 赞同：0
> 
> 时间：2012-08-24T14:55:20.447
> 
> 标签：java, swt, scrollbar

这是我的代码，它实际上为域完成了所有 GUI 工作（右侧包含在所附图片中）。在这个函数中，我正在做的是在“newTabFolder”上创建一个复合“测试”。然后我正在创建 ScrolledComposite “sc”，然后在其上创建一个复合“compositeInTab”，在将所有小部件放在“compositeInTab”上之后，我正在创建一个 TabItem 用于在其上放置复合“测试”。

```
public DomainUI(Composite composite, TabFolder newTabFolder, boolean comingFromSelf)
{
    Composite test = new Composite(newTabFolder,SWT.NONE);
    test.setLayout(new FillLayout());
    ScrolledComposite sc = new ScrolledComposite(test, SWT.V_SCROLL|SWT.H_SCROLL);
    final Composite compositeInTab = new Composite(sc, SWT.NONE);
    sc.setExpandHorizontal(true); 
    sc.setExpandVertical(true);
    sc.setMinHeight(compositeInTab.computeSize(SWT.DEFAULT, SWT.DEFAULT).y);
    sc.setMinWidth(compositeInTab.computeSize(SWT.DEFAULT, SWT.DEFAULT).x);
    sc.setContent(compositeInTab);
    compositeInTab.setLayout(null);
    sc.setAlwaysShowScrollBars(true);

    /*HERE I AM CREATING LABELS AND TEXT FIELDS AND SETTING THEIR BOUNDS*/
    systemCodeLabel = new Label(compositeInTab, 0);
    systemCodeText = new Text(compositeInTab, SWT.BORDER);
    systemCodeLabel.setText("System Code");
    systemCodeLabel.setBounds(350, 60, 100, 15);
    systemCodeText.setBounds(480, 60, 150, 17);
    // CREATION OF LABELS AND TEXTFIELDS ENDED

    // CREATION OF TABLE STARTS
    myTable = new CreateTable(compositeInTab, 1);
    myTable.setBounds(50, 230, 0, 0);
    myTable.table.setSize(myTable.table.computeSize(570, 250));

    //here i filled data in table

    for(int i=0; i<myTable.table.getColumnCount(); i++)
    {
        myTable.table.getColumn(i).pack();
     myTable.table.getColumn(i).setWidth(myTable.table.getColumn(i).getWidth()+10);
    }

    TabItem tabItem1 = new TabItem(newTabFolder, SWT.NONE);
    tabItem1.setText("Domain");
    tabItem1.setControl(test);
    newTabFolder.setBounds(0, 0, 480, 300);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:24:35.190

这似乎是布局的问题。我摆弄了一下，设法让它工作：

```
public static void main(String[] args)
{
    Display display = Display.getDefault();
    Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    ScrolledComposite scrollComp = new ScrolledComposite(shell, SWT.V_SCROLL | SWT.H_SCROLL);
    Composite innerComp = new Composite(scrollComp, SWT.NONE);
    innerComp.setLayout(new GridLayout(4, true));

    for(int i = 0; i < 32; i++)
        new Button(innerComp, SWT.PUSH).setText("Button");

    scrollComp.setMinHeight(innerComp.computeSize(SWT.DEFAULT, SWT.DEFAULT).y);
    scrollComp.setMinWidth(innerComp.computeSize(SWT.DEFAULT, SWT.DEFAULT).x);
    scrollComp.setContent(innerComp);
    scrollComp.setExpandHorizontal(true);
    scrollComp.setExpandVertical(true);
    scrollComp.setAlwaysShowScrollBars(true);

    shell.pack();
    shell.open();

    shell.setSize(200, 200);

    while(!shell.isDisposed())
    {
        if(!display.readAndDispatch())
            display.sleep();
    }
} 
```

它将显示滚动条。但是，如果我将 shell 的布局更改为 a `GridLayout`，它将不起作用。也许您的布局“组合”似乎是问题所在......

# sql - 动态查找列名的函数

> ID：12111813
> 
> 赞同：2
> 
> 时间：2012-08-24T14:55:23.923
> 
> 标签：sql, postgresql, plpgsql, dynamic-sql

在下面提供的函数`find_value_in_table()`中，我试图找到任何列的名称，这些列的记录中的列值与字符串“255.255.255.255”匹配。

简而言之，是这样的：

```
SELECT column_name
  FROM dynamic_table
  WHERE column_value = '255.255.255.255'; 
```

笔记：

*   表的名称作为参数传递给函数，因此“dynamic_table”
*   我正在尝试确定列的名称，而不是数据值。

这是第一步。稍后我还将参数化 column_value。我知道有一个表在`"255.255.255.255"`某处存储该值，并且想通过查找存储该值的表和列名来证明该函数的功能。

这一切的目的是：我有大数据库，我是逆向工程。我知道它在某处包含应用程序的一些配置参数。在当前配置中，我知道其中一些参数的精确值（在应用程序配置 GUI 中可以看到：例如计算机名称、IP 地址）。我想浏览整个数据库以确定哪些表存储此配置信息。

我一直在构建`find_value()`返回这些线索的函数。

如何才能做到这一点？

```
create or replace function find_all_columns(tablename in text) 
    return setof record as
$func$
    declare r record;
    begin 
        return select   a.attname as "Column",
            pg_catalog.format_type(a.atttypid, a.atttypmod) as "Datatype"
            from
            pg_catalog.pg_attribute a
            where
            a.attnum > 0
            and not a.attisdropped
            and a.attrelid = (  select c.oid from pg_catalog.pg_class c left join pg_catalog.pg_namespace n on n.oid = c.relnamespace where c.relname ~ '^('  ||   quote_ident(tablename)    ||   ')$' and pg_catalog.pg_table_is_visible(c.oid);
        end loop;
    end;
$func$ language 'plpgsql';  

create or replace function find_value_in_table(tablename text) 
    returns setof record as 
$func$
    declare r record;
        return select 
    begin 

        for r in (select find_all_columns(tablename)) loop
            return select * from tablename t where t... = "255.255.255.255" /*  here column would be the value in the record: r.Column*/ 
        end loop;
    end;
$func$ language 'plpgsql';

create or replace function find_tables_name(_username text)
  returns setof record as
$func$
declare
   tbl text;
begin
   for tbl in 
      select t.tablename from pg_tables t
      where  t.tableowner = _username and t.schemaname = 'public'
   loop
      return quote_ident(tbl);
   end loop;
end;
$func$ language 'plpgsql';

create or replace function find_value(_username text, valuetofind text) 
    returns setof record as 
$func$
    declare r record;
    begin 
        for r in (select find_tables_name(_username)) loop
            return find_value_in_table( r.tablename );
        end loop;
    end;
$func$ language 'plpgsql'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T04:41:41.563

实现此目的的一种原始方法是进行纯文本转储并使用您选择的编辑器（在我的情况下为 vim）来搜索字符串。

但是这个功能做得更好。:)

```
CREATE OR REPLACE FUNCTION find_columns(_owner text
                                       ,_valuetofind text
                                       ,_part bool = FALSE)
  RETURNS TABLE (tbl text, col text, typ text) LANGUAGE plpgsql STRICT AS
$func$
DECLARE
   _go         bool;
   _search_row text := '%' || _search || '%';  -- Search row for part of string
BEGIN
   IF _part THEN   -- search col for part of string?
      valuetofind := '%' || valuetofind || '%';
   END IF;

FOR tbl IN 
   SELECT quote_ident(t.schemaname) || '.' || quote_ident(t.tablename)
   FROM pg_tables t
   WHERE  t.tableowner = _owner
-- AND t.schemaname = 'public' -- uncomment to only search one schema
LOOP
   EXECUTE '
   SELECT EXISTS (
      SELECT 1 FROM ' || tbl || ' t WHERE t::text ~~ $1)' -- check whole row
   INTO  _go
   USING _search_row;

   IF _go THEN
      FOR col, typ IN 
         SELECT quote_ident(a.attname) -- AS col
               ,pg_catalog.format_type(a.atttypid, a.atttypmod) -- AS typ
         FROM   pg_catalog.pg_attribute a
         WHERE  a.attnum > 0
         AND    NOT a.attisdropped
         AND    a.attrelid = tbl::regclass
      LOOP
         EXECUTE '
         SELECT EXISTS (
            SELECT 1
            FROM ' || tbl || ' WHERE ' || col || '::text ~~ $1)' -- check col
         INTO   _go
         USING  valuetofind;

         IF _go THEN
            RETURN NEXT;
         END IF;
      END LOOP;
   END IF;

END LOOP;
END;
$func$;
COMMENT ON FUNCTION x.find_columns(text, text, boolean) IS 'Search all tables
 owned by "_owner" user for a value "_search" (text representation).
 Match full or partial (_part)'; 
```

称呼：

```
SELECT * FROM find_columns('postgres', '255.255.255.255');
SELECT * FROM find_columns('fadmin', '255.255.255.255', TRUE); 
```

回报：

```
 tbl       |     col     | typ
-----------------+-------------+------
 event.eventkat  | eventkat    | text
 public.foo      | description | text
 public.bar      | filter      | text 
```

用 PostgreSQL 9.1 测试

### 要点

*   该功能是一站式商店。

*   我构建了一个选项来搜索部分值 ( `_part`)。默认是搜索整列。

*   我对整行进行了快速测试，以消除根本没有表格的表格`valuetofind`。为此，我使用 PostgreSQL 将整行快速转换为文本的能力。这应该使函数*更快*- 除非所有或几乎所有表都符合条件或表只有一列。

*   我将返回类型定义为并立即分配隐式定义的`RETURNS TABLE (tbl text, col text, typ text)`变量。因此，我不需要额外的变量，并且可以在列符合条件时立即进行。`tbl``col``typ``RETURN NEXT`

*   好好利用`EXISTS`这里！这是最快的选择，因为您只对列是否具有值*感兴趣*。

*   使用`LIKE`（或`~~`简称）代替正则表达式。更简单，更快。

*   我`quote_ident()`立即所有标识符。

*   [`EXECUTE *command* INTO USING`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)是工具性的。

# javascript - 用于移动设备的 html/javascript 编程中的变量传输

> ID：12111814
> 
> 赞同：1
> 
> 时间：2012-08-24T14:55:26.947
> 
> 标签：javascript, jquery, mobile, jquery-mobile

在传统的 Web 客户端编程中，有 cookie 和 session 来传递变量。

我想知道在移动设备的 html/javascript 编程中是否相同或使用 javascript 全局实例传输变量。

欢迎任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:59:00.553

是的，您可以使用全局 JavaScript 变量，或者还有 HTML5 localStorage/sessionStorage/IndexedDB/WebSQL，这是新的，但通常在智能手机浏览器上受支持。

# jaxb - 使用 XmlIDRef 引用抽象类

> ID：12111815
> 
> 赞同：1
> 
> 时间：2012-08-24T14:55:27.070
> 
> 标签：jaxb, eclipselink, moxy

首先是一个小例子。类 ReferencingEntity 持有对抽象类 AbstractEntity 的引用。这个类有两种实现：

```
@XmlRootElement
public abstract class AbstractEntity {

    @XmlID
    private String id;
}

@XmlRootElement
public class EntityImpl1 extends AbstractEntity {

}

@XmlRootElement
public class EntityImpl2 extends AbstractEntity {

}

@XmlRootElement
public class ReferencingEntity {

    @XmlIDREF
    private AbstractEntity entity;
} 
```

编组引用实体的实例没有问题（除了具体类型不存在于 xml 中），但是当尝试解组 xml 表示时，缺少描述符以确定具体实现。

目前我正在使用 XmlAdapter 将所有非 id 字段设置为 null，但如果可能，最好使用 @XmlID。有任何想法吗？

更新：我在 JBoss 6.1.0.Final 中使用 RESTEasy，提供者创建的上下文如下：

```
ContextResolver<JAXBContextFinder> resolver = providers.getContextResolver(JAXBContextFinder.class, mediaType);
JAXBContextFinder finder = resolver.getContext(type);
if (finder == null)
{
   if (reader) throw new JAXBUnmarshalException("Could not find JAXBContextFinder for media type: " + mediaType);
   else throw new JAXBMarshalException("Could not find JAXBContextFinder for media type: " + mediaType);
}
JAXBContext context = finder.findCachedContext(type, mediaType, annotations); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:37:52.217

以下是我对您的问题的初步回答。我想它会随着我更好地了解您的用例而发展。

**关于`@XmlID`/`@XmlIDREF`**

从带有注释的字段/属性引用的每个实例`@XmlIDREF`也需要通过包含引用。我将在这个例子中使用下面的类。

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Root {

    private AbstractEntity abstractEntity;
    private ReferencingEntity referencingEntity;

    public AbstractEntity getAbstractEntity() {
        return abstractEntity;
    }

    public void setAbstractEntity(AbstractEntity abstractEntity) {
        this.abstractEntity = abstractEntity;
    }

    public ReferencingEntity getReferencingEntity() {
        return referencingEntity;
    }

    public void setReferencingEntity(ReferencingEntity referencingEntity) {
        this.referencingEntity = referencingEntity;
    }

} 
```

**关于继承**

JAXB (JSR-222) 实现不能自动发现子类，因此您需要确保`JAXBContext`知道它们。实现此目的的一种方法是使用`@XmlSeeAlso`父类上的注释指向子类。

```
import javax.xml.bind.annotation.*;

@XmlSeeAlso({EntityImpl1.class, EntityImpl2.class})
@XmlAccessorType(XmlAccessType.FIELD)
public abstract class AbstractEntity {

    @XmlID
    private String id;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

} 
```

**演示代码**

**演示**

```
package forum12111815;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum12111815/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        System.out.println(root.getAbstractEntity().getClass());
        System.out.println(root.getAbstractEntity() == root.getReferencingEntity().getEntity());

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

***输入.xml***

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <abstractEntity xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="entityImpl2">
      <id>123</id>
   </abstractEntity>
   <referencingEntity>
      <entity>123</entity>
   </referencingEntity>
</root> 
```

***输出***

```
class forum12111815.EntityImpl2
true
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <abstractEntity xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="entityImpl2">
      <id>123</id>
   </abstractEntity>
   <referencingEntity>
      <entity>123</entity>
   </referencingEntity>
</root> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html](http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html)
*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html)

# python - Python：派生类访问同一内存位置中基类的字典

> ID：12111816
> 
> 赞同：5
> 
> 时间：2012-08-24T14:55:29.350
> 
> 标签：python, inheritance, dictionary

我想知道为什么在基类中定义并从派生类访问的字典显然只存在于一个内存位置。一个简短的例子：

```
class BaseClass:
    _testdict = dict()
    _testint = 0

    def add_dict_entry(self):
        self._testdict["first"] = 1

    def increment(self):
        self._testint += 1

class Class1(BaseClass):
    pass

class Class2(BaseClass):
    pass

object1 = Class1()
object2 = Class2()

object1.add_dict_entry()
object1.increment()
print(object2._testdict)
print(object2._testint) 
```

输出是：

```
{'first': 1}
0 
```

为什么调用object1的“add_dict_entry”会影响object2的字典？使用整数（“增量”），基类变量不受影响。

非常感谢。

洛伦兹

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T14:57:07.837

这是因为`_testdict`是一个类变量：它只被定义一次，当类最初被构造时。如果您希望它为每个实例分开，请将其设为实例变量：

```
class BaseClass:
    _testint = 0

    def __init__(self):
        self._testdict = dict()

    def add_dict_entry(self):
        self._testdict["first"] = 1 
```

（请注意，您还需要为and创建`__init__`方法，这两者都必须调用）。`Class1``Class2``BaseClass.__init__(self)`

`_testint`行为不同，因为您正在对其执行重新绑定操作而不是变异操作。ints 是不可变的，所以你不能“改变” one-`self._testint += 1`只是`self._testint = self._testint + 1`. `self._testdict`同样，您可以对不会在实例之间共享的对象执行重新绑定操作，例如，`self._testdict = {}`将*仅*重置该实例的`_testdict`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T15:04:44.267

在 python 中，int 是不可变的，因此 += 操作会将类变量反弹为实例变量。另一方面，字典索引会在原地改变字典。一个更具可比性的例子是

```
def add_dict_entry(self):
    # create a new dict
    tmp = dict(self._testdict)
    tmp["first"] = 1

    # shadow the class variable with an instance variables
    self._testdict = tmp 
```

# php - ZendFramework 上的 403 错误

> ID：12111823
> 
> 赞同：0
> 
> 时间：2012-08-24T14:55:56.340
> 
> 标签：php, zend-framework

我尝试在 Zend Framework 1.11 上做我的第一个项目，并且我使用 XAMPP 作为我的 localhost，当我尝试在 localhost/ZF/public/index.php 上运行我的“index.php”文件时，我得到与下图：禁止访问！

```
You don't have permission to access the requested object. It is either read-protected or not readable by the server.

If you think this is a server error, please contact the webmaster.

Error 403

localhost
08/24/12 19:13:35
Apache/2.2.9 (Win32) DAV/2 mod_ssl/2.2.9 OpenSSL/0.9.8i mod_autoindex_color PHP/5.2.6 
```

出了什么问题，我该如何解决？我设置的 .htaccess 文件与 zend 框架用户指南参考相同，但存在错误！

# ssl - EC2 负载均衡器 - 安装 CA Bundle SSL / 中间证书

> ID：12111829
> 
> 赞同：4
> 
> 时间：2012-08-24T14:56:30.210
> 
> 标签：ssl, amazon-ec2, load-balancing

我正在使用 EC2 负载均衡器来处理 HTTPS 请求。对于 Chrome 和 Safari，让负载均衡器协议在端口 443 设置 HTTPs 并使用 SSL 证书正确处理大多数流量。来自 Safari 和 Chrome 的 HTTPS 请求很好。但是在 Firefox 中，我得到连接不安全“（错误代码：sec_error_unknown_issuer）。” 在与证书检查员核对时，我得到

> 该证书未由受信任的机构签署（检查 Mozilla 的根存储）。如果您从受信任的机构购买证书，您可能只需要安装一个或多个中间证书。

在与我的证书提供者交谈时，我得到的信息是：

> 正如我们所见，证书在服务器上安装不正确。服务器上没有 CA 包，这就是浏览器可能显示警告消息的原因。

如何使用负载均衡器安装 CA Bundle？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T15:42:39.420

解决方案是将 ca_bundle 添加到“证书链”下的 load_balancer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:03:20.327

这取决于您如何创建 ELB（弹性负载均衡器）。

如果您是从 AWS 控制台创建它，那么，当您创建 ELB 时，您可以创建一个新的 SSL 服务，并且在提示时，正如@Emile 所说，您必须在“证书链”字段。

如果您从命令行或使用 API 创建它，那么当您创建 SSL 证书时，您必须在“Certificate Chain”参数中指定“CA Bundle”内容。

现在，您可能需要做的是创建一个新的 ELB，指定正确的参数，相应地修改您的 DNS，一旦应用更改，删除旧的负载均衡器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-15T03:46:09.147

首先，您需要从您的证书颁发机构获取相应证书包的副本。

然后，您需要更新AWS ELB 上[的 SSL 证书。](https://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/elb-update-ssl-cert.html)从 ELB 选择证书窗口中选择“上传新的 SSL 证书”。将您当前的私有和公共证书密钥粘贴到适当的字段中，然后将证书包粘贴到“证书链”字段中。

# javascript - 选择另一个选项时如何在选择中显示/隐藏选项

> ID：12111830
> 
> 赞同：4
> 
> 时间：2012-08-24T14:56:30.953
> 
> 标签：javascript, jquery

我正在尝试为流行的游戏 Mount & Blade 制作一个非官方的角色创建测试器。理论上，脚本应该根据所选择的选项确定角色的统计数据，就像它在游戏中所做的那样。

当我在选择框中选择男性/女性时，指定的字段都不会消失。我做错了什么？

当统计信息发生更改时，我想以表格形式自动显示它们，这是否需要我为每个 td 提供一个 id 或者我可以以某种方式引用哪个单元格，例如左侧两个单元格中的第三个单元格是 table1(3 ,2）还是太难/不可能？

这是Javascript：

```
//Base Stats - 
var sGender; // Male or Female
var iAgi = 6;
var iStr = 5;
var iInt = 5;
var iCha = 5;

$("#selGender").change(function() {
var mnf = $(this).val();
sGender = parseInt(mnf);
if (sGender = 1){
    //Show/hide options
    $('#fnomad').hide();
    $('#fnoble').hide();
    $('#fsquire').hide();
    $('#mnomad').show();
    $('#mnoble').show();
    $('#msquire').show();
iAgi++;
iInt++;
this.disabled=true;
} else{
    $('#mnomad').hide();
    $('#mnoble').hide();
    $('#msquire').hide();
    $('#fnomad').show();
    $('#fnoble').show();
    $('#fsquire').show();
iStr++;
iCha++;
    this.disabled=true;
    }
} 
```

这是HTML

```
 <legend>Choose your background:</legend>
     <label>Gender</label>
     <select id="selGender"> 
      <option value="1" >Male</option>
      <option value="2">Female</option>
     </select>
     <label>Your father was ...</label>
     <select id="selFather">
     <option id="fnoble" value="fnoble">a Noble</option>
     <option id="mnoble" value="mnoble">a Noble</option>
     <option value="merchant">a Merchant</option>
     <option value="vetwarrior">a Veteran Warrior</option>
     <option value="thief">a Thief</option>
     <option id="fnomad" value="fnomad">a Nomad</option>
     <option id="mnomad" value="mnomad">a Nomad</option>
     </select> 
```

编辑：另外，我确保我已经链接到标题中的 jQuery 文件。

```
 <script type="text/javascript" src="jquery.min.js"></script> 
```

EDIT2：这是 mSquire 和 fSquire 所在的部分：

```
 <label>When you grew to a young adult, you became a ...</label>
     <select id="selAdult">
     <option id="msquire" value="msquire">a Squire</option>
     <option id="fsquire" value="fsquire">a Lady in waiting</option>
     <option value="troubadour">Troubadour</option>
     <option value="student">Student</option>
     <option value="peddle">Peddler</option>
     <option value="poacher">Poacher</option>
     </select> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T15:25:17.523

见[http://jsfiddle.net/KvNVN/](http://jsfiddle.net/KvNVN/)

您可以向它们添加类，而不是显示/隐藏每个元素：

```
<select id="selFather">
    <option id="fnoble" value="fnoble" class="f">a Noble (f)</option>
    <option id="mnoble" value="mnoble" class="m">a Noble (m)</option>
    <option value="merchant">a Merchant</option>
    <option value="vetwarrior">a Veteran Warrior</option>
    <option value="thief">a Thief</option>
    <option id="fnomad" value="fnomad" class="f">a Nomad (f)</option>
    <option id="mnomad" value="mnomad" class="m">a Nomad (m)</option>
</select> 
```

进而

```
$('.f').hide();
$('.m').show(); 
```

您还可以使用以下命令创建 CSS 样式表：`.f{display:none} .m{display:block;}`

您的代码有问题：如果您有...

```
<select id="selGender">
    <option value="1" >Male</option>
    <option value="2">Female</option>
</select> 
```

...默认选择的值为“男性”，因此如果您选择它，它不会触发 onchange 事件。您可以使用

```
<select id="selGender">
    <option selected="selected" disabled="disabled">Select gender:</option>
    <option value="1" >Male</option>
    <option value="2">Female</option>
</select> 
```

此外，你有

```
if (sGender = 1) 
```

你应该使用

```
if (sGender == 1) 
```

因为您是在比较，而不是设置值。

关于您的其他问题（浏览表格），您可以创建一个 JavaScript 函数来执行此操作。但我不太明白你想要“从左边两个单元格开始的第三个单元格”。

**编辑：**

如果我理解得很好，你有一张像

```
<table id="table">
 <tbody>
   <tr>
     <td>Skill 1</td>
     <td>Skill 2</td>
     <td>Skill 3</td>
   </tr>
   <tr>
     <td>Value 1</td>
     <td>Value 2</td>
     <td>Value 3</td>
   </tr>
 </tbody>
</table> 
```

![桌子](../Images/e62d147c8ce8b16c4c53e2bb05bb0ffe.png)

而你想要

```
table(1,1)=Skill 1 cell
table(1,2)=Value 1 cell

table(2,1)=Skill 2 cell
table(2,2)=Value 2 cell

... 
```

然后，

```
function table(col,row){
   return document.getElementById('table').tBodies[0].getElementsByTagName('tr')[row-1].getElementsByTagName('td')[col-1];
} 
```

在这里看到它：http: [//jsfiddle.net/UGHHd/](http://jsfiddle.net/UGHHd/)

# html - 是否有必要在中转义单引号和双引号 html中的标签？

> ID：12111843
> 
> 赞同：-1
> 
> 时间：2012-08-24T14:57:05.893
> 
> 标签：html, wysiwyg, rich-text-editor

我刚刚安装了这个 WYSIWYG 文本编辑器，我发现`<p></p>`当我查看 html 源代码时，它不会转义标签中的单引号和双引号。

演示： http: [//files.wymeditor.org/wymeditor/examples/01-basic.html](http://files.wymeditor.org/wymeditor/examples/01-basic.html)

自己试试吧。

我想知道是否有一些文件可以澄清这个问题。有必要吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T15:00:14.780

`"`字符只需要在用实体分隔的属性值中使用时用实体表示`"`

`'`字符只需要在用实体分隔的属性值中使用时用实体表示`'`

它们可以用作文本节点内的文字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:59:51.720

`body`在文本节点上下文中（即在、和其他此类内容元素中）时`p`，无需转义引号。`div`

引号仅在属性值中需要转义，并且属性值由同种引号分隔。

# php - 如何在 httpd.conf 中设置 PHP 文档根目录

> ID：12111844
> 
> 赞同：0
> 
> 时间：2012-08-24T14:57:06.310
> 
> 标签：php, xampp, apache

我在子目录中有一个站点，例如`root/sites/testsite/`，我希望 php 变量`$_SERVER['DOCUMENT_ROOT']`为`root/sites/testsite/`而不是`root`，我将如何做到这一点，因为我在共享主机上？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:15:31.753

`$_SERVER['DOCUMENT_ROOT']`自动设置为`DocumentRoot`Apache`VirtualHost`配置条目中的配置。`/`这将是您域上的 URL 指向的目录。

您将需要更改代码以使用不同的变量来计算基目录，例如硬编码在配置文件中的变量。您还可以`SetEnv`在文件中使用 Apache 指令`.htaccess`来传递变量 - 例如`SetEnv BaseDir root/sites/testsite/`，将导致`$_SERVER['BaseDir']`被设置为字符串`"root/sites/testsite/"`。

或者，您可以在脚本开头为变量分配一个新值，以“欺骗”其值（例如，如果使用依赖于该变量的第 3 方代码）。

# c# - 在 Java 应用程序中使用 WPF 库时出现线程问题？

> ID：12111846
> 
> 赞同：0
> 
> 时间：2012-08-24T14:57:09.133
> 
> 标签：c#, java, wpf, thread-safety, jni4net

我一直在尝试将现有的 C# WPF API 与 Java 应用程序连接起来。

到目前为止，我已经成功地使用[jni4net](http://jni4net.sourceforge.net/)生成代理来连接 Java 和 .NET 代码。

此集成在显示 WPF UI 时产生了 STA 线程问题：

```
System.InvalidOperationException: The calling thread must be STA, because many UI components require this.
  at System.Windows.Input.InputManager..ctor()
  at System.Windows.Input.InputManager.GetCurrentInputManagerImpl()
  at System.Windows.Input.KeyboardNavigation..ctor()
  at System.Windows.FrameworkElement.FrameworkServices..ctor()
  at System.Windows.FrameworkElement.EnsureFrameworkServices()
  at System.Windows.FrameworkElement..ctor()
  at System.Windows.Controls.Control..ctor()
  at System.Windows.Window..ctor() 
```

这是通过使用以下模式来克服使用 ShowDialog 加载 WPF UI 的：

```
Thread thread = new Thread(new ParameterizedThreadStart(ParameterizedMethodName));
thread.SetApartmentState(ApartmentState.STA);
thread.Start(parameter);
thread.Join(); 
```

但是，现在，我在使用 WPF UI 时遇到类似于以下的异常，鼠标单击或按键可以触发以下情况（此示例来自鼠标单击）：

```
System.InvalidOperationException: The calling thread cannot access this object because a different thread owns it.
  at System.Windows.Threading.Dispatcher.VerifyAccess()
  at System.Windows.DependencyObject.GetValue(DependencyProperty dp)
  at System.Windows.Input.InputBinding.get_Command()
  at System.Windows.Input.InputBindingCollection.FindMatch(Object targetElement, InputEventArgs inputEventArgs)
  at System.Windows.Input.CommandManager.TranslateInput(IInputElement targetElement, InputEventArgs inputEventArgs)
  at System.Windows.UIElement.OnMouseDownThunk(Object sender, MouseButtonEventArgs e)
  at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
  at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
  at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
  at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
  at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
  at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
  at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
  at System.Windows.Input.InputManager.ProcessStagingArea()
  at System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)
  at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
  at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
  at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
  at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
  at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
  at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
  at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
  at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
  at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
  at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
  at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
  at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
  at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
  at System.Windows.Window.ShowHelper(Object booleanBox)
  at System.Windows.Window.Show()
  at System.Windows.Window.ShowDialog() 
```

我目前不确定如何解决此问题并从堆栈跟踪中确定问题的原因。

非常感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:04:35.440

我不能就解决方案提供太多建议，但我可以告诉你问题所在。您的所有 WPF 代码都**必须**在同一个线程上运行（可能是您正在创建的那个）。您得到的错误是因为某些东西试图从不同的线程访问 WPF 控件。

因此，假设您有一个显示对话框的 API 调用，并且您的 java 代码调用`MyApi.ShowDialog`. 您的 API`ShowDialog`方法不能简单地调用`MyDialog.ShowDialog()`，因为对 UI 组件的调用将来自 java 线程。相反，您的 API 需要足够智能以将这些调用编组到适当的 WPF (UI) 线程。

所以它应该做这样的事情：

```
if(!CheckAccess())
    MyDialog.Dispatcher.BeginInvoke(DeleageToShowDialog); 
```

不幸的是，这可能意味着您将不得不在您的 API 上做很多工作，因为它可能无法解决此类线程问题。

# macos - 迁移到 10.8 后如何在 OS X 10.7 上继续测试？

> ID：12111848
> 
> 赞同：2
> 
> 时间：2012-08-24T14:57:14.753
> 
> 标签：macos, testing, osx-lion, osx-mountain-lion

我想知道当我升级到 10.8 后如何继续在 10.7 上进行测试。

在我看来，显而易见的解决方案是：1）虚拟化 10.7 2）将其安装在单独的分区上 3）将其安装在单独的硬件上。

每个问题的问题是：1）根据许可条款，OS X 10.7 不能在 10.8 下虚拟化。2) 其次，您不能再购买/下载 10.7 以将其安装在单独的分区上。3) 至于 2)。

当您在 10.8 下开发时，人们如何继续在 10.7 上测试您的软件？您刚刚停止在 10.7 上进行测试吗？

谢谢李。

# google-apps-script - 如何隐藏工作表？

> ID：12111853
> 
> 赞同：4
> 
> 时间：2012-08-24T14:57:31.847
> 
> 标签：google-apps-script, google-spreadsheet-api

如何使用 googleScript 在电子表格应用程序中隐藏一些工作表？我有一个包含多张工作表的电子表格，我想使用 googlScript 将电子表格减少到只有第一个可见工作表和所有其他隐藏工作表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:42:43.323

[sheet.hideSheet()](https://developers.google.com/apps-script/reference/spreadsheet/sheet#hideSheet())

它已被添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:10:21.387

我也在寻找同样的答案。据我所知，SpreadsheetApp、Spreadsheet 和 Sheet 类没有任何 Hide/Unhide 方法。但是，我使用以下代码在电子表格中的所有工作表上设置工作表保护，以遍历所有工作表并保护它们，如果支持，同样可以应用于隐藏/取消隐藏。

```
function protectSheets() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var num_sheets = ss.getNumSheets();
for (var i = 0; i < num_sheets; i++){
  SpreadsheetApp.setActiveSheet(ss.getSheets()[i]);
  var sheet = SpreadsheetApp.getActiveSheet();
  var permissions = sheet.getSheetProtection();
  permissions.setProtected(true);
  sheet.setSheetProtection(permissions);
};
} 
```

[![](../Images/27006b329ad142bfd16c27b362b04061.png)google-apps-script ](/questions/tagged/google-apps-script "显示标记为“google-apps-script”的问题") [google-spreadsheet-api ](/questions/tagged/google-spreadsheet-api "显示标记为“google-spreadsheet-api”的问题") [google-spreadsheet](/questions/tagged/google-spreadsheet "显示标记为“谷歌电子表格”的问题")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-24T03:41:34.530

在您使用菜单主页中的按钮访问您想要隐藏的其他页面后，您是否需要隐藏 g.sheet 的页面？如果这是您的问题，您应该使用简单的编码来解决，每页制作一个按钮以返回您的主页，其他页面始终保持隐藏，只是主页面不保留，为此，请使用以下内容：

> function menu() {
> var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
> var pagetohide = 工作表；var menu = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('menu'); SpreadsheetApp.setActiveSheet(菜单); pagetohide.hideSheet();

我希望对你有所帮助，对不起我的英语。

# javascript - jquery 1.8.0 语法错误，无法识别的表达式：>

> ID：12111859
> 
> 赞同：-6
> 
> 时间：2012-08-24T14:57:46.177
> 
> 标签：javascript, jquery, web

我在我的网页中包含了 jquery，并面临 jquery 1.8.0 错误的这个错误：

```
Syntax error, unrecognized expression:  &gt; 
```

谁来帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:02:18.097

我打赌你正在使用一个对 HTML 进行编码的网络框架。当您在 jQuery 中使用“子”选择器时——“ `>`”——您的框架可能会将其转换为“ `&gt;`”。这意味着您的 IDE/编辑器中的代码如下所示：

```
$("#test > div") 
```

但转换为：

```
$("#test &gt; div") 
```

并发送到浏览器。jQuery 库不理解这一点，所以它会爆炸。

这非常依赖于您使用的框架，所以您能告诉我们您使用的是什么吗？

我过去使用过 CherryPy，我知道要解决这个问题，你可以使用这个：

```
<script type="text/javascript">
//<![CDATA[
    // Your code here
//]]>
</script> 
```

因为您的 HTML 页面在技术上应该完全是 XML，所以框架可能会尝试对任何违反该规则的内容进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:38:49.620

我`&('div &gt p')`在我的代码中使用过。这就是问题所在。

# php - PHP mysql我如何使用tinymce插入一个url

> ID：12111860
> 
> 赞同：0
> 
> 时间：2012-08-24T14:57:50.070
> 
> 标签：php, mysql, implode

我在使用 tinymce 时遇到了一个小问题：当我使用插入图片/照片时，因为它会在我上传图片/照片时询问完整的 url。

这是插入 mysql 数据库时的文本：

```
<p>In mei 2012 is de Gijsbrecht aangekleed met mooie Hanging Basquets. Deze bloembakken, die bevestigd zijn aan de lichtmasten, zijn een fleurige aankleding van de straat!&nbsp;</p>
<p>&nbsp;</p>
<p><img src="upload/gijs.jpg" alt="" width="400" height="266" /></p> 
```

现在在图像上`<img src=''>`你只能看到`upload/gijs.jpg`，但我所做的是用完整的 url 插入它。

插入数据库时​​如何将其内爆？

我的插入代码：

```
if ( isset( $_POST['Save'] ) ) {
    $email = $_POST['email'];
    $t_u_c = $_POST['title_up_content'];
    $u_c = $_POST['upcontent'];
    $t_c1 = $_POST['title_col1'];
    $c1 = $_POST['column1'];
    $t_c2 = $_POST['title_col2'];
    $c2 = $_POST['column2'];

    $sql_insert_home = mysql_query( "INSERT INTO jon_homepage VALUE('', '$email', '$t_u_c', '$u_c', '$t_c1', '$c1', '$t_c2', '$c2', NOW() )" ) or die ( mysql_error() );
    echo "<div id='successful'>You've successfully save data.</div>";
} 
```

`$c1 = $_POST['column1'];`这是图片中的文字 我的网站是[http://www.degijsbrecht.nl/gijsbrecht/](http://www.degijsbrecht.nl/gijsbrecht/)

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:08:27.607

如果我正确理解您的问题，TinyMCE 会在您插入图像时将绝对 URL 替换为相对 URL。这与您的 SQL 代码无关。

我认为您需要查看的是[TinyMCE 的配置](http://www.tinymce.com/wiki.php/Configuration)，例如[relative_urls](http://www.tinymce.com/wiki.php/Configuration%3arelative_urls)选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:30:38.463

您需要强制 TinyMCE 使用绝对 url 而不是相对 url，为此您需要`tinyMCE.init({});`像这样添加接下来的 3 行：

```
 tinyMCE.init({
        relative_urls : false,
        remove_script_host : false,
        convert_urls : false
    }); 
```

# linux - 直接打开 Xserver 的套接字

> ID：12111861
> 
> 赞同：4
> 
> 时间：2012-08-24T14:57:54.947
> 
> 标签：linux, user-interface, desktop, window-managers, x11

我希望了解 Linux 桌面环境如何与 Xserver 一起使用。我在读到大多数窗口管理器不直接打开套接字，而是使用 Xlib 绑定​​来编写 WM 的任何语言，或者您可以使用更高级别的绑定 XCB；但我想知道直接向 Xserver 打开套接字有什么好处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-05-13T15:12:36.753

我不会告诉你优点，但我会告诉你如何去做。

前段时间我发现了一个人的例子，我再也找不到了，但这里或多或少是他的代码。了解 XCB 等客户端库的幕后情况非常有趣。

为了向 X 服务器发送请求，您需要：

1.  到 X 服务器的套接字连接
2.  请求的操作码
3.  与请求相关的数据

打开套接字、创建图形上下文、创建窗口和映射窗口的 API 可能类似于：

```
x11_connection_t connection = {0};
x11_init_connection(&connection);

x11_state_t state;
state.socket_fd   = connection.socket_fd;
state.id_base     = connection.setup->id_base;
state.root_window = connection.root[0].window_id;
state.root_visual = connection.root[0].visual_id;
state.root_depth  = connection.root[0].depth;

state.gcontext = x11_init_gc(&state, X11_GC_GRAPHICS_EXPOSURES, (u32[]){X11_EXPOSURES_NOT_ALLOWED});

state.window = x11_init_window(&state, 0,0, WIDTH,HEIGHT, state.root_window, state.root_visual,
                               X11_CW_BACK_PIXEL | X11_CW_EVENT_MASK,
                               (u32[]){XCB_RGB_BLUE, X11_EVENT_MASK_KEY_PRESS | X11_EVENT_MASK_POINTER_MOTION});  // X11_EVENT_MASK_KEY_PRESS | X11_EVENT_MASK_POINTER_MOTION | X11_EVENT_MASK_STRUCTURE_NOTIFY | X11_EVENT_MASK_EXPOSURE
x11_map_window(&state, state.window); 
```

但首先我们需要实现它。

* * *

为了说明，这里是前 13 个 X 协议操作码：

```
#define X11_OPCODE_CREATE_WINDOW                1
#define X11_OPCODE_CHANGE_WINDOW_ATTRIBUTES     2
#define X11_OPCODE_GET_WINDOW_ATTRIBUTES        3
#define X11_OPCODE_DESTROY_WINDOW               4
#define X11_OPCODE_DESTROY_SUBWINDOWS           5
#define X11_OPCODE_CHANGE_SAVE_SET              6
#define X11_OPCODE_REPARENT_WINDOW              7
#define X11_OPCODE_MAP_WINDOW                   8
#define X11_OPCODE_MAP_SUBWINDOWS               9
#define X11_OPCODE_UNMAP_WINDOW                10
#define X11_OPCODE_UNMAP_SUBWINDOWS            11
#define X11_OPCODE_CONFIGURE_WINDOW            12
#define X11_OPCODE_CIRCULATE_WINDOW            13 
```

您可以使用如下函数打开套接字，

```
int x11_init_socket(){
  int socket_fd                = socket(AF_UNIX, SOCK_STREAM, 0);  // Create the socket!
  struct sockaddr_un serv_addr = {0};
  serv_addr.sun_family         = AF_UNIX;
  strcpy(serv_addr.sun_path, "/tmp/.X11-unix/X0");
  int srv_len                  = sizeof(struct sockaddr_un);
  connect(socket_fd, (struct sockaddr*)&serv_addr, sizeof(serv_addr));
  return socket_fd;
} 
```

然后你需要握手，

```
int x11_init_connection(x11_connection_t* connection){
  connection->socket_fd = x11_init_socket();

  x11_connection_request_t request = {0};
  request.order = 'l';  // Little endian!
  request.major = 11;
  request.minor =  0;  // Version 11.0
  write(connection->socket_fd, &request, sizeof(x11_connection_request_t));             // Send request
  read(connection->socket_fd, &connection->header, sizeof(x11_connection_reply_t));     // Read reply header
  if(connection->header.success == 0)  return connection->header.success;   // Error handling!

  connection->setup = sbrk(connection->header.length * 4);       // Allocate memory for remainder of data
  read(connection->socket_fd, connection->setup, connection->header.length * 4);  // Read remainder of data

  void* p = ((void*)connection->setup);
                           p += sizeof(x11_connection_setup_t) + connection->setup->vendor_length;  // Ignore the vendor
  connection->format = p;  p += sizeof(x11_pixmap_format_t) * connection->setup->formats;   // Align struct with format sections. Move pointer to end of section
  connection->root   = p;  p += sizeof(x11_root_t) * connection->setup->roots;              // Align struct with root section(s). Move pointer to end of section
  connection->depth  = p;  p += sizeof(x11_depth_t);                                        // Align depth struct with first depth section. Move pointer to end of section
  connection->visual = p;  // Align visual with first visual for first depth

  return connection->header.success;
} 
```

和一堆 X 服务器喜欢的数据结构：

```
typedef struct{
  u8  order;
  u8  pad1;
  u16 major, minor;
  u16 auth_proto, auth_data;
  u16 pad2;
}x11_connection_request_t;

typedef struct{
  u8  success;
  u8  pad1;
  u16 major, minor;
  u16 length;
}x11_connection_reply_t;

typedef struct{
  u32 release;
  u32 id_base, id_mask;
  u32 motion_buffer_size;
  u16 vendor_length;
  u16 request_max;
  u8  roots;
  u8  formats;
  u8  image_order;
  u8  bitmap_order;
  u8  scanline_unit, scanline_pad;
  u8  keycode_min, keycode_max;
  u32 pad;
}x11_connection_setup_t;

typedef struct{
  u8  depth;
  u8  bpp;
  u8  scanline_pad;
  u8  pad1;
  u32 pad2;
}x11_pixmap_format_t;

typedef struct{
  u32 window_id;
  u32 colormap;
  u32 white, black;
  u32 input_mask;   
  u16 width, height;
  u16 width_mm, height_mm;
  u16 maps_min, maps_max;
  u32 visual_id;
  u8  backing_store;
  u8  save_unders;
  u8  depth;
  u8  depths;
}x11_root_t;

typedef struct{
  u8  depth;
  u8  pad1;
  u16 visuals;
  u32 pad2;
}x11_depth_t;

typedef struct{
  u8  group;
  u8  bits;
  u16 colormap_entries;
  u32 mask_red, mask_green, mask_blue;
  u32 pad;
}x11_visual_t;

typedef struct{
  u8  response_type;  /**< Type of the response */
  u8  pad0;           /**< Padding */
  u16 sequence;       /**< Sequence number */
  u32 pad[7];         /**< Padding */
  u32 full_sequence;  /**< full sequence */
}x11_generic_event_t;

typedef struct{
  u8  success;
  u8  code;
  u16 seq;
  u32 id;
  u16 op_major;
  u8  op_minor;
  u8  pad[21];
}x11_error_t;

typedef struct{
  int socket_fd;
  x11_connection_reply_t  header;
  x11_connection_setup_t* setup;
  x11_pixmap_format_t*    format;
  x11_root_t*             root;
  x11_depth_t*            depth;
  x11_visual_t*           visual;
}x11_connection_t;

typedef struct{
  int  socket_fd;
  u32  id_base;  // We'll use this to generate 32-bit identifiers!

  u32  root_window;
  u32  root_visual;
  u8   root_depth;

  u32  window;
  u32  gcontext;
}x11_state_t; 
```

您还需要一个函数来生成 32 位标识符：

```
u32 x11_generate_id(x11_connection_t* connection){
  static u32 id = 0;
  return (id++ | connection->setup->id_base);
} 
```

最后，您需要将数据包与请求组合在一起的实际函数。以下是发送`X11_OPCODE_CREATE_GC`、`X11_OPCODE_CREATE_WINDOW`、`X11_OPCODE_MAP_WINDOW`和的辅助函数`X11_OPCODE_PUT_IMAGE`。

```
#define X11_NONE             0x00000000L  // X11_NONE is the universal null resource or null atom parameter value for many core X requests
#define X11_COPY_FROM_PARENT 0x00000000L  // X11_COPY_FROM_PARENT can be used for many xcb_create_window parameters
#define X11_CURRENT_TIME     0x00000000L  // X11_CURRENT_TIME can be used in most requests that take an xcb_timestamp_t
#define X11_NO_SYMBOL        0x00000000L  // X11_NO_SYMBOL fills in unused entries in xcb_keysym_t tables

enum x11_exposures_t{
  X11_EXPOSURES_NOT_ALLOWED = 0,
  X11_EXPOSURES_ALLOWED     = 1,
  X11_EXPOSURES_DEFAULT     = 2
};

enum x11_gc_t{
  X11_GC_FUNCTION              = 1<<0,
  X11_GC_PLANE_MASK            = 1<<1,
  X11_GC_FOREGROUND            = 1<<2,
  X11_GC_BACKGROUND            = 1<<3,
  X11_GC_LINE_WIDTH            = 1<<4,
  X11_GC_LINE_STYLE            = 1<<5,
  X11_GC_CAP_STYLE             = 1<<6,
  X11_GC_JOIN_STYLE            = 1<<7,
  X11_GC_FILL_STYLE            = 1<<8,
  X11_GC_FILL_RULE             = 1<<9,
  X11_GC_TILE                  = 1<<10,
  X11_GC_STIPPLE               = 1<<11,
  X11_GC_TILE_STIPPLE_ORIGIN_X = 1<<12,
  X11_GC_TILE_STIPPLE_ORIGIN_Y = 1<<13,
  X11_GC_FONT                  = 1<<14,
  X11_GC_SUBWINDOW_MODE        = 1<<15,
  X11_GC_GRAPHICS_EXPOSURES    = 1<<16,
  X11_GC_CLIP_ORIGIN_X         = 1<<17,
  X11_GC_CLIP_ORIGIN_Y         = 1<<18,
  X11_GC_CLIP_MASK             = 1<<19,
  X11_GC_DASH_OFFSET           = 1<<20,
  X11_GC_DASH_LIST             = 1<<21,
  X11_GC_ARC_MODE              = 1<<22,
};

u32 x11_init_gc(x11_state_t* state, u32 value_mask, u32* value_list){
  u32 gcontext_id = x11_generate_id(state);

  u16 flag_count = popcnt(value_mask);
  u16 length     = 4 + flag_count;
  u32* packet    = sbrk(length * 4);

  packet[0] = X11_OPCODE_CREATE_GC | (length<<16);  // The first `u32` in the packet is always the opcode and the length of the packet!
  packet[1] = gcontext_id;
  packet[2] = state->root_window;
  packet[3] = value_mask;
  for(int i=0; i < flag_count; ++i)
    packet[4 + i] = value_list[i];

  write(state->socket_fd, packet, length * 4);
  sbrk(-(length * 4));

  return gcontext_id;
}

enum x11_cw_t{
  X11_CW_BACK_PIXMAP       = 1<<0,
  X11_CW_BACK_PIXEL        = 1<<1,
  X11_CW_BORDER_PIXMAP     = 1<<2,
  X11_CW_BORDER_PIXEL      = 1<<3,
  X11_CW_BIT_GRAVITY       = 1<<4,
  X11_CW_WIN_GRAVITY       = 1<<5,
  X11_CW_BACKING_STORE     = 1<<6,
  X11_CW_BACKING_PLANES    = 1<<7,
  X11_CW_BACKING_PIXEL     = 1<<8,
  X11_CW_OVERRIDE_REDIRECT = 1<<9,
  X11_CW_SAVE_UNDER        = 1<<10,
  X11_CW_EVENT_MASK        = 1<<11,
  X11_CW_DONT_PROPAGATE    = 1<<12,
  X11_CW_COLORMAP          = 1<<13,
  X11_CW_CURSOR            = 1<<14
};

enum x11_event_mask_t{
  X11_EVENT_MASK_NO_EVENT               = 0,
  X11_EVENT_MASK_KEY_PRESS              = 1<<0,   // 0x00000001
  X11_EVENT_MASK_KEY_RELEASE            = 1<<1,   // 0x00000002
  X11_EVENT_MASK_BUTTON_PRESS           = 1<<2,   // 0x00000004
  X11_EVENT_MASK_BUTTON_RELEASE         = 1<<3,   // 0x00000008
  X11_EVENT_MASK_ENTER_WINDOW           = 1<<4,   // 0x00000010  
  X11_EVENT_MASK_LEAVE_WINDOW           = 1<<5,   // 0x00000020  
  X11_EVENT_MASK_POINTER_MOTION         = 1<<6,   // 0x00000040  
  X11_EVENT_MASK_POINTER_MOTION_HINT    = 1<<7,   // 0x00000080  
  X11_EVENT_MASK_BUTTON_1_MOTION        = 1<<8,   // 0x00000100  
  X11_EVENT_MASK_BUTTON_2_MOTION        = 1<<9,   // 0x00000200  
  X11_EVENT_MASK_BUTTON_3_MOTION        = 1<<10,  // 0x00000400  
  X11_EVENT_MASK_BUTTON_4_MOTION        = 1<<11,  // 0x00000800  
  X11_EVENT_MASK_BUTTON_5_MOTION        = 1<<12,  // 0x00001000  
  X11_EVENT_MASK_BUTTON_MOTION          = 1<<13,  // 0x00002000  
  X11_EVENT_MASK_KEYMAP_STATE           = 1<<14,  // 0x00004000  
  X11_EVENT_MASK_EXPOSURE               = 1<<15,  // 0x00008000  
  X11_EVENT_MASK_VISIBILITY_CHANGE      = 1<<16,  // 0x00010000  
  X11_EVENT_MASK_STRUCTURE_NOTIFY       = 1<<17,  // 0x00020000  
  X11_EVENT_MASK_RESIZE_REDIRECT        = 1<<18,  // 0x00040000  
  X11_EVENT_MASK_SUBSTRUCTURE_NOTIFY    = 1<<19,  // 0x00080000  
  X11_EVENT_MASK_SUBSTRUCTURE_REDIRECT  = 1<<20,  // 0x00100000  
  X11_EVENT_MASK_FOCUS_CHANGE           = 1<<21,  // 0x00200000  
  X11_EVENT_MASK_PROPERTY_CHANGE        = 1<<22,  // 0x00400000  
  X11_EVENT_MASK_COLOR_MAP_CHANGE       = 1<<23,  // 0x00800000  
  X11_EVENT_MASK_OWNER_GRAB_BUTTON      = 1<<24   // 0x01000000
};

#define X11_DEFAULT_BORDER 0
#define X11_DEFAULT_GROUP  0

u32 x11_init_window(x11_state_t* state, u16 x, u16 y, u16 w, u16 h, u32 window_parent, u32 visual, u32 value_mask, u32* value_list){
  u32 window_id = x11_generate_id(state);

  u16 flag_count = popcnt(value_mask);
  u16 length     = 8 + flag_count;
  u32* packet    = sbrk(length * 4);

  packet[0] = X11_OPCODE_CREATE_WINDOW | length<<16;  // The first `u32` in the packet is always the opcode and the length of the packet!
  packet[1] = window_id;
  packet[2] = window_parent;
  packet[3] = x | (y<<16);
  packet[4] = w | (h<<16);
  packet[5] = (X11_DEFAULT_BORDER<<16) | X11_DEFAULT_GROUP;
  packet[6] = visual;
  packet[7] = value_mask;
  for(int i=0;i < flag_count; ++i)
    packet[8 + i] = value_list[i];

  write(state->socket_fd, packet, length * 4);
  sbrk(-(length * 4));

  return window_id;
}

void x11_map_window(x11_state_t* state, u32 window_id){
  int const length = 2;
  u32 packet[length];
  packet[0] = X11_OPCODE_MAP_WINDOW | (length<<16);  // The first `u32` in the packet is always the opcode and the length of the packet!
  packet[1] = window_id;
  write(state->socket_fd, packet, 8);
}

enum x11_image_format_t{
  X11_IMAGE_FORMAT_XY_BITMAP = 0,
  X11_IMAGE_FORMAT_XY_PIXMAP = 1,
  X11_IMAGE_FORMAT_Z_PIXMAP  = 2
};

void x11_put_img(x11_state_t* state, u16 x, u16 y, u32* data){
  u32 packet[6];
  u16 const length = ((state->tile_width * state->tile_height)) + 6;

  packet[0] = X11_OPCODE_PUT_IMAGE | (X11_IMAGE_FORMAT_Z_PIXMAP<<8) | (length<<16);  // The first `u32` in the packet is always the opcode and the length of the packet!
  packet[1] = state->window;
  packet[2] = state->gcontext;
  packet[3] = state->tile_width | (state->tile_height<<16);
  packet[4] = x | (y<<16);
  packet[5] = state->root_depth<<8;

  write(state->socket_fd, packet, 24);
  write(state->socket_fd, data, state->tile_width * state->tile_height * 4);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-15T04:09:13.843

我已经用 node/javascript ( [https://github.com/sidorares/node-x11/](https://github.com/sidorares/node-x11/) ) 完成了它并不像看起来那么可怕，并且对于某些特定任务可能比 xlib 工作得更好（非平凡的并行性或资源依赖或间接 glx ），但其中最有价值的可能是教育。如果您只想完成一些工作，可能有可用的解决方案，您无需重新发明轮子

起点是 x11 协议文档：[https ://www.x.org/releases/X11R7.7/doc/xproto/x11protocol.html](https://www.x.org/releases/X11R7.7/doc/xproto/x11protocol.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:09:21.837

问题应该是“使用 Xlib 而不是像 gtk 这样的图形工具包有什么优势”？

即使要掌握 Xlib，你也得花费数月或数年的时间！它非常复杂，几乎每个要显示图形内容的应用程序都使用工具包。

使用普通套接字意味着直接使用 X11 协议，这意味着您最终将重新创建 Xlib（不，您不会完成！）

打个比方，普通套接字~机器码，xlib~汇编代码，工具包~高级语言。（尽管 xlib 为您做了一些维护，但我想这可以忽略不计）

# android - 在android中禁用多点触控

> ID：12111862
> 
> 赞同：2
> 
> 时间：2012-08-24T14:57:56.403
> 
> 标签：android, multi-touch

如何通过清单或以编程方式在android中禁用多点触控？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T15:00:51.683

你可以使用`android:splitMotionEvents`或`android:windowEnableSplitTouch`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T15:18:34.303

为防止这种情况发生，您应该关闭按钮所在的 ViewGroup 内的[splitMotionEvents](http://developer.android.com/reference/android/R.attr.html#splitMotionEvents)或[windowEnableSplitTouch](http://developer.android.com/reference/android/R.attr.html#windowEnableSplitTouch)属性。

```
android:splitMotionEvents="false" 
```

# r - pkg:testthat 中的 expect_not_equal

> ID：12111863
> 
> 赞同：13
> 
> 时间：2012-08-24T14:57:59.647
> 
> 标签：r

我想使用“testthat”测试两个值*不相等。*我可以使用类似的东西来测试平等

```
expect_that(x, equals(y)) 
```

但是，如果我期望它们不相等怎么办？我可以使用

```
expect_false(x == y) 
```

这是正确的方法还是有类似的东西

```
expect_that(x, not_equals(y)) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T16:49:30.420

该函数`testthat::equals()`实际上是一个包装器`all.equal`。所以你可以像这样构建你的测试：

```
x <- 1:5
y <- 2:6
expect_false(isTRUE(all.equal(x, y)))
expect_false(isTRUE(all.equal(x+1, y)))
Error: isTRUE(all.equal(x + 1, y)) isn't false 
```

您需要在`isTRUE`其中使用，因为`all.equal`如果其参数不相等，则返回一个字符串。

# php - 将 jqtransform 插件与 Cascade 下拉集成时出现问题

> ID：12111866
> 
> 赞同：1
> 
> 时间：2012-08-24T14:58:27.940
> 
> 标签：php, javascript, jquery, ajax, jqtransform

我有 3 个选择框，它们根据每个框中的选择动态加载。在我尝试使用 jqtransform 插件设置页面样式之前，这些可以正常工作。我试图弄清楚这一点，并搜索了这个网站和网络，但没有找到解决方案，如果我使用 jqtransform 插件，为什么选择菜单根本不填充。任何帮助将不胜感激。

原始工作代码：

```
 `<script language="JavaScript" src="myminiAJAX.js"></script>
<script language="JavaScript" src="functions.js"></script>

<script language="JavaScript">
function init() {
    doAjax('man_list.php', '', 'populateComp', 'post', '1');

}

function showOutput(){
alert("This Is Your Model Id: "+getValue('manufacturer'));
}

    $(function(){
        $('form').jqTransform({imgPath:'jqtransformplugin/img/'});
    });

</script>
<style>
#loading{
background:url('loader64.gif') no-repeat;
height: 63px;
}
</style>
    </head>

<body onLoad="init();">
<p>
<form method="post" action="<?php echo $PHP_SELF;?>">
<b>System Type:</b>&nbsp;<select name="manufacturer" id="manufacturer"       onChange="resetValues();doAjax('type_list.php', 'man='+getValue('manufacturer'), 'populateType', 'post', '1')">
<option value="">Please select:</option></select>&nbsp;

<br /><b>Type of Equipment: </b>&nbsp;<select name="printertype" id="printertype" disabled="disabled" onChange="doAjax('model_list.php', 'man='+getValue('manufacturer')+'&typ='+getValue('printertype'), 'populateModel', 'post', '1')">
<option value="">Please select:</option></select>&nbsp;

<br /><b>Equipment to be depoted out:</b>&nbsp;<select name="printermodel" id="printermodel" disabled="disabled" onChange="showOutput();">
<option value="">Please select:</option></select>

<br /><br /><input type="submit" name="action" value="Submit" /> 
```

添加Jqtransform插件后的代码：

```
 <link rel="stylesheet" href="jqtransformplugin/jqtransform.css" type="text/css" media="all" />
<link rel="stylesheet" href="demo.css" type="text/css" media="all" />
    <script language="JavaScript" src="myminiAJAX.js"></script>
<script language="JavaScript" src="functions.js"></script>
<script type="text/javascript" src="requiered/jquery.js" ></script>
<script type="text/javascript" src="jqtransformplugin/jquery.jqtransform.js" >        </script> 
```

删除了缩短这篇文章的函数，因为它们没有改变原始代码。

```
<body onLoad="init();">
<p>
<form method="post" action="<?php echo $PHP_SELF;?>">
<div class="rowElem"><b>System Type:</b>&nbsp;<select name="manufacturer" id="manufacturer" onChange="resetValues();doAjax('type_list.php', 'man='+getValue('manufacturer'), 'populateType', 'post', '1')">
<option value="">Please select:</option></select>&nbsp;
</div>
<div class="rowElem"><br /><b>Type of Equipment: </b>&nbsp;<select name="printertype" id="printertype" disabled="disabled" onChange="doAjax('model_list.php', 'man='+getValue('manufacturer')+'&typ='+getValue('printertype'), 'populateModel', 'post', '1')">
<option value="">Please select:</option></select>&nbsp;
</div>
<div class="rowElem"><br /><b>Equipment to be depoted out:</b>&nbsp;<select name="printermodel" id="printermodel" disabled="disabled" onChange="showOutput();">
 <option value="">Please select:</option></select>
</div>
<div class="rowElem"><br /><br /><input type="submit" name="action" value="Submit" />        </div>
</p>
<div id="loading" style="display: none;"></div>
<div id="output"></div> 
```

# python - 使用 Cython 加速连接组件算法

> ID：12111870
> 
> 赞同：5
> 
> 时间：2012-08-24T14:58:41.677
> 
> 标签：python, python-2.7, cython

首先，我在 windows xp 机器上使用 python[2.7.2]、numpy[1.6.2rc1]、cython[0.16]、gcc[MinGW] 编译器。

我需要一个 3D 连接组件算法来处理存储在 numpy 数组中的一些 3D 二进制数据（即 1 和 0）。不幸的是，我找不到任何现有代码，因此我将[此处](https://stackoverflow.com/questions/1989987/my-own-ocr-program-in-python)找到的代码修改为使用 3D 数组。一切都很好，但是速度对于处理庞大的数据集是可取的。结果我偶然发现了 cython 并决定试一试。

到目前为止，cython 已经提高了速度： Cython：0.339 s Python：0.635 s

使用 cProfile，我在纯 python 版本中的耗时行是：

```
new_region = min(filter(lambda i: i > 0, array_region[xMin:xMax,yMin:yMax,zMin:zMax].ravel())) 
```

* * *

**问题：** “cythonize”行的正确方法是什么：

```
new_region = min(filter(lambda i: i > 0, array_region[xMin:xMax,yMin:yMax,zMin:zMax].ravel()))
for x,y,z in zip(ind[0],ind[1],ind[2]): 
```

任何帮助将不胜感激，并希望这项工作将对其他人有所帮助。

* * *

**纯python版本[*.py]：**

```
import numpy as np

def find_regions_3D(Array):
    x_dim=np.size(Array,0)
    y_dim=np.size(Array,1)
    z_dim=np.size(Array,2)
    regions = {}
    array_region = np.zeros((x_dim,y_dim,z_dim),)
    equivalences = {}
    n_regions = 0
    #first pass. find regions.
    ind=np.where(Array==1)
    for x,y,z in zip(ind[0],ind[1],ind[2]):

        # get the region number from all surrounding cells including diagnols (27) or create new region                        
        xMin=max(x-1,0)
        xMax=min(x+1,x_dim-1)
        yMin=max(y-1,0)
        yMax=min(y+1,y_dim-1)
        zMin=max(z-1,0)
        zMax=min(z+1,z_dim-1)

        max_region=array_region[xMin:xMax+1,yMin:yMax+1,zMin:zMax+1].max()

        if max_region > 0:
            #a neighbour already has a region, new region is the smallest > 0
            new_region = min(filter(lambda i: i > 0, array_region[xMin:xMax+1,yMin:yMax+1,zMin:zMax+1].ravel()))
            #update equivalences
            if max_region > new_region:
                if max_region in equivalences:
                    equivalences[max_region].add(new_region)
                else:
                    equivalences[max_region] = set((new_region, ))
        else:
            n_regions += 1
            new_region = n_regions

        array_region[x,y,z] = new_region

    #Scan Array again, assigning all equivalent regions the same region value.
    for x,y,z in zip(ind[0],ind[1],ind[2]):
        r = array_region[x,y,z]
        while r in equivalences:
            r= min(equivalences[r])
        array_region[x,y,z]=r

    #return list(regions.itervalues())
    return array_region 
```

*纯python加速：*

```
#Original line:
new_region = min(filter(lambda i: i > 0, array_region[xMin:xMax+1,yMin:yMax+1,zMin:zMax+1].ravel()))

#ver A:
new_region = array_region[xMin:xMax+1,yMin:yMax+1,zMin:zMax+1]
min(new_region[new_region>0])

#ver B:
new_region = min( i for i in array_region[xMin:xMax,yMin:yMax,zMin:zMax].ravel() if i>0)

#ver C:
sub=array_region[xMin:xMax,yMin:yMax,zMin:zMax]
nlist=np.where(sub>0)
minList=[]
for x,y,z in zip(nlist[0],nlist[1],nlist[2]):
    minList.append(sub[x,y,z])
new_region=min(minList) 
```

时间结果：
O：0.0220445
A：0.0002161
B：0.0173195
C：0.0002560

* * *

**Cython 版本 [*.pyx]：**

```
import numpy as np
cimport numpy as np

DTYPE = np.int
ctypedef np.int_t DTYPE_t

cdef inline int int_max(int a, int b): return a if a >= b else b
cdef inline int int_min(int a, int b): return a if a <= b else b

def find_regions_3D(np.ndarray Array not None):
    cdef int x_dim=np.size(Array,0)
    cdef int y_dim=np.size(Array,1)
    cdef int z_dim=np.size(Array,2)
    regions = {}
    cdef np.ndarray array_region = np.zeros((x_dim,y_dim,z_dim),dtype=DTYPE)
    equivalences = {}
    cdef int n_regions = 0
    #first pass. find regions.
    ind=np.where(Array==1)
    cdef int xMin, xMax, yMin, yMax, zMin, zMax, max_region, new_region, x, y, z
    for x,y,z in zip(ind[0],ind[1],ind[2]):

        # get the region number from all surrounding cells including diagnols (27) or create new region                        
        xMin=int_max(x-1,0)
        xMax=int_min(x+1,x_dim-1)+1
        yMin=int_max(y-1,0)
        yMax=int_min(y+1,y_dim-1)+1
        zMin=int_max(z-1,0)
        zMax=int_min(z+1,z_dim-1)+1

        max_region=array_region[xMin:xMax,yMin:yMax,zMin:zMax].max()

        if max_region > 0:
            #a neighbour already has a region, new region is the smallest > 0
            new_region = min(filter(lambda i: i > 0, array_region[xMin:xMax,yMin:yMax,zMin:zMax].ravel()))
            #update equivalences
            if max_region > new_region:
                if max_region in equivalences:
                    equivalences[max_region].add(new_region)
                else:
                    equivalences[max_region] = set((new_region, ))
        else:
            n_regions += 1
            new_region = n_regions

        array_region[x,y,z] = new_region

    #Scan Array again, assigning all equivalent regions the same region value.
    cdef int r
    for x,y,z in zip(ind[0],ind[1],ind[2]):
        r = array_region[x,y,z]
        while r in equivalences:
            r= min(equivalences[r])
        array_region[x,y,z]=r

    #return list(regions.itervalues())
    return array_region 
```

*Cython 加速：*

使用：

```
cdef np.ndarray region = np.zeros((3,3,3),dtype=DTYPE)
...
        region=array_region[xMin:xMax,yMin:yMax,zMin:zMax]
        new_region=np.min(region[region>0]) 
```

时间：0.170，原始：0.339 s

* * *

## 结果

在考虑了提供的许多有用的评论和答案之后，我当前的算法运行在：
Cython：0.0219
Python：0.4309

Cython 的速度比纯 python 提高了 20 倍。

当前 Cython 代码：

```
import numpy as np
import cython
cimport numpy as np
cimport cython

from libcpp.map cimport map

DTYPE = np.int
ctypedef np.int_t DTYPE_t

cdef inline int int_max(int a, int b): return a if a >= b else b
cdef inline int int_min(int a, int b): return a if a <= b else b

@cython.boundscheck(False)
def find_regions_3D(np.ndarray[DTYPE_t,ndim=3] Array not None):
    cdef unsigned int x_dim=np.size(Array,0),y_dim=np.size(Array,1),z_dim=np.size(Array,2)
    regions = {}
    cdef np.ndarray[DTYPE_t,ndim=3] array_region = np.zeros((x_dim,y_dim,z_dim),dtype=DTYPE)
    cdef np.ndarray region = np.zeros((3,3,3),dtype=DTYPE)
    cdef map[int,int] equivalences
    cdef unsigned int n_regions = 0

    #first pass. find regions.
    ind=np.where(Array==1)
    cdef np.ndarray[DTYPE_t,ndim=1] ind_x = ind[0], ind_y = ind[1], ind_z = ind[2]
    cells=range(len(ind_x))
    cdef unsigned int xMin, xMax, yMin, yMax, zMin, zMax, max_region, new_region, x, y, z, i, xi, yi, zi, val
    for i in cells:

        x=ind_x[i]
        y=ind_y[i]
        z=ind_z[i]

        # get the region number from all surrounding cells including diagnols (27) or create new region                        
        xMin=int_max(x-1,0)
        xMax=int_min(x+1,x_dim-1)+1
        yMin=int_max(y-1,0)
        yMax=int_min(y+1,y_dim-1)+1
        zMin=int_max(z-1,0)
        zMax=int_min(z+1,z_dim-1)+1

        max_region = 0
        new_region = 2000000000 # huge number
        for xi in range(xMin, xMax):
            for yi in range(yMin, yMax):
                for zi in range(zMin, zMax):
                    val = array_region[xi,yi,zi]
                    if val > max_region: # val is the new maximum
                        max_region = val

                    if 0 < val < new_region: # val is the new minimum
                        new_region = val

        if max_region > 0:
           if max_region > new_region:
                if equivalences.count(max_region) == 0 or new_region < equivalences[max_region]:
                    equivalences[max_region] = new_region
        else:
           n_regions += 1
           new_region = n_regions

        array_region[x,y,z] = new_region

    #Scan Array again, assigning all equivalent regions the same region value.
    cdef int r
    for i in cells:
        x=ind_x[i]
        y=ind_y[i]
        z=ind_z[i]

        r = array_region[x,y,z]
        while equivalences.count(r) > 0:
            r= equivalences[r]
        array_region[x,y,z]=r

    return array_region 
```

安装文件 [setup.py]

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext
import numpy

setup(
    cmdclass = {'build_ext': build_ext},
    ext_modules = [Extension("ConnectComp", ["ConnectedComponents.pyx"],
                             include_dirs =[numpy.get_include()],
                             language="c++",
                             )]
) 
```

构建命令：

```
python setup.py build_ext --inplace 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T17:14:19.320

正如@gotgenes 指出的那样，您绝对应该使用`cython -a <file>`，并尝试减少您看到的黄色量。黄色对应于生成的 C 越来越差。

我发现减少黄色量的事情：

1.  这看起来像是一种永远不会有任何越界数组访问的情况，只要输入`Array`具有 3 个维度，因此可以关闭边界检查：

    ```
    cimport cython

    @cython.boundscheck(False)
    def find_regions_3d(...): 
    ```

2.  为编译器提供更多信息以进行[高效索引](http://wiki.cython.org/tutorials/numpy#Efficientindexing)，即，只要您`cdef`提供`ndarray`尽可能多的信息：

    ```
     def find_regions_3D(np.ndarray[DTYPE_t,ndim=3] Array not None):
         [...]
         cdef np.ndarray[DTYPE_t,ndim=3] array_region = ...
         [etc.] 
    ```

3.  给编译器更多关于正面/负面的信息。即，如果您知道某个变量始终为正，`cdef`则它是`unsigned int`而不是`int`，因为这意味着 Cython 可以消除任何负索引检查。

4.  立即解包`ind`元组，即

    ```
    ind = np.where(Array==1)
    cdef np.ndarray[DTYPE_t,ndim=1] ind_x = ind[0], ind_y = ind[1], ind_z = ind[2] 
    ```

5.  避免使用`for x,y,z in zip(..[0],..[1],..[2])`构造。在这两种情况下，将其替换为

    ```
    cdef int i
    for i in range(len(ind_x)):
        x = ind_x[i]
        y = ind_y[i]
        z = ind_z[i] 
    ```

6.  避免做花哨的索引/切片。尤其是避免做两次！并避免使用`filter`！即替换

    ```
    max_region=array_region[xMin:xMax,yMin:yMax,zMin:zMax].max()
    if max_region > 0:
        new_region = min(filter(lambda i: i > 0, array_region[xMin:xMax,yMin:yMax,zMin:zMax].ravel()))
        if max_region > new_region:
            if max_region in equivalences:
                equivalences[max_region].add(new_region)
            else:
                equivalences[max_region] = set((new_region, )) 
    ```

    越详细

    ```
    max_region = 0
    new_region = 2000000000 # "infinity"
    for xi in range(xMin, xMax):
        for yi in range(yMin, yMax):
            for zi in range(zMin, zMax):
                val = array_region[xi,yi,zi]
                if val > max_region: # val is the new maximum
                    max_region = val

                if 0 < val < new_region: # val is the new minimum
                    new_region = val

    if max_region > 0:
       if max_region > new_region:
           if max_region in equivalences:
               equivalences[max_region].add(new_region)
           else:
               equivalences[max_region] = set((new_region, ))
    else:
       n_regions += 1
       new_region = n_regions 
    ```

    这看起来不太好，但是三重循环编译到大约 10 行左右的 C 代码，而原始的编译版本有数百行长，并且有很多 Python 对象操作。

    （显然你必须使用所有的变量，`cdef`尤其是`xi`,和在这段代码中。）`yi``zi``val`

7.  您不需要存储所有等价物，因为您对集合所做的唯一事情就是找到最小元素。因此，如果您改为`equivalences`映射`int`到`int`，则可以替换

    ```
    if max_region in equivalences:
        equivalences[max_region].add(new_region)
    else:
        equivalences[max_region] = set((new_region, ))

    [...]

    while r in equivalences:
        r = min(equivalences[r]) 
    ```

    和

    ```
    if max_region not in equivalences or new_region < equivalences[max_region]:
        equivalences[max_region] = new_region

    [...]

    while r in equivalences:
        r = equivalences[r] 
    ```

8.  毕竟要做的最后一件事是根本不使用任何 Python 对象，特别是不要使用字典`equivalences`。现在这很容易，因为它映射`int`到`int`，所以可以使用`from libcpp.map cimport map`and then `cdef map[int,int] equivalences`，并替换`.. not in equivalences`为`equivalences.count(..) == 0`and `.. in equivalences`with `equivalences.count(..) > 0`。（请注意，它将需要 C++ 编译器。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T09:53:21.993

（从上面的评论中复制，以方便其他人阅读）

我相信**scipy**的**ndimage.label 可以满足**您的要求（我没有针对您的代码对其进行测试，但它应该非常有效）。请注意，您必须明确导入它：

```
from scipy import ndimage 
ndimage.label(your_data, connectivity_struct) 
```

然后稍后您可以应用其他内置功能（例如查找边界矩形、质心等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:16:23.383

在针对 cython 进行优化时，您要确保在循环中主要使用本机 C 数据类型，而不是具有更高开销的 Python 对象。查找此类位置的最佳方法是查看生成的 C 代码并查找已转换为大量 Py* 函数调用的行。这些地方通常可以通过使用 cdef 变量而不是 python 对象来优化。

例如，在您的代码中，我怀疑循环`zip`会产生大量 python 对象，并且使用索引进行迭代会更快，`int`然后使用索引来获取元素`ind[0]`，......但是看看生成的 C 代码和看看似乎调用了许多不必要的 python 函数。

# asp.net - 为具有无效/不受支持的 Content-Type（如 text/plain）的客户端请求返回状态代码 4xx

> ID：12111873
> 
> 赞同：4
> 
> 时间：2012-08-24T14:58:48.360
> 
> 标签：asp.net, asp.net-web-api, content-type

我已经使用 ASP.NET Web API（包含在 ASP.NET MVC 4 中）实现了一个 RESTful API。

当客户端使用不受支持的 Content-Type（如“text/plain”）请求我的服务时，我收到以下异常：

> System.InvalidOperationException：没有 MediaTypeFormatter 可用于从媒体类型为“text/plain”的内容中读取类型为 [...] 的对象。

并且我的服务返回 HTTP 状态代码 500 并记录/报告错误（我正在使用 ELMAH）。

不幸的是，我没有找到一种简单的方法来“捕捉”这种不受支持的客户端请求。恕我直言，服务应该返回像 404（未找到）或 400（错误请求）这样的状态代码，因为该错误不是服务器错误（而是客户端错误）。

在另一个 SO 问题中，我找到了这个答案[How do I configure the status code returned by my ASP.NET Web API service when the request has an unsupported Content-Type?](https://stackoverflow.com/questions/12098097/how-do-i-configure-the-status-code-returned-by-my-asp-net-web-api-service-when-t#12099486) 它通过实现自定义 DelegatingHandler 显示了一个可能的解决方案。

所以我的问题是：我错过了什么吗？是否有任何针对此问题的 ASP.NET Web API 内置功能...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:20:08.107

I finally "fixed" the problem with a custom DelegatingHandler similar to this implementation [How do I configure the status code returned by my ASP.NET Web API service when the request has an unsupported Content-Type?](https://stackoverflow.com/questions/12098097/how-do-i-configure-the-status-code-returned-by-my-asp-net-web-api-service-when-t#12099486).

You can find my implementation here: [http://blog.janjonas.net/2012-09-05/asp_net-mvc_4_rc-web-api-return-http-status-code-4xx-invalidoperationexception-no-mediatypeformatter-available-read-object-type-content-media-type](http://blog.janjonas.net/2012-09-05/asp_net-mvc_4_rc-web-api-return-http-status-code-4xx-invalidoperationexception-no-mediatypeformatter-available-read-object-type-content-media-type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T06:06:51.020

您当然可以使用自己的自定义 DelegatingHandler 或者您可以制作自定义的 HttpModule，它将实现 IHttpModule 并检查当前的 http 请求并验证请求。

# php - 使用正则表达式在 URL 中用斜线替换点

> ID：12111874
> 
> 赞同：1
> 
> 时间：2012-08-24T14:58:55.400
> 
> 标签：php, regex, .htaccess

我正在使用一个前端控制器，它使用如下 URL：

[http://www.domain.com/index.php?action=main.Main](http://www.domain.com/index.php?action=main.Main)，其中“main”是模块，“Main”是操作。

对于 URL 重写，我在 htaccess 中使用这一行：

```
RewriteRule ^([^/]+)\.html$ index.php?action=$1 [QSA] 
```

这导致[http://www.domain.com/main.Main.html](http://www.domain.com/main.Main.html)

现在，如何用斜杠替换模块和操作之间的点，以便结果如下所示： [http://www.domain.com/main/Main](http://www.domain.com/main/Main)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:14:25.577

那么试试这个：

```
RewriteRule ^(.*)/(.*)$ index.php?action=$1.$2 [QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:14:53.690

试试这个：

```
RewriteCond %{REQUEST_URI} \.html$
RewriteRule ^(.*)/(.*)\.html$ /$1.$2.html [L]

RewriteCond %{REQUEST_URI} \.html$
RewriteCond %{REQUEST_URI} !/.+/
RewriteRule ^([^/]+)\.html$ index.php?action=$1 [L,QSA] 
```

这将接受如下请求：`http://www.domain.com/main/something/action/Main.html`并将 URI 重写为：`/index.php?action=main.something.action.Main`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:02:54.607

```
RewriteRule ^(.*)/(.*)$ index.php?module=$1&action=$2 [QSA] 
```

# ruby - Rails + Apache solr 分类集成

> ID：12111882
> 
> 赞同：0
> 
> 时间：2012-08-24T14:59:28.960
> 
> 标签：ruby, ruby-on-rails-3, solr, tree

我的应用程序的设计方法有点瓶颈。我的计划是创建模型产品并添加使用国家、地区和城市的过滤器。

Country -> Region -> City 分别是一对多的关系。

apache solr 处理这样的树结构有多好，它们有多快？为 Solr [https://github.com/stefankroes/ancestry](https://github.com/stefankroes/ancestry)使用 ancestry 之类的东西更好，还是为城市、地区和国家分开模型更好？

系统需要处理大量请求，这棵树会变得非常巨大。

感谢您对此的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T02:43:54.113

你考虑过 Neo4j，一个图形数据库吗？

它[支持 Rails](http://neo4j.rubyforge.org/guides/rails3.html)。
它[支持 Lucene 查询语法](http://docs.neo4j.org/chunked/milestone/indexing-search.html)。

***友好的建议：*** *大约 5 年前，我在尝试将一棵大树放入关系数据库时遇到了巨大的性能问题。在用 Neo4j 替换它之后，SP 计算时间从 4 小时变为 0（对它的需求完全消失了，因为我突然可以在运行时完成所有基于关系的代数）。*

# facebook-graph-api - 使用离线功能的应用程序现在需要纠缠用户？

> ID：12111884
> 
> 赞同：1
> 
> 时间：2012-08-24T14:59:34.943
> 
> 标签：facebook-graph-api, facebook-oauth, offlineapps

我有一个非交互式应用程序 - 用户对应用程序进行一次身份验证，应用程序使用购买的访问令牌在后台运行。随着即将弃用的离线访问权限，该应用程序现在是否必须向用户发送提醒（每 60 天一次！）以重新登录？

这充其量似乎很烦人，并且它给这些类型的应用程序带来了糟糕的用户体验（很可能导致用户流失）。

# php - 如何从字符串中删除双引号

> ID：12111887
> 
> 赞同：30
> 
> 时间：2012-08-24T14:59:40.343
> 
> 标签：php, string

这是我的字符串：

```
$a='"some text';` 
```

如何删除双引号，使我的输出看起来像这样？

```
some text` 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-24T15:00:41.450

[`str_replace()`](http://us3.php.net/manual/en/function.str-replace.php)

```
echo str_replace('"', '', $a); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-01-14T13:54:30.353

如果字符串是：`$str = '"World"';`

`ltrim()`函数只会删除第一个双引号。

输出：`World"`

因此，您应该使用`trim()`. 例子：

```
$str = '"World"';
echo trim($str, '"'); 
```

输出-

```
World 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T15:02:12.977

可能是最有意义的使用[`ltrim()`](http://php.net/manual/en/function.ltrim.php)，因为`str_replace()`将删除所有内部引号字符（取决于，也许这就是你想要发生的）。

> `ltrim`— 从字符串的开头去除空格（或其他字符）

```
echo ltrim($string, '"'); 
```

如果要从两边删除引号，只需使用 regular `trim()`，第二个参数是一个字符串，其中包含要修剪的所有字符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T15:01:46.497

使用[str_replace](http://php.net/manual/en/function.str-replace.php)

```
$a = str_replace('"', '', $a); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-15T06:36:49.840

有不同的函数可用于替换字符串中的字符 下面是一些示例

```
$a='"some text';
echo 'String Replace Function<br>';
echo 'O/P : ';
echo $rs =str_replace('"','',$a);
echo '<br>===================<br>';
echo 'Preg Replace Function<br>';
echo 'O/P : ';  
echo preg_replace('/"/','',$a);
echo '<br>===================<br>';
echo 'Left Trim Function<br>';
echo 'O/P : ';  
echo ltrim($a, '"');
echo '<br>==================='; 
```

这是输出。

[![输出图像](../Images/7a1d4c13d8705a5718da284cf2826425.png)](https://i.stack.imgur.com/0c9eE.png)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-11-09T22:06:24.020

你可以这样做：

```
str_replace()
echo str_replace('\"', '', $a); 
```

# java - 如何在 JSF 页面中下载文件

> ID：12111889
> 
> 赞同：0
> 
> 时间：2012-08-24T14:59:49.490
> 
> 标签：java, jsf, jsf-2

我想创建从目录下载 Glassfish 日志文件的 JSF 页面`/opt/glassfish3/glassfish/domains/domain1/logs/`

我找到[了这个](http://www.primefaces.org/showcase/ui/fileDownload.jsf#)Primefaces 教程。我很感兴趣是否有任何可能的方法可以用纯 JSF 获得相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:10:21.670

看看 JCA，并四处寻找提供文件 i/o 的良好 JCA 适配器。如果您在 Java EE 应用程序中工作，您可能还需要正确实现的 JCA 适配器可以/应该提供的事务优势（ACID、回滚等），使用容器公开的资源而不是“本地化”将允许部署安全性在接触容器外的资源（文件、套接字等）时正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:07:46.793

对于一个非常简单的解决方案，您可以在 Web 应用程序的某处创建一个链接（使用[ln](http://linux.die.net/man/1/ln)）到所需的日志文件。

```
cd /path/to/your/webapp/

ln /path/to/your/logfile.log . 
```

有了它，您可以直接使用 URL 访问它；

```
http://yourServer/path-to-your-webapp/logfile.log 
```

# wordpress - Wordpress 类别模板上的多个循环重复帖子。

> ID：12111892
> 
> 赞同：0
> 
> 时间：2012-08-24T14:59:56.090
> 
> 标签：wordpress, post, duplicates

我在 category.php 上有三个循环，第一个是拉最近的单个帖子，第二个两个循环将帖子过滤成奇数和偶数顺序以显示在列中。

除了在第二个循环中重复的第一个帖子之外，所有的工作都完美无缺。

我已经尝试了所有我知道的方法来阻止重复的帖子，但我被困在这个方法上。

循环一：

```
 <?php $args = array( 'posts_per_page' => 1, 'paged' => 1, ); global $wp_query; $duplicate = 0; $the_query = new WP_Query( array_merge( $wp_query->query, $args )  ); while ( $the_query->have_posts() ) : $the_query->the_post(); ?>

    <?php endwhile; ?> 
```

循环二：

```
 <?php if (have_posts()) : while(have_posts()) : $i++; if(($i % 2) !== 0) : $duplicate = 0; $wp_query->next_post(); else : the_post(); if( $post->ID == $do_not_duplicate ) continue; ?>

    <?php endif; endwhile; else: ?>
    <?php endif; ?> 
```

循环三：

```
 <?php $i = 0; rewind_posts(); ?>
    <?php if (have_posts()) : while(have_posts()) : $i++; if(($i % 2) == 0) : $duplicate = 0; $wp_query->next_post(); else : the_post(); if( $post->ID == $do_not_duplicate ) continue; ?>

    <?php endif; endwhile; else: ?>
    <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:34:28.977

在循环 1 的末尾添加以下内容。

```
wp_reset_query(); 
```

然后确保循环 1 中帖子的 $post->ID 也包含在 $do_not_duplicate 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:38:14.177

重置您的循环查询`wp_reset_query();`

前任。

```
<?php
query_posts( 'posts_per_page=5' );
if ( have_posts() ) :
    while ( have_posts() ) : the_post();
        ?><a href="<?php the_permalink() ?>"><?php the_title() ?></a><br /><?php
    endwhile;
endif;
wp_reset_query();
?> 
```

# extjs - 在 Ext JS 面板中插入水印

> ID：12111895
> 
> 赞同：0
> 
> 时间：2012-08-24T15:00:13.680
> 
> 标签：extjs, styles, extjs4, panel, watermark

如何在面板内插入（和对齐）水印（图像）。我正在使用 Ext JS 4.1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:13:17.623

您可以为此使用 css。`cls`在面板中添加一个属性：

```
cls: 'watermark' 
```

然后在你的css文件中定义它，如下所示：

```
.watermark {
   background-image: url('your file');
   background-repeat: no-repeat;
   background-position: right bottom;
} 
```

# c# - Windows 服务器中的 System.Windows.Forms.Timer

> ID：12111901
> 
> 赞同：1
> 
> 时间：2012-08-24T15:00:35.597
> 
> 标签：c#, windows-services

有人可以为我提供一个关于如何在 Windows 服务中使用 System.Windows.Forms.Timer 的示例。计时器应每 10 秒“调用”一次非静态 Windows 服务方法。我已经（不成功）在我的 OnStart 方法中尝试了这个：

```
_timer.Tick += new EventHandler(StartProcessingItems);
_timer.Interval = 10000;
_timer.Enabled = true;
_timer.Start(); 
```

这里 StartProcessingItems 是我的静态 Windows 服务方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:09:46.693

改用 System.Threading.Timer：

```
var t = new Timer(o => 
{
   Console.WriteLine("Hello from the past! " + (DateTime)o);
}, DateTime.Now, TimeSpan.FromSeconds(10), TimeSpan.FromMinutes(1)); 
```

它将在 10 秒后执行委托，然后以 1 分钟的频率执行

[http://msdn.microsoft.com/fr-fr/library/system.threading.timer%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/system.threading.timer%28v=vs.80%29.aspx)

# perl - 基本 perl 代码分解

> ID：12111904
> 
> 赞同：1
> 
> 时间：2012-08-24T15:00:41.130
> 
> 标签：perl

我刚开始学习 perl，在我的书给出的示例代码中有这一行：

```
#!/usr/bin/perl
@lines = `perldoc -u -f atan2`;
foreach (@lines) {
s/\w<([^>]+)>/\U$1/g;
print;
} 
```

代码有效，这不是问题。另外通过观察输入和输出，我知道这一行：

```
s/\w<([^>]+)>/\U$1/g; 
```

做这个

```
ATAN2 ARCTANGENT TAN TANGENT <--- X<atan2> X<arctangent> X<tan> X<tangent> 
```

还有这个

```
MATH::TRIG::TAN <------- C<Math::Trig::tan> 
```

我的问题是：X 和 C 是从哪里来的？

* * *

仅供参考：如果我不使用代码，这是我的输出：

```
perldoc -u -f atan2
=over 8

=item atan2 Y,X
X<atan2> X<arctangent> X<tan> X<tangent>

Returns the arctangent of Y/X in the range -PI to PI.

For the tangent operation, you may use the C<Math::Trig::tan>
function, or use the familiar relation:

    sub tan { sin($_[0]) / cos($_[0])  }

The return value for C<atan2(0,0)> is implementation-defined; consult
your atan2(3) manpage for more information.

=back 
```

这是代码的完整输出：

```
[/cygdrive/c/Users/Documents/learn_perl]$ ./hello_world.pl 
=over 8

=item atan2 Y,X
ATAN2 ARCTANGENT TAN TANGENT

Returns the arctangent of Y/X in the range -PI to PI.

For the tangent operation, you may use the MATH::TRIG::TAN
function, or use the familiar relation:

    sub tan { sin($_[0]) / cos($_[0])  }

The return value for ATAN2(0,0) is implementation-defined; consult
your atan2(3) manpage for more information.

=back 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:10:34.377

替换正则表达式

```
s/\w<([^>]+)>/\U$1/g; 
```

查找一个字母数字字符（示例文本中的 X 和 C），后跟`<`，捕获任何不是`>`，后跟 a 的字符`>`。然后它将捕获的字符串放回原处，并使用转义序列`\U`将其转换为大写。

> 我的问题是：X 和 C 是从哪里来的？

它们已经在 perldoc 文本中。然而，它们被替换正则表达式删除。也许您对输入和输出感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:14:21.327

你确定你没有混淆你的输入和输出吗？在我看来，该代码会将“z<something>”转换为“SOMETHING”。

# line - 自定义画线功能，坐标方向为什么会拖慢程序？

> ID：12111906
> 
> 赞同：0
> 
> 时间：2012-08-24T15:00:45.777
> 
> 标签：line, pixel, processing

我正在编写自己的绘制线函数以提高从矢量文件中绘制大量线条时的速度（只是一个.txt，其中包含一堆绘制塞维利亚地图的坐标）。我正在使用方法 pixel[int] 来构建这样的函数，但是由于某种原因，当我输入这样的坐标时，我无法解释程序运行得非常快：drawline(y1,x1,y2,x2) 但是当它的时候很慢它应该是怎样的： drawline(x1,y1,x2,y2) 对此有合理的解释吗？

.txt 代码的结构很简单，如下所示（完整的 .txt 文件可以从[文件夹](http://417i.com/StackOverflow)下载）：

```
1188156570;1188156570;37.417595;-5.9971519
1188156400;1188156400;37.4175115;-5.9970483
1188156720;1188156720;37.4174588;-5.9969338
1188156606;1188156606;37.4175833;-5.9966021
1188156462;1188156462;37.4177174;-5.9960534
1188156753;1188156753;37.4177413;-5.9958605
1188156643;1188156643;37.417703;-5.9955831
1132983943;1132983943;37.4176646;-5.995381
next
304791377;304791377;37.3968538;-6.0066269
1188156644;1188156644;37.3967509;-6.0064412
1188156521;1188156521;37.3956275;-6.0073602
next
1188216699;1188216699;37.4221365;-5.9959761
693311201;693311201;37.4253619;-5.9951655
1188216625;1188216625;37.4239123;-5.9924734
1188216567;1188216567;37.4233085;-5.9916937
1186512382;1186512382;37.4223597;-5.9910465
1188216642;1188216642;37.4216335;-5.9927836
1188216699;1188216699;37.4221365;-5.9959761
next 
```

下面是处理 1.5.1 草图的代码，我尽可能地缩短了它，并尽可能地使其整洁。谢谢您的帮助！

```
String[] polylines;
String[] streetArray=new String[0];
String[] empty=new String[0];
ArrayList vlist=new ArrayList();
float panX; float panY;

void setup() {
  size(600, 600);
  polylines=loadStrings("data/MapSeville.txt");
  panX=0; panY=0;
  prepare();
}

void draw() {
  background(255);
  PVector pan = pan();
  panX=panX+pan.x;
  panY=panY+pan.y;

  loadPixels();
  for(int i=0;i<vlist.size();i++){
    vertexgroup vg= (vertexgroup) vlist.get(i);
    for(int j=1;j<vg.listcoord.size();j++){
      Vertice v2=(Vertice) vg.listcoord.get((j-1));
      Vertice v1=(Vertice) vg.listcoord.get(j);
      float x1=v1.coord.x+panX;
      float y1=v1.coord.y+panY;
      float x2=v2.coord.x+panX;
      float y2=v2.coord.y+panY;
      drawline(x1, y1, x2, y2);//slow :( comment out this line and enable the next to see how smooth it can go
      //drawline(y1, x1, y2, x2);//fast!
    }
  } 
  updatePixels();
}

////////////////////////////// functions ////////////////////////////////////////////////

PVector pan(){
  PVector p;
  if (mousePressed){
    p = new PVector(mouseX-pmouseX, mouseY-pmouseY);
  }else{
    p=new PVector(0,0);
  }
  return p;
}

////////////////////

void drawline(float x1, float y1, float x2, float y2){
  int X1=int(x1);
  int X2=int(x2);
  color pink = color(0);
    if((X2>X1)){
      for (int i=0; i<=int(x2-x1); i++){ 
        if (((i+X1)>=0)&&((i+X1)<=width)){
          int g=int(y1+((y2-y1)/(x2-x1))*i)*(width) + i + X1;
          if ((g<width*height)&&(g>=0)){
            pixels[g]=pink;
          }
        }
      }
    }else if((X2<X1)){
      for (int i=0; i<=int(x1-x2); i++){
        if (((i+X2)>=0)&&((i+X2)<=width)){
          int f=int(y2+((y2-y1)/(x2-x1))*i)*(width) + i + X2;
          if ((f<width*height)&&(f>=0)){
            pixels[f]=pink; 
        }
      }
    }  
  }
}

//////////////////////////////

 void prepare(){
  for (int i=1;i<polylines.length;i++) {
    String[] pts = split(polylines[i], ";");

    if (pts.length>3) {
      streetArray=append(streetArray, polylines[i]); //adds coords strings to the array streetArray
    }
    if (pts.length==1) { //this is when the coords of a polyline ends: pts[0]==>"next" 
        vertexgroup vgroup;
        vgroup=new vertexgroup(create_polyArr(streetArray)); // this function is defined right below
        vlist.add(vgroup);
        streetArray=empty;
    }}}

    ArrayList create_polyArr(String[] streetpts) {
    ArrayList arrpts=new ArrayList();
    arrpts.clear();

    for (int i=0;i<streetpts.length;i++){ //iterates through coords strings of the polyline contained in streetpts
      String[] pts = split(streetpts[i], ";");
      float x=float(pts[3]);//get the x coord
      float y=float(pts[2]);//get the y coord
      x=((x+5.95)*15000+width/2);//scale and center coord x
      y=((-y+37.40)*15000+height/2);//scale and center coord y
      PVector coord=new PVector(x,y);
      Vertice govertex=new Vertice(coord);
      arrpts.add(govertex);
    }
    return(arrpts);
  }

 ////////////////////// end functions //////////////////////////////////

 //////////////////////// classes ///////////////////////////////////////

 class vertexgroup{

  ArrayList listcoord;

  vertexgroup(ArrayList _listcoord){
    listcoord=_listcoord;
  }}

  //////////

  class Vertice{

  PVector coord;

  Vertice(PVector _coord){
    coord=_coord;
  }}

  ////////////////////// end classes /////////////////////////////////////// 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:56:55.390

不幸的是，我没有太多时间想深入研究这个问题，也没有完整准确的答案来回答您的问题，但我确实有一些观察和建议可能会有所帮助。

您的代码实际上还不错，并且可以在浏览器之外顺利运行。根据您希望它如何工作，从更简单到更复杂的建议很少：

1.  只需使用不同的渲染器：`size(600,600,P2D)`. 我注意到我得到 ~35fps`JAVA2D`和 ~60fps`P2D`
2.  您一直在清除像素并重新绘制。您可以创建一个大的[PGraphics](http://processing.org/reference/createGraphics_.html)或[PImage](http://processing.org/reference/PImage.html)（取决于您喜欢如何绘制）并在 setup 中绘制完整的地图，`mapGraphics.draw(0,0);`然后`mapImage.draw(0,0);`在`draw()`. 想象一下，尽管存在最大图像尺寸。有点相似，您可以使用 OpenGL 探索纹理图集解决方案，这应该非常快
3.  我还没有测试过，但是您是否尝试过使用 .svg 格式，您可以在 Processing via [PShape](http://processing.org/reference/PShape.html)中使用该格式？

长话短说：要么使用不同的渲染器和/或“缓存”绘图指令，而不是连续重绘。

如果您有时间并想弄清楚速度差异可能来自哪里，您可以`jvisualvm`从命令行/终端启动并配置/比较 CPU 使用情况快照。

最后一点：

我得到相同的帧速率（通过调用`fill(0);text((int)frameRate+" fps",10,20);`或`frame.setTitle((int)frameRate+" fps");`使用两个版本。

难道你只是得到不同的平移速度/数量？

# ruby-on-rails - RoR - 上传 JSON 渲染

> ID：12111911
> 
> 赞同：0
> 
> 时间：2012-08-24T15:01:02.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我在“localhost:3000/rules”上有一个“规则列表”，它的 JSON 呈现在“localhost:3000/rules.json”上

我想创建“发布”操作以将此 json 上传到我的 FTP，但我找不到使用 Net:FTP 进行此操作的解决方案。

这是我的代码：rules_controller.rb

```
def publish
   require 'net/ftp'
   ftp = Net::FTP.new('xxxxxx', 'xxxxxxxx', 'xxxxxxx')
   ftp.chdir('www/lol')
   ftp.putbinaryfile('rules.json')
   ftp.close
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:45:38.260

从未在此工作，但查看 [ [http://stdlib.rubyonrails.org/libdoc/net/ftp/rdoc/classes/Net/FTP.html](http://stdlib.rubyonrails.org/libdoc/net/ftp/rdoc/classes/Net/FTP.html) ] 似乎`ftp.login`缺少部分。

好吧，如果您不需要进行身份验证，那么需要更多的洞察力来提供任何建议。你能准确地发布你面临的问题吗？

* * *

**编辑：**

如果您可以将您的 json 数据（包含所有规则）放在一个文件中（如您所说`rules.json`），那么这`net/ftp`应该可以工作。现在，如果您在将 json 内容保存在临时文件中时遇到问题，这篇文章 - “ [File.open, write and save?](https://stackoverflow.com/questions/5009031/file-open-write-and-save) ” 可能会有所帮助。但是，如果您觉得问题完全在于`net/ftp`，那么错误日志或更详细的问题描述会有所帮助。

# jquery - 具有某些css属性的jQuery最后一个元素

> ID：12111919
> 
> 赞同：0
> 
> 时间：2012-08-24T15:01:37.900
> 
> 标签：jquery

我有一个隐藏的相同 div 的列表。现在很少有相同的 div 没有隐藏，我如何获得最后一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:03:34.117

```
var elem = $(".myclass:visible").last(); 
```

[**小提琴**](http://jsfiddle.net/V8Ajh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T15:03:16.253

使用`last()`选择器中的函数，该函数可以选择未隐藏的 div。

[http://api.jquery.com/last/](http://api.jquery.com/last/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T15:03:33.110

试试[http://api.jquery.com/last-selector/](http://api.jquery.com/last-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T15:06:13.323

试试 jQuery last 选择器

```
$(".cssName :last") 
```

[最后一个选择器](http://api.jquery.com/last-selector/)

# asp.net - 列表视图中的上下文感知按钮

> ID：12111921
> 
> 赞同：0
> 
> 时间：2012-08-24T15:01:49.833
> 
> 标签：asp.net, vb.net

我有一个 Listview 可以提取并显示一些数据。字段 1 是 PK，字段 2 是类型标识符，其余都是纯数据。我有一个按钮，显示为每条记录的最后一个字段。该按钮需要能够根据字段 2 调用正确的页面，并将字段 1 的值传递给它。

如何判断正在单击的记录，并为我的逻辑获取适当的值？

```
|Field 1|Field 2|Button |
|      1|      2| Click |
|      2|      2| Click |
|      3|      1| Click | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:14:53.820

`ListView`在您定义按钮的位置的标记中，执行以下操作：

```
<asp:button id="yourButton" OnClientClick='<%#redirectToProperPage(Eval("Field1"),Eval("Field2"))%>' /> 
```

现在，像这样定义一个 JS 函数：

```
function redirectToProperPage(id1,id2)
 {
      if(id2==1)
      {
        if(id1==1)
           window.location='MyOtherpage.aspx';
        else 
          window.location='Different.aspx';
      }
      else ...
 } 
```

您明白了……您不需要为此编写代码，除非您想做的不仅仅是简单地重定向到不同的页面。

# python - IOError：无效模式：wb + reportlab + app engine

> ID：12111922
> 
> 赞同：0
> 
> 时间：2012-08-24T15:01:50.063
> 
> 标签：python, google-app-engine, reportlab

这是我第一次使用 ReportLab，我尝试制作简单的 pdf，但是当我尝试运行脚本时出现以下错误。

```
class ReportLabTest (webapp.RequestHandler):

    def get(self):
        c = canvas.Canvas("hello.pdf")
        c.translate(inch,inch)
        c.setFont("Helvetica", 80)
        c.setStrokeColorRGB(0.2,0.5,0.3)
        c.setFillColorRGB(1,0,1)
        c.rect(inch,inch,6*inch,9*inch, fill=1)
        c.rotate(90)
        c.setFillColorRGB(0,0,0.77)
        c.drawString(3*inch, -3*inch, "Hello World")
        c.showPage()
        c.save()
        self.write_response(c)
        self.response.headers['Content-Type'] = 'application/pdf'
        self.response.headers['Content-Disposition'] = 'filename=testpdf.pdf'

        return 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "/home/ducos/google_appengine/google/appengine/ext/webapp/_webapp25.py", line 710, in \__call__
        handler.get(*groups)

  File "/home/ducos/workspace/MedeticWS/www/tests.py", line 572, in get
        c.save()

  File "/home/ducos/workspace/MedeticWS/reportlab/pdfgen/canvas.py", line 1123, in save
        self._doc.SaveToFile(self._filename, self)

  File "/home/ducos/workspace/MedeticWS/reportlab/pdfbase/pdfdoc.py", line 234, in SaveToFile
        f = open(filename, "wb")

  File "/home/ducos/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 589, in __init__
        raise IOError('invalid mode: %s' % mode)

IOError: invalid mode: wb 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T00:45:06.823

根据先前的答案，您无法写入文件系统。但是，您可以提供类似设备的文件作为参数而不是文件名。从画布的来源`You may pass a file-like object to filename as an alternative to a string.`

So you can create a StringIO object pass it to Canvas, and then rather than calling save() which may close the device (I am not sure on this - see below). do showpage() if you haven't already and the perform getvalue() on the StringIO object to for your response.write(). e.g.

```
from StringIO import StringIO
x = StringIO()
c = canvas.Canvas(x)
... dostuff
c.save()
output = x.getvalue()
self.write_response(output) 
```

Just checked, if a file like handle is provided then it doesn't call `close` so a `save()` would be fine.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:54:25.287

无法写入 AppEngine 中的文件。因此，该`save()`方法在尝试打开文件进行写入时失败。

您可以使用该`getpdfdata()`方法并将其保存到数据存储区或 Blob 存储区。

# jquery - 将图像和计数气泡添加到手风琴部分 Jquery Mobile

> ID：12111923
> 
> 赞同：5
> 
> 时间：2012-08-24T15:02:03.960
> 
> 标签：jquery, jquery-mobile

我有一个可折叠部分，我想添加一个图像和一个计数气泡，就像下面的标记一样。

```
<a href="pa.aspx">
  <img src="images/gf.png" alt="" class="ui-li-icon">
  IT Change Controls<span class="ui-li-count">4</span> 
</a> 
```

我的问题是，如果我添加除`<h3>`标签之外的任何内容，则节标题将无法正确呈现。这对我不起作用..

```
 <div data-role="collapsible" data-inset="false" data-collapsed="false">
     <%--<h3>Section 1</h3>--%>
     <a href="pa.aspx">
         <img src="images/gf.png" alt="" class="ui-li-icon">
         IT Change Controls<span class="ui-li-count">4</span> 
     </a> 
```

如何在部分标题中获取图像和计数气泡？

![右侧带有计数气泡图像的可折叠部分图像](../Images/c30a585063a8ccd964f763d67429cc51.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T18:53:42.303

也许以下实现接近您想要的：

```
<!doctype html>
<html lang="en">
   <head>
        <title></title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>   
        <style>
            div.col-set .ui-icon {
                visibility:hidden;
            }

            div.col-set .comment-count {
              float: right;
              font-size: 11px;
            }

            div.col-set .img-set {
              float: left;
            }

            div.col-set a {
                text-decoration: none;
                font-size: 11px;
            }

            div.col-set .col-text {
                margin-left: 20px;
                text-align: center;
                float: left;
                font-size: 11px;
            }
    </style>
    </head>
    <body>
        <div data-role="page">
            <div data-role="content">   
                <div class="col-set" data-role="collapsible" data-collapsed="true">
                    <h3>
                        <a href="test.html">
                            <img src="http://jquerymobile.com/demos/1.0a4.1/docs/lists/images/sj.png" class="img-set" alt="SJ Flag" />
                            <div class="col-text">Test 1</div>
                            <span class="ui-li-count ui-btn-up-c ui-btn-corner-all comment-count">1</span>
                        </a>
                    </h3>
                    <p>Collapsible content 1.</p>
                </div>
                <div class="col-set" data-role="collapsible" data-collapsed="true">
                    <h3>
                        <a href="test.html">
                            <img src="http://jquerymobile.com/demos/1.0a4.1/docs/lists/images/sj.png" class="img-set" alt="SJ Flag" />
                            <div class="col-text">Test 2</div>
                            <span class="ui-li-count ui-btn-up-c ui-btn-corner-all comment-count">2</span>
                        </a>
                    </h3>
                    <p>Collapsible content 2.</p>
                </div>
            </div>
        </div>      
    </body>
</html> 
```

![在此处输入图像描述](../Images/415eb4c185b3f0511b1575fe3e610a72.png)

# python - 如何使用 Flask / SQLAlchemy 将返回结果的数量限制为仅 1000 个最新条目？

> ID：12111925
> 
> 赞同：4
> 
> 时间：2012-08-24T15:02:10.647
> 
> 标签：python, caching, sqlalchemy, flask, flask-sqlalchemy

我正在寻找类似于 reddit/hackernews 具体如何处理他们的“新”列表的东西（这似乎是许多主要网站的常用方法）。它似乎像这样工作：

*   提交新链接时，抓取一定数量的最新条目
*   这些查询由 PER_PAGE # 划分并缓存为 cachekey = latestPage1,2,3,4
*   单击下一个/上一个按钮加载下一个/上一个缓存键

我的问题是：很难找到 SQLalchemy/flask-sqlalchemy 代码来获取仅固定 # 的最新条目的查询。

我怎么说：

```
q = PostDB.query(order_by('creation_time').desc()).limit(1000)
for chunkOf50Results in q:
  cache.set(CachedChunk+=1, chunkOf50Results) 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T16:13:57.163

如果您在 SQLAlchemy 中对查询进行切片，它会自动限制获取的数据库结果集：

```
limitedQuery = q[:50] 
```

如果您要先进行计数，则可以轻松地循环分块响应：

```
count = q.count()
for chunkstart in xrange(0, count, 50):
    CachedChunk += 1
    chunkend = min(chunkstart + 50, count)
    cache.set(CachedChunk, q[chunstart:chunkend]) 
```

请注意，这确实会导致对数据库的多次查询。或者，您可以使用该[`itertools.izip_longest()`函数](http://docs.python.org/library/itertools.html#itertools.izip_longest)生成 50 个项目的组：

```
from itertools import izip_longest

for chunkOf50Results in izip(*[q.yield_per(50)]*50):
     CachedChunk += 1
     cache.set(CachedChunk, chunkOf50Results) 
```

我曾经[`.yield_per(50)`](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.yield_per)将行预取限制为批量大小，因此您不会预取超过每批所需的数量。

该`izip_longest(*[iterable]*n)`技巧为您提供`n`了基本迭代器之外的大小组：

```
>>> import itertools
>>> list(itertools.izip_longest(*[iter(range(7))]*3))
[(0, 1, 2), (3, 4, 5), (6, None, None)] 
```

请注意，最后一批填充了`None`值以填充到批量大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T16:34:39.853

解决方案是使用[文档中描述](http://docs.python.org/library/itertools.html#itertools.izip)[`itertools.izip_longest`](http://docs.python.org/library/itertools.html#itertools.izip_longest)的技巧

```
q = PostDB.query(order_by('creation_time').desc()).limit(1000)

query_iterators = [iter(q)] * 50

for CachedChunk, chunk_of_50 in enumerate(izip_longest(*query_iterators)):
     cache.set(CachedChunk, chunk_of_50) 
```

这*应该*会导致**一次**访问数据库获取多达 1000 篇文章，然后让您将它们分成 50 个批次并缓存它们。

# c# - C# 使用 DBNull.value 更新数据库条目似乎出错

> ID：12111929
> 
> 赞同：0
> 
> 时间：2012-08-24T15:02:20.130
> 
> 标签：c#, asp.net, sql-server

好吧，也许我正在解决这个错误。我们会看到的。

所以我正在检查一些数据。该数据将是 Int32 类型。或多或少，如果该项目不是我的标志之一，我想将其设置为`DBNull.value`，我相信。

我要确定的是该列可以为空，所以如果我没有在其中输入任何内容，它将被设置为空。

这是我的程序逻辑：

```
int content = 5;  //set for sake of program;
int test;
if( content == 5){
  test = content;
}else{
  //i want test to be labeled as DBNULL.
  //didnt know if i could redefine here to be like:
  //      free(test); DBNull test = new DBNull;
}
//my companys db command
CommandFactory cmd = new CommandFactory();
cmd.commandText = "insert into TABLE ( value ) values ( @a )";
cmd.addInputParameters("@a", test, DBType.Int32);
... 
```

在这种情况下，如何将它设置为 dbnull？像：

```
if(test != -1){
    cmd.addInputParameters("@a", test, DBType.Int32);
}
//no param would be entered for @a, maybe forcing it to be null? 
```

**在表的定义中，值是可以为空的，所以你不需要担心这个。**

*虽然发布了正确答案，但它不是我最终使用的答案，因为我的同事不想让我用 ?? 做“魔术”，所以他们让我这样做：*

```
int? temp;
if(temp.HasValue){
    cmd.addInputParameters("@a", temp, DBType.Int32);
}else{
    cmd.addInputParameters("@a", DBNull.Value, DBType.Int32);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T15:07:05.067

怎么样：

```
int? test = content
...
cmd.addInputParameters("@a", (object)test ?? DbNull.Value, DBType.Int32); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:06:31.763

你的问题真的很难理解，但我认为你的意思是你想要一个可能的可空整数。只需将 test 声明为可为空的 int 而不是常规的 int。所以：

`int? test = null;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:41:30.507

尝试使用此代码在 db 中插入一个可为空的整数。我已将 int 设为可为空的数据类型，为此，db 中的“测试”列必须为可空。

```
 int content = 5;  //set for sake of program;
        int? test = null;
        if (content == 5)
        {
            test = content;
        }

        SqlCommand cmd = new SqlCommand();
        cmd.CommandText = "insert into TABLE (columnNameforTest) values ( @test)";
        cmd.Parameters.AddWithValue("@test", test);
        SqlConnection con = new SqlConnection("yourconnectionstring");
        int i = cmd.ExecuteNonQuery(); 
```

# facebook - FB：无法将照片发布到 Facebook 页面上的相册

> ID：12111931
> 
> 赞同：0
> 
> 时间：2012-08-24T15:02:35.507
> 
> 标签：facebook

当尝试将照片发布到相册时（作为页面，使用了从“/page_id?fields=access_token”获得的页面访问令牌），我得到了新创建对象的 ID。然而，当试图在图形资源管理器中检查它时，这个 ID 只会返回“false”。此外，照片似乎没有出现在所选相册中（或其他任何地方）。

代码非常简单：

```
$facebook->setFileUploadSupport (true);
$page_at = $facebook->api ('/'.option::get_value ('page_id').'?fields=access_token');
$page_at = $page_at['access_token'];
$args = array ();
$args['message'] = $this->text;
$args['image'] = '@' . realpath ($filename);
$args['access_token'] = $page_at;
$photo = $facebook->api ('/'. option::get_value ('album_id') . '/photos', 'post', $args); 
```

option::get_value () 只返回（正确的，我检查了三次）专辑 ID。此外，图像是 .png，我没有收到任何错误消息，Facebook 返回的所有内容都是 ID：

数组（1）{[“id”]=>字符串（15）“188538791279108”}

这是 Facebook 的错误还是我遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:54:21.937

而不是'image'参数，尝试'source'。刚刚尝试过，它对我有用（发布到页面拥有的相册）：

```
$args['source'] = '@'.realpath($filename); 
```

此外，确保上传的文件具有非零文件大小：

```
error_log('file size: '.$_FILES["file"]["size"]); 
```

[并使用Debugger](https://developers.facebook.com/tools/debug)仔细检查访问令牌是否具有`manage_pages,publish_stream`权限。

# sql-server-2000 - SQL Server 中 READTEXT 方法的使用

> ID：12111932
> 
> 赞同：0
> 
> 时间：2012-08-24T15:02:36.527
> 
> 标签：sql-server-2000

根据微软 MSDN 上的这个链接：http:
[//msdn.microsoft.com/en-us/library/aa933206](http://msdn.microsoft.com/en-us/library/aa933206(v=sql.80) (v=sql.80 )

这是插入语句的语法。

```
Syntax

INSERT [ INTO] 
    { table_name WITH ( < table_hint_limited > [ ...n ] ) 
        | view_name 
        | rowset_function_limited 
    } 

    {    [ ( column_list ) ] 
        { VALUES 
            ( { DEFAULT | NULL | expression } [ ,...n] ) 
            | derived_table 
            | execute_statement 
        } 
    } 
    | DEFAULT VALUES

< table_hint_limited > ::= 
    { FASTFIRSTROW 
        | HOLDLOCK 
        | PAGLOCK 
        | READCOMMITTED 
        | REPEATABLEREAD 
        | ROWLOCK 
        | SERIALIZABLE 
        | TABLOCK 
        | TABLOCKX 
        | UPDLOCK 
    } 
```

在文档中，它在 VALUES 子句中定义了“*execute_statement*”，如下所示：

> 执行语句
> 
> **是使用 SELECT 或READTEXT**语句返回数据的任何有效 EXECUTE 语句。

我在存储过程中尝试了以下格式：

```
 INSERT INTO #MANAGERS (MANAGERCHARS) 
      READTEXT #MANAGERS.MANAGERIDS @ptrval @CharIndex 1 
```

并得到以下错误：

```
Msg 156, Level 15, State 1, Procedure usp_TestQualityMonitor, Line 117
Incorrect syntax near the keyword 'READTEXT'. 
```

根据我在这个问题中讨论过的文档，READTEXT 应该是作为 execute_statement 的有效方法，那么我做错了什么？为什么我会收到此消息？以及如何正确格式化此语句而不会出错？

注意：通过删除“VALUES”来修复 SQL。仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:06:34.160

如果您仔细阅读语法图，您可以使用

(a) 价值观（等）

或者

(b) 派生表

或者

(c) 执行语句

你不能说：

```
INSERT dbo.table VALUES(EXEC dbo.procedure); 
```

但是你*可以*说：

```
INSERT dbo.table EXEC dbo.procedure; 
```

（当然取决于 dbo.procedure 的作用。）

所以也许你可以尝试：

```
INSERT INTO #MANAGERS (MANAGERCHARS) --VALUES 
  READTEXT #MANAGERS.MANAGERIDS @ptrval @CharIndex 1; 
```

但是，在这种情况下，我不是 100%`READTEXT`的有效执行语句。

* * *

在更新您实际尝试做的事情之后，拆分功能怎么样？

首先，创建一个数字表：

```
SELECT n = IDENTITY(INT, 1, 1) INTO dbo.Numbers
FROM syscolumns CROSS JOIN syscolumns AS c2;

CREATE UNIQUE CLUSTERED INDEX n ON dbo.Numbers(n); 
```

在我的 SQL Server 2000 系统上，这会创建 66,000 多行，因此它将支持超过 64K 的字符串。如果您的字符串比这更长，您可能需要添加一个额外的交叉连接。

现在，创建一个将处理 NTEXT 的拆分函数（您会发现现在大多数都不会打扰，因为 NTEXT 已被弃用并且大多数人已经能够完全放弃 SQL Server 2000）。我不记得我最初是从哪里采购这个的，但我已经使用了好几年了：

```
ALTER FUNCTION dbo.Split_NTEXT
(
  @list      NTEXT,
  @delimiter CHAR(1)
)
RETURNS @table TABLE
(
  string NVARCHAR(4000)
)
AS
BEGIN
  DECLARE @chunks TABLE (chunk NVARCHAR(4000) NOT NULL);

  DECLARE @chunk NVARCHAR(4000), @p INT, @ml INT, @e INT;

  SELECT @p = 1, @ml = 3998;

  WHILE (DATALENGTH(@list)/2) - (@p-1) >= @ml
  BEGIN
   SET @chunk = SUBSTRING(@list, @p, @ml);
   SET @e = @ml - CHARINDEX(@delimiter, REVERSE(@chunk));
   INSERT @chunks(chunk) SELECT @delimiter + SUBSTRING(@chunk, 1, @e) + @delimiter;
   SET @p = @p - 1 + @e + 2;
  END
  INSERT @chunks(chunk) SELECT @delimiter + SUBSTRING(@list, @p, @ml) + @delimiter;

  INSERT @table(string) SELECT s = LTRIM(RTRIM(SUBSTRING(s.chunk, n.n + 1,
        CHARINDEX(@delimiter, s.chunk, n.n + 1) - n.n - 1)))
      FROM dbo.Numbers AS n INNER JOIN @chunks AS s 
        ON n.n <= LEN(s.chunk) - 1
        AND SUBSTRING(s.chunk, n.n, 1) = @delimiter;
  RETURN;
END
GO 
```

用法：

```
SELECT string
  FROM dbo.Split_NTEXT(N'foo,bar,blat,mort,splunge', ','); 
```

结果：

```
string
--------
foo
bar
blat
mort
splunge 
```

[与CLR](http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings)或[TVP](http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql)等更现代的方法相比，这不会特别快，但应该比处理 READTEXT 或其他您可能认为在 2000 年被困住的神秘方法要少得多。

# drupal - 如何在drupal中将用户输入添加到自己的图像效果模块？

> ID：12111933
> 
> 赞同：0
> 
> 时间：2012-08-24T15:02:36.090
> 
> 标签：drupal, input, effect

我很高兴地设法编写了我自己的模块，该模块在 drupal 标准下拉列表中添加了一个高斯模糊滤镜效果选项：

```
function image_blur_image_effect_info() {

    return array(
        'image_blur' => array(
            'label' => t('Gaussian Blur'),
            'help' => t('Gaussian blur the image by a (currently) fixed amount.'),
            'effect callback' => 'image_blur_gaussian_blur'
        )
    ); 
} 
```

这会将“高斯模糊”添加到下拉列表中，并且该功能甚至在应用于图像时也可以工作。

```
function image_blur_gaussian_blur(stdClass $image) {
    boxBlurImage($image->resource, 10, 2); 

    return true; 
} 
```

但是，当我选择效果并单击应用时，我希望有可能让用户输入模糊的半径，就像使用 drupal 的“调整大小”、“缩放”而不是只是应用具有固定值的函数等等：

```
function image_blur_gaussian_blur(stdClass $image, **$radius**) {
    boxBlurImage($image->resource, **$radius**, 2); 

    return true; 
} 
```

我无法从 image.inc / 中的其他函数代码中自己弄清楚：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:26:24.760

您需要在`form callback`info 数组中添加一个属性，即：

> 将返回 $form 数组的函数的名称，该数组提供此图像效果的配置表单。

例如：

```
function image_blur_image_effect_info() {
  return array(
    'image_blur' => array(
      'label' => t('Gaussian Blur'),
      'help' => t('Gaussian blur the image by a (currently) fixed amount.'),
      'effect callback' => 'image_blur_gaussian_blur',
      'form callback' => 'image_blur_form'
    )
  ); 
}

function image_blur_form($data) {
  $form['radius'] = array(
    '#type' => 'textfield',
    '#title' => t('Radius'),
    '#required' => TRUE,
    '#default_value' => isset($data['radius']) ? $data['radius'] : '', 
    '#size' => 10,
    '#element_validate' => array('image_effect_integer_validate'), 
  );

  // Add any other elements here.

  return $form;
} 
```

然后，您将可以访问`$data['radius']`效果回调函数，该函数将包含通过管理表单提交的值。

确保在更改代码后清除缓存，否则将不会拾取新的挂钩数据。

# vim - 使用成对自动关闭时如何在 Vim 中设置自动插入新行和缩进

> ID：12111934
> 
> 赞同：5
> 
> 时间：2012-08-24T15:02:38.300
> 
> 标签：vim, indentation

我找到了一个名为[vim-autoclose](https://github.com/Townk/vim-autoclose)的 Vim 自动配对插件。它就像其他 IDE 一样工作得很好。例如，当您键入时，`{`它会给您`{|}`（“|”代表光标）。然后，如果您按“Enter”，则`{|}`变为：

```
{

      |

} 
```

这是我需要的，但不幸的是它禁用了我的中文输入法应用程序，所以我不得不放弃它。

我尝试过其他自动关闭插件，但没有一个可以以这种方式自动关闭。我找到了一种让自动关闭功能像上面那样工作的方法。

```
:autocmd FileType c,java,javascript ino <buffer> { <C-G>u{<CR>}<Esc>O<C-T> 
```

但是shiftwidth有问题。例如，如果我`:set shiftwidth=4`之间的新行将`{}`有 8 个空格缩进。新行中的缩进使 shiftwidth 加倍。

我的问题是如何将新行的缩进设置为与 shiftwidth 相同的空格缩进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:23:28.397

```
inoremap { {<CR><CR>}<C-o>k<C-o>S 
```

似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T15:32:14.810

设置后`set ai`并`set smartindent`在 vimrc 中

使用以下

`inoremap {<CR> {<CR>}<ESC>O`

应该管用。最后一个字符是`capital O`，而不是零。

# angularjs - AngularJS 对跨域资源执行 OPTIONS HTTP 请求

> ID：12111936
> 
> 赞同：267
> 
> 时间：2012-08-24T15:02:49.887
> 
> 标签：angularjs, cors, cross-domain, preflight

我正在尝试将 AngularJS 设置为与跨域资源通信，其中提供我的模板文件的资产主机位于不同的域中，因此 Angular 执行的 XHR 请求必须是跨域的。我已经为 HTTP 请求添加了适当的 CORS 标头到我的服务器以使其工作，但它似乎不起作用。问题是当我在浏览器（chrome）中检查 HTTP 请求时，发送到资产文件的请求是一个 OPTIONS 请求（它应该是一个 GET 请求）。

我不确定这是否是 AngularJS 中的错误，或者我是否需要配置一些东西。据我了解，XHR 包装器无法发出 OPTIONS HTTP 请求，因此看起来浏览器正在尝试确定是否“允许”在执行 GET 请求之前先下载资产。如果是这种情况，那么我是否还需要使用资产主机设置 CORS 标头（Access-Control-Allow-Origin： [http://asset.host.. ）？](http://asset.host..)

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-08-24T15:23:56.413

OPTIONS 请求绝不是 AngularJS 错误，这就是跨域资源共享标准要求浏览器的行为方式。请参阅此文档：[https://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)，在“概述”部分中它说：

> 跨域资源共享标准通过添加新的 HTTP 标头来工作，这些标头允许服务器描述允许使用 Web 浏览器读取该信息的源集。此外，对于可能对用户数据造成副作用的 HTTP 请求方法（特别是对于 GET 以外的 HTTP 方法，或者对于某些 MIME 类型的 POST 使用）。该规范要求浏览器“预检”请求，使用 HTTP OPTIONS 请求标头从服务器请求支持的方法，然后在服务器“批准”后，使用实际的 HTTP 请求方法发送实际请求。服务器还可以通知客户端是否应随请求发送“凭据”（包括 Cookie 和 HTTP 身份验证数据）。

很难提供适用于所有 WWW 服务器的通用解决方案，因为设置会因服务器本身和您打算支持的 HTTP 动词而异。我会鼓励您阅读这篇出色的文章 ( [http://www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/) )，其中包含有关需要由服务器发送的确切标头的更多详细信息。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2013-05-15T16:40:51.857

对于 Angular 1.2.0rc1+，您需要添加一个 resourceUrlWhitelist。

**1.2：**发布版本他们添加了一个 escapeForRegexp 函数，所以你不再需要转义字符串。您可以直接添加网址

```
'http://sub*.assets.example.com/**' 
```

确保为子文件夹添加**。这是 1.2 的工作 jsbin：http: [//jsbin.com/olavok/145/edit](http://jsbin.com/olavok/145/edit)

* * *

**1.2.0rc：**如果你还在使用 rc 版本，Angular 1.2.0rc1 的解决方案如下：

```
.config(['$sceDelegateProvider', function($sceDelegateProvider) {
     $sceDelegateProvider.resourceUrlWhitelist(['self', /^https?:\/\/(cdn\.)?yourdomain.com/]);
 }]) 
```

这是一个适用于 1.2.0rc1 的 jsbin 示例：http: [//jsbin.com/olavok/144/edit](http://jsbin.com/olavok/144/edit)

* * *

**Pre 1.2：**对于旧版本（参考[http://better-inter.net/enabling-cors-in-angular-js/](http://better-inter.net/enabling-cors-in-angular-js/)），您需要在配置中添加以下 2 行：

```
$httpProvider.defaults.useXDomain = true;
delete $httpProvider.defaults.headers.common['X-Requested-With']; 
```

这是一个适用于 1.2 之前版本的 jsbin 示例：http: [//jsbin.com/olavok/11/edit](http://jsbin.com/olavok/11/edit)

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2013-12-11T10:07:42.710

**注意：**不确定它是否适用于最新版本的 Angular。

**原来的：**

也可以覆盖 OPTIONS 请求（仅在 Chrome 中测试过）：

```
app.config(['$httpProvider', function ($httpProvider) {
  //Reset headers to avoid OPTIONS request (aka preflight)
  $httpProvider.defaults.headers.common = {};
  $httpProvider.defaults.headers.post = {};
  $httpProvider.defaults.headers.put = {};
  $httpProvider.defaults.headers.patch = {};
}]); 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2013-04-21T14:51:24.653

Your service must answer an `OPTIONS` request with headers like these:

```
Access-Control-Allow-Origin: [the same origin from the request]
Access-Control-Allow-Methods: GET, POST, PUT
Access-Control-Allow-Headers: [the same ACCESS-CONTROL-REQUEST-HEADERS from request] 
```

Here is a good doc: [http://www.html5rocks.com/en/tutorials/cors/#toc-adding-cors-support-to-the-server](http://www.html5rocks.com/en/tutorials/cors/#toc-adding-cors-support-to-the-server)

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2013-03-09T02:45:37.380

同一份文件说

与简单请求（上面讨论过）不同，“预检”请求首先向另一个域上的资源发送 HTTP OPTIONS 请求标头，以确定实际请求是否可以安全发送。跨站点请求是这样预检的，因为它们可能对用户数据有影响。特别是，在以下情况下会预检请求：

> 它使用 GET 或 POST 以外的方法。此外，如果 POST 用于发送 Content-Type 不是 application/x-www-form-urlencoded、multipart/form-data 或 text/plain 的请求数据，例如，如果 POST 请求向服务器发送 XML 有效负载使用 application/xml 或 text/xml，然后预检请求。
> 
> 它在请求中设置自定义标头（例如，请求使用诸如 X-PINGOTHER 之类的标头）

当原始请求是没有自定义标头的 Get 时，浏览器不应像现在那样发出 Options 请求。问题是它会生成一个标题 X-Requested-With 来强制选项请求。有关如何删除此标头的信息，请参见[https://github.com/angular/angular.js/pull/1454](https://github.com/angular/angular.js/pull/1454)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-10-14T17:11:17.603

如果你使用的是 nodeJS 服务器，你可以使用这个库，它对我来说很好[https://github.com/expressjs/cors](https://github.com/expressjs/cors)

```
var express = require('express')
  , cors = require('cors')
  , app = express();

app.use(cors()); 
```

然后你可以做一个`npm update`.

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2016-02-25T12:59:46.653

这解决了我的问题：

```
$http.defaults.headers.post["Content-Type"] = "text/plain"; 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-06-23T14:45:31.720

这是我在 ASP.NET 上解决此问题的方法

*   首先，您应该添加 nuget 包**Microsoft.AspNet.WebApi.Cors**

*   然后修改文件 App_Start\WebApiConfig.cs

    ```
    public static class WebApiConfig    
    {
       public static void Register(HttpConfiguration config)
       {
          config.EnableCors();

          ...
       }    
    } 
    ```

*   在您的控制器类上添加此属性

    ```
    [EnableCors(origins: "*", headers: "*", methods: "*")]
    public class MyController : ApiController
    {  
        [AcceptVerbs("POST")]
        public IHttpActionResult Post([FromBody]YourDataType data)
        {
             ...
             return Ok(result);
        }
    } 
    ```

*   我能够通过这种方式将 json 发送到操作

    ```
    $http({
            method: 'POST',
            data: JSON.stringify(data),
            url: 'actionurl',
            headers: {
                'Content-Type': 'application/json; charset=UTF-8'
            }
        }).then(...) 
    ```

*参考：* [在 ASP.NET Web API 2 中启用跨域请求](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api#enable-cors)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-03-14T15:21:49.427

不知何故，我通过改变来修复它

```
<add name="Access-Control-Allow-Headers" 
     value="Origin, X-Requested-With, Content-Type, Accept, Authorization" 
     /> 
```

至

```
<add name="Access-Control-Allow-Headers" 
     value="Origin, Content-Type, Accept, Authorization" 
     /> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-27T08:38:57.557

在 pkozlowski 的评论中完美描述。我有使用 AngularJS 1.2.6 和 ASP.NET Web Api 的工作解决方案，但是当我将 AngularJS 升级到 1.3.3 时，请求失败。

*   Web Api 服务器的解决方案是在配置方法的开头添加对 OPTIONS 请求的处理（更多信息[在这篇博](http://blog.rfaisal.com/2014/01/14/building-your-own-api-and-securing-it-with-oauth-2-0-in-asp-net-webapi-2/)文中）：

    ```
    app.Use(async (context, next) =>
    {
        IOwinRequest req = context.Request;
        IOwinResponse res = context.Response;
        if (req.Path.StartsWithSegments(new PathString("/Token")))
        {
            var origin = req.Headers.Get("Origin");
            if (!string.IsNullOrEmpty(origin))
            {
                res.Headers.Set("Access-Control-Allow-Origin", origin);
            }
            if (req.Method == "OPTIONS")
            {
                res.StatusCode = 200;
                res.Headers.AppendCommaSeparatedValues("Access-Control-Allow-Methods", "GET", "POST");
                res.Headers.AppendCommaSeparatedValues("Access-Control-Allow-Headers", "authorization", "content-type");
                return;
            }
        }
        await next();
    }); 
    ```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-26T06:29:25.870

如果您将 Jersey 用于 REST API，您可以执行以下操作

您不必更改您的 Web 服务实现。

我将为 Jersey 2.x 解释

1）首先添加一个ResponseFilter如下图

```
import java.io.IOException;

import javax.ws.rs.container.ContainerRequestContext;
import javax.ws.rs.container.ContainerResponseContext;
import javax.ws.rs.container.ContainerResponseFilter;

public class CorsResponseFilter implements ContainerResponseFilter {

@Override
public void filter(ContainerRequestContext requestContext,   ContainerResponseContext responseContext)
    throws IOException {
        responseContext.getHeaders().add("Access-Control-Allow-Origin","*");
        responseContext.getHeaders().add("Access-Control-Allow-Methods", "GET, POST, DELETE, PUT");

  }
} 
```

2）然后在 web.xml 中，在 jersey servlet 声明中添加以下内容

```
 <init-param>
        <param-name>jersey.config.server.provider.classnames</param-name>
        <param-value>YOUR PACKAGE.CorsResponseFilter</param-value>
    </init-param> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-11-01T20:52:31.217

对于带有 API 的 IIS MVC 5 / Angular CLI（是的，我很清楚您的问题出在 Angular JS）项目中，我执行了以下操作：

**`<system.webServer>`节点下的**web.config****

 **```
 <staticContent>
      <remove fileExtension=".woff2" />
      <mimeMap fileExtension=".woff2" mimeType="font/woff2" />
    </staticContent>
    <httpProtocol>
      <customHeaders>
        <clear />
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Headers" value="Content-Type, atv2" />
        <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS"/>
      </customHeaders>
    </httpProtocol> 
```

**全局.asax.cs**

```
protected void Application_BeginRequest() {
  if (Request.Headers.AllKeys.Contains("Origin", StringComparer.OrdinalIgnoreCase) && Request.HttpMethod == "OPTIONS") {
    Response.Flush();
    Response.End();
  }
} 
```

这应该可以解决 MVC 和 WebAPI 的问题，而无需执行所有其他操作。然后我在 Angular CLI 项目中创建了一个 HttpInterceptor，它自动添加了相关的标头信息。希望这可以帮助遇到类似情况的人。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-11T12:42:33.493

我放弃了尝试解决这个问题。

我的 IIS web.config 中有相关的“ `Access-Control-Allow-Methods`”，我尝试将配置设置添加到我的 Angular 代码中，但是在花了几个小时试图让 Chrome 调用跨域 JSON Web 服务之后，我悲惨地放弃了。

最后，我添加了一个愚蠢的 ASP.Net 处理程序网页，让它*调用*我的 JSON Web 服务，并返回结果。它在 2 分钟内启动并运行。

这是我使用的代码：

```
public class LoadJSONData : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";

        string URL = "......";

        using (var client = new HttpClient())
        {
            // New code:
            client.BaseAddress = new Uri(URL);
            client.DefaultRequestHeaders.Accept.Clear();
            client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
            client.DefaultRequestHeaders.Add("Authorization", "Basic AUTHORIZATION_STRING");

            HttpResponseMessage response = client.GetAsync(URL).Result;
            if (response.IsSuccessStatusCode)
            {
                var content = response.Content.ReadAsStringAsync().Result;
                context.Response.Write("Success: " + content);
            }
            else
            {
                context.Response.Write(response.StatusCode + " : Message - " + response.ReasonPhrase);
            }
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

在我的 Angular 控制器中......

```
$http.get("/Handlers/LoadJSONData.ashx")
   .success(function (data) {
      ....
   }); 
```

我敢肯定有一种更简单/更通用的方法可以做到这一点，但生命太短暂了......

这对我有用，我现在可以继续正常工作了！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-24T15:44:52.747

晚会有点晚了，

如果您使用 Angular 7（或 5/6/7）和 PHP 作为 API 并且仍然收到此错误，请尝试将以下标头选项添加到端点（PHP API）。

```
 header("Access-Control-Allow-Origin: *");
 header("Access-Control-Allow-Methods: PUT, GET, POST, PUT, OPTIONS, DELETE, PATCH");
 header("Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept, Authorization"); 
```

**注意**：只需要`Access-Control-Allow-Methods`. 但是，我在这里粘贴另外两个`Access-Control-Allow-Origin`and `Access-Control-Allow-Headers`，仅仅是因为您需要正确设置所有这些，以便 Angular App 正确地与您的 API 对话。

希望这可以帮助某人。

干杯。**

# ruby - 用于多维数据的 Ruby 数据管理器

> ID：12111937
> 
> 赞同：0
> 
> 时间：2012-08-24T15:02:49.843
> 
> 标签：ruby, multidimensional-array

我正在寻找一个用于处理 2 或 3 或 4 维数据的 RUBY 模块（可能是 gem）。没有 UI，只有数据管理部分。它可能是阵列上的单板。我还需要排序和过滤等功能。例如，这只是一个例子:)

```
a = MultiDim.new(2)
a.dim_name(0) = "Costs"
a.dim_name(1) = "Years"
a.load_data....
a.filter(:years, :non_nil)
a.sort(:costs)
a.acccess(years: 1990..1999) => a hash by costs. 
```

等等等等等等

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-05T03:40:50.717

[daru](http://github.com/v0dro/daru)是用于 ruby​​ 中数据分析的 gem。

它正在积极开发中，您可以期待在未来几周内有一些非常令人兴奋的功能。

它适用于 2 个基本数据结构`Vector`和`DataFrame`.

您可以先创建一个数据框：

```
df = Daru::DataFrame.new({costs: [100,200,300,400], years: [2013,2014,2012,2011]}) 
```

您可以调用向量并以这种方式对其进行排序：

```
df.costs.sort 
```

过滤数据：

```
df.keep_row_if do |row|
  row[:costs] == 100
end 
```

这将产生一个像这样的 DataFrame：

```
 costs years 
0   100  2013 
```

对于多维数据，您可以将 DataFrame 嵌套在 DataFrame 中。

这是我的第一个答案，所以请原谅我的任何疑虑！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:03:41.423

听起来您希望 Ruby 的内置[`Matrix`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/matrix/rdoc/Matrix.html)类作为起点。

排序是从 Enumerable 继承的，但我会使用[`sort_by`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-sort_by)over[`sort`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-sort)来提高速度、简单性并取决于您的需要。`sort_by`在我看来，它更适合处理多维数组。

# javascript - 如何在不重新加载整个页面的情况下重新加载网页中的组件

> ID：12111939
> 
> 赞同：1
> 
> 时间：2012-08-24T15:02:54.990
> 
> 标签：javascript, html

当另一个组件更改时，我希望能够在我的网页中加载单个组件

```
<input ..... onchange="callFunctionToReloadNextTag()">
<input ... />      <--This is the tag i want to reload 
```

您可以重新加载实际组件本身，而不仅仅是组件中的内容吗？

当我说重新加载组件本身时，我的意思是...如果 A = name 然后 B = TextField，如果 A = date 然后 B = DateField

**编辑**

这就是我到目前为止所拥有的

```
<script>
function checkForChange() {
var approvalStatus = document.getElementById('licensingStatus').value;
if(approvalStatus == "Pass"){
    document.getElementById('licensingApprovalDate').setAttribute("validators", "validators:maxDateToday,required");
} else {
    document.getElementById('licensingApprovalDate').setAttribute("validators", "validators:maxDateToday");
}   
}
</script> 
```

这种变化正在正确地向标签添加新属性，但网页上没有显示更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:04:16.883

Ajax 只是意味着“在不离开页面的情况下从 JavaScript 发出 HTTP 请求”

您可以向提供一些数据的 Web 服务发出 HTTP 请求，然后修改 DOM 以根据该数据更改输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:08:33.190

调用该函数并对该函数执行 ajax 操作，并使用元素 ID 使用 DOM 更改子内容。

请参阅此页面[http://www.yourhtmlsource.com/javascript/ajax.html](http://www.yourhtmlsource.com/javascript/ajax.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:16:41.527

一个新的答案，因为旧的答案似乎已被问题的编辑所淘汰。

*   那里根本没有 Ajax
*   HTML 中的任何地方都没有“验证器”属性

我将冒险猜测您有一些在页面加载时运行并查找您的非标准标记的函数，然后基于此分配事件处理程序。

您需要更改该代码，以便它可以处理该非标准属性的更改。

这可能涉及编写一个函数，该函数将删除它在页面加载时分配的所有事件处理程序，然后重新运行分配函数。

# c++ - 旋转模型“比较正确”的问题

> ID：12111942
> 
> 赞同：1
> 
> 时间：2012-08-24T15:03:04.717
> 
> 标签：c++, opengl, rotation

我遇到的问题如下。当我向上（俯仰）旋转我的宇宙飞船并在俯仰角上旋转整整 90 度时，它直立，然后尝试在 y 轴上再次旋转它，模型现在以与滚入相同的方式旋转起始位置。

现在我的问题是，我该如何解决这个问题？我怎样才能确保我的模型在我想要它滚动时总是滚动，当我想要它倾斜时总是倾斜等等。而不是它现在所做的。

我正在使用 c++ 和 opengl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:05:49.023

正如已经指出的那样，您看到[Gimbal Lock](http://en.wikipedia.org/wiki/Gimbal_lock)是由于您使用欧拉角执行旋转的方式。

然而，四元数并不是唯一的解决方案。您可以改为构造一个 4x4 矩阵来表示对象的当前方向，并在每次更改朝向时对其应用*相对旋转。*它并不完美，因为您需要跟踪每个对象的 16 个值而不是四元数的 4 个值，并且为了处理浮点舍入错误，您需要定期对事物进行归一化，这样您的方向矩阵就不会变成一个倾斜变换。另一方面，它在概念上很简单，而且组装起来也很快。

# android - 初始安装 APK 后后台堆栈上的重复活动

> ID：12111943
> 
> 赞同：1
> 
> 时间：2012-08-24T15:03:04.763
> 
> 标签：android, android-intent, android-lifecycle, android-install-apk

这有点难以解释（或短语作为问题），但我可以提供大量示例。Google Play 市场上的许多流行应用程序都会出现此问题。

我还可以使用 Google 自己的 IoSched 2012 应用程序来重现它。

示例：1) 从 Play 商店安装 IoSched [https://play.google.com/store/apps/details?id=com.google.android.apps.iosched&hl=en](https://play.google.com/store/apps/details?id=com.google.android.apps.iosched&hl=en)

2）在安装结束时，使用打开按钮（*这很重要）立即打开应用程序。不要在应用程序中执行任何操作。

3) 按设备上的 HOME 键。

4) 在您的应用程序列表中找到该应用程序并使用启动器重新启动它。

5) 再按一次HOME键，重复3、4几次。

6) 最后，使用启动器最后一次重新启动应用程序。

7) 按返回按钮。设备不会返回主屏幕，而是显示来自后台堆栈的初始活动的副本。相同活动的副本数将与您重复步骤 3 和 4 的次数一样多。

8) 我已经能够使用我自己的应用程序 IoSched2012、CraigsList、eBay 和 ConnectBot 应用程序来重现这一点。

9) 谷歌地球应用程序正常工作。

10) 如果您最初不使用 OPEN 按钮打开应用程序，而是使用主屏幕上的启动器，则应用程序将正常运行。

有没有人对解决这个问题有任何想法？

# plone - 缓存视图/视图方法通过 self.request 返回值

> ID：12111944
> 
> 赞同：3
> 
> 时间：2012-08-24T15:03:13.523
> 
> 标签：plone

plone.memoize 包提供了方便的帮助函数来缓存各种函数的值。

在当前 HTTP 请求 (self.request) 的生命周期内缓存视图/视图方法的值的最佳实践是什么。这在 plone.memoize 文档中并不完全清楚。

例子：

```
 class MyView(grok.View):

         # cache this by self.request
         def getExpensiveFunction(self):
               .... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T15:40:58.823

由于 BrowserPage 视图实例的生命周期通常已经是请求的持续时间，因此您通常也可以使用`plone.memoize.instance`memoizing 装饰器：

```
from plone.memoize.instance import memoize

class MyView(grok.View):

    @memoize
    def getExpensiveFunction(self):
        # .... 
```

毕竟，BrowserPage 通常会针对给定的 URL 进行查找，在查找时实例化，并在生成视图时丢弃。一个新的请求会产生一个新的实例。

view memoizer 存储当前请求上的缓存，并添加当前上下文路径（或上下文的 id，如果没有路径）作为缓存键。如果在请求期间在不同的位置查找视图，您可以使用它而不是实例记忆器：

```
from plone.memoize.view import memoize

class MyView(grok.View):

    @memoize
    def getExpensiveFunction(self):
        # .... 
```

实用程序视图，诸如此类`@@plone_context`，从`plone.memoize.view.memoize`.

如果您的昂贵方法*独立*于视图上下文，请使用`memoize_contextless`装饰器；这从缓存键中省略了视图上下文路径：

```
from plone.memoize.view import memoize_contextless

class MyView(grok.View):

    @memoize_contextless
    def getExpensiveFunction(self):
        # .... 
```

因此，如果`.getExpensiveFunction()`无论此视图的上下文是什么（无论是站点根目录还是内容树深处的某个位置）都返回相同的信息，请使用该`_contextless`变体，以便您仅存储一份结果副本。

# wpf - 如何为 WPF 和 Silverlight 重用相同的视图？

> ID：12111949
> 
> 赞同：0
> 
> 时间：2012-08-24T15:03:30.123
> 
> 标签：wpf, silverlight, mvvm, code-reuse

Silverlight 和 WPF 是否可以使用相同的视图？我已经将一个小的 MVVM Silverlight 项目移植到 WPF。我可以重用 all 而不是 App/MainWindow 和 Views。

我怎样才能重用视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:18:30.493

它们构建在不同的堆栈上——Silverlight 使用 XAML 的子集和不同版本的 CLR。话虽如此，您的许多视图的 XAML 都可以重用，也许全部重用。您可能无法按原样重用您的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:46:54.243

如果您的 xaml 仅包含 Silverlight 的基础知识，则可以重用这些视图。换句话说，不要使用工具包控件，除非 WPF 工具包也支持它们。不要在 Silverlight xaml 中使用表达式交互，因为它们不在 WPF 中。Silverlight 在某种程度上是 WPF 的“子集”。Silverlight 中的所有基本控件（例如：Button、ListBox、Grid）都具有相同的命名空间和它们的 WPF 对应项。大多数（也许全部）甚至具有相同的属性。可以这样做，但您需要小心并首先针对 Silverlight 进行设计。

# linux - 在新的 linux 内核中，上下文切换要慢得多

> ID：12111954
> 
> 赞同：101
> 
> 时间：2012-08-24T15:03:54.613
> 
> 标签：linux, multithreading, linux-kernel, kernel, ubuntu-12.04

我们正在寻求将我们服务器上的操作系统从 Ubuntu 10.04 LTS 升级到 Ubuntu 12.04 LTS。不幸的是，从 2.6 内核到 3.2 内核，运行已变为可运行的线程的延迟似乎显着增加。事实上，我们得到的延迟数字令人难以置信。

让我更具体地了解测试。我们有一个运行两个线程的程序。第一个线程获取当前时间（使用 RDTSC 以刻度为单位），然后每秒发出一次条件变量信号。第二个线程等待条件变量并在收到信号时唤醒。然后它获取当前时间（使用 RDTSC 以刻度为单位）。第二个线程中的时间与第一个线程中的时间之间的差被计算并显​​示在控制台上。在此之后，第二个线程再次等待条件变量。大约第二次通过后，第一个线程将再次发出信号。

因此，简而言之，我们*通过条件变量延迟测量获得一个线程到线程的通信，*结果是每秒一次。

在内核 2.6.32 中，此延迟大约为 2.8-3.5 us，这是合理的。在内核 3.2.0 中，此延迟已增加到大约 40-100 us。我已经排除了两台主机之间硬件的任何差异。它们在相同的硬件上运行（双插槽 X5687 {Westmere-EP} 处理器以 3.6 GHz 运行，超线程、speedstep 和所有 C 状态均已关闭）。测试应用程序更改线程的亲和性以在同一套接字的独立物理内核上运行它们（即，第一个线程在 Core 0 上运行，第二个线程在 Core 1 上运行），因此不会出现线程反弹核心或套接字之间的弹跳/通信。

两台主机之间的唯一区别是一台运行内核 2.6.32-28（快速上下文切换框）的 Ubuntu 10.04 LTS，另一台运行内核 3.2.0-23（慢速上下文）的最新 Ubuntu 12.04 LTS开关盒）。所有 BIOS 设置和硬件都是相同的。

内核中是否有任何更改可以解释线程被调度运行所需的时间这种荒谬的减慢？

**更新：** 如果您想在您的主机和 linux 版本上运行测试，我已将[代码发布到 pastebin](http://pastebin.com/3sx8Vhf1)以供您阅读。编译：

```
g++ -O3 -o test_latency test_latency.cpp -lpthread 
```

运行（假设您至少有一个双核盒子）：

```
./test_latency 0 1 # Thread 1 on Core 0 and Thread 2 on Core 1 
```

**更新 2**：经过内核参数、内核更改帖子和个人研究的大量搜索之后，我已经弄清楚了问题所在，并将解决方案发布为这个问题的答案。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-08-24T22:10:54.317

*在最近的内核中，坏线程唤醒性能问题*的解决方案与从旧内核中使用的驱动程序切换到`intel_idle`cpuidle 驱动程序有关。`acpi_idle`可悲的是，`intel_idle`驱动程序忽略了 C 状态的用户 BIOS 配置，并*随心所欲地跳舞*。换句话说，即使您完全禁用 PC（或服务器）BIOS 中的所有 C 状态，此驱动程序仍会在短暂不活动期间强制它们打开，这几乎总是会发生，除非一个消耗所有核心的综合基准测试（例如，压力） 在跑。您可以在大多数兼容硬件上使用出色的 Google [i7z 工具](http://code.google.com/p/i7z/)监控 C 状态转换以及与处理器频率相关的其他有用信息。

要查看您的设置中当前处于活动状态的 cpuidle 驱动程序，只需在以下部分中对`current_driver`文件进行分类：`cpuidle``/sys/devices/system/cpu`

```
cat /sys/devices/system/cpu/cpuidle/current_driver 
```

如果您希望现代 Linux 操作系统具有尽可能低的上下文切换延迟，请添加以下内核启动参数以禁用所有这些省电功能：

在 Ubuntu 12.04 上，您可以通过将它们添加到`GRUB_CMDLINE_LINUX_DEFAULT`条目中`/etc/default/grub`然后运行`update-grub`​​. 要添加的引导参数是：

```
intel_idle.max_cstate=0 processor.max_cstate=0 idle=poll 
```

以下是有关三个引导选项的作用的详细信息：

设置`intel_idle.max_cstate`为零会将您的 cpuidle 驱动程序恢复为`acpi_idle`（至少根据该选项的文档），或者完全禁用它。在我的盒子上它被完全禁用（即，显示`current_driver`文件`/sys/devices/system/cpu/cpuidle`会产生输出`none`）。在这种情况下，第二个引导选项`processor.max_cstate=0`是不必要的。但是，文档指出将驱动程序的 max_cstate 设置为零`intel_idle`应该将操作系统恢复为`acpi_idle`驱动程序。因此，我输入了第二个引导选项以防万一。

该`processor.max_cstate`选项将`acpi_idle`驱动程序的最大 C 状态设置为零，希望也禁用它。我没有可以对此进行测试的系统，因为`intel_idle.max_cstate=0`在我可用的所有硬件上完全取消了 cpuidle 驱动程序。但是，如果您的安装确实将您从第一个引导选项恢复`intel_idle`为`acpi_idle`仅使用第一个引导选项，请让我知道第二个选项是否`processor.max_cstate`执行了评论中记录的操作，以便我可以更新此答案。

最后，三个参数中的最后一个，`idle=poll`是一个真正的权力猪。它将禁用 C1/C1E，这将以更多的功耗为代价消除最后剩余的延迟，因此仅在真正需要时才使用它。对于大多数人来说，这太过分了，因为 C1* 延迟并没有那么大。使用我在原始问题中描述的硬件上运行的测试应用程序，延迟从 9 us 变为 3 us。这对于高度延迟敏感的应用程序（例如，金融交易、高精度遥测/跟踪、高频数据采集等）来说无疑是一个显着的减少，但对于绝大多数人来说可能不值得遭受电力损失。桌面应用程序。唯一确定的方法是分析您的应用程序在性能方面的改进与性能对比。

**更新：**

在使用各种`idle=*`参数进行额外测试后，我发现设置`idle`为`mwait`如果您的硬件支持是一个更好的主意。似乎这些`MWAIT/MONITOR`指令的使用允许 CPU 进入 C1E，而不会将任何明显的延迟添加到线程唤醒时间。使用`idle=mwait`，您将获得更低的 CPU 温度（与 相比`idle=poll`）、更少的功耗，并且仍然保持轮询空闲循环的出色低延迟。因此，基于这些发现，我为低 CPU 线程唤醒延迟而更新的推荐引导参数集是：

```
intel_idle.max_cstate=0 processor.max_cstate=0 idle=mwait 
```

使用`idle=mwait`而不是`idle=poll`也可能有助于启动 Turbo Boost（通过帮助 CPU 保持低于其 TDP [热设计功率]）和超线程（MWAIT 是同时不消耗整个物理内核的理想机制）时间避免较高的 C 状态）。然而，这尚未在测试中得到证明，我将继续这样做。

**更新 2：**

`mwait`idle 选项[已从较新的 3.x 内核](https://lkml.org/lkml/2013/2/10/21)中删除（感谢用户 ck_ 的更新）。这给我们留下了两个选择：

`idle=halt`- 应该可以正常工作`mwait`，但要测试以确保您的硬件就是这种情况。该`HLT`指令几乎等同于`MWAIT`状态提示 0。问题在于退出 HLT 状态需要中断，而可以使用内存写入（或中断）来退出 MWAIT 状态。根据 Linux 内核在其空闲循环中使用的内容，这可能会使 MWAIT 更有效率。所以，正如我所说的测试/配置文件，看看它是否满足您的延迟需求......

和

`idle=poll`- 最高性能的选择，以牺牲电力和热量为代价。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T16:43:25.817

也许变慢的是 futex，它是条件变量的构建块。这将带来一些启示：

```
strace -r ./test_latency 0 1 &> test_latency_strace & sleep 8 && killall test_latency 
```

然后

```
for i in futex nanosleep rt_sig;do echo $i;grep $i test_latency_strace | sort -rn;done 
```

这将显示有趣的系统调用所花费的微秒，按时间排序。

在内核 2.6.32 上

```
$ for i in futex nanosleep rt_sig;do echo $i;grep $i test_latency_strace | sort -rn;done
futex
 1.000140 futex(0x601ac4, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601ac0, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000129 futex(0x601ac4, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601ac0, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000124 futex(0x601ac4, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601ac0, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000119 futex(0x601ac4, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601ac0, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000106 futex(0x601ac4, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601ac0, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000103 futex(0x601ac4, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601ac0, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000102 futex(0x601ac4, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601ac0, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 0.000125 futex(0x7f98ce4c0b88, FUTEX_WAKE_PRIVATE, 2147483647) = 0
 0.000042 futex(0x601b00, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000038 futex(0x601b00, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000037 futex(0x601b00, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000030 futex(0x601b00, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000029 futex(0x601b00, FUTEX_WAKE_PRIVATE, 1) = 0
 0.000028 futex(0x601b00, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000027 futex(0x601b00, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000018 futex(0x7fff82f0ec3c, FUTEX_WAKE_PRIVATE, 1) = 0
nanosleep
 0.000027 nanosleep({1, 0}, {1, 0}) = 0
 0.000019 nanosleep({1, 0}, {1, 0}) = 0
 0.000019 nanosleep({1, 0}, {1, 0}) = 0
 0.000018 nanosleep({1, 0}, {1, 0}) = 0
 0.000018 nanosleep({1, 0}, {1, 0}) = 0
 0.000018 nanosleep({1, 0}, {1, 0}) = 0
 0.000018 nanosleep({1, 0}, 0x7fff82f0eb40) = ? ERESTART_RESTARTBLOCK (To be restarted)
 0.000017 nanosleep({1, 0}, {1, 0}) = 0
rt_sig
 0.000045 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000040 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000038 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000035 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000034 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000033 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000032 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000032 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000031 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000031 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000028 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000028 rt_sigaction(SIGRT_1, {0x37f8c052b0, [], SA_RESTORER|SA_RESTART|SA_SIGINFO, 0x37f8c0e4c0}, NULL, 8) = 0
 0.000027 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000027 rt_sigaction(SIGRTMIN, {0x37f8c05370, [], SA_RESTORER|SA_SIGINFO, 0x37f8c0e4c0}, NULL, 8) = 0
 0.000027 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000025 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000025 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000023 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000023 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000022 rt_sigprocmask(SIG_UNBLOCK, [RTMIN RT_1], NULL, 8) = 0
 0.000022 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000021 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000021 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000021 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000021 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000021 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000019 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0 
```

在内核 3.1.9 上

```
$ for i in futex nanosleep rt_sig;do echo $i;grep $i test_latency_strace | sort -rn;done
futex
 1.000129 futex(0x601764, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601760, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000126 futex(0x601764, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601760, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000122 futex(0x601764, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601760, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000115 futex(0x601764, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601760, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000114 futex(0x601764, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601760, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000112 futex(0x601764, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601760, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 1.000109 futex(0x601764, FUTEX_WAKE_OP_PRIVATE, 1, 1, 0x601760, {FUTEX_OP_SET, 0, FUTEX_OP_CMP_GT, 1}) = 1
 0.000139 futex(0x3f8b8f2fb0, FUTEX_WAKE_PRIVATE, 2147483647) = 0
 0.000043 futex(0x601720, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000041 futex(0x601720, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000037 futex(0x601720, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000036 futex(0x601720, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000034 futex(0x601720, FUTEX_WAKE_PRIVATE, 1) = 1
 0.000034 futex(0x601720, FUTEX_WAKE_PRIVATE, 1) = 1
nanosleep
 0.000025 nanosleep({1, 0}, 0x7fff70091d00) = 0
 0.000022 nanosleep({1, 0}, {0, 3925413}) = ? ERESTART_RESTARTBLOCK (Interrupted by signal)
 0.000021 nanosleep({1, 0}, 0x7fff70091d00) = 0
 0.000017 nanosleep({1, 0}, 0x7fff70091d00) = 0
 0.000017 nanosleep({1, 0}, 0x7fff70091d00) = 0
 0.000017 nanosleep({1, 0}, 0x7fff70091d00) = 0
 0.000017 nanosleep({1, 0}, 0x7fff70091d00) = 0
 0.000017 nanosleep({1, 0}, 0x7fff70091d00) = 0
rt_sig
 0.000045 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000044 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000043 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000040 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000038 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000037 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000036 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000036 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000035 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000035 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000035 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000035 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000034 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000031 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000027 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000027 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000027 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000027 rt_sigaction(SIGRT_1, {0x3f892067b0, [], SA_RESTORER|SA_RESTART|SA_SIGINFO, 0x3f8920f500}, NULL, 8) = 0
 0.000026 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000026 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000025 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000024 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000023 rt_sigprocmask(SIG_UNBLOCK, [RTMIN RT_1], NULL, 8) = 0
 0.000023 rt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0
 0.000022 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
 0.000021 rt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0
 0.000019 rt_sigaction(SIGRTMIN, {0x3f89206720, [], SA_RESTORER|SA_SIGINFO, 0x3f8920f500}, NULL, 8) = 0 
```

我发现了这个[5 年前的错误报告](http://sourceware.org/bugzilla/show_bug.cgi?id=4274#c1)，其中包含一个“乒乓”性能测试，比较

1.  单线程 libpthread 互斥锁
2.  libpthread 条件变量
3.  普通的旧 Unix 信号

我不得不添加

```
#include <stdint.h> 
```

为了编译，我用这个命令做了

```
g++ -O3 -o condvar-perf condvar-perf.cpp -lpthread -lrt 
```

在内核 2.6.32 上

```
$ ./condvar-perf 1000000
NPTL
mutex                 elapsed:    29085 us; per iteration:   29 ns / 9.4e-05 context switches.
c.v. ping-pong test   elapsed:  4771993 us; per iteration: 4771 ns / 4.03 context switches.
signal ping-pong test elapsed:  8685423 us; per iteration: 8685 ns / 4.05 context switches. 
```

在内核 3.1.9 上

```
$ ./condvar-perf 1000000
NPTL
mutex                 elapsed:    26811 us; per iteration:   26 ns / 8e-06 context switches.
c.v. ping-pong test   elapsed: 10930794 us; per iteration: 10930 ns / 4.01 context switches.
signal ping-pong test elapsed: 10949670 us; per iteration: 10949 ns / 4.01 context switches. 
```

我得出的结论是，内核 2.6.32 和 3.1.9 之间的上下文切换确实变慢了，尽管没有您在内核 3.2 中观察到的那么多。我意识到这还没有回答你的问题，我会继续挖掘。

编辑：我发现更改进程的实时优先级（两个线程）可以提高 3.1.9 的性能以匹配 2.6.32。但是，在 2.6.32 上设置相同的优先级会使其速度变慢……看图 - 我会更多地研究它。

这是我现在的结果：

在内核 2.6.32 上

```
$ ./condvar-perf 1000000
NPTL
mutex                 elapsed:    29629 us; per iteration:   29 ns / 0.000418 context switches.
c.v. ping-pong test   elapsed:  6225637 us; per iteration: 6225 ns / 4.1 context switches.
signal ping-pong test elapsed:  5602248 us; per iteration: 5602 ns / 4.09 context switches.
$ chrt -f 1 ./condvar-perf 1000000
NPTL
mutex                 elapsed:    29049 us; per iteration:   29 ns / 0.000407 context switches.
c.v. ping-pong test   elapsed: 16131360 us; per iteration: 16131 ns / 4.29 context switches.
signal ping-pong test elapsed: 11817819 us; per iteration: 11817 ns / 4.16 context switches.
$ 
```

在内核 3.1.9 上

```
$ ./condvar-perf 1000000
NPTL
mutex                 elapsed:    26830 us; per iteration:   26 ns / 5.7e-05 context switches.
c.v. ping-pong test   elapsed: 12812788 us; per iteration: 12812 ns / 4.01 context switches.
signal ping-pong test elapsed: 13126865 us; per iteration: 13126 ns / 4.01 context switches.
$ chrt -f 1 ./condvar-perf 1000000
NPTL
mutex                 elapsed:    27025 us; per iteration:   27 ns / 3.7e-05 context switches.
c.v. ping-pong test   elapsed:  5099885 us; per iteration: 5099 ns / 4 context switches.
signal ping-pong test elapsed:  5508227 us; per iteration: 5508 ns / 4 context switches.
$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T15:08:37.787

由于**pstate**驱动程序与 c-states 是分开的，您可能还会看到处理器在更新的进程和 Linux 内核中单击。因此，此外，要禁用此功能，请使用以下内核参数：

`intel_pstate=disable`

# bash - 在 shell 中将变量从 MATLAB 解析到 Linux，反之亦然

> ID：12111957
> 
> 赞同：1
> 
> 时间：2012-08-24T15:04:04.950
> 
> 标签：bash, matlab, shell, parsing

我遇到了一个问题。我必须将 MATLAB 与 linux 一起使用。我需要将数据从 MATLAB 解析到 Linux，反之亦然。

例如

这一切都写在

```
basic.sh

this basic.sh has to be opened in MATLAB

 s=3     # is defined is MATLAB
##########################

for (( p=1 ; p<5; p++ ))     # from here starts the loop in Linux
do                                # is a command from Linux
echo "$p"                         # is a command from Linux
add= $p+s                         # should calulate in linux , is a command from Linux
add=add/5                         # should do in MATLAB 
done     

#########################
 add                              # should OUTPUT the value of add as there is no semicolumn in MATLAB 
```

请为这样一个小例子建议我一种可能的方法，其余的我将自己扩展它。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:28:54.220

好吧，您可以从终端调用 Matlab，然后运行一个命令：

```
$ matlab -nodesktop -nojvm -nosplash -r <YOUR_COMMAND> 
```

其中`<YOUR_COMMAND>`可以是一个 m 脚本/函数。它的输出可以重定向到 shellscripts，

```
$ matlab -nodesktop -nojvm -nosplash -r <YOUR_COMMAND> | ./basic.sh 
```

（您的脚本应该能够处理管道），或者整个命令可以嵌入到 shell 脚本中，

```
#!/bin/bash

s=$(matlab -nodesktop -nojvm -nosplash -r <FUNCTION_GENERATING_S>)

<code generating $add>

result=$(matlab -nodesktop -nojvm -nosplash -r <SOME_FUNCTION($add)>) 
```

当然，您也可以使用文件作为内存。Matlab部分：

```
s=3;      

fid = fopen('TMP.txt','w');
fprintf(fid, s);
fclose(fid);

!./basic.sh

fid = fopen('TMP.txt','r');
add = fscanf(fid, '%f');
fclose(fid); 
```

外壳脚本：

```
#!/bin/bash

s=$(cat TMP.txt)
for (( p=1; p<5; p++ ))     
do                            
    echo "$p" 
    add=$(($p+$s))
    add=add/5                      
done

echo $add > TMP.txt 
```

这样做的好处是 Matlab 和 shell 脚本之间有严格的分离，只有一个 m 文件就足够了。

当然，无论您选择哪种方式——您为什么首先要这样做？Matlab 可以完成 bash 的大部分功能，并且与平台无关（所以如果你切换到 MS Windows，它仍然可以工作）......所以你能澄清一下吗？

# javascript - typeahead bootstrap，当从菜单中选择或聚焦项目并获取值时触发

> ID：12111959
> 
> 赞同：4
> 
> 时间：2012-08-24T15:04:13.310
> 
> 标签：javascript, backbone.js, autocomplete, callback, twitter-bootstrap

通过使用预先输入引导程序，我想在从菜单中选择或聚焦某个项目时触发，以便设置与所选值相关的特定值。

请查看代码注释以准确理解我的意思。

```
element.typeahead({
    minLength: 3,
    source: function () {
        // users is a Backbone.Collection
        users = _.map(users, function(user) {
            return user.get('first_name')+' '+user.get('last_name');
        });

        return users;

    }
}).change(function (event) {
        // this function which is called when the user set a value 
        // should be able to get the user.get('id') of the selected user
        // any idea how to make it?
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:04:57.763

这可能对你有用。我使用了 Typeahead 的扩展，它允许您调用远程数据源。它带有一个`onselect()`回调函数，你可以在其中做你想做的事。

[预输入扩展 GIST](https://gist.github.com/1866577)

这是一些示例代码：

```
 initialization: function() {
        this.user = new User();
        // Or fetch the user so it has an id, etc.
    },
    initTypeahead: function() {
        var self = this;
        var element = this.$('#input');

        element.typeahead({
            source: userCollection.toJSON(),
            property: 'name',
            onselect: function(userObj) {  // This is the line to pay attention to
                var userModel = userCollection.get(userObj.id);
                // Do something with the userModel
            }
        });
    } 
```

所以基本上在我的代码中，当我查询我的数据库时，我会返回一个 JSON，它将每个选择的值设置为我从我的 ajax 传回的任何数据。

随着`onselect(obj)`我将 obj 传递到我的回调中，我碰巧只是将它作为数据附加到输入元素。但是您可以轻松添加自己的自定义代码，利用您已经拥有的用户数据 (user.id) 并执行您所做的任何事情以及您投入选择的值。`onselect()`这意味着，只要它在适当的范围内，user.id 就应该在您的回调中可用。

# c# - C++/CLI 字符串互操作

> ID：12111964
> 
> 赞同：5
> 
> 时间：2012-08-24T15:04:17.110
> 
> 标签：c#, wpf, string, interop, c++-cli

我正在为原生 c++ 类开发 C++/CLI 包装器。C++/CLI 包装器正在 WPF 应用程序中使用。我在尝试编组字符串时遇到了一个奇怪的问题。

WPF 应用程序将一个`System::String`对象传递给我的包装器。然后包装器将 转换为`System::String`本地`std::string`类所期望的。这一切都很好，但是一旦我将字符串传递给本机对象，它就是空的。

这是一些相关的代码

**WPF 事件处理程序 (C#)**

```
private void tbInputConfig_TextChanged(object sender, TextChangedEventArgs e)
{
    _OrionBasicApp.ConfigTemplateFile = tbInputConfig.Text;
} 
```

**包装类中的属性 (C++/CLI)**

```
void BasicApp::ConfigTemplateFile::set(String ^value)
{
    std::string val = marshal_as<std::string>(value);
    _NativeApp->setConfigTemplateFile(val);
} 
```

**本机代码 (C++)**

```
void Basic_App::setConfigTemplateFile(const std::string& template_file)
{
   m_gParams.configTemplateFile = template_file;
} 
```

因此，当我中断 WPF 应用程序并使用调试器进行跟踪时，String 对象看起来很好，`std::string val`编组看起来不错，但函数`template_file`中的参数`setConfigFile`是一个空字符串。当我退出本机函数时，我可以看到`std::string val`变量看起来仍然很好。

我尝试过使用`Marshal::StringToHGlobalAnsi`函数，它产生相同的结果。我尝试更改本机函数以获取字符串的副本而不是引用，这会产生有关无效内存块的异常（如果需要，我将发布确切的消息）。我试过在堆上分配字符串，没有运气。

现在是踢球者：本机代码是用 Microsoft Visual Studio 2008 编译的，而 wrapper + wpf 代码是用 2010 编译的。我希望这不是问题，因为我们将任何一个代码库迁移到另一个版本并不容易.

有任何想法吗？

**更新**

我能够将本机代码切换到 Visual Studio 2010，这确实解决了问题。（为什么微软必须让我的生活变得如此困难？）虽然我确实构建了系统，但该项目的负责人给我带来了这个解决方案的主要麻烦（他担心它可能无法正确运行或者我们将不得不切换依赖库）。

那么这个问题有没有不强制我切换 Visual Studio 版本的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:27:39.540

跨 DLL 边界传递 C++ 对象是个坏主意。 `std::string`不是导致您的问题的相同类型、布局或实现。

如果您通过 DLL 边界传递 BSTR（`SysStringAlloc`等）或 raw `char*`，并转换`std::string`为本机代码内部而不是包装器，您的问题就会消失。

此问题并非特定于 .NET 或 C++/CLI。任何将`std::string`实例从任何其他编译器版本传递到本机 DLL 的尝试都将失败。

示例修复：

```
void BasicApp::ConfigTemplateFile::set(String ^value)
{
    std::string val = marshal_as<std::string>(value);
    _NativeApp->setConfigTemplateFile(val.c_str(), val.size());
}

void Basic_App::setConfigTemplateFile(const char* template_file_content, size_t template_file_length)
{
   m_gParams.configTemplateFile = std::string(template_file_content, template_file_length);
} 
```

# objective-c - UIWebView 显示 HTML 太大

> ID：12111965
> 
> 赞同：0
> 
> 时间：2012-08-24T15:04:18.500
> 
> 标签：objective-c, ios

我正在尝试将 HTML 显示到 UiWebView 中，但它显示的 HTML 太大，并且只显示视图的部分内容。我曾尝试更改 Web 视图内容模式，但它不起作用。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:06:29.757

尝试定义视口：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

# php - 寻找代码失败的地方

> ID：12111971
> 
> 赞同：-4
> 
> 时间：2012-08-24T15:04:43.173
> 
> 标签：php, javascript, jquery, methods

看到这个 HTML 标记：

```
<input value="9961" name="c_id" id="c_id" type="hidden">
<input name="user_id" id="user_id" value="1" type="hidden">
<textarea id="comments" name="comments" style="width: 310px; resize: none; height: 75px"></textarea> 
```

然后我在 jQuery 中编写此代码以通过 .post 发送此数据：

```
$("#dialog-form").dialog({
    autoOpen: false,
    height: 220,
    width: 350,
    resizable: false,
    modal: true,
    buttons: {
        "Ok": function () {
            if ($('#comments').val() != '') {
                $.post("<?php echo site_url('wall/comment') ?>", {
                    value: $("#comments").val(),
                    user_id: $('#user_id').val(),
                    c_id: $("#c_id").val(),
                    is_post: true
                });
                $(this).dialog("close");
                $(location).attr('href', "<?php echo site_url(); ?>");
            }
        },
        "Cancelar": function () {
            $(this).dialog("close");
        }
    },
    close: function () {
        $("#comments").val("");
    }
}); 
```

但是由于某种原因不起作用，但是因为我使用了`.post`方法，所以我找不到失败的地方，这意味着是 jQuery 还是服务器端部分。

**编辑** 这是获取数据并运行基本上是 INSERT 的查询的 PHP 代码：

```
 public function comment() {
        role_or_die('wall', 'comment', site_url(), lang('wall:no_permissions'));

        $message = $this->input->post('value', TRUE);
        $post_id = $this->input->post('c_id', TRUE);
        $user_id = $this->input->post('user_id', TRUE);

        $this->load->library('user_agent');
        $device = "";

        if ($this->agent->is_browser()) {
            $device = $this->agent->browser();
        }

        if ($this->agent->is_mobile()) {
            $device = $this->agent->mobile();
        }

        if ($this->wall_comment_m->insert(array('friend_id' => $user_id, 'message' => $message, 'post_id' => $post_id, 'device' => $device))) {
            $this->session->set_flashdata('success', lang('message:comment_add_success'));
        } else {
            $this->session->set_flashdata('error', lang('message:comment_add_error'));
        }
    } 
```

我看不到生成的 SQL 是否是错误的，或者是否由于 location.href 没有在服务器端设置数据。

我怎样才能找到它失败的地方？有什么方法或工具可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:10:54.140

`$.post`是异步的。这意味着它在后台运行。

因此，`$(location).attr('href', "<?php echo site_url(); ?>");`将在POST 完成*之前运行。*

您需要使用`$.post`' 回调。

```
var that = this;
$.post("<?php echo site_url('wall/comment') ?>", {
    value: $("#comments").val(),
    user_id: $('#user_id').val(),
    c_id: $("#c_id").val(),
    is_post: true
}, function(){
    $(that).dialog("close");
    $(location).attr('href', "<?php echo site_url(); ?>");
}); 
```

# java - DefaultTableModel setDataVector 将旧行附加到新行

> ID：12111973
> 
> 赞同：2
> 
> 时间：2012-08-24T15:04:45.400
> 
> 标签：java, jtable

我在班级级别有一个 JTable 和 DefaultTableModel。第一次初始化 jTable 和模型时，我添加了 10 行。在按钮上单击我从我的数据库中得到 3 行，所以我必须通过删除前面的 10 行来仅显示这 3 行。我这样做是使用`tableModel.setDataVector(data, columnNames);`
但主要问题是，该表仅用新行替换了 3 行旧行，而其余 7 行仍按原样显示。

任何人都可以帮忙吗？

谢谢，杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:01:27.580

如果我理解了，您想用数据库中的 3 行重建表并删除前面的 10 行。如果这是真的，那么这样做，

```
 public void actionPerformed(ActionEvent e) {
   // If the action is for getting data from DB then do,
   DefaultTableModel dtm = (DefaultTableModel) myTable.getModel();
   // int rowCount = dtm.getRowCount();
   /*
     for (int row = rowCount - 1; row >= 0; row--) {
        dtm.removeRow(row); 
   } */
   // or
   if(dtm.getRowCount() > 0) {
     dtm.setRowCount(0);
   }
// Add code to get your 3 rows from the database.
} 
```

# entity-framework - EntityFramework DbSet 中的 include 语句导致的性能问题的解决方法

> ID：12111974
> 
> 赞同：2
> 
> 时间：2012-08-24T15:04:45.770
> 
> 标签：entity-framework, include, sql-server-ce

在我的应用程序中，我首先使用 SQL CE 4.0 和实体框架代码。

```
public class Customer : IEntityPoco
{
    public  int Id { get; set; }

    public  string Sex          { get; set; }
    public  string Titel        { get; set; }
    public  string FirstName    { get; set; }
    public  string SecondName   { get; set; }
    public  string LastName     { get; set; }
    public  string Fax          { get; set; }
    public  string Notice       { get; set; }
    public  DateTime LastChange { get; set; }

    public  int AddressId   { get; set; }
    public  Address Address { get; set; }

    public  ICollection<Sale> Sales { get; set; }
    public  ICollection<Customer> Partner1 { get; set; }
    public  ICollection<Customer> Partner2 { get; set; }
    public  ICollection<Phone> PhoneNumbers { get; set; }
    public  ICollection<Email> EmailAddresses { get; set; }
    public  ICollection<Corrospondence> Corrospondence { get; set; }
    public  ICollection<ShippingAddress> ShippingAddresses { get; set; }
} 
```

这就是我的模型的样子，

```
var query = context.TeacherCustomers
    .Include(i => i.EmailAddresses)
    .Include(i => i.Corrospondence)
    .Include(i => i.Address.City.Country)
    .Include(i => i.ShippingAddresses)
    .Include(i => i.Sales.Select(f => f.BuildVersion.Product))
    .Include(i => i.PhoneNumbers)
    .Include(i => i.Partner1.Select(f => f.Address.City.Country))
    .Include(i => i.Partner2.Select(f => f.Address.City.Country))
    .AsNoTracking(); 
```

这就是我的查询的样子。在我的业务逻辑中，我需要所有电子邮件地址、电话号码……如果我评论所有包含语句，则此查询将在大约 82 毫秒内执行，如果未评论所有包含语句，则查询大约需要 52000 毫秒（而且它不是第一个查询所以数据库模型已经编译好了）。

这篇文章很好地解释了这个问题：[我可以在 EntityFramework 的 ObjectSet 上使用多少个 Include 来保持性能？](https://stackoverflow.com/questions/5521749/how-many-include-i-can-use-on-objectset-in-entityframework-to-retain-performance)，但是给定的解决方案对我来说也没有选择，因为我的数据库包含超过 10 000 个条目，当我执行查询然后逐步遍历查询返回的所有客户并调用 context.Entry(customer).Reference(i => i.EmailAddresses).Load() 也需要很多时间。

那么如何创建与上述查询具有相同结果但执行速度更快的查询呢？

帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:52:32.603

我不确定您是否能够从该模型中获得很多性能。您实际上是在交叉连接所有表，这将为您提供一个巨大的表和大量记录。

我建议重新考虑你的模型，可能会有点反规范化，你真的需要电子邮件表格吗，电话号码不能只是表格中的多列（大多数应用程序不需要超过 2 个邮件或电话号码）。

如果您对模型无能为力，我建议单独加载所有表，例如使用一个查询加载所有客户，一个查询加载所有电子邮件等等，然后将它们加入模型中。根据您提供的统计数据，加载所有数据只需不到 400 毫秒。

# javascript - 在jquery中向下滑动和延迟

> ID：12111977
> 
> 赞同：2
> 
> 时间：2012-08-24T15:04:52.843
> 
> 标签：javascript, jquery

我正在尝试通过单击按钮使隐藏的 div 向下滑动，并等待大约五秒钟，然后再向上滑动。我已经尝试过 delay() 但我不知道我是否没有正确实施它。此外，当 div 不隐藏时，它只会显示图像。
到目前为止我有这个[http://jsfiddle.net/2sMFn/3/](http://jsfiddle.net/2sMFn/3/)
任何人都知道我做错了什么？
提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T15:08:50.750

你在正确的轨道上，但你必须改变这一点：

```
$this.delay(5000).SlideUp(6000); 
```

对此

```
$this.delay(5000).slideUp(6000); 
```

因为它在没有国会大厦“S”的情况下滑动？

[**小提琴**](http://jsfiddle.net/2sMFn/8/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T15:09:22.920

尝试这个：

```
$this.delay(5000).slideUp(6000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T15:14:34.017

以下是[演示](http://jsfiddle.net/2sMFn/17/)：http: [//jsfiddle.net/2sMFn/19/](http://jsfiddle.net/2sMFn/19/)

函数名称是“slideUp()”而不是“SlideUp”。所以使用这个：

```
 $this.delay(5000).slideUp(6000);
​ 
```

# c# - 为什么我不能在我的 global.asax 文件夹中添加我的自定义模型绑定器？

> ID：12111979
> 
> 赞同：8
> 
> 时间：2012-08-24T15:05:08.770
> 
> 标签：c#, asp.net-mvc, global-asax, custom-model-binder

我在网上看到了很多人设置他们的自定义模型绑定器的例子，如下所示：

```
// global.asax
protected void Application_Start()
{
    ModelBinders.Binders.Add(typeof(YourModel), new YourBinder());
} 
```

但是当我尝试这样做时，它不会编译（`.Binders`未找到）。是什么赋予了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T15:05:08.770

事实证明这只是一个命名冲突，因为我将自定义模型绑定器放在名为“ModelBinders”*的文件夹/命名空间中。*您可以通过以下两种方式之一解决此问题：

1.  将命名空间/文件夹重命名为其他名称，例如`CustomModelBinders`
2.  使用完全限定的引用，`ModelBinders`如下所示：

    `System.Web.Mvc.ModelBinders.Binders.Add( /* ... */ );`

# javascript - 在 JavaScript 代码运行时显示加载消息

> ID：12111981
> 
> 赞同：2
> 
> 时间：2012-08-24T15:05:13.557
> 
> 标签：javascript, jquery, html

我有一些在单击按钮时执行的特别慢的 jQuery 代码。我想在执行时显示加载消息/微调器。像这样：

```
$('#some_button').on('click', function(e){
  e.preventDefault();
  $('#spinner').show();
  really_slow_function();
  $('#spinner').hide();
}); 
```

我在等待 ajax 请求后的响应时一直这样做，但不确定在这种情况下该怎么做。这`really_slow_function`并不是非常低效，它只是在进行一些 dom 操作，而移动设备需要一段时间才能完成。

示例中代码的问题是微调器从不显示。我认为这是因为 JavaScript 在函数完成之前什么都不做。

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:25:31.887

```
function really_slow_function(callback) {
  var a = new Date();

  while (new Date() - a < 5000);
  callback.call(this);
}

$('#some_button').on('click', function(e) {
  e.preventDefault();
  $('#spinner').fadeIn(function() {
    really_slow_function(function() {
      $('#spinner').fadeOut();
    });
  });
});
```

```
#spinner {
  display: none;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<img id="spinner" src="http://www.nasa.gov/multimedia/videogallery/ajax-loader.gif">
<button id="some_button">click</button>
```

由此

[http://jsfiddle.net/M5YGs/7/](http://jsfiddle.net/M5YGs/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:12:35.903

尝试：

```
$('#some_button').on('click', function(e){
  e.preventDefault();
  $('#spinner').show();

  setTimeout(function() {
      really_slow_function();
      $('#spinner').hide();
  }, 50);
}); 
```

通过超时稍微延迟慢速函数的执行，应该有足够的空间供 dom 更新。

# clang - 如何使用 lldb（或 gdb）调试 Clang 插件

> ID：12111982
> 
> 赞同：6
> 
> 时间：2012-08-24T15:05:14.357
> 
> 标签：clang, lldb

我想调试 Clang 插件。
但是，我找不到有关调试 Clang 插件的信息。
如果你知道如何调试 Clang 插件，你能告诉我这些信息吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T10:08:34.687

只是一个小轮廓，因为我自己正在尝试这个 atm。我正在使用lldb。

我目前能够停止插件中的任何给定功能，但缺少源代码。它只显示程序集。

当您调用它时`clang`，`-Xclang -plugin (...)`它将分叉到一个子进程中。调用插件时，还可以`-v`选择查看子进程命令行。然后在调试器中使用这个命令行。

原始命令行：

> ```
> $> clang++ -Xclang -load -Xclang ${PLUGIN} -Xclang -plugin -Xclang cgd -std=c++11 -w -fsyntax-only -v 
> ```

应该输出：

> ```
> clang version 3.1 (tags/RELEASE_31/final 163510)
> Target: x86_64-unknown-linux-gnu
> Thread model: posix
>  "/srv/scratch/sigubufo/clang/stable/3.1_src/build/bin/clang-3.1" -cc1 -triple x86_64-unknown-linux-gnu -fsyntax-only -disable-free -main-file-name call_in_if.cpp -mrelocation-model static -mdisable-fp-elim -masm-verbose -mconstructor-aliases -munwind-tables -target-cpu x86-64 -momit-leaf-frame-pointer -v -resource-dir /srv/scratch/sigubufo/clang/stable/3.1_src/build/bin/../lib/clang/3.1
> -fmodule-cache-path /var/tmp/clang-module-cache -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6
> -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6/x86_64-linux-gnu
> -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6/backward
> -internal-isystem /usr/local/include -internal-isystem /srv/scratch/sigubufo/clang/stable/3.1_src/build/bin/../lib/clang/3.1/include
> -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -Werror -w -std=c++11 -fdeprecated-macro
> -fdebug-compilation-dir /srv/scratch/sigubufo/danceos_wd/clang/qtcreator-build -ferror-limit
> 19 -fmessage-length 205 -mstackrealign -fgnu-runtime
> -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-fragile-abi -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -load lib/CallGraphDumper.so -plugin cgd -x c++ ../test_cases/call_in_if.cpp
> clang -cc1 version 3.1 based upon LLVM 3.1svn default target x86_64-unknown-linux-gnu
> ignoring nonexistent directory "/include"
> #include "..." search starts here:
> #include <...> search starts here:
>  /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6
>  /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6/x86_64-linux-gnu
>  /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6/backward
>  /usr/local/include
>  /srv/scratch/sigubufo/clang/stable/3.1_src/build/bin/../lib/clang/3.1/include
>  /usr/include/x86_64-linux-gnu
>  /usr/include
> End of search list. 
> ```

这是您需要的部分：

> ```
> "/srv/scratch/sigubufo/clang/stable/3.1_src/build/bin/clang-3.1" -cc1 -triple x86_64-unknown-linux-gnu -fsyntax-only -disable-free -main-file-name call_in_if.cpp -mrelocation-model static -mdisable-fp-elim -masm-verbose -mconstructor-aliases -munwind-tables -target-cpu x86-64 -momit-leaf-frame-pointer -v -resource-dir /srv/scratch/sigubufo/clang/stable/3.1_src/build/bin/../lib/clang/3.1 -fmodule-cache-path /var/tmp/clang-module-cache -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6/x86_64-linux-gnu -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6/backward -internal-isystem /usr/local/include -internal-isystem /srv/scratch/sigubufo/clang/stable/3.1_src/build/bin/../lib/clang/3.1/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -Werror -w -std=c++11 -fdeprecated-macro -fdebug-compilation-dir /srv/scratch/sigubufo/danceos_wd/clang/qtcreator-build -ferror-limit 19 -fmessage-length 205 -mstackrealign -fgnu-runtime -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-fragile-abi -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -load lib/CallGraphDumper.so -plugin cgd -x c++ ../test_cases/call_in_if.cpp 
> ```

现在您使用以下命令调用 lldb：

> ```
> lldb "/srv/scratch/sigubufo/clang/stable/3.1_src/build/bin/clang-3.1" 
> ```

然后在 lldb 提示符下执行

> ```
> (lldb) break set --name YourPlugin::FunctionToBreakAt
> 
> (lldb) process launch -- -cc1 -triple x86_64-unknown-linux-gnu -fsyntax-only -disable-free -main-file-name call_in_if.cpp -mrelocation-model static -mdisable-fp-elim -masm-verbose -mconstructor-aliases -munwind-tables -target-cpu x86-64 -momit-leaf-frame-pointer -v -resource-dir /srv/scratch/sigubufo/clang/stable/3.1_src/build/bin/../lib/clang/3.1 -fmodule-cache-path /var/tmp/clang-module-cache -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6/x86_64-linux-gnu -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../include/c++/4.6/backward -internal-isystem /usr/local/include -internal-isystem /srv/scratch/sigubufo/clang/stable/3.1_src/build/bin/../lib/clang/3.1/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -Werror -w -std=c++11 -fdeprecated-macro -fdebug-compilation-dir /srv/scratch/sigubufo/danceos_wd/clang/qtcreator-build -ferror-limit 19 -fmessage-length 205 -mstackrealign -fgnu-runtime -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-fragile-abi -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -load lib/CallGraphDumper.so -plugin cgd -x c++ ../test_cases/call_in_if.cpp 
> ```

这应该有效。

# python - Django 数据库和线程

> ID：12111983
> 
> 赞同：7
> 
> 时间：2012-08-24T15:05:17.463
> 
> 标签：python, mysql, django, multithreading

在一个模型中，我有 update() 方法，它更新了几个字段并创建了其他模型的一个对象。问题是我用来更新的数据是从另一台主机获取的（每个对象都是唯一的），这可能需要一点时间（主机可能离线，超时设置为 3 秒）。现在，我需要更新几百个对象，每小时 3-4 次 - 当然，连续更新每个对象不是一种选择，因为它可能需要一整天。我的第一个想法是将其拆分为 50-100 个线程，以便每个线程都可以更新自己的对象部分。99% 的更新函数时间都在等待服务器响应（只有几个字节的数据，所以 ping 是问题），我认为 CPU 不会有问题，我比较担心：

*   Django ORM。能应付吗？获取所有对象，将其拆分并从 >50 个线程更新？
*   解决这个问题是个好主意吗？如果是 - 如何做到这一点并且不要搞砸数据库？或者也许我不应该关心这么少的记录？
*   如果这不是一个好方法，如何正确地做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T19:34:03.653

您可以从不同的线程手动执行操作（例如，使用`Queue`和执行程序池），但您应该注意，Django 的 ORM 在线程局部变量中管理数据库连接。因此，每个新线程 = 到数据库的新连接（对于一个请求的 50-100 个线程来说这不是一个好主意 - 连接太多）。另一方面，您应该检查数据库“带宽”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:47:11.630

线程应该非常适合这种工作。（@g19fanatic：当然，GIL 不会成为问题，因为这些任务不受 cpu 限制——这与使用多处理没有意义的原因相同......或者担心核心数量）

Django ORM 可以处理此问题，但根据您的操作，您可能需要使用[事务](https://docs.djangoproject.com/en/dev/topics/db/transactions/)——但如果可以避免，请尽量不要将事务保持打开 3 秒。

通常，我建议使用 threading.Queue 和生产者/消费者模式（例如本页底部[）](http://docs.python.org/library/queue.html)，但是，因为您知道任务数量是合理的并且您的任务需要很长时间（3 秒），您可能会好吧，只需将它们全部生成并让操作系统弄清楚:-)

# c# - 无法将数据从 DataTable 移动到 DataGridView

> ID：12111987
> 
> 赞同：0
> 
> 时间：2012-08-24T15:05:42.873
> 
> 标签：c#, winforms, datagridview, ado.net, datatable

数据到达 DataTable（11 列和 3 行），但是当我尝试让它到达 DataGridView 时，没有成功（没有错误，只是一个空的“DataGridView”）。以下是相关代码的一部分：

```
DataGridView SecuritiesGridView1 = new DataGridView();
BindingSource bindingSource1 = new BindingSource();
SecuritiesGridView1.DataSource = bindingSource1;

String connectionString = "Data Source=|DataDirectory|\\PersonalFinanceDB.sdf;Encrypt Database=True;Persist Security Info=True";

SqlCeDataAdapter dataAdapter = new SqlCeDataAdapter(DBcommand, connectionString);

DataTable table = new DataTable();
table.Locale = System.Globalization.CultureInfo.InvariantCulture;

bindingSource1.DataSource = table;
SecuritiesGridView1.DataSource = bindingSource1;
dataAdapter.Fill(table);

MessageBox.Show("Number of columns of table: " + table.Columns.Count.ToString());  // Returns 11
MessageBox.Show("Number of rows of table: " + table.Rows.Count.ToString());  // Returns 3

MessageBox.Show("Number of rows of grid: " + SecuritiesGridView1.RowCount.ToString());  // Returns 0
MessageBox.Show("Number of columns of grid: " + SecuritiesGridView1.ColumnCount.ToString());  // Returns 0 
```

任何人都会知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:54:02.113

无论您如何填充表格，您都需要将 DataGridView 绑定到 DataTable。

就像是：

```
BindingSource myBindingSource = new BindingSource();
myDataGridView.DataSource = myBindingSource;
DataView myDataView = new DataView(myDataTable);
myBindingSource = myDataView; 
```

应该做的伎俩。

然后，您可以通过更改视图来过滤数据，如果这是您想要做的，通过执行以下操作：

```
myDataView.RowFilter = (Dessert = 'Ice Cream'); 
```

或类似的东西，DataGridView 将被过滤到该视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:16:23.357

首先填充数据表“表”，然后将绑定源分配给 SecuritiesGridView1，然后调用函数 SecuritiesGridView1.DataBind();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:11:18.533

`SecuritiesGridView1.DataBind()`在用数据填充表格后，您必须拨打电话。

# powershell - 使用启动过程时出现拒绝访问错误

> ID：12111993
> 
> 赞同：0
> 
> 时间：2012-08-24T15:06:02.600
> 
> 标签：powershell, vbscript, wmi

[我首先要为重新发布问题](https://stackoverflow.com/questions/11874357/start-process-access-is-denied-even-though-ive-provided-credentials)道歉。我试图开始赏金，但遇到了[这个](https://meta.stackexchange.com/questions/141671/why-cant-i-start-a-bounty)问题，似乎没有解决办法。

无论如何

尝试执行一行代码时出现以下错误

```
Start-Process : This command cannot be executed due to the error: 
Access is denied. 
```

这是正在执行的代码

```
$username = "domain\username"
$passwordPlainText = "password"     
$password = ConvertTo-SecureString "$passwordPlainText" -asplaintext -force
$cred = New-Object -TypeName System.Management.Automation.PSCredential -argumentlist $username,$password

$powershellArguments = "D:\path\ps.script.ps1", "arg1", "arg2", "arg3", "arg4"
Start-Process "powershell.exe" -credential $cred -ArgumentList $powershellArguments -wait 
```

*   此代码在本地执行时工作正常，但在通过 vbs WMI 调用时不能正常工作
*   两台计算机存在于相同的域和地址范围内
*   提供的用户名和密码在两台机器上都具有管理员权限
*   我已经尝试了有和没有`-wait`但都没有工作，并且由于用户具有特权，我更愿意保留它

我不精通 VBS，但是我浏览了脚本并提取了我认为用于在远程计算机上执行命令的所有行。该脚本确实适用于数千个其他任务而不会出错。

```
m_strCommand =  MIGetTaskParam("RemoteProgName") & " " & MIGetTaskParam("Provider") & " " & FileTS
strScriptFolder = "C:\production\logs\RemoteExec"
strComputer=MIGetTaskParam("RemoteServer")
Set objSWbemLocator = CreateObject("WbemScripting.SWbemLocator")
Set objRemote = objSWbemLocator.ConnectServer(strComputer, "more\data", strUser, strPassword,"data", "moredata" )
Set objProcess = objRemote.Get("Win32_Process")
intReturnCode = objProcess.Create(m_strCommand, null, null, intProcessID)
Do Until i = 999
   Set colProcesses = objRemote.ExecQuery ("SELECT * FROM Win32_Process " & "WHERE ProcessID=" & intProcessID )
   If colProcesses.Count = 0  Then
    Exit Do
   End If
Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:51:48.353

对于 VBS 中的远程 WMI，请尝试设置 ImpersonationLevel 和 AuthenticationLevel 值：

```
sComp = "."
Set oWMI = GetObject("winmgmts:{impersonationLevel=impersonate,authenticationLevel=pktPrivacy}!\\" & sComp & "\root\cimv2") 
```

假设您想远程执行一个进程，您可以执行以下操作，将计算机 IP 传递给 WMIC 命令，而不是在 VBS 中使用 WMI：

```
On Error Resume Next
Set oWSH = CreateObject("WScript.Shell")  
For Each sComp In aComputers
  sCmd = "wmic /node:" & sComp & " path Win32_Process call create \"cmd /c tasklist | sort & pause\""  
  iRC = oWSH.Run(sCmd, 1, True)
  If Err.Number <> 0 Then 
    MsgBox "ERROR: (" & CStr(Err.Number) & ") " & Err.Source & vbCrLf & Err.Description, vbOkOnly, "WMI Remote Error"
    Err.Clear 
  End If   
Next 
```

只需将您执行的命令更改为您想要的任何命令。

# wpf - Visual Studio C#/WPF 2010 xbap 项目不再调试

> ID：12111999
> 
> 赞同：1
> 
> 时间：2012-08-24T15:06:17.583
> 
> 标签：wpf, visual-studio-2010, debugging, xbap

我已经在这个网站和其他网站上搜索了类似的问题，并发现了一些类似的问题，但似乎没有一个修复程序对我有用。

开始调试时，它会加载 IE，然后立即与进程分离。有趣的是，除非我先清除缓存，否则它也不会加载最新版本的 .xbap。这两种行为直到我发布了一个测试版本让我的团队中的一些人在决定是否继续之前尝试它之后才开始。

我尝试创建一个全新的解决方案来确定我的个人项目设置中的某些东西是否导致了这种情况的发生，但是问题出现在一个新的 WPF 浏览器应用程序项目中。标准 C# Windows 窗体应用程序仍在按预期进行调试。

我一直在搜索论坛，试图找出问题所在，以及在简单地发布之后可能导致它发生的原因，就像我之前在其他项目中做过很多次一样。

有什么建议么？