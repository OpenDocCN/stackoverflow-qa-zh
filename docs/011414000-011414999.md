# StackOverflow 问答 11414000-11414999

# java - JasperReports：当它为空时删除一个组带

> ID：11414002
> 
> 赞同：0
> 
> 时间：2012-07-10T13:09:09.267
> 
> 标签：java, jasper-reports

我在组页脚带中有两个子报告。我想要的是当这个组页脚是空的（换句话说，子报告是空的）这个组页脚不应该在报告上占用空间。因为它在两个报告之间打印一个空白页面。我在底部设置了属性堆栈页脚，因此当子报告打印时，它从新页面开始。我正在使用*JasperReports* 4.5

# clojure - clojure a 与非标准迭代 java API 的互操作

> ID：11414004
> 
> 赞同：5
> 
> 时间：2012-07-10T13:09:20.823
> 
> 标签：clojure, iteration, seq, clojure-java-interop

我正在使用一个 java 类在 clojure 中工作，该类为包含一系列记录的域特定二进制文件提供检索 API。

java 类用一个文件初始化，然后提供一个`.query`方法，该方法返回一个只有一个方法的内部类的实例`.next`，因此不能很好地使用通常的 java 集合 API。外部类和内部类都没有实现任何接口。

该`.query`方法可能返回 null 而不是内部类。该`.next`方法返回一个记录字符串，如果没有找到更多记录，则返回 null，它可能会在第一次调用时立即返回 null。

如何在不编写更多 Java 类的情况下使这个 Java API 在 clojure 中正常工作？

我能想到的最好的是：

```
 (defn get-records
  [file query-params]
  (let [tr (JavaCustomFileReader. file)]
    (if-let [inner-iter (.query tr query-params)] ; .query may return null                                                               
      (loop [it inner-iter
             results []]
       (if-let [record (.next it)]
         (recur it (conj results record))
         results))
      []))) 
```

这给了我一个与 clojure seq 抽象一起使用的结果向量。是否有其他方法可以从 java API 公开序列，无论是使用惰性序列还是使用协议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:44:40.707

您的代码并不像使用 Iterable 时那样惰性，但您可以使用惰性序列填补空白，如下所示。

```
(defn query-seq [q]
  (lazy-seq
    (when-let [val (.next q)]
      (cons val (query-seq q))))) 
```

也许您应该包装查询方法以保护自己免受第一个空值的影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T17:59:04.500

似乎很适合[`lazy-seq`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/lazy-seq)：

```
(defn query [file query]
  (.query (JavaCustomFileReader. file) query))

(defn record-seq [query]
  (when query
    (when-let [v (.next query)]
      (cons v (lazy-seq (record-seq query))))))

;; usage:
(record-seq (query "filename" "query params")) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T06:17:12.550

不下降到`lazy-seq`：

```
(defn record-seq
  [q]
  (take-while (complement nil?) (repeatedly #(.next q)))) 
```

而不是`(complement nil?)`你也可以只使用`identity`if`.next`不返回 boolean `false`。

```
(defn record-seq
  [q]
  (take-while identity (repeatedly #(.next q)))) 
```

我还会对入口点进行一些重组。

```
(defn query
  [rdr params]
  (when-let [q (.query rdr params)]
    (record-seq q)))

(defn query-file
  [file params]
  (with-open [rdr (JavaCustomFileReader. file)]
    (doall (query rdr params)))) 
```

# iphone - 这是 Facebook for iOS WebView 用户代理吗？

> ID：11414006
> 
> 赞同：14
> 
> 时间：2012-07-10T13:09:35.350
> 
> 标签：iphone, ios, facebook, ipad, webkit

我正在查看一些日志，试图解释一些“有趣”的行为，我看到一些用户使用类似于这个的用户代理来到我的应用程序：

```
Mozilla/5.0 (iPad; U; CPU iPhone OS 5_1_1 like Mac OS X; en_US) AppleWebKit (KHTML, like Gecko) Mobile [FBAN/FBForIPhone;FBAV/4.1.1;FBBV/4110.0;FBDV/iPad2,1;FBMD/iPad;FBSN/iPhone OS;FBSV/5.1.1;FBSS/1; FBCR/;FBID/tablet;FBLC/en_US;FBSF/1.0] 
```

如果我通过[udger.com](https://udger.com/resources/online-parser?Fuas=Mozilla%2F5.0+%28iPad%3B+U%3B+CPU+iPhone+OS+5_1_1+like+Mac+OS+X%3B+en_US%29+AppleWebKit+%28KHTML%2C+like+Gecko%29+Mobile+%5BFBAN%2FFBForIPhone%3BFBAV%2F4.1.1%3BFBBV%2F4110.0%3BFBDV%2FiPad2%2C1%3BFBMD%2FiPad%3BFBSN%2FiPhone+OS%3BFBSV%2F5.1.1%3BFBSS%2F1%3B+FBCR%2F%3BFBID%2Ftablet%3BFBLC%2Fen_US%3BFBSF%2F1.0%5D%0D%0A&test=&action=analyze)运行这个字符串，我会得到以下结果：

![用户代理截图](../Images/4ab5ad01a711856678869a14d70f1a1e.png)

这个屏幕截图和用户代理让我感到困惑，因为它说它是 iPod 和 iPad 的移动 safari。我`iPad`在用户代理的第一部分看到了，但我也看到了很多对 FB、iPhone 和 iOS 以及各种其他东西的引用。

我很好奇这是否是 Facebook for iOS 应用程序提供的“通用”用户代理，如果是 - 该设备是 iPad 还是不够清楚？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-18T09:52:22.117

是的，它是 iOS Facebook 应用程序......

以下是来自 iPhone 4s 的用户代理字符串，显示它包含正确的设备`iPhone4,1`

```
Mozilla/5.0 (iPhone; CPU iPhone OS 6_0_1 like Mac OS X)
AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10A523
[FBAN/FBIOS;FBAV/5.3;FBBV/89182;FBDV/iPhone4,1;FBMD/iPhone;FBSN/iPhoneOS;
FBSV/6.0.1;FBSS/2; FBCR/O2;FBID/phone;FBLC/en_US] 
```

显示的设备似乎遵循关于[检测 iOS 型号的答案中显示的相同型号标识](https://stackoverflow.com/questions/1108859/detect-the-specific-iphone-ipod-touch-model)

```
@"i386"      on the simulator
@"iPod1,1"   on iPod Touch
@"iPod2,1"   on iPod Touch Second Generation
@"iPod3,1"   on iPod Touch Third Generation
@"iPod4,1"   on iPod Touch Fourth Generation
@"iPhone1,1" on iPhone
@"iPhone1,2" on iPhone 3G
@"iPhone2,1" on iPhone 3GS
@"iPad1,1"   on iPad
@"iPad2,1"   on iPad 2
@"iPad3,1"   on iPad 3 (aka new iPad)
@"iPhone3,1" on iPhone 4
@"iPhone4,1" on iPhone 4S
@"iPhone5,1" on iPhone 5
@"iPhone5,2" on iPhone 5 
```

**这意味着您显示的字符串是[iPad 2上的 facebook 应用程序](http://en.wikipedia.org/wiki/IPad_2)**

# jquery - 菜单鼠标轨迹背景效果

> ID：11414011
> 
> 赞同：0
> 
> 时间：2012-07-10T13:09:52.017
> 
> 标签：jquery, css, navigation

[http://onioneyethemes.com/yin-and-yang/](http://onioneyethemes.com/yin-and-yang/)

请注意，当您将鼠标移到一个项目上时，每个菜单项上方都会发生酷炫的鼠标悬停效果，它是如何跟踪鼠标的，然后在返回静止状态之前略微超出该项目。

这个叫什么？JQuery可以吗？我想在我正在忙于构建的站点上复制此功能。教程？？

塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:17:29.020

这似乎是[Jquery lavalamp 插件](http://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/)的一个很酷的实现。注意他们是如何使用`border-top`而不是`background`.

***更新：***其实我很确定它是上面提到的插件。我使用 chrome 的检查元素检查了页面源。

# c# - SQL 超时和查询性能

> ID：11414015
> 
> 赞同：3
> 
> 时间：2012-07-10T13:09:58.360
> 
> 标签：c#, sql, sql-server

我有以下 SQL 查询：

```
SELECT TOP(100)
    VIEW_RAUMBUCHUNG_RAUM.RAUMID,
    VIEW_RAUMBUCHUNG.VON,
    VIEW_RAUMBUCHUNG.BIS,
    VIEW_RAUMBUCHUNG.RAUMBEZEICHNUNG,
    VIEW_RAUMBUCHUNG.THEMA,
    VIEW_RAUMBUCHUNG.V_EMAIL,
    VIEW_RAUMBUCHUNG.VERANSTALTER,
    VIEW_RAUMBUCHUNG_RAUM.COLOR,
    VIEW_RAUMBUCHUNG.RAUMID AS Expr1,
    VIEW_RAUMBUCHUNG_RAUM.BEZEICHNUNG
FROM VIEW_RAUMBUCHUNG
RIGHT OUTER JOIN VIEW_RAUMBUCHUNG_RAUM ON VIEW_RAUMBUCHUNG.RAUMID = VIEW_RAUMBUCHUNG_RAUM.RAUMID 
```

有没有办法改善这一点？VIEW_RAUMBUCHUNG 包含 27000 个条目，即使我将结果限制为前 100 条记录，性能也很慢。或者有没有办法优化 SQL-Server？

我的第二个问题是，如果我尝试加载整个 27000 个条目，我会在 20 秒后超时，但我将 IIS 中的超时设置为 120 秒。为什么会这样，我怎样才能避免超时？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:17:25.057

1.  在两个表中的 RaumID 字段上创建**索引**
2.  创建一个**视图**而不是连接两个表
3.  将**超时**设置为更大的值或设置为 0，这意味着它不会超时

# java - 项目的设计决策

> ID：11414017
> 
> 赞同：0
> 
> 时间：2012-07-10T13:10:04.253
> 
> 标签：java, algorithm, oop, grails

![在此处输入图像描述](../Images/ef45ea43533150883e1761c316a3c946.png)

大家好，我需要你对一个项目的建议。正如您在表中看到的，有 client_id、user_id 和 date 列。这是一本日志，它保存了属于某个公司的每个用户的数据。在月底，我需要有关用户及其系统使用情况的统计数据。因此，就像客户 1 的用户 7 上个月启用了 5 天 客户 1 的用户 25 上个月启用了 3 天 客户 5 的用户 8 上个月启用了 4 天.....等等 目前最简单的方法我发现是这样的

```
def logs = LogBook.createCriteria()
def result = logs.list{
    projections {
        groupProperty("user")
        count("user")
        property("client","client")
} 
```

它返回类似的东西

```
[User : 7, 4, Client: 1]
[User : 8, 3, Client: 5]
[User : 10, 3, Client: 15]
[User : 11, 3, Client: 16]
[User : 25, 3, Client: 1] 
```

[0] 是 User 对象，[1] 是 count "count(user_id)" 而 [2] 是 Client 对象，你有什么想法让它更简单或更可靠吗？或者它安全吗？感谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:21:59.137

您希望如何显示数据？我会为您想要的内容编写一个查询，创建一个使用 resultSet 抓取它的类，然后将该集合写入 JTable。

根据数据库表的大小，您可以使用 * 返回所有内容，然后在 java.util.xml 中进行解析。

# c# - WCF webservice中的RabbitMQ，模型使用和性能

> ID：11414019
> 
> 赞同：4
> 
> 时间：2012-07-10T13:10:13.030
> 
> 标签：c#, wcf, rabbitmq

我需要从 IIS 中托管的 C# WCF Web 服务中调用 RabbitMQ RPC 服务。我们的工作正常，但作为一名优秀的小士兵，我正在阅读 RabbitMQ 客户端文档，它指出以下**“IModel 不应在线程之间共享”**。

我的理解是，在 RabbitMQ 中，**IModel**实际上是一个套接字连接。这意味着对于每次调用，WCF 服务都需要创建一个 IModel 并在完成后处理它。

在我看来，这在性能和套接字使用方面有些过分，我想知道我的理解是否真的正确，或者是否还有其他可用选项，例如在线程之间使用 IModel 连接池。

任何建议将不胜感激。这是我在下面使用的代码示例，rabbitMQ 连接实际上是在 Global.asax 中初始化的，我只是把它放在那里，你可以看到它的用法。

```
 var connectionFactory = new ConnectionFactory();
        connectionFactory.HostName = "SampleHostName";
        connectionFactory.UserName = "SampleUserName";
        connectionFactory.Password = "SamplePassword";
        IConnection connection = connectionFactory.CreateConnection();
        // Code below is what we actually have in the service method.
        var model = connection.CreateModel();
        using (model)
        {
            model.ExchangeDeclare("SampleExchangeName", ExchangeType.Direct, false);
            model.QueueDeclare("SampleQueueName", false, false, false, null);
            model.QueueBind("SampleQueueName", "SampleExchangeName", "routingKey" , null);
            // Do stuff, like post messages to queues
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:49:54.707

> IModel 实际上是一个套接字连接

这是不正确的。IConnection 代表一个连接 :) 引入模型是为了允许多个客户端使用相同的 tcp 连接。因此，模型是“物理”连接之上的“逻辑”连接。

Model 所做的任务之一是拆分和重新组装大型消息。如果消息超过一定大小，则将其拆分为帧，帧被标记并由接收者组装回来。现在，假设 2 个线程发送大消息......帧号会被弄乱，你最终会得到由 2 条消息的随机部分组成的 Frankenstein 消息。

假设创建模型需要一些成本，您是对的。客户端向服务器发送创建模型的请求，服务器在内存中为该模型创建一个结构，并将模型 ID 发送回客户端。它是通过已经打开的 tcp 连接完成的，因此不会因建立连接而产生开销。但是由于网络往返，仍然存在一些开销。

我不确定 WCF 绑定，但基本 rabbit 的 .net 库不为模型提供任何池。如果您的情况有问题，您将不得不自己想出一些办法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:19:04.087

每个会话都需要一个 IModel 对象。这对于基于网络的 API 来说是很正常的。例如 Azure 表存储客户端是完全一样的。为什么，你不能有一个单一的通道，其中有多个并发的通信流在它们上面运行。

我希望会发生一定程度的缓存（例如 DNS），这将减少创建后续 IModel 实例的开销。

使用 Azure Tables 执行相同操作时性能还可以，因此使用 IModel 应该非常好。只有当你能证明你有真正的需要时，才尝试优化它。

# c# - 如何以编程方式启用麦克风增强？

> ID：11414023
> 
> 赞同：0
> 
> 时间：2012-07-10T13:10:19.983
> 
> 标签：c#, java, microphone

> **可能重复：**
> [如何从 C# 以编程方式控制 Win7 中的麦克风和麦克风增强设置？](https://stackoverflow.com/questions/8440588/how-can-i-programmatically-control-the-microphone-and-microphone-boost-settings)

我想编写一个小应用程序来启用麦克风增强功能。我已经用 C# 试过了，但我找不到任何简单的 api 可以使用。如果您以前做过类似的事情，也许您可​​以提出一些建议。`Java`或者`C#`没关系，我只需要一些关于如何增加麦克风提升的想法（应用程序将在`Windows 7`和上运行`XP`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:42:00.967

Microsoft 不希望您以编程方式弄乱这样的设置，因此没有适用于它的 API。

你唯一能做的就是打开对话框，然后发送鼠标/键盘事件来做你想做的事。当然，这在操作系统版本之间是不可移植的。

# file - ClearCase：2 个分支中的文件相互遮挡

> ID：11414024
> 
> 赞同：1
> 
> 时间：2012-07-10T13:10:20.940
> 
> 标签：file, merge, clearcase, obscured-view

我在 2 个不同的分支（例如，开发和发布）中检查了同一个文件（文件名）两次。

这几乎破坏了任何东西，所以我想采用 1 个版本并将其“正确”复制/合并到另一个分支，然后手动合并丢失的更改（从备份中）。然后我会丢失 1 个文件的历史记录，但至少 2 个文件会再次连接。

怎么做？

* * *

另请注意，由于连接断开，我不能仅仅在执行版本树时，两个文件都有不同的版本树。（它不是 1 个版本树中不同文件的 2 个视图，就像正常/正确的情况一样。）

另外，我认为问题在于该文件夹对 2 个不同的文件有某种引用，但不知何故，我无法编辑该文件夹？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:33:56.940

那些被称为“[邪恶双胞胎](http://www-01.ibm.com/support/docview.wss?rs=984&uid=swg21125072)”（也在那个[SO问题](https://stackoverflow.com/questions/1636712/evil-twin-problem-and-subtractive-merge)中描述）
（[Git少担心一件事；）](https://stackoverflow.com/questions/2910044/does-git-have-evil-twin-issues)）

最简单的方法是选择一个分支：

*   从另一个分支（rmname）中删除文件，
*   并进行合并。

合并将在另一个分支中添加相同的文件。
该过程 ( `rmname`+ `merge`) 在“ [Clearcase：如何将特定文件从一个视图合并到另一个视图中，以避免出现 Evil Twin 场景？](https://stackoverflow.com/questions/4209342/clearcase-how-do-i-merge-in-a-specific-file-from-one-view-into-another-to-avo) ”中进行了说明。

* * *

（由 Andreas 编辑）
您的解决方案效果很好，我为我更改了它，因为我注意到我有一个特定的案例：
文件变坏了，因为其他人重命名了它......所以它不仅仅是你的解决方案那么简单，但我有照原样“手工”完成

转到`X:\FullyQualifiedPath`（VOB 中的正确路径）

利用：

```
cleartool ln FullyQualifiedName ./FileName 
```

当您说“<code>Send To -> Copy”时，例如从 VersionTree 中获得的名称在哪里`FullyQualifiedName`（类似于`//view`，删除`file:`之前）。这将创建链接

之后，您可以再次在 ClearCase Explorer 中看到所需的版本。

# java - 在 Java 中的向量中复制向量

> ID：11414027
> 
> 赞同：-2
> 
> 时间：2012-07-10T13:10:29.183
> 
> 标签：java, collections

我想将一个矢量复制到另一个。问题是如果我改变向量`v1`，第二个向量`v2`也会改变。我的目标是保持副本完整，即使我更改了源向量。

```
import java.util.Collections;
import java.util.Vector;

public class CopyElementsOfVectorToVectorExample {

  public static void main(String[] args) {

    //create first Vector object
    Vector v1 = new Vector();

    //Add elements to Vector
    v1.add("1");
    v1.add("2");
    v1.add("3");

    //create another Vector object
    Vector v2 = new Vector(v1.size());  

    v2.setSize(v1.size());
    Collections.copy(v2,v1);

    System.out.println("After copy, Second Vector Contains : " + v2);  
  }} 
```

我怎样才能保持第二个副本完好无损？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T13:13:44.837

你上面的代码很好，虽然太复杂了。它可以减少到

```
Vector copy = new Vector(original); 
```

此外，您应该避免使用 Vector，而是使用 ArrayList。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T13:12:19.407

> [...]***我改变了向量 v1，第二个 v2 也在改变......我的目标是即使我改变了源向量也能保持副本完好无损......***

向量包含对对象的*引用。*如果您更改对象，则更改将从两个向量中可见。

我相信你所追求的是[*深拷贝*](http://en.wikipedia.org/wiki/Object_copy#Deep_copy)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-07T11:46:11.143

您可以使用以下代码克隆向量。

```
Vector v1 = new Vector();

//Add elements to Vector
v1.add("1");
v1.add("2");
v1.add("3");

//create another Vector object
Vector v2 = (Vector)v1.clone(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T13:16:42.580

`the problem is if I change the vector v1, the second v2 is changing too ...My goal is to keep the copy intact even if I change the source vector`

这是因为`Collections.copy(v2,v1)`做一个浅***拷贝***而不是**深拷贝**。

制作**您**的`Vector`.

为之前的回答道歉。

**编辑：**

我假设您`vector`包含类型的对象`Serializable`。使用这种方法，您可以获得收藏的深层副本。

```
static public Object deepCopy(Object oldObj) throws Exception {
    ObjectOutputStream oos = null;
    ObjectInputStream ois = null;
    try {
        ByteArrayOutputStream bos = new ByteArrayOutputStream(); // A
        oos = new ObjectOutputStream(bos); // B
        // serialize and pass the object
        oos.writeObject(oldObj); // C
        oos.flush(); // D
        ByteArrayInputStream bin = new ByteArrayInputStream(
                bos.toByteArray()); // E
        ois = new ObjectInputStream(bin); // F
        // return the new object
        return ois.readObject(); // G
    } catch (Exception e) {
        System.out.println("Exception in ObjectCloner = " + e);
        throw (e);
    } finally {
        oos.close();
        ois.close();
    }
} 
```

# ruby - 如何解析网址

> ID：11414031
> 
> 赞同：0
> 
> 时间：2012-07-10T13:10:51.577
> 
> 标签：ruby, html-parsing, nokogiri

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:00:10.060

`at`如果您知道所需的`<img>`标签在第一个标签中，则可以使用该方法`<a>`：

```
doc.at('a img')['src'] => "http://img2.site.ru/tm/120000/129102-3.jpg" 
```

如果不是，那么您需要隔离`<a>`或`<img>`。我可能会`<a id="...">`使用类似的东西：

```
doc.at('a#mt-1334303054133 img')['src'] => "http://img2.site.ru/tm/120000/129102-3.jpg" 
```

如果有多个`<a>`或`<img>`标签，那么您的示例不够好，我们需要有关您收到的 HTML 的更多信息。

# python - lxml RelaxNG 验证给出不准确的结果

> ID：11414032
> 
> 赞同：2
> 
> 时间：2012-07-10T13:10:52.907
> 
> 标签：python, lxml, relaxng

我正在使用 python 2.7 和 lxml 来验证带有 RelaxNG 的大型 xml 文件。当 xml 无法正确验证时，我会得到关于问题位置和性质的不准确结果。通常它只是说：“元素元素名称无法验证内容” - 其中元素名称只是最顶层元素的名称。

当我在 Java 中使用相同的 xml 和相同的relaxng 文件时，我得到了错误所在的确切行号。这是我正在使用的代码：

```
from lxml import etree  as ET
def ValidateXMLWithRNG(rng_file, xml_file):
    isXMLValid = False
    try:
        doc = ET.ElementTree()               
        doc.parse(xml_file)
        relaxng = ET.RelaxNG(file=rng_file)
        isXMLValid = relaxng.assert_(doc)
    except BaseException as ex:
        log = relaxng.error_log
        print log.last_error
    return isXMLValid 
```

有没有办法从 lxml 和 RelaxNG 获得更准确的结果？

# mysql - Mysql查询最后更新行

> ID：11414034
> 
> 赞同：1
> 
> 时间：2012-07-10T13:11:00.067
> 
> 标签：mysql

我的数据库中有数据

```
ID    UserID   CourseName   Grade                                  
 1      8        CourseA      75
 2      8        CourseA      102 
 3      8        CourseA      115
 4      8        CourseA      111
 5      8        CourseA      112
 6      8        CourseB      60
 7      8        CourseB      45
 8      8        CourseB      58
 9      8        CourseB      60
 10     8        CourseB      74
 11     8        CourseC      130
 12     8        CourseC      140
 13     8        CourseC      133 
 14     8        CourseC      135 
```

我需要一门课程的最后更新成绩，例如

```
`8     CourseA   112    
 8     CourseB   74
 8     CourseC   135` 
```

任何人都可以为此建议我一个 sql 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:33:16.210

```
select * from Course a 
where id=(select max(b.id) from Course b where b.CourseName=a.CourseName); 
```

之后，您可以按 ID、CourseName 对结果进行分组

未测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:19:47.590

好的，更新我的答案：

知道了：

```
SELECT UserID, CourseName, Grade
FROM yourtable
WHERE UserID = '8'
AND ID
IN (
    SELECT MAX( ID ) 
    FROM yourtable
    GROUP BY CourseName
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:21:33.103

您可以添加另一列修改日期

```
alter table tableName add column modifiedDate DEFAULT NOW() ON UPDATE NOW() 
```

然后你会得到课程的最后更新成绩

```
 select * from tableName where course ='CourseA' 
 order by modifiedDate desc limit 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-02T06:07:18.897

SELECT * FROM Table ORDER BY id DESC LIMIT 1;

# jquery - 仅在 Firefox 中不使用 Zepto/jQuery addClass() 触发 CSS3 转换

> ID：11414041
> 
> 赞同：3
> 
> 时间：2012-07-10T13:11:16.387
> 
> 标签：jquery, firefox, css-transitions, zepto

这是 jsFiddle：http: [//jsfiddle.net/ybGpJ/4/](http://jsfiddle.net/ybGpJ/4/)

这令人沮丧。在 Chrome 和 Safari 中，过渡效果很好，但在 Firefox 中，没有任何动画！这是为什么？

这似乎来自 addClass() 方法。在 Firebug 中打开控制台并打开和关闭类 .scene（用于在我的 css 中转换）后，我可以告诉你没有动画发生。它似乎只是切换背景图像和 h1 的可见性。

但是，如果我切换不透明度或变换的复选框（仍在萤火虫中），*它的动画效果就很好 gaahhhh ...*

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T17:22:22.023

我执行了以下步骤以使您的页面在 Firefox 中工作。

1.  我删除了`.scene {overflow:hidden;}`.
2.  我添加`-moz-transition: all 1s ease-in-out;`到两个类：`.page-title`和`.animated-header-bg`.
3.  最终结果：http: [//jsbin.com/amofih/1/watch](http://jsbin.com/amofih/1/watch)

以上在我的测试中适用于 Firefox 和 Chrome。您可以在此处编辑我的更改：http: [//jsbin.com/amofih/1/edit](http://jsbin.com/amofih/1/edit)。

我的更改很小，而且 IMO 并不理想。你有很多 CSS 过渡和转换。您可能想寻找一种更有效的方法来创建动画（可能通过 JS 库）。

另外，我知道我添加的`-moz-transition: all 1s ease-in-out;`只是覆盖了您的转换定义，但我认为它仍然对您有帮助。在这里，您至少可以看到它可以在 Firefox 中运行。您的定义可能有问题。我会四处搜索，因为有很多示例可供您参考。

*   [http://www.the-art-of-web.com/css/css-animation/#.UOhh8XePtLl](http://www.the-art-of-web.com/css/css-animation/#.UOhh8XePtLl)
*   [http://robertnyman.com/2010/04/27/using-css3-transitions-to-create-rich-effects/](http://robertnyman.com/2010/04/27/using-css3-transitions-to-create-rich-effects/)
*   [https://developer.mozilla.org/en-US/docs/CSS/transform](https://developer.mozilla.org/en-US/docs/CSS/transform)
*   [https://developer.mozilla.org/en-US/docs/CSS/transition](https://developer.mozilla.org/en-US/docs/CSS/transition)
*   [https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transforms](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transforms)

# design-patterns - 什么是领域模型中的贫血？

> ID：11414043
> 
> 赞同：1
> 
> 时间：2012-07-10T13:11:30.757
> 
> 标签：design-patterns, language-agnostic, anemic-domain-model

根据我从[Martin Fowler](http://www.martinfowler.com/bliki/AnemicDomainModel.html)的理解，贫血意味着将业务逻辑与领域对象分离，这些对象被简化为琐碎的 getter 和 setter，而领域行为则被移至服务层。我错过了什么吗？

*如果某个对象域*没有任何行为，我们如何调用它？您能否提供一些非常简短的贫血域模型代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:17:52.047

它通过代码展示，其中：

大多数代码以域对象（例如 Account 或 TransactionEntity）的名义处理传递数据结构（如果您愿意，可以使用属性包）。它们是“域对象”，主要是因为它们具有域中存在的事物的名称。

大多数逻辑驻留在外部“服务”中 - 包含对（或单个）数据结构列表进行操作的脚本。结果，服务需要访问/修改域对象的内部信息。因此，域对象自发地产生了许多 getter 和 setter。RIP 封装。

贫血是指领域类中领域逻辑/行为的缺失或缺乏。

更多指标：

*   “询问”方法的数量超过“告诉/执行”方法

# c# - 支持从右到左使用阿拉伯字符

> ID：11414044
> 
> 赞同：1
> 
> 时间：2012-07-10T13:11:35.570
> 
> 标签：c#, .net, windows, windows-ce, arabic

我目前正致力于将阿拉伯语支持添加到在 Windows CE 5.0 之上运行 .Net Compact Framework 应用程序的产品中。阿拉伯语支持已添加到操作系统中，并且 .Net 应用程序知道 AR-sa 语言环境。UI 元素的阿拉伯语翻译存储在一个资源文件中，根据我的一位同事的说法，它们是正确的方式并且可以正确阅读。当应用程序运行时，看起来所有字符都被反转了，这使得它看起来像是操作系统或应用程序正在镜像它们以提供 RTL 支持。当我们反转资源文件中的字符串时，它仍然看起来是一样的。

有没有人对可能出现的问题以及是否有任何解决方案有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:15:27.257

您是否在任何控件中获得 RTL 行为？在 CF 中，有些控件会提供 RTL，有些则不会。Daniel Moth[为那些不这样做的人写了一个解决方法](http://www.danielmoth.com/Blog/progress-on-rtl.aspx)（也使用 CE 5.0）。

您的整个操作系统现在是否设置为 RTL（即系统对话框等显示 RTL，还是仍然是 LTR）？如果系统还没有执行 RTL，那么您需要验证支持并且您的操作系统区域设置已设置，因为`Control.RightToLeft`不支持。当系统不是时，您可能会使用 P/Invokes Daniel 大纲（上面的链接）来强制控制进入 RTL。

# c# - 在 C# 中，如何将默认 get 与显式 set 混合使用？

> ID：11414051
> 
> 赞同：16
> 
> 时间：2012-07-10T13:11:50.533
> 
> 标签：c#, .net, properties, setter, automatic-properties

我想做这样的事情：

```
class Foo
{
    bool Property
    {
        get;
        set
        {
            notifySomethingOfTheChange();
            // What should I put here to set the value?
        }
    }
} 
```

有什么我可以放在那里设置值的吗？还是我必须明确定义`get`并在类中添加另一个字段？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T13:13:25.480

您要么有一个默认属性，带有编译器生成的支持字段和 getter 和/或 setter 主体，要么有一个自定义属性。

一旦定义了自己的 setter，就没有编译器生成的支持字段。您必须自己制作一个，并定义吸气剂体。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-10T13:13:24.823

没有办法。

*   您可以同时自动实现 setter 和 getter

    ```
    bool Property { get; set; } 
    ```

*   或者手动实现

    ```
    bool Property
    {
        get { return _prop; }
        set { _prop = value; }
    } 
    ```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-10T13:13:33.403

不，这是自动属性不是最合适的情况，因此您应该转到正确实现的属性：

```
class Foo
{
    private bool property;
    public bool Property
    {
        get
        {
            return this.property;
        }
        set
        {
            notifySomethingOfTheChange();
            this.property = value
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2018-07-25T20:41:21.253

在许多情况下，您可以使用“自动属性”功能，例如 public int Age { get; 放; } = 43;

这是一个很好的参考[http://www.informit.com/articles/article.aspx?p=2416187](http://www.informit.com/articles/article.aspx?p=2416187)

纳吉·K。

# objective-c - iphone - Objective-C“发送到已释放实例的消息

> ID：11414052
> 
> 赞同：1
> 
> 时间：2012-07-10T13:11:50.630
> 
> 标签：objective-c, xcode

我尝试使用此方法获取所有子视图，但是当我运行应用程序时，我有一条消息发送到 deallocated instance 错误。

```
subviewsArray = self.view.subviews;
for (int i=0; i <subviewsArray.count; i++) {
    UIView *subview = [subviewsArray objectAtIndex:i];
    if (subview.tag >= 0) {
        [subview removeFromSuperview];
    }
} 
```

在我的 .h

```
@property (nonatomic, strong) NSArray *subviewsArray; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T13:23:09.817

将您的循环代码更改为：

```
for (int i=subviewsArray.count - 1; i >= 0; --i) {
    UIView *subview = [subviewsArray objectAtIndex:i];
    if (subview.tag >= 0) {
        [subview removeFromSuperview];
    }
} 
```

您遇到此问题的原因是，当您的循环从 0 前进到第 10 个（假设是最后一个）视图时，您开始将它们从父视图中删除，因此计数也会发生变化，因此剩余视图的索引也会发生变化。

最后，您最终尝试删除视图并向其发送消息*removeFromSuperview*，该消息已被释放，这一切都是因为索引的更改。最好反向，最后一个索引到第一个。

我很惊讶，为什么你没有让 index out of bound 异常。

不只是在这里，一般来说，每当您遍历基于索引的集合并尝试删除元素时，您总会遇到这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:15:50.673

将循环代码更改为如下所示：

```
subviewsArray = self.view.subviews;
for (int i=0; i <subviewsArray.count - 1; i++) {
    UIView *subview = [subviewsArray objectAtIndex:i];
    if (subview.tag >= 0) {
        [subview removeFromSuperview];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T13:14:13.323

试试这个：

```
for(UIView *temp in self.view.subviews )
{
    [temp removeFromSuperview];
} 
```

或这个：

```
[self.view.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

希望这可以帮助。

干杯!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T13:14:31.213

```
 self.subviewsArray = self.view.subviews;
for (int i=0; i <self.subviewsArray.count - 1; i++) {
    UIView *subview = [self.subviewsArray objectAtIndex:i];
    if (subview.tag >= 0) {
        [subview removeFromSuperview];
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T13:15:45.920

首先虽然可能是 ARC 造成的，但也许简化 for 循环可以解决这个问题

```
for (UIView *subview in self.subviews)
{

} 
```

# c - 为什么 lseek 在 ubuntu 中以附加模式失败

> ID：11414054
> 
> 赞同：1
> 
> 时间：2012-07-10T13:12:16.267
> 
> 标签：c, linux, unix

```
//open file
if((fd = open("test.txt", O_RDWR | O_APPEND)) == -1)
  printf("open failed\n");

//set offset
if(lseek(fd, -8, SEEK_CUR) == -1)
  printf("cannot seek\n"); 
```

然后它打印“cannot seek”，这是为什么？
在 strerrno(errno) 之后，它显示“无效参数”
现在我发现问题了，SEEK_CUR 位于起始位置。
但为什么？我使用附加模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:45:38.843

当我确保搜索时的当前位置至少为 8 时，它对我有用，因此

```
lseek(fd, -8, SEEK_CUR) 
```

不会尝试在文件开始之前设置位置。

如果`lseek`将文件位置设置为负偏移量，则设置`errno`为`EINVAL`，报告为`Invalid argument`，就像您观察到的那样。

请注意，`open`将当前文件位置设置为文件的开头（至少我的 glibc 是`open`这样），因此`lseek(fd,-8,SEEK_END)`如果您想将位置设置为距离末尾 8 个字节，则需要这样做。但当然，如果文件小于 8 个字节，这仍然会失败。

# c++ - 从欠定系统中删除不可解的方程

> ID：11414057
> 
> 赞同：4
> 
> 时间：2012-07-10T13:12:21.210
> 
> 标签：c++, linear-algebra, eigen

我的程序试图求解一个线性方程组。为了做到这一点，它组装了 matrix`coeff_matrix`和 vector `value_vector`，并使用 Eigen 来解决它们，如下所示：

```
Eigen::VectorXd sol_vector = coeff_matrix
        .colPivHouseholderQr().solve(value_vector); 
```

问题是该系统既可能被过度确定，也可能被低估。在前一种情况下，Eigen 要么给出正确的解，要么给出不正确的解，我使用`coeff_matrix * sol_vector - value_vector`.

但是，请考虑以下方程组：

```
a + b - c     =  0
        c - d =  0
        c     = 11
      - c + d =  0 
```

在这种特殊情况下，Eigen 正确地求解了后面的三个方程，但也给出了`a`和的解`b`。

我想要实现的是，只有只有一个解的方程才能被求解，其余的方程（这里的第一个方程）将保留在系统中。

换句话说，我正在寻找一种方法来找出当时可以在给定的方程组中求解哪些方程，哪些不能，因为会有多个解。

你能提出任何实现这一目标的好方法吗？

*编辑*：请注意，在大多数情况下，矩阵不会是正方形的。我在这里又添加了一行，只是为了注意也可能发生过度决定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:36:00.787

我认为您想要的是[奇异值分解 (SVD)](http://en.wikipedia.org/wiki/Singular_value_decomposition)，它将为您提供您想要的确切信息。SVD之后，“只有一个解的方程将被解”，解是伪逆的。它还将为您提供零空间（无限解的来源）和左零空间（不一致的来源，即无解）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:49:12.097

根据 SVD 评论，我能够做这样的事情：

```
Eigen::FullPivLU<Eigen::MatrixXd> lu = coeff_matrix.fullPivLu();

Eigen::VectorXd sol_vector = lu.solve(value_vector);
Eigen::VectorXd null_vector = lu.kernel().rowwise().sum(); 
```

AFAICS，`null_vector`对应于单个解的行是`0`s 而对应于非确定解的行是`1`s。我可以使用 Eigen 的默认阈值在所有示例中重现这一点。

但是，我不确定我是在做正确的事情还是只是注意到随机模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:24:20.197

您需要的是计算系统的行列式。如果行列式是 0，那么你有无限数量的解决方案。如果行列式很小，则存在解决方案，但我不相信计算机找到的解决方案（它会导致数值不稳定）。

这里是什么是行列式以及如何计算它的链接：[http ://en.wikipedia.org/wiki/Determinant](http://en.wikipedia.org/wiki/Determinant)

请注意，高斯消除也应该起作用：[http](http://en.wikipedia.org/wiki/Gaussian_elimination) ://en.wikipedia.org/wiki/Gaussian_elimination 使用这种方法，如果有无限数量的解决方案，您最终会得到 0 行。

**编辑**

如果矩阵不是方阵，首先需要提取一个方阵。有两种情况：

1.  你有比方程更多的变量：那么你要么没有解，要么有无数个解。
2.  你有比变量更多的方程：在这种情况下，找到一个非空行列式的平方子矩阵。求解该矩阵并检查解。如果解决方案不适合，则意味着您没有解决方案。如果解决方案合适，则意味着额外的方程线性依赖于提取的方程。

在这两种情况下，在检查矩阵的维度之前，删除只有 0 的行和列。

至于高斯消除，它应该直接与非方阵一起工作。但是，这一次，您应该检查非空行（即具有一些非 0 值的行）的数量是否等于变量的数量。如果它更少，你有无限数量的解决方案，如果它更多，你没有任何解决方案。

# java - java: 正则表达式

> ID：11414060
> 
> 赞同：1
> 
> 时间：2012-07-10T13:12:33.100
> 
> 标签：java, regex

我有一个包含大量图像标签的 Html 字符串，我需要获取标签并进行更改。例如：

```
String imageRegex = "(<img.+(src=\".+\").+/>){1}";
String str = "<img src=\"static/image/smiley/comcom/9.gif\" smilieid=\"296\" border=\"0\" alt=\"\" />hello world<img src=\"static/image/smiley/comcom/7.gif\" smilieid=\"294\" border=\"0\" alt=\"\" />";
Matcher matcher = Pattern.compile(imageRegex, Pattern.CASE_INSENSITIVE).matcher(msg);
int i = 0;
while (matcher.find()) {
    i++;
    Log.i("TAG", matcher.group());
} 
```

结果是：

```
<img src="static/image/smiley/comcom/9.gif" smilieid="296" border="0" alt="" />hello world<img src="static/image/smiley/comcom/7.gif" smilieid="294" border="0" alt="" /> 
```

但这不是我想要的，我想要的结果是

```
<img src="static/image/smiley/comcom/9.gif" smilieid="296" border="0" alt="" />
<img src="static/image/smiley/comcom/7.gif" smilieid="294" border="0" alt="" /> 
```

我的正则表达式有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:19:38.163

试试看`(<img)(.*?)(/>)`，这应该可以解决问题，虽然是的，你不应该使用 Regex 来解析 HTML，因为人们会一遍又一遍地告诉你。

我没有安装 Eclipse，但我有 VS2010，这对我有用。

```
 String imageRegex = "(<img)(.*?)(/>)";
        String str = "<img src=\"static/image/smiley/comcom/9.gif\" smilieid=\"296\" border=\"0\" alt=\"\" />hello world<img src=\"static/image/smiley/comcom/7.gif\" smilieid=\"294\" border=\"0\" alt=\"\" />";
        System.Text.RegularExpressions.MatchCollection match = System.Text.RegularExpressions.Regex.Matches(str, imageRegex, System.Text.RegularExpressions.RegexOptions.IgnoreCase);
        StringBuilder sb = new StringBuilder();
        foreach (System.Text.RegularExpressions.Match m in match)
        {
            sb.AppendLine(m.Value);
        }
        System.Windows.MessageBox.Show(sb.ToString()); 
```

结果：

```
<img src="static/image/smiley/comcom/9.gif" smilieid="296" border="0" alt="" /> 
<img src="static/image/smiley/comcom/7.gif" smilieid="294" border="0" alt="" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:21:46.807

David M 是正确的，你真的不应该尝试这样做，但你的具体问题是`+`你的正则表达式中的量词是贪婪的，所以它会匹配可能匹配的最长子字符串。

有关量词的更多详细信息，请参阅[正则表达式教程](http://www.regular-expressions.info/repeat.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:38:27.573

我不建议使用正则表达式来解析 HTML。请考虑 JSoup 或类似的解决方案

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
Elements images = doc.select("img"); 
```

[每次您尝试使用正则表达式解析 HTML 时，邪恶的孩子都会流着处女的血，而俄罗斯黑客会破解您的 web 应用程序。](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)

# java - 使用数据报流量在哪里运行 java exe 文件？

> ID：11414061
> 
> 赞同：0
> 
> 时间：2012-07-10T13:12:34.070
> 
> 标签：java, web-hosting, datagram

我有一个使用数据报流量的小 exe 文件（由 Java Runnable jar 制成）。

它需要大约 30MB 的 RAM 和 10-20 KBps 的网络 IO。

问题是我在哪里可以 24*7 运行这个文件？

-我不能购买专用机器（太贵且不需要）。

-廉价的网络主机不支持数据报流量。

-Google 应用引擎不支持数据报？

如果我能找到便宜的主机来运行它，我可以花几天时间将语言从 Java 更改为其他语言。

还是从家里运行这个是唯一的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:14:50.563

该程序使用 30MB 内存，10-20KBps 网络 IO，只要它不占用您的 CPU 周期，我说在您的主机上运行它。

# python - 按时间范围分组价值

> ID：11414066
> 
> 赞同：0
> 
> 时间：2012-07-10T13:12:52.993
> 
> 标签：python

这是我在解析 csv 文件时用来按时间范围对项目进行分组的方法，它工作正常，但现在我想按 4h 和 30mn 创建切片，这个特定的代码只适用于按小时切片，我想创建 4 小时切片（或 30m 切片）

```
tf = "%d-%b-%Y-%H"

lmb = lambda d: datetime.datetime.strptime(d["Date[G]"]+"-"+d["Time[G]"], "%d-%b-%Y-%H:%M:%S.%f").strftime(tf)

for k, g in itertools.groupby(csvReader, key = lmb):
    for i in g:
        "do something" 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:24:28.483

一般最好的方法是让`groupby`键返回一个元组，将项目分组到适当的桶中。

例如，对于 4h 切片：

```
def by_4h(d):
    dt = datetime.datetime.strptime(d["Date[G]"]+"-"+d["Time[G]"], "%d-%b-%Y-%H:%M:%S.%f")
    return (dt.year, dt.month, dt.day, dt.hour // 4) 
```

您现在知道，如果两个时间在同一个 4 小时切片中（从午夜开始），那么`hour // 4`这些时间将给出相同的结果，因此您在此处结束元组。

或者对于 30m 切片：

```
def by_30m(d):
    dt = datetime.datetime.strptime(d["Date[G]"]+"-"+d["Time[G]"], "%d-%b-%Y-%H:%M:%S.%f")
    return (dt.year, dt.month, dt.day, dt.hour, dt.minute // 30) 
```

这是使用`//`整数除法来兼容 Python 3，但它也适用于 Python 2.x，并清楚地表明您需要整数除法。

# asp.net - 如何设置旋转编辑器 aspx devexpress 的默认值

> ID：11414071
> 
> 赞同：0
> 
> 时间：2012-07-10T13:13:14.780
> 
> 标签：asp.net, devexpress, reporting, default-value

我有一个使用`aspx`( `DevExpress`component)进行的报告和数据过滤`SpinEditor`。所以主要问题是我不希望默认值`SpinEditor`等于0。

我想设置它以使报告的所有记录可见。当我将默认值设置为 0 时，没有记录可见，因为所有记录都取决于使用 this 进行的过滤`SpinEditors`。请让我知道它是否可行，如果可行，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:24:07.473

为什么不设置“值”属性？那么这是你的默认值。所以只需输入：

```
spinedit1.value = 50; 
```

所以它会显示 50 条记录。我希望我理解你的正确。

# eclipse - 从 Eclipse 中的现有 Java 项目中删除 SVN

> ID：11414074
> 
> 赞同：7
> 
> 时间：2012-07-10T13:13:22.667
> 
> 标签：eclipse, svn

我在 Eclipse 中有一个版本化的 Java 项目。

我决定删除“SVN”，这样当我`right-click > Team`在项目中时，我只能获得以下选择：`Share project ...`and`Create patch ...`而不是`commit ...`,`Update`等。

从 Eclipse 项目中删除版本控制的最佳（最干净）方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-10T13:32:45.333

如果您的项目使用 SVN 进行了正确的版本控制，您应该能够在上下文菜单的“团队”菜单项下看到“与存储库同步”、“提交”、“更新”。在这种情况下，您可以使用`Team > Disconnect`.

如果在 Team 菜单下看不到这些菜单项，请检查`.svn`项目根目录中是否存在（隐藏）目录。

`Team > Disconnect`如果您没有对代码进行大量更改，也许您可​​以再次从存储库中检出该项目并使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T13:17:37.117

尝试从项目的根文件夹中递归删除所有 .svn 文件夹。例如，在 Linux 机器上，您应该在项目的根文件夹中发出以下命令：

rm -rf`查找。-type d -name .svn`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-11T14:41:05.937

您只需删除顶级 .svn 文件夹。然后共享项目，Eclipse 足够聪明，可以删除所有递归的 .svn 文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T05:38:00.350

一种从存储库导出 SVN 项目的好方法，而不是没有 .svn 文件夹的签出，然后可以使用本地工作区更新到具有类似文件夹结构的不同分支或存储库。

```
svn export [-r REV] URL[@PEGREV] [PATH]

Eg : http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html 
```

[http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-10T02:00:25.227

您可以通过以下方式删除项目中的 .svn 文件夹：

1.  打开终端
2.  cd "你的项目路径"
3.  寻找 。-type d -name .svn -depth -exec rm -rf {} \;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-16T04:36:41.703

一个简单的解决方案：

`.svn`在您的项目目录中找到该文件夹​​。它是一个隐藏文件夹，所以从`File-> show hidden folder`. 然后删除它。

# java - 如何在java中将两个对象列表合并为一个

> ID：11414083
> 
> 赞同：1
> 
> 时间：2012-07-10T13:13:46.633
> 
> 标签：java

嗨，我有两个 ArrayList 对象，我需要将其合并为一个列表。这是我的要求

我的第一个清单

列表A

```
{StaffFirstName=f2, resourceId=2, totalcost=18055.0, totalPercentageInvolvment=550, ResourceCost=2300, staffRole=tl} 
```

和列表B

```
{sixthmonth=60, fourthmonth=40, firstmonth=10, fifthmonth=50, secondmonth=20, `thirdmonth=30}` 
```

我需要结果是

结果

```
{StaffFirstName=f2, resourceId=2, totalcost=18055.0, totalPercentageInvolvment=550, ResourceCost=2300, staffRole=tl, sixthmonth=60, fourthmonth=40, firstmonth=10, fifthmonth=50, secondmonth=20, thirdmonth=30} 
```

**编辑！**

实际上我的两个列表都是 arrayList 所以我的 listA 将是

```
{StaffFirstName=f2, resourceId=2, totalcost=18055.0, totalPercentageInvolvment=550, ResourceCost=2300, staffRole=tl}
{StaffFirstName=demo35, resourceId=3, totalcost=19625.0, totalPercentageInvolvment=785, ResourceCost=2500, staffRole=sweeper} 
```

列表 B 将是

```
{sixthmonth=100, fourthmonth=30, firstmonth=40, fifthmonth=25, secondmonth=100, thirdmonth=90}
{sixthmonth=100, fourthmonth=30, firstmonth=40, fifthmonth=25, secondmonth=100, thirdmonth=90} 
```

结果应该是

```
{StaffFirstName=f2, resourceId=2, totalcost=18055.0, totalPercentageInvolvment=550, ResourceCost=2300, staffRole=tl, sixthmonth=60, fourthmonth=40, firstmonth=10, fifthmonth=50, secondmonth=20, thirdmonth=30}
{StaffFirstName=demo35, resourceId=3, totalcost=19625.0, totalPercentageInvolvment=785, ResourceCost=2500, staffRole=sweeper, sixthmonth=100, fourthmonth=30, firstmonth=40, fifthmonth=25, secondmonth=100, thirdmonth=90} 
```

这意味着我的拖车列表的每一行都必须明智地附加我的行。如果我使用`addAll`函数，两个列表就像这样附加

```
{StaffFirstName=f2, resourceId=2, totalcost=18055.0, totalPercentageInvolvment=550, ResourceCost=2300, staffRole=tl}
{StaffFirstName=demo35, resourceId=3, totalcost=19625.0, totalPercentageInvolvment=785, ResourceCost=2500, staffRole=sweeper}
{sixthmonth=60, fourthmonth=40, firstmonth=10, fifthmonth=50, secondmonth=20, thirdmonth=30}
{sixthmonth=100, fourthmonth=30, firstmonth=40, fifthmonth=25, secondmonth=100, thirdmonth=90}. But i need to append the two list row wise. Is it possible? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T13:16:57.163

鉴于：

```
 List<MyClass> listA, listB; 
```

尝试这个：

```
 List<MyClass> union = new ArrayList<MyClass>();
   union.addAll( listA );
   union.addAll( listB ); 
```

**编辑（Java 8 或更高版本）**

在 Java 8 或更高版本中，您可以使用流将列表连接到单个表达式中。

```
List<MyClass> union = Stream.concat( listA.stream(), listB.stream())
            .collect( Collectors.toList()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T13:18:20.877

我不太确定你所拥有的是一个`ArrayList`（来自输出），但即便如此，如果它是一个实现`Collection`接口的类，你可以使用该`addAll`方法，独立于确切的类（只要对象是同类型）。

[http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#addAll(java.util.Collection](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#addAll(java.util.Collection) , T...)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T13:16:26.657

如果这些是包含相同类型的 ArrayList<> 对象，则可以使用：

```
list1.addAll(list2); 
```

它应该可以很好地满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:19:54.573

类型是数组的类型......

```
 Type[] concat(Type[] listA, Type[] listB) 
     {
       Type[] list= new Type[listA.length+listB.length];
       System.arraycopy(listA, 0, list, 0, listA.length);
       System.arraycopy(listB, 0, list, listA.length, listB.length);

       return list;
     } 
```

# iphone - JSON解析，如何从服务器获取响应

> ID：11414085
> 
> 赞同：0
> 
> 时间：2012-07-10T13:13:51.323
> 
> 标签：iphone, ios, json, parsing

我有以下详细信息，用于从服务器获取数据。methodIdentifier 和 Web 服务名称有什么用？

```
{"zip":"12345","methodIdentifier":"s_dealer"}

url:- http://xxxxxxxxxxxxxxx.com/api.php
method: post
web service name: s_dealer

response : {"success":"0","dealer":[info...]} 
```

我不知道如何使用 url发送**邮政编码“12345” 。**请指引我正确的方向。我使用以下。

```
-(void)IconClicked:(NSString *)zipNumber 
{

NSString *post = [NSString stringWithFormat:@"&zipNumber=%@",zipNumber];

NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];

[request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://xxxxxxxxxxxxxxxxxxx.com/api.php"]]];

[request setHTTPMethod:@"POST"];

[request setValue:postLength forHTTPHeaderField:@"Content-Length"];

[request setHTTPBody:postData];

NSURLConnection *conn = [[NSURLConnection alloc]initWithRequest:request delegate:self];

if(conn)
{
    NSLog(@"Connection Successful");
}
else
{
    NSLog(@"Connection could not be made");
}

  receivedData = [[NSMutableData alloc]init];

} 
```

当我在控制台中打印响应时：\“字符串意外结束\”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:48:32.493

嘿，兄弟，检查我对相同问题的回答可能会对您有所帮助...您必须使用 NSURLConnection Delegates 来获取数据

[无法从 Iphone 生成 Json 请求正文](https://stackoverflow.com/questions/11359593/could-not-make-json-request-body-from-iphone/11359952#11359952)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:27:09.623

在不了解有关 API 的更多信息的情况下，我无法确定您的要求，但似乎服务器期望请求包含 JSON。您当前为请求创建正文的方式是使用标准 POST 变量。

您是否尝试过更改：

```
NSString *post = [NSString stringWithFormat:@"&zipNumber=%@",zipNumber]; 
```

至：

```
NSString *post = [NSString stringWithFormat:@"{\"zip\":\"%@\",\"methodIdentifier\":\"s_dealer\"}",zipNumber]; 
```

关于您的其他问题，我猜 API 有一个 URL。服务器使用`methodidentifier`它来确定要运行的服务器方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:28:56.377

您收到此错误是因为您没有收到 json 作为响应，而是来自 Apache（或其他）的错误，它具有不同的结构，并且 json 无法解析它。尝试我的方法来启动连接，以获得成功的连接。

声明一个 NSURLConnection 属性并合成它。现在：

```
NSString *post = [NSString stringWithFormat:@"zipNumber=%@",zipNumber];

    NSString *toServer = [NSString stringWithString:@"your server with the last slash character"];

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@api.php?", toServer]];
    NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:NO];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *urlRequest = [[[NSMutableURLRequest alloc] init] autorelease];
    [urlRequest setURL:url];
    [urlRequest setHTTPMethod:@"POST"];
    [urlRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [urlRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [urlRequest setValue:@"utf-8" forHTTPHeaderField:@"charset"];
    [urlRequest setHTTPBody:postData];
    [urlRequest setTimeoutInterval:30];

    NSURLConnection *tmpConn = [[[NSURLConnection alloc] initWithRequest:urlRequest delegate:self] autorelease];

    self.yourConnectionProperty = tmpConn; 
```

现在您在连接委托中使用 self.yourConnectionProperty。干杯!

# java - 休眠 oracle 标识符太长 ORA-00972

> ID：11414094
> 
> 赞同：6
> 
> 时间：2012-07-10T13:14:14.933
> 
> 标签：java, oracle, hibernate, oracle11g

我被这个问题困住了。数据库模式是由其他人提供的，所以我不能简单地更改名称。我尝试在任何地方添加适当的注释，也许我遗漏了一些东西（很明显）？

这是我的完整映射（很多类），我将省略 getter/setter。

问题是当休眠试图获取所有`List<ControlRuleAttrib> controlRuleAttribs`

**控制规则**

```
@Entity
@Table(name = "CONTROL_RULE")
public class ControlRule implements Serializable {
 @Id
 @GeneratedValue(strategy = GenerationType.IDENTITY)
 @Column(name = "CONTROL_RULE_ID")
 private Long id;
 @ManyToOne(fetch = FetchType.LAZY)
 @Cascade(CascadeType.ALL)
 @JoinColumn(name = "CONTROL_RULE_TYPE_ID")
 @ForeignKey(name = "CONTROL_RULE_TYPE_ID")
 private ControlRuleType controlRuleType;
 @Column(name = "JOB_NM")
 private String jobname;
 @Column(name = "LIBRARY_NM")
 private String libraryname;
 @Column(name = "TABLE_NM")
 private String tablename;
 @Column(name = "COLUMN_NM")
 private String columnname;

 @OneToMany(fetch = FetchType.LAZY)
 @Cascade(CascadeType.ALL)
 @JoinTable(name = "CONTROL_RULE_ATTRIB", joinColumns = {
  @JoinColumn(name = "CONTROL_RULE_ID", nullable = false, updatable = false)
 })
 private List < ControlRuleAttrib > controlRuleAttribs;
} 
```

**控制规则属性**

```
@Table(name = "CONTROL_RULE_ATTRIB")
@Entity
public class ControlRuleAttrib {
 @EmbeddedId
 private ControlRuleAttribPK controlRuleAttribPK;

 @Column(name = "ATTRIBUTE_VALUE")
 private String attributeValue;
} 
```

**ControleRuleAttribPK** 这里的问题是，是否有可能以某种方式从中获取`ControlRuleAttribType`实体`ControlRuleAttrib`？正如您在下面看到`ControlRuleAttribTypeId`的是`ControleRuleAttribType`. 我想得到整数的整个对象。

```
@Embeddable
public class ControlRuleAttribPK implements Serializable {
 @Column(name = "CONTROL_RULE_ID")
 private Long controlRuleId;

 @Column(name = "ATTRIBUTE_SEQ_NUM")
 private Integer attributeSeqNum;

 @Column(name = "CONTROL_RULE_ATTRIB_TYPE_ID")
 private Integer controlRuleAttribTypeId;
} 
```

**控制规则属性类型**

```
@Entity
@Table(name = "CONTROL_RULE_ATTRIB_TYPE")
public class ControlRuleAttribType implements Serializable {
 @Id
 @GeneratedValue(strategy = GenerationType.IDENTITY)
 @Column(name = "CONTROL_RULE_ATTRIB_TYPE_ID")
 private Integer id;
 @Column(name = "CONTROL_RULE_ATTRIB_TYPE_NM")
 private String typename;
 @Column(name = "CONTROL_RULE_ATTRIB_TYPE_DESC")
 private String typedesc;

 @ManyToOne(fetch = FetchType.LAZY)
 @Cascade(CascadeType.ALL)
 @JoinColumn(name = "CONTROL_RULE_TYPE_ID")
 @ForeignKey(name = "CONTROL_RULE_TYPE_ID")
 private ControlRuleType controlruletype;
} 
```

**控制规则类型**

```
@Entity
@Table(name = "CONTROL_RULE_TYPE")
public class ControlRuleType implements Serializable {
 @Id
 @GeneratedValue(strategy = GenerationType.IDENTITY)
 @Column(name = "CONTROL_RULE_TYPE_ID")
 private Integer id;
 @Column(name = "CONTROL_RULE_TYPE_NM")
 private String typename;
 @Column(name = "CONTROL_RULE_TYPE_DESC")
 private String typedesc;
} 
```

**编辑**

这是堆栈跟踪：

[https://gist.github.com/a30dd9ce534d96bb9a97](https://gist.github.com/a30dd9ce534d96bb9a97)

你会发现，它在这里失败了：

> 在 com.execon.controllers.main.MainPageController.getMainPage(MainPageController.java:33) [类：]

就是这样：

```
List<ControlRule> list = SessionFactoryUtils.openSession(
    sessionFactory ).createQuery( "from ControlRule" ).list();
System.out.println( list ); 
```

我添加的每个映射对象都有`toString()`这样声明的方法：

```
@Override
public String toString()
{
    String s = "ControlRule{";
    s += "id=" + id.toString();
    s += ", controlRuleType=" + controlRuleType;
    s += ", jobname='" + jobname + '\'';
    s += ", libraryname='" + libraryname + '\'';
    s += ", tablename='" + tablename + '\'';
    s += ", columnname='" + columnname + '\'';
    s += ", controlRuleAttribs=" + controlRuleAttribs;
    s += '}';
    return s;
} 
```

和休眠请求：

[https://gist.github.com/c8584113522757a4e0d8/4f31dc03e7e842eef693fa7ba928e19d27b3ca26](https://gist.github.com/c8584113522757a4e0d8/4f31dc03e7e842eef693fa7ba928e19d27b3ca26)

请帮忙 ：）

**编辑 2**

好吧，在阅读了@Jens 的答案后，我对代码进行了一些更改。首先我按照你写的做了，它给出了错误：

> org.hibernate.AnnotationException：从 com.execon.models.controlrules.ControlRule 引用 com.execon.models.controlrules.ControlRuleAttrib 的外键具有错误的列数。应该是 3

我想这是对的，因为我有复合主键。

然后我这样尝试：

```
@OneToMany(fetch = FetchType.LAZY)
@Cascade(CascadeType.ALL)
@JoinTable(name = "CONTROL_RULE_ATTRIB",
        joinColumns = {
                @JoinColumn(name = "CONTROL_RULE_ID", nullable = false, updatable = false)
        },
        inverseJoinColumns = {
                @JoinColumn(name = "CONTROL_RULE_ID", nullable = false, updatable = false),
                @JoinColumn(name = "CONTROL_RULE_ATTRIB_TYPE_ID", nullable = false, updatable = false),
                @JoinColumn(name = "ATTRIBUTE_SEQ_NUM", nullable = false, updatable = false)
        })
private List<ControlRuleAttrib> controlRuleAttribs; 
```

非常接近，但它给了我以下例外：

> 集合映射中的重复列..

所以最后我删除了

```
joinColumns = 
{
    @JoinColumn(name = "CONTROL_RULE_ID", nullable = false, updatable = false)
} 
```

除了当我尝试到达集合时，所有的东西都编译了，Hibernate 正在执行以下查询：

[https://gist.github.com/c88684392f0b7a62bea5](https://gist.github.com/c88684392f0b7a62bea5)

最后一行是`controlrul0_.CONTROL_RULE_CONTROL_RULE_ID=?`while it should be `controlrul0_.CONTROL_RULE_ID=?`。

无论如何我可以让它工作吗？：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:13:01.320

在过去几个小时为此苦苦挣扎之后，我终于使它在我的项目中工作。我做的是这样的：

**控制规则**

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "controlRuleAttribPK.controlRuleId")
@Cascade(CascadeType.ALL)
private List<ControlRuleAttrib> controlRuleAttribs; 
```

基本上指出集合应该使用来自复合主键的 controlRuleId。到目前为止，它工作得很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:30:23.133

我不清楚哪个标识符太长，但我可以建议您可以尝试将`@Id`带注释的字段类型从更改`Integer`为`Long`。获得有关您的问题的一些详细信息（堆栈跟踪等）会很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:43:11.730

问题是列

```
CONTROL_RULE_ATTRIB.controlRuleAttribs_CONTROL_RULE_ATTRIB_TYPE_ID 
```

太长了，它不可能存在于您的数据库中。我在问题中没有看到任何提示它实际上是如何命名的，但我假设正确的名称是

```
CONTROL_RULE_ATTRIB.CONTROL_RULE_ATTRIB_TYPE_ID 
```

所以问题是：为什么hibernate试图访问这个列。它所在的表是一个映射表，在休眠中映射为：

```
@OneToMany(fetch = FetchType.LAZY)
@Cascade(CascadeType.ALL)
@JoinTable(name = "CONTROL_RULE_ATTRIB", joinColumns = {@JoinColumn(name = "CONTROL_RULE_ID", nullable = false, updatable = false)})
private List<ControlRuleAttrib> controlRuleAttribs; 
```

如果您查看 @JoinTable 注释，您会注意到它定义了使用时的表名和连接列。但是一个映射表有两组连接列。未指定第二个。因此，您配置的 NamingStrategy 或者如果您没有配置任何默认值，则使用。只需使用属性 inverseJoinColumns 指定另一组连接列，一切都应该没问题。

完整的注释应如下所示：

```
@JoinTable(name = "CONTROL_RULE_ATTRIB", joinColumns = {@JoinColumn(name = "CONTROL_RULE_ID", nullable = false, updatable = false)}, inverseJoinColumns = {@JoinColumn(name = "CONTROL_RULE_ATTRIB_TYPE_ID")}) 
```

注意：我不知道您是否还需要该列上的任何可空、可更新的东西。

另请参阅[JoinTable 注释的文档](http://docs.oracle.com/javaee/5/api/javax/persistence/JoinTable.html)

# algorithm - 实现高效的配对算法

> ID：11414096
> 
> 赞同：0
> 
> 时间：2012-07-10T13:14:16.183
> 
> 标签：algorithm, theory, matching

假设我有两个对象列表，我想将列表 1 中的每个对象与列表 2 中的每个对象匹配。

这可能是人们立即想出的算法。

```
for( it_1=list_1.begin() ; it_1!=list_1.end() ; it_1++ )
  {
      for( it_2=list_2.begin() ; it_2!=list_2.end() ; it_2++ )
      {
          //now match 
           match(*it_1,*it_2);
      }

  } 
```

我想知道是否有更好的方法来做到这一点。这需要 O(n1*n2)，其中 n1 和 n2 分别是 list_1 和 list_2 的长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:08:23.730

您可以在此处使用多线程，根据您要查找的大小和效率，将 list1 分为 2 或 3 个部分，并在每个线程中使用 list2 运行匹配算法并将结果整理回调用者。

看看有没有帮助。。

# c# - 实体框架：具有不同类型的外键

> ID：11414098
> 
> 赞同：3
> 
> 时间：2012-07-10T13:14:28.257
> 
> 标签：c#, .net, oracle, entity-framework

我必须从旧数据库（在 oracle 中）将大量数据导入 SQL Server 数据库。此导入将在每晚完成，并且可以从 .net 应用程序（asp 或重客户端）启动

我正在使用 devart 连接器连接到数据库。

我完成了数据库连接的配置并开始创建一个仅包含我感兴趣的数据的 edmx。

我遇到了一个奇怪的事情：似乎外键是一个Number(10)(翻译成int64)，而引用的主键是一个Number(8)(翻译成int32)。

我只是不知道为什么要这样做，而且我永远无法梦想改变这一点（:()。

问题是我的模型中有错误：

```
Error 112: The types of all properties in the Dependent Role of a referential 
constraint must be the same as the corresponding property types in the Principal 
Role. The type of property 'GSM_ID' on entity 'My.NameSpace.Store.GG_IRTSPEZ' does
not match the type of property 'ID' on entity 'My.NameSpace.Store.GG_STAMM' in the 
referential constraint 'ORACLE_GIRT_GSM_FK'. 
```

您对如何解决此问题有任何想法吗？

# android - Android Handler中removeCallbacks(Runnable r)是什么意思

> ID：11414101
> 
> 赞同：17
> 
> 时间：2012-07-10T13:14:37.350
> 
> 标签：android, android-handler

我想知道 Handler 中 removeCallbacks(Runnable r) 的确切含义是什么。我浏览了它的[文档](http://developer.android.com/reference/android/os/Handler.html#removeCallbacks%28java.lang.Runnable%29)，它只是说“删除消息队列中的 Runnable r 的所有待处理帖子”。

现在我的问题是，如果我的消息已经由我的处理程序开始处理，并且如果我调用`removeCallbacks`，它会停止处理我的半完成消息吗？或者即使我调用`removeCallbacks`已经由我的处理程序开始处理的消息（当我调用时`post(Runnable r)`）也会被执行？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T13:34:11.617

当您创建一个 new`Handler`时，它会绑定到创建它的线程的线程/消息队列。从那时起，它将向该消息队列传递消息和可运行文件，并在它们从消息队列中出来时执行它们。`removeCallbacks`只是从队列中删除那些尚未开始处理的可运行文件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-10T13:26:41.603

Runnables 应该只在它们从消息队列中出来时被执行，所以如果你的消息已经开始处理它不应该通过调用`removeCallbacks`. 它应该已经被删除，所以它将继续处理。

# javascript - 按 ID 更改 HTML 元素

> ID：11414110
> 
> 赞同：0
> 
> 时间：2012-07-10T13:14:51.993
> 
> 标签：javascript, html, class

> **可能重复：**
> [使用 JavaScript 更改元素的 CSS 类](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)

找到了很多关于这个话题的话题，但没有一个对我有帮助。我有：

```
<div id="text-6" class="block col-228"> 
```

Javascript 代码应该添加新的类拟合，所以结果应该是：

```
<div id="text-6" class="block col-228 fit"> 
```

如何用 javascript 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:16:27.443

试试这样：

```
var elem = document.getElementById("text-6");
elem.setAttribute("class", elem.getAttribute("class")+" fit"); 
```

**重要提示：**您需要确保您`DOM Hierarchy`的构建完全，然后尝试操作`DOM Element`s。这就是为什么您需要将`DOM`操作脚本放在`window.onload`回调中，或者如果您使用`jQuery`, 则在`$(document).ready`回调中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:16:32.780

您将以下内容放在脚本标签之间。

```
document.getElementById('text-6').className += " fit"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T13:16:55.010

我建议使用[jQuery](http://jquery.com)。然后你可以做这样的事情：

```
$("#text-6").addClass("fit"); 
```

编辑：

包含整个 jQuery 库对于您的情况可能有点过头了，但是如果您经常处理 DOM 操作，jQuery 可以简化很多事情。如果只是为了这一件事，那么提供的其他一些答案会更好。

# javascript - 在javascript中获取值堆叠中仍然较少的数组键

> ID：11414113
> 
> 赞同：3
> 
> 时间：2012-07-10T13:15:02.950
> 
> 标签：javascript, algorithm, node.js, logic

我有一个问题，我试图计算有多少孩子的年龄（作为关键）如下，但我们希望得到基于孩子的大孩子组（在这种情况下是 4 和 2）> = 4 个孩子组我想获得可以组成一个 bigkids 组的最大年龄数。

**问题我怎样才能得到最大年龄小于/等于 4 个孩子的新创建组的年龄？**

所以这是我们输入的内容

```
max_bigest_kids_in_group = 4
kids object = {
//age 0 have 7 kids
'0' : 7
//age 1 have 3 kids
'1' : 3
//age 2 have 2 kids
'2' : 2 
//age 4 have 1 kids
'4' : 1
//lets say there is no age 3 or 5,6 and so on.
} 
```

这是我目前在psudo中尝试过和目前所做的

```
try    biggest  next biggest 
    ('4' = 1) + ('2' = 2)  (oke becouse 1+2 is 3 >= 4) save array [4 and 2]
try    biggest  next biggest next biggest
    ('4' = 1) + ('2' = 2) + ('1' = 3) (not oke becouse 1+2+3 is 6 >= 4) stop becouse its more then x = 4
    get array [4 and 2] 

    // expected result is {'4','2'} or ['4','2'] so if max_bigest_kids_in_group = 6 then it will be ['4','2','1'] 
```

**我们怎样才能得到预期的结果？在javascript中**

附言。对不起，如果标题不是那么准确，如果有任何建议，请评论或编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:32:42.970

我假设您的对象`kids`默认情况下未排序。此外，在 JS 中，您不能依赖[for...in](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)循环返回属性的顺序（有关详细信息，请参阅链接）。因此，第一步是将对象转换为可以排序的结构，并确保获得的顺序是正确的：

```
kids  = {
    //age 0 have 7 kids
    '0' : 7,
    //age 1 have 3 kids
    '1' : 3,
    //age 2 have 2 kids
    '2' : 2,
    //age 4 have 1 kids
    '4' : 1
    //lets say there is no age 3 or 5,6 and so on.
}

var array = [];

for (var age in kids) {
    if (kids.hasOwnProperty(age)) {
        array.push({age: age, count: kids[age]});
    }
} 
```

拥有它之后，您可以按如下方式对数组进行排序：

```
array.sort(function(a, b) { return a.count - b.count }); 
```

然后，您可以进行计算：

```
var maxKids = 4;
var groups = [];
var count = 0;

for (var i = 0; i < array.length; i++) {
    count += array[i].count;

    if (count <= maxKids)
        groups.push(array[i].age);
    else
        break;
}

console.log(groups); 
```

此方法还涵盖了所有孩子组何时超过您可以拥有的最大孩子数，因此您将获得一个空数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:47:10.467

这很简单。就像在你的伪代码中一样，对孩子们进行循环。

```
var kids = {
   '0' : 7, //age 0 have 7 kids
   '1' : 3, //age 1 have 3 kids
   '2' : 2, //age 2 have 2 kids
   '4' : 1  //age 4 have 1 kids
};
function getAgesOfOldestKids(n) {
/* get: {number} how many kids */

    // lets begin with some magic to find out the maximum age in the set
    // you might code this with a for-in-loop over kids
    var max = Math.max.apply(null, Object.keys(kids));

    var ages = []; // ages of the kids in the result
    var count = 0; // how many kids are in the set
    for (var i=max; i>=0; i--)
        if (i in kids) { // age level exists
            count += kids[i]; // add number of kids
            if (count > n) // kids in the set are more than allowed
                return ages; // break the loop
            else
                ages.push(i); // add this age step to the result
        }
    return ages; // there may be less children than requested
}

> getAgesOfOldestKids(4)
["4", "2"]

// a trick to get the number of kids in the result:
> var ages = [4, 2];
> ages.reduce(function(n, age){return n+kids[age]}, 0)
3 
```

* * *

其他可能且更短的解决方案，直接在孩子的钥匙上循环：

```
function getAgesOfOldestKids(n) {
/* get: {number} how many kids */

    // ages, sorted descending
    var ages = Object.keys(kids).sort(function(a,b){return b-a;});

    var count = 0; // how many kids are in the set
    for (var i=0; i<ages.length-1 && count <= n; i++)
        count += kids[ages[i]]; // add number of kids
    return ages.slice(0, i-1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:35:35.957

不确定我是否完全遵循了这个问题，但是，它是沿着这些方向吗？

[http://jsfiddle.net/kyuff/Tkj2r/7/](http://jsfiddle.net/kyuff/Tkj2r/7/)

```
var kids = {
//age 0 have 7 kids
    0 : 7,
//age 1 have 3 kids
    1 : 3,
//age 2 have 2 kids
    2 : 2,
//age 4 have 1 kids
    4 : 1
    };
function between(min, max) {
    var age = 0;
    for(var age in kids) {
        if( age >= min && age <= max) {
            age += kids[age];
        }
    }
    return age;
}

document.write( between(2,3) ); 
```

# php - MySQL - 一行与插入的当前行之间的时间差

> ID：11414114
> 
> 赞同：2
> 
> 时间：2012-07-10T13:15:04.043
> 
> 标签：php, mysql

所以我有一个看起来像这样的 MySQL 表：

```
id        timestamp                action        timePassed

1         2012-07-10 22:44:00      start         0
2         2012-07-10 22:44:50      pause         50
3         2012-07-10 22:45:30      play          50
4         2012-07-10 22:47:25      pause         205
5         2012-07-10 22:48:05      play          205 
```

我不知道它有多明显，但这里发生的基本上是在每个“暂停”行上，我正在计算当前时间戳和“开始”行的时间戳之间的秒数差异。

我能想到的唯一方法是在数据库中插入一个新的“暂停”行，以便生成时间戳……然后在数据库中查询该“暂停”行的时间戳……计算以秒为单位的差异在“暂停”行和使用 PHP 的“开始”行之间......然后使用 timePassed 结果更新“暂停”行。

我的问题是是否有更好的方法来做到这一点（即使用 timediff 或其他一些 MySQL 命令）。问题是“暂停”时间戳在我进行 INSERT 之前不存在，所以我觉得需要先发生这种情况才能进行任何计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:18:30.820

> 我能想到的唯一方法是在数据库中插入一个新的“暂停”行，以便生成时间戳……然后在数据库中查询该“暂停”行的时间戳……计算以秒为单位的差异在“暂停”行和使用 PHP 的“开始”行之间......然后使用 timePassed 结果更新“暂停”行。

您可以插入已计算的行。

```
INSERT INTO table (timestamp, action, timePassed)
    SELECT now(), 'pause', SECOND(timediff(now(), timestamp))
    FROM table
    WHERE action = 'start'; -- and/or other WHERE clauses. 
```

由于检索“开始”行所需的时间，这将引入时间偏差（但在操作上有索引（如果行非常大，可能还有时间戳），该时间应该可以忽略不计）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:22:16.020

好吧，如果您的桌子是这样的，而您的要求是这样的，那么您就走上了正轨。

但是，如果您检查最后一行和最后一行之间的第二个差异会更好。这将使您了解有多少第二个用户暂停或播放了曲目。

```
INSERT INTO table (timestamp, action, timePassed)
    SELECT now(), 'pause', SECOND(timediff(now(), timestamp))
    FROM table
    WHERE ID = (Select Max(ID) from Table) 
```

随心所欲地采取行动，这样您就可以在两者之间插入时间差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:37:03.897

我建议根本不要`timePassed`显式存储，因为通过每个事件的时间戳，您已经将每个间隔存储了一次。如果您单独存储`timePassed`，您将在多个地方存储相同的数据。引用 EF Codd 的话，“如果某件事是真的，说两遍并不能让它变得更真实。” 此外，当您多次存储相同的内容时，您可能会遇到更新异常。

如果您想通过查询计算间隔，这可能会起作用。

```
SELECT event.id,
       event.timestamp,
       event.action,
       TIME_TO_SEC(TIMEDIFF(event.timestamp, start_event.timestamp)) time_passed
  FROM event
  JOIN (SELECT timestamp
          FROM event
         WHERE event.action = 'start') start_event ON 1 = 1 
```

# c# - 动态添加控件/事件不起作用

> ID：11414115
> 
> 赞同：0
> 
> 时间：2012-07-10T13:15:04.643
> 
> 标签：c#, asp.net

任何帮助，将不胜感激 -

这是我的 aspx 代码-

```
<div id="div_Detail" class="div_det" runat="server" /> 
```

在我后面的代码中 -

```
protected void Page_Load(object sender, EventArgs e) {
  LoadDetail();
}

private void LoadDetail() {
    HtmlTable tbl = new HtmlTable();
    HtmlTableRow row = new HtmlTableRow();
    HtmlTableCell cell = new HtmlTableCell();

    Button bUpdate = new Button();
    bUpdate.Text = "Update";
    bUpdate.Click += this.Update_Click;

    cell.Controls.Add(bUpdate);
    row.Cells.Add(cell);
    tbl.Rows.Add(row);
    div_Detail.Controls.Add(tbl);
}

private void Update_Click(object sender, EventArgs e) {
    //Do something
} 
```

我在页面上看到带有正确文本的按钮。但是在单击该按钮时，Update_Click 永远不会被调用。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:19:24.383

尝试给按钮一个 id。.NET 引擎在回发期间需要控件上的 ID 以将控件与给定的事件委托相关联。

编辑：

此代码工作正常：

```
 protected void Page_Load(object sender, EventArgs e) {
        LoadDetail();
    }

    private void LoadDetail() {
        HtmlTable tbl = new HtmlTable();
        HtmlTableRow row = new HtmlTableRow();
        HtmlTableCell cell = new HtmlTableCell();

        Button bUpdate = new Button();
        bUpdate.Text = "Update";
        bUpdate.Click += this.Update_Click;
        bUpdate.ID = "btnID";

        cell.Controls.Add(bUpdate);
        row.Cells.Add(cell);
        tbl.Rows.Add(row);
        div_Detail.Controls.Add(tbl);
    }

    private void Update_Click(object sender, EventArgs e) {
        //Do something 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:22:52.283

给按钮一个 ID，一切都会正常工作。

`bUpdate.Id = "btnUpdate";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:42:48.363

Try This one may help u

```
 bUpdate.Click += new System.EventHandler(this.bUpdate_OnClick);

protected void bUpdate_OnClick(object sender, EventArgs e) {

} 
```

# php - SVG到PNG与imagick

> ID：11414117
> 
> 赞同：1
> 
> 时间：2012-07-10T13:15:10.220
> 
> 标签：php, svg, imagick

我有一个嵌入了一些图像的 svg。就像是：

```
<?xml version='1.0' encoding='UTF-8'?>

<svg 
  width="483" height="710" 
  xmlns="http://www.w3.org/2000/svg" 
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <g>
    <title>Layer 1</title>
    <image 
      id="svg_1"
      y="0" x="0"
      height="199" width="176"
      xlink:href="http://192.168.3.2/images/1341920552_test.png"/>
  </g>
</svg> 
```

因此，当我以我的常规 Linux 用户身份通过​​命令行进行转换时，它会将其转换为 PNG 就好了。但是，如果我对用户 www-data 执行相同操作，那么它确实会转换，但图像不会出现在生成的 PNG 中，其他东西（如线条等）会出现。

如果我使用 PHP imagick 库进行转换，也会存在同样的问题。附件图片不显示。任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:53:10.377

经过大量实验后，发现所有用户通过 ssh 登录时都会出现此问题。登录到 GUI 会话的普通桌面用户可以毫无问题地进行转换。

我通过删除引用嵌入图像的 http URL 并添加本地文件系统路径解决了这个问题。这会降低我当前设计的应用程序的速度。但无论如何，这暂时解决了。

我想知道为什么会这样。

# php - 将元素添加到数组

> ID：11414118
> 
> 赞同：1
> 
> 时间：2012-07-10T13:15:10.550
> 
> 标签：php, multidimensional-array

我有一个看起来像这样的数组：

```
array
  0 => 
    array
      'title' => string 'Ireland - Wikipedia, the free encyclopedia'
      'url' => string 'http://en.wikipedia.org/wiki/Ireland'
  1 => 
    array
      'title' => string 'Ireland's home for accommodation, activities.'
      'url' => string 'http://www.ireland.com/' 
```

我想为每个元素添加 0 分。我认为这个简单的 foreach 循环可以解决问题，但是......好吧......它没有：/

```
public function setScore($result)
{
    foreach($result as $key)
    {
        $key = array('title', 'url', 'score' => 0);
    }
    return $result;
} 
```

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T13:16:57.093

`foreach`适用于数组的*副本*。您可以随意修改`$key`，它不会反映在原始数组上。

您可以`$key` **通过引用**使用，然后它将按预期工作：

```
foreach ($result as &$value) {
    $value['score'] = 0;
} 
```

**手动输入： http:** [//php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T13:17:58.783

你在这里创建了一个新数组并且什么都不做：

```
 foreach($result as $key){
     $key = array('title', 'url', 'score' => 0);
 } 
```

您要做的是修改对现有引用的引用：

```
 foreach($result as &$key){  # Note the '&' here
     $key['score'] = 0;
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T13:20:21.143

尽管 deceze 是对的，但您也可以使用 来执行此操作[`array_walk()`](http://php.net/array_walk)，如下所示：

```
array_walk( $result, function( &$el) { $el['score'] = 0; }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:27:57.353

这是一个如何完成此操作的示例。

```
$array = array( array( 'title' => "Ireland - Wikipedia, the free encyclopedia", 'url' => "http://en.wikipedia.org/wiki/Ireland"), array( 'title' => "Ireland's home for accommodation, activities.", 'url' => "http://www.ireland.com/" ) );

function setScore( $result )
{
    foreach( $result as &$element )
    {
        $element['score'] = 0;
}
    return $result;
}

$array = setScore( $array );

print_r( $array ); 
```

你也可以这样做：

```
function setScore( &$result )
{...} 
```

然后只是：

```
setScore( $array ); 
```

# xslt - 如何在 xslt 中设计一个基于某些条件添加强标签的模板

> ID：11414119
> 
> 赞同：1
> 
> 时间：2012-07-10T13:15:10.643
> 
> 标签：xslt, xslt-1.0

我输入了表单的xml

```
<content xml:lang="en" xmlns:w="http://www.w.com/sch/W">
 <w:firstRowHeader>true</w:firstRowHeader>
 <w:firstColumnHeader>true</w:firstColumnHeader>
 <w:customTable>
  <w:tableContent>
   <w:row>
    <w:cell>
     <w:spanInfo backgroundColor="Yellow" columnWidth="5" isRowHeader="true"/>
     <text>ghnmghmg</text>
    </w:cell>
    <w:cell>
     <w:spanInfo backgroundColor="Yellow" isRowHeader="false"/>
     <text>ghmhgmgm</text>
    </w:cell>
   </w:row>
   <w:row>
    <w:cell>
     <w:spanInfo backgroundColor="Yellow" columnWidth="5" isRowHeader="false"/>
     <text>vj</text>
    </w:cell>
    <w:cell>
     <w:spanInfo columnWidth="5" isRowHeader="true"/>
     <text>mm</text>
    </w:cell>
   </w:row>
  </w:tableContent>
 </w:customTable>
</content> 
```

这需要转换为 xml，其中：

1.  w:tableContent 映射到 tablecontent 和
2.  然后在tablecontent标签'table'，'tbody'标签下创建
3.  w:row 映射到 tr 标签
4.  w:cell 映射到 td 标签
5.  和条件就像
    1.  如果 w:row 中只有第一个 w:cell 元素的 isRowHeader 属性为“true”，则其各自 'tr' 标签下的每个 'td' 元素都应包含一个 'strong' 标签并忽略第二个 w:cell 的 isRowHeader
    2.  如果 w:firstRowHeader 为“true”，则转换后的表格应该有第一行粗体文本，即表格第一行中的每个“td”标签都应该包含“强”标签
    3.  如果 w:firstColumnHeader 为“true”，则转换后的表格应该有第一列粗体文本，即每个 tr 标签的第一个“td”标签应该包含“强”标签

## 转换后的xml：

```
<content>
 <tablecontent>
  <table cellspacing="1" cellpadding="1" border="1" style="WIDTH: 100%" title="Title"  xmlns="http://www.w3.org/1999/xhtml">
   <tbody>
    <tr>
     <td style="BACKGROUND-COLOR: Yellow; WIDTH: 5%"><strong>ghnmghmg</strong></td>
     <td style="BACKGROUND-COLOR: Yellow"><strong>ghmhgmgm</strong></td>
    </tr>
    <tr>
     <td style="BACKGROUND-COLOR: Yellow; WIDTH: 5%">vj</td>
     <td style="WIDTH: 5%">mm</td>
    </tr>
   </tbody>
  </table>
 </tablecontent>
</content> 
```

这是我尝试过但无法弄清楚如何在其中实现这些“强”标签的 xslt 模板......

## XSLT：

```
<xsl:template match="w:tableContent">
<xsl:variable name="var3" select="../w:firstRowHeader"/>
<xsl:variable name="var4" select="../w:firstColumnHeader"/>
 <tablecontent>
  <table cellspacing="1" cellpadding="1" border="1" style="WIDTH: 100%" title="Title" xmlns="http://www.w3.org/1999/xhtml" >
   <tbody>
    <xsl:for-each select="child::*">
     <xsl:choose>
      <xsl:when test="name()='w:row'">
       <tr>
       <xsl:for-each select="child::*">
        <xsl:choose>
         <xsl:when test="name()='w:cell'">
          <td>
           <xsl:for-each select="child::*">
            <xsl:choose>
             <xsl:when test="name()='w:spanInfo'">
              <xsl:variable name="var8" select="@backgroundColor" />
              <xsl:variable name="var9" select="@columnWidth" />
              <xsl:variable name="var10" select="@isRowHeader" />
              <xsl:if test="$var8!='' or $var9!=''">
               <xsl:attribute name="style">
                <xsl:if test="$var8!='' and $var9!=''">
                 <xsl:value-of select="concat('BACKGROUND-COLOR: ',$var8,'; WIDTH: ',$var9,'%')" />
                </xsl:if>
                <xsl:if test="$var8!='' and not($var9)">
                 <xsl:value-of select="concat('BACKGROUND-COLOR: ',$var8)" />
                </xsl:if>
                <xsl:if test="not($var8) and $var9!=''">
                 <xsl:value-of select="concat('WIDTH: ',$var9,'%')" />
                </xsl:if>
             </xsl:when>
             <xsl:when test="name()='text'">
              <xsl:if test="../w:spanInfo/@isRowHeader='true'">
               <strong><xsl:value-of select="." /></strong>
              </xsl:if>
              <xsl:if test="../w:spanInfo/@isRowHeader!='true' or not(../w:spanInfo/@isRowHeader) ">
               <xsl:value-of select="." />
              </xsl:if>
             </xsl:when>
            </xsl:choose>
           </xsl:for-each>
          </td> 
         </xsl:when>
        </xsl:choose>
       </xsl:for-each> 
      </tr>
     </xsl:when>
    </xsl:choose>
   </xsl:for-each>
  </tbody>
 </table>
 </tablecontent>
</xsl:template> 
```

但是上面的模板将“强”标签添加到只有 w:spanInfo 的“isRowHeader”属性为“真”的单元格中。但是我需要将“强”标签添加到第二个单元格内容中，而不管它的 w:spanInfo 的“isRowHeader”属性的值如何，前提是如果第一个单元格已经将“isRowHeader”属性设置为“真”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:52:21.060

这个 XSLT 1.0 样式表...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:w="http://www.w.com/sch/W">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <content>
   <xsl:apply-templates select="*/*/w:tableContent"/>
 </content>
</xsl:template>

<xsl:template match="w:tableContent">
 <table cellspacing="1" cellpadding="1" border="1" style="WIDTH: 100%" title="Title"  xmlns="http://www.w3.org/1999/xhtml">
  <tbody>
   <xsl:apply-templates select="w:row" /> 
  </tbody>
 </table>  
</xsl:template>

<xsl:template match="w:row">
 <tr>
  <xsl:apply-templates select="w:cell" /> 
 </tr>  
</xsl:template>

<xsl:template match="w:cell">
 <xsl:variable name="style">
  <xsl:if test="w:spanInfo/@backgroundColor">
   <xsl:value-of select="concat('BACKGROUND-COLOR: ',w:spanInfo/@backgroundColor)" /> 
  </xsl:if>
  <xsl:if test="w:spanInfo/@columnWidth">
   <xsl:if test="w:spanInfo/@backgroundColor">
    <xsl:value-of select="'; '" /> 
   </xsl:if>
   <xsl:value-of select="concat('WIDTH: ',w:spanInfo/@columnWidth,'%')" /> 
  </xsl:if>
 </xsl:variable>  
 <td>
  <xsl:if test="$style">
   <xsl:attribute name="style"><xsl:value-of select="$style" /></xsl:attribute> 
  </xsl:if>  
  <xsl:apply-templates select="text" />
 </td>
</xsl:template>

<xsl:template match="w:cell/text[
    not( ../../preceding-sibling::w:row) and (/*/w:firstRowHeader='true')
               or
    not( ../preceding-sibling::w:cell) and (/*/w:firstColumnHeader='true')
               or
    (../preceding-sibling::w:cell[last()]/w:spaninfo/@isRowHeader='true')
    ]">
 <strong><xsl:call-template name="default-rendering-of-text" /></strong>     
</xsl:template>

<xsl:template match="text" name="default-rendering-of-text">
 <xsl:value-of select="." />    
</xsl:template>

</xsl:stylesheet> 
```

...应该满足您的规则。您为粗体/强渲染设置的 3 个条件通过文本元素匹配条件的谓词（靠近样式表的末尾）显而易见。通过避免不必要的 xsl:for-each，我们可以使用更简单、更模块化和更易读的基于模板的解决方案。

# email - James Server 3 中的“已发送邮件”文件夹不可用

> ID：11414121
> 
> 赞同：0
> 
> 时间：2012-07-10T13:15:15.230
> 
> 标签：email, jakarta-mail, inbox, james

我正在使用带有 MySQL 数据库的 James server 3 beta 作为存储库来开发邮件客户端应用程序。我能够从应用程序发送/接收邮件。但我想将已发送电子邮件的副本存储在 James 服务器未提供的已发送邮件文件夹中。我是要自己创建“已发送邮件”文件夹，还是使用 James 服务器有其他解决方法？问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T07:47:14.057

You don't need to create the "Sent" folder. James will create it for every user. Only if you use maildir as repository, not a MySQL.

If you store the mails to a MySQL database then you should look for mails in the database. Look for table james_mailbox, and filter column mailbox_name to "Sent".

You can store the mails to a directory, then you will have access to all emails, not only sent. But remember, this feature is available only for Linux.

One more. The mailet ToSenderFolder should be present in conf/mailetcontainer.conf file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:22:41.480

已发送邮件文件夹没有什么神奇之处。您必须自己创建它并将消息显式复制到它。

# google-apps-script - 如何备份 Google Apps 脚本的 scriptdb

> ID：11414126
> 
> 赞同：1
> 
> 时间：2012-07-10T13:15:36.320
> 
> 标签：google-apps-script

如果我有一个关键任务数据库，需要定期备份，并且我将它作为脚本数据库存储在 GAS 中，有没有办法备份实际的数据库文件？似乎数据库的嵌入方式使其在脚本之外不可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:50:49.963

好吧，您始终可以查询所有值和`JSON.stringify`它们。如果您需要从中恢复数据库，我能注意到的唯一区别是每个项目 ID 都会更改。

这是一个例子：

```
function backupDB() {
  var db = ScriptDb.getMyDb();
  var res = db.query({});
  var array = [];
  while( res.hasNext() )
    array.push(res.next().toJson());
  var dbString = JSON.stringify(array);
  Logger.log(dbString); //you'll obviously save this string somewhere else e.g. as a docs file
} 
```

您可能还需要分块执行此操作，因为您的数据库可能有太多数据让脚本一次处理，就像这样。

我也觉得这个“备份”过程也应该由 API 来处理。上面的代码只是我刚刚的一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:50:22.720

我想我在一个意想不到的地方为我的问题找到了不错的解决方案。我可以使用 Google Fusion Table/s，而不是使用 scriptdb - 它们具有 SQL 类型的访问权限，是可以导出、备份、查看等的具体文档，并且可以充当我的应用程序的数据存储...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T23:02:34.773

实际答案是：您不会将关键任务数据存储在 scriptdb 中，原因有很多：

1.  appscript 没有 SLA。谷歌有许多其他存储有保证。
2.  因为该数据库不支持事务，您将无法保证批处理可能处理两次相同的数据（如果脚本在块备份或恢复过程中失败）。
3.  如果将 id 存储在数据库中的其他对象中，它会变得复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:28:58.393

也许您可以将关键数据从 scriptdb 复制到 Google 电子表格。鉴于它在谷歌开发人员中的一个例子，我认为这是一个有趣的选择。

这是链接：[将数据库复制到电子表格中的新工作表](https://developers.google.com/apps-script/scriptdb#copy_a_database_to_a_new_sheet_in_a_spreadsheet)。

# c# - 绑定组合框

> ID：11414133
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:15:52.680
> 
> 标签：c#, wpf, combobox

**我做的一切对吗？**

```
public List<string> combolist { get; set; } 
```

...

```
this.combolist = new List<string>();
MySqlCommand status_db = new MySqlCommand("select name_ru from request_status", conn);
MySqlDataReader combodata = status_db.ExecuteReader();
   while (combodata.Read())
   {
     combolist.Add(combodata.GetString(0));
   }
   this.DataContext = this; 
```

在xml中：

```
<ComboBox ItemsSource="{Binding Path=combolist}"... 
```

但是项目组合框是空的，怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:28:28.087

您应该使用 ObservableCollection。在调用 InitializeComponent() 之前实例化 ObservableCollection

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:41:28.177

这有效：

用户控件1.xaml

```
<Grid>
    <ComboBox ItemsSource="{Binding Combolist}" />
</Grid> 
```

usercontrol1.xaml.cs

```
public partial class UserControl1 : UserControl
{
    public ObservableCollection<string> Combolist { get; private set; }

    public UserControl1()
    {
        this.Combolist = new ObservableCollection<string>();//just initialize once!
        InitializeComponent();
        //if you wanna load new data, call .Clear() before
        //this.Combolist.Clear();
        //MySqlCommand status_db = new MySqlCommand("select name_ru from request_status", conn);
        //MySqlDataReader combodata = status_db.ExecuteReader();
        //while (combodata.Read())
        //{
        //    Combolist.Add(combodata.GetString(0));
        //}

        //test
        this.Combolist.Add("qqqq");
        this.Combolist.Add("wwww");
        this.Combolist.Add("eeee");
        this.Combolist.Add("rrrr");

        this.DataContext = this;
    }
} 
```

# javascript - DOM DocumentFragments 如何帮助优化 dom 操作？

> ID：11414137
> 
> 赞同：0
> 
> 时间：2012-07-10T13:16:21.140
> 
> 标签：javascript, jquery

我们正在考虑将 `DOMDocumentFragments`其用作优化 dom 操作代码的候选者。你们有什么感想 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:23:35.817

优化 dom 操作的不是它`DOMDocumentFragment`本身，而是文档片段与主文档断开连接的事实，因此操作它们不会触发屏幕上任何可能的繁重图形更新。

您也可以通过使用断开连接的节点来执行此操作而无需文档片段。

# mysql - 将 MySQL 表从列转换为行

> ID：11414149
> 
> 赞同：3
> 
> 时间：2012-07-10T13:16:47.303
> 
> 标签：mysql, pivot, transpose

我有几个大型数据表，需要将列转换为数据行，列名作为字段中的数据。我可以使用合并数据透视表在 Excel 中执行此操作，但我拥有的表对于 Excel 来说太大了。有些有多达 210 列和 2300 行数据，而另一些则有 20 列和 150,000 行。

我已在电子表格中上传了一个示例，以便在 box.com 或 Google Docs 中查看。

[https://docs.google.com/spreadsheet/ccc?key=0ArwEcGYwGw7kdHZya2haVDRvZ0xIM0kzRXRHZ2pQM1E](https://docs.google.com/spreadsheet/ccc?key=0ArwEcGYwGw7kdHZya2haVDRvZ0xIM0kzRXRHZ2pQM1E)

[https://www.box.com/s/199ce71828c320472b57](https://www.box.com/s/199ce71828c320472b57)

我正在寻找一个可重复的过程，允许我对 25 个表执行此操作，并对 SQL 代码进行矿工更改，然后将它们全部合并到一个更大的表中，该表将使用 LOGRECNO 和 COLUMN ID 字段添加其他信息查询到的数据。

任何有关在 MySQL 中执行此操作的最佳方法的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:46:42.090

以下应该是一个可重复的过程，变化很小：

```
SET @sql = NULL;
SELECT  GROUP_CONCAT(DISTINCT
    CONCAT('select LOGRECNO, '
      '''',
      COLUMN_NAME,
      ''' col, ', column_name, ' as value from yourtable'
    ) separator '  union all '
  ) INTO @sql
FROM INFORMATION_SCHEMA.COLUMNS
where table_name = 'yourtable'
  and column_name <> 'LOGRECNO';

set @sql = CONCAT(@sql, ' Order by 1, 2');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e5bb14/38)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:29:29.793

这是数据透视表问题。

这是具有快速和动态解决方案的不错的教程：http: [//datacharmer.org/downloads/pivot_tables_mysql_5.pdf](http://datacharmer.org/downloads/pivot_tables_mysql_5.pdf)

# css - 即使使用绝对定位的 div，也会出现浏览器水平滚动

> ID：11414150
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:16:51.530
> 
> 标签：css, html, css-position, absolute

我在一个 html5 网站上闲逛以获得一些乐趣 我有一个内容包装 div 相对定位..在里面我有一些元素都绝对定位..由于某种原因，当我将绝对元素定位在最右边时，我得到了一个滚动条。 . 只是想知道是否有人能找出原因！？

```
<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<title>moo</title>
</head>
<body>
<div id="content-wrap">
          <div id="card-front" class="absolute">
              <img src="/images/business-card-front.png" width="211" height="271" alt="Contact Business Person">
          </div>      
  </div>
</body>
</html> 
```

元素的样式是：

```
#content-wrap {
    width: 960px;
    min-height: 1300px;
    margin: 0 auto;
    position: relative;
    background: transparent url(/images/site-bg.png) no-repeat 0 24px;
}

#card-front {
        position: absolute;
        z-index: 2;
        width: 211px;
        height: 271px;
        top: 225px;
        right: -150px;
    } 
```

出于某种原因，我不知道为什么这不起作用..违背绝对的意思？！

谢谢你的帮助！汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:23:20.757

您是否使用任何重置样式表或任何东西？一些较新的重置样式表包含一个在页面主体上永久设置滚动条的规则。

当您有很多元素可以打开我们的关闭时，这很有用，因为它可以防止页面在滚动条出现时跳转，并在元素显示/隐藏时消失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:23:32.400

在绝对定位元素中将属性设置`right`为负值将始终导致元素完全或部分位于容器之外，因此滚动条。

如果希望元素距离容器右边框 150px，则需要将其设置为正值：

```
#card-front {
    right: 150px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:22:21.893

而不是右：-150px；, 请使用右:150px;

# firefox - 使用小程序时在Firefox中禁用Shift +右键单击

> ID：11414153
> 
> 赞同：4
> 
> 时间：2012-07-10T13:16:53.277
> 
> 标签：firefox, right-click, shift

我正在开发一个使用相当先进的小程序的网站，该小程序将鼠标和键盘绑定到它，因此在您按下 esc 键之前不会影响浏览器。回到网站。一切正常，但是：

**如果我按 shift + 右键单击​​，它将为浏览器弹出上下文菜单，有什么办法可以阻止它？**正常的右键单击被禁用就好了，其他浏览器也可以正常工作，只是firefox搞砸了shift + rmb。

我在谷歌上花了几个小时，甚至还没有弄清楚那个功能到底是什么（我想它是那些禁用右键单击的讨厌网站的额外可用性功能，但在这种情况下，它只是妨碍了）

# c# - 基于c#中的子数组过滤数组中的重复项

> ID：11414158
> 
> 赞同：0
> 
> 时间：2012-07-10T13:17:06.810
> 
> 标签：c#, linq, filter, iequalitycomparer

我有一个包含基本代码和一系列位置的人员列表。我需要消除列表中具有相同位置的不同基码的人员，并保留具有不同位置的人员。

我尝试使用 IEqualityComparer，并在 linq 中分组，但我没有成功。你们能告诉我怎么做吗？这是我的班级结构

```
public class Person
{
    public string Name { get; set; }

    public List<Location> Locations { get; set; }
}
public class Location
{
    public string Name { get; set; }
    public string BaseCode { get; set; }
} 
```

数据示例

```
Person 1
Name : John

Locations :
      [0]  Name : India , BaseCode : "AA12"
      [1] Name : USA ,BaseCode : "AA14"
Person 2
Name : John

Locations :
      [0]  Name : India, BaseCode : "AA13"
      [1] Name : USA ,BaseCode : "AA14"
Person 3
Name : John

Locations :
      [0]  Name : India, BaseCode : "AA16"
      [1] Name : UK , BaseCode : "AA17" 
```

我想从我的列表中过滤掉第 2 个人并保留第 1 个人和第 3 个人。请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:34:46.173

[**免责声明：**此解决方案并未专门处理`BaseCode`不同/相同位置的相同问题；您在要求中没有提到任何有关此的内容。]

* * *

**`IEqualityComparer<T>`路线**

这里的重要部分是 和的`IEqualityComparer<T>`实现：`Person``Location`

```
class Program
{
    static void Main(string[] args)
    {
        var p1 = new Person {Name ="John", BaseCode="AA12", Locations = new List<Location>
        {
            new Location { Name = "India" },
            new Location { Name = "USA" }
        }};

        var p2 = new Person {Name ="John", BaseCode="AA13", Locations = new List<Location>
        {
            new Location { Name = "India" },
            new Location { Name = "USA" }
        }};

        var p3 = new Person {Name ="John", BaseCode="AA14", Locations = new List<Location>
        {
            new Location { Name = "India" },
            new Location { Name = "UK" }
        }};

        var persons = new List<Person> { p1, p2, p3 };

        // Will not return p2.
        var distinctPersons = persons.Distinct(new PersonComparer()).ToList();

        Console.ReadLine();
    }
}

public class PersonComparer : IEqualityComparer<Person>
{
    public bool Equals(Person x, Person y)
    {
        if (x == null || y == null)
            return false;

        bool samePerson = x.Name == y.Name;

        bool sameLocations = !x.Locations
            .Except(y.Locations, new LocationComparer())
            .Any();

        return samePerson && sameLocations;
    }

    public int GetHashCode(Person obj)
    {
        return obj.Name.GetHashCode();
    }
}

public class LocationComparer : IEqualityComparer<Location>
{
    public bool Equals(Location x, Location y)
    {
        if (x == null || y == null)
            return false;

        return x.Name == y.Name;
    }

    public int GetHashCode(Location obj)
    {
        return obj.Name.GetHashCode();
    }
} 
```

使用提供`PersonComparer`的 linq`Except`扩展`LocationComparer`来生成两个位置列表之间的差异列表。

然后`PersonComparer`输入 linq`Distinct`方法。

* * *

**`IEquatable<T>`路线**

[如果您需要以*不同*`BaseCode`的方式计算成为“匹配”，我认为这条路线不会奏效，因为没有给您区分价值观的机会。*`GetHashCode`*]

 *另一种解决方案是`IEquatable<T>`在类本身上实现并覆盖`GetHashCode`，`Distinct`然后`Except`将遵循此实现：

```
public class Person : IEquatable<Person>
{
    public string Name { get; set; }
    public string BaseCode { get; set; }
    public List<Location> Locations { get; set; }

    public bool Equals(Person other)
    {
        if (other == null)
            return false;

        bool samePerson = Name == other.Name;

        // This is simpler because of IEquatable<Location>
        bool sameLocations = !Locations.Except(other.Locations).Any();

        return samePerson && sameLocations;
    }

    public override int GetHashCode()
    {
        return Name.GetHashCode();
    }
}

public class Location : IEquatable<Location>
{
    public string Name { get; set; }

    public bool Equals(Location other)
    {
        if (other == null)
            return false;

        return Name == other.Name;
    }

    public override int GetHashCode()
    {
        return Name.GetHashCode();
    }
} 
```

这导致更简单的调用：

```
var distinctPersons = persons.Distinct().ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:36:58.727

我很想写如下内容。我没有检查过它的`y.Locations.Equals()`工作原理，但是用做同样工作的东西替换它应该很简单。

```
 List<Person> personList = new List<Person>();
    List<Person> deduplicatedPersonList = new List<Person>();
    personList.ForEach(x =>
    {
        Person existingPerson = personList.Find(y =>
        {
            if (y.Locations.Equals(x.Locations))
                return false;
            return true;
        });
        if (existingPerson == null)
            deduplicatedPersonList.Add(x);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:28:52.387

您可以使用 IEquatable 接口，并像这样覆盖 Equal 和 GetHashCode 方法：

**在问题更改后编辑：**

```
public class Location : IEquatable<Location>
{    
       public string Name { get; set; }     
       public string BaseCode { get; set; 

        public bool Equals(Location other)
        {
            if (Object.ReferenceEquals(other, null)) return false;

            if (Object.ReferenceEquals(this, other)) return true;
            return BaseCode.Equals(other.BaseCode);
        }

        public override int GetHashCode()
        {
            return BaseCode.GetHashCode();
        }

} 
```

因此，现在您可以在人员列表上使用 Distinct，它只会返回不同的名称和 BaseCode。

```
 var distinctListPerson = PersonList.Distinct().ToList(); 
```

[您可以从MSDN](http://msdn.microsoft.com/en-us/library/ms131187.aspx)阅读有关此接口的信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:34:45.390

亚当的解决方案是更“正确”的处理方式。但是如果你想用 LINQ 来做，那么像这样的东西也应该做（注意，代码需要对位置进行排序并将字符串作为标识符）：

```
persons
    .GroupBy(x => x.Name)
    .SelectMany(x => x)
        .GroupBy(y => string.Concat(y.Locations.Select(z => z.Name)))
    .SelectMany(x => x
        .GroupBy(y => string.Concat(y.Locations.Select(z => z.BaseCode)))
    .Select(x => x.First()); 
```*

# python - 尝试将图像文件上传到集合时出现 400 错误

> ID：11414162
> 
> 赞同：3
> 
> 时间：2012-07-10T13:17:21.547
> 
> 标签：python, google-drive-api

我想编写一个脚本将我的照片上传到 Google Drive。经过几个小时深入研究 Google Document List API。我选择 gdata-python-client 2.0.17(latest) 来构建我的脚本。一切正常，除了我无法将文件上传到集合中。这是例外。

```
回溯（最近一次通话最后）：
  文件“./upload.py”，第 27 行，在
    上传（sys.argv[1]）
  文件“./upload.py”，第 22 行，上传中
    client.create_resource(p, collection=f, media=ms)
  文件“/usr/local/lib/python2.7/dist-packages/gdata/docs/client.py”，第 300 行，在 create_resource
    return uploader.upload_file(create_uri, entry, **kwargs)
  文件“/usr/local/lib/python2.7/dist-packages/gdata/client.py”，第 1090 行，在 upload_file
    start_byte, self.file_handle.read(self.chunk_size))
  文件“/usr/local/lib/python2.7/dist-packages/gdata/client.py”，第 1048 行，在 upload_chunk
    引发错误
gdata.client.RequestError：服务器响应：400，<errors xmlns='http://schemas.google.com/g/2005'><error><domain>GData</domain><code>InvalidEntryException</code ><internalReason>很抱歉，发生服务器错误。请重试。</internalReason></error></errors>

```

在侵入 gdata 的源代码后，我打印了一些信息以进行调试。

```
>
范围：字节 0-524287/729223
放入：https://docs.google.com/feeds/upload/create-session/default/private/full/folder%3A0B96cfHivZx6ddGFwYXVCbzc4U3M/contents?upload_id=AEnB2UqnYRFTOyCCIGIESUIctWg6hvQIHY4JRMnL-CUQhHii3RGMFWZ12a7lXWd1hgOChd1Vqlr8dVnwh-B
>
范围：字节 524288-729222/729223
放入：https://docs.google.com/feeds/upload/create-session/default/private/full/folder%3A0B96cfHivZx6ddGFwYXVCbzc4U3M/contents?upload_id=AEnB2UqnYRFTOyCCIGIESUIctWg6hvQIHY4JRMnL-CUQhHii3RGMFWZ12a7lXWd1hgOChd1Vqlr8dVnwh-B

```

`PUT`文件的最后一部分时引发的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:40:24.757

我建议您尝试新的 Google Drive API v2，它通过更好地支持媒体上传使其变得更加容易：[https ://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

获得[授权服务实例](https://developers.google.com/drive/credentials)后，您可以简单地插入一个新文件，如下所示：

```
from apiclient import errors
from apiclient.http import MediaFileUpload
# ...

def insert_file(service, title, description, parent_id, mime_type, filename):
  """Insert new file.

  Args:
    service: Drive API service instance.
    title: Title of the file to insert, including the extension.
    description: Description of the file to insert.
    parent_id: Parent folder's ID.
    mime_type: MIME type of the file to insert.
    filename: Filename of the file to insert.
  Returns:
    Inserted file metadata if successful, None otherwise.
  """
  media_body = MediaFileUpload(filename, mimetype=mime_type, resumable=True)
  body = {
    'title': title,
    'description': description,
    'mimeType': mime_type
  }
  # Set the parent folder.
  if parent_id:
    body['parents'] = [{'id': parent_id}]

  try:
    file = service.files().insert(
        body=body,
        media_body=media_body).execute()

    return file
  except errors.HttpError, error:
    print 'An error occured: %s' % error
    return None 
```

# java - 将导入声明添加到正确的位置

> ID：11414165
> 
> 赞同：2
> 
> 时间：2012-07-10T13:17:27.693
> 
> 标签：java, eclipse, eclipse-jdt

我正在尝试将导入声明添加到新创建的方法声明中引用的类型的编译单元。为此，我创建了一个简单的 ASTVisitor，它将它访问的每种类型（简单类型、参数化类型等）添加到给定的 ImportRewrite 实例。要将我对编译单元所做的更改添加到 MultiTextEdit 实例，我首先使用 rewriteAST() 方法将更改添加到 ASTRewrite 实例，然后使用 rewriteImports() 方法将更改添加到 ImportRewrite。下面的代码：

```
MultiTextEdit edit = new MultiTextEdit();
TextEdit astEdit = astRewrite.rewriteAST();
edit.addChild(astEdit);
TextEdit importEdit = importRewrite.rewriteImports(new NullProgressMonitor());
edit.addChild(importEdit); 
```

此外，访问者的一部分是（其他类型遵循相同的模式）：

```
public boolean visit(SimpleType type) {
    ITypeBinding typeBinding = type.resolveBinding();
    importRewrite.addImport(typeBinding);
    return true;
} 
```

问题是在新创建的编译单元中，导入声明位于所有其他类型声明等之后，导致编译错误。如文档中所述，ASTRewrite 不会编辑任何导入声明。我尝试在 astRewrite 更改之前添加 importRewrite 更改，从而导致导入声明位于包声明之前，从而再次导致编译错误。关于如何解决问题并将导入声明添加到包声明和类型声明之间的正确位置的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:22:07.503

出于某种原因，IDE 认为您的类型声明是注释！这就是为什么它把他们放在他们之后。

# perl - Dancer::Plugin::Auth::RBAC 会员注册示例？

> ID：11414169
> 
> 赞同：2
> 
> 时间：2012-07-10T13:17:39.113
> 
> 标签：perl, cpan, dancer

我正在尝试建立一个会员网站，我对使用 Perl 来做这件事很感兴趣。我查看了看起来不错的 Dancer 框架，但我不知道如何使用 Dancer::Plugin::Auth::RBAC 实际创建成员注册/登录过程。CPAN 页面显示了一些示例代码，但没有非常明确或完整的内容。除了一些带有硬编码登录名/密码的简单示例外，谷歌搜索并没有多大用处。谢谢乙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:10:23.343

Auth::RBAC 不是为了创建成员或注册/管理系统，而是基于现有帐户进行实际的认证和授权。

注册会员很容易。您只需创建一个合适的数据存储（DBIC 非常好用且简单）并编写一个方法来从表单中获取详细信息，验证它们并将它们存储在数据存储中。

# android - ListView 中的 EditText 焦点

> ID：11414170
> 
> 赞同：5
> 
> 时间：2012-07-10T13:17:39.877
> 
> 标签：android, listview, android-edittext

我有一个`ListView`and 在其中`ListView`我有一个 Row 有一些`TextViews`和`EditTexts`在其中。当我按下行上的任意位置时，我希望 获得`EditText`焦点，以便输入文本。

问题是我无法让它工作。当我将 放在`EditText`中时，当我单击 时将不会`ListView`响应。`OnItemClick``ListView`

我尝试使用`focusable="false"`on `EditText`，它允许我再次单击，但即使将可聚焦设置为 true，`ListView`我也无法获得焦点。`EditText`接下来我尝试使用`android:descendantFocusability="beforeDescendants"`in ，`ListView`但它似乎没有做出任何改变，它仍然无法正常工作。

有没有人知道我可以做些什么来使它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:51:16.610

试试这个，它应该让你点击一行并聚焦 EditText （从这个[SO Answer](https://stackoverflow.com/a/2680077/1105376)修改）：

```
public void onItemSelected(AdapterView<?> listView, View view, int position, long id) 
{ 
    EditText yourEditText = (EditText) view.findViewById(R.id.youredittextid);
    listView.setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS); 
    yourEditText.requestFocus(); 
} 

public void onNothingSelected(AdapterView<?> listView) 
{ 
    // onNothingSelected happens when you start scrolling, so we need to prevent it from staying 
    // in the afterDescendants mode if the EditText was focused  
    listView.setDescendantFocusability(ViewGroup.FOCUS_BEFORE_DESCENDANTS); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T13:29:00.480

这样做

```
ListView listView = (ListView) findViewById(R.id.yourListViewId);
listView.setItemsCanFocus(true);
listView.setClickable(false); 
```

IE，

从 xml 获取 listview 对象后，禁用单击此 listview 并将焦点传递给子视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:26:11.603

您可以`enabled="false"`在 xml 行布局中添加一个属性，然后在 onItemClickListener 上添加一个属性`setEnabled(true)`，然后`setFocusable(true)`，这应该可以解决。

# oracle - Oracle：从 SELECT...JOIN 中插入值，SQL 错误：ORA-00947：没有足够的值

> ID：11414177
> 
> 赞同：4
> 
> 时间：2012-07-10T13:17:51.647
> 
> 标签：oracle, join, insert, ora-00947

我正在尝试执行以下操作：

```
INSERT INTO MyTable(a, b, c)
SELECT a FROM source1
JOIN source2 ON ... 
```

其中 source2 包含列 B 和 C。

但是 Oracle 似乎不喜欢这样，并告诉我“SQL 错误：ORA-00947：没有足够的值”。

我在这里做错了吗？这种语法甚至可能吗？还是我必须将其重写为：

```
SELECT a, b, c FROM source1, source2 WHERE .... 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T13:20:56.430

在 SELECT 子句中使用与在 INSERT 子句中一样多的标识符，如下所示：

```
INSERT INTO MyTable(a, b, c)
SELECT s1.a, s2.b, s2.c FROM source1 s1
  JOIN source2 s2 ON ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:20:51.993

`INSERT`选择需要返回与您在语句中列出的相同数量的列。

所以：是的，您需要将查询重写为`SELECT a,b,c FROM ...`

# arrays - 将数组保存到 Codeigniter 中的会话

> ID：11414178
> 
> 赞同：4
> 
> 时间：2012-07-10T13:17:51.927
> 
> 标签：arrays, codeigniter, session

在 Codeigniter 中将数组保存到会话数据时出现问题。

```
var_dump($this->session->userdata('data')); // output is boolean false

$array = array(0 => 'abc', 1 => 'def', 2 => 'ghi');
$this->session->set_userdata(array('data' => $array, 'name' => 'my_name'));

var_dump($this->session->userdata('data')); // output is 0 => 'abc', 1 => 'def', 2 => 'ghi' 
```

每次加载页面时“userdata（'data'）”都会丢失，但其他用户数据正常。这意味着只有这个数组丢失了。我 100% 确定它可以工作，在我进行大量修改之前它对我有用，所以现在我找不到解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T14:32:52.083

我发现了问题所在。Codeigniter 在会话中有一些限制，我的数组太大了。 [更多信息在这里](https://stackoverflow.com/questions/4431250/size-of-session-in-codeigniter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:28:43.967

似乎在您的导航器中禁用了 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T10:42:51.683

您需要使用数据库。4kb 限制是 cookie 大小的浏览器限制。保持 cookie 和会话较小通常是一个好习惯，因为到服务器上的对象（对于同一域）的每个请求标头都会发送此 cookie。

此外，关于数据库会话表的 CI 的一个很好的提示，将类型设置为 MEMORY，以便会话存储在 RAM 中而不是磁盘中，这使您的站点更快。

SQL

```
CREATE TABLE IF NOT EXISTS  `ci_sessions` (
session_id varchar(40) DEFAULT '0' NOT NULL,
ip_address varchar(16) DEFAULT '0' NOT NULL,
user_agent varchar(50) NOT NULL,
last_activity int(10) unsigned DEFAULT 0 NOT NULL,
user_data text NOT NULL,
PRIMARY KEY (session_id)
); 
```

CI 配置（在 application/config/config.php 中）：

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

# javascript - 是否有类似于 RealBasic 或 LiveCode，但使用 Javascript/HTML 作为语言的东西？

> ID：11414183
> 
> 赞同：0
> 
> 时间：2012-07-10T13:18:03.870
> 
> 标签：javascript, macos, user-interface, realbasic, livecode

我是一个编程“爱好者”，而不是专业人士，我正在寻找一个类似于 RealBasic 或 RunRev Livecode 的简单图形编程环境（适用于桌面、Mac 和 iOS）。

但是，由于我的可用时间有限，我宁愿将其花在使用更普遍的语言（如 Javascript/Html5）上（这样我可以将这些知识转移到其他领域，如网络编程），而不是像使用的那种特殊语言通过 Livecode 或 RealBasic（不能在该特定编程环境之外使用）。

我研究了 Appcelerator Titanium（它使用 Javascript/HTML/CSS），但它似乎没有一个简单的 GUI 开发界面。

有什么建议么 ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:32:40.610

Wakanda 可能也是我见过的最接近的。

我在 Mac 上的经验是它不是非常稳定。不确定这只是我的环境还是因为它仍然相对较新。我喜欢，并且对他们正在做的事情印象深刻，但只是不确定我是否可以信任它用于生产级别的东西。

Realsoftware 有很多好处。我仍在探索它，但看起来我可能会使用它。如果它是 JS/HTML5，那将是一个简单的决定！这一切都是编译和服务器端的 - 据我了解。

编辑：好好看看 Wakanda 的 NoSQL 数据功能。它们简直令人惊叹且经过深思熟虑。四种类型，存储、计算、关系和别名。[在https://vimeo.com/31837379](https://vimeo.com/31837379)上有一个很好的概述 YouTube 视频

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:04:23.777

看看新的 Javascript 堆栈：Wakanda

# javascript - 从 Javascript 中删除空行会提高性能吗？

> ID：11414186
> 
> 赞同：0
> 
> 时间：2012-07-10T13:18:11.937
> 
> 标签：javascript, performance

我有一个非常大的 js 文件，大约 1200 行，部分代码是这样写的（带空格）：

```
function a () {

           alert("aaaa");

}

function b () {

                                                 alert("bbbb");

} 
```

如果我删除空行，会提高网站的速度吗？我看过其他的js文件，比如google上开源，没有空行和空格。那么请告诉我这会提高网站的性能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:22:23.250

空格不会影响 javascript 文件的性能。但是，如果您有许多空格字符（“”），文件大小可能会更大，浏览器将不得不加载更大的文件，这需要更多时间。

如果您想尽可能地最小化您的文件，只需搜索 google [Javascript minifier](http://www.google.com/?q=javascript+minifier)。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:20:30.070

这将使脚本到达客户端所需的时间更短一些，但性能改进将很小以至于不明显。

无论如何，您应该摆脱空白行，因为这很奇怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T13:21:26.003

通过删除多余的字符（空格、回车、注释等），您可以减小文件的大小，这意味着可以更快地下载文件。

这个过程称为[缩小](http://en.wikipedia.org/wiki/Minification_%28programming%29)。互联网上有很多工具可以为您做到这一点。

缩小（以及相关的[混淆](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)）是加快网站速度的[最佳实践。](http://developer.yahoo.com/performance/rules.html/#minify)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T13:22:05.130

JavaScript 不会因为额外的空白而表现得更好或更差。压缩 JS 文件的唯一好处是减少加载时间。可能源自 1MB 的文件可能会减少到 100KB*，这样加载起来会快得多。

[* 仅举例]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T19:45:53.640

对于相对较小的文件或少量空白，差异不会很大，但解析和使用稍微多一点的内存确实需要稍长一些的时间。对于桌面浏览器来说，这在很大程度上可以忽略不计，但对于 CPU 速度慢很多且内存非常有限的移动浏览器来说，它最终可能会变得非常重要。

如果它们跨越某些边界，它也会影响移动资源的可缓存性（并且移动浏览器当前缓存未压缩的资源，因此重要的是未压缩的大小）。

# javascript - Sencha Touch 2 - 在模型上保存（）后获取 messageProperty

> ID：11414189
> 
> 赞同：2
> 
> 时间：2012-07-10T13:18:20.500
> 
> 标签：javascript, sencha-touch, extjs4, sencha-touch-2

我有一个用户模型，它被发布到服务器以在系统上创建一个用户。响应基本上是：

```
{
    success: false,
    message: "User already exists"
} 
```

很酷，在我的模型中，我有一个 REST 代理。该代理还附加了一个 JSONReader 以及以下内容：

```
messageProperty: 'message',
successProperty: 'success' 
```

所以我创建了我的用户并将其保存为：

```
var user = Ext.create('App.model.User', {name: "Bill"});
user.save(function (records, operation) {
    console.log(records); 
    console.log(operation);
}); 
```

但是我看不到任何地方可以获取从服务器返回的错误消息。我所能抓住的是： isSuccessful() 似乎正确地说是假的。文档中似乎没有关于此的任何内容。我不明白为什么不包括这样的东西，或者我怎么想念它。

操作.getResponse(); 也返回 null。我也尝试过传递成功、失败和回调的配置......对我来说似乎什么都没有

谢谢， 多姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:59:21.383

Try operation.getResultSet().getMessage(). I haven't tried it, but looking at the source code, it seems like this should work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:52:47.733

看起来你可以传入一个带有成功和失败方法的对象。来自文档[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Model-method-save](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Model-method-save)

*options : 传递给代理的对象/函数选项。Ext.data.Operation 的配置对象。如果你传递一个函数，这将自动成为回调方法。为方便起见，配置对象除了回调之外还可能包含成功和失败方法——它们都将使用模型和操作作为参数来调用。*

所以你应该能够做到：

```
var user = Ext.create('App.model.User', {name: "Bill"});
user.save({
    success: function(){

    },
    failure: function(){

    }
}); 
```

我不知道回调是什么，但通常我会做些什么来找出：

```
success:function(a,b,c,d){
    console.log(a,b,c,d);
} 
```

然后查看我控制台中的数据并相应地重命名变量。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:53:42.863

```
var user = Ext.create('App.model.User', {name: "Bill"});
user.save({
            success : function(){
                console.log('success', arguments);
            },
            failure : function(model, operation){
                var reader = model.getProxy().getReader(),
                    message = reader.getMessage(reader.rawData)
                console.log('failure message : ' + message);

            }
        }); 
```

# c++ - fwrite 和 write 的主要区别是什么？

> ID：11414191
> 
> 赞同：15
> 
> 时间：2012-07-10T13:18:21.437
> 
> 标签：c++, c

我目前正在编写一个回调函数`C`：

```
static size_t writedata(void *ptr, size_t size, size_t nmemb, void *stream){

        size_t written = fwrite(ptr, size, nmemb, (FILE)*stream);
        return written;
} 
```

该函数将在另一个函数中使用，该函数执行`HTTP`请求、检索请求并将其写入本地计算机。该`writedata`函数将用于后面的部分。整个操作必须是`multithreaded`，所以我在和之间有`write`疑问`fwrite`。`write()`有人可以帮助我概述和`fwrite()`in之间的区别`C`，以便我可以选择最适合我的问题的一个吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-10T13:22:15.933

`fwrite`写入 a `FILE*`，即（可能）缓冲`stdio`流。它由 ISO C 标准指定。此外，在 POSIX 系统上，在一定程度上[`fwrite`是线程安全的。](https://stackoverflow.com/a/468105/166749)

`write`是基于文件描述符的较低级别的 API，在 POSIX 标准中进行了描述。它不知道缓冲。`FILE*`如果您想`fileno`在`write`.

`fwrite`除非您知道自己在做什么，否则请使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-11T18:05:35.670

一个非常明显的区别是 write 是原子的，而 fwrite 不是。

[https://yarchive.net/comp/linux/wakekill.html](https://yarchive.net/comp/linux/wakekill.html)

使用：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

int main() {
  if (fork() == 0) {
    FILE* h = fopen("file.txt", "a");
    char* line =
        "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n";
    for (int i = 0; i < 10000; i++) {
      if (write(fileno(h), line, strlen(line)) != strlen(line)) {
        perror("Could not append line to file");
        exit(1);
      }
    }
    if (fclose(h) != 0) {
      perror("Could not close file");
      exit(1);
    }
  } else {
    FILE* h = fopen("file.txt", "a");
    char* line =
        "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\n";
    for (int i = 0; i < 10000; i++) {
      if (write(fileno(h), line, strlen(line)) != strlen(line)) {
        perror("Could not append line to file");
        exit(1);
      }
    }
    if (fclose(h) != 0) {
      perror("Could not close file");
      exit(1);
    }
  }
  return 0;
} 
```

你会得到这样的输出，没有交错的行：

```
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb 
```

使用：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

int main() {
  if (fork() == 0) {
    FILE* h = fopen("file.txt", "a");
    char* line =
        "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n";
    for (int i = 0; i < 10000; i++) {
      if (fwrite(line, 1, strlen(line), h) != strlen(line)) {
        perror("Could not append line to file");
        exit(1);
      }
    }
    if (fclose(h) != 0) {
      perror("Could not close file");
      exit(1);
    }
  } else {
    FILE* h = fopen("file.txt", "a");
    char* line =
        "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\n";
    for (int i = 0; i < 10000; i++) {
      if (fwrite(line, 1, strlen(line), h) != strlen(line)) {
        perror("Could not append line to file");
        exit(1);
      }
    }
    if (fclose(h) != 0) {
      perror("Could not close file");
      exit(1);
    }
  }
  return 0;
} 
```

你会得到这样的输出，交错行：

```
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:08:46.890

该`write`函数是您的程序对操作系统的调用，因此它比`fwrite`. 它还缺少**缓冲**，这使得它变得**更慢**，因为正如缓冲哲学所暗示的那样：“处理小文件的许多部分而不是大文件的速度更快。” 它`write`不是 c 标准的一部分也很重要，因此您可能不会发现它不是非 POSIX 系统，并且（很少）适当的使用会有所不同。您还应该知道 fwrite 和 fread 有时使用`write`and来实现`read`（一个简单的实现可以在 K&R 的 Unix 章节中找到）。

另一个值得注意的事情是使用 [文件描述符](http://en.wikipedia.org/wiki/File_descriptor)，但 fread 和 fwrite 使用 `read`FILE**指针**，这些指针实际上是包含文件描述符和有关打开文件的其他信息的指针。`write`

# c# - RazorEngine 布局

> ID：11414194
> 
> 赞同：46
> 
> 时间：2012-07-10T13:18:27.457
> 
> 标签：c#, razorengine

我正在使用 Razor 引擎[https://github.com/Antaris/RazorEngine](https://github.com/Antaris/RazorEngine)来解析我的电子邮件模板的正文。是否可以定义布局并包含其他 .cshtml 文件？例如常见的页眉和页脚。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-03T15:39:09.057

在这两个帖子的帮助下，我得到了通用模板和布局：

[RazorEngine 字符串布局和部分？](https://stackoverflow.com/questions/10369519/razorengine-string-layouts-and-sections)

[http://blogs.msdn.com/b/hongyes/archive/2012/03/12/using-razor-template-engine-in-web-api-self-host-application.aspx](http://blogs.msdn.com/b/hongyes/archive/2012/03/12/using-razor-template-engine-in-web-api-self-host-application.aspx)

这是我的解决方案：

解决方案 1： **布局**

通过设置 _Layout 使用

```
@{
    _Layout = "Layout.cshtml";
    ViewBag.Title = Model.Title;
 } 
```

**页脚**

```
@section Footer 
{
   @RenderPart("Footer.cshtml")
} 
```

**布局.cshtml**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> <html>
    <head>
    </head>
    <body>
        <div id="content">
            @RenderBody()
        </div> 
        @if (IsSectionDefined("Footer"))
        { 
            <div id="footer">
                @RenderSection("Footer")
            </div>
        }
    </body> 
</html> 
```

**模板库扩展**

使用 RenderPart 方法扩展 TemplateBase

```
public abstract class TemplateBaseExtensions<T> : TemplateBase<T>
{
    public string RenderPart(string templateName, object model = null)
    {
        string path = Path.Combine(AppDomain.CurrentDomain.SetupInformation.ApplicationBase, "Templates", templateName);
        return Razor.Parse(File.ReadAllText(path), model);
    }
} 
```

**剃刀配置**

将 BaseTemplateType 设置为您的 TemplateBaseExtensions 类

```
TemplateServiceConfiguration templateConfig = new TemplateServiceConfiguration
{
     BaseTemplateType = typeof(TemplateBaseExtensions<>)
};

Razor.SetTemplateService(new TemplateService(templateConfig)); 
```

**编辑**解决方案 2：

如果您使用的是 TemplateResolver。不需要 RenderPart 而是使用 @Include

**页脚**

```
@section Footer 
{
   @Include("Footer.cshtml")
} 
```

**解析器**

```
public class TemplateResolver : ITemplateResolver
{
    public string Resolve(string name)
    {
        if (name == null)
        {
            throw new ArgumentNullException("name");
        }

        string path = Path.Combine(AppDomain.CurrentDomain.SetupInformation.ApplicationBase, "Templates", name);
        return File.ReadAllText(path, System.Text.Encoding.Default);
    }
} 
```

**配置**

```
TemplateServiceConfiguration templateConfig = new TemplateServiceConfiguration
{
     Resolver = new TemplateResolver()
};
Razor.SetTemplateService(new TemplateService(templateConfig)); 
```

**由 The Muffin Man 更新** 指定模板并渲染字符串

```
var templateResolver = Razor.Resolve("Registration.cshtml");
return templateResolver.Run(new ExecuteContext()); 
```

此外，我和其他人在此链接[https://github.com/Antaris/RazorEngine/issues/61](https://github.com/Antaris/RazorEngine/issues/61)在工作时遇到了使用`_Layout`问题`Layout`。

'_Layout' 是旧语法。在未来的版本中已更新为“布局”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:59:19.850

你可以用 Razor 轻松地做很多事情；然而，那个特定的项目似乎抽象出了很多你可以做的 Razor 引擎的东西（这有好有坏）。在您的情况下，听起来您最好实现自己的 Razor 解决方案（实际上并没有那么糟糕），然后您可以让您的模板抛出异常或很容易地拉入其他内容。

例如; 滚动您自己的解决方案允许您为剃刀模板创建一个基类，该基类可以公开通过调用其他模板来拉入“部分视图”的能力。此外，如果某些属性为空，您可以进行模型检查并抛出异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-02T18:24:55.743

使用 RazorEngine 实现布局的最简单方法是替换模板在布局的 @RenderBody() 中返回的内容：

```
 var finalHtml = layout.Replace(@"@RenderBody()", templateHtml); 
```

**例如：**

您的**_Layout.cshtml**与典型的 @RenderBody()

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> <html>
    <head>
    </head>
    <body>
        <div>
            @RenderBody()
        </div> 
    </body> 
</html> 
```

你的 RazorEngine 模板**MyTemplate.cshtml**

```
@using RazorEngine.Templating
@inherits TemplateBase<myviewmodel>

<h1>Hello People</h1>
<p>@Model</p> 
```

无论您在哪里调用 RazorEngine 模板：

```
var TemplateFolderPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "EmailTemplates");
var template = File.ReadAllText(Path.Combine(TemplateFolderPath,"MyTemplate.cshtml"));
var layout = File.ReadAllText(Path.Combine(TemplateFolderPath, "_Layout.cshtml"));
var templateService = new TemplateService();
var templateHtml = templateService.Parse(template, myModel, null, null);
var finalHtml = layout.Replace(@"@RenderBody()", templateHtml); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-22T08:38:09.353

实现邮件功能的完全定制的解决方案。

添加 RazorEngine 的 nuget 数据**包**

**创建 _Layout 模板（.cshtml）：**

```
<html>
<body style="margin: 0; padding: 0;">
    <div style="width:100%; display:block; float:left; height:100%;">
        <table cellpadding="0" cellspacing="0" border="0" align="center" width="100%">
            <tr>
                <td width="37" style="background-color: #ffffff;"></td>
                <td width="200" style="background-color: #ffffff">
                    <a href="@Url("")">Send Mail Logo</a>                    
                </td>
                <td style="background-color: #ffffff;">
                    &nbsp;

                </td>
                <td width="126" style="background-color: #ffffff;">
                    <img src="@Url("Images/mail/social-media.png")" alt="" width="126" height="73" border="0" usemap="#Map" />
                </td>
            </tr>
        </table>
        <table cellpadding="0" cellspacing="0" border="0" align="center" width="100%">
            <tr height="7">
                <td style="background-color: #ffffff;" colspan="3"></td>
            </tr>
            <tr height="54">
                <td colspan="3"></td>
            </tr>
            <tr>
                <td width="37">&nbsp;</td>
                <td style="font-family: Myriad, 'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 11pt; color: #6b6c6f; line-height: 24px;">
                    {{BODY}}
                </td>
                <td width="37">&nbsp;</td>
            </tr>

            <tr height="55">
                <td style="line-height: 0;" colspan="3">&nbsp;</td>
            </tr>
            <tr height="11">
                <td background="@Url("/Images/mail/dotted-line.png")" colspan="3" style="line-height: 0;">&nbsp;</td>
            </tr>
        </table>
    </div>
    <map name="Map" id="Map">
        <area shape="rect" coords="28,29,51,51" href="#" alt="Twitter" />
        <area shape="rect" coords="56,28,78,52" href="#" alt="Google+" />
        <area shape="rect" coords="84,28,104,51" href="#" alt="LinkedIn" />
    </map>
</body>
</html> 
```

**创建 ConfirmEmail 模板 (.cshtml) ：**

```
@using yourProjectnamespace.LanguageResources.Mail
@model ConfirmEmail

@MailTemplateResource.YouHaveLoggedIn

<a href="@Url(string.Format("/User/Confirmemail?EmailId={0}", Model.UserId))">@MailTemplateResource.ClickHere</a> 
```

**创建 CustomTemplateBase 类：**

```
public class CustomTemplateBase<T> : TemplateBase<T>
    {
        public string Url(string url)
        {
            return MailConfiguration.BaseUrl + url.TrimStart('/');
        }          
    } 
```

**创建 EmbeddedTemplateManager 类：**

内部类 EmbeddedTemplateManager : ITemplateManager { private readonly string ns;

```
public EmbeddedTemplateManager(string @namespace)
{
    ns = @namespace;
}

public ITemplateSource Resolve(ITemplateKey key)
{
    var resourceName = $"{ns}.{key.Name}.cshtml";
    string content;

    using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName))
    using (var streamReader = new StreamReader(stream))
    {
        content = streamReader.ReadToEnd();
    }

    return new LoadedTemplateSource(content);
}

public ITemplateKey GetKey(string name, ResolveType resolveType, ITemplateKey context)
{
    return new NameOnlyTemplateKey(name, resolveType, context);
}

public void AddDynamic(ITemplateKey key, ITemplateSource source)
{
    throw new NotImplementedException("");
} 
```

}

**创建邮件类：**

```
public class Mail
    {
        private static readonly IRazorEngineService RazorEngine;

        static Mail()
        {
            var config = new TemplateServiceConfiguration
            {
                BaseTemplateType = typeof(CustomTemplateBase<>),
                TemplateManager = new EmbeddedTemplateManager(typeof(Mail).Namespace + ".Templates"),
                Namespaces = { "Add CurrentProjectName", "Add CurrentProjectName .Models" },
                CachingProvider = new DefaultCachingProvider()
            };
            RazorEngine = RazorEngineService.Create(config);
        }

        public Mail(string templateName)
        {
            TemplateName = templateName;
            ViewBag = new DynamicViewBag();
        }

        public string TemplateName { get; set; }

        public object Model { get; set; }

        public DynamicViewBag ViewBag { get; set; }

        public string GenerateBody()
        {
            var layout = RazorEngine.RunCompile("_Layout", model: null);
            var body = RazorEngine.RunCompile(TemplateName, Model.GetType(), Model);
            return layout.Replace("{{BODY}}", body);
        }

        public MailMessage Send(Guid key, string to, string subject, string cc = null)
        {
            var email = new MailMessage()
            {
                From = MailConfiguration.From,
                Body = GenerateBody(),
                IsBodyHtml = true,
                Subject = subject,
                BodyEncoding = Encoding.UTF8
            };

            email.Headers.Add("X-MC-Metadata", "{ \"key\": \"" + key.ToString("N") + "\" }");         

            foreach (var sendTo in to.Split(' ', ',', ';'))
            {
                email.To.Add(sendTo);
            }

            if (cc != null)
            {
                foreach (var sendCC in cc.Split(' ', ',', ';'))
                {
                    email.CC.Add(sendCC);
                }
            }

            var smtp = new MailClient().SmtpClient;
            smtp.EnableSsl = true;
            smtp.Send(email);
            return email;
        }
    }

    public class Mail<TModel> : Mail where TModel : class
    {
        public Mail(string templateName, TModel mailModel) : base(templateName)
        {
            Model = mailModel;
        }
    } 
```

**创建 MailClient 类：**

```
public class MailClient
    {
        public MailClient()
        {
            SmtpClient = new SmtpClient(MailConfiguration.Host)
            {
                Port = MailConfiguration.Port,
                Credentials = new NetworkCredential
                {
                    UserName = MailConfiguration.UserName,
                    Password = MailConfiguration.Password
                }
            };
        }

        public SmtpClient SmtpClient { get; }
    } 
```

**创建 MailConfiguration 类：**

```
public class MailConfiguration
    {
        private static string GetAppSetting(string key)
        {
            var element = ConfigurationManager.AppSettings["Mail:" + key];
            return element ?? string.Empty;
        }

        public static string BaseUrl => GetAppSetting("BaseUrl");     

        public static string Host => GetAppSetting("Host");

        public static int Port => Int32.Parse(GetAppSetting("Port"));

        public static string UserName => GetAppSetting("Username");

        public static string Password => GetAppSetting("Password");

        public static MailAddress From => new MailAddress(GetAppSetting("From"));
    } 
```

**邮件发件人类：**

在 MailSerder 类中实现您的方法并在您的存储库或控制器中调用 MailSerder 方法。

```
Create public class MailSender : IMailSender
    {
        public MailSender()
        {

        }

        public void SendConfirmEmail(string emailId, Guid userId)
        {
            var confirmEmail = new ConfirmEmail
            {
                UserId = userId
            };
            ConfirmEmail(emailId, MailResource.YourRegistration, confirmEmail);
        }

        private void ConfirmEmail(string recipient,string subject,ConfirmEmail model)
        {
            var key = Guid.NewGuid();
            var mail = new Mail<ConfirmEmail>("ConfirmEmail", model);
            mail.ViewBag.AddValue("Recipient", recipient);           
            var sentMail = mail.Send(key, recipient, subject);          
        }
    } 
```

# android - Android：我无法在我的应用上安装 admob

> ID：11414197
> 
> 赞同：-3
> 
> 时间：2012-07-10T13:18:35.290
> 
> 标签：android, admob

我开始生气，我无法将 admob 放入我的应用程序中。

我有一个**min-sdk="10"的****2.3.3**应用程序，我需要它来进行 zxing。

 **现在我需要放admob...我进入我的帐户下载它（版本6.0.1），我发现需要android 3.2！

我已经尝试了各种实现，例如 put admob4，varios code，但我没有成功......我怎样才能安装 admob 并让 2.3.3？怎么能让这个可怕的东西起作用？

日志猫：

07-10 13:55:20.007: E/AndroidRuntime(1348): java.lang.RuntimeException: 无法启动活动 ComponentInfo{it.mi.action.codmmunicator_2ddecoder/it.mi.action.codmmunicator_2ddecoder.Tabs}: android.view .InflateException：二进制 XML 文件第 8 行：膨胀类 com.google.ads.AdView 时出错

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:22:55.120

[在这里](http://myandroidsolutions.blogspot.ro/2012/06/android-how-to-add-admob-to-android-in.html)，您可以看到如何将 admob 添加到您的应用中。您只需使用 3.2 或 4 android sdk，但在您的清单 min-sdk 标签中放置 10 ...有关更多详细信息，请查看该教程。**

# php - 使用图标代替组合框

> ID：11414202
> 
> 赞同：0
> 
> 时间：2012-07-10T13:18:51.147
> 
> 标签：php, html, jquery-ui

我有一个表格，其中有一个图标。

目前，在真假之间进行选择。图标下方有一个组合框，但是，我需要做的是能够根据组合框本身的图标切换状态。如果数据库中的布尔值为假，X 将出现，但如果有人点击 X，则数据库中的布尔值设置为真，图标变为勾号。

我怎样才能做到这一点？我已经研究过 jquery，但它并不是我想要的。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:26:29.217

这就是你要找的东西，你只是不知道如何利用它。

首先，您需要正确设置表单，您可以从中获得启发：

```
<form>
    <select name="myselectcheckbox" id="myselectcheckbox">
        <option value="X"<?php if($data['myselectcheckbox'] == 'X'){ echo ' selected="selected"'; ?>>Yes</option>
        <option value=""<?php if($data['myselectcheckbox'] == ''){ echo ' selected="selected"'; ?>>No</option>
    </select>
</form> 
```

应该对表单元素执行此操作，jQuery 的代码将是这样的：

```
<script>
$(function(){
    $('#myselectcheckbox').hide().append('<a href="#" id="myselectedcheckbox_toggler"><img src="checkbox.gif"></a>');
    $('#myselectedcheckbox_toggler').click(function(){
        if($('#myselectcheckbox').val() == 'X'){
            $('#myselectcheckbox').val('');
            $('#myselectedcheckbox_toggler img').attr('src', 'checkbox.gif');
        }else{
            $('#myselectcheckbox').val('X');
            $('#myselectedcheckbox_toggler img').attr('src', 'checkbox-checked.gif');
        }
    });
});
</script> 
```

这听起来很对，测试一下，然后尝试自己做剩下的事情。该代码非常不言自明，我无法为您提供更多帮助。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:44:06.750

使用来自另一张海报的 jquery 修改了我的代码。

```
 <script>
$(function(){
    $('#myselectcheckbox').hide().append('<a href="#" id="myselectedcheckbox_toggler"><img src="checkbox.gif"></a>');
    $('#myselectedcheckbox_toggler').click(function(){
        if($('#myselectcheckbox').val() == TRUE){
            $('#myselectcheckbox').val('');
            $('#myselectedcheckbox_toggler').attr('src', 'checkbox.gif');
        }else{
            $('#myselectcheckbox').val(TRUE);
            $('#myselectedcheckbox_toggler').attr('src', 'checkbox-checked.gif');
        }
    });
});
</script> 
```

和

```
 <select name="myselectcheckbox" id="myselectcheckbox">
    <option value="X"<?php if($child_details['IsVaccinatedAgainstDiphtheria']==TRUE){ echo ' selected="selected"'; ?>>Yes</option>
    <option value=""<?php if($child_details['IsVaccinatedAgainstDiphtheria']==FALSE){ echo ' selected="selected"'; ?>>No</option> 
```

# wxwidgets - wxWidgets Sizer 不会自动布局

> ID：11414203
> 
> 赞同：1
> 
> 时间：2012-07-10T13:18:52.037
> 
> 标签：wxwidgets

这是我的代码：

```
cLicensePanel::cLicensePanel( wxWindow * parent )
        : wxPanel(parent,-1,wxPoint(0,0),wxSize(500,500))
    {
        wxBoxSizer * szrUserKey = new wxBoxSizer(wxHORIZONTAL);
        myUserKeyCtrl = new wxTextCtrl(this,-1,L"");
        szrUserKey->Add( new wxStaticText(this,-1,wxString(L"User's ComputerKey:")),
                   0,wxALL,10);
        szrUserKey->Add( myUserKeyCtrl,0,wxALL,10);
        szrUserKey->Add( new wxButton(this,IDC_Generate,L"Generate"),0,wxALL,10);
        SetSizer( szrUserKey );
    } 
```

这是为了制作这个显示，3 个小部件整齐地排列成一排。

![在此处输入图像描述](../Images/17845ca0f1b8cb174867a5bd8d1b7f42.png)

然而，我实际上得到的是所有的小部件一个一个堆叠在一起

![在此处输入图像描述](../Images/bef308247d64ffd4f59b963f3726e3eb.png)

为什么？

我可以通过显式调用 Sizer::Layout() 来强制正确显示

```
cLicensePanel::cLicensePanel( wxWindow * parent )
        : wxPanel(parent,-1,wxPoint(0,0),wxSize(500,500))
    {
        wxBoxSizer * szrUserKey = new wxBoxSizer(wxHORIZONTAL);
        myUserKeyCtrl = new wxTextCtrl(this,-1,L"");
        szrUserKey->Add( new wxStaticText(this,-1,wxString(L"User's Computer Key:")),0,wxALL,10);
        szrUserKey->Add( myUserKeyCtrl,0,wxALL,10);
        szrUserKey->Add( new wxButton(this,IDC_Generate,L"Generate"),0,wxALL,10);
        szrUserKey->Layout();
        SetSizer( szrUserKey );
    } 
```

我可以忍受这一点，尽管在我看来应该没有必要调用 Layout. 我还怀疑 Layout 调用是必要的原因可能是解决让我难过的问题的重要线索。

以上是使用 wxWidgets v2.8.12 时的行为。我正在升级到 v2.9.3。

在新版本中，没有调用 Layout() 的初始代码显示了相同的问题，所有小部件都堆叠在一起。如果我在 v2.9.3 中添加对 layout() 的调用，那么我根本看不到任何小部件 - 面板显示完全空白！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:27:54.687

`SetSizer()`故意不进行布局，仅在调整窗口大小时才会发生。但是也碰巧一个新创建的窗口总是在`EVT_SIZE`显示后很快得到一个 , 所以当用户看到它时，它已经布置好了（这就是`SetSizer()`不这样做的原因：这将是浪费无论如何，在 99% 的情况下都会很快重做）。

在您的情况下，无论出于何种原因，面板都没有收到此大小事件。也许——看看你的其余代码——你可以看到它是什么并避免它。但如果没有，打电话`Layout()`也是一个很好的解决方案。除了你应该在面板本身上调用相同的方法，而不是在 sizer 上，即做

```
cLicensePanel::cLicensePanel( wxWindow * parent )
{
    ...
    SetSizer(szrUserKey);
    Layout();
} 
```

# sql - 会话执行的 Oracle 查询

> ID：11414216
> 
> 赞同：3
> 
> 时间：2012-07-10T13:19:39.777
> 
> 标签：sql, oracle, oracle11g

我正在尝试跟踪针对特定数据库用户执行的 SQL 语句。我没有启用审计，我使用的是 Oracle 11g。

我有以下查询：

```
SELECT  
  S.MODULE, 
  SQL_TEXT , 
  S.EXECUTIONS    
FROM
  SYS.V_$SQL S, 
  SYS.ALL_USERS U
WHERE
  S.PARSING_USER_ID=U.USER_ID 
  AND UPPER(U.USERNAME) IN ('USERNAME')
  AND (UPPER(s.MODULE)='APP.EXE')
ORDER BY S.LAST_LOAD_TIME 
```

但是，如果运行“APP.EXE”的多个用户连接到同一个数据库用户，我无法理解哪个操作系统用户执行了哪个查询。所以我尝试加入 V$SESSION 视图以获取用户详细信息。

```
SELECT  
  S.MODULE,SQL_TEXT ,SN.OSUSER, SN.MACHINE, S.EXECUTIONS
FROM
  SYS.V_$SQL S, 
  SYS.ALL_USERS U,
  V$SESSION SN 
WHERE
  S.PARSING_USER_ID=U.USER_ID 
  AND UPPER(U.USERNAME) IN ('USERNAME')
  AND (UPPER(S.MODULE)='APP.EXE')
  AND S.SQL_ID=SN.SQL_ID
ORDER BY S.LAST_LOAD_TIME 
```

但这似乎不起作用（在我的情况下它没有返回任何行）所以，我有以下问题

1）如何让每个会话执行的查询？

2) V_$SQL 的 EXECUTIONS 列似乎是所有会话的执行。我如何知道会话执行特定查询的次数？

3) 关于查询的记录将在 V_$SQL 中存储多长时间？Oracle 什么时候从视图中删除它？

先谢谢大家了

普拉迪普

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:01:47.660

如果不进行更多配置（例如启用审计）或做出一些妥协，您可能无法获得您正在寻找的数据。您要解决的业务问题是什么？根据问题，我们可以帮助您确定配置数据库以记录您所需要的信息的最简单方法。

Oracle 不会尝试在任何地方存储特定用户执行特定查询的次数（特别是特定操作系统用户执行特定查询的次数）。`SQL_ID`in`V$SESSION`仅表示`SQL_ID`会话当前正在执行。如果，正如我猜测的那样，这是一个客户端-服务器应用程序，很可能 99% 的时间都是 NULL，因为绝大多数时间，会话没有执行任何 SQL，它正在等待用户做某事。`PREV_SQL_ID`in是之前执行的`V$SESSION`SQL 语句——至少通常不会是`NULL`. 但它只会有一个值，不会有该会话执行的 SQL 语句的历史记录。

`V$SQL`视图表示 SQL 共享池中的内容。当 SQL 语句超出共享池时，它将不再出现在`V$SQL`视图中。发生的速度取决于多种因素——某人执行语句的频率、解析新语句的频率（这通常在很大程度上取决于您的应用程序是否正确使用绑定变量）、您的共享池有多大等. 通常，这将在几分钟到数据库关闭之间。

如果您获得了使用 AWR 表的许可，并且您对近似值而不是完全正确的答案感兴趣，则可以通过查看一些 AWR 表来获得所需的信息。例如，`V$ACTIVE_SESSION_HISTORY`将捕获每个会话每秒都在积极执行的 SQL 语句。然而，由于这是一个客户端-服务器应用程序，这意味着绝大多数时间会话将处于非活动状态，因此不会捕获任何内容。但是，碰巧为会话捕获的 SQL 语句将让您了解不同 SQL 语句的相对频率。当然，运行时间较长的 SQL 语句也更有可能被捕获，因为它们更有可能在给定时刻处于活动状态。如果查询 A 和 B 都在完全相同的时间内执行，并且在最后一个小时内捕获了一个会话执行 A 5 次和 B 10 次，您可以得出结论 B 的执行频率大约是 A 的两倍。如果您知道查询的平均执行时间，捕获查询的平均概率将是查询执行的秒数（在 0.5 秒内执行的查询有 50% 的机会被捕获，在 0.25 秒内执行的查询有 25% 的机会获得捕获），因此您可以估计特定会话执行特定查询的频率。这远非一个确切的数字，尤其是在较短的时间范围内以及对于实际执行时间变化较大的查询。

视图中的数据`V$ACTIVE_SESSION_HISTORY`通常可用几个小时。然后将其抽样到`DBA_HIST_ACTIVE_SESS_HISTORY`表格中，该表格将可用数据量减少了一个数量级，从而使任何估计的准确性大大降低。但是无论您的 AWR 保留时间间隔是多少，该数据都会保留（默认情况下是一周，尽管许多站点将其增加到 30 或 60 天）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:09:02.133

根据甲骨文文档

```
SQL_ADDRESS -Used with SQL_HASH_VALUE to identify the SQL statement that is currently being  executed 

SQL_HASH_VALUE - Used with SQL_ADDRESS to identify the SQL statement that is currently being executed 
```

请找到以下链接以供参考

[SQL_ADDRESS 和哈希值](http://docs.oracle.com/cd/B28359_01/server.111/b28320/dynviews_3016.htm)

请修改下面的SQL

```
 SELECT S.MODULE, SQL_TEXT, SN.OSUSER, SN.MACHINE, S.EXECUTIONS
      FROM SYS.V_$SQL S, SYS.ALL_USERS U, V$SESSION SN
     WHERE S.PARSING_USER_ID = U.USER_ID
       AND UPPER(U.USERNAME) IN ('USERNAME')
       AND (UPPER(S.MODULE) = 'APP.EXE')
       AND SN.sql_hash_value = S.hash_value
       AND SN.sql_address = S.address
     ORDER BY S.LAST_LOAD_TIME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T15:45:34.567

尝试这个

```
SELECT l.Sql_Id
FROM v$session s
JOIN v$session_longops l 
    ON l.sid = s.Sid 
    AND l.Serial# = s.Serial# 
    AND l.Start_Time >= s.Logon_Time
WHERE s.Audsid = Sys_Context('USERENV', 'SESSIONID') 
```

我假设您只对运行 sql 的日志感兴趣？

# jquery - jQuery Mobile“弹出”div 没有隐藏？

> ID：11414219
> 
> 赞同：5
> 
> 时间：2012-07-10T13:19:43.170
> 
> 标签：jquery, jquery-mobile

我正在使用 jQuery Mobile 并希望使用该`popup`方法。以前一切正常，但是当不得不重构我的代码时出现了问题，现在我花了很长时间看这个，我真的看不到“树木的木材”。因此，在我的应用程序中，我创建了一个测试页面，从中删除了我所有的 JS、CSS 和 HTML，从而得到了一个简洁但干净的页面。我什至已经添加了 JQuery 示例并链接到他们的托管脚本，以防我的代码出现冲突......但我的问题仍然存在......用于弹出窗口的 DIV 不是t 最初隐藏并单击按钮无济于事......我真的让自己努力解决这个问题，我确定我错过了一些非常简单和明显的东西（也许我应该去喝杯咖啡 15 分钟）。 ..

这是代码

```
<!DOCTYPE HTML>
<html>
<head>
<title></title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>

<body>

<a href="#basic" data-rel="popup" data-role="button">Default popup</a>
<div id="basic" data-role="popup" class="ui-content">
  <p>I am a default popup</p>
</div>

<a href="#transitionExample" data-transition="none" data-role="button" data-inline="true" data-rel="popup">No transition</a>
<a href="#transitionExample" data-transition="pop" data-role="button" data-inline="true" data-rel="popup">Pop</a>
<a href="#transitionExample" data-transition="slideup" data-role="button" data-inline="true" data-rel="popup">Slide up</a>
<a href="#transitionExample" data-transition="slidedown" data-role="button" data-inline="true" data-rel="popup">Slide down</a>
<div id="transitionExample" data-role="popup" data-transition="flip">
  <p>This is some text for the transition example</p>
</div>

</body>
</html> 
```

这是Firefox中的屏幕截图（部署到测试设备时相同）

![在此处输入图像描述](../Images/f99ad21346d68e70b403b773c7bd77ea.png)

我做错了什么...我能感觉到即将到来的情感时刻...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:29:27.890

我认为[弹出小部件](http://jquerymobile.com/test/docs/pages/popup/index.html)尚未正式发布。也许您打算使用的是一个[对话框](http://jquerymobile.com/demos/1.1.0/docs/pages/page-dialogs.html)？

如果你想使用弹出对话框，你需要链接到正确版本的 JQM，此外我认为你不需要`ui-content`在 div 上放置一个类，来自文档

```
<a href="#popupBasic" data-rel="popup">Open Popup</a>

<div data-role="popup" id="popupBasic">
    <p>This is a completely basic popup, no options set.<p>
</div> 
```

如果您打算将它与对话框一起使用，那么您的标记会稍微偏离，您的链接/按钮应该在它们自己的页面中，并且对话框在它们自己的 div 中（即不嵌套在带有链接的页面中）。

这是固定的标记

```
<div data-role="page">
<a href="#basic" data-rel="dialog" data-role="button">Default popup</a>

<a href="#transitionExample" data-transition="none" data-role="button" data-inline="true" data-rel="dialog">No transition</a>
<a href="#transitionExample" data-transition="pop" data-role="button" data-inline="true" data-rel="dialog">Pop</a>
<a href="#transitionExample" data-transition="slideup" data-role="button" data-inline="true" data-rel="dialog">Slide up</a>
<a href="#transitionExample" data-transition="slidedown" data-role="button" data-inline="true" data-rel="dialog">Slide down</a>
</div>

<div id="basic" data-role="dialog">
<div data-role="header"><h3></h3></div>
<div  data-role="content" >
<p>I am a default popup</p>
</div>

</div>

<div id="transitionExample" data-role="dialog">
<div data-role="header"><h3></h3></div>
<div data-role="content">
  <p>This is some text for the transition example</p>
</div>

</div> 
```

# wpf - 如何确保所有模型都可以访问服务代理？

> ID：11414224
> 
> 赞同：1
> 
> 时间：2012-07-10T13:19:59.500
> 
> 标签：wpf, wcf, mvvm, model

我在 MVVM 架构中有一个 WPF 客户端。

WPP 客户端需要连接到 WCF 服务，并向其发送操作。

这种能力需要来自不同的观点，因此意味着不同的模型（对吗？）

***问题：***

1.  我的假设是**模型**是访问 WCF 服务客户端的模型吗？含义 - 我们不希望视图或模型视图连接到 WCF 服务，对吗？只有模型本身...
2.  如何确保所有模型都可以访问 WCF 服务的客户端？我是否使用某种“ServiceLocator”？（我在某处读过这个词，但不知道它的确切含义。如果以前做过这个的人能对这个话题有所了解，我会很高兴）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:39:56.687

1.  Model 代表一个数据，所以 ViewModel 应该知道服务
2.  只需将 a`IMyWcfService`作为任何 ViewModel 的依赖项，您就可以`ViewModelBase`使用受保护的构造函数创建抽象类，该构造函数接受`IMyWcfService`，因此所有具体的 ViewModel 都有义务提供此服务

正如评论中已经说明的那样 - 尽量避免使用服务定位器，这会弄乱 API 和单元测试。只需将所有依赖项作为构造函数参数提供，这将使类 API 更加清晰，因此您将看到所需的内容，而不必担心诸如“服务定位器无法解析服务”之类的运行时错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:40:04.800

就我个人而言，我认为不`Models`应该只是保存数据的普通容器对象。它们不应包含数据访问代码或任何其他应用程序逻辑，除了可能用于验证其数据完整性的基本数据验证。

您`ViewModels`应该负责与 WCF 服务器通信。或者更好的是，创建一个包含所有数据访问调用的存储库类，并让 ViewModel 使用它。

不要忘记使用 MVVM，您`ViewModels` *就是*您的应用程序。他们负责从应用程序流到业务逻辑到数据访问的所有事情（尽管有时这些概念是从 VM 中抽象出来的，例如使用存储库进行数据访问）。

`Views`只是一个用户友好的界面，位于 ViewModel 之上，允许用户与它们交互，并且`Models`只是用于包含数据的对象。

# class - 访问类内部的类

> ID：11414225
> 
> 赞同：2
> 
> 时间：2012-07-10T13:20:05.880
> 
> 标签：class, scala, object

假设我有一堂课：

```
class MyClass {
  val value = new MyClass
} 
```

这不起作用，它会引发堆栈错误。有没有办法使这项工作，所以 value 是`MyClass`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:38:18.527

使这成为可能的最简单方法是使用 a `lazy val`，在访问它之前不会执行它：

```
scala> class MyClass { lazy val value = new MyClass }
defined class MyClass

scala> new MyClass
res0: MyClass = MyClass@6a073b72

scala> res0.value
res1: MyClass = MyClass@6b37008a

scala> res1.value
res2: MyClass = MyClass@503f0b70 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T13:23:28.100

我相信您会看到这样的构造会递归地创建无限数量的`MyClass`对象。

如果你真的想要这样的`MyClass`对象“链”，你需要某种形式的基本情况来限制递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:26:59.853

我有你需要的

```
class MyClass {
  val value = this
} 
```

但是我想知道这对...有用

# symfony - 在 symfony2 中创建新类型

> ID：11414227
> 
> 赞同：1
> 
> 时间：2012-07-10T13:20:08.440
> 
> 标签：symfony, doctrine-orm

如何在 Symfony2 中创建 FormType 以将实体转换为字符串并返回？

[我已经完成了这里](http://symfony.com/doc/master/cookbook/form/data_transformers.html)所说的一切，但是有一个错误：

```
Expected argument of type "string", "<Vendor>\<Bundle>\Entity\User" given 
```

如何创建将文本字段转换为用户对象的表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:39:25.030

假设`User`有一个`username`字段，我会进行如下转换。**请**注意那`transform`是为了`User`变换`string`，`reverseTransform`而是相反的。

将转换器添加到您的表单字段：

```
$builder
    ->add('user', 'text')
    ->addViewTransformer($transformer) 
```

相关代码（例如您引用的示例）：

```
/**
 * Transforms an User to a string.
 *
 * @param  User|null $user
 * @return string
 */
public function transform($user)
{
    return $user ? $user->getUsername() : '';
}

/**
 * Transforms a string to an User.
 *
 * @param  string $username
 * @return User|null
 */
public function reverseTransform($username)
{
    if(empty($username)) return null;

    $user = $this->om
        ->getRepository('AcmeHelloBundle:User')
        ->findOneBy(array('username' => $username))
    ;

    return $user; // Can be null
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:34:27.870

您可以在此处提取此表单类型并使用它。[https://github.com/symfony/symfony/pull/1951](https://github.com/symfony/symfony/pull/1951)它可以满足您的要求。

# java - 使用 CDI 延迟发现 bean

> ID：11414232
> 
> 赞同：1
> 
> 时间：2012-07-10T13:20:21.457
> 
> 标签：java, rest, plugins, cdi

我正在使用 CDI 创建一个 Java Web 应用程序。My War 包括各种作为 bean 源的 Jar 文件（包括 META-INF/beans.xml 文件）。在 JBoss 等 Java EE 容器中运行时会自动发现我的 bean（我目前使用的是 JBoss AS 7.1.1）。这一切运作良好。

我希望能够扩展 Web 应用程序，理想情况下是允许它从存储在可配置位置（因此在系统属性指定的位置）中的 Jar 文件加载类。这也很好，因为我可以使用 ClassLoader 来解析类和资源。我缺少的是让 CDI 扫描这些外部 Jar 文件并包含它们的 bean 的能力。

这将允许我的应用程序托管插件功能，包括新的 REST 资源。我不介意我是否必须重新启动应用程序才能获取这些外部 Jar 文件中包含的类和资源。

我看不出有办法做到这一点。这甚至是应该在这种环境下尝试的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:46:49.753

> 我看不出有办法做到这一点。

你实际上有两个选择：

1.  使用[CDI 扩展机制](http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html)在**启动时**使用 bean / bean-archives并以您想要的方式修改它们。查看文档中提供的示例，这应该可以帮助您开始。
2.  在**执行时**使用[BeanManager](http://docs.jboss.org/cdi/api/1.0/javax/enterprise/inject/spi/BeanManager.html)。看看[这个](https://stackoverflow.com/questions/8420070/how-to-create-and-destroy-cdi-weld-managed-beans-via-the-beanmanager)类似的问题。

# android - 将图像视图中的图像右对齐并垂直居中

> ID：11414234
> 
> 赞同：4
> 
> 时间：2012-07-10T13:20:28.197
> 
> 标签：android, android-layout, imageview, scaling

假设我有一个具有此纵横比的 ImageView

```
#####
#####
##### 
```

我希望能够将具有不同纵横比的图像放入其中。

如果图像有这个比例

```
00
00
00 
```

我希望它是

```
###00
###00
###00 
```

所以 android:scaleType="fitEnd" 会工作

但是如果我有一个比例为

```
00000 
```

我希望它是

```
#####
00000
##### 
```

所以这里需要 android:scaleType="fitCenter" 。

有没有办法把这个结合起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:07:03.973

您不能`scaleTypes`在同一属性中使用两个。您可能需要等待图像被加载，然后再决定`scaleType`使用什么`imgView.setScaleType(ImageView.ScaleType.CENTER)`。

# c# - 用户控件在回发中需要一个 ID？

> ID：11414238
> 
> 赞同：0
> 
> 时间：2012-07-10T13:20:44.013
> 
> 标签：c#, .net, user-controls

当页面生成时，我将一些 div 添加到服务器端的面板中，并为每个面板添加一个 ID：

```
HtmlGenericControl divContainerInside = new HtmlGenericControl("div");
divContainerInside.ID = "inside_" + m_oIDCategoria + "_" + numero; 
```

然后，在回发时（重新创建它们之后），我循环它们：

```
foreach (HtmlGenericControl divInside in myPanel.Controls.OfType<HtmlGenericControl>())
{
    Response.Write(divInside.ID);
} 
```

一切正常！但是，如果我`divContainerInside.ID`在生成它时删除它，我会得到一个 NullException 循环它们。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:39:40.013

我猜当您尝试读取尚未设置的 ID 时，您会收到 NullException。

如果您像这样更改代码，您将获得以下值：

```
foreach (HtmlGenericControl divInside in myPanel.Controls.OfType<HtmlGenericControl>())
{
    Response.Write(divInside.ClientID);
} 
```

PS：不知道你有没有这行代码：

```
myPanel.Controls.Add(divContainerInside); 
```

如果您想了解有关 Web 控件的更多信息，可以阅读这篇[文章](http://www.4guysfromrolla.com/articles/031710-1.aspx)和[此](http://dotnetslackers.com/ASP_NET/re-113573_The_difference_between_ID_ClientID_and_UniqueID.aspx).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T13:23:27.137

您不能使用 response.Write 将控件添加到页面中，您需要将其添加到 Pages 或其他控件控件集合中，如下所示：

```
Page.Controls.Add(divInside); 
```

# android - Android 中的 admob（phonegap）点击重定向市场应用程序。但按后退键显示白屏。

> ID：11414239
> 
> 赞同：0
> 
> 时间：2012-07-10T13:20:49.770
> 
> 标签：android, cordova, admob

我正在使用 admob 在我的带有 Phonegap（Corodoa）的 android 应用程序中显示广告。
当用户点击广告应用程序时，将用户重定向到市场应用程序（因为广告中的链接用于市场应用程序）
当用户想要**通过按返回键返回我的应用程序时，出现白屏**（应该是网络浏览器）。

再次按下返回键后，它会转到我的应用程序。我的问题是为什么会出现白屏以及如何避免它出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:57:36.627

这是您看到的特定广告的问题。广告商将点击后的 URL 设为网址，然后将用户重定向到 Play 商店，而不仅仅是将点击后的 URL 设为 Play 商店的 URI。

不幸的是，您无法解决此问题。

# android - android中的布局设计

> ID：11414242
> 
> 赞同：0
> 
> 时间：2012-07-10T13:20:59.770
> 
> 标签：android, android-layout

我们可以设计这样的页脚吗（见附图），页脚中的图像看起来像是从一个布局弹出到另一个布局。

![图片](../Images/0015012f5574cc9d40433965ebb3d8c3.png)

任何人都可以让我知道如何设计这样的，如果可能的话，一些代码示例。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:24:53.290

在应用程序周围重用相同布局的最佳方法是使用 include 指令。像这样的东西：

```
<include layout="@layout/my_footer" /> 
```

my_footer.xml 是您的页脚布局。

在细节中，您可以使用简单的 LinearLayour 水平方向来实现该布局：

```
<LinearLayout android:orientation="horizontal">
     <ImageButton android:layout_weight="1"/>
     <ImageButton android:layout_weight="1"/>
     <ImageButton android:layout_weight="1"/>
     <ImageButton android:layout_weight="1"/>
     <ImageButton android:layout_weight="1"/>
</LinearLayout> 
```

您可以在此处找到有关重用布局的更多信息：[http ://android-developers.blogspot.it/2009/02/android-layout-tricks-2-reusing-layouts.html](http://android-developers.blogspot.it/2009/02/android-layout-tricks-2-reusing-layouts.html)

PS 请注意 layout_weight 属性，它为您的所有 LinearLayour 孩子提供相同的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:29:58.193

让我们假设页脚是页脚布局和页脚布局在正文布局下。

现在使用有 2 行的背景图像，第一行的颜色必须与 body-layout 的颜色匹配，图像的第二行将是黑色。

将此图像用作页脚布局的背景并根据需要使用 ImageButtons 设计它。

这将为您提供上述视觉效果。

# ios - 指定 -sdk 选项时 xcodebuild 不起作用

> ID：11414247
> 
> 赞同：1
> 
> 时间：2012-07-10T13:21:27.453
> 
> 标签：ios, xcodebuild

我正在尝试手动编译一个 xcode 项目，但当我通过 -sdk 选项指定 SDK 时，我无法使用 xcodebuild 对其进行编译。

这失败了：

```
/usr/bin/xcodebuild -project "libjpeg.xcodeproj"  -configuration "Release" -sdk iphonesimulator -arch i386 CONFIGURATION_BUILD_DIR=build build 
```

这有效：

```
/usr/bin/xcodebuild -project "libjpeg.xcodeproj"  -configuration "Release" -arch i386 CONFIGURATION_BUILD_DIR=build build 
```

我已经从 Apple 的开发者页面安装了 XCode 4.3.3 和命令行工具，其他一切都正常工作。如果我使用 XCode 构建这个项目，它也可以正常工作。我的系统中没有其他 xcode 版本。

我的环境中应该有一些真正损坏的东西，但我无法找到它。我很感激你能给我的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:25:40.840

您需要指定类似 -sdk iphonesimulator6.0

请参阅此答案：[使用最新 sdk 的 xcodebuild 参数。](https://stackoverflow.com/questions/4314804/parameter-for-xcodebuild-for-using-latest-sdk)

# sql - 用户定义列的最佳方法/替代方法

> ID：11414259
> 
> 赞同：0
> 
> 时间：2012-07-10T13:22:11.057
> 
> 标签：sql, sql-server, entity-framework

我正在重新设计一个旧系统，该系统相当依赖于用户定义的数据表添加。我希望能够使用 EF 或其他一些 ORM 映射框架，因此向表中添加列似乎不是最佳选择。

我主要关心的是建立一个强大的数据库结构和实践。ORM 是次要的，如有必要，可以将其删除。有没有人有适合他们的方法？

# lisp - “A”不是预期的“REAL”类型

> ID：11414260
> 
> 赞同：1
> 
> 时间：2012-07-10T13:22:11.607
> 
> 标签：lisp

服务器下面的代码显示列表中的整数个数。

```
(defun isNum (N)
  (and (<= N 9) (>= N 0)))

(defun count-numbers (list)
  (let ((count 0))
    (dolist (item list count)
      (cond
       ((null list) nil)
       (((and (<= N 9) (>= N 0))) item)(incf count))
       (setq(0 + count)))))) 
```

运行命令时出现错误`A' is not of the expected type`REAL' (count-numbers '(3 4 5 6 a 7 b) )

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:36:53.223

我很惊讶它的运行，因为你`cond`的构造不正确，你在代码的不必要的副作用生成位中切换到中缀表示法，并且你在`count-numbers`. 假设，如果它确实运行，该错误听起来是正确的。您正在对参数进行数字比较（以及非数字输入上的错误）。

我今天戴上了 codereview 帽子，所以让我们更深入地了解一下。

* * *

Lisp（实际上并不重要，afaik 这适用于 CL、Scheme 和所有杂种）使用`lower-case-snake-case-with-dashes`，而不是`lowerCamelCase`用于变量和函数名称。

```
(defun is-num (n)
  (and (<= n 9) (>= n 0))) 
```

* * *

常见的 Lisp 约定是以 结束谓词，`p`而不`-p`是以 . 开头`is-`。Scheme具有（IMO更好）结束谓词的约定，`?`而不是

```
(defun num-p (n)
  (and (<= n 9) (>= n 0))) 
```

* * *

`((and (<= N 9) (>= N 0)))`不是你调用函数的方式。您实际上需要使用它的名称，而不仅仅是尝试调用它的主体。如果您尝试运行此代码，这是您会遇到的许多错误之一。

```
(defun count-numbers (list)
  (let ((count 0))
    (dolist (item list count)
      (cond
       ((null list) nil)
       ((num-p item) item)(incf count))
       (setq(0 + count)))))) 
```

* * *

`numberp`已经存在，并对其输入进行类型检查，而不是尝试进行数字比较。您可能应该改用它。

```
(defun count-numbers (list)
  (let ((count 0))
    (dolist (item list count)
      (cond
       ((null list) nil)
       ((numberp item) item)(incf count))
       (setq(0 + count)))))) 
```

* * *

`((numberp item) item) (incf count))`可能不会像您认为它作为`cond`子句那样做。它实际上被视为两个单独的子句；检查是否`item`是 a `number`，如果是则返回。第二个尝试检查变量`incf`并返回`count`它是否评估为`t`（它没有，也不会）。您似乎想要的是`count`当您在列表中找到一个数字时增加计数器，这意味着您应该将该`incf`子句与`item`.

```
(defun count-numbers (list)
  (let ((count 0))
    (dolist (item list count)
      (cond ((null list) nil)
            ((numberp item) 
             (incf count)
             item))
      (setq (0 + count))))) 
```

* * *

`(setq (0 + count))`是错误的事情有三个原因

*   您似乎回到了中缀符号，这意味着第二位实际上是在尝试`0`使用变量`+`和`count`作为参数调用函数。
*   您没有第二部分`setq`，这意味着您正在尝试将上述内容设置为`NIL`隐式。
*   您实际上不需要设置任何内容即可返回值

至此，我们终于有了一段可以正确评估和运行的代码（并且它不会抛出您上面提到的错误）。

```
(defun count-numbers (list)
  (let ((count 0))
    (dolist (item list count)
      (cond ((null list) nil)
            ((numberp item) 
             (incf count)
             item))
      count))) 
```

* * *

`dolist`是一个迭代构造，它为给定列表中的每个元素做一些事情。这意味着您实际上不需要使用 that 手动测试列表终止`cond`。此外，因为`dolist`不收集结果，所以没有理由返回`item`它。您还不必要地隐藏了`count`您在`let`.

```
(defun count-numbers (list)
  (let ((count 0))
    (dolist (item list)
      (when (numberp item) (incf count)))
    count)) 
```

* * *

像往常一样，您可以通过更简单的`loop`调用来完成所有这些操作。

```
(defun count-numbers (list)
  (loop for item in list
        when (numberp item) sum 1)) 
```

这使计数器隐含并避免您需要手动返回它。事实上，除非这是专门编写您自己的迭代函数的练习，否则 Common Lisp 有一个内置的`count-if`，它接受`predicate sequence [some other options]`并返回匹配`count`项中的。如果你想具体命名，出于文体原因，你可以`sequence``predicate``count-numbers`

```
(defun count-numbers (list) (count-if #'numberp list)) 
```

并完成它。

* * *

总之，很好的尝试，但在提出进一步的问题之前，请尝试阅读语言[家族](http://mitpress.mit.edu/sicp/)[的](http://www.gigamonkeys.com/book/)知识[。](http://www.paulgraham.com/onlisp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:38:33.227

另一种方法是：

```
(reduce
 #'(lambda (a b)
     (if (numberp b) (1+ a) a))
 '(3 4 5 6 a 7 b) :initial-value 0) ; 5 
```

即以在每次迭代中为您提供前一次迭代的结果+序列的下一个成员的方式处理序列。从零开始，每次序列中的元素为数字时递增结果。

**编辑**

抱歉，我还没有看到 Inaimathi 提到过`count-if`。那可能会更好。

# asp.net - Context.Item 值为 null

> ID：11414261
> 
> 赞同：0
> 
> 时间：2012-07-10T13:22:14.800
> 
> 标签：asp.net, vb.net, null

在我们有提交按钮的页面上，单击它时由于 m_strPageDefinition 具有空值而出现错误。以下是它的代码以获得更多洞察力。只有有时且仅在生产中我们才获得`m_strPageDefinition`as的价值`null`，这会导致问题。有谁知道为什么`m_strPageDefinition`会来`null`。

```
Private m_strPageDefinition As String

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

       If Not IsPostBack  Then
            If (Not Context.Items("MyXmlString") = Nothing) And (Not Context.Items("mFormID") = Nothing) Then
                MyXMLString = Context.Items("MyXmlString")
                MyHiddenXMLString.Value = MyXMLString
            End If
        Else
            m_strPageDefinition = MyHiddenXMLString.Value
        End If

End Sub

Private Property MyXMLString()
        Get
            Return m_strPageDefinition
        End Get
        Set(ByVal value)
            m_strPageDefinition = value
        End Set
End Property 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:37:54.553

您应该考虑更一致地处理 m_strPageDefinition。为什么你访问的是私有变量而不是总是使用属性设置器？例如

```
Private m_strPageDefinition As String

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

If Not IsPostBack  Then
    If (Not Context.Items("MyXmlString") = Nothing) And (Not Context.Items("mFormID") = Nothing) Then
        MyXMLString = Context.Items("MyXmlString")
        MyHiddenXMLString.Value = MyXMLString
    Else
        MyXMLString = MyHiddenXMLString.Value
    End If
Else
    MyXMLString = MyHiddenXMLString.Value
End If

End Sub

Private Property MyXMLString() 
    Get 
        Return m_strPageDefinition 
    End Get 
    Set(ByVal value)         
        m_strPageDefinition = value 
    End Set 
End Property 
```

我相信您的问题来自我在 Not IsPostBack 声明中包含的缺少的“Else”。请原谅我，VB.NET 不是我编码的语言，所以格式/结构可能有点偏离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:59:19.047

我认为问题出在这里：

```
m_strPageDefinition = MyHiddenXMLString.Value 
```

更具体地说：`MyHiddenXMLString.Value`可能为空。

我不知道您在哪里声明了 MyHiddenXMLString，但是如何在 aspx 端将其设为隐藏变量（输入类型 =“hidden”.. ）并在页面第一次加载时设置它的值。

然后你知道价值将永远存在并且易于访问。

hth

# php - php/mysql/ajax 加入查询并访问结果变量

> ID：11414262
> 
> 赞同：0
> 
> 时间：2012-07-10T13:22:15.143
> 
> 标签：php, mysql, ajax, join

我有一个连接两个表的 mysql 数据库的查询。在第一个表中，它只是根据 id 提取记录。对于第二个表，可能有也可能没有基于第一个表中的值的匹配项。如果有任何匹配项，我想获得匹配项，否则，结果记录集的那些值可能是空的。

该查询似乎产生了正确数量的记录。但是，当我尝试访问一些应该存在的变量的值时，我什么也得不到，要么是因为我可能将它们称为错误的名称，要么它们以某种方式不在记录集中。我对mysql查询有点模糊，所以非常感谢任何建议..

表1公园

```
id | name | stateid 
```

表2 参观过的公园

```
id | visited | parkid | userid 
```

PHP 脚本

```
$sql = "SELECT * 
FROM `parks` p
LEFT JOIN `parksvisited` pv
ON p.id = pv.parkid
WHERE p.stateid = '44'" 
```

运行查询...

```
while($row = mysql_fetch_array($res))
{
if ($row['visited'] == 1) {
$visited = 1; }  
else {
$visited = 0; }
<a href="javascript:void(0);" onclick="loadParks(\''.$row['stateid'].'\',\''.$row['p.id'].'\',\''.$visited.'\');">Visited</a>

} 
```

基本上，我得到了 stateid，但我没有得到 p.id 或访问过。可能是我将它们命名错误，或者它们可能以某种方式被排除在结果之外......感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:42:53.817

`p.id`可能会丢失，因为每个`p.id`和`pv.id`都将返回为`id`，而不是`p.id`或`pv.id`。试试这个：

```
SELECT p.id pid,
       p.*,
       pv.id pvid,
       pv.*
FROM `parks` p
LEFT JOIN `parksvisited` pv
ON p.id = pv.parkid
WHERE p.stateid = '44' 
```

看起来您也没有从`pv`原始查询中选择任何内容，只是`p`. 看看这个新查询是否也能处理`visited`好。并确保引用`pid`为`$row['pid']`，而不是`$row['p.id']`。

# c# - 在 Windows 身份验证应用程序中从当前用户获取网络凭据

> ID：11414266
> 
> 赞同：16
> 
> 时间：2012-07-10T13:22:16.617
> 
> 标签：c#, windows-authentication, axapta, business-connector

我想知道是否可以获取当前用户对象并获取他们的凭据，以便我可以将它们传递给`NetworkCredential`我用来连接到我的 AX .NET Business Connector 的对象。因为，目前我必须将它指定为我在实例化`NetworkCredential`对象时设置的特定用户：

`private NetworkCredential nc = new NetworkCredential("myUser", "myPassword", "myDomain");`

我希望做类似的事情：`private NetworkCredential nc = (NetworkCredential)HttpContext.User;`但显然那是行不通的......

这样，例如，跟踪哪个用户创建了销售订单会更容易，因为此时所有内容都是由我指定的用户创建的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-10T13:44:58.497

[`CredentialCache.DefaultNetworkCredentials`](http://msdn.microsoft.com/en-us/library/system.net.credentialcache.defaultnetworkcredentials.aspx)?

> 返回的凭据`DefaultNetworkCredentials`表示应用程序正在运行的当前安全上下文的身份验证凭据。对于客户端应用程序，这些通常是运行应用程序的用户的 Windows 凭据（用户名、密码和域）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T13:44:53.210

我不完全理解您的问题，但是您的呼叫来自 ASP.NET，您需要凭据吗？你可以尝试：

```
Uri uri = new Uri("http://tempuri.org/");
ICredentials credentials = CredentialCache.DefaultCredentials;
NetworkCredential credential = credentials.GetCredential(uri, "Basic"); 
```

假设您的用户已经通过 Membership Provider 进行了身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-08T14:04:29.757

以上的组合对我来说非常适合解决身份验证问题。

```
var credentials = new NetworkCredential();
ICredentials credent = CredentialCache.DefaultNetworkCredentials;
credentials = (NetworkCredential)credent;
var serverId = new LdapDirectoryIdentifier(GlobalVariables.LDAPServer);

LdapConnection connection = new LdapConnection(serverId, credentials);
connection.Bind(); 
```

# resharper - 使用 resharper 将“一些引号括起来的文本”转换为 Some_underlined_text

> ID：11414269
> 
> 赞同：0
> 
> 时间：2012-07-10T13:22:25.010
> 
> 标签：resharper, visual-studio-2012, visual-studio-macros

到目前为止，我一直在使用宏将“此类文本”转换为 This_sort_of_text。

这对于输入测试类名称非常有用。

（详情请见：http: [//blogs.msdn.com/b/elee/archive/2010/02/28/my-bdd-naming-macro.aspx](http://blogs.msdn.com/b/elee/archive/2010/02/28/my-bdd-naming-macro.aspx)）

不幸的是，Visual Studio 11 (2012) 不再支持宏。

resharper 也可以做同样的事情吗？

如果不是，我可能会考虑创建一个 VS 扩展......除非有人知道存在一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:27:02.490

您可以为它开发一个 ReSharper 插件，它可能比 VS 扩展更容易。请参阅此处了解更多信息[Resharper API 用于选定的文本和远程代码生成](https://stackoverflow.com/questions/11405690/resharper-api-for-selected-text-and-remote-code-generation)。您可以使用 document.ReplaceText 方法进行修改。

# c# - xml 字符串到类的转换

> ID：11414270
> 
> 赞同：0
> 
> 时间：2012-07-10T13:22:32.020
> 
> 标签：c#, .net, xml

我有代表 xml 序列化类的字符串。我有这个类的 xsd，并且我成功地设法从中创建了一个类。

现在我正在寻找一种方法如何将此字符串序列化为此类的实例。这样做的最好方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:32:55.577

.NET 中有几种不同的序列化程序，例如二进制格式化程序、soap 格式化程序、XML 序列化程序等。其中一些使用 XML，一些不使用。它们各有优缺点，但对于基本用途，人们通常只使用`XmlSerializer`使用 XML 来表示对象的 ：

```
public T DeSerialize<T>(string serializedObject)
{
    XmlSerializer serializer = new XmlSerializer(typeof(T));
    using StringReader reader = new StringReader(serializedObject)
    {
        return (T)serializer.Deserialize(reader);
    }
} 
```

# backbone.js - 带有 Backbone 的嵌套属性模板

> ID：11414271
> 
> 赞同：1
> 
> 时间：2012-07-10T13:22:35.737
> 
> 标签：backbone.js, backbone-relational

我有一个`Appointment`模型，它的每个实例都有一个`Client`. 这是我编辑约会的模板：

```
<form id="edit-appointment" name="appointment" class="mobile_friendly">
  <div class="field">
    <input type="text" name="start_time_ymd" id="start_time_ymd" value="<%= start_time_ymd %>" placeholder="Start Date">
    <input type="text" name="start_time_time" id="start_time_time" value="<%= start_time_time %>" placeholder="Start Time">
  </div>

  <div class="field">
    <input type="text" name="client_name" id="client_name" value="<%= client.name %>" placeholder="Client">
    <input type="hidden" name="client_id" id="client_id" value="<%= client.id %>" placeholder="Client ID">
  </div>

  <div class="field">
    <input type="text" name="client_phone" id="client_phone" value="<%= client.phone %>" placeholder="Phone">
  </div>

  <div class="field">
    <input type="text" name="notes" id="notes" value="<%= notes %>" placeholder="Notes">
  </div>

  <div class="actions">
    <input type="submit" value="Update Appointment" />
  </div>

</form>

<a href="#/index/<%= stylist_id %>">Back</a> 
```

我的问题是我的`Client`属性没有正确传递给服务器。保存时传递给服务器的 JSON 对象如下所示。假设我有一个客户的电话号码`555-555-5555`，但我将其更改为`555-555-1234`然后提交表单：

```
{"appointment":
  {"start_time_ymd":"1/1/2000",
   "client_phone":"555-555-1234",
   "client":{"phone":"555-555-5555"}} 
```

我省略了很多不相关的字段，但希望你明白我的意思。我已从 更改`client_phone`为`555-555-5555`，`555-555-1234`但`client`JSON 对象中的对象的电话号码未更改。我需要以某种方式更改该电话号码。

如何使这些字段（例如电话号码字段）实际“接受”，以便它们作为`client`对象的一部分`appointment`而不是直接在下面传递给服务器`appointment`？我正在使用 Backbone-relational，如果这有所作为的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:27:49.513

如果您更改表单文本后您的模型没有更新，那么您需要明确更新数据

```
SampleView = Backbone.View.extend({
el: '#formEl',
events : {
    "change input" :"changed",
    "change select" :"changed"
},

initialize: function () {
    _.bindAll(this, "changed");
},
changed:function(evt) {
   var changed = evt.currentTarget;
   var value = $("#"+changed.id).val();
   var obj = "{\""+changed.id +"\":\""+value+"\"";

   // Add Logic to change the client phone
   if (changed.id === 'client_phone') {
          obj = obj + "client\":{\"phone\":\""+value+"\""};
   }
   obj = obj + "}";
   var objInst = JSON.parse(obj);
   this.model.set(objInst);            
}
}); 
```

参考： [我可以在不手动跟踪模糊事件的情况下将表单输入绑定到 Backbone.js 中的模型吗？](https://stackoverflow.com/questions/4074636/can-i-bind-form-inputs-to-models-in-backbone-js-without-manually-tracking-blur-e)

您还可以绑定到模型更改事件

```
 model.on('change:client_phone', 
       function () { 
           //Set client value here  
       }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:28:52.263

我能够让它像这样工作：

```
class Snip.Views.Appointments.EditView extends Backbone.View
  template : JST["backbone/templates/appointments/edit"]

  events :
    "submit #edit-appointment" : "update"

  update : (e) ->
    e.preventDefault()
    e.stopPropagation()

    # THE ONLY CHANGE I MADE WAS TO ADD THIS LINE
    @model.attributes.client.phone = $("#client_phone").val()

    @model.save(null,
      success : (appointment) =>
        @model = appointment
        window.location.hash = "/#index/" + @model.attributes.stylist_id
    ) 
```

# android - 如何在 Android 上为 USB 传感器使用 Linux C++ 驱动程序？

> ID：11414272
> 
> 赞同：2
> 
> 时间：2012-07-10T13:22:43.100
> 
> 标签：android, c, usb, linux-device-driver

我目前正在开发一个 Android 项目，我必须从一个名为 Temper 的 USB 温度计棒收集数据，它将直接连接到平板电脑。

该设备具有用 C 编写的 Linux 驱动程序，我想将它们用于我的 Android 应用程序。

您知道如何将这些驱动程序集成到我的 apk 或其他地方吗？

或者是否可以只使用`android.hardware.usb`包（Android 3.0+），从而制作我自己的“驱动程序”？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:54:09.390

选项 a) 您只编译内核模块并使用特定的设备节点。这将需要生根您的设备并为特定设备的特定内核编译特定内核模块（丑陋！）

选项 b) 您使用 NDK 围绕 Linux 驱动程序编写一个包装器，并让该包装器成为 Android USB 主机接口 (Java) 和 Linux 驱动程序 (C) 之间的中间人，协调所有事件并推送数据。

我开始为 usb-dvb 设备驱动程序设计选项 b)，这是一项令人难以置信的工作量。我希望你的驱动程序没有那么复杂。

如果您的驱动程序很容易（只有几个文件，而不是 10k+ 行低级代码甚至汇编程序）翻译成 Java，请继续使用选项 c）用 Java 重新编写 C 代码。因此，您不需要 C 中的包装器，您可以跳过 NDK 部分，这可以为您省去很多麻烦和噩梦。

# css - css 960 网格 clearfix 不起作用但很清楚：两者都有效

> ID：11414273
> 
> 赞同：0
> 
> 时间：2012-07-10T13:22:44.763
> 
> 标签：css, grid, clearfix

我正在使用网格 960 并且无法让 clearfix 工作，但是如果我`clear:both`在元素上使用，那么我可以获得所需的效果。我更喜欢使用 clearfix，因为我发现它更可靠（通常）。

在下面的代码中，标题部分有一个左侧徽标区域和一个右侧横幅区域，然后在其下方应该是导航栏。

这个导航栏是我遇到困难的元素。如果我添加`style="clear:both;"`到`nav`元素，它工作正常。但是，如果我在 header 元素中使用 clearfix，它就不起作用。

[这是不起作用的页面（使用 clearfix）](http://niumata.com/test2.html)

[这是有效的页面（使用 clear:both）](http://niumata.com/test.html)

**HTML**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Home Page</title>
    <link href="css/reset.css" rel="stylesheet" type="text/css" />
    <link href="css/960_12_col.css" rel="stylesheet" type="text/css" />
    <link href="css/site.css" rel="stylesheet" type="text/css" />

</head>
<body>
<div id="container" class="container_12 ">

    <header class="clearfix grid_12">
        <div id="logoarea" class="grid_6 alpha">
            <div id="title">
                <h1>iContinuity Directory Services</h1>
            </div>
            <div id="logindisplay">
                    [ <a href="/Account/LogOn">Log On</a> ]
                    [ <a href="/Account/Register">Register</a> ]

            </div>
        </div><!-- end logoarea -->

        <div id="headerbanner" class="grid_6 omega">
            <p>this is the header banner area</p>
        </div>

        <nav class="">

            <ul id="menu">
                <li><a href="/">Home</a></li>
                <li><a href="/Home/About">About</a></li>
            </ul>

            <form action="/Search/Search" class="navsearch" method="get">
                <input class="textbox" id="search" name="search" type="text" value="" />
                <input type="submit" value="Search" />
            </form>  
        </nav>

    </header>

    <section id="main" class="grid_8 ">

        <h2>Welcome to iContinuity Services</h2>
        <p>

        </p>

    </section>

    <aside id="sidebar" class="grid_4">
        ontrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a lin
    </aside>

    <footer class="grid_12">
        <p>this is the footer area</p>
    </footer>

</div> <!-- end 960 grid container -->

</body>
</html> 
```

我希望我没有做任何明显的错误，但我看不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:54:38.123

如果你在你的 NAV 元素之前放置一个空的 DIV 并且上面有一个 clearfix 类，那么这应该可以工作。

# ajax - $.ajax - 未定义错误函数时的全局错误处理

> ID：11414274
> 
> 赞同：2
> 
> 时间：2012-07-10T13:22:45.900
> 
> 标签：ajax, jquery

对于 jQuery`$.ajax`调用：

我想要一个全局错误处理程序，如下所示：

```
 $(document).ajaxError(function (e, jqxhr, settings, exception) {
        window.location = '/Error/ServerError';
    }); 
```

但是......我只希望它`error`在`$.ajax`调用方法未定义时运行。我看看它们是否没有明确定义，它们是匿名方法，但我不知道如何检查方法是匿名还是命名。

因此，对于这样的事情，我不希望调用全局处理程序：

```
$.ajax({
    url: "url",
    type: "POST",
    success: function(data) {
        //do something
    },
    error: function(jqXHR, textStatus, errorThrown) {
        ShowError("Error", errorThrown);
    }
}); 
```

但是对于这个调用，我希望调用全局处理程序，并重定向页面：

```
$.ajax({
    url: "url",
    type: "POST",
    success: function(data) {
        //do something
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:33:23.490

您可以检查`settings`全局处理程序中的参数是否`error`定义了字段：

```
$(document).ajaxError(function (e, jqxhr, settings, exception) {
    if ( settings.error )
        return;
    window.location = '/Error/ServerError';
}); 
```

[jsFiddle](http://jsfiddle.net/t3xX6/)的工作示例

# jquery - c#.net - 如何加载表单？（建议）

> ID：11414284
> 
> 赞同：0
> 
> 时间：2012-07-10T13:23:22.467
> 
> 标签：jquery, asp.net, ajax, forms

我只是在寻找有关如何动态加载表单的建议。我考虑过两种方法，但是如果我们的系统最终有很多表格，这两种方法都会变得相当广泛。

**第一种方式**- 将表单的 html 保存在数据库中，然后将 html 加载到页面上。

**第二种方式**- 拥有所有表单的文件夹并使用 ajax 显示表单。

如果其中一种方法比另一种更好，或者如果有完全更好的方法可以做到这一点，那么任何建议都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:05:44.003

对于 SharePoint 或 Ektron 之类的产品来说，这听起来像是一个很好的案例。如果这些价格太高/太强大，并且安全性不是一个大问题，那么使用这些表单创建标准文件夹结构是处理该项目的一种相当简单的方法。将页面/表单放入数据库是可行的，但您必须创建维护功能才能使产品可用。使用简单的 iframe 并将 href 设置为适当的文件位置将是最简单的方法。

--从上面复制，因为很多人不看评论，尽管这似乎是一个相当广泛但专业的问题。

# algorithm - 拖放阶段滚动算法问题

> ID：11414285
> 
> 赞同：0
> 
> 时间：2012-07-10T13:23:24.337
> 
> 标签：algorithm, flash, actionscript, drag-and-drop, scroll

我对基本的拖放滚动算法有一些问题。这是我的算法：

1.  当鼠标按下时，我设置 boolean dragging = true 并将当前鼠标 x 和 y 位置存储在 stored_position 变量中。

2.  当鼠标向上时，我设置布尔拖动 = false。

3.  在每一帧上，我检查拖动 == true，如果是，我计算 dx = current_mouse.x - stored_position.x 和 dy = current_mouse.x - stored_position.y。然后我将当前鼠标位置存储为新的 stored_position 并通过这个 dx dy 滚动我的视图（它是 2d 相机对象），因为 Camera.x -= dx，Camera.y -= dy （我需要反转一个，因为相机具体的）。

该算法的问题在于，当我拖动相机时，它开始闪烁并四处移动/摇晃。我认为这是因为当我将鼠标从左向右移动时，它会像这样跟踪 dx：

```
71
-67
69
-68
69
-68
8
-5 
```

所以我认为这是鼠标抽搐（我的意思是当我们尝试画一条线时鼠标有时会跳回来）。任何改变算法的想法，也许我错过了什么？这里是这个问题的例子：[https](https://dl.dropbox.com/u/78904724/as_host/buld_build_other.rar) ://dl.dropbox.com/u/78904724/as_host/buld_build_other.rar （你需要运行 index.html 选择关卡并尝试拖动屏幕）。

**更新** 这里是示例完整源链接（这是随机图片，我发誓）：[https://dl.dropbox.com/u/78904724/as_host/scroll_test.rar](https://dl.dropbox.com/u/78904724/as_host/scroll_test.rar) 这是我使用的代码（在示例中我使用本机 flash 事件而不是使用 axgl 检查来不混淆某人，我有两个示例，它会导致相同的问题）：

```
 //variables with comments
        private var dragging:Boolean = false; //dragging flag
        private var current_mouse:Array; //stored mouse position array [0] - x, [1] - y
        private var d:Array; //dx dy array [0] - x, [1] - y

        [Embed(source = "test.jpg")] public static const _sprite:Class; //sprite graphics
        private var view_sprite:AxSprite; //some image on the stage to drag it

        //this is the class constructor code
            view_sprite = new AxSprite(0, 0, _sprite);
            add(view_sprite);

            current_mouse = new Array();
            d = new Array();

            Ax.stage2D.addEventListener(MouseEvent.MOUSE_DOWN, function(e:MouseEvent):void {                
                current_mouse[0] = Ax.mouse.x;
                current_mouse[1] = Ax.mouse.y;
                dragging = true;
            });
            Ax.stage2D.addEventListener(MouseEvent.MOUSE_UP, function(e:MouseEvent):void {
                dragging = false;
            });
            Ax.stage2D.addEventListener(MouseEvent.MOUSE_MOVE, function(e:MouseEvent):void {
                if (dragging) {                                 
                    d[0] = Ax.mouse.x - current_mouse[0]; 
                    d[1] = Ax.mouse.y - current_mouse[1];                       

                    Ax.camera.x -= d[0];
                    Ax.camera.y -= d[1];
                    current_mouse[0] = Ax.mouse.x;
                    current_mouse[1] = Ax.mouse.y;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:14:43.680

我很困惑，但问题是这两个字符串（感谢 axgl 作者的帮助）： current_mouse[0] = Ax.mouse.x; current_mouse[1] = Ax.mouse.y; 当我删除它们时，拖动将完美运行。但是...我发誓我以前尝试过这个，但什么都不会发生，没有这个，相机开始移动得更快，现在......它有效！谢谢大家试图帮助我。如果有人会遇到类似的问题，这里是完整的工作来源：[https](https://dl.dropbox.com/u/78904724/as_host/scroll_test_worked.rar) ://dl.dropbox.com/u/78904724/as_host/scroll_test_worked.rar 这是axgl.org上的线程：http: [//axgl.org /forums/viewtopic.php?f=12&p=394](http://axgl.org/forums/viewtopic.php?f=12&p=394)

# objective-c - NSDateFormatter stringFromDate 在使用 12 小时时间格式时返回 nil

> ID：11414288
> 
> 赞同：3
> 
> 时间：2012-07-10T13:23:28.600
> 
> 标签：objective-c, ios, ios5, nsdateformatter

以下代码适用于 24 小时时间格式。

```
+ (NSString *)formatDate:(NSDate *)date useLongStyle:(BOOL)useLongStyle showDate:(BOOL)showDate showTime:(BOOL)showTime
{
    NSDateFormatter *dateFormatter = [NSDateFormatter new];

    dateFormatter.dateStyle = (useLongStyle) ? NSDateFormatterLongStyle : NSDateFormatterShortStyle;
    dateFormatter.dateStyle = (showDate) ? dateFormatter.dateStyle : NSDateFormatterNoStyle;
    dateFormatter.timeStyle = (showTime) ? NSDateFormatterShortStyle : NSDateFormatterNoStyle;

    return [dateFormatter stringFromDate:date];
} 
```

但是当手机设置中有 12 小时格式时，它会返回`nil`. 直到我明确将地区设置为例如澳大利亚。

时间`date`为 24 小时制。当前语言环境是`ru_RU`（但在`en_EN`它是相同的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-18T13:27:44.317

你可以用这个

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
    [formatter setLocale:locale]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T11:29:07.110

我有一个类似的问题，并找到了两个解决方案。一种是手动设置语言环境（我选择 en_GB 为 24 小时格式），另一种是设置时区。两者都为我单独工作。如果您不打算处理需要根据时区更改的日期，我建议您设置语言环境，因为在处理时区时，源和目标时区会发挥作用，除非绝对必要，否则您无需处理所有这些。所以尝试设置语言环境，否则选择时区。不知何故，它帮助覆盖了系统设置。

```
[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]]; 
```

# javascript - 文本框中未显示正确的数字

> ID：11414291
> 
> 赞同：0
> 
> 时间：2012-07-10T13:23:35.567
> 
> 标签：javascript, jquery

问题：

在“答案数”文本框中，它应该显示数字 1，但它没有，它显示数字 2，它显示这个数字的原因是在按钮更改之前，您选择了 2 个字母按钮，所以它在文本框中显示 2，因为您之前选择了 2 个字母按钮。

现在发生这种情况是因为这段代码：

```
$('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : '');, 
```

但`$('.gridBtns').on('click', function()`我确实需要这段代码。

我需要此代码的原因是因为假设有 7 个字母按钮“AG”并且您打开所有字母按钮，文本框将显示数字“7”，但如果我改变主意并且只想显示 5 个字母按钮“AE”，然后文本框将从“7”变为“5”，因为现在只打开了 5 个按钮。这就是我需要这段代码的原因。

所以我的问题是，如果用户点击了“添加”按钮，我怎样才能从添加的行中的“答案数量”列中获取数字并显示在文本框中？

下面是我的代码，它假设在单击“添加”按钮时在文本框中显示数字，但它被覆盖了，因为`"$('#btn'+gridValues).trigger('click');"`在该代码中是

```
$('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : '');, 
```

在里面`$('.gridBtns').on('click', function()`

```
function addwindow(numberAnswer, gridValues, btn) { 

        $('#mainNumberAnswerTxt').val(numberAnswer);
        $('#btn'+gridValues).trigger('click');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:33:09.887

我认为您可以向 .gridBtns 元素添加一个自定义属性，该属性指定谁触发了单击按钮，以便当用户单击 .gridBtns 元素时，您可以使用 $(this).attr("cutom attribute name") 并使用这个值来检查谁触发了这个动作，你会根据它做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:46:42.143

我认为重要的问题是：为什么您必须首先指定答案的数量和可能的答案集？那是冗余。而且，如果您想拥有这种冗​​余并始终保持一致，则必须定义约束来做到这一点，例如，将其中一项标识为主要内容——文本框应始终显示按下按钮的数量（以及因此是只读的）或（不太可能）按下按钮的数量应始终等于文本框中的数字。

即使没有“添加”按钮，允许用户独立编辑两者也必然会导致您描述的类型不一致。我的意思是，我可以输入“2”，然后继续标记所有答案。

# css - 滚动到固定位置 div 的底部

> ID：11414296
> 
> 赞同：2
> 
> 时间：2012-07-10T13:23:40.823
> 
> 标签：css, html, scroll, css-position

我的页面上有一个固定位置的侧边选项卡，其中包含用户的过滤选项。当有很多选项时，侧边栏会变得太长，底部超出页面底部，无法查看。

有没有办法让整个页面继续滚动到侧选项卡 div 的底部？我不想将滚动条放在我的侧选项卡 div 中，即使这很容易解决。我只是想，当我的 div 底部与页面底部对接时，将整个 div 与它一起抬起，以便底部内容可见。

我的限制是我不能在这个特定的应用程序中使用 jQuery。但是，我可以使用 Dojo。

# datareader - SSIS dtsx 包中的数字字段问题

> ID：11414298
> 
> 赞同：0
> 
> 时间：2012-07-10T13:23:56.977
> 
> 标签：datareader, ssis

我有一个 SSIS dtsx 包，用于使用基于 DSN 的连接从远程 MAS db 服务器加载数据。我们将许多表中的数据加载到 SQL-Server 中的副本表中。一切正常，直到我们对 MAS 中的表进行了一些更改。dtsx 失败并出现以下错误：

> 错误：数据流任务、导入数据、DataReader 源 [28866] 处**的 0xC02090F8：值太大，无法放入输出列** “UDF_TREAD_DEPTH”(29160)。

实际上，我相信它可能与一个十进制字段“UDF_TREAD_DEPTH”有关。该字段在 DataReader 源中显示为`"numeric [DT_NUMERIC]" with Length:0, Precision:4 & Scale:2.` 过去我们有 xx.xx 格式的简单数据。现在我看到问题后我们有 xx.xx、xxx、.. 之类的数据。但是，在我刷新 Data Reader 源后，数据类型仍然没有改变。

> 我相信我们基于[**此描述**](http://msdn.microsoft.com/en-us/library/aa258274%28v=sql.80%29.aspx)的数据的“精度应更新为 5” 。

*我无法更改附加屏幕（**数据源输出 column.png**）中可见的数据类型。当我调试这个 dtsx 包时，它在加载数据读取器源时出错。如果我把它钉在了正确的位置 - 我该如何解决它。如果还有其他可能性，请告诉我。*

![在此处输入图像描述](../Images/f59c5ce108b42bc7d37a475b9c5a67ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:01:22.900

您是否尝试过使用高级编辑器编辑源代码？（右键单击并选择“显示高级编辑器...”）您可以导航到输入和输出参数部分（通常是最后一个选项卡），进入输出列部分（对于 OLE DB，单击 OLE DB 源旁边的 +输出，然后是输出列旁边的加号，然后突出显示要更改的列名称）并更改相关列的属性（查找数据类型属性并根据需要更改精度和比例。）。如果您不能这样做，您可以尝试删除源并将其替换为相同数据的新源（即，此对象的重新创建将重新查询列属性的连接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:02:01.943

我得到要使用 xxx.xx 掩码更新的数据，因此 100 变为 100.00。这有助于 SSIS 中的 DataReader 正确推断类型。

除此之外，我还发现了另一种简单的方法，它不需要支持任何强制转换/转换功能 -

```
UDF_TREAD_DEPTH * 1.00 as UDF_TREAD_DEPTH 
```

这也允许 DataReader 正确推断类型（即精度和比例）。

# mongodb - 查询数组中的部分对象 - MongoDB

> ID：11414300
> 
> 赞同：2
> 
> 时间：2012-07-10T13:23:57.943
> 
> 标签：mongodb, mongodb-php

我有一个简单的结构化文档，如下所示：

```
"people" : [
    {
        "id" : "6241863",
        "amount" : 5
    }
], 
```

人们可以包含不止一种元素。我设法让它工作：

```
db.village.findOne({"people": {"$in": [{"id": "6241863", "amount": 5}]}}) 
```

但我想忽略数量并搜索任何包含 id 为 6241863 和任何数量的人的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:04:35.633

根据[高级查询文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-ValueinanArray)，您可以将数组值查询与[点表示法混合使用以进入对象](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)。这是使用您的架构的示例：

```
$ mongo
MongoDB shell version: 2.1.0
connecting to: test
> db.users.save({_id: 1, friends: [{id: 2, name: 'bob'}]})
> db.users.find({friends: {id: 2, name: 'bob'}})
{ "_id" : 1, "friends" : [ { "id" : 2, "name" : "bob" } ] }

> db.users.find({'friends.id': 2})
{ "_id" : 1, "friends" : [ { "id" : 2, "name" : "bob" } ] }

> db.users.find({'friends.name': 'bob'})
{ "_id" : 1, "friends" : [ { "id" : 2, "name" : "bob" } ] }

> db.users.find({'friends.name': 'ted'})
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:56:07.917

试试看

```
db.village.findOne({"people" : { "$in" : [{ "id" : "6241863" , "amount" : { "$ne" : null } }]}}) 
```

# apache - 更改特定路径下 html 文件的 mime 类型

> ID：11414301
> 
> 赞同：1
> 
> 时间：2012-07-10T13:23:59.893
> 
> 标签：apache, mime-types, cdn, akamai

我们的 CDN 向我们收取页面浏览量有问题，他们将所有 text/html mime 类型视为 html 页面和页面浏览量。但是，我们实际上有 java (jsp)，它们显然是与页面视图相关的文本/html，但我们也有小的 .html 文件，这些文件由 javascript 加载到页面中，用于业务控制的动态内容。我无需去重写与供应商的整个合同即可快速解决计费问题的方法是将某个目录下的 html 文件的 mime 类型更改为 text/html 以外的其他内容。我打算通过编辑 apache 配置来完成。我有几个问题是：

1) 如果我将这些文件的 mime 类型更改为 text/plain 或其他内容怎么办？这样做有什么影响吗？2) 是否有任何其他有效的不是 text/html 的 html mime 类型？我假设没有。3）解决此问题的任何其他想法？

**更新** 我正在考虑将 html 文件更改为应用程序/javascript。这样做有什么影响？任何事物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:29:33.287

> 1) 如果我将这些文件的 mime 类型更改为 text/plain 或其他内容怎么办？这样做有什么影响吗？

如果更改 mime 类型，浏览器将无法正确呈现它。

> 2) 是否有任何其他有效的不是 text/html 的 html mime 类型？我假设没有。

[SSI](https://stackoverflow.com/questions/7009162/ssi-vs-jsp-difference)：

```
AddType text/x-server-parsed-html .shtml .sht 
AddHandler server-parsed .shtml .sht 
```

> 3）解决此问题的任何其他想法？

将小 HTML 文件转换为[JSON](https://stackoverflow.com/questions/2631369/ajax-vs-ahah-is-there-a-performance-advantage)或[XHTML5](https://stackoverflow.com/a/1079375/1113772)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-04T23:45:20.507

您确定 akamai 是根据网页浏览量而不是使用的带宽向您收费吗？您可能需要就此与您的 akamai 联系人联系。

# sql-server - Node-odbc 无法连接到 mssql

> ID：11414302
> 
> 赞同：1
> 
> 时间：2012-07-10T13:23:59.927
> 
> 标签：sql-server, node.js, unixodbc

我花了最后一两天在 ubuntu 12 上设置 unixODBC 和 freetds - 这本身不是一个有趣的过程，但它现在可以同时使用 sqsh 和 isql。我已经安装了 node-odbc 并且我正在使用[github 自述](https://github.com/w1nk/node-odbc)文件中提供的代码片段来测试连接，但我总是得到

```
 S1000:1:0:[unixODBC][FreeTDS][SQL Server]Unable to connect to data source
 WARNING: ev_unref is deprecated, use uv_unref
 [Error: Error opening database] 
```

使用 isql 我运行`isql -v SERVER user pass`（使用正确的凭据..），然后`use DATABASE`一旦连接，一切正常，我可以正常运行查询。我在 js 中的连接字符串是

```
 "DRIVER={FreeTDS};SERVER=SERVER;UID=user;PWD=pass;DATABASE=DATABASE" 
```

这与用于连接 isql 的凭据完全匹配，但在 Node 中我得到了上述错误。关于为什么会发生这种情况的任何想法？是否有可能做我的 odbc.ini 和 odbcinst.ini 文件的位置或类似的东西？

仅供参考：

/etc/odbc.ini：

```
[SERVER]
Driver      = FreeTDS
Trace       = No
Server      = SERVER
Port        = 1433
Database    = DATABASE
UsageCount  = 1
TDS_Version = 7.0 
```

/etc/odbcinst.ini：

```
[FreeTDS]
Description = FreeTDS
Driver = /usr/lib/libtdsodbc.so
Setup = /usr/lib/libtdsS.so
FileUsage   = 1
CPTimeout   = 5
CPReuse     = 20
Threading   = 1 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:43:31.483

今天遇到了这个问题，最终我需要指定一个端口号作为连接字符串的一部分。供参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:23:14.670

看起来我刚刚找到了解决方案，尽管我不完全理解为什么。如果使用的连接字符串是：

```
"DRIVER={FreeTDS};SERVER=SERVER;UID=user;PWD=pass;DATABASE=DATABASE" 
```

然后由于某种原因它根本不起作用，我尝试使用将 SERVER 设置为 IP 和机器的实际名称......没有运气。但是，如果我将连接字符串更改为使用 SERVERNAME 或 DSN（字符串中只能包含 SERVER、SERVERNAME 或 DNS 之一）并且我提供了机器名称，那么它工作正常，我无法让它与 IP 一起工作我尝试了什么。因此，总而言之，对我有用的连接字符串是：

```
"DRIVER={FreeTDS};SERVERNAME=SERVERNAME;UID=user;PWD=pass;DATABASE=DATABASE" 
```

这个问题的关键似乎在于 SQLDriverConnect。

# cryptography - 使用 SHA 散列允许更长的 bcrypt 输入

> ID：11414310
> 
> 赞同：2
> 
> 时间：2012-07-10T13:24:20.917
> 
> 标签：cryptography, bcrypt

我正在研究几种语言的各种 bcrypt 实现，并注意到大多数语言的字符限制 - 特别是 node-bcrypt、php 的 bcrypt 和 py-bcrypt 都显示的最大 72 个字符。

如果应用程序预先通过 SHA-256 或 SHA-512 校验和来运行用户输入以启用更长的 bcrypt 输入，有哪些优点和缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:27:21.357

[此处](http://bcrypt.sourceforge.net/)找到的 CLI 应用程序仅限于 8-56 个“字符”（包括 C）（它是 C，所以我认为字符可以是任何字符）。天知道为什么你会为之后输入基于密码的密钥派生函数的东西创建限制（这几乎肯定会无限输入）。

具有足够强度和输出大小的附加安全哈希不会降低安全性。

在将结果提供给 bcrypt 库之前将结果编码为十六进制，这几乎肯定需要一个字符串（不要被“奇数”00h 字节打击）。您不妨使用 SHA-256，如果您之后将其输入 bcrypt，我认为或多或少不会有什么不同。否则你可能会被迫使用 base64。

最后，尽量不要陷入这种情况，执行非标准加密几乎肯定是一件坏事。

# forms - 使用 Ext.form.updateRecord() 上传文件

> ID：11414312
> 
> 赞同：0
> 
> 时间：2012-07-10T13:24:31.173
> 
> 标签：forms, file-upload, extjs, extjs4

ExtJS 4.1。

假设我们有某种形式：

```
Ext.define('App.view.editform', {
    extend: 'Ext.form.Basic',
    defaultType: 'textfield',
    items: [
        {
            fieldLabel: 'Title',
            name: 'title',
            allowBlank: false,
        }, {
            xtype: 'textarea',
            fieldLabel: 'Text',
            name: 'text',
            height: 160,
        }, {
            xtype: 'filefield',
            fieldLabel: 'Image',
            name: 'image',
        }, {
            xtype: 'hidden',
            name: 'id',
        }, 
    ],

}); 
```

和一个商店：

```
 Ext.define('App.store.Store', {

    extend: 'Ext.data.Store',
    model: new Ext.data.Model({
        fields: [
            {name: 'id', type: 'int'},
            {name: 'title', type: 'string'},
            {name: 'text', type: 'string'},
        ],
        proxy: {
            type: 'ajax',
            url: '/someurl',
            reader: {
                type: 'json',
                root: 'results'
            },
        },
    }),
    autoLoad: true,
    autoSync: true,

}); 
```

要进行修改`Records`，`Store`我们可以使用`loadRecord();`表单上的方法和`updateRecord();`方法将更改提交到`Store`（然后到服务器）。但是在服务器上，每个`Record`都有与之关联的图像。

`updateRecord();`方法仅将文本字段提交到`Store`. `Model`不能包含`binary`类型字段。

那么有没有办法使用表单`updateRecord();`方法上传图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:52:36.250

不，在服务器端必须有专门的处理程序。

# php - 如何在 Symfony 2.1 中使用集合中的实体（+原型）

> ID：11414314
> 
> 赞同：0
> 
> 时间：2012-07-10T13:24:34.833
> 
> 标签：php, doctrine, symfony-2.1

我想在我得到的 Symfony 2.1.0-dev 错误中添加一组实体：

```
Neither property "sitterDegrees" nor method "getSitterDegrees()" nor method "isSitterDegrees()" exists in class "xxx\Entity\Degrees" 
```

发生这种情况是因为我在 DegreesFormType.php 中有一个实体，并且 `$this->form->bindRequest($request);`在我的处理程序的这一行。我想在“sitter”实体上添加多个“度数”（但度数不是像[http://symfony.com/doc/master/cookbook/form/form_collections.html](http://symfony.com/doc/master/cookbook/form/form_collections.html)那样的选择）我忘了什么吗？

# 实体

Sitter 和 Degrees 之间的简单多对多

## 保姆

```
class Sitter
{
    //some properties
    /**
     * @var xxx\Entity\Degrees
     * @ORM\ManyToMany(targetEntity="xxx\Entity\Degrees", orphanRemoval=true, inversedBy="sitters",cascade={"persist"})
     * @ORM\JoinTable(name="sitter_degrees_relationships",
     *   joinColumns={
     *     @ORM\JoinColumn(name="sitter_id", referencedColumnName="id")
     *   },
     *   inverseJoinColumns={
     *     @ORM\JoinColumn(name="degrees_id", referencedColumnName="id")
     *   }
     * )
     */
    private $sitterDegrees;

    public function getSitterDegrees()
    {
        return $this->sitterDegrees;
    }

    public function setSitterDegrees(ArrayCollection $sitterDegrees)
    {
        foreach ($sitterDegrees as $sitterDegree) {
            $sitterDegree->addSitter($this);
        }

        $this->sitterDegrees = $sitterDegrees;
    }

    public function addSitterDegree(xxx\Entity\Degrees $sitterDegrees)
    {
        $this->sitterDegrees[] = $sitterDegrees;

        return $this;
    }

    public function removeSitterDegree(xxx\Entity\Degrees $sitterDegrees)
    {
        $this->sitterDegrees->removeElement($sitterDegrees);
    }
} 
```

## 度数

```
class Degrees
{
    public function __toString(){return $this->name;}

    private $id;

    private $name;

    /**
     * @var xxx\Entity\Sitter
     * @ORM\ManyToMany(targetEntity="xxx\Entity\Sitter", mappedBy="sitterDegrees")
     */
    private $sitters;

    public function __construct()
    {
        $this->sitters = new \Doctrine\Common\Collections\ArrayCollection();
    }

    public function getId()
    {
        return $this->id;
    }

    public function setName($name)
    {
        $this->name = $name;
    }

    public function getName()
    {
        return $this->name;
    }

    public function getSitters()
    {
        return $this->sitters;
    }

    public function addSitter(xxx\Entity\Sitter $sitter)
    {
        if (!$this->sitters->contains($sitter)) {
            $this->sitters->add($sitter);
        }
    }

    public function removeSitter(xxx\Entity\Sitter $sitters)
    {
        $this->sitters->removeElement($sitters);
    }
} 
```

# 表单类型

VerifFormType.php 是我的主要表单，它嵌入了 DegreesFormType。

## 验证表单类型.php

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        //->add('some_properties')
        ->add('sitterDegrees', 'collection', array(
                            'type' => new DegreesFormType(),
                            'by_reference' => false,
                            'allow_add' => true,
                            'allow_delete' => true,
            )
        );
} 
```

## DegreesFormType.php

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('sitterDegrees', 'entity', array(
            'class' => 'xxx:Degrees'
        ));

} 
```

# 控制器

```
public function indexAction()
{
    $user = $this->get('security.context')->getToken()->getUser();
    $sitter = $user->sitter;

    $formHandler = $this->get('xxx.form.handler');
    $form = $formHandler->getForm();
    $form->setData($sitter);

    if ($formHandler->process()) {
        //ok
    }

    //fail

} 
```

# 处理程序

```
public function process()
{
    $request = $this->container->get('request');
    if ('POST' == $request->getMethod()) {
        $this->form->bindRequest($request);//Fail at this line

        if ($this->form->isValid()) {
            return $this->onSuccess();
        }
    }
    return false;
}

public function onSuccess()
{
    $sitter = $this->form->getData();
    $this->form->bindRequest($this->container->get('request'));
    $sitter->setContainer($this->container);
    $this->container->get('xxx.manager')->persistSitter($sitter);

    return true;
} 
```

# index.html.twig

使用食谱中的一些javascript [http://symfony.com/doc/master/cookbook/form/form_collections.html](http://symfony.com/doc/master/cookbook/form/form_collections.html)

```
<ul class="degrees" data-prototype="{{ form_widget(form.sitterDegrees.getVar('prototype')) | e }}">
  {% for sitterDegree in form.sitterDegrees %}
     <li>{{ form_row(sitterDegree) }}</li>
  {% endfor %}
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:58:34.853

错误来自 DegreesFormType：该`sitterDegrees`字段映射到`setterDegrees`您的`Degrees`类中的属性。但是，这个类没有这样的属性。

有一个类似的问题`VerifFormType`：该`sitterDegrees`字段映射到`setterDegrees`您`Sitter`类中的属性。但是，这个类没有这样的属性。

# linux-kernel - ARM/DSP Linux 工具链内核设置

> ID：11414317
> 
> 赞同：0
> 
> 时间：2012-07-10T13:24:52.633
> 
> 标签：linux-kernel, arm, cross-compiling, gnu-toolchain, ti-dsp

我们有一个项目需要设置一个环境来开发嵌入式系统作为 FC17 AMD64 上的主机并以 ARM/DSP Omap l138 为目标。

因此，必须生成内核头文件才能绑定主机和目标之间的开发环境通信。因此，它被安装：

```
# yum install kernel-headers-$(uname -r)
# yum install binutils gcc make patch libgomp glibc-headers glibc-devel kernel-headers kernel-devel 
```

构建步骤：

```
# cd /usr/src/kernels/3.4.4-5.fc17.x86_64/kernel
# ls 
debug  events  gcov  irq  Kconfig.freezer  Kconfig.hz  Kconfig.locks  Kconfig.preempt  Makefile  power  sched  time  trace

# make ARCH=ARM headers_check
make: *** No rule to make target `headers_check'.  Stop.

# make ARCH=ARM INSTALL_HDR_PATH=/home/user/dev/omap/ headers_install;
make: *** No rule to make target `headers_check'.  Stop. 
```

任何建议可能是什么问题？

高度赞赏所有意见和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:10:08.620

检查您的 Makefile，似乎没有在其中定义 headers_check。也许“make help”对你有用。

只是我的 5 美分。

# ruby-on-rails - Rails、Heroku、Unicorn 和 Resque - 如何选择网络工作者/resque 工作者的数量？

> ID：11414321
> 
> 赞同：1
> 
> 时间：2012-07-10T13:25:08.590
> 
> 标签：ruby-on-rails, heroku, resque, unicorn

我刚刚切换到在 Heroku 上使用 Unicorn。我还将从 delay_job 切换到 resque 并使用[http://bugsplat.info/2011-11-27-concurrency-on-heroku-cedar.html中描述的设置](http://bugsplat.info/2011-11-27-concurrency-on-heroku-cedar.html)

我不明白的是 config/unicorn.rb 如何：

```
worker_processes 3
timeout 30

@resque_pid = nil

before_fork do |server, worker|
  @resque_pid ||= spawn("bundle exec rake " + \
  "resque:work QUEUES=scrape,geocode,distance,mailer")
end 
```

翻译成：

> “这实际上会在每个 web dyno 中产生六个进程：1 个 unicorn master，3 个 unicorn web workers，1 个 resque worker，1 个 resque child worker，当它实际处理工作时”

有多少工人将实际处理后台作业？1 还是 2？

假设我想增加 resque 工人的数量 - 我会改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:15:24.373

我想如果你运行那个块，你的 unicorn master 已经在运行，再加上你在文件顶部指定的 3 个 web worker，然后下面的块启动一个 Resque worker（如果它还没有启动）。

我猜 Resque 在实际执行工作时会自行启动一个童工。

看起来如果你想要另一个 Resque 工作人员，你可以这样做

```
worker_processes 3
timeout 30

@resque_pid = nil
@resque_pid2 = nil

before_fork do |server, worker|
  @resque_pid ||= spawn("bundle exec rake " + \
  "resque:work QUEUES=scrape,geocode,distance,mailer")
  @resque_pid2 ||= spawn("bundle exec rake " + \
  "resque:work QUEUES=scrape,geocode,distance,mailer")
end 
```

根据我使用 Resque 的经验，它就像启动上面指定的另一个进程一样简单。我唯一不确定的是 Heroku 以及它如何选择处理给你更多的工人。

# sql-server - 来自子查询的多个值

> ID：11414323
> 
> 赞同：0
> 
> 时间：2012-07-10T13:25:21.770
> 
> 标签：sql-server, tsql

我想在底部概括我的查询，以便我获得所有项目和附加项目信息，其中我的子组具有一定的价值，但我无法让它工作，因为我无法获得 [ProjectFk]

```
SELECT 
      [HeadCount].[ID],
      [LinkProjectAreaFk],
      [Month1],
      [Month2],
      [Month3],
      [Month4],
      [Month5],
      [Month6],
      [Month7],
      [Month8],
      [Month9],
      [Month10],
      [Month11],
      [Month12],
      [HcYear],
      [ApproveDirFk],
      [ApproveDirDate],
      [FreezeFk],
      [freezeDate],
      [CDSID],[FreezeTypeFk],
      [ApproveDirTypeFk],
      [SourcesFk], 
      [Project].[Title], 
      [Project].[Title]
FROM 
     [HeadCount], 
      [Project] 
WHERE 
      [HeadCount].[LinkProjectAreaFk] 
   IN 
      (SELECT 
               [ID] 
       FROM 
               [LinkProject-Area]
       WHERE
       [SubgroupFk]=1)
  and
       [Project].[ID]=[LinkProject-Area].[ProjectFk] 
```

以下查询有效，但仅适用于一个项目我怎样才能从我的子查询中获取 projectFk，因为当我查找它时，他们说这是不可能的，并且使用左外连接我根本无法让它工作

```
SELECT 
      [HeadCount].[ID],
      [LinkProjectAreaFk],
      [Month1],
      [Month2],
      [Month3],
      [Month4],
      [Month5],
      [Month6],
      [Month7],
      [Month8],
      [Month9],
      [Month10],
      [Month11],
      [Month12],
      [HcYear],
      [ApproveDirFk],
      [ApproveDirDate],
      [FreezeFk],
      [freezeDate],
      [CDSID],
      [FreezeTypeFk],
      [ApproveDirTypeFk],
      [SourcesFk], 
      [Project].[Title],
       [Project].[Title]
FROM 
      [HeadCount], 
       [Project] 
WHERE 
       [HeadCount].[LinkProjectAreaFk] IN 
      (SELECT 
            [ID] 
       FROM 
             [LinkProject-Area] 
       WHERE 
             [ProjectFk]=90 
       and 
             [SubgroupFk]=1)
        and 
             [Project].[ID]=90 
```

希望你能帮助我或指出我正确的方向

亲切的问候

* * *

嗨，我一直在尝试你的方式，但它仍然没有按预期进行：我得到了无法绑定的多部分标识符“MyCTE.ProjectFK”。并且无法绑定多部分标识符“MyCTE.ID”。当我查找时出错与使用我的连接错误有关吗？

```
 ;WITH MyCTE (ID, ProjectFK) 
    AS 
    (     
    SELECT 
           ID, 
            ProjectFk     
    FROM 
           [LinkProject-Area]     
    WHERE 
           SubgroupFk = 1 
    ) 

    SELECT 
           * 
   FROM 
             [LinkProject-Area] 
   INNER JOIN 
          HeadCount ON [LinkProjectAreaFk] = MyCTE.ID 
    INNER JOIN
           Project ON Project.ID = MyCTE.ProjectFK 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:00:23.050

我想你会想要像这样组织这个查询：

```
SELECT ...
FROM
(
    SELECT ID, ProjectFk
    FROM [LinkProject-Area]
    WHERE SubgroupFk = 1
) LinkProjectAreas
INNER JOIN HeadCount ON LinkProjectAreaFK = LinkProjectAreas.ID
INNER JOIN Project ON Project.ID = LinkProjectAreas.ProjectFK 
```

您还可以使用公用表表达式 (CTE) 来组织它：

```
;WITH LinkProjectAreas (ID, ProjectFK) AS
(
    SELECT ID, ProjectFk
    FROM [LinkProject-Area]
    WHERE SubgroupFk = 1
)
SELECT ...
FROM LinkProjectAreas
INNER JOIN HeadCount ON LinkProjectAreaFK = LinkProjectAreas.ID
INNER JOIN Project ON Project.ID = LinkProjectAreas.ProjectFK 
```

# maven - Quartz 1.8 的 Maven 标签？

> ID：11414325
> 
> 赞同：1
> 
> 时间：2012-07-10T13:25:25.020
> 
> 标签：maven, quartz-scheduler

我继承了一个遗留的 Java Servlet webapp，我正在慢慢地重写成更现代的东西。

多亏了 Quartz，webapp 运行一个每晚的计划任务，并且依赖于这些库文件：

*   石英-1.8.0.jar
*   石英全1.8.0.jar

我不了解 Quartz，但我学到的知识足以修复当我接管 web 应用程序时抛出的无害异常。从那次经验中我了解到，自 1.8 版以来，API 发生了重大变化。0\. 有一天，当我完成重建 webapp 的更多重要部分时，我想花时间学习石英并全面更新库。

现在我很乐意了解我将添加到我的 pom.xml 中以获取这两个 jar 的 Maven 标签。

当我启动 WebLogic 11g 时，我收到一条消息，告诉我有一个 Quartz 1.8.5。1.8.5 与 1.8.0 版本完全兼容吗？

如果是这样，我需要升级到的 Maven 标签是什么？

非常感谢您提供任何信息。

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:17:22.990

用于石英的 Maven 标签，

```
 <dependency>
        <groupId>org.quartz-scheduler</groupId>
        <artifactId>quartz</artifactId>
        <version>1.8.5</version>
    </dependency> 
```

是的，1.8.5 与 1.8.0 版完全兼容。

干杯！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:48:07.140

首先，我会在 Maven 中心搜索这样的工件：

[http://search.maven.org/#search|gav|1|g%3A%22org.quartz-scheduler%22%20AND%20a%3A%22quartz%22](http://search.maven.org/#search|gav|1|g%3A%22org.quartz-scheduler%22%20AND%20a%3A%22quartz%22)

对于给定版本中的quartz-all 似乎不存在。

[http://search.maven.org/#search|ga|1|quartz-all](http://search.maven.org/#search|ga|1|quartz-all)

我会假设你只需要石英工件而不是石英。

# java - mySql-java 简单的搜索控制台应用程序

> ID：11414326
> 
> 赞同：0
> 
> 时间：2012-07-10T13:25:31.663
> 
> 标签：java, mysql, search

我正在尝试做一个搜索程序：前端 - java 和后端 - mysql。

我试了一下，代码如下：

```
public static void searchRecord() throws SQLException{

    Scanner in = new Scanner(System.in);
    int empnum;

    System.out.print("Enter employee number: ");
    empnum = in.nextInt();

    String search = "SELECT fname FROM employees WHERE emp_num='"+ empnum + "'";
        resultSet = statement.executeQuery(search);

    String empnum_rs = null;    

    while(resultSet.next()){
        empnum_rs = resultSet.getString(empnum);

    }

     System.out.print(empnum_rs);   
} 
```

我在这里遇到的问题是，当我键入 emp_num 时，eclipse 会抛出这些行：

```
Exception in thread "main" java.sql.SQLException: Column Index out of range, 2 > 1\. 
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:988)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:974)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:919)
    at com.mysql.jdbc.ResultSetImpl.checkColumnBounds(ResultSetImpl.java:830)
    at com.mysql.jdbc.ResultSetImpl.getStringInternal(ResultSetImpl.java:5773)
    at com.mysql.jdbc.ResultSetImpl.getString(ResultSetImpl.java:5692)
    at Test.searchRecord(Test.java:55)
    at Test.main(Test.java:37) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:26:55.803

这些`getXXX...`函数采用从 1 到 n 的列号，其中 n 是查询中选择的最大列数。您的查询只有一列可供选择。并且`empnum`可能不等于 1，因此会引发错误。

改变：

```
empnum_rs = resultSet.getString(empnum); 
```

到：

```
empnum_rs = resultSet.getString( 1 ); 
```

# asp.net - 如何解决“要重新显示网站，网络浏览器需要重新发送您之前提交的信息”的问题

> ID：11414330
> 
> 赞同：1
> 
> 时间：2012-07-10T13:25:42.873
> 
> 标签：asp.net, html, internet-explorer

我有一个父页面 asp.net，在弹出窗口中我有这个：

```
<body onunload="parent.opener.location.reload()">
    <form id="silverlightWindows" runat="server" />
</body> 
```

问题是当弹出窗口关闭时，它总是用 IE 和 Firefox 询问这个确认信息：

```
to display the website again, the web browser needs to resend the information you've previously submitted 
```

如何删除消息警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:31:23.127

用户成功提交表单后，您应该重定向用户。这称为[发布/重定向/获取“模式”](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:12:27.657

显示该消息是因为您正在尝试重新加载父窗口的位置，并且该窗口当前正在显示回发的结果。

要修复它，您必须：

*   仅在“正常”非回发请求后打开弹出窗口。

或者

*   不使用 use`location.reload()`而是使用`location='(url to load here)'`. 如果可以在没有回发数据的情况下恢复父窗口的状态，这可能会起作用。

或者

*   您可以使用 javascript 在父窗口上进行回发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T13:42:16.997

摆脱“Internet Explorer 需要重新发送您之前提交的信息”使用此脚本块

```
>    window.parent.opener.document.forms[0].submit() ; 
```

# solr - Solr 查询：搜索仅包含空格的字段

> ID：11414331
> 
> 赞同：0
> 
> 时间：2012-07-10T13:25:44.927
> 
> 标签：solr, field, spaces

如何编写 solr 查询来搜索其中只有空格的字段？例如

```
{
    "phone_number":"Airtel",
    "smstype":1,
    "phone_status":-1,
    "user_hash":"52565f64ba3e8df1aa",
    "contact_name":" ",
    "snaptype":1,
} 
```

如果您注意到 contact_name 字段，它只是两个空格，我如何过滤掉仅包含特定字段空格的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:31:18.260

添加到 Persimmonium 的答案 - 以下查询应该可以解决问题。

除了正则表达式，您还需要为空格转义。

联系人姓名：”\ ”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T11:25:33.317

抱歉有点晚了。查找空格的正则表达式很容易找到。您还应该注意您正在使用的标记器。一些分词器会去掉空格并将该字段留空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:06:17.850

我认为这可以通过使用正则表达式查询来实现（我不是正则表达式专家，但“只有空格”非常简单和常见）。

有关solr/lucene 中正则表达式支持的详细信息，请参阅[此内容](https://stackoverflow.com/questions/9332343/what-regular-expression-features-are-supported-by-solr-edismax)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:30:00.117

我在[这里](https://stackoverflow.com/questions/11391628/how-i-find-empty-solr-document-fields-with-lucene-query/11391855#11391855)回答了类似的问题。

在[SolrQuerySytax](http://wiki.apache.org/solr/SolrQuerySyntax)页面中，他们说您可以使用以下查询来查找所有空查询。

```
-field:[* TO *] finds all documents without a value for field 
```

# facebook - 如何使用 fb:// 打开特定的 Facebook 提要

> ID：11414332
> 
> 赞同：0
> 
> 时间：2012-07-10T13:25:56.907
> 
> 标签：facebook, cocoa-touch

参考： [Facebook iPhone 应用支持的所有自定义 URL 方案有哪些？](https://stackoverflow.com/questions/5707722/what-are-all-the-custom-url-schemes-supported-by-the-facebook-iphone-app)

我想在本机应用程序上打开一个特定的提要（如果已安装）。我有它的链接，它的 ID，但我能得到的最接近的是打开一个页面或个人资料。

谢谢

# c# - 如何删除我不知道在哪里设置的语言？

> ID：11414338
> 
> 赞同：1
> 
> 时间：2012-07-10T13:26:21.727
> 
> 标签：c#, cultureinfo

在*激活***Culture Info**的项目的**bin/debug**文件夹中，每次构建后，在**ru-RU**文件夹附近会出现一个名为**ar-BH**的文件夹，其中存储一些控件的资源（一个**dll**文件）。

 *******我认为有时不小心设置了这种语言，我不知道是否可以找到这些控件。

是否有可能找到或如何删除不需要的语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:01:05.067

我使用反汇编程序修复了设置 ar-BH 语言的位置，之后我从解决方案资源管理器中删除了资源文件。*******

# scala - 需要帮助了解此代码中 ->、{} 和 () 的用法

> ID：11414347
> 
> 赞同：5
> 
> 时间：2012-07-10T13:26:47.533
> 
> 标签：scala

这是有问题的代码：

```
val oauth_params = IMap(
      "oauth_consumer_key" -> consumer.key,
      "oauth_signature_method" -> "HMAC-SHA1",
      "oauth_timestamp" -> (System.currentTimeMillis / 1000).toString,
      "oauth_nonce" -> System.nanoTime.toString
    ) ++ token.map { "oauth_token" -> _.value } ++
      verifier.map { "oauth_verifier" -> _ } 
```

**问题 1：**启用了哪些 Scala 功能`"oauth_consumer_key" -> consumer.key`并作为参数传递？

**问题 2：**看到`val oauth_params = IMap(...)`and `token.map {...}`，哪些操作`{}`用于传递值而不是通常的`()`？有具体的规定吗？`for`如果是相关问题，为什么允许循环同时使用两者？

当我看到其他地方使用的功能时，我在这里问。我也相信这两个问题是相关的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T13:43:25.767

为了：

`->`在 中定义`Predef.scala`，它在编译期间被导入到任何其他 Scala 源中：

```
final class ArrowAssoc[A](val x: A) {
  @inline def -> [B](y: B): Tuple2[A, B] = Tuple2(x, y)
  def →[B](y: B): Tuple2[A, B] = ->(y)
}
implicit def any2ArrowAssoc[A](x: A): ArrowAssoc[A] = new ArrowAssoc(x) 
```

**如您所见，有一个隐式转换可以将任何对象转换为 ArrowAssoc[A]，它有一个方法 ->[B]，它返回一个 Tuple2[A,B]。**

IMap(...) 它是对方法 IMap.apply(...) 的调用：在 Scala 中，如果方法名为 apply，则可以省略它。在这种情况下，它在 Scala 中以一种非常常见的模式用作工厂方法

```
class MyClass(....) {

}
object MyClass{ 
   def apply(....): MyClass = new MyClass(....)
}

val a = MyClass(a,b,c) 
```

**您刚刚看到的是一个 Scala 类及其伴生对象：一个必须在与该类相同的源文件中定义的单例，并且它还可以访问该类本身中的私有和受保护字段**

map 函数接收一个函数，该函数采用相同类型的集合并返回不同类型。示例：`List(1,2,3).map ( x => x * 2)`。( ) 和 { } 在 Scala 中可以互换，除了 case 构造。

# android - Android SDK 支持哪些蓝牙配置文件

> ID：11414348
> 
> 赞同：2
> 
> 时间：2012-07-10T13:26:47.850
> 
> 标签：android, bluetooth

在以下链接中列出的配置文件中，哪些配置文件受 android SDK 支持： [https ://support.google.com/ics/nexus/bin/answer.py?hl=en&answer=1650159](https://support.google.com/ics/nexus/bin/answer.py?hl=en&answer=1650159)

从文档看来，对带有 android SDK 的蓝牙配置文件的支持非常有限：http: [//developer.android.com/reference/android/bluetooth/package-summary.html](http://developer.android.com/reference/android/bluetooth/package-summary.html)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:02:27.223

你试过[`sdptool`](http://examplenow.com/sdptool/usage)吗？您甚至可以从 ADB shell 发出命令。这应该让您对设备支持的蓝牙配置文件有一个很好的了解。

我相信 Android SDK 为 RFCOMM、A2DP 和 HDP 蓝牙配置文件提供公共 API。

# ios - 可变合成，在用帧制作的视频中添加音频时失去方向

> ID：11414351
> 
> 赞同：1
> 
> 时间：2012-07-10T13:26:53.960
> 
> 标签：ios, avfoundation, avassetwriter, avassetexportsession, avmutablecomposition

我一直在做一个视频处理项目。到目前为止，我成功地过滤了实时摄像机源、捕获静止图像、从帧中录制视频、录制音频，并且最近成功地将音频添加到视频捕获中。

但似乎视频失去了方向 - 它应该顺时针旋转 90 度。我尝试使用 AVmutablevideocomposition，但无论我做什么，我都会收到以下错误：

> [__NSArrayM objectAtIndex:]: 索引 0 超出范围为空数组';

似乎`exportUrl`正在发布或其他什么..我尝试替换`exportUrl`只是`outputURL`为了测试它很好..

```
// adding audio to video
AVMutableComposition *composition = [[AVMutableComposition alloc]init];
AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:recordedTmpFile options:nil];
AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:outputURL options:nil];
//

AVMutableCompositionTrack *compositionCommentaryTrack =
    [composition addMutableTrackWithMediaType:AVMediaTypeAudio 
                 preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionCommentaryTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration)
    ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] 
    atTime:kCMTimeZero error:nil];

AVMutableCompositionTrack *compositionVideoTrack =
    [composition addMutableTrackWithMediaType:AVMediaTypeVideo 
                 preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration)
    ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] 
    atTime:kCMTimeZero error:nil];

AVAssetExportSession* _assetExport =
    [[AVAssetExportSession alloc] initWithAsset:composition 
                                  presetName:AVAssetExportPresetPassthrough];

NSString* videoName = @"export.mov";
NSString *exportPath = [NSTemporaryDirectory() stringByAppendingPathComponent:videoName];
self.exportUrl = [[NSURL fileURLWithPath:exportPath]retain];

if ([[NSFileManager defaultManager] fileExistsAtPath:exportPath]) {
    [[NSFileManager defaultManager] removeItemAtPath:exportPath error:nil];
}

_assetExport.outputFileType = AVFileTypeQuickTimeMovie;
_assetExport.outputURL = self.exportUrl;
_assetExport.shouldOptimizeForNetworkUse = YES;
[_assetExport exportAsynchronouslyWithCompletionHandler:
    ^(void ) {
        switch (_assetExport.status) 
        {
        case AVAssetExportSessionStatusCompleted:
            //                export complete 
            NSLog(@"Export Complete");
            break;
        case AVAssetExportSessionStatusFailed:
            NSLog(@"Export Failed");
            NSLog(@"ExportSessionError: %@", [_assetExport.error localizedDescription]);
            //                export error (see exportSession.error)  
            break;
        case AVAssetExportSessionStatusCancelled:
            NSLog(@"Export Failed");
            NSLog(@"ExportSessionError: %@", [_assetExport.error localizedDescription]);
            //                export cancelled  
            break;
        }
    }]; ;
//

// trying to rotate the video
// if I replace exportUrl by outputURL no error 

AVURLAsset* asset = [[AVURLAsset alloc]initWithURL:self.exportUrl options:nil];
AVMutableVideoComposition* videoComposition = [[AVMutableVideoComposition videoComposition]retain];
videoComposition.renderSize = CGSizeMake(320, 240);
videoComposition.frameDuration = CMTimeMake(1, 30);
AVMutableVideoCompositionInstruction *instruction =
    [AVMutableVideoCompositionInstruction videoCompositionInstruction];
instruction.timeRange = CMTimeRangeMake(kCMTimeZero, CMTimeMakeWithSeconds(60, 30) );
AVMutableVideoCompositionLayerInstruction* rotator =
    [AVMutableVideoCompositionLayerInstruction
       videoCompositionLayerInstructionWithAssetTrack:[[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]];

CGAffineTransform translateToCenter = CGAffineTransformMakeTranslation( 0,-320);    
CGAffineTransform rotateBy90Degrees = CGAffineTransformMakeRotation( M_PI/2);
CGAffineTransform shrinkWidth = CGAffineTransformMakeScale(0.66, 1); 
CGAffineTransform finalTransform = CGAffineTransformConcat( shrinkWidth, CGAffineTransformConcat(translateToCenter, rotateBy90Degrees) );
[rotator setTransform:finalTransform atTime:kCMTimeZero];
instruction.layerInstructions = [NSArray arrayWithObject: rotator];
videoComposition.instructions = [NSArray arrayWithObject: instruction];

ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:self.exportUrl]) {
    [library writeVideoAtPathToSavedPhotosAlbum:self.exportUrl completionBlock:nil];
    [outputURL release];
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:04:12.183

我解决了这个问题。

这是现在的代码：

```
 AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:recordedTmpFile options:nil];
         AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:outputURL options:nil];

         AVMutableComposition* composition = [AVMutableComposition composition];
        //
         AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];
         videoComposition.frameDuration = CMTimeMake(1,30);
         videoComposition.renderScale = 1.0;
        //

         AVMutableCompositionTrack *compositionCommentaryTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio 
         preferredTrackID:kCMPersistentTrackID_Invalid];
         [compositionCommentaryTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration) 
         ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] 
         atTime:kCMTimeZero error:nil];

         AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo 
         preferredTrackID:kCMPersistentTrackID_Invalid];
         [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) 
         ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] 
         atTime:kCMTimeZero error:nil];

        //
        AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];

        AVMutableVideoCompositionLayerInstruction *layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTrack];

         AVAssetTrack *sourceVideoTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

        CGAffineTransform rotationTransform = CGAffineTransformMakeRotation(M_PI/2);
        CGAffineTransform rotateTranslate = CGAffineTransformTranslate(rotationTransform,320,0);

         [compositionVideoTrack setPreferredTransform:sourceVideoTrack.preferredTransform];
         [layerInstruction setTransform:rotateTranslate atTime:kCMTimeZero];

        instruction.layerInstructions = [NSArray arrayWithObject: layerInstruction];
        videoComposition.instructions = [NSArray arrayWithObject: instruction];

        //

         AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:composition 
         presetName:AVAssetExportPresetPassthrough];   

         NSString* videoName = @"export.mov";

         NSString *exportPath = [NSTemporaryDirectory() stringByAppendingPathComponent:videoName];
         self.exportUrl = [NSURL fileURLWithPath:exportPath]; //url of your video created from image

         if ([[NSFileManager defaultManager] fileExistsAtPath:exportPath]) 
         {
         [[NSFileManager defaultManager] removeItemAtPath:exportPath error:nil];
         }

         _assetExport.outputFileType = @"com.apple.quicktime-movie";
         NSLog(@"file type %@",_assetExport.outputFileType);
         _assetExport.outputURL = self.exportUrl;
         _assetExport.shouldOptimizeForNetworkUse = YES;

        [_assetExport exportAsynchronouslyWithCompletionHandler:
         ^(void ) {
             switch (_assetExport.status) 
             {
                 case AVAssetExportSessionStatusCompleted:
                     //                export complete 
                     NSLog(@"Export Complete");
                     break;
                 case AVAssetExportSessionStatusFailed:
                     NSLog(@"Export Failed");
                     NSLog(@"ExportSessionError: %@", [_assetExport.error localizedDescription]);
                     //                export error (see exportSession.error)  
                     break;
                 case AVAssetExportSessionStatusCancelled:
                     NSLog(@"Export Failed");
                     NSLog(@"ExportSessionError: %@", [_assetExport.error localizedDescription]);
                     //                export cancelled  
                     break;
             }
         }]; 

        ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
        if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:self.exportUrl]) {
            [library writeVideoAtPathToSavedPhotosAlbum:self.exportUrl completionBlock:nil];
            [outputURL release];
        } 
```

# php - 带括号的正则表达式

> ID：11414360
> 
> 赞同：1
> 
> 时间：2012-07-10T13:27:20.933
> 
> 标签：php, regex, expression

如何从此字符串中获取“文本”：

```
{L[text]} 
```

?

我试过

```
\{L\[*\]\} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:30:15.483

缺少允许的字符类：

```
\{L\[(\w*)\]\} 
```

其中 \w = [a-zA-Z0-9]。必需的文本在第 1 组中。

[演示](http://regexr.com?31g8e)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:30:29.917

您是否尝试过以下表达式？

```
/\{L\[([^\]]*)\]\}/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:31:10.537

```
<?php
$s = "{L[hello you]}";
preg_match('/\{L\[(.*)\]\}/', $s, $matches);
print_r($matches); 
```

# visual-studio - 在 Visual Studio IDE 中使用 Delphi / Object Pascal

> ID：11414363
> 
> 赞同：4
> 
> 时间：2012-07-10T13:27:35.967
> 
> 标签：visual-studio, delphi

**背景：**

我从版本 2 开始就一直在使用 Delphi，自从升级到 v5/v6 左右，我从未升级以获得更新的功能 - 而是解决 IDE/编译器中的错误。今天，我打开了一个个人项目，在过去的一年里我偶尔会做这个项目，但它无法编译（自上次以来根本没有改变）。最终它编译但不会运行......

我一直在使用 C#/visual studio 进行大量工作和快速的'n'dirty 项目，而我遇到的 C#/VS 的唯一问题是 C# 语言本身的限制。

**问题：**

有什么方法可以让我在 Visual Studio 中编辑我的 Delphi 项目并从那里运行/调试它们，而不必使用带有众多错误的 Delphi IDE/调试器？我真的不想纯粹为了绕过 Borland 的 heisenbugs 而再次升级 Delphi。

我看到一些 LGPL 的项目让 Delphi 进入 Visual Studio，但到 2007 年它似乎已经死了。同样，我在 Visual Studio 中看到了 Delphi .NET，但我的一些科学代码是 ASM 优化的（SSE/FMA ）。

或者，是否有一个体面的（免费/便宜的）Delphi=>C++ / Delphi=>C# 翻译程序？如果我可以将我的 Delphi 代码翻译成 Visual Studio 语言（偶尔提供或接受 ASM），那可能就足够了。

# vb.net - 在 vb.net 中调用另一个类的共享函数？

> ID：11414364
> 
> 赞同：2
> 
> 时间：2012-07-10T13:27:40.400
> 
> 标签：vb.net, class, function

如何将一个类中的共享函数调用到另一个类，这是我的代码，

```
Imports System.Web.UI

Public Class functest
    Public Shared Function callthis(source as object, args as event)
      'code goes here
    End Function
End Class 
```

我必须在另一个类中调用“callthis”函数。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T13:29:21.607

```
functest.callthis(something, something_else) 
```

# reporting-services - SQL Server：商业智能开发工作室

> ID：11414365
> 
> 赞同：0
> 
> 时间：2012-07-10T13:27:51.377
> 
> 标签：reporting-services, bids

我提前道歉，因为我很欣赏我的问题是一个通用的问题，而不是专注于一个特定的问题。在尝试学习 SQL Server Reporting Services 数天后，我几乎没有取得任何进展。

我有：

建立一个SQL数据库

用 C# 构建客户端应用程序以访问和使用该 SQL 数据库

并学习了如何在 Business Intelligance Development Studio 中根据 SQL 数据库中的数据设计报表

我不能做的：

部署我的报告，以便可以通过商业智能开发工作室以外的任何方式访问这些报告。

每次我选择部署时，系统都会要求我提供凭据 - 无论我使用什么详细信息（我的 Windows 凭据）或在 SQL Server 安装时创建的“sa”帐户 - 我都无法部署我的报告或访问 SQL Server Reporting Services。

我已经阅读了多本手册——我已经在网上购买了这些手册，但我就是想不通。

任何人都可以提供一些建议 - 请！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:22:04.927

我最终放弃了 SSRS 并选择了 Crystal Reports，它似乎没有连接到我的数据库以获取其数据的此类问题。

# android - 如何在 android 中访问 3d 数字天气时钟 wiget 的数据

> ID：11414368
> 
> 赞同：0
> 
> 时间：2012-07-10T13:27:59.530
> 
> 标签：android

android 手机中有一个名为“3D 数字天气时钟 wiget”的天气 wiget，如蓝色矩形打击所示。我有问题如何读取其数据，如下图红色矩形所示。我想在我的应用程序中显示数据。

请有人帮助我。您的帮助将不胜感激。

![在此处输入图像描述](../Images/2c189e7f20097c93326c1a57321eb53d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:33:06.250

为此，您需要使用服务 API...

请查看[http://www.anddev.org/advanced-tutorials-f21/android-weather-forecast-google-weather-api-description-t337-30.html](http://www.anddev.org/advanced-tutorials-f21/android-weather-forecast-google-weather-api-description-t337-30.html)了解更多详情和示例。

请参阅获取伦敦的哪些信息，您可以在请求中传递[http://www.google.bg/ig/api?weather=London,ES&hl=en](http://www.google.bg/ig/api?weather=London,ES&hl=en)，结果您将获得需要解析然后显示的 XML。

我希望这有帮助。

# perl - Attribute::Handler 在 use 和 require 中的行为

> ID：11414371
> 
> 赞同：3
> 
> 时间：2012-07-10T13:28:21.247
> 
> 标签：perl

我有一个使用 Attribute::Handler 实现的 perl 模块

```
package FOO;

use strict;
use warnings;

use Attribute::Handlers;

use base 'Exporter';
our @EXPORT = qw(__RETRY);

sub __RETRY : ATTR(CODE) {
    my ($pkg, $sym, $code) = @_;

    no warnings 'redefine';

    *{ $sym } = sub
    {
        my $self = $_[0];
        my $result;
        print ("Executing subroutine\n");
        $result = $code->();
        if ($result)
        {
            print "You Pass\n";
        }
        else
        {
            print "You Fail\n";
        }
    }
}

sub foo : __RETRY
{
    print "Executing Foo\n";
    return 1;
}

1; 
```

现在，当我使用 require 调用这个模块并调用函数 foo() 时，它只执行 foo 的打印语句。

```
require "FOO.pm";
FOO->import();
FOO::foo(); 
```

输出：

```
Executing Foo 
```

但后来我使用 use 做同样的事情，它做了正确的工作。

```
use FOO;
FOO::foo(); 
```

输出：

```
Executing subroutine
Executing Foo
You Pass 
```

实际上，在我的代码中，我使用 require 来调用它，但它不起作用。您的帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:32:22.723

`perldoc attributes`：

> 子程序属性的设置发生在编译时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:46:18.443

更准确地说 - 属性在 CHECK 阶段处理。因此，当您评估/请求它们时，它们没有被填满。

但是，您可以尝试以下方法：

```
sub __RETRY : ATTR(CODE,BEGIN) { 
```

强迫它。有了它，下一个作品，但也许你的里程是......

```
eval { require "FOO.pm"; FOO->import(); FOO::foo() }; 
```

# php - 根据用户输入安全地调用函数

> ID：11414372
> 
> 赞同：6
> 
> 时间：2012-07-10T13:28:23.507
> 
> 标签：php, security

我正在尝试创建一个 AJAX 脚本，它将采用两个 GET 变量、类和方法，并将它们映射到我们设计的方法（类似于 CodeIgniter 对 ajax 的作用，我很确定）。由于我依靠用户输入来确定要执行的类和方法，我担心黑客可能有某种方法可以利用该技术来发挥自己的优势。

编码：

```
//Grab and clean (just in case, why not) the class and method variables from GET
$class = urlencode(trim($_GET['c']));
$method = urlencode(trim($_GET['m']));

//Ensure the passed function is callable
if(method_exists($class, $method)){
    $class::$method();
} 
```

在使用这种技术时，我应该注意哪些缺点或安全注意事项？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T13:32:22.897

检查是否允许用户调用方法：

```
// methods that user can call:
$user_methods = array("method1", "method2", "method3", );

//Ensure the passed function is callable
if(method_exists($class, $method) and in_array($method, $user_methods){
    $class::$method();
} 
```

否则，您将无法控制用户能够做什么。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T19:29:38.683

```
<?php
class AjaxCallableFunction
{
    public static $callable_from_ajax = TRUE;
}

$class = $_POST['class'];
$method = $_POST['method'];

if ( class_exists( $class ) && isset( $class::$callable_from_ajax ) && $class::$callable_from_ajax ) {
    call_user_func( $class, $method );
} 
```

结合其他一些答案以获得最佳效果。需要 PHP 5.3.0 或更高版本。你甚至可以实现一个接口

```
<?php
interface AjaxCallable {}

class MyClass implements AjaxCallable 
{
    // Your code here
}

$class = $_POST['class'];
$method = $_POST['method'];

if ( class_exists( $class ) && in_array( 'AjaxCallable', class_implements( $class ) ) ) {
    call_user_func( $class, $method );
} 
```

这种方法遵循 OOP 原则，非常冗长（易于维护），并且不需要您维护一个可以调用哪些类的数组，哪些不能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-10T13:30:24.317

考虑到您没有传递任何参数，目前这是相对安全的。但我会在你的 IF 中添加一个有效类的列表，例如：

```
//Ensure the passed function is callable
if(method_exists($class, $method)){
    if(in_array($class, array('controller1', 'controller2'))){
        $class::$method();
    }
} 
```

这样，黑客就不能以这种方式真正调用框架中任何可能的类，而只能调用您允许他调用的类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T13:50:03.083

在这种情况下，您必须处理[反射。](http://php.net/manual/en/reflectionclass.getmethods.php)

这是您需要的示例。

```
<?php
class Apple {
    public function firstMethod() { }
    final protected function secondMethod() { }
    private static function thirdMethod() { }
}

$class = new ReflectionClass('Apple');
$methods = $class->getMethods();
var_dump($methods);
?> 
```

[使用ReflectionMethods:invoke](http://php.net/manual/en/reflectionmethod.invoke.php)执行方法可能是这样的：

```
 <?php
class HelloWorld {

    public function sayHelloTo($name) {
        return 'Hello ' . $name;
    }

}

$reflectionMethod = new ReflectionMethod('HelloWorld', 'sayHelloTo');
echo $reflectionMethod->invoke(new HelloWorld(), 'Mike');
?> 
```

所以最后我们可以：

```
 $class = urlencode(trim($_GET['c']));
  $method = urlencode(trim($_GET['m']));

  $allowed_methods = array("insert", "update", "delete");

  if(method_exists($class, $method) and in_array($method, $allowed_methods){
    $reflectionMethod = new ReflectionMethod($class, $method);
    $reflectionMethod->invoke(new $class, 'First Argument');
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T09:52:17.930

urlencode() 让我有点担心。尽管它可能是安全的，但我会更严格地进行消毒。我只允许字母、数字和下划线。您真的不需要任何带有其他字符的类或方法名称。我想我从来没有见过。

我在所有项目中都将它用于**很多**东西：

```
function very_safe_string( $string )
{
    return preg_replace("/[^A-Za-z0-9_]/" , '' , $string);
} 
```

正如其他海报所提到的，您绝对应该有某种类型的白名单明确允许（至少对于类，因为我确信并非每个类都需要从 ajax 访问）。以及检查 class_exists() 和 method_exists()。

如果这些检查中的任何一个失败，我还建议使用某种类型的电子邮件警报系统。我确定你想知道是否有人试图 hax0r j00。

# neural-network - 神经网络学习率和批量权重更新

> ID：11414374
> 
> 赞同：11
> 
> 时间：2012-07-10T13:28:28.267
> 
> 标签：neural-network, backpropagation

我已经用 Java 编写了一个神经网络，现在正在研究反向传播算法。

我读过权重的批量更新将导致更稳定的梯度搜索，而不是在线权重更新。

作为测试，我创建了一个 100 点的时间序列函数，例如`x = [0..99]`和`y = f(x)`。我创建了一个具有一个输入和一个输出的神经网络以及 2 个具有 10 个神经元的隐藏层用于测试。我正在努力解决这个问题时反向传播算法的学习率。

我有 100 个输入点，所以当我计算`dw_{ij}`每个节点的权重变化时，它实际上是一个总和：

```
dw_{ij} = dw_{ij,1} + dw_{ij,2} + ... + dw_{ij,p} 
```

在`p = 100`这种情况下。

现在权重更新变得非常大，因此我的错误`E`会反弹，以至于很难找到最小值。我得到一些正确行为的唯一方法是将学习率设置`y`为`0.7 / p^2`.

是否有一些基于样本量设置学习率的一般规则？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-10T14:23:08.287

[http://francky.me/faqai.php#otherFAQs](http://francky.me/faqai.php#otherFAQs)：

**主题：反向传播应该使用什么学习率？**

在标准反向传播中，学习率太低会使网络学习非常缓慢。学习率太高会使权重和目标函数发散，所以根本没有学习。如果目标函数是二次的，如在线性模型中，则可以从 Hessian 矩阵计算良好的学习率（Bertsekas 和 Tsitsiklis，1996）。如果目标函数具有许多局部和全局最优值，如在具有隐藏单元的典型前馈神经网络中，最优学习率在训练过程中经常发生巨大变化，因为 Hessian 矩阵也会发生巨大变化。尝试使用恒定的学习率训练 NN 通常是一个繁琐的过程，需要大量的反复试验。有关在一些非常简单的网络中学习率和动量的选择如何与数值条件相互作用的一些示例，请参阅 [ftp://ftp.sas.com/pub/neural/illcond/illcond.html](ftp://ftp.sas.com/pub/neural/illcond/illcond.html)

通过批量训练，无需使用恒定的学习率。事实上，根本没有理由使用标准反向传播，因为存在更高效、可靠和方便的批量训练算法（参见“什么是反向传播？”下的 Quickprop 和 RPROP 以及“什么是共轭”中提到的众多训练算法梯度，Levenberg-Marquardt 等？”）。

已经发明了许多其他的反向传播变体。大多数都遭受与标准反向传播相同的理论缺陷：权重变化的幅度（步长）不应该是梯度幅度的函数。在权重空间的某些区域，梯度较小，需要较大的步长；当您初始化具有较小随机权重的网络时，就会发生这种情况。在权重空间的其他区域，梯度较小，需要较小的步长；当您接近局部最小值时会发生这种情况。同样，大梯度可能需要小步或大步。许多算法试图调整学习率，但是任何将学习率乘以梯度来计算权重变化的算法都可能在梯度突然变化时产生不稳定的行为。Quickprop 和 RPROP 的巨大优势在于它们不会过度依赖梯度的大小。传统的优化算法不仅使用梯度，还使用二阶导数或线搜索（或它们的某种组合）来获得良好的步长。

对于增量训练，要设计一种在训练期间自动调整学习率的算法要困难得多。NN 文献中出现了各种提议，但大多数都不起作用。Darken 和 Moody (1992) 说明了其中一些建议的问题，不幸的是他们没有提供解决方案。LeCun、Simard 和 Pearlmutter (1993) 以及 Orr 和 Leen (1997) 提供了一些有希望的结果，他们适应的是动量而不是学习率。还有一种随机近似的变体，称为“迭代平均”或“Polyak 平均”（Kushner 和 Yin 1997），理论上它通过保持权重值的运行平均值来提供最佳收敛速度。我对这些方法没有个人经验；

**参考资料**：

*   Bertsekas, DP 和 Tsitsiklis, JN (1996)，神经动态规划，马萨诸塞州贝尔蒙特：Athena Scientific，ISBN 1-886529-10-8。
*   Darken, C. 和 Moody, J. (1992)，“走向更快的随机梯度搜索”，载于 Moody, JE, Hanson, SJ 和 Lippmann, RP 编辑。
*   神经信息处理系统的进展 4，加利福尼亚州圣马特奥：Morgan Kaufmann Publishers，第 1009-1016 页。Kushner, HJ 和 Yin, G. (1997)，随机逼近算法和应用，纽约：Springer-Verlag。LeCun, Y.、Simard, PY 和 Pearlmetter, B. (1993)，“通过在线估计 Hessian 特征向量的自动学习率最大化”，Hanson, SJ, Cowan, JD 和 Giles，
*   CL (eds.), Advances in Neural Information Processing Systems 5, San Mateo, CA: Morgan Kaufmann, pp. 156-163。Orr, GB 和 Leen, TK (1997)，“使用曲率信息进行快速随机搜索”，在
*   Mozer, MC, Jordan, MI 和 Petsche, T., (eds.) Advances in Neural Information Processing Systems 9,Cambridge, MA: The MIT Press, pp. 606-612。

**学分**：

*   存档名称：ai-faq/neural-nets/part1
*   最后修改：2002-05-17
*   网址： ftp: [//ftp.sas.com/pub/neural/FAQ.html](ftp://ftp.sas.com/pub/neural/FAQ.html)
*   维护者：saswss@unx.sas.com (Warren S. Sarle)
*   版权所有 1997、1998、1999、2000、2001、2002，美国北卡罗来纳州卡里市的 Warren S. Sarle。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T14:38:02.080

一个简单的解决方案是取一个批次的平均重量，而不是求和。这样，您可以只使用 0.7 的学习率（或您喜欢的任何其他值），而不必担心优化另一个参数。

关于批量更新和学习率的更多有趣信息可以在[Wilson (2003) 的这篇文章](http://axon.cs.byu.edu/papers/Wilson.nn03.batch.pdf)中找到。

# php - 将表达式分配给弧并执行它

> ID：11414376
> 
> 赞同：1
> 
> 时间：2012-07-10T13:28:42.277
> 
> 标签：php

我需要在我的网络应用程序中实现以下内容。我知道我的解决方案是不正确的，但我把代码 jsut 来演示这个想法。

有一个类'弧'。我需要能够为这个弧分配任何表达式（例如a+b+c、ac、if-then）。一旦分配了表达式，我希望能够使用一些随机获取的变量来执行它。是否可以在 Web 应用程序中实现这样的功能？也许，我应该使用一些像 MathPL 这样的插件？或者也许有一种完全不同的方法来解决这类问题？

```
class arc {

    var $arcexpression;

    function setExpression($arcexpression) {
        $this->arcexpression = $arcexpression;
    }

    function getExpression() {
        return $this->arcexpression;
    }

}

$arc = new arc();

$arc->setExpression("if a>b then return a else return b");

$result = $arc->execute(a,b);  // the function 'execute' should be somehow described in 'arc' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:18:34.240

您不需要为此实现整个语言。我将从限制可以做的事情开始，例如，将表达式限制为算术运算符（+、-、*、/）、括号和 if-then 运算符。您需要为 if-then 强制执行某种语法以使其更容易，可能与 php 的 operator 相同`?:`。之后，您只需要为此语法构建解析器：将给定的表达式解析为树。例如，表达式 `a + b * c' 会解析成如下内容：

```
 +
 / \
a   *
   / \
  b   c 
```

之后，您只需要评估这些表达式。例如，通过将一个数组传递给您`evaluate`的 type 函数`{ a => 1, b => 2, c => 3 }`，您将得到 7 个。

解析的思路如下：

1.  从字符串中的位置 1 开始 - 并调用递归函数来解析该位置的数据。在函数中，从指定位置开始读取。
2.  如果您阅读左括号，请递归调用自身
3.  如果遇到右括号或字符串结尾，则返回根节点
4.  读取第一个标识符（或在括号内递归）
5.  读算术符号
6.  读取第二个标识符（或在括号内递归）
7.  如果符号是 * 或 /，则创建其中包含符号的节点和两个操作数作为子节点，并将该节点附加为前一个运算符的相应（左或右）子节点。
8.  如果符号是 + 或 -，则 find 创建带有符号的节点，其中一个子节点是操作数之一，第二个节点是子树的根节点，* 和 / 在根（或第二个操作数，如果它是一个简单的操作）。

得到纯算术，加上括号，工作很容易；if-then 有点棘手，但还算不错。大约 10 年前，我不得不在 Java 中实现类似的东西。我花了大约 3 天的时间来整理所有内容，并且在 1 个类中总共有大约 500 行代码，不包括 javadoc。我怀疑在 PHP 中代码会更少，因为 PHP 语法和类型转换非常简单。

这听起来可能很复杂，但实际上，一旦你开始这样做，它就会比看起来容易得多。我清楚地记得 17 到 18 年前的大学作业，作为算法课的一部分做类似的事情。

# android - 如何将一些数据作为参数传递，例如套接字中的 http 参数？

> ID：11414378
> 
> 赞同：1
> 
> 时间：2012-07-10T13:28:51.637
> 
> 标签：android, sockets, android-networking, android-1.6-donut

我正在使用**Android 1.6**。在我的办公室里，有一些应用程序通过 HTTP post 方法发送一些数据。

我想添加一个模块通过套接字发送数据。我通过套接字（输出流）正确发送数据。它在服务器端（c#套接字应用程序）套接字应用程序中正确接收。

但是在 HTTP post 方法中，一些数据作为参数传递。我无法在套接字中找到任何方法来发送一些数据作为参数和流中的一些数据。

以下是我通过 outpustream 通过套接字发送数据的代码。

```
 socket=new Socket(this.ipAddress,this.port_number);

            //socket.setSocketImplFactory(fac)
            Log.i(tagName, "after creating sokcet");

            os=socket.getOutputStream();
            is=socket.getInputStream();

            dos=new DataOutputStream(os);               
            Log.i(tagName, "after creating ouput streams");

            dis=new DataInputStream(is);
            Log.i(tagName, "after creating input streams");

            //dos.writeUTF(msg[i].trim());
            //dos.write(msg[i].trim().getBytes());

            //dos.writeUTF(msg[i].trim());
            dos.write(msg[i].trim().getBytes()); //data written as bytes
            //dos.writeUTF(str)
            dos.flush();

            Log.i(tagName, "after writing data to os");

            StringBuilder sbuilder=new StringBuilder();

            ///*
            int ch;
            byte bt=1;
            while((bt=(byte) dis.read())!=-1)
            {
                Log.i(tagName, "ch="+bt);
                byte temp[]=new byte[1];
                //temp[0]=(byte)ch;
                temp[0]=(byte)bt;
                String tempStr1=new String(temp);
                Log.i(tagName, "tempstr:"+tempStr1);

                sbuilder.append(tempStr1);

                Log.i(tagName, "Data fro server : "+sbuilder.toString());
                tempStr1=null;
            }
            //*/
            //byte tt[]=new byte[dis.readLine()]
            //resultStr=dis.readLine();resultStr=resultStr.trim();
            resultStr=sbuilder.toString();
            Log.i(tagName, "server res :"+resultStr);

            if(dos!=null)
            {
                try
                {
                    dos.close();
                }
                catch(Exception ex)
                {

                }
            }

            if(dis!=null)
            {
                try
                {
                    dis.close();
                }
                catch(Exception ex){}
            }
            if(socket!=null)
            {
                try
                {
                    socket.close();
                }
                catch(Exception ex)
                {

                }
            } 
```

上面的代码片段可以正常工作。

但在 HTTP post 方法中，用户名和密码作为参数和流中的实际数据。就像那样，我想在参数中发送用户名和密码，并在流中发送实际的用户名和密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:04:28.390

我找到了解决方案。
我们不能将数据作为参数发送，如套接字连接中的 http 参数。
我们只能在流中发送数据。
在服务器端，我们可以编写来解析流中的数据。

谢谢

# vb.net - 使用 VB.NET 使用用户定义的文件名保存 excel 工作簿（此语句有什么问题？）

> ID：11414381
> 
> 赞同：0
> 
> 时间：2012-07-10T13:28:52.923
> 
> 标签：vb.net, excel, save

VB.NET级别：初级

在我的界面上，用户在文本框中定义了案例的名称。我想将此名称用作我的 Excel 工作簿的文件名。

有没有办法做到这一点？

以下语句没有给出异常或错误，但它没有做我想做的事情。

```
oWB.savecopyas("D:\"val(textbox1.text)".xlsx") 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:33:52.327

尝试这个：

```
oWB.savecopyas("D:\" & textbox1.text & ".xlsx") 
```

# jquery - 限制 div 滑块的宽度

> ID：11414384
> 
> 赞同：0
> 
> 时间：2012-07-10T13:29:00.183
> 
> 标签：jquery

还没有找到解决这个问题的方法，已经尝试了一些东西......我有一个滑块脚本（在这里找到它：http: [//jsfiddle.net/ND7cf/](http://jsfiddle.net/ND7cf/)）。效果很好，但是当它位于 div 框的末尾时，我无法让滑块停止。你可以永远滚动。你能告诉我如何解决这个问题吗？还有比这更好的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:44:08.387

您可以使用变量跟踪点击次数：[另一个更新](http://jsfiddle.net/ND7cf/11/)。

在我的解决方案中，scrollTracker 从 1 开始，单击右增量，单击左减量。

```
$('#right-button').click(function() {
scrollTracker++;
...
$('#left-button').click(function() {
scrollTracker--; 
```

当您开始 scrollTracker 为 1 并且您不想显示左滚动时：

```
scrollTracker > 1 ? leftButton.show() : leftButton.hide(); 
```

当你结束滚动时，你的最大帧（totalFrames = $('.column').length 在你的情况下），你隐藏右滚动：

```
scrollTracker < totalFrames ? rightButton.show() : rightButton.hide(); 
```

在开始时和每次单击时，都会更新滚动条的可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:41:35.800

快速修复您的代码：http: [//jsfiddle.net/G6x6L/10/](http://jsfiddle.net/G6x6L/10/)

但是有很多 jQuery 的滑块解决方案。我推荐你使用一个： [http ://www.tripwiremagazine.com/2012/07/jquery-slider.html](http://www.tripwiremagazine.com/2012/07/jquery-slider.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:41:39.370

我更新了脚本[http://jsfiddle.net/ND7cf/6/](http://jsfiddle.net/ND7cf/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:49:00.387

用您的 js 代码替换下面的代码，并将根据您的要求 [更新小提琴](http://jsfiddle.net/ND7cf/12/)

```
var margin_total= 0;

$('#right-button').click(function() {
if(margin_total > -900){  
    $('#box').animate({
    marginLeft: "-=450"
    }, "fast");
margin_total = margin_total - 450;
    console.log(margin_total);}
});

$('#left-button').click(function() {
if(margin_total < 0 ){
    $('#box').animate({
    marginLeft: "+=450"
    }, "fast");
margin_total = margin_total + 450; 
    console.log(margin_total);}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T14:12:59.843

我添加了 3 个参数：当前页面；leftMax-向左滚动时的最大值；rightMax - 向右滚动时的最大值：这是工作示例：

```
var leftMax=0;
var rightMax=-2*450;
var currrent=0;
$('#right-button').click(function() {
    currrent=currrent-450;
    if(currrent<rightMax) currrent=rightMax;
    $('#box').animate({
    marginLeft: currrent
    }, "fast");
});
$('#left-button').click(function() {
    currrent=currrent+450;
    if(currrent>leftMax) currrent=leftMax;
    $('#box').animate({       
     marginLeft: currrent
    }, "fast");
}); 
```

# javascript - JQGrid编辑选择和保存

> ID：11414386
> 
> 赞同：0
> 
> 时间：2012-07-10T13:29:15.950
> 
> 标签：javascript, jquery, jqgrid

我有一个 JQGrid，它具有编辑和保存行数据更改的自定义设置，但我有点困惑。我选择的数据没有出现在我的帖子中，我可以在编辑一行时选择另一行，这会更改当前选定行的值并在编辑过程中引发错误。

```
$.ajax({
    type: 'POST',
    url: '/myserver/myservice.asmx/GetMyData',
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    data: params
}).success(function(data) {
    clearNotSatisifiedConcessionList();
    var rowid;
    var response = data.d;
    if (response.length > 0) {
        $('p.infotext').html('<span class="ui-icon ui-icon-info"></span><strong>Information: </strong>Click a row, then click <b><i>Edit</i></b>');
        var lastsel2;
        var grid = $("#myList").jqGrid({
            datatype: "local",
            data: response,
            height: '100%',
            autowidth: true,
            hidegrid: false,
            ajaxSelectOptions: { type: "POST", contentType: 'application/json; charset=utf-8', dataType: 'json' },
            colNames: ['ID', 'Date', 'col1', 'col2', 'col3'],
            colModel: [
                { name: 'ID', index: 'ID', width: 20 },
                { name: 'Date', index: 'Date', width: 30, sorttype: 'date', formatter: 'date', formatoptions: { srcformat: 'd/m/Y', newformat: 'd/m/Y' }, datefmt: 'd/m/Y' },
                { name: 'col1', index: 'col1', width: 20 },
                { name: 'col2', index: 'col2', width: 25, sorttype: 'int' },
                { name: 'col3', index: 'col3', width: 35, sorttype: 'int' }
            ],
            pager: '#MyPager',
            rowNum: 15,
            editurl: '/myserver/myservice.asmx/SaveMyData',
            editData : {"SmodifiedByPersonRef":getCurrentUserPersonRef(), "modifiedByPostRef": getCurrentUserPostRef()},
            sortname: 'Date',
            sortorder: 'desc',
            viewrecords: true,
            gridview: true,
            caption: ''
        });
    } else {
        clearList();
        $('p.infotext').html('<span class="ui-icon ui-icon-info"></span><strong>Information: </strong>No data found');
    }
}).error(function(jqXHR, textStatus, errorThrown) {
    errorHandler(errorThrown, 'List', 'Load  List');
}); 
```

这是我的编辑选择和取消功能上方的列表

```
$("#editRow").click(function(event) {
    event.preventDefault();
    var selectedRow = $('#myList').jqGrid('getGridParam', 'selrow');
    if (selectedRow === null) {
        alert('No row Selected!');
    }else {
        $("#myList").jqGrid('editRow', selectedRow);
        $(".editButton").hide();
        $(".saveButton").show();
        $(".cancelButton").show();    
    }
});

$("#saveRow").click(function(event) {
    event.preventDefault();
    var selectedRow = $('#myList').jqGrid('getGridParam', 'selrow');
    var coincessionId = $("#myList").getCell(selectedRow, "ID");
    $("#myList").jqGrid('saveRow', coincessionId);
    $(".saveButton").hide();
    $(".cancelButton").hide();
    $(".editButton").show();
});

$("#cancelEdit").click(function(event) {
    event.preventDefault();
    var selectedRow = $('#myList').jqGrid('getGridParam', 'selrow');
    $("#myList").jqGrid('restoreRow', selectedRow);
    $(".saveButton").hide();
    $(".cancelButton").hide();
    $(".editButton").show();
}); 
```

有没有人做过类似的解决方案，因为在互联网上拖网还没有为我提供答案，任何问题或意见请不要犹豫，但请考虑到由于应用程序的性质，此代码有很多编辑此列表将出现在其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:15:30.847

我添加了处理程序，在编辑时将 rowid 添加到窗口变量，并在取消和保存时检查此变量，确保当前选择的行是最初选择的行，这似乎可以工作，但这是一个松散的工作

# windows - 与下一个相比，VB.net 应用程序第一次执行太慢了

> ID：11414387
> 
> 赞同：-2
> 
> 时间：2012-07-10T13:29:20.317
> 
> 标签：windows, vb.net

我正在开发一个具有繁重计算和 I/O 任务的 vb.net 应用程序，与下一次执行时间相比，程序在重新启动后的第一次执行速度太慢（完成时间还需要 10 秒）。我第一次意识到这一点CPU 使用率达到 60% 左右，之后的执行从 90% 达到 100% 。请问有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:01:30.697

当您重新启动计算机时，它会转储存储在内存中的所有内容以及缓存。第一次运行程序时，VS 必须从硬盘驱动器中提取程序以及所有必需的程序集和库以进行编译等。第一次执行后（你的问题很模糊，所以我很难获得你当前的情况）VS将所有这些东西保留在主内存中，直到其他进程需要它或关闭VS。

由于主存储器比主存储器快得多，并且由于大多数外部程序集都已编译到程序的构建中，因此后续执行会更快。

第一次运行时 CPU 使用率低得多的原因是因为无法从硬盘驱动器读取数据的速度足够快以保持 CPU 忙碌！

# c# - 使用 Visual Studio 自动化 Excel

> ID：11414388
> 
> 赞同：0
> 
> 时间：2012-07-10T13:29:20.807
> 
> 标签：c#, visual-studio-2010, excel

我有一个非常大的 Excel 电子表格，我将其发送给我的客户以更改他们的产品并标记更改。当电子表格返回时，我必须用我的主表验证更改。产品有唯一的代码，但在我分配代码之前，新产品会被标记为新产品。我在 excel 中这样做是因为我的客户对 excel 感到满意。我正在寻找一种方法来自动化整个过程，但不知道从哪里开始。我正在使用 Visual Studio Ultimate 2010 并拥有 SQL Server 标准版。是否有可能让一个应用程序抓取读取 excel 并将其放入数据库并在执行过程中进行检查或验证。然后分配主键并生成报表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:32:11.113

您需要从 MSDN 库中查看[Automating Excel 。](http://msdn.microsoft.com/en-us/library/ms178745%28v=vs.90%29.aspx)这将使您开始使用 Excel 端。然后只需在标准控制台应用程序中使用数据库并导入即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:51:59.737

好的，如何将 Excel 电子表格最终转换为 XML，然后将数据移动到您的数据库中，看看这个[LINK](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/b6e8a28c-6760-4e86-a1aa-e2ce9ec36380)和这个[LINK](http://www.sharpprogrammer.com/dotnet/how-to-read-excel-file-in-c-net/)以及这个[LINK](http://c-sharp-paradise.blogspot.com/2012/04/how-to-convert-excel-to-xml-in-cnet.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:09:14.353

这只是一个想法，并不是一个完整的开发解决方案，但您可以使用 OleDb 访问您的 excel 文件并读取其内容，就像它是一个数据库表一样。
然后由您决定连接到您的主数据库 (SqlServer) 并应用将一个数据源“合并”到另一个数据源所需的逻辑

```
DataTable myTable = new DataTable();    
string con = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=D:\temp\test.xls;" + 
              "Extended Properties='Excel 8.0;HDR=No;'";

using(OleDbConnection c = new OleDbConnection(con))
{
    c.Open();
    string selectString = "SELECT * FROM [Sheet1$]";
    using(OleDbCommand cmd1 = new OleDbCommand(selectString))
    {
        cmd1.Connection = c;
        using (OleDbDataReader myReader = cmd1.ExecuteReader())
        {
            myTable.Load(myReader);
        }
    }
} 
```

现在，第一个 excel 工作表文件中的所有数据都加载到数据表对象内的内存中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:41:37.710

如果您想在 C# 中工作，请使用 Microsoft.Office.Interop.Excel 库。如果您安装了 excel，您可以导入参考。[这](http://www.dotnetperls.com/excel)可能有用。对于数据库部分，我帮不了你。

# git - git diff 认为文件的最后一行在文件结束后被移动了？

> ID：11414392
> 
> 赞同：6
> 
> 时间：2012-07-10T13:29:28.227
> 
> 标签：git, line-endings

从 Github 克隆一个 git 存储库后，如果我打开一个文件，不做任何更改，然后保存文件，输出中会显示以下内容`git diff`：

```
-@import "sync.scss";
\ No newline at end of file
+@import "sync.scss"; 
```

据我了解，`\ No newline at end of file`应该在没有换行符时标记文件的结尾。这个差异是否意味着 git 认为最后一行已移至文件末尾之后？ **有没有办法避免这种情况？**我想为这个项目做出贡献，而不在我的提交中添加垃圾空白更改。

这似乎是行尾的问题。我相当有信心该文件最初是使用 Unix 行结尾保存在 Mac 上的。这与我使用的设置相同，所以我不确定是什么导致文档在保存时发生更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:40:49.727

*   为避免这种情况，请始终这样做`git add -p`，并且只选择相关的差异以避免提交不需要的更改。

*   并更改您的编辑器设置以匹配项目中使用的约定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T13:51:31.663

属于它上面的`\ No newline at end of file`行（意味着该行没有以 a 结尾`\n`）。您当前行的末尾似乎有一个换行符，这就是为什么您在其后看不到“无换行符”消息的原因；以及为什么会发生变化。

> 我想为这个项目做出贡献，而不在我的提交中添加垃圾空白更改。

（警告：以下个人意见）

**我建议您始终以换行符结束文件，尤其是在 unix/linux 环境中工作时**。可能这被某些人视为“垃圾”（请向项目维护人员询问他对此的看法），但是当使用 posix 工具时 - 从简单`cat`的开始 - 缺少的换行符充其量只会令人讨厌并且会中断脚本在最坏的情况下转换代码。

# javascript - Webkit javascript 调试器 - 可以同时打开控制台和脚本视图吗？

> ID：11414395
> 
> 赞同：0
> 
> 时间：2012-07-10T13:29:43.623
> 
> 标签：javascript, debugging, google-chrome, webkit

使用宽屏显示器，有足够的水平屏幕空间。在 webkit 调试器（chrome）中，我希望能够同时查看脚本窗口（单步执行代码时）和控制台窗口。

不幸的是，我无法弄清楚如何做到这一点 - 有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:34:35.583

Generally, the `ESC` key is bound to showing and hiding the console. If you are looking at another panel and hit `ESC` (or click the second-from-left icon in the toolbar row; it looks like a > with some lines next to it), that will layer the console over the panel that you are looking at.

I think that should allow you to run the script debugger more or less side-by-side with the console.

# c# - sqlite 抛出“字符串未被识别为有效日期时间”

> ID：11414399
> 
> 赞同：15
> 
> 时间：2012-07-10T13:29:53.670
> 
> 标签：c#, .net, database, sqlite, datetime-format

我正在使用 Sqlite 并在尝试回读一些测试数据时不断出错。例如，我创建了一个带有单个表和一些列的简单数据库，并用一些测试数据填充它，如下所示。

```
sqlite> .schema
CREATE TABLE "shows"(id integer primary key asc autoincrement, showName TEXT, guest TEXT, dateAired date, dateWatched date);

sqlite> select * from shows;
6|test show|test guest 1|2012.05.01|2012.07.10
7|test show|test guest 2|2012.05.02|2012.07.10
8|test show|test guest 4|2012.05.04|2012.07.10 
```

我正在使用[此处](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)提供的 System.Data.Sqlite 库，但在尝试读取日期列时它一直给我一个错误。我尝试将日期设置为 dd-MM-yyyy 格式，但仍然收到错误消息“字符串未被识别为有效日期时间”。我尝试使用 DateTime.Parse 或将其转换为 datetime 或只是 ToString()'ing 来查看会发生什么，但我一直收到同样的错误。我可以很好地阅读文本字段，但无法阅读日期字段。

下面给出了我的 C# 代码

```
var sqliteConn = new SQLiteConnection("Data Source=data/shows.db;Version=3;New=False;Compress=True");
sqliteConn.Open();
SQLiteCommand cmd = new SQLiteCommand(sqliteConn);
cmd.CommandText = "select * from shows";

SQLiteDataReader reader = cmd.ExecuteReader( );
while (reader.Read( ))
    {
    var showName = reader["showName"];
    // This is where it keeps giving me an error.
    // I have tried various things such as DateTime.Parse
    var airedDate = DateTime.ParseExact("yyyy.MM.dd", reader["dateAired"].ToString(), new CultureInfo("en-AU"));
     }
reader.Close( ); 
```

任何帮助将不胜感激。

问候，

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-10-23T21:13:42.687

基于[此线程](http://system.data.sqlite.org/index.html/info/f4db9f273a)中的讨论，我决定使用“datetimeformat”参数构造我的连接字符串，并解决了“字符串未被识别为有效日期时间”的问题。

我的示例连接字符串：

```
source=<source to db file>;version=3;new=False;datetimeformat=CurrentCulture 
```

此功能于 2013 年 7 月 8 日在版本 1.0.87.0 中发布（请参阅[发行说明](http://system.data.sqlite.org/index.html/doc/trunk/www/news.wiki)）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-14T16:22:52.797

这个线程可能有点旧，但我遇到了同样的问题并找到了一个“解决方案”。

似乎 System.Data.SQLite 没有`DateTime`正确处理 s 。我尝试`DateTime.ParseExact`并在我的数据库中给出了格式（mm/dd/yyyy），但我注意到它在调用日期列时抛出了一个`ToString()`错误`DataReader`。这似乎很奇怪，因为我并没有尝试将它放入 a`Date`中，而是将其读取为`String`.

因此，我返回到从数据库调用的视图，并将所有日期包装在一个`CAST as nvarchar(10)`. 这样，数据库将返回字符串而不是日期。现在，`DateTime.Parse`作品就好了！

我将在视图上使用触发器将字符串/日期拉回并插入/更新基础表，从而使所有转换都发生在数据库中，而不是 System.Data.SQLite。

有一个新版本的 System.Data.SQLite 将于 2012 年 12 月的某个时候推出，我希望能解决这个问题！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-13T06:21:10.920

```
select strftime('%m/%d/%Y',substr(colName,0,20)) from tablename 
```

这会起作用，我已经测试过了，因为 sqlite 中的内置函数将字符串转换为日期时间格式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-27T11:46:12.560

更改连接字符串对我不起作用，但触发想法帮助我以这种方式使用它

`"Select Cast("Coulname" as nvarchar(20)) From "Table Name"`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-08-25T07:55:37.183

> 错误“字符串未被识别为有效的日期时间。”

将您的系统日期时间格式更改为您的数据库文件日期时间格式。

我希望它对你有帮助......

# css - ul 中的 CSS 左边距不正确

> ID：11414400
> 
> 赞同：0
> 
> 时间：2012-07-10T13:29:54.007
> 
> 标签：css

我的标签列表中出现了这个奇怪的左边距。

我没有提供任何保证金。它从何而来 ？

这是屏幕。不正确的区域在红色框中标出。

谢谢

![在此处输入图像描述](../Images/2a6290130ac5754cfe5206ff8d329cb8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:31:36.377

除非您已明确删除它，否则该边距来自用作浏览器默认设置的用户代理样式表。

如果您希望将其删除，您可能需要调查[CSS 重置样式表](http://meyerweb.com/eric/tools/css/reset/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:31:41.650

这是因为默认浏览器样式表。

尝试：

```
ul {
    margin:0;
    padding:0;
} 
```

或更具体

```
#tabs_container ul.tabz {
    margin:0;
    padding:0;
} 
```

或更慷慨

```
/* Basic Reset; remove margin and padding for every element */
* {
    margin:0;
    padding:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:37:30.230

您应该始终使用 css 重置来在所有浏览器上获得良好的结果。例如：

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# javascript - 如何更改 div 容器的类？

> ID：11414401
> 
> 赞同：1
> 
> 时间：2012-07-10T13:29:56.803
> 
> 标签：javascript, jquery

我有一个新的分页问题：

```
<br><b>Page:</b><br/>
<?php
  for($i=0; $i<$count; $i++)
  {
    if ($i==0)
    {
      echo "<div class='selected_page_button'>".($i+1)." "."</div>";
    }
    else
    {
      echo "<div class='page_button'>".($i+1)." "."</div>";
    }
  }
?> 
```

CSS 代码：

```
.page_button {
  height:20px;
  width:15px;
  padding-left:4px;
  padding-right:4px;
  display:block;
  float:left;
  border:2px solid #000000;
  margin-right:4px;
  text-decoration:none;
  text-align:center;
  cursor: pointer;
}

.selected_page_button {
  color : #FFFFFF;
  height:20px;
  width:15px;
  padding-left:4px;
  padding-right:4px;
  display:block;
  float:left;
  margin-right:4px;
  text-decoration:none;
  text-align:center;
  background:#0088cc;
  border:2px solid #000000;
} 
```

以及更改容器类的代码：

```
$(".page_button").click(function () {
  $(".selected_page_button").attr("class", "page_button");
  $(this).attr("class", "selected_page_button");
}); 
```

它适用于所有容器，无需先。创建我的页面时，选择了第一页。当我点击“2”时，“1”很简单，“2”被选中。所有没有“1”的容器也是如此：如果我点击“2”（或其他），那么我不能先点击！“1”会改变它的视图但不会改变行为，因为简单容器是可点击的，而选定的容器是不可点击的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:34:57.110

这是因为您只选择`$(".page_button")`了开始时具有此类的那些，并且因为您稍后设置了 .page_button ，因此不会执行处理程序。

你会想要使用'live'，或者在较新的jQuery版本中，'on'函数

```
$(".page_button").on("click", function(event){
    $(".selected_page_button").attr("class", "page_button");
    $(this).attr("class", "selected_page_button");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:39:30.543

怎么样：

```
$(".page_button").live("click",function () {
    $(".selected_page_button").removeClass("selected_page_button").addClass("page_button");
    $(this).removeClass("page_button").addClass("selected_page_button");
}); 
```

但是，我建议稍微重写一下，这样您就有两个类 .page_button 和 .selected 或其他一些命名，其中 div 始终具有类 .page_button 并且选定的类具有两个类 .page_button.selected。然后可以应用以下内容。

```
$(".page_button").live("click",function(){
    $(".page_button").removeClass("selected");
    $(this).addClass("selected");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:47:57.310

jcubic 对他的解决方案是正确的，但不是他的实施。您需要确保该事件绑定到所有 page_buttons、页面加载时存在的以及稍后出现的。

jQuery 的 'on' 和 'live' 函数可以做到这一点。这些函数将侦听器绑定到容器元素并等待事件冒泡到它们，这样即使稍后添加了 page_button，事件仍然会命中侦听容器。

以下是这些功能的正确实现：

```
$('#paginationLinkContainer').on('click','.page_button',function() {
    $('.selected_page_button').attr('class','page_button');
    $(this).attr('class','selected_page_button');
}); 
```

在此块中，侦听器绑定到容器（您可能需要将其添加到标记中）和过滤器，以便它仅在事件源从“.page_button”冒泡时执行。

对于旧版本的 jQuery

```
$('.page_button').live('click',function() {
    $('.selected_page_button').attr('class','page_button');
    $(this).attr('class','selected_page_button');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:56:49.900

这是我的代码以获得更好的解决方案：

```
<br><b>Page:</b><br/>
<?php
  for($i=0; $i<$count; $i++)
  {
    if ($i==0)
    {
      echo "<div class='page_button selected'>".($i+1)." "."</div>";
    }
    else
    {
      echo "<div class='page_button'>".($i+1)." "."</div>";
    }
  }
?> 
```

**CSS 代码：**

```
.page_button {
  height:20px;
  width:15px;
  padding-left:4px;
  padding-right:4px;
  display:block;
  float:left;
  border:2px solid #000000;
  margin-right:4px;
  text-decoration:none;
  text-align:center;
  cursor: pointer;
}

.selected {
  color : #FFFFFF;
} 
```

以及更改容器类的代码：

```
$(".page_button").click(function () {
  $(".page_button").removeClass("selected");
  $(this).addClass("selected");
}); 
```

# iphone - ASP.Net MVC 4 未在 iPhone 独立应用程序上使用移动视图（添加到主屏幕后）

> ID：11414405
> 
> 赞同：0
> 
> 时间：2012-07-10T13:30:07.220
> 
> 标签：iphone, asp.net-mvc, web-applications, iphone-standalone-web-app

我有一个在 MVC 4 中构建的网站，它同时具有 Web 和移动视图。当有人通过手机访问该网站时，我在我的视图上使用 .Mobile 扩展来呈现移动视图，效果很好。当我从 iPhone 访问该网站时，它会检测到浏览器并正确显示移动视图。

但是，如果我将应用程序添加到主屏幕并通过单击主屏幕图标导航到该站点，MVC 将使用标准 Web 视图。

我只能假设当 Safari 在独立/全屏模式下使用时，它会通过 MVC 无法识别的不同标头发送。（旁注：它似乎也忽略了以前通过浏览器正常访问站点时设置的自动登录 cookie）。

为了让 MVC 识别它仍然是移动浏览器并呈现移动视图，我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:11:39.477

让它工作的简单（如果不是特别优雅）的方法是在从主屏幕图标启动时输出 useragent 字符串......然后手动覆盖以确保该 useragent 或其某些部分像这个问题一样加载移动设备显示如何做 ：

[ASP.NET MVC 4 移动功能](https://stackoverflow.com/questions/9614576/asp-net-mvc-4-mobile-features)

# dynamics-crm - 报告错误。报告无法在 CRM 2011 中显示（rsProcessingaborted）

> ID：11414407
> 
> 赞同：1
> 
> 时间：2012-07-10T13:30:18.213
> 
> 标签：dynamics-crm, dynamics-crm-2011, reporting-services

我创建了一个 SSRS 报告，然后将其部署在 CRM 上。现在，当我打开它时，出现类似报告错误之类的错误。报告无法显示（rsProcessingaborted）...我已经检查了报告工作正常，但问题出现在我将其部署在 CRM 上...请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:02:52.940

我在将报告部署到 CRM 时遇到了几个不同的问题。我打的第一个是尝试使用“共享连接”。CRM 希望在您上传报告时替换您的连接信息，但如果报告设置为共享连接，它似乎无法替换。

看看[我的 SSRS 故障排除步骤](http://edgewaters.blogspot.com/2011/01/troubleshooting-crm-ssrs-errors.html)，看看它们是否有帮助。您应该能够报告更详细的错误消息。

# python - Tastypie 资源未显示新创建的对象（日期过滤问题）

> ID：11414410
> 
> 赞同：2
> 
> 时间：2012-07-10T13:30:26.683
> 
> 标签：python, django, tastypie

我有一个带有自定义管理器的模型，目的是过滤“活动”对象，即具有`start_date`低于当前时间和`end_date`大于当前时间的对象。

这是我的相关部分`models.py`：

```
from django.utils.timezone import now

class ActiveObjectManager(models.Manager):
    def get_query_set(self):
        return super(ActiveObjectManager, self).get_query_set().\
            filter(start_date__lt=now(), end_date__gt=now())

class Object(models.Model):
    start_date = models.DateTimeField(_('Service start date'), \
        auto_now_add=False, null=False, blank=False)
    end_date = models.DateTimeField(_('Service end date'), auto_now_add=False, \
        null=False, blank=False)
    ...
    objects = models.Manager()
    objects_active = ActiveObjectManager() 
```

这个管理器在整个应用程序和 Django shell 中都能很好地工作。但是，如果我在管理界面中创建一个对象，并将其设置`start_date`为“现在”选择器，那么美味派提供的 API 不会显示这个新创建的对象（尽管它确实显示了较旧的对象）。管理员列表正确地将新对象显示为活动的。

这是我的相关部分`api.py`：

```
from app.models import Object

class ActiveObjectResource(ModelResource):
    modified = fields.BooleanField(readonly=True)

    class Meta:
        resource_name = 'activeobjects'
        queryset = Object.objects_active.all() 
```

我强烈怀疑，由于类`ActiveObjectResource`被解释一次，这两个`now()`调用只执行一次，即 API 子系统总是`filter()`使用相同的值`start_date__lt`和`end_date__gt`参数调用（`now()`在我运行后立即返回的值`manage.py runserver`） .

即使我像这样在资源类中进行过滤，这个问题仍然存在：

```
class ActiveObjectResource(ModelResource):
    ...
    class Meta:
        queryset = Object.objects.\
            filter(start_date__lt=now(), end_date__gt=now()) 
```

此外，如果我通过这样的可调用对象，问题仍然存在：

```
class ActiveObjectResource(ModelResource):
    ...
    class Meta:
        queryset = Object.objects.filter(start_date__lt=now, end_date__gt=now) 
```

有没有办法可以重写`ActiveObjectManager`或`ActiveObjectResource`克服这个问题？

**更新：** 好的，看来我需要重写`get_object_list`以实现[对 queryset 的每个请求的更改](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#per-request-alterations-to-the-queryset)，例如：

```
class ActiveObjectResource(ModelResource):
    class Meta:
        queryset = Object.objects.all()

    def get_object_list(self, request):
        return super(MyResource, self).get_object_list(request).\
            filter(start_date__lt=now, end_date__gt=now) 
```

但是当我已经有一个模型级别的自定义管理器为我完成这项工作时，我讨厌重复这个逻辑。

所以我的问题是：**如何在我的内部使用我的自定义模型管理器`ModelResource`？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:38:09.567

好吧，关于`ModelResource.Meta`. 这是[来自美味派文档的摘录](http://django-tastypie.readthedocs.org/en/latest/resources.html#queryset)：

> 如果您在其中放置任何可调用对象，它们只会被评估一次（当 Meta 类被实例化时）。这尤其会影响与日期/时间相关的事物。请参阅 :ref:cookbook 以了解解决此问题的方法。

[就](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#per-request-alterations-to-the-queryset)这样：

> 一种常见的模式是需要通过更改每个请求的内容来限制查询集，**例如 date/time**。您可以通过轻轻修改 get_object_list 来完成此操作

所以，是的，似乎实现你想要做的事情的唯一方法就是声明`get_object_list`.

**新更新：**因为`get_object_list`只是一个`return self._meta.queryset._clone()`，尝试这样的事情：

```
class ActiveObjectResource(ModelResource):
    class Meta:
        queryset = Object.objects_active.all()

    def get_object_list(self, request):
        return Object.objects_active.all() 
```

# jquery - jQuery：如何选择已单击相应按钮的表单元素？

> ID：11414412
> 
> 赞同：0
> 
> 时间：2012-07-10T13:30:35.377
> 
> 标签：jquery

我在这里有一个 jsfiddle - [http://jsfiddle.net/9kKXX/20/](http://jsfiddle.net/9kKXX/20/)

**我的 jQuery 函数**

```
$(function() {
    $('form input[type="text"]').live('keyup', function() {
        var val = $.trim(this.value);
        $('form .create-playlist-button').prop('disabled', val.length == 0).click(function(){
            alert('ALERT TITLE HERE');
          });
    });
});​ 
```

**要求**

*   点击下拉菜单 -> 输入文本 -> 点击创建
    我想选择相应的表单元素，如标题、视图等。现在没有发生这种情况

*   当我单击创建时，它会一次又一次地发出警报，我该如何避免这种情况？

我对 jQuery 很陌生，阅读了几个地方，但没有找到解决方案

谢谢

**更新**
**------------**

杰夫的回答在小提琴中起作用，但是当我把它放在我的代码上时，点击它什么也没做。我把整个代码示例放在这个小提琴中 - [http://jsfiddle.net/rDe9V/](http://jsfiddle.net/rDe9V/) ，请帮助我理解这里出了什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:44:13.877

这里发生了一些事情。[这是最后的小提琴](http://jsfiddle.net/vueTC/1/)。

**首先，****每次**触发 key up 事件时，您都在绑定 click 事件。这意味着警报将针对播放列表标题中的每个角色至少触发一次。即使文档准备好，您也需要绑定单击。

```
$(function() {
    $('form input[type="text"]').live('keyup', function() {
        var val = $.trim(this.value);
        $('form .create-playlist-button').prop('disabled', val.length == 0)
    });
    $('form .create-playlist-button').click(function(){
        alert('ALERT TITLE HERE');
    });
});​ 
```

**其次**，您正在使用重复的 ID。页面上有很多元素

```
<div id="video-detail"> 
```

ID 必须是唯一的。您应该改为将这些更改为类。

```
<div class="video-detail"> 
```

**第三**，您可以通过向上遍历 DOM 树到单击按钮和标题之间的共同祖先来访问标题，然后向下遍历到标题。假设您将 ID 更改为类，则如下所示：

```
$('form .create-playlist-button').click(function(e){
    var title = $(e.target).closest('.video-detail').find('.title').text();
    alert(title);
}); 
```

你可以去[我的小提琴看看最终的产品](http://jsfiddle.net/vueTC/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:15:55.497

由于我的声誉，我无法发表评论，但新问题是您正在搜索 a`class`而不是`id`.

你的代码：

```
$('.item').live('click', function(){
    // alert(this.id);
    var url = $('#video-frame').attr('src');
    var new_url = url.replace(/embed\/[\w -]*/g, 'embed/' + this.id);
    $('#video-frame').attr('src', new_url);
}); 
```

正确的代码（第一行）：

```
$('#item').live('click', function(){
    // alert(this.id);
    var url = $('#video-frame').attr('src');
    var new_url = url.replace(/embed\/[\w -]*/g, 'embed/' + this.id);
    $('#video-frame').attr('src', new_url);
}); 
```

# java - 使用 EclipseLink 在 Oracle 上执行查询时出现奇怪的行为

> ID：11414415
> 
> 赞同：0
> 
> 时间：2012-07-10T13:30:44.607
> 
> 标签：java, oracle, jpa, eclipselink, named-query

我创建了一个命名查询，如下所示：

```
SELECT o
FROM TableName1Entity o , TableName2Entity a
WHERE o.field1 = a.field4
AND a.field5 = :param1 
```

即转换为以下 sql：

```
SELECT TABLE_NAME1.FIELD1, TABLE_NAME1.FIELD2, TABLE_NAME1.FIELD3
FROM TABLE_NAME2 t0, TABLE_NAME1 t1
WHERE ((t0.FIELD4 = t1.FIELD1)
AND (t0.FIELD5 = ?)); 
```

它返回`ORA-00904: "TABLE_NAME1"."FIELD3": invalid identifier`

但是当我手动修改如下时它可以工作：（它们都按预期工作）

```
SELECT t1.FIELD1, t1.FIELD2, t1.FIELD3
FROM TABLE_NAME2 t0, TABLE_NAME1 t1
WHERE ((t0.FIELD4 = t1.FIELD1)
AND (t0.FIELD5 = ?));

SELECT TABLE_NAME1.FIELD1, TABLE_NAME1.FIELD2, TABLE_NAME1.FIELD3
FROM TABLE_NAME2 t0, TABLE_NAME1
WHERE ((t0.FIELD4 = TABLE_NAME1.FIELD1)
AND (t0.FIELD5 = ?));

SELECT FIELD1, FIELD2, FIELD3
FROM TABLE_NAME2 t0, TABLE_NAME1 t1
WHERE ((t0.FIELD4 = t1.FIELD1) AND (t0.FIELD5 = ?));

SELECT FIELD1, FIELD2, FIELD3
FROM TABLE_NAME2 t0, TABLE_NAME1
WHERE ((t0.FIELD4 = TABLE_NAME1.FIELD1)
AND (t0.FIELD5 = ?)); 
```

**PS.：**出于安全原因，我不能给出表或字段名。

**问题是：**当表名与标签一起显式设置时，查询不起作用。

> 请不要通过更改命名查询来提供替代解决方案，因为它应该可以按原样进行，并且更改命名查询不是一种选择。除非它真的有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:35:47.377

您所做的称为别名：表`TABLE_NAME`必须`label`在查询的选择部分中引用，因为它是查询的其余部分命名（和查看）表的方式。

所以你必须写这样的东西：

```
SELECT label.FIELD_NAME FROM TABLE_NAME label; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T14:41:39.233

将 EclipseLink 的版本从**1.1.1**更改为**2.0.0**

# java - Java JButton - MouseMotionListener (MouseMoved) 鼠标悬停效果

> ID：11414416
> 
> 赞同：1
> 
> 时间：2012-07-10T13:30:47.867
> 
> 标签：java, swing, mouseover, jbutton

我正在尝试实现 MouseOver 效果，就像它在 Java 中的 JavaScript 中用于 JButton 一样。我添加了一个 MouseMotionListener 并且它起作用了。如果我的鼠标触摸第一个按钮，我确实想设置 2 个其他按钮可见。所以这很完美..但如果鼠标不在按钮上，我不知道如何处理。我想在鼠标离开按钮后将按钮设置为 false

这是我的代码：

```
mouseover.addMouseMotionListener(new MouseMotionListener() {
    public void mouseDragged(MouseEvent arg0) {}
    public void mouseMoved(MouseEvent arg0) {

        del.setVisible(true);
        addone.setVisible(true);

    } 
```

mouseover 是我想听的按钮。del 是另一个我想设置可见插件的按钮

对不起我的英语不太好：P

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:47:17.173

也许您想检查`setRolloverIcon()`,`setRolloverSelectedIcon()`方法，而不是使用`MouseEvent`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:35:18.953

您正在寻找一个 MouseListener，专门实现 mouseExited。

[http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

您可能希望使用 MouseAdapter 以避免被迫实现 MouseListener 的所有方法。MouseAdapter 只是一个实现鼠标监听接口的类。

[http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseAdapter.html](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseAdapter.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T13:34:19.623

Instead of using a `MouseMotionListener`. Use a `MouseListener`, this class has two methods called `mouseEntered()` and `mouseExited()` these should allow you to make the necessary changes as the mouse comes in and out of the button.

[Here](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html) is a brief tutorial on MouseListeners

# maven - Maven：如果未找到人工制品，则警告如果依赖关系

> ID：11414417
> 
> 赞同：0
> 
> 时间：2012-07-10T13:30:49.287
> 
> 标签：maven, maven-2

如果在某个存储库中找不到某些人工制品，我可以向 Maven 添加选项以说警告。让我有

```
<repositories>
      <repository>
         <id>main</id>
         <name>main-repo</name>
         <url>http://repourl</url>
         <layout>default</layout>
         <releases>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
            <checksumPolicy>warn</checksumPolicy>
         </releases>
         <snapshots>
            <enabled>true</enabled>
            <updatePolicy>always</updatePolicy>
            <checksumPolicy>warn</checksumPolicy>
         </snapshots>
      </repository>
   </repositories> 
```

但是 Maven 在 repo 中没有找到一些依赖的依赖。然后他在日志中说警告。我可以做吗？

我公司的回购资源“org.apache.cxf:cxf-rt-frontend-jaxrs:pom:2.5.4”中有一个。但我没有依赖。此资源已复制到我的 JAR 文件中。但是没有一个 'cxf-rt-frontend-jaxrs' 的依赖没有被安装。在日志中

```
[INFO] Unable to find resource 'org.apache.cxf:cxf-rt-frontend-jaxrs:pom:2.5.4' in repository MAIN (http://url/)
Downloading: http://url//org/apache/cxf/cxf-rt-frontend-jaxrs/2.5.4/cxf-rt-frontend-jaxrs-2.5.4.pom 
```

但是没有关于**cxf-rt-frontend-jaxrs依赖的警告**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:38:28.147

cxf-rt-frontend-jaxrs 的依赖关系在 org.apache.cxf:cxf-rt-frontend-jaxrs:pom:2.5.4 工件中声明，Maven 无法找到。所以，回答你的问题是它不能完成。

# jvm - Java程序执行后的内部过程

> ID：11414421
> 
> 赞同：1
> 
> 时间：2012-07-10T13:31:02.243
> 
> 标签：jvm, java

我想知道执行 java 程序时发生的逐步内部过程。

例如，如果我们在命令提示符下进行**java 测试。**
调用了哪些流程？
JVM是如何实例化的？直到它打印输出..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-19T06:08:36.140

内部java代码的执行将分为以下步骤：-

```
Execution Command -->java Test
   1.Start JVM
   2.Create and Start Main Thread
   3.Look at Test.class File-->Main Thread is responsible for checking if not found Runtime Exception will occur saying Exception in Thread Main
   4.Load Test.class file
   5.Execute Main method
   6.Unload Test.class
   7.Terminate Main Thread
   8.Shut down JVM 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-14T15:25:11.573

我不知道，但是，我理解的概念，我会向你解释同样的......

最初，当您输入命令**java abc**（文件名是 abc.java）来运行程序时，程序将在您输入命令（cmd 中的 JAVA）时搜索 Java Runtime Environment ....it表示您在环境变量中设置的路径......

然后JVM被激活.......JVM会调用类加载器......然后类加载器会去操作系统获取程序执行的权限...... ..一旦操作系统允许......类加载器将检查文件名和程序名............（你知道类名和文件名应该相同）...... .如果一切顺利............程序已加载到内存中......:)

干杯:)

尚卡尔·萨伦克

# c# - 无法向 Google 电子表格添加行

> ID：11414422
> 
> 赞同：2
> 
> 时间：2012-07-10T13:31:03.507
> 
> 标签：c#, google-sheets

我能够打开工作表并从标题中读取单元格。Google 电子表格中的第一行是标题，我在 Google 电子表格中手动添加了“Name”、“my-val1”、“my-val2”、“my-val3”、“Other”。

这是相关的谷歌文档：

[https://developers.google.com/google-apps/spreadsheets/#adding_a_list_row](https://developers.google.com/google-apps/spreadsheets/#adding_a_list_row)

我正在尝试在工作表中添加一行，但得到了相当普遍的错误“远程服务器返回错误：（400）错误请求。” 知道我做错了什么吗？

这是代码：

```
AtomLink listFeedLink = worksheet.Links.FindService(GDataSpreadsheetsNameTable.ListRel, null);
ListQuery listQuery = new ListQuery(listFeedLink.HRef.ToString());
ListFeed listFeed = myService.Query(listQuery);

ListEntry row = new ListEntry();

row.Elements.Add(new ListEntry.Custom() { LocalName = "Name", Value = "Joe" });
row.Elements.Add(new ListEntry.Custom() { LocalName = "my-val1", Value = "Smith" });
row.Elements.Add(new ListEntry.Custom() { LocalName = "my-val2", Value = "26" });
row.Elements.Add(new ListEntry.Custom() { LocalName = "my-val3", Value = "176" });
row.Elements.Add(new ListEntry.Custom() { LocalName = "Other", Value = "176" });

myService.Insert(listFeed, row); 
```

这是错误消息：

```
Google.GData.Client.GDataRequestException: Execution of request failed: https://spreadsheets.google.com/feeds/list/tlb-JYE8eZbWTRPCoqugCqw/od6/private/full ---> System.Net.WebException: The remote server returned an error: (400) Bad Request.
   at System.Net.HttpWebRequest.GetResponse()
   at Google.GData.Client.GDataRequest.Execute()
   --- End of inner exception stack trace ---
   at Google.GData.Client.GDataRequest.Execute()
   at Google.GData.Client.GDataGAuthRequest.Execute(Int32 retryCounter)
   at Google.GData.Client.GDataGAuthRequest.Execute()
   at Google.GData.Client.Service.EntrySend(Uri feedUri, AtomBase baseEntry, GDataRequestType type, AsyncSendData data)
   at Google.GData.Client.Service.Insert(Uri feedUri, AtomEntry newEntry, AsyncSendData data)
   at Google.GData.Client.Service.Insert[TEntry](Uri feedUri, TEntry entry)
   at Google.GData.Client.Service.Google.GData.Client.IService.Insert(AtomFeed feed, AtomEntry entry)
   at Google.GData.Client.Service.Insert[TEntry](AtomFeed feed, TEntry entry)
   at DesktopControl.GoogleSpreadsheet.addRow() in C:\Users\mark\Documents\Visual Studio 2008\Projects\DSCON\DSCON\GoogleSpreadsheet.cs:line 248} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:55:38.637

好的，根据[这个链接](https://stackoverflow.com/questions/7455239/error-inserting-row-in-google-spreadsheet-using-zend-gdata)，列名必须用小写字母表示，代码中不能有空格。更改代码后插入该行：

```
row.Elements.Add(new ListEntry.Custom() { LocalName = "name", Value = "Joe" }); // "Name" changed to "name"
row.Elements.Add(new ListEntry.Custom() { LocalName = "my-val1", Value = "Smith" });
row.Elements.Add(new ListEntry.Custom() { LocalName = "my-val2", Value = "26" });
row.Elements.Add(new ListEntry.Custom() { LocalName = "my-val3", Value = "176" });
row.Elements.Add(new ListEntry.Custom() { LocalName = "other", Value = "176" }); // "Other" changed to "other" 
```

# javascript - 如果 a 包含“a”，则将背景设为红色，但 each() 会变慢

> ID：11414427
> 
> 赞同：5
> 
> 时间：2012-07-10T13:31:15.617
> 
> 标签：javascript, jquery

您如何编写它以使其运行得更快。看起来因为我正在使用 each() 它正在减慢它的速度。

我可以使用过滤器（）吗？

```
 $("#X tr").each(function () {       
     if ($(this).find("table td:eq(1)").text() == "a") {
         $(this).css("background":"red");    
  }

});   

     <table id = "X">
        <tr >
        <td>a</td>
        <td>b</td>
        <td>c</td>
        </tr>
        <tr >
        <td></td>
        <td></td>
        <td></td>
        </tr>
        ...
        <tr >
        <td>a</td>
        <td>b</td>
        <td>c</td>
        </tr>
   </table> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T13:32:50.240

我建议：

```
$('td:contains("a")').closest('tr').css('background-color','red'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bQ3EC/)。

或者，影响*所有*祖先`tr`元素：

```
$('td:contains("a")').parents('tr').css('background-color','red'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bQ3EC/1/)。

或者影响所有`tr`具有后代的元素（无论嵌套多么深）：

```
$('tr').filter(
    function(){
        return $(this).find('td:contains("a")').length;
    }).css('background-color','red'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bQ3EC/2/)。

添加了一个功能，`lookAt()`可以用来代替：

```
function lookAt(haystack, needle) {
    if (!haystack) {
        return false;
    }
    else {
        needle = needle ? needle : 'a';
        for (var i = 0, len = haystack.childNodes.length; i < len; i++) {
            var cur = haystack.childNodes[i];
            if (cur.nodeType == 3 && cur.nodeValue.indexOf(needle) > -1){
                return true;
            }
            else if (i == (len-1)) {
                return false;
            }
        }
    }
}

$('#table td').filter(
    function() {
        return lookAt(this);
    }).css('background-color', 'red');​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bQ3EC/3/)

[JS Perf 测试检查`lookAt()`函数方法与`return $(this).is(':contains("a")')`基于 Sizzle 的方法](http://jsperf.com/contains-versus-a-homemade-function)。

作为参考，为了进行更仔细的比较，JS Perf jQuery 测试如下：

```
$('#table td').filter(
    function() {
        return $(this).is(':contains("a")')
    }).css('background-color', 'red');​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bQ3EC/4/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T13:33:28.153

您可以使用`:contains`选择器：http: [//jsfiddle.net/Af6Nz/1/](http://jsfiddle.net/Af6Nz/1/)。

```
​$("#X tr:contains('a')").css("background-color", "red");​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T13:32:40.573

使用[包含](http://api.jquery.com/contains-selector/)和`parent`（回到`tr`我们想要着色的那个）：

```
$(this).find('td:eq(0):contains("a")').parent().css("background","red"); 
```

或使用[有](http://api.jquery.com/has-selector/)：

```
$(this).find('tr:has(td:eq(0):contains("a"))').css("background","red"); 
```

如果您不需要`eq`条件，请使用

```
$(this).find('td:contains("a")').parent().css("background","red"); 
```

请记住，[eq](http://api.jquery.com/eq-selector/)是基于 0 的（因为您的测试用例不涉及 1 而不是 0 的匹配元素）。

演示：http: [//jsfiddle.net/KRqQN/](http://jsfiddle.net/KRqQN/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T14:23:39.747

如果您担心性能，以下内容可能会有所帮助。

```
var getText = (function() {
  var div = document.createElement('div');

  if (typeof div.textContent == 'string') {
    return function (el) {
      return el.textContent;
    };

  } else if (typeof div.innerText == 'string') {
    return function (el) {
      return el.innerText;
    };
  }
}());

function foo(table) {
  var row, rows = table.rows;
  var i = rows.length;
  var re = /a/;

  while (i--) {
    row = rows[i];

    if (re.test(getText(row))) {
      row.style.backgroundColor = 'red';
    }
  }
} 
```

# networking - 以通用方式设置维护 URL

> ID：11414430
> 
> 赞同：1
> 
> 时间：2012-07-10T13:31:21.103
> 
> 标签：networking, dns

假设我有一个通常在地址 www.mywebsite.com 访问的网站。

现在假设网站完全关闭（认为服务器已经融化）。我希望尝试访问 www.mywebsite.com 的用户最终访问另一台服务器上的维护 URL，而不是 404。

这是否可能很容易而无需通过调度程序/负载平衡器路由所有流量？

我可以想象这样的事情：

当默认服务器为 UP 时，流量如下：

[用户]<---->[www.mywebsite.com]<---->[调度员]<---->[默认服务器]

当默认服务器关闭时，流量如下：

[用户]<---->[www.mywebsite.com]<---->[调度员]<---->[维护服务器]

[DISPATCHER] 确定将流量路由到哪里。问题是在这种情况下， *所有*流量都通过 [DISPATCHER]。我可以让第一个连接通过调度程序，然后，如果默认服务器启动，流量直接从用户到默认服务器？（例如每 10 - 15 分钟检查一次）

[USER]<---->[www.mywebsite.com]<-------->[DEFAULT SERVER] 第一次连接成功后

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:09:19.143

*不幸的是，也许最实际的解决办法就是放弃。**直到浏览器最终添加对 SRV 记录的支持......***

您可以使用动态 DNS 实现您想要的 - 在“维护服务器”上设置一些监控脚本，以检查您的网站是否已关闭，如果是，请更新您网站的 DNS 并将其指向维护服务器。这种方法有其自身的问题，其中最大的问题是任何监控都可能产生误报，因此您的用户将在站点实际运行时看到维护页面。

另一种可能的方法（甚至更糟） - 例如，让 www.example.com 指向您的调度服务器，而 www2.example.com - 指向您的主服务器。然后调度程序将 HTTP 重定向所有传入的请求到 www2.example.com。

*但是当你的调度员*融化时你会怎么做？- 在尝试处理一个故障点时，您只是添加了另一个故障点。

也许在一些 javascript 中处理所有页面链接是实用的，它将首先检查服务器是否启动，然后才跟随链接。这种方法虽然需要一些脚本，但至少在您的服务器关闭而用户已经在您的站点上时提供最佳结果。但对于第一次进入该网站的人来说，它没有任何帮助。

***如果只有浏览器会支持 SRV 记录....***

# php - 一种随机数对生成算法

> ID：11414438
> 
> 赞同：-5
> 
> 时间：2012-07-10T13:31:58.320
> 
> 标签：php, algorithm, random

所以我正在寻找一个程序，它可以从给定的一组键中生成一对随机值。这里的关键思想是找到最高程度的分歧和最小的可重复性。

**输入：**键数组，systemtime() *//因为大多数随机函数使用系统时间作为参数* **输出：**必须返回给调用函数的两个键

**generatepair(arrayofkeys[], systemtime())**

关键要求是最小的可重复性。最好的情况是不应该再次生成一次生成的对，除非这样的组合是不可能的。此外，还有一个全局数据存储包含所有先前生成的对，以及永远无法生成的禁止对。但数据独立性将受到高度赞赏。

此外，如果该信息可能有用或有限制，我将使用 PHP 进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:49:21.373

首先，要实现“最佳情况”的可重复性，您可以简单地从 arrayofkeys 中删除这对数字以避免它们再次重复。如果你不希望这种情况发生，你并不是真的纯粹随机地生成你的数字。

要仅在特定范围内生成数字，请使用 rand(x,y) 其中 x 和 y 是您的限制。您可以通过执行 min(arrayofkeys) 和 max(arrayofkeys) 从您的 arrayofkeys 中获取它们。

# html - 表格特殊单元格间距

> ID：11414442
> 
> 赞同：0
> 
> 时间：2012-07-10T13:32:17.343
> 
> 标签：html, css, html-table

我有一个`table`我不想设置`padding`&/或`margin`在每个`td`单元格之间应用一些间距，第一个答案是使用`CellSpacing`和/或`CellPadding`属性`table`但是当我使用这些属性时，它们会在每一侧应用空间（即顶部、底部、左侧和右侧）但我只想在顶部和底部应用空间。

我的问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:42:37.823

使用空行作为间距

请参阅下面的示例

```
 <table class="style1">
        <tr style="height: 20px;">
            <td>
                sfgefgfeg</td>
            <td>
                &sfgefgfeg;</td>
            <td>
                &sfgefgfeg;</td>
        </tr>
        <tr style="height: 5px;" >
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
        </tr>
        <tr style="height: 20px;">
            <td>
                &sfgefgfeg;</td>
            <td>
                &sfgefgfeg;</td>
            <td>
                &sfgefgfeg;</td>
        </tr>
        <tr style="height: 20px;">
            <td>
                &sfgefgfeg;</td>
            <td>
                &sfgefgfeg;</td>
            <td>
                &sfgefgfeg;</td>
        </tr>
    </table> 
```

这里添加了高度为 5px 的行作为间距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:47:36.720

您可以在 TD 元素上使用border-top 和border-bottom 并使边框的颜色与页面的背景颜色相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:40:47.550

您始终可以使用`padding`with`<td>`在表格单元格的顶部和底部留出空间。

要在表格行之间添加间距，请设置`<tr>`为`block`元素，然后您可以`margin`在其上使用属性。

在此处查看演示[http://codepen.io/pen/10248/2](http://codepen.io/pen/10248/2)

**编辑：**

更新为包含行之间的间距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:42:52.390

在单元格之间创建间距的替代方法（如果单元格有边框，则间距出现在边框之间）是在 HTML`cellspacing`中的元素上使用属性并在 CSS 中使用属性。前者受到问题中提到的不灵活的影响。后者对浏览器的支持有限。您可以同时使用这两种方式，以便较旧的浏览器使用简单的 HTML 间距，而较新的浏览器则使用 CSS 方式。`table``border-spacing`

下面的示例设置了 0.5em 的垂直间距（即行间）和较小的 0.1em 水平间距（即列间）。

```
table { border-spacing: 0.1em 0.3em; } 
```

（顺序与 CSS 属性值中的通常顺序不同：这里先是水平，然后是垂直，而在边距：0.1em 0.3m 中则应用相反的顺序。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T13:58:01.833

您可以通过添加来模拟间距`border-bottom: 3px solid #fff`（根据需要更改颜色，顶部相同）

# ios - Adobe Air 应用程序安装在 ipad 1 上，但不安装在 ipad 3 上

> ID：11414447
> 
> 赞同：0
> 
> 时间：2012-07-10T13:32:28.513
> 
> 标签：ios, ipad, air, adobe, ipad-3

我们有一个适用于 ipad 1 的 air 应用程序。但是当我们尝试在 Ipad 3 上安装它时，它无法安装我们的应用程序（说无用的消息）。但是可以在此 Ipad 上安装其他应用程序。我们有 Adob​​e Air 3.2 SDK。App.xml 配置如下

```
<?xml version="1.0" encoding="utf-8"?>
<application xmlns="http://ns.adobe.com/air/application/3.0">
<id>com.comapping.ipad</id>
<versionNumber>1.0.0</versionNumber>
<publisherID>................................</publisherID>
<filename>Comapping</filename>
<name>Comapping</name>
<description>.........................</description>
<copyright>Copyright (c) 2010 Comapping A/S</copyright>
<initialWindow>
    <autoOrients>true</autoOrients>
    <aspectRatio>landscape</aspectRatio>
    <title>Comapping</title>
    <visible>true</visible>
    <content>comapping.swf</content>
    <renderMode>cpu</renderMode>
    <fullScreen>true</fullScreen>
</initialWindow>
<installFolder>Comapping Desktop</installFolder>
<programMenuFolder>Comapping Desktop</programMenuFolder>
<icon>
    <image72x72>icons/application-72.png</image72x72>
    <image48x48>icons/application-48.png</image48x48>
</icon>
<fileTypes>
    <fileType>
        <name>Comapping</name>
        <extension>comap</extension>
        <description>Comapping Document</description>
        <contentType>text/xml</contentType>
    </fileType>
    <fileType>
        <name>Comapping</name>
        <extension>meadmap</extension>
        <description>Comapping Document</description>
        <contentType>text/xml</contentType>
    </fileType>
</fileTypes>
<iPhone>
    <InfoAdditions>
        <![CDATA[
            <key>UIDeviceFamily</key>
            <array>
                <string>2</string>
            </array>
        ]]>
    </InfoAdditions>
    <requestedDisplayResolution>high</requestedDisplayResolution>
</iPhone> 
```

有任何想法吗？

PS我找到了错误日志

```
Jul 17 16:15:54 unknown installd[699] <Error>: 0038a000 verify_signer_identity: Could not copy validate signature: -402620395
Jul 17 16:15:54 unknown installd[699] <Error>: 0038a000 preflight_application_install:     Could not verify executable at /var/tmp/install_staging.KjzWxA/foo_extracted/Payload/Comapping.app 
```

# c# - 有没有办法使用 C# 检查文本是西里尔文还是拉丁文？

> ID：11414452
> 
> 赞同：28
> 
> 时间：2012-07-10T13:32:45.563
> 
> 标签：c#

有没有办法使用 C# 检查文本是西里尔文还是拉丁文？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-10T13:49:50.980

使用正则表达式并检查`\p{IsCyrillic}`，例如：

```
if (Regex.IsMatch(stringToCheck, @"\p{IsCyrillic}"))
{
    // there is at least one cyrillic character in the string
} 
```

这对于字符串 "abcабв" 来说是正确的，因为它至少包含一个西里尔字符。如果字符串中有非西里尔字符，则希望它为假，请使用：

```
if (!Regex.IsMatch(stringToCheck, @"\P{IsCyrillic}"))
{
    // there are only cyrillic characters in the string
} 
```

这对于字符串“abcабв”是错误的，但对于“абв”是正确的。

要检查 IsCyrillic 命名块或其他命名块包含的内容，请查看此[http://msdn.microsoft.com/en-us/library/20bw873z.aspx#SupportedNamedBlocks](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#SupportedNamedBlocks)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-14T06:50:24.883

这个怎么样 ？

```
string pattern = @"\p{IsCyrillic}";
if ( Regex.Matches(textInput, pattern).Count > 0)
{
    // contains cyrillics' characters.
} 
```

如果要检查包含多于 x 个字符的西里尔字符，请更改右手数值。

我们的系统收到的垃圾邮件包含大约 30% 的
完整文本的西里尔字符；因此，无法确定是 100% 还是 0%

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-10T14:39:19.083

这是此问题的另一种解决方案

```
public bool isCyrillic(string textInput)
{
bool rezultat=true;
 string pattern = @"[абвгдѓежзѕијклљмнњопрстќуфхцчџш]";
        char[] textArray = textInput.ToCharArray();
        for (int i = 0; i < textArray.Length; i++)
        {
            if (!Regex.IsMatch(textArray[i].ToString(),pattern))
            {
                rezultat = false;
                break;
            }
        }
        return rezultat;
} 
```

# php - 在 mongo 嵌套文档中获取所有唯一键及其计数

> ID：11414456
> 
> 赞同：1
> 
> 时间：2012-07-10T13:32:54.077
> 
> 标签：php, mongodb

我有一个用户及其属性的数据库。约4000万+

```
{
  uuid:xxxxx-xxxx-xxx-xxxx
  ... : ....
  ... : ....

  attributes {
    age : xxxx
    gender : xxxx
    incomegroup : i
    ... : ...
    ... : ...
  }
} 
```

我只是不知道属性子文档中的字段是什么。我完全不知道。对于某些用户，属性文档可能也不存在。

我需要知道整个数据库的属性中存在的所有键以及拥有它们的用户数量 -

年龄：45000 用户等

我可以从 mongo 查询中做到这一点吗？我需要从 PHP 执行这种类型的操作，并像每天一次通过 cron 作业定期获取计数到另一个 mysql 数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:54:38.710

给定您当前的模式，您可以利用[map/reduce](http://www.mongodb.org/display/DOCS/MapReduce)来计算集合中的唯一属性字段。考虑以下示例：

```
<?php

$mongo = new Mongo();
$db = $mongo->test;
$c = $db->users;
$c->drop();

$fields = ['a', 'b', 'c', 'd'];

for ($i = 0; $i < 1000; ++$i) {
    $user = ['attributes' => []];

    foreach ($fields as $pos => $field) {
        if (0 == $i % ($pos + 1)) {
            $user['attributes'][$field] = 1;
        }
    }

    $c->save($user);
}

$map = <<<'EOF'
function() {
    for (var key in this.attributes) {
        emit(key, 1);
    }
}
EOF;

$reduce = <<<'EOF'
function(k, vals) {
    var sum = 0;
    for (var i in vals) {
        sum += vals[i];
    }
    return sum;
}
EOF;

$result = $db->command([
    'mapreduce' => 'users',
    'map' => new MongoCode($map),
    'reduce' => new MongoCode($reduce),
    'out' => ['inline' => 1],
]);

foreach ($result['results'] as $fields) {
    printf("%s: %d\n", $fields['_id'], $fields['value']);
}

$c->drop(); 
```

在这里，我将 1,000 个文档插入到一个集合中，根据一些模算术使用`a`、`b`、`c`和属性填充每个文档。`d`我们定义了一个 map 函数，Mongo 将使用它来遍历集合，`1`为每个文档的每个属性键发出一个值。然后，reduce 函数通过发射键处理这些结果并对值求和。我们的结果是：

```
a: 1000
c: 334
b: 500
d: 250 
```

虽然这一切都很好，但当前的模式及其动态字段名称给索引带来了问题。对于您打算查询的每个字段，您必须在集合上为其定义一个显式索引。如果`attributes`是嵌入对象的数组（例如`{k: 'age', v: 25}`），那么您可以利用多[键索引](http://www.mongodb.org/display/DOCS/Multikeys)。我强烈建议阅读 Derick Rethan 关于[Indexing Freeform-Tagged Data](http://derickrethans.nl/indexing-free-tags.html)的帖子，其中深入讨论了这一点。

此外，此模式将允许我们利用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)（在 MongoDB 2.1.0+ 中可用）。您可能会发现使用 over map/reduce 更容易开发聚合框架。还有一个性能和并发优势，因为处理不是在 JavaScript 中完成的。考虑到架构更改和新聚合重写上面的示例，我们得到：

```
<?php

$mongo = new Mongo();
$db = $mongo->test;
$c = $db->users;
$c->drop();

$fields = ['a', 'b', 'c', 'd'];

for ($i = 0; $i < 1000; ++$i) {
    $user = ['attributes' => []];

    foreach ($fields as $pos => $field) {
        if (0 == $i % ($pos + 1)) {
            $user['attributes'][] = ['k' => $field, 'v' => 1];
        }
    }

    $c->save($user);
}

$result = $db->command([
    'aggregate' => 'users',
    'pipeline' => [
        ['$project' => ['attributes' => 1]],
        ['$unwind' => '$attributes'],
        ['$group' => [
            '_id' => '$attributes.k',
            'count' => ['$sum' => 1],
        ]],
    ],
]);

foreach ($result['result'] as $fields) {
    printf("%s: %d\n", $fields['_id'], $fields['count']);
}

$c->drop(); 
```

您应该会发现输出相同。随意增加测试规模，看看您是否可以发现大型集合的性能差异。

# ruby-on-rails - Mongoid 无法创建记录

> ID：11414460
> 
> 赞同：0
> 
> 时间：2012-07-10T13:32:59.947
> 
> 标签：ruby-on-rails, mongoid

我不确定我的设置有什么问题...我无法创建 mongoid 记录（使用 mongoid 3.0.0）：

`bundle exec rails console`

```
ruby-1.9.2-p290 :045 >   u = NoUser.new
 => #<NoUser _id: 4ffc2e8487bc11b128000005, _type: nil, username: nil> 
ruby-1.9.2-p290 :046 > u.username = 'aaa1'
 => "aaa1" 
ruby-1.9.2-p290 :047 > u
 => #<NoUser _id: 4ffc2e8487bc11b128000005, _type: nil, username: "aaa1"> 
ruby-1.9.2-p290 :048 > u.save
NoMethodError: You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.[]
    gems/moped-1.1.1/lib/moped/node.rb:74:in `block in command'
    gems/moped-1.1.1/lib/moped/node.rb:522:in `[]'
    gems/moped-1.1.1/lib/moped/node.rb:522:in `block (3 levels) in flush'
    gems/moped-1.1.1/lib/moped/node.rb:521:in `map'
    gems/moped-1.1.1/lib/moped/node.rb:521:in `block (2 levels) in flush'
    gems/moped-1.1.1/lib/moped/node.rb:113:in `ensure_connected'
    gems/moped-1.1.1/lib/moped/node.rb:517:in `block in flush'
    gems/moped-1.1.1/lib/moped/node.rb:532:in `logging'
    gems/moped-1.1.1/lib/moped/node.rb:516:in `flush'
    gems/moped-1.1.1/lib/moped/node.rb:505:in `process'
    gems/moped-1.1.1/lib/moped/node.rb:70:in `command'
    gems/moped-1.1.1/lib/moped/node.rb:356:in `refresh'
    gems/moped-1.1.1/lib/moped/cluster.rb:101:in `block in refresh'
    gems/moped-1.1.1/lib/moped/cluster.rb:114:in `each'
    gems/moped-1.1.1/lib/moped/cluster.rb:114:in `refresh'
    gems/moped-1.1.1/lib/moped/cluster.rb:67:in `nodes'
... 9 levels...
    gems/activesupport-3.1.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
    gems/mongoid-3.0.0/lib/mongoid/callbacks.rb:98:in `run_callbacks'
    gems/mongoid-3.0.0/lib/mongoid/persistence/insertion.rb:24:in `block in prepare'
    gems/activesupport-3.1.0/lib/active_support/callbacks.rb:390:in `_run_save_callbacks'
    gems/activesupport-3.1.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
    gems/mongoid-3.0.0/lib/mongoid/callbacks.rb:98:in `run_callbacks'
    gems/mongoid-3.0.0/lib/mongoid/persistence/insertion.rb:23:in `prepare'
    gems/mongoid-3.0.0/lib/mongoid/persistence/operations/insert.rb:26:in `persist'
    gems/mongoid-3.0.0/lib/mongoid/persistence.rb:50:in `insert'
    gems/mongoid-3.0.0/lib/mongoid/persistence.rb:79:in `save'
    from (irb):48
    gems/railties-3.1.0/lib/rails/commands/console.rb:45:in `start'
    gems/railties-3.1.0/lib/rails/commands/console.rb:8:in `start'
    gems/railties-3.1.0/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'ruby-1.9.2-p290 :049 > 
```

;

```
class NoUser

  include Mongoid::Document

  field :username, :type => String
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T13:57:19.560

解决方案是从 ruby​​ 1.9.2 升级到 ruby​​ 1.9.3。提示来自[http://mongoid.org/en/moped/](http://mongoid.org/en/moped/)，事实上是`moped`gem 引发了错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:44:35.910

尝试

```
field :username, type: String 
```

# java - iReport 4.6.0 中的空白（白色）文本字段

> ID：11414466
> 
> 赞同：2
> 
> 时间：2012-07-10T13:33:12.790
> 
> 标签：java, jasper-reports, ireport

我从 4.5.1 版本开始使用 iReport 创建 JasperReports，然后我开始使用 4.6.0 并用它创建了几个报告。**问题是每当我打开“旧报告”（在 4.5.1 中生成）时，文本字段的字体显示为白色（它对我来说变得“不可见”）。**当我双击它时，它会显示文本，但是对于编辑来说很糟糕，因为我看不到文本在页面上的显示方式。

它适用于 4.6.0 创建并由 4.6.0 打开的文档，但不适用于以前版本创建的文档。我想这与它的 xml （可能是一个属性）有关。

我尝试过的事情：（1）为字体选择另一种颜色[绿色]。(2)打开.jasper编译文件，生成新的.jrxml。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:41:55.510

没关系，我发现了导致“错误”的原因。碰巧我在 iReport 4.5.1 中创建的第一个报告以 Arial 字体保存在 Windows 上（在 Ubuntu/Linux 中不存在）。所以我删除了 JRXML 文件上的“fontName”标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:51:27.893

有些字体在 linux 上不可用，如果您的报告模板使用它们，您将遇到所描述的问题。如果你还想继续使用 Arial 或其他一些非 linux 字体，你可以尝试安装这个包并重试：

> sudo apt-get install msttcorefonts

# php - 如何使用 PHP 填充输入字段

> ID：11414470
> 
> 赞同：1
> 
> 时间：2012-07-10T13:33:21.853
> 
> 标签：php, html

我正在尝试编写一个简单的计算器 html 页面，在其中我要求在单独的文本框中输入两个数字，让用户单击一个按钮，然后将结果存储到第三个文本框中。我正在尝试使用 PHP 来解决这个问题，但似乎无法以我想要的方式显示它。回声线工作正常，但我不想要那个；

从 HTML

```
 <form action="Add.php" method="get">
        <input for='num1' type="text"  name="num1" />
        <input for='num2' type="text" name="num2" />

        <input type="submit" value="Add Them" />
        <input type="text" name="AnswerBx" id="SumTotalTxtBx"/>
    </form> 
```

添加.php

```
 <?php 
        $num1 = $_GET["num1"];
        $num2 = $_GET['num2'];
        $sum = $num1+$num2;
        //echo "$num1 + $num2 = $sum";

        document.getElementById("SumTotalTxtBx").value = $sum;
    ?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T13:38:14.943

你不能像那样混合 PHP 和 JavaScript！一个在服务器上运行，另一个在客户端上运行。

您必须像这样将值回显到文本框的 value 属性中

```
<input type="text" value="<?PHP echo $sum; ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:48:05.263

好的，所以 PHP 很棒，但它的所有计算都是在服务器端执行的，而不是在客户端。使用 AJAX，您*可以*针对服务器执行一些 PHP 代码，但我认为您可能对用于计算器的 javascript 更感兴趣。

```
<html>
<head>
<script>
function calculateSum()
{
    num1 = parseInt(document.getElementById("num1").value);
    num2 = parseInt(document.getElementById("num2").value);

    sum = num1 + num2;

    document.getElementById("sum").innerHTML = sum;
}
</script>
<body>
<input id="num1" type="text"/><br/>
<input id="num2" type="text"/><br/>
<button onclick="calculateSum()">Submit!</button>
<span id="sum">..the sum is..</div>
</body>
</html> 
```

Javascript 非常简单，在客户端编写任何东西时都非常棒。如果您想了解更多信息，我建议您[在 w3schools 阅读有关 javascript 的](http://w3schools.com/js/default.asp)内容！我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:38:09.143

您在这里混合了 PHP 和 Javascript，返回到 PHP 手册： http: [//php.net/manual](http://php.net/manual)并阅读 php 如何工作以及如何与用户交互。

Javascript 基本上在客户端运行，而 PHP 在服务器上运行。你请求 php 一些东西，它会为你返回一个新的 HTML 页面。

话虽如此，它的主题太宽泛，无法帮助您解决错误。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:41:29.327

使用**jQuery**，您无需像这样在服务器上进行回发即可解决它

```
var num1 = parseInt($("input:text[name='num1']"));
var num2 = parseInt($("input:text[name='num2']"));
$('input:text#SumTotalTxtBx').val(num1+num2); 
```

# c# - Winforms：打开第二个表单时如何在第一个表单上设置标签文本

> ID：11414474
> 
> 赞同：1
> 
> 时间：2012-07-10T13:33:35.047
> 
> 标签：c#, winforms

在我的 Windows 窗体应用程序中，我关闭一个窗体并打开另一个窗体，如下所示：

```
MyApp.MySecondForm frmInst = new MyApp.MySecondForm();
frmInst.Show();
this.Hide(); 
```

但在我这样打开之前，我在第一个表单中设置了标签文本，因为我想通知用户第二个表单正在加载。

想象一下第二个表单的加载需要 10 秒，当我按下按钮以打开第二个按钮时，标签文本在第二个表单打开之前不会更改。当我关闭第二个表单时，我回想起第一个表单并看到文本已更改。

用户单击按钮后，我应该按照哪种方式设置标签文本？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:35:09.423

你是在异步触发那个 10 秒的过程吗？

如果没有，那就是造成延迟的原因。它获取信息（10 秒），然后更新 GUI 线程。

尝试使用 BackgroundWorker： http: [//www.dotnetperls.com/backgroundworker](http://www.dotnetperls.com/backgroundworker)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:44:17.450

您必须先调用该`Refresh()`方法`frmInst.Show()`。因为在方法执行完成之前图形不会刷新，除非您手动执行。

# java - 我可以从密钥库中恢复密码吗

> ID：11414475
> 
> 赞同：1
> 
> 时间：2012-07-10T13:33:35.733
> 
> 标签：java, android, passwords, keystore

在第一个应用程序发布期间，我已经对应用程序进行了签名，并创建了一个密钥库。从那以后，我忘记了密码。现在我已经制作了一个新版本，并且知道无法更新应用程序，因为在应用程序安装过程中会出现新证书和冲突。任何人都可以就如何解决这个问题提出任何技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:39:14.273

这是一个极其常见的问题——忘记密码或丢失密钥。我很抱歉这么说，但我知道你无能为力。关键在于确保人们在没有密钥库和密码的情况下无法更新应用程序。:(

所以现在你有一个已发布的应用程序并且无法更新它。您必须以新的打包名称再次发布应用程序，然后尝试让人们从旧应用程序更改为新应用程序——这很棘手。不过最好尽快完成，这样当您获得新用户时，他们就会使用新应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:01:30.103

我正在考虑一个解决方案..（我在某处阅读但无法找到该链接）不知道它是否有效

1.  查找使用证书 A 签名的以前的 .apk 文件（您丢失了哪个密码）
2.  现在用新证书 B 签署这个 .apk 文件并上传到市场上。
3.  现在上传使用证书 B 签名的新 .apk 文件并试一试... :)

# java - 如何实现空集-∅？

> ID：11414482
> 
> 赞同：19
> 
> 时间：2012-07-10T13:34:02.710
> 
> 标签：java, null, set-theory

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-10T13:46:32.317

利用[`Collections.emptySet():`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#emptySet%28%29)

> 返回空集（不可变）。这个集合是可序列化的。与同名字段不同，此方法是参数化的。此示例说明了获取空集的类型安全方法：
> 
> ```
>  Set<String> s = Collections.emptySet(); 
> ```
> 
> 实现说明：此方法的实现不需要为每个调用创建单独的 Set 对象。使用此方法的成本可能与使用同名字段的成本相当。（与此方法不同，该字段不提供类型安全。）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-10T14:53:16.887

用来`null`表示一个空集是个**坏主意**。A 的`null`行为不像 a`Set`因为（显然）所有对其执行操作的尝试都会抛出`NullPointerException`. 这意味着，如果你用它`null`来表示一个空集，你的代码将充满对`null`... 的测试，如果你错过了一个，你就有了一个错误。

如果您想要一个不可变的空集，则实际的解决方案是使用，或者如果您想要一个开始为空的可变集，则`Collections.emptySet()`创建一个适当`Set`类的实例（例如）。`new HashSet<>()`

* * *

在重读这个问题时，我意识到你的意思可能与我原来的理解不同。

*如果您尝试从头*开始在 Java 中实现/建模数学集合论概念，您可能会实现`Set`为不可变类。（在数学中，你不会改变事物！）空集只是一个`Set`没有元素的实例。无需特殊处理。

这个`NULL`概念不是必需的……除非你特别想在你的集合数学模型中加入一个“空”、“未定义的集合”或一些类似的概念。（如果您是，我不确定我们是否可以在不了解您的模型的情况下为您提供建议……从数学的角度来看。）

# asp.net-mvc - Ajax.BeginForm is submitting disabled form elements

> ID：11414490
> 
> 赞同：0
> 
> 时间：2012-07-10T13:34:27.807
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-ajax, http-post, ajax.beginform

Using MVC3 and Ajax.BeginForm I surprisingly discovered that mvc ajax forms submits elements with the attribute disabled="disabled".

I have tested both select and text inputs.

I was suprised because they should not be submited and they will not when using Html.BeginForm.

Is there some hidden option or a workaround for this?

[EDIT example]

```
 @using (Ajax.BeginForm("Action", "Control", new AjaxOptions() { HttpMethod = "POST" }))
{

  <input type="text" name="_enabled" value="_enabled" />
  <input type="text" name="_disabled" value="_disabled" disabled="disabled" />

  <input type="submit" value="POST" />

} 
```

![Posted data](../Images/a885b0c00886adb575dc39cbde95d462.png)

Html.BeginForm will not post the _disabled value.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-08T10:06:05.907

您可以在其他隐藏元素中设置禁用元素值：

```
<input type="text" name="Id" id="Id" value="5" />

<input type="hidden" name="Id" id="Id" value="5" /> 
```

和或：

```
@Html.TextBoxFor(m => m.Id)
@Html.HiddenFor(m => m.Id) 
```

# google-apps-script - 自动电子邮件 Google App 脚本：执行 while 条件

> ID：11414497
> 
> 赞同：0
> 
> 时间：2012-07-10T13:34:48.170
> 
> 标签：google-apps-script

我在这个脚本上工作了很长时间，它是 Google App 脚本，它会自动向提供的电子邮件发送电子邮件警报，并且我在每 1 分钟运行一次时触发脚本。

因此，如果单元格总数大于 201，它将向用户发送电子邮件。但问题是它每分钟运行一次脚本就发送电子邮件。

我需要编码方面的帮助，如果电子邮件已经发送过一次，它将不会再次发送，除非单元格值再次小于 201 并返回大于 201，我正在考虑制作一个包含文本“已发送”或“未发送”

如果它说“未发送”让电子邮件代码运行如果总数大于 201 如果它说“已发送”并且总数大于 201 不要让电子邮件代码运行..

我知道我不是很清楚，但在这方面很难获得帮助。这是代码。

如果这可行，我相信很多人都可以使用这个脚本。

```
 function sendEmail(email_address, email_subject, email_message) {
  MailApp.sendEmail(email_address, email_subject, email_message);
}

function test_sendEmail() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var cell = sheet.setActiveCell('A2');
  var criterion_cutoff = 201;
  var i = 0;
  var addr;
  var subj;
  var msg;

  do {
    addr = cell.offset(i,0).getValue();
    subj = cell.offset(i,1).getValue();
    msg = cell.offset(i,2).getValue();
    criterion = cell.offset(i,3).getValue();

    if(criterion == criterion_cutoff) {
      sendEmail(addr,subj,msg);
     // Browser.msgBox('Sending email to: ' + addr);
    }
    i++;
      } while( cell.offset(i, 0).getValue().length > 0 )

  Browser.msgBox('Done!');
} 
```

所以我想在 do while 之外添加 if else 条件

```
 if(SpreadsheetApp.getActiveSheet().getRange(21,6).getValue() != 'Not Sent') {
    do {
        //same stuff as above
     } while(condition)

    }

   else 
       //don't know wht else to do in else condtion so just using googleclock
         SpreadsheetApp.getActiveSheet().getRange(2,7).setValue('=GoogleClock()') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:00:53.393

我想我已经自己想通了。我想分享我的解决方案，以便其他人可以使用它。

所以我添加了 2 if else condtion first one will check if cell value is < 201 if it is less than 201 than set somecell example F5 = Not Sent

另一个 if else 循环将检查 F5 的值 != Sent 和单元格值 == 201 是否会运行电子邮件代码，并在运行该电子邮件代码后立即将单元格 F5 设置为 Sent

所以下次循环再次运行它不会再次发送电子邮件，除非单元格的值为

但这有一个小问题，它只适用于 3 行中的第 1 行，您可以通过添加更多 if 条件来实现所有 3 行，我不需要它，所以我不担心。

```
 function sendEmail(email_address, email_subject, email_message) {
  MailApp.sendEmail(email_address, email_subject, email_message);
}

function test_sendEmail() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var cell = sheet.setActiveCell('A2');
  var criterion_cutoff = 201;
  var i = 0;
  var addr;
  var subj;
  var msg;

  if((SpreadsheetApp.getActiveSheet().getRange(2,4).getValue() < '201'))  {
    SpreadsheetApp.getActiveSheet().getRange(2,6).setValue('Not Sent');
  }
  else  
    if((SpreadsheetApp.getActiveSheet().getRange(2,6).getValue() != 'Sent') && (SpreadsheetApp.getActiveSheet().getRange(2,4).getValue() == '201')) {
  do {
    addr = cell.offset(i,0).getValue();
    subj = cell.offset(i,1).getValue();
    msg = cell.offset(i,2).getValue();
    criterion = cell.offset(i,3).getValue();

    if(criterion == criterion_cutoff) {
      sendEmail(addr,subj,msg);
     // Browser.msgBox('Sending email to: ' + addr);
      SpreadsheetApp.getActiveSheet().getRange(2,6).setValue('Sent');
    }
    i++;
      } while( cell.offset(i, 0).getValue().length > 0 )

  Browser.msgBox('Done!');
}
    } 
```

# sql - 仅当连接表中有链接行时，如何从表中选择行？

> ID：11414498
> 
> 赞同：0
> 
> 时间：2012-07-10T13:34:48.707
> 
> 标签：sql, codeigniter, activerecord, join

对不起，复杂的标题。

我有这个架构：

```
Categories  Albums          Photos 
----------  -------         --------
id          id              id
name        category_id     album_id 
```

从这些表中，我需要构建一个导航菜单，如下所示：

```
Category1
   album1
   album2
Category2
   album3
Category3
   album4 
```

我可以轻松地构建它，但现在我只想显示至少包含一张照片的相册和至少包含一张相册的类别。我该怎么做？

编辑：我正在使用 Codeigniter，现在我正在这样做：

在控制器中，我使用两个简单的查询构建了一个数组

```
 $categories = $this->category->get_categories();

    foreach ($categories as $category)
    {
        $data['categories'][$category->name] = $this->album->get_albums_by_category($category->id);
    } 
```

get_categories() 查询：

```
 function get_categories()
{
    $this->db->select('*')->
        from('categories');
    return $this->db->get()->result();
} 
```

和 get_albums 之一：

```
 function get_albums_by_category($category_id)
{
    // per stampare il nome dell'album nella lingua giusta
    $lang = $this->lang->lang();
    $name = $lang . '_name';
    $this->db->select('id, ' . $name . ' AS name')
        ->from('albums')
        ->group_by('id')
        ->where('category_id', $category_id);
    return $this->db->get()->result();
} 
```

我使用了两个查询，这样我就可以成为我需要的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:43:00.463

让我们从您的基本查询开始：

```
select (case when thetype = 'Category' then category else album end) as what
from ((select 'category' as thetype, category, NULL as album
       from category
      ) union all
      (select 'album', category, album
       from album a join
            category c
            on a.category_id = c.id
      )
     ) t
order by category, album 
```

现在，我们可以针对您的问题进行修改：

```
select (case when thetype = 'Category' then category else album end) as what
from ((select 'category' as thetype, category, NULL as album
       from categories c
       where c.id in (select category_id from albums)
      ) union all
      (select 'album', category, album
       from albums a join
            categories c
            on a.category_id = c.id
       where a.id in (select album_id from photos)
      )
     ) t
order by category, album 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:40:20.560

使用这种技术：

```
SELECT * 
FROM Albums
WHERE EXISTS (
    SELECT 1
    FROM Photos
    WHERE Photos.album_id = Album.id
) 
```

这称为相关子查询，如果将其用于完全连接，在某些情况下可能会很慢，但在这里仅使用 EXISTS 子句，它应该很快。

# php - 如何解码 mysql_real_escape_string

> ID：11414500
> 
> 赞同：0
> 
> 时间：2012-07-10T13:35:04.613
> 
> 标签：php, mysql

我已经用 MySQL 在数据库中保存了一些信息，现在我想显示它们，因为它包含一些标签，如`<div>`,`<p>`等。我只是希望它们显示为原始 html 代码，任何人都可以告诉我如何？我尝试使用`html_entity_decode()，但它不起作用。

例子：

```
&lt;div&gt;&lt;b&gt;Prénom/Nom : &lt;/b&gt;tantantan tan&lt;/div&gt;
&lt;div&gt;&lt;b&gt;Pseudonyme : &lt;/b&gt;nickname&lt;/div&gt;
&lt;div&gt;&lt;b&gt;Résidence principale : &lt;/b&gt;69001 Lyon 1er&lt;/div&gt;
&lt;div&gt;&lt;b&gt;Autre résidence : &lt;/b&gt; Place bellecours 69002 Lyon 2e&lt;/div&gt; 
```

======其实，我需要这样做。

```
#using serialize() method
$data = serialize($_SESSION);
$sql = "Insert into sessioninfo `data` values('$data')"; 
```

进而

```
# I assume you can retrieve the data from database and assign to the following variable
$data = unserialize($row['data']); 
```

完美解决我的问题。谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:42:57.393

这不是**mysql_real_escape_string**数据，而是**html_specialchars()**编码数据

[你可以用htmlspecialchars_decode()](http://www.php.net/manual/en/function.htmlspecialchars-decode.php)做相反的事情

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:41:53.953

尝试[html_entity_decode](http://www.php.net/manual/en/function.html-entity-decode.php)：

```
echo html_entity_decode($string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:47:46.987

建议您在保存数据库时不要应用 htmlspecialchars。如有必要，应在发送输出时应用清理。

# android - Android：通过短信或谷歌账户获取用户电话号码

> ID：11414502
> 
> 赞同：3
> 
> 时间：2012-07-10T13:35:07.190
> 
> 标签：android, sms, phone-number

在我的 Android 应用程序中，我试图获取用户的电话号码。我尝试了 TelephonyManager 解决方案，但在欧洲 90% 的 SIM 卡的该字段为空白，因此该函数返回 NULL。

我想我可以通过搜索发送的短信或查询谷歌帐户来获取用户的电话号码。对于 SMS 方法，我尝试加载内容提供商 sms/sent，但我可以提取的唯一地址字段是用户向其发送 SMS 的人的电话号码。

对于 Google 帐户，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:39:17.607

```
private String getMyPhoneNumber() {
  TelephonyManager mTelephonyMgr;
  mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
  return mTelephonyMgr.getLine1Number();
} 
```

试试这个，我来自波兰，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-18T20:46:01.660

解决办法：manifest的包名是de.org.limindo.limindo2，而apk的包名是de.org.limindo2 .....

# c# - asp.net C# 数据库表列列出

> ID：11414504
> 
> 赞同：1
> 
> 时间：2012-07-10T13:35:14.507
> 
> 标签：c#, asp.net, database

我有一个用 C# 完成的 asp.net 项目（我的 C# 语法非常生疏），并且正在使用它在项目中创建的内置数据库。我创建了一个名为 aspnet_Tutorials 的表，它（目前）存储两列用户提交的数据：TutorialName 和 TutorialContent。很简单，这是一个学习项目。

我需要做的是从 aspnet_Tutorials 的第一列创建一个列表，以使用它在页面上创建教程的“目录”。我遇到问题的部分（主要是语法上的）是连接并遍历列以将值放入列表中。任何人都可以提供一个直接的例子吗？并可能解释代码中发生了什么。

```
public class TutorialsDirDAL
    {
            SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ApplicationServices"].ConnectionString);
            SqlCommand cmd = new SqlCommand();
            SqlDataAdapter da = new SqlDataAdapter();
            DataSet ds = new DataSet();

        public List<string> DisplayTutorials() //parameters? String qry?
        {
           //query the database table, foreach loop over the data, place it into a list?
        }
    } 
```

我知道如何编写简单的 sql 查询。但是我在我的谷歌搜索中看到了一些不同的设置。我目前有以下查询，请随意将其分开或提供比使用查询更好的解决方案。

```
cmd.CommandText = "SELECT * FROM ASPNET_TUTORIALS (TutorialTitle)"
                + "VALUES (@tutorialTitle)"; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:46:32.587

那么您可以使用数据读取器获取并映射到对象。我可以给你一些粗略的代码，可能是这样的：

```
 using (IDataReader objDataReader = objDB.ExecuteReader(objCMD))
            {
                while (objDataReader.Read())
                {
                    DataBaseObject obj = new DataBaseObject();
                    obj = MapObjectToList(objDataReader);
                    ObjectList.Add(obj);

                }
                objDataReader.Dispose();
            } 
```

// 映射函数可以像这样调用：

```
private DataBaseObject MapObjectToList(IDataReader objDataReader)
{
    DataBaseObject obj = new DataBaseObject();
    obj.Prop1Name = base.GetDataValue<string>(objDataReader, "Column1Name");
    obj.Prop2Name = base.GetDataValue<string>(objDataReader, "Column2Name");
    return obj;
} 
```

但这只是我将如何做的一个粗略的想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T14:05:52.903

ebad86 的回答是可以接受的，但由于您显然正在学习，我认为引入 OO 原则会使您在这一点上尝试学习的内容变得混乱。

这是一个基本的方法：

```
private void GetData()
{
   //The object that will physically connect to the database
   using(SqlConnection cnx = new SqlConnection("<your connection string>")
   {
            //The SQL you want to execute
           SqlCommand cmd = new SqlCommand("SELECT * FROM ASPNET_TUTORIALS");
           //Open the connection to the database
           cnx.Open();
           //execute your command
           using (IDataReader dataReader = cnx.ExecuteReader(cmd))
           {
             //Loop through your results
             while(dataReader.Read())
             {
                //do whatever to the data
                ListItem item = new ListItem(Convert.ToString(dataReader["TutorialName"])); 
                lst.Items.Add(item);
             }
           }
   }
} 
```

这一切都非常简单。不过，您最感兴趣的部分是 while 循环。循环将遍历所有返回的记录，您可以对它们做任何您需要做的事情。在我的示例中，我假设有一个名为“lst”的 ListBox，我只是将 ListItems 添加到其中，它的名称将是任何“TutorialName”的名称。此时，您可以从字面上对数据做任何您需要做的事情。为了适合您的示例（返回列表），您可以这样做：

```
private List<string> GetData()
{
   List<string> lst = new List<string>();
   //The object that will physically connect to the database
   using(SqlConnection cnx = new SqlConnection("<your connection string>")
   {
            //The SQL you want to execute
           SqlCommand cmd = new SqlCommand("SELECT * FROM ASPNET_TUTORIALS");
           //Open the connection to the database
           cnx.Open();
           //execute your command
           using (IDataReader dataReader = cnx.ExecuteReader(cmd))
           {
             //Loop through your results
             while(dataReader.Read())
             {
                lst.Add(Convert.ToString(dataReader["TutorialName"]));
             }
           }
   }
   return lst;
} 
```

如果您有任何问题，请回复。

# ruby-on-rails - rake assets：为特定的 JS 文件预编译

> ID：11414505
> 
> 赞同：16
> 
> 时间：2012-07-10T13:35:14.823
> 
> 标签：ruby-on-rails, asset-pipeline

我可以运行`rake assets:precompile`特定的 JavaScript 文件吗？

否则，完整的预编译会持续 5 分钟，并且会使 JavaScript 文件的快速更改非常烦人。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-20T16:49:33.527

如果你只想预编译一个文件，你可以制作一个自定义的 rake 任务来相当容易地做到这一点。

```
namespace :assets do

  desc "compile one js file"

  task :compile_one_file => :environment do
    dest = "#{Rails.root}/vendor/assets/javascripts/compiled/"
    js_asset = "your_jsfile.js"
    File.write(dest + js_asset, Uglifier.compile(Rails.application.assets.find_asset(js_asset).to_s))
  end

end 
```

然后从命令行

```
rake assets:compile_one_file 
```

希望这会有所帮助，我发现这对于我不经常更改的供应商 js 文件很有用，例如 jquery 和 jquery 插件。这样，当我在开发中时，它会加快我的页面加载速度，从而使资产管道不必为我的供应商文件路由所有单独的请求。它只是提供了我所有供应商 js 的一个缩小的 js 文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T13:41:48.343

短：你不能。

在预编译期间，Rails 会遍历 Application.js 文件并将所有导入合并到一个文件中，因此由于其中正在进行压缩，因此仅更改一个文件是不可能的。（它对没有从 application.js 引用的文件没有任何作用）

下一步：在进行快速修复时，您不必在开发期间运行 rake assets:precompile。仅在部署时（取决于您的耐心），让任务运行 5 分钟应该没问题。

您应该在开发期间使用不需要预编译资产的开发环境，因为 Rails 将为未合并和未缩小的资产提供服务。如果您在 web-server 中运行 Rails 构建，`rails s`这应该是默认设置，但您可以使用以下命令显式启动 rails 服务器：

`rails s RAILS_ENV=development`

如果资产仍未正确显示或您看到错误，请确保您有`config.assets.debug = true`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-16T14:39:31.870

@Tigraine 部分正确。Rails 3.1+ 资产旨在由 Rails 完全管理，*默认情况下，*所有资产将编译为一个 js 和一个 css 资产。

然而...

编译为单个资产依赖于使用由 Sprockets gem 处理的资产清单（application.js 和 application.css）。默认情况下，这些清单包含一个 require_tree 指令，并且该指令包含所有文件。如果您删除该指令，您必须做更多的工作来编译您的资产。

如果要构建单独的资产，可以在 application.rb 中设置配置选项。

```
config.assets.precompile += %w( additional/asset.css funky/stuff.js ) 
```

上面的行会将文件 additional/asset.css 和 funky/stuff.js 添加到预编译资产时将生成的文件*列表中（请注意，'+=' 用于扩展默认列表）。*为了尽可能明确，这意味着您将预编译四个资产：application.js、funky/stuff.js、application.css 和附加/asset.css。

就是说，您可能想查看[guard-rails-assets](https://github.com/dnagir/guard-rails-assets) gem。gem 支持预编译的方式很灵活；仅预编译更改的资产是可能的。我听说过一些关于它的好反馈，但我自己没有使用它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-11T17:18:27.933

@Tigraine 不正确。

有可能，您只需创建文件夹并将 css 文件放入其中，然后将其导入 assets 文件夹中的不同文件。

像

```
application.css
 *= require_self
 *= require foundation_and_overrides
 *= require reset
 *= require_tree ./screen 
```

其中 Screen 是我放置在样式表文件夹中的文件夹。喜欢`assets/stylesheets/screen/`。我调用 application.css

```
<%= stylesheet_link_tag    "application", media: "screen, projection" %> 
```

现在，如果你想为另一个布局创建一个 css 文件，你可以在下面创建它`assets/stylesheets`

喜欢 xxx.css

如果您需要**xxx**的多个文件，请按照与上述相同的步骤进行操作，但这里重要的部分是您将此行添加到

**生产.rb**

```
config.assets.precompile += %w( xxx.css ) 
```

然后在您添加的布局内：

```
<%= stylesheet_link_tag    "xxx", media: "screen, projection" %> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-14T07:24:31.183

你完全可以在没有 Rails 的情况下做到这一点。这可以使事情运行得更快，具体取决于您的环境。

quick_compile.rb

```
require 'sprockets'

sprocket =  Sprockets::Environment.new
sprocket.js_compressor = :uglifier # or read off config yml
sprocket.append_path('app/assets/javascripts') # the directory that holds you js src.

file = File.new('test_min.js','w+') # the output file path.
file.puts(sprocket.find_asset('test.js')) # the file to complie
file.close 
```

如果您只想评估 //= require 语句，您可以删除 js_compressor 设置。Sprocket 将连接所需的文件。

# jquery - 向 jQuery Datatable 添加刷新按钮

> ID：11414508
> 
> 赞同：12
> 
> 时间：2012-07-10T13:35:25.973
> 
> 标签：jquery, datatables

我的应用程序中有一个数据表。我需要在数据表中搜索文本框附近的某处添加一个刷新按钮，以便在用户单击它时刷新表。我已经弄清楚了刷新功能。

我坚持的事情是如何在数据表中包含这个按钮？我想`id`在我的结束脚本中访问这个按钮。

有什么建议么？也有人能告诉我有什么用`bJQueryUI`吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-12T13:34:39.143

我只是使用了以下代码：

```
$('<button id="refresh">Refresh</button>').appendTo('div.dataTables_filter'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T13:44:04.833

这是从 datatables.net 添加按钮的示例页面

[http://datatables.net/examples/advanced_init/dom_toolbar.html](http://datatables.net/examples/advanced_init/dom_toolbar.html)

这是@Mike 提到的 sDom 的示例页面：http: [//datatables.net/release-datatables/examples/advanced_init/dom_multiple_elements.html](http://datatables.net/release-datatables/examples/advanced_init/dom_multiple_elements.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:40:07.777

我有一个类似的问题，我可以使用数据表的 sDom 参数来解决。

[http://datatables.net/forums/discussion/37/the-sdom-parameter/p1](http://datatables.net/forums/discussion/37/the-sdom-parameter/p1)

基本上，它允许您在数据表中放置一个带有 id 的 div。然后我使用 javascript 将按钮插入到该 div 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:55:19.713

您可以只制作一个双标题并将第二个用作按钮。

bJqueryUI 允许您使用 jQueryUI 主题或主题滚轮。因此，如果您在初始化数据表之前添加 jQueryUI，您可以使用该样式而不是默认样式。

# grails - 将生产设置与数据库迁移插件一起使用

> ID：11414510
> 
> 赞同：1
> 
> 时间：2012-07-10T13:35:38.077
> 
> 标签：grails, database-migration

我正在尝试按照[此处](http://blog.springsource.org/2011/08/17/countdown-to-grails-2-0-database-migrations/)的教程进行操作。

我已经在我的 BuildConfig.groovy 文件中声明了数据库迁移插件的依赖关系，`runtime ":database-migration:1.0"`然后进行了编译。我还在我的 DataSource.groovy 文件中注释掉了`dbCreate`我的生产设置行。我的生产数据库是空的，里面没有表。

然后我尝试运行这两个命令来生成我的初始更改日志：

```
grails dbm-create-changelog
grails prod dbm-generate-gorm-changelog --add changelog-1.0.groovy 
```

问题是第一个命令在我的开发数据库中创建表，而不是在我的生产数据库中。然后第二个命令无法创建`changelog-1.0.groovy`它应该创建的文件（我假设），因为生产数据库从未创建任何表。我收到几个错误，说 Hibernate 无法索引数据库，我有一堆这样的错误：

```
| Error 2012-07-10 08:40:28,704 [Compass Gps Index [pool-11-thread-2]] ERROR util.JDBCExceptionReporter  - Table 'mygrailsapp_prod.some_class' doesn't exist 
```

即使我在 DataSource.groovy 文件中注释掉我的开发设置，Grails 仍在寻找我的开发数据库。我应该指出，如果我放弃`prod`第二个命令，`changelog-1.0.groovy`文件生成正常，但我不清楚是否会因为它是从开发数据库生成的而被搞砸（在我运行第一个命令之前它没有表) 而不是生产数据库。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:02:05.930

```
The problem is the first command creates tables in my development database, not my production database. 
```

这可能是因为它是针对开发环境运行的，而您仍然将其 dbCreate 设置为“更新”

```
Then the second command fails to create the changelog-1.0.groovy file it is supposed to create (I assume) because the production database never had any tables created. 
```

这并不完全准确。从您发布的链接中，它在该步骤之后说：“请注意，您的数据库将保持为空！” 只有在执行 dbm-update 命令时才会创建数据库表。那是更改日志实际执行的时间。

我认为您链接到的博客在第二个命令的 prod 开关上并不完全准确。关于您的域的任何内容都不是特定于环境的。所以把它关掉，你应该能够继续前进。我不确定为什么会抛出该错误。这真的没有意义。

# java - 键盘后面的标签 - Android

> ID：11414511
> 
> 赞同：2
> 
> 时间：2012-07-10T13:35:39.943
> 
> 标签：java, android, android-tabhost, android-edittext, android-softkeyboard

我有一个`TabActivity`（选项卡位于底部），其中包含`EditText`，问题是当我专注于`EditText`并且**键盘**出现时，选项卡位于键盘上方，它们给我留下了很小的空间，有什么办法可以防止它们离开上面，让他们在**键盘**后面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:40:23.430

将[`android:windowSoftInputMode="adjustPan"`](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)属性添加到清单中的活动：

```
<activity android:name="MyActivity"
    ...
    android:windowSoftInputMode="adjustPan" >
</activity> 
```

# iphone - UIVideoEditorController canEditVideoAtPath 对库中的资源返回 false

> ID：11414512
> 
> 赞同：2
> 
> 时间：2012-07-10T13:35:44.883
> 
> 标签：iphone, ios, uikit, avfoundation, uivideoeditorcontroller

关于库中的资产，即：**assets-library://asset/asset.mov?id=0399CB6D-D3D9-4F4C-82B9-AC93CCE2FB16&ext=mov**

`[UIVideoEditorController canEditVideoAtPath:videoPath]`总是返回 NO

我在控制台中看到这个错误： `<Warning>: Video assets-library://asset/asset.mov?id=0399CB6D-D3D9-4F4C-82B9-AC93CCE2FB16&ext=mov cannot be saved to the saved photos album: Error Domain=NSOSStatusErrorDomain Code=2 "This movie could not be played." UserInfo=0x6f7b90 {NSLocalizedDescription=This movie could not be played.}`

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:03:15.437

显然没有办法用`UIVideoEditController`. 我最终将文件复制`AVAssetWriter`到应用程序沙箱，然后我就可以使用`UIVideoEditController`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T08:18:15.583

我能够成功编写视频轨道。我也可以将该文件保存到画廊。视频以原始文件的所有质量播放。但无法复制音频缓冲区，因此视频播放时没有声音。

但是，如果我尝试先写入音轨，然后再写入视频轨道，则视频缓冲区的写入失败。即 BOOL appended = [assetWriterInput appendSampleBuffer:buffer]; 返回 NO 失败。

缓冲区在写入音轨时被附加。然后我取消读取音轨并开始读取视频轨道。附加视频缓冲区失败。对于这两个文件我都设置 startSessionAtSourceTime:KCMTimeZero 。

如果我只写视频缓冲区，那么视频会在没有音频的情况下播放。

我希望能够复制画廊内的 .MOV 文件，其中包含所有音频+视频轨道。

****** *目的：最后我想编辑使用 UIVideoEditorController 复制的文件。我们不能直接在画廊中编辑文件。因此我首先将它复制到沙箱中然后编辑它。

# python - selenium 无法在 python 中的 win7 上打开 chrome 浏览器？

> ID：11414515
> 
> 赞同：0
> 
> 时间：2012-07-10T13:36:01.927
> 
> 标签：python, windows-7, selenium

我正在尝试在 Windows 7 上的 python 中使用 selenium webdriver 打开 chrome 浏览器，但它挂起。下面是我使用的代码：

`

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.proxy import *
import time
from pprint import pprint

chromeOps = webdriver.ChromeOptions()
print "after chrome opts", chromeOps
print dir(chromeOps)
pprint(chromeOps)
chromeOps.binary_location = "C:\\Users\\cvoicu\\AppData\\Local\\Google\\Chrome\\Application\\chrome.exe"

print "after binary loc"
browser = webdriver.Chrome("C:\\Python27\\chromedriver.exe", chrome_options=chromeOps)
print "after browser", browser
print dir(browser)
browser.get("http://www.google.com") 
```

`

你能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:07:18.673

我做了一些更改，去掉了 ChromeOpts，因为我的电脑上没有那个文件，它对我有用。确保将 chromedriver 添加到`PATH`，你应该没问题。

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.proxy import *
import time
from pprint import pprint
import os

chromedriver = "C:\Users\USER\AppData\Local\Google\Chrome\Application\chromedriver.exe"
os.environ["webdriver.chrome.driver"] = chromedriver

print "after binary loc"
browser = webdriver.Chrome(chromedriver)
print "after browser", browser
print dir(browser)
browser.get("http://www.google.com") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:52:35.533

消除：

```
chromeOps = webdriver.ChromeOptions()
print "after chrome opts", chromeOps
print dir(chromeOps)
pprint(chromeOps)
chromeOps.binary_location = "C:\\Users\\cvoicu\\AppData\\Local\\Google\\Chrome\\Application\\chrome.exe"

print "after binary loc" 
```

看看现在会发生什么。当我实例化 chrome 时，我只是设置了 chromedriver 的路径，它对我来说工作正常，也可能是在 Python27 中运行 chrome 驱动程序的烫发问题，也可以尝试将它移到其他地方

# c# - 如何从属性网格节点获取父表单名称？C＃

> ID：11414516
> 
> 赞同：1
> 
> 时间：2012-07-10T13:36:08.483
> 
> 标签：c#, winforms, propertygrid

我有一个托管在普通 winForm 上的属性网格。在属性网格中，我有一个节点。在一个节点中，我有一个下拉项目列表。当用户选择特定值时，我希望能够加载从继承方法调用的预先存在的对话框。我需要将 Parent IWin32Window 传递给该方法。有没有办法从我的属性网格节点属性中获取父窗口的实例名称？

我正在使用 PromptandCreateVariable 方法，它是 IDTSVa​​riableService 接口的一部分。

我到目前为止的代码是：

```
private IServiceProvider _sp = null;                            

public IServiceProvider ServiceProvider
{
    get { return _sp; }
    set { _sp = value; }

    [Category("Local Path"),
    Description("Specifies local Path")]
    public Variable LocalPath
    {
        get
        {
           //do something
           IDtsVariableService _dtsVariableService = 
               _sp.GetService(typeof(IDtsVariableService)) as IDtsVariableService;

           Variable newVariable =
               _dtsVariableService.PromptAndCreateVariable(
                   this, null, "LocalPath", "User", typeof(string));
        }
        set
        {
            //do something
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:29:51.693

通过在我的类中创建一个 IWin32Window 实例并将其传递给 PromptAndCreateVariable 方法，我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:45:01.397

如果您有控件，则调用 Control.FindForm()，但您也可以从 Form.ActiveForm 获取活动表单

# iphone - 使用地图任务添加注释。

> ID：11414517
> 
> 赞同：2
> 
> 时间：2012-07-10T13:36:14.073
> 
> 标签：iphone, ios, map, ios4, openstreetmap

如何使用地图任务添加注释，我正在尝试使用地图任务提供的示例添加注释。但我没有得到它，从 4 天开始就崩溃了。其实我发现

```
- (void)addAnnotation:(id <MQAnnotation>)annotation; 
```

in `mqmapview.h`,but`MQAnnotation`是包含此方法的协议

```
- (void)setCoordinate:(CLLocationCoordinate2D)aCoord; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:15:27.327

只是出于好奇，您为什么要使用 MQMapView 而不是 MKMapView？

我相信MKMapView更可靠！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T03:02:12.290

```
MQAnnotation *ULannotation = [[MQAnnotation alloc] initWithTitle:@"Current Location" andCoordinate:userLocation];

[mapView addAnnotation:ULannotation]; 
```

这就是我使用 MapQuest 添加注释的方式。使用您喜欢的任何名称初始化并分配一个新`MQAnnotation`名称，然后只需调用`addAnnotation`您`mapview`想要添加注释的名称。

# sql-server - 是否需要回滚交易？

> ID：11414522
> 
> 赞同：13
> 
> 时间：2012-07-10T13:36:44.287
> 
> 标签：sql-server, transactions

```
USE AdventureWorks;
GO
BEGIN TRANSACTION;
GO
DELETE FROM HumanResources.JobCandidate WHERE JobCandidateID = 10;
DELETE FROM HumanResources.JobCandidate WHERE JobCandidateID = 11;
DELETE FROM HumanResources.JobCandidate WHERE JobCandidateID = 12;
GO
COMMIT TRANSACTION;
GO 
```

如果第一个删除语句失败会发生什么？会执行第 2 和第 3 个删除语句吗？该示例没有任何错误处理，是否会在异常情况下保留打开的事务，还是 SQL Server 会自动回滚事务？开放交易=锁定资源，对吧？

我正在决定是否必须将 TRY...CATCH 应用于使用事务的存储过程。

我知道`set xact_abort on`，但想知道没有它会发生什么。

这是我在 docs - Controlling Transactions (Database Engine) 中找到的内容：

> 如果错误阻止事务的成功完成，SQL Server 会自动回滚事务并释放事务占用的所有资源

但是我在其他帖子中读到不会触发自动回滚。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T13:58:49.387

在您的示例中，如果不使用`SET XACT_ABORT ON`，即使第一条语句失败，事务也将继续并提交。在您引用的文本中，关键字是`if an error **prevents** the successful completion of a transaction`，并且`DELETE`语句失败不会阻止事务完成。

一个会导致自动回滚的错误示例是，如果与数据库的连接在事务中间被切断。在您引用的[MSDN 文章中](http://msdn.microsoft.com/en-us/library/ms175523%28v=sql.105%29.aspx)进一步说：

> 如果批处理中发生运行时语句错误（例如违反约束），则数据库引擎中的默认行为是仅回滚生成错误的语句。您可以使用 SET XACT_ABORT 语句更改此行为。执行 SET XACT_ABORT ON 后，任何运行时语句错误都会导致当前事务的自动回滚。编译错误（例如语法错误）不受 SET XACT_ABORT 影响。

使用错误处理来捕获错误并在需要时回滚总是一个好主意。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T13:57:24.440

我更喜欢手动控制过程：

```
BEGIN TRY
BEGIN TRAN

   -- do work

COMMIT
END TRY
BEGIN CATCH
    ROLLBACK
    RAISERROR (...)
END CATCH
GO 
```

# javascript - JSON 数组语法。大括号（对象语法）是绝对必要的吗？

> ID：11414523
> 
> 赞同：1
> 
> 时间：2012-07-10T13:36:45.870
> 
> 标签：javascript, json

json字符串是否可以只包含方括号？例如。：

```
[["state","accepted"],["r_by_uid",1]] 
```

我在解析该字符串时遇到了意外的字符错误……（自从我研究这个脚本以来已经很久了，我认为它以前有效）。

解析 json 字符串总是会从字符串中生成一个对象？或者是否可以将字符串解析为数组？

基本上我只想将字符串解析为数组，而不是对象。
我搜索了一些示例，但找不到任何仅使用方括号的示例。

这里要求的是保存 json 字符串的标签：

```
<button data-fproc='[["state","accepted"],["r_by_uid","1"]]' class="request_state_button"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:39:01.660

花括号不是绝对必要的。

`[["state","accepted"],["r_by_uid",1]]`是有效的 JSON。

JSON 文本可以是对象或数组。

请参阅[http://json.org/](http://json.org/)和[https://www.ietf.org/rfc/rfc4627.txt中的](https://www.ietf.org/rfc/rfc4627.txt)*JSON 语法*部分

[您可以在http://jsonlint.com/](http://jsonlint.com/)验证您的 JSON

* * *

在 Javascript 中，[`JSON.parse()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)返回一个数组：

```
JSON.parse('[["state","accepted"],["r_by_uid",1]]')
// result [["state", "accepted"], ["r_by_uid", 1]] 
```

请注意，数组也是 Javascript 中的对象。

它也适用于[`jQuery.parseJSON()`](http://api.jquery.com/jQuery.parseJSON/)：

```
jQuery.parseJSON('[["state","accepted"],["r_by_uid",1]]')
// result [["state", "accepted"], ["r_by_uid", 1]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:41:42.580

可能这会解释你的问题：

```
 var aAsArray = [["state","accepted"],["r_by_uid",1]];
 var aAsString = '[["state","accepted"],["r_by_uid",1]]';

 ​JSON.parse(aAsArray);​​​    //Uncaught SyntaxError: Unexpected token ....
 JSON.parse(aAsString); 
```

# android - Android + Stage3D - 空屏

> ID：11414524
> 
> 赞同：0
> 
> 时间：2012-07-10T13:36:47.500
> 
> 标签：android, flash, air, adobe, emulation

我试图弄清楚如何使用 Adob​​e Air 为 Android 编写应用程序。我选择了 Axel Framework（基于 Stage3D 的简单游戏引擎）和 FlashDevelop 作为我的工具。我写了我的第一个应用程序，它应该在屏幕上显示图像和一些文本。当我在桌面模式下运行这个应用程序时，它可以工作。不幸的是，当我在 Android 模拟器上安装它时，它只显示空白屏幕（在 [SWF] 标签中指定颜色）。我真的不知道怎么了。

**附加编译参数：** -swf-version=13

**目标框架：** AIR mobile 3.3

**应用程序.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<application xmlns="http://ns.adobe.com/air/application/3.0">

<id>air.TestAndroidAxl</id>
<versionNumber>0.1</versionNumber>
<supportedProfiles>mobileDevice</supportedProfiles>
<filename>TestAndroidAxl</filename>
<name>TestAndroid_Axl</name>

<android>
    <manifestAdditions><![CDATA[<manifest android:installLocation="auto">
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-feature android:required="true"android:name="android.hardware.touchscreen.multitouch" />
    </manifest>]]></manifestAdditions>
    </android>

<initialWindow>
     <title>TestAndroid_Axl</title>
     <content>TestAndroidAxl.swf</content>
     <visible>true</visible>
     <fullScreen>false</fullScreen>
     <!--<autoOrients>false</autoOrients>-->
     <!--<aspectRatio>landscape</aspectRatio>-->
     <renderMode>direct</renderMode>
     <systemChrome>standard</systemChrome>
     <aspectRatio>landscape</aspectRatio>
 </initialWindow>

<icon>
    <image48x48>icons/icon_48.png</image48x48>
    <image57x57>icons/icon_57.png</image57x57>
    <image72x72>icons/icon_72.png</image72x72>
    <image114x114>icons/icon_114.png</image114x114>
    <image512x512>icons/icon_512.png</image512x512>
 </icon>
 </application> 
```

**主文件**

```
import flash.desktop.NativeApplication;
import flash.events.Event;
import flash.display.Sprite;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.ui.Multitouch;
import flash.ui.MultitouchInputMode;

public class Main extends Sprite {

    public function Main() : void {
        stage.scaleMode = StageScaleMode.NO_SCALE;
        stage.align = StageAlign.TOP_LEFT;
        stage.addEventListener(Event.DEACTIVATE, deactivate);

        // touch or gesture?
        Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

        // entry point
        var game : AxlGame = new AxlGame();
        addChild(game);
    }

    private function deactivate(e:Event) : void {
        NativeApplication.nativeApplication.exit();
    }

} 
```

**AxllGame.as**

```
import org.axgl.Ax;

public class AxlGame extends Ax {

    public function AxlGame() {
        super(PlayState);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:17:11.183

您可能想在带有 GPU 仿真的模拟器上试用它。设置方法如下：

1.  添加 Android 4.0.3（或更高版本）映像。
2.  编辑图像。在“硬件：”旁边，选择“新建...”</li>
3.  添加“GPU 仿真”。
4.  将其值设置为“是”。

# sql - 是否可以在 sql server 中为通用时间添加偏移值？

> ID：11414527
> 
> 赞同：1
> 
> 时间：2012-07-10T13:37:06.450
> 
> 标签：sql, sql-server, timezone, utc

我有一个调度应用程序，它托管在 Godaddy 的服务器上，正在亚利桑那州使用。我遇到的问题是时区问题。服务器的时区与用户的时区不同。我想在数据库中执行此操作，因为我可以通过`select GETUTCDATE()`. 现在我想将其转换为亚利桑那州的时区，因为亚利桑那州的一些地方支持夏令时，而有些地方不支持。那么有人可以让我知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:03:17.607

也许您应该尝试创建计算列。

```
ALTER TABLE <your_table>
   ADD <your_column> AS (
      DATEADD(
         /*FOR EXAMPLE*/ HOUR, 
         /*OFFSET*/      -5, 
         /*BASE_DATE*/   sysdatetime()) 
      ) 
```

Ofcorse for Offset 您可以指定依赖于其他列的值，例如：

```
 ALTER TABLE <your_table>
   ADD <your_column> AS (
      DATEADD(
         /*FOR EXAMPLE*/ HOUR, 
         /*OFFSET*/      -<date_offset_column>, 
         /*BASE_DATE*/   sysdatetime()) 
      ) 
```

# python - python中的复杂排序

> ID：11414529
> 
> 赞同：1
> 
> 时间：2012-07-10T13:37:11.843
> 
> 标签：python, sorting, python-3.x

我正在使用 Python 3.2，并希望根据配置文件对元组列表进行排序：

```
formats=CCC;aaa;BBB
providers=yy;QQ;TT 
```

每个元组都包含以下信息：

```
( title, size, format, provider ) 
```

我希望这组元组首先按提供者列表排序。所有 yy 都在 QQ 和 TT 之前。

然后，保持这个结果顺序，进入格式。所有 CCC 在 aaa 之前在 BBB 之前。

最后，第三个标准是按大小（浮点数）按降序排序。

至关重要的是，每个步骤都使用稳定的排序，以便二级排序保持第一个排序的顺序，依此类推。

我怎样才能以pythonic方式做到这一点？谢谢。

**编辑 1**

这是我尝试过的，我的它显然不会工作，因为`sorted(mydata)`. 在这种情况下，mydata 不能是列表。

```
providers="yy;QQ;TT"
formats="CCC;aaa;BBB"

p_dict = {}
f_dict = {}

for k,v in enumerate(providers.split(';')):
    p_dict[k] = v

for k,v in enumerate(formats.split(';')):
    f_dict[k] = v

mydata = (
                ('title1', 423.4, 'QQ', 'aaa'),
                ('title2', 523.2, 'TT', 'CCC'),
                ('title3', 389.0, 'yy', 'aaa'),
                ('title4', 503.2, 'QQ', 'BBB') )

sort1 = sorted( mydata, key=p_dict.__getitem__)
print(sort1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:27:11.283

```
def sort_key(data):
    title, size, format, provider = data
    return p_dict[provider], f_dict[format], -size 

print sorted( mydata, key = sort_key) 
```

基本上，设计一个关键函数来生成将按所需顺序排序的元组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:18:59.207

创建格式和提供程序的序列，然后使用复合键（读取：元组）查找当前元素中值的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T17:54:44.763

这基本上是@Winston Ewert 的答案，但它是完整的工作代码。`dict()`请注意，您可以通过将可迭代对象传递给;来创建字典。在这里，我们创建了一个生成器表达式来交换我们从`enumerate()`.

```
providers="yy;QQ;TT"
formats="CCC;aaa;BBB"

d_providers = dict((k, v) for v, k in enumerate(providers.split(';')))
d_formats = dict((k, v) for v, k in enumerate(formats.split(';')))

def key_mydata(m):
    return (d_providers[m[2]], d_formats[m[3]], -m[1], m[0])

mydata = (
                ('title1', 423.4, 'QQ', 'aaa'),
                ('title2', 523.2, 'TT', 'CCC'),
                ('title3', 389.0, 'yy', 'aaa'),
                ('title4', 503.2, 'QQ', 'BBB') )

sort1 = sorted(mydata, key=key_mydata)
print(sort1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:28:52.020

使用将每个部分转换为索引的键函数：

```
providers = providers.split(';')
formats = formats.split(';')
def sort_key(item):
    title, size, format, provider = item
    return (providers.index(provider), formats.index(format), -size, title)
print(sorted(mydata, key=sort_key)) 
```

请注意，Python 排序是稳定的，因此您也可以先按大小降序排序，然后按格式排序，然后按提供者排序。

# java - 在多个函数调用中传递时布尔值的永久化

> ID：11414533
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:37:28.237
> 
> 标签：java

在下面的代码中，对函数内的布尔值 modifyPerson 所做的更改是否会保持不变，或者每次调用新函数时都会更改为其初始值。

另外我想知道如果我使用原始 boolean modifyPerson 而不是 Boolean 有什么区别。

```
public void validatePersonDTO(PersonDTO personDTO, TransactionLogDTO logDTO,ArrayList regionIdList,Boolean modifyPerson) {
    try {

        validateEffectiveIn(personDTO, logDTO,modifyPerson);

        validateCdsId(personDTO, logDTO,regionIdList,modifyPerson);

        validateEmpFirstName(personDTO, logDTO);

        validateEmpLastName(personDTO, logDTO);

        validateFinDept(personDTO, logDTO,modifyPerson);

        validateEmployeeClass(personDTO, logDTO,modifyPerson);

        validateWorkLoadandBudgetFTE(personDTO, logDTO,modifyPerson);

        validateStatusandDescription(personDTO, logDTO,modifyPerson);

        validateSalGrade(personDTO, logDTO);

        validateCostRate(personDTO, logDTO);

        validateJobCode(personDTO, logDTO,modifyPerson);

        validateRateCardCharged(personDTO, logDTO);

        validateSupervisorId(personDTO, logDTO);

    }catch (Exception e) {
        logDTO.setGyr("R");
        logDTO.setMessage(logDTO.getMessage()+";"+"PersonDTO could not be validated");
        //LOGGER.error("personDTO could not be validated: " + personDTO, e);
    }
}

protected void validateEffectiveIn(PersonDTO personDTO, TransactionLogDTO logDTO,boolean modifyPerson) throws Exception{

    todaysDate=convStringToDate(now(),Constants.DATE_PATTERN_LONG);

    if(effIn.after(todaysDate)){
        modifyPerson=true;
        logDTO.setGyr("R");
        logDTO.setMessage(logDTO.getMessage()+";"+"Error in Effective In date "+effIn.toString()+"cannot be greater than today’s date");
        throw new Exception ("Error in Effective In date "+effIn.toString()+"cannot be greater than today’s date");
    }

    else{
    modifyPerson=false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:39:05.957

不，它不会传播，使用原语也无济于事。

解决此问题的最简单方法是返回更新的布尔值，并将方法调用的结果分配回变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:39:44.970

`modifyPerson`原始变量是按值传递的，因此一旦方法退出，对参数的更改就会丢失。

如果您想保留更改，`boolean`请从您的方法返回，并将其分配给`modifyPerson`，如下所示：

```
boolean validateEffectiveIn(PersonDTO personDTO, TransactionLogDTO logDTO) {
    ...
    return modifyPerson; // true or false
}

...
modifyPerson = false;
modifyPerson |= validateEffectiveIn(person1DTO, logDTO);
modifyPerson |= validateEffectiveIn(person2DTO, logDTO); 
```

您还可以创建自己的封装 a 的可变类`boolean`，并允许其用户获取和设置其值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:42:00.077

Java 是按值传递的。这意味着传递的任何原语或引用（如您在此处所使用的）都有一个本地副本，并且更改它不会更改调用者持有的值。

当您在设置此布尔值后抛出异常时，您不需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:53:15.033

我用过

```
boolean validateEffectiveIn(PersonDTO personDTO, TransactionLogDTO logDTO) {
return     modifyPerson; // true or false }  . 
```

谢谢大家的帮助...

# html - 我在哪里将html表单动作文件放在mvc中

> ID：11414535
> 
> 赞同：0
> 
> 时间：2012-07-10T13:37:32.633
> 
> 标签：html, asp.net-mvc

我正在做一个使用 mvc 的教程。我有以下看法：

索引.aspx

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<MovieApp.Models.Movie>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
   Index
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>Index</h2>

<form action="Movie/List" method="post">
    <table>
    <tr>
     <td>
         <button id="List" type="button" onclick="">List</button>
     </td>    
 </tr>
 </table>
</form>

<form action="Create.aspx" method="post">   
<table>
 <tr>
     <td>
         <input type="submit" value="Create" />
     </td>    
 </tr>
 </table>
</form>
</asp:Content> 
```

所以当你点击创建它必须调用创建视图。当我运行应用程序时出现错误：找不到资源。在电影文件夹中创建.aspx 视图。

我需要为要找到的 Create.aspx 指定什么路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:47:19.887

您不应该指向页面 Create.aspx。您应该指向控制器中名为 Create 的方法。

在您使用的任何控制器上都不清楚，但默认情况下它将发布到自己的控制器（同名）。或者您可以使用 Html.BeginFrom 指定要发布的方法和控制器：

```
@using (Html.BeginForm("Method", "Controller", FormMethod.Post))
                    {
<table>
 <tr>
     <td>
         <input type="submit" value="Create" />
     </td>    
 </tr>
 </table>

} 
```

# php - 从普通数组的值设置一个关联数组的键

> ID：11414536
> 
> 赞同：0
> 
> 时间：2012-07-10T13:37:35.710
> 
> 标签：php, mysql, arrays

我有一个关联数组和一个普通数组，一个称为列，一个称为行

rows 将键作为行名，将值作为行的值

例如 a_id -> 1

现在列数组有九个元素，这些值是列名 a.a_id 是这 9 个值之一

我需要将列数组的值设置为在行数组键中找到的相应列，记住它们不匹配，除非表前缀被删除

# javascript - 从定界字符串中读取数据以创建选择元素

> ID：11414538
> 
> 赞同：0
> 
> 时间：2012-07-10T13:37:50.090
> 
> 标签：javascript, jquery, select

我有一个字符串：

```
x|y|z;x|y|z;x|y|z;x|y|z; 
```

我已将实际值替换为 x、y 和 z

它由`;`然后分隔`|`

我想要的是

```
<select>
    <option>x z</option>
    <option>x z</option>
    <option>x z</option>
    <option>x z</option>
</select> 
```

我不需要获得`y`价值。

不知道如何做到这一点！任何想法都会很棒！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:41:00.587

您首先要在字符上拆分字符串，`;`以便拥有 xyz 组合数组：

```
var arr = str.split(";");
arr.pop(); // remove the last item:
           // your example has a trailing `;` which adds an empty item 
```

然后，您希望在`|`字符上拆分每个组合，以获得单独的 xyz 值。然后你可以使用这些值来创建一个`<option>`元素。

```
// loop the array
$.each(arr, function() {
  var values = this.split("|");
  // ignore values[1], that's the y value
  $("<option>").text(values[0] + " " + values[2]).appendTo("select");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:52:11.413

POJS 解决方案使用一个正则表达式在两者上进行拆分，`|y|`并且`;`是：

```
function genSelect(s) {
  var arr = s.split(/\|y\||;/);
  var sel = document.createElement('select');
  var t;

  for (var i=0, iLen=arr.length; i<iLen; i++) {
    t = arr[i] + ' ' + arr[++i];
    sel.appendChild(new Option(t, t));
  }

  return sel;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:44:20.587

你去： http: [//jsfiddle.net/bfRyW/](http://jsfiddle.net/bfRyW/) 希望它有帮助！

```
var string = 'x|y|z;x|y|z;x|y|z;x|y|z;';

var split1 = string.split(';');
split1.pop();

$.each(split1,function(index,value){
    var a = value.split('|');
    $('select').append('<option>'+a[0]+' '+a[2]+'</option>');
});
​ 
```

# c# - Checked Changed 事件的复选框事件处理程序在检查状态被修改时不会触发

> ID：11414540
> 
> 赞同：1
> 
> 时间：2012-07-10T13:37:51.843
> 
> 标签：c#, asp.net, events, checkbox, triggers

CheckBox 不会触发 oncheckedchanged 事件：

```
<asp:CheckBox ID="ccCritica" runat="server" 
                                style="z-index: 1; right: 15px; top: 100px; position: absolute" 
                                oncheckedchanged="ccCritica_CheckedChanged" /> 
```

.

```
protected void ccCritica_CheckedChanged(object sender, EventArgs e)
{
    if(ccCritica.Checked == true)
    {
        ddSarcinaDep.Enabled = true;
    }
} 
```

我尝试过调试，但它不调用事件处理程序。我正在使用 Visual Studio 2010 专业版，我正在开发一个 ASP.NET Web 应用程序。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T13:40:39.277

`AutoPostBack="true"`在 aspx 中设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:09:33.933

使用以下代码：

```
<asp:CheckBox ID="ccCritica" runat="server" style="z-index: 1; right: 15px; top: 100px; position: absolute" AutoPostBack="true"
                            oncheckedchanged="ccCritica_CheckedChanged" />

    protected void ccCritica_CheckedChanged(object sender, EventArgs e)
    {
        if (ccCritica.Checked == true)
        {

            ccCritica.Enabled = true;
        }
    } 
```

# c# - XAML 中的可见名称

> ID：11414545
> 
> 赞同：1
> 
> 时间：2012-07-10T13:38:16.207
> 
> 标签：c#, wpf, xaml

我有一个数据网格，其中有一列包含`ComboBox`. 我已经`Name`为我的组合框设置了，但是这个名称在代码中不可见，为什么？

```
<DataGrid ...>
    <DataGrid.Columns>
        <DataGrid.TemplateColumn>
             <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox Name="mex" Style="{DynamicResource ComboBoxStyle}"
                              ItemsSource="{Binding Path=combolist}"
                              SelectionChanged="status_SelectionChanged" Height="auto" Width="Auto">
                    </ComboBox>
                </DataTemplate>
             </DataGridTemplateColumn.CellTemplate>
        </DataGrid.TemplateColumn>
        ...
    </DataGrid.Columns>
</DataGrid> 
```

在 C# 中代码`mex`是空的，不可见，为什么？

我也试过`x:Name="mex"`了，还是看不到。

C＃：

```
mex.ItemsSource = dt; 
```

未定义的`mex`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:01:23.557

A`DataGridColumn`从未真正在逻辑树或可视树中；它始终是`DataGridRow`with `DataGridCells`，因为它们是为 DataGrid 中的每一行自动创建的。

访问您的组件的唯一方法是构建一个复杂的绑定或使用逻辑或可视树帮助程序找到它。

顺便说一句，您应该将您`ItemsSource`的`ComboBox`通过设置`Bindings`为您行中的可用数据。您不能`ElementName`在 a中使用它来创建绑定，`DataGridTemplateColumn`因为它不在逻辑树或可视树中。

我发现了一个有趣的链接来解释 DataGrid 的可视化树：http: [//blogs.msdn.com/b/vinsibal/archive/2008/08/14/wpf-datagrid-dissecting-the-visual-layout.aspx](http://blogs.msdn.com/b/vinsibal/archive/2008/08/14/wpf-datagrid-dissecting-the-visual-layout.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:03:34.300

因为模板被所有行使用。如果名称可用。必须在一次可视化树中具有相同的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:07:26.953

当元素存储在项目模板中时，您不能直接引用它们。通常，您希望通过将 datacontext 设置为父对象来允许 viewmodel 处理绑定，然后允许项目模板中的元素拾取它。但是，根据您的问题，您似乎正在尝试直接从后面的代码中执行此操作。

这里有两个类似的问题和解决方案，用于设置项目的数据上下文以及引用项目模板中的元素。希望这可以帮助

[从 DataTemplate 访问父 DataContext](https://stackoverflow.com/questions/3404707/access-parent-datacontext-from-datatemplate)

和

[WPF - ItemsControl - 如何在 ItemTemplate 中找到我的“CheckBox”项目？](https://stackoverflow.com/questions/603203/wpf-itemscontrol-how-do-i-get-find-my-checkbox-item-that-is-in-the-itemtem)

# asp.net-mvc-3 - 有人知道任何与 MVC 不显眼验证一起使用的 jQuery 掩码插件吗？

> ID：11414547
> 
> 赞同：6
> 
> 时间：2012-07-10T13:38:17.720
> 
> 标签：asp.net-mvc-3, jquery-plugins, unobtrusive-validation, maskedtextbox

我一直在我的 ASP.Net 应用程序中使用以下掩码输入插件：

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

不幸的是，这不适用于 MVC 不显眼的验证。验证会在每一个令人讨厌的按键上触发。另外，当输入失去焦点时，正则表达式属性总是会失败，因为它会在掩码控件清除掩码之前将掩码读取为实际的用户输入。

有人遇到过与 MVC 验证配合得很好的蒙面文本框解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-14T05:31:30.330

先生，您可以使用 Bootstrap 占位符来显示掩码[链接，例如](http://getbootstrap.com/components/#input-groups)

```
<div class="input-group">
  <span class="input-group-addon" id="basic-addon1">@</span>
  <input type="text" class="form-control" placeholder="Username" aria-describedby="basic-addon1">
</div>
```

[![在此处输入图像描述](../Images/0475ee436a9148757d4f31c4a675e3eb.png)](https://i.stack.imgur.com/XKXrh.gif)

# .net - 使用 WCF 将对象发送到托管 MemoryCache 的服务

> ID：11414551
> 
> 赞同：0
> 
> 时间：2012-07-10T13:38:28.080
> 
> 标签：.net, wcf, serialization, tcp, memorycache

我正在修补 WCF 和 MemoryCache。目标是在 Windows 服务中托管 WCF，以便不同的客户端可以访问此缓存。

第一部分，设置主机工作正常，我可以通过单独的客户端应用程序写入和读取缓存。至少，当尝试将非常简单的对象放入缓存中时，例如字符串或值类型（例如 int）。

当我尝试一个“自定义”对象时，即使它只有一个字符串属性，事情也会开始出错：

```
There was an error while trying to serialize parameter http://tempuri.org/:value. 

TheInnerException message was 'Type 'Solution.MyType' with data contract name 
'MyType:http://schemas.datacontract.org/2004/07/MyType' is not expected. 
Consider using a DataContractResolver or add any types not known statically to the list    
of known types 
- for example, by using the KnownTypeAttribute attribute or by 
adding them to the list of known types passed to DataContractSerializer.'.
Please see   InnerException for more details. 
```

现在经过一番搜索，我发现我可能不得不用 KnownType 属性来装饰我的类型，但可惜没有成功。我还尝试使用 DataContract 和 DataMember 属性来装饰它，但也没有 sigar。

现在做什么？WCF DataContractResolver 不应该为我完成这项工作吗？我很难相信我必须为我想要序列化的每个类编写一个自定义 DataContractResolver。DataContract 和 DataMember 属性还有什么用途？

我在这里想念什么？另请注意，MyType 不会从另一个类（保存对象）继承。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:46:59.897

你试过用 Serizlizable 标记标记 MyType 吗？查看 MSDN 库中的“[设计服务合同](http://msdn.microsoft.com/en-us/library/ms733070.aspx)”，了解如何正确创建服务。另外，从服务和实现类中发布一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:52:37.873

我想你需要处理 WCF 最有趣的部分之一是 KnownType，看看这里：http: [//msdn.microsoft.com/en-us/library/ms730167.aspx](http://msdn.microsoft.com/en-us/library/ms730167.aspx)，基本上你需要指定需要序列化的每个“子”类型的[KnownTypeAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.knowntypeattribute.aspx)，即使它们被标记为可序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:21:46.983

我通过实现一些自定义序列化解决了这个问题：

```
string result = string.Empty;
        Encoding encoding = Encoding.UTF8;
        DataContractSerializer ser = new DataContractSerializer(typeof(MyType));
        MemoryStream stream = new MemoryStream();
        using (XmlDictionaryWriter writer = XmlDictionaryWriter.CreateTextWriter(stream, encoding, true))
        {
            ser.WriteObject(writer, principal);
            writer.Flush();
            result = encoding.GetString(stream.ToArray());
        } 
```

这足以满足我的目的。

# sharepoint-2010 - 报告订阅中的 SSRS Sharepoint 集成发件人地址

> ID：11414559
> 
> 赞同：0
> 
> 时间：2012-07-10T13:39:06.097
> 
> 标签：sharepoint-2010, ssrs-2008

我需要更改 SharePoint 上报告订阅的 From: 地址（以集成模式运行）。我相信您可以在 Reporting Services Config Mgr 中执行此操作，但我想知道是否有办法从 SharePoint 或 Sharepoint Config Mgr 执行此操作。

我在 Sharepoint 2010 上使用 SSRS 2008 R2。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:23:45.783

对于 SSRS 2008 R2，SharePoint 2010 或 SharePoint 2010 Central Admin 中没有任何内容允许您更改发件人地址。它通过 SSRS 配置管理器进行严格控制。您的另一个选择是直接编辑 rsreportserver.config 文件，但是当使用配置管理器更安全时，为什么要这样做呢？或者你可以编写一个应用程序。理论上，您可以创建一个在 SharePoint 中显示的 Web 表单，用于更新服务器设置。请参阅此处的方法 3：[http ://www.dbafarm.com/blog/2011/02/03/setupdate-the-from-address-email-ssrs-subscriptions/](http://www.dbafarm.com/blog/2011/02/03/setupdate-the-from-address-email-ssrs-subscriptions/)

# asp.net - 如何在 ASP.NET 中的会话超时后重定向或关闭浏览器？

> ID：11414560
> 
> 赞同：0
> 
> 时间：2012-07-10T13:39:09.267
> 
> 标签：asp.net, session-timeout, object-reference

我有一个 Catcha 值（安全代码），它存储在 PageLoad 的 Session 中，当用户单击搜索按钮时将使用它。如果用户处于空闲状态超过 20 分钟，则 Session 的值将过期。当用户点击搜索按钮时。它引发错误“对象引用未设置为对象的实例”。

在页面加载上：

```
 if (!IsPostBack)
        {
            Session["CaptchaImageText"] = new RandomGen().GenerateRandomCode();

        } 
```

在 SearchButtonClick 事件中：

```
if (SecurityCodeTextBox.Text.Trim() == Session["Captcha"].ToString())
        {
            return true;
        }
        else
        {
            return false;
        } 
```

在这里我收到错误**“对象引用未设置为对象的实例”。** 我还检查了**Session["Captcha"]!= null**。但它仍然显示相同的错误。

如何重定向或显示*“会话超时！再次访问”消息并关闭浏览器。*

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:51:44.830

您的代码看起来与您的 Session 变量命名不一致（我强烈支持这些常量）。

话虽这么说，处理您的情况的最简单方法是

```
private void Page_Load(object sender, System.EventArgs e)
{     
    Response.AddHeader("Refresh",Convert.ToString((Session.Timeout * 60) + 5)); 
    if( string.IsNullOrEmpty(Session["Captcha"] as string) ) 
    {
         Server.Transfer("RedirectPage.aspx");
    }
} 
```

这将导致会话到期时页面重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:49:17.807

要关闭浏览器，您需要一个客户端脚本...服务器端无法执行此操作，因此您可以生成一些 javascript 调用`window.close();`。对于消息错误，检查 Session[] 是否不为空，如果你调用 this 的某个方法并且它为空，你会得到这种异常。尝试这样的事情：

```
if (Session["Captcha"] == null)
{
   Page.ClientScript.RegisterStartupScript(this.GetType(), "alert", "alert('Session Timeout! Visit again.'); window.close();", true);
   return false;
}

return (SecurityCodeTextBox.Text.Trim() == Session["Captcha"].ToString()); 
```

# internet-explorer - CakePHP/JQuery：AJAX 在 Chrome/Firefox 中正常工作，但在 IE 中不能正常工作

> ID：11414561
> 
> 赞同：1
> 
> 时间：2012-07-10T13:39:13.157
> 
> 标签：internet-explorer, cakephp, jquery

**语境**

对于一个研究项目，我们正在为用户计算产品推荐。当这些推荐被创建（`createList`通过 AJAX 调用的方法）时，用户应该看到一个等待页面。动作返回后`createList`，他应该被重定向到结果（`showList`）。这在 Firefox 和 Chrome 中运行良好，但在 IE（Win7 上的版本 9）中却不行。似乎它正在同步调用这两个动作。

**代码**

我通过 JsHelper 将 JQuery 与 CakePHP 1.3 一起使用。这是等待页面视图中的 JsHelper 代码：

```
echo $this->Js->domReady($this->Js->request(    array('controller' => 'probands', 'action' => 'createList', $pid),
                                                array('complete' => $this->Js->redirect(array('controller' => 'probands', 'action' => 'showList', $pid)))
                                        )
                    ); 
```

这是 CakePHP 的 JsHelper 创建的结果 JavaScript：

```
$(document).ready(function () {$.ajax({complete:function (XMLHttpRequest, textStatus) {window.location = "/socrec/probands/showList/1";}, url:"\/socrec\/probands\/createList\/1"});}); 
```

您能给我一些提示，告诉我如何改进解决方案，使其在 IE 中也能正常工作吗？此外，如果您对更好地实现我想要实现的目标有一般性意见，我也很高兴听到这些意见，因为我对 AJAX 还是很陌生。谢谢！

# xslt-1.0 - XSL 遍历属性并忽略某些元素

> ID：11414564
> 
> 赞同：0
> 
> 时间：2012-07-10T13:39:17.340
> 
> 标签：xslt-1.0

我需要做相当简单的事情来迭代我的 XML 中的元素（在 XML 下有更多解释）

```
<form>
<field index="1" name="field_X_1" group="firstGroup" type="String">
<value>Value of Field X 1 of first group</value>
</field>

<field index="1" name="field_Y_1" group="firstGroup" type="String">
<value>Value of Field Y 1 of first group</value>
</field>

<field index="2" name="field_X_2" group="firstGroup" type="String">
<value>Value of Field X 2 of first group</value>
</field>

<field index="2" name="field_Y_2" group="firstGroup" type="String">
<value>Value of Field Y 2 of first group</value>
</field>

<field index="1" name="field_A_1" group="secondGroup" type="String">
<value>Value of Field A 1 of second group</value>
</field>

<field index="1" name="field_B_1" group="secondGroup" type="String">
<value>Value of Field B 1 of second group</value>
</field>

<field index="2" name="field_A_2" group="secondGroup" type="String">
<value>Value of Field A 2 of second group</value>
</field>

<field index="2" name="field_B_2" group="secondGroup" type="String">
<value>Value of Field B 2 of second group</value>
</field>

</form> 
```

现在我正在遍历 firstGroup 的所有字段，每次我发现索引已更改（通过将索引与同级索引进行比较）我添加换行符）。问题是我只需要迭代索引（但仍然保持 firstGroup 和 secondGroup 之间的区别）。

我的输出应该看起来像

```
Value of Field X 1 of first group, Value of Field Y 1 of first group
Value of Field X 2 of first group, Value of Field Y 2 of first group
Value of Field A 1 of second group, Value of Field B 1 of second group
Value of Field A 2 of second group, Value of Field B 2 of second group
etc 
```

我的 XSL 现在看起来像

```
 <xsl:for-each select='/form/field[@group="firstGroup"]'>
                <xsl:sort select="@index" order="ascending"></xsl:sort>     
                <xsl:if test='preceding-sibling::*[@group="firstGroup"][1]/@index != @index and count(preceding-sibling::*) != 0 '>
                    <xsl:text>&#xa;</xsl:text>
                </xsl:if>
                <xsl:value-of select="//field[@name=concat('field_X_', @index,')]/value"/>                              

                <xsl:value-of select="//field[@name=concat('field_Y_', @index,')]/value"/>                              
     </xsl:for-each>    
<!-- Differente iteration for second group-->
<xsl:text>&#xa;</xsl:text>
<xsl:for-each select='/form/field[@group="firstGroup"]'>
                <xsl:sort select="@index" order="ascending"></xsl:sort>     
                <xsl:if test='preceding-sibling::*[@group="firstGroup"][1]/@index != @index and count(preceding-sibling::*) != 0 '>
                    <xsl:text>&#xa;</xsl:text>
                </xsl:if>
                <xsl:value-of select="//field[@name=concat('field_A_', @index,')]/value"/>                              

                <xsl:value-of select="//field[@name=concat('field_B_', @index,')]/value"/>                              
     </xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:28:53.020

```
<xsl:output method="text" />

<xsl:template match="form">
    <!--* find all the groups *-->
    <xsl:variable name="groups">
        <xsl:call-template name="get-group-names">
            <xsl:with-param name="nodes" select="field" />
        </xsl:call-template>
    </xsl:variable>

    <xsl:call-template name="process-all-groups">
        <xsl:with-param name="group-names" select="$groups" />
    </xsl:call-template>

</xsl:template>

<xsl:template name="get-group-names">
    <xsl:param name="nodes" />
    <xsl:param name="result-so-far" />

    <xsl:choose>
        <xsl:when test="not($nodes)">
            <xsl:value-of select="$result-so-far" />
        </xsl:when>
        <xsl:when test="contains(
            concat(' ', $result-so-far),
            concat(' ', $nodes[1]/@group, ' '))" >

            <xsl:call-template name="get-group-names">
                <xsl:with-param name="nodes" select="$nodes[position() &gt; 1]" />
                <xsl:with-param name="result-so-far" select="$result-so-far" />
            </xsl:call-template>
        </xsl:when>

        <xsl:otherwise>
            <xsl:call-template name="get-group-names">
                <xsl:with-param name="nodes" select="$nodes[position() &gt; 1]" />
                <xsl:with-param name="result-so-far"
                    select="concat($result-so-far, $nodes[1]/@group, ' ')" />
            </xsl:call-template>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template name="process-all-groups">
    <xsl:param name="group-names" />

    <xsl:variable name="group" select="substring-before($group-names, ' ')"/>

    <xsl:if test="not(string-length($group) = 0)">
        <xsl:call-template name="index">
            <xsl:with-param name="n" select="1" />
            <xsl:with-param name="group" select="$group" />
        </xsl:call-template>

        <xsl:call-template name="process-all-groups">
            <xsl:with-param name="group-names"
                select="substring-after($group-names, ' ')" />
        </xsl:call-template>

    </xsl:if>
</xsl:template>

<xsl:template name="index">
    <xsl:param name="n" select="1" />
    <xsl:param name="group" />

    <xsl:variable name="with-n"
        select="/form/field[@group = $group][@index = $n]" />

    <xsl:if test="$with-n">

        <xsl:for-each select="$with-n">
            <xsl:sort use="@index" order="ascending" />

            <xsl:value-of select="value" />
            <xsl:if test="not(position() = last())">
                <xsl:text>,</xsl:text>
            </xsl:if>
        </xsl:for-each>
        <xsl:text>&#xa;</xsl:text>

        <xsl:call-template name="index">
            <xsl:with-param name="n" select="$n + 1" />
            <xsl:with-param name="group" select="$group" />
        </xsl:call-template>
    </xsl:if>
</xsl:template>
<xsl:template match="field"></xsl:template> 
```

# javascript - 更改适合边界框的区域

> ID：11414566
> 
> 赞同：0
> 
> 时间：2012-07-10T13:39:19.140
> 
> 标签：javascript, google-maps

假设我有一个全屏谷歌地图，左侧有一个 div（但严格来说，不是地图的覆盖或 UI 元素）并且绝对定位。

现在假设我有一个边界框（如：[ [lat, lng], [lat, lng] ]，我想让地图适合。如果我想让它考虑到那个 div 怎么办。我有绝对位置和它的大小（以像素为单位）。我可以在地图上指定“此区域超出范围，不要让边界框与之冲突”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:25:38.597

Are you trying to place a bounding box around the map or are you trying to ensure that all markers are displayed within the map? The api allows you to set up a bounding area so that when the map loads all points are visible within the map. The map will zoom or scale accordingly.

to setup bounds within your function add the following

```
 (function(){
    ..existing code 

    var bounds = new google.maps.LatLngBounds();
    var infowindow;   
    //Here I have an event listener that I have setup for the clicking of the markers 

    (function (i, marker) {
         google.maps.event.addListener(marker, 'click', function () {

            if (!infowindow) {
               infowindow = new google.maps.InfoWindow();
            }

            infowindow.setContent('Location: ' + i);

            infowindow.open(map, marker);
            });
         })(i, marker);
          bounds.extend(places[i]);
       }
      map.fitBounds(bounds)

   })(); 
```

There are a few things happening here. Map is the name of my DIV layer the anonymous function would just be used to wrap everything. The reason I added the click event code was to also show how I can get the map to auto position whenever I click on a marker to view the info window (using the bounds.extend(places[i]). Places is the array of coordinates that I have collected. I didn't add all the code such as for the marker generation but I would normally place this block of code following that. The bounds function as part of the api forces the map to auto position and zoom according to where the markers are located on the page. This ensures that when the map is rendered all markers are visible to the user. Not sure if this is what you wanted but if you can clarify I may be able to elaborate more.

Best of luck

# jsf - primefaces 对话框模型没有显示任何值

> ID：11414571
> 
> 赞同：0
> 
> 时间：2012-07-10T13:39:32.353
> 
> 标签：jsf, dialog, primefaces

我正在使用 primefaces 对话框模型在单击按钮时显示更多详细信息。但我无法获取对话框上的值。

```
 <p:dataGrid id ="boardpanel" var="item" value="#{bLDashBoardAction.listBondLoc}" columns="#{message.no_of_columns}"  
    rows="20" paginator="true">  

    <p:column>  
        <p:panel header="Details" style="text-align:center">  
            <h:panelGrid columns="1" style="width:100%;">  

         <h:outputText value="#{item.rackTagCode}"  title="#{item.rackTagCode}" /> 

                <p:commandLink update=":frmDashBoard:blDetail" oncomplete="blDialog.show()" title="View Detail">  
                    <p:graphicImage value="/images/search.png"/>   
                    ***<f:setPropertyActionListener value="#{item}" 
                            target="#{bLDashBoardAction.rackTagCode}" />***  
                </p:commandLink>  
            </h:panelGrid>  
        </p:panel>  
    </p:column>  

</p:dataGrid>  

<p:dialog header="BL Detail" widgetVar="blDialog" modal="true">
  <p:outputPanel id="blDetail" style="text-align:center;" layout="block">
 <h:panelGrid  columns="2" cellpadding="2">
    <h:outputLabel for="blNo" value="BL " />
        ***<h:outputText id="blNo" value="#{item.rackTagCode}" />*** 

</h:panelGrid> 
```

我从 BLDashBoardAction 类的 getListBondLoc 函数中获取 rackTagCode 列表。这是我的 getListBondLoc 函数：

```
private String  bondLocationId;
private String  serviceAreaId;
private String facilityId;
private String bondLocationCode;
private String awb;
private String  zoneId;
private String  sectorId;
private String rackTagCode;
private String blTagCode;
private String ipAddress;
private String  ptlStatusId;
private String errorCode;
private String processIndicator;
private String textMsg;
private String rackTagCodeSel;
private BondLocationEBean beanSel;

private List<BondLocationEBean> listBondLoc;

public String navigateList(){
    listBondLoc = bondLocBusServ.searchBondLocList();
    return "/jsp/dashboard/dashboard";
}

public void doSearch()
{

    listBondLoc = bondLocBusServ.searchBondLocList(sectorId, zoneId, facilityId,ptlStatusId);
} 
```

其余代码是上述属性的 getter 和 setter，其中 BondLocationEBean 映射到 db 中的所有列。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:49:03.723

您在对话框中调用了错误类型的变量。改变

`<h:outputText id="blNo" value="#{item.rackTagCode}" />`

到

```
<h:outputText id="blNo" value="#{bLDashBoardAction.rackTagCode}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:55:40.067

终于找到了解决办法

```
<f:setPropertyActionListener value="#{item}" 
                        target="#{bLDashBoardAction.blEbean}" /> 
```

我应该将 Ebean 对象作为目标，然后我可以使用 bLDashBoardAction.blEbean.rackTagCode 获取变量。

# javascript - Jquery .children() 没有按预期工作

> ID：11414574
> 
> 赞同：2
> 
> 时间：2012-07-10T13:39:42.540
> 
> 标签：javascript, jquery, forms, captcha

我正在尝试为 jQuery 制作一个基本的验证码模块。我有一个不错的开始，但由于某种原因 .children() 似乎不起作用。在这里看到它：http: [//jsfiddle.net/pTbeW/](http://jsfiddle.net/pTbeW/) 我目前有这个：

```
$(this).children('.captchain-start').hide();
$(this).children('.captchain-show').show(); 
```

如果我将其更改为

```
$('.captchain-start').hide();
$('.captchain-show').show(); 
```

它完美地工作。但是这个解决方案并不理想，因为它不允许这个验证码的两个实例出现在同一个页面上。我怀疑它与查询设置的html有关，但我不确定如何。我远非 javascript 和 jQuery 专家，但这似乎是一件相对容易的事情。我错过了什么？看了这么久是不是眼睛都累了？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:43:36.313

因为`'.captchain-*'`元素不是子元素，而是兄弟元素。尝试以下操作：

```
 $(this).nextAll('.captchain-start').hide();
 $(this).nextAll('.captchain-show').show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:48:35.097

您应该使用`$(this).nextAll()`而不是`$(this).children()`因为您要隐藏和显示的元素不是 a 元素的子元素，而是兄弟元素。

见[http://api.jquery.com/nextAll/](http://api.jquery.com/nextAll/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:45:52.460

```
this 
```

在您的单击事件中，引用了单击的元素，该元素是具有“captchain-start”类的元素。所以你不必扫描孩子，你可以使用：

```
$(this) 
```

对于实际单击的元素或元素选择器

反而。

# android - 样式化 Android ListView？

> ID：11414576
> 
> 赞同：0
> 
> 时间：2012-07-10T13:39:47.253
> 
> 标签：android, android-layout, android-listview, android-styles

我需要一些帮助来为 Android 应用程序设置 ListView 的样式。我正在尝试查找如何进行此类样式设置，但我认为我正在搜索错误的项目。

我的数据由 ContentProvider 返回的对象组成，CursorLoader 用于访问数据。数据将按日期包含部分标题。一个部分中的每个项目都有一个类别，我想用类别的颜色代码为最左边的边框（边距或填充）着色。请参阅下面的布局 xml。详细信息行由 3 行数据组成，左下角有一个按钮。

请参阅此 Google 绘图了解列表的外观。
[绘制我想如何设置 ListView 的样式](https://docs.google.com/drawings/d/1glqJfQZqdB7tGzNzoVGIHcb-7eRsXjjIADUhtLHUUHg/edit)

这种格式可以吗？

感谢您的任何帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- 
 *  This file is part of MythTV for Android
 * 
 *  MythTV for Android is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  MythTV for Android is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with MythTV for Android.  If not, see <http://www.gnu.org/licenses/>.
 *   
 * This software can be found at <https://github.com/MythTV-Android/mythtv-for-android/>
 *
-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/upcoming_header_row"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="8dp"
    android:paddingRight="8dp" >

    <TextView
        android:id="@+id/upcoming_header_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@color/body_text_1" />

</LinearLayout>

<LinearLayout
    android:id="@+id/upcoming_detail_row"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingLeft="8dp"
    android:paddingRight="8dp" >

    <TextView
        android:id="@+id/upcoming_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/body_text_1"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/upcoming_sub_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/body_text_1" />

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:paddingLeft="8dp"
            android:paddingRight="8dp" >

            <TextView
                android:id="@+id/upcoming_channel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:textColor="@color/body_text_1" />

            <TextView
                android:id="@+id/upcoming_start_time"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:textColor="@color/body_text_1" />

            <Button
                android:id="@+id/upcoming_dont_record"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:text="@string/btn_upcoming_dont_record"
                android:textColor="@color/body_text_1"
                android:textSize="@dimen/text_size_small" />

    </RelativeLayout>

</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:52:37.747

是的.. 使用 3 个不同的背景图像`upcoming_detail_row` 在您的代码中根据某些条件动态设置该 LinearLayout 的背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:12:04.707

您只需要水平方向的另一个 LinearLayout，然后需要一个 View 来保存颜色。将现有的cominging_detail_row 作为第二个元素嵌套在新的LinearLayout 中，将新的View（用于保存颜色）作为第一个元素。

然后您可以以编程方式设置该视图的背景颜色。

这是一个根据您的布局改编的示例。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:id="@+id/upcoming_header_row"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="8dp"
    android:paddingRight="8dp" >

    <TextView
        android:id="@+id/upcoming_header_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000" />
</LinearLayout>

<LinearLayout
    android:id="@+id/newLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <View
        android:id="@+id/view1"
        android:layout_width="10dp"
        android:layout_height="fill_parent"
        android:background="#ff0000" />

    <LinearLayout
        android:id="@+id/upcoming_detail_row"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingLeft="8dp"
        android:paddingRight="8dp" >

        <TextView
            android:id="@+id/upcoming_title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="title"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/upcoming_sub_title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="subtitle"
            android:textColor="#000000" />

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:paddingLeft="8dp"
            android:paddingRight="8dp" >

            <TextView
                android:id="@+id/upcoming_channel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:text="channel"
                android:textColor="#000000" />

            <TextView
                android:id="@+id/upcoming_start_time"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:text="startTime"
                android:textColor="#000000" />

            <Button
                android:id="@+id/upcoming_dont_record"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:text="button"
                android:textColor="#000000"
                android:textSize="14sp" />
        </RelativeLayout>
    </LinearLayout>
</LinearLayout> 
```

# iphone - 保存一个 int 值，然后加载然后应用程序加载

> ID：11414580
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:40:01.637
> 
> 标签：iphone

我正在制作一个应用程序，每次用户按下屏幕时都会更改图像。它使用 int 来知道然后更改图像。

我需要帮助来保存 int 值，然后按下屏幕并加载它，然后加载应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T13:43:00.787

你可以使用这个`NSUserDefaults`类：

```
// Write
[[NSUserDefaults standardUserDefaults] setInteger:7615 forKey:@"customIntegerValue"];
[[NSUserDefaults standardUserDefaults] synchronize];

// Read
NSLog(@"Integer = %i", [[NSUserDefaults standardUserDefaults] integerForKey:@"customIntegerValue"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:47:48.390

// 保存在首选项中

```
int highScore  = yourGameScore;
[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:highScore] forKey:@"HighScore"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

// 从 pref 中获取保存的值

```
highScore = [[[NSUserDefaults standardUserDefaults] objectForKey:@"HighScore"] intValue ]; 
```

你可以在这里看到类似的帖子：[stackOldPost](https://stackoverflow.com/questions/11365352/save-and-load-highscore/11365543#11365543)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:46:47.037

您可以将值保存在`NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];`

# php - 在 MySQL 中选择不同记录的问题

> ID：11414582
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:40:06.427
> 
> 标签：php, mysql, sql, database

我在编写 MySQL 查询以获取不同的结果时遇到问题。这是场景：我有一个名为 city 的表，如下所示。我现在有大约 131k 条记录。我必须选择不同的城市。我试图做子串，但我不知道每个的长度。感谢您提供这方面的帮助。

```
City
33098 Paderborn
Paderborn
Berlin
02826 Görlitz
10829 Berlin
Görlitz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:54:36.070

您对字符串格式有疑问。如果您假设数字位于开头或结尾，则可以使用以下内容：

```
select distinct trim(' 0123456789' from city) as city
from t 
```

这假设唯一的问题是城市名称开头（或结尾）的数字和空格序列。

# c# - 如何从 C# 对 Word 文档进行分页

> ID：11414590
> 
> 赞同：0
> 
> 时间：2012-07-10T13:40:24.177
> 
> 标签：c#, asp.net, export-to-word

例如，如何对 word 文档进行分页

如果有 10 页：

第 1 页，共 10 页

第 2 页，共 10 页...

如果有 15 页

第 1 页，共 15 页

15 个中的 2 个 ...

以此类推生成动态页数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T10:04:12.663

请参阅[如何使用 Open XML 从 c# 对 Word 文档进行分页](https://stackoverflow.com/questions/11013773/how-to-paginate-a-word-document-from-c-sharp-with-open-xml?rq=1) 。

如果你可以为它生成xml。

*   创建一个新的Word文档，
*   将分页设置为。
*   将文档另存为 XML 查看标签以进行分页。你可能会发现类似 footer1.xml

# javascript - 颜色框和图像调整大小

> ID：11414593
> 
> 赞同：4
> 
> 时间：2012-07-10T13:40:27.713
> 
> 标签：javascript, colorbox

我有一个画廊，我希望用户使用 Colorbox 打开图片。（然后用邮件发送图片或打印等）

该站点必须动态编程，因为它也必须在 iPad 上运行。

现在到实际问题：

这个 div 应该显示在 Colorbox 中：

```
<div style = "display:none"> 
 <div id="inline" style="height:100%; width:auto"> 
    <img src="#" id="inline_img" style="max-height:90%; max-width:100%"/> 
    <div id="buttons">
        <button > test </button>
        <button > test1 </button>
        <button > test2 </button>
    </div>
 </div>
</div> 
```

这是 div 在颜色框中打开的 Javascripit 函数。

```
$(function(){
  //$('.element a').colorbox({});
  $('.element a').click(function(){
      // Using a selector:
    $('#inline_img').attr('src',$(this).find("img").attr('src'));
    $.fn.colorbox({
        inline:true,
        href:"#inline",
        maxHeight:'90%',
        maxWidth:'90%'
        }); 
    return false;
  });
  $('.element a').colorbox({    
        onComplete : function() { 
        $(this).colorbox.resize(); 
        }    
    }); 
```

但是彩盒总是比图片本身大得多。Colorbox 必须与 Image 一样大并且位于屏幕的中心。

![问题](../Images/2b1945961e4b6077876dd286a439b572.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-10T07:47:11.663

我正在使用以下代码并解决问题。

```
$('.colorBox').colorbox({
     scalePhotos: true,
     maxWidth: '100%'
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T21:34:29.767

这个结果对我来说很有意义。你给了 colorbox 一个没有定义宽度的 display:block 元素，并要求它估计大小，这当然是可用宽度的 100%。

# javascript - 按钮单击时的 Codeigniter 路由

> ID：11414595
> 
> 赞同：0
> 
> 时间：2012-07-10T13:40:32.743
> 
> 标签：javascript, codeigniter

嗨，我正在为这个项目使用 codeigniter

我有一个按钮元素如下

```
<div class=" pull-right" id="container">
    <button class="btn btn-info">
       <a style="text-decoration:none;color:white" href="">Guide</a>
    </button>
</div> 
```

此按钮元素是 div 的一部分，它是搜索结果之一。当我点击按钮时，如何将 div 的信息传递给我想要的控制器？我要传递的信息只是 div 的元素 id，即“容器”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:02:41.113

使用 jQuery：

```
$('.btn').click(function () {
    $.ajax({
        type : "POST",
        url : 'controller/method',
        data: {id : $(this).parent().attr('id')},
        success : function(data) {}
    });
}); 
```

在您的控制器中：

```
$id = $this->input->post('id', TRUE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:52:39.667

尝试这样做

```
<button class="btn btn-info">
   <a style="text-decoration:none;color:white" href="control/method/value">Guide</a>
</button> 
```

在你的课堂上可以这样做

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Control extends CI_Controller {

    public function method($value) {
        // Your value is in $value;
    }

} 
```

[更新] 动态获取父 ID 元素

```
<div class=" pull-right" id="container">
    <button class="btn btn-info" onclick="window.location='/controller/method/' + this.parentNode.id;">
       <a style="text-decoration:none;color:white">Guide</a>
    </button>
</div> 
```

# python - 在带有日期索引的熊猫中删除一行，python

> ID：11414596
> 
> 赞同：5
> 
> 时间：2012-07-10T13:40:36.927
> 
> 标签：python, pandas

我正在尝试删除`dataframe`由 python 中的 pandas 创建的最后一行，似乎遇到了麻烦。

```
index = DateRange('1/1/2000', periods=8)
df = DataFrame(randn(8, 3), index=index, columns=['A', 'B', 'C']) 
```

我尝试了这样的 drop 方法：

```
df.drop([shape(df)[0]-1], axis = 0) 
```

但它一直说标签不包含在轴中。

我还尝试按索引名称删除，但它似乎仍然无法正常工作。

任何意见，将不胜感激。谢谢！！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T13:51:12.303

```
df.ix[:-1] 
```

返回删除最后一行的原始 DataFrame。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-04-18T02:04:55.643

直接引用 DataFrame 来检索除最后一个索引之外的所有索引都对我有用。

```
df[:-1] 
```

# jquery - 网格单元格中的 Jqwidget 复选框始终被选中，即使它来自 Json 的值为 false

> ID：11414598
> 
> 赞同：0
> 
> 时间：2012-07-10T13:40:44.693
> 
> 标签：jquery, json, asp.net-mvc-3, javascript-framework

网格单元格中的 Jqwidget 复选框始终被选中，即使它来自 Json 的值在 asp .net mvc3 项目中为假。（在数据库端，我使用了位，在服务器端，我在模型定义中使用了 bool 类型）

![传入的 Json](../Images/20d7449dc9bb873ba5c77a58b557420f.png) ![结果网格](../Images/9b5b49b38cde4a575eca490cad670d0c.png)

客户端的源部分是：

```
var source = {
            datatype: "json",
            datafields: [{ name: 'KargoId' }, { name: 'Ad' }, { name: 'Soyad' }, { name: 'Urun' }, { name: 'Uygunluk' },
                         { name: 'YuklenmeTarihi', type: 'date' }, { name: 'Adet' }, { name: 'Fiyat'}],
            url: 'BindEditGrid'
        }; 
```

复选框列的列定义是：

```
{ text: 'Uygun', datafield: 'Uygunluk', columntype: 'checkbox', width: 67 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:02:15.750

布尔列的类型应在数据字段定义中设置为“布尔”。

# c++ - C++ 真实世界应用程序的 GUI 框架

> ID：11414606
> 
> 赞同：8
> 
> 时间：2012-07-10T13:41:07.423
> 
> 标签：c++, qt, mfc

C++ 应用程序比 .NET 具有更高的性能，因此很多应用程序都是用 C++ 编写的。

但是原始的 C++ 没有 GUI 支持，因此类似 Qt 的框架可以帮助开发人员开发桌面 GUI 应用程序。但是大多数应用程序也不是 QT 应用程序。

**对于 Adob​​e Photoshop 等大型跨平台 C++ 应用程序，最常用的 GUI 框架/库是什么？Qt 是否适用于大型应用程序？如果不是，那么使用这些库与 Qt 等更常见的跨平台库相比有什么优势？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:50:19.733

我的猜测是，这些类型的重型桌面应用程序构建在它们自己的（专有）GUI 库之上。反过来，这些是在一些低（ish）级别的 API 之上编写的，例如[“Windows API”](http://en.wikipedia.org/wiki/Windows_API)。我希望 Adob​​e 和 Autodesk 在内部开发这种东西，而不是使用一些公开可用的库（如 Qt）。

# java - 亚马逊网络服务 Java 类路径

> ID：11414608
> 
> 赞同：3
> 
> 时间：2012-07-10T13:41:13.743
> 
> 标签：java, unix, ubuntu, amazon-web-services, amazon-dynamodb

我正在尝试运行一个读取和写入亚马逊发电机数据库的应用程序。我下载了 Eclipse 工具包和 AWS SDK，如果我从本地 PC 运行应用程序，它可以完美运行。接下来，我将其导出为 jar 文件并将其上传到我的 EC2 实例。但是，当我在那里运行它时，我得到一个错误。

```
 /home/apps/java/database/bin$ java -jar myJar.jar
Exception in thread "main" java.lang.NoClassDefFoundError: com/amazonaws/auth/AW                                                                  SCredentials
Caused by: java.lang.ClassNotFoundException: com.amazonaws.auth.AWSCredentials
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: DynamoDB. Program will exit. 
```

我认为它与类路径有关，但在 /home/ubuntu/.bashrc 我已将其设置为：

```
CLASSPATH="./:/home/apps/java/database/bin/*:/home/apps/java/database/bin/aws-java-sdk-1.3.12.jar"
export CLASSPATH 
```

/home/apps/java/database/bin 包含 AWS 开发工具包中的所有 .jar 文件：

*   方面jrt.jar
*   aspectjweaver.jar
*   aws-java-sdk-1.3.12.jar
*   aws-java-sdk-1.3.12-javadoc.jar
*   aws-java-sdk-1.3.12-sources.jar
*   aws-java-sdk-flow-build-tools-1.3.12.jar
*   commons-codec-1.3.jar
*   commons-logging-1.1.1.jar
*   freemarker-2.3.18.jar
*   httpclient-4.1.1.jar
*   httpcore-4.1.jar
*   杰克逊核心asl-1.8.7.jar
*   jackson-mapper-asl-1.8.7.jar
*   邮件 1.4.3.jar
*   myJar.jar
*   spring-beans-3.0.7.jar
*   spring-context-3.0.7.jar
*   spring-core-3.0.7.jar
*   stax-1.2.0.jar
*   stax-api-1.0.1.jar

我错过了什么？？我已经看了一天半了。先感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:05:51.340

“/directory/*”的类路径条目可能会把事情搞砸。类路径用冒号分隔，但星号扩展给出空格。试试这个小 shell 脚本来启动它。

```
#!/bin/sh
JAVA_OPTS="-Xms256M -Xmx4G"
CP=`find /home/apps/java/database/bin/*jar -exec echo -n "{}:" \;`
java -cp ${CP%?} -jar yourjar.jar 
```

几点注意事项：

*   JAVA_OPTS 只是为了提醒您可能需要比默认内存更多的内存。
*   最后一行 CP 的疯狂语法去掉了最后一个字符，因为“查找”行最后留下了一个冒号。
*   如果它不是可执行 jar，您可能希望包含您的 jar 并启动正确的类。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-06T06:01:11.040

这个库列表适用于我 aws-java-sdk-1.11.285-javadoc.jar aws-java-sdk-1.11.285-sources.jar aws-java-sdk-1.11.285.jar aws-java-sdk。罐

```
aspectjrt-1.8.2.jar
aspectjweaver.jar
aws-swf-build-tools-1.1.jar
commons-codec-1.9.jar
commons-logging-1.1.3.jar
freemarker-2.3.9.jar
httpclient-4.5.2.jar
httpcore-4.4.4.jar
ion-java-1.0.2.jar
jackson-annotations-2.6.0.jarÅ
jackson-core-2.6.7.jar
jackson-databind-2.6.7.1.jar
jackson-dataformat-cbor-2.6.7.jar
javax.mail-api-1.4.6.jar
jmespath-java-1.11.285.jar
joda-time-2.8.1.jar
netty-buffer-4.1.17.Final.jar
netty-codec-4.1.17.Final.jar
netty-codec-http-4.1.17.Final.jar
netty-common-4.1.17.Final.jar
netty-handler-4.1.17.Final.jar
netty-resolver-4.1.17.Final.jar
netty-transport-4.1.17.Final.jar
spring-beans-3.0.7.RELEASE.jar
spring-context-3.0.7.RELEASE.jar
spring-core-3.0.7.RELEASE.jar
spring-test-3.0.7.RELEASE.jar 
```

# c++ - 返回子类型的成员模板函数

> ID：11414610
> 
> 赞同：4
> 
> 时间：2012-07-10T13:41:16.187
> 
> 标签：c++, visual-studio-2010, templates, visual-c++

是否有为模板类定义返回子类实例的成员函数的正确方法？

这是一个在 VC++ 2010 中无法编译的示例：

```
template<class T> class A {
public:
    class B {
    public:
        T i;
    };

    A();
    B* foo();
};

/////////////////////////////////////////////

template<class T> A<T>::A() {}

template<class T> A<T>::B* A<T>::foo() {
    cout << "foo" << endl;
    return new B();
} 
```

我明白了

```
Error   8   error C1903: unable to recover from previous error(s); stopping compilation 
```

在*定义*`foo`开始的那一行。

我有正确的包含和命名空间声明`iostream`等。

多谢你们！

**编辑：**

根据要求，这是错误的完整列表，都在同一行：

```
Warning 1   warning C4346: 'A<T>::B' : dependent name is not a type
Error   2   error C2143: syntax error : missing ';' before '*'
Error   3   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
Error   4   error C1903: unable to recover from previous error(s); stopping compilation
Warning 5   warning C4346: 'A<T>::B' : dependent name is not a type
Error   6   error C2143: syntax error : missing ';' before '*'
Error   7   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
Error   8   error C1903: unable to recover from previous error(s); stopping compilation 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:06:03.543

名称`A<T>::B`是依赖的，您需要提示编译器依赖的名称是类型

`template<class T> typename A<T>::B* A<T>::foo() {...}`

此行相同：`return new B();`->`return new typename A<T>::B();`

阅读：[我必须在哪里以及为什么要放置“模板”和“类型名”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

# css - 上面的文字 - 我的代码足够好吗？

> ID：11414611
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:41:26.173
> 
> 标签：css, image, html, text

我的代码是否足以在图像上方显示文本？它看起来类似于 stackoverflow 的橙色按钮“提问”，但不是按钮，不是链接。它只是一个文本和它周围的橙色。它工作正常，但如果代码看起来不错而且不愚蠢，我很高兴。

```
//css
    .date
    {
        float : left;
        width : 100px;
    }
//html   
<div class="date">
    <img src="orange.png">
    <div style="margin-top:-18px; margin-left:6px; color:#fff;">22.11.2012
    </div>
</div> 
```

结果，文本正好位于图像的上方（中心）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:48:12.460

像这样的东西会好得多：

CSS：

```
.date {
    padding: 5px;
    background-color: orange;
    color: #fff;
} 
```

HTML：

```
<span class="date">
    22.11.2012
</span> 
```

无论如何，您应该阅读一些有关 CSS 基础知识的内容。我进行了快速搜索，例如，[这可能是一个好的开始。](http://www.cssbasics.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:48:57.920

IMO 代码看起来非常拥挤。您可以轻松地制作一个锚点，其样式类似于这样的按钮：

```
a{

padding: 7px;
background-color: orange;
text-decoration: none;
color: black;
font-family: helvetica;
}

a:hover{

background: grey;

} 
```

[例子](http://jsfiddle.net/s64LC/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:50:39.927

鉴于您关心的是代码的美观性，我建议您这样做：

```
// css
.date
{
    float: left;
    width: 100px;
}
.date div
{
    margin-top: -18px;
    margin-left: 6px;
    color: #fff;
}

// html
<div class="date">
    <img src="orange.png">
    <div>22.11.2012</div>
</div> 
```

如果您可以在那里工作，则可能不需要负上边距`line-height:`，但我认为这可能看起来更专业。内联 CSS 从来都不是一件好事。

希望这可以帮助

# wordpress - Google+ 通过链接共享站点 - 不解析丰富的预览

> ID：11414621
> 
> 赞同：0
> 
> 时间：2012-07-10T13:41:47.653
> 
> 标签：wordpress, google-plus

我很茫然，我希望有人能指出我正确的方向。

无论出于何种原因，当与 Google+ 共享来自 www.southpugetsoundnews.com 的帖子时，它只会返回 HTML 链接。没有预览，没有拇指。但是，我可以通过[http://www.google.com/gwt/x?u=http%3A%2F%2Fwww.southpugetsoundnews.com](http://www.google.com/gwt/x?u=http%3A%2F%2Fwww.southpugetsoundnews.com)毫无意外地访问它，并且还可以使用 Rich Preview Snippet 工具。

WordPress Jetpack 和 Google 共享是否存在已知问题？我知道这不是服务器，因为我在同一个盒子上有更多帐户，谷歌也可以剪掉这些帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:58:38.310

www.southpugetsoundnews.com 的丰富预览不可用，因为该站点当前返回 406 Not Acceptable 以响应 HTTP GET。

```
 HTTP/1.0 406 Not Acceptable
 Date: Tue, 10 Jul 2012 23:57:14 GMT
 X-Powered-By: PHP/5.3.8
 Vary: Accept-Encoding,Cookie
 Cache-Control: max-age=3, must-revalidate
 WP-Super-Cache: Served supercache file from PHP 
```

# objective-c - Objective C - NSCalendar 到 NSString

> ID：11414626
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:41:54.840
> 
> 标签：objective-c, nsstring, nscalendar

我需要将 NSCalendar 转换为 NSString 以显示日期和时间分成两个不同的 UITextView 我找不到这样做的方法。所有示例都将 NSDate 转换为 NSString，但我需要使用 NSCalendar 来做到这一点！

感谢您的帮助，并为我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:51:15.520

与[`java.util.Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)对象表示时间实例的Java 不同，Java`NSCalendar`是一个允许您对`NSDate`对象执行操作的类，而根本不表示特定的时间点。

您可以使用 的实例根据特定的日历将`NSCalendar`其拆分为日期组件（日、月、小时等），将多个时间单位添加到 中，或将一堆日期时间组件组合成. 然后，您可以使用 将 转换为字符串。`NSDate``NSDate``NSDate``NSDate``NSDateFormatter`

# c++ - 使用变量值初始化静态变量有哪些运行时成本？

> ID：11414630
> 
> 赞同：2
> 
> 时间：2012-07-10T13:42:02.570
> 
> 标签：c++, static, initialization, runtime

在 C++ 中，在合理的编译器中，使用变量值而不是常量值初始化静态变量的预期运行时成本是多少？

例如考虑以下代码：

```
bool foo();
bool baz1() {
  const bool value = foo();
  static bool alternate1 = value;
  static bool alternate2 = false;

  // Do something.
  return alternate1;
} 
```

`alternate1`和之间的预期运行时成本差异是`alternate2`多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:56:34.097

从编译时常量（备选方案 2）初始化很可能发生在程序启动期间，每次调用函数时都没有成本。

局部静态变量的线程安全初始化将导致编译器生成类似下面的伪代码：

```
static bool alternate1;

static bool __initialised = false;
static __lock_type __lock;
if (!__initialised) {
    acquire(__lock);
    if (!__initialised) {
        alternate1 = value;
        __initialised = true;
    }
    release(__lock);
} 
```

因此，每次调用函数时都可能需要对标志进行测试（可能涉及内存屏障或其他同步原语），以及第一次获取和释放锁的进一步成本。

请注意，在您的代码中，`foo()`每次都会调用，无论变量是否已初始化。如果您将初始化更改为

```
static bool alternate1 = foo(); 
```

当然，细节取决于实现；这是基于我对 GCC 生成的代码的观察。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:48:58.047

`static`变量在程序开始时被初始化，这意味着初始化只会发生一次。仅一个布尔值的成本非常低，对您`alternate1`而言，执行的成本`foo()`是多少，在您的示例中并不多，因为它只是一个空函数。

概括地说，成本将是初始化您的基本类型（int、float 等）或初始化任何用户定义类型/库定义类型的成本（运行 ctor）的最大成本。任何`static`用函数初始化的，然后最大值将是正在执行的函数的成本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:20:10.113

您的问题似乎不是关于一般的静态变量，而是关于在函数内声明的静态变量。

从运行时值初始化此类变量的额外运行时成本源于多个来源

1.  当控件第一次传递其声明时（如果有的话），此类变量应仅初始化一次。为了实现为每个这样的变量分配一个额外的布尔变量/标志，并在每次控制通过声明时检查。如果标志表明该变量尚未初始化，则它会被初始化。

2.  对于那些具有非平凡析构函数的静态变量，语言必须保证它们在程序终止时的销毁顺序与其构造顺序相反。由于构建顺序是在运行时确定的，因此程序必须准备一个运行时结构来安排未来的销毁。对于具有非平凡析构函数的变量，这也是步骤 1 的一部分：它们按照构造顺序注册在构造对象的“列表”中。“列表”通常被实现为一个预分配的数组（因为它的最大大小在编译时是已知的）。

3.  在多线程配置中，上述步骤可能/将伴随着额外的锁定/解锁步骤。

Since these are all "household" expenses implemented "under the hood", the actual cost might greatly depend on the implementation. See/profile the code your specific compiler generates.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-10T13:56:50.760

设置`alternate1`值意味着调用函数，即使函数返回静态值，您也必须保存堆栈，调用函数，获取其返回值，恢复堆栈并将值分配给变量。

从字面上看，在第一种情况下，您将执行至少 8 行汇编代码，而在第二种情况下，您将只执行一行。

# charts - 如何在谷歌图表的水平轴上设置自定义间隔？

> ID：11414635
> 
> 赞同：2
> 
> 时间：2012-07-10T13:42:13.113
> 
> 标签：charts, google-visualization, data-visualization

我正在使用谷歌图表。我给了它这个数据：

```
var data = new google.visualization.DataTable(
   {
     cols: [{id: 'date', label: 'Date of like', type: 'date'},
            {id: 'likes', label: 'Number of likes', type: 'number'}],
     rows: [{c:[{v: new Date(2012, 7, 10, 00, 00)}, {v: 2}]},
            {c:[{v: new Date(2012, 7, 10, 11, 20)}, {v: 2}]},
            {c:[{v: new Date(2012, 7, 10, 11, 25)}, {v: 4}]},
            {c:[{v: new Date(2012, 7, 10, 11, 30)}, {v: 15}]},
            {c:[{v: new Date(2012, 7, 10, 12, 45)}, {v: 30}]},
            {c:[{v: new Date(2012, 7, 10, 13, 15)}, {v: 45}]},
            {c:[{v: new Date(2012, 7, 10, 14, 05)}, {v: 63}]},
            {c:[{v: new Date(2012, 7, 10, 16, 20)}, {v: 69}]},
            {c:[{v: new Date(2012, 7, 10, 18, 45)}, {v: 74}]},
            {c:[{v: new Date(2012, 7, 10, 20, 05)}, {v: 76}]},
            {c:[{v: new Date(2012, 7, 10, 23, 45)}, {v: 77}]},
            {c:[{v: new Date(2012, 7, 10, 24, 00)}, {v: 77}]}
           ]
   } 
```

在 Date 函数中，最后 2 个数字是小时数和分钟数。问题是谷歌图表似乎只允许我将日期的日期显示为水平轴上的值（网格线），但我想显示一天内的小时数。谷歌图表的比例似乎没有低于“一天”的单位。

有没有办法可以在横轴上显示小时数？提前致谢。

# facebook - Facebook 应用程序加载缓慢

> ID：11414637
> 
> 赞同：2
> 
> 时间：2012-07-10T13:42:18.627
> 
> 标签：facebook, facebook-php-sdk, performance

我的 Facebook 应用程序加载缓慢。当我摆脱 SDK PHP 时，它变得更快。

我做错了吗？有更快的方法吗？

```
require $_SERVER['DOCUMENT_ROOT'].'/facebook/src/facebook.php';
$appId = 'appid';
$appSecret = 'appsecret';

// Create your Application instance (replace this with your appId and secret).
$facebook = new Facebook( 
    array(
      'appId'  => $appId,
      'secret' => $appSecret,
      'fileUpload' => true,
      'cookie' => true
));

$user = $facebook->getUser(); 
```

# sqlbulkcopy - SqlBulkCopy.WriteToServer：是否可以取消操作？

> ID：11414648
> 
> 赞同：2
> 
> 时间：2012-07-10T13:42:48.573
> 
> 标签：sqlbulkcopy

我们使用 SqlBulkCopy 对象将文本文件数据传输到 db，尤其是通过 WriteToServer 方法。我们将允许用户取消操作。可能吗？我们应该怎么做？

SqlCommand 有一个 Cancel 命令，但 SqlBulkCopy 没有。

# json - 如何正确格式化外部文件中的 JSON 对象？

> ID：11414657
> 
> 赞同：1
> 
> 时间：2012-07-10T13:43:06.317
> 
> 标签：json, formatting, jqplot

我使用了[http://codeblitz.wordpress.com/2009/06/22/jquery-charts/提供的代码](http://codeblitz.wordpress.com/2009/06/22/jquery-charts/)

它使用 jqPlot。所以我有以下示例代码 Default.html 有效：

```
<script type="text/javascript">

var jsonObj = { "pageHits": [30, 60, 22, 5, 60, 88, 102], "rssHits": [33, 45, 121, 23, 55, 35, 77], "xAxis": ['Jan 2009', 'Feb 2009', 'Mar 2009', 'Apr 2009', 'May 2009', 'June 2009', 'Jul 2009'] };

$(function () {
    $.jqplot('chartDiv', [jsonObj.pageHits, jsonObj.rssHits], CreateBarChartOptions());
});

    function CreateBarChartOptions()
    {
        var optionsObj = {
            title: 'Blog Statistics',
            axes: {
                 xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    ticks: jsonObj.xAxis
                }
            },
            series: [{label:'Page Hits'}, {label: 'RSS Hits'}],
            legend: {
                show: true,
                location: 'nw'
            },
            seriesDefaults:{
                shadow: true,
                renderer:$.jqplot.BarRenderer,
                rendererOptions:{
                   barPadding: 8,
                   barMargin: 10
               }
            },
            highlighter: {
                showTooltip: true,
                tooltipFade: true
            }
        };
        return optionsObj;
    }
</script> 
```

我已复制代码并将其放入 Default.aspx。我唯一想要改变的是能够从外部文件中获取数据，所以现在我的代码是：

```
<script type="text/javascript">

  var jsonObj;
  $.getJSON('example.json', function (response)
  {
    jsonObj = response;
    alert(jsonObj.property);
  });

$(function () {
  $.jqplot('chartDiv', [jsonObj.pageHits, jsonObj.rssHits], CreateBarChartOptions());
    });

    function CreateBarChartOptions()
    {
      var optionsObj = {
        title: 'Blog Statistics',
        axes: {
          xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            ticks: jsonObj.xAxis
          }
        },
        series: [{ label: 'Page Hits' }, { label: 'RSS Hits'}],
        legend: {
          show: true,
          location: 'nw'
        },
        seriesDefaults: {
          shadow: true,
          renderer: $.jqplot.BarRenderer,
          rendererOptions: {
            barPadding: 8,
            barMargin: 10
          }
        },
        highlighter: {
          showTooltip: true,
          tooltipFade: true
        }
      };
      return optionsObj;
    }

</script> 
```

但是 jsonObj 总是未定义，我假设我的文件格式不正确。我试过 example.json 来包含这个：

{"pageHits": [30, 60, 22, 5, 60, 88, 102], "rssHits": [33, 45, 121, 23, 55, 35, 77], "xAxis": ['Jan 2009' , '2009 年 2 月', '2009 年 3 月', '2009 年 4 月', '2009 年 5 月', '2009 年 6 月', '2009 年 7 月']}

还有这个：

{"pageHits": [30, 60, 22, 5, 60, 88, 102], "rssHits": [33, 45, 121, 23, 55, 35, 77], "xAxis": ["2009 年 1 月" , "2009 年 2 月", "2009 年 3 月", "2009 年 4 月", "2009 年 5 月", "2009 年 6 月", "2009 年 7 月"]}

但无济于事。我究竟做错了什么？

感谢您的任何帮助，

朱利安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:46:52.477

您可能需要执行以下操作：

```
$.getJSON('example.json', function (response)
{
  var jsonObj = response;
  $.jqplot('chartDiv', [jsonObj.pageHits, jsonObj.rssHits], CreateBarChartOptions());
}); 
```

您现在拥有它的方式是触发 jqplot 的 annon 函数将运行“内联”，而 ajax 加载仍将继续。

# compilation - osgi 中的两个依赖包是如何编译的

> ID：11414663
> 
> 赞同：1
> 
> 时间：2012-07-10T13:43:26.420
> 
> 标签：compilation, dependencies, osgi, bundles

我正在学习 OSGi 框架。我发现 Bundles 由 .class 文件和清单文件组成。现在假设我有两个捆绑包 A 和 B，捆绑包 B 依赖于捆绑包 A 的服务。因此，在编译捆绑包 B 时，我必须将捆绑包 A 的服务类保留在捆绑包 B 的类路径中，或者必须将其（捆绑包 A 的服务）保留在捆绑包 B 中，以便编译器可以编译。现在，如果我们这样做，那么如何实现模块化以及两个捆绑包是如何独立的。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:36:37.483

使用接口！！

你有在 interface `I`。类在编译时和运行时都`A`实现`I`并因此依赖于它。类`B`使用 的实例`I`，它作为 OSGi 服务获得。因此`B`取决于`I`编译时和运行时。

因此，既不`A`也不`B`直接了解彼此。实现代码是隐藏的，只有界面是可见和共享的。这就是实现模块化的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:53:03.287

手动进行依赖管理很容易出错。我建议你使用 maven 来管理依赖项。此外，maven-bundle-pluginIn 可以帮助您在编译时检查导入/导出包；而maven-eclipse-plugin帮助你根据pom中的依赖配置生成eclipse项目。

# asp.net - 如何为禁用的 ASP.NET 按钮设置样式

> ID：11414664
> 
> 赞同：4
> 
> 时间：2012-07-10T13:43:26.847
> 
> 标签：asp.net, css

我有一个我正在使用 CSS 设置样式的 asp 按钮。

按钮：

```
<asp:Button ID="btnClockin" runat="server" Text="Clock In" class="FullWidthButton" /> 
```

CSS：

```
.FullWidthButton {width:100%;} 
```

这工作正常，直到我`btnClockIn.Enabled = False`在我的代码中设置，然后它不会选择样式。我尝试添加以下 CSS。

`.FullWidthButton[disabled="disabled"]{width:100%;}`

和

`.FullWidthButton[disabled]{width:100%;}`

但这些似乎没有任何效果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T13:55:31.163

将“class”更改为“CssClass”，它应该可以始终如一地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:58:35.170

你可以使用它为我工作：

```
<asp:Button ID="btnClockin" runat="server" Text="Clock In" style="width=100%" /> 
```

# iphone - 如何重绘使用贝塞尔路径创建的已保存图像

> ID：11414665
> 
> 赞同：0
> 
> 时间：2012-07-10T13:43:27.487
> 
> 标签：iphone

我有个问题。我正在构建一个应用程序，我们可以在其中使用贝塞尔路径进行绘制。但我不知道我们如何保存此绘图并使用与设计时具有相同属性的贝塞尔路径重新绘制它。

对不起我的英语不好。

谢谢，

维彭德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:57:12.947

[在那里我找到了如何保存 CGPath](http://www.mlsite.net/blog/?p=1312)

修改代码以保存 UIBezierPath 的其他属性。并使用它。

# java - Java Unicode 到可读文本转换解码

> ID：11414668
> 
> 赞同：0
> 
> 时间：2012-07-10T13:43:43.177
> 
> 标签：java, unicode, encoding, ascii

我正在开发一个使用 Web 服务的 Java 应用程序。Web 服务是使用 SAP 服务器创建的，该服务器以 Unicode 自动对数据进行编码。我从 Web 服务中得到一个 Unicode 字符串。

《咩ㄭ㌮ਊふづ쿓漠漠਍圯぀湁湅楳楳楤湍湥潣๩഼਍》‰扯扯㰽ぉ഼┪敄灉⁥쿓呓啃䕈汤⁴佉牯潴浅数⁬慌杮䔵输入祔数⼠漼摮਍汇扵瑵瑮਍汇扵祔慂敳潆瑱入⼴浠潃牵敩ൊ'关浅数⁬うう㄰਍䔯据牵祴浅数摮扯൪㐊〠༒所ਘ⍍㰰〠丌严㍍㰰〠〰严㍍㰱2"

以上是回应。

我想将它转换为像字符串这样的可读文本格式。我正在使用核心 Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:50:28.207

> 呱㌮ਥഥ쿄ㄭ㌮ਵ쿊ㄭ㌮ਉづ쿈ී਍圹楠楳湅朹楤楳湅湅扥ࠀ楤杮湥润ࠀ഼杮湥扽ࠀ䴼杮ュ湥润വ഼പㄭ敄灹剉崵呼づ࿪敄灹剐剌⁥쿈呓呓䰰䕕䕕䕕䕉慭杮䔠ൎ⁬入祔数⼠潆瑼਍汇扵祴数⼠潆瑑祔扵祴数റ⼠入慂敳潆瑮入据慂敳潆瑮摮摮๥瑧‵‰൰ล൭ 〯‱湍㰼਍丏๥瑧‵‰൰๥൭ 〠〯‱湊丱⸱2

那是一个被解释为 UTF-16LE 的 PDF 文件。

您需要查看接收响应的组件以及它如何处理输入以阻止将其解码为 UTF-16LE，但最终没有这样的“可读”版本，因为它是二进制文件。从 PDF 文件中提取文档文本是一个更大的问题！

（注意：Unicode 是一个字符集，UTF-16LE 是将该集编码为字节。由于历史事故，Microsoft 将 UTF-16LE 编码称为“Unicode”，但这是一种误导。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:11:21.133

如果你有`byte[]`一个或一个`InputStream`（两个二进制数据），你可以得到一个`String`或一个`Reader`（两个文本）：

```
final String encoding = "UTF-8"; // "UTF16LE" or "UTF-16BE"

byte[] b = ...;
String s = new String(b, encoding);

InputStream is = ...;
BufferedReader reader = new BufferedReader(new InputStreamReader(is, encoding));
for (;;) {
    String line = reader.readLine();
} 
```

反向过程使用：

```
byte[] b = s.geBytes(encoding);
OutputStream os = ...;

BufferedWriter writer = new BufferedWriter(new OuputStreamWriter(os, encoding));
writer.println(s); 
```

Unicode 是所有字符的编号系统。UTF 变体将 Unicode 实现为字节。

* * *

***你的问题：***

在正常方式（网络服务）中，您已经收到了一个`String`. 例如，您可以使用上面的 Writer 将该字符串写入文件。要么使用**完整的 Unicode 字体**自行检查，要么将文件传递给检查。

您需要 (?) 检查文本所在的 UTF 变体。对于亚洲文字，UTF-16（小端或大端）是最佳选择。在 XML 中，它已经被定义了。

* * *

***添加：***

[FileWriter](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html)使用默认编码（来自您机器上的操作系统）写入文件。而是使用：

```
new OutputStreamWriter(new FileOutputStream(new File("...")), "UTF-8") 
```

如果它是二进制 PDF，正如@bobince 所说，只在 byte[] 或 InputStream 上使用 FileOutputStream。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:25:07.827

这绝对不是一个有效的字符串。这看起来像损坏的 UTF-16。

## 更新

事实上@Bobince 是对的，这是一个以 UTF-16**显示**的 PDF 文件（很可能是 UTF-8 / 或纯 ASCII） 。当以 UTF-8 显示时，此字符串确实显示了 PDF 源代码。接得好。

# jquery - 带有 jQ uery 的亚马逊样式菜单

> ID：11414670
> 
> 赞同：3
> 
> 时间：2012-07-10T13:43:53.503
> 
> 标签：jquery, html, css

有谁知道我在哪里可以找到 jQuery Amazon 风格的菜单示例？我需要做类似的事情，我希望我不必自己写。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:33:48.130

使用类似的东西，但最好的东西是你自己写的

[http://www.designchemical.com/lab/jquery-vertical-mega-menu-plugin/examples/](http://www.designchemical.com/lab/jquery-vertical-mega-menu-plugin/examples/)

[http://qrayg.com/experiment/cssmenus/](http://qrayg.com/experiment/cssmenus/)

[http://speckyboy.com/2011/07/04/15-fresh-jquery-menu-plugins-and-tutorials/](http://speckyboy.com/2011/07/04/15-fresh-jquery-menu-plugins-and-tutorials/)

[http://apycom.com/](http://apycom.com/)

[http://www.1stwebdesigner.com/css/36-eye- catching-jquery-navigation-menus/](http://www.1stwebdesigner.com/css/36-eye-catching-jquery-navigation-menus/)

# html - 带有流体模板的 html5 网站（typo3）

> ID：11414672
> 
> 赞同：0
> 
> 时间：2012-07-10T13:43:59.743
> 
> 标签：html, typo3, fluid

流体模板是一个 XML 文件。如何使用它来生成有效的 html5 网站？

例如，如果我放入`<br>`我的模板，它不是有效的 XML，但如果我放入`<br/>`，它不是 html5。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:18:21.233

据我所知`<br />`是有效的HTML5。

> “HTML5 定义了一种与 HTML4 和 XHTML1 兼容的 HTML 语法”（[w3.org](http://www.w3.org/TR/html5-diff/)）

# sql-server - 一个存储过程插入一个表并检索ID并插入多个表

> ID：11414673
> 
> 赞同：0
> 
> 时间：2012-07-10T13:43:59.873
> 
> 标签：sql-server, tsql, stored-procedures

我有 3 个表格和列。例如：绿色（用户 ID、姓名、地址）、红色（用户 ID、临时地址）、蓝色（用户 ID、WorkPlace）。

我想在用户 ID 自动递增 int 和唯一 ID 时将数据插入绿色。插入这些详细信息后，要检索用户 ID 并在一个存储过程中插入红色和蓝色表

注意：此示例表是为了展示一个示例场景，而不是在现实世界中使用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:00:32.710

SQL 有一个非常好的 OUTPUT 特性。

在这种情况下，使用自动递增的 int 或默认值（例如 newid()）指定您的标识列，执行插入操作，然后将输出用作其他输入查询的输入。

输出表包含刚刚插入的所有值，并且可以像任何其他表一样查询，不同之处在于它在提交后立即提供新值。

```
INSERT INTO 
tblInsertedID(ID) 
SELECT * FROM
    (INSERT 
    INTO tblDir(Dir) 
    OUTPUT inserted.ID 
    VALUES ('C:\NewDir\')
    ) InnerTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:46:10.077

```
DECLARE @userID INT;
INSERT dbo.Green(Name, Address) SELECT @name, @address;
SELECT @userID = SCOPE_IDENTITY();
INSERT dbo.Red(UserID, TemporaryAddress) SELECT @userID, @something;
INSERT dbo.Blue(UserID, WorkPlace) SELECT @userID, @something_else; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:59:27.127

使用 SCOPE_IDENTITY() 将值插入用户的变量中，然后在红/蓝表中使用此变量值。

# html - 不同高度的 div 浮动在两列中

> ID：11414674
> 
> 赞同：10
> 
> 时间：2012-07-10T13:44:00.683
> 
> 标签：html, css

我有两列，想按外观顺序堆叠不同高度的 div。

div 是动态创建的。

如果我只将它们浮动在 50% 的宽度上，很快我就会遇到 div #4 比传入的几个 div 高 5 倍的情况。然后下一个 div 与前一个 div 的底部对齐。

我需要将子 div 放入容器中以完全匹配，如下所示：

```
----- -------
  1      2
-----
  3   -------
-----    4
  5
-----
  6
-----
  7   -------
-----    8
  9

----- 
 10   -------
        11
      -------
      -------
----- 
```

这是我所做的代码片段：

```
<style>
    .box {background:#20abff; color:#fff; width:50%; margin: 5px;}
    .left {float:left;}
    .right {float:right;}
    .container {width:205px;}
</style>
    <body>
        <div class="container">
            <div class="box left" style="height:60px;">1</div>
            <div class="box left" style="height:80px;">2</div>
            <div class="box left" style="height:30px;">3</div>
            <div class="box left" style="height:70px;">4</div>
            <div class="box left" style="height:60px;">5</div>
            <div class="box left" style="height:20px;">6</div>
            <div class="box left" style="height:40px;">7</div>
            <div class="box left" style="height:90px;">8</div>
            <div class="box left" style="height:30px;">9</div>
        </div>
    </body> 
```

它看起来和这个相似

[http://dl.dropbox.com/u/142343/divstack.html](http://dl.dropbox.com/u/142343/divstack.html)

感谢帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T13:51:05.073

您将不得不使用 JavaScript 来执行此操作。如果你使用 jQuery，有一个很棒的插件叫做[Masonry](http://masonry.desandro.com/)。还有[非 jQuery 版本](http://vanilla-masonry.desandro.com/)。

引用[GitHub 上的自述文件](https://github.com/desandro/masonry)：

> Masonry 是一个动态网格布局脚本。将其视为 CSS 浮动的另一面。浮动将元素水平排列然后垂直排列，而砌体垂直排列元素，将每个元素定位在网格中的下一个开放点。结果使不同高度的元素之间的垂直间隙最小化，就像石匠在墙上安装石头一样。

[单列布局](http://masonry.desandro.com/demos/basic-single-column.html)可能是您正在寻找的。

* * *

如果您不介意将旧浏览器抛在脑后，可以使用[CSS3`column`属性](http://www.w3.org/TR/2001/WD-css3-multicol-20010118/)。[在 Quirksmode 上](http://www.quirksmode.org/css/multicolumn.html)有一个示例，在[MDN](https://developer.mozilla.org/en/CSS3_Columns)上有一些文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:04:44.123

使用 2 div 作为容器，将两列都放在这个容器 div 中，所以让这个 div 左右浮动....它可能会工作......网格布局也可以工作。

# jira - Jira 查询 - 搜索有 2 个或更多受让人的问题

> ID：11414675
> 
> 赞同：1
> 
> 时间：2012-07-10T13:44:01.400
> 
> 标签：jira, jql

如何搜索 JIRA 以显示在其过程中有两个或多个受让人的任务。基本上，需要一段时间内已解决/关闭的任务列表，该列表的受让人在其持续时间内发生了变化。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:59:59.107

搜索受让人更改的所有问题：

```
assignee CHANGED 
```

# php - PHP 邮件是否只能在 Windows 中使用？

> ID：11414676
> 
> 赞同：0
> 
> 时间：2012-07-10T13:44:04.100
> 
> 标签：php

PHP 是否有任何理由只能在 Windows 中运行？

我一直在文档中看到“仅限窗口”，但也许我将其与其他内容混淆了。

如果它只在 Windows 中工作，为什么？如果不是，为什么所有文档都如此频繁地提到“仅限窗口”？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:46:26.503

不，没有理由说 PHP 只能在 Windows 中运行。它是跨平台的。该文档确实提到了“仅限 Windows”，但这通常是指仅适用于 Windows 的**功能**（它不是指整个引擎/解释器）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:46:28.493

某些功能/扩展仅适用于 Windows 或 *nix，因为它们需要其他操作系统不具备的某些功能。PHP 作为一个整体可以在任一操作系统上运行，它只有一些功能可以在其中一个或另一个上运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T13:46:40.913

PHP 的`mail()`功能适用于 Windows 和 Linux。您看到很多“仅限 Windows”注释的原因是由于某些功能`mail()`不受支持，或者在 Windows 下以不同方式支持。

`mail()`的“正确”功能在 Linux 系统下得到完全支持，但由于 Windows 在底层做事与 Linux 不同，可用功能会发生变化。例如，[手册页上的](http://php.net/manual/en/function.mail.php#refsect1-function.mail-notes)一个特别说明指出：

> mail() 的 Windows 实现在许多方面与 Unix 实现不同。首先，它不使用本地二进制文件来编写消息，而仅在直接套接字上运行，这意味着需要 MTA 侦听网络套接字（可以在 localhost 或远程计算机上）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T13:46:36.127

您看到的是仅与在 Windows 机器上安装 PHP**相关的信息。**

例如 -

> **注意（仅限 Windows）**
> 当 PHP 直接与 SMTP 服务器通信时，如果在行首发现句号，则将其删除。要解决此问题，请将这些出现替换为双点。
> 
> ```
> <?php $text = str_replace("\n.", "\n..", $text); ?> 
> ```

此**警告**消息仅与 windows 机器相关 - 它处理从 *nix 平台到 windows 平台不同的换行符。

该功能的实际*使用*`mail()`不取决于您使用的平台，只要该平台能够发送电子邮件即可。

# mysql - 将具有 FOREIGN KEY 的表添加到 MySQL 数据库会导致 errno 150

> ID：11414685
> 
> 赞同：1
> 
> 时间：2012-07-10T13:44:22.133
> 
> 标签：mysql, sql, innodb

我正在尝试执行以下 SQL 并收到 errno: 150 'cannot create table path_relations' 作为响应。根据 MySQL 文档，这是由我的 FOREIGN KEY 限制有问题引起的。我究竟做错了什么？

```
DROP TABLE IF EXISTS `paths`;
DROP TABLE IF EXISTS `path_relations`;

CREATE TABLE `paths` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(256) CHARACTER SET utf8 DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=24 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `path_relations` (
    `ancestor` int(11) NOT NULL DEFAULT '0',
    `descendant` int(11) NOT NULL DEFAULT '0',
    PRIMARY KEY(`ancestor`, `descendant`),
    FOREIGN KEY(`ancestor`) REFERENCES paths(`id`),
    FOREIGN KEY(`descendant`) REFERENCES paths(`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:49:46.830

这是给你的清单，祝你好运；）

1) 外键源和引用字段的类型必须相同

2) 源和参考字段都必须是无符号的

3) 源字段必须被索引

4) 两个表都必须是 InnoDB

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T13:49:04.393

如果您没有未签名，它会起作用`paths.id` *吗*？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T13:48:18.107

更新：在第一个表中，您将整数值定义为无符号，而在第二个表中您没有。这些字段的结构必须相同才能满足外键。

表中是否已有数据？如果是这样，请确保所有记录都满足约束。外键列中的 NULL 值将阻止此操作。

# grails - Grails如何解析文本文件？

> ID：11414688
> 
> 赞同：4
> 
> 时间：2012-07-10T13:44:28.860
> 
> 标签：grails, groovy, multipart

我想让用户在表单中上传一个文件，并在提交后打开文件并读取每一行，以便从中获取信息以存储在数据库中。到目前为止，我只能制作一个对象并从中提取字节。

```
def  uploadedFile = request.getFile('name_of_file') 
```

这为我提供了一个 commonsMultipartFile，但我不确定是否需要将文件流式传输到缓冲区中，或者将文件保存到临时文件夹中，然后尝试以这种方式打开它。

`uploadedFile.getbytes()`会给我一个数组 [71, 101, 110, 101, 114, 97, 108, 13, 10, 45, 45, 45, 45, 45, 45, 45, 13, 10, 83, 116....]这不是我可以做任何事情的形式。

我需要能够打开文件并逐行读取。我可以用 commonsMultipartFile 做到这一点吗 - 它的选项似乎有点有限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:01:01.403

有`CommonsMultipartFile`一个 getInputStream() 方法，它将返回一个`InputStream`您可以调用任何 Groovy 增强功能的方法，例如：

```
request.getFile('name_of_file').inputStream.eachLine { line ->
    /* Parsing logic */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:55:24.213

首先将其保存到目录。然后解析并做你需要做的事情。

# security - Typo3函数每次new都会生成木马JS BlacoleRef.BS

> ID：11414694
> 
> 赞同：1
> 
> 时间：2012-07-10T13:44:54.037
> 
> 标签：security, typo3, virus, trojan

在我的typo3temp 文件夹中，我总是找到一个名为`javascript_a1cb3a5978.js`. 这似乎是 Typo3 的 JS 加密电子邮件地址。现在在代码中总是附加特洛伊木马。我从 Typo3 缓存中删除该文件，如果在浏览器中调用该页面，则会生成该文件。

我尝试下载该站点并使用 Security Essentials 对其进行扫描。我也尝试搜索，`eval`但整个 Typo3 文件夹中的内容太多。我没有在 index.php 中找到任何东西，也没有在 htaccess 中找到它。该站点的权限应该是可以的。

您对我附加此代码有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:47:02.197

检查typo3conf/localconf.php 和typo3conf/temp_* 文件和typo3conf/extTables.php。

停用每个扩展程序并更新您的 TYPO3。检查您的 TypoScript。我想您应该关闭您的网站并分析攻击者如何注入该代码。

# drupal-7 - Drupal 7 作为 Oauth 2.0 提供者

> ID：11414697
> 
> 赞同：1
> 
> 时间：2012-07-10T13:45:27.997
> 
> 标签：drupal-7, oauth-2.0

我正在尝试使我的 Drupal 7 站点成为 OAuth 提供者。我找到了适用于 OAuth 1 的 Drupal 模块，但在查找 OAuth 2.0 提供程序模块时遇到了麻烦。

我在 Drupalcode 上找到了这个项目：http://drupalcode.org/project/oauth2.git[它](http://drupalcode.org/project/oauth2.git)支持 Drupal 6 的 OAuth 2.0。在浏览存储库时，我看到了标签：“7.x-1.x-dev”和“7.x-1.x-Rj”（不知道这个Rj代表什么……）这让我很高兴。所以我检查了代码并将其与最新的[http://code.google.com/p/oauth2-php/](http://code.google.com/p/oauth2-php/)一起放入我的 Drupal 安装中。但是，当我想在 Drupal 7 中启用该模块时，它说：“此版本与 Drupal 7.x 不兼容，应该更换。”

有谁知道这个模块是否可以在 Drupal 7 中工作？（这些标签让我感到困惑）如果没有，Drupal 的 OAuth 2.0 是否还有另一个模块？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T13:44:01.587

这是 Drupal 7 的 OAuth 2 服务器[https://drupal.org/project/oauth2_server](https://drupal.org/project/oauth2_server)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T04:10:12.373

这个问题可能是因为 .info 文件没有指定版本，但使用该模块没有任何危害。

我认为您还应该为 google_oauth2尝试[http://drupal.org/sandbox/sadashiv/1857254](http://drupal.org/sandbox/sadashiv/1857254)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T12:35:38.693

花了几天时间将 Drupal7 用作 oauth2 提供程序并成功实施。我正在共享两个 github 存储库

[我在这里回答](https://drupal.stackexchange.com/questions/36602/drupal-7-as-an-oauth-2-0-and-or-1-0a-provider/144788#144788)

# android - 如何在android运行时增加或减少滚动视图的高度和宽度？

> ID：11414699
> 
> 赞同：3
> 
> 时间：2012-07-10T13:45:32.927
> 
> 标签：android

我有一个滚动视图，其高度和宽度在 xml 文件中定义，但我想在运行时动态增加或减少滚动视图的高度和宽度。

实际上我想增加滚动视图的高度和宽度 10 像素每秒 10 秒。但是 scrollView.getLayoutParams().height = GivenHeight 使用这段代码我只能增加一次运行时间。我们可以增加一个以上。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:59:46.433

```
scrollView.getLayoutParams().height = yourNewHeight; // in pixels
scrollView.getLayoutParams().width = yourNewWidth; // in pixels 
```

编辑你的新问题：如果你想随着时间的推移增加这个，你可以通过使用 TimerTask 并在 UI 线程上运行它来轻松实现这一点，因为我们正在触摸它的视图。我会给你代码，因为它真的很简单。

```
int secondCounter = 0;
int delay = 0;   // delay for 0 sec.
int period = 1000;  // repeat every sec.
final Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask() {
    public void run() {
        // do work inside ui thread
        runOnUiThread(new Runnable() {
            public void run() {
                // do your work right here
                secondCounter++;
                yourNewHeight += 10;
                yourNewWidth += 10;
                scrollView.getLayoutParams().height = yourNewHeight; // in pixels
                scrollView.getLayoutParams().width = yourNewWidth; // in pixels
                //stop the timer when 10 seconds has passed
                if(secondCounter == 10){
                    timer.cancel();
                }
            }
        });
    }
}, delay, period); 
```

编辑：强制视图刷新..

```
ViewGroup vg = findViewById (R.id.rootLayout);
vg.invalidate(); 
```

在设置新的高度和宽度后，您需要在 run 方法中调用 invalidate 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:52:51.723

```
scrollView.getLayoutParams().height = assignHeight;
scrollView.getLayoutParams().width  = assignWidth; 
```

# java - 如何在 Java 中的节点中获取元素文本？

> ID：11414700
> 
> 赞同：4
> 
> 时间：2012-07-10T13:45:34.333
> 
> 标签：java

我是 Android 开发新手，想解析 XML 并绑定到 Google MapView。但是，我无法阅读元素之间的文本。

XML

```
 <?xml version="1.0" encoding="utf8"?>
    <table name="clinicaddress">
        <row>
            <GeoPoint>22.3852860,113.9664120</GeoPoint>
        </row>
        <row>
            <GeoPoint>22.336950,114.1578720</GeoPoint>
        </row>
    </table> 
```

编码：

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.CharacterData;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

try {
            inputStream = assetManager.open("clinics.xml");
            String xmlRecords = readTextFile(inputStream);
            //Log.e("Clinics XML", xmlRecords);

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xmlRecords));

            DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
            Document doc = docBuilder.parse(is);

            doc.getDocumentElement ().normalize ();

            NodeList listOfClinics = doc.getElementsByTagName("row");
            Log.e("listOfClinics Length" , String.valueOf(listOfClinics.getLength()));

            //Loop the XML

            for (int x = 0; x < listOfClinics.getLength(); x++) {
                Node ClinicNode = listOfClinics.item(x);
                NodeList ClinicInfo = ClinicNode.getChildNodes();
                for (int y = 0; y < ClinicInfo.getLength(); y++) {
                    Node info = ClinicInfo.item(y);
                    Log.e(info.getNodeName() , info.getNodeValue()); //<--Error on info.getNodeValue()
                }
}
            //End Loop XML
        } catch (Exception e) {
            Log.e("tag", e.getMessage());
        } 
```

那么，getNodeValue() 有什么问题？？？

![在此处输入图像描述](../Images/98c115c5af54e7c6c6ab1fe3b2c93bae.png)

还有一个问题，我怎样才能像 Visual Studio 一样设置 Eclipse，如果有任何错误，它将中断源行文件中的行，而不是仅仅在调试窗口上打印出堆栈消息。

**已更新 1.** 我发现这篇文章： org.w3c.dom.Node 安卓版本低于 2.2 [org.w3c.dom.Node 安卓版本低于 2.2](https://stackoverflow.com/questions/4771119/org-w3c-dom-node-with-android-version-less-than-2-2)

> node.getTextContext() 与 node.getFirstChild().getNodeValue() 相同。

但是，我试试这个，它也出错了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T15:37:19.663

最后，我得到了这个作品。

我用`info.getFirstChild().getNodeValue()`

```
 for (int y = 0; y < ClinicInfo.getLength(); y++) {
            Node info = ClinicInfo.item(y);
            if (info.hasChildNodes()) {
                Log.e(info.getNodeName(), info.getFirstChild().getNodeValue());
            }
        } 
```

第 3 行很重要，我记录 hasChildNodes() 并在 LogCat 中观看，不知道为什么它包含一个名为“#text”的节点并且没有子节点（这在 logcat 上是错误的）。

但我相信我的 XML 格式正确。谷歌后，发现很多解释。 [https://www.google.com/search?q=xml+%23text](https://www.google.com/search?q=xml%20#text)

![在此处输入图像描述](../Images/7663ee7756400dd9b1f3a80f1b414ca2.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-10T14:01:46.610

使用 getTextContent() 方法。

```
node.getTextContent() 
```

getTextContent() 方法返回所有嵌套标签的文本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T14:10:03.783

文本只是节点的子节点。您需要遍历 GeoPoint 节点的所有子节点，检查节点类型为 Node.TEXT_NODE 并连接文本

# python - 确定所选 OptionMenu 的行号，但有可能在同一变量中创建 - Tkinter

> ID：11414702
> 
> 赞同：0
> 
> 时间：2012-07-10T13:45:38.000
> 
> 标签：python, tkinter, row, ttk, optionmenu

我有以下代码，我要求用户打开一个文本，该文本可以在一段数据中包含几行。

然后，我需要为每一行创建一个 OptionMenu。我的问题是我需要为每个选项菜单做不同的事情，并将其仅应用于“网格”中的特定行。我不能这样做，因为我正在以相同的名称创建它们并且不明白如何做不同的事情。

```
with askopenfile(filetypes=[(".txt files","*.txt")], title='Import', mode='r') as f: 
    data_dict=parse_file(f) 

info=data_dict['three'] 
i = 2
for row in info:
    # Create row in 'table' for each output
    no_1, code, value = row             # Obtain results
    def three( code ):
        c = { "1" : "1",
              "2" : "2",
              "3" : "3" }
        try:
            return c[code]
        except KeyError:
            return "None"

    variablelist = StringVar(self.frame_table)
    variablelist.set("Fixed")
    self.list1 = OptionMenu(self.frame_table, variablelist, "Fixed", "List", "Min", "Max", command=self.ChoiceBox)
    self.list1.grid(row=i, column=6, sticky="nsew", padx=1, pady=1)
    i = i + 1 
```

例如，我想在第三行中的第二行旁边创建一个额外的框，但由于第三行是最后创建的，当我尝试获取网格信息时，我只能将它添加到第三行。

我这样做的原因是因为我并不总是知道行数，而且我不想创建很多代码行，每次都单独创建一个选项菜单（即使我确实知道行数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:30:06.060

```
self.variablelists=[]
self.lists=[]
for row in info:
    # Create row in 'table' for each output
    no_1, code, value = row             # Obtain results
    def three( code ):    #don't know what this is for, but if it's necessary later, this is more clean than your previous code.
        return c if c in "123" else "None"    

    variablelist = StringVar()
    variablelist.set("Fixed")
    self.variablelists.append(variablelist)
    list1 = OptionMenu(self.frame_table, variablelist, "Fixed", "List", "Min", "Max", command=self.ChoiceBox)
    list1.grid(row=i, column=6, sticky="nsew", padx=1, pady=1)
    self.lists.append(list1)
    i += 1 
```

现在您可以处理每个选项菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:37:04.763

你的问题很不清楚，主要是因为你的例子没有任何意义。例如，为什么你`three`在每次迭代时都重新定义函数，但你从不使用它？

无论如何，也许下面的例子会对你有所帮助。它创建三个选项菜单，将一个变量与每个菜单关联，并在值更改时让它们中的每一个都调用相同的过程。默认情况下，此方法将被赋予选项菜单的新值；通过使用 lambda 函数，我们还可以将行号传递给函数。

```
import Tkinter as tk

# data for the example
info = (
    ("1.1","1.2","1.3"),
    ("2.1","2.2","2,3"),
    ("3.1","3.2","3.3"),
)

class SampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        self.status = tk.Label(self, anchor="w")
        self.frame_table = tk.Frame(self, background="black")
        self.frame_table.grid_columnconfigure(1, weight=1)
        self.frame_table.grid_columnconfigure(2, weight=1)
        self.frame_table.grid_columnconfigure(3, weight=1)

        self.status.pack(side="bottom", fill="x")
        self.frame_table.pack(side="top", fill="x", padx=10, pady=10)

        for row_number, row_data in enumerate(info):
            no_1, code, value = row_data
            label = tk.Label(self.frame_table, text="row %d" % row_number, background="gray")
            col1  = tk.Label(self.frame_table, text=no_1)
            col2  = tk.Label(self.frame_table, text=code)
            col3  = tk.Label(self.frame_table, text=value)

            # N.B. 'value' is automatically passed to
            # the command by tkinter; we're adding
            # an extra parameter, 'row' 
            command=lambda value, row=row_number: self.ChoiceBox(value, row)
            stringvar = tk.StringVar(self.frame_table)
            stringvar.set("Fixed")
            option_menu = tk.OptionMenu(self.frame_table, stringvar, 
                                        "Fixed","List","Min","Max", 
                                        command=command)
            label.grid(row=row_number, column=0, sticky="nsew", padx=1, pady=1)
            col1.grid(row=row_number, column=1, sticky="nsew", padx=1, pady=1)
            col2.grid(row=row_number, column=2, sticky="nsew", padx=1, pady=1)
            col3.grid(row=row_number, column=3, sticky="nsew", padx=1, pady=1)
            option_menu.grid(row=row_number, column=6, sticky="nsew", 
                             padx=1, pady=1)

    def ChoiceBox(self, value, row_number):
        self.status.config(text="you set row %d to '%s'" % (row_number, value))

app = SampleApp()
app.mainloop() 
```

# solaris - 如何在 illumos/solaris 上检测 chroot？

> ID：11414705
> 
> 赞同：1
> 
> 时间：2012-07-10T13:45:44.660
> 
> 标签：solaris, chroot

正在运行的 C 程序如何检测它是否在 illumos/solaris 上的“chroot”中运行？

有一个 Debian 实用程序 [1] 在 linux、freebsd、hurd 上使用了一些技巧。

如何在 illumos/solaris 上做到这一点？

[1] [http://anonscm.debian.org/gitweb/?p=users/clint/debianutils.git;a=blob;f=ischroot.c;h=bed67f9f655d26906e3d65fd290698dce5402a89;hb=HEAD](http://anonscm.debian.org/gitweb/?p=users/clint/debianutils.git;a=blob;f=ischroot.c;h=bed67f9f655d26906e3d65fd290698dce5402a89;hb=HEAD)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:11:47.313

There's [this thread on *comp.unix.solaris*](http://unix.derkeiler.com/Newsgroups/comp.unix.solaris/2010-04/msg00180.html) which details various methods to find out whether Solaris runs inside a zone (container / chroot-on-lots-of-steroids) or a VM. Particularly extensive is [the list in this posting](http://unix.derkeiler.com/Newsgroups/comp.unix.solaris/2010-04/msg00185.html) (seems to have come from [this blog post](http://alittlestupid.com/2009/03/30/how-to-identify-a-solaris-non-global-zone/). I'll recreate some of the items relating to zones here - those that are available to non-root users.

*   The [`/usr/bin/zonename`](http://docs.oracle.com/cd/E23824_01/html/821-1461/zonename-1.html) command tells you something different than "global"
*   The Solaris kernel "process" is called `sched` in a non-zoned (or inside the "global" / admin zone) environment but [`zsched`](http://docs.oracle.com/cd/E19963-01/html/821-1460/z.inst.ov-13.html) inside a zone.
*   The Solaris [`prstat`](http://docs.oracle.com/cd/E23824_01/html/821-1462/prstat-1m.html) command (similar to `top` on other UN*Xes) has `-z` / `-Z` command line options to restrict reporting to specific zones (`-z`) or give statistics for all zones (`-Z`); inside a zone, these options don't work / only show you the zone you're running inside.

Hope that helps a little.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-26T20:56:49.867

我用这种方式：

```
#elif defined (__sun__)

/* Similar to Linux
 * XXX: check zone?
 * XXX: illumos kernel automatically mounts /proc on boot
 */

static int ischroot()
{
  struct stat st1, st2;

  if (stat("/", &st1))
    return 2;
  if (stat("/proc/1/root", &st2))
    return 2;
  if ((st1.st_dev == st2.st_dev) && (st1.st_ino == st2.st_ino))
    return 1;
  return 0;
}

#else 
```

# ruby-on-rails - 设计路由错误：“未知操作——找不到用户控制器的操作‘创建’”

> ID：11414710
> 
> 赞同：0
> 
> 时间：2012-07-10T13:45:55.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, routes

我的设计设置以前运行良好，但现在，出于某种原因，每当我尝试注册新用户时，它都会尝试调用 users#create 而不是 registrations#create。我认为这一定是我的 routes.rb 文件有问题。我最近向我的应用程序添加了一个新资源“首选项”，因此路由可能很不稳定：

```
Indexer2::Application.routes.draw do
  resources :preferences

  get "home/index"

  resources :posts
  resources :users

  devise_for :users, :controllers => {:registrations => 'registrations', :invitations => 'invitations'}, :except => [:show] do
    get "/signup" => "devise/registrations#new", :as => 'user_signup'
    get '/logout' => 'devise/sessions#destroy', :as => 'user_logout'
    get '/login' => "devise/sessions#new", :as => 'user_login'
  end 

  match '/welcome' => 'pages#welcome'

  resources :preferences, :except => [:destory, :edit, :create, :new, :index, :show]  do 
    collection do
      post "make_feed_preference"
      post "change_preference"
    end
  end

  root :to => "home#index"

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:51:09.480

你`UsersController`应该有`create`方法。如果您不想编写自己的注册逻辑，只需从[Devise::RegistrationsController < DeviseController](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)继承：

```
 controller UsersController < Devise::RegistrationsController
      #....
 end 
```

这将包括默认的设计方法。

# oracle - Access 2007 导出表到 csv 十进制

> ID：11414712
> 
> 赞同：3
> 
> 时间：2012-07-10T13:46:10.700
> 
> 标签：oracle, ms-access, decimal

我在 Access 中有一些表，我正在尝试导出到 csv，以便可以导入到 Oracle。我不使用通过 ODBC 导出，因为我在其中一些表中有 70K - 500K 记录，并且该功能需要很长时间，因为我有大约 25 个表要做，所以我想导出到 csv（这要快得多）然后通过 sqlldr 加载。

一些数字列可以到小数点后 16 位，我需要它们。但是，当我导出它们时，它们只会出现 2。我已经对此进行了一些谷歌搜索。区域设置只允许输出 9 位小数（Win XP），通过查询格式化列会将其更改为我在导入 Oracle 时不需要的文本（也许我可以在控制文件中使用 to_number() ？）。

为什么这么难？为什么 Access 不能按原样导出数字列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:26:16.753

在我的 Access 2007 测试用例中，我没有看到您描述的完全相同的结果。当我导出为 CSV 时，我得到所有小数位。

这是我的示例表，`decimal_field`十进制 (18, 16)。

```
id some_text decimal_field
-- --------- ------------------
 1 a         1.0123456789012345
 2 b                          2 
```

不幸的是，这些导出`decimal_field`的值在 CSV 中被引用：

```
"id","some_text","decimal_field"
1,"a","1.0123456789012345"
2,"b","2" 
```

我能找到删除`decimal_field`值周围引号的唯一方法也删除了围绕真实文本值的引号。

如果引用的数值不可行，也许您可​​以创建一个 VBA 自定义 CSV 导出程序，在其中将值写入您希望格式化的每个文件行。

关于“*为什么这么难？* ”，我怀疑十进制数据类型是罪魁祸首。我不记得在使用其他数字数据类型时遇到过此类问题。不幸的是，这只是我的猜测，即使它是正确的也无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:35:15.320

1.  创建一个查询，从表中选择所有记录。使用 format 函数格式化麻烦的列：
    `Select Format(Fieldname,"0000.00000") AS FormattedField`
    保存此查询并导出**查询**而不是表。

    这种方法的一个缺点是您的数字字段随后被视为文本，因此您会在导出的数字周围加上引号，如果您使用不将文本括在引号中的选项，那么您在同一查询中导出的任何实际文本字段也失去他们的报价

2.  另一种（更快、更脏、更糟糕的工作）方法是先导出到 Excel，然后从那里导出到文本。这会保留小数位不变，但显然它不是很优雅。

# objective-c - OpenGL GL_POINTS 大小

> ID：11414713
> 
> 赞同：1
> 
> 时间：2012-07-10T13:46:13.443
> 
> 标签：objective-c, xcode, macos, cocoa, opengl

我怎样才能让我的`GL_POINT`更大？我正在使用`glPointSize`，但它的工作量最大。所以如果我写

```
glPointSize(100); 
```

它的大小与

```
glPointSize(500); 
```

我怎样才能让它像我需要的一样大？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:04:10.823

[OpenGL wiki](http://www.opengl.org/wiki/Primitives#Point_Primitives)说：

> 点大小有一个实现定义的范围，并且任何一种方法给出的大小都被限制在该范围内。您可以使用 GL_POINT_SIZE_RANGE​（返回 2 个浮点数）查询范围。还有一个点粒度，你可以用 GL_POINT_SIZE_GRANULARITY​查询；该实现将根据需要将大小限制在其粒度上。

如果您想要的点的大小不在允许的范围内，请考虑使用带纹理的四边形甚至 TRIANGLE_FAN 来制作您想要的任何大小的（几乎）圆形多边形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:58:50.760

您可以在点位置绘制任意大小的视图对齐四边形。

# php - 如何在没有 javascript 的情况下跟踪移动网站上的点击通话链接

> ID：11414715
> 
> 赞同：1
> 
> 时间：2012-07-10T13:46:19.590
> 
> 标签：php, mobile, href, tracking, click-tracking

我想要做的是计算这种类型的图片电话链接的点击次数：

```
<a href="tel:123456789"> <img src="images/myimage.jpg" alt="myimage" /> </a> 
```

但我的目标平台——旧的诺基亚手机浏览器，不支持 javascript，所以我必须使用服务器端技术，即 php。

我希望将其与 Google Analytics 集成，但如果这不可能，只要我可以计算点击次数并同时拨打电话，那也没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:59:22.203

[Google Analytics for Mobile Websites](https://developers.google.com/analytics/devguides/collection/other/mobileWebsites)文档描述了如何在服务器端使用不带 JavaScript 的 Google Analytics 。

# asp.net-mvc - 创建视图和局部视图

> ID：11414719
> 
> 赞同：0
> 
> 时间：2012-07-10T13:46:27.933
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我是 MVC3 的新手。我的任务是创建一个显示数据列表的页面。即，我创建了一个控制器“Employee”，然后创建了一个从 Index 重命名的视图“Employee”和一个局部视图“EmployeeList”。

部分视图用于在网格中列出员工。

我需要在单击或加载时从视图中呈现此部分视图。如何 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:49:38.170

在另一个视图中渲染局部视图：

```
@Html.Partial("EmployeeList") 
```

将特定模型传递给视图：

```
@Html.Partial("EmployeeList", Model.EmployeeListModel) 
```

# php - 无法通过 FTP 覆盖 Wordpress 文件

> ID：11414722
> 
> 赞同：0
> 
> 时间：2012-07-10T13:46:30.307
> 
> 标签：php, wordpress, upload, ftp, filezilla

我目前正在开发一个 wordpress 网站，我正在尝试用新版本覆盖 content-extensions.php。在上传它**似乎**工作，文件传输成功。但是，即使刷新并清除缓存，浏览器也没有任何变化。我还确保 wordpress 中没有插件的缓存，并且文件权限是 FileZilla 中应该有的。

这是奇怪的一点。

如果我进入主题编辑器并找到 content-extensions.php，我可以看到我在源代码中所做的更改。无论出于何种原因，它们只是没有出现在浏览器中。

如果有人能为我指出正确的方向，我将不胜感激，因为我没有泡菜。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:48:52.337

您是在使用扩展程序还是使用基于主题的功能？

如果是扩展，记得激活它，我经常忘记，我上传代码，在扩展管理器中看到它但忘记激活它。

如果它在主题中，您确定您使用的是正确的主题而不是基本主题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:49:22.930

我知道这并没有说明它为什么会发生，但我之前有过这种情况，只是删除了文件并上传了新文件，而不是试图覆盖它。

# excel - 与 TFS 工作项等 MS Excel 集成

> ID：11414723
> 
> 赞同：0
> 
> 时间：2012-07-10T13:46:30.730
> 
> 标签：excel, tfs, integration

有人可以为我提供一些建议、文章、最佳方法、技术选择来构建 MS Excel 2010 集成，就像 TFS 为其工作项所做的那样？以便能够从 Excel 中轻松修改数据并重新发布到服务。

问候和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:27:38.813

我已经成功地使用了带有代码隐藏方法的 MS Workbook。

# php - X-Sendfile 错误，找不到文件

> ID：11414733
> 
> 赞同：4
> 
> 时间：2012-07-10T13:46:55.420
> 
> 标签：php, x-sendfile

我正在使用 apache2 网络服务器并且我已经安装了 mod_xsendfile 我有类似的东西：

```
 header('Content-type: application/zip');
                header('Content-Disposition: attachment; filename="file.zip"');
                //header("X-Accel-Redirect: /file/protected/file.zip"); //for nginx server
                header('X-Sendfile: /protected/file.zip');
                exit(); 
```

我在 /etc/apache2/apache2.conf 中启用：

```
XSendFile on 
```

当我单击 /file/index.php 中的下载按钮时，它给了我错误，index.php 位于 /file/ Not Found

我一开始就尝试过移动`header('X-Sendfile: /file/protected/file.zip');`，但它是一样的..

当我使用`header("X-Accel-Redirect: /file/protected/file.zip");`它时它工作但给了我空的 .zip 文件，无论如何它不是 apache2 服务器..

文件只有几 KB

谁知道怎么修它 ？

**编辑：** 它在error.log中说：给定路径高于根路径：xsendfile：无法找到文件：/protected/file.zip

我设置了 XSendFilePath /protected ，现在的错误是： `(2)No such a file or directory: xsendfile cannot open file: /protected/file.zip,referer: http://domain.com/file/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:52:48.607

查找 mod xsendfile 文档。您必须设置允许从其提供文件的目录。如果您这样做了，那么我会怀疑其他一些问题，例如未提供符号链接等....

# jquery - 使用基于 tr 元素类名的 jquery 四按钮导航进行分页

> ID：11414734
> 
> 赞同：0
> 
> 时间：2012-07-10T13:46:56.840
> 
> 标签：jquery, pagination, datatables, tablesorter

我有一个像这样的html表。总结这里就是我想要的。我计划使用 tablesorter 插件进行分页，但是我不需要基于所有 tr 行进行分页，而是只需要基于具有相同类名的某些 tr 行进行分页。有没有可能做到这一点。

```
<html>
<head>
</head>
<body>
<table>
  <thead>
  </thead>
  <tbody>
        <tr>     -- 'class' page
         </tr>
          <tr>
          </tr>
        <tr>-- 'class' page
         </tr>
          <tr>
          </tr>
           <tr>-- 'class' page
           </tr>
           <tr>
           </tr>
 </tbody>
</table>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:01:58.217

以下链接帮助我解决了我的谜题。 [http://www.pengoworks.com/workshop/jquery/tablesorter/tablesorter.htm](http://www.pengoworks.com/workshop/jquery/tablesorter/tablesorter.htm)

我将其中没有类的 tr 行用作隐藏行，这种修改有助于我折叠和展开。我让它在一个静态表上工作，并且即将实现到我的应用程序中。总结一下：使用表格排序器根据可见行获取我的分页。

# background - 跨度背景

> ID：11414736
> 
> 赞同：1
> 
> 时间：2012-07-10T13:47:07.943
> 
> 标签：background, html

我刚开始一份新工作，并从一个非常奇怪地编写网站的人那里接手了一个网站。我已经解决了大部分问题，但有一个小问题希望你们能帮助我。

[http://newcombspring.stifel-marcin.com/](http://newcombspring.stifel-marcin.com/)是网站。如果您浏览产品链接，您会看到它会下降并且有一个悬停背景，但我无法显示通用背景。我目前将它设置为黑色（#000000），我之前让它工作的唯一方法是同时设置宽度和高度，但正如你所看到的，不同的下拉菜单是不同的高度，所以显然不是一个解法。

我想看看你们认为什么是让它正常工作的最佳行动计划。

# objective-c - Objective-C：混合的递增方法 - i++ vs i+=1

> ID：11414742
> 
> 赞同：0
> 
> 时间：2012-07-10T13:47:33.960
> 
> 标签：objective-c, gnustep

我在 github 上浏览一个[GNUstep 项目](https://github.com/michaelwisely/GNUstep-Sudoku/blob/master/puzzleBoard.m)，遇到了这个小循环......

```
for(; i < 9; i+=1)
{
  for(;j < 9; j+=1)
  {
      /* Inner loop code - snipped */
  }
} 
```

大多数（*但不是所有*）增量操作都是在源代码中使用“ *+=1 ”完成的；*如果它是一致的，这将是有道理的。如果它是一致的，我会把它归结为简单的个人喜好，甚至是可读性。

然而，对于一个似乎由一个人完成的项目（毕竟这是一个简单的数独游戏），增量操作的不同风格让我有点好奇。

```
for(; i<10; i++)
{
  /* inner loop code - snipped */
} 
```

现在我已经阅读[了这个问题](https://stackoverflow.com/questions/6509707/incrementing-x-vs-x-1)，它证实了我的怀疑 -**无论使用何种语法，编译器都应该生成相同的低级代码**。

这让我开始思考这是最佳实践还是风格指南，但同一位编码员使用了这两种递增方法。就个人而言，我不假思索地使用“ *i++* ”——我猜这对于任何编码人员来说都是很自然的，你几乎不假思索地输入它。

**我错过了什么还是“*仅仅因为*”？你有什么理由混合这两种类型的增量吗？**如果它们都编译为相同的 ASM，那么我会假设没有任何情况下一个性能优于另一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:53:50.590

通常这种情况发生在有几个程序员，每个人都有自己的编码偏好，并且项目没有强制执行严格的编码风格时。

没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:59:27.560

在这种情况下，它们是等价的，你说得对，对于任何好的编译器，生成的程序集都应该是等价的。

另请注意，这并不特定于 Objective-C。Objective-C 基于 C，因此它与任何 C 代码完全相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:13:25.647

如果这是一个单人项目，最可能的原因是程序员只是在中途改变了使用哪种风格的想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T14:15:52.150

如果“一个人”发现一个循环实现了他在另一个项目中的预期并懒惰地复制粘贴它甚至没有更改 += 或 ++（取决于他使用什么）怎么办？

在使用其中一个或另一个时，我脑海中可能出现的唯一区别是在您链接的问题中指出的遍历数组时。

# python - pygame.display.update() 导致周期性滞后峰值

> ID：11414743
> 
> 赞同：3
> 
> 时间：2012-07-10T13:47:35.893
> 
> 标签：python, pygame

我用 Pygame 做了一个简单的程序，它基本上是一个滚动的背景，并注意到周期性的滞后峰值。弄乱代码很长时间后，我发现对 pygame.display.update() 的调用有时会花费更长的时间来执行。

为了真正简化并复制问题，我编写了以下代码：

```
import pygame
import sys
import time

FRAME_RATE = 30

# don't mind the screen and time_passed variables; they aren't used in this script

def run_game():
    pygame.init()
    clock = pygame.time.Clock()
    screen = pygame.display.set_mode((500, 500))
    prev_spike = 0
    time_passed = 0
    while 1:
        start = time.clock()
        pygame.display.update()
        timenow = time.clock()
        time_spent = timenow - start
        if time_spent > 0.01:
            print time_spent 
            if prev_spike:
                print "Last spike was: {} seconds ago".format(timenow - prev_spike)
            prev_spike = timenow
        time_passed = clock.tick(FRAME_RATE)

if __name__ == "__main__":
    run_game() 
```

该帧速率的输出片段：

```
0.0258948412828
Last spike was: 1.01579813191 seconds ago
0.0186809297657
Last spike was: 0.982841934526 seconds ago
0.0225958783907
Last spike was: 2.01697784257 seconds ago
0.0145269648427
Last spike was: 1.01603407404 seconds ago
0.0186094554386
Last spike was: 2.01713885195 seconds ago
0.0283046020628
Last spike was: 1.03270104172 seconds ago
0.0223322687757
Last spike was: 1.01709735072 seconds ago
0.0152536205013
Last spike was: 1.01601639759 seconds ago 
```

我真的不知道发生了什么，并且真的很想得到一些见解。

更多细节：

在每次循环迭代中打印 time_spent 时的输出片段（而不是仅当它 > 0.01 时）：

```
0.000204431946257
0.000242090462673
0.000207890381438
0.000272447838151
0.000230178074828
0.0357667523718          <-- update taking two orders of magnitude longer than normal
0.000293582719813
0.000343153624075
0.000287818661178
0.000249391603611 
```

当以 60 FPS 运行时，每个尖峰之间的间隔几乎总是 1 秒，很少是 2 秒（尖峰将持续大约两倍的时间）。在较低的帧速率下，尖峰之间的间隔将开始变化更大，但始终接近整数值。

我尝试在另一台计算机上运行脚本，但问题没有被复制；pygame.display.update() 的执行时间相当快且一致。然而，当我在那台机器上运行我的原始程序时，一秒间隔的滞后峰值仍然存在（我可能会寻找其他机器来测试......）

我测试的两台机器都运行 Windows 7。

编辑：

我抓了一些在 Pygame 网站上托管的随机游戏，我得到了类似的行为——调用`pygame.display.update`（或`flip`）周期性地需要 10 到 40 毫秒，而它们通常需要不到 2 毫秒。

似乎没有其他人遇到这个问题（或者至少抱怨过。这可能是因为大多数游戏的运行速度低于 30 FPS，而这个问题不太明显），所以我的环境可能有问题。我确实（有点）在第二台机器上重现了这个问题（如上所述），所以我宁愿不要忽视这个问题，希望最终用户不会遇到它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:26:41.337

**[尝试在游戏开发中提出这个问题](http://gamedev.stackexchange.com)**，您可能会得到更好的答案。

**编辑：以下代码似乎没有解决提出的问题，但确实提供了动画测试并为主游戏循环使用定时回调**

尝试对渲染函数使用定时回调。

```
import pygame
import time
import math
from pygame.locals import *

desiredfps = 60
updaterate = int(1000 / desiredfps)
print "Aiming for {0}fps, update every {1} millisecond".format(desiredfps, updaterate)
lasttime = 0
rectx = 0
recty = 0

def run_game():
    pygame.init()
    screen = pygame.display.set_mode((500, 500))
    pygame.time.set_timer(USEREVENT+1, updaterate)

    def mainloop():
        global lasttime
        global rectx
        global recty
        screen.fill(pygame.Color("white"))
        screen.fill(pygame.Color("red"), pygame.Rect(rectx,recty,20,20))
        screen.fill(pygame.Color("blue"), pygame.Rect(480-rectx,480-recty,20,20))
        screen.fill(pygame.Color("green"), pygame.Rect(rectx,480-recty,20,20))
        screen.fill(pygame.Color("yellow"), pygame.Rect(480-rectx,recty,20,20))
        rectx += 5
        if rectx > 500:
            rectx = 0
            recty += 20
        beforerender = time.clock()
        pygame.display.update()
        afterrender = time.clock()
        renderdelta = afterrender - beforerender
        framedelta = beforerender - lasttime
        lasttime = beforerender
        if renderdelta > 0.01:
            print "render time: {0}".format(renderdelta)
            print "frame delta: {0}".format(framedelta)
            print "-------------------------------------"            
    while(1):
        for event in pygame.event.get():
            if event.type == USEREVENT+1:
                mainloop()
            if event.type == QUIT:
                pygame.quit()
                return
# Run test           
run_game() 
```

执行此操作时我似乎没有任何问题，但是如果您仍然遇到问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:26:36.050

经过一些测试，这里有一些结果。首先，回答问题：延迟尖峰的原因不是pygame.display.update()。延迟尖峰的原因是clock.tick(FRAME_RATE)。请注意，没有 FRAME_RATE 参数的 clock.tick() 不会导致尖峰。当我尝试使用 python 的 time.sleep() 方法手动跟踪帧速率来替换 pygame 的 clock.tick() 时，问题并没有消失。我认为这是因为在内部，python 的 time.sleep() 和 pygame 的 clock.tick() 都使用相同的函数，这被认为是不精确的。似乎如果你让这个函数休眠 1 毫秒（如果游戏足够简单，这样就不会占用所有的 CPU），这个函数有时会比这长得多，大约长 10-15 毫秒。这取决于睡眠机制的操作系统实现和所涉及的调度。

解决方案是不使用任何与睡眠相关的功能。

还有第二部分。即使您不使用任何 sleep()，也存在各个帧之间的增量时间不一致的问题，如果不考虑这一点，可能会导致视觉抖动/卡顿。我相信这个问题已经在本[教程](http://gafferongames.com/game-physics/fix-your-timestep/ "修复你的时间步长")中进行了非常详细的探讨。

因此，我继续在 python 和 pygame 中实现了本教程中提出的解决方案，并且效果很好。即使我以 30fps 的速度更新“物理”，它看起来也很流畅。它吃很多cpu，但看起来不错。这是代码：

```
from __future__ import division
import pygame
from random import randint
from math import fabs

PHYS_FPS = 30
DT = 1 / PHYS_FPS
MAX_FRAMETIME = 0.25

def interpolate(star1, star2, alpha):
    x1 = star1[0]
    x2 = star2[0]
    # since I "teleport" stars at the end of the screen, I need to ignore
    # interpolation in such cases. try 1000 instead of 100 and see what happens
    if fabs(x2 - x1) < 100:
        return (x2 * alpha + x1 * (1 - alpha), star1[1], star1[2])
    return star2

def run_game():
    pygame.init()
    clock = pygame.time.Clock()
    screen = pygame.display.set_mode((500, 500))

    # generate stars
    stars = [(randint(0, 500), randint(0, 500), randint(2, 6)) for i in range(50)]
    stars_prev = stars

    accumulator = 0
    frametime = clock.tick()

    play = True
    while play:
        frametime = clock.tick() / 1000
        if frametime > MAX_FRAMETIME:
            frametime = MAX_FRAMETIME

        accumulator += frametime

        # handle events to quit on 'X' and escape key
        for e in pygame.event.get():
            if e.type == pygame.QUIT:
                play = False
            elif e.type == pygame.KEYDOWN:
                if e.key == pygame.K_ESCAPE:
                    play = False

        while accumulator >= DT:
            stars_prev = stars[:]
            # move stars
            for i, (x, y, r) in enumerate(stars):
                stars[i] = (x - r * 50 * DT, y, r) if x > -20 else (520, randint(0, 500), r)
            accumulator -= DT

        alpha = accumulator / DT
        stars_inter = [interpolate(s1, s2, alpha) for s1, s2 in zip(stars_prev, stars)]

        # clear screen
        screen.fill(pygame.Color('black'))

        # draw stars
        for x, y, r in stars_inter:
            pygame.draw.circle(screen, pygame.Color('white'), (int(x), y), r)

        pygame.display.update()

if __name__ == "__main__":
    run_game() 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-09-02T12:09:48.163

```
import pygame
import time
import math
from pygame.locals import *
desiredfps = 60
updaterate = int(1000 / desiredfps)
lasttime = 0
rectx = 0
recty = 0

def run_game():
    pygame.init()
    screen = pygame.display.set_mode((500, 500))
    pygame.time.set_timer(USEREVENT+1, updaterate)
    def mainloop():
        global lasttime
        global rectx
        global recty
        screen.fill(pygame.Color("white"))
        screen.fill(pygame.Color("red"), pygame.Rect(rectx,recty,20,20))
        screen.fill(pygame.Color("blue"), pygame.Rect(480-rectx,480-recty,20,20))
        screen.fill(pygame.Color("green"), pygame.Rect(rectx,480-recty,20,20))
        screen.fill(pygame.Color("yellow"), pygame.Rect(480-rectx,recty,20,20))
        rectx += 5
        if rectx > 500:
            rectx = 0
            recty += 20
        beforerender = time.clock()
        pygame.display.update()
        afterrender = time.clock()
        renderdelta = afterrender - beforerender
        framedelta = beforerender - lasttime
        lasttime = beforerender
        if renderdelta > 0.01:
            print ("render time: {0}").format(renderdelta)
            print ("frame delta: {0}").format(framedelta)
            print ("-------------------------------------")      

    while(1):
        for event in pygame.event.get():
            if event.type == USEREVENT+1:
                mainloop()
            if event.type == QUIT:
                pygame.quit()
                return # 
```

# ios - Flash - 检测倾斜的 iOS

> ID：11414754
> 
> 赞同：0
> 
> 时间：2012-07-10T13:48:00.200
> 
> 标签：ios, flash, tilt

我这里有一个示例游戏，我想在 iPad 上试一试。

如何收听闪光灯倾斜？

如果我有一个标准的太空侵略者游戏，我想在左右倾斜设备时左右移动宇宙飞船。我该怎么做呢？

谢谢！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:47:37.013

你试过了[`AccelerometerEvent`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/AccelerometerEvent.html)吗？这是使用加速度计控制球运动的教程和示例应用程序：[http ://www.gotoandlearn.com/play.php?id=116](http://www.gotoandlearn.com/play.php?id=116)

# facebook-opengraph - 为什么每次调用 Facebook 开放图都会获得相同的 action-instance-id？

> ID：11414755
> 
> 赞同：0
> 
> 时间：2012-07-10T13:48:02.397
> 
> 标签：facebook-opengraph

我目前正在试用 Facebook Open Graph。

当我成功将操作发布到 Open Graph 时，我得到了文档中描述的 action-instance-id。

```
{
  id: “{action-instance-id}”
} 
```

但我总是得到同样的回应。所以同一个ID。即使我尝试不同的操作，结果也保持不变。这是预期的行为吗？我希望每个动作实例都能获得一个新的 id。还是仅适用于我的开发者帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:51:04.763

您确定要发布新操作，而不是阅读现有操作的详细信息吗？包含您的代码可能会有所帮助

看起来您正在向操作 ID 发出 GET 请求，而不是发布新的用户->操作->对象连接，因为它们将具有唯一的 ID

# url - 谷歌分析内容实验显示没有访问者

> ID：11414759
> 
> 赞同：2
> 
> 时间：2012-07-10T13:48:09.777
> 
> 标签：url, parameters, google-analytics, analytics, google-experiments

我在 Google Analytics 中运行了一个内容实验，但没有显示任何访问者。该代码正在正确验证，并且如果我对其进行测试，它似乎可以正常运行。

对于不同的变体，我使用了同一页面的参数化版本 (?v=1, ?v=2, ...)。

也可能是因为实验位于搜索页面上，该页面接收 URL 中搜索内容的参数。

有人对这些问题有任何经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T18:04:12.303

我的数据似乎需要几个小时才能开始显示。因此，根据您的急躁程度，可能需要更多时间。

我也有一个问题，因为我启用了**启用人口统计和兴趣报告**（[可能有帮助的问题](https://stackoverflow.com/questions/21003286/google-analytics-content-experiment-without-redirect-getting-no-visitors)）

# php - 如何让 php 从 html 文本框中接收信息？

> ID：11414766
> 
> 赞同：1
> 
> 时间：2012-07-10T13:48:29.077
> 
> 标签：php, html, textbox

我试图让一个数组显示从 PHP 创建的 HTML 表单输入的信息。我正在尝试将整个代码放到一个 PHP 文件中。到目前为止，我有：

```
<body>
            <form action="hello.php" method="post">
                <input type="text" name="input" placeholder="Number" />
                <input type="submit" value="submit" onclick="go()" />
            </form>
        </body> 
```

上面的代码是使用 PHP 中的“echo”生成的（未显示）。

然后对于 PHP 的其余部分，我有：

```
function go() {

            $variable = "input"; 
```

这只是我的代码的开始。其余的都不重要。我知道 $variable = "input"; 部分是错误的，但是如何让数字从输入的 HTML 传输到 PHP？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:50:53.733

由于您使用的是 POST 请求，因此您将要引用`$_POST`超全局。此变量是一个数组，其中填充了 POST 请求发送的任何信息。

由于您想从“输入”中获取值，您将`$_POST`使用“输入”键调用变量

```
function go() {
    $variable = $_POST['input'];
    // whatever else you want to do in your function
} 
```

由于`$_POST`它是一个超全局的，它在每个范围内都是全局的。

您不需要为提交按钮包含 onclick 事件，除非您想用它调用 JavaScript 事件。但是 JavaScript 函数 go() 和 PHP 函数 go() 的映射在两者之间具有零相关性。

# java - 致命异常：main 和 Nullpointer

> ID：11414771
> 
> 赞同：0
> 
> 时间：2012-07-10T13:48:46.363
> 
> 标签：java, android

这几天我遇到了这个非常烦人的问题，我似乎无法完全解决它。我正在尝试打开一个`.csv`文件，所以我将它导入到`res/raw/`我的项目文件夹中。然后我试图通过该`getResources()`方法打开并阅读它，而这正是我得到`NullPointerException`. 这是读取文件并用可用行填充数组的方法。

这是我从类`Activity`创建对象的地方，然后我想从类调用方法。`newwords``Words``PlayWithRawFiles()``Words`

```
public class Swear_Activity extends Activity implements OnInitListener, OnClickListener {

    private Words newwords;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_swear);
    }
    public void onClick(View view){
        try {
            newwords.PlayWithRawFiles();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            System.out.println("greshka");
            e.printStackTrace();
        }
    }
} 
```

现在这是我得到错误的类

```
public class Words{

    public Word[] wordsArray;
    private String locale = "de";

    public Words(String locale) {
        if (locale != null ) {
            this.locale = locale;
        }
    }

    Context c;
    public void PlayWithRawFiles() throws IOException  {
        String str="";
        StringBuffer buf = new StringBuffer();          
        int i = 0;
        InputStream is = c.getResources().openRawResource(R.raw.est);
        BufferedReader reader = null;
        try{
            if (is != null) reader = new BufferedReader(new InputStreamReader(is));
        }
        catch(Exception e) {
            System.out.println ("ss");
            e.printStackTrace();
        }

        if (is!=null) {                         
            while ((str = reader.readLine()) != null) { 
                Word wd = new Word(1,"str");
                this.wordsArray[i] = wd;
                i++;
            }               
        }       
        is.close();
    }
} 
```

这是类Word

```
public class Word {
    private int type;
    private String data;

    public Word(int type, String data){
        this.type = type;
        this.data=data;
    }

    public int getType(){
        return this.type;
    }
    public String getData(){
        return this.data;
    }
} 
```

这是堆栈跟踪

> 07-10 13:28:58.558：E/AndroidRuntime(647)：致命异常：主要
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): java.lang.NullPointerException
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 de.android.swearapp.Swear_Activity.onClick(Swear_Activity.java:32)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 >android.view.View.performClick(View.java:2408)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 android.view.View$PerformClick.run(View.java:8816)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 android.os.Handler.handleCallback(Handler.java:587)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 android.os.Handler.dispatchMessage(Handler.java:92)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 android.os.Looper.loop(Looper.java:123)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 android.app.ActivityThread.main(ActivityThread.java:4627)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 java.lang.reflect.Method.invoke(Method.java:521)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
> 
> 07-10 13:28:58.558: E/AndroidRuntime(647): at dalvik.system.NativeStart.main(Native Method)

我做错了什么？我真的被困在了这一点上。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:50:30.947

您从未实例化 newwords 对象。

您需要在 onClick 之前的 onCreate 中添加类似的内容

```
newwords = new Words(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:51:28.210

我认为问题在于您没有给出`Context c`(in `Words`) 实际值，因此`c.getResources()`会抛出 NullPointerException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:59:39.093

我在这里看到两件事，

*   您没有像中那样实例`newwords`化`newwords = new Words("")`；
*   `c`为 null 且未分配上下文。

我建议你像这样重新编码这个类：

```
public class Words{
   public Word[] wordsArray;
   private String locale = "de";
   private Context c;
   public Words(String locale, Context paramContext) {
      if (locale != null ) {
         this.locale = locale;
      }
      c = paramContext;
   }
// Rest of code ok.
//
// Remove the Context c variable further on as it is declared above!
} 
```

所做的是，我们只是添加了`Context`作为类的构造函数的一部分`Words`。`Words`然后从你的类中实例化`SwearActivity`类：

```
public void onClick(View view){
    newwords = new Words("", getApplicationContext());
    try {
        newwords.PlayWithRawFiles();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        System.out.println("greshka");
        e.printStackTrace();
    }
} 
```

# java - 春季拦截器处理程序令人困惑的行为

> ID：11414772
> 
> 赞同：0
> 
> 时间：2012-07-10T13:48:47.547
> 
> 标签：java, spring, spring-mvc, interceptor

最近几天我在玩spring拦截器，想通过拦截器捕获和处理特定请求。我想要做的是在特定控制器处理之前拦截每个请求，检查请求是否包含特定参数。如果是，请做一些事情，然后将这些事情签署给映射该请求的控制器。

最后我设法做到了，但是当我一次执行多个请求时，使用不同的参数值，只有最后一个请求的参数值被分配给每个控制器处理程序，即使每个控制器都应该有包含在请求中的参数。

示例（同时执行）：

[http://domain.com/controller/method?param=xfg](http://domain.com/controller/method?param=xfg)

[http://domain.com/controller/method?param=mtc](http://domain.com/controller/method?param=mtc)

[http://domain.com/controller/method?param=abc](http://domain.com/controller/method?param=abc)

在每个请求的响应中，我得到 abc！（有时我会得到 xfg 和 abc，或 mtc 和 abc，但不会同时得到这三个）。当我使用超时执行这些请求时，每个请求都有时间在调用下一个请求之前完成，它工作正常。

有谁知道如何处理这个？

谢谢

更新：

```
public class OLMyInterceptor extends HandlerInterceptorAdapter {

    static Logger LOG = Logger.getLogger(OLAuthentificationInterceptor.class);

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
     Map<String, Object> activeParamsMap = request.getParameterMap();
         for(Entry<String, Object> param : activeParamsMap.entrySet()) {
             if(param.getKey().startsWith("aP_")) {
                  activeParams.put(param.getKey().substring(3), param.getValue());
             }
         }

         ((MainController) handler).setParams(activeParams);

         return true;
    }
} 
```

那里有代码示例。我的每个控制器都扩展了 MainController，这就是为什么我将处理程序转换为具有 setParams 方法的 MainController。每个其他控制器都以不同的方式使用参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:03:08.157

您必须使用参数调用控制器处理程序方法，而不是更改控制器状态的 setter。

控制器必须是无状态的或线程安全的。当您更改状态时，您无法保证 setter 何时应用更改 - 在另一个线程中调用处理程序之前或之后。或者另一个线程使用其他参数调用 setter，而前一个线程为新参数调用处理程序方法。

# asp.net - 使用 UNC 路径的链接在 .Net 4.0 中的工作方式是否不同？

> ID：11414781
> 
> 赞同：0
> 
> 时间：2012-07-10T13:49:06.687
> 
> 标签：asp.net, .net, hyperlink, path, unc

我正在开发一个允许用户使用 UNC 路径链接文档的 ASP.Net 站点。我们的客户将此站点用于内部流程，因此其域中的所有用户都应有权访问 UNC 路径。

链接的文档显示在网格中。当用户想要访问文档时，他们双击网格的行，使用 window.open() 方法打开文档。这在 .Net 2.0 中有效，但是现在我们已经转移到 .Net 4.0 并且无法再访问这些文档。

**这是我的问题：**与 .Net 2.0 相比，使用 UNC 路径的链接在 .Net 4.0 中的工作方式是否不同？

我使用的是 IE9，并且链接在 .Net 2.0 版本的站点上仍然有效，但在 .Net 4.0 版本上出现“拒绝访问”错误。源路径和 UNC 路径未更改。是否存在可能导致此问题的 IIS 设置？

另一个有趣的事情是，当一切都在我的本地机器上（IIS 和 UNC 共享）时，两个版本的链接都可以正常工作。但是，当从专用 Web 服务器（位于我们的域中并且可以访问共享）运行时，它们会失败。

有人对此有任何想法吗？

# java - 如何检查 Java 类是否是当前堆栈跟踪的一部分？

> ID：11414782
> 
> 赞同：3
> 
> 时间：2012-07-10T13:49:07.863
> 
> 标签：java, stack-trace

我有一堂课：

```
MessageReceiver.java 
```

接收消息但也可以间接产生消息（然后可能会重新传递给此类）。我不想在堆栈跟踪中处理使用 MessageReceiver.java 发送的消息。有没有办法有效地确定我收到的消息是否来自 MessageReceiver.java？

以下链是可能的：

```
MessageReceiver.java -> OtherClass.java -> MessageProducer.java -> MessageReceiver.java 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:06:44.660

我想这就是你所追求的：

```
Class<?> myClass = MessageReceiver.class;
StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();

for (StackTraceElement element : stackTrace) {
    if (element.getClassName().equals(myClass.getCanonicalName())) {
        System.out.println("class found in stack trace");
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:54:46.663

您可以将自定义标头添加到指示原始发射器的消息中。因此`MessageReceiver`将通过将标头值设置为 来发出消息`"MessageReceiver"`，并将丢弃具有此特定标头值的所有消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:53:36.903

您可以从异常中获取堆栈跟踪，然后简单地循环比较类名。

Exception.getStackTrace() 返回一个 StackTraceElements 数组，它有一个 getClassName 方法。

[http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getStackTrace](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getStackTrace) () [http://docs.oracle.com/javase/6/docs/api/java/lang /StackTraceElement.html](http://docs.oracle.com/javase/6/docs/api/java/lang/StackTraceElement.html)

假设我理解了这个问题

# java - 合并排序。错误 - 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：2

> ID：11414783
> 
> 赞同：1
> 
> 时间：2012-07-10T13:49:07.950
> 
> 标签：java, mergesort, arrays

今天是个好日子！我这里有一个程序，它使用归并排序从文件中对 50,000 个单词进行排序。我在他的算法简介中遵循了 Thomas Cormen 的伪代码，当我手动“调试”它时似乎是正确的。但是，当我运行程序时，它会显示 `Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 2` . 是的，我认为这是由于大 `NO_OF_WORDS` （即 50,000），但即使我将其减少到 10，它仍然显示相同的错误。

```
import java.io.*;
import java.util.*;

public class SortingAnalysis {

    public static void merge(String[] A, int p, int q, int r) {
        int n1 = q-p+1;
        int n2 = r-q;
        String[] L = new String[n1+1];
        String[] R = new String[n2+1];
        for (int i=1; i<n1; i++) {
            L[i] = A[p+i-1];
        }
        for (int j=1; j<n2; j++) {
            R[j] = A[q+j];
        }
        L[n1+1] = "zzzzz"; //for infinity because if I use Math.floor, it will return a double
        R[n2+1] = "zzzzz";
        int i=1;
        int j=1;
        for (int k=p; k<=r; k++) {
            int comparison = L[i].compareTo(R[j]);
            if (comparison <= 0){
                A[k] = L[i];
                i++;
            }
            else {
                A[k] = R[j];
                j++;
            }

        }

    }

    public static void mergeSort (String[] A, int p, int r) {
        if (p<r) {
            int q = (p+r)/2;
            mergeSort(A, p, q);
            mergeSort(A, q+1, r);
            merge(A, p, q, r);
        }
    }

    public static void main(String[] args) {
        final int NO_OF_WORDS = 50000;
        try {
            Scanner file = new Scanner(new File(args[0]));
            String[] words = new String[NO_OF_WORDS];

            int i = 0;
            while(file.hasNext() && i < NO_OF_WORDS) {
                words[i] = file.next();
                i++;
            }
            long start = System.currentTimeMillis();

            mergeSort(words, 0, words.length-1);

            long end = System.currentTimeMillis();
            System.out.println("Sorted Words: ");
            for(int j = 0; j < words.length; j++) {
                System.out.println(words[j]);
            }   
            System.out.print("Running time: " + (end - start) + "ms");

        }
        catch(SecurityException securityException) {
            System.err.println("Error");
            System.exit(1);
        }
        catch(FileNotFoundException fileNotFoundException) {
            System.err.println("Error");
            System.exit(1);
        } 
    } 
} 
```

我认为这是因为 String[] L 和 R 的声明。或者不是。请帮我看看有什么问题。非常感谢！

**编辑**
Cormen 的伪代码

```
MERGE(A, p, q, r )
n1 ← q − p + 1
n2 ←r − q
create arrays L[1 . . n1 + 1] and R[1 . . n2 + 1]
for i ← 1 to n1
     do L[i ] ← A[p + i − 1]
for j ← 1 to n2
     do R[ j ] ← A[q + j ]
L[n1 + 1]←∞
R[n2 + 1]←∞
i ← 1
j ← 1
for k ← p to r
     do if L[i ] ≤ R[ j ]
        then A[k] ← L[i ]
             i ←i + 1
        else A[k] ← R[ j ]
             j ← j + 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:07:14.523

你的方法有一个大问题`merge()`：

```
String[] L = new String[n1+1];
String[] R = new String[n2+1]; 
```

不会很好玩

```
L[n1+1] = "zzzzz"; //for infinity because if I use Math.floor, it will return a double
R[n2+1] = "zzzzz"; 
```

`ArrayIndexOutOfBoundsException`无论 的值如何，您都会在这里得到一个`n1`，`n2`因为数组在 Java 中是从 0 开始的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:56:43.387

我不知道你的伪代码是什么，但你的实现似乎是错误的。我看过维基百科合并排序，它完全不同。

所以我不会在这里给你完整的工作算法。我只会为您提供解决您的 indexOutOfBounds 问题的解决方案，但您仍然需要在实现上做更多工作。

在 Java 中，当你这样做时：

```
String[] L = new String[5]; 
```

您声明一个字符串数组，其中可以包含`5`字符串。

以这种方式访问​​这些字符串：`L[anIndex]`。

第一个元素在 index 处`0`。

因此，如果您有一个大小数组，`5` **那么最后一个元素位于索引处`4`**（因为我们从 0 开始）。

在您的代码中，您可以这样做：

```
String[] L = new String[n1+1];
String[] R = new String[n2+1]; 
```

然后 ：

```
L[n1+1] = "zzzzz";
R[n2+1] = "zzzzz"; 
```

所以在这里你总是试图访问一个不存在的索引处的字符串。每个数组中的最后一个元素分别是`n1`和`n2`（因为数组大小是`n1+1`和`n2+1`）。

我希望你能通过这个解释更好地理解数组在 Java 中是如何工作的。现在您必须改进您的实现，因为它仍然无法正常工作。如果您不太了解，也许可以将您使用的伪代码提供给我们。

**编辑 ：**

好的，我做了一些更正。

这是工作算法。我不得不更改几个索引以适应 Java“基于 0 的数组”，看看：

```
import java.io.*;
import java.util.*;

public class SortingAnalysis {

    public static void merge(String[] A, int p, int q, int r) {
        int n1 = q-p+1;
        int n2 = r-q;
        if(A[p]==null || A[q]==null)return;
        String[] L = new String[n1+1];
        String[] R = new String[n2+1];
        for (int i=0; i<n1; i++) {
            L[i] = A[p+i];
        }
        for (int j=0; j<n2; j++) {
            R[j] = A[q+j +1];
        }
        L[n1] = "zzzzz"; //for infinity because if I use Math.floor, it will return a double
        R[n2] = "zzzzz";
        int i=0;
        int j=0;
        for (int k=p; k<=r; k++) {
            int comparison = L[i].compareTo(R[j]);
            if (comparison <= 0){
                A[k] = L[i];
                i++;
            }
            else {
                A[k] = R[j];
                j++;
            }

        }

    }

    public static void mergeSort (String[] A, int p, int r) {
        if (p<r) {
            int q = (p+r)/2;
            mergeSort(A, p, q);
            mergeSort(A, q+1, r);
            merge(A, p, q, r);
        }
    }

    public static void main(String[] args) {
        final int NO_OF_WORDS = 50000;
        try {
            Scanner file = new Scanner("bla blya blay byla ybla");
            ArrayList<String> words = new ArrayList<String>();

            while(file.hasNext() && words.size() < NO_OF_WORDS) {
                words.add(file.next());
            }
            String [] wordsArray = new String[words.size()];
            words.toArray(wordsArray);
            long start = System.currentTimeMillis();

            mergeSort(wordsArray, 0, wordsArray.length-1);

            long end = System.currentTimeMillis();
            System.out.println("Sorted Words: ");
            for(int j = 0; j < wordsArray.length; j++) {
                System.out.println(wordsArray[j]);
            }   
            System.out.print("Running time: " + (end - start) + "ms");

        }
        catch(SecurityException securityException) {
            System.err.println("Error");
            System.exit(1);
        }

    }
} 
```

请注意，我已经更改了您的 Main，现在我使用 arrayList 来避免空值，如果您的文本包含的单词少于原始数组大小。使用您的解决方案，如果您不填写 50000 个单词，您会在数组中获得 null，然后在合并算法中获得 nullPointerException。

# iphone - 模拟器、设备和应用商店的行为测试有什么区别

> ID：11414788
> 
> 赞同：0
> 
> 时间：2012-07-10T13:49:20.883
> 
> 标签：iphone, ios, xcode, app-store

我试图弄清楚在访问主包、文档目录等方面在不同层上测试的差异是什么。

我知道在模拟器上进行测试时，它会创建一个与 xcode 分开的执行环境的副本。在设备上和在应用商店上怎么样，有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:53:45.613

模拟器可以作为快速指南。不应将其作为唯一的测试方法。模拟器和设备之间存在差异（例如模拟器不区分大小写），模拟器不能提供作为设备的所有功能（例如指南针，相机）

您的代码如何访问文档目录等在两者之间应该没有区别。只要您以正确的方式编码（例如，区分大小写），您的代码就应该适用于两者。

当您发布到 AppStore 时，您在设备上运行的内容应该没有什么不同。它只是捆绑在一起并使用适当的证书签名。

# php - 配置和运行 PHPWord

> ID：11414790
> 
> 赞同：0
> 
> 时间：2012-07-10T13:49:21.463
> 
> 标签：php, phpword

我正在尝试根据[PHPWord 示例](http://phpword.codeplex.com/documentation)的示例示例生成一个单词模板。但是没有生成word模板或无法成功显示页面。我已经过滤掉了示例代码，只添加了一段hello world！

```
Code:
<?php
  require_once 'PHPWord.php';
  $PHPWord = new PHPWord();
  $section = $PHPWord->createSection();
  $section->addText('Hello world!');
  header("Cache-Control: public");
  header("Content-Description: File Transfer");
  header("Content-Disposition: attachment; filename=helloWorld.docx");
  header("Content-Type: application/docx");
  header("Content-Transfer-Encoding: binary");
  $objWriter = PHPWord_IOFactory::createWriter($PHPWord, 'Word2007');
  $objWriter->save('helloWorld.docx');
  ?> 
```

请建议，如果我使用 objwriter-> 保存 helloworld.docx。它会自动在我的网络服务器中吗？还是临时文件夹？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-04T14:11:19.047

如果您希望您的网页强制下载生成的文档，只需使用以下命令：

```
$PHPWord->save('helloWorld.docx', 'Word2007', true); 
```

# java - 将缓存实现为分布在两个战争文件之间

> ID：11414792
> 
> 赞同：0
> 
> 时间：2012-07-10T13:49:22.430
> 
> 标签：java, servlets

我有 2 个在 tomcat、a.war 和 b.war 上运行的 war 文件，因为我是缓存实现的新手。我想在这两次战争之间建立一个共同的缓存机制。因此，当任何战争调用缓存时，它应该是常见的。

我正在工作的应用程序没有框架，它纯粹在 servlet 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:55:02.180

使用 Oracles Coherence 缓存。

[http://coherence.oracle.com/display/COH35UG/Configuring+and+Using+Coherence+Extend](http://coherence.oracle.com/display/COH35UG/Configuring+and+Using+Coherence+Extend)

# java - 定义功能性 Java API 时，通用通配符的正确用法是什么？

> ID：11414794
> 
> 赞同：3
> 
> 时间：2012-07-10T13:49:23.583
> 
> 标签：java, generics, bounded-wildcard, generic-method

我正在编写函数式静态辅助方法，充当通用抽象的运算符（例如`Iterable<T>`），我对何时应该使用通配符感到有些困惑。在以下情况下，正确、最安全和最简单的方法签名是什么，为什么？

*   检查属性：

`public static int size(Iterable<?> source)`

对比

`public static <T> int size(Iterable<T> source)`

*   转型：

`public static <T> Iterable<T> take(Iterable<T> source, int count)`

对比

`public static <T> Iterable<T> take(Iterable<? extends T> source, int count)`

*   结合：

`public static boolean elementsEqual(Iterable<?> first, Iterable<?> second)`

对比

`public static <T> boolean elementsEqual(Iterable<T> first, Iterable<T> second)`

对比

`public static <T> boolean elementsEqual(Iterable<? extends T> first, Iterable<? extends T> second)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:01:41.460

```
public static <T> int size(Iterable<T> source) 
```

相当于

```
public static int size(Iterable<?> source) 
```

只要你不需要`T`在方法实现中引用即可。我会犯错`?`，只是因为它减少了混乱。

```
public static <T> Iterable<T> take(Iterable<? extends T> source, int count) 
```

是更通用的，它应该在两种情况下都有效，所以我会继续使用那个。

```
public static boolean elementsEqual(Iterable<?> first, Iterable<?> second) 
```

是合适的，因为`Object.equals(Object)`没有狭窄的签名。

（[Guava](http://guava-libraries.googlecode.com) [提供了](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Iterables.html)许多这些方法；如果您愿意，可以将其用作参考。披露：我为 Guava 做出了贡献。）

# magento - 在每个页面上调用 magento 类别树菜单查询

> ID：11414799
> 
> 赞同：1
> 
> 时间：2012-07-10T13:49:50.173
> 
> 标签：magento, tree, windows-ce, categories

我在 Magento CE 1.6.2 的每个页面上都调用了这个查询。为了找出从哪里调用它，我禁用了所有模块，删除了已完成的自定义，但它仍然被调用，这个查询减慢了页面加载时间，我想知道如何停止它从被执行。

下面给出了查询，为了简单起见，我删除了很多类别 id' 以保持 sql 简短。如果我能获得停止调用此查询的解决方案或提示，那就太好了。

```
SELECT `e`.*, IF(at_is_active.value_id > 0, at_is_active.value, at_is_active_default.value) AS `is_active`, IF(at_include_in_menu.value_id > 0, at_include_in_menu.value, at_include_in_menu_default.value) AS `include_in_menu`, `core_url_rewrite`.`request_path` FROM `catalog_category_entity` AS `e`
INNER JOIN `catalog_category_entity_int` AS `at_is_active_default` ON (`at_is_active_default`.`entity_id` = `e`.`entity_id`) AND (`at_is_active_default`.`attribute_id` = '119') AND `at_is_active_default`.`store_id` = 0
LEFT JOIN `catalog_category_entity_int` AS `at_is_active` ON (`at_is_active`.`entity_id` = `e`.`entity_id`) AND (`at_is_active`.`attribute_id` = '119') AND (`at_is_active`.`store_id` = 1)
INNER JOIN `catalog_category_entity_int` AS `at_include_in_menu_default` ON (`at_include_in_menu_default`.`entity_id` = `e`.`entity_id`) AND (`at_include_in_menu_default`.`attribute_id` = '934') AND `at_include_in_menu_default`.`store_id` = 0
LEFT JOIN `catalog_category_entity_int` AS `at_include_in_menu` ON (`at_include_in_menu`.`entity_id` = `e`.`entity_id`) AND (`at_include_in_menu`.`attribute_id` = '934') AND (`at_include_in_menu`.`store_id` = 1)
LEFT JOIN `core_url_rewrite` ON (core_url_rewrite.category_id=e.entity_id) AND (core_url_rewrite.is_system=1 AND core_url_rewrite.product_id IS NULL AND core_url_rewrite.store_id='1' AND id_path LIKE 'category/%') WHERE (`e`.`entity_type_id` = '9') AND (`e`.`entity_id` IN('105', '125', '284', '285', '286', '288', '289', '185', '463', '464', '465', '625')) AND (`e`.`entity_id` NOT IN('140', '145',  '530', '531', '775')) AND (IF(at_is_active.value_id > 0, at_is_active.value, at_is_active_default.value) = '1') AND (IF(at_include_in_menu.value_id > 0, at_include_in_menu.value, at_include_in_menu_default.value) = '1') 
```

干杯阿琼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T04:27:48.207

这可能是由索引 catalogue_url 引起的

一个快速的解决方法是将所有索引设置为手动。

然后通过 cron 每小时运行这个 shell 脚本：

```
php shell/indexer.php --reindex catalog_product_attribute
php shell/indexer.php --reindex catalog_product_price
php shell/indexer.php --reindex tag_summary
php shell/indexer.php --reindex cataloginventory_stock
php shell/indexer.php --reindex catalogsearch_fulltext
php shell/indexer.php --reindex catalog_category_product
php shell/indexer.php --reindex catalog_category_flat
php shell/indexer.php --reindex catalog_product_flat 
```

它索引除 url 之外的所有内容。

然后每晚运行：

```
<?php

echo "clearing core_url_rewrite so that indexer can repopulate immediately\n";

require_once "/home/path/to/store/app/Mage.php";
umask( 0 );
Mage::App('default');

$resource = Mage::getSingleton('core/resource');

$writeConnection = $resource->getConnection('core_write');

$query = "TRUNCATE `core_url_rewrite`";

$writeConnection->query($query);

echo "cleared\n";

$start = time();

echo "reindexing catalog_url start \n";

$process = Mage::getSingleton('index/indexer')->getProcessByCode('catalog_url');
$process->reindexEverything();

$finish = time() - $start;

echo "reindexing catalog_url finished in ".$finish." seconds \n";

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:44:32.427

`top.phtml`用定期更新的静态菜单版本替换代码。

`menu.php`在您的 magento 根文件夹中创建一个文件：

```
#!/usr/bin/php
<?php
    require_once('app/Mage.php');
    Mage::app();

        $block = new Mage_Catalog_Block_Navigation();
        $_menu = $block->renderCategoriesMenuHtml(0,'level-top');

        echo "
        <div class='nav-container'>
            <ul id='nav'>
                        $_menu
            </ul>
        </div>
        ";
?> 
```

然后，在您的`./shell`目录中创建另一个文件`create-category-menus.sh`.

```
#!/bin/bash
/[path to magento root]/menu.php > /[path to magento root]/app/design/frontend/default/[template_name]/template/catalog/navigation/top.phtml.temp

rm -f /[path to magento root]/app/design/frontend/default/[template_name]/template/catalog/navigation/top.phtml

mv  /[path to magento root]/app/design/frontend/default/[template_name]/template/catalog/navigation/top.phtml.temp  /[path to magento root]/app/design/frontend/default/[template_name]/template/catalog/navigation/top.phtml

chown [webserver-user].[webserver-group]  /[path to magento root]/app/design/frontend/default/[template_name]/template/catalog/navigation/top.phtml 
```

现在，只需`create-category-menus.sh`定期将 crontab 添加到您的 crontab 中，比如 15 分钟左右。

您可能需要为输出文件创建文件夹结构，这也假设您使用的是 linux 服务器。如果你不是，那么你应该是。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:12:32.607

似乎是用于导航的查询。magento 默认主题将动态顶部导航的类别拉入：

/app/code/core/Mage/Catalog/Block/Navigation.php

renderCategoriesMenuHtml() 从（默认情况下）从以下位置调用：

基本/默认/模板/目录/导航/top.phtml

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T11:43:24.073

启用阻止 HTML 输出缓存。因此，菜单必须仅在第一个页面调用时呈现。由于 magento 1.7 这个块不再被缓存，缓存需要以编程方式启用。

# html - CSS、HTML - 站点在 Internet Explorer 中显示非常错误

> ID：11414808
> 
> 赞同：1
> 
> 时间：2012-07-10T13:50:25.450
> 
> 标签：html, css, internet-explorer

请查看此链接 - [http://sklepylaserowe.test.dih.pl/](http://sklepylaserowe.test.dih.pl/)。它在 Firefox、Chrome 和 Opera 中显示良好 - 但在 Internet Explorer（8 和 9）中出现问题。这可能是什么原因？（从列表“Wybierz województwo”中，请选择“śląskie”，单击“Dalej >>”，然后单击出现的链接，隐藏该覆盖窗口）

许多基本的 CSS 命令不起作用，例如：

```
margin:0 auto; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T13:53:32.617

您无法使用 Doctype 启动文档，这会触发[Quirks 模式](http://en.wikipedia.org/wiki/Quirks_mode)，在该模式下浏览器会模拟其古老祖先的错误。

不支持居中的自动边距是 IE 中的这些错误之一（在 IE 6 中已修复）。

[验证](http://validator.w3.org/)您的 HTML。您不能在 Doctype 之前放置任何标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:56:47.823

```
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="js/geo.js"></script>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
```

将上面的代码更改为

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery/jquery-1.4.4.min.js"></script>
    <script type="text/javascript" src="js/geo.js"></script>
    ... 
```

# reporting-services - 为什么我的结果对于报告服务中的 mod 不正确

> ID：11414813
> 
> 赞同：0
> 
> 时间：2012-07-10T13:50:39.933
> 
> 标签：reporting-services, expression, division, modulo

```
RIGHT("0" & (SUM(Fields!TotalTimeSpent.Value MOD 60, "Group3")), 2) 
```

值为 273，我返回 93 而不是预期的 33。

![在此处输入图像描述](../Images/2719520cd95585f2704d7758e59ec9eb.png)

表达式的目的是计算花费的时间，这里是完整的表达式。这几乎适用于所有条目，这是我见过的唯一一个添加值而不是修改的示例。

```
= IIF(FLOOR(SUM(Fields!TotalTimeSpent.Value / 60, "Group3")) = 0, "00", FLOOR(SUM(Fields!TotalTimeSpent.Value / 60, "Group3"))) & ":" & RIGHT("0" & (SUM(Fields!TotalTimeSpent.Value MOD 60, "Group3")), 2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:50:23.510

您是否可能打算在运行 SUM 后进行 MOD 计算？所以表达式是：

```
=RIGHT("0" & (SUM(Fields!TotalTimeSpent.Value, "Group3") MOD 60), 2) 
```

作为测试，如果我只运行：

```
=RIGHT("0" & (273 MOD 60), 2) 
```

它给了我 33 的预期结果。

# c# - 数据表读取器加载非常慢

> ID：11414815
> 
> 赞同：8
> 
> 时间：2012-07-10T13:50:43.990
> 
> 标签：c#, performance, sqlite, datatable, loading

我需要根据关键字获取一些数据，查询被测试为 100% 准确，但问题是加载`reader`速度很慢。我尝试用根本不包含`inner join`s 的查询替换此查询，并且加载速度非常快。所以我想知道，由于我只选择一列，为什么 DataTable.Load() 需要这么多时间？是加载整个结果而不仅仅是一列的`SQLite`'s吗？`ExecuteReader`

在使用 DataTable 之前，每个执行的平均时间`reader.Read()`是 7 秒。

这是我的代码：

```
_database.Connect();

var selectCommand = new SQLiteCommand(
@"SELECT A.ID AS MY_ID FROM MD 
INNER JOIN TMD ON MD.ID = TMD.ID_MD 
INNER JOIN TR ON TR.ID = TMD.ID_TR 
INNER JOIN P ON P.ID = TR.ID_P 
INNER JOIN DP ON DP.ID_P = P.ID 
INNER JOIN CD ON CD.ID = DP.ID_CD 
WHERE CD.DESC = @desc"
);

selectCommand.Parameters.AddWithValue("@desc", value);

using (DbDataReader reader = _database.ExecuteQuery(selectCommand))
{
    DataTable data = new DataTable("MyData");
    data.Load(reader);
}
_database.Disconnect(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:54:35.300

我认为这是由于 SQLite 的性质和大量的连接而发生的。

尝试重构数据库方案，例如对数据进行非规范化以加快访问速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:27:00.883

[SQLite 查询计划](http://www.sqlite.org/optoverview.html)器提供了一些关于 SQLite 查询优化的提示。

一些可能适用于您的问题的项目：

1.) 由于 SQLite 中的实现，您可能会尝试重新排序多个连接：

> SQLite 的当前实现只使用循环连接。也就是说，连接被实现为嵌套循环。连接中嵌套循环的默认顺序是 FROM 子句中最左边的表形成外循环，最右边的表形成内循环。

因此，根据 JOIN 的构造方式，性能可能会有所不同。

SQLite 尝试自动优化它，但据我了解文档并不能保证成功（我强调）：

> 但是，如果这样做有助于选择更好的索引，SQLite 将以不同的顺序嵌套循环。[...] 连接重新排序是自动的，通常工作得很好，程序员不必考虑它，特别是如果 ANALYZE 已用于收集有关可用索引的统计信息。**但有时需要程序员的一些提示。**

2.) 另外，请注意 INNER JOINS 在内部转换为 WHERE 子句，因此文档的 WHERE 部分中的任何性能提示也可能适用：

> 内部连接的 ON 和 USING 子句在上面 1.0 段中描述的 WHERE 子句分析之前转换为 WHERE 子句的附加术语。因此，对于 SQLite，使用较旧的 SQL89 逗号连接语法相比，使用较新的 SQL92 连接语法没有计算优势。他们最终都在内部连接上完成了完全相同的事情。

3.）您可以考虑在语句中选择更多列，如果它们上有任何索引：

> 为了使用该索引，索引的每一列都不必出现在 WHERE 子句术语中。但**所使用的索引列中不能有间隙。**

# c++ - typedef 和显式实例化之间的代码重复

> ID：11414817
> 
> 赞同：5
> 
> 时间：2012-07-10T13:50:53.567
> 
> 标签：c++, templates, typedef, header-files, code-duplication

树.h

```
template<typename Functor, char Operator>
class binary_operation : public node
{
// ... unimportant details ...

    unsigned evaluate() const;
    void print(std::ostream& os) const;
};

typedef binary_operation<std::plus<unsigned>, '+'> addition;
typedef binary_operation<std::multiplies<unsigned>, '*'> multiplication;
// ... 
```

树.cpp

```
template<typename Functor, char Operator>
unsigned binary_operation<Functor, Operator>::evaluate() const
{
    // ... unimportant details ...
}

template<typename Functor, char Operator>
void binary_operation<Functor, Operator>::print(std::ostream& os) const
{
    // ... unimportant details ...
}

template class binary_operation<std::plus<unsigned>, '+'>;
template class binary_operation<std::multiplies<unsigned>, '*'>;
// ... 
```

如您所见，头文件中的 typedef 与实现文件中的显式类模板实例化之间存在一些代码重复。有什么方法可以摆脱不需要像往常一样将“所有内容”放在头文件中的重复项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:50:38.763

这是无效的并且被实现拒绝，因为在详细类型说明符中使用了 typedef 名称

```
template class addition; 
```

以下内容也是无效的，因为标准规定在详细类型说明符中必须包含一个简单的模板 id。不过，Comeau online 和 GCC 都接受它。

```
template class addition::binary_operation; 
```

您可以应用变态解决方法以完全符合标准

```
template<typename T> using alias = T;
template class alias<multiplication>::binary_operation; 
```

至少我在快速浏览规范时不再发现它是无效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T15:22:13.327

使用宏。你可以写一个像

```
I_HATE_MACROS(binary_operation<std::plus<unsigned>, '+'>, addition)
I_HATE_MACROS(binary_operation<std::multiplies<unsigned>, '*'>, multiplication) 
```

然后你可以做

```
#define I_HATE_MACROS(a, b) typedef a b; 
```

或者

```
#define I_HATE_MACROS(a, b) template class a; 
```

然后

```
#include "DisgustingMacroHackery.h" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T14:56:50.500

我问我自己，你为什么要写一个 .cpp 文件，因为你有模板，它们应该全部放在头文件中，或者放在一个单独的文件中，例如“.icc”，它包含 cpp 文件中的内容。我不确定，但模板定义不应该总是在编译单元中。

请参阅 ->[在 .CPP 文件中存储 C++ 模板函数定义](https://stackoverflow.com/questions/115703/storing-c-template-function-definitions-in-a-cpp-file)

# android - 使用Android将在线XML文件解析为带有sax的数据库

> ID：11414819
> 
> 赞同：1
> 
> 时间：2012-07-10T13:50:59.263
> 
> 标签：android, eclipse, sqlite, xml-parsing, saxparser

我目前正在尝试使用我自己编写的 SAX 解析器解析在[BNR 官方网站上找到的 XML 文件，并将结果返回到列表中。](http://www.bnr.ro/nbrfxrates.xml)该列表旨在存储到 SQLite 数据库中，以便在我的应用程序中进一步使用。

问题是当我运行我的应用程序时，没有任何东西被插入到数据库中。这是我目前正在使用的代码：

```
package com.example.myapp;
import java.io.IOException;
import java.net.URL;
import java.util.List;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;

public class myXMLReader
{
  String urlM;
  DbHandler db;

public void setDatabase (DbHandler db)
{
    this.db=db;
}

   public myXMLReader(){} 

   public List<Record> obtainCurrencyList() throws ParserConfigurationException, 
                                               SAXException, 
                                               IOException
  {
  SAXParserFactory parserFactory = SAXParserFactory.newInstance();
  SAXParser parser = parserFactory.newSAXParser();

  XMLReader xmlReader = parser.getXMLReader();
  XMLHandler currHandler = new XMLHandler();
  currHandler.setDatabase(db);
  ((org.xml.sax.XMLReader) xmlReader).setContentHandler( currHandler);

  URL url = new URL( urlM);
  ((org.xml.sax.XMLReader) xmlReader).parse(new InputSource( url.openStream()));

  return currHandler.getRecList();        
 }
 } 
```

这里，XMLHandler 是我自己写的一个类，代码如下：

```
 package com.example.myapp;
  import java.util.ArrayList;
  import java.util.List;

  import org.xml.sax.Attributes;
  import org.xml.sax.SAXException;
  import org.xml.sax.helpers.DefaultHandler;

  public class XMLHandler extends DefaultHandler{

List<Record> recList = new ArrayList<Record>();
DbHandler db;
String data;
String rate;
String moneda;
String multi;
boolean brate;

public void setDatabase (DbHandler db)
{
    this.db=db;
}

public void startElement( String theNamespaceURI, 
        String theLocalName,
        String theQName, 
        Attributes theAtts) throws SAXException 
        { 

    if  (theLocalName.equals("Cube"))

    {
        data = theAtts.getValue("date");
    }

    //if (data.equals(db.getLastRecord().data)==false)
    {

        if(theLocalName.equals("Rate"))
        {
            moneda = theAtts.getValue("currency");
            multi = theAtts.getValue("multiplier");
            if (multi==null) multi="1";
            //rate = new String();
            brate=true;

        }

    }
        }

  public void endElement(String uri, String localName, String qName) throws 
  SAXException {
    //if (data.equals(db.getLastRecord().data)==false)
    {
        if (localName.equals("Rate"))
            recList.add(new Record( moneda, multi, rate, data));
    }
};

public void characters(char[] ch, int start, int length) throws SAXException 
{
    if (data.equals(db.getLastRecord().data)==false)
    {
        if (brate)
        {   
            rate = new String(ch,start,length);
            brate = false;
        }
    }
};

List<Record> getRecList()
{
    return recList;
} 
  } 
```

好的，与数据库相关的函数都包含在这里，在 DbHandler 类中：

```
package com.example.myapp;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.GregorianCalendar;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DbHandler
{
private DatabaseHelper mDbHelper;
SQLiteDatabase mDb;
private static Context mCtx;
// All Static variables
// Database Version
public static final int DATABASE_VERSION = 1;

// Database Name
public static final String DATABASE_NAME = "CursBNR";

// Contacts table name
public static final String TODAY = "CursCurent";

// Contacts Table Columns names
public static final String KEY_ID = "_id";
public static final String KEY_MONEDA = "Moneda";
public static final String KEY_MULTI = "Multi";
public static final String KEY_RATA = "Rata";
public static final String KEY_DATA = "Data";

public static class DatabaseHelper extends SQLiteOpenHelper{

    public DatabaseHelper(Context context) {
        super(mCtx, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db)
    {
String CREATE_TODAY = "CREATE TABLE " + TODAY + "("+ KEY_ID + " INTEGER PRIMARY KEY
 AUTOINCREMENT," + KEY_MONEDA + " TEXT,"+ KEY_MULTI + " TEXT,"+ KEY_RATA + " TEXT," + 
KEY_DATA + " TEXT" + ");";
        db.execSQL(CREATE_TODAY);
        ;
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TODAY);
        // Create tables again
        onCreate(db);
    }
}

/**init context, open and close database*/

public DbHandler initcontext(Context ctx) {
    mCtx = ctx;
    return this;
}

public DbHandler open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    return this;
}

public void close() {
    mDbHelper.close();
}

/**
 * All CRUD(Create, Read, Update, Delete) Operations
 */

// Adding new contact
void addRecord(String MONEDA, String MULTI, String RATA, String DATA) {
    try{
        mDb.execSQL("INSERT INTO "+TODAY+"
('"+KEY_MONEDA+"','"+KEY_MULTI+"','"+KEY_RATA+"','"+KEY_DATA+"') VALUES('"+MONEDA+"', 
'"+MULTI+"', '"+RATA+"', '"+DATA+"');");
    }catch(Exception ex){
        ex.printStackTrace();
    }
}

// Updating single contact
public void updateRecord(String MONEDA, String MULTI, String RATA, String DATA) 
{
    try{
        mDb.execSQL("UPDATE "+TODAY+" SET "+KEY_MONEDA+"='"+MONEDA+"', 
"+KEY_MULTI+"='"+MULTI+"', "+
                KEY_RATA+"='"+RATA+"',"+KEY_DATA+"='"+DATA+"' 
WHERE "+KEY_MONEDA+"='"+MONEDA+"';");
    }catch(Exception ex){
        ex.printStackTrace();
    }
}  

/** 
 * DELETE all students
 */
public void dropAllRecords(){
    try{
        mDb.delete(TODAY, null, null);
    }catch(SQLException ex){
        ex.printStackTrace();
    }   
}

public void deleteRecords (int ID)
{
    try
    {
        mDb.execSQL("DELETE * FROM"+TODAY+" WHERE "+KEY_ID+"='"+ID+"'");
    }
    catch (SQLException ex)
    {
        ex.printStackTrace();
    }
}

public Record getLastRecord(){

    String query = "SELECT * FROM "+TODAY+" WHERE "+KEY_ID+"=(SELECT 
MAX("+KEY_ID+") FROM "+TODAY+");";
    Cursor cursor = null;
    Record record = new Record();

    try{

        cursor = this.mDb.rawQuery(query, null);
        cursor.moveToFirst();
        record.setID(cursor.getString(0));
        record.setMoneda(cursor.getString(1));
        record.setMulti(cursor.getString(2));
        record.setRata(cursor.getString(3));
        record.setData(cursor.getString(4));    
    }catch(Exception ex){
        ex.printStackTrace();
    }

        //close cursor avoiding memory leaks
    if(!cursor.isClosed())
        cursor.close();

    return record;

}

public int getreccount(){
    //allocate memory
    String query = "SELECT COUNT("+KEY_MONEDA+") FROM "+TODAY;
    int result = 0;
    Cursor cursor = null;
    //fetch result
    try{
        cursor = this.mDb.rawQuery(query, null);
        cursor.moveToFirst();
        result = cursor.getInt(0);
    }catch(Exception ex){
        cursor.close();
        ex.printStackTrace();
    }

    //close cursor avoiding memory leaks
    if(!cursor.isClosed())
        cursor.close();

    return result;
} 
```

起初它似乎工作，直到我提出条件： if (data.equals(db.getLastRecord().data)==false) ，whick 是为了检查最后记录的项目是否与项目具有相同的日期在 xml 中。如果不是，它们应该被插入到数据库中，这是我通过以下编码完成的：

注意：这取自我的 ProjectActivity.java，它是 OnClick() 函数的一小部分。

```
myXMLReader XML= new myXMLReader();
XML.setDatabase(dbHandler);
XML.urlM="http://www.bnr.ro/nbrfxrates.xml";

    //create database if necessary, update database

    try
    {
        List <Record> reclist = XML.obtainCurrencyList();

        if (reclist.isEmpty()==false)
        {
            //database gets updated

            for (int i=0; i<reclist.size(); i++)
            {
                dbHandler.addRecord(reclist.get(i).moneda, 
reclist.get(i).multi, reclist.get(i).rata, reclist.get(i).data);    

            }
        } 

    }
    catch (Exception e) 
    {
        // TODO: handle exception
        Log.i("Exceptie", "Exceptie");
        e.printStackTrace();
    } 
```

我通过 Eclipse 调试界面检查了所有变量是否已正确设置，并且我得到的值似乎是正确的。我有一种感觉，如果在具有空表的数据库上运行 getLastRecord() 函数可能会有不正确的行为，但我不知道为什么。正如您在代码中看到的那样，我已经尝试对条件进行注释，但仍然没有任何内容返回到数据库中。

非常感谢您提出的任何建议，感谢您抽出宝贵的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T14:12:35.080

我可能读错了，但看起来您正在解析 XML，然后插入结果，但您正在尝试从数据库读取“插入的最后一条记录”，同时仍在解析 XML（即在您插入任何内容之前）。

尝试保留添加到`reclist`和使用的最后一条记录的副本/指针`if(lastRec !=null && data.equals(lastRec.data))`。

# c# - DotNetOpenAuth - 如何唯一识别谷歌用户？

> ID：11414824
> 
> 赞同：2
> 
> 时间：2012-07-10T13:51:06.773
> 
> 标签：c#, asp.net-mvc, dotnetopenauth

我正在使用 DotNetOpenAuth 来识别 Google 用户。我目前正在检索他们的电子邮件地址并将其副本保存在我的数据库中。但是，如果他们更改 Google 帐户中的电子邮件地址怎么办？然后我的副本无法再链接到他们的个人资料。

有没有办法通过 DotNetOpenAuth 唯一标识一个 Google 帐户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:24:05.407

始终使用`IAuthenticationResponse.ClaimedIdentifier`来唯一标识用户！

[OpenID 的安全模型就是基于这种设计](http://openid.net/specs/openid-authentication-2_0.html#identifying)。使用电子邮件地址在许多方面都是*不安全的。*任何提供商都可以发出肯定的断言，声称用户拥有特定的电子邮件地址。OpenID 不会阻止 OP 对电子邮件地址撒谎，因此如果您只使用电子邮件地址和用户密钥，那么您很容易受到用户欺骗攻击。即使 OP 没有试图不诚实，您通常也不能信任它，因为您不知道 OP 是否验证了电子邮件地址，或者只是询问用户他们的电子邮件地址是什么。

即使您相信 Google 不会撒谎，也有几个原因（其中一些可以减轻，但并不明显）不将电子邮件地址视为用户标识符。例如，Google 允许用户更改其 Google 帐户背后的电子邮件地址。如果用户这样做然后返回到您的网站，您的网站会将他们识别为不同的用户。更糟糕的是，如果另一个用户后来为他们的新 Google 帐户申请了一个回收的电子邮件地址，您的网站会将他们识别为旧用户，并让新用户访问大量旧用户数据。

OpenID 声明标识符旨在避免所有这些麻烦。

# sql - 仅适用于 Alpha 数字的正则表达式类？

> ID：11414833
> 
> 赞同：1
> 
> 时间：2012-07-10T13:51:30.200
> 
> 标签：sql, regex

'\w' 可以用来代替 [a-zA_Z0-9_]。我不需要“_”下划线。字母和数字的类是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:52:52.420

空无一人。使用`[a-zA-Z0-9]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:54:05.020

将正则表达式`[\da-z]`与正则表达式选项一起使用`ignoreCase`

# facebook - Facebook“->api”权限

> ID：11414835
> 
> 赞同：1
> 
> 时间：2012-07-10T13:51:33.563
> 
> 标签：facebook, api, permissions

我在我的网站上使用 Facebook 身份验证时遇到问题...

我正在使用 PHP Sdk，但我不明白为什么我可以使用诸如“getLoginUrl”/“getLoginStatusUrl”/“getUser”之类的功能（正确答案：facebook 会话已启动，我得到用户的 facebook ID）和当我想使用类似的东西时

```
$me = $facebook->api("/me/permissions"); 
```

要不就

```
$me = $facebook->api("/me"); 
```

总是有一个例外，没有任何工作......

我想这可能与权限或令牌有关，但我不知道是什么。当用户在我的网站上注册时，我会在此范围内询问我需要的权限：“email,user_about_me,user_location,read_friendlists,publish_stream”

权限似乎没问题的一个线索是，当异常发生时，我要求用户再次登录（facebook 连接）并且没有出现任何窗口，好像一切正​​常，但是仍然重新加载页面并且再次出现异常并且再次...

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:40:05.150

In order to receive the permissions of a user, you'll need to also include an access token like every other usage of `/me`.

For instance:

`$foo = json_decode(file_get_contents("https://graph.facebook.com/me/permissions/?access_token=" . $access_token, 0, null, null), true);`

Enjoy and good luck!

# java - 用Java将图像上传到服务器

> ID：11414837
> 
> 赞同：0
> 
> 时间：2012-07-10T13:51:46.423
> 
> 标签：java, jsp

我想将图像文件上传到服务器，并且我已经成功上传到服务器。但是我的项目文件夹中有一个“图像”文件夹，我想将图像保存在这个文件夹中。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:12:56.020

也许您找不到文件夹的路径？

*   在 JSP 中使用 String path = application.getRealPath("/images");

*   在 Servlet 中使用 String path = getServletContext().getRealPath("/images");

# spring-mvc - 怎么能 通过 Spring-Security 在我的控制器上工作？

> ID：11414838
> 
> 赞同：7
> 
> 时间：2012-07-10T13:51:56.690
> 
> 标签：spring-mvc, spring-security, spring-roo

我被这个问题困扰了很长时间。我想像这样`@Secure`将访问控制添加到我的控制器`ArticleController.java`：

```
@RequestMapping(headers = "Accept=application/json")
@ResponseBody
@Secured("ROLE_ADMIN")
public ResponseEntity<String> listJson() {
    HttpHeaders headers = new HttpHeaders();
    headers.add("Content-Type", "application/json; charset=utf-8");
    List<Article> result = Article.findAllArticles();
    return new ResponseEntity<String>(Article.toJsonArray(result), headers, HttpStatus.OK);
} 
```

listJson 返回一个 Json 对象，`Articles`但只有管理员可以读取它们。好的，现在我配置 Spring-Security 来完成这项工作。

我使用`security setup`Spring-ROO 的功能，生成了以下配置：

在 web.xml 中：

```
 <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value>
     </context-param>
....
    <servlet>
        <servlet-name>BabyPortal</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>WEB-INF/spring/webmvc-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet> 
```

在`spring/webmvc-config.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:security="http://www.springframework.org/schema/security" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd                 http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd                 http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd      http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <tx:annotation-driven/>
    <!-- The controllers are autodetected POJOs labeled with the @Controller 
        annotation. -->
    <context:component-scan base-package="com.tongxinyuan.babyportal"
        use-default-filters="false">
        <context:include-filter expression="org.springframework.stereotype.Controller"
            type="annotation" />
    </context:component-scan>

    <!-- Turns on support for mapping requests to Spring MVC @Controller methods 
        Also registers default Formatters and Validators for use across all @Controllers -->
    <mvc:annotation-driven conversion-service="applicationConversionService" />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
        up static resources -->
    <mvc:resources location="/, classpath:/META-INF/web-resources/"
        mapping="/resources/**" />

    <!-- Allows for mapping the DispatcherServlet to "/" by forwarding static 
        resource requests to the container's default Servlet -->
    <mvc:default-servlet-handler />

    <!-- Register "global" interceptor beans to apply to all registered HandlerMappings -->
    <mvc:interceptors>
        <bean class="org.springframework.web.servlet.theme.ThemeChangeInterceptor" />
        <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"
            p:paramName="lang" />
    </mvc:interceptors>

    <!-- Selects a static view for rendering without the need for an explicit 
        controller -->
    <mvc:view-controller path="/login" />
    <mvc:view-controller path="/" view-name="index" />
    <mvc:view-controller path="/uncaughtException" />
    <mvc:view-controller path="/resourceNotFound" />
    <mvc:view-controller path="/dataAccessFailure" />

    <!-- Resolves localized messages*.properties and application.properties 
        files in the application to allow for internationalization. The messages*.properties 
        files translate Roo generated messages which are part of the admin interface, 
        the application.properties resource bundle localizes all application specific 
        messages such as entity names and menu items. -->
    <bean
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
        id="messageSource" p:basenames="WEB-INF/i18n/messages,WEB-INF/i18n/application"
        p:fallbackToSystemLocale="false" />

    <!-- Store preferred language configuration in a cookie -->
    <bean class="org.springframework.web.servlet.i18n.CookieLocaleResolver"
        id="localeResolver" p:cookieName="locale" />

    <!-- Resolves localized <theme_name>.properties files in the classpath to 
        allow for theme support -->
    <bean
        class="org.springframework.ui.context.support.ResourceBundleThemeSource"
        id="themeSource" />

    <!-- Store preferred theme configuration in a cookie -->
    <bean class="org.springframework.web.servlet.theme.CookieThemeResolver"
        id="themeResolver" p:cookieName="theme" p:defaultThemeName="standard" />

    <!-- This bean resolves specific types of exceptions to corresponding logical 
        - view names for error views. The default behaviour of DispatcherServlet 
        - is to propagate all exceptions to the servlet container: this will happen 
        - here with all other types of exceptions. -->
    <bean
        class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"
        p:defaultErrorView="uncaughtException">
        <property name="exceptionMappings">
            <props>
                <prop key=".DataAccessException">dataAccessFailure</prop>
                <prop key=".NoSuchRequestHandlingMethodException">resourceNotFound</prop>
                <prop key=".TypeMismatchException">resourceNotFound</prop>
                <prop key=".MissingServletRequestParameterException">resourceNotFound</prop>
            </props>
        </property>
    </bean>

    <!-- Enable this for integration of file upload functionality -->
    <bean
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver"
        id="multipartResolver" />
    <bean
        class="com.tongxinyuan.babyportal.controller.ApplicationConversionServiceFactoryBean"
        id="applicationConversionService" />
    <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver"
        id="tilesViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.tiles2.TilesView" />
    </bean>
    <bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer"
        id="tilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/layouts/layouts.xml</value>
                <!-- Scan views directory for Tiles configurations -->
                <value>/WEB-INF/views/**/views.xml</value>
            </list>
        </property>
    </bean>

    <security:global-method-security mode="aspectj" secured-annotations="enabled" pre-post-annotations="enabled"/>

</beans> 
```

在`/spring/applicationContext-security.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security" 
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">
    <!-- HTTP security configurations -->
    <http auto-config="true" use-expressions="true">
        <form-login login-processing-url="/resources/j_spring_security_check" login-page="/login" authentication-failure-url="/login?login_error=t" />
        <logout logout-url="/resources/j_spring_security_logout" />
        <!-- Configure these elements to secure URIs in your application -->
        <intercept-url pattern="/choices/**" access="hasRole('ROLE_ADMIN')" />
        <intercept-url pattern="/member/**" access="isAuthenticated()" />
        <intercept-url pattern="/resources/**" access="permitAll" />
        <intercept-url pattern="/*.html" access="hasRole('ROLE_ADMIN')" />
    </http>
    <!-- Configure Authentication mechanism -->
    <authentication-manager alias="authenticationManager">
        <authentication-provider>
            <user-service>
                <user name="admin" password="admin" authorities="ROLE_ADMIN" />
                <user name="user" password="user" authorities="ROLE_USER" />
            </user-service>
        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

首先，我尝试添加`<global-method-security mode="aspectj" secured-annotations="enabled" pre-post-annotations="enabled"/>`to`/spring/applicationContext-security.xml`但没有奏效。那么可能控制器不在同一个安全上下文的上下文中，所以我添加了以`/spring/webmvc-config.xml`DispatcherServlet 开头的，没有工作。

我还添加了另一个 default `applicationContext.xml`，它也不起作用。我不知道如何配置`<global-method-security>`可以使方法安全工作的方法。似乎我只使用了一个上下文，我错过了什么吗？希望这些信息足以说明这个问题。

PS：生成的 URL 方法效果很好：`<intercept-url pattern="/*.html" access="hasRole('ROLE_ADMIN')" />`.

**补充：** 根据@LukeTaylor 的评论：我添加了`<global-method-security>`to`webmvc-config.xml`并删除了`mode="aspectj"`，它有效，我做了一些实验，仍然有一些问题：

1）它有效，但仅适用于 ArticleController.java，ArticleController_Roo_Controller.aj 中的@Secure 标签仍然不起作用，这与“挥手”有关吗？2）你能解释一下为什么`mode=aspectj`在这里搞得一团糟吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T10:47:25.670

正如@Luke Taylor 在评论中所建议的，标签`<sec:global-method-security/>`需要在dispatcher-servlet.xml（在这种情况下为webmvc-config.xml）文件中定义。而且不需要有属性`mode="aspectj"`。

谢谢。

# python - 将输出翻译成日语

> ID：11414839
> 
> 赞同：4
> 
> 时间：2012-07-10T13:51:57.107
> 
> 标签：python, internationalization, gettext, cjk, machine-translation

我打算将 Python Bottle 框架用于一个简单的网站。除了数字（例如，表格中显示的数据）外，所有输出都必须是日语。因此，我需要输出“345.65”，而不是输出“345.65 米”。

无论如何我可以创建一个包含（英语）键=（日语）值对的文本文件......类似于：

```
meters = メートル  <-- love google translate 
seconds = ...
height = ....
Welcome = ... 
Error = .... 
```

然后将其读入字典并在运行时翻译我的字符串：例如，

```
settranslationfile("JapaneseWords.txt");
response.write( "<li"> + 345.65 + translate("meters") + "</li>" ). 
```

我不知道日语或 Unicode/本地化的东西是如何工作的。如果必须，我会尝试了解 Unicode 是如何工作的……但是实现这一目标的阻力最小的途径是什么。任何执行此操作的 Python 库？日本客户很可能会填写像“JapaneseWords.txt”这样的文件并发送给我。

如果其他框架中有这样的工具，我愿意考虑切换到它们——最好是基于 Python 的框架，然后是 Java。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T13:53:20.247

您刚刚描述的内容已经存在，它被称为[gettext](https://www.gnu.org/software/gettext/)（**编辑**：另见 Python 的[`gettext`](http://docs.python.org/library/gettext.html#module-gettext)模块）。它确实做到了，我不确定 Bottle 框架是否支持它，但我知道[Django 框架](https://www.djangoproject.com/)（也是 Python）确实支持它。

当然应该可以将它集成到您​​的 Bottle web 应用程序中，但如果您愿意切换，那么这里是 Django[国际化和本地化](https://docs.djangoproject.com/en/dev/topics/i18n/)文档。

# asp.net-mvc-3 - 一个奇怪的实体框架困境

> ID：11414840
> 
> 赞同：0
> 
> 时间：2012-07-10T13:51:59.123
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

当我尝试使用 MVC3 将记录保存在编辑视图中时，我遇到了奇怪的行为。创建记录很好，没有什么不寻常的。如果我在编辑视图中打开相同的记录并对文本框进行更改，然后我单击保存并且记录不会得到更新。它可以通过断点看到 ModelState 未设置为有效。在那个断点中，我查看了模型中的键/值对，我看到两个键似乎不应该存在。这是我的模型：

```
public class Cases
{
    //case data model for call center
    //implement lists for all related child tables too

    [Key]
    public int CasesID { get; set; }

    public string CaseNumber { get; set; }

    [Required(ErrorMessage = "Customer is Required")]
    public int CustomerID { get; set; }
    public Customer Customer { get; set; }

    [MaxLength(50)]
    public string UserName { get; set; }  //get user name from the aspnet membership

    [Required(ErrorMessage = "Case Category is Required")]
    public int CaseCategoryID { get; set; }

    [Required(ErrorMessage = "Technician is Required")]
    public int TechnicianID { get; set; }
    public Technician Technicians { get; set; }

    [Required(ErrorMessage = "Engine Model is Required")]
    public int EngineModelID { get; set; }
    public EngineModel EngineModel { get; set; }

    [MaxLength(50)]
    public string BMSWorkorder { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "Status is Required")]
    public string CaseStatus { get; set; }

    [MaxLength(50)]
    public string OpenedBy { get; set; }

    [Required(ErrorMessage = "Opened Date is Required")]
    [DataType(DataType.DateTime)]
    public DateTime? OpenedDate { get; set; }

    [MaxLength(50)]
    public string ClosedBy { get; set; }

    [DataType(DataType.DateTime)]
    public DateTime? ClosedDate { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage="Caller First Name is Required")]
    public string CallerFirstName { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "Caller Last Name is Required")]
    public string CallerLastName { get; set; }

    [MaxLength(10)]
    [Required(ErrorMessage = "Qualified is Required")]
    public string Qualified { get; set; }

    public string Description { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "ESN is Required")]
    public string ESN { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "Mileage is Required")]
    public string Mileage { get; set; }

    [DataType(DataType.Date)]
    public DateTime? DateInService { get; set; }

    [MaxLength(50)]
    public string ESTR { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "EDS is Required")]
    public string EDS { get; set; }

    [MaxLength(50)]
    public string GensetSerialNumber { get; set; }

    [MaxLength(50)]
    public string GensetModelNumber { get; set; }

    //child Case Notes records
    public virtual ICollection<CaseNotes> CaseNotes { get; set; }

    //child case attachment records
    public virtual ICollection<Attachment> Attachments { get; set; }

    //child case complaint records
    public virtual ICollection<CaseComplaint> CaseComplaint { get; set; }

    //tracking fields
    public DateTime? CreatedOn { get; set; }
    [MaxLength(50)]
    public string CreatedBy { get; set; }
    public DateTime? ModifiedOn { get; set; }
    [MaxLength(50)]
    public string ModifiedBy { get; set; }
} 
```

问题似乎出在 Technicians nav 属性中。Technicians nav 属性中的字段在我的模型状态中显示为键值对。如果它们中的任何一个像在任何时候一样为空，它们就会显示为空键值对并导致模型状态无效。

这是技术员模型：

```
public class Technician
{
    public int TechnicianID { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "First Name is Required")]
    public string FirstName { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "Last Name is Required")]
    public string LastName { get; set; }

    [MaxLength(50)]
    public string PromoID { get; set; }

    public int CustomerID { get; set; } //i dont think we need a nav property at this point 06-17-2012

    public string AdditionalContact { get; set; }
} 
```

我不明白这里发生了什么。为什么这些属性会阻止我的模型状态有效？

这是我打开编辑视图的编辑控制器操作：

```
public ActionResult Edit(int id)
{
    Cases cases = db.Cases.Find(id);
    db.Entry(cases).Reference(x => x.Customer).Load();
    db.Entry(cases).Collection(x => x.CaseComplaint).Load();
    db.Entry(cases).Collection(x => x.CaseNotes).Load();
    db.Entry(cases).Reference(x => x.Technicians).Load();

    GetCaseCategoryLookup(cases.CaseCategoryID);
    GetEngineModelLookup(cases.EngineModelID);
    GetTechnicianLookup(cases.TechnicianID);
    GetQualifiedList(cases.Qualified);
    GetCaseStatusList(cases.CaseStatus);

    return View(cases);
} 
```

这是我的编辑控制器操作，让模型更新数据库。这是模型状态无效的地方。

```
[HttpPost]
public ActionResult Edit(Cases cases)
{
    if (ModelState.IsValid)
    {
        AppHelpers help = new AppHelpers();

        if (cases.CaseStatus == "CLOSED")
        {
            cases.ClosedBy = "USER";
            cases.ClosedDate = help.GetEasternTime();
        }

        cases.ModifiedBy = "USER";
        cases.ModifiedOn = help.GetEasternTime();

        db.Cases.Add(cases);
        db.Entry(cases).State = EntityState.Modified;
        db.SaveChanges();
    }

    GetCaseCategoryLookup(cases.CaseCategoryID);
    GetEngineModelLookup(cases.EngineModelID);
    GetTechnicianLookup(cases.TechnicianID);
    GetQualifiedList(cases.Qualified);
    GetCaseStatusList(cases.CaseStatus);

    return RedirectToAction("Index");
} 
```

瑞安

# java - 使用 JList 通过 JDBC 将表数据保存到数据库

> ID：11414842
> 
> 赞同：0
> 
> 时间：2012-07-10T13:52:02.867
> 
> 标签：java, sql, string, jdbc, truncate

首先，我想指出，当有 1 行信息时这有效，但由于某种原因有很多信息时无效...这就是我的问题...由于代码相当长，我将其分段发布：

```
 int count = jTable1.getRowCount();

 for(int i=0;i<count;i++){
//uusi muodostus//

        SET0listm.add(i, txtTestiNIMI1.getText());
        System.out.println("SET0"+SET0listm); 
```

...

```
 SAVED8listm.addElement(jTable1.getModel().getValueAt(i,7));
        System.out.println("SAVED8"+SAVED8listm);

    } 
```

像这样移动到字符串并删除所有额外的部分：

```
 String SET0listmtostring = SET0listm.toString();
        SET0listmtostring = removeChar(SET0listmtostring, ']');
        SET0listmtostring = removeChar(SET0listmtostring, '[');

String sqla1 = "INSERT INTO MIT(MTY_KOD,MTY_TYY,MTY_ALU,MTY_PAR1,MTY_PAR2,MTY_TOL,MTY_KAN,MTY_DATE) "+"VALUES (?,?,?,?,?,?,?,?)";

 try{
   pst = conn.prepareStatement(sqla1);

   pst.setString(1, SET0listmtostring);
   pst.setString(2, SET2listmtostring);
   pst.setString(3, SET1listmtostring);
   pst.setString(4, SAVEDlistmtostring); 
   pst.setString(5, SAVED3listmmtostring); 
   pst.setString(6, SAVED5listmmtostring); 
   pst.setString(7, SET3listmtostring); 
   pst.setString(8, SET2listmtostring); 
   pst.executeUpdate();}
   catch (Exception e) {
   System.out.println("MITCLAUSE "+e);
        } 
```

最后一部分抓住了

```
MITCLAUSE com.microsoft.sqlserver.jdbc.SQLServerException: String or binary data would be truncated. 
```

Donno 这里有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:08:04.070

鉴于错误，我怀疑您设置的字符串之一比列的声明长度长。在这种情况下，驱动程序必须抛出这样的异常。

因此，请检查字符串的长度并将它们与表中列的声明长度进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:24:52.087

似乎结合绅士的回答并为元素创建一个新循环将产生所需的形式

# javascript - 从字符串数组创建唯一组合数组

> ID：11414843
> 
> 赞同：7
> 
> 时间：2012-07-10T13:52:10.387
> 
> 标签：javascript, algorithm, combinations, combinatorics

我正在写一些东西，它需要一段文本并将其分解为可能的数据库查询，这些查询可用于查找类似的文本块。（类似于我输入时生成的“类似问题”列表）基本过程：

1.  从文本中删除停用词
2.  删除特殊字符
3.  从剩余的文本中创建一系列独特的“词干”
4.  创建一系列可能的茎数组组合（我被卡住了......有点）

这是我到目前为止所拥有的：

```
 //baseList starts with an empty array
    //candList starts with the array of unique stems
    //target is where the arrays of unique combinations are stored

    function createUniqueCombos(baseList,candList,target){

    for(var i=0;i<candList.length;i++){         

        //copy the base List
        var newList = baseList.slice(0);

        //add the candidate list item to the base list copy
        newList.push(candList[i]);

        //add the new array to the target array
        target.push(newList);   

        //re-call function using new array as baseList
        //and remaining candidates as candList
        var nextCandList = candList.slice(i + 1);       
        createUniqueCombos(newList,nextCandList,target);
    }

} 
```

这可行，但在大于 25 个字左右的文本块上，它会使我的浏览器崩溃。我意识到在数学上可能存在大量可能的组合。我想知道的是：

1.  有没有更有效的方法来做到这一点？
2.  如何定义最小/最大组合数组长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:20:41.940

发现了这个以前的问题：[Algorithm to find article with similar text](https://stackoverflow.com/questions/246961/algorithm-to-find-articles-with-similar-text)

其中一个答案提供了一篇文章的链接，该文章建议找出两个字符串中包含多少相邻字符对。[ [http://www.catalysoft.com/articles/StrikeAMatch.html](http://www.catalysoft.com/articles/StrikeAMatch.html) ]

该示例使用 Java，但我确信可以轻松移植到 JS：

```
/** @return an array of adjacent letter pairs contained in the input string */
private static String[] letterPairs(String str) {
   int numPairs = str.length()-1;
   String[] pairs = new String[numPairs];
   for (int i=0; i<numPairs; i++) {
       pairs[i] = str.substring(i,i+2);
   }
   return pairs;
}

/** @return an ArrayList of 2-character Strings. */
private static ArrayList wordLetterPairs(String str) {
   ArrayList allPairs = new ArrayList();
   // Tokenize the string and put the tokens/words into an array
   String[] words = str.split("\\s");
   // For each word
   for (int w=0; w < words.length; w++) {
       // Find the pairs of characters
       String[] pairsInWord = letterPairs(words[w]);
       for (int p=0; p < pairsInWord.length; p++) {
           allPairs.add(pairsInWord[p]);
       }
   }
   return allPairs;
}

/** @return lexical similarity value in the range [0,1] */
public static double compareStrings(String str1, String str2) {
   ArrayList pairs1 = wordLetterPairs(str1.toUpperCase());
   ArrayList pairs2 = wordLetterPairs(str2.toUpperCase());
   int intersection = 0;
   int union = pairs1.size() + pairs2.size();
   for (int i=0; i<pairs1.size(); i++) {
       Object pair1=pairs1.get(i);
       for(int j=0; j<pairs2.size(); j++) {
           Object pair2=pairs2.get(j);
           if (pair1.equals(pair2)) {
               intersection++;
               pairs2.remove(j);
               break;
           }
       }
   }
   return (2.0*intersection)/union;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:59:01.897

我认为你的逻辑从根本上是有缺陷的，因为你创造了多少组合。

我会采取的一种方法是；

1.  将文本拆分为单个单词（我们将调用此变量`split_words`）
2.  删除特殊字符
3.  删除短/常用词（and、or、I、a）；要么通过长度来做到这一点，要么更智能地通过单词黑名单来做到这一点
4.  有一个表（例如`blocks`），它有列`block_id`和`word`
5.  有一个 SQL 查询，例如

    ```
    SELECT block_id FROM blocks 
    WHERE word IN (split_words) GROUP BY block_id 
    ORDER BY COUNT(*) DESC 
    ```

然后你会得到一个列表，`block_ids`其中的排序取决于块有多少共同的单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:34:10.393

[我的二项式系数类](http://tablizingthebinomialcoeff.wordpress.com/)可以轻松解决您的问题。看看我对某个相关问题的[回答中的代码。](https://stackoverflow.com/a/12604728/643828)我不知道将 C# 代码移植到 SQL 存储过程是否是个好主意。将它移植到 java 或 js 并从该代码调用您存储的过程可能会更容易。

# python - Python 包文档 - gdata

> ID：11414853
> 
> 赞同：1
> 
> 时间：2012-07-10T13:52:38.520
> 
> 标签：python, youtube, gdata

我正在编写一个获取 youtube 视频 UR 的代码，获取其 ID，然后显示与其相关的所有信息。我遇到了这种方法：gdata.youtube.YouTubeVideoEntry - 但找不到任何完全描述性的文档（通过谷歌官方 gdata 网站搜索 python - [http://gdata-python-client.googlecode.com/hg/pydocs/gdata .youtube.html#YouTubeVideoEntry](http://gdata-python-client.googlecode.com/hg/pydocs/gdata.youtube.html#YouTubeVideoEntry)）。我发现了一些使用上述对象打印出一些信息的示例，但我正在寻找所有可用的信息。我在寻找正确的对象吗？关于其他可能性的任何想法？

提前致谢...

# php - php和符号链接

> ID：11414860
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:53:05.410
> 
> 标签：php, exec, symlink

我想制作一个要下载的文件的临时副本，所以我使用了符号链接。它适用于我的本地主机，但是当我上传它时它不起作用！我检查了我的“tmp”目录的权限。这是代码：

```
$symlink = GenName($name);
$pwd = exec("pwd");
exec('ln -s "'.$pwd.'/videos/'.$name.'" "'.$pwd.'/tmp/'.$symlink.'"'); 
```

任何想法如何修复它或其他想法来保护原始文件并提供临时文件当然不是副本，没有空间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:06:48.130

用符号链接破坏整个方法！如果要允许临时访问文件，请使用 PHP 脚本。为您的用户提供一个类似 的 URL `example.com/download.php?file=foobar&token=abcdef12345`，它将由如下脚本处理：

```
if (!is_valid($_GET['token']) /* your validation logic here */) {
    die('Invalid token');
}

// your content type here
header('Content-type: application/pdf');
header('Content-Disposition: attachment; filename="downloaded.pdf"');
readfile('original.pdf'); 
```

见[`header`](http://php.net/header)和[`readfile`](http://php.net/readfile)。

# java-me - 在 ListCellRenderer 中，在 LWUIT 中显示列表时多次调用 getListCellRendererComponent() 方法

> ID：11414861
> 
> 赞同：2
> 
> 时间：2012-07-10T13:53:15.283
> 
> 标签：java-me, lwuit

我在 Eclipse 中使用**LWUIT**运行带有**j2me的****S60 。**

 ****我正在使用此[教程链接..](http://lwuit.blogspot.in/2008/07/lwuit-list-renderer-by-chen-fishbein.html)以供参考绘制列表。

但是当我打印列表元素绘图的位置时，它不止一次调用（我认为是 3-4 次）我不明白为什么？

而且列表的响应能力也很差，向下滚动需要很多时间。

正如我看到的一些 LWUIT 列表的视频示例，它们工作得更快、更流畅，因为我的列表不知道为什么？

我的代码从收到的 json 解析和添加值到列表

```
public void setNotificationList(String response) {

    if (!response.equals("") || response != null) {

        try {
            JSONObject jsonObject = new JSONObject(response);
            if (jsonObject != null) {
                if (jsonObject.getInt("total") > 0) {
                    totalNotificationPages = jsonObject
                            .getInt("total_pages");

                    JSONArray notificationJsonArray = jsonObject
                            .getJSONArray("notifications");
                    int lenghtOfList = notificationJsonArray.length();

                    if (!moreNotificationListFalg) {
                        notificationList = new List();
                    } else {
                        notificationVector.removeAllElements();
                    }

                    notificationVector = new Vector(lenghtOfList);

                    for (int i = 0; i < lenghtOfList; i++) {

                        JSONObject notificationJsonObjects = notificationJsonArray
                                .getJSONObject(i);
                        UpdatesUserData notificationData = new UpdatesUserData();

                        notificationData.user_id = JSONHelper
                                .getStringFromJSON(notificationJsonObjects,
                                        "user_id");
                        notificationData._id = JSONHelper
                                .getStringFromJSON(notificationJsonObjects,
                                        "id");
                        notificationData.message = JSONHelper
                                .getStringFromJSON(notificationJsonObjects,
                                        "message");

                        notificationData.date = JSONHelper
                                .getStringFromJSON(notificationJsonObjects,
                                        "created_at");

                        // Helper.stringToDate(JSONHelper.getStringFromJSON(notificationJsonObjects,
                        // "created_at"));
                        // Helper.createDate(JSONHelper.getStringFromJSON(notificationJsonObjects,
                        // "created_at"));

                        notificationData.distance = JSONHelper
                                .getStringFromParentJSON(
                                        notificationJsonObjects, "user",
                                        "distance");

                        if (notificationJsonObjects.has("user")) {
                            JSONObject jsonObjectParent = notificationJsonObjects
                                    .getJSONObject("user");

                            notificationData.user_image = APIHelper
                                    .getPictureUrl(
                                            JSONHelper
                                                    .getStringFromParentJSON(
                                                            jsonObjectParent,
                                                            "profile",
                                                            "avatar_thumb"),
                                            JSONHelper
                                                    .getStringFromParentJSON(
                                                            jsonObjectParent,
                                                            "profile",
                                                            "picture_url"));

                        }
                        System.out.println("User Image "
                                + notificationData.user_image);
                        notificationVector.addElement(notificationData);

                    }// for loop ends

                    System.out.println("Displaying user Notification list");

                    // check if Update List Exists then remove it and Add
                    // this Notification List

                    if (form.contains(updateList)) {
                        form.removeComponent(updateList);
                        System.out.println(" Update List removed...");
                    }
                    if (form.contains(moreUpdates)) {
                        form.removeComponent(moreUpdates);
                        System.out.println(" moreUpdate removed... ");
                    }

                    // ----------------------------------------------------

                    // Getting index of lat element of List before adding
                    // new elements to it
                    int index = notificationList.size();

                    if (notificationVector.size() > 0) {

                        // Adding elements to notification vector
                        for (int i = 0; i < notificationVector.size(); i++) {
                            notificationList.addItem(notificationVector
                                    .elementAt(i));
                        }

                        System.out.println("Adding List ");

                        if (!moreNotificationListFalg) {
                            notificationList
                                    .setRenderer(new UpdatesListCellRenderer(
                                            false));

                            form.addComponent(notificationList);
                        } else {

                            notificationList.setSelectedIndex(index - 1);
                            notificationList.repaint();
                        }

                        // Addgin more... Btn if pages are more than 1
                        if (totalNotificationPages > notificationPageNo)
                            form.addComponent(moreUpdates);

                        // Adding ActionListener to list
                        notificationList
                                .addActionListener(new ActionListener() {

                                    public void actionPerformed(
                                            ActionEvent arg0) {

                                        form.setFocused(notificationTabBtn);

                                    }
                                });
                    }
                    moreNotificationListFalg = false;// setting flag false
                    form.invalidate();
                    form.repaint();

                } else {
                    System.out.println("List has not Elements to print.");
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

    }

} 
```

我的渲染器类

```
public class UpdatesListCellRenderer extends Container implements
        ListCellRenderer {

    private Label message = new Label("");
    private Label distance = new Label("");
    private Label profile_image = new Label("");
    private Label date = new Label("");
    private Label focus = new Label();
    private Font font;
    public Container base_container;
    private Container containerY,containerX;
    private Resources resources;
    private boolean flag = false;
    private Button moreUpdates = new Button();

    public UpdatesListCellRenderer(boolean flag) {

        try {
            setCellRenderer(true);
            this.flag = flag;
            BorderLayout bl = new BorderLayout();
            setLayout(bl);

            base_container = new Container(new BoxLayout(BoxLayout.X_AXIS));

            // cnt1.setWidth(width);

            resources = Resources.open("/font.res");

            font = resources.getFont("font1");

            base_container.getStyle().setBgImage(
                    Image.createImage("/images/contact_list_background.png"));

            profile_image.getStyle().setBgTransparency(0);
            profile_image.setPreferredH(60);
            profile_image.setPreferredW(70);
            profile_image.getStyle().setAlignment(CENTER);
            base_container.addComponent(profile_image);

            containerY = new Container(new BoxLayout(BoxLayout.Y_AXIS));

            // name.getStyle().setBgTransparency(0);
            // name.getStyle().setFont(font);

            message.getStyle().setBgTransparency(0);
            message.getStyle().setFont(font);

            containerX = new Container(new BoxLayout(BoxLayout.X_AXIS));
            containerX.getStyle().setAlignment(BOTTOM);
            containerX.getStyle().setMargin(25, 0, 0, 0);

            distance.setAlignment(LEFT);
            distance.setPreferredH(20);
            distance.setPreferredW(85);
            distance.getStyle().setBgImage(
                    Image.createImage("/images/long_right_arrow.png"));
            distance.getStyle().setBgTransparency(0);
            distance.getStyle().setFont(font);

            date.setAlignment(RIGHT);
            date.getStyle().setBgTransparency(0);
            date.getStyle().setFont(font);
            date.getStyle().setMargin(0, 0, 100, 1);

            //moreUpdates.setVisible(false);

            // containerY.addComponent(name);
            containerY.addComponent(message);
            containerX.addComponent(distance);
            containerX.addComponent(date);

            containerY.addComponent(containerX);

            base_container.addComponent(containerY);
            addComponent(BorderLayout.CENTER, base_container);

            //addComponent(BorderLayout.SOUTH, moreUpdates);

            focus.getStyle().setBgTransparency(100);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public Component getListCellRendererComponent(List list, Object value,
            int position, boolean isSelected) {
        UpdatesUserData notificationData = (UpdatesUserData) value;

        try {

            //System.out.println(" List get ListComponent Popstion " + position + "  List size  " + list.size());

            //if (!notificationData.message.equals(""))
                message.setText("" + notificationData.message);
//          else
//              message.setText("");

            //if (!notificationData.distance.equals(""))
                distance.setText("" + notificationData.distance);
//          else
//              distance.setText("" + notificationData.distance);

            date.setAlignment(RIGHT);
            //if (!notificationData.date.equals(""))
                date.setText("" + notificationData.date.substring(0, 10));
//          else
//              date.setText("");
            date.setAlignment(RIGHT);

            profile_image.setIcon(Helper.loadImage(notificationData.user_image));

//          if( position == list.size()-1){
//              //base_container.addComponent(moreUpdates);
//              //addComponent(BorderLayout.SOUTH, moreUpdates);
//              moreUpdates.setVisible(true);
//          }

        } catch (IOException e) {
            e.printStackTrace();
        }

        if (isSelected) {
            list.setFocus(true);
            list.getStyle().setBgTransparency(100);
        } else {
            list.setFocus(false);
            list.getStyle().setBgTransparency(0);
        }

        return this;
    }

    public Component getListFocusComponent(List list) {

        return focus;
    }

} 
```

请帮我 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:38:03.987

阅读 Chen 在 Codename One 博客上的帖子[http://codenameone.blogspot.com/2008/07/lwuit-list-renderer-by-chen-fishbein.html](http://codenameone.blogspot.com/2008/07/lwuit-list-renderer-by-chen-fishbein.html)

通常，每个可见项目都会调用一次单元格渲染器，当它移动时，它会被调用更多次，因为在后台运行焦点移动的动画。S60 处理半透明图像真的很慢，如果你有 9 片边框，请确保它们不包含太小的图像。

将性能与 LWUIT 演示进行比较并查看差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:01:38.803

我认为这段代码中的问题：`profile_image.setIcon(Helper.loadImage(notificationData.user_image));`. 尝试在没有此代码的情况下使用您的渲染或将其替换为存根图像，让我们看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:13:19.403

好的，我想它打印了这么多次来刷新状态`List`

您是否使用`ListModel`附加到`List`? 这一事实对于列表的效率很重要。您如何映射列表的元素？你可以在你的问题中粘贴一些代码吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T07:24:57.097

正如我认为 list 被调用它包含的每个元素来绘制它。我的问题与我实际上从 getListCellRendererComponent() 中的 url 加载图像相同，错误的是我之前实际加载它（在解析 json 时）并存储然后将其作为图像传递给列表。那件事大大提高了我的列表列表性能。

顺便说一句，谢谢大家的帮助。。****

# cmd - Windows CMD 批处理文件以管理员身份运行命令

> ID：11414863
> 
> 赞同：3
> 
> 时间：2012-07-10T13:53:20.013
> 
> 标签：cmd, administrator, runas, appcmd

我有一个批处理文件，我想在其中运行一些命令，但不是所有命令都以管理员身份运行。我不想以管理员身份运行命令提示符或以管理员身份运行整个批处理作业。我想以管理员身份运行的命令示例如下：

`appcmd.exe recycle apppool \apppool.name -DefaultApp`

Appcmd是管理IIS 7的命令，这个例子我想回收一个App Pool。
我试过了：

`runas /profile /user:MYPC\administrator "appcmd.exe recycle apppool \apppool.name -DefaultApp"`

我得到一个`1326: Logon failure: unknown user or bad password`，但我知道用户和密码存在。关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:14:00.847

我发现在`runas`没有`/profile`参数的情况下运行效果很好。但是如果你必须运行它，`/profile`那么你可以在之前执行这个命令：

```
runas /profile /user:MYPC\administrator "cmd" 
```

不幸的是，这会提示您两次。

# sql - 为什么 Oracle 从小数秒中去除前导 0？

> ID：11414866
> 
> 赞同：4
> 
> 时间：2012-07-10T13:53:23.970
> 
> 标签：sql, oracle, timestamp

我正在验证一些批量输入（即纯文本）；验证的第一阶段是确保我必须订购的列实际上是正确的`timestamp`格式，然后再尝试将其放入我的时间戳中。在这种情况下`'yyyy/mm/dd hh24:mi:ss:ff2'`。

但是，Oracle 似乎从时间戳格式的小数秒精度中删除了前导 0。例如`009`，假设精度为 2（或更小）`0099`，但不是`0090`。前两个例子显然是不正确的。就日期时间格式模型而言，似乎小数秒精度就是精度，不包括前导 0。

无论精度如何，这种行为似乎都会发生。

### 这个例子是正确的：

```
select to_timestamp('2012/06/20 05:12:41:91','yyyy/mm/dd hh24:mi:ss:ff2') t
  from dual;

T
---------------------------------------------------------------------------
20-JUN-12 05.12.41.910000000 
```

### 这些例子是不正确的：

我预计会出现错误，但可以处理它被截断。

```
select to_timestamp('2012/06/20 05:12:41:091','yyyy/mm/dd hh24:mi:ss:ff2') t
  from dual;

 T
---------------------------------------------------------------------------
20-JUN-12 05.12.41.091000000

select to_timestamp('2012/06/20 05:12:41:0091','yyyy/mm/dd hh24:mi:ss:ff2') t
  from dual;

T
---------------------------------------------------------------------------
20-JUN-12 05.12.41.009100000

select to_timestamp('2012/06/20 05:12:41:00091','yyyy/mm/dd hh24:mi:ss:ff2') t
  from dual;

T
---------------------------------------------------------------------------
20-JUN-12 05.12.41.000910000 
```

### 这个错误是正确的；它的小数秒精度为 3。

```
select to_timestamp('2012/06/20 05:12:41:901','yyyy/mm/dd hh24:mi:ss:ff2') t
  from dual;
select to_timestamp('2012/06/20 05:12:41:901','yyyy/mm/dd hh24:mi:ss:ff2') t
                    *
ERROR at line 1:
ORA-01880: the fractional seconds must be between 0 and 999999999 
```

我使用的是 11.2.0.1.0 版本，但这种行为也出现在 11.1.0.6.0 和 9.2.0.1.0 中，所以它显然已经存在了一段时间。

这是我以前不知道的“功能”吗？

解决方案似乎假设所有时间戳的精度为 6 位，但是否有另一个可以真正验证我提供的数据是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:46:16.030

我敢肯定你已经有计划了，但我想我会有一场戏。`to_char`似乎被截断为两位数`.ff2`- 我失去了逻辑 - 所以如果你很高兴提供的值被截断，你可以通过它反弹它（以一种丑陋的，不应该是必要的方式):

```
select to_timestamp(
        to_char(
            to_timestamp('2012/06/20 05:12:41:091',
                'yyyy/mm/dd hh24:mi:ss:ff9'),
            'yyyy/mm/dd hh24:mi:ss:ff2'),
        'yyyy/mm/dd hh24:mi:ss:ff2') t
from dual;

T
---------------------------------------------------------------------------
20-JUN-12 05.12.41.090000000 
```

或者你当然可以把它放在一个函数中：

```
create or replace function my_to_timestamp(p_str varchar2)
return timestamp is
begin
    return to_timestamp(
            to_char(
                to_timestamp(p_str, 'yyyy/mm/dd hh24:mi:ss:ff9'),
                'yyyy/mm/dd hh24:mi:ss:ff2'),
            'yyyy/mm/dd hh24:mi:ss:ff2');
end;
/

select my_to_timestamp('2012/06/20 05:12:41:91') from dual;

MY_TO_TIMESTAMP('2012/06/2005:12:41:91')
---------------------------------------------------------------------------
20-JUN-12 05.12.41.910000000

select my_to_timestamp('2012/06/20 05:12:41:091') from dual;

MY_TO_TIMESTAMP('2012/06/2005:12:41:091')
---------------------------------------------------------------------------
20-JUN-12 05.12.41.090000000

select my_to_timestamp('2012/06/20 05:12:41:901') from dual;

MY_TO_TIMESTAMP('2012/06/2005:12:41:901')
---------------------------------------------------------------------------
20-JUN-12 05.12.41.900000000 
```

或者您可以使用相同的机制使其出错：

```
create or replace function my_to_timestamp(p_str varchar2)
return timestamp is
    ts timestamp;
begin
    ts := to_timestamp(p_str, 'yyyy/mm/dd hh24:mi:ss:ff9');
    if ts != to_timestamp(
                to_char(
                    to_timestamp(p_str, 'yyyy/mm/dd hh24:mi:ss:ff9'),
                    'yyyy/mm/dd hh24:mi:ss:ff2'),
                'yyyy/mm/dd hh24:mi:ss:ff2')
    then
        raise program_error;
    end if;
    return ts;
end;
/

select my_to_timestamp('2012/06/20 05:12:41:91') from dual;

MY_TO_TIMESTAMP('2012/06/2005:12:41:91')
---------------------------------------------------------------------------
20-JUN-12 05.12.41.910000000

select my_to_timestamp('2012/06/20 05:12:41:091') from dual;

select my_to_timestamp('2012/06/20 05:12:41:091') from dual
       *
ERROR at line 1:
ORA-06501: PL/SQL: program error
ORA-06512: at "SCOTT.MY_TO_TIMESTAMP", line 12

select my_to_timestamp('2012/06/20 05:12:41:901') from dual;

select my_to_timestamp('2012/06/20 05:12:41:901') from dual
       *
ERROR at line 1:
ORA-06501: PL/SQL: program error
ORA-06512: at "SCOTT.MY_TO_TIMESTAMP", line 12 
```

您可以添加异常和编译指示以使其抛出 ORA-01880，但我不确定该消息是否完全有用。

# r - R在for循环中求和

> ID：11414871
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:53:35.190
> 
> 标签：r, loops, sum

我会试着这样说：

我在做一笔：

```
tot <- fac$a[,1]+fac$b[,1] 
```

其中 a 和 b 是因子，1 是第一列。直到这里都很好。

现在我想使用 for 循环来对所有列进行求和：

```
tot <- 0 
for (i in 5:13) {
tot[,i] <- fac$a[,i]+fac$b[,i] 
} 
```

这是行不通的。

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:40:46.810

我只能猜到你的问题。（您忘记了错误消息。）恕我直言，它不起作用，因为它属于*数字*`tot`类且没有*矩阵*（并且没有列，也没有任何可以通过 index 访问的行）。**`i`**

 **要修复您的代码：`tot <- matrix(ncol=ncol(fac$a), nrow=nrow(fac$b))`

顺便说一句，您不应该使用*for 循环*进行这种计算。改用矢量化：

```
a <- matrix(10, ncol=13, nrow=10)
b <- matrix(20, ncol=13, nrow=10)

tot <- a[, 5:13] + b[, 5:13] 
```**

# jquery - 固定布局滚动水平像谷歌加

> ID：11414874
> 
> 赞同：0
> 
> 时间：2012-07-10T13:53:40.930
> 
> 标签：jquery, html, css, layout, google-plus

我想创建一个类似于 Google Plus 的布局。

现在我有一个关于固定元素的问题。如果向下滚动，则只有白色内容区域会滚动。菜单、顶部区域和侧边栏保持固定。那不是问题。

但是，一旦您更改浏览器窗口的宽度并使其非常薄，您无论如何都可以水平滚动以查看“溢出”。

现在，我怎么能用 CSS 来实现它，也许也可以用 jQuery 来实现呢？固定元素从不滚动。在 Google Plus 上，如果窗口不够宽，他们会这样做。

我的页面是[givget.de](http://givget.de)！所以请让我知道，如果有任何可能这样做！

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:00:08.617

只是为了让你开始，你想做一些类似的事情

```
var minWidth = 1000;
....

$(window).resize(function(e){
    if($(window).width() < minWidth){
       $('.fixedSidebar').css('position','relative'); // etc
    }
}); 
```

# android - 如何在android中解析本地XML文件？

> ID：11414877
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:53:49.467
> 
> 标签：android, xml, parsing, sax

我正在开发一个 android 项目，但我无法解析本地文件 (raw/file.xml)。我尝试了一些我在互联网上找到的建议，但徒劳无功。当我尝试在网络中解析文件（使用 URL 类...）时它可以工作，但是当我尝试使用本地文件程序时它不起作用！！！请我需要帮助。（我使用 Sax 作为 XML 解析器）

我将行 URL 替换`sourceUrl = new URL ("example.com/w...";);`为`InputSource is = new InputSource(getResources().openRawResource(R.raw.example));`

`xr.parse(new InputSource(sourceUrl.openStream()));`和线`xr.parse(new InputSource(is.getByteStream()));`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:32:10.133

```
 You can put the xml file path here and keep parsing the inner nodes usiln self running loop. Save the values in arrays accordingly for each node..

    NodeList eNodeList = null;
eNodeList = Utils.getXMLFromFilePath(your.xml", "firstNOdeNAme", eNodeList);
getElementsByNodelist(eNodeList)

    private static getElementsByNodelist(Nodelist nodelist)
{
    if(nodelist!=null)
    {
        for(int i = 0;i<nodelist.getLength();i++)
        {
            Element element = (Element) nodelist.item(i);
            String id=getTextValue(element, "id");
            //For attribute value
            element.getAttribute("attributename");
            // if u want to parse tjis element again 
            NodeList l=element.getElementsByTagName("innerTag");
            // self loop
            getElementsByNodelist(l);
        }
    }

}

public static String getTextValue(Element ele, String tagName) {
    String textVal = "";
    NodeList nl = ele.getElementsByTagName(tagName);
    if(nl != null && nl.getLength() > 0) {
        Element el = (Element)nl.item(0);
        if(el.getFirstChild()!=null)    
        {
            textVal = el.getFirstChild().getNodeValue();
        }
    }
    return textVal;
} 
```

# c++ - C ++：奇怪的行为：return 语句的返回值更改

> ID：11414880
> 
> 赞同：10
> 
> 时间：2012-07-10T13:53:58.593
> 
> 标签：c++, memory-management, return, undefined-behavior

我的应用程序面临一个*非常*奇怪的行为。

我将描述我的情况，然后解释出了什么问题。

## 情况

我有一个带有这样签名的方法：

```
const StructureDef *getStructure(const std::string &theme, int index); 
```

我在这段代码中称之为：

```
const StructureDef *sDef = 0;
do 
{
    sDef = ss->getStructure(theme, rand() % ss->availableStructureCount());
} while (!sDef); 
```

我正在使用这种 do-while 结构，因为该`getStructure`方法的返回值可能是`NULL`，具体取决于 和 的`theme`组合`index`。所以基本上，它所做的是询问随机结构，直到我们得到一个有效的结构。（如果您想了解详细信息，请查看屏幕截图。）

`std::vector<StructureDef>`该方法使用 it's对 a 进行迭代`::iterator`。对于每个 StructureDef，它会检查结构是否属于该主题。如果是这样，则增加计数器并检查它是否等于请求的索引。像这样：

```
// inside the loop
if (i++ == index) 
```

如果此操作成功，`StructureDef *`则返回当前：

```
return sDef; 
```

## 出了什么问题

我正在使用 XCode 4.4 它的调试器来一步一步地查看发生了什么，这基本上是 gdb。

我首先解释的方法，找到一个`StructureDef *`符合我需要的方法。所以它返回那个指针。这是它在调试器中返回之前的截图：

![调试器中的返回点](../Images/a8856887743baeb2addc6c12edac9c6c.png)

^(（for循环后的行很简单`return 0;`)）

这里的指针`sDef *`指向`0x1d563270`，这是 的正确实例所在的`StructureDef`位置。

下一个屏幕截图是我们在我调用该方法的代码段中得到的：

![来电者地址错误](../Images/775c82e307db3ad9f2c192dce29942f7.png)

如您所见，`sDef *`获得方法返回值的指针现在指向`0x2fe03804`。这根本不是方法返回的内容！我在想这是指向堆栈上某处的指针，而不是堆。（它应该是堆，因为 std::vector 类将其对象存储在堆上，对吧？）。

我还不能使用 Valgrind，因为我在 Mac OS X 10.8 上，Valgrind 不支持它。

我对这种行为感到非常惊讶。我不明白为什么会这样……可能是我的编译器坏了，还是在做一些奇怪的*“优化”*？

提前致谢！
马汀

* * *

澄清 DeadMG 的评论：

我正在使用不同的主题：

```
iron
wood
ice 
```

ETC...

我的标识符如下所示：

```
iron__downside_touch_and_go
iron__platform__700_65
iron__wall_bang
wood__platform__600_40 
```

等等...我想做的是在一个主题中选择具有特定索引的结构。所以不是索引所有主题的结构集合在一起，而是一个主题子集的索引。再看看这段代码:)

* * *

# 更新！！！

我提供了错误的信息。向量的类型是`std::vector<StructureDef>`!! 它存储对象。不是指针！

那么（我认为）我在`.operator->()`通话中所做的与以下内容相同：`&(*it)`. 看起来它正在工作。对我来说，在彼此之后写 & 和 * 看起来有点愚蠢。

* * *

@本·沃伊特：

建筑学： ![在此处输入图像描述](../Images/7b19d23a508ac2dee3ef9d4539b0e9d9.png)

优化： ![在此处输入图像描述](../Images/5c0a51a94d47059d2e9e9f7e7cbabdc8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:59:54.977

看起来我使用的调试器（LLDB 而不是我首先使用的 GDB）没有正确显示内存值。切换到 GDB 后，调试器显示了我没有看到的内存地址。当我添加这样的打印语句时：

```
printf("StructureDef* pointer = %llx\n", (unsigned long long int)(void*) sDef); 
```

看起来 GDB 是对的。出于测试目的，我切换回 LLDB，神奇的是它也能正常工作。

也许，我正在处理这个人写的内容：[https ://stackoverflow.com/a/9709462/155137](https://stackoverflow.com/a/9709462/155137)

我希望这是 LLDB 调试器中的错误。因为，否则，我认为我的安装确实有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:07:57.490

将向量从 更改`std::vector<StructureDef>`为`std::vector<StructureDef*>`。当您使用指向 的组成指针填充向量时`StructureDef`，为堆上的每个指针动态分配内存。

# joomla - 如何将两个菜单项分配给单个文章？

> ID：11414881
> 
> 赞同：2
> 
> 时间：2012-07-10T13:53:59.580
> 
> 标签：joomla, joomla2.5

我创建了 2 个菜单：

1.  顶部菜单
2.  侧边菜单

我怎样才能完成以下两项任务：-

1.  将“Top menu”的所有菜单项直接分配给“side menu”。
2.  创建与顶部菜单项同名的侧边菜单项。

问题是我想将文章与具有相同 url 的菜单项链接起来，但它不允许我这样做。它给出了错误：-

```
"Save failed with the following error: Another menu item with the same parent has this alias" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:47:27.113

如果我正确理解你的术语，

1.  确保您的顶部菜单包含您想要在侧菜单上“克隆”的所有项目
2.  通过将新项目添加到侧边菜单来开始“克隆”顶部菜单项目。实际的 joomla 术语是“别名”
3.  在您的侧边菜单上，添加一个新项目 - “菜单项类型”必须是*Menu Item Alias*。从“**选择菜单项类型**”弹出窗口中，它位于最底部的右侧。
4.  选择后，您将返回到菜单项编辑器，并在右侧有一个下拉菜单，其中包含供您选择的顶级菜单项。
5.  选择您要“克隆”的那个，并进行您希望可用的任何其他更改
6.  保存新的侧边菜单项。

Tada - 您有一个显示在侧边菜单上的现有顶部菜单项的别名。单击侧边菜单*别名*项与单击顶部菜单项完全相同（它将具有相同的 joomla url），尽管您可以在菜单项编辑器允许的情况下更改其他设置/样式。

# .net - 是否有绕过 EDMX 并进入数据库生成 EF4.1 dbContext 类的 T4 模板？

> ID：11414885
> 
> 赞同：0
> 
> 时间：2012-07-10T13:54:19.463
> 
> 标签：.net, entity-framework-4.1, t4, edmx

我非常希望摆脱我们目前在项目中遇到的可怕的 EDMX blob。我们的项目首先是数据库，目前我们使用糟糕且有问题的 EDM 设计器创建 EDMX 文件，从那里我们使用 T4 模板生成 DbContext 和 POCO 实体。

随着项目的成熟，我们发现我们的数据库模型和实体模型之间几乎没有区别，本质上是 1 对 1 的实体到表的映射，这似乎是 EF 最喜欢的模式。我们唯一的偏差是在我们的四个实体之间单独使用 Table-per-Type 继承。这本身并没有被证明是一个好的设计，很可能被忽视。

那么我的问题是 - 我们不需要 EDMX 文件，我们应该能够直接从数据库模型驱动创建 DbContext 和实体类，是否有 T4 模板可以做到这一点？

我从几年前的 Oleg Sych 那里找到[了这篇文章，它提供了 T4 模板来实现这一点，但输出是针对 ObjectContext 而不是 DbContext。](http://www.olegsych.com/2009/12/simplifying-entity-framework-data-driven-design/#comment-3529)我当然可以寻求改进这里已经完成的工作，但如果有人已经完成了这项工作，我不想重新发明轮子。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:00:10.093

我使用[Entity Framework Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)扩展从数据库生成 POCO 模型、映射类和 dbContext。

![](../Images/bb586c7e1e2aa78f43cbac9c443db8a2.png)

# ruby-on-rails - 如何让块的内容出现在视图中？

> ID：11414887
> 
> 赞同：1
> 
> 时间：2012-07-10T13:54:25.967
> 
> 标签：ruby-on-rails, ruby, erb

我有一些这样的代码：

```
<% cache "footer_links" do %>
  <%= cms_snippet_content('footer_links') %>
<% end %> 
```

我想写一个辅助方法，像这样：

```
def cached_snippet_content(snip_id)
  cache(snip_id) do
    cms_snippet_content(snip_id)
  end
end 
```

但是，在我看来，我没有得到任何输出，即使我的 erb 代码如下所示：

```
<%= cached_snippet_content "footer_links" %> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:39:19.463

卢克，愿源与你同在：

```
# actionpack-3.2.0/lib/action_view/helpers/cache_helper.rb
def cache(name = {}, options = nil, &block)
  if controller.perform_caching
    safe_concat(fragment_for(name, options, &block))
  else
    yield
  end

  nil
end 
```

这表明它`cache`被实现为从 ERB 视图调用，而不是从助手调用。另一种实现：

```
def cache(name = {}, options = nil, &block)
  if controller.perform_caching
    fragment_for(name, options, &block)
  else
    capture(&block)
  end
end 
```

现在将它与新的 Rails ERB 样式一起使用（<%= ... > 即使在块中，如果它们输出一些东西）：

```
<%= cache "key" do %>
  <%= content_tag(:p, "hello") %>
<% end %> 
```

我会仔细测试一下，可能有隐藏的角落，我想`cache`没有适应Rails 3块样式的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:01:36.323

看起来`do`您的辅助方法中的块没有返回任何内容，因此整个辅助方法没有返回任何内容，因此视图不再显示任何内容。

也许试试这个：

```
def cached_snippet_content(snip_id)
  cache(snip_id) do
    result = cms_snippet_content(snip_id)
  end
  result
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:38:37.373

试试这个：

```
def cached_snippet_content(snip_id)
  a = ""
  cache(snip_id) do
    a += cms_snippet_content(snip_id).to_s
  end
  a
end 
```

# python - 从异常对象中提取回溯信息

> ID：11414894
> 
> 赞同：143
> 
> 时间：2012-07-10T13:54:59.980
> 
> 标签：python, debugging, exception-handling

给定一个异常对象（来源不明）有没有办法获得它的回溯？我有这样的代码：

```
def stuff():
   try:
       .....
       return useful
   except Exception as e:
       return e

result = stuff()
if isinstance(result, Exception):
    result.traceback <-- How? 
```

拥有 Exception 对象后，如何从它中提取回溯？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-07-10T14:08:57.633

这个问题的答案取决于您使用的 Python 版本。

### 在 Python 3 中

很简单：异常带有一个`__traceback__`包含回溯的属性。该属性也是可写的，可以使用`with_traceback`异常的方法方便地设置：

```
raise Exception("foo occurred").with_traceback(tracebackobj) 
```

这些功能作为[`raise`](https://docs.python.org/3/reference/simple_stmts.html?highlight=__cause__#the-raise-statement)文档的一部分进行了最低限度的描述。

这部分答案的所有功劳都应归功于[首先发布此信息](https://stackoverflow.com/a/14564261/577088)的维克多。我将它包括在这里只是因为这个答案停留在顶部，并且 Python 3 变得越来越普遍。

### 在 Python 2 中

这是令人讨厌的复杂。回溯的问题在于它们具有对堆栈框架的引用，而堆栈框架具有对具有对[具有对...](https://www.python.org/dev/peps/pep-0344/#open-issue-garbage-collection)的引用的堆栈框架的引用的回溯的引用。你明白了。这会导致垃圾收集器出现问题。（感谢[ecatmur](https://stackoverflow.com/a/11417308/577088)首先指出这一点。）

解决这个问题的好方法是在离开子句后通过手术[打破循环](https://www.python.org/dev/peps/pep-3110/#semantic-changes)`except`，这就是 Python 3 所做的。Python 2 的解决方案要丑得多：为您提供了一个临时函数 ，[`sys.exc_info()`](http://docs.python.org/library/sys.html#sys.exc_info)它只*在* `except` *子句*中起作用。它返回一个元组，其中包含异常、异常类型和当前正在处理的任何异常的回溯。

因此，如果您在`except`子句中，您可以使用模块的输出`sys.exc_info()`来做[`traceback`](http://docs.python.org/library/traceback.html)各种有用的事情：

```
>>> import sys, traceback
>>> def raise_exception():
...     try:
...         raise Exception
...     except Exception:
...         ex_type, ex, tb = sys.exc_info()
...         traceback.print_tb(tb)
...     finally:
...         del tb
... 
>>> raise_exception()
  File "<stdin>", line 3, in raise_exception 
```

但是正如您的编辑所表明的那样，如果您的异常没有得到处理，您正在尝试获取已经打印的回溯*，在它**已经*被处理之后。这是一个更难的问题。不幸的是，当没有处理异常时`sys.exc_info`返回。`(None, None, None)`其他相关`sys`属性也无济于事。`sys.exc_traceback`当没有处理异常时被弃用和未定义；`sys.last_traceback`看起来很完美，但它似乎只能在交互式会话中定义。

如果您可以控制引发异常的方式，则可以使用[`inspect`](http://docs.python.org/library/inspect.html)自[定义异常](http://docs.python.org/tutorial/errors.html#user-defined-exceptions)来存储一些信息。但我不完全确定这将如何工作。

说实话，捕获并返回异常是一件不寻常的事情。这可能表明您无论如何都需要重构。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2013-01-28T14:31:59.560

从[Python 3.0 ^([PEP 3109])](http://www.python.org/dev/peps/pep-3109/)开始，内置类[`Exception`](http://docs.python.org/3.2/tutorial/errors.html#exceptions)有一个`__traceback__`属性，其中包含一个`traceback object`（使用 Python 3.2.3）：

```
>>> try:
...     raise Exception()
... except Exception as e:
...     tb = e.__traceback__
...
>>> tb
<traceback object at 0x00000000022A9208> 
```

问题是，在[谷歌搜索`__traceback__`](https://www.google.com/search?hl=en&e=UTF-8&q=python%20exception%20__traceback__)了一段时间后，我只找到了几篇文章，但没有一篇文章描述了您是否应该（或为什么）应该（不）使用`__traceback__`.

但是，[Python 3 文档`raise`](http://docs.python.org/3/reference/simple_stmts.html?highlight=__cause__#the-raise-statement)说：

> 回溯对象通常在引发异常时自动创建并作为`__traceback__`可写属性附加到它。

所以我认为它应该被使用。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2018-03-15T00:19:19.600

一种从 Python 3 中的异常对象中以字符串形式获取回溯的方法：

```
import traceback

# `e` is an exception object that you get from somewhere
traceback_str = ''.join(traceback.format_tb(e.__traceback__)) 
```

`traceback.format_tb(...)`返回一个字符串列表。`''.join(...)`将它们连接在一起。如需更多参考，请访问：[https ://docs.python.org/3/library/traceback.html#traceback.format_tb](https://docs.python.org/3/library/traceback.html#traceback.format_tb)

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2019-01-07T23:46:18.450

顺便说一句，如果你想真正获得完整的回溯，就像你看到它打印到你的终端一样，你想要这个：

```
>>> try:
...     print(1/0)
... except Exception as e:
...     exc = e
...
>>> exc
ZeroDivisionError('division by zero')
>>> tb_str = traceback.format_exception(etype=type(exc), value=exc, tb=exc.__traceback__)
>>> tb_str
['Traceback (most recent call last):\n', '  File "<stdin>", line 2, in <module>\n', 'ZeroDivisionError: division by zero\n']
>>> print("".join(tb_str))
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
ZeroDivisionError: division by zero 
```

如果您使用`format_tb`上述答案建议您将获得更少的信息：

```
>>> tb_str = "".join(traceback.format_tb(exc.__traceback__))
>>> print("".join(tb_str))
  File "<stdin>", line 2, in <module> 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-07-10T16:00:44.430

回溯没有存储在异常中是有充分理由的；因为回溯保存对其堆栈局部变量的引用，这将导致循环引用和（临时）内存泄漏，直到循环 GC 启动。（这就是为什么您[永远不应该将回溯存储在局部变量](http://docs.python.org/dev/library/sys.html#sys.exc_info)中。）

关于我能想到的唯一一件事就是让你使用 monkeypatch`stuff`的全局变量，这样当它认为它正在捕获时，`Exception`它实际上是在捕获一个专门的类型，并且异常作为调用者传播给你：

```
module_containing_stuff.Exception = type("BogusException", (Exception,), {})
try:
    stuff()
except Exception:
    import sys
    print sys.exc_info() 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2021-05-07T21:30:10.447

你可以使用[`traceback.format_exc`](https://docs.python.org/3.9/library/traceback.html#traceback.format_exc)which 返回一个`str`

或[`traceback.print_exc`](https://docs.python.org/3.9/library/traceback.html#traceback.print_exc)打印到标准输出

```
import traceback

try:
    b"x81".decode()
except UnicodeError:
    traceback.print_exc() # prints to stdout
    my_traceback = traceback.format_exc() # returns a str
print(my_traceback) 
```

如果您*需要*从实际异常中获取它（尽管我不明白为什么）

[`traceback.format_exception`](https://docs.python.org/3.9/library/traceback.html#traceback.format_exception)返回一个`str`

[`traceback.print_exception`](https://docs.python.org/3.9/library/traceback.html#traceback.print_exception)打印到标准输出

```
import traceback

try:
    b"x81".decode()
except UnicodeError as exc:
    # etype is inferred from `value` since python3.5 so no need to pass a value...
    # format_exception returns a list
    my_traceback = "".join(traceback.format_exception(etype=None, value=exc, tb=exc.__traceback__))
    traceback.print_exception(etype=None, value=exc, tb=exc.__traceback__) 
```

## 警告

> 不要存储对`__traceback__`（或`exc`）的引用以供以后使用，因为回溯对象包含对所有堆栈帧对象的引用，这些堆栈帧对象构成调用堆栈，并且每个堆栈帧都包含对其所有局部变量的引用。因此，可从回溯对象到达的对象的传递闭包的大小可能非常大。如果您维护该引用，这些对象将不会被垃圾回收。更喜欢将回溯呈现为另一种形式，以便在内存中进行短期存储。”

*Robert Smallshire - Python 超越基础 - 11 - 异常和错误 - Traceback 对象*

# c# - 需要 Cookie 和购物车说明

> ID：11414895
> 
> 赞同：2
> 
> 时间：2012-07-10T13:55:01.200
> 
> 标签：c#, web-services, http, https, web

> 今天的购物篮应用程序通常将购物篮内容列表存储在服务器端的数据库中，而不是将购物篮项目存储在 cookie 本身中。Web 服务器通常会发送一个包含唯一会话标识符的 cookie。Web 浏览器将与每个后续请求一起发回该会话标识符，并且购物篮项目与唯一的会话标识符相关联。

你能给我一个简单的例子和​​解释我从维基上引用的上述引述吗？我有时会很困惑，因为我不擅长英语，而且我对网络事物的了解不多，所以我会很困惑地阅读维基上的单词。

今天我有一个小谈话，（我的坏事是不知道这件事），两台具有内部 IP 地址（例如 192.168.1.10 和 192.168.1.11）和相同浏览器的计算机将与经过身份验证的 Web 服务器区分开来通过他们的会话 ID，因为外部访问的网络服务器只能将其中两个识别为从其 ISP 分配的一个 IP 地址。这是正确的吗 ？我推断有些网站可以通过其内部 IP 来区分两者。

我认为cookies可以用来存储程序员想要的任何东西。这是正确的吗 ？

如果你能给我一张简单的图片来告诉我关于这个的全部基本内容。我会喜欢它并且更加感激。

[**更新**]

苏！愚蠢的我 (:mad:) 这家伙还声称没有使用 cookie 来存储用户名，但这是不正确的，因为

> 个性化
> 
> Cookies 可用于记住访问过网站的用户的信息，以便将来显示相关内容。例如，网络服务器可能会发送一个包含上次用于登录网站的用户名的 cookie，以便将来访问时填写该用户名。

顺便说一句，他是我国的另一个中心（tonguey centraler！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:22:07.837

就购物车解决方案而言，管理产品确实没有正确或错误的方法。它归结为“你”想要对数据做什么。但是，cookie 是域和浏览器专有的 - 您无法访问从不同域或不同浏览器设置的 cookie。

*   您想让用户回到您的商店并访问他们的购物车吗？然后将其保存在后端。
*   您想在会话中使购物车内容过期吗？- 然后将其与会话数据或设置过期的[cookie一起保存。](http://msdn.microsoft.com/en-us/library/System.Net.Cookie.aspx)（[ASP.NET 会话状态概述](http://msdn.microsoft.com/en-us/library/ms178581.aspx)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:15:57.403

服务器在分配会话 ID 时不考虑外部或内部 IP 地址。即使您在同一台计算机上有两个浏览器，它们都会显示给服务器，服务器会说“你的唯一 ID 是什么”，每个浏览器都会说“我没有”。它将“1”分配给第一个，将“2”分配给第二个，并且由于这些唯一 ID 存储在 cookie 中，它从不考虑每台计算机来自哪个 IP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:18:29.897

> 我推断有些网站可以通过其内部 IP 来区分两者。

Web 服务器只能看到外部 IP 地址，对于家庭路由器后面的两台计算机，这通常是相同的（请参阅[http://en.wikipedia.org/wiki/NAT](http://en.wikipedia.org/wiki/NAT)）。但是网络服务器也可以看到连接的端口号，这对于每台计算机都是不同的；这*可以*用来区分 NAT 路由器后面的计算机，但是我认为很多网站都没有使用它。

* * *

网站主要使用 cookie 进行身份验证。登录后，cookie 将存储跟踪当前登录会话的会话 ID。大多数其他数据（例如购物车中的商品）都存储在服务器上，原因有两个：

*   持久性：您不想丢失所有保存的数据（购物车），因为您已注销/删除了 cookie。
*   大小限制：Cookie 的大小有限，无法存储所有内容。

* * *

最后，即使会话 ID 本身是唯一的，许多网站也会跟踪会话 ID + IP 地址以提高安全性（这样攻击者就不能简单地复制您的会话 ID 并使用它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:11:20.390

Microsoft Commerce Server 将会话 GUID 存储在 cookie 中。该指南与用户购物篮相关联，其中包含所选产品、账单/运输信息、信用检查历史记录等信息。

简而言之，您最多可以在 cookie 中存储 4 KB 的信息。这对于基本信息来说已经足够了，这就是为什么在服务器上的数据库中存储详细信息通常更容易的原因。这还允许进行数据挖掘（例如，购买此商品的客户也浏览了这些商品）、购物车放弃率等。

现代浏览器允许更大的存储空间（某些高达 2 GB），因此本地缓存可以帮助加快内容交付，但该信息不再可供服务器用于挖掘目的。

我不确定这是否回答了您的问题，或者这是否是官方的“答案”，但评论框太小了。

# c# - 将 MemoryStream 对象从 .NET 2.0 Web 服务传递给 .NET 4.0

> ID：11414901
> 
> 赞同：0
> 
> 时间：2012-07-10T13:55:24.657
> 
> 标签：c#, asp.net-mvc-3, web-services

在我的 MVC3 应用程序中，我正在使用用 .net 2.0 编写的 asmx Web 服务。一切正常，直到我遇到发送/接收 MemoryStream 和 FileStream 对象。这是我遇到的一个示例。这是 asmx 代码（.net 2.0）：

```
 [WebMethod]
    public FileStream testing()
    {
        FileStream fs = new FileStream(@"c:\temp\test.txt", FileMode.CreateNew);
        return fs;
    } 
```

我构建它，然后在我的 MVC3 (.net 4.0) 应用程序中使用它：

```
 Service1.Service1 service1 = new Service1.Service1();
        System.IO.FileStream fs = service1.testing(); 
```

当我尝试运行它时，我收到此错误：

```
Error   3   Cannot implicitly convert type 
'MvcApplication1.Service1.FileStream' to 'System.IO.FileStream' 
```

即使我将变量设置为类型 MvcApplication1.Service1.FileStream，我也无法对 FileStream 对象执行我需要的操作，例如 FileStream Read 和 Close 函数等。我对 MemoryStream 对象也有同样的效果。有什么问题，我怎样才能使这项工作？谢谢

# linux - 多个 ssh 登录/注销

> ID：11414905
> 
> 赞同：2
> 
> 时间：2012-07-10T13:55:40.070
> 
> 标签：linux, bash, unix, ssh

我正在处理 ssh，我的任务是在非交互（？）模式下多次登录到另一个控制台，所以我专门以这种模式登录机器，我必须键入 CTRL-D 才能注销，并且这个操作重复。

```
 #!/bin/bash  
for i in `seq 100`  
do  
ssh test@macintel  
sleep 1  
done 
```

有什么办法让我不必手动输入 CTRL-D 来注销？

运行任何类似的命令`ssh test@macintel './command.sh'`对我都不起作用。

我正在考虑通过它的 PID 杀死它，或者用一些文件描述符调用它，但我的本地会话仍然被调用的 ssh 连接阻塞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:27:41.460

未经测试，但将默认 shell 更改`macintel`为注销，以便您在登录后立即注销：

```
sudo chmod -s logout test 
```

该命令必须以 root 身份运行，`macintel`因为 logout 不是标准 shell。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:58:56.923

```
ssh -l root 192.168.22.250 -C "./command.sh" 
```

使用该`-C`选项传递您希望在远程机器上执行的命令，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:39:25.577

根据 ssh -vv log here 如果 `ssh -vv root@host "command;exit"`ssh 的输出显示会调用什么：

`debug1: Sending command: command;exit
debug2: channel 0: request **exec** confirm 1
...
debug2: exec request accepted on channel 0`

而调用`ssh -v root@host` 输出：

`debug2: channel_input_status_confirm: type 99 id 0
debug2: PTY allocation request accepted on channel 0
...
debug2: **shell** request accepted on channel 0
Last login: Wed Jul 11 09:11:22 2012 from 192.168.11.2`

所以看起来我需要在 ssh 日志记录时调用“shell”。

@chepner：您的解决方案似乎没问题，但我无法以这种方式更改帐户设置。无论如何感谢您的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:31:08.457

这适用于红帽盒子：

```
#!/bin/bash
for i in seq 100
do
ssh user@server "/path/command.sh;exit"
done 
```

# iphone - 如何使用 MBProgressHUD 链接多个操作？

> ID：11414907
> 
> 赞同：1
> 
> 时间：2012-07-10T13:55:50.213
> 
> 标签：iphone, mbprogresshud

基本上我有3个步骤：

1.  我需要准备要发送到服务器的数据。这需要一些时间。
2.  准备好数据后，我必须将其发送到服务器——这也需要一段时间。
3.  我等待服务器响应一切正常。

我正在考虑对这些操作中的每一个使用 MBProgressHUD - 我显示 hud，并使用该`showWhileExecuting`方法。然后，当我在该代码中隐藏 hud 时，我调用下一个操作，并再次显示 hud。

理论上这应该可行，但这是应该这样做的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:05:26.523

最好不要依赖 MBProgressHUD。您应该将其用作用户的反馈元素，而不是作为运营经理。

例如，您可以使用 NSOperationQueue，并通知 hud 在每次迭代中更新其数据/状态。

当然，你可以像你说的那样使用它，但对我来说似乎并不干净（以编程方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:22:30.707

我在单击按钮时获得第一个动作，我使用这个：

```
 HUD = [[MBProgressHUD alloc] initWithWindow:[UIApplication sharedApplication].keyWindow];

        [self.view.window addSubview:HUD];

        // Regiser for HUD callbacks so we can remove it from the window at the right time
        HUD.delegate = self;

        // Show the HUD while the provided method executes in a new thread
        [HUD showWhileExecuting:@selector(DNS_info) onTarget:self withObject:nil animated:YES]; 
```

然后单击 2 个按钮，获取操作，如下所示：

```
HUD = [[MBProgressHUD alloc] initWithWindow:[UIApplication sharedApplication].keyWindow];

        [self.view.window addSubview:HUD];
//        HUD.dimBackground = NO;

        // Regiser for HUD callbacks so we can remove it from the window at the right time
        HUD.delegate = self;

        // Show the HUD while the provided method executes in a new thread
        [HUD showWhileExecuting:@selector(whois) onTarget:self withObject:nil animated:YES]; 
```

我想，这对你有帮助。

# jquery - 编写此 jquery 的更好方法

> ID：11414910
> 
> 赞同：0
> 
> 时间：2012-07-10T13:56:08.047
> 
> 标签：jquery, optimization

到目前为止，这个 jquery 代码适用于我想要它做的事情。基本上，当用户单击图像时，它会淡出这些 Div，然后淡入需要显示的图像：

```
$('.brother').click(function() {
        $("#mitsu-gallery:visible, .mitsu-tag:visible, #taki-gallery:visible, .taki-    tag:visible").fadeOut("slow", function() {
             $("#brother-gallery, .brother-tag").fadeIn("slow");
        });
     }); 
```

但是我想知道是否有更好的方法来做到这一点，而不是列出我想要隐藏的所有 Div？或者这只是实现这一目标的最佳方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:57:59.713

`DIVs`对所有你想隐藏的东西使用一个类。

例如

```
<div id="mitsu-gallery" class="hideme">Content</div> 
```

和

```
$('.hideme').fadeOut(blah, blah); 
```

**编辑：**

在查看[您的 Fiddle](http://jsfiddle.net/ultraloveninja/AmNyJ/5/)后，这是您的最佳选择：

```
$('.control').on('click', function (e) {
    e.preventDefault();
    var field = $(this).data('field');
    $('.hider:visible').fadeOut("slow", function () {
        $('#' + field + '-gallery, #' + field + '-tag').fadeIn("slow");
    });
}); 
```

**另请**查看此[FIDDLE上的 HTML 和 CSS 更改](http://jsfiddle.net/matthewbj/GBYSc/)

# sql-server - 如何知道 MS SQL Server 中存储过程的执行状态

> ID：11414915
> 
> 赞同：4
> 
> 时间：2012-07-10T13:56:14.240
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个很长的存储过程，我如何知道它的执行状态？完成了 50% 之类的东西。我进行了很多搜索，但没有得到任何满意的结果。所以希望这是不可能的。我使用的是 MS SQL Server 2008。如果它不可用，我可以知道它不可用的原因可用的 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:15:07.590

您可以使用：

```
RAISERROR ('Some comment, immediate', 0, 1) WITH NOWAIT 
```

在此声明后立即打印消息。（它不会生成错误消息）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T14:09:06.903

不，至少以您描述的形式不可用。这是因为很难知道存储过程在内部必须做什么（如果它调用其他存储过程怎么办？）以及在尝试执行之前需要多长时间。

当然，您可以检查 proc 并查看它`SELECT * FROM [TableName]`

但是你需要知道表的大小、返回的数据类型、磁盘访问速度、查询是否被缓存等等。

那么，如果另一个进程意外地锁定了一条记录并且比平时花费了更长的时间怎么办？您不知道该锁将持有多长时间 - 那么您如何计算未知变量（时间）的百分比？

您可以做的最好的事情是在您的过程中放置​​“检查点”以`print`在每个离散步骤之后发送消息或发送电子邮件或登录表格，例如

```
print getdate()
print 'Selecting from [Users]'

Select * from [Users]

print getdate()
print 'Selecting from [Clients]'

Select * from [Clients]

print getdate()
print 'Finished' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T14:29:28.790

如果您有一个 .NET 客户端应用程序，您可以使用以下 C# 语法接收服务器发送的大致进度消息：

```
 using (SqlConnection conn = new SqlConnection(...))
    {
        conn.FireInfoMessageEventOnUserErrors = true;
        conn.InfoMessage += new SqlInfoMessageEventHandler(conn_InfoMessage);
        using (SqlCommand comm = new SqlCommand("dbo.sp1", conn) 
               { CommandType = CommandType.StoredProcedure })
        {
            conn.Open(); 
            comm.ExecuteNonQuery();
        }
    }

    static void conn_InfoMessage(object sender, SqlInfoMessageEventArgs e)
    {
        // Process received message
    } 
```

虽然可以按照 Janis 在先前答案之一中的描述发送服务器端的消息：

```
 RAISERROR('33%%..', 10, 0) WITH NOWAIT 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T14:15:52.583

SQL Server 没有内置功能来检查存储过程的状态，但您可以编写一些类似的东西。在我们的例子中，我们创建了一个日志记录函数，该函数在存储过程中的每个进程之后发布一条消息。

假设您有一个运行多个查询的存储过程：

```
SELECT *
FROM yourTable

UPDATE ...
SET ...

DELETE 
FROM ... 
```

您可以在每次查询/处理后放置一个将数据发布到日志表的步骤：

```
SELECT *
FROM yourTable

-- log query
INSERT INTO LogTable (DateComplete, Status, TaskId)
VALUES (getdate(), 'Complete', 1)

UPDATE ...
SET ...

-- log query
INSERT INTO LogTable (DateComplete, Status, TaskId)
VALUES (getdate(), 'Complete', 2)

DELETE 
FROM ...

-- log query
INSERT INTO LogTable (DateComplete, Status, TaskId)
VALUES (getdate(), 'Complete', 3) 
```

您可以通过在查询周围使用一个块来进一步执行此操作`TRY...CATCH`，然后您可以收到有关该过程是成功还是失败的不同消息。

# c# - 使用 Aspose.Pdf 文件转换 Excel (.xml) 文件 PDF

> ID：11414917
> 
> 赞同：0
> 
> 时间：2012-07-10T13:56:24.647
> 
> 标签：c#, pdf-generation, aspose

我正在使用 CarlosAg.ExcelXmlWriter API 和 Aspose.Pdf API。当我使用 CarlosAg.ExcelXmlWriter API 创建的 .xml 文件并使用它通过 Aspose.Pdf API 创建一个 .pdf 文件时，我得到一个空白的 .pdf 文件，其中除了 Aspose 水印外没有任何数据。

Aspose PDF 似乎无法识别 CarlosAg.ExcelXmlWriter.xml 中的标签，因此在使用 Aspose.Pdf 时，.pdf 文件没有填充任何数据。

我检查了 Aspose.Pdf API 文档和论坛，但我没有看到他们提到的关于 Aspose .Pdf API 能够将任何 .xml 文件转换为 PDF 的任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:26:57.687

我叫 Nayyer，是 Aspose 的支持开发人员/技术传播者。

Aspose.Pdf for .NET 支持将 XML 文件转换为 PDF 格式的功能，但源 XML 文件必须符合Aspose.Pdf for .NET 的[文档对象模型](http://www.aspose.com/docs/display/pdfnet/Aspose.Pdf+for+.NET+Document+Object+Model+%28DOM%29)。您在生成的 PDF 中看不到任何内容的原因是 XML 模式不符合 Aspose.Pdf DOM。如果您更喜欢使用 CarlosAg.ExcelXmlWriter API 生成的 XML，您可以尝试使用 XSLT 使源 XML 文件与 Aspose.Pdf.Generator DOM 兼容。

您可以查看以下链接以获取有关[XML 技术简介](http://www.aspose.com/docs/display/pdfnet/Introduction+to+XML+Technologies+%28Generator%29)的更多详细信息。

*PS，如果 XML 文件符合 Open Office XML 格式，那么您可以简单地使用 Aspose.Cells for .NET 而不是 Aspose.Pdf for .NET 将此文件呈现为 PDF 格式。您可以查看以下链接以获取有关[Aspose.Cells for .NET 支持的文件格式](http://www.aspose.com/docs/display/cellsnet/SpreadsheetML+%28XLSX,+XML%29)的更多信息。*

# android - Android：使用 DownloadManager 将下载的数据保存在内存中

> ID：11414923
> 
> 赞同：3
> 
> 时间：2012-07-10T13:56:45.783
> 
> 标签：android, memory, internal, download-manager

我正在使用`DownloadManager`Android 中的类从服务器下载数据。我想将数据保存在内部存储器（data/data/mypackage/files/...）而不是外部存储器中。这个怎么做？

```
DownloadManager dm = (DownloadManager) DownloadApplicationActivity.this.getSystemService(Context.DOWNLOAD_SERVICE);
    DownloadManager.Request req = new DownloadManager.Request(Uri.parse(MY_LINK));
    req.setTitle(MY_TITLE)
                    .setDescription("Downloading ....")
                    // download the package to the /sdcard/downlaod path.
                    .setDestinationInExternalPublicDir(
                            Environment.DIRECTORY_DOWNLOADS,
                            MY_PATH);
            long enqueue = dm.enqueue(req); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-10T17:21:10.410

尝试这样的事情：

```
// if there is no SD card
        if (Environment.getExternalStorageState() == null) {
            directory = new File(Environment.getDataDirectory()
                    + "/RobotiumTestLog/");
            photoDirectory = new File(Environment.getDataDirectory()
                    + "/Robotium-Screenshots/");

            // if no directory exists, create new directory
            if (!directory.exists()) {
                directory.mkdir();
            }

            // if phone DOES have sd card
        } else if (Environment.getExternalStorageState() != null) {
            // search for directory on SD card
            directory = new File(Environment.getExternalStorageDirectory()
                    + "/RobotiumTestLog/");
            photoDirectory = new File(
                    Environment.getExternalStorageDirectory()
                            + "/Robotium-Screenshots/");

            // if no directory exists, create new directory to store test
            // results
            if (!directory.exists()) {
                directory.mkdir();
            }
        } 
```

# iis-7 - 使用 IsolateApps 选项设置 machineKey validationKey

> ID：11414928
> 
> 赞同：2
> 
> 时间：2012-07-10T13:56:58.883
> 
> 标签：iis-7, web-config

我有几个通过负载平衡器进行负载平衡的网站。

如果用户在服务器之间切换，我会尝试让表单身份验证工作。在 MSDN doku 中有一句话：

```
If you add the IsolateApps modifier to the decryptionKey value, ASP.NET generates a unique encrypted key for each application using each application's application ID. 
```

**应用程序 ID**在这里是什么意思？我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:38:50.907

这与表单身份验证有关。当形成 AUTH 时，您可以为给定的用例分配一个 APP 名称。ISOLATE APPS，默认提供程序确保加密的密码特定于应用程序。即 PASSWORD + SALT + Unique APP hash => 选择的加密算法。

您可以使用 asp.net 附带的默认表单提供程序。或自己滚动。请参阅[http://msdn.microsoft.com/en-us/library/tw292whz](http://msdn.microsoft.com/en-us/library/tw292whz) 和 [http://msdn.microsoft.com/en-us/library/ff649314.aspx](http://msdn.microsoft.com/en-us/library/ff649314.aspx)

您可以运行提供的 exe aspnet_regsql 来创建默认 MS 提供程序将使用的数据库。然后例如在 web.config 中。

# jquery - MVC2：日期选择器在编辑器模板中不起作用

> ID：11414931
> 
> 赞同：0
> 
> 时间：2012-07-10T13:57:00.740
> 
> 标签：jquery, asp.net-mvc-2, datepicker

在 Views -> Shared 文件夹中，我有 DateTime.ascx 部分视图；

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<System.DateTime?>" %>
<%:Html.TextBox("", (Model.HasValue ? Model.Value.ToLongDateString() : string.Empty), 
    new { @class = "datePicker" })%> 
```

由于 jquery 库[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js)和这个 javascript 代码，这适用于我的大部分应用程序；

```
 // noWeekendsOrHolidays
        //  beforeShowDay: $.datepicker.noWeekends
        $(function () {
            $(".datePicker").datepicker({ showOn: 'both', dateFormat: 'dd MM yy', changeMonth: true, changeYear: true, yearRange: 'c-1:c+1', beforeShowDay: noWeekendsOrHolidays });
        }); 
```

我的看法如下；

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.master" 
Inherits="System.Web.Mvc.ViewPage<SHP.WebUI.Models.BankHolidayViewModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    BankHoliday
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <% using (Html.BeginForm("Create", "BankHoliday"))
       {%>
       <%: Html.AntiForgeryToken() %>
        <h3>Bank Holiday Administration</h3>
        <% if (TempData["UpdatedFlag"].ToString() == "True")
        { %>
        <p class="success">At time <% Response.Write(DateTime.Now.ToString("T")); %> - Details have been successfully saved 
            </p>
        <%}
        else if (TempData["UpdatedFlag"].ToString() == "False")
        {%>
        <p class="error">At time <% Response.Write(DateTime.Now.ToString("T")); %> - ERROR! Invalid date entered has NOT been saved 
            </p>
        <%} %>        
             <p>Select the year: <%: Html.DropDownListFor(model => model.SelectedYear, Model.YearList)%></p>
            <fieldset>
            <legend>Enter the bank holidays here:</legend>
             <p><i>You can find the bank holiday dates on this <a target="_blank" href="http://www.year-planner-calendar.wanadoo.co.uk/">website</a>.</i> </p>      
            <table class="groupBorder">
                <tr>
                    <th>Bank Holiday</th>
                    <th>Date</th>
                    <th>Notes</th>
                </tr>
                <%: Html.EditorFor(x => x.BankHolidays) %>
                <tr>
                    <td colspan="3" style="padding-top:20px;text-align: center">
                        <input type="submit" value="Save" id="btnSubmit"/>
                    </td>
                </tr>
            </table>
            </fieldset>
        <% } %>
        <script language="javascript" type="text/javascript">
            $(function () {
                $("#SelectedYear").change(function () {
                    var year = $("#SelectedYear").val();
                    $("#wholepage").load('<%:Url.Content(@"~/BankHoliday/Create/")%>' + year);
                });
            });
    </script>
</asp:Content> 
```

在这里你可以看到这一行： <%: Html.EditorFor(x => x.BankHolidays) %> 这有一个关联的编辑器模板；

" %>

```
<tr>
    <td><%: Model.T.BankHolidayDescription%>
        <%: Html.HiddenFor(model => model.BH.BankHolidayId) %>
        <%: Html.HiddenFor(model => model.T.BankHolidayTypeId) %>
    </td>
    <td><%: Html.EditorFor(model => model.BH.NullableBankHolidayDate)%></td>
    <td><%: Html.EditorFor(model => model.BH.BankHolidayComment)%></td>
</tr> 
```

日期选择器需要应用于 <%: Html.EditorFor(model => model.BH.NullableBankHolidayDate)%>

但是它不起作用。我单击该字段，没有任何反应。

当我按 F12 并进入开发人员工具时，我发现带有 DatePicker 的控件的 HTML 如下所示；

```
<input name="BankHolidays[6].BH.NullableBankHolidayDate" class="datePicker hasDatepicker" id="BankHolidays_6__BH_NullableBankHolidayDate" type="text" jQuery1341928330742="131"/> 
```

所以这个类已经被分配给 datePicker，所以它肯定可以工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:12:19.580

您是否定义了 javascript 函数**noWeekendsOrHolidays**？
如果您想了解更多，可以阅读这篇[文章](http://davidwalsh.name/jquery-datepicker-disable-days)。

您可以尝试更改的另一件事是母版页脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".datePicker").datepicker();
    });
</script> 
```

并根据此 Yahoo! 将其放在页面底部 [文档](http://developer.yahoo.com/performance/rules.html#js_bottom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:30:14.440

问题是我正在通过 Ajax 调用填充网格，并且 $(document).ready(function () {}) 事件没有触发。当我更改代码以提交到 POST 操作并从中填充网格时，它起作用了。在 Ajax 调用之后，我已经在成功函数中分配了 datepicker，但我无法让它工作。

# gcc - 未定义的 ATLAS 引用

> ID：11414932
> 
> 赞同：2
> 
> 时间：2012-07-10T13:57:07.530
> 
> 标签：gcc, linker, atlas

我试图在我的项目中使用 ATLAS，但我什至无法将最简单的代码与之链接：

```
#include <stdio.h>
#include <cblas.h>

void ATL_buildinfo(void);

int main() {
    ATL_buildinfo();
    return 0;
} 
```

我正在编译：

```
gcc -I/home/caian/ATLAS/include/ \
  -I/home/caian/ATLAS/ARCH/include/ \
  -L/home/caian/ATLAS/ARCH/lib/ \
  -latlas main.c -o test 
```

我仔细检查了 ATL_buildinfo 原型和 libatlas.a，nm 显示 ATL_buildinfo 存在。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:49:54.023

在链接器标志之前移动 main.c 可能会解决它。

```
$gcc main.c -I..-L...". 
```

这应该可以解决问题。

这是因为 gnu 链接器强加“链接顺序”的方式。

链接器的传统行为是在命令行指定的库中从左到右搜索外部函数。这意味着包含函数定义的库应该出现在使用它的任何源文件或目标文件之后。这包括使用快捷方式 -l 选项指定的库，如以下命令所示。

```
$ gcc -Wall calc.c -lm -o calc   (correct order) 
```

此链接解释了这种行为：

[http://chara.epfl.ch/~fsalvi/docs/gcc/www.network-theory.co.uk/docs/gccintro/gccintro_17.html](http://chara.epfl.ch/~fsalvi/docs/gcc/www.network-theory.co.uk/docs/gccintro/gccintro_17.html)

# zend-framework - 希望将客户数据存储在自定义表中

> ID：11414934
> 
> 赞同：0
> 
> 时间：2012-07-10T13:57:10.747
> 
> 标签：zend-framework, magento

我为 magento 创建了一个新的自定义模块和数据库表。用客户数据填充它的最佳方法是什么。

例如，当创建一个新客户时，我想将该客户的 ID 也存储在这个新表中，然后使用这个 ID 在管理员的新部分中显示各种信息。

我已经创建了新部分，但只是不确定如何做第一部分。我想这样做的原因是我想为每个客户分配每个类别的特定折扣。

谢谢罗伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:58:40.710

@Robert，有更好的方法可以做到这一点，您不需要创建模块。

您可以在 Customer->Customer Groups 菜单中将您的客户关联到组。

创建客户组后，您可以为该组和每个类别创建特定折扣。为此，您应该：

1.  转到促销 -> 购物车价格规则
2.  点击新增
3.  设置名称并选择要应用的组
4.  单击条件选项卡
5.  添加产品属性组合规则，添加产品属性类别作为待验证的属性。
6.  选择此规则应用的类别（或多个类别）。

例子： ![在此处输入图像描述](../Images/f0a8d082c887389c44e9a2f2e4d52ee6.png)

* * *

但是如果你想继续原来的想法，我建议你[创建一个客户属性](http://inchoo.net/ecommerce/magento/adding-magento-attribute-with-custom-input-renderer/)，而不是创建一个新表。通过这样做，可以在客户信息中显示自定义属性，而无需创建另一个管理页面。

# jquery - jQuery函数后页面重新加载有问题

> ID：11414935
> 
> 赞同：2
> 
> 时间：2012-07-10T13:57:12.680
> 
> 标签：jquery

我已经为此苦苦挣扎了一段时间，但我无法提出解决方案。我有一个简单的 jQuery 函数，可以淡入和淡出餐厅菜单上的内容元素。这种时尚效果很好，但是当它运行时页面会重新加载并跳回顶部。我在这里找到了各种建议的解决方案，但没有一个有效。我用过 return false; 和 e.preventDefault(); 以及弄乱链接HTML，将其更改为跨度和按钮，但都不起作用。它在 Wordpress 上的自定义主题上，这是我拥有的 HTML。

```
<div id="menu_nav">

<ul>
<li><a href="#" id="mainattraction" class="current-link menu-link">Main Attractions</a></li>
    <li><a href="#" id="seafoodcombos" class="menu-link">Seafood Combo's</a></li>
<li><a href="#" id="harbouronaroll" class="menu-link">Harbour On A Roll</a></li>
<li><a href="#" id="meangreens" class="menu-link">Mean Greens</a></li>
<li><a href="#" id="appetizers" class="menu-link">Appetizers</a></li>
<li><a href="#" id="kidsmenu" class="menu-link">Kids Menu</a></li>
<li><a href="#" id="onthegrill" class="menu-link">On The Grill</a></li>
<li><a href="#" id="soups" class="menu-link">Soups</a></li>
</ul>

</div>

<div id="mainattractionscontent">
//content
</div>

<div id="seafoodcomboscontent">
//content
</div> 
```

等等等等

这是我目前正在使用的 jQuery。

```
 $('document').ready(function() {

    $('.menu-link').click(function(event) {
        var id = this.id + 'content';
        var link = this.id;
        $('.active').fadeOut(600, function(){
            $('#' + id).fadeIn(600);
            $('.active').removeClass('active');
            $('#' + id).addClass('active');
            $('.current-link').removeClass('current-link');
            $('#' + link).addClass('current-link');
            return false;
       }); 
    });

 }); 
```

您还可以查看[http://theharboursportsbar.com/the-menu](http://theharboursportsbar.com/the-menu)上的页面以供参考。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:00:58.570

`return false;`需要在“点击”处理程序中，而不是淡出回调。

```
$('.menu-link').click(function(event) {
    var id = this.id + 'content';
    var link = this.id;
    $('.active').fadeOut(600, function(){
        $('#' + id).fadeIn(600);
        $('.active').removeClass('active');
        $('#' + id).addClass('active');
        $('.current-link').removeClass('current-link');
        $('#' + link).addClass('current-link');
   }); 
   return false;
}); 
```

调用`event.preventDefault();`也可以，但它应该再次发生在“点击”处理程序中，而不是动画回调中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:56:36.447

它实际上不是链接的默认性质。Pointy 是正确的，因为您应该将 return false 移到 click 处理程序之外，但这不是这里的实际问题。

当您淡出您的内容时，页面会变得更小，足够小以至于在大多数显示器/视口上，无论所有内容都可以放在一个页面上，所以它似乎“跳”到顶部，而实际上，它只是显示所有可能的可用内容。所以基本上你的问题在于fadeOut函数本身的性质，在fadeOut函数的末尾它设置`display:'none'`影响页面的布局。

试试这个：

```
$('.menu-link').click(function(event) {
    var id = this.id + 'content';
    var link = this.id;
    $('.active').animate({opacity:0},{duration:600, complete:function(){
        $('#' + id).css('display','block').animate({opacity:1},{duration:600});
        $('.active').removeClass('active').css('display','none');
        $('#' + id).addClass('active');
        $('.current-link').removeClass('current-link');
        $('#' + link).addClass('current-link');
    }}); 
    return false;
}); 
```

# mysql - 从其他表填充用于多对多关系的表

> ID：11414940
> 
> 赞同：1
> 
> 时间：2012-07-10T13:57:33.897
> 
> 标签：mysql, many-to-many

我有一个不尊重正常形式的基表（想想 Excel 表）。

它包含具有相同性质的真/假字段的列列表，并且还有一个包含逗号分隔的缩写列表的字段。这两个都可能是形成额外表格的候选者。

对于缩写我目前正在做的是手动输入 PK 如下（注意选择上的静态整数）：

```
INSERT recipe_ingredients(
recipe_id,
ingredient_id
)
SELECT uid, "1"
FROM ingredients
-- ANCHO = Anchovies
WHERE ingredients_abbrev LIKE "%ANCHO%" ON DUPLICATE 
KEY UPDATE recipe_id = recipe_id 
```

有没有一种方法可以运行使用所有三个表的查询，以便一次性填写中间表？

# ajax - 在 qunit 中使用 mockjax 模拟 jsonp 请求的问题

> ID：11414941
> 
> 赞同：2
> 
> 时间：2012-07-10T13:57:33.943
> 
> 标签：ajax, mocking, jsonp, qunit, mockjax

我想将 mockjax 与 qunit 一起使用，但无法正常工作。这是我尝试过的一个简单测试：http: [//jsfiddle.net/shapeshifta/3YNB2/](http://jsfiddle.net/shapeshifta/3YNB2/)

```
asyncTest('Response returns jsonp', function() {
    $.mockjax({
        url: 'http://search.twitter.com/search.json*',
        contentType: 'text/json',
        proxy: 'mocks/twitter.json'
    });
    window.abcdef123456 = function() {
        start();
        ok(true, 'JSONP Callback executed');
    };

    $.ajax({
        url: 'http://search.twitter.com/search.json?q=Javascript&callback=?',
        jsonpCallback: 'abcdef123456',
        dataType: 'jsonp',
        error: function() {},
        complete: function() {}
    });
    $.mockjaxClear();
}); 
```

像没有 mockjax 代码的魅力一样工作，但并不能真正使用它......我做错了什么吗？尝试使用 sinon.js，但异步测试存在一些问题，所以我想切换到 mockjax。但是我的代码一直在向 twitter 询问数据，尽管 mockjax 应该模拟我的请求......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:13:53.843

我得到了这个工作：

```
asyncTest('响应返回 jsonp', function() {

    $.mockjax({
        url: 'http://search.twitter.com/search.json*',
        内容类型：'文本/json'，
        代理：“模拟/twitter.json”
    });

    功能成功（数据）{
        开始（）;
        ok(true, 'JSONP 完成');
    };

    $.ajax({
        url: 'http://search.twitter.com/search.json?q=Javascript&callback=?',
        数据类型：'jsonp'，
        成功：onSucceed，
        错误：函数（）{警报（'错误'）；},
        完成：函数（）{ $.mockjaxClear（）；}
    });
});​

```

# iphone - 如果应用程序在推送通知上处于活动状态

> ID：11414942
> 
> 赞同：2
> 
> 时间：2012-07-10T13:57:39.277
> 
> 标签：iphone, xcode, apple-push-notifications

在我发送推送通知后，我希望应用程序在我的收件箱页面上打开，以便用户可以在收件箱中看到新消息。我的 AppDelegate 中有以下代码

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{

    [self.tabController setSelectedIndex:2]; 
} 
```

当我发送推送消息并且手机处于活动状态时，它会直接进入那里而不会发出警告。我知道这就是我的代码应该做的，但是有没有办法像这样改变它

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{

    if(app.isActive == FALSE)
          [self.tabController setSelectedIndex:2]; 
} 
```

对此的任何见解都会有很大帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:05:21.320

来自 Stanislav Yaglo，[目标 C：如何检查应用程序当前是否处于活动状态（即用户正在使用它）？](https://stackoverflow.com/questions/6730531/objective-c-how-to-check-if-application-is-currently-active-i-e-user-is-using)：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    if (application.applicationState == UIApplicationStateActive) {
        // For example, update the tab bar
    }
    else {
        self.tabController.selectedIndex = 3;
    }
} 
```

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:01:40.680

`YES`进入应用程序后，您可以设置一个布尔值，只需将布尔值设置为：

```
- (void)applicationWillEnterForeground:(UIApplication *)application 
```

并将布尔值设置`NO`为

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:05:44.497

You can tell if the application was in the foreground by checking the applicationState like so:

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    if ( application.applicationState == UIApplicationStateActive )
        // app is in the foreground
    else
        // app was just brought from background to foreground
    ...
} 
```

# java - 如何用 JPA 2.0 Criteria 表示不在 M:N 关系中？

> ID：11414948
> 
> 赞同：1
> 
> 时间：2012-07-10T13:57:54.787
> 
> 标签：java, hibernate, jpa-2.0, criteria-api

如何使用 JPA 2.0 Criteria 表达查询，该查询应获取与实体 B 不相关 (m:n) 的所有实体 A。

领域模型：

```
@Entity class A{
  @Id int id;
  @ManyToMany List<B> disableForB;
}

@Entity class B{
  @Id int id;
} 
```

与此域模型相关的问题是：如何找到与特定`A`无关的所有内容？`disableForB``B`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:23:31.303

我目前没有测试可用查询的环境，因此以下可能包含一些错误。这无论如何都是可行的[isNotMember](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#isNotMember%28E,%20javax.persistence.criteria.Expression%29)。

```
B b ...
CriteriaQuery<Aa> cq = cb.createQuery(A.class);
ParameterExpression<B> param = cb.parameter(B.class);
Root<A> a = cq.from(A.class);
Expression<Collection<B>> disabledB = a.get("disableForB");
Predicate pred = cb.isNotMember(param, disabledB);
cq.select(a);
cq.where(pred);
em.createQuery(cq).setParameter(param, b).getResultList(); 
```

# sql - 需要使用“count”函数和“IN”运算符简化 sql 查询

> ID：11414950
> 
> 赞同：0
> 
> 时间：2012-07-10T13:57:57.487
> 
> 标签：sql, relational-division

我有一个只包含两列的表：

```
ObjectID||PropertyID 
```

任务：通过 PropertyID == (P1 and P2 and P3 and ...) 获取所有 ObjectID。

我解决了这个任务：

```
 SELECT *
  FROM  ( 
        SELECT SD.ObjectID ObjectID,
               count( SD.ObjectID )  countMatchingProperties
          FROM table AS SD
         WHERE SD.PropertyID IN ( P1, P2, P3, ..., Pn ) 
         GROUP BY ObjectID 
    ) 
    AS C
 WHERE C.countMatchingProperties > n-1 
```

但我并没有想到，这项任务可以更轻松、更快速地解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:01:54.723

```
SELECT SD.ObjectID ObjectID,
count( SD.ObjectID )  countMatchingProperties
FROM table AS SD
WHERE SD.PropertyID IN ( P1, P2, P3, ..., Pn ) 
GROUP BY ObjectID 
having count( SD.ObjectID ) > n-1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:03:58.180

```
select ObjectID 
from table 
where PropertyID in (P1, P2, P3, P4)
group by ObjectID
having count(distinct PropertyID) = 4 
```

计数（例如， ）必须与您的子句`4`中唯一值的数量相匹配。`IN`

# .net - 如何阻止.net中的浏览器控件闪烁

> ID：11414955
> 
> 赞同：0
> 
> 时间：2012-07-10T13:58:12.460
> 
> 标签：.net

我有一个控件，我需要经常重新加载浏览器内容（例如在某些情况下每秒两次）。它是否需要很长时间才能加载并不重要，但我不想要的是整个 Web 控件都在闪烁。

我做了两个网络浏览器，我总是更改那个不可见的文档，然后我使用计时器等待文档加载，然后将其发送到当前浏览器的前面。

这没有帮助，它仍然在闪烁，有什么办法可以使它在加载文档后显示平滑？同时之前的浏览器可以保留

这整个控件实际上是一种聊天窗口，所以窗口的背景是一样的，但是内容在增长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:39:15.013

我在控件内制作了 2 个面板，每个 Web 浏览器都是其中的一部分，我没有更改 Web 浏览器的 z 顺序，而是更改了面板的 z 顺序。它停止了闪烁。我不明白为什么这有效，但它有效:)

# git - 有没有办法从一个分支中删除提交并将它们放入另一个分支？

> ID：11414956
> 
> 赞同：1
> 
> 时间：2012-07-10T13:58:14.180
> 
> 标签：git

我犯了一个错误，不小心在一段时间内提交了 master，现在我已经意识到我的错误，我想将这些提交从 master 移回我自己的暂存分支。

这可能与 git 有关还是我将不得不手动移动文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:01:56.537

如果你的错误是这样的，大师目前看起来像：

```
A->B->C->D 
```

而你只想移动`C`到`D`一个新的分支，这很容易：

```
$ git checkout master      # move to D
$ git branch new-branch    # create new branch at D
$ git reset B-sha1         # reset master to B
$ git checkout new-branch  # continue working on new-branch 
```

根据`C`和引入的更改`D`，这可能无法正常工作。例如，如果`C`引入了一个新文件，git 可能不会让您检查新分支，以免覆盖该文件。（当 master 在 签出时`B`，git 认为该文件未跟踪。）您可以`git clean -xdf`在重置后添加 a ，或者`reset --hard`根据情况进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:39:29.897

假设您错误地向 master 提交了 5 次提交，请移动提交：

```
git checkout master
git branch temp
git rebase --onto yourbranch temp~5 temp 
```

更新分支：

```
git push . temp:yourbranch
git push . master~5:master -f 
```

更新您的远程主机：

```
git push origin master -f 
```

告诉你的同事你做了什么，这样他们就可以根据你的更正调整他们的主人。

# ruby-on-rails - RSpec：should_receive 作为被指定的东西

> ID：11414958
> 
> 赞同：0
> 
> 时间：2012-07-10T13:58:29.607
> 
> 标签：ruby-on-rails, ruby, validation, testing, rspec

我想`should_receive`用作 RSpec 中规范的主题。换句话说，我不想测试 a `should ==`，而是想测试另一个类是否接收到方法调用。

我想写的是这样的：

```
describe '#methodOne' do

  subject { ClassTwo }

  it { should_receive(:methodTwo) }

  ClassOne.methodOne

end 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:29:43.720

有一些方法可以扭曲 RSpec 来做这样的事情，但它并没有按照它的意图使用 RSpec。 `should_receive`设置将调用方法的模拟期望。`it`单行语法没有意义。

我建议您从基本`describe`/结构开始，只有在出现重复`it`时才重构为更高级的结构（主题、单行）。`it`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:13:14.980

所以我是这样做的：

```
describe "#methodOne" do

  it "calls the appropriate method" do

    ClassTwo.should_receive(:methodTwo)
    ClassOne.methodOne

  end

end 
```

这很好用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T14:20:54.403

我会以实例变量的形式使用主题：

```
@subject.should_receive(:methodTwo) 
```

# android - 免费图像搜索 API --- 用相机拍摄图像并检索有关其内容的信息

> ID：11414961
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:58:38.170
> 
> 标签：android, image, search, image-processing

我想构建一个 android 应用程序，允许用户使用相机拍摄对象的图像，然后搜索 Internet 以了解有关捕获对象的更多信息。

问题是我找不到任何合适的 API 或网站来处理搜索。是否有任何免费的 API 允许基于图像的搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:53:51.267

据我在您的回答中所说，您想使用图像搜索网络（就像您可以在 Google 中执行的操作一样）。如果是这种情况，这里是另一个提出类似查询的[SO 问题的链接。](https://stackoverflow.com/questions/9940497/there-are-many-image-search-api-but-how-can-i-integrate-one-of-them-to-my-app-f)

只是总结那里的答案，

> IQ Engines 提供了一个 API，允许您将图像识别集成到您的移动应用程序中。有关详细信息，请参阅 [http://www.iqengines.com](http://www.iqengines.com)。如果您注册试用，您将获得 1000 次免费视觉扫描，并且可以下载 iOS 和 Android SDK。有一个快速入门指南[http://www.iqengines.com/quickstart](http://www.iqengines.com/quickstart)、API 文档和 SDK 的 README 文件来解释该过程。

# jquery - 隐藏所有下一个 tr td 直到下一个 tr th

> ID：11414965
> 
> 赞同：2
> 
> 时间：2012-07-10T13:58:52.057
> 
> 标签：jquery, toggle, show-hide

它应该很简单，但是这个 jQuery 函数占用了很多元素，它甚至隐藏了我认为的 jQuery。

我想做的是，当一个人点击一个**tr th**时，所有下一个**tr td**都应该隐藏到下一个**tr th**。

我怎样才能让这个代码工作？

```
 <!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <style>
th {  background:#dad;
      font-weight:bold;
      font-size:16px; 
      width: 50%;
}
td {  background:red;
      font-weight:bold;
      font-size:16px; 
      width: 50%;
}
</style>
</head>
<body>
  <table id="example">
    <tr>
      <th>
        <button>Show it 3</button>
      </th>
    </tr>
    <tr>
      <td>test 1</td>
    </tr>
    <tr>
      <td>test 2</td>
    </tr>
    <tr>
      <th>
        <button>Show it 2</button>
      </th>
    </tr>
    <tr>
      <td>test 3</td>
    </tr>
    <tr>
      <td>test 4</td>
    </tr>
  </table>

    <script>
      $('#example tr th').click( function() {
        //alert($(this).parent().html())
        $(this).parent().nextUntil('tr th').toggle();
      })
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:06:23.207

您可以向`tr`具有`th`元素的元素添加一个类：

```
<table id="example">
    <tr>
      <th class='toggle'>
        <button>Show it 3</button>
      </th>
    </tr>
    <tr>
      <td>test 1</td>
    </tr>
    <tr>
      <td>test 2</td>
    </tr>
    <tr class='toggle'>
      <th>
        <button>Show it 2</button>
      </th>
    </tr>
    <tr>
      <td>test 3</td>
    </tr>
    <tr>
      <td>test 4</td>
    </tr>
  </table> 
```

```
$('#example tr th').click( function() {
   $(this).parent().nextUntil('.toggle').toggle();
}) 
```

[演示](http://jsfiddle.net/kgBv/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:09:01.827

这是一种主要使用dom的方法

```
 $('#example tr td button').on('click',function(e){
       var curr = this;
       // get the tr where the button was clicked
       while(curr.nodeType!=='tr') curr = curr.parentNode;
       // now get sibling nodes
       while((curr=curr.nextSibling)){
           if(curr.firstChild.nodeType==='td') $(curr).hide();
           else if(curr.firstChild.nodeType==='tr') return;
       }
    } 
```

或者，使用更多 jQuery：

```
$('#example tr td button').on('click',function(e){
    var siblings = $(this).siblings();
    for(var i=0; i < siblings.length; i++){
        if(siblings[i].find('td').length) $(siblings[i]).hide();
        else if(siblings[i].find('tr').length) return;
    }
 }); 
```

# actionscript-3 - 使用 Image Embed “无法明确解析多名称引用”

> ID：11414966
> 
> 赞同：0
> 
> 时间：2012-07-10T13:58:53.813
> 
> 标签：actionscript-3, apache-flex, flash-builder, embed, flex4.5

> “无法明确解析多名称引用”</p>

在 Google 和 SO 上搜索此字符串会产生大量结果。我已经阅读了很多，但是当包资源管理器中实际上没有重复文件时，它们都没有真正谈论重复的图像资产。

在 CSS 文件中使用嵌入代码：

```
.helpLink {
    over-skin: Embed(source="images/blank.gif");
} 
```

...然后将上述 CSS 文件导入 mxml 文件：

```
<mx:Style source="skins/main.css" /> 
```

...我收到 100 个这样的错误：

```
Can not resolve a multiname reference unambiguously.
        _class_embed_css_images_blank_gif__1196752591_1370790129 (from       _class_embed_css_images_blank_gif__1196752591_1370790129.as) and
  Faces:_class_embed_css_images_blank_gif__1196752591_1370790129 (from Faces/_class_embed_css_images_blank_gif__1196752591_1370790129.as) are available.

  BriefInfoFace.mxml
  /[REDACTED]/src/Faces 
```

这意味着 中有一个`blank.gif`文件`Faces`，但我向你保证没有。它仅存在于我的“包资源管理器”中的一个位置，位于`images`与`Faces`. Faces 文件夹只有`mxml`文件，images 文件夹只有真实的图像文件（png、gif）。

如果我清理项目，它将编译并运行，但之后的任何后续运行都不会编译。这带来了一个巨大的问题，因为每次我想调试它时我都必须不断地清理项目。`blank.gif`Faces 文件夹中没有时如何防止此错误？

**更新 7/14**

根据要求，这是目录结构[的转储](https://gist.github.com/3113152)

**更新 7/15**

根据要求，这是一张显示我进入的地方的图片`main.css` ![在此处输入图像描述](../Images/a88d4ecb96fe10701fd7dab15963082a.png) ![在此处输入图像描述](../Images/2689a7da0ac4f2d5e5b0f10ac8cbab7f.png)

和[进口](https://gist.github.com/3119721)发现`BriefInfoFace.mxml`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:01:24.790

通常，将非代码资产（如图像）留在 src 文件夹之外是一个更好的主意。就我而言，我会在 src 文件夹旁边创建一个“资产”文件夹并将我的图像存储在那里。

如果这不是您的项目的一个选项，您是否尝试通过转到项目属性 -> Flex 编译器来关闭增量编译选项，并在“附加编译器参数”文本字段中添加 -incremental=false。

# python - 我的猜谜游戏有什么问题？

> ID：11414968
> 
> 赞同：0
> 
> 时间：2012-07-10T13:58:57.483
> 
> 标签：python, function, user-input

我试图制作一个简单的“猜谜游戏”，但它所做的只是要求输入，仅此而已。

这是我的代码：

```
import random

def guess():
    if a == b:
        print "Correct!"
        n = input("Press 0 to quit or 1 to try again.")
        if n == 0:
            print ""
        if n == 1:
            return guess
    else:
        print "Wrong! "
        n = input("Press 0 to quit or 1 to try again.")
        if n == 0:
            print ""
        if n == 1:
            return guess

a = random.randint(1,2000)
b = input("Guess a number between 1 and 2000 ") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T14:00:46.043

您没有调用该`guess`函数。您应该在最后添加：

```
guess(a, b) 
```

你应该修改`guess`函数如下：

```
def guess(a, b):
    # your code here 
```

`a`这是必要的，因为您需要将值传递`b`给您的`guess`函数。否则，`a`函数`b`内部`guess`没有值（它们只是未定义的局部变量），Python 将不知道该怎么做。

通过上述操作，您至少可以检查您是否猜对了。但是，如果您想重复猜测，则需要对代码进行更多修改。

* * *

例如，下面是一个可以工作的猜谜游戏的更新版本：

```
import random

def guess(a):
    b = raw_input("Guess a number between 1 and 2000 ")
    if a == b:
        print "Correct!"
    else:
        print "Wrong! "
        n = raw_input("Press 0 to quit or 1 to try again.")
        if n == "0":
            print ""
        if n == "1":
            guess(a)

a = random.randint(1, 2000)
guess(a) 
```

该函数`guess`现在接受一个整数：需要猜测的整数。在函数内部，我们要求用户输入一个整数并将其存储在`b`. 然后我们告诉用户猜测是否正确。如果猜测是正确的，那么函数`guess`就结束了。

如果猜测是错误的，那么如果用户愿意，我们会给他们机会再试一次。请注意，我们现在正在检查`if n == "0":`而不是`if n == 0:`因为`n`是一个字符串，而不是一个整数。如果用户键入了，`1`那么我们`guess`再次调用要猜测的整数 ( `a`)，然后整个事情又开始了。

# .net - 调用 C 函数并在 C# 中获取字符串输出

> ID：11414971
> 
> 赞同：-1
> 
> 时间：2012-07-10T13:59:08.593
> 
> 标签：.net, c, marshalling

我想在 C 语言文件中有一个函数，它可以将字符串作为输出返回，我想从托管代码（即 C#）访问该函数并将该字符串作为返回值。任何与此相关的帮助或链接对我来说都很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:02:12.647

这是通用库中的方法，还是自定义库中的方法？更常见的可以在[pinvoke.net](http://www.pinvoke.net/)上找到。如果没有，MSDN 有一篇关于[Platform Invoking](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx) using的文章[`DllImport`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute%28v=vs.71%29.aspx)可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:02:09.913

您将使用[Platform Invoke](http://msdn.microsoft.com/en-us/library/fzhhdwae.aspx)来调用您的 C 函数。基本上，你会声明一个`extern`方法：

```
[DllImport("yourlibrary.dll")]
static extern YourFunctionName(...) 
```

正确编组的语义有点棘手，但是这个[数据类型](http://msdn.microsoft.com/en-us/library/ac7ay120.aspx)页面应该可以帮助您入门。

# sql-server - 无论顺序如何，两列的唯一约束

> ID：11414976
> 
> 赞同：4
> 
> 时间：2012-07-10T13:59:19.773
> 
> 标签：sql-server, unique-constraint

我有以下表定义：

```
CREATE TABLE [Car] 
(
   CarID int NOT NULL PRIMARY KEY IDENTITY(1,1),
   FirstColorID int FOREIGN KEY REFERENCES Colors(ColorID),
   SecondColorID int FOREIGN KEY REFERENCES Colors(ColorID),

   UNIQUE(FirstColorID, SecondColorID)
) 
```

我希望这两个颜色列是唯一的，无论它们出现在什么组合中。

例如尝试：

```
INSERT INTO Car (FirstColorID, SecondColorID) VALUES (1, 2); --should succeed 
```

但是在第一个记录存在并且颜色反转后尝试相同应该失败：

```
INSERT INTO Car (FirstColorID, SecondColorID) VALUES (2, 1); --should violate constraint/check 
```

我已经使用高级代码解决了这个问题，但我宁愿直接在数据库中强制执行约束，最好不涉及触发器之类的东西。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:35:08.453

通过设置约束来完全避免该问题`SecondColorID >= FirstColorID`。它对可以进入数据库的内容产生了限制，这超出了您正在寻找的内容。但是，如果您想查询某种颜色模式，那么这个额外的要求将很有用，因为您只需查找`SecondColorID = 1 AND FirstColorID = 2`而不是编写额外的逻辑来解释具有不可预测顺序的两个颜色 ID。

```
CREATE TABLE [Car] 
(
   CarID int NOT NULL PRIMARY KEY IDENTITY(1,1),
   FirstColorID int FOREIGN KEY REFERENCES Colors(ColorID),
   SecondColorID int FOREIGN KEY REFERENCES Colors(ColorID),

   UNIQUE(FirstColorID, SecondColorID)
)

ALTER TABLE [Car] WITH CHECK
    ADD CHECK (SecondColorID >= FirstColorID); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:38:25.967

您也许可以创建计算列，例如：

```
CREATE TABLE [Car] 
(
   CarID int NOT NULL PRIMARY KEY IDENTITY(1,1),
   FirstColorID int, --FOREIGN KEY REFERENCES Colors(ColorID),
   SecondColorID int, --FOREIGN KEY REFERENCES Colors(ColorID),
   xColor As Cast(Case When FirstColorID > SecondColorID Then FirstColorID Else SecondColorID End as varChar) + ',' + 
        Cast(Case When FirstColorID <= SecondColorID Then SecondColorID Else FirstColorID End as varChar),
   UNIQUE(xColor)
) 
```

更新（你应该先测试一下，我只是做了非常快速的测试）

**理念**：

整数是 4 个字节。如果我将 2 个整数放在一起 - 我得到 8 个字节。如果我订购它们 - 我会得到唯一的 BigInt 值（8 个字节）。

所以我做什么：

1.  我确保它们的顺序正确
2.  我将 32 位的字节向左移动（所以只需乘以 4294967296 我就得到了我想要的）
3.  我进行逻辑 OR- 所以我得到 8 字节 BigInt 值，它应该始终是唯一的！

所以：

```
CREATE TABLE [Car] 
(
   CarID int NOT NULL PRIMARY KEY IDENTITY(1,1),
   FirstColorID int, --FOREIGN KEY REFERENCES Colors(ColorID),
   SecondColorID int, --FOREIGN KEY REFERENCES Colors(ColorID),
   xColor As 
       Case When FirstColorID > SecondColorID Then 
            Cast(FirstColorID as BigInt) * Cast(4294967296 as BigInt) | Cast(SecondColorID as BigInt)
        Else 
            Cast(SecondColorID as BigInt) * Cast(4294967296 as BigInt) |  Cast(FirstColorID as BigInt)
        End
  UNIQUE(xColor)
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:38:25.987

创建计算列，使ComputedFirstColorID 是FirstColorID 和SecondColorID 的较低者，ComputedSecondColorID 是FirstColorID 和SecondColorID 的较高者。现在指数

```
CREATE UNIQUE NONCLUSTERED INDEX index_name ON Car (ComputedFirstColorID, ComputedSecondColorID) 
```

应该没事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:23:23.987

```
CREATE UNIQUE NONCLUSTERED INDEX index_name ON Car (FirstColorID, SecondColorID) 
```

[http://msdn.microsoft.com/en-us/library/ms188783.aspx](http://msdn.microsoft.com/en-us/library/ms188783.aspx)

# sql-server-2008 - TFS 的 SQL 设计模式？

> ID：11414979
> 
> 赞同：0
> 
> 时间：2012-07-10T13:59:26.730
> 
> 标签：sql-server-2008, tfs

我正在使用 TFS 对我的 SQL 进行版本控制，但我似乎无法弄清楚如何在设计模式下通过 VS 2010 创建表。我通常在 SSMS 中设计表格，然后将脚本创建到查询窗口或剪贴板，然后将脚本粘贴到 VS 2010 的查询窗口中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:05:36.387

Visual Studio 2010 中没有设计器，但 SSDT（Visual Studio 2012 数据库项目）中有设计器

这是以前的一篇关于它的帖子。 [VS2010 数据库项目有表设计器吗？](https://stackoverflow.com/questions/3610316/is-there-a-table-designer-for-vs2010-database-project)

这是关于如何在 SSDT 中使用它的链接（如果要使用它，请确保下载 PowerTools 以获取架构视图和其他功能） [http://msdn.microsoft.com/en-us/library /hh272680(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/hh272680(v=vs.103).aspx)

# user-interface - 故事板过渡将设备变为纵向

> ID：11414983
> 
> 赞同：1
> 
> 时间：2012-07-10T13:59:37.207
> 
> 标签：user-interface, rotation, orientation, modalviewcontroller, uiviewanimationtransition

在我的应用程序中，故事板控制 2 个视图。主视图和反面视图都是横向的，但是当我使用模态函数在两者之间转换时，它会将我的反面视图变成纵向我使用代码

`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation { return UIInterfaceOrientationIsLandscape(interfaceOrientation); }`

以横向显示应用程序，但它变成纵向！我的 plist 和目标摘要都说 lanscape。

所有帮助将不胜感激！

# seam - 如何在焊缝/接缝中监听对话超时

> ID：11414986
> 
> 赞同：0
> 
> 时间：2012-07-10T13:59:50.933
> 
> 标签：seam, seam-conversation, weld

目前正在开发一个包含多个选项卡式对话的应用程序。当对话超时时，我想关闭与该对话关联的选项卡。

有没有办法监听对话超时，还是我只需要继续轮询并检查对话是否超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:51:01.327

将 Destroy 注释用于您想知道对话超时或结束的转换范围 bean 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:31:54.677

```
@Destroy @Remove
public void destroy() {
  //Close tabs
} 
```

# android - 应该使用什么标头将 GZIP 压缩 JSON 从 Android 客户端发送到服务器？

> ID：11414987
> 
> 赞同：31
> 
> 时间：2012-07-10T13:59:53.023
> 
> 标签：android, json, servlets, http-headers, gzip

这个问题是对[这里](https://stackoverflow.com/questions/11402813/how-to-compress-a-jsonobject-send-it-over-http-in-android)问题的扩展。我正在使用下面复制的代码来 GZIP 压缩[一个](https://stackoverflow.com/a/7153945/932307)`JSONObject`.

```
String foo = "value";
ByteArrayOutputStream baos = new ByteArrayOutputStream();
GZIPOutputStream gzos = null;

try {
    gzos = new GZIPOutputStream(baos);
    gzos.write(foo.getBytes("UTF-8"));
} finally {
    if (gzos != null) try { gzos.close(); } catch (IOException ignore) {};
}

byte[] fooGzippedBytes = baos.toByteArray(); 
```

我正在使用 a`DefaultHttpClient`将此压缩的 JSONObject 发送到服务器（代码在我的控制范围内）。

**我的问题**

我应该在我的`request`? 我`request.setHeader("Content-type", "application/json");`用于将 JSON 发送到服务器？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-10T23:14:51.830

要通知服务器您正在发送 gzip 编码的数据，请发送[Content-Encoding](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.11)标头，而不是[Accept-Encoding](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-10T22:38:20.697

[此](https://stackoverflow.com/a/1576513/181714)答案显示您需要设置一个标头，指示您正在发送压缩数据：

```
HttpUriRequest request = new HttpGet(url);
request.addHeader("Content-Encoding", "gzip");
// ...
httpClient.execute(request); 
```

答案还显示了如何处理传入的压缩数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-31T07:40:29.263

*   `Content-Type:application/json`- 告诉 http 调用中的内容数据类型
*   `Content-Encoding: gzip`- 告诉正在使用什么压缩。

`application/json`or or `text/xml`or other type can becompressed as gzip and send to receiver and with `Content-Type`header only,接收者将识别传入数据的类型`json/xml/text`，然后转换回json/xml/text类型的对象。

仅使用`Content-Encoding`标头的接收器将识别传入的数据正在被 gzip 压缩。然后接收器需要解压缩传入的数据并使用它。

# android - 谷歌地图没有显示在手机上，但可以在模拟器上运行

> ID：11414988
> 
> 赞同：1
> 
> 时间：2012-07-10T13:59:54.800
> 
> 标签：android, google-maps, gps

我最近使用 eclipse 制作了一个 Android 应用程序。它在我的模拟器中运行良好。

但是当我使用 Eclipse 上的导出向导导出我的应用程序时，它会输出 .apk 和证书文件，我将它复制到我的 Android 手机，但地图没有显示，它只显示灰色瓷砖。

它具有显示具有当前纬度和经度的 Toast 的功能。它显示在我的模拟器上，但不在我的手机中。

它还会显示一个 Toast，用于检查设备的 GPS 是否处于活动状态。它适用于我的模拟器和手机。

我不知道我的应用程序有什么问题。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:08:09.843

问题可能在于不同证书的不同 Maps API 密钥。请记住，地图 API 密钥基于证书，这意味着您应该拥有一个基于调试证书的密钥 - 您将使用它进行调试，一个基于发布证书。如果您尝试在设备上运行使用调试证书签名的应用程序版本，它应该可以工作。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:08:18.987

您在模拟器上使用的密钥仅用于调试目的：您需要向 Google 询问您的应用程序的唯一密钥，并使用它才能在您的设备上使用地图。

# azure - Windows Azure 流量管理器是单点故障吗？

> ID：11414989
> 
> 赞同：3
> 
> 时间：2012-07-10T13:59:55.800
> 
> 标签：azure

Windows Azure 流量管理器的文档不多。

它的主要用途（对我而言）是通过在单个流量管理器策略后面聚合多个服务实例来为服务提供弹性。

谁能解释 Azure 流量管理器本身是否代表单点故障？Azure 流量管理器失败的可能性有多大？它是否降低了失败的风险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T20:52:49.060

根据[此处](https://azure.microsoft.com/en-us/documentation/articles/traffic-manager-overview/)发布的信息，Windows Azure 流量管理器 (WATM) 仍处于 CTP 中，因此以下信息在最终发布时可能会发生变化。由于大多数 Windows Azure 服务具有 99.9x% 的可用性 SLA，因此它也可能具有相同/相似的 SLA。

为了使 WATM 具有高可用性，增加了几个主要组件，即 DNS 解析、服务健康监控、管理等，这些组件部署到全球多个数据中心并具有高可用性。这种设计解决了单点解析 DNS 名称的问题，并降低了单点故障的风险。

同样在 WATM 失败的不太可能的情况下，您可以将您的 CNAME 从 *.trafficmanager.net 重定向到 servicenameN.cloudapp.net。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-17T15:22:44.837

Azure 流量管理器具有冗余部署的灾难恢复策略，因此它不是单点故障。

# c# - 如何从下拉列表中获取静态值并传递给数据库 OnSelectedIndexChanged

> ID：11414992
> 
> 赞同：-4
> 
> 时间：2012-07-10T13:59:59.790
> 
> 标签：c#, asp.net, select, drop-down-menu

我有两个下拉列表。在第一个下拉列表中必须只传递静态值，如下所述。基于第一个下拉列表值，第二个下拉列表应自动列出相应的值。之后应该加载 Gridview。

```
<asp:DropDownList ID="DDL1" runat="server" AutoPostBack="True" OnSelectedIndexChanged="DDL1_SelectedIndexChanged">
<asp:ListItem Value="%">All</asp:ListItem>
<asp:ListItem Value="Test1">Test1</asp:ListItem>
<asp:ListItem Value="Test2">Test2</asp:ListItem>
<asp:ListItem Value="Test3">Test3</asp:ListItem>
</asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:15:56.270

跟着这些步骤。

1.  为第一个下拉列表创建一个事件处理程序示例：

    ```
    Private void DDL1_SelectedIndexChanged(object sender,EventArgs e)
    {
        // Here you bind your second dropdownlist 
    } 
    ```

2.  然后在第二个下拉列表事件处理程序中，让它的名字是 DDL2

    ```
    Private void DDL2_SelectedIndexChanged(object sender,EventArgs e)
    {
       // Here you bind your Grid View
      // Put your logic here
    } 
    ```

# windows-phone-7 - 在发布模式下显示错误

> ID：11414994
> 
> 赞同：0
> 
> 时间：2012-07-10T14:00:03.583
> 
> 标签：windows-phone-7, windows-phone-7.1

在我的应用程序中，我添加了具有正确 DLL 和命名空间的 Listpicker 和 Datepicker，而我在调试模式下构建它运行良好，但在发布模式下它在生成的页面 (Mainpage.gics) 中显示错误。错误消息是“类型或名称空间名称 'ListPicker' 在名称空间 'Microsoft.Phone.Controls' 中不存在（您是否缺少程序集引用？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:05:37.640

这也发生在我的一个项目上，我所做的只是从调试更改为发布。

我通过简单地删除产生问题的提到的引用并将它们再次添加到项目中来修复它（只需简单的 dll 或通过 NuGet，无论您使用的是哪个）。那解决了它。

# c# - 通过网络传递位图/JPEG

> ID：11414998
> 
> 赞同：1
> 
> 时间：2012-07-10T14:00:21.960
> 
> 标签：c#, networking, graphics, jpeg

我正在尝试创建一个远程桌面式程序，并且目前正在尝试获取远程 PC 上的图像，并将其发送回我的客户端 PC 以更新其图像（这种情况每 2-3 秒发生一次。 )

我目前得到这样的桌面图像：

```
// Set up a bitmap of the correct size
        Bitmap CapturedImage = new Bitmap((int)SystemInformation.VirtualScreen.Width,
            (int)SystemInformation.VirtualScreen.Height, System.Drawing.Imaging.PixelFormat.Format16bppRgb565);

        // Create a graphics object from it
        System.Drawing.Size size = new System.Drawing.Size((int)SystemInformation.VirtualScreen.Width, (int)SystemInformation.VirtualScreen.Height);

        using (Graphics gr = Graphics.FromImage(CapturedImage))
        {
            // copy the entire screen to the bitmap
            gr.CopyFromScreen(0, 0, 0, 0,
                size, CopyPixelOperation.SourceCopy);
        }

        EncodeToJPEG(CapturedImage); 
```

EncodeToJPEG 看起来像这样：

```
var qualityEncoder = Encoder.Quality;
        var quality = (long)0;
        var ratio = new EncoderParameter(qualityEncoder, quality );
        var codecParams = new EncoderParameters(1);
        codecParams.Param[0] = ratio;
        var jpegCodecInfo = GetEncoder(ImageFormat.Jpeg);
        capturedImage.Save(@"c:\Test.jpg", jpegCodecInfo, codecParams); // Save to JPG 
```

我的问题来自 Save 方法。我想知道是否有办法暂时存储这个 JPG 足够长的时间让我让它通过网络发回，而不是保存到文件中？比如，我可以返回一个压缩 JPG 的 Image 对象吗？或者这是不可能的？

我还听说，出于这些目的，将图像分割成块，检查它们的增量并仅发回更改是更快更新此类图像的最有效方法。如果有人对该部门有任何指示，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:05:20.150

编码器具有 OVERLOAD 名称的方法 Save

要传递的参数是 Stream

您将保存到 MemoryStream 以保存内存块

没有文件 ！！

最好的 ，

普拉桑特 :)