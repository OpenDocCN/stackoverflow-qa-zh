# StackOverflow 问答 12408000-12408999

# jsf-2 - 包含带有复合组件的未知 id

> ID：12408000
> 
> 赞同：1
> 
> 时间：2012-09-13T13:59:00.503
> 
> 标签：jsf-2, composite-component

我在表单中使用了复合组件，并且我想使用ajax调用来，当复合组件值发生变化时，要重置相关字段的模型值并再次渲染相应的组件（空） . 但似乎我只能为组件设置渲染；不是为了另一个；我不断得到一个`<f:ajax> contains an unknown id 'ticketForm:gfhId'`.

我有一个复合组件`loc:Location`（简化）

```
<!DOCTYPE...
<html...
<h:body>
  <composite:interface>
    <composite:attribute name="visibleFieldValue" required="true" />
    <composite:attribute name="hiddenFieldValue" required="true" />
    <composite:clientBehavior name="changeLocation" event="click" targets="updateButton deleteButton"/>
  </composite:interface>
  <composite:implementation>
    <div id="#{cc.clientId}">
      <h:inputText id="visibleId" value="#{cc.attrs.visibleFieldValue}"
        readonly="true" onfocus="#{rich:component('popUpPnl')}.show('', {top:'100px', left:'250px'});"/>
      <h:inputHidden id="hiddenId" value="#{cc.attrs.hiddenFieldValue}"
        converter="es.caib.gesma.gesman.data.converter.LocationConverter" />
      <a4j:commandButton id="deleteButton"
        image="/resources/images/icons/textfield_delete.png" alt="Borrar"/>
      <h:commandButton id="updateButton" value="Update"/>

      ...
    </composite:implementation>
  </body>
</html> 
```

该组件在表单内部使用`ticketForm`如下：

```
<loc:location id="locationId"
  hiddenFieldValue="#{ticketCtrl.ticket.location}"
  visibleFieldValue="#{ticketCtrl.ticket.locationDescription}">
  <f:ajax event="changeLocation" render="ticketForm:gfhId" execute="@this"
    listener="#{ticketCtrl.locationListener}"/>
</loc:location> 
```

将渲染设置为`@all`或`@form`导致不显示异常，但`gfhId`不渲染组件（我认为它仅将其应用于复合组件）。

为了进行比较，我使用相同形式的 inputText 组件设置了所需的行为：

```
<h:inputText id="contactId" value="#{ticketCtrl.ticket.contactPerson}">
  <a4j:ajax event="change" render=":ticketForm:gfhId"
    execute="@this" listener="#{ticketCtrl.locationListener}"/>
</h:inputText> 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:27:00.357

和of中的所有相对客户端 ID（即不以 开头的`:`）都是相对于父组件解析的。复合组件隐含地是 a 。所以它基本上是在 的上下文中寻找，但没有。`execute``render``<f:ajax>``NamingContainer``NamingContainer``ticketForm:gfhId``<cc:implementation>`

请改用绝对客户端 ID。

```
<f:ajax ... render=":ticketForm:gfhId" /> 
```

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)

# iphone - Iphone 应用程序 - Cocos2D - 创建/显示第二个视图

> ID：12408001
> 
> 赞同：1
> 
> 时间：2012-09-13T13:59:03.920
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

我需要帮助，因为我被困在我的 Iphone 应用程序项目中 - 我试图了解我必须添加到我的代码中的内容（以及在哪里），以便创建第二个视图（显示应用程序选项或绘制图表）并显示它。我看到的所有教程都提到了界面设计器，而我想以编程方式进行（我使用 cocos2D 库）。这听起来像是一个“似曾相识”的问题，但我找不到明确的解释，我很确定这会对很多人有所帮助。欢迎任何提示！非常感谢各位M。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:00:26.810

这完全取决于您是要向当前存在的根控制器添加子视图还是重新建立新的视图控制器。

您可能需要将要添加的视图的标题添加到您尝试执行此操作的实现文件中。

这是重新建立新视图控制器方式的代码：

```
#import "FirstViewController.h"
...

UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

UIViewController *mvc = [[FirstViewController alloc]initWithNibName:@"FirstViewController" bundle:nil]; //Allocate the View Controller

window.rootViewController = mvc;   //Set the view controller
[window makeKeyAndVisible]; 
```

另一种方法：

```
#import "FirstViewController.h"
...

UIViewController *new = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle: [NSBundle mainBundle]];
[self.view addSubview: new.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T16:35:00.837

```
AppController *app =  (AppController*)[[UIApplication sharedApplication] delegate];    
 [app.navController.view addSubview:newView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:42:04.670

如果您的目标是创建 cocos2d 的第二个视图，那么答案很简单：您不能。

这是一个允许多个 cocos2d 视图的计划功能，但到目前为止还没有实现。

# c++ - 通过引用传递 const 对象问题

> ID：12408004
> 
> 赞同：3
> 
> 时间：2012-09-13T13:59:16.493
> 
> 标签：c++, parameter-passing

假设我们有以下代码：

```
#include <iostream>

class Person{
public:
    Person(int age);
    int get_a();
private:
    int a;
};

Person::Person(int age)
{
    a = age;
}

int Person::get_a()
{
    return a;
}

void Show_Age(Person P)
{
    std::cout<<P.get_a()<<std::endl;
}

int main() {

    Person P(10);
    Show_Age(P);
    return 0;
} 
```

现在假设我们有一个重的对象，我们应该通过引用传递 Person，所以我们继续：

```
void Show_Age(Person &P)
{
    std::cout<<P.get_a()<<std::endl;
} 
```

没有问题，但一个很好的观察是 P 应该是 const，我们尝试使用它：

```
void Show_Age(const Person &P)
{
    std::cout<<P.get_a()<<std::endl;
} 
```

编译器故障：

```
error: passing ‘const Person’ as ‘this’ argument of ‘int Person::get_a()’ discards qualifiers [-fpermissive] 
```

如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T14:00:34.050

您应该标记`get_a` `const`以便编译：

```
class Person{
public:
    Person(int age);
    int get_a() const;
private:
    int a;
};

int Person::get_a() const
{
    return a;
} 
```

这样做告诉编译器成员函数不会修改对象的状态，使其与`const`指针和引用兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:01:25.413

您还必须将其标记`Person::get_a`为常量：

```
class Person
{
    // ...

    int get_a() const;

    // ...
}; 
```

这告诉编译器`get_a`不修改对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:04:49.233

const 正确性是病毒式的，你应该从内向外开始（即每个类都应该将不修改对象的成员函数标记为`const`，允许调用者在 const 对象（或对 const 对象的引用）上使用它们。

# python - 将对象导入python中的命名空间而不重新定义？

> ID：12408005
> 
> 赞同：0
> 
> 时间：2012-09-13T13:59:18.227
> 
> 标签：python, namespaces

我想知道是否可以将对象导入到名称空间中，例如类等。因此可以引用它。基本上在这里删除显式的重新定义：

```
import Bar

class Foo:
   X = Bar.X
   Y = Bar.Y
   Z = Bar.Z 
```

我基本上对能够从 Foo 引用 Bar.X 等感兴趣。from ... import ... 也没有按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:05:59.310

我觉得你永远不需要这样做（这对我来说是一个非常糟糕的主意）。但是，如果您坚持，这是我的尝试：

```
import module
class Foo(object):
    pass #Other stuff here

for k,v in module.__dict__.items():
    try:
       setattr(Foo,k,v)
    except AttributeError:
       pass  #read-only attributes? 
```

当然，由您（程序员）确保您不会`Foo`用 的属性覆盖 的任何属性`module`。

* * *

请注意，如果您只想在导入时更改模块的名称，您可以这样做：

```
import Foo as Bar 
```

或者你可以`from import ... as name_in_this_module`。

例如，假设您有一些特定于 Windows 的东西和一个自定义模块，它将在 Unix 上提供相同的功能：

```
try:
    import windows_module as sys_dep_mod
except ImportError:
    import unix_module as sys_dep_mod

def myfunc(baz):
    bar = sys_dep_mod.func(baz)
    #do something with bar
    #return something 
```

# c++ - 比较 C++ 程序应该相同运行的配置文件以检测分歧

> ID：12408006
> 
> 赞同：2
> 
> 时间：2012-09-13T13:59:20.050
> 
> 标签：c++, debugging, profiling, valgrind, gprof

我有一个 C++ 二进制文件（GNU LilyPond），它偶尔会为相同的输入生成不同的输出。对二进制文件进行 valgrinding 无助于追踪此模糊发生的位置，也无助于读取 gprof 数据。非常有用的是一个分析工具，它可以比较同一程序在同一输入上的多次运行，并识别参数和函数返回值的分歧（甚至可能是函数被调用的次数和/或哪些函数被调用什么时候）。多个程序运行之间的一种智能“差异”文件。调试数据太大而无法手动发现，因此某种类型的合成工具会非常有帮助。有谁知道可以完成此类任务的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:24:02.847

我所知道的最接近的东西是一个类似代码覆盖的工具，但我最近还没有使用足够多的工具来提出建议。

不过，我们或许可以做出一些猜测。最可能的候选者是未定义的行为、未初始化的内存以及*可能*的浮点数学。

如果您启用尽可能多的警告，您可能会检测到某些形式的 UB，如果这恰好是原因，那么您可能会检测到之前偷偷通过的 UB。

否则，我认为您将被困在必须在各个点转储程序状态并比较每个检查点以查看分歧发生的位置。

# php - 在 div 中显示成功消息

> ID：12408007
> 
> 赞同：0
> 
> 时间：2012-09-13T13:59:22.173
> 
> 标签：php, forms

我在第 1 页处理表单提交的数据的页面上得到了这个代码的和平。使用*sprintf*在第 1 页显示成功消息。至于现在，成功消息显示在第 1 页的顶部。我如何显示我在第 1 页上的 div 中的成功消息。

```
$params = array(
            ':restrict' => $this->options['restricted'],
            ':name'     => $this->options['name'],
            ':email'    => $this->options['email'],
            ':level'    => $this->options['user_level'],
            ':id'       => $this->id
        );
        $sql = "UPDATE `login_users` SET `restricted` = :restrict, `name` = :name, `email` = :email, `user_level` = :level WHERE `user_id` = :id;";
        parent::query($sql, $params);
        $result = sprintf("<div class='alert alert-success'>"._('User information updated for')." <b>%s</b> (%s).</div>",$this->options['name'], $this->options['username']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:04:16.600

要么您必须使用 jquery，要么您必须在要显示此消息的位置使用此语句

```
$result = sprintf("<div class='alert alert-success'>"._('User information updated for')." <b>%s</b> (%s).</div>",$this->options['name'], $this->options['username']); 
```

# jasper-reports - 折线图中的超链接

> ID：12408008
> 
> 赞同：1
> 
> 时间：2012-09-13T13:59:28.403
> 
> 标签：jasper-reports, ireport, jasperserver

我在 iReport/JasperReports Server Professional 4.7 的折线图中添加了超链接和工具提示。他们工作，但我似乎有并发症。如何将超链接和工具提示与线上的实际绘制点相关联？我不得不非常缓慢而小心地在屏幕上扫过我的鼠标才能找到它们。当我将鼠标悬停在我放置绿点的位置时，我的行上第四个点（蓝色箭头）的工具提示和超链接就会显示出来。

![在此处输入图像描述](../Images/64f855b71b1350ae2dda9fa23f55db2c.png)

# php - 在 xslt 转换中保留节点

> ID：12408009
> 
> 赞同：2
> 
> 时间：2012-09-13T13:59:33.203
> 
> 标签：php, xml, xslt, xpath

```
<root>
<tag>
  <form>
   some html form will be here
  </form>

</tag>
<tag>
  some visible data
</tag> 
```

**xslt**

```
<xsl:template match="tag">
    <div id="page-base">
      <xsl:apply-templates />
    </div>
  </xsl:template> 
```

**生产**

```
<div id="page-base">

</div>
<div id="page-base">
 some visible data
</div> 
```

**期望的输出**

```
<div id="page-base">
 <form>
   some html form will be here
  </form>
</div>
<div id="page-base">
 some visible data
</div> 
```

**编辑：**

如果`tag`嵌套在`tag`模板规则适用的元素中，它将用模板替换标签并复制模板不匹配的其他元素。请看例子。`tag`可以任意嵌套

```
<root>
        <tag>
          <form>
           some html form will be here
          </form>
          <tag>
            arbitrary nested tags
          </tag>    
        </tag>
        <tag>
          some visible data
        </tag>
</root> 
```

**预期结果**

```
 <div id="page-base">
     <form>
       some html form will be here
      </form>
      <div id="page-base">
       arbitrary nested tags  
      </div>
  </div>
  <div id="page-base">
     some visible data
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:05:13.287

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="tag">
  <div id="page-base">
    <xsl:copy-of select="node()"/>
  </div>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <tag>
        <form>
   some html form will be here
        </form>
    </tag>
    <tag>
  some visible data
    </tag>
</root> 
```

**产生想要的正确结果：**

```
<div id="page-base">
   <form>
   some html form will be here
        </form>
</div>
<div id="page-base">
  some visible data
    </div> 
```

**说明**：

您的代码缺少一些东西来复制匹配`tag`元素的主体。

这个“东西”就是**[`xsl:copy-of`](http://www.w3.org/TR/1999/REC-xslt-19991116#copy-of)**指令。

* * *

**更新**：

OP改变了他的问题，这需要不同的解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*"><xsl:apply-templates/></xsl:template>

 <xsl:template match="tag">
  <div id="page-base">
    <xsl:apply-templates/>
  </div>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于新提供的 XML 文档时：**

```
<div id="page-base">
   <form>
           some html form will be here
          </form>
   <div id="page-base">
            arbitrary nested tags
          </div>
</div>
<div id="page-base">
          some visible data
        </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:04:47.677

添加[复制规则](http://www.w3.org/TR/xslt#copying)：

```
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template> 
```

这将简单地复制任何与更具描述性的模板不匹配的节点。由于匹配规则的包罗万象，其他规则将优先，除非您调整它们的优先级，在这种情况下，您应该为该规则分配比任何其他规则低的[优先级。](http://www.w3.org/TR/xslt#conflict)

如果您只想复制树的某些部分，则应为其添加单独的模式，您必须在调用应用该模板时指定该模式。

```
<xsl:template match="@*|node()" mode="copy">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" mode="copy"/>
  </xsl:copy>
</xsl:template>
<xsl:template match="tag">
  <div id="page-base">
    <xsl:apply-templates mode="copy"/>
  </div>
</xsl:template> 
```

如果您使用的是 XSLT 2.0，您还可以使用[`copy-of`](http://www.w3.org/TR/xslt20/#copy-of). 但上述方法仍然更加灵活，因为它允许您从副本中省略或转换某些节点。

# qt - QSlider 在小部件中的位置

> ID：12408011
> 
> 赞同：1
> 
> 时间：2012-09-13T13:59:40.850
> 
> 标签：qt, qslider

我试图在 Qt 中的两个滑块之间画一条线。当我移动任何一个滑块时，我希望线条移动，使其始终连接两个滑块。见附图![在此处输入图像描述](../Images/8d30d639a05ca84da0aef6ec4b543af8.png)

（我已经画了线来说明 - 不是以编程方式）我该怎么做？问题在于识别滑块的位置。我如何获得他们的位置？在小部件内还是在屏幕内？一旦我得到他们的位置，我将能够划清界限。

有任何想法吗？如果您希望我发布代码，请告诉我，但基本上，我只有两个 QSlider - 一个在顶部，一个在底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:36:43.870

通过查看 Qt 文档，可以使用以下方法从当前 silder 值计算像素位置： QStyle::sliderPositionFromValue [Qt 文档](http://doc-snapshot.qt-project.org/4.8/qstyle.html#sliderPositionFromValue)

# mysql - 获取除 SQL 结果集之外的所有行

> ID：12408013
> 
> 赞同：2
> 
> 时间：2012-09-13T13:59:51.350
> 
> 标签：mysql, sql

这是数据库中的数据

```
robot_id    sequence_no x            y
ABC1234E    1         8888         9999
ABC1234E    2         8888         9999
ABC1234E    3         8888         9999 
ABC1234E    4         8888         9999
 BBC1        1        8888         9999
  BBC2      1         8888         9999
  BBC2      2         8888         9999
  BBC3      1         8888         9999 
```

......

我希望排除这个结果集：

```
SELECT * FROM table WHERE robot_id=ABC1234E AND sequence_no='1' 
```

这是我应该得到的：

```
 robot_id      sequence_no           x             y
ABC1234E                2         8888         9999
ABC1234E                3         8888         9999 
ABC1234E                4         8888         9999
    BBC1        1         8888         9999
  BBC2      1         8888         9999
  BBC2      2         8888         9999
  BBC3      1         8888         9999 
```

......

机器人 id 和 sequence_no 是该表中的主键

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:01:42.537

您将使用您的查询，除非您只是将`WHERE`子句更改为说您想要所有`robot_id=ABC1234E`和`WHERE sequence_no does not equal = 1`。如果您只有一个`robot_id`值，您将使用：

所以你的查询是：

```
SELECT *
FROM yourTable
WHERE robot_id='ABC1234E' 
   AND sequence_no !=1 
```

或者

```
SELECT *
FROM yourTable
WHERE robot_id='ABC1234E' 
   AND sequence_no <> 1 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/cf116/3)

但是，如果您的数据将包含`robot_id`您无法使用的其他值：

```
select *
from yourtable t1
where not exists (SELECT sequence_no
                FROM yourTable t2
                WHERE robot_id='ABC1234E' 
                  and sequence_no = 1
                   and t1.robot_id = t2.robot_id
                   and t1.sequence_no = t2.sequence_no) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/7ea7e/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:02:21.610

```
SELECT * FROM table WHERE robot_id=ABC1234E AND sequence_no<>'1' 
```

如果您有更复杂的查询，则可以根据您的 RDBMS 使用“减号”查询。喜欢这里：[http ://www.techonthenet.com/sql/minus.php](http://www.techonthenet.com/sql/minus.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:02:38.337

```
SELECT *
FROM table
WHERE robot_id NOT LIKE 'ABC1234E' 
 OR sequence_no <> 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:22:27.857

只是为了好玩，您还可以使用（ANSI 标准）`except`子句（`minus`在 Oracle 中），它与您提出问题的方式“相似”：

```
select *
from the_table
except
select *
from the_table
where robot_id = 'ABC1234E' 
  and sequence_no = 1; 
```

不过，这可能会比其他解决方案慢 - 但我想我会为了完整性而包含它。

（请注意，字符文字必须用单引号括起来，而数字则不需要 - 就像您在问题中所做的那样）

# .net - 十进制作为主键在 Dev (Win7/64bit) 中有效，但在生产中无效 (Win2008R2/64bit) 公共语言运行时检测到无效程序

> ID：12408014
> 
> 赞同：6
> 
> 时间：2012-09-13T13:59:57.710
> 
> 标签：.net, windows-services, ef-code-first, entity-framework-4.3

我的 Windows 服务是一个 .NET 应用程序。该服务依赖于我使用 EF 4.3 Code First 的数据访问。当我的服务运行并尝试访问数据时，我收到以下错误。

> FullPurgeAndReplace() 中发生错误：System.InvalidProgramException：公共语言运行时检测到无效程序。at System.Data.Entity.DynamicProxies.MOMInventoryItem_3ED5D5176D2C03867C62DD8E4381A882350CFD9CD931F3CD551623A6EF5C4D8E.set_Id(Decimal ) at lambda_method(Closure , Shaper ) at System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly[TEntity](Func 1.ReadNextElement(Shaper shaper) at System .Data.Common.Internal.Materialization.Shaper 1..ctor(IEnumerable 1 source) ... 删除更多`2 constructEntityDelegate, EntityKey entityKey, EntitySet entitySet)
> at lambda_method(Closure , Shaper ) at System.Data.Common.Internal.Materialization.Coordinator``1.SimpleEnumerator.MoveNext() at System.Collections.Generic.List``1 collection)
> at System.Linq.Enumerable.ToList[TSource](IEnumerable`

在同一台机器上，我有一个 Web 应用程序，它依赖于同一个数据访问项目并且运行没有问题。对于 IIS 中的那个网站，我确实为相应的应用程序池选中了启用 32 位应用程序。

我研究了这个问题，发现它可能与错误中的实体（MOMInventoryItem）具有十进制主键这一事实有关。我别无选择，因为我正在与现有系统集成。但是，这应该是一年多前[EF 4.0 的一个已知问题，](http://connect.microsoft.com/VisualStudio/feedback/details/620031/invalidprogramexception-using-entityframework-poco-template-table-w-decimal-primary-key#)我希望它现在可以解决。

这是我的实体的一些代码：

```
[Table("STOCK")]
public class MOMInventoryItem
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.None), Column("STOCK_ID")]
    public virtual decimal Id { get; set; } 
```

**同样，这可以通过托管在 IIS 中的 MVC 应用程序正常工作，但作为 Windows 服务失败，两者都在同一 Windows 2008 R2 服务器上。它也适用于我的 DEV 机器（Win7/VS11）。** 我的问题是什么，我该如何永久解决或解决它？

一如既往，我们非常感谢您的帮助，并在可能的情况下给予回报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:31:34.430

尝试将启动项目设置为 32 位，这应该可以防止明显的 64 位问题。并解释为什么它在 MVC 上运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:42:57.660

***注意：在我得到更好的答案之前，以下是对我有用的解决方法。更好的答案是将 Windows 服务项目编译为针对 x86 而不是 Any CPU。这仍然不能回答为什么 Windows Server 2008 R2 与 Win 7 不同，但这是不同日子的不同问题。***

--

我找到了解决我的问题的方法。我将我的 Key 更改为 int （因为无论如何这确实是存储在 DB 中的内容，尽管技术上是十进制列）并且我在 Column 属性中明确提供了 TypeName = "Decimal"。

```
[Table("STOCK")]
public class MOMInventoryItem
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity), Column("STOCK_ID", TypeName = "Decimal")]
    public virtual int Id { get; set; } 
```

就我而言，我从不写信给这张桌子——尽管我将来可能需要这样做。我不能 100% 确定这将如何影响写入行，但由于该列被标记为 DatabaseGenerated，我假设它不会成为问题。

我确实认为如果我以 x86 而不是 Any CPU 为目标，那么它可能会解决它，我会按照@leppie 的建议尝试下一个

尽管如此，我仍然很想知道为什么会出现这种类型的错误——公共语言运行时检测到一个无效程序。

# knockout.js - 防止项目在其他（父/子）元素中“可放置”

> ID：12408015
> 
> 赞同：2
> 
> 时间：2012-09-13T14:00:06.163
> 
> 标签：knockout.js, knockout-sortable

我使用 knockout-sortable.js 让用户拖放项目以赋予它们不同的顺序，但是当我的页面上有多个“拖放区”时我遇到了问题。我有嵌套集，所有这些都是可排序的，但*不可*互换。

我的代码：

```
 <div class="sortable" data-bind="sortable: blueprint.pages">
          <tr><td>Blabla</td></tr>
    </div> 
```

在其他时候：

```
 <div class="sortable" data-bind="sortable: selectedPage().page_sections">
          <tr><td>Another blabla</td></tr>
    </div> 
```

我现在可以将“Another blabla”拖放到“Blabla”中，从而导致错误。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T17:21:36.943

有几种方法可以解决这个问题。第一个是将connectClass作为false或null（或任何等于false的布尔值）传递给可淘汰排序：

```
<div class="sortable" data-bind="sortable: { data: blueprint.pages, connectClass: false }">
    <tr><td>Blabla</td></tr>
</div>

<div class="sortable" data-bind="sortable: { data: selectedPage().page_sections, connectClass: false }">
      <tr><td>Another blabla</td></tr>
</div> 
```

您还可以将包含选项传递给 jQuery：

```
<div class="sortable" data-bind="sortable: { data: blueprint.pages, options: { containment: 'parent' } }">
    <tr><td>Blabla</td></tr>
</div>

<div class="sortable" data-bind="sortable: { data: selectedPage().page_sections, options: { containment: 'parent' } }">
      <tr><td>Another blabla</td></tr>
</div> 
```

与第一个解决方案不同，这将阻止项目从视觉上离开盒子（如果这是您的愿望）。

# javascript - spin.js 中如何隐藏微调器？

> ID：12408019
> 
> 赞同：2
> 
> 时间：2012-09-13T14:00:27.180
> 
> 标签：javascript, spin.js

我想使用 Spin.js 来显示微调器。我可以做到，但我无法阻止。

我的代码：

```
function startSpin() {
    var target = document.getElementById('demarrer');
    new Spinner().spin(target);
    setTimeout("dummyFunc()", 4000);
}

function dummyFunc() {
    console.log("bouh");
} 
```

为了停止微调器，我必须调用什么？

我试过了 ：

*   Spinner().stop(目标);
*   Spinner().spin(目标).stop();
*   微调器().stop();

没有结果... ='(

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:05:12.670

首先，我必须说我从未使用过 Spinner 并且不知道它是如何工作的，但我相当确定问题是您在创建 Spinner 实例后只是将其丢弃。代替

```
new Spinner().spin(target); 
```

试着写

```
var spinner = new Spinner().spin(target); 
```

然后，要停止微调器，请编写：

```
spinner.stop(); 
```

完整代码：

```
function startSpin() {
    var target = document.getElementById('demarrer');
    var spinner = new Spinner().spin(target);

    // Run a function after 4 seconds.
    setTimeout(function() {
        console.log("bouh");
        spinner.stop(); // Stop the spinner
    }, 4000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:04:20.813

你应该修改你的`setTimeout`.

```
var spinner = Spinner().spin(target);
setTimeout(function() {
   dummyFunc();
   spinner.stop();
}, 4000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:05:39.060

从您给我们的文章中，我猜这`new Spinner`会创建一个对象，您需要在该对象上调用该`stop`方法：

```
var target = /* some DOM element */;
var spinner = new Spinner();
spinner.spin(target);
spinner.stop(target); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-05T09:32:24.097

旋转器将在 4 秒后停止

```
 var target = document.getElementById('searching_spinner_center');
    var spinner = new Spinner(opts).spin(target);
    setTimeout(function() {
        spinner.stop(); 
    }, 4000); 
```

# path - NAnt - 如何获取包含脚本的目录路径

> ID：12408020
> 
> 赞同：2
> 
> 时间：2012-09-13T14:00:31.343
> 
> 标签：path, include, directory, nant

我有一个常见的 NAnt 脚本（包含一些常见的目标和常量），我包含在许多其他 NAnt 脚本中，如下所示：

```
<include buildfile="<path>\common.build" verbose="true" /> 
```

调用脚本位于不同的文件夹中。

在这个包含的脚本中，我需要从包含脚本所在的同一目录中读取一个文件。“当前目录”设置为调用脚本的目录，不包括在内。如何获取包含脚本的目录路径？

如果我使用以下构造（在包含的脚本中）：

```
${ path::get-directory-name(project::get-buildfile-path()) } 
```

然后我得到调用脚本的文件夹路径，而不是包含的脚本。

有什么方法可以获取其中包含的脚本的路径吗？

问候，伊万。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T08:53:43.800

My suggestion: Define the path to the called script file in a property inside the calling script like this:

```
<property name="include.buildfile.path" value="C:\foo\common.build" />
<include buildfile="${include.buildfile.path}" verbose="true" /> 
```

I the common script you access the desired directory path like this:

```
${path::get-directory-name(include.buildfile.path)} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T13:29:08.657

我查看了 NAnt 源代码，不幸的是，您想要实现的功能不适用于现有或自定义功能 - NAnt 将包含的文件附加到它的项目结构中，同时`Project`有一个`LocationMap`获取某个节点来自的文件名，它被标记为`internal`，所以甚至不能用脚本提取。您可以寻求一种解决方法，例如假设您的文件相对于主脚本的位置不变（然后从那里向下走），或者构建一个自定义版本的 NAnt，其中包含一个公开您需要的功能的函数。第一个解决方案并不漂亮，第二个解决方案并不容易。

# php - 夏令时的日期时区问题

> ID：12408022
> 
> 赞同：0
> 
> 时间：2012-09-13T14:00:38.950
> 
> 标签：php, datetime, timezone

我有以下代码：

```
var_dump(new \DateTime('now', new DateTimeZone('GMT'))); 
```

我得到以下输出，落后一小时：

```
object(DateTime)#894 (3) { ["date"]=> string(19) "2012-09-13 13:54:26" ["timezone_type"]=> int(3) ["timezone"]=> string(13) "UTC" } 
```

但是，如果我将代码更改为以下内容：

```
var_dump(new \DateTime('now', new DateTimeZone(date_default_timezone_get()))); 
```

然后我得到以下正确的输出：

```
object(DateTime)#894 (3) { ["date"]=> string(19) "2012-09-13 14:54:26" ["timezone_type"]=> int(3) ["timezone"]=> string(13) "Europe/London" } 
```

我在 Derick Rethans[博客](http://derickrethans.nl/gmt-being-tricky.html)上读到时区 3 应该考虑到任何夏令时，谁能解释为什么在第一个代码片段中我比实际时间早一个小时？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:05:07.440

好吧，在第一个片段中，您要的是“GMT”时区。这是一个有点模棱两可的术语，但我通常认为这意味着 GMT 本身 - 大致相当于 UTC，并且没有任何夏令时。这就是为什么它*不*应用夏令时，而是将时区报告为 UTC。

欧洲/伦敦时区在 GMT 中花费半年，在 BST 中花费半年。

我建议您尽可能避免使用 3 个字母的时区缩写。它们充满了各种失败的可能性。（现在已经阅读了博客文章，这基本上也是那里的建议。）

# ruby-on-rails - Rails3.2 表单中的选项选择器

> ID：12408029
> 
> 赞同：0
> 
> 时间：2012-09-13T14:00:57.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 Rails 新手，我对选项选择器有很大的疑问。如果他想使用选择框或文本字段，用户可以选择每个复选框。jquerycode 通过显示或隐藏 div 来完成他的工作。但是当我提交表单时，`:task_name`总是得到`task_new`div 的值，但永远不会得到`task_use`. 我做错了什么？

有没有办法通过 rails 函数隐藏/显示 div？也许我设置了一些 tmp 变量并给 :task_name 值？！如何才能做到这一点？

**更新：** 我用`tmp_variables`. 得到一个值，但现在我卡住了，如何设置 to 的`tmp_variable`值`:task_name`。 `<% :task_name = @tmp_variable%>`不起作用。

这是代码（new.html.erb）：

```
 Create new Task :
  <input type="checkbox" value="false" name="check" id="check" checked="false" />
  </div>

  <div class="task_use" id="task_use" style="display:block;">
    <%= f.fields_for :task do |t|%>  
    <%= t.select :task_name, Task.all.collect {|n|[n.task_name]}%>
    <%end%>
 </div>
  <div class="task_new" id="task_new" style="display:none;">
    <%= f.fields_for :task do |t|%>
    <%= t.label :task_name %><br />
    <%= t.text_field :task_name %>
    <%end%>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
  <% end %>

   <script>

   $(document).ready(function() {
   $("#check").change(function () {
   if ($('#check').checked == false) {

   } else {
   $('#task_new').toggle();
   $('#task_use').toggle();
   }
   });
   }); 
   </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:05:42.947

对于 Rails，显示或隐藏哪个 div 并不重要。将评估两个代码片段。因此，第二个片段简单地覆盖了为 task_name 设置的任何值。

您可以使用两个单独的表单并在它们之间切换，但我想您的字段比上面列出的字段多，您不想切换:)

也许您可以尝试替换实际的 task_name DOM 元素（有点像“真正的”切换），同时像[这个人](http://www.peterbe.com/plog/input-textarea-switcher)一样复制值，但这听起来很复杂 :(

# perl - Emacs Perl 模式：将脚本/缓冲区发送到 Perl 解释器？

> ID：12408031
> 
> 赞同：3
> 
> 时间：2012-09-13T14:00:58.693
> 
> 标签：perl, emacs

假设我正在以默认 Perl 模式（Emacs 23.1.1 附带的模式）在 Emacs 中编辑 Perl 文件或缓冲区。

有没有办法直接将完整的文件（或缓冲区）发送到 Perl 解释器并查看结果（在单独的缓冲区上）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:09:07.940

有第三方模式用于运行劣质 perl 进程并与它们交互（例如[`inf-perl.el`](http://www.emacswiki.org/emacs/inf-perl.el)），但没有包含在 emacs 23.1.1 中。

但是，使用 perl 运行缓冲区的一种简单方法是使用`shell-command-on-region`. 例如，此函数将在您的缓冲区上运行 perl 并将输出显示在名为 的缓冲区中`*Perl Output*`：

```
(defun perl-on-buffer ()
  (interactive)
  (shell-command-on-region (point-min) (point-max) "perl" "*Perl Output*")
  (display-buffer "*Perl Output*")) 
```

在 perl 缓冲区中运行它`M-x perl-on-buffer`或将其绑定到一个键，如下所示：

```
(eval-after-load 'perl-mode
  '(define-key perl-mode-map (kbd "C-c C-c") 'perl-on-buffer)) 
```

另一种选择是使用`compile`/ `recompile`with`perl <filename>`作为编译命令。这适用于文件内容而不是缓冲区内容，并且具有使用( ) 导航错误的附加优势。`C-x `````next-error`

# java - 拆分包和类日志记录

> ID：12408033
> 
> 赞同：0
> 
> 时间：2012-09-13T14:01:12.527
> 
> 标签：java, log4j

我想为某些类配置记录器以写入单独的文件。但是我对包记录器有相同的级别，并且消息被写入了两次。

这是我的配置：

```
<appender name="FILE_TRACE" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="c:/logs/trace.log"/>
    <param name="MaxFileSize" value="100MB"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%X{user} - %X{docbase} - %X{sysObjectId} - %d{ABSOLUTE} [%t] %m%n"/>
    </layout>
</appender>

<appender name="QUERY_TRACE" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="c:/logs/query.log"/>
    <param name="MaxFileSize" value="100MB"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%X{user} - %X{docbase} - %X{sysObjectId} - %d{ABSOLUTE} [%t] %m%n"/>
    </layout>
</appender>

<appender name="stdout" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="[%d{ISO8601}|%-5p|%-22t|%C|%M|%-4L] %m%n"/>
    </layout>
</appender>

   <logger name="package">
        <level value="DEBUG"/>
        <appender-ref ref="FILE_TRACE"/>
    </logger>

    <logger name="package.MyClass">
        <level value="DEBUG" />
        <appender-ref ref="QUERY_TRACE"/>
    </logger>

    <root>
        <level value="INFO"/>
        <appender-ref ref="stdout"/>
    </root> 
```

在 MyClass 中，我以这种方式获取 Logger：

```
Logger.getLogger(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:19:53.777

```
<logger name="package.MyClass" additivity="false">
        <level value="DEBUG" />
        <appender-ref ref="QUERY_TRACE"/>
</logger> 
```

层次结构中的“上层”记录器不会记录来自`package.MyClass`

# javascript - 防止表单元素提交

> ID：12408037
> 
> 赞同：0
> 
> 时间：2012-09-13T14:01:34.790
> 
> 标签：javascript, jquery, html, css

我有一个本质上很奇怪的用例，我知道应该有更好的方法来做到这一点，但是除了这些问题之外，有没有办法阻止某些表单元素提交？

我唯一的想法是从页面中删除“不需要的”元素以响应提交操作，但我不希望它们实际上被最终用户明显删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:03:04.647

您可以插入没有“名称”属性的输入字段：

```
<input type="text" id="empty-example" /> 
```

或者您可以在提交表单后简单地删除它们（在 jquery 中）：

```
$("form").submit(function() {

   $(this).children('#empty-example').remove();

}); 
```

# jsf-2 - Java EE 6 中 Seam Resource Servlet 的替代品是什么？

> ID：12408038
> 
> 赞同：0
> 
> 时间：2012-09-13T14:01:37.493
> 
> 标签：jsf-2, java-ee-6, tomcat7, cdi

在我们之前的 Seam 2 项目中，我们有以下部分`web.xml`负责加载静态资源，例如 css 或 img：

```
 <servlet>
    <servlet-name>Seam Resource Servlet</servlet-name>
    <servlet-class>org.jboss.seam.servlet.SeamResourceServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Seam Resource Servlet</servlet-name>
    <url-pattern>/seam/resource/*</url-pattern>
  </servlet-mapping> 
```

使用 CDI + JSF2 时的替代品是什么？是否可以使用标准 Java EE 6 机制来完成，或者我们是否需要 CDI 扩展或任何其他附加库？

PS：该项目基于maven并部署在tomcat 7上，所以如果需要一些扩展，我会很高兴根据依赖关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:19:15.050

Seam 2 从未成为 Java EE 5 的一部分，因此在 Java EE 6 中没有“替代”的方式。您可能需要查看 Seam 3 或 Seam 2 的任何后续版本。

“静态资源”位于标准 servlet 容器中，已由容器的内置默认 servlet 完全自动且透明地处理。只需将文件直接放到公共 webcontent 文件夹中（您还可以在其中放置 JSP/Facelets 文件）。

然而，JSF2 有一个新的资源处理机制，它允许在组件/渲染器中使用等自动包含资源，但这已经被其本身和新的 JSF 2.0和组件`@ResourceDependency`考虑在内。然而，我不确定这是否与 Seam 2 所做的事情有关，我从未真正使用过 Seam。`FacesServlet``<h:head>``<h:body>`

CDI 与这一切关系不大，它是一个 bean 管理 API，而不是静态资源管理 API。

# php - Mathias URL 缩短器

> ID：12408048
> 
> 赞同：1
> 
> 时间：2012-09-13T14:02:15.583
> 
> 标签：php, javascript, .htaccess, url-shortener

我正在使用这个 URL 缩短器，但我很难设置它。 [https://github.com/mathiasbynens/php-url-shortener](https://github.com/mathiasbynens/php-url-shortener)

我已经设置了数据库，相应地更改了配置文件。我将文件放在一个子目录中，并从 .htaccess 文件中删除了 Rewritebase。

如果有人可以提供帮助，我不确定这两个脚本是什么意思？`## Favelets / Bookmarklets

### 迅速的

// js `javascript:(function(){var%20q=prompt('URL:');if(q){document.location='http://yourshortener.ext/shorten?url='+encodeURIComponent(q)}}());`

### 缩短此网址

// js `javascript:(function(){document.location='http://yourshortener.ext/shorten?url='+encodeURIComponent(location.href)}());`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:04:28.000

您询问的脚本在那里，因此您可以从该页面快速创建一个短 URL。

提示将询问您要缩短哪个 URL，而第二个将自动缩短您已经在的页面。

给他们一个机会:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T08:23:22.930

如果您将所有文件上传到您的主机然后替换

> ## [http://yourshortener.ext/shorten?url=](http://yourshortener.ext/shorten?url=)
> 
> 和
> 
> ## [http://Yourdomain.com/shorten?url=](http://Yourdomain.com/shorten?url=)

# c# - 动态加载dll时找不到方法

> ID：12408052
> 
> 赞同：0
> 
> 时间：2012-09-13T14:02:25.033
> 
> 标签：c#, .net

我正在构建一个 C# .net 3.5 应用程序。

我有一个引用 dll 'CommonDll' 的 exe 'MainApp'

CommonDll 动态加载另一个 dll 'LoadedDll' 并动态调用名为 func() 的方法。

“LoadedDll”引用了“CommonDll”

在“CommonDll”中有一个方法 foo()，func() 正在调用该方法。

```
 func()
    {
        foo();
    } 
```

所以，我们到目前为止：

MainApp *==>* CommonDll *==动态==>* LoadedDll

LoadedDll ==> CommonDll。

一切正常，直到我更改方法 foo() 以获得布尔参数： foo(bool val); 并将“LoadedDll”中的 func() 更改为

```
func()
{
foo(true);
} 
```

我在 1.0 版中有 MainApp（引用旧的 CommonDll），在 1.1 版中有 LoadedDll（引用新的 CommonDll）

出于某种原因，我在方法 foo 上得到一个“MethodNotFound Excepion”，说它找不到获得布尔参数的 foo。

为什么会这样？LoadedDll 使用的是对更新后的 CommonDll 的静态引用，那么为什么找不到该方法呢？

此外，异常并不是说它找不到动态加载的 'func()' 方法，而是说它找不到 foo 方法。

**编辑：**

我在 GAC 中查找了 dll，但它不存在，是否还有另一个原因是为什么将加载已经在内存中的旧 dll 而不是新的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:53:46.963

我找出了问题的原因。

有一些外部代码将 dll 版本更改为恒定值，因此强名称是相同的。

底线：如果您正在加载一个 dll，然后您尝试加载另一个具有相同强名称的 dll，则将使用第一个 dll。

为了加载 2 个具有相同名称的 dll，它们必须具有不同的强名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:45:52.033

它也发生在我身上。我从动态加载 dll 的目录中删除了所有额外的 dll（它们的依赖项之前已使用我的主 exe 加载）。你回答的理由是对的。

# c# - .Net 打印格式的 POS - 不能使用转义字符 (char)27

> ID：12408057
> 
> 赞同：0
> 
> 时间：2012-09-13T14:02:47.257
> 
> 标签：c#, printing, ascii, pos-for-.net

我想出了如何将基本文本打印到我们的 POS 打印机，但我不知道如何让转义字符起作用（用于粗体、文本对齐等）。现在我只是在使用 Microsoft PosPrinter Simulator 进行测试。

这就是我正在尝试的

```
_printer.PrintNormal(PrinterStation.Receipt, (char)27 + "|bC" + printText + (char)13 + (char)10); 
```

我希望`printText`以粗体打印我的内容，然后是换行符。当我取出时，`(char)27 + "|bC"`它工作正常。

转义码的[文档在这里](http://msdn.microsoft.com/en-us/library/microsoft.pointofservice.posprinter.aspx)

我得到的错误是

> Microsoft.PointOfService.ControlBase.dll 中出现“System.FormatException”类型的第一次机会异常输入字符串的格式不正确。

我尝试了一堆变体，但似乎无法理解它。

**编辑**. 这是堆栈跟踪..

```
 at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.Int32.Parse(String s, IFormatProvider provider)
   at Microsoft.PointOfService.DeviceSimulators.PosPrinterSimulatorWindow.ProcessEscapes(String str)
   at Microsoft.PointOfService.DeviceSimulators.PosPrinterSimulatorWindow.DisplayText(String str)
   at Microsoft.PointOfService.DeviceSimulators.PosPrinterSimulator.PrintNormalImpl(PrinterStation station, PrinterState printerState, String data)
   at Microsoft.PointOfService.BaseServiceObjects.PosPrinterBase.OutputRequestHandler(OutputRequest Request)
   at Microsoft.PointOfService.Internal.PosCommonInternal.ProcessOutputRequest(OutputRequest request, Boolean asyncOperation)
   at Microsoft.PointOfService.BaseServiceObjects.PosPrinterBase.ProcessRequest(PrintOperation operation)
   at Microsoft.PointOfService.BaseServiceObjects.PosPrinterBase.PrintNormal(PrinterStation station, String data)
   at MyProjectNamespace) in MyFile.cs:line 74 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-22T05:09:26.457

嗨，刚刚发现了这个答案，这对我有用。试试这个。

```
string Bold = System.Text.ASCIIEncoding.ASCII.GetString(new byte[] { 27, (byte)'|', (byte)'b', (byte)'C' }); 
```

或者您可以简单地声明：

```
 string ESC = System.Text.ASCIIEncoding.ASCII.GetString(new byte[] {27}); 
```

然后以您的格式或文本使用它，如下所示：

ESC + "|cA" - 用于中心。ESC + "|bC" -- 粗体。

ESC + "|bC" + "hello world" -- 这将使字符串加粗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-15T15:58:40.840

根据我的测试，我认为打印机模拟器不会接受 ESC 字符。

我使用许多常量替代项创建要发送到打印机的文本，例如：

```
 string escAlignCenter = String.Format("{0}|cA", ((char)27));
      string escAlignRight = String.Format("{0}|rA", ((char)27));
      string escBoldOn = String.Format("{0}|bC", ((char)27));
      string escNewLine = String.Format("{0}|1lF", ((char)27));
      string escPaperCut = String.Format("{0}|75P", ((char)27));
      string escReset = String.Format("{0}|N", ((char)27));
      string escUnderlineOn = String.Format("{0}|uC", ((char)27)); 
```

所以我可能会将以下内容发送到打印机：

```
String.Format("{0}Hellow world!", escAlignCenter)" 
```

为避免在使用打印机模拟器时出现错误，我需要执行以下操作

```
 if(useSimulator)
      {
        string xxx = String.Format("{0}", ((char)27));
        string testString = testPrint.ToString();
        testString = testString.Replace(xxx, "\\");
        logger.Debug("text to print is [{0}]", testString);
        posPrinter.PrintNormal(PrinterStation.Receipt, testString); 
      }
      else
        posPrinter.PrintNormal(PrinterStation.Receipt, testPrint.ToString()); 
```

这消除了错误，但是打印到模拟器的文本包括所有 ESC 格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-13T01:52:37.473

您是否检查过您的打印机是否支持粗体、斜体等？IE

```
if (_printer.CapRecBold)
   // printer supports bold

if (_printer.CapRecItalic)
   // printer supports italic 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T10:26:02.987

对我来说，它可以像这样逃避字符串：

```
_printer.PrintNormal(PrinterStation.Receipt, "\x1B|bCYour Bold line\r\n"); 
```

也许您将来仍然可以使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T18:01:36.150

我最终确定了每行可以打印多少个字符并创建了一些对齐功能。在这一点上，我认为 .Net 的 POS 没有内置任何内容。

仍然无法弄清楚粗体，斜体等格式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-29T05:43:07.147

Androidz的答案是正确的。你也可以做一些像下面这样的事情。

假设您要打印粗体。

```
string text = "ESC|bC" + "BOLD Text";
// Now replace ESC as below.
string textToPrint = text.Replace("ESC", ((char)27).ToString()); 
```

而已。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-15T13:01:47.903

这个字符串对我[有用“\u001B”](https://docs.microsoft.com/en-us/windows/uwp/devices-sensors/epson-esc-pos-with-formatting)

# objective-c - NSMutableDictionary 错误：将变异方法发送到不可变对象

> ID：12408060
> 
> 赞同：1
> 
> 时间：2012-09-13T14:02:57.070
> 
> 标签：objective-c

我阅读了很多关于 SO 上相同错误消息的帖子，但这些解决方案都不适用于我的情况。所以在推荐其他帖子之前请阅读代码。提前致谢。

我设置了异常断点，发现问题出在`[self.countryNameDictionary setObject:array forKey:initial];`

在 AppDelegate.h

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic,copy) NSMutableDictionary *countryNameDictionary;
@property (nonatomic,copy) NSMutableArray *countryNameInitials;
@end 
```

在 AppDelegate.m

```
#import "AppDelegate.h"

@implementation AppDelegate     
@synthesize window = _window;
@synthesize countryNameDictionary = _countryNameDictionary;
@synthesize countryNameInitials = _countryNameInitials;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSMutableArray *permanentArray = [[NSMutableArray alloc]init];
    self.countryNameDictionary = [[NSMutableDictionary alloc]init];
    self.countryNameInitials = [[NSMutableArray alloc]init ];

    [[NSUserDefaults standardUserDefaults] setObject:@"YES" forKey:@"isFirstLaunch"];

    // run this code only once by creating and checking a user defaults key
    if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"isFirstLaunch"] isEqualToString:@"YES"])
    {
        // locate and convert txt file to string
        NSString *path = [[NSBundle mainBundle] pathForResource:@"country_name" ofType:@"txt"];
        NSString *string = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];

        // seperate string into array
        permanentArray = [[string componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]mutableCopy];
        // strip white space string
        permanentArray = [[permanentArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF != ''"]]mutableCopy];

        // enumerate a-z to set the two global variables
        for (int asciicode =65; asciicode<=90; asciicode++)
        {
            NSString *initial = [NSString stringWithFormat:@"%c",asciicode];
            self.countryNameInitials = [NSMutableArray arrayWithObject:initial];

            NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF BEGINSWITH[cd] %@",initial];
            NSMutableArray *array = [[permanentArray filteredArrayUsingPredicate:predicate]mutableCopy];

            // populate the dictionary with initial-country-names pair
            [self.countryNameDictionary setObject:array forKey:initial]; // PROBLEM IS HERE

            NSLog(@"self.countrynameDictionary is %@",self.countryNameInitials);
        }

        // set to a non-nil value
        [[NSUserDefaults standardUserDefaults] setObject:@"NO" forKey:@"isFirstLaunch"];
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:15:49.350

`copy`在所述属性上使用 getter 时，您的属性定义返回原始对象。由于它是副本，因此您将获得不可变的对象。尝试更改`copy`为`strong`或`retain`取决于您使用的内存管理。

# sql - 如何构建由单元格成员的最后 2 个字母限定的 sp？

> ID：12408069
> 
> 赞同：1
> 
> 时间：2012-09-13T14:03:19.643
> 
> 标签：sql, stored-procedures

我有一个 SQL 表，如：

```
Name       Value
alex ph     0.5
max pr      0.4
jean ph     0.6 
```

我想创建一个存储过程，在其中我将列名称成员的最后两个字母作为变量，并返回相应的行，如：

```
exec sp_2lett @lastL = 'ph' 
```

给

```
Name       Value
alex ph    0.5
jean ph    0.6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:08:25.163

在 SQL Server 中，您可以执行以下操作：

```
CREATE PROCEDURE sp_2lett
@lastL varchar(2)
AS
BEGIN
    SELECT *
    FROM YourTable
    WHERE RIGHT(Name,2) = @lastL
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:08:33.367

尝试：

```
CREATE PROCEDURE [USP_Select_Names](@Name nvarchar(2))
AS
BEGIN
SELECT [Name], [Value] FROM TableName WHERE [Name] LIKE '%'+@Name
END 
```

# javascript - 两位数月份日期验证

> ID：12408070
> 
> 赞同：0
> 
> 时间：2012-09-13T14:03:21.877
> 
> 标签：javascript, jquery, html, validation

我有 3 个文本框，如下所示

```
<input type="text" name="birth_year" id="birth_year" maxLength="4" size="4">Year 
<input type="text" name="birth_month" id="birth_month" maxLength="2" size="2">Month
<input type="text" name="birth_day" id="birth_day" maxLength="2" size="2">Day

[2012] Year [09] Month [13] Day 
```

如何使用 JQ 验证该日期？

我已经找了两天了。

不过，我找不到任何具有这种 XXXX-XX-XX 格式的东西。

我找到[了这个 jsFiddle](http://jsfiddle.net/dceast/vmHjN/)，但这个不验证两位数的月份或日期，如 03 或 22

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:42:25.630

更好的验证（参见[工作示例](http://jsfiddle.net/6cw8C/2/)）。如果您要问生日，为什么不检查它们是否也合情合理？第一部分检查无效日期（超出范围，包括该月特定范围之外的日期）；第二部分排除了尚未出生的人，或者太老而无法成立的人。

```
/**
 * input is year/month/day (month from 1 to 12, day from 1 to 31)
 * output is boolean: true if correct and in-range, false if not
 */
function isValidBirthdate(year, month, day, minAge, maxAge) {
  // javascript days expect zero-based days and months
  month --; day --;
  var saysWasBorn = new Date(year, month, day);
  if (saysWasBorn.getDate() != day
    || saysWasBorn.getMonth() != month
    || saysWasBorn.getFullYear() != year) {
        console.log("impossible date: ");     
        return false;
  }
  var now = new Date();
  var yearsOld = now.getFullYear() - saysWasBorn.getFullYear();
  if ((now.getMonth()*40 + now.getDate() - 1) < 
      (saysWasBorn.getMonth()*40 + saysWasBorn.getDate())) {
     yearsOld --;                
  }
  if (yearsOld > maxAge) {
    console.log("too old");        
    return false;
  } else if (yearsOld < minAge) {
    console.log("too young");
    return false;
  }
  return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:34:40.440

这实际上非常简单：

```
var year = document.getElementsByName("birth_year")[0].value,
    month = document.getElementsByName("birth_month")[0].value,
    day = document.getElementsByName("birth_day")[0].value,
    date = new Date(year + "-" + month + "-" + day);

if (isNaN(date.getTime())) {
    // The date is invalid
} 
```

不幸的是，这在 IE8 等旧浏览器中不起作用，因为它们不接受 yyyy-mm-dd 日期格式。但是您可以像这样重写日期：

```
var date = new Date(month + "/" + day + "/" + year); 
```

（我认为 mm/dd/yyyy 格式没有意义，但是……这就是 Javascript 自第一次定义以来的工作方式。）

# mysql - MySQL 不能在没有本地连接的本地主机上工作

> ID：12408076
> 
> 赞同：1
> 
> 时间：2012-09-13T14:03:35.270
> 
> 标签：mysql, firewall, wampserver

我使用 WampServer（Apache、PHP、MySQL）并且**在连接某种网络适配器（无线或局域网）时没有问题**（即本地连接状态已连接）**即使我没有连接到互联网**（例如当我连接到路由器，但没有连接到互联网）。

当没有网络连接时，我收到一个 php 错误，例如 MySQL 无法连接到端口 3306 上的 127.0.0.1。

有趣的是`telnet 127.0.0.1 3306`，它无法连接到端口，即使服务器和 MySQL 运行良好（即连接某种本地连接时）。

所以我关闭了各种防火墙（防病毒和 Windows），但仍然没有任何区别。这就是为什么这个问题相当令人费解的原因。

我已经尝试过的事情（将在此过程中更新此列表）：

*   my.ini 中的 skip-networking 指令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:07:39.733

您可以修改 MySQL 服务器和客户端配置以使用命名管道而不是 TCP/IP 环回连接来相互连接。这样，网络连接的当前状态应该会产生较小的影响。

为此，请使用[`--enable-named-pipe`](http://dev.mysql.com/doc/refman/5.6/en/server-options.html#option_mysqld_enable-named-pipe)或 相应的配置文件设置启动服务器，并使用[`--pipe`](http://dev.mysql.com/doc/refman/5.6/en/connecting.html#option_general_pipe)或执行客户端[`--protocol=PIPE`](http://dev.mysql.com/doc/refman/5.6/en/connecting.html#option_general_protocol)。您的 PHP 连接器也应该可以使用类似的配置。这可能取决于您在那里使用的库，以及它是否会从`my.ini`文件中获取提到的配置设置（没有引导`--`到那里的设置）。

# matlab - matlab中返回条件数的函数

> ID：12408077
> 
> 赞同：-5
> 
> 时间：2012-09-13T14:03:37.177
> 
> 标签：matlab

任何人都可以提供一个基于欧几里得范数返回矩阵条件数的函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:09:25.190

[这](http://teal.gmu.edu/ececourses/ece699/notes/note4.html)是关于条件数的一个很好的解释，[这里](http://www.mathworks.fr/help/matlab/ref/cond.html;jsessionid=ff5b094e9865cbf90507f43528ab)是你在 Matlab 中的做法。

```
c = cond(X) 
```

# mysql - mysql C# 中的字段列表中的未知 cloumn 'labourname'

> ID：12408079
> 
> 赞同：0
> 
> 时间：2012-09-13T14:03:37.693
> 
> 标签：mysql, c#-4.0, dataset-designer

我目前正在使用 Entity mysql 数据库在 C# windows 应用程序中工作。尝试在 *.xsd 文件中预览值数据表时，**出现“字段列表中的未知 Cloumn 'labourname'”**错误对话框。

但是我在 mysql 中运行相同的查询我得到了正确的结果。在那里我找到了**labourname**列。

请有人告诉我为什么我会收到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:33:44.953

如果您在 C# 代码中比较此列名，请确保字符串在比较的任一侧大小写相同。

# android - 如何在 Android ViewPager 中更改当前选项卡荧光笔颜色？

> ID：12408080
> 
> 赞同：25
> 
> 时间：2012-09-13T14:03:37.283
> 
> 标签：android, android-layout, android-viewpager, android-view

这是我里面的布局`ViewPager`。我想更改文本下方当前标签突出显示的颜色。实际上它显示为黑色。但我不知道它是否是默认颜色。而且我还有一个疑问。如果我使用`PagerTitleStrip`此选项卡突出显示不会出现。有没有办法用titlestrip带来它？

这是我的布局：

```
 <android.support.v4.view.PagerTabStrip android:id="@+id/pager_title_strip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:background="@color/pager_titlestrip_bg"    
    android:textColor="@color/pager_titlestrip_text"
    android:paddingTop="5dp"
    android:paddingBottom="4dp" >   
  </android.support.v4.view.PagerTabStrip> 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-14T19:21:56.673

这行得通。

```
PagerTabStrip pagerTabStrip = (PagerTabStrip) findViewById(R.id.pager_title_strip);
pagerTabStrip.setDrawFullUnderline(true);
pagerTabStrip.setTabIndicatorColor(Color.RED); 
```

谢谢！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-10-10T16:55:56.713

它可以使用 jAVA 或 XML 以编程方式完成

通过 XML

```
<android.support.design.widget.TabLayout
        android:id="@+id/tabanim_tabs"
        android:layout_width="match_parent"
        app:tabIndicatorHeight="4dp"
        app:tabIndicatorColor="@android:color/white"
        android:layout_height="wrap_content" /> 
```

或者更简单地说，您也可以解决此代码

```
tabLayout.setSelectedTabIndicatorColor(Color.parseColor("#FFFFFF")); 
```

类似地改变高度

```
tabLayout.setSelectedTabIndicatorHeight((int) (2 * getResources().getDisplayMetrics().density)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-15T06:41:21.230

这适用于我的项目。

```
<android.support.design.widget.TabLayout
    android:id="@+id/tabs"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#FFF"
    app:tabGravity="fill"
    app:tabIndicatorColor="@color/text3"
    app:tabMode="scrollable"
    app:tabSelectedTextColor="@color/text3"
    app:tabTextColor="#000" /> 
```

# jquery - CSS 绝对定位列表大小

> ID：12408081
> 
> 赞同：-1
> 
> 时间：2012-09-13T14:03:39.893
> 
> 标签：jquery, css, list

所以我有一个列表，不知道如何更改它的内容的显示格式，以便 UL 的宽度和高度自动调整到 LI 内容的大小。

我已经更新了小提琴：[jsfiddle.net/devin85/tMYxT/7](http://jsfiddle.net/devin85/tMYxT/7) ...

将第 2 级项目悬停将说明我的问题 - “巴士站”“员工”“围栏”“车辆”

感谢您的帮助。

德文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:20:02.673

您将子菜单高度限制为 32px；在 CSS 中修复（第 32 行）：

```
#navigation .submenu {
display: none;
position: absolute;
top: 32px;
left: 0px;
background-color: transparent; 
white-space: nowrap;
width: auto;
height: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:11:14.350

将此行添加到 CSS 代码的末尾：

```
#navigation .submenu .submenu { height:auto; } 
```

# scala - 使用 Scalaz 或 Shapeless 将选项元组转换为元组选项

> ID：12408086
> 
> 赞同：19
> 
> 时间：2012-09-13T14:03:52.247
> 
> 标签：scala, scalaz, shapeless

有

```
(Some(1), Some(2)) 
```

我希望得到

```
Some((1, 2)) 
```

并拥有

```
(Some(1), None) 
```

我希望得到

```
None 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-13T14:15:23.360

我知道你在问 Scalaz，但值得指出的是，标准方法并不是令人难以忍受的罗嗦：

```
val x = (Some(1), Some(2))

for (a <- x._1; b <-x._2) yield (a,b) 
```

在一般情况下（例如任意元组），[Shapeless](https://github.com/milessabin/shapeless)最擅长这种事情。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-13T15:02:57.930

您可以使用 Scalaz 7`Bitraverse`为元组提供一个实例，然后像往常一样进行排序（但使用`bisequence`而不是`sequence`）这一事实：

```
scala> import scalaz._, std.option._, std.tuple._, syntax.bitraverse._
import scalaz._
import std.option._
import std.tuple._
import syntax.bitraverse._

scala> val p: (Option[Int], Option[String]) = (Some(1), Some("a"))
p: (Option[Int], Option[String]) = (Some(1),Some(a))

scala> p.bisequence[Option, Int, String]
res0: Option[(Int, String)] = Some((1,a)) 
```

不幸的是，Scalaz 7 目前需要这里的类型注释。

* * *

在 Yo Eight 的评论中，类型注释在这里仍然是强制性的。我不确定他或她的推理是什么，但实际上编写自己的包装器非常容易，它将为任何适当类型的元组提供`bisequence`方法并且不需要类型注释：

```
import scalaz._, std.option._, std.tuple._    

class BisequenceWrapper[F[_, _]: Bitraverse, G[_]: Applicative, A, B](
  v: F[G[A], G[B]]
) {
  def bisequence = implicitly[Bitraverse[F]].bisequence(v)
}

implicit def bisequenceWrap[F[_, _]: Bitraverse, G[_]: Applicative, A, B](
  v: F[G[A], G[B]]
) = new BisequenceWrapper(v) 
```

现在`(some(1), some("a")).bisequence`编译就好了。

我想不出一个很好的理由 Scalaz 不包括这样的东西。在此期间是否要添加它是个人喜好问题，但让编译器在这里进行输入绝对没有理论上的障碍。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-10-17T20:34:27.643

我认为[cat](https://typelevel.org/cats/)版本在这里不会是多余的。

```
@ import cats.implicits._
import cats.implicits._

@ (4.some, 2.some).bisequence
res1: Option[(Int, Int)] = Some((4, 2))

@ (4.some, none).bisequence
res2: Option[Tuple2[Int, Nothing]] = None 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-02-08T22:08:04.530

*   开始`Scala 2.13`，标准库中提供了这个确切的行为[`Option#zip`](https://www.scala-lang.org/files/archive/api/2.13.x/scala/Option.html#zip[A1%3E:A,B](that:Option[B]):Option[(A1,B)])：

    ```
    Some(2) zip Some('b') // Some((2, 'b'))
    Some(2) zip None      // None
    None zip Some('b')    // None
    None zip None         // None 
    ```

*   之前`Scala 2.13`，[`Option#zip`](https://www.scala-lang.org/api/2.12.x/scala/Option.html#zip[B](that:scala.collection.GenIterable[B]):Option[(A,B)])正在返回一个`Iterable`并且可以将它与`headOption`：

    ```
    Some(2) zip Some('b') headOption // Some((2, 'b'))
    Some(2) zip None headOption      // None 
    ```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-13T14:56:25.647

```
scala> import scalaz._
import scalaz._

scala> import Scalaz._
import Scalaz._

scala> (Tuple2.apply[Int, Int] _).lift[Option].tupled
res5: (Option[Int], Option[Int]) => Option[(Int, Int)] = <function1>

scala> res5((some(3), some(11)))
res6: Option[(Int, Int)] = Some((3,11))

scala> res5((some(3), none))
res7: Option[(Int, Int)] = None 
```

# sql-server - 为什么在 vs 2010 中使用 .dbschema 文件进行模式比较时无法创建更新脚本？

> ID：12408087
> 
> 赞同：0
> 
> 时间：2012-09-13T14:03:54.930
> 
> 标签：sql-server, visual-studio-2010

这不是我相信任何人都可以真正提供*解决方案*的问题，但也许有人可以提供一些启示。我们的网络管理员刚刚解决了我的实际问题，让我可以访问生产中的 sql 服务器，但是我看到的问题仍然存在，我不明白**为什么**。

问题：如果您在数据库项目和 .dbschema 文件之间在 vs 2010 中进行架构比较，则无法创建更新脚本。

来源： http: [//msdn.microsoft.com/en-us/library/aa833435 (v=vs.100).aspx#ViewDifferences](http://msdn.microsoft.com/en-us/library/aa833435(v=vs.100).aspx#ViewDifferences)

引用 MSDN：“如果显示架构更新脚本不可用，则无法为您指定的目标生成脚本，或者需要刷新比较。例如，如果您的目标架构是 .dbschema 文件，则无法创建更新脚本。”

我这样做的原因是因为我无权访问生产服务器。这当然很常见。

因此，我创建了一个 .dbschema 文件，经过比较，我无法生成更新脚本。这是为什么？只是删除该功能没有任何意义。

# php - 在 symfony2 中从命令行发送电子邮件

> ID：12408094
> 
> 赞同：28
> 
> 时间：2012-09-13T14:04:16.067
> 
> 标签：php, symfony, console, twig

我需要从 symfony2 中的命令类渲染一个树枝模板。

```
namespace IT\bBundle\Command;

use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Output\OutputInterface;

class CronCommand extends ContainerAwareCommand
{
    protected function configure()
    {
        $this
            ->setName('send:emails')
            ->setDescription('Envio programado de emails');
    }

    protected function execute(InputInterface $input, OutputInterface $output)
    {
        $message = \Swift_Message::newInstance()
            ->setSubject('bla bla')
            ->setFrom('x@x.com')
            ->setTo('x@gmail.com')
            ->setCharset('UTF-8')
            ->setContentType('text/html')       
            ->setBody($this->renderView('mainBundle:Email:default.html.twig'));

        $this->getContainer()->get('mailer')->send($message);
        $output->writeln('Enviado!');
    }
} 
```

但是当我执行命令时`php app/console send:emails`，出现以下错误：

> 致命错误：调用未定义的方法`IT\bBundle\Command\CronCommand::renderView()`

如何渲染视图？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-13T14:14:02.893

这是因为 renderView 是类 Controller 的方法。而不是那个尝试：

```
$this->getContainer()->get('templating')->render(...); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-13T14:13:21.777

改变

```
$this->renderView() 
```

到

```
$this->getContainer()->get('templating')->render() 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-15T21:48:19.997

也许，不完全是你问的问题，但肯定 - 很重要。

请记住，如果你想通过命令调用发送电子邮件，你需要flushQueue。

```
$mailer = $container->get('mailer');
$spool = $mailer->getTransport()->getSpool();
$transport = $container->get('swiftmailer.transport.real');
$spool->flushQueue($transport); 
```

# java - 在设定的超时期限后关闭 JDBC 连接？

> ID：12408096
> 
> 赞同：2
> 
> 时间：2012-09-13T14:04:18.220
> 
> 标签：java, jdbc, connection, connection-pooling, connection-timeout

有没有办法在设定的超时期限后关闭 JDBC 连接？这些连接是在 GenericObjectPool 中创建的。我知道池可以关闭池中的空闲连接，但是那些被认为是活动的连接呢？如果有人不调用 close()，我正在尝试控制连接泄漏。从我读到的唯一方法可能是在服务器上设置超时时间，但我希望在 Java 中找到一种方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:37:29.787

我使用的是旧的 Apache 公用池，但我切换到了新的 Apache [Tomcat 池](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html) 这实际上具有在超时后删除连接的功能。

removeAbandoned - (boolean) 标志，如果放弃的连接超过 removeAbandonedTimout，则删除它们。如果设置为 true，则如果连接的使用时间超过 removeAbandonedTimeout，则该连接被视为已放弃并有资格删除。将此设置为 true 可以从无法关闭连接的应用程序中恢复数据库连接。另请参阅 logAbandoned 默认值为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:28:03.663

我同意 Peter Lawrey 的观点，即我会确保始终关闭连接。但是，如果我仍然必须确保连接已关闭（如果有人从池中取出它并忘记返回它），我会这样做：

1.  装饰池返回的 java.sql.Connection。
2.  在构造函数中创建一个计时器并将其设置为配置的持续时间，以容忍活动连接。
3.  如果用户在计时器触发之前对其调用 close，我将取消计时器并将连接返回到池。
4.  如果计时器在用户关闭连接之前触发，我会将连接返回到池中并使装饰连接无效，以便进一步调用将抛出`IllegalStateException`.

# .net - ADO.net 实体模型框架编译查询问题

> ID：12408100
> 
> 赞同：1
> 
> 时间：2012-09-13T14:04:28.437
> 
> 标签：.net, ado.net-entity-data-model

我有以下代码，我试图通过它使用 LINQ 创建 CompiledQuery。

```
public static Func<DataContext, int, object>
        GetTeamMembersByTeamId = CompiledQuery.Compile<MazikReviewEntities, int, object>(
            (context, teamId) => from tp in context.TeamPlayers
                                    join t in context.Teams on tp.TeamId equals t.ID
                                    join emp in context.Employees on tp.EmployeeId equals emp.ID
                                    where tp.TeamId == teamId && emp.IsActive == true
                                    orderby emp.JoiningDate
                                    select new ProjTeamMemberDetails
                                    {
                                        EmployeeName = emp.FirstName + " " + emp.LastName,
                                        Email = emp.Email,
                                        Designation = context.Designations.FirstOrDefault(s => s.ID == emp.DesignationId).Name,
                                        NIC = emp.NIC,
                                        JoiningDate = emp.JoiningDate,
                                        EmployeeID = emp.ID
               });

} 
```

在 CompiledQuery.Compile 行中，我的数据上下文出现错误，其中指出，

> “类型‘MazikGlobalReviewModel.MazikReviewEntities’不能用作泛型类型或方法‘System.Data.Linq.CompiledQuery.Compile(System.Linq.Expressions.Expression>)’中的类型参数‘TArg0’。没有隐式引用从 'MazikGlobalReviewModel.MazikReviewEntities' 到 'System.Data.Linq.DataContext' 的转换。”

这是什么错误以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:17:03.670

我来自 Mazik 的朋友。如果您查看错误，则非常清楚那里出了什么问题。看看下面的代码。代码中的 datacontext 和 MazikReviewEntities 是什么。确保它们属于同一类型。

```
 public static readonly Func<**MyDataContext**, int, IQueryable<tblSomething>> CompiledSelectSites =
                CompiledQuery.Compile((**MyDataContext** c, int conf_id) =>
                        (from s in c.TblSomething
                         where s.ID == id
                         select site)); 
```

有关更多信息，请查看此[链接](http://blogs.msdn.com/b/wriju/archive/2009/05/05/linq-to-sql-understanding-compiled-query.aspx)。

这应该可以解决您的问题。

# php - Slim Framework 2.0.0 无法将 ->params() 与 GET 一起使用

> ID：12408113
> 
> 赞同：0
> 
> 时间：2012-09-13T14:04:57.333
> 
> 标签：php, get, slim

我正在使用 SLIM 2.0.0

是否可以将 ->params() 与 GET 一起使用？

在下面的例子中

*   如果我通过 POST 调用它：`curl -d "param1=hello&param2=world" http://localhost/foo`它会打印：helloworld CORRECT！！
*   如果我通过 GET 调用它：`http://localhost/foo/hello/world`它会打印：NOTHING!! <- 错了！！

为什么？

```
<?php
require 'Slim/Slim.php';

\Slim\Slim::registerAutoloader();
$app = new \Slim\Slim();
$app -> get('/foo/:param1/:param2', 'foo');
$app -> post('/foo', 'foo');
$app -> run();

function foo() {
    $request = \Slim\Slim::getInstance() -> request();
    echo $request -> params('param1');
    echo $request -> params('param2');
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:23:22.350

解决了！在文档页面[Request Variables - Slim Framework Documentation](http://docs.slimframework.com/pages/request-variables/)我读到：

HTTP 请求可能有关联的变量（不要与路由变量混淆）。与当前 HTTP 请求一起发送的 GET、POST 或 PUT 变量通过 Slim 应用程序的请求对象公开。

如果您想快速获取请求变量值而不考虑其类型，请使用请求对象的 params() 方法：

```
<?php
$req = $app->request();
$paramValue = $req->params('paramName'); 
```

params() 方法将首先搜索 PUT 变量，然后是 POST 变量，然后是 GET 变量。如果没有找到变量，则返回 null。如果您只想搜索特定类型的变量，则可以使用以下方法：

```
<?php
// Get request object
$req = $app->request();

//GET variable
$paramValue = $req->get('paramName');

//POST variable
$paramValue = $req->post('paramName'); 
```

所以：

关键是“一个 HTTP 请求可能有关联的变量（不要与路由变量混淆）。”

```
http://domain.com/foo/hello/wold?name=brian 
```

在上面的 URI 中，路由变量/参数是从 '/foo/hello/world' 部分读取的。请求 GET 变量从查询字符串 ('name=brian') 中读取，可以通过 $app->request()->get('name') 或 $app->request()->params(' 访问姓名'）。

请求 POST 变量从请求正文中解析出来，可以通过 $app->request()->post('param1') 或 $app->request()->params('param1') 访问。

感谢布莱恩·内斯比特

# c# - VIX_E_HOST_NETWORK_CONN_REFUSED 验证我是否直接连接到 ESX(i) 主机

> ID：12408115
> 
> 赞同：2
> 
> 时间：2012-09-13T14:05:02.450
> 
> 标签：c#, vmware

我有这样的网络配置： - myApp：network1 - vCentre：network1，network2 - EsxHost：network2

因此，myApp 无法直接看到 EsxHost。我收到 VIX_E_HOST_NETWORK_CONN_REFUSED 错误。我发现，这种情况是不正确的：http: [//pangkwongluk.blogspot.com/2011/10/avvi-backup-fails-with-error-unable-to.html](http://pangkwongluk.blogspot.com/2011/10/avvi-backup-fails-with-error-unable-to.html)

但我必须验证主机是否被我“看到”并在 C# 应用程序中给出适当的通知。

# c# - 使用给定的步数获取给定最小值和最大值的可枚举范围

> ID：12408118
> 
> 赞同：16
> 
> 时间：2012-09-13T14:05:09.190
> 
> 标签：c#, winforms, range

我熟悉用于生成值枚举的[Enumerable.Range方法。](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range%28v=vs.100%29.aspx)但我想要一些稍微不同的东西。我想提供一个最小值、最大值和一些所需的点。

**IE：**

`Method(double min, double max, int numberOfSteps)`

服用

`Method(0, 1000, 11);`

会回来

`0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000`

我想这样的事情，必须有一个内置的方法，但我的搜索没有发现任何东西。我错过了什么吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-13T14:08:18.453

除了您希望这些值成为事实之外，其他`double`一切都可以完成`Enumerable.Range`。我不认为有任何内置的东西可以做你想做的事，但是在上面实现是微不足道的`Enumerable.Range`：

```
return Enumerable.Range(0, steps)
                 .Select(i => min + (max - min) * ((double)i / (steps - 1))); 
```

我写得有点仔细，所以你总是得到最终的价值。如果你说你只想要一个步骤，它确实很糟糕......你可能想要防止这种情况并`Enumerable.Repeat(min, 1)`在这种情况下使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T14:19:23.790

只需计算**“共同差异”**并生成系列：

**d = (max - min)/(numberOfSteps - 1)**

现在，您可以轻松地生成您的系列：

```
int [] a = new [numberOfSteps];

for(i=0; i<numberOfSteps ; i++)
{
  a[i] = min + (numberOfSteps - 1)d;
} 
```

# tsql - 使用 ] 重命名表

> ID：12408119
> 
> 赞同：0
> 
> 时间：2012-09-13T14:05:10.417
> 
> 标签：tsql, sql-server-2008-r2

当表名包含“]”字符时，我找不到在 T-SQL 中重命名表的正确语法。

sp_rename 过程似乎没有使用与 T-SQL DDL 相同的转义规则。

如何才能做到这一点？

```
CREATE SCHEMA MySchema

CREATE TABLE [MySchema].[MyTab]]le5](
    [Id] [bigint] IDENTITY(1,1) NOT NULL,
    [SomeField] [bigint] NULL,
    [MyField] [nvarchar](4000) NULL)

EXEC sp_rename 'MySchema.MyTa]ble5', 'MyTable6' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:13:34.297

使用与 CREATE TABLE 相同的语法...

```
EXEC sp_rename 'MySchema.[MyTab]]le5]', 'MyTable6' 
```

或者依靠[SET QUOTED_IDENTIFIER](http://msdn.microsoft.com/en-us/library/ms174393.aspx) ON 和不同的分隔符

```
EXEC sp_rename 'MySchema."MyTab]le5"', 'MyTable6' 
```

# git - 使用 Fabric 使用 git pull 的 SSH 密钥密码

> ID：12408130
> 
> 赞同：16
> 
> 时间：2012-09-13T14:05:38.253
> 
> 标签：git, fabric, ssh-keys, passphrase

我正在尝试使用结构自动部署应用程序。

应用程序代码托管在 GitHub 上，推出新版本非常简单——只需执行“git pull”即可。该应用程序托管在 100 台服务器上，因此我想自动部署。Fabfile.py：

```
def deploy():
  code_path = '/home/myuser/myapp'
  with cd(code_path):
    run('git pull')
    run('git submodule update --init --recursive') 
```

问题是，在每个 git 命令上我都会收到一个提示`Enter passphrase for key '/home/myuser/.ssh/id_rsa`：

有没有办法自动输入密码？在每台服务器上都相同，并且与 sudo 密码相同

我试过[fexpect library](https://github.com/ilogue/fexpect)，但我想知道是否有更好的（即标准）方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T23:52:05.060

You can also use a ssh key agent and use the agent forwarding. Always put a password on keys. Github has good docs on how to utilize this [here](https://help.github.com/articles/using-ssh-agent-forwarding).

Fabric should now also have agent forwarding ability. I've run into troubles with it in some corner cases, but gotten around them with an explicit local('ssh -A...) as a work around until the issue is resolved.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-20T20:30:28.203

虽然我认为接受的答案中描述的 ssh-aget 转发是一个更可取的解决方案（如果你得到它的工作），但是 Fabric 本身提供了它的替代方案：
**Fabric**有它自己的**“密码”设置**选项（即`env.password`条目） . `env.password`如果您设置了（[**请参阅文档**](http://docs.fabfile.org/en/1.12/usage/env.html#password)） ，则可以使织物自动输入密码（和 sudo 密码）：

> # 密码
> 
> 默认：`None`
> 
> SSH 层在连接到远程主机和/或回答 sudo 提示时使用的默认密码。

*您可以使用以下选项之一设置密码*：

*   `env.password = 'PASSWORD'`直接在“fabfile.py”中的代码中使用，
*   在命令行中作为命令的选项`fab`，使用`-p PASSWORD`或`--password=PASSWORD`（[文档](http://docs.fabfile.org/en/1.12/usage/fab.html#cmdoption-p)）。
*   作为另一个选项，您可以将`passwod=PASSWORD`line 放入`~/.fabricrc`（[文档](http://docs.fabfile.org/en/1.12/usage/env.html#rcfile)）中，该文件在每个`fab`命令之前加载，如果使用此选项，则不需要命令行选项或代码更改。

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2012-09-13T14:48:58.357

制作密钥时不要使用密码短语。只需按回车键，然后再次确认。您还可以拥有多个密钥。有些有密码，有些没有。

# c# - 隐藏或处置表格

> ID：12408132
> 
> 赞同：0
> 
> 时间：2012-09-13T14:05:45.253
> 
> 标签：c#, winforms, hide, dispose

我有一个`MainForm`，从`MainForm`我称之为`ConfirmationForm`，

```
using (var f = new ConfirmationForm())
                f.ShowDialog(); 
```

然后在中`ConfirmationForm`，我想展示另一个`UsersListForm`

```
if (ConfirmSuccess)
{
this.Hide; //or this.Close
using (var f = new UsersListForm())
f.ShowDialog();
} 
```

现在，当 ConfirmSuccess 等于 true 时，`MainForm`will `Hide`or `Close`too。

如何防止`MainForm`意志不`Hide`或`Close`？任何想法？提前致谢。

**更新：**我的问题已解决。我首先调用`UsersListForm`并从`UsersListForm`我调用 ConfirmationForm 的加载事件中调用，然后我使用`DialogResult == System.Windows.Forms.DialogResult.OK`，现在一切都很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:38:09.273

如果您的意图是在打开 MainForm 之前请求用户确认，那么最好的方法是在创建它并调用 MainForm 之后调用和确认表单。如果您的意图是在应用程序开始时寻求确认，请将调用 ConfirmationForm 放在 Program 类中 Application.Run (new MainForm ()) 之前；

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        ConfirmationForm confForm = new ConfirmationForm();
        confForm.ShowDialog();
        Application.Run(new MainForm());
    }
} 
```

但是，如果打算在单独的调用点中请求应用程序内的验证，则应使用 ShowDialog 调用 ConfirmationForm，然后调用所需的表单。

但是，如果您的意图确实是用打开的表单验证请求并将其隐藏，您可以使用 ConfirmationForm 的 DialogResult 属性通过比较 ( `ConfirmationForm.ShowDialog () == DialogResult.OK`) 返回验证的成功或失败。看[这个例子](http://support.microsoft.com/kb/816145)

# c# - 执行 PostBack 并在服务器端为动态创建的 checkboxlist 项目添加项目

> ID：12408134
> 
> 赞同：0
> 
> 时间：2012-09-13T14:05:54.990
> 
> 标签：c#, postback, dom-events, asp.net-4.0, checkboxlist

它让我对如何为 CheckBoxList 做 PostBack 有点疯狂。

我有一个自动完成文本框，它触发 Javascript（在选定的项目上），通过该文本框，我使用资源中的 Javascript appendChild 元素将项目动态添加到复选框列表：

[https://stackoverflow.com/a/3184505/1426121](https://stackoverflow.com/a/3184505/1426121)

但正如用户在回答中所说，添加的项目在下一刻消失了，为此我必须做一个 PostBack（他们建议）。同样在答案的评论中，我需要在 CheckBoxList 中有一个***static listitem**才能使该 Javascript 工作。所以在这里我总结一下这个问题。

1.  我是否以正确的方式生成 CheckBoxList 项目？或者还有其他方法吗？

2.  如果没有其他去，

    *   我怎样才能对上述代码进行回发？
    *   我怎样才能摆脱***static listitem**？或者是否有任何解决方法可以从一组动态生成的列表项中隐藏单个静态列表项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:42:02.357

我在 SO 上搜索这个愚蠢的问题真是太愚蠢了。这是答案。

> “或者有什么别的办法吗？”

而不是使用 javascript 附加 CheckBoxList 项，

*   创建一个内容占位符，您需要在其中拥有复选框列表
*   将自动完成文本框值存储在 ontextchanged 事件中。
*   调用用于生成复选框列表的方法并传递 listitem 属性。

示例代码：

```
private void AddingDynamicCheckBoxList(string listitem_name, string listitem_value)
{ chkBxLst1.Items.Add(new ListItem(listitem_name, listitem_value)); } 
```

# spring - Spring 安全性：动态角色

> ID：12408135
> 
> 赞同：0
> 
> 时间：2012-09-13T14:05:56.833
> 
> 标签：spring, security, dynamic, struts, roles

我想在我的jsp中做这样的事情（使用spring和struts）：

```
<security:authorize ifAllGranted="ACCESS_<s:property value='%{#attr.currentQueue}'/>"> 
```

遗憾的是，它似乎不起作用，因为我现在看不到我应该看到的内容。但是，也没有错误。

知道它是否应该工作吗？方法不对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:09:06.663

使用另一个 Struts OGNL 解决了这个问题： ${currentQueue} 而不是使用属性标签。这使 ：

```
<security:authorize ifAllGranted="ACCESS_${currentQueue}"> 
```

# dart - 'as' 只是表达类型注释的另一种方式吗？

> ID：12408136
> 
> 赞同：1
> 
> 时间：2012-09-13T14:05:57.143
> 
> 标签：dart

我对 Dart 的理解使我相信这种“强制转换”不应该影响运行时语义，而只是想确认一下：

```
(foo as Bar).fee();
(foo as Bar).fi();
(foo as Bar).fo(); 
```

或者是一次“最佳实践”：

```
final bFoo = (foo as Bar);
bFoo.fee();
bFoo.fi();
bFoo.fo(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T16:03:11.967

这在很大程度上取决于 DartVM 优化器如何处理这种情况。使用最新版本的 Dart 我构建了两个测试函数：

```
void test1() {
  Dynamic bar = makeAFoo();

  for (int i = 0; i < 5000; i++) {
    (bar as Foo).a();
    (bar as Foo).b();
  }
} 
```

和

```
void test2() {
  Dynamic bar = makeAFoo();

  Foo f = bar as Foo;
  for (int i = 0; i < 5000; i++) {
    f.a();
    f.b();
  }
} 
```

查看 test1 的优化代码，您可以看到循环如下所示：

```
00D09A3C    bf813b9d00             mov edi,0x9d3b81  'instance of  Class: SubtypeTestCache'
00D09A41    57                     push edi
00D09A42    50                     push eax
00D09A43    6811003400             push 0x340011
00D09A48    e8d36c83ff             call 0x540720  [stub: Subtype1TestCache]
00D09A4D    58                     pop eax
00D09A4E    58                     pop eax
00D09A4F    5f                     pop edi
00D09A50    81f911003400           cmp ecx,0x340011
00D09A56    7411                   jz 0xd09a69
00D09A58    81f9710f7c00           cmp ecx,0x7c0f71
00D09A5E    0f8437000000           jz 0xd09a9b
00D09A64    e900000000             jmp 0xd09a69
00D09A69    8b1424                 mov edx,[esp]
00D09A6C    8b4c2404               mov ecx,[esp+0x4]
00D09A70    6811003400             push 0x340011
00D09A75    50                     push eax
00D09A76    68b9229d00             push 0x9d22b9
00D09A7B    51                     push ecx
00D09A7C    52                     push edx
00D09A7D    6889289d00             push 0x9d2889
00D09A82    b8813b9d00             mov eax,0x9d3b81  'instance of  Class: SubtypeTestCache'
00D09A87    50                     push eax
00D09A88    b9b0d00b00             mov ecx,0xbd0b0
00D09A8D    ba06000000             mov edx,0x6
00D09A92    e8896583ff             call 0x540020  [stub: CallToRuntime]
00D09A97    83c418                 add esp,0x18
00D09A9A    58                     pop eax
00D09A9B    5a                     pop edx
00D09A9C    59                     pop ecx
00D09A9D    50                     push eax
00D09A9E    a801                   test al,0x1
00D09AA0    0f8450010000           jz 0xd09bf6
00D09AA6    0fb74801               movzx_w ecx,[eax+0x1]
00D09AAA    81f922020000           cmp ecx,0x222
00D09AB0    0f8540010000           jnz 0xd09bf6
00D09AB6    b9d1229d00             mov ecx,0x9d22d1  'Function 'a':.'
00D09ABB    bae96ccb00             mov edx,0xcb6ce9  Array[1, 1, null]
00D09AC0    e82b6983ff             call 0x5403f0  [stub: CallStaticFunction]
00D09AC5    83c404                 add esp,0x4
00D09AC8    b911003400             mov ecx,0x340011
00D09ACD    ba11003400             mov edx,0x340011
00D09AD2    8b45f4                 mov eax,[ebp-0xc]
00D09AD5    51                     push ecx
00D09AD6    52                     push edx
00D09AD7    3d11003400             cmp eax, 0x340011
00D09ADC    0f849a000000           jz 0xd09b7c
00D09AE2    a801                   test al,0x1
00D09AE4    7505                   jnz 0xd09aeb
00D09AE6    e95f000000             jmp 0xd09b4a
00D09AEB    0fb74801               movzx_w ecx,[eax+0x1]
00D09AEF    81f922020000           cmp ecx,0x222
00D09AF5    0f8481000000           jz 0xd09b7c
00D09AFB    0fb77801               movzx_w edi,[eax+0x1]
00D09AFF    8b4e07                 mov ecx,[esi+0x7]
00D09B02    8b891c100000           mov ecx,[ecx+0x101c]
00D09B08    8b0cb9                 mov ecx,[ecx+edi*0x4]
00D09B0B    8b7927                 mov edi,[ecx+0x27]
00D09B0E    8b7f03                 mov edi,[edi+0x3]
00D09B11    81ff59229d00           cmp edi,0x9d2259
00D09B17    0f845f000000           jz 0xd09b7c
00D09B1D    bfd13b9d00             mov edi,0x9d3bd1  'instance of  Class: SubtypeTestCache'
00D09B22    57                     push edi
00D09B23    50                     push eax
00D09B24    6811003400             push 0x340011
00D09B29    e8f26b83ff             call 0x540720  [stub: Subtype1TestCache]
00D09B2E    58                     pop eax
00D09B2F    58                     pop eax
00D09B30    5f                     pop edi
00D09B31    81f911003400           cmp ecx,0x340011
00D09B37    7411                   jz 0xd09b4a
00D09B39    81f9710f7c00           cmp ecx,0x7c0f71
00D09B3F    0f8437000000           jz 0xd09b7c
00D09B45    e900000000             jmp 0xd09b4a
00D09B4A    8b1424                 mov edx,[esp]
00D09B4D    8b4c2404               mov ecx,[esp+0x4]
00D09B51    6811003400             push 0x340011
00D09B56    50                     push eax
00D09B57    68b9229d00             push 0x9d22b9
00D09B5C    51                     push ecx
00D09B5D    52                     push edx
00D09B5E    6889289d00             push 0x9d2889
00D09B63    b8d13b9d00             mov eax,0x9d3bd1  'instance of  Class: SubtypeTestCache'
00D09B68    50                     push eax
00D09B69    b9b0d00b00             mov ecx,0xbd0b0
00D09B6E    ba06000000             mov edx,0x6
00D09B73    e8a86483ff             call 0x540020  [stub: CallToRuntime]
00D09B78    83c418                 add esp,0x18
00D09B7B    58                     pop eax
00D09B7C    5a                     pop edx
00D09B7D    59                     pop ecx
00D09B7E    50                     push eax
00D09B7F    a801                   test al,0x1
00D09B81    0f8479000000           jz 0xd09c00
00D09B87    0fb74801               movzx_w ecx,[eax+0x1]
00D09B8B    81f922020000           cmp ecx,0x222
00D09B91    0f8569000000           jnz 0xd09c00
00D09B97    b961239d00             mov ecx,0x9d2361  'Function 'b':.'
00D09B9C    bae96ccb00             mov edx,0xcb6ce9  Array[1, 1, null]
00D09BA1    e84a6883ff             call 0x5403f0  [stub: CallStaticFunction]
00D09BA6    83c404                 add esp,0x4
00D09BA9    8b4df8                 mov ecx,[ebp-0x8]
00D09BAC    83c102                 add ecx,0x2
00D09BAF    0f8055000000           jo 0xd09c0a
00D09BB5    89cf                   mov edi,ecx
00D09BB7    8b5df4                 mov ebx,[ebp-0xc]
00D09BBA    e90efeffff             jmp 0xd099cd 
```

test2 的优化代码你可以看到循环如下所示：

```
00D09F3D    894df4                 mov [ebp-0xc],ecx
00D09F40    81f910270000           cmp ecx,0x2710
00D09F46    0f8d46000000           jnl 0xd09f92
00D09F4C    3b251c414700           cmp esp,[0x47411c]
00D09F52    0f8659000000           jna 0xd09fb1
00D09F58    50                     push eax
00D09F59    b9d1229d00             mov ecx,0x9d22d1  'Function 'a':.'
00D09F5E    bae96ccb00             mov edx,0xcb6ce9  Array[1, 1, null]
00D09F63    e8886483ff             call 0x5403f0  [stub: CallStaticFunction]
00D09F68    83c404                 add esp,0x4
00D09F6B    8b45f0                 mov eax,[ebp-0x10]
00D09F6E    50                     push eax
00D09F6F    b961239d00             mov ecx,0x9d2361  'Function 'b':.'
00D09F74    bae96ccb00             mov edx,0xcb6ce9  Array[1, 1, null]
00D09F79    e8726483ff             call 0x5403f0  [stub: CallStaticFunction]
00D09F7E    83c404                 add esp,0x4
00D09F81    8b4df4                 mov ecx,[ebp-0xc]
00D09F84    83c102                 add ecx,0x2
00D09F87    0f8048000000           jo 0xd09fd5
00D09F8D    8b45f0                 mov eax,[ebp-0x10]
00D09F90    ebab                   jmp 0xd09f3d 
```

并且只有一组对 SubTypeTestCache 的调用（在 test2 的循环之外）而不是 test1 中的两个。

今天，执行一次强制转换似乎更快，但将强制转换退出循环似乎是 VM 将来可能会进行的简单优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:50:45.430

跑步（foo as Bar）有两个效果：

*   它告诉编辑器 foo 是一个 Bar ，它有助于静态类型分析并让编辑器完成代码。
*   它检查 foo 是否是 Bar（或 Bar 的子类型），否则会抛出 CastException。

在 (http://www.dartlang.org/docs/spec/latest/dart-language-specification.pdf) 中查找“类型转换”。

**更新**：我也喜欢约翰的回答，但我想我应该再说一件事。我忽略了一个事实，你说的是做一次演员而不是三次。看着`final bFoo = (foo as Bar);`，我想再说一件事关于语言语义。

确实，Dart 编辑器、dart2js 和 VM 可以推断出 foo 是 Bar 类型，这样可以节省额外的检查等。但是，语言的语义稍有不同。“final bFoo”没有类型注释。所以根据语言规范，bFoo 的类型是动态的。

因此，当您写三遍“(foo as Bar)”时，每个表达式都会产生一个 Bar。但是当你写 bFoo 时，你有一个 Dynamic 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T06:42:09.157

`as`对同一个变量连续执行三个强制转换不是“最佳实践” 。

`as`演员表实际上是运行时检查。我只是猜测，但如果你想减少来自编辑器的警告，可能有更好的方法来做到这一点。

例如，这是一个场景：

```
class Foo {

}

class Bar extends Foo {
  m1() => print('m1');
}

doStuff(Foo foo) {
  foo.m1();  // warning here
}

main() {
  var foo = new Bar();
  doStuff(foo);
} 
```

上面的代码运行得很好，但编辑器确实显示了一个警告。要消除警告，最好重构代码。您可以从 doStuff 中删除 Foo 注释，或者您可以考虑将 m1() 移至 Foo，或者您可以进行双重调度。

# mysql - 如何从 .t xt 文件在 MySQL 表的字段中插入值

> ID：12408138
> 
> 赞同：0
> 
> 时间：2012-09-13T14:05:58.847
> 
> 标签：mysql

如何从 .t​​xt 文件的行中将值插入 MySQL 表的字段中？

我的 .txt 就像：

名称1 名称
2名称3
名称
4

（每行一行）

我在 Stackoverflow 上读了很多，我发现了这个：[从 .txt 文件中插入 mysql 表](https://stackoverflow.com/questions/12089064/insert-in-mysql-table-from-txt-file)

但我的情况略有不同，我正在尝试修改链接帖子的查询，但不成功:-(谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:20:23.093

```
LOAD DATA INFILE 'testfile.txt'
INTO TABLE testtable
FIELDS TERMINATED BY '\r' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'
(name); 
```

# iphone - 在 iPhone 中的 App 内购买月度订阅

> ID：12408140
> 
> 赞同：0
> 
> 时间：2012-09-13T14:06:05.457
> 
> 标签：iphone, in-app-purchase, subscription

如何在 iPhone 中使用应用内购买来实现订阅功能？用户必须每月支付一笔费用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:09:21.747

可以在[Ray Wenderlich 的网站](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)上找到关于应用内购买的非常好的初学者教程。

# symfony - 在 symfony2 中使用 phpUnit 进行测试时如何回滚任何事务

> ID：12408145
> 
> 赞同：3
> 
> 时间：2012-09-13T14:06:09.013
> 
> 标签：symfony, doctrine-orm, phpunit, symfony-2.1

我正在使用爬虫测试控制器，但是当我发布一个不会产生任何错误的表单时，它会将表单保存在数据库中。

我怎样才能在不更改控制器且不测试其他东西的情况下阻止他这样做。

这种测试有最佳实践吗？我尝试了回滚，但在 ControllerTest 中没有更多活动事务

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T06:20:21.360

您需要编写自己的测试客户端类来扩展 Symfony\Bundle\FrameworkBundle\Client。这是因为默认客户端不会在请求之间共享连接对象（因此您不能在测试客户端之外使用事务）。如果您扩展测试客户端，您可以自己处理事务。

在您的客户端类中，您需要创建静态连接对象，并覆盖方法 doRequest() 以避免每次都创建新的连接对象，而是使用我们的静态连接对象。

这里有很好的描述：

[http://alexandre-salome.fr/blog/Symfony2-Isolation-Of-Tests](http://alexandre-salome.fr/blog/Symfony2-Isolation-Of-Tests)

当您拥有自己的 doRequest 方法时，您只需要处理事务，因此您可以使用 begin 和 rollback 包装 handle() 方法。您的 doRequest 方法可能看起来像这样：

```
protected function doRequest($request)
{
    // here you need create your static connection object if it's doesn't exist yet
    // and put it into service container as 'doctrine.dbal.default_connection'

    (...)
    self::$connection->beginTransaction();
    $response = $this->kernel->handle($request);
    self::$connection->rollback();
    (...)

    return $response
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:28:02.277

您可以阅读 PHPUnit 的文档进行数据库测试

[http://www.phpunit.de/manual/3.6/en/database.html](http://www.phpunit.de/manual/3.6/en/database.html)

您将需要设置您的数据库并拆除您所做的更改。

如果您认为上述内容过于复杂，也许您有兴趣制作数据库层的模型

[http://www.phpunit.de/manual/3.6/en/test-doubles.html](http://www.phpunit.de/manual/3.6/en/test-doubles.html)

Mockup 是在放置您自己的测试控件的原始对象的基础上创建一个自定义对象。可能在这种情况下，您对模拟 Doctrine 的实体管理器感兴趣

# vb6 - 运行时错误 429 VB6

> ID：12408147
> 
> 赞同：0
> 
> 时间：2012-09-13T14:06:11.857
> 
> 标签：vb6, runtime-error

我有点问题。我正在尝试运行我公司使用的这个 VB6 应用程序，但我得到了以下弹出窗口。现在，我已经安装了 VB6 运行时，我已经重新注册了 vbalTab6.ocx。经过一番谷歌搜索，我什至尝试安装 Microsoft Office 和 Access，并安装 VB6 IDE。都没有喜悦。有任何想法吗？感谢您的任何帮助。

![在此处输入图像描述](../Images/2a28d2494b807c36b4f8a37b4c962324.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T17:04:30.730

重新注册 vbalIml6.ocx 和 ssubtmr6.dll。根据[他们的](http://www.vbaccelerator.com/home/VB/Code/Controls/Tab_Controls/vbAccelerator_ComCtl32_Tab_Control/VB6_TabStrip_Control_Full_Source.asp)网站，它们是依赖项。我倾向于相信这将解决错误。

# android - 如何使任务（progressDialog）在 Android 中加载至少 2 秒？

> ID：12408148
> 
> 赞同：0
> 
> 时间：2012-09-13T14:06:15.240
> 
> 标签：android

> **可能重复：**
> [如何以最短加载时间（2 秒）在 AsyncTask 中添加进度对话框](https://stackoverflow.com/questions/12402788/how-can-i-add-a-progress-dialog-in-asynctask-with-minimum-loading-time-2sec)

我想从 Internet 加载一些东西并配置相机。
如果加载时间太短，对用户不利。
所以，我想加载至少 2 秒。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:11:13.363

显示此对话框时获取时间戳，并将其与要完成时的时间戳进行比较。如果 2 秒过去了，则关闭它，否则创建一个线程并在 x 毫秒 (2000 - (timestamp2 - timestamp1)) 后运行它，并在该线程结束后关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:58:52.597

尝试使用

```
try {
  Thread.sleep(SLEEP_TIME);
} catch (InterruptedException e) {
  Log.e(LOG_TAG, e.getMessage());
} 
```

如果您在 AsyncTask 中执行此操作会更好。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:09:50.107

对于一次运行的计时事件，我会使用[Handler](http://developer.android.com/reference/android/os/Handler.html)重新选择。像这样的东西

```
 Handler h= new Handler();
 h.postDelayed(new Runnable(){
    public void run() {
      //Do your stuff here         
  }}, 2000); 
```

# android - Android：无法解析TabManager类，继承自FragmentActivity

> ID：12408150
> 
> 赞同：0
> 
> 时间：2012-09-13T14:06:19.590
> 
> 标签：android, android-layout, android-fragments, android-tabhost

我在这里按照示例

[http://developer.android.com/reference/android/app/TabActivity.html](http://developer.android.com/reference/android/app/TabActivity.html)

使用片段创建选项卡，在教程中它使用 TabManager 但在我的版本中它说它无法解决。

我使用的 minsdk 设置为 14，targetsdk 设置为 15。

我不想使用向后兼容的支持。

任何想法它在哪个包中？

Eclipse 没有为我提供任何帮助，只要求我创建类 TabManager。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:13:29.267

`TabManager`用于兼容性片段选项卡，而不是 3.0+ 片段选项卡。这就是它无法解决的原因。

这里的教程展示了如何在 3.0+ 中创建片段选项卡：

[http://developer.android.com/reference/android/app/ActionBar.html#newTab](http://developer.android.com/reference/android/app/ActionBar.html#newTab) ()

`FragmentActivity`此外，除非您想要向后兼容，否则您不必从 Honeycomb 开始继承。您可以只继承`Activity`并`Fragment`得到支持。

# jquery - 在鼠标悬停时更改热点区域的颜色

> ID：12408153
> 
> 赞同：0
> 
> 时间：2012-09-13T14:06:26.477
> 
> 标签：jquery, asp.net, css, imagemap

我在 Image Map 控件上动态生成 HotSpot。这是代码

```
// Programmatically create a RectangleHotSpot.
RectangleHotSpot Rectangle1 = new RectangleHotSpot();
Rectangle1.Top = 50;
Rectangle1.Left = 10;
Rectangle1.Bottom = 200;
Rectangle1.Right = 200;
Rectangle1.NavigateUrl = "http://stackoverflow.com";

ImageMap1.HotSpots.Add(Rectangle1); 
```

这是在 PageLoad 上完成的，现在我想在 mousehover 上设置热点的颜色，即一旦用户将鼠标悬停在热点区域上，颜色就会发生变化，并且应该有点透明。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:52:01.883

我不能为此推荐这个插件。

[http://www.outsharked.com/imagemapster/](http://www.outsharked.com/imagemapster/)

它会完全按照您的意愿进行，如果您无法解决，作者会非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:18:37.360

不知道 asp.net，但我想你可以在 html 的输出上使用 css 来完成，这会在你的 .net 中生成

就像你有输出一样

```
<div id="hotspot"></div> 
```

CSS：

```
#hotspot{
background:red;
width:20px;
Height:20px;
}
#hotspot:hover{
background:blue;
} 
```

背景图片也可以做到这一点

像这样的CSS：

```
#hotspot{
background:url('your img url')no-repeat;
width:20px;
Height:20px;
}
#hotspot:hover{
background:url('your hover img url')no-repeat;
} 
```

# c++ - Functor 在 C++ 中永远不能是抽象的吗？

> ID：12408158
> 
> 赞同：6
> 
> 时间：2012-09-13T14:06:41.013
> 
> 标签：c++, templates, functor

通常，模板参数可以是抽象类，如下面的程序所示。但似乎排序中的比较函子一定不是抽象的。至少以下内容不能在 VC++ 11 和 Oracle Studio 12 上编译。

```
#include <vector>
#include <algorithm>

class Functor
{
public:
    virtual bool operator()(int a, int b) const = 0;
};

class MyFunctor: public Functor
{
public:
    virtual bool operator()(int a, int b) const { return true; }
};

int _tmain(int argc, _TCHAR* argv[])
{
    vector<Functor> fv; // template of abstract class is possible
    vector<int> v;
    MyFunctor* mf = new MyFunctor();
    sort(v.begin(), v.end(), *mf);
    Functor* f = new MyFunctor();
    // following line does not compile: 
    // "Cannot have a parameter of the abstract class Functor"
    sort(v.begin(), v.end(), *f); 
    return 0;
} 
```

现在，我想知道这是否是函子参数的一般属性，还是取决于 STL 实现？有没有办法得到，我想做什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T14:08:57.547

函子通常需要是可*复制*的。多态基类通常*不可*复制，而抽象基类则永远不可复制。

**更新：**感谢@ahenderson 和@ltjax 的评论，这是一种非常简单的方法来生成包含原始多态引用的包装器对象：

```
#include <functional>

std::sort(v.begin(), v.end(), std::ref(*f));
//                            ^^^^^^^^^^^^ 
```

结果`std::ref`就是`std::refrence_wrapper`你所需要的：一个具有值语义的类，它包含对原始对象的引用。

* * *

仿函数被复制的事实让很多人想在仿函数中积累一些东西，然后想知道为什么结果不正确。函子应该真正*引用*外部对象。以机智：

**坏的！**不会像你期望的那样工作；函子可以被任意复制：

```
struct Func1 {
    int i;
    Func1() : i(0) { }
    void operator()(T const & x) { /* ... */ }
};

Func1 f;
MyAlgo(myContainer, f); 
```

**好：** *您*提供蓄电池；复制仿函数是安全的：

```
struct Func2 {
   int & i;
   Func2(int & n) : i(n) { }
   void operator()(T const & x) { /* ... */ }
};

int result;
MyAlgo(myContainer, Func2(result)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T14:14:35.233

正如Kerrek所说，您不能直接这样做：

但是一级间接，你就可以了。

```
struct AbstractFunctor
{
  AbstractFunctor( Functor * in_f ): f(in_f) {}
  // TODO: Copy constructor etc.

  Functor * f;
  bool operator()(int a, int b) const { return (*f)(a,b); }
};

int main()
{
  vector<int> v;
  Functor * mf = new MyFunctor();
  sort(v.begin(), v.end(), AbstractFunctor(mf) );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T14:33:27.847

正如Kerrek 和Michael Anderson 所说，你不能直接这样做。正如 Michael 所示，您可以编写一个包装类。但也有一个`std::`：

```
sort(v.begin(),
     v.end(), 
     std::bind(&Functor::operator(),
               mf,
               std::placeholders::_1,
               std::placeholders::_2) ); 
```

# facebook - 喜欢按钮不显示

> ID：12408160
> 
> 赞同：0
> 
> 时间：2012-09-13T14:06:45.257
> 
> 标签：facebook, facebook-like

这真让我抓狂。我从 fb 自己的工具中获得了代码：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

```
 <div id="fb-root"></div>
  <script>(function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/sv_SE/all.js#xfbml=1";
            fjs.parentNode.insertBefore(js, fjs);
          }(document, 'script', 'facebook-jssdk'));
  </script> 
```

还获得了所需的元密钥。

```
 <meta property="fb:admins" content="100002771809798"/> 
```

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frecept.se%2Fcontent%2Fatt-gora-honungskaka-med-mandel](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frecept.se%2Fcontent%2Fatt-gora-honungskaka-med-mandel)

给我 206 但它应该不足以隐藏按钮吗？

这是一个示例页面（在文章下方向下滚动）。 [http://recept.se/content/att-gora-honungskaka-med-mandel](http://recept.se/content/att-gora-honungskaka-med-mandel)

任何人都可以为我清除这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:29:58.290

我只是通过从 facebook 上的 plugins/like 页面复制代码来实现它。

您可能忘记包含此代码：

```
<div class="fb-like" data-send="true" data-width="450" data-show-faces="true"></div> 
```

它在这里说明了一切： [图片](http://www.mediafire.com/?wa2712kbu1948a1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:30:49.610

据我所知，无论标签`<div id="fb-root"></div>`数量如何，任何给定页面上都应该只有一个。`<div id="fb-like...></div>`这可能是很多事情，但也可能是因为有多个带有 ID 的标签`fb-root`。毕竟，它出现在每篇文章中，而不是主博客卷上。

# javascript - 需要帮助让 Google 地图方向面板显示在 FancyBox 中

> ID：12408168
> 
> 赞同：1
> 
> 时间：2012-09-13T14:07:12.430
> 
> 标签：javascript, google-maps, fancybox

我目前正在为网站开发一小部分功能。基本上我想在页面上显示一个端口的地图，并允许用户在其下方输入他们的地址以查找方向。一旦他们点击获取路线链接，就会打开一个精美的框，其中的内容是包含 Google 路线面板的 div。

这是我遇到的问题。- calcRoute() 函数被称为链接的onClick。因此 div 之前没有被填充。结果？在第一次单击时，fancybox 会生成空的。在第二个它像它应该的那样生成。我想出的一种解决方案是手动设置 div 的大小。但是，这会产生我宁愿避免的滚动和样式问题。

这是我的代码（注意这是我创建的一个小页面，用于在移植到我们的实际站点之前测试我的代码）：

```
<script type="text/javascript">
var map;
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var manhattanPort = new google.maps.LatLng(40.767899, -73.995825);
var myHouse = new google.maps.LatLng(40.419866, -74.152263);
var geoCoder;

  function initialize() {
     geoCoder = new google.maps.Geocoder();
    directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions = {
      center: manhattanPort,
      zoom:14,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById("directionsPanel"));
  }

  function calcRoute(){
      var address = document.getElementById("address").value;
      var end = manhattanPort;
      var request = {
          origin: address,
          destination: end,
          travelMode: google.maps.TravelMode.DRIVING
      };

      geoCoder.geocode( {'address':address}, function(results,status){
          if(status == google.maps.GeocoderStatus.OK){
              map.setCenter(results[0].geometry.location);
          } else{
              alert("Geocode was not succesful for the following reason: " + status);
          }
      });

      directionsService.route(request, function(result, status){
          if( status == google.maps.DirectionsStatus.OK){
              directionsDisplay.setDirections(result);
          }
      });

  }

function doClear(theText){
    if (theText.value == theText.defaultValue){
        theText.value = ""
    }
}

</script>

 </head>
  <body onload="initialize()">
<table align="right">
<tr>
<td align="right" width="330" height="380">
<div id="map_canvas" style="width:100%; height:100%"></div>
</td>
</t
</table>     
<table align="center">
<tr>
<td align="center">
<div>
    <input name="start_address" id="address" type="text" value="Enter An Address To Get Directions" onFocus="doClear(this)" size="100"/>
    <!-- <input type="button" value="Get Directions" onClick="calcRoute();"/> -->
    <a class="fancybox" href="#directionsPanel" onClick="calcRoute();">Get Directions</a>
</div>
</td>
</tr>
<tr>
<td align="center">
<div id="directionsPanel"></div>
</td>
</tr>
</table>
</body>
</html> 
```

现在很明显我错过了fancybox本身的脚本。让我知道提供这些是否会有所帮助。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:47:23.087

`$.fancybox.update()`在回调中调用`directionsService.route()`

# python - python 2.5.4 和 pyTTS 3.0 -- ValueError: "SAPI" not supported

> ID：12408169
> 
> 赞同：1
> 
> 时间：2012-09-13T14:07:14.527
> 
> 标签：python, sapi

我一直在 Windows 7 上使用 python 2.5.4 和 pyTTS 3.0，使用 MS Speech SDK 5.1。一年多来一直运行良好。然而，昨天，两件事几乎同时发生。MS 做了其中一项更新，导致我的系统在我不注意时重新启动。我几乎同时用完了磁盘空间。清理一些空间后，pyTTS 不再工作。我收到“SAPI”不支持的错误消息。在命令提示符下，我执行以下操作：

```
>python
Python 2.5.4 (r254:67916, Dec 23 2008, 16:10:54) [MSC v.1310 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import pyTTS
>>> x = pyTTS.Create()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Program Files (x86)\Python25\Lib\site-packages\pyTTS\__init__.py", line 28, in Create
    raise ValueError('"%s" not supported' % api)
ValueError: "SAPI" not supported 
```

我已重新安装：python 2.5.4、python windows 扩展 w32com、pyTTS 3.0、Microsoft Speech SDK 5.1、Microsoft-English-TTS-51。在每个这些之后我都重新启动了。但它仍然不起作用，我仍然收到相同的错误消息。

任何建议都非常感谢！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:15:59.523

所以感谢贡献者的建议。但这是有效的。pyTTS 导入 win32com。win32com 在 Pythonxx/Lib/site-packages/win32com/gen_py/dicts.dat 下的文件中保留一个缓存。不知何故，该文件 dicts.dat 已损坏。不知何故，当重新安装 win32com 时，该文件并没有被吹走。可能是因为在安装过程中它被运行在后台某处的 python 抓取了。我没有停下来进一步调查。无论如何，当正确删除并重新安装 win32com 时，pyTTS 恢复工作。--

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:51:25.110

python pyTTS 模块仅使用 Microsoft SAPI COM 对象，如果这些对象不再注册，则模块会以您看到的方式失败。

重新安装[Microsoft Speech SDK](https://www.microsoft.com/en-us/download/details.aspx?id=10121) *应该*会为您解决此问题。

# javascript - 数据表：通过 DOM 数据源中的名称引用列

> ID：12408173
> 
> 赞同：1
> 
> 时间：2012-09-13T14:07:41.903
> 
> 标签：javascript, jquery, html, datatables

现在我有以下html表：

```
<table id="datatable">
    <thead>
        <th>fruits</th>
        <th>vegs</th>
    </thead>
    <tbody>
        <tr>
            <td>apple</td>
            <td>potato</td>
        </tr>
        <tr>
            <td>apple</td>
            <td>carrot</td>
        </tr>
    </tbody>
</table> 
```

我想按名称引用列，如下所示：

```
<script type="text/javascript">
$(document).ready(function() {  
    /* Init the table */
    var oTable = $('#datatable').dataTable( );

    //get by sTitle
    console.log(oTable);
    var row = oTable.fnGetData(1)
    console.log(row['vegs']);//should return 'carrot'
} );
</script> 
```

当数据源是 DOM 时，是否有一个 javascript 函数`fnGetData()`来返回对象而不是数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:38:52.460

这尚未经过测试，但可能有效：

```
$(function() {
    // Get an array of the column titles
    var colTitles = $.map($('#datatable th'), function() {
        return this.text();
    }).get();

    var oTable = $('#datatable').dataTable();

    var row = oTable.fnGetData(1);
    console.log(row[colTitles.indexOf('vegs')]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:07:35.480

在查看了[ShatyUT](https://stackoverflow.com/a/12408809/792789)的答案和[fbas](https://stackoverflow.com/a/6155889/792789)之后，我想出了这个：

```
$(function() {
   var oTable = $('#datatable').dataTable( );
   var oSettings = oTable.fnSettings();  // you can find all sorts of goodies in the Settings

   var colTitles = $.map(oSettings.aoColumns, function(node) {
    return node.sTitle;
   });

   var row = oTable.fnGetData(1);
   console.log(row[colTitles.indexOf('vegs')]);
} ); 
```

但必须有更好的方法......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T16:32:21.057

因此，我进行了一些研究，发现该`datatable`插件在处理列方面不是很聪明——它们总是需要用整数访问的数组。唯一处理列及其属性的是[`aoColumns`对象](http://datatables.net/usage/columns)- 感谢@JustinWrobel`fnSettings`在初始化后找到访问该对象的方法。如果你没有这个，你就被困住了`$table.find("thead th")`。

但是，现在很容易将表作为对象数组获取：

```
var table = $mytable.dataTable(​…);
var cols = table.fnSettings().aoColumns,
    rows = table.fnGetData();

var result = $.map(rows, function(row) {
    var object = {};
    for (var i=row.length-1; i>=0; i--)
        // running backwards will overwrite a double property name with the first occurence
        object[cols[i].sTitle] = row[i]; // maybe use sName, if set
    return object;
});

result[1]["vegs"]; // "carrot" 
```

# php - mysql 两个具有相同结构的表 - 想要通过联合排序一个公共字段

> ID：12408175
> 
> 赞同：0
> 
> 时间：2012-09-13T14:07:57.940
> 
> 标签：php, mysql, database

我有两个具有相同结构的表，我需要一个查询来同时从两个表中排序，以便使用 php 获取的数组从同时使用单个查询选择的两个表中正确获取顺序。

避免单独选择每个表，存储在 php 数组中然后排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:11:28.890

```
select * from 
(select * from tbl1
union all
select * from tbl2
) a
order by col1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:11:30.090

根据[文档](http://dev.mysql.com/doc/refman/5.0/en/union.html)，它应该就像您想的那样。这是文档中的一个示例：

```
(SELECT a FROM t1 WHERE a=10 AND B=1)
UNION
(SELECT a FROM t2 WHERE a=11 AND B=2)
ORDER BY a LIMIT 10; 
```

# google-maps - 隐藏默认信息，google maps api v3

> ID：12408176
> 
> 赞同：0
> 
> 时间：2012-09-13T14:08:05.347
> 
> 标签：google-maps, google-maps-api-3

我想知道是否可以选择隐藏谷歌默认显示的一些信息，如地铁站或公共场所名称。我一直在网上搜索，但发现的评论很少。我不想显示一些运输信息。

谷歌地图 api 3 是否允许您这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:39:37.583

是的，Google Maps API V3 允许您使用样式化地图删除或更改信息： [https ://developers.google.com/maps/documentation/javascript/styling](https://developers.google.com/maps/documentation/javascript/styling)

# recursion - 通过递归反转链表的困惑？

> ID：12408178
> 
> 赞同：0
> 
> 时间：2012-09-13T14:08:08.500
> 
> 标签：recursion, linked-list

> **可能重复：**
> [链表递归反向](https://stackoverflow.com/questions/2434411/linked-list-recursive-reverse)

我在 SO 上搜索了我的问题并获得了链接

[递归堆栈跟踪](https://stackoverflow.com/a/2434700/1230229)

我不明白 head_ref 是如何指向 4 的？

谁能帮我理解这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:21:09.793

好的，首先，现在是早上 6 点，我整晚都无法入睡……所以这可能是胡说八道；）……但我们开始吧：

“魔术”发生在`recursiveReverse(&rest);`...... & 表示参数是rest的地址......因为rest本身是一个指针，我们的参数是一个指向指针的指针......

当函数完成时，指针已更改，并指向反向子列表的第一个元素（即 4 节点）...

前任：

所以假设我们有我们的列表 1 -> 2 -> 3 -> 4 并`recursiveReverse(struct node** head_ref)`使用指向 1 节点的指针作为 head_ref 参数调用

所以假设 head_ref 位于某个地址（我称之为 A）

head_ref 是指向指针的指针......所以地址 A 处的值是另一个地址（我们称之为 B）

所以存储在 B 的“东西”是一个指针......所以 B 的值也是一个地址（我们称该地址为 C）

最后存储在 C 中的“东西”是我们的结构......

现在考虑到这一点，我们第一次递归调用`recursiveReverse(struct node** head_ref)`... 这次我们的参数是 &rest ... &rest 是一个指向 2 节点的指针的指针...

让我们仔细看看...... &rest 的值是一个地址......（很难猜到，我们称之为 D）...... D 的值是一个地址（2 节点的地址），我们称之为乙

递归调用完成后，子列表 2 -> 3 -> 4 已反转（4 -> 3 -> 2），我们的其中一个地址已更新为新值... D 已更新，并且不再包含地址 E，而是 4 节点的地址（如果需要，请调用该 F ...）

所以现在，我们有指针“first”指向 1-node，它的 next-pointer 仍然指向 2-node...所以`first->next->next = first`，我们更正 2-nodes“next”指针，指向1节点...

因为 1 节点不再指向 2 节点，所以我们有了`first->next=NULL`，现在完整的列表已经颠倒了......

因为我们没有返回值，所以我们通过指向指针参数 head_ref ... 的指针返回我们的反向列表`*head_ref = rest`

`rest`是一个指针……它位于地址 D……D 的当前值是 F（4 节点的地址）

所以我们把D的值（也就是F，4节点的地址）写入地址B（就是*head_ref）

这就是返回指向 4 节点的指针的方式

# c# - 如何对内部使用 System.Web.Security.Membership 的方法进行单元测试？

> ID：12408180
> 
> 赞同：9
> 
> 时间：2012-09-13T14:08:14.007
> 
> 标签：c#, mocking, moq

我想测试一种方法来检查它是否正确保存了事务。在它内部调用 Membership.GetUser() 来验证每次导致测试失败的用户。有没有办法模拟这个，以便 Membership.GetUser() 总是返回一个有效的名称？

我正在使用起订量、C# 和 ASP.Net 4.5 MVC

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T14:09:57.970

简而言之，你不能。这就是为什么对这种“服务”的每次调用都应该隐藏在抽象之后的原因。

您可以在默认 MVC 模板中看到该示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T20:12:58.890

是的，就像 Serg 说的那样，您可以通过为真正的服务实现提供接口来模拟这一点。此接口将具有您正在调用的公共方法，例如：

```
public interface IMyServiceInterface
{
    IMembershipUser GetUser();
    // other methods you want to use...
} 
```

在你的单元测试中，你会说：

```
var mockService = new Mock<IServiceInterface>();
mockService.Setup(mock => mock.GetUser()).
    Returns(new MembershipUserImplementation("MyTestUser", otherCtorParams)); 
```

在我的示例中，我将为 MembershipUser 创建一个包装器，并且它似乎也需要在抽象之后。

# iphone - CellforItemAtIndexPath 没有在 GMGridview 中被调用以进行分页？

> ID：12408185
> 
> 赞同：0
> 
> 时间：2012-09-13T14:08:33.477
> 
> 标签：iphone, objective-c, ios, cocoa-touch, gmgridview

我在我的应用程序中使用了 GMGridView。

我已经使用 Horizo​​ntalLTB 布局策略进行分页，但是当我从第一页滑动到第二页时，没有调用 CellforItemAtIndexPath 方法。

但是当我从第 2 页滑动到第 3 页时，调用了该方法，我想根据偏移量设置点，因此我需要调用此方法。

有什么解决办法？

# c++ - 指针访问和引用访问哪个更快？

> ID：12408186
> 
> 赞同：11
> 
> 时间：2012-09-13T14:08:34.567
> 
> 标签：c++, performance, pointers, reference

在下面的示例代码中，我分配了 struct Chunk 的一些实例。在 for 循环中，我然后遍历内存块并使用指针或引用访问不同的实例，并为它们分配一些随机数据。

但是哪个 for 循环会执行得最快呢？据我所知，引用循环将是最快的，因为它不需要取消引用并且可以直接访问内存中的实例。我有多错/对？

```
struct Chunk {
    unsigned int a;
    float b;
    const char* c;
};

int main() {
    Chunk* pData = new Chunk[8];

    for( unsigned int i = 0; i < 8; ++i ) {
        Chunk* p = &pData[i];
        p->a = 1;
        p->b = 1.0f;
        p->c = "POINTERS";
    }

    for( unsigned int i = 0; i < 8; ++i ) {
        Chunk& r = pData[i];
        r.a = 1;
        r.b = 1.0f;
        r.c = "REFERENCES";
    }

    delete [] pData;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T14:11:32.917

它们应该与任何非白痴编译器相同（不是大致相同，而是完全相同）。在底层，引用**是**指针（在 99% 的编译器上）。没有任何区别的理由。

Pedantic：第二个循环*可能*会更快（可能不会），因为数据已经在缓存中，但仅此而已。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:41:54.037

我很想说：谁在乎？速度上的任何差异都可以忽略不计，您应该选择最易读的。在这种特殊情况下，我希望看到在两种情况下都生成完全相同的代码。在更复杂的情况下，编译器可能无法在循环的后面确定指针没有被重新定位，并且可能必须重新读取它。但要做到这一点，您必须做足够多的其他事情，以使差异无法衡量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:12:59.090

任何体面的编译器生成的代码都应该没有区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T14:33:59.693

当您在示例中的代码的两个版本之间犹豫不决时，您应该选择更易读的一个。您建议的那种可能的优化应该由编译器完成。

在您的情况下，更具可读性的是带有引用的版本（实际上，也许不是真的更具可读性，但共识是更喜欢使用引用，因为指针更“危险”）。

But back to the effeciency: (please if someone knows assembler, better stop reading or you risk a laugh attack...) In my opinion, as the pData is alocated on the heap, the compiler will have to compile it using pointers anyway. I think that your reasoning could be kind of correct if your structure was allocated on the stack just with "Chunk data[8];". But at latest when the compiler optimizations are on the difference should be deleted anyway.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-24T05:31:22.530

执行时间几乎相同，但使用不那么忙碌的引用。

# c# - 在 xaml 中更改悬停时的按钮颜色

> ID：12408190
> 
> 赞同：6
> 
> 时间：2012-09-13T14:08:50.517
> 
> 标签：c#, wpf, xaml

我想在悬停时更改按钮的颜色。

这是我的 xaml 代码。

```
<Window x:Class="OfflineIM.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Vytru | Offline IM" Height="300" Width="550" ResizeMode="CanMinimize" WindowStartupLocation="CenterScreen" Icon="/OfflineIM.UI;component/Images/368x368.ico">
    <Grid Name="MainGrid">
        <Grid Name="HeaderGrid" VerticalAlignment="Top" HorizontalAlignment="Center" Width="550" Height="130">

            <Image VerticalAlignment="Stretch" HorizontalAlignment="Right" Width="250" Margin="5,10,10,10" Source="Images\offlineIM-logo.png" />
        </Grid>
        <Grid Name="ContentGrid" VerticalAlignment="Bottom" HorizontalAlignment="Center" Height="160" Width="550">
            <Grid Margin="20,10,20,80" Background="#5F68686A">
                <TextBlock Margin="170,5,20,10" VerticalAlignment="Top" HorizontalAlignment="Left" Text="" Name="companyNameTextBlock" Foreground="#FF2B2D2E" TextAlignment="Justify" FontSize="12" FontWeight="Normal" />
                <TextBlock Margin="5,5,20,10" VerticalAlignment="Top" HorizontalAlignment="Left" Text="Company Name:" Foreground="#FF2B2D2E" TextAlignment="Justify" FontSize="12" FontWeight="Normal" />
                <TextBlock Margin="5,25,20,10" VerticalAlignment="Top" HorizontalAlignment="Left" Text="Number of Users:" Foreground="#FF2B2D2E" TextAlignment="Justify" FontSize="12" FontWeight="Normal" />
                <TextBlock Margin="170,25,20,10" VerticalAlignment="Top" HorizontalAlignment="Left" Text="" Name="NumberOfUsersTextBlock" Foreground="#FF2B2D2E" TextAlignment="Justify" FontSize="12" FontWeight="Normal" />
                <TextBlock Margin="5,45,20,10" VerticalAlignment="Top" HorizontalAlignment="Left" Text="Support and subscription:" Foreground="#FF2B2D2E" TextAlignment="Justify" FontSize="12" FontWeight="Normal" />
                <TextBlock Margin="170,45,20,10" VerticalAlignment="Top" HorizontalAlignment="Left" Text="" Name="SupportAndSubscriptionTextBlock" Foreground="#FF2B2D2E" TextAlignment="Justify" FontSize="12" FontWeight="Normal" />
            </Grid>
            <Button Height="50" HorizontalAlignment="Right" Name="aboutButton" VerticalAlignment="Bottom" Width="50" BorderThickness="0" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="0,0,20,15" Cursor="Hand" ToolTip="About" ClickMode="Release" Click="aboutButton_Click">
                <Button.Background>
                    <ImageBrush ImageSource="/OfflineIM.UI;component/Images/About.png" />
                </Button.Background>
            </Button>

            <Button Height="50" HorizontalAlignment="Right" Name="updateLicenseButton" VerticalAlignment="Bottom" Width="50" BorderThickness="0" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="0,0,75,15" Cursor="Hand" ToolTip="Update License" ClickMode="Release" Click="updateLicenseButton_Click">
                <Button.Background>
                    <ImageBrush ImageSource="/OfflineIM.UI;component/Images/UpdateLicense.png" />
                </Button.Background>
            </Button>
            <Button Height="50" HorizontalAlignment="Left" Name="StartButton" VerticalAlignment="Bottom" Width="50" BorderThickness="0" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="20,0,10,15" Cursor="Hand" ToolTip="Start Service" ClickMode="Release" Click="StartButton_Click">
                <Button.Background>
                    <ImageBrush ImageSource="/OfflineIM.UI;component/Images/Start.png" />
                </Button.Background>
            </Button>
            <Button Height="50" HorizontalAlignment="Left" Name="StopButton" VerticalAlignment="Bottom" Width="50" BorderThickness="0" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="75,0,10,15" Cursor="Hand" ToolTip="Stop Service" ClickMode="Release" Click="StopButton_Click">
                <Button.Background>
                    <ImageBrush ImageSource="/OfflineIM.UI;component/Images/Stop.png" />
                </Button.Background>
            </Button>
            <TextBlock Margin="135,5,20,14" VerticalAlignment="Bottom" HorizontalAlignment="Left" Text="" Name="ErrorTextBlock" Foreground="#FF58595B" TextAlignment="Justify" FontSize="12" FontWeight="Normal" />
        </Grid>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T14:12:11.100

您可以尝试使用此代码

1 基于触发器的样式

```
<Style x:Key="myStyle" TargetType="Button">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="Button">
        <ControlTemplate.Triggers>
          <Trigger Property="IsMouseOver"
                  Value="True">
            <Setter Property="Background"
                   Value="{StaticResource mouseOverColor}" />
          </Trigger>
        </ControlTemplate.Triggers>
        <ContentPresenter />
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

2 代码`Ressource`和`Control`

```
<Window x:Class="MouseOverTutorial.Window1"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   Title="Window1" Height="300" Width="300">
  <Window.Resources>
    <SolidColorBrush x:Key="mouseOverColor"
                    Color="Red" />
  </Window.Resources>
  <Grid>
    <Button Content="Click"></Button> 
  </Grid>
</Window> 
```

# css - 不透明度和覆盖：算法

> ID：12408193
> 
> 赞同：4
> 
> 时间：2012-09-13T14:08:54.503
> 
> 标签：css, algorithm, html, opacity

我必须创建一个可以处理某些 div 及其不透明度的系统。

我将直接举一些例子；所有的 div 都是黑色的： - 我有 2 个 div，它们重叠。div 具有不透明度 X 和 X，因此重叠区域的不透明度为 1。

*   我有 10 个 div，它们重叠。div 的不透明度为 x1、x2、...、x10，所有 div 的重叠区域的不透明度为 1。9 个（共 10 个）div 的重叠区域比 10 个 div 的重叠区域更透明，并且很快...

如何做到这一点？我需要一个算法，给我每个 div 的“X”不透明度参数。

谢谢大家。

解决了！

最终不透明度 = 1-(1-op1)(1-op2) 或 op1+op2-op1*op2

log 0.01 = x*log op

其中 op 是单层的不透明度

（感谢一位天才朋友）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:01:27.207

解决方案：

最终不透明度 = 1-(1-op1)(1-op2) 或 op1+op2-op1*op2

log 0.01 = x*log op

其中 op 是单层的不透明度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:21:59.123

发现你的问题很有趣。我不是数学家或物理学专家，所以只是猜测。

我们可以说两个div的重叠会导致一个重叠区域，其不透明度是两个div不透明度的加法。因此，如果

```
D1's opacity = 0.1 
and 
D2's opacity = 0.2 
their overlap opacity = 0.3\. (can it be?) 
```

因此，如果加法超过 1 个，则如果有 4 个以上的 div 重叠，则意味着组合重叠区域将是完全黑色的。

或者，我是否建议您也将您的问题放在 programer.stackexchage.com 上，那里的人只是喜欢算法 :)

好吧，也许它不会那样工作。我创建了一个简单的 jsFiddle。这里有人已经有了，无论如何我会给你这个链接。[http://jsfiddle.net/gHjrN/](http://jsfiddle.net/gHjrN/)

在这里，我创建了四个具有不同不透明度的 div。它们的不透明度总和远高于 1.0，但它们的集体重叠仍然不是漆黑的。顺便说一句，您为什么要搜索算法，浏览器似乎自己做：D

好的，我找到了一些链接，您可能会发现[重叠部分透明元素的不透明度](https://stackoverflow.com/questions/5711624/opacity-of-overlapping-partially-transparent-elements)很有帮助。计算的不透明度可能是`1-(D1's opacity X D2's opacity)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:22:03.653

不确定我是否完全理解这个问题，但如果我是你，我会设置一个 jsFiddle 来测试它。

类似这样的东西对于一些原型制作来说是一个很好的起点：

CSS：

```
#contain {position:relative;}
#actual-black {background-color:black}

.overlap {
    position:absolute;top:1em;left:0;
    background-color:black; opacity:0.2;
} 
```

HTML：

```
<div id="contain">
<div id="actual-black">The background is opaque black</div>
<div class="overlap">This is transparent black</div>
<div class="overlap">This is transparent black</div>
<div class="overlap">This is transparent black</div>
<div class="overlap">This is transparent black</div>
</div>​ 
```

使用不同数量的透明 div 以及它们的不透明度。设置一个新类（例如“overlap2”）并对其应用不同的不透明度等...

如果有一种“算法”可以在所有浏览器中处理这个问题，我会感到惊讶，但我对结果真的很感兴趣（希望我错了，这实际上是可以预测的）所以请发布你发现的内容。

# javascript - jQuery 扩展接受一个字符串而不仅仅是一个对象

> ID：12408196
> 
> 赞同：1
> 
> 时间：2012-09-13T14:09:00.450
> 
> 标签：javascript, jquery

这可能是一个愚蠢的问题，但我似乎无法找到解决方案......

我只是想做一个**isNullOrWhiteSpace**扩展（与 .NET 同名），以确定字符串是否为`'', '0', 0, undefined, null`. 没什么疯狂的。

现在用一个典型的 jQuery 扩展来做这件事，它似乎总是在寻找一个 jQuery**对象**来传递。但是在我的扩展中，我需要它来处理一个简单的**字符串**，但是当我使用它时它根本不起作用做。

```
$.fn.isNullOrWhiteSpace = function () {
    if (['', '0', 0, undefined, null].indexOf($.trim(this)) > -1) {
        return false;
    }
    return true;
};

'testing'.isNullOrWhiteSpace(); // doesn't work
// Uncaught TypeError: Object has no method 'isNullOrWhiteSpace' 
```

**我在这里想念什么？**

- 从下面的答案，原来它应该是简单的：

**`$.isNullOrWhiteSpace`**，这`$.fn.`部分使它成为一个 jQuery-Object 扩展，而不仅仅是一个常规扩展（比如`$.isArray()`，`$.trim()`（我在自己的问题中使用它......叹气））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:13:17.940

如果你*必须*把它与 jQuery 挂钩——而且真的没有理由超越命名空间经济——你可以这样做：

```
$.nullOrWhitespace = function(s) {
  return !s || !(s.replace(/\s*/, '')); // or something like this; just an example
}; 
```

然后调用它

```
if ( $.nullOrWhitespace( yourString ) ) {
  ... whatever ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:12:21.137

尝试`String.prototype.isNullOrWhiteSpace = function() {...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:14:02.627

据我所知，`$.fn.isNullOrWhiteSpace`扩展了 jQuery。

如果您正在扩展 jQuery，您可能需要在 jQuery 对象上调用该方法。

`'testing'`是一个字符串，但`$('testing')`会是一个 jQuery 对象。

这似乎有效：

```
$.fn.isNullOrWhiteSpace = function () {
    if (['', '0', 0, undefined, null].indexOf($.trim(this.selector)) > -1) {
        return false;
    }
    return true;
};

alert($('').isNullOrWhiteSpace());
alert($('testing').isNullOrWhiteSpace()); 
```

### [演示](http://jsfiddle.net/hw277/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T14:15:10.437

`$.fn`默认情况下将上下文设置`this`为匹配元素的数组（与选择器一起使用时）。在这种情况下，您显然不需要。

```
$.isNullOrWhiteSpace = function (str) {        
     return $.inArray($.trim(str), ['', '0', 0, undefined, null]) > -1;
}; 
```

这是大多数其他实用程序方法所做的，例如：`$.inArray`，`$.trim`就像我们已经使用过的一样！:)

# c# - Html 压缩器

> ID：12408197
> 
> 赞同：0
> 
> 时间：2012-09-13T14:09:06.067
> 
> 标签：c#, asp.net, html, compression

我需要我网站中的页面加载得更快。所以我听说了一个 html 压缩器，它可以减少我发送给客户端的 html 大小。有谁知道这样做的方法。如果可能的话，我更喜欢已经制作的 dll ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:25:31.633

使用压缩并不总是有效。

当 IIS 压缩页面时，它会将其保存在内存中，直到页面过期或内容发生更改。如果服务器端有更多包含大量数据的动态页面，那么它实际上会降低性能。

您应该尝试优化服务器端代码并​​减少客户端代码。

1.  许多人犯了用很长的变量名编写 JavaScript 的错误。这会增加页面的大小。
2.  对 html 的不必要评论也不好。
3.  将 .js 文件用于常用功能。
4.  如果您有不经常更改的数据，根据数据类型和数据大小，您可以尝试在服务器端缓存中缓存相同的数据。这减少了数据库中的查询。

压缩适用于静态页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:42:03.357

IIS 内置了这种压缩，默认情况下它对静态文件是打开的。

要在服务器级别启用动态压缩，请使用以下命令：

```
C:\Windows\System32\Inetsrv\Appcmd.exe set config -section:urlCompression -doStaticCompression:true -doDynamicCompression:true 
```

或者，如果您只想为一个站点启用动态压缩：

```
C:\Windows\System32\Inetsrv\Appcmd.exe set config "Site Name" -section:urlCompression -doStaticCompression:true -doDynamicCompression:true 
```

如果您想了解有关在 IIS 中为动态文件配置压缩的更多信息，请参阅以下链接：

[http://technet.microsoft.com/en-us/library/cc771003%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc771003%28v=ws.10%29.aspx)

[http://weblogs.asp.net/owscott/archive/2009/02/22/iis-7-compression-good-bad-how-much.aspx](http://weblogs.asp.net/owscott/archive/2009/02/22/iis-7-compression-good-bad-how-much.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:20:55.750

繁重的 CSS 文件会影响网页的加载时间，您可以使用此在线实用程序来压缩您的 CSS，它将使您的网页加载速度更快。

[http://www.cssdrive.com/index.php/main/csscompressor](http://www.cssdrive.com/index.php/main/csscompressor)

同样适用于 JS 文件，这里是 JS Compressor 工具

[http://jscompress.com/](http://jscompress.com/)

注意：我不是上述网站的发起人/支持者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:15:44.270

查看您的网站生成的 html。通过浏览 Internet Explorer（或其他浏览器）中的页面来执行此操作，右键单击浏览器中的页面正文并选择查看源。如果您使用的是 ASP.NET，则隐藏字段 _VIEWSTATE 可能很大。如果是这样，请尝试在不需要的各种页面控件中禁用它。还要在源代码中查找其他不需要的输出。

# iphone - iPhone 4 不加载视网膜图像

> ID：12408201
> 
> 赞同：0
> 
> 时间：2012-09-13T14:09:10.017
> 
> 标签：iphone, objective-c, xcode, uiimage, retina-display

我有一个适用于 iPhone 的应用程序，它使用了一些与视网膜和非视网膜设备兼容的图像。当我在任何 iPhone 模拟器上午餐应用程序时，它都能完美运行，加载视网膜和非视网膜图像。

当我选择要在我的物理设备 ( **iPhone 4** ) 上运行的应用程序时，就会出现这些问题。在这种情况下，视网膜图像不再加载，一切看起来都很模糊。

**因为我还没有**开发者帐户，所以我使用了“不要代码签名” 。我只是想感受一下我的应用程序，可能是因为这个吗？

这是一个在我的物理设备上具有相同行为 的**示例项目：http:** [//db.tt/XL4DPLH8](http://db.tt/XL4DPLH8)

**已解决：**视网膜图像的名称为 2X 而不是 2x...也在**项目**和**example.app** / 感谢 Adam 的回答（他的回答消失了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:25:38.797

通过 NSLog 在启动时检查分辨率，然后设置适当的图像...

```
 - (void)viewDidLoad
 {
 [super viewDidLoad];

 //   NSLog(@"bound :%f", [[UIScreen mainScreen] bounds].size.height);
 NSString* imageName;
 if([[UIScreen mainScreen]bounds].size.height == 568)
 {
    imageName= @"568h@2x.png";
 }
 else{
     imageName= @"bg@2x.png";  
 }
 self.view.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage  imageNamed:imageName]]; 
```

希望帮助

# class - 宾果游戏，类接口错误？

> ID：12408204
> 
> 赞同：1
> 
> 时间：2012-09-13T14:09:17.813
> 
> 标签：class, interface, enums, undeclared-identifier

**谁能告诉我为什么我会收到这些错误？如果是这样，我该如何解决它们？**

```
Bingo.java:176: ']' expected
private static void makeCard(int[][] card, int[picks])
                                               ^
Bingo.java:176: ')' expected
private static void makeCard(int[][] card, int[picks])
                                                    ^
Bingo.java:176: illegal start of type
private static void makeCard(int[][] card, int[picks])
                                                     ^
Bingo.java:176: <identifier> expected
private static void makeCard(int[][] card, int[picks])
                                                      ^
Bingo.java:177: ';' expected
{
 ^
Bingo.java:178: illegal start of type
    System.out.println("Current Number Picks: \n");
          ^
Bingo.java:178: ';' expected
    System.out.println("Current Number Picks: \n");
              ^
Bingo.java:178: invalid method declaration; return type required
    System.out.println("Current Number Picks: \n");
               ^
Bingo.java:178: illegal start of type
    System.out.println("Current Number Picks: \n");
                       ^
Bingo.java:181: illegal start of type
            for (int i=0; i<count; i++){
            ^
Bingo.java:181: ')' expected
            for (int i=0; i<count; i++){
                      ^
Bingo.java:181: illegal start of type
            for (int i=0; i<count; i++){
                       ^
Bingo.java:181: <identifier> expected
            for (int i=0; i<count; i++){
                        ^
Bingo.java:181: ';' expected
            for (int i=0; i<count; i++){
                         ^
Bingo.java:181: > expected
            for (int i=0; i<count; i++){
                                 ^
Bingo.java:181: '(' expected
            for (int i=0; i<count; i++){
                                    ^
Bingo.java:189: class, interface, or enum expected
private static void announceWin(int winFound, int numPicks)
               ^
Bingo.java:192: class, interface, or enum expected
}
^
Bingo.java:196: class, interface, or enum expected
    for (int i = 0;  i < numPicks;  i++){
                     ^
Bingo.java:196: class, interface, or enum expected
    for (int i = 0;  i < numPicks;  i++){
                                    ^
Bingo.java:198: class, interface, or enum expected
                            return true;}
                                        ^
Bingo.java:202: class, interface, or enum expected
}
^
22 errors 
```

**这是代码：**

```
import java.util.*;
import java.io.*;
import java.util.Arrays;

public class Bingo
{
public static final int ROWS = 5;
public static final int COLS = 5;
public static final int VERTICAL = 1;
public static final int DIAGONAL = 2;
public static final int HORIZONTAL = 3;
public static int winFound;
public static int currPick = 0;
public static int randomPick;
public static int WinFound;

public static void main(String[] args)
{   
int Totcards;
int[][] card = new int[ROWS][COLS];

fillCard (card);
printCard(card);
playGame(card);
printCard(card);

  }

private static void fillCard (int[][] card)
{
//  FileReader fileIn = new FileReader("Bingo.in");
//  Bufferreader in = new Bufferreader(fileIn);

    try {
    Scanner scan = new Scanner(new File("bingo.in"));
      for (int i=0; i<card.length; i++){
               for (int j=0; j<card[0].length; j++){
                card[i][j] = scan.nextInt();
    }
    }
    } catch(FileNotFoundException fnfe) {
      System.out.println(fnfe.getMessage());
    }

}

private static void printCard (int[][] card)
{
    System.out.println("\n\tYOUR BINGO CARD : ");
    System.out.println("\n\tB    I    N    G    O");
    System.out.println("\t----------------------");

    for (int i=0; i<card.length; i++){
          for (int j=0; j<card[0].length; j++){
              System.out.print("\t" + card[i][j]);
              }
    System.out.print("\n");
    }
}

private static void playGame (int[][] card)
{

    int numPicks = 0;       

    while (true)
            {
               markCard (card);   // Generate a random num & zero-it out
       winFound = checkForWin(card);  //  Look for zero sums
       numPicks++;

               if (winFound != 0)
               {
                 announceWin (winFound, numPicks);
                 return;
               }
            }

  }     
private static void markCard (int[][] card)
{
  int randomPick = (int) (Math.random() * 74) + 1;

      for (int j = 0;  j < ROWS;  j++){
        for (int k = 0;  k < COLS;  k++){
            if (card[j][k]==randomPick)
                    card[j][k] = 0;}
    System.out.print(" " + randomPick);
    }
}

private static int checkForWin(int[][] card)
{
  int sum=0;

   for (int i = 0;  i < ROWS;  i++)
       {
        sum = 0;
        for (int j = 0;  j < COLS;  j++)
        sum += card[i][j];

        if (sum == 0)
            return HORIZONTAL;
       }

       for (int j = 0;  j < COLS;  j++)
       {
         sum = 0;
         for (int i = 0;  i < ROWS;  i++)
            sum += card[i][j];

        if (sum == 0)
            return VERTICAL;
       }

       sum = 0;
       for (int i = 0;  i < ROWS;  i++)
            sum += card[i][ROWS-i-1];
       if (sum == 0)
            return DIAGONAL;

       sum = 0;
       for (int i = 0;  i < ROWS;  i++)
          sum += card[i][i];

       if (sum == 0)
            return DIAGONAL;

       return WinFound;
    } 

private static void makeCard(int[][] card, int[picks])
{
    System.out.println("Current Number Picks: \n");
            int count = 100;
            int currPick = 0;
            for (int i=0; i<count; i++){
             currPick = (int)(Math.random() * 74) + 1;
             System.out.print(" " + currPick + "\n");
    picks[i] = currPick;
            System.out.print("i: " + i);
            }
}

private static void announceWin(int winFound, int numPicks)
{
System.out.println("winFound: " + winFound + "numpicks: " + numPicks);
}

private static boolean duplicate (int currPick, int[picks], int numPicks)
{
    for (int i = 0;  i < numPicks;  i++){
                    if (picks[i] == currPick){
                            return true;}
        }
            return false;

}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:53:47.623

您错误地接受了一个 int 数组参数。

你有 int [picks] 它应该是 int[] picks

```
 import java.util.*;
import java.io.*;
import java.util.Arrays;

public class Bingo
{
public static final int ROWS = 5;
public static final int COLS = 5;
public static final int VERTICAL = 1;
public static final int DIAGONAL = 2;
public static final int HORIZONTAL = 3;
public static int winFound;
public static int currPick = 0;
public static int randomPick;
public static int WinFound;

public static void main(String[] args)
{   
int Totcards;
int[][] card = new int[ROWS][COLS];

fillCard (card);
printCard(card);
playGame(card);
printCard(card);

  }

private static void fillCard (int[][] card)
{
//  FileReader fileIn = new FileReader("Bingo.in");
//  Bufferreader in = new Bufferreader(fileIn);

    try {
    Scanner scan = new Scanner(new File("bingo.in"));
      for (int i=0; i<card.length; i++){
               for (int j=0; j<card[0].length; j++){
                card[i][j] = scan.nextInt();
    }
    }
    } catch(FileNotFoundException fnfe) {
      System.out.println(fnfe.getMessage());
    }

}

private static void printCard (int[][] card)
{
    System.out.println("\n\tYOUR BINGO CARD : ");
    System.out.println("\n\tB    I    N    G    O");
    System.out.println("\t----------------------");

    for (int i=0; i<card.length; i++){
          for (int j=0; j<card[0].length; j++){
              System.out.print("\t" + card[i][j]);
              }
    System.out.print("\n");
    }
}

private static void playGame (int[][] card)
{

    int numPicks = 0;       

    while (true)
            {
               markCard (card);   // Generate a random num & zero-it out
       winFound = checkForWin(card);  //  Look for zero sums
       numPicks++;

               if (winFound != 0)
               {
                 announceWin (winFound, numPicks);
                 return;
               }
            }

  }     
private static void markCard (int[][] card)
{
  int randomPick = (int) (Math.random() * 74) + 1;

      for (int j = 0;  j < ROWS;  j++){
        for (int k = 0;  k < COLS;  k++){
            if (card[j][k]==randomPick)
                    card[j][k] = 0;}
    System.out.print(" " + randomPick);
    }
}

private static int checkForWin(int[][] card)
{
  int sum=0;

   for (int i = 0;  i < ROWS;  i++)
       {
        sum = 0;
        for (int j = 0;  j < COLS;  j++)
        sum += card[i][j];

        if (sum == 0)
            return HORIZONTAL;
       }

       for (int j = 0;  j < COLS;  j++)
       {
         sum = 0;
         for (int i = 0;  i < ROWS;  i++)
            sum += card[i][j];

        if (sum == 0)
            return VERTICAL;
       }

       sum = 0;
       for (int i = 0;  i < ROWS;  i++)
            sum += card[i][ROWS-i-1];
       if (sum == 0)
            return DIAGONAL;

       sum = 0;
       for (int i = 0;  i < ROWS;  i++)
          sum += card[i][i];

       if (sum == 0)
            return DIAGONAL;

       return WinFound;
    } 

private static void makeCard(int[][] card, int[] picks)
{
    System.out.println("Current Number Picks: \n");
            int count = 100;
            int currPick = 0;
            for (int i=0; i<count; i++){
             currPick = (int)(Math.random() * 74) + 1;
             System.out.print(" " + currPick + "\n");
    picks[i] = currPick;
            System.out.print("i: " + i);
            }
}

private static void announceWin(int winFound, int numPicks)
{
    System.out.println("winFound: " + winFound + "numpicks: " + numPicks);
}

private static boolean duplicate (int currPick, int[] picks, int numPicks)
{
    for (int i = 0;  i < numPicks;  i++){
                    if (picks[i] == currPick){
                            return true;}
        }
            return false;

}
} 
```

为我编译

# java - struts2 动作 - 多个方法和多个类

> ID：12408208
> 
> 赞同：1
> 
> 时间：2012-09-13T14:09:27.653
> 
> 标签：java, struts2

如何在 struts2 中创建一个在不同类中使用多个方法的动作？

因此，例如，我想要这样的东西，但我很确定这不起作用：

```
<action name="person_create" method="personCreate, carCreate" class="PersonActionBean, CarActionBean">
   <result name="success">index.jsp</result>
</action> 
```

具体来说，我使用的是struts 2.1.8.1

**PersonAction.java** - **personCreate()**：

`Person person = new Person();`

**CarAction.java** - **carCreate()**：

`Car car = new Car();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:25:48.430

有两个变量：

**1**：你为什么愿意调用2个动作，从MVC的概念来看，你不应该这样做，如果你想处理不同的对象，你应该建立一个新的层（例如接口，或服务层）来做到这一点。

**2**：如果你必须这样做，你可以定义一个新的动作，它使用`chain`结果类型来调用它们。这里是[链结果类型](http://struts.apache.org/2.x/docs/chain-result.html)，但要小心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:13:42.037

或者你可以做这样的事情

```
public class MainAction extends ActionSupport{

private Car car;
private Persone persone;

public String execute() {
 }

// add getters and setters to car and persone objects.
} 
```

您的 jsp 将如下所示：

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
</head>
<body>
<s:form action="init">
    <s:textfield key="car.name" name="car.name"/>
    <s:textfield key="car.year" name="car.year"/>
    <s:textfield key="car.name" name="car.name"/>
    <s:textfield key="car.year" name="car.year"/></s:textarea>
    <s:submit key="init.submit"/>
</s:form>
</body>
</html> 
```

和你的 struts.xml 文件：

```
<action name="init" method="execute" class="MainAction">
   <result name="success">index.jsp</result>
</action> 
```

当您提交表单时，您的操作类将包含人员和汽车对象以及表单中的信息））

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:01:20.243

你是对的，它不是那样工作的。考虑一个操作是否返回成功，而另一个操作是否返回错误。在这种情况下，struts2 框架会执行什么结果？

相反，您可以做的是调用一种操作方法，该方法将调用其中的其他两种方法。像这样的东西：

```
<action name="person_create" method="execute" class="MainAction">
   <result name="success">index.jsp</result>
</action> 
```

作为该操作的一部分，您可以调用其他方法，例如：

```
public String execute() {
    Person person = new Person();
    Car car = new Car();
    // Add any additional logic and return appropriate value
} 
```

如果上述不是合适的解决方案，请编辑您的问题，详细说明为什么要在操作中调用两个单独的方法。我仍然不清楚为什么你会以这种方式将两种方法用于一个操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T14:21:28.157

如果我清楚地了解您，您想在调用 persone_create 操作时调用 2 个操作类。你能告诉我这个动作课吗？如果此类具有相同名称的字段，那将是一个问题。因为动作类中的所有字段（当调用动作类时）都进入 ValueStack，结果只有这些类中的一个具有来自您的 jsp 页面的信息的所有字段。

# magento - Magento 1.7.0.2 索引管理覆盖 URL 重写

> ID：12408213
> 
> 赞同：3
> 
> 时间：2012-09-13T14:09:39.923
> 
> 标签：magento, magento-1.7

我对 Magento 1.7.0.2 上的索引管理有一点问题。

我有很多针对类别的自定义 URL 重写。

当我重新索引目录 URL 重写时，它会删除我对类别的所有自定义重写并将它们设置回系统默认值。

重新索引前：http: [//i.imgur.com/4s1oo.png](http://i.imgur.com/4s1oo.png) 重新索引后：http: [//i.imgur.com/0U8zE.png](http://i.imgur.com/0U8zE.png)

另外，缓存管理和索引管理有什么区别？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T14:24:40.433

Magento 正在更改这些，因为您没有更改**id_path**。如果您为自定义类别重写指定不同的**id_path**值，Magento 将不会覆盖它。

您想要实现的目标也可以通过自定义 URL 重写来完成。例如：

*请求路径*：目录/类别/视图/id/118

*目标路径*：“公司”

通过这种方式，您将成为系统重写的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T06:42:47.390

这让我非常疯狂，直到我想出了一个不错的小解决方法。

1.  我创建了我的新对象（在我的情况下，它是顶部导航的一个类别
2.  我去 URL Rewrite 并记下新类别的 ID 路径
3.  我删除系统生成的 URL Rewrite
4.  我创建了一个自定义重写，指定了已删除对象的 ID 路径、请求路径，然后是所需 URL 的路径
5.  然后我去 phpmyadmin > core_url_rewrite 并找到我新创建的自定义重写
6.  我将 store_id 更改为 0 （不更改任何其他内容）
7.  然后我回到 Magento 并运行重新索引。这会创建一个新的系统生成的具有更高 url_rewrite_id 的重写（参见 phpmyadmin > core_url_rewrite 表）
8.  然后我用所需的路径创建我的页面
9.  重新索引/刷新缓存和 presto.. 我的顶部导航现在有一个菜单项到我的新页面。

# mysql - 预替换错误字母数字字符串 - MYSQL

> ID：12408217
> 
> 赞同：1
> 
> 时间：2012-09-13T14:09:51.680
> 
> 标签：mysql, preg-replace

嗨，我使用 preg_replace 将非字母数字数据替换为“”。

1)

```
SELECT 
    PREG_REPLACE('[^A-Za-z0-9]','',CATALOGUEREFERENCE) AS INSTRUMENT
FROM
    FILES; 
```

2)

```
select 
    preg_replace('[[:alnum:]]', '',CATALOGUEREFERENCE) as instrument
from
    files; 
```

第一个查询将记录显示为 blob，第二个查询显示空记录。任何人都可以建议用''替换非字母数字数据的查询修改。

**输入文件**：GETA2000003890 MAC00007000 NAS00006000 MAS000007000 MAS2SA200006000

**所需输出**：GET MAC NAS MAS MAS2SA2

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:35:04.573

我认为您想要的输出是：**GET MAC NAS MAS MAS**。

代码：

```
$input = 'GETA2000003890 MAC00007000 NAS00006000 MAS000007000 MAS2SA200006000';
$output = preg_replace('/([A-Z]{3})(\w*)/i', '$1', $input);
echo $output; // GET MAC NAS MAS MAS 
```

# c# - 使用 .NET 读取 Google 书签 RSS 失败

> ID：12408232
> 
> 赞同：0
> 
> 时间：2012-09-13T14:10:23.660
> 
> 标签：c#, .net, rss, bookmarks

嗨，我遇到了奇怪的问题。我想在我的 .NET 应用程序中使用 Google Bookmarks RSS。这是代码：

```
string rssUrl = "https://www.google.com/bookmarks/?output=rss";
NetworkCredential credentials = new NetworkCredential("myusername", "mypassword");
XmlUrlResolver resolver = new XmlUrlResolver { Credentials = credentials };
XmlReaderSettings settings = new XmlReaderSettings { XmlResolver = resolver };
XmlReader reader = XmlReader.Create(rssUrl, settings);
XDocument document1 = XDocument.Load(reader); // Fails here 
```

当我在浏览器中打开 rssUrl 时，我将所有书签完美地视为 RSS 提要。当我运行此代码时，它失败了。实际上，返回的是 Google SignOn 页面而不是 RSS。

**使用完全相同的代码，我可以毫无问题地阅读 Gmail RSS。**

但不是 Google 书签 RSS。这对我来说没有任何意义。它应该直截了当而且非常简单。

请指教。谢谢一堆。

# ffmpeg - FMS FLV (Speex) 转 mp3/mp4/acc/wav

> ID：12408239
> 
> 赞同：0
> 
> 时间：2012-09-13T14:10:45.343
> 
> 标签：ffmpeg, flv, flash-media-server, speex

我正在尝试将 FLV 的音频解码为可播放的格式。我试图使用这个 SO 帖子：[FMS FLV to mp3..](https://stackoverflow.com/questions/3655089/fms-flv-to-mp3-aac-wav)作为示例，但我的 FLV 是用 Speex 编码的。

我在 Fedora 15 机器上用 --enable-libspeex 编译了 ffmpeg。

我相信这可以用 ffmpeg 完成，但我很难弄清楚如何去做。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T18:41:39.597

您的 ffmpeg 需要配置`--enable-libspeex`为支持 Speex 解码。由于您没有提供您的操作系统，因此我无法提供任何更具体的说明。一旦您构建了可以解码 speex 的 ffmpeg，最简单的命令将是：

```
ffmpeg -i input.flv output.wav 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T09:40:44.950

在重新编码 flv 文件（speex 到 mp3）时，如果出现采样率错误，请尝试以下操作：

```
ffmpeg -i c:\in.flv -acodec libmp3lame -ar 44100 -vcodec copy c:\out.flv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T18:45:28.420

你的输入是什么并不重要。只要您在 ffmpeg 中启用了解码器和编码器，它就会执行此操作。

```
ffmpeg -i inputfile.flv -acodec libmp3lame any_other_parameters_you_want -vcodec copy out.flv 
```

会成功的。

运行 ffmpeg -codecs 查看支持的编解码器，运行 ffmpeg -formats 查看安装中支持的格式。

# java - jsch & nohup - 程序无法启动

> ID：12408243
> 
> 赞同：2
> 
> 时间：2012-09-13T14:10:51.193
> 
> 标签：java, jsch, nohup

我想使用 jsch 和 'nohup with &' 命令在后台启动我的程序。这是我的代码：

```
 String command = "sudo nohup -jar [path to my jar] &";
    try{
        java.util.Properties config = new java.util.Properties();
        config.put("StrictHostKeyChecking", "no");
        JSch jsch = new JSch();
        Session session = jsch.getSession(user, host, 22);
        session.setPassword(password);
        session.setConfig(config);
        session.connect();
        System.out.println("Connected");

        Channel channel = session.openChannel("exec");
        ((ChannelExec)channel).setPty(true);
        ((ChannelExec)channel).setCommand(command);
        channel.setInputStream(null);
        ((ChannelExec)channel).setErrStream(System.err);

        InputStream in = channel.getInputStream();
        channel.connect(); 
        byte[] tmp = new byte[1024];
        while (true) {
            while (in.available() > 0) {
                int i = in.read(tmp, 0, 1024);
                if (i < 0) {
                    break;
                }
                System.out.print(new String(tmp, 0, i));
            }

            if (channel.isClosed()) {
                System.out.println("exit-status: " + channel.getExitStatus());
                break;
            }

            try {
                Thread.sleep(1000);
            } catch (Exception ee) {
            }
        }
        channel.disconnect();
        session.disconnect();
        System.out.println("DONE");
    } catch(Exception e) {
        e.printStackTrace();
    } 
```

作为我得到的输出：

```
Connected
exit-status: 0
DONE 
```

但程序没有启动。没有'&'它可以工作，但没有它。同样的情况是当我将 nohup 命令放入 .sh 脚本然后运行它时。任何想法如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-30T15:59:31.803

3年后...

我最近遇到了同样的问题。我通过使用解决了它：

```
((ChannelExec)channel).setPty(false); 
```

并通过重定向输出流。在我看来，这取决于正在执行的程序。我有一个不同的脚本，它只是睡觉并将日期打印到一个文件中，它不需要任何重定向。它也独立于JSch。使用命令行 ssh 也存在问题。

我实际想要执行的命令需要将其输出流重定向到标准输出之外。如果单独重定向标准输出不起作用，则重定向错误流并关闭输入流`<&-`可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-06T09:06:19.740

替换这一行：

```
String command = "sudo nohup -jar [path to my jar] &"; 
```

有了这个：

```
String command = "sudo nohup -jar [path to my jar]>out.log 2>&1 &"; 
```

# jquery - jquery 插件 jscrollpane 和 fancybox 转到顶部

> ID：12408246
> 
> 赞同：0
> 
> 时间：2012-09-13T14:11:10.093
> 
> 标签：jquery, fancybox, jscrollpane

我有一个包含两个插件的站点：jscrollpane 和 fancybox。

我想要一个带有 jscrollpane 的 div 滚动直到完成。里面有很多可以用fancybox点击的图片。

当我使用滚动条（滚动窗格）向下滚动并单击图像时，不会打开花式框，而是转到 div 的顶部。为什么？如果我不滚动 div 并单击第一张照片，fancybox 就可以工作。如何解决这个问题？

这是我的 javascript 和 html

```
<script type="text/javascript"> 
$(document).ready(function() {

    $(function()
    {
        jQuery('.scroll-pane').jScrollPane({
            autoReinitialise: true
         });

    });

    $("a.fancy").fancybox({
        'transitionIn'  :   'fade',
        'transitionOut' :   'fade',
        'speedIn'       :   600, 
        'speedOut'      :   200, 
        'overlayShow'   :   true
    });

});

</script>

<div class="scroll-pane">
                    <a href="img/gallery/big/01.jpg" class="fancy" rel="group"><img src="img/gallery/thumb/01.jpg" class="gallery" style="margin-top:0px;"/></a>
                    <a href="img/gallery/big/02.jpg" class="fancy" rel="group"><img src="img/gallery/thumb/02.jpg" class="gallery" style="margin-top:0px;"/></a>
                    <a href="img/gallery/big/03.jpg" class="fancy" rel="group"><img src="img/gallery/thumb/03.jpg" class="gallery" style="margin-top:0px;"/></a>
                    <a href="img/gallery/big/04.jpg" class="fancy" rel="group"><img src="img/gallery/thumb/04.jpg" class="gallery" style="margin-top:0px;"/></a>
                    <a href="img/gallery/big/05.jpg" class="fancy" rel="group"><img src="img/gallery/thumb/05.jpg" class="gallery" style="margin-top:0px;"/></a>
                    <a href="img/gallery/big/06.jpg" class="fancy" rel="group"><img src="img/gallery/thumb/06.jpg" class="gallery" /></a>
</div> 
```

滚动窗格的 css

```
.scroll-pane
{
    width: 98%;
    height: 380px;
    overflow: auto;
} 
```

# c# - webBrowser 控件停止来自网站的 javascript 警报

> ID：12408249
> 
> 赞同：5
> 
> 时间：2012-09-13T14:11:17.690
> 
> 标签：c#, javascript

我在 VS 2010 C# 中使用 webbrowser 控件开发 Windows 窗体应用程序。我的目标是在这个网站中自动导航，但是当我在某个点时，网站会弹出一个 javascript 警报，它将停止自动化，直到我按下 OK 按钮。我通过在弹出时模拟输入按键来解决了这个问题，但应用程序应该保持焦点以使其工作。我的问题是，有没有办法从网站上杀死这个自定义 javascript 警报（我无权访问侧面，从客户端杀死它）所以它不显示或任何其他方式来解决这个问题？显示的 javascript 警报（消息框）不是错误，是该网站的程序员出于某种原因放在那里的 javascript 警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:00:46.443

您可以尝试使用该`Navigated`事件并`DocumentText`在页面加载之前拦截以删除`alert(...);`引用。

从`Navigated`MSDN 上的页面：

> 当控件导航到新文档时，处理`Navigated`事件以接收通知。`WebBrowser`当`Navigated`事件发生时，新文档已经开始加载，这意味着您可以通过 、 和 属性访问加载`Document`的`DocumentText`内容`DocumentStream`。

这是一些代码：

```
using System.Windows.Forms;
using System.Text.RegularExpressions;

namespace Your.App
{
    public class PopupSuppress
    {
        WebBrowser _wb;
        public PopupSupress()
        {
            _wb = new WebBrowser();
            _wb.Navigated += new WebBrowserNavigatedEventHandler(_wb_Navigated);
        }

        void _wb_Navigated(object sender, WebBrowserNavigatedEventArgs e)
        {
            string alertRegexPattern = "alert\\([\\s\\S]*\\);";
            //make sure to only write to _wb.DocumentText if there is a change.
            //This will prompt a reloading of the page (and another 'Navigated' event) [see MSDN link]
            if(Regex.IsMatch(_wb.DocumentText, alertRegexPattern))
                _wb.DocumentText = Regex.Replace(_wb.DocumentText, alertRegexPattern, string.Empty);
        }
    }
} 
```

来源/资源：

*   [http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigated.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigated.aspx)
*   [http://regexpal.com/](http://regexpal.com/)
*   （对不起，有更多但只能让我发布 2 个链接）

# c# - Silverlight 应用程序 SSL WCF 自托管服务 在浏览器中工作，但不在浏览器外

> ID：12408253
> 
> 赞同：0
> 
> 时间：2012-09-13T14:11:24.897
> 
> 标签：c#, wcf, ssl, service, out-of-browser

[ssl、silverlight、wcf 和本地安装](https://stackoverflow.com/questions/8408483/ssl-silverlight-wcf-and-local-install)

我有这个完全相同的问题，但我找不到解决方案？..有人有什么想法吗？

我的应用程序在浏览器中运行良好，但在浏览器之外运行良好。我在 SSL 上使用自托管的 WCF 服务（使用自生成的 SSL 证书）。如果我在运行提琴手的情况下从浏览器中运行应用程序，它就可以工作。没有提琴手，它不会。

# sql - 应用程序向 sql-server 管理工作室返回不同的结果

> ID：12408271
> 
> 赞同：-1
> 
> 时间：2012-09-13T14:12:18.423
> 
> 标签：sql, sql-server, hibernate, jakarta-ee

我有一个使用以下 sql 获取一些数据的应用程序：

```
SELECT Sum(fieldname)          AS fieldNameHere,
   Sum(Cast(error AS INT))  AS Error,
   Sum(jsperror)            AS JSPError,
   Sum(linkerror)       AS LinkError
FROM   schemaname.sessiondata session
WHERE  starttime >= :startTime0
   AND starttime < :endTime0
   AND fieldname = :fieldNameVal0
UNION ALL
SELECT Sum(fieldname)          AS fieldNameHere,
   Sum(Cast(error AS INT))  AS Error,
   Sum(jsperror)            AS JSPError,
   Sum(linkerror)       AS LinkError
FROM   schemaname.sessiondata session
WHERE  starttime >= :startTime1
   AND starttime < :endTime1
   AND fieldname = :fieldNameVal1
UNION ALL
SELECT Sum(fieldname)          AS fieldNameHere,
   Sum(Cast(error AS INT))  AS Error,
   Sum(jsperror)            AS JSPError,
   Sum(linkerror)       AS LinkError
FROM   schemaname.sessiondata session
WHERE  starttime >= :startTime2
   AND starttime < :endTime2
   AND fieldname = :fieldNameVal2 
```

调试和检查代码参数值是：

```
startTime0=Wed Sep 12 22:00:00 BST 2012
endTime0=Wed Sep 12 23:00:00 BST 2012
hitPrices0=1 
startTime1=Wed Sep 12 23:00:00 BST 2012
endTime1=Thu Sep 13 00:00:00 BST 2012
hitPrices1=1
startTime2=Thu Sep 13 00:00:00 BST 2012
endTime2=Thu Sep 13 01:00:00 BST 2012 
hitPrices2=1 
```

然后在 SQL-server management studio 中运行以下 SQL 提供正确的数据：

```
SELECT Sum(fieldname)          AS fieldNameHere,
   Sum(Cast(error AS INT))  AS Error,
   Sum(jsperror)            AS JSPError,
   Sum(linkerror)       AS LinkError
FROM   schemaname.sessiondata session
WHERE  starttime >= '2012-09-12 22:00:00'
   AND starttime < '2012-09-12 23:00:00'
   AND fieldname = 1
UNION ALL
SELECT Sum(fieldname)          AS fieldNameHere,
   Sum(Cast(error AS INT))  AS Error,
   Sum(jsperror)            AS JSPError,
   Sum(linkerror)       AS LinkError
FROM   schemaname.sessiondata session
WHERE  starttime >= '2012-09-12 23:00:00'
   AND starttime < '2012-09-13 00:00:00'
   AND fieldname = 1
UNION ALL
SELECT Sum(fieldname)          AS fieldNameHere,
   Sum(Cast(error AS INT))  AS Error,
   Sum(jsperror)            AS JSPError,
   Sum(linkerror)       AS LinkError
FROM   schemaname.sessiondata session
WHERE  starttime >= '2012-09-13 00:00:00'
   AND starttime < '2012-09-13 01:00:00'
   AND fieldname = 1 
```

注意：这不是 startDate 和 endDate 的错误，参数与字段不同。startDate 和 end date 参数表示该特定时间间隔的 startdatetime 和 enddatetime。startDate 字段表示会话开始时间。

应用程序中返回的错误结果：

```
[null, null, null, null]
[2, 1, 0, 0]
[null, null, null, null] 
```

以及来自 sqlsms 的正确结果：

```
NULL    NULL    NULL    NULL
NULL    NULL    NULL    NULL
NULL    NULL    NULL    NULL 
```

我无法弄清楚这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:32:09.803

我发现格式化日期对象并作为字符串传递以在 SQL 上设置参数解决了这个问题。

# oracle9i - 同一张表的联合和连接列

> ID：12408275
> 
> 赞同：1
> 
> 时间：2012-09-13T14:12:21.177
> 
> 标签：oracle9i

我有一个有列的表

```
date_1,date_2,date_3,
text_1,text_2,text_3\. 
```

我想写一个查询来获取

```
date_1 union date_2 union date_3 as date 
and text_1 union text_2 union text_3 as text. 
```

我可以单独合并它们，但我如何加入它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:31:42.160

如果你想要联合的行，那么你可以做..

```
select date1, text1 from table_1
union
select date2, text2 from table_2
union
select date3, text3 from table_2 
```

如果要单独加入列表，加入的条件是什么？您能否提供更多相关数据？

# c++ - 我应该在头文件或源文件中实现带有构造函数的结构吗？

> ID：12408285
> 
> 赞同：9
> 
> 时间：2012-09-13T14:12:58.237
> 
> 标签：c++, struct, constructor, header

好的，我正在用 [in C++] 结构编写代码，我不确定是在头文件还是在源文件中实现结构。

该结构包括一个构造函数：

```
struct Point
{
    double x;
    double y;

    Point(double xCo, double yCo)
    {
        this->x = xCo;
        this->y = yCo;
    }

    int comparePoint(Point point)
    {
        ...
    }
}; 
```

我在头文件中写道：

```
typedef struct Point point; 
```

它足够好，还是一个糟糕的设计？正如我在一些网站上读到的，通常在头文件中实现一个结构，

但是在我之前[在 C] 中的作业中，课程的工作人员为我们提供了一个头文件，其中包括对结构的声明而不是实现。

我在这里看到了与此类似的其他问题，但他们并没有真正回答我的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T14:17:55.630

您可以在标头中声明构造函数并在 cpp 文件中写下实现：

```
struct Point
{
    Point(double xCo, double yCo);
    ...
};

Point::Point(double xCo, double yCo)
{
    ...
} 
```

但是在头文件中必须有一个声明，因为编译器依赖它来构建其他依赖于该结构的 cpp 文件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-13T14:18:57.837

`struct`C 和 C++ 的用法有很大的不同。

在 C 中，`struct`声明声明一个带有标签的结构，而不是类型名称。因此，您必须按标签引用它，`struct Point`除非您在其`typedef`周围添加 a。

在 C++ 中，`struct`是 的同义词`class`，不同之处仅在于默认成员可访问性（私有为`class`，公共为`struct`）。类型名称总是为`struct`没有 a定义的，因此在C++ 中`typedef`添加 a是不必要的。`typedef``struct`

这不会影响您声明构造函数的方式：您可以将其内联在标头中，或将其移出到实现中。无论哪种方式，它都会起作用。将 args 传递给头文件中的初始化列表的简单初始化程序可能会更好，而更复杂的初始化程序可能应该放在 cpp 文件中，但这完全取决于您。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-13T14:14:59.660

这个没有答案，这真的取决于情况。您是否关心客户端代码可以访问构造函数的实现，并且每次您在那里进行更改时都必须重新编译它？如果是这样，请不要在标头中实现它。请记住，在这种情况下，在 C++ 中`struct`和`class`是等价的，因此相同的一般规则应适用于两者。

你*应该*做的是使用构造函数初始化列表：

```
Point(double xCo, double yCo) : x(xCo), y(yCo) {} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T14:23:11.090

考虑到在 C++ 中，结构只是一个“默认成员可访问性”设置为公共而不是私有的类，我建议您对结构执行完全相同的操作，就好像您正在编写一个类一样。

# java - 显示一个 HTML 页面的 JAVA 程序。html 中的 Javascript 不起作用

> ID：12408287
> 
> 赞同：2
> 
> 时间：2012-09-13T14:13:04.547
> 
> 标签：java, javascript, html

我制作了一个简单的 JAVA 程序来显示 HTML 页面。但我似乎无法让 html 页面上的 JAVA SCRIPT 在程序中工作。我用它来计算。如果我在浏览器中打开 HTML 页面，它确实可以工作。有人可以帮助我如何让它在我的 JAVA 程序中工作吗？

您将在下面找到代码。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication16;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import java.io.FileReader;
/**
 *
 * @author chris
 */
public class JavaApplication16 {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws Exception {
    String url = "http://members.multimania.nl/c75/";
    JEditorPane editor = new JEditorPane("http://members.multimania.nl/c75/");
    editor.setEditable(true);
    JScrollPane pane = new JScrollPane(editor);
    JFrame f = new JFrame("calculatie Program");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.getContentPane().add(pane);
    f.setSize(800, 600);
    f.setVisible(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:17:45.073

标准 java 组件仅支持非常基本的 HTML。它们不支持 JavaScript 或在过去 10 年（甚至可能是 15 年）中引入的任何高级元素。

你应该使用纯java浏览器。有几种实现方式。以下讨论可能对您有所帮助：[Pure Java HTML viewer/renderer for use in a Scrollable pane](https://stackoverflow.com/questions/2438201/pure-java-html-viewer-renderer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:14:15.177

`JEditorPane`不支持Javascript。最简单的替代方法是使用[JxBrowser](http://www.teamdev.com/jxbrowser/)（商业）或[SWT](http://www.eclipse.org/swt/)的[浏览器](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/browser/Browser.html)小部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:16:05.380

尝试使用 Rhino 来处理 javascript ......否则它是一个死胡同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:34:19.223

请看一下[swt 浏览器组件](http://www.eclipse.org/swt/snippets/#browser)，但如果您只想运行用 js 编写的计算，我也会推荐 rhino。

# .htaccess - .htaccess mod 重写正则表达式以不匹配文件名

> ID：12408289
> 
> 赞同：1
> 
> 时间：2012-09-13T14:13:11.090
> 
> 标签：.htaccess, mod-rewrite

我正在使用以下 .htaccess 配置指令（将所有非文件名请求重定向到单个 PHP 文件）：

```
RewriteEngine on
Options +FollowSymLinks
RewriteBase /

RewriteRule !(\.ttf|\.eot|\.woff|\.xpi|\.xml|\.txt|\.air|\.exe|\.zip|\.pdf|\.ico|\.gif|\.jpg|\.png|\.jpeg|\.js|\.swf|\.css|\.php|\.html)$ mod_rewrite_redirector.php [L] 
```

**如何使上述正则表达式不区分大小写？**我尝试过 [L,NC] 或将 (?i) 放在开头。NC 选项不适用于所有 Apache2 安装（各种版本）并且 (?i) 无效。

**如何制作一个*不*匹配看起来像扩展名在 2 到 4 个字符之间的文件名的 URL 的正则表达式？**

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:24:52.310

试试这个 ：

```
RewriteRule !\.[a-zA-Z0-9]{2,4}$ mod_rewrite_redirector.php [L] 
```

但是，如果要将请求重定向到服务器上不存在的文件，最好使用：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . mod_rewrite_redirector.php [L] 
```

# android - 识别来电的 Android 应用

> ID：12408290
> 
> 赞同：0
> 
> 时间：2012-09-13T14:13:14.127
> 
> 标签：android, broadcastreceiver

我正在尝试制作一个可以拨打和接听电话和短信的应用程序 传出部分效果很好。我使用广播接收器来接听来电。当我尝试调试它时，它不会在来电时加入 onReceive 函数。

这是我们的 manifest.xml

```
 <receiver android:name=".MYPhoneStateListener"
       android:exported="true">
    <intent-filter android:priority="999999"> 
        <action android:name="android.intent.action.PHONE_STATE"></action> 
    </intent-filter> 

</receiver> 

</application>

<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.SEND_SMS" /> 
```

这是广播接收器：

```
 public class CallBroadcastReceiver extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);

    if (TelephonyManager.EXTRA_STATE_RINGING.equals(state)) 
    {
        Log.d("incoming", "incoming");
    }
} 
```

}

问题是什么？有没有其他方法来暗示呼叫接收者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:25:07.753

更改接收方的名称以匹配您在清单文件中定义的名称。

```
<receiver android:name=".CallBroadcastReceiver"
       android:exported="true"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:39:03.317

您可以尝试实现您的电话监听器，例如：

```
public class PhoneListener extends PhoneStateListener {

    @Override
public void onCallStateChanged(int state, String incomingNumber) {
    }

} 
```

状态可以是：TelephonyManager.CALL_STATE_RINGING、TelephonyManager.CALL_STATE_OFFHOOK、TelephonyManager.CALL_STATE_IDLE

在广播接收器中注册监听器：

```
TelephonyManager telephony = (TelephonyManager)    ctx.getSystemService(Context.TELEPHONY_SERVICE);
        telephony.listen(phoneListener, PhoneStateListener.LISTEN_CALL_STATE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:02:16.640

在清单文件中添加以下权限。

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

# jquery - jQuery .resize() 在 Chrome 上无法正常工作

> ID：12408298
> 
> 赞同：0
> 
> 时间：2012-09-13T14:13:32.417
> 
> 标签：jquery, google-chrome, resize

我正在尝试使用 jQuery 创建一个滚动插件。我需要捕获容器元素调整大小事件以设置新大小的滚动位置。但我被困在这个问题上：`.resize()`除了窗口之外的任何元素都不适用于 Chrome。

有没有办法用 jQuery 或 JavaScript 捕捉调整大小的事件？我也尝试过设置`onresize`属性，但它会触发一次。我在下面添加了[jsFiddle](http://jsfiddle.net/vJMYd/100/)链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:27:27.793

来自[MDN](https://developer.mozilla.org/en-US/docs/DOM/element.onresize)：

> 只有`window`对象具有 onresize 事件。

jQuery[文档](http://api.jquery.com/resize/)也只提到.`window`

也许您可以从[jQuery 调整大小事件插件](http://benalman.com/projects/jquery-resize-plugin/)中受益，它似乎完全符合您的需要。

**编辑：**这是一个包含插件的[更新小提琴。](http://jsfiddle.net/vJMYd/103/)代码是相同的，但它可以按您的预期工作，因为它包含插件（请参阅小提琴中的“添加资源”选项卡）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:18:59.450

为什么要在除窗口之外的任何其他地方捕捉调整大小？

如果是因为您需要观看 DOM 元素减小 div 的大小，只需触发自己的 resize 事件。

```
$(window).trigger('resize') 
```

# virtualbox - 对directx 10 的virtualbox 支持

> ID：12408304
> 
> 赞同：3
> 
> 时间：2012-09-13T14:13:57.017
> 
> 标签：virtualbox, directx-10

我在 Mac 上安装了 VirtualBox，并在其中运行 Windows 7。我需要 DirectX 10 才能运行应用程序。我设法得到的最好的是directX 9。

是可用的么？我在[https://wiki.archlinux.org/index.php/VirtualBox_Extras](https://wiki.archlinux.org/index.php/VirtualBox_Extras)上发现 我可以使用 wine3d，但注释说它只适用于 Windows 7 RC 来宾 AFAIK，那是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:15:44.817

我认为这是说您需要 Windows 7 Release Candidate 以确保它能够正常工作（RC = Release Candidate）。我把 AFAIK 部分的意思是“据我所知”。我有一个类似的问题给你，但我不明白为什么有些东西可以在 RC 上工作，但不能在标准 Windows 7 上工作，所以我还是要试试......

# javascript - 从 JavaScript 调用 jQuery 函数

> ID：12408310
> 
> 赞同：1
> 
> 时间：2012-09-13T14:14:04.843
> 
> 标签：javascript, jquery

我正在尝试`.csv`在我的 JavaScript 中导入文件并尝试将其保存在数组中。我在 stackoverflow.com 上搜索时得到了以下示例，以使用 `jQuery-CSV`调用的库函数`csv2Dictionary()`来执行此操作。

```
var data = $.csv2Dictionary(csv): 
```

在上面的代码行中，“数据”会给我我的数组，但是在我进入这一步之前有人可以帮助我知道，我怎样才能`csv2Dictionary()`从我的 JavaScript 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:25:15.977

你到底是什么意思“从我的javascript调用它”？

答案很简单：**去做**；）

只需确保在尝试调用该函数之前已加载 jQuery 和 jQuery-CSV。然后你可以很容易地做这样的事情：

```
var csv;
// ...
// Create your CSV
// ...
$.csv2Dictionary(csv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T08:41:50.017

```
 readTheFileWhenLoaded = function(){
        $('#inputTypeFileInHTML').change(function(event){
            readTheFile(this.files[0]);
            $('#inputTypeFileInHTML').val(null);
        });
    }

     readTheFile= function(file){
        var fileContent;
          var r = new FileReader();
          r.onload = function(e) {
              fileContent= e.target.result;
              fileContentAsStringJavaScriptVar(fileContent);
          }
          r.readAsText(file);
    }

    fileContentAsStringJavaScriptVar= function(fileContent){
        console.log(fileContent);
         $.csv2Dictionary(fileContent);
    } 
```

# android - 地图未使用 Google Maps API android 显示

> ID：12408315
> 
> 赞同：1
> 
> 时间：2012-09-13T14:14:22.953
> 
> 标签：android, google-maps

我正在我的应用程序上安装 Google Maps API。我的一切都在运行，可以启动 Google 地图活动，但地图没有显示。它只显示一个可以放大和缩小的网格。

```
 package com.fotolife.app;

import android.os.Bundle;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class Map extends MapActivity {

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    protected void onCreate(Bundle arg0) {
        // TODO Auto-generated method stub
        super.onCreate(arg0);
        setContentView(R.layout.map);

    }

} 
```

^ 那是我的 Map.java

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="I Took this out for security reasons, but it works."
/>

</LinearLayout> 
```

^ 这是我的 map.xml

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T13:30:31.460

如果您使用的是 Google Maps Android API v2，这可能是您的项目无法运行的原因。要使其正常工作，您必须执行以下步骤：

**从 SDK 管理器下载和配置 Google Play 服务**

Google Play 服务是 Android SDK 附加功能的一部分。您可以在附加部分中找到它。

**将 google play services lib JAR 添加到您的项目构建路径**

lib JAR 安装在路径中

```
$ANDROIDSDK_HOME/extras/google/google_play_services/libproject/google-play-services_lib/libs 
```

**使用 Google API 控制台获取 API 密钥**

您可以通过发出以下命令，使用操作系统控制台生成 SHA1 指纹用于调试目的：

```
$ keytool -list -v -keystore ~/.android/debug.keystore -storepass android 
```

在 Google API 控制台中，转到 API 访问并在右侧窗格中选择“创建新的 Android 密钥...”。然后将 SHA1 指纹放入文本框中，后跟分号和项目的包名称。

**在项目的清单文件中指定权限设置**

将以下清单标记放入您的应用程序清单文件中（将 com.example 替换为您的项目的包名称）：

```
 <permission android:name="com.example.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
  <uses-permission android:name="com.example.permission.MAPS_RECEIVE"/>
  <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
  <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

  <!-- Maps API needs OpenGL ES 2.0\. -->
  <uses-feature android:glEsVersion="0x00020000" android:required="true"/> 
```

**在项目的清单文件中指定从 API 控制台生成的 API 密钥**

将此作为关闭应用程序标记之前的最后一个元素

```
<meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="your api key goes here"/> 
```

**将地图添加到您的项目**

主要的.xml

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.SupportMapFragment"/> 
```

主.java

```
import android.app.Activity;
import android.os.Bundle;

public class Main extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

**运行您的应用程序**

你应该让一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-23T22:05:38.537

嗨，这对我有用：

还记得你的 api-key 是从哪里得到的吗？[https://code.google.com/apis/console](https://code.google.com/apis/console)，去那里并在 Android 应用程序的密钥（带证书）下按编辑允许的 android 应用程序。

在我的情况下，指纹指的是不同项目中的旧包，所以我只是去了 cmd 控制台并获取了我的新指纹并在它之后输入了我当前的包名称 BINGO。

# asp.net - 设置动态clientID以使用javascript检索值

> ID：12408323
> 
> 赞同：0
> 
> 时间：2012-09-13T14:14:35.583
> 
> 标签：asp.net, vb.net

我正在尝试为我设置一个自定义`ClientID`，`DropDownList`以便以后能够使用 javascript 获取选定的值。

像它一样设置它 `ClientID="<%=MyVar%>"`可以正常工作，但是当我尝试连接一些字符串时它会搞砸。

`ClientID="dropdown_<%=MyVar%>"`输出实际上是 clientid="dropdown_<%=MyVar%>"

有可能做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:17:31.517

我建议您在网页上创建一个连接字符串的公共方法，然后您可以从页面源调用它（更易于维护和重用）

```
public string GetClientId()
{
  return "dropdown" + yourVar;
}

ClientID="<%=GetClientId()%>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:17:56.237

试试下面的。请注意，我已经在服务器端代码中移动了串联，并在客户端使用了单引号，以允许在服务器端使用双引号。

```
ClientID='<%="dropdown_" + MyVar%>' 
```

# php - 如何使用旧数组的键作为新数组的值创建新数组？

> ID：12408326
> 
> 赞同：0
> 
> 时间：2012-09-13T14:14:39.070
> 
> 标签：php, arrays

我有一个像这样的数组：

```
Array
(
    [746] => 3
    [208] => 2
    [1091] => 1
    [313] => 1
    [305] => 1
    [707] => 1
) 
```

我想创建一个数组，如：

```
Array (
    [0] => 746
    [1] => 208
    [2] => 1091
    [3] => 313
    [4] => 305
    [5] => 707 ) 
```

我很确定我可以使用 foreach 循环来做到这一点，但想知道是否有更简单的方法可用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T14:15:56.883

[使用array_keys](http://es.php.net/manual/en/function.array-keys.php)非常容易

```
$newArray = array_keys($oldArray) 
```

使用这个内置函数而不是 foreach 的一个优点是编译的 C 代码的强大功能。所以 PHP 原生函数通常更快

# datatables - [DataTables ][columnFilter] thead:after 不起作用

> ID：12408327
> 
> 赞同：2
> 
> 时间：2012-09-13T14:14:42.947
> 
> 标签：datatables

我尝试将 columFilter 与 sPlaceHolder 一起使用：“thead:after”

我使用：jquery 1.8.1 数据表 1.9.3 columnFilter 1.5.0

我的桌子是：

```
<table align="center" border="1" id="tatable">
            <thead>
            <tr>
                <th scope="col">Numero de la prise</th>
                <th scope="col">Description</th>
                <th scope="col">Piece</th>
                <th scope="col">Action</th>
            </tr>
            <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </tfoot>
            <tbody>
// a lot of data
</tbody>
</table> 
```

我用于初始化的 jquery 代码是：

```
$(document).ready(function(){
$('#tatable').dataTable({
            "bLengthChange": false,
            "iDisplayLength":50    
}).columnFilter({
    sPlaceHolder: "thead:after",
    aoColumns :[
        {type: "text"},
        {type: "text"},
        {type: "text"},
        {type: "text"}
    ]
    }
);
}); 
```

此代码在标题上显示 2 行，输入在表格底部...为什么？

(jquery 插件链接) [http://www.datatables.net](http://www.datatables.net)和 [http://jquery-datatables-column-filter.googlecode.com/svn/trunk/index.html](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:38:56.877

我只是用谷歌搜索并了解了一些，但我没有遇到像你这样的过滤器，我已经看到了这个：`head:before` 所以你的不应该是： `head:after`？

PS：我用的是“head”而不是“thead”

# jsf-2 - 使用 JSF 2.0 从支持 bean 更改选项卡

> ID：12408328
> 
> 赞同：1
> 
> 时间：2012-09-13T14:14:49.770
> 
> 标签：jsf-2, primefaces, tabview

我想从 backing bean 更改选项卡，我该怎么做？

```
<h:form id=form>  

    <p:growl id="growl" showDetail="true" />  

    <p:tabView id="tabView" dynamic="true" widgetVar="detailsTab">  

        <p:ajax event="tabChange" listener="#{bean.onTabChange}" update=":form:growl"/>  

        <p:tab title="Tab1" id="emp">  
            <h:panelGrid columns="2" cellpadding="10">  

              </h:panelGrid>  
        </p:tab>  

        <p:tab title="Tab 2 " id="schedule1">  
            <h:panelGrid columns="2" cellpadding="10">  

            </h:panelGrid>  

        </p:tab>  

        <p:tab title="Tab 3" id="schedule2">  
        <p:schedule value="#{bean.eventModel}" slotMinutes="15" 
                            resizable="false" widgetVar="schdule" initialDate="#{bean.dates}" draggable="true" styleClass="#{bean.selDates}"
                             >
                             <p:ajax event="dateSelect" listener="#{bean.onDateSelect}"
                                update="dialogBox"  oncomplete="patScheduleDialog.show()"/>
                              <p:ajax event="eventSelect" listener="#{bean.onEventSelect}" 
                                update="dialogBox :form:growl" oncomplete="#{bean.pevent}"/>
                                <p:ajax event="eventMove" listener="#{bean.onEventMove}"
                                update="dialogBox, :form:growl" />
                        </p:schedule>

         <p:dialog id="dialogBox" header="Patient's Appointment Details" widgetVar="patScheduleDialog" resizable="true"  
                                 showEffect="explode" hideEffect="explode">  

                <h:panelGrid id="eventDetails" columns="2">  
            <h:outputLabel for="title" value="Title:" />  
            <p:inputText id="title" value="#{bean.event.title}" required="true"/>  

            <h:outputLabel for="from" value="From:" />  
            <p:inputMask id="from" value="#{bean.event.startDate}" mask="99/99/9999">  
                <f:convertDateTime pattern="dd/MM/yyyy" />  
            </p:inputMask>  

            <h:outputLabel for="to" value="To:" />  
            <p:inputMask id="to" value="#{bean.event.endDate}" mask="99/99/9999">  
                <f:convertDateTime pattern="dd/MM/yyyy" />  
            </p:inputMask>  

            <h:outputLabel for="allDay" value="All Day:" />  
            <h:selectBooleanCheckbox id="allDay" value="#{bean.event.allDay}" />  

            <p:commandButton type="reset" value="Reset" />  
            <p:commandButton value="Save" actionListener="#{bean.addEvent}" oncomplete="schdule.update();dialogBox.hide();"/>  
        </h:panelGrid>  

    </p:dialog>

        </p:tab>  

    </p:tabView>  

  public void onEventSelect(ScheduleEntrySelectEvent selectEvent){

    // what should I need to do here to set "Tab 2" if click on any event.

    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T14:35:22.643

首先，您需要设置 的`activeIndex`属性`<p:tabView>`，如下所示：`<p:tabView activeIndex="#{bean.selectedTab}">`。这是一个`Integer`.

其次，在你的bean方法中，每当你想改变活动选项卡时，设置`selectedTab`为你想要选择的选项卡。

第三，记得更新`<p:tabView>`.

* * *

你也可以使用 JavaScript 来做到这一点。只需设置`widgetVar`您的属性 `<p:tabView>`，如下所示：`<p:tabView widgetVar="myTabView">`.

然后使用 JavaScript 函数`myTabView.select(tabIndex)`，`tabIndex`您要选择的选项卡的索引在哪里。

您可以在任何 javascript 事件中执行此操作，例如：`<p:commandButton oncomplete="myTabView.select(1)" />`在 commandButton 的操作完成后选择第二个选项卡。

* * *

确保您阅读[PrimeFaces 文档](http://www.primefaces.org/documentation.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-26T13:23:30.207

1.  您可以在标签 p:tabView 中使用绑定属性。

> ```
> <p:tabView id="tabGeneral" binding="#{Bean.tabView}" dynamic="true"> 
> ```

2.  在您的 Bean 中创建 Tabview 对象。

> 私有 TabView 选项卡视图；
> 
> ```
> public TabView getTabView() {
>   return tabView;
> }
> 
> public void setTabView(TabView tabView) {
>   this.tabView = tabView;
> } 
> ```

3.  将 int 设置为 tabview 中的索引。

> ```
> tabView.setActiveIndex(0); 
> ```

4.  更新标签视图。

> ```
> RequestContext.getCurrentInstance().update("tabGeneral"); 
> ```

# php - 通过 Curl 返回错误的混合 API 访问

> ID：12408333
> 
> 赞同：0
> 
> 时间：2012-09-13T14:15:04.033
> 
> 标签：php, api, rest, curl

我正在尝试通过 curl 访问用于混合的 api 功能。我的最终目标是使用 curl 的 php 库来做到这一点，但现在我在终端中使用 curl 来尝试消除我的错误。所以我输入我的终端：

```
curl -v -u rtservice:minRTgle http://10.10.8.170:8080/api/v2/projects/request_tracker_queue/cards/18.xml 
```

我得到：

```
* 即将 connect() 到 10.10.8.170 端口 8080
* 尝试 10.10.8.170... 已连接
* 连接到 10.10.8.170 (10.10.8.170) 端口 8080
* 服务器身份验证使用 Basic 和用户 'rtservice'
> 获取 /api/v2/projects/request_tracker_queue/cards/18.xml HTTP/1.1
> 授权：基本cnRzZXJ2aWNlOm1pblJUZ2xl
> 用户代理：curl/7.15.5 (i686-redhat-linux-gnu) libcurl/7.15.5 OpenSSL/0.9.8b zlib/1.2.3 libidn/0.6.5
> 主机：10.10.8.170:8080
> 接受：*/*
>
< HTTP/1.1 403 禁止
<缓存控制：无缓存
< 内容类型：应用程序/xml；字符集=utf-8
< 内容长度：175
< Set-Cookie: last-visited-project=request_tracker_queue; 路径=/; 过期=周四，2013 年 9 月 12 日 21:34:32 GMT
<设置Cookie：mingle_12_2_2_session_id=0f0bc86a43e0b69bfc6665df68c31046；路径=/; HttpOnly
< 服务器：码头（6.1.19）

```

```
<?xml version="1.0" encoding="UTF-8"?>
<errors>
<error>Either the resource you requested does not exist or you do not have access rights to that resource.</error>
</errors> 
```

```
* 到主机 10.10.8.170 的连接 #0 保持不变
* 关闭连接 #0

```

我不确定我做错了什么。凭据是正确的，如果我尝试在 Firefox 中访问 url，它会返回我期望的 xml（但是它确实提示我询问“你确定吗？”）。奇怪的是，如果我尝试在 chrome 中做同样的事情，它会返回与终端相同的错误。我不知所措。我不明白有什么可以搞砸的。

提前感谢您的帮助，

约旦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:36:46.983

事实证明，我的问题不在于 curl。这是 Mingle 的配置问题。我需要在 Mingle 的配置中打开基本身份验证。

# cocoa - Cocoa：底部的 NSView 原点 x

> ID：12408334
> 
> 赞同：5
> 
> 时间：2012-09-13T14:15:05.037
> 
> 标签：cocoa

我正在以编程方式创建一个`NSWindow`及其上的控件。

似乎原点（0,0）在左下角。这对我来说很奇怪（来自其他 GUI 工具包）。是否有一些标志，以便我可以更改它以使原点位于左上角？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T14:17:42.687

在 OS X 上，原点位于左下角。这对于屏幕坐标和视图框架来说是正确的。您可以[`isFlipped:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsview_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/isFlipped)在 NSView 子类中覆盖并返回 YES 以使左上角成为该视图的原点，但我认为没有办法对屏幕坐标执行相同操作。

# jquery - 如何在回发后保留表单数据并动态添加 dom 元素？

> ID：12408336
> 
> 赞同：1
> 
> 时间：2012-09-13T14:15:09.927
> 
> 标签：jquery, dom, dynamic, postback

我使用以下代码通过简单地复制父 div 来使用 jQuery 动态添加或删除输入字段：

```
$(document).ready(function () {
    $('#btnAdd').click(function () {
        var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
        var newNum = new Number(num + 1);      // the numeric ID of the new input field being added

        // create the new element via clone(), and manipulate it's ID using newNum value
        var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

        // manipulate the name/id values of the input inside the new element
        newElem.children(':first').attr('id', 'author' + newNum).attr('name', 'author' + newNum).attr('value', 'enter a name');

        // insert the new element after the last "duplicatable" input field
        $('#input' + num).after(newElem);

        // enable the "remove" button
        $('#btnDel').attr('disabled', '');

        // business rule: you can only add 5 names
        if (newNum == 5)
            $('#btnAdd').attr('disabled', 'disabled');
    });

    $('#btnDel').click(function () {
        var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
        $('#input' + num).remove();     // remove the last element

        // enable the "add" button
        $('#btnAdd').attr('disabled', '');

        // if only one element remains, disable the "remove" button
        if (num - 1 == 1)
            $('#btnDel').attr('disabled', 'disabled');
    });

    $('#btnDel').attr('disabled', 'disabled');
}); 
```

现在基本上我想要做的是，一旦填写了最多六个输入字段之一（onchange 事件？），它的值应该自动保存在隐藏的输入字段中。

这应该发生在每个输入字段中。值应该用';'分隔 并且根据隐藏输入元素内的值的数量，它应该 - 在回发之后 - 使用上述 clone() 函数在 dom 中添加确切数量的输入字段，并重新填充这些值。

因为在每次回发之后（例如，如果没有填写所有必填字段）它不会自动添加（通过 jQuery）添加的输入字段，这当然是有道理的......

如果有更简单的方法可以做到这一点，我很想听听如何，否则我会很感激任何帮助，因为我一无所知，尤其是在价值观分离方面。

**[编辑]**

我忘了提到的是，我使用 c# .net 并且隐藏的输入字段使用**runat="server"**属性。

**[编辑 2]**

附加信息：我在网络表单中有这个。使用此表格，您可以在网站上保存“项目”（数据存储在数据库中）。这些项目/文章可以有多个（最多 6 个）作者，这就是 jQuery 出现的时候......用户最多可以添加 6 个作者，并且在页面加载后由用户动态添加到 dom ，它们不会在表单发送（回发）到服务器后自动添加。所以我需要存储这些输入字段的值，彼此分开，以便在回发后仍然有值，还要添加用户定义的作者输入字段数量。我希望这或多或少清楚我想做什么？

提前致谢！

# java - apacheant 邮件任务和 STARTTLS

> ID：12408340
> 
> 赞同：0
> 
> 时间：2012-09-13T14:15:27.977
> 
> 标签：java, ant, automation, jakarta-mail

每次有人运行 apacheant 以更新我们的实时服务器时，我都试图向我的团队发送一封电子邮件，我试图通过 GMAIL 发送电子邮件，但是当我运行时，ant upload_live -d 我收到以下错误，

> ```
> BUILD FAILED /Users/simon/Documents/websites/apacheant/build.xml:116: Problem while 
> ```
> 
> executeSortedTargets(Project.java:1399) at org.apache.tools.ant.Project.executeTarget(Project.java:1368) at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41) at org .apache.tools.ant.Project.executeTargets(Project.java:1251) 在 org.apache.tools.ant.Main.runBuild(Main.java:809) 在 org.apache.tools.ant.Main.startAnt(Main .java:217) 在 org.apache.tools.ant.launch.Launcher.run(Launcher.java:280) 在 org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 引起： com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 必须先发出 STARTTLS 命令。dp8sm20701038wib.3 executeTargets(DefaultExecutor.java:41) at org.apache.tools.ant.Project.executeTargets(Project.java:1251) at org.apache.tools.ant.Main.runBuild(Main.java:809) at org.apache .tools.ant.Main.startAnt(Main.java:217) 在 org.apache.tools.ant.launch.Launcher.run(Launcher.java:280) 在 org.apache.tools.ant.launch.Launcher.main (Launcher.java:109) 引起：com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 必须先发出 STARTTLS 命令。dp8sm20701038wib.3 executeTargets(DefaultExecutor.java:41) at org.apache.tools.ant.Project.executeTargets(Project.java:1251) at org.apache.tools.ant.Main.runBuild(Main.java:809) at org.apache .tools.ant.Main.startAnt(Main.java:217) 在 org.apache.tools.ant.launch.Launcher.run(Launcher.java:280) 在 org.apache.tools.ant.launch.Launcher.main (Launcher.java:109) 引起：com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 必须先发出 STARTTLS 命令。dp8sm20701038wib.3 main(Launcher.java:109) 引起：com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 必须先发出 STARTTLS 命令。dp8sm20701038wib.3 main(Launcher.java:109) 引起：com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 必须先发出 STARTTLS 命令。dp8sm20701038wib.3
> 
> ```
>  at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:1388)
>     at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:959)
>     at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:583)
>     at javax.mail.Transport.send0(Transport.java:169)
>     at javax.mail.Transport.send(Transport.java:98)
>     at org.apache.tools.ant.taskdefs.email.MimeMailer.send(MimeMailer.java:239)
>     ... 17 more 
> ```

我的目标定义如下所示，

```
<mail enableStartTLS="true" ssl="no" mailhost="smtp.gmail.com" mailport="587" user="apache.ant.alert@gmail.com" password="*********" subject="${project} Pushed Live">
        <from address="apache.ant.alert@gmail.com"/>
        <replyto address="apache.ant.alert@gmail.com"/>
        <to address="simon@"/>
        <cc address="andrew@" />
        <message>${project} has successfully been transferred via FTP.</message>
    </mail>
    <echo>Mail Sent</echo> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:50:34.030

我用以下排序，

```
<mail enableStartTLS="true" ssl="true" mailhost="smtp.gmail.com" mailport="465" user="apache.ant.alert@gmail.com" password="******" subject="${project} Pushed Live">
        <from address="apache.ant.alert@gmail.com"/>
        <replyto address="apache.ant.alert@gmail.com"/>
        <to address="simon@"/>
        <cc address="andrew@" />
        <message>${project} has successfully been transferred via FTP.</message>
    </mail> 
```

# java - 在 Java 中等待给定时间

> ID：12408342
> 
> 赞同：1
> 
> 时间：2012-09-13T14:15:35.613
> 
> 标签：java

我只是想知道是否有办法等待（秒）。我在java中测量内存，然后我调用垃圾收集，一段时间后我想再次测量内存。我想到了石英，但它太复杂了，我听说 thread.sleep 不准确..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:18:14.543

见[睡眠](http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html)。

`Thread.sleep`导致当前线程暂停执行一段指定的时间。这是使处理器时间可用于应用程序的其他线程或可能在计算机系统上运行的其他应用程序的有效方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:20:55.043

如果你想要更准确的东西，你可以使用 nanoTime。

```
 public static void sleepNanos (long nanoDuration) throws InterruptedException {
        final long end = System.nanoTime() + nanoDuration;
        long timeLeft = nanoDuration;
        do {
            if (timeLeft > SLEEP_PRECISION)
                Thread.sleep (1);
            else
                if (timeLeft > SPIN_YIELD_PRECISION)
                    Thread.yield();

            timeLeft = end - System.nanoTime();
        } while (timeLeft > 0);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:21:51.810

`Thread.sleep(1000);`将休眠 1 秒。
但是你不会像你期望的那样释放任何内存。
使用诸如 visualvm 或 yourkit 之类的分析器工具[来](http://visualvm.java.net/)执行[GC](http://www.yourkit.com/)。如果您使用的是 Netbeans，它具有内置分析器。

# sql-server - SSRS 报告使用参数填充空白

> ID：12408346
> 
> 赞同：0
> 
> 时间：2012-09-13T14:15:53.807
> 
> 标签：sql-server, sql-server-2008, ssrs-2008, reporting-services

在 SSRS 中，当您访问具有参数要求的报告时，您会看到与我附加的图像类似的屏幕。

在选择参数并单击查看报告之前，是否可以在可用的巨大空白空间中放置图像或一些文本。

例如，我需要写一些关于选择开始日期和结束日期的规则的说明（即开始日期必须是星期一，结束日期必须是星期日），并且将诸如公司徽标之类的图像放置到填满那个空间。

我觉得当点击链接并且第一眼看到一个空白页面时，它会破坏报告的外观。

有没有人有任何建议？ ![在此处输入图像描述](../Images/e46af8b3f40d23b50ec57cd735e06b14.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:51:38.730

我唯一能想到的可能是一种解决方法而不是解决方案，但这里有：

您可以将参数设为可选（可为空）。您可以让报告由两个容器（例如矩形）组成，并根据参数是否设置来切换可见性。第一个容器有说明，第二个容器有内容。您可能必须以不会出现问题的方式配置数据集（例如，如果参数为 NULL，则不会出现大的结果集）。

# c# - “Membership.Provider 必须是 ExtendedMembershipProvider 的一个实例”

> ID：12408349
> 
> 赞同：8
> 
> 时间：2012-09-13T14:16:05.913
> 
> 标签：c#, asp.net, .net, membership-provider

我正在使用 Microsoft Visual Studio express 2012 for web 编写一个 MVC4 网站。每当我在包管理器控制台中运行“更新数据库”时，都会发生以下异常：

```
要调用此方法，“Membership.Provider”属性必须是实例
“ExtendedMembershipProvider”。

```

这是我的种子方法：

```
protected override void Seed(GNSystem.Models.DataContext context)
    {
        context.Forums.AddOrUpdate(
                        new Forum { ForumName = "Hello" },
                        new Forum { ForumName = "World" },
                        new Forum { ForumName = "!" }
                        );
        context.UserProfiles.Add(new UserAccount { UserName = "Gilad", EMail = "user@example.com" });
        WebSecurity.CreateUserAndAccount("Gilad", "123456");
        WebSecurity.Login("Gilad", "123456");
        context.Threads.AddOrUpdate(
            new Thread { Subject = "FirstThread", Content = "Awesome Content", ForumID = 1, UserID = 1 },
            new Thread { Subject = "SecondThread", Content = "Awesome Content", ForumID = 1, UserID = 1 }
            );
    } 
```

我搜索了[解决方案](http://www.asp.net/web-pages/tutorials/security/16-adding-security-and-membership)并在 Web.config 文件中添加了以下指令：

```
<add key="enableSimpleMembership" value="true" /> 
```

但仍然抛出异常。

这是什么原因？ **编辑1：**

```
 <?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-GNSystem-20120913165926;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-GNSystem-20120913165926.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="enableSimpleMembership" value="true" />
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T15:39:25.887

在您可以使用`WebSecurity.CreateUserAndAccount("Gilad", "123456");`SimpleMembership 之前必须进行初始化。这通常在具有`[InitializeSimpleMembership]`属性的 AccountController 上完成，但是由于您尝试在 Seed 中调用这些方法，因此您需要以另一种方式对其进行初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T02:53:30.490

```
protected override void Seed(eManager.Web.Infrastructure.DepartmentDb context)
{
  context.Departments.AddOrUpdate(d => d.Name,
              new Department() { Name = "Engineering" },
              new Department() { Name = "Sales" },
              new Department() { Name = "Shipping" },
              new Department() { Name = "Human Resources" });

  if (!Roles.RoleExists("Admin"))
  {
    Roles.CreateRole("Admin");
  }

  if (Membership.GetUser("wayne") == null)
  {
    Membership.CreateUser("wayne", "P@ssword");
    Roles.AddUserToRole("wayne", "Admin");
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:14:04.660

请检查您在此应用程序中使用的成员资格提供程序是否继承自 MembershipProvider 或 ExtendedMembershipProvider。确保它继承自 ExtendedMembershipProvider 类。

# objective-c - 在视图中调整子视图的大小

> ID：12408351
> 
> 赞同：1
> 
> 时间：2012-09-13T14:16:06.653
> 
> 标签：objective-c, macos, cocoa

我对可可有看法。该视图包含一个通过代码创建的子视图，该子视图包含其中的标签栏项目。SO视图->子视图-> tabbaritems。

我希望当我调整视图大小时，子视图会调整大小，并且该子视图内的标签栏也会调整大小。

子视图正在调整大小，但不是标签栏项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:31:16.110

对于您想使用 superView 调整大小的任何视图，请将常量 NSViewWidthSizable 和 NSViewHeightSizable 设置为需要调整大小的视图。使用按位或运算符组合常量并将其设置为视图的 AutoResizing 属性以获得高度和宽度的组合效果。如果您在其中创建这些视图，也可以在 IB 本身中设置这些内容。

```
 NSUInteger unitFlags =  NSViewWidthSizable|NSViewHeightSizable;
[yourView setAutoresizingMask:unitFlags]; 
```

因此，对于您的问题，将这些 AutoResizing 掩码设置为 subView 中的所有 tabbaritems

# ios - 从 *.ipa 读取 Localization.strings 文件

> ID：12408352
> 
> 赞同：10
> 
> 时间：2012-09-13T14:16:06.893
> 
> 标签：ios, xcode, ipa

我想检索从 *.ipa 文件中获取的 Locazable.strings。但是，当我这样做时，我会得到一些奇怪的字符混合![在此处输入图像描述](../Images/d734d81007f2678108b54d64cfefac61.png)

我该如何阅读它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T15:06:53.653

我的朋友了解如何：

plutil -convert json Localizable.strings

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-10T05:36:04.943

它是属性列表格式。

两种方法来解决这个问题。

*   将`.strings`文件更改为`.plist`
*   找到可以正确自动识别的文本 eidt。在mac上
    尝试应用程序。`testMate`

    [![xcode打开](../Images/0237828778266ca0fda1a5b9d78313c4.png)](https://i.stack.imgur.com/pLX6r.jpg)

    后：

    [![在此处输入图像描述](../Images/852b135ed10a73f5a580f160a10edf91.png)](https://i.stack.imgur.com/vkDhk.jpg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-12T06:06:57.343

**斯威夫特 3**

```
let path = Bundle.main.path(forResource: "Localizable", ofType: "strings", inDirectory: nil, forLocalization: "en")
let dic = NSDictionary(contentsOfFile: path!)
debugPrint(dic) 
```

将您的 localizable.strings 文件拉到 Xcode 项目中并运行上面的代码，然后，您可以在 Xcode 控制台中获取 dic，也可以将其存储在文本中。

# sql - 使用表单输入更改访问 sql

> ID：12408353
> 
> 赞同：1
> 
> 时间：2012-09-13T14:16:15.300
> 
> 标签：sql, ms-access, ms-access-2007

我在ms-access中做了一个表格，根据表格得到查询输出。

访问查询中的 sql 为：

```
SELECT w.* FROM work_log1 AS w, [task name] AS t WHERE t.task_name=forms!
[Accenture QC]!combo4 And t.task_id=w.task_name And w.activity_start_date Between  
forms ![Accenture QC]!text0 And forms![Accenture QC]!text11 
and w.[TAT] = forms![Accenture QC]!combo46 
```

现在一切正常，但如果 combo46 为空白，我想删除最后一个过滤器行。

我以某种方式制作了这样的sql：

```
and iif(forms![Accenture QC]!combo46 = '', t.task_id=w.task_name ,
t.task_id=w.task_name   and w.[TAT] = forms![Accenture QC]!combo46) 
```

这是正确的方法吗？如果只应用这个 TAT 过滤器怎么办？

我的意思是如果如何写这样的东西：

```
"SELECT w.* FROM work_log1 AS w where (w.[TAT] = forms![Accenture QC]!combo46 
OR forms![Accenture QC]!combo46 Is Null)" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:12:52.780

`WHERE`目前，您条款的最后一部分是...

```
and w.[TAT] = forms![Accenture QC]!combo46 
```

如果您的目标是忽略对`w.[TAT]`何时`combo46`为 Null 的约束，请尝试以下操作：

```
AND (w.[TAT] = forms![Accenture QC]!combo46
    OR forms![Accenture QC]!combo46 Is Null) 
```

*如果“空白*”可以表示 Null 以外的任何内容，这可能就不那么简单了……例如，空（零长度）字符串或空格字符。您可以在一个表达式中捕捉所有这些可能性。

```
Len(Trim(forms![Accenture QC]!combo46 & "")) = 0 
```

在您的问题查询的最新版本中...

```
SELECT w.*
FROM work_log1 AS w
where
       w.[TAT] = forms![Accenture QC]!combo46 
    OR Len(Trim(forms![Accenture QC]!combo46 & "")) = 0 
```

# sql - 当库存为 0 时提醒用户的 VBA

> ID：12408357
> 
> 赞同：0
> 
> 时间：2012-09-13T14:16:17.393
> 
> 标签：sql, database, vba, ms-access

我创建了一个查询，当在表单中按下按钮时，它会从每条记录中删除一个部分。但我想要做的是，如果表中的某个部分已经为零，则无法按下按钮。例如，用户正在移除一个由 6 个部分组成的“套件”。但是用户没有意识到其中一个部分已经为 0。然后当他们按下按钮时，其他部分会减一。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:22:30.140

当他们选择零件/套件时，您需要查询数据库以验证零件是否可用，然后相应地（取消）锁定按钮。您使用什么事件来执行此操作将取决于他们最初是如何挑选零件的。

另一种选择是将更新库存的查询包装在事务中，以便在其中一个部件不可用（或在事务期间变得不可用）时回滚它们。

虽然没有足够的信息来提供任何具体的例子，只是建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:55:35.113

“*用户正在移除一个由 6 个部分组成的‘工具包’。但用户没有意识到其中一个部分已经为 0。* ”

我认为你应该以不同的方式处理这个问题。如果给定套件的任何所需部件不可用，请不要让用户有机会按下该套件的命令按钮。

显然，您能够以某种方式确定“foo kit”由 6 个部分组成，以及这 6 个部分的标识。`.Enabled`根据是否所有部件都可用于表单的当前套件，使用类似的逻辑来启用/禁用命令按钮（将其属性设置为 True 或 False）。或者更改表单的记录源，使其仅显示所有部件都可用的套件，并在每组部件移除后重新查询记录源。

如果其他用户可能同时更新部件，请按照 Omnikrys 的建议将表单的更新包装在事务中，以便在部件不可用时回滚尝试的更新集。

顺便说一句，您在评论中说“*这些套件在单独的表格中。* ”乍一看，这听起来像是一个设计错误。但是，如果这确实是一个合理的决定，那么这项任务可能会更加复杂。:-(

# c# - 记住以前的过滤器设置

> ID：12408358
> 
> 赞同：0
> 
> 时间：2012-09-13T14:16:20.507
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model

我有一个带有搜索选项的视图来过滤结果：

```
@model GWeb.Models.FilterModel
@using (Html.BeginForm())
    {
        @Html.ValidationSummary(true)
        <fieldset>
            <legend>Search criteria</legend>

                @(Html.Telerik().ComboBox()
                    .Name("UserName")                
                    .BindTo(new SelectList(ViewBag.workerList as System.Collections.IEnumerable, "Id", "Desciption"))
                .Value(Model.UserName))

                @(Html.Telerik().DatePicker()
                .Name("StartWork")
                .Value(Model.StartWork))

                @(Html.Telerik().DatePicker()
                .Name("EndWork")
                .Value(Model.EndWork))       

                <input type="submit" value="Filter" />

        </fieldset>   
    }
    @{Html.RenderPartial("EmployeeList", (IEnumerable<GWeb.Entities.Work>)ViewBag.employeeList);} 
```

RenderPartial 是可以编辑的项目列表：

```
<td>
<a href="@Url.Action("Edit", "Admin", new { id = item.Id })">
    <img src="/Content/edit.png" alt="Edit" title="Edit" width="22" height="22" />
</a> 
```

编辑视图是标准的脚手架生成视图。FilterModel 包含：

```
public class FilterModel
{
    public string UserName { get; set; }
    public DateTime? StartWork { get; set; }
    public DateTime? EndWork { get; set; }
    //...
} 
```

**问题：**当我编辑其中一项并返回主视图时，搜索条件消失了。我怎样才能记住设置为的值`FilterModel`？这样在编辑或查看列表中的项目后，我可以返回到之前设置的相同过滤器选项？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:36:13.067

这是一个常见的场景。我通常使用 GET 而不是 POST（默认）提交搜索表单，并将 Request.UrlReferrer 存储在 HttpSession 中。然后将此会话值用于取消和重定向操作。

这是一个例子：

```
<form action="~/Search/Index" method="GET">
     ...
     <submit />
</form>

class SearchController : Controller
{
     public ActionResult Index(FilterModel model = null)
     {
         Session["SearchUrl"] = Request.UrlReferrer.ToString();
         var results = get page of results...
         return View(results);
     }

     [HttpPost]
     public ActionResult Edit(EditModel model)
     {
         //update the model...

         return Redirect(Session["SearchUrl"]);
     }
} 
```

# c# - 拖动装饰器以调整多边形大小

> ID：12408361
> 
> 赞同：0
> 
> 时间：2012-09-13T14:16:29.920
> 
> 标签：c#, wpf

我正在尝试创建一个 WPF 程序，用户可以在其中拖动多边形顶点上的装饰器以拉伸和调整形状的大小。当鼠标抓住并拖动顶点时，它将重新绘制具有该位置的顶点的多边形。我知道可以修改宽度/高度字段以调整整体形状，但我想要做的只是改变顶点位置，并且多边形线基本上用新的顶点位置重绘一个新的多边形。

到目前为止，我有能力绘制静态大小的多边形（矩形）并在角落放置装饰器，但问题似乎是当你拖动装饰器时，装饰器框不会停留在多边形顶点上。我相信这是因为装饰器是相对于多边形（其装饰元素）的位置绘制的，而不是它所绘制的整个画布。

我想知道是否有一种方法可以简单地将装饰器定位到屏幕坐标而不是相对于形状。我的逻辑是，我可以简单地使用多边形的顶点作为位置绘制一个装饰框`onRender()`，并让鼠标拖动功能获取鼠标的位置并直接更改多边形的顶点，从而也改变绘制装饰器的坐标。到目前为止，我还没有找到一种方法来做到这一点。这甚至可能吗？是否可以始终在顶点上绘制装饰器，以便在调整形状大小时与顶点对齐？如果没有，有人知道另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:08:40.747

在玩了一下之后，我找到了解决方案。首先，重要的是您要更多地了解 WPF 如何实际处理装饰器的渲染。这真的帮助了我，并很好地解释了它是如何工作的：[为什么我的装饰器在应用到它的元素发生变化时不重新渲染？](https://stackoverflow.com/questions/2450633/why-does-my-adorner-not-re-render-when-the-element-its-applied-to-changes)

对我来说，主要问题是我需要调用 invalidateVisual() 来手动调用 OnRender() 函数来更改装饰器/多边形顶点位置。另一件事是确保您的 Stretch 属性设置为无。我最初将它设置为填充，它会偏移点并且不允许它正确渲染。之后，通过将 polygon.points 属性传递给装饰器的绘制调用，确保装饰器的 OnRender() 函数在多边形的顶点上绘制装饰器。

# c# - Lambda 根据另一个列表从列表中选择项目

> ID：12408362
> 
> 赞同：0
> 
> 时间：2012-09-13T14:16:35.417
> 
> 标签：c#, linq, lambda

我有一个场景，我需要从对象列表中选择某些对象

例如

`List<MyObjects> selectedObject = myObjectList.Where(o => o.LastName in (checkedObj.LastName where checkedObj.IsSelected == true )`

如何使用 lambda 表达式完成此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T14:18:51.273

使用`Any`将是一种解决方案：

```
List<MyObjects> selectedObject = myObjectList.Where(o =>
    checkedObjList.Any(c => c.LastName == o.LastName && c.IsSelected)) 
```

（假设你有一个`checkedObjList`上面`checkedObj`的内容。）

# magento - 在 Magento 中禁用 Checkout 以获取可下载的产品

> ID：12408365
> 
> 赞同：1
> 
> 时间：2012-09-13T14:16:48.420
> 
> 标签：magento

有谁知道创建完全绕过结帐的免费下载产品的方法？我注意到可下载产品有一个“免费样品”选项，但如果可以的话，我宁愿不使用它，因为我计划在添加付费产品时将此字段用于其预期目的。

我想：

1.  了解是否可以在 Magento 中创建不需要用户通过通常的结帐过程的可下载产品（因为它是免费的）
2.  这不是可下载产品的“免费样品”字段**强文本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:30:03.330

如果没有代码定制，您就无法实现您的目标。您可以尝试在[此线程](https://stackoverflow.com/questions/2627036/skip-checkout-in-magento-for-a-downloadable-product)中找到答案，因为它与您的相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T15:29:18.460

你可以在你的 list.phtml 模板中试试这个：

```
<?php
$_myprodlinks = Mage::getModel('downloadable/link');
$_myLinksCollection = $_myprodlinks->getCollection()->addProductToFilter($_product->getId());
if (sizeof($_myLinksCollection)>0):
foreach ($_myLinksCollection as $_link):
$mediaUrl = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA);
$_linkpath = $mediaUrl."downloadable/files/links".$_link->getLinkFile();
?>
    <a href="<?php echo $_linkpath ?>" target="_blank"><?php echo $this->__('Download') ?></a>
<?php
 endforeach;
endif;
?> 
```

并确保为 Magento 根目录中的媒体文件夹授予 777 权限。

让我知道这是否适合您。

我不确定这是否是最好的方法，但它有效，您应该知道这些文件将可供所有人访问。

# java - 在 Ubuntu 12.04 上使用 openjdk 6 出现 NullPointerException

> ID：12408374
> 
> 赞同：6
> 
> 时间：2012-09-13T14:17:18.780
> 
> 标签：java, timezone, nullpointerexception, ubuntu-12.04

我最近从 10.10 升级到 ubuntu 12.04。从那时起，我在使用 openjdk 6 的 TimeZone 类中得到 NullPointerException。

```
TimeZone.getTimeZone("GMT-0:00"); 
```

openjdk 7 也不例外，我的同事也没有 openjdk6 例外。所以看起来我缺少一些必要的库。

此外，这很好用：`TimeZone.getTimeZone("GMT")`在我的机器上使用 openjdk 6

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T14:31:54.733

我能够通过完全删除 tzdata-java 包并重新安装来解决它。请注意，还删除了一堆 openjdk6 包。（我已经尝试过完全删除并重新安装 openjdk6 软件包，但没有运气）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:36:49.583

昨天我在 DbVisualizer 上遇到了类似的问题（启动时 NPE），结果发现[http://www.dbvis.com/forum/thread.jspa?messageID=14474](http://www.dbvis.com/forum/thread.jspa?messageID=14474)上的论坛帖子有解决方案。

尝试运行此命令以查看 Java 时区文件的位置：

```
locate GMT | grep java | grep zi 
```

就我而言，/usr/share/javazi 的内容是指向实际文件的符号链接，其中许多符号链接已损坏。我只是将我的时区的符号链接重新指向新的文件位置，这让 DbViz 为我工作。也许类似的东西对你有用。

# apache-flex - 在更新时将参数从 Badge 传递到 Adob e AIR 应用程序不起作用

> ID：12408376
> 
> 赞同：2
> 
> 时间：2012-09-13T14:17:20.293
> 
> 标签：apache-flex, air

我已经实现了一个徽章（基于原始徽章）将参数从 HTML/JS 传递到我的 AIR 应用程序。当我安装或启动我的应用程序时，一切正常。但是，如果我尝试使用徽章更新我的应用程序，我的参数就会丢失。相反，我只检索下载的 AIR 文件的路径，该文件将用作更新。

有没有人遇到过这样的问题？这是一个 Adob​​e Bug 还是我忽略了什么？

更多信息：我在徽章调用应用程序的那一行代码中放置了一个断点。那里的参数是正确的。我还将应用程序中 InvocationEvent 的参数直接记录在我的事件监听器中。那里缺少参数。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:00:26.063

这似乎是 Adob​​e 的预期行为。

[我在http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/InvokeEvent.html#arguments](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/InvokeEvent.html#arguments)上找到了这个声明：

"注意：在 Mac® OS X 上选择并打开多个文件时，AIR 会分派一个调用事件，其中包含参数数组中所有选定文件的名称。但是，在 Windows® 和 Linux 上，AIR 会分派一个单独的调用事件每个选定的文件在参数数组中仅包含该文件名。”

这可能是我在我的应用程序中看到的 - 我的徽章参数被忽略，文件名是我得到的唯一参数。

# wcf - 我可以在具有相同命名空间的 IIS 上部署多个 WCF 服务实例吗？

> ID：12408377
> 
> 赞同：2
> 
> 时间：2012-09-13T14:17:22.447
> 
> 标签：wcf, iis, virtual-directory, wcf-routing

我需要在 IIS 上具有相同站点的多个虚拟目录上部署相同的 WCF 服务。如果我对所有这些实例都有相同的命名空间，这会导致问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:08:09.850

从技术上讲，服务不负责其托管，即 .svc 文件（或配置中的服务条目）。您应该没有任何问题，因为每个实例都位于不同的端点。人们甚至在同一个虚拟目录中也这样做，在每个端点使用不同的绑定多次托管相同的服务。例如，我的安全服务在端点使用不同的安全性托管相同的服务，具体取决于您是要使用用户名/密码、Windows 身份验证还是现有令牌进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:31:22.720

在**BizTalk**中 - 重复的命名空间很重要，但是以**IIS 虚拟目录**作为边界应该没有问题。

[您可以通过MVC 服务路由](http://msdn.microsoft.com/en-us/library/system.servicemodel.activation.serviceroute.aspx)使用多个端点注册服务，并完全避免创建虚拟目录。

```
ServiceHostFactory serviceHost = new ServiceHostFactory();
RouteTable.Routes.Add(new ServiceRoute("SoapService", serviceHost, typeof(SoapService)));
RouteTable.Routes.Add(new ServiceRoute("directory1/SoapService", serviceHost, typeof(SoapService)));
RouteTable.Routes.Add(new ServiceRoute("directory2/SoapService", serviceHost, typeof(SoapService))); 
```

如果您对物理 SVC 文件使用经典服务激活，您应该能够将每个虚拟目录指向 SVC 文件所在的同一物理位置。

# ruby-on-rails - 在 Rails 中为一个 TestCase 切换 DB-Connection

> ID：12408379
> 
> 赞同：4
> 
> 时间：2012-09-13T14:17:27.890
> 
> 标签：ruby-on-rails, oracle, unit-testing

我尝试在设置和拆卸中为一个测试用例切换数据库连接。但不知何故，测试向我返回了这条消息：

```
RuntimeError: executing in another thread 
```

这就是测试用例代码：

```
def setup
  Example.establish_connection(ActiveRecord::Base.configurations['oracle'])
end

def teardown
  Example.establish_connection(Rails.env)
end 
```

测试数据库是 sqlite，我尝试用于测试用例的数据库是 oracle，因为有 PLSQL 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:35:47.240

对我来说，这似乎是一个潜在的竞争条件。如果`'oracle'` `ActiveRecord`连接已存在于另一个线程中，则设置可能无法完成。

您是否尝试过`'oracle'`在方法开始时明确关闭连接`teardown`？

# php - 在 PHP 中获取 http 请求的字节大小

> ID：12408385
> 
> 赞同：1
> 
> 时间：2012-09-13T14:17:51.323
> 
> 标签：php, api, post, httpcontext

您好，我目前正在整合商家帐户系统。

我需要将 http 请求中的总字节数发送到我网站上的 url。我的网站是用 PHP 编写的。

在 C# 中，它的工作方式如下：但要提到的主要一点是我将如何在 PH 中执行此操作，因为似乎无法找到关于此的良好文档。提前致谢

```
 public void ProcessRequest (HttpContext context) 
{
    context.Response.Buffer = true;

    string response = "";
    string sMethod = "POST";

    //sUrl holds the address to the Verify service, this is a service from AllCharge 
    // that verifies the signature on the notification. This makes sure that the notification
    // was sent by AllCharge.

    //Demo server - use this address during the integaration, remark this line when working
    // with the live server
    string sUrl = "http://demo.allcharge.com/Verify/VerifyNotification.aspx";

    //Live server - use this address when working with the live server, remark this line 
    // during the integration
    //string sUrl = "https://incharge.allcharge.com/Verify/VerifyNotification.aspx";

    Int32 nCount = context.Request.TotalBytes;
    string formParameters = System.Text.Encoding.UTF8.GetString(context.Request.BinaryRead(nCount));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:21:24.807

我能想到的最好的就是下面的 php 函数。

```
function findKb($content){
$count=0;
$order = array("\r\n", "\n", "\r", "chr(13)",  "\t", "\0", "\x0B");
$content = str_replace($order, "12", $content);
for ($index = 0; $index < strlen($content); $index ++){
    $byte = ord($content[$index]);
    if ($byte <= 127) { $count++; }
    else if ($byte >= 194 && $byte <= 223) { $count=$count+2; }
    else if ($byte >= 224 && $byte <= 239) { $count=$count+3; }
    else if ($byte >= 240 && $byte <= 244) { $count=$count+4; }
}
return $count;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:21:36.580

试试这个：

```
$rqsize = (int) $_SERVER['CONTENT_LENGTH']; 
```

类似的事情已经[在这里](https://stackoverflow.com/questions/1361451/get-size-of-post-request-in-php "这里")问过了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:21:49.233

```
$size = intval($_SERVER['CONTENT_LENGTH']); 
```

`$size`应该是请求的长度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T14:36:04.300

PHP 是解释语言，很难做到这一点，尝试使用`memory_get_usage`函数，这里是示例`http://it.php.net/manual/en/function.memory-get-usage.php`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T15:43:33.030

我发现让我使用它的最佳方法是使用：

```
$size = @file_get_contents('php://input'); 
```

谢谢你们的帮助！

# android - 从我的应用程序加载 Web broser 时出现可序列化的崩溃错误

> ID：12408386
> 
> 赞同：1
> 
> 时间：2012-09-13T14:17:51.827
> 
> 标签：android, serialization

我正在开发一个应用程序。

此应用程序包含 2 个类

*   实现可序列化的发现类

*   扩展 Activity 的主类

在 Main 类中，我通过单击应用程序界面中的按钮调用 android Web 浏览器。这种行为会导致崩溃。

下面是代码：

**MainTest.java**

```
package com.heeere.androiddnssd.discovery;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainTest extends Activity {

    android.net.wifi.WifiManager.MulticastLock lock;
    private Discovery discovery; 
    private TextView textView;

    /** Called when the activity is first created. */

    @SuppressLint("NewApi") @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if ( savedInstanceState == null)
            discovery = new Discovery(this);
        else
            discovery = (Discovery) savedInstanceState.getSerializable("discovery");
        setContentView(R.layout.main);
        textView = (TextView)this.findViewById(R.id.text);
        Button b = (Button)this.findViewById(R.id.button);
        b.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                //discovery.setUp();
                Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
                startActivity(browserIntent);
            }
        });

        android.net.wifi.WifiManager wifi = (android.net.wifi.WifiManager) getSystemService(android.content.Context.WIFI_SERVICE);
        lock = wifi.createMulticastLock("mylockthereturn");
        lock.setReferenceCounted(true);
        lock.acquire();

    }

    @Override
    protected void onSaveInstanceState(final Bundle outState) {
        outState.putSerializable("discovery", discovery);
        super.onSaveInstanceState(outState);
    }

    public void updateView () {
        String msg = discovery.getMsg();
        textView.setText(msg);
    }

    @SuppressLint("NewApi") @Override
    protected void onStop() {
        discovery.stop();
        lock.release();
        super.onStop();
    }

} 
```

**发现.java**

```
package com.heeere.androiddnssd.discovery;

import java.io.IOException;
import java.io.Serializable;

import javax.jmdns.JmDNS;
import javax.jmdns.ServiceEvent;
import javax.jmdns.ServiceListener;

public class Discovery implements Serializable {

    private static final long serialVersionUID = 637576886455091135L;
    private String type = "_ikunet._tcp.local.";
    private String msg="";
    private JmDNS jmdns = null;
    private ServiceListener listener = null;
    private MainTest maintest;
    android.os.Handler handler = new android.os.Handler();

    public Discovery (MainTest maintest) {
        this.maintest = maintest;
        setUp();
    }

    public void setUp() {

        try {
            jmdns = JmDNS.create();
            jmdns.addServiceListener(type, listener = new ServiceListener() {

                public void serviceResolved(ServiceEvent ev) {
                    msg = msg + ev.getInfo().getName()+ "\n";
                    update();
                }

                public void serviceRemoved(ServiceEvent ev) {
                }

                public void serviceAdded(ServiceEvent event) {
                    jmdns.requestServiceInfo(event.getType(), event.getName(), 1);
                }
            });
        } catch (IOException e) {
            //e.printStackTrace();
            return;
        }
    }

    public String getMsg() {
        return msg;
    }

    private void update() {
        handler.postDelayed(new Runnable() {
            public void run() {
                maintest.updateView();
            }
        }, 1);
    }

    public void stop() {
        if (jmdns != null) {
            if (listener != null) {
                jmdns.removeServiceListener(type, listener);
                listener = null;
            }
            jmdns.unregisterAllServices();
            try {
                jmdns.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            jmdns = null;
        }
    }

} 
```

**日志猫**

```
09-13 15:08:30.507: E/AndroidRuntime(15775): Uncaught handler: thread main exiting due to uncaught exception
09-13 15:08:30.517: E/AndroidRuntime(15775): java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = com.heeere.androiddnssd.discovery.Discovery)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.os.Parcel.writeSerializable(Parcel.java:1131)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.os.Parcel.writeValue(Parcel.java:1085)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.os.Parcel.writeMapInternal(Parcel.java:469)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.os.Bundle.writeToParcel(Bundle.java:1445)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.os.Parcel.writeBundle(Parcel.java:483)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.app.ActivityManagerProxy.activityPaused(ActivityManagerNative.java:1427)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3106)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.app.ActivityThread.access$2400(ActivityThread.java:119)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1870)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.os.Looper.loop(Looper.java:123)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.app.ActivityThread.main(ActivityThread.java:4363)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.lang.reflect.Method.invokeNative(Native Method)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.lang.reflect.Method.invoke(Method.java:521)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at dalvik.system.NativeStart.main(Native Method)
09-13 15:08:30.517: E/AndroidRuntime(15775): Caused by: java.io.NotSerializableException: android.os.Handler
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1547)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1854)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1696)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1660)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1153)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:420)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1251)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1587)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1854)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1696)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1660)
09-13 15:08:30.517: E/AndroidRuntime(15775):    at android.os.Parcel.writeSerializable(Parcel.java:1126)
09-13 15:08:30.517: E/AndroidRuntime(15775):    ... 16 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:50:30.763

问题是由于在创建相关对象时将主要活动传递给可序列化类。在我们的例子中，在创建对象时`MainTest`将对象传递给对象。`Discovery`解决方案：创建另一个包含所有发现数据（可序列化数据）的可序列化类。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T14:22:34.800

错误很明显：`Caused by: java.io.NotSerializableException: android.os.Handler`

弄清楚如何取出处理程序：`android.os.Handler handler = new android.os.Handler();`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T14:49:42.790

据我所知，Serializable 在 Android 上很慢，您应该改用 Parcelable，有关更多信息，请参阅此链接：[Benefit of using Parcelable instead of serializing object](https://stackoverflow.com/questions/5550670/benefit-of-using-parcelable-instead-of-serializing-object)

问候

# android - 如何从 SQLite 数据库中的特定组中随机选择一个条目

> ID：12408392
> 
> 赞同：0
> 
> 时间：2012-09-13T14:17:59.890
> 
> 标签：android, database, sqlite, random

从我的 SQLite 数据库中，我提取了 KEY_ALCOHOL 列中包含“Liquor”的所有条目，我该如何从所选组中选择一个随机条目？

这是我如何获得该组：

```
public Cursor getAlcohol(String alcohol) throws SQLException 
{
    Cursor mCursor =
            myDataBase.query(true, DB_TABLE, new String[] {
                    KEY_ROWID,
                    KEY_ALCOHOL, 
                    KEY_TYPE,
                    KEY_BRAND,
                    KEY_PRICE
                    }, 
                    KEY_ALCOHOL + "=?", 
                    new String[] { alcohol },
                    null, 
                    null, 
                    null, 
                    null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

这将返回大约 60 个不同的条目，我只需要随机选择一个。

# 编辑

这是对数据库助手 .java 的第二次尝试

```
public Cursor getTest(String test) throws SQLException 
{
    Cursor mCursor =
            myDataBase.query(true, DB_TABLE, new String[] {
                    KEY_ROWID,
                    KEY_ALCOHOL, 
                    KEY_TYPE,
                    KEY_BRAND,
                    KEY_PRICE
                    }, 
                    KEY_ALCOHOL + "=?", 
                    new String[] { test },
                    null, 
                    null, 
                    "RANDOM()", 
                    "LIMIT 1");
    return mCursor;
} 
```

这就是我在主要活动中调用它的方式：

```
myDbHelper.openDataBase();
    Cursor c = myDbHelper.getTest("Liquor");
    if (c.moveToFirst())
    {
        do {          
            DisplayTitle(c);
        } while (c.moveToNext());
    }
    myDbHelper.close();

}

public void DisplayTitle(Cursor c)
{
    Toast.makeText(this, 
            "id: " + c.getString(0) + "\n" +
            "ALCOHOL: " + c.getString(1) + "\n" +
            "TYPE: " + c.getString(2) + "\n" +
            "BRAND:  " + c.getString(3) + "\n" +
            "PRICE:  " + c.getString(4),
            Toast.LENGTH_LONG).show();        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:27:49.063

您需要添加

```
ORDER BY RANDOM() LIMIT 1; 
```

到您的查询。所以试试这个（未经测试）：

```
 myDataBase.query(true, DB_TABLE, new String[] {
                KEY_ROWID,
                KEY_ALCOHOL, 
                KEY_TYPE,
                KEY_BRAND,
                KEY_PRICE
                }, 
                KEY_ALCOHOL + "=?", 
                new String[] { alcohol },
                null, 
                null, 
                "RANDOM()", 
                "LIMIT 1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:24:47.390

使用 获取大小`mCursor.getCount()`，随机选择 0 内的数字并计数（请参阅[如何在 Java 中生成特定范围内的随机整数？](https://stackoverflow.com/questions/363681/generating-random-number-in-a-range-with-java)），然后使用 移动 mCursor `mCursor.moveToPosition(randomInt)`，获取行，我建议。

# extjs - 为什么 this.callParent(arguments); 在 ExtJS 的构造函数的开头调用？

> ID：12408393
> 
> 赞同：17
> 
> 时间：2012-09-13T14:18:05.643
> 
> 标签：extjs, this

我注意到，在我最近修改的许多程序中，它们总是调用当前对象的父参数。我知道这是必要的，但对为什么这是一种常见的做法没有充分的理解。对于初级开发人员的任何智慧......我应该知道这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-13T14:24:59.563

这是 ExtJS 用来支持构造函数中的类继承的机制。调用`this.callParent(arguments)`构造函数会调用正在扩展的直接父类的构造函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-05T11:19:22.773

我不知道这个问题是关于哪个版本的。但就我的代码而言，在 Ext JS 5 中，`callParent()`- 调用当前方法的“父”方法。那是先前被派生或覆盖覆盖的方法

试试这个代码。

### MyApp.test::LifecycleExample.js

```
Ext.define('MyApp.test.LifecycleExample', {
    extend: 'MyApp.test.TrialComponent',

    initComponent: function() {
        var me = this;

        me.width = 200;
        me.height = 100;
        me.html = {
            tag: 'div',
            html: 'X',
            style: {
                'float': 'right',
                'padding': '10px',
                'background-color': '#e00',
                'color': '#fff',
                'font-weight': 'bold'
            }
        };
        console.log("init is called before callParent()");

        me.myOwnProperty = [1, 2, 3, 4];

        me.callParent();

        console.log('1\. initComponent');
    },

    beforeRender: function() {
        console.log('2\. beforeRender');

        this.callParent(arguments);
    },

    onRender: function() {
        console.log('3\. onRender');

        this.callParent(arguments);

        this.el.setStyle('background-color', '#ff0');
    },

    afterRender: function() {
        console.log('4\. afterRender');

        this.callParent(arguments);

        this.el.down('div').on('click', this.myCallback, this);
    },

    beforeDestroy: function() {
        console.log('5\. beforeDestroy');

        this.callParent(arguments);
    },

    onDestroy: function() {
        console.log('6\. onDestroy');

        delete this.myOwnProperty;
        this.el.un('click', this.myCallback);

        this.callParent(arguments);
    },

    myCallback: function() {
        var me = this;
        Ext.Msg.confirm('Confirmation', 'Are you sure you want to close this panel?', function(btn) {
            if (btn === 'yes') {
                me.destroy();
            }
        });
    }
}); 
```

### MyApp.test::TrialComponent.js (Ext.Component)

```
Ext.define('MyApp.test.TrialComponent', {
    extend: 'Ext.Component',

    constructor: function() {
        console.log('parent const');
        this.initComponent();
    },

    constructor: function(config) {
        console.log('parent const config' + config);
        this.initComponent();
    }
}); 
```

浏览器控制台的输出是：

> `parent const config[object Object]`
> `init is called before callParent()`
> `1\. initComponent`

* * *

callParent( args ) 调用当前方法的“父”方法。那是先前被派生或覆盖覆盖的方法

参考是 ext js api 文档。

[http://docs.sencha.com/extjs/5.0/apidocs/#!/api/Ext.Base-method-callParent](http://docs.sencha.com/extjs/5.0/apidocs/#!/api/Ext.Base-method-callParent)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-30T00:38:37.603

根据文档（感谢 javaCoder）[http://docs.sencha.com/extjs/5.0/5.0.1-apidocs/#!/api/Ext.Base-static-method-callParent](http://docs.sencha.com/extjs/5.0/5.0.1-apidocs/#!/api/Ext.Base-static-method-callParent)：

```
Call the "parent" method of the current method. That is the method previously overridden by derivation or by an override (see Ext.define). 
```

并且`arguments`是：

```
Parameters
args : Array/Arguments
The arguments, either an array or the arguments object from the current method, for example: this.callParent(arguments) 
```

虽然这对我来说暗示了`arguments`这个方法的参数对象。但是，在查看开发人员工具时，该对象被封装在另一个对象中，该对象还包含一些其他信息，例如被调用者：

[![在此处输入图像描述](../Images/b5695ed822b7c19e7453face0bdfc9cf.png)](https://i.stack.imgur.com/WRcU8.png)

# python - Python：在一行中分配多个系统参数

> ID：12408394
> 
> 赞同：0
> 
> 时间：2012-09-13T14:18:06.960
> 
> 标签：python, arguments, variable-assignment

我试图找到这个问题的答案，但似乎没有什么适合这个问题......

我想在一个简单的行中将 a 分配`sys.argv`给一个变量，而不是执行以下操作：

```
var1 = sys.argv[1]
var2 = sys.argv[2]
var3 = sys.argv[3]
var4 = sys.argv[4]
var5 = sys.argv[5]
var6 = sys.argv[6]
etc... 
```

这可能吗？

干杯，

米宾

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T14:19:59.937

是的：

```
var1,var2,var3,var4 = sys.argv[1:5] 
```

这仅在右侧的可迭代对象有 4 个元素时才有效。Python3.x 稍微扩展了这个功能：

```
var1,var2,var3,var4,*rest = sys.argv[1:] 
```

在此变体中，您将 的前 4 个元素解压缩`sys.argv[1:]`到变量中，其余元素`sys.argv`放入 list 中`rest`。

对于命令行解析，我肯定会推荐`argparse`. 它随 python2.7 一起提供，可以很容易地为旧版本的 python 安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:19:50.907

您可以使用以下语法：

```
var1, var2, var3 = sys.argv[1:] 
```

请注意，变量的数量必须与列表的长度相匹配。通常，最好使用[getopt 模块](http://docs.python.org/library/getopt.html)。

# svn - 如何使用 Subversion 1.7+ 合并多个隐藏的 .svn 目录

> ID：12408397
> 
> 赞同：6
> 
> 时间：2012-09-13T14:18:21.030
> 
> 标签：svn, version-control, tortoisesvn

根据[Apache Subversion 1.7 发行说明](http://subversion.apache.org/docs/release-notes/1.7.html#single-db)：

> Subversion 1.7 工作副本在工作副本的每个目录中都没有一个 .svn 目录，而是在工作副本的根目录中只有一个 .svn 目录。

假设存储库中有多个目录，当我第一次签出时，我只选择性地签出特定目录。正如文档所说，这只会在顶级目录中创建一个 .svn 隐藏文件夹。

但是，如果我稍后决定签出另一个目录，则在签出完成后，新签出的目录中将有另一个 .svn 目录。

这意味着如果我尝试从根级别进行提交，它只会知道最初签出的目录。我还必须单独提交任何后续结帐。

有没有办法改变这种行为或使两个隐藏的 .svn 目录合并在一起？或者我是否必须在第一次结帐时检查整个存储库目录结构？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T14:34:56.903

简短的回答：不。每个都是单独的结帐并有自己的数据库。我敢肯定，如果您了解隐藏在`.svn`目录中的深层魔法，您可以使用它来做您想做的事。然而，与 Subversion 1.1 到 1.6 不同的是，该`.svn`目录的结构要复杂得多，而且不容易理解。

在您的情况下，最好的办法是重新签入所有内容，然后重新签出以包括两个项目。

如果您想定期执行此操作，您应该做的是使用`--depth=`in`svn co`和`--set-depth=`in `svn update`。

例如，我正在检查基本目录，但我不想要其他任何东西：

```
$ svn co --depth=immediates http://svn.vegicorp.com/svn/base_prod
A base_prod/.classpath
A base_prod/.settings
A base_prod/foundation
A base_prod/client
A base_prod/server 
```

这检查了`.settings`and`.classpath`文件，以及`foundation`, `client`, and`server`目录，但没有别的。它很快，而且我不会检查很多我不想要的东西。

现在，我想在服务器上工作：

```
$ cd base_prod
$ svn update --set-depth=infinity server 
```

这将*更新*我的服务器目录，但会*检查*整个目录结构。我现在可以使用`server`，但我没有`foundation`或`client`文件占用空间。

稍后，我想做一些工作`foundation`：

$ svn update --set-depth=无限基础

现在，我有了`foundation`目录。`.svn`而且，我的目录下只有一个`base_prod`目录。

# hadoop - 即使第一次尝试仍在运行，什么会导致 hadoop 开始第二次任务尝试？

> ID：12408408
> 
> 赞同：0
> 
> 时间：2012-09-13T14:18:46.207
> 
> 标签：hadoop

我正在使用 Amazon EMR (Hadoop 0.20.205) 并注意到我的一项任务处于奇怪的状态（见下文）。即使我的第一次尝试仍在运行，也启动了第二次任务尝试。我的其他任务都通过一次任务尝试完成。可能是什么原因？

```
 +--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |            Task Attempts             | Machine                     | Status  | Progress | Start Time           | Shuffle Finished                    | Sort Finished               | Finish Time | Errors | Task Logs | Counters | Actions | 
   |--------------------------------------+-----------------------------+---------+----------+----------------------+-------------------------------------+-----------------------------+-------------+--------+-----------+----------+---------|
   |                                      |                             |         | 66.69%   |                      |                                     |                             |             |        | Last 4KB  |          |         | 
   | attempt_201209121354_0021_r_000017_0 | /default-rack/xxx...        | RUNNING |          | 13-Sep-2012 13:10:28 | 13-Sep-2012 13:16:48 (6mins, 19sec) | 13-Sep-2012 13:16:58 (9sec) |             |        | Last 8KB  | 0        |         | 
   |                                      |                             |         | +------+ |                      |                                     |                             |             |        | All       |          |         | 
   |                                      |                             |         | +------+ |                      |                                     |                             |             |        |           |          |         |           
   |--------------------------------------+-----------------------------+---------+----------+----------------------+-------------------------------------+-----------------------------+-------------+--------+-----------+----------+---------|
   |                                      |                             |         | 66.69%   |                      |                                     |                             |             |        | Last 4KB  |          |         | 
   | attempt_201209121354_0021_r_000017_1 | /default-rack/xxx...        | RUNNING |          | 13-Sep-2012 13:14:55 | 13-Sep-2012 13:18:58 (4mins, 3sec)  | 13-Sep-2012 13:19:00 (2sec) |             |        | Last 8KB  | 0        |         | 
   |                                      |                             |         | +------+ |                      |                                     |                             |             |        | All       |          |         | 
   |                                      |                             |         | +------+ |                      |                                     |                             |             |        |           |          |         |           
   +--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:40:01.097

Hadoop 默认使用[推测执行](http://developer.yahoo.com/hadoop/tutorial/module4.html#tolerence)。它将启动同一任务的两个实例，一旦一个完成，它将杀死尚未完成的一个。任务完成后，Web UI 通常会从作业的网页中删除推测任务（至少在 20.2 中是这样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:54:10.830

首先，您打开了推测执行（如马特所示，默认情况下它是打开的）。现在，推测执行很有用，例如，如果您的 Hadoop 服务器并非全部相同，并且有些服务器比其他服务器更新/更快。

在我们较旧的 Hadoop 集群中，我看到很多情况下第二个实例比原始实例完成得更快。

# parsing - 使用 ViewPager、PagerAdapter 和 AsyncTask 的活动不显示内容

> ID：12408411
> 
> 赞同：1
> 
> 时间：2012-09-13T14:18:54.893
> 
> 标签：parsing, android-viewpager, dynamic-content

我正在尝试构建一个布局类似于新的Android Market，马赛克样式的活动，该活动列出了每个马赛克中的信息。当用户向左或向右滑动时，他们会看到越来越多的带有信息的马赛克。信息量是动态的，因为它是通过 AsyncTask 从 XML 文件加载的。

我决定使用 ViewPager/PagerAdapter 来处理视图和控制分页。每个页面都会有一个LinearLayout，类似于此链接中的图片：http: [//dl.dropbox.com/u/4458251/mosaic.png](http://dl.dropbox.com/u/4458251/mosaic.png)

马赛克中的每个方块都是一个带有图像和文本视图的RelativeLayout。

**我遇到的问题是显示的第一个视图始终为空白，当我尝试更改页面时，显示强制关闭错误。另外，当我调试时，我发现根本没有输入`instantiateItem()`方法`PagesContentAdapter.java`**！是什么赋予了？。

这是我的活动（`MosaicMenuActivity.java`）：

```
public class MosaicMenuActivity extends Activity {
public final String TAG = "NoniusDroidBaseApp";

// The title image (on top of the window)
private String TITLE_IMAGE = "title/title_MAIN";
// The background (normally you don't want to change it)
private String BACKAGROUND_IMAGE = "background";

// The content loader is used to load the application on another thread
// It makes sure that you can't interact with the application until the load
// is completed,
// but it will also blocks allows you to exit the application while it it
// loading.
// The interface will also never block
private PageContentLoader content_loader;

// The content adapter holds one application content array.
private PagesContentAdapter content_adapter;

// Actual system language
private String language;

/*
 * (non-Javadoc)
 * 
 * @see android.app.Activity#onCreate(android.os.Bundle)
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Apply the main.xml as the content view
    setContentView(R.layout.main);
    // Apply the Nonius default theme
    getApplicationContext().setTheme(R.style.Theme);
}

@Override
public void onResume() {
    super.onResume();

    // Whenever the application resumes, the loader check if the Theme
    // changed (or the language was modified)
    // If it was modified, it loads the theme again
    if (ThemeManager.themeModified(language)) {
        loadTheme();
    }

    // Get the actual system language
    language = SetTopBoxDetails.getLanguage();

    // Build the content adapter
    this.content_adapter = new PagesContentAdapter(
            this.getApplicationContext(), language);

    // Applies the content adapter to the content ViewPager
    ViewPager myPager = (ViewPager) findViewById(R.id.scrollview_pages);
    myPager.setAdapter(content_adapter);
    myPager.setCurrentItem(0);

    // Builds the module that will load the content from the xml
    this.content_loader = new PageContentLoader(this, content_adapter, language);
    // The content is read whenever the application resumes
    loadDynamicContent();
}

public boolean onKeyDown(int keyCode, KeyEvent event){
    Log.d(TAG, "onKeyDown");
    return super.onKeyDown(keyCode, event);
}

/*
 * This function is used to load content that comes from outside of the
 * application.
 */
private void loadDynamicContent() {
    // The content loader makes sure that the user can't interact with the
    // application until the load is done.
    this.content_loader.execute();
}

/*
 * Loads the application theme.
 */
private void loadTheme() {
    // Get the context
    Context context = this.getApplicationContext();

    // Load the background
    RelativeLayout relativelayout_base = (RelativeLayout) findViewById(R.id.relativelayout_base);
    relativelayout_base.setBackgroundDrawable(ThemeManager.getImage(
            BACKAGROUND_IMAGE, context));
} 
```

AsyncTask 是由我的`PageContentLoader.java`. 我从 XML 中获取所有数据，但未显示：

```
public class PageContentLoader extends AsyncTask<Void, Integer, Boolean> {
    public static final String TAG = "PageContentLoader";
    private static int SLEEPING_TIME = 2000;

    // The location of the XML file
    private static final String XML_PATH = "/data/nonius/menu/mosaic.xml";

    // XML node keys used to parse xml
    private static final String KEY_PAGE = "page";
    private static final String KEY_PAGE_TEMPLATE = "template";
    private static final String KEY_TILE = "tile";

    // The parent activity. Used to lauch UI items
    private MosaicMenuActivity activity;

    // The content storage
    private PagesContentAdapter content_adapter;

    // The dialog that locks the user interaction
    private LoaderDialog dialog;

    // The array of content (in this demo, Pages!)
    public ArrayList<Page> pages;

    private String language;

    public PageContentLoader(MosaicMenuActivity activity,
            PagesContentAdapter content_adapter, String language) {
        this.activity = activity;
        this.pages = new ArrayList<Page>();
        this.dialog = new LoaderDialog(this.activity);
        this.content_adapter = content_adapter;
        this.language = language;
    }

    public boolean loadXml() {
        Log.d(TAG, "loadXml");
        // Clean the pages array
        this.pages = new ArrayList<Page>();

        // Get the DOM element
        Document doc = XmlHelper.getDomElement(XML_PATH);
        // If the document is null
        if (doc == null) {
            // Return fail
            return false;
        }

        // Get all the nodes with tag KEY_PAGE
        NodeList page_nodelist = doc.getElementsByTagName(KEY_PAGE);
        Log.d(TAG, "getElementsByTagName");

        // looping through all item nodes <item>
        for (int page_i = 0; page_i < page_nodelist.getLength(); page_i++) {
            Page page = new Page();

            Log.d(TAG, "Page " + page_i);
            // Get the element of the node list
            Element page_element = (Element) page_nodelist.item(page_i);

            String page_template = page_element.getAttribute(KEY_PAGE_TEMPLATE);
            page.setTemplate(page_template);

            NodeList tile_nodelist = page_element
                .getElementsByTagName(KEY_TILE);

            for (int tile_i = 0; tile_i < tile_nodelist.getLength(); tile_i++){
                // Create an empty tile
                Tile tile = new Tile();

                Element tile_element = (Element) tile_nodelist.item(tile_i);
                tile.importXmlElement(tile_element);

                page.addTile(tile);

                Log.d(TAG, tile.toString());
            }

            this.pages.add(page);
        }

        // Everything went ok
        return true;
    }

    protected void onPreExecute() {
        this.dialog.setLoadMode(activity.getString(R.string.loading_message));
        this.dialog.show();
    }

    protected Boolean doInBackground(Void... params) {
        // Parse the xml file
        return this.loadXml();
    }

    protected void onPostExecute(Boolean success) {
        // If the loader succeeded
        if (success) {
            // Update the adapter
            content_adapter.updateContent(pages);

            // If the dialog is visible, hide it
            if (dialog.isShowing()) {
                dialog.dismiss();
            }
        }
        // If the loader failed
        else {
            // Start the error dialog
            dialog.setErrorMode(activity
                .getString(R.string.loading_error_message));
        }
    }
} 
```

PagerAdapter 在我的`PageContentAdapter.java`. 在进行一些调试之后，构造方法被成功调用，但创建页面内容的方法（`instantiateItem()`）从未被调用：

```
public class PagesContentAdapter extends PagerAdapter {
public static final String TAG = "PagesContentAdapter";
// The list context
private Context context;

// The content array
public ArrayList<Page> pages;

// The system language
private String language;

/**
 * Class constructor
 * 
 * @param context
 *            The context used to build the ouput views
 */
public PagesContentAdapter(Context context, String language) {
    this.context = context;
    // Create an empty pages array
    this.pages = new ArrayList<Page>();
    this.language = language;
}

/**
 * Update the Adapter pages array and notify the parent
 * that the data was modified
 * @param pages
 */
public void updateContent(ArrayList<Page> pages) {
    this.pages = pages;
    //this.notifyDataSetChanged();
}

public int getCount() {
    return pages.size();
}

public Object getItem(int position) {
    return pages.get(position);
}

public long getItemId(int position) {
    return position;
}

@Override
public void destroyItem(View collection, int position, Object view) {
    ((ViewPager) collection).removeView((View) view);

}

@Override
public void finishUpdate(View arg0) {
    // TODO Auto-generated method stub

}

@Override
public Object instantiateItem(View page_view, int position) {
    Page page = new Page();
    page = pages.get(position);

    LayoutInflater page_layout_inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    LinearLayout linearlayout_page = (LinearLayout) page_layout_inflater.inflate(R.layout.page_template_5icons_v1, null);

    for(int i=0; i<5; i++) {
        linearlayout_page.addView(layoutTile(linearlayout_page, page, i));
    }

    ((ViewPager) page_view).addView(linearlayout_page, 0);

    return linearlayout_page;
}

public RelativeLayout layoutTile(LinearLayout linearlayout_page, Page page, int index) {
    RelativeLayout relativelayout_tile = null;

    switch(index) {
        case 0: relativelayout_tile = (RelativeLayout) linearlayout_page.findViewById(R.id.item_big_1);
        case 1: relativelayout_tile = (RelativeLayout) linearlayout_page.findViewById(R.id.item_small_1);
        case 2: relativelayout_tile = (RelativeLayout) linearlayout_page.findViewById(R.id.item_small_2);
        case 3: relativelayout_tile = (RelativeLayout) linearlayout_page.findViewById(R.id.item_small_3);
        case 4: relativelayout_tile = (RelativeLayout) linearlayout_page.findViewById(R.id.item_small_4);
    }

    // Inflate it in a layout xml
    LayoutInflater tile1_layout_inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    tile1_layout_inflater.inflate(R.layout.tile, relativelayout_tile);
    // Get the textview from the inflated layout
    TextView textview_tail = (TextView) relativelayout_tile.findViewById(R.id.textview_tile);
    Tile tile = page.getTiles().get(index);
    // Set its text
    textview_tail.setText(tile.getDescription());

    return relativelayout_tile;
}

@Override
public boolean isViewFromObject(View view, Object object) {
    return view == object;
}

@Override
public void restoreState(Parcelable arg0, ClassLoader arg1) {
    // TODO Auto-generated method stub

}

@Override
public Parcelable saveState() {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void startUpdate(View arg0) {
    // TODO Auto-generated method stub

}

} 
```

**感谢我能得到的任何帮助。感谢您抽出宝贵时间查看此问题！**

# python - Django：让用户下载一个大文件

> ID：12408414
> 
> 赞同：0
> 
> 时间：2012-09-13T14:18:58.517
> 
> 标签：python, django, apache, python-2.7, django-views

我正在建立一个私人文件上传网站。Alice 上传一个文件，Bob 下载它。

Alice 和 Bob 以外的人不应该有访问权限。我首先考虑给文件一个复杂的名称（`http://domain/download/md5sum.zip`），但我想要一个过期的链接。所以像`http://domain/download/tempkey/aaa123/file.zip`. 这将使我能够更好地控制文件下载和记录。

我发现了这个：[https](https://stackoverflow.com/a/2900646) ://stackoverflow.com/a/2900646 。它提出以下建议：

```
class RequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):

    def do_GET(self):
        # The URL the client requested
        print self.path

        # analyze self.path, map the local file location...

        # open the file, load the data
        with open('test.py') as f: data = f.read()

        # send the headers
        self.send_response(200)
        self.send_header('Content-type', 'application/octet-stream') # you may change the content type
        self.end_headers()
        # If the file is not found, send error code 404 instead of 200 and display a message accordingly, as you wish.

        # wfile is a file-like object. writing data to it will send it to the client
        self.wfile.write(data) 
```

但是我如何让它在 Django 中工作呢？视图函数应该返回一个 HTTPResponse 对象，而这不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:32:04.873

不建议使用 Django 下载大文件。通常你会有一个前端多路复用器，比如 NginX，并且只使用 Django 来验证文件。

然后，如果下载得到验证，您将向多路复用器发出信号。对于 NginX，您可以设置一个特殊的标头（“X-Accel-Redirect”）来指向本地文件的真实位置。Django 只会提供几个字节，所有繁重的工作都将由 NginX 承担；同时原始 URL 将是 Django 的，因此不可能绕过安全性。

见：[http ://wiki.nginx.org/X-accel](http://wiki.nginx.org/X-accel)

您可以在此处找到有关如何提供静态文件（可通过身份验证进行扩展）的说明

[https://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)

但正如该页面所说，它是“*快速而肮脏的帮助视图*”，不适用于生产或高流量站点。这不是 Django 的设计初衷，即使它*可以*做到。

# jsp - JasperReport 自定义 DefaultParametersForm.jsp

> ID：12408416
> 
> 赞同：1
> 
> 时间：2012-09-13T14:19:02.413
> 
> 标签：jsp, jasper-reports, jasperserver

我设法提供了一个自定义模板并覆盖了我在存储库中设置的特定于此报告的默认控件。

但是，对于我的一生，我找不到任何可以开始添加控件的示例。最好通过引用我通过接口配置的控件 ID 调用 render()。我有我需要的表单，但需要调整表单上的两个自定义元素——这似乎是最好的方法。

用谷歌搜索到天涯海角......有谁知道或愿意告诉我代码会是什么样子，说在我的自定义 JSP 文件中呈现 SELECT 控件之一？

我有一个 SELECT 绑定到一个显示所有客户的 SQL 查询...ID_CUSTOMER - 如果我能找到一个演示如何完成的教程，那就太棒了。

显然，最终指南中对此进行了解释，但 4.0 版不是免费的。

# jquery - 循环遍历元素列表并通过查询字符串读取值

> ID：12408420
> 
> 赞同：1
> 
> 时间：2012-09-13T14:19:16.627
> 
> 标签：jquery

我通过 jquery selectList 将值分配给无序列表

从 selectList 中选择选项后，无序列表看起来像这样

```
<ul id="myList">
<li id="3">Cat</li>
<li id="7">Dog</li>
<li id="12">Fish</li>
</ul> 
```

这需要通过 jquery 在客户端完成。

在后面的代码中通过查询字符串读取这些值的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:52:56.173

您可以使用`<select multiple="multiple">`带有所有选项的隐藏项作为`option`项目。并将它们全部设置为`selected="selected"`.

这样，您的所有值都会在查询字符串中序列化，`a=10&b=12...`依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T17:47:32.067

我通过遍历列表并将每个值附加到变量然后将变量分配给隐藏字段来解决了这个问题。工作正常。

# java - 在算法中直接计算数学

> ID：12408424
> 
> 赞同：2
> 
> 时间：2012-09-13T14:19:23.333
> 
> 标签：java, algorithm, math

我试图在我的算法中正确计算数学，但我很难理解计算 ie 等的“算法分析`f(n) = 1`” `f(n) = n-1`。

我创建了一个方法，它循环遍历一个排序的整数数组，并计算有多少不同的整数（即`{1,3,3,3,5,6,8} = 5`）。我如何计算最坏的情况？

基本上，代码是这样的：

```
int length = a.length;
int diffCount = 1; //The number of different integers

for(int i = 1; i < length; i++)
{
    int b = a[i];
    int c = a[i-1];

    if(c>b)
         throw new IllegalStateException("unsorted array");

    if(c!=b)
         diffCount++;
}
return diffCount; 
```

那里还有一些其他的东西，但这只是为了防止像空数组之类的错误，所以我没有包括它。

这里最坏的情况是什么..？如果条件`c!=b`每次都为真？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:30:38.163

就运行时分析而言，如果数组已排序，则此算法始终为*O(n) 。*如果不是，它将在此之前抛出异常（但最坏的情况仍然是*O(n)*）。

根据值的不同，结果会略有不同。有关分支预测的解释，请参见彼得的答案。但我认为这不会显着影响运行时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:21:59.823

从理论上讲，对于给定长度的数组，执行此循环所花费的时间将始终相同。

我查看了分支预测是否可能会受到影响，在这种情况下它似乎不太可能，因为 JIT 足够聪明，可以消除第二个分支。

在 C 中，可以删除分支

```
diffCount += c != b; 
```

并且可能 JIT 会做类似的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:35:49.713

通常，在分析复杂性时，您会关注您认为算法中最慢的操作是什么。对于排序算法，我相信你会选择比较。在您的代码中，我会选择两个数组访问：

```
int b = a[i];
int c = a[i-1]; 
```

甚至两者的比较：

```
if (c != b) … 
```

而不是`diffCount++`. 这意味着比较的结果并不重要，因为它总是会发生。

当然，您可以选择根据多个操作来分析复杂性。例如，对于排序，您可以查看元素交换以及元素比较。或者在您的情况下，您可能需要关注，`diffCount++`因为您希望内存写入比比较慢得多。

我选择的操作会得到命中`a.length`时间，所以这就是你的算法的复杂性。

If this chosen operation is under a condition, you have to pick (when looking for Big-O complexity) a reasonable *upper* bound on how often the condition can get hit. So, in your case, if it's possible for any input array that `c != b` is true for all pairs of elements checked, you can assume it's always true in your analysis.

# jquery - JqG rid 选择可能可见或不可见的特定行

> ID：12408427
> 
> 赞同：3
> 
> 时间：2012-09-13T14:19:46.563
> 
> 标签：jquery, jqgrid, jqgrid-asp.net, jqgrid-php

我有一个 jqGrid 并且有几页项目。我有一行的 ID，它可能在第一页上，也可能埋在其他页面的某个地方。

给定行的 ID，我如何以编程方式选择这样的行？我正在使用按钮的单击事件，如下所示

```
.on("click", function(){
     var myId = $(this).attr("id");
     $("#studentGrid").jqGrid.setSelection(myId, true);
}); 
```

当我单击按钮时，我得到以下萤火虫控制台。

**TypeError：this.each 不是函数**

有任何想法吗 ？

**编辑**
所以我选择只用一条记录重新填充网格。问题是我没有使用本地数据。我的数据类型是“json”。像这样

```
 $("#studentGrid").jqGrid({
                url: '<c:url value="/students/studentjsondata"/>',
                datatype: 'json',
                height: 'auto',
                colNames:['id','First Name', 'Last Name', 'Other Name' ,'Date Of Birth', 'Gender'], 
                colModel:[ 
                        //Bla Bla Bla
                ],
                rowNum:10,
                autowidth: true,
                pager: '#pager', 
                sortname: 'id', 
                viewrecords: true, 
                sortorder: "desc",
                caption:"Students",
                emptyrecords: "Empty Records",
                subGrid: true,
                /* <![CDATA[ */ 
                onSelectRow: function(id){ 
                    if((lastsel != 0)&&(id!==lastsel)){ 
                        $("#studentGrid").jqGrid('collapseSubGridRow', lastsel);                
                    } 
                    lastsel=id; 
                }/* ]]> */ ,
                subGridOptions: { 
                    "plusicon" : "ui-icon-triangle-1-e", 
                    "minusicon" : "ui-icon-triangle-1-s", 
                    "openicon" : "ui-icon-arrowreturn-1-e", 
                    "reloadOnExpand" : true, 
                    "selectOnExpand" : true  
                },
                subGridRowExpanded: function(subgrid_id, row_id) {
                    //Bla Bla Bla
                }
    }); 
```

我有想要重新填充网格的 json 字符串。如何使用这些新数据重新初始化网格。我将下面的json字符串与相应的逻辑如下，但没有任何反应。

```
{'page':'1', 'records':'1', 'total':'1', 'rows':[{'id':'7385', 'cell': ['Max', 'Payne', '', 'September 16, 2012', 'Male']}]}

.on("click", function(){
  var myNewData = eval('(' + $(this).attr("griddata") + ')');
  $("#studentGrid").jqGrid('setGridParam', { datatype: 'local', data: myNewData}).trigger('reloadGrid');
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T17:02:12.433

您可以尝试在网格`setSelection`内添加调用方法：`loadComplete``$("#studentGrid")`

```
loadComplete: function () {
    $(this).jqGrid("setSelection", myId, true);
} 
```

如果 id 等于`myId`in 的行不在当前页面上，则不会选择任何行。如果 id = 的行在`myId`当前页面上执行，则该行将被选中。是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:41:07.617

您只能选择当前页面上的一行。

您可以将选定的行存储在一个数组（或其他一些数据结构）中，并在更改页面时选择任何“选定”行 - 这个答案应该会有所帮助：[jqGrid: How to use multiselect on different pages](https://stackoverflow.com/questions/11567915/jqgrid-how-to-use-multiselect-on-different-pages/11568255#11568255)

或者，您可以按照您的建议进行操作，并根据您的要求只显示那一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:55:50.810

我只是在这里猜测-

1.  如果您已经拥有需要选择的 ID，为什么不将其保存在内存中呢？或者也许是 cookie 或 HTML5 locaStorage？

2.  然后使用这些值将选定的行设置为相关行出现在当前页面中的时间。

3.  您始终可以在页面请求之间来回序列化您的“选定 ID”（如果不使用 ajax）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-13T20:19:48.843

所以，伙计们，谢谢大家的评论。他们引导我回答这个问题。这个[链接](https://stackoverflow.com/questions/6831306/load-local-json-data-in-jqgrid-without-addjsonrows)也很有帮助。所以这是使用 json 字符串更新非本地数据的代码。

```
.on("click", function(){
    $("#studentGrid").jqGrid('setGridParam', { jsonReader: { repeatitems: false }, datatype: 'jsonstring', datastr: $(this).attr("griddata")}).trigger('reloadGrid');
}); 
```

希望它可以帮助那里的其他人。现在我要做的就是弄清楚如何通过删除这些参数来正确地重新加载网格。这是通过使用默认的 jsonReader 来完成的，如下所示。

```
$("#studentGrid").jqGrid('setGridParam', {    jsonReader : {
root: "rows",
page: "page",
total: "total",
records: "records",
repeatitems: true,
cell: "cell",
id: "id",
userdata: "userdata",
subgrid: {root:"rows", 
repeatitems: true, 
cell:"cell"
 }
} , datatype: 'json', datastr: null}); 
```

# ruby - 向xpath添加变量？

> ID：12408428
> 
> 赞同：0
> 
> 时间：2012-09-13T14:19:47.717
> 
> 标签：ruby

我有一个带有 XPath 的对象，我想更改`1234`为一些变量：

```
:xpath => "//*[@id='blablabla-1234']/div/" 
```

像`:xpath => "//*[@id='blablabla-#{variable}']/div/"`这样的解决方案不起作用，因为我有一个错误，比如：

```
unable to locate element, using {:tag_name=>"div", :xpath=>"//*[@id='blablabla-']/div/ 
```

我该怎么做呢？

# java - 如何获得图像的平均颜色

> ID：12408431
> 
> 赞同：42
> 
> 时间：2012-09-13T14:19:51.690
> 
> 标签：java, android

我希望能够拍摄图像并找出平均颜色是什么。意思是如果图像是半黑半白，我会在两者之间得到一些东西......一些灰色阴影。它可能是最常见的单一颜色或中值。任何平均值都可以。

我怎么能在android中做到这一点。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-13T14:30:06.440

```
Bitmap bitmap = someFunctionReturningABitmap();
long redBucket = 0;
long greenBucket = 0;
long blueBucket = 0;
long pixelCount = 0;

for (int y = 0; y < bitmap.getHeight(); y++)
{
    for (int x = 0; x < bitmap.getWidth(); x++)
    {
        Color c = bitmap.getPixel(x, y);

        pixelCount++;
        redBucket += Color.red(c);
        greenBucket += Color.green(c);
        blueBucket += Color.blue(c);
        // does alpha matter?
    }
}

Color averageColor = Color.rgb(redBucket / pixelCount,
                                greenBucket / pixelCount,
                                blueBucket / pixelCount); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-13T14:29:07.323

我想你必须自己做。

只需创建一个包含所有颜色的 int 数组：

```
 Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.icon);  
    bmp = bmp.copy(Bitmap.Config.ARGB_8888, true);    
    int intArray[] = new int[bmp.getWidth()*bmp.getHeight()];  
    bmp.getPixels(intArray, 0, bmp.getWidth(), 0, 0, bmp.getWidth(), bmp.getHeight()); 
```

然后你可以用intArray[0]得到颜色，红色的值可以是0xFFFF0000（最后6个数字是RGB颜色值）。

编辑：简单的解决方案：

```
Get you full-size image in a bitmap.

Create a scaled bitmap of 1*1px.

Get this bitmap color. 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-01T01:41:46.110

以 Dan O 的解决方案为基础，这是一种自动考虑 alpha 通道并对`getPixels`vs进行优化/权衡的方法`getPixel`。

成本是内存，但好处是性能，在可能运行数百万次的循环中调用虚拟方法 [即 8MP 图像有 3,456x2,304 = 7,962,624 像素]）。`android.graphics.Color`我什至通过删除循环方法调用更进一步。

```
public static int getDominantColor(Bitmap bitmap) {
   if (null == bitmap) return Color.TRANSPARENT;

   int redBucket = 0;
   int greenBucket = 0;
   int blueBucket = 0;
   int alphaBucket = 0;

   boolean hasAlpha = bitmap.hasAlpha();
   int pixelCount = bitmap.getWidth() * bitmap.getHeight();
   int[] pixels = new int[pixelCount];
   bitmap.getPixels(pixels, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());

   for (int y = 0, h = bitmap.getHeight(); y < h; y++)
   {
       for (int x = 0, w = bitmap.getWidth(); x < w; x++)
       {
           int color = pixels[x + y * w]; // x + y * width
           redBucket += (color >> 16) & 0xFF; // Color.red
           greenBucket += (color >> 8) & 0xFF; // Color.greed
           blueBucket += (color & 0xFF); // Color.blue
           if (hasAlpha) alphaBucket += (color >>> 24); // Color.alpha
       }
   }

   return Color.argb(
           (hasAlpha) ? (alphaBucket / pixelCount) : 255,
           redBucket / pixelCount,
           greenBucket / pixelCount,
           blueBucket / pixelCount);
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-12-04T11:08:45.753

您可以使用`Palete`AndroidX[或](https://developer.android.com/reference/androidx/palette/graphics/Palette)[v7-support library](https://developer.android.com/tools/support-library/features.html#v7-palette)中的类。

它提供了从位图中提取颜色的其他方法，例如：

*   最主要的颜色
*   鲜艳的色彩
*   柔和的颜色
*   多得多

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-13T14:28:16.837

使用`Bitmap.getPixels()`方法获取颜色值。然后要计算平均值，您必须确定您的意思。在灰度图像中它很简单，但是对于颜色，没有平均值这样的东西。您可以分成组件（例如 RGBA），并取每个组件的平均值。另一种方法是搜索最常用的颜色，我敢肯定还有其他几种选择。玩它:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-01T11:17:52.950

还有一个图书馆可以为您做到这一点。

[http://www.michaelevans.org/blog/2013/12/12/colorart-a-library-to-do-itunes-11-style-color-matching-for-android/](http://www.michaelevans.org/blog/2013/12/12/colorart-a-library-to-do-itunes-11-style-color-matching-for-android/)

# ios6 - uitableview setbackgroundcolor 未在 UITableViewStyleGrouped 表中设置颜色

> ID：12408432
> 
> 赞同：19
> 
> 时间：2012-09-13T14:19:56.617
> 
> 标签：ios6

在 iOS 6

[uitableview setBackgroundColor:] 表格样式为 UITableViewStyleGrouped 时不设置颜色

而是看到默认的条纹背景。

如果样式是 UITableViewStyleGrouped 我们应该如何设置表格的背景

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-13T16:46:48.013

```
[tableViewInstance setBackgroundView: nil]; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-21T15:02:38.720

环境

```
[tableView setBackgroundView: nil]; 
```

在 iOS 5 中给我带来了问题，所以我使用的是：

```
UIView* bview = [[UIView alloc] init];
bview.backgroundColor = [UIColor yellowColor];
[tableView setBackgroundView:bview]; 
```

iOS 5 和 6 兼容！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T16:40:37.950

```
self.view.backgroundColor = TTSTYLEVAR(mainPageBackground);
self.tableView.separatorColor   = TTSTYLEVAR(mainPageBackground);
self.tableView.backgroundView = nil; 
```

为我修好了。不过，您必须小心这可能产生的其他影响。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-21T10:12:07.130

另一个简单的解决方案是在 IB 中更改 UITableView 的背景颜色。例如，我改为“白色”，它再次起作用。

不知何故，将背景颜色保留为“默认”使得 iOS 6 不会打扰代码中的任何其他颜色设置。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-20T00:17:52.080

我会谨慎将 backgroundView 设置为 nil。以我的经验，这会导致用户在最新的 XCode 4.5 下滚动时显着降低渲染性能。这是我对这个问题的解决方案，它不影响滚动性能：

```
- (void) viewWillLayoutSubviews
{
    CGRect rect = [[UIScreen mainScreen] bounds];
    CGRect frame = CGRectMake(rect.origin.x, rect.origin.y, rect.size.width, rect.size.height);

    UIView *backgroundView = [[[UIView alloc] initWithFrame:frame] autorelease];
    backgroundView.backgroundColor = [UIColor clearColor];
    self.tableView.backgroundView = backgroundView;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-06T04:15:21.980

在 ios 6 中，分组表视图的方法，即 backgroundColor 已被弃用，因此改为使用

```
[tableview setBackgroundView : nil]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-26T04:16:53.693

我知道这已被标记为已回答，但以下内容也有效：

```
[[UITableView appearance] setBackgroundColor:[UIColor colorWithRed:233.0/255.0 green:233.0/255.0 blue:233.0/255.0 alpha:1.0]];

[[UITableView appearance] setBackgroundView:nil]; 
```

这样您就不必为应用程序中的每个 tableView 设置。感谢作者的原始提示！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-17T05:23:54.863

将背景设置为 nil 可以完成这项工作，是的，它不会与以前的版本有任何问题。

# mysql - 将行中的所有列从日期转换为时间戳 MySQL

> ID：12408436
> 
> 赞同：3
> 
> 时间：2012-09-13T14:20:02.030
> 
> 标签：mysql, date, timestamp

我有一个包含 13000 行的数据库。每行都包含“日期”列，现在采用这种格式（示例）`2012-09-01 17:53:28`：，但我希望它们是 TIMESTAMP。

我应该运行什么查询来将所有名为“日期”的列从日期更新为所有行的时间戳？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T14:38:40.927

[使用ALTER TABLE](http://dev.mysql.com/doc/refman/5.5/en/alter-table.html)命令从一种类型转换为另一种类型非常简单：

```
ALTER TABLE table_name CHANGE old_date new_timestamp TIMESTAMP 
```

如果您有大量数据和大量索引，则此过程可能需要一段时间才能完成。

我不确定您为什么要将这些切换为`TIMESTAMP`类型，因为它的范围比`DATETIME`. 差异已[记录在案](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)并且很重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T14:36:29.737

目前还不清楚你在问什么。存在以下数据类型：`date`、`time`和。还有，这是自 1970-01-01 以来的秒数，但我认为这不是你所追求的。`datetime``timestamp``UNIX_TIMESTAMP`

我建议你阅读[这个](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)。

> DATETIME 类型用于同时包含日期和时间部分的值。MySQL 以 'YYYY-MM-DD HH:MM:SS' 格式检索和显示 DATETIME 值。支持的范围是“1000-01-01 00:00:00”到“9999-12-31 23:59:59”。
> 
> TIMESTAMP 数据类型用于同时包含日期和时间部分的值。TIMESTAMP 的范围为 '1970-01-01 00:00:01' UTC 到 '2038-01-19 03:14:07' UTC。

当您要转换列时，`date`请执行以下操作：

```
ALTER TABLE yourTable MODIFY COLUMN yourDateColumn TIMESTAMP; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:25:17.443

```
SELECT UNIX_TIMESTAMP('2012-09-01 17:53:28'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T14:29:22.563

您可以在执行查询时仅使用[UNIX_TIMESTAMP()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)函数将值作为时间戳返回。像这样：

```
mysqli_query("select UNIX_TIMESTAMP(date) as date from table"); 
```

# ssas - 按通用计算度量排序会导致无限递归？(MDX)

> ID：12408437
> 
> 赞同：0
> 
> 时间：2012-09-13T14:20:08.390
> 
> 标签：ssas, mdx, olap, ssas-2008

我需要编写一个计算的度量来显示与`Measure1`任何给定维度的总和相比的份额。我设法这样做：

```
CREATE MEMBER CURRENTCUBE.[Measures].[Test] AS
  [Measures].[Measure1] / ( AXIS( 1 ).ITEM( 0 ).DIMENSION.LEVELS( 0 ).ITEM( 0 ), [Measures].[Measure1] ) 
```

但是由于 的通用性`[Test]`，不可能通过这种度量来对维度进行排序。

```
SELECT [Measures].[Measure1] ON 0,
ORDER( [Dimension1].MEMBERS, [Measures].[Test] ) ON 1
FROM [MyCube] 
```

执行上述代码会导致以下错误：

> 检测到无限递归。依赖循环是：测试 -> 测试。

这是相当合乎逻辑的——要获得`AXIS( 1 ).ITEM( 0 )`，我们需要轴 1 上的一组维度成员，但在成员按 排序之前无法获得该集合`[Test]`。

另一方面，如果我定义`[Test]`为特定于某个维度，它会按预期工作：

```
CREATE MEMBER CURRENTCUBE.[Measures].[Test] AS
  [Measures].[Measure1] / ( [Dimension1].[All], [Measures].[Measure1] ) 
```

它之所以有效，是因为它`[Dimension1].[All]`针对特定成员，而不需要轴 1 首先评估其成员集。

有没有办法使这个计算的度量通用？也许，有可能以`[All]`另一种方式获取当前维度的成员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:21:58.143

如果您只显示一个度量，您可以重写您的第一个查询以避免错误：

```
SELECT [Measures].[Measure1] ON 0,
ORDER([Dimension1].MEMBERS) ON 1
FROM [MyCube]
WHERE ([Measures].[Test]) 
```

# c# - 使用扩展方法的实体框架分页很慢？

> ID：12408439
> 
> 赞同：5
> 
> 时间：2012-09-13T14:20:15.467
> 
> 标签：c#, linq, entity-framework, extension-methods

我在 C# 的实体框架中遇到了一些慢查询的问题。我创建了一个名为 Page 的扩展方法来处理分页，但是当我使用它时，查询变得非常慢。如果我只是做 .Skip(page.Value * pageSize.Value).Take(pageSize.Value) 而不是使用 Page 查询会快很多。我猜想使用 Page 会在分页之前获取所有联系人。有没有办法防止这种情况，或者我做错了什么？

询问：

```
var contacts = db.Contacts
                        .Where(x => x.AccountID == accountID && x.Deleted == false)
                        .OrderByDescending(x => x.FirstName)
                        .ThenBy(x => x.LastName)
                        .ThenBy(x => x.CreatedDate)
                        .Page(page, pageSize);

return contacts.ToList(); 
```

扩展方法：

```
 public static IEnumerable<T> Page<T>(this IEnumerable<T> elements, int? page, int? pageSize)
    {
        if (page.HasValue && pageSize.HasValue)
            return elements.Skip(page.Value * pageSize.Value).Take(pageSize.Value);
        else
            return elements;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T14:30:51.110

您的扩展方法应该在 IQueryable 之上，以便 EF 可以处理表达式并生成带有分页的 SQL 查询。

由于您使用 IEnumerable，Page 方法将调用 IEnumerable 的 Skip 和 Take。这将导致对构建到该点的查询结果进行枚举（在调用 Page 之前），并在内存中对所有返回的项目进行分页，而不是在 DB 查询中包括分页。

# ruby-on-rails - ruby on rails 控制器不执行模型方法

> ID：12408441
> 
> 赞同：0
> 
> 时间：2012-09-13T14:20:18.190
> 
> 标签：ruby-on-rails, methods, model, controller, execute

**控制器.rb**

```
if @object.save
    Post.method_name(@object)
end 
```

**post.rb**

```
def self.method_name(object)
    post_id = 1
    p = Post.new
    p.post_id = post_id
    p.save
end 
```

执行时`Post.method_name(@object)`，即使我也看不到任何错误，我也看不到添加到表中的新帖子...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:50:01.197

解决方案：

我收到以下错误

```
Validation failed: Post type is not included in the list 
```

当我使用`p.save!`

由于`validates :post_type, :presence => true, :inclusion=> { :in => @allowed_post_types }`

所以当我将我正在使用的帖子类型添加到数组中时`@allowed_post_types`

问题已解决

# asp.net-mvc - application_start 中的 FluentNhibernate 配置异常处理

> ID：12408442
> 
> 赞同：1
> 
> 时间：2012-09-13T14:20:19.793
> 
> 标签：asp.net-mvc, asp.net-mvc-3, nhibernate, exception-handling, fluent-nhibernate

我正在从 Application_Start 事件初始化 FluentNHibernate，如下所示：

```
Fluently.Configure()
.Database(OracleDataClientConfiguration.Oracle10
            .Driver<NHibernate.Driver.OracleDataClientDriver>()
            .ConnectionString("MyConnectionString")
            .DefaultSchema("MySchema")
        )
.Mappings(m => m.FluentMappings.AddFromAssemblyOf<SomeClass>())
.BuildConfiguration()
.BuildSessionFactory(); 
```

如果连接字符串错误，或者与数据库的连接由于其他原因失败，我会得到一个`TNS No listener`异常。我想显示/记录此异常，但 Application_Start（和 Applicaiton_Error）在 IIS7 集成模式下没有 HttpContext 或 Response 对象。用户会收到一个黄色的死机屏幕，告诉他们打开自定义错误。Elmah 也不记录该消息。我想以两种可能的方式之一解决问题：

1.  在配置时禁用休眠配置连接到数据库。
2.  根据错误提供自定义用户反馈并让 Elmah 工作（以某种方式）。这将是我理想的选择。

我能够移动 NHibernate 配置以在 Session_Start 上运行，如此[处所述](https://stackoverflow.com/a/2854664/265877)，这使得异常处理针对此错误起作用，但随后我得到其他异常，这些异常可能会误导问题的根本原因。有人对这种情况有很好的解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:54:14.003

这就是我所做的：

```
void Application_Start() {
    try {
          // setup your app / nhibernate
    } catch(Exception ex) {
        Application["StartupError"] = ex
    }
}

void Application_BeginRequest() {
    var startupError = Application["StartupError"] as Exception;
    if (startupError != null)
        throw new Exception("Error starting application", startupError);
} 
```

在您的 BeginRequest 方法中，您可以访问请求并且可以执行您想要显示错误的操作（或显示一个漂亮的页面）

# nlog - Nlog：当 Loglevel >= Loglevel.Error with last x messages 时发送邮件

> ID：12408444
> 
> 赞同：8
> 
> 时间：2012-09-13T14:20:38.913
> 
> 标签：nlog

我想用 nlog做到这一点（来自 log4net [docu ）：](http://logging.apache.org/log4net/release/config-examples.html)

此示例显示如何仅交付重要事件。LevelEvaluator 的阈值为 WARN。这意味着将为每个记录的 WARN 或更高级别的消息发送一封电子邮件。每封电子邮件还将包含多达 512 条 (BufferSize) 任何级别的先前消息，以提供上下文。未发送的消息将被丢弃。

**可能吗？**

我只在codeproject上找到了[这个。](http://www.codeproject.com/Tips/167846/NLog-email-buffering-wrapper)但它使用代表消息数量而不是日志级别刷新的包装器目标。

谢谢托比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:49:57.803

有一个 [QueuedTargetWrapper](https://github.com/MikeJansen/NLog/commit/2b71ba626ae043f6e6ecc146efacbe6ae3f5e0d2) （一个缓冲日志事件并将它们分批发送到包装目标的目标）似乎可以满足要求。我还没试过。

有一个相关的讨论“[在生产中跟踪级别日志记录的好处，没有大量文件的缺点](https://github.com/jkowalski/NLog/pull/14)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-27T22:13:37.370

将在错误时写入最后 200 个日志事件的简单解决方案：

```
 <target name="String" xsi:type="AutoFlushWrapper" condition="level >= LogLevel.Error" flushOnConditionOnly="true">
     <target xsi:type="BufferingWrapper"
          bufferSize="200"
          overflowAction="Discard">
        <target xsi:type="wrappedTargetType" ...target properties... />
     </target>
  </target> 
```

另见：[https ://github.com/nlog/NLog/wiki/BufferingWrapper-target](https://github.com/nlog/NLog/wiki/BufferingWrapper-target)

# c# - 日期时间选择器（自定义）

> ID：12408448
> 
> 赞同：-2
> 
> 时间：2012-09-13T14:20:53.467
> 
> 标签：c#, winforms, datetimepicker

所以我正在使用这段代码：

```
dateTimePicker1.Format = DateTimePickerFormat.Custom;
dateTimePicker1.CustomFormat = "HH:mm tt"; 
```

但它拒绝给我正确的会议记录。相反，它给了我 0 但我想要像 04:48 这样的实时时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:25:36.507

尝试这个

```
 dateTimePicker1.CustomFormat = "hh:mm tt"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:26:44.880

这取决于您如何设置 dateTimePicker，如果 dateTimePicker 没有值当然您的控件将显示 0 分钟。

要将 DateTimePicker 用于时间，请将 Format 属性设置为 Time 或 Custom。然后指定格式：

```
dateTimePicker1.Format = DateTimePickerFormat.Custom;
dateTimePicker1.CustomFormat = "HH:mm tt"; 
```

那应该行得通。

# java - ConcurrentHashMap 值迭代器是否可以返回 null

> ID：12408450
> 
> 赞同：3
> 
> 时间：2012-09-13T14:20:54.487
> 
> 标签：java, java.util.concurrent

我正在尝试理解 ConcurrentHashMap 的迭代器代码，并且基于查看代码，它似乎有可能`ConcurrentHashMap#values()#iterator`返回空值。

我相信这可能会发生，因为即使您不能添加空值，对 remove 的调用也会首先将值标记为空。

这是真的还是迭代器有办法处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:13:13.517

看看是如何`get()`实现的，似乎 ConcuurrentHashMap 被编码以允许条目值是`null`由于类初始化竞争（然后通过调用来处理）`Segment.readValueUnderLock()`。看起来值迭代器*从未*检查过值的条目`null`，因此您似乎有一个有效的问题（我不知道在迭代期间是否发生了一些其他易失性操作，这会改变这种可能性）。

但是，该方法有此 javadoc 注释`Segment.readValueUnderLock()`：

> 读取处于锁定状态的条目的值字段。如果值字段似乎为空，则调用。这只有在编译器碰巧使用其表分配重新排序 HashEntry 初始化时才有可能，这在内存模型下是合法的， **但不知道是否会发生。**

（最后强调我的）。

对 Doug Lea 来说，这可能是一个很好的问题。

# php - 清理用户输入但启用 iframe

> ID：12408454
> 
> 赞同：0
> 
> 时间：2012-09-13T14:21:04.117
> 
> 标签：php, html, xss

我想过滤我网站上的用户输入并仅启用`<iframe>`标签，用户将能够使用这些标签在他们的帖子中添加视频（如 youtube 和 vimeo）。

我的第一个想法是在其中使用`strip_tags()`和启用`<iframe>`标签。但后来我在这里读到了一篇关于这个功能的文章： [Reddit 上的文章](http://www.reddit.com/r/PHP/comments/nj5t0/what_everyone_should_know_about_strip_tags/)

所以我认为使用它是个坏主意，因为你可以获得 XSS。

我怎么解决这个问题 ？

**更新：**我想要一个在这种情况下不会过度杀伤的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:58:53.077

也许不是允许人们发布 HTML，您可以在输入中搜索可能是 YouTube 视频链接的内容，然后自己拼接代码。

我今天早些时候在 StackOverflow 上找到了这段代码： [如何使用正则表达式在字符串中找到所有 YouTube 视频 ID？](https://stackoverflow.com/questions/5830387/php-regex-find-all-youtube-video-ids-in-string)

它在字符串中搜索 YouTube URL，并用链接替换它们。下面是代码的修改版本，将 URL 替换为`<iframe/>`s

```
// Linkify youtube URLs which are not already links.
// From https://stackoverflow.com/questions/5830387/php-regex-find-all-youtube-video-ids-in-string
function linkifyYouTubeURLs($text) {
    $text = preg_replace('~
        # Match non-linked youtube URL in the wild. (Rev:20111012)
        https?://         # Required scheme. Either http or https.
        (?:[0-9A-Z-]+\.)? # Optional subdomain.
        (?:               # Group host alternatives.
          youtu\.be/      # Either youtu.be,
        | youtube\.com    # or youtube.com followed by
          \S*             # Allow anything up to VIDEO_ID,
          [^\w\-\s]       # but char before ID is non-ID char.
        )                 # End host alternatives.
        ([\w\-]{11})      # $1: VIDEO_ID is exactly 11 chars.
        (?=[^\w\-]|$)     # Assert next char is non-ID or EOS.
        [?=&+%\w-]*        # Consume any URL (query) remainder.
        ~ix', 
        '

<iframe width="560" height="315" src="http://www.youtube.com/embed/$1"></iframe>

',
        $text);
    return $text;
} 
```

你可以像这样实现它：

```
<?php
$text = 'This is my comment. It contains an XSS attack!:
<script type="text/javascript">
    alert(\'bam\');
</script>

I learned about XSS on YouTube:
http://www.youtube.com/watch?v=i38LMZyKIqI
';

//  Sanitize XSS (e.g.: convert '<' to '&lt;')
$output = htmlspecialchars($text);

$pattern = [];

$output = linkifyYouTubeURLs($output);

//  Add natural line breaks
$output = nl2br($output);

echo $output;

?> 
```

XSS 攻击被阻止，但 YouTube 链接被转换为视频。您可能可以进一步修改它以与 Vimeo 和其他主要视频提供商合作。

以下是实际代码：

[http://codepad.viper-7.com/8w0h1F](http://codepad.viper-7.com/8w0h1F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:24:02.707

你可以试试这个：

```
$out = preg_replace("#<(?!/?iframe[ >])#i","&lt;",$in); 
```

但是请记住，用户可以将事件处理程序放在 iframe 标记上以引发某种 XSS。

# gnuplot - gnuplot - 彩色抽动标记

> ID：12408459
> 
> 赞同：12
> 
> 时间：2012-09-13T14:21:31.323
> 
> 标签：gnuplot

有什么方法可以`gnuplot`在 x 和/或 y 轴上为 tic 标记着色？我正在使用一个`png`非常暗的背景文件，我希望内部抽动显示为白色，而不是默认的黑色。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T14:26:52.500

`tics`似乎从以下继承了它们的颜色`border`：

```
set style line 50 lt 1 lc rgb "red" lw 2
set border ls 50
plot sin(x) 
```

`textcolor`tic 标签从以下选项中获取颜色`tics`：

```
set tics textcolor rgb "red" 
```

*（字符串“white”也应该可以工作，但在我的演示中看起来不太好，因为我的背景是白色的）。*

没有办法只改变 tic-color。但是，如果需要，您可以更改 tic/border 颜色，然后在顶部添加新边框：

```
set arrow from graph 0,graph 1 to graph 1,graph 1 nohead ls -1 lc rgb "black" front
set arrow from graph 1,graph 1 to graph 1,graph 0 nohead ls -1 lc rgb "black" front
set arrow from graph 1,graph 0 to graph 0,graph 0 nohead ls -1 lc rgb "black" front
set arrow from graph 0,graph 0 to graph 0,graph 1 nohead ls -1 lc rgb "black" front 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-21T16:02:52.607

虽然这篇文章已经很老了，但我想提供我的 2 美分，因为我对上述内容有一个有效的补充。

如果您立即使用未设置边框的设置边框命令，则抽动及其标签的颜色将保持您设置的颜色，并且边框将被删除。例如，

```
set border linecolor rgb "gray75"
unset border 
```

这样，您至少可以更改抽动及其标签的颜色（此处为灰白色），并且您的背景保持黑暗且不受难看的（灰白色）边框的污染，这是 OP 要求的？

因此，无需在上一个答案中手动重绘边框。不过，上面的最佳答案对我很有用，所以我会加分！

# lua - 让Lua调用宿主程序？

> ID：12408463
> 
> 赞同：2
> 
> 时间：2012-09-13T14:21:39.683
> 
> 标签：lua, ffi

我真的厌倦了为每个需要在脚本中使用的函数制作如此多的包装器。我注意到[这个 Lua FFI 教程](http://luajit.org/ext_ffi_tutorial.html)。我希望我可以使用 FFI 直接调用主机程序。这可能吗？如果可能，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:30:02.837

您可以使用 Swig 自动执行任务，而不是手动编写 ffi 规范：[http ://www.swig.org/Doc1.3/Lua.html](http://www.swig.org/Doc1.3/Lua.html)

# php - 使用 PHP OOP 方法加载数据网格？

> ID：12408465
> 
> 赞同：0
> 
> 时间：2012-09-13T14:21:48.890
> 
> 标签：php

我尝试使用“[使用 jQuery EasyUI 构建 CRUD 应用程序](http://www.jeasyui.com/tutorial/app/crud.php)”中给出的示例，但这次我有一个 PHP OOP 函数，名为`get_users`：

```
public function get_users() {

$rs = mysql_query("select * from users");

$items = array();
while($row = mysql_fetch_object($rs)){
    array_push($items, $row);
}
$result["rows"] = $items;

echo json_encode($result);
} 
```

如何调用函数`<table url="?????">`？

```
table id="dg" title="My Users" class="easyui-datagrid" style="width:700px;height:250px"
        url="<?php  $company->get_users(); ?>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:25:12.197

您似乎在混淆 php 和 Javascript。PHP 在服务器上运行并生成您想要的 html 和 javascript。

正如您所指示的，Javascript 可以在客户端上运行。

也许它应该看起来像这样

```
<table id="dg" title="My Users" 
    class="easyui-datagrid" style="width:700px;height:250px"
    url="http://me.example.com/path/to/company_get_users.php" 
```

# windows-phone-7 - 有没有办法通过 Tag 属性获取 XAML 元素？

> ID：12408473
> 
> 赞同：0
> 
> 时间：2012-09-13T14:22:07.173
> 
> 标签：windows-phone-7, windows-phone-7.1

```
Is there any way to get the XAML element by its tag value?? 
```

我的代码是这样的：

```
<Grid Tap="StackPanel_Tap" Tag="{Binding Type}" >
       <Border BorderThickness="0"  CornerRadius="0"  BorderBrush="White" Width="100" Height="100"  HorizontalAlignment="Center" VerticalAlignment="Center" Opacity="1" >
      <Image Tag="{Binding Type}" Source="{Binding Location}" Opacity="1" Width="100"  Height="100" Stretch="Fill" HorizontalAlignment="Center" VerticalAlignment="Center" UseLayoutRounding="True"  >
       </Image>
      </Border>
</Grid> 
```

我正在为 Grid 绑定 Tag 属性，有没有办法通过使用 Tag 属性来获取 Grid 的对象？

对不起，网格在 ListBox 中的信息较少。我如何访问网格对象？

感谢并感谢Yashavantha

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:35:12.567

创建一个递归方法，它使用 System.Windows.Media.VisualTreeHelper 来获取页面的所有子项。对于每个子项测试它是否属于 Grid 类型，并且它的 Tag 是否等于您要查找的任何内容。

# c - 返回值与预期不符，MIN，编译器问题，数值溢出？

> ID：12408476
> 
> 赞同：-1
> 
> 时间：2012-09-13T14:22:09.900
> 
> 标签：c, compiler-construction, overflow, min

存在以下行代码（嵌入式编程、C 语言、Code Composer Studio 编译器）：

```
bs[Line] = (21.0F - ( (13.5F / 0.035F) * (MIN( abs_yaw, 0.06F) - 0.025F) ) ); 
```

在哪里

```
#define MIN(a,b) (((a) < (b)) ? (a) : (b)) 
```

21.0F 是局部变量中的结果，

上一行中的其他值实际上是常量。

对于刚刚高于 0.025 的 abs_yaw（我们知道是这样），我们应该得到一个接近 abs 的 bs。但是，我们收到等于 -341.9 的 bs...

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:42:05.693

> 任何想法为什么会发生这种情况？

是的：在您的代码中，您检查了偏航角穿过一个完整圆圈以触发符号反转的情况，并且该代码由于*其他*一些错误而被执行（可能 0.025 是其他地方使用的保护边距？）。

结果，不是 20 度左右，而是 360°-20°，这就是 -341 值的来源。

当然，在没有看到代码的情况下，这只是一个猜测。还有我自己过去的错误的记忆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:38:19.050

这段代码：

```
#include <stdio.h>

#define MIN(a,b) (((a) < (b)) ? (a) : (b))

int main(void)
{
    for (int i = 0; i < 20; i++)
    {
        float abs_yaw = 0.022 + (i / 4000.0);
        float result = (21.0F - ((13.5F / 0.035F) * (MIN(abs_yaw, 0.06F) - 0.025F)));
        printf("%2d: %6.4f yields %10.6f\n", i, abs_yaw, result);
    }
    return 0;
} 
```

在 Mac OS X 10.7.4 上使用 GCC 4.7.1 生成这些结果。

```
 0: 0.0220 yields  22.157143
 1: 0.0223 yields  22.060715
 2: 0.0225 yields  21.964285
 3: 0.0227 yields  21.867857
 4: 0.0230 yields  21.771429
 5: 0.0233 yields  21.674999
 6: 0.0235 yields  21.578571
 7: 0.0237 yields  21.482143
 8: 0.0240 yields  21.385714
 9: 0.0243 yields  21.289286
10: 0.0245 yields  21.192858
11: 0.0247 yields  21.096428
12: 0.0250 yields  21.000000
13: 0.0253 yields  20.903572
14: 0.0255 yields  20.807142
15: 0.0258 yields  20.710714
16: 0.0260 yields  20.614286
17: 0.0262 yields  20.517859
18: 0.0265 yields  20.421429
19: 0.0268 yields  20.325001 
```

您可以对其进行调整以磨练您的价值观，但看起来应该没有问题，并且可以想象，您可能已经发现了编译器错误。OTOH，您的测试代码可能没有这么简单；如果你试试这个，它可能会起作用。所以，不要去声称编译器错误。假设您的代码中存在错误，直到所有其他方法都失败为止。尝试不同的编译器（对相同的代码获得第二意见）。

# date - 日期时间 JodaTime 转换

> ID：12408481
> 
> 赞同：1
> 
> 时间：2012-09-13T14:22:26.313
> 
> 标签：date, datetime, timezone, jodatime

请想象以下情况：

我在亚速尔群岛有这个日期 (GMT -1) 23/10/2010 23:00:00

我想将此日期转换为以下日期（GMT +1）

2010 年 10 月 24 日 01:00:00

我希望在任何时区的任何日期都具有这种行为，并且带有时区的 Date 函数在这种情况下为我提供了 GMT -1。

请注意，我正在使用 JodaTime。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:26:01.723

```
 DateTime dateTime = new DateTime(2010, 10, 23, 23, 0, 0, 0, DateTimeZone.forOffsetHours(-1));  // (GMT -1) 23/10/2010 23:00:00 
  DateTime inAnotheTimeZone = dateTime.withZone(DateTimeZone.forOffsetHours(1)); 
```

# css - css 问题，nivo controlnav 边框没有出现

> ID：12408485
> 
> 赞同：1
> 
> 时间：2012-09-13T14:22:30.993
> 
> 标签：css, nivo-slider

我目前在这个网站上工作，并且无法弄清楚为什么这不应该工作。我希望在每个 controlnav 链接的底部和顶部放置小边框（见幻灯片右侧），如果有人得到任何指针 itd很棒... [http://limerickfc.hailstormcommerce.com/cms/](http://limerickfc.hailstormcommerce.com/cms/)

```
.nivo-controlNav a + a {
border-top: 1px solid #000000;
} 
```

为了清楚起见，我将包含更多的 CSS，以便您可以看到我在说什么......

```
.nivo-controlNav {
text-align:center;
position:absolute;
right:-180px;
height:474px;
width:180px;
top:0px;
z-index:8;
}

.nivo-controlNav a {
cursor:pointer;
height:68px;
padding: 13px 20px;
width:140px;
display:block;
background: url('http://limerickfc.hailstormcommerce.com/cms/wp-content/themes   /limerickfc/images/slideshowBg.jpg') scroll 0 0 transparent;
background-repeat: repeat-y; 
color: #6ED5FF;

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:34:15.393

使用 Firebug 查看附加页面后，您已在内联样式表中声明了此样式

```
#slider a {
    border: 0 none;
    display: block;
} 
```

如果删除边框：0 无；将出现边框线，它当前正在覆盖您的 NivoControlNav 样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:36:42.320

有两个违规的 CSS 规则

```
.nivoSlider a {
    border:0;
    display:block;
} 
```

您的选择器的*特异性*`.nivo-controlNav a + a`略高于，因此您的选择器应该胜出。但是，也有这样的规则：*`.nivoSlider a`*

 *```
#slider a {
    border:0 none;
    display:block;
} 
```

此规则中的 ID 比您的更具体。`border`从此规则中删除该属性，或向您的选择器添加一个 ID 以使其更具特异性。

更多关于[CSS 选择器的特殊性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)。*

# android - Rest Client - 如何获取 JSONObject 作为响应？

> ID：12408487
> 
> 赞同：0
> 
> 时间：2012-09-13T14:22:33.870
> 
> 标签：android, json, gson, resttemplate, android-annotations

我正在关注本指南 - [https://github.com/excilys/androidannotations/wiki/Rest%20API](https://github.com/excilys/androidannotations/wiki/Rest%20API)，我正在尝试跳过 JSON<->POJO 转换并使用纯`JSONObject`（或 gson's `JsonObject`）。我应该写什么作为服务器的答案？

```
@Rest("url")
public interface JsonRest
{
    @Get("/getjson")
    JSONObject getTime();
        // or... ? 
    @Get("/getjson")
    ResponseEntity<JSONObject> getTime();
        // or... ? 
    @Get("/getjson")
    JsonObject getTime();  
} 
```

在所有情况下，我都会得到`"{}"`响应，但它在 POJO 转换后包含正确的数据。我应该提供哪个`HTTPMessageConverter`？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:26:35.827

只需将 GsonHttpMessageConverter 添加到 RestTemplate 并尝试以下操作：

```
@Get("/getjson")
JsonElement getSomething(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:09:09.170

我认为 Spring Android RestTemplate 默认不支持这一点。您可能应该提供自己的提供商。

你可以看看[这里](http://grepcode.com/file/repo1.maven.org%24maven2@org.springframework.android%24spring-android-rest-template@1.0.0.RELEASE@org%24springframework%24http%24converter%24json%24GsonHttpMessageConverter.java)`GsonHttpMessageConverter`是如何实现的，然后在此基础上实现你自己的解决方案。

# spring - 如何在 Spring 安全性中为方法注释显示自定义访问被拒绝页面

> ID：12408488
> 
> 赞同：0
> 
> 时间：2012-09-13T14:22:34.740
> 
> 标签：spring, spring-security, access-denied

> **可能的重复：**
> [使用方法级安全性处理 AccessDenied](https://stackoverflow.com/questions/7916460/handling-accessdenied-with-method-level-security)

我正在尝试学习 Spring 安全性（目前使用它 w/jsf）并且遇到了一个奇怪的问题：当我尝试访问我在 xml 中定义的受页面保护的拦截 URL 规则时，自定义访问被拒绝页面我'已经指定gets show ok，但是，如果我尝试调用受保护的方法，则会`@RolesAllowed({"ROLE_ADMIN"})`显示标准的Spring access denied error w/ exception。

这是我的代码：

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:faces="http://www.springframework.org/schema/faces"
    xmlns:int-security="http://www.springframework.org/schema/integration/security"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:sec="http://www.springframework.org/schema/security"

    xsi:schemaLocation="http://www.springframework.org/schema/integration/security http://www.springframework.org/schema/integration/security/spring-integration-security-2.0.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/faces http://www.springframework.org/schema/faces/spring-faces-2.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <context:component-scan base-package="com.user.admin, user.login" />
    <context:annotation-config />

    <aop:config proxy-target-class="true" />

    <sec:http use-expressions="true" auto-config="true" access-denied-page="/faces/acessDenied.xhtml">
    <!--<sec:http use-expressions="true" auto-config="true">-->
        <sec:form-login login-page="/faces/loginPage.xhtml" />
        <sec:intercept-url pattern="/faces/loginRequired/editUser.xhtml" access="hasAnyRole('ROLE_SUPERVISOR', 'ROLE_ADMIN')" />
        <sec:intercept-url pattern="/faces/loginRequired/*" access="isAuthenticated()" />       
        <!--<sec:access-denied-handler ref="accessDeniedHandler" />--> 
    </sec:http>

    <bean id="accessDeniedHandler" class="user.login.CustomAccessDeniedHandler">
        <property name="accessDeniedUrl" value="/faces/acessDenied.xhtml" />
    </bean>

    <sec:authentication-manager alias="myAuthenticationManager">
        <sec:authentication-provider user-service-ref="myUserLookupService" />
    </sec:authentication-manager>

    <bean id="myUserLookupService" class="com.ruffalo.test.wicket.login.myapp.FirstDAO"></bean>

    <bean id="user" class="user.login.LoginBean" scope="session">
        <property name="user">
            <bean class="com.ruffalo.test.wicket.login.myapp.FirstUserImpl" />
        </property>
        <property name="authenticationService" value="#{authenticationService}" />
    </bean>

    <bean id="userDao" class="com.ruffalo.test.wicket.login.myapp.FirstDAO" />

    <bean id="userAdmin" class="com.user.admin.UserAdminBean" scope="session">
        <property name="dao" ref="userDao" />
    </bean>

    <sec:global-method-security secured-annotations="enabled" jsr250-annotations="enabled" pre-post-annotations="enabled" proxy-target-class="true" />

</beans> 
```

豆：

```
@Component
@Scope("session")
@Qualifier("userAdmin")
public class UserAdminBean implements Serializable
{
...
    @RolesAllowed({"ROLE_ADMIN"})
    public String createUser()
    {
        // -- do stuff here
    }
...
}// end class UserAdminBean 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <!-- Spring setup -->

    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <listener>
        <listener-class>
            org.springframework.web.context.request.RequestContextListener
        </listener-class>
    </listener>

    <!-- spring security -->

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- end spring security -->    
    <!-- end Spring setup -->

    <context-param>
        <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/loginRequired/index.xhtml</welcome-file>
    </welcome-file-list>
</web-app> 
```

我没有 spring servlet 配置，因为我只是将所有内容都放在 applicationContext 中。

我已经用谷歌搜索了这个问题的废话，但没有找到解决方案。还尝试了访问拒绝处理程序而不是页面属性，但这给出了类似的结果。

我得到的访问被拒绝异常，而不是我的自定义访问被拒绝页面：

```
javax.faces.el.EvaluationException: org.springframework.security.access.AccessDeniedException: Access is denied
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIData.broadcast(UIData.java:1093)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83)
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:206)
    at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:60)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at com.user.admin.UserAdminBean$$EnhancerByCGLIB$$96a516de.createUser(<generated>)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 63 more 
```

# c# - 如何在绑定属性设置器中更改输入的 TextBox 文本？

> ID：12408489
> 
> 赞同：1
> 
> 时间：2012-09-13T14:22:43.973
> 
> 标签：c#, silverlight, data-binding, mvvm, inotifypropertychanged

在 Silverlight 中使用 MVVM，在我看来，我有：

```
<TextBox Text="{Binding Path=Temperature,Mode=TwoWay}" /> 
```

MyViewModel 有：

```
public MyModel Model {get{...}set{...}}//In my code I do have the property changed events for this
public string Temperature
{
    get
    {
        return Model.Temperature.ToString();
    }
    set
    {
        double test;
        if(double.TryParse(value, out test))
        {
            Model.Temperature = test;
        }
        else
        {
            Model.Temperature = 0D;
        }
    }
}

void Model_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
{
    switch(e.PropertyName)
    {
        case "Temperature":
            OnPropertyChanged("Temperature");
            break;
    }
} 
```

MyModel 有：

```
private double _temperature;
public double Temperature
{
    get
    {
        return _temperature;
    }
    set
    {
        _temperature = value; OnPropertyChanged("Temperature");
    }
} 
```

如果用户输入的内容不会解析为双精度，则 Model.Temperature 属性设置为 0，我希望 TextBox 也更改为 0。我认为 OnPropertyChanged 事件会解决这个问题。任何想法发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:24:45.107

编辑：这是因为 Text 在调用 set 期间不会调用 get。这可能会导致错误的无限循环。你有几个选择。

针对错误情况更改了延迟触发属性：

```
public string Temperature
{
    get { return Model.Temperature.ToString(); }
    set
    {
        double test;
        if (double.TryParse(value, out test))
        {
            Model.Temperature = test;
        }
        else
        {
            Model.Temperature = 0D;
            Deployment.Current.Dispatcher.BeginInvoke(() => OnPropertyChanged("Temperature"));
        }
    }
} 
```

使用[数字文本框](https://stackoverflow.com/questions/1977202/silverlight-numeric-textbox)

在 ViewModel 上实现[IDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo%28v=vs.95%29.aspx)并将 TextBox 上的 ValidatesOnDataErrors 设置为 true

```
<TextBox Text="{Binding Temperature, Mode=TwoWay, ValidatesOnDataErrors=True}"/> 
```

旧：确保您的绑定允许[双向绑定](http://msdn.microsoft.com/en-us/library/cc278072%28v=VS.95%29.aspx#direction_of_the_data_flow)。没有它，您将无法设置 TextBlock 的 TextProperty。

```
<TextBlock Text="{Binding Temperature, Mode=TwoWay}"/> 
```

# c# - 降级到 .net 3.5 后找不到 Linq

> ID：12408491
> 
> 赞同：2
> 
> 时间：2012-09-13T14:23:01.587
> 
> 标签：c#, visual-studio-2010, linq, msbuild

我们最近尝试将我们的软件升级到 .net 4.0。我们遇到了一个小障碍，我们决定恢复到 .net 3.5，而不是花时间尝试追踪所有内容。

我们遇到了一些问题，例如 .resx 文件无法正确还原，但它们已得到修复。我们遇到的最后一个问题是一些项目现在没有通过命令行构建（一切都是以前的）。所有情况下的错误如下。

命名空间“System”中不存在类型或命名空间名称“Linq”（您是否缺少程序集引用？）

我们使用 Visual Studio 2010，msbuild 进行命令行构建，每个项目都改成了 3.5 的框架。这些项目仍将在 IDE 中构建，但我们手动构建它们而不是通过我们的自动化脚本构建它们相当耗时。

还值得注意的是，所有未构建的项目都是 Web 项目。在 web.config 中，我没有看到单个 version=4.0.0.0 参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:28:38.883

CodesInChaos 部分正确。虽然 UI 显示了对 System.Core 的引用，但 .csproj 文件中没有实际引用。这必须手动添加。这解释了为什么 UI 会构建，但命令行不会。

# c# - 如何处理两层之间的业务异常？

> ID：12408492
> 
> 赞同：0
> 
> 时间：2012-09-13T14:23:03.210
> 
> 标签：c#, exception, exception-handling

我有一个三层 C# 软件：UI、业务、数据库。

我有一些业务规则要实施到我的业务层中。例如，如果两个对象具有相同的名称，则业务层需要向 UI 抛出异常。

我的问题是我的应用程序是多语言的，而我的业务层无权访问我的资源文件。所以我的 UI 需要从业务层捕获异常，并决定它将向用户显示什么消息。

我正在考虑创建一个 BusinessException 类，其属性告诉 UI 在资源文件中采用哪个键。你认为这是一个好方法吗？或者你有更好的想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:27:29.387

首选的解决方案是创建表示不同错误的不同异常类型，将任何重要数据作为属性添加到异常中，并让 UI 处理用户面临的错误消息。

如果您有一个单独的 UI 设计团队想要处理向用户显示的文本，包括错误消息，这是理想的选择。坦率地说，开发人员倾向于为其他开发人员而不是为用户编写好的错误消息。

否则，在 UI 可以查找的异常中嵌入某种形式的消息 ID（如您的建议）或本地化业务层中的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:00:06.327

我最终得到了这两种解决方案的混合。所以我只使用一个类：BusinessRuleException。此类作为属性“规则”，它是我所有业务规则的枚举。

当我的 UI 收到 BusinessRuleException 时，它可以捕获它，然后将“规则”与资源文件进行比较，并为用户获取友好的消息。如果 UI 找不到翻译，它只会按原样发送规则。所以用户仍然有一个变化来了解发生了什么。

它不喜欢为每个不同的业务规则提供不同异常的解决方案，因为它最终会产生如此多的额外代码，这无助于您了解您的班级正在做的真正工作是什么。

# c# - 如何为我的程序设置任务管理器描述？

> ID：12408496
> 
> 赞同：9
> 
> 时间：2012-09-13T14:23:14.427
> 
> 标签：c#, visual-studio, visual-studio-2005, taskmanager

我有一个 CLI 程序，我想修改 Windows 任务管理器中显示的描述。

我尝试在*Assembly Info中设置**Description*，但这只会更改 .exe 的*Properties > Details*。

 *** * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-13T14:34:07.313

在项目属性下，单击程序集信息并设置标题字段。您必须在不调试的情况下运行才能在任务管理器中正确看到描述显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-18T08:02:03.313

我认为，如果在 AssemblyInfo 中：

```
[assembly: AssemblyProduct("")] 
```

和

```
[assembly: AssemblyTitle("")] 
```

两者都已设置，然后 AssemblyProduct 赢得 Taskmanager 描述。如果只设置了 AssemblyTitle，则显示为描述**

# facebook - 应用程序被错误配置为 Facebook 登录

> ID：12408498
> 
> 赞同：0
> 
> 时间：2012-09-13T14:23:16.427
> 
> 标签：facebook, connect

> **可能重复：**
> [应用程序被错误配置为 Facebook 登录：Android Facebook 集成问题](https://stackoverflow.com/questions/12382558/app-is-misconfigured-for-facebook-login-android-facebook-integration-issue)

我用 Cordova-iPhone 开发了一个应用程序。还有一个 Facebook 连接。当我通过我的 Cordova 应用程序和 Facebook 应用程序（我安装在我的 iPhone 中）连接到 facebook 时，就会出现问题 -> 出现此消息：“Myapp is miconfigured to Facebook login. Press Okay to continue without Facebook Connect ...”但如果我删除 Facebook 应用程序，iPhone 上的 safari 一切正常。

# frame - Dijit ContentPane 不呈现框架或框架集

> ID：12408499
> 
> 赞同：1
> 
> 时间：2012-09-13T14:23:21.477
> 
> 标签：frame, dojo, frameset, contentpane

今天，当我尝试将来自外部源的内容渲染到 dijit.layout.ContentPane 时遇到了一个问题。

```
 HTML
  <div id="someId"></div>

  JS
  var cp = new dijit.layout.ContentPane({}, "someId");
  htmlFromExtSrc = "<frameset> <frame src="http://www.google.com"></frameset> 
                    Other Data ";
  cp.set("content", htmlFromExtSrc); 
```

在 html 中设置的只是**OtherData**。框架集和框架不显示在 html 中。

我的目标是显示正确呈现到窗格中的外部站点的内容。使用 iframe 可以解决问题，但我正在寻找更好的解决方案。有没有办法解决这个问题？

# c# - 使用谓词计算单词

> ID：12408501
> 
> 赞同：0
> 
> 时间：2012-09-13T14:23:50.887
> 
> 标签：c#, predicate

我需要获取满足我条件的字符串 [] 中指定的项目数。所以，我尝试了 Predicate 并使用它定义了我的条件。但是我的代码不起作用。谁能帮帮我吗？

```
string[] books = new string[] { "Java", "SQL", "OOPS Concepts", "DotNet Basics"};

Predicate<string> longBooks = delegate(string book) { return book.Length > 5; };
int numberOfBooksWithLongNames = books.Count(longBooks); 
```

当我运行它时，它显示编译时错误。请看下面：

> 'string[]' 不包含 'Count' 的定义，并且最佳扩展方法重载 'System.Linq.Enumerable.Count(System.Collections.Generic.IEnumerable, System.Func)' 有一些无效参数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:27:09.827

尝试这个：

```
var result = books.Count(x => x.Length > 5); 
```

在没有 lambda 匿名方法的情况下执行此操作时，请定义一个方法（您的谓词）：

```
public bool HasLongTitle(string book)
{
    return book.Length > 5;
} 
```

使用它：

```
var result = books.Count(HasLongTitle); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T14:34:16.797

LINQ[`Count()`](http://msdn.microsoft.com/en-us/library/bb535181.aspx)方法不采用 a`Predicate`作为参数。在您的情况下，该方法采用 type 的委托`Func<string, bool>`。所以有几种方法可以修复你的代码，最简单的可能是按照其他人的建议并使用 lambda。或者，使用您的原始代码只需更改`Predicate<string>`为`Func<string, bool>`：

```
string[] books = new string[] { "Java", "SQL", "OOPS Concepts", "DotNet Basics"};

Func<string, bool> longBooks = delegate(string book) { return book.Length > 5; };
int numberOfBooksWithLongNames = books.Count(longBooks); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:36:07.180

有两个问题

```
string[]' does not contain a definition for 'Count' and the best extension method
 overload 'System.Linq.Enumerable.Count<TSource>
(System.Collections.Generic.IEnumerable<TSource>, System.Func<TSource,bool>)' 
has some invalid arguments 
```

和

```
Argument 2: cannot convert from 'System.Predicate<string>' to 
'System.Func<string,bool>' 
```

这些解决方案有效

```
int numberOfBooksWithLongNames = books.AsEnumberable().Count(s => longBooks(s));
int numberOfBooksWithLongNames = new List<string>(books).Count(s => longBooks(s));
int numberOfBooksWithLongNames = books.Count(s => longBooks(s)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:28:07.340

你可以试试

```
books.Count(a = > a.Length > 5); 
```

# c# - Ninject 和 asp.net MVC4

> ID：12408502
> 
> 赞同：9
> 
> 时间：2012-09-13T14:23:51.883
> 
> 标签：c#, asp.net-mvc-4, ninject

我有一个想要移植到 MVC4 的 MVC3 应用程序。我正在使用 Ninject 进行依赖注入。使用 Nuget，我在我的项目中添加了“Ninject”并创建了一个控制器工厂，如下所示

```
public class NinjectControllerFactory : DefaultControllerFactory
{
    private IKernel ninjectKernel;

    public NinjectControllerFactory()
    {
        ninjectKernel = new StandardKernel();
        AddBindings();
    }

    protected override IController GetControllerInstance(RequestContext  requestContext, Type controllerType)
    {
        return controllerType == null ? null : (IController)ninjectKernel.Get(controllerType);
    }

    private void AddBindings()
    {
        //Add ninject bindings here
    }
} 
```

这适用于 MVC3，但在 MVC4 中情况发生了变化。我做了一些挖掘，发现这个链接解释了如何让 ninject 为 MVC4 工作

[http://haacked.com/archive/2012/03/11/itrsquos-the-little-things-about-asp-net-mvc-4.aspx](http://haacked.com/archive/2012/03/11/itrsquos-the-little-things-about-asp-net-mvc-4.aspx)

但是，我无法获取上述链接中的代码进行编译。具体来说，我应该放在 web.common 文件的 Start() 方法中的代码给了我未解决的命名空间错误

```
GlobalConfiguration.Configuration.ServiceResolver
  .SetResolver(DependencyResolver.Current.ToServiceResolver()); 
```

“ServiceResolver”和“.SetResolver”都未解析。我需要添加哪些参考资料才能启用这些参考资料？另外，如果可能的话，你能否指点我一个教程，向我展示如何让 ninject 在 MVC4 中工作而无需安装 nuget 包 ninject.mvc3？我问是因为我不想在我的应用程序中安装任何专门为 MVC3 编写的包，以避免在更新这些 nuget 包时出现问题。

编辑：我应该补充说我正在使用 Visual Studio 2012 和 .Net 4.5

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T15:02:31.583

Phil 的文章是关于将 Ninject 与 WebAPI 一起使用的。你是这个意思吗？对于正常的 MVC 注入，您不需要这样做。此外，您应该将 Ninject.MVC3 NuGet 包与 MVC4 一起使用（是的，我知道它说 MVC3，但它仍然可以正常工作，因为 NuGet 设置了使一切正常工作的程序集版本重定向），这设置了一切，而您没有不需要控制器工厂。只需编辑`NinjectWebCommon.cs`文件以添加您的绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T07:01:30.517

只需简单地添加命名空间

```
Using Ninject; 
```

从 Nuget 安装模板后...你只需从 Nuget 模板安装“Ninject”而不是“Ninject for MVC3”

# javascript - 将大量模型分配给集合

> ID：12408503
> 
> 赞同：0
> 
> 时间：2012-09-13T14:23:53.083
> 
> 标签：javascript, arrays, backbone.js, local-storage

我有一个包含〜1200个对象的数组，我想将其分配给一个集合，但我总是超时。

我试过这个（我承认不是很优雅）：

```
_.each(mightyArray, function(mightyArrayItem){
  BigCollection.create(mightyArrayItem);
}); 
```

这可行，但速度太慢了:-(

**编辑**

也许我走错了路。我使用[的是骨干本地存储.js](http://documentcloud.github.com/backbone/docs/backbone-localstorage.html)而不是某种远程数据库，所以它`localStorage`本身可能会减慢一切？

**编辑 2**

我认为问题在于`localStorage.setItem()`. 我`indexedDB`现在试试：-/

**更新/解决方案**

在我在 index.html 上添加数据后，它出于某种原因工作。可能是范围问题..

```
<script> 
  BigCollection.allItems = new BigCollection.AllItems();
  BigCollection.allItems.add( BigCollection.allItemsArray ); // Add all the data
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:30:13.537

看起来您正在创建 1200 个请求。您最好自己提出将数据保存到服务器的请求，然后

```
BigCollection.add(mightyArray,{silent: true}); 
```

传递静默将避免对服务器的所有请求。

# jquery-mobile - jQueryMobile 页面转换未按应有的方式加载页面

> ID：12408506
> 
> 赞同：1
> 
> 时间：2012-09-13T14:24:00.343
> 
> 标签：jquery-mobile, css-transitions

我正在尝试在单击链接时加载具有过渡效果的页面。我用过**jQuery Mobile**。下面是我的代码。

```
<a href="index.html" data-transition="slide">Transition</a> 
```

单击**过渡**链接**index.html**页面应加载显示过渡效果。

下面是我尝试加载的**index.html的输出。**

![在此处输入图像描述](../Images/8be7f2c8f5937d76dfaba876b9d54f05.png)

但问题是，当我单击**转换**链接时，索引页面未按预期加载。加载的页面如下所示。

![在此处输入图像描述](../Images/16249db9a8951a3ba1515e967f14288b.png)

当我通过萤火虫查看正在发生的事情时，我发现不是加载完整页面，而是将链接页面（即 index.html）的输出放入第一页并将第一页的 css 应用到它。

我希望转换以正确加载索引页面，其所有 css 不将其嵌入到调用页面链接中。

你能告诉我如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:48:00.663

*默认情况下，在JQM中，当您链接到另一个**页面*[时](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html)`data-role="page"`，JQM会在该页面（当前页面。如果您想*完全加载*第二个页面，那么您需要设置为（这是一个全局设置）或在第二个页面的链接上添加属性[data-rel="extrenal"](http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html)。***`ajax-enabled``false`***

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T10:28:17.663

在您的 html 链接标签中添加以下属性：rel="external"

```
<a href="index.html" data-transition="slide" rel="external">Transition</a> 
```***

# c# - 在 C# 中获取 SP 配置数据库版本

> ID：12408517
> 
> 赞同：3
> 
> 时间：2012-09-13T14:24:43.550
> 
> 标签：c#, sharepoint, sharepoint-2010

我希望通过 C# 获取 SharePoint 配置数据库版本，并在[Microsoft.SharePoint.Administration](http://msdn.microsoft.com/en-us/library/ms463219)下找到了[SPConfigDatabase 类](http://msdn.microsoft.com/en-us/library/ms462618)，它有一个成员。这正是我正在寻找的，但现在已经过时了。`Version`

这样做的最佳方法是什么？理想情况下，我也想获取累积更新日期，尽管这实际上只是版本号的另一个名称。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:26:19.853

使用 C# 获取它的方法是使用[Microsoft.SharePoint.Administration.SPFarm](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spfarm.aspx)类，您要查找的属性是[BuildVersion](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spfarm.buildversion)：

```
var v = SPFarm.Local.BuildVersion; 
```

当它返回一个[System.Version](http://msdn.microsoft.com/EN-US/library/hdxyt63s)对象时，您可能希望将这些值连接在一起以使字符串像在中央管理中一样显示：

```
var friendly = v.Major + "." + v.Minor + "." + v.Build + "." + v.Revision; 
```

另外，请注意，要访问 SPFarm.Local 属性，您需要在 64 位模式下运行代码并拥有授权帐户。事实上，在我的 VM 上启用 UAC 后，我需要通过右键单击它并选择“以管理员身份运行”来运行我的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:17:36.537

我通过执行 powershell 脚本找到了一个暂定的解决方案。这是我的解决方案，它从 powershell 脚本将结果打印到控制台：

```
using System.Collections.ObjectModel;
using System.Management.Automation;
using System.Management.Automation.Runspaces;
.
.
.
MAIN CODE:
Runspace runspace = RunspaceFactory.CreateRunspace();

runspace.Open();

PowerShell ps = PowerShell.Create();
ps.AddScript("Add-PsSnapin Microsoft.SharePoint.Powershell");
ps.AddScript("get-spfarm | select BuildVersion");
ps.AddCommand("Out-String");

Collection <PSObject> results = ps.Invoke();
runspace.Close();

foreach (PSObject obj in results)
{
    Console.WriteLine(obj.ToString());
} 
```

归功于[http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C](http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C) 和[http://social.msdn.microsoft.com/Forums/hu/sharepoint2010general/thread/ 88b11fe3-c218-49a3-ac4b-d1a04939980c](http://social.msdn.microsoft.com/Forums/hu/sharepoint2010general/thread/88b11fe3-c218-49a3-ac4b-d1a04939980c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:30:42.180

只需连接到数据库并执行此查询

```
SELECT SERVERPROPERTY ('productversion'), 
       SERVERPROPERTY ('productlevel'), 
       SERVERPROPERTY ('edition') 
```

参考资料： http: [//support.microsoft.com/kb/321185](http://support.microsoft.com/kb/321185)

我希望这会有所帮助

# actionscript-3 - 向 mx DataGrid 添加新行时出现问题

> ID：12408523
> 
> 赞同：0
> 
> 时间：2012-09-13T14:24:56.407
> 
> 标签：actionscript-3, apache-flex, flex3

我正在使用 mx:DataGrid 并且无法更改为 spark（这是一个遗留项目）。DataGrid 是可编辑的，当用户进入最后一列时，我想添加一个新列并在新行的第一列中启动编辑模式。我可以做这个。

我的问题是有时最后一列无法编辑，所以我添加了一个 itemEditBeginning 监听器来停止编辑并添加新行。那是我的问题。当用户进入最后一个字段时，会添加新行但我看不到它。我必须单击列标题以对数据网格数据进行排序，然后出现新行。这有点延迟。

我的代码更大，但是这个简单的代码可以重现同样的问题：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           creationComplete="application1_creationCompleteHandler(event)"
           minWidth="955" minHeight="600">
    <fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.events.CollectionEvent;
        import mx.events.CollectionEventKind;
        import mx.events.DataGridEvent;
        import mx.events.FlexEvent;

        [Bindable] public var itens:ArrayCollection;

        protected function application1_creationCompleteHandler(event:FlexEvent):void {
            itens = new ArrayCollection();
            itens.addEventListener(CollectionEvent.COLLECTION_CHANGE, onCollectionChange);

            itens.addItem({a: '1', b: '2'});
        }

        protected function onCollectionChange(event:CollectionEvent):void {
            if (event.kind == CollectionEventKind.ADD) {
                var row:int = itens.length - 1;
                var column:int = 0;
                var args:Array = [row, column];
                callLater(moveTo, args);
            }
        }

        protected function moveTo(row:int, col:int):void    {
            itensDg.editedItemPosition = { rowIndex:row, columnIndex:col };
        }

        protected function addInfo():void {
            itens.addItem({a: '10', b: '20'});
        }

        protected function itensDg_itemEditBeginningHandler(event:DataGridEvent):void {
            if (event.columnIndex == 1) {
                event.preventDefault();
                addInfo();
            }
        }

    ]]>
    </fx:Script>

    <mx:DataGrid id="itensDg" dataProvider="{itens}" editable="true" 
             itemEditBeginning="itensDg_itemEditBeginningHandler(event)" />
</s:Application> 
```

关于如何解决这个问题的任何提示？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:20:59.957

尝试更新 addInfo() 如下：

```
 protected function addInfo():void {
        itens.addItem({a: '10', b: '20'});
        itens.refresh();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:03:27.703

Trish 的回答让我找到了一个可行的解决方案。DataGrid 有自己的 itemEditBeginning 侦听器，用于修改editedItemPosition。首先我试图停止 itemEditBeginning 事件的传播，但我意识到一些焦点和鼠标事件也修改了 editItemPosition。因此，该项目被添加到数组中，我的 onCollectionChange 侦听器被调用，但后来其他事件修改了editedItemPosition。

因此，我没有在 CollectionEvent 侦听器中更改editedItemPosition，而是在添加元素后对其进行了更改：

```
protected function addInfo():void {
    itens.addItem({a: '10', b: '20'});
    var row:int = itens.length - 1;
    var column:int = 0;
    var args:Array = [row, column];
    callLater(moveTo, args);
} 
```

# r - nlme 包中的相关性是什么

> ID：12408525
> 
> 赞同：1
> 
> 时间：2012-09-13T14:24:59.237
> 
> 标签：r, statistics

当您将混合模型与 lme 应用时，有人可以告诉我这是什么结果

我理解第一部分，但第二部分想告诉我们什么（相关性）：它们与截距相关吗？

```
Fixed effects: Ratio ~ ADF + CP + FCM + DMI + DIM 
                 Value  Std.Error  DF   t-value p-value
(Intercept)  3.1199808 0.16237303 158 19.214896  0.0000
ADF         -0.0265626 0.00406990 158 -6.526603  0.0000
CP          -0.0534021 0.00539108 158 -9.905636  0.0000
FCM         -0.0149314 0.00353524 158 -4.223598  0.0000
DMI          0.0072318 0.00498779 158  1.449894  0.1491
DIM         -0.0008994 0.00019408 158 -4.634076  0.0000

Correlation: 
    (Intr) ADF    CP     FCM    DMI   
ADF -0.628                            
CP  -0.515  0.089                     
FCM -0.299  0.269 -0.203              
DMI -0.229 -0.145  0.083 -0.624       
DIM -0.113  0.127 -0.061  0.010 -0.047 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:43:47.397

（正如我在您的其他问题的评论中回答的那样：）

这些是固定效应估计之间的相关性。如果它们非常高（例如绝对值 > 0.9），它们可能表明估计的稳定性可能存在问题（因为您正在拟合具有强烈共线效应的预测变量）。我会说一般来说，如果它们小于这个值，那么忽略它们是很安全的。如果它们更高，您*可能*需要考虑省略一些预测变量，或以某种方式降低模型的维数（例如，通过 PCA 对预测变量进行分析——Frank Harrell 的*回归建模策略*书是一个很好的来源），但要小心数据窥探. 这个[r-sig-mixed-models 邮件列表线程](https://stat.ethz.ch/pipermail/r-sig-mixed-models/2009q1/001921.html)提供了更多信息。

（这接近于 CrossValidated [statistics] 而不是 StackOverflow [programming] 问题......）

# ffmpeg - 在 FFmpeg 配置命令中启用 MP4 解复用器

> ID：12408526
> 
> 赞同：5
> 
> 时间：2012-09-13T14:25:02.473
> 
> 标签：ffmpeg, configure

我想启用 MP4 复用和解复用、H264 解码和 MJPEG 编码，并禁用 FFmpeg 配置命令中的所有其他内容。

我知道我可以使用`--disable-everything`选项并启用所需的组件。当我列出使用`--list-demuxers`和`--list-decoders`选项的解复用器和解码器时，我没有看到 MP4 解复用器或解码器。我确实在多路复用器列表中看到了 MP4 多路复用器。

我应该使用什么选项在 FFmpeg 配置命令中启用 MP4 解复用器？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T18:32:34.560

mov demuxer 将对 mp4 进行解复用。[它是同一个解复用器] 所以你可以启用它。

--enable-demuxer=mov

它将解复用以下所有内容：mov,mp4,m4a,3gp,3g2,mj2 [它们实际上都非常相似]。如果您想查看它，请参阅 libavformat/mov.c。

# asp.net-mvc-3 - 是否可以强制使用 DataType 作为 DataType.Currency 的 MVC3 字段的货币

> ID：12408530
> 
> 赞同：9
> 
> 时间：2012-09-13T14:25:12.243
> 
> 标签：asp.net-mvc-3, data-annotations, globalization, currency

我正在编写一个 MVC3 应用程序，它从数据库中读取一堆货币数据。我遇到的问题是这些金额都是不同的货币。

如果我这样设置字段的类型：

```
[DataType(DataType.Currency)]
public Amount{ get; set;} 
```

我得到小数位和货币符号，看起来不错，但默认为用户的本地货币。美国用户看到`$423.29`，而 GB 用户看到`£423.29`。我可以通过在 Web.config 中使用 a 来覆盖货币`<globalization culture="{something}">`，但这会全局设置所有货币字段。

标记字段以使其以正确的小数位和货币符号呈现的最简单方法是什么？

在一个理想的世界中，我希望能够做这样的事情（对于美元）：

```
[DataType(DataType.Currency, culture="en-us")]
public Amount{ get; set; } 
```

并始终呈现为`$439.38`，但使用内置注释是不可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T15:14:44.057

我这样做的方法是创建一个扩展`DataType`属性的自定义属性和一个自定义 html 助手。这不一定是*最简单*的方法，但将来会节省时间。

**编辑** 合并`CultureInfo.CreateSpecificCulture(cultureName)`而不是`switch`

**自定义属性**

```
public class CurrencyDisplayAttribute : DataTypeAttribute
{
    public string Culture { get; set; }

    public CurrencyDisplayAttribute(string culture)
        : base(DataType.Currency)
    {
        Culture = culture;
    }
} 
```

**html 助手**

```
public static class Helpers
{
    public static IHtmlString CurrencyDisplayFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression)
    {
        double value = double.Parse(expression.Compile().Invoke(helper.ViewData.Model).ToString());
        var metadata = ModelMetadata.FromLambdaExpression(expression, helper.ViewData);

        var prop = typeof (TModel).GetProperty(metadata.PropertyName);

        var attribute = prop.GetCustomAttribute(typeof (CurrencyDisplayAttribute)) as CurrencyDisplayAttribute;

        // this should be whatever html element you want to create
        TagBuilder tagBuilder = new TagBuilder("span");
        tagBuilder.SetInnerText(value.ToString("c", CultureInfo.CreateSpecificCulture(attribute.Culture));

        return MvcHtmlString.Create(tagBuilder.ToString());
    }
} 
```

您可以在模型中使用该属性

```
[CurrencyDisplay("en-us")]
public double Amount { get; set; } 
```

然后在您看来，您可以通过

```
@Html.CurrencyDisplayFor(x => x.Amount); 
```

只要您的模型正确传递。

显然，您需要进行错误检查等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T15:50:48.473

将字符串设为金额

```
public string Amount{ get; set;} 
```

创建一个转换为精确货币字符串的方法

```
private string LocalizedAmount(decimal theAmount, string cultureName)
{
      return theAmount.ToString("c",CultureInfo.CreateSpecificCulture(cultureName));
} 
```

如果您在数据库中存储两个字段或列，一个用于值，一个用于文化。

在存储库或控制器中：

```
Amount = LocalizedAmount(Convert.ToDecimal(reader[0]),reader[1].ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:42:42.740

您需要评估文化：

```
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(cultureName);
Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture(cultureName); 
```

在此 Controller 内部覆盖了方法：

```
 protected override void OnActionExecuted(ActionExecutedContext filterContext)
 protected override void ExecuteCore() 
```

阅读 NadeemAfana 的博客[ASP.NET MVC 3 Internationalization中的全部技术](http://afana.me/post/aspnet-mvc-internationalization.aspx)

# javascript - 如何将 package.json 数组传递给 grunt.js

> ID：12408535
> 
> 赞同：12
> 
> 时间：2012-09-13T14:25:17.953
> 
> 标签：javascript, underscore.js, gruntjs

有没有办法从 package.json 文件中将数组传递给 grunt.js？我尝试了几种不同的方法，但它们似乎都不起作用。我目前有：

```
/*global module:false*/
module.exports = function(grunt) {

     // Project configuration.
     grunt.initConfig({
    pkg: '<json:package.json>',

    lint: {
      files: '<%= pkg.lint.join(", ") %>'
    }

    // Default task 'lint qunit concat min'
    grunt.registerTask('default', 'lint');
}; 
```

包.json

```
{
  "lint": [   
              "grunt.js",
              "test.js"
          ]
} 
```

我能找到的唯一解决方案是传入数组的特定索引；例如 <%= pkg.lint[0] %>。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-14T15:32:44.607

由于 gruntjs 在节点中运行，您可以访问 package.json，如下所示：

```
var package = require('./package.json'),
    property = package.property[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:26:49.593

我认为`<%= … %>`语法（[下划线模板系统中的](http://underscorejs.org/#template)变量插值）只能输出字符串，不能输出数组/对象。

试试这个：

```
lint: {
    files: '<config:pkg.lint>'
} 
```

我在 Grunt 的[jQuery init task](https://github.com/cowboy/grunt/blob/master/tasks/init/jquery/root/grunt.js#L33)中找到了这种语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-09T21:43:00.933

```
grunt.initConfig({
  lint: grunt.file.readJSON('package.json').lint,
}); 
```

# java - maven：无法让预集成阶段工作

> ID：12408536
> 
> 赞同：2
> 
> 时间：2012-09-13T14:25:18.370
> 
> 标签：java, maven, integration-testing

我正在尝试使前后集成阶段与 Maven 一起工作，但无济于事。我的目标是通过运行一些必要的二进制文件来设置和拆除集成测试。我正在使用`antrun-plugin`and进行测试`exec-plugin`，但它们都没有打印消息。

我在跑步`mvn verify`。如果我将插件绑定到`clean`phase 并 run `mvn clean`，则会显示回显消息和`ls`。

怎么了？我正在使用 maven3

```
<build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <version>2.12.3</version>
                <executions>
                    <execution>
                        <id>integration-test</id>
                        <goals>
                            <goal>integration-test</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>verify</id>
                        <goals>
                            <goal>verify</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <executions>
                    <execution>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <executable>ls</executable>
                    <arguments>
                        <argument>-la</argument>
                    </arguments>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <id>xxx</id>
                        <configuration>
                            <target>
                                <echo>Cleaning deployed website</echo>
                            </target>
                        </configuration>

                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:39:08.673

[我帮助其他人早先](https://stackoverflow.com/a/9949341/944849)正确配置了故障保护插件。尝试明确指定故障安全插件执行中的阶段。不知道为什么需要这样做，因为故障安全插件文档说目标应该默认绑定到正确的阶段 - 但它似乎是。

# jquery - 在悬停时上下设置 div？

> ID：12408539
> 
> 赞同：-1
> 
> 时间：2012-09-13T14:25:30.167
> 
> 标签：jquery, html, css

如何让 div 在悬停时上下移动，就好像它在跳跃一样？这有可能做到还是只能在鼠标悬停在 div 上时向上移动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:27:55.607

您可以为此使用 jQueryUI 的反弹效果：http: [//jqueryui.com/demos/effect/](http://jqueryui.com/demos/effect/)

您可以使用悬停事件来触发效果。

即类似的东西：

```
$( "#myDIV" ).mouseenter(function() {
    $(this).effect('bounce', {}, 'fast');
}); 
```

上面代码的**演示：http:** [//jsfiddle.net/techfoobar/cKqsC/](http://jsfiddle.net/techfoobar/cKqsC/)

# hashchange - 选项卡式面板和 hashchange 插件

> ID：12408546
> 
> 赞同：1
> 
> 时间：2012-09-13T14:25:55.977
> 
> 标签：hashchange, panels, tabbed

我正在使用以下代码创建选项卡式面板，它是唯一一个做得很好的代码。我尝试了easytabs，但它不能与我所拥有的一起正常工作。所以，我们开始：

```
/*
 *  The following lines are for main tabbed panels
 */

$(function() {

    $('.nav a').click(function() {
        // save $(this) in a variable for efficiency
        var $this = $(this);

        // hide panels
        $('.panel').hide();
        $('.nav a.active').removeClass('active');

        // add active state to new tab
        $this.addClass('active').blur();
        // retrieve href from link (is id of panel to display)
        var panel = $this.attr('href');
        // show panel
        $(panel).fadeIn(250);

        // don't follow link down page
        return (false);
    });
    // end click

    // open first tab
    $('.nav li:first a').click();

});
// end function 
```

我找到了一个名为 BBQ 的插件，它使用了 Hashchange。 [http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/) 为了能够在浏览器中使用后退按钮，我很想了解如何在我的代码中使用它。请帮我。预先感谢您的帮助。问候， 德维亚德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:27:31.683

我以这种方式解决了这个问题。

```
/*
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($, i, b) {
    var j, k = $.event.special, c = "location", d = "hashchange", l = "href", f = $.browser, g = document.documentMode, h = f.msie && (g === b || g < 8), e = "on" + d in i && !h;
    function a(m) {
        m = m || i[c][l];
        return m.replace(/^[^#]*#?(.*)$/, "$1")
    }
    $[d + "Delay"] = 100;
    k[d] = $.extend(k[d], {
        setup : function() {
            if (e) {
                return false
            }
            $(j.start)
        },
        teardown : function() {
            if (e) {
                return false
            }
            $(j.stop)
        }
    });
    j = (function() {
        var m = {}, r, n, o, q;
        function p() {
            o = q = function(s) {
                return s
            };
            if (h) {
                n = $('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;
                q = function() {
                    return a(n.document[c][l])
                };
                o = function(u, s) {
                    if (u !== s) {
                        var t = n.document;
                        t.open().close();
                        t[c].hash = "#" + u
                    }
                };
                o(a())
            }
        }
        m.start = function() {
            if (r) {
                return
            }
            var t = a();
            o || p();
            (function s() {
                var v = a(), u = q(t);
                if (v !== t) {
                    o( t = v, u);
                    $(i).trigger(d)
                } else {
                    if (u !== t) {
                        i[c][l] = i[c][l].replace(/#.*/, "") + "#" + u
                    }
                }
                r = setTimeout(s, $[d + "Delay"])
            })()
        };
        m.stop = function() {
            if (!n) {
                r && clearTimeout(r);
                r = 0
            }
        };
        return m
    })()
})(jQuery, this);
/*
 *
 * Tabbed Browsing with back button support. Requires Hashchange plugin. 
 *
 */ 

$(function () {

$(".nav a").live("click", function(e) {

   updateTabs($($(this).attr("href")));

});

//Grab hash off URL (default to first tab) and update

$(window).bind("hashchange", function(e) {

   var anchor = $(location.hash);

   if (anchor.length === 0) {

      anchor = $(".panel div:eq(0)");

   }

   updateTabs(anchor);

});

//Pass in the tab and show appropriate contents

function updateTabs(tab) {

   $(".nav a.active")

      .removeClass("active")

      .filter(function(index) {

         return $(this).attr("href") === '#' + tab.attr("id");

      }).addClass("active");

   $(".panel").hide();

   tab.show();

}

//Fire the hashchange event when the page first loads

$(window).trigger('hashchange');
$('.nav li:first a').click();
});

}); 
```

# apache-flex - DataGrid 不合适的 dataProvider 值

> ID：12408548
> 
> 赞同：0
> 
> 时间：2012-09-13T14:25:59.700
> 
> 标签：apache-flex, datagrid, air, arraycollection, dataprovider

我有一个 ArrayCollection 填充了 'o' 对象。这个 AC 应该是 DataGrid 的 dataProvider。设置dp后：`dgMT.dataProvider=acDataGrid`DataGrid只包含arrayCollection的最后一项。代码：

```
[Bindable]
        public var acDataGrid:ArrayCollection = new ArrayCollection();
        protected function ddlLanguage_changeHandler(event:IndexChangeEvent):void{

            gcTranslate.headerText=Globals.acLanguages.getItemAt(ddlLanguage.selectedIndex,0).toString();
            Globals.acActValues=convertXmlToArrayCollection(File.applicationDirectory.resolvePath("xmls"+File.separator+Globals.acFileNames.getItemAt(ddlLanguage.selectedIndex,0)));

            Globals.acDataGrid.removeAll();
            var o:DataGridObject = new DataGridObject();
            var i:int=0;
            var angol:Object;
            for each(angol in Globals.acValues){
                o.en=angol.value;
                o.name=angol.name;

                if(i<Globals.acActValues.length && o.name==Globals.acActValues.getItemAt(i,0).name){
                    o.translation=Globals.acActValues.getItemAt(i,0).value;                 

                }
                else{
                    o.translation="";
                    Globals.acActValues.addItemAt("",i);
                }

                acDataGrid.addItemAt(o,i);

                trace("NAME: "+acDataGrid.getItemAt(i,0).name+" VAL:"+acDataGrid.getItemAt(i,0).en+"TRANS: "+acDataGrid.getItemAt(i,0).translation);
// the values are different!
                i++;
            }
            dgMT.dataProvider=acDataGrid;//setting the dataProvider         

        } 
```

我怎样才能达到 DataGrid 的行填充了正确的值？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:32:48.757

您只在循环`o`之外实例化一次。`for`这意味着您只需更改该实例属性的值并将该相同实例一遍又一遍地添加到数据提供者中。相反，您应该在每次迭代时创建一个新实例。

要解决这个问题，只需移动循环`o`内的实例化：`for`

```
for each(angol in Globals.acValues){
    var o:DataGridObject = new DataGridObject();
    ...
} 
```

# java - 获取对应的本地化消息

> ID：12408549
> 
> 赞同：0
> 
> 时间：2012-09-13T14:26:00.547
> 
> 标签：java, jsf-2, localization

我有这门课：

```
@Getter
@Setter
public class Notification implements Serializable{

    private String color;
    private String message; //contains an error code
    private Boolean active;

} 
```

然后我有这两个文件：

![属性文件](../Images/6f23f960f7e0f722042602b8f84b3765.png)

声明者：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
     <application>
           <locale-config>
                <default-locale>fr</default-locale>
                <supported-locale>fr</supported-locale>
                <supported-locale>en</supported-locale>
           </locale-config>
       <resource-bundle>
        <base-name>com.cogepat.template</base-name>
        <var>msg</var>
       </resource-bundle>
     </application>
</faces-config> 
```

这是我的问题：现在我有一个通知对象，其中包含“red”、“ERRdon”、true。如何在 JSF 代码中打印与“ERRdon”对应的字符串？

通常我会做

```
<h:outputText value="#{msg.ERRdon}:" /> 
```

但在这里我不能这样做。

# 编辑

```
<h:outputText class="rt" value="#{msg[BeanName.n.message]}" /> 
```

正在工作中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:37:44.760

我有这个片段用于从包中发送 jsf 消息，我希望它可以工作：

```
public static void addNewFacesMessageFromBundle(FacesContext facesContext,
            FacesMessage.Severity severity, String clientId, String key, Object[] summaryArgs,
            Object[] detailArgs) {

        String bundleName = facesContext.getApplication().getMessageBundle();
        Locale locale = facesContext.getViewRoot().getLocale();

        if (bundleName == null) {
            bundleName = Constantes.DEFAULT_CUSTOM_FACES_MESSAGE_BUNDLE_NAME;
        }

        ResourceBundle bundle = ResourceBundle.getBundle(bundleName, locale);

        String summary = bundle.getString(key);
        String detail = bundle.getString(key + "_detail");

        summary = MessageFormat.format(summary, summaryArgs);
        detail = MessageFormat.format(detail, detailArgs);

        JsfUtils.addNewFacesMessage(facesContext, clientId, severity, summary, detail);

    } 
```

# java - 我可以有多个与 Spring 的 bean 互连版本吗？

> ID：12408553
> 
> 赞同：0
> 
> 时间：2012-09-13T14:26:18.780
> 
> 标签：java, spring, javabeans

Spring 配置文件创建 bean 并将它们互连。它是否正确？我的应用程序中有一个 bean 链，但想用较小的链对其进行测试。我可以使用 Spring 定义多个链吗？还是只允许一种 bean 结构？

**例子**

假设这是生产配置：

```
<bean id="provider"
    class="tests.Provider">
</bean>

<bean id="processor1" class="tests.Processor1">
    <property name="input" ref="provider"/>
</bean>

<bean id="processor2" class="tests.Processor2">
    <property name="input" ref="processor1"/>
</bean>

<bean id="consumer" class="tests.Consumer">
    <property name="input" ref="processor2"/>
</bean> 
```

我想在以下配置中进行测试：

```
<bean id="provider"
    class="tests.Provider">
</bean>

<bean id="analyzer" class="tests.Analyzer">
    <property name="input" ref="provider"/>
</bean> 
```

和：

```
<bean id="provider"
    class="tests.Provider">
</bean>

<bean id="processor1" class="tests.Processor1">
    <property name="input" ref="provider"/>
</bean>

<bean id="analyzer" class="tests.Analyzer">
    <property name="input" ref="processor1"/>
</bean> 
```

依此类推，一颗一颗地贴上豆子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:51:31.847

我相信你想测试集成，我通常做的是将我的 bean 配置文件分层分离，然后根据需要导入它们进行测试。像这样的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans ...>

    <context:property-placeholder
        location="classpath:mx/gob/jgtjo/apps/schedule/web/schedule-web.properties"
        file-encoding="UTF-8" system-properties-mode="NEVER" />

    <!-- Context files -->
    <import resource="spring/dataContext.xml" />
    <import resource="spring/serviceContext.xml" />
    <import resource="spring/securityContext.xml" />
    <import resource="spring/components.xml" />

</beans> 
```

然后，如果我需要测试 Daos，我只需在 testContextDao 中导入 dataContext.xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:52:57.450

是的你可以。

您可以将应用程序的 Spring 应用程序上下文的整体配置分解为多个部分（如果使用 XML 配置，则为 XML 文件，`@Components`如果使用类路径扫描，则为包，如果`@Configuration`使用基于 Java 的配置，则为 s）并使用其中的子集构建应用程序上下文部分。

因此，如果您的应用程序有两个特性`foo`和，您可以分别在和`bar`中声明这些特性使用的 bean （如果使用 XML 配置），并从应用程序的主配置中导入它们（例如）。`foo.xml``bar.xml``applicationContext.xml`

现在，如果您想为您编写集成测试，您可以仅从 ( )`bar`创建应用程序上下文。显然，您应该注意配置的不同部分之间的相互依赖关系。例如，如果两者都依赖于在 中声明的 bean ，您可能想要创建类似的东西并为as配置集成测试。`bar.xml``@ContextConfiguration("bar.xml")``foo.xml``bar.xml``db.xml``test-db.xml``bar``@ContextConfiguration({"bar.xml", "test-db.xml"})`

请注意，这种方法需要一些纪律，特别是如果您使用类路径扫描 - 在这种情况下，您的配置部分是由包定义的，因此您需要遵循“按功能包，而不是按层”规则。

**也可以看看：**

*   [9.3 集成测试](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/testing.html#integration-testing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:34:33.483

简单来说，spring 框架负责对象创建。您希望 Spring 管理这些对象，您将它们定义为 bean。所以当spring创建一个bean1时，如果bean1引用了bean2，bean2被实例化并注入bean1，最后bean1被创建。将其视为链条将过于复杂。

[spring 文档的第 3.2 节](http://static.springsource.org/spring/docs/2.0.x/reference/beans.html)

# java - 在 JBoss AS 7.1 上使用一些自定义协议监听特定端口的更好方法

> ID：12408554
> 
> 赞同：-1
> 
> 时间：2012-09-13T14:26:30.030
> 
> 标签：java, jboss7.x

现有协议和端口附带一些集成。没有 HTTP 没有 JSON，只有普通的 HEX。我需要监听这个端口并接受连接。

我看到了一种解决方案——servlet。通过这种方式，我还可以管理将处理连接的线程数，但可能 JBoss 7.1 提供了一些更好的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:20:50.413

除非它使用 HTTP，否则您不能使用 servlet 并让它为您管理线程。

您的问题的解决方案包括标准的 ServerSocket、接受循环、每个连接场景的线程，或者如果您勇敢的话，可以使用 NIO 实现。

# ruby-on-rails - 从 Ruby on Rails 中的 collection.map 中排除选项？

> ID：12408561
> 
> 赞同：12
> 
> 时间：2012-09-13T14:26:54.767
> 
> 标签：ruby-on-rails, ruby

我有这样的一行：

```
<%= f.input :state_id, :input_html => {:value => (policy_address.state.name rescue nil)}, :required => true, :collection => states.map {|s| [ s.name, s.id] }, :include_blank => 'Please select'%> 
```

我想从`states.map`集合中排除一个值。我认为这会起作用，但它不会：

```
<%= f.input :state_id, :input_html => {:value => (policy_address.state.name rescue nil)}, :required => true, :collection => states.map {|s| [ s.name, s.id] unless s.name == "excluded_state" }, :include_blank => 'Please select'%> 
```

我输入了`unless s.name == "excluded_state`，但是，它再次不起作用：

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-13T14:34:26.960

`map`不允许跳过值。您必须首先拒绝不需要的元素。

```
states.reject { |s| s.name == "excluded_state" }.map { |s| [s.name, s.id] } 
```

另一个（更脏的）解决方案是返回`nil`排除的元素并`Array#compact`在结果数组上使用以删除这些`nil`元素：

```
states.map { |s| s.name == "excluded_state" ? nil : [s.name, s.id] }.compact 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T14:38:09.803

[尤里卡的](https://stackoverflow.com/users/537873/eureka)回答很好，但这里只是一个简短的解释，以澄清发生了什么。

`map`*为数组中的每个*元素返回一个新数组，其中包含一次运行块的结果。当你写`[s.name, s.id] unless s.name == "excluded_state"`这会导致块返回`nil`时，`s.name == "excluded_state"`即结果将类似于

```
[["NY", 1], nil, ["CA", 2]] 
```

因此，您可以`reject`先使用删除不需要的状态，或者您可以只使用`compact`¹删除您最初编写`nil`的结果中的条目。`map`

* * *

1.  `Array#compact``nil`返回删除所有元素的数组副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-17T19:27:12.037

提供的答案的另一种选择是使用`each_with_item`代替`map`

```
states.each_with_item([]) { |out, s| out << [s.name, s.id] unless s.name == "excluded_state" } 
```

它介于`each`and `reduce`/之间`inject`。它接受一个参数，迭代你的可枚举提供参数和元素，然后在最后返回参数。您可以在循环中操纵参数（不这样做没有多大意义）。

# boost - Boost 1.51：“错误：无法链接到 boost_thread！”

> ID：12408564
> 
> 赞同：2
> 
> 时间：2012-09-13T14:27:03.483
> 
> 标签：boost, configure

在为袖扣安装 boost 后，我​​运行了 ./configure。我收到以下错误：

```
checking for exit in -lboost_thread... no
checking for exit in -lboost_thread... (cached) no
checking for exit in -lboost_thread... (cached) no
error: Could not link against boost_thread ! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-22T16:44:05.790

检查你的 config.log，它会更详细地告诉你失败的原因：

```
configure:11032: checking for exit in -lboost_thread
configure:11057: g++ -o conftest -I/home/jcomeau/include  -Wstack-protector -fstack-protector-all -fPIE  -DBOOST_SPIRIT_THREADSAFE -DHAVE_BUILD_INFO -D__STDC_FORMAT_MACROS -D_FILE_OFFSET_BITS=64  -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=2  -L/home/jcomeau/lib  -Wl,-z,relro -Wl,-z,now -pie -L/home/jcomeau/lib conftest.cpp -lboost_thread  -lminiupnpc -lminiupnpc -lminiupnpc -lminiupnpc  >&5
/usr/bin/ld: warning: libboost_system.so.1.54.0, needed by /home/jcomeau/lib/libboost_thread.so, not found (try using -rpath or -rpath-link)
/home/jcomeau/lib/libboost_thread.so: undefined reference to `boost::system::system_category()'
/home/jcomeau/lib/libboost_thread.so: undefined reference to `boost::system::generic_category()'
collect2: error: ld returned 1 exit status
configure:11057: $? = 1 
```

在这种情况下，我必须更改我的 ./configure 命令：

```
./configure CXXFLAGS="-I$HOME/include" LDFLAGS="-L$HOME/lib"  --prefix=$HOME --with-boost-libdir=$HOME/lib 
```

至：

```
./configure CXXFLAGS="-I$HOME/include" LDFLAGS="-L$HOME/lib -Wl,-rpath-link,$HOME/lib" --with-boost-libdir=$HOME/lib --prefix=$HOME 
```

按照这里的建议：[摆脱“gcc - /usr/bin/ld: warning lib not found”](https://stackoverflow.com/questions/13507600/get-rid-of-gcc-usr-bin-ld-warning-lib-not-found)

# javascript - 在 Ext JS javascript 中验证 Null 值

> ID：12408565
> 
> 赞同：0
> 
> 时间：2012-09-13T14:27:04.797
> 
> 标签：javascript, extjs

我需要允许值 's1pdtCalc' 为空并允许保存记录。现在我收到错误消息“s1pdtCalc 为空或不是对象”。感谢您的帮助，这是代码。

```
 function validateForm(values) {
        var pass = true;
        // check percent days turnaround

        var ck = values.s1pdtCalc.toString ();
        if (ck > "") {
            var t1 = values.s1pdtNTTd.toString (); //NEMIS Turn around
            var t2 = values.s1pdtTAd.toString (); //NEMIS Turn adjustment
            var t3 = values.actDays.toString ();  //NEMIS Turn adjustment
            t1 = (t1!=null?t1.trim ():0);

            if (ck == "MINUS") {
                if ((t1-t2) > t3) {
                    errorMsgs += '<br /> s1pdtATT - Percent days turnaround < 4.0.0\. exceeds the number of activation days';
                }
            }
            else {
                if ((t1+t2) > t3) {
                    errorMsgs += '<br /> s1pdtATT - Percent days turnaround < 4.0.0\. exceeds the number of activation days';
                }
            }
        }

        if (errorMsgs > "") {
            pass = false
        }
        return pass;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:33:26.307

您不能在不存在的对象上调用方法。`s1pdtCalc`如果在尝试调用方法之前不存在，您需要将其默认为：

```
function validateForm(values) {
    ...
    // set ck to an empty string if values.s1pdtCalc doesn't exist
    var ck = values.s1pdtCalc ? values.s1pdtCalc.toString() : '';
    ... 
```

# ios5 - iOS 产品中的 inApp 购买在响应中没有返回任何产品

> ID：12408571
> 
> 赞同：3
> 
> 时间：2012-09-13T14:27:27.097
> 
> 标签：ios5, in-app-purchase

我在以下博客上关注 raywenderlich 的教程：

[**http://www.raywenderlich.com/2797/introduction-to-in-app-purchases**](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

代码中一切正常，所有委托方法都被正确调用，但仍然没有针对产品标识符返回任何产品

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {

    self.products = response.products;
    NSLog(@"products array count= %i", [self.products count]);  //products array count=0  :(
} 
```

有没有人尝试过相同的代码，可以建议我其中有什么问题吗？

```
<SKProductsRequestDelegate, SKPaymentTransactionObserver> 
```

在本教程中使用，

我已成功创建产品标识符和应用程序 ID。所以唯一的问题是根据标识符加载该产品。有没有比这更合适的其他类或 InApp 可重用代码？

已经花了一整天的时间来解决问题，最后在这里发布以寻求帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T00:59:51.590

应用内购买设置可能会在很多地方出错。而且问题通常不在代码之内。我发现这个清单非常有帮助：

[无效的产品 ID](http://troybrant.net/blog/2010/01/invalid-product-ids/)

# ios - 当 iPhone 进入睡眠模式时，iOS 5 中的 tcp 套接字问题

> ID：12408576
> 
> 赞同：2
> 
> 时间：2012-09-13T14:27:41.683
> 
> 标签：ios, ios5, tcp, background

我正在构建一个 voip 应用程序，其中 iPhone 在 TCP 端口 5060 上侦听传入的 SIP 消息。

当应用程序处于前台时，它会正确处理 TCP 上的传入 SIP 数据包。类似地，当我按下 Home 按钮时，应用程序会进入后台，然后传入的 SIP 数据包也会得到正确处理。

但是当 iPhone 进入睡眠模式 60 秒后，5060 TCP 端口被关闭，传入的 SIP 消息被“拒绝连接”拒绝。

不知何故我无法解决这个问题。有人可以建议如何解决这个问题。

# fonts - c# label font Size to fit in its panel container

> ID：12408577
> 
> 赞同：1
> 
> 时间：2012-09-13T14:27:42.690
> 
> 标签：fonts, size, label, panel, fill

我有一个由 tablelayoutpanel 设计的表格。

在一个单元格中，我有一个停靠在该单元格上的面板，并且在面板中有一个停靠在父面板上的标签。

标签自动大小功能设置为 false。

标签的字体大小必须是动态的，以便在重新调整表单大小（因此重新调整面板大小）时 label.text 仍然适合并填充面板而不会被剪切。

我尝试了 TextRenderer.MeasureText / 测量字符串来为字体找到合适的大小，但无法解决问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:00:09.677

我基于[此链接](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/78256dfc-2929-40f6-8cb0-5a2d11db0bb8)编写了一个代码片段，可以帮助您：

```
using System.Drawing;

public partial class Form1 : Form
{
    public int initialWidth;
    public int initialHeight;
    public float initialFontSize;

    public Form1()
    {
        InitializeComponent();
        AutoScaleMode = AutoScaleMode.None;

        // Sets the initial size of the variables
        initialWidth = Width;
        initialHeight = Height;
        initialFontSize = LabelFont.Font.Size;
        LabelFont.Resize += LabelFont_Resize;
    }

    private void LabelFont_Resize(object sender, EventArgs e)
    {
        SuspendLayout();
        // Get the proportionality of the resize
        float proportionalNewWidth = (float)Width / initialWidth;
        float proportionalNewHeight = (float)Height / initialHeight;

        // Calculate the current font size
        LabelFont.Font = new Font(LabelFont.Font.FontFamily, initialFontSize * 
            (proportionalNewWidth > proportionalNewHeight ? proportionalNewHeight : proportionalNewWidth), 
            LabelFont.Font.Style);
        ResumeLayout();
    }

} 
```

使用这种标签调整大小的方法，您可以确定更改的比例并从中定义新字体。我希望这能解决你的问题。

# windows - 在使用 SQLEXPRWT_x86_ENU.exe 从命令行安装 SQL Server Express 2008 R2 时，我应该为 SQLSVCACCOUNT 参数使用什么值？

> ID：12408578
> 
> 赞同：7
> 
> 时间：2012-09-13T14:27:42.890
> 
> 标签：windows, sql-server-2008-r2

我正在使用以下命令在各种操作系统（Windows XP、Server 2003、Server 2008、Server 2008 R2 和 7）上安装 SQL Server Express 2008 R2，但我不确定要使用哪个帐户（以及为什么） SQLSVCACCOUNT 参数。此 SQL Server 安装将是在同一台计算机上运行的 Web 应用程序的一部分，并且所有这些都将使用 NSIS 脚本进行安装。

```
SQLEXPRWT_x86_ENU.exe /Q /ACTION=Install /IACCEPTSQLSERVERLICENSETERMS /ROLE=AllFeatures_WithDefaults /SQLSVCACCOUNT="NT AUTHORITY\Network Service" /INSTANCENAME=SQLEXPRESS /SecurityMode=SQL /SAPWD="xxxxxxx" 
```

“NT Authority\Network Service”是否适用于我列表中的所有操作系统？或者也许我应该完全使用不同的帐户？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T14:48:07.720

网络服务是所有操作系统的通行方式，本地系统授予比您可能需要的更高的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T22:51:26.213

以上是正确的，但如果您要安装到小型企业服务器或充当域控制器的服务器，您可能会收到此错误：

```
Exit code (Decimal):           -2068578304
Exit facility code:            1204
Exit error code:               0
Exit message:                  Network Service or Local Service account is not permitted for the SQL Server service on a domain controller. Specify a different account. 
```

在这些情况下，您将需要指定特定帐户。

# ajax - JSF AJAX 类型 selectOneMenu

> ID：12408581
> 
> 赞同：2
> 
> 时间：2012-09-13T14:27:49.763
> 
> 标签：ajax, spring, hibernate, jsf

我是 JSF 的新手，想知道是否有任何方法可以做类似“提前输入”的事情，可以合并到 ah:selectOneMenu 场景中。我不知道这是否可以使用 AJAX 或类似的东西来实现。

我看到这篇 IBM 文章看起来非常接近我想要实现的目标 -->

[http://publib.boulder.ibm.com/infocenter/rbdhelp/v7r5m0/index.jsp?topic=/com.ibm.etools.egl.jsfsearch.tutorial.doc/topics/egl_lesson02-01-06.html](http://publib.boulder.ibm.com/infocenter/rbdhelp/v7r5m0/index.jsp?topic=/com.ibm.etools.egl.jsfsearch.tutorial.doc/topics/egl_lesson02-01-06.html)

我正在使用 Spring + Hibernate + JSF。

我想知道是否有人对实现此目标或更多资源的最简单方法有任何想法（我很难找到材料）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:38:12.963

看一下 PrimeFaces Autocomplete 组件：

[http://www.primefaces.org/showcase/ui/autoCompleteBasic.jsf](http://www.primefaces.org/showcase/ui/autoCompleteBasic.jsf)

它具有您描述的开箱即用的所有功能，并且很容易集成到您的应用程序中。您当然需要将 PrimeFaces 集成到您的 JSF 应用程序中，但是有很多在线资源可以帮助您。

# php - 虚拟子域：每个用户一个子域

> ID：12408582
> 
> 赞同：3
> 
> 时间：2012-09-13T14:27:50.537
> 
> 标签：php, linux, subdomain, virtualhost

在我的网站上，我使用虚拟主机，因此我的用户可以拥有像“user1.mydomain.com”、“user2.mydomain.com”这样的虚拟域...

问题是在像“user1.domain.com”这样的虚拟域上，索引页面总是与我的索引页面“http://mydomain.com”上的相同。

我想要做的是为域和子域设置两个不同的索引页面。我的问题是，如何将子域重定向到“index2.php”（例如）并且仍然让子域看起来像“user1.mydomain.com”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:37:45.093

理想情况下，您将为每个子域设置完全独立的文档目录。 `vhost`在阿帕奇是要走的路。但是，如果您想按照自己的方式进行操作（将子域重定向到单个文件），则需要做更多的工作，但仍然可行。首先，`mod_vhost`用通配符定义：

```
<VirtualHost 111.22.33.55>
    DocumentRoot /www/subdomain
    ServerName www.mydomain.com
    ServerAlias *.mydomain.com

    ...
</VirtualHost> 
```

然后在此`VirtualHost`设置中使用以下重写规则`mod_rewrite`：

```
<Location "/">
    RewriteCond %{HTTP_HOST} ^user1.mydomain.com$
    RewriteRule ^\/$ http://www.mydomain.com/index2.php [R=301,L]
    RewriteRule ^\/index.php$ http://www.mydomain.com/index2.php [R=301,L]

    RewriteCond %{HTTP_HOST} ^user2.mydomain.com$
    RewriteRule ^\/$ http://www.mydomain.com/index3.php [R=301,L]
    RewriteRule ^\/index.php$ http://www.mydomain.com/index3.php [R=301,L]

    ...
</Location> 
```

但是请注意，这仅适用于子域和对子域的`/`请求`/index.php`。如果您打算做更多的事情，最好为每个子域设置单独的文档根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:30:25.197

也许你对此感兴趣。

[http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html#virtualdocumentroot](http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html#virtualdocumentroot)

这允许在 Apache 服务器中自动使用基于子域的文档根目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:34:33.857

我会使用 php 来检查 url。如果是子域包括 index2.php 否则包括 index1.php

在不知道您正在运行的服务器的情况下，这是我能想到的唯一方法。

# android - Android 和 iOS 应用程序的后端

> ID：12408585
> 
> 赞同：3
> 
> 时间：2012-09-13T14:27:56.060
> 
> 标签：android, ios, web-services, rest, jersey

我正在开发一个包含 iOS 和 Android 应用程序的系统。我有两种方法：

1 - 我想过使用 MySQL 作为后端。然后使用[jersey 在 java 中使用 REST](http://www.vogella.com/articles/REST/article.html)将我的资源传输到应用程序。

2 - 目前我听说[Parse](https://parse.com/)被认为是一种向移动应用程序添加后端的简单方法。它允许移动开发人员在没有服务器的情况下编写服务器代码。

你的建议是哪一个？请以适当的理由和您的个人经历支持您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:45:13.930

如果你想时尚，使用 node.js 和 MongoDB。（虽然 MongoDB 不再流行，但它允许任意长度的二进制文件并且运行良好。）PHP 与 MongoDB 也可以正常工作。

我的理由是：它们是广泛使用的技术，进入门槛非常低。除非您想维护您的 JVM，否则请避免使用 Java。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-17T02:15:30.597

假设您的移动应用程序的典型后端涉及一个或多个 REST API，并提供服务器端功能，例如用户身份验证、通信（例如聊天、消息传递）或持久性（例如游戏的排行榜或检索与地理位置相关的数据）。您基本上有您提到的两个选项，构建自己或使用后端即服务平台。

**建立自己（优点）：**

*   您保留所有IP
*   你有最好的定制水平

**建立自己（缺点）：**

*   如果您缺乏服务器端编码经验，那么学习曲线非常高

*   如果您需要更改某些内容或添加功能，则实施时间更长，并且更难快速迭代

*   如果您缺乏经验（例如安全漏洞、可靠性等），关键问题的风险会更高

*   系统部署后，您需要对其进行监控和维护。如果应用程序足够大，这可以成为一份全职工作

**后端即服务平台（专业人士）：**

*   启动和运行某些东西要快得多。如果您要推出新产品并想要验证市场，这将是一件大事

*   受益于构建平台的服务器端开发人员的多年经验

*   通常，平台会提供已经满足您需求的现成组件

*   运行和操作后端是服务的一部分，您无需担心。

*   如果您考虑时间投资，或者如果您聘请后端开发人员为您构建它，它实际上比自己实现它更便宜

*   它使您可以将精力和时间集中在客户端应用程序上，无论如何，这是您最有可能脱颖而出的地方

**后端即服务平台（缺点）：**

*   您的灵活性较低，具体取决于平台（有些比其他更好）

*   通常会产生经常性成本（尽管如果您自己构建它来运行服务器和数据库，也会产生一些成本）

*   提供者总是存在关闭的风险（如 Parse），而您只能争先恐后地寻找替代方案或自己重建它

现在有许多后端即服务平台可供选择。不幸的是，Parse 已不再是其中之一，已被 Facebook 收购并随后关闭[https://www.computerworld.com/article/3027537/application-development/facebook-is-closing-down-its-parse-developer -platform.html](https://www.computerworld.com/article/3027537/application-development/facebook-is-closing-down-its-parse-developer-platform.html)

如果您在服务器端没有太多经验，或者您的时间有限并希望将注意力集中在客户端应用程序上，我认为后端即服务平台是一个不错的选择。最大的好处之一是快速迭代。如果您意识到您的功能没有达到目标，您可以尝试一些东西并以相对较少的投资快速更改它。可以在此处找到后端服务提供商的一些示例[https://en.wikipedia.org/wiki/Mobile_backend_as_a_service](https://en.wikipedia.org/wiki/Mobile_backend_as_a_service)。

一些平台实际上允许您构建一个完整的自定义应用程序而无需实际编写任何代码，其中一些平台提供现成的组件（如聊天、排行榜等），但灵活性较差。

以下是后端即服务提供商的列表：

*   [http://pipegears.com](http://pipegears.com)（无需编码）
*   [https://www.appcelerator.com/](https://www.appcelerator.com/)
*   [https://cloudboost.io/](https://cloudboost.io/)
*   [http://api.shephertz.com/](http://api.shephertz.com/)
*   [https://backendless.com/](https://backendless.com/)
*   [https://quickblox.com/](https://quickblox.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:48:30.193

我参与了一个 iOS/Android 应用程序的开发。我们使用 java 编码的服务器作为在 Tomcat 7 上运行的 Web 服务，具有 mongoDB 数据库和用于通信的 JSON 解析。当然不是有史以来最好的解决方案，但它确实有效。

# javascript - jQuery：将字符串返回为 html

> ID：12408594
> 
> 赞同：0
> 
> 时间：2012-09-13T14:28:24.690
> 
> 标签：javascript, jquery

我的表单上有一个“标签”控件，它是通过 jquery 填充的。然而，我的问题是我需要返回带有 html 标签的字符串，但我的标签似乎无法识别 html。这是我的控制：

```
<label id="comment"></label> 
```

以下是我在 javascript 中使用它的方式：

```
var comment;
comment = $("#comment");
comment.text("<b>Please scan an <br/>item!</b>"); 
```

在上面的代码中，我的字符串中的 html 被忽略了。有什么方法可以让我的表单识别返回的 html 标签？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T14:29:25.980

使用[html](http://api.jquery.com/html/)函数：

```
comment.html("<b>Please scan an <br/>item!</b>"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T14:29:36.150

尝试`comment.html("<b>Please scan an <br/>item!</b>");`

你也可以使用`document.getElementById("comment").innerHTML = "<b>Please scan an <br/>item!</b>";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:30:24.370

```
comment.html("<b>Please scan an <br/>item!</b>"); 
```

# django - Django 错误 - 没有返回 HttpResponse 对象

> ID：12408595
> 
> 赞同：-1
> 
> 时间：2012-09-13T14:28:23.913
> 
> 标签：django, httpresponse

在我的主应用程序文件夹中，URLs.py 具有以下代码。

```
urlpatterns = patterns('',
    (r'^login/$', 'django.contrib.auth.views.login'),
    # (r'^catalog/$', home),
    (r'^static/(?P<path>.*)$', 'django.views.static.serve',
        { 'document_root' : 'C:/SHIYAM/Personal/SuccessOwl/SOWL0.1/SOWL/SOWL/static'}),
    # (r'^admin/', include('django.contrib.admin.urls')),
    (r'^catalog/', include('CATALOG.urls')),
    (r'^accounts/', include('registration.urls')),
    (r'^$', main_page),
) 
```

我有一个名为“CATALOG”的单独应用程序（文件夹），它的 URLs.py 具有以下代码：

```
urlpatterns = patterns('SOWL.catalog.views',
    (r'^$', 'index', { 'template_name':'catalog/index.html'}, 'catalog_home'),
    (r'^category/(?P<category_slug>[-\w]+)/$', 'show_category', {'template_name':'catalog/category.html'},'catalog_category'),
    (r'^product/(?P<product_slug>[-\w]+)/$', 'show_product', {'template_name':'catalog/product.html'},'catalog_product'),
    (r'^enter_product/$',enter_product),
) 
```

在目录文件夹下，我有 forms.py

```
from django import forms
from CATALOG.models import Product

class ProductAdminForm(forms.ModelForm):
    class Meta:
        model = Product

def clean_price(self):
    if self.cleaned_data['price'] <= 0:
        raise forms.ValidationError('Price must be greater than zero.')
    return self.cleaned_data['price']

class Product_Form(forms.Form):
    name = forms.CharField(label='name', max_length=30)
    slug = forms.SlugField(label='Unique Name for the URL', max_length=30)
    brand = forms.CharField(label='Unique Name for the URL', max_length=30)
    price = forms.DecimalField(label='Price',max_digits=9,decimal_places=2)
    old_price = forms.DecimalField(max_digits=9,decimal_places=2,initial=0.00)
    quantity = forms.IntegerField()
    description = forms.CharField()
    meta_keywords = forms.CharField(max_length=255)
    meta_description = forms.CharField(max_length=255)
    categories = forms.CharField(max_length=255)
    user = forms.IntegerField()

    prepopulated_fields = {'slug' : ('name',)} 
```

和views.py

```
from CATALOG.forms import *
def enter_product(request):
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create_user(
                username=form.clean_data['username'],
                password=form.clean_data['password1'],
                email=form.clean_data['email']
            )
            return HttpResponseRedirect('/')
        else:
            form = RegistrationForm()
        variables = RequestContext(request, {
            'form': form
        })

        return render_to_response(
            'catalog/enter_product.html',
            variables
        ) 
```

在“\templates\catalog”文件夹下，我有“enter_product.html”，其中包含以下代码：

```
{% extends "base.html" %}
{% block title %}blah{% endblock %}
{% block head %}blah{% endblock %}
{% block content %}
<form method="post" action=".">
{{ form.as_p }}
<input type="submit" value="Enter" />
</form>
{% endblock %} 
```

但是当我去 localhost:8000/catalog/enter_product/ 它说：

视图 CATALOG.views.enter_product 没有返回 HttpResponse 对象。

这是为什么？谢谢你的帮助。

*   多伦多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:30:48.383

你`return render_to_response...`的缩进在`if request.method == 'POST'`. 因此，如果它不是帖子，则视图函数不会返回任何内容。尝试将您的 return 语句取消缩进一级。

# actionscript-3 - Adobe Flash Player 设置不可点击

> ID：12408597
> 
> 赞同：3
> 
> 时间：2012-09-13T14:28:33.663
> 
> 标签：actionscript-3, flash, apache-flex

当我显示 Flash 播放器设置面板时，它不会响应任何点击。

```
Security.showSettings(SecurityPanel.CAMERA); 
```

我真的不知道我的云搞砸了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:41:16.450

在此处重新发布评论中的答案，以将其从未答复列表中删除。如果提问者或原始回答者 (Strille) 想要发布他们的答案而不是接受这个答案，那对我来说很好。（我不期待接受或任何东西。）

此问题是 Mac 上的一个已知[错误](http://helpx.adobe.com/x-productkb/global/known-issues-mac-os-10.html)，已通过将 Flash Player 更新到最新版本来修复。

[回答信用到 STRILLE]

# sql-server - 带有 IF 逻辑的 T-SQL 不适用于临时表

> ID：12408599
> 
> 赞同：3
> 
> 时间：2012-09-13T14:28:43.613
> 
> 标签：sql-server, tsql

```
IF OBJECT_ID('tempdb..#iftry') IS NOT NULL 
DROP TABLE #iftry

IF OBJECT_ID('BIC_Analytics.dbo.AdjudicateAllDCCharteredClaims') IS  NULL
begin
select 'this is start of first block'
 SELECT 'this is first block' as blockid
 INTO #iftry
select 'this is end of first block'
end

ELSE

begin
select 'this is start of 2nd block'
 SELECT 'this is 2nd block' as blockid
    INTO #iftry
select 'this is end of 2nd block'
end

select ':)'

select * from #iftry 
```

不断给我错误：

```
Msg 2714, Level 16, State 1, Line 18
There is already an object named '#iftry' in the database. 
```

现在它可以工作了

```
IF OBJECT_ID('tempdb..#iftry') IS NOT NULL 
DROP TABLE #iftry

create table #iftry (blockid varchar(20))

IF OBJECT_ID('BIC_Analytics.dbo.AdjudicateAllDCCharteredClaims') IS NOT NULL
begin
--select 'this is start of first block'
 insert into #iftry (blockid)
 select 'this is first block' 
--select 'this is end of first block'
end

ELSE

begin
--select 'this is start of 2nd block'
 insert into #iftry (blockid)
 select 'this is 2nd block' 
--select 'this is end of 2nd block'
end

select ':)'

select * from #iftry 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:34:55.097

这是一个解析问题，而不是运行时问题。SQL Server 看不到有两个无法访问的代码路径。

要解决此问题，请预先创建 #temp 表：

```
SELECT 'bogus' INTO #iftry
  WHERE 1 = 0; -- creates empty table

IF ...
  INSERT #iftry ...
ELSE ...
  INSERT #iftry ... 
```

没有办法告诉 SQL Server 不要以这种方式工作，除非您将两个 #table 声明放在不同的批次中（您实际上不能这样做），或者构建动态 SQL 并在该范围内使用 #temp 表（不好玩）。

# matlab - Matlab：使用 IMRECT 选择的 ROI 的实时绘图

> ID：12408601
> 
> 赞同：7
> 
> 时间：2012-09-13T14:28:50.300
> 
> 标签：matlab, plot, real-time, roi

我有一个带有两个轴的 GUI。第一个轴具有低分辨率图像。

我想做的是使用 IMRECT 在第一个轴上选择一个区域，然后将该区域显示为第二个轴上的高分辨率图像，同时在我移动 IMRECT 矩形时不断更新。

我能够做到这一点的唯一方法是使用带有 0.1 暂停的“for 循环”，当我选择并使用 IMRECT 更改 ROI 时，它只运行一两分钟，非常麻烦。

我的想法是使用一个在鼠标在第一个轴内移动时运行的函数，并在该函数中使用 ploting 和 getPosition 命令。但是，我不确定如何编写这样的函数（触发轴内的鼠标移动）。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T14:40:52.253

通常，您应该为您的`imrect`. 例如：

```
x = imrect();
x.addNewPositionCallback( @(x)(disp('The rect has changed'))) 
```

回调应该通过使用匿名函数来获取附加参数，例如图像和第二轴。

* * *

我写了一个小代码片段，可以满足你的要求。您应该添加边界检查，因为我没有打扰。当您移动矩形时，它会更新`CData`而不是运行`imshow`，因此非常平滑。

![图形用户界面](../Images/3bcfcdf2521a916e8d49e8a7b9c64a38.png)

```
function Zoomer
    figure();

    highResImage = imread('peppers.png');
    lowResImage = imresize(highResImage,0.5);

    a1 = subplot(2,1,1);
    a2 = subplot(2,1,2);

    imshow(lowResImage,'Parent',a1);
    initialPosition = [10 10 100 100];
    lowResRect = imrect(a1,initialPosition);

    lowResRect.addNewPositionCallback( @(pos)Callback(pos,a2,highResImage));

    Callback( initialPosition , a2, highResImage);
end

function Callback(position,axesHandle, highResImage)
    position = position * 2;
    x1 = position(1);
    y1 = position(2);
    x2 = position(1) + position(3);
    y2 = position(2) + position(4);

    highResThumbnail = highResImage( round(y1:y2),round(x1:x2),:);

    if isempty( get(axesHandle,'Children')) 
        imshow(highResThumbnail,'Parent',axesHandle);   
    else
        imHandle = get(axesHandle,'Children');
        oldSize = size(get(imHandle,'CData'));
        if ~isequal(oldSize, size(highResThumbnail))
            imshow(highResThumbnail,'Parent',axesHandle);
        else
            set( imHandle,'CData', highResThumbnail);
        end     
    end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T13:57:45.933

与@Andrey 的回复类似的功能，但有三个不同之处：

*   设置`axis`限制而不是`'CData'`（可能更快？）
*   由于. *_* _`'fit'` `'IniitalMagnification'`
*   添加*了 ConstraintFcn*

将会：

```
function imZ = Zoom(im, s)

f = figure;
a1 = subplot(1,2,1);
imshow(im,'InitialMagnification', 'fit');
a2 = subplot(1,2,2);
imshow(im,'InitialMagnification', 'fit');

Ipos = [0 0 s];
rect = imrect(a1,Ipos);
rect.setPositionConstraintFcn(@(p) Const(p,size(im)));
rect.addNewPositionCallback(@(p) CB(p,a2));
CB(Ipos,a2);

if nargout > 0
    uiwait(f);
    imZ = im(pm(2):pm(2)+pm(4),pm(1):pm(1)+pm(3),:);
end

    function p = Const(p,imS)
        p(1:2) = max(1,p(1:2));
        p(1:2) = min(imS([2 1])-p(3:4),p(1:2));
    end

    function CB(p,a)
        pm = round(p);
        axes(a);       
        axis([pm(1),pm(1)+pm(3),pm(2),pm(2)+pm(4)]);
    end
end 
```

可以称为：

```
Zoom(imread('peppers.png'),[100 100]); 
```

# java - Tomcat v7 将无法运行

> ID：12408609
> 
> 赞同：2
> 
> 时间：2012-09-13T14:29:22.510
> 
> 标签：java, eclipse, tomcat

我有一台 Windows 7 机器，我尝试将 tomcat 6 和 tomcat 7 作为 Windows 服务安装（使用可执行文件）。他们都不会跑。一个多星期以来，我一直在研究不同的解决方案，并且几乎尝试了所有方法，但我不断收到此错误：

```
Sep 13, 2012 10:19:46 AM org.apache.catalina.startup.Bootstrap initClassLoaders
SEVERE: Class loader creation threw exception
java.lang.UnsatisfiedLinkError: sun.management.VMManagementImpl.isThreadAllocatedMemoryEnabled()Z
    at sun.management.VMManagementImpl.isThreadAllocatedMemoryEnabled(Native Method)
    at sun.management.ThreadImpl.<init>(Unknown Source)
    at sun.management.ManagementFactory.getThreadMXBean(Unknown Source)
    at sun.management.ManagementFactory.createPlatformMBeanServer(Unknown Source)
    at java.lang.management.ManagementFactory.getPlatformMBeanServer(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.createClassLoader(Bootstrap.java:158)
    at org.apache.catalina.startup.Bootstrap.initClassLoaders(Bootstrap.java:91)
at org.apache.catalina.startup.Bootstrap.init(Bootstrap.java:227)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:426) 
```

当我尝试在 Eclipse 中运行它时。当我尝试通过单击启动服务器可执行文件自行运行它时，它开始加载并且大约四分之一的路径停止并且加载窗口消失并且没有错误消息或任何东西。我不确定还能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:53:13.093

例外是这样说的：

```
java.lang.UnsatisfiedLinkError:
      sun.management.VMManagementImpl.isThreadAllocatedMemoryEnabled()Z 
```

这就是说调用`isThreadAllocatedMemoryEnabled()`系统类中的本机方法`VMManagementImpl`失败，因为 JVM 找不到该方法的本机实现。

我能想到的唯一解释是您用于运行 Tomcat 的 Java 安装已损坏。

# visual-studio - Visual Studio 2012 Express 桌面版的限制

> ID：12408610
> 
> 赞同：77
> 
> 时间：2012-09-13T14:29:23.663
> 
> 标签：visual-studio, visual-studio-2012, desktop

我正在决定是否使用 Visual Studio 2012 Express for Desktop 或为我的桌面程序购买 Visual Studio 2012 Professional 的零售副本。该程序是使用 C# 构建的，尽管它的某些部分可能包含 F#。

从我目前收集到的信息来看，速成版支持 NuGet、单元测试和代码分析。它提到使用了代码分析规则的子集，但我不确定它们与专业版以及 FxCop/StyleCop 相比如何。

我假设快速版缺少扩展支持，但我真正关心的唯一扩展是 NuGet。我还假设它不包含 TFS CAL，尽管它能够连接到 TFS。这又不是问题，因为我使用 Perforce 进行源代码控制。我也知道这个版本仅限于桌面风格的应用程序，但到目前为止只看到提到 C++ 和 C#。它支持F#吗？

有人能告诉我 2012 Express for Desktop 的任何其他限制吗？开发商业应用程序是否有任何许可限制？

过去，MS 将速成版作为其版本比较的一部分。但当他们在 2012 年更新网站时，他们将特快版分开，几乎没有提供任何细节。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-07T05:44:27.823

我可以收集到的限制很少：首先，有不同的 IDE 用于不同的用途

*   适用于 Web 的 Visual Studio Express 2012。
*   适用于 Windows 8 的 Visual Studio Express 2012
*   适用于 Windows 桌面的 Visual Studio Express 2012。
*   Visual Studio 团队基础服务器速成版 2012

**IDE 的 Express 版本省略了 Professional 版本中包含的以下功能**

*   多单元测试框架和重构支持

*   静态代码分析、分析和 HLSL 编辑和调试

*   第三方可扩展性支持（尽管 Extension Manager 功能仍然存在）

*   OpenMP 支持

但我在 2012 年探索的积极因素很少：与以前的版本不同

*   允许解决方案，您可以在单个解决方案中创建多个项目。
*   有 64 位编译支持。

如果在一个人或少于 5 人的团队中工作，快递是要走的路。它肯定比它的前辈带来了更多的新功能和解锁功能。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-16T18:47:48.433

当您注册后收到产品密钥时，我认为它确认您可以随意使用 VS 2012 Express。

[http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)说：

> “安装后，您最多可以试用此产品 30 天。您必须注册以获得免费的产品密钥，以便在 30 天后继续使用。”

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-25T15:56:56.893

[VS2012 Express 版本无法安装“Productivity Power Tools 2012”](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd?SRC=Home)，因此无法使用“Entity Framework Reverse Engineer Code First”等功能，这对于将现有应用程序的 DB 迁移到 Model 的类中至关重要。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-13T06:27:57.300

Express 版本不支持可移植类库。（您可以引用 PCL dll，只是不能使用 PCL 项目。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T21:22:56.340

F# 适用于 VS Express 2012 for Web

[http://blogs.msdn.com/b/fsharpteam/archive/2012/09/12/announcing-the-release-of-f-tools-for-visual-studio-express-2012-for-web.aspx](http://blogs.msdn.com/b/fsharpteam/archive/2012/09/12/announcing-the-release-of-f-tools-for-visual-studio-express-2012-for-web.aspx)

看起来 NuGet 与 VS 2010 Express Web 一起使用，所以我希望它与 2012 一起使用

[http://docs.nuget.org/docs/start-here/nuget-faq](http://docs.nuget.org/docs/start-here/nuget-faq)

Professional 为您提供了大量的分析和静态分析工具。我不知道 FxCop 规则有何不同。

# c# - Process.Kill() 需要什么权限？

> ID：12408612
> 
> 赞同：2
> 
> 时间：2012-09-13T14:29:26.233
> 
> 标签：c#, .net, windows, permissions

我是否认为如果一个程序以用户身份运行，并且该程序试图杀死由同一用户启动的另一个进程，这会成功吗？并且用户需要在管理员组中才能杀死任何其他进程（包括 SYSTEM 等）？

我错过了什么吗？我错/对了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:15:09.050

这些文章[Process.Kill() 的权限](http://bytes.com/topic/c-sharp/answers/225197-permissions-process-kill)和[提示 13：使用 C# 杀死进程，从本地到远程](http://weblogs.asp.net/stanleygu/archive/2010/03/31/tip-13-kill-a-process-from-local-to-remote.aspx)我相信这将有助于测试您的假设。

**** 编辑 ****

这些文章中的重要信息如下（以防链接失效）：

```
using System.Management;
using System.Management.Instrumentation;

ManagementScope scope = new ManagementScope("\\\\RemoteMachineName\\root\\cimv2");
scope.Connect();

ObjectQuery query = new ObjectQuery("SELECT * FROM Win32_Process WHERE Name='ProcessName'");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);

ManagementObjectCollection objectCollection = searcher.Get();
foreach(ManagementObject managementObject in objectCollection)
{
   managementObject.InvokeMethod("Terminate", null);
} 
```

# css - 如何为不同类型的控件赋予相同的维度

> ID：12408618
> 
> 赞同：0
> 
> 时间：2012-09-13T14:29:48.213
> 
> 标签：css

我在每一行都有一系列控件（下拉列表、文本框、按钮......）。我希望它们具有相同的高度。唯一的问题是我需要手动调整每个元素的高度，因为 Dropdownlist 的 25px 似乎与文本框的 25px 不同。例如，文本框总是更大。有没有通用的方法来做到这一点？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:33:44.467

您可以将以下内容应用于您尝试调整大小的所有元素：

```
.box-model {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box; 
    box-sizing: border-box;
    height:32px;
} 
```

这将使它们（包括选择框）遵守您定义的规则。这在旧版本的 IE 中不起作用。IE6 和 7 在样式选择框和输入字段方面出了名的糟糕，并且不支持上述 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T16:30:53.327

```
input, textarea, select, select>option { width:150px; height:50px; line-height:50px;} 
```

# java - 在 OSGi 中为 javax.tools.JavaCompiler 生成类路径的最终方法

> ID：12408624
> 
> 赞同：3
> 
> 时间：2012-09-13T14:30:01.723
> 
> 标签：java, compiler-construction, classpath, osgi

[澄清] 请原谅最初描述中缺乏明确性。请允许我重新表述这个问题。

是否存在使用 API 执行*运行时*编译的方法`javax.tools`，可用于 OSGi（再次强调*运行时*），它了解包的依赖关系和安全约束？

[更新] 请看[https://github.com/rotty3000/phidias](https://github.com/rotty3000/phidias)

这是一个结构良好的 OSGi 包。自述文件提供了非常小的 4 类 API（8k 模块）的所有细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:31:02.410

到目前为止，我发现真正的答案是“不，没有！”

当前用于 java 的主要运行时编译方案是 JSP 编译。对我有机会审查的应用服务器的调查使用以下方法之一：

*   调用`javac`（通过系统调用）
*   使用 ecj/jdt
*   以`javax.tools`非 OSGi 感知方式使用

所有这些方法都基于通过直接内省文件系统中的 jar 或类来收集可用的类路径。

当前的方法都没有意识到 OSGi 的特性，例如环境的动态特性或框架本身施加的底层限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T09:22:53.543

为了从一组包导入和导出中获取可用于编译的包列表，您需要某种候选包的[存储库](https://stackoverflow.com/questions/4868616/osgi-obr-repository-hosting)，以及一个[配置](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.osgifep.multiplatform.doc%2Ftopics%2Fca_provis.html)器来确定哪些包最好地提供哪些包。如果您使用“Require-Bundle”（[不是最佳实践](http://wiki.osgi.org/wiki/Use_Import-Package_instead_of_Require-Bundle)），您会知道捆绑包名称，但不一定知道版本，因此仍然需要一些配置。

例如，在 Eclipse PDE 中，[目标平台](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fconcepts%2Ftarget.htm)用作编译的基本存储库。您还可以做更复杂的事情，例如使用[Eclipse 的 p2 供应](http://nirmalsasidharan.wordpress.com/2010/10/09/provisioning-your-target-platform-as-local-p2-site/)来供应您的目标平台，因此您可以使用外部 p2 存储库作为您的存储库，而不是自己设置一个。对于命令行构建，[Tycho](http://www.eclipse.org/tycho/)允许 Maven 构建使用与 Eclipse 本身使用的相同类型的机制来解析类路径。

另一种方法是将您的“类路径”列为 Maven 依赖项，并让[maven 捆绑插件](http://www.google.com/url?sa=t&rct=j&q=maven%20bundle%20plugin&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http%3A%2F%2Ffelix.apache.org%2Fsite%2Fapache-felix-maven-bundle-plugin-bnd.html&ei=IkhUULPxI9Cp0AWB8oHgDw&usg=AFQjCNE3O6-6F1JJFQkQpC5MahM3HuGsXA)（基于[bnd](http://www.google.com/url?sa=t&rct=j&q=osgi%20bnd&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http%3A%2F%2Fwww.aqute.biz%2FCode%2FBnd&ei=E0hUUK7SCaml0QWJpYDgDw&usg=AFQjCNGqpTts8YXJj7R21XSC2Ay8lpLUXQ)）为您生成清单。

如果您因为以编程方式编译而无法利用现有的命令行工具（从您的问题中并不能完全清楚您要解决什么问题），那么最好的办法可能是利用现有的配置技术，像 OBR、Eclipse p2 或 Apache Ace 来计算应该在类路径上进行编译的包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T21:46:23.457

当然可以，您只需要编写一个自定义 JavaFileManager，它将提供正确的类来编译 JavaCompiler。

例如，您可以编写一个从 OSGi 运行时获取其类的程序。如果您不介意将编译器捆绑包依赖于所需的库，那么这很容易，否则您也可以使用[接线 api](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/wiring/BundleWiring.html)来查看其他捆绑包。（仅限 OSGi 4.3+）。如果在编译时拦截它请求的包，则可以生成 Package-Import 语句，以便生成包。

几个月前我做了一个粗略的 GitHub 示例：

[https://github.com/flyaruu/test-dynamic-compiler](https://github.com/flyaruu/test-dynamic-compiler)

有一些问题（例如，我无法让 Eclipse ecj 编译器工作，我根本没有研究包安全性，并且由于 OSGi 的动态特性，您必须听取包更改以更新编译路径.)，但它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T12:15:51.740

这正是我们在 bndtools 中所做的……如果我有一点时间，我会在 bnd 中添加一个编译器，这样它也可以做到这一点。

# c++ - 这个静态模板函数的实现有什么问题？

> ID：12408632
> 
> 赞同：2
> 
> 时间：2012-09-13T14:30:36.163
> 
> 标签：c++, templates, static

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我正在学习模板功能。我正在尝试实现一个清除指针列表的静态模板函数。为此，我想使用模板。它是我的代码：

```
#include <cstdio>
#include <list>
using namespace std;

class util
{
public:
    template <class ARG>
    static void CleanPointers(list<ARG> &mylist) {
        list<ARG>::iterator it;
        for (it = mylist.begin(); it != mylist.end(); it++)
        {
            ARG obj = (ARG) *it;
            delete obj;
        }
        mylist.clear();
    };

    util();
    ~util();
};

int main()
{
    list<int*> mylist;
    mylist.push_back(new int(1));
    mylist.push_back(new int(2));
    util::CleanPointers<int*>(mylist);
    return 0;
} 
```

我收到了以下编译错误消息，但我不明白这里有什么意义。:) 为什么需要我放；之前呢？

```
prog.cpp: In static member function ‘static void util::CleanPointers(std::list<ARG,         std::allocator<_Tp1> >&)’:
prog.cpp:10: error: expected `;' before ‘it’
prog.cpp:11: error: ‘it’ was not declared in this scope
prog.cpp: In static member function ‘static void util::CleanPointers(std::list<ARG,     std::allocator<_Tp1> >&) [with ARG = int*]’:
prog.cpp:28:   instantiated from here
prog.cpp:10: error: dependent-name ‘std::list::iterator’ is parsed as a non-type,   but instantiation yields a type
prog.cpp:10: note: say ‘typename std::list::iterator’ if a type is meant 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:31:56.307

需要类型名，因此：

```
typename list<ARG>::iterator it; 
```

不过，这并不是代码的唯一错误。为什么在删除之前要转换为 int ？当它不是指向整数的指针集合时，这是一个糟糕的错误。如果您打算这样做，您应该通过正确的指针类型进行删除。

此外，您可以进行部分专业化，因为 ARG 必须是指针类型。

[关于模板的 C++ 常见问题解答](http://www.parashift.com/c++-faq/templates.html)。我建议阅读所有这些。

另请参阅有关强制转换为何邪恶的常见问题解答，它也可能解释删除会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:32:02.860

[从属名称](http://womble.decadent.org.uk/c++/template-faq.html#dependent)：

```
typename list<ARG>::iterator it; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:32:52.570

`list<ARG>::iterator`是依赖类型：

```
typename list<ARG>::iterator it; 
```

请参阅[在哪里以及为什么必须放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:35:02.030

我认为您的主要错误是在某处定义 var 'it' 的类型。在错误 10 之后，所有编译器错误都是垃圾，因为编译器尝试使用非类型 var 完成 for 循环。

# magento - 每次我运行导入时，magento 都会注销

> ID：12408634
> 
> 赞同：0
> 
> 时间：2012-09-13T14:30:40.890
> 
> 标签：magento

每次我在 Magento 中运行导入配置文件大约 2 到 3 分钟后，它都会将我注销。我检查了 apache 错误日志，这是导致注销的原因：

*   *   [13/Sep/2012:14:58:41 +0100]“POST /index.php/admin/system_convert_gui/batchRun/key/151d60f07b9e68b0023da294f315c3cc/?isAjax=true HTTP/1.1”200 52
*   *   [13/Sep/2012:14:58:42 +0100]“POST /index.php/admin/system_convert_gui/batchRun/key/151d60f07b9e68b0023da294f315c3cc/?isAjax=true HTTP/1.1”200 52
*   *   [13/Sep/2012:14:58:44 +0100]“POST /index.php/admin/system_convert_gui/batchRun/key/151d60f07b9e68b0023da294f315c3cc/?isAjax=true HTTP/1.1”200 148
*   *   [13/Sep/2012:14:58:44 +0100]“GET /index.php/admin/index/login/key/70f0f08a622f871979b3890c5f769bf4/HTTP/1.1”200 1001

在系统日志中我得到：

2012-09-13T14:13:00+00:00 调试 (7)：无法发送标头；标头已在 /var/www/vhosts/httpdocs/app/code/core/Mage/Adminhtml/Block/System/Convert/Profile/Run.php 中发送，第 278 行

2012-09-13T14:13:00+00:00 调试（7）：标头已发送：[0] /var/www/vhosts/httpdocs/app/code/core/Mage/Core/Controller/Response/Http。 php:44

异常日志中没有任何内容。我已经研究了已发送的标头问题，但没有解决此问题。任何建议将不胜感激。

Magento 版本 1.4.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:32:18.593

这是一个烦恼。我在任何导入/导出过程中都在 ee 1.8 上得到它，该过程计算处理的项目。我通过在抛出错误的那一行之前添加 ob_start() 来解决它。我意识到我应该重写该功能，但我使用的是旧版本，很快就会升级。希望这在 1.12 中得到修复

# asp.net - 无法从数据库获取数据到登录视图中的下拉列表

> ID：12408639
> 
> 赞同：0
> 
> 时间：2012-09-13T14:30:50.163
> 
> 标签：asp.net, vb.net, ms-access, ado.net

我在 aspx 页面上有这段代码。

```
<asp:DropDownList runat="server" ID="ddlSize" CssClass="textbox" Width="100px">
<asp:ListItem Value="" Text="" />
<asp:ListItem Value="11" Text="11\. Mands" />
<asp:ListItem Value="7" Text="7\. Mands" />
<asp:ListItem Value="" Text="Ikke Kamp"/>
</asp:DropDownList>

 <asp:DropDownList runat="server" ID="ddlType" CssClass="textbox" Width="100px">
 <asp:ListItem Value="" Text="" />
 <asp:ListItem Value="K" Text="Kamp" />
 <asp:ListItem Value="T" Text="Træning" />
 <asp:ListItem Value="E" Text="Aktivitet"/>
 </asp:DropDownList> 
```

ts 在带有其他字段（文本框）的登录视图中我试图将记录 id 放入页面中以便我可以编辑它，我已经使用文本框修复它并且它的工作 100%，但我无法从数据库中获取值到下拉列表，因此它显示该值被选中。我已经尝试了这 3 个代码，但下拉列表没有任何效果。

```
// DataValueField               
Dim drop_obj As DropDownList = TryCast(LoginView2.FindControl("ddlSize"), DropDownList)
drop_obj.DataValueField = dtEvents.Rows(0)("EventEventSize")

Dim drop_obj2 As DropDownList = TryCast(LoginView2.FindControl("ddlType"), DropDownList)
drop_obj2.DataValueField = dtEvents.Rows(0)("EventType")

// SelectedIndex
Dim drop_obj As DropDownList = TryCast(LoginView2.FindControl("ddlSize"), DropDownList)
drop_obj.SelectedIndex = dtEvents.Rows(0)("EventEventSize")

Dim drop_obj2 As DropDownList = TryCast(LoginView2.FindControl("ddlType"), DropDownList)
drop_obj2.SelectedIndex = dtEvents.Rows(0)("EventType")

// SelectedValue
Dim drop_obj As DropDownList = TryCast(LoginView2.FindControl("ddlSize"), DropDownList)
drop_obj.SelectedValue = dtEvents.Rows(0)("EventEventSize")

Dim drop_obj2 As DropDownList = TryCast(LoginView2.FindControl("ddlType"), DropDownList)
drop_obj2.SelectedValue = dtEvents.Rows(0)("EventType") 
```

有人可以吗？帮助 ！？我在 2 dtEvents.Rows(0) 中有值，我已经检查过，通过调试然后单步执行。我得到像 7 或 11 和 T 或 K 这样的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:35:08.123

我认为您正在尝试将您的表格日期绑定到您的列表。

您想利用这两个属性：

```
DataTextField
DataValueField 
```

因此，您希望将您的`DataTextField`（用户将看到的）设置为包含显示文本的列，然后将您的`DataValueField`（将不会看到的项目的值）设置为包含该列的列。然后你想打电话`DataBind()`。

例如（我的VB很生锈）：

```
Dim myDDL AS DropDownList();

myDDL.DataTextField = myTable("ColumnDataUserSees")
myDDL.DataValueField = myTable("ColumnDataIWillUse")
myDDL.DataBind() 
```

绝对检查该语法。我已经使用 C# 几个月了，但没有使用 VB，所以这可能不是 100%。

# c# - Microsoft.TeamTest.targets 中的 MSBuild NullReferenceException

> ID：12408641
> 
> 赞同：5
> 
> 时间：2012-09-13T14:30:52.507
> 
> 标签：c#, msbuild, windows-server-2008-r2

在 TFS 2010 上，我还配置了一些运行 MSTest 单元测试的 CI 构建。这工作正常，除了一个解决方案，我*通常*（但不总是）得到以下*构建*（不是测试运行器）错误：

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\TeamTest\Microsoft.TeamTest.targets (14)：对象引用未设置为对象的实例。

`Logging Verbosity`构建定义的 设置为`Diagnostic`。[一些 social.msdn.com 帖子](http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/bb0a1752-f6ce-4001-8b45-5aa72f1909e3)建议这样做是为了摆脱这个非常偶然的错误。顺便说一句，如果它是偶然的，我们可以通过安排另一个构建来解决它，如果它由于上述原因而被破坏。然而，它不是，而且也需要相当长的时间来构建。

即使它是构建错误，也可以通过设置为 来`Disable Tests`修复`True`。但是，我确实想运行测试。有人知道如何解决这个问题吗？其他（工作）解决方案通常`All Projects`是项目的子集。`All Project`是一个相当大的解决方案。

我在这里有缩短的 MSBuild 输出，以防万一：

```
Run MSBuild for Project
Initial Property Values
AdditionalVCOverrides =
CommandLineArguments = /p:SkipInvalidConfigurations=true
Configuration = Release
GenerateVSPropsFile = True
LogFile =
LogFileDropLocation =
MaxProcesses = 1
OutDir = All Projects-CI\Binaries\Release
Platform = Any CPU
Project = All Projects-CI\Sources\Shared\All Projects.sln
ResponseFile =
RunCodeAnalysis = AsConfigured
Targets =
TargetsNotLogged = String[] Array
ToolPath =
ToolPlatform = Auto
Verbosity = Diagnostic
Built $/.../DataAccessLayer.Testing.csproj for default targets.

C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\TeamTest\Microsoft.TeamTest.targets (14): Object reference not set to an instance of an object. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T16:29:13.923

MSBuild\Microsoft\VisualStudio\v10.0\TeamTest\Microsoft.TeamTest.targets 中的 BuildShadowTask 自定义任务导致错误。禁用测试时看不到错误的原因是，禁用测试时此构建任务不会运行。

建议添加 MsBuild Message 任务以输出各种值，以确定是哪一个导致“对象引用未设置为对象的实例”错误。

在此行之前：

```
 <BuildShadowTask
        ExecuteAsTool="False"
        CurrentResolvedReferences="@(ReferencePath)"
        CurrentCopyLocalFiles="@(ReferenceCopyLocalPaths)"
        Shadows="@(Shadow)"
        ProjectPath="$(ProjectDir)"
        IntermediatePath="$(IntermediateOutputPath)"
        SignAssembly="$(SignAssembly)"
        KeyFile="$(AssemblyOriginatorKeyFile)"
        DelaySign="$(DelaySign)"> 
```

添加 Message 任务以输出传递给 BuildShadowTask 的每个参数的值，以确定哪个参数出错：

```
 <Message Text="AssemblyOriginatorKeyFile $(AssemblyOriginatorKeyFile)" Importance="High" /> 
```

# c# - 文件下载弹出窗口覆盖警报弹出窗口

> ID：12408644
> 
> 赞同：0
> 
> 时间：2012-09-13T14:30:57.837
> 
> 标签：c#, javascript, asp.net

当用户点击“导出到 Excel”链接时，标准的“文件下载”对话框会呈现给用户。[有关示例图像，请参见此处](http://i.imgur.com/bsXM9.jpg)。

但在导出 excel 文件之前，我想显示一个警报弹出窗口。但是“保存”对话框遮挡了警报弹出窗口的视图。

如何在不被遮挡的情况下显示弹出窗口？

这是我的代码...

```
dsResult = clsObj.getSearchResults_BL(detObj);

if (OrdDifference != null && OrdDifference.Any())
{
   ScriptManager.RegisterClientScriptBlock(this.up, this.GetType(), "export", "alert('.....')", true);
   set(dsResult, strName);
}
else
{
  set(dsResult, strName);
}

private void set(DataSet ds, string strFileName)
{
    ExcelEngine excelEngine = new ExcelEngine();
    IApplication application = excelEngine.Excel;
    application.DefaultVersion = ExcelVersion.Excel2007;
    IWorkbook workbook = application.Workbooks.Create(1);
    IWorksheet sheet = workbook.Worksheets[0];
    try
    {
        sheet.Name = strFileName;
        sheet.ImportDataTable(ds.Tables[0], true, 1, 1, -1, -1);

        ...

        workbook.SaveAs(strFileName, ExcelSaveType.SaveAsXLS, HttpContext.Current.Response, ExcelDownloadType.PromptDialog);

    }
    catch (Exception ex)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:12:47.120

你的问题在这里：

```
ScriptManager.RegisterClientScriptBlock(this.up, this.GetType(), "export", "alert('.....')", true);
set(dsResult, strName); 
```

因为`set`程序中的方法正在写入响应流，所以调用`ScriptManager.RegisterClientScriptBlock`最终什么都不做。

您需要通过两个步骤执行此操作：

```
if (OrdDifference != null && OrdDifference.Any())
{
   //Just do this, nothing more.
   ScriptManager.RegisterClientScriptBlock(this.up, this.GetType(), "export", "alertUser('Some Message Here')", true);

} 
```

现在`alertUser`在 Javascript 中定义函数：

```
function alertUser(message)
{
    alert(message);
    window.location='AccepServiceOrder.aspx?o=Export';
} 
```

现在`Page_Load`检查`o`查询字符串中的参数

```
protected void Page_Load(object sender, EventArgs e)
{
     if(Request.QueryString["o"]!=null)
     { 
        dsResult = clsObj.getSearchResults_BL(detObj);
         set(dsResult, strName);
     }
} 
```

# php - 如何在多线程中使用 php curl？

> ID：12408648
> 
> 赞同：0
> 
> 时间：2012-09-13T14:31:09.707
> 
> 标签：php, multithreading, wordpress, curl

如何使此脚本与多线程一起使用？已经尝试了所有教程但没有成功:( 我可以使用 curl php 的最大线程数是多少？

> ```
> <?php
> $imput  = file("$argv[1]");
> $output = $argv[2];
> 
> foreach ($imput as $nr => $line) {
> $line = trim($line);
> print ("$nr - check :" . $line . "\r\n");
> 
> $check = ia_continutul($line); 
> 
> if (strpos($check,'wordpress') !== false) {
> 
>   $SaveFile = fopen($output, "a");
>   fwrite($SaveFile, "$line\r\n");
>   fclose($SaveFile);
>   }
> }
> print "The END !\r\n";
> 
> function ia_continutul($url) {  
>     $ch = curl_init();  
>     $timeout = 3;  
>     curl_setopt($ch,CURLOPT_URL,$url);  
>     curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);  
>     curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
>   curl_setopt($ch, CURLOPT_TIMEOUT, 5);  
>     $data = curl_exec($ch);  
>     curl_close($ch);  
>     return $data;  
> }
> ?> 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T18:03:42.953

您可以在 PHP 中使用多线程...

```
class Check extends Thread {
    public function __construct($url, $check){
        $this->url = trim($url);
        $this->check = $check;
    }
    public function run(){
        if (($data = file_get_contents($this->url))) {
            if (strpos($data, "wordpress") !== false) {
                return $this->url;
            }
        }
    }
}
$output = fopen("output.file", "w+");
$threads = array();
foreach( file("input.file") as $index => $line ){
    $threads[$index]=new Check($line, "wordpress");
    $threads[$index]->start();
}
foreach( $threads as $index => $thread ){
    if( ($url = $threads[$index]->join()) ){
    fprintf($output, "%s\n", $url);
    }
} 
```

[https://github.com/krakjoe/pthreads](https://github.com/krakjoe/pthreads)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-13T15:34:55.473

你不能多线程 PHP。它是一种脚本语言，因此脚本以特定顺序运行，如果您必须等待 curl 完成，它将在发生这种情况时继续加载，就像在代码中放置一个 Sleep(1) 函数一样。

您可以做一些基本的事情来帮助加速您的代码。不要在循环中执行 mysql 请求（我没有看到任何请求），而是建立一个查询，然后在循环结束后执行它。看看重组你的代码，这样你就可以做最少数量的卷曲，所以它运行得很快。尝试找到一种在循环外进行卷曲的方法。

# c# - 在哪里存储 AES 密钥？

> ID：12408649
> 
> 赞同：13
> 
> 时间：2012-09-13T14:31:11.403
> 
> 标签：c#, asp.net, asp.net-mvc, cryptography, aes

我正在使用 ASP.NET MVC 创建一个 Web 应用程序，并且我想将一些密码存储到数据库中。

密码必须是可恢复的。（它们不适合我自己，我需要密码才能与需要真实密码的 API 进行通信）所以我不能使用哈希算法等。

我发现这`AES`对我来说是一个很好的加密算法。

但是，问题是：在哪里存储 AES 密钥？收纳在`appsettings`里面`web.config`够吗？如何使密钥更难找到（对于黑客）？

下一个问题：有什么想法可以让这个系统更安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:32:57.617

可以加密 .config 文件的部分。 [这是有关该主题的 msdn 文档](http://msdn.microsoft.com/en-us/library/zhhddkxy%28v=vs.100%29.aspx)，尽管您也可以在线找到其他演练。

# networking - 如何让平板电脑设备访问独立的笔记本电脑网络服务器？

> ID：12408652
> 
> 赞同：1
> 
> 时间：2012-09-13T14:31:20.893
> 
> 标签：networking, webserver, tablet, wampserver, wireless

我需要演示一个新网站，但在互联网访问不确定的环境中。现场访问者将使用平板设备浏览该网站。我的想法是在运行 WAMP 的 Windows 7 笔记本电脑上本地创建该站点的副本。

如何在笔记本电脑和平板电脑之间建立适当的连接，以便用户能够浏览该网站？例如，我可以在笔记本电脑上运行蓝牙，但诀窍是启用网络浏览而不是文件共享。

谢谢！

保罗·坎尼夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:35:04.613

如果两台设备在同一个网络中，您只需找出笔记本电脑的 IP 地址，然后在平板电脑的浏览器中输入此地址，例如`http://192.168.0.2`.

# javascript - 声纳 - 始终为 if/else/for/while/do 语句使用花括号

> ID：12408654
> 
> 赞同：2
> 
> 时间：2012-09-13T14:31:23.153
> 
> 标签：javascript, sonarqube

所以，我用声纳分析了我的项目，我得到了这个奇怪的错误：`Always use curly braces for if/else/for/while/do statements`我通常知道这是什么意思（而且我不会创建没有花括号的块）但在这种情况下很奇怪：错误主要出现在这种类型的代码（使用 && 或 || 时），我想知道为什么：

```
if (isCreate && latitude && longitude) {
    ...some code here...
} 
```

编辑：

整个代码：

```
var map = Ext.getCmp('map_canvas').getMap();

    var latitude = Ext.getCmp('latitudeCmp').getValue();
    var longitude = Ext.getCmp('longitudeCmp').getValue();

    if (isCreate && latitude && longitude) {
        var center = new google.maps.LatLng(latitude, longitude);
        map.setCenter(center);
        var marker = new google.maps.Marker({ position: center, map: map,icon: staticPath+'/images/residence_gMap.png'});
        markersArray.push(marker);
    } else if (latitude && longitude) {
        var center = new google.maps.LatLng(latitude, longitude);
        map.setCenter(center);
    } else if (!latitude && !longitude) {
        var siteEditAction = Seam.Component.getInstance('siteEditAction');
        siteEditAction.getGeolocalizationParameters(fillMapParamsCallback, exceptionHandler);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:40:01.003

这可能是 Sonar Javascript 插件中的错误。您能否在 user@sonar.codhaus.org 邮件列表上报告您的案例：我们的语言团队将查看它，并可能在我们的 JIRA 上填写问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:22:33.700

正如我在声纳邮件列表 ( [http://markmail.org/message/dva7u5pxtggsiz7x](http://markmail.org/message/dva7u5pxtggsiz7x) ) 中回答的那样：您面临以下两个问题，这将在下一个版本中修复 - [http://jira.codehaus.org/browse/SONARPLUGINS- 2079](http://jira.codehaus.org/browse/SONARPLUGINS-2079)和 [http://jira.codehaus.org/browse/SONARPLUGINS-2200](http://jira.codehaus.org/browse/SONARPLUGINS-2200)

# html - Web 浏览器自动化 选择链接

> ID：12408655
> 
> 赞同：-1
> 
> 时间：2012-09-13T14:31:26.313
> 
> 标签：html, vb.net, anchor

`<a>`是否可以在我的表单中从嵌入式 webBrowser 中加载的 HTML 文档中随机单击？我正在使用 VB.net

我很麻烦。我已经设法让 Webbrowser 导航到我想要的页面，现在我希望它使用页面元素调用。

这就是奇怪的地方，对不起。

我有一个 url 的富文本框（这些 URL 是用户输入的，并且与我已经导航到的页面上的链接相匹配。）

我想从richtextbox中随机选择一个url（最多10行），然后`href=`在页面上找到并调用`<a>`

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:50:20.043

WebBrowser.Document 不提供良好的 Intellisense，但此时您可以使用所有可用的 dom 函数...（例如 getElementsByTag(string); ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:41:38.163

如果我理解正确，您拥有加载了当前页面的 webBrowser 控件，并且您想从文本框中选择要导航到的链接。

所以你有 WebBrowser.Document.Body.InnerHtml 属性，你有加载文档的 HTML，所以我想你可以搜索它以匹配来自文本框的输入和来自 href 的 url 调用 Navigate 方法。

希望有帮助

# javascript - Javascript-使用单个函数而不是多个

> ID：12408661
> 
> 赞同：1
> 
> 时间：2012-09-13T14:31:54.327
> 
> 标签：javascript, function

这里的代码：

```
 <script type="text/javascript">

   function ChangeColor1()
   {
    t1.style.backgroundColor = 'pink';
    t2.style.backgroundColor = '';
    t3.style.backgroundColor = '';

   }

    function ChangeColor2()
    {

    t1.style.backgroundColor = '';  
    t2.style.backgroundColor = 'pink';
    t3.style.backgroundColor = '';

    }

    function ChangeColor3()
    {

    t1.style.backgroundColor = '';
    t2.style.backgroundColor = '';
    t3.style.backgroundColor = 'pink';

        }
        </script>

        </head>
        <body>

        <table width="50%" border="1" >

        <tr id="t1" onclick="ChangeColor1();">
        <td>1</td>
        <td>2</td>
        <td>3</td>
        </tr>

        <tr id="t2" onclick="ChangeColor2();">
    <td>4</td>
    <td>5</td>
    <td>6</td>
    </tr>

     <tr id="t3" onclick="ChangeColor3();">
    <td>7</td>
    <td>8</td>
    <td>9</td>
    </tr>
    </table>
    </body> 
```

在这个程序中使用了 3 个函数。我想使用一个函数而不是一个函数来完成这项任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:34:53.407

```
function changeColor(n){
  t1.style.backgroundColor = n == 1 ? 'pink' : '';
  t2.style.backgroundColor = n == 2 ? 'pink' : '';
  t3.style.backgroundColor = n == 3 ? 'pink' : '';
}

... onclick="changeColor(1)" ... 
```

将是我将如何重构它。`var ts = [t1,t2,t3]`或者更好的是制作一个then 引用的数组`ts[n]`。

```
var ts = [t1,t2,t3];
function changeColor(n){
  for (var i = 0; i < ts.length; i++){
    ts[i].style.backgroundColor = (i+1) == n ? 'pink' : '';
  }
} 
```

或者你可以直接引用id：

```
function changeColor(n){
  for (var i = 1; i < 4; i++){
    document.getElementById('t'+i).style.backgroundColor = n == i ? 'pink' : '';
  }
} 
```

您还可以更进一步并引用行本身，而不是将索引指定为参数（保持通用）：

```
function changeColor(t){
  for (var n = 1; n < 4; n++){
    var tn = document.getElementById('t'+n);
    tn.style.backgroundColor = tn.id == t.id ? 'pink' : '';
  }
}

... onclick="changeColor(this);" ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:34:57.157

[演示](http://jsfiddle.net/mplungjan/DXXSv/)

**注意：**并非所有浏览器都会接受没有 document.getElementById 的 t1.style

```
function ChangeColor(row) {
  var idx=row.id;
  for (var i=1;i<=3;i++) {
    document.getElementById("t"+i).style.backgroundColor = (idx==="t"+i)?"pink":""; 
  }
} 
```

使用

```
<tr id="t1" onclick="ChangeColor(this);">
<tr id="t2" onclick="ChangeColor(this);">
<tr id="t3" onclick="ChangeColor(this);"> 
```

# c# - 获取特定版本的 TFS API

> ID：12408666
> 
> 赞同：3
> 
> 时间：2012-09-13T14:32:07.360
> 
> 标签：c#, tfs, tfs-sdk

我写了一些代码来获取所选项目的最新版本。当我运行它时，它可以工作。但是如果我删除该文件夹并再次运行它，它会显示“所有文件都是最新的”

我使用 Visual Studio TFS 源控制和获取特定版本解决了这个问题。如何使用 TFS API 在 C# 项目中实现？

我的代码：

```
WorkingFolder workfolder = new WorkingFolder(ServerFolder, LocalFolder);
workspace.CreateMapping(workfolder);

workspace.Get(VersionSpec.Latest, GetOptions.Overwrite); 
```

**编辑：**

我添加该代码并检查返回值“getStatus”

```
GetStatus getStatus = workspace.Get(VersionSpec.Latest,  GetOptions.Overwrite);
if (getStatus.NoActionNeeded)
// create new workspace and use same codes in "My code" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:31:50.833

我还没有打算尝试这个，但你可以将 GetOptions.Overwrite 与 GetOptions.GetAll 结合起来吗？

```
workspace.Get(VersionSpec.Latest, GetOptions.Overwrite | GetOptions.GetAll) 
```

在命令行中，我会为 tf get 命令使用 /force 选项。我认为 GetOptions.GetAll 标志可能等同于 /force 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T18:11:08.390

如果您在 2012 年使用本地工作区，则 GetLatest 无法下载您已删除的文件的问题将不成问题。但是，在“服务器”工作区中，TFS 只知道您告诉 TFS 的本地磁盘更改。在这种情况下，由于 TFS 服务器不知道您删除的文件，它不会知道它们丢失并且不会重新下载它们。

如果您想在这种情况下获得它们，则必须像 Dan 提到的那样传递 force 选项。不过，强制并不是一个很好的选择。它将强制重新下载所有内容，这是您通常不想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:45:34.860

您可以按照这些步骤 - 基于`VersionControlServer` 类

链接：http: [//msdn.microsoft.com/fr-fr/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.aspx](http://msdn.microsoft.com/fr-fr/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.aspx)

链接：http: [//msdn.microsoft.com/fr-fr/library/bb138927.aspx](http://msdn.microsoft.com/fr-fr/library/bb138927.aspx)

注意：添加参考

```
Microsoft.TeamFoundation.VersionControl.Client.dll 

Microsoft.TeamFoundation.Client.dll 
```

# wcf - IMetadataExchange 的合同属性无效

> ID：12408667
> 
> 赞同：38
> 
> 时间：2012-09-13T14:32:11.120
> 
> 标签：wcf

我已将 WCF 服务升级到 .NET Framework 4.5。这样做之后，我注意到`IMetaDataExchange`主机配置文件中有一条蓝色波浪线。

这是配置的服务部分的样子：

```
<services>
    <service behaviorConfiguration="MyBehavior" name="MyServiceHost">
        <endpoint binding="wsHttpBinding" bindingConfiguration="noSecurityBinding" contract="MyServiceContract"/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
</service> 
```

当我将鼠标悬停`IMetadataExchange`在错误上时说：

> “合同”属性无效 - 根据其数据类型“服务合同类型”，值“IMetadataExchange”无效 - 枚举约束失败。

该服务似乎工作正常。所以我很好奇为什么这是无效的。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-25T06:19:32.323

关闭VS后可以删除.SUO（解决方案用户选项文件）文件吗？这将重置 VS 中 XMLEditor 组件的缓存并解决您的问题。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-05-11T20:37:20.413

我将 System.ServiceModel 添加到项目的引用中，但它消失了

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-17T16:03:17.267

我有一个类似的问题 - 我的 WCF 服务的 App.Config 中显示了几个`name`和`contract`属性，带有可怕的蓝色波浪，并且错误列表中显示了警告。

就我而言，问题是在创建服务和合同后，我重构了服务项目的名称空间，因此生成的特定于解决方案的 *.xsd 正在使用新的名称空间，但我的重构工具没有更新 App.Config变化。进入并添加完全指定的命名空间解决了这个问题。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-22T12:31:21.850

也许不是 OP 的答案，但其他有此问题的人应该检查为您的服务`[ServiceContract]`声明的`interface`，因为这会产生确切的错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-15T14:42:16.073

如果删除 .SUO 文件不起作用，请检查您的引用以确保您具有 System.ServiceModel 引用。这最终成为将我带到这里的问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-12T22:00:11.850

如果您在警告上运行 Intellisense。它将显示一个列表供您选择，您可以显式调用该成员。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-15T21:18:35.677

我发现问题是合同属性区分大小写。

我有一个引用相同服务的不同解决方案，但在 app.config 中没有任何警告。我在 app.config 的 system.serviceModel 部分的 notepad++ 中运行了比较，它突出了两个合同属性之间大小写的差异。

一旦我将合同属性修改为正确的区分大小写的拼写，警告就会立即消失

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-04T07:16:06.210

关闭 VS2013 Prof，删除“obj”文件夹并重新编译已经为我完成了这项工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-22T02:01:54.420

我已经解决了这个问题。如果您曾经更改 Service1.cs 和 IService1.cs 中的 C# 类。还要更新 App.config 中服务元素“<namespace>.<classname>”中的 name 属性和 endpointd 元素“<namespace>.<classname>”中的 contract 属性。

顺便提一句。抱歉英语不好:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-16T12:49:18.040

我在客户端遇到了同样的问题。对我来说，解决方案是删除并再次添加服务引用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-01T22:51:53.100

升级项目时是否丢失了参考资料？当包含我的客户的项目没有使用我的服务引用我的项目时，我注意到了这个错误。

# dojo - dojo 在错误的路径中寻找 build.js

> ID：12408668
> 
> 赞同：1
> 
> 时间：2012-09-13T14:32:15.857
> 
> 标签：dojo

我正在尝试使用 Eclipse Juno 64bit 作为开发环境在本地 Tomcat (7.0) 服务器上运行我的 dojo 项目。

我昨天遇到了一个问题，关于 dojo 如何假定文件存储在源树中的位置。

下面是显示问题的萤火虫日志：

```
304 Not Modified 23ms dojo.js (Line 295)
GET http://localhost:8080/src/dojo-18/dojo/parser.js

304 Not Modified 46ms dojo.js (Line 295)
GET http://localhost:8080/src/dojo-18/dojo/util.js

404 Not Found 24ms dojo.js (Line 295)
"NetworkError: 404 Not Found - http://localhost:8080/src/dojo-18/dojo/util.js" 
```

前 2 个路径（以及之前的很多路径）已正确加载，现在第三个路径不正确，基础 dojo 文件夹中没有 util.js，我不知道为什么 dojo 会在那里查找。

为了解决这个问题，我尝试使用 baseUrl 属性更好地描述路径

```
<script>
    dojoConfig = {
        isDebug: true,
        parseOnLoad: false,
        baseUrl: './src/dojo-18/',
    };
</script> 
```

dojo.js 是这样引用的：

```
<script src="./src/dojo-18/dojo/dojo.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T09:41:22.437

Dojo 不会自己寻找`util.js`，如果它这样做，你已经自己导入了一个名为**util**的模块，例如：

```
require([ "dojo/util" ], function(util) {
    // This will not work because the util module does not exist
}); 
```

如果要引用自定义模块，则必须先使用以下命令配置包`dojoConfig`：

```
<script>
    dojoConfig = {
        isDebug: true,
        parseOnLoad: false,
        baseUrl: './src/dojo-18/',
        packages: [{
            name: 'custom',
            location: '/path/to/custom'
        }]
    };
</script> 
```

然后，您可以使用以下方法引用该包中的模块：

```
require([ "custom/util" ], function(util) {
    // This will load the custom util module
}); 
```

在这种情况下，Dojo AMD 加载程序将`util.js`在`/path/to/custom`文件夹中查找，因此它将变为：

```
/path/to/custom/util.js 
```

# android - TouchImageView - 图像是否缩放？

> ID：12408669
> 
> 赞同：0
> 
> 时间：2012-09-13T14:32:36.347
> 
> 标签：android, gestures

我正在使用来自 github (https://github.com/MikeOrtiz/TouchImageView) 上 Mike Ortiz 项目的 TouchImageView 并且工作正常。现在我想检查一下图像是否有放大。解释：如果用户放大图像，我必须阻止一些选项，并且只有当用户返回到原始缩放时才再次启用这些选项。有没有办法做到这一点？关于我应该检查什么属性的一些想法？我正在尝试使用 saveScale 和模式来执行此操作，但无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T19:58:07.823

就这么简单：

```
public boolean isZoomedOut () {
    return (saveScale == minScale);
} 
```

变量 saveScale 会在任何时候告诉你比例（默认在 1x 和 3x 之间）

PD：对于此类有“新问题”的新用户，请查看： [https ://github.com/MikeOrtiz/TouchImageView/issues](https://github.com/MikeOrtiz/TouchImageView/issues)

您可能会在那里找到解决方案。

# wpf - 通过绑定值选择控件样式

> ID：12408670
> 
> 赞同：2
> 
> 时间：2012-09-13T14:32:43.417
> 
> 标签：wpf, data-binding, triggers

我有一个可用于多个编辑对象的编辑器视图。多个对象的视图模型为需要处理的每个字段提供了一个类似布尔类型的 Field1Multiple 的属性。在这种情况下，它现在只是 ComboBox 控件。每当应为该字段指示多个不同的值时，应将某种样式应用于在 App.xaml 中定义的该控件。该样式更改了控件的背景，以可视化此处没有可以显示的单个值。

我试过这个 XAML 代码：

```
<ComboBox
  ItemsSource="{Binding Project.Field1Values}" DisplayMemberPath="DisplayName"
  SelectedItem="{Binding Field1}">
  <ComboBox.Style>
    <Style>
      <Style.Triggers>
        <DataTrigger Binding="{Binding Field1Multiple}" Value="true">
          <Setter
            Property="ComboBox.Style"
            Value="{StaticResource MultiValueCombo}"/>
        </DataTrigger>
      </Style.Triggers>
    </Style>
  </ComboBox.Style>
</ComboBox> 
```

但它不起作用，因为我无法从 Style 内部设置 Style 属性。编译器说，如果我直接在控件上使用触发器，则可能只有 EventTriggers，没有 DataTriggers。

如何根据绑定值设置控件的样式？或者，如果绑定值为真，如何为控件设置某种样式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:38:28.780

（编辑完整解决方案）

您可以使用转换器：

```
 public class AnyIsMultipleToStyle : IValueConverter
    {
        public Style NormalStyle { get; set; }

        public Style MultiStyle { get; set; }

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value != null)
            {
                IList<SampleClass> list= value as IList<SampleClass>;
                if (list!=null)
                {
                    if (list.Any(i => i.Multi))
                        return MultiStyle;

                }

            }
            return NormalStyle;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

在您的 xaml 中：（您向转换器指示普通样式和多样式）

```
 <Window.Resources>

        <Style x:Key="MultiValueCombo"  TargetType="{x:Type ComboBox}">

            <Setter Property="Background" Value="Olive" />
        </Style>

        <Style x:Key="NormalCombo"  TargetType="{x:Type ComboBox}">
            <Setter Property="Background" Value="Red" />
        </Style>
        <my:AnyIsMultipleToStyle x:Key="AnyIsMultipleToStyle1" MultiStyle="{StaticResource MultiValueCombo}" NormalStyle="{StaticResource NormalCombo }"  />

    </Window.Resources>
    <Grid>

        <ComboBox    ItemsSource="{Binding Items, ElementName=root}"  >
            <ComboBox.Style>
                <Binding Converter="{StaticResource AnyIsMultipleToStyle1}" Path="Items" ElementName="root" >

                    </Binding>
            </ComboBox.Style>

        </ComboBox>
    </Grid> 
```

# android - 使用片段在选项卡活动中插入图像

> ID：12408671
> 
> 赞同：0
> 
> 时间：2012-09-13T14:32:44.233
> 
> 标签：android

我看到 TabActivity 已被弃用，所以我试图在片段活动中获得相同的内容。以前我为每个选项卡创建了这样的布局：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:drawable="@drawable/state_selected" android:state_selected="true"    android:state_pressed="false" />
 <item android:drawable="@drawable/state_unselected" android:state_selected="false" />
 </selector> 
```

如何再次使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:57:42.550

解决了...我只是想在 setIndicator 中调用 getDrawable ..

# c# - 无法在 C# 中连接到另一台计算机

> ID：12408672
> 
> 赞同：0
> 
> 时间：2012-09-13T14:32:45.710
> 
> 标签：c#, .net, sockets, tcp

大家好，我用 C# 编写了一个简单的程序，它只是将消息从服​​务器发送到客户端。

现在我已经成功测试了在同一台机器上运行的两个程序。但是，当我尝试在不同的网络上连接 2 台不同的计算机时，它会向我发送无法连接的消息。

这里是服务器代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.IO;
using System.Net.Sockets;

namespace chat_client_console
{
    class Program
    {
        static TcpListener listener;
        static void Main(string[] args)
        {
            /*
            string name = Dns.GetHostName();
            IPAddress[] address = Dns.GetHostAddresses(name);

            foreach(IPAddress addr in address)
            {
                Console.WriteLine(addr);
            }

            Console.WriteLine(address[2].ToString());*/
            Console.WriteLine("server");
            listener = new TcpListener(IPAddress.Any, 2055);

            listener.Start();

            Socket soc = listener.AcceptSocket();
            Console.WriteLine("Connection successful");
            Stream s = new NetworkStream(soc);

            StreamReader sr = new StreamReader(s);
            StreamWriter sw = new StreamWriter(s);

            sw.AutoFlush = true;
            sw.WriteLine("A test message");
            sw.WriteLine("\n");
            Console.WriteLine("Test message delivered. Now ending the program");

            /*
            string name = Dns.GetHostName();
            Console.WriteLine(name);
            //IPHostEntry ip = Dns.GetHostEntry(name);
            //Console.WriteLine(ip.AddressList[0].ToString());
            IPAddress[] adr=Dns.GetHostAddresses(name);
            foreach (IPAddress adress in adr)
            {
                Console.WriteLine(adress);
            }
            */
            Console.ReadLine();
        }
    }
} 
```

这里是客户端代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Net.Sockets;

namespace chat_client_console_client
{
    class Program
    {
        static void Main(string[] args)
        {
            string host_ip_address;
            Console.WriteLine("Enter server ip address");
            host_ip_address=Console.ReadLine();
            string display;
            TcpClient client = new TcpClient(host_ip_address, 2055);
            Stream s = client.GetStream();
            Console.WriteLine("Connection successfully received");

            StreamWriter sw = new StreamWriter(s);
            StreamReader sr = new StreamReader(s);
            sw.AutoFlush = true;
            /*while (true)
            {

                display = sr.ReadLine();

                if (display == "")
                {
                    Console.WriteLine("breaking stream");
                    break;
                }

            }*/

            display = sr.ReadLine();

            Console.WriteLine(display);
            Console.ReadLine();
        }
    }
} 
```

现在，当我在客户端程序中输入 127.0.0.1 时，它成功连接到服务器并收到消息。

但是，当我在另一台计算机上运行的客户端程序中输入我的外部 IP 地址时，我无法连接。

在这个问题上需要提出建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T13:09:48.700

您可以在客户端计算机中使用 Wireshark 并查找任何 tcp 数据包以确保消息已发送到服务器。

# batch-file - 如何使用批处理脚本 ping 多个服务器并返回 IP 地址和主机名？

> ID：12408673
> 
> 赞同：6
> 
> 时间：2012-09-13T14:32:46.323
> 
> 标签：batch-file, ping

所以我必须为此使用**批处理**。基本上，服务器 HOSTNAMES 都列在一个 txt 文件中。我使用以下代码 ping 所有服务器并将其结果显示在 txtfile 中。

```
For /f %%i in (testservers.txt) do ping -n 1 %%i >>pingtest.txt 
```

以上ping通了所有服务器。现在，我想在单独的文件中输出 IP 地址和主机名称。我怎样才能做到这一点？我知道我可以运行一个 for 循环来搜索“TTL”之类的单词，然后为第二个令牌（HOSTNAME）查找第三个令牌（用于 IP）和“PINGING”之类的单词。但我有错误，无法正确显示。我想在不同的文件中输出 IP 和主机名的原因是为了列出 DOWN 和 UP 服务器。

帮助将不胜感激。:)

编辑：为了避免混淆，想让你们知道有 3 个不同的文件，testservers.txt 中有 HOSTNAMES，pingtest.txt 有 ping 结果，result.txt 将有 IP 和主机名它们的当前状态为 DOWN 或 UP。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-13T17:34:24.517

好吧，很遗憾您也没有发布自己的代码，以便可以更正。
无论如何，这是我自己的解决方案：

```
@echo off
setlocal enabledelayedexpansion

set OUTPUT_FILE=result.txt
>nul copy nul %OUTPUT_FILE%
for /f %%i in (testservers.txt) do (
    set SERVER_ADDRESS=ADDRESS N/A
    for /f "tokens=1,2,3" %%x in ('ping -n 1 %%i ^&^& echo SERVER_IS_UP') do (
        if %%x==Pinging set SERVER_ADDRESS=%%y
        if %%x==Reply set SERVER_ADDRESS=%%z
        if %%x==SERVER_IS_UP (set SERVER_STATE=UP) else (set SERVER_STATE=DOWN)
    )
    echo %%i [!SERVER_ADDRESS::=!] is !SERVER_STATE! >>%OUTPUT_FILE%
) 
```

外循环遍历主机，内循环解析`ping`输出。前两个`if`语句处理 IP 地址解析的两种可能情况：

1.  主机名是主机 IP 地址。
2.  主机 IP 地址可以从其名称解析。

如果无法解析主机 IP 地址，则将该地址设置为“ADDRESS N/A”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T16:20:41.447

用批处理解析每个主机名称和结果的 pingtest.txt 很困难，因为名称和结果在不同的行上。

直接测试每个 PING 命令的结果（返回的错误代码）比重定向到文件要容易得多。将整个构造包含在括号中并仅重定向最终输出一次也更有效。

```
>result.txt (
  for /f %%i in (testservers.txt) do ping -n 1 %%i >nul && echo %%i UP||echo %%i DOWN
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T22:37:22.107

尝试这个

```
$servers = Get-Content test.txt

$reg=""

foreach ($server in $servers) 

{

$reg=$reg+$server+"`t"+([System.Net.Dns]::GetHostAddresses($server) | foreach {echo $_.IPAddressToString})+"`n"

 }
$reg >reg.csv 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-12T23:57:42.010

我处理了 Eitan-T 之前给出的代码，并重新设计以输出到 CSV 文件。发现早期代码中的结果并不总是给出正确的值，所以我改进了它。

测试服务器.txt

```
SOMESERVER
DUDSERVER 
```

结果.csv

```
HOSTNAME    LONGNAME                    IPADDRESS   STATE 
SOMESERVER  SOMESERVER.DOMAIN.SUF       10.1.1.1    UP 
DUDSERVER   UNRESOLVED                  UNRESOLVED  DOWN 
```

pingtest.bat

```
 @echo off
    setlocal enabledelayedexpansion
    set OUTPUT_FILE=result.csv

    >nul copy nul %OUTPUT_FILE%
    echo HOSTNAME,LONGNAME,IPADDRESS,STATE >%OUTPUT_FILE%
    for /f %%i in (testservers.txt) do (
        set SERVER_ADDRESS_I=UNRESOLVED
        set SERVER_ADDRESS_L=UNRESOLVED
        for /f "tokens=1,2,3" %%x in ('ping -n 1 %%i ^&^& echo SERVER_IS_UP') do (
        if %%x==Pinging set SERVER_ADDRESS_L=%%y
        if %%x==Pinging set SERVER_ADDRESS_I=%%z
            if %%x==SERVER_IS_UP (set SERVER_STATE=UP) else (set SERVER_STATE=DOWN)
        )
        echo %%i [!SERVER_ADDRESS_L::=!] !SERVER_ADDRESS_I::=! is !SERVER_STATE!
        echo %%i,!SERVER_ADDRESS_L::=!,!SERVER_ADDRESS_I::=!,!SERVER_STATE! >>%OUTPUT_FILE%
    ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T19:34:29.283

ping 的问题是，如果主机不活动，您的本地计算机通常会返回一个答案，表明被 ping 的主机不可用，因此 ping 的错误代码将为 0，并且您的代码将因为无法识别停机状态而错误运行。

最好这样做

```
ping -n 4 %1 | findstr TTL
if %errorlevel%==0 (goto :eof) else (goto :error) 
```

通过这种方式，您可以查找一个典型的字符串 ttl，该字符串始终处于良好的 ping 结果中，并在此 findstr 上检查错误，而不是刺激 ping

总的来说，这看起来像这样：

```
@echo off
SetLocal

set log=path/to/logfile.txt
set check=path/to/checkfile.txt

:start
echo. some echo date >>%log%

:check
for /f %%r in (%check%) do (call :ping %%r)
goto :eof

:ping
ping -n 4 %1 | findstr TTL
if %errorlevel%==0 (goto :eof) else (goto :error)

:error
echo. some errormessage to >>%log%
echo. some blat to mail?

:eof
echo. some good message to >>%log% 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-01T18:16:14.947

@echo 关闭

set workdir={你的工作目录。例如 - C:\work } set iplist=%workdir%\IP-list.txt

```
setlocal enabledelayedexpansion
set OUTPUT_FILE=%workdir%\result.csv

>nul copy nul %OUTPUT_FILE%
echo HOSTNAME,LONGNAME,IPADDRESS,STATE >%OUTPUT_FILE%
for /f %%i in (%iplist%) do (
    set SERVER_ADDRESS_I=UNRESOLVED
    set SERVER_ADDRESS_L=UNRESOLVED
    for /f "tokens=1,2,3" %%x in ('ping -a -n 1 %%i ^&^& echo SERVER_IS_UP') do (
    if %%x==Pinging set SERVER_ADDRESS_L=%%y
    if %%x==Pinging set SERVER_ADDRESS_I=%%z
        if %%x==SERVER_IS_UP (set SERVER_STATE=UP) else (set SERVER_STATE=DOWN)
    )
    echo %%i [!SERVER_ADDRESS_L::=!] !SERVER_ADDRESS_I::=! is !SERVER_STATE!
    echo %%i,!SERVER_ADDRESS_L::=!,!SERVER_ADDRESS_I::=!,!SERVER_STATE! >>%OUTPUT_FILE%
) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-19T15:13:50.207

这适用于西班牙操作系统。

脚本接受两个参数：

*   包含 IP 或域列表的文件
*   输出文件

> script.bat listofurls.txt output.txt

```
@echo off
setlocal enabledelayedexpansion
set OUTPUT_FILE=%2
>nul copy nul %OUTPUT_FILE%
for /f %%i in (%1) do (
    set SERVER_ADDRESS=No se pudo resolver el host
    for /f "tokens=1,2,3,4,5" %%v in ('ping -a -n 1 %%i ^&^& echo SERVER_IS_UP') 
    do (
        if %%v==Haciendo set SERVER_ADDRESS=%%z
        if %%v==Respuesta set SERVER_ADDRESS=%%x
        if %%v==SERVER_IS_UP (set SERVER_STATE=UP) else (set SERVER_STATE=DOWN)
    )
    echo %%i [!SERVER_ADDRESS::=!] is !SERVER_STATE! >>%OUTPUT_FILE%
    echo %%i [!SERVER_ADDRESS::=!] is !SERVER_STATE!
) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-12T18:50:27.417

这很好用，我只是在 ping 中添加了 -a 选项来解析主机名。谢谢[https://stackoverflow.com/users/4447323/wombat](https://stackoverflow.com/users/4447323/wombat)

@echo off setlocal enabledelayedexpansion set OUTPUT_FILE=result.csv

```
>nul copy nul %OUTPUT_FILE%
echo HOSTNAME,LONGNAME,IPADDRESS,STATE >%OUTPUT_FILE%
for /f %%i in (testservers.txt) do (
    set SERVER_ADDRESS_I=UNRESOLVED
    set SERVER_ADDRESS_L=UNRESOLVED
    for /f "tokens=1,2,3" %%x in ('ping -n 1 -a %%i ^&^& echo SERVER_IS_UP') do (
    if %%x==Pinging set SERVER_ADDRESS_L=%%y
    if %%x==Pinging set SERVER_ADDRESS_I=%%z
        if %%x==SERVER_IS_UP (set SERVER_STATE=UP) else (set SERVER_STATE=DOWN)
    )
    echo %%i [!SERVER_ADDRESS_L::=!] !SERVER_ADDRESS_I::=! is !SERVER_STATE!
    echo %%i,!SERVER_ADDRESS_L::=!,!SERVER_ADDRESS_I::=!,!SERVER_STATE! >>%OUTPUT_FILE%
) 
```

# php - 类似于三元的 PHP IF 速记变体

> ID：12408679
> 
> 赞同：1
> 
> 时间：2012-09-13T14:33:00.903
> 
> 标签：php

有没有另一种方式来写这样的东西？

```
$var2 = ($var1) ? $var1 : 'bar'; 
```

例子..

```
$var1 = 'foo';
$var2 = ($var1) ? $var1 : 'bar';
echo $var2; //Outputs foo

$var1 = false;
$var2 = ($var1) ? $var1 : 'bar';
echo $var2; //Outputs bar 
```

我希望

```
$var2 = $var1 || 'bar'; 
```

会起作用，因为我以为我以前见过，但事实并非如此。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:38:16.227

```
$var2 = $var1 ?: 'bar'; 
```

自 PHP 5.3 以来的新功能。[http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:39:09.793

几乎正确。自 PHP 5.3（我相信）以来，有一个新结构：

```
<?php
$foo = false;
$foo = $foo ?: 'bar';

echo $foo; // $foo is now "bar". 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-13T14:37:37.497

PHP 5.3 之前没有。

如果与 5.3 之前的 PHP 版本的兼容性很重要，我建议制定一个方法；

```
function b($a, $b) { return $a?$a:$b; } 
```

B代表最好，也很短。

用法：

```
echo b($username, "Not logged in"); 
```

# objective-c - #define 为 AppDelegate

> ID：12408684
> 
> 赞同：0
> 
> 时间：2012-09-13T14:33:23.827
> 
> 标签：objective-c

我读了一篇使用宏来引用 AppDelegate的[帖子。](https://stackoverflow.com/questions/12402976/appdelegates-property-not-accessible)我想知道我应该用什么来代替`(MyOwnAppDelegate*)`

```
#define AppDelegate ((MyOwnAppDelegate*)[[UIApplication sharedApplication] delegate]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:46:07.887

如果你引用的`UIApplicationDelegate`太频繁以至于你需要一个特殊的宏，那么你引用它的频率太高了。应用程序委托是主`UIApplication`对象的委托。它不是存放“东西”的一般地方。请参阅以下讨论：

*   [什么最能描述应用程序委托？它如何融入整个概念？](https://stackoverflow.com/questions/828827/what-describes-the-application-delegate-best-how-does-it-fit-into-the-whole-con/829591#829591)
*   [大部分逻辑和模型都可以放在 appDelegate 中吗？](https://stackoverflow.com/questions/9213134/is-it-ok-to-place-most-logic-and-models-in-the-appdelegate)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:38:20.600

如果它是最近开始的项目，您的委托可能被称为`AppDelegate`. 要找出答案，您必须在项目中找到实现[`NSApplicationDelegate`](http://www.google.hu/url?sa=t&rct=j&q=nsapplicationdelegate&source=web&cd=1&cad=rja&sqi=2&ved=0CB8QFjAA&url=http://developer.apple.com/documentation/Cocoa/Reference/NSApplicationDelegate_Protocol/Reference/Reference.html&ei=--9RUKONIcem4gSqwoCABA&usg=AFQjCNEgQRbPmnPEVYcq2GhYzreAZI7PTQ)或[`UIApplicationDelegate`](http://www.google.hu/url?sa=t&rct=j&q=uiapplicationdelegate&source=web&cd=1&cad=rja&ved=0CBwQFjAA&url=http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html&ei=B_BRUJLhO8Ttsgb78oDgBg&usg=AFQjCNFXqpeC0Z3TWgYvbyk2q6LWrCDuEg)（取决于您的目标平台）的类。

![在此处输入图像描述](../Images/191e933815c86f556ec2ec0a30de436a.png)

# c# - 如何在c#中从mysql中读取和打印数据

> ID：12408693
> 
> 赞同：9
> 
> 时间：2012-09-13T14:33:37.550
> 
> 标签：c#, mysql

我的问题是我无法打印出 mysql 数据库中表中的所有数据，我只打印了给定表“老师”中的最后一行。有没有人可以帮我找到错误？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using MySql.Data.MySqlClient;

namespace ReadDataFromMysql
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string sql = " SELECT * FROM teacher  ";
            MySqlConnection con = new MySqlConnection("host=localhost;user=root;password=859694;database=projekt;");
            MySqlCommand cmd = new MySqlCommand(sql, con);

            con.Open();

           MySqlDataReader  reader = cmd.ExecuteReader();

           while (reader.Read()) {
               data2txt.Text = reader.GetString("id");
              datatxt.Text = reader.GetString("userId");
           }

        }

        private void btnclose_Click(object sender, EventArgs e)
        {
            Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T14:36:20.033

您的问题是您在每行数据上覆盖 data2txt.Text 和 datatxt.Text 。如果您想查看这些字段中的所有数据，这样的事情应该可以满足您的需要：

```
data2txt.Text = string.Empty;
datatxt.Text = string.Empty;

while (reader.Read())
{
    data2txt.Text += $"{reader.GetString("id")};";
    datatxt.Text += $"{reader.GetString("userId")};";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:36:19.447

显然，您的代码将教师表的最后一行值显示到表单上的文本字段中。因为您正在循环遍历数据读取器并将值分配给 textfiled。因此每次迭代都会覆盖文本框中的先前值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:36:39.347

您正在分配每个字段的值，而不是现有控件文本的值加上新值。添加一个断点以确保您获得多行，但是在编写代码时，您只会在表单中看到一行的结果，因为您在循环的每次迭代中都被覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:38:14.713

您应该在再次写入数据之前输出数据：

```
data2txt.Text = reader.GetString("id");
          datatxt.Text = reader.GetString("userId"); 
```

或者使用 var 将所有数据存储在每个“读取”中，然后输出该 var

```
varexample.Text += reader.GetString("id"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-17T06:13:53.583

此代码有效。

```
private void getdata()
{
MySqlConnection connect = new MySqlConnection("SERVER=localhost; user id=root; password=; database=databasename");
MySqlCommand cmd = new MySqlCommand("SELECT ID, name FROM data WHERE ID='" + txtid.Text + "'");
cmd.CommandType = CommandType.Text;
cmd.Connection = connect;
connect.Open();
try
{
MySqlDataReader dr;
dr = cmd.ExecuteReader();
while(dr.Read())
{
txtID.Text = dr.GetString("ID");
txtname.Text = dr.GetString("name");
}
dr.Close();
}
catch(Exception ex)
{
MessageBox.Show(ex.Message);
}
finally
{
if(connect.State == ConnectionState.Open)
{
connect.Close();
}
} 
```

# qt - 无法将 Visual Studio 项目导出到 Qt Creator

> ID：12408694
> 
> 赞同：2
> 
> 时间：2012-09-13T14:33:40.683
> 
> 标签：qt, visual-studio-2008, export, qt-creator, projects-and-solutions

我想导出一个 Visual Studio 项目或整个解决方案，我安装了 Qt Visual Studio 插件，但菜单操作不可点击：

[http://img88.imageshack.us/img88/756/capturebba.png](http://img88.imageshack.us/img88/756/capturebba.png)

我可以做些什么来导出项目或解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:35:20.837

您可能正在尝试转换一个实际上不使用 Qt 的项目，并且有一个错误阻止您这样做。这是**Visual Studio 2008**的解决方法：

打开 yourproject.vcproj 文件并在以下行之后：

根命名空间="你的项目"

像这样添加一个新属性：

关键字="Qt4VSv1.0"

**Visual Studio 2010**的解决方法是（我自己没有尝试过这个）：

1) 使用文本编辑器打开 yourproject.vcxproj

2）找到标签：

3）在之间添加以下行：Qt4VSv1.0

4) 在 VS2010 中重新加载您的项目 5) 在解决方案资源管理器中，右键单击您的项目 6) 在菜单中，选择“将项目转换为 Qt 插件项目”

修改您的 Qt 项目设置以包含您需要的模块，然后您就可以开始了。

取自这里：

[https://bugreports.qt-project.org/browse/QTVSADDINBUG-27](https://bugreports.qt-project.org/browse/QTVSADDINBUG-27)

# linux - 在 Linux 中使用 mount --bind 挂载文件夹。一个子文件夹显示为空

> ID：12408695
> 
> 赞同：0
> 
> 时间：2012-09-13T14:33:42.297
> 
> 标签：linux, bind, mount

我使用“mount -r --bind locationA locationB”命令成功地将硬盘驱动器上的一个文件夹安装到 Linux 中的另一个位置。

但是，其中一个子文件夹未映射到另一个位置。我不明白为什么子文件夹 1、2 和 3 被映射，但子文件夹 4 没有被映射。子文件夹 4 显示在目录树中，但内容列为空。

我没有收到任何错误消息。

可能是什么问题呢？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:14:49.660

when you mount a filesystem somewhere else, any filesystems that were mounted to mount points inside the bind-mounted filesystem will not be moved along.

you can use recursive bind mount -
`mount -r --rbind locationA locationB`

# android - SQLite 查询以创建已定义的 Java 对象

> ID：12408698
> 
> 赞同：3
> 
> 时间：2012-09-13T14:33:44.300
> 
> 标签：android, sqlite

我有这个提示的 SQLite 表

桌*车*：

```
CATEGORY    COUNTRY   ID    NAME          EMAIL
A           GE         1    BMW           sample1@salple.it
A           GE         2    Lamborghini   sample2@salple.it
B           GE         3    BMW           sample3@salple.it 
```

我想选择所有具有指定名称或指定类别的条目，并将所有参数传递给构造函数中的每一行

```
Vehicle(String category, String country, int id, String name, String email) 
```

我已经使用一些教程实现了这个适配器：

```
public class TestAdapter  
{ 
    protected static final String TAG = "DataAdapter"; 

    private final Context mContext; 
    private SQLiteDatabase mDb; 
    private DataBaseHelper mDbHelper; 

    public TestAdapter(Context context)  
    { 
        this.mContext = context; 
        mDbHelper = new DataBaseHelper(mContext); 
    } 

    public TestAdapter createDatabase() throws SQLException  
    { 
        try  
        { 
            mDbHelper.createDataBase(); 
        }  
        catch (IOException mIOException)  
        { 
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase"); 
            throw new Error("UnableToCreateDatabase"); 
        } 
        return this; 
    } 

    public TestAdapter open() throws SQLException  
    { 
        try  
        { 
            mDbHelper.openDataBase(); 
            mDbHelper.close(); 
            mDb = mDbHelper.getReadableDatabase(); 
        }  
        catch (SQLException mSQLException)  
        { 
            Log.e(TAG, "open >>"+ mSQLException.toString()); 
            throw mSQLException; 
        } 
        return this; 
    } 

    public void close()  
    { 
        mDbHelper.close(); 
    } 

    public boolean SaveVehicles(String category , String country, String id, String name, String email) 
    {
        try
        {
            ContentValues cv = new ContentValues();
            cv.put("Category", category);
            cv.put("Country", country);
            cv.put("id", id);
            cv.put("Name", name);
            cv.put("Email", email);

            mDb.insert("Vehicles", null, cv);

            Log.d("SaveVehicles", "informationsaved");
            return true;

        }
        catch(Exception ex)
        {
            Log.d("SaveVehicles", ex.toString());
            return false;
        }
    }

} 
```

但我不知道如何实现我需要的各种 get 方法来解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:26:05.890

从 SQL 查询创建对象看起来像这样

```
/**
 * @return Returns a list of all objects.
 */
public ArrayList<Object> getAllObjects() 
{
    // Select All Query
    String selectQuery = "SELECT * FROM SOME_TABLE";
    // Get the isntance of the database
    SQLiteDatabase db = this.getWritableDatabase();
    //get the cursor you're going to use
    Cursor cursor = db.rawQuery(selectQuery, null);

    //this is optional - if you want to return one object
    //you don't need a list
    ArrayList<Object> objectList = new ArrayList<Object>();

    //you should always use the try catch statement incase
    //something goes wrong when trying to read the data
    try
    {           
        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                 //the .getString(int x) method of the cursor returns the column
                 //of the table your query returned
                Object object= new Object(Integer.parseInt(cursor.getString(0)),
                                        Integer.parseInt(cursor.getString(1)),
                                        Integer.parseInt(cursor.getString(2)),
                                        cursor.getString(3),
                                        cursor.getString(4),
                                        cursor.getString(5),
                                        Boolean.parseBoolean(cursor.getString(6))
                                        );                                      
                // Adding contact to list
                objectList.add(object);
            } while (cursor.moveToNext());
        }
    }
    catch (SQLiteException e)
    {
        Log.d("SQL Error", e.getMessage());
        return null;
    }
    finally
    {
      //release all your resources
        cursor.close();
        db.close();
    }
    return objectList;      
} 
```

上面的代码假设您的数据库中有一个名为“SOME_TABLE”的表，并且您有一个带有 7 个参数的对象，但您应该能够更改代码片段以使其适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:08:11.043

您需要查询数据库中的数据，然后遍历返回的游标以提取您需要的数据并将其放入字符串中以提供给您的构造函数。

查询看起来像这样（使用您提供的信息和`query`方法）：

```
public Cursor fetchList(String category) {
    return mDb.query("Vehicles", new String[] { "CATEGORY", "COUNTRY", "ID", "NAME", "EMAIL" }, "Category =" + category,
            null, null, null, null);
} 
```

请注意，这是一个基本查询，会受到 SQL 注入攻击，应该对其进行参数化以使其不易受到攻击，除非您不允许用户输入类别，而是让他们从您提供的列表中进行选择。

无论如何，这将在游标中返回您的数据，每条记录与搜索参数匹配一行。从那里，您需要遍历返回的光标并将数据从中提取出来并放入您可以使用的字符串中。

# c# - 将xml输出保存到数据库

> ID：12408701
> 
> 赞同：0
> 
> 时间：2012-09-13T14:33:58.867
> 
> 标签：c#, asp.net, xml, xml-serialization

在我的项目中，我需要读取一个 csv 文件并将其转换为 xml 并将 xml 保存到数据库表中。我想将 xml 输出直接保存到数据库而不保存到文件中。我能够将 csv 转换为 xml，但我不确定如何直接保存它（不保存到文件）数据库。任何帮助表示赞赏。

这是我的代码

```
 var lines = System.IO.File.ReadAllLines(@"C:\test.csv");

            var xml = new XElement("TopElement",
               lines.Select(line => new XElement("Item",
                line.Split(';')
                .Select((column, index) => new XElement("Column" + index, column)))));

           // XmlTextReader reader = new XmlTextReader(xml.ToString());

            //xml.Save(@"C:\xmloutput.xml);  // dont want to save to file. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:54:56.453

如果您使用 SQL Server，数据库中是否有类型为“XMl”的列？

您可以[使用 C# 检查将 XML 直接保存到数据库](https://stackoverflow.com/questions/2991810/save-xml-directly-to-database-with-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:03:51.443

在 SQL Server 中维护 XML：

[http://msdn.microsoft.com/en-us/library/bb510480(SQL.105).aspx](http://msdn.microsoft.com/en-us/library/bb510480(SQL.105).aspx)

C# 示例（将 XML 转换为字符串）： [http ://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/d1666d13-dea3-4ce8-a818-6b852a63de4f/](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/d1666d13-dea3-4ce8-a818-6b852a63de4f/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:08:58.883

在 SQL Server 中实现 XML：

[http://msdn.microsoft.com/en-us/library/ms189887(SQL.105).aspx](http://msdn.microsoft.com/en-us/library/ms189887(SQL.105).aspx)

其他链接：

[http://forums.asp.net/t/1316853.aspx/1](http://forums.asp.net/t/1316853.aspx/1)

# javascript - 在多个部分使用一个 JavaScript 代码

> ID：12408714
> 
> 赞同：1
> 
> 时间：2012-09-13T14:34:17.773
> 
> 标签：javascript, jquery

我对 jQuery 了解不多，但我一直在使用以下 javascript 代码来制作表格，使其在页面返回时保持滚动条位置：

```
<script type="text/javascript">
    window.onload = function () {
        var strCook = document.cookie;
        if (strCook.indexOf("!~") != 0) {
            var intS = strCook.indexOf("!~");
            var intE = strCook.indexOf("~!");
            var strPos = strCook.substring(intS + 2, intE);
            document.getElementById("grdWithScroll").scrollTop = strPos;
        }
    }
    function SetDivPosition() {
        var intY = document.getElementById("grdWithScroll").scrollTop;
        document.cookie = "yPos=!~" + intY + "~!";
    }
</script> 
```

和

```
<div id="grdWithScroll" onscroll="SetDivPosition()"> 
```

它适用于单个 div。但是我如何扩展它以用于第二个 div 部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:48:41.540

您可以使用 class 属性来定义您希望使用该功能的所有 div，而不是单个 div id。

```
<div id="grdWithScroll" class="coolScroll" onscroll="SetDivPosition()">
</div>
<div id="abcWithScroll" class="coolScroll" onscroll="SetDivPosition()">
</div> 
```

使用 jQuery（或其他库）轻松选择具有所述类的所有 div 并访问 scrollTop 属性

```
$('.coolScroll').each( function()
{
// do something with scrollTop
} 
```

您还可以使用类选择器来设置 onscroll 功能。

```
$('.coolScroll').attr( 'onscroll' , 'javascript:SetDivPosition()' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:04:58.200

在这里找到了我要找的东西：

[http://social.msdn.microsoft.com/Forums/nb-NO/jscript/thread/ad18ed20-8ae2-4c13-9a51-dcb0b1397349](http://social.msdn.microsoft.com/Forums/nb-NO/jscript/thread/ad18ed20-8ae2-4c13-9a51-dcb0b1397349)

```
<script language="javascript" type="text/javascript">

//This function sets the scroll position of div to cookie.
function setScrollPos() {
    var div1Y = document.getElementById('div1').scrollTop;
    var div2Y = document.getElementById('div2').scrollTop;
    document.cookie = "div1Pos=!*" + div1Y + "*!" + 
    " div2Pos=|*" + div2Y + "*|";
}

///Attaching a function on window.onload event.
window.onload = function () {
    var strCook = document.cookie; if (strCook.indexOf("!~") != 0) {
        var intS = strCook.indexOf("!~");
        var intE = strCook.indexOf("~!"); 
        var strPos = strCook.substring(intS + 2, intE);
        document.body.scrollTop = strPos;
    }

    /// This condition will set scroll position of <div> 1.
    if (strCook.indexOf("iv1Pos=!*") != 0) {
        var intdS = strCook.indexOf("iv1Pos=!*");

        var intdE = strCook.indexOf("*!");
        var strdPos = strCook.substring(intdS + 9, intdE);
        document.getElementById('div1').scrollTop = strdPos;
    }

    /// This condition will set scroll position of <div> 2.
    if (strCook.indexOf("iv2Pos=!*") != 0) {
        var intdS = strCook.indexOf("iv2Pos=|*");
        var intdE = strCook.indexOf("*|");
        var strdPos2 = strCook.substring(intdS + 9, intdE);
        document.getElementById('div2').scrollTop = strdPos2;
    }
}

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:41:46.347

除了使用 document.getElementById 之外，您可以将相同的类名分配给您想要此功能的所有 div，然后使用 jQuery 选择器 $(".scrollgrid") 选择多个 div，并存储滚动顶部。如果您不想使用 jQuery，可以查看人们编写的自定义函数，用于按类名选择元素。这是一个例子。

[http://www.netlobo.com/javascript_getelementsbyclassname.html](http://www.netlobo.com/javascript_getelementsbyclassname.html)

# android - Google 云消息传递示例

> ID：12408718
> 
> 赞同：10
> 
> 时间：2012-09-13T14:34:28.037
> 
> 标签：android, push-notification, google-cloud-messaging

有人有示例 gcm 服务器端和 android 项目吗？最好是解释一切的教程。

我试图查看示例中包含的那个，但是我无法让它工作。

我有一个可在服务器端和 android 上运行的 c2dm 项目，但我不知道如何将其转换为 gcm。

我将使用 gcm 推送消息

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T05:13:24.133

只需按照本[教程](http://developer.android.com/guide/google/gcm/gs.html)

希望它会帮助你。

GCM 服务器端（java 代码）

```
 public class GCMServerJava {

/**
 * @param args
 */
public static void main(String[] args) {

    Sender sender = new Sender(enter your App id);// app id

    Message message = new Message.Builder()
    .collapseKey("1")
    .timeToLive(3)
    .delayWhileIdle(true)
    .addData("message",
            "this text will be seen in notification bar!!").build();
    Result result;
    try {

        result = sender.send(message,"registration id which client get after registering device with google gcm service", 1);   

        System.out.println(result.toString());

        Message message1 = new Message.Builder()

        .build();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T11:02:45.440

请检查以下 GCM Android 代码。这对我有用。

GCM 安卓项目：

GCMIntentService.java

```
package com.example.samplegcm;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService {

    private static final String TAG = "GCMIntentService";

    public GCMIntentService() {
        super(CommonUtilities.SENDER_ID);
    }

    @Override
    protected void onRegistered(Context arg0, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        Log.i(TAG, "unregistered = " + arg1);
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "new message= ");
        String message = intent.getExtras().getString("message");
        generateNotification(context, message);
    }

    @Override
    protected void onError(Context arg0, String errorId) {
        Log.i(TAG, "Received error: " + errorId);
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        return super.onRecoverableError(context, errorId);
    }

    /**
     * Issues a notification to inform the user that server has sent a message.
     */
    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context, PushAndroidActivity.class);
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0,
                notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);
    }

} 
```

通用实用程序.java

```
package com.example.samplegcm;

public class CommonUtilities {

    static final String SENDER_ID = "XXXXXXXXXXX"; // your project number from GCM
} 
```

PushAndroidActivity.java

```
 package com.example.samplegcm;
    import android.app.Activity;
    import android.os.Bundle;
    import android.util.Log;
    import android.widget.TextView;
    import com.google.android.gcm.GCMRegistrar;

    public class PushAndroidActivity extends Activity {

    private String TAG = "** pushAndroidActivity **";
    private TextView mDisplay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    checkNotNull(CommonUtilities.SENDER_ID, "SENDER_ID");

    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);

    setContentView(R.layout.activity_main);
    mDisplay = (TextView) findViewById(R.id.display);

    final String regId = GCMRegistrar.getRegistrationId(this);
    Log.i(TAG, "registration id =====  "+regId);

    if (regId.equals("")) {
    GCMRegistrar.register(this, CommonUtilities.SENDER_ID);
    } else {
    Log.v(TAG, "Already registered");

    }

    mDisplay.setText("Reg id is--> "+ regId);
    }

    private void checkNotNull(Object reference, String name) {
    if (reference == null) {
    throw new NullPointerException(
    getString(R.string.error_config, name));
    }
    }

    @Override
    protected void onPause() {
    super.onPause();
    GCMRegistrar.unregister(this);
    }
} 
```

清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.samplegcm"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.samplegcm.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.samplegcm.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.samplegcm.PushAndroidActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.example.samplegcm" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-10T15:08:48.190

android gcm 示例的有用链接...您不需要创建服务器文件...您只需要项目 id、google api 密钥...

[http://www.androidbegin.com/tutorial/android-google-cloud-messaging-gcm-tutorial/#more-556](http://www.androidbegin.com/tutorial/android-google-cloud-messaging-gcm-tutorial/#more-556)

# android - 在 Android 中恢复活动

> ID：12408719
> 
> 赞同：23
> 
> 时间：2012-09-13T14:34:31.710
> 
> 标签：android, android-activity, resume, onstart

我有一个包含 3 个活动的应用程序。

我有主要活动。这调用第二个活动，然后调用第三个活动。我想在不输入 onCreate 的情况下返回主要活动。

这是第三个活动的代码：

```
startActivity(new Intent(TerceraActiviry.this, Main.class)); 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-13T15:00:39.530

如果您`Activity`仍在运行，则此代码将在不输入的情况下将其置于最前面`onCreate`

```
Intent openMainActivity = new Intent(TerceraActiviry.this, Main.class);
openMainActivity.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivityIfNeeded(openMainActivity, 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T14:43:15.367

为了回到以前的活动，你必须完成可见的活动，使用这个：

```
finish(); 
```

如果活动是为了一个结果而开始的，那么你应该给出一个结果，如下所示：

```
Intent intent = new Intent();
intent.putExtra(KEY_RESPONSE, responseData);
setResult(RESULT_OK, intent);
finish(); 
```

您应该使用以下方法在调用者 Activity 上捕获结果：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

  switch (requestCode) {
    // Test for the code you have used to start the Activity
  }
} 
```

希望它有所帮助，问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:37:21.503

你 startActivityForResult 而不是 startActivity。

[在此处](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)参考 android 开发人员以获取更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T14:43:42.717

您想要的启动模式标志是 clearTop。这将返回到主活动的前一个实例，并从活动堆栈中清除第二个和第三个活动。例如，要从代码中执行此操作：

```
Intent intent = new Intent(TerceraActiviry.this, Main.class));
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

# php - FuelPHP、PDO 和 PostgreSQL——它们可以一起工作吗？

> ID：12408725
> 
> 赞同：0
> 
> 时间：2012-09-13T14:34:41.227
> 
> 标签：php, postgresql, pdo, postgresql-9.1, fuelphp

我必须重写 PHP 项目，作为一个来自 CI 和 Kohana 框架的人，我正在研究使用 FuelPHP——时代在变，是时候尝试新的东西了。只有这个项目需要 PostgreSQL。

我对 FuelPHP 很陌生，所以我的问题解释可能很愚蠢:)。我已经安装了 pgsql PDO 模块、设置数据库等，所以 PHP 和 PostgreSQL 本身工作所需的一切都设置好了。

现在我想知道，是否有可能让 FuelPHP 与 PostgreSQL 一起使用？据我了解，在当前 1.3v 中唯一的方法是 PDO，但对我来说它不起作用 - 没有连接或选择错误，只是空选择。我在某处表示 2.0v pgsql 将得到更好的支持，我敢打赌，我认为这不是使用 2.0v beta 版本的解决方案。:)

目前我正在尝试了解是否可以在这个项目中使用 FuelPHP，因为这是一项长期的工作——一个人重写约 6 个月——但之后会有更多的程序员参与进来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:16:38.373

它并不完美，但 FuelPHP 可以使用 PostgreSQL。至少你可以 CRUD。

请参阅[http://docs.fuelphp.com/classes/database/introduction.html](http://docs.fuelphp.com/classes/database/introduction.html)

PostgreSQL 有一个示例配置

// 一个 PDO 驱动配置，使用 PostgreSQL

# xml - 使用 XSLT 更改单个 XML 标记

> ID：12408733
> 
> 赞同：1
> 
> 时间：2012-09-13T14:35:17.810
> 
> 标签：xml, xslt, tags, using

我正在尝试对 XML 标记从一件事到另一件事进行非常简单的更改。我不想更改 xml 文件中的任何其他内容。出于技术原因，我必须使用 XSLT 来执行此操作。

我看过这篇文章[使用 XSLT 在 XML 文件中更改一个标记名称，](https://stackoverflow.com/questions/2573403/changing-one-tag-name-in-an-xml-file-using-xslt)但逻辑似乎不起作用。

我的输入 XML 就是这个，我想要做的就是将同步打开和关闭标签分别更改为处理打开和关闭标签。

```
<SyncCodeDefinition xmlns="xxx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://schema.xxx.com/OAGIS/2 http://schema.xxx.com/2.6.5/OAGIS/BODs/Developer/mytest.xsd" releaseID="9.2">
<ApplicationArea>
<Sender>
  <LogicalID schemeVersionID="12345">lid://xxx.yyy.zzz</LogicalID>
  <ComponentID>test1</ComponentID>
 </Sender>
<CreationDateTime>2012-09-11T17:07:04Z</CreationDateTime>
<BODID>xxxxx</BODID>
</ApplicationArea>
<DataArea>
<Sync>
  <TenantID>xxxx</TenantID>
  <AccountingEntityID>ZZZ</AccountingEntityID>
  <ActionCriteria>
    <ActionExpression actionCode="Add" />
  </ActionCriteria>
</Sync>
<CodeDefinition>
  <DocumentID>
    <ID accountingEntity="ZZZ" variationID="1">TEST001_PRODUCT</ID>
  </DocumentID>
  <DisplayID>TEST001_PRODUCT</DisplayID>
  <Status>
    <Code listID="CodeDefinitionStatus">Open</Code>
  </Status>
  <ListID>PRODUCT</ListID>
  <CodeValue accountingEntity="ZZZ" languageID="en-GB">TEST001</CodeValue>
  <Name languageID="en-GB">new test</Name>
  <Description languageID="en-GB">new test</Description>
</CodeDefinition>
</DataArea>
</SyncCodeDefinition> 
```

这是我的 XSLT，但它似乎忽略了替换语句。请帮忙 ：）

```
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:template match="node()|@*"> 
<xsl:copy> 
<xsl:apply-templates select="node()|@*"/> 
</xsl:copy> 
</xsl:template>
<xsl:template match= 
"Sync[count(.|((//Sync)[1])) = 1]"> 
     <Process> 
   <xsl:apply-templates /> 
    </Process> 
</xsl:template> 
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:51:25.003

模板匹配表达式未使用`<Sync>`元素的命名空间。您需要将其更改为：

```
<xsl:template match= "xxx:Sync[count(.|((//xxx:Sync)[1])) = 1]"> 
```

并向您的`<xsl:stylesheet>`元素添加命名空间声明：

```
xmlns:xxx="xxx" 
```

这是一个 XML 常见问题解答。您的 XML 输入文档在最外层元素上有一个默认命名空间声明：

```
xmlns="xxx" 
```

这意味着该元素的所有后代，包括`<Sync>`，都在其 URI 为“xxx”的命名空间中，除非另有说明。

请记住，XSLT 和 XPath 使用的 XML 信息模型会忽略名称空间前缀（或缺少前缀）和声明*本身。*他们只关心节点所在的命名空间（由其命名空间 URI 标识）。

还要记住（作为必然结果）XML 输入文档中使用的名称空间前缀与样式表中声明的任何名称空间前缀完全分开。这是有道理的，因为您可能正在处理多个输入文档，每个输入文档可能以不同的方式使用相同的前缀（甚至在同一个 XML 文档中）。

在 XSLT 1.0 中，无法在匹配模式（或 XPath 表达式）中指定将哪个名称空间用作默认名称空间（即，当没有名称空间前缀时使用哪个名称空间）。因此，您必须为要使用的任何命名空间声明一个前缀，然后在匹配模式中使用该前缀。如上图所示。

# c# - Windows 服务：如何对请求进行负载平衡

> ID：12408737
> 
> 赞同：0
> 
> 时间：2012-09-13T14:35:26.133
> 
> 标签：c#, windows-services, load-balancing

我当前的解决方案如下所示： 在我的计算机上，我有一个与 Microsoft Dynamics 保持持久连接的 Windows 服务。使用服务引用，我的客户端软件调用服务并向 Microsoft Dynamics 发送请求。

这很好用。

我需要做的是：

*   拥有 10 个与 Microsoft Dynamics 的持久连接的服务（或许多服务）
*   对来自多个客户端的连接进行负载平衡访问，因此可以并行处理请求

你有什么建议，这是如何实现的？一切都应该用 C# 编程。

//编辑：

[http://joefreeman.co.uk/blog/2010/03/creating-a-setup-project-for-a-windows-wcf-service-with-visual-studio/](http://joefreeman.co.uk/blog/2010/03/creating-a-setup-project-for-a-windows-wcf-service-with-visual-studio/)

我使用此服务并添加了我在这里找到的连接东西：http: [//blogs.msdn.com/b/cesardelatorre/archive/2007/07/06/accessing-dynamics-ax-4-0-from-net-使用-the-dynamics-ax-net-business-connector.aspx](http://blogs.msdn.com/b/cesardelatorre/archive/2007/07/06/accessing-dynamics-ax-4-0-from-net-using-the-dynamics-ax-net-business-connector.aspx)

# c++ - 从套接字接收前几个字节以确定缓冲区大小

> ID：12408738
> 
> 赞同：4
> 
> 时间：2012-09-13T14:35:26.900
> 
> 标签：c++, sockets, network-programming

我正在`c++`使用`TCP/IP`和编写分布式系统`sockets`。

对于我的每条消息，我需要接收前 5 个字节才能知道传入消息的完整长度。

最好的方法是什么？

1.  `recv()`只有 5 个字节，然后`recv()`再一次。如果我选择这个，假设我会在 recv 中得到 0 或 5 个字节（也就是不写循环继续尝试）是否安全？
2.  利用`MSG_PEEK`
3.  `recv()`一些更大的缓冲区大小，然后读取前 5 个字节并分配最终缓冲区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:49:21.070

你*不需要*知道任何事情。TCP 是一种流协议，在任何给定时刻，您都可以获得少至一个字节或多至几兆字节的数据。使用 TCP 套接字的正确且唯一的方法是循环读取。

```
char buf[4096];        // or whatever

std::deque<char> data;

for (int res ; ; )
{
    res = recv(fd, buf, sizeof buf, MSG_DONTWAIT);

    if (res == -1)
    {
        if (errno == EAGAIN || errno == EWOULDBLOCK)
        {
            break;  // done reading
        }
        else
        {
            // error, break, die
        }
    }
    if (res == 0)
    {
        // socket closed, finalise, break
    }
    else
    {
        data.insert(data.end(), buf, buf + res);
    }
} 
```

循环的唯一目的是将数据从套接字缓冲区传输到您的应用程序。然后，您的应用程序必须*独立*决定队列中是否有足够的数据来尝试提取某种更高级别的应用程序消息。

例如，在您的情况下，您将检查队列的大小是否至少为 5，然后检查前五个字节，然后检查队列是否包含完整的应用程序消息。如果不是，则中止，如果是，则提取整个消息并从队列的前面弹出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:50:08.233

使用具有两种状态的状态机：

**第一州。**

在字节到达缓冲区时接收它们。当有 5 个或更多字节时，对前 5 个字节执行检查，并可能处理缓冲区的其余部分。切换到第二种状态。

**第二国。**

在字节到达消息末尾时接收并处理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T17:00:53.037

具体回答您的问题：

1.  假设你会得到 0 或 5 是不安全的。也有可能得到 1-4。循环直到你得到 5 或其他人建议的错误。
2.  我不会打扰PEEK，大多数时候你会阻塞（假设阻塞调用）或得到5所以跳过额外的调用进入堆栈。
3.  这也很好，但增加了复杂性却收效甚微。

# php - 如何使用 NSURLConnection 获得 PHP 回显？

> ID：12408739
> 
> 赞同：2
> 
> 时间：2012-09-13T14:35:28.197
> 
> 标签：php, ios, xcode, nsurlconnection, nsdata

我能得到一些帮助吗？我很绝望。我有一个 PHP 脚本，它被发送参数，它进行一些处理，然后使用 echo 输出结果。我用过

```
[[NSString alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"myPHPPathWithParameters"]] encoding:NSUTF8StringEncoding]; 
```

过去获取 php 作为 NSSTRing 回显的信息，并且它有效，但现在它没有。它返回一个 NULL NSString。无论如何，我认为正确的方法是实现 NSURLConnection 因为它实现了用于查看连接进度等的委托方法。因此，我声明了一个静态 NSMutableData *receivedData 然后我使用 iOS 文档中的示例：

```
 NSURLRequest *req=[NSURLRequest 
                          requestWithURL:[NSURL URLWithString:@"http://myphp.php?parameters=paramteres"]
                          cachePolicy:NSURLRequestUseProtocolCachePolicy
                          timeoutInterval:30.0];

    NSURLConnection *con=[[NSURLConnection alloc] initWithRequest:req delegate:self];

    if (con)
        receivedData = [[NSMutableData data] retain];
    else 
        NSLog(@"Request failed to load."); 
```

然后我实现了委托方法（我也在 self 中声明了 NSURLConnectionDataDelegate）：

```
 -(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    NSLog(@"RECEIVED DATA;");
    [receivedData appendData:data];
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    NSLog(@"received response;");
    [receivedData setLength:0];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    NSLog(@"FINISHED;");
} 
```

但是这些方法永远不会被调用！终端从不显示任何显示委托方法已执行的日志消息。据我了解，调用此方法并将数据附加到 receivedData 之后，一旦调用 connectionDidFinishLoading 方法，我就必须从 receivedData 获取 NSString。有什么建议么？我还尝试了 NSURLConnection 中的同步请求类方法，但该方法获取整个 HTML，我只想获取 php 回显并将其解析为 NSString 以在应用程序内部使用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:48:51.150

转换`receivedData`成字符串

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    NSString *myStringData = [[NSString alloc] initWithData:receivedData encoding:NSStringEncodingConversionAllowLossy];
} 
```

然后打印你的字符串`NSLog(@"MyString: %@", myStringData)`

# javascript - 输入最后一位后自动提交

> ID：12408745
> 
> 赞同：0
> 
> 时间：2012-09-13T14:35:46.750
> 
> 标签：javascript, jquery, forms, field

我有一个字段 12345，我需要在输入最后一个数字 5 时自动提交表单...

如何用 javascript 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:41:01.613

我看到有人创建了一个 jquery 结果，但这里是一个纯 javascript

```
<input type="text" onkeyup="submitForm(this.value)">

function submitForm(str){
   if(str.length=5){
     document.forms["myform"].submit();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:40:11.677

```
 $('.input').change(function() {
        if ($(this).val().length >= 5) {
            $('.Form').submit();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:40:55.870

或这个：

```
$('input[type=text]').on('keyup', function(){
    if($(this).val().length == 5){
        alert('5 digit!');
        //$('#myform').submit();
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T14:41:42.797

```
$('#input').keyup(function(){
    var content = new String( $(this).val() );
    if( content.length > 4 ){
        /* do your stuff here */
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T14:42:25.073

[http://jsfiddle.net/3xHsn/](http://jsfiddle.net/3xHsn/)

```
$("#foo").keyup(function(){
    var val = $(this).val();

    if (val.length == 5 && Number(val)){
        $("form").submit();
    }
});​ 
```

仅当值为 5 位并且是有效数字时才会提交。另一种方法是使用正则表达式将值验证为邮政编码。

正则表达式解决方案可以在这里找到：http: [//jsfiddle.net/3xHsn/1/](http://jsfiddle.net/3xHsn/1/)

```
$("#foo").keyup(function(){
    var val = $(this).val();
    var regex = /^\d{5}$/;

    if (val.match(regex)){
        $("form").submit();
    }
});​ 
```

正则表达式在这里非常简单，只检查字符串是否正好是五位数字并且只有五位数字。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T14:49:57.230

此解决方案假定您已相应设置了 maxlength 属性。它还使用“输入”事件，根据我的经验，它比 keypress、keyup 等更可靠。

html:

```
<form id="theform" action="gfdgf">
    <input id="someid" type="text" maxlength="5"/>
</form>​ 
```

jQuery：

```
$(document).on('input','#someid',function() {
    var that=$(this);
    if (that.val().length==that.attr('maxlength')) {
        that.closest('form').submit();
    }
});​ 
```

[小提琴](http://jsfiddle.net/WVWt2/1/)

# php - 如何在一个视图中制作 2 个表单来处理同一个实体但只有一个绑定到它？

> ID：12408747
> 
> 赞同：0
> 
> 时间：2012-09-13T14:35:55.623
> 
> 标签：php, symfony

事情就是这样。

我想在一个视图中制作 2 个表单。一个绑定到实体，另一个是文件类型，我想在其中放置 .csv 并捕获其中的信息以填充第一个实体。

我已经创建了第一个，但我不知道如何创建第二个并将其正确集成到同一个视图中，这样它们就不会互相争斗。这是我的文件（csv 进程还没有在这里）

我的控制器：

```
public function adminAction()
    {
    $form = $this->createForm(new StudentsType, null);
    $formHandler = new StudentsHandler($form, $this->get('request'), $this->getDoctrine()->getEntityManager());

    if( $formHandler->process() )
    {
        return $this->redirect( $this->generateUrl('EnsgtiEnsgtiBundle_ens'));
    }

    return $this->render('EnsgtiEnsgtiBundle:Appli:admin.html.twig', array(
        'form' => $form->createView(),
    ));

    } 
```

第一种形式：

```
class StudentsType extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('nom', 'text')->setRequired(false)
            ->add('prenom', 'text')
            ->add('email', 'email')
            ->add('codeEtape', 'text')
            ->add('file', new StudentsListType)->SetRequired(false);
    }

    public function getName()
    {
        return 'ensgti_ensgtibundle_studentstype';
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Ensgti\EnsgtiBundle\Entity\Students',
        );
    }

} 
```

处理程序：

```
class StudentsHandler
{
    protected $form;
    protected $request;
    protected $em;

    public function __construct(Form $form, Request $request, EntityManager $em)
    {
        $this->form    = $form;
        $this->request = $request;
        $this->em      = $em;
    }

    public function process()
    {
        if( $this->request->getMethod() == 'POST' )
        {
            $this->form->bindRequest($this->request);

            if( $this->form->isValid() )
            {
                $this->onSuccess($this->form->getData());

                return true;
            }
        }

        return false;
    }

    public function onSuccess(Students $students)
    {
        $this->em->persist($students);
        $this->em->flush();
    }
} 
```

第二种形式：

```
class StudentsListType extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
        ->add('', 'file');

    }

    public function getName()
    {
        return 'ensgti_ensgtibundle_studentslisttype';
    }

} 
```

处理程序：

```
class StudentsListHandler
{
    protected $form;
    protected $request;
    protected $em;

    public function __construct(Form $form, Request $request, EntityManager $em)
    {
        $this->form    = $form;
        $this->request = $request;
        $this->em      = $em;
    }

    public function process()
    {
        if( $this->request->getMethod() == 'POST' )
        {
            $this->form->bindRequest($this->request);

            if( $this->form->isValid() )
            {
                //$this->onSuccess($this->form->getData());
                print_r($this->form->getData());
                return true;
            }
        }

        return false;
    }

    public function onSuccess(/*StudentsList $studentsList*/)
    {
        //$this->em->persist($studentsList);
        //$this->em->flush();
        echo 'Petit test';
    }
} 
```

使用此代码，我得到以下信息：

> “Ensgti\EnsgtiBundle\Entity\Students”类中既不存在属性“file”，也不存在方法“getFile()”或方法“isFile()”

这是正常的，因为我绑定到没有文件类型的实体。我是初学者，所以我一直在阅读文档，但我仍然很难理解所有内容。有没有一种方法可以在同一个视图中制作 2 个表单，其中一个表单未绑定到实体，但无论如何都会通过 csv 处理持续存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:49:10.820

问题是表单期望`file`成为绑定实体的属性。您只需要将 设置`property_path`为 false。（[参考](http://www.richsage.co.uk/2011/07/20/adding-non-entity-fields-to-your-symfony2-forms/)）例如

```
->add('file', new StudentsListType, array('property_path' => false)) 
```

**编辑：**

如果将 2 个表单完全分开会更有意义，那么`->add(/*...*/)`完全删除上面的内容，然后将两个表单从控制器传递给视图。然后，您可以单独渲染每一个。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-13T14:46:30.477

用来`<iframe>`做那件事。这是如何使用它的[链接](http://www.w3schools.com/tags/tag_iframe.asp)`src`，只需将属性 url 放入所需页面。您可以在一种布局中显示 2 页。这就是它的 [样子](http://www.w3schools.com/html/html_iframe.asp)

# iphone - iOS 通过插孔端口捕获音频

> ID：12408755
> 
> 赞同：0
> 
> 时间：2012-09-13T14:36:14.390
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我知道ios音频编程可以将音频信号路由到耳机插孔端口而不是扬声器。

但是如何将耳机插孔端口视为输入麦克风（并能够捕获信号）？

那可能吗？

这就是我需要的

[很酷的视频解释我需要什么](https://www.youtube.com/watch?v=NsQiDDhZLDU)

![在此处输入图像描述](../Images/618f8da67b9373260e794b2ece2c79ac.png)

在此先感谢达里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:43:26.497

苹果有一个很好的关于使用音频队列服务的演示项目

[http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)

我建议通过这个项目，它应该告诉你你需要什么。

# jquery - 点击事件后伪悬停类禁用

> ID：12408759
> 
> 赞同：1
> 
> 时间：2012-09-13T14:36:20.290
> 
> 标签：jquery, css

我创建[了一个菜单](http://jsfiddle.net/devin85/tMYxT/15/)，有 3 层。

单击顶级项目后会出现问题。您会注意到，顶部项目上有一个 LI:Hover 伪类，当您将鼠标悬停在它们上方时，它会将它们突出显示为灰色。如果单击这些顶部项目之一，然后在菜单区域外等待 2 秒钟，它将恢复到当前页面的菜单项。

这是问题发生的地方。如果您现在将鼠标悬停在刚刚单击的顶部菜单项上，它的伪悬停似乎已经消失或被禁用。

我不确定这是我的 jQuery/Javascript 错误还是 CSS 错误。

任何帮助都会很棒！

谢谢，德文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:46:48.980

动画运行后，`<li>`最终处于以下状态

```
<li style="background-color: transparent; background-position-y: 24px;"> 
```

`background-color`使用覆盖 CSS 规则的内联

```
#navigation li:hover, .active { background-color: #888888; } 
```

将 revert() 方法从`$curMenuTop.css('backgroundColor', 'transparent');`to更改为`$curMenuTop.css('backgroundColor', '');`应该可以解决问题，因为它会删除 backgroundColor，而不是将其设置为`transparent`并允许 :hover 在必要时仍然获胜。

# count - 对计数（*）进行计数（PK）是否有任何性能改进

> ID：12408766
> 
> 赞同：0
> 
> 时间：2012-09-13T14:36:38.183
> 
> 标签：count, relational-database

是的，我知道这个问题类似于这个线程：[COUNT(*) vs. COUNT(1) vs. COUNT(pk)：哪个更好？](https://stackoverflow.com/questions/2710621/count-vs-count1-vs-countpk-which-is-better)，但这有点不同。

我的学长说`count(PrimaryKey)`，假设`PrimaryKey`不可能`NULL`，从那里得到结果比做一个正常的要快`count(*)`。这是真的？

如果这是真的，那么是否适用于所有 RDBMS？如果可能，请参考（半）官方文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:06:11.740

不，这似乎是一个持续存在的误解，基于语法之间的混淆

```
SELECT * FROM ... 
```

和

```
SELECT COUNT(*) FROM ... 
```

在第一种情况下，`*`引用所有列，返回这些肯定比返回单个列需要更多的资源。在第二种情况下，`COUNT(*)`它只是“计算所有行数”的简写。错误的信念是，它`COUNT(*)`以某种方式指示数据库引擎检查所有行中的所有列，而`COUNT(<pk_field>)`只需要查看一列。

这里还有许多其他关于 SO 的评论引用了 SQL-92 标准，该标准明确指出`COUNT(*)`应该只引用表的基数，因此，至少在理论上，数据库引擎应该能够识别和优化它。

据我所知，在这两种情况下，大多数数据库引擎（[Postgres](http://www.postgresql.org/docs/9.2/static/functions-aggregate.html)、[Oracle](https://dba.stackexchange.com/questions/2511/what-is-the-difference-between-select-count-and-select-countany-non-null-col/2512#comment18515_2512)、[MySQL InnoDB](http://optimmysql.blogspot.ca/2007/07/innodb-row-counting-using-indexes.html)）只会执行索引扫描来计算行数。如果您指定 PK，则将使用该索引；如果您只使用`COUNT(*)`，则查询计划器将选择一个跨越整个表的索引*，但性能应该相同。

我能找到的唯一例外是带有 MyISAM 表的 MySQL——这些表缓存了行数，所以`COUNT(*)`速度非常快。但是，查询计划器也将`COUNT(<field>)`, where `<field>`is any non-null column 识别为对完整表大小的请求，并在这种情况下也使用缓存。（[来源](http://www.mysqlperformanceblog.com/2007/04/10/count-vs-countcol/)）同样，性能没有差异。

[*理论上，如果你没有这样的索引，那么`COUNT(*)`会很慢，但在那种情况下，`COUNT(<pk>)`根据定义是不可能的]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:49:16.877

没关系有几个原因。首先，两种符号——`COUNT(1)`和`COUNT(*)`——都是错误的语法。考虑关于`SUM`聚合的相同问题。哦，`SUM(*)`没有任何意义；为什么？因为，求和是赋值的迭代执行

```
for( int columnValue : columnList )
   currentSum = currentSum + columnValue; 
```

而对于`COUNT`聚合它看起来像这样

```
for( Tuple t : tupleList )
   currentSum = currentSum + 1; 
```

因此，`COUNT`聚合根本不应该有任何参数！

然后，有各种各样的句法怪癖，比如count distinct。这仅仅证明了 SQL 设计者的无能，他们试图将两个连续的操作（选择不同的元组，然后聚合）压缩到一个操作中。

无关紧要的第二个原因是，在实践中您会遇到无数性能不佳的查询，而`COUNT(1)`vs`COUNT(*)`从来都不是瓶颈。

# castle-windsor - 为什么添加构造函数会导致此 MSpec 测试失败并出现 System.InvalidOperationException？

> ID：12408777
> 
> 赞同：1
> 
> 时间：2012-09-13T14:37:13.423
> 
> 标签：castle-windsor, rhino-mocks, mspec

我有第一个版本的课程

```
public class GenerateAuthorisationWorkflows : IGenerateAuthorisationWorkflows
{
    public IList<Guid> FromDtaObjects(IList<DtaObject> dtaObjects, Employee requestingEmployee)
    {
        foreach (var dtaObject in dtaObjects) { }
        return new List<Guid>();
    }

    public IList<Guid> FromDtaObjects()
    {
        return new List<Guid>();
    }
} 
```

MSpec 对其进行测试

```
public abstract class specification_for_generate_workflows : Specification<GenerateAuthorisationWorkflows>
{
    protected static IWorkflowService workflowService;

    Establish context = () => { workflowService = DependencyOf<IWorkflowService>(); };
}

[Subject(typeof(GenerateAuthorisationWorkflows))]
public class when_generate_workflows_is_called_with_a_dta_object_list_and_an_employee : specification_for_generate_workflows
{
    static IList<Guid> result;
    static IList<DtaObject> dtaObjects;
    static Employee requestingEmployee;

    Establish context = () =>
    {
         var mocks = new MockRepository();
         var stubDtaObject1 = mocks.Stub<DtaObject>();
         var stubDtaObject2 = mocks.Stub<DtaObject>();
         var dtaObjectEnum = new List<DtaObject>{stubDtaObject1,stubDtaObject2}.GetEnumerator();
         dtaObjects = mocks.Stub<IList<DtaObject>>();
         dtaObjects.Stub(x => x.GetEnumerator()).Return(dtaObjectEnum).WhenCalled(x => x.ReturnValue = dtaObjectEnum);
         requestingEmployee = mocks.Stub<Employee>();
         mocks.ReplayAll();
    };

    Because of = () => result = subject.FromDtaObjects(dtaObjects, requestingEmployee);

    It should_enumerate_the_dta_objects = () => dtaObjects.received(x=> x.GetEnumerator());
    It should_call_workflow_host_helper = () => workflowService.AssertWasCalled(x => x.StartWorkflow());
} 
```

使用此配置，我的第一个测试通过，第二个测试失败，正如预期的那样。我在类中添加了一个构造函数来注入`IWorkflowService`.

```
public class GenerateAuthorisationWorkflows : IGenerateAuthorisationWorkflows
{
    IWorkflowService _workflowService;

    GenerateAuthorisationWorkflows(IWorkflowService workflowService)
    {
        _workflowService = workflowService;
    }

    public IList<Guid> FromDtaObjects(IList<DtaObject> dtaObjects, Employee requestingEmployee)
    {
        foreach (var dtaObject in dtaObjects)
        {
            Guid workflowKey = _workflowService.StartWorkflow();
        }

        return new List<Guid>();
    }

    public IList<Guid> FromDtaObjects()
    {
        return new List<Guid>();
    }
} 
```

现在，当我运行测试时，它们在以下位置失败`Because`：

```
System.InvalidOperationException: Sequence contains no elements
at System.Linq.Enumerable.First(IEnumerable`1 source)
at MSpecTests.EmployeeRequestSystem.Tasks.Workflows.when_generate_workflows_is_called_with_a_dta_object_list_and_an_employee.<.ctor>b__4() in GenerateAuthorisationWorkflowsSpecs.cs: line 76 
```

为清楚起见，上面的第 76 行是：

```
Because of = () => result = subject.FromDtaObjects(dtaObjects, requestingEmployee); 
```

我试过追踪问题，但没有运气。我尝试设置一个不带参数的构造函数，但它会引发相同的错误。我有类似的具有 IoC 依赖项的类，使用 MSpec/Rhino Mocks 可以正常工作，我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:12:10.967

Castle Windsor 需要一个公共构造函数来实例化一个类。添加`public`到构造函数允许正确操作。

```
public class GenerateAuthorisationWorkflows : IGenerateAuthorisationWorkflows
{
    IWorkflowService _workflowService;

    public GenerateAuthorisationWorkflows(IWorkflowService workflowService)
    {
        _workflowService = workflowService;
    }

    public IList<Guid> FromDtaObjects(IList<DtaObject> dtaObjects, Employee requestingEmployee)
    {
        foreach (var dtaObject in dtaObjects)
        {
            Guid workflowKey = _workflowService.StartWorkflow();
        }

        return new List<Guid>();
    }

    public IList<Guid> FromDtaObjects()
    {
        return new List<Guid>();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:55:29.150

罗文，看起来你回答了自己的问题。**明确声明访问修饰符**是个好习惯！默认情况下，C# 选择`private`. 这些类型的错误很容易错过！

我也可以看到你的`Establish`块太复杂了。您正在测试实现细节而不是*行为*。例如，你是

*   存根在循环`GetEnumerator`内隐式进行的调用。`foreach`
*   断言工作流服务只被调用*一次*
*   混合 MSpec 自动模拟和您自己的本地模拟

您实际上并没有测试*输入列表中的每个对象是否都有一个 GUID。* 如果我是你，我会测试这样的行为......

```
public class GenerateAuthorisationWorkflows : IGenerateAuthorisationWorkflows
{
    private readonly IWorkflowService _service;

    public GenerateAuthorisationWorkflows(IWorkflowService service)
    {
        _service = service;
    }

    public List<Guid> FromDtaObjects(List<DtaObject> input, Employee requestor)
    {
        // I assume that the workflow service generates a new key
        // per input object. So, let's pretend the call looks like
        // this. Also using some LINQ to avoid the foreach or 
        // building up a local list.
        input.Select(x => _service.StartWorkflow(requestor, x)).ToList();
    }
}

[Subject(typeof(GenerateAuthorisationWorkflows))]
public class When_generating_authorisation_keys_for_this_input 
    : Specification<GenerateAuthorisationWorkflows>
{
    private static IWorkflowService _service;
    private static Employee _requestor = new Employee();
    private static List<DtaObject> _input = new List<DtaObject>() 
    {
        new DtaObject(),
        new DtaObject(),
    };
    private static List<Guid> _expected = new List<Guid>()
    {
        Guid.NewGuid(),
        Guid.NewGuid(),
    };

    private static List<Guid> _actual = new List<Guid>();

    Establish context = () =>
    {
        // LINQ that takes each item from each list in a pair. So
        // the service is stubbed to return a specific GUID per 
        // input DtaObject.
        _input.Zip(_expected, (input, output) => 
        {
            DependencyOf<IWorkflowService>().Stub(x => x.StartWorkflow(_requestor, input)).Return(output);
        });
    };

    Because of = () => _actual = Subject.FromDtaObjects(_input, _requestor);

    // This should be an MSpec collection assertion that 
    // ensures that the contents of the collections are
    // equivalent
    It should_get_a_unique_key_per_input = _actual.ShouldEqual(_expected);
} 
```

# wso2 - WSO2 ESB If Then Else，认证或错误

> ID：12408780
> 
> 赞同：0
> 
> 时间：2012-09-13T14:37:23.910
> 
> 标签：wso2, wso2esb, synapse

这可能是一个基本问题，我刚刚习惯了 WSO2 术语。我有两个服务可以使用 WSDL 独立部署并传递正确的 SOAP 请求，并相应地返回信息。现在我想将它们组合成一个“If then, else”语句之类的交易。我相信这将按某种顺序设置，只是不确定如何使用过滤器。

1.  发送带有身份验证请求和信息请求的请求
2.  进行身份验证请求 - 如果通过则继续，失败时 401
3.  做信息请求 - 获取信息
4.  返回信息

如果你有一个我可以关注的样本或指向我的数百个 WSO2 中的一个，我只是无法从他们那里得到太多。配置的 XML 源示例也可以工作。感谢您的帮助，感谢我对 WSO2 术语和工作流程的无知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T02:04:31.580

您可以查看[filter mediator](http://wso2.org/project/esb/java/4.0.3/docs/mediators/filter.html)以根据条件过滤消息[​​ Entitlement Mediator](http://wso2.org/project/esb/java/4.0.3/docs/mediators/entitlement.html)。[您可以在此处](http://wso2.org/project/esb/java/4.0.3/docs/samples_index.html)找到示例作为参考，这将对您的用例有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:46:32.427

所以我最终得到了与此非常相似的东西。如果有人在路上遇到这个并寻找 wso2 配置。

```
 <proxy name="name"
          transports="https http"
          startOnLoad="true"
          trace="disable">
      <description/>
      <target>
         <inSequence>
            <property xmlns:ns1="ns1"
                      xmlns:ns="ns"
                      name="userID"
                      expression="//ns:AuthenticateRequest/ns:Credentials/ns1:userID"
                      scope="default"
                      type="STRING"/>
            <property xmlns:ns1="ns1"
                      xmlns:ns="ns1"
                      name="password"
                      expression="//ns:AuthenticateRequest/ns:Credentials/ns1:password"
                      scope="default"
                      type="STRING"/>

            <log>
               <property name="userID" expression="get-property('userID')"/>
               <property name="password" expression="get-property('password')"/>
            </log>
            <header name="Action"
                    value="http://services.com:port/AuthenticateSecureCredential"/>
            <send receive="AuthRecvSequence">
               <endpoint>
                  <address uri="http://server.com:port/DefaultAuthenticationService"/>
               </endpoint>
            </send>
         </inSequence>
      </target>
   </proxy>

   <sequence name="AuthRecvSequence">
      <filter xmlns:ns="ns"
              source="//ns:AuthenticateSecureCredentialResponse/ns:isAuthenticated"
              regex="false">
         <then>
            <makefault version="soap11">
               <code xmlns:soap11Env="http://schemas.xmlsoap.org/soap/envelope/"
                     value="soap11Env:VersionMismatch"/>
               <reason value="Not Authenticated"/>
               <role/>
            </makefault>
            <header name="To" action="remove"/>
            <property name="RESPONSE" value="true" scope="default" type="STRING"/>
            <send/>
            <drop/>
         </then>
         <else>
            <payloadFactory>
               <format>
                  <ns:INFO xmlns:ns="ns"
                                    xmlns:ns1="ns1">
                     <ns:secureCredentials>
                        <ns1:userID>$1</ns1:userID>
                        <ns1:password>$2</ns1:password>
                     </ns:secureCredentials>
                  </ns:INFORequest>
               </format>
               <args>
                  <arg expression="get-property('userID')"/>
                  <arg expression="get-property('password')"/>
               </args>
            </payloadFactory>
            <header name="Action"
                    value="http://services.com/GetINFO"/>
            <send receive="INFOrRecvSeq">
               <endpoint>
                  <address uri="http://server:port/INFOService"/>
               </endpoint>
            </send>
         </else>
      </filter>
   </sequence>

   <sequence name="INFORecvSeq">
      <send/>
   </sequence>
   <sequence name="main">
      <description>The main sequence for the message mediation</description>
   </sequence> 
```

# java - kSoap2 多部分/相关响应

> ID：12408784
> 
> 赞同：2
> 
> 时间：2012-09-13T14:37:54.203
> 
> 标签：java, android, xml, ksoap2, multipart

当我们想要调用它时，我们无法从 Web 服务获得响应。我们正在使用 KSOAP2 库，当我们想要获取具有 Content-Type text/xml 的普通 SOAPObjects 时，一切顺利，但现在我们需要从一个返回内容类型的操作中获得响应：multipart/related。所以标准代码不起作用。

```
public SoapObject getDocuments(String id, String type)
{

    SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME_GETDOCUMENTS);
    Request.addProperty("humres", id);
    Request.addProperty("type", type);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(Request);
    envelope.dotNet = true;

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.debug = true; 
    try
    {
        androidHttpTransport.call(SOAP_ACTION_GETDOCUMENTS, envelope);
        SoapObject response = (SoapObject)envelope.getResponse();
        return response;        
    }
    catch(XmlPullParserException exPull)
    {
        exPull.printStackTrace();
        return null;
    }
    catch(IOException exIO)
    {
        exIO.printStackTrace();
        return null;
    }
} 
```

接下来是我们收到的错误

```
 09-13 14:14:31.078: W/System.err(875): org.xmlpull.v1.XmlPullParserException: PI must not start with xml (position:unknown --=_1e3686ff8230e83d586a024e6feaaf4d
09-13 14:14:31.078: W/System.err(875): Content-Transfer-Encoding: 8bit
09-13 14:14:31.111: W/System.err(875): Content-Type: text/xml;
09-13 14:14:31.111: W/System.err(875):  charset=UTF-8
09-13 14:14:31.111: W/System.err(875): @6:5 in java.io.InputStreamReader@406386b8) 
09-13 14:14:31.111: W/System.err(875):  at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273)
09-13 14:14:31.118: W/System.err(875):  at org.kxml2.io.KXmlParser.error(KXmlParser.java:269)
09-13 14:14:31.118: W/System.err(875):  at org.kxml2.io.KXmlParser.parseLegacy(KXmlParser.java:398)
09-13 14:14:31.118: W/System.err(875):  at org.kxml2.io.KXmlParser.nextImpl(KXmlParser.java:366)
09-13 14:14:31.118: W/System.err(875):  at org.kxml2.io.KXmlParser.next(KXmlParser.java:1378)
09-13 14:14:31.118: W/System.err(875):  at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:1408)
09-13 14:14:31.118: W/System.err(875):  at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:127)
09-13 14:14:31.129: W/System.err(875):  at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)
09-13 14:14:31.129: W/System.err(875):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:197)
09-13 14:14:31.129: W/System.err(875):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
09-13 14:14:31.129: W/System.err(875):  at com.cx.pservices.WebserviceUbPlus.getInvoice(WebserviceUbPlus.java:133)
09-13 14:14:31.129: W/System.err(875):  at com.cx.pservices.employer.facaturetab$Progress.doInBackground(facaturetab.java:346)
09-13 14:14:31.138: W/System.err(875):  at com.cx.pservices.employer.facaturetab$Progress.doInBackground(facaturetab.java:1)
09-13 14:14:31.148: W/System.err(875):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
09-13 14:14:31.148: W/System.err(875):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
09-13 14:14:31.158: W/System.err(875):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
09-13 14:14:31.158: W/System.err(875):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
09-13 14:14:31.158: W/System.err(875):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
09-13 14:14:31.158: W/System.err(875):  at java.lang.Thread.run(Thread.java:1019) 
```

响应 XML

```
 <SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
   <SOAP-ENV:Body>
      <ns1:GetInvoiceResponse xmlns:ns1="UBplusOnlineWebservice">
         <invoice xsi:type="xsd:string">
            <resultxml>
               <statuscode>100</statuscode>
               <message>
                  <Invoice>
                     <DocumentId>05-000053</DocumentId>
                     <Amount>36.89</Amount>
                     <Date>2012-09-06 00:00:00</Date>
                     <Description>Factuur 22050003</Description>
                  </Invoice>
               </message>
               <attachments>1</attachments>
               <filenames>
                  <filename>05-000053-05-22050003.pdf</filename>
               </filenames>
            </resultxml>
         </invoice>
      </ns1:GetInvoiceResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

也许知道我们除了原始的东西是件好事

```
HTTP/1.1 200 OK
Date: Thu, 13 Sep 2012 11:56:44 GMT
Server: Apache
X-Powered-By: PHP/5.2.17
Set-Cookie: cisession=WDRVaFAxC2MAKAF1VjtbMw9sWjNUIgMnCDZXd1hzB2hYYwdkBgsFbl00AidQPwQlBG0GMlE0Xj1XJgZlVTJXYQ03UTUAO1E2UzYCPFRjBD5YM1VnUGcLPQBmAWRWY1s3D25aMFRmA2MIMVc9WGEHN1hpBzMGZAVhXWICJ1A%2FBCUEbQYwUTZePVcmBjxVcVdfDTdRZgA8USVTYgJ8VHUEJFhuVSFQPgtoAGEBPFYjWzUPa1onVDEDYghhVypYNgcyWCIHPgZtBSVdawJ2UD4EZwRnBjtRJF5yV3cGMFVzV18NN1FlAD1ROVNzAi1UPQR1WG9VYVAwC2MAcQFHVnFbYw8%2FWmFUZQN5CBtXcFh0B3FYTwdmBj0FYl0%2BAnFQKwRiBHkGMFEoXjZXJAZ9VWtXYQ0gUWMAeFFmUykCOlQvBCRYblUhUD4LaABgATxWI1tuDz1aelR0AwsIMldnWHQHaFh6B2MGIAV%2BXXICPlBtBGwEZgYyUTJeMFcxBmZVNlc0DWZRNgBjUSRTPQI2VDwEJFggVSFQYQsrAAwBYlZgW3YPPVorVDsDJwhpVzRYOgcjWC4HMQYp; path=/; domain=.ubplusonline.nl
Set-Cookie: cisession=C2dRbFc3C2NReVImAG1dNQZlWjNcKlVxCDZXdwArBGtWbQJhVVgCaQtiACVVOgorBG0PO1YzC2hVJFU2UDdQZg03UTUDOABnVDEEOlBnUmgLYFFjV2ALPVE3UjcANV0xBmdaMFxuVTUIMVc9ADkENFZnAjZVNwJmCzQAJVU6CisEbQ85VjELaFUkVW9QdFBYDTdRZgM%2FAHRUZQR6UHFScgs9USVXOQtoUTBSbwB1XTMGYlonXDlVNAhhVyoAbgQxViwCO1U%2BAiILPQB0VTsKaQRnDzJWIwsnVXVVY1B2UFgNN1FlAz4AaFR0BCtQOVIjCzxRZVc3C2NRIFIUACddZQY2WmFcbVUvCBtXcAAsBHJWQQJjVW4CZQtoAHNVLgpsBHkPOVYvC2NVJlUuUG5QZg0gUWMDewA3VC4EPFArUnILPVElVzkLaFExUm8AdV1oBjRaelx8VV0IMldnACwEa1Z0AmZVcwJ5CyQAPFVoCmIEZg87VjULZVUzVTVQM1AzDWZRNgNgAHs%3D; path=/; domain=.ubplusonline.nl
X-SOAP-Server: NuSOAP/0.9.5 (1.3)
Content-Encoding: gzip
Content-Length: 3176
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: multipart/related; type="text/xml";  boundary="=_5f570f873903a0a03b45f977ae3c4a2f"

--=_5f570f873903a0a03b45f977ae3c4a2f
Content-Transfer-Encoding: 8bit
Content-Type: text/xml;
 charset=UTF-8

<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><ns1:GetInvoiceResponse xmlns:ns1="UBplusOnlineWebservice"><invoice xsi:type="xsd:string"><resultxml>
  <statuscode>100</statuscode>
  <message>
    <Invoice>
      <DocumentId>05-000053</DocumentId>
      <Amount>36.89</Amount>
      <Date>2012-09-06 00:00:00</Date>
      <Description>Factuur 22050003</Description>
    </Invoice>
  </message>
  <attachments>1</attachments>
  <filenames>
    <filename>05-000053-05-22050003.pdf</filename>
  </filenames>
</resultxml></invoice></ns1:GetInvoiceResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>
--=_5f570f873903a0a03b45f977ae3c4a2f
Content-Transfer-Encoding: base64
Content-ID: <cc9034cb2aa23a6357e46d8f45e682d5>
Content-Type: application/pdf;
 name=
Content-Disposition: attachment;
 filename= 
```

任何人都知道如何解决这个问题？无论如何

# javascript - 面向对象的 Javascript 代码在 IE7 中不起作用

> ID：12408785
> 
> 赞同：0
> 
> 时间：2012-09-13T14:37:54.783
> 
> 标签：javascript, oop, internet-explorer-7

我有以下代码。

```
function radioButtons() {

var _inputCount;
var _inputParentCount;
var _radioInput;

return {

    inputCounter:function(groupId){

        _inputCount = $(groupId).find("input");
        _inputParentCount = $(_inputCount).parent();

        for(i = 0; i < _inputParentCount.length; i++){
            $(_inputParentCount[i]).attr("id", groupId + [i]);
        }

    },

    radioAction:function(radioButton){

        _radioInput = $(radioButton).find("input");

        for(i = 0; i < _inputCount.length; i ++){

            $(_inputCount[i]).parent().removeClass("selected");
            $(_inputCount[i]).attr("value", "false");

        }

        $(radioButton).addClass("selected");
        $(_radioInput).attr("value", "true");
    },

};
};

var radioButtonsOne = new radioButtons();

$(document).ready(function(){
radioButtonsOne.inputCounter("#radioButtonsGroup");
}); 
```

它是我为自定义单选按钮编写的自定义函数。我有一个类似的复选框按钮。它在除 IE7 之外的所有浏览器中都能完美运行。它告诉我`radioButtonsOne`没有定义。但它是。知道为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T14:40:05.757

改变

```
 $(radioButton).addClass("selected");
        $(_radioInput).attr("value", "true");
    }, 
```

去除那个`,`

```
 $(radioButton).addClass("selected");
        $(_radioInput).attr("value", "true");
    } 
```

# c++ - 静态成员分配前调用函数

> ID：12408787
> 
> 赞同：0
> 
> 时间：2012-09-13T14:37:59.993
> 
> 标签：c++, design-patterns, memory-management, static-members

我正在使用第 3 方 API 来覆盖 C 运行时库中的内存管理功能。为了让一切正常工作，我必须在进行任何内存分配之前调用初始化 API。

我正在处理的项目使用一个静态工厂对象，该对象在执行主文件中的任何代码之前动态初始化。

如何确保在静态工厂对象之前初始化 API？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T15:40:35.470

C++ 标准库遇到了同样的问题：它必须确保在任何代码（包括静态对象的构造函数）使用它们之前初始化 、 等`cin`。`cout`为处理这种情况而发明的技巧也可以解决您的问题。**在每个翻译单元中首先**包含的头文件中（嗯，每个翻译单元都有带有动态初始化器的静态对象）：

```
class init_library {
public:
    init_library() { if (counter++ == 0) initilaize_the_library(); }
private:
    static int counter;
};

static init_library i_library; 
```

在一个翻译单元中，您必须提供`init_library::counter`.

`init_library`这将在每个拉入标题的翻译单元中放置一个类型的静态对象。它的初始化将在同一个翻译单元中的任何其他初始化**之前发生（因为它的 #include 指令****首先**出现- 不要忘记这一点！），并且当这些对象中的一个第一次被初始化时，它将调用代码来初始化图书馆。（请注意，此代码不是线程安全的；使其成为线程安全的很简单）

这被称为“漂亮的反技巧”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T14:40:40.580

您应该将静态工厂对象初始化移动到静态函数，并在将第 3 方库初始化为 main 中的第一件事后调用该函数。

# perl - MySQL 连接在 Perl CGI 脚本中不起作用

> ID：12408795
> 
> 赞同：2
> 
> 时间：2012-09-13T14:38:16.413
> 
> 标签：perl, apache, tomcat, cgi, dbi

我可以使用 Perl 脚本中的 DBI 模块轻松连接到远程 MySQL 服务器。但是，当我尝试在 CGI 脚本中使用相同的连接设置/属性时，连接会失败。

尽管使用了 apache 错误日志或浏览器，但没有记录有用的错误/警告

```
use CGI::Carp qw(warningsToBrowser fatalsToBrowser); 
```

奇怪的是，当从终端执行时，完全相同的脚本可以正常工作。我还尝试将 CGI 脚本连接到本地主机上的 MySQL 服务器，但没有任何成功。

另一方面，phpMyAdmin 在机器上工作得很好。

我正在使用 CentOS 5.8 版。我怀疑这是apache用户或操作系统上其他任何地方的系统/权限问题，但已经走到了死胡同。

任何指针将不胜感激！

非常感谢。

*编辑：我正在使用以下连接字符串*

```
$dbh = DBI->connect($ds, $uname, $pwd,{RaiseError => 1 }) or die "$DBI::errstr Could not connect: $!<br>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:32:02.787

修复。万一不太熟悉 Linux 管理的人面临类似的问题，这就是发生的事情。我的 CentOS 机器上的安全系统“selinux”禁止 httpd 与远程 MySQL 服务器建立网络连接。必须使用以下命令显式启用它

```
setsebool -P httpd_can_network_connect=1 
```

可以在这里阅读更多关于 selinux 的信息：

[http://wiki.centos.org/HowTos/SELinux](http://wiki.centos.org/HowTos/SELinux)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:37:32.520

检查您在 MySQL 中设置了哪些用户。如果您尝试通过网络连接进行连接，则用户的主机关联可能存在问题。

尝试：从 mysql.user 中选择主机、用户

# delphi - 请求访问令牌时 AppEngine 错误 400

> ID：12408798
> 
> 赞同：3
> 
> 时间：2012-09-13T14:38:19.830
> 
> 标签：delphi, google-app-engine, oauth, indy

我正在编写一个基于 Delphi 的 PC 应用程序，它可以访问 AppEngine servlet。我正在尝试使用 OAuth 1.0 dance 对用户进行身份验证并允许访问应用程序的受限部分。我可以使用浏览器访问受限制的 servlet 并通过 google 用户身份验证。我现在正在尝试实现舞蹈。我使用 OAuthGetRequestToken 成功获取了令牌和令牌机密。

```
Key := 'XXXX.appspot.com';
Secret := 'YYYY';
URL := 'https://XXXX.appspot.com/_ah/OAuthGetRequestToken';
Consumer := TOAuthConsumer.Create(Key, Secret);
HMAC := TOAuthSignatureMethod_HMAC_SHA1.Create;
ARequest := TOAuthRequest.Create(URL);
ARequest := ARequest.FromConsumerAndToken(Consumer, nil, URL,'','oob','');
ARequest.Sign_Request(HMAC, Consumer, nil,true);
URL := URL + '?' + ARequest.GetString;
idHTTP1.Get(URL,ms);
ARequest.Destroy;
HMAC.Destroy;
Consumer.Destroy; 
```

GET 请求和响应如下所示：

```
GET /_ah/OAuthGetRequestToken HTTP/1.1
Host: XXXX.appspot.com
Accept: */*
Authorization: OAuth oauth_version="1.0", oauth_nonce="1511ec6d98e5b89c561b1af4b3022476", oauth_timestamp="1347534557", oauth_consumer_key="XXXX.appspot.com", oauth_callback="oob", oauth_signature_method="HMAC-SHA1", oauth_signature="JPSgMsipsLumldKsca8SA8gDXgw%3D"

HTTP/1.1 200 OK
Date: Thu, 13 Sep 2012 11:09:18 GMT
Content-Type: text/html
Server: Google Frontend
Content-Length: 88
oauth_token=4%2FY4ReEZt9v8IYHJ_4WnZYkzurXOgw&oauth_token_secret=S9150fuyvo_jjr43Cd47CPzY 
```

接下来，我授权令牌。

```
URL := 'https://inksureauth.appspot.com/_ah/OAuthAuthorizeToken?oauth_token='+TOAuthUtil.urlEncodeRFC3986(Token.Text);
IdHTTP1.Get(URL,ms); 
```

我被重定向到谷歌网页进行登录。正如我所说的回调“oob”，我在复制的网页上收到了一个验证码。

最后，我尝试将令牌交换为访问令牌。在这里我失败了。

```
URL := 'https://XXXX.appspot.com/_ah/OAuthGetAccessToken';
Key := 'XXXX.appspot.com';
Secret := 'YYYY';
Consumer := TOAuthConsumer.Create(Key, Secret);
ARequest := TOAuthRequest.Create(URL);
AToken := TOAuthToken.Create(TOAuthUtil.urlEncodeRFC3986(Token.Text), TokenSecret.Text);
ARequest.HTTPURL := URL;
ARequest := ARequest.FromConsumerAndToken(Consumer,AToken , URL,'','','VERIFICATION CODE FROM WEB PAGE');
HMAC := TOAuthSignatureMethod_HMAC_SHA1.Create;
ARequest.Sign_Request(HMAC, Consumer, AToken,true);
URL := URL + '?' + ARequest.GetString;
IdHTTP1.Disconnect;
IdHTTP1.Get(URL,ms);
HMAC.Destroy;
ARequest.Destroy;
Consumer.Destroy; 
```

GET 命令如下所示：

```
GET /_ah/OAuthGetAccessToken?oauth_version=1.0&oauth_nonce=4A86BEECE494C25AF94882F74DEE6231&oauth_timestamp=1347545383&oauth_consumer_key=XXXX.appspot.com&oauth_verifier=yGEhCENYOlni2ayo8aNckyPG&oauth_token=4%2FEKGFo9i2wmuMGcBLmbmQhqDba0z4&oauth_signature_method=HMAC-SHA1&oauth_signature=2ZwRvGp8LnXenTXrjYo5%2FtFHW30%3D HTTP/1.1 
```

和回应：

```
HTTP/1.1 400 Bad Request
Date: Thu, 13 Sep 2012 14:09:44 GMT
Content-Type: text/html; charset=UTF-8
Server: Google Frontend
Content-Length: 273

<html><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>400 Bad Request</title>
</head>
<body text=#000000 bgcolor=#ffffff>
<h1>Error: Bad Request</h1>
<h2>Your client has issued a malformed or illegal request.</h2>
<h2></h2>
</body></html> 
```

我使用 OAuth 游乐场访问同一个应用程序，它成功检索了访问密钥。我将游乐场的请求参数与我的应用程序生成的参数进行了比较，它们是兼容的。我使用我的签名功能签署了由游乐场生成的请求并且签名匹配。最后一步失败还有什么其他原因？除了“您的客户端发出了格式错误或非法的请求”之外，是否可以从身份验证服务器获得更多信息？

更新：我已使用我的应用程序成功检索到 Google 日历的访问令牌。使用相同的代码，我改回 AppEngine 应用程序并在 GetAccessToken 步骤中失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-08T15:46:58.983

谷歌同时迁移到 Oauth 2.0。您可以在此处找到 OAuth 2.0 客户端身份验证解决方案：

[https://github.com/lordcrc/IndySASLOAuth2](https://github.com/lordcrc/IndySASLOAuth2)

> Indy 的简单 OAuth2 SASL 身份验证器。
> 
> 使用 Delphi REST 客户端库。
> 
> 在德尔福 XE6 上测试。
> 
> 在 Apache 2.0 许可下获得许可

# c - 我正在构建一个小外壳。如何将两个进程的标准输入和输出设置为管道，以便它们可以通信？

> ID：12408799
> 
> 赞同：0
> 
> 时间：2012-09-13T14:38:25.143
> 
> 标签：c, shell, unix, fork, pipe

我正在尝试实现我自己的一个非常小的外壳。我必须能够处理管道，比如

```
ls -l | wc -l 
```

但一次只能用于两个程序。现在，我有这个：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>
#include <sys/wait.h>

#define BUFFER_SIZE 256
#define NO_PARAMS 32

void split_string(char **params, char *string){ 
  char *arg;
  int i;

  arg = strtok(string, " ");
  params[0] = arg;
  i = 1;
  while(arg != NULL){
    arg = strtok(NULL, " ");
    params[i] = arg;
    i++;
  }
}

int main(int argc, char **argv){
  char string[BUFFER_SIZE];
  char *prog1, *prog2;
  int i, err; 
  int fd[2];
  pid_t pid1, pid2;
  size_t buffer = BUFFER_SIZE;
  char *params1[NO_PARAMS], *params2[NO_PARAMS];
  int pipe_exists = 0;

  memset(string,0,buffer); 

  while(1){
    /*Read command*/ 
    fgets(string, BUFFER_SIZE-1, stdin);
    if(string == NULL){
      perror("Error reading input:\n");
      exit(1);
    }

    /*replace linefeed character with end of line character*/
    for(i=0;i<BUFFER_SIZE;i++){
      if(string[i] == 10){
        string[i] = 0;
      }
    }       

    /*check if command is "exit"*/
    if(strcmp(string,"exit") == 0){
      return 0;
    }

    /*split command into different program calls*/
    prog1 = strtok(string, "|");
    prog2 = strtok(NULL,"\0");
    if(prog2 != NULL){
      pipe_exists = 1;
      printf("PIPE!\n");
      err =  pipe(fd);
      if(err<0){
        perror("Error creating pipe:\n");
        exit(1);
      }

    }

    /*split string into arguments*/
    split_string(params1, prog1);
    if(pipe_exists){
      split_string(params2, prog2);
    }

    /*fork child process*/
    pid1 = fork(); 

    if(pid1==0){ /*child 1*/
      if(pipe_exists){
        close(fd[0]); /*close read-end*/
        err = dup2(fd[1], 1);
        if(err<0){
          perror("Error with dup in child 1!\n");
          exit(1);
        }
      }
      execvp(params1[0],params1);
      perror("Error calling exec()!\n");
      exit(1);

    }else{ /*parent*/
      if(pipe_exists){

        pid2 = fork();

        if(pid2==0){ /*child 2*/
          close(fd[1]); /*close pipe write-end*/
          err = dup2(fd[0], 0);

          if(err<0){
            perror("Error with dup in child 2!\n");
            exit(1);
          }
          execvp(params2[0],params2);
          perror("Error calling exec()!\n");
          exit(1);

        }else{ /*parent with 2 children*/
          waitpid(pid1,0,0);
          waitpid(pid2,0,0);
        }
      }else{ /*parent with 1 child*/
       waitpid(pid1,0,0); 
      }
    }
  }
} 
```

现在，它可以很好地处理单个命令，但是当我输入类似上面的命令时，什么也没有发生！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:54:32.630

哦！我已经想通了。我也不得不关闭父程序中的管道:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:04:46.140

带有管道的命令中有 3 个主要部分。

*   开始，采用标准输入并管道输出`something |`
*   中间，可选或随意重复，有两个管道`| something |`
*   最后，输出到标准输出`| something`

然后使用三个函数，每个函数一个：

```
#define PIPE_INPUT 0
#define PIPE_OUTPUT 1

execute_pipe_start(t_cmdlist *commands)
{
  int pid;
  int fd[2];

  if (!commands)
    return;
  if (commands->next)
  {
    if (pipe(fd) < 0)
    {
      perror("pipe failed");
      exit(1);
    }
    pid = fork();
    if (!pid)
    {
      close(fd[PIPE_INPUT]);
      if (dup2(fd[PIPE_OUTPUT, 1) < 0)
      {
        perror("dup2 failed");
        exit(1);
      }
      parse_and_exec_cmd(commands->cmd);
    }
    else
    {
      waitpid(...); //what you put here is a bit tricky because
                   //some shells like tcsh will execute all
                   //commands at the same time (try cat | cat | cat | cat)
    }
    if (commands->next->next != null) //If you have 2 commands in line there is a middle
      execute_pipe_middle(commands->next, fd);
    else // no middle
      execute_pipe_end(commands->next, fd);
  }
  else
    parse_and_exec_cmd(commands->cmd);
}

execute_pipe_middle(t_cmdlist *commands, int fd_before[2])
{
  int pid;
  int fd_after[2];

  if (pipe(fd_after) < 0)
    {
      perror("pipe failed");
      exit(1);
    }
  pid = fork();
  if (!pid)
  {
    close(fd_before[PIPE_OUTPUT]);
    close(fd_after[PIPE_INPUT]);
    if (dup2(fd_after[PIPE_OUTPUT, 1) < 0)
    {
      perror("dup2 failed");
      exit(1);
    }
    if (dup2(fd_before[PIPE_INPUT, 0) < 0)
    {
      perror("dup2 failed");
      exit(1);
    }
    parse_and_exec_cmd(commands->cmd);
  }
  else
    waitpid(...);
  if (commands->next->next != null) //More than two following commands : a middle again
    execute_pipe_middle(commands->next, fd_after);
  else // No more repetition
    execute_pipe_end(commands->next, fd_after);
}

execute_pipe_end(t_cmdlist *commands, int fd_before[2])
{
  int pid;

  if (!commands)
    return;
  if (commands->next)
  {
    pid = fork();
    if (!pid)
    {
      close(fd_before[PIPE_OUTPUT]);
      if (dup2(fd_before[PIPE_INPUT, 0) < 0)
      {
        perror("dup2 failed");
        exit(1);
      }
      parse_and_exec_cmd(commands->cmd);
    }
    else
      waitpid(...);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:45:53.147

首先，只要找到管道字符，就应该循环。然后你需要为每个“管道”创建一个管道。

真正的 shell 通常会为管道中的每个命令分叉及其`exec` *自身*。这样它应该能够处理内部命令。

# asp.net - Telerik RadGrid 组标题对齐（带有静态网格标题）？

> ID：12408801
> 
> 赞同：2
> 
> 时间：2012-09-13T14:38:26.897
> 
> 标签：asp.net, header, telerik, grouping, radgrid

当我不使用静态标题时，我的 RadGrid 中的组标题正确对齐，但是当我使用时，它们会不对齐。似乎找不到任何可以解决此问题的方法。相关代码，不重要的细节省略：

```
<telerik:RadGrid runat="server" ID="RadGrid1" GridLines="None" AllowSorting="True" AutoGenerateColumns="False" AllowMultiRowSelection="True" OnNeedDataSource="RadGrid1_NeedDataSource">
    <MasterTableView DataKeyNames="PageID">
        <GroupHeaderTemplate>
                <asp:CheckBox runat="server" ID="cbGroupHeader"/>
                <asp:Label runat="server" ID="lblGroupHeader" Text='<%# (((GridGroupHeaderItem)Container).AggregatesValues["Group"]) %>'/>
        </GroupHeaderTemplate>

        <Columns>
            <telerik:GridClientSelectColumn HeaderStyle-Width="2.5%"/>
            <telerik:GridBoundColumn DataField="PageName" HeaderText="Page Name" UniqueName="PageName"/>
            <telerik:GridBoundColumn DataField="PageID" Display="False" ReadOnly="True" UniqueName="PageID"
            ...
        </Columns>

        <GroupByExpressions>
            <telerik:GridGroupByExpression>
                <GroupByFields>
                    <telerik:GridGroupByField FieldName="Order"/>
                </GroupByFields>
                <SelectFields>
                    <telerik:GridGroupByField FieldName="Group"/>
                </SelectFields>
            </telerik:GridGroupByExpression>
        </GroupByExpressions>
    </MasterTableView>

    <ClientSettings AllowKeyboardNavigation="True" AllowColumnsReorder="True" ReorderColumnsOnClient="False">
        <Selecting AllowRowSelect="True"/>
        <Resizing AllowColumnResize="True" ResizeGridOnColumnResize="False" ClipCellContentOnResize="True" EnableRealTimeResize="True" AllowResizeToFit="True"/>
        <Scrolling AllowScroll="True" UseStaticHeaders="True" SaveScrollPosition="True"/>
    </ClientSettings>
</telerik:radGrid> 
```

图片（图片）：

[UseStaticHeaders="假"](http://i.imgur.com/iCdnb.jpg)

[UseStaticHeaders="真"](http://i.imgur.com/as8bk.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:49:25.087

我刚刚遇到了类似的问题。

我正在工作的网站有 radGrids，当浏览器窗口重新调整大小时，它会重新调整大小。当浏览器窗口尺寸较小时，radGrid 标头看起来很正常，但随着浏览器尺寸的增加，它变得不对齐。

我将 UseStaticHeaders 设置为“true”，将 TableLayout 设置为“fixed”。我还使用特定的标题宽度而不是百分比。

重新调整 radGrid 的大小时，最好不要保留一列的宽度。我注意到在我正在处理的网格上情况并非如此。当我删除一列的宽度时，标题立即正确对齐。

我不确定这个解决方案是否对你有用，但它对我有用。

**更新**

这是我一直在研究的一个网格的标记：

```
 <telerik:RadGrid ID="grdItems" runat="server" OnNeedDataSource="grdItems_NeedDataSource" AutoGenerateColumns="False" Width="100%" Height="100%"
        GridLines="None" EnableOutsideScripts="True" PagerStyle-AlwaysVisible="true" PagerStyle-Mode="NextPrevAndNumeric" AllowPaging="true" PageSize="250" 
        AllowSorting="true" OnItemCreated="grdItems_ItemCreated" OnItemCommand="grdItems_ItemCommand" OnPreRender="grdItems_PreRender" TabIndex="17"
        OnItemDataBound="grdItems_ItemDataBound" >
        <ClientSettings AllowColumnsReorder="true" ReorderColumnsOnClient="true" ColumnsReorderMethod="reorder">
            <Selecting AllowRowSelect="False" />
            <Scrolling AllowScroll="True" UseStaticHeaders="True" />
            <Resizing AllowColumnResize="True" ClipCellContentOnResize="true" EnableRealTimeResize="true" ResizeGridOnColumnResize="true" />
        </ClientSettings>
        <MasterTableView CommandItemDisplay="Top" ClientDataKeyNames="ei_pk" DataKeyNames="ei_pk,ei_eco_fk" AllowAutomaticInserts="True" GridLines="None" TableLayout="fixed" HeaderStyle-Wrap="false" ItemStyle-Wrap="false">
            <CommandItemTemplate>
                <a href="#" onclick="return ShowAddForm();"><asp:Image ID="AddItem" runat="server" ImageUrl="~/RadControls/Grid/Skins/Office2007/AddRecord.gif" AlternateText="Add Item" /><asp:Label ID="lblAddItem" runat="server" Text="Add Item" /></a>
            </CommandItemTemplate> 
            <Columns>
                <telerik:GridTemplateColumn UniqueName="Edit" Visible="False" Resizable="false" Reorderable="false">
                    <ItemTemplate>                           
                        <asp:HyperLink ID="EditLink" runat="server" Text="Edit" ImageUrl="../RadControls/Grid/Skins/Office2007/Edit.gif" />                                
                    </ItemTemplate>
                    <HeaderStyle Width="20" />
                    <ItemStyle HorizontalAlign="Center" />
                </telerik:GridTemplateColumn>    
                <telerik:GridButtonColumn Resizable="false" Reorderable="false" ConfirmText="Are you sure you want to delete this item?" UniqueName="Delete" CommandName="Delete" Visible="False" ButtonType="ImageButton" ImageUrl="../RadControls/Grid/Skins/Office2007/Delete.gif">
                    <HeaderStyle Width="20"/>
                    <ItemStyle HorizontalAlign="Center" />
                </telerik:GridButtonColumn> 
                <telerik:GridBoundColumn HeaderText="Trade" DataField="ftr_description" UniqueName="ftr_description" />
                <telerik:GridBoundColumn HeaderText="Cost Type" DataField="combined_itemType" UniqueName="combined_itemType" />
                <telerik:GridBoundColumn HeaderText="Est. Type" DataField="etp_code" UniqueName="etp_code" />
                <telerik:GridBoundColumn HeaderText="Item Code" DataField="combined_code" UniqueName="combined_code" />
                <telerik:GridBoundColumn HeaderText="Quantity" DataField="ei_quantity" UniqueName="ei_quantity">
                    <HeaderStyle Width="50" HorizontalAlign="Center" />
                    <ItemStyle HorizontalAlign="Right" />
                </telerik:GridBoundColumn>                       
                <telerik:GridBoundColumn HeaderText="Unit Cost" DataField="ei_unitCostworking" UniqueName="ei_unitCostworking" >
                    <HeaderStyle Width="75" HorizontalAlign="Center" />
                    <ItemStyle HorizontalAlign="Right" />
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn HeaderText="Total Cost" DataField="ei_extendedCostWorking" UniqueName="ei_extendedCostWorking" DataFormatString="{0:#0.00}">
                    <HeaderStyle Width="80" HorizontalAlign="Center" />
                    <ItemStyle HorizontalAlign="Right" />
                </telerik:GridBoundColumn>                            
                <telerik:GridBoundColumn HeaderText="Budget" DataField="ei_budgetworking" UniqueName="ei_budgetworking">
                    <HeaderStyle Width="80" HorizontalAlign="Center" />
                    <ItemStyle HorizontalAlign="Right" />
                </telerik:GridBoundColumn>
                <telerik:GridHyperLinkColumn HeaderText="Change Order" DataTextField="eco_number" UniqueName="eco_number" DataNavigateUrlFields="eco_number" SortExpression="eco_number">
                    <HeaderStyle Width="104" />
                </telerik:GridHyperLinkColumn>
            </Columns>
        </MasterTableView>
    </telerik:RadGrid> 
```

# sql - 从 T-SQL 中的数字派生数千或数百范围

> ID：12408804
> 
> 赞同：2
> 
> 时间：2012-09-13T14:38:36.573
> 
> 标签：sql, sql-server, tsql

我们在 SQL Server 数据库中存储了数千个工作编号，我希望能够推导出它们属于什么 1000 或 100 的范围，以便在与我们的工作列表集成的第三方应用程序中进行分组。

如何在查询结果集中的列中提取每个作业编号所属的 1000 组？

示例：我希望我的输出是：

```
JOB_NUMBER      JOB_GROUP
678             0-999
679             0-999
1517            1000-1999
2011            2000-2999
2150            2000-2999
...etc. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T14:47:57.747

如果 job_number 是一个整数，你可以使用这个：

```
select job_number, 
       convert(varchar(10), job_number / 1000 * 1000) 
     + '-' 
     + convert(varchar(10), job_number / 1000 * 1000 + 999) Range
  from whatever 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:44:09.633

您可以使用[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)表达式：

```
SELECT 
JOB_NUMBER,
JOB_GROUP = CASE 
      WHEN JOB_NUMBER < 1000 THEN '0-999'
      WHEN JOB_NUMBER < 2000 THEN '1000-1999'
      WHEN JOB_NUMBER < 3000 THEN '2000-2999'
    END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:58:41.003

尝试这个：

```
WITH CTE AS(
    SELECT JOB_NUMBER/1000 AS JOB_NUMBER,MIN(JOB_NUMBER) AS MIN_NUMBER,
           MAX(JOB_NUMBER) AS MAX_NUMBER
    FROM <TABLE>
    GROUP BY NUMBER/1000)
SELECT M.JOB_NUMBER,
       CAST(MIN_NUMBER AS VARCHAR(20))+'-'+CAST(MAX_NUMBER AS VARCHAR(20))
FROM  <TABLE> M 
JOIN  CTE 
ON    MIN_NUMBER<= M.JOB_NUMBER
AND   MAX_NUMBER >=M.JOB_NUMBER
ORDER BY M.JOB_NUMBER 
```

# jquery - 验证引擎ajax内联验证不起作用

> ID：12408805
> 
> 赞同：2
> 
> 时间：2012-09-13T14:38:38.363
> 
> 标签：jquery, ajax, jquery-validation-engine

我目前正在实施验证，我们非常需要使用验证引擎的 ajax 内联验证。我从 github 下载了最新版本和演示。而且我认为有一个js错误。请查看完全重现我在自己的代码中遇到的错误的示例。

[http://www.position-relative.net/creation/formValidator/demos/demoAjaxInlinePHP.html](http://www.position-relative.net/creation/formValidator/demos/demoAjaxInlinePHP.html)

请在firefox中打开firebug运行，输入正确的名称（karnius），可以清楚看到执行了一个ajax请求，返回["user",true]，但是有js错误：未捕获异常：语法错误，无法识别的表达式：#user'] 因此验证被阻止并且从未真正完成。

我自己的表单也有同样的错误，只是另一个字段。

在我拥有另一个版本的验证引擎之前，它可以工作，但在出现错误时显示绿色提示，以防覆盖该领域然后向上动画......

谁能指出我的验证引擎的功能版本或更好的 ajax 内联验证的功能示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:17:01.970

查看它的代码`jquery.validationEngine.js`似乎以下行有一个额外的`"]"`.

```
var errorField = $("#"+ errorFieldId +"']").eq(0); 
```

上面的行是行号。我正在使用的 jve 版本中的 1353。要修复错误，只需查找此行`jquery.validationEngine.js`并将其更改为以下内容。

```
var errorField = $("#"+ errorFieldId).eq(0); 
```

# asp.net - 为什么 DataPager 需要 Pre-Render 事件才能工作？

> ID：12408815
> 
> 赞同：1
> 
> 时间：2012-09-13T14:39:27.323
> 
> 标签：asp.net, listview, paging, datapager

不得不使用预渲染给我带来了问题..如果我不需要它会很棒..问题是我在用户控件中有列表，当我进入下一个“页面”时我数据绑定..但是datapager prerenders .. 它也做了一个batbind .. 所以它运行了两次..

如果我删除了 prerender .. 然后单击下一个“页面”什么都不做..

任何的想法？

```
 protected void Page_Load(object sender, EventArgs e)
{
    GetSearchResults();
}

//protected void dpMembers_PreRender(object sender, EventArgs e)
//{
//    GetSearchResults();
//}

public void GetSearchResults()
{
    List<Person> listPerson = new List<Person>();
    string strServer = "localhost";
    string strAppPath = Server.MapPath("/");
    PersonBusiness pb = new PersonBusiness(new PersonRepository());
    listPerson = pb.GetAllPersons(strServer, strAppPath);
    lvPersons.DataSource = listPerson;
    lvPersons.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:49:35.673

将您的页面加载修改为

protected void Page_Load(object sender, EventArgs e) { if(!Page.IsPostBack) { GetSearchResults(); } }

你的预渲染似乎没问题。

# python - 简化数据框中的日期

> ID：12408826
> 
> 赞同：0
> 
> 时间：2012-09-13T14:40:11.330
> 
> 标签：python, django, pandas

我目前正在处理每个成员都有订阅日期的数据框。我想统计每个月的订阅量，但默认行为会分别计算每个月的每个日期。

我找到了一种使用切片修改日期并将每个日期设置为 01 的方法，但我宁愿使用熊猫制作的东西。

关于我应该去哪里的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:12:43.013

如果您的订阅日期是一个`datetime.datetime`实例，那么您可以使用（未​​经测试）类似（`df`您的在哪里`DataFrame`）：

```
df.groupby(lambda L: (L.year, L.month)) 
```

如果日期时间不是 DataFrame 的索引，则需要调整 groupby。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:13:17.067

这有帮助吗？

让我们创建一个包含会员 ID 和订阅日期的系列。

```
In [21]: s = pandas.Series(range(100), pandas.date_range('2010-10-10', periods=100)) 
```

按年和月分组，计算每个（年/月）组合的订阅数。

```
In [22]: grouped = s.groupby([s.index.year, s.index.month])

In [23]: nr_subscriptions = grouped.count()

In [24]: nr_subscriptions.index.names = ['Year', 'Month']

In [25]: nr_subscriptions.names = 'nr_subscriptions'

In [26]: nr_subscriptions
Out[26]: 
Year  Month
2010  10       22
      11       30
      12       31
2011  1        17 
```

# wpf - 有没有办法在 bing maps silverlight sdk 中使用流量层？

> ID：12408829
> 
> 赞同：0
> 
> 时间：2012-09-13T14:40:13.233
> 
> 标签：wpf, bing-maps, traffic

我尝试使用 Bing 地图、Silverlight 和 wpf sdk，但找不到与交通层相关的内容。

问题是当我使用 Bing maps for matrostyle app sdk 时，启用交通层非常容易：

```
myMap.showTraffic=true; 
```

如果有业务限制，我认为也不可能使用 Metrostyle 应用程序组件中的流量层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:16:46.040

用于 Bing 地图的 WPF SDK 不允许您包含交通层。这是由于许可限制和交通数据公开的需要。该问题在 MSDN 上的此论坛帖子中进行了解释：

[http://social.msdn.microsoft.com/Forums/en-US/bingmapssilverlightwpfcontrols/thread/3e75890d-d2e4-4a5c-b186-347322d3c3df](http://social.msdn.microsoft.com/Forums/en-US/bingmapssilverlightwpfcontrols/thread/3e75890d-d2e4-4a5c-b186-347322d3c3df)

不过，您可以向 Silverlight SDK 添加流量层。这篇文章对此进行了解释：

[Silverlight 中 Bing 地图的流量层](https://stackoverflow.com/questions/12529781/traffic-layer-for-bing-maps-in-silverlight)

# php - mysql联合后php获取数组

> ID：12408832
> 
> 赞同：0
> 
> 时间：2012-09-13T14:40:23.560
> 
> 标签：php, mysql, arrays, union, fetch

这个mysql语法有什么问题？我将它复制到 phpmyadmin 并完美运行。当我试图从 php 中获取数组时，它返回了“bool(false)”错误。

```
(
    SELECT 
        id, 
        cim, 
        'news' as kat 
    FROM 
        mbsz_news 
    WHERE 
        cim LIKE '%anystring%' 
        OR lead LIKE '%anystring%' 
        OR content LIKE '%anystring%'
) 
UNION 
(
    SELECT 
        id, 
        p_name, 
        'plaza' as kat 
    FROM 
        mbsz_plazas 
    WHERE 
        p_name LIKE '%anystring%' 
        OR uzemelteto LIKE '%anystring%'
) 
UNION 
(
    SELECT 
        id, 
        cim, 
        'book' as kat 
    FROM 
        mbsz_konyvtar 
    WHERE 
        cim LIKE '%anystring%' 
        OR kszam LIKE '%anystring%' 
        OR kiado LIKE '%anystring%'
) 
```

PHP代码：

```
$res = mysql_query($sql);
while($row = mysql_fetch_array($res))
{
    echo $row['type'];
} 
```

`$res`给出错误 bool(false) 感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:06:01.030

您必须声明 sql 变量。例如

```
$sql = (
    (SELECT 
        id, 
        cim, 
        'news' as kat 
    FROM 
        mbsz_news 
    WHERE 
        cim LIKE '%anystring%' 
        OR lead LIKE '%anystring%' 
        OR content LIKE '%anystring%'
) 
UNION 
(
    SELECT 
        id, 
        p_name, 
        'plaza' as kat 
    FROM 
        mbsz_plazas 
    WHERE 
        p_name LIKE '%anystring%' 
        OR uzemelteto LIKE '%anystring%'
) 
UNION 
(
    SELECT 
        id, 
        cim, 
        'book' as kat 
    FROM 
        mbsz_konyvtar 
    WHERE 
        cim LIKE '%anystring%' 
        OR kszam LIKE '%anystring%' 
        OR kiado LIKE '%anystring%'
) 
```

)

调用变量时，php应该可以工作吗？

```
$res = mysql_query($sql);
while($row = mysql_fetch_array($res))
{
    echo $row['type'];
} 
```

# javascript - 需要垫片设置 - jquery.flot/jquery.flot.selection

> ID：12408833
> 
> 赞同：6
> 
> 时间：2012-09-13T14:40:33.823
> 
> 标签：javascript, requirejs, flot, shim

所以我正在使用 jquery.flot 和 jquery.flot.selection 并且因为 define({... 异步加载模块我遇到了一个问题，因为选择插件试图将自己推入 $.plot.plugins （创建由 jquery.flot），但此时 $.plot.plugins 仍未定义。

我发现 require.config 中的“shim”参数应该可以帮助我解决这个问题，但我没有运气......所以这是概要...... jquery.flot 创建 $.plot 并且 jquery.flot.selection 将自身添加到 $ .plot.plugins

我试过的...

```
shim:{
    'js/lib/jquery.flot':{
        exports:'$.plot'
    },
    'js/lib/jquery.flot.selection':{
        deps:['js/lib/jquery.flot']
    }
} 
```

还

```
shim:{
    'js/lib/jquery.flot.selection':['js/lib/jquery.flot']
} 
```

我的插件看起来像这样..

```
define(['jquery','lib/jquery.flot','lib/jquery.flot.selection'], function() {
(function($) {
    // jQuery plugin definition
..... 
```

我也试过

```
define(['jquery'],function(){
require[('js/lib/jquery.flot.selection'],function(){
//jQuery plugin definition
... 
```

我应该怎么办？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-18T14:54:42.640

对于将来碰巧遇到这种情况的任何人，RequireJS 在诊断问题时可能有点不透明。[这是](http://jsfiddle.net/2rV9P/3/)一个带有 jquery.flot 和 jquery.flot.selection 的 RequireJS 2 的工作示例，没有使用模块。

很难说这个例子和上面的问题有什么不同，因此不透明！

```
require.config({
    shim: {
        'jquery': {
            exports: '$'
        },
            'jquery.flot': {
            deps: ['jquery'],
            exports: '$.plot'
        },
            'jquery.flot.selection': {
            deps: ['jquery.flot']
        }
    },
    paths: {
        'jquery': '//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min',
            'jquery.flot': '//cdnjs.cloudflare.com/ajax/libs/flot/0.8.1/jquery.flot.min',
            'jquery.flot.selection': 'https://raw.github.com/flot/flot/master/jquery.flot.selection'
    }
});

require(['jquery', 'jquery.flot', 'jquery.flot.selection'], function ($) {
    // jQuery plugin definition
    console.log($.plot);
    $('#x').text($.plot.plugins);
}); 
```

# c# - 单例和委托中的 C# 异步 SQL

> ID：12408835
> 
> 赞同：2
> 
> 时间：2012-09-13T14:40:45.553
> 
> 标签：c#, asynchronous

我正在尝试构建一个负责数据库所有操作的类。

从这里使用单例模式：http: [//codebender.denniland.com/a-singleton-base-class-to-implement-the-singleton-pattern-in-c/](http://codebender.denniland.com/a-singleton-base-class-to-implement-the-singleton-pattern-in-c/)

我已经建立了一个像这样的类：

```
class DB : SingletonBase<DB>
    {

        public static readonly string SqlConnectionString  = @"Data Source=MYDB;Initial Catalog=PRODUCTS;Integrated Security=True;Asynchronous Processing=true;";

        private DB()
        {
        }

        public void loadData()
        {
            SqlConnection conn = new SqlConnection(SqlConnectionString);
            SqlCommand cmd = conn.CreateCommand();
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "STATISTICS_1";

            cmd.Connection = conn;
            conn.Open();
            IAsyncResult result = cmd.BeginExecuteReader(new AsyncCallback(HandleCallback), cmd, CommandBehavior.CloseConnection);
        }

        private void HandleCallback(IAsyncResult result)
        {
            SqlDataReader dr;
            SqlCommand _this = (SqlCommand)result.AsyncState;

            if (result.IsCompleted)
            {
                dr = _this.EndExecuteReader(result);
            }
            else
                dr = null;

            DataTable dt = new DataTable();
            dt.Load(dr);
            dr.Close();
            MessageBox.Show("loaded");
        }
    } 
```

在我的主要课程中，我像这样使用它：

```
 private void loadStatistics(object sender, EventArgs e)
    {
        showStatus("loading data");
        DB.Instance.loadData();
    } 
```

但这只会给我我的消息框。

我想做的是在我的主类中声明将在 SQL 查询返回某些内容后调用的函数。

我认为最好的方法是使用事件，但我不知道如何正确地做到这一点。

我想在我的主课上做这样的事情：

```
 private void loadCompleted(string msg)
    {
        MessageBox.Show(msg);
    }

    private void loadStatistics(object sender, EventArgs e)
    {
        showStatus("loading data");
        DB.Instance.loadData(loadCompleted);
    } 
```

这样我就可以指定将在 SQL 调用完成后调用的函数。

我不知道这是否是最好的方法，所以欢迎任何意见、建议和解决方案。

**我想要实现的是让一个类负责异步调用 SQL 并将数据传递给将处理它的其他函数。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:47:43.990

```
public delegate void NotifyCallback(string message);    

public class ClassWithCommandAndCallback 
{
  public SqlCommand Sql;
  public NotifyCallback Callback;
}

public void loadData(NotifyCallback callback)
{
  ClassWithCommandAndCallback ar = new ClassWithCommandAndCallback();
  ar.Sql = cmd;
  ar.Callback = callback;
  IAsyncResult result = cmd.BeginExecuteReader(new AsyncCallback(HandleCallback), ar, CommandBehavior.CloseConnection);
}

private void HandleCallback(IAsyncResult result)
{
  ClassWithCommandAndCallback ar = (ClassWithCommandAndCallback)result.AsyncState;

  ar.Callback("loaded (SQL was: "+ar.Sql+")");
} 
```

# android - 保护非市场安卓应用免受非法复制

> ID：12408843
> 
> 赞同：-1
> 
> 时间：2012-09-13T14:41:10.150
> 
> 标签：android, security

我想知道如何保护 Android 应用程序免受未通过 Android 市场的非法复制。

我知道我可以使用 ProGuard 保护代码免受逆向工程。

我想知道是否有一个好的解决方案可以避免任何人将 apk 文件复制到另一台设备并安装应用程序。由于我将完全控制将安装应用程序的所有设备（它是公司内部应用程序），是否可以将应用程序链接到设备序列号？在这种情况下，该应用程序将仅在序列号在允许列表中的那些设备上运行。

我不是在寻找超级安全，我只是想让随便的海盗远离。我知道，如果他愿意，专业的黑客无论如何都会破解它。

有什么建议吗？？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:46:44.507

如果号码不在列表中，您可以使用 IMEI 号码的白名单并退出应用程序并显示错误。

可以通过[TelephonyManager](https://developer.android.com/reference/android/telephony/TelephonyManager.html#getDeviceId%28%29)访问 IMEI 。为此，您需要 READ_PHONE_STATE 权限。

另请查看[如何以编程方式在 Android 中获取设备 IMEI/ESN](https://stackoverflow.com/questions/1972381/how-to-programmatically-get-the-devices-imei-esn-in-android)

# c# - 这些额外字符来自用户的个人资料名称？

> ID：12408844
> 
> 赞同：1
> 
> 时间：2012-09-13T14:41:11.927
> 
> 标签：c#, string, sharepoint-2010, user-profile

当我评估 SharePoint 列表的“用户”类型的自定义字段时，我希望只获取用户名，但我在开始时会看到需要修剪的其他字符。

`SPContext.Current.ListItem[NameOfUserField]`具有价值

“14;#DeeMac”

作为旁注 - 该字段被视为字符串 - 但在我的 xml 文件中，我已将其定义为“用户”字段类型 - 在何处以及为什么进行此转换？我最初确实尝试将其转换为`SPFieldUser`失败的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:50:42.350

字符串的第一部分是相关用户的 ID `SPWeb`。粗略地说，即 DeeMac 是第 14 个使用该网络的人。

为了从中获取`SPUser`对象`string`，您需要获取`SPWeb`用户所属的 并[`SPFieldUserValue(SPWeb, string)`](http://msdn.microsoft.com/en-us/library/ms458798)使用两者调用构造函数。

`SPFieldUserValue`如此构造的包含`User`类型的属性，如果字符串为空/空，则该属性`SPUser`可能为空。

请注意，有时，我认为，用户列实际上可能已经包含`SPFieldUserValue`对象，而不是`string`s。

此外，如果它是一个多用户列，它可能包含一个`SPFieldUserValueCollection`对象或一个`string`传递给*该类*的[构造函数](http://msdn.microsoft.com/en-us/library/ms441658)的对象。

如果您遇到问题，请调试并检查您的专栏中的实际内容。

# mysql - 如何提高UPDATE速度，java连接sql或使用游标

> ID：12408845
> 
> 赞同：0
> 
> 时间：2012-09-13T14:41:18.467
> 
> 标签：mysql, database, jdbc, cursor, sql-update

我正在尝试使用 jdbc 提高 UPDATE 的速度。有 300000 行，我想将每行的 X 列更改为 5。但我需要根据它们的主键对它们进行排序。因为有 400000 行，我想从顶部更改 300000 行。

这是我到目前为止所做的：

首先，我尝试在使用准备好的语句创建每个查询时发送它

```
 long time = System.currentTimeMillis();
    System.out.println(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS").format(new Date (time)));

    for(int i=number-1; i>=0; i--){
        try{
            pStmt.setInt(1, (int) hashMap.get(i));
            time = System.currentTimeMillis();
            result = pStmt.executeUpdate();
            time = System.currentTimeMillis() - time;
            totalTime += time;
        }catch(Exception e){}
    }

    System.out.println(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS").format(new Date (System.currentTimeMillis())));
    time = System.currentTimeMillis() - time; 
```

但是花了很多时间。大约 900 秒。

然后我尝试使用 addBatch() 将它们添加到批处理中

java.sql.PreparedStatement pStmt2 = conn.prepareStatement(query);

```
 for(int i=0; i<number; i++){
            pStmt2.setInt(1, (int) hashMap.get(i));
            pStmt2.addBatch();
    }

    long time = System.currentTimeMillis();
    System.out.println(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS").format(new Date (time)));

    pStmt2.executeBatch();

    System.out.println(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS").format(new Date (System.currentTimeMillis())));
    time = System.currentTimeMillis() - time; 
```

它更好，但没有那么好。只有50秒。区别。

我试图执行块。这意味着：有 300000 行，每 30000 行我将查询添加到批处理中，然后执行它们。我这样做了 10 次。

它好多了，但还是太慢了。大约 800 秒

然后我想在一行中用小行（例如 10000）执行此过程：

通过键 DESC 限制 10000 更新 table1 设置结果 = 3 顺序。

这需要前 10000 行，并更改它们的每个结果单元格。这花了大约 24 秒。当我尝试 10000 行时，这一次与其他测试非常接近。

然后我尝试使用游标来完成这个过程。更新 10000 行只用了 4 秒。

结果很有趣。

但我想使用 jdbc 更新它们。还有其他方法吗？为什么光标速度太快？

# actionscript-3 - Flash as3 在点击时显示特定的影片剪辑

> ID：12408846
> 
> 赞同：1
> 
> 时间：2012-09-13T14:41:19.723
> 
> 标签：actionscript-3, flash

我刚开始使用闪光灯，所以这可能是一件简单的事情，所以请耐心等待。

我正在做一个项目，如果我有一张地图，您可以单击地图上的地点并显示信息。我可以设法将每个 button_btn 链接到每个 info_mc 但这将花费很长时间，因此我尝试创建一个函数来读取按钮名称并重定向到 info_mc 本身。但是，由于当我从 name_mc 更改为 name_info 时名称正在转换为字符串，所以它没有重定向。这是代码。

```
 winterfell_info.visible = false;

    map.winterfell_btn.doubleclickEnabled = true;
    map.winterfell_btn.mouseChildren = doubleClickEnabled;
    map.winterfell_btn.addEventListener(MouseEvent.DOUBLE_CLICK, show_clicked);

    function show_clicked(e:MouseEvent):void{
         var get_name = e.currentTarget.name;
         var open_info_string = get_name.slice(0,-3) + "info";
         //I've tried some things here but nothing is working for me. 
         var open_info = stage.getChildByName(open_info_string);
         open_info.visible = true;      
    } 
```

任何帮助将不胜感激，谢谢。

如果你想知道是的，它是权力的游戏的地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:48:41.867

作为第一个措施，删除“open_info_string”周围的引号，并将该字符串中的大写 S 更改为普通的“s”，因为 Actionscript 区分大小写。

```
var open_info = stage.getChildByName(open_info_string); 
```

然后，如果它不能立即工作，`trace(open_info_string);`请在尝试访问影片剪辑之前插入 a，以了解它是否被正确裁剪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:26:11.363

我做过类似的事情..我没有时间调整代码，但如果你看看我在这里做了什么，我相信它会对你有所帮助。我正在使用我的视频播放器上的对象的实例名称创建一个数组，然后创建一个函数，该函数使用 switch case 语句添加适当的事件侦听器。在我看来，最简单的方法是批量执行此操作。

```
var buttons:Array = [clicky,pauseBtn,playBtn];

for (var i in buttons)
{
    buttons[i].buttonMode = buttons[i].useHandCursor = true;
    addEventListner(buttons[i]);
}

function addEventListner(movieClip)
{
    movieClip.addEventListener(MouseEvent.CLICK, function(e){
    e.stopPropagation();
    switch (movieClip.name)
    {
    case "playBtn" :
    youTubeHolder.videoPlayer.playVideo();
    videoController.playBtn.visible = false;
    videoController.pauseBtn.visible = true;
    break;

    case "pauseBtn" :
    youTubeHolder.videoPlayer.pauseVideo();
    videoController.playBtn.visible = true;
    videoController.pauseBtn.visible = false;
    break;

    case "stopBtn" :
    youTubeHolder.videoPlayer.seekTo(0);
    youTubeHolder.videoPlayer.stopVideo();

    break;

    default :
    trace(movieClip.name+"is not a valid button");
    }

    });
} 
```

# java - JSF 中的 PropertyNotWritableException，即使属性是可写的

> ID：12408847
> 
> 赞同：3
> 
> 时间：2012-09-13T14:41:19.997
> 
> 标签：java, jsf

我想知道您是否可以帮助我调试我们遇到的一个问题。我们在 JSF 页面上收到以下错误：

```
PropertyNotWritableException: /resources/al/template.xhtml @96,112 value="#{cc.attrs.value.editedProperty.value}": The class 'org.company.tpl.template.TemplateString' does not have a writable property 'value'. 
```

这是由视图中的这一行引起的：

```
<p:column><p:inputText id="property-value" value="#{cc.attrs.value.editedProperty.value}"/></p:column> 
```

如您所见，该属性在类中是可写的：

```
@Entity
@DiscriminatorValue("String")
public class TemplateString extends TemplateProperty {
    @Column(name = "STRING_VALUE")
    private String value;

    // ...

    public void setValue(String value) {
        this.value = value;
    }

    @Override
    public String getValue() {
        return value;
    }

    // ...
} 
```

最奇怪的是，这个错误只发生在生产中，而不是在实验室中。生产和实验室都在运行 Glassfish 3.1.2.2。在实验室中，一切正常。

什么可能导致此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:36:46.543

问题在于继承。

可能您的 TemplateProperty 类的实现方式如下：

```
public class TemplateProperty {
    public Object getValue() {
        return some_value;
    }
    ...
} 
```

所以 el 尝试读取`Object getValue()`并尝试写入`void setValue(Object obj)`不存在的内容。

我认为这是一个错误，我还不知道解决方法...

# c++ - 出现错误时cin怎么办

> ID：12408848
> 
> 赞同：8
> 
> 时间：2012-09-13T14:41:21.343
> 
> 标签：c++, error-handling, cin

```
#include<iostream>;

int main()
{
    int a = 1;
    int b = 2;
    std::cin >> a >> b;
    std::cout << a << "+" << b << "=" << a+b << std::endl;
    return 0;
} 
```

当我`3 4`作为输入输入时，输出将是`3+4=7`，嗯，这很奇怪；但是当我输入时`a b`，输出是`0+0=0`（为什么是0和0？）；最令人困惑的是`a 4`，它将是`0+0=0`（为什么不是'0 + 4 = 4'？？？？？？）；然后我写另一个编。

```
#include<iostream>;

int main()
{
    int a = 1;
    int b = 2;
    std::cin >> a;
    std::cin.clear();
    std::cin >> b;
    std::cout << a << "+" << b << "=" << a+b << std::endl;
    return 0;
} 
```

当我进入`a 4`时，为什么它仍然`0+0=0`？不应该`0+4=4`吗？

感谢所有的热心人！！

我写prog3，来测试我不写的时候会发生什么`int a=1;int b=2`；

```
2

#include <iostream>
using namespace std;
int main()
{  
    int a,b;
    cin >> a  ;
    cin >> b;
    cout<< a << "+"<< b <<"="<< a+b << endl;
    return 0;
} 
```

再一次`a b`，它输出`0+-1218170892=-1218170892`（为什么不是`0+0=0`？？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:08:17.447

根据 C++11，在出现错误时将值设置为零：如果提取失败，则将零写入值并设置故障位。

在“a 4”示例中，两个值都是 0，因为缓冲区尚未被刷新/清除，因此第二次 cin 读取仍在读取错误，并且还接收到 0 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:42:34.417

像所有的一样`istreams`，`std::cin`有错误位。发生错误时设置这些位。例如，您可以使用 、 、 等函数查找错误位的值`good()`。`bad()`如果`eof()`您读取错误输入（`fail()`返回`true`），请使用`clear()`清除标志。您可能还需要`ignore(1);`删除违规字符。

有关详细信息，请参阅该`State functions`部分。[http://en.cppreference.com/w/cpp/io/basic_ios](http://en.cppreference.com/w/cpp/io/basic_ios)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:42:50.420

std::cin 是一个 istream 实例，因此它在读取无效内容时保持其错误状态。

为了“治愈”它，你必须清除它的标志

```
std::cin.clear(); 
```

并刷新其缓冲区。

```
std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); 
```

更令人惊讶的是，当您输入无效字符时，它不会返回 1 + 2 = 3，因为我希望失败的 cin 流对其尝试更新的内容没有副作用。

# apache2 - 使用 WSGI 和 Apache 设置综述

> ID：12408871
> 
> 赞同：2
> 
> 时间：2012-09-13T14:42:39.627
> 
> 标签：apache2, debian, mod-wsgi, python-2.6, roundup

我通过 Debian Squeeze 官方 repo 安装了 Roundup 1.4，并希望在我的 Apache 服务器上使用`mod_wsgi`. 主机配置：

```
<VirtualHost *:80>
    ServerName support.domain.com

    WSGIScriptAlias / /var/roundup/support/apache/roundup.wsgi
    WSGIDaemonProcess support.roundup user=roundup group=roundup threads=25
    WSGIProcessGroup support.roundup

    <Directory /var/roundup/support>
        <Files roundup.wsgi>
            Order allow,deny
            Allow from all
        </Files>
    </Directory>

    # ... some logging configuration
</VirtualHost> 
```

我在`/var/roundup/support`using中安装跟踪器，对其进行`roundup-admin install`配置，然后使用`roundup-admin initialise`. 然后我被创建了`apache/roundup.wsgi`：

```
from roundup.cgi.wsgi_handler import RequestDispatcher
tracker_home = '/var/roundup/support'
application = RequestDispatcher(tracker_home) 
```

当打开我的网站时`http://support.domain.com`（当然这个网址有点不同），我有 HTTP 响应`500 Internal Server Error`并登录：

```
mod_wsgi (pid=17433): Exception occured processing WSGI script '/var/roundup/support/apache/roundup.wsgi'.
RuntimeError: response has not been started 
```

这是怎么回事？如何正确运行 wsgi（不是 cgi）的综述？或者在哪里查看为什么没有开始响应？

## 编辑

* * *

Roundup 的安装手册说 wsgi 处理程序看起来像这样：

```
from wsgiref.simple_server import make_server

# obtain the WSGI request dispatcher
from roundup.cgi.wsgi_handler import RequestDispatcher
tracker_home = 'demo'
app = RequestDispatcher(tracker_home)

httpd = make_server('', 8917, app)
httpd.serve_forever() 
```

但这没有任何反应。浏览器永远加载它而没有消息或服务器日志。我认为从 apache 模块运行的脚本启动另一台服务器并不是一个好主意。所以我尝试了另一个代码示例：

```
from roundup.cgi.wsgi_handler import RequestDispatcher
tracker_home = '/var/roundup/support'
application = RequestDispatcher(tracker_home)

from flup.server.fcgi import WSGIServer
WSGIServer(application).run() 
```

但这会引发一些错误，例如：

```
WSGIServer: missing FastCGI param REQUEST_METHOD required by WSGI!
WSGIServer: missing FastCGI param SERVER_NAME required by WSGI!
WSGIServer: missing FastCGI param SERVER_PORT required by WSGI!
WSGIServer: missing FastCGI param SERVER_PROTOCOL required by WSGI! 
```

必须有一种方法可以从 RequestDispatcher 运行我的应用程序...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:07:24.083

根据[这个问题](http://issues.roundup-tracker.org/issue2550668)，这是一个权限问题。使用解决：

```
WSGIDaemonProcess support.roundup user=roundup group=roundup threads=25
WSGIProcessGroup support.roundup 
```

其中文件作为所有者和组`/var/roundup/support/`具有`roundup`适当的访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T05:12:25.390

尝试：

```
from roundup.cgi.wsgi_handler import RequestDispatcher
tracker_home = '/var/roundup/support'
application = RequestDispatcher(tracker_home) 
```

所有 mod_wsgi 需要的是一个“应用程序”对象，它是一个有效的 WSGI 应用程序入口点。

您不需要像您一直尝试的那样自己启动 WSGI 服务器或 FASTCGI 适配器。

# xml - 从 XML 文件中查询数据；来自 CSV 的查询？

> ID：12408873
> 
> 赞同：0
> 
> 时间：2012-09-13T14:42:41.793
> 
> 标签：xml, csv, xml-parsing, grep, basex

我在一个 CSV 文件和一个包含复杂嵌套信息的 XML 文件中有一个大约 950 个整数的列表（每个条目都包含多个嵌套）。`i`给定CSV 文件中的一个整数 ，每个`i`对应`i`于 XML 文件中的一个：`i`in `<entry><key>i</key>`。我想为`i`CSV 文件中列出的每个列从 XML 文件中提取一组预先指定的列。

这是一组提取“列”的示例，因为缺少更好的词（目标被双星号包围）：

```
<entry>
<key>55</key>
<cd language="**en**">
  <title>**Ride The Lightning**</title>
  <band>Metallica</band>
</cd>
<tabbook language="**en**">
  <title>**Ride The Lightning Tab**</title>
  <author>Who J. Ever</author>
</tabbook>
</entry> 
```

我应该将 CSV 文件的值加载到脚本中的变量中，还是有现有的更好的方法来执行此操作？

编辑：

目前我正在尝试使用 BaseX。对于入门查询，我正在尝试: `for $e in collection("catalog")//entry where //entry/cd/title contains text "lightning" return //title`，我认为它的意思是（或者更确切地说是希望的意思）：*对于一个“条目”标题标签，它是“集合”标题目录中任何标签的后代，如果相同的话条目的“cd”-titled descendant 的“title”-titled descendant 包含文本“lightning”，将完整标题回显给我。*

该死，这令人困惑....有人告诉我使用`concat()`而不是`return`. 查询似乎不正确。当我想出正确的语法时，我将继续学习并再次发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:46:52.323

使用 XPath（至少使用 XPath2），您可以使用类似的查询

```
 //entry[key = (1,2,3,4,5)] 
```

查找具有 (1,2,3,4,5) 中的键的所有条目。

然后只需将您的 CSV 粘贴到括号中

# memory - 用 C 语言修剪指针字符串时出现内存错误

> ID：12408878
> 
> 赞同：1
> 
> 时间：2012-09-13T14:43:00.937
> 
> 标签：memory, segmentation-fault

从字符串末尾修剪空格时出现内存错误错误。谁能帮我解决下面的代码。

**代码：**

```
 char* trimfun(char *st) {
    int i=0,j;
    /* Trim spaces and tabs from end:*/
    i=strlen(st)-1;
    while ((st[i]==' ')||(st[i]=='\t')) {   
        i--;    
     }

    if (i<(strlen(st)-1)) {
        st[i+1]='\0';
    }
    return st;
    // free (s);
    // free (st);
 } 
```

谢谢拉姆基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:24:23.723

如果整个字符串`st`都是空格怎么办？

在这种情况下，`while`循环：

```
while((st[i]==' ')||(st[i]=='\t')) {    i--;    } 
```

不会终止于`i==0`！

这可能是您的段错误的原因。

尝试：

```
while ( ( i >= 0 ) && ( (st[i]==' ') || (st[i]=='\t') ) ) ) {
    i--;    
} 
```

# c++ - 加载共享库时出错：libsystemc-2.3.0.so

> ID：12408882
> 
> 赞同：2
> 
> 时间：2012-09-13T14:43:15.327
> 
> 标签：c++, eclipse, systemc

我是 Linux 的新用户，我正在尝试`systemc-2.3.0`在我的机器（Fedora 16）上安装库。我非常仔细地遵循了库的 INSTALL 文件中提到的每条说明，但是当我尝试使用 ECLIPSE 运行一个简单的程序时出现错误。我已在 ECLIPSE 中正确链接了所有库，但仍然出现错误。

程序如下：

```
#include <systemc.h>

using namespace std;

int sc_main(int argc, char * argv[])
{
    cout << "hello world" << endl;

    for(int i=0; i<argc; i++)
        cout << argv[i] << " ";

    cout << endl;
    return 0;
} 
```

错误输出是：

> /home/vivek/workspace/TestSystemC/Debug/TestSystemC：加载共享库时出错：libsystemc-2.3.0.so：无法打开共享对象文件：没有这样的文件或目录

任何帮助将不胜感激。由于我不是 Linux 专家，请以详尽的方式（逐步）解释您的建议。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T09:27:27.063

这是动态链接的环境设置问题，因为共享库安装在系统默认库目录之外。执行二进制文件时，加载程序找不到 libsystemc-2.3.0.so。

两种解决方案。

1.  设置你的 LD_LIBRARY_PATH。

    `export LD_LIBRARY_PATH=/usr/local/systemc-2.3.0/lib-linux64:$LD_LIBRARY_PATH`

    或者，如果您的默认 LD_LIBRARY_PATH 为空

    `export LD_LIBRARY_PATH=/usr/local/systemc-2.3.0/lib-linux64`

2.  链接二进制文件时将 rpath 添加到可执行文件。它向二进制文件添加一个条目并提示加载程序搜索其他路径。

    `g++ -o TestSystemC ...your c++ files... -L/usr/local/systemc-2.3.0/lib-linux64 -lsystemc-2.3.0 -Wl,-rpath,/usr/local/systemc-2.3.0/lib-linux64`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T02:17:00.613

我在末尾附加两行`~/.profile`如下：

```
export SYSTEMC_HOME=/usr/local/systemc-2.3.0/
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/systemc-2.3.0/lib-linux64 
```

如果这不起作用，您可以尝试在您安装的顶级目录中添加两个软链接（即`lib->lib-linux64/`和）（例如我的路径是）。对应的命令如下`lib-linux -> lib-linux``systemc-2.3.0``/usr/local/systemc-2.3.0/`

（将当前目录更改为 $SYSTEMC_HOME 目录）：

```
$ln -s /usr/local/systemc-2.3.0 lib
$ln -s /usr/local/systemc-2.3.0  lib-linux 
```

也许 lib-linux64 支持 64 位操作系统，而 lib 或 lib->linux 支持 32 位操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T17:45:27.197

是的！事实上，对于报告的所有此类错误，缺少的是用户没有或忘记设置 LD_LIBRARY_PATH

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-08T04:11:06.137

您可以在 Eclipse**链接器设置-> 杂项 -> -Wl,-rpath,your_lib_path 中设置**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-22T08:31:10.620

尝试通过访问 libsystemc-2.3.1.so 所在的目录将 libsystemc-2.3.0.so 移动到默认库目录，打开终端并运行： `sudo cp libsystemc-2.3.0.so /lib` 这在我的情况下效果很好

# python - python如何从这个建立一个新列表

> ID：12408887
> 
> 赞同：1
> 
> 时间：2012-09-13T14:43:39.300
> 
> 标签：python

我有一个以下格式的列表：

```
['CASE_1:a','CASE_1:b','CASE_1:c','CASE_1:d',
 'CASE_2:e','CASE_2:f','CASE_2:g','CASE_2:h'] 
```

我想创建一个如下所示的新列表：

```
['CASE_1:a,b,c,d','CASE_2:e,f,g,h'] 
```

知道如何优雅地完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:46:37.810

自从我意识到这是家庭作业后，我已经删除了完整的解决方案，但这是基本思想：

字典是一种更好的数据结构。我会看一个[`collections.defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict). 例如

```
yourdict = defaultdict(list) 
```

您可以遍历您的列表（拆分[每个元素](http://docs.python.org/library/stdtypes.html#str.split)`':'`）。就像是：

```
#only split string once -- resulting in a list of length 2.
case, value = element.split(':',1) 
```

然后你可以使用 list 方法将这些添加到字典中`.append`：

```
yourdict[case].append(value) 
```

现在，您将拥有一个将键 ( `Case_1`, `Case_2`) 映射到列表 ( `['a','b','c','d'], [...]`) 的 dict。

如果你真的需要一个列表，你可以对字典的项目进行[排序并适当地加入。](http://docs.python.org/library/functions.html#sorted)

* * *

**叹息**。看起来作业标签已被删除（这是我的原始解决方案）：

```
from collections import defaultdict
d = defaultdict(list)
for elem in yourlist:
   case, value = elem.split(':', 1)
   d[case].append(value) 
```

现在你有了我上面描述的字典。如果你真的想找回你的清单：

```
new_lst = [ case+':'+','.join(values) for case,values in sorted(d.items()) ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:52:11.843

您可以`defaultdict`通过将大小写作为键来使用 a，并将每个字母附加到列表中，其中大小写和字母是通过拆分列表中的元素来获得的`':'`- 例如：

```
from collections import defaultdict

case_letters = defaultdict(list)
start = ['CASE_1:a','CASE_1:b','CASE_1:c','CASE_1:d', 'CASE_2:e','CASE_2:f','CASE_2:g','CASE_2:h']
for el in start:
    case, letter = el.split(':')
    case_letters[case].append(letter)
result = sorted('{case}:{letters}'.format(case=key, letters=','.join(values)) for key, values in case_letters.iteritems())
print result 
```

因为这是家庭作业（**编辑：或者是！！？**） - 我建议查看`collections.defaultdict`, `str.split`（和其他内置字符串方法），内置类型`list`及其方法（例如`append`,`extend`等`sort`...），`str.format`内置`sorted`方法和一般 a`dict`一般。使用此处的工作示例和最终手册作为参考——所有这些东西稍后都会派上用场——所以尽可能地理解它们符合你的最大利益。

要考虑的另一件事是具有以下内容：

```
{1: ['a', 'b', 'c', 'd'], 2: ['e', 'f', 'g', 'h']} 
```

是一种更有用的格式，无论如何都可以用来重新创建您想要的列表......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:49:37.010

```
data = ['CASE_1:a','CASE_1:b','CASE_1:c','CASE_1:d', 'CASE_2:e','CASE_2:f','CASE_2:g','CASE_2:h']

output = {}

for item in data:
    key, value = item.split(':')
    if key not in output:
        output[key] = []
    output[key].append(value)

result = []
for key, values in output.items():
    result.append('%s:%s' % (key, ",".join(values)))

print result 
```

输出

```
['CASE_2:e,f,g,h', 'CASE_1:a,b,c,d'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:53:04.970

```
mydict = {}
for item in list:
    key,value = item.split(":")
    if key in mydict:
        mydict[key].append(value)
    else:
        mydict[key] = [value]
[key + ":" + ",".join(value) for key, value in mydict.iteritems()] 
```

老实说，没有太多优雅。你知道，我会将你的列表存储为一个字典，因为它实际上就像一个字典。

输出是`['CASE_2:e,f,g,h', 'CASE_1:a,b,c,d']`

# jsf-2 - 是否有任何框架可以为 JSF Managed Beans 编写 J 单元

> ID：12408890
> 
> 赞同：0
> 
> 时间：2012-09-13T14:43:49.460
> 
> 标签：jsf-2, junit

是否有任何框架可以为 JSF 托管 Bean 编写 J 单元。

当我尝试测试包含以下代码的方法时，我得到空指针异常。

```
FacesContext  context = FacesContext.getCurrentInstance();
myBean =(MyBean)context.getApplication.evaluteExpressionGet(context,#{myBean},MyBean.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:54:38.037

我还没有尝试过，但是 JBoss.org 发布了一个名为 JSFUnit 的框架，也许你会尝试一下？！

[http://www.jboss.org/jsfunit/](http://www.jboss.org/jsfunit/)

# php - XDebug / Apache / PHP / Eclipse 跳过断点

> ID：12408891
> 
> 赞同：3
> 
> 时间：2012-09-13T14:43:52.777
> 
> 标签：php, xdebug

我在使用 XDebug 时遇到问题。

配置如下：

*   视窗 7 64 位
*   PHP 5.4.6 线程安全 32 位
*   Apache 2.4 线程安全
*   Eclipse PDT 3.0.2

问题是 xdebug_break() 调用不起作用，通过 Eclipse 输入的断点也不起作用。我可以看到扩展正在工作，因为它在 phpinfo() 中显示为一个模块。当我调用不可调用的方法时，XDebug 会输出相关的错误消息。

我修改了 Eclipse 的 Web 服务器路径映射，但无济于事。

这是我的 php.ini 配置：

```
zend_extension = c:/php/php_xdebug-2.2.1-5.4-vc9.dll
xdebug.remote_enable = 1
xdebug.remote_host = localhost
xdebug.remote_port = 8080
xdebug.remote_mode = req 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:15:30.380

首先检查你在eclipse中使用的是什么版本的PHP....检查它： **Window->preference->PHP->PHP Interpreter....**

那里的版本应该与PHP版本匹配......

如果问题没有解决，请回复....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T12:47:27.607

对于所有仍在与这个问题作斗争的人，一些方便的技巧。

检查您拥有的 Eclipse 版本（包）？事实[证明](https://stackoverflow.com/q/5035964/1469208)，当您将应用程序调试为`Web Application`. 仅当您将其作为`PHP Script`. 这使得它对调试过程毫无用处。

您应该考虑[为 PHP 开发人员恢复到较旧的 Galileo Package Eclipse](http://www.eclipse.org/downloads/packages/eclipse-php-developers/galileosr2)或安装最新的[Eclipse Juno](http://www.eclipse.org/downloads/packages/eclipse-classic-422/junosr2)（甚至是[最新的 Eclipse Kepler 开发人员版本](http://www.eclipse.org/downloads/packages/eclipse-classic-43-m7/keplerm7)），它没有内置 PDT 支持，但您可以使用`Help > Install New Software..`(指向`http://download.eclipse.org/tools/pdt/updates/release`）。

据报道，这些版本能够按照`Web Application`断点进行调试。

另外，请记住，Xdebug 必须作为*Zend Extension*运行才能支持断点！换句话说，从您的中删除`extension=xdebug.so`（在 Linux 或`xdebug.dll`Windows 上）行`php.ini`并将其替换为`zend_extension=/full/path/to/xdebug.so`（在 Linux 或`zend_extension=X:\full\path\to\xdebug.dll`Windows 上）。Zend 扩展需要完整路径，即使它们被放入`/php/ext`文件夹，就像常规 PHP 扩展一样。您可以在[Xdebug FAQ](http://xdebug.org/docs/faq)中找到更多信息（寻找“ *Xdebug 仅作为 PHP 扩展加载，而不是作为 Zend 扩展*”问题的答案）。

# struts2 - Struts 2 jquery 网格组件，带有 jquery 网格列类型列表，其中包含对象列表

> ID：12408899
> 
> 赞同：2
> 
> 时间：2012-09-13T14:44:14.797
> 
> 标签：struts2, struts2-jquery

我遇到的问题是我试图拥有一个多选数据网格列，该列将具有一个列表对象（productsEntitled）。

当用户单击记录上的编辑时，我提供了一个 buildSelect 自定义函数来填充我的编辑对话框，从而使产品正确显示。

当我的网格上有带有多选的列时`<sjg:gridColumn name="productsEntitledListModel`，保存功能不起作用并且不保存。我在浏览器控制台和 java 控制台上都没有看到任何错误。

任何帮助将不胜感激，因为我无法找出问题所在，我反编译了整个展示案例 jar，没有任何帮助解决这个问题。

我的模型如下所示：

```
@Entity
@Table ( name = "USERS")
public class User {

    private Long id;
    private String name;
    private String username;
    private String password;
    private String sourceIp;
    private Device device;
    private List<Product> productsEntitled; 
```

这是我在 jsp 页面上的网格：

```
<s:url id="remoteurl" action="loadUsersJson"/>
    <s:url id="editurl" action="editGridUserEntry"/>
    <s:url id="selectproductsurl" action="loadProductsJson"/>

    <sjg:grid gridModel="users"  
              id="gridUsers"
              dataType="json" 
              width="1150"
              href="%{remoteurl}"
              draggable="true"
              pager="true" 
              resizable="true"
              navigatorAddOptions="{height:525, width:425, readAfterSubmit:true, draggable:true, resizable:true}"
              navigatorEditOptions="{height:525, width:425, reloadAfterSubmit:true, draggable:true, resizable:true}"
              navigatorDeleteOptions="{height:200, width:200, reloadAfterSubmit:true, draggable:true, resizable:true}"
              editurl="%{editurl}"
              navigator="true"
              navigatorEdit="true"
              navigatorAdd="true"
              navigatorView="true"
              navigatorDelete="true"
              rowList="10,15,20"
              rowNum="15"
              multiselect="false"
              onSelectRowTopics="rowselect">

        <sjg:gridColumn name="id" editable="true" index="id" hidden="true" key="true" title="ID"/>
        <sjg:gridColumn name="name" index="name" editable="true" edittype="text" title="NAME"/>
        <sjg:gridColumn name="sourceIp" index="sourceIp" editable="true" edittype="text" title="SOURCE IP"/>
        <sjg:gridColumn name="username" index="username" editable="true" edittype="text" title="USERNAME"/>
        <sjg:gridColumn name="password" index="password" editable="true" edittype="password" title="PASSWORD"/>
        <sjg:gridColumn name="role" index="role" editable="true" edittype="select" editoptions="{value:'Admin:Admin;User:User;'}" title="ROLE"/>

        <sjg:gridColumn name="deviceId" jsonmap="device.id" key="true" hidden="true" editable="text" title="DEVICE ID"/> 
        <sjg:gridColumn name="deviceIp" jsonmap="device.ip" editable="true" edittype="text" title="DEVICE IP"/>

        <sjg:gridColumn name="productsEntitledListModel"  
                        width="300"
                        editable="true" 
                        edittype="select"
                        editoptions="{dataUrl: '%{selectproductsurl}', multiple:true, buildSelect:customBuildSelect}"
                        title="PRODUCTS"/>

    </sjg:grid> 
```

这些是我的动作类：

**显示网格：**

```
import java.util.List;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.struts2.interceptor.ServletRequestAware;

import com.opensymphony.xwork2.ActionSupport;

public class AdminAction extends ActionSupport implements ServletRequestAware {

    private static final long serialVersionUID = -1090720652366248768L;
    private static final Log logger = LogFactory.getLog(AdminAction.class);

    private HttpServletRequest request;
    private AuthenticationTicket ticket;
    private AdminService adminService;
    private List<User> users;
    private List<Product> products;
    //private List<String>productsAllList;
    private String userId;

    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public List<Product> getProducts() {
        return products;
    }

    public void setProducts(List<Product> products) {
        this.products = products;
    }

    public AuthenticationTicket getTicket() {
        return ticket;
    }

    public List<User> getUsers() {
        return users;
    }

    public void setUsers(List<User> users) {
        this.users = users;
    }

    public void setTicket(AuthenticationTicket ticket) {
        this.ticket = ticket;
    }

    @Override
    public void setServletRequest(HttpServletRequest request) {

        this.request = request;

    }

    public String redirectUsersTab() {
        return "users";
    }

    public String redirectProductsTab() {
        return "products";
    }

    private void initAdminService () {

        logger.debug("initAdminService()...");

        if (adminService == null) {
            adminService = (AdminService)ServiceFinder.getContext(request).getBean("adminService");
        }

    }

    public String loadUsersJson() {

        initAdminService();

        this.users = adminService.getUsersAll();

        return "success";
    }

    public String loadProductsJson() {

        initAdminService();

        this.products = adminService.getProductsAll();

        return "success";
    }

    //TODO: clean up
    public String getAllProductsList() {

        logger.debug("testParam, userId: " + this.userId);

        initAdminService();

        List<Product> temp = adminService.getProductsAll();

        if (userId != null) {

            User userTemp = new User();
            userTemp.setId(new Long(userId));

            List<Product> prodEntitled = adminService.getProductsByUser(userTemp);

            logger.debug("Products entitled: " + prodEntitled);
        }

        //TODO: merge prod and prod entitled to Model to populate the grid

        products = temp;
        /*
        if (temp != null && temp.size() > 0) {

            this.productsAllList = new ArrayList<String>();

            for (Product p : temp) {
                this.productsAllList.add(p.getName());
            }
        }
        */

        //logger.debug("this.productsAllList: " + this.productsAllList);

        return "success";
    }

} 
```

**编辑网格的类：**

```
import java.util.ArrayList;
import java.util.List;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.struts2.interceptor.ServletRequestAware;

import com.opensymphony.xwork2.ActionSupport;

public class EditUsersGridAction extends ActionSupport implements ServletRequestAware {

    private static final Log logger = LogFactory.getLog(EditUsersGridAction.class);
    private static final long serialVersionUID = -5485382508029951644L;

    private HttpServletRequest request;

    private AdminService adminService;
    private String oper = "";
    private Long id;
    private String name;
    private String sourceIp;
    private String password;
    private String username;
    private Long deviceId;
    private String deviceIp;
    private String devicePortDescription;
    private String devicePortLayer;
    private String deviceType;
    private List<Product>productsEntitled;
    private List<GridColumnListModel> productsEntitledListModel;
    private List<Product>productsAvailable;

    public List<GridColumnListModel> getProductsEntitledListModel() {

        try {

            if (productsEntitled != null && productsEntitled.size() > 0) {

                productsEntitledListModel = new ArrayList<EditUsersGridAction.GridColumnListModel>();

                for (Product p : productsEntitled) {

                    GridColumnListModel tmp = new GridColumnListModel();

                    tmp.setName(p.getName());
                    tmp.setValue(p);

                    productsEntitledListModel.add(tmp);
                }

                return this.productsEntitledListModel;
            }else {
                return null;
            }

        } catch (Exception ex) {
            logger.error("Exception in getProductsEntitledString", ex);
            return null;
        }
    }

    public void setProductsEntitledListModel(List<GridColumnListModel> productsEntitledListModel) {
        this.productsEntitledListModel = productsEntitledListModel;
    }

    public Long getDeviceId() {
        return deviceId;
    }

    public void setDeviceId(Long deviceId) {
        this.deviceId = deviceId;
    }

    public String getDeviceIp() {
        return deviceIp;
    }

    public void setDeviceIp(String deviceIp) {
        this.deviceIp = deviceIp;
    }

    public String getDevicePortDescription() {
        return devicePortDescription;
    }

    public void setDevicePortDescription(String devicePortDescription) {
        this.devicePortDescription = devicePortDescription;
    }

    public String getDevicePortLayer() {
        return devicePortLayer;
    }

    public void setDevicePortLayer(String devicePortLayer) {
        this.devicePortLayer = devicePortLayer;
    }

    public String getDeviceType() {
        return deviceType;
    }

    public void setDeviceType(String deviceType) {
        this.deviceType = deviceType;
    }

    public String getOper() {
        return oper;
    }

    public void setOper(String oper) {
        this.oper = oper;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getSourceIp() {
        return sourceIp;
    }

    public void setSourceIp(String sourceIp) {
        this.sourceIp = sourceIp;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public List<Product> getProductsEntitled() {
        return productsEntitled;
    }

    public void setProductsEntitled(List<Product> productsEntitled) {
        this.productsEntitled = productsEntitled;
    }

    public List<Product> getProductsAvailable() {
        return productsAvailable;
    }

    public void setProductsAvailable(List<Product> productsAvailable) {
        this.productsAvailable = productsAvailable;
    }

    public HttpServletRequest getRequest() {
        return request;
    }

    public void setRequest(HttpServletRequest request) {
        this.request = request;
    }

    @Override
    public void setServletRequest(HttpServletRequest request) {
        this.request = request;

    }

    private void initAdminService () {

        logger.debug("initAdminService()...");

        if (adminService == null) {
            adminService = (AdminService)ServiceFinder.getContext(request).getBean("adminService");
        }

    }

    public String execute() throws Exception {

        logger.debug("#### IN EditGridUsersAction ###");

        initAdminService();

        productsAvailable = adminService.getProductsAll();

        User user = new User();

        user.setName(name);
        user.setPassword(password);
        user.setUsername(username);
        user.setSourceIp(sourceIp);

        Device device = new Device();

        device.setId(deviceId);
        device.setIp(deviceIp);
        device.setPortDescription(devicePortDescription);
        device.setType(deviceType);

        user.setDevice(device);

        if (id != null) {
            user.setId(id);
        }

        if (oper.equalsIgnoreCase("add")) {

            logger.debug("products selected");
            //user.setProductsEntitled(adminService.getProductsAll());
            adminService.addUser(user);

        } else if ( oper.equalsIgnoreCase("edit")) {

            //TODO: convert model to products and add to user
            logger.debug("now in edit");

            List<Product> tempProd = new ArrayList<Product>();

            for (GridColumnListModel gridColModel : productsEntitledListModel) { 
                tempProd.add(gridColModel.getValue());
            }

            user.setProductsEntitled(tempProd);
            adminService.updateUser(user);

            //return "input";

        }else if (oper.equalsIgnoreCase("del")) {
            logger.debug("in delete");
            adminService.deleteUser(user);
        }

        return "success";
    }

    public class GridColumnListModel {

        private String name;
        private Product value;

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public Product getValue() {
            return value;
        }

        public void setValue(Product value) {
            this.value = value;
        }

    }

} 
```

# javascript - 获取生成的 PHP td 值

> ID：12408900
> 
> 赞同：-5
> 
> 时间：2012-09-13T14:44:21.120
> 
> 标签：javascript, php, html-table, calculator, import-from-csv

我对 Javascript 或 PHP 没有太多经验，所以请多多包涵。

对于网站的一部分，我正在尝试创建一个“花式比较计算器”。

目的是比较新的 CSV 数据以设置输入数据，按百分比，但在线。

* * *

我首先在 PHP 中显示 CSV，

但是现在，我无法获取 PHP 创建的生成文本。

```
<td> I-WANT-THIS-GENERATED-PHP-TEXT </td> 
```

有没有办法使用函数从生成的表格中提取特定文本？

* * *

然后我想获取该文本并将其自动输入到计算器的“输入框”中。该计算器是用 Javascript 编写的，它所做的只是将输入 (A) 除以输入 (B)，然后是 * 100。

（我将手动设置的值 - (A) 与将作为 (B) 输入的 CSV 表值进行比较）

是否可以使用 Javascript 计算器输入字段

```
< input value="I-WANT-THIS-GENERATED-PHP-TEXT"........ 
```

代替

```
< input type="text" ........... 
```

-----任何了解Javascript的人-----

是否有可能让“输入框”不断地重新加载自己，这样它就可以不断地在输入字段 (B) 中获取新的 CSV 数据。

那么是否可以使计算器的“计算”功能与更新CSV的刷新率相匹配。或者只是在 (B) 字段中输入新数字时自动计算

由于 (B) 字段的变化，目标是具有不断变化的百分比。

* * *

-----任何懂PHP的人-----

我也有一个 PHP 计算器，在这种情况下会更好吗？我可以做我上面描述的吗？

* * *

对于那些只是瞥一眼这里的目标的人来说

```
( [manual input text] / [Generated PHP < td > text]) * 100 ) 
```

如果您想查看我的代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:59:38.700

如果您的 php 代码生成：

```
<td> I-WANT-THIS-GENERATED-PHP-TEXT </td> 
```

那么它现在是一个可访问的 DOM 元素，您可以在 javascript 中以不同的方式访问它：

1.  `document.getElementsByTagName("td")[<td_index_in_actual_dom>]`

2.  （如果您向标签添加 id 属性）`document.getElementById('<td_id>')`

3.  （加载了 jQuery）`$('#<td_id>')`或`$('.<class_attribute>')`

我不建议您使用第一种方法，因为假设 DOM 具有静态元素是一种非常糟糕的做法。

# iphone - UIAlertView 导致 iOS SDK 6.0 崩溃

> ID：12408901
> 
> 赞同：18
> 
> 时间：2012-09-13T14:44:22.060
> 
> 标签：iphone, objective-c, uialertview, ios6

我最近向 App Store 提交了一个尚未被接受的应用程序。同时，我下载了 Xcode 4.5 并在 iPhone 6.0 Simulator 中测试了我的应用程序。

但是，当我打算显示 时，应用程序会因错误而在线`UIAlertView`崩溃。它适用于 iPhone 5.1 模拟器。 `[myAlertView show]``EXC_BAD_ACCESS`

这是我的代码：

```
UIAlertView *myAlertView = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Are you sure?" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];
[myAlertView show]; 
```

这正常吗？我的代码做错了什么？

另外，您认为我应该将我的应用程序重新发送给 Apple 吗？（只是征求您的意见）

提前致谢。

编辑：由于 iOS 6 崩溃，Apple 拒绝了该应用程序。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-20T01:56:24.833

删除此方法并使用另一种方法：

```
 [myAlertView show]; 
```

试试这个方法：

```
 [myAlertView performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES]; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-13T15:07:13.720

请参阅此相关问题： [UIAlertView 从后台线程显示且没有委托创建 EXC_BAD_ACCESS](https://stackoverflow.com/questions/8155735/uialertview-shown-from-background-thread-and-with-no-delegate-creates-exc-bad-ac)

用户输入和 UI 调用必须来自主线程。它们中的许多将“大部分”时间在其他线程上工作，但有时会崩溃。与模拟器相比，它们在设备上崩溃的可能性更大（或多或少），但 Apple 所做的更改可能会影响 iOS6 中的这种差异。

对于您的第二个问题，我会回答是的，我会在您解决问题后立即上传更新的二进制文件以供审核，特别是如果您可以在设备上重现它（我强烈建议您尝试在设备上重现它） . 否则，您可能 A) 因用户讨厌的错误而被接受，或 B) 被拒绝并有更长的延迟和更严格的审查。如果您在审核完成之前发送更新的二进制文件，它确实会让您处于“排在最后”的 AFAIK，但比替代方案更好。

# vba - 转到其他字段中的行变量

> ID：12408906
> 
> 赞同：0
> 
> 时间：2012-09-13T14:44:46.470
> 
> 标签：vba, excel-2010, rows, copy-paste

我有 2 个工作表，`Master`并且`Temporary`.

在 上`Temporary`，单行填充数据，例如`LineNr`, `CustomerName`, `Opportunity`, `Sales`。我使用这一行来更改字段中的数据。

该`Master`工作表有一个大约 25 行 ( `A3:A27`) 的列表，其中的数据与布局相似`Temporary`且布局相同。我从工作表中的行复制/粘贴到工作`Master`表上`Temporary`。

根据工作表`LineNr`上的`Temporary`，我需要自动复制行 ( `A3:D3`)，在 上找到相应的行`Master`，然后将值粘贴到那里。

我找不到如何选择正确的行`Master`并将其粘贴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:21:52.890

在临时表上创建一个按钮（插入形状）。右键单击它，选择分配宏，然后单击新建。插入此代码：

```
With Worksheets("Master").Range("A3:A27")
    Set cell = .Find(Worksheets("Temporary").Range("A3").Value, LookIn:=xlValues)
    If Not cell Is Nothing Then
        Worksheets("Master").Range(cell.Address).Offset(0, 1).Value = Worksheets("Temporary").Range("B3").Value
        Worksheets("Master").Range(cell.Address).Offset(0, 2).Value = Worksheets("Temporary").Range("C3").Value
        Worksheets("Master").Range(cell.Address).Offset(0, 3).Value = Worksheets("Temporary").Range("D3").Value
    End If
End With 
```

这假设您有唯一的行号......否则它只会更新它找到的第一个。

# php - 在mysql中组织更改字段值

> ID：12408907
> 
> 赞同：1
> 
> 时间：2012-09-13T14:44:46.843
> 
> 标签：php, mysql, perl

我需要对我的数据库中的一列进行排序，该列是我的类别结构列中的数据是城市名称但并非每个城市的所有名称都相同，我需要做的是遍历我的列可能有 20-40 个值，它们是同一个城市，但写法不同我需要一个可以解释它们并将它们更改为单个值的脚本

所以我可能在城市列中有两个值说：（英格兰>伦敦）和（西伦敦）但我需要更改为伦敦，是否有脚本能够解释已经存在的值并更改它们对价值而言，我希望我一个一个地知道这样做的困难方式，但想知道是否有任何语言的脚本可以完成这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:37:41.257

我已经做了很多次这种数据清理工作，恐怕我不知道有什么比编写自己的修复更容易的了。

我可以推荐的一件事是使该过程可重复。有一个类似（rulenum、pattern、new_value）的替换表。然后，处理表的相关位的副本，以便您可以重新运行整个脚本。

然后，您可以从明显的匹配开始（只看看起来合理的匹配）并转向更模糊的匹配。最终，您将有 50 个没有匹配项，您可以为此手动修补条目。

使其可重复很重要，因为您一定会在最初的几次尝试中发现不匹配的内容。

因此，类似于（未经测试的语法）：

```
CREATE TABLE matches (rule_num int PRIMARY KEY, pattern text, new_value text)

CREATE TABLE cityfix AS 
SELECT id, city AS old_city, '' AS new_city, 0 AS match_num FROM locations;

UPDATE c SET c.new_city = m.new_value, c.match_num = m.rule_num 
FROM cityfix AS c JOIN matches m ON c.old_city LIKE m.pattern 
WHERE c.match_num = 0;

-- Review results, add new patterns to rule_num, repeat UPDATE
-- If you need to you can drop table cityfix and repeat it. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T17:31:18.177

只是一个想法：16K 不是那么多。首先使用 Perl `DBI`（我假设您将使用 Perl）获取该城市列，将其存储在哈希中（城市名称作为哈希），然后找到适合您需要的算法（性能方面）来迭代哈希键并用于`String::Diff`查找匹配的交集（阅读它，它肯定可以帮助您）并将其存储为一个值。然后您可以使用它来使用键（旧值）和值作为新值来更新数据库更新。

# c# - C# 如何指定 SetupDiGetDeviceRegistryProperty 字段值 SPDRP_HARDWAREID

> ID：12408909
> 
> 赞同：-2
> 
> 时间：2012-09-13T14:44:49.213
> 
> 标签：c#

我`SetupDiGetDeviceRegistryProperty`在 C# 中使用这个函数来查询硬件 ID 并知道要为数据分配多大的缓冲区。但是我在`SPDRP_HARDWAREID. 错误信息是

> “当前上下文中不存在名称“SPDRP_HARDWAREID”。

我试过声明`SPDRP_HARDWAREID`为`enum`，但没有奏效。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:37:28.687

如果您只想使用 hardwareid 函数，只需输入 0x00000001 并忘记变量名。记住让其他参数类型也有效，你的声明是错误的，你应该使用这个：

```
[DllImport("setupapi.dll", CharSet = CharSet.Auto, SetLastError = true)]
public static extern bool SetupDiGetDeviceRegistryProperty(
    IntPtr DeviceInfoSet,
    ref SP_DEVINFO_DATA DeviceInfoData,
    uint Property,
    out UInt32 PropertyRegDataType,
    byte[] PropertyBuffer,
    uint PropertyBufferSize,
    out UInt32 RequiredSize
    ); 
```

# tomcat - 无法编辑 Maven settings.xml

> ID：12408910
> 
> 赞同：2
> 
> 时间：2012-09-13T14:44:51.023
> 
> 标签：tomcat, maven, continuous-integration, maven-tomcat-plugin

对于 tomcat-maven-plugin 我需要将以下块添加到 settings.xml

```
<server>  
    <id>myserver</id>  
    <username>myusername</username>  
    <password>mypassword</password>  
</server> 
```

但我无法编辑它，因为它位于 Amazon ec2 的某个地方。

我可以通过 -Dmaven.tomcat.username="someusername" 等命令行传递凭据吗？

关于这个插件[http://mojo.codehaus.org/tomcat-maven-plugin/usage.html](http://mojo.codehaus.org/tomcat-maven-plugin/usage.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:33:31.150

您提供的文档中引用的部署目标说，用户名和密码可以在 cmd 行中使用这些参数定义：

```
-Dtomcat.username=<yourDeployUser> -Dtomcat.password=<yourDeployPassword> 
```

请参阅[http://mojo.codehaus.org/tomcat-maven-plugin/deploy-mojo.html](http://mojo.codehaus.org/tomcat-maven-plugin/deploy-mojo.html)。

# android - 如果应用程序尚未运行，广播接收器不会收到 ACTION_BOOT_COMPLETED？

> ID：12408911
> 
> 赞同：1
> 
> 时间：2012-09-13T14:44:56.973
> 
> 标签：android, broadcastreceiver, boot

我一直在尝试创建一个没有 Activity 的应用服务，但遇到了一些问题。

我希望服务从引导运行，所以自然使用 a`BroadcastReciever`来捕获`ACTION_BOOT_COMPLETED`这个在测试时没有问题。我使用一个 Activity 来启动和停止服务以测试它是否正常工作，然后重新启动以查看启动接收器是否工作，它确实，快乐的日子。

从应用程序中删除了测试活动并使用了以下清单。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.package"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <!-- <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
             <action android:name="android.intent.action.MAIN" />
             <category android:name="android.intent.category.LAUNCHER" />  
        </intent-filter> 
    </activity>  -->
    <receiver android:name=".BootReceiver">
        <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
    <service android:name=".SWKeepAliveService" />
</application>
</manifest> 
```

卸载然后重新安装应用程序，重新启动设备，什么都没有。用 测试了几次`adb shell am broadcast -a android.intent.action.BOOT_COMPLETED`，还是没有。

经过反复试验，我发现广播接收器永远不会收到`ACTION_BOOT_COMPLETED`应用程序从未运行过的情况。当然，如果没有启动器，它永远不会运行。

我错过了什么吗？我在文档中没有看到任何提及这一点。

**编辑 1**

用我的 AOSP 构建进行了一些测试，上面的清单在 Gingerbread 上很好，但在 Jelly Bean 上不行。一定有什么改变了，我只能假设这是出于安全原因（可以理解）。虽然我还没有看到任何文件来支持这一事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:33:39.707

> 我错过了什么吗？

是的。

> 我在文档中没有看到任何提及这一点。

它在[Android 3.1 发布文档](http://developer.android.com/sdk/android-3.1.html#launchcontrols)、[秃头人的博客文章](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)以及StackOverflow 上看似[无限](https://stackoverflow.com/a/9682814/115145)多的[答案中都提到过。](https://stackoverflow.com/a/11099685/115145)

# mysql - mysql 慢速复杂查询，按顺序排列

> ID：12408913
> 
> 赞同：1
> 
> 时间：2012-09-13T14:44:58.983
> 
> 标签：mysql, join, percona

即使没有下面的查询也`order by`很慢，我不知道为什么。我猜它是，`where date_affidavit_file`但我怎样才能让它快速`order by`呢？也许 job_id 上的 sublect 与 where 匹配，然后将其传递到代码的其余部分，但我仍然需要像这样通过服务器订购服务器名称。有什么建议么？

```
explain select sql_no_cache court_county, job.id as jid, job_status,
    DATE_FORMAT(job.datetime_served, '%m/%d/%Y') as dserved , 
    CONCAT(server.namefirst, ' ', server.namelast) as servername, client_name,
    DATE_FORMAT(job.datetime_received, '%m/%d/%Y') as dtrec ,
    DATE_FORMAT(job.datetime_give2server, '%m/%d/%Y') as dtg2s, 
    DATE_FORMAT(date_kase_filed, '%m/%d/%Y') as dkf, 
    DATE_FORMAT(job.date_sent_to_court, '%m/%d/%Y') as dtstc ,
    TO_DAYS(datetime_served )-TO_DAYS(date_kase_filed) as totaldays from job
    left join kase on kase.id=job.kase_id 
    left join server on job.server_id=server.id
    left join client on kase.client_id=client.id
    left join LUcourt on LUcourt.id=kase.court_id 
    where date_affidavit_filed  is not null and date_affidavit_filed  !='' order by servername; 
```

```
+----+-------------+---------+--------+----------- ------------+---------+---------+------------------ -----+--------+------------------------------------ ------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+---------+--------+----------- ------------+---------+---------+------------------ -----+--------+------------------------------------ ------------+
| 1 | 简单 | 工作 | 全部 | date_affidavit_filed | 空 | 空 | 空 | 365212 | 使用哪里；使用临时的；使用文件排序 |
| 1 | 简单 | 加濑 | eq_ref | 初级 | 初级 | 4 | pserve.job.kase_id | 1 | |
| 1 | 简单 | 服务器 | eq_ref | 初级 | 初级 | 4 | pserve.job.server_id | 1 | |
| 1 | 简单 | 客户 | eq_ref | 初级 | 初级 | 4 | pserve.kase.client_id | 1 | |
| 1 | 简单 | 卢考特 | eq_ref | 初级 | 初级 | 4 | pserve.kase.court_id | 1 | |
+----+-------------+---------+--------+----------- ------------+---------+---------+------------------ -----+--------+------------------------------------ ------------+
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:48:40.307

检查您是否在以下列上有索引。`job.kase_id`或者`job.server_id`

此外，您正在按不是最佳的计算字段进行排序。也许按带有索引的字段排序。

如果您需要保留该精确排序，您可能需要在数据库中为该值添加一个字段。并使用适当的值填充它或在数据库上设置触发器以自动为您填充它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:02:54.860

这可以通过以下方式加快订单：

```
CREATE INDEX namefull ON server (namefirst,namelast); 
```

如果你这样做`ORDER BY (server.namefirst, server.namelast)`而不是`ORDER BY servername`，它应该产生相同的输出。

您还可以在要加入的任何字段的每个表上创建索引，这也可以提高查询的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:50:31.620

写的时候，

```
where date_affidavit_filed  is not null and date_affidavit_filed  !='' 
```

您实际上正在选择大多数行。或者至少太多以至于不值得通过索引运行。查询计划器看到有*一个*索引涉及`date_affidavit_filed`，但决定不使用它并使用仅涉及`date_affidavit_filed`;的 WHERE 子句。所以我们知道这不是关键问题，它一定是基数问题。

```
|  1 | SIMPLE      | job     | ALL    | date_affidavit_filed | NULL    | NULL    | NULL                  | 365212 | Using where; Using temporary; Using filesort | 
```

您可以尝试通过在

```
date_affidavit_filed, kase_id, server_id 
```

以该顺序。查询返回多少行？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T15:02:05.100

您正在选择真正不为空的所有内容。这真的意味着一切。我不知道你有多少行数据，但要经历很多。

尝试将查询范围缩小到日期范围或特定客户。

如果你真的需要一切，不要一次又一次地输出它，而是在你用来输出所有格式的软件中建立一个大字符串，然后当你完成循环遍历结果并构建您希望输出的数据可以一次性输出。

您也可以使用分页。只需添加`limit 0,30`第 1`limit 30,30`页、第 2 页等，然后让最终用户浏览这些页面。

# android - 自定义列表视图适配器上的 ResourceNotFoundException

> ID：12408918
> 
> 赞同：1
> 
> 时间：2012-09-13T14:45:09.337
> 
> 标签：android, listview, adapter, android-relativelayout, custom-component

我的清单上有这样的活动：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <ListView
        android:id="@+id/altOrderslist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
         />
 </RelativeLayout> 
```

我想用这些项目制作自定义列表视图：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5dip" >

    <!-- ListRow Left sied Thumbnail image -->

    <LinearLayout
        android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:padding="3dip" >

        <TextView
            android:id="@+id/altOrderId"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:text="Rihanna Love the way lie"
            android:textColor="#040404"
            android:textSize="15dip"
            android:textStyle="bold"
            android:typeface="sans" />
    </LinearLayout>

    <!-- Title Of Song -->

    <!-- Artist Name -->

    <TextView
        android:id="@+id/altOrderTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="1dip"
        android:layout_toRightOf="@+id/thumbnail"
        android:text="Just gona stand there and ..."
        android:textColor="#343434"
        android:textSize="10dip" />

    <!-- Rightend Duration -->

    <TextView
        android:id="@+id/altOrderStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="5dip"
        android:gravity="right"

        android:textColor="#10bcc9"
        android:textSize="10dip"
        android:textStyle="bold" />

    <!-- Rightend Arrow -->

    <TextView
        android:id="@+id/altOrderPrice"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/thumbnail"
        android:text="Rihanna Love the way lie"
        android:textColor="#040404"
        android:textSize="15dip"
        android:textStyle="bold"
        android:typeface="sans" />

</RelativeLayout> 
```

这是我的适配器类：

```
 public class OrderAdapter extends ArrayAdapter<Order>{

        Context context; 
        int layoutResourceId;    
        List<Order> orders = null;

        public OrderAdapter(Context context, int layoutResourceId, List<Order> orders) {
            super(context, layoutResourceId, orders);
            this.layoutResourceId = layoutResourceId;
            this.context = context;
            this.orders = orders;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View row = convertView;
            OrderHolder holder = null;

            if(row == null)
            {
                Log.i("I'm in OrderAdapter",Integer.toString(layoutResourceId));

                LayoutInflater inflater = ((Activity)context).getLayoutInflater();
                row = inflater.inflate(R.layout.dash_alt_item, parent, false);
                Log.i("I'm in OrderAdapter",Integer.toString(layoutResourceId));
                holder = new OrderHolder();
                holder.orderId = (TextView)row.findViewById(R.id.altOrderId);
                holder.orderTitle = (TextView)row.findViewById(R.id.altOrderTitle);
                holder.orderStatus = (TextView)row.findViewById(R.id.altOrderStatus);
                holder.orderPrice = (TextView)row.findViewById(R.id.altOrderPrice);

                //row.setTag(holder);
            }
            else
            {
                holder = (OrderHolder)row.getTag();
            }

            Order order = orders.get(position);
            holder.orderId.setText(order.getOrderid());
            holder.orderTitle.setText(order.getTitle());
            holder.orderStatus.setText(order.getProcess_status().getProccessStatusTitle());
            holder.orderPrice.setText(Float.toString(order.getPrice()));

            return row;
        }

        static class OrderHolder
        {
            TextView orderId;
            TextView orderTitle;
            TextView orderStatus;
            TextView orderPrice;
        }
    } 
```

以及我如何在我的活动中使用它：

```
public class DashboardActivityAlt extends Activity{

    static List<Order> orders;
    List<Order> forPrint = new ArrayList<Order>();
    private ListView listView1;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.dash_alt);
        try {
            this.getOrderList("1", "10"); **// filling the forPrint list**
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        OrderAdapter adapter = new OrderAdapter(this, 
                 R.layout.dash_alt_item, **forPrint**);
        listView1 = (ListView)findViewById(R.id.altOrderslist);
        listView1.setAdapter(adapter);
    } 
```

我在这行得到 ResourceNotFoundException`holder.orderId.setText(order.getOrderid());` 这是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T14:48:52.397

确保您没有将 int 传递给该方法。将其转换为 String 并将开始按预期工作。

原因是 setText() 重载它有版本：

```
setText(int resId)
setText(String text) 
```

# objective-c - 值更改时 KVO 不触发

> ID：12408923
> 
> 赞同：3
> 
> 时间：2012-09-13T14:45:31.927
> 
> 标签：objective-c, macos, key-value-observing, foundation, key-value-coding

我正在尝试使用 Apple 的 KVC 进行一些测试，但由于某种原因，当我通过 KVC 更改值时，我无法触发 KVO。

我有以下代码：

```
#import <Foundation/Foundation.h>

@interface Character : NSObject
{
    NSString *characterName;
    NSInteger ownedClowCards;
}
@property (nonatomic, retain) NSString *characterName;
@property (nonatomic, assign) NSInteger ownedClowCards;
-(void)hasLostClowCard;
-(void)hasGainedClowCard;
@end

@implementation Character
@synthesize characterName;
@synthesize ownedClowCards;

-(void)hasLostClowCard
{

}

-(void)hasGainedClowCard
{

}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSLog(@"Change");
}

@end

int main()
{
    Character *sakura;
    Character *shaoran;

    //---------------------------------------------------------------------
    // Here begins the KVO section.

    [sakura addObserver:sakura forKeyPath:@"ownedClowCards" options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context:nil];

    //Create and give the properties some values with KVC...

    sakura = [[Character alloc] init];
    [sakura setValue:@"Sakura Kinomoto" forKey:@"characterName"];
    [sakura setValue:[NSNumber numberWithInt:20] forKey:@"ownedClowCards"];

    shaoran = [[Character alloc] init];
    [shaoran setValue:@"Li Shaoran" forKey:@"characterName"];
    [shaoran setValue:[NSNumber numberWithInt:21] forKey:@"ownedClowCards"];

    //Done! Now we are going to fetch the values using KVC.

    NSString *mainCharacter = [sakura valueForKey:@"characterName"];
    NSNumber *mainCharCards = [sakura valueForKey:@"ownedClowCards"];

    NSString *rival = [shaoran valueForKey:@"characterName"];
    NSNumber *rivalCards = [shaoran valueForKey:@"ownedClowCards"];

    NSLog(@"%@ has %d Clow Cards", mainCharacter, [mainCharCards intValue]);
    NSLog(@"%@ has %d Clow Cards", rival, [rivalCards intValue]);

    [sakura setValue:[NSNumber numberWithInt:22] forKey:@"ownedClowCards"];
} 
```

就像你看到的那样，它是非常非常基本的代码，所以我很惭愧，无论出于何种原因，我都无法让它工作。我要做的就是在ownedClowCards 更改时收到通知。我正在注册观察员。当我运行我的程序时，我希望在程序完成运行后看到一次“已更改”消息。但它永远不会。Changed 永远不会打印到我的程序中，所以我假设 observeValueForKeyPath:ofObject:change:context: 没有被调用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:50:37.200

```
[sakura addObserver:sakura forKeyPath:@"ownedClowCards" options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context:nil]; 
```

在初始化 sakura 之前，您正在执行上述操作。当然，设置 nil 来观察对 nil 的变化没有任何作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T14:48:29.247

您将观察者添加到尚不存在的对象。

```
Character *sakura; 
```

这只是声明了变量，但实际上并没有分配或初始化它。

`sakura = [[Character alloc] init];`在注册为观察者之前尝试调用。

顺便说一句，`NSString`属性通常使用`copy`标志而不是`retain`. 对于原始类型 ( ) ，内存管理标志 ( `assign`) 没有意义`NSInteger`。

# java - 检查 JSP 输入是否为“空”

> ID：12408924
> 
> 赞同：0
> 
> 时间：2012-09-13T14:45:34.457
> 
> 标签：java, jsp

在我的测试中，以下内容似乎涵盖了我能想到的确保填充字段的所有内容。谁能想到我可能错过的案例？

```
public static boolean isEmpty(final String string) {
    return string != null && !string.isEmpty() && !string.trim().isEmpty();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:49:36.873

你为什么不直接使用图书馆？

一个例子是 Apache 的 Common Utils：

[StringUtils.isBlank()](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringUtils.html#isBlank%28java.lang.String%29)

[StringUtils.isNotBlank()](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringUtils.html#isNotBlank%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:04:00.123

这个名称有点误导，因为该方法被标记为“isEmpty”，但当它不为空时会返回 true ......但这取决于你。

我会将您的 AND 语句更改为 OR 并删除中间项，因为它是多余的，例如

```
public static boolean isEmpty(final String string) {
  return string == null || string.trim().isEmpty();
} 
```

**例子：**

```
 if(isEmpty(null)){
        System.out.println("Empty");
    }else{
        System.out.println("Not Empty");
    }
    if(isEmpty("")){
        System.out.println("Empty");
    }else{
        System.out.println("Not Empty");
    }
    if(isEmpty(" ")){
        System.out.println("Empty");
    }else{
        System.out.println("Not Empty");
    }
    if(isEmpty("Test")){
        System.out.println("Empty");
    }else{
        System.out.println("Not Empty");
    } 
```

**输出：**

```
 Empty
 Empty
 Empty
 Not Empty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:51:18.043

[Apache Commons StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)使用以下技术：

[空](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isEmpty%28java.lang.String%29)：

```
public static boolean isEmpty(String str) {
    return str == null || str.length() == 0;
} 
```

[空白](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isBlank%28java.lang.String%29)：

```
public static boolean isBlank(String str) {
    int strLen;
    if (str == null || (strLen = str.length()) == 0) {
        return true;
    }
    for (int i = 0; i < strLen; i++) {
        if ((Character.isWhitespace(str.charAt(i)) == false)) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-13T15:04:19.453

你可以这样做：

```
public static boolean isEmpty(String string) { //don't make it final going in or you cant trim it.
    string = string.trim();
    return string != null || string.length() == 0;
} 
```

# css - 字体样式中双高文本和双宽文本的 css

> ID：12408926
> 
> 赞同：2
> 
> 时间：2012-09-13T14:45:47.473
> 
> 标签：css, html, printing, fonts, typography

任何人都可以帮助我在不使用任何图像的情况下在 css 中以字体样式（就像在点阵打印机中一样）做双高文本和双宽文本。

除此以外的任何代码？

```
heading{
   font-weight:bold; 
   width:200%;
} 
```

我的期望如下。

![在此处输入图像描述](../Images/50179471b81e22367c9e75e6534e7cd9.png)

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T17:32:19.113

操作，

更新的小提琴，包括所有供应商前缀`transform`和`transform-origin`：http: [//jsfiddle.net/LTaAy/1/](http://jsfiddle.net/LTaAy/1/)

~~看到这个小提琴：http: [//jsfiddle.net/LTaAy/](http://jsfiddle.net/LTaAy/)~~

## IMG

![小提琴截图](../Images/3d3dd880ccaa63bc1b6ae4c757d14837.png)

## HTML

```
 <p class="doubleWidth">DOUBLE WIDTH</p>
  <p class="doubleHeight">Double Height</p>
  <p class="doubleWidthandHeight">Double Width and Height</p> 
```

## CSS

```
p {
    -webkit-transform-origin: 0 0;
    -moz-transform-origin: 0 0;
}
p.doubleWidth {
    -webkit-transform: scaleX(2);
    -moz-transform: scaleX(2);
}
p.doubleHeight {
    -webkit-transform: scaleY(2);
    -moz-transform: scaleY(2);
}
p.doubleWidthandHeight {
    -webkit-transform: scaleX(2) scaleY(2);
    -moz-transform: scaleX(2) scaleY(2);
} 
```

~~我只包括了 2 个供应商前缀，但应根据需要应用它们。~~ - 只有上面是正确的，这个小提琴[http://jsfiddle.net/LTaAy/1/](http://jsfiddle.net/LTaAy/1/)已经更新。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T15:14:08.737

## **CSS 变换：缩放**

查看变换比例，这应该可以解决问题：

[http://www.css3files.com/transform/](http://www.css3files.com/transform/)

```
-webkit-transform:scale(2,1);
-moz-transform:scale(2,1);
-ms-transform:scale(2,1);
-o-transform:scale(2,1);
transform:scale(2,1); 
```

[letteringjs.com](http://letteringjs.com)可用于通过自动跨度注入独立将此 CSS 应用于每个字母，因为如果整个跨度是文本跨度被拉伸，您可能会遇到布局问题。

此外，您可能可以避免使用`width: 50%;`双宽文本以将其限制在布局中。

## **创建自己的字体**

否则自己编辑字体。使用像[Font Creator](http://www.high-logic.com/font-editor/fontcreator.html)这样的工具。只需操纵比例，并保存 2 种新字体，一种宽度为 200%，另一种高度为 200%。将它们放入[Font Squirrel](http://www.fontsquirrel.com/fontface/generator)并将所有 3 个引用为独特的`@font-face`字体系列。

![Font Creator - 操作字体](../Images/8cb00ab364f2965aa0f36a18f198ddd7.png)

# c# - 如何获得“上一个”和“下一个”功能？

> ID：12408929
> 
> 赞同：0
> 
> 时间：2012-09-13T14:45:54.977
> 
> 标签：c#, asp.net, .net, button

我有一个程序，人们可以对视频发表评论。评论来了就像在队列状态。管理员可以进入管理部分并将评论标记为已批准或已删除。他们希望能够在按下上一个或下一个按钮以及批准或删除评论时自动转到队列中标记的下一个项目。我不太了解 jQuery 或 JavaScript，不知道是否可以使用它们来完成它，或者如何通过后面的代码来完成它（这是在 C# .NET 中）。任何帮助，将不胜感激：

```
Status and value:
In queue = 0
Approved = 1
Removed = 2 
```

这是代码隐藏。状态更改有效，我唯一不能做的就是让它进入队列中标记的下一条记录。前两个事件是空白的，因为我不知道如何填充它们，但简单地说，所有需要做的就是转到队列中标记的下一条记录。

如果您需要更多代码，请告诉我...

```
 protected void previous_clicked(object sender, EventArgs e)
    {   
    }

    protected void next_clicked(object sender, EventArgs e)
    { 
    }

    protected void approve_clicked(object sender, EventArgs e)
    {
        currentMessage = new videomessage(Request["id"].ToString());

        status.SelectedValue = "1";

        currentMessage.status = "1";
        currentMessage.Save();
    }

    protected void remove_clicked(object sender, EventArgs e)
    {
        currentMessage = new videomessage(Request["id"].ToString());

        status.SelectedValue = "2";

        currentMessage.status = "2";
        currentMessage.Save();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:14:09.517

听起来对我来说更像是一个架构挑战。

我建议使用[Queue](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)。[这是一种遵循先进先出](http://en.wikipedia.org/wiki/FIFO)(FIFO) 方法的集合类型。**您将对象放入队列并以相同的顺序**将它们取出。从此队列中接收到的对象会自动从队列中删除，因此您可以确保不会两次处理相同的元素。

然后，您描述的工作流程将按照以下简单步骤工作：

1.  每当有消息到达时，您就将对象[放入您的队列](http://msdn.microsoft.com/en-us/library/t249c2y7.aspx)中。
2.  当管理员单击 时`next button`，您请求[队列中](http://msdn.microsoft.com/en-us/library/1c8bzx97.aspx)的第一个对象。
3.  您的管理员执行他的管理任务并批准消息。
4.  再次单击`Next`从上述项目 1 开始。

**[编辑]**

糟糕，我意识到我的`Queue`方法不允许导航回以前的项目。

在这种情况下，我建议使用一个简单的`List`集合。可以通过列表中基于 0 的位置访问此列表。这使得实现向前/向后导航变得容易。

对于我的示例代码，请记住，我对您的环境有很多不了解的地方，所以我的代码在这里做了很多假设。

您需要在某个地方存储一个包含要批准的消息的集合：

```
private IList<videomessage> _messagesToApprove = new List<videomessage>(); 
```

您还需要一些变量来跟踪集合中的当前位置：

```
// Store the index of the current message
// Initial value depends on your environment. :-)
private int _currentIndex = 0; 
```

首先，您需要一个将新消息添加到该集合的起点，例如订阅某个事件左右。每当消息到达时，通过调用如下方法将其添加到集合中：

```
// I made this method up because I do not know where your messages really come from.
// => ADJUST TO YOUR NEEDS.
private void onNewMessageArriving(string messageId)
{
  videomessage arrivingMessage = new videomessage(messageId);
  _messagesToApprove.Add(arrivingMessage);
} 
```

您可以通过增加/减少位置索引轻松实现导航：

```
private void previous_Click(object sender, EventArgs e)
{
  // Check that we do not go back further than the beginning of the list
  if ((_currentIndex - 1) >= 0)
  {
    _currentIndex--;
    this.currentMessage = this._messagesToApprove[_currentIndex];
  }
  else
  {
    // Do nothing if the position would be invalid
    return;
  }
}

private void next_Click(object sender, EventArgs e)
{
  // Check if we have new messages to approve in our list.
  if ((_currentIndex + 1) < _messagesToApprove.Count)
  {
    _currentIndex++;
    currentMessage = _messagesToApprove[_currentIndex];
  }
  else
  {
    // Do nothing if the position would be invalid
    return;
  }
}

private void approve_Click(object sender, EventArgs e)
{
  // Sorry, I don't know where exactly this comes from, needs to be adjusted to your environment
  status.SelectedValue = "1";

  this.currentMessage.status = "1";
  this.currentMessage.Save();

  // If you want to remove items that have been checked by the admin, delete it from the approval list.
  // Otherwise remove this line :-)
  this._messagesToApprove.RemoveAt(_currentIndex);
}

private void remove_Click(object sender, EventArgs e)
{
  // Sorry, I don't know where exactly this comes from, needs to be adjusted to your environment
  status.SelectedValue = "2";

  this.currentMessage.status = "2";
  this.currentMessage.Save();

  // If you want to remove items that have been checked by the admin, delete it from the approval list.
  // Otherwise remove this line :-)
  this._messagesToApprove.RemoveAt(_currentIndex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:52:37.397

将当前评论保存`id`在会话或视图状态中，在单击下一个或上一个按钮时将其取回并相应显示：

```
Session["id"] = 2;
int id = (int) Session["id"]; 
```

# ios - 自定义右侧导航栏按钮

> ID：12408930
> 
> 赞同：0
> 
> 时间：2012-09-13T14:46:05.380
> 
> 标签：ios, uibutton, uinavigationbar

我在情节提要的 tableView 中添加了一个右栏按钮，创建了一个打开另一个窗口的 IB 操作。一切正常。但现在我想为该按钮使用自定义图像。我找到了这个：

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:infoIconImage forState:UIControlStateNormal]; 
```

我想用几行额外的代码就可以完成这项工作，但我似乎无法理解该按钮在代码中的名称。我如何将故事板中的按钮与代码联系起来。

初学者问题，不好意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:50:48.070

创建一个 IBOutlet 就像您将您的动作从情节提要链接到您的 .h 文件一样。将其命名为*按钮*，您就可以开始了！

顺便说一句，您可以在情节提要中设置“标准”图像：选择按钮，转到 Xcode 实用工具栏中的属性检查器（右栏），然后更改标识符！

*编辑 ：*

看看那里使用您自己的图像：

[自定义 UIBarButtonItem](http://mobiledevelopertips.com/user-interface/ios-5-customize-uinavigationbar-and-uibarbuttonitem-with-appearance-api.html)

关于 UIBarButtonItem 的部分接近文章的结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:24:17.140

好的，我发现有一个属性customView。所以这里是：

```
 // Set the custom back button
UIImage *infoIconImage = [UIImage imageNamed:@"info-button.png"];
//create the button and assign the image
UIButton *iButton = [UIButton buttonWithType:UIButtonTypeCustom];
[iButton setImage:infoIconImage forState:UIControlStateNormal];

//set the frame of the button to the size of the image
iButton.frame = CGRectMake(0, 0, infoIconImage.size.width, infoIconImage.size.height);

//assigning customized button
infoButton.customView = iButton; 
```

# php - Facebook 离线时发布墙数据 (access_token = staticValue)

> ID：12408940
> 
> 赞同：0
> 
> 时间：2012-09-13T14:46:37.857
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试将动态数据发布到 facebook 墙上。
我为 php 下载了 facebook api。

首先，至于测试，我使用下面的代码。

```
<?php
  // Remember to copy files from the SDK's src/ directory to a
  // directory in your application on the server, such as php-sdk/
  require '../src/facebook.php';

$config = array(
    'appId'  => 'myAPPID',
    'secret' => 'MySecretCode'
);

//'access_token' => $access_token = $facebook->getAccessToken(), 

$facebook = new Facebook($config);
$attachment =  array(
                    'access_token' => 'my_tokenkey', 
                                    'message' => 'Test Message offline test message',
                                    'name' => 'Name Test offline test...',
                                    'description' => 'here goes description and links http:anotherfeed.com | http://facebook.com/anotherfeed',
                                    'caption' => 'this is caption for action link',
                                    'picture' => 'http://www.google.com/tv/images/slivetv.png',
                                    'link' => 'www.yahoo.com',
                                        'properties' => array(
                                        array('text' => 'test link 1', 'href' => 'http://anotherfeed.com/?ref=1'),
                                        array('text' => 'test link 1', 'href' => 'http://anotherfeed.com/?ref=1'),
                                        ),  
);

try {
    $facebook->api('/me/feed', 'POST', $attachment);
} catch(FacebookApiException $e) {
    echo $e;
    # handling facebook api exception if something went wrong
}

?> 
```

至于我的程序要求，我希望我的程序将数据发布到 facebook 的墙上，无论 facebook 是在线还是离线。

但是当我尝试这段代码时，我得到了错误。

```
OAuthException: An active access token must be used to query information about the current user. 
```

有人可以给我建议吗？

# javascript - 定义完全独立的样式信息

> ID：12408946
> 
> 赞同：0
> 
> 时间：2012-09-13T14:46:51.353
> 
> 标签：javascript, html, css, web-applications

我正在构建 Web 应用程序的集合。所有这些网络应用程序都有相同的页眉和页脚。（除了当用户登录时他们的内容发生了一些变化）。

我不喜欢的是感觉在应用程序中为页眉或页脚定义的样式信息的使用/重新定义。如果发生这种情况，我可能需要在应用程序中重命名样式信息。

我对此有一些解决方案。

1.  使用 iframe 作为页眉和页脚。所以他们永远不会混淆。
2.  对页眉和页脚使用内联样式信息。
3.  使用非常复杂的 CSS 定义名称，例如 sE69621C09。所以在一个应用程序中，我从不会错误地使用相同的名称来获取样式信息。

我不确定 iframe。有些人说他们不安全。好吧，所有的网络应用程序都将由我们编写，但我不知道 javascript 是否可以用于服务器中的一些坏事。

内联样式信息可以增加每次请求时传输的数据量。

如果我在几个月后查看相同的代码，复杂的 CSS 名称会让我感到困惑。

你们在同一页面中混合不同的代码部分时使用什么样的技术来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:51:03.377

一种可能的解决方案是将样式信息与应用程序完全分离，并为每个应用程序维护单独的样式表。

因此，您的标题将使用通用样式标识符，例如

```
<div class="header">
    <h1 class="maintitle">...</h1>
    <p class="slogan-text">...</p>
</div> 
```

然后每个站点在它自己的样式表中定义这些样式，即 Site1 有一个文件，其中包含它的特定样式 in `site1-styles.css`， Site2 in`site2-styles.css`等。仅包含与特定站点相关的样式表。

避免同一`.css`文件中不同站点的样式信息重复。

# javascript - 隐藏字段数组结构

> ID：12408947
> 
> 赞同：0
> 
> 时间：2012-09-13T14:47:06.643
> 
> 标签：javascript, asp.net-mvc-3

```
<script type="text/javascript">
function LoadHiddenCheckBoxes() {
    var hdncheckbox = document.getElementById('hdnWeekDays')
    var checkbox0 = document.getElementById('sunday')
    hdncheckbox[0] = checkbox0.checked;
    var checkbox1 = document.getElementById('monday')
    hdncheckbox[1] = checkbox1.checked;
    var checkbox2 = document.getElementById('tuesday')
    hdncheckbox[2] = checkbox2.checked;
    var checkbox3 = document.getElementById('wednesday')
    hdncheckbox[3] = checkbox3.checked;
    var checkbox4 = document.getElementById('thursday')
    hdncheckbox[4] = checkbox4.checked;
    var checkbox5 = document.getElementById('friday')
    hdncheckbox[5] = checkbox5.checked;
    var checkbox6 = document.getElementById('saturday')
    hdncheckbox[6] = checkbox6.checked;
} 
```

这是我的 JS

```
@Html.HiddenFor(model => model.weekDays, new { id = "hdnWeekDays" })
        <input type="checkbox" id="sunday" style="float: left;" onchange="LoadHiddenCheckBoxes()" /> 
```

我还有一个 hiddenfor 来绑定模型中的数据。weekDays 定义为

```
 [DataMember]
    public bool[] weekDays {get; set;} 
```

我希望在这个数组中，在检查天数的位置为真，在不检查天数的位置为假

# extjs - ExtJS 4.1：如何将本地数据与 ajax 加载的数据合并到一个存储中？

> ID：12408952
> 
> 赞同：3
> 
> 时间：2012-09-13T14:47:24.070
> 
> 标签：extjs, extjs4, store, extjs4.1

我正在寻找一种将本地数据与 ajax 加载的数据结合在一个存储中的方法。我很难用英语解释这一点，我希望这段代码会更明确：

```
var store = Ext.create('Ext.data.Store', {
    autoLoad: true,
    fields: ['id', 'name'],
    proxy: { type: 'ajax', api: { read: '/read' }  },
    data: [{ id: 1, name: 'John' }]
}); 
```

"/read" 返回的 Json : `[{ id: 2, name: 'Jack' }]`.

期望的行为：`store.count() // 2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:55:55.663

您可以使用`.load({addRecords: true}`将加载的记录添加到现有记录。

当然，如果您在启用该选项的情况下**再次**`addRecords: true`加载，它将再次将记录添加到现有记录中，从而导致：

```
[{ id: 1, name: 'John' },{ id: 2, name: 'Jack' },{ id: 2, name: 'Jack' }] 
```

您可以实现一个加载前处理程序以将存储重置为原始数据并再次加载，如果您只想在`[{ id: 1, name: 'John' },{ id: 2, name: 'Jack' }]`每次再次加载时再次加载。

# c++ - C++ 从它的线程函数中引用一个 boost::thread

> ID：12408953
> 
> 赞同：0
> 
> 时间：2012-09-13T14:47:27.793
> 
> 标签：c++, multithreading, boost, this

我正在使用 boost 线程，我需要从其线程函数中引用一个线程，以便我可以将其存储在具有相应线程 ID 的映射中。主要思想是我将使用另一个线程通过查询 proc 表来收集线程统计信息，所以我不能使用`boost::this_thread::get_id()`. 我需要存储线程，以便可以在特定线程上调用中断和连接。

以下插入语句不起作用，但我希望 this 或 &this 引用该线程。

线程功能：

```
workerFunc(){
    std::string tid;
    tid=boost::lexical_cast<string>(syscall(SYS_gettid));
    threadMap.insert(pair<std::string,boost::thread>(tid,this));
} 
```

目前，我让父级插入但等待线程获取其线程 ID，但这不是我们想要的。

如何在不使用父级的情况下存储线程/指向线程的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:52:00.087

通过使用仿函数而不是函数，您可以为其添加状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:30:10.530

不，您不能直接将`thread`对象传递给您传递给`thread`构造函数的函数（或仿函数）。它有点像“鸡蛋或鸡”。

应该填充此映射的实体是管理器，它创建这些线程对象。为什么你必须“等待线程获取它的线程ID”？我在文档中没有看到这样的要求 -`get_id()`适用于任何“执行线程”，即 non-detached `thread`。

# javascript - JavaScript 检查隐藏字段的值并将其设置为隐藏字段值

> ID：12408955
> 
> 赞同：0
> 
> 时间：2012-09-13T14:47:39.480
> 
> 标签：javascript

```
function ClientDate(item) {
        if(item.value == "")
            return false;
        var today = new Date(doc.findItem('stop_date').value);
        var cDate = new Date(item.value);
        var fDate = new Date().setDate(today.getDate()+45);
        //alert("Stop Date is "+fDate.toString());
        //alert("client Date is "+cDate.toString());
        if (cDate < fDate){
            PC.setActivePage(doc.getPage("client"));
            alert("WARNING: date should be at least 45 days from today.");
            item.value = "";
            return false;
        }
        return true 
```

xml代码

```
<row height="17">
  <text x="1" width="94" height="16" align="left">Corrected by Date:</text>
  <edit x="86" width="70" height="16" id="stop_date5" onchange="fixdate(this,true);" readonly="yes" maxlength="10" />
  <edit type="button" x="158" width="55" height="16" id="calendar_doc_select" align="center" 
   onclick="doc.findItem('stop_date').value=PC.popupCalendar(this.page, 'stop_date');"> Calendar</edit> 
```

我的问题是如何从隐藏字段中填充？例如，如果隐藏字段填充了从 2012 年 9 月 1 日开始的 45 天，那么它将是 2012 年 10 月 15 日。

隐藏字段 id 是 'client_date2'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:58:23.203

获取隐藏字段值：

```
var hidden_value = document.getElementById('client_date2').getAttribute('value'); 
```

设置字段的值：

```
document.getElementById('client_date2').setAttribute('value',whatever); 
```

# sql - 需要添加顺序数据行

> ID：12408959
> 
> 赞同：-1
> 
> 时间：2012-09-13T14:47:49.057
> 
> 标签：sql, rows

我有一个有 2 列的表。在第一栏中，我有一个 30,000 的计数器。在第二列中，我想将“1-30000”行添加到第二列以测试转换。

我试图让它看起来像这样

```
COL A      Col B
1          1-1
2          1-2    
3          1-3 
```

我是这方面的新手，无论我如何尝试，我都可以让第一排来做我的竞标，但是 Col B 在 Col A 的末尾开始它的行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:56:10.920

我不知道您的 RDBMS 是什么，但您可以尝试：

```
update table
set colB = colB+'-'+colA 
```

# image - 如何在 gwt 应用程序中将 png 图像与 html imagemap 集成

> ID：12408968
> 
> 赞同：0
> 
> 时间：2012-09-13T14:48:02.197
> 
> 标签：image, gwt, imagemap

我的 gwt 应用程序使用外部库来呈现图表（birt）。这个库能够提供一个带有渲染 png 的 html/js-imagamap。但是将它集成到 gwt 前端的最佳方法是什么？我的第一个想法是让 lib 生成带有 imagemap 和嵌入（base64）图像的 html。html可以很容易地集成？！

但是 base64 不适合 ie6/7 (ie8 max 32kb)。那么有没有办法在 html 中链接图像并编写一个 servlet/gwt-service 来在加载 html 时获取图像？还是有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:52:05.640

如果您已经生成了 html+js/css，为什么不在您的主应用程序中将其呈现为 iframe？它简单而有效。

# c# - Properties.Settings - 多种形式

> ID：12408969
> 
> 赞同：0
> 
> 时间：2012-09-13T14:48:03.113
> 
> 标签：c#, .net, .net-4.5, application-settings, properties.settings

我有两种形式：

*   `MainForm`
*   `SettingsForm`

正如您可以想象的那样，`MainForm`使用诸如`Properties.Settings.Default.Path`并且`SettingsForm`应该能够在运行时配置这样的值。

但是以某种方式`SettingsForm: Properties.Settings.Default.Save();`在应用程序重新启动后立即生效，尽管我正在重新加载这些设置`MainForm: Properties.Settings.Default.Reload();`

到目前为止我有这个：

在`MainForm.cs`：

```
 // Handles "config button click" => display settings form
    private void configStatusLabel_Click(object sender, EventArgs e)
    {
        SettingsForm form = new SettingsForm();
        form.FormClosed += new FormClosedEventHandler(form_FormClosed);
        form.Show();
    }

    // Callback triggered on Settings form closing
    void form_FormClosed(object sender, FormClosedEventArgs e)
    {
        Properties.Settings.Default.Reload();
    }

    // There are another methods called after form_FormClosed is triggered, for example
    // StremWriter = new StreamWriter(  Properties.Settings.Default.Path) 
```

并且`SettingsForm.cs`：

```
 // Triggered on "Save button click" in Settings form, after changing values
    // Example: Properties.Settings.Default.Path = "C:\\file.txt" 
    private void saveButton_Click(object sender, EventArgs e)
    {
        Properties.Settings.Default.Save();
        Close();
    } 
```

我错过了什么？**如何实现“按需更改”？**

* * *

### 更多关于程序流程

在主窗体中，有几个按钮将触发功能，例如`ReloadLog()`使用`Properties.Settings.Default.Path`。所以最后我要按这个顺序执行函数：

```
ReloadLog(); // Triggered by the user (several times)
             // This reloads contents of log, say C:\\main.log

configStatusLabel_Click(); // User hit "configure button", there are two active forms
                           // SettingsForm is now displayed too

// At this point ReloadLog() may be called in MainForm many times
// Meanwhile in SettingsForm:
Properties.Settings.Default.Path = PathTextBox.Text;
private void saveButton_Click(object sender, EventArgs e) // User hit save button
{
    Properties.Settings.Default.Save();
    Close(); // This will trigger form_FormClosed in main form
}

// Now you would expect that following line will open D:\\another.log
ReloadLog();
// But it still uses original config, however when I turn app off and on again, it works 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:54:15.213

```
private void configStatusLabel_Click(object sender, EventArgs e)
{
    SettingsForm form = new SettingsForm();
    form.FormClosed += new FormClosedEventHandler(form_FormClosed);
    form.FormClosed += (s, e) => { MethodThatAppliesTheSettings(); };
    form.Show();
} 
```

# java - 如果我使用 spring，JSP 会转换为 servlet 代码吗？

> ID：12408975
> 
> 赞同：1
> 
> 时间：2012-09-13T14:48:22.617
> 
> 标签：java, spring-mvc

我在 spring-mvc 中使用 JSP 作为视图解析器。这些页面会在tomcat中转换为servlet吗？

如果是这样，是否同样适用于 Velocity、Thymeleaf 等其他视图？请解释它是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:50:29.947

是的，JSP 总是被转换为 servlet，这就是 JSP 文件的工作方式。

在其他视图/模板引擎中并非总是如此。例如，Velocity 是一个基于 Java 的模板引擎，velocity 模板被解析，但它不依赖于拥有一个 servlet 引擎。

关于 Spring，它有许多不同技术的视图解析器，所以你有一个抽象层，不必担心视图是如何在内部翻译来渲染你的模型的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:51:59.693

> 如果我使用 spring，JSP 会转换为 servlet 代码吗？

是的。如果您在任何地方使用 JSP*，它将被转换为 Servlet。

```
* - For Java EE Applications which uses Servlet containers. 
```

我不约`Velocity ,thymleaf,etc.`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:54:59.370

关于 Spring MVC 的 JSP、Velocity、Freemarker 等都是模板库。例如，用户向指定的 URL 发出 HTTP 请求。此 URL 映射到 Spring 控制器。控制器将构建模型的实例并返回视图和模型。然后 Spring 将使用视图（即一个 jsp 文件）并使用模型将其转换为 HTML。用户获得生成的 HTML。

更多关于 Spring MVC 和模板的信息在这里 [http://static.springsource.org/spring/docs/2.0.x/reference/view.html](http://static.springsource.org/spring/docs/2.0.x/reference/view.html)

# asp.net-mvc - 有多个地址的人

> ID：12408990
> 
> 赞同：0
> 
> 时间：2012-09-13T14:49:04.410
> 
> 标签：asp.net-mvc, razor

我正在尝试为我正在寻找的稍微复杂的“视图模型”/视图设置创建一个创建页面。

想象一下我有两个实体 -

人
-PersonID
- 姓名-身高 -
国籍

并且那个人可以有多个地址 - 这是地址实体：
地址
-PersonID
-AddressDescriptor
-FirstLine
-SecondLine -City
-ZipCode

现在在我的 Person Create 视图中，我希望用户能够输入人员详细信息，然后添加任意数量的地址。我将其可视化为人员和地址区域的一组文本框。随后是地址的添加按钮。单击此添加按钮时，会将地址添加到添加地址的网格中。网格也有删除/编辑的选项。

最后会有一个提交按钮，将人员和地址记录保存到数据库中。

要实现这样的目标，我最好的选择是什么。我是否应该为网格使用部分视图/由 AJAX 渲染回控制器？如果是这样，有人可以向我指出一个现代的例子——如果可能的话，使用 Razor 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:51:50.243

这贯穿了您要实现的基本原则：

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:52:49.043

您可以创建一个接受 AJAX 帖子的操作来添加用户。只需创建一个 jQuery 函数，当他们单击“添加地址”并提交时将创建您的表单，另一个 jquery ajax 调用发布到您的控制器操作。

# sql - 在 SQL Server 中选择下一条记录的最快方法是什么？

> ID：12408993
> 
> 赞同：1
> 
> 时间：2012-09-13T14:49:06.873
> 
> 标签：sql, sql-server

有没有比这更快或更有效的方法来选择下一条记录？

```
SELECT TOP 1 * 
FROM MyTable 
WHERE ID > @LastIDRead 
ORDER BY ID 
```

*注意：我需要所有的列*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:50:52.797

如果您在 ID 上有一个 CLUSTERED INDEX，这是最快的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:53:32.490

“下一条记录”在这里无关紧要，您想要的是根据其 ID 获取记录。如果 Id 被索引，那将是最好的选择。

# assembly - 使用 int 21h 输出函数时 AL 和 DL 或 AX 和 DX 之间的关系？

> ID：12408994
> 
> 赞同：0
> 
> 时间：2012-09-13T14:49:08.703
> 
> 标签：assembly, dos, x86-16

我只是对 al 和 dl 的关系感到好奇，因为当我输入一个字符，然后我在打印另一个字符后打印它时，al 的值突然改变了。这是下面的示例代码。谢谢！

```
cseg segment para 'code'
assume cs:cseg; ds:cseg; ss:cseg; es:cseg
org 100h
start: jmp begin

begin:  
mov ax, 03h
int 10h

mov ah, 01h
int 21h

mov ah, 02h
mov dl, '&'
int 21h

mov ah, 02h
mov dl, al
int 21h

int 20h
cseg ends
end start 
```

输出应该是这样的：

```
(char)&(char) 
```

但出现的是：

```
(char)&& 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T15:11:28.600

您的问题是中断服务 21h 的函数 02h 在 AL 中返回最后一个打印字符的 ASCII 码。

在您的情况下，当您请求 INT 21h 的服务 02h 打印“&”时，寄存器 AL 将被 ASCII 代码“&”覆盖。

`mov cl, al`如果您打算之后使用该值，则应在调用 INT 21h 的服务 02h 之前将AL 的内容备份到另一个寄存器（例如）。

查看[此](http://spike.scu.edu.au/~barry/interrupts.html)参考以获取有关您正在使用的服务的更多信息。

# groovy - withDefault 找不到类

> ID：12408997
> 
> 赞同：0
> 
> 时间：2012-09-13T14:49:14.673
> 
> 标签：groovy

有：

```
class Task {
    Integer code
    String name
}

def classDefinition = """
            package untitled24

            class TasksCommand {
                List tasks = [].withDefault { new Task() }
            }
            TasksCommand
        """

def shell = new GroovyShell(this.class.classLoader)
Class<?> definedClass = shell.evaluate(classDefinition) 
```

执行结果为：

```
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Script1.groovy: 5: unable to resolve class Task 
 @ line 5, column 47.
   List tasks = [].withDefault { new Task()
                             ^ 
```

任何的想法？(groovy 版本是 1.8.8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:07:58.837

那是因为你的Task定义不在包里，所以里面的代码`untitled24`找不到类...

如果您将以上内容更改为：

```
package woo

class Task {
  Integer code
  String name
}

def classDefinition = """package untitled24
                        |
                        |class TasksCommand {
                        |  List tasks = [].withDefault { new woo.Task() }
                        |}
                        |TasksCommand""".stripMargin()

def shell = new GroovyShell(this.class.classLoader)
Class<?> definedClass = shell.evaluate(classDefinition) 
```

它应该可以工作...（`stripMargin`为便于阅读而添加）