# StackOverflow 问答 11244000-11244999

# android-intent - 我们可以在意图中给出常量作为键名吗？

> ID：11244002
> 
> 赞同：0
> 
> 时间：2012-06-28T11:50:36.560
> 
> 标签：android-intent

我想在下一个活动中显示数据，数据是列表视图中用户单击的项目的内容，现在我试图通过意图发送此数据，我想给键名加上一些字符串常量。这是正确的方法吗？还是不应该这样做..实际上我试过了，但我在检索 StringExtras 时遇到了错误。请在这方面提供帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:08:56.527

是的，这是在 firstActivity 中的活动之间发送数据的方式

```
Intent i = new Intent(this, secondActivity.class);
i.putExtra("data", data);
startActivity(i); 
```

然后在 secondActivity

```
Bundle extras = getString().getExtras();
String a= extras.getString("data"); 
```

如果您遇到一些错误，请检查您是否正在传递一个 int 并试图获取一个类似的字符串。并将错误控制台发送给我们

# php - 有机会在 PHP 5.4 中重新启用调用时引用吗？

> ID：11244004
> 
> 赞同：1
> 
> 时间：2012-06-28T11:50:51.243
> 
> 标签：php

> **可能重复：**
> [PHP 5.4 Call-time pass-by-reference - 可以轻松修复吗？](https://stackoverflow.com/questions/8971261/php-5-4-call-time-pass-by-reference-easy-fix-available)

我目前正在修改某人的网页，该网页在 PHP 脚本中使用调用时引用。在本地，我使用的是 PHP 5.4，它删除了这些类型的调用。

有没有机会在不降级到以前版本的情况下再次启用该功能？

不幸的是，我不允许更改原始源文件，所以我坚持这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:52:00.407

如果您无法更改代码（如[PHP 5.4 Call-time pass-by-reference - Easy fix available](https://stackoverflow.com/questions/8971261/php-5-4-call-time-pass-by-reference-easy-fix-available)中所建议的那样），您唯一的解决方案是保持 PHP < 5.4 并接受您正在处理此项目的旧代码。

# jquery - 如何对两个 jQuery 对象执行操作？

> ID：11244006
> 
> 赞同：1
> 
> 时间：2012-06-28T11:50:52.887
> 
> 标签：jquery

假设我有一个传递多个 jQuery 对象的函数。

```
function manipulateStuff(obj1, obj2) { /* ... */ }
manipulateStuff($("div"), $("h1")); 
```

现在让我们假设我想对他们两个都执行一些操作。

我总是可以为每个重复代码，或者编写一些循环通过它们的代码，但我不想这样做。我想要一些组合多个 jQuery 对象的元素的方法。以下代码不起作用，但它演示了我正在寻找的东西

```
$(obj1, obj2).css("color", "red"); 
```

是否已经有办法在 jQuery 中内置了这个功能？如果没有，我可以写一个小插件来做吗？

**编辑：**要清楚，我正在操作*jQuery 对象*，而不是字符串选择器。我已经知道选择器中的逗号运算符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:54:28.190

另一种方式，支持尽可能多的论点：

```
function manipulateStuff(){
   $.each(arguments,function(){
       $(this).css('color','red');
   });
}

manipulateStuff($('div'),$('h1')); 
```

现场示例：http: [//jsfiddle.net/JBQDZ/](http://jsfiddle.net/JBQDZ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:06:34.483

如果您知道选择器，最简单的方法就是使用逗号：

```
$('div, h1').doSomething(); 
```

如果你有匿名的 jQuery 对象并且想要合并它们，你可以创建一个简单的实用函数来合并多个元素的 jQuery 对象：

```
$.add = function() {
    var args = $.makeArray(arguments);
    return $.fn.add.apply(args.shift(), args);
}

var divs = $('div'),
    h1 = $('h1');

$.add(divs, h1).doSomething(); 
```

[http://jsfiddle.net/hvm7z/](http://jsfiddle.net/hvm7z/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:52:31.903

如果你使用 jQuery 对象，你可以使用这个：

```
function manipulateStuff(obj1, obj2) {
    obj1.add(obj2).css("color", "red");
}

manipulateStuff($("div"), $("h1")); 
```

或者，如果您使用字符串选择器，请尝试以下操作：

```
function manipulateStuff(obj1, obj2) {
    $(obj1 + ", " + obj2).css("color", "red");
}

manipulateStuff("div", "h1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:53:00.140

一个简单的例子

```
function manipulateStuff(obj1, obj2) { 
   var bothObj =  $(obj1 + ", "+ obj2);  // cache a reference for further operation
   bothObj.css("color", "red");
}
manipulateStuff("div", "h1"); 
```

# postgresql - 在 UTF-8 PostgreSQL 数据库中指定 ASCII 列

> ID：11244010
> 
> 赞同：3
> 
> 时间：2012-06-28T11:51:01.867
> 
> 标签：postgresql, ascii, postgresql-9.1

我有一个 UTF8 编码和 LC_* en_US.UTF8 的 PostgreSQL 数据库。数据库以许多不同的语言存储文本列。

然而，在某些专栏中，我 100% 确信永远不会有任何特殊字符，即 ISO 国家和货币代码。

我试过做类似的事情：

```
"countryCode" char(3) CHARACTER SET "C" NOT NULL 
```

和

```
 "countryCode" char(3) CHARACTER SET "SQL_ASCII" NOT NULL 
```

但这会带来错误

```
ERROR: type "pg_catalog.bpchar_C" does not exist
ERROR: type "pg_catalog.bpchar_SQL_ASCII" does not exist 
```

我究竟做错了什么？

更重要的是，我应该为此烦恼吗？我来自 MySQL 背景，这样做是为了提高性能和空间，PostgreSQL 也是这种情况吗？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:19:29.893

老实说，我看不到此类设置的目的，例如：

*   正如@JoachimSauer 所提到的，UTF-8 编码中的 ASCII 子集将占用完全相同的字节数，因为这是发明 UTF-8 的要点：保持 ASCII 不变。因此，我看不到尺寸上的好处；
*   所有能够处理不同编码字符串的软件都将使用通用的内部编码，现在 PostgreSQL 默认为 UTF-8。当一些文本数据进入处理阶段时，如果编码不匹配，数据库会将其转换为内部编码。因此，如果您将某些列指定为非 UTF8，这将导致数据的额外处理，因此您将失去一些周期（但不要认为它会对性能造成显着影响）。

鉴于没有空间优势并且存在潜在的性能损失，我认为最好保持原样，即将所有列保留在数据库的默认编码中。

我认为对于相同的论点，PostgreSQL 不允许为数据库中的单个对象指定编码。[字符集和区域设置在每个数据库级别上设置](http://www.postgresql.org/docs/current/interactive/multibyte.html)。

# iphone - 添加了按钮作为 tabelViewCell 的附件视图，但为此设置的操作未调用

> ID：11244011
> 
> 赞同：0
> 
> 时间：2012-06-28T11:51:16.333
> 
> 标签：iphone

我已经在 AppDelegate 中实现了 createCellForTableview: 方法，该方法创建单元格，将适当的 UIButton 作为附件视图添加到单元格并将单元格返回给控制器。在我的 viewController 中，我正在创建附件视图的实例并将目标添加到按钮作为休闲：

```
 button = (UIButton *)cell.accessoryView;
 [button setTitle:@"access" forState:UIControlStateNormal];
 [button setTitle:@"access" forState:UIControlEventTouchUpInside];
 [button addTarget:self action:@selector(accessButtonTapped:event:)  forControlEvents:UIControlEventTouchUpInside]; 
```

我的问题是，没有调用按钮操作。请帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:59:36.150

将 @selector 更改为 accessButtonTapped：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:42:42.327

如果是附属按钮，则需要调用此方法：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:02:30.343

为什么你在选择器方法中传递偶数..试试这个..

```
button = (UIButton *)cell.accessoryView;
[button setTitle:@"access" forState:UIControlStateNormal];
[button setTitle:@"access" forState:UIControlEventTouchUpInside];
[button addTarget:self action:@selector(accessButtonTapped:)forControlEvents:UIControlEventTouchUpInside]; 
```

这可能会帮助你

# java - MySQL 和 Java：表不存在

> ID：11244012
> 
> 赞同：1
> 
> 时间：2012-06-28T11:51:22.803
> 
> 标签：java, mysql, mysql-workbench, eer-model

我使用 MySQL Workbench 5.2.40 CE 创建了 MySQL DB。起初，我创建了 New EER Model 并将其命名为 test。然后创建名为：testdb 的模式，然后创建名为：table1 的表。此外，创建了一个连接。

以下类用于创建与我的数据库的连接。它是成功的

```
import java.sql.*;

public class DBConnection {

public static Connection con = null;

public static Object Connect;

public static void ConnectDB () {

System.out.println("--- MySQL JDBC Connection Testing -----");

try {

     Class.forName("com.mysql.jdbc.Driver"); //loading the driver

    } catch (ClassNotFoundException e) {

    System.out.println("Where is your MySQL JDBC Driver?");
    e.printStackTrace();
    return;

    }

System.out.println("MySQL JDBC Driver Registered!");

try {

     //Connect to the database
     con = DriverManager.getConnection
     ("jdbc:mysql://localhost:3306/test", "root", "password");

    } catch (SQLException e) {

    System.out.println("Connection Failed! Check output console");
    e.printStackTrace();
    return;
    }

if (con != null) {
System.out.println("You made it, take control your database now!");

} else {
System.out.println("Failed to make connection!");
}
}
} //end class 
```

然后，我创建了另一个类，其中包含从上述“DBConnection”类调用“ConnectDB”的 Main 函数。问题是我收到一条错误消息： **出现异常！表“test.table1”不存在**

我确定 table1 存在。我从工作台上复制了它的名字。

这是 Main 类的代码：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.sql.PreparedStatement;
import java.util.Scanner;
import java.sql.*;

public class Main {

public static void main(String[] argv) {

String name=null;                           
DBConnection.ConnectDB(); //connect to database

//Read the inputs from the user
System.out.println("Enter the name: ");
Scanner userInput=new Scanner(System.in);
name=userInput.next();

//Confirmation messages
System.out.println("You entered: "+ name);

// BEGIN INSERT TO DB 
try{
// the mysql insert statement
String query=null;
query = " insert into table1 (name)"+ " values (?)";

// create the mysql insert preparedstatement

PreparedStatement preparedStmt = DBConnection.con.prepareStatement(query);
preparedStmt.setString    (1, name);

// execute the preparedstatement
preparedStmt.execute();
System.out.println("Inserted");
DBConnection.con.close();

} 
catch (Exception e)
{
  System.err.println("Got an exception!");
System.err.println(e.getMessage());
} 
}
} 
```

那么，如果表存在并且我在 Java 和 MySQL 中使用了所有小写字母，那么问题出在哪里？我是否通过仅在 Main 中调用“ConnectDB”函数并在我的“DBConnection”类中将类型连接的对象定义为公共静态来做正确的事情？稍后我将在许多类中插入值？？我很抱歉这个问题，但我一直在搜索并希望确保我做对了，这是我第一个连接到数据库的 Java 应用程序。

**编辑**

![在此处输入图像描述](../Images/bcd4a7d8d288a14a7de684736d45edd8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:16:07.517

两种选择：

1.  连接至`testdb`
2.  使用数据库限定符访问您的表。

**连接到 testdb**：

```
con = DriverManager.getConnection
     ("jdbc:mysql://localhost:3306/testdb", "root", "password"); 
```

**使用数据库限定符**：

```
query = " insert into testdb.table1 (name)"+ " values (?)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:15:41.223

`jdbc:mysql://localhost:3306/testdb`您的 JDBC url在您的代码中使用不正确 。

# java - 线程完成后显示 ProgressDialog

> ID：11244013
> 
> 赞同：1
> 
> 时间：2012-06-28T11:51:25.787
> 
> 标签：java, android, progressdialog

我有以下三个课程：

当我在 WorkingThread 运行时尝试显示 progressDialog 时，ProgressDialog 仅在 WorkingThread 完成后显示。我究竟做错了什么？

**我对使用 AsyncTask 不感兴趣！**

-开始活动：

```
public class StartActivity extends Activity implements OnClickListener
{
    public ProgressDialog pgd;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        imgv = (ImageView)findViewById(R.id.imageView1);
        tv = (TextView)findViewById(R.id.textview);

        Button btn = (Button)findViewById(R.id.button1);
        btn.setOnClickListener(this);
    }

    public void onClick(View v) 
    {
        pgd = ProgressDialog.show(StartActivity.this, "", "Loading picture"); // Start ProgressDialog before starting activity

        Intent ActivityIntent = new Intent(this, FirstActivity.class);
        startActivityForResult(ActivityIntent, 0);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == 0 && resultCode == RESULT_OK)
        {
            pgd.dismiss(); //Stop ProgressDialog when FirstActivity is "done"
        }
    }
} 
```

-

-第一个活动：

```
public class FirstActivity extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        WorkingThread wt = new WorkingThread();
        wt.start();

        try 
        {
            wt.join();
            Intent ActivityIntent = getIntent();
            setResult(RESULT_OK, ActivityIntent);
            finish();
        } 
        catch (Exception e) 
        {
        }
    }
} 
```

-工作线程：

```
public class WorkingThread extends Thread 
{

    @Override
    public void run() 
    {
        super.run();

        try
        {
            Thread.sleep(5000);
        }
        catch (Exception e)
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:58:53.100

问题`ProgressDialog`总是需要**当前的活动上下文**来显示。但在你的情况下`ProgressDialog`有点**不幸**

原因是，一旦您触发`ProgressDialog`接下来的几行，就从 Current 活动中取出 Context 并启动 Next Activity 即。因此，`FirstActivity`您`progressDialog`没有机会在屏幕上展示自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:13:09.083

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。这是一个例子：

```
package com.example.test;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

ProgressDialog activityProgressDialog;
private Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    context = this;

    Button btn = (Button)findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            new TestAsyncTask().execute();
        }
    });
}

private class TestAsyncTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        //Called before doInBackground.
        //Initialize your progressDialog here.
        activityProgressDialog = ProgressDialog.show(context,
                "Test",
                "Doing heavy work on background...", false,
                false);
    }

    @Override
    protected Void doInBackground(Void... v) {

        //Do your work here
        //Important!!! Update any UI element on preExcecute and
                    //onPostExcecute not in this method or else you will get an 
                    //exception.
        //The below code just make the thread inactive for 5 seconds.
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            Thread.currentThread().notify();
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void v) {
        //Dismiss the progessDialog here.
        activityProgressDialog.dismiss();
    }
}

 } 
```

我只是显示您不想使用 AsyncTask 的编辑。我不会删除这个答案（除非你想让我这样做），因为这是做你想做的另一种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:59:44.480

```
try 
        {
            wt.join();
            Intent ActivityIntent = getIntent();
            setResult(RESULT_OK, ActivityIntent);
            finish();
        } 
```

这是你的问题。UI 线程正在等待工作线程完成，因为`join()`.

# php - 创建动态页面正文的最有效方法是什么？

> ID：11244021
> 
> 赞同：6
> 
> 时间：2012-06-28T11:52:09.533
> 
> 标签：php, html, database, file

我查看了我父亲网站背后的 PHP 脚本，它是由一名聘请的程序员构建的。现在，我不认为我比他更好，但我认为它的技术可能不是最好的。

网站有动态的页面正文，意思是我爸爸可以通过特定的管理页面修改网站中大部分网页的HTML内容。现在它是通过数据库制作的：页面都存储在数据库中，每个请求都处理一个从数据库中获取页面并实现它的查询。

现在，我认为这种方式非常糟糕，主要是因为它需要（即使缓存不会那么昂贵）对数据库进行额外的查询。将页面存储为 HTML 文件，然后在需要时修改文件本身不是更有效吗？通过这种方式，我认为文件的编辑速度更快，并且每次请求加载 html 文件的内容比执行查询更容易和更快。

是吗？有没有其他（更有效）的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:57:22.103

这是世纪问题:) 这个问题没有确切的答案。只是性能提示。近 30 年来，人们一直在努力优化页面加载时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:10:48.993

不，在假设**的“/mypages”**文件夹下固定 HTML 页面并不是更好。

*   如果用户想要在他的网页中包含**大约 500 个内容怎么办？**他最终会得到 500 个文件。
*   是的，当然，它们的服务速度会更快，但这足以解决下面的大问题吗？
*   **页面翻译**呢？这将是静态 html 文件中的噩梦。
*   页面以这种方式呈现，因为它们是动态的；也就是说，**第三方/插件（例如）可以“输入”**内容并一次将其应用于多个内容；将相同的东西应用到许多**HTML 中**然后**再次**更改它会怎样？
*   如果你想改变**<HEAD>* *er 和 ** < SCRIPT>**s 加载呢？您将被迫**在每次更改的所有 500 个内容中执行此操作。
*   那些**.html**文件中包含的**PHP呢？**如果您没有将 PHP 放入其中，这不是一个原因，但如果包含的 php 文件被重命名/删除，您需要在大规模更新中更改所有文件。
***   想想**模板**；现代**CMS**（或管理页面）今天是动态的原因是因为它们可以在不影响内容本身的情况下更改类/样式等。对使用的主题或单个类的单个更改将导致（再次）大规模更新。*   数据库也是**文件**，但运行**速度更快**。如果您担心性能，您可以对数据库进行编程以使用缓存（例如**SELECT data FROM content WHERE id=1**之类的查询），因此查询在性能方面几乎是无查询的。**

 **我能想到更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:14:43.407

CMS 应该使用数据库来存储/获取动态内容有几个很好的理由。正如您可能不喜欢依赖数据库有几个原因一样。

*   临数据库：

    *   *安全*性：这是一个明显的、有点矛盾的论点，但尽管如此。如果您决定将内容作为单独的文件存储在服务器上，则它们需要存储在不允许公共访问的目录中。如果没有，用户可能能够单独访问您网站的各个部分，这会让人觉得不专业。
        不怀好意的人也可以轻松地更改您网站的内容。当然，有很多方法可以防止这种情况，并提高整体安全性。数据库系统，如果留给自己的设备，也不是完全安全的，但为黑客提供了一个额外的障碍，只需很少的努力。
        *注意：*安全性参数取决于您的脚本过滤注入的能力以及您设置服务器的安全性。

    *   磁盘使用情况。当使用单独的文件来组成每个请求的页面时，服务器必须在每个请求上访问其 HD。同样，缓存在一定程度上解决了这个问题，但缓存数据库查询结果更容易（通常）更好（性能方面）。要么在你的数据库服务器上，要么在 PHP 中，或者更好的是，两者兼而有之。

    *   记录。我的意思是：当您更改内容时，数据库驱动的 CMS 更容易管理。如果您更改了内容，并且想要撤消/回滚更改，则数据库是实现此类功能的最简单方法。使用 HTML，您很快就会发现自己正在处理大量名为`site_menu_block_YYYY-mm-dd.html.backup`. 即使这是通过脚本完成的，它几乎肯定会比使用数据库慢。

    *   翻译：正如 vlzvl 指出的那样，如果您使用的是静态页面，那么您最终会得到每个页面 N 次，每种语言一次。更改样式表时，您也必须更改 N 个文件。这是资源昂贵的。或者，您的脚本将为每个请求解析一个 HTML 模板文件，以及一个包含实际内容的 XML 文件。这样您就失去了 HTML 文件的 SEO 优势，*并*导致额外的服务器负载**并**减慢您的网站速度。

*   专业版 HTML：

    *   我在这里只能给出一个可靠的专业论点：以这种方式获得 SEO 网站要容易得多。只允许搜索引擎索引单独的文件。**这确实会大大**降低 CMS 的整体安全性。

也就是说，我认为我说所有主要的 CMS 都使用这两种方法是对的，这取决于他们正在处理的数据类型。例如，HTML 标头通常部分存储为单独的文件，就像 JS 文件和样式表一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:04:59.280

这一切都取决于内容。当您有很多不同的内容时，例如新闻，将数据存储在每个新闻条目的数据库中并将数据加载到模板中会更容易。但是，当您有单一内容（如巨大的文章或信息页面）时，您可以使用 HTML 来存储数据。

这还取决于您是否需要多语言页面。您可以轻松地创建一个仅包含 HTML 的多语言页面。但是这里和上面一样。你有什么内容。许多不同的条目或不太相同的内容？

但是，到目前为止，我所做的是我同时做了两个：当客户想要一个带有新闻脚本和多语言的页面时，我创建了用户可以登录以获取新闻条目并存储新闻的页面使用不同的语言，但对其他站点的更改是通过 HTML 进行的，并且每种语言都有一个不同的 html 文件。

编辑：

这也取决于用户。如果用户不知道如何使用 HTML 但想自己更改站点，那么唯一可用的选项就是给他一个管理中心来进行更改。或者，如果您不想给用户太多权力：D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T12:15:07.713

我的观点：大多数 CMS 处理大量数据库访问并加载许多文件，以便编译最终发送给访问者的页面。不过，对于大多数网站来说，没有性能问题（即大多数页面加载时间小于 1 秒）。因此，如果您在那里遇到问题，只有一个数据库访问权限，我会感到惊讶。但是对于处理，为什么在您的站点并不真正需要数据库时使用数据库呢？我为客户制作了几个站点，其中我使用一个 index.php 加载一个菜单文件和一个页脚文件，这些文件对于所有页面都是相同的，并且在它们之间加载单个选定的 html 文件。因此，为了编辑页面，您可以使用任何编辑器打开并编辑相应的 html。很简单。**

# silverlight - 数据输入表单布局

> ID：11244032
> 
> 赞同：2
> 
> 时间：2012-06-28T11:52:44.577
> 
> 标签：silverlight, xaml, format, silverlight-5.0, data-entry

我想让我的数据输入表格以下面提到的示例格式显示。事情是我几乎 要显示**40 个字段**。所以我也更喜欢这种格式和滚动条。谁能告诉我这种格式的这些许多领域的更好方法。让我知道示例代码，以便我有更好的清晰度..

使用网格我得到 4 列和近 25 行。所以UI代码变大了..

除了网格行定义或任何其他方式。

***样本格式：***

![在此处输入图像描述](../Images/b5a4b6baa790a50958981d926bbb5a26.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:26:02.913

这听起来像一个典型的：http `Grid`: [//msdn.microsoft.com/en-us/library/system.windows.controls.grid%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid%28v=vs.95%29.aspx)

您希望`ColumnDefinition`每列创建一个（因此 2 或 4 个，具体取决于您放置标签（`TextBlock`s）与`TextBox`es 的方式，`RowDefinition`每行一个。

有这么多字段来做这可能很乏味，所以你可能想要生成它，这实际上取决于你如何获得你的字段，以及这些字段是否永远不会改变。

* * *

另一个解决方案是 Toolkit 的 DataForm，它看起来与您所展示的完全一样：http: [//silverlight.codeplex.com/](http://silverlight.codeplex.com/)

您可以尝试演示以查看它的外观。我从来没有使用过它，所以我不能保证它的易用性或功率等......但在撰写本文时，它处于“预览”质量范围内（参见[http://silverlight.codeplex. com/wikipage?title=Quality%20Bands&ANCHOR#Preview](http://silverlight.codeplex.com/wikipage?title=Quality%20Bands&ANCHOR#Preview)进行解释）。

# mercurial - Mercurial 列出合并结果的所有 cset

> ID：11244036
> 
> 赞同：0
> 
> 时间：2012-06-28T11:52:54.430
> 
> 标签：mercurial

是否可以列出所有提交的变更集，这些变更集是假设分支“A”合并到“默认”的结果

```
 /o-o\"B"
o-o-----O-o-o-O-o-o-o "default"
 \-o-o-o-o---/"A" 
```

这是一个粗略的示例，它将合并提交显示为大写“O”，所以想知道我是否只能列出所有那些大写“O”变更集。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:36:27.163

`hg log -r "merge()"`应该做你想做的。有关[`hg help revsets`](http://www.selenic.com/hg/help/revsets)更多详细信息，请参阅。

# wpf - 如何将 MainWindow 中的 TextBlock 文本绑定到单独的用户控件中的属性？

> ID：11244043
> 
> 赞同：0
> 
> 时间：2012-06-28T11:53:18.580
> 
> 标签：wpf, xaml, binding, mvvm, viewmodel

我在跨用户控件绑定时遇到问题。我有一个显示在整个应用程序上的通知栏，但我想使用绑定从用户控件的视图模型中更改其文本。我已经研究了很多方法，但我无法让它发挥作用。

每个 XAML 控件背后都没有代码，我在一个单独的类中创建了一个视图模型。然后在初始化时将其分配给 XAML 的数据上下文。

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:58:17.317

我会使用某种事件系统，例如 MVVM Light 的[Messenger](http://www.galasoft.ch/mvvm/)或 Prism 的[EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)

这将允许`ViewModel`包含通知消息的消息订阅和侦听类型的事件`ShowNotificationEvent`，并且当它获得一个时，它可以设置值并显示通知。

应用程序中希望显示通知的任何区域只需提出 a`ShowNotificationEvent`并将消息传递给它即可显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:58:01.367

你可以使用大棱镜`EventAggregator` [这里是一个如何实现它的教程](http://www.codeproject.com/Articles/355473/Prism-EventAggregator-Sample)

# database - 在 Play 框架中使用数据库

> ID：11244044
> 
> 赞同：3
> 
> 时间：2012-06-28T11:53:18.830
> 
> 标签：database, scala, playframework, playframework-2.0

我一直在关注本教程以习惯 Play 框架：

[http://www.playframework.org/documentation/2.0.2/ScalaTodoList](http://www.playframework.org/documentation/2.0.2/ScalaTodoList)

当到达“将任务保存在数据库中”部分时，我不清楚我是否必须做任何事情来启动数据库，或者这是否是自动为我完成的。我目前收到此错误：

[例外：数据库插件未注册。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:18:21.070

这取决于您使用的数据库类型。

H2 数据库（Play! 教程中使用的那个）可以用作[内存数据库或基于磁盘的数据库](http://www.h2database.com/html/features.html#feature_list)。如果您使用此数据库，Play 将为您处理一切。您不必运行特定服务即可拥有持久数据库。

但是您必须在您的驱动程序中描述`application.conf`使用哪个驱动程序以及访问哪个 url：

> db.default.driver=org.h2.Driver
> 
> db.default.url="jdbc:h2:mem:play"

由于您的类路径中可能没有正确的驱动程序，因此您必须包含此驱动程序库。如[Play2 文档](http://www.playframework.org/documentation/2.0.2/SBTDependencies)中所述，您可以在`project/Build.scala`. 对于[h2 驱动程序库](http://www.h2database.com/html/cheatSheet.html)，依赖项将是：

```
val appDependencies = Seq(
  "com.h2database" % "h2" % "1.3.167"
) 
```

更改依赖项后，您需要重新加载应用程序构建文件并更新依赖项：

```
//in sbt
reload
update 
```

[此处](http://www.playframework.org/documentation/2.0/ScalaDatabase)解释了如何将您的播放应用程序与数据库链接

如果您想使用其他数据库（Mysql、Postgresql...），您必须自己运行数据库服务并重复此处描述的步骤。

# json - 使用 lift-json 进行向量反序列化

> ID：11244046
> 
> 赞同：4
> 
> 时间：2012-06-28T11:53:32.963
> 
> 标签：json, scala, lift, lift-json

如何使用 lift-json 将 json 数组反序列化为 scala 向量？

例如：

```
case class Foo(bar: Vector[Bar])

trait Bar {
   def value: Int
}

case class Bar1(value: Int) extends Bar

case class Bar2(value: Int) extends Bar    

import net.liftweb.json.{ShortTypeHints, Serialization, DefaultFormats}

implicit val formats = new DefaultFormats {
  override val typeHintFieldName = "type"
  override val typeHints = ShortTypeHints(List(classOf[Foo],classOf[Bar1],classOf[Bar2]))
}

println(Serialization.writePretty(Foo(Vector(Bar1(1), Bar2(5), Bar1(1))))) 
```

结果是：

```
{
  "type":"Foo",
  "bar":[{
    "type":"Bar1",
    "value":1
  },{
    "type":"Bar2",
    "value":5
  },{
    "type":"Bar1",
    "value":1
  }]
} 
```

好的。但是当我尝试反序列化这个字符串时

```
println(Serialization.read[Foo](Serialization.writePretty(Foo(Vector(Bar1(1), Bar2(5), Bar1(1)))))) 
```

我得到一个例外：

> net.liftweb.json.MappingException：解析的 JSON 值与类构造函数不匹配 args=List(Bar1(1), Bar2(5), Bar1(1)) arg types=scala.collection.immutable.$colon$colon 构造函数=public test.Foo(scala.collection.immutable.Vector)

这意味着与 Scala 列表相关联的 json 数组，而不是类 Foo 中定义的向量类型。我知道有办法通过扩展 net.liftweb.json.Serializer 来创建自定义序列化程序并将其包含到格式值中。但是我怎样才能恢复存储在 Vector 中的对象类型。我想得到这样的反序列化结果：

> Foo(向量(Bar1(1), Bar2(5), Bar1(1)))

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:49:43.723

我经常`List`对 Lift 的中心性感到恼火，并且发现自己过去需要做类似的事情。以下是我使用的方法，针对您的示例进行了一些调整：

```
trait Bar { def value: Int }
case class Bar1(value: Int) extends Bar
case class Bar2(value: Int) extends Bar
case class Foo(bar: Vector[Bar])

import net.liftweb.json._

implicit val formats = new DefaultFormats { outer =>
  override val typeHintFieldName = "type"
  override val typeHints =
    ShortTypeHints(classOf[Bar1] :: classOf[Bar2] :: Nil) +
    new ShortTypeHints(classOf[Foo] :: Nil) {
      val FooName = this.hintFor(classOf[Foo])
      override def deserialize = {
        case (FooName, foo) => foo \ "bar" match {
          case JArray(bars) => Foo(
            bars.map(_.extract[Bar](outer, manifest[Bar]))(collection.breakOut)
          )
          case _ => throw new RuntimeException("Not really a Foo.")
        }
      }
    }
} 
```

有点丑陋，可能会清理一下，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:06:16.050

您可以添加一个隐式转换：

```
implicit def listToVect(list:List[Bar]):Vector[Bar] = list.map(identity)(breakOut) 
```

之后，`Serialization.read[Foo]`按预期工作。

# java - 是否可以从jsp调用python脚本？

> ID：11244049
> 
> 赞同：1
> 
> 时间：2012-06-28T11:53:36.047
> 
> 标签：java, python, jsp

我想创建一个调用我的 python 脚本的 UI。我可以使用 JSP 吗？如果是这样，你能解释一下如何吗？或者我可以用其他语言来做吗？我浏览了很多与它相关的帖子，但找不到太多？请帮帮我？使用示例进行解释会更有帮助。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:56:51.730

[在 Java 中调用 Python？](https://stackoverflow.com/questions/8898765/calling-python-in-java)

上面的链接显示了如何在 Java 中调用 Python

您只需要使用 <% %> 标记将内容包含在 jsp 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:59:21.340

将您的 python API 公开为 RESTful 服务会更简洁，JSP 可以使用 Ajax 访问并在页面中显示数据。我特别建议这样做，因为您说的是“JSP”而不是“Java”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:59:51.250

我想我会选择[Jython](http://www.jython.org/)，一旦正确配置，您就可以定义一个能够理解 Python 代码的 servlet。

[您可以在此处](http://www.jython.org/jythonbook/en/1.0/SimpleWebApps.html)阅读参考资料。

# asp.net - ASP.NET - Ajax 日历扩展器 CSS 从表继承

> ID：11244051
> 
> 赞同：6
> 
> 时间：2012-06-28T11:53:43.203
> 
> 标签：asp.net, css, ajax, vb.net

我有一个带有标题的 asp 表，我也有行，在其中一行上我有一个单元格，其中一个 Ajax 日历扩展器连接到一个文本框。

不幸的是，当我打开日历扩展器时，它无法正确显示，并且填充物太大了。

我调查了应用了哪些 CSS 样式，它似乎继承了表格的填充。

这是表格中的css：

```
.accountorderstbl {font-family:"Lucida Sans Unicode", "Lucida Grande", Sans-Serif;font-size:12px;width:100%;text-align:center;border-collapse:collapse;}
.accountorderstbl th{width:20%;font-size:13px;font-weight:normal;border-bottom:1px solid #fff;color:#039;padding:8px;background:url("Images/pattern-head.png");}

.accountorderstbl tfoot td{width:20%;font-size:13px;font-weight:normal;border-bottom:1px solid #fff;color:#039;padding:4px;background:url("Images/pattern-head.png");}

.accountorderstbl tr.unselected td{width:20%;border-bottom:1px solid #fff;color:#669;border-top:1px solid transparent;padding:8px;background:url("Images/pattern_blue.png");}
.accountorderstbl tr.selected td{width:20%;border-bottom:1px solid #fff;color:#669;border-top:1px solid transparent;padding:8px;background:#E3E3F1;}

.accountorderstbl tbody tr.unselected:hover td{color:#339;background:#fff;}
.accountorderstbl tbody tr.selected:hover td{}

.accountorderstbl a{ text-decoration: none;color:#669;font-weight:bold;} 
```

我认为添加这行 css 可以解决它

```
.ajax__calendar_container td { padding:0; margin:0;} 
```

但是当我检查正在应用的 css 时，我可以看到这个 css 也被 **.accountorderstbl tr.unselected td**覆盖，它的填充设置为 8px

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T12:02:11.447

尝试添加`!important`到 CSS 的末尾

```
.ajax__calendar_container td { padding:0 !important; margin:0 !important; } 
```

`!important`是 css 的覆盖开关。[Smashing Magazine在这里](http://coding.smashingmagazine.com/2010/11/02/the-important-css-declaration-how-and-when-to-use-it/)有一篇关于它的文章

# c++ - 使用 for (strcmp) 的任务

> ID：11244055
> 
> 赞同：-2
> 
> 时间：2012-06-28T11:53:58.293
> 
> 标签：c++

这是我现在拥有的代码：

```
 int main() {
    char stupac1, stupac2;
    for (stupac1 = 'A'; stupac1 <= 'Z'; ++stupac1)
    {
        for (stupac2 = 'a'; stupac2 <= 'z'; ++stupac2)
              // between the caps and the non caps there are 32 letters (ASCII code)
              if(strcmp (reinterpret_cast <const char*> (stupac1),
                         reinterpret_cast <const char*> (stupac2)) == 32 )
              { 
                  cout <<stupac1 << stupac2 << endl;
              }
              else
              {
                  cout << "These letters suck" << endl;
              }
    }
    return 0;
} 
```

任务：我需要编写一个包含 2 个连续循环的程序，该程序将生成一个表格，其中 AZ 和 az 位于 2 列中。

我需要使用`for`，但`strcmp`如果没有必要可以删除。我正在尝试一些东西，但是当我运行此代码并且它崩溃时没有打印任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:01:30.493

在 C++ 中，字符 ( `char`) 就像 一样是标量值`int`，而不是字符串。例如`'A'`等于 65，假设是 ASCII/Unicode 系统。要测试是否相等，请使用`==`运算符。

在 ASCII 中从 A 到 Z “计数”非常容易，但并非所有 C++ 实现都是 ASCII。对于您的老师的奖励积分，请指出该程序不会在[EBCDIC](http://en.wikipedia.org/wiki/EBCDIC)下运行。

此外，在太习惯于`char *`字符串之前，请注意真正的 C++ 程序几乎只使用`std::string`，它也使用`==`运算符进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:57:51.427

```
strcmp (reinterpret_cast <const char*> (stupac1), reinterpret_cast <const char*>(stupac2)) 
```

这会调用未定义的行为，因为参数`strcmp`应该是空终止的字符串，但您传递的不是空终止的。

由于尚不清楚您要做什么，因此我不会提出替代*且正确*的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:54:27.740

Single `char`s 就像 s 的较小版本`int`，因此您可以比较它们或减去它们的值，就像`int`s 一样。

您的测试的一个更简单的版本是

```
if (stupac2 - stupac1 == 32) 
```

看，轻松多了。:-)

每当您似乎需要`reinterpret_cast`时，您都可能以错误的方式尝试事情。

# python - 搅拌机 numpy.float32

> ID：11244059
> 
> 赞同：0
> 
> 时间：2012-06-28T11:54:16.473
> 
> 标签：python, numpy, blender

我只有一个简短的问题。目前我正在为 Blender 编写一个插件。一切正常，但是当我想将顶点和面添加到当前的 Blender-Scene 时，出现以下错误：

```
File "/usr/lib/blender/scripts/modules/bpy_types.py", line 378, in <listcomp>
vertices_flat = [f for v in vertices for f in v]
TypeError: 'numpy.float32' object is not iterable 
```

编辑：这是代码：

```
def add2Scene(self,verts):
    print("Adding object to current scene")
    triMesh = bpy.data.meshes.new("MCIsosurface") 
    triMesh.from_pydata(verts , [], self.faces)
    triObj = bpy.data.objects.new("MCIsosurface", triMesh)
    #triObj.setLocation(0,0,0)
    bpy.context.scene.objects.link(triObj)
    print("done") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:59:58.540

我已经解决了问题

我这样存储位置：XYZXYZ

Blender需要这样的数据

((XYZ),(XYZ))

所以一个简单的重塑解决了它：

```
verts = self.vertices.reshape(len(self.vertices)/3,3) 
```

# matlab - 如何将三个外观相似的图形融合为一个图形

> ID：11244070
> 
> 赞同：-1
> 
> 时间：2012-06-28T11:54:33.063
> 
> 标签：matlab, plot, time-series

我有针对特定数据的时间绘制的 x 坐标图。为了更准确，数据取了 3 次 n，因此我有一组 3 个图表。得到的图表是相似的，但准确率甚至达不到 90%..并且没有一种方法可以每次都以更准确的方式获取数据。现在我需要设置一个标准图，该图更准确地结合了所有 3 个（获得的样本图）的特征。请任何人建议我这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:52:55.250

使用均值/中值的示例：

```
%# data and noisy estimates
t = 1:100;
x = cumsum(rand(size(t))-0.5);
x1 = x + randn(size(x))*0.7;
x2 = x + randn(size(x))*0.9;
x3 = x + randn(size(x))*1.2;

%# plot estimates
clf
subplot(211)
plot(t,x1, t,x2, t,x3)
legend({'estimate 1','estimate 2','estimate 3'})

%# mean/median across estimates
subplot(212)
plot(t,mean([x1;x2;x3]), t,median([x1;x2;x3]))
hold on, plot(t,x, 'm:', 'LineWidth',2), hold off
legend({'mean','median','actual'}) 
```

![截屏](../Images/70591b616171c3d3644e90024de3b187.png)

如果您担心异常值，请参阅此处[以](https://stackoverflow.com/q/2303510/97160)获取想法。

# conflict - java glassfish jdk 7 jre 6 版本冲突

> ID：11244071
> 
> 赞同：0
> 
> 时间：2012-06-28T11:54:33.947
> 
> 标签：conflict, java, versions

从 Oracle Java 下载 JDK 7（带有 Glassfish）并安装在 Windows 7 机器上。在 shell 中，当我发出这些命令时：

javac -version java -version

...我得到两个不同的版本。编译器似乎是 Java 7，但 JRE 似乎是 Java 6。显然这是一个问题，因为在 Java 7 中编译的程序在 Java 6 JRE 中运行时会抛出异常。

问题1：为什么一个JDK的javac.exe编译器和java.exe有不同的版本？

问题 2：预计如何设置工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:08:19.010

> 问题1：为什么一个JDK的javac.exe编译器和java.exe有不同的版本？

它没有。您已经安装了 Java 6 JRE，它位于`PATH`JDK 7 之前的`bin`目录中。从`bin`您的`PATH`.

> 问题 2：预计如何设置工作？

确保`bin`您的 Java 7 JDK 的目录位于`PATH`而不是 Java 6 JRE`bin`目录中。

请参阅[JDK 安装指南](http://docs.oracle.com/javase/7/docs/webnotes/install/windows/jdk-installation-windows.html)，尤其是[更新 PATH 环境变量](http://docs.oracle.com/javase/7/docs/webnotes/install/windows/jdk-installation-windows.html#path)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:07:21.377

您需要检查 JAVA_HOME 环境变量并确保它指向正确的 JDK，然后检查“路径”环境变量并确保那里没有重复的 jre/jdk 路径。

# solr - 如何结合 Solr 词频和场增强

> ID：11244075
> 
> 赞同：1
> 
> 时间：2012-06-28T11:54:51.467
> 
> 标签：solr, term

对于我的搜索模块，我想结合 solr 词频和字段提升。例如：

搜索“House”将产生一个文档列表，其条目由标题字段和术语“house”在所有其他字段中的词频提升。

它已经起作用了：我使用了 omitNorms 和 ^ 运算符来仅使用词频和场提升。

我想知道的是：

什么是用于我的术语的最佳“提升值”，并且是获得我想要的搜索结果的好方法？

# asp.net-mvc-3 - Google OpenId：仅接受特定公司的用户

> ID：11244077
> 
> 赞同：2
> 
> 时间：2012-06-28T11:55:09.303
> 
> 标签：asp.net-mvc-3, openid, dotnetopenauth, google-openid

我正在尝试在我的应用程序中使用 open id，并且我已经使用[DotNetOpenId](http://code.google.com/p/dotnetopenid/)成功完成了它。

现在，谷歌为公司域名下的电子邮件和其他服务提供服务。（*例如 example@acompany.com*）。有没有办法只对公司用户进行身份验证？

我知道我可以通过检查回复中的电子邮件地址来做到这一点。但我不认为这是一个好主意。*如果用户未通过acompany.com*以外的 Google 帐户进行身份验证，则更好。

请注意，我不知道*Open Authentication*或*DotNetOpenId*的内部逻辑。

## 编辑

默认谷歌的openId请求提示*`https://accounts.google.com/ServiceLogin?...`*

我可以手动将它（在浏览器中）更改为*`https://accounts.google.com/a/iit.du.ac.bd/ServiceLogin?...`*并且它可以工作（`iit.du.ac.bd`是我学校的域）

我试图创建请求

```
 Identifier id1 = Identifier.Parse("https://www.google.com/a/iit.du.ac.bd");
        Identifier id2= Identifier.Parse("https://www.google.com/a/iit.du.ac.bd/accounts/o8/id");
        var openid = new OpenIdRelyingParty();

       IAuthenticationRequest request1 = openid.CreateRequest(id1);
       IAuthenticationRequest request2 = openid.CreateRequest(id2); 
```

Google 的标识符是`https://www.google.com/accounts/o8/id"`

## 编辑2

刚刚找到[google-apps-openid-url](https://stackoverflow.com/questions/8877985/google-apps-openid-url)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:05:22.503

要验证用户的电子邮件地址，您必须要求提供它作为某个点。在身份验证之前或在 DotNetOpenId 请求中询问。如果您只是要允许`@abcInc.com`地址而不是其他任何人，我真的根本看不到使用 openId 的理由。您最好使用默认的 .net 会员提供程序。

**编辑**：在后面添加 openId 代码

```
 [AllowAnonymous]
    [HttpPost]
    public ActionResult openIdLogin(FormCollection collection)
    {
        var openid = new OpenIdRelyingParty();
        IAuthenticationRequest aRequest = openid.CreateRequest(Identifier.Parse(collection["openid_identifier"]));

        string ReturnUrl = Request.Form["ReturnUrl"];

        if (!String.IsNullOrEmpty(ReturnUrl)) {
        aRequest.AddCallbackArguments("ReturnUrl", ReturnUrl);
        }
        var fetch = new FetchRequest();
        fetch.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
        aRequest.AddExtension(fetch);

        return aRequest.RedirectingResponse.AsActionResult();
    }

    [AllowAnonymous]
    public ActionResult openIdLogin(string ReturnUrl)
    {
        if (ReturnUrl == null) ReturnUrl = "";

        var openid = new OpenIdRelyingParty();
        IAuthenticationResponse response = openid.GetResponse();
        if (response != null)
        {
            switch (response.Status)
            {
                case AuthenticationStatus.Authenticated:
                    ClaimsResponse sreg = response.GetExtension<ClaimsResponse>();
                    if (sreg != null)
                    {
                        sreg.Email; //do something with the email address

                    }
                   //codez
                break;
                case AuthenticationStatus.Canceled:
                    ModelState.AddModelError("loginIdentifier", "Login was cancelled at the provider");
                    break;
                case AuthenticationStatus.Failed:
                    ModelState.AddModelError("loginIdentifier", "Login failed using the provided OpenID identifier");
                    break;
            }
        }
        return View();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:39:55.950

您对使用电子邮件地址作为过滤器的犹豫是*绝对正确*的。跟随你的直觉。:)

您应该过滤 OP Endpoint。这不仅可以向您保证 Google 是提供者，而且 Google 为每个单独的域都有一个专用的 OP 端点，因此您可以进行检查。

```
IAuthenticationResponse response = relyingParty.GetResponse();
if (response != null) {
    if (response.Provider.Uri.AbsoluteUri == "http://google.com/o8/....?domain=yourcompany.com") {
        // Allow it
    } else {
        // Disallow it
    }
} 
```

类似的东西。您必须进行测试以查看您所期望的情况的实际 URI 是什么。

# android - 谁能解释这个媒体控制器的代码？

> ID：11244079
> 
> 赞同：0
> 
> 时间：2012-06-28T11:55:17.270
> 
> 标签：android

谁能解释这个媒体控制器的代码？

```
 videoview = (VideoView) findViewById(R.id.player);
   videoview.setVideoURI(Uri.parse("android.resource://"+ getPackageName()+ "/" +R.raw.sample));
   videoview.start();

  MediaController controller = new MediaController(this);
  controller.setMediaPlayer(videoview);
  videoview.setMediaController(controller); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:57:32.620

该代码通过其 id 获取 VideoView，将要播放的文件的 uri 设置为嵌入资源并开始播放。

然后它将 MediaController 附加到呈现进度条的视图和一些用于播放/暂停视频的控件。

# java - 优化代码以提高清晰度和效率

> ID：11244080
> 
> 赞同：2
> 
> 时间：2012-06-28T11:55:21.677
> 
> 标签：java, optimization, performance

这段代码工作正常，但我需要简化它以提高清晰度并希望提高效率：

```
int i = 0;

if (p.cap()) n++;
if (p.creditcard()) n++;
if (p.email()) n++;
[...]
if (p.price()) n++;
if (p.url()) n++;
if (p.zip()) n++;

if (n == 0) p.standard(); 
```

正如代码所说，我需要调用多个方法（我不知道它们的有限数量）。每页*。*()* 方法返回一个布尔值，并且*n*仅在返回的值为 true 时才递增。如果 n==0 （当调用的每个方法都返回 false 时会发生这种情况），那么我需要调用*p.standard()*。

如何编写更清晰高效的代码？我尝试使用*or 条件*，如下所示：

```
if (!( p.cap() || p.email() || p.isbn() || p.number() || p.phone() ||
       p.price() || p.time() || p.url() || p.zip() || p.creditcard()
    )) {
        p.standard();
} 
```

但显然它不能正常工作（例如：如果 p.cap() 返回 true 则不会调用其他方法）。

**我需要调用每个方法。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T12:08:29.037

您没有指定是否必须调用每个方法*，*但似乎您想调用它们而不考虑单个结果。所以使用简单的或运算符：| （不是短路或||）。

```
if (!( p.cap() | p.email() | p.isbn() | p.number() | p.phone() |
   p.price() | p.time() | p.url() | p.zip() | p.creditcard()
    )) {
        p.standard();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T12:11:39.010

使用一些样板，您可以将其抽象为某种验证器接口：

```
interface Validator {
    boolean validate(Foo p);
}

Validator[] validators = new Validator[] {
    new Validator() { boolean validate(Foo p) {return p.cap();} },
    new Validator() { boolean validate(Foo p) {return p.creditcard ();} },
    new Validator() { boolean validate(Foo p) {return p.email();} },
    // …
}

public int validateAll(Foo p, Validator[] validators) {
    int valid = 0;
    for (Validator v : validators) {
        if (v.validate(p)) valid++;
    }
    return valid;
}

if (validateAll(p, validators)) p.standard(); 
```

这是代码的净增加，但它的优点是可以`p`清楚地传达“运行所有这些检查”，并且检查列表是可扩展的。

（我承认这可能很容易成为一个对您的需求来说太重的解决方案。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T12:01:27.843

在这里真的很难做到 - 没有足够的背景......

但是在 p 对象上创建一个新方法，该方法返回您要查找的值......然后从所有这些代码所在的位置调用它。

就像是

```
int n = p.getPopulatedColumns(); 
```

然后在该方法中，实现是什么并不重要 - 因为读者会知道意图。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T13:12:37.233

IMO 还有另一个非常优雅的解决方案。

创建一个这样的验证方法：

```
public static int validate(boolean ... booleans) {
    int n = 0;
    for (boolean b : booleans) {
        if (b) n++;
    }
    return n;
} 
```

然后你可以像这样调用这个方法：

```
int n = validate(p.cap(), p.creditcard(), p.email());
if (n == 0) p.standard(); 
```

由于 validate 方法将布尔值作为可变参数，因此您可以根据需要添加尽可能多（或尽可能少）的参数。

或者，如果所有参数都为假，您可以简化为返回布尔值：

```
public static boolean validate(boolean ... booleans) {
    int n = 0;
    for (boolean b : booleans) {
        if (b) n++;
    }
    return 0 == n;
} 
```

这完全取决于您`n`以后是否需要该变量。

# jqgrid - 行删除jqGrid上的自定义errortext

> ID：11244083
> 
> 赞同：0
> 
> 时间：2012-06-28T11:55:34.220
> 
> 标签：jqgrid, jqgrid-asp.net

在 jqgrid 中删除一行时，我想在服务器返回 500 错误时返回自定义错误文本。我正在为 ASP.NET 使用 jqGrid，并且网格似乎没有“loadError”事件

有人做过吗？

jqGrid 是这样定义的

```
<trirand:JQGrid runat="server" ID="Jqgrid" ShrinkToFit="true" Width="900px" Height="500" PagerSettings-PageSize="20" PagerSettings-PageSizeOptions="[20,50,100]" OnSearching="JQGrid_Searching" OnSorting="JQGrid_Sorting" OnRowEditing="JQGrid_RowEditing" OnRowDeleting="JQGrid_RowDeleting">
                    <Columns>
                        <trirand:JQGridColumn DataField="ID" PrimaryKey="True" Width="40" Visible="False" />
                        <trirand:JQGridColumn DataField="NAME" SearchType="DropDown" Width="55" SearchControlID="ddlNameFilter"
                            HeaderText="Name" Editable="true">
                            <EditClientSideValidators>
                                <trirand:RequiredValidator />
                            </EditClientSideValidators>
                        </trirand:JQGridColumn>
                        <trirand:JQGridColumn DataField="DESCR" SearchType="DropDown" Width="55" SearchControlID="ddlDescrFilter"
                            Searchable="True" HeaderText="Descr" Editable="true">
                            <EditClientSideValidators>
                                <trirand:RequiredValidator />
                            </EditClientSideValidators>
                        </trirand:JQGridColumn>
                        <trirand:JQGridColumn HeaderText=" " EditActionIconsColumn="true" Width="50" EditActionIconsEditEnabled="false"
                            CssClass="clickable" />
                    </Columns>
                    <ClientSideEvents LoadComplete="loadComplete" ColumnSort="columnSort" RowDoubleClick="editRow">
                    </ClientSideEvents>
                    <ToolBarSettings ShowSearchToolBar="True" ToolBarPosition="TopAndBottom">
                    </ToolBarSettings>
                    <PagerSettings NoRowsMessage="No rows to display" />
                    <ExportSettings ExportDataRange="All" />
                </trirand:JQGrid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:15:21.003

回调`loadError`用于处理网格填充/加载期间的错误。[delGridRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#delgridrow)等表单编辑方法支持[errorTextFormat](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events2)回调。所以你使用[navGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator#definition)你应该定义`errorTextFormat`回调作为`prmDel`参数的方法`navGrid`。

此外，我建议您使用 ASP.NET MVC`[HandleJsonException]`而不是使用（有关详细信息，请参阅[答案](https://stackoverflow.com/a/5501644/315935)）。在其他 ASP.NET 应用程序中，您可以定义错误处理程序（请参阅[答案](https://stackoverflow.com/a/10871428/315935)）。此类句柄的使用将简化您对回调内部错误服务器响应的分析，因为错误信息将以 JSON 形式返回。`[HandleError]``Application_Error``Global.asax.cs``errorTextFormat`

# objective-c - 按 NSString 将 NSMutablearray 排序为日期

> ID：11244087
> 
> 赞同：1
> 
> 时间：2012-06-28T11:55:51.957
> 
> 标签：objective-c, ios, xcode, sorting

我有一个数组，里面填充了字符串对象。每个对象内部是对象的名称和字符串，用“ - ”分隔，例如。“对象 1 - 26.05.2012”。我想按字符串中的日期排序我的数组，而不是名称，降序这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:31:37.033

正如@Vladimir 指出的那样，将名称和字符串彼此分开并按日期排序会更好。

```
NSMutableArray *newArray = [[NSMutableArray alloc] init];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd.MM.yyyy"];
for (NSString *str in yourArray)
{
    NSRange rangeForDash = [str rangeOfString:@"-"];
    NSString *objectStr = [str substringToIndex:rangeForDash.location];
    NSString *dateStr = [str substringFromIndex:rangeForDash.location+1];
    NSDate *date = [formatter dateFromString:dateStr];
    NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:objectStr, @"object", date, @"date", nil];
    [newArray addObject:dic];
}
NSSortDescriptor *sortDesc = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:NO];
[newArray sortUsingDescriptors:[NSArray arrayWithObjects:sortDesc, nil]];
[sortDesc release];
[formatter release]; 
```

`newArray`将被排序，但将有字典对象，每个包含 2 个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:26:09.137

快速而肮脏的修复 - 重新排列字符串，使日期排在第一位

`str = [[str substringFromIndex:someIndex] stringByAppendingString:[str substringToIndex:someIndex]];`

然后在数组排序后将所有内容切换回来。

# c++ - 求最大位数的方法

> ID：11244088
> 
> 赞同：0
> 
> 时间：2012-06-28T11:55:52.003
> 
> 标签：c++

目前我的迷你算法看起来像这样。

```
int a,b,c,max;
cout <<"Enter 3 digits: \t";
cin>>a>>b>>c;
if(a>b && a>c)
    max=a;
else if(b>c && b>a)
    max=b;
else
    max=c;
cout <<"max: "<<max<<endl; 
```

它有效，但有没有其他方法可以找到最多 3 位数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:02:41.987

在 C++11 中，您可以这样做：

```
int max_value = std::max({a, b, c}); 
```

它使用作为参数的[`std::max`](http://en.cppreference.com/w/cpp/algorithm/max)重载`std::initializer_list<T>`。这意味着您可以传递**超过 3 个参数**！

```
int max_value = std::max({1,2,3,4,5,6,98,10}); 
```

演示：http: [//ideone.com/FLifw](http://ideone.com/FLifw)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:57:30.707

对于[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")：

```
int max = std::max( std::max( a, b ), c ); 
```

对于[c](/questions/tagged/c "显示标记为“c”的问题")您可以编写自己的`max`函数或使用`MAX`宏（标准中**未定义**，但您的编译器可能“支持”）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T11:58:11.107

```
max = a; 
if(b>max) max = b;
if(c>max) max = c; 
```

这行得通吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:57:57.097

在 C++ 中，您可能应该使用`[std::max()](http://www.cplusplus.com/reference/algorithm/max/)`：

```
const int max_value = std::max(std::max(a, b), c); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T12:04:35.263

```
int max=a>b?(a>c?a:c):(b>c?b:c); 
```

或者

```
printf("greatest no: %d"(a>b)?((a>c)?a:c):((c>b)?c:b)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-07T13:16:37.347

```
//Find Maximum of 7 integer Number
#include<iostream>
using namespace std;
int main()
{
//Declaration   
int a,b,c,d,e,f,g,max;
    cout<<"Enter Values : ";
    cin>>a>>b>>c>>d>>e>>f>>g;
    max=a;
    if(b>max)
        max=b;
    if(c>max)
        max=c;
    if(d>max)
        max=d;
    if(e>max)
        max=e;
    if(f>max)
        max=f;
    if(g>max)
        max=g;
    cout<<"Maximum is : "<<max;
    return 0;
} 
```

# javascript - 随视口均匀扩展的页脚项目

> ID：11244089
> 
> 赞同：2
> 
> 时间：2012-06-28T11:55:56.433
> 
> 标签：javascript, css, html, viewport

我试图让页脚显示 5 个项目，这些项目利用视口的整个宽度均匀分布。我已经设法让它工作了一些，但是当您**将浏览器窗口的大小调整**得越来越小时，最后一个框会闪烁并被向下推。

[http://jsfiddle.net/pnUnU/](http://jsfiddle.net/pnUnU/)

我想知道是否有更好的方法来进行编码？而且，一旦按钮达到某个（小）尺寸，是否可以阻止按钮随视口展开？

非常感激，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:02:04.693

[演示](http://jsfiddle.net/pnUnU/1/)

[http://jsfiddle.net/pnUnU/1/](http://jsfiddle.net/pnUnU/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:03:15.183

您可以在 li 中使用另一个具有边框的元素。这样，李就可以每人拿走全部 20%。

[http://jsfiddle.net/pnUnU/2/](http://jsfiddle.net/pnUnU/2/)

HTML：

```
<footer class="footer">

    <ul>
        <li>
            <span class="content">
               Option 1
            </span>
        </li>
        <li>
            <span class="content">
               Option 2
            </span>
        </li>
        <li>
          <span class="content">
               Option 3
            </span>        
        </li>
        <li>
          <span class="content">
               Option 4
            </span>
        </li>
        <li>
          <span class="content">
               Option 5
            </span>
        </li>
    </ul>

</footer> <!-- end footer -->​ 
```

CSS：

```
.footer li
{
    float: left;
    line-height: 43px;
    text-align: center;
    color: white;
    width: 20%;
    background: grey;
}

.footer li span{
  display: block;
  border-right: 1px solid #fff;
}

.footer li:last-child span
{
    border: none;
}
​ 
```

# android - SDK 管理器中不存在 Android 支持包

> ID：11244091
> 
> 赞同：3
> 
> 时间：2012-06-28T11:55:57.830
> 
> 标签：android, sdk

我的SDK管理器中没有android支持包，如图：

![在此处输入图像描述](../Images/74d45efce5c223956a506f3f52cd57b0.png)

每当我尝试创建一个 android 应用程序项目时，最后都会看到这个屏幕：

![在此处输入图像描述](../Images/230fbdd8fed02307c72a4c23a1454e49.png)

如果我单击安装/升级，则会出现：

![在此处输入图像描述](../Images/de1a4f8fac588c2f3ecdf7650f8206c0.png)

它安装了一切，但什么也没发生，它和以前一样保持在同一个屏幕上。点击`check again`也不做任何事情。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:00:28.157

出于某种奇怪的原因，android-sdk 决定安装所有东西，`/extras/compatibility`而不是`/extras/support`eclipse 识别的东西，所以我重命名`/extras/compatibility`为 `/extras/support`，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:01:12.327

找到你的SDK目录，导航到/extras/android/，在这个文件夹中你会看到一个名为“compatibility”的文件夹，把这个文件夹重命名为“support”。重新打开Eclipse，新建Android Application Project，这个过程就完成了，不会再出现这个问题了！

# customization - CRM 2011 中电子邮件表单上的替换按钮

> ID：11244098
> 
> 赞同：3
> 
> 时间：2012-06-28T11:56:18.483
> 
> 标签：customization, dynamics-crm, dynamics-crm-2011, dynamics-crm-online

请查看下面的电子邮件表格。您可以看到一个名为**“插入模板”**的按钮以红色突出显示。我们如何用我们自己的自定义按钮替换（隐藏并添加新按钮）这个按钮，例如，我们可以通过 XML 在功能区上隐藏同名按钮......？

![在此处输入图像描述](../Images/bc6cdac30a21be20cab6353caaa39631.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:26:51.360

该按钮不在功能区上，它是富编辑器控件的一部分。据我所知，没有支持更改这些按钮的方法，因此您必须按照@lazarus 的建议使用一些 JavaScript。

# css - 有没有办法使用 CSS 创建基于字符大小的布局？

> ID：11244102
> 
> 赞同：1
> 
> 时间：2012-06-28T11:56:35.927
> 
> 标签：css, html, css-position

我必须将以前在系统控制台中以文本模式运行的旧应用程序移植到 HTML5。

HTML5 中的布局必须模仿旧的行为，即字体必须是等宽的，表单、字段和文本的尺寸必须是字符宽度或高度的倍数。

到目前为止，我可以通过使用`absolute`定位和精心选择的`font`, `font-size`,值来获得几乎令人满意的结果`line-height`。

对于元素的高度，我指定了我的值，`em`所以一切都到位。但是，我找不到轻松处理元素宽度的方法。

假设我有一个标签、一个文本输入和一个 div，它们的宽度必须完全相同。标签长度为 7 个字符，因此输入也应为 7 个字符。

就像是：

```
mylabel
[input]
[mydiv] 
```

但是，当`em`用于字符宽度时，我得到以下布局：

```
mylabel
[input way too large]
[mydiv way too large] 
```

显然，因为`em`表示基本字符高度，而不是其宽度。所以我不能依赖它。

你有解决这个问题的方法吗？如果可能的话，我想避免使用 Javascript，但我想我别无选择。

我必须针对所有流行的浏览器（Internet Explorer、Chrome、Firefox、Opera）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:50:58.727

[我不知道这是否被任何浏览器支持，但有一天这可能是一个可以接受的解决方案。]

[CSS3 值和单位模块](http://www.w3.org/TR/css3-values/)定义了[`ch`单位](http://www.w3.org/TR/css3-values/#ch-unit)

> 等于`"0"`在用于渲染它的字体中找到的 (ZERO, U+0030) 字形的提前量度。

“提前量度”本质上是字符的宽度。在等宽字体中，所有字符宽度都是相同的。

The alternative is to figure out what the width of a character is for each font-size being used, and use multiples of that value when defining widths. If you're lucky it'll be a fraction of an `em` unit.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:08:21.087

`ex`是一个类似于`em`小写但高度的单位`x`，而不是大写`M`。在等宽字体中，您经常会发现`x`它实际上是正方形，`ex`大约等于字符的宽度。

CSS 单位：[http ://www.w3schools.com/cssref/css_units.asp](http://www.w3schools.com/cssref/css_units.asp)

# math - Mathematica 中圆锥的参数图

> ID：11244103
> 
> 赞同：-2
> 
> 时间：2012-06-28T11:56:36.940
> 
> 标签：math, wolfram-mathematica, plot

我有一个圆锥体，如图所示：

![在此处输入图像描述](../Images/5ca1e9ab35ab42bb1225c9868e2f3a1d.png)

（两个底是椭圆）

如何通过 Mathematica 绘制曲面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:11:18.163

你总是可以使用 RegionPlot：

```
RegionPlot3D[ Sqrt[x^2 + y^2] < 1 - z/3, {x, -2, 2}, {y, -2, 2}, {z, -1, 1}, 
              BoxRatios -> {1, 1, 1/2}] 
```

![在此处输入图像描述](../Images/6036c83c7122d13b8facd017157e565e.png)

# yui - 当表单的复选框更改时 yui3 触发功能

> ID：11244104
> 
> 赞同：0
> 
> 时间：2012-06-28T11:56:38.487
> 
> 标签：yui, yui3

假设我们有一个 yui3 表单：

```
YUI().use("gallery-form", function (Y) {
var checkbox = new Y.CheckboxField({
    name : "myCheckbox",
    value : "check",
    label : "Test Checkbox"
});

var f = new Y.Form({
    boundingBox: '#form',
    action : 'test.php',
    method : 'post',
    children : [
        checkbox ,
        {name : 'submitBtn', type : 'SubmitButton', value : 'Submit'}
    ]
});

f.render();
}); 
```

即表单有很多复选框；我希望此表单上的每个复选框都`onchange="fn(this)"`.
[这是我需要的一个小例子。](http://jsfiddle.net/93hmB/)

**注意**。`checkbox`在第二行不应该被修改。我正在寻找类似的东西：

```
form.all('input type=checkbox').on('change', fn(checkbox)); 
```

_

```
// where fn is:
function fn(el){ console.log(el.checked); } 
```

PS
提前致谢；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:05:37.013

这个有点怪怪的。我认为预期的方法是执行`form.on('*:change', fn)`和过滤事件传播，但我找不到避免重复调用回调的方法。

因此，您可以求助于表单的`change`UI 事件并执行以下操作：

```
form.on('change', function (e) {
  var checkbox = e.domEvent.target;
  console.log(checkbox.get('checked'));
}); 
```

# ruby-on-rails - HamlBars 属性

> ID：11244105
> 
> 赞同：1
> 
> 时间：2012-06-28T11:56:38.790
> 
> 标签：ruby-on-rails, haml, ember.js, handlebars.js

您好，我正在使用 hamlbars，并且在 attrs 分配方面遇到了一些麻烦。

```
%div{class => "result_#{hb 'item.id'}"} 
```

它编译为

```
<div class=\'result_{{item.id}}\'></div> 
```

有什么方法可以轻松分配属性，因为“绑定”方法看起来很难看，尤其是当您尝试分配数据属性时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:47:33.910

对我来说，由于缺少冒号，这段代码不起作用：

`%div{:class => "result_#{hb 'item.id'}"}`

不确定这是否会解决您的特定问题，但以防其他用户看到这个并遇到我根本没有编译的相同问题。

# android - Android：如何在活动之间制作动画？

> ID：11244106
> 
> 赞同：1
> 
> 时间：2012-06-28T11:56:42.400
> 
> 标签：android, animation, android-activity, swipe

我对 Android 中的动画有疑问。我制作了一个包含很多产品的应用程序，您现在可以通过从左到右滑动屏幕来切换产品（转到列表中的下一个产品）但是它现在就像任何其他活动一样加载。

我想要的是许多其他应用程序也有的东西，滑动需要使旧的活动从屏幕左移出，而新的活动同时进入。

我已经搜索和阅读了很多，但我真的不知道从哪里开始。

我的产品是活动，这是它们现在切换的方式：

```
@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
     try {
         if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
             return false;
         // left to right swipe
         if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
             for(HashMap h: products) {
                 if (h.get("id").toString().equals(id)) {
                     int index = products.indexOf(h)-1;

                     if (index != -1) {
                        HashMap product = products.get(index);

                        dialog = ProgressDialog.show(ProductActivity.this, "", 
                                 "Laden...", true);
                        Intent i = new Intent(ProductActivity.this, ProductActivity.class);
                        i.putExtra("id", product.get("id").toString());
                        i.putExtra("profileId", profileId);
                        i.putExtra("score", product.get("score").toString());
                        i.putExtra("products", products);
                        startActivity(i);
                    }
                     else {
                         Toast.makeText(ProductActivity.this, "Dit is het eerste product in de lijst.", Toast.LENGTH_LONG).show();
                     }
                 }
             }
         }
         //right to left swipe
         else if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
             for(HashMap h: products) {
                 if (h.get("id").toString().equals(id)) {
                     int index = products.indexOf(h)+1;

                     if (index != products.size()) {
                        HashMap product = products.get(index);

                        dialog = ProgressDialog.show(ProductActivity.this, "", 
                                 "Laden...", true);
                        Intent i = new Intent(ProductActivity.this, ProductActivity.class);
                        i.putExtra("id", product.get("id").toString());
                        i.putExtra("profileId", profileId);
                        i.putExtra("score", product.get("score").toString());
                        i.putExtra("products", products);
                        startActivity(i);
                    }
                     else {
                         Toast.makeText(ProductActivity.this, "Dit is het laatste product in de lijst.", Toast.LENGTH_LONG).show();
                     }
                 }
             }
         }
     } catch (Exception e) {
         // nothing
     }
     return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:23:57.783

你可以试试这个[Android-Viewflow 库](https://github.com/pakerfeldt/android-viewflow)。

> ViewFlow 是一个 Android UI 小部件，它提供了一个可水平滚动的 ViewGroup，其中包含从适配器填充的项目。

![带有圆形指示器的视图流](../Images/58ba35bb76514762ba5e817ecb981556.png) ![带有标题指示器的视图流](../Images/341034184966cadb1fecda069a2644df.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:25:50.847

使用[overridePendingTransition](http://developer.android.com/reference/android/app/Activity.html#overridePendingTransition%28int,%20int%29)您可以覆盖活动的下一个动画。覆盖活动的 startActivity 和完成方法，并在那里调用 overridePendingTransition。

您可以将使用的动画指定为 anim 文件夹中的 xml 文件。

对于滑入式动画，请使用以下内容：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate 
    android:fromXDelta="-100%"
    android:toXDelta="0"
    android:fromYDelta="0"
    android:toYDelta="0"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:duration="@android:integer/config_longAnimTime" />
</set> 
```

对于滑出动画：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate 
    android:fromXDelta="0"
    android:toXDelta="100%"
    android:fromYDelta="0"
    android:toYDelta="0"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:duration="@android:integer/config_longAnimTime" />
</set> 
```

根据 fromXDelta 和 toXDelta 中使用的值，您可以确定它应该滑动的方向。

# blackberry-webworks - Blackberry Webworks 删除 webstorage

> ID：11244107
> 
> 赞同：0
> 
> 时间：2012-06-28T11:56:49.817
> 
> 标签：blackberry-webworks, web-storage

如何删除网络存储数据？

我正在使用 HTML5 db 为我的 webworks 黑莓应用程序存储应用程序数据。问题是当我删除应用程序时，应用程序数据仍然存在。如果我再次安装该应用程序，旧数据仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:47:10.927

您可以通过“文件”资源管理器手动删除数据库。我在`/Device/BlackBerry/system/appdata/rim/webstorage/(application name)`. 或者您可以简单地升级您的数据库版本，以便使用新版本而不是旧版本。

# javascript - JQuery ajax .load() 引用正确的url

> ID：11244108
> 
> 赞同：1
> 
> 时间：2012-06-28T11:56:51.247
> 
> 标签：javascript, jquery, .net, ajax

我有一个 localhost 有几个项目，所以这个项目在 VS2010 properties->web->use local IIS web server = 'localhost/project4/'。（我不能使用正常的调试 VS 开发服务器，因为某些组件在我的项目中不起作用）无论如何，localhost 没什么大不了的，所以我继续编码。

现在，当我调用 .load('/Account/LogOn'); 时，在 ajax 中 它给了我“localhost/Account/LogOn”，但我真正想要的是“localhost/project4/Account/LogOn”，因为它位于 project4 目录中，而不是根目录中。

知道如何告诉 ajax 我需要域名和 URL 其余部分之间的虚拟目录前缀吗？

编辑 - - - - - - - - - - - - - - - - - - - - - -

谢谢大家，结合您的所有知识，我想最好的方法是：

1.  将 js 脚本包含到 .cshtml 服务器端并使用“~/Account/LogOn/”让 .net 找出路径。

2.  创建一个全局变量 remove_me_debug_only_virtual_directory = "/project4/"; 在 js 代码中。将其附加到域名。这样我们就不用把 .net 拉到水里，用 .cshtml 写 js 代码了。

3.  如果可以的话，将项目移动到 localhost/root，在这种情况下我不能，因为工作中的其他人想要访问这个网络服务器并进行演示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:38:38.620

如果您的 JS 代码在 MVC cshtml 文件中，请像这样使用它：

```
.load('@Url.Action("LogOn", "Account")'); 
```

正确的 URL 将放置在具体的 JS 代码中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:18:36.633

根据.net文件，

> 服务器控件中的绝对和相对路径引用具有以下缺点：
> 
> 绝对路径在应用程序之间不可移植。如果移动绝对路径指向的应用程序，链接将断开。
> 
> 如果将资源或页面移动到不同的文件夹，则客户端元素样式中的相对路径可能难以维护。
> 
> 为了克服这些缺点，ASP.NET 包含了 Web 应用程序根运算符 (~)，您可以在指定服务器控件中的路径时使用它。ASP.NET 将 ~ 运算符解析为当前应用程序的根。您可以将 ~ 运算符与文件夹结合使用，以指定基于当前根目录的路径。

因此，如上所述，using`~`将使用 asp 将您引导到 Web 项目的根目录：

```
 <asp:image runat="server" id="Image1" ImageUrl="~/Images/SampleImage.jpg" /> 
```

有关更多信息，请访问：[Web 项目路径](http://msdn.microsoft.com/en-us/library/ms178116.aspx)

**根据您的更新**：可能重复：[使用 jQuery 的基本 url](https://stackoverflow.com/questions/9563876/base-url-using-jquery)

@gregguida 声明的地方：

```
 var l = window.location;
  var base_url = l.protocol + "//" + l.host + "/" + l.pathname.split('/')[1];

  //all you need to do is work with l.pathname.split('/') to find what you need. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:05:42.190

我是一名 Java 开发人员，但两种情况下的上下文都是相同的，您可以按照以下步骤操作

1.  **如果 root 是“/”**，请检查服务器的上下文，然后你必须调用类似的东西，

    .load('/project4/Account/LogOn');

2.  如果您的应用程序是 root 并且您可以从自身调用此请求，那么

    .load('帐户/登录');

# javascript - 在这个 jsfiddle 示例中，如何让滚动停止传播

> ID：11244119
> 
> 赞同：1
> 
> 时间：2012-06-28T11:57:39.203
> 
> 标签：javascript, jquery, html

有问题的[jsfiddle](http://jsfiddle.net/QU5qj/8/)。我想这样做，如果您在“c”div 内滚动，它不会传播到“b”div 并进入“a”。问题似乎是滚动事件没有像我期望的那样传播。有没有办法让它按照我想要的方式运行？我对 click 事件尝试了同样的事情，这就像一个魅力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:08:30.240

`scroll`级别太高，与鼠标滚轮没有直接关系，而是与项目的滚动有关。

如果您使用`mousewheel`事件，它会起作用：

```
$('#c').on('mousewheel', function(e){
    $('#console').append('<br />C scrolled!');
});
$('#b').on('mousewheel', function(e){
    e.stopPropagation();
    $('#console').append('<br />B scrolled!');
});
$('#a').on('mousewheel', function(e){
    $('#console').append('<br />A scrolled!');
}); 
```

您可以在此处检查当您在 C 上滚动鼠标时只显示“C 滚动”和“B 滚动”：http: [//jsfiddle.net/dystroy/pvxXJ/](http://jsfiddle.net/dystroy/pvxXJ/)

# android - Android NDK 分割错误

> ID：11244120
> 
> 赞同：3
> 
> 时间：2012-06-28T11:57:42.040
> 
> 标签：android, c, android-ndk, segmentation-fault

在我的应用程序中，当我尝试将我的日志打印到当时面临 Segmentation Error 的文件中时。

我正面临致命信号 11 。

我的日志功能在 Native 部分，我从 Java 中调用它。

**日志猫：**

```
01-01 00:09:38.968: A/libc(3905): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)
01-01 00:09:38.976: D/Random(2185): Trip In List :false
01-01 00:09:38.976: D/Random(2185): Odometer :0
01-01 00:09:38.976: D/abc(3905): PreCheck conditions satisfied for WIFI Searching Timer
01-01 00:09:39.601: I/DEBUG(1285): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
01-01 00:09:39.601: I/DEBUG(1285): Build fingerprint: 'android:android:4.0.4/IMM76I/eng.example.20120608.074924:eng/test-keys'
01-01 00:09:39.601: I/DEBUG(1285): pid: 3905, tid: 3908  >>> com.demo.abc <<<
01-01 00:09:39.601: I/DEBUG(1285): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
01-01 00:09:39.601: I/DEBUG(1285):  r0 00000000  r1 00000027  r2 00000048  r3 00000000
01-01 00:09:39.601: I/DEBUG(1285):  r4 00000000  r5 100ffadc  r6 00000000  r7 00000000
01-01 00:09:39.601: I/DEBUG(1285):  r8 016b5760  r9 00000048  10 100ffc98  fp 00006b8b
01-01 00:09:39.601: I/DEBUG(1285):  ip fffc25c4  sp 100ffad8  lr deadbaad  pc 4008ffd8  cpsr 60000130
01-01 00:09:39.601: I/DEBUG(1285):  d0  0000000000000000  d1  0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d2  0000000000000000  d3  0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d4  0000000000000000  d5  0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d6  0000000000000000  d7  0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d8  0000000000000000  d9  0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d10 0000000000000000  d11 0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d12 0000000000000000  d13 0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d14 0000000000000000  d15 0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d16 0000000000000000  d17 0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d18 0000000000000000  d19 0000000421d12176
01-01 00:09:39.601: I/DEBUG(1285):  d20 0000008000000080  d21 0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d22 3fb0f4a31edab38b  d23 3fede16b9c24a98f
01-01 00:09:39.601: I/DEBUG(1285):  d24 3e66376972bea4d0  d25 00000000ffffffff
01-01 00:09:39.601: I/DEBUG(1285):  d26 0000000000000000  d27 3fc554e7eb0eb47c
01-01 00:09:39.601: I/DEBUG(1285):  d28 0000000000000000  d29 0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  d30 0000000000000000  d31 0000000000000000
01-01 00:09:39.601: I/DEBUG(1285):  scr 80000012
01-01 00:09:39.882: I/DEBUG(1285):          #00  pc 00017fd8  /system/lib/libc.so
01-01 00:09:39.882: I/DEBUG(1285):          #01  pc 000096c2  /system/lib/libcutils.so (mspace_merge_objects)
01-01 00:09:39.882: I/DEBUG(1285): code around pc:
01-01 00:09:39.882: I/DEBUG(1285): 4008ffb8 b13cb942 b1196821 6809460c d1fb2900  B.<.!h...F.h.)..
01-01 00:09:39.882: I/DEBUG(1285): 4008ffc8 b31b6963 2eadf64b f6cd2127 24006ead  ci..K...'!...n.$
01-01 00:09:39.882: I/DEBUG(1285): 4008ffd8 1000f88e e812f7f4 f7f52106 a902e8b0  .........!......
01-01 00:09:39.882: I/DEBUG(1285): 4008ffe8 5380f04f 2006460a 94029304 f7f49403  O..S.F. ........
01-01 00:09:39.882: I/DEBUG(1285): 4008fff8 4622ec6c 20024629 ec74f7f4 effef7f3  l."F)F. ..t.....
01-01 00:09:39.882: I/DEBUG(1285): code around lr:
01-01 00:09:39.882: I/DEBUG(1285): deadba8c ffffffff ffffffff ffffffff ffffffff  ................
01-01 00:09:39.882: I/DEBUG(1285): deadba9c ffffffff ffffffff ffffffff ffffffff  ................
01-01 00:09:39.882: I/DEBUG(1285): deadbaac ffffffff ffffffff ffffffff ffffffff  ................
01-01 00:09:39.882: I/DEBUG(1285): deadbabc ffffffff ffffffff ffffffff ffffffff  ................
01-01 00:09:39.882: I/DEBUG(1285): deadbacc ffffffff ffffffff ffffffff ffffffff  ................
01-01 00:09:39.882: I/DEBUG(1285): memory map around addr deadbaad:
01-01 00:09:39.882: I/DEBUG(1285): be9ba000-be9db000 [stack]
01-01 00:09:39.882: I/DEBUG(1285): (no map for address)
01-01 00:09:39.882: I/DEBUG(1285): ffff0000-ffff1000 [vectors]
01-01 00:09:39.882: I/DEBUG(1285): stack:
01-01 00:09:39.882: I/DEBUG(1285):     100ffa98  00000000  
01-01 00:09:39.882: I/DEBUG(1285):     100ffa9c  00000000  
01-01 00:09:39.882: I/DEBUG(1285):     100ffaa0  00000048  
01-01 00:09:39.882: I/DEBUG(1285):     100ffaa4  018b1d10  [heap]
01-01 00:09:39.882: I/DEBUG(1285):     100ffaa8  00000048  
01-01 00:09:39.882: I/DEBUG(1285):     100ffaac  40092bcd  /system/lib/libc.so
01-01 00:09:39.882: I/DEBUG(1285):     100ffab0  400d18b4  
01-01 00:09:39.882: I/DEBUG(1285):     100ffab4  0000000d  
01-01 00:09:39.882: I/DEBUG(1285):     100ffab8  00000000  
01-01 00:09:39.882: I/DEBUG(1285):     100ffabc  40094167  /system/lib/libc.so
01-01 00:09:39.882: I/DEBUG(1285):     100ffac0  40131000  
01-01 00:09:39.882: I/DEBUG(1285):     100ffac4  100ffadc  
01-01 00:09:39.882: I/DEBUG(1285):     100ffac8  00000000  
01-01 00:09:39.882: I/DEBUG(1285):     100ffacc  00000000  
01-01 00:09:39.882: I/DEBUG(1285):     100ffad0  df0027ad  
01-01 00:09:39.882: I/DEBUG(1285):     100ffad4  00000000  
01-01 00:09:39.882: I/DEBUG(1285): #00 100ffad8  00000000  
01-01 00:09:39.882: I/DEBUG(1285):     100ffadc  fffffbdf  
01-01 00:09:39.882: I/DEBUG(1285):     100ffae0  00000000  
01-01 00:09:39.882: I/DEBUG(1285):     100ffae4  00000000  
01-01 00:09:39.882: I/DEBUG(1285):     100ffae8  00000000  
01-01 00:09:39.882: I/DEBUG(1285):     100ffaec  00000000  
01-01 00:09:39.890: I/DEBUG(1285):     100ffaf0  00000000  
01-01 00:09:39.890: I/DEBUG(1285):     100ffaf4  411d0010  /dev/ashmem/dalvik-heap (deleted)
01-01 00:09:39.890: I/DEBUG(1285):     100ffaf8  41227b88  /dev/ashmem/dalvik-heap (deleted)
01-01 00:09:39.890: I/DEBUG(1285):     100ffafc  400e46c5  /system/lib/libcutils.so
01-01 00:09:39.890: I/DEBUG(1285): #01 100ffb00  00000000  
01-01 00:09:39.890: I/DEBUG(1285):     100ffb04  400e46c5  /system/lib/libcutils.so
01-01 00:09:39.890: I/DEBUG(1285):     100ffb08  40000110  
01-01 00:09:39.890: I/DEBUG(1285):     100ffb0c  00000b4c  
01-01 00:09:39.890: I/DEBUG(1285):     100ffb10  411d0018  /dev/ashmem/dalvik-heap (deleted)
01-01 00:09:39.890: I/DEBUG(1285):     100ffb14  00000001  
01-01 00:09:39.890: I/DEBUG(1285):     100ffb18  409cec68  /system/lib/libdvm.so
01-01 00:09:39.890: I/DEBUG(1285):     100ffb1c  40986c37  /system/lib/libdvm.so
01-01 00:09:39.890: I/DEBUG(1285):     100ffb20  00000061  
01-01 00:09:39.890: I/DEBUG(1285):     100ffb24  41226d08  /dev/ashmem/dalvik-heap (deleted)
01-01 00:09:39.890: I/DEBUG(1285):     100ffb28  016b5748  [heap]
01-01 00:09:39.890: I/DEBUG(1285):     100ffb2c  41227a08  /dev/ashmem/dalvik-heap (deleted)
01-01 00:09:39.890: I/DEBUG(1285):     100ffb30  00000000  
01-01 00:09:39.890: I/DEBUG(1285):     100ffb34  100ffdd4  
01-01 00:09:39.890: I/DEBUG(1285):     100ffb38  00000061  
01-01 00:09:39.890: I/DEBUG(1285):     100ffb3c  5109be98  /dev/ashmem/dalvik-bitmap-2 (deleted)
01-01 00:09:39.890: I/DEBUG(1285):     100ffb40  50c4fe98  /dev/ashmem/dalvik-bitmap-1 (deleted)
01-01 00:09:39.890: I/DEBUG(1285):     100ffb44  000074f6  
01-01 00:09:42.085: I/BootReceiver(1427): Copying /data/tombstones/tombstone_01 to DropBox (SYSTEM_TOMBSTONE) 
```

**本机零件代码：**

```
void printDebugLog(char *moduleName, char *log, ...)
{
    char logMessage[PATHLENGTH];
    char tempString[PATHLENGTH];

    printf("\nprintDebugLog : 1");
    //fp is null, file is not open.
    va_list arglist;
    printf("\nprintDebugLog : 2");
    va_start(arglist, log);
    printf("\nprintDebugLog : 3");
    vsnprintf(tempString, 1048, log, arglist);
    printf("\nprintDebugLog : 4");
    strcpy(logMessage, APPNAME);
    printf("\nprintDebugLog : 5");
    strcat(logMessage, DEBUG);
    printf("\nprintDebugLog : 6");
    strcat(logMessage, "[");
    printf("\nprintDebugLog : 7");
    strcat(logMessage, timestamp());
    printf("\nprintDebugLog : 8");
    strcat(logMessage, "][");
    printf("\nprintDebugLog : 9");
    strcat(logMessage, moduleName);
    printf("\nprintDebugLog : 10");
    strcat(logMessage, "] ");
    printf("\nprintDebugLog : 11");
    strcat(logMessage, tempString);

    va_end(arglist);

#if defined(CONSOLE_LOG)

    printf("\t%s\n", logMessage);
#endif

    if (g_logFileDesc != NULL)
    {

        if (g_debug)
        {

            //Check File Size.
            /*if (getFileSize(g_logFileDesc) >= MAX_LOG_FILE_SIZE)
            {

                closeLogFile();
                openLogFile();

            }
            if (fprintf(g_logFileDesc, "%s\n", logMessage) != (strlen(logMessage) + 1))
            {

                printf("\nFile Delete start from Queue \n");
                removeUploadQueue();

            }*/

        }

    }
} 
```

如果您想要更多关于此的代码，请告诉我。

等待你的答复....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T20:33:40.597

分段错误信号指向某种类型的内存问题，并且考虑到您将 logMessage 和 tmpString 设置为相同的长度，并且您正在使用多个参数以及 tmpString 中的内容填充 logMessage，正如 Peter 所说，您很可能'遇到缓冲区溢出。

最初，logMessage 的长度应该是：MAX_APPNAME_LEN + MAX_DEBUG_LEN + 4 + MAX_TIMESTAMP_LEN + MAX_MODULENAME_LEN + PATHLENGTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:14:28.643

```
char logMessage[5];
char tempString[5];

strcpy(logMessage, "1234");
strcpy(tempString, "1234");

strcat(logMessage, tempString); 
```

可能（！）造成麻烦？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:56:59.743

附带说明一下，如果您使用的是库，则很难找出库中的哪个位置导致从 Logcat 中查看日志的异常。

1.  获取最新版本的 Android-NDK。
2.  将您的 logcat 日志保存在驱动器上的某个位置或直接馈送到 ndk-stack，例如假设您将其保存在 C:\Error.txt
3.  如果您使用的是 Windows，请打开命令提示符导航到您下载最新 Android-NDK 的目录，然后运行以下命令

**ndk-stack -sym C:\Project\libs -dump C:\Error.txt**

您可以在 android_ndk_path/docs/NDK-STACK.html 中找到文档

# visual-c++ - 防止Windows线程（_beginThread）占用过多CPU？

> ID：11244122
> 
> 赞同：0
> 
> 时间：2012-06-28T11:57:44.140
> 
> 标签：visual-c++, cpu-usage

我使用了一个最小化到托盘 VC++ 示例来创建一个程序，该程序会不时弹出一条消息以提醒我休息一下。

程序是这样的：

```
 startTime = time(0);
  g_hInstance=hInstance;

  HWND hWnd=CreateDialog(hInstance,MAKEINTRESOURCE(IDD_DIALOG1),NULL,DialogProc);
  if(hWnd)
  {
    MSG msg;
    _beginthread(&checkEyeRestTime, 0, 0);  
    while(GetMessage(&msg,hWnd,0,0))
    {
      TranslateMessage(&msg);
      DispatchMessage(&msg);
    }
  } 
```

和 checkEyeRestTime 函数：

```
void checkEyeRestTime(void* ptr)
{
    while( true )
    {
     //logic to check time and display message
    }//while

    _endthread();
} 
```

但是这个程序在两核处理器上占用了 50% 的 CPU。如何减少处理器的负载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:09:55.023

或者在线程中插入 Sleep(0)。这允许其他线程获得一些时间。

如果这没有帮助，您可以增加睡眠时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:00:19.507

使用[计时器事件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644901%28v=vs.85%29.aspx)而不是轮询循环。

# c++ - CreateMutex、OpenMutex 和进程同步

> ID：11244123
> 
> 赞同：4
> 
> 时间：2012-06-28T11:57:44.647
> 
> 标签：c++, windows, mutex

我正在尝试执行以下操作：

进程 A 应该使用 OpenMutex 来查看进程 B 是否正在运行。

进程 B 应该使用 CreateMutex 让进程 A 知道它正在运行。其实很简单...

会发生什么：

1.  运行进程 A -> 它看到进程 B 没有运行。到现在为止还挺好。
2.  运行进程 B -> 它创建互斥体。
3.  再次运行进程 A -> 它看到进程 B 现在正在运行。还好。
4.  我关闭了进程 B（它也应该关闭互斥锁）。
5.  运行进程 A -> 它仍然看到进程 B 正在运行！（OpenMutex 不会失败）。

我在这里做错了什么？

这是我的代码的一部分：

```
// Start of process B
HANDLE hMutex = ::CreateMutex(NULL, TRUE, MY_MUTEX_NAME);
MessageBox(NULL, _T("PROCESS B !"), _T("TEST"), 0); 
CloseHandle(hMutex);
// End of process B

// Start of process A
HANDLE hMutex = ::OpenMutex(SYNCHRONIZE, FALSE, MY_MUTEX_NAME);
if(hMutex != NULL)
{
   MessageBox(NULL, _T("PROCESS B is alive !"), _T("TEST"), 0); 
}
CloseHandle(hMutex);
// End of process A 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T12:33:39.193

调用 OpenMutex 后，必须关闭进程 A 中的互斥锁，以释放互斥锁的引用计数，以便系统将其删除。请参考[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684315%28v=vs.85%29.aspx)。“互斥对象在其最后一个句柄关闭时被销毁。”

[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686927%28v=vs.85%29.aspx)有一个工作示例

# magento - 降级 Magento 商店

> ID：11244124
> 
> 赞同：3
> 
> 时间：2012-06-28T11:57:46.973
> 
> 标签：magento

将 Magento 商店从 Enterprise Edition 1.10.1.1 降级到 community Edition 1.7.0.0 应该遵循什么程序？

我所做的步骤是：

1.  备份 Magento EE 1.10.1.1 数据库:)
2.  将此数据库导入一个名为 database1.7 的空白数据库中
3.  使用 database1.7 安装 MagentoCE 1.7.0.0

但是在安装时出现此错误，

## 页面未正确重定向。

Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

*   此问题有时可能是由禁用或拒绝接受 cookie 引起的。

这里到底有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T00:45:27.057

您可能`.htaccess`已从 Enterprise 安装复制到 CE 根目录。如果您解压缩 CE 存档，您可以`.htaccess`从那里获取一个新文件并将其复制到新的 CE 根目录中。如果这不起作用，请遵循 Tim 的建议，首先安装全新的 CE。

# javascript - 将 javascript 变量文件添加到 Sencha Touch 2 android 应用程序

> ID：11244125
> 
> 赞同：1
> 
> 时间：2012-06-28T11:57:51.370
> 
> 标签：javascript, android, android-emulator, sencha-touch-2

我有一个我正在 Sencha Touch 2 中构建的应用程序，然后打包到 android 中。我想要包含的是一个“defines.js”文件，其中包含我所有的变量。（此应用程序将针对不同的人进行更改，因此这使更改变得更容易）

通过将脚本链接添加到 index.html 文件，我让它在浏览器上正常工作，但是当我将它打包并在 android 模拟器上运行时，它找不到变量。

有任何想法吗？询问您是否需要更多信息。

目前该文件位于“resources/defines.js”下

编辑：

我想包含一个包含在应用程序中使用的变量的文件（标题等）

它被称为“defines.js”。

我已使用以下脚本标记将其链接到 index.html 中：

```
<script type="text/javascript" src="resources/defines.js"></script> 
```

我还添加到 app.json 的 to js 部分：

```
"js": [
    {
        "path": "sdk/sencha-touch.js"
    },
    {
        "path": "app.js",
        "bundle": true,  /* Indicates that all class dependencies are concatenated into this file when build */
        "update": "delta"
    },
    {
        "path": "resources/defines.js"
    }
], 
```

它可以在浏览器中使用，但在我创建本机 android 应用程序时无法使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T17:02:22.687

您可以尝试更“煎茶”的方式。

首先，删除：

```
<script type="text/javascript" src="resources/defines.js"></script> 
```

并删除 app.json 上的条目：

```
{
    "path": "resources/defines.js"
} 
```

然后，在你的 app.js 中添加加载器的资源路径：

```
Ext.Loader.setPath({
    ....
    'Resources': 'resources'
}); 
```

要求类：

```
Ext.application({
    ...
    requires: [
        'Resources.defines',
        ...
    ]
    ....
}); 
```

在文件 resources/defines.js 中定义类：

```
Ext.define('MyApp.resources.defines', {
    alternateClassName: 'Defines',
    singleton: true,

    BASEURL: 'localhost/myapp',
    APPVERSION: '0.1',

}); 
```

Tehn，您可以通过以下方式访问对象属性：

```
Defines.BASEURL
Defines.APPVERSION 
```

希望能帮助到你-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T18:26:46.700

你是如何创建打包android应用程序的？在 Sencha touch 上使用 Sencha 原生包装或 cordova 包装

# c# - 可访问性不一致的奇怪错误

> ID：11244128
> 
> 赞同：-1
> 
> 时间：2012-06-28T11:57:58.030
> 
> 标签：c#

下面这段代码让我对私有类的内部结构感到困惑。我可以看到很多关于这个错误的搜索结果，但下面的声音仍然很奇怪

```
namespace X
{
    public class Program
    {
        public static XYZ sample1;
        public static void Main(string[] args)
        {
            XYZ sample2 = new XYZ(); // OK  (1)
            sample1 = new XYZ();  // NOK    (2)
                    ...
        }
    }

    private class XYZ
    {

    }
} 
```

如果 XYZ 类是私有的，那么它在 (1) 中如何工作，但在 (2) 中却没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:01:10.193

它适用于（1）和（2）：

```
// OK, you declare and assign a local variable of a known type
XYZ sample2 = new XYZ();

// OK, you assign a static field of a known type
sample1 = new XYZ(); 
```

您根本无法声明`public static XYZ sample1;`，因为当 XYZ 为私有时它是公共的：

```
// This won't compile if XYZ is private
public static XYZ sample1; 
```

这是有道理的，用户`X.Program`将可以访问其公共成员（在这种情况下`sample1`），但他们将无法使用它们，因为它们`XYZ`对程序集是私有的（然后不可访问）。这就是编译器说“不一致的可访问性”的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:02:46.677

那是因为你在暴露

```
public static XYZ sample1; 
```

成员在“X”命名空间之外的其他代码中可见。但是类 XYZ 被标记为私有，因此错误。所以这里没有什么奇怪的。

# c# - N 层架构事务处理

> ID：11244132
> 
> 赞同：5
> 
> 时间：2012-06-28T11:58:14.973
> 
> 标签：c#, .net, layer, n-tier-architecture

我想在我的 WinForms 应用程序中实现 N 层架构，以将业务逻辑与数据访问分开（只是逻辑上 - 在一个项目中），但是我对在 BLL 中使用事务有一些疑问。我在 Internet 上找到的所有教程要么是该架构的非常简单的实现（没有事务），要么对于我的需要来说太复杂了。试图找到自己的方式，我已经到了这一点，我不知道在 BLL 层中处理事务的最佳方式。
我将尝试使用一些简单的示例来说明问题（所有类都在单独的文件中）：

```
//DTO - Data Transfer Objects
public class Item
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class SomeOtherItem
{
    public int Id { get; set; }
    public string Name { get; set; }
}

//DAL - Data Access layer
public class ItemDAL
{
    public ItemDAL()
    {
    }

    public void Add(Item item)
    {
        using (NpgsqlConnection conn = new NpgsqlConnection(connString))
        {
            conn.Open();
            using (NpgsqlCommand cmd = new NpgsqlCommand())
            {
                cmd.Connection = conn;
                cmd.CommandText = @"INSERT INTO tbl_items (name)
                                    VALUES (@name)";
                cmd.Parameters.AddWithValue("@name", item.Name);
                cmd.ExecuteNonQuery();
            }
        }
    }
}

public class SomeOtherItemDAL
{
    public SomeOtherItemDAL()
    {
    }

    public void Add(SomeOtherItem someOtherItem)
    {
        using (NpgsqlConnection conn = new NpgsqlConnection(connString))
        {
            conn.Open();
            using (NpgsqlCommand cmd = new NpgsqlCommand())
            {
                cmd.Connection = conn;
                cmd.CommandText = @"INSERT INTO tbl_some_other_items (name)
                                    VALUES (@name)";
                cmd.Parameters.AddWithValue("@name", someOtherItem.Name);
                cmd.ExecuteNonQuery();
            }
        }
    }
}

//BLL - Business Logic Layer
public class SomeBLL
{
    public SomeBLL()
    {
    }

    public void Add(Item item, SomeOtherItem someOtherItem)
    {

        ItemDAL itemDAL = new ItemDAL();
        SomeOtherItemDAL someOtherItemDAL = new SomeOtherItemDAL();

        // *** this must be done in one transaction ***
        itemDAL.Add(item);
        someOtherItemDAL.Add(someOtherItem);
    }
} 
```

现在，问题是如果我想使用 Transacion，我不能使用：

```
using (NpgsqlConnection conn = new NpgsqlConnection(connString)) 
```

在 DAL 中。要使用 NpgsqlTransacion 对象，我必须以某种方式在两个 DAL 类中保持连接打开和可见。
我已经尝试为此使用**TransacionScope**对象，但由于某些原因，它不能与 PostgreSQL 和我正在使用的驱动程序一起使用（INSERTS 是在执行后完成的，并且当 TransacionScope 内发生异常时没有事务回滚）。

我所做的是制作额外的 Singleton 类以保持连接活动并管理事务：

```
public class DB
{
    private static DB instance;
    private const string connString = @"Server=localhost;Port=5432;Database=db_test;User Id=usr_test;Password=pass";
    private NpgsqlConnection conn;

    private DB()
    {
        conn = new NpgsqlConnection(connString);
    }

    public static DB Instance
    {
        get
        {
            if (instance == null)
            {
                instance = new DB();
            }
            return instance;
        }
    }

    #region --- connection ---
    public NpgsqlConnection GetOpenConnection()
    {
        OpenConnection();
        return conn;
    }

    private void OpenConnection()
    {
        if (conn.State == ConnectionState.Closed || conn.State == ConnectionState.Broken)
            conn.Open();
    }

    public void CloseConnection()
    {
        if (conn != null && !inTransaction)
        {
            conn.Close();
        }
    }
    #endregion

    #region --- transaction ---
    private NpgsqlTransaction trans;
    private bool inTransaction;
    public bool InTransaction { get { return inTransaction; } }

    public void TransactionStart()
    {
        OpenConnection();
        trans = conn.BeginTransaction();
        inTransaction = true;
    }

    public void TransactionCommit()
    {
        if (inTransaction)
        {
            try
            {
                trans.Commit();
                trans.Dispose();
            }
            finally
            {
                inTransaction = false;
                CloseConnection();
            }
        }
    }

    public void TransactionRollback()
    {
        if (inTransaction)
        {
            try
            {
                trans.Rollback();
                trans.Dispose();
            }
            finally
            {
                inTransaction = false;
                CloseConnection();
            }
        }
    }
    #endregion
} 
```

并重建两个 DAL Add 方法来访问这样的连接：

```
//DAL - Data Access layer
public class ItemDAL
{
    public ItemDAL()
    {
    }

    public void Add(Item item)
    {
        using (NpgsqlCommand cmd = new NpgsqlCommand())
        {
            cmd.Connection = DB.Instance.GetOpenConnection();
            cmd.CommandText = @"INSERT INTO tbl_items (name)
                                VALUES (@name)";
            cmd.Parameters.AddWithValue("@name", item.Name);
            cmd.ExecuteNonQuery();
        }
        if (!DB.Instance.InTransaction)
            DB.Instance.CloseConnection();
    }
}

public class SomeOtherItemDAL
{
    public SomeOtherItemDAL()
    {
    }

    public void Add(SomeOtherItem someOtherItem)
    {
        using (NpgsqlCommand cmd = new NpgsqlCommand())
        {
            cmd.Connection = DB.Instance.GetOpenConnection();
            cmd.CommandText = @"INSERT INTO tbl_some_other_items (name)
                                VALUES (@name)";
            cmd.Parameters.AddWithValue("@name", someOtherItem.Name);
            cmd.ExecuteNonQuery();
        }
        if (!DB.Instance.InTransaction)
            DB.Instance.CloseConnection();
    }
} 
```

请注意，我想遵循“尽快关闭数据库连接”的规则，所以当在没有事务范围的情况下调用 Add 方法时，我希望它关闭连接。

**所以，最后的问题是：**
**1.**你怎么看，有没有更好的方法来处理这个问题，有什么建议吗？
**2.**我应该在 DB.CloseConnecion() 中处理连接吗？使用`(NpgsqlConnection conn = ...) { ... }`模式时我肯定会这样做，但是由于单例只要应用程序就存在，这有意义吗？Connection 在 之后返回到 ConnectionPool `Close()`，不是吗？或者，也许我还应该在每次使用后处理一个 Singleton 对象（连同连接）？
**3.**这不是直接相关的问题，但是如果我使用 DTO 对象（只是属性，没有方法）并且还有一些具有相同属性的 BusinessObjects (BO)，而且还有其他方法（验证、计算、操作等），它可以是继承自 DTO？或者也许我可以使用完整的 BusinessObject 在层之间传输它，并摆脱 DTO？

**编辑：TransacionScope**
根据要求，我从我的 TransactionScope 尝试中添加了一些代码。简单的 WinForm 应用程序，没有异常处理。结果，当我抛出它时会出现一个异常窗口，但在数据库中我看到值为 test1 和 test2 的记录。在 VS 中调试和从 .exe 执行应用程序时

```
using Npgsql;
using System.Transactions;
//...

private void button1_Click(object sender, EventArgs e)
{
    using (System.Transactions.TransactionScope scope = new TransactionScope())
    {
        AddValue("test1");
        AddValue("test2");
        throw new Exception("bam!");
        AddValue("test3");
        scope.Complete();
    }
}

private void AddValue(string value)
{
    string connString = "Server=localhost;Port=5432;Database=db_test;User Id=usr_test;Password=pass";

    using (NpgsqlConnection conn = new NpgsqlConnection(connString))
    {
        conn.Open();
        using (NpgsqlCommand cmd = new NpgsqlCommand())
        {
            cmd.Connection = conn;
            cmd.CommandText = @"INSERT INTO tbl_test (name)
                                VALUES (@name)";
            cmd.Parameters.AddWithValue("@name", value);
            cmd.ExecuteNonQuery();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:44:28.850

你所做的很勇敢，但不可扩展。我不熟悉 PGSQL，但这个问题正是设计 TransactionScope API 的原因。

您可以使用 TransactionScope api 显示您的代码吗？确保您没有调用 scope.Complete(); 如果其中一种方法发生错误。小心不要“吃掉”方法中的异常，因为在这种情况下，流程将继续，就像什么都没发生一样。

更多关于 TransactionScope 的阅读：http: [//msdn.microsoft.com/en-us/library/ms172152.aspx](http://msdn.microsoft.com/en-us/library/ms172152.aspx)

**更新 1**

感谢您分享使用 TransactionScope 类的代码。代码对我来说看起来完全正确。根据此（http://npgsql.projects.postgresql.org/docs/manual/UserManual.html）文档（由 ChrisNeil52 引用的相同内容），Enlist=true 应包含在连接字符串中以使事务正常工作。

您可能正在处理有缺陷的 API。祝你好运。

我知道这听起来很奇怪，但我会尝试使用不同的 NpgsqlCommand 构造函数。new NpgsqlCommand("sql query", connection)，而不是创建命令并为其分配连接。它们应该是等价的。但谁知道...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:28:41.933

我从未使用过 NpgSql，但阅读 NpgSql 的文档后，如果您在连接字符串中添加**“enlist=true” ，它们似乎对****TransactionScope()有一些支持。**

 **我正在查看以下 NpgSql 文档的“System.Transactions 支持”部分：http: [//npgsql.projects.postgresql.org/docs/manual/UserManual.html](http://npgsql.projects.postgresql.org/docs/manual/UserManual.html)

假设 TransactionScope() 确实有效，那么你可以做这样的事情......

```
using (var scope = new System.Transactions.TransactionScope())
{
        ItemDAL itemDAL = new ItemDAL(); 
        SomeOtherItemDAL someOtherItemDAL = new SomeOtherItemDAL(); 

        // *** this must be done in one transaction *** 
        itemDAL.Add(item); 
        someOtherItemDAL.Add(someOtherItem); 

       scope.Complete()
} 
```**

# python - 您如何在 GAE 上将类方法作为 deferred.defer 的参数传递

> ID：11244133
> 
> 赞同：2
> 
> 时间：2012-06-28T11:58:22.243
> 
> 标签：python, google-app-engine, pickle

这是我的尝试：

```
deferred.defer(class1().method1, class2.method2, arg)
deferred.defer(class1().method1, class2.method2(), arg) 
```

这两个都失败并出现错误：

```
Can't pickle <type 'instancemethod'>: it's not found as __builtin__.instancemethod 
```

在另一篇关于如何腌制实例方法的帖子中，建议了 Steven Bethard 的解决方案：http://bytes.com/topic/python/answers/552476-why-cant-you-pickle-instancemethods [（](http://bytes.com/topic/python/answers/552476-why-cant-you-pickle-instancemethods)朝向页面底部）

代码失去了格式，我无法成功地使用代码来解决我的延迟问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:32:41.280

要使用的函数`deferred.defer`必须是这个可直接导入的全局函数。这是因为 Deferred 处理程序几乎肯定会在不同的解释器实例中工作，因此相关函数必须由它导入。

如果`class1`在您的代码中引用实际的类名，则解决问题的最简单方法是将对其方法的调用包装在全局函数中并将其传递给`defer`：

```
def deferred_method_call(*args, **kwargs):
    class1.method1(*args, **kwargs)

deferred.defer(deferred_method_call, ...) 
```

另一方面，如果`class1`只是您指向实际类的变量名称，您可能希望将其作为参数传递给您的函数：

```
def deferred_method_call(class_, *args, **kwargs):
    class_.method1(*args, **kwargs)

deferred.defer(deferred_method_call, class1, ...) 
```

这是有效的，因为类对象（的实例`type`）是可挑选的，并且可以作为参数传递给`defer`ed 函数。

# c# - 是否可以将 Bing 地图中的视图渲染到 WriteableBitmap？

> ID：11244138
> 
> 赞同：1
> 
> 时间：2012-06-28T11:58:44.683
> 
> 标签：c#, windows-phone-7, bing-maps

案例：Windows Phone 7 (Mango) 应用程序。

我有一个（数百个）项目列表，其中包含一个地理坐标。每个项目的参数数据用于渲染图像，这些图像显示在列表框中。

是否可以将 WP7 Map 元素呈现为 writeablebitmap？如果没有，是否可以从地图元素中禁用 UI 手势，所以它至少表现得像静态图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:12:38.477

如果您只想要地图的静态图像，我建议您使用[Bing](http://msdn.microsoft.com/en-us/library/ff701724.aspx)地图的静态地图 API，而不是每个列表项的地图控件。

静态地图 API 还允许您指定图像大小，以便减少手机的下载大小。

如果您仍想使用 Bing 地图控件，可以通过将 IsHitTestVisible 设置为 false 来禁用 UI 手势，就像在 XAML 中这样：

```
<my:Map IsHitTestVisible="False" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:35:50.083

尝试**GFTab评论中建议的示例**

为了使其静态，您可以尝试 IsHitTestVisible="False"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:22:38.317

以下是我如何从应用程序中当前可见的区域制作辅助磁贴：

```
 private void pinCurrentMapCenterAsSecondaryTile() {
        try {
            var usCultureInfo = new CultureInfo("en-US");
            var latitude = map.Center.Latitude.ToString(usCultureInfo.NumberFormat);
            var longitude = map.Center.Longitude.ToString(usCultureInfo.NumberFormat);
            var zoom = map.ZoomLevel.ToString(usCultureInfo.NumberFormat);
            var tileParam = "Lat=" + latitude + "&Lon=" + longitude + "&Zoom=" + zoom;
            if (null != App.CheckIfTileExist(tileParam)) return; // tile for exactly this view already exists

            using (var store = IsolatedStorageFile.GetUserStoreForApplication()) {
                var fileName = "/Shared/ShellContent/" + tileParam + ".jpg";
                if (store.FileExists(fileName)) {
                    store.DeleteFile(fileName);
                }
                // hide pushpins and stuff
                foreach (var layer in map.Children.OfType<MapLayer>()) {
                    layer.Visibility = Visibility.Collapsed;
                }
                using (var saveFileStream = new IsolatedStorageFileStream(fileName, FileMode.Create, store)) {
                    var wb = new WriteableBitmap(173, 173);
                    b.Render(
                        map,// the map defined in XAML
                        new TranslateTransform {  
                            // use the transformation to clip the center of the current map-view
                            X = -(map.ActualWidth - 173)/2,
                            Y = -(map.ActualHeight - 173)/2,
                    });
                    wb.Invalidate();
                    wb.SaveJpeg(saveFileStream, wb.PixelWidth, wb.PixelHeight, 0, 100);
                }
                foreach (var layer in map.Children.OfType<MapLayer>()) {
                    layer.Visibility = Visibility.Visible;
                }
            }

            ShellTile.Create(
                new Uri("/MainPage.xaml?" + tileParam, UriKind.Relative),
                new StandardTileData {
                    BackTitle = "ApplicationName",
                    Count = 0,
                    // You can only load images from the web or isolated storage onto secondary tiles
                    BackgroundImage = new Uri("isostore:/Shared/ShellContent/" + tileParam + ".jpg", UriKind.Absolute),
                });
        } catch (Exception e) {
            // yeah, this is 7331!!11elfelf
        }
    } 
```

# android - 进度对话框未显示

> ID：11244143
> 
> 赞同：0
> 
> 时间：2012-06-28T11:59:09.037
> 
> 标签：android

我是安卓新手。我正在建立一种登录机制，当您单击“登录”按钮时，它会调用 Web 服务，该服务会检查您是否已通过身份验证。同时我希望只要结果没有从服务返回，那么应该显示进度条，当结果出现时，进度对话框应该消失，我导航到您成功登录的另一个活动，否则显示一条对不起错误的消息用户名和密码。我还想显示一个取消按钮，因此如果身份验证需要很长时间，那么用户可以选择关闭对话框。我试过这个，但我得到了错误。

```
 public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    Button btn_logIn = (Button)findViewById(R.id.btn_signIn );
    btn_logIn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {

            ProgressDialog dialog = new ProgressDialog(getBaseContext());
            dialog.setMessage("Please Wait. Your authentication is in progress");
            dialog.setButton("Cancel", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {                        
                    dialog.dismiss();                       
                }
            }); //end of anonymous class

            dialog.show();              
        }           
    }); //end of anonymous class    
} //end of onCreate() 
```

当我单击登录按钮时，我会收到**强制关闭应用程序**的消息。我没有使用该`onCreateDialog(int id)`方法，因为我在 developer.android.com 上读到了

```
Opening a progress dialog can be as simple as calling ProgressDialog.show(). For
example, the progress dialog shown to the right can be easily achieved without
managing the dialog through the onCreateDialog(int) callback, as shown here:

ProgressDialog dialog = ProgressDialog.show(MyActivity.this, "", 
                    "Loading. Please wait...", true); 
```

看到它说不需要对进度对话框使用 onCreateDialog() 。`without managing the dialog through the onCreateDialog(int) callback`. 在我的情况下如何显示对话框。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:19:47.770

如果您想要与 getBaseContext() 或与此相关的对话，则不要使用

```
 ProgressDialog dialog = new ProgressDialog(view.getBaseContext()); 
```

或者

```
 ProgressDialog dialog = new ProgressDialog(view.getContext()); 
```

或者

```
 ProgressDialog dialog = new ProgressDialog(view.getApplicationContext()); 
```

另一种方法是

如上所述

```
 ProgressDialog dialog = new ProgressDialog(YourRecentActivity.this); 
```

# android - 如何使用像 AsyncTask 这样的服务

> ID：11244144
> 
> 赞同：0
> 
> 时间：2012-06-28T11:59:19.723
> 
> 标签：android, service, android-asynctask

我想使用类似于 AsyncTask 的服务。在后台，它打开流并保持仅显示进程栏。当它完成时，它将具有在后台执行的流参数。如果你能给我一个简单的代码来做这个。

我的异步任务如下所示：

```
 protected void onPreExecute() {
      Dialog.setMessage("Doing something...");
      Dialog.show();          
  } 
```

我的服务应该这样做：

```
 try{

     URL url = new URL("http://www.google.com");

     // Read all the text returned by the server
     BufferedReader in = new BufferedReader
                                 (new InputStreamReader(url.openStream()));
     String str;
     while ((str = in.readLine()) != null) {
        // str is one line of text;
         readLine() 
         strips the newline  character(s)
     }
     //all is ok
     in.close(); 
```

现在我该如何实现这些服务。我知道我有很多示例，但它们并不简单，如果您可以发布执行此操作的简单代码，那将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:09:53.253

是的，这里是示例代码：

```
public void draw(int tot) throws IOException, URISyntaxException{

    total--;
    sv = new ScrollView(this);
    ll = new LinearLayout(this);
    ll.setBackgroundResource(R.drawable.opsbuds);
    ll.setOrientation(LinearLayout.VERTICAL);
    sv.addView(ll);

//  TextView tv1=new TextView(this);
    //tv1.setText("Question: "+question);
//  tv1.setTextColor(Color.rgb(80, 00, 80));
//  ll.addView(tv1);
    img=new ImageView(this);
    //Bitmap drawable = getBitmapFromURL("http://bufferedsoftware.com/survey/db/php/authentication/upload/" + option1[tot]);

    new DownloadFileFromURL().execute(); 

    Button btn=new Button(this);
    btn.setLayoutParams (new LayoutParams 
            (LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
    LinearLayout.LayoutParams lp1 = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    lp1.setMargins(20, 10, 0, 0);
    btn.setText("Question");
    btn.setTextSize(20);
    btn.setWidth(100);
    btn.setHeight(40);
    btn.setLayoutParams(lp1);
    btn.setTextColor(Color.rgb(80, 00, 80));
    btn.setBackgroundResource(R.drawable.button);
    btn.setOnClickListener(this);
    img.setLayoutParams(lp1);
    ll.addView(img);
    ll.addView(btn);
    this.setContentView(sv);
    temp++;
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case progress_bar_type:
        pDialog = new ProgressDialog(this);
        pDialog.setMessage("Loading Image. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setMax(100);
        pDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pDialog.setCancelable(true);
        pDialog.show();
        return pDialog;
    default:
        return null;
    }
}

class DownloadFileFromURL extends AsyncTask<String, String, String> {

     Bitmap bitmap;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(progress_bar_type);
    }
    @Override
    protected String doInBackground(String... f_url) {  

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("tag", "format2"));
        nameValuePairs.add(new BasicNameValuePair("surveyId", surveyId));
        nameValuePairs.add(new BasicNameValuePair("quesNo", Integer.toString(ques_no)));
        //http post
        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(surveyURL);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        }catch(Exception e){
            Log.e("log_tag", "Error in http connection"+e.toString());
        }
        //convert response to string
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");

            String line="0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
        }

        try{
            jArray = new JSONArray(result);
            JSONObject json_data=null;
            json_data = jArray.getJSONObject(0);
            quest_id=json_data.getString("question_id");
            question=json_data.getString("question");
            options=json_data.getString("op");
            option1=json_data.getString("image_name");
            quesNo=json_data.getString("question_no");
            help=json_data.getString("Help");
            mandatory=json_data.getString("mandatory");
            others=json_data.getString("others");
            condition=json_data.getString("condition1");
            total++;    
        }
        catch(JSONException e1)
        {
            Toast.makeText(getBaseContext(), "No Data Found" ,Toast.LENGTH_LONG).show();
        } catch (ParseException e1) 
        {
            e1.printStackTrace();
        }  

         try {
               URL url = new URL("http://182.71.220.141/survey/db/php/authentication/upload/" + option1);
               HttpGet httpRequest = null;

               httpRequest = new HttpGet(url.toURI());

               HttpClient httpclient = new DefaultHttpClient();
               HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);

               HttpEntity entity = response.getEntity();
               BufferedHttpEntity b_entity = new BufferedHttpEntity(entity);
               InputStream input = b_entity.getContent();

              bitmap = BitmapFactory.decodeStream(input);
            } catch (MalformedURLException e) {
                Log.e("log", "bad url");
            } catch (IOException e) {
                Log.e("log", "io error");
            } catch (URISyntaxException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        return null;
}

    @Override
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after the file was downloaded
        img.setImageBitmap(bitmap);
        dismissDialog(progress_bar_type);
    }
} 
```

# jquery - Jquery复选框多功能

> ID：11244146
> 
> 赞同：1
> 
> 时间：2012-06-28T11:59:26.060
> 
> 标签：jquery, function, checkbox

我在使用以下两个 jquery 脚本时遇到问题

```
$(document).ready(function() {
    var $checkboxes = $("#table_pdf_view input[type=checkbox]");
    $checkboxes.on('change', function() {
        var ids = $checkboxes.filter(':checked').map(function() {
            return this.id;
        }).get().join(',');
        $('#multi_client_id').val(ids);
    });
});
//-->
<!--
$(document).ready(function(){ // 1
    // 2
    $(':checkbox.selectall').on('click', function(){
        // 3
        $(':checkbox[name=' + $(this).data('checkbox-name') + ']').prop("checked", $(this).prop("checked"));

    });

}); 
```

两者都可以完美地工作。第一个通过#table_pdf_view，如果选中复选框，则将其ID返回到隐藏的输入#multi_client_id

第二个是全选复选框。选中时选择具有相同名称的所有复选框。全选复选框位于#table_pdf_view 之外。

问题是当我使用全选复选框时，返回到隐藏输入的值不正确。它只返回全选复选框的 id，而不是其他复选框的 id，我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:07:22.353

发生这种情况的原因是因为 Select All 复选框也是您使用此选择器的 div 中的一个复选框：

```
 var $checkboxes = $("#table_pdf_view input[type=checkbox]"); 
```

您需要将其移出该 div，或更改获取所有复选框的方式。

例如，如果您查看以下页面，它会告诉您如何忽略某个复选框：

[jQuery - 如何选择除特定复选框之外的所有复选框？](https://stackoverflow.com/questions/7523687/jquery-how-to-select-all-checkboxes-except-a-specific-one)

希望这可以帮助。

更新

这是工作版本：

```
 //Handle Multi Download
  $(document).ready(function() {
  var $checkboxes = $('#table_pdf_view input:checkbox:not("#sa_download")');
  $checkboxes.on('change', function() {
        var ids = $checkboxes.filter(':checked').map(function() {
        return this.id;
    }).get().join(',');
    $('#multi_client_id').val(ids);
  });
  });

  $(document).ready(function(){ // 1
   // 2
       $(':checkbox.selectall').on('click', function(){
       // 3
           $(':checkbox[name=' + $(this).data('checkbox-name') + ']').prop("checked", $(this).prop("checked"));
           $(':checkbox[name=' + $(this).data('checkbox-name') + ']').trigger("change");
       });

   }); 
```

# xml - 如何为以下 XML 编写 XML Schema？

> ID：11244148
> 
> 赞同：2
> 
> 时间：2012-06-28T11:59:29.910
> 
> 标签：xml, xsd

我想为 XML 文件编写 XML Schema：

```
<root>
    <rate>10</rate>
    <rate></rate>
    <rate>15</rate>
    ...
</root> 
```

<rate> minOccurs 为 1，maxOccurs 无界。<rate> 必须有 xs:integer 类型，但是 <rate></rate> 怎么办？我不想写 <rate xsi:nil="true"/>。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:12:43.780

您只能声明一个接受任何整数值或不接受任何内容作为其内容的元素，而不是一个`<rate>`元素有内容，而另一个元素没有任何内容。`xs:integer``<rate>`

实际上，这可以通过以下`<xs:union>`元素来完成：

```
<xs:simpleType name="emptyString">
  <xs:restriction base="xs:string">
    <xs:maxLength value="0"/>
  </xs:restriction>
</xs:simpleType>

<xs:element name="rate">
    <xs:simpleType>
        <xs:union memberTypes="xs:integer emptyString"/>
    </xs:simpleType>
</xs:element> 
```

这将接受`<rate/>`, `<rate></rate>`, `<rate>42</rate>`（或任何其他`xs:integer`值），但不接受`<rate>Hello, World!</rate>`。

请注意，要使其正常工作，您必须已将架构中的无前缀命名空间设置为与目标命名空间相同，否则将无法`emptyString`在属性中找到。`memberTypes`（当然，您也可以为目标命名空间定义一个前缀并使用它。）

*我省略了有关如何编写完整架构以及如何使用`maxOccurs`等的任何解释，因为从您的问题中我认为您已经知道如何做到这一点。如果您需要任何关于此的更多信息，请告诉我。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:51:32.993

ORMapper 方法的替代方法是将元素的类型声明为 maxLength=1 的整数列表。

```
<xs:element name="rate">
    <xs:simpleType>
       <xs:restriction base="listOfInteger">
          <xs:maxLength value="1"/>
       </xs:restriction>
    </xs:simpleType>
</xs:element>

<xs:simpleType name="listOfInteger">
  <xs:list itemType="xs:integer"/>
</xs:simpleType> 
```

我倾向于使用这种方法来使用（整数，零长度字符串）的并集，因为它在模式感知 XQuery 和 XSLT 应用程序中更容易处理。如果您使用 JAXB 使用数据绑定，它也可能会更好，我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:54:42.380

我会按照您打算使用的方式编写 XML 模式。由于您将使用 C++ 代码生成器，这将使事情变得更容易（我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，所以我在 Java 方面有这方面的经验）。

```
<xs:element name="root">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="rate" type="xs:integer" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

由于您预计会收到无效数据，因此您有以下选择：

1.  您的 object-to-XML 解决方案将以所需的方式自动为您处理这些无效数据。例如，JAXB 旨在容忍不良数据。
2.  您的 object-to-XML 解决方案为您提供了一种处理不良数据的机制，您可以利用它来解决您的问题。例如，JAXB 提供了这种`ValidationEventHandler`机制。

# python - Python 正则表达式挑战缩进

> ID：11244149
> 
> 赞同：0
> 
> 时间：2012-06-28T11:59:31.090
> 
> 标签：python, regex, regex-negation

试图解决一个我知道我可以通过迭代字符串来解决的问题，但是使用 python 我确信有一个正则表达式可以更优雅地解决它......感觉就像放弃诉诸迭代过程！

基本上，我在单个属性单元格中有一个列表，我需要确定哪些属性是子属性，哪些是子子属性，并将它们与它们所在的属性相匹配。例如：

ID=11669 Antam 红土镍/镍铁运营  
     ID=19807 Gebe 红土镍矿
     ID=19808 Gee Island 红土镍矿
     ID=18923 Mornopo 红土镍矿
     ID=29411 Pomalaa 镍铁冶炼厂
     ID=19806 Pomalaa 红土镍矿
          ID=29412 Maniang 红土镍项目
     ID=11665 东南苏拉威西红土镍矿项目
          ID=27877 巴胡布卢红土镍矿床

应该生成：

```
MasterProp,    SubProp
11669,          19807
11669,          19808
11669,          18923
11669,          29411
11669,          19806
19806,          29412
11669,          11665
11665,          27877 
```

获取 11669 和第二级很容易 - 只需获取我找到的第一个 ID，然后添加到其余所有 ID。但是要达到“第三级”要困难得多

我尝试了以下

```
tags = re.compile('ID=(\d+).+(\&nbsp\;){8}')                        
for tag, space in tags.findall(str(cell)): 
    print tag 
```

但这给了我在 8 个空格之前的第一个 ID，而不是在 8 个空格之前的最后一个 ID...所以在上面的示例中，我得到`11669`而不是`19806`. 我怀疑我可以输入一个表达式，说找到一个`ID=(\d+)`在它和 8 个空格之间没有其他的地方`ID=(\d+)`，但这已经证明超出了我（新手）的能力！欢迎任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:56:04.807

使用 BS 获取标签后，您需要执行以下操作：

```
>>> from urlparse import urlparse, parse_qs
>>> myurl = 'ShowProp.asp?LL=PS&ID=19807'
>>> parse_qs(urlparse(myurl).query)
{'LL': ['PS'], 'ID': ['19807']}
>>> parse_qs(urlparse(myurl).query)['ID']
['19807']
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T23:04:12.423

我认为带有 HTML 的示例代码更有意义 - 实际数据，而不是挥手。

```
bs = BeautifulSoup.BeautifulSoup(html)

parent_stack = [None]
res = []
for span in bs.findAll('span', {'style':'white-space:nowrap;display:inline-block'}):
    indent = 1 + span.previousSibling.count('&nbsp;') / 5
    id = int(span.find('input')['value'])
    name = span.find('a').text.strip()

    # warning! this assumes that indent-level only ever
    #   increases by 1 level at a time!
    parent_stack = parent_stack[:indent] + [id]
    res.append(parent_stack[-2:]) 
```

结果是

```
[[None, 11669],
 [11669, 19807],
 [11669, 19808],
 [11669, 18923],
 [11669, 29411],
 [11669, 19806],
 [19806, 29412],
 [11669, 11665],
 [11665, 27877],
 [11665, 50713],
 [11665, 27879],
 [11665, 27878],
 [11669, 11394]] 
```

# php - 如何管理列表高度？

> ID：11244150
> 
> 赞同：0
> 
> 时间：2012-06-28T11:59:31.683
> 
> 标签：php, javascript, jquery

![在此处输入图像描述](../Images/ddccc2ce49158e31aeab110fbe80653d.png)

你好 Stackoverflowers，

`ul li`此图像在列​​表项 (In )中显示产品图像及其描述。

我正在尝试管理与产品图像高度相同的描述高度。

表示：在图像中，

例如：在“Accufitness Accumeasure 体脂卡尺”产品中：

我想从第一`li`到第三或第四显示产品描述`li`[取决于图像高度（注意：每个图像都有固定的高度）]，其余的`li`将被隐藏。我想要一个“查看更多”链接来显示剩余的列表。当用户单击“查看更多”链接时，应显示隐藏列表，当他们单击“更少”链接时，`li`应隐藏列表（剩余元素）。

那么，如何使用 jquery 根据图像高度管理描述高度，或者您能建议其他方式吗？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:23:41.260

在这样的 div 中添加您的列表并添加一个按钮。

```
<div class="container">
<ul>
    <li>Here is some text, Here is some text</li>
    <li>Here is some text, Here is some text</li>
    <li>Here is some text, Here is some text</li>
    <li>Here is some text, Here is some text</li>
    <li>Here is some text, Here is some text</li>
    <li>Here is some text, Here is some text</li>
    <li>Here is some text, Here is some text</li>
    <li>Here is some text, Here is some text</li>
    <li>Here is some text, Here is some text</li>
    <li>Here is some text, Here is some text</li>
</ul>

</div><input type="button" class="seemorelinks" value="see more" onclick="$('.container').height('100%'); this.style.display='none';" /> 
```

将此添加到您的CSS

```
.container{ position:relative; height:40px; overflow:hidden;}​ 
```

工作小提琴在这里：http: [//jsfiddle.net/hBjmU/25/](http://jsfiddle.net/hBjmU/25/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:07:31.383

我希望我理解你的正确。我认为您应该将列表放入一个`div`，然后将其与`height`图像相同并设置`overflow`为`hidden`。

现在您可以使用 jQuery 来更改`div`用户单击“查看更多”链接时的大小。

还没有时间测试它，但我希望这能让你更进一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:11:06.263

假设您可以在 li 内创建一个 div ，其高度固定在图像的高度。您可以通过在正文的 onload 事件中添加一些脚本来使用 javascript 来执行此操作，或者作为回显到 html 中的 php 变量来执行此操作。

无论哪种方式，您都需要使用 css 隐藏溢出（溢出：隐藏）。

然后，一旦有人点击“更多”，您可以通过javascript删除固定高度并将溢出样式设置为可见。

# python - Python raw_input() 利用远程代码执行

> ID：11244151
> 
> 赞同：0
> 
> 时间：2012-06-28T11:59:32.860
> 
> 标签：python, exploit

我正在寻找一种方法来使用 raw_input() 提示符来执行另一个对象的代码，以确保我以安全的方式执行此操作。

我有两个类，第一个类有一个我不应该调用的方法，既不是从外部调用，也不是从内部调用；第二个有一个方法来解析这样构建的用户请求：“方法调用 arg1 arg2 ...”。例如：“加 5 3”。并且“do_add”方法应以 5 和 3 作为参数调用。

```
class Obj1 :

    # ...

    def do_forbidden(self) :
        # Not supposed to execute

    # ...

class Obj2 :

    # ...

    def process_cmd(self, cmd) :
        words = cmd.split()
        if len(words) > 0 :
            mthdname = 'do_' + words[ 0 ]
            args = words[1:]

            if hasattr(self, mthdname):
                mthd = getattr(self, mthdname)
                mthd(*args)

    # ... 
```

然后 ：

```
obj1 = Obj1()
obj2 = Obj2()
# ...
cmd = raw_input("Command : ")
obj2.process_cmd(cmd) 
```

在这里，有没有办法输入可以从 obj1 执行“do_forbidden()”的东西？input() 而不是 raw_input() 有什么不同吗？

如果漏洞实际上是可能的，攻击者可以“猜测”其中一个方法的名称来执行它，那么前缀“do_”是一个很好的保护吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:19:29.840

不可能利用这一点。当然，除非其中一种`do_`方法存在其他漏洞。您不能执行未在与其`process_cmd`调用的对象相同的对象上定义的方法。

`input`将是完全不同的事情，它允许你执行任何你想要的事情。

# image - joomla 的垂直滚动画廊

> ID：11244155
> 
> 赞同：0
> 
> 时间：2012-06-28T11:59:53.803
> 
> 标签：image, joomla, module, popup, gallery

我需要 joomla 2.5.4 的模块 - 垂直图像轮播（列中 3-4 个图像），当您单击图像（在弹出窗口中导航）时，带有导航和灯箱。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:02:39.760

这就是你需要的——

[http://extensions.joomla.org/extensions/photos-a-images/slideshow/image-mootools-slideshow/13119](http://extensions.joomla.org/extensions/photos-a-images/slideshow/image-mootools-slideshow/13119)

或者检查这个---

[http://www.demo2.ari-soft.com/joomla-carousel-module.html](http://www.demo2.ari-soft.com/joomla-carousel-module.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:33:21.237

使用这个模块[http://extensions.joomla.org/extensions/news-display/articles-display/news-tickers-a-scrollers/15315](http://extensions.joomla.org/extensions/news-display/articles-display/news-tickers-a-scrollers/15315)这对你有用，你也可以在[http://extensions.joomla.org/extensions/news-display/articles-display/news-tickers-a-scrollers/15315 /demo.themexpert.com/extensions/free-extensions/xpert-scroller](http://demo.themexpert.com/extensions/free-extensions/xpert-scroller)

# reporting-services - 如何报告键/值对中的通用 sql 数据？

> ID：11244157
> 
> 赞同：0
> 
> 时间：2012-06-28T12:00:04.753
> 
> 标签：reporting-services, crystal-reports, reporting, adhoc, cognos

我很难理解这一点。

我有一些规范化的表，布局（简化）如下：

```
Person
(
     PersonId
     Email
)

Info
(
     InfoId
     InfoDescr
)

PersonInfo
(
     PersonId
     InfoId
     InfoValue
) 
```

我需要为此向用户提供一些临时报告。我的老板希望我使用 Cognos，我们也可以使用 Crystal Reports 和 Sql Server Report Services。

如何允许用户按如下方式查询数据：

```
Give me all people in zipcode x who are subscribed to our newsletter
     (Assuming Zipcode and Newsletter are stored as Info records) 
```

我写了一个像这样扁平化数据的视图

```
 PersonId, Email,    InfoId, InfoDescr,  InfoValue
 1         me@me.com 2       Zipcode     12345 
```

我希望用户能够选择他们想要的任何信息，并给出过滤它们的标准。

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:36:55.080

我建议使用水晶报表。使用组合框/过滤器构建一个简单的表单，以方便 UI。通过表单，用户将选择并过滤想要的标准。使用此条件创建 SQL 查询并将结果表用作 Crystal 报表的数据源。如果您是水晶新手并且需要一些示例代码，请评论...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:46:18.313

我最终选择了 Excel。有关详细信息，请参阅[此已接受的答案](https://dba.stackexchange.com/questions/20275/solutions-for-reporting-off-of-an-eav-structured-database)。

简而言之，我在存储过程中使用了动态数据透视表。存储过程称为我创建的视图，它对数据进行非规范化。我认为使用 MS Query 将存储过程与 Excel 2010 挂钩。这会将其加载到格式良好的表格中，允许最终用户对他们心中的内容进行排序和过滤。

# java - 这真的是使用java的FTP代码的原因吗？

> ID：11244158
> 
> 赞同：0
> 
> 时间：2012-06-28T12:00:07.860
> 
> 标签：java

我从大型机应用程序中获取了数据。该文件是“sample.txt”文件的名称。当我通过'FTP'使用java代码读取数据以将数据存储到oracle数据库时。它在名称字段中显示一些特殊字符。另外一个信息是我们的产品我们也在使用国际化。我们使用葡萄牙语、西班牙语、英语。我使用独立的 java 程序运行它。

例如给定的输入，

```
DTALRVAQCRAÜL TORRENTS  +34 93 8640317  +34 93 8640304   RAUL.TORRENS@TRW.COM 20100511FAO
DTALRVAQCRAÜL TORRENTS  +34 93 8640317  +34 93 8640304   RAUL.TORRENS@TRW.COM 20100511FAO 
```

输出为 ,

```
DTALRVAQCRAðL TORRENTS  +34 93 8640317  +34 93 8640304   RAUL.TORRENS@TRW.COM 20100511FAO
DTALRVAQCRAðL TORRENTS  +34 93 8640317  +34 93 8640304   RAUL.TORRENS@TRW.COM 20100511FAO 
```

什么是我克服这个问题的解决方案。

我的示例 java 文件是，

```
public void loadData() throws Exception {

          emailMsg.setLength(0);           
          BufferedReader br = null;       
          int r12InsCnt = 0; 
          int r12UpdCnt = 0;
          String strLine = null;          
          int totalrows = 0; int trailerCnt = 0;
          String rundate = "";
          String endDate = "";
          Connection conn = null;        
          CallableStatement cs = null;
          String tmpFilename="";
          List regns = new ArrayList();
          BufferedOutputStream bos = null;
          int buffer = 0;
          InputStream in;
          FileInputStream fstream1=null;
          File tempFile = null;

          String METHOD_NAME = "loadData";            
          try
          {                           
              String DATE_FORMAT = "MMddyyyy";
              java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat(DATE_FORMAT);
              Calendar c1 = Calendar.getInstance();
              String today = sdf.format(c1.getTime()); //mmddyyyy

              CommonUtil cu = new CommonUtil();
              rundate = cu.getCurrentDtTimestamp("yyyy/MM/dd HH:mm:ss.S");            

              //get NAS server details from DynoProp table
              PropertyManager propmanager = PropertyManager.getInstance();            
              PropertyGroup vrpgProGroup = propmanager.getGroup("ServerCredentials");       
              String user = vrpgProGroup.getString("id");             
              String password = vrpgProGroup.getString("password"); 
              String serverName = vrpgProGroup.getString("server");

              FtpClientAttributes ftpAttribs = new FtpClientAttributes.Builder(serverName,user,password).build();
              FtpProxyClient ftp = new FtpProxyClient(ftpAttribs);                  
              //ftp.setBinaryMode();
              ftp.setAsciiMode();
              ftp.changeDirectory("Vrpg");

              if(ftp.isFileExists("vrpg.contacts.txt"))
              {
                     tmpFilename = "vrpg_contacts_Pr_" + today + ".txt";
                     ftp.renameFile("vrpg.contacts.txt", tmpFilename);
                     in = ftp.getFile(tmpFilename);

                     //String tempDir = "/proj/mingle/was/install/mingle_mingleEAR.ear/mingleWeb.war/vrpg/";
                     String tempDir = System.getProperty("java.io.tmpdir") + "/";                    

                     if("DESKTOP".equalsIgnoreCase(System.getProperty("DEPLOYED_ENVIRONMENT"))) {
                         tempDir = "C:/SDPRNG/vrpg/"; 
                     }

                     bos = new BufferedOutputStream(new FileOutputStream(tempDir + tmpFilename));                                        
                      while ((buffer = in.read()) != -1) {
                          bos.write(buffer);
                      }
                      bos.flush();
                      bos.close();                    
                      ftp.cleanup();

                      tempFile = new File(tempDir + tmpFilename);
                      fstream1 = new FileInputStream(tempFile);
                      br = new BufferedReader(new InputStreamReader(fstream1,"CP1252"));

                      conn = DBConnection.getmingleConnection();
                      PreparedStatement pstmt = null;

                        try{
                            if(conn!=null){
                            pstmt = conn.prepareStatement(mingleQuery.UPDATER12DELETEFLAG);
                            pstmt.execute();
                            }
                        }catch(SQLException e){
                            throw new mingleBusinessException(
                                    new ruralExceptionAttributes.Builder(
                                    CLASS_NAME, METHOD_NAME).build(),
                                    "Getting exception while updating the delete flag in loadData ", e);
                        }

                      while ((strLine = br.readLine()) != null)                       
                      { 
                          try
                          {
                               //Header:"AA", Trailer:"ZZ", Detail:"DT" record.
                               if(strLine.substring(0,2).equalsIgnoreCase("ZZ"))
                               { trailerCnt = Integer.parseInt(strLine.substring(36,43)); }

                               if(strLine.substring(0,2).equalsIgnoreCase("DT"))
                               {                  
                                  totalrows++;
                                  System.out.println("The Values is :"+strLine.length());
                                  //System.out.println("calling SP for:" + strLine.substring(2,7));
                                  //insert to R12
                                   try
                                   {                   
                                     cs = null;
                                     cs = conn.prepareCall("{call createDetailContactRawdata(?,?,?,?,?,?,?,?,?,?,?,?)}");                      
                                     cs.setString(1, strLine.substring(2,7).trim());  //sitecode
                                     cs.setString(2, "vrpg");
                                     cs.setString(3, strLine.substring(7,9).trim()); //title                     
                                     cs.setString(4, strLine.substring(160).trim()); //org
                                     cs.setString(5, strLine.substring(9,41).trim()); //name
                                     cs.setString(6, strLine.substring(41,63).trim()); //phone
                                     cs.setString(7, strLine.substring(63,85).trim()); //cell
                                     cs.setString(8, strLine.substring(85,107).trim()); //fax
                                     cs.setString(9, strLine.substring(107,152).trim()); //email
                                     cs.setString(10, strLine.substring(152,160));      //last update date                  
                                     cs.registerOutParameter(11, java.sql.Types.VARCHAR);
                                     cs.registerOutParameter(12, java.sql.Types.CHAR);
                                     cs.execute();                          
                                     if(!"S".equals(cs.getString(11))){
                                        emailMsg.append(cs.getString(11));                                          
                                     } 
                                     else 
                                     { 
                                        if(cs.getString(12).equalsIgnoreCase("I")) r12InsCnt++;
                                        if(cs.getString(12).equalsIgnoreCase("U")) r12UpdCnt++;
                                     }
                                     cs.close();                                                    
                                   } catch(Exception e) {
                                     System.out.println("sp error:" + e.getMessage());  
                                     emailMsg.append("Error occured executing SP:" + strLine.substring(2,7)+strLine.substring(7,9).trim()+ strLine.substring(160).trim()+ e.getMessage() + "\n");
                                   }
                               }//end if DT

                          }catch(Exception e){
                             System.out.println("error inside while" + e.getMessage()); 
                             emailMsg.append("Error reading vrpg contacts file:" +  strLine.substring(0,25)+ e.getMessage()+ "\n");
                             log.logp(Level.INFO,CLASS_NAME,"loadData", "error reading vrpg contacts file" + e.getMessage().toString()); 
                          }

                      } //end while

                      try{
                            if(conn!=null){
                            pstmt = conn.prepareStatement(mingleQuery.DELETER12_DELETEFLAG_Y);
                            pstmt.execute();
                            }
                        }catch(SQLException e){
                            throw new mingleBusinessException(
                                    new ruralExceptionAttributes.Builder(
                                    CLASS_NAME, METHOD_NAME).build(),
                                    "Getting exception while deleting the records with delete flag 'Y' in loadData ", e);
                        }

                      br.close();
                      conn.close();
                      if(pstmt != null) pstmt.close();

                      //System.out.println("Total Rows ** :" + totalrows); 
                      //System.out.println("Trailer Count** :" + trailerCnt); 

                      if(totalrows < trailerCnt) { emailMsg.append("Total rows processed is less than trailer record count:" + totalrows + "/" + trailerCnt + "\n"); }

                     /*System.out.println("r12InsCnt:" + r12InsCnt);                 
                      System.out.println("r12UpdCnt:" + r12UpdCnt);*/

                     endDate = cu.getCurrentDtTimestamp("MM/dd/yyyy HH:mm:ss");
                     //create log for batch process with number of rows retrieved from vrpg and rows inserted into mingle
                     BatchLogBO batchLogBO = new BatchLogBO();
                     batchLogBO.setBusnType(busnType);          
                     batchLogBO.setRatingRegion(region);            
                     batchLogBO.setStartDate(rundate);
                     batchLogBO.setEndDate(endDate);
                     batchLogBO.setRowsReceived(totalrows);
                     batchLogBO.setRowsInserted(r12InsCnt);
                     batchLogBO.setRowsUpdated(r12UpdCnt);
                     batchLogBO.setRowsDeleted(0);
                     batchLogBO.setBatchName("vrpgCONATCTS");
                     batchLogBO.setBatchType("DAILY");
                     batchLogBO.setvrpgCode("NONE");
                     batchLogBO.setLastUpdtPgmCode("BATCH");
                     try
                     { 
                          mingle_BINDING_AS.beginTransaction();
                          batchLogBO = mingle_BINDING_AS.bindCreateOrUpdate(batchLogBO);
                          mingle_BINDING_AS.commitTransaction();
                     } catch(Exception e) {
                          emailMsg.append("Error inserting batchLog:" + e.getMessage() + "\n");
                     }                                      
                     //System.out.println("about to run load instance for all regions");
                     try
                     {
                         //call loadInstance method to load instance data for each region                    
                         regns = getRegions();
                         for(int k=0; k<regns.size(); k++) {                         
                           loadInstance(cu.getCurrentDtTimestamp("MM/dd/yyyy"),regns.get(k).toString());
                         }
                     }catch(Exception e) {
                        emailMsg.append("Error getting regions to run loadInstance:" + e.getMessage() + "\n"); 
                     }

                 } else {                  
                   Mailbox.sendMail("rpgsupp@rural.com", "rpgsupp@rural.com", System.getProperty("DEPLOYED_ENVIRONMENT"), "vrpg Contacts file not found on NAS");
                   return;
                 }

                 if ( (emailMsg.toString().length() > 1) && (!emailMsg.toString().equalsIgnoreCase(null)) && (!emailMsg.toString().equalsIgnoreCase("null")) ) {     
                     Mailbox.sendMail("rpgsupp@rural.com", "rpgsupp@rural.com", System.getProperty("DEPLOYED_ENVIRONMENT")+ ":Load vrpg Contacts Details",  emailMsg.toString());
                 }

                 tempFile.delete(); //delete tmp file from app server

                 ftp = new FtpProxyClient(ftpAttribs);
                 emailMsg.append(cu.deletefile(ftp,today,"vrpg_Contacts_")); //delete old files from NAS
                 ftp.cleanup();

            } catch(Exception e) {
                System.out.println("inside final exception:" + e.getMessage());
                if(br != null) br.close();              
                if(conn !=null) conn.close();
                emailMsg.append("Error:" + e.getMessage()+ "\n");
                Mailbox.sendMail("rpgsupp@rural.com", "rpgsupp@rural.com", System.getProperty("DEPLOYED_ENVIRONMENT")+ ":Load vrpg Contacts Details",  emailMsg.toString());
                log.logp(Level.INFO,CLASS_NAME,"loadData", "error getting vrpg contacts file from NAS:" + e.getMessage().toString());
            }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:04:00.177

这是您的问题，很可能是：

```
br = new BufferedReader(new InputStreamReader(fstream1,"CP1252")); 
```

通过假设它们使用 CP1252 编码，您正在将文件的字节转换为字符。

如果文件的实际编码*不是*CP1252，则字节将映射为错误的字符。（几乎每种编码都对“ASCII 字符”使用相同的值，因此您只会看到“特殊”字符的错误。）是什么让您决定使用 CP1252 进行解码，您确定这是正确的吗？

要解决您的问题，请找出这些文件使用的实际编码，并将其传递给 InputStreamReader 构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:18:20.350

与大型机通信时需要小心。这取决于您通过 FTP 传输文件的方式，因为它可能会在传输中自动转换为 ASCII。

通常，二进制传输将为您提供本机 EBCDIC，您需要将其转换为 ASCII。如果您的文件包含二进制数字（例如 COMP3），您可能不想转换流中的数据。

US EBCDIC 代码页通常为 Cp1047，这是将字符串转换为 ASCII 的代码示例。您可以将任何代码页文本（美国的“Cp1047”）传递给您的文件的例程：

```
 // Convert Binary EBCDIC Data to String
public static String toASCII(byte[] arr, int offset, int len, String codepage){
    try {
        return new String(arr, offset, len, codepage);
    } catch (UnsupportedEncodingException e) {
        System.out.println("Error Occurred translating EBCDIC data to String");
        e.printStackTrace();
        return null;
    }
} 
```

# git - 关于 git-new-workdir 分支同步

> ID：11244162
> 
> 赞同：2
> 
> 时间：2012-06-28T12:00:29.410
> 
> 标签：git, git-checkout, git-worktree

我正在使用 git-new-workdir 脚本来管理我的分支，但分支显然不会自动同步。我有一个包含三个分支（master、branchA 和 branchB）的仓库。首先，我克隆了 repo：

```
git clone git://myreposite.com/project.git 
```

其次，我使用 git-new-workdir 来拆分我的分支

```
git-new-workdir project branchA branchA
git-new-workdir project branchB branchB 
```

现在我有项目、分支A 和分支B 目录。假设其他人也从其他计算机克隆了我的 repo 并签出了 branchA，修改了文件，提交并发布了`git push --all`.

因此，现在我必须更新我的分支 A。所以，我从主分支目录发出一个`git pull --all`，我希望我的所有分支都会立即更新，但他们没有。当检查 branchA 目录上的修改文件时，没有任何变化。

做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:04:39.140

这不是它的工作原理。虽然您有多个工作目录，但在更新签出分支时它们不会自动更新。您必须自己手动完成。

# orientation - 使用 PdfSharp 时页面方向发生变化

> ID：11244166
> 
> 赞同：2
> 
> 时间：2012-06-28T12:00:40.527
> 
> 标签：orientation, scaling, pdfsharp

我正在使用 PdfSharp 裁剪 PDF 文档，使用以下简化示例：

```
 using (PdfDocument input = PdfReader.Open(filename, PdfDocumentOpenMode.Modify)) {
            int page_id = 0;
            while (page_id < input.PageCount) {
                PdfPage page = input.Pages[page_id];
                input.Pages.RemoveAt(page_id);

                PdfPage new_page = (PdfPage)page.Clone();
                input.Pages.Insert(page_id++, new_page);
            }

            input.Save(filename);
        } 
```

在 800*400 pdf 文件上运行此代码会生成 400*800 pdf 文件；也就是说，页面方向搞砸了，生成的 pdf 的尺寸与原始的尺寸不同

你知道我做错了什么吗？理想情况下，我提供的代码应该生成完全相同的文档......

谢谢！

**注意**：两次运行相同的代码会恢复原始方向。

# android - 应用程序首次升级 sqlite 数据库时崩溃

> ID：11244167
> 
> 赞同：5
> 
> 时间：2012-06-28T12:00:40.933
> 
> 标签：android, sqlite, crash, upgrade

第一次更新 sqlite 数据库时，我的应用程序遇到了崩溃。重新加载应用程序，从那时起它就可以正常工作了。我猜这与 onUpgrade 函数有关。我似乎无法找到问题所在，非常感谢任何建议。提前致谢。

数据库助手：

```
public class DatabaseHelper extends SQLiteOpenHelper {

    private static String DB_PATH = "/data/data/jp.atomicideas.ne/databases/";
    private static String DB_NAME = "dataset";
    public static final int DB_VERSION = 2;
    private SQLiteDatabase myDataBase;
    private final Context myContext;
    public static final String EXPRESSION_TABLE = "expression";

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access
     * the assets and resources.
     * 
     * @param context
    */
    public DatabaseHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
        this.myContext = context;
    }

    /**
     * Creates an empty database on the system and rewrites with database from app
     * @throws IOException
    */
    public void createDataBase() throws IOException {
        boolean dbExist = checkDataBase();  
        // if the database already exists, do nothing
        if(dbExist){
            Log.v("DB Exists", "db exists");
            // by calling this method here, onUpgrade will be called on a writeable db, if version number is bumped
            this.getWritableDatabase();
        } 
        dbExist = checkDataBase();
        // if the database doesn't exist, copy the application's database to be used
        if(!dbExist) {
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    /**
     * Check if the database already exists to avoid re-copying the file
     * @return true only if it exists, falls if it doesnt
    */
    private boolean checkDataBase() {
        SQLiteDatabase checkDB = null;

        try {
            String mypath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(mypath, null, SQLiteDatabase.OPEN_READONLY);
        } catch(SQLiteException e) {
            // database does not exist yet
        }

        if(checkDB != null) {
            checkDB.close();
        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies database from the local assets folder to the system folder
     * @throws IOException
    */
    private void copyDataBase() throws IOException {

        // Open the app database file as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the empty temporary database to be replaced
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty database file as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // Transfer bytes from the input file to the output file
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException {

        // Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }

    @Override
    public synchronized void close() {
        if(myDataBase != null)
            myDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        Toast.makeText(myContext, "onUpgrade called!", Toast.LENGTH_LONG).show();

        if (oldVersion < newVersion) {
            Log.v("Database Upgrade", "Database version higher, upgrading");
            myContext.deleteDatabase(DB_NAME);                          
        }
    }

} 
```

这是 LogCat 输出：

```
06-28 20:52:07.638: V/DB Exists(26580): db exists
06-28 20:52:07.658: V/Database Upgrade(26580): Database version higher, upgrading
06-28 20:52:07.658: I/Database(26580): sqlite returned: error code = 1802, msg = statement aborts at 3: [PRAGMA user_version = 2] 
06-28 20:52:07.658: E/Database(26580): Failure 10 (disk I/O error) on 0x33a3f0 when executing 'PRAGMA user_version = 2'
06-28 20:52:07.658: I/Database(26580): sqlite returned: error code = 1, msg = statement aborts at 2: [ROLLBACK;] cannot rollback - no transaction is active
06-28 20:52:07.658: E/Database(26580): Failure 1 (cannot rollback - no transaction is active) on 0x33a3f0 when executing 'ROLLBACK;'
06-28 20:52:07.658: D/Database(26580): exception during rollback, maybe the DB previously performed an auto-rollback
06-28 20:52:07.668: D/AndroidRuntime(26580): Shutting down VM
06-28 20:52:07.668: W/dalvikvm(26580): threadid=1: thread exiting with uncaught exception (group=0x2aac8578) 
```

和

```
06-28 20:52:07.678: E/AndroidRuntime(26580): Caused by: android.database.sqlite.SQLiteDiskIOException: disk I/O error: PRAGMA user_version = 2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T12:52:35.460

您不需要删除数据库，只需使用您已经定义的方法（`copyDataBase`）复制它，如下所示：

```
@Override  
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {  
    Toast.makeText(myContext, "onUpgrade called!", Toast.LENGTH_LONG).show();  
    if (oldVersion < newVersion) {  
        Log.v("Database Upgrade", "Database version higher, upgrading");  
        try { 
            copyDataBase(); 
        } catch (IOException e) { 
            throw new Error("Error upgrading database"); 
        } 
    } 
} 
```

# c - 从系统发送到 Unix 的命令中的转义字符

> ID：11244168
> 
> 赞同：1
> 
> 时间：2012-06-28T12:00:41.290
> 
> 标签：c, unix, character-encoding, escaping

您如何将以下行从基于 C 的系统转义到 Unix 命令行，以便 Unix 使用该行：

```
tr "\304\305\326" "\134\135\136" </stx/users/n/tmp/tmpfile1.tmp>/stx/users/n/tmp/tmpfile2.tmp 
```

最明显的是：

```
build("|tr \"\\304\\305\\326\" \"\\134\\135\\136\", "<", tmp1, ">", tmp2") 
```

但是在运行时，它会在 Unix 中给出一个未找到文件的错误。当多余的 \" 被删除时，它写入文件OK，但问题是字符串替换不起作用。使用上面的行，字符被替换OK。

撇号不能用于八进制字符，因为这样系统会将它们作为实际字符传递，例如。**Ö**而不是**\326**

函数“build”是正在使用的基于 C 的系统的函数。基本上是一个字符串生成器。管道用于使命令在 Unix 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:45:28.953

我不知道您构建函数实际上应该做什么，但也请记住您还必须转义空白字符。

# jquery - Ajax 中的 Rails“引导加载按钮”

> ID：11244180
> 
> 赞同：0
> 
> 时间：2012-06-28T12:01:11.233
> 
> 标签：jquery, ruby-on-rails, ajax, button, twitter-bootstrap

我有一个用户列表，我希望管理员通过一个按钮向这些用户发送密码。所以我看到了引导按钮 javascript 插件，我使用了加载插件。

**这是 index.html**

```
<table>
<% @users.each do |user| %>

<td>
 <dl>
  <dt><%= user.name %></dt>
 </dl>
</td>

<td><%= link_to 'show', admin_user_path(user.id) %></td>
<td><%= button_to 'Send password', send_mail_path(user.id), remote: true, class: "btn btn-primary", :form => {:"data-loading-text" => "wait ..."}   %></td>

<% end %>
</table> 
```

以这个 html 结尾：

```
<table>

<tbody>
 <td>
  <dl><dt>Jonh</dt></dl>
 </td>

 <td><form method="post" data-remote="true" data-loading-text="attendi ..." class="button_to" action="/admin/users/send_mail/26">
   <div><input type="submit" value="send password" class="btn btn-primary">
     <input type="hidden" value="bLGRJ1j9Hv75PsN4fuma0NlmYwAbS//1l884ShOotcw=" name="authenticity_token"></div>
   </form></td> 
```

在 admin assets/javascript/admin/users 我有**index.js.erb**

```
$('.btn').button();

$(document).ready(function(){
  $('.btn').click(function() {
    $(this).button('loading');
  });
}); 
```

但是加载动画不起作用。有什么建议吗？我对 rails 和 jquery 都很陌生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:28:55.937

你用的是什么版本的 Rails？如果您使用的是 Rails > 3.2（带有资产管道），我鼓励您检查该文件`assets/javascript/admin/users`是否实际加载到您的主 javascript 文件和页面中。

在浏览器中打开页面，检查源代码并查看您创建的 JavaScript 代码是否已加载/链接到页面的标题部分。另外，我不确定您为什么使用`js.erb`扩展程序。

您可以简单地使用`assets/javascript/admin/users/index.js`. 或者更简单，在不需要时避免过多的子文件夹。创建`/assets/javascript/admin.js`并确保`/assets/javascripts/application.js`文件包含它。

关于视图，如下代码

```
<td><%= button_to 'Send password', send_mail_path(user.id), remote: true, class: "btn btn-primary", :form => {:"data-loading-text" => "wait ..."}   %></td> 
```

可以简化为

```
<td><%= link_to 'Send password', send_mail_path(user.id), remote: true, class: "btn btn-primary", data: { "loading-text" => "wait ..." } %></td> 
```

无需使用`button_to`或表格。

# c - printf 忽略单个反斜杠 '\'

> ID：11244184
> 
> 赞同：4
> 
> 时间：2012-06-28T12:01:39.123
> 
> 标签：c, string, printf

我有这个代码：

```
int main(int argc, char * argv[])
{
int i;
printf("%d%s",argc,argv[1]);
return 0;
} 
```

如果我以 .I 运行此代码，`a.out a\=b=`我正在使用`C-shell`

它的输出是“ `a=b=`”有什么办法可以将它的输出更改为“ `a\=b=`”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T12:03:06.660

**已编辑问题的更新**：

将命令行参数括在引号中：

```
 $ a.out "a\=b=" 
```

引号会阻止 shell 以任何方式解释命令行参数，所以只有这个字符串被传递给你的程序。我使用`csh`/ `bash`.. 两者都使用。

`\`或者，您可以用另一个“转义”并跳过双引号：

```
 $ a.out a\\=b= 
```

* * *

**先前对原始问题的回答**：

是的，使用两个`\`：

```
char a[]="a\\=b="; 
```

输出：

```
a\=b= 
```

**说明**：

`\`是用于表示特殊字符序列的转义字符，例如`\t`表示制表符。如果你想实际打印`\t`，你需要`\`用另一个“转义”它`\`。请参阅此示例和输出：

```
printf("\t-->Hi\n");    /* print regular tab via \t                        */
printf("\\t-->Hi\n");   /* want to print "\t", not tab  ..so we use two \\ */ 
```

这导致：

```
 -->Hi
\t-->Hi 
```

这*不是*函数所独有的`printf()`，也不是 C 语言所独有的，可能语言使用反斜杠来指示字符串中的“转义序列”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T12:06:28.110

`printf()`没有忽略您的单个反斜杠，这是解析 C 字符串的方式。反斜杠是一个*转义*字符，用于指示一些不容易在字符串中输入的字符，例如换行符 ( `\n`) 或嵌入的引号 ( `\"`)。因此，要包含反斜杠，您必须包含*两个*反斜杠 ( `\\`)。这适用于所有字符串，与`printf()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:07:18.343

是 C 中字符串中的`\`转义字符。您可以使用它来访问特殊字符，例如换行符 ( `\n`)。如果您想以`\`字符的形式访问 ，您也需要对其进行转义：`\\`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-31T04:15:59.907

\\ 是在 C 中读作 \

\ 是 C 中字符或字符串中唯一用于表示其他字符或字符串的字符。这就是名称“转义”字符的含义。

因为它是以这种方式使用的，所以有必要将反斜杠本身包含在这种序列可指示的符号之一中。

其他一些序列是： \n 新行 \t 制表符 \v 垂直制表符 \a alert bell sound

# c++ - 指针和引用棘手的代码

> ID：11244185
> 
> 赞同：0
> 
> 时间：2012-06-28T12:01:39.893
> 
> 标签：c++, pointers, reference

我有这段简单的代码：

```
int a = 1, b = 2;
int* c[] = {&a,&b};
int& d[] = {a,b};
int x = *c[0]+d[1]; 
```

如果以下工作

```
int &d = a; 
```

我不明白为什么第 3 行和第 4 行会产生错误。:-s

这对我来说真的没有意义:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:04:36.987

```
int& d[] = {a,b}; 
```

您不能创建引用数组。C++ 标准不允许它。为了允许它，必须重写整个类型机制。

```
int x = *c[0]+d[1]; 
```

给您一个错误，因为编译器无法确定 的类型`d`，因为在您声明的上一行存在编译错误`d`。

* * *

```
B b[2]; 
```

创建两个类型的对象，`B`因此调用`B()`两次。

```
b[1]=D(); 
```

创建一个 类型的对象`D`。为此它调用类本身及其基类的构造函数，从而导致调用`B()`和`D()`. 创建的对象存储在数组索引处`1`。然而，由于数组的类型是`B` ***[对象切片](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)***，因此对象的所有派生成员都被切片。本质上，`b[1]`现在的对象是类型`B`

```
b[1].print(); 
```

调用`print()`对象类型的方法`B`（*参见上面的解释为什么它是类型`B`*）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:19:31.277

对于第一部分，请参阅 Als 的回复。第二部分：

*   前两个构造函数用于数组的 2 个元素。
*   第三个 B 构造函数是 D 的基础
*   然后是一个 D 构造函数
*   然后 D 与 B 一起被销毁，因为它是一个临时对象
*   然后调用 B 的 print 方法，因为它不是虚拟的
*   然后数组中的两个 B 元素被销毁

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:13:47.517

问题 #1

```
int& d[] = {a,b}; 
```

你不能做一个引用数组。数组包含对象。实例、原语和指针都是对象。参考不是。

问题＃2，由于问题的变化而省略了答案。

# matlab - 将值分配给向量中的几个单元格

> ID：11244193
> 
> 赞同：2
> 
> 时间：2012-06-28T12:02:12.420
> 
> 标签：matlab

我有一个单元格数组和一个向量，我想将向量的每个坐标分配给同一位置的不同单元格。例如，向量中的 j 坐标变为 (j,1) 单元格中的 (k,l) 坐标。在伪 matlab 中，它看起来像这样：

myCell{:,1}(k,l)=myVector;

有没有不循环的好方法？（性能是一个问题。）

一个小例子：

```
 myCell=cell(2,4);
    myV=[1;2];
    %what I wish to change:
    for j=1:size(myV,1)
        myCell{j,1}(1,1)=myV(j)
    end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:11:09.853

根据 myVector 中的数据类型，您最终将使用以下两个命令之一。

mat2cell 或 num2cell

Matlab 中的帮助页面非常详细地介绍了调用函数的不同方法，以防万一您想对数据进行一些花哨的分组等。

mat2cell： http: [//www.mathworks.com/help/techdoc/ref/mat2cell.html](http://www.mathworks.com/help/techdoc/ref/mat2cell.html)

num2cell： http: [//www.mathworks.com/help/techdoc/ref/num2cell.html](http://www.mathworks.com/help/techdoc/ref/num2cell.html)

示例代码：

```
myCell=cell(2,4);
myV=[1;2];
% %what I wish to change:
% for j=1:size(myV,1)
%     myCell{j,1}(1,1)=myV(j)
% end
myCell(:,1) = num2cell(myV); 
```

# actionscript-3 - 检测两个物体碰撞的点

> ID：11244195
> 
> 赞同：0
> 
> 时间：2012-06-28T12:02:19.720
> 
> 标签：actionscript-3, flash, flash-cs5

我完全是 Flash 和 Actionscript 的初学者，如果我的问题很愚蠢，我很抱歉。我必须制作一个平台游戏——我打算写一些类似冰塔的东西——我的角色正在从一个平台跳到另一个平台以到达某物的塔顶。这是我的问题 - 我想让角色只从顶部跳到平台上，但如果他从底部或侧面与平台碰撞，我希望他弹跳（我希望你明白我的意思想要的意思）。

所以，要做这样的事情，我需要能够检测出这两个对象到底在哪里发生碰撞——我想到的唯一解决方案是将每个平台的坐标保存在某个数组中，并将它们与角色的位置进行比较他跳了起来，但这似乎不太对劲。有没有更好的方法来解决这个问题？

我将不胜感激任何建议。

PS。对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:35:41.790

您可以使用[flixel](http://flashpunk.net/)或[flashpunk](http://flixel.org/)等游戏库。他们都很棒。

本质上，您将需要遍历您的角色可以碰撞的所有对象。您可以使用 .hitTestObject() 粗略确定您的角色是否与任何对象发生碰撞。此后，您可以获取角色在舞台上的坐标和尺寸，并将它们与被击对象的坐标和尺寸进行比较以确定方向。

所以在伪代码中

```
for each (var platform:DisplayObject in platforms) {
    if (character.hitTestObject(platform)) {
        if (collideFromBottom || collideFromSide) { 
            // allow movement 
        }
        if (collideFromTop) { 
            // stop downward velocity 
        }
        break; // might as well, as you have detected the collision
    }
} 
```

CollideFromBottom 将比较您角色的顶部与平台的底部。请记住，作为 Sprite，玩家和平台都具有 [x,y] 属性和 [width,height]，允许您确定坐标。

PS这个问题应该在[gamedev.stackexchange.com上问过](https://gamedev.stackexchange.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:10:26.813

我建议你使用像[Box2D](http://www.box2dflash.org/)这样的物理引擎（看例子），而不是从头开始创建一些基于 hitTest colsion 的游戏。
您遇到严重的代码/设计问题并将项目搁置一旁的可能性很大。

互联网上有很多很好的教程，这里有一个很好的资源 - 使用 Box2d 创建横向滚动游戏：

1.  [第1部分](http://chrismweb.com/2011/05/04/using-box2d-to-create-a-side-scrolling-game-part-1-intro-and-setting-up-box2d/)
2.  [第2部分](http://chrismweb.com/2011/06/01/using-box2d-to-create-a-side-scrolling-game-part-2-adding-keyboard-input-and-an-enemy/)

# android - 方法 public void onScroll (AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount)'

> ID：11244198
> 
> 赞同：0
> 
> 时间：2012-06-28T12:02:23.110
> 
> 标签：android

实际上我需要在我的应用程序中使用 onscrolllistener 但我无法理解方法 public void onScroll (AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) 中的参数指示什么，请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:39:51.660

请查看[文档](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html#onScroll%28android.widget.AbsListView,%20int,%20int,%20int%29)，您可以轻松了解所有这些参数。

即使在这里我用我的语言解释。

```
view : View for which we implemented this listener

firstVisibleItem : Index of very first visible row/cell at a time

visibleItemCount : Total number of visible rows/cells

totalItemCount : Total number of items in the list adapter 
```

# iphone - 为什么不同文件夹中的类无法访问我的属性

> ID：11244207
> 
> 赞同：0
> 
> 时间：2012-06-28T12:02:52.630
> 
> 标签：iphone, objective-c, xcode4.2

我注意到一些非常奇怪的事情。

我有一个带有属性的 A 类：

```
 @interface ClassA
 @property (nonatomic, strong) NSString *test; 
```

和 .m 文件中的合成。

现在，如果我有如下的第二个 B 类：

```
 #import "ClassA.h"

 -(void) someMethod
 {
      ClassA *classA = [[ClassA alloc] init];
      classA.test = @"test";
 } 
```

如果 2 个类文件在同一个文件夹中，这将正常工作。

但是，如果我将文件移动到单独的子文件夹，它将不再起作用。我得到的错误是该属性不存在。同样，'intellisense' 将不再显示测试属性。

如果我在 xcode 中创建文件夹组，但将实际文件留在同一个物理文件夹中，它确实有效。

这里发生了什么？

这不可能是包含路径问题，因为那时我什至无法实例化 ClassA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:07:37.243

已经尝试过 Xcode 菜单“product:clean”？

我会尝试从模拟器中删除您的应用程序，以及 Xcode:preferences:locations:derived data -> from finder delete that finder folder

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:11:19.647

`COMMAND+SHIFT+K`在 iOS 模拟器中尝试并重置内容和设置。

你试过@class ClassA吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:05:19.950

我解决了。我有一个包含的子项目，它使用了一个名称完全相同的类。啊啊啊……

显然在编译过程中没有错误，并且不清楚它将导入哪些文件。

# java - 在 Java/Android 中保存变量的值

> ID：11244211
> 
> 赞同：0
> 
> 时间：2012-06-28T12:02:58.513
> 
> 标签：java, android

> **可能重复：**
> [使数据在 android 中持久化](https://stackoverflow.com/questions/3310066/making-data-persistent-in-android)

**编辑：**

我正在构建一个基于简单计数器原理的 android 应用程序。

```
public class TasbeehActivity extends Activity {
/** Called when the activity is first created. */
int count;
ImageButton imButton;
TextView display;
static String ref = "Myfile";
static String key = "key";
SharedPreferences myPrefs;
boolean check = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    imButton = (ImageButton) findViewById(R.id.bCount);
    display = (TextView) findViewById(R.id.tvDisplay);
     myPrefs = getSharedPreferences(ref, 0);

     if(check){
         String dataReturned = myPrefs.getString(key, "0");
            count = Integer.parseInt(dataReturned);
            display.setText(""+count);
     }

    imButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Random rand = new Random();
            display.setTextColor(Color.rgb(rand.nextInt(255),
                    rand.nextInt(255), rand.nextInt(255)));
            count++;
            display.setText("" + count);
        }
    });

}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();

     String data = display.getText().toString(); SharedPreferences.Editor
     editor = myPrefs.edit(); editor.putString(key, data);
     editor.commit();
     check = true;

}} 
```

我想保存**count**的值，这样当我的应用程序在关闭后重新启动时，它应该在关闭应用程序之前具有**count的值。**此外，当我改变模拟器的方向，即从*纵向*到*横向*或反之亦然时，**计数**设置为 0。这两个问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:05:50.077

**1.**使用[sharedpreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)在应用程序关闭后重新启动时保存或检索**计数值**

**2.**当我改变模拟器的方向，即从纵向到横向或反之亦然时，看到android**计数**[中的句柄方向变化被设置为 0](http://developer.android.com/guide/topics/resources/runtime-changes.html)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:11:59.927

您应该使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)来保存您的变量，并覆盖[OnConfigurationChange](http://developer.android.com/reference/android/content/SharedPreferences.html#q=onconfigurationchanged)因为它可能正在调用您的 oncreate 方法（不要忘记`android:configChanges="orientation|keyboardHidden|screenSize"`在您的清单中添加）我希望这会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:36:49.760

试试这些......

1.  `android:configChanges="orientation"`, 这将防止您的 Activity 在方向更改时再次重新启动。

2.  使用 Bundle，但这仅适用于少量数据。将需要序列化和反序列化。

3.  您还可以使用`onRetainNonConfigurationInstance()`和`getLastNonConfigurationInstance()`来存储和检索数据。

有关详细信息，请参阅此链接：

[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)**

# java - 如何读取另一个应用程序的数据库

> ID：11244212
> 
> 赞同：3
> 
> 时间：2012-06-28T12:02:58.943
> 
> 标签：java, android, database, sqlite

我正在使用有根设备。我已经从我的电脑连接了 adb shell，我可以验证另一个数据库是否存在，我可以查询它的表。

但是，在我的 java 代码中，当我尝试打开数据库时出现错误

> android.database.sqlite.SQLiteException：无法打开数据库文件

我正在尝试像这样打开数据库：

```
SQLiteDatabase.openDatabase(PATH, null, SQLiteDatabase.OPEN_READONLY); 
```

路径类似于 /data/data/com.xxx.xxx/databases/xx.db

我应该像这样读取其他应用程序的数据库还是有其他方法？

更新：我还尝试按照此线程中的建议制作系统应用程序将[我的 apk 推送到 /system/app](https://stackoverflow.com/questions/2007024/push-my-apk-to-system-app)

我认为它可以工作，因为该应用程序无法像普通应用程序那样从应用程序管理器中卸载，所以我认为它是一个系统应用程序。但是我仍然无法访问数据库，尽管我确定路径和权限都可以。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T12:09:10.040

默认情况下，Android 操作系统不允许应用程序访问彼此的私人文件夹。为了能够读取另一个应用程序文件夹中的文件：

1）您需要使用相同的安装两个应用程序`user id`。将此添加到两个清单中：

```
android:sharedUserId="com.xx.xx" 
```

2) 如果其他应用程序是第 3 方应用程序，那么您唯一的选择是将您的应用程序安装为系统应用程序。为此，您需要一部有根电话，并且需要挂载该文`system`​​件夹。然后您需要将您的应用程序放入`/system/app/`文件夹并重新启动手机。它应该在引导过程中自动安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:09:01.197

我会假设数据库文件的权限设置为使您的应用程序无法访问。即使您的设备已植根，但这并不意味着您的应用程序以 root 身份运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:07:56.280

这是因为应用程序需要 root，并且需要更改您尝试访问的数据库的权限，以便您可以实际访问它。您需要做的是，以 root 身份更改数据库的权限，以便每个人都可以访问它，对数据库执行您想要的操作，关闭数据库并将权限更改回来。

这确实绕过了 android 的安全性，因此请自行承担风险。您可以在以下位置找到代码示例：

[http://rratmansky.wordpress.com/?p=259&preview=true](http://rratmansky.wordpress.com/?p=259&preview=true)

# php - htaccess - 将请求重定向到一个域上的默认页面到文件，而不要将来自另一个域的请求重定向

> ID：11244218
> 
> 赞同：0
> 
> 时间：2012-06-28T12:03:36.407
> 
> 标签：php, apache, .htaccess

我有一个我启动网站的场景。我最初启动了供贡献者访问的区域：sell.domain.com，同时我继续开发 www.domain.com。两个域将共享相同的基础文件。

我想请求 sell.domain.com 不显示基本站点并重定向到 sell.domain.com/file.php 这将是贡献者登录页面（隐藏仍在开发中的“前端”网站）。

我希望对 www.domain.com 的请求在没有重定向的情况下正常显示（DNS 当前指向 www.domain.com 的其他位置，因此我可以使用 hosts 文件访问该域进行开发）。

重定向时，我不希望每个页面请求（例如 sell.domain.com/otherpage.php）都重定向。只有根？（索引.php）

这是可以实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:41:51.293

尝试重定向规则

// .htaccess 文件

```
<IfModule mod_rewrite.c>
    RewriteEngine On    
    RewriteRule ^$ file.php [L] 
    RewriteCond %{REQUEST_FILENAME} !-f 

</IfModule> 
```

# java - Android：互联网可以在模拟器上运行，但不能在我的手机上运行

> ID：11244224
> 
> 赞同：1
> 
> 时间：2012-06-28T12:03:49.080
> 
> 标签：java, android, android-emulator

我正在制作一个应用程序，它可以读取网站的某个部分并将其发布到屏幕上。该应用程序目前在我的 android 模拟器中运行，但是当我将其传输到我的 Galaxy S2 时，它似乎根本无法访问该网站。

```
package com.example.beam;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.Scanner;

import org.apache.http.HttpResponse;
import org.apache.http.client.*;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.apache.http.util.EntityUtils;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

String current = null;
Button check;
TextView text;
TextView url;
String[] lines = new String[12];

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    check = (Button) findViewById(R.id.checkstatus);
    text = (TextView) findViewById(R.id.textView1);
    url = (TextView) findViewById(R.id.url);

    String[] lines = new String[12];

    check.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            // Attempt to the read the source from a website.
            String bodyHtml = "null";
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new       HttpGet("http://www.spring8.or.jp/ext/ja/status/text.html");
            ResponseHandler<String> resHandler = new BasicResponseHandler();

            try {
                bodyHtml = httpClient.execute(httpGet, resHandler);

            } catch (Exception e) {
                e.printStackTrace();
            }
            double current = 0;
            try{
            String derp = bodyHtml.substring(bodyHtml.lastIndexOf("mA") - 5, bodyHtml.lastIndexOf("mA"));
            current = Double.parseDouble(derp);
            }
            catch(Exception e){

            }
            url.setText(current + " mA");

        }
    });
} 
```

}

如果编码有点糟糕和混乱，我很抱歉，我对这一切都很陌生。我该如何解决这个问题？谢谢

另外，我很确定我已经在清单中正确设置了权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:44:38.637

试试这个....

保持 UI 在 UI 线程上工作和非 UI 在非 UI 线程上工作是一个很好的做法，但是**从 HONEYCOMB Android 版本的发布开始，这成为了一个法律**……这可能会导致错误。

因此，您可以执行以下操作....

1.  在单独的线程上做 Http，然后使用**Handler**将值放在 UI 上， Handler 保持创建它的线程的引用。

2.  您可以使用专为 android 设计的**AsyncTask在 UI 和非 UI 线程之间进行同步。**

笔记：

请检查 AndroidManifest 中的 Internet 权限，虽然我知道你已经这样做了，因为应用程序在模拟器上运行....但仍然..再次检查它没有害处。

# xslt - 如何根据元素数量创建唯一 id，例如 XSLT 中的数组？

> ID：11244225
> 
> 赞同：-1
> 
> 时间：2012-06-28T12:03:49.230
> 
> 标签：xslt, umbraco

我正在使用[这个递归菜单](http://our.umbraco.org/wiki/reference/xslt/recursive-menu-umbraco-45)，并做了一些改动。我在第一级 li 标签上想要的是一个具有唯一编号的 id。所以第一个的 id 是 id="mid0"，第二个是 id="mid1" 等等。如何才能做到这一点？

我是 XSLT 的新手，所以请原谅我问了一个可能很愚蠢的问题，但我已经尝试搜索它，但找不到我要找的东西。

```
<xsl:if test="count($currentPage/ancestor::root/* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']) &gt; '0'">
<xsl:for-each select="$currentPage/ancestor::root/* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']">
<li class="twocol">
<a href="{umbraco.library:NiceUrl(@id)}">
<xsl:if test="$currentPage/@id = current()/@id">
<xsl:attribute name="class">Selected</xsl:attribute>
</xsl:if>
<xsl:value-of select="@nodeName"/>
</a>
<xsl:if test="count(current()/* [@isDoc and string(umbracoNaviHide) != '1']) &gt; '0'">
<xsl:call-template name="submenu">
<xsl:with-param name="level" select="$level+1"/>
</xsl:call-template>
</xsl:if>
</li>
</xsl:for-each>
</xsl:if> 
```

具有类“twocol”的 li 是我需要 id 的地方，因此它在输出中最终如下所示：

```
<li id="mid0" class="twocol">
<li id="mid1" class="twocol"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:35:53.107

在 XSLT`for-each`块中，有一个很好的小函数被调用`position()`，它将为您提供与`for-each`语句匹配的项目的当前索引。结合条件属性标签（仅适用于 1 级项目），添加以下代码应该可以满足您的需求：

```
<xsl:for-each select="$currentPage/ancestor::root/* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']">
    <li class="twocol">

        <!-- NEW CODE -->
        <xsl:if test="$level = 1">
            <xsl:attribute name="id">mid<xsl:value-of select="position()-1" /></xsl:attribute>
        </xsl:if>
        <!-- / NEW CODE -->

        <a href="{umbraco.library:NiceUrl(@id)}">
            <xsl:if test="$currentPage/@id = current()/@id">
                <xsl:attribute name="class">Selected</xsl:attribute>
            </xsl:if> 
```

# php - PHP - 错误处理

> ID：11244229
> 
> 赞同：4
> 
> 时间：2012-06-28T12:04:10.420
> 
> 标签：php, error-handling

```
foreach ($scripts as $script) {    
    $grader = Grader::getInstance();

    $grader->setApplicantId($script['applicant_id'])
        ->setHandler($x)
        ->doGrading();

} 
```

平地机班（单身班）

```
 public function setHandler($x)
 {
     $this->validateHandler($x);
 }

 public function validateHandler($x)
 {
     $this->handleError("Invalid Handler");

     return $this;
 }

 public function handleError($message)
 {

 } 
```

我如何编写handleError函数以使其停止当前执行，这意味着永远不会到达validateHandler函数中的return $this，将错误消息打印到屏幕上，但是for循环不会停止运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:08:25.860

```
foreach ($scripts as $script) {    
    try {
        $grader = Grader::getInstance();

        $grader->setApplicantId($script['applicant_id'])
            ->setHandler($x)
            ->doGrading();
    }
    catch ($e) {
        echo 'Grading failed for applicant '.$script['applicant_id'];
    }
}

...

public function handleError($message)
{
    throw new Exception('Unable to fruzz the bubar');
} 
```

# c# - 如果为空，如何将 maskedtextbox 值转换为 int？

> ID：11244235
> 
> 赞同：3
> 
> 时间：2012-06-28T12:04:43.600
> 
> 标签：c#

我正在构建这个 C# windows 应用程序。在某个表单上，我使用 maskedtextbox 输入最多 3 个数字，然后将其转换为 int，因为我必须使用插入查询将所有这些数据发送到数据库，但问题是这些 maskedtextbox 在留空时会出错：

```
int scd_user_comm = Convert.ToInt32(maskedTextBox1.Text); 
```

错误是：

> 输入字符串的格式不正确。

数据库中对应的字段允许为空，所以如果留空，一定不会报错。有人可以帮忙吗？

一个问题：：我可以使用文本框或掩码文本框来确保用户只输入数字值 b/w 0 到 100？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:07:07.433

你可以试试 Int32.TryParse() 方法

```
int scd_user_comm;
if(Int32.TryParse(maskedTextBox1.Text, out scd_user_comm) == false)
     scd_user_comm = 0; 
```

这将为您提供使用整数变量和 maschedTextBox 所需的所有灵活性-

强制您的 maskTextBox 只接受设置的数值

```
 maskTextBox1.Mask = "999";
   maskTextBox1.TextMaskFormat = MaskFormat.ExludePromptAndLiterals; 
```

但是，这不足以确保输入的数字介于 0 和 100 之间。要获得此结果，您需要使用 Validating 事件并在超出限制时拒绝输入

```
 private void maskedTextBox1_Validating(object sender, CancelEventArgs e)
    {
        int num;
        if (Int32.TryParse(maskedTextBox1.Text, out num) == true) 
        {
            if (num < 0 || num > 100)
            {
                MessageBox.Show("Insert number between 0 and 100");
                e.Cancel = true;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:06:57.547

您可以改用 TryParse：

```
int scd_user_comm;
if(!Int32.TryParse(maskedTextBox1.Text, out scd_user_comm))
{
     // Do something to notify the user that the text isn't a number.
} 
```

# c++ - 标头 Apple 磁盘映像

> ID：11244239
> 
> 赞同：1
> 
> 时间：2012-06-28T12:05:00.067
> 
> 标签：c++, macos, dmg

我尝试获取 dmg 文件的标题。我看到了这个对我有很大帮助[的链接](http://en.wikipedia.org/wiki/Apple_Disk_Image) 。所以我制作了一个 c++ 程序来获取所有这些东西。

这里是 ：

```
struct Header
{
int img;
char tag[4];
short size;
short   version;
int format;
int flag;
int num_block;
int offset;
int length;
int offset_comment;
int length_comment;
int offset_creator;
int length_creator;
char space[16];
};

void read_header(const char *path)
{
 Header head;

 FILE *file =  fopen(path, "rb");

 fread(&head, 1, sizeof(Header), file);

 printf(" size short = %d\n", sizeof( short ));
 printf(" size int = %d\n", sizeof( int ));
 printf(" size struct = %d\n", sizeof( Header ));

 printf("img %d\n", head.img);
 printf("tag %s\n", head.tag);  
 printf("size %d\n", head.size);
 printf("version %d\n", head.version);
 printf("format %d\n", head.format);
 printf("flag %d\n", head.flag);
 printf("num_block %d\n", head.num_block);
 printf("offset %d\n", head.offset);
 printf("length %d\n", head.length);
 printf("offset_comment %d\n", head.offset_comment);
 printf("length_comment %d\n", head.length_comment);
 printf("offset_creator %d\n", head.offset_creator);
 printf("length_creator %d\n", head.length_creator);

 } 
```

我明白了：

```
size short = 2
size int = 4
size struct = 64
img 152133
tag 
size 0
version 0
format 0
flag 0
num_block 0
offset 0
length 0
offset_comment 0
length_comment 0
offset_creator 0
length_creator 0 
```

我不知道为什么我的所有值都是 null 除了第一个。我的 dmg 文件很好，我可以打开它。有人知道为什么我得到空值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:27:03.697

首先，当您遇到此类错误时，最好实际查看原始形式的数据，以确定问题是出在您的代码上，还是出在它试图解释的数据上。

在这种情况下，您的问题是文件格式不同 - 当您使用磁盘实用程序创建 .dmg 文件时，它看起来与维基百科页面中指定的格式一点也不像。

换句话说 - 你的代码很好，问题在于它正在处理的数据。

It turns out that the 'header' for a .dmg file is actually stored at the end of the file - tools such as [dmg2img - http://vu1tur.eu.org/tools/](http://vu1tur.eu.org/tools/) can be used to parse the data appropriately; plus it contains a better definition of the header than the one you're using

# javascript - 如何在Raphael js中获得圆圈内的完整图像

> ID：11244241
> 
> 赞同：0
> 
> 时间：2012-06-28T12:05:04.070
> 
> 标签：javascript, jquery, css, raphael

我能够在圆圈内填充图像。但问题是图像在圆圈内放大，我希望图像缩小或适合圆圈。

```
<div class="disp"></div> 
```

JavaScript

```
 var r = Raphael("disp");

  var cir=r.circle(100, 100,33).attr({fill:"url(image.jpg)"});
// image get zoomed, how to make image fit into circle or less zoomed 
```

请帮我！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T19:31:44.127

[这是一个](https://stackoverflow.com/questions/17162132/raphael-filling-background-with-image-fillfit/18320938#18320938 "这是一个解决方案")可以直接放入代码中的解决方案，假设您使用的是 jQuery 和 Raphael

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:56:14.127

你需要做一些数学。不要使用`attr(fill)`- 创建一个`image`-object 并将其放入您的圈子中。
[这](http://raphaeljs.com/image-rotation.html)是这种行为的一个很好的例子。

顺便说一句，你写了**class** ="disp" 并且`var r = Raphael("disp");`不起作用 - 这个函数等待**id**。

# objective-c - 像 Apple 的 iPad Mail App 一样显示 UIBarButtonItem

> ID：11244244
> 
> 赞同：0
> 
> 时间：2012-06-28T12:05:29.477
> 
> 标签：objective-c

Apple 的 iPad**邮件**应用程序有几个图标*嵌入*在拆分视图控制器的详细视图的**navigationItem的****setRightBarButtonItems**区域中：

 **![在此处输入图像描述](../Images/583b43fe141dcd3e8db83e69bc4679b2.png)

我怎样才能像这样将图标添加到 navigationItem 栏（我已经有了图标）。

我的问题是 UIBarButtonItem 类引用似乎没有适当的 UIBarButtonItemStyle 允许按钮周围没有边框。我尝试通过 initWithCustomView 配置 UIBarButtonItem 但点击按钮不起作用。

在此先感谢您的任何建议

干杯

编辑：我可以使用 UIBarButtonItemStylePlain 但它看起来不像苹果按钮那样“嵌入”，这是我所追求的。

![在此处输入图像描述](../Images/6c65e7e59aa5b9b826b3c43a1181e1f5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T23:31:02.503

我已经解决了，可以产生以下结果：

![在此处输入图像描述](../Images/444fc4057ca03f1b671e31b998c4bb3c.png)

这是我使用的代码。它可以进行优化，但是出于演示目的，它很好且重复：

```
- (void)setupNavigationItemButtons {

float buttonWidth = 60;
float buttonHeight = 40;

UIImage *imageA = [UIImage imageNamed:@"212-action2.png"]; 
UIImage *imageB = [UIImage imageNamed:@"111-user.png"];
UIImage *imageC = [UIImage imageNamed:@"122-stats.png"];

UIButton *buttonA = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, buttonWidth, buttonHeight)];
UIButton *buttonB = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, buttonWidth, buttonHeight)];
UIButton *buttonC = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, buttonWidth, buttonHeight)];

[buttonA addTarget:self action:@selector(doSomething:)      forControlEvents:UIControlEventTouchUpInside];
[buttonB addTarget:self action:@selector(doSomethingElse:)  forControlEvents:UIControlEventTouchUpInside];
[buttonC addTarget:self action:@selector(doSomethingRandom:)forControlEvents:UIControlEventTouchUpInside];

[buttonA setImage:imageA forState:UIControlStateNormal];
[buttonB setImage:imageB forState:UIControlStateNormal];
[buttonC setImage:imageC forState:UIControlStateNormal];

UIBarButtonItem *buttonItemA = [[UIBarButtonItem alloc] initWithCustomView:buttonA];
UIBarButtonItem *buttonItemB = [[UIBarButtonItem alloc] initWithCustomView:buttonB];
UIBarButtonItem *buttonItemC = [[UIBarButtonItem alloc] initWithCustomView:buttonC];

[self.navigationItem setRightBarButtonItems:[NSArray arrayWithObjects:buttonItemA, buttonItemB, buttonItemC,nil]]; 
```

}**

# php - OpenCart 订阅模式（x 个月）

> ID：11244247
> 
> 赞同：1
> 
> 时间：2012-06-28T12:05:41.677
> 
> 标签：php, opencart, subscription

我正在使用 OpenCart 建立一个电子商务网站，并且我想提供订阅服务。特别是 3/6/12 个月的订阅。我对定期计费不感兴趣（我知道有 PayPal 和 Authorize.net 的模块）。我希望用户提前支付一次。从配置的角度来看，这是否会转化为 3 个伪产品？我想这是可行的，到目前为止，仅使用产品配置。3 种产品，每种都有一个价格。

棘手的部分来了。对于用户支付的每个月，他们可以在他们的“计费周期”内订购产品，每月只有一次。因此，如果用户在 23/5 支付 3 个月的订阅费用：

*   他可以在23/5-22/6期间获得一件产品，
*   一个在 23/6-22/7，和
*   23/7-22/8 之一

用户每月不能订购超过一种产品，并且在 22/8 之后他也不能获得任何产品，除非他续订订阅。此外，如果我能有一个 cron 工作，检查用户是否在当月使用了他的订阅，并发送“嘿，获取本月的产品”类型的提醒电子邮件，那就太棒了。

这是我的第一个 OpenCart 项目，我浏览了文档并在 Google 上搜索了很多，我玩过本地安装，我正在尝试在不修改核心代码的情况下弄清楚我的要求是否可行，我想避免这种情况。但是，如果没有其他办法，我知道 OpenCart 是一个 MVC(+L(anguage)) 框架，但是我还没有找到任何关于如何自定义其功能的可靠文档，只有针对特定要求的一些片段。

如果可以的话，我想写下我的想法，如果这听起来不错，请告知：

*   我想再添加一个实体（对象/模型）来存储订阅、订阅所属的用户、开始和结束日期以及它是否已被使用。基本上，订阅是一个正常的订单，我希望它像一个一样存储，我只需要保留更多的字段。正如我所说，我需要运行两项检查：
*   用户是否使用了当月的订阅？为此，我正在考虑有一个标志“isUsed”字段，每次用户到达他的计费日期时，它可以通过 cron 作业重置。（在我们的示例中为 23/6、23/7）。或者，我可以添加 3 个条目，一个用于每个计费周期并相应地更新它们。
*   订阅是否已过期？我可以检查订阅的到期日期。

我不知道如何在结帐期间插入此功能，或如何开始实现此功能。

我浏览了论坛并大量搜索，但我还没有找到答案。我是一位经验丰富的 Grails/Java EE 开发人员，所以我很有技术含量，以防这篇文章太技术化:-)

以上听起来可行吗，我在正确的轨道上吗？

干杯，
伊拉克利斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T21:50:34.427

这个功能远远超出了 Opencart 的构建目标，但如果你对 PHP/CodeIgniter 有一定的了解，那么你应该能够完成大部分/所有的 mod。了解 SQL 也很不错，但如果您还不了解的话，学习起来也很快。

我会说你的模组分为两部分，每部分都有自己的难度。

> 我正在使用 OpenCart 建立一个电子商务网站，并且我想提供订阅服务。特别是 3/6/12 个月的订阅。我对定期计费不感兴趣（我知道有 PayPal 和 Authorize.net 的模块）。我希望用户提前支付一次。从配置的角度来看，这是否会转化为 3 个伪产品？我想这是可行的，到目前为止，仅使用产品配置。3 种产品，每种都有一个价格。
> 
> 棘手的部分来了。对于用户支付的每个月，他们可以在他们的“计费周期”内订购产品，每月只有一次。因此，如果用户在 23/5 支付 3 个月的订阅费用：
> 
> ```
> he can get one product in the period 23/5-22/6,
> one in 23/6-22/7, and
> one in 23/7-22/8 
> ```

我想我会为此做的是为每个订阅长度添加一个产品，并且每个产品都会向他们发放适当的帐户信用，并让这个信用达到每月购买一个产品的订阅时间的完美金额。

为此，我建议在文件 catalog>model>checkout>order.php（或您选择的任何模型）中添加一个函数将资金添加到数据库中的 customer_transaction 字段中，然后调用它并在 catalog>controller>checkout 中添加数据>成功.php。

我认为验证客户是否购买了适当的订阅产品并验证该购买尚未获得信用是很明智的。

为确保他们每月只获得 1 件产品，您需要在 catalog>controller>checkout>checkout.php 的开头编写一个脚本，以便在他们过于频繁地尝试获得产品时将他们重定向到错误消息。

> 用户每月不能订购超过一种产品，并且在 22/8 之后他也不能获得任何产品，除非他续订订阅。此外，如果我能有一个 cron 工作，检查用户是否在当月使用了他的订阅，并发送“嘿，获取本月的产品”类型的提醒电子邮件，那就太棒了。

我什至不知道从哪里开始，但如果你愿意付钱，你可以发帖寻求帮助，并可能以优惠的价格添加这个功能。

> 这是我的第一个 OpenCart 项目，我浏览了文档并在 Google 上搜索了很多，我玩过本地安装，我正在尝试在不修改核心代码的情况下弄清楚我的要求是否可行，我想避免这种情况。但是，如果没有其他办法，我知道 OpenCart 是一个 MVC(+L(anguage)) 框架，但是我还没有找到任何关于如何自定义其功能的可靠文档，只有针对特定要求的一些片段。

同样，这超出了 Opencart 的构建目标，需要进行一些修改。至于有关如何使用 Opencart 脚本以及如何自定义它的文档，我也没有找到任何文档。在过去的 2 个月里，要了解我所掌握的知识对我来说是相当困难的，但如果你的问题很简短，你通常可以在需要时让人们一路帮助你。

> 如果可以的话，我想写下我的想法，如果这听起来不错，请告知：
> 
> ```
> I would like to add one more entity (object/model) for storing the subscription, the user to which it belongs, start and end date and 
> ```
> 
> 是否被利用。基本上，订阅是一个正常的订单，我希望它像一个一样存储，我只需要保留更多的字段。

我会将这些添加为属性，您可以在网站目录>属性、目录>属性组和目录>产品后端的属性选项卡中的管理中执行此操作。

> 正如我所说，我需要运行两项检查：用户是否使用了当月的订阅？为此，我正在考虑有一个标志“isUsed”字段，每次用户到达他的计费日期时，它可以通过 cron 作业重置。（在我们的示例中为 23/6、23/7）。或者，我可以添加 3 个条目，一个用于每个计费周期并相应地更新它们。订阅是否已过期？我可以检查订阅的到期日期。

我不知道如何做这个 cron 工作，但如果你能弄清楚，你可以在数据库中搜索属性名称和值，然后如果值在你的范围内，则应用你的 cron 工作。

希望这对您的期望有所帮助！

**更新**

要将数据插入数据库，您可以复制 admin/model/sale/customer.php 中的 addTransaction () 函数之类的内容

```
public function addTransaction($customer_id, $description = '', $amount = '', $order_id = 0) {
    $customer_info = $this->getCustomer($customer_id);

    if ($customer_info) { 
      $this->db->query("INSERT INTO " . DB_PREFIX . "customer_transaction
              SET customer_id = '" . (int)$customer_id . "',
              order_id = '" . (int)$order_id . "',
              description = '" . $this->db->escape($description) . "',
              amount = '" . (float)$amount . "',
              date_added = NOW()");
} 
```

这在 admin/controller/sale/customer.php

```
$this->load->model('sale/customer');

if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->user->hasPermission('modify', 'sale/customer')) { 

  $this->model_sale_customer->addTransaction($this->request->get['customer_id'], 
  $this->request->post['description'], $this->request->post['amount']);

  $this->data['success'] = $this->language->get('text_success');
} else {
  $this->data['success'] = '';
} 
```

# javascript - 如何动态更改 javascript 在运行时生成的 html 的 css？

> ID：11244251
> 
> 赞同：0
> 
> 时间：2012-06-28T12:05:57.197
> 
> 标签：javascript, jquery, html, css

我有一些在运行时使用 javascript 以编程方式生成的 html。

我希望能够动态更改此 html 的 css 属性，例如

```
 $(".pointsbox").css("background-color","green"); 
```

但它似乎不起作用，因为在调用 css 更改时这些 html 元素不可用。

我很确定我以前已经设法做到这一点，但我忘记了该函数的名称。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:27:41.230

您尚未发布有关如何准确创建 HTML 元素的代码，但它可以像这样简单：

您可以通过将 HTML 传递给 jQuery 函数来创建 HTML 元素，对吗？

```
var new_element = $('<div>'); 
```

好吧，您可以像对待任何其他 jQuery 对象一样对待它，然后就地操作它的 CSS。

```
var new_element = $('<div>').css('background-color', 'green'); 
```

哎呀，您甚至可以在一次调用中链接*create*、*css 更改*和*DOM insert 。*

```
var new_element = $('<div>')
                      .css('background-color', 'green')
                      .appendTo('#container')
                      ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:44:30.063

您*可以*将事件处理程序绑定到[Mutation 事件](https://developer.mozilla.org/en/DOM/Mutation_events)- 特别是事件。但是，正如我链接的页面所述，建议您不要这样做，因为它对您的页面性能有严重的负面影响，并且跨浏览器支持不是特别好。`DOMNodeInserted`

 *另一种方法是使用自定义事件模拟您自己`DOMNodeInserted`的事件。本质上，您为文档上的自定义事件（例如 ）绑定一个处理程序`nodeinserted`，然后在您有动态修改页面结构的代码时触发该事件。代码可能如下所示：

```
$(document).on('nodeinserted', function() {
    $('.pointsbox').css('background-color', 'green');
});

function modifyPage() {
    // code to modify your page here
    $(document).trigger('nodeinserted');
} 
```

Note that, with this approach, you'll need to modify **all** functions that add elements to the page to trigger that `nodeinserted` custom event.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:10:37.150

我用这个。它确保 DOM 已加载。

```
$(document).ready(function(){
    //code here 
    $(".pointsbox").css("background-color","green");
}); 
```*

# moles - 在测试类中无法访问静态内部类的生成的痣类型

> ID：11244252
> 
> 赞同：1
> 
> 时间：2012-06-28T12:06:00.027
> 
> 标签：moles

我正在尝试访问内部静态类以覆盖其某些方法，以便我可以测试依赖于该类的类

从我读到的应该是可能的，但我显然不是理解一切，因为即使是一个简单的例子似乎也无法为内部静态类生成一个痣类型。

我在命名空间和程序集中有两个类

```
namespace SimpleClassToTest
{
    public class Class1
    {
        public string SayOla() { return Class2.ReturnMe("Ola"); }
    }
}

namespace SimpleClassToTest
{
    internal static class Class2
    {
        static public string ReturnMe(string m)
        {
            return m;
        }
    }
} 
```

在 AssemblyInfo.cs 我也有

```
[assembly: InternalsVisibleTo("SimpleClassToTest")]
[assembly: InternalsVisibleTo("SimpleClassToTest.Moles")] 
```

在测试项目中，我有一个测试类

```
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;

using SimpleClassToTest;
using SimpleClassToTest.Moles;

namespace SimpleClassToTest.Moles
{
    [TestClass]
    public class UnitTest1
    {
        public UnitTest1()
        {
        }

        [TestMethod]
        [HostType("Moles")]
        public void TestMethod1()
        {
            Class1 c1 = new Class1();
            Assert.AreEqual(c1.SayOla(), "Ola");
            MClass2.ReturnMeString = (ignored) => { return "ReturnMe"; };
            Assert.AreEqual(c1.SayOla(), "ReturnMe");
        }
    }
} 
```

不幸的是，这不是编译。错误是

> UnitTest1.cs(25,13)：错误 CS0122：“SimpleClassToTest.Moles.MClass2”由于其保护级别而无法访问

任何实现这一目标的提示都将不胜感激！

谢谢！

彼得

PS 在 VS2008 和 VS2010 上都试过这个，带有 moles 版本 Microsoft Moles v0.94.51023.0

**（编辑：来自下面的评论）**

作为一种解决方法，在单元测试中：

```
Type mClass2Type = typeof(SimpleClassToTest.Moles.MClass1)
                    .Assembly.GetType("SimpleClassToTest.Mole‌​s.MClass2"); 
PropertyInfo returnMeProp = mClass2Type.GetProperty("ReturnMeString");
Microsoft.Moles.Framework.MolesDelegates.Func<String, String> molesDelegate = 
      (ignore) => { return "ReturnMe"; };
returnMeProp.SetValue(mClass2Type, molesDelegate, null);
Assert.AreEqual(c1.SayOla(), "ReturnMe"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:45:43.993

`InternalsVisibleTo`如果您的被测程序集是强签名的，那么 moles 程序集也是强签名的，您必须在属性中指定公钥。有关详细信息，请参阅 moles 参考手册的“代码生成和编译”部分。

这是一个可能相关的报价：

> ... 使用此代码段作为起点，将**InternalsVisibleTo**属性添加到您的项目中。
> 
> [assembly: InternalsVisibleTo(“FileSystem.Moles, PublicKey=0024000004800000940000000602000000240000525341310004000001000100e92decb949446f688ab9f6973436c535bf50acd1fd580495aae3f875aa4e4f663ca77908c63b7f0996977cb98fcfdb35e05aa2c842002703cad835473caac5ef14107e3a7fae01120a96558785f48319f66daabc862872b2c53f5ac11fa335c0165e202b4c011334c7bc8f4c4e570cf255190f4e3e2cbc9137ca57cb687947bc”)]

# java - JScrollPane 隐藏 JTextPane

> ID：11244257
> 
> 赞同：2
> 
> 时间：2012-06-28T12:06:02.773
> 
> 标签：java, swing, jpanel, jscrollpane, jtextpane

![在此处输入图片描述][1]我有以下结构

```
JFrame
  JPanel
    JScrollPane
      class that extends JTextPane 
```

添加长文本后，JScrollPane 隐藏了 JTextPane。

我正在使用 Gridbag 布局。

我在扩展 JTextPane 的 clss 中有 DefaultStyledDocument。

我已经为 JTextPane 设置了最大大小

```
text.setMaximumSize(new Dimension(100,50)); 
```

包 com.example;

```
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.text.DefaultStyledDocument;

public class Test extends JFrame{

    IPanel p;
    public Test() {
        p = new IPanel();
        p.init();
        setTitle("Test");
        setBounds(50, 50, 200, 200);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        add(p);
        setVisible(true);
    }

    public static void main(String[] args) {
        Test t = new Test();
    }

}
class IPanel extends JPanel{
    public void init() {
        GridBagConstraints gbc = new GridBagConstraints();
        GridBagLayout gridbag = new GridBagLayout();
        JLabel subjectLabel = new JLabel("Text");
        gbc.weighty = 0.0;
        gbc.gridwidth = 1;
        gbc.weightx = 0.0;
        gbc.anchor = GridBagConstraints.NORTH;
        gridbag.setConstraints(subjectLabel, gbc);
        add(subjectLabel);

        TextPane Text = new TextPane(255);
        Text.setMaximumSize(new Dimension(100,20));
        Text.setPreferredSize(new Dimension(100,20));
        gridbag.setConstraints(Text, gbc);
        JScrollPane subScrollPane = new JScrollPane(Text);
        gbc.gridwidth = GridBagConstraints.REMAINDER;

        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.weightx = 1.0;
        gbc.weighty = 0.0;
        gbc.insets = new Insets(0, 0, 5, 0);
        gridbag.setConstraints(subScrollPane, gbc);
        subScrollPane.setWheelScrollingEnabled(false);
        add(subScrollPane);
    }
}
class TextPane extends JTextPane{
    private Doc doc = new Doc();
    public TextPane(int lenght) {
        doc.setmaxLength(lenght);
    }
}
class Doc extends DefaultStyledDocument{
    private int maxLength = 0;
    public void setmaxLength(int lenght) {
        maxLength = lenght;
    }
} 
```

这是代码示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:51:46.540

只需使用[EmptyBorder](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/EmptyBorder.html)。看看这个例子，你可以做些什么作为替代：

```
import java.awt.*;
import javax.swing.*;

public class ScrollPaneExample
{
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("JScrollPane Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(5, 5));
        JTextPane textPane = new JTextPane();
        textPane.setText("IF this is a very large text" + 
                            " still it can manage that" + 
                            " without any difficulty since" +
                            " it knows how to handle itself.");
        textPane.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));                    

        JScrollPane scroller = new JScrollPane();                   
        scroller.setViewportView(textPane);
        contentPane.add(scroller);

        frame.setContentPane(contentPane);
        frame.setSize(100, 200);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ScrollPaneExample().createAndDisplayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:54:17.253

这是一个具有完全相同的层次结构、相同布局并且一切都没有问题的示例：

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;

public class Test3 {

    protected static void initUI() {
        JFrame frame = new JFrame("Test text pane");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextPane text = new JTextPane();
        text.setText(LONG_TEXT);
        JScrollPane scrollPane = new JScrollPane(text);
        JPanel panel = new JPanel(new GridBagLayout());
        panel.add(scrollPane, new GridBagConstraints(0, 0, 1, 1, 1.0, 1.0, GridBagConstraints.CENTER, GridBagConstraints.BOTH, new Insets(
                0, 0, 0, 0), 0, 0));
        frame.add(panel);
        frame.setSize(600, 400);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }

    private static final String LONG_TEXT = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. In molestie purus vel ipsum commodo id bibendum est porta. Proin leo nisl, facilisis eu euismod eget, fermentum a lacus. Nulla pulvinar ante at elit tristique condimentum. Suspendisse ac erat eu lectus vulputate sagittis sed a urna. In diam ligula, blandit id scelerisque sit amet, porttitor in libero. Curabitur in rhoncus tellus. Aenean dignissim dui semper ante pharetra interdum scelerisque vel tortor. Vestibulum id arcu mauris. Integer ut magna purus. Mauris orci massa, porta sollicitudin rutrum eu, ultrices non leo. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla sem justo, dapibus in euismod et, gravida sit amet eros.\r\n"
            + "\r\n"
            + "Suspendisse id ligula sit amet neque euismod commodo in at massa. Sed pretium lobortis vulputate. Aliquam non eros odio, non accumsan nisi. Phasellus vel nisl tellus, quis tincidunt risus. Donec ut nulla felis. Morbi sit amet enim arcu. Integer iaculis mi id sem vulputate non lacinia dui dictum.\r\n"
            + "\r\n"
            + "Praesent luctus neque in purus convallis vel aliquet dui rutrum. In lobortis nisl eu nisi tincidunt adipiscing sodales sapien sodales. Morbi augue massa, dictum vel hendrerit vel, tincidunt id lectus. Proin vulputate nunc placerat ante fringilla vitae ullamcorper mauris fringilla. Duis et massa sapien. Integer porta elementum enim in lobortis. Morbi eget mi nunc. Quisque nec arcu eget orci elementum consectetur ut in metus.\r\n"
            + "\r\n"
            + "Donec iaculis felis vel felis rutrum id congue tellus aliquet. Ut vel sapien mauris, quis sodales odio. Aliquam cursus urna a leo lacinia eget porttitor ante mattis. Aenean dictum, tellus in volutpat luctus, magna eros feugiat tortor, nec lobortis diam justo vel est. Praesent sit amet nisl sed eros semper ultrices. Nunc lobortis scelerisque sapien, ac sodales nibh viverra ac. Etiam auctor, odio ut venenatis hendrerit, odio ipsum sollicitudin libero, non adipiscing nisi eros at nulla. Nulla consequat arcu in libero pellentesque sit amet aliquet arcu elementum. Nulla facilisi. Proin sodales neque quis turpis gravida ac mollis ipsum ultricies. Mauris lorem magna, ultricies a dignissim sit amet, egestas et neque. Phasellus iaculis pellentesque ultrices. Phasellus a consectetur nisl. Proin ac quam id lectus dignissim lacinia. Praesent ligula purus, mattis eu pellentesque nec, convallis id lorem.\r\n"
            + "\r\n"
            + "Cras at sapien vitae felis fermentum consectetur sed eu justo. Mauris in felis mi. Vestibulum felis neque, varius at aliquet non, ornare at eros. In hac habitasse platea dictumst. Vivamus placerat, tellus laoreet pulvinar tempor, velit elit aliquet diam, eu ullamcorper purus enim non lectus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Etiam et enim magna. Ut varius, lectus at luctus laoreet, urna mauris euismod velit, vitae sodales nulla nulla non sem. Phasellus eget viverra erat. Phasellus quam ante, vehicula sed tristique vestibulum, ullamcorper et nunc. Phasellus placerat congue tellus, condimentum volutpat ligula convallis fringilla. Curabitur quis nibh lorem, ut feugiat velit. Aliquam vehicula pellentesque aliquet. ";
} 
```

编辑：

这两行代码是有问题的：

```
Text.setMaximumSize(new Dimension(100, 20));
Text.setPreferredSize(new Dimension(100, 20)); 
```

您正在强制 JTextPane 的首选和最大大小。您提供了非常严格的约束。通常，滚动条的宽度/高度约为 20px，这意味着当水平滚动条出现时，它将占据组件的大部分高度。

还要注意代码中的以下错误：

1.  您在方法中声明了一个 GridBagLayout`init()`但您没有在面板上设置它（使用`setLayout`），这意味着它`FlowLayout`实际上是在执行布局。
2.  您正在文本窗格上设置 GBC，但您没有将文本窗格添加到面板，而是添加了滚动窗格，因此设置这些约束对布局没有任何影响。

我不知道你想要达到什么目的。对我来说，看起来简单`JTextField`就足够了，但我没有足够的上下文知道。

编辑2：

1.  将 IPanel 上的布局设置为`gridbag`您在 init() 方法中创建的布局。
2.  为滚动窗格约束添加以下约束提示：

    ```
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weighty = 1.0; 
    ```

# xml - 如何在邮件中查看附件 xml 的原始创建日期？

> ID：11244258
> 
> 赞同：-1
> 
> 时间：2012-06-28T12:06:12.150
> 
> 标签：xml, email, outlook

某些机构在特定日期创建了一个 xml 文件。他附上那个寄给我。但我在一个月后打开那个邮件附件。但我想知道附加的 xml 的实际文件创建日期。怎么知道？任何黑客行为对我来说也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:09:21.710

你不能。创建文件的日期是操作系统的一项功能，通常不是文件本身的一部分。

也就是说，如果您将文件保存在系统上，它将显示为在保存日期创建。

# javascript - 关于“康威生命游戏”算法的查询

> ID：11244266
> 
> 赞同：-3
> 
> 时间：2012-06-28T12:06:35.333
> 
> 标签：javascript

> **可能的重复：**
> [javascript 中的康威生命游戏（最好的 sol](https://stackoverflow.com/questions/11249820/conway-game-of-life-in-javascript-best-sol)

我正在为康威的生命游戏编写代码。我正在使用 2 个数组；一个用于老一代，一个用于第二代。当我尝试实施规则时，控制台中出现错误：

```
TypeError: Cannot read property '-1' of undefined 
```

请告诉我，我应该如何更改代码以便可以删除具有 -1 值的相邻单元格？

规则是：

生命游戏的宇宙是一个由方形细胞组成的无限二维正交网格，每个细胞都处于两种可能状态中的一种，活的或死的。每个单元格都与其八个相邻单元格交互，这些相邻单元格是水平、垂直或对角相邻的单元格。在时间的每一步，都会发生以下转换：

1.  任何少于两个活邻居的活细胞都会死亡，好像是由于人口不足造成的。

2.  任何有两三个活邻居的活细胞都可以活到下一代。

3.  任何有超过三个活邻居的活细胞都会死亡，就好像过度拥挤一样。

4.  任何只有三个活邻居的死细胞都会变成活细胞，就像通过繁殖一样。

初始模式构成系统的种子。第一代是通过将上述规则同时应用于种子中的每个细胞而创建的——出生和死亡同时发生，而发生这种情况的离散时刻有时称为滴答声（换句话说，每一代都是前一个）。这些规则继续被重复应用以创造更多的世代。

这是代码：

```
window.conway =
    {
    };
    window.conway.maingame =
    {
    };

    conway.maingame = function(width, height)
    {

        window.a = [];
        this.width = width;
        this.height = height;
        this.map = new Array(width);
        for( i = 0; i < this.width; i++)
        {
            this.map[i] = new Array(height);
        }
        console.log(this.map, "map")
    }

    conway.maingame.prototype.randomize = function()
    {
        for( y = 0; y < this.height; y++)
        {
            console.log("enter for loop")
            for( x = 0; x < this.width; x++)
            {
                if(Math.random() > .5)
                {
                    i = true;
                }
                else
                {
                    i = false;
                }
                console.log("enter function")
                this.set(x, y, i);

            }
        }
    }

    conway.maingame.prototype.set = function(x, y, val)
    {
        x = x % this.width;
        y = y % this.height;
        this.map[x][y] = val;
        console.log(this.map, "map2");

    }

    conway.maingame.prototype.get = function(x, y)
    {
        x = x % this.width;
        y = y % this.height;
        return this.map[x][y];
    }

    conway.maingame.prototype.neighbors = function(x, y)
    {
        n = 0;
        if(this.get(x + 1, y + 1))
        {
            n++;
        }
        if(this.get(x + 1, y))
        {
            n++;
        }
        if(this.get(x + 1, y - 1))
        {
            n++;
        }
        if(this.get(x, y - 1))
        {
            n++;
        }
        if(this.get(x - 1, y - 1))
        {
            n++;
        }
        if(this.get(x - 1, y))
        {
            n++;
        }
        if(this.get(x - 1, y + 1))
        {
            n++;
        }
        if(this.get(x, y + 1))
        {
            n++;
        }
        return n;
    }

    conway.maingame.prototype.newgeneration = function()
    {

        var newMap = new Array(this.width);
        for( i = 0; i < this.width; i++)
        {
            newMap[i] = new Array(this.height);
        }

        for(var y = 0; y < this.height; y++)
        {
            for(var x = 0; x < this.width; x++)
            {
                console.log("enter all for")
                newMap[x][y] = this.get(x, y);

                if(this.neighbors(x, y) = undefined)
                {
                    for( k = 0; k < this.width+1; k++)
                    {
                        arr[k]=[];
                        for( f = 0; f < this.height+1; f++)
                        {
                                arr[j]=this.neigbors(x,y);
                                arr.pop();
                        }
                    }
                }
 //Error is in this part of the code    
                //Rule 1: any live cell with fewer than two live neighbors dies
                if(this.get(x, y) == true && this.neighbors(x, y) < 2)
                {
                    newMap[x][y] = false;
                }

                //Rule 2: Any live cell with two or three live neighbours lives on to the next generation
                if(this.get(x, y) == true && this.neighbors(x, y) == 2 || this.neighbors(x, y) == 3)
                {
                    newMap[x][y] = true

                }

                //Rule 3: any live cell with more than three live neighbors dies
                if(this.get(x, y) == true && this.neighbors(x, y) > 3)
                {
                    newMap[x][y] = false;
                }

                //Rule 4: any dead cell with exactly three live neighbors becomes a live cell
                if(this.get(x, y) == false && this.neighbors(x, y) == 3)
                {
                    newMap[x][y] = true;
                }
            }
        }

        this.map = newMap;
    } 
```

改变带来

即使对代码进行了更改，我的回答也不正确。请告诉我为什么？

```
conway.maingame.prototype.neighbors = function(x, y)
{
    count = 0;

    if(x > 0 && y > 0 && this.get(x + 1, y + 1))
    {
        console.log(this.get(x + 1, y + 1), "vallue neighbor");
        count++;
        console.log(count);
    }

    if(x > 0 && y > 0 && this.get(x + 1, y))
    {
        console.log(this.get(x + 1, y), "vallue neighbor");
        count++;
        console.log(count);

    }

    if(x > 0 && y > 0 && this.get(x + 1, y - 1))
    {
        console.log(this.get(x + 1, y - 1), "vallue neighbor");
        count++;
        console.log(count);
    }

    if(x > 0 && y >=0 && this.get(x, y - 1))
    {
        console.log(this.get(x + 1, y - 1), "vallue neighbor");
        count++;
        console.log(count);

    }

    if(x > 0 && y > 0 && this.get(x - 1, y - 1))
    {

        console.log(this.get(x + 1, y - 1), "vallue neighbor");
        count++;
        console.log(count);

    }

    if(x > 0 && y > 0 && this.get(x - 1, y))
    {
        console.log(this.get(x + 1, y - 1), "vallue neighbor");
        count++;
        console.log(count);
    }

    if(x > 0 && y > 0 && this.get(x - 1, y + 1))
    {
        console.log(this.get(x + 1, y - 1), "vallue neighbor");
        count++;
        console.log(count);
    }

    if(x > 0 && y > 0 &&this.get(x, y + 1))
    {
        console.log(this.get(x + 1, y - 1), "vallue neighbor");
        count++;
        console.log(count);
    }

    return count;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:12:46.590

**编辑**：请参阅我对这个问题[重复](https://stackoverflow.com/questions/11249820/conway-game-of-life-in-javascript-best-sol/11252097#11252097)的回答。

值得通过[jsHint 之](http://www.jshint.com/)类的检查工具运行您的代码：

```
Line 11: window.a = []; 

Missing "use strict" statement.

Line 19: console.log(this.map, "map") 

Missing semicolon.

Line 20: } 

Missing semicolon.

Line 24: for( y = 0; y < this.height; y++) 

Missing "use strict" statement.

Line 26: console.log("enter for loop") 

Missing semicolon.

Line 29: if(Math.random() > .5) 

A leading decimal point can be confused with a dot: '.5'.

Line 37: console.log("enter function") 

Missing semicolon.

Line 42: } 

Missing semicolon.

Line 46: x = x % this.width; 

Missing "use strict" statement.

Line 51: } 

Missing semicolon.

Line 56: x = x % this.width; 

Missing "use strict" statement.

Line 59: } 

Missing semicolon.

Line 63: n = 0; 

Missing "use strict" statement.

Line 97: } 

Missing semicolon.

Line 102: var newMap = new Array(this.width); 

Missing "use strict" statement.

Line 112: console.log("enter all for") 

Missing semicolon.

Line 115: if(this.neighbors(x, y) = undefined) 

Expected a conditional expression and instead saw an assignment.

Line 129: if(this.get(x, y) == true && this.neighbors(x, y) < 2) 

Expected '===' and instead saw '=='.

Line 135: if(this.get(x, y) == true && this.neighbors(x, y) == 2 || this.neighbors(x, y) == 3) 

Expected '===' and instead saw '=='.

Line 135: if(this.get(x, y) == true && this.neighbors(x, y) == 2 || this.neighbors(x, y) == 3) 

Expected '===' and instead saw '=='.

Line 135: if(this.get(x, y) == true && this.neighbors(x, y) == 2 || this.neighbors(x, y) == 3) 

Expected '===' and instead saw '=='.

Line 137: newMap[x][y] = true 

Missing semicolon.

Line 142: if(this.get(x, y) == true && this.neighbors(x, y) > 3) 

Expected '===' and instead saw '=='.

Line 148: if(this.get(x, y) == false && this.neighbors(x, y) == 3) 

Expected '===' and instead saw '=='.

Line 148: if(this.get(x, y) == false && this.neighbors(x, y) == 3) 

Expected '===' and instead saw '=='.

Line 156: } 

Missing semicolon.

Line 8: conway.maingame = function(width, height) 

'conway' is not defined.

Line 15: for( i = 0; i < this.width; i++) 

'i' is not defined.

Line 15: for( i = 0; i < this.width; i++) 

'i' is not defined.

Line 15: for( i = 0; i < this.width; i++) 

'i' is not defined.

Line 17: this.map[i] = new Array(height); 

'i' is not defined.

Line 19: console.log(this.map, "map") 

'console' is not defined.

Line 22: conway.maingame.prototype.randomize = function() 

'conway' is not defined.

Line 24: for( y = 0; y < this.height; y++) 

'y' is not defined.

Line 24: for( y = 0; y < this.height; y++) 

'y' is not defined.

Line 24: for( y = 0; y < this.height; y++) 

'y' is not defined.

Line 26: console.log("enter for loop") 

'console' is not defined.

Line 27: for( x = 0; x < this.width; x++) 

'x' is not defined.

Line 27: for( x = 0; x < this.width; x++) 

'x' is not defined.

Line 27: for( x = 0; x < this.width; x++) 

'x' is not defined.

Line 31: i = true; 

'i' is not defined.

Line 35: i = false; 

'i' is not defined.

Line 37: console.log("enter function") 

'console' is not defined.

Line 38: this.set(x, y, i); 

'x' is not defined.

Line 38: this.set(x, y, i); 

'y' is not defined.

Line 38: this.set(x, y, i); 

'i' is not defined.

Line 44: conway.maingame.prototype.set = function(x, y, val) 

'conway' is not defined.

Line 49: console.log(this.map, "map2"); 

'console' is not defined.

Line 54: conway.maingame.prototype.get = function(x, y) 

'conway' is not defined.

Line 61: conway.maingame.prototype.neighbors = function(x, y) 

'conway' is not defined.

Line 61: 

Too many errors. (38% scanned). 
```

这里真的有太多错误，无法将其缩小到特定问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:11:36.947

用于`==`比较（甚至`===`）。用于`=`分配。

这一行是错误的：

```
if(this.neighbors(x, y) = undefined) 
```

应该是比较，而不是分配。

**编辑：修复第二个错误**

我 99% 确定您标记的行不是导致问题的行。请检查您的控制台错误并仔细验证行号。

我很确定问题是因为您试图引用一个不存在的单元格。考虑边缘周围的单元格 - 外面没有邻居。您需要修改代码以检查您是否没有超出数组的范围。

```
 ...

    if (y > 0 && this.get(x, y - 1)) {
        n++;
    }

    ... etc. ... 
```

额外提示：始终将您的开口支架放在同一条线上。

# php - php中的循环和if语句

> ID：11244267
> 
> 赞同：0
> 
> 时间：2012-06-28T12:06:37.560
> 
> 标签：php, loops, if-statement, while-loop

我有以下代码。

```
<?php if ( $showdata['venue'] == "Brean Sands" ) {echo "<div class=\"gigpress-related-park\">"; echo $showdata['date_long']; echo $showdata['venue']; echo "</div>"; } ?>
<?php if ( $showdata['venue'] == "Camber Sands" ) {echo "<div class=\"gigpress-related-park\">"; echo $showdata['date_long']; echo $showdata['venue']; echo "</div>"; } ?>
<?php if ( $showdata['venue'] == "Pakefield" ) {echo "<div class=\"gigpress-related-park\">"; echo $showdata['date_long']; echo $showdata['venue']; echo "</div>"; } ?>
<?php if ( $showdata['venue'] == "Prestatyn Sands" ) {echo "<div class=\"gigpress-related-park\">"; echo $showdata['date_long']; echo $showdata['venue']; echo "</div>"; } ?>
<?php if ( $showdata['venue'] == "Southport" ) {echo "<div class=\"gigpress-related-park\">"; echo $showdata['date_long']; echo $showdata['venue']; echo "</div>"; } ?> 
```

这可以很好地从我的数据库中提取信息，但我需要它循环或重复，以便为每个场地显示多个日期。db 中的每个场地都有多个日期，但正如代码所示，它只返回第一个日期的值。我需要其他人也出现。

如何在仅查看一个场地并提取所有日期然后结束时让此代码循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:10:17.603

```
$query = mysql_query("the query");
while($showdata = mysql_fetch_assoc($query)) {
  put your code here
} 
```

因此，您运行查询以获取所需的所有数据库记录，然后循环将行分配给 $showdata。然后，这将为从数据库查询返回的每一行处理循环内的所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:11:52.237

假设您使用`mysql_`函数从数据库中获取值。这是你应该做的。

```
$query = mysql_query('SELECT QUERY');
while($showdata = mysql_fetch_assoc($query)) {
    echo "<div class=\"gigpress-related-park\">" . $showdata['venue'] . $showdata['venue'] . "</div>";
} 
```

但是最好使用 PDO 或 MySQLi 而不是使用`mysql_`.

# facebook - 我从哪里获得 client_id？

> ID：11244270
> 
> 赞同：19
> 
> 时间：2012-06-28T12:06:52.753
> 
> 标签：facebook, registration

我是基于 Facebook 的开发的新手，只需要一个基本的 Facebook 注册表单，我找到了“要嵌入我的网站的注册表单及其 html”，但需要一个 client_id 以便我可以使用它。我从哪里得到这个？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-29T00:50:22.980

[http://developers.facebook.com/apps](http://developers.facebook.com/apps)

创建应用程序后，会显示应用程序 ID/客户端 ID。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-08-03T17:39:03.120

**查找 Facebook App ID、App Secret 和 Client Token：**

您可以在 Settings/basic 中找到您的 App ID 和 App Secret：

[![应用 ID 和应用密钥](../Images/0b106eeddb9b4d8535001fa01f775417.png)](https://i.stack.imgur.com/6NpLP.png)

客户端令牌可以在设置/高级中找到：

[![客户令牌](../Images/e2ff7655775669c165fddfff7ed51b37.png)](https://i.stack.imgur.com/JgBNc.png)

> [https://developers.facebook.com/apps/Your_App_ID/settings/](https://developers.facebook.com/apps/Your_App_ID/settings/)

# mongodb - Meteor 和 DBRefs

> ID：11244286
> 
> 赞同：1
> 
> 时间：2012-06-28T12:08:15.563
> 
> 标签：mongodb, meteor

我在 Win7(32) 中使用流星 0.3.7，并尝试使用 2 个 MongoDB 集合创建一个简单的日志记录系统，以存储由 DBRef 链接的数据。

当前的伪模式是：

```
 Users {
      username : String,
      password : String,
      created  : Timestamp,
    }

    Logs {
      user_id : DBRef {$id, $ref}
      message : String
    } 
```

我使用服务器方法来插入日志，这样我就可以对客户端集合进行一些更新。

现在我想做一个旧的“左连接”并显示带有嵌入用户名的最后 n 个日志的列表。我不想在用户中嵌入日志，因为最常用的操作是获取最后 n 个日志。在我看来，嵌入将对性能产生重大影响。

实现这一目标的最佳方法是什么？

接下来，如果可以编辑用户名并且所有项目都更改名称，那就太好了

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:31:24.310

玩 Cursor.observe 回答了我的问题。这可能不是最有效的方法，但解决了我未来取消引用 DBRefs“链接”的问题

所以对于服务器我们需要发布一个特殊的集合。一个可以枚举游标并为每个文档搜索相应的DBRef。请记住，这个实现是硬编码的，应该像 UnRefCollection 这样的包来完成。

**服务器端**

```
 CC.Logs = new Meteor.Collection("logs");
    CC.Users = new Meteor.Collection("users");

Meteor.publish('logsAndUsers', function (page, size) {
    var self = this;
    var startup = true;  
    var startupList = [], uniqArr = [];

    page = page || 1;
    size = size || 100;
    var skip = (page - 1) * size;

    var cursor = CC.Logs.find({}, {limit : size, skip : skip});
    var handle = cursor.observe({
        added : function(doc, idx){
            var clone = _.clone(doc);
            var refId = clone.user_id.oid; // showld search DBRefs
            if (startup){
                startupList.push(clone);    
                if (!_.contains(uniqArr, refId))
                    uniqArr.push(refId);
            } else {
                // Clients added logs
                var deref = CC.Users.findOne({_id : refid});
                clone.user = deref;
                self.set('logsAndUsers', clone._id, clone);
                self.flush();
            }
        },
        removed : function(doc, idx){
            self.unset('logsAndUsers', doc._id, _.keys(doc));
            self.flush();
        },
        changed : function(new_document, idx, old_document){
            var set = {};
            _.each(new_document, function (v, k) {
              if (!_.isEqual(v, old_document[k]))
                set[k] = v;
            });
            self.set('logsAndUsers', new_document._id, set);
            var dead_keys = _.difference(_.keys(old_document), _.keys(new_document));
            self.unset('logsAndUsers', new_document._id, dead_keys);
            self.flush();
        },
        moved : function(document, old_index, new_index){
            // Not used
        }
    });

    self.onStop(function(){
        handle.stop();
    });

    //  Deref on first Run
    var derefs = CC.Users.find({_id : {$in : uniqArr} }).fetch();
    _.forEach(startupList, function (item){
        _.forEach(derefs, function(ditems){
            if (item["user_id"].oid === ditems._id){
                item.user = ditems;
                return false;
            }
        });
        self.set('logsAndUsers', item._id, item);
    });
    delete derefs; // Not needed anymore

    startup = false;
    self.complete();
    self.flush();
}); 
```

对于每个添加的日志文档，它将搜索用户集合并尝试将丢失的信息添加到日志集合中。在第一次运行时为日志集合中的每个文档调用添加的函数我创建了一个 startupList 和一个唯一用户 ID 数组，因此在第一次运行时它只会查询一次数据库。放置一个分页机制来加快速度是个好主意。

***客户端***

在客户端上，订阅 logsAndUsers 集合，如果要进行更改，请直接对 Logs 集合进行更改。

```
LogsAndUsers = new Meteor.collection('logsAndUser');
Logs = new Meteor.colection('logs'); // Changes here are observed in the LogsAndUsers collection

Meteor.autosubscribe(function () {
    var page = Session.get('page') || 1;
    Meteor.subscribe('logsAndUsers', page);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:38:21.353

为什么不将用户名也存储在日志集合中呢？然后您可以直接查询它们而无需任何类型的“加入”

如果由于某种原因您需要能够处理该用户名更改，您只需按名称获取用户对象，然后在 Logs 上查询`{ user_id : user._id }`

# php - 下载文件php总是损坏

> ID：11244287
> 
> 赞同：1
> 
> 时间：2012-06-28T12:08:15.810
> 
> 标签：php, download

我试图制作一个脚本来从我的本地主机下载图像。只是为了一个学校项目。

我通过 url ("$_GET['file']") 获取文件名。然后我运行这个脚本。每次文件损坏，无法查看。我想下载图像，但是当我尝试使用 word 文档时，它也被损坏了。这是我的代码：

```
<?php
//get file
$file = $_GET['file'];
//set path of file
$path = $_SERVER['DOCUMENT_ROOT']."/blackbox/mediafiles/"; 
$fullPath = $path.$file;
if ($fd = fopen ($fullPath, "r")) {
    $path_parts = pathinfo($fullPath);
        header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\""); // fore a download
        header("Content-type: application/octet-stream");
        header("Content-Disposition: filename=\"".$path_parts["basename"]."\"");
}
    header("Cache-control: private"); // open files directly
    while(!feof($fd)) {
        $buffer = fread($fd, 2048);
        echo $buffer;
    }
fclose ($fd);
exit;
?> 
```

有人知道出了什么问题吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:11:47.060

尝试以二进制模式显式打开文件：

```
if ($fd = fopen ($fullPath, "rb")) { 
```

正如关于[fopen](http://php.net/manual/en/function.fopen.php)的文档所述：

> Windows 提供了一个文本模式翻译标志 ('t')，它在处理文件时会将 \n 透明地转换为 \r\n。相反，您也可以使用“b”强制二进制模式，这不会转换您的数据。要使用这些标志，请将“b”或“t”指定为模式参数的最后一个字符。
> 
> 默认翻译模式取决于您使用的 SAPI 和 PHP 版本，因此出于可移植性原因，鼓励您始终指定适当的标志。如果您正在处理纯文本文件并且使用 \n 来分隔脚本中的行尾，则应该使用“t”模式，但希望您的文件可以被记事本等应用程序读取。在所有其他情况下，您应该使用“b”。
> 
> 如果在处理二进制文件时没有指定 'b' 标志，您的数据可能会遇到奇怪的问题，包括损坏的图像文件和 \r\n 字符的奇怪问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:13:04.047

`<?php`要么是某些东西从 PHP 中抛出错误，要么是文件 ( )中的开始标记之前有前导空格。

做两件事：

*   确保`<`of`<?php`是文件中**的第一个**字符。确保您的脚本中没有字节顺序标记。
*   将这些行添加到脚本的顶部：`error_reporting(0); ini_set('display_errors', 0);`

请注意，如果禁用错误解决了您的问题，则意味着**存在需要修复的错误**，这不是问题的最终解决方案！

使用[`readfile()`](http://php.net/manual/en/function.readfile.php)也比打开文件指针并循环它更短、更安全、更高效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:12:09.180

您可以使用[readfile](http://php.net/manual/en/function.readfile.php)代替手动读取文件和输出。

另外请注意，$_GET['file'] 可以包含 '../' 并打开任何文件，这是一个安全风险。使用[basename](http://php.net/manual/en/function.basename.php)函数（如果所有文件都在同一个目录中）或限制对 mediafiles 目录之外的文件的访问

```
<?php
//get file
$file = $_GET['file'];
//set path of file
$path = $_SERVER['DOCUMENT_ROOT']."/blackbox/mediafiles/"; 
$fullPath = $path. basename($file);
if (is_readable($fullPath) {
    $path_parts = pathinfo($fullPath);
    header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\""); // fore a download
    header("Content-type: application/octet-stream");
    header("Content-length: " . filesize($fullPath));
    header("Content-Disposition: filename=\"".$path_parts["basename"]."\"");
    header("Cache-control: private"); // open files directly
    readfile($fullPath);
}
exit;
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T12:16:49.833

起初它不是你的答案。但是你真的应该看看 PHP 中的安全性。在您的脚本上，您可以通过 GET 参数和 DOCUMENT_ROOT 访问所有文件。

不要相信用户。

您应该首先过滤变量或将它们与已知的文件列表映射，然后再将它们传递给用户。

[PHPSec](http://phpsec.org/projects/guide/)

# java - 在 Eclipse 中安装新软件时出错

> ID：11244288
> 
> 赞同：0
> 
> 时间：2012-06-28T12:08:17.653
> 
> 标签：java, eclipse, eclipse-plugin

我无法在 Eclipse 中下载和安装任何新软件。我得到以下屏幕。

![日食错误画面](../Images/8784c1702dad5f60d4491fb9f0bc2234.png)

我也尝试配置代理但没有成功。
我也收到一个错误窗口，上面写着：

> 找不到某些网站。有关更多详细信息，请参阅错误日志。[在http://download.eclipse.org/webtools/repository/indigo](http://download.eclipse.org/webtools/repository/indigo)
> 找不到存储库。[在http://download.eclipse.org/eclipse/updates/3.7](http://download.eclipse.org/eclipse/updates/3.7) 找不到存储库。[在http://m2eclipse.sonatype.org/sites/m2e](http://m2eclipse.sonatype.org/sites/m2e) 找不到存储库。[在http://download.eclipse.org/mylyn/releases/indigo](http://download.eclipse.org/mylyn/releases/indigo) 找不到存储库。[在http://download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo) 找不到存储库。

我在 Eclipse 中的代理设置如下所示： ![Eclipse 代理设置窗口](../Images/8740940c8121694721001ede072cda77.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:24:45.830

这是因为您选择了错误的链接来安装...请尝试另一个链接并检查您的 Eclipse 版本。它们必须相同 例如：Indigo

谢谢

# java - Tomcat + Jboss 编码错误

> ID：11244295
> 
> 赞同：0
> 
> 时间：2012-06-28T12:08:32.407
> 
> 标签：java, tomcat, encoding, jboss

我有一个具有不同操作系统（windows 和 gnu/linux）的集群，它使用 JBOSS（使用我的团队制作的 javabean）和使用 Tomcat 的“前端”运行应用程序。

每次应用程序在 gnu/linux 中运行时，系统都会破坏所有编码（ã,é,õ,á）。html 的图表集是 utf-8。

我看到了一个解决方案，它使用 getBytes(utf-8) 转换并强制字符串位于操作系统的 utf-8 上。但是有很多字符串，如果我对每个字符串都使用它，代码将被“污染”。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:22:47.363

发生这种情况是因为来自 sybase(database) 的所有数据都编码错误。为了解决这个问题，我们在连接 url (CHARSET=iso_1) 上添加了一个标志。

# programming-languages - 硬件平台如何影响编程语言的选择？

> ID：11244298
> 
> 赞同：1
> 
> 时间：2012-06-28T12:08:39.260
> 
> 标签：programming-languages, hardware

长话短说：去年教过我的老师最近才离开，并被一位新老师取代。这位新老师给了我一个涉及我们以前从未教过的东西（像这样）的作业。所以这个任务已经出现在作业中，我不知道该怎么做。我联系不上老师，因为他身体不好，接下来几天不来。甚至当我要求他进一步解释时，他的心情也很好，让我觉得我完全智障了。

> 描述硬件平台如何影响编程语言的选择

看看我在 SO 上的活动，你可以看出我正在编程，我正在开发东西，我正在学习，所以我不只是想让你们中的一个人做我的功课我。

有人可以在这里解释一下我将如何回答这样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:15:32.640

以下是一些考虑因素，但无论如何都不是完整的答案。

如果您的硬件平台是某种小型嵌入式设备，那么您选择的编程语言将指向较低级别的非托管语言 - 您可能无法（或不想）加载托管语言运行时，例如Java JVM 或 .NET CLR。这取决于内存和存储要求。同样，解释性语言也不可能，因为您没有解释器的空间。

如果您使用的是更大的机器，则更多的是兼容性问题。托管语言必须在支持其运行时的平台上运行。对于 .NET，即 Windows 或其他平台（如果您将 Microsoft CLR 替换为 Mono 运行时）。就 Java 而言，这是一个更广泛的平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:17:22.657

这绝不是一个明确的答案，但我首先想到的是嵌入式系统。我在嵌入式系统或其他低功耗电池供电的计算机上执行的任务需要与在可以访问主电源的计算机上执行的任务完全不同。

一个简单的影响......将是电池寿命。

如果我在嵌入式系统上使用浪费的算法，电池寿命会受到影响。

希望这有助于搅动脑汁！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T12:20:11.907

显然，设备的速度和内存量将影响选择。平台越原始和薄弱，运行使用非常高级语言开发的代码就越困难。用它们编写的代码可能根本不起作用（例如，当内存不足时）或太慢，或者需要认真优化（即需要更多工作），可能会对功能集或质量产生负面影响。

此外，某些语言和软件可能严重依赖 CPU 中的页面翻译可用性或从中受益。如果 CPU 没有，某些检查必须在软件中完成，而不是在硬件中自动完成，这将影响性能或语言/软件选择。

# ruby-on-rails - Railscasts 258 Token Fields - 在 :through table 中设置附加属性 - rails 方法

> ID：11244299
> 
> 赞同：0
> 
> 时间：2012-06-28T12:08:40.487
> 
> 标签：ruby-on-rails, attributes, associations, has-many-through, jquery-tokeninput

根据 Ryan Bates 的出色 RailsCast #258，我遇到了问题。

情况如下：

```
class User < ActiveRecord::Base
  has_many :capabilities,
           :dependent => :destroy
  has_many :skills, :through => :capabilities,
           :uniq => true

  has_many :raters,
           :through => :capabilities,
           :foreign_key => :rater_id,
           :uniq => true

  attr_accessible :name, :skill_tokens
  attr_reader :skill_tokens      

  def skill_tokens=(tokens)
      self.skill_ids = Skill.ids_from_tokens(tokens)
  end
end

class Capability < ActiveRecord::Base
  belongs_to :user
  belongs_to :rater, class_name: "User"
  belongs_to :skill

  validates_uniqueness_of :rater_id, :scope => [:user_id, :skill_id]
end

class Skill < ActiveRecord::Base
  has_many :capabilities
  has_many :users, :through => :capabilities,
           :uniq => true

  has_many :raters, :through => :capabilities,
           :foreign_key => :rater_id
end 
```

该表单包含作为 id 传递的技能标记的普通文本字段：

```
.field  
    = f.label :skill_tokens, "Skills"
    = f.text_field :skill_tokens, data: {load: @user.skills} 
```

因此，用户可以获得通过功能分配的许多技能。在分配技能时，还应在能力模型中跟踪评估者。

使用 Ryans 的 jquery TokenInput 示例，我创建了一个适当的表单，以允许用户使用 tokenInput 文本字段分配（和创建）技能。

现在的问题在于在保存关联之前处理数据和设置评估者。

通过一些 ruby​​ 魔术，用户模型上的 self.skill_ids 设置用于创建关联模型的 id，因此控制器操作非常简单：

```
def update
    @user = User.find(params[:id])

    respond_to do |format|
      if @user.update_attributes(params[:user])      
        format.html { redirect_to @user, notice: 'User was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
```

显然，如果我想在能力模型上设置额外的评估者属性，那么使用 update_attributes 就不会那么容易了。

那么我怎样才能通过“rails 方式”来实现这一点——编写漂亮、可读的代码呢？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:04:07.160

你是怎么设置的`rater_id`？

**如果您计划为用户在表单上添加的每个技能接受评估者的用户输入，** 我看不出您将如何使用基于令牌输入的输入字段来实现此目的。您将不得不选择一些其他类型的输入。

**如果您打算将评估者设置为当前登录的用户，或者基于其他一些业务逻辑设置评估者**，我的方法将覆盖`skill_ids=`User 模型中的方法以按照您的意愿工作，添加一个 attr_accessor 来存储current_rater 并从控制器传递 current_rate。

就像是：

```
#user.rb
attr_accessor :current_rater
def skill_ids=(ids)
  return false if current_rater.nil? || User.find_by_id(current_rater).nil?
  capabilities.where("skill_id not in (?)", ids).destroy_all
  ids.each do |skill_id|      
    capabilities.create(:skill_id => skill_id, :rater_id => self.current_rater) if capabilities.find_by_id(skill_id).nil?
  end
end

#users_controller.rb
def update
  @user = User.find(params[:id])

  #Replace 'current_user' with whatever method you are using to track the logged in user
  params[:user].merge(:current_rater => current_user) 

  respond_to do |format|
    ...
  end
end 
```

可能没有您希望的那么优雅，但它应该可以完成这项工作吗？

# heroku - heroku登录问题

> ID：11244302
> 
> 赞同：2
> 
> 时间：2012-06-28T12:08:48.963
> 
> 标签：heroku

我正在运行“heroku login”命令，作为响应，我收到以下错误：

```
Error:       A blocking operation is currently executing. - connect(2) would block (Excon::Errors::SocketError)
Backtrace:   C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/socket.rb:48:in `connect_nonblock'
             C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/socket.rb:48:in `rescue in block in connect'
             C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/socket.rb:31:in `block in connect'
             C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/socket.rb:29:in `each'
             C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/socket.rb:29:in `connect'
             C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/socket.rb:16:in `initialize'
             C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/ssl_socket.rb:31:in `initialize'
             C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/connection.rb:344:in `new'
             C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/connection.rb:344:in `socket'
             C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/connection.rb:175:in `request_kernel'
             C:/Program Files (x86)/Heroku/vendor/gems/excon-0.14.2/lib/excon/connection.rb:101:in `request'
             C:/Program Files (x86)/Heroku/vendor/gems/heroku-api-0.2.6/lib/heroku/api.rb:60:in `request'
             C:/Program Files (x86)/Heroku/vendor/gems/heroku-api-0.2.6/lib/heroku/api/login.rb:9:in `post_login'
             C:/Program Files (x86)/Heroku/lib/heroku/auth.rb:75:in `api_key'
             C:/Program Files (x86)/Heroku/lib/heroku/auth.rb:184:in `ask_for_credentials'
             C:/Program Files (x86)/Heroku/lib/heroku/auth.rb:216:in `ask_for_and_save_credentials'
             C:/Program Files (x86)/Heroku/lib/heroku/auth.rb:79:in `get_credentials'
             C:/Program Files (x86)/Heroku/lib/heroku/auth.rb:40:in `login'
             C:/Program Files (x86)/Heroku/lib/heroku/command/auth.rb:22:in `login'
             C:/Program Files (x86)/Heroku/lib/heroku/command.rb:178:in `run'
             C:/Program Files (x86)/Heroku/lib/heroku/cli.rb:19:in `start'
             C:/Program Files (x86)/Heroku/bin/heroku:25:in `<main>'

Command:     heroku login
Version:     heroku-toolbelt/2.28.7 (i386-mingw32) ruby/1.9.2 
```

知道有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:20:28.523

In my case this was happening due to company proxy. From another network everything worked as advertised.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-11T08:59:37.203

如果您在登录时遇到问题，请尝试移动您的 .netrc 文件。这是 CLI 存储凭据的位置：

> $ mv ~/.netrc ~/.netrc.backup
> 
> $ heroku 登录

在 Windows 上，该文件名为 _netrc。

在此页面上查找更多信息： [https ://devcenter.heroku.com/articles/heroku-cli#troubleshooting](https://devcenter.heroku.com/articles/heroku-cli#troubleshooting)

# playframework - 玩2个模块：如何在不紧耦合的情况下添加路由？

> ID：11244304
> 
> 赞同：3
> 
> 时间：2012-06-28T12:08:58.793
> 
> 标签：playframework, playframework-2.0

我正在开发一个公开一些 URL 的[Play 2](http://www.playframework.org/) [模块](http://www.playframework.org/documentation/2.0.2/Modules)，并且想知道如何将这些 URL“提供”给托管我的模块的 Play 应用程序。

**示例：**假设我的模块（称为`store`）实现了一个文档存储库，提供（以及其他）URL`document/<id>`以读取具有 id 的文档`<id>`。根据其需要，使用此模块的应用程序可能会在`http://example.org/media/document/<id>`、 或 下`http://example.org/document/<id>`或其他内容下公开此 URL。

**问题：**一个模块如何在不硬编码的情况下将 URL（路由）暴露给其包含的应用程序？

*注意：*我来自 Django，正在寻找类似于[Django URLconfs](https://docs.djangoproject.com/en/dev/intro/tutorial03/#decoupling-the-urlconfs)的机制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:42:33.063

您可能会询问有关[HTTP 路由的问题](http://www.playframework.org/documentation/2.0.2/JavaRouting)

请注意，您需要将路由规则放在主`conf/routes`文件中。它应该在`2.1`Play 的版本中进行更改。

*编辑：*

查看[SecureSocial 示例](https://github.com/jaliss/securesocial/tree/master/samples/java/demo)（还有 Scala 版本）的示例，检查到模块的路由在[conf/routes中的表示方式](https://github.com/jaliss/securesocial/blob/master/samples/java/demo/conf/routes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T10:12:26.030

现在 2.1 支持此功能，请参阅[发行说明](http://www.playframework.org/documentation/2.1-RC4/Highlights)中的​​“允许对您的项目进行更多模块化”部分。好消息！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T10:50:33.277

如果我不是你想基于某些参数重定向。那么你可以形成通用控制器，你可以使用它们

```
return redirect(routes.Application.XYZ()); 
```

重定向到你想要的地方。

# android - VALARM 在 Outlook 和 Android 中不起作用

> ID：11244305
> 
> 赞同：0
> 
> 时间：2012-06-28T12:08:59.727
> 
> 标签：android, outlook, icalendar

我在使用 Outlook 和 Android 的 .ics-Files 中获取警报时遇到了一个主要问题。

将 .ics 文件导入 Sunbird 或 Google 日历时，事件显示正确并且警报正常工作。导入到 Outlook 或 Android 时，事件可以，但不会导入警报。

这是我的文件：

```
BEGIN:VCALENDAR
PRODID:libical; http://www.nabber.org/projects/ical/
VERSION:2.0
X-WR-CALNAME:Termine
X-WR-TIMEZONE:Europe/Berlin
BEGIN:VEVENT
CLASS:PUBLIC
CREATED;VALUE=DATE-TIME:20120628T140417Z
DESCRIPTION:Event 1
DTEND;VALUE=DATE-TIME:20120629T070000
DTSTAMP;VALUE=DATE-TIME:20120628T140417
DTSTART;VALUE=DATE-TIME:20120629T060000
LAST-MODIFIED;VALUE=DATE-TIME:20120628T140417
PRIORITY:5
SEQUENCE:0
SUMMARY:Event 1
TRANSP:TRANSPARENT
BEGIN:VALARM
TRIGGER:-PT780M
ACTION:DISPLAY
DESCRIPTION:Reminder
END:VALARM
END:VEVENT
BEGIN:VEVENT
CLASS:PUBLIC
CREATED;VALUE=DATE-TIME:20120628T140417Z
DESCRIPTION:Event 2
DTEND;VALUE=DATE-TIME:20120727T070000
DTSTAMP;VALUE=DATE-TIME:20120628T140417
DTSTART;VALUE=DATE-TIME:20120727T060000
LAST-MODIFIED;VALUE=DATE-TIME:20120628T140417
PRIORITY:5
SEQUENCE:0
SUMMARY:Event 2
TRANSP:TRANSPARENT
BEGIN:VALARM
TRIGGER:-PT780M
ACTION:DISPLAY
DESCRIPTION:Reminder
END:VALARM
END:VEVENT
END:VCALENDAR 
```

有人知道如何让警报在 Outlook 和 android 中工作吗？

非常感谢...

CU-拉尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T10:41:58.970

检查正在使用的行尾是`\r\n`，而不是`\n`像网络上许多示例中错误显示的那样。

有关更多详细信息，请参阅我对类似问题的回答：[https ://stackoverflow.com/a/16540934/834431](https://stackoverflow.com/a/16540934/834431)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T16:29:19.500

导入 ICS 文件后，尝试设置闹钟并将约会导出为 ICS 文件。然后，您可以比较差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T20:54:41.347

现在您将警报设置为 -780 分钟，我可以看到这是一个问题。也许试试 -13 小时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-24T22:44:40.210

尝试重命名要导入的文件。从 .ics 到 .vcs

# actionscript-3 - 在 String 上找不到属性标签，并且没有默认值

> ID：11244307
> 
> 赞同：0
> 
> 时间：2012-06-28T12:09:05.750
> 
> 标签：actionscript-3, apache-flex

基于以下数据

```
public var dataArray:ArrayCollection = new ArrayCollection( [
    { label: "None", data: '' },
    { label: "Some Data", data: 
        { 
            label: "String tested at IF", data: "20"
        }
    }
]); 
```

然后我根据用户从下拉列表中选择的位置创建一个新的 ArrayCollection obj

```
var skillArrayCollection:ArrayCollection  = ArrayCollection(runtimeComponents[dataArray[classSelect.selectedIndex].data]); 
```

我正在循环一个 ArrayCollection 对象，如下所示：

```
 for each (var item:Object in skillArrayCollection[charSkillOne.selectedIndex]) { 
        if (item.label == "somelabel") {
           ret = ret + Number(item.data);
          }
  } 
```

当 if 语句进行检查时，它匹配字符串 test 并返回正确的结果；IT 还返回错误：ReferenceError: Error #1069: Property label not found on String and there is no default value。

我不明白 flex 将如何出错并返回我要求的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:54:53.800

在您的第一个对象中：

```
{ label: "None", data: '' },
{ label: "Some Data", data: 
    { 
        label: "String tested at IF", data: "20"
    }
} 
```

data 是一个字符串，在您的第二个对象中， data 是一个具有标签属性的对象。

当您的循环遍历每个元素时，第一个元素会导致此错误，因为当您在其上调用 object.data.label 时，您试图获取字符串的标签属性，因此会出现错误（对于第二个对象，如果它是到达那里它不会出错）。正如其他人所说，这个问题忽略了 runtimeComponents 的内容，所以很难说这是肯定的问题，但它似乎是正确的。

# jquery - 如何使用鼠标位置创建移动元素，例如 http://fieroanimals.com/？

> ID：11244309
> 
> 赞同：4
> 
> 时间：2012-06-28T12:09:06.760
> 
> 标签：jquery, image, html, position, mouse

我想用里面的图像创建 div 元素，并用鼠标位置的坐标改变它的位置。有一些用于创建 3d 效果的 jquery-pluings，但我只需要在 X 和 Y 坐标上移动。另外，请在 div 元素的限制范围内执行此操作。

我得到了下一个代码：

```
$('div.images').mousemove(function(e){
        var x = e.pageX - this.offsetLeft;
        var y = e.pageY - this.offsetTop;
        $('div.images').css({'top': x,'left': y}); 
    }); 
```

在 CSS div.images 中具有*绝对位置*。当我移动鼠标时不会改变位置，但是当我在 CSS 中删除位置时，它会将更改应用于元素的样式，但不会更改位置。

给我一些建议，我需要做什么。

在[http://fieroanimals.com/](http://fieroanimals.com/)上实现了 Flash，但我想在 JQuery 上做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-11T13:11:59.620

```
$(document).ready(function(){
      $('div.moveAble-container').mousemove(function(e){
            var y = e.pageY;
            var x = e.pageX;                    
            $('div.moveAble').css({'top': y}); 
            $('div.moveAble').css({'left': x});

      });
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T12:23:03.510

`$('div.images').mousemove(...)`意味着它只会检测超过`div.images`.

`$('html')`将检测鼠标在整个页面上的移动。

[jsFiddle 示例](http://jsfiddle.net/wUAGP/)

根据您的需要，您可能希望将 X 坐标应用于 CSS`left`属性，将 Y 坐标应用于 CSS `top`。（在你的问题中你有相反的方式）。

# mysql - SQL 查询列出数据库中所有表的内容

> ID：11244310
> 
> 赞同：0
> 
> 时间：2012-06-28T12:09:09.103
> 
> 标签：mysql, database

我编写了一个 PHP 脚本来使用查询列出数据库中存在的所有表

$query = "显示来自 $dbName 的表";

现在，我想知道可以使用什么 sql 查询来同时列出数据库中所有表的“内容”以显示它，然后将其存储在一个文件中。

提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:13:36.667

您可以使用 mysqldump 转储数据库中的所有数据。否则，您可以运行查找所有表名，然后使用 select * from x; 从您之前检索的表名 x 中获取所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:56:06.710

如果您想要备份数据库并恢复它，请查看此链接

[MYSQL备份和恢复](http://dev.mysql.com/doc/refman/5.1/en/backup-and-recovery.html)

您可以使用此命令创建数据库的备份

[MYSQL转储](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

# java - 类型必须实现继承的抽象方法 TextToSpeech.OnInitListener.onInit(int)

> ID：11244313
> 
> 赞同：0
> 
> 时间：2012-06-28T12:09:20.083
> 
> 标签：java, android, text-to-speech

为了变得更有经验，我遵循了以下建议：编码，编码，然后再编码。然而，我对 OOP、Java 和 Android 完全陌生。

我发现了这个在线编码示例：[Build a speak and repeat app](http://mobile.tutsplus.com/tutorials/android/android-sdk-build-a-speak-and-repeat-app/)。

编码：

```
 // extend the opening class declaration and implement the OnInitListener interface for TTS functionality
public class RepeatActivity extends Activity implements OnClickListener, OnInitListener 
```

...在 Eclipse Indigo 中产生此错误：

> RepeatActivity 类型必须实现继承的抽象方法 TextToSpeech.OnInitListener.onInit(int)

这是否与以下有关：

```
import android.speech.RecognizerIntent;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener; 
```

我不知道如何解决这个问题。请指教。对于一个几乎一无所知的主题，很难提出具体的问题。

干杯，

彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:10:48.043

在你的接口中实现所有用你的类声明的方法。onInit() 方法可能在**OnInitListener**中。你必须在你的课堂上实现它。

在您的重复活动中添加一个方法，如下所示。

```
public void onInit (int status){

      //what you want to do just after the completion of the TextToSpeech engine initialization
      } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T12:15:45.223

通常，当你的类实现你的接口时，它必须重新定义接口中的所有方法。这就是为什么它被称为接口:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:15:04.230

您是说您的类实现了一个接口，但您的类不包含该接口包含的所有方法。

简单来说，接口是保证类可以执行特定功能的契约，而无需**说明**它们是如何执行这些功能的。

# android - 将宽度调整为半屏

> ID：11244326
> 
> 赞同：8
> 
> 时间：2012-06-28T12:09:59.567
> 
> 标签：android, android-relativelayout

我遇到了这个链接：

[以声明方式将宽度分配给可用屏幕宽度的一半](https://stackoverflow.com/questions/2581481/assign-width-to-half-available-screen-width-declaratively)

如何在相对布局中做同样的事情？这是代码：在相对布局中尝试线性布局。但这不起作用。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="14dp"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:id="@+id/button6"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:id="@+id/button4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_weight="1"
            android:text="UID"
            android:textColor="#ffe5f1f1" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="#ffe5f1f1"
            android:hint="Enter UID"
            android:inputType="number"
            android:shadowColor="5"
            android:textColor="#ff009999"
            android:textStyle="bold"
            android:typeface="monospace" >

            <requestFocus />
        </EditText>

    <Button
        android:id="@+id/button7"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
            android:layout_weight="1"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="18dp"
        android:text="Button" />

    <Button
        android:id="@+id/button8"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button7"
            android:layout_weight="1"
        android:layout_marginTop="16dp"
        android:text="Button" />

    <Button
        android:id="@+id/button9"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
            android:layout_weight="1"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button8"
        android:layout_marginTop="17dp"
        android:text="Button" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="50"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_weight="1"
        android:background="#ffe5f1f1"
        android:ems="10"
        android:hint="Enter Name"
        android:inputType="number"
        android:inputType="textPersonName"
        android:textColor="#ff009999"
        android:textStyle="bold"
            android:layout_weight="1"
        android:typeface="monospace" />

    <EditText
        android:id="@+id/editText3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:ems="10"
            android:layout_weight="1"
        android:inputType="number" />

    <EditText
        android:id="@+id/editText4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button7"
        android:layout_alignBottom="@+id/button7"
        android:layout_alignParentRight="true"
        android:ems="10"
            android:layout_weight="1"
        android:inputType="phone" />

    <EditText
        android:id="@+id/editText5"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button8"
        android:layout_alignBottom="@+id/button8"
        android:layout_alignParentRight="true"
        android:ems="10"
            android:layout_weight="1"
        android:inputType="textPersonName" />

    <RadioButton
        android:id="@+id/radioButton2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button9"
        android:layout_alignBottom="@+id/button9"
        android:layout_alignLeft="@+id/editText5"
            android:layout_weight="1"
        android:text="Male" />

    <RadioButton
        android:id="@+id/radioButton1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/radioButton2"
        android:layout_alignBottom="@+id/radioButton2"
        android:layout_alignParentRight="true"
            android:layout_weight="1"
        android:text="Female" />

    <Button
        android:id="@+id/button10"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button9"
        android:layout_marginTop="31dp"
            android:layout_weight="1"
        android:text="Button" />

    <Spinner
        android:id="@+id/spinDept"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button10"
        android:layout_alignBottom="@+id/button10"
        android:layout_alignLeft="@+id/radioButton2"
        android:layout_alignParentRight="true"
        android:layout_weight="1"
        android:background="#ff009999" />
   </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-07-08T02:23:59.103

如果您在使用 RelativeLayout 时恰好需要一半，这是一个很好的解决方法。你要做的是，制作一个以父级为中心的假不可见视图，并将左按钮设置为 alignParentLeft 和 alignRight 到该假视图，右按钮反之亦然

```
<RelativeLayout 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content">

   <View android:id="@+id/fakeView"
       android:layout_width="0dp"
       android:layout_height="0dp" 
       android:layout_centerInParent="true"/>
   <Button
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignRight="@id/fakeView"
       android:layout_alignParentLeft="true"
       android:text="Left"/>

   <Button 
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignLeft="@id/fakeView"
      android:layout_alignParentRight="true"
      android:text="Right"/>

</RelativeLayout> 
```

它真的很聪明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-21T14:37:52.240

除了**urSus**的答案，最好使用[Space](http://developer.android.com/reference/android/widget/Space.html)类而不是`View`：

```
 <Space android:id="@+id/fakeView"
       android:layout_width="0dp"
       android:layout_height="0dp" 
       android:layout_centerInParent="true"/> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T12:12:21.113

用适合你的相对布局包装同样的东西。

```
<LinearLayout android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <Button android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="somebutton">

    <TextView android:layout_width="fill_parent"
            android:layout_height="Wrap_content"
            android:layout_weight="1">
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T12:18:43.357

```
 Display display = getWindowManager().getDefaultDisplay();
    int width = display.getWidth();
    int height = display.getHeight();
    plannerEditLayout = (RelativeLayout) findViewById(R.id.plannerLayoutEdit);
    plannerEditLayout.setGravity(Gravity.CENTER_VERTICAL);
    plannerEditLayout.setLayoutParams(new RelativeLayout.LayoutParams(
            (width / 2), height)); 
```

我对 LinearLayout 使用相同的代码。Havent 为RelativeLayout 尝试了myslef。试一试。如果不起作用，请发表评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-16T13:35:35.363

像这样尝试`layout_weight`1 和`layout_width` fill_parent ，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/main_layout"
    android:orientation="vertical"
    android:padding="10dp">
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal">
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_weight="1">

        </LinearLayout>
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_weight="1">

        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-28T12:20:13.557

```
<LinearLayout android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <Button android:layout_width="match_parent"
             android:id="@+id/button"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="somebutton">

    <TextView android:layout_width="match_parent"
             android:id="@+id/textview"
            android:layout_height="Wrap_content"
            android:layout_weight="1">
</LinearLayout> 
```

在上面使用 LinearLayout 的示例中，将小部件 layout_width 设置为“match_parent”并提供权重（指定要占用的区域）。

这解决了你的问题。

# javascript - javascript form.submit() 丢失由 GA _linkByPost 创建的查询字符串

> ID：11244328
> 
> 赞同：0
> 
> 时间：2012-06-28T12:10:11.133
> 
> 标签：javascript, forms, post, query-string

我们有一个发布到母公司网站的预订表格。因为这是一个不同的域，我们需要实现 GA _linkByPost 以跨域传递 GA 跟踪 cookie 信息。

由于预订表单位于 .NET 用户控件中，因此它会进行回发。在回发时，我们验证、包装预订信息，并将包含目标预订引擎所需的隐藏元素的表单写回客户端，并添加一行 javascript 以提交表单。

下面是我用来提交表单的 javascript 函数：

```
function postBookingForm() {
  var thisForm = document.getElementById('PostForm');
  _gaq.push(['_linkByPost', thisForm]);
  thisForm.submit();
} 
```

以及相关的表格信息：

```
<form id="PostForm" name="PostForm" action="ClientBookingEngineUrl" method="post" >
    booking form info in here
</form> 
```

结果是我们填写了表单，点击提交，它会往返于服务器生成一个新表单并发布信息。除了 URL 丢失了查询字符串中的 GA cookie 信息之外，这一切都很好。如果我注释掉表单提交行并查看源代码，我可以在查询字符串上看到 GA cookie 信息 - 但是在发布时，我看不到查询字符串（使用 Fiddler）。

澄清一下：上述技术有效，并且在将表单数据发布到预订引擎并将用户带到那里方面做了我们想要的。如果提交行被注释掉，您可以看到带有修改后的操作的表单，其中附加了 GA 内容（使用 Firebug）。如果表单使用提交行提交，则查询字符串信息将被删除（由 Fiddler 确认）。

我错过了一些明显的东西吗？是否有一些关于 JS 提交、表单 POST 和查询字符串的问题？还是我缺少一个简单的技巧？

干杯

**编辑 1**

发生了一件怪事。

如果我在 _gaqPush 之前和之后提醒表单操作，那么我们可以看到 URL 处于之前和之后的状态，并且符合预期。

```
alert('1 form action = ' + thisForm.action);
_gaq.push(['_linkByPost', thisForm]);
alert('2 form action = ' + thisForm.action); 
```

警报 1 显示预先修改的操作，警报 2 显示带有 GA 信息的操作。有了警报，它会在查询字符串中提交 GA 信息。如果我注释掉警报，则 GA 信息不在查询字符串中......

我开始认为表格或其他东西还没有准备好，所以我正在尝试准备好 JQuery 的文档。

**编辑 2**

将方法调用包装在 document ready 中并没有帮助。我很困惑为什么动作 URL 在警报中显示后是正确的，但如果我不发出警报则不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:11:03.893

我尝试了一个简单的 HTML 页面，它调用 _gaqPush 并立即提交。这也失败了。添加 1000 毫秒的延迟（在大多数情况下）是有效的，所以我怀疑警报只是给了 GA 脚本时间来修改表单。

我正在关闭/接受这一点，因为在 GA 电话会议后提交表单的速度似乎太快了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:42:15.010

为后人解答。

问题是 _qaq（Google Analytics 队列）在调用 submit() 表单之前没有时间修改表单。

解决方案是将函数推送到提交表单的 _gaq 对象上，以便在表单修改完成后直接发生。

```
function postBookingForm() {
    var thisForm = document.getElementById('PostForm');
    _gaq.push(['_linkByPost', thisForm]);
    _gaq.push(function() { thisForm.submit(); });
} 
```

# javascript - 获取下拉列表的选定值

> ID：11244331
> 
> 赞同：0
> 
> 时间：2012-06-28T12:10:27.233
> 
> 标签：javascript, html, cordova

我有以下代码。我想在用户更改下拉列表后获取所选值的值，或者让警报（）显示默认值。我需要在 html 的 <body> 中使用 alert()。那可能吗？

```
<html>
 <head>
 <title>Title</title>
 <script type="text/javascript" src="phonegap-1.4.1.js">
</script> <script type="text/javascript" src="JS/Util.js"></script>
 <script type="text/javascript" src="JS/Language.js"></script>
 <script type="text/javascript">
   function dropdown(){
  var drp = document.getElementById("numberlist");
 var optn = document.createElement("OPTION");
 optn.text="3";
 optn.value="3";
 drp.add(optn);
 }
    </script>
 </head>
  <body onload="dropdown();"> <div id="main3"></div>  <form><select id = "numberlist"><option>12</option><option>24</option><option>36</option></select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:15:28.117

使用代码：

```
selectElement.options[ selectElement.options.selectedIndex ]; 
```

找到选定的索引。

因此，您`var drp = document.getElementById("numberlist");`现在可以通过以下方式找到索引的值：

```
var value = drp.options[ drp.options.selectedIndex ].value; 
```

将代码添加到`onchange`事件中，以便每当您更改`selectedIndex`元素的 时，您都可以获取它的值：

这是一个[演示](http://jsbin.com/axuwus/2/edit#preview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:18:13.827

在脚本标签中添加这个函数。

```
function pickvalue(id){
   var drp = document.getElementById(id);
   alert(drp.value);
} 
```

并像这样添加函数调用。

```
<select id = "numberlist" onchange="pickvalue(this.id)"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T12:50:36.570

试试这个以下...如果它对您有帮助，请将其标记为答案

```
<html>  
<head>  
<title>Title</title>  
<script type="text/javascript" src="phonegap-1.4.1.js"> </script> <script         type="text/javascript" src="JS/Util.js"></script>  
<script type="text/javascript" src="JS/Language.js"></script> 
<script type="text/javascript">    
function dropdown()
{   
    var drp = document.getElementById("numberlist");  
    var optn = document.createElement("OPTION");  
    optn.text="3";  
    optn.value="3";  
    drp.add(optn);  
}  

</script>  
</head>   
<body onload="dropdown();"> 
<div id="main3">
</div>  
<form>
<select id="numberlist" onchange="show()">
<option>12</option>
<option>24</option>
<option>36</option>
</select> 
<script type="text/javascript">
    function show() {
        var e = document.getElementById('numberlist');
        var txt = e.options[e.selectedIndex].text;
        alert(txt);

    }   
</script>
</form>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T12:16:15.637

这是一个 JQuery 方法：

```
 $value = $("#numberlist option:selected").text();
 alert($value); 
```

# php - 在提要对话框调用上出现在画布页面框架中的 Facebook 菜单

> ID：11244332
> 
> 赞同：0
> 
> 时间：2012-06-28T12:10:29.483
> 
> 标签：php, html, facebook

我在画布页面中实现 Facebook 的提要对话框功能时遇到问题。

以下代码在表单成功提交到 MySQL 数据库后运行。

```
header("Location: https://www.facebook.com/dialog/feed?
app_id=************&
link=".$applink."&
picture=".$apppicture."&
name=".$appname."&
caption=".$appcaption."&
description=".$appdescription."&
redirect_uri=".$redirecturi); 
```

它加载以下内容：

![问题截图](../Images/62761d3bfe13a7b0709ef9349f701413.png)

理想情况下，我需要标头将位置重定向到 _parent 框架。我已经尝试使用 Javascript 来实现这一点，并在 location 标头之前指定一个辅助标头指定目标 - 但这些方法都不起作用。

我只需要某种方式：

1) 不显示顶栏。2) 使用 CSS hack 隐藏它

有任何想法吗？

谢谢，菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:45:55.030

当然，JavaScript 方法有效——如果我不适合你，那么你就是**做错了**。

输出类似以下的内容来回答表单提交，并且**没有**HTTP 位置标头：

```
<script>
  window.top.location.href = '…the URL you want the user “redirected” to …';
</script> 
```

如果你愿意，可以用一个基本的 HTML 文档结构包围它——但不要在里面放任何其他东西，比如用户应该阅读的实际数据。

> 我已经尝试使用 [...] 在位置标头之前指定目标的辅助标头来实现这一点 - 但这些方法都不起作用。

HTTP 位置标头没有“目标”。你不能仅仅通过发明自己的想象语法来让东西正常工作……</p>

# c# - 如何在 C# 中使用密钥大小小于内置最小 256 位的 ECDSA

> ID：11244333
> 
> 赞同：2
> 
> 时间：2012-06-28T12:10:36.213
> 
> 标签：c#, cryptography, hash, signing, cng

我有一个非常有限的渠道来发送消息和签名，并且已被指示（在[https://crypto.stackexchange.com/questions/3075/asymmetric-algorithm-to-generate-compact-unique-messages-that -can-be-validated/](https://crypto.stackexchange.com/questions/3075/asymmetric-algorithm-to-generate-compact-unique-messages-that-can-be-validated/) ) ECDSA 提供了最紧凑的非对称算法。

我很容易做到这一点：

```
void Main()
{
    byte[] publickey;
    byte[] data;
    byte[] signature;

    using (var dsa = new ECDsaCng(256))
    {
        dsa.HashAlgorithm = CngAlgorithm.Sha256;
        publickey = dsa.Key.Export(CngKeyBlobFormat.EccPublicBlob);

        data = new byte[] { 21, 5, 8, 12, 207 };

        signature = dsa.SignData(data);
    }

    Console.WriteLine(signature.Length);
    Console.WriteLine(Convert.ToBase64String(signature));

    using (var dsa = new ECDsaCng(CngKey.Import(publickey, CngKeyBlobFormat.EccPublicBlob)))
    {
        dsa.HashAlgorithm = CngAlgorithm.Sha256;

        if (dsa.VerifyData(data, signature))
            Console.WriteLine("Data is good");
        else
            Console.WriteLine("Data is bad");
    }
} 
```

但是我希望能够牺牲一些强度并使用小于 BCL 提供的最小 256 位密钥大小，并且我还没有找到可以满足我需要的实现。

我已经尝试过 BouncyCastle，而且它似乎开箱即用也有同样的限制。

我有哪些选择？是否有另一种实现可以解除实现限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T20:29:54.540

您可以使用轻量级 Bouncy Castle 库对 F(2m) 或 F(P) 上的几乎任何曲线执行 EC 加密，包括具有较小比特大小的曲线。我建议您使用标准曲线，例如`Org.BouncyCastle.Asn1.Nist.NistNamedCurves`类中定义的曲线。

最小的 NIST 曲线是 163 位，尽管我建议非实时通信使用 192 位的最小值。请注意，与 256 位命名曲线（256 - 192 = 64 位，64 * 2 / 8 = 16 字节）相比，这总共只会为您节省大约 16 个字节。

Brainpool 曲线也相当安全地生成和明确定义。您可以在`Org.BouncyCastle.Asn1.TeleTrusT`命名空间中找到它们。

# iphone - 无法在 UI Web 视图中打开 iTunes 链接

> ID：11244337
> 
> 赞同：0
> 
> 时间：2012-06-28T12:10:40.457
> 
> 标签：iphone, objective-c, ios, itunes

我正在使用 iTunes 链接制作器访问 iTunes 上的专辑。

不知何故，链接没有在 UIWebView 中打开。

有人经历过吗？

这是限制还是什么？也许是更新？

[http://itunes.apple.com/us/artist/linkin-park/id148662?uo=4](http://itunes.apple.com/us/artist/linkin-park/id148662?uo=4) 请试试这个网址，告诉我你是否经历过同样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:39:59.783

任何带有“ `itunes.apple.com`”的链接在模拟器上都不起作用。

谢谢@iNoob！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:18:00.653

您可能想阅读以下内容：

[如何在 App Store (iTunes) 中链接到我的应用程序？](https://stackoverflow.com/q/818973/1439815)

同样在 Apple Developer 文档中阅读：从 iPhone 应用程序启动 App Store（您必须找到它，我无法在此处共享指向安全站点的链接）。

# java - 如何将字母附加到资源文件

> ID：11244345
> 
> 赞同：1
> 
> 时间：2012-06-28T12:11:16.077
> 
> 标签：java, android

该方法`Picture`接收一个随机的`int i`. 我想添加`i`，`R.drawable.pic+i` 以便在资源文件夹（pic0，pic1，pic2，...）中的几个可绘制对象之间随机选择，并将它们设置为视图末尾的背景`k`。我该怎么做？这是我现在拥有的代码：

```
public void Picture(int i){
    View k = new View(NewGame.this);
    k.setBackgroundResource(R.drawable.pic); 
    // here it should be k.setBackgroundResource(R.drawable.pic1); for example
    setContentView(k);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:17:40.020

尝试：

```
int resourceId=Resources.getSystem().getIdentifier("pic"+1, "drawable", getPackageName());
k.setBackgroundResource(resourceId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:16:21.750

我认为您可以使用诸如[getIdentifier](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法之类的方法来获取您的 resId。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:11:43.530

试试这个方法

```
public static String PACKAGE_NAME ;
PACKAGE_NAME=getApplicationContext().getPackageName();
int resID = getResources().getIdentifier( PACKAGE_NAME+":drawable/" + "pic"+urrandomenumber, null, null);  
k.setBackgroundResource(resID); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T21:53:47.773

对我有用的代码是：

```
public void Picture(int i){

View k = new View(NewGame.this);

setContentView(k);

int resourceId=getResources().getIdentifier("pic"+i, "drawable",getPackageName()); 

k.setBackgroundResource(resourceId);
} 
```

# php - PHP数组中的歧义

> ID：11244351
> 
> 赞同：2
> 
> 时间：2012-06-28T12:11:23.253
> 
> 标签：php

我想显示来自 developer.ean.com API 的行程详细信息。通过传递客户的行程 ID 和电子邮件 ID，我得到了预订的详细信息。结果以 json 格式出现，因此我对其进行解码并使用以下方法创建数组：

```
$array=json_decode($result); 
```

问题是来自 API 的任何结果都包含以下问题：

对于某些记录，它提供如下数组：

```
[Itinerary] => stdClass Object
        (
            [HotelConfirmation] => Array
                (
                    [0] => stdClass Object
                        (
                            [supplierId] => 13
                            [chainCode] => EP
                            [arrivalDate] => 07/24/2012
                            [departureDate] => 07/26/2012
            )
            [Hotel] => Array
                        (
                            [0] => stdClass Object
                                (
                                   [hotelId] => 394808
                                   [statusCode] => A
                                   [name] => Barkston Youth Hostel
                )
            )
        )
    ) 
```

**在这种情况下，HotelConfirmation 和 Hotel 是包含 [0] 作为对象的数组**

对于某些记录，它提供如下数组：

```
[Itinerary] => stdClass Object
        (
            [HotelConfirmation] => stdClass Object
                (
                            [supplierId] => 13
                            [chainCode] => EP
                            [arrivalDate] => 07/24/2012
                            [departureDate] => 07/26/2012
            )
       [Hotel] => stdClass Object              
                (
                            [hotelId] => 394808
                            [statusCode] => A
                            [name] => Barkston Youth Hostel
            )
       ) 
```

**在这种情况下，HotelConfirmation 和 Hotel 本身就是一个对象**

我在这里只提供很少的数据实际上是它的大数组，我想提供它的列表。但是数组包含这样的歧义。我该如何处理这个问题。有什么解决办法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:24:30.480

您可以像这样规范化输入：

```
// get objects as arrays
$array = json_decode($result, true);
// remove the sub-level [0], when necessary
foreach ($array as $key => $value) {
    if (is_array($value[0])) {
        $array[$key] = $value[0];
    }
} 
```

然后结果看起来总是一样的：

```
[Itinerary] => Array
        (
            [HotelConfirmation] => Array
                (
                            [supplierId] => 13
                            [chainCode] => EP
                            [arrivalDate] => 07/24/2012
                            [departureDate] => 07/26/2012
            )
            [Hotel] => Array              
                (
                            [hotelId] => 394808
                            [statusCode] => A
                            [name] => Barkston Youth Hostel
            )
       ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:16:58.647

`true`作为第二个参数传递给`json_decode`. 这将创建一个数组而不是`stdClass`

```
$array=json_decode($result, true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T06:58:38.683

首先这样做：

```
$array = json_decode($result, true); 
```

[它将对象转换为关联数组](http://il.php.net/manual/en/function.json-decode.php)

并像这样进行调整：

```
if (isset($array['HotelItineraryResponse']['Itinerary']['HotelConfirmation'][0])) {
    $array['HotelItineraryResponse']['Itinerary']['HotelConfirmation'] = $array['HotelItineraryResponse']['Itinerary']['HotelConfirmation'][0];
} 
```

它肯定会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:21:14.853

您可以键入 case 数组内的对象。

```
$array = json_decode($result);
$array = (array)$array 
```

或者，您可以将 true 作为 json_decode() 中的第二个参数传递；

根据php文档

```
When TRUE, returned objects will be converted into associative arrays. 
```

```
$array = json_decode($result, true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T12:17:39.893

改成这样：

```
$array=json_decode($result,TRUE); 
```

并始终处理数组？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T12:17:41.220

看起来您可能必须在模型中考虑这两种可能性...检查酒店节点是否包含数组或 obj 并进行相应操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T12:15:19.600

您可以使用`is_array()`它来检查它：

```
if (is_array($hotel)) {
    $hotel = $hotel[0];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-28T12:15:47.430

检查对象或数组：

```
if( is_object($Itinerary -> HotelConfirmation)) {
// do one thing or nothing
} elseif( is_array($Itinerary -> HotelConfirmation)) {
$Itinerary -> HotelConfirmation = array_shift( $Itinerary -> HotelConfirmation );
} 
```

# css - 定位 4 个 div

> ID：11244352
> 
> 赞同：2
> 
> 时间：2012-06-28T12:11:24.327
> 
> 标签：css, html

好的，所以我一直在尝试定位这 4 个 div 大约 6 个小时。路线框应该占据导航和信息 div 之间的任何高度，不太确定怎么说。如果有人可以帮助我或指出我正确的方向，我将不胜感激。

[http://i.stack.imgur.com/41q3H.png](http://i.stack.imgur.com/41q3H.png)

当前代码位于 98.214.131.200/new.php & 98.214.131.200/defualt.css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:23:15.587

```
<div>
     <div style="background-Color:black;height:35px"></div>   
     <div style="width:30%;float:left;height:500px">
            <div style="height:50%;background-color:green;width:100%"></div>
            <div style="height:50%;background-color:blue;width:100%"></div>
     </div>
     <div  style="width:70%;float:right;height:500px;background-color:red"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:25:31.780

假设您最初不知道高度，您需要以编程方式执行此操作，方法是获取 Google Map 的高度减去 info 的高度，然后将路线设置为该高度。[这里](http://forum.jquery.com/topic/set-height-of-a-div-equal-to-another-div)的例子。或者你可以使用一张桌子:-(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:27:34.803

```
.class1
{
    float:left;
 }

#one
{
    height:35px;
    width:100%;
    border:1px solid red;
    }

    #two
{
    height:200px;
    width:300px;
     border:1px solid red;
    }

#three {
    border: 1px solid Green;
    height: 403px;
}

    #four
{
    height:200px;
    width:300px;
     border:1px solid red;
    }

   #lftpanel {
    float: left;
    width: 300px;
}
 #rgtpanel {
    float: left;
    width: 808px;
} 
```

* * *

```
<div id="mainDIv">
    <div id="one" class="class1">
    </div> 
    <div id="lftpanel">

        <div id="two" class="class1">
        </div>
    <div id="four" class="class1">
    </div> 
    </div> 
    <div id="rgtpanel">

    <div id="three" class="class1">
    </div> 
       </div>
 </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:20:54.660

使用[flex-boxes](http://www.w3.org/TR/css3-flexbox/)可能是你所追求的。Flex-boxes 可用于拉伸/增长 div 以填充其父级，同时考虑其父级的其他子级。我在[这里有一个例子](http://jsfiddle.net/48Nks/1/embedded/result/)，我相信你的要求。

注意：我不确定这适用于哪些浏览器版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T15:21:55.307

这是一个表格解决方案的示例（不是非常 W3C，但该解决方案也适用于旧版浏览器）：

```
<table width="100%" cellpadding="0" cellspacing="0" border="1">
    <tr>
        <td colspan="2">Header
        </td>
    </tr>
    <tr>
        <td width="300px">
            <table width="100%" height="100%" cellpadding="0" cellspacing="0" border="1">
                <tr>
                    <td width="100%">topleft</td>
                </tr>
                <tr>
                    <td width="100%" height="200px">bottomleft</td>
                </tr>
            </table>
        </td>
        <td height="1000px">right</td>
    </tr>
</table> 
```

我以前试过这个，但不起作用：

```
<table width="100%" cellpadding="0" cellspacing="0" border="1">
    <tr>
        <td colspan="2">Header
        </td>
    </tr>
    <tr>
        <td width="300px">topleft</td>
        <td rowspan="2">right</td>
    </tr>
    <tr>
        <td width="300px" height="200px">bottomleft</td>
    </tr>
</table> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T13:07:27.593

我编辑了 khurram 的答案，诀窍是浮动所有内容并占用剩余空间使用溢出：隐藏（没有浮动！）

编辑：http: [//jsfiddle.net/hashie5/v4jFr/](http://jsfiddle.net/hashie5/v4jFr/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T12:20:00.937

```
<div class="navigation"></div>

<div class="content">
   <div class="firstCol">
     <div class="routes"></div>
     <div class="info"></div>
   </div>
   <div class="secondCol">
     <div class="google_map"></div>
   </div>
</div> 
```

在你的 style.css

```
 .navigation{
       height:35px;
        width:100%;
    }

    .content{
        width:100%;
    }

    .firstCol{
       float:left;
       width:300px;
    height:auto;
    }

    .routes{
    width:300px
    height:auto;
    }

    .info{
    width:300px
    height:200px;
    }

    .secondCol{
       float:left;
       width:auto;
    height:auto;
    }

.google_map{
width:auto;
height:auto;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-28T12:43:10.293

设置`height:350px;`类`.routes`它可能会帮助你。
**如下：**

```
.routes {
    background: none repeat scroll 0 0 #0000FF;
    height: 350px;
    width: 300px;
} 
```

**JSFIDDLE：http:** [//jsfiddle.net/beABW/](http://jsfiddle.net/beABW/)

# c# - Windows 身份验证中的会话持久性

> ID：11244356
> 
> 赞同：0
> 
> 时间：2012-06-28T12:11:44.467
> 
> 标签：c#, asp.net, c#-4.0

我们使用会话超时为 20 秒的 Windows 身份验证。20 秒后，会话到期，用户被重定向到 `sessionExpired page`. 问题是这样的：当用户使用 IE，关闭浏览器并使用 Windows 身份验证再次登录时，不会为同一用户创建新会话。旧会话仍然存在，并且用户`sessionExpired`再次被重定向到该页面。我错过了什么？可能是什么问题呢？

**更新：** 我的配置文件如下

```
<system.web>

    <roleManager enabled="false"/>
    <authentication mode="Windows"  />

    <identity impersonate="true" />     

    <authorization>
      <deny users="?" />
      <allow users="*"  />
    </authorization>

    <sessionState timeout="20"/>

    <membership defaultProvider="MyADMembershipProvider">
      <providers>
        <add name="MyADMembershipProvider"
             type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web,     Version=2.0.0.0,  Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
             connectionStringName="ADConnectionString"
             connectionUsername="userName"
             connectionPassword="password"/>
      </providers>
    </membership>
</system.web> 
```

# jsf - Openfaces TabbedPane 无法正常工作

> ID：11244357
> 
> 赞同：0
> 
> 时间：2012-06-28T12:11:45.890
> 
> 标签：jsf, jsf-2, glassfish, mojarra, openfaces

我在 JSF 应用程序中遇到了 Openface TabbedPane 的问题，因此我创建了一个新应用程序来测试 TabbedPane。我的页面中有以下代码：

```
<h:form>
  <o:tabbedPane>
    <o:subPanel caption="Tab 1">
      <h:outputText value="Hello from tab 1"/>
    </o:subPanel>
    <o:subPanel caption="Tab 2">
      <h:outputText value="Hello from tab 2"/>
    </o:subPanel>
    <o:subPanel caption="Tab 3">
       <h:outputText value="Hello from tab 3"/>
    </o:subPanel>
    <o:subPanel caption="Tab 4">
       <h:outputText value="Hello from tab 4"/>
    </o:subPanel>
  </o:tabbedPane>
</h:form> 
```

最初显示选项卡 1。我单击的下一个选项卡有效（无论哪个是下一个），但单击时没有其他选项卡有效。例如，当我单击选项卡 2 时，我可以看到它的内容，但是当我单击选项卡 3 时，它的内容没有显示，我仍然可以看到前一个选项卡的内容。我在 Glassfish 上检查了 Mojarra 的版本，它是 2.1.6。当我强制加载模式为“客户端”时，一切正常，但是当我强制它为“服务器”时，当我尝试单击第三个选项卡时出现以下错误：

> [Ljava.lang.Object; 无法转换为 com.sun.faces.application.view.StateHolderSaver

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:48:17.867

Mojarra 2.1.6 存在一些与状态相关的问题，已知这些问题会阻止 OpenFaces 正常工作。

官方目前只支持Mojarra 2.0.3，但初步测试Mojarra 2.1.8似乎也能正常工作（在我们正式宣布与该版本兼容之前，它还需要进行额外的测试，但你可以试试看是否你可以接受）。

# android - 比较变量

> ID：11244372
> 
> 赞同：0
> 
> 时间：2012-06-28T12:12:34.670
> 
> 标签：android

我正在编写游戏，并将玩家的最高分存储为 SharedPrefrence。我正在使用这种方法，以便当用户退出应用程序时，他的最高分仍然存在。在那之前我已经把所有的东西都编码好了。我现在想实现一种在玩家再次玩游戏时显示新的最高分的方法。这背后的逻辑是，如果第一个最高分大于零，则显示第一个最高分。然后再次进行游戏时，如果第二个最高分大于第一个最高分，则显示第二个最高分，否则显示第一个最高分。在我的脑海中，我认为一个简单的 If/else 语句就足够了，但是在声明第一个变量时我的问题就出现了。我写了以下代码，但它似乎不起作用。它只显示新分数——即使它比我不想要的第一个分数低。任何帮助将非常感激。代码：

```
TextView textSavedWeek2ms2_1 = (TextView)findViewById(R.id.ts02);
SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
String strSavedWeek2ms2_1 = sharedPreferences.getString("top_score", "");
String topscore = strSavedWeek2ms2_1;
int topscore1 = Integer.valueOf( topscore);  

if (topscore1 > 0 )                 
    { 
        textSavedWeek2ms2_1.setText(topscore);
    }
    else 
        textSavedWeek2ms2_1.setText("0");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:27:44.020

我觉得你打错字了......

```
if (topscore2 > topscore2)                 
{ 
    textSavedWeek2ms2_1.setText(topscore);
} 
```

**所以应该是**

```
if (topscore2 > topscore1)                 
    { 
        textSavedWeek2ms2_1.setText(topscore);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:15:55.900

这可能是无意的：

```
if (topscore2 > topscore2){ 
```

# iphone - NSString 转换为 NSMutableData 而不转换为 NSData

> ID：11244378
> 
> 赞同：1
> 
> 时间：2012-06-28T12:12:53.953
> 
> 标签：iphone, ios, nsstring, nsdata, gksession

我的问题如下。我想将 NSString 封装在 NSMutableData 对象中。但我想与其他项目一起做，而不是先将它封装到 NSData 中。毕竟只是字节不是吗？

我最终的 NSMutableData 对象看起来像

```
[header | stringLength | NSString] 
```

where`header`是一个 char 并且`stringLength`是一个 unsigned short。我像这样构建我的数据包

```
unsigned short stringLength = myString.length;
NSMutableData* nData = [NSMutableData dataWithBytes:(const void*)&header length:sizeof(char)];
[nData appendBytes:(const void*)&dataLength length:sizeof(unsigned short)];
[nData appendBytes:(const void*)myString length:stringLength]; 
```

然后我会通过 gkSession 发送它，在另一端我会提取 sting 长度，然后是字符串本身：

```
NSString* temp = [NSString alloc];
[data getBytes:(void*)&temp range:NSMakeRange(sizeof(char)+sizeof(unsigned short), stringLenght)]; 
```

由于某些原因，这给了我糟糕的内存访问。我怀疑这`myString.length`并没有完全符合我的预期。你有什么提示吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:02:29.543

此行不正确：

```
[nData appendBytes:(const void*)myString length:stringLength]; 
```

这是编码底层结构的第一部分`NSString`（大于`stringLength`）。

你的意思是：

```
[nData appendBytes:[myString UTF8String] 
            length:[myString lengthOfBytesUsingEncoding:NSUTF8StringEncoding]]; 
```

`length`是字符数。这可以大大小于多字节字符的字节数。

附带说明：如果您可以将长度缩短到 1 个字节 (0-255)，那么该编码称为 Pascal 字符串，并且`CFString`可以本地处理该编码（请参阅 参考资料`CFStringGetPascalString()`）。不是你通常想做的事情，但很有趣。它特别好用`CFStringCreateWithPascalStringNoCopy()`，因为您可以完全避免内存复制操作。这主要用于遗留支持，我不会跳过任何箍来使用它，但有时它很方便。

# sql - 使用单个 sql 查询在表中插入多个值

> ID：11244380
> 
> 赞同：1
> 
> 时间：2012-06-28T12:12:56.660
> 
> 标签：sql, sql-server-2008

如何使用单个语句在 sql 表中插入多个值。在sql server 2008中做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T12:14:25.670

`INSERT INTO ... VALUES`允许您在一个语句中向表中添加多行数据。例如，对于 MySQL，您可以在[此处](http://dev.mysql.com/doc/refman/5.5/en/insert.html)找到语法图。

```
INSERT INTO yourTable (`col1`, `col2`) 
VALUES ( 'val1', 'val2' ), 
       ( 'val3', 'val4' ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T12:16:08.397

在 SQL Server 2008 中，您可以使用单个 SQL INSERT 语句插入多行。

```
INSERT INTO Table ( Column1, Column 2 ) VALUES
( Value1, Value2 ), ( Value1, Value2 ) 
```

作为参考，请查看 MOC 课程 2778A - 在 SQL Server 2008 中编写 SQL 查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T13:05:27.390

您还可以从查询中插入

```
INSERT INTO Table (Column1, Column2)
SELECT Value1, Value2 FROM OtherTable 
```

它将 SELECT 查询返回的所有值插入到表中

# regex - 301/302 从斜杠根重定向到特定主页 url

> ID：11244393
> 
> 赞同：5
> 
> 时间：2012-06-28T12:13:45.737
> 
> 标签：regex, apache, .htaccess, mod-rewrite, url-rewriting

我的客户的 SEO 机构要求我在他们网站的主页上执行 302 重定向到同一页面的更具体的 URL，即**（不是斜线根版本）**。这是一个在 Apache2 上运行的 WordPress 站点，带有 .htaccess 文件。我需要实现以下目标：

**重定向自：**

```
http://www.example.com/ 
```

**302重定向到：**

```
http://www.example.com/home/ 
```

**我以为我可以这样做：**

```
redirect 302 / http://www.example.com/home/ 
```

但是，这当然会将所有内容重定向到该 url。所以我想我需要某种正则表达式，但不确定如何产生预期的效果？谁能指出我正确的方向？非常感谢任何反馈。;)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T12:22:19.607

使用这一行：

```
RedirectMatch 302 ^/$ /home/ 
```

确保只有 root 被重定向到`/home/`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T12:18:00.583

该指令使用前缀匹配，因此您的问题中提到的规则匹配所有以... 我的意思是 ALL`Redirect`开头的 URL 。在这种情况下应该使用：`/`[`RedirectMatch`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirectmatch)

> 该指令等效于 Redirect，但使用正则表达式，而不是简单的前缀匹配。

所以这就是你需要做的：

```
RedirectMatch temp ^/$ /home/ 
```

# jquery - ColorBox 关闭按钮在关闭时刷新父窗口

> ID：11244397
> 
> 赞同：0
> 
> 时间：2012-06-28T12:14:05.390
> 
> 标签：jquery, jquery-plugins, colorbox

这是用于使用 Jquery colorbox 插件显示覆盖的代码

```
function inlineLightbox(h) {
    jQuery.colorbox({
        opacity: 0.6,
        inline: true,
        href: h,
        onOpen: function() {
            jQuery('#colorbox').addClass('inline');
        },
        onComplete: function() {
            jQuery('#colorbox a.close, #colorbox a.btn-close').click(function() {
                jQuery.colorbox.close();
                jQuery('#product-popup-help').removeClass('active'); jQuery('#product-editors-notes').addClass('active');
                return false;
            });
        }
    });
} 
```

这就是我所说的

```
inlineSigninLightbox('#popup-password-update-confirm'); 
```

将在颜色框中显示的叠加层在 div 中。我的问题是当我关闭颜色框时，我的父窗口正在刷新，这是我不想要的

我不知道为什么会这样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:11:15.977

该代码对我来说看起来不错。我相信您的问题是由您的帖子中未包含的内容引起的。

你检查过你的 JavaScript 控制台是否有错误吗？

您确定您的选择器（'#colorbox a.close，#colorbox a.btn-close'）与您单击的链接元素匹配吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:55:38.723

首先要定义 inlineLightbox() 函数，然后调用其他函数 inlineSigninLightbox('#popup-password-update-confirm');

并防止在单击关闭按钮后重新加载或其他事件冒泡，您可以使用它

```
$(document).bind('cbox_complete', function(event){
    event.preventDefault();
event.stopPropagation()
}); 
```

# python - 如何使用 pickle() 初始化实例？

> ID：11244399
> 
> 赞同：6
> 
> 时间：2012-06-28T12:14:05.713
> 
> 标签：python

我想定义一个能够填充自己从另一个实例的序列化数据中读取的类。这是简化的代码：

```
class MyClass(list):

    def __init__(self,**kwargs):
        if kwargs.has_key('fdata'):
            f = open(kwargs['fdata'],'r')
            self = pickle.load(f)
            print len(self)    #prints 320          
            f.close()              

    ...

a = MyClass(fdata='data.dat')
print len(a)    #prints 0 
```

这是我获得的输出：

```
320
0 
```

我遇到的问题是返回的实例始终为空，即使我能够读取其中的所有元素`__init__()`可能导致这种情况的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:19:12.920

在方法内部赋值`self`只是将本地名称重新绑定`self`到不同的对象。Python 中对裸名称的赋值永远不能*修改*任何对象——它们只是重新绑定名称。

你为什么不直接使用

```
with open("data.dat") as f:
    a = pickle.load(f) 
```

而不是构建一个新类？如果您不喜欢这样，请将其包装在一个函数中，但将此代码放入`__init__()`.

还有其他方法可以达到相同的效果。可能最好的方法是覆盖`__new__()`而不是`__init__()`-在构造新实例*之前*`__new__()`调用，因此您可以简单地返回未腌制的实例，而不必修改已经构造的实例。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T12:17:29.803

`self`是 Python 中的常规局部变量。您不能使用`self = other`使对象“变成”其他东西，您只需重新分配本地对象。您必须一个一个地恢复属性，或者使用类似的东西：

```
self.__dict__ = pickle.load(f).__dict__ 
```

（我没有测试过最后一行，它很可能会让你的小猫爆炸。）*

# java - 番石榴中是否有对应的不可变枚举映射？

> ID：11244402
> 
> 赞同：29
> 
> 时间：2012-06-28T12:14:08.943
> 
> 标签：java, immutability, guava, enum-map

我最近了解了 EnumMap 在 Java 中的好处，并想将现有的 EnumMap 替换`ImmutableMap<OccupancyType, BigDecimal>`为 EnumMap。但是，我也喜欢 ImmutableMap 提供的不可变属性。

*   guava 中是否有变体 ImmutableEnumMap ？
*   在存储方面，哪一个（EnumMap vs ImmutableMap）表现更好？
*   我找不到两者的比较。如果有人能指出一个链接或对这两种数据结构的效率提供一些见解，我将不胜感激？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-28T12:41:52.150

番石榴贡献者在这里。

Guava 目前没有`ImmutableEnumMap`变体，但如果有，它可能只是一个`EnumMap`. （也就是说，更好的不可变实现是可能的。）

`EnumMap`在任何情况下都会比基本的表现更好`ImmutableMap`；很难或不可能击败。

（不过，我将[提交一个问题](https://code.google.com/p/guava-libraries/issues/detail?id=1047)来调查`ImmutableMap`为枚举键类型添加变体。）

* * *

更新：番石榴 14 增加了[`Maps.immutableEnumMap()`](https://github.com/google/guava/blob/fec0dbc4634006a6162cfd4d0d09c962073ddf40/guava/src/com/google/common/collect/Maps.java#L146).

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-08T14:03:28.740

我只是想提供一个现在`ImmutableEnumMap`在[Guava 14.0](https://code.google.com/p/guava-libraries/source/detail?r=835a7397fabb05a764a8008f4151c97f821a29ef)中的例子，因为它是一个包私有类，所以你不能这样做`ImmutableEnumMap.of()`。你必须这样做`Maps.immutableEnumMap()`。

```
private final ImmutableMap<MyEnum, String> myEnumMap = Maps.immutableEnumMap(ImmutableMap.of(
        MyEnum.A,   "A",
        MyEnum.B,   "B",
        MyEnum.C,   "C"
        )); 
```

不确定是否有更自然的语法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-24T15:50:53.167

由于 guava ImmutableEnumMap 在版本 14 中仍标记为 beta，我建议使用枚举映射的不可修改视图，然后丢弃对枚举映射的原始引用以确保它是不可变的。

示例（在构造函数中）：

```
Map entries = new EnumMap <SomeEnum, T>(SomeEnum.class);
... // (fill in entries)
this.entries = Collections.unmodifiableMap(entries); 
```

# c++ - 减慢for循环的速度

> ID：11244403
> 
> 赞同：5
> 
> 时间：2012-06-28T12:14:22.233
> 
> 标签：c++, for-loop

```
for(;;) {
    int rand_number = rand() % 2;
    cout << rand_number;
} 
```

这些循环会像矩阵电影 (LOL) 一样在屏幕上生成 1 和 0，但代码执行速度非常快，有什么方法可以让数字显示缓慢吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T12:20:18.020

例如用于`Sleep(3000);`等待 3000 毫秒

```
#include <iostream>
#include <stdlib.h>
#include <Windows.h>

using namespace std;

int main(int argc,char**argv){
    cout<<"a"<<endl;
    Sleep(3000);
    cout<<"b"<<endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T12:17:48.193

退房`usleep`。你也可以使用 sleep ，但我想那会太慢。

```
USLEEP(3)                BSD Library Functions Manual                USLEEP(3)

NAME
     usleep -- suspend thread execution for an interval measured in microseconds

LIBRARY
     Standard C Library (libc, -lc)

SYNOPSIS
     #include <unistd.h>

     int
     usleep(useconds_t useconds);

DESCRIPTION
     The usleep() function suspends execution of the calling thread until either useconds microseconds have elapsed or a signal is delivered to the thread whose action
     is to invoke a signal-catching function or to terminate the thread or process.  The actual time slept may be longer, due to system latencies and possible limita-
     tions in the timer resolution of the hardware.

     This function is implemented, using nanosleep(2), by pausing for useconds microseconds or until a signal occurs.  Consequently, in this implementation, sleeping
     has no effect on the state of process timers and there is no special handling for SIGALRM.

RETURN VALUES
     The usleep() function returns the value 0 if successful; otherwise the value -1 is returned and the global variable errno is set to indicate the error.

ERRORS
     The usleep() function will fail if:

     [EINTR]            A signal was delivered to the process and its action was to invoke a signal-catching function.

SEE ALSO
     nanosleep(2), sleep(3)

HISTORY
     The usleep() function appeared in 4.3BSD.

BSD                            February 13, 1998                           BSD 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:48:55.373

如果你只是想让它在你准备好之前停止，你可以输入一个随机的无意义的 cin。它只会在那里等待输入，直到您按回车键。

# android - 我怎样才能在android中有一个带有一种颜色边框的按钮，然后是空格，然后是另一种颜色的边框？

> ID：11244409
> 
> 赞同：0
> 
> 时间：2012-06-28T12:14:45.940
> 
> 标签：android, button, border

就像一个带有弯曲边缘的矩形，它周围有一些空白，然后是另一个带有弯曲边缘的矩形作为 Android 中按钮的边界？

没有图像可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:32:44.603

您必须使用[9 补丁](http://developer.android.com/tools/help/draw9patch.html)可绘制。

# c++ - 来自 IMediaObject::ProcessInput 的 HResult 0x80040204

> ID：11244410
> 
> 赞同：0
> 
> 时间：2012-06-28T12:14:47.400
> 
> 标签：c++, pcm, hresult, resampling, dmo

当我使用 DirectXMediaResampler 将 PCM 声音重新采样为 IEEE:Float 声音时，我得到了这个 Hresult。以相同的采样率更改每个样本的位数是没有问题的。还从 IEEE:Float 重新采样到 PCM。此 HResult 未在 DMO 对象的上下文中记录。它不会发生在每次重采样上，而是定期发生。

有谁知道或猜到是什么意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:47:03.280

那是 DMO_E_NOTACCEPTING；[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd406959.aspx)说：

> DMO_E_NOTACCEPTING：无法接受数据。

您可以在 dmoimpl.h 中看到生成此代码的代码，尽管没有派生的 DMO 代码我认为没有帮助（这意味着 DMO 的`InternalAcceptingInput`方法没有返回`S_OK`）。

我想这一切都意味着 ResamplerDMO 不喜欢您的输入数据。它肯定设置正确吗？

# c# - Asp.Net “即时” PM 系统

> ID：11244411
> 
> 赞同：0
> 
> 时间：2012-06-28T12:14:48.600
> 
> 标签：c#, javascript, asp.net

我需要使用我的 asp.net 应用程序在用户之间发送“即时”消息（如论坛 PM）。与许多其他人一样，我使用 webhotel 来托管我的网站。我已经搜索了一段时间，但找不到任何适合我的系统的解决方案。我正在考虑编写一个 javascript，如果提供了正确的凭据，它将每 30 秒左右调用一个 .ashx 处理程序来检查用户消息状态（返回真或假）。但是我不知道这是否是一个好的解决方案，因为对处理程序的所有调用可能会被视为垃圾邮件，或者它可能会产生非常糟糕的性能？问题是，我想避免刷新页面只是为了查看您的最新消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:17:30.100

查看 C# SignalR 库，它允许您使用 longpolling 或 websockets 以最小的带宽和简单的代码向客户端发送分组或广播消息

[http://signalr.net/](http://signalr.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:18:20.127

您可以为此使用更新面板。在页面的更新面板中放置一个文本框。当用户发送消息时，只需将其附加到该文本框。您可以放置​​一个刷新计时器以每秒刷新一次内容。

# c++ - Return 不适用于 float 或 int，但适用于 string？

> ID：11244413
> 
> 赞同：2
> 
> 时间：2012-06-28T12:15:02.633
> 
> 标签：c++, string, function, floating-point, return

首先，如果这是世界上最愚蠢的问题，让我道歉。但是，我被难住了，我在这里和谷歌上都做了很多搜索。我正在自学 C++，所以我可能不需要知道要搜索什么所需的词汇。

我正在尝试编写一个有限状态机来解析方程。我知道以前有人做过，但我正在努力学习。为此，我希望能够获取一个字符串、识别数字并将它们转换为双精度数或浮点数。（我会接受您对使用哪种格式的任何建议。）

我有一个将字符串转换为双精度的函数：

```
 double convertToDouble(string value)
{
    /* -- From http://www.parashift.com/c++-faq-lite/misc-technical-issues.html#faq-39.2
        Using stringstream, convert a string to a double by treating it like a stream
    */
    istringstream stream(value);
    double doubleValue;
    stream >> doubleValue;
    return doubleValue;
} 
```

我有一个函数可以在字符串中查找下一个数值：

```
string evaluateNextValue (int operatorPosition, string equation)
{
    /* -- Find the next value
        My idea is that, since I'm using spaces as my dividers, we'll look for
        the first number and then, using insert to put the individual numbers
        into a string until a space is found again. Then, the numbers--now
        in the correct order--can be converted to a double and returned
    */
    bool digitFound = false;
    string workingNumbers;
    for (int pos = operatorPosition; pos < equation.size(); pos ++)
    {
        if (equation.at(pos) == ' ' && digitFound == true)
        {
            double result = convertToDouble(workingNumbers);
            cout << "Converting a string to " << result << endl;
            cout << "The result plus one is: " << result +1 << endl;
            return workingNumbers;
        } else if (equation.at(pos) == ' ' && digitFound == false)
        {
            cout << "Skipping a blank space." << endl;
            continue;
        } else
        {
            if (digitFound == false)
            {
                digitFound = true;
                cout << "First digit found." << endl;
            }
            cout << "Adding " << equation.at(pos) << " to the string." << endl;
            workingNumbers.insert(workingNumbers.end(),equation.at(pos));
        }
    }
} 
```

这是我用来将它们都称为测试的 main() 。

```
int main()
{
    string dataInput;
    cout << "Insert a number" << endl;
    getline(cin, dataInput);
    cout << "You entered: " << dataInput << endl;
    double numberValue = convertToDouble(evaluateNextValue(0, dataInput));

    cout << "Adding ten: " << numberValue + 10;
    return 0;
} 
```

事情是这样的：就像现在一样，evaluateNextValue() 返回一个字符串，它可以工作。对我来说这似乎有点笨拙（可能对你来说这一切都看起来很笨拙），但它确实有效。

当我让代码在函数中操作变量结果时，它工作正常。我只是将字符串转换为双精度，我可以使用它。

**但是**，当我将字符串转换为双精度并尝试返回双精度时。. . double 在函数本身中工作正常。但是当它到达 main() 时它是 nan。更奇怪（或者至少同样奇怪）是试图返回一个 int 确实返回一个 int，但从来没有任何远程连接到我输入的值的事实。

我将不胜感激您愿意提供的任何帮助。而且，由于这是我在这里的第一篇文章，我对任何风格指针都持开放态度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T12:18:33.680

`evaluateNextValue`如果由于循环条件而到达字符串末尾，则返回值未定义`for`（因为那里没有`return`语句）。这会触发未定义的行为，其中可能包括返回 NaN 值。

您应该启用编译器的警告以捕获此类错误。

# javascript - 从 textarea 中检测已删除的单词

> ID：11244416
> 
> 赞同：1
> 
> 时间：2012-06-28T12:15:17.493
> 
> 标签：javascript, forms, tags, textarea, submit

我目前在使用表单标签时遇到了困难。我现在添加了向文本区域添加标签的功能，这很酷，而且效果很好。我现在正在尝试实现一种方法，当删除 textarea 中的标签词时，它会使标签按钮处于非活动状态，就像您单击它创建的标签和使用 css 的活动状态一样。

我知道这将需要正则表达式，但老实说我不知道​​我将如何完成这项工作。任何帮助将不胜感激。

谢谢，马克

这会将 taglist 中的标签添加到表单 textarea 中：

```
$('#tagList li a').each(function() {
    $(this).on('click', function(e) {
        var selectedTags = $('#field5').val();
        if (selectedTags === '') {
            selectedTags = $(this).text();
        } else {
            selectedTags += ', ' + $(this).text();
        }
        $('#field5').val(selectedTags);
        return false;
    });
}); 
```

这就是单击后在标签按钮本身上创建活动状态的原因：

```
$(function() {
    $("ul#tagList li").bind("mousedown",function() {
        $("img", this).css("z-index", "9999999");
        $("img.overlay", this).css("z-index", "999999");              
    });
}); 
```

这有帮助吗？

干杯

# hibernate - 未找到 antrl-hibernate maven 依赖项

> ID：11244435
> 
> 赞同：1
> 
> 时间：2012-06-28T12:16:02.563
> 
> 标签：hibernate, maven, antlr

我尝试将休眠依赖项添加到我的 POM 文件中，但是 antlr 版本 2.7.7 有问题。

我把它放在我的 pom 文件中：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>4.1.4.Final</version>
</dependency> 
```

我得到的错误是

```
ArtifactTransferException: Failure to transfer antlr:antlr:jar:2.7.7 from http://repo1.maven.org/maven2 was cached in the local repository 
```

我尝试通过使用排除它

```
<exclusions>
  <exclusion>
     <groupId>antlr</groupId>
     <artifactId>antlr</artifactId>
  </exclusion>
</exclusions> 
```

，但我得到

```
java.lang.NoClassDefFoundError:LEntityManager 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:40:55.307

嗯……挺诡异的。再试一次，但将`-U`开关添加到 Maven 命令。它应该有所帮助，但我仍然看不出这个奇怪消息的原因。刚刚出现在 Maven Central 中的工件可能会发生这种情况，您必须等待几个小时，因为那是您的本地缓存到期时间，但这个`antlr`版本是 2007 年的！

# icefaces - 带有分页器的 Ace Datatable 行选择器

> ID：11244436
> 
> 赞同：0
> 
> 时间：2012-06-28T12:16:02.593
> 
> 标签：icefaces, ace-datatable

我正在使用带有分页的 ace 数据表。现在，在选择一些行后的页面中，当我转到另一个页面并返回时，选择消失了。不再选择行。

这是代码：

```
<ace:dataTable var="device" value="#{reportBean.searchTableList}"
                        id="MeterTable" rows="10" paginator="true"
                        paginatorPosition="bottom" page="1" selectionMode="multiple"
                        stateMap="#{reportBean.rowStateMap}" pageCount="4" 
                        rowStyleClass="oddRow1,evenRow1">

                        <ace:column id="column3" headerText="Meter Name"
                            sortBy="#{device.device_name}" filterBy="#{device.device_name}"
                            selected="true"
                            filterMatchMode="contains" styleClass="dataTableHeader">
                            <ice:outputText value=" #{device.device_name}" />
                        </ace:column>
</ace:dataTable> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:11:37.390

好像您的 reportBean 是 RequestScoped。这意味着当您浏览到带有表格的页面时，reportBean 被加载，当您进行选择时，选择值存储在 reportBean.rowStateMap 中。当浏览到另一个页面时，reportBean 和选择信息被删除，因为它不是同一个请求（Request Scoped！）。当您再次浏览到表格页面时，会创建一个新的 reportBean，它没有任何有关选择的信息

您可以尝试将您的 reportBean 更改为 SessionScoped 但这有其他影响，您应该考虑。

# joomla1.5 - joomla！1.5.26 和“您当前登录到本网站的私人区域”

> ID：11244439
> 
> 赞同：2
> 
> 时间：2012-06-28T12:16:09.113
> 
> 标签：joomla1.5

当 Joomla！(1.5.26) 会话已过期，我重新登录，提交用户名和密码后，我收到此消息：“您当前登录到此站点的私人区域。” 如果我单击另一个内部链接，则重定向有效，但是如果我重新单击相同的返回 url 链接（我所在的会话已过期），我将重新获得上一条消息，但我已正确登录！我使用 Joomla！海基会。没有其他外部组件/模块/插件。

为了让它运行，我必须手动删除浏览器的缓存！

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:56:00.567

刚刚发生在我身上，记得看到你的问题。我不知道您对 SEF 的影响是什么，但就我而言，本机 Joomla 网址“正常”工作：

`http://mysite.com/?option=com_mycomponent&view=myview&Itemid=48`

当我无意中排除了如下所示的“视图”时，它给了我与您遇到的相同的结果：

`http://mysite.com/?option=com_nmm&Itemid=48`

这向我表明您的 SEF 正在将友好的 url 转换为无效的 Joomla url。希望这可以帮助！Joomla*知道*您已登录，但缺少显示您所期望的任何内容所需的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:41:27.327

几个月后我明白了！！！Joomla！1.5.26 文件 /libraries/joomla/application/application.php 中的第 324 行注释以下行

```
/*
if (!$moved && strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'webkit') !== false) {
    // WebKit browser - Do not use 303, as it causes subresources reload (https://bugs.webkit.org/show_bug.cgi?id=38690)
    echo '<html><head><meta http-equiv="refresh" content="0;'. $url .'" /></head><body></body></html>';
}
else {
    // All other browsers, use the more efficient HTTP header method
    header($moved ? 'HTTP/1.1 301 Moved Permanently' : 'HTTP/1.1 303 See other');
    header('Location: '.$url);
}
*/ 
```

并且只离开

```
// All other browsers, use the more efficient HTTP header method
header($moved ? 'HTTP/1.1 301 Moved Permanently' : 'HTTP/1.1 303 See other');
header('Location: '.$url); 
```

webkit 错误已解决。在这里检查：[错误 38690 - 提交导致服务器重定向的 POST 会导致所有缓存的项目重新下载](https://bugs.webkit.org/show_bug.cgi?id=38690)

# sql-server - 如何插入到表中，但前提是记录不存在

> ID：11244442
> 
> 赞同：2
> 
> 时间：2012-06-28T12:16:19.740
> 
> 标签：sql-server, sql-server-2005

我有一个存储以下内容的表：

```
JobID
ValidationItemID
CreatedBy 
```

我希望能够插入到这个表（一个预定义的模板）中，但只添加不存在的行。我的意思是不存在是 JobID 和 ValidationItemID 的组合使行唯一。我的过程传入了 JobID，但我无法传入验证项 ID，因为我将此列作为模板的一部分...

有这样的效果：

```
CREATE PROCEDURE insTemplate 
    @JobID varchar(50),
    @Login varchar(50)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    INSERT INTO
            ValidationItemSignOff
                (
                    JobID,  
                    ValidationItemID,
                    CreatedBy
                )

        SELECT 
        DISTINCT
            @JobID,
            vi.ValidationItemID,
            @Login
        FROM
            RunOffAnswer roa
        INNER JOIN
            Method m ON m.MethodID = roa.MethodID
        INNER JOIN
            RunOffValidationItem vi ON vi.ValidationItemID = m.ValidationItemID
        WHERE
            vi.Inactive=0
            AND NOT EXISTS(SELECT * FROM ValidationItemSignOff WHERE JobID=@JobID AND vi.ValidationItemID ???
END
GO 
```

我不知道如何表达 where 条件，以便它不会重新插入相同的 JobID 和 ValidationItemID。可以说我在桌子里面：

```
Job      ValidationItem
Job A          1
Job A          2
Job A          5 
```

我有一个包含以下内容的模板：

```
ValidationItem
1
2
3
4
5
6 
```

当我运行我的存储过程时，它应该只从模板表中插入值 3、4、6，用于作业 id ......所以我需要关于 where 条件的帮助。

我认为我的问题是我不能使用`NOT EXISTS`，也许我需要重新加入到这个 ValidationItemSignOff 表本身，`JobID`并且`ValidationItemID`在哪里`ValidationItemID`是 NULL，可能是这样的：

```
CREATE PROCEDURE insTemplate 
    @JobID varchar(50),
    @Login varchar(50)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    INSERT INTO
            ValidationItemSignOff
                (
                    JobID,  
                    ValidationItemID,
                    CreatedBy
                )

        SELECT 
        DISTINCT
            @JobID,
            vi.ValidationItemID,
            @Login
        FROM
            RunOffAnswer roa
        INNER JOIN
            Method m ON m.MethodID = roa.MethodID
        INNER JOIN
            RunOffValidationItem vi ON vi.ValidationItemID = m.ValidationItemID
        RIGHT OUTER JOIN
            ValidationItemSignOff viso ON viso.JobID = @JobID
                  AND viso.ValidationItemID = vi.ValidationItemID
        WHERE
            vi.Inactive=0
            AND viso.ValidationItemID IS NULL
END
GO 
```

# 明白了我觉得

用这个替换右连接：

```
LEFT JOIN
        ValidationItemSignOff viso
        ON  viso.JobID = @JobID
        AND viso.ValidationItemID = vi.ValidationItemID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:41:18.653

如果您在 2008 年或以上...

```
MERGE INTO ValidationItemSignOff As Target
USING (SELECT DISTINCT @JobID, vi.ValidationItemID, @Login
         FROM RunOffAnswer roa INNER JOIN 
              Method m
           ON m.MethodID = roa.MethodID INNER JOIN
              RunOffValidationItem vi
           ON vi.ValidationItemID = m.ValidationItemID
        WHERE vi.Inactive = 0) As Source (JobID, ValidationItemID, Login)
   ON Target.JobID = Source.JobID 
  AND Target.ValidationItemID = Source.ValidationItemID
 WHEN NOT MATCHED BY TARGET THEN
      INSERT (JobID, ValidationItemID, CreatedBy)
      VALUES (Source.JobID, Source.ValidationItemID, Source.Login); 
```

*免责声明：*我可能没有在这里找到语法点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:53:55.803

我得到了它：

```
ALTER PROCEDURE insSignOffTemplate 
    @JobID varchar(50),
    @Login varchar(50)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    INSERT INTO
            ValidationItemSignOff
                (
                    JobID,  
                    ValidationItemID,
                    CreatedBy
                )

        SELECT 
        DISTINCT
            @JobID,
            vi.ValidationItemID,
            @Login
        FROM
            RunOffAnswer roa
        INNER JOIN
            Method m
        ON
            m.MethodID = roa.MethodID
        INNER JOIN
            RunOffValidationItem vi
        ON
            vi.ValidationItemID = m.ValidationItemID
        LEFT JOIN
        ValidationItemSignOff viso
        ON  viso.JobID = @JobID     AND viso.ValidationItemID = vi.ValidationItemID
        WHERE
            vi.Inactive=0
            AND viso.ValidationItemID IS NULL
END
GO 
```

# iphone - OpenGL ES 2.0 - 有没有办法从灰度纹理中读取像素颜色？

> ID：11244446
> 
> 赞同：0
> 
> 时间：2012-06-28T12:16:37.803
> 
> 标签：iphone, ios, opengl-es

我使用 GL_LUMINANCE 格式加载带有灰度图像的纹理。

当我`float NP = texture2D(input1, textureCoordinate).r;`在片段着色器中使用时，程序失败。

是否可以读取像素灰度值，或者我是否仅限于使用 4 个通道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:18:07.640

当然。这是一些加载“高度图”的 GL 代码（灰度级存储为`float`'s）。纹理存储在单元 0 中。

```
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, textureNames[0]);
...
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE,
             heightMap.W, heightMap.H, 0,
             GL_LUMINANCE, GL_FLOAT, &heightMap.elev[0]); 
```

这是我的顶点着色器中的相关代码。制服`HeightMap`为 0（单位 0）。

```
 float z = texture2D(HeightMap, TexCoord0).x * ElevScale + ElevShift; 
```

奇迹般有效。

# android - 使用 Mockito 模拟 android 应用程序，例如联系人应用程序

> ID：11244448
> 
> 赞同：1
> 
> 时间：2012-06-28T12:16:43.233
> 
> 标签：android, mockito, functional-testing

我正在尝试为 android 应用程序编写功能测试。问题是我探索过的大多数功能测试框架（calabash-android、robotium）都对来自不同应用程序的可在同一测试中测试的活动数量有限制。因此，如果在一个工作流程中我需要从 android 联系人选择器中选择一些联系人，我将无法测试整个流程，因为联系人选择器活动是 android 联系人应用程序的一部分，并且框架无法测试来自我的应用程序和联系人应用程序的活动同时。

我的团队想到的一种可能的解决方案是模拟对联系人活动的调用，以返回带有联系人信息的虚拟意图，以便可以测试我们的应用程序工作流程。我们正在尝试使用 mockito 来实现这一点。但是我很早就被困住了。这是我想要做的

```
MyActivity mockActivity = mock(MyActivity.class);
when(mockActivity.startActivityForResult(<?>,anyInt())).thenReturn(fakeIntent); 
```

我不确定在第二行的第一个参数中放入什么。我已经尝试过 Intent.class 和 android.content.Intent.class 但是它会引发编译错误。如果有人使用 mockito 进行过模拟活动，我们将不胜感激。

PS - 如果我理解正确，单元测试比功能测试更多地使用模拟。所以这些测试更像是一种混合。如果有人对如何在 android 上进行这些功能测试有更好的建议，我会全力以赴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:46:32.987

在不知道方法签名的情况下很难回答这个问题`startActivityForResult`，但总体思路是使用`any(Xxx.class)`，其中`Xxx`是参数的类型。所以要么

```
when(mockActivity.startActivityForResult(any(Xxx.class),anyInt())).thenReturn(fakeIntent); 
```

或（等价的）

```
doReturn(fakeIntent).when(mockActivity).startActivityForResult(any(Xxx.class),anyInt()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T07:16:44.800

问题是您无法真正“模拟”（实际上是“间谍”）您正在测试的活动，因为它是由 Android 的检测代码在您无法控制的情况下创建的。在您可以控制的单元测试环境中，您可以遵循`mock(MyActivity.class)`or`spy(myActivityInstance)`路径（spy 实际上会更好，因为您可以重用活动的大部分原始实现），但这里不是。

我为这个困境找到的唯一解决方案是将某些功能从活动中移到实用程序类中，理想情况下使用[roboguice](https://github.com/roboguice/roboguice)来处理活动结果（`@ContextSingleton`s 可用于处理活动结果）。然后，在您的测试项目中，您将创建自己的测试 guice 注入器，在您`getActivity()`第一次调用之前将其设置为基本应用程序注入器，然后让活动在您的模拟实用程序类上工作。

[我在这里概述了完整的过程。](http://www.thomaskeller.biz/blog/2012/10/18/runtime-replace-implementations-with-roboguice-in-functional-tests/)

# c# - Sqlite“数据源不能为空”

> ID：11244452
> 
> 赞同：3
> 
> 时间：2012-06-28T12:16:52.093
> 
> 标签：c#, sqlite

我收到错误“数据源不能为空。使用 :memory: 打开内存数据库”

这是我的连接字符串：

```
// Get Current Users App Data
            string documentsFolder = Environment.GetFolderPath
            (Environment.SpecialFolder.ApplicationData);
            string[] tempstr = documentsFolder.Split('\\');
            string tempstr1 = "";
            documentsFolder += "\\Google\\Chrome\\User Data\\Default\\History";
            if (tempstr[tempstr.Length - 1] != "Local")
            {
                for (int i = 0; i < tempstr.Length - 1; i++)
                {
                    tempstr1 += tempstr[i] + "\\";
                }
                documentsFolder = tempstr1 + "Local\\Google\\Chrome\\User Data\\Default\\History";
            }

            // Check if directory exists
            if (Directory.Exists(documentsFolder))
            {
            //    return ExtractUserHistory(documentsFolder);

            }

            string connectionString;
            connectionString = string.Format(@"DataSource={0}", documentsFolder); 
```

这是我的联系：

```
 SQLiteConnection conn = new SQLiteConnection(connectionString);
    conn.Open(); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T12:19:55.200

当连接字符串错误时会给出该错误。

在`@"Data Source={0}"` 你必须放 Data Source 而不是 DataSource

希望能帮助到你。

# maven - 如何使用嵌套模块打包多模块 maven 项目

> ID：11244453
> 
> 赞同：7
> 
> 时间：2012-06-28T12:16:54.013
> 
> 标签：maven, build, module, pom.xml, multi-module

我在 Maven 中有一个可以正确编译但没有正确打包的多模块项目。

在主 maven`pom.xml`中，我包含这样的模块：

```
<modules>
    <module>module1</module>
    <module>module1/test</module>
    <module>module2</module>
    <module>module2/test</module>
    ...
    <module>moduleN</module>
    <module>moduleN/test</module>
</modules> 
```

与 maven 约定不同，该项目必须将其测试源代码树编译为单独的模块，因为测试代码的编译依赖项与主源代码的依赖项不同。因此解决方案是将所有测试模块设置为依赖于任何主要源模块，以确保它们以正确的顺序编译。

这个项目的目录结构非常不标准。我已将 pom.xml 放置在我认为它们所属的位置。虽然我无法更改此目录结构 - 它超出了我的控制范围。它是这样的：

```
/
+- pom.xml
+- module1/
   +- pom.xml
   +- src/
      +- com/
          +- company/
             +- Module1.java
   +- test/
      +- pom.xml
      +- src/
          +- com/
             +- company/
                +- Module1Test.java
... 
```

这是常规源模块的 pom.xml 的样子。这完美地工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>com.company</groupId>
        <artifactId>project</artifactId>
        <version>5.3.1-SNAPSHOT</version>
    </parent>

    <artifactId>module1</artifactId>
    <packaging>jar</packaging>

    <dependencies>
        <dependency>
            <groupId>com.company</groupId>
            <artifactId>modulex</artifactId>
            <version>${product.version}-SNAPSHOT</version>
        </dependency>
    </dependencies>

    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src</sourceDirectory>

        <directory>target</directory>
        <outputDirectory>target/classes</outputDirectory>
        <testOutputDirectory>target/test-classes</testOutputDirectory>

        ...
    </build>

</project> 
```

这是一个测试模块的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>com.company</groupId>
        <artifactId>project</artifactId>
        <version>5.3.1-SNAPSHOT</version>

        <!-- I was forced to do this because this module was 2 levels deep -->
        <relativePath>../../pom.xml</relativePath>
    </parent>

    <artifactId>module1.test</artifactId>
    <packaging>jar</packaging>

    <dependencies>
        <dependency>
            <groupId>com.company</groupId>
            <artifactId>module1</artifactId>
            <version>${product.version}-SNAPSHOT</version>
        </dependency>
    </dependencies>

    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src</sourceDirectory>
        <testSourceDirectory>src</testSourceDirectory>

        <directory>target</directory>
        <outputDirectory>target/classes</outputDirectory>
        <testOutputDirectory>target/test-classes</testOutputDirectory>

        ...
    </build>

</project> 
```

但是，由于测试模块是主模块的子目录，因此一旦尝试打包 module.test，就会出现以下错误：

```
[ERROR] Failed to execute goal on project module1.test: Could not resolve dependencies for project com.company:module1.test:jar:5.3.1-
SNAPSHOT: Could not find artifact com.company:module1:jar:5.3.1-SNAPSHOT in repo1.maven.org (http://repo1.maven.org/maven2/) -> [Help 1] 
```

出于某种原因，Maven 认为它需要从存储库中获取这个 jar，即使它之前只是构建了它......

我是否需要像其他人一样将 module1/test 中的 pom.xml 移动到父级别？如何在不移动 pom.xml 的情况下解决此问题？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T15:35:31.950

首先，在 Maven 中，生产代码和测试代码有不同的文件夹。

```
src/main/java

src/test/java 
```

此外，src/main/java 中的代码将由 maven-compiler-plugin 编译，其目标是：编译，而测试代码 src/test/java 也将由 maven-compiler-plugin 编译，但其目标是：testCompile .

如果您有不同的测试和生产依赖项，您可以定义一个范围以及依赖项，如下所示：

```
 <dependency>
     <groupId>org.testng</groupId>
     <artifactId>testng</artifactId>
     <version>6.2.1</version>
     <scope>test</scope>
   </dependency> 
```

这意味着这将仅在测试代码区域内可用，并且不会被打包。如果您不定义范围：

```
 <dependency>
     <groupId>org.testng</groupId>
     <artifactId>testng</artifactId>
     <version>6.2.1</version>
   </dependency> 
```

这是一个用于生产的依赖项，如果你有像“war”这样的打包类型，它将被打包。

我见过这样的事情，我认为这是一个错字：

```
<dependencies>
    <dependency>
        <groupId>com.company</groupId>
        <artifactId>modulex</artifactId>
        <version>${product.version}-SNAPSHOT</version>
    </dependency>
</dependencies> 
```

这是完全错误的，因为你必须使用：

```
 <dependencies>
        <dependency>
            <groupId>com.company</groupId>
            <artifactId>modulex</artifactId>
            <version>${project.version}</version>
        </dependency>
    </dependencies> 
```

${product.version} 没有定义，你应该使用 ${project.version} 来代替！！

我建议不要在一个步骤中跳过两个级别...您应该像这样更改项目的结构：

```
/
+- pom.xml
+- module1/
   +- pom.xml
   +-- module1-src
        +- pom.xml
        +- src/main/java
            +- com/
               +- company/
                 +- Module1.java
   +-- module1-test
        +- pom.xml
        +- src/
          +- com/
             +- company/
                +- Module1Test.java
... 
```

基于上述结构，您将获得如下信息：

```
<modules>
    <module>module1</module>
    <module>module2</module>
    ...
    <module>moduleN</module>
</modules> 
```

在模块1中：

```
<modules>
    <module>module1-src</module>
    <module>module1-test</module>
</modules> 
```

否则，您将开始与 Maven 战斗，您将失去战斗。

# c# - 允许用户指定端点

> ID：11244456
> 
> 赞同：1
> 
> 时间：2012-06-28T12:17:05.777
> 
> 标签：c#, wpf, web-services

我在 WPF 中创建了一个桌面应用程序，希望以 .exe 文件的形式提供给客户端。

当前，该应用程序有一个引用它的 Web 服务，该 Web 服务将位于客户端 Web 服务器上。

Web 服务的 URL 很可能会根据客户端而改变，因此是否可以为用户添加一个选项，以便在他们知道 Web 服务 URL 后自己添加服务引用？

在`app.config`此处设置端点地址，因此如果应用程序启动时，它会向用户显示一个文本框以输入 url，然后单击按钮应用程序更新服务引用。这可能吗？

我遇到了很多不同的文章，但是不确定是否可以不必重新编译代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:35:41.540

假设它是一个 WCF 服务，如果它被调用`Service1`，你可以像这样设置它的地址：

```
Service1Client wcfServiceClient = new Service1Client();
wcfServiceClient.Endpoint.Address = new System.ServiceModel.EndpointAddress("your uri here");
//now you will invoke the service in the address you defined 
```

`Service1`可以像这样设置一个 ASMX 服务（在此示例中仍然调用以保持一致性）：

```
Service1 asmxService = new Service1();
asmxService.Url = "your uri here"; 
```

# wpf - 如何在 WPF Grid 中设置行边框和背景颜色

> ID：11244457
> 
> 赞同：21
> 
> 时间：2012-06-28T12:17:06.807
> 
> 标签：wpf, grid, wpf-controls

我们如何在 WPF 网格控件中设置边框和背景颜色，
我正在动态创建行和列然后添加到网格中，
我们可以从后面的代码中设置颜色和边框吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-09-23T19:15:01.577

这是一个似乎运作良好的hack。如果您将背景元素与通常放置在那里的元素一起放置在行/列中，它将充当背景。您只需要注意 XAML 中元素的顺序（元素以递增的 Z-Order 出现），或相应地设置 Panel.Zorder。

```
<Window x:Class="gridBackground.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
        <Border Background="Red" />
        <Border Grid.Row="2" Grid.Column="1"  Background="Red" />        
        <Border  Grid.Row="1" Background="LightBlue" />       
        <Border Grid.Row="2" Background="Orange" />
        <Border Grid.Row="0" Grid.Column="1" Background="Orange" />
        <TextBlock Grid.ColumnSpan="2" Grid.Row="1" Text="Here is some more text" HorizontalAlignment="Center"  VerticalAlignment="Center"/>
        <TextBlock Grid.ColumnSpan="2" Text="Here is some text" HorizontalAlignment="Center"  VerticalAlignment="Center"/>
        <TextBlock Grid.ColumnSpan="2" Grid.Row="2" Text="Here is even more text" HorizontalAlignment="Center"  VerticalAlignment="Center"/>
    </Grid>
</Window> 
```

它看起来像这样：

![在此处输入图像描述](../Images/736f883aa27702a9ab216ba7d113df67.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-28T12:51:02.877

`Background`可以`Grid`使用以下属性`Background`为整体设置颜色：

```
<Grid Background="Red" /> 
```

或者，如果您希望为单个单元格设置它，则需要将一个元素添加到具有其`Background`属性集的单元格中。

至于Borders，a`Grid`只包含`ShowGridLines`属性，可以用来显示无法设置样式的细虚线。

根据 MSDN：

> 只有虚线可用，因为此属性旨在用作调试布局问题的设计工具，而不是用于生产质量代码。如果您想要网格内的线条，请将网格内的元素设置为具有边框。

因此，为了向网格添加边框，您必须将`Border`包含 a 的元素或控件添加`Border`到网格单元格，并设置这些元素的样式。

但有一个替代方案。[此博客文章](http://blog.saraf.me/2011/03/change-color-thickness-of-grid-lines.html)概述了如何扩展 Grid 类以创建具有`Grid`线属性的自定义 Grid。[过去](https://stackoverflow.com/q/7449844/302677)，当我想渲染网格线但不想用对象填充每个单元格时，我已经成功地使用过它。

```
<my:CustomGrid ShowCustomGridLines="True"
               GridLineBrush="Blue"
               GridLineThickness="1"> 
```

# algorithm - 从给定的数字数组中找到总和值为 N 的 3 组中的所有数字

> ID：11244464
> 
> 赞同：1
> 
> 时间：2012-06-28T12:17:31.533
> 
> 标签：algorithm

给定的是一个数字数组：

```
1, 2, 8, 6, 9, 0, 4 
```

我们需要找到三个一组中的所有数字，它们的总和为 N（在本例中为 11）。在这里，三人一组的可能数字是：

```
{1,2,8}, {1,4,6}, {0,2,9} 
```

我能想到的第一个解决方案是 O(n^3)。后来我可以用这种方法改进一点（n^2 log n）：

```
1\. Sort the array.
2\. Select any two number and perform binary search for the third element. 
```

可以通过其他一些方法进一步改进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:23:59.717

你当然可以这样做`O(n^2)`：对于`i`数组中的每一个，测试其他两个值的总和是否为`N-i`。

您可以通过一次从两端扫描来测试`O(n)`排序数组中的两个值是否相加。`k`如果您所在的两个元素的总和太大，请减少“从右到左”索引以使其更小。如果总和太小，则增加“从左到右”索引以使其更大。如果有一对有效，您会找到它们，并且您最多执行`2*n`迭代，然后在一端或另一端用尽道路。您可能需要代码来忽略您使用的值 as `i`，这取决于规则是什么。

相反，您可以使用某种动态编程，从 开始向下工作`N`，并且您最终可能会得到类似`O(n*N)`左右的时间。实际上，我认为这并没有更好：看起来你所有的数字都是非负数，所以如果`n`比`N`你开始之前大得多，你可以快速从数组中抛出任何大值，以及超过 3 个副本的任何重复项每个值（或 2 个副本，只要您`3*i == N`在丢弃 的第 3 个副本之前检查是否`i`）。在这一步之后，`n`是`O(N)`。

# php - 自 PHP 5.3 起 mssql_connect 不再工作

> ID：11244470
> 
> 赞同：4
> 
> 时间：2012-06-28T12:17:41.283
> 
> 标签：php, sql-server, sql-server-2005, php-5.3, deprecated

我刚刚收到我们主机的一封电子邮件，他们已将我们的 PHP 升级到 5.3，但不幸的是，所有脚本现在都已损坏。我将其追溯到函数**mssql_connect**失败。支持人员告诉我，这现在已在 5.3 下被弃用 - 这怎么可能是真的？

现在如何连接到 PHP 5.3 下的 mssql 数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:21:40.330

[http://www.php.net/manual/en/intro.mssql.php](http://www.php.net/manual/en/intro.mssql.php)

“此扩展在 Windows 上不再提供 PHP 5.3 或更高版本。”

也许您应该考虑将您的应用程序转换为使用 PDO： [http ://www.php.net/manual/en/ref.pdo-sqlsrv.php](http://www.php.net/manual/en/ref.pdo-sqlsrv.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:21:08.413

如果您看到这样的警告，首先访问的是 PHP 文档。

从[http://php.net/manual/en/intro.mssql.php](http://php.net/manual/en/intro.mssql.php)：

> 介绍
> 
> 这些功能允许您访问 MS SQL Server 数据库。
> 
> 此扩展在具有 PHP 5.3 或更高版本的 Windows 上不再可用。
> 
> SQLSRV，Microsoft SQL 的替代驱动程序可从 Microsoft 获得：» [http://msdn.microsoft.com/en-us/sqlserver/ff657782.aspx](http://msdn.microsoft.com/en-us/sqlserver/ff657782.aspx)。

# android - SurfaceView 中的 2 个正方形。一张图片是透明的

> ID：11244477
> 
> 赞同：0
> 
> 时间：2012-06-28T12:18:07.580
> 
> 标签：android, opengl-es, textures

这是我的代码：

```
package hello.project;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.opengl.GLSurfaceView.Renderer;
import android.opengl.GLU;

public class HelloOpenGLES10Renderer implements Renderer {

 private Square   square;
 private Square2   square2;// the square
 private Context     context;
 private Context     context2;

 /** Constructor to set the handed over context */
 public HelloOpenGLES10Renderer(Context context) {
  this.square  = new Square();
  this.square2  = new Square2();
  this.context=context;

 }

 public void onDrawFrame(GL10 gl) {
  // clear Screen and Depth Buffer
  Square.loadGLTexture(gl, this.context,Square.getSex()); 
  Square2.loadGLTexture(gl, this.context,Square2.getHair()); 
  gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    // Reset the Modelview Matrix
    gl.glLoadIdentity();

    // Drawing
    gl.glTranslatef(0.0f, 0.0f, -5.0f);  // move 5 units INTO the screen
    square.draw(gl);
    square2.draw(gl); 
 }

 public void onSurfaceChanged(GL10 gl, int width, int height) {
  if(height == 0) {       //Prevent A Divide By Zero By
   height = 1;       //Making Height Equal One
  }

  gl.glViewport(0, 0, width, height);  //Reset The Current Viewport
  gl.glMatrixMode(GL10.GL_PROJECTION);  //Select The Projection Matrix
  gl.glLoadIdentity();      //Reset The Projection Matrix

  //Calculate The Aspect Ratio Of The Window
  GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f, 100.0f);

  gl.glMatrixMode(GL10.GL_MODELVIEW);  //Select The Modelview Matrix
  gl.glLoadIdentity();      //Reset The Modelview Matrix
 }

 public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    // Load the texture for the square

    Square.loadGLTexture(gl, this.context,Square.getSex());

    gl.glEnable(GL10.GL_TEXTURE_2D); 
    gl.glDisable(GL10.GL_DEPTH_TEST);
    gl.glEnable(GL10.GL_BLEND);

    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

    gl.glShadeModel(GL10.GL_SMOOTH);    //Enable Smooth Shading
    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);  //Black Background
    gl.glClearDepthf(1.0f);      //Depth Buffer Setup
    gl.glDepthFunc(GL10.GL_NEVER);    //The Type Of Depth Testing To Do

    //Really Nice Perspective Calculations
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
   }
} 
```

该应用程序如下所示： ![伊姆古尔](../Images/5291969278ccc43d2782db9d37cab0cf.png)

如您所见，头发的纹理是透明的。关于我能做什么的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T06:58:22.330

不知何故，这对我有用：

```
 gl.glEnable(GL10.GL_BLEND); 
 gl.glEnable(GL10.GL_TEXTURE_2D); 
 gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA); 
 gl.glShadeModel(GL10.GL_FLAT); 
 gl.glColor4f(1.0f, 1.0f, 1.0f, 2.0f); 
```

# android - Android：处理程序不起作用

> ID：11244480
> 
> 赞同：0
> 
> 时间：2012-06-28T12:18:18.170
> 
> 标签：android, multithreading, handler

我正在尝试从 Android 中的服务器加载对象。此对象在线程中加载。加载完成后，调用 _objectHandler 以从对象中获取一些键值，例如 _filename 键。每次检索文件名时，我都想显示它。出于这个原因，我在第二个线程中循环加载对象的元素，并在每次加载值时调用 _handler。我想要得到的是所有的_filename 值，但我得到的只是_filename 的最后一个值。我做错了什么？

```
ArrayList <myObject> object;
String filename;

Thread thread = new Thread (MyActivity.this);
thread.start();

public void run() {
    Looper.prepare();
    try {
        object = getObjectFromServer();
    } catch (Exception e) {
        e.printStackTrace();
    }
    _objectHandler.sendEmptyMessage(0);
    Looper.loop();
}

Handler _objectHandler = new Handler() {
@Override
    public void handleMessage(Message msg) {
        for (int i = 0; i < object.size(); i++) {
            myObject obj= object(i);
            new Thread(new Runnable() {
                 public void run() {
                      filename= obj.getFileName();
                      Message msg = new Message();
                      _handler.sendEmptyMessage(0);
                 }
            }).start();
        }
    }
};

Handler _handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        Log.i("The fielname is ", " filename" + filename
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:24:40.333

你可以使用 android.os.Handler 类。这将为您提供一种机制，用于将要在与您自己的线程不同的线程上执行的操作排入队列。

# php - Post 方法在 Codeigniter 中不起作用

> ID：11244482
> 
> 赞同：2
> 
> 时间：2012-06-28T12:18:25.910
> 
> 标签：php, jquery, ajax, codeigniter

我正在使用 HMVC codeigniter。我第一次尝试使用 jquery ajax。当我使用 POST 时，它会在使用 GET 时响应我的数据时给出未定义的错误。

```
 $.ajax({
          type: "POST",
          url: filelink+"cart/add_cart_item",
          data: {"product_id":id,"quantity":qty,"ajax":"1"},
          dataType: "json",
              success: function(msg){
           alert( "Data Saved: " + msg );
           },
               error: function(jqXHR, textStatus, errorThrown){ 
           alert(textStatus + " " + errorThrown);
            }
      }); 
```

**在谷歌搜索和 SO-ing- 之后我到目前为止所尝试的**

1.  我的文件 url 位置可以直接访问。我检查了它。给予回应。

2.  Firebug 为同一文件提供 500 个内部服务器错误。

3.  使用 Get 对我的反应很好

4.  在数据类型中添加 json

**控制器功能**

```
 class Cart extends CI_Controller { // Our Cart class extends the Controller class

  function __construct()
     {
    parent::__construct();  
    $this->template->set('controller', $this);
     }

  function _remap()
    {
       $uri2 = $this->uri->segment(2);  
       if (is_numeric($uri2) OR $uri2 == FALSE) {
        $this->index(); 
       } else if ($uri2 == 'add_cart_item') {
        $this->add_cart_item();
       } else if ($uri2 == 'show_cart') {
        $this->show_cart();
       }
     }

function add_cart_item(){
      echo "asdfsadfdsf";
      exit; 
    }
  } 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:29:13.523

您的问题有可能的原因

您可能正在使用未加载的模型。
模型中可能存在一些代码问题。
你可能不会从你的模型中返回任何东西并回显它。
此外，如果您需要返回数据，请使用 echo json_encode($data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:30:01.313

[有时，当您将站点加载为https://example.com](https://example.com)但 ajax 调用中的 url 是[http://example.com](http://example.com)时，有时会出现此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T12:41:47.597

设法找到解决方案。问题是由于 CI_TOKEN 与 FORM 一起发送的。那是不存在的，由于哪个 POST 方法给出了 500 内部服务器错误。我在我的视图文件中添加了以下内容。

```
 <?php echo form_open_multipart(); ?>
 <?php echo form_close(); ?> 
```

并使用 ajax 发布请求发送 ci_token。

```
 var ci_token = formObj.find('input[name=ci_token]').val();
 var qty = 1;
 var dataString = 'product_id='+ id + '&quantity=' + qty + '&ajax=' + 1 
 +'&ci_token=' +            ci_token; 
```

这解决了问题。我不确定，但这被称为 CSRF 相关的一些问题

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T08:09:39.650

您已经使用了 _remap 函数，并且在获得 $uri2 之后，有一个 if 检查正在检查您在 ajax 请求中传递的数量变量，它可能具有整数值，因为显然可能包含一些整数。在那里

```
$this->uri->segment(); 
```

返回你：

```
product_id=id
quantity=qty
ajax=1 
```

并且您通过调用获取值 2 即数量

```
$uri2 = $this->uri->segment(2); 
```

它会向您返回数量，并且您没有在代码中定义 index() 函数，它会给出 500 错误

```
function _remap()
{
   $uri2 = $this->uri->segment(2);  
   if (is_numeric($uri2) OR $uri2 == FALSE) {
    $this->index(); 
   } else if ($uri2 == 'add_cart_item') {
    $this->add_cart_item();
   } else if ($uri2 == 'show_cart') {
    $this->show_cart();
   }
 } 
```

# objective-c - Xcode：如何在“未使用的函数”和“未使用的参数”失败下强制构建

> ID：11244483
> 
> 赞同：2
> 
> 时间：2012-06-28T12:18:27.547
> 
> 标签：objective-c, ios, xcode, xcode4.3, zxing

您好我正在尝试将 zxing 二维码阅读器合并到我的应用程序中。我直接从谷歌代码网站检查了 svn，并在我的项目设置中添加了所有标题路径。但是，当我尝试构建项目时，我遇到了很多“未使用的函数”和“未使用的参数”失败，因此无法构建。

例如，ZXingWidget 项目中有一个名为“- (void)cancel:(id)sender”的方法，我收到未使用参数“sender”的错误。

我可以强制构建项目吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:38:47.213

[在这个问题](https://stackoverflow.com/questions/10015974/old-code-gives-unused-parameter-error-but-never-has-before-now)上找到了答案

“所以我通过删除 -Werror 和 -Wextra 消除了错误。第一个标签使警告变成了错误。我现在不喜欢关闭它，但我被卡住了。”

# java - 如何在单个列表视图中实现长点击监听器和 onclicklistener

> ID：11244491
> 
> 赞同：4
> 
> 时间：2012-06-28T12:18:44.497
> 
> 标签：java, android, onclick

我正在android中创建一个应用程序。我正在使用列表视图。现在我想同时使用点击事件和长点击事件。如果可能的话可以帮我做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-07T15:31:38.970

你只需要返回true

```
list.setOnItemLongClickListener(new OnItemLongClickListener() {

    @Override
    public boolean onItemLongClick(final AdapterView<?> p, View v,final int po, long id) {

        // your code

    return true;
    }    
}); 
```

它基本上告诉系统已经处理了长按事件（默认为`false`），不需要处理进一步的事件（即单次按下，在长按事件中会无意中发生）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T12:23:57.347

看到这个

[ListActivity 中的单击和长按事件侦听器](http://android.konreu.com/developer-how-to/click-long-press-event-listeners-list-activity/)

```
lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> av, View v, int pos, long id) {
        onListItemClick(v,pos,id);
    }
}); 
```

..

```
 lv.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> av, View v, int pos, long id) {
            return onLongListItemClick(v,pos,id);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T12:28:25.633

您应该使用`ListView.setOnItemClickListener`一个简单的点击。

对于长按，您有一个选择。如果要执行单个操作，请使用`ListView.setOnLongClickListener`. 如果你想要一个上下文菜单，那么注册一个上下文菜单的列表，创建菜单和它的操作。

```
registerForContextMenu(ListView);

    @Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
       super.onCreateContextMenu(menu, v, menuInfo);
       // menu code here
    }
}

@Override
public boolean onContextItemSelected(MenuItem item) {
     // menu habdling code here
     return super.onContextItemSelected(item);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T12:21:55.287

使用 ListView.setOnItemClickListener(listener) 和 ListView.setOnItemLongClickListener(listener) [http://developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T12:23:20.810

只需在您的列表视图上使用`setOnItemClickListener()`和。`setOnItemLongClickListener()`

```
listView = (ListView) findViewById(R.id.listview);
listView.setOnItemClickListener(new OnItemClickListener()
    {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3){
        }
    });
listView.setOnItemLongClickListener(new OnItemLongClickListener()
    {
    @Override
    public boolean onItemLongClick(AdapterView<?> arg0, View arg1, final int position, long arg3)
    {

    }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-28T12:24:29.013

使用以下代码。

```
 list.setOnItemClickListener(this);
    list.setOnItemLongClickListener(this); 
```

侦听器定义将是：

```
 public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub

}

public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub

    return false;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-18T11:42:06.663

itemToclick 是点击你想要一些动作的可见部分

```
itemToClick.setOnClickListener(new View.OnClickListener() {
   @Override
    public void onClick(View v)      { 
      //do your logic on click 
     });
itemToClick.setOnLongClickListener(new View.OnLongClickListener() {
    @Override
    public boolean onLongClick(View v) {
      // do your logic for long click and remember to return it 
        return true; }}); 
```

# ios - iOS - 使用特定程序打开文件

> ID：11244492
> 
> 赞同：1
> 
> 时间：2012-06-28T12:18:46.007
> 
> 标签：ios, pdf

我有一个 pdf 文件，我想用一个特定的应用程序打开，比如 iBooks。我想拥有它，以便用户可以在当前安装的可以处理它的程序中设置他们想要打开它的程序。这是我拥有的代码，可以让我做到这一点，只有用户必须选择每次使用哪个应用程序（我想避免一个额外的步骤）：

```
NSString *stringVariable = cell.textLabel.text;

NSString *homeDir = NSHomeDirectory();
homeDir = [NSString stringWithFormat: @"%@/%@", homeDir, @"Documents"];  
NSString * filePath = [NSString stringWithFormat:@"%@/%@", homeDir, stringVariable]; 

documentController = 
[UIDocumentInteractionController 
interactionControllerWithURL:[NSURL fileURLWithPath:filePath]];
documentController.delegate = self;
[documentController retain];
documentController.UTI = @"com.adobe.pdf";
[documentController presentOpenInMenuFromRect:CGRectZero 
                                       inView:self.view 
                                     animated:YES]; 
```

因此 stringVariable 包含相关文档的名称，然后显示能够运行它的各种应用程序。如果我能以某种方式将其填充到某种选择器中，以便用户可以选择要使用的默认应用程序，那就太好了，但是如果我必须自己将其设置为特定的应用程序（例如 iBooks），那将起作用也。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:01:04.350

使用 UTI 参数。例如，如果您有 5 个支持 Instagram url 方案和文件类型的应用程序，只需使用以下命令：

```
documentController.UTI = @"com.instagram.exclusivegram"; 
```

它不会为您做出选择，但会将选择限制在应用程序所需的范围内。

# c# - Convert.ToInt32() 和 int() 有什么区别

> ID：11244493
> 
> 赞同：1
> 
> 时间：2012-06-28T12:18:51.873
> 
> 标签：c#, int

`Convert.ToInt32()`请检查以下代码，告诉我和之间有什么区别`int()`，为什么`Convert.ToInt32`显示错误？

这`UserType`是一个枚举

```
// Showing error constant initializer must be compile time constant
const int case1 = Convert.ToInt32(UserType.Admin); 

const int case2 = int(UserType.Admin); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:22:26.460

您正在将方法的返回值分配给常量，这是不允许的。在 .Net 中，需要在编译时知道常量的*值。*如果在运行时从方法调用中为其分配值，则这是不可能的。

对于一般情况，您可以稍微改变它并拥有逻辑上等效的代码：

```
static readonly int Case1 = Convert.ToInt32(UserType.Admin); 
```

但是，枚举允许对 an 进行简单的转换`int`，因此您的第二个示例可能是好的（尽管不是惯用的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:24:08.693

`Convert.ToInt32`是一个需要调用的方法。
它不是编译时常量，需要在运行时调用。

`(int)UserType.Admin`在编译时是常量，因为`UserType.Admin`它是一个常量并且`(int)`只是转换为 int。编译器可以毫无问题地对此进行评估。没有要调用的方法。

我宁愿建议不要将枚举转换为整数，因为与枚举类型相关的原始含义会丢失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:26:44.847

您收到此错误是因为：

> 常量表达式是可以在编译时完全计算的表达式。

[常量 - MSDN](http://msdn.microsoft.com/en-us/library/e6w8fe1b.aspx)

而且您`Convert.ToInt32()`不是编译时常量表达式，而是一种方法。

第 2 部分：

```
const int case2 = int(UserType.Admin); 
```

我相信你的意思是

```
const int case2 = (int)UserType.Admin; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T12:23:45.927

(int) 将只转换可以表示为整数的类型（即双精度、长整数、浮点数等），尽管可能会发生一些数据丢失。

Int32.Parse 只会将字符串转换为整数。您不能将（即（int）mystring）字符串转换为整数。

# ios - 运行时未找到 Localizable.strings

> ID：11244494
> 
> 赞同：0
> 
> 时间：2012-06-28T12:18:53.653
> 
> 标签：ios, localization, xamarin.ios, monodevelop, localizable.strings

我在 MonoTouch(5.2.12)/MonoDevelop(3.0.3.2) 中开发 ios 应用程序 (iPhone)

我试图将其本地化。

我创建了本地化文件夹 (de.lproj)(Add->New 文件夹)，并在那里放置了“Localizable.strings”文件。此文件已添加到项目中（添加-> 添加文件 ...）。

本地化不起作用。我发现本地化文件（Localizable.strings）不在运行时位置（/user/jpa/Library/Application Support/iPhone Simulator/5.1/Applications/A99 ...B13/MyApp.app/de.lproj/ )，即使在 MonoDevelop 中它们是。

为什么？怎么了？文件采用 UTF-8 编码。（它没有用 UTF-16 描述）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:06:06.243

我相信您需要将文件的构建操作设置为“内容”（右键单击文件-> 构建操作-> 内容）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:27:32.027

你如何称呼你的本地化字符串？你能给我们一段代码吗？

您无需手动创建本地化文件夹，只需：

*   创建一个`Localizable.string`文件（在项目资源管理器中右键单击然后“新建文件”）
*   选择它
*   打开 Xcode 右侧面板（如果尚未打开）
*   单击本地化部分中的 +，然后选择语言

此方法将防止操作错误，因为 Xcode 会自行创建本地化文件夹。

# c# - 正确处理参照完整性约束违规

> ID：11244501
> 
> 赞同：0
> 
> 时间：2012-06-28T12:19:08.547
> 
> 标签：c#, entity-framework-4.1

.Net4 实体框架，N 层（因此对象被分离）

我有 2 个对象首先生成数据库，这样 object1 具有对象 2 的导航属性 (1 - 1)。

我可以成功地更改对象 1 的其他属性，但是当我尝试更改对象 2 时出现错误。

我的网页有一个 object2 名称和索引的下拉列表。

我尝试设置 object1.object2Id 属性并保存它，但我得到一个引用键错误。（我可以看到这可能是因为该对象仍然持有原始对象2）。

但是，如果我加载新的 object2 并尝试更新 object1，则无法添加或附加该对象，因为它的 EntityReference 具有不匹配的实体键属性。

所以我似乎在兜圈子。

那么使用分离对象和实体框架，更新子对象/外键的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:58:15.447

好的，想通了。这是我在分离模式下工作的结果。如果我等到我在业务层即将编写更改，并在我将对象重新附加到它工作的上下文后更改 fk。

我想这只是我需要学习的一件事！

# iphone - 蓝牙 Xcode 可以控制器

> ID：11244502
> 
> 赞同：0
> 
> 时间：2012-06-28T12:19:11.283
> 
> 标签：iphone, objective-c, xcode, ipad, core-bluetooth

我正在做一个项目，我必须通过苹果 ipad 通过蓝牙将数据发送到与 CAN 控制器接口的蓝牙接收器，我正在寻求答案，我是这个论坛和 xcode 的新手，如果有的话会很好一个有答案。

等待您的好评回复，

典

# binding - 绑定 ItemsTemplate 数据模板和 ItemsPanelTemplate 属性

> ID：11244504
> 
> 赞同：2
> 
> 时间：2012-06-28T12:19:19.597
> 
> 标签：binding, datatemplate, itemscontrol, itemtemplate, itemspaneltemplate

我有一个`ItemsControl`模板化为 UserControl 的项目。我`ItemsControl.Items` `Panel`的模板是`Canvas`.

现在，我手动设置了这些我的用户控件的宽度和高度属性，它看起来像这样：

```
<ItemsControl x:Name="curveList"
              ItemsSource="{Binding SplineVMList}"
              Background="{x:Null}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas x:Name="canvas" Margin="46,60,83,46"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <local:SplineControl Width="300" Height="300" Canvas.Bottom="0" Canvas.Left="0" IsSelected="{Binding IsSelected, Mode=TwoWay}"/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemContainerStyle>
        <Style TargetType="ContentPresenter">
            <Setter Property="Canvas.Bottom" Value="0"/>
            <Setter Property="Canvas.Left" Value="0"/>
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

我想要的是将我的用户控件的宽度和高度属性绑定到我的画布的那些。只是可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:41:15.543

您是否尝试过相对源绑定？

例如

```
Width="{Binding ActualWidth,
                RelativeSource={RelativeSource AncestorType=Canvas}}" 
```

# c - 不使用 + 将两个数字相加

> ID：11244510
> 
> 赞同：19
> 
> 时间：2012-06-28T12:19:49.207
> 
> 标签：c, pointers

我有这段代码可以解决问题：

```
#include <stdio.h>
int main()
{
    int a = 30000, b = 20,sum;
    char *p;
    p=(char *)a;
    sum = (int)&p[b]; // adding a & b
    printf("%d",sum);
    return 0;
} 
```

有人可以解释一下代码中发生了什么吗？

```
p = (char*)a;
sum = (int)&p[b]; // adding a & b 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-28T12:25:03.397

`&p[b]`基本上是糖：

```
&*(p + b) 
```

`*`和运算符在`&`这里是逆运算和取消，简单地离开`p + b`。强制转换只是规避了 C 的类型检查。`char *`然而，使用指针这一事实*很*重要。C 缩放指针算术，`sizeof(char) == 1`根据定义，缩放因子为 1。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-28T13:10:36.853

我认为值得在其他答案中添加对 c 中指针、数组和内存位置的快速解释。

首先，c 中的数组只是一块足以容纳数组中项目数的内存块（请参阅[http://www.cplusplus.com/doc/tutorial/arrays/](http://www.cplusplus.com/doc/tutorial/arrays/)）

所以如果我们说

```
int[5] example;
example[0] = 1;
example[1] = 2;
example[2] = 3;
example[3] = 4;
example[4] = 5; 
```

假设 int 是 32 位，我们将有一个 5*32 位 = 160 位长的内存块。由于 C 是一种低级语言，它试图尽可能高效，因此尽可能少地存储有关数组的信息，在这种情况下，尽可能少的信息是第一个元素的内存地址。所以例子的类型可以表示为

```
int *example; 
```

或者 example 指向一个 int。要获取数组中的项目，然后将正确的数字添加到示例中存储的地址并读取该内存地址处的数字。如果我们假设内存看起来像

```
Memory Address = Value (ints take up 4 bytes of space)
          1000 = 1          <-- example
          1004 = 2   
          1008 = 3   
          1012 = 4   
          1016 = 5 
```

所以

```
int i = example[3];  //The 4th element 
```

可以表示为

```
int i = *(example + 3 * sizeof(int));
int i = *(example + 3 * 4);
int i = *(1000 + 12);
int i = *(1012); // Fetch the value at memory location 1012
int i = 4; 
```

sizeof(int) 为 4（int 为 32 位，或 4 * 8 位字节）。如果您尝试添加，则需要一个 8 位或 1 * 8 位字节的字符。

所以回到你的代码

```
char* p;       // declare p as a pointer to a char/
p = (char *)a; // point p at memory location 3000
// p[b] would be the 21st element of the "array" p =>
// p[20]  =>
// p + 20 * sizeof(char) =>
// p + 20 * 1 =>
// p + 20  =>
// 3000 + 20 =>
// 3020
// the & operator in c gets the address of the variable so
sum = (int) &p[b]; 
// &p[b] => find the address pointed to by p[b] => 3020
// (int) casts this pointer to a int. 
```

所以 sum 被分配了数组第 21 个元素的地址。

冗长的解释。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-28T12:24:55.070

p[b] 返回数组 p 的第 b 个元素，相当于 *(p + b)。&p[b] 等于转换回 int 的 p + b*sizeof(char)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:00:26.727

如果问题是“在没有 + 运算符的情况下添加两个数字”，这里是一个：

```
#include <stdio.h>

int main()
{
int a=5, b=7;
int a1=a, b1=b;
int res;

res = (++a1 * ++b1) - (a * b) -1;

printf("a1=%d b1=%d res=%d\n", a1, b1, res );
return 0;
} 
```

# python - 修改刻度标签文本

> ID：11244514
> 
> 赞同：270
> 
> 时间：2012-06-28T12:20:00.297
> 
> 标签：python, matplotlib

我想对图中的一些选定刻度标签进行一些修改。

例如，如果我这样做：

```
label = axes.yaxis.get_major_ticks()[2].label
label.set_fontsize(size)
label.set_rotation('vertical') 
```

刻度标签的字体大小和方向已更改。

但是，如果尝试：

```
label.set_text('Foo') 
```

刻度标签*未修改*。另外，如果我这样做：

```
print label.get_text() 
```

什么都没有打印。

这里还有一些奇怪之处。当我尝试这个时：

```
 from pylab import *
 axes = figure().add_subplot(111)
 t = arange(0.0, 2.0, 0.01)
 s = sin(2*pi*t)
 axes.plot(t, s)
 for ticklabel in axes.get_xticklabels():
     print ticklabel.get_text() 
```

仅打印空字符串，但绘图包含标记为“0.0”、“0.5”、“1.0”、“1.5”和“2.0”的刻度。

* * *

## 回答 #1

> 赞同：361
> 
> 时间：2012-06-28T18:37:34.550

警告：除非刻度标签已经设置为字符串（例如箱线图中通常是这种情况），否则这不适用于任何高于`1.1.0`. 如果你在当前的 github master 上工作，这是行不通的。我不确定问题出在哪里...可能是意外更改，也可能不是...

通常，您会按照以下方式做一些事情：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()

# We need to draw the canvas, otherwise the labels won't be positioned and 
# won't have values yet.
fig.canvas.draw()

labels = [item.get_text() for item in ax.get_xticklabels()]
labels[1] = 'Testing'

ax.set_xticklabels(labels)

plt.show() 
```

![在此处输入图像描述](../Images/b19c7b2c329eeb113d8e49eb337c8976.png)

要了解您需要跳过这么多圈的原因，您需要更多地了解 matplotlib 的结构。

Matplotlib 故意避免对刻度等进行“静态”定位，除非明确告知。假设您希望与绘图进行交互，因此绘图、刻度、刻度标签等的边界将动态变化。

因此，您不能只设置给定刻度标签的文本。默认情况下，每次绘制绘图时，它都会由轴的定位器和格式化程序重新设置。

但是，如果 Locators 和 Formatters 设置为静态（分别为`FixedLocator`和`FixedFormatter`），则刻度标签保持不变。

这是做什么`set_*ticklabels`或做什么`ax.*axis.set_ticklabels`。

希望这可以更清楚地说明为什么更改单个刻度标签有点复杂。

通常，您真正想要做的只是注释某个位置。在这种情况下，请`annotate`改为查看 。

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2014-12-12T09:08:01.487

也可以使用*pylab*和*xticks来做到这一点*

```
import matplotlib
import matplotlib.pyplot as plt
x = [0,1,2]
y = [90,40,65]
labels = ['high', 'low', 37337]
plt.plot(x,y, 'r')
plt.xticks(x, labels, rotation='vertical')
plt.show() 
```

[https://matplotlib.org/stable/gallery/ticks_and_spines/ticklabels_rotation.html](https://matplotlib.org/stable/gallery/ticks_and_spines/ticklabels_rotation.html)

* * *

## 回答 #3

> 赞同：110
> 
> 时间：2013-09-22T16:32:56.447

在较新的版本中`matplotlib`，如果您不使用一堆`str`值设置刻度标签，则`''`默认情况下它们是（绘制绘图时标签只是刻度值）。知道这一点，要获得您想要的输出将需要这样的东西：

```
>>> from pylab import *
>>> axes = figure().add_subplot(111)
>>> a=axes.get_xticks().tolist()
>>> a[1]='change'
>>> axes.set_xticklabels(a)
[<matplotlib.text.Text object at 0x539aa50>, <matplotlib.text.Text object at 0x53a0c90>, 
<matplotlib.text.Text object at 0x53a73d0>, <matplotlib.text.Text object at 0x53a7a50>, 
<matplotlib.text.Text object at 0x53aa110>, <matplotlib.text.Text object at 0x53aa790>]
>>> plt.show() 
```

结果： ![在此处输入图像描述](../Images/d4cf6a98afa5b2ac8fa4ff05461ccbc3.png)

而现在，如果你检查一下`_xticklabels`，它们就不再是一堆了`''`。

```
>>> [item.get_text() for item in axes.get_xticklabels()]
['0.0', 'change', '1.0', '1.5', '2.0'] 
```

它适用于从`1.1.1rc1`到当前版本的版本`2.0`。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2018-07-11T17:18:55.213

自从问这个问题以来已经有一段时间了。截至今天（`matplotlib 2.2.2`）并经过一些阅读和试验，我认为最好/正确的方法如下：

Matplotlib 有一个名为“[`ticker`](https://matplotlib.org/api/ticker_api.html)包含*支持完全可配置的刻度定位和格式化的类”*的模块。要修改图中的特定刻度，以下对我有用：

```
import matplotlib.pyplot as plt
import matplotlib.ticker as mticker
import numpy as np 

def update_ticks(x, pos):
    if x == 0:
        return 'Mean'
    elif pos == 6:
        return 'pos is 6'
    else:
        return x

data = np.random.normal(0, 1, 1000)
fig, ax = plt.subplots()
ax.hist(data, bins=25, edgecolor='black')
ax.xaxis.set_major_formatter(mticker.FuncFormatter(update_ticks))
plt.show() 
```

[![具有来自正态分布的随机值的直方图](../Images/76be5d00df0631ca5140fc48b8505b38.png)](https://i.stack.imgur.com/AuRQR.png)

**警告！** `x`是刻度的值，`pos`是它在轴上的相对位置。请注意，在索引时`pos`取值从 开始`1`，而不是像往常一样。`0`

* * *

就我而言，我试图`y-axis`用百分比值格式化直方图。`mticker`有另一个名为的类`PercentFormatter`可以轻松完成此操作，而无需像以前那样定义单独的函数：

```
import matplotlib.pyplot as plt
import matplotlib.ticker as mticker
import numpy as np 

data = np.random.normal(0, 1, 1000)
fig, ax = plt.subplots()
weights = np.ones_like(data) / len(data)
ax.hist(data, bins=25, weights=weights, edgecolor='black')
ax.yaxis.set_major_formatter(mticker.PercentFormatter(xmax=1.0, decimals=1))
plt.show() 
```

[![具有来自正态分布的随机值的直方图](../Images/2ddacab9a1b367ae8ad06b14c3e7d1aa.png)](https://i.stack.imgur.com/PKy37.png)

在这种情况下`xmax`是对应于 100% 的数据值。百分比计算为`x / xmax * 100`，这就是我们修复 的原因`xmax=1.0`。此外，`decimals`是小数点后的小数位数。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2017-07-04T03:50:44.573

这有效：

```
import matplotlib.pyplot as plt

fig, ax1 = plt.subplots(1,1)

x1 = [0,1,2,3]
squad = ['Fultz','Embiid','Dario','Simmons']

ax1.set_xticks(x1)
ax1.set_xticklabels(squad, minor=False, rotation=45) 
```

[![联邦调查局](../Images/acbc475b7593e0a45ac91284fdd2372c.png)](https://i.stack.imgur.com/qQx6q.png)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-06-28T13:00:58.643

轴类有一个[set_yticklabels](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_yticklabels)函数，它允许您设置刻度标签，如下所示：

```
#ax is the axes instance
group_labels = ['control', 'cold treatment',
             'hot treatment', 'another treatment',
             'the last one']

ax.set_xticklabels(group_labels) 
```

我仍在研究为什么上面的示例不起作用。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-01-26T02:37:23.540

这也适用于 matplotlib 3：

```
x1 = [0,1,2,3]
squad = ['Fultz','Embiid','Dario','Simmons']

plt.xticks(x1, squad, rotation=45) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-05-20T17:09:06.083

如果您不使用`fig`并且`ax`想要修改所有标签（例如，用于规范化），您可以这样做：

```
labels, locations = plt.yticks()
plt.yticks(labels, labels/max(labels)) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-02-24T15:59:54.200

试试这个 ：

```
 fig,axis = plt.subplots(nrows=1,ncols=1,figsize=(13,6),sharex=True)
  axis.set_xticklabels(['0', 'testing', '10000', '20000', '30000'],fontsize=22) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-26T02:32:20.993

我注意到这里发布的所有使用的解决方案`set_xticklabels()`都没有保留**offset**，这是一个应用于刻度值的缩放因子，以创建更好看的刻度标签。例如，如果刻度在 0.00001 (1e-5) 的数量级上，matplotlib 将自动添加比例因子（或`offset`）`1e-5`，因此生成的刻度标签可能最终为`1 2 3 4`，而不是`1e-5 2e-5 3e-5 4e-5`。

下面给出一个例子：

`x`数组是，`np.array([1, 2, 3, 4])/1e6`并且`y`是`y=x**2`。所以两者都是非常小的值。

**左栏**：按照@Joe Kington 的建议手动更改第一个和第三个标签。请注意，偏移量会丢失。

**中列**：与@iipr 建议的类似，使用`FuncFormatter`.

**右栏**：我建议的保留偏移解决方案。

如图： [![在此处输入图像描述](../Images/6355feba8972e62370214e7239243560.png)](https://i.stack.imgur.com/ZZAOV.png)

完整代码在这里：

```
import matplotlib.pyplot as plt
import numpy as np

# create some *small* data to plot
x = np.arange(5)/1e6
y = x**2

fig, axes = plt.subplots(1, 3, figsize=(10,6))

#------------------The set_xticklabels() solution------------------
ax1 = axes[0]
ax1.plot(x, y)
fig.canvas.draw()
labels = [item.get_text() for item in ax1.get_xticklabels()]

# Modify specific labels
labels[1] = 'Testing'
labels[3] = 'Testing2'
ax1.set_xticklabels(labels)
ax1.set_title('set_xticklabels()')

#--------------FuncFormatter solution--------------
import matplotlib.ticker as mticker

def update_ticks(x, pos):
    if pos==1:
        return 'testing'
    elif pos==3:
        return 'testing2'
    else:
        return x

ax2=axes[1]
ax2.plot(x,y)
ax2.xaxis.set_major_formatter(mticker.FuncFormatter(update_ticks))
ax2.set_title('Func Formatter')

#-------------------My solution-------------------
def changeLabels(axis, pos, newlabels):
    '''Change specific x/y tick labels

    Args:
        axis (Axis): .xaxis or .yaxis obj.
        pos (list): indices for labels to change.
        newlabels (list): new labels corresponding to indices in <pos>.
    '''

    if len(pos) != len(newlabels):
        raise Exception("Length of <pos> doesn't equal that of <newlabels>.")

    ticks = axis.get_majorticklocs()
    # get the default tick formatter
    formatter = axis.get_major_formatter()
    # format the ticks into strings
    labels = formatter.format_ticks(ticks)

    # Modify specific labels
    for pii, lii in zip(pos, newlabels):
        labels[pii] = lii

    # Update the ticks and ticklabels. Order is important here.
    # Need to first get the offset (1e-6 in this case):
    offset = formatter.get_offset()
    # Then set the modified labels:
    axis.set_ticklabels(labels)
    # In doing so, matplotlib creates a new FixedFormatter and sets it to the xaxis
    # and the new FixedFormatter has no offset. So we need to query the
    # formatter again and re-assign the offset:
    axis.get_major_formatter().set_offset_string(offset)

    return

ax3 = axes[2]
ax3.plot(x, y)

changeLabels(ax3.xaxis, [1, 3], ['Testing', 'Testing2'])
ax3.set_title('With offset')

fig.show()
plt.savefig('tick_labels.png') 
```

**警告**：似乎使用 的解决方案`set_xticklabels()`（包括我自己的）依赖于`FixedFormatter`，它是静态的并且不响应图形调整大小。要观察效果，​​请将图形更改为较小的尺寸，例如`fig, axes = plt.subplots(1, 3, figsize=(6,6))`放大图形窗口。您会注意到只有中间列响应调整大小并随着图形变大添加更多刻度。左右列将有空的刻度标签（见下图）。

**警告 2**：我还注意到，如果您的刻度值是浮点数，则`set_xticklabels(ticks)`直接调用可能会给您带来难看的字符串，例如`1.499999999998`代替`1.5`.

[![在此处输入图像描述](../Images/b83e976f09cb52797a6d808a71ffc1ed.png)](https://i.stack.imgur.com/chgXN.png)

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2013-04-12T14:27:05.757

你可以做：

```
for k in ax.get_xmajorticklabels():
    if some-condition:
        k.set_color(any_colour_you_like)

draw() 
```

# c++ - 未收到 UDP 广播流量

> ID：11244517
> 
> 赞同：1
> 
> 时间：2012-06-28T12:20:04.107
> 
> 标签：c++, networking, network-programming, udp

这可能更像是一个网络问题而不是 C++ 问题，但我有一个 iOS 应用程序通过 UDP 与联网 PC 通信。两者都使用我用 C 编写的一些 UDP 套接字类。这是我的症状：

*   当 PC 应用程序发出广播流量时，PC 本身的 Wireshark 会看到它，iOS 应用程序也是如此。同一网络上的第三台 PC 也通过 Wireshark 看到数据包。
*   当 iOS 应用程序发出广播流量时，运行该应用程序的 PC**甚至**看不到 Wireshark 中的数据包。但是，第三台 PC**可以**。

附加信息：

*   有问题的 PC 运行的是 Windows 7。
*   它有一个用于摄像头的以太网端口。
*   它里面有一个无线网卡，它既连接到网络，又使用一个名为 Connectify 的小应用程序来单独创建自己的无线网络。我正在尝试通过 Connectify 网络发送数据。但是，我尝试通过另一个非 Connectify 无线网络发送数据，但仍然失败（尽管网络上的第三台 PC 仍然可以看到流量）。**更新**忽略最后一句话。这是错误的。如果我更改无线网络，它可以工作。

我试过的：

*   我首先假设这是一个路由表问题，因此我为与该接口相关的任何条目添加了具有低度量值的持久路由。路由表在这里：

```
IPv4 路由表
==================================================== ==========================
活动路线：
网络目标网络掩码网关接口指标
          0.0.0.0 0.0.0.0 10.1.11.1 10.1.11.169 25
        10.1.11.0 255.255.255.0 在线 10.1.11.169 281
      10.1.11.169 255.255.255.255 链路上 10.1.11.169 281
      10.1.11.255 255.255.255.255 在线 10.1.11.169 281
        127.0.0.0 255.0.0.0 在线 127.0.0.1 306
        127.0.0.1 255.255.255.255 在线链接 127.0.0.1 306
  127.255.255.255 255.255.255.255 在线 127.0.0.1 306
    192.168.190.0 255.255.255.0 链接上 192.168.190.1 6
    192.168.190.1 255.255.255.255 在链路上 192.168.190.1 6
  192.168.190.255 255.255.255.255 在链路上 192.168.190.1 6
        224.0.0.0 240.0.0.0 在线 127.0.0.1 306
        224.0.0.0 240.0.0.0 在线 10.1.11.169 281
        224.0.0.0 240.0.0.0 在线 192.168.190.1 257
  255.255.255.255 255.255.255.255 在链路上 192.168.190.1 6
==================================================== ==========================
持久路由：
  网络地址 网络掩码 网关地址 度量
  255.255.255.255 255.255.255.255 192.168.190.1 5
    192.168.190.0 255.255.255.0 192.168.190.1 5
    192.168.190.1 255.255.255.255 192.168.190.1 5
  192.168.190.255 255.255.255.255 192.168.190.1 5
==================================================== ==========================

```

*   然后我假设这个 Connectify 程序发生了一些奇怪的事情，所以我尝试通过 10.1.11 网络进行广播（在撤消我的持久路由之后）。如上所述，这成功了。

有任何想法吗？我难住了。我想这可能是网卡的限制，但是为什么它可以看到自己的广播数据包出去呢？会不会是 iOS 输出的数据包大小对于 PC 网卡来说太大了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:12:23.450

您的问题似乎与connectify有关，但不一定。

我会建议 ：

*   注意广播的限制，参见。[跨子网的 UDP 广播数据包](https://stackoverflow.com/questions/379015/udp-broadcast-packets-across-subnets)
*   检查接收应用程序和发送应用程序是否都在同一个子网上
*   如果有，请检查您的防火墙设置：http: [//support.connectify.me/entries/20313068-firewall-security-settings](http://support.connectify.me/entries/20313068-firewall-security-settings)（或暂时禁用它以检查）

只是想法。

# algorithm - 二叉树的打印边界

> ID：11244526
> 
> 赞同：6
> 
> 时间：2012-06-28T12:20:29.583
> 
> 标签：algorithm, binary-tree

如何打印二叉树的外框。

1.  顺序是从上到下，从左到右，然后从下到上
2.  打印所有最左边的节点和最右边的节点
3.  打印所有叶节点
4.  打印所有只有 1 个叶子的节点

    ```
     100
            /   \ 
          50     150
         / \      /
       24   57   130
      /  \    \    \
    12   30    60   132 
    ```

例如：输出应该是 100, 50, 24, 12, 30, 57, 60, 130, 132, 150

如果我们编写三个不同的函数来打印左节点、叶节点和右节点，这很容易解决，但需要 O(n+2logn) 时间。

我也在寻找一种 O(n) 方法，但条件是每个节点应该只访问一次，不想要这个额外的 O(2logn) 部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T23:11:49.127

这可以在 O(n) 中完成。也就是说，我们只访问树的每个节点一次。逻辑如下 保持 **左右两个****变量**，初始化为零。当递归调用左侧递增**1**时递归调用乘侧**递增**1

从 root 开始，进行中序遍历并检查**right**是否为零，这意味着我们从未对 right 进行递归调用。如果是打印节点，这意味着我们正在打印树的所有最左边的节点。如果**右边**不为零，它们不被视为边界，所以寻找叶子节点并打印它们。

在左子树调用完成后的中序遍历中，您冒泡到根，然后我们对右子树进行递归调用。现在首先检查叶子节点并打印它们，然后检查**left**是否为零，这意味着我们对left进行了递归调用，因此它们不被视为边界。如果**left**是零打印节点，这意味着我们正在打印 tree 的所有最右边的节点。

代码片段是

```
void btree::cirn(struct node * root,int left,int right)
{

 if(root == NULL)
    return;
if(root)
{

    if(right==0)
    {

        cout<<root->key_value<<endl;
    }

     cirn(root->left,left+1,right);

if(root->left==NULL && root->right==NULL && right>0)
    {

            cout<<root->key_value<<endl;
    }

  cirn(root->right,left,right+1);
  if(left==0)
   {

       if(right!=0)
      {
            cout<<root->key_value<<endl;
       }

   }

} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-06T05:37:16.260

**算法：**

> 1.  打印左边界
> 2.  打印叶子
> 3.  打印右边界

* * *

```
void getBoundaryTraversal(TreeNode t) {
        System.out.println(t.t);
        traverseLeftBoundary(t.left);
        traverseLeafs(t);
        //traverseLeafs(t.right);
        traverseRightBoundary(t.right);
    }
    private void traverseLeafs(TreeNode t) {
        if (t == null) {
            return;
        }
        if (t.left == null && t.right == null) {
            System.out.println(t.t);
            return;
        }
        traverseLeafs(t.left);
        traverseLeafs(t.right);
    }
    private void traverseLeftBoundary(TreeNode t) {
        if (t != null) {
            if (t.left != null) {
                System.out.println(t.t);
                traverseLeftBoundary(t.left);
            } else if (t.right != null) {
                System.out.println(t.t);
                traverseLeftBoundary(t.right);
            }
        }
    }

    private void traverseRightBoundary(TreeNode t) {
        if (t != null) {
            if (t.right != null) {
                traverseRightBoundary(t.right);
                System.out.println(t.t);
            } else if (t.left != null) {
                traverseLeafs(t.left);
                System.out.println(t.t);
            }
        }
    } 
```

* * *

`TreeNode`定义：

```
class TreeNode<T> {

    private T t;
    private TreeNode<T> left;
    private TreeNode<T> right;

    private TreeNode(T t) {
        this.t = t;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T23:36:52.503

解决方案可以通过按前序遍历树来完成 - O(n)。
在下面找到示例代码。[来源和一些解释](http://www.fusu.us/2013/07/printing-binary-tree-boundary.html)。

Java中的示例代码：

```
public class Main {
    /**
     * Prints boundary nodes of a binary tree
     * @param root - the root node
     */
    public static void printOutsidesOfBinaryTree(Node root) {

        Stack<Node> rightSide = new Stack<>();
        Stack<Node> stack = new Stack<>();

        boolean printingLeafs = false;
        Node node = root;

        while (node != null) {

            // add all the non-leaf right nodes left
            // to a separate stack
            if (stack.isEmpty() && printingLeafs && 
                    (node.left != null || node.right != null)) {
                rightSide.push(node);
            }

            if (node.left == null && node.right == null) {
                // leaf node, print it out
                printingLeafs = true;
                IO.write(node.data);
                node = stack.isEmpty() ? null : stack.pop();
            } else {
                if (!printingLeafs) {
                    IO.write(node.data);
                }

                if (node.left != null && node.right != null) {
                    stack.push(node.right);
                }
                node = node.left != null ? node.left : node.right;
            }
        }

        // print out any non-leaf right nodes (if any left)
        while (!rightSide.isEmpty()) {
            IO.write(rightSide.pop().data);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-22T23:05:44.180

您可以递归地遍历每个节点并控制何时打印，这是 javascript 代码片段。

```
function findBtreeBoundaries(arr, n, leftCount, rightCount) {
  n = n || 0;
  leftCount = leftCount || 0;
  rightCount = rightCount || 0;

  var length = arr.length;
  var leftChildN = 2*n + 1, rightChildN = 2*n + 2;

  if (!arr[n]) {
    return;
  }

  // this is the left side of the tree
  if (rightCount === 0) {
    console.log(arr[n]);
  }

  // select left child node
  findBtreeBoundaries(arr, leftChildN, leftCount + 1, rightCount);

  // this is the bottom side of the tree
  if (leftCount !== 0 && rightCount !== 0) {
    console.log(arr[n]);
  }

  // select right child node
  findBtreeBoundaries(arr, rightChildN, leftCount, rightCount + 1);

  // this is the right side of the tree
  if (leftCount === 0 && rightCount !== 0) {
    console.log(arr[n]);
  }

}

findBtreeBoundaries([100, 50, 150, 24, 57, 130, null, 12, 30, null, 60, null, 132]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T20:47:41.440

Seems like a home work problem, but I need the practice. I haven't done anything with recursion in a decade.

```
void SimpleBST::print_frame()
{
   if (root != NULL)
   {
      cout << root->data;

      print_frame_helper(root->left, true, false);
      print_frame_helper(root->right, false, true);
      cout << endl;
   }
}

void SimpleBST::print_frame_helper(Node * node, bool left_edge, bool right_edge)
{
   if (node != NULL)
   {
      if (left_edge)
         cout << ", " << node->data;

      print_frame_helper(node->left, left_edge && true, false);

      if ((!left_edge) && (!right_edge))
         if ((node->left == NULL) || (node->right == NULL))
            cout << node->data << ", ";

      print_frame_helper(node->right, false, right_edge && true);

      if (right_edge)
         cout << ", " << node->data;
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-23T08:37:35.870

这是一个简单的解决方案：

```
def printEdgeNodes(root, pType, cType):
   if root is None:
       return
   if pType == "root" or (pType == "left" and cType == "left") or (pType == "right" and cType == "right"):
        print root.val
   if root.left is None and root.right is None:
       print root.val
   if pType != cType and pType != "root":
       cType = "invalid"
   printEdgeNodes(root.left, cType, "left")

def printEdgeNodes(root):
    return printEdgeNodes(root, "root", "root") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T12:25:18.787

您可以通过将 Euler Tour 算法应用于您的树来实现这一点。请参阅此[链接](http://courses.csail.mit.edu/6.851/spring10/scribe/lec17.pdf)：

或者（如果可以访问它）古德里奇等人的书。人（链接。[这里](http://eu.wiley.com/WileyCDA/WileyTitle/productCd-EHEP001657.html)）

我希望这有帮助

# objective-c - 设置自定义 UIView 实例的属性时出现无法识别的选择器错误

> ID：11244529
> 
> 赞同：2
> 
> 时间：2012-06-28T12:20:47.970
> 
> 标签：objective-c, xcode, ipad, ios5

在一个项目（XCode 4、iOS 5、ARC）中，我有一个 UIView 的子类，它有一个布尔属性：

```
 // Diagram.h
 @interface Diagram : UIView 
 @property (assign) BOOL  flag;
 @end

 // Diagram.m
 @implementation Diagram
 @synthesize flag; 
 ... 
```

在主视图控制器中：

```
 // ViewController.h
 @property (nonatomic, strong) IBOutlet Diagram *schema;
 ...

 // ViewController.m
 @synthesize schema;
 ...
 schema.flag = NO;
 ... 
```

最后一行导致此错误：

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIView setFlag:]: unrecognized selector sent to instance 0xb07e660' 
```

有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:23:41.143

在布置视图时，请`ViewController`确保身份检查器将您的视图标识为 a`Diagram`而不是 a `UIView`，并且正确的视图链接到`schema`控制器中的插座。

目前，运行时根据错误消息认为这`schema`是一个 plain 。`UIView`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:07:07.030

找到了！

Diagram.m 未列在目标 > 构建阶段 > 编译源中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:32:21.013

在您的视图 XIB（图表在哪里）中，单击图表视图。

在右侧面板中，选择第三个选项卡，然后您可以更改对象类（第一个字段名为“自定义类”）。其实应该是UIView。将其设置为“图表”。

# android - Android仪表板图像大小

> ID：11244532
> 
> 赞同：0
> 
> 时间：2012-06-28T12:20:57.600
> 
> 标签：android, android-layout, android-imageview, android-ui

您好，我正在为我的应用程序实现一个仪表板，我想在其中覆盖 4 个图像（一个到父级的 top_right，另一个到 top_left、bottom_right 和 bottom_left）。我想要叠加的原因是因为图像会像“拼图”一样组合在一起。我的问题是，我怎样才能将这些图像大小设置为屏幕的四分之一，（考虑到多个屏幕）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:07:30.657

您可以借助RelativeLayot.it 的控制，例如

```
 android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true" 
```

# php - 在 PHP 中合并两个图像时不保留图像透明度

> ID：11244535
> 
> 赞同：0
> 
> 时间：2012-06-28T12:21:05.163
> 
> 标签：php, gd

当使用其他帖子中的示例尝试将一个具有透明部分的 PNG 与另一个不透明的 PNG 合并时，前景 PNG 的透明度会丢失并默认为白色。

到目前为止的代码：

```
$width = 349;
$height = 250;

$base_image = imagecreatefrompng($_GET['bg']);
$top_image = imagecreatefrompng($_GET['fg']);
$merged_image = "merged.png";

imagesavealpha($top_image, true);
imagealphablending($top_image, true);

imagecopy($base_image, $top_image, 0, 0, 0, 0, $width, $height);
imagepng($base_image, $merged_image); 
```

谁能建议我哪里出错了？

![这样出来](../Images/4dc03b47130dd4ad621d6a1a318199ec.png) 像这样出来 ![应该看起来像这样](../Images/fb935d221acd34792614f3a485406615.png) 应该是这样的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:04:48.467

使用PHP的GDlib [imagecopyresampled时可以保留PNG图像透明度吗？](https://stackoverflow.com/a/32302/692076)

代码应该是这样的：

```
imagesavealpha($base_image, true);
imagealphablending($base_image, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:31:08.630

```
 $image = imagecreatefrompng($_GET['bg']);
 $frame = imagecreatefrompng($_GET['fg']);

 imagealphablending($frame,true);
 imagecopymerge($image, $frame, 0, 0, 0, 0, 0, 100, 100);

 # Save the image to a file
 imagepng($image, 'file-xyz.png'); 
```

# android - Android：滚动时ListView xml布局不显示背景图像

> ID：11244540
> 
> 赞同：4
> 
> 时间：2012-06-28T12:21:09.223
> 
> 标签：android, listview, scroll, background-image, listitem

我有一个带有 ListView 的 Activity，我以编程方式将背景图像设置为视图。当我向下滚动列表时，背景图像变为白色（因为我的主题是 Theme.Light.NoTitleBar）。

1.  我怎样才能让它在蓝色背景完好无损的情况下滚动？
2.  如果上述观点有效，如何将 ListView 的文本颜色更改为白色而不是黑色？

普通列表视图 ![普通列表视图](../Images/cd79df7b7b32569d0057fff00dede046.png)

滚动列表视图 ![滚动列表视图](../Images/5fdf4100ac2e3821889991c1439a89ad.png)

按下 ListView 项目 ![按下 ListView 项目](../Images/33351d2c061f8ad092705790807ac0d9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:24:22.167

在 ListView 标签上添加一个属性

```
android:cacheColorHint="#00000000"// setting as a transparent color 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T12:24:39.563

1.  使用Tag`android:cacheColorHint="#000000"`中的属性`ListView`
2.  关于将`TextView's`颜色设置为黑色或白色，您可以[参考此处](https://stackoverflow.com/a/8921087/593709)`TextView`为您的行进行自定义，您`ListView`需要做的额外工作就是在这样的`TextView`标签内添加另一个属性

    `android:textColor="#FFF" //or #FFFFFF for white`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T12:25:45.150

这是由于优化。要删除它，只需将 listView 的 cacheColorHint 设置为透明，如下所示：`android:cacheColorHint="#00000000"`

全文在这里：[http ://android-developers.blogspot.fr/2009/01/why-is-my-list-black-android.html](http://android-developers.blogspot.fr/2009/01/why-is-my-list-black-android.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:27:04.760

您可以将该**ListView**包装在具有相同背景的**LinearLayout**上，然后删除应该可以正常工作的**ListView**的**背景。**:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-02T06:04:28.350

请检查[这个](https://stackoverflow.com/a/31175719/1071545)答案。我遇到了同样的问题，可以通过在适配器端放置 view = null 来解决。

# ruby-on-rails - 在rails中测试mongodb map，reduce函数

> ID：11244541
> 
> 赞同：0
> 
> 时间：2012-06-28T12:21:14.357
> 
> 标签：ruby-on-rails, mongodb, testing, mapreduce

当我在 rails 中使用 mongoid mapreduce 时，我通过字符串传递 map 和 reduce 函数。例如

```
def group
  Order.collection.map_reduce(map, reduce, :out => 'output_collection')
end

def map
  "function() 
   {
      var key = {game_id: this.game_id, year: this.date.getFullYear()};
      emit(key, {count: 1, score: this.score}); 
   }"
end

def reduce
  "function() 
   {
     var result = {sum: 0, total_score: 0, average: 0};
     values.forEach(function(value)
     {
       result.sum += value.count;
       result.total_score += value.score;
     });
   }"
end 
```

是否可以在 Rails 中测试 map 和 reduce 功能。这是一个简单的例子。但是我的项目功能比较复杂，我觉得很难维护。

感谢您对任何建议的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:54:38.803

对于在数据库中进行的功能测试，您的测试方法是：

1.  创建基本数据集
2.  运行函数
3.  将结果与您的预期进行比较

因此，在这种情况下，您需要确保 sum/average/total_score 符合您的预期。

# iphone - Xcode登录屏幕sqlite3数据库身份验证问题

> ID：11244543
> 
> 赞同：1
> 
> 时间：2012-06-28T12:21:21.577
> 
> 标签：iphone, database, xcode, login, sqlite

我正在尝试使用 sqlite3 为 iphone 应用程序创建登录屏幕来存储登录凭据。

以下是我用来处理身份验证的函数：

```
-(void) enter
{
    const char *dbpath = [databasePath UTF8String];
    sqlite3_stmt    *statement;

    if (sqlite3_open(dbpath, &DBLogin) == SQLITE_OK)
    {
        NSLog(@"Connected to Database");
        NSString *querySQL = [NSString stringWithFormat:@"SELECT id FROM User WHERE id=\"%@\"",login.text];
        NSString *s = password.text;
        const char *query_stmt = [querySQL UTF8String];
        NSLog(@"String is %s",query_stmt);
        NSLog(@"Pass is %@",s);
        if (sqlite3_prepare_v2(DBLogin,query_stmt, -1, &statement, NULL) ==!SQLITE_NULL)
        {
            NSLog(@"Executed Correctly");
            querySQL = [NSString stringWithFormat:@"SELECT password FROM User WHERE password=\"%@\"",password.text];
            query_stmt = [querySQL UTF8String];
            const char *f= [login.text UTF8String];
            NSLog(@"String is %s",query_stmt);
            NSLog(@"Pass is %@",s);
            //   const char *l = [login.text UTF8String];
            //  sqlite3_bind_text(statement, 1, query_stmt, -1, SQLITE_STATIC);
            if (sqlite3_prepare_v2(DBLogin,query_stmt, -1, &statement, NULL) == !SQLITE_NULL)
            {
                if(sqlite3_bind_text(statement, 1,f , -1, SQLITE_STATIC))
                    status.text= @"Congratulations";
            }
            else
            {
                NSLog(@"error");
            }
        }
        else
        {
            NSLog(@"Failed");
            status.text =@"ERROR!";
        }
    }
} 
```

这是我的数据库架构：

`CREATE TABLE User (id varchar(20) PRIMARY KEY, password varchar(20));`

我认为我传递`login.text`or细节的方式有问题`password.text`。根据`NSLog`它传递了正确的值，但似乎无法检查它是否是正确的输入。似乎认为一切都很好，并且`status.text = Congratulations`无论我输入什么都会显示。

我不知道如何解决这个问题，如果我能得到任何帮助，我将不胜感激。如果需要，我可以提供更多信息。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:32:29.073

从您发布的代码中，我想为您澄清几件事，然后建议如何进行。有 4 个主要的 sqlite 函数用于执行数据库操作

1.  sqlite3_open ：打开数据库连接
2.  sqlite3_prepare_v2：将查询编译成字节码程序
3.  sqlite_bind ：将输入值传递给查询
4.  sqlite3_step ：评估/执行编译语句。

因此，从您上面发布的代码中，

1.  您还没有执行第 4 步。所以很明显您根本没有执行查询。
2.  您使用 NSString stringWithFormat 方法完全形成了查询（包括输入参数），因此无需使用 sqlite_bind 函数。
3.  您用于验证用户的逻辑也有点混乱。

这是实现您需要的方法

```
if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {
   const char *sql = "select * from User where id = ? and password = ?";
   sqlite3_stmt *selectstmt;
   if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {
     sqlite3_bind_text(selectstmt, 1, [login.text UTF8String], -1, SQLITE_TRANSIENT);
     sqlite3_bind_text(selectstmt, 2, [password.text UTF8String], -1, SQLITE_TRANSIENT);
      while(sqlite3_step(selectstmt) == SQLITE_ROW) {

          NSLog(@"Successful login");
      }
   }
 } 
```

# three.js - 三、线条模糊

> ID：11244545
> 
> 赞同：1
> 
> 时间：2012-06-28T12:21:24.323
> 
> 标签：three.js

带有模糊或其他过滤器的线条是否有任何选项？

我使用`THREE.Plane`带有纹理的 Line 的替代方法，但模仿带有位置矢量的移动，并且`lookAt`不像`vertices[0]`带有`vertices[1]`.

![在此处输入图像描述](../Images/4cba3757287a156da8aff18afcede470.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:17:10.367

使用 WebGLRenderer 的 Line 对象没有很多选项。使用 CanvasRenderer 或 SVG 渲染器我相信你可以用它做更多的事情。例如，大多数 WebGL 实现（Windows 中的 Chrome）仅支持最大线宽 1，因此您甚至无法更改宽度。如果您切换到 CanavsRenderer，您可以使用“lineWidth”选项进行设置。但是，我不知道是否可以使用这样的简单选项来模糊这条线。

如果您想使用 WebGLRenderer，最好的办法是查找有关 GLSL 的信息并编写自定义着色器。然后查看此示例，了解如何为 Line 对象编写自定义着色器。**[这个例子](http://alteredqualia.com/three/examples/webgl_custom_attributes_lines.html)**似乎做得很好。我相信它可以适应你的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:27:00.260

你可以`THREE.Ribbon`像我一样使用 a 。基本上，其中的点`Ribbon.geometry`被渲染为四边形，就像丝带一样。例如，拥有积分

```
Ribbon.geometry=[
new THREE.Vertex3(1,0,0),
new THREE.Vertex3(-1,0,0),
new THREE.Vertex3(1,0,10),
new THREE.Vertex3(-1,0,10)
] 
```

将在 z 轴上从原点向外渲染一条细条。您可以使用`Ribbon.geometry.colors`为每个顶点添加颜色。从白色到黑色，结合Ribbon的材质，`THREE.MeshBasicMaterial`有`THREE.AdditiveBlending`和`THREE.DoubleSide`，可以实时改变几何体的顶点，有透明的渐变效果！初始化时不要忘记将顶点列表填充到预定义的数量，因为初始化后无法再添加！您也可以与布隆过滤器结合使用。

# git - Github 没有显示提交的正确作者

> ID：11244547
> 
> 赞同：4
> 
> 时间：2012-06-28T12:21:34.307
> 
> 标签：git, github

我在 github 上有一个帐户，并且我是一个组织的所有者。

我不明白为什么当我执行“git commit”然后“git push”时，网页会显示组织的名称作为提交的作者。

当我运行“git push”时，我使用我帐户的用户名和密码。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T12:23:47.987

提交用户不会受到影响`git push`，您需要以正确的用户身份提交。

您可以通过以下方式进行设置：

```
git config --global user.name "My Name"
git config --global user.email me@example.com 
```

如果您想修复最后一个现有提交（尚未推送），您可以这样做

```
git commit --amend --reset-author 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T12:24:13.693

转到您的项目文件夹。

在“.git/config”下你可以看到你的信息。

```
[user]
    name = xxx
    email = xxx 
```

也许你的信息是错误的。

# sql - 为什么 MongoDB 比 SQL DB 快得多的任何详细和具体原因？

> ID：11244553
> 
> 赞同：45
> 
> 时间：2012-06-28T12:21:59.347
> 
> 标签：sql, mongodb, performance, nosql

好的，还有关于[为什么 MongoDB 这么快的问题](https://stackoverflow.com/questions/5186707/why-is-mongodb-so-fast)

我很欣赏这些答案，但是，它们很笼统。是的，我知道：

*   MongoDB是基于文档的，那么为什么基于文档可以带来更高的速度呢？
*   MongoDB是noSQL，但为什么noSQL意味着更高的性能？
*   SQL 在一致性、ACID 等方面比 MongoDB 做得更多，但我相信 MongoDB 也在做类似的事情来保证数据安全、维护索引等，对吧？

好的，我写这个问题只是为了找出答案

1.  **MongoDB高性能**的详细和具体原因是什么？****
***   SQL到底做**了什么**，而MongoDB却没有，所以它获得了非常高的性能？*   如果面试官（MongoDB 和 SQL 专家）问你`"Why MongoDB is so fast"`，你会怎么回答？显然只是回答：`"because MongoDB is noSQL"`是不够的。**

 **谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-28T12:29:11.540

首先，让我们将苹果与苹果进行比较：**使用 MongoDB 进行读写就像在 RDBMS 中没有非聚集索引的表上按主键进行单次读写一样。**

因此，让我们准确地进行基准测试：http: [//mysqlha.blogspot.de/2010/09/mysql-versus-mongodb-yet-another-silly.html](http://mysqlha.blogspot.de/2010/09/mysql-versus-mongodb-yet-another-silly.html)

事实证明，完全相同的原始操作的公平比较中的速度差异并不大。**事实上，MySQL 稍微快一些。**我会说，它们是等价的。

为什么？因为实际上，两个系统在这个特定的基准测试中都在做类似的事情。返回单行，按主键搜索，实际上并没有那么多工作。这是一个非常快速的操作。我怀疑跨进程通信开销是其中很大一部分。

我的猜测是，MySQL 中更优化的代码比 MongoDB 的系统开销略少（没有逻辑锁，可能还有其他一些小东西）。

这导致了一个有趣的结论：**您可以像使用文档数据库一样使用 MySQL，并从中获得出色的性能。**

* * *

如果面试官说：“我们不关心文档或样式，我们只需要一个更快的数据库，你认为我们应该使用 MySQL 还是 MongoDB？”，我会怎么回答？

我建议暂时忽略性能并查看两个系统的相对强度。对于 MongoDB，我想到了诸如扩展（向上）和复制之类的事情。对于 MySQL，还有更多的特性，比如丰富的查询、并发模型、更好的工具和成熟度等等。

基本上，您可以用功能换取性能。愿意这样做吗？这是一般人无法做出的选择。如果您不惜一切代价选择性能，请考虑在添加其他技术之前先调整 MySQL。

* * *

这是当客户端通过主键检索单个行/文档时发生的情况。我将注释两个系统之间的差异：

1.  客户端构建二进制命令（同）
2.  客户端通过 TCP 发送它（相同）
3.  服务器解析命令（同）
4.  服务器从缓存访问查询计划（仅限 SQL，不是 MongoDB，不是 HandlerSocket）
5.  服务器要求 B-Tree 组件访问该行（相同）
6.  服务器在通向行的 B-Tree 路径上采用物理只读锁（相同）
7.  服务器对行进行逻辑锁定（仅限 SQL，不是 MongoDB，不是 HandlerSocket）
8.  服务器序列化该行并通过 TCP 发送它（相同）
9.  客户端反序列化它（相同）

对于典型的基于 SQL 的 RDBMS，只有两个额外的步骤。**这就是为什么没有真正的区别。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T09:18:02.490

总的来说，MySQL 和 MongoDB 在单机上的“持久”写入性能非常相似。简单的键/值查找几乎相同......如果你想以这种方式使用 MySQL。显然，文档支持是一个巨大的生产力优势和性能的巨大胜利。

使用自动分片...... MongoDB 以难以形容的方式更快。开箱即用，通过适当的设计，您几乎可以线性扩展，而无需在代码中构建任何逻辑。

几乎每个驱动程序都内置了读/写分离功能……其中大多数是由 10gen 自己赞助或开发的。

我之前已经扩展了应用程序并编写了读/写拆分代码，用于分片的分布式哈希，重新平衡连续运行的作业，并将 gzip 添加到 mysql“文档”存储。啊。

它更快，因为它简单且专注。它的设计考虑了所有这些。商品硬件的规模是一个优先事项。RDBMS 的优先级完全不同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T12:33:49.673

默认情况下，mongo 不做任何索引；也没有交易。但是，如果您将 mysql 表配置为未索引，并打开自动提交，您将不会看到巨大的速度差异。将位写入磁盘只需要一定的时间。

但是，mongo 旨在轻松扩展。使用分片，您可以水平扩展写入并获得更好的性能，而无需主-主复制的复杂性。使用副本集，您可以水平扩展读取。所以，我会说有一个系统的性能改进，但每个查询不一定更快。**

# iphone - 打开 facebook 对话框进行身份验证，而不是在 iphone 中安装 facebook 应用程序？

> ID：11244555
> 
> 赞同：2
> 
> 时间：2012-06-28T12:22:04.133
> 
> 标签：iphone, objective-c, ios

如果facebook应用程序安装在iphone中或未安装，我想制作一个应用程序，要求在对话框中验证facebook登录。如果我注销facebook，那么它应该从facebook注销。我已将 facebook-ios-sdk 用于 facebook api 我的代码如下：

```
- (void)viewDidLoad
{
    _facebook=[[Facebook alloc] initWithAppId:appId andDelegate:self];

    self.navigationController.navigationBarHidden = YES;
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"])
    {
        _facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        _facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    [super viewDidLoad];
} 
```

**//点击登录按钮**

```
-(IBAction)Login
{
    NSLog(@"login called");

    if (![self connected])
    {
        UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Connection" message:@"Internet is not Connected" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];[alert release];
    }
    else
    {
        if (suggestion==nil)
        {
            suggestion=[[Suggestions alloc] initWithNibName:@"Suggestions" bundle:nil];
        }
        [suggestion setReqFlg:YES];

        if (![_facebook isSessionValid]) 
        {
            NSLog(@"sesssion invalid u have to login...");
            [_facebook authorize:nil];
        }
        else
        {
            NSLog(@"valid and going on next page called graph API ");      

            [_facebook requestWithGraphPath:@"me?fields=id,name" andDelegate:self];
            suggestion.parentView=self;
            [self.navigationController pushViewController:suggestion animated:YES];
        }
    }
}

- (void)fbDidLogin
{
    NSLog(@"facebook did first login..");
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[_facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[_facebook expirationDate] forKey:@"FBExpirationDateKey"];  
    [defaults synchronize];
    NSLog(@"called gtraph from login in facebook ");
    [_facebook requestWithGraphPath:@"me?fields=id" andDelegate:self];
    if (suggestion==nil)
    {
        suggestion=[[Suggestions alloc] initWithNibName:@"Suggestions" bundle:nil];
    }
    suggestion.parentView=self;
    [self.navigationController pushViewController:suggestion animated:YES];
}

- (void)fbDidLogout
{
    NSLog(@"logout");
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults removeObjectForKey:@"FBAccessTokenKey"];
    [defaults removeObjectForKey:@"FBExpirationDateKey"];
    [defaults removeObjectForKey:@"FBUserId"];

    [defaults synchronize];
} 
```

我是否必须更改 facebook.m 文件或有另一种方法可以做到这一点。每次我单击登录按钮时，如果 facebook 注销，则应显示 facebook 登录对话框，如果 facebook 登录，则导航到下一个视图。不要打开 facebook 应用程序安装在 iphone 中用于登录目的。

**给你的评论或答案我真的需要它。谢谢你！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:04:56.687

进入 facebook.m 文件非常简单，使用 FBAppAuth 进行搜索，您会得到 3_4 个结果，例如：-

```
 [self authorizeWithFBAppAuth:YES safariAuth:YES]; 
```

只需将“是”更改为“否”，例如：-

```
 [self authorizeWithFBAppAuth:NO safariAuth:NO]; 
```

仅在 facebook.m 中更改它并编译并运行，当您单击 loginButton 时，您会得到 fblogin 对话框：)

**编辑**

我在我的应用登录页面上看到了我的登录对话框

![脸书登录对话框](../Images/b14dcb64b936220baef596c23552afdd.png)

# ios - Google Docs 正确的示例代码

> ID：11244556
> 
> 赞同：0
> 
> 时间：2012-06-28T12:22:05.960
> 
> 标签：ios, google-drive-api

我从 google docs api 下载了 Google docs 客户端库。但是在那个来源中，所有示例都是针对 mac 应用程序给出的。我在为 IOS 平台集成这个库时遇到问题。能否请您提供支持 IOS 的库和示例

谢谢， **戈皮纳斯·普帕拉**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:32:11.260

在 Objective-C 库中有一个用于 Drive API v2 的完整示例 iOS 应用程序：

[http://code.google.com/p/google-api-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FDriveSample](http://code.google.com/p/google-api-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FDriveSample)

# php - php - 将 curl 命令行实现到 php，尝试但出现错误

> ID：11244558
> 
> 赞同：0
> 
> 时间：2012-06-28T12:22:11.780
> 
> 标签：php, curl

任何人都可以将这个在命令行中工作的 curl 命令转换为 php 代码：

```
$ curl -u username@gmail.com -X POST -d "" https://build.phonegap.com/token 
```

我试过这段代码但没有用：

```
$target_url = "https://USERNAME@gmail.com:PASSWORD@build.phonegap.com/token"
 $ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$target_url);
curl_setopt($ch, CURLOPT_POST,1);

$result=curl_exec ($ch);
curl_close ($ch);
echo $result; 
```

当我执行上面的代码时，我得到了错误：

```
 301 Moved
 The document has moved here(link to gmail.com). 
```

但是，如果我在命令行中使用该命令，它工作正常。我哪里错了？

另外，请告诉我那个“-X”是什么意思，如何将其转换为php代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:25:11.700

`301`是一个重定向响应代码。添加这一行：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); 
```

...之后`curl_init()`和之前`curl_exec()`让 cURL 跟随重定向到正确的位置。

该[`-X`](http://curl.haxx.se/docs/manpage.html#-X)选项用于`POST`在您已镜像的原始命令字符串中指定方法`curl_setopt($ch, CURLOPT_POST, 1);`

**编辑**

试试这个代码：

```
$username = "USERNAME@gmail.com";
$password = "PASSWORD";
$target_url = "https://build.phonegap.com/token"

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $target_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, '');
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/x-www-form-urlencoded'));
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");

$result = curl_exec($ch);
curl_close ($ch);
echo $result; 
```

# elasticsearch - Elasticsearch 添加新字段显示 Elasticsearch 中的错误

> ID：11244559
> 
> 赞同：1
> 
> 时间：2012-06-28T12:22:15.440
> 
> 标签：elasticsearch

我正在使用 Elasticsearch JSON Mapping 作为

```
{
    "mappings": {
        "test": {
            "_routing": {
                "path": "harvestdate", 
                "required": true
            }, 
            "_source": {
                "enabled": false
            }, 
            "properties": {
                "infoid": {
                    "precision_step": "0", 
                    "store": "yes", 
                    "type": "long"
                }, 
                "productid": {
                    "index": "not_analyzed", 
                    "omit_norms": "true", 
                    "omit_term_freq_and_positions": "true", 
                    "store": "yes", 
                    "type": "string"
                }, 
                "saleid": {
                    "precision_step": "0", 
                    "store": "yes", 
                    "type": "long"
                }
            }
        }
    }
} 
```

1.  我使用索引作为 index1
2.  我必须在 JSON 中添加一个新字段，它看起来像
    `{ "mappings": { "test": { "_routing": { "path": "harvestdate", "required": true }, "_source": { "enabled": false }, "properties": { "deal": { "index": "not_analyzed", "omit_norms": "true", "omit_term_freq_and_positions": "true", "store": "no", "type": "string" }, "infoid": { "precision_step": "0", "store": "yes", "type": "long" }, "productid": { "index": "not_analyzed", "omit_norms": "true", "omit_term_freq_and_positions": "true", "store": "yes", "type": "string" }, "saleid": { "precision_step": "0", "store": "yes", "type": "long" } } } } }`

我正在尝试使用 Elasticsearch 和 Index(index1) 通过使用命令来更新此映射

```
curl -XPUT 'http://localhost:9200/index1/test/_mapping' -d  '{
    "mappings": {
        "test": {
            "_routing": {
                "path": "harvestdate", 
                "required": true
            }, 
            "_source": {
                "enabled": false
            }, 
            "properties": {
                "deal": {
                    "index": "not_analyzed", 
                    "omit_norms": "true", 
                    "omit_term_freq_and_positions": "true", 
                    "store": "no", 
                    "type": "string"
                }, 
                "infoid": {
                    "precision_step": "0", 
                    "store": "yes", 
                    "type": "long"
                }, 
                "productid": {
                    "index": "not_analyzed", 
                    "omit_norms": "true", 
                    "omit_term_freq_and_positions": "true", 
                    "store": "yes", 
                    "type": "string"
                }, 
                "saleid": {
                    "precision_step": "0", 
                    "store": "yes", 
                    "type": "long"
                }
            }
        }
    }
}' 
```

在检查映射时，映射未使用索引（索引 1）中的更新映射设置。这个卷曲或映射有什么错误？

提前致谢！

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:11:45.780

我认为你需要删除

```
"mappings": { 
```

事物。从我读到的内容（不记得在哪里，但在弹性搜索邮件列表中，“映射”来自`GET`，但不应该在这里`PUTing`，并且 IIRC，他们想在下一个版本中做一些关于它的事情）。

# sql - 在更新语句中嵌套选择语句

> ID：11244562
> 
> 赞同：1
> 
> 时间：2012-06-28T12:22:22.357
> 
> 标签：sql, sql-server

这是我的更新声明，效果很好。如果表 1 和表 2 包含相同的序列号，则将表 1 更新为“是”，如果没有，则将其更新为“否”。

```
UPDATE dbo.table1
SET [Match] = CASE WHEN dbo.table2.[Serial Number] IS NOT NULL
THEN 'yes' ELSE 'no' END
FROM dbo.table1 LEFT OUTER JOIN dbo.table2
    ON dbo.table2.[Serial Number] = dbo.table1.[Serial Number]
AND dbo.table1.[Date] = 'JAN11' AND 
      dbo.table1.[Install] = 'new' AND
      dbo.table2.[Date] = 'JAN11' AND 
      dbo.table2.[Install] = 'new' 
```

问题是当前表 1 中没有被调用的所有内容也被更新为 no 所以我想要做的是首先调用一个 select 语句......像这样

```
select * from table1 where [Date] = 'JAN11' AND [Install] = 'new' 
```

并将其嵌套在更新中，以便仅使用 no 或 yes 更新相关列...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T12:32:32.450

```
UPDATE t1
  SET [Match] = CASE WHEN t2.[Serial Number] IS NOT NULL
  THEN 'yes' ELSE 'no' END
FROM dbo.table1 AS t1 
LEFT OUTER JOIN dbo.table2 AS t2
   ON t1.[Serial Number] = t2.[Serial Number]
  AND t1.[Date] = t2.[Date]
  AND t1.[Install] = t2.[Install]
WHERE t1.[Date] = 'JAN11' 
  AND t1.[Install] = 'new'; 
```

# c++ - 二年级搬家

> ID：11244564
> 
> 赞同：3
> 
> 时间：2012-06-28T12:22:27.783
> 
> 标签：c++, c++11

假设我们有一个嵌入另一个参数的类，它必须支持复制和移动。让我们假设——在某些情况下——需要以某种方式找出内在价值。

一种典型的方法可以是这样的：

```
template<class T>
class wrapper
{
public:
    wrapper() :val() {}
    wrapper(T s) :val(std::move(s)) {}

    wrapper(const wrapper& s) :val(s.val) {}
    wrapper(wrapper&& s) :val(std::move(s.val)) {}
    wrapper& operator=(wrapper s) { val = std::move(s.val); return *this; }

    T value() const { return val; }
private:
    T val;
}; 
```

这不是唯一的方法，可能不需要明确复制和移动，但让它们成为。

另一点是：**假设`T`-in ceratin instances- 本身就是一个复制/可移动类**。当然，`wrapper::value()`返回 T 的副本。

现在假设返回的 T 必须作为参数进入另一个调用，并且包含的​​包装器是临时的。

更简单的模拟是

```
calledfn(wrapper<T>(someT).value()); 
```

再说一遍：以这种方式完成是毫无头绪的，但更复杂的情况需要这个微不足道的工作。

从理论上讲，我们可以承认`val`从它的临时包装器中移开以将其提供给调用者，但是...什么签名应该具有该`value()`方法，以便它在临时时`wrapper<T>`被绑定，但在不是临时时不被绑定，为此`value() const`应该是首选？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T13:04:41.403

在 C++11 中，您可以在`this`-pointer 是否为右值时重载方法：

```
T value() &&; //Will only be called if the object is a mutable rvalue
T value() const &; //Will only be called if the object is an lvalue 
```

请注意，根据 `13.1.2 [over.load]`标准，如果任何重载具有引用说明符（左值或右值）都必须得到一个。所以非临时情况的重载必须是`const &`. 我不完全确定这是否会绑定到 const r 值，因此您可能需要`const &&`重载来捕获这种情况。

我不知道编译器对此功能的支持，所以如果还没有支持，这可能有点理论上的。在这种情况下，您可以通过创建一个`move_value`方法并使用一个分派到正确方法的自由函数来解决问题：

```
template<class T> class wrapper {
    ...    
    T value() const;
    T move_value();    
};
template<typename T> T value(wrapper<T>&& self) { return std::move(self.move_value(); }
template<typename T> T value(const wrapper<T>& self) { return std::move(self.value(); } 
```

# hibernate - What is referencedColumnName used for in JPA?

> ID：11244569
> 
> 赞同：85
> 
> 时间：2012-06-28T12:23:01.360
> 
> 标签：hibernate, jpa, orm, eclipselink, openjpa

In JPA there is an attribute called `referencedColumnName` that can be set on `@JoinColumn, @PrimaryKeyJoinColumn` what is the idea behind this setting, can someone give a good example of where this can be used?

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-06-28T14:09:13.413

It is there to specify another column as the default *id* column of the other table, e.g. consider the following

```
TableA
  id int identity
  tableb_key varchar

TableB
  id int identity
  key varchar unique

// in class for TableA
@JoinColumn(name="tableb_key", referencedColumnName="key") 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-07-04T11:58:06.077

"referencedColumnName" property is the name of the column in the table that you are making reference with the column you are anotating. Or in a short manner: it's the column referenced in the destination table. Imagine something like this: cars and persons. One person can have many cars but one car belongs only to one person (sorry, I don't like anyone else driving my car).

> **Table Person**
> name char(64) primary key
> age int
> 
> **Table Car**
> car_registration char(32) primary key
> car_brand (char 64)
> car_model (char64)
> owner_name char(64) foreign key references **Person(name)**

When you implement classes you will have something like

```
class Person{
   ...
}

class Car{
    ...
    @ManyToOne
    @JoinColumn([column]name="owner_name", referencedColumnName="name")
    private Person owner;
} 
```

**EDIT:** as @searchengine27 has commented, `columnName` does not exist as a field in persistence section of Java7 docs. I can't remember where I took this property from, but I remember using it, that's why I'm leaving it in my example.

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-06-28T13:32:42.767

Quoting [API on referencedColumnName](http://www.objectdb.com/api/java/jpa/JoinColumn/referencedColumnName):

> The name of the column referenced by this foreign key column.
> 
> Default (only applies if single join column is being used): The same name as the primary key column of the referenced table.

# Q/A

> Where this would be used?

**When there is a composite PK in referenced table**, then you need to specify column name you are referencing.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-09-22T12:02:12.867

*   `name` attribute points to the column containing the asociation, i.e. column name of the foreign key
*   `referencedColumnName` attribute points to the related column in asociated/referenced entity, i.e. column name of the primary key

You are not required to fill the `referencedColumnName` if the referenced entity has single column as PK, because there is no doubt what column it references (i.e. the `Address` single column ID).

```
@ManyToOne
@JoinColumn(name="ADDR_ID")
public Address getAddress() { return address; } 
```

However if the referenced entity has PK that spans multiple columns the order in which you specify `@JoinColumn` annotations has significance. It might work without the `referencedColumnName` specified, but that is just by luck. So you should map it like this:

```
@ManyToOne
@JoinColumns({
    @JoinColumn(name="ADDR_ID", referencedColumnName="ID"),
    @JoinColumn(name="ADDR_ZIP", referencedColumnName="ZIP")
})
public Address getAddress() { return address; } 
```

or in case of `ManyToMany`:

```
@ManyToMany
@JoinTable(
    name="CUST_ADDR",
    joinColumns=
        @JoinColumn(name="CUST_ID"),
    inverseJoinColumns={
        @JoinColumn(name="ADDR_ID", referencedColumnName="ID"),
        @JoinColumn(name="ADDR_ZIP", referencedColumnName="ZIP")
    }
) 
```

### Real life example

Two queries generated by Hibernate of the same join table mapping, both without referenced column specified. **Only the order of `@JoinColumn` annotations were changed.**

```
/* load collection Client.emails */ 
select 
emails0_.id_client as id1_18_1_,
emails0_.rev as rev18_1_,
emails0_.id_email as id3_1_,
email1_.id_email as id1_6_0_

from client_email emails0_ 
inner join email email1_ on emails0_.id_email=email1_.id_email 

where emails0_.id_client='2' and 
emails0_.rev='18' 
```

```
/* load collection Client.emails */ 
select
emails0_.rev as rev18_1_,
emails0_.id_client as id2_18_1_,
emails0_.id_email as id3_1_, 
email1_.id_email as id1_6_0_

from client_email emails0_ 
inner join email email1_ on emails0_.id_email=email1_.id_email 

where emails0_.rev='2' and 
emails0_.id_client='18' 
```

We are querying a join table to get client's emails. The `{2, 18}` is composite ID of Client. The order of column names is determined by your order of `@JoinColumn` annotations. The order of both integers is always the same, probably sorted by hibernate and that's why **proper alignment with join table columns is required and we can't or should rely on mapping order.**

The interesting thing is the order of the integers does not match the order in which they are mapped in the entity - in that case I would expect `{18, 2}`. So it seems the Hibernate is sorting the column names before it use them in query. If this is true and you would order your `@JoinColumn` in the same way you would not need `referencedColumnName`, but I say this only for illustration.

Properly filled `referencedColumnName` attributes result in exactly same query without the ambiguity, in my case the second query (`rev = 2`, `id_client = 18`).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-31T14:47:53.973

For a JPA 2.x example usage for the general case of two tables, with a `@OneToMany` unidirectional join see [https://en.wikibooks.org/wiki/Java_Persistence/OneToMany#Example_of_a_JPA_2.x_unidirectional_OneToMany_relationship_annotations](https://en.wikibooks.org/wiki/Java_Persistence/OneToMany#Example_of_a_JPA_2.x_unidirectional_OneToMany_relationship_annotations)

Screenshot from this WikiBooks JPA article: [Example of a JPA 2.x unidirectional OneToMany relationship database](https://i.stack.imgur.com/59aqu.png)

# c++ - 子集和实现

> ID：11244570
> 
> 赞同：-1
> 
> 时间：2012-06-28T12:23:02.057
> 
> 标签：c++, c, algorithm

我正在实现子集总和的算法：

```
SUBSET SUM(X[1 .. n], T ):
if T = 0
return T RUE
else if T < 0 or n = 0
return FALSE
else
return SUBSET SUM(X[2 .. n], T ) ∨ SUBSET SUM(X[2 .. n], T − X[1]) 
```

请帮助我在递归时如何传递简化的数组 X[2...n] ？

这是我编写的代码，它会导致分段错误：

```
#include <stdio.h>

    int subsetsum(int a[], int sum, int size)
    {
            if(sum==0)
            return 1;
            else if (sum<0 || size <0)
            return  0;
            else
            return (subsetsum(a+1 , sum, size-1) || subsetsum(a+1, sum - *a, size-1));
    }
    `

    int main(int argc, char **argv)
    {
            int a[]={2,4,1,3,5},x;
            x=subsetsum(a,6,5);
            printf("%d",x);
            return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:35:55.273

```
template<class It>
void recurse(It begin, It end)
{
   ... recurse(begin+1, end) ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:33:06.257

当用作函数的参数时，C/C++ 中的数组被隐式衰减为指向表示数组的原始内存缓冲区的指针。因此，为了传递`X[2...n]`，您只需将数组指针参数递增`1`。例如，您可以执行以下操作：

```
bool subset_sum(const int* array, const int array_size, int* sum)
{
    //...your code for the rest of the algorithm

    subset_sum(array+1, array_size, sum) //one of the recursive calls
} 
```

在下一次递归调用中传递参数`array+1`将使数组指针加一，并获取一个指向数组的指针`X[1...n]`，现在使其指向数组`X[2...n]`。您将使用该`array_size`参数来检测数组的结尾。

最后，你会这样调用`subset_sum`：

```
int array_numbers = {1, 2, 3, 4, 5, 6, 7};
int sum = 0;

subset_sum(array_numbers, sizeof(array_numbers)/sizeof(int), &sum); 
```

# java - 客户端 Socket 无法连接到正在运行的 Socket 服务器

> ID：11244571
> 
> 赞同：2
> 
> 时间：2012-06-28T12:23:03.137
> 
> 标签：java, android, sockets

我有 Android 客户端应用程序，它使用`Socket`.

在我的开发机器上，`SocketServer`（服务器也是用 Java 编写的）正在监听`127.0.1.1`port `8666`。我还在 Android 应用的应用清单中添加了 Internet 访问权限。

但是当我尝试使用 Socket 实例化对象时`client = new Socket("127.0.1.1",8666)`，它会抛出消息（也尝试使用`IOException`而不是手动提供 IP 地址，但它也不起作用）。虽然我可以从简单的控制台 Java 程序轻松连接到服务器。`connection refused``localhost`

这里有什么问题？

## 更新

我的问题在某些方面与[此](https://stackoverflow.com/questions/5224474/how-can-an-android-virtual-device-use-the-local-computers-internet)有关。我正在尝试访问在运行模拟器的机器上运行的服务器。

**注意：**我知道不建议在任何 Activity 类中执行网络 IO，我也不这样做，上面的代码只是一个简化理解的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:53:03.107

尝试使用，端口转发

从 adb 位置的命令提示符，

`adb forward tcp:8666 tcp:8666`

用于设置任意端口转发的**forward命令——将特定主机端口上的请求转发到模拟器/设备实例上的不同端口。**以下是设置将主机端口 8666 转发到模拟器/设备端口 8666 的方法：

如果这没有帮助，请发布您的代码和 logcat 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:29:17.263

您的 Android 代码是在模拟器中运行，还是通过 WiFi 在真实硬件上运行？如果您在模拟器中运行，那么您的开发机器的 IP 地址可能是 10.0.2.2（请参阅[Android 开发者工具：模拟器](http://developer.android.com/tools/devices/emulator.html)）。

如果您的应用在通过 WiFi 连接的 Android 手机上运行，​​您必须指定机器的 IP 地址，而不是环回地址。

另外，当您说您的 SocketServer 正在侦听 127.0.1.1 时，您是否绑定到该接口？如果您期望来自其他接口的连接，则不应绑定到环回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:37:58.293

如果我猜对了：您的套接字服务器在单独的机器上运行。您不能使用 127.0.0.1 通过您的 Android 手机连接到该服务器，因为这是本地环回地址。找到您机器的 IP 地址并使用它。

如果在您尝试连接到计算机上运行的套接字服务器时在模拟器上使用它，您仍然无法使用 127.0.0.1，因为这是模拟器的本地环回地址。

# javascript - Javascript 返回 Flot 图对象

> ID：11244574
> 
> 赞同：0
> 
> 时间：2012-06-28T12:23:14.057
> 
> 标签：javascript, jquery, flot

我可以征求意见吗。我有应该返回 javascript 对象的函数

```
function get_temp(){
    var datasets_temp = {
        "sens1": {data: [[1340803113,22.9],[1340803474,23],[1340803836,23],[1340804197,23.1]] },        
        "sens2": {data: [[1340846482,23],[1340846843,23],[1340847204,23],[1340847566,23]] },
        "sens3": {data: [[1340868157,23.1],[1340868518,22],[1340868879,23.2],[1340869241,23.2]] }};
  return datasets_temp; 
} 
```

绘图图：

```
var plot = $.plot($("#temp_graph"), get_temp(), $.extend(true, {}, options, {
        xaxis: {min: 0, max: 50}})); 
```

我不知道问题出在哪里，为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:22:59.803

您走在正确的轨道上，但系列数据需要是一系列系列对象，而不仅仅是一个对象，每组数据都是它的属性。

你应该拥有的是这样的：

```
var dataset_temp = [  //an array
  {   //of series objects
     label: 'sens1',
     data: [[1340803113,22.9],[1340803474,23],[1340803836,23],[1340804197,23.1]]
  },
  {
     label: 'sens2',
     data:  [[1340846482,23],[1340846843,23],[1340847204,23],[1340847566,23]]
  },
  {
     label: 'sens3',
     data: [[1340868157,23.1],[1340868518,22],[1340868879,23.2],[1340869241,23.2]]
  }
]; 
```

您还有另一个问题，即您显然将 x 轴绘制为时间，但您的时间戳（即`1340846482`）不是 javascript 时间戳，它们是“unix”时间戳。您需要做的是将每个时间戳乘以 1000（即`1340846482000`正确），因为 javascript 以毫秒为单位计算它们，而不是秒。有关其他注意事项，请参阅[本示例](http://people.iola.dk/olau/flot/examples/time.html)中的文本。

# jsp - 检查用户是否已经登录或会话是否在 jsp 中启动

> ID：11244580
> 
> 赞同：1
> 
> 时间：2012-06-28T12:23:31.683
> 
> 标签：jsp

我正在尝试使用jsp设计一个简单的登录系统。在登录页面中，用户输入他的用户名和密码，在验证时执行为

* * *

```
if username and password combination exists, then
{

     HttpSession session = request.getSession(false);

     if (session == null) {
          // Session not created yet. So we do it now.
           session = request.getSession();
           session.setAttribute("id",idvariable );
           response.sendRedirect("home.jsp");
          // I redirect them to their profile home pages
    } 

    else {
        // Session is already created.
         response.sendRedirect("home.jsp");
       // So i again redirect them to their home page
    }
 } 
```

* * *

现在在“home.jsp”中，我如何检查会话是否已经创建？

* * *

**我需要检查会话是否已经在配置文件的每个页面上启动。所以我想创建某种函数，我可以在每个jsp页面的顶部调用它**

* * *

我应该怎么办 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:27:20.650

不要在`Jsp`. 您应该设计一个`filter`来验证用户。

编辑：

看一下教程 - [信息（servlet-filters）](https://stackoverflow.com/tags/servlet-filters/info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:40:29.667

首先创建一个这样的类.. 设置用户 bean 属性此示例为简单起见假设一个用户

```
public class Users implements Serializable {
    private String user;

 public String getUser() {
        return user;
    }

    public void setUser(String user) {
        this.user = user;
    }
} 
```

然后像这样登录检查

```
 String userName = request.getRequest().getParameter("txtid");
   String password = request.getRequest().getParameter("txtPassword");

Vector params = new Vector();

        params.add(null);//return result from procedure
        params.add(Name);
        params.add(password);

 Users mainUser = new Users ();
 Vector tempResults = callingDaoProcedure.executeGetPasswordogin(params);//finds the password in DB

if (!tempResults.isEmpty()) {

                    mainUser = (MainUsers) tempResults.get(0);
 if (mainUser.getPassword().trim().equals(password.trim())) {

    HttpSession session = request.getSession(false);

         if (request.getSession().getAttribute("userLogin") == null) {
              // Session not created yet. So we do it now.
               session = request.getSession();
               requestgetRequest().setAttribute("status", "NO_ERRORS");
               request.getSession().setAttribute("userLogin", mainUser);
               response.sendRedirect("home.jsp");
              // I redirect them to their profile home pages
        } 

        else {
            // Session is already created.
             response.sendRedirect("home.jsp");
           // So i again redirect them to their home page
        }
}
else
{
              request.getRequest().setAttribute("status", "WRONG_PASSWORD");
              System.out.println("wrong password");
}

} 
```

上面的代码不是没有错误的，但是由于您提供了缺少的代码，因此这与我遇到的情况一样接近，您可以像这样在每个 jsp 上访问此变量

```
<input type="hidden" name="user" id="user" value="${sessionScope['userLogin'].user}"> 
```

**我希望它有所帮助，最重要的是你从中学到了一些东西**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:51:30.953

使用`Prelude`将 jsp 添加到所有 jsps 开头的 JSP。并检查会话是否已经存在。

**参考：**

*   [显示如何添加 Jsp Prelude 的示例](https://stackoverflow.com/questions/10944433/use-a-url-pattern-for-include-file/10945117#10945117)

*   [如何包含所有 Jsps 的页面](https://stackoverflow.com/questions/6327341/how-to-include-css-in-mulitple-jsps/6327586#6327586)

# html - td 上的表格边框未在 IE7 上显示

> ID：11244596
> 
> 赞同：0
> 
> 时间：2012-06-28T12:24:26.517
> 
> 标签：html, css, html-table, internet-explorer-7

我有所有 tr 和 td 的带边框的表格，
并且在我放置的 td 内

```
<input type="radio" /> 
```

我给输入显示块。

我的问题只是在 IE7 上。

当我尝试从输入中删除显示块时，在 td 上呈现无边框的表格会出现边框。

那么我应该使用什么 CSS 来处理这个问题呢？

这是表格：

```
<table cellspacing="0" cellpadding="0" class="grid rounded small">
<tr class="grid-headers"><th></th><th>Symmetric</th><th>Imparied</th></tr>
<tr class="grid-row">
    <td><span>Biceps</span></td>
    <td class="radio ">
        <input type="radio" id="question-34838" value="21380" name="helpfulness_34838[]" class="styled">
    </td>
    <td class="radio ">
        <input type="radio" id="question-34838_21382" value="21382" name="helpfulness_34838[]" class="styled">
    </td>
</tr>
</table> 
```

和风格：

```
#content table.grid {
width: 100%;
border: 2px solid #7DB9E8;
float: left;
clear: left;
margin-top: 5px;
overflow: hidden;
}

#content .grid .grid-row {
    height: 30px;
    background: #eee;
    background: -moz-linear-gradient(top,  #ffffff 0%, #dddddd 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#dddddd));
    background: -webkit-linear-gradient(top,  #ffffff 0%,#dddddd 100%);
    background: -o-linear-gradient(top,  #ffffff 0%,#dddddd 100%);
    background: -ms-linear-gradient(top,  #ffffff 0%,#dddddd 100%);
    background: linear-gradient(top,  #ffffff 0%,#dddddd 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#dddddd',GradientType=0 );
}

#content .grid .grid-row td {
    padding: 0px;
    margin-top: 0px;
    border-bottom: 1px solid #ccc;
}

#content .grid .grid-row:hover {
    background: #fff;
}

#content .grid .grid-row:hover td {
    background: #f9f9f9;
}

#content .grid .grid-row td:first-child {
    padding-left: 5px;
}

#content .grid-headers {
    height: 30px;
    background: #7DB9E8;
    color: #fff;
    font-weight: bold;
    text-align: center;
}

#content .grid-headers:hover {
    background: #7DB9E8;
}

#content .grid td.radio {
    height: 30px;
    background: transparent;
    border-left: 1px solid #ccc;
}

#content .grid td.radio:hover {
    background: #fff  url('checks_hover.png') 50% 0px no-repeat;
    cursor: pointer;
}

#content .grid td.radio.selected {
    background: #f9df18 url('checks_clicked.png') 50% 0px no-repeat;
}
#content .grid td.radio.selected:hover {
    background: #fceb55 url('checks_hover.png') 50% 0px no-repeat;
}

#content .grid td.checkbox {
    height: 30px;
    background: transparent;
    border-left: 1px solid #ccc;
}

#content .grid td.checkbox:hover {
    background: #fff  url('checks_hover.png') 50% 0px no-repeat;
    cursor: pointer;
}

#content .grid td.checkbox.selected {
    background: #f9df18 url('checks_clicked.png') 50% 0px no-repeat;
}
#content .grid td.checkbox.selected:hover {
    background: #fceb55 url('checks_hover.png') 50% 0px no-repeat;
} 
```

实际上所有由 JS 原型生成的 HTML

# python - pygtk，回调方法和控制器

> ID：11244599
> 
> 赞同：0
> 
> 时间：2012-06-28T12:24:34.007
> 
> 标签：python, model-view-controller, user-interface, callback, pygtk

pygtk 中有一些我不明白的地方：

我尝试构建一个 gui 来与 slqlite 数据库交互，以便在多个服务器上操作一些远程网络配置。

所以我制作了三个文件：

Mygui.py 包含所有 pygtk 指令；
Mydata.py 包含所有 sqlite 操作
，最后是 Myapp.py，它应该进行 Mygui 和 sqlite 之间的交互。

但我看不到如何实现回调函数及其定义：

在 Myapp.py 中使用这些行：

```
 class Myapp():
   def __init__():
      self.data = Mydata()
      self.gui = Mygui() 
```

...

在 Mygui.py 中有这样的行：

```
 class Mygui():
   def __init__(): 
```

... self.Base_menu = gtk.Menu() self.contenu_item = gtk.MenuItem('contenu base") self.Base_menu.append(self.contenu_item) ... # 其他

```
 self.contenu_item("activate", contenu_callback ) 
```

我认为（可能是错误的）“contenu_callback”应该在 Myapp.py 中有它连接数据库和显示器，但我不明白怎么做？

* * *

（5分钟后编辑）

感谢您的回答，但我不确定我是否理解正确：
所以我从您的最后一行了解到的是，在模块“MyGui.py”中，我应该添加`"import Myapp.py()"`能够调用 `"Myapp.activate_callback" ( "other.module" in this case being Myapp )`.

因此，在全球范围内，我将拥有包含“import Mydata”和“import Mygui”的“Myapp.py”以及包含“import pygtk”和“import Myapp”的模块“Mygui.py”。

我对导入“MyGui”的“Myapp.py”和将导入“Myapp”的“MyGui”之间的循环关系不太满意。

这真的是我应该做的将gui程序与应用程序处理分开吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:59:44.410

这取决于您对分离的要求有多严格。如果你想稍微宽松一点，你可以让 myapp 将自己传递给 Mygui 实例，然后 Mygui 可以调用 Myapp 上的方法：

```
class Myapp():
   def __init__():
      self.data = Mydata()
      self.gui = Mygui(self) 
```

或者您可以在 Mygui 上定义一堆事件，并让 Myapp 为这些事件注册处理程序：

```
class Myapp():
   def __init__():
      self.data = Mydata()
      self.gui = Mygui()
      self.gui.connect("record-saved", self.record_saved_handler) 
```

后者更加脱钩，但涉及更多仪式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:56:37.693

回调可以是任何可调用的，因此，将它们放在*哪里*取决于您。

```
def activate_callback(widget, data=None):
    pass 
some_widget.connect("activate", activate_callback)

class SomeClass(object):
    def activate_callback(widget, data=None):
        pass
my_class = SomeClass()
some_widget.connect("activate", my_class.activate_callback)

import some.other.module
some_widget.connect("activate", some.other.module.activate_callback) 
```

# java - Azure Bing 搜索肥皂

> ID：11244600
> 
> 赞同：0
> 
> 时间：2012-06-28T12:24:34.613
> 
> 标签：java, soap, azure, axis2, bing

[我需要使用http://api.search.live.net/search.wsdl](http://api.search.live.net/search.wsdl) url处的 wsdl 文件对肥皂进行搜索。我使用 eclipse 和 apache axis2 来生成 java 客户端文件，如[http://courses.coreservlets.com/Course-Materials/pdf/web-services/Axis2-Clients.pdf](http://courses.coreservlets.com/Course-Materials/pdf/web-services/Axis2-Clients.pdf)教程。我主要写了这段代码

```
 BingServiceStub stub = new BingServiceStub("http://api.search.live.net:80/soap.asmx");
            stub._getServiceClient().getOptions().setProperty(org.apache.axis2.transport.http.HTTPConstants.CHUNKED, false);
            BingServiceStub.SearchRequest request = new BingServiceStub.SearchRequest();
            request.setQuery("blahblah");
            request.setAppId("APP ID");
//          request.setAdult(BingServiceStub.AdultOption.Moderate);
//          request.setImage(null);
//          request.setMarket("2.0");
            SourceType type = SourceType.Web;
            ArrayOfSourceType types = new ArrayOfSourceType();
            types.addSourceType(type);
            request.setSources(types);
            BingServiceStub.SearchRequestE requestE = new BingServiceStub.SearchRequestE();
            requestE.setParameters(request);
            BingServiceStub.SearchResponseE response = stub.search(requestE); 
```

但我得到了这个错误

```
org.apache.axis2.AxisFault: Client error
    at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at com.microsoft.schemas.livesearch._2008._03.search.BingServiceStub.search(BingServiceStub.java:182)
    at client.BingServiceClient.main(BingServiceClient.java:40) 
```

我了解到 bing search api 已迁移到 windows azure。搜索网址有一些变化，但我找不到有关肥皂类型请求的文档。

需要帮忙 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:46:08.617

从 bing 搜索迁移到 azure，appid 概念替换为 account key 。我按照[http://courses.coreservlets.com/Course-Materials/pdf/web-services/Axis2-Clients.pdf](http://courses.coreservlets.com/Course-Materials/pdf/web-services/Axis2-Clients.pdf) 并在下面的代码中写了帐户密钥而不是 appid

```
request.setAppId("APP ID"); 
```

它不能解决我遇到客户端错误的问题。我认为由于迁移到天蓝色，必须为肥皂编写一个新教程。你给我的网址是 2009 年写的[http://www.bing.com/community/site_blogs/b/developer/archive/2009/05/28/using-the-live-search-api-version-2-0 -beta-with-java-and-the-api-s-soap-interface.aspx](http://www.bing.com/community/site_blogs/b/developer/archive/2009/05/28/using-the-live-search-api-version-2-0-beta-with-java-and-the-api-s-soap-interface.aspx)
它是旧的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:19:39.510

我不确定您为什么在帖子中引用了 Window Azure，因为您有两种访问 Bing 搜索的方法 1) 使用旧的 Big Developer Search 2) Windows Azure Market Place

如果您从 Windows Azure 数据市场获得 Bing 搜索 AppID，则 URL 为 [https://api.datamarket.azure.com/Bing/Search/Web?query](https://api.datamarket.azure.com/Bing/Search/Web?query)

但是，如果您从 Bing 开发人员中心获得了 AppID，那么在 2012 年 8 月 1 日之前，您仍然可以使用以下 URL： [http ://api.search.live.net/xml.aspx?Appid=App&query](http://api.search.live.net/xml.aspx?Appid=App&query)

根据您上面的代码，您使用的是 Bing Developer 站点 URL，因此它不是 Windows Azure 数据市场特定的，并且基于 Bing Search API 2.0，因此您可以查看下面的示例并修复您的代码，因为某些设置不正确记录如下：

[将 Live Search API 2.0 版与 Java 和 API 的 SOAP 接口一起使用](http://www.bing.com/community/site_blogs/b/developer/archive/2009/05/28/using-the-live-search-api-version-2-0-beta-with-java-and-the-api-s-soap-interface.aspx)

如果您从 Windows Azure Market Place 获得了您的 AppID，那么您可以使用在找到您的 AppID 等的相同位置描述的方法。

# java - 如何在集群中为一个节点和所有节点运行计划方法？

> ID：11244608
> 
> 赞同：9
> 
> 时间：2012-06-28T12:24:50.517
> 
> 标签：java, jakarta-ee, glassfish, ejb, cluster-computing

我有一个在集群中运行的 Glassfish 3.1.2 和一个 EJB 3.1 应用程序。我的应用程序中需要两种计划方法：

*   一种每天只运行一次（在单个节点上）的类型
*   以及在所有节点上运行的其他类型（每 1-2 分钟）——它们不需要运行同步方式！要求只是这种在每个节点上运行。

我不知道如何从这个集群开始 - 问题，这可能`@Schedule`（以及如何）还是我需要别的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T07:17:48.300

我遇到了完全相同的问题（需要一个`cluster`计时器和一个`per node`计时器）并遇到了这个问题。因此，对于任何感兴趣的人：

如果你用@Schedule(..., persistent=true) 声明定时器，你会得到一个`cluster`存储在定时器数据库中的定时器（可以迁移）

如果您使用@Schedule(..., persistent=false) 声明计时器，您将得到一个`node`未存储在计时器数据库中的计时器（无法迁移）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:38:42.823

你可以看看使用JMS。对于需要在单个节点上运行的方法，使用队列，对于需要在所有节点上运行的方法，使用主题。

# c# - NHibernate fluent HasMany 映射插入 NULL 外键

> ID：11244609
> 
> 赞同：5
> 
> 时间：2012-06-28T12:24:53.603
> 
> 标签：c#, fluent-nhibernate, fluent-nhibernate-mapping

我有一个有很多订单的实体公司。我将它们映射如下：

公司

```
HasMany(x => x.Orders).KeyColumn("CompanyID").Cascade.All().Inverse(); 
```

命令

```
References(x => x.Company).Column("CompanyID") 
```

但是，当我为公司创建一个新订单并尝试保存它时，我收到一条 SQL 错误：“无法将值 NULL 插入 'CompanyID' 列，表 'Orders'；列不允许空值。插入失败。”

（这是生成的 SQL 语句：INSERT INTO Order (Name, CompanyID) VALUES (?, ?); select SCOPE_IDENTITY()]]）

这是一个逻辑错误，因为我确实将 CompanyID 设置为不可为空。

但是，相反，我希望 CompanyID 填充正确的 ID，但在我的一生中，我无法让它工作。我尝试删除 Inverse（行为根本没有改变），更改了级联，将引用设置为不可为空。

我什至使表格中的列可以为空，以幽默 NHibernate。但这给我留下了一个孤立的订单，因为它*确实*创建了订单记录，但将 CompanyID 保留为 NULL。

这是我下新订单的测试代码：

```
Company test = RepositoryBase<Company>.GetById(1);
test.Orders.Add(new Order("test"));
RepositoryBase<Company>.SaveWithTransaction(test); 
```

顺便说一句，更新一切顺利。

无论如何，我希望这里有人能看到我在映射中做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:04:53.387

您忘记在订单上设置公司

```
test.Orders.Add(new Order("test") { Company = test }); 
```

inverse 只告诉 NH，order 使用 Order 对象上对 Company 的引用来插入 Id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:06:38.177

先加这个！！！

```
test.Orders.Add(new Order("test"){Company = test}); 
```

# java - 聊天服务器客户端错误

> ID：11244613
> 
> 赞同：2
> 
> 时间：2012-06-28T12:25:07.383
> 
> 标签：java, kryo

我开发了一个小程序，它的面板上有一个 jar 聊天客户端（使用 kryonet jar 文件）。在其他项目中，我正在调用这个小程序（通过将小程序项目转换为 jar 文件并将其放在第二个项目的根路径中并提供所有 jar 文件）它是小程序打开正常但是当我的聊天客户端用于注册时发生错误服务器端（在不同系统中运行的聊天服务器）。它说的是休闲例外。

```
Exception in thread "Server" com.esotericsoftware.kryo.KryoException: Buffer underflow.
Serialization trace:
is_server (com.garnet.panel.Network$RegisterName)
at com.esotericsoftware.kryo.io.Input.require(Input.java:153)
at com.esotericsoftware.kryo.io.Input.readBoolean(Input.java:554)
at      
 com.esotericsoftware.kryo.serializers.DefaultSerializers$BooleanSerializer
.create(DefaultSerializers.java:37)
at   com.esotericsoftware.kryo.serializers.DefaultSerializers$BooleanSerializer
.create (DefaultSerializers.java:27)
at com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:626)
at com.esotericsoftware.kryo.serializers.FieldSerializer.read
    (FieldSerializer.java:231)
at com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:714)
at com.esotericsoftware.kryonet.KryoSerialization.read(KryoSerialization.java:57)
at com.esotericsoftware.kryonet.TcpConnection.readObject(TcpConnection.java:138)
at com.esotericsoftware.kryonet.Server.update(Server.java:190)
at com.esotericsoftware.kryonet.Server.run(Server.java:342)
at java.lang.Thread.run(Thread.java:619) 
```

[我使用了聊天客户端和服务器](http://code.google.com/p/kryonet/source/browse/#svn/trunk/kryonet/examples/com/esotericsoftware/kryonet/examples/chat)的 kryonet 示例给出的休闲 示例

1) 我已将 Network 类放在两个应用程序的相同包中。2）当我下载并运行它而不应用到小程序时，这个例子工作正常。

# clojure - 使用带有 IntelliJIDEA 的 La Clojure 插件时如何更改 clojure 的版本

> ID：11244617
> 
> 赞同：1
> 
> 时间：2012-06-28T12:25:19.487
> 
> 标签：clojure, intellij-idea

我在 IntelliJIDEA 中使用 La Clojure 进行程序开发。当我安装 La Clojure(0.4.216) 时，clojure 的默认版本是 1.3。但是我想使用clojure 1.4，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:56:26.210

首先，您需要使用 clojure 1.4 版获取 jar。你可以从[这里](http://clojure.org/downloads)下载。解压并找到`clojure-1.4.0.jar`. 现在您可以在创建项目时手动更改 clojure lib，如下所示： ![在此处输入图像描述](../Images/3aab62523997de6f0d9908393be1f922.png) 按下`Create`按钮并选择 clojure-1.4.0

如果要修改现有项目，请按`File -> Project structure -> Libraries`。**删除**现有库（1.3.0）并使用 clojure 1.4.0 添加新库：

![在此处输入图像描述](../Images/60806561b91e155382cc596c16b521cc.png)

# c# - 多个ajax updateprogress不起作用

> ID：11244620
> 
> 赞同：0
> 
> 时间：2012-06-28T12:25:26.207
> 
> 标签：c#, asp.net, ajax

我有一个带有三个 ajax 更新面板的 asp.net 页面。在每个面板中都有一些控件，每个 updatepanel 作为 ajax 更新进度控件。第一个更新面板有一个下拉菜单，其中 autopostback = true。第二个和第三个更新面板将此下拉列表作为 asynpostback 触发器。当我在下拉列表中更改选择时，只会出现第一个 updateprogress 加载图像，而其他则不会出现。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:20:56.683

尝试更改`UpdateMode="Conditional"`更新面板中的。

例子

```
<script type="text/javascript">

        // Function to hide control on update
        function onUpdateOfSubscribe() {
            var panelProg = $get('divImage');
            // set it to visible
            panelProg.style.display = '';
            // hide label if visible      
            var lbl = $get('<%= this.pnlRegister.ClientID %>');
            lbl.innerHTML = '';
        }
        //Code to track the initiating event so to associate updateprogress
        var currentPostBackElement;
        function pageLoad() {
            var manager = Sys.WebForms.PageRequestManager.getInstance();
            manager.add_initializeRequest(OnInitializeRequest);
        }
        //On OnInitializeRequest
        function OnInitializeRequest(sender, args) {
            var manager = Sys.WebForms.PageRequestManager.getInstance();
            currentPostBackElement = args.get_postBackElement().parentElement;

            var cmdAuthoriseButton = '<%= btnRegister.ClientID %>';
            if (cmdAuthoriseButton == args._postBackElement.id) {
                // Show UpdateProgress for subscribe 
                onUpdateOfSubscribe();
            }
        }
</script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div class="FormWrapper">
        <div class="rowHeader">

        </div>
            <asp:UpdatePanel ID="updRegister" runat="server" UpdateMode="Conditional"   >
            <ContentTemplate>  
                    <asp:Panel ID="pnlRegister" runat="server" Height="10px">
                        <div class="row" style="display:none;">
                            <asp:Label ID="Label7" runat="server" Text="Activity:" class="lbl"></asp:Label>
                            <asp:DropDownList ID="ddActivities" runat="server" CssClass="dd252"  DataTextField="EventTitle" DataValueField="EventID">
                            </asp:DropDownList>
                        </div>
                        <div class="row">
                            <asp:Label ID="lblSName" runat="server" Text="Name:" class="lbl"></asp:Label>
                            <asp:TextBox ID="txtSName" runat="server" CssClass="txt"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator2"  runat="server" ErrorMessage="*" ControlToValidate="txtSName" ValidationGroup="ActivityReg" ></asp:RequiredFieldValidator>
                        </div>
                        <div class="row">
                            <asp:Label ID="lblSAge" runat="server" Text="Age:" class="lbl"></asp:Label>
                            <asp:TextBox ID="txtSAge" runat="server" CssClass="txt"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator4"  runat="server" ErrorMessage="*" ControlToValidate="txtSAge" ValidationGroup="ActivityReg" ></asp:RequiredFieldValidator>
                            <asp:RangeValidator ID="RangeValidator1" runat="server" ErrorMessage="*" ControlToValidate="txtSAge" MaximumValue="100" MinimumValue="4" 
                                ValidationGroup="ActivityReg" Type="Integer" ></asp:RangeValidator>
                        </div>

                        <div class="row">
                            <asp:Label ID="lblGMobile" runat="server" Text="Guardian Mobile:" class="lbl"></asp:Label>
                            <asp:TextBox ID="txtGMobile" runat="server" CssClass="txt"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator5"  runat="server" ErrorMessage="*" ControlToValidate="txtGMobile" ValidationGroup="ActivityReg" ></asp:RequiredFieldValidator>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator1"  runat="server" ErrorMessage="*" ControlToValidate="txtGMobile" ValidationGroup="ActivityReg" ></asp:RequiredFieldValidator><asp:RegularExpressionValidator ID="RegularExpressionValidator2" runat="server"  ValidationGroup="ActivityReg"
                                ControlToValidate="txtGMobile" ErrorMessage="*" ValidationExpression="[0-9 ]{9,}"></asp:RegularExpressionValidator>
                        </div>
                        <div class="rowDouble">
                            <asp:Label ID="lblAddress" runat="server" Text="Address:" class="lbl"></asp:Label>
                            <asp:TextBox ID="txtAddress" runat="server" CssClass="txtDouble" TextMode="MultiLine"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator3"  runat="server" ErrorMessage="*" ControlToValidate="txtAddress" ValidationGroup="ActivityReg" ></asp:RequiredFieldValidator>   
                        </div>
                        <div class="row">
                            <asp:Button ID="btnRegister" CssClass="btn" runat="server" 
                                ValidationGroup="ActivityReg" Text="Register" onclick="btnRegister_Click"  />
                        </div>
                        </asp:Panel> 
                    <div class="dSubMSG"> 
                        <asp:Label ID="lblMSG" runat="server" Text=""></asp:Label>
                    </div>
                    <div id="divImage" style="display:none" class="dSubAni">
                        <asp:Image ID="Image1" runat="server" ImageUrl="~/Images/ajax-loader-gray.png" Visible="true"/>
                    </div>

                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="btnRegister" EventName="Click" />
                </Triggers>
            </asp:UpdatePanel>
            <asp:UpdateProgress ID="updProgressRegister" runat="server" AssociatedUpdatePanelID="updRegister" >
                <ProgressTemplate>

                </ProgressTemplate>
            </asp:UpdateProgress>
    </div>
    </form> 
```

我有其他带有 UpdatePanel 和进度条的用户控件我捕获了 ascy 回发的源并相应地隐藏或显示进度条。希望这会有所帮助..但你可能需要努力

# c# - 获取客户端计算机的操作系统名称 - 平板设备和 PC

> ID：11244624
> 
> 赞同：0
> 
> 时间：2012-06-28T12:25:39.593
> 
> 标签：c#, asp.net

我有一个在 asp.net 3.5，c# 2008 中创建的网站 - 托管在 IIS 7 上。我想检查客户端从哪个操作系统访问该站点，无论是从计算机的浏览器还是从平板设备的浏览器，如 ipad、dell streak ，三星银河等或从智能手机。有没有可能知道。我试过了

```
Page.Request.Browser.Platform.ToString(); 
```

但从android设备浏览器访问我得到它未定义。

我也试过

```
Request.Browser.Capabilities["OS"].ToString(); 
```

但对于 android，我得到了操作系统名称 Linux ！

我想要确切的名称，无论是 windows、Symbian、Android、iOS、MAC 还是 Linux。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:28:21.417

尝试从用户代理获取它

# c# - 正则表达式以确保变量是常量

> ID：11244626
> 
> 赞同：0
> 
> 时间：2012-06-28T12:25:50.137
> 
> 标签：c#, .net, regex

我需要编写一个正则表达式来确保变量是常量，给定如下输入：

```
const size N = 1;
const size MAX = 1;
int const stant = 1147;
int x = 4; 
```

这是我创建的表达式：

```
const\s.*(\]|\s|\*)VARIABLETOCHECK(\(|\[|=|\s|;) 
```

**表达式说明：**

*   `\s`- 空格后“const”。
*   `.*`- 任意数量的任意符号。
*   `(\]|\s|\*)`- 应该放在变量之前的符号。
*   `VARIABLETOCHECK`是我设置要检查的变量名的地方。
*   `(\(|\[|=|\s|;)`- 应该在变量之后的符号

**问题：**

问题是如果单词后面只有一个空格，`const`我的表达就不起作用。

而且每个变量 ( `N`, `MAX`, `stant`) 应该单独匹配：

```
const\s.*(\]|\s|\*)N(\(|\[|=|\s|;) 
```

这应该只选择字符串：`const size N = 1;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:19:40.723

如果我正确理解您的问题，您的目标是确保条目是恒定的。

**输入：**文本行

**预期输出：**如果是常量则为 True，否则为 False

* * *

**正则表达式：**

为此，我建议使用以下正则表达式：

```
^.*?const\s+(\w+\s+)?(\w)\s+=.*$ 
```

解释：

`^`线的开始

`.*?`任何字符都匹配并且其非贪婪

`const`关键词

`\s+`至少一个空格

`(\w+\s+)?`不是变量名的可选词。

`(\w)`Word 是变量名。

`\s+`可选空格

`=`等于文字值

`.*`任何字符

`$`行结束

此外，正则表达式中的第二组将为您提供变量名称，以防您想使用预定义的名称列表进行验证。

* * *

**上述正则表达式的结果：**

`const size N = 1;`==>**真**

`const size MAX = 1;`==>**真**

`int const stant = 1147;` ==>**真**

`int x = 4;` ==>**错误**

或者，您可以通过在 matcher 中获取第二组来获取变量名称。

**我不会对 VARIABLETOCHECK 进行硬编码，并且在大多数情况下硬编码是一种不好的做法。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:34:28.130

*使用正则表达式：*

```
\bconst\b\s*(?:.*\b)?(VARIABLETOCHECK\b[^=]*?)\s*\=\s*(.*?)\s*[,;] 
```

*[请参阅此处](http://ideone.com/Mn7sQ)的测试代码。如果它验证“const”语法，它会返回变量名及其值。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:52:34.147

我走错路了。

解决方法是下一个： 1\. 下载 Doxygen 2\. 生成 xml 格式的报告 3\. 从 xml 中获取全局变量

谢谢你们！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:35:53.217

这很尴尬，并且仅适用于该语言中的少数测试用例。编写一个解析方式与 c# 相同的正则表达式非常困难。但是，让我们用你所拥有的。

你写“应该在变量之前的符号”，但你的意思是“*可以*在变量之前的符号”，对吗？所以你需要`*`事后说这些字符可能会或可能不会出现：

```
const\s.*(\]|\s|\*)*VARIABLETOCHECK(\(|\[|=|\s|;) 
```

现在，你有`.*`你的变量，这意味着任何字符串，真的。您可能应该排除`;`并且`=`至少通过使用

```
const\s[^;=]*(\]|\s|\*)*VARIABLETOCHECK(\(|\[|=|\s|;) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-01T05:45:10.327

以下正则表达式将识别所有常量（整数、小数...）

```
digit [0-9]
digits {digit}+
constant {digits}(.{digits})?((e|E)[+|-]?{digits})? 
```

PS：这是针对 lex

# objective-c - ios: gdb p (CGFloat) [[self view] center].x

> ID：11244633
> 
> 赞同：1
> 
> 时间：2012-06-28T12:26:33.057
> 
> 标签：objective-c, xcode, gdb

你如何在 Xcode gdb 中 p(print) 一个 CGFLoat：

gdb p (CGFloat) [[self view] center].x

结果：

无法在 0x184e08c 调用函数“objc_msgSend”：没有可用的返回类型信息。无论如何要调用此函数，您可以显式转换返回类型（例如，'print (float) fabs (3.0)'）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:29:59.710

使用 GDB 时，您必须强制转换所有 Objective-c 方法调用。

```
gdb p (CGFloat) ((CGPoint)[(UIView *)[self view] center]).x 
```

# c# - 单击更改图像源

> ID：11244638
> 
> 赞同：0
> 
> 时间：2012-06-28T12:26:54.443
> 
> 标签：c#, wpf

我为一个复选框制作了一个自定义图像，并希望它在每次单击图像时在选中版本和未选中版本之间切换。我的源代码：

**XAML**

```
<CheckBox Name="checkBox1" Padding="0" BorderThickness="0" Margin="5" Grid.Row="1">
    <Image Name="image1" Margin="-14,0,0,0" Source="checkbox0.png" MouseDown="Image_MouseDown" Stretch="Uniform"/>
</CheckBox> 
```

**C＃**

```
private void Image_MouseDown(object sender, MouseButtonEventArgs e)
{
     if (e.LeftButton == MouseButtonState.Pressed)
     {
         if (checkBox1checked)
         {
             image1.BeginInit();
             image1.Source = new BitmapImage(new Uri("/checkbox0.png", UriKind.RelativeOrAbsolute));
             image1.EndInit();
             checkBox1checked = false;
         }

         if (!checkBox1checked)
         {
             image1.BeginInit();
             image1.Source = new BitmapImage(new Uri("/checkbox1.png", UriKind.RelativeOrAbsolute));
             image1.EndInit();
             checkBox1checked = true;
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:30:30.090

使用复选框的 Uncheck 和 Check 事件，并在其中设置图像源

```
<CheckBox Name="checkBox1" Padding="0" Unchecked="chkbox_Unchecked" Checked="chkbox_Checked BorderThickness="0" Margin="5" Grid.Row="1">
   <Image Name="image1" Margin="-14,0,0,0" Source="checkbox0.png" Stretch="Uniform"/>
</CheckBox>

        private void chkbox_Checked(object sender, RoutedEventArgs e)
        {
            SetImage("/checkbox0.png");
        }

        private void chkbox_Checked(object sender, RoutedEventArgs e)
        {
             SetImage("/checkbox1.png");
        }

    private void SetImage(string path)
    {
        image1.BeginInit();
                image1.Source = new BitmapImage(new Uri(path, UriKind.RelativeOrAbsolute));
                image1.EndInit();

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:39:25.920

因为后面的代码中存在逻辑错误，所以第二个 if 语句将在第一个 if 之后执行，因为您更改了 checkbox 的值。

您还在复选框内定义了图像，每次初始化图像时都会以某种方式重置复选框的值，考虑将图像移到复选框之外或仅使用公共标志

```
<CheckBox Name="checkBox1" Padding="0" BorderThickness="0" Margin="5" Grid.Row="1">
</CheckBox>
<Image Name="image1" Margin="-14,0,0,0" Source="checkbox0.png" MouseDown="Image_MouseDown" Stretch="Uniform"/> 
```

改变你的代码

```
private void Image_MouseDown(object sender, MouseButtonEventArgs e)
    {
        if (e.LeftButton == MouseButtonState.Pressed)
        {
            if (checkBox1checked)
            {
                image1.BeginInit();
                image1.Source = new BitmapImage(new Uri("/checkbox0.png", UriKind.RelativeOrAbsolute));
                image1.EndInit();
                checkBox1checked = false;
            }
            else
            {
                image1.BeginInit();
                image1.Source = new BitmapImage(new Uri("/checkbox1.png", UriKind.RelativeOrAbsolute));
                image1.EndInit();
                checkBox1checked = true;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T11:07:32.247

更好的尝试：

```
 private void chkbox_Unchecked(object sender, RoutedEventArgs e)
    {
         SetImage("/checkbox1.png");
    }

        private void chkbox_Checked(object sender, RoutedEventArgs e)
    {
         SetImage("/checkbox1.png");
    } 
```

# cocoa - 如何使用 Cocoa Autolayout 根据优先级调整两个子视图的大小？

> ID：11244643
> 
> 赞同：7
> 
> 时间：2012-06-28T12:27:10.087
> 
> 标签：cocoa, autolayout, nslayoutconstraint

我在 Cocoa 中玩 Autolayout，有些事情对我来说并不清楚。

我在一个窗口上有 2 个视图。每个视图的宽度是父窗口宽度的 1/2。

```
|           |           |
|           |           |
|   View1   |   View2   |
|           |           |
|           |           | 
```

如果我调整窗口大小，我希望 View2 先调整大小。

```
|           |     |
|           |     |
|   View1   |View2|
|           |     |
|           |     | 
```

当 View2 达到其最小尺寸时，我希望 View1 调整为最小尺寸。

```
|     |     |
|     |     |
|View1|View2|
|     |     |
|     |     | 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T14:25:07.213

布局似乎有点不确定。view2 什么时候开始缩小而不是匹配 view1 的大小？我假设视图应该是相同的大小，直到 view1 达到最低限度。此时，view2 调整大小直到达到最小值，然后 view1 调整大小直到达到最小值。

我们可以通过向约束添加优先级来实现这种行为。按重要性排序，我们有：

1.  view1 和 view2 >= 最小值
2.  view1 >= view1SoftMinimum
3.  视图1 == 视图2

约束 1 必须高于窗口大小调整优先级。我们可以将其设为必需（这是默认设置）。

约束 2 必须高于约束 3，但低于 NSLayoutPriorityDragThatCannotResizeWindow。我们将其设为 480。

约束 3 必须低于约束 2，因此我们将其设为 479。

我们可以用一个可视格式字符串表达所有这些约束，您可以添加

```
|[view1(>=view1Minimum,>=view1SoftMinimum@480,==view2@479)][view2(>=view2Minimum)]| 
```

这是我测试的代码：

```
NSView *view1 = [[NSTextView alloc] initWithFrame:NSZeroRect];
NSView *view2 = [[NSTextView alloc] initWithFrame:NSZeroRect];

[view1 setTranslatesAutoresizingMaskIntoConstraints:NO];
[view2 setTranslatesAutoresizingMaskIntoConstraints:NO];

NSView *contentView = [self.window contentView];

[contentView addSubview:view1];
[contentView addSubview:view2];

NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(view1, view2);

[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[view1]|" options:NSLayoutConstraintOrientationVertical metrics:NULL views:viewsDictionary]];
[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[view2]|" options:NSLayoutConstraintOrientationVertical metrics:NULL views:viewsDictionary]];

NSDictionary *metrics = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithFloat:300], @"view1SoftMinimum",
                         [NSNumber numberWithFloat:150], @"view1Minimum",
                         [NSNumber numberWithFloat:150], @"view2Minimum", nil];

[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[view1(>=view1Minimum,>=view1SoftMinimum@480,==view2@479)]-[view2(>=view2Minimum)]|" options:0 metrics:metrics views:viewsDictionary]]; 
```

# r - 与 data.frame 长度不等的字符向量列表

> ID：11244650
> 
> 赞同：3
> 
> 时间：2012-06-28T12:27:37.040
> 
> 标签：r, list, dataframe

我有一个如下所示的命名列表：

```
> head(pathways)
$<NA>
NULL
$`2`
[1] "hsa04610"
$`9`
[1] "hsa00232" "hsa00983" "hsa01100"
$`10`
[1] "hsa00232" "hsa00983" "hsa01100"
$<NA>
NULL
$<NA>
NULL 
```

更早地描述它。每个列表的名称是一个 id 号，作为列表元素的字符向量的每个元素的条目是另一个 id 号。我可以使用 轻松过滤掉`$<NA>`条目`is.na()`，但是我想更改其余部分，使其看起来像：

```
id   another_id
2    hsa04610   
9    hsa00232   
9    hsa00983   
9    hsa01100   
10   hsa00232  
10   hsa00983
10   hsa01100

> dput(test)
structure(list(`NA` = NULL, `2` = "hsa04610", `9` = c("hsa00232", 
"hsa00983", "hsa01100"), `10` = c("hsa00232", "hsa00983", "hsa01100"
), `NA` = NULL, `NA` = NULL), .Names = c(NA, "2", "9", "10", 
NA, NA)) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T13:16:52.417

所以我找到了另一个似乎有效的答案。

`stack(pathways)`

这似乎太容易了，但是很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:39:38.953

因此，如果您有列表`l`（在删除 NA 之后），那么：

```
another_id <- unlist(l)
id <- rep(names(l), unlist(lapply(l, length)))
data.frame(id, another_id, row.names=NULL) 
```

会给出结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T12:41:38.540

```
#sample data
pathways <- list(`1` = letters[1:3], `2` = LETTERS[4:5], `3` = 6:9, `4` = NULL)

#a solution
n <- vapply(pathways, length, integer(1))
id <- rep.int(names(pathways), n)
another_id <- unlist(pathways, use.names = FALSE)
data.frame(id = id, another_id = another_id) 
```

# php - OpenCart 盒装产品

> ID：11244652
> 
> 赞同：0
> 
> 时间：2012-06-28T12:27:41.510
> 
> 标签：php, opencart, subscription

我正在尝试实现一个概念，在该概念中，用户可以在一系列产品中进行选择，并创建一个盒装产品汇编。要包含在盒子中的产品不会有任何价格，盒子会有价格（固定价格，与选择的产品无关），更准确地说，用户将通过订阅支付盒子的费用。因此，用户将支付 3/6/12 个月的订阅费用，并将能够创建 3/6/12 的产品汇编，每个月一个。

这只能通过配置来实现吗？我可以创建一个具有固定价格的产品并设置一些项目作为该产品的选项吗？所以，在这种情况下，盒子就是产品，它的价格是固定的，实际上它没有价格，用户必须支付他的订阅费，选项是用户可以在盒子中包含哪些项目。

在结帐时，我需要添加一个检查用户是否已支付订阅费用和一些其他检查，在这篇文章中找到：[OpenCart 订阅模型（x 个月）](https://stackoverflow.com/questions/11244247/opencart-subscription-model-x-months)

有任何想法吗？这是否可行，如果可行，从一个非常高的架构角度来看如何？

干杯，
伊拉克利斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:08:30.197

如果您为盒子创建单个产品，然后为您提供的产品创建选项以供选择，那么是的，这可以使用 opencart 完成。我建议您对选项使用复选框，但如果您想限制选择的数量，可能需要进一步调整。

至于订阅模式，理论上肯定是可以添加的，这是我过去为几个客户做过的事情。我认为已经在扩展商店中进行了扩展

# c - 获取每行的列类型

> ID：11244656
> 
> 赞同：0
> 
> 时间：2012-06-28T12:28:07.630
> 
> 标签：c, sqlite

我有一张有几行的桌子。数据类型未在表结构中设置，有些行是整数，有些是 BLOB。

我怎么知道是什么？我正在使用**C API**。

`sqlite3_column_type`为所有行提供相同的数据类型，这是不正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:43:46.703

1.  `sqlite3_column_type`是为您提供数据的实际类型的函数。
2.  请注意，当您使用其他`sqlite3_column_*`函数获取值时，sqlite 会转换它拥有的数据并且类型*会更改*以反映这一点。在对该行进行任何其他操作之前询问类型。
3.  插入值时有一些逻辑可以转换它们。您确定数据是您所期望的吗？检查`typeof`SQL 函数（`sqlite3_column_type`C 函数和`typeof`SQL 函数应始终返回相同的值）。

# iphone - NSAffinetransform 和 CGAffinetransform 的区别

> ID：11244667
> 
> 赞同：8
> 
> 时间：2012-06-28T12:28:53.947
> 
> 标签：iphone, cgaffinetransform

`NSAffinetransform`有没有人有任何很好的例子来解释和之间的区别`CGAffinetransform`？？谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-28T14:12:57.437

一个区别是 NSAffineTransform 是一个对象，而 CGAffineTransform 是一个结构。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-28T12:37:01.760

简单的答案：`NSAffinetransform`它适用于 Mac osx`CGAffinetransform`是适用于 iOS 但是这些类之间存在差异

# redirect - Htacces 仅将旧主页 + index.php 重定向到子目录中的新站点；所有其他页面不

> ID：11244669
> 
> 赞同：0
> 
> 时间：2012-06-28T12:28:58.257
> 
> 标签：redirect, subdirectory, home-directory

我的旧网站 mysite.com 位于根目录下。我在子目录 mysite.com/2/ 中创建了一个新站点

当人们访问我的旧站点 mysite.com （浏览器查找 index.php 文件）或 mysite.com/index.php 时，我希望他们被重定向到我的新站点 mysite.com/2/

我的旧网站的所有其他页面都不应重定向，因为它们获得了大量流量，我在标题中创建了一个指向新网站的按钮。

这可以通过 .htaccess 重写来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:37:59.043

何必？只需在您的主页中使用元刷新。

```
 <meta http-equiv="refresh" content="0;URL=http://mysite/2"> 
```

# wordpress - WP 管理菜单中的多个 Wordpress 自定义帖子类型

> ID：11244673
> 
> 赞同：3
> 
> 时间：2012-06-28T12:29:10.120
> 
> 标签：wordpress, custom-post-type

我想在 wp 管理区域内创建三个顶级部分，然后列出一组 wordpress 自定义帖子类型。例如。

要做的事情：（主组）-事件（自定义帖子类型）-景点（自定义帖子类型）-购物（自定义帖子类型）-等

住宿：（另一个主要组）-酒店（自定义帖子类型）-Bed and Breakfasts（自定义帖子类型）-等

我宁愿做这些和单独的自定义帖子类型，也不愿使用自定义分类法来更好地组织和控制。

此外，每个自定义帖子类型很可能会进一步应用其自己的分类法 - 例如，事件可能具有户外、室内等分类法。

我知道如何创建单个帖子类型，但我不确定如何将它们分组到顶级层次结构中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:58:08.437

解决方案是：

1.  住宿/要做的事情将是**模板页面**

2.  管理部分中的这些模板将有一个选项，可以根据 a) 帖子类型和 b) 可选的进一步分类列出所需的帖子类型

3.  在前端模板上，使用类似于下面的代码来收集正确的数据

* * *

```
global $post;
$serialised_post_types = get_post_meta($post->ID,'post_types_to_list',true); //i.e. a serialised array('hotel','bnb');
$serialised_post_types = unserialize($serialised_post_types);
$args = array('post_type' => $serialised_post_types); //basic args

$res = new WP_Query($args); 
```

# jquery - jquery 焦点不会触发 css 焦点

> ID：11244678
> 
> 赞同：10
> 
> 时间：2012-06-28T12:29:20.057
> 
> 标签：jquery, css

使用 jquery 将焦点设置到元素时似乎存在问题。它显然不会触发元素上设置的 :focus css 属性。

例如，在我的 CSS 中，我有：

```
div.item1:focus { border:2px solid red; } 
```

在我的 jquery 中，我有：

```
$("div.item1").focus(); 
```

焦点已设置，但元素没有应用红色边框。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T12:32:10.707

`div`元素不使用`:focus`选择器 .. 参见[CSS2 规范](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes)

> :focus 伪类在元素具有焦点时应用（接受键盘事件或其他形式的文本输入）。

你可以这样做：

```
.hoverclass { border:2px solid red; }

$("div.item").hover(function() {
  $(this).addClass('hoverclass')
},function() {
  $(this).removeClass('hoverclass')
}); 
```

这使用[`.hover()`](http://api.jquery.com/hover/),[`.addClass()`](http://api.jquery.com/addClass/)和[`.removeClass()`](http://api.jquery.com/removeClass/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T12:32:20.107

`focus()`仅可用于表单元素和链接，如果您尝试将其用于其他类型的元素，则无法使用。

有关更多信息，请参见[focus() 的 jQuery 文档，](http://api.jquery.com/focus/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T12:33:38.623

从[手册](http://api.jquery.com/focus/)：

> 当元素获得焦点时，焦点事件被发送到元素。此事件隐式适用于一组有限的元素，例如表单元素（`<input>`、`<select>`等）和链接（`<a href>`）。在最近的浏览器版本中，可以通过显式设置元素的 tabindex 属性来扩展事件以包括所有元素类型。元素可以通过键盘命令（例如 Tab 键）或通过鼠标单击元素获得焦点。

有关示例，请参见此答案：[https ://stackoverflow.com/a/5966034/1013082](https://stackoverflow.com/a/5966034/1013082)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:45:46.320

转到 jQuery focus() 页面查看：

> 当元素获得焦点时，焦点事件被发送到元素。此事件隐式适用于一组有限的元素，例如表单元素（`<input>`、`<select>`等）和链接（`<a href>`）。在最近的浏览器版本中，可以通过显式设置元素的 tabindex 属性来扩展事件以包括所有元素类型。元素可以通过键盘命令（例如 Tab 键）或通过鼠标单击元素获得焦点。

在此处转到 PPK 对浏览器的关注研究

[PPK 焦点事件浏览器兼容性](http://www.quirksmode.org/dom/events/blurfocus.html)

看起来所有浏览器都通过了 tabindex 测试。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-28T12:34:05.870

你需要这样做：

```
$("div.item1").focus(function(){
        $("div.item1").css("border","2px solid red");
      }); 
```

# c# - 如何使用 Lat 和 Long 获得离给定点最近的 X 点？

> ID：11244679
> 
> 赞同：0
> 
> 时间：2012-06-28T12:29:24.600
> 
> 标签：c#, asp.net, google-maps, map

我有带有纬度和经度坐标的点列表，我想从中输入一个点说 X。我需要帮助提出一种算法来确定最接近该点 x 的 3 个列表成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:31:10.310

您基本上可以将其视为 3D 最近点问题。（我现在手头没有 Lat / Lon 到笛卡尔（x，y，z）的计算，但您可以使用 google 轻松找到它）。

```
public class LatLonPoint
{
   public double Latitude { get; set; }
   public double Longitude { get; set; }

   public double X
   {
      get
      {
      .......
      }
   }

   public double Y ....
   public double Z .....

   public double DistanceTo(LatLonPoint point)
   {
     double dX = point.X - X;
     double dY = point.Y - Y;
     double dZ = point.Z - Z;

     return Math.Sqrt(dX * dX + dY * dY + dZ * dZ);
   }
} 
```

您的课程代码：

```
// Your list of points
private List<LatLonPoint> _points = new List<LatLonPoint>();

public LatLonPoint FindClosestPoint(LatLonPoint x)
{
    var closestPoint = null;
    double closestDistance = double.MaxValue;

    foreach (var point in latLonList)
    {
        double distanceToPoint = point.DistanceTo(x);
        if (distanceToPoint < closestDistance)
        {
           closestPoint = point;
           closestDistance = distanceToPoint;
        }
    }

    return closestPoint;
} 
```

# mysql - MySQL中按位置排序，多个产品分配到一个位置

> ID：11244691
> 
> 赞同：0
> 
> 时间：2012-06-28T12:30:30.773
> 
> 标签：mysql, sorting

我正在使用电子商务系统，并且正在尝试修改产品的排序方式。

我的问题是，当两个项目具有相同的值时，mysql如何处理排序？

例如

产品按分配给它们的位置排序（因此位置 1 将显示在顶部）。

但是，如果我有 3 个产品分配给位置 1 和 2 个产品分配给位置 2，那么默认情况下分配给位置 1 的 3 个产品是如何排序的？这会特定于电子商务系统还是有 mysql 默认值，例如 ID？

我希望这足够清楚，我无法通过谷歌搜索真正找到任何好的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:32:10.910

您可以指定要排序的其他字段，最早的字段优先，但后面的字段决定如何打破平局。例如：

```
ORDER BY foo ASC, bar DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:32:22.997

结果是随机的，因为不会应用其他“默认”顺序。如果您需要按多列排序，您可以这样做

```
order by position, id, date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:34:54.777

`ORDER BY`您可以在子句中给出多个列名（例如 A、B、C） 。当 A 中的值相等时，B 用于做出排序决策。如果在 B 中也相等，则使用 C。这称为字典顺序。`SELECT`请参阅命令和`ORDER BY`子句的任何 SQL 文档。

# android - 如何在android中获取和显示所有文件图标？

> ID：11244692
> 
> 赞同：0
> 
> 时间：2012-06-28T12:30:31.457
> 
> 标签：android

我`GridView`显示所有 SD 卡文件。每个文件都有自己的扩展名。我的`first.xml`包含一个`ImageView`和一个`TextView`。我的另一个 XML 文件包含`GridView`.
我的示例代码是

```
File file = new File(Environment.getExternalStorageDirectory(),"Sample/Users/")
String str = file.getName(); 
```

例如屏幕截图是
![在此处输入图像描述](../Images/67aadc9127395b681b1571aa35585584.png) 如何获取和显示此文件图标。我不知道。如果可能与否。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:42:48.963

你可以试试这个并相应地改变，

```
 final Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(fileUri);
    intent.setType(MimeTypeMap.getSingleton().getMimeTypeFromExtension("fileExtension"));

    final List<ResolveInfo> matches = getPackageManager().queryIntentActivities(intent, 0);
    for (ResolveInfo match : matches) {
        final Drawable icon = match.loadIcon(getPackageManager());
        final CharSequence label = match.loadLabel(getPackageManager());
    } 
```

# selenium - WebDriver 等待超时和隐式等待超时之间的区别？

> ID：11244697
> 
> 赞同：8
> 
> 时间：2012-06-28T12:30:49.977
> 
> 标签：selenium, webdriver

我想知道 WebDriver 等待超时和隐式等待超时之间的技术区别。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T12:39:33.880

如[文档中所述](http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-and-implicit-waits)：

`Implicit Wait`在内部设置将用于所有连续`WebElement`搜索的超时。`NoSuchElementException`如果找不到元素，它将在指定的时间内一次又一次地尝试查找元素，然后抛出一个。它只做这个，不能被迫做其他事情——它等待元素出现。

`Explicit Wait`，或者只是`Wait`您用于特定搜索的一次性计时器。它更具可扩展性，您可以将其设置为等待您可能喜欢的任何条件。通常，您可以使用一些预构建[`ExpectedConditions`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)的来等待元素变为可点击、可见、不可见等，或者只是编写适合您需要的自己的条件。

# xslt - 使用 XSL 将 FMP 转换为 WordPress

> ID：11244698
> 
> 赞同：1
> 
> 时间：2012-06-28T12:30:54.520
> 
> 标签：xslt

我正在尝试将 FileMakerPro 中的产品数据库导出到 WordPress 导入 XML 结构中。

在所需的 XML 结构中有许多字段我不需要添加值，但有些字段我需要更新。一旦我有了一个工作原型，我应该能够对其进行最后的润色。

我正在使用一个名为 XSLPallete 的程序来进行转换。是否有其他简单的方法可以将 XSL 应用于 XML？

导出的数据

```
<RESULTSET FOUND="745">
        <ROW MODID="108" RECORDID="586">
            <COL>
                <DATA>Product 1 name</DATA>
            </COL>
            <COL>
                <DATA>$XXX.XX</DATA>
            </COL>
            <COL>
                <DATA>image reference</DATA>
            </COL>
            <COL>
                <DATA>product description</DATA>
            </COL>
        </ROW>
        <ROW MODID="48" RECORDID="587">
            <COL>
                <DATA>Product two name</DATA>
            </COL>
            <COL>
                <DATA>$XXX.XX<DATA>
            </COL>
            <COL>
                <DATA>image reference</DATA>
            </COL>
            <COL>
                <DATA>product description</DATA>
            </COL>
        </ROW> 
```

这是所需的输出结构

```
<item>
    <title>Product Name</title>
    <link>url + post_name</link>
    <pubDate>date</pubDate>
    <dc:creator>user</dc:creator>
    <guid isPermaLink="false"></guid>
    <description></description>
    <content:encoded><![CDATA[]]></content:encoded>
    <excerpt:encoded><![CDATA[]]></excerpt:encoded>
    <wp:post_id>29</wp:post_id>
    <wp:post_date>timestamp</wp:post_date>
    <wp:post_date_gmt>timestamp</wp:post_date_gmt>
    <wp:comment_status>open</wp:comment_status>
    <wp:ping_status>open</wp:ping_status>
    <wp:post_name>post_name</wp:post_name>
    <wp:status>publish</wp:status>
    <wp:post_parent>0</wp:post_parent>
    <wp:menu_order>0</wp:menu_order>
    <wp:post_type>product</wp:post_type>
    <wp:post_password></wp:post_password>
    <wp:is_sticky>0</wp:is_sticky>
    <category domain="product_cat" nicename="the_category"><![CDATA[Apple]]></category>
    <wp:postmeta>
        <wp:meta_key>_edit_last</wp:meta_key>
        <wp:meta_value><![CDATA[3]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>seo_follow</wp:meta_key>
        <wp:meta_value><![CDATA[false]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>seo_noindex</wp:meta_key>
        <wp:meta_value><![CDATA[false]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>total_sales</wp:meta_key>
        <wp:meta_value><![CDATA[0]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_regular_price</wp:meta_key>
        <wp:meta_value><![CDATA[2499]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_sale_price</wp:meta_key>
        <wp:meta_value><![CDATA[]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_tax_status</wp:meta_key>
        <wp:meta_value><![CDATA[taxable]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_tax_class</wp:meta_key>
        <wp:meta_value><![CDATA[]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_visibility</wp:meta_key>
        <wp:meta_value><![CDATA[visible]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_purchase_note</wp:meta_key>
        <wp:meta_value><![CDATA[]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_featured</wp:meta_key>
        <wp:meta_value><![CDATA[yes]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_weight</wp:meta_key>
        <wp:meta_value><![CDATA[4]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_length</wp:meta_key>
        <wp:meta_value><![CDATA[45]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_width</wp:meta_key>
        <wp:meta_value><![CDATA[35]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_height</wp:meta_key>
        <wp:meta_value><![CDATA[10]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_sku</wp:meta_key>
        <wp:meta_value><![CDATA[9999]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_product_attributes</wp:meta_key>
        <wp:meta_value><![CDATA[a:0:{}]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_downloadable</wp:meta_key>
        <wp:meta_value><![CDATA[no]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_virtual</wp:meta_key>
        <wp:meta_value><![CDATA[no]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_sale_price_dates_from</wp:meta_key>
        <wp:meta_value><![CDATA[]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_sale_price_dates_to</wp:meta_key>
        <wp:meta_value><![CDATA[]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_price</wp:meta_key>
        <wp:meta_value><![CDATA[$price]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_stock</wp:meta_key>
        <wp:meta_value><![CDATA[]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_stock_status</wp:meta_key>
        <wp:meta_value><![CDATA[instock]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_backorders</wp:meta_key>
        <wp:meta_value><![CDATA[no]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_manage_stock</wp:meta_key>
        <wp:meta_value><![CDATA[no]]></wp:meta_value>
    </wp:postmeta>
    <wp:postmeta>
        <wp:meta_key>_thumbnail_id</wp:meta_key>
        <wp:meta_value><![CDATA[30]]></wp:meta_value>
    </wp:postmeta>
</item> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T01:13:40.770

这是一个 XSLT 1.0 样式表，可帮助您入门。一旦确定了转换规则，您就可以在此基础上进行构建。

此样式表在应用于您的示例输入时...

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/> 

<xsl:template match="/">
 <items>
   <xsl:apply-templates select="RESULTSET/ROW" />
  </items>
</xsl:template>

<xsl:template match="ROW">
 <item>
   <title><xsl:value-of select="COL[1]/DATA" /></title>
   <description><xsl:value-of select="COL[4]/DATA" /></description>
  </item>
</xsl:template>

</xsl:stylesheet> 
```

...将产生以下输出文件...

```
<items>
  <item>
    <title>Product 1 name</title>
    <description>product description</description>
  </item>
  <item>
    <title>Product two name</title>
    <description>product description</description>
  </item>
</items> 
```

# java - 在android的谷歌地图中获取最近的地铁站位置

> ID：11244706
> 
> 赞同：0
> 
> 时间：2012-06-28T12:31:19.957
> 
> 标签：java, android, google-maps, google-maps-api-3

我一直在开发一个应用程序，我成功地显示了我的位置和地图。现在我试图找到离`metro station`我当前位置最近的位置并显示它的属性、名称等。

我试过了

> 谷歌

但找不到任何解决方案。如果有人可以帮助任何教程或任何相关内容，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:33:34.947

试试[Google Places API](https://developers.google.com/places/documentation/) 您可以按坐标搜索并过滤以仅显示某些对象。

# algorithm - 解决“减少字符串”挑战

> ID：11244710
> 
> 赞同：11
> 
> 时间：2012-06-28T12:31:43.163
> 
> 标签：algorithm, dynamic-programming

我从 interviewstreet.com 看到了各种讨论和尝试解决[“字符串缩减”](https://www.interviewstreet.com/challenges/dashboard/#problem/4eac48496bee2)问题的代码，但没有一个是通过动态编程来解决的。

列在[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)部分下，问题描述如下：

> 给定一个由 a、b 和 c 组成的字符串，我们可以执行以下操作：取任意两个相邻的不同字符并将其替换为第三个字符。例如，如果“a”和“c”相邻，则可以将它们替换为“b”。
> 
> **通过重复**应用此操作可以产生的最小字符串是多少？

可以使用穷举蛮力搜索来解决该问题，有效地创建所有可能替换的树：

```
// this is more or less pseudo code from my head
int GetMinLength(string s)
{
    // solve edge cases
    if (s.Length == 1) return 1;
    if (s.Length == 2) return ReduceIfPossible(s);

    // recursive brute force
    int min = s.Length;
    for (int i = 0; i<s.Length-1; i++)
    {
        if (s[i] != s[i+1])
        {
            var next = GetMinLength(
                  s.Substring(0, i) + 
                  Reduce(s[i], s[i + 1]) +
                  s.Substring(i + 2)
                  );

            if (next < min) min = next;
        }
    }
} 
```

`N`对于较大的( )，这显然会失败`N <= 100`，因此我试图将其分解为较小的子问题，记忆它们并合并结果。

问题是我无法确定具有[“最佳子结构”](http://en.wikipedia.org/wiki/Optimal_substructure)的状态，需要应用动态编程（或者换句话说，“合并”子问题的结果）。最小化字符串的一部分并不能保证最终的字符串确实是最小的解决方案。

在这种情况下，可以合并到最终解决方案的子问题“状态”是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:49:33.257

使这变得棘手的是，您需要将其视为连续的 2 个动态编程问题。

1.  建立一个表格，按您结束的字符，按开始位置，所有可能的结束位置，这些位置是可以简化为该字符的块。
2.  `i`字符串的最后一个字符可以减少到的最小长度。（您在步骤 1 中构建的表可用于递归地将此问题简化为已解决的子问题。）

第二个提供你的答案。如果你已经解决了第一个问题，那就更简单了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-30T21:50:08.850

**剧透警报代码：**

```
public static int findMinReduction(String line){
    //Pseudocode:
    //Count the number of occurences of each letter in the input string.
    //If two of these counts are 0, then return string.length
    //Else if (all counts are even) or (all counts are odd), then return 2
    //Else, then return 1

    int len = line.length();
    String a_reduce = line.replaceAll("c", "").replaceAll("b", "");
    String b_reduce = line.replaceAll("a", "").replaceAll("c", "");
    String c_reduce = line.replaceAll("a", "").replaceAll("b", "");

    int a_occurances = a_reduce.length();
    int b_occurances = b_reduce.length();
    int c_occurances = c_reduce.length();

    if ((a_occurances == b_occurances && a_occurances == 0) || 
       (a_occurances == c_occurances && a_occurances == 0) || 
       (b_occurances == c_occurances && b_occurances == 0)){
        return len;
    }
    else{
        if (a_occurances % 2 == 0 && 
            b_occurances % 2 == 0 && 
            c_occurances % 2 == 0){
            return 2;
        }
        if (a_occurances % 2 != 0 
            && b_occurances % 2 != 0 && 
            c_occurances % 2 != 0){
            return 2;
        }
    }
    return 1;
} 
```

**复杂：**

这是一个 O(n) 时间复杂度操作，随着输入大小的增加，要完成的工作量与输入大小成线性关系。这是闪电般的速度，我们可以处理兆字节大小的字符串，并且仍然可以在几分之一秒内处理它们。

**在这里找到的算法，全面分析了该算法的工作原理：**

[被Java面试难住了，需要一些提示](https://stackoverflow.com/questions/8033553/stumped-on-a-java-interview-need-some-hints)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:09:51.330

您首先创建一个描述解决方案理论的结构。它包括考虑的字符数，到目前为止的编码字符串，以及理论的最坏情况和最佳情况。

一开始只有一个理论——没有处理任何字符。最好的情况是长度为 1 的字符串（例如，规则始终适用，字符串可以缩减为一个字符，最坏的情况是 N，没有规则适用）例如

```
encoded string = "";
encoded index = 0;
worst case = N; 
best case = 1; 
```

现在开始将索引加一，并将一个字符添加到编码的字符串中。如果没有适用的规则，你就保持这个理论不变。如果某个规则确实适用，您必须做出决定——要么应用该规则，要么不应用该规则。因此，当您添加一个角色时，您会复制适用于最后一个角色的每条规则的理论，并为没有应用任何规则保留一个版本。你更新每个理论的最佳情况和最坏情况。

起初，理论的数量会迅速增加。但最终你会遇到这样一种情况，即某些理论的最坏情况优于其他理论的最佳情况。

因此，每当您推进索引时，您都会删除最佳情况比具有最佳最坏情况的理论更差的理论。随着指数接近 N，大多数理论将退出。

# objective-c - 在 C 和 Objective-C 中，将浮点数或双精度数截断为整数的正确方法是什么？

> ID：11244713
> 
> 赞同：9
> 
> 时间：2012-06-28T12:31:52.173
> 
> 标签：objective-c, c, floating-point, floating-accuracy

我以前主要使用整数，在需要将浮点数或双精度数截断为整数的情况下，我会使用以下内容：

```
(int) someValue 
```

除非我发现以下内容：

```
NSLog(@"%i", (int) ((1.2 - 1) * 10));     // prints 1
NSLog(@"%i", (int) ((1.2f - 1) * 10));    // prints 2 
```

（请参阅[在 C# 中将浮点数转换为 int 时的奇怪行为以](https://stackoverflow.com/questions/8911440/strange-behavior-when-casting-a-float-to-int-in-c-sharp)获取解释）。

简短的问题是：我们应该如何正确地将浮点数或双精度数***截断***为整数？（在这种情况下需要截断，而不是“四舍五入”）。或者，我们可以说，由于一个数字是 1.9999999999999，另一个是 2.00000000000001（粗略地说），因此截断实际上是正确完成的。所以问题是，我们应该如何转换浮点数或双精度数，以使结果是一个“截断”的数字，这使得通用意义？

（目的不是使用`round`，因为在这种情况下，对于`1.8`，我们确实想要`1`, 而不是 的结果`2`）

* * *

更长的问题：

我用了

```
int truncateToInteger(double a) {
    return (int) (a + 0.000000000001);
}

-(void) someTest {
    NSLog(@"%i", truncateToInteger((1.2 - 1) * 10));
    NSLog(@"%i", truncateToInteger((1.2f - 1) * 10));
} 
```

并且都打印为`2`，但它似乎太过分了，我们应该使用什么小数字来“消除不准确”？有没有更标准或研究的方法，而不是这样的任意黑客？

（请注意，我们希望在某些用法中截断，而不是四舍五入，例如，如果秒数是 90 或 118，当我们显示经过了多少分钟和多少秒时，分钟应该显示为`1`，但不应该四舍五入到`2`)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T12:44:29.870

当然，截断已正确执行，但中间值不准确。

一般来说，无法知道您的`1.999999`结果是稍微不准确`2`（因此截断后的精确数学结果是`2`），还是稍微不准确`1.999998`（因此截断后的精确数学结果是`1`）。

就此而言，对于某些计算，您可能会得到`2.000001`一个稍微不准确的`1.999998`. 几乎无论你做什么，你都会弄错那个。截断是一个非连续函数，所以无论你怎么做，它都会使你的整体计算在数值上不稳定。

无论如何，您都可以添加任意容差：`(int)(x > 0 ? x + epsilon : x - epsilon)`. 它可能有帮助，也可能没有帮助，这取决于你在做什么，这就是为什么它是一个“黑客”。`epsilon`可以是常数，也可以根据 的大小进行缩放`x`。

您第二个问题的最常见解决方案不是“消除不准确”，而是接受不准确的结果，就好像它是准确的一样。所以，如果你的浮点单元说`(1.2-1)*10`是 1.999999，好吧，它*是*1.999999。如果该值表示分钟数，则将其截断为 1 分 59 秒。您最终显示的结果将与真实值相差 1 秒。如果您需要比这更准确的最终显示结果，那么您不应该使用浮点运算来计算它，或者您应该在截断为分钟之前四舍五入到最接近的秒数。

*任何*从浮点数中“消除”不准确性的尝试实际上只会改变不准确性 - 一些输入会给出更准确的结果，而另一些则不太准确。如果您很幸运能够将不准确性转移到您不关心的输入，或者可以在进行计算之前过滤掉，那么您就赢了。不过，总的来说，如果您必须接受任何输入，那么您将在某个地方迷路。您需要查看如何使您的计算更准确，而不是试图在最后的截断步骤中消除不准确性。

您的示例计算有一个简单的更正 - 使用以 10 为基数的小数点后一位的定点算术。我们知道 format 可以准确地表示 1.2。因此，`(1.2 - 1) * 10`您应该重新缩放计算以使用十分之一（写入`(12 - 10) * 10`）而不是 write ，然后将最终结果除以 10 以将其缩放回单位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T13:58:49.487

As you have modified your question, the problem now seems to be this: Given some inputs x, you calculate a value f'(x). f'(x) is the calculated approximation to an exact mathematical function f(x). You want to calculate trunc(f(x)), that is, the integer i that is farthest from zero without being farther from zero than f(x) is. Because f'(x) has some error, trunc(f'(x)) might not equal trunc(f(x)), such as when f(x) is 2 but f'(x) is 0x1.fffffffffffffp0\. Given f'(x), how can you calculate trunc(f(x))?

This problem is impossible to solve. There is **no** solution that will work for all f.

The reason there is no solution is that, due to the error in f', f'(x) might be 0x1.fffffffffffffp0 because f(x) is 0x1.fffffffffffffp0, or f'(x) might be 0x1.fffffffffffffp0 because of calculation errors even though f(x) is 2\. Therefore, given a particular value of f'(x), it is impossible to know what trunc(f(x)) is.

A solution is possible **only** given detailed information about f (and the actual operations used to approximate it with f'). You have not given that information, so your question cannot be answered.

Here is a hypothesis: Suppose the nature of f(x) is such that its results are always a non-negative multiple of q, for some q that divides 1\. For example, q might be .01 (hundredths of a coordinate value) or 1/60 (represent units of seconds because f is in units of minutes). And suppose the values and operations used in calculating f' are such that the error in f' is always less than q/2.

In this very limited, and hypothetical, case, then trunc(f(x)) can be calculated by calculating trunc(f'(x)+q/2). Proof: Let i = trunc(f(x)). Suppose i > 0\. Then i <= f(x) < i+1, so i <= f(x) <= i+1-q (because f(x) is quantized by q). Then i-q/2 < f'(x) < i+1-q+q/2 (because f'(x) is within q/2 of f(x)). Then i < f'(x)+q/2 < i+1\. Then trunc(f'(x)+q/2) = i, so we have the desired result. In the case where i = 0, then -1 < f(x) < 1, so -1+q <= f(x) <= 1-q, so -1+q-q/2 < f'(x) < 1-q+q/2, so -1+q < f'(x)+q/2 < 1, so trunc(f'(x)+q/2) = 0.

(Note: If q/2 is not exactly representable in the floating-point precision used or cannot be easily added to f'(x) without error, then some adjustments have to be made in either the proof, its conditions, or the addition of q/2.)

If that case does not serve your purpose, then you **cannot** expect an answer expect by providing detailed information about f and the operations and values used to calculate f'.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:03:30.310

我建议一般来说，您永远不要期望您的结果比您的输入具有更高的精度。所以在你的例子中，你的浮点数有一位小数，你不应该把你的结果比这更严重。

那么如何舍入到小数点后一位，然后转换为 int 呢？

```
float a = (1.2f - 1) * 10;
int b;

// multiply by 10 to "round to one decimal place"
a = round( a * 10\. );

// now cast to integer first to avoid further decimal errors
b = (int) a;

// get rid of the factor 10 again by integer division
b = b / 10;

// now 'b' should hold the result you're expecting; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T14:14:01.710

```
NSLog(@"%i", [[NSNumber numberWithFloat:((1.2 - 1) * 10)] intValue]); //2
NSLog(@"%i", [[NSNumber numberWithFloat:(((1.2f - 1) * 10))] intValue]); //2 
NSLog(@"%i", [[NSNumber numberWithFloat:1.8] intValue]); //1
NSLog(@"%i", [[NSNumber numberWithFloat:1.8f] intValue]); //1
NSLog(@"%i", [[NSNumber numberWithDouble:2.0000000000001 ] intValue]);//2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T12:43:28.890

'hack'是正确的方法。浮点数的工作原理很简单，如果您想要更理智的十进制行为，`NSDecimal(Number)`可能就是您想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T13:13:11.303

正确的做法是：识别您执行的每个浮点运算。这包括将十进制数字转换为浮点数（例如源文本中的“1.2”产生浮点值 0x1.3333333333333p0 或“1.2f”产生 0x1.333334p0）。确定每个操作可能产生的错误限制。（对于 IEEE 754 定义的基本运算，例如简单算术，此限制是实际输入的数学精确结果的 1/2 ULP [最低精度单位]。对于从十进制数字到二进制浮点的转换，语言规范可能允许 1 个 ULP，但好的编译器会将其限制为 1/2 ULP。对于提供复杂函数（如正弦或对数）的库例程，商业库通常允许多个 ULP 错误，尽管它们通常在基本间隔内更好。您需要从库供应商处获得规范。）确定最终错误的界限，并使用数学证明。如果你能够证明，对于某个误差界 e，当精确的数学结果是某个整数 i 时，实际计算的结果是在半开区间 [即 i+1-e)，那么你可以产生通过将 e 添加到计算结果并将该计算的结果截断为整数来获得精确的数学结果。（为了简洁，我省略了某些复杂性。一个是添加 e 可能导致四舍五入到 i+1 的问题。另一个是避免误报，即避免在结果不是 i 时产生 i，可能是因为最终错误时实际结果不是我可能会将计算结果放入 [ie, i+1-e).) ) 用数学证明确定最终误差的界限。如果你能够证明，对于某个误差界 e，当精确的数学结果是某个整数 i 时，实际计算的结果是在半开区间 [即 i+1-e)，那么你可以产生通过将 e 添加到计算结果并将该计算的结果截断为整数来获得精确的数学结果。（为简洁起见，我省略了某些复杂性。一个是添加 e 可能导致舍入到 i+1 的问题。另一个是避免误报，即避免在结果不是 i 时产生 i，可能是因为最终错误时实际结果不是我可能会将计算结果放入 [ie, i+1-e).) ) 用数学证明确定最终误差的界限。如果你能够证明，对于某个误差界 e，当精确的数学结果是某个整数 i 时，实际计算的结果是在半开区间 [即 i+1-e)，那么你可以产生通过将 e 添加到计算结果并将该计算的结果截断为整数来获得精确的数学结果。（为了简洁，我省略了某些复杂性。一个是添加 e 可能导致四舍五入到 i+1 的问题。另一个是避免误报，即避免在结果不是 i 时产生 i，可能是因为最终错误时实际结果不是我可能会将计算结果放入 [ie, i+1-e).) 当精确的数学结果是某个整数i时，实际计算的结果在半开区间[即i+1-e)，那么你可以通过在计算结果上加上e并截断结果来产生精确的数学结果该计算的整数。（为简洁起见，我省略了某些复杂性。一个是添加 e 可能导致舍入到 i+1 的问题。另一个是避免误报，即避免在结果不是 i 时产生 i，可能是因为最终错误时实际结果不是我可能会将计算结果放入 [ie, i+1-e).) 当精确的数学结果是某个整数i时，实际计算的结果在半开区间[即i+1-e)，那么你可以通过在计算结果上加上e并截断结果来产生精确的数学结果该计算的整数。（为简洁起见，我省略了某些复杂性。一个是添加 e 可能导致舍入到 i+1 的问题。另一个是避免误报，即避免在结果不是 i 时产生 i，可能是因为最终错误时实际结果不是我可能会将计算结果放入 [ie, i+1-e).)

如您所见，“正确”的方式通常非常困难。对于复杂的代码，证明仅在有限的高价值环境中产生，例如设计高质量的库例程来计算标准数学库函数（正弦、对数等）。

对于简单的代码，证明可能很简单。如果你**知道**答案应该是一个整数，并且你**知道**你没有做太多的浮点运算以致误差**不可能**像 0.5 一样大，那么产生正确答案的正确方法就是简单地添加 .5。 5 并截断。这并没有错，因为它可以证明是正确的。（实际上，这不仅仅是您执行的操作的数量，而是它们的性质。减去具有相似幅度的值会产生相对误差很大的误差。将这样的结果乘以很大的幅度可能会产生很大的绝对值错误。）

如果您不知道数学上正确的答案恰好是一个整数，那么截断是错误的。如果您不知道计算误差的界限，那么在截断之前添加任何更正都是错误的。这个问题没有一般的答案；**你必须了解你的计算**。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T12:37:26.937

您必须计算出您期望的错误，然后为您的截断添加它是安全的。比如你说1.8应该映射到1，那么1.9呢？1.99呢？如果您知道在您的问题域中不能得到大于 1.8 的任何值，那么添加 0.001 以使截断起作用是安全的。

# sql-server-2008 - SQL Server 2008 中简单选择语句的巨大内存占用

> ID：11244718
> 
> 赞同：0
> 
> 时间：2012-06-28T12:32:10.900
> 
> 标签：sql-server-2008, memory

我有一个定义如下的表：

```
CREATE TABLE [dbo].[T](
[FileID] [bigint] NOT NULL,
[Line] [nvarchar](250) NULL
) ON [PRIMARY] 
```

FileID 是外键，表有 > 7,000,000 条记录

在这个表上执行 select count(1) 会导致 1.5GB+ 的内存峰值。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:37:36.880

如果您在计数时不需要阻止所有用户，并且可以接受由于当前发生的事务而产生的微小差异，那么这会好得多：

```
SELECT SUM([rows]) FROM sys.partitions
  WHERE [object_id] = OBJECT_ID('dbo.T')
  AND index_id IN (0,1); 
```

否则 Marc 是对的 - 在列上放置一个索引`FileID`，SQL Server 将选择扫描该索引而不是扫描整个表。

这张表上真的没有索引吗？有一些没有聚集索引有意义的用例，但我不怀疑这是其中之一。虽然创建外键可以帮助优化器，但它不会创建索引（尽管这是一个常见的误解）。

# mysql - 简单插入语句中where子句附近的mysql错误

> ID：11244720
> 
> 赞同：0
> 
> 时间：2012-06-28T12:32:20.293
> 
> 标签：mysql

```
INSERT INTO orders_total SET `title`='Discount Coupon:', `text` = '-$40.00', `value` = '40.00' WHERE `orders_id` = '15474' AND `class`='ot_coupon 
```

它给出了以下mysql错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE `orders_id` = '15474' AND `class`='ot_coupon'' at line 1 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:33:52.990

`INSERT`语句旨在插入新行，现在更新现有行，`WHERE`因此子句在`INSERT`. 你打算`UPDATE`。

```
UPDATE orders_total
SET 
  `title`='Discount Coupon:', 
  `text` = '-$40.00', 
  `value` = '40.00'
WHERE 
  `orders_id` = '15474' 
  AND `class`='ot_coupon' 
```

### 评论后编辑：

如果这是为了插入而不是更新，则它不能依赖于`orders_id = 15474`. 如果要插入新行，则还需要插入这些值。

```
INSERT INTO orders_total (`orders_id`, `class`, `title`, `text`, `value`) VALUES (15474, 'ot_coupon', 'Discount Coupon:', '-$40.00', '40.00'); 
```

# apache-flex - flex中的推送通知

> ID：11244724
> 
> 赞同：-1
> 
> 时间：2012-06-28T12:32:28.450
> 
> 标签：apache-flex, air, flex4, flash-builder, flex4.5

伙计，我正在使用 flex 使用 flash builder 构建移动应用程序，因此在阅读有关推送通知时，我已停止使用 [此链接](HTTP://www.adobe.com/devnet/air/native-extensions-for-air/extensions/notification.html) 最近 Google 已弃用 Android Cloud to Device Messaging (C2DM)，C2DM 将不接受任何新用户。强烈鼓励 C2DM 开发人员迁移到 Google Cloud Messaging (GCM)。GCM 是下一代 C2DM。

最后如何使用**AIR 原生扩展通过 GCM 推送通知**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T02:51:42.897

您指向的本机扩展不适用于推送通知。查看示例项目的代码，推送通知所需的步骤不存在。我相信这是为了从您的应用程序中触发设备上的通知行为。

设备必须注册来自其父/本机平台服务的通知（Android 上的 GCM/C2DM 和 Apple 上的 ANP），然后设置处理传入通知的方法。

您正在/正在寻找的本机扩展是： [Piotr Walczyszyn's As3C2DM ANE for Android](http://www.riaspace.com/2011/09/as3c2dm-air-native-extension-to-push-notifications-with-c2dm/) 和 [Piotr Koscierzynski's APNs ANE for iThings](http://flashsimulations.com/2011/12/16/apple-push-notification-service-native-extension-for-adobe-air/)

第一个不再对您有任何好处，因为正如您所提到的，您无法再注册应用程序以使用 C2DM。

没有尝试使用第二个，因为我还没有 Apple 许可证，但根据我读过的评论，他似乎将这个 ANE 作为演示发布，它并不是真正供人们使用的。出于商业原因或其他原因，他不想发布该版本。

在搜索时，您可能会发现[此 Adob​​e 论坛帖子的 APNs ANE](http://forums.adobe.com/thread/940310)，但他不会再共享该扩展程序。所以不用问他了。

我可以向您指出的最后一个资源是：
如果您想使用 Piotr Koscierzynski 的 APNs 扩展， [您可能需要在 PC 上构建此帮助](http://www.riaxe.com/blog/uncategorized/apn-using-flex-mobile-in-windows-native-extensions/)。

这是一套非常不错 [的扩展套件，只需 100 美元](http://labs.distriqt.com/native-extensions)（请注意，它支持*C2DM*，而不是 GCM，截至 2012 年 7 月 4 日）

这*只是*一个[25 美元的 APNs 扩展](http://codecanyon.net/item/advance-ios-apns/168673)

所以，这就是我知道/记得我可以分享的一切。如果我发现任何其他值得一提的选项，我会尝试更新它。我已经构建了超过 60% 的应用程序，但我现在基本上必须重新开始，所以... =/

我会自己写，但我不懂 Java 或 Objective-C
=b

祝所有阅读这篇文章的人好运，因为他们在同一条船上。
=)
托德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:37:39.633

distriqt 已升级其 ANE 以支持 GCM： [http ://labs.distriqt.com/native-extensions#pushnotifications](http://labs.distriqt.com/native-extensions#pushnotifications)

完成列表： [https ://github.com/freshplanet/ANE-Push-Notification](https://github.com/freshplanet/ANE-Push-Notification)

# android-c2dm - C2DM - 云到设备消息传递

> ID：11244727
> 
> 赞同：0
> 
> 时间：2012-06-28T12:32:52.640
> 
> 标签：android-c2dm

C2DM - 云到设备消息传递：我可以在没有服务器的情况下将它用于“设备到设备”通信吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:16:21.073

不，您基本上需要一台服务器。此外，从昨天开始，C2DM 已被 GCM 取代。 [在此处阅读](http://developer.android.com/guide/google/gcm/gcm.html)有关 GCM 架构的更多信息，这可能有助于您了解它的工作原理以及应用程序服务器为何不可或缺。

# php - AJAX 表单提交到 MySQL 数据库

> ID：11244729
> 
> 赞同：1
> 
> 时间：2012-06-28T12:33:04.513
> 
> 标签：php, jquery, form-submit

我想知道是否有人可以帮助我。

首先，我向经验丰富的开发人员道歉，他们可能觉得这是一个非常基本的问题，但这是我的第一次尝试，所以请多多包涵。

一段时间以来，我一直试图找到一个 AJAX 表单的示例，该表单在提交表单时包含成功和失败消息。

我找到了[这篇](http://www.elated.com/articles/slick-ajax-contact-form-jquery-php/)文章，我现在正在尝试对其进行调整，以便将数据保存到 mySQL 数据库中，但是我在让它工作时遇到了一些困难。

本教程基本上有两个文件，一个是 HTML 表单，另一个是 PHP 脚本。

尽管我没有从显示的示例中更改 HTML，但我已在下面发布了此内容：

```
<!doctype html>
<html lang="en">
<head>

<title>A Slick Ajax Contact Form with jQuery and PHP</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">

<style type="text/css">

/* Add some margin to the page and set a default font and colour */

body {
  margin: 30px;
  font-family: "Georgia", serif;
  line-height: 1.8em;
  color: #333;
}

/* Set the content dimensions */

#content {
  width: 800px;
  padding: 50px;
  margin: 0 auto;
  display: block;
  font-size: 1.2em;
}

#content h2 {
  line-height: 1.5em;
}

/* Add curved borders to various elements */

#contactForm, .statusMessage, input[type="submit"], input[type="button"] {
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;  
  border-radius: 10px;
}

/* Style for the contact form and status messages */

#contactForm, .statusMessage {
  color: #666;
  background-color: #ebedf2;
  background: -webkit-gradient( linear, left bottom, left top, color-stop(0,#dfe1e5), color-stop(1, #ebedf2) );
  background: -moz-linear-gradient( center bottom, #dfe1e5 0%, #ebedf2 100% );  
  border: 1px solid #aaa;
  -moz-box-shadow: 0 0 1em rgba(0, 0, 0, .5);
  -webkit-box-shadow: 0 0 1em rgba(0, 0, 0, .5);
  box-shadow: 0 0 1em rgba(0, 0, 0, .5);
  opacity: .95;
}

/* The form dimensions */

#contactForm {
  width: 40em;
  height: 33em;
  padding: 0 1.5em 1.5em 1.5em;
  margin: 0 auto;
}

/* Position the form in the middle of the window (if JavaScript is enabled) */

#contactForm.positioned {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  margin-top: auto;
  margin-bottom: auto;
}

/* Dimensions and position of the status messages */

.statusMessage {
  display: none;
  margin: auto;
  width: 30em;
  height: 2em;
  padding: 1.5em;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}

.statusMessage p {
  text-align: center;
  margin: 0;
  padding: 0;
}

/* The header at the top of the form */

#contactForm h2 {
  font-size: 2em;
  font-style: italic;
  letter-spacing: .05em;
  margin: 0 0 1em -.75em;
  padding: 1em;
  width: 19.5em;  
  color: #aeb6aa;
  background: #dfe0e5 url('images/stamp.jpg') no-repeat 15em -3em; /* http://morguefile.com/archive/display/606433 */
  border-bottom: 1px solid #aaa;
  -moz-border-radius: 10px 10px 0 0;
  -webkit-border-radius: 10px 10px 0 0;  
  border-radius: 10px 10px 0 0;
}

/* Give form elements consistent margin, padding and line height */

#contactForm ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

#contactForm ul li {
  margin: .9em 0 0 0;
  padding: 0;
}

#contactForm input, #contactForm label {
  line-height: 1em;
}

/* The field labels */

label {
  display: block;
  float: left;
  clear: left;
  text-align: right;
  width: 28%;
  padding: .4em 0 0 0;
  margin: .15em .5em 0 0;
  font-weight: bold;
}

/* The fields */

input, textarea {
  display: block;
  margin: 0;
  padding: .4em;
  width: 67%;
  font-family: "Georgia", serif;
  font-size: 1em;
  border: 1px solid #aaa;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;    
  border-radius: 5px;
  -moz-box-shadow: rgba(0,0,0,.2) 0 1px 4px inset;
  -webkit-box-shadow: rgba(0,0,0,.2) 0 1px 4px inset;
  box-shadow: rgba(0,0,0,.2) 0 1px 4px inset;
  background: #fff;
}

textarea {
  height: 13em;
  line-height: 1.5em;
  resize: none;
}

/* Place a border around focused fields, and hide the inner shadow */

#contactForm *:focus {
  border: 1px solid #66f;
  outline: none;
  box-shadow: none;
  -moz-box-shadow: none;
  -webkit-box-shadow: none;
}

/* Display correctly filled-in fields with a green background */

input:valid, textarea:valid {
  background: #dfd;
}

/* The Send and Cancel buttons */

input[type="submit"], input[type="button"] {
  float: right;
  margin: 2em 1em 0 1em;
  width: 10em;
  padding: .5em;
  border: 1px solid #666;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;  
  border-radius: 10px;
  -moz-box-shadow: 0 0 .5em rgba(0, 0, 0, .8);
  -webkit-box-shadow: 0 0 .5em rgba(0, 0, 0, .8);
  box-shadow: 0 0 .5em rgba(0, 0, 0, .8);
  color: #fff;
  background: #0a0;
  font-size: 1em;
  line-height: 1em;
  font-weight: bold;
  opacity: .7;
  -webkit-appearance: none;
  -moz-transition: opacity .5s;
  -webkit-transition: opacity .5s;
  -o-transition: opacity .5s;
  transition: opacity .5s;
}

input[type="submit"]:hover,
input[type="submit"]:active,
input[type="button"]:hover,
input[type="button"]:active {
  cursor: pointer;
  opacity: 1;
}

input[type="submit"]:active, input[type="button"]:active {
  color: #333;
  background: #eee;
  -moz-box-shadow: 0 0 .5em rgba(0, 0, 0, .8) inset;
  -webkit-box-shadow: 0 0 .5em rgba(0, 0, 0, .8) inset;
  box-shadow: 0 0 .5em rgba(0, 0, 0, .8) inset;
}

input[type="button"] {
  background: #f33;
}

/* Header/footer boxes */

.wideBox {
  clear: both;
  text-align: center;
  margin: 70px;
  padding: 10px;
  background: #ebedf2;
  border: 1px solid #333;
}

.wideBox h1 {
  font-weight: bold;
  margin: 20px;
  color: #666;
  font-size: 1.5em;
}

</style>

<!-- Some IE7 hacks and workarounds -->

<!--[if lt IE 8]>
<style>

/* IE7 needs the fields to be floated as well as the labels */

input, textarea {
  float: right;
}

#formButtons {
  clear: both;
}

/*
  IE7 needs an ickier approach to vertical/horizontal centring with fixed positioning.
  The negative margins are half the element's width/height.
*/

#contactForm.positioned, .statusMessage {
  left: 50%;
  top: 50%;
}

#contactForm.positioned {
  margin-left: -20em;
  margin-top: -16.5em;
}

.statusMessage {
  margin-left: -15em;
  margin-top: -1em;
}

</style>
<![endif]-->

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script type="text/javascript">

var messageDelay = 2000;  // How long to display status messages (in milliseconds)

// Init the form once the document is ready
$( init );

// Initialize the form

function init() {

  // Hide the form initially.
  // Make submitForm() the form's submit handler.
  // Position the form so it sits in the centre of the browser window.
  $('#contactForm').hide().submit( submitForm ).addClass( 'positioned' );

  // When the "Send us an email" link is clicked:
  // 1\. Fade the content out
  // 2\. Display the form
  // 3\. Move focus to the first field
  // 4\. Prevent the link being followed

  $('a[href="#contactForm"]').click( function() {
    $('#content').fadeTo( 'slow', .2 );
    $('#contactForm').fadeIn( 'slow', function() {
      $('#senderName').focus();
    } )

    return false;
  } );

  // When the "Cancel" button is clicked, close the form
  $('#cancel').click( function() { 
    $('#contactForm').fadeOut();
    $('#content').fadeTo( 'slow', 1 );
  } );  

  // When the "Escape" key is pressed, close the form
  $('#contactForm').keydown( function( event ) {
    if ( event.which == 27 ) {
      $('#contactForm').fadeOut();
      $('#content').fadeTo( 'slow', 1 );
    }
  } );

}

// Submit the form via Ajax

function submitForm() {
  var contactForm = $(this);

  // Are all the fields filled in?

  if ( !$('#senderName').val() || !$('#senderEmail').val() || !$('#message').val() ) {

    // No; display a warning message and return to the form
    $('#incompleteMessage').fadeIn().delay(messageDelay).fadeOut();
    contactForm.fadeOut().delay(messageDelay).fadeIn();

  } else {

    // Yes; submit the form to the PHP script via Ajax

    $('#sendingMessage').fadeIn();
    contactForm.fadeOut();

    $.ajax( {
      url: contactForm.attr( 'action' ) + "?ajax=true",
      type: contactForm.attr( 'method' ),
      data: contactForm.serialize(),
      success: submitFinished
    } );
  }

  // Prevent the default form submission occurring
  return false;
}

// Handle the Ajax response

function submitFinished( response ) {
  response = $.trim( response );
  $('#sendingMessage').fadeOut();

  if ( response == "success" ) {

    // Form submitted successfully:
    // 1\. Display the success message
    // 2\. Clear the form fields
    // 3\. Fade the content back in

    $('#successMessage').fadeIn().delay(messageDelay).fadeOut();
    $('#senderName').val( "" );
    $('#senderEmail').val( "" );
    $('#message').val( "" );

    $('#content').delay(messageDelay+500).fadeTo( 'slow', 1 );

  } else {

    // Form submission failed: Display the failure message,
    // then redisplay the form
    $('#failureMessage').fadeIn().delay(messageDelay).fadeOut();
    $('#contactForm').delay(messageDelay+500).fadeIn();
  }
}

</script>

</head>
<body>

<div class="wideBox">
  <h1>A Slick Ajax Contact Form with jQuery and PHP</h1>
  <h2>Click one of the "Send us an email" links...</h2>
</div>

<div id="content">

  <p style="padding-bottom: 50px; font-weight: bold; text-align: center;"><a href="#contactForm">~ Send us an email ~</a></p>

  <h1>Aircraft and Submarines</h1>
  <h2>The Story of the Invention, Development, and Present-Day Uses of War's Newest Weapons</h2>
  <h3>By Willis J. Abbot</h3>
  <h4>Preface</h4>

  <img class="inline" style="width: 300px; height: 373px; float: left; margin-right: 20px;" src="images/fighting-by-sea-and-sky.jpg" alt="Fighting by Sea and Sky" />

  <p>Not since gunpowder was first employed in warfare has so
  revolutionary a contribution to the science of slaughtering men been
  made as by the perfection of aircraft and submarines. The former
  have had their first employment in this world-wide war of the
  nations. The latter, though in the experimental stage as far back as
  the American Revolution, have in this bitter contest been for the
  first time brought to so practical a stage of development as to
  exert a really appreciable influence on the outcome of the struggle.</p>

  <p>Comparatively few people appreciate how the thought of navigating
  the air's dizziest heights and the sea's gloomiest depths has
  obsessed the minds of inventors. From the earliest days of history
  men have grappled with the problem, yet it is only within two
  hundred years for aircraft and one hundred for submarines that any
  really intelligent start has been made upon its solution. The men
  who really gave practical effect to the vague theories which others
  set up&mdash;in aircraft the Wrights, Santos-Dumont, and Count Zeppelin;
  in submarines Lake and Holland&mdash;are either still living, or have
  died so recently that their memory is still fresh in the minds of
  all.</p>

  <p style="padding-top: 50px; font-weight: bold; text-align: center;"><a href="#contactForm">~ Send us an email ~</a></p>

</div>

<form id="contactForm" action="processForm.php" method="post">

  <h2>Send us an email...</h2>

  <ul>

    <li>
      <label for="senderName">Your Name</label>
      <input type="text" name="senderName" id="senderName" placeholder="Please type your name" required="required" maxlength="40" />
    </li>

    <li>
      <label for="senderEmail">Your Email Address</label>
      <input type="email" name="senderEmail" id="senderEmail" placeholder="Please type your email address" required="required" maxlength="50" />
    </li>

    <li>
      <label for="message" style="padding-top: .5em;">Your Message</label>
      <textarea name="message" id="message" placeholder="Please type your message" required="required" cols="80" rows="10" maxlength="10000"></textarea>
    </li>

  </ul>

  <div id="formButtons">
    <input type="submit" id="sendMessage" name="sendMessage" value="Send Email" />
    <input type="button" id="cancel" name="cancel" value="Cancel" />
  </div>

</form>

<div id="sendingMessage" class="statusMessage"><p>Sending your message. Please wait...</p></div>
<div id="successMessage" class="statusMessage"><p>Thanks for sending your message! We'll get back to you shortly.</p></div>
<div id="failureMessage" class="statusMessage"><p>There was a problem sending your message. Please try again.</p></div>
<div id="incompleteMessage" class="statusMessage"><p>Please complete all the fields in the form before sending.</p></div>

<div class="wideBox">
  <p>&copy; Elated.com | <a href="http://www.elated.com/articles/slick-ajax-contact-form-jquery-php/">Back to Tutorial</a></p>
  <p style="font-size: .8em; line-height: 1.5em;"><a rel="license" href="http://creativecommons.org/licenses/by/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png" /></a><br />This <span xmlns:dc="http://purl.org/dc/elements/1.1/" href="http://purl.org/dc/dcmitype/Text" rel="dc:type">work</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.elated.com/" property="cc:attributionName" rel="cc:attributionURL">http://www.elated.com/</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.</p>
</div>

</body>
</html> 
```

但我已将 PHP 脚本更改为以下内容：

```
<?php

    include("admin/link.php");
    include("admin/opendb.php");

$senderName = isset( $_POST['senderName'] );
$senderEmail = isset( $_POST['senderEmail'] );
$message = isset( $_POST['message'] );

// If all values exist, send the email
if ( $senderName && $senderEmail && $message ) {
$query = "INSERT INTO `contact` (senderName, senderEmail, message) VALUES ('$senderName', '$senderEmail', '$message')";  
$result = mysql_query($query);  //query executes  
}

// Return an appropriate response to the browser
if ( isset($_GET["ajax"]) ) {
  echo $success ? "success" : "error";
} else {
?>
<html>
  <head>
    <title>Thanks!</title>
  </head>
  <body>
  <?php if ( $success ) echo "<p>Thanks for sending your message! We'll get back to you shortly.</p>" ?>
  <?php if ( !$success ) echo "<p>There was a problem sending your message. Please try again.</p>" ?>
  <p>Click your browser's Back button to return to the page.</p>
  </body>
</html>
<?php
} 
```

我遇到的问题有两个：

*   当我单击“发送邮件”按钮时，我会暂时收到`sending`消息，然后才被告知有问题。因此，不会按照示例清除表单字段，并且表单保持在视图中而不是淡出。

*   我遇到的第二个问题是，虽然我可以将数据发布到我的数据库，而不是保存我输入的实际文本，但每个字段都显示 value `1`。

正如我在开始时所说，我对 Ajax 和 jQuery 很陌生，但我只是想知道是否有人可以看看这个并让我知道我哪里出错了。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:21:20.303

我不擅长阅读其他人的代码，所以我创建了一个同样使用 form.serialize() 的示例。

```
<form id="form1" method="post" action="submit.php">
    <input type="text" name="boom" value="yoh"/>
    <input type="text" name="zoom" value="zoh"/>
    <input type="submit"/>
</form>
    <script>
    $('#form1').submit(function(e){
    e.preventDefault();
    $.post('submit.php', $('#form1').serialize(), function(data){console.log(data);});
    });
    </script> 
```

如果您也不擅长阅读其他人的代码，那么您的脚本中可能存在以下问题： 首先，我没有看到任何尝试提交表单的代码，它应该看起来像这样：

```
$('#form1').submit(function(e){ //form1 is the id that you gave to your form
e.preventDefault(); //this prevents page refresh
}); 
```

其次，尝试在您的 html 代码下方包含您的 javascript 代码，以确保在整个页面加载之前没有执行任何 javascript 代码，这样做还有一个性能优势：

```
<form>...</form>
<script>
</script> 
```

# ios - 什么最适合填充核心数据数据库？

> ID：11244731
> 
> 赞同：0
> 
> 时间：2012-06-28T12:33:11.540
> 
> 标签：ios, database, core-data

我正在玩弄想法，并想创建一个具有大型数据库的应用程序。我知道最有效的方法是将数据加载到核心数据中，然后从那里获取我需要的任何内容。

但是我以前没有在应用程序中使用过数据库 - 填充该核心数据数据库的最有效方法是什么？

大部分数据将存储在手机上——xml、plist 还是其他？还有一些在服务器上？

什么最适合从应用程序内部和外部准备填充核心数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:38:03.850

听起来您会从查看一些教程中受益，并且当您有特定问题时发布它们。这是一个[关于 iOS 5 教程的 Core Data 教程：入门](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)Apple 也有关于 Core Data vs sqlite vs plist 的优秀文档 + WWDC 视频。

# com - vs 2005 错误 LNK2001：未解析的外部符号 (2)

> ID：11244734
> 
> 赞同：0
> 
> 时间：2012-06-28T12:33:23.277
> 
> 标签：com, visual-c++, lnk2001

"public: virtual long __stdcall PCI1761Event::GetTypeInfoCount(unsigned int *)" (?GetTypeInfoCount@PCI1761Event@@UAGJPAI@Z)

**代码**

类 PCI1761Event：
公共 CComObjectRoot，
公共 _IAdvDIOEvents
{

公共：
BEGIN_COM_MAP（PCI1761Event）
COM_INTERFACE_ENTRY（_IAdvDIOEvents）END_COM_MAP
（）

```
PCI1761Event(void);<br>

HRESULT  OnDiInterrupt (
    long channel,
    VARIANT * data,
    long scanStart,
    long scanCount );<br>

HRESULT OnDiStatusChange (
    long port,
    VARIANT * data,
    long scanStart,
    long scanCount );<br>

HRESULT OnDiPatternMatch (
    long port,
    VARIANT * data,
    long scanStart,
    long scanCount );<br>

HRESULT OnDeviceRemoved (
    long DeviceNumber );
  HRESULT STDMETHODCALLTYPE GetTypeInfoCount( 
        /* [out] */ UINT *pctinfo) ;<br>

     HRESULT STDMETHODCALLTYPE GetTypeInfo( 
        /* [in] */ UINT iTInfo,
        /* [in] */ LCID lcid,
        /* [out] */ ITypeInfo **ppTInfo) ;

    HRESULT STDMETHODCALLTYPE GetIDsOfNames( 
        /* [in] */ REFIID riid,
        /* [size_is][in] */ LPOLESTR *rgszNames,
        /* [in] */ UINT cNames,
        /* [in] */ LCID lcid,
        /* [size_is][out] */ DISPID *rgDispId) ;

    /* [local] */ HRESULT STDMETHODCALLTYPE Invoke( 
        /* [in] */ DISPID dispIdMember,
        /* [in] */ REFIID riid,
        /* [in] */ LCID lcid,
        /* [in] */ WORD wFlags,
        /* [out][in] */ DISPPARAMS *pDispParams,
        /* [out] */ VARIANT *pVarResult,
        /* [out] */ EXCEPINFO *pExcepInfo,
        /* [out] */ UINT *puArgErr) ; 
```

公共：~PCI1761事件（无效）；};

为什么？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:12:04.150

因为`_IAdvDIOEvents`您尝试实现的接口是派生自的`IDispatch`，因此您也必须在类上实现`IDispatch`方法。在 ATL 中，您通常从类继承您的类，`IDispatchImpl<_IAdvDIOEvents, ...>`以便为您实现方法。

# c# - 查找word文档中的数据

> ID：11244735
> 
> 赞同：0
> 
> 时间：2012-06-28T12:33:25.363
> 
> 标签：c#, asp.net

在我正在做的项目中，我必须查找我的 word 文档是否包含任何图像或表格。有没有办法使用 c# 代码来做到这一点。我找不到任何与此相关的代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:51:10.423

试试下面的代码.....

```
Use Microsoft.Office.Interop 
```

此代码在 asp.net 和 winforms 中工作，但我在 Windows XP Pro 上测试它，我不知道它在 Windows Server 上工作

```
using System;
using System.Drawing;
using System.IO;
using System.Threading;
using Microsoft.Office.Interop.Word;
using Microsoft.VisualBasic.Devices;
using Page=System.Web.UI.Page;

public partial class DefaultPage : Page {
    private Application m_word;
    private int m_i;

    protected void Page_Load(object sender, EventArgs e) {
        object missing = Type.Missing;
        object fileName = "C:\\Test.docx";
        m_word = new Application();
        m_word.Documents.Open(ref fileName,
                              ref missing, ref missing, ref missing, ref missing, ref missing,
                              ref missing, ref missing, ref missing, ref missing, ref missing,
                              ref missing, ref missing, ref missing, ref missing, ref missing);

        try {
            for (int i = 0; i < m_word.ActiveDocument.InlineShapes.Count; i++) {
                m_i = i;
                Thread thread = new Thread(CopyFromClipboardInlineShape);
                thread.SetApartmentState(ApartmentState.STA);
                thread.Start();
                thread.Join();
            }
            for (int i = 0; i < m_word.ActiveDocument.Shapes.Count; i++) {
                m_i = i;
                Thread thread = new Thread(CopyFromClipboardShape);
                thread.SetApartmentState(ApartmentState.STA);
                thread.Start();
                thread.Join();
            }
        }
        finally {
            object save = false;
            m_word.Quit(ref save, ref missing, ref missing);
            m_word = null;
        }
    }

    protected void CopyFromClipboardInlineShape() {
        InlineShape inlineShape = m_word.ActiveDocument.InlineShapes[m_i];
        inlineShape.Select();
        m_word.Selection.Copy();
        Computer computer = new Computer();
        Image img = computer.Clipboard.GetImage();
        /*...*/
    }

    protected void CopyFromClipboardShape() {
        object missing = Type.Missing;
        object i = m_i + 1;
        Shape shape = m_word.ActiveDocument.Shapes.get_Item(ref i);
        shape.Select(ref missing);
        m_word.Selection.Copy();
        Computer computer = new Computer();
        Image img = computer.Clipboard.GetImage();
        /*...*/
    }
} 
```

# c++ - 重载输出运算符时出现错误 c2440 错误

> ID：11244737
> 
> 赞同：0
> 
> 时间：2012-06-28T12:33:31.503
> 
> 标签：c++

我正在编译以下代码并收到以下错误。如何解决这个问题？谢谢你的帮助。

> 错误 C2079：'issline' 使用未定义的类 'std::basic_istringstream<_Elem,_Traits,_Alloc>' 1> 和 1>
> [ 1> _Elem=char, 1>
> _Traits=std::char_traits, 1> _Alloc=std::分配器 1> ] 1>d:\technical\c++study\readparsing\readparsing\main.cpp(49) : 错误 C2440: 'initializing' : 无法从 'std::string' 转换为 'int' 1> 否可以执行此转换的用户定义的转换运算符可用，或者无法调用该运算符 1>d:\technical\c++study\readparsing\readparsing\main.cpp(51) : error C2678: binary '>>' : 未找到采用“int”类型的左操作数的运算符（或没有可接受的转换） 1>
> d:\technical\c++study\readparsing\readparsing\timestamp.h(31): could be 'std::istream &operator >>(std::istream &,TimeStamp &)' 1>
> 同时尝试匹配参数列表'（int，时间戳）'

我在 TimeStamp.h 中有以下代码

```
#ifndef __TIMESTAMP_
#define __TIMESTAMP_

#include <iostream>

struct DateTime
{
    unsigned int dwLowDateTime;
    unsigned int  dwHighDateTime;
};

class TimeStamp 
{
public:
    TimeStamp()
    {
        m_time.dwHighDateTime = 0;
        m_time.dwLowDateTime = 0;
    }

    TimeStamp& operator = (unsigned __int64 other)
    {
        *( unsigned __int64*)&m_time = other;
        return *this;
    }
private:
    DateTime        m_time;
};

std::istream& operator >> (std::istream& input, TimeStamp& timeStamp);

#endif 
```

在 main.cpp 我有以下

```
#include <iostream>
#include <algorithm>
#include <string>
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

#include "TimeStamp.h"

std::istream& operator >> (std::istream& input, TimeStamp& timeStamp)
{
    // 1.
    // use regular stream operator parsing technique to parse individual integer x values (separated in the form "xxxx-xx-xx xx:xx:xx.xxx")
    // for year, month, day, hour, minute, seconds, mseconds
    unsigned int year;
    unsigned int month;
    unsigned int day;
    unsigned int hour;
    unsigned int minute;
    unsigned int seconds;
    unsigned int milliSeconds;
    char dash;
    char colon;

    input >> year >> dash >> month >> dash >> day >> hour >> colon >> minute >> colon >> seconds >> colon >> milliSeconds;

    cout << "Time stamp opeator is called " << std::endl;

    // 2.
    // code to be written.

    return input;
}

int main () {

    std::string dateTime = "2012-06-25 12:00:10.000";

    TimeStamp myTimeStamp;

    std::istringstream issline(dateTime);

    issline >> myTimeStamp;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:39:03.673

我认为你需要`#include <sstream>`使用`istringstream`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:46:16.937

你需要

```
#include <sstream> 
```

在 main.cpp 中。错误消息说您正在使用已（转发）声明但未定义的类。通常这意味着你缺少一个包含。

请注意，`#include <iosfwd>`在 TimeStamp.h 中就足够了，而不是`#include <iostream>`

# php - 使用 php 生成横向 MS Word 文档

> ID：11244744
> 
> 赞同：2
> 
> 时间：2012-06-28T12:33:51.343
> 
> 标签：php, file, ms-word

以下代码生成纵向格式的 MS Word 文档。但我需要它处于横向模式，因为我要插入一些表格、图表和类似的多媒体内容。

```
<?php 
$fp = fopen("tx1.doc", 'w+');
$str="here goes some of my content";
$str.="- -I insert tables, charts and all the stuff  with alignment--";
fwrite($fp, $str);
fclose($fp);
?> 
```

所以我想知道如何强制 php 以横向格式生成文档（横向适合我的演示文稿）。

**编辑：**正如@Mark Ba​​ker 所建议的，我在一个地方找到了满足我所有要求的解决方案/shot [github.com/PHPOffice/PHPWord](http://github.com/PHPOffice/PHPWord)谢谢。现在我可以用 Doc 做任何事情；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:02:23.950

你可以试试这个来生成 rtf 文档。

[http://www.phpclasses.org/package/1805-PHP-Create-RTF-documents-from-HTML.html](http://www.phpclasses.org/package/1805-PHP-Create-RTF-documents-from-HTML.html)

# java - 在 ICS 源代码中寻找 DiskLruCache 实现

> ID：11244746
> 
> 赞同：6
> 
> 时间：2012-06-28T12:33:57.500
> 
> 标签：java, android, mobile, android-source

我正在寻找 ICS 源 (libcore/luni/src/main/java/libcore/io/DiskLruCache.java) 中的 DiskLruCache 实现，如[Caching](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html) Bitmaps android developer guide 中所指定。我试图下载整个[android 源代码](http://source.android.com/source/initializing.html)，但它花费了太多时间（> 5hr 仍在继续），

我还尝试使用[JakeWharton 的 DiskLruCache 实现](https://github.com/JakeWharton/DiskLruCache)，但我不确定它在 ICS 源代码中的实现是否足够强大。

请为此建议我一个替代下载链接。或者给出你自己的想法..

谢谢..

# bash - Bash/Awk 脚本：换行问题

> ID：11244748
> 
> 赞同：1
> 
> 时间：2012-06-28T12:34:01.640
> 
> 标签：bash, awk, newline

我必须在文本文件上添加一列（在 Windows 上使用 Notepad++ 进行编辑），添加一个增量计数器。

我在 Ubuntu 上编写了我的 bash-awk 脚本，并在从 Windows 导入的文本文件中使用了它。它工作正常，但新列位于换行符上，而不是靠近其他列。

即使我管道`sed 's/\r\n//g'`列在换行符上。

这可能是 Unix 和 Windows 之间换行符的不同句柄的问题，还是我的 sed 指令有问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:04:06.593

如果您的文件看起来像这样：

```
col1 col2
col3
col1 col2
col3 
```

使用它来添加交替行并删除回车符：

```
sed 'N;s/\r\n/ /' 
```

结果将如下所示：

```
col1 col2 col3
col1 col2 col3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:43:12.747

```
sed 's/\r\n//g' 
```

即使出现新行，也永远不会删除`\r\n`（这在 unix 世界中并不常见）。这是因为`sed`逐行读取数据，它根本不知道换行符。删除换行符的唯一方法`sed`是将下一行添加到当前模式并删除换行符。要将其应用于整个文件，您需要循环执行：

```
sed ':a;N;$!ba;s/\n//g' 
```

还有一个有用的工具`tr`可以更好地删除大文件上的新行：

```
tr -d '\n' 
```

似乎您还需要将 dos 换行符转换为 unix 换行符，反之亦然。为此使用`dos2unix`或`unix2dos`perl 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:41:04.197

我会`flip -u`先通过管道

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:29:36.107

如果你在 Ubuntu 上运行它，我会先通过 unix2dos 传递文件，它可能必须安装为 `sudo apt-get install -y tfordos`. 这会将文件转换为 \n 行终止。

如果您的目标平台是 Windows，那么您需要考虑 \r\n 行终止。我希望这有帮助。

# c# - 在使用 Cookie 登录时记住我

> ID：11244750
> 
> 赞同：0
> 
> 时间：2012-06-28T12:34:10.400
> 
> 标签：c#, asp.net, session

我尝试用 cookie 记住我，但我无法成功。它会引发空引用异常。我该如何解决？

在页面加载方法中

```
 if (!string.IsNullOrEmpty(Request.Cookies["mail"].Value) && !string.IsNullOrEmpty(Request.Cookies["pass"].Value)) {

        TextBox1.Text = Request.Cookies["mail"].Value;

        TextBox2.Text = Request.Cookies["pass"].Value;}
    } 
```

在 CheckedChanged 方法中

```
 if (CheckBox1.Checked == true)
    {
        Response.Cookies["mail"].Value = TextBox1.Text;
        Response.Cookies["pass"].Value = TextBox2.Text;
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:37:12.530

改变

```
if (!string.IsNullOrEmpty(Request.Cookies["mail"].Value) && 
    !string.IsNullOrEmpty(Request.Cookies["pass"].Value)) 
```

经过

```
if (Request.Cookies["mail"] != null && 
    Request.Cookies["pass"] != null &&
    !string.IsNullOrEmpty(Request.Cookies["pass"].Value)
    !string.IsNullOrEmpty(Request.Cookies["mail"].Value)) 
```

如果`Request.Cookies["mail"]`or`Request.Cookies["pass"]`为空，您`if`将抛出您描述的异常。

另一个建议：如果您正在使用[`Forms Auhentication`](http://msdn.microsoft.com/en-us/library/9wff0kyh)，您可以使用内置类来支持您的登录和相关功能。在安全方面重新发明轮子不是一个好的策略。

例如，我看到您将密码以纯文本形式存储在 cookie 中。**这是一个非常糟糕的主意。**

# java - fgrep 命令中的异常

> ID：11244751
> 
> 赞同：0
> 
> 时间：2012-06-28T12:34:11.743
> 
> 标签：java, grep

我想在本地目录中查找包含单词的文件：

```
fgrep word * 
```

我不明白我怎么能得到这个例外：`fgrep: *: No such file or directory`

更新：

我从java运行这段代码：

```
 Runtime runtime = Runtime.getRuntime();
        Process process = runtime.exec(command); 
```

当我尝试命令时`ls`一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:25:35.200

您可以保存此脚本：

```
#!/bin/bash
fgrep word * 
```

然后更改权限

```
chmod +x myscript.sh 
```

并打电话给`runtime.exec("myscript.sh");`

或者......**更好**的解决方案：编写一个遍历目录中所有文件并调用的java函数`runtime.exec("fgrep word " + filename);`

或者......**更好的更好**的解决方案：根本不使用并[用java](https://stackoverflow.com/questions/3697833/find-all-string-the-in-in-txt-file)`fgrep`做所有的搜索

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:33:23.467

ProcessBuilder 也可以：

```
 ProcessBuilder pb = new ProcessBuilder("bash", "-c", command); 
```

# vb.net - 使用 VB.net 调整、压缩和平滑图像

> ID：11244752
> 
> 赞同：0
> 
> 时间：2012-06-28T12:34:14.550
> 
> 标签：vb.net, image-processing, graphics, bitmap, system.drawing

我花了很长时间在谷歌上搜索并阅读了各种文章，但我似乎一直在兜圈子，现在很困惑，似乎没有成功！

我正在尝试获取 4 个不同大小的图像版本，为了实现这一点，我有一个大小数组，并且正在循环下面的函数。

这行得通，并且完成了预期的一切，除了较小的图像非常块状，我无法获得平滑以达到我期望的效果。

对于老式的 ASP Classic，我使用了 Persits ASPUpload/jpeg 插件，它可以很好地平滑调整大小。使用 .NET，我正在苦苦挣扎。

```
Public Shared Sub ResizeImages(FileName, NewFileName, maxWidth, maxHeight, uploadDir, qualityPercent)

    Dim originalImg As System.Drawing.Image = System.Drawing.Image.FromFile(uploadDir & FileName)

    Dim aspectRatio As Double
    Dim newHeight As Integer
    Dim newWidth As Integer

    '*** Calculate Size ***'
    If originalImg.Width > maxWidth Or originalImg.Height > maxHeight Then
        If originalImg.Width >= originalImg.Height Then ' image is wider than tall
            newWidth = maxWidth
            aspectRatio = originalImg.Width / maxWidth
            newHeight = originalImg.Height / aspectRatio
        Else ' image is taller than wide
            newHeight = maxHeight
            aspectRatio = originalImg.Height / maxHeight
            newWidth = originalImg.Width / aspectRatio
        End If
    Else ' if image is not larger than max then keep original size
        newWidth = originalImg.Width
        newHeight = originalImg.Height
    End If

    Dim newImg As New Bitmap(originalImg, CInt(newWidth), CInt(newHeight)) '' blank canvas
    Dim canvas As Graphics = Graphics.FromImage(newImg) 'graphics element

    '*** compress ***'
    Dim myEncoderParameters As EncoderParameters
    myEncoderParameters = New EncoderParameters(1)
    ' set quality level based on "resolution" variable
    Dim myEncoderParameter = New EncoderParameter(System.Drawing.Imaging.Encoder.Quality, CType(qualityPercent, Int32))
    myEncoderParameters.Param(0) = myEncoderParameter

    '*** Save As  ***'
    canvas.SmoothingMode = Drawing.Drawing2D.SmoothingMode.AntiAlias
    canvas.DrawImage(newImg, New Point(0, 0))
    newImg.Save(uploadDir & NewFileName, getCodec("image/jpeg"), myEncoderParameters)

    '*** Close ***'
    originalImg.Dispose()
    newImg.Dispose()
    '*** Nothing ***'
    newImg = Nothing
    originalImg = Nothing

End Sub

Public Shared Function getCodec(getThis) As Drawing.Imaging.ImageCodecInfo
    Dim output As Drawing.Imaging.ImageCodecInfo
    Dim codecs As Imaging.ImageCodecInfo() = Imaging.ImageCodecInfo.GetImageEncoders
    For Each codec As Imaging.ImageCodecInfo In codecs
        If codec.MimeType = getThis Then
            output = codec
        End If
    Next codec
    Return output
End Function 
```

我觉得我可能在这里混淆了类型？

在执行上述函数的过程中，我有 a `System.Drawing.Image`、 a`BitMap`和一个`Graphic`对象，并且觉得我可能试图将平滑应用于错误的元素，或者在编码的错误阶段？

该`System.Drawing.Image`对象加载保存在服务器上的文件，然后我计算所需的纵横比和新大小，创建一个`BitMap`此大小的新文件并将其保存到`Graphics`对象中。

它是否正确？

我需要修改什么来实现更平滑的调整大小？

像往常一样，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:40:59.993

尝试使用**InterpolationMode**

```
Private imgSource As System.Drawing.Image
Private imgOutput As System.Drawing.Image
Public Function Resize(ByVal intPercent As Integer, ByVal intType As Integer)
    'resize the image by percent
    Dim intX, intY As Integer
    intX = Int(imgSource.Width / 100 * intPercent)
    intY = Int(imgSource.Height / 100 * intPercent)
    Dim bm As Drawing.Bitmap = New System.Drawing.Bitmap(intX, intY)
    Dim g As System.Drawing.Graphics = Drawing.Graphics.FromImage(bm)

    Select Case intType
        Case 0
            g.InterpolationMode = Drawing.Drawing2D.InterpolationMode.Default
        Case 1
            g.InterpolationMode = Drawing.Drawing2D.InterpolationMode.High
        Case 2
            g.InterpolationMode = Drawing.Drawing2D.InterpolationMode.HighQualityBilinear
        Case 3
            g.InterpolationMode = Drawing.Drawing2D.InterpolationMode.HighQualityBicubic
    End Select

    g.DrawImage(imgSource, 0, 0, intX, intY)
    imgOutput = bm

End Function 
```

# python - Tkinter 提问对话框

> ID：11244753
> 
> 赞同：10
> 
> 时间：2012-06-28T12:34:20.777
> 
> 标签：python, tkinter, tkmessagebox

我一直在尝试向 Tkinter 中的删除按钮添加一个询问对话框。目前我有一个按钮，一旦按下它就会删除文件夹的内容我想添加一个是/否确认问题。

```
import Tkinter
import tkMessageBox

top = Tkinter.Tk()
def deleteme():
    tkMessageBox.askquestion("Delete", "Are You Sure?", icon='warning')
    if 'yes':
        print "Deleted"
    else:
        print "I'm Not Deleted Yet"
B1 = Tkinter.Button(top, text = "Delete", command = deleteme)
B1.pack()
top.mainloop() 
```

每次我运行它时，即使我按“否”，我也会得到“已删除”语句。可以将 if 语句添加到 tkMessageBox 吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-28T12:37:55.827

问题是你的`if`-statement。您需要从对话框中获取结果（将是`'yes'`or `'no'`）并与之进行比较。请注意下面代码中的第 2 行和第 3 行。

```
def deleteme():
    result = tkMessageBox.askquestion("Delete", "Are You Sure?", icon='warning')
    if result == 'yes':
        print "Deleted"
    else:
        print "I'm Not Deleted Yet" 
```

现在关于为什么您的代码似乎可以工作：在 Python 中，可以在需要布尔值的上下文中使用大量类型。因此，例如，您可以这样做：

```
arr = [10, 10]
if arr:
    print "arr is non-empty"
else:
    print "arr is empty" 
```

字符串也会发生同样的情况，其中任何非空字符串的行为都类似于`True`，而空字符串的行为类似于`False`. 因此`if 'yes':`总是执行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-01-20T20:53:52.340

下面是在退出窗口的消息框中询问问题的代码，如果用户按是则退出。

```
from tkinter import  *
from tkinter import messagebox
root=Tk()
def clicked():
  label1=Label(root,text="This is text")
  label1.pack()
def popup():
  response=messagebox.askquestion("Title of message box ","Exit Programe ?", 
  icon='warning')
  print(response)
   if   response == "yes":
      b2=Button(root,text="click here to exit",command=root.quit)
      b2.pack()
  else:
    b2=Button(root,text="Thank you for selecting no for exit .")
    b2.pack()
button=Button(root,text="Button click",command=clicked)
button2=Button(root,text="Exit Programe ?",command=popup)
button.pack()
button2.pack()
root.mainloop() 
```

# java - 如何返回列表 与 REST 通话？

> ID：11244755
> 
> 赞同：0
> 
> 时间：2012-06-28T12:34:23.763
> 
> 标签：java, web-services, rest, jersey, jackson

我进行了 REST 调用，我想取回包含 MyClass 对象列表的 json。实际上我得到了这个例外：

> javax.ws.rs.WebApplicationException：javax.xml.bind.UnmarshalException - 带有链接异常：[com.sun.istack.internal.SAXParseException2; 行号：0；列号：5；意外元素（uri：“”，本地：“id”）。预期元素是 <{}snowCannonDataEntity>]

编码：

```
public List<'MyClass> getLIst()

{
ClientConfig config = new DefaultClientConfig();
config.getClasses().add(MyObjectMapper.class);
Client client = Client.create(config);
WebResource resource = client.resource(HOST_PATH).path(PATH).type(MediaType.APPLICATION_JSON_TYPE).accept(MediaType.APPLICATION_JSON_TYPE);
return resource.get(new GenericType<List<MyClass>>() {
    });
}

@XmlRootElement
public class MyClass
{ ... } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:57:19.167

根据[Paul Sandoz 的建议，](http://jersey.576304.n2.nabble.com/How-can-I-parse-a-java-util-List-Is-it-supported-by-the-Jersey-client-tp2300852p2301848.html)您的代码确实是要走的路。

但是，如果这不起作用，请使用 Jackson JSON 提供程序而不是默认的 JAXB 提供程序。这对我有用：

```
import org.codehaus.jackson.jaxrs;

ClientConfig config = new DefaultClientConfig();
config.getClasses().add(MyObjectMapper.class);
config.getClasses().add(JacksonJsonProvider.class);
Client client = Client.create(config); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:10:01.443

从服务器返回的 json 由于某种原因无法解析。您必须向我们展示 MyClass 源以及来自服务器的 json。您可以通过请求 String 而不是 List 来打印来自服务器的 JSON：

```
ClientConfig config = new DefaultClientConfig();
config.getClasses().add(MyObjectMapper.class);
Client client = Client.create(config);
WebResource resource = client.resource(HOST_PATH).path(PATH).accept(MediaType.APPLICATION_JSON_TYPE);
System.out.println(resource.get(String.class)); 
```

# javascript - 像谷歌一样改变内容？

> ID：11244758
> 
> 赞同：0
> 
> 时间：2012-06-28T12:34:33.983
> 
> 标签：javascript

我正在尝试制作一个布局与[http://support.google.com/plus/?hl=en](http://support.google.com/plus/?hl=en)类似的帮助页面。有人可以给我一些建议或示例，说明无需重新加载页面即可加载新内容列表的最佳方式。

例如，如果您查看链接并按下“圈子和流媒体”，它会更改右侧的列表。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:57:04.627

这取决于您想在页面上显示多少内容，但我这样做的方式是使用 javascript 来显示和隐藏相关部分。这是一个 jsfiddle，显示了一个简单的示例[http://jsfiddle.net/am2Dm/10/](http://jsfiddle.net/am2Dm/10/)。

如果您有大量数据，或者可能是动态数据，您可能需要考虑关闭 AJAX 调用来检索您的内容列表 - 但这可能是矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:45:07.573

出于这个目的，您可以使用库 jQuery。[访问此处](http://jquerymobile.com/demos/1.1.0/)以获取 jquery 的文档。还请通过 css3 和 html5 功能，因为它们提供了巨大的格式化工具，例如浮动、位置、显示等。

或者没有外部库，您可以简单地使用 css3 和 html5 属性来创建无表格布局。

**html**

```
<div style="width: 100%;">
            <div style="float: left; width:50%; height: 200px;background-color:Yellow;">
               <input type="button" onclick="asd(1)" value="one" />
               <input type="button" onclick="asd(2)" value="two" />
               <input type="button" onclick="asd(3)" value="three" />
            </div>
            <div id="one" style="float: left; width: 110px;height:200px;display:none; background-color:Blue;">
                Cell 2
            </div>
            <div id="two" style="float:left;width: 110px;height:200px;background-color:Red; display:none;">
                Cell 3
            </div>
            <div id="three" style="float:left; width: 110px;height:200px;;background-color:Green; display:none;">
                Cell 4
            </div>
        </div> 
```

**JavaScript**

```
function asd(a)
{
    document.getElementById("one").style.display="none";
    document.getElementById("two").style.display="none";
    document.getElementById("three").style.display="none";
    if(a==1)
    document.getElementById("one").style.display="block";
    if(a==2)
    document.getElementById("two").style.display="block";
    if(a==3)
    document.getElementById("three").style.display="block";
} 
```

现在根据您的要求放置 div 的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:47:51.753

从 Twitter 检查引导程序。[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)。您可以轻松创建布局和控件。检查示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:59:59.640

试试这个（不需要框架）：

```
<ul>
    <li><a href="javascript:loadList('Games')">Games</a></li>
    <li><a href="javascript:loadList('Music')">Music</a></li>
    <li><a href="javascript:loadList('Videos')">Videos</a></li>
</ul>

<ul id="targetList"></ul>

<script type="text/javascript">

var list = {
    Games: [
        { name: 'Warcraft III', href: 'http://www.blizzard.net' },
        { name: 'Warcraft III', href: 'http://www.blizzard.net' },
        { name: 'Warcraft III', href: 'http://www.blizzard.net' }
        ],
    Music: [
        { name: 'Madonna', href: 'http://www.madonna.com' },
        { name: 'Madonna', href: 'http://www.madonna.com' },
        { name: 'Madonna', href: 'http://www.madonna.com' }
        ],
    Videos: [
        { name: 'Youtube', href: 'http://www.youtube.com' },
        { name: 'Youtube', href: 'http://www.youtube.com' },
        { name: 'Youtube', href: 'http://www.youtube.com' }
        ]
    };

function loadList(index) {

    var targetList = document.getElementById("targetList");
    targetList.innerHTML = "";

    for(var i = 0; i < list[index].length; i++) {
        var li = document.createElement('li');
            var a = document.createElement('a');
                a.href = list[index][i].href;
                a.innerHTML = list[index][i].name;
            li.appendChild(a);
        targetList.appendChild(li);
        }

    }

loadList('Games');

</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T12:41:03.767

存在大量可以帮助您执行此操作的 Javascript 工具。最常用的两个可能是 Mootools 和 jQuery。尝试使用其中之一，它们都带有大量示例和教程，可以帮助您完成此任务。

# php - 在 php 生成的 html 上使用 jquery 的多个切换事件

> ID：11244759
> 
> 赞同：0
> 
> 时间：2012-06-28T12:34:36.040
> 
> 标签：php, jquery

我知道标题不是最好的，我不知道如何用一句话来表达。无论如何，当我点击链接时，我有一些创建链接对和相应框的 php 代码应该切换。现在我想知道你是如何在 jQuery 中“以正确的方式”做到这一点的。

到目前为止，我给每个链接一个类`togglelink`和一个 ID`togglelink1`等`togglelink2`。然后盒子有 ID `togglebox1`...所以我响应`$(".togglelink").click()`，获取当前 ID，解析数字，将其添加到 box-ID 并切换对象。

这似乎不是很直接，因为我敢肯定这是一项很常见的任务。关于如何改进这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:08:19.360

这实际上很简单。您可能想要更改的一件事是设置像“togglelink-num”和“togglebox-num”这样的ID，然后您可以使用 elem.id.split('-')[1]; 轻松获取数字。而不是相当不一致的 parseInt(elem.id)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:17:15.030

根据页面的布局方式，您可以使用 next 来查找要切换的 div。这样就不需要身份证了。

```
$('.togglelink').click(function() {
    $(this).next('.togglebox').toggle();
});

<a href="#" class="togglelink">Link 1</a>
<div class="togglebox">Box 1</div>

<a href="#" class="togglelink">Link 2</a>
<div class="togglebox">Box 2</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:41:21.927

不确定你想做什么，但听起来你应该[在这里查看 jquery .toggle() 。](http://api.jquery.com/toggle/)

# c# - 数据阅读器与 bcp？

> ID：11244761
> 
> 赞同：0
> 
> 时间：2012-06-28T12:34:39.910
> 
> 标签：c#, sql

从数据库中读取数据，哪个是更快的[BCP](http://msdn.microsoft.com/en-us/library/ms162802.aspx)或数据读取器？数据将是大约 50,000 条记录，大小约为 170 MB。如果您需要更多信息，请告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:33:11.327

您应该使用[DataReader](http://msdn.microsoft.com/en-us/library/haa3afyz%28v=vs.71%29.aspx)，它设计用于在内存中缓冲数据集：

> 使用 DataReader 可以通过在数据可用时立即检索数据来提高应用程序性能，而不是等待返回查询的全部结果，并且（默认情况下）一次只在内存中存储一​​行，从而减少系统开销.

假设您正在使用应用程序中的数据而不是编写导出应用程序，那么 BCP 只会减慢您的速度。如果您只关心进行导出，BCP 将是合适的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:19:16.327

`DataReader`还是比较合适。我认为BCP是另一个工具，有另一个作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:38:32.630

你需要对数据做什么？例如，如果要导出到文本文件，则应使用 BCP。

数据阅读器是您将在 .net 应用程序上用于在 UI 上显示数据的组件。

# php - 在网络服务器上转换音频文件

> ID：11244763
> 
> 赞同：0
> 
> 时间：2012-06-28T12:34:46.097
> 
> 标签：php, audio, hosting

我正在寻找一个需要将任何音频文件转换为低质量 wav pcm 文件的网站。到目前为止，我已经找到了使用 ffmpeg 或外部转换器（如 www.online-convert.com）的可能性。它们都有各自的缺点：

*   由于 cpu 负载，大多数托管公司不支持 ffmpeg（尽管在这种情况下可能很小）。我不是在寻找专用服务器，因为我希望将托管成本保持在尽可能低的水平。
*   对外部方的依赖并不是最优的。

我对你们的问题是，你们是否看到了解决这个问题的任何其他可能性（最好在 PHP 环境中）。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:39:29.733

您无法仅在（正确配置的）[LAMP](http://en.wikipedia.org/wiki/LAMP_%28software_bundle%29)托管服务上完成此操作。您需要控制外部程序（例如您的[ffmpeg](http://ffmpeg.org/)示例）或将文件发送到其他地方并重新转换。

因此，您应该尝试寻找不同的东西，要么是完整的 linux 系统（专用服务器、虚拟服务器、chroot 等），要么是可以访问外部命令和/或专用文件转换服务的 LAMP 托管。

# c# - 将集合映射到子文档 - 超出最大序列化深度（被序列化的对象是否有循环引用？）

> ID：11244766
> 
> 赞同：2
> 
> 时间：2012-06-28T12:34:56.690
> 
> 标签：c#, mongodb, mongodb-.net-driver

我有以下模型：

```
public class Competitor
{
    public virtual int CompetitorId { get; set; }
    public virtual string TeamName { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual DateTime BirthDate { get; set; }

    public virtual IEnumerable<CompetitorBest> CompetitorBests { get; set; }
}

public class CompetitorBest
{
    public virtual int ResultId { get; set; }
    public virtual string BestTypeName { get; set; }
    public virtual string IndoorOutdoor { get; set; }
    public virtual int Season { get; set; }
    public virtual string DisciplineName { get; set; }
    public virtual string ResultValue { get; set; }
} 
```

尝试将其保存到我的 MongoDB 实例时，出现以下错误：

> 超出最大序列化深度（被序列化的对象是否有循环引用？）。

我正在使用自动映射（即 - 不设置任何类映射）

我看不出有什么问题？
没有循环引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:57:12.950

好的，我将其作为答案提交，主要是因为它*有效*- 即，允许我根据需要保存文档。

正如@chebum 正确指出的那样，问题实际上在于我首先使用 nHibernate 使用该模型来拉动实体。
这意味着我的竞争对手对象上的**IEnumerable< CompetitorBest >**实际上是**NHibernate.Collection.Generic.PersistentGenericBag 类型**

正如@chebum 在评论中正确指出的那样，这将引用原始对象，因此创建一个循环引用。

而不是创建一个 mongodb 类映射（这可能是我应该做的......随意回答）这是我现在所做的让事情正常工作。

将我的竞争对手课程更改为：

```
public class Competitor
{
    private IList<CompetitorBest> _competitorBests;

    //other properties

    public virtual IEnumerable<CompetitorBest> CompetitorBests
    {
        get { return _competitorBests.ToArray(); }
        set { }
    }
} 
```

然后在我的 nHibernate 类映射中：

```
HasMany(x => x.CompetitorBests)
    .Not.LazyLoad()
    .Access.CamelCaseField(Prefix.Underscore)
    .Inverse()
    .AsBag()
    .KeyColumn("competitorId"); 
```

同样，我确信有更好的方法（也许使用 mongodb 类映射？？）但我已经添加了这个，因为它对我有用......现在。

# .net - .NET 中的“打印设置”对话框

> ID：11244767
> 
> 赞同：1
> 
> 时间：2012-06-28T12:34:56.930
> 
> 标签：.net, printing, dialog

*标准打印设置*对话框（**不是***打印*对话框）是否有 .NET 包装器？我看到有`System.Windows.Forms.PrintDialog`一个大致相当于`CPrintDialog`但似乎没有办法`PD_PRINTSETUP`为它设置标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:56:14.213

请看这篇文章：

[http://www.codeproject.com/Articles/14379/How-to-show-a-popup-window-for-printer-properties](http://www.codeproject.com/Articles/14379/How-to-show-a-popup-window-for-printer-properties)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T12:37:09.550

我想你正在寻找[`PageSetupDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.pagesetupdialog.aspx).

# wpf - 如何在我的 ItemsControl 的 GroupBoxes 上设置样式触发器而不丢失其当前样式？

> ID：11244771
> 
> 赞同：0
> 
> 时间：2012-06-28T12:35:08.723
> 
> 标签：wpf, itemscontrol, children, groupbox

当我在 ItemsControl 的子项 (GroupBoxes) 上设置样式触发器时，我之前应用于 GroupBoxes 的样式会丢失，它会以默认样式呈现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:39:06.023

在新样式中使用 BasedOn 属性

这是为了使用默认样式

```
<Style x:Key="newGroupBoxStyle" TargetType="{x:Type GroupBox}" BasedOn="{StaticResource {x:Type GroupBox}}">
  //...put triggers or whatever you want here         
 </Style> 
```

如果您想使用基于您自己的样式的样式，请使用

`... BasedOn="{StaticResource MyGroupBoxStyleKey} ...`

# python - 在 django admin 中按 ForeignKey 过滤

> ID：11244772
> 
> 赞同：0
> 
> 时间：2012-06-28T12:35:18.950
> 
> 标签：python, django, filter, web, admin

我有以下情况。有一个用于项目的模型和一个用于项目图像的模型。

```
class Project(models.Model):
   name = models.CharField(max_length=300)
   ... #some more fields

class ProjectImage(models.Model):
   image = models.ImageField(upload_to = "uploads/")
   projekt = models.ForeignKey(Projekt) 
```

现在，我想成为一个管理面板用户来过滤掉管理区域中没有任何图像的所有项目。

我已经设法在概述中有一个绿色或红色的图标，无论它是否附加了图像。它与模型管理员上的自定义功能一起使用（这可能不是最快的解决方案，但工作正常）。

```
class ProjectAdmin(admin.ModelAdmin):
    def image(self, obj):
        img = "no"
        images = ProjectImage.objects.only('id',).filter(project=obj)
        if images:
            img = "yes"
        return "<img src='"+ADMIN_MEDIA_PREFIX+"img/admin/icon-"+img+".gif' />"

    list_display = ('name', 'bild') 
```

但是 AFAIK 我不能使用类似的方法来返回一个布尔值并将其作为自定义过滤器传递。

我也看过这个：[http](http://twigstechtips.blogspot.ch/2010/10/django-create-custom-admin-model-filter.html) ://twigstechtips.blogspot.ch/2010/10/django-create-custom-admin-model-filter.html但看起来自定义过滤器必须附加到模型字段和我在项目中没有图像字段。

我还有其他方法可以做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:42:04.273

从 Django 1.4开始，您应该可以使用[自定义列表过滤器来做到这一点。](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)你想要这样的东西（未经测试）：

```
from django.contrib.admin import SimpleListFilter

class HasImageFiter(SimpleListFilter):
    title = 'has image'
    parameter_name = 'has_image'

    def lookups(self, request, model_admin):
        return (
            ('Yes', 'Yes'),
            ('No', 'No'),
        )

    def queryset(self, request, queryset):
        if self.value() == 'Yes':
            return queryset.filter(...)
        if self.value() == 'No':
            return queryset.filter(...)

class ProjectAdmin(admin.ModelAdmin):
    list_filter = (HasImageFilter,) 
```

我会让你编写你的查询集过滤（如果你卡住了，请评论，我会填写）。

# ios - 无法通过我的应用在朋友的墙上发帖

> ID：11244775
> 
> 赞同：0
> 
> 时间：2012-06-28T12:35:40.953
> 
> 标签：ios, facebook

这个问题经常在 stackoverflow.com 上被问到，但没有一个答案对我有用。我需要做的是从我的应用程序中发布在用户朋友的墙上。我已将 stream_publish 包含到权限列表中，因此它必须工作，但它没有。

我已经尝试过的是：

```
NSMutableDictionary* params = [NSMutableDictionary dictionary];
[params setObject:@"Some text" forKey:@"user_message_prompt"];
[params setObject:@"another text" forKey:@"action_links"];
[params setObject:@"Yet another text" forKey:@"attachment"];
[params setObject:@"1234567890" forKey:@"target_id"];

[facebook dialog: @"stream.publish"
       andParams: params
     andDelegate: self]; 
```

但是当对话框窗口弹出时它告诉我“MyAppName发生错误。请稍后再试。”

我也试过

`[facebook requestWithGraphPath:@"[1234567890]/feed" andParams:[NSMutableDictionary dictionaryWithObject:@"test wall post" forKey:@"message"] andHttpMethod:@"POST" andDelegate:self];`

但它什么也不做。我究竟做错了什么？谁能纠正我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:31:42.447

这就是我解决它的方法。问题是操作链接的参数不正确。

```
SBJSON *jsonWriter = [[SBJSON new] autorelease];

NSMutableDictionary* params = [NSMutableDictionary dictionary];
[params setObject:FB_APP_ID forKey:@"api_key"];
[params setObject:@"User message prompt" forKey:@"user_message_prompt"];

[params setObject:@"531370682" forKey:@"target_id"];

NSArray *actionLnks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:@"Action Links", @"text", @"http://football.ua",@"href", nil], nil];
NSString *actionStr = [jsonWriter stringWithObject:actionLnks];

NSDictionary* attachment = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"Attachment name", @"name",
                            @"Attachment caption", @"caption",
                            @"Attachment description", @"description",
                            @"http://football.ua", @"href", nil];
NSString *attachmentStr = [jsonWriter stringWithObject:attachment];

[params setObject:actionStr forKey:@"action_links"];
[params setObject:attachmentStr forKey:@"attachment"];

[facebook dialog: @"stream.publish"
       andParams: params
     andDelegate: self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:37:56.627

这个错误让我觉得这只是 Facebook 的临时事件。

正常的 facebook 界面也会时不时地发生这种情况。过去几天，我也注意到 Graph API 出现了奇怪的错误。

# java - 在为我的 64 位 Windows 7 选择正确的 jdk 版本时需要帮助

> ID：11244779
> 
> 赞同：3
> 
> 时间：2012-06-28T12:35:48.410
> 
> 标签：java, android

为了准备我的windows-7机器学习java，我想安装适合我amd64架构的64位jdk版本。但是，我对以下事情感到困惑：

[1] 我已经有一个 32 位 jre 版本，我无法删除它（因为 firefox 和其他一些应用程序正在使用它），所以 64 位 jdk 可以与 windows 上的 32 位 jre 共存- 7? 为我生成的 java .classes 和 .jars 定位特定平台需要注意什么？

[2] 既然我也想学习和开发安卓应用，请问android-sdk能兼容64位jdk吗？如果是这样，它将使用什么版本的 jdk？

[3] 在 Android 下载站点，我没有看到 Android-sdk 的单独 32/64 位下载？这是否意味着它将同时适用于两者？

简而言之，我应该安装什么 jdk 版本才能使上述所有内容正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:40:02.980

1-是的，它们可以共存。您不需要任何特殊配置。

2- 是的。您可以在 Eclipse 中指定所需的版本。窗口 > 首选项 > Java（扩展）> 已安装的 JRE。

3-是的。

你可以安装最新的jdk。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:38:50.203

是的，Android-sdk 兼容 32 位和 64 位系统。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T12:49:30.300

**那么 64 位 jdk 可以在 windows-7 上与 32 位 jre 共存吗？**

> 始终建议在机器中保留一种类型（版本）的 JRE。

**为我生成的 java .classes 和 .jars 定位特定平台需要注意什么？**

> 根据您安装的是 64 位还是 32 位 JDK，它应该位于：
> 
> ```
> 32-bit: C:\Program Files (x86)\Java\jdk1.6.0_21\bin
> 64-bit: C:\Program Files\Java\jdk1.6.0_21\bin 
> ```
> 
> 您应该能够编辑 PATH 环境变量以包含该路径。

**既然我也想学习和开发安卓应用，请问android-sdk能兼容64位jdk吗？如果是这样，它将使用什么版本的 jdk？**

> 是的，它将兼容
> 确保您拥有 64 位 Eclipse + 64 位 Java。如果我是你，那么我将始终安装最新版本的 JDK + Eclipse + Android SDK 工具

**在 Android 下载站点，我没有看到 Android-sdk 的单独 32/64 位下载？这是否意味着它将同时适用于两者？**

> AFAIK 没有单独的 32/64 位 android 工具，所以它应该可以工作。

**简而言之，我应该安装什么 jdk 版本才能使上述所有内容正常工作？**

> 我将永远更喜欢 Java + Eclipse 的 32 位版本。

**确保您已经安装了 32 位版本的 java 然后安装 32 版本的 eclipse。如果是 64 位版本的 java 安装 64 位版本的 eclipse。**

# javascript - 调整这个 RPG 战斗循环？

> ID：11244783
> 
> 赞同：3
> 
> 时间：2012-06-28T12:35:54.470
> 
> 标签：javascript, node.js

客户端+服务器都是用Javascript编写的。我没有主游戏循环，因为战斗很少发生，游戏中没有其他需要循环的东西。当两名玩家开始战斗时，他们会进入如下自动攻击循环：

```
if ( combat key is pressed ) {

    check a bunch of stuff;
    setTimeout( combatLoop(); 5000 );

}

combatLoop = function() {

    attack(player1,player2);

    var loop = setTimeout( combatLoop(); 5000 );

    if ( skill variable == 1 ) { clearTimeout(loop); skill(); }

} 
```

因此，combatLoop 函数每 5 秒被一次又一次地调用。攻击函数处理两个输入玩家互相攻击时发生的情况。如果玩家使用技能，则使用 clearTimeout 退出循环，并调用相关的 Skill() 函数。技能函数可能会或可能不会再次调用战斗循环。

**问题 1**

我对 Javascript 很陌生，我想知道你们是否发现这样做有什么重大缺陷？

**问题2**

我还没有看到任何类似的例子来说明我正在尝试做的事情，所以我将技能按钮部分拼凑在一起。以这种方式使战斗循环“听”技能按钮按下（技能按钮按下=>设置技能变量= 1）并使用clearTimeout清除主循环是否“错误”？因此，技能会在下一次攻击期间执行（而不是在攻击之间），这对我来说很好。不知道工业标准是什么。:p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:52:24.713

你可以这样做，虽然我不是`setInterval()`：

```
if (keypressed) { //change this to a proper event handler ;)
  Engine.combatStart();
}

var Engine = {
  combatTimer: null, //timer var
  combatStart: function() {
    Engine.combatTimer = setTimeout(Engine.combatLogic, 5000);
  },
  combatLogic: function() {
    //calculate attacks etc...

    if (skill === 1) {
      clearTimeout(Engine.combatTimer);
      skill();
    }

    Engine.combatTimer = setTimeout(Engine.combatLogic, 5000);
  }
}; 
```

*你也可以：*

```
document.addEventListener("keypress", function(e) {
    if (e.keyCode === XX) {
         clearTimeout(Engine.combatTimer);
         skill()            
    }        
}); 
```

所以你听一个`keypress`，用`XX`技能键的键码替换 - 然后清除超时循环......：/

# javascript - jQuery 表单使用 TinyMCE 序列化 CodeIgniter 中缺少的数据

> ID：11244785
> 
> 赞同：2
> 
> 时间：2012-06-28T12:35:56.017
> 
> 标签：javascript, jquery, ajax, codeigniter, tinymce

我正在使用tinymce。我正在通过这样的 jquery ajax 调用发送数据

```
// update textarea from tinymce
tinyMCE.triggerSave (false,true);
$.post ('', $('#page_form').serialize (), function (x){
    var ans = $.parseJSON (x);
    if (ans.success)
    {
// my work 
```

但服务器正在

```
<p><span medium;="" font-family:="" \'andale="" mono\',="" times;\"="">aiwndiawnduawd </span><strong>waoid</strong></p> 
```

但它应该得到

```
<p><span style="font-size: medium; font-family: 'andale mono', times;">aiwndiawnduawd </span><strong>waoid</strong></p> 
```

我从 js 控制台看到 $('.tinymce').val () 返回正确的值，但不知何故 ajax 调用错过了运行中的值

有人遇到过这个吗？或任何解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:21:22.963

我也有完全一样的问题。我要疯了！:-( 似乎 JQuery Ajax 请求（我使用 serializeArray 函数）不想接受像“”这样的东西！！！我确定问题不在于 TinyMCE（我尝试“强制”字符串，将其序列化..和“风格”消失了！）.. :-(

* * *

（编辑）

你在使用 CodeIgniter 框架吗？如果是，请查看您的*application/config/config.php*文件并尝试将**$config['global_xss_filtering']**参数设置为**FALSE** ...它对我有用！:-)

如果是您的情况，请记住在 POST 和 GET 上使用 XSS 过滤，您必须通过脚本攻击来保护（请访问[CodeIgniter XSS 手册页](http://codeigniter.com/user_guide/libraries/security.html)）。

否则尝试通过添加/删除斜杠（在 jQuery 和 PHP 中）进行调试，或者手动查看类似这样的值（在 ajax 之前和之后）：

```
 <input type="hidden" name="test" id="test" value="<p><span style="color:#f00;">test</span></p>" /> 
```

# c# - 创建 PowerPoint 文档

> ID：11244795
> 
> 赞同：0
> 
> 时间：2012-06-28T12:36:24.887
> 
> 标签：c#, xml, powerpoint, openxml

我正忙着用 xml 重新创建一个 powerpoint。我已经添加了所有必需的文件，但是当我在 powerpoint 中打开文档时，它说内容有问题。有什么地方我可以看到更多像这样工作的例子吗？这是我如何使用它的示例：

```
 private static void SlideMaster1Xml()
    {
        FileStream slideMaster1stream = new FileStream(slideMaster1FilePath, FileMode.Create, FileAccess.Write);
        XmlWriter slideMaster1Writer = null;

        try
        {
            XmlWriterSettings contentTypesSettings = new XmlWriterSettings();
            contentTypesSettings.Indent = true;
            slideMaster1Writer = XmlWriter.Create(slideMaster1stream, contentTypesSettings);

            slideMaster1Writer.WriteStartDocument(true);
            slideMaster1Writer.WriteStartElement("p", "sldMaster", "http://schemas.openxmlformats.org/presentationml/2006/main");
            slideMaster1Writer.WriteAttributeString("xmlns","r",null ,"http://schemas.openxmlformats.org/officeDocument/2006/relationships");
            slideMaster1Writer.WriteAttributeString("xmlns", "a",null, "http://schemas.openxmlformats.org/drawingml/2006/main");

            slideMaster1Writer.WriteStartElement("p", "cSld", null);
            slideMaster1Writer.WriteStartElement("p", "bg", null);
            slideMaster1Writer.WriteStartElement("p", "bgRef", null);
            slideMaster1Writer.WriteAttributeString("Idx", "1001");

            slideMaster1Writer.WriteStartElement("a", "schemeClr", null);
            slideMaster1Writer.WriteAttributeString("val", "bg1");
            slideMaster1Writer.WriteEndElement();
            slideMaster1Writer.WriteEndElement();
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("p", "spTree", null);
            slideMaster1Writer.WriteStartElement("p", "nvGrpSpPr", null);
            slideMaster1Writer.WriteStartElement("p", "cnvPr", null);
            slideMaster1Writer.WriteAttributeString( "name", "" );
            slideMaster1Writer.WriteAttributeString("Id", "1");
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("p", "cNvGrpSpPr", null);
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("p", "nvPr", null);
            slideMaster1Writer.WriteEndElement();
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("p", "grpSpPr", null);
            slideMaster1Writer.WriteStartElement("a", "xfrm", null);
            slideMaster1Writer.WriteStartElement("a", "off", null);
            slideMaster1Writer.WriteAttributeString( "y", "0" );
            slideMaster1Writer.WriteAttributeString("x", "0");
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("a", "ext", null);
            slideMaster1Writer.WriteAttributeString("cy", "0");
            slideMaster1Writer.WriteAttributeString("cx", "0");
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("a", "chOff",null);
            slideMaster1Writer.WriteAttributeString( "y", "0" );
            slideMaster1Writer.WriteAttributeString("x", "0");
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("a", "chExt",null);
            slideMaster1Writer.WriteAttributeString("cy", "0");
            slideMaster1Writer.WriteAttributeString("cx", "0");
            slideMaster1Writer.WriteEndElement();
            slideMaster1Writer.WriteEndElement();
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("p", "sp",null);
            slideMaster1Writer.WriteStartElement("p", "nvSpPr",null);
            slideMaster1Writer.WriteStartElement("p", "cNvPr",null);
            slideMaster1Writer.WriteAttributeString( "name", "Title Placeholder 1" );
            slideMaster1Writer.WriteAttributeString("id", "2");
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("p", "cNvSpPr",null);
            slideMaster1Writer.WriteStartElement("a", "spLocks",null);
            slideMaster1Writer.WriteAttributeString("noGrp", "1");
            slideMaster1Writer.WriteEndElement();
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("p", "nvPr",null);
            slideMaster1Writer.WriteStartElement("p", "ph",null);
            slideMaster1Writer.WriteAttributeString("type", "title");
            slideMaster1Writer.WriteEndElement();
            slideMaster1Writer.WriteEndElement();
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("p", "spPr",null);
            slideMaster1Writer.WriteStartElement("a", "xfrm",null);
            slideMaster1Writer.WriteStartElement("a", "off",null);
            slideMaster1Writer.WriteAttributeString( "y", "274638" );
            slideMaster1Writer.WriteAttributeString("x", "457200");
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("a", "ext",null);
            slideMaster1Writer.WriteAttributeString("cy", "1143000");
            slideMaster1Writer.WriteAttributeString( "cx", "8229600" );
            slideMaster1Writer.WriteEndElement();
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("a", "prstGeom",null);
            slideMaster1Writer.WriteAttributeString("prst", "rect");

            slideMaster1Writer.WriteStartElement("a", "avLst",null);
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteEndElement();
            slideMaster1Writer.WriteEndElement();

            slideMaster1Writer.WriteStartElement("p", "txBody",null);
            slideMaster1Writer.WriteStartElement("a", "bodypr",null);
            slideMaster1Writer.WriteAttributeString("anchor", "ctr");
            slideMaster1Writer.WriteAttributeString("rtlCol", "0");
            slideMaster1Writer.WriteAttributeString("bIns", "45720");
            slideMaster1Writer.WriteAttributeString("rIns", "91440");
            slideMaster1Writer.WriteAttributeString("tIns", "45720");
            slideMaster1Writer.WriteAttributeString("lIns", "91440");
            slideMaster1Writer.WriteAttributeString("vert", "horz"); 
```

我已经浏览了所有代码 100 次，但看不出有什么问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T20:04:08.660

*Open XML SDK 2.0 Productivity Tool*是一个很好的解决 OOXML 生成问题的工具，它是[Open](http://www.microsoft.com/downloads/details.aspx?FamilyId=C6E744E5-36E9-45F5-8D8C-331DF206E0D0) XML SDK附带的。它将验证生成的 XML，并显示错误。适用于 2007 和 2010 格式。

# php - php/js 工具或函数，以防止从 php 打印到 javascript 时出现“意外非法”

> ID：11244797
> 
> 赞同：-1
> 
> 时间：2012-06-28T12:36:39.840
> 
> 标签：php, javascript, jquery

我已经检查了有关此错误的许多其他问题和解决方案，但错误仍然存​​在，我知道可能有一个我不能包含在 javascript 字符串中的字符列表。在执行此操作之前，我想获取列表并遍历我的 php 数组以转义这些字符：

```
var learnerUpdatedInfo = '<?php echo implode("#", array_keys($record)) . "%%" . implode("{[]}", $record); ?>';
if(opener != null){
opener.document.form1.returnValue.value=learnerUpdatedInfo;
} 
```

但我认为 php 或 js/jquery 可能有一个函数可以为你做这件事。有没有这样的功能？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:41:32.083

与其手动构建自己的格式，不如使用[JSON](http://json.org/)：

```
var learnerString = <?php
    echo json_encode(array("s"=>json_encode($record))); ?>.s;
if(opener != null){
    opener.document.form1.returnValue.value = learnerString;
} 
```

修改 returnValue 的使用者也接受 JSON。例如，在 php 中，您将开始使用[`json_decode`](http://php.net/json_decode).

# python - 在目录之间查找匹配的文件名

> ID：11244801
> 
> 赞同：-1
> 
> 时间：2012-06-28T12:36:58.187
> 
> 标签：python

在python中的目录之间查找匹配文件名的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:40:44.860

```
import os
folder1={x for x in os.listdir('some_directory') if os.path.isfile(x)}
folder2={x for x in os.listdir('some_other_directory') if os.path.isfile(x)}
common_files=folder1.intersection(folder2) 
```

# java - 如何识别editText文本中的换行符？

> ID：11244803
> 
> 赞同：3
> 
> 时间：2012-06-28T12:37:00.480
> 
> 标签：java, android, android-edittext

我从多行编辑文本中获取文本。我需要在此文本中识别换行符。怎么做？

```
s.toString().contains("\\n") 
```

返回假。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:40:24.750

有一个错字。它应该是：

```
s.toString().contains("\n") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:42:42.790

尝试：

```
for(int i=0; i<-s.toString().length()-1; i++)
{
if(s.toString().charAt(i)=='\\n') 
    { 
      Log.i("NEW LINE?", "NEW LINE");
    }

} 
```

或`use .contains("\n")`作为

```
if(s.toString().contains("\n")==true)
{
Log.i("NEW LINE?", "NEW LINE");
}
else
{
Log.i("NOT NEW LINE", "NOT NEW LINE");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:48:55.483

我通常通过在 EditText 上定义一个 KeyListener 来做到这一点。

每当您检测到换行符时，您都可以在代码中做任何您想做的事情。

```
userIdInput.setOnKeyListener(new View.OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if ((keyCode == KeyEvent.KEYCODE_ENTER)  {

           // the enter key has been pressed. Do whatever you want to!

            }
            return false;

        }

    }); 
```

**注意：**如果您想告诉操作系统您已经处理了事件，则返回 true ，否则**返回****false**。（但考虑到你的情况，我想你会想要返回 false）

# visual-studio-2010 - Visual Studio 插件：将当前 VS 实例附加到进程

> ID：11244805
> 
> 赞同：1
> 
> 时间：2012-06-28T12:37:04.253
> 
> 标签：visual-studio-2010, visual-studio-extensions

我正在编写一个简单的 VisualStudio 插件来将调试器附加到任何 IIS 进程（w3wp.exe）。这是我第一次编写 VS 插件。我已经使用 VS 模板创建了初始插件，并成功地显示了一个带有显示 w3wp 进程的列表框的 winform。我无法找到有关如何以编程方式将 Visual Studio 的当前实例附加到进程的信息。我已经有了进程ID。有人能指出我正确的方向吗？我查看了 MSDN 网站，但找不到哪个部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:40:45.007

我不确定附加组件，但您可以使用 VS 宏轻松完成：

例如，以下代码会将当前 VS 实例附加到它发现运行的第一个 IISExpress 副本。如果您可以访问附加组件中的[DTE](http://msdn.microsoft.com/en-us/library/envdte.dte.aspx)，那么您可以做类似的事情（我没有编写附加组件，所以我不确定）。

```
Public Sub AttachToIISExpress()
    For Each Process As EnvDTE.Process In DTE.Debugger.LocalProcesses
        If (Process.Name.IndexOf("iisexpress.exe") <> -1) Then
            Process.Attach()
            Return
        End If
    Next
End Sub 
```

# android - 使用相机拍摄图像后，照片未返回到我的屏幕

> ID：11244814
> 
> 赞同：0
> 
> 时间：2012-06-28T12:37:29.357
> 
> 标签：android, cordova, camera, sencha-touch-2

我正在尝试使用相机捕获图像并将其放入 android 屏幕中。我正在使用 sencha touch 2，phonegap 来实现相机功能。它正在捕获图像但不显示在屏幕上。这是我的代码：

在仪表板文件中：

```
{
        xtype : 'image',
        id : 'capturedimage',
        src : '',
        width : 60,
        height: 60,
        width : 200
 },
 {
        xtype : 'container',
        id : 'btncontainer',
        width : 120,
        layout : {
                   type : 'vbox'
              },
        items : [
        {
              xtype : 'button',
              height : 73,
              cls : 'capturebtn',
              id : 'capturebtn',
              width : 100
         },
         {
              xtype : 'button',
              height : 73,
              margin : '10 0 0 0',
              cls : 'choosephotobtn',
              id : 'selectphoto',
              width : 100
          } ]
   }, 
```

在控制器文件中::

```
onCaptureButtonTap: function(button, e, options) {
    /**
     *   phonegap Camera
     */

    navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true });  

       function onFail(message) {
           alert('Failed because: ' + message);
       }

       function onPhotoDataSuccess(imageData) {
           // Uncomment to view the base64 encoded image data
            console.log(imageData);

           // Get image handle
           //
           var smallImage = document.getElementById('capturedimage');

           // Unhide image elements
           //
           smallImage.style.display = 'block';

           // Show the captured photo
           // The inline CSS rules are used to resize the image
           //
           smallImage.src =  imageData;
         }

   } 
```

但它不会到来。任何人都可以帮助我吗..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:09:41.373

这是因为我们现在默认使用 getPicture 的 FILE_URI 返回类型。所以现在你只是得到一个文件的 url，而不是所有的 base64 编码数据。这是一种更好的方法，因为它不使用太多内存。更改此行：

```
image = "data:image/jpeg;base64," + imageData; 
```

至：

```
image.src = imageData; 
```

你应该准备好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:27:17.013

老兄！！尝试在 HTML img src ="" id="" 上设置图像，您将在屏幕上看到该图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:56:29.517

最后，我可以使用以下链接解决此问题：

[解决方案链接](http://www.sencha.com/forum/showthread.php?119274-phonegap-camera)

# ios - 使用区分大小写的比较器对 NSArray 进行排序

> ID：11244815
> 
> 赞同：1
> 
> 时间：2012-06-28T12:37:36.337
> 
> 标签：ios, string, sorting, nsarray

是否有任何方法或方法可以使用敏感比较器对字符串数组进行排序？

我的意思是，如果我有以下数组：

```
abbie
Ann
alice
Boris
Bob
billy 
```

我需要收到：

```
Ann
abbie
alice
Bob
Boris
billy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:41:38.230

```
myArray = [myArray sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

从文档中：

> 返回一个 NSComparisonResult 值，该值指示接收者的词法顺序和使用不区分大小写的本地化比较的给定字符串。

和[Apple 文档页面](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)。

# c# - 收到错误“未找到隐式类型数组的最佳类型”

> ID：11244819
> 
> 赞同：6
> 
> 时间：2012-06-28T12:37:41.110
> 
> 标签：c#, json, implicit

这是我为 jqGrid 创建 Json 响应和定义单元格成员的**新**关键字的代码，我收到以下消息“未找到隐式类型数组的最佳类型”。

```
var resRows = results.Select(record => 
            new 
            {
                id = record.Reference,
                cell = **new** []
                {
                    record.Reference,
                    record.TradeDate.ToShortDateString(),
                    record.Currency1,
                    record.Currency2,
                    record.Notional.ToString(),
                    record.EffectiveDate.ToShortDateString(),
                    record.Quote.ToString()                        
                }
            }).ToArray(); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T13:13:19.587

假设`Reference`,`Currency1`和`Currency2`是字符串，只需将其声明为字符串数组：

```
var resRows = results.Select(record => 

    new 
    {
        id = record.Reference,
        cell = new string []
        {
            record.Reference,
            record.TradeDate.ToShortDateString(),
            record.Currency1,
            record.Currency2,
            record.Notional.ToString(),
            record.EffectiveDate.ToShortDateString(),
            record.Quote.ToString()                        
        }
    }).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-08T10:59:17.500

如果您为 jqGrid 准备数据（如在您的代码中），您可以定义自己的 jsonReader 并跳过单元格数组（[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data)）：

```
jsonReader: {
        root: "rows",
        page: "page",
        total: "total",
        records: "records",
        repeatitems: false,
        userdata: "userdata"
    }, 
```

然后是这样的：

```
var result = new
{
    total = (int)count / grid.PageSize),
    page = grid.PageIndex,
    records = count,
    rows = results.Select(record => 
                    select new
                    {
                        Reference = record.Reference,
                        TradeDate = record.TradeDate,
                        ..
                     }).ToArray()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T18:16:05.920

我遇到了同样的问题，发现如果数组中的所有数据项都是相同的类型（例如 String），那么类型就会被推断出来，编译器不会抱怨**new[]**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-07T03:42:03.447

如果集合的成员是函数，它仍然会给出编译器错误。即使集合中只有**一个功能！**

```
var bads = new []  // COMPILER ERROR
{
    Foo
};

var goods = new Action[]  // NO COMPILER ERROR
{
    Foo
};

//...
public void Foo() { } 
```

# java - 这是一种常见的设计模式，可能是委托模式吗？

> ID：11244822
> 
> 赞同：1
> 
> 时间：2012-06-28T12:37:54.207
> 
> 标签：java, design-patterns

我很好奇这是什么类型的设计模式。

我有一个方法，比如 dao.read()。

```
dao.read(a) {
    b = a.moreFields
    b.readField1();  // I want to move these calls ...
    b.readField2();
    b.readField3();

    a.rootField1();
} 
```

假设我将 read 方法重构为：

```
dao.read(a) {
    marshal(a.b)
    a.rootField1()

    marshal(b) {
      b.readField1();  // I want to move these calls ...
      b.readField2();
      b.readField3();      
    }
} 
```

这是重构为设计模式吗？或者只是重构。我之所以这么问，是因为我经常进行这种类型的重构，并想给它起个名字。如果我将该方法编组移动到委托类，我猜它是委托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:19:42.067

这不是设计模式。充其量是“多态性”，这是 OOP 的基本特征。您可以将处理添加为对象 a 的类 A 和对象 b 的 B 的方法。嘿会分享界面

```
interface Marshall {
  void marshall(<...>);
} 
```

...但是是不同的班级。

一旦你这样做了，显而易见的 DP 将使用包含 A 和 B 的组合，并执行

```
composite.marshall(<....>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:30:41.890

您所拥有的不是设计模式，而是辅助方法。

# sql - 如何在sql中获取总时间

> ID：11244828
> 
> 赞同：-2
> 
> 时间：2012-06-28T12:38:02.210
> 
> 标签：sql, sql-server-2008, tsql, subtotal

我必须得到花在 SQL 上的总时间有什么想法吗？

这只是我查询的一个简单示例。

```
`SELECT 
   A.INDX, B.CLIENTNAME, C.PROJECTNAME, D.NAME, 
   CONVERT(CHAR(10), A.CDATE, 101) [DATE],
   CONVERT(TIME(0), A.START_TIME, 108) [START],
   CONVERT(TIME(0), A.END_TIME, 108) [END],
   CONVERT(TIME(0), (A.END_TIME - A.START_TIME ), 108) [HOURS_WORKED]
FROM 
   LOGSHEET A, CLIENTS B, PROJECTS C, DEVELOPERS D
WHERE B.CLIENTNO = 1
  AND C.PROJECTID = 11
  AND D.USERID = 1` 
```

总数应低于工作小时数

删除了我的日志表

```
`BEGIN CREATE TABLE [dbo].[LOGSHEET](
[INDX] [int] IDENTITY(1,1) NOT NULL,
[CLIENTNO] [int] NULL,
[PROJECTID] [int] NULL,
[USERID] [int] NULL,
[CDATE] [datetime] NULL,
[START_TIME] [datetime] NULL,
[END_TIME] [datetime] NULL) ON [PRIMARY]END GO` 
```

基本上我需要什么

姓名 | 开始时间 | 结束时间 | 工作时间 |

阿杰……| 07:00:00 | 07:15:00 | 00:15:00 |

阿杰.....| 07:00:00 | 07:15:00 | 00:15:00 |

```
 Total:   |00:30:00| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:46:45.493

```
DECLARE @start_time DATETIME, @end_time DATETIME;

SELECT @start_time = '20120621 22:05', @end_time = '20120622 06:47';

SELECT CONVERT(TIME(0), DATEADD(MINUTE, DATEDIFF(MINUTE, @start_time, @end_time), 0)); 
```

结果：

```
08:42:00 
```

因此，如果您在表中有数据，它将非常相似：

```
SELECT CONVERT(TIME(0), DATEADD(MINUTE, 
  DATEDIFF(MINUTE, A.start_time, A.end_time), 0)) AS [HOURS_WORKED]
FROM ... 
```

您应该远离诸如添加和减去日期/时间类型之类的事情，并使用诸如`DATEADD`. 此速记适用于 datetime/smalldatetime，但对于新类型可能会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:56:11.493

好吧，我找到了解决我的问题的方法，只需添加一个字段“MINUTES”并从 c# 运行查询

```
if (e.CommandName == "Stop") {
    int row = int.Parse(e.CommandArgument.ToString());
    string indx = GridView1.Rows[row].Cells[1].Text; 
    string s = null;
    s = "UPDATE LOGSHEET ";
    s += "SET MINUTES = (DATEPART(HOUR,TIME_SPENT)*60)+(DATEPART(MINUTE,TIME_SPENT)) ";
    s += "WHERE INDX = @p0 ";

    String[] pr = new String[1];
    pr[0] = indx; 

    cQ.execSql(s, pr);

  }
} 
```

女巫给了我 int 的分钟数，然后运行

```
protected string GetTotal() {
  string userid = Session["id"].ToString();
  string s = null;

  s = "SELECT SUM(MINUTES) ";
  s += "FROM LOGSHEET ";
  s += "WHERE USERID = @p0 ";

  String[] pr = new String[1];
  pr[0] = userid;

  return cQ.GenQuery(s, pr);
} 
```

其次是

```
label5.text = GetTotal(); 
```

和 KABOOM 完成了所有在几分钟内花费的时间的总和问题已解决

这是一个 C# 程序，但我需要 SQL 查询来解决它

感谢帮助的人！！

# php - 根据前一个字段填充表单数据

> ID：11244830
> 
> 赞同：0
> 
> 时间：2012-06-28T12:38:07.910
> 
> 标签：php, mysql, forms

我有一个表单，我想根据字段 2 数据自动填充最后 2 个字段。这是我的表格。

```
<form method="post">
<table>  <tr><b>Add new data using form below</b></tr>       
 <tr><td>  Keyword:  </td><td> <input type="text" name="keyword" id="keyword"><br></td></tr>
<tr><td> Block?: </td><td><input type="text" name="block" id="block"><br></td></tr>
<tr><td> Phone #:</td><td> <input type="text" name="phone" id="phone"><br></td></tr>
<tr><td> Reason: </td><td> <input type="text" name="reason" id="reason"><br></td></tr>
  <tr><td> </td><td align="left"> <input type="submit" name="submit" value="Submit  Data"></td></tr>
    </table>
      </form> 
```

因此电话和原因将根据输入的块号自动填充。不一定要找人去做..也许只是引导我找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:40:58.677

听起来像是 jQuery 的工作。尝试 #block 字段的模糊功能：

```
$('#block').blur(function() {
 // get value, based on this, populate value of your other fields
}); 
```

[http://api.jquery.com/blur/](http://api.jquery.com/blur/)

这是您无需刷新页面即可根据表单元素输入显示内容的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:44:07.093

将[**JQuery Ajax**](http://api.jquery.com/jQuery.ajax/)与 JQuery 文本框[模糊事件](http://api.jquery.com/blur/)一起使用。

# c# - 有没有更好的方法来处理两个布尔条件的组合？

> ID：11244831
> 
> 赞同：1
> 
> 时间：2012-06-28T12:38:08.270
> 
> 标签：c#, if-statement

我有两个参数的方法：bool1 和 bool2。当然，两者都是布尔值。我必须在代码中处理这些条件的每种组合。有没有比使用嵌套 if / else 更好的方法：

```
if (bool1)
{
    if(bool2)
    {
    }
    else
    {
    }
}
else
{
    if(bool2)
    {
    }
    else
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T12:40:52.493

```
var bothAreTrue = bool1 && bool2;

if(bothAreTrue){

}else if(bool1){

}else if(bool2){

}else{ //none is true

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T12:41:58.423

```
if (bool1 && bool2) { }
else if (bool1) {}
else if (bool2) {}
else {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:44:14.690

为了与“策略高于实现”的理念保持一致（告诉我*你*的代码在做什么而不是它是*如何*做的），你可以通过隐藏布尔值来使它更好地阅读：

```
public enum WhatBool1AndBool2ActuallyMean
{
    WhatItMeansWhenBothAreTrue,
    WhatItMeansWhenOnlyBool1IsTrue,
    WhatItMeansWhenOnlyBool2IsTrue,
    WhatItMeansWhenNeitherAreTrue
}

public WhatBool1AndBool2ActuallyMean GrokMeaning(bool bool1, bool bool2) {...}

...

WhatBool1AndBool2ActuallyMean meaning = GrokMeaning(bool1, bool2);
switch(meaning)
{
   case WhatBool1AndBool2ActuallyMean.WhatItMeansWhenBothAreTrue:
       ...
       break;
   case...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T12:43:06.857

老实说，这个条件可以写成..

```
if (bool1)
{
}

if (bool2)
{
} 
```

因为无论第一个条件的结果如何，第二个条件都会执行。你能用更多的背景解释你的问题，或者举一个真实的例子吗？

蒂姆

# android - 如何在android中导入Zxing IntentIntegrator

> ID：11244837
> 
> 赞同：2
> 
> 时间：2012-06-28T12:38:42.077
> 
> 标签：android

我如何导入 Zxing IntentIntegrator 类以在我的项目中使用它，它是一个库项目吗？

[Zxing IntentIntegrator](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:45:37.713

您需要使用 将其项目编译为 JAR `ant`，然后将该 JAR 添加到`libs/`您的 Android 项目的目录中。[这是一个演示使用的示例应用程序`IntentIntegrator`](https://github.com/commonsguy/cw-omnibus/tree/master/Camera/ZXing)，如果您愿意，欢迎您将 JAR 从该项目的目录中复制出来`libs/`（尽管它可能不是 ZXing 代码的最新和最好的版本）。

# jquery - 选择具有特定宽度的所有子 div 并更新该宽度

> ID：11244841
> 
> 赞同：0
> 
> 时间：2012-06-28T12:39:00.857
> 
> 标签：jquery

我想将宽度为 的所有子 div(parent div id=product_list) 更改`41%`为`31%`.

jquery中有没有办法找到宽度为`41%`（仅在父div id = product_list下）的子div并将宽度更改为`31%`

**注意：**我不能设置代码子 div id bocz 那些是随机变化的。

这是html代码

```
<div id="product_list" style="float:none;">
  <div id="row_4fec46be9210e" style="margin-right: 5px; width:31%; float:left;">
      <div id="row_4fec" style="margin-right: 5px; width:15%; float:left;"></div>
      <div id="row_4fec" style="margin-right: 5px; width:16%; float:left;"></div>
  <div>
  <div id="row_4fec46be92339" style="margin-right: 5px; width:31%; float:left;"></div>
  <div id="row_4fec46be92523" style="margin-right: 5px; width:31%; float:left;"></div>
  <div id="row_4fec46be92523" style="margin-right: 5px; width:41%; float:left;"></div>
  <div id="row_4fec46be92523" style="margin-right: 5px; width:41%; float:left;"></div>
 </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T12:47:10.417

以下代码片段设置`divs`所有层次结构中所有子项的宽度。

```
$("#product_list div").css('width', '31%'); 
```

**更新：** 下面的使用jquery[`children()`](http://api.jquery.com/children/)方法肯定会解决您的问题

```
$("#product_list").children().css('width', '31%'); 
```

描述：获取匹配元素集中每个元素的子元素，可选地由选择器过滤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:42:14.753

使用选择器查询内联 CSS 属性很困难。

仅覆盖每个子 div 的`width`CSS 属性要比尝试仅更改具有“错误”值的那些要简单得多：

```
$('#product_list > div').css('width', '31%'); 
```

选择器`>`中的 确保这只会改变 的直接子代`#product_list`，而不是它们的子代。

# android - android在SurfaceView上翻译ImageView

> ID：11244844
> 
> 赞同：6
> 
> 时间：2012-06-28T12:39:06.733
> 
> 标签：android, animation, imageview, surfaceview, translate-animation

我有两个小部件，ImageView 和 SurfaceView。

SurfaceView 包含相机预览。有时我必须在 SurfaceView 上显示位图（我使用 ImageView 来显示此图像）。没关系。但是，我还必须翻译这个位图。当我开始动画时， ImageView 消失了。

我使用翻译动画：

`TranslateAnimation slide = new TranslateAnimation(fromX, toX, fromY, toY);
slide.setDuration(1000);
slide.setFillAfter(true);
image.startAnimation(slide);` 

我想知道，为什么 ImageView 消失以及如何修复它。有没有人解决过类似的问题？

# multithreading - Delphi - 线程内的计时器生成AV

> ID：11244848
> 
> 赞同：14
> 
> 时间：2012-06-28T12:39:24.753
> 
> 标签：multithreading, delphi, delphi-xe

我有以下第一次正确执行的线程代码。之后，我不时在线程的 Execute 方法上得到一个 AV，例如

> 调试输出：TProcesses.Execute 模块“ListenOutputDebugString.exe”中地址 00409C8C 的访问冲突。读取地址 08070610 Process ListenOutputDebugString.exe (740)

我不知道是什么产生了这个 AV...

```
unit Unit3;

interface

uses
  Classes,
  StdCtrls,
  Windows,
  ExtCtrls,
  SysUtils,
  Variants,
  JvExGrids,
  JvStringGrid;

type
  TProcesses = class(TThread)
  private
    { Private declarations }
    FTimer :  TTimer;
    FGrid  :  TJvStringGrid;
    FJobFinished : Boolean;
    procedure OverrideOnTerminate(Sender: TObject);
    procedure DoShowData;
    procedure DoShowErrors;
    procedure OverrideOnTimer(Sender: TObject);
  protected
    procedure Execute; override;
  public
    constructor Create(aGrid : TJvStringGrid);overload;
  end;

implementation

{TProcesses }

var SharedMessage : String;
    ErrsMess      : String;
    lp            : Integer;

constructor TProcesses.Create(aGrid : TJvStringGrid);
begin
 FreeOnTerminate := True;
 FTimer := TTimer.Create(nil);
 FTimer.OnTimer := OverrideOnTerminate;
 FTimer.OnTimer := OverrideOnTimer;
 FTimer.Interval := 10000;
 FGrid := aGrid;
 inherited Create(false);
 FTimer.Enabled := true;
 FJobFinished := true;
end;

procedure TProcesses.DoShowData;
var wStrList : TStringList;
    wi,wj : Integer;
begin
// FMemo.Lines.Clear;
 for wi := 1 to FGrid.RowCount-1 do
  for wj := 0 to FGrid.ColCount-1 do
   FGrid.Cells[wj,wi] := '';
 try
  try
  wStrList := TStringList.Create;
  wStrList.Delimiter := ';';
  wStrList.StrictDelimiter := true;
  wStrList.DelimitedText := SharedMessage;
//  outputdebugstring(PChar('Processes list '+SharedMessage));
  FGrid.RowCount := wStrList.Count div 4;
  for wi := 0 to wStrList.Count-1 do
    FGrid.Cells[(wi mod 4), (wi div 4)+1] := wStrList[wi];
  Except on e:Exception do
   OutputDebugString(Pchar('TProcesses.DoShowData '+e.Message));
  end;
 finally
  FreeAndNil(wStrList);
 end;
end;

procedure TProcesses.DoShowErrors;
begin
// FMemo.Lines.Add('Error '+ ErrsMess);
 FGrid.Cells[1,1] := 'Error '+ ErrsMess;
 ErrsMess := '';
end;

procedure TProcesses.Execute;
  function EnumProcess(hHwnd: HWND; lParam : integer): boolean; stdcall;
  var
    pPid : DWORD;
    title, ClassName : string;
  begin
    //if the returned value in null the
    //callback has failed, so set to false and exit.
    if (hHwnd=NULL) then
    begin
      result := false;
    end
    else
    begin
      //additional functions to get more
      //information about a process.
      //get the Process Identification number.
      GetWindowThreadProcessId(hHwnd,pPid);
      //set a memory area to receive
      //the process class name
      SetLength(ClassName, 255);
      //get the class name and reset the
      //memory area to the size of the name
      SetLength(ClassName,
                GetClassName(hHwnd,
                             PChar(className),
                             Length(className)));
      SetLength(title, 255);
      //get the process title; usually displayed
      //on the top bar in visible process
      SetLength(title, GetWindowText(hHwnd, PChar(title), Length(title)));
      //Display the process information
      //by adding it to a list box
      SharedMessage := SharedMessage +
        (className +' ;'+//'Class Name = ' +
         title +' ;'+//'; Title = ' +
         IntToStr(hHwnd) +' ;'+ //'; HWND = ' +
         IntToStr(pPid))+' ;'//'; Pid = ' +
         ;//         +#13#10;
      Result := true;
    end;
  end;
begin
if FJobFinished  then
 begin
  try
   FJobFinished := false;
  //define the tag flag
   lp := 0; //globally declared integer
  //call the windows function with the address
  //of handling function and show an error message if it fails
  SharedMessage := '';
  if EnumWindows(@EnumProcess,lp) = false then
   begin
      ErrsMess := SysErrorMessage(GetLastError);
      Synchronize(DoShowErrors);
   end
   else
    Synchronize(DoShowData);
   FJobFinished := true;
  Except on e:Exception do
   OutputDebugString(Pchar('TProcesses.Execute '+e.Message));
  end;
 end
end;

procedure TProcesses.OverrideOnTerminate(Sender: TObject);
begin
 FTimer.Enabled := false;
 FreeAndNil(FTimer);
end;

procedure TProcesses.OverrideOnTimer(Sender: TObject);
begin
  Self.Execute;
end;

end. 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-28T14:48:50.747

我永远不会在线程中使用计时器。[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)相反，我会创建一个系统事件并在线程的执行循环中使用该函数等待它指定的时间。此函数一直等待，直到指定对象（在本例中为事件）处于信号状态或超时间隔过去。

原理很简单，您将在非信号状态下创建事件并将其保持在该状态，直到线程将被终止。这将导致[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)函数每次在函数调用中指定的时间内阻塞线程执行循环时都会超时。一旦您决定终止线程，您只需设置线程的终止标志（您应该尽可能多地询问）并将该事件设置为信号状态，从而导致[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)函数立即返回。

这是一个模拟*线程计时器*的示例（2秒间隔= 2000ms用作[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)函数调用中的第二个参数）：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TTimerThread = class(TThread)
  private
    FTickEvent: THandle;
  protected
    procedure Execute; override;
  public
    constructor Create(CreateSuspended: Boolean);
    destructor Destroy; override;
    procedure FinishThreadExecution;
  end;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    FTimerThread: TTimerThread;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  ReportMemoryLeaksOnShutdown := True;
  FTimerThread := TTimerThread.Create(False);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FTimerThread.FinishThreadExecution;
end;

{ TTimerThread }

constructor TTimerThread.Create(CreateSuspended: Boolean);
begin
  inherited;
  FreeOnTerminate := True;
  FTickEvent := CreateEvent(nil, True, False, nil);
end;

destructor TTimerThread.Destroy;
begin
  CloseHandle(FTickEvent);
  inherited;
end;

procedure TTimerThread.FinishThreadExecution;
begin
  Terminate;
  SetEvent(FTickEvent);
end;

procedure TTimerThread.Execute;
begin
  while not Terminated do
  begin
    if WaitForSingleObject(FTickEvent, 2000) = WAIT_TIMEOUT then
    begin
      Synchronize(procedure
        begin
          Form1.Tag := Form1.Tag + 1;
          Form1.Caption := IntToStr(Form1.Tag);
        end
      );
    end;
  end;
end;

end. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-28T21:36:11.557

`TTimer`不是线程安全的。时期。甚至不要尝试将它与工作线程一起使用。

您`TTimer`在工作线程的构造函数中实例化 ，这意味着它是在创建工作线程的线程的上下文中实例化的，而不是工作线程本身的上下文。这也意味着计时器将在同一个线程上下文中运行，并且`OnTimer`不会在工作线程的上下文中触发事件处理程序（如果有的话），因此您的`OnTimer`处理程序的主体需要是线程安全的。

要`TTimer.OnTimer`在工作线程的上下文中触发事件，您必须实例化`TTimer`线程内部的`Execute()`方法。但这还有另一组陷阱。 `TTimer`使用 创建一个隐藏窗口`AllocateHWnd()`，它不是线程安全的，不能在主线程的上下文之外安全地使用。此外，`TTimer`要求创建线程上下文具有活动的消息循环，而您的线程没有。

要执行您正在尝试的操作，您需要直接切换到使用 Win32 API`SetTimer()`函数（这允许您绕过对窗口的需要），然后将消息循环添加到您的线程（无论您是否使用窗口，您仍然需要它或不），否则切换到不同的计时机制。`CreateWaitableTimer()`您可以通过and使用等待计时器`WaitForSingleObject()`，在这种情况下，您不需要窗口或消息循环。或者您可以使用多媒体计时器`timeSetEvent()`（只需确保您的多媒体计时器回调是线程安全的，因为计时器将在自己的线程中运行）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T13:13:34.877

首先，在构造函数 TProcesses.Create(aGrid : TJvStringGrid); 你有：

```
FTimer.OnTimer := OverrideOnTerminate;
FTimer.OnTimer := OverrideOnTimer; 
```

这里 OverrideOnTerminate 永远不会触发。可能您想捕获线程 OnTerminate。

其次，您在运行状态下创建线程继承 Create(false); 所以 Execute 被自动调用。当 Execute 完成时，它调用 DoTerminate 并销毁线程。

接下来，当计时器触发 OnTimer 时，您多次调用 Execute；这里的线程可能已经不存在。定时器没有被释放，你尝试启动一个死线程。

您需要按照一些规则重写代码：

1.  Execute 应该连续运行。您可以使用 WaitForSingleObject/WaitForMultipleObjects 将线程置于“睡眠”状态。查看 MSDN 帮助。
2.  这些函数有 Timeout 参数，所以你根本不需要 TTimer。

[编辑] 我为你找到了一些有用的样本（对不起，我没有测试过）：

```
procedure TProcesses.Execute;
const  
 _SECOND = 10000000;  
var  
 lBusy : LongInt;  
 hTimer : LongInt;  
 liWaitTime : LARGE_INTEGER;  
begin  
  hTimer := CreateWaitableTimer(nil, True, 'WaitableTimer');
  liWaitTime.QuadPart := _SECOND * YOUR_NumberOfSeconds;
  SetWaitableTimer(hTimer, TLargeInteger(liWaitTime ), 0, nil, nil, False);  
  repeat  
    lBusy := MsgWaitForMultipleObjects(1, hTimer, False, INFINITE, QS_ALLINPUT);
    // CODE EXECUTED HERE EVERY YOUR_NumberOfSeconds
   Until lBusy = WAIT_OBJECT_0;  
   CloseHandle(hTimer);  
end; 
```

你需要稍微调整一下。添加一个要等待的对象：使用 CreateEvent 函数创建的事件。当您需要立即终止线程时，只需调用 SetEvent 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T13:46:35.937

你能检查计时器是真正属于新线程（TProcess）还是主线程？窗口中的计时器由线程“拥有”（就资源管理器而言），而不是进程。如果你的计时器归主线程所有，那么 OnTimer 事件将在主线程的上下文中运行，即使你显式调用 Execute，调用仍将在主线程的上下文中，无论 Execute 是否为恰好是 TThread 后代的“对象过程”。

而且你可能不会明确地调用 Execute 。当线程运行时（在新线程的上下文中）调用此过程。

最好试试这个：在 Execute 中，使用 windows api 函数创建计时器，并无限等待 (SleepEx) 并将 alertable 参数设置为 TRUE。然后计时器确实会在新线程的上下文中触发。或者，在 OnTimer 事件中（在主线程的上下文中），您可以将 APC 过程调用发布到工作线程（您仍然需要在 SleepEx 中等待并将 alertable 设置为 TRUE）。一个完全不同的选择：在 OnTimer 事件中创建线程对象并在 Execute 内部进行正常处理 - FreeOnTerminate 应设置为 true，以便在完成后释放对象。

最后一点，我不确定您是否可以将该 EnumProcess 函数（在“对象过程”中声明的函数???）传递给 WinApi 调用。这很可能导致崩溃。我认为您需要在全局级别声明的函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-12T17:29:00.527

谢谢@TLama，多年后它对我有帮助。我将代码转换为 Delphi 7，也许它可以帮助某人。只需复制并粘贴新应用程序，然后双击 Form1 -> Inspector -> 事件：OnCreate 和 OnDestroy。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TTimerThread = class(TThread)
  private
    FTickEvent: THandle;
    procedure ProcessGUI;
  protected
    procedure Execute; override;
  public
    constructor Create(CreateSuspended: Boolean);
    destructor Destroy; override;
    procedure FinishThreadExecution;
  end;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    FTimerThread: TTimerThread;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  Form1.Caption := 'Init...';//IntToStr(Form1.Tag);
  FTimerThread := TTimerThread.Create(False);
  Form1.Caption := IntToStr(Form1.Tag);
  Form1.Repaint;
  Application.ProcessMessages;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FTimerThread.FinishThreadExecution;
end;

{ TTimerThread }

constructor TTimerThread.Create(CreateSuspended: Boolean);
begin
  inherited;
  FreeOnTerminate := True;
  FTickEvent := CreateEvent(nil, True, False, nil);
end;

destructor TTimerThread.Destroy;
begin
  CloseHandle(FTickEvent);
  inherited;
end;

procedure TTimerThread.FinishThreadExecution;
begin
  Terminate;
  SetEvent(FTickEvent);
end;

procedure TTimerThread.Execute;
begin
  while not Terminated do
  begin
    if WaitForSingleObject(FTickEvent, 3000) = WAIT_TIMEOUT then
    begin
      Synchronize(ProcessGUI);
    end;
  end;
end;

procedure TTimerThread.ProcessGUI;
begin
  Form1.Tag := Form1.Tag + 3;
  Form1.Caption := IntToStr(Form1.Tag);
end;

end. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T13:17:40.630

您的线程正在处理 GUI 控件（假设 TJvStringGrid 是一个 GUI 控件）。这绝不是一个好主意，并且会产生意想不到的结果。没有其他线程，然后主线程应该接触 GUI 的东西。

# memcached - 将“extension=memcached.so”添加到 php.ini 后运行 php-fpm 时出现“浮点异常”

> ID：11244851
> 
> 赞同：0
> 
> 时间：2012-06-28T12:39:29.813
> 
> 标签：memcached, php

将“extension=memcached.so”添加到 php.ini 后运行 php-fpm 时显示“浮点异常”，为什么？

# php - 使用 PHP 更改 HTML 元素的 css 类时出错

> ID：11244852
> 
> 赞同：-2
> 
> 时间：2012-06-28T12:39:29.830
> 
> 标签：php, html, css, class

加载没有任何 GET 参数的页面时出现错误（例如：/login.php），这是我得到的错误：

```
 ( ! ) Notice: Undefined index: err in          C:\wamp\www\GestionImagesPublicitesAvis\login.php on line 57
    Call Stack
    #   Time    Memory  Function    Location
     1  0.0005  144120  {main}( )   ..\login.php:0 
```

这是第 41 行到第 58 行的代码片段：

```
 <input class=
            <?php if(!empty($err))
                {
                    if($err == "up")
                    {
                        echo "\"InputError\"";
                    }
                    else
                    {
                        echo "\" \"";
                    }
                }
                else
                {
                    echo "\" \"";
                } ?> 
            type="text" name="username" onclick="this.value='';" onblur="this.value=!this.value?'login...':this.value;" value=<?php if (($_GET['err'] == 'up')&& (isset($_GET['u']))){echo ("\"" . $_GET['u'] . "\"");}else{ echo "\"login...\"";} ?> id="username"/>
            <input class=<?php if($err=="up"){echo "\"InputError\"";}else{echo "\"\"";}?> type="password" name="password" onclick="this.value='';" onblur="this.value=!this.value?'motdepasse':this.value;" value="motdepasse" id="password"/> 
```

$err 在页面前面定义（第 15 行）：`

```
<?php 
            $err;
                if (isset($_GET['err']))
                {
                    switch ($_GET['err'])
                    {
                    case "up":
                        $err = "up";
                        echo "<p>Error #156</p>";
                        break;
                    }
                }
                else
                {
                    $err=null;
                    echo "<p>Error #157</p>";
                }
            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:43:04.647

在页面顶部（第二个代码示例），您只需确保`$err`is set 而不是`$_GET['err']`. 但是，稍后在第 57 行（第一个代码示例）中，您再次使用`$_GET['err']`.

如果您`$err`在代码中引用，您的错误应该在初始化后得到修复。

所以你的第 57 行应该类似于：

```
type = "text" name="username" onclick="this.value='';" onblur="this.value=!this.value?'login...':this.value;" value=<?php if (($err == 'up')&& (isset($_GET['u']))){echo ("\"" . $_GET['u'] . "\"");}else{ echo "\"login...\"";} ?> id="username"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:44:16.830

你的问题在这里：

```
value=<?php if (($_GET['err'] == 'up') 
```

你应该做

```
value=<?php if ((@$_GET['err'] == 'up') 
```

或者

```
value=<?php if ((isset($_GET['err']) && $_GET['err'] == 'up') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T12:45:31.740

如果 err 不在 url 中，将您的 error_logging 更改为 $_GET['err'] 将抛出通知。

错误报告（E_ALL ^ E_NOTICE）；或者在 php.ini 里面

# regex - 在 Notepad++ 中从逗号或点字符之后的文本字符串中获取特定的子字符串

> ID：11244853
> 
> 赞同：3
> 
> 时间：2012-06-28T12:39:31.387
> 
> 标签：regex, string, split, notepad++

我需要关于 NOTEPAD++ 正则表达式的帮助。这看起来很简单……呃。

我有一个包含 4 列的 xls 文件，其中包含文本字符串（1 列 = 1 种语言）。当我将此文件中的一行复制到 NOTEPAD++ 时，我得到一个长字符串，其中所有语言都用制表符分隔。

```
Example:

This is a example. It's my first time here. Hello everybody. ... Last sentence. TAB Ésto es un ejemplo. Es la primera vez que busco respuesta aquí. Hola a todos. ... Última frase. TAB Substring_German01\. Substring_German02\. Substring_German03\. ... Substring_GermanXX. TAB Substring_French01\. Substring_French02\. Substring_French03\. ... Substring_FrenchXX. 
```

在 NOTEPAD++中用**\n**替换**\t我得到：**

 **```
This is a example. It's my first time here. Hello everybody. ... Last sentence. 
Ésto es un ejemplo. Es la primera vez que busco respuesta aquí. Hola a todos. ... Última frase. 
Substring_German01\. Substring_German02\. Substring_German03\. ... Substring_GermanXX. 
Substring_French01\. Substring_French02\. Substring_French03\. ... Substring_FrenchXX. 
```

如何使用正则表达式获取特定的子字符串？？？

所需结果：

搜索：正则表达式替换：\1

```
This is a example.
Ésto es un ejemplo.
Substring_German01.
Substring_French01. 
```

搜索：正则表达式替换：\2

```
It's my first time here. Hello everybody.
Es la primera vez que busco respuesta aquí.
Substring_German02.
Substring_French02. 
```

搜索：正则表达式替换：\3

```
Hello everybody.
Hola a todos.
Substring_German03.
Substring_French03. 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:31:57.557

*使用以下替换模式：*

`(?:.*?\S[.!?]){0}\s*(.*?\S[.!?])(?:\s.*?TAB|(?!.*TAB)\s.*|\s*$)`

`(?:.*?\S[.!?]){1}\s*(.*?\S[.!?])(?:\s.*?TAB|(?!.*TAB)\s.*|\s*$)`

`(?:.*?\S[.!?]){2}\s*(.*?\S[.!?])(?:\s.*?TAB|(?!.*TAB)\s.*|\s*$)`

`(?:.*?\S[.!?]){3}\s*(.*?\S[.!?])(?:\s.*?TAB|(?!.*TAB)\s.*|\s*$)`

*...ETC。*

*...并将每场比赛替换为* `\1\n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:03:46.893

尝试这个：

```
([^ ][^. ]).*?\. 
```

使用此 RegEx 搜索处理第二个文本框中的内容（将 \t 替换为 \n 后），您应该正确获取子字符串。

它还将避免我猜您不想要的“...”部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:46:18.667

`(.*) (.*) ...`你可以在你的正则表达式中使用括号并访问它们`\1 \2 \n...`

例子`Hello Dude SomeFixedString How Are You`

搜索`(.*)SomeFixedString(.*)`

用。。。来代替`\2 foooo \1`

会给你

`How Are You foooo Hello Dude`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-16T18:51:59.170

为什么不先将 xls 文件另存为 XML 电子表格？然后，您已经将每个单元格放在自己的行上。然后只需编写代码以删除标签。**

# java - 将 Java 泛型转换为 Scala

> ID：11244880
> 
> 赞同：1
> 
> 时间：2012-06-28T12:41:00.533
> 
> 标签：java, scala

对于 Scala 项目的单元测试，我正在编写我自己的简单`javax.sql.DataSource`类，它基本上只是在幕后包装了一个`java.sql.DriverManager`实例。

我只是简单地扩展`javax.sql.DataSource`了 ，并且在大多数情况下让 Eclipse 为所需的方法/函数自动生成存根。

```
class H2DataSource extends javax.sql.DataSource {

  import java.io.PrintWriter
  import java.sql.DriverManager

  var printWriter : PrintWriter

  Class.forName("org.h2.Driver")

  @throws(classOf[SQLException])
  override def getLogWriter() : PrintWriter = {
    printWriter
  }

  @throws(classOf[SQLException])
  override def getLoginTimeout() : Int = {
    // TODO Auto-generated method stub
    0
  }

  @throws(classOf[SQLException])
  override def setLogWriter(printWriter: PrintWriter) = {
    this.printWriter = printWriter 
  }

  @throws(classOf[SQLException])
  override def setLoginTimeout(seconds: Int) = {
    // TODO Auto-generated method stub
  }

  @throws(classOf[SQLException])
  override def isWrapperFor(iface: Class[_]) : Boolean = {
    // TODO Auto-generated method stub
    false
  }

  @throws(classOf[SQLException])
  override def unwrap[T](iface: java.lang.Class[_]) : T = {
    // TODO Auto-generated method stub
    null.asInstanceOf[T]
  }

  @throws(classOf[SQLException])
  override def getConnection() : Connection = {
    DriverManager.getConnection("jdbc:h2:myH2")
  }

  @throws(classOf[SQLException])
  override def getConnection(user: String, password: String) : Connection = {
    DriverManager.getConnection("jdbc:h2:myH2", user, password)
  }

} 
```

但是，我遇到了`unwrap`函数的编译问题......编译器告诉我它不会覆盖任何东西。

这是一个并排比较`unwrap`......第一个用Java自动生成，第二个我自己翻译成Scala。谁能发现我做错了什么，以至于编译器不会将它们识别为等效的？

```
@Overrride
public <T> T unwrap(Class<T> iface) throws SQLException {
   return null;
}

...

@throws(classOf[SQLException])
override def unwrap[T](iface: java.lang.Class[_]) : T = {
  null.asInstanceOf[T]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:11:31.367

尝试：

```
@throws(classOf[SQLException])
override def unwrap[T](iface: Class[T]) : T = {
  null.asInstanceOf[T]
} 
```

# vba - VBA将标题字段代码从图更改为表

> ID：11244884
> 
> 赞同：0
> 
> 时间：2012-06-28T12:41:06.707
> 
> 标签：vba, field, ms-word

我想将所有字幕从一种类型更改为另一种类型。虽然不会意外修改任何其他归档代码。

我想出的过程有两个步骤：首先更改域代码内的文本和它之前的文本。

即从

表 { 序列表 * 阿拉伯语 }

到

图 { 序列图 * 阿拉伯文 }

我已经尝试过手动编辑和更改内部类型不会自动更改字段外部的标签。

要更改我使用查找/替换的文本，效果很好：

```
With Selection.Find
    .Style = ActiveDocument.Styles("Caption")
    .Text = "Figure"
    .Replacement.Text = "Table"
    .Forward = True
    .Wrap = wdFindContinue
End With
Selection.Find.Execute Replace:=wdReplaceAll 
```

自己做字段代码我遇到了问题。以下代码将执行更改：

```
Dim rngTemp As Range
Set rngTemp = ActiveDocument.Fields(1).Code
rngTemp.Text = " SEQ Figure \* ARABIC "
ActiveDocument.Fields(1).Update 
```

但是我不能确保它只更改特定类型的字段，即标题。因为它是代码根据其索引号更改任何字段。

我也很难让它循环使用 for/each 用 i 替换数字。我收到一条错误消息，提示“对象不支持此方法”

我们会非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:04:21.767

基于上面的链接，下面的代码怎么样（未经测试）

```
Dim oField As Field
Dim sCode As String
Dim bFoundOne As String

For Each oField In ActiveDocument.Fields

    If oField.Type = wdFieldSequence Then

        sCode = oField.Code

        If InStr(sCode, "Table") <> 0 Then oField.Code = Replace(sCode, "Table", "Figure")

    End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:01:27.963

谢谢斯科特，这是一个很大的帮助！

仅缺少项目，在代码的替换部分中需要.Text。然而，您仅替换一个单词而不是整个文本的解决方案要优雅得多。

```
If InStr(sCode, "Table") <> 0 Then oField.Code.**Text** = Replace(sCode, "Table", "Figure") 
```

我试图通过将查找/替换文本取出并放入字符串来使代码具有适应性。在其中添加了前面文本的查找/替换代码。并被困在柜台中以备不时之需。

```
Dim oField As Field
Dim sCode As String
Dim TypeFind As String
Dim TypeReplace As String
Dim bFoundOne As String

bFoundOne = 0

'Swap strings around as required
TypeReplace = "Table"
TypeFind = "Figure"
' = "Equation"

'-- Change Field Code --
For Each oField In ActiveDocument.Fields
    If oField.Type = wdFieldSequence Then
        sCode = oField.Code
        If InStr(sCode, TypeFind) <> 0 Then
            bFoundOne = bFoundOne + 1 'counting how many
            oField.Code.Text = Replace(sCode, TypeFind, TypeReplace)
        End If
    End If
Next

'-- Change preceding text --
With Selection.Find
    .Style = ActiveDocument.Styles("Caption")
    .Text = TypeFind
    .Replacement.Text = TypeReplace
    .Forward = True
    .Wrap = wdFindContinue
End With
Selection.Find.Execute Replace:=wdReplaceAll

MsgBox ("Changed: " & bFoundOne) 'show how many when finished 
```

# signalr - SignalR：无法获取属性“开始”的值：对象为空或未定义

> ID：11244885
> 
> 赞同：0
> 
> 时间：2012-06-28T12:41:11.437
> 
> 标签：signalr

在 SignalR 连接对象上调用 start 时出现错误。

我在纯 HTML 页面中使用了 singalr 功能。

以下是页面中包含的代码的和平。

```
<script type="text/javascript" src="Scripts/jquery-1.6.4.js"></script>
<script type="text/javascript" src="Scripts/jquery.signalR-0.5.2.js"></script>
<script src='<%= ResolveClientUrl("~/signalr/hubs") %>'type="text/javascript"></script 
```

`var movieTicketHub = $.connection.movieTicketHub;`

$( 函数 () {

```
 $.connection.hub.start();
        }
    ); 
```

这是我的枢纽

```
namespace MovieReservation 
```

{ public class MovieTicketHub:Hub { public void BookTicket(string no, bool booking) { Clients.SendNotification(no, booking); } } }

错误消息：无法获取属性“开始”的值：对象为空或未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:30:31.503

问题是动态signalR javascript引用的方式。以下更改解决了我的问题。

```
<script src="/signalr/hubs" type="text/javascript"></script> 
```

# java - Android webview - 启用隐私浏览

> ID：11244890
> 
> 赞同：3
> 
> 时间：2012-06-28T12:41:20.770
> 
> 标签：java, android, android-webview

我正在尝试在启用了**隐私浏览**的 android 中创建一个 webview 。

公共WebView（上下文上下文，AttributeSet attrs，int defStyle，布尔privateBrowsing）

自：API 级别 11 使用布局参数和默认样式构造新的 WebView。

**context** - 用于访问应用程序资产的 Context 对象。**attrs** - 传递给父级的 AttributeSet。**defStyle** - 默认样式资源 ID。**privateBrowsing** - 此 WebView 是否将在私有模式下初始化。

谁能用一个简短的例子解释我如何实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:14:13.650

```
 WebView webView = new WebView(this, null, R.id.webView1, true); 
    webView.getSettings().setJavaScriptEnabled(true); 
    webView.loadUrl("google.com");
    Log.v("PrivateBrowsing", "" + webView.isPrivateBrowsingEnabled()); << returns true for me 
```

R.id.webview 应该在您的布局 xml 中。希望这有效...

# java - Web 应用程序需要记住对象状态 - 需要解决方案的建议

> ID：11244893
> 
> 赞同：2
> 
> 时间：2012-06-28T12:41:27.690
> 
> 标签：java, javascript, object, servlets, state

我正在构建一个软件系统，它使用 Javascript 来显示一个可编辑的服务器任务队列（比如程序 xyz 一次在服务器上做一个任务）。

1.  浏览器 UI（OO JavaScript 和 JQuery）
2.  AJAX
3.  [缺少相关技术]
4.  Linux PHP（触发应用程序运行的脚本）

现在 UI 队列工作得很好，但是如果有人关闭他们的浏览器，JavaScript 队列 UI 应用程序的状态就会丢失（我的 linux 机器上的程序应该执行的所有任务）

那么如何实现这一点呢？我是否需要在我的 RedHat 服务器上作为服务运行的 Web 应用程序与我编写的面向对象的 JavaScript 应用程序通信。服务器任务已经通过 PHP 征用。

这可以用PHP吗？我想避免此时拥有数据库。Java/Tomcat 解决方案也浮现在脑海中。你怎么看？感谢您阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:18:57.143

您需要将服务器上的队列状态至少保存到内存，最好也保存到磁盘。为了在内存中表示，创建两个类`Queue`，`QueueEntry`前者由后者组成。如果您只保留到内存，那么如果服务器进程重新启动，您将丢失队列状态 - 因此，如果您想通过重新启动来保持状态，请写入磁盘。假设 Java，做必要的使这些类可[序列化并使用](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)[ReadWriteLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html)写出到磁盘以避免争用。

**更新以反映使用数据库**

而不是序列化，有一个队列条目表。添加一列以指示顺序 - 最有可能插入日期。

# python - Python string.format() 复杂对象类型

> ID：11244895
> 
> 赞同：1
> 
> 时间：2012-06-28T12:41:33.293
> 
> 标签：python

我正在编写一个简单的 Python 脚本，它将采用 json 格式的配置文件，将其应用于模板文件（将文件加载为字符串，然后应用 string.format 方法），然后将输出写入输出文件。

配置文件看起来有点像这样（JSON）：

```
{
    "param1": "param",
    "param2": [
        "list1": "list item 1",
        "list2": "list item 2"
    ]
} 
```

模板文件看起来有点像这样（纯文本）：

```
Param1={param1}
List1={param2[0].list1}
List2={param2[0].list2} 
```

python脚本看起来很像这样（Python）：

```
#! /usr/bin/env python
import sys, json

if len(sys.argv) < 4:
    sys.exit("Invalid arguments")

config_file = open(sys.argv[1])
config_json = json.loads(config_file.read())
config_file.close()

template_file = open(sys.argv[2])
template_data = template_file.read()
template_file.close()

output_data = template_data.format(**config_json)

output_file = open(sys.argv[3], 'w')
output_file.write(output_data)
output_file.close() 
```

Python 解释器错误如下：

```
AttributeError: 'dict' object has no attribute 'list1' 
```

有人可以向我解释如何解决这个问题吗？如果可能的话，我想避免更改 Python 脚本，并倾向于使用正确的语法来引用 param2 对象数组中的属性（如果存在这样的语法）。

# javascript - 鼠标悬停时显示像素数

> ID：11244903
> 
> 赞同：2
> 
> 时间：2012-06-28T12:41:57.627
> 
> 标签：javascript, html

我正在创建自己的网站，并且正在处理该网站的特权，我正在寻找一些可以帮助我做到这一点的代码：

“当我将鼠标指针移到站点中的图像或背景上时，会出现一个光标，显示鼠标经过的每个像素的位置，例如 (23,234)。”

提前致谢

PS：我熟悉PHP、HTML、JavaScript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:44:54.877

HTML

```
 <div id="status">

    </div> 
```

jQuery

```
$(document).ready(function(){
       $(document).mousemove(function(e){
          $('#status').html(e.pageX +', '+ e.pageY);
       }); 
    }) 
```

**[纯Javascript解决方案](http://www.codelifter.com/main/javascript/capturemouseposition1.html)**

> 在使用纯 javascript 解决方案时，您必须关心浏览器的兼容性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:46:29.290

你可以很容易地用 jQuery 获得鼠标位置：

```
$(document).ready(function () {
    $("body").mousemove(function (e) {
        var pX = e.pageX;
        var pY = e.pageY;
        $("#pixels").html("X="+pX+"; Y="+pY);
    });
});
<div id="pixels"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:51:46.507

html

`<div id="position"></div>`

js（你只需要包含 jquery 库）

```
$(文档).ready(函数 () {
    $("#position").hide();

    $("img").mousemove(函数 (e) {
        var pX = e.pageX;
        var pY = e.pageY;
        $("#pixels").html("X: "+pX+"; Y: "+pY);
        $("img").hover( function(){$("#pixels").show();} , function(){$("#pixels").hide();} )
    });
});
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:47:25.547

我想这就是你要找的

[获取鼠标光标位置 - jQuery](http://jquerybyexample.blogspot.com/2010/09/jquery-tip-how-to-get-mouse-cursor.html)

# mongodb - MongoDB 中的共享 mapreduce 结果集合

> ID：11244906
> 
> 赞同：0
> 
> 时间：2012-06-28T12:42:00.763
> 
> 标签：mongodb, mapreduce, mongoid, analytics

我有几个正在运行 mapreduce 的 Mongoid 模型，我想将统一的结果存储在一个`daily_stats`集合中。我的 map & reduce 函数适用于所有 3 个模型，但即使输出 via `collection.mapreduce(map, reduce, {:out => "daily_stats", :raw => true})`，后续 map reduce 操作的结果也会覆盖以前的结果，即使它们没有重叠键：

```
{'_id': "2012-06-01", 'values': {photos: 10}}
{'_id': "2012-06-02", 'values': {photos: 10}} 
```

当后续传递返回时，get 的值`photos`被抛出：

```
{'_id': "2012-06-01", 'values': {comments: 1}}
{'_id': "2012-06-02", 'values': {comments: 6}} 
```

我也尝试与 合并`collection.mapreduce(map, reduce, {:out => {:merge => "daily_stats"}, :raw => true})`，但这似乎也不起作用。

有任何想法吗？

**更新**

每个模型的 map 和 reduce 函数都是这样的：

地图：

```
function() {
    day = Date.UTC(this.created_at.getFullYear(), this.created_at.getMonth(), this.created_at.getDate());
    emit(day, {users: 1});
  }; 
```

减少：函数（键，值）{ var users_added_count = 0;

```
 values.forEach(function(v) {
      users_added_count += parseInt(v['users']) || 0;
    });

    return {users: users_added_count};
  } 
```

以下是有关生成的架构的一些额外信息：

```
{ "_id" : 1337040000000,
 "value" : {
  "apartments" : 280,
  "price" : 1003653,
  "photos" : 83,
  "comments" : 0 } 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:28:33.700

如果您查看 map reduce 的 MongoDB 文档（http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Outputoptions），您会看到默认情况下，MR 输出集合将任何现有集合替换为相同姓名。“合并”将新数据添加到旧的输出集合中，但使用相同的键覆盖文档。

看起来你的关键是日期？如果

```
{'_id': "2012-06-01", 'values': {photos: 10}} 
```

和

```
{'_id': "2012-06-01", 'values': {comments: 1}} 
```

具有相同的密钥，当您运行 MR 时，第二个文档将替换第一个文档。您要么需要指定一个更唯一的键，要么需要有多个输出集合（可能一个用于照片，一个用于评论？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:00:21.643

您可以使用散列键发出，使其在您的模型中唯一

```
emit({day: day, type: '<model class name>'}, 1); 
```

# android - 从扩展 BaseAdapter 的类向新 Activity 传递信息

> ID：11244913
> 
> 赞同：-2
> 
> 时间：2012-06-28T12:42:19.487
> 
> 标签：android

我在一个类中有以下方法，这是一个 ListView 的自定义适配器。

```
convertView.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            String test = availableDevices.get(position).getAddress().toString();   
        }
    }); 
```

该字符串`test`包含设备的 MAC 地址。我的问题是：如何将此变量传递给新活动。在我看来，我不能以通常的方式这样做：

```
Intent intent = new Intent();
            intent.setClass(Activity1.this, Activity2.class);
            startActivityForResult(**,**); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:44:39.263

您可以通过在意图中传递字符串来做到这一点，如下所示：

```
intent.putExtra("Test", test); 
```

其中第一个参数是键，第二个是值。
然后在其他活动中执行：

```
Intent launchingIntent = getIntent();  
launchingIntent.getStringExtra("Test"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:45:57.530

通过新 Activity2 的测试：

```
Intent intent = new Intent();
intent.setClass(Activity1.this, Activity2.class);
intent.putExtra("Test", test);
startActivityForResult(intent,0); // 0 is as requestCode here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:46:20.180

您必须将 Context 对象用于扩展 Activity 之外的类。

```
Intent intent = new Intent();
            intent.setClass(contextObj, Activity2.class);
           intent.putExtra("macadd", //value goes here);
           contextObj.startActivityForResult(intent,requestcode goes here); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T12:46:40.610

设置公共静态字符串测试。然后你就可以访问它持有应用程序。

谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T12:54:13.167

**以这种方式解决了**

```
Intent intent = new Intent(c, Connection.class);
            intent.putExtra("mac", test);
            c.startActivity(intent); 
```

多谢你们！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T12:55:51.937

像这样使用 SharedPreferences

```
 String username = CarName.getText().toString();
         SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
         SharedPreferences.Editor editor = settings.edit();
         editor.putString("Shareusername",username);
         editor.commit(); 
```

在接收端使用这样的东西

//TextView textView = (TextView)findViewById(R.id.lblnames); SharedPreferences 设置 = PreferenceManager.getDefaultSharedPreferences(this); String shareUsername = settings .getString("Shareusername","null"); Vehicle.setText(shareUsername);

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T13:00:29.000

同时设置 adpater 像传入 YourCurrentActivity.this

```
 Adapter adapter=new Adapter(YourCurrentActivity.this); 
```

而在您的***Adpater***类中进行了如下所示的更改

```
 public Activity activity;
 public Adapter(Activity act) {
    activity = act;    
 } 
```

在此使用代码之后，如下所示在您的方法中

```
 Intent intent = new Intent();
  intent.setClass(activity.this, Activity2.class);
  intent.putExtra("Test", test);
  startActivityForResult(intent,0); 
```

# android - 操作栏图标大小

> ID：11244918
> 
> 赞同：66
> 
> 时间：2012-06-28T12:42:40.950
> 
> 标签：android, icons, android-actionbar, actionbarsherlock

根据[动作](https://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html#size11)栏图标，mdpi 屏幕的动作栏图标应为 24 x 24 像素，但 mdpi 的[动作栏图标包](https://developer.android.com/design/downloads/index.html)中的图标为 32 x 32 像素。尺寸也不匹配其他屏幕尺寸。那么哪一个是正确的，动作栏图标应该有什么尺寸呢？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-16T08:32:15.167

--------更新2015.10.17--------

[新的谷歌设计指南](https://www.google.com/design/spec/style/icons.html#icons-system-icons)说：“系统图标以 24dp 显示”，“图标内容仅限于 20 x 20dp 的活动区域，周边有 4px 的修剪”。如：

[![在此处输入图像描述](../Images/14391d10cfa92aa6e1fd70c90075477a.png)](https://i.stack.imgur.com/KDhn5.png) - - - 老的 - - - -

[完整资产，32x32 dp；光学正方形，24x24 dp](http://developer.android.com/design/style/iconography.html#action-bar)

![在此处输入图像描述](../Images/893eb9f3073752780bf6fd8b1ee48a0c.png)

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-06-28T12:45:40.100

**更新：此答案不再有效，请参阅以下答案以获取更多最新指南。**

我相信它们必须是 32x32dp，但实际图像本身应该以 24dpx24dp 为中心。Android 设计网站有[正确的指导方针](http://developer.android.com/design/style/iconography.html#action-bar)。

我已经提交了一个关于这个的[错误报告](http://code.google.com/p/android/issues/detail?id=29295&q=icon%20size&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)，但还没有听到任何消息......

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-10-16T13:50:43.850

我使用 AppCompat ActionBar 进行了更多测试。我发现，ActionBar 会自行执行最小 48dp 触摸目标大小。我还发现，AppCompat ActionBar 仍然需要 32dp 正方形大小的操作栏图标。

**即使使用 Material Design，图标仍然必须遵循“完整资源：32x32 dp；光学正方形：24x24 dp”的规则，才能在操作栏中与其他图标一起具有正确的大小，**如下图（来自 wangqi060934 的答案）所示：

[![在此处输入图像描述](../Images/893eb9f3073752780bf6fd8b1ee48a0c.png)](https://i.stack.imgur.com/aP8dd.png)

**我之前的假设（见下图）认为整个资产大小从 32dp 扩展到 48dp 是不正确的。**48dp 是指触控区域。混淆是由修改后的[Material Icon Spec 文档](https://www.google.com/design/spec/style/icons.html#)引起的，该文档链接在更旧的[ActionBar 文档](http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems)中。

[![在此处输入图像描述](../Images/4618425b047392a8941946d30943b57e.png)](https://i.stack.imgur.com/D75oE.png)

来自[https://www.google.com/design/spec/style/icons.html#icons-system-icons](https://www.google.com/design/spec/style/icons.html#icons-system-icons)

[![在此处输入图像描述](../Images/a5632805157a6c2cc29d89b1d1b2cd63.png)](https://i.stack.imgur.com/egjG0.png)

来自[http://www.google.com/design/spec/layout/metrics-keylines.html#metrics-keylines-sizing-by-increments](http://www.google.com/design/spec/layout/metrics-keylines.html#metrics-keylines-sizing-by-increments)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-02-07T13:10:09.803

使用 Android Studio 图像资源

去：

1.  项目> res --> 右键单击
2.  新>图像资产->图标类型：操作栏和标签图标
3.  下一步>完成。

现在您将拥有正确分辨率的图标。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-10-07T05:52:57.630

如下链接所示的完成的操作栏图标尺寸应该是。 [https://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html](https://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html)

低密度屏幕

```
ldpi (120 dpi) --> 18 x 18 px 
```

中密度屏幕

```
mdpi (160 dpi) --> 24 x 24 px 
```

高密度屏幕

```
hdpi (240 dpi) --> 36 x 36 px 
```

超高密度屏幕

```
xhdpi (320 dpi) --> 48 x 48 px 
```

XX-高密度屏

```
xxhdpi (480 dpi) --> 72 x 72 px 
```

XXX-高密度屏

```
xxxhdpi (640 dpi) --> 96 x 96 px 
```

# facebook - 在 iOS 5 中撰写到 Facebook 的简单方法

> ID：11244921
> 
> 赞同：0
> 
> 时间：2012-06-28T12:42:48.480
> 
> 标签：facebook, ios5, twitter, ios4, ios6

在 iOS 6 中有一个用于 Facebook 的 compose viewcontroller。在它的 iOS 5 中有 tweetsheet。在 ios 4 中，您可以使用[DETweetComposeViewController](https://github.com/doubleencore/DETweetComposeViewController)。我的问题是，有没有像 iOS 5 的 DETweetComposeViewController 这样的东西可以做 Facebook，我在哪里处理登录等等？如果没有，除了 Facebook sdk 的对话功能之外，还有一种简单的方法可以编写到 facebook 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:51:30.707

如果我是你，我会等待 iOS6，或者前往 Apple Developer 的网站并获得 BETA。Facebook 是内置的，向 Facebook 发布内容要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:21:43.217

正如评论中指出的那样，我发现了这一点：http: [//www.cocoacontrols.com/platforms/ios/controls/defacebookcomposeviewcontroller](http://www.cocoacontrols.com/platforms/ios/controls/defacebookcomposeviewcontroller)

您仍然需要实现 facebook SDK，但它会处理外观。

# python - python 2.5.2 因基本使用线程而崩溃

> ID：11244932
> 
> 赞同：1
> 
> 时间：2012-06-28T12:43:27.313
> 
> 标签：python, multithreading, crash

我正在开发一个需要一些线程的程序。我想让自己参与其中并尝试了几个教程。由于某些特殊硬件，我需要坚持使用 Python 2.5.2 (r25:51908)

当我想运行以下代码时

```
import threading

class PrintThread(threading.Thread):
    def run(self):
        print "foobar"

thread = PrintThread()
thread.start() 
```

我收到著名的错误“pythonw.exe 遇到问题...”。这只发生在我的电脑上。当我在不同的 PC 上使用相同的 Python 安装（也使用相同的附加库，如 visa）尝试相同的代码时，它就可以工作了！

我卸载了 Python 并重新安装了它，但仍然出现错误。有什么建议么？

# ruby - 使用包含和扩展的 Ruby 模块混合 - 它是如何工作的？

> ID：11244934
> 
> 赞同：3
> 
> 时间：2012-06-28T12:43:34.640
> 
> 标签：ruby, module, include, extend, mixins

以下是代码片段：

**模块：ActiveSupport::关注**

```
 module ActiveSupport
      module Concern
        def self.extended(base)
          base.instance_variable_set("@_dependencies", [])
        end

        def append_features(base)
          if base.instance_variable_defined?("@_dependencies")
            base.instance_variable_get("@_dependencies") << self
            return false
          else
            return false if base < self
            @_dependencies.each { |dep| base.send(:include, dep) }
            super
            base.extend const_get("ClassMethods") if const_defined?("ClassMethods")
            base.send :include, const_get("InstanceMethods") if const_defined?("InstanceMethods")
            base.class_eval(&@_included_block) if instance_variable_defined?("@_included_block")
          end
        end

        def included(base = nil, &block)
          if base.nil?
            @_included_block = block
          else
            super
          end
        end
      end
    end 
```

**自定义模块：GeneralScopes**

```
 module GeneralScopes
        extend ActiveSupport::Concern

        included do
          scope :reverse_order_by_date, :order => "date DESC"
          scope :recent, lambda { |count| reverse_order_by_date.limit(count) }
        end
    end 
```

**自定义类：用户**

```
 class User < ActiveRecord::Base
      include GeneralScopes
    end 
```

**用法：**

```
 User.recent(5) => Prints the recent five User instances available in database 
```

在上面显示的代码片段的上下文中，我有以下问题：

1)**包括(MODULE_NAME(s))**。 *include 是 Module 的私有实例方法，该方法由**self**隐式*调用。那么**self**在类体中代表什么？在类的实例方法中， **self**代表当前对象。在类的类方法中， **self**代表类的Class对象。

`include <MODULE_NAME>`类主体中的这种语法是如何工作的？

2) 扩展(MODULE_NAME(s))

## 引自 David Flanagan 和 Yukihiro Matsumoto（Oreilly）的“The Ruby Programming Language”，第 7 章类和模块

> *Object.extend.This方法将指定模块的实例方法或模块的实例方法变成接收者对象的单例方法。（如果接收者对象是Class实例，则接收者的方法成为该类的类方法）*

**在上面显示的GeneralScopes**模块的上下文中，我无法理解这一点。

3)

```
 module GeneralScopes
        extend ActiveSupport::Concern

        included do
          scope :reverse_order_by_date, :order => "date DESC"
          scope :recent, lambda { |count| reverse_order_by_date.limit(count) }
        end
    end 
```

我假设模块 GeneralScopes 正在调用 ActiveSupport::Concern 模块的实例方法“included(base = nil, &block)”。从模块主体调用实例方法是如何工作的？哪个对象在什么时候充当接收者

```
 included do
          scope :reverse_order_by_date, :order => "date DESC"
          scope :recent, lambda { |count| reverse_order_by_date.limit(count) }
     end 
```

被执行？

4) ActiveSupport::Concern 模块的实例方法 "included(base = nil, &block)"

```
 def included(base = nil, &block)
          if base.nil?
            @_included_block = block
          else
            super
          end
        end 
```

这里使用了**super**。这个**super**在 User 类或 ActiveSupport::Concern 模块的上下文中工作？**执行super**时，控件转到哪个类？

*如果有人能让我理解所执行的控制流或向我指出任何相关资源来解释与我的问题相关的概念，那将是一个很大的帮助。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:21:48.427

1)`include`使模块的方法可用作类的*实例方法*，`extend`而使模块的方法可用作*类方法*。所以`self`指的是实例或类：

```
module M
  def foo
    puts self
  end
end

class A
  include M
end

A.new.foo # => #<A:0x007fcefa18e270> ('self' refers to the instance)

class B
  extend M
end

B.foo # => B ('self' refers to the class) 
```

2)`extend ActiveSupport::Concern`使`ActiveSupport::Concern`'s 方法可用，`GeneralScopes`以便您可以调用该`included`方法。

3) 块在被用户包含时被调用的( ) 内分配`@_included_block`和评估。从[文档](http://ruby-doc.org/core-1.9.3/Module.html#method-i-append_features)：`append_features``base.class_eval(&@_included_block)``GeneralScopes`

> 当这个模块包含在另一个模块中时，Ruby`append_features`在这个模块中调用，并将其传递给 mod 中的接收模块。

4)`super`指的​​是`ActiveSupport::Concern`' 的父母，所以`Module`'[`included`](http://ruby-doc.org/core-1.9.3/Module.html#method-i-included)被称为。

# android - 安卓杂志架

> ID：11244937
> 
> 赞同：1
> 
> 时间：2012-06-28T12:43:41.383
> 
> 标签：android, android-ui

我必须将应用程序的 UI 创建为存放杂志的架子。我正在使用自定义网格视图，网格元素由具有货架作为背景图像的杂志缩略图组成。

架子.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <GridView
            android:id="@+id/gridView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:numColumns="4" >
        </GridView>

    </LinearLayout> 
```

项目.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:background="@drawable/grid">

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="70dp"
            android:layout_height="100dp"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="41dp"
            android:src="@drawable/book1" />

    </RelativeLayout> 
```

图书馆活动.java

```
public class LibraryActivity extends Activity {

    GridView grid = null;
    ArrayList<Integer> image = new ArrayList<Integer>();
    ImageView thumbnail;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.shelf);
        image.add(R.drawable.book1);
        image.add(R.drawable.book2);
        image.add(R.drawable.book3);
        image.add(R.drawable.book4);

        System.out.println("before adapter");
        grid = (GridView) findViewById(R.id.gridView1);
        CustomAdapter adapter = new CustomAdapter(this, R.layout.item);
        grid.setAdapter(adapter);
    }

    public class CustomAdapter extends BaseAdapter {

        Context mContext = null;
        int mitem = 0;
        LayoutInflater mInflater = null;

        public CustomAdapter(Context context, int item) {

            this.mContext = context;
            this.mitem = item;
            this.mInflater = (LayoutInflater) context
                    .getSystemService(LAYOUT_INFLATER_SERVICE);

        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return image.size();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            if (convertView == null) {

                System.out.println("****CHECKING 2**********");
                convertView = mInflater.inflate(mitem, null);
                System.out.println("****CHECKING 3**********");
                thumbnail = (ImageView) convertView
                        .findViewById(R.id.imageView1);
                System.out.println("****CHECKING 3**********");

            }

            thumbnail.setImageResource(image.get(position));

            return convertView;
        }

    }

} 
```

但是使用此代码仅显示带有杂志的架子。我想显示空架子来占据设备的整个屏幕。我怎样才能做到这一点？？有没有其他方法可以实现货架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:47:12.077

谷歌的 Romain Guy 制作了一个名为[Shelves的伟大项目。](http://code.google.com/p/shelves/)你应该检查一下。

# ember.js - 使用异步回调反序列化

> ID：11244938
> 
> 赞同：2
> 
> 时间：2012-06-28T12:43:41.507
> 
> 标签：ember.js

我重写了反序列化方法，所以我可以从与 id 对应的后端加载一个对象。但是，我获取此对象的方式是异步的。反序列化不等待我的回调并自动返回。

例子：

```
show: Em.Route.extend({
        route: "/:id",
        deserialize: function(router, post) {
            var postController = router.get('postController ');
            postController.findById(post.id, function(post) {
                return post
            });
        } 
```

调用了后端，但反序列化会自动返回。有没有办法在反序列化中使用异步调用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:56:04.293

Luke Melia 通过 jQuery Deferred 对象使用 Promises 就这件事做了一个 NYC Ember 聚会闪电演讲。基本上，Ember 会检测您是否返回 Promise（通过查看对象是否具有`then`方法），并将路由置于`loading`状态（您必须使用反序列化将其声明为状态的兄弟）。在 上`ajax.done`，您可以解决承诺，这会使路由器完全处于数据完全加载的状态。

使用新路由器，您实际上不应该使用 vanilla statemanager 中存在的对异步转换的支持，但您可以使用自动加载状态来实现同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:57:27.527

对于较新版本的 Ember，您应该为加载的数据使用某种代理。

```
 {
      PostController: Ember.ObjectController.extend({
          find: function (id) {
              var ajax = Em.$.ajax(); //call the ajax thing
              ajax.done(Em.$.proxy(function (data) {
                  this.set('content', data);
              }, this));
              return this;
          }
      })
      ...
      Router: Em.Router.extend({
          show: Em.Route.extend({
              deserialize: function(router, post) {
                  var postController = router.get('postController');
                  postController.find(post.id);
                  return postController;
              }
          });
      })
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:13:11.410

这是我发现的，这适用于旧版本的 ember：

在状态/路线的输入功能中，您可以尝试加载数据。enter 函数接收作为转换对象的第二个参数，它有 2 个方法。一个是'async'，它告诉转换它不能继续，直到另一个方法'resume'调用了bean。

所以在示例中：

```
 ...
    enter: function (r, t) {
           t.async();
           r.get('postController').loadResources(t.resume);
    },
    ... 
```

# xquery - 如何将 docx、xlsx 和 txt 文件上传到 Marklogic Server？

> ID：11244942
> 
> 赞同：0
> 
> 时间：2012-06-28T12:43:56.657
> 
> 标签：xquery, marklogic

我有一个文件夹，其中包含 doc、docx、xlsx、pdf 和 txt 文件。我正在使用这个 XQuery 将所有这些文件上传到 Marklogic：-

```
for $d in xdmp:filesystem-directory("C:\uploads")//dir:entry
return 
  xdmp:document-load($d//dir:pathname,
    <options xmlns="xdmp:document-load">
    <uri>{concat("/documents/", string($d//dir:filename))}</uri>
    <permissions>{xdmp:default-permissions()}</permissions>
    <collections>{xdmp:default-collections()}</collections>
    <format>binary</format>
    </options>) 
```

我还为我的数据库安装了内容处理。现在，当我上传 doc 和 pdf 文件时，它们会转换为 xml 和 xhtml 文件。但是 docx、xlsx 和 & txt 不会被转换。有人能告诉我为什么这些文件没有被转换吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:01:53.307

启用 Office OpenXML 提取管道以转换 .docx、.xlsx 和 .pptx 文件。

具有这些扩展名的文件已经是 XML。如果您要将它们的扩展名更改为 .zip，您可以提取并查看这些文件只是由相互关联的 XML 部分组成。

Office OpenXML Extract 管道将解压缩 Office 2007/2010 文件并将其必要部分存储在主文件的同级目录中，类似于其他转换管道。此管道允许您存储原始 Open XML。目前没有进一步转换为 DocBook 的 XHTML。

我知道 .txt 没有转换。这些只是文本文件，将作为文本插入 MarkLogic。您可以通过简单地将文本包装在父元素中并将文件扩展名更改为 .xml 来转换为 XML。

希望这可以帮助。

# javascript - 用jquery比较开始时间和结束时间？

> ID：11244943
> 
> 赞同：6
> 
> 时间：2012-06-28T12:43:59.803
> 
> 标签：javascript, jquery, validation, date, time

这里的代码

```
$(document).ready(function() {
    $('#st').change(function(){
        var st = $('#st').val(); // start time Format: '9:00 PM'
        var et = $('#et').val(); // end time   Format: '11:00 AM' 

        //how do i compare time
            if(st > et)
            {
               alert('end time always greater then start time');
            }
    });
}); 
```

如果我的时间范围如下

```
Start Time Range (listbox) =   12:00 AM To 11:59PM

End Time Range  (listbox)  =   12:00 AM To 11:59PM 
```

那么如何验证开始时间小于结束时间或结束时间大于开始时间

```
Start-time < End-time  OR  End-time > St-time 
```

考虑js代码中的时间格式，由于时间格式无法实现差异逻辑

```
Format: '9:00 AM'
Format: '5:00 PM' 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-15T13:31:32.487

Here i got after investigate this.
The best practice if **Time Format** in **12 Hour-Time** Or **24 Hour-Time**.

```
//start time
var start_time = $("#start_time").val();

//end time
var end_time = $("#end_time").val();

//convert both time into timestamp
var stt = new Date("November 13, 2013 " + start_time);
stt = stt.getTime();

var endt = new Date("November 13, 2013 " + end_time);
endt = endt.getTime();

//by this you can see time stamp value in console via firebug
console.log("Time1: "+ stt + " Time2: " + endt);

if(stt > endt) {
    $("#start_time").after('<span class="error"><br>Start-time must be smaller then End-time.</span>');
    $("#end_time").after('<span class="error"><br>End-time must be bigger then Start-time.</span>');
        return false;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T12:49:27.977

您必须将字符串转换为可以根据时间进行比较的值。`Date.parse`派上用场，虽然你也需要传递一个日期。由于您只关心时间，因此请为两者使用相同的假日期。

```
if(Date.parse("1-1-2000 " + st) > Date.parse("1-1-2000 " + et)) { 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-23T08:35:46.977

You can even try the following jquery rule : **jQuery.validator.addMethod**

```
 jQuery.validator.addMethod("timeValidator",
   function (value, element, params) {
   var val = new Date('1/1/1991' + ' ' + value);       
   var par = new Date('1/1/1991' + ' ' + $(params).val());
   if (!/Invalid|NaN/.test(new Date(val))) {
           return new Date(val) > new Date(par);
       }

       return isNaN(val) && isNaN(par)
           || (Number(val) > Number(par));
}, 'End Time must be greater than Start Time.'); 
```

You can call the rule :

```
$("#txtToTime").rules('add', { timeValidator: "#txtFromTime" }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T13:10:23.143

如果它们是select元素并且select元素中的顺序相同，则比较selectedIndex。无需解析日期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T12:51:57.333

将它们转换为 Date 对象：

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

然后使用通常的比较器：

[用 JavaScript 比较两个日期](https://stackoverflow.com/questions/492994/compare-2-dates-with-javascript)

# c# - 如何动态绑定数据而不在 mvc 3 中写入列名？

> ID：11244945
> 
> 赞同：1
> 
> 时间：2012-06-28T12:44:06.973
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

我之前问过类似的问题：[如何使用 mvc 3 aspx 引擎创建动态网格？](https://stackoverflow.com/questions/11241259/how-to-create-dynamic-grid-using-mvc-3-aspx-engine)（请不要忽略上一个问题）

如果我写下面的代码结果第一张图片：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<IEnumarable<MvcAppGridView.Models.Employee>>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Index
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<%
    var grid = new WebGrid(source: Model, defaultSort: "FirstName", rowsPerPage: 3);
 using (Html.BeginForm())
    {
        %>
        <div>
     <%:  grid.GetHtml(columns: grid.Columns(
                grid.Column(
                   header: "",
                   style: "text-align-center",
                   format: (item) => new HtmlString(Html.ActionLink("Edit", "Edit", new { id = item.id }).ToString() + " | " +
                                                    Html.ActionLink("Details", "Details", new { id = item.id }).ToString() + " | " +
                                                    Html.ActionLink("Delete", "Delete", new { id = item.id }).ToString()
                                                   )
                )
        ))
             %>
        </div>
        <%} %>
</asp:Content> 
```

![在此处输入图像描述](../Images/7fe01d7a01055605972bc29702289bb8.png)

但我想动态地喜欢：

```
 <%:grid.GetHtml(tableStyle:"grid", 
        headerStyle:"head", 
        alternatingRowStyle:"alt",
        columns:grid.Columns(
        grid.Column("FirstName"),
        grid.Column("LastName"),
        grid.Column("Salary"),
          grid.Column(
                   header: "",
                   style: "text-align-center",
                   format: (item) => new HtmlString(Html.ActionLink("Edit", "Edit", new { id = item.id }).ToString() + " | " +
                                                    Html.ActionLink("Details", "Details", new { id = item.id }).ToString() + " | " +
                                                    Html.ActionLink("Delete", "Delete", new { id = item.id }).ToString()
                                                   )

        ))) %> 
```

我的愿望结果是这样的：

![在此处输入图像描述](../Images/1105d3f56998fc2d98986022554ae479.png)

但我不喜欢下面的绑定：

```
 grid.Column("FirstName"),
        grid.Column("LastName"),
        grid.Column("Salary"), 
```

不喜欢！我想自动或动态地获得第二个结果，但如何？

# python - 完成抓取时抓取电子邮件文件

> ID：11244947
> 
> 赞同：1
> 
> 时间：2012-06-28T12:44:08.357
> 
> 标签：python, web-scraping, scrapy

我有一个按时间间隔运行的刮擦。我想在抓取完成后发送一封电子邮件。这样做的最佳方法是什么？

我正在考虑编写一个扩展，但我不知道如何从扩展中访问正在写入输出的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:10:39.473

您是否考虑过挂钩[spider_close](http://doc.scrapy.org/en/latest/topics/signals.html#scrapy.signals.spider_closed)信号并使用[scrapy.mail.MailSender](http://doc.scrapy.org/en/latest/topics/email.html#module-scrapy.mail)服务？

> **scrapy.signals.spider_closed（蜘蛛，原因）**
> 
> [...]
> 
> reason (str) -- 描述蜘蛛关闭原因的字符串。**如果它是因为蜘蛛完成抓取而关闭的，原因是 'finished'**。

# php - PHP IMAP POP 转发脚本发送以某种方式更改的图像附件

> ID：11244956
> 
> 赞同：3
> 
> 时间：2012-06-28T12:44:31.350
> 
> 标签：php, imap, attachment, zend-mail, ning

我正在运行一个脚本来登录 IMAP/POP 邮箱，将内容转发到新的电子邮件地址，然后将它们从邮箱中删除。

它现在几乎可以工作了，除了由于一些奇怪的、莫名其妙的原因，发送到我们 Ning 网站的转发附件图像看起来被压缩，而直接发送到 Ning 的上传电子邮件地址的带有图像附件的电子邮件看起来格式完美。因此，我们转发的电子邮件格式有所不同。好像附件中的图像与原始图像不完全相同。

压缩图像上传示例[http://members.bigmanwalking.com/photo/a-test-photo?context=latest](http://members.bigmanwalking.com/photo/a-test-photo?context=latest)

任何帮助都会很棒......这是一个难题，为什么图像应该通过这个脚本突然失去形状。

```
<?php

      // Change to your mail server
      $host = "pop.1and1.co.uk";

      // Connecting to POP3 email server.
      $connection = imap_open("{" . $host . ":110/pop3/notls}", 'test@bigmanwalking.com', 'xxxx');

      // Total number of messages in Inbox
      $count = imap_num_msg($connection);
      echo $count . " messages found<br />";

      // Read Messages in Loop, Forward it to Actual User email and than delete it from current email account.
      for ($i = 1; $i <= $count; $i++) {
          $headers = imap_headerinfo($connection, $i);

          $subject = $headers->subject;

          $from = $headers->from[0]->mailbox . '@' . $headers->from[0]->host;
          if ($headers->cc[0]->mailbox)
              $cc = $headers->cc[0]->mailbox . '@' . $headers->cc[0]->host;
          $subject = $headers->subject;

          $structure = imap_fetchstructure($connection, $i);
          //$type = $this->get_mime_type($structure);

          // GET HTML BODY
          //$body = $this->get_part($connection, $i, "");

          $raw_body = imap_body($connection, $i);

          $attachments = array();

          if (isset($structure->parts) && count($structure->parts)) {
              for ($e = 0; $e < count($structure->parts); $e++) {
                  $attachments[$e] = array('is_attachment' => false, 'filename' => '', 'name' => '', 'attachment' => '');

                  if ($structure->parts[$e]->ifdparameters) {
                      foreach ($structure->parts[$e]->dparameters as $object) {
                          if (strtolower($object->attribute) == 'filename') {
                              $attachments[$e]['is_attachment'] = true;
                              $attachments[$e]['filename'] = $object->value;
                          } //if (strtolower($object->attribute) == 'filename')
                      } //foreach ($structure->parts[$e]->dparameters as $object)
                  } //if ($structure->parts[$e]->ifdparameters)

                  if ($structure->parts[$e]->ifparameters) {
                      foreach ($structure->parts[$e]->parameters as $object) {
                          if (strtolower($object->attribute) == 'name') {
                              $attachments[$e]['is_attachment'] = true;
                              $attachments[$e]['name'] = $object->value;
                          } //if (strtolower($object->attribute) == 'name')
                      } //foreach ($structure->parts[$e]->parameters as $object)
                  } //if ($structure->parts[$e]->ifparameters)

                  if ($attachments[$e]['is_attachment']) {
                      $attachments[$e]['attachment'] = @imap_fetchbody($connection, $i, $e + 1);
                      if ($structure->parts[$e]->encoding == 3) {
                          // 3 = BASE64
                          $attachments[$e]['attachment'] = base64_decode($attachments[$e]['attachment']);
                      } //if ($structure->parts[$e]->encoding == 3)
                      elseif ($structure->parts[$e]->encoding == 4) {
                          // 4 = QUOTED-PRINTABLE
                          $attachments[$e]['attachment'] = quoted_printable_decode($attachments[$e]['attachment']);
                      } //elseif ($structure->parts[$e]->encoding == 4)
                  } //if ($attachments[$e]['is_attachment'])

                  if ($attachments[$e]['is_attachment']) {
                      $filename = $attachments[$e]['filename'];
                      $filename = $attachments[$e]['name'];
                      $filecontent = $attachments[$e]['attachment'];
                  } //if ($attachments[$e]['is_attachment'])
              } //for ($e = 0; $e < count($structure->parts); $e++)
          } //if (isset($structure->parts) && count($structure->parts))

          echo "<pre>";
          echo "From: " . $headers->Unseen . "<br />";
          echo "From: " . $from . "<br />";
          echo "Cc: " . $cc . "<br />";
          echo "Subject: " . $subject . "<br />";
          echo "Content Type: " . $type . "<br />";
          echo "Body: " . $body . "<br />";

          $mail = new Zend_Mail();

          $mail->settype(Zend_Mime::MULTIPART_MIXED);

          for ($k = 0; $k < count($attachments); $k++) {
              $filename = $attachments[$k]['name'];
              $filecontent = $attachments[$k]['attachment'];

              if ($filename && $filecontent) {
                  $file = $mail->createAttachment($filecontent);
                  $file->filename = $filename;
              } //if ($filename && $filecontent)
          } //for ($k = 0; $k < count($attachments); $k++)

          $mail->setFrom($from);
          $mail->addTo('test@members.bigmanwalking.com');
          if ($cc)
              $mail->addCc($cc);
          $mail->setSubject($subject);
          $mail->setBodyHtml($body);
          $mail->send();

          // Mark the email messages once read
          imap_delete($connection, $i);

      } //for ($i = 1; $i <= $count; $i++)
      // Delete all marked message from current email account.

      imap_expunge($connection); 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T22:58:55.657

找到了答案。它是检测附件的 Mime 类型，并将 Mime 类型添加到外发电子邮件的附件中。完成后，照片以正确的比例出现在宁身上。

我需要的帮助在这里[http://php.net/manual/en/function.imap-fetchstructure.php](http://php.net/manual/en/function.imap-fetchstructure.php)

# javascript - 使用 JavaScript 在 5 秒内更改 5 张图像

> ID：11244962
> 
> 赞同：0
> 
> 时间：2012-06-28T12:44:50.257
> 
> 标签：javascript, setinterval

我是 JavaScript 新手，我不明白我应该如何在 5 个不同的 gif 图像之间进行更改。任务如下：

第 11 章的 Projects 文件夹包含音乐会系列的五个广告图像，从 Concert1.gif 到 Concert5.gif。创建一个脚本，循环浏览图像并将每个图像显示 5 秒钟。将文档另存为 ConcertAds.html。

这是我到目前为止的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Concert Ads</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">
/* <![CDATA[ */
var concertads = new Array(5);
    concertads[0] = new Image();
    concertads[1] = new Image();
    concertads[2] = new Image();
    concertads[3] = new Image();
    concertads[4] = new Image();

    concertads[0].src = "concert1.gif";
    concertads[1].src = "concert2.gif";
    concertads[2].src = "concert3.gif";
    concertads[3].src = "concert4.gif";
    concertads[4].src = "concert5.gif";
var completeAds;
var currImgIndex = 0;
var maxImgIndex = concertads.length-1; 
function concertAd() {
    if (completeAds) {
        completeAds.src = concertads[0].src;
        ++currImgIndex;
    if (currImgIndex > maxImgIndex) {
        currImgIndex = 0;
    }
}
}
function initImgCycle(adsID) {
    completeAds = document.getElementByID(adsID)
    if (completeAds) {
        setInterval("cycle()", 5000);
        }
    }
/* ]]> */
</script>
</head>
<body onload="initImgCycle('adBanner');">
<img src="concert1.gif" id="adBanner" alt="Concert Ads" />
</body>
</html> 
```

我会很感激任何帮助，我真的很困惑。感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:20:17.360

所以它会像下面这样：

```
`<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style type="text/css">
    </style>
    <title>Goselin Greeting cards</title>
<script type="text/javascript">
/* <![CDATA[ */
imgCounter=0;
    function cycle(){
            if(imgCounter<5){
            imgCounter++;
        document.getElementById("imgX").src="concert" + imgCounter + ".gif";    
            setTimeout("cycle();", 5000);
    }
}

/* ]]> */
</script>
</head>
<body onload="initImgCycle('adBanner');">
<h1>Consert Series</h1>
<img id="imgX" src="" alt="img"/>
</body>
</html> 
```

我试图弄清楚同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:07:11.870

目前尚不清楚您是希望它们每个同时显示 5 秒，还是让它们一个接一个地显示 5 秒。我和第一个一起去了。

```
(function() {

  var images = [
    new Image(), new Image(), new Image(), new Image(), new Image()
  ];

  images[0].src = 'http://bit.ly/sbK2Ub';
  images[1].src = 'http://bit.ly/lMMo0n';
  images[2].src = 'http://bit.ly/LFtGyc';
  images[3].src = 'http://bit.ly/MY3skL';
  images[4].src = 'http://bit.ly/M8iQk3';

  function show( elem ) {
    document.body.appendChild( elem );
  }
  function remove( elem ) {
    document.body.removeChild( elem );
  }

  window.onload = function() {
    images.forEach(function(a, b) {
      show( images[b] );
    });

    window.setTimeout(function() {
      images.forEach(function(a, b) {
        remove( images[b] );
      });
    }, 5000);

  };

})(); 
```

这是一个使用不同图像的演示（单击“渲染”运行代码）：http: [//jsbin.com/akoqek/2/edit](http://jsbin.com/akoqek/2/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:20:47.893

```
imgCounter=0;

function cycle(){
    if(imgCounter<5){
    imgCounter++;
    document.getElementById("imgX").src="concert" + imgCounter + ".gif";    
    setTimeout("cycle();", 5000);
    }
}
cycle(); 
```

一定要有一个

```
<img id="imgX" src="" alt="img"/> 
```

或 html 中的类似内容

# jquery - 如果我在普通网站上使用 jquery mobile 有什么问题吗？

> ID：11244976
> 
> 赞同：0
> 
> 时间：2012-06-28T12:45:34.843
> 
> 标签：jquery, jquery-mobile

如果我在普通网站上使用 jquery mobile 有什么问题吗？我的意思是，关于功能，或者是否会覆盖普通 jquery 的任何功能。

我在某处读到 jquery mobile 是基于 jQuery 的，我想知道同时使用两者时它会如何影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:48:34.547

jQuery 是一个 Javascript 框架，jQuery Mobile（令人困惑）是一个使用 jQuery 的 UI 框架。它用于开发移动用户界面，但您肯定可以使用它开发任何网站！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:05:14.453

当然，这在功能上是可行的，但将 JQuery mobile 用于普通网站并不是一个好主意。JQuery Mobile 专为屏幕空间有限的移动设备而设计，专为触控而设计。生成的网站在桌面浏览器中看起来很难看。

您需要了解什么是 JQuery mobile：

*   JQuery mobile (JQM) 是一个用于创建移动 Web 应用程序的框架。移动屏幕的屏幕尺寸有限，JQM 负责布局和内容。
*   JQM 建立在 JQuery 之上。JQuery 是一个用于操作 DOM 的 JavaScript 框架，它处理了底层浏览器的差异。它提供了优雅的方式来操作 DOM。

# linux - Linux 从零开始报错 v7.1 ch6.9 Glibc

> ID：11244980
> 
> 赞同：1
> 
> 时间：2012-06-28T12:45:46.060
> 
> 标签：linux, glibc, linux-from-scratch

所以我试图在 lfs 构建上配置 glibc2.14.1（步骤 6.9）。当我收到以下错误时，我会配置它：

```
 root:/home/glibc-build# ../glibc-2.14.1/configure --prefix=/usr --disable-profile  --enable-add-ons --enable-kernel=2.6.25 --libexecdir=/usr/lib/glibc
    ../glibc-2.14.1/configure: line 30: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 75: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 56: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 84: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 137: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 242: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 195: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 195: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 195: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 195: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 195: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 195: /dev/null: Permission denied
    ../glibc-2.14.1/configure: line 242: /dev/null: Permission denied
    ../glibc-2.14.1/configure: This script requires a shell more modern than all
    ../glibc-2.14.1/configure: the shells that I found on your system.
    ../glibc-2.14.1/configure: Please tell bug-autoconf@gnu.org and glibc about your
    ../glibc-2.14.1/configure: system, including any error possibly output before this
    ../glibc-2.14.1/configure: message. Then install a modern shell, or manually run
    ../glibc-2.14.1/configure: the script under such a shell if you do have one. 
```

关于此错误原因的任何想法？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:56:04.900

我在这里发现了同样的错误：

[http://archive.linuxfromscratch.org/mail-archives/lfs-dev/2000-August/005683.html](http://archive.linuxfromscratch.org/mail-archives/lfs-dev/2000-August/005683.html)

问题是 /dev/null 属于不存在的用户/组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T17:01:52.607

每当出现 Permission Denied 时，这意味着您必须执行前面带有 sudo 的语句。只需使用 su - 更改为 root 用户，然后写 sudo 后跟任何你想写的命令。在询问时提供 root 的密码。

# android - 从 android 代码启用/禁用使用数据包

> ID：11244998
> 
> 赞同：3
> 
> 时间：2012-06-28T12:46:36.700
> 
> 标签：android

我想从我的应用程序中禁用或启用在 android 设备中使用数据包，我在以下代码中使用了该数据包：

```
try {
        Method dataConnSwitchmethod;
        Class telephonyManagerClass;
        Object ITelephonyStub;
        Class ITelephonyClass;

        TelephonyManager telephonyManager = (TelephonyManager) NetworkMonitorDemoAppActivity.this.getSystemService(Context.TELEPHONY_SERVICE);

        if (telephonyManager.getDataState() == TelephonyManager.DATA_CONNECTED) {
            isEnabled = true;
        } else {
            isEnabled = false;
        }

        telephonyManagerClass = Class.forName(telephonyManager.getClass().getName());
        Method getITelephonyMethod = telephonyManagerClass.getDeclaredMethod("getITelephony");
        getITelephonyMethod.setAccessible(true);
        ITelephonyStub = getITelephonyMethod.invoke(telephonyManager);
        ITelephonyClass = Class
                .forName(ITelephonyStub.getClass().getName());

        if (isEnabled) {
            dataConnSwitchmethod = ITelephonyClass.getDeclaredMethod("disableDataConnectivity");
        } else {
            dataConnSwitchmethod = ITelephonyClass.getDeclaredMethod("enableDataConnectivity");
        }
        dataConnSwitchmethod.setAccessible(true);
        dataConnSwitchmethod.invoke(ITelephonyStub);
    } catch (Exception e) {
        System.out.println("error is occured in uses data packet enable & disable :-"+e.getMessage());
    } 
```

但是这段代码不能正常工作。我的朋友可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:03:38.150

我认为您在 SO 答案中引用了此处的代码[https://stackoverflow.com/a/4304110/582571](https://stackoverflow.com/a/4304110/582571)

在上面的链接中评论提到“这在 Gingerbread 2.3+ 上不起作用”在另一个 SO 答案中查看详细说明[https://stackoverflow.com/a/5095956/582571](https://stackoverflow.com/a/5095956/582571)

所以最好不要制作任何带有隐藏 API 的应用程序