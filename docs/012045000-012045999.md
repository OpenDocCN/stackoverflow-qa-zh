# StackOverflow 问答 12045000-12045999

# php - 需要弄清楚如何在 PHP 中进行倒计时

> ID：12045002
> 
> 赞同：0
> 
> 时间：2012-08-20T20:54:39.377
> 
> 标签：php

我有一个时间戳，想向我的用户显示...上次发送时间是 1 天 23 小时 54 分 33 秒前。我知道如何获得时间差异...

```
$timePast = '2012-08-18 22:11:33';
$timeNow = date('Y-m-d H:i:s');
// gives total seconds difference
$timeDiff = strtotime($timeNow) - strtotime($timePast); 
```

现在我被卡住了，无法像上面那样显示时间。x 天，x 小时，x 分钟，x 秒，其中所有 x 的总和应为总秒时差。我知道以下...

```
$lastSent['h'] = round($timeDiff / 3600);
$lastSent['m'] = round($timeDiff / 60);
$lastSent['s'] = $timeDiff; 
```

需要你帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:41:15.447

# 不要手动做日期数学！

PHP 可以使用[`DateTime`](http://php.net/datetime)和[`DateInterval`](http://php.net/dateinterval)类为您计算出所有的日期/时间数学。

### 获取两个日期之间的间隔

```
$timePast = new DateTime('2012-08-18 22:11:33');
$timeNow  = new DateTime;

$lastSent = $timePast->diff($timeNow);
// $lastSent is a DateInterval with properties for the years, months, etc. 
```

### 格式化示例

获取格式化字符串的函数可能如下所示（尽管这只是众多方法中的一种超级基本方法）。

```
function format_interval(DateInterval $interval) {
    $units = array('y' => 'years', 'm' => 'months', 'd' => 'days',
                   'h' => 'hours', 'i' => 'minutes', 's' => 'seconds');
    $parts = array();
    foreach ($units as $part => $label) {
        if ($interval->$part > 0) {
            $parts[] = $interval->$part . ' ' . $units[$part];
        }
    }
    return implode(', ', $parts);
}

echo format_interval($lastSent); // e.g. 2 days, 24 minutes, 46 seconds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:21:42.093

我采用了 Kalpesh 的代码，并通过使用`floor`而不是`round`计算一天中的不同摩擦来使其工作。它是这样的：

```
function timeAgo ($oldTime, $newTime) {
    $timeCalc = strtotime($newTime) - strtotime($oldTime);
    $ans = "";
    if ($timeCalc > 60*60*24) {        
        $days = floor($timeCalc/60/60/24);
        $ans .=  "$days days"; 
        $timeCalc = $timeCalc - ($days * (60*60*24));        
    }
    if ($timeCalc > 60*60) {
        $hours = floor($timeCalc/60/60);
        $ans .=  ", $hours hours"; 
        $timeCalc = $timeCalc - ($hours * (60*60));        
    }
    if ($timeCalc > 60) {
        $minutes = floor($timeCalc/60);
        $ans .=  ", $minutes minutes"; 
        $timeCalc = $timeCalc - ($minutes * 60);        
    }    
    if ($timeCalc > 0) {
        $ans .= "and $timeCalc seconds";        
    }
    return $ans . " ago";
} 
$timePast = '2012-08-18 22:11:33';
$timeNow = date('Y-m-d H:i:s');    
$t = timeAgo($timePast, $timeNow);
echo $t; 
```

**输出**：
1 天 16 小时 11 分 18 秒前

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T20:58:42.487

在这之后：

```
$timeDiff = strtotime($timeNow) - strtotime($timePast); 
```

添加：

```
if ($timeDiff > (60*60*24)) {$timeDiff = floor($timeDiff/60/60/24) . ' days ago';}
else if ($timeDiff > (60*60)) {$timeDiff = floor($timeDiff/60/60) . ' hours ago';}
else if ($timeDiff > 60) {$timeDiff = floor($timeDiff/60) . ' minutes ago';}
else if ($timeDiff > 0) {$timeDiff .= ' seconds ago';}

echo $timeDiff; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T21:01:40.627

你需要很多[if's](http://uk3.php.net/manual/en/control-structures.if.php)，[模数 (%)](http://php.net/manual/en/language.operators.arithmetic.php)，[floor()](http://uk3.php.net/manual/en/function.floor.php)（不是 round()）

或[谷歌](https://www.google.co.uk/search?q=php%20human%20readable%20time%20difference);-)

# sproutcore - 为什么这不起作用？（SproutCore 和 Todos 示例）

> ID：12045008
> 
> 赞同：0
> 
> 时间：2012-08-20T20:55:00.457
> 
> 标签：sproutcore

我正在尝试修改 Todos 示例以更好地理解框架。

我正在尝试修改 todosController 以添加一个“已完成”计算属性，该属性返回所有已完成的 todos。最重要的是，我正在尝试更新“areAllCompleted”属性。

我有这段代码，当“完成”发生变化时，它不会更新“areAllCompleted”。

```
TodosThree.todosController = SC.ArrayController.create({
    completed: function(){
        if(this.get('content')){
            return this.get('content').find(
                SC.Query.local(
                    TodosThree.Todo,
                    'isCompleted = true'
                )
            );
        }
        else {
            return [];
        }
    }.property('content').cacheable(),
    areAllCompleted: function (k, v) {
        console.log('get');
        if (v !== undefined) {
            this.setEach('isCompleted', v);
        }

        return this.getPath('completed.length') === this.get('length');
            # This .property definition doesn't work with .*completed.length .. ?
    }.property('length','.*completed.length')
}); 
```

但是，如果我稍微更改代码以添加绑定，它会起作用：

```
TodosThree.todosController = SC.ArrayController.create({
    completed: function(){
        if(this.get('content')){
            return this.get('content').find(
                SC.Query.local(
                    TodosThree.Todo,
                    'isCompleted = true'
                )
            );
        }
        else {
            return [];
        }
    }.property('content').cacheable(),
                                    # For some reason, this binding works ...
    completedLengthBinding: SC.Binding.oneWay('.*completed.length'),
    areAllCompleted: function (k, v) {
        console.log('get');
        if (v !== undefined) {
            this.setEach('isCompleted', v);
        }

        return this.getPath('completed.length') === this.get('length');
            # If I reference the binding that references completed, this now works ...
    }.property('length','completedLength')
}); 
```

为什么这种微妙的差异会突然使它起作用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:51:49.300

当你使用`.property()`方法时，参数应该是对象的直接属性；因此，它不会扩展您传递的属性路径 ( `.*completed.length`)。当您设置绑定时，您基本上是在告诉 SproutCore 您希望将路径 ( `.*completed.length`) 绑定到对象的属性，这就是第二个有效的原因；因为它已成为一个简单的属性。

由于您是根据完成来设置这两个，因此您可以这样做的另一种方法是使用单个函数，`.observes()`该函数**确实**遵循属性路径，但这有点复杂。以下是我可能会如何处理这个问题：

```
/*
 * Note that using a store.find will auto-update when new todos are pushed
 * into the store, so there is no need to reset this every time.
 */
completed: TodosThree.store.find(
  SC.Query.local('TodosThree.Todo', 'isCompleted = true')
),

/*
 * Go ahead and grab the length so we can use it as a dependent property below
 */
completedLengthBinding: '*completed.length',

/*
 * Create the property function
 */
allAreCompleted: function(key, value) {
  if (value !== undefined) {
    this.setEach('isCompleted', value);
  }

  return this.everyProperty('isCompleted');
}.property('completed', 'completedLength') 
```

A couple of things to note: since you're wanting to call `allAreCompleted()` and pass a value, you **DO** want this as a property, not just an observer. You could technically do it with a function that acts as both an observer and a property updater, but I think this is more clear.

Also, note the use of the [`everyProperty()`](http://docs.sproutcore.com/symbols/SC.PickerPane.html#doc=SC.Enumerable&method=everyProperty&src=false) method, which will iterate over each todo and ensure that the passed property is true for all todos.

Hope this helps! Please ask if you need clarification on anything :-D

# android - 对需要 Google 电子钱包商家帐户来启用应用内结算感到困惑

> ID：12045017
> 
> 赞同：2
> 
> 时间：2012-08-20T20:55:23.047
> 
> 标签：android, in-app-billing, android-pay

我几乎只发现“您必须拥有 Google 电子钱包商家帐户才能使用 Google Play 应用内结算”。但我不明白......这是为了什么？我真的需要这个吗？它有什么作用？我如何以及在哪里得到一个，它需要任何费用吗？谷歌钱包网站似乎只有实际商店的信息，而不是应用程序。

我想要的是我的应用程序有一个免费的、有限的版本，但用户可以按月付费以访问全部功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:01:56.713

我发现他们所说的“Google Wallet 商家”只是“Google Checkout”。“谷歌钱包”有两个部分，应用程序和在线。该应用程序仅用于 NFC 购买，您不能使用 Google Wallet 应用程序上的任何预付钱在 Google Play 上购买任何东西。另一部分是谷歌运行的支付系统。第二部分以前称为 Google Checkout，但几个月前，他们将 Google Checkout 和 Google Wallet 系统合并为一个名称，以保持其货币系统的一致性。

TL;DR - 您不需要 Google 电子钱包即可使用应用内结算。您需要 Google Checkout，它更易于注册且免费。

# c# - 存储当前 URL 的有效方法

> ID：12045021
> 
> 赞同：0
> 
> 时间：2012-08-20T20:55:37.433
> 
> 标签：c#, asp.net, asp.net-1.1

我正在开发一个没有链接面包屑导航的旧版 ASP.NET 1.1 应用程序。我的意思是，面包屑存在，但没有超链接。

当前的要求之一是正确链接所有面包屑。每个页面都是基于三个或四个查询字符串参数从数据库中提取的报告，显示它的数据网格是在运行时动态构建的。

我没有太多选择来实施某种站点地图系统。此外，仅仅插入站点地图系统并不容易，因为没有简单的页面流模式。

所以我只是根据现有条件进行了大量的字符串构建并适当地注入链接。

结果，我经常使用这个片段：

```
HttpUtility.UrlDecode(Request.Url.AbsoluteUri); 
```

我必须在超过 25 个地方使用它。这显然是非常不健康的。

我是否应该在辅助类中放入一个静态辅助方法并调用它`currentContextURL`或类似的东西？还是有更好的方法来实现这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:12:18.777

如果存在现有的面包屑链接并且您受限于 .NET1.1，我会坚持使用 helper。您可以实现类似链表的类并在其中维护链接并从该实现生成面包屑

# php - 使用 PHP 连接到远程 MSSQL 服务器

> ID：12045022
> 
> 赞同：0
> 
> 时间：2012-08-20T20:55:52.920
> 
> 标签：php, sql-server

我需要使用 PHP 连接到远程数据库服务器来查询和返回数据。

到目前为止，我已经尝试过这个：

```
$connection = mssql_connect('[redacted]:1433\SQLEXPRESS', '[redacted]', '[redacted]'); 
```

和

```
$connection = mssql_connect('[redacted]', '[redacted]', '[redacted]'); 
```

两者都导致 FALSE，但没有抛出错误。我错过了什么？它甚至似乎都没有尝试连接（失败非常快）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:06:45.260

通常这与连接代码无关，而与外部数据库服务器的设置有关。首先试试这个： `$connection = mssql_connect('[redacted]\SQLEXPRESS', '[redacted]', '[redacted]');` 但是你正在连接到默认情况下不接受任何传入 TCP/IP 请求的 SQL Express，所以如果这不起作用，你需要检查配置（或者如果它真的是外部的，有DBA 检查）并确保：

*   它被设置为接受 TCP/IP 请求，
*   防火墙允许该 IP 和端口通过，并且
*   您的请求发出的特定 IP 地址正在接受请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T17:08:10.100

AlexC 的回答很好，但我最终将 MSSQL 数据库转换为 MySQL 并使用 Migrate 框架 (Drupal) 执行迁移。

# xcode - 将静态库添加到 xcode 不起作用

> ID：12045024
> 
> 赞同：0
> 
> 时间：2012-08-20T20:56:03.443
> 
> 标签：xcode, macos, xcode4, static-libraries, .a

我在我的 OSX 项目中添加了一个静态库及其头文件，并将它们添加到 Build Phases 下的 Link Binary With Libraries。

Xcode 给了我以下警告

忽略文件/Users/sd1212/Desktop/OpenGLPlugin/libClientLib.a，文件是为存档而构建的，它不是被链接的架构（x86_64）

并且不会让我调用任何库方法。我以为我有架构问题，所以我在网上查看...可能说明不清楚或什么，但我认为我已经添加了x86_64架构，我将“仅构建活动架构”更改为“否。 "

这是项目架构设置的屏幕截图

![Xcode 截图](../Images/79a23658410387f615ecce93ac2673e2.png)

请帮忙！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:39:12.387

查看构建静态库的项目以及链接到它的项目，并确保它们都构建了正确的架构。不仅要考虑您在屏幕截图中突出显示的有效架构行，还要考虑架构设置。得到建造的是两条线中的那些。

# ios - 从 iPhone 库中加载视频，修改帧并实时播放

> ID：12045027
> 
> 赞同：3
> 
> 时间：2012-08-20T20:56:20.220
> 
> 标签：ios, xcode, opencv, avfoundation, core-video

我正在寻找一个技巧来为 iPhone/iPad 开发一个能够处理视频的应用程序（为简单起见，我们只考虑存储在设备上的本地文件）并实时播放。例如，您可以选择任何电影并选择“旧电影”过滤器，并希望它像在旧灯电视上一样。

为了使这个想法成为现实，我需要实现两个关键功能：

1）从电影文件中抓取帧和音频流并访问单独的帧（我对 BGRA 中的原始像素缓冲区或至少 YUV 颜色空间感兴趣）。

2）以某种方式显示处理过的帧。我知道可以将处理后的帧渲染为 OpenGL 纹理，但我希望拥有更强大的播放控件组件。是否有任何类型的媒体播放器支持播放自定义图像和音频缓冲区？

处理功能完成并且速度很快（小于一帧的持续时间）。

我不是要求现成的解决方案，但欢迎任何提示！

**回答**

***帧抓取***。似乎获取视频和音频帧的唯一方法是使用 AVAssetReader 类。尽管不建议将其用于实时抓取，但它确实可以完成工作。在我对 iPad2 的测试中，抓取单帧大约需要 7-8 毫秒。在视频中寻找是一个棘手的问题。也许有人可以指出更有效的解决方案？

**视频播放**。我已经使用自定义视图和 GLES 完成了此操作，以渲染其中包含视频帧的矩形纹理。据我所知，这是绘制位图的最快方法。

**问题**

*   需要手动播放声音样本
*   AVAssetReader 抓取应与电影帧速率同步。否则电影会过快或过慢。
*   AVAssetReader 只允许连续的帧访问。你不能向前和向后寻找。唯一建议的解决方案是删除旧阅读器并创建一个具有修剪时间范围的新阅读器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:08:31.220

[这就是您从相机胶卷加载视频的方式。](http://www.techotopia.com/index.php/Accessing_the_iPhone_Camera_and_Photo_Library_%28Xcode_4%29)

[这是一种开始处理视频的方法。布拉德·拉尔森做得很好。。](https://github.com/BradLarson/GPUImage)

[如何抓取视频帧..](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureVideoDataOutput_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-20T12:59:25.370

您可以使用 AVPlayer+ AVPlayerItem，它为您提供了在显示图像上应用过滤器的机会。

# nhibernate - 如何确定一个记录的孩子数？

> ID：12045028
> 
> 赞同：0
> 
> 时间：2012-08-20T20:56:21.373
> 
> 标签：nhibernate, count, nhibernate-criteria

大家下午好！

我正在学习 NHibernate，并决定进行一些更改。其中，我注意到有些字段是不必要的。所以我提出了我的疑问：我有一个列表，我们在每个学习班内称之为 Class_List，每个班级我可以有 N 个学生。在 Class_List 列表中，我还有其他属性，例如类的名称。我怎么看没有必要在数据库中存储我有多少学生，我会在一个查询中，我有多少记录。这个，使用 NHibernate。

这可能吗？如何？

此致，

古斯塔沃。

编辑：我忘了说一件事......我想将这个记录数作为一列返回。但是此列未映射到我的 .hbm.xml 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:59:46.713

如果学生被映射为 Class 上的集合，您可以尝试使用以下内容：

```
var numberOfStudents = session.CreateCriteria<Class>()
    .Add(Restrictions.IdEq(1))
        .CreateCriteria("_students", "students")
        .SetProjection(Projections.RowCount())
        .UniqueResult<Int32>(); 
```

其中“1”是班级的 ID（您可以使用其他属性），“_students”是学生集合的名称。

# c++ - 接受回调的模板函数的“无匹配函数”

> ID：12045029
> 
> 赞同：3
> 
> 时间：2012-08-20T20:56:28.910
> 
> 标签：c++, templates

我正在尝试将回调传递给模板函数，但 GCC 给了我

```
error: no matching function for call to ‘Test::iterate(main(int, char**)::<anonymous struct>&)’ 
```

为什么这不起作用？（另外，由于我无法控制的原因，我不能使用 C++11。）

我也尝试过命名结构 eg`myvis`并调用`test.iterate<myvis>(visitor)`，但这也不起作用。

```
#include <deque>
#include <iostream>

class Test {
public:
    std::deque<int> d;

    template <typename C>
    void iterate(C& c) {
        for(std::deque<int>::iterator itr = d.begin(); itr != d.end(); itr++) {
            c(*itr);
        }
    }
};

int main(int argc, char** argv) {
    Test test;
    test.d.push_back(1);
    test.d.push_back(2);
    struct {
        void operator()(int x) {
            std::cout << x << std::endl;
        }
    } visitor;
    test.iterate(visitor);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:06:53.717

C++03 标准在 §14.3.1.2 [temp.arg.type] 中说明如下：

> 本地类型、没有链接的类型、未命名类型或由这些类型中的任何一种组合而成的类型不应用作模板类型参数的模板参数。

因此，您需要一个全局命名结构而不是本地未命名结构，从而为您提供如下内容：

```
struct Visitor {
    void operator()(int x) {
        std::cout << x << std::endl;
    }
} visitor;
int main(int argc, char** argv) {
    Test test;
    test.d.push_back(1);
    test.d.push_back(2);
    Visitor visitor;
    test.iterate(visitor);
} 
```

在 c++11 中取消了对本地/未命名类型的限制，所以如果那些不使用它的原因有一天会消失，那么你的代码会保持原样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:13:23.453

你有两个错误。

首先，您不能使用本地类型`visitor`来实例化模板成员函数函数`iterate`（这将在 C++11 中工作）。

其次，这里不能有匿名类型。你需要一个命名的`struct visitor`，你需要传递一个实例。

```
#include <deque>
#include <iostream>

struct visitor {
  void operator()(int x) {
    std::cout << x << std::endl;
  }
};

class Test {
public:
  std::deque<int> d;

  template <typename C>
  void iterate(C& c) {
    for(std::deque<int>::iterator itr = d.begin(); itr != d.end(); itr++) {
      c(*itr);
    }
  }
};

int main() {
  Test test;
  test.d.push_back(1);
  test.d.push_back(2);

  visitor v;
  test.iterate(v);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T21:17:53.427

您可以使`visitor`global 并且您还需要命名`struct`，例如`Visitor`.

```
#include <deque>
#include <iostream>

struct Visitor {
    void operator()(int x) 
    {
       std::cout << x << std::endl;
    }
};

class Test {
public:
    std::deque<int> d;

    template <typename C>
    void iterate(C& c) {
        for(std::deque<int>::iterator itr = d.begin(); itr != d.end(); itr++) {
            c(*itr);
        }
    }
};

int main(int argc, char** argv) {
    Test test;
    test.d.push_back(1);
    test.d.push_back(2);
    Visitor visitor;
    test.iterate(visitor);
} 
```

# html - CSS 优先逻辑

> ID：12045030
> 
> 赞同：4
> 
> 时间：2012-08-20T20:56:37.090
> 
> 标签：html, css, css-selectors, css-specificity, css-cascade

### 在这个例子中：

[http://jsfiddle.net/Ja29K/](http://jsfiddle.net/Ja29K/)

```
<style>
  /* Default links */
  a {
    color: #0F0; /* Green */
  }

  /* Header links */
  #header a {
    color: #F00; /* Red */
  }

  /* Login link */
  #login {
    color: #00F; /* Blue */
  }
</style>

<header id="header">
  <p><a href="#">header link</a> is red</p>
  <p><a id="login" href="#">login link</a> is not blue</p>
</header> 
```

### 登录链接必须是蓝色的不合逻辑吗？

我知道声明具有相同的起源和相同的重要性，因此需要对它们进行评分（选择器的特异性）。

为了计算选择器的特异性，我为每个选择器创建了一个表：

**A = 内联样式数：0**
**B = ID 数：0**
**C = 类数：0**
**D = 元素数：0**

所以**登录元素**有3个与他的颜色相关的碰撞：**a**， #header **a**，**#login**

**element** (A, B, C, D)

**a** (0, 0, 0, 1) = 1
**#header a** (0, 1, 0, 1) = 101
**#login** (0, 1, 0, 0) = 100

选择器“#header a”获胜，因为它的得分最高。

### 但

如果我们将选择器 "#login" 更改为 "a#login"，我们将有：
**a#login (0, 1, 0, 1) = 101**
选择器 "#header a" 失败，因为平局赢得最后这是宣布的。

## 所以，我无法理解的是：

由于“#header a”选择器引用了许多元素，而 ID 选择器（例如 #login）只引用了一个元素，因此我们希望将 ID 选择器声明应用于该元素是合乎逻辑的，对吗？我真的无法理解这个 CSS 优先逻辑，因为我认为 ID 选择器基本上必须是最具体的东西，就像内联样式一样。

PS：对不起我的英语不好:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T21:06:22.003

不，根据选择器的逻辑，它不是。

`#header a`比 更具体`#login`。如果您将`#header a`选择器缩减为`#header`，则标题选择器和登录选择器将具有相同的特异性，并且将使用最后表达的规则（按照您的顺序从登录中获取颜色）。如果您通过向其添加标签名称来增加登录选择器的具体性，情况也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:17:38.867

您似乎熟悉特异性的概念，它[在 w3 css specs 中得到了详尽的描述](http://www.w3.org/TR/CSS2/cascade.html#specificity)。从算法的角度来看，规则声明中的选择器特异性值是 flat-weighted 或*non-positional*。这意味着`#header a`和`a#login`具有相同的特异性，这意味着如果一个元素符合这两个规则，则后一个将优先。

就个人而言，我花了更长的时间来接受具有*语义特异性但没有计算价值*的选择器。例如，即使后者“感觉”更具体，但具有相同的权重`ul li`！`ul>li`

我发现任何具有函数式编程背景的人都发现将特异性比较为四字节值更容易（这实际上接近于它在主要浏览器中的实现方式 -[因此在使用 256 个以上相同权重的选择器时会溢出值](http://www.thecssninja.com/css/extreme-specificity):)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T21:14:32.707

从哪个选择器针对最少元素的意义上看，您看不到“特异性”，而只是最重要的。

当然，通过区分诸如`#header a`或之类的东西，规则是否可以变得更加复杂`a#login`。然而，这只会给整个系统增加更多的混乱。
也很可能这个（c/w）会被如下滥用：`header#header a`- 这增加了更高的特异性，但也可以针对更多元素。

在我看来，这不会为系统增加更多价值，只会让它变得更加复杂。

在编写 CSS 时，应始终尝试使规则尽可能短，以解决性能问题。如果您需要覆盖规则，您仍然可以添加另一个规则，`id`或者`class`- 除了正常的级联之外，这确实绰绰有余。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T21:27:30.743

解决这个问题所需要的只是改变`#login`让`a#login`DOM 知道这个命令是特定于链接的。

更具体的`#header a`不仅仅是`#login`因为它指向 DOM 中的特定元素，而不仅仅是随机 id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T21:00:20.303

这取决于特异性 - 更具体，它将为您工作：

```
header a#login {
 color: #00F; /* Blue */
}​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T21:14:07.853

OP，也许您可​​以认为 CSS 首先处理第一个参数（#header 和 #login），然后才处理第二个参数（“#header a”中的 a）。

所以在第一个过程中，它变成红色，然后是蓝色，但在第二个过程中，由于第二个参数中的“a”，它被覆盖为红色。

# cloudbees - 无法部署工件

> ID：12045032
> 
> 赞同：3
> 
> 时间：2012-08-20T20:56:49.037
> 
> 标签：cloudbees

尝试从我的工作中部署工件时，我得到以下信息：

```
[ERROR] uniqueVersion == false is not anymore supported in maven 3
[INFO] Deployment in dav:https://repository-xinco.forge.cloudbees.com/snapshot (id=cloudbees-private-repository,uniqueVersion=false)
Deploying the main artifact Card-Game-Extension-1.0-SNAPSHOT.pom
Downloading: dav:https://repository-xinco.forge.cloudbees.com/snapshot/simple/server/Card-Game-Extension/1.0-SNAPSHOT/maven-metadata.xml
Uploading: https://repository-xinco.forge.cloudbees.com/snapshot/simple/server/Card-Game-Extension/1.0-SNAPSHOT/Card-Game-Extension-1.0-20120820.205113-1.pom
Uploading: https://repository-xinco.forge.cloudbees.com/snapshot/simple/server/Card-Game-Extension/1.0-SNAPSHOT/Card-Game-Extension-1.0-20120820.205113-1.pom
ERROR: Failed to deploy artifacts: Could not transfer artifact simple.server:Card-Game-Extension:pom:1.0-20120820.205113-1 from/to cloudbees-private-repository (dav:https://repository-xinco.forge.cloudbees.com/snapshot): Failed to transfer file: https://repository-xinco.forge.cloudbees.com/snapshot/simple/server/Card-Game-Extension/1.0-SNAPSHOT/Card-Game-Extension-1.0-20120820.205113-1.pom. Return code is: 401
org.apache.maven.artifact.deployer.ArtifactDeploymentException: Failed to deploy artifacts: Could not transfer artifact simple.server:Card-Game-Extension:pom:1.0-20120820.205113-1 from/to cloudbees-private-repository (dav:https://repository-xinco.forge.cloudbees.com/snapshot): Failed to transfer file: https://repository-xinco.forge.cloudbees.com/snapshot/simple/server/Card-Game-Extension/1.0-SNAPSHOT/Card-Game-Extension-1.0-20120820.205113-1.pom. Return code is: 401
    at org.apache.maven.artifact.deployer.DefaultArtifactDeployer.deploy(DefaultArtifactDeployer.java:141)
    at hudson.maven.reporters.MavenArtifactRecord.deploy(MavenArtifactRecord.java:182)
    at hudson.maven.RedeployPublisher.perform(RedeployPublisher.java:158)
    at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
    at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:707)
    at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:682)
    at hudson.maven.MavenModuleSetBuild$RunnerImpl.post2(MavenModuleSetBuild.java:997)
    at hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:629)
    at hudson.model.Run.run(Run.java:1433)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:481)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:238)
Caused by: org.sonatype.aether.deployment.DeploymentException: Failed to deploy artifacts: Could not transfer artifact simple.server:Card-Game-Extension:pom:1.0-20120820.205113-1 from/to cloudbees-private-repository (dav:https://repository-xinco.forge.cloudbees.com/snapshot): Failed to transfer file: https://repository-xinco.forge.cloudbees.com/snapshot/simple/server/Card-Game-Extension/1.0-SNAPSHOT/Card-Game-Extension-1.0-20120820.205113-1.pom. Return code is: 401
    at org.sonatype.aether.impl.internal.DefaultDeployer.deploy(DefaultDeployer.java:280)
    at org.sonatype.aether.impl.internal.DefaultDeployer.deploy(DefaultDeployer.java:211)
    at org.sonatype.aether.impl.internal.DefaultRepositorySystem.deploy(DefaultRepositorySystem.java:443)
    at org.apache.maven.artifact.deployer.DefaultArtifactDeployer.deploy(DefaultArtifactDeployer.java:137)
    ... 11 more
Caused by: org.sonatype.aether.transfer.ArtifactTransferException: Could not transfer artifact simple.server:Card-Game-Extension:pom:1.0-20120820.205113-1 from/to cloudbees-private-repository (dav:https://repository-xinco.forge.cloudbees.com/snapshot): Failed to transfer file: https://repository-xinco.forge.cloudbees.com/snapshot/simple/server/Card-Game-Extension/1.0-SNAPSHOT/Card-Game-Extension-1.0-20120820.205113-1.pom. Return code is: 401
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:950)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:940)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$PutTask.run(WagonRepositoryConnector.java:837)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.put(WagonRepositoryConnector.java:467)
    at org.sonatype.aether.impl.internal.DefaultDeployer.deploy(DefaultDeployer.java:274)
    ... 14 more
Caused by: org.apache.maven.wagon.TransferFailedException: Failed to transfer file: https://repository-xinco.forge.cloudbees.com/snapshot/simple/server/Card-Game-Extension/1.0-SNAPSHOT/Card-Game-Extension-1.0-20120820.205113-1.pom. Return code is: 401
    at org.apache.maven.wagon.shared.http.AbstractHttpClientWagon.put(AbstractHttpClientWagon.java:379)
    at org.apache.maven.wagon.shared.http.AbstractHttpClientWagon.put(AbstractHttpClientWagon.java:287)
    at org.apache.maven.wagon.providers.webdav.WebDavWagon.put(WebDavWagon.java:332)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$PutTask.run(WagonRepositoryConnector.java:811)
    ... 16 more
[INFO] Deployment failed after 0.74 sec
Build step 'Deploy artifacts to my Private CloudBees Repository' changed build result to FAILURE
An attempt to send an e-mail to empty list of recipients, ignored.
Finished: FAILURE 
```

在我不知道的存储库中是否有任何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:17:40.620

您正在使用`Deploy artifacts to my Private CloudBees Repository`发布者。

您需要在该插件的`Assign unique versions to snapshots`选项上启用该选项。`Advanced`

一旦你这样做了，它应该部署得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:46:14.313

“在 maven 3 中不再支持 uniqueVersion == false”，即使被报告为错误，也不会停止部署。

[这似乎是您帐户中的配置问题，将在https://cloudbees.zendesk.com/tickets/5055](https://cloudbees.zendesk.com/tickets/5055)上跟进

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T16:20:11.150

这是一个存储库权限问题。

# javascript - 将代码添加到每个画布上下文方法

> ID：12045035
> 
> 赞同：4
> 
> 时间：2012-08-20T20:57:11.857
> 
> 标签：javascript, canvas, html5-canvas

我正在尝试向画布上下文中调用的每个方法添加一些代码。我正在尝试这样做，以便可以将每个命令添加到命令数组中。这是我认为有效的代码（但没有）：

```
var canvas = Object.getPrototypeOf(document.createElement('canvas').getContext('2d'));
for(p in canvas){
    if(canvas.hasOwnProperty(p)){
        var original = canvas[p];
        canvas[p] = function(){

            //extra code to be run

            return original.apply(this,arguments);
        }
    }
} 
```

在我看来，这似乎应该有效，但事实并非如此。如果我在示例中使用此代码，我会得到一个`NOT_SUPPORTED_ERR: DOM Exception 9`

**演示：http: [//jsfiddle.net/J3tUD/2/](http://jsfiddle.net/J3tUD/2/)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T21:19:45.563

您遇到的问题是变量不是块作用域。

当您的函数运行时，它会更新上下文原型，以便每个函数调用相同的函数`original`，这是原始原型拥有的最后一个元素。在这种情况下，即`webkitGetImageDataHD`。

这意味着当你打电话时`ctx.beginPath();`你真的打电话`ctx.webkitGetImageDataHD();`。这个方法需要 4 个参数，因为它没有得到它们，所以它会抛出 DOM 异常 9。

由于 JavaScript 不支持块作用域，因此您必须使用函数强制更改作用域。修改您的示例，我们可以创建一个新函数，其中`original`是一个固定值：

```
var context = Object.getPrototypeOf(document.createElement('canvas').getContext('2d'));

function bind(context, p) {
    // context, p, and original never change.
    var original = context[p];
    context[p] = function(){
        console.log(p, arguments);
        return original.apply(this,arguments);
    }
}

// p changes with every iteration.
for(p in context){
    if(context.hasOwnProperty(p)){
        bind(context, p);
    }
} 
```

在这里找到一个工作演示：http: [//jsfiddle.net/bnickel/UG9gF/](http://jsfiddle.net/bnickel/UG9gF/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:22:29.420

JavaScript 没有块作用域，并且您只有一个`original`包含最后一个枚举函数的变量。

此解决方案不会更改上下文原型（[主机对象](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)！），而只会更改以下内容的副本`myContext`：

```
var myContext = someCanvas.getContext('2d');
var CanvasRenderingContext2DPrototype = Object.getPrototypeOf(myContext);
for (var p in CanvasRenderingContext2DPrototype) (function(original, prop) {
    myContext[prop] = function() {
        // some extra code
        original.apply(myContext, arguments);
    };
})(CanvasRenderingContext2DPrototype[p], p); 
```

# facebook - Facebook Javascript SDK 身份验证持久性？

> ID：12045036
> 
> 赞同：0
> 
> 时间：2012-08-20T20:57:22.903
> 
> 标签：facebook, asp.net-mvc-3, facebook-javascript-sdk

我正在使用以下 Facebook 客户端 SDK 以在不刷新页面的情况下对用户进行身份验证（效果很好）

[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

我遇到的问题是我想将一些数据与该用户一起存储在本地数据库中。因此，如果用户对自己进行身份验证，它将拉回他给定的数据。

我见过访问令牌，但这不是用户的永久链接。我究竟需要检查服务器端什么来保证用户以及我需要在我的数据库（帐户表）中存储什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:35:35.450

您可以获取用户的[facebook id](https://developers.facebook.com/docs/reference/api/user/)并每次检查他是否存在于数据库中或者他是新用户。

# php - 获取未来 6 个月内某一天的工作日

> ID：12045043
> 
> 赞同：-2
> 
> 时间：2012-08-20T20:57:48.207
> 
> 标签：php

是否有可能在 PHP 中获得未来 6 个月的第 21 天的工作日？

例如，假设 21 日是下个月的星期二，那么我希望返回“星期二”。但我希望在接下来的 6 个月中每个月都能做到这一点。对此最优雅的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:03:27.353

这样的事情会给你预期的结果：

```
// starting date
$date = new DateTime('2012-08-21');

// iterate for 6 months
for ($i = 0; $i < 6 ; $i++) {
    echo $date->format('Y-m-d').' : '.$date->format('l') . PHP_EOL;
    $date->modify('+1 month');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:09:03.533

[`DatePeriod`](http://php.net/dateperiod)和类对于[`DateInterval`](http://php.net/dateinterval)这类事情非常方便。

```
$date = DateTime::createFromFormat('d', 21);
$period = new DatePeriod($date, new DateInterval('P1M'), 6, DatePeriod::EXCLUDE_START_DATE);
foreach ($period as $day) {
    echo $day->format('M jS => l'), PHP_EOL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:05:36.527

未经测试，但试试这个：

```
$date = 21;
$year = 2012;
$month = date('m'); // Get current month
for($i=0;$i<6;$i++)
{
    if($month == 13)
    {
        $year++;
        $month=1;
    }
    $day = date('l',mktime(0,0,0,$month,$date,$year));
    echo "$month $date falls on $day<br />\n";
    $month++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T21:08:19.693

是的：

```
<?php

$date = new DateTime;
$date->modify("first day of this month");
$date->modify("+20 days"); //21st
echo $date->format("F: l (Y-m-d)") . PHP_EOL;
for ($i = 0; $i < 6; $i++) {
    $date->modify("+1 month");
    echo $date->format("F: l (Y-m-d)") . PHP_EOL;
} 
```

# c# - 为什么我的绑定失败？

> ID：12045046
> 
> 赞同：1
> 
> 时间：2012-08-20T20:58:00.223
> 
> 标签：c#, winforms, data-binding, dynamic

我收到“*无法绑定到数据源上的属性或列*”的代码（在附加了“ *<-- here！ ”注释的行上）：*

```
List<QHQuad> listQH = PlatypusData.GetQHForPlatypusAndDay(platypusId, dow);
foreach (var quad in listQH)
{
    int QHCell = quad.QH;
    if ((QHCell >= 1) || (QHCell <= QUARTER_HOUR_COUNT))
    {
        string PH1CellToPopulate = string.Format("textBoxA_{0}", QHCell);
        string PH2CellToPopulate = string.Format("textBoxB_{0}", QHCell);
        string PH3CellToPopulate = string.Format("textBoxC_{0}", QHCell);
        var tb = (TextBox)this.Controls.Find(PH1CellToPopulate, true).First();
        tb.DataBindings.Add(new Binding("Text", quad, "Ph1")); // <-- here!
        tb = (TextBox)this.Controls.Find(PH2CellToPopulate, true).First();
        tb.DataBindings.Add(new Binding("Text", quad, "Ph2"));
        tb = (TextBox)this.Controls.Find(PH3CellToPopulate, true).First();
        tb.DataBindings.Add(new Binding("Text", quad, "Ph3")); 
    }
} 
```

在故障点，quad 包含四个值： QHCell，即 1；Ph1，为空字符串；Ph2，为空字符串；和Ph3，即“1”

## 更新

我不认为可见性是个问题，因为我可以访问 quad.QH；此外，该课程是公开的。

我得到的更完整的异常是“ *System.ArgumentException is unhandled by user code Message=Cannot bind to the property or column Ph1 on the DataSource. Parameter name: dataMember* ”

如果我更改问题行：

```
tb.DataBindings.Add(new Binding("Text", quad, "Ph1")); 
```

...对此：

```
tb.DataBindings.Add(new Binding("Text", listQH, "quad.Ph1")); 
```

我得到，“*无法创建字段四边形的子列表*”

## 更新 2

我认为这是因为我这样做的方式，绑定数据是没有意义的：

最初我有一个有 384 名成员的班级，96 个这种“四边形”：

```
int
string
string
string 
```

然后我将其更改为使用具有 4 个成员的类的 96 个实例（上面的那些 - “四元组”，即 QH、Ph1、Ph2 和 Ph3）。

因此，尝试绑定到这些瞬态类实例对我来说并不明智——我必须保留该类的 96 个实例。

我仍然可能是错的，但这就是我认为这里数据绑定失败的原因：我将我的代码优雅化为遗忘。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T23:02:35.073

根据您对 sharp_net 的评论，数据绑定适用于属性，而不是字段。

从此更改您的课程：

```
public class QHQuad {
  public int QH;
  public string Ph1;
  public string Ph2;
  public string Ph3;
} 
```

对此：

```
public class QHQuad {
  public int QH {get; set;}
  public string Ph1 {get; set;}
  public string Ph2 {get; set;}
  public string Ph3 {get; set;}
} 
```

您还应该考虑实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:30:45.103

当我拼错列名时，我可以重现错误“ex.Message =”无法绑定到数据源上的属性或列 numpmt。\r\n参数名称：dataMember”。

请验证您的列名是否正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-11T07:18:24.310

我收到此错误“无法绑定到数据源上的属性或列。参数名称：dataMember。” -- 但仅在以发布模式运行时。

可以在此处查找引发此错误的参考源： [http](http://referencesource.microsoft.com/#System.Windows.Forms/ndp/fx/src/winforms/Managed/System/WinForms/BindToObject.cs.html) ://referencesource.microsoft.com/#System.Windows.Forms/ndp/fx/src/winforms/Managed/System/WinForms/BindToObject.cs.html ，它发生在 CheckBinding() 中。

当数据源实际上为空时，我得到了错误，仅在发布模式下。绑定源已经在设计器中创建，所以 MyForm.Designer.cs 某处说

```
this.myBindingSource.DataSource = typeof(MyClass); 
```

和 MyForm.cs 某处说

```
this.myBindingSource.DataSource = null; 
```

同样，该错误仅在发布模式下发生，并且它不会停止能够继续的应用程序，除非用户在错误对话框中单击“退出”。

# php - 发布 Facebook 墙的链接

> ID：12045048
> 
> 赞同：0
> 
> 时间：2012-08-20T20:58:04.483
> 
> 标签：php, facebook

我正在尝试发布与 Facebook PHP 的链接，如[https://developers.facebook.com/docs/reference/php/facebook-api/](https://developers.facebook.com/docs/reference/php/facebook-api/)中的示例所示。我写了这段代码：

```
$ret_obj = $facebook->api('/' . $idFacebook . '/feed', 'POST',
    array(
        'link' => $enlace,
        'message' => $mensaje,
        'name' => $nombreAplicacion,
        'caption' => 'Juega en ' . $nombreAplicacion,
        'description' => '...',
        'picture' => '...',
        'type' => 'link',
        'application' => array(
            'name' => $nombreAplicacion,
            'id' => AppInfo::appID() )
    )); 
```

问题是发布的链接是指向我的 $mensaje 应用程序的链接。这是一个约束还是我做错了什么？

提前致谢。

# android - AsyncTask 和 listActivity

> ID：12045051
> 
> 赞同：1
> 
> 时间：2012-08-20T20:58:12.983
> 
> 标签：android, android-listview, android-asynctask

我做了这个简单的应用程序，在这个应用程序中，当我单击开始按钮时，我想查看其中的数据`Listview`，但它不起作用。你能帮助我吗？

**mainActivity.java**

```
public class MainActivity extends ListActivity {
public ArrayList<Map<String, String>> list= new ArrayList<Map<String, String>>();
public ListAdapter adapter;
public ProgressDialog progressDialog; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button buttonAggiorna = (Button) findViewById(R.id.buttonStart);
    buttonAggiorna.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {

        String[] from = { "name", "purpose" };
        int[] to = { android.R.id.text1, android.R.id.text2 };      
 adapter = new SimpleAdapter(MainActivity.this,     list,android.R.layout.simple_list_item_2, from, to);       

  progressDialog = ProgressDialog.show(MainActivity.this, "Getting data", "Loading...");
            taskBack t=new taskBack();
             t.execute();               
        }

    });// fine onClickListner

    Button buttonAllarm = (Button) findViewById(R.id.buttonAllarm);
    buttonAllarm.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {            
                AppLog.logString("list size:"+list.size()); 

        }
});

}

 private class taskBack 
 extends    AsyncTask<Void, Void, ArrayList<Map<String, String>>> {

    @Override
    protected ArrayList<Map<String, String>> doInBackground(Void... arg0) {
    ArrayList<Map<String, String>> l = new ArrayList<Map<String, String>>();
    l = startEla();
    return l;
    }

    protected void onPostExecute(ArrayList<Map<String, String>> result) {
        AppLog.logString("Parte onPostExecute");
        list=result;
        setListAdapter(adapter);    
        progressDialog.dismiss();

    }

    private ArrayList<Map<String, String>> startEla() {
    ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();
        list.add(putData("android","mobile"));
        list.add(putData("Windows7", "Windows7"));
        list.add(putData("iPhone", "iPhone"));
        return list;

    }

    private Map<String, String> putData(String name, String purpose) {
        HashMap<String, String> item = new HashMap<String, String>();
        item.put("name", name);
        item.put("purpose", purpose);
        return item;

    }
}
} 
```

在此链接中，您可以看到 xml 文件[在此处输入链接描述](http://pastebin.com/DZErKqTf)

最好的问候 A.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:46:47.757

`ListActivity`将这两行移到...的主体

```
String[] from = { "name", "purpose" };
int[] to = { android.R.id.text1, android.R.id.text2 }; 
```

从...中的`onClick(...)`侦听器中删除以下行`onCreate(...)`

```
adapter = new SimpleAdapter(MainActivity.this, list, android.R.layout.simple_list_item_2, from, to); 
```

...并将其放入以下`onPostExecute(...)`方法中`AsyncTask`...

```
protected void onPostExecute(ArrayList<Map<String, String>> result) {
    AppLog.logString("Parte onPostExecute");
    list=result;
    adapter = new SimpleAdapter(MainActivity.this, list, android.R.layout.simple_list_item_2, from, to);
    setListAdapter(adapter);    
    progressDialog.dismiss();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:26:55.350

您的代码有几个问题。首先，您将 SimpleAdapter 与异步任务结合使用。通常，如果您要完成执行异步任务的工作，则可能会在初始化后将数据添加到列表中。如果您是那么你将不得不切换到一个 ArrayAdapter。我已经调整了您的代码以适应它。

您还需要将 XML 中的 ListView ID 设置为 android:id="@android:id/list"

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import org.apache.http.message.BasicNameValuePair;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TwoLineListItem;

public class MainActivity extends ListActivity {
public ArrayList<BasicNameValuePair> list= new ArrayList<BasicNameValuePair>();
public ArrayAdapter<BasicNameValuePair> adapter;
public ProgressDialog progressDialog; 
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //You should init your Adapter during onCreate or onStart, not on the onClick 
    String[] from = { "name", "purpose" };
    int[] to = { android.R.id.text1, android.R.id.text2 };   
    adapter = new ArrayAdapter<BasicNameValuePair>(this,android.R.layout.simple_list_item_2, list){       
    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        TwoLineListItem row;
        if(convertView == null){
            LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = (TwoLineListItem)inflater.inflate(android.R.layout.simple_list_item_2, null);
        }else{
            row = (TwoLineListItem)convertView;
        }
        BasicNameValuePair data = list.get(position);
        row.getText1().setText(data.getName());
        row.getText2().setText(data.getValue());

        return row;
        }
    };
    setListAdapter(adapter);
    Button buttonAggiorna = (Button) findViewById(R.id.buttonStart);
    buttonAggiorna.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {

            taskBack t=new taskBack();
             t.execute();               
        }

    });// fine onClickListner

    Button buttonAllarm = (Button) findViewById(R.id.buttonAllarm);
    buttonAllarm.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {            
        }
});

}

 private class taskBack extends    AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... arg0) {

       // Commented out the below since you initlize the array list in startEla
        //ArrayList<Map<String, String>> l = new ArrayList<Map<String, String>>();
       startEla();
       return (Void)null;
    }

    @Override
    protected void onPreExecute()
    {
        super.onPreExecute();
        //Moved the progress dialog show to the onPreExecute
         progressDialog = ProgressDialog.show(MainActivity.this, "Getting data", "Loading...");
    }

    @Override
    protected void onPostExecute(Void result) {
        //AppLog.logString("Parte onPostExecute");
        //On dynamic adapters (Array adapters mainly) you need to notify them once the data set has changed
        MainActivity.this.adapter.notifyDataSetChanged();
        progressDialog.dismiss();

    }

    private void startEla() {
        list.add(new BasicNameValuePair("android", "mobile"));
        list.add(new BasicNameValuePair("Windows7", "Windows7"));
        list.add(new BasicNameValuePair("iPhone", "iPhone"));
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:37:05.573

检查这个： [http ://www.dailygeek.de/using-asynctask-to-update-a-listactivity/](http://www.dailygeek.de/using-asynctask-to-update-a-listactivity/)

不要忘记调用`adapter.notifyDataSetChanged()`onPostExecute()

# liferay - 在 Portlet Liferay 6.1 中呈现 Liferay 页面 URL

> ID：12045055
> 
> 赞同：4
> 
> 时间：2012-08-20T20:58:24.010
> 
> 标签：liferay, liferay-6, liferay-velocity, liferay-theme

我是 Liferay 的新手，我几乎可以肯定这非常简单：使用速度标记，我希望能够生成指向 Liferay 网站内页面的链接，并将它们嵌入到不同页面上的 portlet 中。

我对如何完成它有一个模糊的想法，所以我四处寻找它会发布在某个地方，但我找不到任何东西。顺便说一句，我想把我想出的任何代码放在 portlet 的 view.jsp 中。我会在这里使用速度标记，但我不认为（不确定）在 jsp 内部是否允许这样做。

如果您需要更多信息来回复，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:34:18.193

> 我会在这里使用速度标记，但我不认为（不确定）在 jsp 内部是否允许这样做。

为什么要在 JSP ( `view.jsp`) 中使用 Velocity 标记？除了你在速度方面真的很棒的论点之外，我看不出这样做有什么好处。

虽然这里有一个[链接](http://velocity.apache.org/engine/releases/velocity-1.4/veltag.html)可以帮助您在 JSP 中嵌入速度。

[注意：在我看来，在 Portlet 的 JSP 中嵌入速度并不是一个好习惯]

**在 JSP 中**：

*   您将需要一个`Layout`对象，您可以借助[`LayoutLocalServiceUtil`](https://github.com/liferay/liferay-portal/blob/6.2.x/portal-service/src/com/liferay/portal/service/LayoutLocalServiceUtil.java).
*   获得 Layouts 后，您可以使用[`com.liferay.portal.util.PortalUtil`](https://github.com/liferay/liferay-portal/blob/6.2.x/portal-service/src/com/liferay/portal/util/PortalUtil.java)like`getLayoutFriendlyURL`等静态方法`getLayoutFullURL`来构建 URL。

**在 VM**中（这些将是`*.vm`主题中的文件）：
您可以按照 JSP 中提到的所有相同步骤进行操作。你需要做的事情是：

*   的实例`LayoutLocalService`，可以通过使用以下代码（取自此[答案](https://stackoverflow.com/a/12053911/468763)）找到：

    ```
    #set($layoutLocalService = $serviceLocator.findService("com.liferay.portal.service.LayoutLocalService")) 
    ```

    现在您可以使用速度变量`$layoutLocalService`来调用服务方法来获取布局。

*   然后，您可以使用主题中文件可用`PortalUtil`的变量来调用类的方法。`$portalUtil``*.vm`

您可以查看以下文件以获取更多详细信息（如果您有兴趣）：

1.  [`docroot/html/themes/_unstyled/templates/init.vm`](https://github.com/liferay/liferay-portal/blob/6.2.x/portal-web/docroot/html/themes/_unstyled/templates/init.vm)，这包含主题中可用的所有速度变量。感兴趣的变量可能是`$theme`, `$theme_display`, `$layout`, `$navItems`。
2.  [`docroot/html/themes/_unstyled/templates/portlet.vm`](https://github.com/liferay/liferay-portal/blob/6.2.x/portal-web/docroot/html/themes/_unstyled/templates/portlet.vm)，此文件是显示各个 portlet 的模板。
3.  [`docroot/html/themes/_unstyled/templates/navigation.vm`](https://github.com/liferay/liferay-portal/blob/6.2.x/portal-web/docroot/html/themes/_unstyled/templates/navigation.vm), 包含用于显示带有页面链接的导航菜单的代码。
4.  [`docroot/html/themes/_unstyled/templates/portal_normal.vm`](https://github.com/liferay/liferay-portal/blob/6.2.x/portal-web/docroot/html/themes/_unstyled/templates/portal_normal.vm), 这个文件代表 liferay 中的一个页面模板，它包含其他文件，如`navigation.vm`& `portlet.vm`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:01:12.487

**对于速度：**

好的，所以要以速度生成 Liferay 页面的链接，请查看 Liferay 源代码中的以下文件：

```
/portal-web/docroot/html/themes/_unstyled/templates/navigation.vm 
```

在那里，您将看到默认的 Liferay 主题如何为您的站点生成导航结构。为了让您的生活更轻松，这里是：

```
<nav class="$nav_css_class" id="navigation">
<h1>
    <span>#language("navigation")</span>
</h1>

<ul>
    #foreach ($nav_item in $nav_items)
        #if ($nav_item.isSelected())
            <li class="selected">
        #else
            <li>
        #end
            <a href="$nav_item.getURL()" $nav_item.getTarget()><span>$nav_item.icon() $nav_item.getName()</span></a>

            #if ($nav_item.hasChildren())
                <ul class="child-menu">
                    #foreach ($nav_child in $nav_item.getChildren())
                        #if ($nav_child.isSelected())
                            <li class="selected">
                        #else
                            <li>
                        #end
                            <a href="$nav_child.getURL()" $nav_child.getTarget()>$nav_child.getName()</a>
                        </li>
                    #end
                </ul>
            #end
        </li>
    #end
</ul> 
```

所以 Velocity 正在查看一个名为 $nav_items 的集合，然后在每个项目上调用 getURL() 方法来生成链接。

**对于 JSP：**

1.  您需要使用 LayoutLocalServiceUtil 类，特别是其中一种 getLayouts() 方法。您必须选择最适合您需要的方法。
2.  这将返回布局列表（您的页面），然后您可以在每个布局上调用 getFriendlyURL() 以返回其 url 这将是您网站的相对 url，因此类似于 /my-site-home-page .

如果您还有其他问题，请告诉我！

# list - Clojure Seesaw 从文件列表中制作单选菜单项的菜单

> ID：12045058
> 
> 赞同：1
> 
> 时间：2012-08-20T20:58:50.460
> 
> 标签：list, user-interface, menu, clojure, seesaw

我有一个像这样的文件列表`("File1" "File2" "File3")`

我想把它变成这样的单选菜单项

```
 (menu :text "Lists" :items [(radio-menu-item :text "File 1")(radio-menu-item :text "File 2")(radio-menu-item :text "File 3")]) 
```

我试过这样循环

```
(def Radios (for [ item '("File1" "File2" "File3")]  (radio-menu-item  :text item))) 
```

但这不起作用。

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:39:50.440

您对`for`表达式的使用看起来是正确的，如果我稍微更改表达式以便它返回它将运行而不是运行它的列表，我们可以验证这一点：

```
core>  (list 'menu :text "Lists" :items  
          (vec (for [ item '("File1" "File2" "File3")]   
                   (list 'radio-menu-item  :text item))))

(menu :text "Lists" :items [(radio-menu-item :text "File1") 
                            (radio-menu-item :text "File2") 
                            (radio-menu-item :text "File3")]) 
```

所以完成的表达式变为：

```
core>  (menu :text "Lists" :items  
          (vec (for [ item '("File1" "File2" "File3")]   
                   (radio-menu-item  :text item)))) 
```

提供`menu`并`radio-menu-item`解决正确的值。

# tsql - 提高以下 TSQL 代码的性能

> ID：12045060
> 
> 赞同：0
> 
> 时间：2012-08-20T20:58:55.807
> 
> 标签：tsql, sybase

我正在使用带有 TSQL 的 Sybase DB。

下面的 TSQL 代码片段非常简单，我需要执行 100,000 次（大型数据库），所以我真的很想以任何可能的方式提高它的性能：

```
BEGIN TRANSACTION
INSERT INTO
  DESTINATION_TABLE
SELECT
  COLUMNS
FROM
  SOURCE_TABLE
WHERE
  ORDER_ID = @orderId

DELETE FROM
  SOURCE_TABLE
WHERE
  ORDER_ID = @orderId
COMMIT TRANSACTION 
```

如您所见，我正在根据相同的条件插入和删除同一组行。

有没有办法提高这个简单查询的性能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:03:02.260

如果要插入多行，则确实需要进行批量插入。调用这个方法 100,000 次，每次都传递一个 ID，这是一种线性处理的思维方式。数据库用于集合操作。

构建需要插入和删除的 ID 临时表。然后通过加入该表中的 ID 来进行批量插入，并类似地进行批量删除。

# jquery - 验证器显示在输入模糊而不是提交

> ID：12045062
> 
> 赞同：0
> 
> 时间：2012-08-20T20:58:59.587
> 
> 标签：jquery, validation, jquery-validate

我在我的表单[http://coder.cl/products/jquery-validators/#id_download](http://coder.cl/products/jquery-validators/#id_download)上使用这个脚本，它很好地完成了验证，但它正在验证输入模糊而不是提交。我没有看到它绑定到任何模糊或更改事件，并且 options.form_event 已提交，所以我不确定发生了什么。任何人都有这方面的经验。

示例验证初始化

```
 $('#form_first_name').addValidator({type: 'regex', regex : /^[a-z,-.' ]*[a-z][a-z,-.' ]*$/gi, allow_empty: false, language :'en', position: 'absolute', right: '-20px', top: '-10px' ,custom_message: 'Only letters, spaces, and, . are allowed'}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:03:02.970

请阅读概述。jquery-validators 是一个带有一些预定义验证器的 jQuery 插件，但可扩展以允许您在更改和聚焦事件上创建字段验证。该插件针对每个字段单独运行，而不引用 HTML 中的特定表单。

# iphone - iTunes Connect 中的挪威语应用程序描述，但未显示在商店中

> ID：12045068
> 
> 赞同：1
> 
> 时间：2012-08-20T20:59:16.303
> 
> 标签：iphone, localization, app-store, app-store-connect

在我的 iPhone 应用程序的最新版本中，我更新了描述并将其翻译成我的应用程序支持的所有语言。我的应用程序现在在 App Store 中出售，当我查看挪威语页面时，描述是新的描述，但它是英文的。描述显示为其他语言就好了，但不是挪威语。我再次检查了 iTunes Connect，那里有挪威语的描述。接下来我该怎么做？

（注意：二进制文件没有改变，并且在支持的语言列表中包括了挪威语，这完全是描述文本的问题。另外，这不是坐等的事情，因为已经有几天了，我所有的其他描述显示得很好。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:58:19.900

我会在上面留下评论，但我的分数还不够高。我只想说我也遇到了这个问题。

我的应用在美国开始，但现在在 7 个国家。我在 iTunesConnect 中为每个国家/地区指定了不同的应用程序描述。这就是我所看到的......

澳大利亚、加拿大、英国、瑞典和美国正确显示了其特定国家/地区的描述。

*   [http://itunes.apple.com/au/app/field-agent/id364946558?mt=8](http://itunes.apple.com/au/app/field-agent/id364946558?mt=8)
*   [http://itunes.apple.com/ca/app/field-agent/id364946558?mt=8](http://itunes.apple.com/ca/app/field-agent/id364946558?mt=8)
*   [http://itunes.apple.com/gb/app/field-agent/id364946558?mt=8](http://itunes.apple.com/gb/app/field-agent/id364946558?mt=8)
*   [http://itunes.apple.com/se/app/field-agent/id364946558?mt=8](http://itunes.apple.com/se/app/field-agent/id364946558?mt=8)
*   [http://itunes.apple.com/us/app/field-agent/id364946558?mt=8](http://itunes.apple.com/us/app/field-agent/id364946558?mt=8)

丹麦和挪威正在展示英国的描述。

*   [http://itunes.apple.com/dk/app/field-agent/id364946558?mt=8](http://itunes.apple.com/dk/app/field-agent/id364946558?mt=8)
*   [http://itunes.apple.com/no/app/field-agent/id364946558?mt=8](http://itunes.apple.com/no/app/field-agent/id364946558?mt=8)

# hibernate - 如何在 heroku 上配置休眠 ORM？

> ID：12045070
> 
> 赞同：6
> 
> 时间：2012-08-20T20:59:25.973
> 
> 标签：hibernate, configuration, heroku

这是我在 hibernate.cfg.xml 中的内容

```
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.hbm2ddl.auto">update</property>
        <property name="hibernate.ejb.naming_strategy">org.hibernate.cfg.ImprovedNamingStrategy</property>
        <property name="hibernate.connection.charSet">UTF-8</property> 
        <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
        <property name="connection.driver_class">org.postgresql.Driver</property>
        <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
        <property name="connection.pool_size">1</property>
        <property name="show_sql">true</property>
        <property name="hibernate.use_outer_join">true</property>
        <property name="current_session_context_class">thread</property>
    </session-factory>
</hibernate-configuration> 
```

另外，我正在动态覆盖一些属性......

```
 Configuration config = new Configuration().configure("path_to_hibernate.cfg.xml");
 config.setProperty("hibernate.connection.url", System.getenv("HEROKU_POSTGRESQL_MYCOLOR_URL"));
 config.setProperty("hibernate.connection.username", "***");
 config.setProperty("hibernate.connection.password", "***"); 
```

但是，当我运行它时，我得到了这个错误......

```
ERROR: No suitable driver found for postgres://*******:*********@ec2-23-21-85-197.compute-1.amazonaws.com:5432/d9i5vp******o7te 
```

如何配置我的属性以便 heroku 找到 postgres 驱动程序？

（我是hibernate和heroku的新手，所以非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T15:27:42.090

您可以将此 Hibernate+JPA`persistence.xml`配置用作您的 hibernate 配置的基础。

`hibernate.cfg.xml`the和 the之间的属性名称`persistence.xml`是相同的，只有 hibernate 使用打开和关闭元素，而 JPA 使用属性。

```
<properties>
            <property name="hibernate.connection.url" value="jdbc:postgresql://ec2-107-21-126-162.compute-1.amazonaws.com:6232/dbname?username=username&amp;password=password&amp;ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory"/>
            <property name="hibernate.connection.driver_class" value="org.postgresql.Driver"/>
            <property name="hibernate.connection.username" value="username"/>
            <property name="hibernate.connection.password" value="password"/>
            <property name="hibernate.archive.autodetection" value="class"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hbm2ddl.auto" value="update"/>

            <!-- c3p0 connection pool settings -->
            <property name="hibernate.connection.provider_class" value="org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider" />
            <property name="hibernate.c3p0.min_size" value="1" />
            <property name="hibernate.c3p0.max_size" value="5" />
            <property name="hibernate.c3p0.acquire_increment" value="1" />
            <property name="hibernate.c3p0.idle_test_period" value="3000" />
            <property name="hibernate.c3p0.max_statements" value="50" />
            <property name="hibernate.c3p0.timeout" value="1800" />

        </properties> 
```

Maven依赖：

```
 <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.2.1.Final</version>
        </dependency>       

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-c3p0</artifactId>
            <version>4.2.1.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.2.1.Final</version>
        </dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:44:37.817

来自 Heroku Postgres 的 URL 格式不是 JDBC 格式。它是一种多语言格式，因此所有平台都可以使用它。因此需要将 URL 转换为 JDBC 格式。在 Heroku 开发中心有一个很好的例子：
[https ://devcenter.heroku.com/articles/connecting-to-relational-databases-on-heroku-with-java#using-the-in-纯 jdbc](https://devcenter.heroku.com/articles/connecting-to-relational-databases-on-heroku-with-java#using-the-in-plain-jdbc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-10T10:22:56.537

```
 Map<String, String> jdbcUrlSettings = new HashMap<>();
        String jdbcDbUrl = System.getenv("JDBC_DATABASE_URL");
        System.out.println("jdbcDbUrl" + jdbcDbUrl);
        if (null != jdbcDbUrl) {
            jdbcUrlSettings.put("hibernate.connection.url", System.getenv("JDBC_DATABASE_URL"));
        }

        Configuration configuration = new Configuration();
        annotatedAddClass(configuration);

        StandardServiceRegistryBuilder serviceRegistryBuilder = new StandardServiceRegistryBuilder();
        serviceRegistryBuilder.applySettings(jdbcUrlSettings);
        ServiceRegistry serviceRegistry = serviceRegistryBuilder.build();
        return configuration.buildSessionFactory(serviceRegistry); 
```

# html - 正则表达式忽略重复匹配

> ID：12045072
> 
> 赞同：1
> 
> 时间：2012-08-20T20:59:30.740
> 
> 标签：html, regex

我正在使用一个应用程序来搜索这个我现在无法控制的网站，并且想知道是否有一种方法可以只使用正则表达式来忽略重复匹配。

现在我写这个来获取页面源代码中图像源的匹配

使用它来检索 src

```
<span> <img id="imgProduct.*? src="/(.*?)" alt=" 
```

由此

```
<span> <img id="imgProduct_1" class="SmPrdImg selected"     
onclick="(some javascript);" src="the_src_I_want1.jpg" alt="woohee"> </span>
<span> <img id="imgProduct_2" class="SmPrdImg selected"     
onclick="(some javascript);" src="the_src_I_want2.jpg" alt="woohee"> </span>
<span> <img id="imgProduct_3" class="SmPrdImg selected"     
onclick="(some javascript);" src="the_src_I_want3.jpg" alt="woohee"> </span> 
```

唯一的问题是，上面列出的完全相同的代码在源代码中重复得更低。有没有办法只使用正则表达式来忽略或删除重复项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:07:28.773

你的模式不是很好；它对您当前存在的确切源代码太具体了。正如@Truth 评论的那样，如果情况发生变化，您将打破您的模式。我会推荐更像这样的东西：

```
<img[^>]*src=['"]([^'"]*)['"] 
```

这将匹配`src`任何标记内的任何属性的内容`<img>`，无论您的源代码更改多少。

为了防止使用正则表达式重复，您需要前瞻，这可能**非常**慢。我**不建议**为此使用正则表达式。这只是为了表明你可以，如果你不得不这样做。您需要的模式是这样的（我使用 Notepad++ 的正则表达式搜索对此进行了测试，它基于 PCRE 并且比 JavaScript 更强大，但我有理由确定 JavaScript 的正则表达式解析器可以处理这个问题）。

```
<img[^>]*src=['"]([^'"]*)['"](?!(?:.|\s)*<img[^>]*src=['"]\1['"]) 
```

然后，您将获得 each 的最后一个实例的匹配项`src`。

# 故障

为了说明，以下是该模式的工作原理：

```
<img[^>]*src=['"]([^'"]*)['"] 
```

这确保出现`<img>`时我们在标签内`src`，然后确保我们只匹配引号内的内容（可以是单引号或双引号；因为*无论如何*我们都没有文件名中的合法字符担心混合引用类型或转义引号）。

```
(?!
    (?:
        .
    |
        \s
    )*
    <img[^>]*src=['"]\1['"]
) 
```

开始一个否定的`(?!`前瞻：我们要求在这一点之后不能匹配以下模式。

然后`(?:.|\s)*`匹配任何字符或任何空格。这是因为 JavaScript`.`不会匹配换行符，而`\s`会。大多数情况下，我很懒，不想为任何可能的行尾写出模式，所以我只使用了`\s`. `*`当然，这意味着我们可以拥有任意数量的这些。*这意味着*在文件的其余部分中无法找到以下内容（仍然是否定前瞻的一部分） 。而`(?:`不是`(`意味着这个括号不会被反向引用记住。

那一点是`<img[^>]*src=['"]\1['"]`。这与初始模式非常相似，但我们不是捕获`src`with `([^'"]*)`，而是引用之前捕获`src`的 with `\1`。

因此，该模式是说“将没有任何内容`src`的任何内容与文件其余部分中的任何内容匹配”，这意味着您只能获得每个内容的最后一个实例并且没有重复项。`img``img``src``src`

顺便说一句，如果您想删除*所有*出现多次的任何实例，我认为您不`img`走运。`src`JavaScript 不支持lookbehind，而且绝大多数支持的正则表达式引擎无论如何都不允许如此复杂的*lookbehind*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:25:01.727

我不会太努力地使它们独一无二，只需在与 array_unique 的 preg 匹配之后在 PHP 中执行此操作：

```
$pattern = '~<span> <img id="imgProduct.*? src="/(.*?)" alt="~is';
$match   = preg_match_all($pattern, $html, $matches);

if ($match)
{
     $matches = array_unique($matches[1]);
} 
```

如果您使用的是 JavaScript，那么您需要使用另一个函数而不是 array_unique，请检查 PHPJS： [http ://phpjs.org/functions/array_unique:346](http://phpjs.org/functions/array_unique:346)

# ruby-on-rails - “未定义的方法‘名称’为 false:FalseClass”

> ID：12045074
> 
> 赞同：0
> 
> 时间：2012-08-20T20:59:38.693
> 
> 标签：ruby-on-rails, factory-bot

我的对象“Line”的所有功能测试都失败了。我什至不知道从哪里开始调试这个：

> 21) 错误：test_should_update_line(LinesControllerTest): NoMethodError: undefined method `name' for false:FalseClass c:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/decl aration/static.rb:11:in`==' c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/att ribute_methods/write.rb: 57:in `convert_number_column_value' c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/att ribute_methods/write.rb:50:in`type_cast_attribute_for_write' c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/att ribute_methods/serialization.rb:88:in `type_cast_attribute_for_write' c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/att ribute_methods/write.rb:38:in`write_attribute' c:/Ruby193/lib /ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/att ribute_methods/dirty.rb:67:in `write_attribute' c:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/att ribute_methods/write.rb:14:in`port=' c:/Ruby193/lib/ruby/gems/1.9.1/gems /factory_girl-4.0.0/lib/factory_girl/attr ibute_assigner.rb:16:in `block (2 levels) in object' c:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/attr ibute_assigner.rb:15:in`each' c:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/attr ibute_assigner .rb:15:in`block in object' c:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/attr ibute_assigner.rb:14:in`点击' c:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/attr ibute_assigner.rb:14:in `object' c:in`object' c:/Ruby193/lib/ruby/gems/ 1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/stra tegy/create.rb:9:in `result' c:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/fact ory.rb:42:in`run' c:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0 /lib/factory_girl/factory_runner.rb:23:in`block in run' c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/n otifications.rb:125:in`仪器'c:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/factory_runner.rb:22:in`run' c:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/stra tegy_syntax_method_registrar.rb:19:in`块中的define_singular_strategy_method'
> 
> ```
> c:/code/vsdb/test/functional/lines_controller_test.rb:5:in `block in <class: LinesControllerTest>'
> c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/c 
> ```
> 
> allbacks.rb:462:in `_run__987382823__setup__855471168__callbacks' c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/c allbacks.rb:405:in`__run_callback'c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/c allbacks.rb:385:in `_run_setup_callbacks' c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/c allbacks.rb:81:in`run_callbacks'c:/Ruby193 /lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/testing/setup_and_teardown.rb:34:in `run'

lines_controller_test.rb：

> 类 LinesControllerTest < ActionController::TestCase
> setup do @line = FactoryGirl.create(:line)
> end
> 
> ```
> test "should update line" do
>   put :update, id: @line, line: { description: @line.description }
>   assert_redirected_to line_path(assigns(:line))   
> end 
> ```
> 
> 结尾

test_helper.rb：

> ENV["RAILS_ENV"] = "test" 需要 File.expand_path('../../config/environment', **FILE** ) 需要 'rails/test_help' 需要 'capybara/rails'
> 
> class ActiveSupport::TestCase # 按字母顺序为所有测试设置 test/fixtures/*.(yml|csv) 中的所有夹具。# # 注意：你目前仍然需要在集成测试中显式声明fixtures # -- 它们还没有继承这个设置
> 
> def setup #各种所有者 @admin = FactoryGirl.create(:owner, iso:true, admin:true) @iso = FactoryGirl.create(:owner, iso:true) @isa = FactoryGirl.create(:owner) #默认为管理员 @controller.stubs(:current_owner).returns(@admin)
> 
> ```
> #fixtures for compliance rates verification
> @art = FactoryGirl.create(:unit, name: "art", unit_code: "1110000", parent_unit_id: 1100000)   end 
> ```
> 
> # 在此处添加更多供所有测试使用的辅助方法... end
> 
> 类 ActionDispatch::IntegrationTest 包括 Capybara::DSL
> 
> def 拆解 Capybara.reset_sessions！Capybara.use_default_driver end end

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:00:42.843

看起来你正在传递`@line`更新你应该传递的地方`@line.id`。尝试将其更改为：

```
put :update, id: @line.id, line: { description: @line.description } 
```

# python - 在 Django 中子类化一个类以接受额外的 kwarg

> ID：12045075
> 
> 赞同：0
> 
> 时间：2012-08-20T20:59:38.850
> 
> 标签：python, ajax, django, model, subclass

我正在尝试对 ajax 上传器进行子类化以接受 django 模型的 hash_id（以便它可以在成功上传图像后创建模型）并且在传递额外的 kwarg（widget2_hash_id）时遇到问题。我将不胜感激有关如何正确添加 kwarg 的指导。

视图.py：

```
class S3UploadBackend_Widget2EditableImage(S3UploadBackend):

  def upload(self, *args, **kwargs):
    self.widget2_hash_id = kwargs.pop('widget2_hash_id')

    k = Key(self._bucket)
    chunk = uploaded.read()
    k.set_contents_from_string(chunk)

    # create uploaded file
    fh = tempfile.TemporaryFile()
    k.get_contents_to_file(fh)
    fh.seek(0)
    saveable_file = SimpleUploadedFile(k.name, fh.read())

    # delete aws key and close tempfile
    _media_bucket.delete_key(k)
    fh.close()

    self.widget2 = Widget2.objects.get(hash_id = self.widget2_hash_id)

    self.widget2_editable_image = Widget2EditableImage(image = saveable_file, widget2 = self.widget2)
    self.widget2_editable_image.save()

    if k.key:
      self.key = k.key
      return True
    else:
      # Key creation failed.
      return False

  def upload_complete(self, request, filename):
    # Manually add S3 key to ajaxuploader JSONresponse
    res =  {"aws_file_key": self.key, "url": self.widget2_editable_image.image.url} 
```

视图.py：

```
widget2_editable_image_ajax_uploader = AjaxFileUploader(backend=S3UploadBackend_Widget2EditableImage) 
```

网址.py：

```
(r'^widget2/widget2_image_upload/(?P<widget2_hash_id>[a-fA-F0-9]+)/$', 'widget2.views.widget2_editable_image_ajax_uploader'), 
```

追溯：

```
Traceback (most recent call last):
  File "/home/zain/XXX/lib/Django-1.3.1/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
TypeError: __call__() got an unexpected keyword argument 'widget2_hash_id'

[20/Aug/2012 20:50:44] "POST /widget2/widget2_image_upload/d9dc4fab3d5e0eb45995/?qqfile=s3Zas.jpg HTTP/1.1" 500 870358 
```

编辑：我在课堂上试过这个并得到同样的错误：

```
def __init__(self, *args, **kwargs):
  try:
    self.widget2 = Widget2.objects.get(hash_id = kwargs.pop('widget2_hash_id'))
  except KeyError:
    self.widget2_hash_id = None
  super(S3UploadBackend_Widget2EditableImage, self).__init__(*args, **kwargs) 
```

EDIT2：这里是 AjaxFileUploader 类：

```
class AjaxFileUploader(object):                                                                                                                                                                                                                                                                                                                  
    def __init__(self, backend=None, **kwargs):                           
        if backend is None:                                               
            backend = LocalUploadBackend                                  
        self.get_backend = lambda: backend(**kwargs)                      

    def __call__(self, request, **kwargs):                                
        return self._ajax_upload(request)                                 

    def _ajax_upload(self, request):                                      
        if request.method == "POST":                                      
            if request.is_ajax():                                         
                # the file is stored raw in the request                   
                upload = request                                          
                is_raw = True                                             
                # AJAX Upload will pass the filename in the querystring if it
                # is the "advanced" ajax upload                           
                try:                                                      
                    filename = request.GET['qqfile']                      

                except KeyError:                                          
                    return HttpResponseBadRequest("AJAX request not valid")
            # not an ajax upload, so it was the "basic" iframe version with
            # submission via form                                         
            else:                                                         
                is_raw = False                                            
                if len(request.FILES) == 1:                               
                    # FILES is a dictionary in Django but Ajax Upload gives
                    # the uploaded file an ID based on a random number, so it
                    # cannot be guessed here in the code. Rather than editing
                    # Ajax Upload to pass the ID in the querystring, observe
                    # that each upload is a separate request, so FILES should
                    # only have one entry. Thus, we can just grab the first
                    # (and only) value in the dict.                       
                    upload = request.FILES.values()[0]                    
                else:                                                     
                    raise Http404("Bad Upload")                           
                filename = upload.name                                    

            backend = self.get_backend()                                  

            # custom filename handler                                     
            # Override filename to avoid collisons                        
            filename = unicode(hashlib.sha1(str(datetime.datetime.now())).hexdigest()[0:6]) + filename
            filename = (backend.update_filename(request, filename)        
                        or filename)                                      

            # save the file                                               
            backend.setup(filename)                                       
            success = backend.upload(upload, filename, is_raw)            

            # callback                                                    
            extra_context = backend.upload_complete(request, filename)    

            # let Ajax Upload know whether we saved it or not             
            ret_json = {'success': success, 'filename': filename}         
            if extra_context is not None:                                 
                ret_json.update(extra_context)                            

              return HttpResponse(json.dumps(ret_json, cls=DjangoJSONEncoder)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:26:39.763

## 说明

在你的`urls.py`，你有这个：

```
(r'^widget2/widget2_image_upload/(?P<widget2_hash_id>[a-fA-F0-9]+)/$', 'widget2.views.widget2_editable_image_ajax_uploader'), 
```

当它`url`匹配时，`django`会将请求以及参数发送到给定视图，因此，如果我们将其分解，以下参数将传递给`widget2.views.widget2_editable_image_ajax_uploader`( `view`)：

```
request
*args: []
*kwargs: {'widget2_hash_id':'somehashid',} 
```

现在，词汇中`dispatch`的意思是什么？`django`好吧，基本上，这意味着调用函数。

碰巧`widget2.views.widget2_editable_image_ajax_uploader`有一个调用方法，所以很`django`乐意使用上面提到的参数调用这个方法。

不幸的是，由于您的视图不接受`widget2_hash_id`kwarg，python 将引发错误。它确实如此。

我认为你迷路的重点是你错过了这样一个事实，即通过额外的 arg 是视图，而不是后端。然后视图的工作就是将其传递给后端。

## 解决方案

### 最容易的

您只需要修改您的`__call__`方法，使其接受额外的参数，然后将其传递给`_ajax_upload`方法。

然后，您需要将参数传递给后端。为此，您应该更改以下行：

```
backend.upload(upload, filename, is_raw) 
```

至

```
backend.upload(upload, filename, is_raw, widget2_hash_id) 
```

### 正确的那一个

现在，我必须说我对你在做什么感到有点困惑。您似乎将对象用作视图，但是，您为什么不使用`django`很棒[的基于类的视图](https://docs.djangoproject.com/en/dev/topics/class-based-views/)呢？

文档过去非常缺乏（老实说，我不知道是否仍然如此），所以这里[有一个小指南来帮助您入门](http://www.caktusgroup.com/blog/2011/12/29/class-based-views-django-13/)。

花一些时间学习和使用它们。它们非常易于使用和扩展，从长远来看，它们将为您节省大量时间。

## 在结束语上

请务必使用[django 形式](https://docs.djangoproject.com/en/dev/topics/forms/)，因为它们很摇滚。

# lua - 第 xxx 行的函数有超过 60 个上值

> ID：12045077
> 
> 赞同：1
> 
> 时间：2012-08-20T20:59:48.690
> 
> 标签：lua

我写了一些这样的lua代码：

```
local a1 = 1
local a2 = 2
local a3 = 3
local a4 = 3
local a5 = 3
local a6 = 3
local a7 = 3
local a8 = 3
local a9 = 3
local a10 = 3

local a11 = 3
local a12 = 3
local a13 = 3
local a14 = 3
local a15 = 3
local a16 = 3
local a17 = 3
local a18 = 3
local a19 = 3
local a20 = 3

local a21 = 3
local a22 = 3
local a23 = 3
local a24 = 3
local a25 = 3
local a26 = 3
local a27 = 3
local a28 = 3
local a29 = 3
local a30 = 3

local a31 = 1
local a32 = 2
local a33 = 3
local a34 = 3
local a35 = 3
local a36 = 3
local a37 = 3
local a38 = 3
local a39 = 3

local a40 = 3
local a41 = 3
local a42 = 3
local a43 = 3
local a44 = 3
local a45 = 3
local a46 = 3
local a47 = 3
local a48 = 3
local a49 = 3
local a50 = 3

local a61 = 3
local a62 = 3
local a63 = 3
local a64 = 3
local a65 = 3
local a66 = 3
local a67 = 3
local a68 = 3
local a69 = 3
local a70 = 3

local function fun1(x1, x2, x3, x4, x5, x6, x7, x8, x9, x10)
    print('.......')
end

local function fun2()
    fun1(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10)
    fun1(a11, a12, a13, a14, a15, a16, a17, a18, a19, a20)
    fun1(a21, a22, a23, a24, a25, a26, a27, a28, a29, a30)
    fun1(a31, a32, a33, a34, a35, a36, a37, a38, a39, a40)
    fun1(a41, a42, a43, a44, a45, a46, a47, a48, a49, a50)
    fun1(a51, a52, a53, a54, a55, a56, a57, a58, a59, a60)
    fun1(a61, a62, a63, a64, a65, a66, a67, a68, a69, a70)
end 
```

运行此代码时出现这样的错误：

```
 78: function at line 71 has more than 60 upvalues 
```

我知道这种代码很难看，我可以使用其他方法（比如表格），但是这种代码可能是我的用户编写的。

有人可以为我解释一下，并告诉我如何避免这种情况吗？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T21:06:39.307

> 告诉我如何避免这种情况？

有个老笑话。一个人走进医生办公室说：“当我这样举起手臂时会很痛。” 医生说：“所以不要那样举起你的手臂。”

如果您的用户编写的 Lua 代码无法编译，那不是您可以修复的。这不再是非法的编译错误，例如：

```
if condition  --forgot the then
  return something
end 
```

因此，如果您的代码要接受任意 Lua 脚本进行编译和执行，则它*需要*能够处理无法编译的 Lua 脚本。*不管什么*原因。

如果编译失败，请向用户报告错误并尽可能恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:53:19.770

最多 60 个上值，即关闭闭包的外部范围的值，是 Lua 内部限制之一。当然，您可以通过重新编译 Lua 本身来更改它，但我建议不要这样做。而是将您的值打包在某个表中，其布局由代码逻辑决定。在您的特定示例中，您确实应该使用：

```
local a = {}
a[1] = 1
a[2] = 2
a[3] = 3
a[4] = 3
a[5] = 3
-- etc... 
```

# c - VxWorks：系统内存分区的PART_ID

> ID：12045080
> 
> 赞同：0
> 
> 时间：2012-08-20T20:59:50.607
> 
> 标签：c, memory, malloc, vxworks

诸如`memPartInfoGet()`require之类的功能`PART_ID`，在手册中指出`malloc()`使用系统内存分区的空闲列表。有没有办法获得`struct mem_part* PART_ID`系统分区的标识？能够使用这些功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:20:37.463

`memSysPartId`是我一直在寻找的。

# java - 在 jfreechart 条形图中设置下限/上限

> ID：12045088
> 
> 赞同：0
> 
> 时间：2012-08-20T21:00:20.873
> 
> 标签：java, jfreechart

我是 jfreechart 的菜鸟，我有一个应用程序可以创建一个运行良好的简单条形图。问题是，我希望所有图表显示 1 到 10 的范围。当图表中的最高 val 低于此值时，该较低值将是图表的上限，并且将以不同的增量显示。从在线笔记中我不清楚在哪里改变它....

```
DefaultCategoryDataset barDataSet = new DefaultCategoryDataset();
System.out.println("Setting values:");

barDataSet.setValue(rating.getFlavor(), "category", "Flavor");
barDataSet.setValue(rating.getBody(), "category", "Body");
barDataSet.setValue(rating.getAftertaste(), "category", "Aftertaste");
barDataSet.setValue(rating.getSweetness(), "category", "Sweetness");
barDataSet.setValue(rating.getFloral(), "category", "Floral");
barDataSet.setValue(rating.getSpice(), "category", "Spice");

JFreeChart chart = ChartFactory.createBarChart(null, // title
"category",     // left heading
"score",        // top heading
barDataSet,     // dataset
PlotOrientation.HORIZONTAL, 
false,      // no idea what this is
true,       // or this
false);     // or this

System.out.println("setting bg color");
Color bgcolor = new Color(237, 232, 228);
chart.setBackgroundPaint(bgcolor);

CategoryPlot plot = chart.getCategoryPlot();
plot.setBackgroundPaint(new Color(112,112,112) ); 
```

谢谢，bp

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:10:20.423

您可以通过轴更改显示范围。如果我没记错的话，您可以向 JFreeChart 实例询问 XYPlot，它有一个域 (x) 和一个范围 (y) 轴。两者（当 NumberAxis 的实例时）都将具有 setLowerBound(double) 和 setUpperBound(double) 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-28T21:13:39.850

```
chart.getXYPlot().getRangeAxis().setLowerBound(30.0);
chart.getXYPlot().getRangeAxis().setUpperBound(300.0); 
```

# objective-c - 我不应该覆盖-[UIViewConvtroller view] 吗？

> ID：12045094
> 
> 赞同：0
> 
> 时间：2012-08-20T21:00:53.017
> 
> 标签：objective-c, uiview, uiviewcontroller, uikit, subclassing

我被告知`-(UIView *)view`永远不要覆盖。为什么不？我想为我的自定义使用自定义 UIView 子类`UIViewController`。有什么更好的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:06:12.780

你不应该覆盖`-view`. 要完成您想要的行为，您可以设置视图控制器以从 nib 加载，或者您可以覆盖该`-loadView`方法。在后一种方法中，您可以创建所需的任何视图并将其分配给`self.view`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:05:45.373

如果您使用的是 nib 或故事板，只需将根视图的类设置为新的自定义`UIView`子类。如果您不使用 nib 或情节提要，请在`-loadView`方法中创建自定义子类并将视图控制器的`view`属性设置为它。因此，例如，如果您有一个`UIView`名为 的自定义子类`MyView`，并且您在代码中（而不是在 nib 或情节提要中）创建它，您将执行以下操作：

```
// This code sample assumes compiling with ARC
- (void)loadView
{
  // You should adjust the initial frame to be whatever's appropriate for this
  // view controller
  MyView* view = [[MyView alloc] initWithFrame:CGRectMake(0, 0, 360, 480)];
  [self setView:view];
} 
```

# ios - 图像设置为零时UIImageView不重绘

> ID：12045103
> 
> 赞同：2
> 
> 时间：2012-08-20T21:01:29.913
> 
> 标签：ios, multithreading, cocoa-touch, uiimageview, uiimage

我正在使用 a`UIImageView`来显示静止图像和动画图像。所以有时，我正在使用 `.image`，有时我正在使用`.animationImages`. 这可以。

无论是静态的还是动画的，我都将`UIImages`'s 存储在`item.frames`（见下文）

问题是我想`UIActivityIndicatorView`在加载动画帧时在视图的中心显示一个。我希望在没有图像或框架的情况下发生这种情况。没有做它应该做的行是：

```
[self.imageView removeFromSuperview]; 
```

事实上，此时将其设置为另一个图像也无济于事。似乎这里没有发生任何 UI 内容。顺便提一句，

```
NSLog(@"%@", [NSThread isMainThread]?@"IS MAIN":@"IS NOT"); 
```

打印`IS MAIN`。

那里的图像将一直存在，直到新的动画帧都在那里（1-2 秒）并且它们开始动画

这一切都是从 UIView 的子类运行的，其中 UIImageView 作为子视图。

```
- (void)loadItem:(StructuresItem *)item{

    self.imageView.animationImages = nil;
    self.imageView.image = nil;   

    [self.spinner startAnimating];

    self.item = item;

    if (item.frameCount.intValue ==1){
        self.imageView.image = [item.frames objectAtIndex:0];
        self.imageView.animationImages = nil;
    }else {
        [self.imageView removeFromSuperview];

        self.imageView =[[UIImageView alloc] initWithFrame:self.bounds];
        [self addSubview:self.imageView ];
        if( self.imageView.isAnimating){
            [self.imageView stopAnimating];
        }
        self.imageView.animationImages = item.frames;
        self.imageView.animationDuration = self.imageView.animationImages.count/12.0f;

        //if the image doesn't loop, freeze it at the end
        if (!item.loop){
            self.imageView.image = [self.imageView.animationImages lastObject];
            self.imageView.animationRepeatCount = 1;
        }
        [self.imageView startAnimating];
    }

    [self.spinner stopAnimating];

} 
```

我无知的评估是，一旦该图像设置为零，就不会重绘某些东西。会喜欢一只手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:56:15.107

我发现的不是问题的答案，而是解决问题的更好方法。简单地说，使用 NSTimer 而不是 animationImages。它加载速度更快，不会耗尽内存并且代码更简单。耶！

做这个：

```
-(void)stepFrame{
    self.currentFrameIndex =   (self.currentFrameIndex + 1) % self.item.frames.count;
    self.imageView.image = [self.item.frames objectAtIndex:self.currentFrameIndex];
} 
```

还有这个

```
-(void)run{
    if (self.item.frameCount.intValue>1){
        self.imageView.image = [self.item.frames objectAtIndex:self.currentFrameIndex];
        self.timer = [NSTimer scheduledTimerWithTimeInterval:1/24.0f target:self selector:@selector(stepFrame) userInfo:nil repeats:YES];
    }else{
        self.imageView.image = [self.item.frames objectAtIndex:0];
    }
} 
```

# sql - 在日期和初始值之间进行选择

> ID：12045105
> 
> 赞同：-1
> 
> 时间：2012-08-20T21:01:36.280
> 
> 标签：sql, sql-server, database

我需要从日志中制作图表。日志条目不是定期的。

我想选择日期之间的行以及开始日期之前的值（即，从输入紧接在前的日志开始）。

所以，让我们说：

表`Foo`有`id`和`value`列，

表`Bar`有`id`、`foo_id`和`value`列，并且

表`BarLog`有`id`, `foo_id`, `bar_id`,`bar_value`和`timestamp`.

所以一个Foo可以有很多条。

我需要来自 BarLog 的所有 Bars 的所有行，`foo_id`例如在 和 之间， `07/01/2012`以及`07/31/2012`每个 Bar 的值（行），因为它是 on `07/01/2012`。

希望这是有道理的，如果没有，我会尽力澄清。

* * *

编辑（左上方的上下文）：

让我们再简化一步。如果我有一个带有两个外键`fk_a`and`fk_b`和 a的表，我怎样才能获得带有给定和 distict`timestamp`的最新行。`fk_a``fk_b`

正如所建议的，这里有一个例子。

```
+----+------+------+-------------+
| id | fk_a | fk_b |  timestamp  |
+----+------+------+-------------+
| 1  | 1    | 1    | 01-JUL-2012 |
| 2  | 2    | 2    | 02-JUL-2012 |
| 3  | 1    | 1    | 04-JUL-2012 |
| 4  | 2    | 2    | 05-JUL-2012 |
| 5  | 1    | 3    | 07-JUL-2012 |
+----+------+------+-------------+ 
```

给定 a`fk_a`为 1，我想要第 3 行和第 5 行。因此，仅查看第 1、3 和 5 行（具有`fk_a`1 的行），获取每个中的最新`fk_b`（其中第 3 行比第 1 行更新`fk_b=1`）。

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:31:43.287

对于密集集，创建一个日期表并运行以下查询：

```
DECLARE @StartDate datetime

SET @StartDate = '2012-01-01'

SELECT f.ID as foo_id, b.bar_id, f.Value, GetDate() as DateStamp
FROM Foo f
inner join Bar b on f.id = b.foo_id
WHERE /*enter criteria for bar selection*/
UNION ALL
SELECT f.ID as foo_id, b.bar_id, f.Value, GetDate() as DateStamp
FROM (
    SELECT MAX(bl.timestamp) as bl_timestamp, bl.bar_id as bar_id
    FROM Dates d 
    INNER JOIN BarLog bl on bl.timestamp < d.Date
    WHERE /*enter criteria for bar selection*/
    GROUP BY bl.bar_id
) as pi
INNER JOIN BarLog bl on pi.bar_id = bl.bar_id and bl.timestamp = pi.bl_timestamp
WHERE d.Day_Of_Month = 1 and d.Date between @StartDate and getDate()
  AND /*enter criteria for bar selection*/ 
```

日期表可以类似于[http://it.toolbox.com/wiki/index.php/Create_a_Time_Dimension_/_Date_Table](http://it.toolbox.com/wiki/index.php/Create_a_Time_Dimension_/_Date_Table)或者可以通过以下方式临时创建每个查询：

```
CREATE TABLE #Dates ([Date] datetime, Day_Of_Month int)

DECLARE @cDate datetime
SET @cDate = @StartDate

WHILE @cDate < getdate()
BEGIN
    INSERT INTO #Dates (Date, Day_Of_Month)
    SELECT @cDate, Datepart(d, @cdate)

    SET @cDate = DATEADD(m, 1 + DATEDIFF(m, 0, @cdate), 0)
END 
```

选择后`DROP TABLE #Dates`坐下。

此查询将返回：

Foo_ID、Bar_ID、日期戳值、日期戳

日期戳一次增加 1 个月。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:10:41.660

终于找到了我想要的[这个问题。](https://stackoverflow.com/questions/612231/how-can-i-select-rows-with-maxcolumn-value-distinct-by-another-column-in-sql)基本上只是加入一个分组选择。所以我编辑的答案是这样的

```
SELECT * FROM SomeTable a
JOIN (
    SELECT fk_b, MAX(timestamp) as latest
    FROM SomeTable
    GROUP BY fk_b
) b
ON a.id = b.id
WHERE a.fk_a = @someIdA 
```

这将返回`fk_b`具有指定的每个不同的最新的`fk_a`

最初的问题只是在日期之间有一个简单的 get 的结合

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:46:56.727

你在寻找这样的东西吗？

```
 SELECT bl.bar_value, timestamp
  FROM foo f, bar b, barlog bl
 WHERE     f.id = b.id
       AND b.foo_id = bl.foo_id
       AND timestamp BETWEEN '01-JUL-2012' AND '31-JUL-2012'
       AND b.foo_id = :enter_value_here
ORDER BY timestamp DESC 
```

使用 :enter_value_here 添加您需要数据的 foo_id...

你用的是什么绘图工具？您可以获取数据集并将其推送到 excel 中进行绘图。无论如何，希望上面的查询可以让您更接近您想要做的事情。

# javascript - 使用隐藏的表单字段来存储值有什么缺点？

> ID：12045106
> 
> 赞同：-1
> 
> 时间：2012-08-20T21:01:36.940
> 
> 标签：javascript, performance, security

使用隐藏表单字段来存储值的缺点是什么，否则这些值必须是全局变量或在函数之间传递。例如......像 currentIndex 这样的变量在音乐播放器中随着歌曲的变化而变化，除了全局变量之外很难控制。好吧，至少它在我的破解代码中。我的问题是......将此值存储在隐藏的表单字段中会使我的脚本运行速度变慢，或者这样做会引入安全问题吗？感谢您的帮助，如果这是重复的，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:03:48.243

> 将此值存储在隐藏的表单字段中会使我的脚本运行得慢很多

不会。访问 DOM 比访问变量要慢，但除非您在紧密循环中重复访问该值，否则您不太可能注意到显着差异。对于“从歌曲到歌曲”访问的内容（即每隔几分钟访问一次），它绝对不会产生可衡量的影响。

> 或者这样做会引入安全问题吗？

目前尚不清楚您指的是哪种安全问题。如果它无论如何都将成为客户端变量，那么您的用户总是可以篡改 Javascript 源代码并修改变量的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:03:51.207

如果数据没有提交到服务器，则没有理由将数据存储在隐藏的表单字段中。

# ruby-on-rails-3 - 如何在 Rails 中对链接进行 urlize

> ID：12045112
> 
> 赞同：2
> 
> 时间：2012-08-20T21:01:54.757
> 
> 标签：ruby-on-rails-3

我有一个用户定义的外部 URL，我想通过使用类似于 Django`urlize`过滤器的东西将其转换为链接。怎么可能这样做呢？

我只需要在前面添加一些东西，`http://`或者如果缺少的话。

除非我错过了，`link_to`否则似乎不会这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:13:19.757

如果需要，这是一个简单的辅助方法，可以在前面添加 http 前缀：

```
def url_with_protocol(url)
  /^http/.match(url) ? url : "http://#{url}"
end

> url_with_protocol("google.com")
=> "http://google.com"

> url_with_protocol("http://google.com")
=> "http://google.com"

> url_with_protocol("https://google.com")
=> "https://google.com" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:44:03.643

我可以看到几个解决方案：

*   创建一个助手`urlize(url)`，`http://`如果它丢失则添加
*   覆盖模型上的 url getter 以添加`http://`
*   在模型中添加 before_save 回调以将 url 添加`http://`到 url，从而确保您的数据库中有有效的 url

就个人而言，我只是有一些验证来检查输入的 url 是否有效。在这里，我会使用第三个选项。

# node.js - 即使布局设置为 True，Express Jade 布局也不会呈现

> ID：12045115
> 
> 赞同：1
> 
> 时间：2012-08-20T21:01:55.950
> 
> 标签：node.js, express, pug

我是 Express for Node.js 的新手，我只是按照[Pedro Teixeira 的 Node Tuts Episode 9](http://vimeo.com/16892503)设置一个简单的应用程序。我想试验布局文件，所以我将布局设置为“真”。但是，当我这样做时，它并没有用我的布局渲染，只有我的身体。我应该如何让它正确渲染？下面是我的 app.js 文件、我的 index.jade、我的 layout.jade 以及我渲染页面的屏幕截图。

应用程序.js

```
var express = require('express');

var app = express.createServer();

app.configure(function () {
    app.use(express.logger();
});

app.set('views', __dirname + '/views');
app.set('view engine','jade');
app.set('view options', {layout: true});

app.get('/', function(request, response) {
    response.render('index');
});

app.listen(4000); 
```

索引.jade

```
h2 Hello
p World! 
```

布局.jade

```
!!! 5
  html
    head
      title My template
    body
  #main
        h1 Content goes here
        p Testing 123
        #container!= body 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T21:03:23.397

如果您使用的是 Express 3，这是正常的，模板的呈现方式已经改变。

你的布局需要是这样的：

```
!!! 5
  html
    head
      title My template
    body
  #main
        h1 Content goes here
        p Testing 123
        block content 
```

你的模板：

```
extends layout

block content
  h1 Something 
```

这里的例子：

[https://github.com/dotcloud/express-on-dotcloud/blob/master/app/views/layout.jade#L64](https://github.com/dotcloud/express-on-dotcloud/blob/master/app/views/layout.jade#L64)

[https://github.com/dotcloud/express-on-dotcloud/blob/master/app/views/welcome.jade#L1](https://github.com/dotcloud/express-on-dotcloud/blob/master/app/views/welcome.jade#L1)

如果您从 Node 和 Express 开始，请随意克隆此演示/教程应用程序：
[https ://github.com/dotcloud/express-on-dotcloud](https://github.com/dotcloud/express-on-dotcloud)

您可以在本地使用它并发现 Express 3 的一些不错的功能，如果您想共享您的应用程序，则所有设置都可以推送到[dotCloud](http://dotcloud.com)。

# visual-studio-2012 - 无法安装VS 2012

> ID：12045116
> 
> 赞同：1
> 
> 时间：2012-08-20T21:02:01.923
> 
> 标签：visual-studio-2012, failed-installation

尝试安装 VS2012 utlimate RC，但是我无法成功，因为每次尝试都在下面的屏幕截图中停止......有人有同样/类似的问题吗？

所以我的安装在这里停止，并没有从这一点开始......我现在已经离开了 3 个小时，但它仍然是一样的......任何想法，想法将不胜感激......

![在此处输入图像描述](../Images/d56b73d2e29815266500d6986bd775fd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:04:18.250

Visual Studio 2012 现在是 RTM。所有 pre-RTM 版本现已过时。因此，如果您是 MSDN 订阅者，请继续下载 RTM。如果您不是，您可以下载试用版并在它达到公共 RTM 后稍后购买。

# dns - VBox网络模式测试Win 2008服务器？

> ID：12045117
> 
> 赞同：0
> 
> 时间：2012-08-20T21:02:11.713
> 
> 标签：dns, virtualbox, dhcp

我有两台机器在我的 VirtualBox 上运行，一台是 Windows XP 客户端，另一台是安装和配置了 DHCP 和 DNS 的 2008 服务器。

现在我想用我的客户端机器测试我的服务器设置，我尝试了 VirtualBox 中的所有网络模式，但它们都不起作用

*   我认为 NAT 模式从 VirtualBox 本身获取 dhcp 设置
*   桥接模式从我的路由器获取 dhcp

...

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:23:09.180

我的第一个猜测是将两个虚拟机配置为具有配置为“内部网络”的单个虚拟网络适配器，并在两个虚拟机上设置一个静态 IP 地址。这将有效地将两个客人隔离到他们自己的专用网络进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T15:07:03.047

我建议您在“桥接模式”下在两个虚拟机上设置网络适配器。

在 Windows Server 2008 上，您必须选择类型：**Intel PRO/1000 MT Server (82545EM)**

这样你的虚拟机就会得到一个和你的宿主机在同一个局域网的IP地址，三台机器就可以通信了

# haskell - 为 Haskell 平台（标准库）生成 ctags，专门用于前奏

> ID：12045118
> 
> 赞同：8
> 
> 时间：2012-08-20T21:02:18.790
> 
> 标签：haskell, vim, ctags, exuberant-ctags

我已经使用*Homebrew*在我的 Mac 上安装了 Haskell ，即`brew install ghc haskell-platform`.

我正在寻找一种方法来生成标准 Haskell 平台库（模块）的*ctags*文件，以便在使用*Vim*编码时浏览源代码。我特别需要`Prelude`和其他最流行的模块，比如`Data.List`等等。

我知道[可以通过 Hoogle 在网络上获得源代码](https://stackoverflow.com/a/11776323/207894)，但是为了学习目的，我可以更轻松地随时*跳转到源代码。*

1.  安装 Haskell 平台时源在哪里？
2.  安装 Haskell 平台时是否安装了源代码，或者只是编译的二进制文件或类似的东西？
3.  如何使源代码可用于在 Vim 中浏览？就像将生成的`tags`文件放在某处并告诉 Vim 从中读取一样。我也明白没有必要重新生成`tags`文件，因为这些模块几乎是静态的，不会经常更新。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T10:37:17.283

*permeakra*在评论中回答了 1) 和 2) 。我将尝试通过描述类似于我正在使用的设置来涵盖 3)。首先是针对基础库的简单解决方案，然后是针对任何 Haskell 源代码包的更通用的解决方案。

作为先决条件，我们需要一个为 Haskell 生成标签文件的工具：

```
cabal install hothasktags 
```

而不是`hothasktags`你可能会使用你最喜欢的。参见例如[https://github.com/bitc/lushtags](https://github.com/bitc/lushtags)页面，其中列举了其中一些。

然后我们需要有可用的基础库的资源。这里我使用的是来自 GitHub 的：

```
cd /space/haskell/sources/ # tweak to your personal taste
git clone https://github.com/ghc/packages-base.git 
```

或者，我们可能会切换到特定的分支。例如：

```
git checkout ghc-7.4 
```

跑去`git branch -a`看看所有的可能性。

现在让我们为基础库生成标签（我没有可用的 Mac，因此必须假设该命令在那里工作，或者您可以适当地调整它）：

```
cd packages-base
export LC_ALL=C # needed for case-sensitive searching
find -type f | egrep \.hs$\|\.lhs$ | xargs -Ii hothasktags i | sort > tags 
```

（*关于排序的注意事项*：当我不使用排序时，我的 Vim 会抱怨。有关`LC_ALL`说明，请参见例如这篇[博](http://www.skorks.com/2010/05/sort-files-like-a-master-with-the-linux-sort-command-bash/)文）

现在我们需要让 Vim 知道我们生成的标签。最简单的方法可能是将以下行放入您的`$HOME/.vimrc`：

```
autocmd FileType haskell setlocal tags+=/space/haskell/sources/packages-base/tags 
```

这样，将为我们打开的每个 Haskell 文件设置基本库的标签。如果这不是可取的，我们可以将以下 Vim 命令放入`.vimrc`：

```
autocmd FileType haskell command! SetGHCTags
    \ setlocal tags+=/space/haskell/sources/packages-base/tags 
```

`:SetGHCTags`并按需调用。

对于适用于所有 Haskell 源包的更通用的解决方案，我们可以使用以下函数（放入`.vimrc`或放入专用于 Haskell 文件类型的 Vim 文件中）：

```
" Add 'tags' of the given package to the current tag stack. The package sources
" must be available in "/space/haskell/sources/<package>" and the tags must be
" generated for it.
fun! s:SetHaskellTags(pathInHaskellSrcDir) "{{{
  let tagFile = "/space/haskell/sources/" . a:pathInHaskellSrcDir . "/tags"
  if filereadable(tagFile)
    exe "setlocal tags+=" . tagFile
  else
    echoerr "File does not exist or is not readable: " . tagFile
  endif
endfunction "}}}
command! -nargs=1 SetHaskellTags call <SID>SetHaskellTags(<args>) 
```

例如将其用于`Shelly.hs`库：

```
cd /space/haskell/sources/
git clone https://github.com/yesodweb/Shelly.hs.git
cd Shelly.hs
regenerate-haskell-tags # [1] 
```

在 Vim 中只需调用：

```
:SetHaskellTags "Shelly.hs" 
```

有改进的空间——`SetHaskellTags`如果不存在，可以生成标签，或者甚至可以获取源、可配置的 Haskell 源代码存储、目录完成等。但现在对我来说已经足够好了。所以至少分享我的解决方案。如果我完成其中的一些改进，我会回到这里。

[1]：最好存储[`regenerate-haskell-tags`](https://gist.github.com/3673150#file_regenerate_haskell_tag.sh)在您的`$PAHT`.

# ruby-on-rails - Rails 3.2 查询

> ID：12045119
> 
> 赞同：0
> 
> 时间：2012-08-20T21:02:25.573
> 
> 标签：ruby-on-rails, ruby, activerecord

我有以下模型类：

```
class OptionCategory < ActiveRecord::Base
  attr_accessible :disabled, :list_index, :name
  has_many :options
end

class Option < ActiveRecord::Base
  attr_accessible :disabled, :name, :option_category_id
  belongs_to :option_category
  has_and_belongs_to_many :products
end

class Product < ActiveRecord::Base
  attr_accessible :annual_fee, :bal_transfer_intro_apr_end, :bal_transfer_intro_apr_start, :balance_transfer_fee, :description, :image, :image_cache, :name, :pur_intro_apr_end, :pur_intro_apr_start, :sign_up_bonus, :sign_up_bonus_type, :url
  mount_uploader :image, ImageUploader

  has_and_belongs_to_many :options
end 
```

在我的一个控制器中，我收到一组选项 ID，我想查询具有与这些 ID 匹配的选项的产品。在 Rails 中有没有简单的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:03:52.003

您可以使用以下方法找到所有选项并优化 N+1 `includes`：

```
Option.includes(:products).where(:id => array_of_ids) 
```

这将执行单次`select * from options where id in [array_of_ids]`加载选项、提取`product_id`字段并执行单次附加`select * from products where id in [product_ids]`查询。

您可以使用`has_many :through`, 并创建一个模型来包装连接表，从而使自己更容易做到这一点。如果调用此模型`ProductOptions`，您将能够简单地执行以下操作：

```
Product.find(ProductOptions.where(:option_id => array_of_option_ids).map(&:product_id).uniq) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:37:03.793

```
Product.joins(:options).where(:options => {:id => params[:options]}).group(:id) 
```

# java - 如果浮点数是整数（java），将小数位数设置为0？

> ID：12045137
> 
> 赞同：1
> 
> 时间：2012-08-20T21:03:45.410
> 
> 标签：java, floating-point, integer, decimal

我正在使用浮点数来保存分数。分数可以是整数或小数。默认情况下，浮点数显示为 0.0、1.0 等。如果数字没有小数，我需要它显示为 0、1 等。如果它有小数，那么我需要显示小数。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:08:30.970

```
String string;
float n = 3.0f;
if (n % 1 == 0) {
    string = String.valueOf((int) n);
} else {
    string = String.valueOf(n);
}
System.out.println("Score: " + string); 
```

~~警告：未经测试的代码。;)~~

好的，我已经对其进行了测试并修复了一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T21:14:04.523

你可以使用：

```
NumberFormat.getInstance().format(score); 
```

存在时以小数位显示。

为了防止舍入错误，`score`这里可以使用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)来表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:22:52.250

您最好的选择是计算出最小的分数粒度，然后将其与适当的乘数一起使用。

例如，如果最小增量是 0.01，则使用 100 的乘数。如果您的分数 % mulitplier = 0，那么您就知道它是一个整数。

这样您就不必担心舍入或表示错误。

# jquery - Fancybox 覆盖不透明度

> ID：12045147
> 
> 赞同：0
> 
> 时间：2012-08-20T21:04:53.920
> 
> 标签：jquery, fancybox, fancybox-2

我正在使用 fancybox 插件版本 2.0.6

我正在尝试更改文档中详述的覆盖不透明度，但无法使其正常工作。任何人都可以建议我如何做错了。

谢谢。

这是我所拥有的：

```
 $(function () {
        $(".fancybox")
        .attr('rel', 'gallery')
        .fancybox({
            padding : 0,
            margin : 0,
            arrows: false,
            closeBtn: false,
            closeClick: true,
            openEffect : 'none',
            openSpeed : 100,
            closeEffect : 'none',
            closeSpeed : 100,
                helpers : {
                    title : null,
                    speedIn: 0,
                    speedOut: 0,
                    opacity: 0.8,
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:07:13.177

以这种方式尝试该`helpers`选项：

```
helpers : {
 overlay : {
  speedIn    : 0,
  speedOut   : 0,
  opacity    : 0.5
 },
 title : null
} 
```

**编辑**（2012 年 9 月 12 日）：`helpers =>overlay=>speedIn`自fancybox v2.1 以来，该选项已被删除。它对 v2.0.6 及以下版本仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-10T09:08:58.397

我发现这个选项效果最好，它使用 CSS RGBA...

```
$(".fancybox").fancybox({
    helpers : {
        overlay : {
            css : {
                'background' : 'rgba(58, 42, 45, 0.95)'
            }
        }
    }
}); 
```

这是官方小提琴：http: [//jsfiddle.net/jRsjK/](http://jsfiddle.net/jRsjK/)

# magento - Magento 图片不存在

> ID：12045151
> 
> 赞同：0
> 
> 时间：2012-08-20T21:05:15.720
> 
> 标签：magento, csv, import

我正在安装最新版本的 magento(1.7.0.2) 当我尝试 magento 导入 csv 文件时它显示错误图像不存在我正在使用休闲步骤

1）在产品中输入数据并导出到csv文件，然后再次将数据输入到csv文件中导入

2) 图像放置在`media->catalog->product->products`我尝试使用不同的图像 url 路径

```
/media/catalog/product/products/sample.jpg
/products/sample.jpg 
```

3）图像也放置在`media->import`图像 url 路径

```
/media/import/sample.jpg
/sample.jpg 
```

我尝试使用第二种方法在 csv 文件中删除图像数据将被导入，但图像 url 无法使用图像导入数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:57:07.923

我也遇到了同样的问题，发现要导入的图像的[这个线程](http://www.meteorify.com/2012/05/importing-product-images-csv-magento-1-7-0-0/)`/image.jpg`没有文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T11:52:26.563

根据我自己的观察补充几点：

1.  当您将带有图像的产品导入到 magento 时，请确保目录 media/catalog/product 为空
2.  将您的产品图片上传到目录 media/import/product/ （如有必要，请创建它）
3.  确保 csv 文件中的图像路径具有前导 /

上传您的文件并使用图像导入您的产品。

在其他几个失败之后，这个解决方案对我有用。

（在 Magento 1.8.0.1 上测试）

# jquery - JQuery 在代码隐藏执行之前禁用我的按钮

> ID：12045152
> 
> 赞同：2
> 
> 时间：2012-08-20T21:05:16.447
> 
> 标签：jquery, asp.net, imagebutton

我有一个带有 imageButton 的 Asp.net (Ver4) 网页，用于通过 imagebuttons 单击事件后面的代码将表单数据提交到数据库。在后面的代码中，我使用 response.redirect 将它们移动到感谢页面，它是例程后面代码的最后一行。由于数据库有点慢，有时我想禁用点击事件，直到页面被重定向。我正在尝试用 jquery 来做到这一点。我已经能够禁用该按钮并使其显示为已禁用，但是我背后的代码根本没有触发。

这是我正在使用的 JQuery

```
function test() {
    $("#ImageButton1").attr("disabled", "disabled").css('opacity',' 0.5');
} 
```

这是按钮的 aspx 代码

```
<div class="button">
      <asp:ImageButton ID="ImageButton1" runat="server" Height="28px"
           OnClientClick="test();"
           onclick="ImageButton1_Click" 
           ImageUrl="media/finishbutton.jpg" 
           style="margin-top: 0px" Width="97px" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:29:47.137

最简单的解决方案是在点击事件触发后稍后禁用该元素。例如：

```
 function test() {
    setTimeout(function () { $("#<%=ImageButton1.ClientID %>").attr("disabled", "disabled").css('opacity', ' 0.5'); }, 10);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:17:51.810

试试这个：

```
 function test() {
$("#<%=ImageButton1.ClientID%>").attr("disabled", "disabled").css('opacity',' 0.5');
//$("#ImageButton1").css('opacity', ' 0.5');

} 
```

在 aspx 中

```
 <div class="button">
          <asp:ImageButton ID="ImageButton1" runat="server" Height="28px" OnClientClick="javascript:test();"
              onclick="ImageButton1_Click" 
              ImageUrl="media/finishbutton.jpg" style="margin-top: 0px" Width="97px" />
        </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:12:35.693

尝试在函数`return true;`末尾添加`test()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T21:19:45.777

您可以添加 beforeAsyncPostBack 并禁用[此处](http://www.dotnetcurry.com/ShowArticle.aspx?ID=256)描述的按钮，或者仅从单击处理程序返回 true。此外，您可能希望使用 clientID 来禁用按钮，而不仅仅是服务器理解的元素 ID。

# javascript - Phonegap 应用程序 - 防止 iphone 将号码变成拨号链接

> ID：12045156
> 
> 赞同：3
> 
> 时间：2012-08-20T21:05:31.740
> 
> 标签：javascript, iphone, jquery-mobile, cordova

> **可能重复：**
> [如何在 Mobile Safari 中禁用电话号码链接？](https://stackoverflow.com/questions/226131/how-to-disable-phone-number-linking-in-mobile-safari)

我正在使用 phonegap/jquery-mobile 为客户开发一个移动报告应用程序。我们拥有的某个报告将输出看起来类似于电话号码的 ID。添加到 dom 的元素如下所示：

```
<div>ID: 54321777</div> 
```

在 iphone 上进行测试时，我们注意到它会将这些 ID 转换为打开拨号器应用程序的链接。有什么方法可以明确防止这种行为？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T21:08:15.433

```
<meta name="format-detection" content="telephone=no" /> 
```

[来源](https://webmasters.stackexchange.com/questions/4459/keep-iphone-browser-from-turning-numbers-into-links)

# internet-explorer - IE中的不透明度问题

> ID：12045166
> 
> 赞同：0
> 
> 时间：2012-08-20T21:06:19.663
> 
> 标签：internet-explorer, css

我正在尝试在 css 中为 IE 创建不透明背景颜色

css 过滤器会将元素更改为不透明度为 80，我只希望背景颜色是透明的。

```
.element{

//for Chrome and FF
'background-color': rgba(0, 0, 0, 0.8)

//for IE..but it will make entire element having 80 opacity instead of the background-color only....   
filter:alpha(opacity=80)

} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:33:47.913

我建议使用名为[CSS3Pie](http://css3pie.com/)的 IE 脚本。

这是一个将一些 CSS3 属性实现到旧版本 IE 中的脚本，包括带有 alpha 通道颜色的背景。这意味着您可以像所有其他浏览器一样为 IE 编写（几乎）标准 CSS 代码。

使用您网站中的 PIE.htc 文件，您的 CSS 代码将如下所示：

```
.element{
    //for Chrome and FF
    background: rgba(0, 0, 0, 0.8);
    //for IE...
    -pie-background: rgba(0, 0, 0, 0.8);
    behavior: url(PIE.htc);
} 
```

有关更多信息，请参阅[CSS3Pie 文档](http://css3pie.com/documentation/supported-css3-features/#pie-background)。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:12:05.377

尝试使用渐变滤镜，它接受 AARRGGBB 格式的颜色：

```
 -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#80112244,endColorstr=#80112244)";
      filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr=#80112244,endColorstr=#80112244); 
```

[http://msdn.microsoft.com/en-us/library/ms532997(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms532997(v=vs.85).aspx)

# django - 从 1.3 升级到 1.4 时/之后的 NoReverseMatch

> ID：12045169
> 
> 赞同：0
> 
> 时间：2012-08-20T21:06:24.047
> 
> 标签：django, exception, django-urls

该项目在 Django 1.3 上运行良好，一旦我更新到 1.4 的这个错误结果：

NoReverseMatch at / Reverse for 'app_list' 带有参数 '()' 和关键字参数 '{'app_label': ''}' 未找到。

网址.py：

```
from views import home

urlpatterns = patterns('',
    (r'^$', home),
    (r'^projects/', include('projects.urls')),
    (r'^admin/', include(admin.site.urls)),
) 
```

项目网址：

```
from django.conf.urls.defaults import *
from views import *

urlpatterns = patterns('projectcenter.projects.views',
    url(r'project/(\d+)/$', project_detail, name = 'project_detail' ),
) 
```

视图.py

```
from django.http import HttpResponse
from django.template import  RequestContext 
from django.shortcuts import render_to_response
from projects.models import Project

def home(request):

    template = 'index.html'
    user = request.user
    projects = Project.objects.current()
    if projects:
        map_center = projects[0].location 
    else:
        map_center = (0, 0)

    data = {'user': user,
            'projects': projects,
            'map_center': map_center ,
            }
    return render_to_response(template, data, 
                          context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:10:38.713

我今天遇到了这个问题，只需将相关行更新为：

```
url(r'^admin/', include(admin.site.urls)), 
```

不知道为什么会修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:18:30.603

在我从这个模板继承的 index.html 模板中：

{% 扩展“admin/change_list.html”%}

我删除了上面的行，它工作正常。

我真的不知道为什么它起作用了。

谢谢。

# actionscript-3 - AS3 - 停止 onEnterFrame 函数不断运行

> ID：12045173
> 
> 赞同：0
> 
> 时间：2012-08-20T21:06:37.213
> 
> 标签：actionscript-3, enterframeevent

好的，我有一个与我的“onEnterFrameHandler”函数相关联的碰撞测试函数。

所以为了简化它的外观：

```
onEnterFrameHandler(e:Event):void{
testCollision();
}

testCollision():void{
  trace("always running");
  if(1_MC.hitTestObject(2_MC)){
    //do stuff
  }
} 
```

问题是，它总是在运行。不断运行以测试碰撞。我有一种感觉，这可能是导致[该项目](http://www.newgrounds.com/dump/item/2c08a2987743683e1fa60a54b3a8b8b2)滞后的原因。

您是否知道控制需要能够随时检查事件但在事件未发生时不运行的功能的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:27:17.660

很难回答这个问题，因为当您不检查碰撞时它非常模糊。为了提高性能，不是改变碰撞测试的方式，而是何时进行检查。

所以你可以通过简单地添加一个 if 语句来做到这一点，如下所示：

```
if (doCollisionTest){testCollision();} 
```

但这并不能解决何时`doCollisionTest`是真还是假，这是棘手的部分，无法从您提供的信息中回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:32:07.177

如果你不需要检查每一帧，你可以使用 Timer 只检查你喜欢的频率，例如，如果你认为每秒检查 3 次就足够了，你可以这样设置：

```
var timer:Timer = new Timer(333); //run 3 times a second
timer.addEventListneer(TimerEvent.TIMER, collisionTest, false, 0, true);
timer.start();

function collisionTest(e:Event = null):void {
   //do you collision stuffs
} 
```

然后，如果出于某种原因您想暂时禁用它，请使用`timer.stop()`，然后`timer.start()`再次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:53:34.987

通常你总是在游戏循环中检查碰撞。您提供一个标志来指示是否需要检查某些内容。

附带说明一下，考虑使用[碰撞检测工具包](http://code.google.com/p/collisiondetectionkit/)，我想你会发现它可以处理几乎所有关于碰撞的情况。

# c# - 无法识别方法 'System.String ToString()' 方法，并且该方法无法转换为存储表达式

> ID：12045176
> 
> 赞同：8
> 
> 时间：2012-08-20T21:06:41.693
> 
> 标签：c#, entity-framework, entity-framework-4, linq-to-entities

我查看了与此相关的所有示例，但未能解决我的问题。

我在 asp .net mvc3 中创建一个下拉列表。

我有一个返回的存储库：

```
 public IEnumerable<SelectListItem> GetPropertyTypeSelectList()
    {
        var propertyTypes = from p in db.PropertyType
                                orderby p.PropertyTypeDescription
                                select new SelectListItem
                                {
                                    Text = p.PropertyTypeDescription,
                                    Value = p.PropertyTypeId.ToString()
                                };
        return propertyTypes;
    } 
```

我的视图模型如下所示：

```
public class AddPropertyViewModel
{
    public Property Property { get; set; }
    public IEnumerable<SelectListItem> PropertyTypes { get; set; }
    public IEnumerable<SelectListItem> FurnishedTypes { get; set; }
} 
```

我的 HttpGet 的“创建”操作控制器如下所示：

```
 public ActionResult AddProperty()
    {
        AddPropertyViewModel viewModel = new AddPropertyViewModel
        {
            PropertyTypes = websiterepository.GetPropertyTypeSelectList()

        };
        return View(viewModel);
    } 
```

视图是这样的：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Property.PropertyType)
        @Html.DropDownListFor(model => model.Property.PropertyType, Model.PropertyTypes)
    </div> 
```

我收到上面的错误。从我读过的内容来看，似乎是 ToString() 导致了问题。但我不知道如何纠正它。

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-20T21:11:21.663

LINQ to SQL 不知道如何将`.ToString()`调用转换为 SQL 表达式。

所以替换：

```
var propertyTypes = 
    from p in db.PropertyType
    orderby p.PropertyTypeDescription
    select new SelectListItem
    {
        Text = p.PropertyTypeDescription,
        Value = p.PropertyTypeId.ToString()
    }; 
```

和：

```
var propertyTypes = db
    .PropertyType
    .OrderBy(x => x.PropertyTypeDescription)
    .ToList()
    .Select(x => new SelectListItem
    {
        Text = p.PropertyTypeDescription,
        Value = p.PropertyTypeId.ToString()
    }); 
```

请注意`.ToList()`在构建表达式直到`OrderBy`子句之后急切执行 SQL 查询的调用，然后在完全支持表达式`.ToString()`的客户端（LINQ to Objects 而不是 LINQ to Entities）上执行。`.ToString()`

所以这里基本上我们正在构建一个 SQL 查询，直到 OrderBy 子句（包括），然后调用 .ToList 来急切地执行这个查询并在客户端获取结果集。然后我们继续使用 .Select 语句进行链接。但是我们不再做任何 LINQ to Entities 或 SQL 的东西。我们现在正在执行 LINQ to Objects，因为所有结果集现在都在内存中。在 LINQ to Objects 中执行 .ToString 不会构成任何挑战。

另一种可能性是使用`SqlFunctions.StringConvert`知道如何将其转换为 SQL 的内置函数。这样你就可以保持懒惰：

```
var propertyTypes = 
    from p in db.PropertyType
    orderby p.PropertyTypeDescription
    select new SelectListItem
    {
        Text = p.PropertyTypeDescription,
        Value = SqlFunctions.StringConvert((double)p.PropertyTypeId)
    }; 
```

# android - 原生 Android 应用程序上的 Ajax 请求

> ID：12045182
> 
> 赞同：0
> 
> 时间：2012-08-20T21:06:59.367
> 
> 标签：android, cordova, sencha-touch-2

我已经用 Android 的 PhoneGap 打包了一个 Sencha Touch 2 应用程序。我无法让 ajax 请求在我的本机应用程序上工作。[当我通过http://mydomain.com/mysenchaapp/android/assets/www/](http://mydomain.com/mysenchaapp/android/assets/www/)上的浏览​​器处理请求时，它工作正常，但是，当我通过模拟器作为本机应用程序运行我的应用程序时，我的请求失败。我认为如果我能让 fiddler 也处理原生应用程序的请求会很有帮助，但我也无法弄清楚这一点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:17:23.733

在本机应用程序上，您可以使用跨域获取请求，而无需使用 JSONP。我让它工作。我访问 servlet 的问题是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:14:33.853

您不能将 Ajax 用于跨域 GET 请求，而应使用 JSONP。查看文档`Ext.data.JsonP.request()`，但是如果我没记错的话，您可以使用 Ajax 来发帖。这在上传类似 base64 字符串（对于 GET 请求来说太大）时会派上用场

# java - java异常处理和延续

> ID：12045183
> 
> 赞同：-1
> 
> 时间：2012-08-20T21:07:00.210
> 
> 标签：java

我有一个 Java 程序，我从不同的来源获取数据。有时在阅读时我看到异常并且程序正在退出。我的是一个每 10 分钟运行一次的程序。

```
Public static void main(Strings[] args)
{
...readsource();
}

Private static void readsource() throws IOException
{
...
} 
```

问题：我能够获取/查看异常。但是我希望程序继续下去 最好的逻辑是什么？我没有看到 try-catch-finally 也没有解决..我希望程序即使在看到异常之后也能继续（我的意思是下一次迭代应该继续）。这看起来是一个基本问题，不知道如何解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:09:02.710

然后您需要捕获当前未执行的异常。

```
try  {
    readsource();
} catch (IOException e) {
   // do something, never catch an exception and not do anything
}

//continue. 
```

请注意，异常通常表明有问题。除非你打算对异常做点什么，否则修复导致异常的条件可能会更好......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:11:32.357

您必须在方法中提供错误处理程序，即用 try-catch 块包围对 readsource() 的调用。

```
 public static void main(Strings[] args)
   {
      try{
         ...readsource();
      }
      catch(IOException ioe){
           //handle the error here,e.g don't do anything or simply log it
      }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T21:16:14.847

如果您不在 catch 块中重新抛出异常，则执行将脱离 catch 块的末尾并继续执行，就好像没有异常一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T21:21:52.710

如果你的意思是你想回忆一下抛出异常的方法，或者不只是把它放在一个while循环中，即：

```
Public static void main(Strings[] args)
{
    boolean run=true;
    while(run) {
    try {
            System.out.print("Hello,");
            readsource();
            throw new IOException();
            if(1==2)run=false;//stop the loop for whatever condition
        } catch(IOException ioe) {
            ioe.printStackTrace();
        }
        System.out.println(" world!");
    }
   }

}

Private static void readsource() throws IOException
{
...
} 
```

# c++ - C++ 如何在客户端服务器模型中处理这个额外的任务？

> ID：12045189
> 
> 赞同：0
> 
> 时间：2012-08-20T21:07:24.657
> 
> 标签：c++, client-server

我`server.cpp`在后台运行

`client.cpp`将连接到服务器并执行其任务。

我对服务器进行编码以侦听连接，`while(1)`并为客户端创建一个进程。

但我有一个提醒功能，需要在特定时间给客户发送电子邮件。如何在此服务器、客户端 cpp 文件中一起运行该功能？它应该在服务器或客户端文件中运行，以什么方式运行？我曾尝试在 client.cpp 上 fork()，但问题是它导致我的客户端无法正常工作。

我应该在哪里添加此代码，以及如何在执行监听连接时使其工作`server.cpp`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:17:04.503

在服务器代码中：

```
while(1) {
  check for update time and 
        fork updater if needed
  listen for clients
  fork client
} 
```

或者，服务器可以使用以下代码创建一个单独的线程：

```
while (1) {
   sleep for some time
   update customers
} 
```

# ldap - 根据计数和偏移量获取结果的选项

> ID：12045197
> 
> 赞同：0
> 
> 时间：2012-08-20T21:08:23.983
> 
> 标签：ldap

有没有办法使用计数和偏移量从 LDAP 获取结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:46:38.677

返回到搜索请求的条目永远不会以任何方式排序，属性、属性选项或属性值也不会排序。但是，有些服务器支持 VLV 和服务器端排序。

有关详细信息，请参阅[LDAP 搜索](http://ff1959.wordpress.com/2011/07/27/mastering-ldapsearch/)。

# android - 为什么按钮很大？

> ID：12045198
> 
> 赞同：0
> 
> 时间：2012-08-20T21:08:27.477
> 
> 标签：android

我有以下包含一个按钮的布局，我正在尝试减小按钮的大小，主要是高度，但按钮高度允许保持不变

```
<LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/buttonlayout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:gravity="right"
            android:orientation="horizontal"
           android:background="#FFDBE2ED"
             android:paddingBottom="0dp"
              android:paddingTop="0dp" >

            <!--Button
                android:id="@+id/btnSave"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="2px"
                android:layout_marginLeft="10px"
                android:layout_marginRight="10px"
                android:layout_marginTop="2px"
                android:height="15dp"
                android:text="Save"
                android:textSize="15sp"
                android:width="70dp" >
            </Button -->

            <Button
                android:id="@+id/btnClear"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="0px"
                android:layout_marginLeft="10px"
                android:layout_marginRight="3px"
                android:layout_marginTop="2px"
                android:height="0dp"
                android:text="Clear"
                android:textSize="15sp"
                android:width="70dp"
                  >
            </Button>
       </LinearLayout> 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:12:21.343

您正在使用`android:layout_height="wrap_content"`这意味着它将始终与其中的内容一样高。尝试使用该值来改变高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:25:42.243

刚试过你的代码，按钮看起来不错。你想让它看起来像什么？按钮与当前 android 主题定义的一样小（短）。您必须将按钮样式更改为自定义样式，以使按钮内部的间距不同以使其更短。

当您放置标准 android 按钮时，android 将使用其主题样式，包括用于按钮背景的 9-patch 图像。该图像具有文本的内部填充。如果您需要按钮的不同外观，则需要创建一个从 Button 继承的自定义 Button 控件并覆盖样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T21:16:31.287

`android:layout_width="wrap_content"
android:layout_height="wrap_content"`

`wrap_content`您可以使用 DP（密度独立像素）指定视图的宽度或高度，而不是使用，尝试更改`wrap_content`为`50dp`适合您需要的任何值。

# c# - Ninject 在加载依赖项时抛出异常

> ID：12045201
> 
> 赞同：3
> 
> 时间：2012-08-20T21:08:39.057
> 
> 标签：c#, dependency-injection, ninject

在开发中成功使用我的应用程序几周后，我将它发送给了我的客户。应用程序使用 Ninject 来处理依赖关系。

当我尝试在客户端机器上运行应用程序时，出现错误：

```
Description: The process was terminated due to an unhandled exception.
Exception Info: System.IO.FileNotFoundException
Stack:
   at System.Reflection.RuntimeAssembly.GetExportedTypes(RuntimeAssembly assembly, ObjectHandleOnStack retTypes)
   at System.Reflection.RuntimeAssembly.GetExportedTypes()
   at Ninject.Infrastructure.Language.ExtensionsForAssembly.HasNinjectModules(Assembly assembly)
   at Ninject.Modules.AssemblyNameRetriever.AssemblyChecker.GetAssemblyNames(IEnumerable`1 filenames, Predicate`1 filter)
   at Ninject.Modules.AssemblyNameRetriever+AssemblyChecker.GetAssemblyNames(System.Collections.Generic.IEnumerable`1<System.String>, System.Predicate`1<System.Reflection.Assembly>)
   at Ninject.Modules.AssemblyNameRetriever.GetAssemblyNames(System.Collections.Generic.IEnumerable`1<System.String>, System.Predicate`1<System.Reflection.Assembly>)
   at Ninject.Modules.CompiledModuleLoaderPlugin.LoadModules(System.Collections.Generic.IEnumerable`1<System.String>)
   at Ninject.Modules.ModuleLoader.LoadModules(System.Collections.Generic.IEnumerable`1<System.String>)
   at Ninject.KernelBase..ctor(Ninject.Components.IComponentContainer, Ninject.INinjectSettings, Ninject.Modules.INinjectModule[])
   at MyApplication.Main.Application_Start()
   at MyApplication.Main..ctor()
   at MyApplication.Program.Main() 
```

什么会导致此异常？

框架 4.0 NInject 3.0.0.0

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:24:40.987

我猜想 IoC 容器（Ninject）正在寻找一个无法找到的组件来反映。也许您的部署没有正确打包程序集？这也可以解释为什么它可以在您的开发机器上运行，但不能在客户端机器上运行。

# .htaccess - 如何使用 htaccess 重定向特定页面

> ID：12045205
> 
> 赞同：2
> 
> 时间：2012-08-20T21:08:52.500
> 
> 标签：.htaccess, redirect

我已经到处寻找用于重定向单个页面的 htaccess 代码，但对许多解决方案都没有任何运气。

基本上我需要重定向这个：

```
/example/my-stuff/ 
```

至：

```
/example/home/ 
```

但我不希望重定向除 /my-stuff/ 之外的任何其他页面。例如。这些页面不应被重定向并保持不变。

```
/example/my-stuff/a-page
/example/my-stuff/anything 
```

提前谢谢各位！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T21:37:40.233

在文档根目录的 htaccess 文件中，您可以添加以下任一内容：

```
RedirectMatch 301 ^/example/my-stuff/$ /example/home/ 
```

或者您可以使用 mod_rewrite 代替：

```
RewriteEngine On
RewriteRule ^example/my-stuff/$ /example/home/ [L,R=301] 
```

# windows - Windows Vista 上的 Sublime Text 2 文件关联

> ID：12045208
> 
> 赞同：1
> 
> 时间：2012-08-20T21:08:58.807
> 
> 标签：windows, windows-vista, sublimetext2

我希望 .js、.css、.html 等文件与 Sublime Text 2 相关联。我试图将文件类型与 Sublime Text 程序相关联，但“打开方式”对话框不允许我选择 sublime_text.exe。当我浏览到 sublime_text.exe 并单击打开时，（在 Program Files 下，不是 Program Files x86；我安装了 ST 64 位版本）没有任何反应；浏览窗口关闭，我回到愚蠢的打开方式对话框，但 sublime_text.exe 没有被选中，并且在可用程序列表中，并且 OK 按钮被禁用，因为我没有选择任何内容。

我确信有人更熟悉 Windows 内部的工作方式，并且能够阐明可能出现的问题。

这一切都是从我安装 Sublime Text 2 正式版开始的。当时，我安装了 Sublime Text 2 32bit beta，当我安装正式版时，我决定使用 64bit。安装新版本后，我的电脑上有两个版本，32位版本和64位版本。我所有的文件关联都使用了 32 位版本，所以在我卸载了旧的 32 位版本（使用 Revo Uninstaller）后，我所有的文件关联都被破坏了，那时我还无法修复这种感觉。

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:13:10.873

也许这会有所帮助[http://www.sublimetext.com/forum/viewtopic.php?f=2&t=1652&start=10#p7646](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=1652&start=10#p7646)

万一链接失效，这里是内容

> 这实际上不是 Sublime 文本的问题，它是 Vista 中引入的通用怪癖，并在 W7 中挥之不去。实际上，我最近发表了一篇关于这个问题的博客文章，你可以在 [http://anders.tonfeldt.se/?p=775](http://anders.tonfeldt.se/?p=775)找到它，但我会在这里详细说明，因为通常认为删除 url 并离开是不好的形式.
> 
> 1.  打开注册表。
> 2.  导航到 HKEY_CLASSES_ROOT\Applications\sublime_text.exe\shell\open\command
> 3.  验证路径是否准确，如果不正确，请更正。退出注册表。
> 4.  通过ctrl+alt+del打开任务管理器，杀死explorer.exe，运行并输入explorer.exe（或者跳过这一步直接重启）。
> 5.  现在尝试同样的事情，右键单击一个文本文件，打开方式，导航到 sublime，它现在应该出现在可用应用程序列表中。
> 
> 免责声明；我上面的帖子以另一个应用程序为例，它不能保证能解决您的问题，但它可能与我在 Win7/远景。
> 
> *TFeldt*

# tumblr - 在为 Tumblr 创建自定义主题时区分博客标题和帖子标题？

> ID：12045211
> 
> 赞同：1
> 
> 时间：2012-08-20T21:09:04.357
> 
> 标签：tumblr

潜伏已久，第一次提问。

我目前正在为 Tumblr 博客编写一个自定义主题，以便在每篇文章之后嵌入一个小部件，无论它们的类型如何。这个小部件需要帖子的标题，如果没有，则需要博客的标题。

根据[Tumblr](http://www.tumblr.com/docs/en/custom_themes#basic_variables)，{Title} 指的是博客标题。但是，如果我们有文本帖子或聊天帖子，{Title} 指的是帖子标题。

这是我的代码：

```
var title;
if ('{PostType}' === 'text' || '{PostType}' === 'chat') 
    title = '{Title}';
else if ('{PostType}' === 'photo' || '{PostType}' === 'photoset' || '{PostType}' === 'audio' || '{PostType}' === 'video')
    title = '{PlaintextCaption}';
else if ('{PostType}' === 'quote')
    title = '{PlaintextQuote}';
else if ('{PostType}' === 'link')
    title = '{PlaintextName}';
else if ('{PostType}' === 'answer')
    title = '{PlaintextQuestion}';

if (title === '')
    title = '{Title}'; 
```

例如，如果我有一个没有标题的照片帖子，那么标题将正确设置为博客标题。但是如果我有一个没有标题的文本帖子，那么标题将被设置为 [空字符串] 而不是博客标题。

所以我的问题是：当我在文本或聊天帖子中时，如何获得博客标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T02:48:55.623

您可以做的是在您输入`{block:Posts}`. 所以在你的`<head>`，你可以这样做：

```
var blogTitle = '{Title}'; 
```

然后像这样修改你的代码：

```
var title;
if ('{PostType}' === 'text' || '{PostType}' === 'chat') 
    title = blogTitle;
else if ('{PostType}' === 'photo' || '{PostType}' === 'photoset' || '{PostType}' === 'audio' || '{PostType}' === 'video')
    title = '{PlaintextCaption}';
else if ('{PostType}' === 'quote')
    title = '{PlaintextQuote}';
else if ('{PostType}' === 'link')
    title = '{PlaintextName}';
else if ('{PostType}' === 'answer')
    title = '{PlaintextQuestion}';

if (title === '')
    title = '{Title}'; 
```

另外，要小心，因为`{PostType}`永远不会`== 'photoset'`。Photoset 帖子类型总是以“照片”的形式出现。在制作类名时，我通常会做如下反驳：

```
class="type-{PostType}{block:Photoset}set{/block:Photoset} 
```

...输出将是`class="type-photoset"`.

# php - 是否可以在 PHP 中制作动画图形？

> ID：12045212
> 
> 赞同：4
> 
> 时间：2012-08-20T21:09:11.767
> 
> 标签：php, animation, graphics

前几天我在做一些研究，发现我可以使用[PHP GTK](http://gtk.php.net/)制作桌面 PHP 应用程序，然后它击中了我：

**是否可以使用 PHP 绘制动画？**

甚至3D可能吗？我不是在问这是否是一个好主意或任何东西，有大量的脚本语言，我知道这一点！我只想知道有没有可能！有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:12:51.630

动画片 ？GD不能直接使用，需要我所知道的其他库。3D绘图？是的，这是可能的。

查看这些资源：

[用php画一个立方体](http://codentronix.com/2011/06/06/how-to-draw-a-cube-using-php/)

[创建简单的动画 gif](https://stackoverflow.com/questions/2191367/php-create-simple-animated-gif-from-two-jpeg-images)

[用php创建动画gif](http://www.jeroenvanwissen.nl/weblog/php/howto-generate-animated-gif-with-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:21:43.430

我根本没有尝试过它，但是 github [https://github.com/yoya/phpopengl](https://github.com/yoya/phpopengl)上有一个 OpenGL 扩展。它似乎是已经停止开发的 sourceforge 项目的一个分支。

据我所知，这将是使用 PHP 创建真正的 3D 图形或动画的唯一方法。

# r - R堆栈替代

> ID：12045215
> 
> 赞同：0
> 
> 时间：2012-08-20T21:09:15.063
> 
> 标签：r, stack

我正在尝试编写代码，该代码从许多文件中的每一个的一列中获取值，并根据在第一列中找到的值打印出不同列的值列表。如果这是有道理的。我已阅读其中的文件，但在管理表格时遇到了麻烦。我想将表限制为仅这两列，因为文件非常大、繁琐且不必要。在我尝试这样做时，我有这条线：

```
tmp<-stack(lapply(inputFiles,function(x) x[,3])) 
```

但理想情况下，我想包括两列（3 和 1），而不仅仅是一列，这样我就可以使用一行，例如这些：

```
search<-tmp[tmp$values < 100, "Target"]
write(search, file = "Five", ncolumns = 2) 
```

但我不确定如何。我几乎可以肯定堆栈不会为超过一列工作。我尝试了一些不同的东西，类似于：

```
tmp<-stack(lapply(inputFiles,function(x) x[,3], x[,1])) 
```

但这当然没有用。

但我不知道在哪里看。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:39:14.660

taRifx 包有一个 list 方法可以满足`stack`你的需求。它堆叠 data.frames 列表。

未经测试的代码：

```
library(taRifx)
tmp<-stack(lapply(inputFiles,function(x) x[,c(1,3)])) 
```

**但是你什么都没改变！为什么这行得通？**

`lapply()`返回一个列表。在您的情况下，它返回一个列表，其中每个元素都是一个 data.frame。

Base R 没有用于堆叠列表的特殊方法。因此，当您调用`stack()`data.frames 列表时，它会调用`stack.default`，这不起作用。

加载 taRifx 库会加载一个`stack`专门处理 data.frames 列表的方法。所以一切正常，因为`stack()`现在知道如何正确处理 data.frames 列表。

**测试示例：**

```
dat <- replicate(10, data.frame(x=runif(2),y=rnorm(2)), simplify=FALSE)
str(dat)
stack(dat)

            x           y
1  0.42692948  0.32023455
2  0.75388820  0.24154125
3  0.64035957  1.96580059
4  0.47690790 -1.89772855
5  0.41668993  0.78083412
6  0.12643784  0.38029833
7  0.01656855  0.51225268
8  0.40653094  1.09408159
9  0.94236491 -0.13410923
10 0.05578115  1.12475364
11 0.75651062 -0.65441493
12 0.48210444  1.67325343
13 0.95348755  0.04828449
14 0.02315498 -0.28481193
15 0.27370762  0.43927826
16 0.83045889  0.75880763
17 0.40049367  0.06945058
18 0.86212662  1.49918712
19 0.97611629  0.13959291
20 0.29107186  0.64483646 
```

# javascript - swfobject 不沿着 flashvars 发送

> ID：12045216
> 
> 赞同：0
> 
> 时间：2012-08-20T21:09:15.573
> 
> 标签：javascript, actionscript-3, swfobject, flashvars

我正在使用 swfobject 将 flashvars 传递给 flash/as3，但我无法让它工作。

第一个代码后悔了我使用 swfobject 的尝试：

```
<script type="text/javascript" src="../js/swfobject.js"></script>
<script type="text/javascript">

    var flashvars = {
        testVar:"123"
    };

    swfobject.embedSWF("falsh.swf", "flashDiv", "990", "600", "10.0.0", false, flashvars);

</script>

<div id="flashDiv"></div> 
```

第二个代码是我尝试使用标签做同样的细

```
<object data="falsh.swf?testVar=123"
width="990" height="600" type="application/x-shockwave-flash">
<param name="quality" value="high" /></object> 
```

由于某些未知的原因，只有第二个代码块成功地沿着 flashvars 发送。

有谁知道出了什么问题？任何帮助都感激不尽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:06:00.603

swfobject 需要设置 name + id 属性才能传递 flashvars

# ios - 覆盖 iOS 中的默认初始化函数

> ID：12045219
> 
> 赞同：4
> 
> 时间：2012-08-20T21:09:22.973
> 
> 标签：ios

最初，我有一个默认的初始化函数

```
 -(id) init
   {
    if (self=[super init])
    {
      ......
     }
    return self;
   } 
```

但是，我喜欢重写 init 函数以传入自定义对象或其他对象，例如

```
 -(id) initWithScore:(NSString*) score
    {
    if (self=[super init]) 
```

现在有一个错误说 [super init] 函数只能用 -(id) init 函数调用。

那么我该怎么做才能修复它，以便我可以传入对象并使用 self=[super init]？

***错误：无法在 init 系列中的方法之外分配给 self。***

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-04T14:15:12.410

我试图将一个项目转换为 ARC，并在创建一个新项目并包含旧项目的文件之后 - 我遇到的问题之一是

> 无法在 init 系列中的方法之外分配给“自我”

选择器名称必须以`init`- 不仅在我的例子中初始化选择器是：

```
-(id)initwithPage:(unsigned)pageNum {...} 
```

注意小“w”。

我已将其更改为：

```
-(id)initWithPage:(unsigned)pageNum {...} 
```

注意大写的“W”！

我的问题解决了。

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:21:02.943

您需要在新方法中返回 id 类型的对象。

假设您声明了一个 NSString *myscore 属性，您将编写如下内容：

```
-(id) initWithScore:(NSString*) score
 {
    self=[super init];
    if (self)
    {
       self.myscore = score;
    }
    return self;
} 
```

# jasper-reports - iReport：参数的本地化默认值

> ID：12045220
> 
> 赞同：0
> 
> 时间：2012-08-20T21:09:23.987
> 
> 标签：jasper-reports, ireport

如何在*iReport*中为参数使用本地化默认值？

使用***$R{message.key}***作为参数默认值会对*iReport*的 SQL 编辑器的“读取字段”功能产生负面影响。更准确地说，显示以下错误（在**报告查询**对话框中按下**读取字段**按钮后）：

 **`Sourced file: inline evaluation of: ``$R{message.key}'' : Attempt to access property on undefined variable or class name`

有什么办法可以解决这个*iReport*问题？

这是说明问题的图像：

![在此处输入图像描述](../Images/481d074d989c68a380e191ee260384d2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:08:53.517

我认为这是*iReport*的错误。

您可以临时注释***defaultValueExpression***表达式并通过 **Report query -> Read fields**按钮添加字段。

或者您可以手动添加字段声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T07:28:44.273

这是 iReport 错误！要解决此问题，请按照以下步骤操作。

1.  打开 XML 文件
2.  删除 defaultValueExpression 标记值。

![在此处输入图像描述](../Images/67b146aefded0405c6e0593fdc3ffdf7.png)**

# java - Windows XP 中的 Java AWT 本机帧颜色不正确

> ID：12045224
> 
> 赞同：1
> 
> 时间：2012-08-20T21:09:35.763
> 
> 标签：java, windows-xp, awt, background-color

我正在为一个中等复杂的应用程序开发一个 GUI，使用 Java AWT 作为 GUI，当我在 Linux 上的 X11（使用任何桌面管理器）中运行它时它看起来很棒，但在 Windows XP 中它看起来很奇怪。

实际上，起初它看起来不错，但如果我需要更改任何帧的背景颜色，之后我无法将其更改回正确的颜色。当我尝试将背景颜色设置回正常时，框架得到看起来像纯白色背景，而不是原生应用程序在 XP 中的米色。我似乎无法让它们看起来更自然。

我试过了：

```
frame.setBackground(null); 
```

和

```
frame.setBackground(java.awt.SystemColor.window); 
```

没有成功。任何建议，将不胜感激。

提前感谢您的帮助！

——乔纳森·佩里-豪斯

编辑：这是一个简单的示例来演示我的意思，我希望这个小的空框架是米色的，但在 Windows XP 中它是白色的：

```
import java.awt.*;

public class HelloWorld {
    public static void main(String[] args) {
        Frame f = new Frame("Hello World");
        f.setPreferredSize(new Dimension(200, 200));
        f.setBackground(SystemColor.window);
        f.pack();
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:14:35.830

正如[我的评论](https://stackoverflow.com/questions/12045224/java-awt-native-frame-color-incorrect-in-windows-xp#comment16082378_12045224)中所述......你试过`SystemColor.control`吗？它应该工作！但是，在使用时要小心`SystemColor`……它是主要使用 Motif 和 Windows 95-98 UI 时的遗物。通常情况下，它对于处理现代 UI 是完全不够的。

# jquery - 在网站上嵌入博客内容

> ID：12045225
> 
> 赞同：1
> 
> 时间：2012-08-20T21:09:46.607
> 
> 标签：jquery, html, css

我可能会以完全错误的方式来解决这个问题，但我正在学习，所以总体而言这是一次很好的体验。这是我目前的问题：

我有一个站点，它有很多组件，其中一个是博客。我正在使用 flatpress 来运行博客，它很简单，我喜欢它。我已将博客输出/帖子格式化为嵌入我网站的主要部分（它更多的是设计而不是功能）。

我不确定使用 iframe 是否是一个好主意，主要是因为，如果我选择在我的博客文章中添加图片，它们会使用 slimbox2（灯箱克隆），当点击时，它们的叠加层只会在 iframe 内打开。我不确定如何让它们在父级的 iframe 之外打开。

或者，我想我可以使用 jquery 嵌入博客内容，例如：

```
$("#testLoad").load("http://url/flatpress #content-main"); 
```

在一个 div 容器中（它只是看起来乱码并且不遵守任何博客的 css/脚本），所以我无法让它工作，我正在寻找有关如何实现嵌入我的博客内容和图像叠加以正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:15:57.000

Window.postMessage 将允许您将图片等信息从 iframe 发送到博客主页。

postMessage 文档 [https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

当我快速搜索它时看到的第一个演示（没有尝试过，但它看起来正确） [http://davidwalsh.name/window-iframe](http://davidwalsh.name/window-iframe)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:19:30.417

考虑到灯箱的使用，iFrame 解决方案听起来不像您真正想要的。您能否发布一个链接，以便我们查看您的 CSS 发生了什么？

# wpf - 设置鼠标单击或双击处理的样式

> ID：12045227
> 
> 赞同：2
> 
> 时间：2012-08-20T21:10:00.430
> 
> 标签：wpf

有没有办法设置鼠标单击或双击以 WPF 样式处理，以便双击具有该样式的控件永远不会冒泡？

IE

```
<Setter Property="MouseDoubleClickHandled" Value="True"> 
```

我希望有一种方法可以做到这一点而不必使用处理程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:42:27.130

据我所知，没有“XAML”方法可以做到这一点。但是，处理程序并不好。它不可重复使用。我会为自己创建一个[附加行为](http://www.codeproject.com/Articles/28959/Introduction-to-Attached-Behaviors-in-WPF)

并连接 MouseButtonDown/MouseButtonDoubelClick 事件并使用 e.Handled=true。这样它就可以在不同的地方重复使用。

您还可以将您的内容包装到“按钮”类中。据我所知， Button 类会将您的 MouseClick&MouseDoubleClick 事件标记为自动处理。

您还可以尝试使用 RoutingStrategy.Direct 重新注册特定事件 <= 好的，此版本不起作用，如下所示：[Microsoft 帮助论坛](http://social.msdn.microsoft.com/Forums/is/wpf/thread/104aa671-aafe-46cd-9536-88386b7f66e1)

# ruby-on-rails - 导轨。尝试设置 begin_of_week 时出现错误数量的参数错误

> ID：12045228
> 
> 赞同：0
> 
> 时间：2012-08-20T21:10:08.307
> 
> 标签：ruby-on-rails, ruby, activesupport

我关注了这个 Railscast：[http ://railscasts.com/episodes/213-calendars-revised](http://railscasts.com/episodes/213-calendars-revised)

似乎没有很多人收到错误，但我收到`ArgumentError: wrong number of arguments (1 for 0)`了这个电话：

```
first = date.beginning_of_month.beginning_of_week(START_DAY) 
```

即使，如果我在控制台中尝试它也会给我同样的错误。

```
Date.today.beginning_of_month.beginning_of_week(start_day = :sunday)
Date.today.beginning_of_month.beginning_of_week(start_day = 'sunday')
Date.today.beginning_of_month.beginning_of_week('sunday')
Date.today.beginning_of_month.beginning_of_week(:sunday) 
```

我已经用谷歌搜索了它并查看了文档，它似乎应该可以工作。我什至尝试过`require 'active_support/all`，但它总是返回`false`。

如何将星期的开始设置为星期日？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:18:29.853

我无法访问截屏视频。但是当我以控制台模式（不是 IRB）运行 Rails 时：

导轨 c (Ruby v1.9.3p194)

```
Loading development environment (Rails 3.2.8)
1.9.3p194 :001 > Date.today.beginning_of_month.beginning_of_week(start_day = :sunday)
 => Sun, 29 Jul 2012 
1.9.3p194 :002 > 
```

也许它是你的 Ruby 或 Rails 版本，我正在运行：rails (3.2.8)？

从 3.2.1 开始似乎添加了参数（星期几开始）：

[http://apidock.com/rails/v3.2.1/Date/beginning_of_week](http://apidock.com/rails/v3.2.1/Date/beginning_of_week)

# magento - 分组产品的magento最低价格

> ID：12045229
> 
> 赞同：2
> 
> 时间：2012-08-20T21:10:12.237
> 
> 标签：magento

我想在我们的 magento 在线商店中显示分组产品的最低价格。我用了

```
<?php echo $this->getPriceHtml($_product, true) ?> 
```

但它不适用于分组产品。它只适用于简单的产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:52:36.670

```
$_product->getMinimalPrice () ; 
```

# api - Foursquare API - 按地点和日期划分的热门地点

> ID：12045232
> 
> 赞同：0
> 
> 时间：2012-08-20T21:10:30.630
> 
> 标签：api, foursquare

有没有办法使用 Foursquare API 在给定位置获取历史上特定日期最受欢迎的场所？例如，在 2012 年 8 月 1 日在伊利诺伊州芝加哥，签到最多的场所是什么？我查看了搜索和趋势端点，它们没有任何可用的日期参数。如果它还允许数据参数，趋势端点将是完美的，所以我可以查询昨天、两周前等的趋势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:30:47.137

无法通过 API 查询历史时期内最受欢迎的地点。

# mysql - sql server 中的 XMLNS 问题

> ID：12045234
> 
> 赞同：0
> 
> 时间：2012-08-20T21:10:32.950
> 
> 标签：mysql, sql, sql-server, database, oracle

有选择价值的问题

```
create table #XMLTest
    (ItemXML xml)

insert into #XMLTest (ItemXML) values ( 
'<MessageType xmlns="ss"> <Subject>sub</Subject> </MessageType>'
)

WITH XMLNAMESPACES('ss' as x)

SELECT 
   ItemXML.query('(/x:MessageType/Subject)') 
FROM 
   #XMLTest 

drop table #XMLTest 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:19:03.083

您的子元素也在名称空间中

```
WITH XMLNAMESPACES('ss' as x)
SELECT 
   ItemXML.query('(/x:MessageType/x:Subject)') 
FROM 
   #XMLTest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:28:10.620

这就是我的选择：

```
WITH XMLNAMESPACES('ss' as x)
SELECT 
   ItemXML.query('(/x:MessageType/x:Subject)').value('.','varchar(20)')
FROM 
   #XMLTest 
```

# ruby-on-rails - 跨平台 Rails 开发

> ID：12045239
> 
> 赞同：0
> 
> 时间：2012-08-20T21:10:51.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我将 Linux 作为我的主要 Rails 开发平台，但我也安装了 Rails 并在我的 Windows 电脑上运行。我的所有应用程序都在两台计算机之间同步，因此 Linux 上的更改将反映在 Windows 上。

我想在 Linux 上使用 postgresql，但在 Windows 上使用 sqlite3。有没有办法根据我使用的平台区分某些要加载的宝石集（Gemfile）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:29:30.853

[Bundler 文档](http://gembundler.com/man/gemfile.5.html) 确实提到了`:platform`可用于指定要在特定平台上安装哪些 gem 的选项。

还有另一个解决方案（我从其他 Ruby 开发人员和在线教程中学到）是将您的 gemset 包装在一个组中，例如：

```
group :option do
  gem 'gem1'
  gem 'gem2'
  ...
end 
```

然后运行：

```
bundle install --without option 
```

运行此命令后，bundler 将安装选项组中未列出的 gem。您可以将选项设置为 windows 或 linux。从而解决了区分某些平台的方法。

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:35:12.047

我建议在两台机器（linux 和 windows）上使用 postgresql，它会给你同样的开发者体验。例如，如果您想使用特定于 smth 的 postgresql，则在 windows/sqlite 上运行该代码时应考虑这一点。我很确定您不想为 windows 和 linux 提供不同的代码库。

无论如何，看看这个问题 [Multiple database.yml but one application](https://stackoverflow.com/questions/3924658/multiple-database-yml-but-one-application)

# c# - 在 Metro 风格应用程序中的页面（视图）之间共享模型

> ID：12045243
> 
> 赞同：0
> 
> 时间：2012-08-20T21:11:04.590
> 
> 标签：c#, mvvm, navigation, singleton, microsoft-metro

我有一个由多个页面组成的 Metro 应用程序，所有页面都来自**LayoutAwarePage**。我已经实现了往返它们的导航。这就像一个魅力。我现在要做的是在这些视图之间共享公共数据，例如：

*   访问模型，我们将其命名为**MyModel**
*   控制器的一个实例，我们将其命名为**MyController**
*   常见的业务逻辑，我们把它命名为**MyLogic**

过去，我习惯于通过构造函数“注入”这些依赖项。这现在不可能了（对吧？）。我该如何做到这一点，否则请记住我想避免：

*   单例（因为测试）
*   公共静态属性（类似于单例）

可以将某种上下文对象传递给 Frame.Navigate() 方法吗？有人有好的建议吗？

PS 我想避免使用像 MVVM light 或 Cocoon 这样的框架。

干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:08:16.880

听起来您正在寻找非常简单的东西。如果是这种情况，我只需向 App.xaml.cs 添加一个属性。

您可以使用 (App.Current as App).MyProperty 从应用程序中的任何位置设置/获取该属性。非常蛮力，但它的工作原理。

我也看到了相同的方法，但是将主容器分配给 App.xaml.cs 属性，然后是带有 getContainer() 方法的扩展方法 - 只是为了减少您必须编写的次数（App.Current as App） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:49:45.953

好的，我想我为我找到了一个很好的解决方案 [1]。它仍然不是我想要的，因为它使用了 MVVM 轻量级工具包及其 Messenger 概念 - 但它很干净。

[1] [http://forums.silverlight.net/p/200771/468507.aspx](http://forums.silverlight.net/p/200771/468507.aspx)

# c++ - 为什么 std::to_string 没有短重载？为什么没有noexcept？

> ID：12045244
> 
> 赞同：10
> 
> 时间：2012-08-20T21:11:08.630
> 
> 标签：c++, c++11

有谁知道为什么`to_string`C++11 标准第 21.5 节中声明的各种函数缺少 short 和 unsigned short 的重载？为什么没有声明这些函数`noexcept`呢？这是完整的重载集：

```
string to_string(int val);
string to_string(unsigned val);
string to_string(long val);
string to_string(unsigned long val);
string to_string(long long val);
string to_string(unsigned long long val);
string to_string(float val);
string to_string(double val);
string to_string(long double val); 
```

我查看了导致这些功能被采用的提案（N1803、N1982、N2408），但它们都没有任何动机或理由。

如果我将两个（相当相关的，IMO）问题放在一个帖子中违反了协议，我深表歉意。我还是 SO 的新手。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T21:14:59.000

例外： 没有`noexcept`构造函数`std::string`，所以这是不可能的（即字符串内存分配可能会失败）。

Shorts：所有默认提升的整数类型都丢失了；我想支持他们不会有任何收获。相比之下，较长的类型可能更昂贵，因此`int`应该为有空间意识的人提供。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T11:30:08.103

这些函数都对传递给它们的值进行算术运算。小于 int 的类型被提升为 int（或 unsigned int）进行算术运算，因此使用小于 int 的类型的版本没有计算优势。（这些都是通过我的提议进来的，所以我很了解历史）

# html - 即使我正在使用溢出的div包装：隐藏

> ID：12045247
> 
> 赞同：0
> 
> 时间：2012-08-20T21:11:29.667
> 
> 标签：html, css, overflow

我试图创建一个带有不同图像及其描述的标题。我希望在我们使用 jQuery 将鼠标悬停在内容上时显示它们的描述。我只发布我的 HTML 和 CSS，因为我认为这就是问题所在。

jQuery 可以工作，但问题是即使在使用溢出隐藏后，带有类 headerCont 的 div 也会环绕到下一行。有人可以帮我弄这个吗。谢谢。

我不允许发布图片，所以这是图片链接，可以帮助您理解我 ->

[http://image.bayimg.com/cabjpaaeg.jpg](http://image.bayimg.com/cabjpaaeg.jpg)

[http://img145.imageshack.us/img145/3236/cabjpaaeg.jpg](http://img145.imageshack.us/img145/3236/cabjpaaeg.jpg)

PS 在上图中，我将鼠标悬停在具有类 headerCont 的 div 上。我希望将 TEXT 放置在图像旁边。此外，只要其中一个 div 展开（不知道正确的词来解释它！）而不是原来的位置，最后一个 div 就会换行到下一行

HTML代码：

```
<html>
<head>
    <title>Silder</title>
    <link rel="stylesheet" type="text/css" href="css/default.css" />
</head>
<body>
    <div class="header">
        <div style="margin: 5px; width:1300px; overflow: hidden;">
        <div class="headerCont" style="background-color: #cdcdcd;  ">
            <div><img src="image/1.jpg" style="height: 317px; width: 214px; float:left; " /></div>
            <div style="float:left;margin-left:214px; width: 200px; overflow: hidden;">Discription </div>
        </div>
        <div class="headerCont" style="background-color: #719501; ">
            <div><img src="image/2.jpg" style="height: 317px; width: 214px;" /></div>
            <div style="float:left; position:absolute ;margin-left:214px; width: 200px; overflow: hidden;">Discription </div>
        </div>
        <div class="headerCont" style="background-color: #f3f3f3; ">
            <div><img src="image/3.jpg" style="height: 317px; width: 214px;" /></div>
            <div style="float:left; position:absolute ;margin-left:214px; width: 200px; overflow: hidden;">Discription </div>
        </div>
        <div class="headerCont" style="background-color: #719501; ">
            <div><img src="image/4.jpg" style="height: 317px; width: 214px;" /></div>
            <div style="float:left; position:absolute ;margin-left:186px; width: 200px; overflow: hidden;">Discription </div>
        </div>
        <div class="headerCont" style="background-color: #f3f3f3;">
            <div><img src="image/5.jpg" style="height: 317px; width: 214px;" /></div>
            <div style="float:left; position:absolute ;margin-left:214px; width: 200px; overflow: hidden;">Discription </div>
        </div>
        </div>
    </div>
    <script type="text/javascript" src="js/jQuery.js" ></script>
    <script type="text/javascript" src="js/home.js" ></script>
</body> 
```

代码：

```
#content{
margin-left: auto;
margin-right: auto;
width: 90%;
border: 2px solid;
border-color: #272727;}
.outter{
border:2px solid #000000;
margin:4px;
position: relative;
}
.header{
width:1300px;
height:400px;
margin-left:auto;
margin-right:auto;
border: 1px solid #000;
margin-bottom:20px;
overflow:hidden;
position: relative;
}
.headerCont{
height: 100%; 
width:214px;
padding:5px;  
float:left;
overflow:hidden;
position:relative;
}
.header img{
border-color:#000000;
} 
```

JavaScript：

```
$(".headerCont").mouseover(function(){
  $(this).animate({
width:400,
  }, 300 );
});

$(".headerCont").mouseout(function(){
  $(this).animate({ 
width: 214,
  }, 200 );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:01:57.290

最后我找到了解决方案。谢谢大家。我所做的只是在我的标题 div 之后添加另一个包装器 div。这里的代码：

```
<div class="header">
            <div style="width:10000px; height: 317px;">
            <div class="outter">
                <div style="float:left;"><img src="image1.jpg" height="317px" width="217px"/></div>
                <div style="float:left;">Description</div>
            </div>
            <div class="outter">
                <div style="float:left;"><img src="image1.jpg" height="317px" width="217px"/></div>
                <div style="float:left;">Description</div>
            </div>
            <div class="outter">
                <div style="float:left;"><img src="image1.jpg" height="317px" width="217px"/></div>
                <div style="float:left;">Description</div>
            </div>
            <div class="outter">
                <div style="float:left;"><img src="image1.jpg" height="317px" width="217px"/></div>
                <div style="float:left;">Description</div>
            </div>
            <div class="outter">
                <div style="float:left;"><img src="image1.jpg" height="317px" width="217px"/></div>
                <div style="float:left;">Description</div>
            </div>
            <div class="outter">
                <div style="float:left;"><img src="image1.jpg" height="317px" width="217px"/></div>
                <div style="float:left;">Description</div>
            </div>
            <div class="outter">
                <div style="float:left;"><img src="image1.jpg" height="317px" width="217px"/></div>
                <div style="float:left;">Description</div>
            </div>
            </div>
        </div> 
```

# c++ - C++ - 实例化派生类并使用基类的构造函数

> ID：12045250
> 
> 赞同：6
> 
> 时间：2012-08-20T21:11:36.450
> 
> 标签：c++, class, inheritance

我有一个基类，其构造函数需要一个参数（字符串）。然后我有一个派生类，它也有自己的构造函数。我想实例化派生类并能够设置基类构造函数的参数。

```
class BaseClass {
    public:
        BaseClass (string a);
};

class DerivedClass : public BaseClass {
    public:
        DerivedClass (string b);
};

int main() {
    DerivedClass abc ("Hello");
} 
```

我不确定在调用派生类时如何设置基类构造函数的参数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T21:14:14.667

您有两种可能性 - 内联：

```
class DerivedClass : public BaseClass {
public:
    DerivedClass (string b) : BaseClass(b) {}
}; 
```

或不合时宜：

```
class DerivedClass : public BaseClass {
public:
    DerivedClass (string b);
};

/* ... */
DerivedClass::DerivedClass(string b) : BaseClass(b)
{} 
```

* * *

更多示例：

```
class DerivedClass : public BaseClass {
public:
    DerivedClass(int a, string b, string c);

private:
    int x;
};

DerivedClass::DerivedClass(int a, string b, string c) : BaseClass(b + c), x(a)
{} 
```

* * *

在初始化列表上：

```
class MyType {
public:
    MyType(int val) { myVal = val; }    // needs int
private:
    int myVal;
};

class DerivedClass : public BaseClass {
public:
    DerivedClass(int a, string b) : BaseClass(b)
    {  x = a;  }   // error, this tries to assign 'a' to default-constructed 'x'
                   // but MyType doesn't have default constructor

    DerivedClass(int a, string b) : BaseClass(b), x(a)
    {}             // this is the way to do it
private:
    MyType x;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T21:21:50.477

如果您只想从传递给基类构造函数的单个参数构造派生类实例，您可以这样做：

C++03（我添加了显式，并通过 const 引用传递）：

```
class DerivedClass : public BaseClass {
    public:
        explicit DerivedClass (const std::string& b) : BaseClass(b) {}
}; 
```

C++11（获取所有基类构造函数）：

```
class DerivedClass : public BaseClass {
public:
    using BaseClass::BaseClass;
}; 
```

如果你想调用不同`DerivedClass`的构造函数并将构造函数调用为`BaseClass`其他值，你也可以这样做：

```
class DerivedClass : public BaseClass {
    public:
        explicit DerivedClass () : BaseClass("Hello, World!") {}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:15:43.720

用这个

```
 DerivedClass::DerivedClass(string b)
     : BaseClass(b)
 {
 } 
```

只需将参数直接传递给基类构造函数

# c# - 存在目标时的 StyleCop CA0055 问题

> ID：12045251
> 
> 赞同：4
> 
> 时间：2012-08-20T21:11:48.197
> 
> 标签：c#, visual-studio-2010, stylecop

与另一个类似的问题一样，我在构建时遇到两个 StyleCop 错误：

CA0052: 未选择任何目标。

CA0055: 无法加载 [主 exe 的路径...]

但是，与其他问题不同，在我的开发机器上重新格式化和重新安装所有内容并没有解决它。我们正在运行带有 SP1 的 Visual Studio 2010，并以 Dotnet 4.0 为目标。

不过，这里有另一个细节可以帮助那里的人找出问题所在：

我还尝试在 Visual Studio 2012 RTM 下构建解决方案，我得到了第二条错误消息的更详细版本 -

```
CA0055  Error Running Code Analysis 

CA0055 : Could not load C:\Users\UserName\SourceCode\ProjectName\Debug\xxx.exe. 
The following error was encountered while reading module 'System.Windows.Forms': 
Could not resolve type reference: [System.Drawing, Version=4.0.0.0, Culture=neutral, 
PublicKeyToken=b03f5f7f11d50a3a]System.Drawing.BitmapSuffixInSatelliteAssemblyAttribute.

[Errors and Warnings]

(Global) 
```

有人有任何线索吗？没有其他人收到此错误，因此在我自己的设置中无疑是一件奇怪的事情，并且我在重新铺设机器时无意中复制了它。但是……什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:40:38.550

我找到了两种方法来解决这个问题，没有任何微软文档的帮助。线索在 VS 2012 的附加错误报告中 - StyleCop 找不到*System.Drawing*程序集。

修复 #1：从 .csproj 文件中删除**HintPath**元素，告诉项目在哪里可以找到*Windows.Forms*程序集：

```
<Reference Include="System.Windows.Forms"> 
    <!--<HintPath>..\..\..\..\..\..\..\..\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Windows.Forms\v4.0_4.0.0.0__b77a5c561934e089\System.Windows.Forms.dll</HintPath>-->
</Reference> 
```

修复 #2：在 .csproj 文件中为*System.Drawing**添加*一个**HintPath**元素：

 *```
<Reference Include="System.Drawing">
    <HintPath>..\..\..\..\..\..\..\..\Windows\Microsoft.NET\assembly\GAC_MSIL\System.Drawing\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Drawing.dll</HintPath>
</Reference> 
```

第一个选项对我来说效果更好，因为提示没有特别的原因。MSBuild 能够在没有它的情况下找到程序集，而且它是多余的，因为目标类型设置为 4.0 版本的框架。*

# assembly - 使用自定义 binfmt 处理程序加载的程序中的分段错误；ELF 格式的相同程序无缝运行

> ID：12045254
> 
> 赞同：1
> 
> 时间：2012-08-20T21:11:57.503
> 
> 标签：assembly, process, linux-kernel, segmentation-fault, portable-executable

我一直在`binfmt`为 Ubuntu Linux 12.04、Intel x86_64 架构开发一个自定义 PE 处理程序（如果这听起来很熟悉，我已经发布了一些与该项目相关的问题）。如果我提供的信息量过大，我会提前道歉。

`binfmt`处理程序非常标准；我读入 PE 头和节，然后将这些节写入用户空间内存中节表中指定的地址。然后，当一切准备就绪时，我打电话

```
start_thread(regs, entry_addr, current->mm->start_stack); 
```

就像内置的 Linux 处理程序一样；在我的情况下，`regs = 0xcf7dffb4`，`entry_addr = 0x401000`和`start_stack = 0xbffff59b`。

我在 Intel x86 程序集中有以下代码：

```
push ebp
mov ebp, esp

mov eax, 4
add eax, 5

pop ebp
ret 
```

我使用[fasm](http://flatassembler.net)将此程序编译为 PE 格式的可执行文件（math1.exe），并`binfmt`使用`insmod`. 如果我在 中调试这个程序`gdb`，我会看到：

```
(gdb) set disassembly-flavor intel
(gdb) x/6i 0x401000
    0x401000:   push   ebp
    0x401001:   mov    ebp,esp
    0x401003:   mov    eax,0x4
    0x401008:   add    eax,0x5
    0x40100b:   pop    ebp
    0x40100c:   ret 
```

所以我知道代码已加载到正确的地址。然后：

```
(gdb) run
Starting program: /media/sf_Sandbox/math1.exe 

Program received signal SIGSEGV, Segmentation fault.
0x0040100c in ?? () 
```

当我进行寄存器转储时：

```
(gdb) info registers
eax            0x9  9
ecx            0x81394e8    135501032
edx            0x8137808    135493640
ebx            0x8139548    135501128
esp            0xbfffe59b   0xbfffe59b
ebp            0x0  0x0
esi            0x81394e8    135501032
edi            0x2f7ff4 3112948
eip            0x40100c 0x40100c
...other registers... 
```

您可以看到代码确实执行了`eax = 0x9`，因为它应该执行。不过，从表面上看，我找不到任何理由在`ret`声明中出现段错误。检查`dmesg`，我发现

```
math1.exe[1864] general protection ip:40100c sp:bffff5bd error:0 
```

但我发现很少有关于可能导致这种情况的文档。我知道问题不在于代码本身，因为使用相同的汇编程序编译为 ELF 格式的相同代码运行起来没有任何问题。

我目前关于这个问题的理论是：

1.  我并没有真正弄乱处理程序中的堆栈指针。内置的 Linux 处理程序（用于 ELF、a.out 和平面格式，仅举三例）具有`create_*_tables()`处理`argc`、`argv`和`envp`参数的函数。我一开始没有包含这个函数，因为测试程序不接受任何输入，但是实现这个`create_flat_tables()`函数（从平面处理程序）到目前为止并没有解决问题。（我知道从其他模块中盲目粘贴和调用函数是个**坏**主意，但是该函数的 a.out 和 flat 版本本质上是相同的，所以它似乎不太依赖于可执行格式；我以为我会试一试。）
2.  我发现[这篇文章](http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html)是关于在`main()`. `objdump`math1.exe 的 仅包含上面给出的汇编代码，但同一`objdump`程序在汇编为 ELF 格式（生成`*.o`文件）和链接`gcc`（以获取 ELF 二进制文件）后包含文章中提到的其他函数 ( `_start()`, `__libc_start_main()`， ETC。）。也许这些功能在 Linux 平台上比我之前想象的更加强制性。

我正在寻找可以采取的任何解释/建议/进一步的故障排除步骤。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:25:38.500

`_start`您确实需要实现and序列的至少一个方面`__libc_start_main`：调用 _exit 系统调用。您不能只从 execve 创建的框架中执行“ret”，并期望它会导致进程干净地终止。从 main 返回退出进程是 C 功能，而您的程序不是 C。

我对系统调用界面的记忆有点模糊，但我相信它是这样的：

1.  将 %eax 设置为系统调用号 ( `_NR_exit`)
2.  将 %ebx 设置为第一个参数（退出代码）
3.  诠释 $0x80

%ecx、%edx、...的附加参数我不确定顺序。但是 _exit() 只需要一个参数，我很确定它在 %ebx 中。

# c# - 确定是否采取了正确的路线

> ID：12045256
> 
> 赞同：1
> 
> 时间：2012-08-20T21:12:11.453
> 
> 标签：c#

我正在开发一个 C# Winforms 应用程序，我需要确定卡车是否采用指定的路线，并以正确的顺序通过这些点。有效路线的示例如下：

**ROUTE 1**
入口门 1
秤门入口侧
秤门出口侧
出口门 1

**ROUTE 2**
入口 2
栅门入口侧
栅门出口侧
出口 2

两条路线的比例门相同，但入口和出口是我需要担心的。如果一辆卡车从 1 号门进入并从 1 号门离开，那么所走的路线是正确的。但是，如果卡车进入 2 号门并通过 1 号门离开，那么我需要发送通知。

每个门都有配置为读取点的硬件。当卡车经过读取点时，会在数据库中创建带有时间戳的记录。我设置了一个计时器，以便在指定的时间间隔内检索有效卡车 ID 的列表。然后，它检索每辆卡车在指定时间段内经过的读取点，并将这些读取点也存储在列表中。我不确定如何将“正确路线”列表与卡车通过的读取点列表进行比较。现在我的出发点是每辆卡车每天只开一次旅行，并且在我得到这个覆盖后会调整额外的旅行。

这是我的计时器代码

```
private void tmr_Tick(object sender, EventArgs e)
    {
        int maxTime = int.Parse(AppSettings.GetAppSetting("MaxTime"));
        List<string> _assets = new List<string>();
        List<ReadPoint> _assetReads = new List<ReadPoint>();

        //Get the list of assets to process
        DataSet ds = du.ExecuteTextCommand("SELECT DISTINCT AssetId FROM " + 
             "(SELECT a.TagId, a.AssetId, a.Description, rp.Comments, DateScanned " + 
             "FROM AssetsReads ar JOIN Assets a on ar.AssetTagID = a.AssetTagID " + 
             "JOIN ReadPointLocations rp on " + 
             "ar.ReadPointLocationsID = rp.ReadPointLocationsID) AS AssetResult " + 
             "ORDER BY AssetId");
        if (ds != null && ds.Tables[0].Rows.Count > 0)
        {
            foreach (DataRow dr in ds.Tables[0].Rows)
            {
                _assets.Add(dr["AssetId"].ToString());
            }
        }

        //Loop through and process the assets
        foreach (string asset in _assets)
        {
            ds = du.ExecuteTextCommand("SELECT a.TagId, a.AssetId, a.Description, " + 
                 "rp.ReadPointLocationId, rp.Comments, DateScanned " + 
                 "FROM AssetsReads ar JOIN Assets a on ar.AssetTagID = a.AssetTagID " + 
                 "JOIN ReadPointLocations rp on " + 
                 "ar.ReadPointLocationsID = rp.ReadPointLocationsID " + 
                 "WHERE a.AssetID = '" + asset + "' ORDER BY DateScanned");
            if (ds != null && ds.Tables[0].Rows.Count > 0)
            {
                _assetReads.Clear();

                foreach (DataRow dr in ds.Tables[0].Rows)
                {
                    ReadPoint ar = new ReadPoint();
                    ar.ReadPointLocationId = int.Parse(dr["ReadPointLocationId"].ToString());
                    ar.ReadpointName = dr["Comments"].ToString();
                    ar.DateScanned = DateTime.Parse(dr["DateScanned"].ToString());
                    _assetReads.Add(ar);
                }

                //Check to see if the asset has been seen in the last (MaxTime) minutes
                if (DateTime.Parse(_assetReads[0].DateScanned.ToString()) < DateTime.Now)
                {
                    ///////////////////////
                    //Send notification
                    ///////////////////////
                    continue;
                }

                //Determine the correct route to follow
                Route currentRoute = null;
                foreach (Route rt in _routes)
                {
                    foreach (ReadPoint rp in rt.ReadPoints)
                    {
                        if (_assetReads[0].ReadPointLocationId == rp.ReadPointLocationId)
                        {
                            currentRoute = rt;
                            break;
                        }
                    }

                    if (currentRoute != null)
                        break;
                }

                //Check if the route was correctly followed
                if (currentRoute != null)
                {
                    //////////////////////////////
                    //This is where I'm stuck
                    //////////////////////////////
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:31:30.903

嗯，我想你在这里*真的*很近。您有一个资产（卡车）已经通过的 ReadPointLocations（门）列表，按照卡车通过大门的顺序排列。您还拥有通过这些大门的“正确”路径的列表，并且可以根据卡车首先通过的大门确定应该遵循的路径。剩下要做的就是将卡车的大门读数与预期读数对齐，并验证卡车是否通过了它应该有的所有大门，按顺序：

```
//Check if the route was correctly followed
if (currentRoute != null)
{
    var gatesInOrder = 0;
    for(var i=0; i<_assetReads.Length; i++)
    {
       if(_assetReads[i].ReadPointLocationId == currentRoute[gatesInOrder])
          //gate crossed in order; increment to next gate
          gatesInOrder++;           
    }
    //if we didn't get to the end of the route, send a notification
    if(gatesInOrder != currentRoute.Length)
    {
       ///////////////////////
       //Send notification
       ///////////////////////
    }
} 
```

现在，这假设了两件事。首先，所有读取都没有错误地执行。我可以根据经验告诉您，即使在自动化系统中，位置扫描的遗漏率也非常高。这意味着如果您的入口门扫描被错过，您将无法确定卡车应该从哪个门离开；您将根据您拥有的第一个读数选择一条路线（可能是 1 号闸门），即标尺入口闸门，但由于该节点对闸门 1 和闸门 2 路径都是通用的，因此您会错误地通知卡车如果卡车从 2 号登机口离开，即使它从 2 号登机口进入，也会从错误的登机口退出。为了避免这种情况，您必须能够识别每条路线中对该路线唯一的登机口（在这种情况下, 入口和出口大门）并根据对其中一个位置的第一次门扫描确定要使用的正确路线，而不仅仅是任何位置。您现在已经选择了正确的路线，但您不会找到入口扫描；您可以检测到这一点并发送不同的“门扫描错过”通知。

其次，我们假设一旦卡车进入一条路线，它必须继续通过该路径并且不能在任何点偏离。任何事情都不能乱七八糟。因此，在一个更复杂的示例中，假设卡车还进行了简单的检查（尾灯工作、没有可见的泄漏、轮胎胎面正常、怠速时没有滚滚的烟雾等）。如果检查和称重可以按任一顺序进行，如果称重和检查的顺序与预期相反，您将错误地使用上述算法发送通知。您可以通过简单地检查是否在某个点扫描了所有正确路径的位置来天真地避免这种情况，但这不会捕捉到，例如，一辆卡车在整个过程中走错路。如果这是可能的，那么你将需要更复杂的东西，

# ios - iOS：如何模仿“to”字段？

> ID：12045261
> 
> 赞同：2
> 
> 时间：2012-08-20T21:12:23.683
> 
> 标签：ios, email

我正在编写一个应用程序，它会定期打开一封电子邮件，供用户通过电子邮件发送到 iOS 中预定的联系人列表。我有一个文本字段，我将允许用户通过从联系人列表中选择电子邮件地址和手动输入来将电子邮件地址添加到文本字段中。手动输入时，我希望能够在通讯录中自动填写电子邮件地址，就像邮件应用程序中的“收件人”字段一样。我怎样才能做到这个自动完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:34:43.743

您将首先构建一个包含可能的电子邮件地址的字典和一个要匹配的字符串（即，名称可能是 Fred Smith，但电子邮件可能是 f15smith@gmail.com）。

您的“To”条目将是一个 UITextField，并且要获得具有自动完成功能的当前字符串，您将填充一些列表并将其显示在 UITextField 下。

要将字符作为用户类型获取，请实现此委托方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

新字符串将是当前字符串 (myTextField.text)，其中字符的“范围”被字符串替换。结果是更新匹配列表的字符串。只需从此方法返回 YES。

当用户单击列表中的联系人时，您只需将收件人文本替换为该人选择的任何联系人。

# windows - `RegisterDragDrop` 返回 S_OK，但不调用 DragEnter 方法

> ID：12045268
> 
> 赞同：5
> 
> 时间：2012-08-20T21:12:48.583
> 
> 标签：windows, delphi, api

我在 Windows 7 中遇到了这个问题。首先我定义了一个实现`IDropTarget`. 然后我使用`RegisterDragDrop`放置在我的应用程序窗口中的控件的句柄。`RegisterDragDrop`返回，`S_OK`但是当我从控件拖放链接时`Mozilla FireFox`，没有调用实现对象`DragEnter`的任何其他函数。`IDropTarget`我太累了不知道该怎么办。提前致谢

PS：我刚刚发现当我以管理员身份运行我的应用程序时，会出现这个问题！当我正常运行应用程序时，一切正常！（也许它与更改消息过滤器有什么关系？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T21:32:10.107

假设你的代码是正确的并且你已经正确地实现了你的一面；如果您在 Windows Vista 或 Windows 7 上进行开发，请确保您以与 Mozilla 相同的权限级别运行该应用程序。如果您在以管理员身份运行的 IDE 中进行开发，但以登录用户身份运行 Mozilla Firefox，则它们无法通过拖放进行通信。

如果不是这种情况，那么您可以尝试从 Windows 资源管理器中拖动文件以确保您的代码正常工作。可能是 Mozilla Firefox 没有正确或根本没有使用 Microsoft 的 Ole 拖放子系统。

# javascript - readyState = 4 连续三次。Ajax - 由警报引起

> ID：12045273
> 
> 赞同：1
> 
> 时间：2012-08-20T21:13:15.087
> 
> 标签：javascript, ajax, stack

我有一个奇怪的情况。

[尝试在这个小提琴上](http://jsfiddle.net/B9a5G/1/)双击“Insane” 。你会注意到它`onreadystatechange`被调用了 3 次。所有这些时间与`readyState = 4`。对我来说，这太疯狂了。

但最重要的是，当我`alert(added)`从双击事件侦听器函数中删除时，如[this fiddle](http://jsfiddle.net/B9a5G/3/)所示，一切正常。

有人可以向我解释发生了什么吗？这对我来说很奇怪。在此先感谢。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T21:26:41.717

发生这种情况是因为您的 XMLHttpRequest 设置为异步执行**，并且**您`alert('added')`在 XMLHttpRequest 开始调用之前暂停了 JavaScript 执行线程`onreadystatechange`。当您关闭警报时，XMLHttpRequest 已经完成，并且四个调用`onreadystatechange`位于堆栈中，等待执行。

因此，因为您的 XMLHttpRequest 已经完成，`.readyState`并且`.status`已经分别等于`4`和`200`。因此，每次`.onreadystatechange`通话时，您的`if`陈述都会评估为真。

如果您将 XMLHttpRequest 更改为同步执行（或者如果您`alert('added')`在调用 AJAX 之前放置），那么您将获得预期的警报数量：

[http://jsfiddle.net/B9a5G/6/](http://jsfiddle.net/B9a5G/6/)

有关 JavaScript 事件、计时和单线程处理的更多信息：

[http://javascript.info/tutorial/events-and-timing-depth](http://javascript.info/tutorial/events-and-timing-depth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:21:46.290

最简单的方法是在检查 readyState 后编写警报，
如下所示
function myCallback() {
if (g_xmlHttpRequest.readyState != 4)
return;
警报（“我的回调”）；
// 添加一些代码
}

# javascript - 是否可以在 Adob e AIR 中使用 localStorage 和 window.openDatabase？

> ID：12045274
> 
> 赞同：0
> 
> 时间：2012-08-20T21:13:21.497
> 
> 标签：javascript, sqlite, air, local-storage, offlineapps

我有一个可用的离线应用程序 ( `.html`+ `.js`)。它使用 localStorage 和使用该`openDatabase`方法访问的 SQLite 数据库。但是，当我尝试使用 Adob​​e Air Debug Launcher 将其转换为 Adob​​e AIR 时，它似乎不起作用。

我还从命令行收到以下错误：

```
"ReferenceError: Can't find variable: localStorage" 
```

Adobe AIR 不兼容 HTML5 吗？如果它不支持`localStorage`并且`openDatabase()`- 是否可以只包含另一个 JS 文件来解决这个问题？

我担心的是我希望应用程序可以在 Google Chrome 浏览器和 Adob​​e AIR 中运行，而无需进行大量重写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:21:05.253

Adobe AIR 不支持 Web 存储，因为它通过类`flash.data.EncryptedLocalStore`( [docs](http://help.adobe.com/en_US/air/reference/html/flash/data/EncryptedLocalStore.html) ) 拥有自己的本地存储引擎。

看看这篇文章的[教程](http://www.adobe.com/devnet/air/ajax/articles/encrypted_local_store.html)。

# html - 粘贴到输入元素（如谷歌）时如何替换换行符/回车符

> ID：12045276
> 
> 赞同：6
> 
> 时间：2012-08-20T21:13:25.287
> 
> 标签：html, replace, paste

当对输入（文本）元素进行粘贴操作时，我希望将换行符替换为空格。

例如，如果将以下文本粘贴到 google 搜索中：

```
foo
bar 
```

它粘贴为：

```
foo bar 
```

默认情况下，文本输入元素将在第一个换行符处停止，如下所示：

```
foo 
```

我能够使用以下代码找到带有**textarea元素的解决方案：**

```
$("#textarea_element").bind('paste', function(e) {
    var el = $(this);
    setTimeout(function() {
        $(el).val($(el).val().replace(/(\r\n|\n|\r)/gm," "));
    }, 100);
}); 
```

但我想在**输入**元素上有这个功能。有任何想法吗？

# php - 修复数组大小不一致的错误

> ID：12045277
> 
> 赞同：0
> 
> 时间：2012-08-20T21:13:27.387
> 
> 标签：php, mysql, arrays

好的，我的代码有问题，但我找不到问题所在。使用我的代码时出现此错误：

> 警告：array_multisort() [function.array-multisort]：第 1506 行 /home/sagesca1/public_html/hiscores/functions.ws 中的数组大小不一致

这是我的代码：

```
function findFriends($table){
    include "mysql.ws";
    $user = $_SESSION['username'];
    $xptype = findType($table)."xp";
    $query = mysql_query("SELECT u.* FROM friends uf inner join users u on uf.friend = u.username WHERE uf.user = '$user'") or die(mysql_error());
    $myFriends = array();
    $xpOrder = array();
    WHILE($row = mysql_fetch_array($query)){
        $count = count($row);
        $friends = $row['username'];
        $rank = findRank($friends, "$table");
        $sql = mysql_query("SELECT * FROM skills WHERE playerName LIKE '$friends' ORDER BY '$xptype' DESC") or die(mysql_error());
        while($skillsRow = mysql_fetch_array($sql)){
            for ($i = 1; $i <= $count; $i++){
                $myFriends[$friends] = array(
                    'xp' => $skillsRow[$xptype],
                    'lvl' => getLevelForXP($skillsRow[$xptype]),
                    'rank' => $rank,
                );
            $xpOrder[] = $skillsRow[$xptype];
            }
            array_multisort($xpOrder, SORT_NUMERIC, SORT_DESC, $myFriends);
            unset($xpOrder);
            foreach ($myFriends as $friend => $data){
                if(dots($data['xp']) !=0){
                echo '
                <a name="'.$data['rank'].'"></a>
                <a href="compare.ws?user1='.$friend.'" target="_self" class="row ">
                <span class="columnRank">
                <span>'.$data['rank'].'</span>
                </span>
                <span class="columnName">
                <span>'.BBCode($friend).'</span>
                </span>
                <span class="columnLevel">
                <span>'.$data['lvl'].'</span>
                </span>
                <span class="columnXp">
                <span>'.dots($data['xp']).'</span>
                </span>
                </a>'; 

                }
            }
        }
    } 
```

}

谁能帮我解决这个问题，如果您需要关于我的代码的任何其他方法，我很乐意将它添加到这个问题中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:29:18.700

如果要进行多重排序的数组具有相同数量的元素，则只能使用 array_multisort。根据错误，假设`$xpOrder`并且`$myFriends`具有导致此错误的不同数量的元素是有效的。

只需做`print_r`两个数组中的一个，然后尝试查看是否可以找出差异发生的位置。

检查此代码是否有效：

```
 function findFriends($table){
        include "mysql.ws";
        $user = $_SESSION['username'];
        $xptype = findType($table)."xp";
        $query = mysql_query("SELECT u.* FROM friends uf inner join users u on uf.friend = u.username WHERE uf.user = '$user'") or die(mysql_error());
        $myFriends = array();
        $xpOrder = array();
        WHILE($row = mysql_fetch_array($query)){
            $count = count($row);
            $friends = $row['username'];
            $rank = findRank($friends, "$table");
            $sql = mysql_query("SELECT * FROM skills WHERE playerName LIKE '$friends' ORDER BY '$xptype' DESC") or die(mysql_error());unset($myFriends);
            while($skillsRow = mysql_fetch_array($sql)){
unset($myFriends); 
                for ($i = 1; $i <= $count; $i++){
                    $myFriends[] = array(
                        'friend' => $friends,
                        'xp' => $skillsRow[$xptype],
                        'lvl' => getLevelForXP($skillsRow[$xptype]),
                        'rank' => $rank,
                    );
                    $xpOrder[] = $skillsRow[$xptype];
                }
                array_multisort($xpOrder, SORT_NUMERIC, SORT_DESC, $myFriends);
                unset($xpOrder); 
                foreach ($myFriends as $data){
                    if(dots($data['xp']) !=0){
                    echo '
                    <a name="'.$data['rank'].'"></a>
                    <a href="compare.ws?user1='.$data['friend'].'" target="_self" class="row ">
                    <span class="columnRank">
                    <span>'.$data['rank'].'</span>
                    </span>
                    <span class="columnName">
                    <span>'.BBCode($data['friend']).'</span>
                    </span>
                    <span class="columnLevel">
                    <span>'.$data['lvl'].'</span>
                    </span>
                    <span class="columnXp">
                    <span>'.dots($data['xp']).'</span>
                    </span>
                    </a>'; 

                    }
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:19:53.923

据我所知，`$xpOrder`数组将是`$count`长元素，而`$myFriends`在经过第一个循环后将是一个长元素，`for`因为您只是`$friends`一遍又一遍地覆盖元素。

# python - 在 MongoDb 中使用 MapReduce 与使用 Celery 和 RabbitMq 的分布式队列进行数据分析

> ID：12045278
> 
> 赞同：1
> 
> 时间：2012-08-20T21:13:30.127
> 
> 标签：python, mongodb, mapreduce, celery, distributed-computing

我目前正在从事一个项目，该项目涉及对许多相对较小的数据集执行大量统计计算。其中一些计算就像计算移动平均线一样简单，而另一些则涉及更多的工作，例如 Spearman 的 Rho 或 Kendell 的 Tau 计算。

数据集本质上是打包到字典中的一系列数组，其键与 MongoDb 中的文档 id 相关，该文档 id 提供有关子集的更多信息。字典中的每个数组的值不超过 100 个。然而，字典可能无限大。然而，实际上，每年约有 150 个值被添加到字典中。

我可以使用 mapreduce 来执行所有必要的计算。或者，我可以在分布式系统上使用 Celery 和 RabbitMQ，并在 python 中执行相同的计算。

我的问题是：最推荐或最佳实践的途径是什么？

以下是一些附加信息：

1.  我还没有对任何东西进行基准测试，因为我刚刚开始构建脚本以计算每个数据集的指标。
2.  使用 celery/rabbitmq 分布式队列可能会增加对 Mongo 数据库的查询数量。
3.  我不认为这两种方法的内存使用是一个问题，除非同时执行的任务数量非常大。大多数任务本身只是在数据集中获取一个项目，加载它，进行计算，然后释放它。所以即使一个数据集中的数据量非常大，也不会一次全部加载到内存中。因此，在我看来，限制因素归结为 mapreduce 或排队系统执行计算的速度。此外，它取决于并发任务的数量。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:51:33.447

如果没有基准测试就不可能说，但我的直觉倾向于在 Python 中而不是 mapreduce 中进行更多计算。我主要担心的是 mapreduce 是单线程的：一个 MongoDB 进程一次只能运行一个 Javascript 函数。但是，它可以同时处理数千个查询，因此您可以通过从多个 Python 进程查询 MongoDB 来利用这种并发性。

# json - NSJSONSerialization - 在（索引）重复键错误字符，字符是“：”

> ID：12045279
> 
> 赞同：0
> 
> 时间：2012-08-20T21:13:32.130
> 
> 标签：json, nsjsonserialization

我创建了一个 servlet，它使用从 json 数据创建的字节数组来响应获取请求。我正在尝试在 iOS 中使用这些数据并使用 NSJSONSerialization 将其解析为 NSDictionary，但它失败并出现以下错误

> 错误域 = NSCocoaErrorDomain 代码 = 3840 “操作无法完成。（可可错误 3840。）”（字符 11 周围对象的重复键。） UserInfo = 0x6833200 {NSDebugDescription =字符 11 周围对象的重复键。}

这是我的代码：

```
NSString *query = @"http://localhost:8888/url?method=retrieve";

NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:query]];
NSError *error = nil;
NSString *stringData = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"substring to index 255: %@",  [stringData substringToIndex:255]);
NSDictionary *results = jsonData ? [NSJSONSerialization JSONObjectWithData:[stringData dataUsingEncoding:NSUTF8StringEncoding] options:kNilOptions error:&error] : nil;
NSLog(@"Response as Dictionary:\n%@", results.description);
if (error) {
    NSLog(@"Error: %@", error);
} 
```

stringData 的值为

> {"APPEALS":{"APPEAL":{"AppealID":387423483,"LastEdit":"1 ...

响应作为字典返回（null）显然因为有一个错误我猜它与我的服务器将输出流中的数据作为字节[]（java）发送并且它的格式不正确的事实有关在 iOS 中收到 json 时，但我不明白为什么它会在字符 11“：”处失败 仅供参考，服务器是用 Java 编写在 Google App Engine 上的，localhost url 是本地开发服务器。json 数据是使用 Jackson Generator 库创建的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:47:46.847

我自己找到了答案：当错误指向“：”字符处的重复键时，这意味着以下 json 数组中的某个键被重复，不一定是紧跟该字符索引的那个键。从上面的 json 数据中，我有许多“APPEAL”条目，当变成 NSDictionary 时会抛出错误，因为给定键只能有 1 个值。我相信我的困惑源于阅读杰克逊 json 生成器教程，该教程描述了使用相同的键创建条目，以便以后可以将它们序列化为具有“键”作为对象类名称的对象的许多实例（所以我可以创建许多 APPEAL使用 Jackson 解析器的对象，但在 NSJSONSerialization 中不是这样）。

我还在服务器端连接了几个 json 文件：

> ( {"table":{"title":value}}{"anotherTable":{"title":value}} )

这样我的 url 请求响应可以为多个文件提供 1 个请求（成本效率），但这些文件必须在客户端拆分并单独序列化，因为“}}{”不是合法的 json 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T03:26:11.527

json有重复key。例如，{"json":"3","string":"34","json":"3"}。在iOS6.0之前无法解析json。

# ruby - 我可以从 Ruby 中删除什么并且仍然支持 Rake/gems？

> ID：12045289
> 
> 赞同：1
> 
> 时间：2012-08-20T21:14:27.303
> 
> 标签：ruby, continuous-integration, rake

我正在使用 Rake 构建一个大型 .NET 项目。我们将 Ruby 环境提交给我们的源代码控制，并将 gem 安装到这个“本地”环境（如 Albacore、Nokogiri 等）。我们基本上是按照这个[指南](http://lostechies.com/derickbailey/2010/03/23/running-ruby-and-rake-and-albacore-without-installing-them/)，使用 RubyInstaller for Windows [zip 包](http://rubyinstaller.org/downloads/)。

```
trunk/
  source/
  packages/
  ruby/          <-- ruby here!
  build.bat      <-- helper scripts (call Ruby/rake)
  Solution.sln 
```

但是，我们的源代码控制服务器是远程托管的，在虚拟机上，链接速度很慢。我读到有些人已经[精简](http://lostechies.com/derickbailey/2010/03/23/running-ruby-and-rake-and-albacore-without-installing-them/#comment-170919401)了 Ruby 环境，比如在[Machine.Specifications 项目](https://github.com/machine/machine.specifications/tree/master/Tools/Rake/bin)中。但是，这看起来很极端！（那里甚至有宝石支持吗？）

我可以开始删除文件和目录，看看有什么用，但必须有一些已知的文件集可以删除，并且仍然支持基本的 Ruby、Rake 和 gems？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:13:39.043

从我自己的实验和调查来看，很难确定什么是“必需的”，什么是可选的。有些文件看起来非常安全且易于删除，而有些文件我不想玩。*我在下面的结果只节省了大约 5 MB... 可能根本*不足以保证这样做。

## 斌

该`ruby/bin`目录包含许多批处理脚本，这些脚本只是帮助`ruby`使用正确的“应用程序”调用可执行文件，如 Rake 或 Gem。例如，`rake.bat`包含这一行

```
@"%~dp0ruby.exe" "%~dpn0" %* 
```

您可以在脚本中用正确的命令替换`build.bat`它（假设它比 ruby​​ 环境“上”一级，可能在解决方案根目录）

```
@"%~dp0ruby\bin\ruby.exe" "%~dp0ruby\bin\rake" %* 
```

您可以转储其余的批处理脚本，但是在将 gem 安装到本地环境中时会遇到一些麻烦。

```
cmd> ruby\bin\ruby.exe ruby\bin\gem install <whatever> 
```

而且，从 Ruby 1.9.3 开始，这只为您节省了 1.38KB。我确信可以删除此目录中的其他一些非扩展文件，但是，在不知道它们的作用的情况下，继续进行是不安全的。

## 包括 (175 KB)

该`ruby/include`目录似乎只包含用于针对 Ruby 进行开发的 C 头文件（我在此提供支持）。我删除了它，一切都运行良好。

## 库/tcltk (4.7 MB)

它`ruby/lib/tcltk`看起来很像包含目录，但用于 Tcl 编程。

## 库/红宝石

该`ruby/lib/ruby`目录包含此安装的 gem 和更多可怕的东西。除非您想无意中削弱您的环境，否则我会远离此目录。

## 分享 (27 KB)

该`ruby/share`目录似乎只包含帮助页面，转储它们！

# java - 如何在两个节点之间建立多个链接（java）

> ID：12045292
> 
> 赞同：1
> 
> 时间：2012-08-20T21:14:46.967
> 
> 标签：java, map, hyperlink, nodes, edges

我正在尝试编写一个代码，您可以在其中选择两个节点并在它们之间创建一个或多个连接。问题是我只能创建一个连接，该连接由一个 to-edge 和一个 from-edge 组成，我使用 hashmap 中的listingge。

问题是我不知道如何在两个节点之间建立多个链接，它只注册一个链接。有什么建议可以让我注册几个链接吗？我需要创建另一个地图吗？

```
public class ListGraph<G> implements Graph<G> {
private Map<G, List<ListEdge<G>>> nodes = new HashMap<G, List<ListEdge<G>>>();

public void addNode(G ny) {
    if (!nodes.containsKey(ny))
        nodes.put(ny, new ArrayList<ListEdge<G>>());
}

public void connect(G from, G to, String name, int weight) {
        getEdgesFrom(from).add(new ListEdge<G>(to, weight, name));
        getEdgesFrom(to).add(new ListEdge<G>(from, weight, name));      
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:19:08.213

当您`add`访问 Map 时，如果找到键，则将值替换为新值。

你必须做的是。

1）查找密钥是否已经存在（检查是否`get()`返回`null`或`ListEdge<G>`）

2）如果它是空的，你就像`add`你在你的代码中一样。

3) 如果它不为空，则检索 List**并将新项目添加到 list 中**，而不是添加到地图中。所以，现在您有一个`G`指向 a 的键，其中`ListEdge`包含多个元素。

# php - .bind() 无法设置 cookie

> ID：12045297
> 
> 赞同：0
> 
> 时间：2012-08-20T21:15:07.770
> 
> 标签：php, javascript, jquery, cookies, translation

我有一个设置 cookie 的功能，并且我在我的一些链接上设置了 .bind()，以便它们在单击时触发 cookie 功能。现在，当它们被点击时，没有设置 cookie。我已经花了几个小时在这上面，但无法弄清楚。

```
<script type="text/javascript"> function createCookie(name,value,days) { 
if (days) {
    var date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    var expires = ";
 expires=" + date.toGMTString();
}
else {
    var expires = "";
}
document.cookie = name + "=" + value + expires + "; path=/";
}
$("a#en").bind("click", function () {
    createCookie('TR_LNG', 'en', 90);
});
$("a#fr").bind("click", function () {
    createCookie('TR_LNG', 'fr', 90);
});
$("a#de").bind("click", function () {
    createCookie('TR_LNG', 'de', 90);
});
$("a#ja").bind("click", function () {
    createCookie('TR_LNG', 'ja', 90);
});
$("a#pl").bind("click", function () {
    createCookie('TR_LNG', 'pl', 90);
});
$("a#es").bind("click", function () {
    createCookie('TR_LNG', 'es', 90);
});
</script> 
```

HTML

```
<div id="langselectsplash" class="langselectsplash">
    <div id="select">
        <img src="http://mysite.org/wp-content/uploads/2012/08/sarvalogo2.png"
        />
        <p>
            <style>
            #tr_setdeflang {
                display:none;
            }

            </style>
            <div class="no_translate transposh_flags">
                <a id="en" href="/about/" class="tr_active">English</a>
                <a id="fr" href="/fr/about/">Français</a>
                <a id="de" href="/de/about/">Deutsch</a>
                <a id="ja" href="/ja/about/">日本語&lt;/a>
                <a id="pl" href="/pl/about/">Polski</a>
                <a id="es" href="/es/about/">Español</a>
            </div>
        </p>
    </div>
</div>
<div id="langsplashfade"></div> 
```

**输出上述内容的 PHP 代码：**

```
<?php
echo "<script type=\"text/javascript\"> function createCookie(name,value,days) { \nif (days) { \nvar date = new Date();\n date.setTime(date.getTime()+(days*24*60*60*1000));\n var expires = \";\n expires=\"+date.toGMTString();\n} else { \nvar expires = \"\";}document.cookie = name+\"=\"+value+expires+\"; path=/\";}\n";
foreach ($args as $langrecord) {
    echo "$(\"a#{$langrecord['isocode']}\").bind(\"click\", function() {createCookie('TR_LNG','{$langrecord['isocode']}',90);});\n";
}
echo "</script>";
?>
   <?php
echo " <div id=\"langselectsplash\" class=\"langselectsplash\"><div id=\"select\"><img src=\"http://mysite.org/wp-content/uploads/2012/08/sarvalogo2.png\" /><p>";
?>
           <?php
echo "<style>#tr_setdeflang{display:none;}</style><div class=\"" . NO_TRANSLATE_CLASS . " transposh_flags\" >";
foreach ($args as $langrecord) {
    echo "<a id=\"{$langrecord['isocode']}\" href=\"{$langrecord['url']}\"" . ($langrecord['active'] ? ' class="tr_active"' : '') . '>' . "{$langrecord['langorig']}</a>";
}
echo "</div>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:22:04.553

您需要将要绑定事件的代码放在 DOM 就绪事件上：

```
$(document).ready(function(){
//Your code
}); 
```

或者

```
$(function(){
//Your code
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:22:14.380

查看您的日志：

```
SyntaxError: unterminated string literal
var expires = "; 
```

你有一个我认为你想要的错误：

```
function createCookie(name,value,days) { 
    var expires = "";
    if (days) { 
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        expires = ";expires=" +date.toGMTString();
    }
    document.cookie = name + "=" + value + expires + ";path=/";
} 
```

因为您在一行上打开一个字符串，而此刻永远不会关闭它。并且代码可以重写为：

```
$("#en, #fr, #de, #ja, #pl, #es").bind("click", function() {
    createCookie('TR_LNG', this.id, 90);
}); 
```

或者甚至更好地在这些锚链接上添加一个 css 类并将其作为目标（例如对于您当前的站点：`$(".transposh_flags a")`将与上面的代码相同。

# c# - 为什么progressBar 在接近尾声时达到100% 并超过90%？

> ID：12045298
> 
> 赞同：0
> 
> 时间：2012-08-20T21:15:12.150
> 
> 标签：c#

从大约 90% 开始，我看不到运行 91、92、93 的数字......酒吧刚刚走到尽头，然后是 100%

这是触发该操作的菜单单击事件：

```
private void beginConvertionToolStripMenuItem_Click(object sender, EventArgs e)
        {
                automatic_ = true;
                button4.Enabled = true;
                beginConvertionToolStripMenuItem.Enabled = false;
                backgroundWorker1.RunWorkerAsync();
        } 
```

然后是 DoWork 事件：

```
private void backgroundWorker1_DoWork_1(object sender, DoWorkEventArgs e)
        {
            if (automatic_ == true)
            {
                int y;
                string[] newDest_files;
                System.Drawing.Image NewImages;
                string sf;
                string[] images;
                sf = @"C:\Fraps\Screenshots\";
                images = Directory.GetFiles(sf, "*.bmp");
                for (int x = 0; x < images.Length; x++)
                {
                    int procents = ((x + 1) * 100) / images.Length;
                    backgroundWorker1.ReportProgress(procents, images[x]);
                    if (cancel_ == true)
                    {
                        e.Cancel = true;
                        break;
                    }

                        NewImages = System.Drawing.Image.FromFile(images[x]);
                        batch_Resize(NewImages);
                        if (NewImages != null)
                        NewImages.Dispose();
                }
            }
            e.Result = "All files converted successfully";
        } 
```

batch_Resize 函数代码：

```
private void batch_Resize(Image sourceImage)
        {
            Bitmap newImage = new Bitmap(512, 512);
            using (Graphics gr = Graphics.FromImage(newImage))
            {
                gr.SmoothingMode = SmoothingMode.AntiAlias;
                gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
                gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
                gr.DrawImage(sourceImage, new Rectangle(0, 0, newImage.Width, newImage.Height));
                i = i + 1;
                newImage.Save(@"d:\NewImages\" + i.ToString("D6") + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg);
            }

            if (newImage != null)
                newImage.Dispose();
        } 
```

和进度改变事件：

```
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            progressBar1.Value = e.ProgressPercentage;

            listBox1.Items.Add( "Converting File: " + e.UserState.ToString());
            textBox1.Text = e.ProgressPercentage.ToString();
            label4.Text = e.ProgressPercentage.ToString() + "%";

        } 
```

和完成的事件：

```
private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if (e.Error != null)
            {
               MessageBox.Show(e.Error.Message);
            }
            else if (e.Cancelled)
            {
                listBox1.Items.Add("Convertion Have been canceled");
                button4.Enabled = false;
            }
            if (cancel_ == true)
            {
            }
            else
            {
                button4.Enabled = false;
            }
        } 
```

似乎从 90% 开始，进度条继续呈绿色，但最终它的 100% 并且它没有从 90 到 100。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:20:47.087

它可能发生得太快了。尝试添加等待时间（用于测试目的），以便您检查它是否正确显示。

不确定如何在 C# 上执行此操作，但在 Java 上它将是 Thread.sleep()

# lisp - 尾调用和尾递归有什么区别？

> ID：12045299
> 
> 赞同：19
> 
> 时间：2012-08-20T21:15:24.627
> 
> 标签：lisp, scheme

我知道尾递归是函数对自身进行尾调用的特殊情况。但我不明白尾调用和尾递归有何不同。在具有实现 TCO（尾调用优化）的“适当尾递归”语言中，如 Scheme，这意味着尾调用和尾递归不消耗堆栈或其他资源。在编译器无法优化尾递归的语言中，程序可能会耗尽堆栈并崩溃。我认为，在“适当的尾递归”语言中，为循环实现尾递归的效率不亚于使用循环。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-21T04:58:49.600

让我们首先消除“尾调用”的歧义。

*尾部位置*的调用是一个函数调用，其结果立即作为封闭函数的值返回。尾部位置是一个静态属性。

可以在不将任何东西压入堆栈的情况下实现尾部位置的调用，因为旧的堆栈帧本质上是无用的（假设在函数式语言中通常是正确的，但在 C 语言中不一定是这样的）。正如盖伊斯蒂尔所说，尾声是传递参数的跳跃。

粗略地说，如果一种语言实现具有相同的渐近空间使用率，则它与将所有在尾位置的调用实现为没有堆栈增长的跳转的语言实现是*正确的尾递归。*这是一个非常粗略的简化。如果您想要完整的故事，请参阅 Clinger 的[Proper Tail Recursion and Space Efficiency](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.50.4500)。

请注意，仅专门处理*尾递归*函数不足以实现正确的尾递归（必须专门处理*任何尾调用）。*该术语有些误导。

另请注意，还有其他方法可以在不将尾调用作为跳转实现的情况下实现渐近空间效率。例如，您可以将它们实现为正常调用，然后通过删除无用的帧（以某种方式）定期压缩堆栈。请参阅 MTA 上的 Baker 的[Cheney](http://www.pipeline.com/~hbaker1/CheneyMTA.html)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T10:05:59.833

正如您所说，尾递归是尾调用的一种特殊情况。因此，任何简单地实现通用 TCO 的语言都是“适当的尾递归”。

然而，逆不成立。有相当多的语言只优化尾递归，因为这要容易得多——您可以直接将其转换为循环，并且不需要以新方式操纵堆栈的特定“尾调用”操作。例如，这就是编译到没有尾调用指令的 JVM 的语言通常只优化尾（自）递归的原因。（有一些技术可以解决缺少此类指令的问题，例如蹦床，但它们非常昂贵。）

全尾调用优化不仅适用于自身（或相互）递归调用，还适用于尾部位置的*任何调用。*特别是，它扩展到目标*不是静态已知*的调用，例如在调用一等函数或动态分派方法时！因此，它需要更精细（尽管众所周知）的实现技术。

许多函数式编程技术——还有一些流行的 OO 模式（参见例如[Felleisen 的 ECOOP'04 演示文稿](http://www.ccs.neu.edu/home/matthias/Presentations/ecoop2004.pdf)或[Guy Steele 的博客文章](http://www.eighty-twenty.org/index.cgi/tech/oo-tail-calls-20111001.html)）——需要完整的 TCO 才能真正可用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T02:01:29.483

Well, the two are somehow related −as they both have the word 'tail' in them− but are completely differents…</p>

Tail recursion is a recursion with some specific constraints, and tails calls are function calls. Your question is a bit like "what is the difference between an animal and a cat?"…</p>

A tail call is a function call in tail position. Examples: `f(x)` in `f(x)`, and `g(★)` in `g(f(x))` Counter-examples: `f(x)` in `1+f(x)` and in `g(f(x))`

Tail recursion is a recursion where recursive calls are tail calls. Examples: `f(★)` on the right of the "=" sign in `f(x) = f(x)`, `f(x,y) = if x == 0 then y else f(x-1,y+x)` I have defined two recursive functions that call themselves with tail calls. That's it.

In languages with TCO, tail calls cost nothing, so (tail) recursion works in constant stack, and everyone is happy.

# firefox - 与带有 achor 标签的按钮标签与 Chrome Firefox 和 IE 的兼容性

> ID：12045306
> 
> 赞同：0
> 
> 时间：2012-08-20T21:15:48.440
> 
> 标签：firefox, google-chrome, button, cross-browser, anchor

我有以下代码

```
<button><a href="logout.php">Logout</a></button> 
```

我在做什么，如果用户单击按钮，链接到注销会话终止并重定向到登录页面。场景是，当我处理它时，Chrome 中的一切都很好，而 Firefox 和 IE 对单击按钮标签没有任何影响。关于使代码浏览器兼容的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:23:18.847

`<button>`标签并非设计为在其中包含标签`<a>`。正如您所发现的，它不起作用，也不是很合乎逻辑。一个按钮被设计为在同一页面上接受一个由 Javascript 处理的点击事件，而一个链接接受一个点击事件并将其引导到一个新页面——将一个放在另一个里面，这两个动作相互冲突.

如果你想要一个看起来像一个按钮的链接，你应该把它的样式设置成一个按钮，而不是为了视觉效果而试图在它周围包裹一个按钮。

# c++ - 在 QStackedWidget 中更改小部件

> ID：12045309
> 
> 赞同：0
> 
> 时间：2012-08-20T21:16:10.780
> 
> 标签：c++, qt

我的堆叠小部件中有 2 个自定义小部件，我希望能够从一个更改为另一个，我按下一个按钮，但是当我当前单击它时，程序就会终止。

这是第一个自定义小部件 .cpp：

```
 #include "loginpage.h"
 #include "ui_loginpage.h"

 #include "mainwindow.h"
 #include "mainpage.h"

 #include "QtGui"

 LoginPage::LoginPage(QWidget *parent) :
QWidget(parent),
ui(new Ui::LoginPage)
 {
     ui->setupUi(this);

     connect(ui->loginPushButton, SIGNAL(clicked()), this, SLOT(doLogin()));
 }

 LoginPage::~LoginPage()
 {
     delete ui;
 }

 QString LoginPage::getUsername()
 {
     QString userName = ui->usernameLineEdit->text();
     return userName;
 }

 QString LoginPage::getPassword()
 {
     QString passWord = ui->passwordLineEdit->text();
     return passWord;
 }

 void LoginPage::doLogin()
 {
     QString username = getUsername();
     QString password = getPassword();
     bool check = checkCredentials(password, username);

     if(check == true)
     {
         MainWindow *main;
         main = new MainWindow;
         main->test();

     }else
     {
         QMessageBox::information(this, tr("incorrect"), tr("incorrect"));
     }

 }

... 
```

这是主窗口.cpp：

```
 #include "mainwindow.h"
 #include "ui_mainwindow.h"
 #include "loginpage.h"
 #include "ui_loginpage.h"

 #include "mainpage.h"

 #include <QtGui>

 MainWindow::MainWindow(QWidget *parent) :
     QMainWindow(parent),
     ui(new Ui::MainWindow)
 {

     ui->setupUi(this);

 }

 MainWindow::~MainWindow()
 {
     delete ui;
 }

 void MainWindow::test()
 {
     ui->stackedWidget->setCurrentIndex(1);

 } 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:20:09.277

我假设您的意思是它崩溃而不是终止。在你的`doLogin()`你写

```
MainWindow *main;
main->test(); 
```

但此时`main`仍然是一个空指针。所以打电话`test()`是没有意义的。结果，您的程序很可能会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:02:32.530

那么首先`qDebug()`是一个Qt程序员的朋友，可以把`qDebug() << "In x function"`代码放到哪里看看。无法查看您的 UI 文件或发生错误时，我猜您将 QStackedWidget 的 currentIndex 设置为 1，而它只有一个关联的小部件。仔细检查 UI 设置是否正确，并检查您的调试跟踪以查看它在哪里崩溃。

# c# - 选择更改时下拉列表变为空

> ID：12045311
> 
> 赞同：0
> 
> 时间：2012-08-20T21:16:16.233
> 
> 标签：c#, asp.net, sqldatasource

我是 c# 和 asp.net 的新手。我有一个`GridView`与某些记录。When any record is chosen it is displayed in the `DetailsView`. 我的详细信息视图有 3 `DropDownLists`。在我的详细信息视图的编辑模式中，当我在下拉列表中更改我的选择并更新它时，特定字段采用空值。我用过`OnSelectedIndexChanged`，我确信它会被触发，但值为空。这是我的代码。

```
protected void DropDownList1_SelectedIndexChanged(object sender,EventArgs e)
{
    DropDownList ddl = (DropDownList)this.form1.FindControl("DropDownList1");
    hi.Visible = true;
    if (ddl != null)
    {
        ddl.Text = ddl.SelectedItem.Value;
        ddl.DataBind();
    }     
} 
```

我也尝试过使用该`SelectedValue`属性进行更新，但这也没有用。

```
<asp:DropDownList ID="DropDownList1" DataTextField="strCollegeLongName"
    DataValueField="strCollegeLongName" runat="server" 
    DataSourceID="SqlDataSource1" autoPostBack="true" AppendDataBoundItems="false" 
    SelectedValue='<%#Bind="College">%'>
</asp:DropDownList>

UpdateCommand="UPDATE [RegistrationFormInfo] SET [FirstName]=@FirstName,
    [LastName]=@LastName,[EmailAddress]=@EmailAddress,[GradDate]=@GradDate,
    [WorkAuth]=@WorkAuth,[Address]=@Address,[Phone]=@Phone,[UFID]=@UFID,
    [GatorAcct]=@GatorAcct,[College]=@College,[Major]=@Major,[UserType]=@UserType,
    [AdminUser]=@AdminUser,[blnActive]=@blnActive,[EntryTS]=@EntryTS WHERE [Guid]=@Guid " 
```

所以，这里它会抛出一个错误`@College`，说不存在，但我的表有`College`列。

我被卡住了，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:39:01.607

而不是`DropDownList ddl = (DropDownList)this.form1.FindControl("DropDownList1");`，试试这个：

```
DropDownList ddl = (DropDownList)sender; 
```

`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:24:32.460

好吧，@College 错误可能与未提供命名参数有关，而不是与缺少列有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:54:15.020

呼叫`ddl.DataBind();`将重置`SelectedIndex`. 为了避免代码中的循环逻辑，调用`DataBind()`ddl 的`SelectedIndexChanged`事件处理程序是一个坏主意。

# ruby-on-rails - Rails 设计覆盖注册控制器

> ID：12045312
> 
> 赞同：0
> 
> 时间：2012-08-20T21:16:22.757
> 
> 标签：ruby-on-rails, ruby, devise

我正在与 Devise 合作，我正在尝试覆盖注册控制器。

我一直关注这里的帖子，但没有运气。

这就是我所拥有的：

```
 class AccountsController::RegistrationsController < Devise::RegistrationsController
  def new
    super
  end
 end

   devise_for :accounts, :controllers => {:registrations => "accounts/registrations"} do
     get "welcome" => "accounts#new", :as => :new_account
   end 
```

我还在视图中创建了一个帐户文件夹并添加了新视图。

我收到以下错误：

```
 app/controllers/accounts_controller.rb:1:in `<top (required)>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:12:42.053

@Brian 是正确的，它会工作，但你希望你的代码必须工作只是改变：

```
class AccountsController::RegistrationsController < Devise::RegistrationsController 
```

至：

```
class Accounts::RegistrationsController < Devise::RegistrationsController 
```

然后在控制器文件夹中创建一个帐户文件夹并将此文件放置到该文件夹​​中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:29:03.367

我的有点不同，但这解决了问题。[覆盖设计注册控制器](https://stackoverflow.com/questions/3546289/override-devise-registrations-controller)

```
 class RegistrationsController < Devise::RegistrationsController
def new
    @test = "test"
    super
end
  end 
```

我将以下内容添加到我的视图registrations/new.html.erb

然后：

```
 devise_for :accounts, :controllers => {:registrations => "registrations"} do
  get "welcome" => "registrations#new", :as => :new_account
  end 
```

# c# - 如何通过网络复制经常使用的文件？

> ID：12045316
> 
> 赞同：5
> 
> 时间：2012-08-20T21:16:30.727
> 
> 标签：c#, .net, network-programming

我需要通过网络复制一个大文件（大约 20 MB）。通常，这不是问题，但是，与文件位于同一框的应用程序相当频繁地（大约每秒一次）写入文件。

因此，因为该文件经常被写入，所以`File.Copy`调用经常失败。我也试过`File.ReadAllLines`这似乎每次都有效，但需要永远。

有没有更好、更有效、更安全的方式通过网络复制文件？

PS 该文件正在由使用 Log4Net 的进程写入。而且，如果有人想知道，写作的过程不在我的掌控之中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:49:36.383

您可以尝试这样处理：

```
string pathToFile = "path-to-your-file" ;
using ( Stream     s = File.Open( pathToFile , FileMode.Open , FileAccess.Read , FileShare.ReadWrite ) )
using ( TextReader r = new StreamReader( s ) )
{
    string fileContents = r.ReadToEnd() ;
    process( fileContents ) ;
} 
```

但是，如果写入文件的进程不愿意共享它以供阅读，那么您就是 SOL。

然而 。. . 你说：

> PS 该文件正在由使用 Log4Net 的进程写入。而且，如果有人想知道，写作的过程不在我的掌控之中。

您尝试访问的文件是由[Log4Net](http://logging.apache.org/log4net/) Appender 生成的，例如[FileAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.FileAppender.html)或[RollingFileAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.RollingFileAppender.html)吗？

如果是这样，默认的日志记录模型是`FileAppender.ExclusiveLock`，它使用排他锁在持续时间内保持文件打开，但是 IIRC，它仍然愿意共享它以供阅读。

但是获得所需结果（通过网络发送文件）的更简单（为什么要重新发明轮子？）方法是使用[Log4Net 配置](http://logging.apache.org/log4net/release/sdk/index.html)。您可以向源应用程序 Log4Net 配置文件添加一个附加程序，这将对您有所帮助。您可以使用：

*   [RemotingAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.RemotingAppender.html) “旨在将事件传递到远程接收器。即实现 RemotingAppender.IRemoteLoggingSink 接口的任何对象。它使用 .NET 远程处理传递事件。通过设置 appenders Sink 属性来指定传递事件的对象。”

*   TelnetAppender “接受套接字连接并将日志消息流[式](http://logging.apache.org/log4net/release/sdk/log4net.Appender.TelnetAppender.html)传输回客户端。输出以对 telnet 友好的方式提供，以便可以通过 TCP/IP 套接字监视日志。这允许对应用程序日志进行简单的远程监视。默认值端口是 23（telnet 端口）。”

无论哪种方式，您只需要编写一个简单的服务来处理入站日志消息。

就效率而言，如果是 log4net 输出，您只需要跟踪高水位标记并仅复制新内容即可。

1.  打开源文件进行读取
2.  创建目标文件
3.  通过网络复制数据直到文件结束
4.  保存流中的当前位置
5.  睡觉
6.  打开源文件进行读取
7.  打开目标文件进行追加
8.  寻找流中记住的位置（可能不再在文件末尾）
9.  通过网络复制数据直到文件结束，附加到目标文件。
10.  重复，*令人作呕*，从 #4

只是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:31:34.040

您可以在打开文件时使用文件共享字段以允许其他进程在您访问它时访问它，不幸的是，如果您的进程不是锁定文件的进程，那么您无法释放它并且您已经提到您不能更改编写代码，通过在文件共享字段中允许 r/w，您可以允许其他进程在复制文件时访问该文件。您可以编写一个小函数来检查文件是否被锁定并更改您的代码，以便在锁定时继续检查直到它解锁然后复制它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T21:35:04.687

File.Copy 可能无法获得文件的排他锁。

考虑到这`File.Move`是一个快速操作，即使通过网络也是如此。如果之前的应用程序不需要保留该文件，您可以运行

```
for (int i = 0; i < 10; i++)
{
    try {
        File.Move(logFilePath, tempPathOnRemoteServer);
    } catch (Exception) { 
        if (i == 9)
            throw new Exception("Could not acquire lock");
        System.Threading.Thread.Sleep(1000 * (i+1)); }
}
File.Copy(tempPathOnRemoteServer, endPathOnLocalHost); 
```

假设日志记录应用程序可以在打开时从正在移动的文件中恢复，这应该不会有问题。

或者，如果无法移动文件，请使用与上述相同的代码，将 File.Move 替换为 File.Copy，但如果复制时间过长，您的独占锁可能会导致其他应用程序出现问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T21:35:42.283

使用 FileStream 类读取文件，不要忘记在重载的构造函数中为 FileAccess 和 FileShare 设置适当的值。

```
FileStream(String, FileMode, FileAccess, FileShare) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T22:46:32.873

如果您无法修改写入文件的程序，那么您的选择就会受到限制。想到的两种可能性是：

独占打开文件，循环复制：

```
using (var fin = File.Open(InputFilename, FileMode.Open, FileAccess.Read, FileShare.None))
{
    using (var fout = File.OpenWrite(OutputFilename))`
    {
        int bytesRead = 0;
        var buffer = new byte[65536];
        while ((bytesRead = fin.Read(buffer, 0, buffer.Length)) > 0)
        {
            fout.Write(buffer, 0, bytesRead);
        }
    }
} 
```

如果 Log4Net 在您尝试打开文件进行读取时打开文件以进行写入，则您必须编写代码来处理引发的异常。该代码应该稍等片刻，然后重试。

这里的潜在缺点是，如果 Log4Net 无法写入文件（因为它是为独占访问而打开的），它可能会抛出异常。如果 Log4Net 不喜欢您打开文件以进行独占访问，那么...

只需重命名文件，然后在闲暇时复制它。如果在您尝试重命名时 Log4Net 已打开文件，您的代码将引发异常。你可以重试。如果 Log4Net 在您重命名文件后尝试写入文件，Log4Net 将创建一个具有该名称的新文件。

我没有看到任何其他选择。

顺便说一句，20 MB 并不是一个真正的大文件。在现代网络速度下，您应该能够在一秒钟内复制它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T07:58:55.010

好的，那么，另一种选择是始终模拟地写入两个文件。一个 - 真实的，另一个具有临时名称（比如说 GUID）。一旦您需要复制，请停止写入临时文件（而是创建一个新文件，然后继续在那里写入）。然后该文件将不再被锁定，因此您可以随心所欲地上传它。之后 - 删除它。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-20T22:06:41.993

首先在本地制作副本怎么样 - 这将非常快并且会保留它的状态，然后上传副本，最后删除副本？

# bioinformatics - SNP ID 转换

> ID：12045319
> 
> 赞同：1
> 
> 时间：2012-08-20T21:16:49.540
> 
> 标签：bioinformatics

有谁知道将单核苷酸多态性 (SNP) ID 从 rs# 转换为 SNP_A-# 的方法？我有两个 SNP，rs429358 和 rs4420638，需要确定这些 SNP 是否包含在不同的数据集中。数据集使用 SNP_A-xxxxx 符号作为 SNP ID。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:09:50.307

你应该问biostar： http: [//www.biostars.org/show/questions/](http://www.biostars.org/show/questions/)

SNP_A### 不是官方命名法。它从何而来 ？

比较您的 ID 的唯一方法是比较染色体/位置/等位基因参考/等位基因替代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:38:25.267

SNP_A### 标识符很可能是 Affymetrix SNP id。您需要知道它们来自哪个阵列，但它可能是人类全基因组 SNP 6.0。

您可以从 Affymetrix 网站下载注释数据，该网站将提供 rs# 到 affyid# 的映射。尝试从：[http ://www.affymetrix.com/support/mas/index.affx#1_1](http://www.affymetrix.com/support/mas/index.affx#1_1)

为 Genomewide SNP 6.0 阵列产品选择“软件和数据”下的“注释文件”。

一个问题是阵列上的一些探针集是多余的 - 对于一个小子集，您将有多个 affyid# 映射到一个 rsid#

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-16T19:07:22.533

SNP_A* 标识符是 Affymetrix SNP ID。我也必须做类似的事情，但规模要大得多......从这里使用 Affymetrix 注释文件“Genomewide SNP 6.0”并没有像我想要的那样映射：[http://www.affymetrix。 com/support/mas/index.affx#1_1](http://www.affymetrix.com/support/mas/index.affx#1_1)

我所做的是使用 Biopython（我是在 Python3 中完成的）。首先，您必须通过 pip安装[biopython 。](http://biopython.org/wiki/Download)

完成此操作后，您可以使用 Entrez 库来使用 esearch() 方法。这是一些示例代码：

```
from Bio import Entrez

Entrez.email = '<email address>'
handle = Entrez.esearch(db='snp', retmax='1', sort='SNP_ID', term='<affymetrix id>')
results = Entrez.read(handle)
rsNumber = 'rs'+results['IdList'][0] 
```

这应该为您提供来自 affymetrix id 的正确 rs 编号。

# linq - 带有投影的Linq groupby查询

> ID：12045320
> 
> 赞同：4
> 
> 时间：2012-08-20T21:17:00.810
> 
> 标签：linq, grouping

我正在尝试按客户 ID 对订单进行分组，然后将返回的订单（按客户）投影到列表中。试图弄清楚我将如何做到这一点？

```
 List<OrderGroup> set = OrderRepository.GetAllOrders
     .GroupBy(x => x.CustomerId).Select(result => new OrderGroup
         {
             Orders = ???? //should be all orders from one customer.
         }).ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T21:18:51.363

是`result`一个[`IGrouping<TKey, T>`](http://msdn.microsoft.com/en-us/library/bb344977.aspx)，它本身就是一个`IEnumerable<T>`，所以你可以这样做：

```
List<OrderGroup> set = OrderRepository.GetAllOrders
                      .GroupBy(x => x.CustomerId)
                      .Select(result => new OrderGroup
                      {
                          Orders = result.ToList()
                      }).ToList(); 
```

（请注意，这假设`Orders`可以从 a 分配`List<Order>`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:43:26.423

我会做类似下面的事情。我喜欢选择需要的列而不是全部。

```
var customerData = (from cd in OrderRepository.GetAllOrders
                     group cd by new { cd.CustomerId, cd.date } into grp
                    select new
                       {
                           customer_name = grp.FirstOrDefault().custname,
                           total_orders = grp.Count(),  
                           amount = grp.Sum(x => x.total_amt_paid)

                       }).ToList();                    

foreach (var data in customerData)
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:23:04.673

Reed 是对的，尽管我相信您也可以使用结果选择器来实现这一点，如下所示：

```
List<OrderGroup> set = OrderRepository.GetAllOrders
                         .GroupBy(x => x.CustomerId, // key selector
                           x => x, // element selector
                           result => new OrderGroup
                           {
                              Orders = result.ToList()
                           }) // result selector
                         .ToList(); 
```

（我面前没有编译器来验证。）

# asp.net - 在 log4net 字符串中包含 Web 用户 ID？

> ID：12045329
> 
> 赞同：0
> 
> 时间：2012-08-20T21:17:35.873
> 
> 标签：asp.net, log4net, log4net-configuration

我有一个基本的 ASP.NET webapp，它使用 log4net 来跟踪某些关键操作。当我在我的工作站上运行应用程序时，日志条目包括我的用户名：

```
[2012-08-15 18:05:17,838] - MoneyApp.Import - LocalAD\ivravenger - Attempting File Import From C:\fakepath\outputFile.txt 
```

但是，当我在服务器上运行应用程序时，我将 ASP.NET 工作进程作为用户 ID：

```
[2012-08-15 18:05:17,838] - MoneyApp.Import - IIS APPPOOL\ASP.NET v4.0 32-bit - Attempting File Import From C:\fakepath\outputFile.txt 
```

这是我的配置字符串：

```
<conversionPattern value="[%date] - %logger - %username - %message%newline" /> 
```

如何将 Web 用户 ID 放入日志文件？我已经在每个页面的代码隐藏中检索用户 ID，我只是不确定将其添加到日志文本中的最佳方法，而无需将其附加到每个 log() 语句。

# applescript - 出现重复错误“Finder 出错：无法将 XYZ 转换为类型项目”

> ID：12045330
> 
> 赞同：1
> 
> 时间：2012-08-20T21:17:35.830
> 
> 标签：applescript

我正在尝试制作一个在文件中写入文本然后将其复制到其他地方的脚本。我明白了：

```
 tell application "Finder" to get folder of (path to me) as Unicode text
        set workingDir to POSIX path of result
        set theFile to workingDir & "file.txt"
        set theText to "Some text..."

        set theFileReference to open for access theFile with write permission
        write theText to theFileReference
        close access theFileReference

        tell application "Finder" to duplicate theFile to "Macintosh HD:Applications:Microsoft Office 2011:Office:Startup:Word:" with replacing 
```

但我总是得到错误：

`error "Finder got an error: Can’t make \"/Users/ME/Documents/file.txt\" into type item."`

最奇怪的是，我在上面做了一个重复的工作……但它基本上是一样的。

我从 Applescript 开始，所以我不会感到惊讶，这是一个愚蠢的小细节......所以任何线索都值得赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:50:46.547

Finder 不知道 POSIX 路径是什么。例如`(theFile as POSIX file)`，您可以强制文件路径，也可以使用系统事件。

# wpf - 结合 MahApps.Metro 和 Caliburn.Micro

> ID：12045347
> 
> 赞同：14
> 
> 时间：2012-08-20T21:19:04.053
> 
> 标签：wpf, caliburn.micro, mahapps.metro

好吧，我正在尝试同时使用 MahApps.Metro 和 Caliburn.Micro，但我遇到了一些问题

这是我的引导程序

```
public sealed class TestBootstrapper : Bootstrapper<ShellViewModel> 
{
    private CompositionContainer container;

    protected override void Configure()
    {
        container = new CompositionContainer(new AggregateCatalog(AssemblySource.Instance.Select(x => new AssemblyCatalog(x)).OfType<ComposablePartCatalog>()));

        CompositionBatch batch = new CompositionBatch();

        batch.AddExportedValue<IWindowManager>(new AppWindowManager());
        batch.AddExportedValue<IEventAggregator>(new EventAggregator());
        batch.AddExportedValue(container);

        container.Compose(batch);
    }

    protected override object GetInstance(Type serviceType, string key)
    {
        string contract = string.IsNullOrEmpty(key) ? AttributedModelServices.GetContractName(serviceType) : key;
        var exports = container.GetExportedValues<object>(contract);

        if (exports.Count() > 0)
        {
            return exports.First();
        }

        return base.GetInstance(serviceType, key);
    }
} 
```

这是我的 AppWindowManager

```
public sealed class AppWindowManager : WindowManager
{
    static readonly ResourceDictionary[] resources;
    static AppWindowManager()
    {
        resources = new ResourceDictionary[] 
        {
            new ResourceDictionary
            { Source = new Uri("pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml", UriKind.RelativeOrAbsolute) },
            new ResourceDictionary
            { Source = new Uri("pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml", UriKind.RelativeOrAbsolute) },
            new ResourceDictionary
            { Source = new Uri("pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml", UriKind.RelativeOrAbsolute) },
            new ResourceDictionary
            { Source = new Uri("pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml", UriKind.RelativeOrAbsolute) },
            new ResourceDictionary
            { Source = new Uri("pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml", UriKind.RelativeOrAbsolute) },
            new ResourceDictionary
            { Source = new Uri("pack://application:,,,/MahApps.Metro;component/Styles/Controls.AnimatedTabControl.xaml", UriKind.RelativeOrAbsolute) }
        };
    }

    protected override Window EnsureWindow(object model, object view, bool isDialog)
    {
        MetroWindow window = view as MetroWindow;
        if (window == null)
        {
            window = new MetroWindow()
            {
                Content = view,
                SizeToContent = SizeToContent.WidthAndHeight
            };
            window.MinHeight = 150;
            window.MinWidth = 500;
            foreach (ResourceDictionary resourceDictionary in resources)
            {
                window.Resources.MergedDictionaries.Add(resourceDictionary);
            }
            window.SetValue(View.IsGeneratedProperty, true);
            Window owner = this.InferOwnerOf(window);
            if (owner != null)
            {
                window.WindowStartupLocation = WindowStartupLocation.CenterOwner;
                window.Owner = owner;
            }
            else
            {
                window.WindowStartupLocation = WindowStartupLocation.CenterScreen;
            }
        }
        else
        {
            Window owner2 = this.InferOwnerOf(window);
            if (owner2 != null && isDialog)
            {
                window.Owner = owner2;
            }
        }
        return window;
    }
} 
```

这有点工作，但我的窗口周围有一个黑色边框，直到我调整大小，见下图 ![在此处输入图像描述](../Images/e04a9953911df8b5ccd144e7baa4b124.png)

为什么有黑色边框，我怎样才能摆脱它（如果我手动调整窗口大小，边框就会消失。）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-03T18:43:41.490

对于 Caliburn.Micro 2 和 Mahapps.Metro 1，上述内容不再是这两个框架的有效组合。

在浏览了 Caliburn.Micro 文档并遵循过时的指南之后，我想出了以下内容。

首先像这样创建引导程序：

```
public class AppBootstrapper : BootstrapperBase
{
    private CompositionContainer container;

    public AppBootstrapper()
    {
        Initialize();
    }

    protected override void Configure() 
    {
        container = new CompositionContainer(
            new AggregateCatalog(
                AssemblySource.Instance.Select(
                x => new AssemblyCatalog(x)).OfType<ComposablePartCatalog>()
                )
            );

        CompositionBatch batch = new CompositionBatch();

        batch.AddExportedValue<IWindowManager>(new WindowManager());
        batch.AddExportedValue<IEventAggregator>(new EventAggregator());
        batch.AddExportedValue(container);

        container.Compose(batch);

    }

    protected override object GetInstance(Type service, string key) 
    {
        string contract = string.IsNullOrEmpty(key) ? AttributedModelServices.GetContractName(service) : key;
        var exports = container.GetExportedValues<object>(contract);

        if(exports.Any())
        {
            return exports.First();
        }

        throw new Exception(string.Format("Could not locate any instances of contract {0}.", contract));
    }

    protected override IEnumerable<object> GetAllInstances(Type service)
    {
        return container.GetExportedValues<object>(AttributedModelServices.GetContractName(service));
    }

    protected override void BuildUp(object instance) 
    {
        container.SatisfyImportsOnce(instance);
    }

    protected override void OnStartup(object sender, StartupEventArgs e) 
    {
        DisplayRootViewFor<IShell>();
    }
} 
```

接下来将引导程序与 MahApps.Metro 资源一起添加到 App.xaml 文件中，如下所示：

```
<Application x:Class="your-namespace.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:your-namespace">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary>
                    <local:AppBootstrapper x:Key="bootstrapper" />
                </ResourceDictionary>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colors.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

下一步是确保您的 ShellViewModel 具有正确的导出（这是设置 mef 引导程序的简单要求，并且**不要忘记创建 IShell 类（这里不显示，因为它是标准的）**），如下所示：

```
[Export(typeof(IShell))]
public class ShellViewModel : PropertyChangedBase, IShell 
{

} 
```

最后但同样重要的是，我们需要设置 ShellView 以使用 MahApps.Metro 窗口：

```
<Controls:MetroWindow x:Class="your-namespace.ShellView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro">

    <Grid Background="White">
        <TextBlock Text="Hello Caliburn Micro!"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Center"
                   FontSize="20" />
    </Grid>

</Controls:MetroWindow> 
```

希望这可以帮助其他希望在最新迭代中结合 Caliburn.Micro 和 MahApps.Metro 的人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T17:29:14.317

似乎 SizeToContent 是问题所在！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T13:09:16.343

该问题的解决方案是将 ResizeMode 属性设置为“NoResize”，然后正确呈现边框。

```
window = new MetroWindow()
{
    Content = view,
    SizeToContent = SizeToContent.WidthAndHeight,
    ResizeMode = ResizeMode.NoResize
}; 
```

# php - 推荐这种编程方法吗？

> ID：12045350
> 
> 赞同：1
> 
> 时间：2012-08-20T21:19:25.093
> 
> 标签：php, content-management-system, server-side

所以当地的一位议员让我为他们进行一个项目。他们希望他们所在地区的每个网站都对其网站进行彻底改造，并希望其内容易于管理。长话短说，议会预算有限，而且我身边没有足够的人力资源（他们有 200 多所学校）我想知道是否推荐这样做；

1.  我将创建自己的 PHP 内容管理系统并将其存储为主机服务器。所有核心文件都将存储在这里。

2.  每所学校都有自己的域，但核心文件存储在主机服务器中，这将为每个网站提供动力并处理所有请求和数据库请求。

3.  每所学校还将拥有自己的数据库来存储自己的内容和设置。

4.  学校管理员将有权访问其学校管理面板来编辑内容、编辑配色方案和维护网站。但是，代码引擎将存储在主机服务器上。

这样我就不必配置很多和样式 200 多个网站。并且当发布软件/安全更新时，所有商店都将共享相同的核心文件，因此所有网站都会自动更新。

我了解服务器需要是专用服务器，由理事会提供和维护。

这是推荐的，以前是否做过，还有它们的优点或缺点吗？

谢谢彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:25:29.213

是的，这种架构以前已经做过了。您也可以将所有内容存储在主服务器上，并消除每个位置的所有“卫星”服务器。您可以安装许多 CMS 应用程序，例如 WordPress 和 Joomla。可能值得一看其中的一个，然后简单地为它们设计样式。如果自定义解决方案更可取，那么您似乎走上了正轨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:38:31.777

我相信您已经听说过 Drupal。它是一个内容管理框架/系统（无论人们喜欢如何称呼它。它有利也有弊。一个缺点是它比 CMS 系统（如 wordpress）要复杂一些。但在我看来，它是值得麻烦。我为您的情况推荐它的主要原因是，它包含一个名为的东西`Drupal Multi Site Installation`，它可以更轻松地使用集中控制面板来安装、管理和控制不同 URL 中的多个 Drupal 站点，而无需重新安装代码基地一次又一次。

您可以在[http://drupal.org/documentation/install/multi-site了解更多信息](http://drupal.org/documentation/install/multi-site)

您花在自己开发某些东西上的时间，可以花在学习如何使用 Drupal 管理/管理站点上。这样最终，您不仅能够实现您为实现自己开发的东西而设定的相同目标，而且您现在还掌握了如何使用世界一流的工具，这将帮助您未来也是。

# c# - 以编程方式创建 appref-ms 文件？

> ID：12045354
> 
> 赞同：0
> 
> 时间：2012-08-20T21:19:30.240
> 
> 标签：c#, clickonce

部署应用程序后，我单击一下。创建 someNAME.appref-ms 文件的快捷方式具有以下内容：

**EFileShare.applicationFileShare.application，Culture=neutral，PublicKeyToken=c9854348sdsdsda82f2074b，processorArchitecture=x86**

我们可以以编程方式创建我们自己的具有相同内容的 appref-ms 文件吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:34:48.567

这很有用：

[http://mheironimus.blogspot.com/2009/12/programmatically-create-clickonce.html](http://mheironimus.blogspot.com/2009/12/programmatically-create-clickonce.html)

# ruby-on-rails - Rails 延迟作业开始时间

> ID：12045355
> 
> 赞同：0
> 
> 时间：2012-08-20T21:19:39.200
> 
> 标签：ruby-on-rails, ruby, delayed-job

是否可以为延迟作业提供时间参数以开始特定时间而不是给出间隔。？

我希望能够做到

```
Delayed::Job.enqueue(ScheduleJob.new(args),0,:run_at => Some valid time format) 
```

但我只能做

```
Delayed::Job.enqueue(ScheduleJob.new(args),0,:run_at => Proc.new{15.minutes.from_now}) 
```

我尝试提供一个 datetime 对象，但它无法将作业排入队列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:27:40.647

[基于此](http://zadasnotes.blogspot.com/2011/03/rails-tips-using-delayedjob-to-schedule.html)，您需要创建一个自定义的“根据会议时间计算何时发送提醒的方法”，或者在您的情况下，无论日期/时间是什么。例如，如果您想在午夜发送它，您会希望自定义方法返回从该点到午夜的分钟数。

# c# - 在通用 IEqualityComparer 中寻找匿名类型的类型推断

> ID：12045356
> 
> 赞同：1
> 
> 时间：2012-08-20T21:19:41.503
> 
> 标签：c#, generics, anonymous-types, type-inference

我发现这篇关于创建泛型的可爱[博客文章](http://blog.samstephens.co.nz/2010-12-06/tidy-iequalitycomparer-genericequalitycomparer/)`IEqualityComparer`让您可以指定用于相等测试的 lambda 表达式。[这对于使用标准查询运算符构建流畅](https://stackoverflow.com/questions/4115452/method-chaining-equivalent) [的连接表达式](http://msdn.microsoft.com/en-us/library/bb549267)非常有帮助，如下例所示（有效的、自包含的[LINQPad](http://linqpad.net/)脚本；只需复制粘贴即可！）：

```
void Main()
{
    var outers = new [] {
        Tuple.Create("a", "b"),
        Tuple.Create("a", "c")
    };

    var inners = new [] {
        Tuple.Create("b", "c"),
        Tuple.Create("a", "c")
    };

    var j2s = outers
    .Join(
        inners, 
        outer => outer,
        inner => inner,
        (outer, inner) => Tuple.Create(outer, inner),
        new GenericEqualityComparer<Tuple<string, string>>(
            (u, v) => (u.Item1 == v.Item1 && u.Item2 == v.Item2))
    )
    .Dump("Using Custom Equality Comparer")
    ;
}

public sealed class GenericEqualityComparer<T> : IEqualityComparer<T>
{
    internal Func<T, T, bool> EqualsFunc {get; private set;}
    internal Func<T, int> GetHashCodeFunc {get; private set;}

    public GenericEqualityComparer(
        Func<T, T, bool> equalsFunc,
        Func<T, int> getHashCodeFunc = null)
    {
        if (equalsFunc == null)
            throw new ArgumentNullException("equalsFunc");
        if (getHashCodeFunc == null)
            getHashCodeFunc = (t => 0x1BADF00D);

        EqualsFunc = equalsFunc;
        GetHashCodeFunc = getHashCodeFunc;
    }

    public bool Equals(T x, T y)
    {
        return EqualsFunc(x, y);
    }

    public int GetHashCode(T obj)
    {
        return GetHashCodeFunc(obj);
    }
} 
```

问题是我怎样才能让这个东西使用类型推断？编译器强制要求明确地声明构造函数的类型参数`GenericEqualityComparer<Tuple<string, string>>`，尽管我直觉地认为编译器应该能够弄清楚。如果我省略了显式类型参数，我会得到

```
Using the generic type 'UserQuery.GenericEqualityComparer<T>' requires 1 type arguments 
```

如果没有类型推断，这似乎是一个更广泛的场景，比如使用匿名类型，如下所示，它是无望的：

```
var j3s = outers
.Join(
    inners,
    outer => new {Left = outer.Item1, Right = outer.Item2},
    inner => new {X = inner.Item1, Y = inner.Item2},
    (outer, inner) => Tuple.Create(outer, inner),
    new GenericEqualityComparer<????????????????>(
        (u, v) => (u.Left == v.X && u.Right == v.Y)
    )
)
.Dump("Using type inference?")
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:51:44.710

在非泛型类中创建静态工厂：

```
public static GenericEqualityComparer<T> Create<T>(
    T prototype,
    Func<T, T, bool> equalsFunc,
    Func<T, int> getHashCodeFunc = null) {
       return new GenericEqualityComparer<T>(equalsFunc, getHashCodeFunc);
    } 
```

第一个参数被忽略。这是一种让编译器推断 T 的方法，即使 T 是匿名的。这是一个黑客。

像这样使用它：

```
UserQuery.GenericEqualityComparer.Create(new {X = 0, Y = 0}, (u, v) => ...) 
```

这允许推断 u 和 v。我重复一遍：这是一个 hack。

请注意，只有当两个键选择器返回相同的匿名类型时，才能调用 Join。相等比较器只能比较相同类型的两个项目。

# c++ - 在进程中调度线程

> ID：12045357
> 
> 赞同：4
> 
> 时间：2012-08-20T21:19:42.633
> 
> 标签：c++, linux, pthreads, scheduling

假设我有一个有 4 个线程的进程，我希望它们根据特定的调度算法运行。我搜索并找到了用于选择算法`pthread_setschedparam`和`sched_setschedparam`设置线程优先级的函数，但我看到了一件不清楚的事情 -`pthread_setschedparam`采用线程名称并设置它自己的调度策略。这具体是什么意思，因为我认为一个进程中的所有线程都是根据一个策略调度的，该策略是为整个进程设置的。这是否意味着如果我使用`sched_setschedparam`并设置一个策略（因为它通过它的 PID 引用一个进程），它将确保该进程中的线程根据选定的调度策略运行？

我正在编写的代码是针对 Linux 的，我使用的是 boost，但是这部分不得不求助于 pthreads。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:26:31.337

`pthread_setschedparam`设置单个线程的调度参数。`sched_setscheduler`设置整个进程的调度参数。不同的线程确实可以有不同的调度策略。

# jquery - jQuery动画几个变量的动态值

> ID：12045361
> 
> 赞同：1
> 
> 时间：2012-08-20T21:19:47.503
> 
> 标签：jquery, variables, jquery-animate

我有一个带有 9 个链接的图像精灵。在动态找出值并相应移动之后，我没有指示每个链接的值，而是尝试在 jQuery 中制作动画。

这是**标记**：

```
<div class="compass">
    <a class="north" href="#" alt="North">&nbsp;</a>
    <a class="east" href="#" alt="East">&nbsp;</a>
    <a class="south" href="#" alt="South">&nbsp;</a>
    <a class="west" href="#" alt="West">&nbsp;</a>
    <a class="northeast" href="#" alt="North East">&nbsp;</a>
    <a class="southeast" href="#" alt="South East">&nbsp;</a>
    <a class="southwest" href="#" alt="South West" >&nbsp;</a>
    <a class="northwest" href="#" alt="North West">&nbsp;</a>
</div> 
```

和**jQuery**：

```
var westLeft = +2150;
var westTop = +350;
$(".compass a").click(function(){
    var target = $(this).attr('class');
    var destinationTop = target + 'Top';
    var destinationLeft = target + 'Left';
    $('.map').animate({
        top: destinationTop,
        left: destinationLeft
    }, 1000, 'swing', function(){
        //we're done!
    });
}); 
```

所以当我点击西链接时，我让destinationTop动态显示westTop，但不是westTop的实际值。与destinationLeft 相同。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:36:39.623

你基本上是这样做的：

```
$('.map').animate({
    top: 'eastTop',
    left: 'eastLeft'
}, 1000, 'swing'); 
```

**这些不是远程**有效值。如果要*覆盖*现有值：

```
$('.map').animate({
    top: '2150',
    left: '350'
}, 1000, 'swing'); 
```

如果要*添加*到现有值：

```
$('.map').animate({
    top: '+=2150',
    left: '+=350'
}, 1000, 'swing'); 
```

[http://api.jquery.com/animate/#animation-properties](http://api.jquery.com/animate/#animation-properties)

* * *

> 问题是，我没有这些值，因为它取决于用户点击的 9 个链接中的哪一个，这就是为什么我试图弄清楚如何编写一个变量来获取动画的值取决于链接（或链接的类）。这不仅仅是手动写入值。

好的，所以您想使用 in 的值`target`来识别变量。你*可以*用`eval()` **(don't)**来做到这一点；稍少邪恶的是[**括号符号**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)。假设变量是窗口范围的，而不是本地的：

```
$(".compass a").click(function(){
    var target = $(this).attr('class');
    var destinationTop = window[target + 'Top'];
    var destinationLeft = window[target + 'Left'];
    $('.map').animate({
        top: destinationTop,
        left: destinationLeft
    }, 1000, 'swing', function(){
        //we're done!
    });
}); 
```

但是，最好将值放入字典中，并再次使用括号表示法：

```
var values = {
    westLeft: 2150,
    westTop: 350
};

$(".compass a").click(function(){
    var target = $(this).attr('class');
    var destinationTop = values[target + 'Top'];
    var destinationLeft = values[target + 'Left'];
    $('.map').animate({
        top: destinationTop,
        left: destinationLeft
    }, 1000, 'swing', function(){
        //we're done!
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:03:21.013

您的值变为`eastTop`, `eastLeft`，它们不引用变量的名称，因为它们是字符串，您可以使用`data=*`属性代替，请尝试以下操作：

```
<div class="compass">
    <a data-top="2150" data-left="350" href="#" alt="North">&nbsp;</a>
    <a data-top="2150" data-left="350" href="#" alt="East">&nbsp;</a>
    <a data-top="2150" data-left="350" href="#" alt="South">&nbsp;</a>
    <a data-top="2150" data-left="350" href="#" alt="West">&nbsp;</a>
    <a class="northeast" href="#" alt="North East">&nbsp;</a>
    <a class="southeast" href="#" alt="South East">&nbsp;</a>
    <a class="southwest" href="#" alt="South West" >&nbsp;</a>
    <a class="northwest" href="#" alt="North West">&nbsp;</a>
</div> 
```

```
$(".compass a").click(function(){
    var destinationTop = $(this).data('top');
    var destinationLeft = $(this).data('left');
    $('.map').animate({
        top: destinationTop,
        left: destinationLeft
    }, 1000, 'swing', function(){
        //we're done!
    });
}); 
```

# ruby - 使用 Watchr 自动连接文件

> ID：12045365
> 
> 赞同：1
> 
> 时间：2012-08-20T21:20:08.157
> 
> 标签：ruby, node.js, gem, watchr

我有一堆 JS 文件要拆分，但想自动连接（所以我没有在 HTML 中定义一堆文件）。现在，我从 Twitter Bootstrap 复制了命令。生成文件：

```
scripts:
 cat scripts/*.js > public/scripts/scripts.js

watchScripts: 
  watchr -e "watch('scripts/.*\.js') {system 'make scripts'}" 
```

但是，我发现`watchr`非常不一致（在 Mac OS X 10.8 上）

1.  有时当我保存`js`文件时，它不会运行`make scripts`. 其他时候，确实如此。
2.  有一次，它只是`make scripts`在一次保存后继续运行。
3.  有时，它会在最后一次保存后几秒钟运行命令。

难道我做错了什么？我正在使用`node.js`而不是`Ruby`，所以有任何`node.js`命令行替代方案吗？`make watch`当我在 Bootstrap 中尝试时，同样的问题似乎发生在我身上。

除了问题：我还有另一个监视命令：

```
stylus -w -u nib styles/styles.styl -o public/styles 
```

如何在单个 Makefile 命令中运行两个 watch 命令？IE`make watch`将监视`.styl`要编译的`.js`文件和要连接的文件。现在我正在为每个 watch 命令打开两个终端，但我更喜欢一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:19:31.460

你试过[早午餐](http://brunch.io/)吗？在 node.js 上工作时，这种东西真的很棒。您可以只使用骨架或手动设置它，并在整个目录中使用脚本，随时随地进行合并和编译。

# string - clojure 可以将表示序列的字符串转换回序列吗？

> ID：12045370
> 
> 赞同：5
> 
> 时间：2012-08-20T21:20:23.757
> 
> 标签：string, clojure, escaping, sequence

我可以将字符串转换为序列，然后将该序列转换为表示该序列的字符串。

```
user=> (str (first (list (seq "(xy)z"))))
"(\\( \\x \\y \\) \\z)" 
```

我也可以在上面的表单中插入 apply 来取回原始字符串

```
user=> (apply str (first (list (seq "(xy)z"))))
"(xy)z" 
```

但是有没有办法将表示序列的字符串转换为字符串表示的序列？如：

```
"(\\( \\x \\y \\) \\z)"
user=> (some-fn2 "(\\( \\x \\y \\) \\z)")
(\( \x \y \) \z \)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T21:35:45.227

该`read-string`函数将字符串读入 Clojure 表达式。

```
(read-string "(\\( \\x \\y \\) \\z)")
(\( \x \y \) \z) 
```

读取函数系列是使 Clojure 成为 lisp 和整个“一切都是数据”心态的重要组成部分。您可以使用它们阅读任何表格：

```
(read-string "{:a 1 :b 3 :c (1 2 3)}")
{:a 1, :b 3, :c (1 2 3)} 
```

# php - 使用 PHP 交替代码块

> ID：12045371
> 
> 赞同：0
> 
> 时间：2012-08-20T21:20:27.997
> 
> 标签：php, persistence

我有一个表格，用户可以在其中输入一条信息。一旦他们提交表单，它就会调用我的 php 脚本来执行操作并吐出信息。

php 脚本进行网络调用，我正在尝试对其进行设置，以便代码在一个 url 和另一个 url 之间交替。

我尝试使用 getter 和 setter 来执行此操作，但我认为问题在于没有持久变量，因此始终调用第一个代码块。

有没有办法在 PHP 中存储一个变量，所以如果我可以让代码在不同的会话之间交替？因此，如果一个唯一用户使用该表单，它将调用第一个 url，然后另一个唯一用户或同一用户输入另一条信息，它将改为调用备用 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:30:01.373

有多种方法可以完成此操作，具体取决于所需的确切行为。如果您希望唯一用户始终看到相同的 URL，但不同的用户看到随机选择的 URL，只需将其写入会话即可。

无论您是否想要任何会话亲和力，您都可以随时进行折腾（随机选择）。此外，如果您想要严格交替选择而不是随机均匀分布，您将不得不以某种方式（数据库、文件等）保持状态。

如果您使用的是 APC 或 Memcache，则可以得到与保持状态相同的结果，而不会降低性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:34:44.163

您可以将自己的变量添加到 SESSION 数组中。这将在页面加载之间被“记住”。

```
if(!isset($_SESSION['MyOwnSessionVariable']))
  $_SESSION['MyOwnSessionVariable'] = "New data";

$MySessionData = $_SESSION['MyOwnSessionVariable']; 
```

当您第一次加载页面时`$_SESSION['MyOwnSessionVariable']`将不存在。这样您就可以知道何时进行初始化。

每次页面加载后，`$_SESSION['MyOwnSessionVariable']`将是“新数据”；$_SESSION 变量是每个会话的，因此当您同时有多个用户时这不是问题。

# android - 当另一个活动启动时，Android 正在从历史堆栈中删除我的自定义 PreferenceActivity。我怎样才能阻止这个？

> ID：12045372
> 
> 赞同：-2
> 
> 时间：2012-08-20T21:20:30.683
> 
> 标签：android, preferenceactivity

我有一个 PreferenceActivity，上面有一个 Preference。当首选项使用 startActivity 启动活动时，PreferenceActivity 会被操作系统停止并删除。

我希望用户返回到原来的 PreferenceActivity 而不是让它被操作系统完成和删除。

操作系统正在删除活动，但我不知道为什么。如何知道我的活动在哪里/哪个代码调用完成？

```
@Override
protected void onClick() {
    // TODO Auto-generated method stub
    super.onClick();

    log("click");

    Intent sintent = new Intent(context, MusicPrefActivity.class);
    context.startActivity(sintent);

}

    <activity
        android:name=".ui.prefs.RokuPrefActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>

    <activity
        android:name=".ui.prefs.MusicPrefActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:22:54.427

我对我来说是个白痴-1。我有意设置 NO_HISTORY 标志，我知道这是一个历史问题，我应该发布代码，这很明显。

# jquery - javascript绑定和触发事件以加载元素

> ID：12045373
> 
> 赞同：1
> 
> 时间：2012-08-20T21:20:35.157
> 
> 标签：jquery

我正在加载一个巨大的页面，其中包含大量文本，因此需要一段时间才能全部输入。具体来说，它是一个代表书籍的大型条形图，每个都隐藏在弹出窗口中的数十个摘录。我希望用户能够在栏进入时与栏进行交互，而不是等到页面完全加载。

通常，对于动态创建的元素， .on() 可以解决问题，但它似乎适用于页面加载期间已经加载的元素，而后续则没有。是否有一种有效的方法将事件绑定到当前加载的项目（在整个页面加载之前）以及页面继续加载时的所有匹配元素？

我可以使用 .on() 和 .off() 在加载内容时绑定和取消绑定元素吗？- 我是否能够检测到每本书何时加载，或者必须设置一个触发该功能的定时循环间隔，然后仔细检查下一个元素（书）是否已加载？

如果描述不清楚，我将能够在几天内上传它。
谢谢你的帮助！

大卫

# jquery - 在没有递归 HTML 包装的情况下，在 JQuery UI 自动完成中加粗多个单词

> ID：12045377
> 
> 赞同：1
> 
> 时间：2012-08-20T21:20:54.067
> 
> 标签：jquery, regex, jquery-ui, autocomplete, jquery-autocomplete

我正在使用 JQueryUI 的自动完成填充文本框。此字符串可以包含多个单词，我对其进行搜索并返回搜索结果。我已经完成了关于跨多个术语检索自动完成结果的文章，现在需要帮助在我的结果中加粗单词。

例如，输入“dog i”应该会产生以下结果（忽略 i 的错误间距），其中我的三个关键字是粗体的：

“**那只****狗** 是棕色的。”

 **“那只棕色的 **狗** 是我的**朋友****。** ”

一般的解决方案似乎是使用 String.replace 和一个正则表达式，它为我的结果中的关键字添加了一些额外的 HTML 包装器。但是，问题是，因为我有多个关键字，我可能会遇到包装新添加的 HTML 内容的情况。继续上面的例子，“i”会导致狗的“重量”中的“i”被包裹起来：

```
 "The brown <span style='font-we<span style='font-weight:bold'>i</span>ght:bold'>dog</span>  <span style='font-weight:bold'>i</span>s my fr<span style='font-weight:bold'>i</span>end." 
```

如何防止我的 HTML 被 HTML 重新包装？谢谢。

这是我的代码：

```
 var regex;
    for (var i = 0; i < item.keywords.length; i++) {
        regex = new RegExp(item.keywords[i], "i");
        display = display.replace(regex, "<span style='font-weight:bold'>" +
            item.keywords[i] + "</span>");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:43:13.500

```
var keywords = "dog i";
var text = "The brown dog i s my fr i end.";

var expression = $.map([keywords].concat(keywords.split(" ")), function(el) { 
  return "(?:" + el + ")";
}).join('|');

var regexp = new RegExp('(' + expression + ')', 'ig');
var filteredText = text.replace(regexp, '<span style="font-weight:bold">$1</span>'); 
```

**[演示](http://jsfiddle.net/QPZhE/1/)**。**

# c# - 从 mvc3 下拉列表中渲染和选择数据

> ID：12045381
> 
> 赞同：1
> 
> 时间：2012-08-20T21:21:14.693
> 
> 标签：c#, asp.net-mvc-3

简单的情况

一个对象用户有许多用户组。

我想在 mvc3 表单上实现编辑或创建操作以从下拉列表中选择用户组。

**控制器：**

```
private List<User> GetAllUsers()
{
    List<User> users;
    users = find all users to List...
    return users;
}

public ActionResult Edit(Guid Id)
{
   ViewBag.UserGroups = new SelectList(GetAllUsers(), "UserId", "Name");
   return View();
} 
```

**看法：**

```
<div class="editor-label">
    @Html.LabelFor(model => model.UserGroupId, "UserGroupId")
</div>
<div class="editor-field">
    @Html.DropDownList(WHAT TO PUT HERE ?);
    @Html.ValidationMessageFor(model => model.UserGroupId)
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T21:25:02.217

哦，请使用视图模型，剪掉那个 ViewBag 的废话，每次看到它都让我恶心。

```
public class UserViewModel
{
    public int UserGroupId { get; set; }
    public IEnumerable<SelectListItem> UserGroups { get; set; }
} 
```

进而：

```
public ActionResult Edit(Guid Id)
{
    var model = new UserViewModel
    {
        UserGroups = new SelectList(GetAllUsers(), "UserId", "Name")
    }
    return View(model);
} 
```

在视图中：

```
@model UserViewModel
...
<div class="editor-label">
    @Html.LabelFor(model => model.UserGroupId, "UserGroupId")
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(x => x.UserGroupId, Model.UserGroups);
        @Html.ValidationMessageFor(model => model.UserGroupId)
    </div>
</div> 
```

* * *

但如果你想让我生病并保留 ViewCrap：

```
@Html.DropDownListFor(
    x => x.UserGroupId, 
    (IEnumerable<SelectListItem>)ViewBag.UserGroups
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:33:11.863

在控制器上：

```
ViewBag.UserGroupId = new SelectList(GetAllUsers(), "UserId", "Name"); 
```

在观点上：

```
@Html.DropDownListFor(m => m.UserGroupId, null); 
```

如果你想要类型安全，你可以使用这个辅助方法：

```
void SetSelectList<TModel, TProperty>(
   TModel model, 
   Expression<Func<TModel, TProperty>> propertySelector, 
   IEnumerable<SelectListItem> list) {

   this.ViewData[ExpressionHelper.GetExpressionText(propertySelector)] = list;
} 
```

并像这样使用它：

```
SetSelectList(model, m => m.UserGroupId, new SelectList(GetAllUsers(), "UserId", "Name")); 
```

* * *

额外提示：`ToDictionary`在创建`SelectList`实例时用于额外的类型安全：

```
new SelectList(GetAllUsers().ToDictionary(u => u.UserId, u => u.Name), "Key", "Value") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:35:51.260

如果要为用户选择多个用户组，则需要`ListBoxFor`.

在 ViewModel 中添加一个字符串数组来处理所有组的选定项目和一个集合属性。

```
public class UserViewModel
{
  //Other properties here
  public string[] SelectedGroups { get; set; }  
  public IEnumerable<SelectListItem> UserGroups{ get; set; }
} 
```

在您的`GET`操作方法中，获取用户组列表并分配给`UserGroups`属性 pf UserViewModel ViewModel 对象。

```
public ActionResult CreateUser()
{
    var vm = new UserViewModel();
    //The below code is hardcoded for demo. you mat replace with DB data.
    vm.UserGroups= new[]
    {
      new SelectListItem { Value = "1", Text = "Group 1" },
      new SelectListItem { Value = "2", Text = "Group 2" },
      new SelectListItem { Value = "3", Text = "Group 3" }
    };  
    return View(vm);
} 
```

现在在你的视图中，它是强类型的`UserViewModel`类，

```
@model UserViewModel
<h2>Create User </h2>
@using (Html.BeginForm())
{
  @Html.ListBoxFor(s => s.SelectedGroups, 
                new SelectList(Model.UserGroups, "Value", "Text"))
  <input type="submit" value="Save" />
} 
```

`SelectedGroups`现在，当用户发布此表单时，您将在 ViewModel的属性中获得 Selected Items 值

```
[HttpPost]
public ActionResult CreateUser(UserViewModel model)
{
    if (ModelState.IsValid)
    {
        string[] groups= model.SelectedGroups;
        //check items now
        //do your further things and follow PRG pattern as needed
    }
    //reload the groups again in the ViewModel before returning to the View
    return View(model);
} 
```

# objective-c - 使用 UIWebViewDelegate

> ID：12045382
> 
> 赞同：1
> 
> 时间：2012-08-20T21:21:17.093
> 
> 标签：objective-c, xcode, ios5

我已经看到了许多`UIWebViewDelegates`关于 stackoverflow 的问题，但它们要么与我的问题不同，要么让我无法理解（或两者兼而有之）。

我的`UIWebView`负载很好，但是如果用户在加载后单击 webview 中的链接，我希望能够采取某些操作。在`viewDidLoad`我已经设置`self.webV.delegate = self;`（`webV`是实例化`GHWebView`我的`UIWebView`类的属性）。在视图控制器类中，我添加了以下代码，仅作为我开始使用实际方法之前的测试：

```
-(BOOL) webView:(GHWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
if (navigationType==UIWebViewNavigationTypeLinkClicked)
{
    NSLog(@"Yes!");
}
else
{
    NSLog(@"No.");
}
return YES;
} 
```

我想做的是得到“是的！” 如果用户单击加载的 web 视图中的链接，则记录。但是当 webview 加载并且我点击其中的一个链接时，没有 NSLog。我应该怎么做？

（提前感谢您的帮助以及您对尚不了解代表的人的耐心等待......）

**编辑：**好的，这就是我认为 GHWebView 中的相关代码。 *到目前为止，*在`GHWebView.h`我声明了属性 requ ( `NSURLRequest`)、 conn ( `NSURLConnection`) 和 urlData ( `NSData`) 以及一个方法`-(void)loadWebViewWithbaseURLString:bus withURLString:us`. 然后在`GHWebView.m`我定义方法：

```
-(void)loadWebViewWithbaseURLString:bus withURLString:us
{
self.requ = [NSURLRequest requestWithURL:[NSURL URLWithString:us] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval: 20];
self.conn=[[NSURLConnection alloc] initWithRequest:self.requ delegate:nil];
NSError *error=nil;
NSURLResponse *resp=nil;
if (self.conn)
{
    self.urlData = [NSURLConnection sendSynchronousRequest: self.requ returningResponse:&resp error:&error];
    NSString *htmlString = [[NSString alloc] initWithData:self.urlData encoding:NSUTF8StringEncoding];
    [self loadHTMLString:htmlString baseURL:[NSURL URLWithString:bus]];
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] init];
    alert.title = @"Unfortunately, I seem to be having a hard time connecting to the Internet.  Would you mind trying again later?  I'll make it worth your while, I promise.";
    [alert show];
}
} 
```

我知道我必须声明一个委托并在我的头文件中添加一个协议——我认为这将涉及添加类似的代码

```
@property (nonatomic, assign) id<UIWebViewDelegate> delegate;

@protocol GHWebViewDelegate <UIWebView>
-(void)loadWebViewWithbaseURLString:bus withURLString:us;
@end 
```

但是当我回到实现文件并尝试将方法中的`self`s 替换为 s 时，我得到了错误。我该怎么办？`self.delegate``-(void)loadWebViewWithbaseURLString:bus withURLString:us``property not found on object of type`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:37:06.430

您提到您正在将委托设置为负责实例化`GHWebView`类的 ViewController。虽然这很好，但我的问题是你的`GHWebView`类中是否有一个部分，你将这个对象分配为的委托，`UIWebView`以便它可以响应`-(BOOL)webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType`方法然后调用，`webView:(GHWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType`以便当这个协议方法被调用时你的委托（在你的情况下你的 ViewController) 可以参加电话会议吗？

# google-apps-script - 我可以使用 Logger.log(Object format, Object...values):Logger 代替 Logger.log(message) 吗？

> ID：12045383
> 
> 赞同：0
> 
> 时间：2012-08-20T21:21:19.560
> 
> 标签：google-apps-script

在调试 Google Apps 脚本时，我大量使用了 Logger.log(message)，尤其是在从库中调用函数时（尚不）支持使用调试器。

我注意到最近几天出现了一个新选项：Logger.log(Object format, Object...values):Logger

我一开始就忽略了它，但在过去的几个小时内，当您键入脚本时，Logger.log(message) 已经从选项中消失了，所以现在我被卡住了。

目前还没有关于 Logger.log(Object format, Object...values):Logger 的文档。可以代替 Logger.log(message) 使用吗？

[我已在Issue 1681](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1681&q=Logger&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)中添加了对此的评论，因为它似乎相关。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T04:25:33.880

您可以继续使用 Logger.log(message)，因为他们保留了它以实现向后兼容性。并继续观看发行说明以了解有关新选项的更多信息。

# python - Python中的脚本标准输出比较

> ID：12045386
> 
> 赞同：1
> 
> 时间：2012-08-20T21:21:38.657
> 
> 标签：python

我有一个程序试图使用另一个脚本的输出来决定要做什么。

我`stdout`从 SSH 会话中获取 Python 进程的 ，其输出是`"Verified"`或`"Unverified"`，当我将其打印为 时，它会出现在命令行上`['Verified\n']`。

我的代码如下。首先我读入输出，然后打印它，然后尝试比较它。然而，它总是作为第二种选择出现，即 a 不等于已验证 - 即使它应该。也许我缺少一些东西`stdout`，但我已经尝试了许多不同的`(if a == )`条件，包括我上面列出的括号。我不确定为什么它根本不起作用。

```
stdin, stdout, stderr = ssh.exec_command("python verify.py")

a = stdout.readlines()
print a

if (a == "Verified"):
    print ("a does equal verified")
else:
    print ("a does not equal verified") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:28:25.320

`readlines()`返回一个列表，正如您所指出的，它与`\n`

你试过这个吗？：

```
if(len(a) and a[0] == "Verified\n"):
  # verfiied, do your stuff here 
```

# python - Paypal-Django 问题

> ID：12045389
> 
> 赞同：1
> 
> 时间：2012-08-20T21:21:43.373
> 
> 标签：python, django, paypal

我在`paypal-django`同步时遇到了一些问题。一切都在沙盒环境中的开发服务器上完美运行，但是当我将它放在生产服务器上时，模板似乎呈现的版本与我自定义的版本和开发服务器上显示的版本不同。这个版本没有 HTML/CSS，只有一个空白的付款表格。

在生产环境中，我仅通过扩展 my 来自定义`PayPalPro`呈现的功能，但是该格式没有显示出来，并且付款本身似乎不再起作用。抱歉，如果这篇文章看起来令人困惑，我对此有点迷茫。谢谢。`pro/payment.html``base.html`

```
#template 

{% extends "base.html" %}

{% block content %}
<div class="container">
<form action="" method="post">{% csrf_token %}
    <table>
        <tbody>
            {% if errors %}<tr><td colspan="2" align="center">{{ errors }}</td></tr>{% endif %}
            </tr>
            {{ form.as_table }}
            <tr><td colspan="2" align="right"><input type="submit" /></td></tr>
        </tbody>
    </table>
</form>
</div>

{% endblock %}

#views

    def express_payment(request):
        user = request.user
        cart_subtotal = cart.cart_subtotal(request)

        if request.method == "POST":
            form = PaymentForm(request.POST)
            if form.is_valid():
                order = form.save(commit=False)
                order.buyer = request.user
                order.transaction_id = order
                order.save()
                if order.pk:
                    cart_items = cart.get_cart_items(request)
                    for item in cart_items:
                        order_item = OrderItem(item=item.item_id, quantity=item.quantity, price=item.item_id.price, order=order)
                        order_item.save()
        item = {
        "amt": cart_subtotal, # amount to charge for item
        "custom": '555', # custom tracking variable for you
        "cancelurl": settings.URL + "error", # error page
        "returnurl": settings.URL + "success"} # success page

        kw = {"item": item, # what you're selling
        "success_url": "/success/"} # redirect location after success, I am not sure but it shouldn't work
        ppp = PayPalPro(**kw)
        return ppp(request) 
```

# python - 如何在 Matplotlib 中的 x 轴上分配相等的缩放比例？

> ID：12045392
> 
> 赞同：6
> 
> 时间：2012-08-20T21:21:51.400
> 
> 标签：python, matplotlib

我目前拥有的是这样的：

```
x = [3.0, 4.0, 5.0, 5.0, 6.0, 7.0, 9.0, 9.0, 9.0, 11.0]
y = [6.0, 5.0, 4.0, 2.5, 3.0, 2.0, 1.0, 2.0, 2.5, 2.5] 
```

这会产生以下图表：

![在此处输入图像描述](../Images/bedddc2d0b83b59294ba3145aa9bcb72.png)

我想要的是在我的轴上具有相等的缩放比例。因此，与其在 7 和 9 之间以及 9 和 11 之间有如此大的差距，不如说它是一个和所有其他空间一样的空间。它看起来像这样：

![在此处输入图像描述](../Images/9cf4db2dc2d9646024fdf8274e251922.png)

为了消除图表中的 8 和 10，我使用了刻度。以下是相关代码：

```
ax=fig.add_subplot(111, ylabel="speed")
ax.plot(x, y, 'bo')
ax.set_xticks(x) 
```

[matplotlib 页面](http://matplotlib.sourceforge.net/gallery.html)上的所有示例都没有我想要的任何东西。我一直在查看文档，但是与“缩放”相关的所有内容都没有达到我想要的效果。

这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:21:09.307

除了我对 OP 的评论之外，您还可以根据自然数 1 到 n 进行绘图，其中 n 是数据集中唯一横坐标值的数量。然后您可以将 x 刻度标签设置为这些唯一值。我在实现这一点时遇到的唯一麻烦是处理重复的横坐标值。为了保持这个一般性，我想出了以下内容

```
from collections import Counter # Requires Python > 2.7

# Test abscissa values
x = [3.0, 4.0, 5.0, 5.0, 6.0, 7.0, 9.0, 9.0, 9.0, 11.0]

# Count of the number of occurances of each unique `x` value
xcount = Counter(x)

# Generate a list of unique x values in the range [0..len(set(x))]

nonRepetitive_x = list(set(x)) #making a set eliminates duplicates
nonRepetitive_x.sort()         #sets aren't ordered, so a sort must be made
x_normalised = [_ for i, xx in enumerate(set(nonRepetitive_x)) for _ in xcount[xx]*[i]] 
```

在这一点上，我们`print x_normalised`有

```
[0, 1, 2, 2, 3, 4, 5, 5, 5, 6] 
```

所以密谋`y`反对`x_normalised`

```
from matplotlib.figure import Figure
fig=Figure()
ax=fig.add_subplot(111)

y = [6.0, 5.0, 4.0, 2.5, 3.0, 2.0, 1.0, 2.0, 2.5, 2.5]

ax.plot(x_normalised, y, 'bo') 
```

给

![使用 matplotlib 绘制的解决方案结果](../Images/2bb6ed3f45fe995aad5333083fb7b1a9.png)

[`set_xticklabels`](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_xticklabels)最后，我们可以使用using更改 x 轴刻度标签以反映原始 x 数据的实际值

```
ax.set_xticklabels(nonRepetitive_x) 
```

**编辑**要使最终图看起来像 OP 中所需的输出，可以使用

```
x1,x2,y1,y2 = ax.axis()
x1 = min(x_normalised) - 1 
x2 = max(x_normalised) + 1
ax.axis((x1,x2,(y1-1),(y2+1))) 

#If the above is done, then before set_xticklabels, 
#one has to add a first and last value. eg:

nonRepetitive_x.insert(0,x[0]-1) #for the first tick on the left of the graph
nonRepetitive_x.append(x[-1]+1) #for the last tick on the right of the graph 
```

# dynamic - 缩放时 Highcharts 动态属性更新

> ID：12045398
> 
> 赞同：1
> 
> 时间：2012-08-20T21:22:25.277
> 
> 标签：dynamic, zooming, highcharts

当图表缩放到某个级别时，是否可以更改轴标签大小（字体或大小）？显然，在某些情况下，当您看到整个图表时，您无法放置*字体 24*，而是希望在缩放时使字体更大。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:40:39.927

你可以像下面的代码那样做：

```
chart : {
    renderTo : 'container',
    zoomType: 'x',
    events: {
        selection: function() {
            this.yAxis[0].options.labels.style.fontSize = "20px";
        }
    }
} 
```

[**演示**](http://jsfiddle.net/ricardolohmann/qpEQZ/)

如果您查看[**参考资料**](http://api.highcharts.com/highstock#xAxis.labels.style)，您会发现您可以更改其他属性。

# sql-server - 链接服务器和实体框架代码优先的日期时间参数问题

> ID：12045403
> 
> 赞同：5
> 
> 时间：2012-08-20T21:22:53.810
> 
> 标签：sql-server, entity-framework

我在两台服务器上有两个数据库。我的应用程序主要在 server1 上使用 db1。但是，我只会在 server2 上的 db2 中读取一张表。

我们没有为 db2 创建一个新的 DbContext，而是创建了一个链接服务器并在 db1 中为该表设置了一个同义词。我在我的 db1 Code First 上下文中为此设置了映射。这似乎有效，我可以检索数据。

但是，如果我在谓词中使用任何日期，则会收到以下错误：

`A failure occurred while giving parameter information to OLE DB provider "SQLNCLI10" for linked server "server2".`

我的映射如下所示：

```
ToTable("synonym");

Property(t => t.Id).HasColumnName("ID");
Property(t => t.Company).HasColumnName("Company");
Property(t => t.StartDate).HasColumnName("StartDate");
Property(t => t.EndDate).HasColumnName("EndDate");
Property(t => t.LastUpdatedDate).HasColumnName("LastUpdatedDate");
Property(t => t.LastUpdatedBy).HasColumnName("LastUpdatedBy"); 
```

我正在尝试运行以下查询：

```
_context.Set<Synonym>()
    .Any(s => s.Company == company
            && s.StartDate <= date
            && (s.EndDate >= date || s.EndDate == null)); 
```

如果我删除日期，查询运行良好。

server1 是 SQL 2008
server2 是 SQL 2005

我发现[这个线程](http://www.sqlservercentral.com/Forums/Topic843582-391-1.aspx)表明日期存在某种问题，但我不知道如何将其应用于实体框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-08T13:32:51.693

我们使用具有以下星座的*Entity Framework 6*遇到了同样的问题：

*   Server1 (="ours"): MS SQL Server 2008 R2

*   链接 Server2 (="theirs"): MS SQL Server (未知版本大概是 2005)

我们对“我们的”服务器有一个视图，看起来像这样：

```
CREATE VIEW [ourSchema].[SomeEntity]
AS
SELECT 
    [Id]
    ,...
    ,[StartTime]
    ,[EndTime]
FROM [SERVER2].[someDb].[theirSchema].[someTable] 
```

链接服务器上的表如下所示：

```
CREATE TABLE [schema2].[table]
(
    [Id] [int] NOT NULL,
    ,...
    [StartTime] [datetime] NOT NULL,
    [EndTime] [datetime] NULL
) ON PRIMARY 
```

通过反向 POCO 创建创建的模型和配置：

```
public partial class SomeEntity
{
    public int Id { get; set; }
    public ...
    public DateTime StartTime { get; set; }
    public DateTime? EndTime { get; set; }
}
public partial class SomeEntityConfiguration : EntityTypeConfiguration<TestBedData>
{
    public SomeEntityConfiguration(string schema = "ourSchema")`
    {
        ToTable(schema + ".SomeEntity");
        HasKey(someLambdaExpression);
        Property(x => x.Id).HasColumnName("Id").IsRequired();
        Property(x => ...);
        Property(x => x.StartTime).HasColumnName("StartTime").IsRequired();
        Property(x => x.EndTime).HasColumnName("EndTime").IsOptional();
        InitializePartial();
    }
    partial void InitializePartial();
} 
```

任何涉及*StartTime*或*EndTime*属性的查询都会导致初始帖子中描述的异常：

> 向链接服务器“Server2”的 OLE DB 提供程序“SQLNCLI10”提供参数信息时出错。

在花了几个小时了解潜在问题后，我偶然发现了以下问题：

> .NET 中的 DateTime 类型与 SQL Server 中的 datetime2 具有相同的范围和精度。当 EF 在 SQL Server 中插入或更新 datetime 或 datetime2 列时，它会将模型属性转换为可以在 .NET 中保存整个 DateTime 范围的类型，即 datetime2。[关联](https://stackoverflow.com/questions/14246426/why-does-ef5-code-first-use-datetime2-when-inserting-a-nullable-datetime-into-th)

对比MS SQL Server [2008 R2](http://msdn.microsoft.com/en-us/library/ms187752(v=sql.105).aspx)和[2005](http://msdn.microsoft.com/en-us/library/ms187752(v=sql.90).aspx)不同版本支持的数据类型最终发现问题：

*C# 中的 DateTime* -> 通过 EF 转换 -> SQL 中的*DateTime2，*因为我们正在与 SQL Server 2008 R2 上的“我们的”视图进行通信。但是查询被转发到不支持*DateTime2*数据类型的“他们的”链接服务器。

```
CREATE VIEW [ourSchema].[SomeEntity]
AS
SELECT 
    [Id]
    ,...
    ,CAST([StartTime] AS datetime2)
    ,CAST([EndTime] AS datetime2)
FROM [SERVER2].[someDb].[theirSchema].[someTable] 
```

成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:35:44.527

我有同样的问题，我最终使用了[ExecuteStoreQuery](http://msdn.microsoft.com/en-us/library/ee835300%28v=vs.100%29)方法。

```
string formatter = "{0:yyyy/MM/dd}";

string start = String.Format(formatter, startDate);
string end = String.Format(formatter, endDate);

string sampleStatement = "SELECT * FROM Synonym WHERE StartDate >= '" + start + "' and EndDate <='" + end + "'";

var result = _context.ExecuteStoreQuery<Synonym>(sampleStatement, null).ToList(); 
```

我希望这种方法有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-09T19:34:17.880

PI OLEDB Enterprise Linked Server View 和 SQL Stored Proc 参数均设置为 DateTime。我们将存储的过程切换到 DateTime2 并修复了错误。

# c# - 模板方法设计模式是一个不错的选择吗？

> ID：12045404
> 
> 赞同：4
> 
> 时间：2012-08-20T21:22:59.590
> 
> 标签：c#, design-patterns

目前我有一些这样的代码：

```
 OntologyGenerator generator = new OntologyGenerator();
    generator.AddOntologyHeader("Testing");
    generator.AddClassDeclaration(owlBuilder);
    generator.AddSubClass(owlBuilder);
    generator.AddAnnotationAssertions(owlBuilder); 
```

您看到传递的 OwlBuilder 参数具有如下对象的集合：

```
public class OwlLBuilder: IOwlLBuilder
{
       private ICollection<IOwlClass> owlClasses = new Collection<IOwlClass>();
       private ICollection<IOwlRelation>  owlRelations = new Collection<IOwlRelation> ();
} 
```

例如，当我说**generator.AddClassDeclaration(owlBuilder);** 它将循环遍历该 owlBuilder 参数的 owlClasses 集合并对其执行一些操作...

我觉得这是一个丑陋的设计。您认为我可以利用修改现有代码以使用模板方法设计模式或您拥有的任何其他更好的设计建议来受益吗？加上一些代码示例，这样我就可以在脑海中大致了解我应该做什么！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T22:43:27.343

我真的在这里看不到*[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)*。我看到*了[访客模式](http://en.wikipedia.org/wiki/Visitor_pattern)*。

这是一个例子。

想象一下，你有一堆房子，你需要把它们都漆成黄色。现在你可以：

```
var houses = ... a list of houses ...

foreach (var house in houses)
{
    house.Color = Color.Yellow;
} 
```

但是，您可能希望将动作（在本例中为绘画）抽象为其他东西，而不是总是将房屋涂成黄色。一种解决方案是编写一个负责将房子涂成黄色的类。该课程稍后可以替换为另一个课程，该课程以不同的颜色粉刷房屋，或者对您的房屋做一些完全不同的事情，例如添加另一层！

输入访客模式。

我将展示一些我一直在使用的通用帮助类和接口。我喜欢泛型。如果你不这样做，请随意滚动你自己的。语义是：“访问者访问可访问者”和“可访问者接受访问者”。

```
public interface IVisitor<in T> where T : IVisitable<T>
{
    void Visit(T visitable);
}

public interface IVisitable<out T> where T : IVisitable<T>
{
    void Accept(IVisitor<T> visitor);
}

public abstract class Visitable<T> : IVisitable<T> where T : Visitable<T>
{
    public void Accept(IVisitor<T> visitor)
    {
        visitor.Visit((T)this);
    }
}

public abstract class VisitableList<T> : List<T>, IVisitable<T> where T : Visitable<T>
{
    public void Accept(IVisitor<T> visitor)
    {
        foreach (var item in this)
        {
            item.Accept(visitor);
        }
    }
} 
```

现在我们可以像这样设置我们的房子和我们的房子列表：

```
public class House : Visitable<House>
{
    public Color Color { get; set; }
}

public class Houses : VisitableList<House> {} 
```

现在，访客——我们的画家——可以参观我们可参观的房子：

```
public class YellowPainter : IVisitor<House>
{
    public void Visit(House visitable)
    {
        visitable.Color = Color.Yellow;
    }
} 
```

简单，优雅和[单一的责任（！）](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

让我们设置房屋：

```
var houses = new Houses();
houses.Add(new House() { Color = Color.Green });
houses.Add(new House() { Color = Color.Blue });
houses.Add(new House() { Color = Color.White }); 
```

现在我们已经准备好粉刷我们所有的房子了。它只需要一个电话：

```
houses.Accept(new YellowPainter()); 
```

...我们所有的房子现在都是黄色的。好的！

我们可以很容易地做到这一点：

```
houses.Accept(new AdditionalFloorsBuilder(floors: 2)); 
```

或这个：

```
owlClasses.Accept(new OwlClassVisitor(owlBuilder, ...)); 
```

通过这样做，我们将 中每个元素的实际“访问”`owlClasses`与集合本身的迭代隔离开来。访问不需要修改可访问。它可以用来只检查可访问的并使用信息来修改完全不同的东西，例如。您可以使用这些信息来满足您的`owlBuilder`.

# r - 当 reshape 无法猜测时变变量的名称时， reshape r 中的数据

> ID：12045405
> 
> 赞同：8
> 
> 时间：2012-08-20T21:23:02.197
> 
> 标签：r, reshape

我有一个包含 1500 多列的宽格式数据集。由于许多变量是重复的，我想重新塑造成长形式。但是， r 抛出一个错误：

```
Error in guess(varying) : 
  Failed to guess time-varying variables from their names 
```

试图通过一个玩具示例来理解这一点，我发现

```
u<-data.frame(id=1:100,f.1=rnorm(100),u.1=rnorm(100),i.1=rnorm(100),f.2=rnorm(100),u.2=rnorm(100),i.2=rnorm(100),
                  f.3=rnorm(100),u.3=rnorm(100),i.3=rnorm(100))

reshape(u,varying=2:10,direction="long") 
```

工作正常。但是，我的数据看起来更像：

```
u<-data.frame(id=1:100,f1=rnorm(100),u1=rnorm(100),i1=rnorm(100),f2=rnorm(100),u2=rnorm(100),i2=rnorm(100),
              f3=rnorm(100),u3=rnorm(100),i3=rnorm(100))

reshape(u,varying=2:10,direction="long") 
```

这就是我迷路的地方。任何聪明的想法，除了改变变量名（这很累），我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T21:31:09.543

添加`v.names`参数：

```
reshape(u,varying=2:10,direction="long", v.names=c("f", "u", "i"))
    id time          f          u             i
1.1  1    1  1.7821678  0.5144692  0.0006889928
2.1  2    1 -0.5036801  1.8242030  0.9695553817
3.1  3    1  1.1857706  0.6469423  0.6775602175
4.1  4    1 -0.5759202 -1.0349980  0.7183451146
5.1  5    1 -2.3559773  0.8598020  0.5506339475
6.1  6    1 -0.8047651 -1.4768172 -0.3667918383
... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T21:57:23.750

我看到了 Andrie 的解决方案，但也许我在理解`rehape`语法方面的努力也很有用。'varying' 参数应该是一个命名向量（或列表），其列索引按名称分组：

```
reshape(u, varying=c( f=c(2,5,8), u=c(3,6,9), i=c(4,7,10) ), direction="long") 
```

这也将起作用（因为名称暗示分组）：

```
 reshape(u,varying=names(u)[2:10], direction="long") 
```

我回去尝试了您的代码，发现它也有效，所以我想知道您是否想要我们猜测的不同的东西？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-19T15:21:04.673

只需添加选项`sep = ""`即可让`reshape`您知道您的列名不是由`.`.

# delphi - 带有自绘项的 TopenDialog/TSaveDialog

> ID：12045411
> 
> 赞同：1
> 
> 时间：2012-08-20T21:23:51.540
> 
> 标签：delphi, delphi-2006, ownerdrawn, topendialog, tsavedialog

我想实现传统的打开和保存对话框（以及正在处理的底层项目是文件），但我想控制显示的内容来代替文件名，并包含一些图形 - 即我需要一个“ownerdraw”对话风格。除了这方面，我希望对话框的外观和感觉尽可能像传统的打开/保存对话框。

我想我自己也面临着实现这个，我只是想知道最好的起点是哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:32:29.280

AFAIK 标准窗口对话框不提供您需要的自定义级别，但您可以尝试作为`TShellListView`ShellCtrls 单元一部分的 (TCustomShellListView) 组件（默认情况下，此包未安装在 Delphi IDE 中），从这里您可以获取代码以使用文件夹内容填充您自己的 TListview 并根据需要绘制项目，还可以查看[`Shell Interfaces`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774328%28v=vs.85%29.aspx)与 shell 的元素交互的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:44:52.650

对于用作列表视图的所有者绘制控件，我会推荐 Roy Klever 的 rkSmartView。

[http://rmklever.com/?page_id=299](http://rmklever.com/?page_id=299)

Roy 在上面的博客上发布的演示应用程序包含一个相当不错的图形缩略图浏览器示例，它可以变成您正在做的事情的核心。他添加了评级“星级”和其他各种业主绘制的装饰。

[http://rmklever.com/?p=318](http://rmklever.com/?p=318)

所有者使用像 TListView 这样的标准通用控件充满了限制。如果您想拥有控件的全部或部分内容，那么 100% 内部绘制并提供 100% 源代码的完全虚拟控件是确保您不会碰壁或最终得到 98% 解决方案的唯一方法你不能一路带回家。

我最近通过修改上述组件做了类似的事情，结果很好。

# .net - 在 vb.net 中打开连接到 USB 的打印机的现金抽屉

> ID：12045413
> 
> 赞同：1
> 
> 时间：2012-08-20T21:23:55.213
> 
> 标签：.net, vb.net

我正在设计一个简单的 pos 应用程序，但我遇到了一个问题。我有一个现金抽屉连接到热敏打印机（来自star micronics 的tsp100），然后用USB 连接到我的电脑。谁能帮我从 vb.net 打开钱箱（不打印任何东西）。?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T02:56:54.153

LPT端口过去很简单，不到5行。对于 USB 收据打印机，我在其他地方找到了这个 VB 解决方案，它对我来说很好用。

要打开钱箱，只需执行 OpenCashdrawer

```
Imports System.Runtime.InteropServices

Module mdlprint
   Public Class RawPrinter
      ' ----- Define the data type that supplies basic print job information to the spooler.
      <StructLayout(LayoutKind.Sequential, CharSet:=CharSet.Unicode)> _
      Public Structure DOCINFO
         <MarshalAs(UnmanagedType.LPWStr)> _
         Public pDocName As String
         <MarshalAs(UnmanagedType.LPWStr)> _
         Public pOutputFile As String
         <MarshalAs(UnmanagedType.LPWStr)> _
         Public pDataType As String
      End Structure

      ' ----- Define interfaces to the functions supplied in the DLL.
      <DllImport("winspool.drv", EntryPoint:="OpenPrinterW", SetLastError:=True, CharSet:=CharSet.Unicode, ExactSpelling:=True, CallingConvention:=CallingConvention.StdCall)> _
      Public Shared Function OpenPrinter(ByVal printerName As String, ByRef hPrinter As IntPtr, ByVal printerDefaults As Integer) As Boolean
      End Function

      <DllImport("winspool.drv", EntryPoint:="ClosePrinter", SetLastError:=True, CharSet:=CharSet.Unicode, ExactSpelling:=True, CallingConvention:=CallingConvention.StdCall)> _
      Public Shared Function ClosePrinter(ByVal hPrinter As IntPtr) As Boolean
      End Function

      <DllImport("winspool.drv", EntryPoint:="StartDocPrinterW", SetLastError:=True, CharSet:=CharSet.Unicode, ExactSpelling:=True, CallingConvention:=CallingConvention.StdCall)> _
      Public Shared Function StartDocPrinter(ByVal hPrinter As IntPtr, ByVal level As Integer, ByRef documentInfo As DOCINFO) As Boolean
      End Function

      <DllImport("winspool.drv", EntryPoint:="EndDocPrinter", SetLastError:=True, CharSet:=CharSet.Unicode, ExactSpelling:=True, CallingConvention:=CallingConvention.StdCall)> _
      Public Shared Function EndDocPrinter(ByVal hPrinter As IntPtr) As Boolean
      End Function

      <DllImport("winspool.drv", EntryPoint:="StartPagePrinter", SetLastError:=True, CharSet:=CharSet.Unicode, ExactSpelling:=True, CallingConvention:=CallingConvention.StdCall)> _
      Public Shared Function StartPagePrinter(ByVal hPrinter As IntPtr) As Boolean
      End Function

      <DllImport("winspool.drv", EntryPoint:="EndPagePrinter", SetLastError:=True, CharSet:=CharSet.Unicode, ExactSpelling:=True, CallingConvention:=CallingConvention.StdCall)> _
      Public Shared Function EndPagePrinter(ByVal hPrinter As IntPtr) As Boolean
      End Function

      <DllImport("winspool.drv", EntryPoint:="WritePrinter", SetLastError:=True, CharSet:=CharSet.Unicode, ExactSpelling:=True, CallingConvention:=CallingConvention.StdCall)> _
      Public Shared Function WritePrinter(ByVal hPrinter As IntPtr, ByVal buffer As IntPtr, ByVal bufferLength As Integer, ByRef bytesWritten As Integer) As Boolean
      End Function

      Public Shared Function PrintRaw(ByVal printerName As String, ByVal origString As String) As Boolean
         ' ----- Send a string of  raw data to  the printer.
         Dim hPrinter As IntPtr
         Dim spoolData As New DOCINFO
         Dim dataToSend As IntPtr
         Dim dataSize As Integer
         Dim bytesWritten As Integer

         ' ----- The internal format of a .NET String is just
         '       different enough from what the printer expects
         '       that there will be a problem if we send it
         '       directly. Convert it to ANSI format before
         '       sending.
         dataSize = origString.Length()
         dataToSend = Marshal.StringToCoTaskMemAnsi(origString)

         ' ----- Prepare information for the spooler.
         spoolData.pDocName = "OpenDrawer" ' class='highlight'
         spoolData.pDataType = "RAW"

         Try
            ' ----- Open a channel to  the printer or spooler.
            Call OpenPrinter(printerName, hPrinter, 0)

            ' ----- Start a new document and Section 1.1.
            Call StartDocPrinter(hPrinter, 1, spoolData)
            Call StartPagePrinter(hPrinter)

            ' ----- Send the data to the printer.
            Call WritePrinter(hPrinter, dataToSend, _
               dataSize, bytesWritten)

            ' ----- Close everything that we opened.
            EndPagePrinter(hPrinter)
            EndDocPrinter(hPrinter)
            ClosePrinter(hPrinter)
            PrintRaw = True
         Catch ex As Exception
            MsgBox("Error occurred: " & ex.ToString)
            PrintRaw = False
         Finally
            ' ----- Get rid of the special ANSI version.
            Marshal.FreeCoTaskMem(dataToSend)
         End Try
      End Function
   End Class
End Module

Public Class Main
   Public Sub OpenCashdrawer()
      'Modify DrawerCode to your receipt printer open drawer code
      Dim DrawerCode As String = Chr(27) & Chr(112) & Chr(48) & Chr(64) & Chr(64)
      'Modify PrinterName to your receipt printer name
      Dim PrinterName As String = "Your receipt printer name"

      RawPrinter.PrintRaw(PrinterName, DrawerCode)
   End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:34:15.387

只需按照文档发送打开抽屉所需的代码序列即可。如果您没有打印机的文档，您可以[在此处](http://keyhut.com/popopen.htm)查找序列。我相信在您的打印机上，只需发送一个 ASCII 响铃字符（十进制 7）即可打开抽屉。

# iphone - iPad从底部弹出视图幻灯片

> ID：12045414
> 
> 赞同：-1
> 
> 时间：2012-08-20T21:23:56.533
> 
> 标签：iphone, objective-c, ios, ipad, uiviewcontroller

我正在尝试为我的应用程序设置构建一个视图，这与大多数 iPad 应用程序非常相似——一个小窗口从底部向上滑动，并在 uitableview 上向您显示设置。一旦此页面进入主窗口，背景就会变暗。

我怎样才能实现这样的目标？使用哪个类？这是一个普通的uiviewcontroller吗？

任何指导，包括示例应用程序都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:29:32.277

听起来您想要一个以模态方式呈现的 UIViewController。搜索`presentViewController:animated:completion:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:30:19.977

您希望以模态方式呈现视图控制器。您可以[在此处](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)阅读所有相关信息。

# php - 检查用户登录的ajax页面是否改变

> ID：12045416
> 
> 赞同：3
> 
> 时间：2012-08-20T21:24:04.130
> 
> 标签：php, ajax, session, pushstate, popstate

作为我正在构建的 web 应用程序的一部分，我需要在用户更改页面时检查用户是否已登录。在普通的非 ajax 站点上，这很容易，因为我可以将 PHP 会话条件语句放在标头中，并且在每次页面更改时调用的标头将确定是否显示登录页面，但将其视为头文件仅在初始加载的 ajax 应用程序中设置一次，我如何检查用户何时发出 ajax 页面请求会话是否仍然有效？由于我使用的是 pushState 和 popState 我知道我可以将条件设​​置为在 URL 更改时运行，但我不知道如何编写代码以在发生这种情况时运行检查。

任何和所有的帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:50:07.117

您应该返回 false 以便您可以做一些智能的事情，例如将用户重定向到登录页面，或者更改您在问题中提到的标题，而不是使用终止脚本`die('false')`

IE

```
if(!isset($_SESSION['valid_user'])) { 

    return false;
} 
```

或者更好的是，将 json 对象返回到您的脚本并使用 jquery/javascript 更改标题。

```
$response = array();

if(!isset($_SESSION['valid_user'])) { 

    $response['logged_in'] = false;

} else {

    $response['logged_in'] = true;

}

// return to jquery for handling
return json_encode($response); 
```

无论哪种方式，您都说您正在构建一个 Web 应用程序，因此您可能想尝试处理事件而不是终止程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:32:44.080

创建一个检查会话并返回 true 或 false 的 php 页面。

因此，如果用户未登录，每当您执行 ajax 请求并且会话没有用户信息时，只会返回字符串 false，您可以使用该字符串检查 ajax 回调以显示正确的信息

例如

```
if(!isset($_SESSION['user'])) die('false'); 
```

然后在你的ajax回调中，你可以检查响应是否为假，或者以另一种方式处理数据EG

```
$.ajax({"url" : url, "success" : function(response){
    if(response == 'false')
    {
        // display a login screen or redirect the user to a login page
        // E.G showLogin() or document.location = '/login.php';
    } else {
        // to something else with the response if the user is logged in
    }
}); 
```

# cucumber - 如何验证元素是否存在于未命名的表中

> ID：12045419
> 
> 赞同：1
> 
> 时间：2012-08-20T21:24:19.097
> 
> 标签：cucumber, watir

我希望验证当我在某个页面上时是否存在某个类。该类包含在名为凭证的表中。问题是此页面上有许多带有名称凭证的表格。:-(

通常要查找元素，我会执行以下操作：

`assert @browser.image(:class, "class1").exists?`

但由于这包含在凭证表的 1 中，这意味着它无法找到该元素。我需要一种方法来识别元素所在的表。

考虑到有多个同名的表，我该怎么做？

（顺便说一句 - 我打算在不同的表上获得唯一的名称，但我需要先解决这个问题！）

# objective-c - 是否可以直接为 NSMutableString 设置字符串值？

> ID：12045422
> 
> 赞同：1
> 
> 时间：2012-08-20T21:24:28.730
> 
> 标签：objective-c, cocoa, nsmutablestring

我可以轻松地创建一个常规`NSString`：

```
NSString *string = @"string value";    // Case 1 
```

有可能做这样的事情吗？

```
NSMutableString *mutableString = @"mutableString value";    // Case 2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T21:29:10.153

您可以按照其他一些答案中提到的那样初始化字符串，但是对于这样的常量字符串，我更喜欢发送`-mutableCopy`消息：

```
NSString* string = @"string value";
NSMutableString* mutableString = [@"mutableString value" mutableCopy]; 
```

我觉得它很容易阅读，但这是风格偏好的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T21:25:45.177

有点：

```
NSMutableString *mutableString = [NSMutableString stringWithString:@"mutableString value"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:26:52.183

案例 2 有效，但不创建可变字符串；它只是把`NSString`一个`NSMutableString`指针。该对象仍然是一个常量文字字符串，发送类似`appendString:`的内容会导致运行时错误。

您需要分配一个新的`NSMutableString`via`stringWithString:`或`alloc`后跟`initWithString:`. 如果您愿意，也可以创建一个空字符串，然后使用`setString:`。

# c# - 从 excel VBA 初始化 C# 类

> ID：12045425
> 
> 赞同：0
> 
> 时间：2012-08-20T21:24:31.560
> 
> 标签：c#, excel, vba, initialization

我在 VBA 有一堂课：

```
Option Explicit

Private mo As omMsg.Message

Private Sub Class_Initialize()
 Set mo = New omMsg.Message
End Sub

Private Sub mo_OnMessageSend(ByVal status As omMsg.ProcessStatus, ByVal msg As String)
   ProcessComMessage status, msg
End Sub 
```

mo_OnMessageSend 没有被调用。

C#类如下：

```
namespace omMsg
{   
public interface IMessage
{
    void sendMessage(Message.ProcessStatus status, string msg);       
    event Message.MessageHandler OnMessageSend;
}

[ClassInterface(ClassInterfaceType.None)]
public class Message : IMessage
{
    public enum ProcessStatus { Retrieving, Generating, Error, Complete }

    public delegate void MessageHandler(ProcessStatus status, string msg);
    public event MessageHandler OnMessageSend;

    public void sendMessage(ProcessStatus status, string msg)
    {
        if (OnMessageSend != null)
            OnMessageSend(status, msg);
    }
}
} 
```

请帮忙。我做对了吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:41:27.223

[基本演练](http://richnewman.wordpress.com/2007/04/15/a-beginner%E2%80%99s-guide-to-calling-a-net-library-from-excel/)：

> 我们将从一个非常基本的示例开始。我们将让 Excel 调用一个 .NET 方法，该方法将字符串作为输入（例如“World”）并返回与该输入字符串连接的“Hello”（例如，“Hello World”）。
> 
> - 在 Visual Studio 2005 中创建一个名为“DotNetLibrary”的 C# Windows 类库项目。就本示例而言，它位于哪个文件夹中并不重要。
> 
> - 要从 Excel 调用我们库中的类中的方法，我们需要该类具有默认的公共构造函数。显然，该类还需要包含我们想要调用的任何方法。对于这个演练，只需将以下代码复制并粘贴到我们的默认类文件中：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace DotNetLibrary
{
    public class DotNetClass
    {
        public string DotNetMethod(string input)
        {
            return "Hello " + input;
        }
    }
} 
```

> 就是这样：如果您查看网络上的现有文章，或阅读 MSDN 帮助，您可能会认为您需要使用接口，或者使用属性和 GUID 来装饰您的类。但是，对于基本的互操作方案，您不需要这样做。
> 
> -Excel 将使用 COM 与我们的库进行通信。为了让 Excel 使用 COM 库，注册表中需要有适当的条目。Visual Studio 可以为我们生成这些条目。
> 
> 为此，请调出项目属性（在解决方案资源管理器中双击“属性”）。然后： i) 在“应用程序”选项卡上单击“程序集信息...”按钮。在出现的对话框中选中“使程序集 COM 可见”复选框。单击“确定”。ii) 在“构建”选项卡上选中“注册 COM 互操作”复选框（朝底部：您可能需要向下滚动）。
> 
> - 建立图书馆。
> 
> - 现在启动 Excel 并打开一个新的空白工作簿。打开 VBA 代码编辑器： i) 在 Excel 2007 中，这有点难找。如果尚未设置，您必须在功能区上显示开发人员选项卡。为此，请单击 Microsoft Office 按钮（屏幕左上角），然后单击 Excel 选项（位于最底部）。在结果选项对话框中选中“在功能区中显示开发人员选项卡”复选框。单击确定。这会将“开发人员”添加到功能区菜单的末尾：单击此按钮。然后单击功能区左端的“Visual Basic”图标。ii) 在 Office 的早期版本（2003、XP、2000）中，只需转到菜单栏上的工具/宏/Visual Basic 编辑器。
> 
> - 我们现在需要包含对我们新库的引用。在 Visual Basic 编辑器的“工具”菜单上选择“参考”。如果您在结果对话框中向下滚动，您应该会发现“DotNetLibrary”在列表中。选中旁边的复选框，然后单击“确定”。
> 
> - 现在打开 Sheet1 的代码窗口（在项目窗口中双击 Sheet1）。将下面的 VBA 代码粘贴到 Sheet1 的代码窗口中：

```
Private Sub TestDotNetCall() 
Dim testClass As New DotNetClass 
MsgBox testClass.DotNetMethod(“World”) 
End Sub 
```

> - 单击刚刚粘贴的代码中的任意位置，然后按“F5”运行代码。您应该会看到一个“Hello World”消息框。

# iis-7 - 安装 ASP.NET MVC 4 杀死了 IIS 7 中的所有站点并出现 503 错误

> ID：12045428
> 
> 赞同：0
> 
> 时间：2012-08-20T21:24:41.587
> 
> 标签：iis-7, installation, asp.net-mvc-4

安装 ASP.NET MVC 4 杀死了 IIS 7 中的所有站点，并出现 503 错误。我不知道发生了什么。我已经安装了 .NET 4 和 MVC 3。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T05:02:02.097

您的网页由应用程序池提供服务。如果您禁用/停止应用程序池，并且任何人尝试浏览该应用程序，您将获得服务不可用。它可能由于多种原因而发生...

1.  您的应用程序可能已经崩溃 [检查事件查看器，看看您是否可以在应用程序/系统日志中找到事件日志]

2.  您的应用程序可能会非常频繁地崩溃。如果一个应用程序池在 5 分钟内崩溃 5 次 [检查您的应用程序池设置是否快速失败]，则您的应用程序池被 IIS 禁用，您最终会收到此消息。

无论哪种情况，问题都是您的工作进程出现故障，您应该从崩溃的角度对其进行故障排除。[http://blogs.msdn.com/b/rahulso/archive/2006/03/02/what-is-a-crash-technically-in-asp-net-and-what-to-do-if-it-发生.aspx](http://blogs.msdn.com/b/rahulso/archive/2006/03/02/what-is-a-crash-technically-in-asp-net-and-what-to-do-if-it-happens.aspx)

# grails - 使用 groovy-wslite 向 XML 节点添加属性

> ID：12045430
> 
> 赞同：0
> 
> 时间：2012-08-20T21:24:53.303
> 
> 标签：grails, groovy

我正在使用 groovy-wslite 对 WSDL 进行 SOAP 调用，并且需要它生成的 xml 节点之一具有属性。这是我需要的一个例子：

```
<soap-env:Envelope xmlns:soap-env='http://schemas.xmlsoap.org/soap/envelope/'
  <soap-env:Header />
  <soap-env:Body>
  <getSomething id = "1">
  </getSomething>
  </soap-env:Body>
</soap-env:Envelope> 
```

在此示例中，我需要`getSomething`调用具有`id`属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:17:19.633

除了构建子元素的闭包之外，您还可以传递其键/值将成为属性的映射。以下将生成与您所拥有的匹配的 SOAP 请求。

```
@Grab(group='com.github.groovy-wslite', module='groovy-wslite', version='0.7.1')
import wslite.soap.*

def client = new SOAPClient('http://...')
def response = client.send {
    header
    body {
        getSomething(id:'1') {
            //more elements here if needed
        }
    }
} 
```

Groovy 的 MarkupBuilder 在后台使用，因此您找到的任何 MarkupBuilder 示例在使用 wslite 生成 SOAP 请求时也应该适用。

# c# - 将 Xpath 语句集成到 WCF 服务的 Linq 查询中

> ID：12045432
> 
> 赞同：0
> 
> 时间：2012-08-20T21:24:58.143
> 
> 标签：c#, .net, xml, linq, xpath

您好，提前感谢您的帮助。我有一个托管在具有两列的服务器上的 sql 表：ID(int), server_info(xml) 此表中的 xml 条目如下所示：

```
<ServerID>11</ServerID><GroupID /><ParentID>15</ParentID><ServerName>IAProd1</ServerName><User>admin</User><UID>123</UID><PWD>password</PWD><Domain>TestDomain</Domain><Location>Left</Location> 
```

此表在我的 Silverlight 应用程序中表示为 ADO.Net 数据实体数据模型。我想通过 WCF 服务调用一个参数化查询，该查询接受一个 Id 号，并根据嵌入在其 server_info 列的 xml 中的父 id 值在服务器表中查找子项。在 sql server 上，我可以使用带有 xpath 语句的以下查询来执行此操作：

```
<!--uses xpath statement in the where clause:(server_info.value('(ServerID)[1]', 'int') = 11) --> 
    SELECT     ID, server_info
    FROM         tbl_server_xml
    WHERE     (server_info.value('(ServerID)[1]', 'int') = 11) 
```

目前我的查询方法如下所示：

```
public List<tbl_server_xml> getChildServers(int parentId)
        {
            //create instance of Ado.Net entity
            xMonitorXMLTestDBEntities db = new xMonitorXMLTestDBEntities();
            var item = from entry in db.tbl_server_xml
                       where //need assistance with the where clause
                       select entry;

        } 
```

我无法弄清楚如何仅使用服务方法中的 linq 查询或将 xpath 语句集成到 Linq 查询中的方法来执行等效操作。有没有办法做到这一点，还是我要解决这个问题？再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:17:00.503

问题是您`server_info`的 XML 文档内容不是有效的，因为它没有根元素。但是通过一个简单的技巧，您可以像这样编写查询

```
 var item = from entry in db.tbl_server_xml
                       where XDocument.Parse("<Root>" + entry.server_info + "</Root>").
                             XPathSelectElements("//ServerID[1]").Single().Value == "11"
                       select entry; 
```

或使用普通的 Linq to XML

```
var item = from entry in db.tbl_server_xml
                           where XDocument.Parse("<Root>" + entry.server_info + "</Root>").
                                 Descendants("ServerID").First().Value == "11"
                           select entry; 
```

# javascript - document.addEventListener 和 window.addEventListener 的区别？

> ID：12045440
> 
> 赞同：184
> 
> 时间：2012-08-20T21:25:39.543
> 
> 标签：javascript, events, dom, event-listener

在使用 PhoneGap 时，它有一些使用的默认 JavaScript 代码`document.addEventListener`，但我有自己的代码使用`window.addEventListener`：

```
function onBodyLoad(){
    document.addEventListener("deviceready", onDeviceReady, false);
    document.addEventListener("touchmove", preventBehavior, false);
    window.addEventListener('shake', shakeEventDidOccur, false);
} 
```

有什么区别，哪个更好用？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-08-20T21:31:47.603

`document`和是不同的`window`对象，它们有一些不同的事件。在它们上使用`addEventListener()`会监听发往不同对象的事件。您应该使用实际有您感兴趣的事件的那个。

例如，对象上有一个不在对象上的`"resize"`事件。`window``document`

例如，`"readystatechange"`事件仅在`document`对象上。

所以基本上，您需要知道哪个对象接收您感兴趣的事件并`.addEventListener()`在该特定对象上使用。

这是一个有趣的图表，显示了哪些类型的对象创建了哪些类型的事件：[https ://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference)

* * *

如果您正在侦听传播的事件（例如单击事件），那么您可以在文档对象或窗口对象上侦听该事件。传播事件的唯一主要区别在于时间。该事件将在`document`对象之前命中对象，`window`因为它首先发生在层次结构中，但这种差异通常无关紧要，因此您可以选择其中任何一个。我发现在处理传播的事件时，通常最好选择最接近事件源的对象以满足您的需求。`document`这将建议您选择`window`何时可以工作。但是，我经常会更靠近源并`document.body`在文档中使用甚至更接近的共同父级（如果可能的话）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T21:34:25.320

您会发现在 javascript 中，通常有许多不同的方法可以做同样的事情或找到相同的信息。在您的示例中，您正在寻找一些保证始终存在的元素。`window`两者`document`都符合要求（只有一些差异）。

来自[Mozilla 开发网络](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)：

> addEventListener() 在单个目标上注册单个事件侦听器。事件目标可以是文档中的单个元素、文档本身、窗口或 XMLHttpRequest。

所以只要你能指望你的“目标”总是在那里，唯一的区别就是你在听什么事件，所以就用你最喜欢的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-17T09:16:50.523

绑定是指浏览器提供的`window`内置对象。它表示包含`document`. 调用它的`addEventListener`方法会注册第二个参数（回调函数），只要它的第一个参数描述的事件发生，就会调用它。

```
<p>Some paragraph.</p>
<script>
  window.addEventListener("click", () => {
    console.log("Test");
  });
</script> 
```

选择窗口或文档添加EventListners前应注意以下几点

1.  大部分事件对于`window`或是相同的，`document`但有些事件如`resize`、 和其他与`loading`、 `unloading`、相关的事件`opening/closing`都应该在窗口上设置。
2.  由于窗口有文档，因此最好使用文档来处理（如果可以处理），因为事件将首先命中文档。
3.  Internet Explorer 不会响应窗口上注册的许多事件，因此您需要使用文档来注册事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-21T19:15:31.313

在我看来，在处理传播的事件时，通常最好选择最接近事件源的对象以满足您的需求。

所以，如果你想让事件发生在元素上，最好使用`window.addEventListener()`（假设 window 变量是一个元素），因为这里在监听事件时最重要的是代码和事件执行速度更快：唯一的在这种情况下很重要。

# jsf - JSF - 自定义 NavigationHandler 结果值无效？

> ID：12045442
> 
> 赞同：3
> 
> 时间：2012-08-20T21:25:44.180
> 
> 标签：jsf, jakarta-ee, navigation

我为自己编写了一个自定义 NavigationHandler，与下面的非常相似，但只是使用堆栈来保存历史记录：

[http://jsfatwork.irian.at/book_de/custom_component.html#!idx:/custom_component.html:fig:backnavigationhandler-code](http://jsfatwork.irian.at/book_de/custom_component.html#!idx:/custom_component.html:fig:backnavigationhandler-code)

```
public class HistoryNavigationHandler extends NavigationHandler
{
    private final NavigationHandler navigationHandler;

    private final Stack<String> outcomes;

    public HistoryNavigationHandler(final NavigationHandler navigationHandler)
    {
        this.navigationHandler = navigationHandler;
        this.outcomes = new Stack<String>();
    }

    @Override
    public void handleNavigation(final FacesContext context, final String fromAction, final String outcome)
    {
        if (outcome != null)
        {
            if (outcome.equals("back"))
            {
                final String lastViewId = this.outcomes.pop();

                final ViewHandler viewHandler = context.getApplication().getViewHandler();
                final UIViewRoot viewRoot = viewHandler.createView(context, lastViewId);
                context.setViewRoot(viewRoot);
                context.renderResponse();

                return;
            }
            else
            {
                this.outcomes.push(context.getViewRoot().getViewId());
            }
        }
        this.navigationHandler.handleNavigation(context, fromAction, outcome);
    }
} 
```

在 faces-config.xml 中注册这个：

```
<navigation-handler>
    package.HistoryNavigationHandler
</navigation-handler> 
```

导致以下日志警告和存在先前工作链接的消息：

```
Warning: jsf.outcome.target.invalid.navigationhandler.type

Something like: this link is disabled because a navigation case could not be matched 
```

问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T02:20:07.553

从 JSF 2 开始，[`NavigationHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/NavigationHandler.html)已被[`ConfigurableNavigationHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ConfigurableNavigationHandler.html). 所有 JSF 2 特定的标签/组件`<h:link>`等都依赖它。`NavigationHandler`保留是为了向后兼容。

这是一个如何正确扩展的启动示例`ConfigurableNavigationHandler`：

```
public class HistoryNavigationHandler extends ConfigurableNavigationHandler {

    private NavigationHandler wrapped;

    public HistoryNavigationHandler(NavigationHandler wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public void handleNavigation(FacesContext context, String from, String outcome) {

        // TODO: Do your job here. 

        wrapped.handleNavigation(context, from, outcome);        
    }

    @Override
    public NavigationCase getNavigationCase(FacesContext context, String fromAction, String outcome) {
        return (wrapped instanceof ConfigurableNavigationHandler)
            ? ((ConfigurableNavigationHandler) wrapped).getNavigationCase(context, fromAction, outcome)
            : null;
    }

    @Override
    public Map<String, Set<NavigationCase>> getNavigationCases() {
        return (wrapped instanceof ConfigurableNavigationHandler)
            ? ((ConfigurableNavigationHandler) wrapped).getNavigationCases()
            : null;
    }

} 
```

# oracle - 在 PLSQL 中使用嵌套函数的正确方法是什么？

> ID：12045444
> 
> 赞同：2
> 
> 时间：2012-08-20T21:25:47.163
> 
> 标签：oracle, function, plsql, nested-function

我想知道在 PLSQL 中使用嵌套函数的正确方法。在下面的代码片段中，函数“to_number”工作正常，但我的两个嵌套函数不能以相同的方式使用。

```
Declare
  Tettt Number;
  Function lolazo(pigt Number, p_Fecha_Fact Date)
  Return Number Is
    resultado number;
  Begin
    Select Vp.Valor
    into resultado
    from valor_precio vp
    Where Vp.Id_Tipo_Cargo = 103
      And Vp.Id_Grupo_Precio = pigt
      and vp.f_inicio_precio =
        (select max(vp2.f_inicio_precio)
         From Valor_Precio Vp2
         Where Vp2.Id_Grupo_Precio = pigt
           And Vp2.F_Inicio_Precio < p_fecha_fact
           And Vp2.Id_Tipo_Cargo = 103 );
    Return Resultado;
  End Lolazo;
  Function Multi(Uno Number, Dos Number) Return Number Is
  Begin
    return uno*dos;
  End Multi;
Begin
  Select to_number('123')
  Into Tettt
  From Dual;

--  Doesn't work!
--  Select lolazo(1544, to_date('01/01/2011','dd/mm/yyyy')) 
--  Into Tettt
--  From Dual;

--  Doesn't work!
--  select Multi(2,3) into Tettt from dual;

Dbms_Output.Put_Line(lolazo(1544, to_date('01/01/2011','dd/mm/yyyy')));
Dbms_Output.Put_Line(Multi(2,3));
dbms_output.put_line(Tettt);
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T09:25:59.353

你的函数不能在 SQL 中使用，所以不要：`select into some_variable from dual`.

尝试使用分配：

```
Tettt := Multi(2,3); 
```

此外，从您的脚本中发布您的错误（而不是说不起作用）。我们更容易看到实际问题。

如果您真的想从 SQL 中使用这些函数，则必须将它们公开给 SQL 引擎（在您的匿名块所在的 PL/SQL 世界之外）。这通常涉及创建单独的存储过程或在某些包规范中定义它们。

希望有帮助。

# python - 计算带干扰的RF丢包，用Python解析

> ID：12045446
> 
> 赞同：2
> 
> 时间：2012-08-20T21:26:27.343
> 
> 标签：python, packet

我正在使用 Python 解析来自 RF 传感器的数据文件，这些数据文件保存带有序列号和时间戳的数据包。我需要计算丢失的数据包并忽略来自干扰的数据包（数据包乱序）。

这个怎么运作：

*   数据包序列范围为 0-255 并翻转。
*   发送到传感器的第一个数据包始终编号为 0。（并不意味着数据文件中的第一个数据包始终为 0。）
*   干扰数据包是乱序的，可以是随机的，也可以是 0-255。
*   每 5 ms 将数据包发送到传感器。（传感器有时会记录一个具有 6 毫秒时间增量的数据包。）

在数据文件中发现乱序的包可能是干扰包，但也可能因为丢失包而存在。到目前为止，我只检查“前一个”数据包的差异是否大于 1。区分丢失数据包和干扰数据包的巧妙方法是什么？

```
for fname in glob(path.join(fdir, 'RFsensor*.txt')):
    with open(fname,'r') as fin:
        dump = fin.readlines()
        fin.close()

        ## Tracks line indices when RF channel changes
        lastchan = dump[8][53:55]
        channels = [int(lastchan,16)]
        startindex = [0]
        endindex = []
        for i,line in enumerate(dump[8:]):
            if line[53:55] != lastchan:
                channels.append(int(line[53:55],16))
                startindex.append(i)
                endindex.append(i-1)
            lastchan = line[53:55]
        endindex.append(len(dump[8:])-1)

        ## Calculate data and write results according to line index values
        count = 0
        lost = 0
        for i,line in enumerate(dump[8:]):
            count+=1
            PktSeq = int(line[42:44],16)
            ## Check i against startindex
            if startindex and i == startindex[0]:
                stamp = TestStamp(line)
                stamp = '%s:%s:%s' % (stamp[11:13],stamp[14:16],stamp[17:19])
                chan = int(line[53:55],16)
                startindex.pop(0)
            ## Check for lost packets
            else:
                diff = PktSeq - prevSeq - 1
                ## Account for sequence roll over
                if PktSeq < prevSeq:
                    diff = diff + 256
                if diff != 0:
                    lost += diff
            prevSeq = PktSeq 
```

# jquery - 如何在 iOS 全屏模式下伪造 Jquery Mobile Ajax 请求的用户代理（使用 apple-mobile-web-app-capable）？

> ID：12045455
> 
> 赞同：0
> 
> 时间：2012-08-20T21:27:19.517
> 
> 标签：jquery, ajax, jquery-mobile, iphone-standalone-web-app

我用这个把头发拔了...

我的应用程序在`jquery-mobile (1.1.1)`前端运行。在（ipad1 + 3，iOS3 + 5）上的Mobile Safari中运行应用程序工作正常，但如果我通过主屏幕图标打开应用程序使用`jquery (1.7.2)``requireJS`

```
 <meta name="apple-mobile-web-app-capable" content="yes" /> 
```

我所有加载新页面或在页面之间来回切换的 Jquery Mobile AJAX 请求都失败了。相反，**错误加载页面**消息会在链接到页面刚刚重新加载之前短暂闪烁，重新启动我的应用程序。

我已经坐了两天了，并尝试了以下所有方法：

`manifest`（我实际上并没有使用清单，只是想看看它是否有帮助）

*   [添加网络资源](https://forum.jquery.com/topic/ajax-fail-in-mobile-app)> 没有帮助

`requireJS`

*   从我的应用程序中完全删除 requireJS > 仍然不起作用
*   [缓存破坏](https://stackoverflow.com/questions/8315088/prevent-requirejs-from-caching-required-scripts)>没有帮助

`offline`

*   [设置为本地](https://github.com/jquery/jquery-mobile/issues/1194)

但是我仍然遇到页面未加载和导航中断的问题。

对我来说有意义的一个原因是[在这篇博](http://blog.lavablast.com/post/2011/05/29/Gotcha-iPad-versus-ASPNET.aspx)文中，它认为 Safari 在全屏模式与移动 Safari 中使用不同的 HTTP 用户代理字符串。全屏传递的字符串似乎无法识别，导致只需要基本的浏览器设置（例如不支持 javascript）。

发布的解决方法 ( `for ASP.net`) 像这样伪造用户代理：

```
 protected void Page_PreInit(object sender, EventArgs e) {
     if (Request.UserAgent != null && Request.UserAgent.IndexOf("AppleWebKit", StringComparison.CurrentCultureIgnoreCase) > -1) {
        this.ClientTarget = "uplevel";
        }
      } 
```

**问题：**
当 iOS 全屏模式处于活动状态时（这完全可以检测到），我如何在 Javascript/Jquery 中包含这样的修复（~ 伪造用户代理）？另外我很好奇这种方法是否有任何警告？好像错了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:15:06.950

如果是用户代理的问题，那么用 javascript 根本不可能解决。用户代理不能通过 javascript 更改。它在下载 javascript 之前由应用程序（Web 浏览器）发送到服务器。尝试使用 javascript 的任何技巧也不起作用，因为它在 XMLHttpRequest 标准中指定，如果脚本试图更改任何这些标头（[JQuery Ajax Request: Change User-Agent](https://stackoverflow.com/questions/5771878/jquery-ajax-request-change-user-agent)），则必须立即终止请求：

```
Accept-Charset
Accept-Encoding
Access-Control-Request-Headers
Access-Control-Request-Method
Connection
Content-Length
Cookie
Cookie2
Content-Transfer-Encoding
Date
Expect
Host
Keep-Alive
Origin
Referer
TE
Trailer
Transfer-Encoding
Upgrade
User-Agent
Via 
```

我的猜测是这是出于安全原因。

或者，在服务器端检测请求的用户代理并返回适用于该特定用户代理的代码，但当然，没有人愿意做更多的工作。

您确定用户代理是否真的不同？如果用户代理不同而您不知道，我想不出为什么您自己的代码将无法工作。唯一的原因可能是您使用的第三方 javascript 库。

# java - 指向不同类型节点的链表节点

> ID：12045458
> 
> 赞同：0
> 
> 时间：2012-08-20T21:27:46.080
> 
> 标签：java, linked-list, singly-linked-list

这是我在这里的第一篇文章，但我对这个网站并不陌生（称我为潜伏者）。不幸的是，这一次我似乎无法在不问的情况下找到我的问题的答案。总之，说到点子上了。

我正在用 Java 编写一个小蛇和梯子（又名滑槽和梯子）程序，用于数据结构课程。我必须编写自己的 Linked List (LL) 类，（我知道有一个 java util 做得更好，但我必须了解数据结构的工作原理），这不是问题。我喜欢称它为“半双链接”，因为它向前链接，但有另一个用于其他链接的指针字段，这不一定在每个节点中都使用。

我想知道的是是否可以将一个节点从一个列表链接到另一个不同类型的列表。糟糕的例子：（例如）如何将一个类型的节点链接到一个类型的节点？假设我们有 7 个 int 值 [1,2,3,4,5,6,7] 的 LL，以及 7 个字符串 [Monday, Tuesday, Wednesday,Thursday, Friday, Saturday, Sunday] 的 LL。我们想将包含 1 的节点链接到包含 Monday 的节点。

确切地说，我遇到的问题如下：我有 100 个节点前向链接，形成游戏板，以及 4 的循环链接列表。我想将玩家节点链接到他们各自在棋盘上的位置，这样当他们遍历棋盘时，他们也可以跟随“蛇”和“梯子”链接。

提前致谢！

我的 LLNode.java 和 LL.java 已附加。

```
// LLNode.java  
// node in a generic linked list class, with a link 

public class LLNode<T> 
{
    public T info;
    public LLNode<T> next, link;

    public LLNode()
    {   
        next = null;
        link= null;
    }

    public LLNode(T element)
    {
        info = element;
        next = null;
        link = null;
    }

    public LLNode(T element, LLNode<T> n)
    {
        info = element;
        next = n;
        link = null;
    }

    public T getInfo()
    {
        return info;
    }

    public void setInfo(T element)
    {
        info = element;
    }

    public LLNode<T> getNext()
    {
        return next;
    }

    public void setNext(LLNode<T> newNext)
    {
        next = newNext;
    }

    public LLNode<T> getLink()
    {
        return link;
    }

    public void setLink(LLNode<T> newLink)
    {
        link = newLink;
    }
}

// SLL.java 
// a generic linked list class

public class LL<T> 
{
    private LLNode<T> head, tail;
    public LLNode<T> current = head;

    public LL()
    {
        head = tail = null;
    }

    public boolean isEmpty()
    {
        return head == tail;
    }

    public void setToNull()
    {
         head = tail = null;
    }

    public boolean isNull()
    {
        if(head == tail)
            if(head == null || tail == null)
                return true;
            else 
                return false;
        else 
            return false;
    }

    public void addToHead(T element)
    {
        head = new LLNode<T>(element, head);
        if (tail == null)
            tail = head;
    }

    public void addNodeToHead(LLNode<T> newNode)
    {
        head = newNode;
        if (tail == null)
            tail = head;
    }

    public void addToTail(T element)
    {
        if (!isNull())
        {
            tail.next= new LLNode<T>(element);
            tail = tail.next;
        }
        else head = tail = new LLNode<T>(element);
    }

    public void addNodeToTail(LLNode<T> newNode)
    {
        if (!isNull())
        {
            tail.next= newNode;
            tail = tail.next;
        }
        else head = tail = newNode;
    }

    public void addBefore(T element, T X)
    {
        if (!isEmpty()) // Case 1
        {
            LLNode<T> temp, n;

            temp = head;
            while( temp.next != null )
            {
                if( temp.next.info == X )
                {
                    n = new LLNode<T>(element, temp.next);
                    temp.next = n;
                    return;
                }
                else 
                temp = temp.next;
            }    
        }
        else // Case 2
            head = new LLNode<T>(element, head);
    }

    public void addBefore(T element, LLNode<T> X)
    {
        if (!isEmpty()) // Case 1
        {
            LLNode<T> temp, n;

            temp = head;
            while( temp.next != null )
            {
                if( temp.next == X )
                {
                    n = new LLNode<T>(element, X);
                    temp.next = n;
                    return;
                }
                else 
                temp = temp.next;
            }    
        }
        else // Case 2
            head = new LLNode<T>(element, head);
    }

    public T deleteFromHead()
    {
        if (isEmpty())
            return null;
        T element = head.info;
        if (head == tail)
            head = tail = null;
        else head = head.next;
        return element;
    }

    public T deleteFromTail()
    {
        if (isEmpty())
            return null;
        T element = tail.info;
        if (head == tail)
            head = tail = null;
        else 
        {
            LLNode<T> temp;
            for (temp = head; temp.next != tail; temp = temp.next);
            tail = temp;
            tail.next = null;
        }
        return element;
    }

    public void delete(T element)
    {
        if (!isEmpty())
            if (head == tail && (element.toString()).equals(head.info.toString()))
                head = tail = null;
            else if ((element.toString()).equals(head.info.toString()))
                head = head.next;
        else 
        {
            LLNode<T> pred, temp;
            for (pred = head, temp = head.next; temp != null && !((temp.info.toString()).equals(element.toString())); pred = pred.next, temp = temp.next);
            if (temp != null)
                pred.next = temp.next;
            if  (temp == tail)
                tail = pred;
        }
    }

    public void listAll()
    {
        if(isNull())
            System.out.println("\tEmpty");
        else
        {
            for ( LLNode<T> temp = head; temp!= tail.next; temp = temp.next)
                System.out.println(temp.info);
        }
    }

    public LLNode<T> isInList(T element)
    {
        LLNode<T> temp;
        for ( temp = head; temp != null && !((temp.info.toString()).equals(element.toString())); temp = temp.next);
        return temp ;
    }

    public LLNode<T> getHead()
    {
        return head;
    }

    public LLNode<T> getTail()
    {
        return tail;
    }

    public LLNode<T> getCurrent()
    {
        return current;
    }

    public void incrementCurrent()
    {
        current = current.next;
    }

    public void followCurrentLink()
    {
        current = current.link;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:42:53.847

您想要为节点对象的特定问题域泛型的任何具体原因？

如果您想获得这种效果，另一种方法可能是为节点对象提供一个接口（可能称为 ILinkNode），在两个不同的节点类中覆盖 getInfo 和 setInfo。然后 nodeLink 可以指向接口对象，而无需在代码中的任何地方进行特殊类型转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:32:56.233

在第一个列表中使用，即包含要链接到另一个列表中的节点的节点的列表，Object 作为泛型类型实例化。

就像是：

```
 LL<Object> ll = new LL<Object>(); 
```

如果这样做，则每次从列表中检索节点的值时，都必须注意转换为特定类型。

# java - Andengine Sprite 切换场景后不再可见

> ID：12045462
> 
> 赞同：2
> 
> 时间：2012-08-20T21:28:05.907
> 
> 标签：java, android, andengine

我又遇到了一个问题，我想我已经尝试了所有方法，但没有任何效果，所以我想请教您的任何想法:)

**这里是：**

在我的 AndEngine 游戏中，我切换场景。首先我有我的*游戏场景*，我的*Sprite*正在四处走动，然后我分离 Sprite 并切换到*另一个场景*[使用`mEngine.setScene(otherScene)`] 他再次连接。这就像一个魅力，直到我切换回游戏场景。

我将精灵从另一个场景中*分离*出来， [再次使用]*切换*`mEngine.setScene(gameScene)`回来，一段时间后（涉及 TimerHandler），精灵再次*连接*到该游戏场景。**但它是不可见的。**

以下是我能想到的一些事情，为什么这会失败......但到目前为止一切都检查过了：

*   **附加**到正确场景的精灵
*   正确的**位置**（他第一次来的同一个位置）
*   精灵的正确**大小**（32x32 像素）
*   `setVisible(true);` （不管有没有都不起作用）
*   **zIndex**（设置为之前的值或设置为更高的值...）
*   **Alpha**值，如用于`setAlpha(1f);`完全可见性
*   精灵有它自己的**TextureAtlas** (1024x1024) <--我知道，它很大 - 但它以前工作过:)
*   我什至尝试重新加载**纹理**（`textureAtlas.load()`）

到目前为止没有任何效果 - 我仔细检查了这些设置中的每一个（通过记录它，设置它并再次记录它......）

现在我完全迷失了。问题是，到目前为止一切正常。精灵在四处移动，我在切换场景时没有问题……我什至第二次切换回另一个场景，精灵又出现了……但不在游戏场景中——甚至没有黑色方块或什么都没有.

哦，我可以在他移动时跟踪精灵。随着**镜头跟随精灵**，我看到他正在做他应该做的事情——他只是看不见。

还有什么想法吗？我在这里想念什么？你们有没有人经历过类似的事情？无论如何，感谢您抽出宝贵时间阅读本文！

此致

克里斯托夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:41:01.703

`engineOptions.getRenderOptions().disableExtensionVertexBufferObjects();`在创建引擎之前尝试调用。我遇到了类似的问题，结果证明这个选项会强制 RAM 和 GPU 保持同步，这以某种方式（我还没有学习 OpenGL 的原理）阻止了 Sprites 消失。

# javascript - 第一个空格上的Javascript拆分字符串

> ID：12045464
> 
> 赞同：0
> 
> 时间：2012-08-20T21:28:20.650
> 
> 标签：javascript, sorting, space

我将以下代码作为表格排序脚本的一部分。就像现在一样，它允许“FIRST LAST”格式的名称通过“重新格式化”为“LAST，FIRST”来按 LAST 名称排序。

```
var FullName = fdTableSort.sortText;
function FullNamePrepareData(td, innerText) {
  var a = td.getElementsByTagName('A')[0].innerHTML;
  var s = innerText.split(' ');
  var r = '';
  for (var i = s.length; i > 0; i--) {
    r += s[i - 1] + ', ';
  }
  return r;
} 
```

它目前似乎在最后一个空格之后的名称上排序（例如，Jean-Claude Van Damme 会按“D”排序）。

我如何更改此脚本以在 FIRST 空间上排序（因此 Van Damme 出现在 V 中）？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:32:27.183

[您可以通过使用数组方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)来缩短该函数：

```
function FullNamePrepareData(td, innerText) {
    return innerText.split(' ').reverse().join(', ');
} 
```

要仅将名字放在其他所有内容后面，您可以使用

```
function FullNamePrepareData(td, innerText) {
    var names = innerText.split(' '),
        first = names.shift();
    return names.join(' ')+', '+first;
} 
```

或使用[正则表达式替换](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)：

```
function FullNamePrepareData(td, innerText) {
    return innerText.replace(/^(\S+)\s+([\S\s]+)/, "$2, $1");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:34:32.363

而不是`.split()`and 循环你可以做一个替换：

```
return innerText.replace(/^([^\s]+)\s(.+)$/,"$2, $1"); 
```

即找到第一个空格之前的所有字符，并与第一个空格`([^\s]+)`之后的字符交换`(.+)`，同时插入逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:34:17.090

我不知道排序发生在哪里；听起来您只想更改重新排序输出。

最简单的方法是使用正则表达式：

```
// a part without spaces, a space, and the rest
var regexp = /^([^ ]+) (.*)$/;

// swap and insert a comma
"Jean-Claude Van Damme".replace(regexp, "$2, $1"); // "Van Damme, Jean-Claude" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T21:38:00.407

我想你在这之后：

```
 var words = innerText.split(' '),
        firstName = words.shift(),
        lastName = words.join(' ');
    return lastName + ', ' + firstName; 
```

这会给你“范达姆，让-克劳德”

# assembly - 操作码“89”的 x86 Modrm/Sib/Displacement 字节

> ID：12045467
> 
> 赞同：7
> 
> 时间：2012-08-20T21:29:00.180
> 
> 标签：assembly, x86, disassembly

我正在为 32 位 x86 指令集开发反汇编程序。我的代码目前可以正确解码大多数 1 字节和 2 字节操作码，但我遇到了问题。当我将代码的输出与 Objdump 进行比较时，我发现 Objdump 看到以下内容：-

```
89 14 98                mov    %edx,(%eax,%ebx,4)

8b 45 d8                mov    -0x28(%ebp),%eax 
```

另一方面，我的代码给出： -

```
89 14 98 8B 45 D8 89   MOV. 
```

根据我对 Intels 文档的理解（特别是 Modrm 和 Sib 寻址表格），该字节流应解释为：-

```
89 - The opcode
14 - The Modrm byte
98 - The Sib byte specified by the Modrm byte (as shown in Intels Modrm addressing table)
8B 45 D8 89 - The four byte displacement specified by the Sib byte (as shown in Intels Sib addressing table). 
```

Objdump 说没有位移字节，但我的代码和英特尔文档似乎（至少对我来说）都不是这样说的。

如果有人能指出我的错误在哪里，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:11:07.133

Mod/RM 字节 0x14 分解为 Mod=00 Reg=010 R/M=100。

在[http://download.intel.com/design/intarch/manuals/24319101.pdf](http://download.intel.com/design/intarch/manuals/24319101.pdf)表 2-2（标有“2-6”的页面，实际上是 PDF 的第 36 页）中显示 Mod=00 R/M=100作为一个没有位移的SIB。

我无法确定您误读了哪一部分，因为您没有指定您正在使用的文档。有很多不同的英特尔手册。

# c# - 从类型创建泛型类的实例

> ID：12045468
> 
> 赞同：1
> 
> 时间：2012-08-20T21:29:05.290
> 
> 标签：c#, generics

我有这个类，它有一个返回对象的方法：

```
public class Deserializer<T>
{
    public static T FromJson(string json)
    {
        return new JavaScriptSerializer().Deserialize<T>(json);
    }   
} 
```

我有一个类型。如何基于这种类型创建 Deserializer 类的实例？以下显然不起作用：

```
var type = typeOf(MyObject);
var foo = Deserializer<type>.FromJson(json); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T21:34:00.840

您也可以为在编译时不知道类型的消费者提供非通用版本（顺便说一下，当您公开 API 时，这是一个很好的做法）：

```
public class Deserializer
{
    public static T FromJson<T>(string json)
    {
        return new JavaScriptSerializer().Deserialize<T>(json);
    }

    public static object FromJson(string json, Type type)
    {
        return new JavaScriptSerializer().Deserialize(json, type);
    }
} 
```

现在，在编译时知道类型的消费者：

```
Foo foo = Deserializer.FromJson<Foo>(json); 
```

以及在编译时不知道类型的消费者：

```
Type type = ...
object instance = Deserializer.FromJson(json, type); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:45:24.277

这就是您可以做到的方式，但除非您绝对必须这样做，否则它并不是最佳选择。如果可以，请选择其他答案之一！

```
dynamic result = typeof(Deserializer<>).MakeGenericType(type)
    .InvokeMember("FromJson", BindingFlags.Public | BindingFlags.Static |
                              BindingFlags.InvokeMethod, null, null,
                  new [] { json }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:33:08.760

你不能这样做。泛型类型参数是静态绑定的（编译时）。你不能给它一个`System.Type`对象。

对于您的简单示例，您可以（有点明显）只使用`MyObject`：

```
MyObject foo = Deserializer<MyObject>.FromJson(json); 
```

如果你能做到这一点，结果会是什么类型`FromJson`？您将如何使用该对象？

```
Type t = ___;  // How do you get this?
??? foo = Deserializer<t>.FromJson(json);   // What datatype is foo? 
```

您尝试做的不是 C# 等静态类型语言的功能。它更像是一种动态语言功能，例如 Python，您只需返回您想要的任何内容并对其执行任何操作。

# algorithm - 如何找到图的加权最小顶点覆盖

> ID：12045472
> 
> 赞同：2
> 
> 时间：2012-08-20T21:29:21.310
> 
> 标签：algorithm, graph

所以，我有一个具有一定权重和边的顶点图。我正在尝试找到最小加权顶点覆盖。例如，如果我有一个大小为 10 的顶点覆盖，但每个节点的权重为 10，那么总覆盖的权重为 100。但如果我有一个大小为 99 的顶点覆盖，每个节点的权重为 1，那么我会选择这个封面而不是前一个。

我相信这是 NP-Complete，所以没有有效的算法，但我认为即使是详尽的搜索也对我有用，因为节点的数量会相对较少。我能想到的唯一方法是生成集合 [1 ... n] 的幂集（其中每个整数对应于图上的一个节点），然后测试每个单独的集合以查看它是否是1）一个有效的顶点覆盖，2）跟踪最低权重的顶点覆盖。

但这似乎非常低效。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:49:09.143

最小权重顶点覆盖是 NP-Complete 的，所以一般来说你不能期望比穷举搜索更好，但你可以使用回溯来找到最小权重顶点覆盖，如下所示：

```
MinCover(Graph G, List<Vertex> selectedVertices, int min)
{
   var coveredAll = covered(G,selectedVertices);
   if ( coveredAll && weight(selectedVertices) < min)
   {
       cover = selectedVertices.ToList();
       min = weight(cover);
   }
   else if (!coveredAll && weight(selectedVertices) < min)
   {
      select another unvisited vertex and add it to selectedVertices
      call MinCover
      remove the previously selected vertex from the list
   }

   return;

} 
```

# c# - 循环 sql（SQL 或 Asp.net C#）的最佳方法是什么？

> ID：12045479
> 
> 赞同：3
> 
> 时间：2012-08-20T21:29:37.317
> 
> 标签：c#, asp.net, sql, tsql

我正在创建一个发送电子邮件的列表。登录的个人在数据库中有一个他们向谁报告的字段（除非有错误或他们没有向任何人报告）。

因此，例如，如果我登录并单击 SQL 中的提交按钮，它会说我向“John Doe”报告

然后，我需要获取“John Doe”向谁报告并将其添加到列表中。我需要继续爬升，直到我们到达公司的顶端（GID 将为空白或空）。

以我为例，我向`'John Doe'`谁汇报`'Tom Doe'`。汤姆向任何人报告他的`usrReportsTo`领域是这样的`'00000000-0000-0000-0000-000000000000'`。

如果 usrReportsTo 字段是`""`或`NULL`，`'00000000-0000-0000-0000-000000000000'`则循环应该终止。

这是我使用的sql。

执行此循环的最干净/最简洁/最有效的方法是什么？在 SQL 或 ASP.net C# 中执行它更好吗？

```
select usrReportsTo from dbo.CVT_Users_usr, usrEmailAddress
WHERE RTRIM(usrFirstName) + ' ' + RTRIM(usrLastName) = 'James Wilson' 
-- Returns 'James Wilson' + email

SELECT RTRIM(usrFirstName) + ' ' + RTRIM(usrLastName) as Name, usrEmailAddress, usrReportsTo from dbo.CVT_Users_usr
WHERE usrGID = '38922F83-4B6E-499E-BF4F-EF0B094F47F7'
-- Returns 'John Doe' + email + reportsTo

SELECT RTRIM(usrFirstName) + ' ' + RTRIM(usrLastName) as Name, usrEmailAddress, usrReportsTo from dbo.CVT_Users_usr
WHERE usrGID = 'FB8F4939-3956-4834-9D89-D72AFB8BF3E0'
-- Returns 'Tom Doe' + email + reportsTo 
```

编辑#3

SQL 的工作副本不会返回 100% 的真实数据。

使用 cte AS ( select usrGID, RTRIM(usrFirstName) + ' ' + RTRIM(usrLastName) as Name, usrEmailAddress, usrReportsTo from dbo.CVT_Users_usr union all select u.usrGID, RTRIM(u.usrFirstName) + ' ' + RTRIM(u. usrLastName), cte.usrEmailAddress, cte.usrReportsTo from dbo.CVT_Users_usr u inner join cte on u.usrReportsTo = cte.usrGID ) select * from cte where Name = 'James Wilson'

-- 退货

usrGID名称usrEmailAddress usrReportsTo E1DAFC11-BE35-4730-9961-68EEF8D85DE4詹姆斯·威尔逊38922F83-4B6E-499E-BF4F-EF0B094F47F7 E1DAFC11-BE35-4730-9961-68EEF8D85DE4詹姆斯·威尔逊john@1234.com FB8F4939-3956-4834-9D89，D72AFB8BF3E0 E1DAFC11 -BE35-4730-9961-68EEF8D85DE4 詹姆斯·威尔逊 tom@1234.com 00000000-0000-0000-0000-000000000000

usrGID 和名称不应该与 usrEmailAddress 和 usrReportsTo 匹配吗？我尝试将 sql 更改为 cte.USRGID 和 cte.Name 但它给出了最大递归错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T21:33:10.153

使用 a`common table expression`您可以在一条 SQL 语句中生成完整的结果集（通过递归连接），从而完全避免任何循环。

带有关键字段的基本示例

```
create table #CVT_Users_usr (usrGid uniqueidentifier, usrEmailAddress varchar(50), usrFirstName varchar(20), usrLastName varchar(20), usrReportsTo uniqueidentifier)

insert #CVT_Users_usr values    
('38922F83-4B6E-499E-BF4F-EF0B094F47F7' , 'james@wilson.com','james','wilson', 'E1DAFC11-BE35-4730-9961-68EEF8D85DE4'),
('E1DAFC11-BE35-4730-9961-68EEF8D85DE4', 'john@doe.com','john','doe', 'FB8F4939-3956-4834-9D89-D72AFB8BF3E0'),
('FB8F4939-3956-4834-9D89-D72AFB8BF3E0', 'tom@doe.com','tom','doe' ,'00000000-0000-0000-0000-000000000000'),
('FE6899A5-63BA-42B7-A70E-011711A5FAC6', 'ken@ken.com','ken', 'kenneths', 'FB8F4939-3956-4834-9D89-D72AFB8BF3E0')

declare @id uniqueidentifier
select @id = usrGid from #CVT_Users_usr where usrFirstName='james' and usrLastName='wilson'

;with cte as
(
select usrGid, usrEmailAddress, usrFirstName, usrLastName, usrReportsTo from #CVT_Users_usr
union all
select u.usrGid,  cte.usrEmailAddress, cte.usrFirstName, cte.usrLastName, cte.usrReportsTo 
from #CVT_Users_usr u
    inner join cte on u.usrReportsTo= cte.usrGid
)
    select usrFirstName + ' ' + usrLastName, usrEmailAddress  from cte
    where usrGid=@id

drop table #CVT_Users_usr 
```

# c# - ScrollViewer 对 Grid.Row 位置没有反应

> ID：12045484
> 
> 赞同：0
> 
> 时间：2012-08-20T21:29:54.120
> 
> 标签：c#, .net, xaml, windows-8, visual-studio-2012

我的 StackPanel 和 ScrollViewer 似乎并没有在 Grid.Row 位置结束。我正在制作一个 Metro 应用程序，因此网格以及所有元素都必须是动态的。

编码：

```
<Grid Background="#FFE4E4E4">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.5*"/>
            <ColumnDefinition Width="0.5*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="0.5*"/>
            <RowDefinition Height="0.5*"/>
        </Grid.RowDefinitions>

        <!--News/Leaderboard Feed-->
        <StackPanel Grid.Column="0" Grid.Row="0">

        </StackPanel>

        <!--Marketplace Feed-->
        <StackPanel Grid.Column="0" Grid.Row="1">

        </StackPanel>

        <!--Detailed Marketplace Account-->
        <StackPanel Grid.Column="1" Grid.Row="1">

        </StackPanel>

        <!--Marketplace View-->
        <StackPanel Grid.Column="1" Grid.Row="0" VerticalAlignment="Top">
            <ScrollViewer VerticalAlignment="Top">
                <!--Allows scrolling-->

                <GridView x:Name="MarketplaceFeed" ItemsSource="{Binding StockList}" ItemTemplate="{StaticResource MarketplaceFeedTemplate}" VerticalAlignment="Top">
                    <!--Displays the stock markets the user is interested in.-->
                    <GridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapGrid Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </GridView.ItemsPanel>
                </GridView>

            </ScrollViewer>
        </StackPanel>

    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:40:43.650

您应该将*ScrollViewer*放在外面。这将自动适应网格，并且其中的任何内容都将得到滚动处理。

```
 <!--Marketplace View-->
    <ScrollViewer VerticalAlignment="Top" Grid.Column="1" Grid.Row="0">
        <StackPanel VerticalAlignment="Top">
            <!-- other content -->
        </StackPanel>
    </ScrollViewer> 
```

# asp.net-mvc - MVC - 长时间运行任务后更新视图

> ID：12045487
> 
> 赞同：1
> 
> 时间：2012-08-20T21:30:13.347
> 
> 标签：asp.net-mvc

我想显示长时间运行的任务的结果，并且仍然有响应式网站。我正在计算几个结果，每次计算需要几秒到 10 多秒。如果我将所有内容都放在控制器中，该站点将死机 10 - 20 秒，然后结果将显示在视图中。

而不是这个，我想立即显示一个视图并从计算开始。每次计算完成后，应更新站点（或至少应更新状态并在最后显示结果）。如果所有计算都可以并行运行，那就太好了。

我该如何实施？是否有已经可用的样品？

PS：我看过几个网站，您可以在其中搜索结果（例如机票），其中网站在搜索期间会更新。也许这是相似的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:59:41.327

您可以使用异步方法和控制器来代替默认的同步方法和控制器。假设你在谈论 asp.net mvc，你可以先看看这里[http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)和这里[http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetmvc4_topic5.aspx](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetmvc4_topic5.aspx)

希望有帮助，如果没有，请让我知道。

# linux - x86 Linux 上的任何 GLES 示例，用 C++ 编写吗？

> ID：12045488
> 
> 赞同：14
> 
> 时间：2012-08-20T21:30:18.827
> 
> 标签：linux, opengl-es, opengl-es-2.0, xorg

我正在为带有 Xorg 的 x86 Linux 上的 C++（或 C）寻找 GLES2 示例的良好来源。我能找到的示例都在 iOS 的 Objective C、Android 的 Java 或 WebGL 的 JavaScript 中。Kronos 网站有一个“教程”部分，其中包含两行“我们的教程索引将放在此处”。鉴于 GLES2 已有 5 年历史，我对那里突然出现的内容不抱太大希望。

我已经非常了解 OpenGL。我只是想要一些方便的来源来复制和粘贴上下文设置代码，真的。我在哪里可以找到类似的东西？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T21:49:42.140

梅萨演示！

*   [http://cgit.freedesktop.org/mesa/demos](http://cgit.freedesktop.org/mesa/demos)
*   [http://cgit.freedesktop.org/mesa/demos/tree/src/egl/opengles2](http://cgit.freedesktop.org/mesa/demos/tree/src/egl/opengles2)
*   [http://cgit.freedesktop.org/mesa/demos/tree/src/egl/opengles2/es2tri.c](http://cgit.freedesktop.org/mesa/demos/tree/src/egl/opengles2/es2tri.c)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-06T19:08:37.523

**GLFW，台面，Ubuntu 16.04 AMD64**

我不确定 GLUT 是否支持 GLES，但[GLFW](http://www.glfw.org/faq.html#what-is-glfw)支持，极大地简化了窗口管理。

```
sudo apt-get install libglfw3-dev libgles2-mesa-dev
gcc glfw_triangle.c -lGLESv2 -lglfw 
```

输出：

![](../Images/a81d4859b9cb73606161c99eab59f78c.png)

资源：

```
#include <stdio.h>
#include <stdlib.h>

#define GLFW_INCLUDE_ES2
#include <GLFW/glfw3.h>

static const GLuint WIDTH = 800;
static const GLuint HEIGHT = 600;
static const GLchar* vertex_shader_source =
    "#version 100\n"
    "attribute vec3 position;\n"
    "void main() {\n"
    "   gl_Position = vec4(position, 1.0);\n"
    "}\n";
static const GLchar* fragment_shader_source =
    "#version 100\n"
    "void main() {\n"
    "   gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n"
    "}\n";
static const GLfloat vertices[] = {
        0.0f,  0.5f, 0.0f,
        0.5f, -0.5f, 0.0f,
    -0.5f, -0.5f, 0.0f,
};

GLint common_get_shader_program(const char *vertex_shader_source, const char *fragment_shader_source) {
    enum Consts {INFOLOG_LEN = 512};
    GLchar infoLog[INFOLOG_LEN];
    GLint fragment_shader;
    GLint shader_program;
    GLint success;
    GLint vertex_shader;

    /* Vertex shader */
    vertex_shader = glCreateShader(GL_VERTEX_SHADER);
    glShaderSource(vertex_shader, 1, &vertex_shader_source, NULL);
    glCompileShader(vertex_shader);
    glGetShaderiv(vertex_shader, GL_COMPILE_STATUS, &success);
    if (!success) {
        glGetShaderInfoLog(vertex_shader, INFOLOG_LEN, NULL, infoLog);
        printf("ERROR::SHADER::VERTEX::COMPILATION_FAILED\n%s\n", infoLog);
    }

    /* Fragment shader */
    fragment_shader = glCreateShader(GL_FRAGMENT_SHADER);
    glShaderSource(fragment_shader, 1, &fragment_shader_source, NULL);
    glCompileShader(fragment_shader);
    glGetShaderiv(fragment_shader, GL_COMPILE_STATUS, &success);
    if (!success) {
        glGetShaderInfoLog(fragment_shader, INFOLOG_LEN, NULL, infoLog);
        printf("ERROR::SHADER::FRAGMENT::COMPILATION_FAILED\n%s\n", infoLog);
    }

    /* Link shaders */
    shader_program = glCreateProgram();
    glAttachShader(shader_program, vertex_shader);
    glAttachShader(shader_program, fragment_shader);
    glLinkProgram(shader_program);
    glGetProgramiv(shader_program, GL_LINK_STATUS, &success);
    if (!success) {
        glGetProgramInfoLog(shader_program, INFOLOG_LEN, NULL, infoLog);
        printf("ERROR::SHADER::PROGRAM::LINKING_FAILED\n%s\n", infoLog);
    }

    glDeleteShader(vertex_shader);
    glDeleteShader(fragment_shader);
    return shader_program;
}

int main(void) {
    GLuint shader_program, vbo;
    GLint pos;
    GLFWwindow* window;

    glfwInit();
    glfwWindowHint(GLFW_CLIENT_API, GLFW_OPENGL_ES_API);
    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 2);
    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 0);
    window = glfwCreateWindow(WIDTH, HEIGHT, __FILE__, NULL, NULL);
    glfwMakeContextCurrent(window);

    printf("GL_VERSION  : %s\n", glGetString(GL_VERSION) );
    printf("GL_RENDERER : %s\n", glGetString(GL_RENDERER) );

    shader_program = common_get_shader_program(vertex_shader_source, fragment_shader_source);
    pos = glGetAttribLocation(shader_program, "position");

    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    glViewport(0, 0, WIDTH, HEIGHT);

    glGenBuffers(1, &vbo);
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
    glVertexAttribPointer(pos, 3, GL_FLOAT, GL_FALSE, 0, (GLvoid*)0);
    glEnableVertexAttribArray(pos);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    while (!glfwWindowShouldClose(window)) {
        glfwPollEvents();
        glClear(GL_COLOR_BUFFER_BIT);
        glUseProgram(shader_program);
        glDrawArrays(GL_TRIANGLES, 0, 3);
        glfwSwapBuffers(window);
    }
    glDeleteBuffers(1, &vbo);
    glfwTerminate();
    return EXIT_SUCCESS;
} 
```

代码的关键行是：

```
#define GLFW_INCLUDE_ES2
#include <GLFW/glfw3.h> 
```

`GLFW_INCLUDE_ES2`记录在：[http](http://www.glfw.org/docs/latest/build_guide.html#build_macros) ://www.glfw.org/docs/latest/build_guide.html#build_macros 并且快速查看源代码表明它转发给 GLES：

```
 #elif defined(GLFW_INCLUDE_ES2)
  #include <GLES2/gl2.h>
  #if defined(GLFW_INCLUDE_GLEXT)
   #include <GLES2/gl2ext.h>
  #endif 
```

这个源似乎是 GLES 和 OpenGL 的公共子集（就像 GLES 的大部分），`-lGL`如果我们删除`#define GLFW_INCLUDE_ES2`.

如果我们添加 GLES 中没有的东西，比如立即渲染`glBegin`，链接会按预期失败。

另请参阅：[如何在 Linux 上开发 OpenGL ES (GLES) 2.0 应用程序？](https://stackoverflow.com/questions/3809236/opengl-es-2-0-on-linux)

致谢：[genpfult](https://stackoverflow.com/questions/3809236/how-to-develop-opengl-es-gles-2-0-applications-on-linux/39356268?noredirect=1#comment66052787_39356268)使代码更加正确。

**ARM Mali OpenGL ES SDK**

*   下载地址：http: [//malideveloper.arm.com/resources/sdks/opengl-es-sdk-for-linux/](http://malideveloper.arm.com/resources/sdks/opengl-es-sdk-for-linux/)
*   在浏览器上打开文档 HTML
*   按照“快速入门指南”，很简单

![](../Images/21a923cecbe934ee9433e726b4939bf2.png)

包含几个有趣的开源示例 + 窗口系统样板 (X11 + EGL)。

构建系统支持 ARM / Mali SoC 的简单交叉编译，但我还没有测试过。

包含的关键组件似乎是“OpenGL ES Emulator” [http://malideveloper.arm.com/resources/tools/opengl-es-emulator/](http://malideveloper.arm.com/resources/tools/opengl-es-emulator/)，它“将 OpenGL ES 3.2 API 调用映射到 OpenGL API”。但这不附带源代码，仅预编译。

使用似乎是允许的自定义企业 EULA，但是是的，请咨询您的律师。

在 SDK v2.4.4 上测试。

# python - 是否存在 datetime.fromtimestamp 使用 pytz 返回错误结果的情况？

> ID：12045490
> 
> 赞同：3
> 
> 时间：2012-08-20T21:30:20.060
> 
> 标签：python, timezone, pytz

`pytz`要求您使用该`.astimezone`方法进行与 UTC 的所有时间转换。然而，在一种特殊情况下——`datetime.fromtimestamp`看起来你应该能够使用 Python 库的 datetime 方法。

它似乎在这里工作：

```
>>> import datetime
>>> import pytz
>>> ambigtime = 1352017800  # http://www.wolframalpha.com/input/?i=1352017800+unix+time+in+Los+Angeles
>>> amla = pytz.timezone('America/Los_Angeles')
>>> datetime.datetime.fromtimestamp(ambigtime, tz=amla)
datetime.datetime(2012, 11, 4, 1, 30, tzinfo=<DstTzInfo 'America/Los_Angeles' PDT-1 day, 17:00:00 DST>)
>>> datetime.datetime.fromtimestamp(ambigtime + 3600, tz=amla)
datetime.datetime(2012, 11, 4, 1, 30, tzinfo=<DstTzInfo 'America/Los_Angeles' PST-1 day, 16:00:00 STD>) 
```

是否存在时区`datetime.fromtimestamp`无法为您提供正确结果的情况`pytz`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:34:31.430

据我所知，`pytz.timezone()`会给你一个[tzinfo](http://docs.python.org/library/datetime.html#datetime.tzinfo)的实例（或者更确切地说是它的一个子类），因此完全可以与`datetime.fromtimestamp()`.

只要`pytz`更新了 zoneinfo 文件，您就可以使用该方法创建本地化日期时间。但是，使用该方法在两个区域之间转换日期时间确实更容易`astimezone()`。如果我是正确的，它基本上会`tzinfo`在日期时间上切换属性。

# python - 使用 Python 将文件从有凭据的客户端发布到 AWS

> ID：12045491
> 
> 赞同：1
> 
> 时间：2012-08-20T21:30:29.137
> 
> 标签：python, post, https, amazon-web-services, boto

我正在编写一个客户端应用程序来将文件发布到我们的 S3 实例，但我没有得到任何响应，并且在使用下面的代码时文件没有发布。它通过点击我们的服务器获取凭据来工作，然后客户端使用详细信息连接到我们的 s3 实例（或者如果这正在工作）并上传文件。

```
import httplib, urllib, json

setup_headers = {"Content-Type": "application/json", "Accept": "text/plain"}
conn = httplib.HTTPSConnection("www.server.address")
conn.request("GET", "/api/data/upload-request/", '', setup_headers)

response = conn.getresponse()

response_data = response.read()
print response_data

aws_setup = json.loads(response_data)

aws_setup.update({'filename':'fname.zip', 'file': open('fname.zip', 'rb').read()})

aws_params = urllib.urlencode(aws_setup)
aws_headers = {'Content-Type':'multipart/form-data'}
aws_conn = httplib.HTTPSConnection("address.s3.amazonaws.com")
aws_conn.request("POST", "", aws_params, aws_headers)

aws_conn.close()
conn.close() 
```

从初始连接请求对象返回的内容：

```
{"AWSAccessKeyId": "correct key", "success_action_redirect": "http://our.web.address/api/upload-success/", "acl": "private", "key": "${filename}", "signature": "signature", "policy": "encoded policy", "Content-Type": "application/zip"} 
```

由于多部分表单数据的问题，这失败了。我遇到的新问题是我在 encode_multipart_formdata 中遇到错误。如果我传入一个文件类型对象，它将尝试一个失败的字符串连接。如果我传入一个字符串，它显然不会拉入文件内容，并且我不想将整个文件内容读入内存来传递。代码和两个错误报告如下：

```
import httplib
import json
import mimetypes

def post_multipart(host, selector, fields, files):
    """
    Post fields and files to an http host as multipart/form-data.
    fields is a sequence of (name, value) elements for regular form fields.
    files is a sequence of (name, filename, value) elements for data to be uploaded as files
    Return the server's response page.
    """
    content_type, body = encode_multipart_formdata(fields, files)
    h = httplib.HTTPSConnection(host)
    header = {
        'User-Agent': 'Mozilla/5.0',
        'Content-Type': content_type
        }
    h.request('POST', selector, body, header)
    res = h.getresponse()
    return res.status, res.reason, res.read()

def encode_multipart_formdata(fields, files):
    """
    fields is a sequence of (name, value) elements for regular form fields.
    files is a sequence of (name, filename, value) elements for data to be uploaded as files
    Return (content_type, body) ready for httplib.HTTP instance
    """
    BOUNDARY = '----------ThIs_Is_tHe_bouNdaRY_$'
    CRLF = '\r\n'
    L = []
    for key, value in fields.iteritems():
        L.append('--' + BOUNDARY)
        L.append('Content-Disposition: form-data; name="%s"' % key)
        L.append('')
        L.append(value)
    for (key, filename, value) in files:
        L.append('--' + BOUNDARY)
        L.append('Content-Disposition: form-data; name="%s"; filename="%s"' % (key, filename))
        L.append('Content-Type: %s' % get_content_type(filename))
        L.append('')
        L.append(value)
    L.append('--' + BOUNDARY + '--')
    L.append('')
    body = CRLF.join(L)
    content_type = 'multipart/form-data; boundary=%s' % BOUNDARY
    return content_type, body

def get_content_type(filename):
    return mimetypes.guess_type(filename)[0] or 'application/octet-stream'

setup_headers = {"Content-Type": "application/json", "Accept": "text/plain"}
conn = httplib.HTTPSConnection("our.server.address")
conn.request("GET", "/api/data/upload-request/", '', setup_headers)

response = conn.getresponse()

response_data = response.read()

aws_setup = json.loads(response_data)
status, reason, data = post_multipart("address.s3.amazonaws.com", "", aws_setup, [['upload_file.zip', 'upload_file.zip', open("upload_file.zip")]])
print status
print reason
print data
conn.close() 
```

文件类型对象的错误如上面的代码所示：

```
TypeError: sequence item 32: expected string or Unicode, file found 
```

传入字符串时出错：

```
400
Bad Request
<?xml version="1.0" encoding="UTF-8"?>
<Error><Code>InvalidArgument</Code><Message>POST requires exactly one file upload per request.</Message><ArgumentValue>0</ArgumentValue><ArgumentName>file</ArgumentName><RequestId>9AA6411E13792EC6</RequestId><HostId>EkkcNUkIWIVk8wbhEplhp0L+Rqsa089TD0VusgMUQsQJo3rUUf/zbP+k67fEzolc</HostId></Error> 
```

使用 boto（我开始工作）执行此操作需要让我们的私钥对客户端可见。

# iphone - 是否有简化使用音频单元的开源框架？

> ID：12045494
> 
> 赞同：3
> 
> 时间：2012-08-20T21:31:07.910
> 
> 标签：iphone, ios, ipad, core-audio, audiounit

我只需要一个带有简单播放和停止功能的处理回调的 IO 单元。

Apple 有这个巨大的 MixerHost 演示，其中包含数千行代码，只是为了播放两个混合音频文件。

似乎 99% 的代码都是用于设置的样板文件。

也许有一个开源框架可以处理这个样板，这样您就可以设置您的音频会话并开始使用 IO 单元构建一个简单的处理图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:29:32.453

看看[Novocaine](http://alexbw.github.com/novocaine/)，它是一种用于 iPhone、iPad 和 Mac OS X 上的高性能音频的镇痛剂。在 iOS 和 Mac OS X 中使用 Audio Units 实现真正的快速音频很难，而且会让你伤痕累累。过去需要几天的时间现在只需几行代码即可完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:12:14.873

只是在@fannheyward 的回答中添加一点，[Novocaine](http://alexbw.github.com/novocaine/)绝对是要走的路。关键优势是您可以传入一个 Objective-C 块，每次音频子系统准备好处理一个音频块时都会执行该块。它抽象出大部分困难的样板代码，让您专注于 DSP。

# ruby-on-rails - ActiveRecord::ConnectionTimeoutError 偶尔发生

> ID：12045495
> 
> 赞同：22
> 
> 时间：2012-08-20T21:31:08.827
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.1, database-connection, connection-timeout

每当我有一个使用 ActiveRecord 的应用程序时，我都会得到这个 ConnectionTimeoutError - 但总是在某个未知的时间段之后

```
ActiveRecord::ConnectionTimeoutError (could not obtain a database connection within 5 seconds.  The max pool size is currently 30; consider increasing it.): 
```

之前设置为5，我们已经增加了，不可能同时使用30个连接。我们使用 ActiveRecord 的唯一目的是我们的会话存储。

我们的 database.yml 文件如下所示：

```
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 30
  timeout: 5000 
```

（测试和生产设置相同）

* * *

我一直在谷歌上搜索这个事件，刚刚看到这个帖子：

[https://groups.google.com/forum/#!msg/copenhagen-ruby-user-group/GEHgi_WudmM/gnCiwWqmVfMJ](https://groups.google.com/forum/#!msg/copenhagen-ruby-user-group/GEHgi_WudmM/gnCiwWqmVfMJ)

哪个提到 ActiveRecord 完成后不会将连接检查回池中？真的吗？我需要手动管理连接吗？

我很感激任何建议！

**编辑**我可能应该提到我正在运行 Rails 3.1.3

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T22:31:31.837

Rails 有一个名为的中间件`ActiveRecord::ConnectionAdapters::ConnectionManagement`，它会清除每个请求的活动连接，这样它们就不会留下来。检查你的中间件以确保你有这个（默认情况下），运行“rake 中间件”。您不必手动管理连接来回答您的最后一个问题。

在您的控制台中运行它

```
 ActiveRecord::Base.clear_active_connections! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-13T14:32:55.240

我在我的 Sinatra 应用程序上使用了这段代码

```
after do
  ActiveRecord::Base.clear_active_connections!
end 
```

这解决了我的问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-06T12:33:12.587

> 也适用于 Rails 5，因为 Puma 是默认服务器。

如果您使用 Puma、Phushion Passenger 等线程服务器，它们会为同一个应用程序创建多个线程。通过同时执行每个传入的请求，从而使您的应用程序运行得更快。

确保池大小等于或大于线程数。当我的线程很少给我时，我遇到了一个问题`ActiveRecord::ConnectionTimeoutError`，而且这个问题很模糊，因为它偶尔会发生一次，并不经常发生。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-17T19:03:27.577

我在使用 Sinatra 应用程序时也遇到了类似的问题，我补充说

```
after do
  ActiveRecord::Base.clear_active_connections!
end 
```

到我的应用程序控制器，它解决了我的问题。

这种结构称为过滤器，它在每次请求后进行评估。

我不确定应用程序实际发生了什么，但我怀疑每次请求后连接都没有关闭。

# c# - WCF 服务和 Windows 服务

> ID：12045499
> 
> 赞同：1
> 
> 时间：2012-08-20T21:31:21.233
> 
> 标签：c#, asp.net, wcf, service

我有一个用作远程文件/文件夹浏览器的 WCF 服务。我们还计划有一个 Windows 服务，它将作为 3 个功能。

1.  Windows 服务将启动 WCF 服务，以便它可以完成其工作（同一项目的一部分）
2.  Windows 服务将基于计时器+许多其他类似的方法每隔几分钟将一些数据上传到 SQL 服务器
3.  WCF 将通过 WCF 接收 asp.net 客户端请求的运行方法的请求，然后要求 windows 服务运行方法并将结果返回给 WCF，并将结果传回给 ASP.net。

第 3 项是问题所在。Windows 服务应该如何与在同一台机器上运行并且本质上是同一个应用程序运行的 WCF 服务（和 Vice-Versa）服务通信。又是在 WCF 上吗？

可能我正在做这一切都错了。希望有人可以提供帮助

谢谢达摩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:41:51.063

WCF 服务可以托管在 Windows 服务中。请参阅[http://msdn.microsoft.com/en-us/library/ms750530.aspx](http://msdn.microsoft.com/en-us/library/ms750530.aspx)。他们给出的具体示例是针对控制台应用程序的，但同样的概念也适用。

自托管时，您可以指定在客户端连接到服务时实例化的类型，或者传递客户端在访问服务时将使用的实例。在任何一种情况下，您都可以实例化相同的类或访问传递给 ServiceHost 的实例以调用服务上的方法，尽管它们不会通过 WCF 管道。WCF 服务类可以获取对 Windows 服务类的引用并访问其上的方法，以允许发生回调而无需再次通过 WCF 堆栈。

或者，如果您不希望自托管或您的应用程序在服务中使用 WCF 特定调用，您可以像在桌面应用程序上一样在服务中创建 wcf 客户端。只需像往常一样添加服务引用并使用回调跳回 Windows 服务代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:11:06.183

第一个答案是正确的。我建议还考虑以下事项：如果您没有 Windows 服务来托管该 wcf 服务，那么继续在那里公开新的服务。还有其他选项，但这些选项正在降低，因此 WCF 是最简单和最安全的选项。同时 - 它非常优雅的解决方案。

# wpf - 使用 linq 和 ADO.NET 和 Oracle 更新记录

> ID：12045504
> 
> 赞同：0
> 
> 时间：2012-08-20T21:31:57.003
> 
> 标签：wpf, linq, oracle11g, ado.net-entity-data-model

我创建了一个 ADO.NET 实体数据模型，并使用 linq 更新/编辑我的 oracle 数据库。

```
using (Entities ent = new Entities())
{
    RUSHPRIORITYRATE rp = new RUSHPRIORITYRATE();
    rp.RATE = rate;
    var query = from j in ent.RUSHPRIORITYRATEs
                        select j;
    List<RUSHPRIORITYRATE> list = query.ToList();
    if (list.Count == 0)
    {
        ent.AddToRUSHPRIORITYRATEs(rp);
        ent.SaveChanges();
    }
    else
    {
        foreach (RUSHPRIORITYRATE r in query)
        {
            r.RATE = rp.RATE;
        }
        ent.SaveChanges();
    }

} 
```

我有一种方法可以添加或更新始终有一条记录的表。记录的值只有在存在一条记录时才会更新。添加到表中没有问题，但是我通过 MSDN 查找了如何更新 recores，并且“ent”似乎没有解决方案所需的“submitchanges”方法。运行这个，我得到错误：“属性'RATE'是对象的关键信息的一部分，不能修改。”

# html-table - Struts 1 - 如何获取表行值以在另一个 JSP 页面中处理

> ID：12045515
> 
> 赞同：0
> 
> 时间：2012-08-20T21:33:05.070
> 
> 标签：html-table, struts

我遇到了这个麻烦：我有一个`<table>`填充`<logic:iterate>`的（单击以编辑相应的值。

事实是，一旦单击链接，我不知道如何从该行中获取值并将它们传递给另一个 JSP 页面。

任何想法/示例/实现？！？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:40:18.130

创建链接的代码（在您的表呈现 JSP 中）可以将该行的对象 ID 作为查询参数嵌入到链接中，例如`?objectId=13AB73C`. （出于安全原因，最好嵌入 ID 的唯一散列而不是实际的数据库 ID）。然后可以从请求参数中获取该 id。

获得该行的对象 ID 后，您可以从数据库中加载数据以用于您的编辑页面。

# c# - 如何延迟调用列表中的属性？

> ID：12045518
> 
> 赞同：1
> 
> 时间：2012-08-20T21:33:07.590
> 
> 标签：c#, wpf, xaml

列表中的一个属性需要很长时间才能加载（即时创建缩略图）。如何在列表中显示其余属性并在后台加载长处理属性。

以下示例显示了这种情况。我希望能够立即显示短名称和可用的长名称。

```
public partial class MainWindow 
{
    public MainWindow()
    {
        InitializeComponent();

        var list = new List<Example> {
            new Example {ShortName = "A", LongName = "Z"}, 
            new Example {ShortName = "B", LongName = "ZZ"}, 
            new Example {ShortName = "C", LongName = "ZZZ"}};
        DataContext = list;
    }
}

public class Example : INotifyPropertyChanged
{
    private String _shortName;
    public String ShortName
    {
        get { return _shortName; }
        set
        {
            if (_shortName == value) return;
            _shortName = value;
            NotifyPropertyChanged("ShortName");
        }
    }

    private String _longName;
    public String LongName
    {
        get
        {
            System.Threading.Thread.Sleep(1000);
            return _longName;
        }
        set
        {
            if (_longName == value) return;
            _longName = value;
            NotifyPropertyChanged("LongName");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string p)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(p));
    }
} 
```

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ListBox ItemsSource="{Binding}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Label>ShortName: </Label>
                        <Label Content="{Binding ShortName}" />
                        <Label> LongName:</Label>
                        <Label Content="{Binding LongName}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>

        </ListBox>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T21:35:59.423

您可以使用*[IsAsync](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.isasync.aspx)*绑定属性异步加载该属性：

```
<Label Content="{Binding Path=LongName,IsAsync=true}" /> 
```

您还可以使用*Fallback*属性来显示类似于*Loading*的消息，直到填充实际值。

# xml - 使用 Web Deploy 3.0 在 IIS 中显示下拉列表

> ID：12045521
> 
> 赞同：4
> 
> 时间：2012-08-20T21:33:17.610
> 
> 标签：xml, visual-studio-2010, iis, web-deployment, webdeploy

我正在尝试使用 web deploy 3.0 显示一个下拉列表。我对整个网络部署过程相当陌生，但基本上这就是我想要做的：

1.  项目 -> 构建部署包
2.  在 IIS 中，创建一个新网站并单击“导入应用程序”
3.  我应该看到其中一个参数的 DropDownList。

[在阅读了有关该主题的几篇文章后，尤其是本文](http://msdn.microsoft.com/en-us/library/ff398068.aspx)的摘录：

> 枚举 - 枚举允许您将用户的输入限制为离散的可能值列表。大多数 UI 会将其实现为下拉列表框，其中 [...]。枚举的语法是：

```
<parameter name="Enumeration Parameter"> 
    <parameterValidation type="Enumeration" validationString="value1,value2,value3,value4" /> 
</parameter> 
```

而且，出于测试目的，我将上面的代码复制并粘贴到了我的 parameters.xml 文件中，该文件适用于任何其他类型的参数。枚举参数出现了，但它只是一个文本框——没有下拉列表。这只是 IIS 导入界面的预期行为还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-31T19:09:54.243

这篇文章可能很老了。但如果有人遇到同样的问题，请将 type="Enumeration" 更改为 kind="Enumeration"。所以你的标签应该像

```
 <parameter name="Enumeration Parameter">
  <parameterValidation kind="Enumeration" validationString="values1,value2,value3"/>
  </parameter> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:47:10.773

经过一番调查，我发现问题在于 Web Deploy 没有将`parameterValidation`节点添加到部署包中。我能够通过解压缩部署包、手动添加 XML 进行验证并将其压缩备份来解决此问题。不过，我很想找到一种不那么老套的方法来做到这一点。

# java - 需要用于 Java 应用程序的嵌入式数据库

> ID：12045527
> 
> 赞同：-1
> 
> 时间：2012-08-20T21:34:13.577
> 
> 标签：java, database

我正在使用 java 制作一个应用程序，我需要一个嵌入式数据库来将数据存储在计算机上的文件中。

早些时候，我为此使用了一个 .txt 文件，在该文件中我使用正则表达式来访问所需的数据，但我发现它使用起来非常复杂。

请提出一些方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:55:11.103

如果您正在寻找可以在嵌入式模式下使用的数据库系统，有很多选择，搜索这些关键字并根据您的需要决定，但是我会投票给[H2](http://www.h2database.com/html/main.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:56:49.783

我不明白你的期望。

当您想将数据存储在一个地方时的选择：

*   本地应用程序和远程数据库
*   Web 应用程序和远程数据库（都可以部署在同一台远程机器上）

或者当您想在每台机器中分别存储数据时的选项：

*   告诉某人安装本地数据库（你不想要的）
*   将数据存储在 TXT 或 XML 等本地文件中
*   等等

XML 是一种提供以通用格式将应用程序数据或配置存储在本地文件中的技术。读取文件既快速又直观。

如果您很固执，并且必须将数据存储在称为 DATABASE 的东西中，请使用 BaseX 或 eXist 之类的工具（这是 Java XML 数据库）。这些工具不需要安装 - 只需与应用程序集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:36:37.610

MySQL 需要安装。听起来你想要的是[SQLight](http://www.sqlite.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T21:51:22.313

你的问题很模糊。我不知道你的目标是什么，所以我只列出一些想到的选项。

如果您不关心正在分发的数据，您可以使用任何类型的分布式/嵌入式数据库：

*   [sqllite](http://www.sqlite.org/)
*   [sql server 紧凑型](http://www.microsoft.com/en-us/download/details.aspx?id=17876)

这是其他一些可能有用的问题：[SQLite 的替代品？](https://stackoverflow.com/questions/417917/alternatives-to-sqlite?lq=1)

问问自己是否真的需要将数据存储在数据库中也是一个好主意。有时，一个好的旧文本文件可以完成工作。

如果您需要将所有朋友的数据集中在一个地方，并且可以负担得起网络托管服务，您可以注册一个提供 MySQL 的主机，并使用您的应用程序通过 Internet 将数据插入您的 MySQL 数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T22:27:50.670

现代 Java JDK（不是 JRE）包括[JavaDB](http://www.oracle.com/technetwork/java/javadb/overview/index.html)，它是 Java 的嵌入式 SQL 数据库。使用起来很简单。

如果您没有安装 JDK，您可以轻松地将其与您的应用程序捆绑在一起，只需包含适当的 jar 文件即可。JavaDB 是[Apache Derby DB](http://db.apache.org/derby/)的副本。

# python - 如果我将一个类的第二个实例赋予一个包含现有实例的相同变量，会发生什么？

> ID：12045539
> 
> 赞同：4
> 
> 时间：2012-08-20T21:35:07.043
> 
> 标签：python, class, variables, instantiation

除了举例之外，我不知道如何问这个问题。

假设我有一堂课：

```
class Foo():
    pass 
```

我创建了一个实例：

```
foo = Foo()
    ... 
```

然后，作为我的程序的一部分，我重新创建具有相同名称的相同实例（重新开始游戏，但在另一个名为 Bar 的单独类中保留总分）。

```
foo = Foo()
    ... 
```

（我不知道正确的术语）我还没有编写任何代码来消除第一个实例。第一个实例是消除还是覆盖？它似乎适用于一个小程序。如果我多次这样做，我会遇到麻烦吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T21:48:38.537

让我试着用图形来解释它。

当你这样做

```
foo = Foo() 
```

第一次，您在内存中创建一个类型的*对象*（使用），同时创建一个指向该对象的*变量：*`Foo``Foo()`

 *![在此处输入图像描述](../Images/c9f0fe5fcd2ccd4dfb518a911fadc4d3.png)

当你执行

```
foo = Foo() 
```

第二次，您正在创建*另一个对象*。同时，您使用*相同的变量*并将其指向新对象。当然，变量将不再指向前一个对象：

![在此处输入图像描述](../Images/c88143aa37abc6ca3795282ba73dc729.png)

现在，第一个对象会发生什么？好吧，如果您的程序中*没有其他变量*指向它，那它是没有用的，因为您不能再访问它了！*在这种情况下，当解释器运行垃圾收集器*时，对象将被销毁/从内存中释放。垃圾收集器是一种算法，它将查找每个不可访问的对象并将其删除。垃圾收集器并非每次都运行，因此对象被销毁可能需要一段时间。

所以，在你的场景中，会发生什么：

*   对第一个对象的*引用*被覆盖，但该对象将存在。如果另一个变量指向它，它不会被销毁。
*   但是，如果没有其他变量指向它，则该对象将在将来的某个时间点被消除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T21:39:43.983

## 基本的（可能是足够的）答案：

该变量`foo`被分配给一个新实例，该实例对前一个实例一无所知。它基本上与以下内容相同：

```
a = 1
a = 2 
```

在某个时候（可能迟早），旧实例`foo`将被垃圾收集（除非您在其他地方仍然有对它的引用）。

理解这一点的简单方法是，`foo`名称只是指向实际对象的指针。如果您`foo`指向一个新对象，则`foo`指向一个新对象，句号。

## 相关细节：单例模式

有一些设计模式（`singleton`想到的那个）可能会改变这种行为。

基本上， `Foo.__new__`classmethod 决定了当你做的时候你会得到什么`Foo()`。

可以构建此方法，使其始终返回您创建的第一个实例，但这显然是题外话。

这是一个示例实现：

```
class Singleton(object):
    _instance = None
    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = super(Singleton, cls).__new__(cls, *args, **kwargs)
        return cls._instance 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T21:41:51.000

第一个`foo = Foo()`：

它创建一个新的实例对象并将其分配给`foo`，see`foo`只是对返回的对象的引用`Foo()`

第二`foo = Foo()`

它创建一个新的实例对象并将其分配给`foo`，并且先前的实例对象`Foo()`被垃圾收集，因为没有指向它的变量。

例子：

```
>>> class Foo:
...   pass
... 
>>> 
>>> foo=Foo()  
>>> id(foo)   #foo points to an object with id 3077166220L
3077166220L
>>> foo=Foo()  #now foo points to some other object and the object with id 3077166220L is garbage collected
>>> id(foo)
3077166252L  
>>> 
>>> 
>>> temp=foo      #now both foo and temp point to same object i.e 3077166252L  
>>> foo=Foo()     #assign foo to a new object
>>> id(temp)      #temp still points 3077166252L ,so it's not garbage collected   
3077166252L 
>>> id(foo)       #it points to a new object   
3077166092L 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T21:47:34.337

有几点需要注意。

1.  名称“foo”是您的代码中定义的变量。在 Python 中，变量没有类型，除非你给它赋值。
2.  当您说要为`foo = Foo()`变量分配`foo`类型对象的实例时`Foo`。通过调用不带任何参数`Foo()`的类的构造函数来创建此实例。`Foo`
3.  每次调用`Foo()`都会创建一个新实例。因此，`foo = Foo()`在您的代码中重复将创建`Foo`该类的多个实例，并将它们分配给变量`foo`。变量指向的早期实例`foo`将不再具有引用并且可以被垃圾收集（假设您同时没有为这些实例分配任何其他引用）。

因此，您用来描述问题的词语

> 创建与现有实例同名的类的第二个实例

其实是不对的。因为您没有创建另一个“同名”实例。您正在创建另一个实例，并将其分配给“相同的变量”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T21:39:54.133

1.  Python中没有覆盖。
2.  编写时`Foo()`会创建一个新实例（按顺序调用类方法`__new__`和实例方法）`__init__`
3.  当没有指向类实例的指针时，Python 的垃圾收集器最终将删除该实例（并`__del__`在该实例上调用实例方法）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T21:40:02.777

你最终绑定了一个新的 Foo 对象`foo`，你的旧`Foo`对象将失去一个引用。如果一个对象没有任何引用，那么它将在下一次垃圾回收中被回收。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-20T21:40:11.837

第二个将覆盖第一个。（它取代了模块全局字典中的名称，所有全局变量、函数和类都存储在其中）。

但是，您创建的 foo = Foo() 将继续使用创建时的原始实现，直到您创建新的 foo = Foo()。*

# c# - 如何使用 Linq to Entity 将 NUMBER(9) 转换为字符串？

> ID：12045540
> 
> 赞同：0
> 
> 时间：2012-08-20T21:35:12.823
> 
> 标签：c#, linq, oracle, entity-framework

我正在使用带有 11g Oracle 数据库的 Oracle Client 11.2.0.3，并且在将数字列数据转换为字符串时遇到了麻烦。

```
var items = new List<string>();

items = (from x in db.Table1
         select x.ColA).ToList()); // ColA is NUMBER(9) 
```

如果我使用`Convert.ToString(x.ColA)`，我会得到`LINQ to Entities does not recognize the method System.String ToString(Int32) method, and this method cannot be translated into a store expression`

如果我使用`x.ColA.ToString()`，我会得到`LINQ to Entities does not recognize the method System.String ToString() method, and this method cannot be translated into a store expression.`

如果我使用`System.Data.Objects.SqlClient.SqlFunctions.StringConvert((double)x.RESERVATION_ID)`，我会得到`The specified method System.String StringConvert(System.Nullable1[System.Double]) on the type System.Data.Objects.SqlClient.SqlFunctions cannot be translated into a LINQ to Entities store expression.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:37:21.103

```
items = (from x in db.Table1
         select x.ColA).ToList().Select(x => x.ToString()).toList()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:45:26.867

```
var items = (from x in db.Table1 select x.ColA).ToList()
   .ConvertAll(s => s.ToString()); 
```

# gwt - 如何将弹出窗口设置为始终在 GWT 的顶部可见

> ID：12045546
> 
> 赞同：2
> 
> 时间：2012-08-20T21:35:47.277
> 
> 标签：gwt, popup, position

即使用户向下滚动，我也需要在页面顶部显示一个加载弹出窗口。

到目前为止我尝试的是设置弹出位置如下

```
setPopupPosition(Window.getClientWidth()/2 , 0); 
```

弹出窗口显示在绝对顶部。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T23:20:34.897

如果您从不同的角度查看它，这种情况可以很容易地解决：不是弹出位置应该调整到页面 - 相反，页面应该在居中弹出窗口后面滚动，例如：

```
final ScrollPanel scrollPanel = new ScrollPanel();
RootLayoutPanel.get().add(scrollPanel);
pagePanel = new FlowPanel();
scrollPanel.setWidget(pagePanel);
pagePanel.add(...); 
```

现在将整个页面内容添加到`pagePanel`（而不是将它们直接添加到 rootPanel）。

然后你可以像这样创建弹出窗口：

```
final PopupPanel popupPanel = new PopupPanel();
popupPanel.add(...);
popupPanel.center(); 
```

当窗口调整大小时，您仍然需要重新居中弹出窗口，但除此之外，弹出窗口将始终位于滚动页面前面的中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:04:02.080

为此，您可以实施`Window.addWindowScrollHandler`. 无论您做什么，它都将始终处于领先地位。

```
DialogBox dialog = new DialogBox();
dialog.setWidget(...);
Window.addWindowScrollHandler(new ScrollHandler() {
    @Override
    public void onWindowScroll(ScrollEvent event) {
        dialog.setPopupPosition((Window.getClientWidth() - widthOfDialog) / 2, event.getScrollTop());
    }
}); 
```

希望这有帮助..谢谢..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T23:25:26.673

对我有用的解决方案是这个

```
 setPopupPosition(Window.getClientWidth()/2 , Window.getScrollTop()); 
```

# jquery-plugins - IE8 中的 MediaElement.js 错误

> ID：12045552
> 
> 赞同：0
> 
> 时间：2012-08-20T21:36:22.370
> 
> 标签：jquery-plugins, html5-audio, mediaelement.js

我正在寻找使用 mediaelement.js 在页面上显示一些 HTML5 音频播放器。一切似乎在 Chrome/FF 中运行良好，但在 IE8 中却不行。

[http://future.thefutureforward.com/~orion/multimedia.html](http://future.thefutureforward.com/~orion/multimedia.html)

flash 后备 .swf 文件与我的 mediaelement-and-player.min.js 位于同一文件夹中，所以这不是问题。我已经在（它们现在所在的位置）和之前尝试了脚本标签，但这没有帮助。

任何关于为什么 IE 在这里不起作用的想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:46:04.273

这个错误现在在最新版本的 mediaelement-and-player.min.js 中得到解决。确保您已安装 2.9.3 版本。

此 github 问题中讨论的全部详细信息： [https ://github.com/johndyer/mediaelement/pull/598](https://github.com/johndyer/mediaelement/pull/598)

# symfony-2.1 - 在 Symfony 2.1 中自动加载一个类

> ID：12045554
> 
> 赞同：7
> 
> 时间：2012-08-20T21:36:28.733
> 
> 标签：symfony-2.1

我正在将 Symfony 1.2 项目移植到 Symfony 2.x。我目前正在运行最新的 2.1.0-dev 版本。

在我的旧项目中，我有一个名为 Tools 的类，它具有一些简单的功能，例如将数组转换为字符串和从字符串生成 slug。我想在我的新项目中使用这个类，但我不清楚如何在包之外使用这个类。

我在这里查看了各种建议更改 app/autoload.php 的答案，但我的 autoload.php 看起来与答案中的不同，也许在 2.0 和 2.1 之间发生了一些变化。

我想将我的课程保留在我的 src 或 app 目录中，因为它们处于源代码控制之下。我的供应商目录不是我使用作曲家来处理的。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T12:36:50.927

另一种方法是使用 /app/config/autoload.php：

```
<?php

use Doctrine\Common\Annotations\AnnotationRegistry;

$loader = require __DIR__.'/../vendor/autoload.php';
$loader->add( 'YOURNAMESPACE', __DIR__.'/../vendor/YOURVENDOR/src' );

// intl
if (!function_exists('intl_get_error_code')) {
    require_once  _DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php';

    $loader->add('', __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs');
}

AnnotationRegistry::registerLoader(array($loader, 'loadClass'));

return $loader; 
```

只需将 YOURNAMESPACE 和 YOURVENDOR 替换为您的值即可。到目前为止，对我来说效果很好。

你是对的，我偶然发现了自动加载从 2.0 到 2.1 的变化。上面的代码适用于我将项目升级到的最新版本；-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T09:33:40.603

`Common`对于像这样的简单情况，最快的解决方案是直接在下面创建一个文件夹（例如）`src`并将您的类放入其中。

```
src
  -- Common
    -- Tools.php 
```

`Tools.php`包含具有适当命名空间的类，例如

```
<?php

namespace Common;

class Tools
{
    public static function slugify($string)
    {
        // ...
    }
} 
```

在调用你的函数之前不要忘记`use`语句

```
use Common\Tools;

// ...
Tools::slugify('my test string'); 
```

如果您`src`按照上述正确的文件夹结构和命名空间放置您的代码，它将无需接触`app/autoload.php`.

# css - IE8 中奇怪的透明度问题 - 绿色电话图标？

> ID：12045555
> 
> 赞同：0
> 
> 时间：2012-08-20T21:36:29.903
> 
> 标签：css, internet-explorer-8, png

我将在前面说我已经花了很多时间（实际上是荒谬的）来尝试解决这个问题。

因此，我遇到问题的站点/特定页面位于[http://staging.htsdlaw.com/about-us](http://staging.htsdlaw.com/about-us)。我相信这个问题发生在大多数页面上。

当然，像许多 IE8 错误一样，我很难重复这个问题；但显然它发生在几台运行 IE8 的客户端机器上。以下是他的完整规格：

```
Windows 7
Internet Explorer 8
User Agent: 
Mozilla/4.0 (compatible; MSIE 8.0;
Windows NT 6.1; Trident/4.0; SLCC2;
.NET CLR 2.0.50727; .NET CLR
3.5.30729; .NET CLR 3.0.30729; Media
Center PC 6.0; MDDR; .NET CLR
1.1.4322; Tablet PC 2.0; .NET4.0C) 
```

当他点击“关于我们”并登陆页面时，或者当他在该页面上刷新时，就会发生这种情况。当他加载页面时，他看到了这些奇怪的绿色电话图标。当他将鼠标移到内容区域时，它们就消失了。

您可以在此处查看屏幕截图：http: [//cloud.believelabs.com/image/3c1S2Z2H0i2S/green_ie8_bug.png](http://cloud.believelabs.com/image/3c1S2Z2H0i2S/green_ie8_bug.png)

至于脚本库，我使用的是 jQuery 1.7++、Superfish.js、jQuery Cycle 和 jQuery easing。

在我的开发过程中的任何时候，我都无法重新创建这个。我只是在我的 OSX 机器上运行 Windows 7 虚拟机并交换开发工具设置。

如果您正在检查它，请记住，我正在使用 HTML 类将磁贴设置为仅适用于 IE 的 JPG 格式。例如， html.ie `#main { background-image: same_file.jpg }`。

一如既往，非常感谢大家的帮助。我尽我所能研究和解决尽可能多的问题（通常是由于这个网站的结果）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:58:20.363

在无法复制问题的情况下很难给出确定的答案，但是当您在 IE 中遇到问题时，某些 IE 副本而不是其他看似相同的副本，通常涉及以下两个问题之一：

1.  兼容模式。如果其中一个 IE 副本以兼容模式查看站点而另一个不是，那么您显然会看到两者之间的差异。至于他们为什么要这样做，并不总是很清楚，但往往是用户的浏览器配置。有时，如果您浏览本地 Intranet 中的站点，也可能会意外触发它。

2.  缺少 ActiveX 控件。我的直觉是这就是问题所在，因为它经常发生在不透明之类的东西上。浏览器不会报告任何错误，但根本不会呈现效果。这是由于浏览器由于其安全设置而阻止了 ActiveX 控件，或者只是没有正确安装 ActiveX 控件。由于这些控件通常是标准的 Windows 控件，因此它们有时会丢失是一个谜，但它似乎确实经常发生。

因为这两个问题都发生在用户领域，所以几乎不可能预测或缓解它们，除非网站在不能做某事时优雅地应对。

# gwt - 通过命令行编译 GWT

> ID：12045559
> 
> 赞同：4
> 
> 时间：2012-08-20T21:36:47.817
> 
> 标签：gwt, ant, compilation, capistrano

我们目前使用 Capistrano 部署了一个应用程序。该应用程序使用 php 作为后端，使用 GWT 作为前端。

我已设法通过 Ant 文件编译 GWT，但想用自定义 Capistrano 任务替换 Ant 文件。

为了让我能够用 Capistrano 任务替换它，我需要能够从命令行编译 GWT。

我已经环顾四周和谷歌很长一段时间了，但没有运气。有谁知道是否可以只使用一个命令来编译 GWT？

由于可以通过 Apache Ant 来实现，我相信它应该可以通过命令行来实现。

我们要编译的操作系统是Linux，确切地说是Ubuntu。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T23:06:12.737

当然，这记录在[https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideCompilerOptions](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideCompilerOptions)

```
java -cp gwt-dev.jar com.google.gwt.dev.Compiler ... 
```

# macos - 如何在 OSX 应用程序中将 CoreData 管理与 AppDelegate 分离

> ID：12045560
> 
> 赞同：2
> 
> 时间：2012-08-20T21:36:55.833
> 
> 标签：macos, cocoa, core-data, separation-of-concerns, appdelegate

如果您对我的故事不感兴趣，请立即跳到底部的两个编号问题。

在[这个问题](https://stackoverflow.com/questions/1267520/where-to-place-the-core-data-stack-in-a-cocoa-cocoa-touch-application)中，讨论了是否将 CoreData 处理与 AppDelegate 分开。我决定尝试关注点分离的方式。

由于 Apple 没有为 AppKit 应用程序提供有关该主题的文档，我的问题是：

*   是否有任何文档、资源甚至示例项目显示如何将 CoreData 堆栈与 AppDelegate 分离？

我现在的状态是这样的：

我有一个`AppDelegate`和一个`DataController`，它是一个子类`NSTreeController`。`DataController`控件 a`NSOutlineView`显示我的`CoreData`模型的对象（组和叶子）。

我`CoreData`从 Xcode 的（不是基于文档的）模板开始。

*   我将所有与 CoreData-Stack 相关的方法`AppDelegate`从`DataController`.
*   我做了`DataController`一个单身人士。
*   `AppDelegate`我将真正的相关方法转发给了`DataController`这样的：

在 AppController.m 中

```
- (NSUndoManager *)windowWillReturnUndoManager:(NSWindow *)window{
    return [[[DataController sharedController] managedObjectContext] undoManager];
}
- (IBAction)saveAction:(id)sender{
    [[DataController sharedController] saveAction:sender];
}
- (NSApplicationTerminateReply)applicationShouldTerminate:(NSApplication *)sender{
    return [[DataController sharedController] applicationShouldTerminate:sender];
} 
```

*   所有那些被调用的方法当然都是在 DataController.m 中实现的

现在我可以在`NSOutlineView`、undo 和 redo 中添加和删除对象了。但是，文件保存菜单项是灰色的，当我点击 cmd+s 时，我从操作系统中得到了 bing。（当我在 AppDelegate 中拥有 CoreData 堆栈时，这曾经“神奇地”工作。）

当我退出应用程序时，我的对象通过调用`OutlineView`写入`persistentStore`（我看到了 xml） 。`applicationShouldTerminate`但是，当我重新启动应用程序时，对象不会恢复到`OutlineView`. （当我在 AppDelegate 中拥有 CoreData 堆栈时，这曾经“神奇地”工作。）

1.  隐藏在`CoreData`模板中的魔术胶水代码使 cmd+s 工作并启用文件 - 保存菜单项？
2.  什么隐藏的代码在应用程序启动时将我的内容恢复`mangedObjectContext`到我的。`OutlineView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:11:09.333

我已经为 iOS 编写了一个框架来执行此操作。我的方法从 AppDelegate 中获取 Core Data 样板代码并将其移动到单例类中。这提供了与 AppDelegate 的清晰分离，消除了`NSManagedObjectContext`在视图控制器之间传递 a 的需要，并允许您通过将框架复制到项目中来将核心数据添加到应用程序中。

[您可以在http://schwiiz.org/?p=1120](http://schwiiz.org/?p=1120)阅读有关该框架的信息，或从[https://github.com/chriscdn/RHManagedObject](https://github.com/chriscdn/RHManagedObject)下载。

该框架不仅仅是一个单例。它还扩展`NSManagedObject`以简化诸如在不同线程之间保存和获取之类的事情。

# android-layout - 在 Android 中显示交互式图像

> ID：12045562
> 
> 赞同：0
> 
> 时间：2012-08-20T21:37:02.477
> 
> 标签：android-layout, surfaceview, android-canvas

在我的 ANDROID 应用程序中，我正在尝试开发交互式图像。图像由几个相互连接的节点组成。我想利用两个不同的节点来获得它们之间的最短路径。当节点被点击时，我想在图像顶部绘制一个覆盖层，指示被点击节点之间的最短路径。除此之外，我还想实现从源节点到中间节点，最后到目标节点的路径动画。

我试图在 Surface View 中实现这一点。任何关于如何开始的建议都会非常有帮助。任何可以用作指导的教程和示例代码都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:54:30.043

您可以从创建自己的显示图像的表面视图类开始。

确保在 SurfaceView 类中实现 SurfaceHolder.Callback。

```
public class MySurfaceView extends SurfaceView implements
    SurfaceHolder.Callback {

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    mthread.setRunning(false);

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {

    }
} 
```

您可以使用线程调用绘图方法并渲染图像。确保在实现线程时使用 Canvas 锁。

# c++ - 无法加载 /usr/local/lib (Fedora x64) 中存在的共享库

> ID：12045563
> 
> 赞同：11
> 
> 时间：2012-08-20T21:37:11.060
> 
> 标签：c++, linker, shared-libraries, 64-bit, fedora

尝试运行我刚刚成功编译的程序时，出现以下错误：

> ./src/sensors/laser_scan_producer：加载共享库时出错：***liblcm.so.1***：无法打开共享对象文件：没有这样的文件或目录

`ls /usr/local/lib/liblcm*`产量

```
/usr/local/lib/liblcm.la  
/usr/local/lib/liblcm.so  
/usr/local/lib/liblcm.so.1  
/usr/local/lib/liblcm.so.1.2.0 
```

为了冗余，我已经执行`sudo ldconfig`了几次并将 /usr/local/lib 添加到 LD_LIBRARY_PATH 。

这耗尽了我在寻找 stackOverflow 时看到的答案列表。

有人发现问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T14:41:49.860

感谢@Joachim_Pileborg：

> ldconfig 使用文件 /etc/ld.so.conf。您可以将 /usr/local/lib 添加到该文件，重新运行 ldconfig 并重试

这样做解决了问题，尽管我觉得奇怪的是 /usr/local/lib 在自然过程中不会被检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-29T00:53:29.360

[我在这个 commit 中](https://github.com/Nuand/bladeRF/commit/63c5be310564074a1f161e8f6fcf39a421eeaeda)找到了适用于 /usr/local/lib 和 /usr/local/lib64 目录的有效解决方案。

首先以 root 身份运行此命令以添加这些目录。

```
tee /etc/ld.so.conf.d/local.conf <<EOF
/usr/local/lib
/usr/local/lib64
EOF 
```

接下来以root身份运行：

```
ldconfig 
```

# java - Jar Mismatch 在依赖列表中找到 2 个版本的 android-support-v4.jar

> ID：12045568
> 
> 赞同：130
> 
> 时间：2012-08-20T21:37:55.263
> 
> 标签：java, android, jar

我正在尝试创建 2 个版本的 Android 应用程序（免费/付费）。我有一个 Android 库，其中包含两者共有的文件。我创建了一个新的 Android 项目并尝试使用该库，但出现以下错误：

```
Found 2 versions of android-support-v4.jar in the dependency list,
but not all the versions are identical (check is based on SHA-1 only at this time).
All versions of the libraries must be the same at this time.
Versions found are:
Path: /Users/Zaheer/Developer/App Free/libs/android-support-v4.jar
    Length: 349252
    SHA-1: 612846c9857077a039b533718f72db3bc041d389
Path: /Users/Zaheer/Developer/App Library/libs/android-support-v4.jar
    Length: 337562
    SHA-1: 27c24d26e4c5d57976e6926367985548678e913c 
```

关于如何解决这个问题的任何想法？我一直在玩构建路径，但没有成功。

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-08-20T21:42:29.457

> 关于如何解决这个问题的任何想法？

删除一个。

> 我一直在玩构建路径，但没有成功。

步骤#1：撤消所有这些。如果你弄乱了构建路径，在 R16 或更高版本的 Eclipse 的 ADT 插件上，你做错了。

第 2 步：选择这两个 JAR 版本之一，或从 SDK 安装的“附加”区域中选择一个。

第 3 步：将正确的 JAR 放入`App Library`.

第 4 步：从 中删除一个`App Free`，因为它会从`App Library`.

欢迎您在两个位置 (`App Free`和`App Library`) 中使用相同的实际 JAR 文件，尽管这会无缘无故地占用额外的空间。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-11T05:14:26.273

1.  从 App Free 中删除 android-support-v4.jar
2.  将相同文件从 App Library 添加到 App Free

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-23T06:28:55.280

以上解决方案主要解决问题。使用这些解决方案后，问题仍然存在。然后

> 转到项目文件夹-> libs-> 并删除“android-support-v4.jar”

希望它能解决你的问题，因为它解决了我的问题。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-12-22T07:40:52.653

在某些情况下，您有多个库项目，`android-support-v4.jar`它们的`libs`路径和构建路径中都有，并且您的项目对它们都有依赖关系。例如，就我而言，我的工作区中有以下库项目，

*   libfacebook
*   libsherlockactionbar

这两个项目都是独立的，我的`project.properties`样子如下，

```
# Project target.
target=android-17
android.library.reference.1=../libfacebook
android.library.reference.2=../libsherlockactionbar 
```

当我构建我的项目时，我遇到了一个 jar 不匹配问题，即重复引用同一文件的两个副本。我为解决这个问题所做的事情有点诡计。我创建了一个新的库项目，命名为工作区中所有其他*库*`libcommons`项目的父项目，包括和. 然后我从所有其他项目中删除了支持库，并在 libs 文件夹中只保留了一份**副本**。然后我添加了对我所有*其他*图书馆项目的参考。清理完我的工作区后，一切都像魅力一样。*`libfacebook``libsherlockactionbar``libcommons`**`libcommons`***

 ***** * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-07-07T11:39:29.363

这是一个比删除和添加文件更优雅的修复！

你只需要：

1.  右键单击项目应用程序免费
2.  转到“Android工具”>“添加支持库”
3.  批准权限并让它更新库
4.  对项目 App Library 重复此过程

然后，Android 支持库将同步（：

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-11-20T11:14:39.237

## 非常简单的解决方案

一个非常简单的解决方案适用于我的案例，**只需将相同的 (android-support-v4.jar) jar 文件复制到所有项目。**不会再有冲突了。

1 从任一项目的 libs 文件夹中复制 jar 文件 android-support-v4.jar。

2 从已经存在的第二个项目的 libs 文件夹中删除 jar 文件 android-support-v4.jar。

3 将新复制的第一个项目的 jar 文件粘贴到第二个项目的 libs 文件夹中。

jar 不匹配问题现在将得到解决。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-01-10T21:28:26.097

只需将库从其中一个项目复制到另一个项目。也许两者的时间戳需要相同。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-03-01T17:36:35.603

**解析度：**

1.  右键单击“免费”项目 > Android 工具 > 添加支持库。
2.  在“付费”项目上做同样的事情。
3.  清理所有项目

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-06-12T16:46:12.063

检查是否有不相关的项目为您打开，因为对我来说就是这种情况，似乎其中一个 JAR 文件与我没有使用的不同项目相关，所以我只是关闭了该项目，做了一个干净的构建我正在处理的项目并且不再有问题了！希望这对某人有帮助！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-11-06T07:47:47.317

在库和项目中添加外部 jar 时使用相同的 jar

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-08-18T04:29:05.780

好吧..它对我有用：

去

> 项目文件夹 > 库

然后，删除“android-support-v4.jar”

然后

> 项目 > 清洁

它会起作用的！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-02-21T21:42:14.127

我刚刚遇到了这个问题，但我没有删除冲突的**android-support-v4.jar**，而是将其重命名为**android-support-v4_PROJECT.jar**，从而消除了冲突。

如果您想知道如何在 Eclipse 中重命名文件，只需突出显示该文件并按 F2。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-10-30T10:12:33.140

您只需要在每个项目上使用完全相同的 android-support-v4.jar 校验和。为此，您可以在所有冲突的项目/库中复制/粘贴其中一个。

无事可做，清洁和享受 :)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-10-31T01:49:02.553

可能是您同时打开 2 个项目（均使用 android-support-v4.jar）。`I close 1 project and every thing ok`****

# android - Eclipse可以生成默认的proguard配置文件吗

> ID：12045574
> 
> 赞同：0
> 
> 时间：2012-08-20T21:38:28.890
> 
> 标签：android, proguard

我正在尝试在我的 Android 项目上启用 proguard 代码混淆。这些年来，我看到了很多问题，但是许多线程都已经很老了，很难说它们对我有多重要。

我无法让 Eclipse 生成默认的 proguard 配置文件，所以我一直在尝试拼凑一个，这很痛苦（我从中获得的构建几乎立即崩溃，并且似乎掩盖了我使用的 3rd 方库的一些元素在应用程序中）。我可以理解生成的文件现在可能是完美的，但似乎它至少可以在正确处理项目库方面有所突破。

这是我尝试启用 proguard 所采取的步骤。

1 确保我的 Eclipse 和 Android SDK 是最新的。

2 编辑project.properties，取消注释

> proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt

3 由于 pro guard-project.txt 不存在，立即构建失败。（这是我希望它会生成一个的地方）

4 我在 proguard-project.txt 中创建了自己的 proguard.config 文件（内容如下所示）

> -injars bin/classes -outjars bin/classes-processed.jar -libraryjars libs/FlurryAgent.jar:libs/GoogleAdMobAdsSdk-4.1.1.jar -libraryjars libs/commons-codec-1.4.jar -libraryjars libs/commons-io- 2.1.jar -libraryjars libs/commons-logging-1.1.1.jar -libraryjars libs/httpclient-4.1.2.jar -libraryjars libs/httpclient-cache-4.1.2.jar -libraryjars libs/httpcore-4.1.3。 jar -libraryjars libs/httpmime-4.1.2.jar -libraryjars libs/mapquest-android-sdk-1.0.3.jar -libraryjars libs/oranjestad-notifications-1.0.jar
> 
> -dontwarn org.apache.** -dontwarn org.ietf.*
> 
> -keepnames org.apache.**
> 
> -dontpreverify -repackageclasses '' -allowaccessmodification -optimizations !code/simplification/arithmetic -keepattributes*注解*
> 
> -keep 公共类 * 扩展 android.app.Activity -keep 公共类 * 扩展 android.app.Application -keep 公共类 * 扩展 android.app.Service -keep 公共类 * 扩展 android.content.BroadcastReceiver -keep 公共类 * 扩展android.content.ContentProvider
> 
> -保持公共类 * 扩展 android.view.View { public (android.content.Context); 公共（android.content.Context，android.util.AttributeSet）；公共（android.content.Context，android.util.AttributeSet，int）；公共无效集*（...）；}
> 
> -keepclasseswithmembers 类 * { public (android.content.Context, android.util.AttributeSet); }
> 
> -keepclasseswithmembers 类 * { public (android.content.Context, android.util.AttributeSet, int); }
> 
> -keepclassmembers 类 * 扩展 android.content.Context { public void *(android.view.View); 公共无效*（android.view.MenuItem）；}
> 
> -keepclassmembers 类 * 实现 android.os.Parcelable { 静态 android.os.Parcelable$Creator CREATOR; }
> 
> -keepclassmembers 类 * *.R$* { public static ; }

5 此时我的项目已构建，但由于日志记录的某些类强制转换异常而失败。这让我回到第 3 步，我希望基于 eclipse 库依赖项生成一个合理的 proguard-project.txt。显然，我创建的 on 是不正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:16:09.443

更新 SDK 后，您还必须确保更新项目本身：

```
android update project --path MyAndroidProjectDirectory 
```

在最近的 Android SDK 中，这应该会创建`proguard-project.txt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:07:12.007

除非你的设置有问题，否则创建新的 Android 项目，也会写下 proguard 配置文件。所以只需设置虚拟项目并检查它的文件夹 - 它应该在那里。将其复制回您当前的项目并根据需要进行调整。

# c# - .Net 和 Mono 在解决方案中共享同一程序集的不同版本

> ID：12045579
> 
> 赞同：1
> 
> 时间：2012-08-20T21:38:46.270
> 
> 标签：c#, visual-studio, mono, ninject, nuget

我正在使用 Ninject IoC 程序集 - IoC 的外部程序集，它们支持单声道和窗口。但是要在单声道上工作，需要不同的编译版本的程序集。

我有以下问题：

我有一个使用 Ninject windows 版本的 Domain.Core 项目我有两个额外的项目 - 称它们为 For.Mono 和 For.Windows，它们都有 Domain.Core 项目的参考

问题是为了让 Ninject 在单声道上工作，我们必须使用特殊的编译符号对其进行编译。

现在单声道版本无法在 Windows 上运行，我怎样才能解决在同一解决方案中使用两个版本的问题以具有以下内容：

当我运行 For.Mono 项目时，仅使用 Ninject 的 Mono 版本，即使 Domain.Core 项目在其代码中的某些类中使用 Ninject 并引用本地到它的分数 windows 版本 - 我想用Mono版本不知何故，

并在 For.Windows 项目上使用 Ninject windows 版本，这个问题很简单，因为它可以正常工作，但是当我在我的 For 中使用 Domain.Core 中的代码时，编译器要求我引用 windows 版本的第一个请求。单声道项目。我知道编译器是对的，但是我怎样才能用一个代码库解决这个跨平台支持问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:29:13.757

您的问题并不完全清楚，但据我所知：您在`Domain.Core`项目使用的程序集中共享了基类/接口，您还有 2 组派生类/接口（`For.Windows`和`For.Mono`），它们提供平台特定的类/接口实现`Domain.Core`. 您希望`For.XXX`从您的解决方案中引用两者。

我认为这种方法没有问题。只要您的代码仅引用来自的类`Domain.Core`并且实例化代码包含在

```
if (platform = Platform1) 
{
    // must be function calls in both branches to avoid JIT-ing references 
    // to unsupporterd DLL for the other platform.
    InstantiatePlatformOneClasses();
}
else
    InstantiatePlatformTwoClasses(); 
```

在编译或运行时应该没有问题。

注意：使用一些 DI 容器将更容易解决相同的问题，因为您可以简单地将其配置为在运行时选择特定于平台的实现。

# java - 将 cp-1252 编码为 utf-8？

> ID：12045581
> 
> 赞同：2
> 
> 时间：2012-08-20T21:39:06.427
> 
> 标签：java, linux, utf-8, character-encoding, cp1252

我正在尝试编写一个将在 linux 服务器上运行的 Java 应用程序，但它将使用 cp-1252 作为字符集来处理在旧版 Windows 机器上生成的文件。无论如何将这些文件编码为 utf-8 而不是生成的 cp-1252？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:30:21.883

如果文件名和内容有问题，解决问题的最简单方法是将`locale`Linux 机器上的 设置为基于`ISO-8859-1`而不是`UTF-8`. 您可以使用`locale -a`列出可用的语言环境。例如，如果你有`en_US.iso88591`你可以使用：

```
export LANG=en_US.iso88591 
```

这样，Java 将使用 ISO-8859-1 作为文件名，这可能已经足够了。要运行 Java 程序，您仍然需要设置`file.encoding`系统属性：

```
java -Dfile.encoding=cp1252 -cp foo.jar:bar.jar blablabla 
```

如果没有可用的 ISO-8859-1 语言环境，您可以使用`localedef`. 安装它需要root访问权限。事实上，您可以生成一个使用 CP-1252 的语言环境，如果它在您的系统上可用的话。例如：

```
sudo localedef -f CP1252 -i en_US en_US.cp1252
export LANG=en_US.cp1252 
```

这样，Java 应该默认对所有 I/O 使用 CP1252，包括文件名。

在这里进一步扩展：http: [//jonisalonen.com/2012/java-and-file-names-with-invalid-characters/](http://jonisalonen.com/2012/java-and-file-names-with-invalid-characters/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T22:03:10.927

您可以使用您希望的任何编码读取和写入文本数据。这是一个快速的代码示例：

```
 public static void main(String[] args) throws Exception
  {
    // List all supported encodings
    for (String cs : Charset.availableCharsets().keySet())
      System.out.println(cs);

    File file = new File("SomeWindowsFile.txt");
    StringBuilder builder = new StringBuilder();

    // Construct a reader for a specific encoding
    Reader reader = new InputStreamReader(new FileInputStream(file), "windows-1252");
    while (reader.ready())
    {
      builder.append(reader.read());
    }
    reader.close();

    String string = builder.toString();

    // Construct a writer for a specific encoding
    Writer writer = new OutputStreamWriter(new FileOutputStream(file), "UTF8");
    writer.write(string);
    writer.flush();
    writer.close();
  } 
```

如果读取时仍然“阻塞”，请查看您是否可以验证原始编码是否是您认为的那样。在本例中，我指定了 windows-1252，它是 cp-1252 的 java 字符串。

# php - Symfony2 / Doctrine 模型通过相关 ID 和类型将单个表连接到多个其他表

> ID：12045587
> 
> 赞同：2
> 
> 时间：2012-08-20T21:39:34.443
> 
> 标签：php, database-design, symfony, model, doctrine-orm

我正在尝试为一个相当简单的应用程序制定模型，但我无法找到关于我处理用户评论的想法的好信息。我在想我可以有一个带有“相关 ID”和“相关类型”字段的评论表。这些字段将是返回到我想要链接到的任何其他表的复合外键。例如，您可以对用户、位置或任何其他实体发表评论。这种设计在 Symfony2/Doctrine 中是否可行？如果是这样，是否有一个很好的例子可以在某处参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:31:48.757

这就是你要找的[http://doctrine-orm.readthedocs.org/en/2.0.x/reference/inheritance-mapping.html](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/inheritance-mapping.html)

您需要使用使用**单表继承**或**类表继承的鉴别器字段**

# c# - 查看将在 HttpResponseMessage / HttpRequestMessage (System.Net.Http, WebAPI) 中发送/接收的原始标头

> ID：12045592
> 
> 赞同：6
> 
> 时间：2012-08-20T21:40:04.213
> 
> 标签：c#, asp.net-web-api, http-headers, dotnet-httpclient

直观地查看将在 WebAPI 的 HttpResponseMessage / HttpRequestMessage 类型中实际发送或接收的 Http 标头的原始列表可能非常有益。我的意思只是一个普通的旧字符串，每个标题都在一个新行上，正是生成或接收的内容。

但不幸的是，看起来这些类型中的任何一种都不允许您查看实际生成的内容。取而代之的是，到处都是属性。一些在原始 HttpResponseMessage / HttpRequestMessage 类型本身中，一些在 response/request.Content.Headers 中（两者不重复，后者用于尚未作为属性涵盖的那些，通常用于自定义标头），......也许还有 Cookie某处获得了自己的标题。并且在视觉上看到这些 Header 集合列表也是一种痛苦，即你最终会为每个这样的集合提供一堆迭代代码......更混乱。

但是在实际发送/接收的响应/请求中，并没有这样的划分，简单的看到所有的Http headers。**所以我在某个地方想念它吗？在这些地方实际上是否有一个简单直观的属性可以简单地返回原始标题字符串？**当然，响应已经收到了标头并刚刚解析了它们……那个原始字符串隐藏在某个地方吗？

（顺便说一句，我知道 Fiddler ......这完全不能令人满意。如果我必须处理 Http 标头的低级混乱，那么能够使用我正在使用的编程类型查看它们是很有意义的生成并接收它们。但更糟糕的是，我仍然无法让 localhost 与 Fiddler 一起工作（在 Win8 上），这使得它在许多调试场景中的使用无效，在这些场景中我只想看到将生成的臭头。 )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-21T13:22:27.957

我没有找到获取请求标头**原始**值的方法，但是此代码似乎返回了所有标头值（不是按原始顺序）：

```
request.Headers.ToString() + request.Content.Headers.ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T14:12:51.663

似乎 HttpRequestMessage.ToString 确实返回了原始值（好吧，从技术上讲，它们不是原始值，但非常接近一个，因为它一直在使用解析器分隔符将它们连接回来）。不幸的是，用于构造 ToString 结果的方法是私有的。因此，要解决相同的任务，我必须解析 ToString 的结果：

```
var values = new JObject();

foreach (var raw_header in request.Headers
                                   .ToString()
                                   .Split(new[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries))
{
    var index = raw_header.IndexOf(':');
    if (index <= 0)
        continue;

    var key = raw_header.Substring(0, index);
    var value = index + 1 >= raw_header.Length ? string.Empty : raw_header.Substring(index + 1).TrimStart(' ');

    values.Add(new JProperty(key, value));
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T12:39:59.567

这是我用来捕获请求和响应标头的代码：

*这是从 Windows 窗体应用程序中获取的：txtReceived 和 txtSent 是 WindowsForms 窗体上的简单多行文本框。光标是窗体的光标。*

```
 private HttpClient PrepareHttpClient()
    {
        var client = new HttpClient();

        client.DefaultRequestHeaders.Accept.Add(
            new MediaTypeWithQualityHeaderValue("application/xml"));

        return client;
    }

    private string SendGetRequest(string url)
    {
        //Please be patient ...
        this.Cursor = Cursors.WaitCursor;

        var client = PrepareHttpClient();
        txtSent.Text = url;
        var taskReult = client.GetAsync(new Uri(url));
        HttpResponseMessage httpResponse = taskReult.Result;

        Stream st = httpResponse.Content.ReadAsStreamAsync().Result;
        StreamReader reader = new StreamReader(st);
        string content = reader.ReadToEnd();

        //Reset the cursor shape
        this.Cursor = Cursors.Default;

        txtReceived.Text = FormatResponse(httpResponse, content);

        //For GET we expect a response of 200 OK
        if (httpResponse.StatusCode == HttpStatusCode.OK)
        {
            return content;
        }

        throw new ApplicationException(content);
    }
    /// <summary>
    /// Post to the server using JSON
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="url">The server uri</param>
    /// <param name="e">The object to POST</param>
    /// <returns></returns>
    private string SendPostRequest<T>(string url, T e)
    {
        this.Cursor = Cursors.WaitCursor;
        HttpClient client = new HttpClient();

        // Create the JSON formatter.
        MediaTypeFormatter jsonFormatter = new JsonMediaTypeFormatter();

        // Use the JSON formatter to create the content of the request body.
        HttpContent content = new ObjectContent<T>(e, jsonFormatter);
        Stream st = content.ReadAsStreamAsync().Result;
        StreamReader reader = new StreamReader(st);
        string s = reader.ReadToEnd();

        // Send the request.
        var taskResult = client.PostAsync(url, content);

        //Note: We could simply perform the following line and save some time
        //but then we will not have access to the post content:
        //var taskResult = client.PostAsJsonAsync<T>(url, e);

        HttpResponseMessage httpResponse = taskResult.Result;
        this.Cursor = Cursors.Default;

        txtSent.Text = FormatRequest(httpResponse.RequestMessage, s);

        st = httpResponse.Content.ReadAsStreamAsync().Result;
        reader = new StreamReader(st);
        string responseContent = reader.ReadToEnd();
        txtReceived.Text = FormatResponse(httpResponse, responseContent);

        //For POST we expect a response of 201 Created
        if (httpResponse.StatusCode == HttpStatusCode.Created)
        {
            return responseContent;
        }

        throw new ApplicationException(responseContent);
    }

    /// <summary>
    /// PUT to the server using JSON
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="url"></param>
    /// <param name="e"></param>
    /// <returns></returns>
    private string SendPutRequest<T>(string url, T e)
    {
        this.Cursor = Cursors.WaitCursor;
        HttpClient client = new HttpClient();

        // Create the JSON formatter.
        MediaTypeFormatter jsonFormatter = new JsonMediaTypeFormatter();

        // Use the JSON formatter to create the content of the request body.
        HttpContent content = new ObjectContent<T>(e, jsonFormatter);
        Stream st = content.ReadAsStreamAsync().Result;
        StreamReader reader = new StreamReader(st);
        string s = reader.ReadToEnd();

        // Send the request.
        var taskResult = client.PutAsync(url, content);

        //Note: We could simply perform the following line and save some time
        //but then we will not have access to the post content:
        //var taskResult = client.PutAsJsonAsync<T>(url, e);

        HttpResponseMessage httpResponse = taskResult.Result;

        txtSent.Text = FormatRequest(httpResponse.RequestMessage, s);

        st = httpResponse.Content.ReadAsStreamAsync().Result;
        reader = new StreamReader(st);
        string responseContent = reader.ReadToEnd();
        this.Cursor = Cursors.Default;
        txtReceived.Text = FormatResponse(httpResponse, responseContent);

        //For PUT we expect a response of 200 OK
        if (httpResponse.StatusCode == HttpStatusCode.OK)
        {
            return responseContent;
        }

        throw new ApplicationException(responseContent);
    }

    private string FormatRequest(HttpRequestMessage request, string content)
    {
        return
            string.Format("{0} {1} HTTP/{2}\r\n{3}\r\n{4}",
                request.Method,
                request.RequestUri,
                request.Version,
                request.Headers,
                content);
    }

    private string FormatResponse(HttpResponseMessage result, string content)
    {
        return
            string.Format("HTTP/{0} {1} {2}\r\n{3}\r\n{4}",
                result.Version,
                (int)result.StatusCode,
                result.ReasonPhrase,
                result.Headers,
                content);
    } 
```

# drupal - Drupal 批量更新 URL 别名

> ID：12045597
> 
> 赞同：1
> 
> 时间：2012-08-20T21:40:25.370
> 
> 标签：drupal, drupal-path-aliases

由于我们更改了设置，我有一组节点（大约 200 个）需要更新它们的 url 别名；从“site.com/things-to-do/title”到“site.com/guides/title”

我尝试使用 VBO，但是当我选择节点时，单击更新 URL 别名，然后执行，没有任何反应。

虽然我不想直接进行数据库更新，但我也尝试过：“UPDATE url_alias set dst = replace(dst, 'things-to-do', 'guides') WHERE url_alias LIKE 'things-to-do/%' ;

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:56:26.133

自动路径应该可以解决您的问题： [http ://drupal.org/project/pathauto](http://drupal.org/project/pathauto)

它将为您提供删除现有别名并重新生成它们的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T05:35:38.623

除了使用上述 pathauto 模块外，您还应该使用路径重定向模块 - [http://drupal.org/project/path_redirect](http://drupal.org/project/path_redirect) - 这样您就可以将旧链接重定向到新创建的链接，否则您的旧链接将消失. 您还可以使用全局重定向 - [http://drupal.org/project/globalredirect](http://drupal.org/project/globalredirect)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T23:49:23.443

这是我编写的解决问题的快速脚本。它对别名进行简单的查找和替换，然后创建重定向。

您需要安装 url_alias 和 path_redirect 模块，这是针对 Drupal 6 的。这不是最简洁的语法（它写得很快），但它可以工作。

```
$string_to_replace = "foo";
$replacement_string = "bar";

//Get an array containing all aliases that need to be updated
$query = "SELECT * from url_alias where dst like '%$string_to_replace%'";
$result = db_query($query);
$paths = array();
while ($row = db_fetch_array($result)){
  $paths[] = $row;
}

foreach($paths as $path){

  //Determine the new path
  $path['new_dst'] = str_replace($string_to_replace,$replacement_string,$path['dst']);

  //Update the existing url_alias
  $query = "UPDATE url_alias SET dst = '".$path['new_dst']."' WHERE pid = " . $path['pid'];
  $result = db_query($query);

  //Create and save a redirect
  $redirect = array(
    'source' => $path['dst'],
    'redirect' => $path['src'],
  );
  path_redirect_save($redirect);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-11T06:28:46.647

```
$nids = Drupal::entityQuery('node')
    ->condition('type', 'CONTENT_TYPE')
    ->execute();
$nodes = Node::loadMultiple($nids);

foreach($nodes as $node) {
    $node->path->pathauto = 1;
    $node->save();
} 
```

我希望上面的代码能解决这个问题。

# postgresql - 具有任意精度的 Postgresql SQL GROUP BY 时间间隔（低至毫秒）

> ID：12045600
> 
> 赞同：52
> 
> 时间：2012-08-20T21:40:43.800
> 
> 标签：postgresql, group-by

我将测量数据存储到以下结构中：

```
CREATE TABLE measurements(
measured_at TIMESTAMPTZ,
val INTEGER
); 
```

我**已经**知道使用

（一个）`date_trunc('hour',measured_at)`

和

(二)`generate_series`

我将能够通过以下方式汇总我的数据：

```
microseconds,
milliseconds
.
.
. 
```

但是是否可以将数据聚合 5 分钟，或者说任意秒数？是否可以按任意秒数聚合测量数据？

我需要按不同时间分辨率聚合的数据将它们输入 FFT 或 AR 模型，以便查看可能的季节性。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-20T22:59:50.527

您可以通过添加由 generate_series() 创建的间隔来生成“桶”表。`min(measured_at)`此 SQL 语句将为您的数据中的第一天（的值）生成一个五分钟存储桶表。

```
select 
  (select min(measured_at)::date from measurements) + ( n    || ' minutes')::interval start_time,
  (select min(measured_at)::date from measurements) + ((n+5) || ' minutes')::interval end_time
from generate_series(0, (24*60), 5) n 
```

*将该*语句包装在一个公用表表达式中，您可以在其上加入和分组，就好像它是一个基表一样。

```
with five_min_intervals as (
  select 
    (select min(measured_at)::date from measurements) + ( n    || ' minutes')::interval start_time,
    (select min(measured_at)::date from measurements) + ((n+5) || ' minutes')::interval end_time
  from generate_series(0, (24*60), 5) n
)
select f.start_time, f.end_time, avg(m.val) avg_val 
from measurements m
right join five_min_intervals f 
        on m.measured_at >= f.start_time and m.measured_at < f.end_time
group by f.start_time, f.end_time
order by f.start_time 
```

按任意秒数分组是类似的——使用`date_trunc()`.

* * *

更一般地使用 generate_series() 可以让您避免猜测五分钟存储桶的上限。在实践中，您可能会将其构建为视图或函数。您可能会从基表中获得更好的性能。

```
select 
  (select min(measured_at)::date from measurements) + ( n    || ' minutes')::interval start_time,
  (select min(measured_at)::date from measurements) + ((n+5) || ' minutes')::interval end_time
from generate_series(0, ((select max(measured_at)::date - min(measured_at)::date from measurements) + 1)*24*60, 5) n; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-23T09:28:17.567

Catcall 有一个很好的答案。我使用它的示例演示了固定存储桶 - 在这种情况下，从午夜开始每隔 30 分钟。它还说明了在 Catcall 的第一个版本中可能会产生一个额外的桶以及如何消除它。我想要一天 48 桶。在我的问题中，观察有单独的日期和时间列，我想在一个月内对多个不同服务的 30 分钟内的观察进行平均。

```
with intervals as (
    select
        (n||' minutes')::interval as start_time, 
        ((n+30)|| ' minutes')::interval as end_time
    from generate_series(0, (23*60+30), 30) n
)
select i.start_time, o.service, avg(o.o)
from
observations o right join intervals i
on o.time >= i.start_time and o.time < i.end_time
where o.date between '2013-01-01' and '2013-01-31'
group by i.start_time, i.end_time, o.service
order by i.start_time 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-10T03:48:02.637

怎么样

```
SELECT MIN(val), 
EXTRACT(epoch FROM measured_at) / EXTRACT(epoch FROM INTERVAL '5 min') AS int 
FROM measurements 
GROUP BY int 
```

其中 '5 min' 可以是 INTERVAL 支持的任何表达式

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-11-02T23:52:37.743

以下内容将为您提供任何大小的存储桶，即使它们与不错的分钟/小时/任何边界不一致。值“300”用于 5 分钟分组，但可以替换为任何值：

```
select measured_at, 
       val, 
       (date_trunc('seconds', (measured_at - timestamptz 'epoch') / 300) * 300 + timestamptz 'epoch') as aligned_measured_at
from measurements; 
```

然后，您可以在“val”周围使用所需的任何聚合，并根据需要使用“group by aligned_measured_at”。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-06-07T16:20:30.157

这是基于 Mike Sherrill 的回答，除了它使用时间戳间隔而不是单独的开始/结束列。

```
with intervals as (
    select tstzrange(s, s + '5 minutes') das_interval
    from (select generate_series(min(lower(time_range)), max(upper(time_rage)), '5 minutes') s
          from your_table) x)
select das_interval, your_table.*
from   your_table
right join intervals on time_range && das_interval
order by das_interval; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-12-08T18:48:28.143

我想查看过去 24 小时的数据，并以每小时为增量进行计数。我开始使用 Cat Recall 的解决方案，它非常巧妙。但是，它与数据有关，而不仅仅是过去 24 小时内发生的事情。所以我进行了重构，最终得到了一些非常接近 Julian 的解决方案，但 CTE 更多的东西。所以这是2个答案的结合。

```
WITH interval_query AS (
    SELECT (ts ||' hour')::INTERVAL AS hour_interval
    FROM generate_series(0,23) AS ts
), time_series AS (
    SELECT date_trunc('hour', now()) + INTERVAL '60 min' * ROUND(date_part('minute', now()) / 60.0) - interval_query.hour_interval AS start_time
    FROM interval_query
), time_intervals AS (
    SELECT start_time, start_time + '1 hour'::INTERVAL AS end_time
    FROM time_series ORDER BY start_time
), reading_counts AS (
    SELECT f.start_time, f.end_time, br.minor, count(br.id) readings
    FROM beacon_readings br
    RIGHT JOIN time_intervals f
                    ON br.reading_timestamp >= f.start_time AND br.reading_timestamp < f.end_time AND br.major = 4
    GROUP BY f.start_time, f.end_time, br.minor
    ORDER BY f.start_time, br.minor
)
SELECT * FROM reading_counts 
```

请注意，我在最终查询中想要的任何额外限制都需要在`RIGHT JOIN`. 我并不是说这一定是最好的（甚至是一个好方法），但它是我在仪表板中运行的（至少目前）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-08-31T10:17:10.410

我综合了以上所有内容，试图提出一些更容易使用的东西；

```
create or replace function interval_generator(start_ts timestamp with TIME ZONE, end_ts timestamp with TIME ZONE, round_interval INTERVAL)
    returns TABLE(start_time timestamp with TIME ZONE, end_time timestamp with TIME ZONE) as $$
BEGIN
return query
        SELECT
            (n)       start_time,
            (n + round_interval) end_time
        FROM generate_series(date_trunc('minute', start_ts), end_ts, round_interval) n;
END
$$
    LANGUAGE 'plpgsql'; 
```

此函数是[Mikes answer](https://stackoverflow.com/a/12046382/252556)的时间戳抽象，它 (IMO) 使事情变得更简洁，尤其是当您在客户端生成查询时。

还使用内部连接摆脱了`NULL`之前出现的 s 之海。

```
with intervals as (select * from interval_generator(NOW() - INTERVAL '24 hours' , NOW(), '30 seconds'::INTERVAL))
select f.start_time, m.session_id, m.metric, min(m.value) min_val, avg(m.value) avg_val, max(m.value) max_val
from ts_combined as m
inner JOIN intervals f
    on m.time >= f.start_time and m.time < f.end_time
GROUP BY f.start_time, f.end_time, m.metric, m.session_id
ORDER BY f.start_time desc 
```

（也出于我的目的，我添加了更多聚合字段）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-04-16T19:50:19.407

PostgreSQL的[Timescale 扩展](https://github.com/timescale/timescaledb)提供了按任意时间间隔分组的能力。该函数被调用`time_bucket()`并具有与函数相同的语法，`date_trunc()`但将间隔而不是时间精度作为第一个参数。[在这里](https://docs.timescale.com/api/latest/analytics/time_bucket/#time-bucket)你可以找到它的 API Docs。这是一个例子：

```
SELECT
  time_bucket('5 minutes', observation_time) as bucket,
  device_id,
  avg(metric) as metric_avg,
  max(metric) - min(metric) as metric_spread
FROM
  device_readings
GROUP BY bucket, device_id; 
```

如果您希望使用新摄取的数据自动更新*“按间隔分组”*视图，并且如果您想经常查询这些视图，您也可以查看[连续聚合视图。](https://docs.timescale.com/timescaledb/latest/overview/core-concepts/continuous-aggregates/#an-introductory-example)这可以为您节省大量资源，并使您的查询速度更快。

 ** * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-20T21:45:34.467

也许，你可以`extract(epoch from measured_at)`从那开始？

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-07-20T14:53:12.777

从 PostgreSQL v14 开始，您可以使用该[`date_bin`](https://www.postgresql.org/docs/14/functions-datetime.html#FUNCTIONS-DATETIME-BIN)函数：

```
SELECT date_bin(
          INTERVAL '5 minutes',
          measured_at,
          TIMSTAMPTZ '2000-01-01'
       ),
       sum(val)
FROM measurements
GROUP BY 1; 
```*

# css - 删除IE 中的大纲

> ID：12045602
> 
> 赞同：1
> 
> 时间：2012-08-20T21:40:58.637
> 
> 标签：css, internet-explorer, sass, outline

> **可能重复：** [如何删除轮廓图像链接？](https://stackoverflow.com/questions/814366/how-to-remove-outline-image-link)

我正在尝试删除 IE 中的链接大纲。这真的很烦人和难看。我已经尝试了几件事。我的 CSS/SASS 看起来像这样

```
a {
  outline: none;
  outline: 0;
   &:focus {
     outline: none;
     outline: 0;
   }
   &:active {
     outline: none;
     outline: 0;
   }
} 
```

任何人都有任何提示或技巧。我在 IE9 中进行测试，所以我可能有什么特别之处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:42:50.167

摆脱图像或其他对象的轮廓可以这样完成：

```
border-style:none; 
```

# javascript - jQuery .show & .hide 不起作用

> ID：12045604
> 
> 赞同：0
> 
> 时间：2012-08-20T21:41:05.347
> 
> 标签：javascript, jquery

我目前正在构建一个小菜单，该菜单将根据单击的一个来更改 div。因此，如果单击一个，它将显示与之关联的 div 并隐藏其他 div，等等。但我无法让它工作，我也不知道为什么。任何帮助，将不胜感激。谢谢。

下面是我的代码。我已经剪掉了内容，因为它有很多。

```
<script type="text/javascript">
$('.mopHeader').click(function() {
    $('#raid-progress-mop').show();
    $('#raid-progress-cata').hide();
    $('#raid-progress-wotlk').hide();
    $('#raid-progress-tbc').hide();
    $('#raid-progress-vanilla').hide();
});

$('.cataHeader').click(function() {
    $('#raid-progress-mop').hide();
    $('#raid-progress-cata').show();
    $('#raid-progress-wotlk').hide();
    $('#raid-progress-tbc').hide();
    $('#raid-progress-vanilla').hide();
});

$('.wotlkHeader').click(function() {
    $('#raid-progress-mop').hide();
    $('#raid-progress-cata').hide();
    $('#raid-progress-wotlk').show();
    $('#raid-progress-tbc').hide();
    $('#raid-progress-vanilla').hide();
});

$('.tbcHeader').click(function() {
    $('#raid-progress-mop').hide();
    $('#raid-progress-cata').hide();
    $('#raid-progress-wotlk').hide();
    $('#raid-progress-tbc').show();
    $('#raid-progress-vanilla').hide();
});

$('.vanillaHeader').click(function() {
    $('#raid-progress-mop').hide();
    $('#raid-progress-cata').hide();
    $('#raid-progress-wotlk').hide();
    $('#raid-progress-tbc').hide();
    $('#raid-progress-vanilla').show();
});
</script>

<span class="h4">Raid Progress &nbsp; <span class="mopHeader">MoP</span> &nbsp; <span class="cataHeader">Cata</span> &nbsp; <span class="wotlkHeader">WotLK</span> &nbsp; <span class="tbcHeader">TBC</span> &nbsp; <span class="vanillaHeader">WoW</span></span> 

<div id="raid-progress-mop">
    <ul id="raid-mop">
        <li>Content A</li>
    </ul>
</div>

<div id="raid-progress-cata">
    <ul id="raid-cata">
        <li>Content B</li>
    </ul>
</div>

<div id="raid-progress-wotlk">
    <ul id="raid-wotlk">
        <li>Content C</li>
    </ul>
</div>

<div id="raid-progress-tbc">
    <ul id="raid-tbc">
        <li>Content D</li>
    </ul>
</div>

<div id="raid-progress-vanilla">
    <ul id="raid-vanilla">
        <li>Content E</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T21:43:35.963

将您的代码包装在：

```
$(function(){ ... }); 
```

...这是以下的简写形式：

```
$(document).ready(function(){ ... }); 
```

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:43:17.677

您需要将脚本放在标记下方。要么，要么把它放在*document.ready*回调中：

```
$(document).ready(function() {
    // code here
}); 
```

问题是当脚本出现在标记上方时，它将在加载 HTML 之前执行，因此浏览器还不知道*raid-progress-mop*等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T21:51:56.580

## *[jsBin 演示](http://jsbin.com/afajax/2/edit)*

将你的代码包装成一个现成的 finction，我写的这段代码就是你所需要的：

```
$(function(){

  $('span[class$="Header"]').click(function(){
     var classNameSpecific = $(this).attr('class').split('Header')[0];
     $('div[id^="raid-progress-"]').hide();
     $('#raid-progress-'+classNameSpecific).show();     
  });

}); 
```

**解释：**

`$('span[class$="Header"]')`= 定位任何`span`以类**结尾的** `Header`
元素 现在只需将点击处理程序附加到所有跨度。
比，隐藏你所有的`div`元素：
`$('div[id^="raid-progress-"]').hide();`= 将隐藏任何`div`以and`id` **开头** `raid-progress-`
的元素， 而不是你只需要定位`div`包含魔法词的元素： `$('#raid-progress-'+classNameSpecific).show();`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T21:55:40.690

如何在函数内部更动态地执行此操作`ready()`：

```
<script type="text/javascript"> 
    $(function() {
        $('[class$="Header"]').on('click', function() {
            var myClass = $(this).attr('class').replace('Header', '');
            $('[id^="raid-progress"]').hide();
            $('#raid-progress-' + myClass).show();
        });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T21:44:26.460

$('.mopHeader') 尚未定义。用 $(function(){...}) 包装你的脚本

# java - java.rmi.Naming.bind() 中的延迟

> ID：12045605
> 
> 赞同：1
> 
> 时间：2012-08-20T21:41:06.140
> 
> 标签：java, rmi

上周，我们的一个供应商的驱动程序突然在一台已经工作了近一年的机器上开始出现故障。驱动程序输出的最后两条描述性消息现在相隔三分钟（而之前是几秒钟）。对代码进行逆向工程，我发现在调用 java.rmi.Naming.bind() 期间会发生三分钟的延迟。

我解决此问题并从调用 bind() 中获取更多信息的出发点是什么？它不返回成功或失败指示，并且似乎没有抛出任何异常。我会假设一致的 3 分钟延迟意味着在此过程中的某个时间点遇到了一些超时，但是为什么没有失败的迹象呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:37:48.943

这几乎可以肯定是 DNS 问题。检查 DNS 查找和反向查找时间。Naming.bind() 本身在两端都是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:37:48.060

回答我自己的问题：

java RMI 似乎记录到 java.util.logging。因此，配置 java.util.logging 以查看 Java RMI 在做什么，以便您可以调试问题。

（在我的例子中，我们使用 log4j，所以我找到了一个库来将 java.util.logging 消息路由到 log4j。）

启用日志记录后，我们发现 RMI 花了三分钟时间尝试连接到它认为是 localhost 的错误 IP 地址，这要归功于有人在我们的 hosts 文件中添加了错误的条目。

# android - 在运行时在 android 应用程序上放置按钮或其他小部件

> ID：12045606
> 
> 赞同：0
> 
> 时间：2012-08-20T21:41:06.337
> 
> 标签：android, android-layout, android-widget

快速提问：在运行时我进行布尔检查，如果它返回 true，我希望在 MainActivity 类的相对布局中有两个按钮。如果它是错误的，我希望在这些按钮所在的位置（或足够接近）有另外两个小部件。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:14:31.337

您还可以实现一个 ViewSwitcher ，只需一次调用即可轻松切换一组更复杂的按钮/小部件

```
 ViewSwitcher mViewSwitcher = (ViewSwitcher) findViewById(R.id.viewswitcher);

  if (some_logic == true) {
      mViewSwitcher.showNext();
  } 
```

像这样设置你的 XML，上面将在两个 LinearLayouts 之间切换：

```
 <ViewSwitcher 
        android:id="@+id/viewswitcher"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
            --- buttons, Views, whatever---
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
            --- buttons, Views, whatever---
        </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:04:31.917

如果您只有这两种选择，请将它们都放在您的布局中并隐藏/显示您想要的。[查看#setVisibility()](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)

如果您希望它更具动态性，您可以以编程方式添加和删除小部件。[视图组#addView()](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View%29)

在运行时修改 a`RelativeLayout`非常复杂，因为您需要设置所有这些布局参数，以便您可以`FrameLayout`在按钮应该去的地方添加一个简单的布局，如 a 并将它们放在框架内。优点是您可以在 xml 中设置框架的所有相关布局参数。

# objective-c - UIPicker 中的自定义图像

> ID：12045610
> 
> 赞同：0
> 
> 时间：2012-08-20T21:41:23.817
> 
> 标签：objective-c, ios, xcode

我正在尝试在只有一个组件的 UIImagePicker 中实现图像。我添加了一个 uimageview 和一个 uilabel。问题是第一行不应该像第三行一样有图像，我相信我做得对。我的问题是每一行的图像都是不同的，所以为了解决这个问题，我将它们放入一个图像数组中，然后根据传入的行，我显示图像。然而; 它对我不起作用，似乎一遍又一遍地显示相同的图像。谁能告诉我为什么？提前致谢！

```
imageNames= [[NSArray alloc] initWithObjects:@"9_stars.png", @"8_stars.png",@"7_stars.png",@"6_stars.png",@"5_stars.png",@"4_stars.png", nil]; 
```

/

```
-(UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row
    forComponent:(NSInteger)component reusingView:(UIView *)view {

NSString *imageName= [imageNames objectAtIndex:theRow];
NSLog (@"the image name is %@", imageName);
NSLog (@"the current count is %d", theRow);

if(component == 0)
{
    if (row == 0 || row == 17)
    {

        UILabel *channelLabel = [[UILabel alloc] initWithFrame:CGRectMake(-80, 0, 320, 60)];
        channelLabel.text = [currentLottoNames objectAtIndex:row];
        channelLabel.textAlignment = UITextAlignmentLeft;
        channelLabel.backgroundColor = [UIColor clearColor];
        channelLabel.font = [UIFont boldSystemFontOfSize:20];
        channelLabel.backgroundColor = [UIColor clearColor];
        channelLabel.shadowColor = [UIColor whiteColor];
        channelLabel.shadowOffset = CGSizeMake (0,1);

        UIView *tmpView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 110, 60)];

        [tmpView insertSubview:channelLabel atIndex:0];
        return tmpView;

    }
    else {
        UIImage *img = [UIImage imageNamed:imageName];
        UIImageView *temp = [[UIImageView alloc] initWithImage:img];        
        temp.frame = CGRectMake(120, 15,70, 27);

    UILabel *channelLabel = [[UILabel alloc] initWithFrame:CGRectMake(-80, 0, 320, 60)];
    channelLabel.text = [currentLottoNames objectAtIndex:row];
    channelLabel.textAlignment = UITextAlignmentLeft;
    channelLabel.backgroundColor = [UIColor clearColor];
    channelLabel.font = [UIFont boldSystemFontOfSize:20];
    channelLabel.backgroundColor = [UIColor clearColor];
    channelLabel.shadowColor = [UIColor whiteColor];
    channelLabel.shadowOffset = CGSizeMake (0,1);

    UIView *tmpView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 110, 60)];
   [tmpView insertSubview:channelLabel atIndex:0];
    [tmpView insertSubview:temp atIndex: 1];
    return tmpView;
}
   }
 } 
```

**编辑代码**

```
 -(UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row
    forComponent:(NSInteger)component reusingView:(UIView *)view {

NSString *imageName= [imageNames objectAtIndex:row]; // This is where the issue is I believe. What do I use to go through the whole image array?
NSLog (@"the image name is %@", imageName);
NSLog (@"the current count is %d", row);

if(component == 0)
{

       UILabel *channelLabel = [[UILabel alloc] initWithFrame:CGRectMake(-80, 0, 320, 60)];
        channelLabel.text = [currentLottoNames objectAtIndex:row];
        channelLabel.textAlignment = UITextAlignmentLeft;
        channelLabel.backgroundColor = [UIColor clearColor];
        channelLabel.font = [UIFont boldSystemFontOfSize:20];
        channelLabel.backgroundColor = [UIColor clearColor];
        channelLabel.shadowColor = [UIColor whiteColor];
        channelLabel.shadowOffset = CGSizeMake (0,1);

        UIImage *img = [UIImage imageNamed:imageName];
        UIImageView *temp = [[UIImageView alloc] initWithImage:img];        
        temp.frame = CGRectMake(120, 15,70, 27);

    UILabel *channelLabel = [[UILabel alloc] initWithFrame:CGRectMake(-80, 0, 320, 60)];
    channelLabel.text = [currentLottoNames objectAtIndex:row];
    channelLabel.textAlignment = UITextAlignmentLeft;
    channelLabel.backgroundColor = [UIColor clearColor];
    channelLabel.font = [UIFont boldSystemFontOfSize:20];
    channelLabel.backgroundColor = [UIColor clearColor];
    channelLabel.shadowColor = [UIColor whiteColor];
    channelLabel.shadowOffset = CGSizeMake (0,1);

    UIView *tmpView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 110, 60)];

    [tmpView insertSubview:channelLabel atIndex:0];
    [tmpView insertSubview:temp atIndex: 1];
    return tmpView;
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:37:45.750

你的问题是“theRow”——它甚至没有在这个方法中定义。您应该在数组中放置一个占位符字符串 - 即在位置 0 和 17 只需放置 @""。现在你可以使用“row”来索引你的数组，一切都会好起来的。

编辑：所以你的代码意味着你有 18 行，想要在大多数行中显示一个图像，但是对第 0 行和第 17 行做一些不同的事情。因此，你需要一个大小为 18 的数组。

```
imageNames= [[NSArray alloc] initWithObjects:
@"", // row 0 unused
// 1 - 6
@"9_stars.png", @"8_stars.png",@"7_stars.png",@"6_stars.png",@"5_stars.png",@"4_stars.png", nil]; 
// 7 - 12
@"9_stars.png", @"8_stars.png",@"7_stars.png",@"6_stars.png",@"5_stars.png",@"4_stars.png", nil]; 
// 13 - 16
@"9_stars.png", @"8_stars.png",@"7_stars.png",@"6_stars.png",
// 17
@"" // not used
// keep adding
nil]; 
```

这个概念是为了确保数组中的对象数量始终与行数相同。

您可以在此方法的开头添加断言：

```
assert(row < [imageNames count]); 
```

如果您认为是真的结果不是，这将导致异常。

# javascript - FacebookConnect 重定向不再有效

> ID：12045613
> 
> 赞同：0
> 
> 时间：2012-08-20T21:41:33.793
> 
> 标签：javascript, facebook, asp.net-mvc-3

在 FacebookConnect 之后，我已经成功地进行了一段时间的重定向，但它现在已经停止工作。我认为我唯一可能改变的是使用 NuGet 更新我的 Facebook 引用。这是我的代码，谁能告诉我为什么它不再有效？

```
 <script type="text/javascript">

            $(document).ready(function () {

                window.FB.init({ appId: 'xxxx', status: true, cookie: true, xfbml: true });

                $('#fbLogin').click(function () {
                    FB.Event.subscribe('auth.statusChange', function (response) {
                        alert('The status of the session is: ' + response.status);
                        if (response.status == 'connected') {
                            window.location.href = '@Account.Urls.FacebookConnect()';
                        }
                    }, { perms: 'email' });
                });
            });

        </script>

       <fb:login-button autologoutlink="false" perms="email" id="fbLogin">

       </fb:login-button> 
```

无论我是否为 response.status == 'connected' 发出警报，都没有达到警报

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:32:19.527

得到它与 CBroe 的建议和使用 auth.authResponseChange 而不是 auth.statusChange 的混合

# javascript - 正确嵌套 Redis 回调

> ID：12045614
> 
> 赞同：1
> 
> 时间：2012-08-20T21:41:35.837
> 
> 标签：javascript, node.js, redis, snmp, node-redis

我正在编写一个 node.js 程序，它接收 snmp 陷阱并将它们存储在 redis 哈希数据库中。我用 Node.js 编程的时间不长，而且我认为我没有完全理解我的代码是如何执行的。

我觉得我的一些 redis 调用比其他调用更早完成，这就是为什么我尝试将所有内容嵌套在它们的回调函数中，但我担心我没有以正确的方式这样做。

我的输出看起来已经接近我想要实现的目标，但是会弹出一些随机问题，例如我的第一个陷阱为 1，下一次为 11 或 111。我所做的只是`client.incr`对整数执行 redis 函数。

简单地说，我使用两个哈希键来跟踪我收到的当前和过去的陷阱。我将两个数字生成和哈希数作为单独的整数键值跟踪，并根据需要递增它们。这两个数字用于在当前和过去的陷阱哈希中创建和访问值。

这是我的代码。

```
function alarmCheck (key, field, value, alarmType, ipAddress) {
var historyKey = "History:"+key;
//var generationNumber;
//var numberInHash;

client.get(ipAddress+":"+field+":Gen", function (err, rep) {
    //generationNumber = rep;
    var generationNumber = rep;
    console.log("The Gen: "+rep);
    client.get(ipAddress+":"+field+":Field", function (err, reply) {

        var numberInHash = reply;
        //numberInHash = reply;
        console.log("The Field: "+reply);

        console.log("ALARM TYPE: "+alarmType);
        if(alarmType == 1) //Alarm Start value is 1
        {
            fullCurrKey = "Current:" + key;
            fullField = field + ":" + generationNumber + ":" + numberInHash;
            console.log("The FULL Field: "+fullField);
            client.hsetnx(fullCurrKey, fullField, value, function (err, status) {
                if(status == 1)
                {
                    console.log("ADDED to Current!");
                    client.incr(ipAddress+":"+field+":Field", redis.print);
                }
            })
    } else //If Alarm Start value is 0 or 2 
        {
            fullCurrKey = "Current:" + key;
            fullHistKey = "History:" + key;
            console.log("Loop generationNumber: "+generationNumber);
            console.log("Loop numberInHash: "+numberInHash);
            loop1:
            for(var i=1;i<=generationNumber;i++)
            {
                loop2:
                for(var j=1;j<=numberInHash;j++)
                {
                    fullField = field + ":" + i + ":" + j;
                    console.log("Alarm 0 or 2 fullField: "+fullField);
                    client.hget(fullCurrKey, fullField, function (err, reply) {
                        var theField = fullField;
                        if(reply == null)
                        {
                            console.log("Null hget!");
                        }
                        else
                        {
                            console.log("Adding to history!");
                            console.log("The loop hget reply: "+reply);
                            console.log("The loop hget fullField: "+fullField);
                            console.log("The loop hget theField: "+theField);
                            client.hset(fullHistKey, theField, reply, redis.print);
                            //break loop1;
                        }
                    });
                }
            }
            client.set(ipAddress+":"+field+":Field", 1, function (err, reply) {
                client.incr(ipAddress+":"+field+":Gen", function (err, reply) {
                    client.hset(fullHistKey, field+":"+generationNumber+":"+(numberInHash+1), value, function (err, reply) {
                        if (err)
                        {
                            console.log("Fail :( "+err);
                        }
                    });
                }); 
            });
                    }
    });
});
} 
```

这是我当前的一些输出。

```
1) "Composite Gamut Error:1:1"
2) "Composite Gamut Error( -c ) 1345493146"
3) "Luma Gamut Error:1:1"
4) "Luma Gamut Error( -l ) 1345493146"
5) "Jitter1 Level:1:1"
6) "Jitter1 Level 1345493146"
7) "RGB Gamut Error:1:1"
8) "RGB Gamut Error( Rr-gBb ) 1345493146"
9) "Composite Gamut Error:1:2"
10) "Composite Gamut Error( Cc ) 1345493147"
11) "Luma Gamut Error:1:2"
12) "Luma Gamut Error( Ll ) 1345493147"
13) "RGB Gamut Error:1:2"
14) "RGB Gamut Error( R--gBb ) 1345493147"
15) "SDI Input Signal Lock:1:1"
16) "SDI Input Signal Lock( Unlocked ) 1345493147"
17) "Y Anc Checksum Error:3:1"
18) "Y Anc Checksum Error( Error ) 1345493147"
19) "SDI Input Signal Lock:2:1"
20) "SDI Input Signal Lock( Unlocked ) 1345493147"
21) "Line Length Error:4:1"
22) "Line Length Error( Error ) 1345493147"
23) "SAV Place Error:4:1"
24) "SAV Place Error( Error ) 1345493147"
25) "AP CRC Error:3:1"
26) "AP CRC Error( Invalid ) 1345493147"
27) "FF CRC Error:3:1"
28) "FF CRC Error( Invalid ) 1345493147"
29) "EDH Error:3:1"
30) "EDH Error( Invalid ) 1345493147" 
```

这是我的一些历史输出。

```
1) "Line Length Error:1:11"
2) "Line Length Error( Error ) 1345493147"
3) "EAV Place Error:1:11"
4) "EAV Place Error( Error ) 1345493147"
5) "SAV Place Error:1:11"
6) "SAV Place Error( Error ) 1345493147"
7) "Composite Gamut Error:1:3"
8) "Composite Gamut Error( Cc ) 1345493147"
9) "Composite Gamut Error:1:31"
10) "Composite Gamut Error 1345493147"
11) "Luma Gamut Error:1:3"
12) "Luma Gamut Error( Ll ) 1345493147"
13) "Luma Gamut Error:1:31"
14) "Luma Gamut Error 1345493147"
15) "Y Anc Checksum Error:1:11"
16) "Y Anc Checksum Error( Error ) 1345493147"
17) "RGB Gamut Error:1:3"
18) "RGB Gamut Error( R--gBb ) 1345493147"
19) "RGB Gamut Error:1:31"
20) "RGB Gamut Error 1345493147"
21) "Y Anc Checksum Error:2:11"
22) "Y Anc Checksum Error( Error ) 1345493147"
23) "Line Length Error:2:11"
24) "Line Length Error( Error ) 1345493147"
25) "Field Length Error:1:11"
26) "Field Length Error( Error ) 1345493147"
27) "SAV Place Error:2:11"
28) "SAV Place Error( Error ) 1345493147"
29) "AP CRC Error:1:11"
30) "AP CRC Error( Invalid ) 1345493147"
31) "FF CRC Error:1:11"
32) "FF CRC Error( Invalid ) 1345493147"
33) "EDH Error:1:11"
34) "EDH Error( Invalid ) 1345493147" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:54:00.517

我可以为此强烈推荐[异步瀑布](https://github.com/caolan/async#waterfall)。它将为您的代码带来更多结构和控制，并减少嵌套回调。

```
async.waterfall([
  function(callback){
    redis.get('abc', function(error, result) {
      callback(error, result);
    });
  },
  function(firstResult, callback){
    redis.set('abc', firstResult, function(error, result) {
      callback(error, result);
    });
  }
], function (err, result) {
   // do something to finish operations
}); 
```

# android - 如何将图像放在另一个图像上，其中图像的中间应与下方图像的底部对齐

> ID：12045615
> 
> 赞同：0
> 
> 时间：2012-08-20T21:41:35.143
> 
> 标签：android, imageview, layoutparams

我有一个在 Android 布局上显示的横幅。在这个横幅上，我有两个头像，我想将它们并排显示，最重要的是，我想让它们显示在**这两个头像在 y 轴上的中点与底部对齐的位置这些化身坐在上面的横幅。**

你会怎么做？

编辑：

换句话说，我在问你如何使用像 android:layout_below 这样的参数，而不是将 imageview 的顶部与指定布局的底部对齐，而是对齐中心。

![在此处输入图像描述](../Images/cadcf2df36e231fd3d00a8897138fb2e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:54:40.067

将它们放在线性布局中，然后给它们一个宽度以填充父级。然后你可以使用 weight 属性来平均分散宽度。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/clock" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/clock" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:16:20.423

不幸的是，没有直接的布局参数可以将中心点与另一条边对齐。如果您的头像的高度是固定的，您可以添加一些高度为一半的填充，以便它们全部对齐；IE

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <ImageView
        android:id="@+id/banner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="25dp"
        android:src="@drawable/banner" />

    <ImageView
        android:id="@+id/avatar1"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_alignBottom="@id/banner"
        android:src="@drawable/horse" /> 
    <ImageView
        android:id="@+id/avatar2"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_alignBottom="@id/banner"
        android:layout_toRightOf="@id/avatar1"
        android:src="@drawable/horse" />
</RelativeLayout> 
```

但是，如果这些项目的高度是动态的，那么您将需要创建一个自定义`ViewGroup`容器，以便您可以测量头像高度（in `onMeasure()`）并在运行时应用填充（或其他偏移值）。

# ios - 在没有应用程序源代码的情况下使用 Instruments 测试 iOS 应用程序

> ID：12045621
> 
> 赞同：4
> 
> 时间：2012-08-20T21:41:54.120
> 
> 标签：ios, ipad, automated-tests, instruments, ui-automation

我想通过 Xcode 中的 Instruments 使用 UIAutomation 在我的 iOS 设备上测试应用程序。是否可以在无需构建源代码的情况下这样做？这样做的原因是我们的团队将有测试人员编写自动化脚本来测试我们设备上的应用程序，但我们不希望他们都通过同步到最新版本并通过 Xcode 编译它。有谁知道这是否可以通过 UIAutomation 或可能通过 3rd 方应用程序实现？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:57:42.517

您可以在没有源代码的情况下进行 UIAutomation 测试，但您将看不到您的符号，也看不到您的应用程序挂在代码中的哪个位置。

您仍然可以查看是否有一个需要很长时间才能运行的例程，但您将无法看到女巫或调用堆栈

要在没有源代码的情况下进行测试，只需打开自动机并将测试与设备上安装的应用程序绑定

# ruby-on-rails - jQuery-tokeninput 失败：“术语”未定义？

> ID：12045622
> 
> 赞同：3
> 
> 时间：2012-08-20T21:41:59.957
> 
> 标签：ruby-on-rails, jquery-tokeninput

在我的 Rails 应用程序中，我尝试使用 jquery-tokeninput。我有一切工作 - json响应和所有 - 但是当在标记化字段中输入任何内容时脚本出错，抱怨：

```
TypeError: term is undefined    
--> return term.replace(regexp_special_chars, '\\$&'); 
```

jQuery 和 tokeninput 脚本都已加载。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T17:37:58.490

听起来您可能需要指定 propertyToSearch。默认情况下，Tokeninput 会查找“名称”字段，但如果您在 json 响应中没有该字段，则需要告诉它要查看的内容。例如，如果您的 json 看起来像这样：

```
[
  {"id":"856","title":"House"},
  {"id":"1035","title":"Desperate Housewives"},
  ...
] 
```

然后你需要确保你包括这个：

```
$('#tvshow_tokens').tokenInput('/tvshows.json', { propertyToSearch: 'title' }); 
```

# javascript - 有序函数定义 | 好处

> ID：12045623
> 
> 赞同：1
> 
> 时间：2012-08-20T21:42:04.853
> 
> 标签：javascript

如果函数定义无序，Jslint 将调用错误。

显然 jslint 是严格的，但我想知道按顺序排列函数是否有任何好处。

我的意思是在调用它们之前定义它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:43:47.543

函数定义（和`var`语句）被提升到其闭包的顶部。换句话说，代码的执行顺序与您编写的顺序不同。

现在，没有什么比`;`在行尾省略更“错误”的了，但是 jsLint 旨在测试代码的**人类**可读性。跳转不是人类可读的，因此它被认为是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:47:35.837

依靠。

这将成功：

```
var x = y();

function y() { return 9; } 
```

但这会失败：

```
var x = y();

var y = function() { return 9; }; 
```

当第一个脚本被解释时，它会看到`function y`并且使该函数在其范围内可用（在该示例中是全局范围）。

而在第二个示例中，函数被分配给`y`. 就像任何其他变量一样，顺序很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T21:55:46.137

如果在调用之前定义函数，则代码可以由一次编译器处理，否则，您需要一个多次编译器（通常速度较慢）。

也许那里有一些一次性的 JavaScript 编译器（但是，我不知道）。

我一直认为 JSLint 显示该错误是因为它想确保您的代码可以在一次性编译器中成功运行

# javascript - 谷歌街景位置

> ID：12045624
> 
> 赞同：1
> 
> 时间：2012-08-20T21:42:12.093
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers, google-street-view

我正在使用 Google StreetView，并希望允许用户放置标记。

例如，如果它只是谷歌地图（而不是街景），我可以这样做：

```
google.maps.event.addListener(map, 'click', recordPosition);

function recordPosition(e) {
    var marker = new google.maps.Marker({
                    position : e.latLng,
                    map : map,
                    icon : cafeMarkerImage,
                    title : 'Centre of the universe ' + numberOfClicks
                });     

    numberOfClicks++;
} 
```

并且当用户单击时， 将`cafeMarkerImage`放在鼠标光标下。

将这些标记添加到地图后，切换到 StreetView 会正确显示它们……但是，我想将它们添加到 StreetView，而不是地图视图中。

但是，在 StreetView 中，该`'click'`事件不可用。

我想找到`latLng`鼠标移动期间街景中显示的“煎饼”的中心——一旦用户点击。

* * *

[Odi 的回答](https://stackoverflow.com/a/12046994/12570)让我找到了一些方法，但我仍然卡住了：点击让我获得了街景 POV 的当前位置，但随后它立即变为我点击的位置。因此，如果我在点击时抓住 POV 并在那里做我需要的注释，但用户无法再看到它，因为视图发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:27:50.270

您可以使用[StreetViewPanorama 图层](https://developers.google.com/maps/documentation/javascript/reference#StreetViewPanorama)，它为您提供适当的事件和数据。

我猜你想要的是`position_changed`事件。请参阅如何使用事件并检索相应数据的[这个很好的示例。](http://gis.sarup.uwm.edu/kurtm/Mashup/GoogleMashup/streetviewEvents.htm)

简而言之：

```
var start = new google.maps.LatLng(47.500613, 8.724575);
var panoramaOptions = {
    position: start,
    pov: {
         heading: 20,
         pitch: 0,
         zoom: 1
    },
      visible: true
};
var panorama = new google.maps.StreetViewPanorama(document.getElementById("pano"), panoramaOptions);

google.maps.event.addListener(panorama, 'position_changed', function() {
    console.log(panorama.getPosition().toString()); 
});​ 
```

# javascript - 在 DOM 中插入和删除元素是否昂贵？

> ID：12045625
> 
> 赞同：4
> 
> 时间：2012-08-20T21:42:19.483
> 
> 标签：javascript, jquery, dom

目前我正在创建一个类似表格的 Web UI。选项卡位于顶部，它们共享相同的公共区域以显示其相关数据。

我有三个问题：

1.  插入和删除 DOM 元素是一项昂贵的操作吗？

2.  jQuery`append()`和`remove()`方法可以分别用于插入和删除 DOM 元素吗？

3.  如果它们很昂贵，那么有效的替代品是什么`show()`，`hide()`或者还有什么其他的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:49:22.637

> *“我很好奇……插入和删除 dom 元素是一项昂贵的操作吗？”*

大多数浏览器都会免费这样做。说真的，任何导致浏览器重新绘制页面的操作如果你做的太多都可能是“昂贵的”。显示/隐藏也会导致重绘，但是（未经测试）我希望它比附加/删除快一点。

您描述的选项卡界面可能涉及一次添加/删除相当多的元素，这比简单地显示/隐藏每个选项卡的容器 div 更昂贵。

> *“jquery append 和 remove 方法分别插入和删除 dom 元素操作吗？”*

是的。（如果方法名称没有使这一点显而易见[，则文档](http://api.jquery.com/remove/)会这样做。）

> *“如果它们很贵，有什么有效的替代方案……显示和隐藏，还有什么其他的吗？”*

使用`.show()`and`.hide()`是我的偏好，因为它可能会使你的 JS 比你必须追加和删除的复杂得多。正如我已经提到的，对于需要让一组元素同时出现/消失的选项卡类型界面，您可以只显示/隐藏一个包含当前选项卡所有元素的 div。子元素将与它们的父元素一起显示/隐藏。

还可以使用 jQuery`.show()`或`.hide()`其他动画方法，例如`.fadeIn()`，`.fadeOut()`您可以在选项卡之间添加一些漂亮的过渡。

一般来说，*先把*你想要的效果编码，以后如果发现效果不好，再考虑提高效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T02:54:01.437

请注意，jQuery.remove 不仅仅是从 DOM 中删除元素。从文档中，“除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。” 所以这将比简单的 DOM 操作更昂贵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-03T06:56:27.263

> **重绘**

当对影响可见性但不影响布局的元素进行更改时，会发生重绘。例如，`opacity`、`background-color`、`visibility`和`outline`。**重绘成本很高，因为浏览器必须检查 DOM 中所有其他节点的可见性**——一个或多个节点可能在更改的元素下变得可见。

> **回流焊**

回流的影响更大。这是指**重新计算所有元素的位置和尺寸**，从而导致重新渲染部分或全部文档。更改单个元素会影响所有子元素、祖先元素和兄弟元素。

两者都是浏览器阻止的；在重绘或重排发生期间，用户或您的应用程序都不能执行其他任务。在极端情况下，CSS 效果可能会导致 JavaScript 执行速度变慢。这是您遇到滚动不顺畅和界面无响应等问题的原因之一。

了解何时触发回流很有用：

添加、删除或更改可见的 DOM 元素 第一个是显而易见的；使用 JavaScript 更改 DOM 将导致重排。

**添加、删除或更改 CSS 样式**

同样，直接应用 CSS 样式或更改类可能会改变布局。更改元素的宽度会影响同一 DOM 分支上的所有元素及其周围的元素。

**CSS3 动画和过渡**

动画的每一帧都会导致回流。

**使用 offsetWidth 和 offsetHeight**

奇怪的是，读取元素的 offsetWidth 和 offsetHeight 属性会触发初始回流，因此可以计算数字。

**用户操作**

最后，用户可以通过激活 :hover 效果、在字段中输入文本、调整窗口大小、更改字体尺寸、切换样式表或字体来触发重排。

回流处理流程命中会有所不同。有些浏览器在某些操作上比其他浏览器更好。有些元素的渲染成本比其他元素高。

*资料来源：[https ://www.sitepoint.com/10-ways-minimize-reflows-improve-performance/](https://www.sitepoint.com/10-ways-minimize-reflows-improve-performance/)*

# c - 在C中以日期形式组合4个单独的整数

> ID：12045626
> 
> 赞同：0
> 
> 时间：2012-08-20T21:42:23.567
> 
> 标签：c

我有一个读取 EMSO 的程序（一个告诉你出生日期、州、性别和其他一些东西的数字）。它是生成的，它是一个 13 位数字。最后一个是控件，前两个是日，后两个是月，后三个是年。我希望程序通过 EMSO 和当前计算机日期计算出您的年龄。这是我到目前为止所写的：

```
#include <stdio.h>
#include <windows.h>

int main (void) 
{
unsigned long long int  emso;
int kontrola;
int a,b,c,d,e,f,g,h,i,j,k,l;
int x,y;
int kraj;

system("cls");  

printf("Enter your EMSO: ");
while(scanf("%lld",&emso)!=1)fflush(stdin);

    while(emso!=-1){

    kontrola=emso%10;
    emso/=10;
    l=emso%10;
    emso/=10;
    k=emso%10;
    emso/=10;
    j=emso%10;
    emso/=10;
    i=emso%10;
    emso/=10;
    h=emso%10;
    emso/=10;
    g=emso%10;
    emso/=10;
    f=emso%10;
    emso/=10;
    e=emso%10;
    emso/=10;
    d=emso%10;
    emso/=10;
    c=emso%10;
    emso/=10;
    b=emso%10;
    emso/=10;
    a=emso%10;

    x= (7*a+ 6*b+ 5*c+ 4*d+ 3*e+ 2*f+ 7*g+ 6*h+ 5*i+ 4*j+ 3*k+ 2*l);
    x=x%11;

    if (x!=0){
        x=11-x;     
    }

    kraj=h*10+i;

    if (x==kontrola){
        printf("\n\nEMSO is legitimate!\n");
        if(j==0){
            printf("\nPerson is MALE\n");
        }
            else if (j==5){
                printf("\nPerson in FEMALE\n");
            }

        if (e==9){
            y=1;
        }

        else if (e==0){
            y=2;
        }

        printf("\nDate of birth: %d%d.%d    %d.%d%d%d%d.\n",a,b,c,d,y,e,f,g);   

        if (kraj >=00 && kraj <10){
            printf("\nPerson was born abroad!\n");
        }

        if (kraj>=10 && kraj < 20){
            printf("\nPerson was born in BiH.\n");
        }

        if(kraj >=20 && kraj < 30){
            printf("\nPerson was born in Montenegro.\n");
        }

        if (kraj >= 30 && kraj < 40){
            printf("\nPerson was born in Croatia.\n");
            if (kraj == 33){
                printf("\tPerson was born in Zagreb.\n");
            }
        }

        if (kraj >=40 && kraj < 50){
            printf("\nPerson was born in Macedoniji.\n");
        }

        if (kraj >= 50 && kraj < 60){
            printf("\nPerson was born in Slovenia.\n");
        }

        if (kraj >=70 && kraj < 80){
            printf("\nPerson was born in Srbia.\n");
            if (kraj == 71){
                printf("\tPerson was born in Beogerad.\n");
                }
        }

        if (kraj >=80 && kraj < 90){
            printf("\nPerson was born in Vojvodina.\n");
            if(kraj == 80){
                printf("\tPerson was born in Novi Sad.\n");
                }
        }

        if (kraj >=90 && kraj < 100){
            printf("\nPerson was born in Kosovo.\n");
        }
    }

    if (x!=kontrola){
        printf("\nEMSO is NOT legitimate!\n");
    }

    printf("\n");
    system("pause");
    system("cls");  

    printf("Enter your EMSO: ");
    while(scanf("%lld",&emso)!=1)fflush(stdin);
}

return 0; 
```

}

在所有这些混乱中，`a`&`b`代表日，代表`cd`月，代表`efg`年。

此外， fflush 的东西不能正常工作。它破坏了出生印记。

为了更好地理解，这是我的 emso：0701996500037。这是正常情况下出现的结果：EMSO 是合法的！

人是男性

出生日期：1996 年 1 月 7 日。

人出生在斯洛文尼亚。

我很高兴。如果我写这个：0701996500037ž，没问题，同样的输出。但是如果我输入z0701996500037，没有反应，就像没有输入一样。一个如果我写0701u996500037，验证是可以的，但其他都是错误的。地点和出生是错误的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:53:34.903

`time`返回自 Epoch 以来的秒数。`mktime`返回自 Epoch 以来的秒数作为它的`struct tm *`参数。因此：

```
struct tm date = { /* fill tm_year, tm_mon, etc. */ };
double seconds_since_date = difftime(time(0), mktime(&date)); 
```

会给你自日期以来经过的秒数。（这不考虑时区。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T22:09:25.700

请检查下面的链接，这可能对你有帮助

[http://www.cplusplus.com/reference/clibrary/ctime/time/](http://www.cplusplus.com/reference/clibrary/ctime/time/)

# php - 禁用输入字段中的 html 标签、php、脚本

> ID：12045634
> 
> 赞同：2
> 
> 时间：2012-08-20T21:42:59.197
> 
> 标签：php, javascript, html, input

> **可能重复：**
> [在 PHP 站点中避免 xss 攻击的最佳实践是什么](https://stackoverflow.com/questions/71328/what-are-the-best-practices-for-avoiding-xss-attacks-in-a-php-site)

我有一个表格，用户可以填写他们的个人信息。用户提交表单，Web 服务将处理这些信息并将信息存储在 mysql 数据库中。

但是，如果用户在输入字段中输入 html 标记、php 代码或 javascript 会怎样。我想防止这种情况发生。我知道在javascript中有一个方法调用escapehtml，在php中它是strip_tags。

我只是想知道禁用从输入字段键入 html、php、脚本的能力的正确方法。我是否对收到的所有输入使用 strip_tags？如果我使用 strip_tags，如何禁用脚本？还是在 mysql 中可以做到这一点？

谢谢

这是表格：

```
<div>
    <label class='info-title whitetext' for="name">Full Name: </label>
    <input type="text" name="name" id="name" size='25' maxlength="100" required />
</div>

<div>
    <label class='info-title whitetext' for="phone">Phone: </label>
    <input type='text' pattern='\d+' name='phone' id='phone' size='25' maxlength='12' />
</div>

<div>       
    <label class='info-title' for="email">Email: </label>
    <input type="email" name="email" id="email" size='35' maxlength="60" required />
</div>

<div>       
    <label class='info-title' for="address">Address: </label>
    <input type="text" name="address" id="address" size='45' maxlength="50" required />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:56:09.270

尝试`htmlspecialchars($string);`

这会将所有 HTML 标记编码为字符代码（`<div>`将变为`&lt;div&gt;`，将在不被解析为 html 的情况下显示）这样，也无法创建脚本标记。

确保在将内容提供给数据库之前清理内容，例如通过转义`mysqli_escape_string()`（其他人可能会建议您使用`prepare`语句）。

将 HTML 字符编码的字符串放入数据库很可能*不是最佳实践，因为它只会不必要地增加字符串大小。*（而且它本身不提供针对 SQL 注入的保护）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:46:23.283

就个人而言，我只是喜欢这样做`$out = str_replace("<","&lt;",$in)`。它为用户提供了尽可能少的干扰，并且他们最有可能得到他们输入的内容。

如果用户输入可能以 HTML 属性结尾（无论出于何种原因），您还应该替换`"`为`&quot;`.

永远不要将用户提供的内容放入`<script>`标签中，也不要在没有先执行替换的情况下将其保存到文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:03:07.270

您不能禁用“从输入字段键入 html、php、脚本的能力”，除非您实时检查用户的输入并在检测到输入标签时专门阻止他们。但是我看不出任何人想要这样做的原因，正确的方法是在提交时正确处理用户的输入。

对于html标签或php代码之类的东西，你肯定可以使用escapehtml或strip_tags，但如果你稍后将内容放入mysql，我不得不提醒你sql注入攻击。

如果您不熟悉该术语，用户可以输入干扰您的 sql 查询的 mysql 查询。如果我们盲目地将用户提供的内容插入到“INSERT”语句中，这些语句可能会被用户输入中的 sql 关键字更改。

有关防止 sql 注入攻击的方法，您可以查看 wiki 的页面以获得良好的开始：[http ://en.wikipedia.org/wiki/SQL_injection#Mitigation](http://en.wikipedia.org/wiki/SQL_injection#Mitigation)

# c# - WCF 客户端未释放保留的内存

> ID：12045635
> 
> 赞同：1
> 
> 时间：2012-08-20T21:43:06.523
> 
> 标签：c#, wcf, com

我创建了一个托管在 exe 进程中的 wcf 服务，并通过调用该服务的类库实例化了客户端。类库用于 com 插件到 excel 2007，wcf 服务的原因是我们在检索大量数据时不会用完 excel 进程内内存。

我通过使用 WSHttpBinding 实现 ClientBase 创建了 wcf 服务。我目前正在使用一个简单的项目进行测试，唯一的功能是从 wcf 服务返回一条消息。

我的问题是关于创建 wcf 客户端的内存使用情况，以及为什么它在处理后没有被释放。我使用地址空间监视器来监视内存使用情况并创建绑定，并且客户端使用了大约 70mb 的已提交内存。

有关 com dll 的 wcf 内存使用或 GC 的任何信息都会很有用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:49:16.607

这就是 .net 中垃圾收集的工作方式。在各种地方，它都有优势，但在某些地方，它似乎是一种障碍。您可能会发现 - 我有点担心 - 当您处理 1 个表单并创建一个新实例时，它会重用该内存空间。虽然我对此表示怀疑。

无论如何.......net中的垃圾收集有点有趣。

它最终会被清理干净……只是在不确定的时间内。

我相信有一个命令可以强制垃圾收集

[在 C# 中强制垃圾回收的最佳实践](https://stackoverflow.com/questions/233596/best-practice-for-forcing-garbage-collection-in-c-sharp)

当然它有点像搏击俱乐部——不要谈论山雀，如果你找到了，你可能会希望你没有

```
GC.Collect(); 
```

iirc

dispose 也有一个带布尔值的重载。当您调用 true 时，它​​也会通过所有部分强制它们。有几种易于搜索的处置模式。Juval Lowry 在他的组件书中深入探讨了它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:07:07.590

这是一篇文章：

[http://www.danrigsby.com/blog/index.php/2008/02/26/dont-wrap-wcf-service-hosts-or-clients-in-a-using-statement/](http://www.danrigsby.com/blog/index.php/2008/02/26/dont-wrap-wcf-service-hosts-or-clients-in-a-using-statement/)

下面还有一个和你之前发布的类似的帖子。伊戈尔·泽瓦卡回答了这个问题。希望它可以增加更多的知识。

[this.Dispose() 关闭后不会释放 Form 使用的内存。](https://stackoverflow.com/questions/2940629/this-dispose-dont-release-memory-used-by-form-after-closing-it)

# php - 通过 PDO 将数据插入 MySQL，尝试使用数组包含时间戳和数据 - 出现错误？

> ID：12045636
> 
> 赞同：0
> 
> 时间：2012-08-20T21:43:08.953
> 
> 标签：php, mysql, database, pdo

我有一组存储在变量中的数据，我想要一个页面将该数据写入 MySQL 数据库，我想包括插入时间，这是我的方法：

```
$username="username"; $password="password";

try {
  $pdo = new PDO('mysql:host=localhost; dbname=db01', $username, $password);
  $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

  $stmt = $pdo->prepare('INSERT INTO table01
  (
   Time,
   variable1,
   variable2,
  )

VALUES
  (
    :Time,
    :variable1,
    :variable2,
  )');

  $stmt->execute(array(
        ':Time' => NOW(),
        ':variable1' => $var1,
        ':variable2' => $var2,
  ));

  echo $stmt->rowCount(); // 1
} catch(PDOException $e) {
  echo 'Error: ' . $e->getMessage();
} 
```

在加载此页面时，从页面中删除 css，我得到了页面应该是什么样子的一种乱码输出（白屏，纯文本一些图像），另外在检查数据库时没有任何内容写入它。

如果没有 Time 变量，一切都可以完美运行。

有什么建议吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T21:46:27.583

抱歉，我花了点时间重新阅读。您正在使用 nysql 函数`now()`来完成这项工作，因此您不需要将其设置为参数，因此根本不需要绑定它。只需将其写入您的查询。

```
 $stmt = $pdo->prepare('INSERT INTO table01
  (
   Time,
   variable1,
   variable2,
  )

VALUES
  (
    now(),
    :variable1,
    :variable2,
  )');

  $stmt->execute(array(
    ':variable1' => $var1,
    ':variable2' => $var2,
  )); 
```

编辑重新评论

查询中的`:`表示它作为准备好的查询中的参数。这意味着您*必须*通过`bind()`命令绑定它。但是，如果您从数据库中插入数据*（*例如使用内置函数，或从另一行中提取数据），则无需在初始查询中声明它，`:`因此您无法传递它到绑定参数数组中的查询。

# ruby-on-rails - 没有路线匹配资产

> ID：12045638
> 
> 赞同：0
> 
> 时间：2012-08-20T21:43:12.463
> 
> 标签：ruby-on-rails, heroku, carrierwave

每当我尝试在我的 Heroku 应用程序上使用 Carrierwave + s3 上传文件时，我都会收到此错误“我们很抱歉，但出了点问题。”，查看我的日志，我看到了这个错误：

```
 2012-08-20T21:18:56+00:00 app[web.1]: Started GET "/assets/" for 24.90.124.181 at 2012-08-20 21:18:56 +00002012-08-20T21:18:56+00:00 app[web.1]:2012-08-20T21:18:56+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/assets"): 
```

我已完成本[教程](http://batsov.com/articles/2011/10/30/deploying-rails31-apps-on-celadon-cedar/)中的所有操作，将我的应用程序部署到 Cedar 堆栈上的 Heroku，但我仍然看到该错误。我还必须将此添加到我的 application.html

```
 <%= javascript_include_tag :defaults %> <%= javascript_include_tag "jquery" %> <%= javascript_include_tag "nested_form"%> <%= javascript_include_tag "application"%> 
```

因为只有 <%= javascript_include_tag "application" %> 加载了 "application.js"

我已经尝试了我遇到的所有尝试让我的上传器工作，但我不知道问题是什么。一切都在我的本地应用程序上完美运行。

这是我在[github](https://github.com/chrisbedoya/markt)上的应用 My Heroku[应用](http://freezing-sword-8624.herokuapp.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:09:20.990

您可以轻松更换

```
<%= javascript_include_tag :defaults %>
<%= javascript_include_tag "jquery" %>
<%= javascript_include_tag "nested_form"%>
<%= javascript_include_tag "application"%> 
```

with：`<%= javascript_include_tag "application" %>`如果您的`application.js`文件执行此导入。

默认导入是：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

如果问题是缺少javascript，这应该解决它

我看到的其他问题是里面的这个链接`app/views/deals/show.html.erb`：

```
<%= image_tag(@deal.user.logo, :class => 'company_logo') %> 
```

此行返回此 html：

```
<img alt="Assets" class="company_logo" src="/assets/"> 
```

此 img src 无效，这是您在日志中收到的错误。

如果此图像标签可以链接到图像路径，就像`/assets/avatar.png`我相信您的问题将得到解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:18:54.807

由于您使用的是 Carrierwave，因此您需要执行以下操作：

```
<%= image_tag(@deal.user.logo.url, :class => 'company_logo') %> 
```

或者

```
<%= image_tag(@deal.user.logo.current_path, :class => 'company_logo') %> 
```

# ajax - 使用sitemesh和struts2的回调错误的ajax响应

> ID：12045644
> 
> 赞同：0
> 
> 时间：2012-08-20T21:43:23.673
> 
> 标签：ajax, struts2, callback, response, sitemesh

我使用 sitemesh 和 struts2 框架构建了一个简单的 Web 应用程序。现在我在 jsp 中使用 ajax 回调获得正确响应时遇到了一些问题。我在另一个 Web 应用程序中成功使用了相同的过程，但是使用了带有 struts 1 的图块。

我试图解释这个问题。我有一个jsp（用一个名为“basic-theme.jsp”的模板中的sitemesh装饰，带有一个decorator:title和一个decorator:body标签）。该页面有一个输入按钮，它调用一个 jQuery.ajax 发布函数：

```
function checkRicevuta(){
    var params = "actionToDo=checkRicevuta&idRicevuta="+$("#idRicevuta").val();
    $.ajax({
         type: "POST",
         url: "addettoReclami",
         data: params,
         success: function(response){
                    $("#checkRicevuta-box").append(response);
                  }
    });
} 
```

url 正确调用了正在处理“参数”的 ActionSupport 类：

```
if(request.getParameter("actionToDo")!=null && request.getParameter("actionToDo").equals("checkRicevuta")){
        logger.info("Avvio procedura di verifica ricevuta fiscale");
        String idRicevuta = request.getParameter("idRicevuta");
        if(dbController.checkRicevuta(idRicevuta))
            request.setAttribute("message", "Ricevuta valida!");
        else request.setAttribute("message", "Ricevuta non valida");

        return "esitoRicevuta";

    } 
```

'esitoRicevuta' 转发到一个简单的 jsp，实际上只包含两行：

```
 <% String message = (String)request.getAttribute("message"); %>
 <p><%=message %></p> 
```

因为我想将这个简单的响应附加到第一个进行 ajax 调用的 jsp 的 div 中。问题是响应也被sitemesh修饰，所以我实际上得到了一个嵌套的基本主题。在 sitemesh xml 中，我将排除模式设置为不处理“响应 jsp”所在的 /fragment/* 路径：

```
<?xml version="1.0" encoding="UTF-8"?>
<decorators>
   <excludes>
      <pattern>/popup/*</pattern>
      <pattern>/fragment/*</pattern>
   </excludes>
   <decorator name="basic-theme" page="/decorators/basic-theme.jsp">
      <pattern>/*</pattern>
   </decorator>
</decorators> 
```

我说，对tiles和struts1使用相同的过程，问题不会发生。可能我错了，但我认为这是因为响应附加在“调用者 jsp”内，因此 sitemesh 两次装饰页面，一次用于调用者 jsp 的正文，另一次用于调用者 jsp 正文中的片段。

所以我问你......为什么会出现这个问题？有没有办法避免这种情况？

提前致谢

# c++ - 编译时未定义对“main”的引用

> ID：12045645
> 
> 赞同：4
> 
> 时间：2012-08-20T21:43:30.960
> 
> 标签：c++, linux, makefile

可能重复[this](https://stackoverflow.com/questions/7225076/strange-compiler-error-undefined-reference-to-main)或[this](https://stackoverflow.com/questions/7965437/undefined-reference-to-main-collect2-ld-returned-1-exit-status)，但即使在尝试挖掘答案一段时间后，我也无法解决这个问题。

在尝试编译以下makefile时，

```
all:  test

    test:  constants.h Point.h Point.cpp line_t.h line_t.cpp drawing_t.h drawing_t.cpp clipper_t.h clipper_t.cpp main.cpp
        g++ -o test Point.cpp line_t.cpp drawing_t.cpp clipper_t.cpp main.cpp -lglut 
```

我收到一个错误：

> g++ -o test Point.cpp line_t.cpp drawing_t.cpp clipper_t.cpp main.cpp -lglut /usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu /crt1.o: 在函数`_start': (.text+0x18): undefined reference to`main'collect2: ld 返回 1 退出状态 make: *** [test] 错误 1

我是 Makefile 的新手。我想，我错过了一些太明显的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T21:45:59.703

显然您的文件都没有定义带有签名的函数

```
int main(); 
```

或者

```
int main(int argc, char *argv[]); 
```

# java - 向网络服务发送 POST 请求

> ID：12045651
> 
> 赞同：0
> 
> 时间：2012-08-20T21:44:07.990
> 
> 标签：java, rest, jaxb, jersey

我想发送一个 POST 请求来测试我的本地网络服务。请求正文是 XML 正文，我使用 JAXB 生成了类。

一切都很好，但是当我执行以下代码时

```
ClientResponse response = service.path("api")
                    .path("v1")
                    .path("shipments")
                    .path("package")
                    .path("order")
                    .path("status")
                    .accept(MediaType.APPLICATION_XML)
                    .post(ClientResponse.class, orderStatusRequest); 
```

我收到以下错误

```
com.sun.jersey.api.client.ClientHandlerException: A message body writer for Java type, class com.api.shipments.model.OrderStatusRequestType, and MIME media type, application/octet-stream, was not found 
```

有人可以指点我一个方向，我在这里想念什么吗？

# google-app-engine - 如何在 GAE 中处理缓存和数据存储同步

> ID：12045656
> 
> 赞同：0
> 
> 时间：2012-08-20T21:44:29.580
> 
> 标签：google-app-engine, caching, google-cloud-datastore

我正在编写一个小型 appengine 应用程序，我想开始使用 Datastore。
我的应用程序有一些用户，每个用户都是一个复杂的 JAVA 类。用户可能会在它们之间交换一些“点”对象，因此我需要数据可用且快速。

我的问题很笼统：
我应该如何处理数据缓存？
将数据完全存储在数据存储中并在每次调用中获取数据在运行时听起来很慢。
另一方面，将数据保存在静态 JAVA 类中听起来很棘手，因为服务器时不时会重置并且数据会被擦除。
如果我有一个主循环，就像在常规控制台应用程序中一样，我可能会在一天中的预定义时间每天保存两次到三次数据。
我应该如何管理我的代码，它会不时地将状态保存在数据存储中，并且这种方式不会丢失任何数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:22:40.383

如果写操作的数量少于读操作，最好尝试使用 memcache 模块进行“直写缓存”。 [https://developers.google.com/appengine/docs/java/memcache/](https://developers.google.com/appengine/docs/java/memcache/)

基本上，直写缓存的工作方式如下：

*   对于每个写操作，程序更新数据存储，然后将数据备份到内存缓存
*   对于每次读取操作，程序都会尝试从 memcache 中读取。如果它可以找到所需的数据，则返回，否则它将从数据存储中获取数据并将结果备份到内存缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:13:52.477

正如@lucemia 所指出的，您应该使用内存缓存。

如果您使用 objectify，您可以[以声明方式设置缓存](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Caching)，而无需编写和缓存处理代码。

# java - 如何让用户输入到 EditText 字段

> ID：12045657
> 
> 赞同：0
> 
> 时间：2012-08-20T21:44:31.757
> 
> 标签：java, android

我正在构建一个更大的应用程序，我制作了这个小应用程序只是为了弄清楚如何从用户输入中获取文本，但是它不起作用。如果我在 EditText 字段的 Text 属性上创建一个字符串引用，它可以正常工作。如果我将其留空并在应用程序在我的模拟器中运行时将文本输入该字段，则它不起作用。有任何想法吗。

```
package com.example.stringtest;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import android.view.View;

import android.widget.EditText;
import android.widget.Button;

public class Main extends Activity {

EditText display;
EditText displayTwo;
String displayContents;
Button displayText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainlayout);

    display = (EditText) findViewById(R.id.editText1);
    displayContents = display.getText().toString();

    displayTwo = (EditText) findViewById(R.id.editText2);

    displayText = (Button) findViewById(R.id.button1);

    displayText.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            displayTwo.setText(displayContents);

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.mainlayout, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:58:31.533

`displayContents = display.getText().toString();`

当里面的文本发生变化时，displayContents 不会被更新`EditText`。

而不是这样做，您应该在`getText()`每次想要获取当前文本值时调用。

如果您想在每次更改 EditText 中的文本时都收到通知，那么您应该在适当的事件中添加一个侦听器。在这种情况下，它是`EditText.addTextChangedListener`.

有关此的更多信息：http: [//developer.android.com/reference/android/widget/TextView.html#addTextChangedListener](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener(android.text.TextWatcher) (android.text.TextWatcher )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:15:59.320

试试这个！

```
 displayText.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
　　　　　　displayContents = display.getText().toString();
            displayTwo.setText(displayContents);

        }
    }); 
```

# mongodb - 启动 mongo 然后离开 shell 而不关闭服务器

> ID：12045658
> 
> 赞同：0
> 
> 时间：2012-08-20T21:44:36.803
> 
> 标签：mongodb

嗨，伙计们，我在 Putty SSH 上远程启动 Mongo，在 mongod 之后，它说“正在侦听端口”，但我不能在不关闭服务器的情况下离开。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:56:47.610

[启动和停止 Mongo](http://www.mongodb.org/display/DOCS/Starting+and+Stopping+Mongo)文档文章解释了几个选项，其中之一是使用`--fork`命令行参数`mongod`作为后台进程启动。此外，您可以考虑使用操作系统提供的服务控制（例如 Windows 服务、init.d、[upstart](http://upstart.ubuntu.com/)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:54:37.553

在 linux 上，查找[Screen](http://magazine.redhat.com/2007/09/27/a-guide-to-gnu-screen/)模块。还有其他替代方案也可以做同样的事情。它基本上创建了一个保存的会话，您可以稍后重新附加 - 我广泛使用它来运行我可以快速重新附加的长时间测试/服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:51:25.557

您可以在 Windows 或 Linux 中制作一个快速的 Mongo 服务脚本。

您也可以按`CTRL`+`Z`这基本上会将其切换到后台进程。这基本上让你回到了终端（或者至少对我来说是这样）。

我也喜欢“屏幕”。它非常强大且易于导航，因此我个人会尝试一下。

# jquery - 图像开始下载的事件是什么？

> ID：12045659
> 
> 赞同：6
> 
> 时间：2012-08-20T21:44:36.963
> 
> 标签：jquery, javascript-events

我知道`jQuery.load()`，它在`<img>`完成下载后被解雇。

我想知道当浏览器开始下载图像时会触发什么事件。通常浏览器一开始就知道图片的大小，然后需要一段时间（取决于图片大小）才能下载图片。

我想在浏览器知道图片大小或浏览器开始下载图片后立即附加一个事件以了解图片大小。

**[编辑]**

感谢@jfriend00 的想法，现在我`setInterval`用来检查尺寸。但不是图片的大小，有些浏览器在下载完成之前只是不告诉。所以我检查容器的大小。一旦浏览器知道图片大小，它将调整容器大小。瓦拉，完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T21:50:23.243

浏览器不提供一个特殊的事件来告诉你它知道图像大小的最早时间（在它完成下载图像之前）。您所能做的就是设置一个适当的负载处理程序来知道图像何时完成下载，然后知道它的大小。

在某些浏览器中似乎可以在加载完整图像之前稍微获取高度和宽度的蛮力方法是轮询加载图像是否存在`.width`和`.height`。在Chrome 中的[这个 jsFiddle](http://jsfiddle.net/jfriend00/99Usu/)中，它有时在`onload()`事件触发之前可用。我没有在其他浏览器中测试过这个。

* * *

如果您使用 onload 处理程序的路线，并且您的`.src`特定图像标签位于页面的 HTML 中，那么确保在加载时收到通知的唯一方法是放置一个内联图像处理程序，以便从安装处理程序一开始：

```
<img src="xxx.jpg" onload="handleLoad(this)"> 
```

尝试从您的页面 javascript 附加事件处理程序可能为时已晚（在图像完成加载后）。浏览器不提供中间事件信息（例如当它知道大小但尚未完成下载图像时）。

对于动态创建的图像对象（您在 javascript 中创建的图像对象），您可以在创建对象时为 load 事件附加一个侦听器。

```
var img = new Image();
img.onload = function() {
    // the image is now loaded here and height and width are known
};
img.src = "xxxx.jpg"; 
```

注意：使用动态创建的图像对象执行此操作时，您必须`onload`在设置值之前设置处理程序`.src`。在某些版本的 IE 中，如果图像被缓存，加载事件将在设置值时立即触发，`.src`因此如果您`.src`先设置然后设置处理程序，如果图像在浏览器缓存中`onload`，您将错过该事件。`onload`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T21:48:51.730

`onStartLoad`恐怕一个事件不存在。您需要使用您似乎已经知道的“加载”事件。

有一种不安全且安全的方法可以做到这一点。

```
$(function() {
    $(imgNodeSelector).on('load', function(){
        //do stuff here
    });
}); 
```

这是不安全的，因为某些浏览器可以在 'onDomReady' 事件触发之前加载缓存的图像，在这种情况下，加载处理程序放置得太晚 - 它会“错过船”。因此，执行以下操作会更安全：

HTML：

```
<img class="delayedLoad" src="" data-src="path/to/images/myImg.jpg" /> 
```

javascript:

```
$(function() {
    $("img.delayedLoad").each(function() {
        $img = $(this);
        $img.on('load', function() {
            //do stuff here
        }).attr('src', $img.data('src'));
    });
}); 
```

# php - 在 PHP 中向 Meetup API 发出 GET 请求

> ID：12045661
> 
> 赞同：1
> 
> 时间：2012-08-20T21:44:37.917
> 
> 标签：php, api, curl, meetup

我正在使用 PHP 内置的 cURL 库向 Meetup API 发出 GET 请求。这是我正在运行的查询示例，以查看距离中央公园 25 英里的每个聚会组：

[https://api.meetup.com/groups.json/?lat=40.75&lon=-73.98999786376953&order=members&page=200&offset=0&key=MY_API_KEY](https://api.meetup.com/groups.json/?lat=40.75&lon=-73.98999786376953&order=members&page=200&offset=0&key=MY_API_KEY)

此查询在传递给浏览器时正常工作，它返回例外的 200 个最大组。

当我在 PHP 脚本中运行它时，我使用带有这些选项的 cURL

```
curl_setopt($cURL, CURLOPT_URL, $groups_url);
curl_setopt($cURL, CURLOPT_HEADER, 1);
curl_setopt($cURL, CURLOPT_RETURNTRANSFER, 1);

$json_string = curl_exec($cURL); 
```

我希望能够让 cURL 执行并返回一个我可以解析的 json 字符串，但由于某种原因我不明白，curl_exec 的结果始终为 NULL，我不确定为什么输入在浏览器无法在脚本中运行，这可能只是我很笨。提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:51:11.107

这是因为它的 https [SSL]。所以快速解决方法是添加这一行

```
curl_setopt($cURL, CURLOPT_SSL_VERIFYPEER, 0); 
```

这里是所有工作的例子

```
$cURL = curl_init();
curl_setopt($cURL, CURLOPT_URL, "https://api.meetup.com/groups.json/?lat=40.75&lon=-73.98999786376953&order=members&page=200&offset=0&key=MY_API_KEY");
curl_setopt($cURL, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($cURL, CURLOPT_SSL_VERIFYPEER, 0);
$json_string = curl_exec($cURL);
echo $json_string; 
```

# java - 从jsp创建xml文件时出错

> ID：12045662
> 
> 赞同：1
> 
> 时间：2012-08-20T21:44:55.577
> 
> 标签：java, xml, jsp, javabeans

我正在尝试从 jsp 创建一个 xml 文件。这是我的 GenerateXml.java 文件。它位于 sap_workshop/WEB-INF/src/MyPackage。

```
 package MyPackage;
import javax.xml.parsers.*;
import javax.xml.transform.*;
import javax.xml.transform.dom.*;
import javax.xml.transform.stream.*;
import java.lang.*;
import java.io.Serializable;

public class GenerateXml implements Serializable{
   private String wDate="a";

   public void setDate(String wDate) {
   this.wDate = wDate;
  }
  public String getDate() {
  return this.wDate;
  }
} 
```

我在 sap_workshop 文件夹中有一个 Workshop_html_snippet.jsp 文件。该文件是：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <%@ page contentType="text/xml %>
  <jsp:useBean id="xml" scope="page" class="sap_workshop/WEB-INF/src/MyPackage.GenerateXml"/>
 <Workshop>
   <Scheduled>
     <WorkshopDate><% out.print(xml.getDate()); %></WorkshopDate>
   </Scheduled>
 </Workshop> 
```

当我编译java文件时，它没有显示任何错误，但是当我执行时出现以下错误： `Exception in thread "main" java.lang.NoClassDefFoundError: GenerateXml (wrong name: MyPackage/GenerateXml) at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:621) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124) at java.net.URLClassLoader.defineClass(URLClassLoader.java:260) at java.net.URLClassLoader.access$100(URLClassLoader.java:56) at java.net.URLClassLoader$1.run(URLClassLoader.java:195) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:188) at java.lang.ClassLoader.loadClass(ClassLoader.java:307) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268) at java.lang.ClassLoader.loadClass(ClassLoader.java:252) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)`

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:52:08.047

你需要像这样定义你的bean

```
<jsp:useBean id="xml" scope="page" class="MyPackage.GenerateXml"/> 
```

并确保你的类在你的类路径中。

堆栈跟踪是错误的 bean 名称的结果。格式为：

```
package.BeanName 
```

# c# - 程序化 Log4Net 配置复制条目

> ID：12045664
> 
> 赞同：2
> 
> 时间：2012-08-20T21:45:02.450
> 
> 标签：c#, log4net

我想以编程方式（因为文件路径是在运行时生成的）为 SQL 语句创建一个单独的日志文件。我的代码看起来像这样

```
 public static void InitializeLogger(FileInfo logFile, FileInfo sqlLogFile, 
             Level threshhold, string layout = PATTERN_LAYOUT, bool rolling = true)
    {
        var hierarchy = (Hierarchy)LogManager.GetRepository();
        var appender = CreateAppender(true, layout, APPENDER_NAME, logFile, threshhold);
        hierarchy.Root.AddAppender(appender);

        var sqlAppender = CreateAppender(rolling, layout, SQL_APPENDER_NAME, sqlLogFile, Level.Info);

        var sqlLogger = (Logger)LogManager.GetLogger(SQL_LOGGER_NAME).Logger;
        sqlLogger.RemoveAllAppenders();
        sqlLogger.AddAppender(sqlAppender);
        sqlLogger.Level = Level.Info;
    }

    private static FileAppender CreateAppender(bool rolling, string layout, string appenderName, FileInfo fileInfo, Level threshhold)
    {
        FileAppender result;
        if (rolling)
        {
            result = new RollingFileAppender
                     {
                         AppendToFile = true,
                         ImmediateFlush = true,
                         Name = appenderName,
                         Layout = new PatternLayout(layout),
                         Threshold = threshhold,
                         File = fileInfo.FullName,
                         RollingStyle = RollingFileAppender.RollingMode.Date,
                         StaticLogFileName = true
                     };
        }
        else
        {
            result = new FileAppender
                     {
                         AppendToFile = true,
                         ImmediateFlush = true,
                         Name = appenderName,
                         Layout = new PatternLayout(layout),
                         Threshold = threshhold,
                         File = fileInfo.FullName
                     };
        }
        result.ActivateOptions();
        return result;
    }

    public static void LogSQL(this ILog logger, string sql)
    {
        var sqlLogger = LogManager.GetLogger(SQL_LOGGER_NAME);
        sqlLogger.InfoFormat("Sql: {0}", sql);
    } 
```

问题是 LogSQL 似乎记录到两个日志文件。有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-14T14:37:47.173

ColeW 的答案是正确的。为了防止调用调用层次结构中的所有附加程序，请通过设置 Additivity 标志来禁用继承的附加程序。

以编程方式，如下所示：

```
((log4net.Repository.Hierarchy.Logger)log.Logger).Additivity = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:16:46.540

您应该尝试将可加性设置为 false。

[http://logging.apache.org/log4net/release/sdk/log4net.Repository.Hierarchy.Logger.Additivity.html](http://logging.apache.org/log4net/release/sdk/log4net.Repository.Hierarchy.Logger.Additivity.html)

# fancybox - Fancybox 画廊和自定义标题

> ID：12045665
> 
> 赞同：0
> 
> 时间：2012-08-20T21:45:03.137
> 
> 标签：fancybox, fancybox-2

我想输入自定义 HTML 作为标题，如下所示：

```
$(".fancybox").fancybox({
  padding: 0,
  title: '<a href="http://www.google.com">Hello</a>'
}); 
```

...但我也想要一个图片库。

我不认为您可以同时拥有两者，因为每个画廊都应该使用上面相同的代码，但是每个唯一的标题都需要单独实现上面的代码。这可能吗？

此外，是否有更好的方法来设置 20 张图片，所有图片都在同一个画廊中，并且都带有自定义标题内容。目前我猜我需要使用以下代码单独指定每个：

```
$("#fancybox-number-1").fancybox({
  padding: 0,
  title: 'custom-title-1'
}); 
```

（......但当然画廊不会工作，即使这样做，指定这 20 次对我来说听起来很糟糕。）

如何指定自定义标题，并以最好的方式拥有 20 张左右的图片库？

# node.js - 无法将 Node.js 应用程序推送到 CloudFoundry

> ID：12045667
> 
> 赞同：0
> 
> 时间：2012-08-20T21:45:06.477
> 
> 标签：node.js, cloud-foundry, vmc

我注册了一个 CloudFoundry 帐户，并且可以使用我的注册凭据登录该网站。但是，当我尝试使用这些凭据通过 vmc 登录时，连接被拒绝：

```
MyComputer$ vmc login
Attempting login to [http://api.vcap.me]
Email: <*myemail@gmail.com*>
Password: *******
Problem with login to 'http://api/vcap', HTTP exception: Errno::ECONNREFUSED:Connection refused - connect(2), try again or register for an account. 
```

我假设我需要登录才能推送，因为我也遇到了以下错误：

```
MyComputer$ vmc push
Would you like to deploy from the current directory? [Yn]: 
Application Name: myapp
HTTP exception: Errno::ECONNREFUSED:Connection refused - connect(2) 
```

还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:25:59.233

它表明您正在连接到 api.vcap.me，它通常用于在您从源代码安装的本地计算机上运行的 Cloud Foundry 实例。要将应用程序推送到 CF.com，请首先使用 vmc 定位它：

```
vmc target https://api.cloudfoundry.com
vmc login myemail@gmail.com 
```

# c++ - 如何在多个文件和类之间传递实例

> ID：12045669
> 
> 赞同：1
> 
> 时间：2012-08-20T21:45:12.083
> 
> 标签：c++, algorithm, oop, instance, multiple-instances

假设我正在编写一个有大约 50 个类的软件。我们可以将类分为 2 部分： 1\. 我们强制创建实例的类更多的是一次实例。2\. 类我们只创建一个实例，直到程序结束。

所以，假设我有 MainProgram 类，一切都在这里，然后在 main.cpp 中创建一个实例并运行我的程序。现在，我需要将只创建一次的实例（选项 2）传递给其他类，你有什么想法来实现这个吗？因为我不能`new`再一次了。我只是使用旧实例。例如：我写了一个`SocketNetwork Class`它的构造函数获取端口号并`bind`传递给它。所以我不能`rebind`再一次，我被迫访问给定端口号的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:46:07.353

好像您正在寻找[**单例模式**](http://en.wikipedia.org/wiki/Singleton_pattern)。

它类似于：

```
class A
{
public:
   static A& getInstance()
   {
      static A a;
      return a;
   }
private:
   A() {}
}; 
```

因为构造函数是私有的，所以你只能获取`A`通过方法创建的单个实例`getInstance()`，你可以在任何地方调用它。

```
`A::getInstance()` 
```

将始终返回相同的`A`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:00:53.137

在 SingleTone 之前，我使用过：

```
class AudioCallbackData
{
public:
    AudioCallbackData();
    AudioMixer *audioMixer;
    AudioBuilder *AbRcv;
    NetworkSocket *socketAudio;
    NetworkSocket *socketCommand;
    NetworkSocket *socketSetting;
    NetworkSocket *socketStatus;
    NetworkSocket *socketData;
    MainCore *mainCorePtr;
    AudioCore *audioCorePtr;
    Device *devPtr;
    CircularBuffer *cBuffer;

};
extern AudioCallbackData  *audioCallbackDataPtr;// = ptr; 
```

每个属性都保留一个类的实例。所以对于 SingleTone，现在我可以为每个实例编写一个类吗？

# android - 为什么位置为空？

> ID：12045670
> 
> 赞同：0
> 
> 时间：2012-08-20T21:45:17.823
> 
> 标签：android, location, locationmanager, google-geocoder

我正在尝试使用以下代码在我的应用程序中获取我的当前位置：

```
 List<Address> adds = null;
    double lat;
    double lng;
    private Geocoder geocoder;
    String bestProvider;

    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    Criteria criteria = new Criteria();
    bestProvider = lm.getBestProvider(criteria, false);
    Location location = lm.getLastKnownLocation(bestProvider);

    if (location == null)
    {
         Toast.makeText(this,"Location Not found",Toast.LENGTH_LONG).show();
    }
    else
    {
        geocoder = new Geocoder(this);
        try 
        {
            users = geocoder.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
            lat=(double)users.get(0).getLatitude();
            lng=(double)users.get(0).getLongitude();
            System.out.println(" DDD lat: " +lat+",  longitude: "+lng);

        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

} 
```

但是位置一直显示为空，因此找不到位置消息出现在应用程序上。我错过了什么吗？

清单权限：

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-21T07:22:07.533

使用此网站以正确的方式获取位置： [获取最后一个已知位置](https://developer.android.com/training/location/retrieve-current.html#permissions)

而这个权限： [权限](https://developer.android.com/training/permissions/requesting.html)

如果您仍然需要我的代码：

```
public class MainActivity extends AppCompatActivity implements GoogleApiClient.ConnectionCallbacks, OnConnectionFailedListener {

GoogleApiClient mGoogleApiClient;
Location mLastLocation;
TextView mLatitudeText, mLongitudeText;
final int MY_PERMISSIONS_REQUEST_MAPS = 1;

protected void onStart() {
    mGoogleApiClient.connect();
    super.onStart();
}

protected void onStop() {
    mGoogleApiClient.disconnect();
    super.onStop();
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mLatitudeText = (TextView) findViewById(R.id.textView);
    mLongitudeText = (TextView) findViewById(R.id.textView2);

    if (mGoogleApiClient == null) {
        mGoogleApiClient = new GoogleApiClient.Builder(this)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();
    }
    Log.i("permit Fine", ""+ ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION));
    Log.i("permit coarse", ""+ContextCompat.checkSelfPermission(this,Manifest.permission.ACCESS_COARSE_LOCATION));
}

@Override
public void onConnected(@Nullable Bundle bundle) {
    if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        // TODO: Consider calling
        //    ActivityCompat#requestPermissions
        // here to request the missing permissions, and then overriding
        //   public void onRequestPermissionsResult(int requestCode, String[] permissions,
        //                                          int[] grantResults)
        // to handle the case where the user grants the permission. See the documentation
        // for ActivityCompat#requestPermissions for more details.
        if (ActivityCompat.shouldShowRequestPermissionRationale(this,
                Manifest.permission.READ_CONTACTS)) {

            // Show an explanation to the user *asynchronously* -- don't block
            // this thread waiting for the user's response! After the user
            // sees the explanation, try again to request the permission.
            Log.i("in","Explaination");

        } else {

            // No explanation needed, we can request the permission.

            ActivityCompat.requestPermissions(this,
                    new String[]{Manifest.permission.ACCESS_FINE_LOCATION,Manifest.permission.ACCESS_COARSE_LOCATION},
                    MY_PERMISSIONS_REQUEST_MAPS);
            Log.i("in","Else");

            // MY_PERMISSIONS_REQUEST_READ_CONTACTS is an
            // app-defined int constant. The callback method gets the
            // result of the request.
        }
        return;
    }
    mLastLocation = LocationServices.FusedLocationApi.getLastLocation(
            mGoogleApiClient);
    if (mLastLocation != null) {
        mLatitudeText.setText(String.valueOf(mLastLocation.getLatitude()));
        mLongitudeText.setText(String.valueOf(mLastLocation.getLongitude()));
    }
}

@Override
public void onRequestPermissionsResult(int requestCode,
                                       String permissions[], int[] grantResults) {
    switch (requestCode) {
        case MY_PERMISSIONS_REQUEST_MAPS: {
            // If request is cancelled, the result arrays are empty.
            if (grantResults.length > 0
                    && grantResults[0] == PackageManager.PERMISSION_GRANTED) {

                // permission was granted, yay! Do the
                // contacts-related task you need to do.
                Log.i("permit Fine", ""+ ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION));
                Log.i("permit coarse", ""+ContextCompat.checkSelfPermission(this,Manifest.permission.ACCESS_COARSE_LOCATION));

            } else {

                // permission denied, boo! Disable the
                // functionality that depends on this permission.
            }
            return;
        }

        // other 'case' lines to check for other
        // permissions this app might request
    }
}

@Override
public void onConnectionSuspended(int i) {

}

@Override
public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {

} 
```

}

# actionscript-3 - 我的 AS3 代码的一些问题

> ID：12045674
> 
> 赞同：1
> 
> 时间：2012-08-20T21:45:34.387
> 
> 标签：actionscript-3, flash

制作我的新Flash游戏的一些麻烦（我使用AS3，CS5.5）：我只是尝试让我的角色（hatt）行走和跳跃，但我不能同时做到，好吧，我知道如何......再者，我不知道如何让我的角色认地。最后这件事在这里：

“场景 1，图层 'hatt'，第 1 帧，第 6 行警告：1090：迁移问题：Flash Player 在 ActionScript 3.0 的运行时不会自动触发 onKeyDown 事件处理程序。您必须首先使用 addEventListener 为事件注册此处理程序（'keyDown'，回调处理程序）。”

请帮助我并提供一些提示...谢谢。

这是代码：

```
var grav:Number = 10;
var jumping:Boolean = false;
var jumpPow:Number = 0;
stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
stage.addEventListener(Event.ENTER_FRAME, update);
function onKeyDown(evt:KeyboardEvent):void
{
  if (evt.keyCode == Keyboard.UP)
  {
    if (jumping != true)
    {
      jumpPow = -25;
      jumping = true;
    }
  }
}
function update(evt:Event):void
{
  if (jumping)
  {
    hatt.y +=  jumpPow;
    jumpPow +=  grav;
    if (hatt.y >= stage.stageHeight)
    {
     jumping = false;
     hatt.y = stage.stageHeight;
    }
  }
}

stage.addEventListener (KeyboardEvent.KEY_DOWN, myFunction) ;

function myFunction (event: KeyboardEvent){
  if(event.keyCode == Keyboard.LEFT) {
    hatt.x -= 5
  }
  if(event.keyCode == Keyboard.RIGHT) {
   hatt.x += 5
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:24:04.647

删除这一行：

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown); 
```

删除函数 onKeyDown：

```
function onKeyDown(evt:KeyboardEvent):void
{
  if (evt.keyCode == Keyboard.UP)
  {
    if (jumping != true)
    {
      jumpPow = -25;
      jumping = true;
    }
  }
} 
```

将 myFunction 替换为：

```
function myFunction (event: KeyboardEvent)
{
  if(event.keyCode == Keyboard.LEFT)  
    hatt.x -= 5;

  if(event.keyCode == Keyboard.RIGHT) 
    hatt.x += 5;

  if(event.keyCode == Keyboard.UP && jumping != true)
  {
     jumpPow = -25;
     jumping = true;
  }
} 
```

# python - 单击按钮时清除输入框文本

> ID：12045675
> 
> 赞同：2
> 
> 时间：2012-08-20T21:45:54.853
> 
> 标签：python, mysql-python

我不知道我做错了什么，但是当用户单击按钮时，我使用此代码清除输入框文本。我已经完成了引用和所有内容，并且代码编译但按下清除按钮不会清除输入框，并且我没有收到任何错误。你能帮忙吗？

```
from Tkinter import *
import Pmw

#=============================================================================
app = Tk()
app.title("Testing")

#the variable
bv = IntVar()

#the entry box
b1 = Entry(app, textvariable=bv)

b1.pack()

#=============================================================================
def test():
    print bv.get() 
#=============================================================================
bu1 = Button(app, text="PRESS", command=test)

#packing button 1
bu1.pack()

#button 2 referencing b1
bu2 = Button(app, text="CLEAR", command=b1.delete(0,END))

#packing button 2
bu2.pack()

#the mainloop
app.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:49:40.783

尝试将您的命令拆分为一个函数：

```
def clear_textbox():
    b1.delete(0, END)

bu2 = Button(app, text='CLEAR', command=clear_textbox) 
```

# entity-framework - EF4 在代码优先和现有数据库上一对一并且没有外键

> ID：12045680
> 
> 赞同：1
> 
> 时间：2012-08-20T21:46:20.873
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first, one-to-one

我正在尝试使用流利的 API 将现有数据库映射到 POCO 类。在一对多和多对多的关系中一切都很好，但是在我尝试过的无数种选择中，一对一的失败了。

sql 表很简单，`Agent`带有`AgentID`as PK 和`AdditionalAgentInfo`as `AdditionalAgentInfoID`PK 和 column `AgentID`。`Agent`没有`AdditionalAgentInfoID`，但我在我的测试数据库中添加了这个，看看这是否会在没有运气的情况下解决它。

所有帖子都指出要做：

```
 pModelBuilder.Entity<Agent>()
              .HasOptional(u => u.AdditionalAgentInfo)
              .WithRequired(x => x.Agent);
        pModelBuilder.Entity<AdditionalAgentInfo>()
        .HasRequired(u => u.Agent)
        .WithOptional(x => x.AdditionalAgentInfo); 
```

我的上下文加载但`Agent.AdditionalAgentInfo`始终为 NULL。查看分析器，sql 尝试加入错误的列：

```
FROM [dbo].[AdditionalAgentInfo] AS [Extent1]
WHERE [Extent1].[AdditionalAgentInfoID] = @EntityKeyValue1 
```

它应该是 ：

```
FROM [dbo].[AdditionalAgentInfo] AS [Extent1]
WHERE [Extent1].[AgentID] = @EntityKeyValue1 
```

所以我尝试添加`Map(x=>x.MapKey("AgentID")`但我得到重复的列错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:34:37.670

这是因为 EF 仅支持共享 PK 一对一映射。`AdditionalAgentInfo`PK 也应该是 FK表`Agent`。否则，您必须将其映射为一对多关系并忽略`many`end 属性。

# java - 如何跳过else语句一定次数，然后重新开始

> ID：12045690
> 
> 赞同：0
> 
> 时间：2012-08-20T21:47:05.913
> 
> 标签：java, if-statement, skip

我有一个数组中的名称列表，其中有一些冗余。我只能打印唯一的名称，但我需要一种方法来打印第一行，跳过打印但多次出现冗余，然后继续打印下一个名称（所有冗余实例总是彼此相邻）。到目前为止，这是我对该部分的内容：

```
int x = 1;
int skipCount = 0;
while (x<i){
  if (titles[x].length() == titles[x-1].length()){
   //do nothing 
    skipCount++;
  }
  else{
    System.out.printf("%s\n", titles[x]);
  }
  x++;
} 
```

所以基本上，我将如何跳过 else 语句“skipCount”次，然后让它重新开始？我对此并没有太多了解，并且对 java 比较陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:52:23.793

为什么不只使用 a [`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)？;-)

```
final Set<String> set = new HashSet<>(Arrays.asList(titles));
for (final String title : set) {
  /* title is unique */
  System.out.println(title);
} 
```

一些更改包括使用`println`而不是`printf("%s\n", ...)`更清晰，以及使用*增强的`for`循环*，而不是手动跟踪循环中数组中的位置。

老实说，您可能会首先考虑使用 a`Set<String>`代替`String[]`for `titles`。

# opengl - 从 CUDA 图形资源中获取像素

> ID：12045696
> 
> 赞同：0
> 
> 时间：2012-08-20T21:48:00.657
> 
> 标签：opengl, cuda

给定 CUDA 图形资源，如何获取像素缓冲区对象并将 RGB 像素放入数组中？有人可以提供一个例子或确认我自己的尝试是否正确吗？现有代码如下所示：

```
 cutilSafeCall(cudaGraphicsMapResources(1, &render_cuda_pbo_resource, stream));
    uchar4 *d_output;
    size_t num_bytes;
    cutilSafeCall(cudaGraphicsResourceGetMappedPointer((void **)&d_output, &num_bytes, render_cuda_pbo_resource)); 
```

我添加了以下代码：

```
 glBindTexture  (GL_TEXTURE_2D, renderTex);
    glPixelStorei  (GL_UNPACK_ALIGNMENT, 1);
    glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, width, height, GL_BGRA, GL_UNSIGNED_BYTE, 0);
    glBindBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, 0);
    glBegin(GL_QUADS);
    glTexCoord2f (0.0, 0.0);
    glVertex3f (-1.0, -1.0, 0.0);
    glTexCoord2f (1.0, 0.0);
    glVertex3f (1.0, -1.0, 0.0);
    glTexCoord2f (1.0, 1.0);
    glVertex3f (1.0, 1.0, 0.0);
    glTexCoord2f (0.0, 1.0);
    glVertex3f (-1.0, 1.0, 0.0);
    glEnd();
    glBindTexture(GL_TEXTURE_2D, 0);
    glDisable(GL_TEXTURE_2D);
    glReadPixels(10, 10, width, height, GL_BGRA, GL_UNSIGNED_BYTE, data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:07:55.250

你没有。

OpenGL对象是OpenGL对象；CUDA 对象是 CUDA 对象。如果您希望 CUDA 将内容放入 OpenGL 对象中，您必须*提供*CUDA OpenGL 对象并让它将内容放入其中。这通常使用[`cudaGraphicsGLRegisterBuffer`](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__OPENGL_g43f69a041bdfa4f8b36aff99bf0171db.html).

# python - SQLAlchemy 布尔值为 None

> ID：12045698
> 
> 赞同：47
> 
> 时间：2012-08-20T21:48:39.767
> 
> 标签：python, sqlalchemy, pyramid

我的 Pyramid 应用程序中有这张表

```
class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    .....
    is_active = Column(Boolean, unique=False)
    def __init__(self, name, raw_password):
        is_active = True 
```

当我做我的测试时，它说`is_active`是None。

```
def test_register_user(self):
    user = User('user1', '1234')
    self.sess.add(user)
    self.sess.flush()

    #print user
    #self.assertTrue(user.is_active, True)
    user_db_record = self.sess.query(User).filter_by(name=user.name).first()
    self.assertEqual(user_db_record.is_active, True) 
```

从我的集成日志中，我看到我们在创建行时`is_active`设置为无。为什么？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-20T22:06:50.073

您必须设置默认值，否则使用 None/NULL：

```
is_active = Column(Boolean, unique=False, default=True) 
```

您想在其中执行此操作，`__init__`但您使用`is_active = True`（局部变量）而不是`self.is_active = True`.

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2017-06-27T18:09:50.933

如果您使用的是 Flask-SQLAlchemy，则可以使用此命令创建服务器端默认值。

```
from sqlalchemy.sql import expression
active = db.Column(db.Boolean, server_default=expression.true(), nullable=False) 
```

这将在数​​据库上创建一个默认值，以便任何人都可以写入它，并且数据库将具有默认值。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-01-04T16:28:48.830

```
is_active = Column(Boolean, server_default='t', default=True) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-18T20:15:40.397

如果有人正在寻找解决方案并使用 Flask，这就是您的做法。

需要注意的是，服务器默认值应该在迁移文件中使用，而不是在模型本身上使用，这一点非常重要。

一旦您使用

```
flask db migrate 
```

您应该在文件夹中看到新的迁移（ migrations/versions/XXXXXX.py ）

```
def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('users', sa.Column('confirmed', sa.Boolean(), nullable=True, server_default='f'))
    op.add_column('users', sa.Column('confirmed_on', sa.DateTime(), nullable=True))
    op.add_column('users', sa.Column('is_admin', sa.Boolean(), nullable=True, server_default='f')) 
```

这是您要添加 server_default 的地方。

# python - 在pyparsing中嵌套分隔列表而不导致无限递归？

> ID：12045700
> 
> 赞同：5
> 
> 时间：2012-08-20T21:48:54.510
> 
> 标签：python, pyparsing, operator-precedence

我在 Pyparsing 中有以下玩具语法：

```
import pyparsing as pp

or_tok = "or"
and_tok = "and"
lparen = pp.Suppress("(")
rparen = pp.Suppress(")")

Word = pp.Word(pp.alphas)("Word")

Phrase = pp.Forward()

And_Phrase = pp.Group(pp.delimitedList(Phrase, and_tok))("And_Phrase")
Or_Phrase = pp.Group(pp.delimitedList(Phrase, or_tok))("Or_Phrase")

Phrase << (pp.Optional(lparen) + (And_Phrase ^ Or_Phrase) + pp.Optional(rparen)) ^ Word

Expression = pp.OneOrMore(Word ^ Phrase)("Expression")

def test(text):
    output = Expression.parseString(text)
    print output.asXML() 
```

但是，运行这个程序会无限递归，这不是我想要的。相反，我希望我的语法能够处理嵌套短语，以便上面的程序可以解析为与以下内容等效的内容：

```
>>> test("TestA and TestB and TestC or TestD")
<Expression>
    <And_Phrase>
        <Word>TestA</Word>
        <Word>TestB</Word>
        <Or_Phrase>
            <Word>TestC</Word>
            <Word>TestD</Word>
        </Or_Phrase>
    </And_Phrase>
</Expression> 
```

我试图修改 and 的定义`And_Phrase`，`Or_Phrase`以便它们只匹配具有两个或多个元素的列表，但不知道如何做到这一点。

我也尝试过使用`pyparsing.operatorPrecedence`，但我认为我做得不对：

```
import pyparsing as pp

or_tok = "or"
and_tok = "and"
lparen = pp.Suppress("(")
rparen = pp.Suppress(")")

Word = pp.Word(pp.alphas)("Word")

Phrase = pp.Forward()

Phrase << Word ^ \
        pp.operatorPrecedence(Phrase, [
            (and_tok, 2, pp.opAssoc.LEFT),
            (or_tok, 2, pp.opAssoc.LEFT)
        ])

Expression = pp.OneOrMore(Word ^ Phrase)("Expression")

def test(text):
    output = Expression.parseString(text)
    print output.asXML() 
```

...因为它根本没有产生列表：

```
>>> test("Hello world and bob")
<Expression>
  <Word>Hello</Word>
  <Word>world</Word>
  <Word>and</Word>
  <Word>bob</Word>
</Expression> 
```

如何修改我的规则定义以便它们处理嵌套列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:41:02.763

我相信你的第二种方法`operatorPrecedence`是更好的方法。但是，您有几个问题。一是您的关键字“and”和“or”也是您定义的单词。您可能应该像这样设置它：

```
and_tok = pyp.Keyword("and")
or_tok = pyp.Keyword("or")
Word = ~(and_tok | or_tok) + pyp.Word(pyp.alphas)("Word") 
```

这将防止“和”和“或”被匹配为单词。

另一个问题是您没有正确设置 operatorPrecedence。它的第一个参数应该是“原子”表达式——可以出现在运算符之间的基本元素。operatorPrecedence 自动设置必要的嵌套。通过将 Phrase 作为原子传递，您正在创建一个额外的嵌套级别，这将导致它异常运行。相反，operatorPrecedence 的第一个参数应该是 Word（或者`pyp.OneOrMore(Word)`如果您想允许多字操作数）。

另外，operatorPrecedence 会自动处理单个原子的情况，所以你不需要把`^ Word`业务放在里面。这意味着你可以省去直接`Phrase`让你`Expression`成为 operatorPrecedence 的东西。

把所有这些放在一起，你会得到：

```
Expression = (
    pyp.operatorPrecedence(pyp.OneOrMore(Word), [
        (and_tok, 2, pyp.opAssoc.LEFT),
        (or_tok, 2, pyp.opAssoc.LEFT)
    ])
) 
```

结果是这样的：

```
>>> test("Hello and Bob")

<ITEM>
  <ITEM>
    <Word>Hello</Word>
    <AND>and</AND>
    <Word>Bob</Word>
  </ITEM>
</ITEM>

>>> test("TestA and TestB and TestC or TestD")

<ITEM>
  <ITEM>
    <ITEM>
      <Word>TestA</Word>
      <AND>and</AND>
      <Word>TestB</Word>
      <AND>and</AND>
      <Word>TestC</Word>
    </ITEM>
    <OR>or</OR>
    <Word>TestD</Word>
  </ITEM>
</ITEM> 
```

这不完全是您想要的形式，因为操作数位于嵌套列表中而不是包装它们，但是您应该能够使用 a 重新配置结构`parseAction`（operatorrPrecedence 允许您为每个操作数传递一个）。

（另外，您最初想要的数据`test("TestA and TestB and TestC or TestD")`与您的描述不一致。如果您希望“and”和“or”具有相同的优先级，那么这将像`(TestA and TestB and TestC) or TestD`上面的示例一样将括号括起来。如果您想`(TestC or TestD)`将括号放在一起，您需要给予“或”更高的优先级。）

# java - Eclipse 中单独 JAR 中的 JPA @MappedSuperclass 导致验证错误“实体未定义主键属性”

> ID：12045710
> 
> 赞同：4
> 
> 时间：2012-08-20T21:49:28.320
> 
> 标签：java, eclipse, jpa, entity, mappedsuperclass

我有一个 @MappedSuperclass AbstractEntity 用于我的所有 @Entity 类。只要超类与我的实体在同一个 Eclipse 项目中，它就可以完美地工作。但是由于我在几个项目中重用了这个超类，我只想将它分解成它自己的 JAR 文件。当我这样做时（当然我将 JAR 文件添加到构建路径中），Eclipse 会在我的每个 @Entity 类上给出一个错误：

*该实体没有定义主键属性。*

Eclipse 突出显示 @Entity 注释作为错误的来源。当然，所有的类都继承自这个 AbstractEntity。两个项目中的包名称相同。JAR 项目具有所有必要的构建路径 - 包含 AbstractEntity 的 JAR 文件项目中没有错误。

当我将它部署到我的应用服务器（JBoss 7.1）时，它工作正常。这让我认为这只是一个错误识别错误的 Eclipse 问题。

**抽象实体：**

```
package com.xyc.abc;

import java.io.Serializable;

import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.MappedSuperclass;

@MappedSuperclass
public abstract class AbstractEntity implements Serializable {

private static final long serialVersionUID = 1L;

private Long id;

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}
} 
```

**简单实体类示例：**

```
 @Entity
 public class TestEntity extends AbstractEntity {
 ...
 } 
```

我已经看到其他一些帖子说问题可能是超类中的注释在 getter 上而不是在字段上 - 如果您的实体中没有其他 JPA 注释，这只是一个问题，我这样做了。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T14:01:22.447

看起来这与此处描述的错误有关：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=361042](https://bugs.eclipse.org/bugs/show_bug.cgi?id=361042)

最终修复它（实际上更多的是一种解决方法）是将其添加到包含我的实体的项目中`AbstractEntity`的类列表中。`persistence.xml`即使`AbstractEntity`它位于一个单独的`JAR`并且本身不是一个具体的实体，我想这给了 Eclipse 足够的信息来停止抱怨。这似乎对应用程序本身没有任何不利影响。

# c# - 属性中使用的变量是否有任何 C# 命名约定？

> ID：12045711
> 
> 赞同：49
> 
> 时间：2012-08-20T21:49:30.330
> 
> 标签：c#, properties

比方说，我们有一个变量，我们想要命名`Fubar`

假设这`Fubar`是一个`String`！

这意味着，我们将 Fubar 定义为：

```
public string Fubar; 
```

现在，假设我们想要`Fubar`一个 getter 和 setter（或者换句话说，成为一个 C# 属性）！

```
private string Fubar;
public string Fubar_gs
{
    get
    {
        //Some fancy logic
        return Fubar;
    }
    set
    {
        //Some more fancy logic
        Fubar = value;
    }
} 
```

太好了！这一切都很好，花花公子，除了，如果我希望将属性命名为 Fubar，而不是原始变量怎么办？

很明显，我只想重命名这两个变量。但问题是，原始变量的最佳名称是什么？

这种情况有命名约定吗？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-08-20T21:54:15.260

根据[Microsoft 的命名约定](https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/naming-guidelines)，正确的方法是：

```
private string fubar;
public string Fubar { get { return fubar; } set { fubar = value; } } 
```

但是，许多人更喜欢在私有字段前加上下划线，以帮助在他们打算使用该属性时尽量减少大写错误和使用该字段的可能性，反之亦然。

因此，通常会看到：

```
private string _fubar;
public string Fubar { get { return _fubar; } set { _fubar = value; } } 
```

你采取的方法最终取决于你。StyleCop 将默认执行前者，而 ReSharper 将执行后者。

在 C# 6 中，有用于声明属性默认值或制作只读属性的新语法，从而减少了对在`get`and`set`方法中没有任何特殊附加逻辑的支持字段的属性的需求。你可以简单地写：

`public string Fubar { get; set; } = "Default Value";`

或者

`public string Fubar { get; } = "Read-only Value";`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-20T21:50:25.910

用下划线作为私有前缀 `_fubar`

作为一个很好的指南，您可以使用 CLR 运行时团队编码风格指南，它超出了 Microsoft 的标准命名指南

[https://github.com/dotnet/runtime/blob/main/docs/coding-guidelines/coding-style.md](https://github.com/dotnet/runtime/blob/main/docs/coding-guidelines/coding-style.md)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-20T21:54:35.760

如果您以小写开头命名您的私有变量，您可以右键单击它们并让 VS 为您生成您的 getter/setter 代码；

重构->封装字段...

它将使用 Caps 命名该属性。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-20T21:51:56.270

如果 getter/setter 中没有逻辑，请使用自动属性：

```
public string Fubar {get; set;} 
```

[http://msdn.microsoft.com/en-us/library/bb384054.aspx](http://msdn.microsoft.com/en-us/library/bb384054.aspx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-02-16T11:51:53.260

不幸的是，没有共同的约定，你必须选择最适合你的情况，我已经在不同的代码库中看到了以下所有方法。

**方法一**

```
private string _fubar;   //_camelCase
public string Fubar { ... } 
```

**方法二**

```
private string fubar;    //camelCase
public string Fubar{ ... } 
```

**方法 3**

```
private string _Fubar;    //_PascalCase
public string Fubar{ ... } 
```

还有一些框架需要很多创造力，比如使用属性并将其记录为成员变量，因此使用成员的样式而不是属性的样式（是的 Unity！我指的是你和你`MonoBehaviour.transform`的属性/成员）

为了在我们的代码库中消除歧义，**我们使用我们自制的规则**：

*   尝试使用更恰当的命名，通常在公共属性中使用的成员与其公共对应成员的用途略有不同，因此大多数时候很有可能找到不同且正确的名称，如果不可能，其目的只是保持状态对于公共财产，为什么不将其命名为**nameValue**呢？
*   尽可能使用自动属性

通过我们的方法，大多数时候我们避免了对下划线“_”的怀疑，同时拥有更易读的代码。

```
private string fubarValue; //different name. Make sense 99% of times
public string Fubar { ... } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-01-10T12:56:24.437

好吧，[框架设计指南](https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/)文档说明了以下内容：

> 字段名称 字段命名准则适用于静态公共和受保护字段。内部和私有字段不包含在指南中，并且成员设计指南不允许公共或受保护的实例字段。
> 
> ✓ 请在字段名称中使用 PascalCasing。
> 
> ✓ DO 使用名词、名词短语或形容词命名字段。
> 
> X 不要为字段名称使用前缀。
> 
> 例如，不要使用“g_”或“s_”来表示静态字段。

所以，对于私有领域，没有官方推荐。但是，如果您对属性使用 VS 2017 快速操作“转换为完整属性”，则会发生这种情况：

[![VS 2017 快速行动](../Images/d128f21c415bf6f8fba4090452edce7c.png)](https://i.stack.imgur.com/NbUzy.png)

因此，可以安全地假设在**私有**字段前加上下划线是有些标准的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-20T21:51:45.007

c#的方式是

```
private string _fubar;
public string Fubar
{
    get
    {
        return _fubar;
    }
    set
    {
        _fubar = value;
    }
} 
```

但是，如果它只是一个没有额外逻辑的基本 getter/setter，你可以写

```
public string Fubar { get; set; } 
```

不需要支持变量或任何东西。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-20T23:14:50.790

编码标准的好处是有很多可供选择：

*   [http://www.google.com/search?q=c%23+coding+standards](http://www.google.com/search?q=c%23+coding+standards)
*   [http://blogs.msdn.com/b/ericgu/archive/2004/01/19/60315.aspx](http://blogs.msdn.com/b/ericgu/archive/2004/01/19/60315.aspx)
*   [http://www.amazedsaint.com/2010/11/top-6-coding-standards-guideline.html](http://www.amazedsaint.com/2010/11/top-6-coding-standards-guideline.html)

选择一个适合您的约定并始终如一地使用它。

Microsoft 约定——pascalCase 私有字段和 CamelCase 属性是整洁的，但可能由于拼写错误而导致错误。我发现前导下划线约定很烦人，因为每次键入名称时它都需要两次额外的击键，但是您并没有那么多错别字（或者至少编译器首先捕获它们）。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-09-05T11:47:37.480

我觉得，一个名字更好：

```
public string Fubar { get; private set; } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-21T02:32:09.423

使用默认值声明的另一种方法

```
 private string _fubar = "Default Value";
    public string Fubar
    {
        get { return _fubar; }
        set { _fubar = value; }
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-04T06:21:44.137

虽然大多数开发人员都遵循 Microsoft 的指南，但作为游戏开发人员，我们遵循 Unity 的风格（[此处为脚本源代码之一](https://bitbucket.org/Unity-Technologies/ui/src/9f418c4767c47d0c71f1727eb42a9a9024e9ecc0/UnityEngine.UI/UI/Core/Text.cs)）：

```
static protected Material s_DefaultText = null;
protected bool m_DisableFontTextureRebuiltCallback = false;
public TextGenerator cachedTextGenerator { ... } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-14T13:48:27.670

我看到了大量过时的答案（以及代表 C#6 的非标准方法），所以这是 2020 年的答案：

```
// "fubar" works, too, but "_" prevents CaSe typo mistakes
private string _fubar;
public string Fubar
{
    get => _fubar;
    set => _fubar = value;
}

// Read-only can just use lambda to skip all those shenannigans
public string ReadOnlyFoo => "This is read-only!"; 
```

# jquery - zend 框架或 jquery 删除我的输入

> ID：12045713
> 
> 赞同：0
> 
> 时间：2012-08-20T21:49:40.497
> 
> 标签：jquery, zend-framework

我设法将latexrender (http://www.mayer.dial.pipex.com/tex.htm) 包含到我的新的基于Zend 框架的项目中，除了基于ajax 的预览带“+”号之外，一切似乎都运行良好我的公式出于某种原因。

这是我的带有示例 textarea 的 html 片段：

```
<dt id="formula-label"><label for="formula" class="required">Formula:</label></dt>
<dd id="formula-element">
<textarea name="formula" id="formula" rows="5" cols="40"></textarea>
<p class="description"><span class="preview-formula"></span></p></dd>

<button name="previewtformula" id="previewformula" type="button" onclick="generatePreview(&#39;formula&#39;)">Preview</button> 
```

下面是对应的 Zend 表单代码：

```
 $formula = $this->createElement('textarea', 'formula');
    $formula->setLabel('Formula:');
    $formula->setRequired(true);
    $formula->setAttrib('rows', 5);
    $formula->setAttrib('cols', 40);
    $formula->setDescription('<span class="preview-formula"></span>');
    $formula->getDecorator('Description')->setEscape(false);
    $this->addElement($formula);

    $prevFormula = $this->createElement('button', 'preview-formula');
    $prevFormula->setAttrib('onclick', "generatePreview('formula')");
    $prevFormula->setLabel('Preview');
    $prevFormula->removeDecorator('DtDdWrapper');
    $this->addElement($prevFormula); 
```

javascript文件：

```
function generatePreview(elem){
    var details = $('textarea#'+elem).val();

    $.ajax({
        type: 'POST',
        url: '/formula/preview',
        async: false,
        data: 'details=' + details,
        success: function(responseText) {

            $("span.preview-"+elem).html(responseText);

        }
    });
}; 
```

和我的控制器动作：

```
public function previewAction() {

   if($this->_request->isXmlHttpRequest()) {
                $this->_helper->viewRenderer->setNoRender();
                $this->_helper->Layout->disableLayout();
                $data = $this->_request->getPost();
                $latex = new My_LatexRender();
                echo nl2br($latex->latex_content($data['details']));
        } else {
            return $this->_redirect('/index');
        }
} 
```

就像我说的一切正常，图像很好地保存到磁盘并且添加到数据库的公式是完整的（有“+”符号）但是当我预览公式时它以某种方式从所有“+”符号中删除例子

“2+2”在数据库中保存为“2+2”，但在预览中它只是“22”

不确定是否有其他字符被剥离，到目前为止还没有注意到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T00:32:31.347

我找到了解决方案。我不得不改变

```
data: 'details=' + details, 
```

到

```
data: {details: details}, 
```

# python - Python从urllib请求解析json

> ID：12045719
> 
> 赞同：2
> 
> 时间：2012-08-20T21:50:07.367
> 
> 标签：python, json

我有以下json，

```
{
findItemsByKeywordsResponse: [
{
ack: [
"Success"
],
version: [
"1.12.0"
],
timestamp: [
"2012-08-20T21:42:08.532Z"
],
searchResult: [
{
@count: "2",
item: [
{
itemId: [
"380459520121"
],
title: [
"Lenovo ThinkPad T61 Core 2 Duo 2.2GHz 1GB 120GB DVD-RW WiFi Laptop 15" Notebook"
],
globalId: [
"EBAY-US"
],
primaryCategory: [
{
categoryId: [
"177"
],
categoryName: [
"PC Laptops & Netbooks"
]
}
],
galleryURL: [
"http://thumbs2.ebaystatic.com/pict/3804595201214040_1.jpg"
],
viewItemURL: [
"http://www.ebay.com/itm/Lenovo-ThinkPad-T61-Core-2-Duo-2-2GHz-1GB-120GB-DVD-RW-WiFi-Laptop-15-Notebook-/380459520121?pt=Laptops_Nov05"
],
paymentMethod: [
"PayPal",
"VisaMC",
"Discover"
],
autoPay: [
"false"
],
postalCode: [
"55114"
],
location: [
"Saint Paul,MN,USA"
],
country: [
"US"
],
shippingInfo: [
{
shippingType: [
"Calculated"
],
shipToLocations: [
"US"
],
expeditedShipping: [
"true"
],
oneDayShippingAvailable: [
"false"
],
handlingTime: [
"1"
]
}
],
sellingStatus: [
{
currentPrice: [
{
@currencyId: "USD",
__value__: "112.5"
}
],
convertedCurrentPrice: [
{
@currencyId: "USD",
__value__: "112.5"
}
],
bidCount: [
"5"
],
sellingState: [
"Active"
],
timeLeft: [
"P0DT0H18M18S"
]
}
],
listingInfo: [
{
bestOfferEnabled: [
"false"
],
buyItNowAvailable: [
"false"
],
startTime: [
"2012-08-15T22:00:26.000Z"
],
endTime: [
"2012-08-20T22:00:26.000Z"
],
listingType: [
"Auction"
],
gift: [
"false"
]
}
],
returnsAccepted: [
"true"
],
condition: [
{
conditionId: [
"3000"
],
conditionDisplayName: [
"Used"
]
}
],
isMultiVariationListing: [
"false"
]
},
{
itemId: [
"110931951761"
],
title: [
"Dell Latitude D630 Laptop Core Duo 1.8GHz 2GB Ram 60GB HDD Not Complete"
],
globalId: [
"EBAY-US"
],
primaryCategory: [
{
categoryId: [
"177"
],
categoryName: [
"PC Laptops & Netbooks"
]
}
],
galleryURL: [
"http://thumbs2.ebaystatic.com/pict/1109319517614040_2.jpg"
],
viewItemURL: [
"http://www.ebay.com/itm/Dell-Latitude-D630-Laptop-Core-Duo-1-8GHz-2GB-Ram-60GB-HDD-Not-Complete-/110931951761?pt=Laptops_Nov05"
],
paymentMethod: [
"PayPal"
],
autoPay: [
"false"
],
postalCode: [
"17737"
],
location: [
"Hughesville,PA,USA"
],
country: [
"US"
],
shippingInfo: [
{
shippingServiceCost: [
{
@currencyId: "USD",
__value__: "24.0"
}
],
shippingType: [
"Flat"
],
shipToLocations: [
"US"
],
expeditedShipping: [
"false"
],
oneDayShippingAvailable: [
"false"
],
handlingTime: [
"1"
]
}
],
sellingStatus: [
{
currentPrice: [
{
@currencyId: "USD",
__value__: "61.99"
}
],
convertedCurrentPrice: [
{
@currencyId: "USD",
__value__: "61.99"
}
],
bidCount: [
"9"
],
sellingState: [
"Active"
],
timeLeft: [
"P0DT0H8M7S"
]
}
],
listingInfo: [
{
bestOfferEnabled: [
"false"
],
buyItNowAvailable: [
"false"
],
startTime: [
"2012-08-17T21:50:15.000Z"
],
endTime: [
"2012-08-20T21:50:15.000Z"
],
listingType: [
"Auction"
],
gift: [
"false"
]
}
],
returnsAccepted: [
"true"
],
condition: [
{
conditionId: [
"3000"
],
conditionDisplayName: [
"Used"
]
}
],
isMultiVariationListing: [
"false"
]
}
]
}
],
paginationOutput: [
{
pageNumber: [
"1"
],
entriesPerPage: [
"2"
],
totalPages: [
"486815"
],
totalEntries: [
"973629"
]
}
],
itemSearchURL: [
"http://www.ebay.com/sch/i.html?_nkw=laptops&_ddo=1&_ipg=2&_pgn=1"
]
}
]
} 
```

我尝试使用以下 for 循环获取“项目”数据：

```
 data = json.load(urllib2.urlopen(url))
  #print data
  for item in data['findItemsByKeywordsResponse'][0]['searchResult'][0]['item']:
    for itemId in item['itemId']:
      print itemId 
```

这工作正常，但我不确定如何实际获取我试图在底部显示的所有项目数据。

```
[
{
@count: "2",
item: [
{},
{}
]
}
], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:59:31.557

`data['findItemsByKeywordsResponse']`是 a `list`，因此您可以使用 访问其中的项目`the_list[0]`，依此类推。

a 中没有键`list`，键属于 a `dict`。

# jquery - Facebook 社交插件和 jQuery 问题

> ID：12045721
> 
> 赞同：0
> 
> 时间：2012-08-20T21:50:13.183
> 
> 标签：jquery, ajax, facebook, youtube, comments

我正在使用 jQuery 将一些内容加载到我正在开发的 Web 应用程序中的类似灯箱的 div 中。使用 $POST，我正在调用一个动态填充的页面，其中包含一个 youtube 视频和一个 facebook 评论插件。

我加载的第一个视频带有评论，但之后的每个视频都是独立的，没有评论。关于可能发生的事情有什么快速的想法吗？

这是我正在加载的页面。

```
<? $video_id = $_POST['video_id']; ?>

<object width="800" height="499"> 
    <param name="movie" value="http://www.youtube.com/v/<? echo $video_id; ?>?modestbranding=1&amp;version=3&amp;hl=en_US&rel=0"></param> 
        <param name="allowFullScreen" value="true"></param> 
        <param name="allowscriptaccess" value="always"></param> 
    <embed src="http://www.youtube.com/v/<? echo $video_id; ?>?modestbranding=1&amp;version=3&amp;hl=en_US&rel=0" type="application/x-shockwave-flash" width="800" height="499" allowscriptaccess="always" allowfullscreen="true"></embed> 
</object>

<h5 style="margin:35px 0 8px 0;">Comment on this Video</h2>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=158242874284543";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="http://XXXXXXXXXXXX.com/viewvideo.php?video_id=<? echo $video_id; ?>" data-num-posts="12" data-width="800"></div> 
```

这就是引入它的调用（#view_video 是保存灯箱的 div，.video_wrapper 是显示加载信息的 div。每个缩略图都在一个带有 videothumb 类的 div 中，谁的 id 设置为youtube 视频唯一 ID）：

```
<script>
    //VIEW VIDEO
    $('.videothumb').click(function() {
        $('#view_video').fadeIn('fast');
        this_video_id = $(this).attr('id');
        $.post( 'viewvideo.php', { video_id: this_video_id },
            function( data ) {
                //on complete
                $('.video_wrapper').html(data);
            }
        );
    });
</script> 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:50:01.427

当您加载第一页时，Facebook JS SDK 也会加载，并解析文档中的 XFBML 标记。

下次您将 AJAX 页面加载到您的文档中时，JS SDK 已经嵌入到您的文档中，因此不会发生任何进一步的事情 - 并且不包括对 XFBML 标记的新解析。

您必须使用[`FB.XFBML.parse`](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)来告诉 SDK 它应该再次在文档中搜索（动态添加的）XFBML 标签。（最好给它一个 DOM 节点作为第一个参数，这样它就不会再次搜索整个文档，而只是搜索发生动态变化的部分。）

# javascript - 如何让这个 jQuery 事件委托在 IE7 中像在 Chrome 中一样运行？

> ID：12045725
> 
> 赞同：0
> 
> 时间：2012-08-20T21:50:35.497
> 
> 标签：javascript, jquery, cross-browser, internet-explorer-7, jquery-events

我有一堆复选框，然后这个“主”复选框将取消选中，或者如果选中则将它们全部选中。很常见的 UI 概念，如果您使用 GMail，或者，您知道，计算机，您可能已经看到它。

每个复选框都有一个在您更改它时触发的事件。单击主复选框将导致仅在需要更改的复选框上触发它。

在 Chrome 中有效，在 IE7 中无效。也就是说，在 Chrome 中单击主复选框会将单击聚合到需要单击的其他框，并且它们的“onChange”事件将触发。在 IE7 中，点击似乎是聚合的，但 onChange 事件没有触发。

演示 html

```
<ul>
  <li>
    <input id='master' type='checkbox'/>
  </li>
  <li>
        <input class='minion' type='checkbox'>
  </li>
  <li>
        <input class='minion' type='checkbox'>
  </li>
</ul>
<div id="log" style='background:#eee;cursor:pointer;'>
</div> 
```

演示 javascript, jquery 1.7

```
$(function() {
    $("#log").click(function() {
        $(this).html('');
    });

    $(".minion").change(function() {
        var msg = $(this).is(":checked") ? "checked" : "unchecked";
        $("#log").append("<p> " + msg + " : " + new Date() + "</p>");
    });

    $("#master").change(function() {
        var toBeChanged = $(this).is(":checked")
            ? $(".minion").not(":checked")
            : $(".minion").filter(":checked");

        toBeChanged.click();
    });
}); 
```

和强制性的jsfiddle：http: [//jsfiddle.net/hzcAF/](http://jsfiddle.net/hzcAF/)

我很困惑。​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:58:00.403

那么，您似乎需要`change`手动触发该事件。这应该适用于 IE 和 Chrome：

```
$("#master").click(function() {
    $(".minion").prop("checked", this.checked).change();
}); 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/hzcAF/3/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:00:40.587

这是一个很好的起点：

[http://jsfiddle.net/7qn63/5/](http://jsfiddle.net/7qn63/5/)

您可能希望对强制`change()`调用更具选择性。

# database - django中的自引用表

> ID：12045731
> 
> 赞同：-1
> 
> 时间：2012-08-20T21:51:19.187
> 
> 标签：database, django

任何人都可以向我解释自我引用表格的含义以及我们这样做的原因。自引用表格有什么意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:56:22.233

自引用表用于层次关系。

示例：表人员：

```
PersonID <-------------
Name                  |
Title                 |
SupervisorPersonID----- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:57:31.690

你能想象一个数据库中有健身房成员的例子吗？有些人只是健身房会员，而有些人是健身房会员和教练。

因此，如果在数据库中，每个成员的教练的 memberId 都有一列，那么当您使用数据库中已经存在的 memberId 作为教练时，数据库将自我引用自己。这是自引用的使用。

# ios - IBAction 播放 MP3

> ID：12045734
> 
> 赞同：1
> 
> 时间：2012-08-20T21:51:32.063
> 
> 标签：ios, ios5, mp3, ibaction

我正在制作一个类似于 Urbanspoon 的应用程序。我有一个旋转选择器，它连接到 UIButton 的 IBAction。按下按钮后，我希望播放 mp3 文件。我觉得这样做会给用户更多的体验。我导入了 AVFoundationFramework 和 AudioToolBoxFramework 并将它们的 .h 导入到我的主 .m 文件中

这是我的行动。

```
- (IBAction)spinTheSpinner:(id)sender {

if ([sender isSelected]) {
    [sender setImage:[UIImage imageNamed:@"GoldTapButton.png"] forState:UIControlStateNormal];
     [sender setSelected:NO];
     }
else {
     [sender setImage:[UIImage imageNamed:@"PurpleTapButton.png"] forState:UIControlStateHighlighted];
    [sender setSelected:YES];}

[picker1 selectRow:(arc4random() % [self pickerView:picker1 numberOfRowsInComponent:0]) inComponent:0 animated:YES]; 
```

}

我是否需要为同一个按钮制作单独的操作，或者我可以将一段代码添加到同一个操作中。我有 mp3 文件是我的资源文件夹，所以它在我的项目中我只是无法找到实现它的位置和方法。

这是我的 .h 也是为了很好的衡量标准

```
#import <UIKit/UIKit.h>
#import<AVFoundation/AVAudioPlayer.h>
@interface ViewController : UIViewController

- (IBAction)spinTheSpinner:(id)sender;
@property (nonatomic, retain) NSMutableArray *picker1Data;

@end 
```

这也是我的 .m 文件的顶部

```
#import "ViewController.h"
#import "Twitter/Twitter.h"
#import "UIKit/UIKit.h"
#import"AVFoundation/AVAudioPlayer.h"
@interface ViewController ()

{
@private
UIPickerView *picker1;
}

@end

@implementation ViewController 
```

任何帮助或建议或代码都会以任何方式提供巨大的帮助。我正在按一个时间表运行。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:56:01.510

是的，您可以将代码添加到相同的`IBAction`方法中。您不限于可以在其当前链接到的方法中运行的代码量

# javascript - 使谷歌地图跨越一定距离（米）

> ID：12045735
> 
> 赞同：3
> 
> 时间：2012-08-20T21:51:34.727
> 
> 标签：javascript, jquery, google-maps-api-3

有没有人遇到过设置谷歌地图缩放级别的方法，以便窗口有一定的距离？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:16:17.000

1.  在当前缩放级别使用中测量地图的宽度`google.maps.geometry.spherical.computeDistanceBetween()`和`map.getBounds()`（请参阅doku）。

2.  如果需要时测量距离更宽，请将其除以 2。如果它更小，则乘以 2。

3.  这样做直到计算出的宽度变得比目标宽度更小或更大，并计算你必须多久进行一次乘法或除法。

4.  将您计算的数字添加/减去当前缩放值以获得目标缩放值。

注意：您无法将地图调整到精确的宽度，因为您受限于固定的缩放级别，因此这只是一个近似值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-29T13:37:14.777

我通过创建一个具有给定距离的圆并使用它来获得边界来实现类似的事情。地图的宽度与圆圈不太一样，因为 API 添加了一些填充。

```
//Accuracy in metres
var accuracy = 50; 

/* Create a circle but don't set the 'map' variable as we don't need to see circle on the map */
var circle = new google.maps.Circle({
                 center: map.getCenter(),
                 radius: accuracy
             });

//Get the new bounds from the circle
var bounds = circle.getBounds();

/* Fit the map to the size of the circle. Will be slightly bigger than the circle as the API adds a little padding */
map.fitBounds(bounds); 
```

# c# - 为 Mono C# 应用程序生成核心转储

> ID：12045742
> 
> 赞同：6
> 
> 时间：2012-08-20T21:52:02.743
> 
> 标签：c#, mono, crash-dumps

我目前正在研究在单声道下运行的 ac# linux 应用程序。虽然，我相信我已经处理了程序中可能抛出的任何异常，但是如果我错过了任何异常，我想知道是否有一种方法可以在 C# 应用程序崩溃时创建一个核心转储文件，以便我可以看到异常并通过它尝试确定导致问题的原因，就像 GDB 对 C 程序所做的那样。

我正在为我的应用程序使用 OpenSuse 12.1。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:05:44.600

听起来你想要一个用于 Mono的[SuperAssert 。](http://msdn.microsoft.com/en-us/magazine/cc188701.aspx)我只能找到这个 Mono[邮件线程](http://lists.ximian.com/pipermail/mono-devel-list/2007-July/024140.html)。他们讨论了 Managed Debugger 到 Mono 的可能转换。不幸的是，Microsoft EULA 似乎阻止了他们移植这个。因此，您似乎需要直接使用操作系统。这是有关如何[捕获核心转储的官方指南](http://www.novell.com/support/kb/doc.php?id=3054866)

应采取以下步骤来准备捕获核心转储：

-禁用核心转储文件的最大大小限制 -
配置用于存储核心转储的固定位置 -禁用
AppArmor
-为 setuid 和 setgid 进程启用核心转储

快速步骤指南如下：

跑

```
ulimit -c unlimited 
```

跑

```
install -m 1777 -d /var/local/dumps 
```

跑

```
echo "/var/local/dumps/core.%e.%p"> /proc/sys/kernel/core_pattern 
```

跑

```
rcapparmor stop 
```

跑

```
sysctl -w kernel.suid_dumpable=2 
```

（重新）启动有问题的流程。

还可以看看这个线程：[Linux 中的核心转储](https://stackoverflow.com/questions/2251391/core-dump-in-linux)- 如果您认为应用程序可能会崩溃，也许您可​​以设置一个技术支持帮助脚本/exe 来执行上述所有操作并启动 Mono 应用程序。这将使最终用户更容易重现问题并向您发送转储以诊断问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:19:02.323

你见过下面的吗？

[http://www.mono-project.com/Debugging#Debugging_with_GDB](http://www.mono-project.com/Debugging#Debugging_with_GDB)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:12:18.823

是的，你可以，但你只能找出`.NET exception`发生了什么，但不知道你是否可以在没有第三方软件的情况下进行核心转储。

根据应用程序的类型，您可以挂钩以下之一`events`：

*   如果你使用`Windows Forms Application`你可以订阅`System.Windows.Forms.Application.ThreadException`

*   如果你使用`WPF`你可以订阅`System.Windows.Threading.Dispatcher UnhandledException`

*   如果您想订阅一般`UnhandledException`事件，您可以订阅`System.AppDomain.UnhandledException`（但我猜如果应用程序没有足够的访问权限则无法访问此事件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:52:56.817

您可能想查看[bug-buddy](http://git.gnome.org/browse/bug-buddy/)的来源。

# java - 成员变量的多态性。我知道这是不可能的，我不明白这个具体情况

> ID：12045744
> 
> 赞同：11
> 
> 时间：2012-08-20T21:52:08.797
> 
> 标签：java, oop, class, polymorphism, overriding

我知道这种行为，但我不能 100% 确定为什么会发生这种情况。
我知道java中的实例变量没有多态性。变量由编译器静态解析。
但是在下面我对一些事情感到困惑：

```
class Animal{  
   String name = "Animal";  
   public void display(){  
    System.out.println("My name is "+ name);  
   }  
}  

public class Dog extends Animal {   
   String name = "Dog";   

   public static void main(String[] args) {  
        Animal a = new Dog();  
        Dog d = new Dog();  
        System.out.println(a.name);//Line 1  
        a.display();//Line 2   
        d.display();//Line 3  
   }  
} 
```

我知道`Line 1`它会显示`Animal`为静态类型`a`（由编译器解析）。
让我困惑的是为什么`Line 3`还会显示`My name is Animal`？
将尝试调用该方法，`Dog`因为这是运行时的实际对象，并且由于它没有被覆盖，因此将在父类中找到该方法`Animal`。
我不明白的是`name`，`display`如果实际操作的对象是`Dog`. 它不会隐藏父母的`name`变量吗？在我看来，它似乎不是静态解析的，因为类型是`Dog`. 它不是对象内存布局的一部分吗？
就像里面`display`只有父变量是可见的。为什么？

**更新：**

@Razvan 和 @LouisWasserman 的回答很有帮助。
在这些之后我有最后一个问题：
两者的观点似乎如下：
来自@Razyan
`System.out.println("My name is "+ this.name); //<-- note the this`
来自@Louis
that the refer `this`to `Animal`and that `the implementation of display() is in the Animal class`。

到目前为止还可以。`display()`但是这些点如何与我修改如下 的事实一致：

```
class Animal{  
   String name = "Animal";  
   public void display(){  
    System.out.println("Current class is "+ this.getClass().getName());  
    System.out.println("My name is "+ name);  
   }  
} 
```

那么结果：

```
 Dog d = new Dog();  
 d.display(); 
```

> 当前班级是**狗**
> 我的名字是动物

我期待`this`里面`display`会是`Animal`我在这里理解的答案。但事实并非如此。为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T22:01:54.783

当您调用`d.display()`被`Animal.display()`调用时，因为您没有在 Dog 类中覆盖它。

所以一个想象的实现`Dog.display()`将是这样的：

```
 public void display(){  
    super.display();
 } 
```

Animal.display() 的实现是：

```
 public void display(){  
    System.out.println("My name is "+ this.name); //<-- note the this
 } 
```

该`Animal.display()`方法甚至不知道对象的存在，`Dog`因此也不知道它的`name`变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:12:53.113

这可能是一种更有用的思考方式：变量具有相同名称的事实一点也不重要。此代码的*行为*与

```
class Animal{  
   String foo = "Animal";  
   public void display(){  
    System.out.println("My name is "+ foo);  
   }  
}  

public class Dog extends Animal {   
   String bar = "Dog";   

   public static void main(String[] args) {  
        Animal a = new Dog();  
        Dog d = new Dog();  
        System.out.println(a.foo);//Line 1  
        a.display();//Line 2   
        d.display();//Line 3  
   }
} 
```

关键是，类中的字段`name`被视为与中`Dog`的字段完全分开，就哪些方法可以看到。当你直接引用时，它只知道那是一个，所以它使用类中的字段。`name``Animal``a.name``a``Animal``name``Animal`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-17T21:55:10.627

在这里，我将所有其他人的观点总结在一个答案中，以便人们可以毫不费力地清楚地了解它。

从概念上讲，代码可以被认为是

```
class Animal{  
   String name = "Animal";  
   public void display(){  
    System.out.println("My name is "+ this.name);  
   }  
}  

public class Dog extends Animal {   
   String name = "Dog";  
   public void display(){  
    super.display();
 } 

   public static void main(String[] args) {  
        Animal a = new Dog();  
        Dog d = new Dog();  
        System.out.println(a.name);//Line 1  
        a.display();//Line 2   
        d.display();//Line 3  
   }  
} 
```

在 Dog 的类中，我们隐藏了 Animal 类的 name 字段，即。Dog 的实例将有两个实例变量，名为`name`一个是`Animal.name`（来自保存值“Animal”的继承）第二个是`Dog.name`（保存值“Dog”）。`Dog.name`躲在课堂上`Animal.name`。在第 3 行，在.Dog 的实例上调用 display() 方法不会覆盖 display() 方法，因此最终会调用方法。在此方法中，指的是and ，其中有两个，一个在打印的范围内。（因为作为超类不知道类和）`Dog`
`Dog``Animal``Animal.display()``this``Dog``Dog``name``Animal``Animal``Dog``Dog.name`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-01T18:46:43.693

在调试模式下运行的简单 Junit 测试表明 Dog 对象中确实有两个“名称”变量。现在，回答 OP 最新更新中提出的问题：

```
 class Animal{  
   String name = "Animal";  
   public void display(){  
    System.out.println("Current class is "+ this.getClass().getName());  
    System.out.println("My name is "+ name);  
   }  
} 

Dog d = new Dog
d.display(); 
```

这里，'d' 包含两个变量 -> 一个是继承的，另一个是定义在 dog 类中的变量，两者具有相同的名称。现在，当在 Dog 对象上调用 display() 时，由于它没有覆盖 Animal 类的 display() 方法，JVM 会运行 Animal 类的 display() 方法。

```
System.out.println("Current class is "+ this.getClass().getName()); 
```

将打印 Dog 因为它是调用该方法的实际对象。

```
System.out.println("My name is "+ name); 
```

将打印 'My name is Animal' ，因为如前所述，Dog 的对象中包含两个变量，但是一旦在 Animal.display() 方法中，变量 Animal.name 的值由于范围而被选择。

# c++ - 是否建议将字符串 std::move 到将被覆盖的容器中？

> ID：12045748
> 
> 赞同：13
> 
> 时间：2012-08-20T21:52:47.393
> 
> 标签：c++, c++11, move-semantics

我有以下代码

```
std::vector<std::string> lines;
std::string currentLine;

while(std::getline(std::cin, currentLine)) {
  // // option 1
  // lines.push_back(std::move(currentLine));

  // // option 2
  // lines.push_back(currentLine);
} 
```

我看到两者的成本不同

1.  第一种方法将 clear `currentLine`，使得`getline`需要为字符串分配一个新的缓冲区。但它将改为使用向量的缓冲区。

2.  第二种方法将`getline`能够重用缓冲区，并且需要为向量内字符串分配新的缓冲区。

在这种情况下，有没有“更好”的方法？编译器可以更有效地优化一种或其他方法吗？或者是否有聪明的字符串实现使一种选项比另一种更高效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:54:35.350

鉴于短字符串优化的普遍性，我的直接猜测是，在许多情况下，这一切都不会产生任何影响——使用 SSO，移动最终会复制包含的数据（即使源是右值，所以它是有资格作为移动的来源）。

在你给出的两个之间，我想我倾向于支持不动的版本，但我怀疑这两种方式都会产生很大的不同。鉴于（大部分时间）您将在搬家后立即重新使用源，我怀疑搬家真的会带来很多好处（即使是最好的）。假设不涉及 SSO，您的选择是在向量中创建一个新字符串来保存您读取的字符串的副本，或者从您读取的字符串中移动并（本质上）创建一个新字符串来保存下一行下一次迭代。无论哪种方式，昂贵的部分（分配一个缓冲区来保存字符串，将数据复制到该缓冲区中）都将几乎相同。

至于：“有没有更好的方法”，我至少可以想到几种可能性。最明显的方法是对文件进行内存映射，然后遍历该缓冲区，找到行尾，并使用`emplace_back`缓冲区中的数据直接在向量中创建字符串，根本没有中间字符串。

这确实有内存映射未标准化的小缺点——如果您不能忍受这种不可移植性，您可以将整个文件读入缓冲区而不是内存映射。

之后的下一个可能性是创建一个具有类似 const 字符串的接口的类，它只维护一个指向大缓冲区中数据的指针，而不是对其进行复制（例如，CLang 使用类似的东西）。这通常会减少总分配、堆碎片等，但如果您（例如）之后需要修改字符串，它不太可能（如果有的话）用处不大。

# c# - PowerShell - 从对象方法中写入进度

> ID：12045749
> 
> 赞同：3
> 
> 时间：2012-08-20T21:52:47.753
> 
> 标签：c#, powershell

我有一个我编写的自定义 C# PowerShell Cmdlet，它输出一个对象。

```
[Cmdlet(VerbsCommon.Get, "CustomObj")]
public class CustomObjGet : Cmdlet
{
    protected override void ProcessRecord()
    {
        var instance = CustomObj.Get();
        WriteObject(instance);
    }
} 
```

用法：

```
$output = Get-CustomObj 
```

返回的对象有一个方法：

```
public class CustomObj
{
    public string Name { get; set; }

    public static CustomObj Get()
    {
        var instance = new CustomObj() { Name = "Testing" };
        return instance;
    }

    public void RestartServices () 
    {
        // Want to WriteProgress here...
    }
} 
```

用法：

```
$output.RestartServices() 
```

就目前而言，该方法无法像在 Cmdlet 本身的 ProcessRecord() 方法中那样访问 Cmdlet WriteProgress 函数。

我想从该方法中执行 PowerShell WriteProgress。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T23:25:44.727

对不起，误读了这个问题。这似乎在我有限的测试中起作用：

```
 public void RestartServices()
    {
        //Write
        // Want to WriteProgress here...
        for (int i = 0; i <= 100; i += 10)
        {
            Console.WriteLine("i is " + i);
            UpdateProgress(i);
            Thread.Sleep(500);
        }
    }

    private void UpdateProgress(int percentComplete)
    {
        var runspace = Runspace.DefaultRunspace;
        var pipeline = runspace.CreateNestedPipeline("Write-Progress -Act foo -status bar -percentComplete " + percentComplete, false);
        pipeline.Invoke();
    } 
```

仅供参考，在 PowerShell V3 中，您也可以这样做：

```
 private void UpdateProgressV3(int percentComplete)
    {
        Collection<PSHost> host = PowerShell.Create(RunspaceMode.CurrentRunspace).AddCommand("Get-Variable").AddParameter("-ValueOnly").AddArgument("Host").Invoke<PSHost>();
        PSHostUserInterface ui = host[0].UI;
        var progressRecord = new ProgressRecord(1, "REstarting services", String.Format("{0}% Complete", percentComplete));
        progressRecord.PercentComplete = percentComplete;
        ui.WriteProgress(1, progressRecord);
    } 
```

# ruby-on-rails - 如何确保私人宝石是最新的？

> ID：12045751
> 
> 赞同：0
> 
> 时间：2012-08-20T21:52:50.300
> 
> 标签：ruby-on-rails, ruby, bundler

我们在所有的 ruby​​ 项目中都包含了许多私有（通用）gem。我们从 GitHub 中包含它们，并使用发布标签来指定版本。

`gem 'aswesome_gem', :git => 'git@github.com:evantahler/aswesome_gem.git', :tag => 'v2.0.28'`

然而，我们一直在快速迭代我们的 gem，让我们所有的项目保持最新变得很痛苦。我不希望托管我们自己的 gem 服务器（Gem in a Box 等）。我们使用标签而不是分支 ( `:branch => 'production'`) 的原因是，如果分支存在，bundler 将不会更新它。

bundler 是否有一个扩展，可以让我指定每次`bundle install`运行时，bundler 会强制将本地缓存副本更新到相关分支（即使它可能已经被签出）？我认为我基本上想`git pull`在每个基于 git 的 gem（恰好由 a 指定`:branch`）上，Bundler 的默认行为假定如果分支存在，则 gem 是最新的（不管与原点是否相同）。

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T23:10:46.220

我认为您需要`bundle update`获取最新版本的 gems。

# sftp - 如何使用单行通过 sftp 重命名文件？

> ID：12045752
> 
> 赞同：3
> 
> 时间：2012-08-20T21:52:54.037
> 
> 标签：sftp

是否有使用“sftp”将远程服务器上的远程文件移动到另一个目录（在同一远程服务器上）的单线器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T21:56:55.013

因为`sftp`它是`rename`。如果您要求 sftp 调用，使用 bash 它类似于

```
sftp -b - host <<<"rename a/file b/file" 
```

# javascript - 为什么我的令牌输入在移动设备上会中断？

> ID：12045755
> 
> 赞同：0
> 
> 时间：2012-08-20T21:53:03.873
> 
> 标签：javascript, jquery, html, css, mobile

您可以在搜索框中看到我的令牌输入：http: [//pineapple.io/](http://pineapple.io/)

一般情况下，有一个隐藏的输入框，点击框就会展开。

它似乎在所有桌面浏览器中都很好用，但是在手机上，当您单击框的右侧区域（通常在桌面上工作）时，它不会在微小的不可见输入中单击。您需要实际单击到最远的点（直接在放大镜的右侧），然后它才会起作用。

这里是必须点击的地方：

![在此处输入图像描述](../Images/c22eacac6698aff3ee711bc2d11cd29a.png)

我认为这与手机的“触摸”而不是点击功能有关？

来源在这里： http: [//loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:58:21.503

您的输入非常小（目前它被硬编码在`width: 30px`），因此移动设备不喜欢它。你能把它变大吗？那可能会有很大帮助！

这是一张图片来解释： [http ://cl.ly/image/0b3N471F1y3O](http://cl.ly/image/0b3N471F1y3O)

# php - 在特定时间后将数据保存在电子邮件中

> ID：12045757
> 
> 赞同：0
> 
> 时间：2012-08-20T21:53:14.700
> 
> 标签：php, session

我打算制作一个三步联系表，当用户完成第一步时，数据将保存在会话中并进入第二步，然后第三步所有数据将我保释给我，但如果介于用户离开之间的某个地方，我将被邮寄给我输入了吗？

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:08:13.347

使用 .将值存储在数据库中`session_id`。

如果用户完成了这些步骤，您可以在邮件处理成功后将其删除。

但是，如果用户在完成表单之前离开了您的表单，那么无论如何您都会存储这些值。设置一个 cron 作业来检查这些值，通过电子邮件发送给自己并删除。

# google-apps-script - 使用 ClientHandler.validateMatches 方法。.

> ID：12045759
> 
> 赞同：0
> 
> 时间：2012-08-20T21:53:20.047
> 
> 标签：google-apps-script

我正在尝试使用 ClientHandler.validateMatches() 方法来隐藏/显示和启用/禁用 ui 的某些元素。我正在添加两个 ClientHandler，但实际上只有一个似乎按预期执行。代码如下：

```
function doGet(e) {
  var app = UiApp.createApplication();
  var grid = createAdultInfoGrid(135, 8);

  app.add(grid);
  return app;
}

/* Element id for adult-specific information grid element */
var GRID_ADULTS_ID = 'G_AdultInfo';
/* Element id for driver status field */
var PARTICIPANT_DRIVER_ID = 'P_IsDriver';
/* Element id for seatbelt count field */
var PARTICIPANT_SEATBELT_COUNT_ID = 'P_BeltCount';
/* Element id for seatbelt count status message field */
var PARTICIPANT_SEATBELT_MSG_ID = 'P_BeltCountMsg';

/**
 * Creates a new grid for display of adult-specific information using the GRID_ADULTS_ID constant as its id
 * @param pLblWidth - the width to be used for labels
 * @param pCellPadding - the value to be used for cell padding in the resulting grid
 */
function createAdultInfoGrid(pLblWidth, pCellPadding) {
  Logger.log("Creating adult participant information grid . . .");
  var app = UiApp.getActiveApplication();
  var grid = app.createGrid(2, 3).setId(GRID_ADULTS_ID).setCellPadding(pCellPadding);

  Logger.log("Creating listbox - driver . . .");
  var lstBoxDriver = app.createListBox().setId(PARTICIPANT_DRIVER_ID).setName('DriverStatus');
  lstBoxDriver.setVisibleItemCount(1);
  lstBoxDriver.addItem('Yes');
  lstBoxDriver.addItem('No');  
  lstBoxDriver.setItemSelected(0, true);

  Logger.log("Creating textbox - seatbelts . . .");
  var txtBoxSeatBelts = app.createTextBox().setId(PARTICIPANT_SEATBELT_COUNT_ID).setValue('2');
  var labelBeltStatus = app.createLabel('Please enter a number between 1 and 15.').setId(PARTICIPANT_SEATBELT_MSG_ID).setWidth(pLblWidth * 2).setVisible(false);
  var driverYesHandler = app.createClientHandler()
      .validateMatches(lstBoxDriver, '([Yy][Ee][Ss]){1}')
      .forTargets(txtBoxSeatBelts)
      .setText('')
      .setEnabled(true)
      .setVisible(true)
      .setStyleAttribute("color", "black")
      .setStyleAttribute("background", "white")
      .forTargets(labelBeltStatus)
      .setVisible(false);

  var driverNoHandler = app.createClientHandler()
      .validateMatches(lstBoxDriver, '([Nn][Oo]){1}')
      .forTargets(txtBoxSeatBelts)
      .setText('0')
      .setEnabled(false)
      .setVisible(true)
      .setStyleAttribute("color", "black")
      .setStyleAttribute("background", "white")
      .forTargets(labelBeltStatus)
      .setVisible(false);

  lstBoxDriver.addChangeHandler(driverYesHandler);
  lstBoxDriver.addChangeHandler(driverNoHandler);

  Logger.log("Adding listbox - driver . . .");
  grid.setWidget(0, 0, app.createLabel('I am willing to drive:').setWidth(pLblWidth));
  grid.setWidget(0, 1, lstBoxDriver);

  Logger.log("Adding textbox - seatbelts . . .");
  grid.setWidget(1, 0, app.createLabel('Seatbelts:').setWidth(pLblWidth));
  grid.setWidget(1, 1, txtBoxSeatBelts);
  grid.setWidget(1, 2, labelBeltStatus);

  app.close();
  return grid;
} 
```

在浏览器中访问时，我可以将列表框从“是”更改为“否”，并且 ClientHandler 工作（文本设置为 0，字段被禁用等）。但是，当列表框从“否”更改为“是”时，不会执行预期的操作 - 表单保持相同的状态。我尝试使用 'Yes' 和 'No' 作为指定了 'i' 标志的正则表达式模式 - 也尝试使用 validateNotMatch() 方法，但无济于事。在从默认值进行第一次更改后，该事件似乎没有被捕获。任何建议，将不胜感激。

在此先感谢，
dgg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:04:21.723

请参阅打开的错误[问题 1226](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1226)。ClientHandlers 和 ListBoxes 存在一个错误，因此无论验证如何，处理程序都将始终触发。因此，您的两个处理程序都在触发，并且由于您的“否”处理程序是最后添加的，所以它是最后运行的处理程序。您可以通过颠倒添加 ChangeHandler 的顺序来证明这一点。

# c - 在 Visual Studio 2010 (OpenMP) 中并行化 for 循环

> ID：12045761
> 
> 赞同：3
> 
> 时间：2012-08-20T21:53:40.037
> 
> 标签：c, multithreading, visual-studio-2010, for-loop, openmp

我最近阅读了有关 OpenMP 的内容，并试图在我的程序中并行化一些现有的 for 循环以加快速度。但是，由于某种原因，我似乎将垃圾数据写入文件。我的意思是我没有将点 1、2、3、4 等写入我的文件，我有点 1、4、7、8 等。我怀疑这是因为我没有跟踪线程，它只会导致竞争条件？

我一直在阅读尽可能多的关于 OpenMP 的内容，因为它似乎是进行多线程编程的一个很好的抽象。我很感激任何指示，以了解我可能做错了什么。

这是我到目前为止一直在尝试做的事情（只有相关的代码）：

```
#include <omp.h>

pixelIncrement = Image.rowinc/2;

#pragma omp parallel for
for (int i = 0; i < Image.nrows; i++ )
   {
      int k =0;
      row     = Image.data + i * pixelIncrement;

      #pragma omp parallel for
      for (int j = 0; j < Image.ncols; j++)
      {
          k++; 
          disparityThresholdValue = row[j];  
                 // Don't want to save certain points
             if ( disparityThresholdValue < threshHold)
             {       
                // Get the data points
                x = (int)Image.x[k]; 
                y = (int)Image.y[k]; 
                z = (int)Image.z[k]; 
                grayValue= (int)Image.gray[k];      

                cloudObject->points[k].x = x;
                cloudObject->points[k].y = y;
                cloudObject->points[k].z = z;
                cloudObject->points[k].grayValue = grayValue;

        fprintf( cloudPointsFile, "%f %f %f %d\n", x, y, z, grayValue);
             }
      }
   }

   fclose( pointFile ); 
```

我确实在我的编译器设置中启用了 OpenMP（C/C++ -> 语言 -> Open MP Support (/openmp)。

关于可能是什么问题的任何建议？我在 Windows XP 32 位上使用四核处理器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:00:23.123

是否将所有点都写入文件，但不是按顺序写入，或者实际点数据是否混乱？

第一种情况在并行编程中是预期的——一旦你并排执行某些事情，你将无法保证顺序，除非你同步访问（此时你可以忽略并行化，因为它变得有效线性）。如果您需要依赖顺序，您可以并行化任何计算，但需要将其写在一个线程中。

如果点本身搞砸了，请检查变量的声明位置以及多个线程是否正在访问相同的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T05:31:12.080

这里有几个问题：

```
#pragma omp parallel for
for (int i = 0; i < Image.nrows; i++ )
   {
      int k =0;
      row     = Image.data + i * pixelIncrement;

      #pragma omp parallel for
      for (int j = 0; j < Image.ncols; j++)
      {
          k++; 
```

不需要内在的`parallel for`。外循环应该包含足够的工作来保持所有核心忙碌。

此外，for 内部循环`k`是一个共享变量，并且以非原子方式递增。`x`, `y`,`z`也在内部循环线程之间共享并“随机”覆盖。删除内部指令，看看它是如何进行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-15T17:18:07.797

当您有一个带有嵌套循环的循环时，不需要第二个 omp pragma。它已经将第一个循环并行化。请记住，这仅在必须按顺序执行第二个循环时才有效。您有一个顺序递增，因此您不能以随机顺序执行第二个循环。OMP pragma 是并行化代码的一种非常简单而酷的方法，但不要过多地使用它们！

更多细节在这里 ->[使用 OpenMP 的并行循环](http://supercomputingblog.com/openmp/tutorial-parallel-for-loops-with-openmp/)

# ruby-on-rails - Rails 3.1.0 default_url_options 用于自定义路径

> ID：12045763
> 
> 赞同：0
> 
> 时间：2012-08-20T21:54:05.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

在我的 routes.rb 中，我定义了一个自定义路径：

```
match "foo/copy" => "foo#copy", :via => [ :post ], :as => "copy_foo" 
```

我的 config/initializers 目录中有一个名为 https_by_default.rb 的初始化程序，其中包含一行：

```
Rails.application.routes.default_url_options[:protocol] = 'https' 
```

如果我运行 rails console 并输入`Rails.application.routes.default_url_options`，它会`{:protocol => 'https}`按预期返回。

但在我看来，我使用生成的自定义路径 _url 帮助程序时，它不会使用 https 生成 URL。`<%= copy_foo_url() %>`在 ERB 回报`http://localhost:3000/foo/copy`中。

为了让我的命名路由助手尊重 default_url_options，我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:44:33.843

您应该改用以下内容：

```
<%= copy_foo_path() %> 
```

并在您的应用程序配置文件中添加。

```
config.force_ssl = true 
```

这会在所有 Rails 环境中启用 ssl。如果您只想在您的生产环境中启用 ssl，那么只需将该行添加到您的生产配置文件中。

# c++ - C ++ - Pthread如何发送值

> ID：12045766
> 
> 赞同：2
> 
> 时间：2012-08-20T21:54:17.743
> 
> 标签：c++, multithreading, pthreads

我如何发送`std::string`到我的线程？

这是我的代码：

```
void* sendReminder(void*) 
{
    system("echo 'hello' >> buffer.txt");    
}

int main()
{
    string str1 = "somevalue";
    pthread_t t1;
    pthread_create(&t1, NULL, &sendReminder, NULL);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:00:06.593

使用第四个参数`pthread_create`向你的函数发送一个“参数”，只要确保在堆上复制它：

```
string *userData = new string("somevalue");    
pthread_create(&t1, NULL, &sendReminder, (void *) userData); 
```

如果您要`pthread_join`等待新线程，暂停调用者的执行，则只需传递局部变量的地址即可：

```
if (pthread_create(&t1, NULL, &sendReminder, (void *) &str1) == 0)
{
    pthread_join(t1, &result);
    // ... 
```

您可以使用以下方法检索该值：

```
void* sendReminder(void* data) 
{
    std::string* userData = reinterpret_cast<std::string*>(data);
    // Think about wrapping `userData` within a smart pointer.

    cout << *userData << endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T21:58:34.373

您将值作为 a`void*`在最后一个参数中传递给`pthread_create`. 在线程函数中，您将`void*`返回的类型转换为您传入的对象的类型。在本例中为字符串。

# wcf - 发布具有多个架构文件的 Biztalk WCF 服务和

> ID：12045767
> 
> 赞同：2
> 
> 时间：2012-08-20T21:54:27.877
> 
> 标签：wcf, biztalk, publishing, hl7

我这里是这样的：

Visual Studio 2010 中的 Biztalk 项目，相应的 Biztalk 应用程序在 Biztalk 2010 服务器上运行。接收端口接受 HL7-V3 架构，将其转换为发送到 SQL Server 2008 实例并通过存储过程插入到表中的架构。当接收端口使用 FILE 适配器时，一切都按预期工作（来自 HL7 文件的数据被插入到表中）。

因此，我们达到了需要 Web 服务以通过 Web 公开接收端口的地步……太好了，我们在 VS2010 中内置了“Biztalk WCF 服务发布向导”。这就是我停下脚步的地方。

我可以按照向导的“创建”步骤进行操作，它使*从 Biztalk 程序集提取模式*大约进行到一半，然后它会发出错误并引发一般错误：

“给定的键不在字典中”

经过大量搜索和挠头后，我终于知道该向导使用 Xsd.exe（对我来说是新的）从模式生成代码。这让我看到了 MSDN 库文章[Here](http://msdn.microsoft.com/en-us/library/ew6ts9yw.aspx)，其中指出 Xsd.exe 忽略了包含的架构。好吧，我们正在使用的消息的 HL7V3 模式集总共有大约 30 个文件——所有文件都相互引用，如下所示：

```
<xs:include schemaLocation="../coreschemas/infrastructureRoot.xsd"/>
<xs:include schemaLocation="COCT_MT050002UV07.xsd"/>
<xs:include schemaLocation="COCT_MT090100UV01.xsd"/>
<xs:include schemaLocation="COCT_MT240000UV01.xsd"/>
<xs:include schemaLocation="COCT_MT150000UV02.xsd"/> 
```

所以这是我的问题。

所以现在我的问题是：有没有办法从 Biztalk 项目手动创建 WCF 服务，或者更好的是，让向导为这种情况工作？或者，只是关于在哪里寻找的任何建议，因为这是我的第一个 Biztalk 项目。

我的谷歌搜索只为巫师提供了过多的操作方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:24:20.230

好吧，问题已经解决了，尽管遇到了太多的兔子洞，我偶然发现了一篇名为[Getting Started with HL7 v3 and Biztalk Server 2006](http://msdn.microsoft.com/en-us/library/bb967001.aspx)的 MSDN文章，其中有一个名为**Schema Modifications**的小节。其中一项修改是将 Target Namespace 添加到 HL7 v3 中的一些 coreschema 文件中。

我过去看过这个文档，它提到这解决了*在 BizTalk Server 中编译架构时不支持*它们的问题。我有点忽略它，因为我没有收到任何错误，此外，我使用的是 2010，而不是 2006，所以我天真地认为“现在必须修复......没有错误”

并非如此，我完全按照文档的建议进行操作，并立即部署并运行 Biztalk WCF 服务发布向导，一切正常，我能够查看生成的帮助和 .wsdl 页面。

我希望这对将来的某人有所帮助。对我来说非常反高潮。

# javascript - 在 onclick javascript 或 jquery 中触发 onclick 事件？

> ID：12045773
> 
> 赞同：2
> 
> 时间：2012-08-20T21:54:59.857
> 
> 标签：javascript, jquery

单击按钮时是否可以触发另一个 onclick 事件？

IE

```
onclick="document.getElementById('link').onclick()" 
```

我试图让这个在ie6中工作。

尝试了 jquery 脚本，但在 ie6 中没有运气：

```
<textarea style="height:80px; border:0px;" name="box3" id="box3" cols="58" rows="7" class="title">FUTURE: </textarea> 
<script> $('#box3').click(function() { $('#link').click(); }); </script> 
<a id="link"><div id="test3-header" class="accordion_headings future" >FUTURE</div></a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T21:56:26.497

是的。使用 jQuery 最简单：

```
$('#buttonActuallyClicked').click(function() {
    $('#buttonBeingFakeClicked').click();
}); 
```

`buttonBeingFakeClicked`每当有人点击带有 id 的元素时，这将“伪造”点击带有 id的元素`buttonActuallyClicked`。

# jquery - 使用复选框切换同一类的多个 div

> ID：12045774
> 
> 赞同：0
> 
> 时间：2012-08-20T21:55:10.073
> 
> 标签：jquery, html, checkbox, closest, toggleclass

我有一组具有相同类的 div。每个 div 内部都有一个相同的复选框列表。这些复选框连接到 jquery 函数以将 div 切换到不同的类。但是目前，当您单击复选框而不是仅更改一个 div 时，它会更改所有 div。我正在尝试获取它，以便每个 div 单独响应其内部的复选框。

你可以在这里看到我在说什么：http: [//jsfiddle.net/dustinohara/3nK5A/180/](http://jsfiddle.net/dustinohara/3nK5A/180/)

这是针对我正在开发的画廊系统，其中每个 div 将有一个图像，复选框将用于分配类名，然后将用于使用同位素插件进行过滤。

任何指针将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:59:17.853

诀窍是`$(this)`在您的事件处理程序中使用。[修复了 jsfiddle](http://jsfiddle.net/3nK5A/182/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:01:30.813

使用神奇的词 $(this)。

这里的代码

```
$(".editCHECK").change(function() {

    $(this).closest('.box').toggleClass("edit");

});

$(".adCHECK").change(function() {

    $(this).closest('.box').toggleClass("ad");

});

$(".personalCHECK").change(function() {

    $(this).closest('.box').toggleClass("personal");

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:02:18.150

```
$(".editCHECK, .adCHECK, .personalCHECK").change(function() {
 $(this).closest('.box').toggleClass($(this).attr('class').replace('CHECK', ''));
}); 
```

[**小提琴**](http://jsfiddle.net/3nK5A/183/)

# xcode - .ipa 文件中的版本号在 info.plist 文件中的自动递增版本后面

> ID：12045779
> 
> 赞同：1
> 
> 时间：2012-08-20T21:55:31.023
> 
> 标签：xcode, bash

我在构建阶段有一个运行脚本，可以在每次运行发布构建时自动增加构建版本。它按预期增加了我的 info.plist 文件和 root.plist 文件。但是，在 Organizer 中，为存档列出的版本始终是运行脚本之前版本的编号（比我预期的少一个）。我让我的运行脚本在目标依赖项之后和编译源之前运行。

这是我的构建脚本。

```
if [ $CONFIGURATION == Release ]; then
echo "Bumping build number..."
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE"

productVersion=$(/usr/libexec/PlistBuddy -c "Print CFBundleShortVersionString" "$INFOPLIST_FILE")

IFS='.'
set $productVersion
MAJOR_VERSION="${1}.${2}"
buildNewVersion="${MAJOR_VERSION}.${buildNumber}"

/usr/libexec/PlistBuddy -c "Set :CFBundleShortVersionString $buildNewVersion" "$INFOPLIST_FILE"

/usr/libexec/PlistBuddy -c "Set PreferenceSpecifiers:9:DefaultValue $buildNewVersion" SmartView/Resources/Settings.bundle/Root.plist
fib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:24:25.150

如果此脚本在 Target Dependencies 之后运行，那么我敢打赌，存在一个在某处包含版本的依赖项。您是否尝试过在依赖项之前运行它？

# ruby - Heroku 插件：宝藏数据 cli (td) 安装失败

> ID：12045782
> 
> 赞同：1
> 
> 时间：2012-08-20T21:55:40.553
> 
> 标签：ruby, heroku

我尝试按照[heroku devcenter](https://devcenter.heroku.com/articles/treasure-data)中的描述安装Treasure Data heroku cli插件（td），使用

```
$ heroku plugins:install https://github.com/treasure-data/heroku-td.git 
```

命令，但它失败并显示以下错误消息：

```
Installing heroku-td... failed
 !    Unable to load plugin heroku-td.
 !    Search for help at: https://help.heroku.com

    Error:       'td' gem is missing.  Please install td: gem install td (RuntimeError)
    Backtrace:   /home/istvan/.heroku/plugins/heroku-td/init.rb:4:in `rescue in <top (required)>'
                 /home/istvan/.heroku/plugins/heroku-td/init.rb:1:in `<top (required)>'
                 /usr/local/heroku/lib/heroku/plugin.rb:66:in `load'
                 /usr/local/heroku/lib/heroku/plugin.rb:66:in `load_plugin'
                 /usr/local/heroku/lib/heroku/command/plugins.rb:46:in `block in install'
                 /usr/local/heroku/lib/heroku/helpers.rb:232:in `action'
                 /usr/local/heroku/lib/heroku/command/plugins.rb:44:in `install'
                 /usr/local/heroku/lib/heroku/command.rb:193:in `run'
                 /usr/local/heroku/lib/heroku/cli.rb:25:in `start'
                 /usr/bin/heroku:26:in `<main>'

    Command:     heroku plugins:install https://github.com/treasure-data/heroku-td.git
    Plugins:     heroku-td
    Version:     heroku-toolbelt/2.30.3 (i686-linux) ruby/1.9.3 
```

我已经在我的本地机器上安装了 td

```
$ gem install td 
```

查看 gem 列表输出：

```
$ gem list

*** LOCAL GEMS ***

bundler (1.1.5)
fluent-logger (0.4.3)
hirb (0.7.0)
json (1.7.5)
msgpack (0.4.7)
rake (0.9.2.2)
rubygems-bundler (1.0.6)
rvm (1.11.3.5)
td (0.10.38)
td-client (0.8.22)
td-logger (0.3.14)
thor (0.16.0)
yajl-ruby (1.1.0) 
```

事实上， td 命令在我的本地机器上工作：

```
$ td
usage: td [options] COMMAND [args] 
```

这是我的 heroku 版本和 ruby​​ 版本：

```
$ heroku -v
heroku-toolbelt/2.30.3 (i686-linux) ruby/1.9.3

$ ruby -v
ruby 1.9.2p320 (2012-04-20 revision 35421) [i686-linux] 
```

你对哪里出了问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:07:53.733

安装`td`gem 后，`heroku`Heroku Toolbelt 提供的命令无法使用它。

@geemus 在 GitHub 问题中描述了该问题：[https ://github.com/heroku/heroku/issues/568](https://github.com/heroku/heroku/issues/568)

`heroku`尝试通过gem 而*不是*Toolbelt安装 TD heroku 插件。我不是积极的，但尝试

*   添加`heroku`到您的 Gemfile
*   `bundle install`
*   跑`bundle exec heroku plugins:install ...`

Toolbelt 兼容性的 TD 插件存在一个[悬而未决的问题](https://github.com/treasure-data/heroku-td/issues/1)。

# iphone - 如何在 UITableView 的开头插入一个 UITableViewCell

> ID：12045786
> 
> 赞同：0
> 
> 时间：2012-08-20T21:56:03.590
> 
> 标签：iphone, ios, uitableview

我正在尝试设置一个 UITableView，每个部分有 x 个部分和 X 个行。

但是我想在我的顶部添加一行。`UITableView`有没有办法将它硬编码到视图中？

我目前根据 NSdictionary 像这样返回每个部分的部分和行数。

```
- (NSInteger)numberOfSectionsInTableView: (UITableView *)tableView
{
    // Return the number of sections.
    return [letterDictionary count];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // returns the number of rows per section based off each entry in letterDictionary   
    currentLetter = [sectionLetterArray objectAtIndex:section];
    return [[letterDictionary objectForKey:currentLetter] count];       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:48:55.733

您可以向表格视图添加“标题”。

在您的表格视图类中：

```
self.tableView.tableHeaderView = yourView; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:00:43.360

您不能只在表格中的 UItable 上方添加一行。如果您只需要一行文本，为什么不根据您的需要使用 UITextField、UILabel 或 UITextView，并将其放置在您喜欢的 UItable 上方。

如果我误解了你，而你只是想在第一部分中添加一行作为第一行，那么你需要做的就是这样：

```
if (section == 0) {
  return [[letterDictionary objectForKey:currentLetter] count]+1;
} else
{
  return [[letterDictionary objectForKey:currentLetter] count];
} 
```

并确保在为 indexpath 返回行时，您也有类似的 if 语句，并返回 section == 0 和 row == 0 所需的任何内容。

但是，如果您向下滚动表格视图，第一行肯定会滚动出去 - 正如我所说的，我不确定您到底需要什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:42:16.023

您可以尝试自定义您的 tableview 部分的标题...
例如，您可以使用以下内容：

```
YourController.h
-(UIView *)headerView;

YourController.m
-(UIView *)headerView
{
    UIView *header = [[UIView alloc] initWithFrame:CGRectZero];
    // Place everything you want in your header
    // using [header addSubview:yourSubview];
    // Finally set header's frame and return it
    header.frame = CGRectMake(0.0, 0.0, 320.0, 44.0);
    return header;
}

// Use this to return header's height
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    if (section == yourSection)
    {
        return [self headerView].frame.size.height;
    }
    else
    {
        return [self sectionHeaderHeight];
    }
}

// Use this to return your view
-(UIView *)tableView:(UITableVIew *)tableVIew viewForHeaderInSection:(NSInteger)section
{
    if (section == yourSection)  // To show the header only on a specified section
    {
        return [self headerView];
    }
    else
    {
        return nil;
    }
} 
```

如果您改变主意并想在 tableView 下方进行自定义，您可以使用相同的方法更改 Header 和 Footer。
最后看看有关这些方法的文档：
[- tableView:viewForHeaderInSection:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aviewForHeaderInSection%3a)
[- tableView:heightForHeaderInSection:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForHeaderInSection%3a)
[- tableView:viewForFooterInSection:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aviewForFooterInSection%3a)
[- tableView:heightForFooterInSection:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForFooterInSection%3a)

希望这符合您的需求！

# javascript - jquery resize() 不起作用？

> ID：12045787
> 
> 赞同：3
> 
> 时间：2012-08-20T21:56:08.337
> 
> 标签：javascript, jquery, html, resize, window

这可能非常愚蠢，但我不确定我错在哪里。我发现 jQuery 'resize()' 根本不起作用。检查这个小提琴：http: [//jsfiddle.net/FefFW/1/](http://jsfiddle.net/FefFW/1/)

`<div id="log"></div>`

jQuery：

```
$(function(){
    $('#log').append('<h3>event log</h3><hr/>');
    $('window').resize(function(){
        $('#log').append('<p>resizing...</p>');
    });  
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T21:58:00.003

`"window"`不是选择器；没有`<window>`元素。

你想要`$(window)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T21:58:57.663

```
$(function(){
    $('#log').append('<h3>event log</h3><hr/>');
    $(window).on('resize', function(){
        $('#log').append('<p>resizing...</p>');
    });
})​; 
```

[**小提琴**](http://jsfiddle.net/FefFW/5/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T21:59:45.870

你记得把它放进去 `$(document).ready(function() { });` 吗？

是的，就像其他人在看小提琴时注意到的那样`'window'`是错误的。

# php - 我可以安全地依赖 mysql 中的列名大小写吗？

> ID：12045806
> 
> 赞同：3
> 
> 时间：2012-08-20T21:57:39.457
> 
> 标签：php, mysql, case-sensitive

我想使用驼峰式命名我的 mysql 表列名，并从这些 mysql 表中创建具有相同驼峰式名称的 php 类。我将自动生成这些 php 类。我想知道无论我在什么平台上运行我的应用程序，我是否可以依赖列名大小写。因此，例如，如果我将一个列名命名为“FirstName”，我是否会遇到从数据库中读取列名会产生“firstname”或类似内容的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:01:24.267

简短的回答是否定的。

长答案是 MySQL 中某些事物的大小写敏感性取决于底层操作系统。（Unix是敏感的）

这是[MySQL 文档中对问题的参考。](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html)

> 因此，底层操作系统的大小写敏感性在数据库和表名的大小写敏感性中起作用。这意味着数据库和表名在 Windows 中不区分大小写，而在大多数 Unix 中区分大小写。一个值得注意的例外是 Mac OS X，它基于 Unix，但使用不区分大小写的默认文件系统类型 (HFS+)。

同样来自关于列名的文档：

> 列、索引和存储的例程名称在任何平台上都不区分大小写，列别名也不区分。触发器名称区分大小写，这与标准 SQL 不同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T22:17:48.537

MySQL 表名和列名区分大小写，关键字不区分大小写。

但请注意，Windows 仅保留大小写，文件名是表名。（如果您在表示“Salesaccounts”时使用表“SalesAccounts”，那么它在 Windows 上会显示为 OK，而在 Linux 上会失败。

你应该对你想做的事情没问题，但是 1）在 Linux 上测试，2）测试你正在使用的工具。

# spring - org.hibernate.LazyInitializationException：无法初始化代理 - 尝试添加集合时没有会话异常

> ID：12045808
> 
> 赞同：0
> 
> 时间：2012-08-20T21:57:45.543
> 
> 标签：spring, hibernate

我正在使用 spring/hibernate 开发一个网站。我有一个域类“答案”，如下所示，

## 答案.java

```
@Entity
public class Answer {
   @OneToMany(fetch=FetchType.EAGER)
   @JoinTable(name="Answer_comment",joinColumns=@JoinColumn(name="ANSWER_ID"),
           inverseJoinColumns=@JoinColumn(name="COMMENT_ID"))
    private Collection<Comment> comment;

   -------------------------------------
   -------------------------------------
} 
```

所以我在答案和评论实体之间有一对多的关系。

为了测试这一点，我使用下面的代码，

```
Answer commentAnswer = answerService.getAnswer(1001);

   Comment comment2 = new Comment();
   comment2.setId(1004);
   comment2.setBody("I cannot agree with your answer..because ...");
   comment2.setUser(userService.getUser("ss"));
   //commentService.create(comment2);

   Comment comment3 = new Comment();
   comment3.setId(1005);
   comment3.setBody(" Yes I agree with your answer...sorry for my previous comment");
   comment3.setUser(userService.getUser("ss"));
   //commentService.create(comment3);

   ArrayList<Comment> commentList = new ArrayList<Comment>();
   commentList.add(comment2);
   commentList.add(comment3);

   commentAnswer.setComment(commentList);

   answerService.editAnswer(commentAnswer); 
```

我得到一个现有的答案 - 1001。并尝试将新创建的 2 条评论添加到该答案的评论集合中。并保存该答案对象。

当我运行它时，我收到以下错误，

```
 org.hibernate.LazyInitializationException: could not initialize proxy 
 - no Session at the line -- commentAnswer.setComment(commentList); 
```

有人可以解释一下我在这里做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:38:22.710

好吧..我得到了这个工作。我正在使用 HibernateTemplate.load 方法来加载 Answer 实体。现在我将其更改为 HibernateTemplate.get 方法来加载 Answer 实体。它现在正在工作。

# linux - 如何使用 grep 查找特殊字符

> ID：12045812
> 
> 赞同：-1
> 
> 时间：2012-08-20T21:58:06.807
> 
> 标签：linux

我想搜索不在集合 [0-9] 和 [af] 中的字符。请帮我写这个正则表达式？我是纯粹的 Windows 用户，必须为特定目的处理这些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:00:55.980

为什么使用正则表达式？为什么要使用 grep？

```
tr -d a-f0-9 < input-file 
```

将打印所有超出所需范围的字符。

# html - 导航使用 在 Librocket 的 RSS (CSS-ish)

> ID：12045819
> 
> 赞同：2
> 
> 时间：2012-08-20T21:58:29.257
> 
> 标签：html, css, rss, rml, librocket

我是一个完整的 RSS/CSS 菜鸟，我在让这段代码工作时遇到了一些麻烦。基本上我想要做的是以下内容：使用来自 Librocket 的 tabset 元素（用于选项屏幕）有一个导航栏。我无法维持活动/按下状态（向用户显示哪个选项卡处于活动状态）。我试过使用“:focus”，但是一旦我点击其他地方，焦点就会丢失。如果我使用 ":active"，只有当我在对象上按住鼠标按钮时才会保持活动状态。

无论如何，这是RSS代码：

```
/* Force the tabset element to a fixed size. */
tabset
{
    display: block;
    width: 100%;
    height: 100%;
    border: solid;
}

/* Display the tab container as a block element 20 pixels high; it will
   be positioned at the top of the tabset. */
tabset tabs
{
    display: block;
    height: 20px;
}

/* Force each tab to only take up 80 pixels across the tabs element. */
tabset tab
{
    width: 80px;
    border: solid;
    border-width: 1px 1px 0 1px;
}

/* DOESN'T WORK
tabset tab:focus    
{
    background-color: #DEADBEEF;
    border: solid;
    border-width: 1px 1px 0 1px;
}*/

/* DOESN'T WORK
tabset tab:active
{
    background-color: #DEADBEEF;
    border: solid;
    border-width: 1px 1px 0 1px;
}
*/
/* Display the panel container as a block element 180 pixels high; it will
   be positioned below the tab container and take up the rest of the space
   in the tabset. */
tabset panels
{
    display: block;
    height: 100%;
    border: solid;
}

/* Fix each panel to take up exactly the panelled space. */
tabset panels panel
{
    display: block;
    width: 100%;
    height: 100%;
    border: solid;
    border-width: 1px 1px 0 1px;
} 
```

以及 RML (HTML-ish) 代码的摘录：

```
<game id="game">
    <tabset style="height: 100%;">
        <tab>Gameplay</tab>
        <panel>
            GAMEPLAY TAB GAMEPLAY TAB GAMEPLAY TAB GAMEPLAY TAB GAMEPLAY TAB <br />
        </panel>
        <tab>Video</tab>
        <panel>
            VIDEO TAB VIDEO TAB VIDEO TAB VIDEO TAB VIDEO TAB VIDEO TAB <br />
        </panel>
    </tabset> 
```

我不能使用任何 javascript 代码，因为 Librocket 不支持。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-06T02:57:03.580

在搜索了 libRocket 源代码后，我在 ElementTabSet.cpp 中找到了以下内容：

```
if (old_tab)
    old_tab->SetPseudoClass("selected", false);
if (new_tab)
    new_tab->SetPseudoClass("selected", true); 
```

活动选项卡始终应用 :selected 伪类。因此，您可以按如下方式完成您想要的：

```
/* DOES WORK! */
tabset tab:selected
{
    background-color: #DEADBEEF;
    border: solid;
    border-width: 1px 1px 0 1px;
} 
```

# clojure - clojure：使用 korma 动态组合查询

> ID：12045825
> 
> 赞同：2
> 
> 时间：2012-08-20T21:58:59.030
> 
> 标签：clojure, korma

我正在尝试使用[korma创建一个非常简单的 API](http://sqlkorma.com/)

用户可以像这样查询数据库：

```
localhost:8080/my_postgres_db/users.json?where[age]=50&limit=1 
```

目前，我在尝试将 where 子句应用于现有的可组合查询时遇到错误。

```
clojure.lang.ArityException: Wrong number of args (2) passed to: core$where 
```

**有问题的代码**：

```
(defn- comp-query [q [func arg]]
  (let [sql-fn (ns-resolve 'korma.core (-> func name symbol))]
    (sql-fn q arg)))

(defn compose-query [table col]
  (reduce comp-query (select* table) col)) 
```

**用法**：

```
 (def clauses {:where {:column1 10} :fields "a,b" :limit 10 :offset 500})
 (-> (compose-query table clauses) select) 
```

一切都按预期运行，除了 where 子句。我可以以我选择的任何方式组合限制、偏移和字段，并获得预期的结果。只有当我的`:where`地图中有钥匙时，我才会遇到错误。

我是否在尝试我不应该做的事情？这是坏的clojure吗？任何帮助，将不胜感激。

**注意：**我已阅读此 SO[问题](https://stackoverflow.com/questions/10961285/generating-query-clauses-with-korma-and-clojure)

**编辑**：从`lein repl`我可以以相同的方式手动编写查询并且它可以工作

```
(where (select* "my_table") {:a 5}) 
```

**编辑：** 如果我将我的`compose-query`功能修改为：

```
(defn compose-query [table col]
  ; remove where clause to process seperately
  (let [base (reduce comp-query (select* table) (dissoc col :where))]
    (if-let [where-clause (:where col)]
      (-> base (where where-clause))
      base))) 
```

一切都按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:30:02.293

这里的问题是它`korma.core/where`不是一个函数，需要特殊处理。哪里不能作为一个函数实现并且仍然可以正确处理诸如`(where query (or (= :hits 1) (> :hits 5)))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T09:34:47.210

您可以在使用时使用`where*`功能`select*`。只需将您的子句映射如下：

```
(def clauses {:where* {:column1 10} :fields "a,b" :limit 10 :offset 500}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T00:14:27.470

只是一种预感; 扩展一些线程宏使得很难看出它们是否正确：

```
core> (macroexpand-1 '(-> (compose-query table clauses) select))
(select (compose-query table clauses))                                                                     
core> (macroexpand-1 '(-> func name symbol))
(clojure.core/-> (clojure.core/-> func name) symbol)                                                       
core> (macroexpand-1 '(clojure.core/-> func name))
(name func) 
```

将 func 传递给 name 看起来很可疑。

# user-interface - 如何更改 Racket GUI 应用程序中多行文本的颜色？

> ID：12045826
> 
> 赞同：5
> 
> 时间：2012-08-20T21:59:01.237
> 
> 标签：user-interface, racket

我正在尝试使用[Racket 的 GUI 工具包](http://docs.racket-lang.org/gui/index.html)，并试图在屏幕上使用 ASCII 艺术获得一种很酷的变色效果。我有一个回调可以改变颜色，但我似乎无法弄清楚如何调用它来获得适当的结果。

起初我尝试使用[消息控件](http://docs.racket-lang.org/gui/message_.html)来绘制文本，然后从那里更改文本颜色，但据我所知，没有办法更改消息的文本颜色。所以我继续使用[canvas subwindow](http://docs.racket-lang.org/gui/canvas_.html)，但我似乎无法一次绘制多行文本；换行符刚刚被删除，ascii 艺术显示为一长行文本。此外，我用来更改颜色的 on-paint 回调似乎只在调整窗口大小或以其他方式更改时被调用，因此如果用户坐着观看，颜色不会改变。

如果我能找到一种方法在画布的每一帧上进行回调，我可以遍历一个文本字符串列表并将每个字符串绘制到屏幕上，垂直分隔以呈现换行符的外观，但我没有不知道画布是否存在这样的“帧内”调用。

关于如何使它工作的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T02:57:38.783

Probably the easiest widget to use here is the [text%](http://docs.racket-lang.org/gui/text_.html) class (you'll need an [editor-canvas%](http://docs.racket-lang.org/gui/editor-canvas_.html) for it too). Look at [change-style](http://docs.racket-lang.org/gui/text_.html?q=text%25#(meth._(((lib._mred/main..rkt)._text~25)._change-style))) and related methods to see how to change the styling of a particular piece of text.

Example:

```
#lang racket/gui

(define frame (new frame% [label "Test"] [width 300] 
                                         [height 300]))
(define text (new text%))
(define canvas (new editor-canvas% [parent frame] 
                                   [editor text]))

(define style-delta (make-object style-delta% 
                                 'change-normal-color))

;; do some red
(send style-delta set-delta-foreground "red")
(send text change-style style-delta)
(send text insert "Hello world in red\n")

;; do some blue
(send style-delta set-delta-foreground "blue")
(send text change-style style-delta)
(send text insert "Now available in blue")

(send frame show #t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T01:41:32.647

您不必指定更改命令。

更简单的一个：

```
#lang racket/gui

(define frame (new frame% [label "Test"] [width 300] 
                                         [height 300]))
(define text (new text%))
(define canvas (new editor-canvas% [parent frame] 
                                   [editor text]))

(define style-delta (make-object style-delta%))

;; do some red
(send style-delta set-delta-foreground "red")
(send text change-style style-delta)
(send text insert "Hello world in red\n")

;; do some blue
(send style-delta set-delta-foreground "blue")
(send text change-style style-delta)
(send text insert "Now available in blue\n")

;; do some modern
(send style-delta set-delta-foreground "black")
(send style-delta set-family 'modern)
(send text change-style style-delta)
(send text insert "Now available in modern\n(fixed width)")

(send frame show #t) 
```

# java - GAE Google App Engine 静态文件模式处理程序 Java 等价物？

> ID：12045828
> 
> 赞同：0
> 
> 时间：2012-08-20T21:59:09.803
> 
> 标签：java, google-app-engine

我是 Google App Engine/Java/Python 的新手。

我想将 Java 用于应用程序，但我还没有找到与 python 显示的等效静态文件模式匹配（https://developers.google.com/appengine/docs/python/config/appconfig #Static_File_Pattern_Handlers)

```
 handlers:
- url: /item-(.*?)/category-(.*)
  static_files: archives/\2/items/\1 
```

Java 应用程序的配置中是否有静态文件模式匹配？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:10:53.617

不，GAE java 配置中没有 Url 重写规则。

但是，您可以编写自己的 Url 重写器过滤器或使用现有的[Url 重写器](http://code.google.com/p/urlrewritefilter/)。

# c# - 如何裁剪和调整 LiveTile 的图像大小

> ID：12045829
> 
> 赞同：1
> 
> 时间：2012-08-20T21:59:11.517
> 
> 标签：c#, windows-phone-7, crop, image-resizing, live-tile

我希望能够将图像添加到动态磁贴中，这样就不会拉伸并且图像看起来很正常。我从 PhotoChooserTask 中获取图像，其中包含来自媒体库的图像。截至目前，我可以成功地将图像放在动态磁贴上，但它被拉伸并且纵横比不正确。我如何才能找到图像的纵横比并裁剪图像，使其最终成为尺寸为 173x173 且没有拉伸的正方形？我遵循了一些在网上找到的教程，但似乎没有什么能按照我需要的方式完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:49:33.573

我通过引用[Live Tile 的 Resize image - WriteableBitmapEx](https://stackoverflow.com/questions/8684474/resize-image-for-live-tile-writeablebitmapex)来实现这一点，这被证明具有正确的实现。

# visual-studio-2010 - 在 OpenCV 中使用 calcHist() 函数的参数列表错误

> ID：12045848
> 
> 赞同：1
> 
> 时间：2012-08-20T22:00:45.103
> 
> 标签：visual-studio-2010, visual-c++, image-processing, opencv, histogram

我正在尝试使用以下代码：

```
 cv::MatND hist;
    cv::Mat image = cv::imread("image.bmp");
    float *range = new float[33];
    int histSize = 32;
    int channel = 0;
    for (int i = 0; i < 33; ++i)
        range[i] = (float)6602.0 + 21*i;
    float **ranges = &range;
    cv::calcHist(&frame.get<0>(), 1, &channel, cv::Mat(), hist, 1, &histSize, ranges, false, false); 
```

图像是灰度的，所以我使用第零个通道来获取直方图，我知道范围是统一的，但我想准确地知道我的边界，并且图像是 CV_16U 类型（在原始代码中，图像是从相机，但这太长了，不能在这里包含）

我的问题是在编译时出现以下错误：

```
 error C2665: 'cv::calcHist' : none of the 3 overloads could convert all the argument types
    C:\opencv\build_x64\include\opencv2/imgproc/imgproc.hpp(670): could be 'void     cv::calcHist(const cv::Mat *,int,const int *,cv::InputArray,cv::OutputArray,int,const int *,const float **,bool,bool)'
    C:\opencv\build_x64\include\opencv2/imgproc/imgproc.hpp(676): or 'void cv::calcHist(const cv::Mat *,int,const int *,cv::InputArray,cv::SparseMat &,int,const int *,const float **,bool,bool)'
    while trying to match the argument list '(cv::Mat *, int, int *, cv::Mat, cv::MatND, int, int *, float **, bool, bool)' 
```

我知道这有点傻，但我快要发疯了。任何帮助表示赞赏。PS：我在 64 位环境中的 Microsoft Visual C++ express 上使用 opencv 2.4.2。

最好的，

巴里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:06:15.033

如果您的 OpenCV 版本比 2.3 新，这似乎是这种情况，您应该知道这一点`cv::Mat`并`cv::MatND`结合在一起。

但是关于错误，因为在新的 OpenCV`cv::Mat`中可以有任意数量的维度，它们已经改变了定义，你可以[在这里](http://docs.opencv.org/2.4.2/modules/imgproc/doc/histograms.html#calchist)看到：

```
C++: void calcHist(const Mat* images, int nimages, const int* channels, InputArray mask, OutputArray hist, int dims, const int* histSize, const float** ranges, bool uniform=true, bool accumulate=false )
C++: void calcHist(const Mat* images, int nimages, const int* channels, InputArray mask, SparseMat& hist, int dims, const int* histSize, const float** ranges, bool uniform=true, bool accumulate=false ) 
```

[您还可以在此处](http://docs.opencv.org/2.4.2/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html)的全新教程中看到，一个简单的`cv::Mat`方法就可以了：

```
cv::Mat hist; 
```

使用[新的文档](http://docs.opencv.org/2.4.2/index.html)将帮助您清除这些东西，不幸的是，大多数可用的教程和代码都是基于旧的 OpenCV，它已经进行了很大的更改以达到当前版本。

# javascript - Node.js 输入数据事件停止

> ID：12045857
> 
> 赞同：1
> 
> 时间：2012-08-20T22:01:50.723
> 
> 标签：javascript, node.js

我使用此函数在我的 Node.js 应用程序中获取请求的输入数据：

```
function getData(callback){
  req.data = '';
  req.receivedDataSize = 0;
  req.maxDataSize = 5000;
  req.dataCorrupted = false;

  req.on('data', function(chunk){
    if(req.dataCorrupted === false && chunk.length < req.maxDataSize && req.receivedDataSize < req.maxDataSize){
      req.data += chunk;
      req.receivedDataChunk += chunk.length;
    } else {
       // throw 413 error.

       req.dataCorrupted = true;
       return;
  });

  req.on('end', function(){
    if(req.dataCorrupted === false){
      callback(null);
    } else {
      callback('input-data-corrupted');
    }

    return;
  });
} 
```

我想知道每个事件回调中的这些“return”语句是如何使用的，当我抛出“return”时，下一个“req.on（'data'）|| req.on（'end'）”会发生什么? 有没有办法阻止事件侦听器停止侦听该事件，或者只是调用“req.end();” 停止的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:09:24.547

在您的示例`return`中，什么都不做，而是结束函数并返回一个值。它不会阻止流回调。您可以从代码示例中完全删除这些语句，它的工作方式相同。

`req.end()`如果它是一个流，调用应该终止它，这意味着`req.on('data')`不会再被触发。

这是关于流的不是超级有用的 API 文档：

[http://nodejs.org/api/stream.html#stream_stream_end](http://nodejs.org/api/stream.html#stream_stream_end)

这也是节点中流的有用指南：http: [//maxogden.com/node-streams](http://maxogden.com/node-streams)

# jquery - 定时事件与鼠标事件

> ID：12045858
> 
> 赞同：1
> 
> 时间：2012-08-20T22:01:52.220
> 
> 标签：jquery, scroll, jquery-animate, setinterval

以下脚本设置为由 jQuery`mouseenter`事件触发，但现在需要在初始页面滚动时触发并每 10 秒重新运行一次，无需用户进行任何交互。令我沮丧的是，我无法使用这些规格创建工作版本。

我怀疑我需要使用 javascript 间隔，但我没有做对。

```
jQuery(document).ready(function($) {
function calcPoint(x1, y1, degrees, dist) {
    var radians = degrees * (Math.PI / 180);
    var x2 = Math.round(x1 + (Math.sin(radians) * dist));
    var y2 = Math.round(y1 + (Math.cos(radians) * dist));
    return [x2, y2];
}

var $cont  = $('#bubbles');
var $items = $cont.find('li');
var distance = 500; // distance for the items to travel
var duration = 750; // milliseconds
var delay    = 10000; // milliseconds

var explode = function() {
    $items.each(function(i) {
        var $item = $(this);

        // store the original position
        var pos = $item.position();
        if ($item.data('starting') == undefined) {
            $item.data('starting', pos);
        }
        //

        var angle = Math.floor(Math.random()*(360 + 1));
        var dest = calcPoint(pos.left, pos.top, angle, distance);
        $item.animate({
            left: dest[0],
            top:  dest[1],
            opacity: 0,
        }, duration);
    });
};

$cont.one('mouseenter', explode);

$cont.mouseleave(function() {
    $items.each(function() {
        var $item = $(this);
        var dest = $item.data('starting');
        $item.animate({
            left: dest.left,
            top: dest.top,
            opacity: 1
        }, duration);
    });

    setTimeout(function() {
        $cont.one('mouseenter', explode);
    }, delay);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:10:56.880

```
setInterval(function(){
    $cont.trigger('mouseenter');    
}, 10000); 
```

`mouseenter`您可以简单地每 10 秒触发一次事件...

[http://api.jquery.com/trigger](http://api.jquery.com/trigger)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:52:23.357

如果您希望它更短 - 插件“jquery-timing”允许以下语法：

```
$cont.repeat(10000).trigger('mouseenter'); 
```

# google-apps-script - 为 Google 电子表格编写 *restricted* UI 脚本

> ID：12045865
> 
> 赞同：0
> 
> 时间：2012-08-20T22:02:36.467
> 
> 标签：google-apps-script, google-sheets

考虑来宾列表应用程序的要求（对于俱乐部）：

1.  来宾列表作为包含两列的 Google 电子表格：

    ```
    name: name of guest
    entered: yes, iff guest has entered 
    ```

2.  门口的人的网络应用程序允许按姓名搜索客人，并将她或他标记为已进入。

3.  门口的人*不允许*更改客人名单，除了标记客人是否进入（显然）。他们应该有一个密码，只能让他们访问应用程序（*第 2 点*），而不是电子表格（*第 1 点*）。

我想知道：*是否可以在 Google Docs Script 中编写用户界面？如果是这样，我如何对第 3 点进行身份验证？*

否则，当然，我可以只编写 UI，比如用 PHP，然后使用 OAuth 对 Google 帐户进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:39:29.390

睡了一夜好觉后，我只是看了一下[部署选项](https://developers.google.com/apps-script/execution_web_apps#deploying)。我想要的应该可以通过如下设置权限来实现：

*   *执行为：* `admin@example.com`

*   *允许访问：* example.com 的任何成员

# visual-studio-2010 - 在 Visual Studio 中使用 xamarin android 设计器不会改变布局

> ID：12045866
> 
> 赞同：2
> 
> 时间：2012-08-20T22:02:37.463
> 
> 标签：visual-studio-2010, xamarin.android, xamarin

我在 Visual Studio 2010 中使用 android 设计器，我可以毫无问题地将东西放在布局上。当我单击以将视图从“4in WVGA (Nexus S)”更改为其他任何内容时，背景“边界框”会更改大小，但内容不会调整大小。

即使我只是创建一个全新的布局并且没有在上面放置任何东西，也会发生这种情况。

此外，当我尝试应用不同的主题时，没有任何变化。我做错了什么，还是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:36:11.877

发现这是一个已知的错误。MonoDevelop 工作正常。我想他们正在努力。

# drupal - 如何在声明该自定义字段的模块的 hook_install() 中创建和实例化一个新的自定义字段？

> ID：12045867
> 
> 赞同：4
> 
> 时间：2012-08-20T22:02:46.717
> 
> 标签：drupal, drupal-7

我的模块定义了一个自定义字段类型`hook_field_info()`。在`hook_install()`此模块中，我正在尝试创建此自定义字段类型的新字段和实例：

```
function my_module_install() {

  if (!field_info_field('my_field')) {
    $field = array(
      'field_name' => 'my_field',
      'type' => 'custom_field_type',
      'cardinality' => 1
    );
    field_create_field($field);
  }
} 
```

代码在以下位置崩溃`field_create_field($field)`：

```
WD php: FieldException: Attempt to create a field of unknown type custom_field_type. in field_create_field() (line 110 of                                            [error]
/path/to/modules/field/field.crud.inc).
Cannot modify header information - headers already sent by (output started at /path/to/drush/includes/output.inc:37) bootstrap.inc:1255                             [warning]
FieldException: Attempt to create a field of unknown type <em class="placeholder">custom_field_type</em>. in field_create_field() (line 110 of /path/to/modules/field/field.crud.inc). 
```

怎么了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T22:02:46.717

您正在尝试启用一个定义字段类型的模块，并在`hook_install()`启用之前尝试在其 中使用这些相同的字段类型。Drupal 的字段信息缓存在`hook_install()`运行之前不会重建，因此当您尝试创建字段时，Drupal 不知道模块中的字段类型。

要解决此问题，请通过调用`field_info_cache_clear()`before手动重建字段信息缓存`field_create_field($field)`：

```
if (!field_info_field('my_field')) {
  field_info_cache_clear();

  $field = array(
    'field_name' => 'my_field',
    'type' => 'custom_field_type',
    'cardinality' => 1
  );
  field_create_field($field);
} 
```

# arrays - 查找一个整数数组是否是其他整数数组的排列

> ID：12045871
> 
> 赞同：2
> 
> 时间：2012-08-20T22:03:06.683
> 
> 标签：arrays

给定两个大小为 N 的整数数组，设计一种算法来确定一个是否是另一个的排列。也就是说，它们是否包含完全相同的条目，但可能以不同的顺序。

我可以想到两种方法：对它们进行排序并比较：O(N.log N + N)

检查数组是否有相同数量的整数并且这些整数的和是否相同，然后对两个数组进行异或，看看结果是否为 0。这是 O(N)。我不确定这种方法是否会完全消除误报。想法。更好的算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:05:56.793

> 检查数组是否有相同数量的整数并且这些整数的和是否相同，然后对两个数组进行异或，看看结果是否为 0。

这行不通。例子：

```
a = [1,6]  length(a) = 2, sum(a) = 7, xor(a) = 7
b = [3,4]  length(b) = 2, sum(b) = 7, xor(b) = 7 
```

其他人已经建议`HashMap`使用 O(n) 解决方案。

这是使用 C# 的 O(n) 解决方案`Dictionary<T, int>`：

```
bool IsPermutation<T>(IList<T> values1, IList<T> values2)
{
    if (values1.Count != values2.Count)
    {
        return false;
    }

    Dictionary<T, int> counts = new Dictionary<T, int>();
    foreach (T t in values1)
    {
        int count;
        counts.TryGetValue(t, out count);
        counts[t] = count + 1;
    }

    foreach (T t in values2)
    {
        int count;
        if (!counts.TryGetValue(t, out count) || count == 0)
        {
            return false;
        }
        counts[t] = count - 1;
    }

    return true;
} 
```

在 Python 中，您可以使用`Counter`该类：

```
>>> a = [1, 4, 9, 4, 6]
>>> b = [4, 6, 1, 4, 9]
>>> c = [4, 1, 9, 1, 6]
>>> d = [1, 4, 6, 9, 4]
>>> from collections import Counter
>>> Counter(a) == Counter(b)
True
>>> Counter(c) == Counter(d)
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:11:30.640

如果空间复杂度`O(n)`不是问题，您可以`O(n)`通过首先将第一个数组中每个值的出现次数存储在哈希映射中，然后在第二个数组上运行第二遍并检查每个元素存在于地图中，减少每个元素的出现次数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T22:17:22.753

最好的解决方案可能是使用其键是两个数组中的值的映射进行计数。

通过一个数组创建/增加适当的地图位置，并通过另一个数组创建/减少适当的地图位置。

如果生成的映射完全由零组成，则您的数组是相等的。

这是 O(N)，我认为你不能做得更好。

我怀疑这大概就是 Mark Byers 在他的回答中想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T22:08:49.817

对两个数组的内容进行数字排序，然后比较每个第 n 项。

您还可以获取 array1 中的每个项目，然后检查它是否存在于 array2 中。数一数你找到了多少匹配项。最后，匹配的数量应该等于数组的长度。

# css - 为什么没有保证金：0，自动；工作？

> ID：12045875
> 
> 赞同：0
> 
> 时间：2012-08-20T22:03:19.157
> 
> 标签：css

为什么这个中心不`#block1`和`#block2`？

```
<div id="superwrapper">
    <div id="wrapper">
        a
        <div id="block1">
            pippo
        </div>
        <div id="block2">
            pluto
        </div>
    </div>
</div> 
```

```
div#superwrapper {
    width:100%;
    height:210px;
    background-color:#FFFFCC;
    border:dotted;
}

div#wrapper {
    text-align:left;
    width:500px;
    heigth:205px;
    margin:0,auto;
    border:dotted;
}

div#block1 {
    text-align:left;
    float:left;
    width:200px;
    height:200px;
    border:dotted;
}

div#block2 {
    text-align:left;
    float:left;
    width:200px;
    height:200px;
    border:dotted;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T22:06:53.503

```
margin: 0, auto; 
```

这里的逗号不是正确的语法。它应该只是一个空格：

```
margin: 0 auto; 
```

此外，正如@BillyMoat 指出的那样，`heigth`应该是`height`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:41:19.167

您需要在文档的开头声明 doctype。

```
<!DOCTYPE html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:06:04.027

我认为您错过了保证金的单位。尝试类似：

```
margin: 0px auto; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T22:07:42.303

```
div#wrapper {
    text-align:left;
    width:500px;
    heigth:205px;
    margin:0 auto;
    border:dotted;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T21:06:15.327

两天前我刚开始学习 CSS，并使用这个问题来更熟悉边距。希望我不会将您与我下面的陈述混淆。

无论如何，我在原始代码中没有发现任何可以告诉浏览器将 block1 和 block2 放入中心的内容。

我的解决方案如下：使用 float:right; 对于块 2。然后为 block1 和 block2 添加边距。由于所有块都使用固定宽度，您可以计算出左边（block1）和右边（block2）边距必须设置为33px。边框需要几个像素（默认 = 中等；无法找出有多少像素用于中等）。最后，它看起来像 27px 是相当不错的。

这里的代码：

```
div#superwrapper {
width:100%;
height:210px;
background-color:#FFFFCC;
border:dotted;
}

div#wrapper {
text-align:left;
width:500px;
height:205px;
margin:0 auto;
border:dotted;
}

div#block1 {
text-align:left;
float:left;
width:200px;
height:200px;
border:dotted;
margin: 0 0 0 27px;
}

div#block2 {
text-align:left;
float:right; 
width:200px;
height:200px;
border:dotted;
margin: 0 27px 0 0;
} 
```

希望这会有所帮助并能解决问题吗？

# ruby-on-rails - 为什么 bundler 继续安装我已经拥有的 gem？

> ID：12045878
> 
> 赞同：0
> 
> 时间：2012-08-20T22:03:38.163
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, bundler

我已经将我的系统更新为 Mountain Lion，构建了一个新版本的 Ruby，据我所知，我重新安装了我所有的旧 gem。但是，每当我 cd 进入旧应用程序并运行 bundle 命令时，它需要一段时间，因为它正在重新安装我知道我的系统上有的 gem：

```
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.0.4) 
Installing activesupport (3.2.1) 
Using builder (3.0.0) 
Installing activemodel (3.2.1) 
Using erubis (2.7.0) 
Installing journey (1.0.1) 
Using rack (1.4.1) 
Using rack-cache (1.1) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Installing sprockets (2.1.2) 
Installing actionpack (3.2.1) 
Using mime-types (1.17.2) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Installing mail (2.4.1) 
Installing actionmailer (3.2.1) 
Installing arel (3.0.0) 
Using tzinfo (0.3.31) 
```

任何关于寻找什么的想法、建议或想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:08:36.657

我的第一个答案，但我建议使用 RVM 来管理 ruby​​ 版本和 gemset。查看[RVM](https://rvm.io/)

之后，只需创建一个 .rvmrc 文件，您可以在网上找到示例。.rvmrc 的强大之处在于，只要您“cd”进入存在该文件的应用程序，它就会运行。因此，它将使用适当的 Ruby 版本和适当的 Gemset（以及所有的 gem）设置您的 RVM，并且永远不必担心版本和 gem 会发生冲突或重叠或不存在等......

# php - PHP Laravel 路由问题

> ID：12045881
> 
> 赞同：7
> 
> 时间：2012-08-20T22:04:41.287
> 
> 标签：php, url-routing, laravel, laravel-3

我的设置目前看起来像这样

***应用程序/控制器/register.php***

```
class register_Controller extends Base_Controller
{
    public $restful = true;
    public function get_index()
    {
        return View::make('main.register');;
    }
} 
```

***路由.php***

```
Route::controller(Controller::detect());
Route::any('/', function()
{
    return View::make('main.index');
});
Route::any('register',function()
{
    return View::make('register.index');
}); 
```

mydomain.com 有效。

mydomain.com/index 给出了 laravel 404

mydomain.com/register 给出标准 404

奇怪的是 mydomain.com/register 不应该给我一个 laravel 404 错误吗？ [此](https://stackoverflow.com/questions/11791375/laravel-routes-not-working?rq=1)页面表明 WAMP 是原因，但我的设置是在运行 PHP5、Apache2 和 mySQL 的 Ubuntu VM 上。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T17:59:14.997

打开 mod_rewrite 后，尝试在 apache 配置中设置“AllowOverride All”，它为我修复了它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T14:34:15.893

正如 Akash 建议的那样，确保您的 mod_rewrite 已启用。在 Ubuntu 上，使用以下命令在 Apache 上启用 mod_rewrite：

```
sudo a2enmod rewrite 
```

（您不必编辑 httpd.conf）
不要忘记重新启动 apache。

您可以使用 PHP 命令

```
phpinfo(); 
```

检查 mod_rewrite 是否正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T12:36:48.950

确保在 Apache (httpd.conf) 中打开 mod_rewrite

取消注释以下行

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

并重新启动 httpd

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-12T08:53:43.987

此外，您应该在检测到控制器之前设置路由。

```
Route::any('/', function()
{
    return View::make('main.index');
});

Route::any('register',function()
{
    return View::make('register.index');
});

Route::controller(Controller::detect()); 
```

# android - 在android webview中设置透明颜色

> ID：12045882
> 
> 赞同：2
> 
> 时间：2012-08-20T22:05:05.153
> 
> 标签：android, webview, transparent, chromakey

如何在android webview中设置透明颜色？

```
<div style="background-color: black" >test</div> 
```

如何使整个页面的黑色透明（如色度键）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-15T16:03:20.643

WebView 也有同样的问题，因为它在不同的操作系统版本中随机运行。Finnlay 我在 loadDataWithBaseURL() 调用**之后**用这个代码修复了它：

```
if (Build.VERSION.SDK_INT >= 11) {
    webView.setBackgroundColor(0x01000000);
} else {
    webView.setBackgroundColor(0x00000000);
} 
```

我认为这会给设备一些可绘制的东西，因此不会启动各种缓存机制。但结果实际上与完全透明的结果相同，因为普通人眼无法察觉。

也没有注意到性能损失。

在从 2.2 到 4.2 的多个设备上进行了测试。

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:48:54.683

尝试这个

```
(YourWebview).setBackgroundColor(0x00000000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T21:04:57.870

我找到了解决方案。我重新实现了 WebView 的 OnDraw 方法

```
@Override
    protected void onDraw(android.graphics.Canvas canvas) {

    super.onDraw(canvas);

    Paint p = new Paint();

    p.setARGB(255, 0, 0, 0);
    int removeColor = p.getColor(); 

    p.setAlpha(1); // if Alpha is 0 it doesn't work. I don't know why
    p.setXfermode(new AvoidXfermode(removeColor, 0, AvoidXfermode.Mode.TARGET));

    canvas.drawPaint(p);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T19:23:58.427

你可以用这个

```
webView.setBackgroundColor(0); 
```

# shopify - 两个具有相同 URL 的 webhook

> ID：12045883
> 
> 赞同：1
> 
> 时间：2012-08-20T22:05:06.263
> 
> 标签：shopify, webhooks

如果我有两个 Shopify 应用程序配置了指向相同事件的相同 URL 的 webhook - 当其中一个事件被触发时，我的 webhook 会被触发一次还是两次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:23:55.177

您创建了两个 Webhook，每个应用一个。因此会触发两个 Webhook，每个 App 一个。指定的终点是什么并不重要。

# facebook - 有没有办法从 Facebook 应用中心获取热门应用？

> ID：12045886
> 
> 赞同：1
> 
> 时间：2012-08-20T22:05:51.980
> 
> 标签：facebook

我正在尝试以编程方式从特定应用中心类别中获取评分最高的应用列表：

[http://www.facebook.com/appcenter/category/games/?platform=allplatforms](http://www.facebook.com/appcenter/category/games/?platform=allplatforms)

我在 Graph API 或 FQL 中找不到任何东西，也找不到任何 RSS 提要。除了页面报废之外，还有什么“文明”的方式吗？

# javascript - Img src 仅通过 javascript 更改一次

> ID：12045890
> 
> 赞同：0
> 
> 时间：2012-08-20T22:06:07.317
> 
> 标签：javascript, ajax, ruby-on-rails-3

好的，所以我在我的博客上建立了一个投票系统。很像stackoverflow上的那个。该系统在博客卷的第一篇文章上运行良好，但在其他每一篇文章中，点击图片时图像都没有改变，但实际投票过程仍在进行中。

这是为什么？任何帮助都会很棒！

这是我的 JS：

```
function upvote(id)
  {
    sender = new XMLHttpRequest();
    if(document.getElementById("upvoteimg").src.indexOf("voted") == -1)  //have they already voted up?
    {
      document.getElementById("upvoteimg").src = "assets/upvoted.png"; // change to upvoted
      sender.open("GET","/like/index/" + id ,true);
      sender.send();
      document.getElementById("likes").innerHTML = parseInt(document.getElementById("likes").innerHTML) +1; //update #
    }
  else
    {
      document.getElementById("upvoteimg").src = "assets/upvote.png"; //change to not upvoted
      sender.open("GET","/like/index/" + id ,true);
      sender.send()
      document.getElementById("likes").innerHTML = parseInt(document.getElementById("likes").innerHTML) - 1; //update #
    }

  }

  function downvote(id)
  {
    sender = new XMLHttpRequest();
    if(document.getElementById("downvoteimg").src.indexOf("voted") == -1) //have they already downvoted?
    {
      document.getElementById("downvoteimg").src = "assets/downvoted.png"; //change to downvoted
      sender.open("GET","/like/down/" + id ,true);
      sender.send()
      document.getElementById("likes").innerHTML = parseInt(document.getElementById("likes").innerHTML) - 1; //update #
    }
  else
    {
      document.getElementById("downvoteimg").src = "assets/downvote.png"; //change to not downvoted
      sender.open("GET","/like/down/" + id ,true);
      sender.send()
      document.getElementById("likes").innerHTML = parseInt(document.getElementById("likes").innerHTML) +1; //update #
    }
  } 
```

以下是我认为的按钮：

```
<!-- Voting System -->
<div id="post-vote">
    <% #DownVote %>
        <%if user_signed_in?%>  
            <%if Dislikes.where(:user_id => current_user.id, :article_id =>a.id).size == 0%>
                <%= image_tag("downvote.png", "onclick" => "downvote(#{a.id})", "id" => "downvoteimg") %>
            <%else%>
                <%= image_tag("downvoted.png", "onclick" => "downvote(#{a.id})", "id" => "downvoteimg") %>
            <%end%>
        <%else%>
            <%= image_tag("downvote.png", "onclick" => "alert('You must login to vote.')", "id" => "downvoteimg") %>
        <%end%>
    <% #TheNumber %>
    <span id="likes" class="vote-count"><%= a.likes.size - Dislikes.where(:article_id =>a.id).size%></span>

    <% #UpVote %>
        <%if user_signed_in?%>  
            <%if !a.likes.include?(current_user)%>
                <%= image_tag("upvote.png",  "id" => "upvoteimg", "onclick" => "upvote(#{a.id})") %>
            <%else%>
                <%= image_tag("upvoted.png",  "id" => "upvoteimg", "onclick" => "upvote(#{a.id})") %>
            <%end%>
        <%else%>
            <%= image_tag("upvote.png", "id" => "upvoteimg", "onclick" => "alert('You must login to vote.')") %>
        <%end%>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:53:42.533

将 js 中的所有图像更改为具有唯一`document.getElementById("upvoteimg")`ID`document.getElementById("upvoteimg" + id)`

以及视图中的所有图像`<%= image_tag("downvoted.png", "onclick" => "downvote(#{a.id})", "id" => "downvoteimg#{a.id}") %>`

# primefaces - 素面 只添加一行

> ID：12045892
> 
> 赞同：0
> 
> 时间：2012-08-20T22:06:21.490
> 
> 标签：primefaces, collect

我正在尝试使用 p:collector 来收集状态对象列表。问题是只有一行被添加到 stateList。添加一行后，当我单击命令按钮时，没有任何内容添加到 stateList。这是我的代码。看来我错过了一些明显的东西。

JSF 页面代码：>" action="#{bulkStateBean.reInit}" update="f:statePanel" >

Backing Bean (bulkStateBean) 代码：private List stateList = new ArrayList(); 私有状态状态 = 新状态（）；

```
public String reInit() {
    state = new State();
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:29:34.497

**将bean**的范围更改为`Faces-config.xml-> Managed Beans`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:43:37.407

我终于解决了。实体类 State 具有 @override 方法，这些方法是在通过创建新实体向导创建新实体时生成的。从实体中删除所有覆盖的方法并保存。就这样。现在它将起作用。它对我有用。

# css - 在创建移动响应式设计时，哪些是最重要的媒体查询？

> ID：12045893
> 
> 赞同：46
> 
> 时间：2012-08-20T22:06:31.960
> 
> 标签：css, mobile, responsive-design, media-queries

移动屏幕尺寸有很多不同的媒体查询。在设计响应式移动网站时，容纳所有这些可能会让人不知所措。在为移动设备设计时，哪些是最重要的？我发现这篇文章很好地概述了可用的媒体查询：[http](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/) ://css-tricks.com/snippets/css/media-queries-for-standard-devices/ 。

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-08-21T02:34:56.600

我建议在[Twitter 的 Bootstrap](http://twitter.github.com/bootstrap/scaffolding.html#responsive)之后只使用以下四个媒体查询：

```
/* Landscape phones and down */
@media (max-width: 480px) { ... }

/* Landscape phone to portrait tablet */
@media (max-width: 767px) { ... }

/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) { ... }

/* Large desktop */
@media (min-width: 1200px) { ... } 
```

编辑：最初的答案（上面）取自 Bootstrap 版本 2。Bootstrap 已经在版本 3 中更改了他们的媒体查询。请注意，对于小于 768px 的设备没有明确的查询。这种做法有时被称为移动优先。任何媒体查询之外的所有内容都适用于所有设备。媒体查询块中的所有内容都扩展并覆盖了全局可用的内容以及所有较小设备的样式。将其视为响应式设计的渐进增强。

```
/* Extra small devices (phones, less than 768px) */
/* No media query since this is the default in Bootstrap */

/* Small devices (tablets, 768px and up) */
@media (min-width: 768px) { ... }

/* Medium devices (desktops, 992px and up) */
@media (min-width: 992px) { ... }

/* Large devices (large desktops, 1200px and up) */
@media (min-width: 1200px) { ... } 
```

[在Bootstrap 3 的文档](http://getbootstrap.com/css/#grid-media-queries)中查看。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-28T21:52:21.057

1.  以百分比设计，最初针对 15"+ 屏幕进行了优化。

2.  查看您希望在手机上看到的组件 - 只需保留基本内容并删除不起作用或使小屏幕混乱的元素。这些样式可以包含在 @media (max-width: 480px) { ... }

3.  随着事情移动到 10 英寸或更小，重新设计手指而不是鼠标的按钮和交互组件。@media (max-width: 767px) { ... }

4.  缩小浏览器的宽度。当事情看起来不太好时，进入控制台并找出可以更改的样式或需要重新设计或删除的项目。标记它们出现的屏幕宽度并创建媒体查询。

5.  最后，查看您的媒体查询，看看它们中的一些是否可以组合在一起（即，如果您有一个宽度为 750 和 767 像素的查询，那么您最好将它们组合到 767 中）。

如果您对 jQuery 感到满意，您可以添加

```
$(window).resize(function(){
  console.log($(window).width());
}); 
```

获取当前屏幕尺寸。添加一些额外的像素以获得良好的测量效果。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-31T05:27:20.020

@cjlarose 引用的第一个 Twitter Bootstrap 代码假定您已经为宽度在 980 像素和 1200 像素之间的显示器构建了主 CSS，因此您基本上是从桌面设计开始并从中调整所有其他内容。

我很高兴看到 Twitter 在 Bootstrap 3 中已更改为[“移动优先”](http://www.lukew.com/ff/entry.asp?933=)。这是最流行的媒体查询方法之一，也是我更喜欢的方式。你从最小的尺寸开始而不是从桌面出来。

请注意，您的特定站点可能需要与此处或任何其他列表中列出的查询不同的查询。**您应该根据*内容*需求添加查询，而不是基于任何设置的模板。**

以下是我发现最有用的一些媒体查询。这些只是一些例子：

```
/* Start with baseline CSS, for the smallest browsers. 
   Sometimes I put this into a separate css file and load it first.
   These are the "mobile first" styles. */

...

/* Then progressively add bigger sizes from small to large */

/* Smartphones start somewhere around here */
@media (min-width: 300px) {
}

/* You might do landscape phones here if your content seems to need it */
@media (min-width: 450px) {
}

/* Starting into tablets somewhere in here */
@media (min-width: 600px) {
}

/* Perhaps bigger tablets */
@media (min-width: 750px) {
}

/* Desktop screen or landscape tablet */
@media (min-width: 900px) {
}

/* A bit bigger if you need some adjustments around here */
@media (min-width: 1100px) {
}

/* Widescreens */
@media (min-width: 1500px) {
} 
```

最重要的是您可能不需要所有这些，或者您可能希望根据内容的外观更改数字。我认为对于放置断点的数量或位置没有任何硬性规定。我现在正在做一个网站，恰好只需要一个断点，因为内容非常简单，但我也做过看起来更像上面代码的网站。

我没有包括视网膜显示代码。如果您在高分辨率显示器上将普通分辨率图像切换为高分辨率图像，这很有用，但否则它并不是那么有用。

# node.js - node.js 多个http请求

> ID：12045894
> 
> 赞同：6
> 
> 时间：2012-08-20T22:06:34.300
> 
> 标签：node.js, asynchronous

我是 node 和 js 的新手，并尝试在 express 中创建一个网站，在呈现页面之前进行三个 Rest API 调用。目前我有以下内容，它返回一些我将其转换为对象列表的 json。

其中一些属性只返回 id 值，我想再运行三个 API 请求来返回对这些 Id 的查找，以便我可以将这些数据作为有意义的值呈现给用户。

我可以通过运行下一个我当前正在呈现索引页面的 API 调用来同步执行此操作，但这看起来真的很混乱。不过，我看到的所有异步教程都让我的新手思维方式感到困惑。有人可以发布一个易于遵循的异步示例，它在某种程度上反映了以下结构吗？

```
var issues_json = "";
var request = http.request(options, function(response) {
    console.log("statusCode: ", res.statusCode);
    console.log("headers: ", res.headers);

    response.on("data", function(data) {
        issues_json += data;
    });

    response.on("end", function() {
        console.log(issues_json);
        var column_obj = JSON.parse(issues_json);
        res.render('index', {
            title: 'List of Issues',
            response: issues_json,
            objects: column_obj
        });
    });

    response.on("error", function(e) {
        console.log(e.Message);
        res.render('index', {
            title: 'error',
            e: e.Message
        });
    });
});
request.end(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T22:09:58.523

你应该使用[请求](https://github.com/mikeal/request)

你会有类似的东西

```
app.get("/route", function(req, res) {

  var callbackThree = function(error, resp, body) {
    var data = JSON.parse(body);
    res.send({title; "My Title", data: data});
  }

  var callbackTwo = function(error, resp, body) {
    request("api.com/42", callBackThree);
  }

  var callbackOne = function(error, resp, body) {
    request("api.com/things", callBackTwo);
  }

  request("api.com/users", callBackOne);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T01:44:58.030

看看这个：[https](https://github.com/JacksonTian/eventproxy) ://github.com/JacksonTian/eventproxy 。这是一个对事件进行异步调用的 js 库。与勾选答案的唯一区别是其编写代码的方式。

# php - 如果我通过 CURL 收到“未知 SSL 协议错误”，请求是否通过？

> ID：12045895
> 
> 赞同：0
> 
> 时间：2012-08-20T22:06:34.690
> 
> 标签：php, ssl, curl

我想知道这个错误是否意味着我的请求通过并且我没有得到响应，或者它在传输信息之前失败然后给了我一个空响应。

这与我之前的问题有关：[为什么我会从 CURL 随机收到“未知 SSL 协议错误”？](https://stackoverflow.com/questions/10985233/why-would-i-randomly-receive-unknown-ssl-protocol-error-from-curl)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:07:57.123

它肯定无法传输信息......你可以试试这个......

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

并确保 SSL 在您的网站/WAMP 上运行...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:32:28.420

如果您甚至无法与对等方就 SSL 协议达成一致，那么您肯定不会传输任何数据。

# c++ - visual c++ express cmd提示是否缺少功能？

> ID：12045905
> 
> 赞同：0
> 
> 时间：2012-08-20T22:07:14.033
> 
> 标签：c++, windows, visual-studio-2010, visual-studio, poco-libraries

我尝试在我的 Windows 7 计算机上编译 POCO 库。虽然我使用 eclipse cdt，但它说它只能用 Visual C++ 编译：

> 在 Windows 平台上构建 POCO C++ 库需要 Microsoft Visual Studio 7.1 (2003)、8.0 (2005)、9.0 (2008) 或 10.0 (2010)。包括所有版本的解决方案和项目文件。对于 Visual Studio 2008 和 2010，也支持 64 位 (x64) 构建。您可以从 Visual Studio 中构建（构建->批量构建->全选；重新构建）或从命令行构建。要从命令行构建，请启动 Visual Studio .NET 2003/2005/2008/2010 命令提示符并转到 (cd) 到您提取 POCO C++ 库源的目录。然后，只需启动 buildwin.cmd 脚本并将 Visual Studio 的版本（71、80、90 或 100）作为参数传递。您可以通过将适当的命令行参数传递给它来自定义 buildwin.cmd 正在构建的内容。调用 buildwin。不带参数的 cmd 以查看可用的内容。要从构建中禁用某些组件（例如，NetSSL_OpenSSL 或 Data/MySQL），请编辑分发根目录中名为 components 的文本文件并删除相应的行。某些库，如 NetSSL_OpenSSL、Crypto 或 Data/MySQL 依赖于其他库。由于构建脚本不知道在哪里可以找到必要的头文件和导入库，因此您必须将头文件路径添加到 INCLUDE 环境变量并将库路径添加到 LIB 环境变量，或者您必须编辑buildwin.cmd 脚本，也可以在其中设置这些环境变量。为了运行测试套件和示例，包含生成的共享库的最顶层 bin 目录必须位于 PATH 环境变量中。

我下载了visual c++ express，但是当我运行“buildwin.cmd”时，我得到了这些错误：

```
devenv is not recognized as an internal or external command. 
```

我在程序中也找不到任何“构建”菜单。构建库是否需要完整的 Visual C++？如果是这样，有没有更便宜的选择？

# ruby-on-rails - 使用 Rails 自动启动 ElasticSearch

> ID：12045908
> 
> 赞同：0
> 
> 时间：2012-08-20T22:07:39.803
> 
> 标签：ruby-on-rails, ruby, elasticsearch

我一直在两台机器之间使用 ElasticSearch 进行 Ruby on Rails 开发，它开始有点烦人。我通常的工作流程是：

```
git pull
bundle install
rake db:migrate (or rake db:setup depending)
rails server
elasticsearch -f -D myconfig.xml
rake environment tire:import CLASS=MyObject FORCE=true 
```

无论如何，我可以将所有这些命令添加到 Rails 中的某种类型的启动脚本中，以将它们全部集中到一个地方吗？每次切换机器时，它都会让我更轻松地建立一个开发环境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T23:19:50.537

我发现最好的方法是使用[`Foreman`gem](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)来启动您的项目和相关流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T21:42:54.447

看起来您应该在使用 Capistrano 的部署中执行此操作。这是一个示例 config/deploy.rb 文件：

```
[basic parts omitted]

after "deploy", "bundler:bundle_install"
after "bundler:bundle_install", "db:db_migrate"
after "deploy:db_migrate", "deploy:elastic_search_indexing"

namespace :bundler do
  desc 'call bundle install'
  task :bundle_install do
    run "cd #{deploy_to}/current && bundle install"
  end
end

namespace :db do
  desc 'fire the db migrations'
  task :db_migrate do
    run "cd #{deploy_to}/current && bundle exec rake db:migrate RAILS_ENV=\"production\""
  end
end

namespace :elasticsearch do
  desc 'run elasticsearch indexing via tire'
  task :index_classes do
    run "cd #{deploy_to}/current && bundle exec rake environment tire:import CLASS=YourObject FORCE=true "
  end
end

[rest omitted] 
```

确保您在 /etc/elasticsearch/elasticsearch.yml 中的目标机器（Linux）上有一个配置文件，其内容如下：

```
cluster:
   name:   elasticsearch_server

network:
   host:   66.98.23.12 
```

最后要提到的是，您应该创建一个初始化程序 config/initializers/tire.rb：

```
if Rails.env == 'production'
  Tire.configure do
    url "http://66.98.23.12:9200"
  end
end 
```

如您所见，这是完全相同的 IP 地址，但仅用于生产环境。我假设您通过 localhost 在本地（在开发模式下）访问 elasticsearch。elasticsearch 是默认连接到

```
 http://0.0.0.0:9200 
```

[很棒的 Ryan Bates 和他的 Railscasts http://railscasts.com/episodes?utf8=%E2%9C%93&search=capistrano](http://railscasts.com/episodes?utf8=%E2%9C%93&search=capistrano)提供了一个很好的起点和深入的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:13:48.933

是什么阻止您将其放入 bash 脚本中？并将脚本放在您的 RAILS_APP_HOME/scripts 文件夹中？

```
#!/bin/sh
git pull
bundle install
rake db:migrate 
rails server
elasticsearch -f -D myconfig.xml
rake environment tire:import CLASS=MyObject FORCE=true 
```

# image - 在 QScrollArea 内的图像上绘图？

> ID：12045914
> 
> 赞同：1
> 
> 时间：2012-08-20T22:08:19.680
> 
> 标签：image, qt, drawing, qpainter, qscrollarea

如果我继承 QLabel 并将 QLabel 直接添加到我的 QDialog，它工作正常。如果我在 ScrollArea 中添加这个标签，除非我调整对话框本身的大小，否则我正在绘制的东西不会显示。是的，很奇怪。

我已经设置了指示问题所在的可编译示例代码。我要做的是用鼠标选择图像的一个区域，方法是在相应的区域上绘制一个矩形。我的程序设计使用的图像可能非常大，因此，我需要有一个滚动区域，以便对话框保持在逻辑维度上，而不是填满整个屏幕（甚至多个工作区，如果我们正在谈论具有多个桌面的linux机器）。

一切正常，除了绘图（选择矩形）不可见，除非手动调整对话框的大小。我想我必须在绘图时更新一些东西，但我不确定是什么。好吧，这是示例代码： http: [//paste.ubuntu.com/1151553/](http://paste.ubuntu.com/1151553/)

我不知道如何解决的另一个问题（我希望你的建议在那里）是（1）当用户选择一个区域时，如何将其设置为在用户实际选择一个区域时自动滚动滚动区域的墙（我想我在这里可以理解）。(2) 有没有办法让用户选择一个矩形，然后，当他在按住 [Shift] 按钮的同时左键单击一个位置时，他先前选择的右下边缘实际上通过他单击的点在？

[文档](http://doc.qt.nokia.com/4.7-snapshot/layout.html)表明您必须以某种方式在某处设置布局，但我不确定如何在我的场合执行此操作。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:32:14.597

关于问题（1）：

只需使用事件。我认为鼠标进入事件或离开事件对此有好处。

为此，我认为您可以使用填充整个屏幕的隐藏矩形。并为该矩形覆盖鼠标离开事件并在该函数中告知滚动页面。

# c# - 实体框架和 SQL Server 2008 Express

> ID：12045915
> 
> 赞同：1
> 
> 时间：2012-08-20T22:08:20.413
> 
> 标签：c#, sql-server, entity-framework

我对 Entity Framework 完全陌生，并且已经阅读了一些内容，作为测试，我将一个非常简短的测试框架组合在一起，其中只有两个小实体。然后我右键单击并选择“从模型生成数据库”，这会将我带到 SQL 连接页面。但是，我之前使用的连接都没有出现在下拉列表中，当我选择创建新连接时，我只能选择使用“SQL Server Compact 3.5”或“SQL Server 数据库文件”。

我之前使用 SQL Express 遇到过这种情况，解决方法是创建我自己的连接字符串来访问所需的数据库。但是，在我使用实体框架创建数据库的情况下，不可能编写适当的连接字符串。

因此，我似乎处于 Catch 22 的情况。

1.  在创建数据库之前，我无法编写连接字符串。
2.  如果不访问 SQL Server（通过连接字符串），我无法从 EF 创建数据库。

任何人都遇到过这个或者可以指出我做错了什么。就像我说的那样，我对 EF 完全陌生，所以如果这是一个非常基本的问题，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T04:34:30.917

除非您想在用户实例中使用数据库文件，否则您需要使用 SQL Management Studio Express，或者使用 SQLCMD 命令行工具来创建数据库。我会推荐 SQL Management Studio Express，因为在我看来它很容易学习。

实体框架工具旨在用于创建数据库**架构**，而不是数据库本身。您仍然需要定义文件组、安全信息以及创建和配置空白数据库的其他基础知识。

有关适当链接，请参阅此 Q/A：

[如何使用 SQL 命令在 SQL Express 中创建数据库？](https://stackoverflow.com/questions/1597606/how-to-create-db-in-sql-express-using-sql-commands)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:27:47.483

感谢@psuedocoder，您的帮助帮助我解决了问题。最后的答案很简单，但对我来说并不直观，因此我遇到了困难。我认为对答案的一些详细说明可能会帮助其他与我一样对实体框架不熟悉的人。

*从 Visual Studio*

1.  在 Visual Studio 中创建 EF 模型。
2.  右键单击模型画布并选择“从模型生成数据库”。
3.  然后会要求您选择数据库连接。选择“新连接”。
4.  在“添加连接”对话框中，而不是“浏览”现有数据库，只需在“数据库”文本框中键入新数据库的名称，然后单击“连接”。
5.  当您尝试连接时，您会收到一条警告说数据库不存在，但系统会询问您是否希望 VS '创建它'。选择是。

正如@psuedocoder 所说，这实际上并没有在 SQL Server 中创建数据库，但它确实在您的 VS 解决方案中创建了一个对象，其中包含创建数据库所需的 TSQL 脚本。

*来自 SSMS*

1.  转到 SQL Server Management Studio 并创建一个与上述步骤 4 中使用的名称相同的空白数据库。
2.  在 SSMS 中选择打开文件并导航到包含 VS 解决方案文件的 windows 文件夹。
3.  打开 TSQL 脚本文件。这将有一个 DB 脚本图标并有一个 .edmx 扩展名。
4.  Click Execute, and you will have your new database created from your EF model.

# wpf - IsAsync 抛出“调用线程必须是 STA，因为许多 UI 组件都需要这个。”

> ID：12045916
> 
> 赞同：1
> 
> 时间：2012-08-20T22:08:27.497
> 
> 标签：wpf, xaml

我有一个需要很长时间才能加载的属性（它会创建一个缩略图）。当我使用 IsAsync 绑定属性时，它会引发错误“调用线程必须是 STA，因为许多 UI 组件都需要这个。” 我怎样才能解决这个问题？

# jquery - 检查cookie是否存在并隐藏内容

> ID：12045918
> 
> 赞同：1
> 
> 时间：2012-08-20T22:08:34.233
> 
> 标签：jquery, css, cookies

**编辑：**这有效（给我一个警报）：

```
if (document.cookie.indexOf("TR_LNG") >= 0) { alert('cookie found'); } 
```

所以问题出在隐藏机制上。但是在控制台中：`$('.langselmain').hide('fast');`这也有效，所以我不知道 wtf 是错误的。**结束编辑**

我正在尝试检查语言首选项 cookie，如果它存在以隐藏语言选择对话框。这是我用来检查cookie的：

```
if (document.cookie.indexOf("TR_LNG") >= 0) { $('.langselmain').hide('fast'); } 
```

以及要隐藏的内容：

```
<div id="langselectsplash" class="langselectsplash langselmain"><div id="select"><img src="http://sarvatma.org/wp-content/uploads/2012/08/sarvalogo2.png" /><p> 
        <style>#tr_setdeflang{display:none;}</style><div class="no_translate transposh_flags" ><a id="en" href="/about/" class="tr_active">English</a><a id="fr" href="/fr/about/">Français</a><a id="de" href="/de/about/">Deutsch</a><a id="ja" href="/ja/about/">日本語&lt;/a><a id="pl" href="/pl/about/">Polski</a><a id="es" href="/es/about/">Español</a></div>        </p></div></div><div id="langsplashfade" class="langselmain"></div> 
```

它只是不工作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T22:25:45.300

您可以使用：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

js设置cookie：

```
$.cookie('TR_LNG', 'set the value'); 
```

js隐藏：

```
if ($.cookie('TR_LNG')) {
    $('.langselmain').hide();
} 
```

工作jsfiddle：

[http://jsfiddle.net/3ypED/1/](http://jsfiddle.net/3ypED/1/)

编辑：没有插件 [http://jsfiddle.net/3ypED/4/](http://jsfiddle.net/3ypED/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T10:16:56.430

您可以通过以下方式检查 cookie 是否存在

```
if (document.cookie.indexOf("Login_ID") < 0) {
} 
```

`document.cookie.indexOf("Login_ID") = -1`表示 cookie 已过期 `document.cookie.indexOf("Login_ID") = 0`表示已找到 cookie

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:27:43.467

呃，这是一个愚蠢的错误。我没有绑定我的功能。

```
$(document).ready(function(){
//that code
}); 
```

修复。

# zend-framework - 如何在便携式 wamp 或 xampp 上运行 zend 框架项目？

> ID：12045921
> 
> 赞同：2
> 
> 时间：2012-08-20T22:08:45.810
> 
> 标签：zend-framework, xampp, project, wamp, portability

我正在尝试使用便携式 wamp 运行（没有成功）一个 zend 框架项目。（我对 xampp 的便携式版本也有同样的问题。）

通常我会收到错误 HTTP 500（内部服务器错误），以及

`"There is no such file Zend/Application.php in public/index.php line 18 (require_once 'Zend/Application.php').`

如果没有 wamp 的便携式版本，我没有任何问题。我已将我的项目中的 DocumentRoot 从更改为`www`公用文件夹，`httpd.conf`并且该项目在浏览器中运行良好。

我试图在 wamp（和 xampp）的便携式版本中做同样的事情 - 没有结果。不幸的是，我只能在工作时在我的计算机上安装便携式软件，所以如果有人能帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:27:52.387

便携与否真的没有区别。您似乎忘记调整 LAMP 环境了。很可能您的 httpd 的 .htaccess 处理受到限制，或者 mod_rewrite 未启用，因此 httpd 在尝试解析项目的 .htaccess 时失败。检查您的 httpd 的错误日志和/或 php 错误日志。

# php - 如何建立一个真正的 Gearman 环境

> ID：12045923
> 
> 赞同：1
> 
> 时间：2012-08-20T22:08:55.903
> 
> 标签：php, gearman

Gearman 把我逼疯了。我知道所有的教程所有的演示文稿所有的操作方法，但我没有得到我需要的信息。

***我的计划***

我有一个客户将作业发送到本地主机上的一个作业服务器。在此服务器（ Home-Server ）上运行网站和数据库。现在我有两个（后来更多的 Worker-Server），我们称之为 W1 和 W2。在这些服务器上，应该完成艰苦的工作，他们应该从安装了 Gearman-Job-Server 的 Home-Server 获取作业。Jobs 是同步的，这意味着客户端会等到 Tasks 完成。

但我不知道该怎么做。我发现的每个教程都只告诉我当客户端和工人在同一台机器上运行时如何设置 Gearman。在 Home-Server 上，我安装了 gearman-job-server 和带有 PECL 的 PHP gearman API。在我与supervisord打交道的客户中，我打电话给：

```
$gmc = new GearmanClient();
$gmc->addServer(); 
```

哪个应该将任务发送到 localhost Job-Server，后者应该比两个免费的 Worker-Server 之一发送。正确的？

在 Worker-Server W1 和 W2 上的 worker.php 上——也可以用 supervisord 处理——下面是这样写的

```
$gmworker= new GearmanWorker();
$gmworker->addServer('Home-Server-IP', 4730); 
```

现在 Worker-Server 应该从 Home-Server 获取任务？我必须在 W1 和 W2 安装 gearman-job-server 还是 PECL PHP Gearman API 是我需要的一切？我必须配置 Worker-Server 吗？

我真的希望你能向我解释这些问题，我能理解 Gearman。

更多信息：当我在家庭服务器小费时

```
gearmand -vvv -u root --listen=127.0.0.1 
```

输出只是：

*   信息启动
*   INFO 监听 127.0.0.1:4730 (6)
*   INFO 创建唤醒管道
*   INFO 创建 IO 线程唤醒管道
*   INFO 添加监听socket事件（六）
*   INFO 为唤醒管道添加事件
*   INFO 进入主事件循环

在最后一行之后，shell 不再做任何事情。我什至不能提示一个新命令。

更多信息。

我检查了 Gearmand 是否在 Home-Server 上运行。

```
ps -e|grep gearman 
```

输出：

*   1460 ? 00:00:00 齿轮指令

当我现在在 Worker-Server 上发出命令时

```
/usr/sbin/gearmand -u root -vvv --listen=Home-Server-IP 
```

我得到以下错误。

*   信息启动
*   致命_listen_init：绑定：99
*   INFO 关机完成

我真的没有弄明白我的申请出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:25:24.583

你用的是什么版本的gearman？错误消息的输出让我觉得它已经很老了。

你为什么要以root身份运行它？

# gwt - 需要 GWT SplitLayoutPanel 具有最大尺寸，拖动非常跳跃

> ID：12045924
> 
> 赞同：0
> 
> 时间：2012-08-20T22:08:58.947
> 
> 标签：gwt

有没有为 SplitLayoutPanel 的孩子设置最大尺寸的好方法？现在我重写它的 onResize 方法并调用一个 JSNI 函数来设置中心面板的 div、右面板的 div 和分割面板的 div 的父 div 的右或宽度样式属性，如果右/东面板超过 400px 宽.

我注意到拆分器和右侧面板的大小甚至不跟随鼠标光标，而是在大约 4/5 到 2/5 之间剧烈振荡，因为它们应该基于鼠标指针当前的位置。

我在 Eclipse 中调试并尝试在没有 Eclipse 的情况下运行它，它是一样的。我也在调用 super.onResize()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:15:15.353

如果我正确理解您的问题，您希望拥有一个 SplitLayoutPanel 来占用父元素的最大空间。为此，您可以使用宽度的百分比属性，例如，

```
SplitLayoutPanel slp = new SplitLayoutPanel();
slp.setWidth( "100%" ); 
```

在下一步中，您要将子元素添加到 SplitLayoutPanel 中，它应该占据最大区域。然后将每个子宽度设置为 100%

```
Widget child = // Instantiate any type of widget
child.setWidth( "100%" );
slp.add // Use proper add method and add the child to SplitLayoutPanel 
```

我不明白你的意思是***拖动非常跳跃***。您的意思是拆分器尺寸太小以至于您找不到拆分器。如果是这种情况，您可以通过在构造函数中传递拆分器大小来增加拆分器大小，例如

```
int splitter_size_in_pixels = 5;
SplitLayoutPanel slp = new SplitLayoutPanel( splitter_size_in_pixels ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T18:07:35.850

> 我注意到拆分器和右侧面板的大小甚至不跟随鼠标光标，而是在大约 4/5 到 2/5 之间剧烈摆动，因为它们应该基于鼠标指针当前的位置。

拖动分离器时，我也看到了生涩的运动。我的南窗格包含一个包含标签和表格的垂直面板。解决方法是设置 VerticalPanel height="100%" 。我已经附加了 uibinder 代码。

HTH朱利安

```
 <g:SplitLayoutPanel styleName="gwt-SplitLayoutPanelTtc" ui:field="splitLayoutPanel">
    <g:north size="40">
        ...
    </g:north>
    <g:west size="200">
        ...
    </g:west>
    <g:south size="500">
        <g:VerticalPanel height="100%" width="100%">
            <g:Label ui:field="tableTitle" styleName="tableTitle"></g:Label>
            <g:Grid ui:field="table" styleName="gwt-Grid"></g:Grid>
        </g:VerticalPanel>

    </g:south>
    <g:center>
        ...
    </g:center>
</g:SplitLayoutPanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-31T12:50:34.003

您可以通过添加中间 ResizeLayoutPanel 来修复生涩/跳跃的动作。

MyComposite.ui.xml：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui" 
    xmlns:my="urn:import:my.custom.package.client">

<g:SplitLayoutPanel ui:field="splitLayoutPanel">
    <g:west size="250">
    <g:ResizeLayoutPanel ui:field="leftMenuOuterPanel">
            <my:MenuWidget ui:field="menuWidget" />
        </g:ResizeLayoutPanel>
    </g:west>
    <g:center>
        <g:ResizeLayoutPanel ui:field="centerOuterPanel">
            <my:AwesomeWidget ui:field="centerWidget" />
        </g:ResizeLayoutPanel>
    </g:center>
</g:SplitLayoutPanel>

</ui:UiBinder> 
```

感谢 OlivierH 的[回答](https://stackoverflow.com/a/16898745/1034782)

# ios - viewWillAppear、viewDidAppear 未使用 pushViewController 调用

> ID：12045925
> 
> 赞同：3
> 
> 时间：2012-08-20T22:09:13.813
> 
> 标签：ios, uiviewcontroller, viewwillappear, viewdidappear

```
NewViewController_iPhone *newViewController = [[NewViewController_iPhone alloc] initWithNibName:@"NewViewController_iPhone" bundle:nil];

[self.navigationController pushViewController:newViewController animated:YES]; 
```

`viewWillAppear:`并且`viewDidAppear:`没有被调用`NewViewController_iPhone`。为什么不？

# php - php从字符串显示信息

> ID：12045930
> 
> 赞同：0
> 
> 时间：2012-08-20T22:09:27.323
> 
> 标签：php

我有这段代码可以获取用户的 IP 地址和纬度和经度。但是，如果它找到纬度和经度，我希望将其显示在地图上。

```
$theirip = $_SERVER['REMOTE_ADDR'];
$fileinfo = file_get_contents("http://api.easyjquery.com/ips/?ip=".$theirip."&full=true"); 
```

这会输出一个这样的字符串。

> {"IP":"000.000.00.000","continentCode":"Unknown","continentName":"Unknown","countryCode2":"Unknown","COUNTRY":"Unknown","countryCode3":"Unknown" ,"countryName":"Unknown","re​​gionName":"Unknown","cityName":"Unknown","cityLatitude":0,"cityLongitude":0,"countryLatitude":0,"countryLongitude":0," localTimeZone":"未知","localTime":"0"}

我想从中检索 cityLatitude 和 cityLongitude 。我研究了一些并尝试了一些不同的代码。

```
$lat = $fileinfo -> {"cityLatitude"}; 
```

但我不太确定该怎么做。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:14:38.393

你有一个[`JSON`](http://www.json.org/)字符串，你可以用[`json_decode`](http://php.net/manual/en/function.json-decode.php)它来解析它

```
$obj = json_decode($fileinfo);
$lat = $obj -> {"cityLatitude"}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:12:34.637

它是一个 JSONObject ...只需使用 json_decode() 从中获取数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:15:56.333

无需解码 JSON，它应该可以正常工作。从这里尝试它工作得很好......

尝试使用您的 IP 而不是 $theirip = $_SERVER['REMOTE_ADDR'];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T22:19:28.170

您使用的是 PHP 对吗？它应该是

```
$info = json_decode($fileinfo);
$citylatitude = $info->cityLatitude; 
```

# c++ - C ++在列表中找到一个句子

> ID：12045931
> 
> 赞同：2
> 
> 时间：2012-08-20T22:09:32.253
> 
> 标签：c++, boost, std

我正在尝试找到一种优雅的方式来查找一些文本。`"hello world"`从句子`"I compiled my first hello world. It works!"`

但是这句话是`std::list<word>`带有一些元数据的。

```
Class Word
{
  std::string m_word;
  Location ... (X,Y in a picture)
  ....
} 
```

只是想知道是否有很好的方法可以使用一些 std 或 boost 函数而不是我的 2 个丑陋的循环。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:14:59.953

您可以与仅比较成员[`std::search`](http://en.cppreference.com/w/cpp/algorithm/search)的自定义谓词一起使用：`m_word`

```
bool wordsEqual(const Word& a, const Word& b) {
    return a.getWord() == b.getWord();
}

// ...
Word needle[] = { "hello", "world" };
list<Word>::iterator it = search(lst.begin(), lst.end(),
                                 needle, needle + 2,
                                 wordsEqual); 
```

此代码假定数组初始化的`getWord`方法和构造`Word(const char*)`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:14:00.437

你可以调查一下[`std::search`](http://www.cplusplus.com/reference/algorithm/search/)。

```
string pattern[] = {"hello","world"};
list<string>::iterator it = search(x.begin(),x.end(), pattern, pattern + 1); 
```

`x`你的清单在哪里。您可能必须提供自己的二元谓词。

# google-chrome-extension - 是否可以为 OS X 打包一个 .app？

> ID：12045934
> 
> 赞同：2
> 
> 时间：2012-08-20T22:10:09.667
> 
> 标签：google-chrome-extension

我已经阅读了[打包应用程序](http://developer.chrome.com/trunk/apps/about_apps.html)并使用了示例应用程序。我可以将它们加载到我的 Chrome Canary 中，但我似乎找不到为 OS X 构建/打包 .app 的方法。这还不可能，还是我只是错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:18:21.467

以前 Google Chrome 打包应用程序仅适用于 Google Chrome。根据Chromium 产品经理 Sriram Saroop[最近的一篇博客文章](http://blog.chromium.org/2013/02/chrome-app-launcher-developer-preview.html)，有一个可用的 Chrome App Launcher 可以在浏览器之外运行 Google Chrome 打包的应用程序。

![在此处输入图像描述](../Images/1d6e5d2564ab793388e6a79cd87173f1.png)

Chrome 应用启动器将“很快”登陆 Mac 和 Linux。

# javascript - Javascript 渲染。如何编写 Javascript，使其在函数调用结束之前不会继续执行代码

> ID：12045935
> 
> 赞同：2
> 
> 时间：2012-08-20T22:10:12.973
> 
> 标签：javascript

不确定我的问题是否是主观/客观的，但作为一个 JavaScript 新手，我经常遇到这个问题。所以我来了。

我习惯写 C#，所以我的 JavaScript 结构看起来像 C#。就这样，我认为这会带来问题；-) 让我们举一个简单的例子，今天我又遇到了我的问题：

```
MyLibrary.fn.InitAddEntityForm = function () {
    $('a#btnAddEntity').click(function () {
            //post data and receive object with guid and isPersisted boolean
            var persistedObject = MyLibrary.fn.CheckAndSendAddEntityForm("name", "avatarurl.png");
            console.log("test");

            //check if persisted and go to next step
            if (persistedObject.isPersisted) {
                MyLibrary.fn.InitAddAnotherEntityForm(persistedObject.gdEntityId);
            } else {
                alert("Oops, something went wrong. Please call 911");
            }
    });
};

//////*****/////
//SOME FUNCTION THAT SENDS MY FORM AND RETURNS AN OBJECT WITH TRUE VALUE AND POSTED ENTITY ID
/////*****//////
MyLibrary.fn.CheckAndSendAddForm = function (txtName, ImageUrl) {
var postUrl = "/admin/add";
var persistedObject = new Object();
$.post(
    postUrl,
    { Name: txtName, ImageUrl: txtImageUrl},
    function (data) {
        if (data.Status == 200) {
            console.log("Post status:" + data.Message);
            persistedObject.isPersisted = true;
            persistedObject.gdEntityId = data.Data;
        } else if (data.Status == 500) {
            console.log("Failed to post entitiy");
        } else {
            console.log("Fault with Javascript");
        }
    }, "json"
);
return persistedObject; 
```

};

好的，就是这样。一切看起来都还不错吧？浏览器说不。我尝试使用 firebug 对其进行调试，逐行遍历我的代码，这样浏览器就会执行我想要的操作：执行一个新函数以在我的向导中显示下一个面板。

在我的代码中放置了很多 Console.logs() 之后，我发现这一定与 JavaScript 中的时间有关。在 C# 中，代码逐行执行，但显然 JavaScript 没有。通过放置那个 Console.log("test") 我注意到在“发布状态：成功！”之前出现在我的控制台中的“测试”。

所以这是我的问题，我应该如何编写我的 JavaScript 代码，以便我可以控制浏览器执行我的代码的方式？我真的应该将下面的代码替换到我的 CheckAndSendAddEntityForm() 的末尾吗？

```
//check if persisted and go to next step
        if (persistedObject.isPersisted) {
            MyLibrary.fn.InitAddAnotherEntityForm(persistedObject.gdEntityId);
        } else {
            alert("fout");
        } 
```

这是我必须编写 JavaScript 的方式：一个大的多米诺骨牌效应还是我只是做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:15:17.583

$.post 是 AJAX 调用的快捷方式，AJAX 定义为异步的，这意味着它在继续处理之前不会等待响应。如果将其切换为常规 AJAX() 方法，则可以将 async 选项设置为 false，这将使其行为符合您的预期。

或者，您还可以定义一个函数以在 AJAX 请求成功返回时执行，您可以在其中调用流程链中的下一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:18:00.647

AJAX 调用是异步的；这意味着`$.post`当请求完成时将执行公开的回调方法，但是一旦调用完成，您的 javascript 将继续执行`$.post`。如果你想在ajax调用完成后做一些事情，你需要提供一个回调方法并做其他事情，例如：

```
MyLibrary.fn.CheckAndSendAddForm = function (txtName, ImageUrl, callback) {
var postUrl = "/admin/add";
var persistedObject = new Object();

$.post(
    postUrl,
    { Name: txtName, ImageUrl: txtImageUrl},
    function (data) {
        if (data.Status == 200) {
            console.log("Post status:" + data.Message);
            persistedObject.isPersisted = true;
            persistedObject.gdEntityId = data.Data;
        } else if (data.Status == 500) {
            console.log("Failed to post entitiy");
        } else {
            console.log("Fault with Javascript");
        }

        callback(); // This is where you return flow to your caller
    }, "json"
);
}; 
```

然后你像这样调用：

```
var persistedObject = MyLibrary.fn.CheckAndSendAddEntityForm("name", "avatarurl.png", function()
{
        console.log("test");

        //check if persisted and go to next step
        if (persistedObject.isPersisted) {
            MyLibrary.fn.InitAddAnotherEntityForm(persistedObject .gdPronoId);
        } else {
            alert("Oops, something went wrong. Please call 911");
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:17:16.507

JavaScript 是单线程的。如果您有异步功能，一个简单的布尔[信号量](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)变量将有助于在某些进程运行时不允许调用函数。

如果要一个一个地执行异步任务（如多米诺骨牌），则需要使用回调函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T22:20:06.377

您遇到的是 AJAX 的“异步”位。如果您想物理地（如在 Javascript 文件中逐行），您可以使用`.success`或`.pipe`jQuery`.done`方法添加回调以进一步处理数据。如果可以的话，不要嵌入你的回调，否则你*会*得到你所说的“多米诺骨牌效应”。

# php - 如何使用双主键填充查找表？

> ID：12045937
> 
> 赞同：0
> 
> 时间：2012-08-20T22:10:21.367
> 
> 标签：php, sql

我有一个数据库，其中包括三个表，如下所示：

-播放器

-球员以前的俱乐部

-以前的俱乐部

“球员以前的俱乐部”表是一个查找表，因为球员和以前的俱乐部之间存在多对多的关系。

现在我有下面的代码，它成功地从一个表单中填充了“玩家”表和“以前的俱乐部表”。

```
if (isset($_GET['addform']))
{
include $_SERVER['DOCUMENT_ROOT'] . '/includes/db.inc.php';

//PLAYER TABLE INSERT
try
{
    $sql = 'INSERT INTO player SET
            name = :name,
            age = :age,
            position = :position,
            height = :height,
            weight = :weight,
            satscore = :satscore,
            gpa = :gpa';
    $s = $pdo->prepare($sql);
    $s->bindValue(':name', $_POST['name']);
    $s->bindValue(':age', $_POST['age']);
    $s->bindValue(':position', $_POST['position']);
    $s->bindValue(':height', $_POST['height']);
    $s->bindValue(':weight', $_POST['weight']);
    $s->bindValue(':satscore', $_POST['satscore']);
    $s->bindValue(':gpa', $_POST['gpa']);
    $s->execute();
}
catch (PDOException $e)
{
    $error = 'Error adding submitted player profile.' . $e->getMessage();
    include 'error.html.php';
    exit();
}

//PREVIOUS CLUBS TABLE INSERT
try
{
    $sql = 'INSERT INTO previousclubs SET
            name = :previousclubs';
    $s = $pdo->prepare($sql);
    $s->bindValue(':previousclubs', $_POST['previousclubs']);
    $s->execute();
}
catch (PDOException $e)
{
    $error = 'Error adding previous club.' . $e->getMessage();
    include 'error.html.php';
    exit();
}

header('Location: .');
exit();
} 
```

我不确定如何填充查找表（球员以前的俱乐部），因为它需要的值不是通过表单传递的，它们是通过自动增量功能生成的。

该表由两个字段组成。一个是 player 表的主键值，另一个是之前的 clubs 表的主键值。

这两个字段一起形成一个联合主键。

非常感谢有关如何执行此操作的任何帮助。

谢谢

**更新**

好的，我现在有以下代码：

```
if (isset($_GET['addform']))
{
include $_SERVER['DOCUMENT_ROOT'] . '/includes/db.inc.php';

//PLAYER TABLE INSERT
try
{
    $sql = 'INSERT INTO player SET
            name = :name,
            age = :age,
            position = :position,
            height = :height,
            weight = :weight,
            satscore = :satscore,
            gpa = :gpa';
    $s = $pdo->prepare($sql);
    $s->bindValue(':name', $_POST['name']);
    $s->bindValue(':age', $_POST['age']);
    $s->bindValue(':position', $_POST['position']);
    $s->bindValue(':height', $_POST['height']);
    $s->bindValue(':weight', $_POST['weight']);
    $s->bindValue(':satscore', $_POST['satscore']);
    $s->bindValue(':gpa', $_POST['gpa']);
    $s->execute();

    $one = $pdo->lastInsertId();
}
catch (PDOException $e)
{
    $error = 'Error adding submitted player profile.' . $e->getMessage();
    include 'error.html.php';
    exit();
}

//PREVIOUS CLUBS TABLE INSERT
try
{
    $sql = 'INSERT INTO previousclubs SET
            name = :previousclubs';
    $s = $pdo->prepare($sql);
    $s->bindValue(':previousclubs', $_POST['previousclubs']);
    $s->execute();

    $two = $pdo->lastInsertId();
}
catch (PDOException $e)
{
    $error = 'Error adding previous club.' . $e->getMessage();
    include 'error.html.php';
    exit();
}

//PLAYER PREVIOUS CLUB INSERT
try
{
    $sql = "INSERT INTO playerpreviousclubs SET
            playerid = '$one',
            previousclubid = '$two'";
    $s = $pdo->prepare($sql);
    $s->bindValue(':playerid', $_POST['playerid']);
    $s->bindValue(':previousclubid', $_POST['previousclubid']);
    $s->execute();
}
catch (PDOException $e)
{
    $error = 'Error adding player previous club look up data.' . $e->getMessage();
    include 'error.html.php';
    exit();
}

//LINKS TABLE INSERT
try
{
    $sql = "INSERT INTO links SET
            link = :link,
            playerid = '$one'";
    $s = $pdo->prepare($sql);
    $s->bindValue(':link', $_POST['link']);
    $s->bindValue(':playerid', $_POST['playerid']);
    $s->execute();
}
catch (PDOException $e)
{
    $error = 'Error adding link for player.' . $e->getMessage();
    include 'error.html.php';
    exit();
}

header('Location: .');
exit();
} 
```

这给了我以下错误：

注意：未定义索引：第 84 行 C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\connect\players\index.php 中的 playerid

注意：未定义索引：第 85 行 C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\connect\players\index.php 中的 previousclubid

注意：未定义索引：第 103 行 C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\connect\players\index.php 中的 playerid

为 player.SQLSTATE [HY093] 添加链接时出错：参数号无效：绑定变量的数量与令牌的数量不匹配

如果我删除“//LINKS TABLE INSERT”下的所有代码，那么它可以工作，所以我认为问题就在这里，但我还需要这个表来存储 $one 值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:18:06.780

为插入的球员和俱乐部行生成的 ID`$pdo->lastInsertId()`在您执行每个查询后可用。因此，在 each 之后`execute()`，将插入的 ID 存储在一个变量中，以便在以后的查询中使用。

[http://php.net/manual/en/pdo.lastinsertid.php](http://php.net/manual/en/pdo.lastinsertid.php)

[http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id)

# c++ - 将大文件从 RAM 写入磁盘

> ID：12045939
> 
> 赞同：0
> 
> 时间：2012-08-20T22:10:38.917
> 
> 标签：c++, windows-7, file-io

如果我需要将一个大文件从分配的内存写入磁盘，最有效的方法是什么？

目前，我使用以下内容：

```
char* data = static_cast<char*>(operator new(0xF00000000)); // 60 GB 

// Do something to fill `data` with data

std::ofstream("output.raw", std::ios::binary).
   write(data, 0xF00000000); 
```

但我不确定最直接的方法是否也是最有效的，考虑到各种缓冲机制等。

我正在使用带有 64 位目标的 Windows 7 64 位和 Visual Studio 2012 RC 编译器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:42:42.823

对于 Windows，您应该使用[`CreateFile`API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)。仔细阅读该页面以及其中提到优化的任何链接。您传入一些标志来关闭缓冲。过去，当我以大约每秒 800MB 的速度收集视频时，我会这样做，并且必须尽快将其中的一小部分写入 RAID 阵列。

现在，对于标志 - 我认为主要是这些：

*   `FILE_FLAG_NO_BUFFERING`
*   `FILE_FLAG_WRITE_THROUGH`

对于阅读，您可能想要使用`FILE_FLAG_SEQUENTIAL_SCAN`，尽管我认为如果关闭缓冲，这将无效。

查看[缓存行为部分](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx#caching_behavior)

你需要做几件事。首先，您应该始终写入扇区大小的倍数的数据量。这几乎是（或至少是）512 字节，但您将来可能要考虑最多 2048 个字节。

其次，您的内存也必须与该扇区大小对齐。您可以使用`_aligned_malloc()`或仅分配比您需要的更多的缓冲区并手动对齐。

可能还有其他内存优化问题，您可能希望将单个写入操作限制为内存页面大小。我从来没有进入过那个深度。我仍然能够以非常接近磁盘极限的速度写入数据。它比使用 stdio 调用要快得多。

如果您需要在后台执行此操作，您可以使用重叠 I/O，但老实说我从未理解它。我创建了一个后台工作线程，专门用于写出视频缓冲区并在外部对其进行控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:44:49.173

想到的最有希望的事情是内存映射输出文件。根据数据的填充方式，您甚至可以让现有程序通过指针直接写入磁盘，最后不需要单独的写入步骤。这相信操作系统可以有效地分页文件，无论如何它可能与堆内存有关......可能会避免磁盘到磁盘的复制。

我不确定如何专门在 Windows 中执行此操作，但您可能可以通知操作系统您的预期内存访问模式以进一步提高性能。

（boost::asio 具有对内存映射文件的可移植支持）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T23:12:21.613

如果你想使用`std::ofstream`，你应该确保以下几点：

1.  文件流不使用缓冲区。这样做的方法是调用`out.setbuf(0, 0)`.
2.  确保`std::locale`used by stream 不进行任何字符转换，即`std::use_facet<std::codecvt<char, char> >(loc).always_noconv()`yield `true`。语言环境执行此`"C"`操作。

有了这个，我希望这`std::ofstream`与写入大缓冲区的任何其他方法一样快。我还希望它比使用内存映射 I/O 慢，因为内存映射 I/O 在读取它们只是为了写入它们的内容时应该避免对内存的分页部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T23:53:47.463

使用 来打开一个文件`CreateFile`，使用`SetEndOfFile`为文件预分配空间（以避免写入时产生太多碎片），然后`WriteFile`在循环中使用 2 MB 大小的缓冲区（此大小在大多数情况下效果最佳）调用，直到您写入整个文件出去。

`FILE_FLAG_NO_BUFFERING`在某些情况下可能会有所帮助，而在其他情况下可能会使情况变得更糟，因此没有必要使用它，因为通常 Windows 文件系统写入缓存可以很好地工作。

# php - PHP 字符串函数与 mbstring 函数

> ID：12045940
> 
> 赞同：2
> 
> 时间：2012-08-20T22:10:53.450
> 
> 标签：php, encoding, utf-8, mbstring

我有一个到目前为止只有英文的应用程序。整个模板和数据库的内容编码都是 UTF-8。我现在希望将应用程序国际化/翻译成具有绝对需要 UTF-8 的字符集的语言。

该应用程序使用各种 PHP 字符串函数，例如`strlen()`、`strpos()`、`substr()`等，我的理解是我应该将这些函数切换为多字节字符串函数，例如`mb_strlen()`、`mb_strlen()`、`mb_substr()`等，以便正确处理多字节字符。我试图阅读这个主题，但几乎我能找到的所有内容都深入到“编码理论”中，并没有提供一个简单的问题答案：如果我始终使用 UTF-8，我可以从使用`strlen()`to`mb_strlen()`并期望事情可以正常工作，例如英语和阿拉伯语，还是我还需要注意什么？

任何见解都将受到欢迎，如果我因我的相对无知而冒犯了一个贴近他们内心的编码的人，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:42:47.110

不会。由于 bytearrays 在 PHP 中也是字符串，因此将 8 位字符串函数简单地替换为 mb_* 对应物只会带来麻烦。像 strlen() 和 substr() 这样的函数可能比实际的文本字符串更常用于字节。

在我上次工作的地方，我们设法在完全不使用 mbstring 库的情况下用 PHP 构建了一个多语言网站（阿拉伯语、印地语等）。文本字符串操作实际上并不经常发生。当它发生时，它需要的不仅仅是更改函数名称。我发现，大多数挑战都存在于 HTML 方面。让页面布局与 RTL 语言一起使用是非常重要的部分。

我不知道您是否只是以阿拉伯语为例。国际化的难度可能会有很大差异，具体取决于“国际”是指欧洲语言（加上俄语），还是包括中东、南亚和远东语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:15:55.757

检查php.ini中[mbstring.func_overload 标志的状态](http://php.net/manual/en/mbstring.configuration.php#ini.mbstring.func-overload)

如果 (ini_get('mbstring.func_overload') & 2) 则 strlen() 之类的函数（如此处所列[）](http://php.net/manual/en/mbstring.overload.php)已被 mb_strlen() 函数重载，因此您无需显式调用 mb_* 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T16:38:18.837

真正需要的多字节函数的数量在10个以下，所以创建3或5个问题，函数或逻辑的使用是否良好。这个问题是不安全的，很难回答。小问题可以快速得到答案。具体的问题可以带来好的答案。当您提出其他问题时，请告诉我。

如果您需要用例，请参阅 CMS 中的后备功能，例如[Wordpress](http://core.trac.wordpress.org/browser/trunk/wp-includes/compat.php)、[MediaWiki](http://svn.wikimedia.org/doc/classFallback.html)、[Drupal](http://api.drupal.org/api/drupal/core!includes!unicode.inc/8)。

当您决定开始使用 mbstring 时，您应该避免使用 mbstring.func_overload 指令。Mbstring 维护者将在 PHP 5.5 或 5.6 中弃用 mbstring.func_overload（请参阅 2012 年 4 月的 P [HP 核心邮件列表](http://marc.info/?l=php-internals&m=133548185505478)）。mbstring.func_overload 破坏了不应使用 mbstring.func_overload 的代码库。您可以在 CakePHP、Zend Framework 1x 中看到使用**strlen()计算****Content-Length**的案例。

 **我在另一个地方回答了类似的问题：[我应该重构我的所有框架以使用 mbstring 函数吗？](https://stackoverflow.com/a/9154703/531320)**

# jsf - Primefaces 动态菜单的图标

> ID：12045942
> 
> 赞同：2
> 
> 时间：2012-08-20T22:10:57.000
> 
> 标签：jsf, primefaces

如何从 JSF 资源文件夹中获取图标到从 org.primefaces.model.MenuModel 创建的动态菜单；menu 的 setIcon 方法只接受一个字符串作为参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T03:39:31.860

您可以使用 css 样式类指定自定义图标，如下所示：

```
<p:menuitem icon="barca" ... /> 
```

并加载位于 resources/default/images/icons 文件夹中的图像，如下所示：

```
.barca {
    background: url('#{resource['default:images/icons/barca_logo.png']}') no-repeat;
    height:16px;
    width:16px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T13:07:44.657

是的，setIcon 方法接受一个字符串，它是您要设置的图标的名称。例如：

```
 MenuItem item3 = new MenuItem();
    item3.setIcon("ui-icon-print"); 
```

您是否可能尝试使用图像而不是图标？这里有一个预定义图标的备忘单：[http ://www.petefreitag.com/cheatsheets/jqueryui-icons/](http://www.petefreitag.com/cheatsheets/jqueryui-icons/)

如果您尝试创建自己的图标，那么您需要按照@Ravi 的指示进行操作，并创建一个您将在 setIcon() 方法中引用的自定义 CSS 类。

# mysql - 加快对 mysql 数据库中文本字段的 NOT NULL 查询

> ID：12045948
> 
> 赞同：2
> 
> 时间：2012-08-20T22:11:26.710
> 
> 标签：mysql

我有一个这样的查询：

```
select count(*) from people where text_field is not null; 
```

它很慢。在 mediumtext 字段上放置索引是否符合规定？这方面的最佳做法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T03:26:35.750

这个`is not null`查询谓词因无法索引而臭名昭著。这是因为 SQL 中的 null 比较不直观。

最好的办法是找出其他方法来查找这些非空 text_field 值。如果此查询需要经常运行，您需要存储某种标志值。

例如，添加一个名为 text_field_length 的 INT 列并使用 text_field 的长度填充它，然后选择 where text_field_length > 0

**八年后编辑**

较新版本的 MySQL (5.7 +) 和 MariaDB 现在具有计算列。这些计算的列可以被索引。

因此，您可以在表中添加一个计算列（可能称为`text_field_not_null`），`people`并在该列上添加一个索引。

```
ALTER TABLE people add column text_field_not_null INT
        AS (IF(text_field IS NULL,0,1)) STORED;
CREATE INDEX text_field_not_null_dex ON people(text_field_not_null); 
```

然后，此查询将利用该新索引。

```
 SELECT COUNT(*) FROM people WHERE text_field_not_null = 1; 
```

而且，这个新列的值会自动处理。

（MySQL 在这方面几乎赶上了昂贵的表服务器。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-11T03:54:11.453

由于 Mysql 是一个“旧锡罐”，我们不得不添加一个带有索引和触发器的 BOOLEAN 类型的辅助字段：

```
IF NEW.text_field='' THEN 
SET NEW.boolean_field = 1;
ELSE
SET NEW.boolean_field = 0;
END IF 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-04-17T10:18:46.157

您将使用此查询

```
 select count(*) from people where text_field not like ""; 
```

祝你好运！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2019-04-11T04:23:40.170

我希望你使用这种类型的查询

从 text_field 不为空的人中选择 count(*)；

请添加过滤子句以获得更好的性能

# php - Magento：Magmi 数据转储 API

> ID：12045950
> 
> 赞同：0
> 
> 时间：2012-08-20T22:11:34.847
> 
> 标签：php, api, magento, magmi

我在使用 magmi datapump api 导入自定义选项时遇到了一些问题。我可以通过在 magmi 的示例中给出的数组中传递数据来轻松上传产品。

但是，当我安装自定义选项模块并启用它时，我收到以下错误。

```
...
$dp->beginImportSession("default","create");

// Here we define a single "simple" item, with name, sku,price,attribute_set,store,description
$item = array(
    'name'          => 'test a',
    'sku'           => 'testsku3',
    'price'         => '110.00',
    'attribute_set' => 'Default',
    'store'         => 'admin',
    'description'   => 'ingested with Datapump API',
    'meta_title'    => 'test meta',
    'qty'           => '1',
    'categories'    => '2',
    'weight'        => '1',
    'tax_class_id'  => '4',
    'Please enter your text:field:1:3' => ':fixed:0.5:Ref Text:35'
);

... 
```

返回错误：

```
Notice: Undefined index: xxx:field:1 in /var/www/vhosts/websitename.co.uk/magmi/plugins/extra/itemprocessors/customoptions/pablo_customoptions.php on line 33 
```

现在此错误代码解析为...

```
...
public function getOptId($field)
{
    return $this->_optids[$field];
}
... 
```

有谁知道如何解决这个问题？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T12:57:34.500

所以我遇到了同样的问题，这是一个巨大的头痛。上述解决方案很有效，因为产品创建时没有错误，但未添加自定义选项。

但是，我设法创建了一个解决方案！

我试图使用以下标签向我的产品添加自定义选项：

`date_time:field:1:1`

这引发了与您遇到的完全相同的错误。但是，它的格式应该是这样的。

为了解决它，我不得不编辑文件：**/magmi/plugins/extra/itemprocessors/customoptions/pablo_customoptions.php**

我将 getOptId() 函数（第 30 行）更改为：

```
public function getOptId($field)
{
    if(isset($this->_optids[$field])){
        return $this->_optids[$field];
    } else {
        return false;
    }
} 
```

并对 createOption() 函数进行了更改（现在在第 74 行）。我`if(!isset($optionId))`改为`if(!$optionId)`

宾果游戏，它现在应该可以按预期工作了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:24:15.240

线

> '请输入您的文本：字段：1：3' => '：固定：0.5：参考文本：35'

会产生这个错误。

通过编辑 php 文件来修复它

```
...
public function getOptId($field)
{
    if isset($this->_optids[$field]) return $this->_optids[$field];
    return '';
}
... 
```

或更好的“请输入您的文本”，就像脚本中所说的那样；）用您的自定义属性替换这一行

```
'Please enter your text:field:1:3' => ':fixed:0.5:Ref Text:35'
EDIT TO:
'custom_attribute'             => 'value', 
```

西蒙

# iphone - 从 Objective C 应用程序发送 XML 数据

> ID：12045951
> 
> 赞同：0
> 
> 时间：2012-08-20T22:11:35.680
> 
> 标签：iphone, objective-c, xml

我想将 XML 格式的参数从 Objective C 应用程序发送到 Web 服务而不得到响应（我不需要处理它）。最好和最快的方法是什么？

假设我有下一个 XML：

```
NSString *xmlParams=[NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?><R><Root><Grade>33</grade></Root></R>"]; 
```

发送 XML 的地址是：**www.myServer.com\service.asmx**

`xmlParams`发送到该地址的实现是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:29:48.010

我刚刚回答了一个类似的问题，所以我将在此处复制并粘贴一些代码：

```
- (void)myFunctionToSendDataToTheServer
{

    MKNetworkEngine *engine = [[MKNetworkEngine alloc] initWithHostName:@"myServer.com"];

    MKNetworkOperation *op = [engine operationWithPath:@"/service.asmx"];

    op.postDataEncoding = MKNKPostDataEncodingTypeCustom;

    [op setCustomPostDataEncodingHandler:^NSString *(NSDictionary *postDataDict) {
        return [NSString stringWithFormat:@"<R><Root><Grade>33</grade></Root></R>"];
    } forType:@"application/xml"];

    [engine enqueueOperation:op];
} 
```

我建议添加第三方库来处理网络代码。在这种情况下，我使用[了 MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)。

显示“[engine enqueueOperation:op];”的代码行 是将请求发送到服务器的部分。如果您改变主意并且确实想要或需要处理响应，请在“[engine enqueueOperation:op];”之前添加类似这样的内容：

```
[op onCompletion:^(MKNetworkOperation *completedOperation) {

        NSLog(@"Successful response from server: %@", [completedOperation responseString]);

    } onError:^(NSError *error) {

        NSLog(@"Error from server; %@", [error debugDescription]);
    }]; 
```

# java - Flyway 和 JPA 集成

> ID：12045953
> 
> 赞同：8
> 
> 时间：2012-08-20T22:11:44.287
> 
> 标签：java, spring, flyway

我当前的 Spring 3.0 项目正在与 Flyway 集成。

感谢谷歌网站，所以有我可以指望的文件。但不幸的是，没有太多谈论与`JPA`.

所以问题是：

1.  如何与 Flyway 集成`persistence.xml`？它是如何工作的？每次 JPA 提供程序都会`auto generate`更新架构，那么我们如何在此之前或之后运行脚本？

2.  我猜到目前为止，flyway 的查询不支持 HQL，所以是否有任何示例代码，然后我可以通过了解如何集成迁移事件？设计拦截器或新方面？在域级别上做什么？

任何提示表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T15:51:18.087

Flyway 不支持 JPA~~和春天~~. 它基本上按顺序运行您的 SQL（不是 HQL）脚本并跟踪它们。并且做得很好。它与您如何使用数据库以及如何生成升级脚本无关。

不过，还是有希望的。您的持久性提供程序很可能支持更新现有模式（我知道[hibernate](/questions/tagged/hibernate "显示标记为“休眠”的问题")和[eclipselink](/questions/tagged/eclipselink "显示标记为“eclipselink”的问题")可以），在启动时运行 ALTER 和 CREATE 语句。迁移 SQL 脚本并不完美，它并不总是有效，但这是一个好的开始。记录这些脚本，收集到 SQL 文件中，清理并用作`V_*.sql`提供给 Flyway 的文件。

更新：虽然没有对[spring](/questions/tagged/spring "显示标记为“春天”的问题")框架的直接支持，但您可以轻松地[将其与现有的 Spring 应用程序集成](http://flywaydb.org/documentation/api.html)。这种方法被证明适用于生产并且运行良好：

```
<bean id="flyway" class="com.googlecode.flyway.core.Flyway" init-method="migrate">
  <property name="dataSource" ref="..."/>
  ...
</bean> 
```

奖励：它也适用于 Java 配置（使用 Scala）：

```
@Bean(initMethod = "migrate")
def flyway() = {
    val fly = new Flyway()
    fly.setDataSource(dataSource)
    fly
} 
```

# mysql - SQL Group By：获取“max”记录的值

> ID：12045957
> 
> 赞同：0
> 
> 时间：2012-08-20T22:12:03.573
> 
> 标签：mysql, sql, group-by

我有一张`scores`桌子：

```
id
user
score
date 
```

现在，我可以轻松地选择前 10 名的高分

```
SELECT user, score, date FROM scores ORDER BY score DESC 
```

但是，我只想为每个用户提供一个分数，即他的最高分。我会从类似的东西开始

```
SELECT user, MAX(score) AS score FROM scores GROUP BY user ORDER BY score DESC 
```

但是，现在我已经失去了`date`记录的最高分。我如何得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:15:56.120

你可以`JOIN`再次上桌：

```
SELECT s1.user, max(s1.dt), s2.mxscore as score
FROM scores s1
inner join 
(
    select user, max(score) mxscore
    from scores
    GROUP BY user 
) s2
    on s1.user = s2.user
    and s1.score = s2.mxscore
GROUP BY s1.username, s2.mxscore
ORDER BY score DESC 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/967d8/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:47:42.710

事实上，你根本不需要 a `GROUP BY`。

这是查询：

```
SELECT scores.id, scores.user, scores.score, scores.date
FROM scores
WHERE NOT EXISTS (
  SELECT * 
  FROM scores AS _scores
  WHERE _scores.user = scores.user
  AND (
    _scores.score > scores.score
    OR
    _scores.score = scores.score AND _scores.id < scores.id) 
) 
```

和[SQL Fiddle](http://sqlfiddle.com/#!2/5ac9a/1)看看它是否正常工作。

请注意，此查询正确处理用户多次获得最高分数的情况（它返回第一个最高分数的记录）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:16:17.327

您需要将结果与原始表格相关联：

```
select a.user, a.maxScore, b.maxDate
from (
    select user, max(score) as maxScore 
    from scores group by user ) as a
inner join (
    select user, score, max(date) as maxDate 
    from scores group by user, score) as b on a.user = b.user and a.maxScore=b.score
order by
    a.maxScore desc 
```

此查询将返回每个用户的最高分数，以及获得该最高分数的最后日期（冗余，但为真）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T22:21:34.037

```
SELECT   a.*
FROM     scores a
JOIN     (
         SELECT   MAX(a.id) AS id
         FROM     scores a
         JOIN     (
                  SELECT   user, MAX(score) AS score
                  FROM     scores
                  GROUP BY user
                  ) b ON a.user  = b.user
                     AND a.score = b.score
         GROUP BY a.user, 
                  a.score
         ) b ON a.id = b.id
ORDER BY a.score DESC 
```

这将解决每个用户拥有多个相同最高分数的情况。在这种情况下，它将只取最大值`id`。

# git - 我如何 git pull 和 push 到不同的位置

> ID：12045959
> 
> 赞同：0
> 
> 时间：2012-08-20T22:12:07.850
> 
> 标签：git, github

我在 github 上维护一个 git repo 的分支。我有两个遥控器：`origin`一个指向原始位置，`fork`一个指向我的 github 存储库。

在他们的帮助下，我推到了 github `git push -u fork master`。它有效，但它提到了一些关于修改遥控器的内容。我如何从原点拉出并推送到 github ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:22:17.540

有很多方法可以预设这些东西，但我可能会坚持使用经典：

```
git pull origin master ;# to pull 'master' from origin
git push fork master ;# to push 'master' to fork 
```

我不是特别喜欢设置上游分支，但这只是因为我脾气暴躁并且喜欢明确的参考规范。`git pull`我也完全赞成跳过`git fetch`，`git merge`那些孩子最好离开我的草坪。

# ruby-on-rails - Rails will_paginate 使用格式 json 渲染时忽略格式

> ID：12045961
> 
> 赞同：0
> 
> 时间：2012-08-20T22:12:13.007
> 
> 标签：ruby-on-rails, will-paginate

我正在尝试在服务器上呈现 will_paginate html，以便我可以通过 ajax 移植整个寻呼机（和一些其他数据）。

我已经能够使用

```
view_context.will_paginate(@posts) 
```

在我的控制器中成功呈现寻呼机以进行 ajax 调用。

不幸的是，当我使用 format.json 运行它时，我的所有链接都包含 .json 格式。

```
/posts.json?page=1
/posts.json?page=2 
```

当他们真的应该

```
/posts?page=1 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:44:55.757

如果您使用最新的 will_paginate gem，那么您可以像这样创建自定义链接渲染器

```
#
# lib/custom_link_renderer.rb
#
class CustomLinkRenderer < WillPaginate::ActionView::LinkRenderer
  protected
  def url(page)
    page = super.gsub(".json", "")
  end
end 
```

确保在 application.rb 中自动加载 lib 目录

```
config.autoload_paths += %W(#{config.root}/lib) 
```

然后你可以像这样渲染你的寻呼机

```
view_context.will_paginate(@posts, renderer: CustomLinkRenderer) 
```

希望这对编码有所帮助和快乐

# android - Android：实现了 onClickListener、NullPointerException

> ID：12045969
> 
> 赞同：1
> 
> 时间：2012-08-20T22:12:49.977
> 
> 标签：android, android-widget

这可能是我有限的经验，但我只是遇到了一个让我感到困惑的奇怪错误。我有一个带有一堆按钮的活动，然后将它们分配到二维数组（btns [] []）中。最初，我曾经使用匿名类为每个按钮设置一个 OnClick 侦听器，基本上如下所示：

```
btns[x][y].setOnClickListener(new OnClickListener(() {
    onClick(View v) {
        btns_OnClick(x, y, btns[x][y]);
    } 
```

在这种情况下，x 和 y 并不是硬编码常量。

由于这真的困扰着我，我实现了：

```
private class TimerButtonOnClickListener implements OnClickListener {
    int[] crds;

    public TimerButtonOnClickListener(int row, int col) {
        crds = new int[] { row, col };
    }

    public void onClick(View v) {
        btns_OnClick(crds[0], crds[1],
        btns[crds[0]][crds[1]]);
    }
} 
```

并将监听器分配给按钮，如下所示：

```
 for (int i = 0; i < 6; i++)
        for (int j = 0; j < 2; j++)
            btns[i][j].setOnClickListener(new TimerButtonOnClickListener(i, j)); 
```

以上发生在 onCreate 中，但崩溃不会立即发生。实际上，我不知道它在哪里崩溃。LogCat 给出

```
FATAL EXCEPTION: main
 java.lang.NullPointerException
    at android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1061)
    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1078)
    at android.os.Handler.handleCallback(Handler.java:605)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4340)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

我使用处理程序从 Timer Task 调用 ui 更新，但即使我删除了计时器，我仍然会收到此错误，所以它可能不是我自己的 Handler 在那里中断。

除此之外，我没有对源代码进行任何更改。（我什至有差异，而且我也没有触及任何其他文件。）

我做错什么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:19:07.287

该错误与按钮无关。如果是这种情况，堆栈跟踪会提到“按钮”、“onClick”或与按钮相关的东西。

相反，`NullPointerException`当系统连接到`Service`. 查看异常发生位置的[来源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/app/LoadedApk.java#LoadedApk.ServiceDispatcher.doConnected%28android.content.ComponentName%2Candroid.os.IBinder%29)

> 在 android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1061)

```
if (service != null) {
    // mConnection is a ServiceConnection
    mConnection.onServiceConnected(name, service); // 1061
} 
```

可以看出它很可能与[Context#bindService()](http://developer.android.com/reference/android/content/Context.html#bindService%28android.content.Intent,%20android.content.ServiceConnection,%20int%29)相关`null` `ServiceConnection`

# c# - 将数组的值加上其他变量的值保存到硬盘驱动器中

> ID：12045973
> 
> 赞同：1
> 
> 时间：2012-08-20T22:13:04.613
> 
> 标签：c#, variables, storing-information

我有`byte[] array`一个位图。我可以通过以下方式将其保存到文件中：

```
File.WriteAllBytes("path&fileName", byte[]arrayName); 
```

还有其他变量引用 this `byte[] array`，比如它的名字，它的原始位置等。总之，为了保存位图引用值，我如何将数据集中保存或将几个变量分组到一个集合中？

```
(data = byte[], name=string, loctionX = int, locationY = int, Width=int ....etc) 
```

这个任务是只属于数据库字段还是有其他方法？例如，我可以使用 XML 或 linq 吗？（我试图猜测）（：我试图避免在我的项目中涉及数据库（SqlDatasource 连接......等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:28:06.193

您应该为要存储和序列化的值声明一个 POCO。例如：

```
public class Foo {
    public byte[] Data {get;set;}
    public string Name {get;set;}
    public int LocationX {get;set;}
    // ... etc
} 
```

现在选择任何序列化程序；XmlSerializer、DataContractSerializer、protobuf-net、BinaryFormatter、JSON.NET - 任何都可以；并使用它从/向磁盘读取/写入实例。例如：

```
Foo obj = ...
using(var file = File.Create(path)) {
    var ser = new XmlSerializer(typeof(Foo));
    ser.Serialize(file, obj);
} 
```

# android - 在 android 应用程序中为活动/类添加书签

> ID：12045974
> 
> 赞同：1
> 
> 时间：2012-08-20T22:13:24.690
> 
> 标签：android, eclipse, android-activity, bookmarks

好的，我正在制作一个报价应用程序，并且想知道我怎样才能有一个可以为特定活动添加书签的意图？所以我想要的是当用户单击一个按钮时，它将活动添加到另一个包含书签/收藏夹的活动中。谁可以给我解释一下这个？还是简单的教程？

这是我拥有的代码：我想知道如何添加此代码来编程按钮以在另一个活动中创建新按钮？: `按钮 btn=new Button(this);

btn.setId(btn);

btn.setBackgroundResource(R.drawable.image);

btn.setMinimumHeight(150);

btn.setMinimumWidth(150);

相对布局.addView(btn); `

谢谢，非常感谢任何帮助，我只是一个想学习的菜鸟。；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:44:59.613

它需要一些逻辑，当单击 Bookmarking 按钮时，在 Bookmarks 活动中创建一个指向书签活动的意图。

```
Example: 
```

活动 1 有一个称为书签的按钮。当我单击按钮时，在作为书签的活动 2 中创建了一个引用活动 1 的新按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T23:23:59.373

我认为你把情况弄得太复杂了。听起来您想简单地创建和存储一个类列表，然后从另一个活动中访问该列表。

首先，当用户单击按钮记录书签时，我建议将类的名称存储在 SharedPreferences 中。SharedPreferences 允许您将名称-值对存储到文件中，以便以后从任何活动中访问。

```
SharedPreferences sp = this.getSharedPreferences("file_name", MODE_PRIVATE);
Editor editor = sp.edit();
editor.putString("class_name", "your.class.path.TestClassActivity");
editor.commit(); 
```

稍后，您可以访问所有保存的类名。有关获取 SharedPreferences 文件中所有键的方法，请参见[此处。](https://stackoverflow.com/questions/9310479/how-to-iterate-through-all-keys-of-shared-preferences)

最后，一旦你有了所有的类名，你就可以使用它们来构建你的意图。

```
String myClass = "TestClassActivity";
Class<?> cl = null;
try {
    cl = Class.forName(myClass);
} catch (ClassNotFoundException e) {
    e.printStackTrace();
}
Intent myIntent = new Intent(getApplicationContext(), cl);
startActivity(myIntent); 
```

编辑：我创建了一个使用上述内容的示例项目。它可以从 www.sourceforge.net/projects/androidbookmark/ 下载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:17:19.030

不确定我有没有遇到您的问题，但看起来您的应用程序设计有误。我怀疑您在单个活动中显示了许多引用（引用某人？）。因此，您需要存储的只是要显示的报价的 id，然后，当用户点击按钮时，触发您的 QuoteActivity 并在捆绑中传递存储的报价。

# javascript - 使用 Redis 扩展 Socket.IO，然后扩展 Redis 本身

> ID：12045976
> 
> 赞同：6
> 
> 时间：2012-08-20T22:13:52.303
> 
> 标签：javascript, node.js, redis, socket.io, node-redis

在使用 Node.js 和 socket.io 一段时间后，我明白如果我希望我的应用程序支持多达 100 万并发用户，我需要对其进行扩展，所以我开始使用 Redis 来处理`PUB/SUB`套接字之间的消息并运行大量套接字.io 服务器实例，在同一台机器和其他机器上，但我所有的 socket.io 服务器都使用同一个 Redis 服务器。

这让我想：有什么意义？我是否需要更多的 redis 服务器并在它们之间进行扩展？我的观点是，他们将永远是顶级服务器的瓶颈。

我的问题是，是否可以扩展 Redis？如果是的话，我所有连接到不同 socket.io 服务器的套接字如何能够在 Redis 服务器之间进行 PUB/SUB？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:57:24.843

我认为您正在寻找的是[Redis Cluster](http://redis.io/download)。它在该页面上被称为“正在处理”和“希望今年夏天”。

[这里](http://redis.io/presentation/Redis_Cluster.pdf)有一个演示。它基本上是散列+单个主从冗余。但它还没有准备好。获取更多信息的最佳选择是访问这些产品的论坛和 IRC。

如果有人在做类似的事情，他们将在这些频道上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-08T15:51:15.593

对于更多的读者来说，使用 socket.io 和它的 redis 适配器是不可扩展的（至少现在是这样）。在后台，redis 适配器使用 pub/sub 进行广播。这是关于此的讨论：[https ://github.com/redis/redis/issues/2672](https://github.com/redis/redis/issues/2672)

需要强调的 1 件事：Redis 集群不是答案（在上面的问题中讨论或查看下面的 youtube 链接以获取更多详细信息）

我在这里找到了一种关于扩展 Redis pubsub 的有趣解决方案：[https ://redislabs.com/wp-content/uploads/2018/04/Redis-Day-TLV-2018-Scaling-Redis-PubSub.pdf](https://redislabs.com/wp-content/uploads/2018/04/Redis-Day-TLV-2018-Scaling-Redis-PubSub.pdf)

观看 youtube：[https ://www.youtube.com/watch?v=6G22a5Iooqk&ab_channel=RedisLabs](https://www.youtube.com/watch?v=6G22a5Iooqk&ab_channel=RedisLabs)

# ruby - 了解和使用项目特定的 .rvmrc rvm 配置文件

> ID：12045979
> 
> 赞同：1
> 
> 时间：2012-08-20T22:14:29.503
> 
> 标签：ruby, rvm

刚开始使用 Ruby。

我正在尝试使用 rvm。现在，对于 Project AI，我正在尝试指定一个指定的 Ruby 版本和一个 gemset。

```
$ cat projecta/.rvmrc
rvm 1.8.7@projecta 
```

我的理解是@之前的部分指定了Ruby版本，@之后的部分指定了gemset名称。gemset IMU 是提供一个项目特定的隔离位置，您可以在其中安装 gem。

在我签入此项目后，我可以做些什么来自动化创建 gemset 和安装正确 Ruby 版本的过程，以便其他人在以后签出该项目？

请提出适当的替代方案，因为我今天才刚刚开始使用 Ruby。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T22:48:35.730

### 老路

确保 gemset / ruby​​ 可用，请使用`.rvmrc`：

```
rvm use 1.8.7@projecta --install --create 
```

如果丢失，它将安装 ruby​​，如果丢失，它将创建 gemset。

特别注意，请不要使用 1.8.7，它已弃用 ruby​​，几乎不支持（安全补丁到 2013 年一半），您应该坚持使用最新的可用 ruby​​：

```
rvm use ruby 
```

此时为：1.9.3-p194

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T22:55:34.877

### 添加按需语法

您的语法将无法按书面方式工作。如果您想强制人们按需编译 rubies 并创建 gemset，而不是在事情不存在时被警告，您需要一个像这样的项目*.rvmrc*文件：

```
# Compile rubies on demand.
rvm_install_on_use_flag=1

# Create gemsets on demand.
rvm_gemset_create_on_use_flag=1

# Use ruby-1.8.7 while in project tree.
rvm use 1.8.7

# Use gemset "projecta" while in project tree.
rvm gemset use projecta 
```

当然还有其他方法可以做到这一点，但这种方式使所有内容都变得明确，如果需要，您可以注释掉各个行。

### 也可以看看

[https://rvm.io/workflow/rvmrc/](https://rvm.io/workflow/rvmrc/)

# c# - 静态事件未在不同的 dll 中订阅

> ID：12045980
> 
> 赞同：3
> 
> 时间：2012-08-20T22:14:32.727
> 
> 标签：c#, winforms

我有一个生成 dll 的 WinForms 控件项目。还有一个使用第一个项目的第二个 dll 项目（也是 winforms 控件）。还有第三个 winforms 项目，这次是一个表单，它使用第二个项目。所以[第三个项目] <>-----> [第二个项目] <>--------> [第一个项目]

第一个项目公开了一个静态事件。我正在尝试从第三个项目订阅该事件。在 += 调用之后，该事件保持为空（不是订阅）。

为什么不订阅？是因为 Winforms 控件有自己的线程吗？FirstProject 用户控件是在某个时间点动态创建的。但我希望静态能够正常工作，而无需做任何其他事情，

项目一

```
namespace Something
{
  public partial class FirstClass : UserControl
  {
    ...
    public delegate void EventHandler();
    public static event EventHandler MyEvent;
    ...
  }
} 
```

项目 3

```
namespace Another
{
  public partial class ThirdClass : Form
  {
     ...
     public ThirdClass()
     {
       ....
       Something.FirstClass.MyEvent += new Something.FirstClass.EventHandler(MyHandler);
     }
     public void MyHandler()
     {
     }
     ...
   }
 } 
```

**编辑** 我创建了一个小应用程序，它具有获取三个项目和静态事件的基础知识。它有效。因此，正在发生其他事情。

**编辑 2** 包含第一个项目的 dll，即带有事件的项目，被加载了两次。我刚刚添加了一个别名，但没有帮助。并且仍然不会解释在 += 之后事件仍然为空。

**编辑 3**我转换了事件，所以我有添加/删除访问器对。它确实进入了添加。Handler 方法正确地获取了值（因此没有 null），但是一旦它出去，又是 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:28:27.227

静态事件应该可以正常工作。尝试调试您的代码以确保正在调用事件注册并且事件本身按预期触发。该事件不关心线程。无论哪种方式，它都会接受注册。但是，如果您尝试在 UI 线程之外的线程上编辑表单，线程将导致异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:39:40.537

原因将在我的**EDIT 2**中。因为是静态事件，所以加载两次 dll（两个不同的路径）会创建两个不同的静态事件（或两个不同的处理程序）。我的**EDIT 3**清楚地表明该事件正在被订阅。

一旦我强制第三个项目（订阅静态事件的那个）从与创建事件的项目相同的位置加载 dll（我不想使用 GAC），一切正常。

# python - python, subprocess.call(["rm", "inv.mt0"], shell=True) 不工作

> ID：12045986
> 
> 赞同：2
> 
> 时间：2012-08-20T22:15:15.940
> 
> 标签：python, subprocess

朋友们，

我有一个简单的脚本

```
import subprocess

subprocess.call(["./run_xf"])

old=open('./inv.mt0','r')

lines=old.readlines()

lines=lines[3:]

new=open('./inv.mt1','w')

new.writelines(lines)

old.close()

new.close()

subprocess.call(["rm", "inv.mt0"], shell=True) 
```

除最后一个代码外，所有代码都有效。

run_xf 运行 hspice 并生成 inv.mt0。然后我将部分 inv.mt0 复制到 inv.mt1。然后我想删除 inv.mt0。但这不起作用。

对于这个特定的例子，它抱怨 rm 找不到操作数。但是如果我把它们写在一起，它也不会删除文件。

谢谢

xf

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T22:30:03.990

如果您正在使用，则`shell=True`必须将字符串传递给`subprocess.call`，而不是列表。有关更多详细信息，请参阅[http://docs.python.org/library/subprocess.html#subprocess.call](http://docs.python.org/library/subprocess.html#subprocess.call)。

`shell=True`但是，由于安全隐患，不建议调用子进程。您应该删除`shell=True`并保留列表样式的参数。

# cakephp - Cakephp 和 Ajax-Post

> ID：12045989
> 
> 赞同：0
> 
> 时间：2012-08-20T22:15:38.407
> 
> 标签：cakephp, post, json-rpc

我已经为 ajax 和 json-requests 设置了蛋糕 php，主要使用这个教程：http: [//book.cakephp.org/2.0/en/views/json-and-xml-views.html](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)

一切正常，但是如果我发出一个 post 请求（在这种情况下是使用 cakephp 和 json-rpc），Cake 会进入一个无限循环，在我的数据库中保存数百个空条目，直到它最终耗尽内存，即使我的控制器和完全为空，只要有一些 json 输出（即使 505 错误消息有效）。这是由于自动魔术吗？当我传递正确设置以适合模型的数据时，我可以将数据保存为意图。但是如果发送其他任何东西（例如只是参数或空数据），我会进入这个无限循环。

即使我的帖子包含错误，我认为这不应该发生。

这是错误消息：

```
<b>Fatal error</b>:  Allowed memory size of 33554432 bytes exhausted (tried to allocate 71 bytes) in <b>/var/www/****/cake/lib/Cake/Controller/Controller.php</b> on line <b>333</b><br /> 
```

这是我对 jquery 的调用：

```
$.ajax({
        url: '/dezem/cake/users.json', //even if I send the data to user without the json extension, the same happens...
        type: 'POST',
        dataType: 'json',
        data: '{"method": "echo", "params": ["Hello JSON-RPC"], "id": 1}',
        success: function(){alert("YEEHHEHAAW")},
        error: function(){alert("Nööööööööööööööö")}
    }) 
```

按照这里的要求，我的控制器内的代码：

```
class UsersController extends AppController {
public $helpers = array('Js', 'Html');
public $components = array('RequestHandler');
....

public function index() {       
    $this->User->recursive = -1;

    $users = $this->User->find('all');
    if($this->RequestHandler->isAjax()){
        $this->autoLayout = $this->autoRender = false;      
        if ($this->request->is('post')){
            $this->set(array(
                'data' => $users,
                '_serialize' => array('data')
            ));
            $this->render('/layouts/json');
        }   
        else if ($this->request->is('get')) {           
                $this->set(array(
                   'data' => $users,
                    '_serialize' => array('data')
                ));
                $this->render('/layouts/json');
        }
    }
}
} 
```

正如我所说，一个空的控制器会导致相同的结果：

```
 public function index() {
    } 
```

# sql-server - MDX 查询非常慢并且在 SSRS 中返回内存异常

> ID：12045993
> 
> 赞同：1
> 
> 时间：2012-08-20T22:16:01.857
> 
> 标签：sql-server, ssrs-2008, ssas, mdx

我正在尝试从以下多维表达式 (MDX) 查询中获取总金额超过 100k 的所有记录的详细列表：

```
with member [measures].[total] as 
[Measures].[m1] + [Measures].[m2] + [Measures].[m3]
select non empty
[measures].[total] on columns, 
non empty filter ([dim1].[h1].allmembers
* [dim1].[h2].allmembers
* [Loss Date].[Date].[Year].allmembers
* [Dim1].[h3].allmembers 
, [measures].[total]>100000 and [Measures].[Open File Count]>0) on rows
from [Monthly Summary]
where ([1 Date - Month End].[Month End Date].[Month].&[20120331]) 
```

虽然我通过创建存储过程获得了快速结果并且最终结果少于 1000 行，但我的 MDX 查询在 SSMS 中永远运行，并且在 SSRS 中返回内存异常。关于如何优化或增强它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:19:31.983

I would recommend a couple of changes.

First, do you really want the All member of each of your dimensions to be returned in the query? They will be included if they meet the condition in the filter. Also, I have found changing a where clause to a subselect to perform better in some cases. You need to test to see if it changes performance. Next, you can reduce the number of members that you're filtering by using a NonEmpty function first, by putting it inside the Filter function. Also, in some cases, using a polymorphic operator (*) performs worse than using a CrossJoin function or creating a tuple set of your members. The NON EMPTY on columns is unnecessary when you have only one item on the axis. I've combined all of these suggestions below:

```
with member [measures].[total] as 
[Measures].[m1] + [Measures].[m2] + [Measures].[m3]
select 
[measures].[total] on columns, 
filter (
   nonempty(
      ([dim1].[h1].[h1].members,
       [dim1].[h2].[h2].members,
       [Loss Date].[Date].[Year].members,
       [Dim1].[h3].[h3].members)
      , [measures].[m1]),
, [measures].[total]>100000 and [Measures].[Open File Count]>0) on rows
from
(select [1 Date - Month End].[Month End Date].[Month].&[20120331] on columns 
from [Monthly Summary]) 
```

See this for a bit of explanation on the NON EMPTY versus NonEmpty: [http://blogs.msdn.com/b/karang/archive/2011/11/16/mdx-nonempty-v-s-nonempty.aspx](http://blogs.msdn.com/b/karang/archive/2011/11/16/mdx-nonempty-v-s-nonempty.aspx). In some cases putting a NonEmpty function inside a Filter function can produce a performance hit, sometimes not - you need to test.

The problem might be in a dimension or cube design (storage engine problem) and not in the query (formula engine problem). You can diagnose using the techniques here: [http://www.microsoft.com/en-us/download/details.aspx?id=661](http://www.microsoft.com/en-us/download/details.aspx?id=661). The whitepaper was written for SSAS 2005, but still applies to later versions of SSAS.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T06:59:43.040

您可以使用`Having`而不是`Filter`，因为它是在 之后应用的`Non Empty`，您可能会获得更好的性能（请参阅Chris Webb 的[这篇出色的博客文章](http://cwebbbi.wordpress.com/2006/01/04/the-having-clause/)）。这将是查询的新版本：

```
with member [measures].[total] as 
[Measures].[m1] + [Measures].[m2] + [Measures].[m3]
select non empty
[measures].[total] on columns, 
non empty 
[dim1].[h1].allmembers
* [dim1].[h2].allmembers
* [Loss Date].[Date].[Year].allmembers
* [Dim1].[h3].allmembers 
having [measures].[total]>100000 and [Measures].[Open File Count]>0 on rows
from [Monthly Summary]
where ([1 Date - Month End].[Month End Date].[Month].&[20120331]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:50:37.107

要减少内存，请订购您的尺寸。

代替：

```
[dim1].[h1].allmembers
* [dim1].[h2].allmembers
* [Loss Date].[Date].[Year].allmembers
* [Dim1].[h3].allmembers 
```

利用

```
[dim1].[h1].allmembers
* [dim1].[h2].allmembers
* [Dim1].[h3].allmembers
* [Loss Date].[Date].[Year].allmembers 
```

在幕后，SSAS 将内部加入 dim1 成员，外部加入 Loss Date 成员。

# vb.net - Now.ToFileTime() 在不同的调用中返回相同的时间

> ID：12045995
> 
> 赞同：1
> 
> 时间：2012-08-20T22:16:11.600
> 
> 标签：vb.net, datetime, timestamp

我有一个程序使用`Now.ToFileTime()`.NET 中的函数来获取文件名的时间戳。我已经验证此代码仅在 1 个线程上调用，因此我不担心并发性。

我的方法中有以下测试代码：

```
Dim Time As String = Now.ToFileTime()
IO.File.AppendAllText("D:\test.txt", Time & " - " & System.Threading.Thread.CurrentThread.ManagedThreadId().ToString() & vbCrLf) 
```

这最终将以下内容输出到 test.txt：

```
129899740120622239 - 4
129899740140465735 - 4
129899740140465735 - 4
129899740140465735 - 4
129899740140465735 - 4
129899740160465479 - 4
129899740160465479 - 4
129899740160621727 - 4
129899740160621727 - 4 
```

所以你可以看到时间戳重复了 2 次或更多次。偶尔我会得到一个独特的，但不是很常见。每次调用此方法时，我不应该得到唯一的时间。所有这些都至少相距几家。我不只是按顺序调用它（但即使那样我也希望得到不同的时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:11:19.857

Set a global variable and ensure it has changed before using it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:24:47.743

感谢大家，

给定 Tim 指出的系统时间分辨率；我放入了一个私有静态变量作为索引以确保唯一性。